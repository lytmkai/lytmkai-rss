<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Vue 3.4 æ­£å¼å‘å¸ƒï¼š5ä¸ªä¸å¯é”™è¿‡çš„æ€§èƒ½ä¼˜åŒ–ä¸Composition APIæ–°ç‰¹æ€§]]></title>    <link>https://juejin.cn/post/7572524368879452194</link>    <guid>https://juejin.cn/post/7572524368879452194</guid>    <pubDate>2025-11-16T04:16:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572524368879452194" data-draft-id="7572537221540790287" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue 3.4 æ­£å¼å‘å¸ƒï¼š5ä¸ªä¸å¯é”™è¿‡çš„æ€§èƒ½ä¼˜åŒ–ä¸Composition APIæ–°ç‰¹æ€§"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-16T04:16:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue 3.4 æ­£å¼å‘å¸ƒï¼š5ä¸ªä¸å¯é”™è¿‡çš„æ€§èƒ½ä¼˜åŒ–ä¸Composition APIæ–°ç‰¹æ€§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T04:16:24.000Z" title="Sun Nov 16 2025 04:16:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vue 3.4 æ­£å¼å‘å¸ƒï¼š5ä¸ªä¸å¯é”™è¿‡çš„æ€§èƒ½ä¼˜åŒ–ä¸Composition APIæ–°ç‰¹æ€§</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Vue.js ä½œä¸ºå½“ä»Šæœ€æµè¡Œçš„å‰ç«¯æ¡†æ¶ä¹‹ä¸€ï¼Œä¸€ç›´åœ¨ä¸æ–­æ¼”è¿›å’Œå®Œå–„ã€‚2023å¹´åº•ï¼ŒVueå›¢é˜Ÿæ­£å¼å‘å¸ƒäº†Vue 3.4ç‰ˆæœ¬ï¼ˆä»£å·"ğŸ€ Slam Dunk"ï¼‰ï¼Œè¿™æ¬¡æ›´æ–°å¸¦æ¥äº†å¤šé¡¹æ€§èƒ½ä¼˜åŒ–å’ŒComposition APIçš„å¢å¼ºåŠŸèƒ½ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æ5ä¸ªæœ€é‡è¦çš„æ€§èƒ½æ”¹è¿›å’Œ3ä¸ªComposition APIæ–°ç‰¹æ€§ï¼Œå¸®åŠ©å¼€å‘è€…å……åˆ†åˆ©ç”¨è¿™äº›æ”¹è¿›æ¥æ„å»ºæ›´é«˜æ•ˆçš„Vueåº”ç”¨ã€‚</p>
<h2 data-id="heading-2">ä¸€ã€æ ¸å¿ƒæ€§èƒ½ä¼˜åŒ–è§£æ</h2>
<h3 data-id="heading-3">1. æ¨¡æ¿ç¼–è¯‘å™¨æ€§èƒ½æå‡40%</h3>
<p>Vue 3.4å¯¹æ¨¡æ¿ç¼–è¯‘å™¨è¿›è¡Œäº†å…¨é¢é‡å†™ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§å‹æ¨¡æ¿çš„å¤„ç†ä¸Šè¡¨ç°å°¤ä¸ºçªå‡ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ—§ç‰ˆç¼–è¯‘å™¨å¤„ç†å¤æ‚v-forçš„é€»è¾‘</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processFor</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// è¾ƒæ…¢çš„é€’å½’å¤„ç†</span>
}

<span class="hljs-comment">// æ–°ç‰ˆé‡‡ç”¨çº¿æ€§å¤„ç†æ–¹å¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">optimizeFor</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// åŸºäºé™æ€åˆ†æçš„ä¼˜åŒ–è·¯å¾„</span>
}
</code></pre>
<p>å…³é”®æŠ€æœ¯ç‚¹ï¼š</p>
<ul>
<li>ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰ç”Ÿæˆé€Ÿåº¦æå‡30%</li>
<li>SSRç¼–è¯‘æ—¶å†…å­˜å ç”¨å‡å°‘50%</li>
<li>v-if/v-foråµŒå¥—å¤„ç†é‡‡ç”¨æ–°çš„å¯å‘å¼ç®—æ³•</li>
</ul>
<p>å®æµ‹æ•°æ®è¡¨æ˜ï¼Œåœ¨ä¸€ä¸ªåŒ…å«1000+èŠ‚ç‚¹çš„å¤æ‚è¡¨å•åœºæ™¯ä¸‹ï¼Œç¼–è¯‘æ—¶é—´ä»120msé™è‡³72msã€‚</p>
<h3 data-id="heading-4">2. Reactivityç³»ç»Ÿå¾®ä¼˜åŒ–</h3>
<p>å“åº”å¼ç³»ç»Ÿçš„åº•å±‚å®ç°æœ‰è¿™äº›æ”¹è¿›ï¼š</p>
<ul>
<li>Proxy handlerè°ƒç”¨å‡å°‘15%</li>
<li>track/tiggeræ“ä½œä½¿ç”¨æ›´è½»é‡çš„æ•°æ®ç»“æ„</li>
<li>effectè°ƒåº¦å™¨å¼•å…¥ä¼˜å…ˆçº§é˜Ÿåˆ—</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ–°ç‰ˆå“åº”å¼è·Ÿè¸ªç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> proxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key</span>) {
    <span class="hljs-title function_">track</span>(target, key) <span class="hljs-comment">// æ›´å¿«çš„è·¯å¾„æŸ¥æ‰¾</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(...<span class="hljs-variable language_">arguments</span>)
  }
})
</code></pre>
<h3 data-id="heading-5">3. Patch Flagä¼˜åŒ–ç­–ç•¥è°ƒæ•´</h3>
<p>è™šæ‹ŸDOMçš„diffingç®—æ³•æ›´æ–°ï¼š</p>
<ul>
<li>dynamicChildrenå¤„ç†é€»è¾‘é‡æ„</li>
<li>Block Treeéå†é¡ºåºä¼˜åŒ–</li>
<li>FragmentèŠ‚ç‚¹ç‰¹æ®Šå¤„ç†</li>
</ul>
<pre><code class="hljs language-jsx" lang="jsx">&lt;div&gt;
  &lt;!-- <span class="hljs-keyword">static</span> node --&gt;
  
&lt;/div&gt;
</code></pre>
<h2 data-id="heading-6">Composition APIé©å‘½æ€§æ”¹è¿›</h2>
<h3 data-id="heading-7">setupè¯­æ³•ç³–çš„é‡å¤§å‡çº§</h3>
<pre><code class="hljs language-typescript" lang="typescript"/></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PandaCoderï¼šæˆ‘çš„ä¸ªäººå¼€å‘è€…å·¥å…·è¿›åŒ–ä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7572525491538624554</link>    <guid>https://juejin.cn/post/7572525491538624554</guid>    <pubDate>2025-11-16T04:31:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572525491538624554" data-draft-id="7572524368879484962" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" PandaCoderï¼šæˆ‘çš„ä¸ªäººå¼€å‘è€…å·¥å…·è¿›åŒ–ä¹‹è·¯"/> <meta itemprop="keywords" content="åç«¯,IntelliJ IDEA,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-16T04:31:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èˆ’ä¸€ç¬‘ä¸ç§ƒå¤´"/> <meta itemprop="url" content="https://juejin.cn/user/4257747754552599"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             PandaCoderï¼šæˆ‘çš„ä¸ªäººå¼€å‘è€…å·¥å…·è¿›åŒ–ä¹‹è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4257747754552599/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èˆ’ä¸€ç¬‘ä¸ç§ƒå¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T04:31:15.000Z" title="Sun Nov 16 2025 04:31:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šä»ä¸ªäººé¡¹ç›®åˆ°å¼€å‘è€…å·¥å…·çš„è½¬å˜</h2>
<p>åœ¨æŠ€æœ¯é¢†åŸŸï¼Œæˆ‘å¸¸å¸¸æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šä»€ä¹ˆæ ·çš„å·¥å…·æ‰èƒ½çœŸæ­£å¸®åŠ©å¼€å‘è€…ï¼Ÿæˆ‘æ„è¯†åˆ°çœŸæ­£çš„ä»·å€¼ä¸åœ¨äºåŠŸèƒ½çš„æ•°é‡ï¼Œè€Œåœ¨äºè¿™äº›åŠŸèƒ½æ˜¯å¦çœŸæ­£è§£å†³äº†ç”¨æˆ·çš„ç—›ç‚¹ã€‚ä½œä¸ºPandaCoderçš„ç‹¬ç«‹å¼€å‘è€…ï¼Œæˆ‘çš„æ ¸å¿ƒç†å¿µæ­£æ˜¯å»ºç«‹åœ¨è¿™ä¸€è®¤çŸ¥ä¹‹ä¸Šâ€”â€”<strong>ä¸å…¶å †ç ŒåŠŸèƒ½ï¼Œä¸å¦‚å€¾å¬ç”¨æˆ·çš„å£°éŸ³</strong>ã€‚</p>
<h3 data-id="heading-1">å·¥å…·çš„æœ¬è´¨</h3>
<p>æ­£å¦‚çº³ç“¦å°”æ‰€è¨€ï¼š"å·¥å…·åº”è¯¥ä¸ºä½ å·¥ä½œï¼Œè€Œä¸æ˜¯ä½ ä¸ºå·¥å…·å·¥ä½œã€‚"æˆ‘è®¾è®¡PandaCoderçš„åˆè¡·æ˜¯åˆ›å»ºä¸€ä¸ªèƒ½å¤ŸçœŸæ­£ç†è§£å¼€å‘è€…éœ€æ±‚çš„æ™ºèƒ½åŠ©æ‰‹ï¼Œè€Œä¸æ˜¯åˆä¸€ä¸ªéœ€è¦å¤æ‚é…ç½®çš„è´Ÿæ‹…ã€‚</p>
<h2 data-id="heading-2">ç”¨æˆ·åé¦ˆï¼šäº§å“è¿›åŒ–çš„æ ¸å¿ƒé©±åŠ¨åŠ›</h2>
<h3 data-id="heading-3">ä¸ºä»€ä¹ˆå»ºè®®æ¯”æ‰“èµæ›´é‡è¦ï¼Ÿ</h3>
<p>åœ¨PandaCoderçš„è®¾è®¡ä¸­ï¼Œæˆ‘åˆ»æ„å°†"âœï¸ æ’ä»¶çš„å»ºè®®"åŠŸèƒ½ç½®äº"â˜•ï¸ è¯·ä½œè€…å–æ¯"ä¹‹å‰ã€‚è¿™ä¸æ˜¯å¶ç„¶ï¼Œè€Œæ˜¯åŸºäºä¸€ä¸ªæ·±åˆ»çš„æ´å¯Ÿï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d818826f430d44e9b279fc77876412b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763872275&amp;x-signature=eQdpb9YiOrepJUOiwEYdggGtOWM%3D" alt="" loading="lazy"/></p>
<p><strong>ç”¨æˆ·çš„å»ºè®®æ˜¯äº§å“è¿›åŒ–çš„ç‡ƒæ–™ï¼Œè€Œæ‰“èµåªæ˜¯è¿™ä¸ªè¿‡ç¨‹çš„å‰¯äº§å“ã€‚</strong></p>
<p>å½“å¼€å‘è€…æ„¿æ„èŠ±æ—¶é—´æä¾›åé¦ˆæ—¶ï¼Œå®é™…ä¸Šæ˜¯åœ¨æŠ•èµ„è¿™ä¸ªå·¥å…·çš„æœªæ¥ã€‚è¿™ç§æŠ•èµ„è¿œæ¯”é‡‘é’±æ›´æœ‰ä»·å€¼ï¼Œå› ä¸ºå®ƒåŒ…å«äº†çœŸå®çš„ç”¨æˆ·ä½“éªŒå’Œéœ€æ±‚æ´å¯Ÿã€‚</p>
<h3 data-id="heading-4">åé¦ˆç³»ç»Ÿçš„è®¾è®¡å“²å­¦</h3>
<p>æˆ‘è®¾è®¡çš„åé¦ˆç³»ç»Ÿé‡‡ç”¨äº†ç²¾å¿ƒè®¾è®¡çš„äº¤äº’ä½“éªŒï¼š</p>
<ul>
<li><strong>æ™ºèƒ½é™æµæœºåˆ¶</strong>ï¼šæ¯æ—¥6æ¬¡åé¦ˆé™åˆ¶ï¼Œç¡®ä¿æ¯ä¸€æ¡å»ºè®®éƒ½æ˜¯ç»è¿‡æ·±æ€ç†Ÿè™‘çš„</li>
<li><strong>åˆ†ç±»åé¦ˆ</strong>ï¼šåŠŸèƒ½å»ºè®®ã€Bugåé¦ˆã€ä½¿ç”¨ä½“éªŒã€å…¶ä»–ï¼Œè®©åé¦ˆæ›´æœ‰é’ˆå¯¹æ€§</li>
<li><strong>å³æ—¶ç¡®è®¤</strong>ï¼šç”¨æˆ·æäº¤åç«‹å³æ”¶åˆ°ç¡®è®¤ï¼Œå»ºç«‹åé¦ˆé—­ç¯</li>
</ul>
<p>è¿™ç§è®¾è®¡ä½“ç°äº†å²è’‚æ–‡Â·å·´ç‰¹åˆ©ç‰¹å¼ºè°ƒçš„"ç”¨æˆ·ä½“éªŒå³å“ç‰Œ"ç†å¿µã€‚</p>
<h2 data-id="heading-5">åŠŸèƒ½æ¼”è¿›ï¼šä»ç”¨æˆ·éœ€æ±‚å‡ºå‘</h2>
<h3 data-id="heading-6">ä¸­æ–‡ç¼–ç¨‹åŠ©æ‰‹çš„è¯ç”Ÿ</h3>
<p>æœ€åˆçš„PandaCoderåªæ˜¯ä¸€ä¸ªç®€å•çš„ç¿»è¯‘å·¥å…·ã€‚ä½†é€šè¿‡ç”¨æˆ·åé¦ˆï¼Œæˆ‘å‘ç°ä¸­å›½å¼€å‘è€…çœŸæ­£éœ€è¦çš„æ˜¯<strong>ä»ä¸­æ–‡æ€ç»´åˆ°è‹±æ–‡ä»£ç çš„é¡ºç•…è½¬æ¢</strong>ï¼Œè€Œä¸ä»…ä»…æ˜¯æ–‡å­—ç¿»è¯‘ã€‚</p>
<p>ç”¨æˆ·å»ºè®®ä¿ƒä½¿æˆ‘å¼€å‘äº†ï¼š</p>
<ul>
<li>æ™ºèƒ½å‘½åè½¬æ¢ï¼ˆå°é©¼å³°ã€å¤§é©¼å³°ã€å¤§å†™å¸¦ä¸‹åˆ’çº¿ï¼‰</li>
<li>ä¸­æ–‡ç±»åè‡ªåŠ¨ç”Ÿæˆ</li>
<li>å¤šçº§ç¿»è¯‘å¼•æ“ï¼ˆå›½å†…å¤§æ¨¡å‹ &gt; Googleç¿»è¯‘ &gt; ç™¾åº¦ç¿»è¯‘ï¼‰</li>
</ul>
<h3 data-id="heading-7">Jenkins Pipelineæ”¯æŒçš„è¿›åŒ–</h3>
<p>æœ€åˆåªæ˜¯è¯­æ³•é«˜äº®ï¼Œä½†ç”¨æˆ·åé¦ˆæ­ç¤ºäº†æ›´æ·±å±‚æ¬¡çš„éœ€æ±‚ï¼šå¼€å‘è€…åœ¨ç¼–å†™Pipelineæ—¶éœ€è¦<strong>æ™ºèƒ½è¡¥å…¨ã€ç¯å¢ƒå˜é‡ç®¡ç†ã€æ–‡æ¡£æ”¯æŒ</strong>ã€‚</p>
<p>è¿™äº›åŠŸèƒ½ä¸æ˜¯å‡­ç©ºæƒ³è±¡çš„ï¼Œè€Œæ˜¯æ¥è‡ªçœŸå®ç”¨æˆ·çš„ç—›ç‚¹åé¦ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1015672231340d7865487387b6ad129~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763872275&amp;x-signature=mIJvodtmHcmN%2BFgM0Id6U7REenc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">SpringBooté…ç½®çš„å¯è§†åŒ–</h3>
<p>é€šè¿‡ç”¨æˆ·å»ºè®®ï¼Œæˆ‘å®ç°äº†æŠ€æœ¯æ ˆçš„æ™ºèƒ½è¯†åˆ«å’Œå¯è§†åŒ–æ˜¾ç¤ºã€‚ç°åœ¨å¼€å‘è€…æ‰“å¼€é…ç½®æ–‡ä»¶æ—¶ï¼Œèƒ½å¤Ÿç›´è§‚çœ‹åˆ°ä½¿ç”¨çš„æŠ€æœ¯ç»„ä»¶ï¼Œå¤§å¤§æå‡äº†å¼€å‘æ•ˆç‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/312d7b796b3046a6b7196b0180b0bdc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763872275&amp;x-signature=%2BjLXoq98pShrk%2FynCPl8lvRWMvU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">æ•°æ®é©±åŠ¨çš„äº§å“è¿­ä»£</h2>
<h3 data-id="heading-10">Gitç»Ÿè®¡åˆ†æåŠŸèƒ½</h3>
<p>ç”¨æˆ·åé¦ˆæ˜¾ç¤ºï¼Œå›¢é˜Ÿéœ€è¦æ›´å¥½çš„ä»£ç åä½œæ´å¯Ÿã€‚æˆ‘å¼€å‘äº†ï¼š</p>
<ul>
<li>å¤šç»´åº¦ä»£ç ç»Ÿè®¡</li>
<li>å¯è§†åŒ–å›¾è¡¨å±•ç¤º</li>
<li>è‡ªåŠ¨é‚®ä»¶æŠ¥å‘Šç³»ç»Ÿ</li>
</ul>
<p>è¿™äº›åŠŸèƒ½å¸®åŠ©å›¢é˜Ÿç®¡ç†è€…äº†è§£å¼€å‘è¿›åº¦ï¼Œè¯†åˆ«ç“¶é¢ˆï¼Œä¼˜åŒ–åä½œæµç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/006903a9482d42019a279913d08d8c21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763872275&amp;x-signature=ZbMqjMjCesArBX6Eq1lz%2B%2Bmcf0c%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">å®æ—¶ç›‘æ§ä½“ç³»çš„å»ºç«‹</h3>
<p>åŸºäºç”¨æˆ·å¯¹è°ƒè¯•æ•ˆç‡çš„éœ€æ±‚ï¼Œæˆ‘æ„å»ºäº†å®Œæ•´çš„ç›‘æ§ä½“ç³»ï¼š</p>
<ul>
<li>Elasticsearch DSLç›‘æ§</li>
<li>SQLæ‰§è¡Œç›‘æ§</li>
<li>APIè°ƒç”¨é“¾è¿½è¸ª</li>
</ul>
<p>è¿™äº›åŠŸèƒ½è®©å¼€å‘è€…èƒ½å¤Ÿå®æ—¶äº†è§£åº”ç”¨è¿è¡ŒçŠ¶æ€ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6090af814703472184ad9e6cf228f43f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IiS5LiA56yR5LiN56eD5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763872275&amp;x-signature=FbR8BAQcpHP7QV8qg0dwNhiffj0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-12">ç¤¾åŒºé©±åŠ¨çš„æŠ€æœ¯å†³ç­–</h2>
<h3 data-id="heading-13">ç¿»è¯‘å¼•æ“çš„é€‰æ‹©</h3>
<p>æœ€åˆæˆ‘åªæ”¯æŒç™¾åº¦ç¿»è¯‘ï¼Œä½†ç”¨æˆ·åé¦ˆæ˜¾ç¤ºï¼š</p>
<ul>
<li>å›½å†…å¤§æ¨¡å‹åœ¨æŸäº›åœºæ™¯ä¸‹ç¿»è¯‘è´¨é‡æ›´é«˜</li>
<li>Googleç¿»è¯‘åœ¨å›½é™…åŒ–é¡¹ç›®ä¸­æœ‰ç‹¬ç‰¹ä¼˜åŠ¿</li>
<li>éœ€è¦å¤šå¼•æ“å¤‡ç”¨ç¡®ä¿æœåŠ¡ç¨³å®šæ€§</li>
</ul>
<p>è¿™äº›åé¦ˆä¿ƒä½¿æˆ‘å»ºç«‹äº†ä¸‰çº§ç¿»è¯‘å¼•æ“ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-14">AIåŠ©æ‰‹åŠŸèƒ½çš„æ‰©å±•</h3>
<p>ç”¨æˆ·å»ºè®®è®©æˆ‘æ„è¯†åˆ°ï¼šå¼€å‘è€…éœ€è¦çš„ä¸åªæ˜¯ç¿»è¯‘ï¼Œè¿˜æœ‰<strong>ä»£ç å®¡æŸ¥ã€æŠ€æœ¯å’¨è¯¢ã€å­¦ä¹ è¾…å¯¼</strong>ç­‰AIèƒ½åŠ›ã€‚</p>
<p>è¿™ä¿ƒä½¿æˆ‘é›†æˆäº†å¤šç§AIæ¨¡å‹ï¼ŒåŒ…æ‹¬OpenAIã€Ollamaæœ¬åœ°éƒ¨ç½²ã€å›½å†…å¤§æ¨¡å‹ç­‰ã€‚</p>
<h2 data-id="heading-15">æŠ€æœ¯å®ç°èƒŒåçš„æ€è€ƒ</h2>
<h3 data-id="heading-16">æ€§èƒ½ä¸ç”¨æˆ·ä½“éªŒçš„å¹³è¡¡</h3>
<p>åœ¨å®ç°åŠŸèƒ½æ—¶ï¼Œæˆ‘å§‹ç»ˆéµå¾ªçº³ç“¦å°”çš„å»ºè®®ï¼š"åœ¨æŠ€æœ¯å†³ç­–ä¸­ï¼Œç®€å•æ€§å¾€å¾€æ¯”å¤æ‚æ€§æ›´æœ‰ä»·å€¼ã€‚"</p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>ä½¿ç”¨ConcurrentHashMapç¡®ä¿çº¿ç¨‹å®‰å…¨</li>
<li>å®ç°å»¶è¿ŸåŠ è½½ä¼˜åŒ–æ€§èƒ½</li>
<li>åˆç†çš„ç¼“å­˜ç­–ç•¥æå‡å“åº”é€Ÿåº¦</li>
</ul>
<h3 data-id="heading-17">å¯æ‰©å±•æ€§è®¾è®¡</h3>
<p>æˆ‘é‡‡ç”¨æ¨¡å—åŒ–è®¾è®¡ï¼Œç¡®ä¿æ–°åŠŸèƒ½èƒ½å¤Ÿæ— ç¼é›†æˆã€‚è¿™ç§è®¾è®¡ç†å¿µæ¥æºäºç”¨æˆ·å¯¹æœªæ¥æ‰©å±•æ€§çš„éœ€æ±‚é¢„æœŸã€‚</p>
<h2 data-id="heading-18">ç”¨æˆ·å‚ä¸çš„ä»·å€¼åˆ›é€ </h2>
<h3 data-id="heading-19">ä»ä½¿ç”¨è€…åˆ°å…±å»ºè€…</h3>
<p>PandaCoderçš„æˆåŠŸæ¡ˆä¾‹è¯æ˜ï¼š<strong>å½“ç”¨æˆ·å‚ä¸äº§å“è®¾è®¡æ—¶ï¼Œä»–ä»¬ä»è¢«åŠ¨çš„ä½¿ç”¨è€…è½¬å˜ä¸ºç§¯æçš„å…±å»ºè€…ã€‚</strong></p>
<p>è¿™ç§è½¬å˜å¸¦æ¥çš„ä»·å€¼æ˜¯åŒå‘çš„ï¼š</p>
<ul>
<li>ç”¨æˆ·è·å¾—æ›´ç¬¦åˆéœ€æ±‚çš„å·¥å…·</li>
<li>æˆ‘è·å¾—çœŸå®çš„ç”¨æˆ·æ´å¯Ÿ</li>
<li>æ•´ä¸ªç”Ÿæ€å®ç°è‰¯æ€§å¾ªç¯</li>
</ul>
<h3 data-id="heading-20">åé¦ˆçš„ä¹˜æ•°æ•ˆåº”</h3>
<p>ä¸€ä¸ªç”¨æˆ·çš„å»ºè®®å¯èƒ½å½±å“æ•°åƒåå…¶ä»–ç”¨æˆ·çš„ä½¿ç”¨ä½“éªŒã€‚è¿™ç§ä¹˜æ•°æ•ˆåº”æ˜¯å¼€æºç¤¾åŒºæœ€å¼ºå¤§çš„åŠ›é‡ä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-21">æœªæ¥å±•æœ›ï¼šåŸºäºç”¨æˆ·éœ€æ±‚çš„æŒç»­è¿›åŒ–</h2>
<h3 data-id="heading-22">çŸ­æœŸè§„åˆ’</h3>
<p>åŸºäºå½“å‰ç”¨æˆ·åé¦ˆï¼Œæˆ‘è®¡åˆ’ï¼š</p>
<ul>
<li>å¢å¼ºAIåŠ©æ‰‹åŠŸèƒ½ï¼ˆä»£ç ç”Ÿæˆã€é‡æ„å»ºè®®ï¼‰</li>
<li>ä¼˜åŒ–Gitç»Ÿè®¡å›¾è¡¨æ ·å¼</li>
<li>æ”¹è¿›é‚®ä»¶æ¨¡æ¿è‡ªå®šä¹‰åŠŸèƒ½</li>
</ul>
<h3 data-id="heading-23">ä¸­é•¿æœŸæ„¿æ™¯</h3>
<p>ç”¨æˆ·å»ºè®®æŒ‡å¼•æˆ‘å‘æ›´æ™ºèƒ½åŒ–çš„æ–¹å‘å‘å±•ï¼š</p>
<ul>
<li>ä»£ç æ™ºèƒ½åˆ†æä¸å»ºè®®ç³»ç»Ÿ</li>
<li>é¡¹ç›®å¥åº·åº¦è¯„ä¼°æŠ¥å‘Š</li>
<li>å›¢é˜Ÿåä½œæ•ˆç‡åˆ†æå·¥å…·</li>
</ul>
<h2 data-id="heading-24">ç»“è¯­ï¼šå…±å»ºæ›´å¥½çš„å¼€å‘è€…å·¥å…·</h2>
<p>PandaCoderçš„æˆé•¿å†ç¨‹å°è¯äº†ä¸€ä¸ªé‡è¦è§‚ç‚¹ï¼š<strong>æœ€å¥½çš„äº§å“åŠŸèƒ½æ¥æºäºçœŸå®ç”¨æˆ·çš„éœ€æ±‚ã€‚</strong></p>
<p>æˆ‘ç›¸ä¿¡ï¼ŒæŠ€æœ¯å·¥å…·çš„ä»·å€¼ä¸åœ¨äºå®ƒæ‹¥æœ‰å¤šå°‘åŠŸèƒ½ï¼Œè€Œåœ¨äºå®ƒæ˜¯å¦çœŸæ­£è§£å†³äº†å¼€å‘è€…çš„é—®é¢˜ã€‚è€Œäº†è§£è¿™äº›é—®é¢˜çš„å”¯ä¸€é€”å¾„ï¼Œå°±æ˜¯å€¾å¬ç”¨æˆ·çš„å£°éŸ³ã€‚</p>
<p>æ­£å¦‚å²è’‚æ–‡Â·å·´ç‰¹åˆ©ç‰¹æ‰€è¯´ï¼š"æˆåŠŸçš„ä¼ä¸šä¸æ˜¯é‚£äº›æ‹¥æœ‰æœ€å¥½äº§å“çš„ä¼ä¸šï¼Œè€Œæ˜¯é‚£äº›æœ€äº†è§£å®¢æˆ·éœ€æ±‚çš„ä¼ä¸šã€‚"</p>
<p>æˆ‘é‚€è¯·æ¯ä¸€ä½å¼€å‘è€…å‚ä¸PandaCoderçš„è¿›åŒ–ä¹‹æ—…ã€‚æ‚¨çš„æ¯ä¸€ä¸ªå»ºè®®éƒ½å¯èƒ½æˆä¸ºä¸‹ä¸€ä¸ªé‡è¦åŠŸèƒ½çš„çµæ„Ÿæ¥æºã€‚</p>
<hr/>
<p><strong>å‚ä¸æ–¹å¼ï¼š</strong></p>
<ul>
<li>åœ¨IDEä¸­ç‚¹å‡»"âœï¸ æ’ä»¶çš„å»ºè®®"æäº¤åé¦ˆ</li>
<li>é€šè¿‡GitHub Issueså‚ä¸è®¨è®º</li>
</ul>
<hr/>
<p><em>èˆ’ä¸€ç¬‘ä¸ç§ƒå¤´ï¼Œç”Ÿæˆå¼AIåº”ç”¨å·¥ç¨‹å¸ˆ(é«˜çº§)è®¤è¯ï¼Œé˜¿é‡Œäº‘åšå®¢ä¸“å®¶ï¼Œä¸“æ³¨äºä¼ä¸šçº§Javaå¼€å‘å’ŒAIåº”ç”¨å¼€å‘ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ArrayUtilsï¼šJavaæ•°ç»„æ“ä½œçš„ç‘å£«å†›åˆ€]]></title>    <link>https://juejin.cn/post/7572534419880034339</link>    <guid>https://juejin.cn/post/7572534419880034339</guid>    <pubDate>2025-11-16T03:13:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572534419880034339" data-draft-id="7572534419880017955" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ArrayUtilsï¼šJavaæ•°ç»„æ“ä½œçš„ç‘å£«å†›åˆ€"/> <meta itemprop="keywords" content="åç«¯,è®¾è®¡,å¼€æº"/> <meta itemprop="datePublished" content="2025-11-16T03:13:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™½è¡£é¸½å­"/> <meta itemprop="url" content="https://juejin.cn/user/3072451409619223"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ArrayUtilsï¼šJavaæ•°ç»„æ“ä½œçš„ç‘å£«å†›åˆ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3072451409619223/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™½è¡£é¸½å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T03:13:02.000Z" title="Sun Nov 16 2025 03:13:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1. å‰è¨€</h3>
<blockquote>
<p>æœ¬æ–‡ä»‹ç»çš„ ArrayUtils ä»¥org.apache.commons.collections4.ArrayUtils ä¸ºä¾‹</p>
<p>æºä»£ç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapache%2Fcommons-collections%2Fblob%2Fmaster%2Fsrc%2Fmain%2Fjava%2Forg%2Fapache%2Fcommons%2Fcollections4%2FArrayUtils.java" target="_blank" title="https://github.com/apache/commons-collections/blob/master/src/main/java/org/apache/commons/collections4/ArrayUtils.java" ref="nofollow noopener noreferrer">org.apache.commons.collections4.ArrayUtils</a></p>
<p>è‡ªå®šä¹‰ç‰¹å¾å¯ä»¥åœ¨è‡ªå·±æœåŠ¡å†…å®ç°</p>
</blockquote>
<p>åœ¨Javaåº”ç”¨å¼€å‘ä¸­ï¼Œæ•°ç»„æ“ä½œæ˜¯æˆ‘ä»¬æ—¥å¸¸ç¼–ç çš„åŸºç¡€ä»»åŠ¡ä¹‹ä¸€ã€‚ä½ æ˜¯å¦æ›¾å†™è¿‡ä¸‹é¢è¿™æ ·çš„ä»£ç ï¼Ÿ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">findUser</span><span class="hljs-params">(String[] users, String targetUser)</span> {
    <span class="hljs-keyword">if</span> (users == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; users.length; i++) {
        <span class="hljs-keyword">if</span> (targetUser == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (users[i] == <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (targetUser.equals(users[i])) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            }
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}

<span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">findUserIndex</span><span class="hljs-params">(String[] users, String targetUser)</span> {
    <span class="hljs-keyword">if</span> (users == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    }
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; users.length; i++) {
        <span class="hljs-comment">// ... ç±»ä¼¼çš„é‡å¤ä»£ç </span>
    }
    <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
}
</code></pre>
<p>è¿™ç§æ‰‹åŠ¨éå†æ•°ç»„çš„æ–¹å¼ä¸ä»…ç¹çã€é‡å¤ï¼Œæ›´é‡è¦çš„æ˜¯éœ€è¦å¤„ç†å„ç§è¾¹ç•Œæƒ…å†µï¼ˆå¦‚ç©ºæ•°ç»„ã€nullå…ƒç´ ã€èµ·å§‹ä½ç½®ç­‰ï¼‰ï¼Œå®¹æ˜“å‡ºé”™ä¸”ä»£ç å¯è¯»æ€§å·®ã€‚ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„å·¥å…·ç±»å¯ä»¥å°è£…è¿™äº›é€šç”¨é€»è¾‘ï¼Œè®©æ•°ç»„æ“ä½œå˜å¾—ç®€å•è€Œå®‰å…¨ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æArrayUtilså·¥å…·ç±»çš„å®ç°åŸç†ï¼Œå±•ç¤ºå¦‚ä½•é€šè¿‡ç®€æ´çš„APIè§£å†³æ•°ç»„æ“ä½œçš„å¸¸è§ç—›ç‚¹ã€‚</p>
<h3 data-id="heading-1">2. å¸¸ç”¨æ–¹æ³•</h3>
<h4 data-id="heading-2">2.1 åŒ…å«æ£€æŸ¥æ–¹æ³•</h4>
<h5 data-id="heading-3">2.1.1 æ–¹æ³•ç­¾å</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">contains</span><span class="hljs-params">(Object[] array, Object objectToFind)</span>
</code></pre>
<h5 data-id="heading-4">2.1.2 åº”ç”¨ç¤ºèŒƒ</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayUtilsDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        String[] fruits = {<span class="hljs-string">"apple"</span>, <span class="hljs-string">"banana"</span>, <span class="hljs-string">"orange"</span>, <span class="hljs-literal">null</span>};
        
        <span class="hljs-comment">// æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨</span>
        System.out.println(ArrayUtils.contains(fruits, <span class="hljs-string">"apple"</span>)); <span class="hljs-comment">// true</span>
        System.out.println(ArrayUtils.contains(fruits, <span class="hljs-string">"grape"</span>)); <span class="hljs-comment">// false</span>
        System.out.println(ArrayUtils.contains(fruits, <span class="hljs-literal">null</span>));    <span class="hljs-comment">// true</span>
        
        <span class="hljs-comment">// å¤„ç†ç©ºæ•°ç»„åœºæ™¯</span>
        String[] emptyArray = <span class="hljs-literal">null</span>;
        System.out.println(ArrayUtils.contains(emptyArray, <span class="hljs-string">"test"</span>)); <span class="hljs-comment">// false</span>
    }
}
</code></pre>
<h5 data-id="heading-5">2.1.3 å…³é”®æºç </h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">contains</span><span class="hljs-params">(Object[] array, Object objectToFind)</span> {
    <span class="hljs-keyword">return</span> indexOf(array, objectToFind) != -<span class="hljs-number">1</span>;
}
</code></pre>
<h4 data-id="heading-6">2.2 ç´¢å¼•æŸ¥æ‰¾æ–¹æ³•</h4>
<h5 data-id="heading-7">2.2.1 æ–¹æ³•ç­¾å</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-type">int</span> <span class="hljs-title function_">indexOf</span><span class="hljs-params">(T[] array, Object objectToFind)</span>
<span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">indexOf</span><span class="hljs-params">(Object[] array, Object objectToFind, <span class="hljs-type">int</span> startIndex)</span>
</code></pre>
<h5 data-id="heading-8">2.2.2 åº”ç”¨ç¤ºèŒƒ</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IndexOfDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        Integer[] numbers = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>};
        
        <span class="hljs-comment">// æŸ¥æ‰¾å…ƒç´ é¦–æ¬¡å‡ºç°ä½ç½®</span>
        System.out.println(ArrayUtils.indexOf(numbers, <span class="hljs-number">2</span>));     <span class="hljs-comment">// 1</span>
        System.out.println(ArrayUtils.indexOf(numbers, <span class="hljs-number">10</span>));    <span class="hljs-comment">// -1</span>
        System.out.println(ArrayUtils.indexOf(numbers, <span class="hljs-literal">null</span>));  <span class="hljs-comment">// 5</span>
        
        <span class="hljs-comment">// ä»æŒ‡å®šä½ç½®å¼€å§‹æŸ¥æ‰¾</span>
        System.out.println(ArrayUtils.indexOf(numbers, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>));  <span class="hljs-comment">// 3</span>
        System.out.println(ArrayUtils.indexOf(numbers, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>));  <span class="hljs-comment">// 6</span>
        
        <span class="hljs-comment">// å¤„ç†è¾¹ç•Œæƒ…å†µ</span>
        System.out.println(ArrayUtils.indexOf(<span class="hljs-literal">null</span>, <span class="hljs-number">1</span>));        <span class="hljs-comment">// -1</span>
    }
}
</code></pre>
<h5 data-id="heading-9">2.2.3 å…³é”®æºç </h5>
<blockquote>
<p>æœ¬è´¨æ¯”è¾ƒçš„æ˜¯equalsæ–¹æ³•ï¼Œå¦‚æœ‰éœ€è¦å¯ä»¥é‡å†™equalsæ–¹æ³•</p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">indexOf</span><span class="hljs-params">(Object[] array, Object objectToFind, <span class="hljs-type">int</span> startIndex)</span> {
    <span class="hljs-keyword">if</span> (array == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">if</span> (startIndex &lt; <span class="hljs-number">0</span>) {
            startIndex = <span class="hljs-number">0</span>;
        }

        <span class="hljs-keyword">if</span> (objectToFind == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> startIndex; i &lt; array.length; ++i) {
                <span class="hljs-keyword">if</span> (array[i] == <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">return</span> i;
                }
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> startIndex; i &lt; array.length; ++i) {
                <span class="hljs-keyword">if</span> (objectToFind.equals(array[i])) {
                    <span class="hljs-keyword">return</span> i;
                }
            }
        }

        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    }
}
</code></pre>
<h2 data-id="heading-10">3. ä¸Stream APIçš„å¯¹æ¯”</h2>
<h3 data-id="heading-11">3.1 ç›¸åŒåŠŸèƒ½çš„ä¸åŒå®ç°</h3>
<p><strong>ArrayUtilsæ–¹å¼ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ£€æŸ¥åŒ…å«</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">contains</span> <span class="hljs-operator">=</span> ArrayUtils.contains(array, target);

<span class="hljs-comment">// æŸ¥æ‰¾ç´¢å¼•</span>
<span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> ArrayUtils.indexOf(array, target);
</code></pre>
<p><strong>Stream APIæ–¹å¼ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ£€æŸ¥åŒ…å«</span>
<span class="hljs-type">boolean</span> <span class="hljs-variable">contains</span> <span class="hljs-operator">=</span> Arrays.stream(array)
                        .anyMatch(element -&gt; Objects.equals(element, target));

<span class="hljs-comment">// æŸ¥æ‰¾ç´¢å¼•ï¼ˆè¾ƒä¸ºç¹çï¼‰</span>
<span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> IntStream.range(<span class="hljs-number">0</span>, array.length)
                    .filter(i -&gt; Objects.equals(array[i], target))
                    .findFirst()
                    .orElse(-<span class="hljs-number">1</span>);
</code></pre>
<h3 data-id="heading-12">3.2 æ€§èƒ½å¯¹æ¯”</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceComparison</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        String[] largeArray = createLargeArray(<span class="hljs-number">100000</span>);
        
        <span class="hljs-comment">// ArrayUtilsæ€§èƒ½æµ‹è¯•</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">start1</span> <span class="hljs-operator">=</span> System.nanoTime();
        <span class="hljs-type">boolean</span> <span class="hljs-variable">result1</span> <span class="hljs-operator">=</span> ArrayUtils.contains(largeArray, <span class="hljs-string">"target"</span>);
        <span class="hljs-type">long</span> <span class="hljs-variable">time1</span> <span class="hljs-operator">=</span> System.nanoTime() - start1;
        
        <span class="hljs-comment">// Stream APIæ€§èƒ½æµ‹è¯•</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">start2</span> <span class="hljs-operator">=</span> System.nanoTime();
        <span class="hljs-type">boolean</span> <span class="hljs-variable">result2</span> <span class="hljs-operator">=</span> Arrays.stream(largeArray)
                               .anyMatch(<span class="hljs-string">"target"</span>::equals);
        <span class="hljs-type">long</span> <span class="hljs-variable">time2</span> <span class="hljs-operator">=</span> System.nanoTime() - start2;
        
        System.out.println(<span class="hljs-string">"ArrayUtilsè€—æ—¶: "</span> + time1 + <span class="hljs-string">"ns"</span>);
        System.out.println(<span class="hljs-string">"Stream APIè€—æ—¶: "</span> + time2 + <span class="hljs-string">"ns"</span>);
    }
}
</code></pre>
<h3 data-id="heading-13">3.3 é€‚ç”¨åœºæ™¯åˆ†æ</h3>








































<table><thead><tr><th>ç‰¹æ€§</th><th>ArrayUtils</th><th>Stream API</th></tr></thead><tbody><tr><td><strong>ä»£ç ç®€æ´æ€§</strong></td><td>â­â­â­â­â­</td><td>â­â­â­</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>â­â­â­â­â­</td><td>â­â­â­</td></tr><tr><td><strong>å¯è¯»æ€§</strong></td><td>â­â­â­â­â­</td><td>â­â­â­â­</td></tr><tr><td><strong>å‡½æ•°å¼æ”¯æŒ</strong></td><td>â­â­</td><td>â­â­â­â­â­</td></tr><tr><td><strong>é“¾å¼æ“ä½œ</strong></td><td>ä¸æ”¯æŒ</td><td>æ”¯æŒ</td></tr><tr><td><strong>ç©ºå®‰å…¨</strong></td><td>â­â­â­â­â­</td><td>éœ€è¦é¢å¤–å¤„ç†</td></tr></tbody></table>
<h2 data-id="heading-14">4. æ€»ç»“</h2>
<p>ArrayUtilsé€šè¿‡ç®€æ´çš„APIè®¾è®¡ï¼Œä¸ºæˆ‘ä»¬æä¾›äº†å¼ºå¤§çš„æ•°ç»„æ“ä½œèƒ½åŠ›ã€‚å®ƒçš„ä¸»è¦ä¼˜åŠ¿åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>ä»£ç ç®€æ´æ€§</strong>ï¼šå°†å¸¸è§çš„æ•°ç»„æ“ä½œå°è£…æˆç®€å•çš„æ–¹æ³•è°ƒç”¨</li>
<li><strong>ç©ºå®‰å…¨</strong>ï¼šå¦¥å–„å¤„ç†nullå€¼åœºæ™¯ï¼Œæé«˜ä»£ç å¥å£®æ€§</li>
<li><strong>çµæ´»æ€§</strong>ï¼šæ”¯æŒä»æŒ‡å®šä½ç½®å¼€å§‹æœç´¢ï¼Œæ»¡è¶³ä¸åŒä¸šåŠ¡éœ€æ±‚</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šä½¿ç”¨æ³›å‹ç¡®ä¿ç±»å‹ä¸€è‡´æ€§</li>
</ol>
<p>è™½ç„¶è¿™ä¸ªå·¥å…·ç±»åŠŸèƒ½ç›¸å¯¹åŸºç¡€ï¼Œä½†å®ƒä½“ç°äº†è‰¯å¥½çš„è®¾è®¡æ€æƒ³ï¼šä¸“æ³¨äºè§£å†³ç‰¹å®šé—®é¢˜ï¼Œä¿æŒæ¥å£ç®€å•ï¼Œå¤„ç†è¾¹ç•Œæƒ…å†µã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å€Ÿé‰´è¿™ç§è®¾è®¡æ€è·¯ï¼Œåˆ›å»ºæ›´å¤šå®ç”¨çš„å·¥å…·ç±»æ¥æå‡å¼€å‘æ•ˆç‡ã€‚</p>
<p><strong>å»ºè®®ä½¿ç”¨åœºæ™¯</strong>ï¼šé€‚åˆä¸­å°å‹æ•°ç»„çš„å¿«é€Ÿæ“ä½œï¼Œå¯¹äºæ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯å»ºè®®è€ƒè™‘å…¶ä»–ä¼˜åŒ–æ–¹æ¡ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[linuxä¸Šgitlab runneréƒ¨ç½²æ–‡æ¡£]]></title>    <link>https://juejin.cn/post/7572776177690427401</link>    <guid>https://juejin.cn/post/7572776177690427401</guid>    <pubDate>2025-11-16T04:23:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572776177690427401" data-draft-id="7572776177690411017" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="linuxä¸Šgitlab runneréƒ¨ç½²æ–‡æ¡£"/> <meta itemprop="keywords" content="Java,GitHub"/> <meta itemprop="datePublished" content="2025-11-16T04:23:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰¾è¿ªç‹"/> <meta itemprop="url" content="https://juejin.cn/user/2744837165290328"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            linuxä¸Šgitlab runneréƒ¨ç½²æ–‡æ¡£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2744837165290328/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰¾è¿ªç‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T04:23:06.000Z" title="Sun Nov 16 2025 04:23:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2025å¹´11æœˆ16æ—¥</p>
<h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>å¹³å¸¸ä½¿ç”¨çš„CI/CDä¸»è¦æ˜¯ç”¨Jenkinsï¼Œgitçš„æœ¬åœ°hookï¼Œä½†æ˜¯å¯¹äºä»£ç ä¸Šä¼ åæ‰§è¡Œå·®å¼‚ä»£ç ä¼˜åŒ–è¿™ä¸ªæŠ€æœ¯åœºæ™¯æµç¨‹åœºæ™¯æ¥è¯´ï¼š</p>
<ol>
<li>Jenkinsæµç¨‹åªä¼šåšåˆ°å…¨é‡æ’æŸ¥ï¼Œå¦‚æœä¸­é€”é‡åˆ°é—®é¢˜ä»£ç å¯¼è‡´å¤±è´¥ï¼Œå¾—ä¸å¿å¤±ï¼Œä¸”ä¸€ä¸ªä»“åº“å¯èƒ½ä¼šæœ‰ä¸å†ç»´æŠ¤ä»£ç ä¸æ— å…³ä»£ç ï¼Œé€ æˆèµ„æºæµªè´¹</li>
<li>gitæœ¬åœ°hooké—®é¢˜åœ¨äºï¼Œæ›´æ–°æ—¶æ¯ä¸ªç»„å‘˜éƒ½éœ€è¦åšï¼Œå¹¶ä¸”git commitçš„æ—¶å€™å¯ä»¥é€šè¿‡--no-verify è§„é¿æœ¬åœ°checkï¼ŒåŒæ—¶å¦‚æœç›´æ¥åœ¨gitlabä¸Šé¢IDEç›´æ¥ä¿®æ”¹ï¼Œåˆ™æœ¬åœ°git hookè„šæœ¬ä¸ä¼šæ‰§è¡Œ</li>
</ol>
<p>å› æ­¤ä¸ºäº†ä¼˜åŒ–è¿™ä¸€å—çš„æµæ°´çº¿ï¼Œé¿å…ä¸Šè¿°2ä¸ªé—®é¢˜ï¼Œæˆ‘æ‰“ç®—é€šè¿‡gitåˆå…¥æ—¶é€šè¿‡git çš„CI/CDï¼Œæ‰§è¡Œè„šæœ¬åˆ†æå·®å¼‚åŒ–æ–‡ä»¶</p>
<p>ï¼ˆæœ¬æ–‡å› ä¸ºç¦»èŒåæ‰€æœ‰æ¶ˆæ¯è®°å½•ä¼šè¢«åˆ é™¤ï¼Œå› æ­¤å›¾ç‰‡æ˜¯æ²¡æœ‰çš„ï¼Œè¯·è§è°…ï¼‰</p>
<h2 data-id="heading-1">éƒ¨ç½²ä¸éªŒè¯</h2>
<p>gitlabè‡ªå¸¦éƒ¨ç½²runneræ–‡æ¡£ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.gitlab.cn%2Fdocs%2Fjh%2Finstall%2F" target="_blank" title="https://docs.gitlab.cn/docs/jh/install/" ref="nofollow noopener noreferrer">docs.gitlab.cn/docs/jh/insâ€¦</a> ï¼ŒåŒæ—¶csdnä¹Ÿæœ‰å¯¹åº”çš„æ–‡æ¡£å¯ä»¥å€Ÿé‰´ <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_39826207%2Farticle%2Fdetails%2F144275485" target="_blank" title="https://blog.csdn.net/qq_39826207/article/details/144275485" ref="nofollow noopener noreferrer">blog.csdn.net/qq_39826207â€¦</a> ä¸è¿‡å®é™…ä¸Šæˆ‘åœ¨å¼€å‘æ—¶ä¹Ÿé‡åˆ°äº†ä¸€ç‚¹é—®é¢˜ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼éƒ¨ç½²ï¼š</p>
<ol>
<li>
<p>å‡†å¤‡Linuxç¯å¢ƒï¼ˆCentosä¸ºä¾‹ï¼‰</p>
</li>
<li>
<p>é€šè¿‡wgetæˆ–è€…ç¦»çº¿ç­‰æ–¹å¼è·å–gitlab runnerçš„å®‰è£…åŒ…</p>
</li>
<li>
<pre><code class="hljs language-sh" lang="sh">Â <span class="hljs-comment"># åˆ›å»ºä¸“ç”¨ç”¨æˆ·ï¼ˆä¸åˆ›å»º home ç›®å½•ï¼‰</span>
Â sudo useradd --comment <span class="hljs-string">'GitLab Runner'</span> --create-home gitlab-runner
Â â€‹
Â <span class="hljs-comment"># åˆ›å»º runner å·¥ä½œç›®å½•</span>
Â sudo <span class="hljs-built_in">mkdir</span> /home/gitlab-runner/runner
Â â€‹
Â sudo <span class="hljs-built_in">chown</span> gitlab-runner:gitlab-runner /home/gitlab-runner/runner
</code></pre>
</li>
<li>
<p>åˆå§‹åŒ–å¹¶å¯åŠ¨ GitLab Runnerï¼ˆä½œä¸ºæœåŠ¡ï¼‰</p>
<p>è™½ç„¶ä½¿ç”¨äºŒè¿›åˆ¶ï¼Œä½†å»ºè®®ä»¥ç³»ç»ŸæœåŠ¡æ–¹å¼è¿è¡Œã€‚</p>
<ol>
<li>
<p>åˆ›å»º systemd æœåŠ¡æ–‡ä»¶</p>
<pre><code class="hljs language-sh" lang="sh">Â sudo <span class="hljs-built_in">tee</span> /etc/systemd/system/gitlab-runner.service &lt;&lt;<span class="hljs-string">EOF
Â [Unit]
Â Description=GitLab Runner
Â After=syslog.target network.target
Â ConditionFileIsExecutable=/usr/local/bin/gitlab-runner
Â â€‹
Â [Service]
Â StartLimitInterval=5
Â StartLimitBurst=10
Â ExecStart=/usr/local/bin/gitlab-runner run --working-directory /home/gitlab-runner/runner
Â SuccessExitStatus=0 143
Â Restart=always
Â RestartSec=5
Â KillMode=mixed
Â WorkingDirectory=/home/gitlab-runner/runner
Â User=gitlab-runner
Â Group=gitlab-runner
Â Environment=PATH=/bin:/usr/local/bin:/usr/bin
Â CacheDirectory=gitlab-runner
Â CacheDirectoryMode=0750
Â â€‹
Â [Install]
Â WantedBy=multi-user.target
Â EOF</span>
</code></pre>
</li>
<li>
<p>é‡è½½ systemd å¹¶å¯åŠ¨æœåŠ¡</p>
<pre><code class="hljs language-bash" lang="bash">Â sudo systemctl daemon-reexec
Â sudo systemctl daemon-reload
Â sudo systemctl <span class="hljs-built_in">enable</span> gitlab-runner
Â sudo systemctl start gitlab-runner
</code></pre>
</li>
<li>
<p>æ£€æŸ¥æœåŠ¡çŠ¶æ€</p>
<pre><code class="hljs language-sh" lang="sh">Â sudo systemctl status gitlab-runner
</code></pre>
</li>
</ol>
</li>
<li>
<p>æ³¨å†ŒGitLab Runner åˆ° GitLab å®ä¾‹</p>
<p>ï¼ˆå¦‚æœæ˜¯å¤šæ¬¡æ³¨å†Œï¼Œåˆ™éœ€è¦ä¼˜å…ˆæŒ‰ç…§ç¬¬ä¸€æ­¥åˆ‡æ¢æˆå¯¹åº”çš„gitlabç”¨æˆ·è¿›è¡Œå‘½ä»¤æ“ä½œï¼Œæ•´ä¸ªçš„å®‰è£…æµç¨‹ï¼Œæˆ‘æŒ‰ç…§å®˜æ–¹æµç¨‹æ²¡æˆåŠŸï¼Œå’Œå½“å‰æµç¨‹å”¯ä¸€çš„å·®åˆ«å°±æ˜¯å®˜æ–¹æ²¡æœ‰åˆ‡æ¢åˆ°gitlabç”¨æˆ·ï¼‰</p>
<ol>
<li>
<p>è·å–æ³¨å†Œä»¤ç‰Œ ç™»å½• GitLab Web ç•Œé¢ã€‚ è¿›å…¥ä½ çš„é¡¹ç›® â†’ Settings â†’ CI / CD â†’ Runnersã€‚ å¤åˆ¶ Registration tokenï¼ˆé¡¹ç›®çº§ Runnerï¼‰ã€‚ æˆ–è€…åœ¨ Admin Area â†’ Overview â†’ Runners è·å–å®ä¾‹çº§ä»¤ç‰Œã€‚</p>
</li>
<li>
<p>è¿è¡Œæ³¨å†Œå‘½ä»¤ï¼š åˆ‡æ¢åˆ° gitlab-runner ç”¨æˆ·å¹¶æ³¨å†Œï¼š</p>
<pre><code class="hljs language-sh" lang="sh">Â sudo -u gitlab-runner -H /usr/local/bin/gitlab-runner register
</code></pre>
<p>æŒ‰æç¤ºè¾“å…¥ï¼š</p>
<ul>
<li>GitLab instance URL: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitlab.com%2F" target="_blank" title="https://gitlab.com/" ref="nofollow noopener noreferrer">gitlab.com</a>ï¼ˆæˆ–ä½ çš„è‡ªå»º GitLab åœ°å€ï¼‰</li>
<li>Registration token: ä½ å¤åˆ¶çš„ä»¤ç‰Œ</li>
<li>Description: my-runnerï¼ˆè‡ªå®šä¹‰æè¿°ï¼‰</li>
<li>Tags: linux,dockerï¼ˆå¯é€‰ï¼Œç”¨äºä»»åŠ¡åŒ¹é…ï¼‰</li>
<li>Executor: shellï¼ˆæˆ– docker, docker+machine ç­‰ï¼‰</li>
<li>Default Docker image: alpine:latestï¼ˆå¦‚æœä½¿ç”¨ docker executorï¼‰</li>
</ul>
</li>
<li>
<p>æŒ‰æç¤ºè¾“å…¥ï¼š</p>
<ul>
<li>GitLab instance URL: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitlab.com%2F" target="_blank" title="https://gitlab.com/" ref="nofollow noopener noreferrer">gitlab.com</a>ï¼ˆæˆ–ä½ çš„è‡ªå»º GitLab åœ°å€ï¼‰</li>
<li>Registration token: ä½ å¤åˆ¶çš„ä»¤ç‰Œ</li>
<li>Description: my-runnerï¼ˆè‡ªå®šä¹‰æè¿°ï¼‰</li>
<li>Tags: linux,dockerï¼ˆå¯é€‰ï¼Œç”¨äºä»»åŠ¡åŒ¹é…ï¼‰ã€</li>
<li>Executor: shellï¼ˆæˆ– docker, docker+machine ç­‰ï¼‰</li>
<li>Default Docker image: alpine:latestï¼ˆå¦‚æœä½¿ç”¨ docker executorï¼‰</li>
<li>æ³¨å†ŒæˆåŠŸåï¼Œé…ç½®ä¼šä¿å­˜åœ¨ /home/gitlab-runner/runner/config.tomlã€‚</li>
</ul>
</li>
</ol>
</li>
</ol>
<p>éªŒè¯æ³¨å†Œï¼š åœ¨ GitLab Web ç•Œé¢çš„ Runners é¡µé¢ï¼Œåº”çœ‹åˆ°æ–°æ³¨å†Œçš„ Runner å¤„äºâ€œåœ¨çº¿â€çŠ¶æ€ã€‚</p>
<h2 data-id="heading-2">å¸è½½</h2>
<p>æœ‰æ—¶å€™å¯èƒ½æ˜¯å®‰è£…é”™è¯¯ï¼Œå¯èƒ½æ˜¯éœ€è¦è¿ç§»ä¸šåŠ¡ï¼Œéœ€è¦ç°åœ¨åŸæœ‰çš„ç¯å¢ƒçš„æœåŠ¡ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤</p>
<ol>
<li>
<p>åœæ­¢å¹¶ç¦ç”¨æœåŠ¡</p>
<pre><code class="hljs language-sh" lang="sh">Â sudo systemctl stop gitlab-runner
Â sudo systemctl <span class="hljs-built_in">disable</span> gitlab-runner
</code></pre>
</li>
<li>
<p>åˆ é™¤æœåŠ¡æ–‡ä»¶</p>
<pre><code class="hljs language-sh" lang="sh">Â sudo <span class="hljs-built_in">rm</span> /etc/systemd/system/gitlab-runner.service
Â sudo systemctl daemon-reload
</code></pre>
</li>
<li>
<p>åˆ é™¤äºŒè¿›åˆ¶æ–‡ä»¶å’Œç”¨æˆ·</p>
<pre><code class="hljs language-sh" lang="sh">Â sudo <span class="hljs-built_in">rm</span> /usr/local/bin/gitlab-runner
Â <span class="hljs-comment"># -r åˆ é™¤ç”¨æˆ·ä¸»ç›®å½•</span>
Â sudo userdel -r gitlab-runner Â 
</code></pre>
</li>
<li>
<p>æ¸…ç†æ®‹ç•™æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰</p>
<pre><code class="hljs language-sh" lang="sh">sudo <span class="hljs-built_in">rm</span> -rf /home/gitlab-runner
</code></pre>
</li>
</ol>
<h2 data-id="heading-3">è„šæœ¬åˆ†äº«</h2>
<h3 data-id="heading-4">.gitlab-ci.yml</h3>
<p>è¿™ä¸ªæ˜¯ä»“åº“å…¨å±€çš„git CI/CDçš„é…ç½®æ–‡ä»¶ï¼Œæ ¹æ®è§¦å‘é˜¶æ®µå¯ä»¥æ‰§è¡Œå¯¹åº”çš„scriptç›¸å…³çš„è„šæœ¬ï¼Œåœ¨è¯¥è„šæœ¬å¯ä»¥æ‰§è¡Œæ›´å¤šshellè„šæœ¬ï¼Œæ–¹ä¾¿ç®¡ç†</p>
<p>è¯¥ä¾‹å­æ˜¯åˆå…¥æ—¶æ‰§è¡Œ2ä¸ªè„šæœ¬ï¼Œå¯ä¾›å‚è€ƒ</p>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-attr">stages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">check</span>

<span class="hljs-comment"># å…¨å±€å˜é‡</span>
<span class="hljs-attr">variables:</span>
  <span class="hljs-attr">GIT_DEPTH:</span> <span class="hljs-string">""</span>  <span class="hljs-comment"># å®Œæ•´å…‹éš†</span>

<span class="hljs-comment"># åªåœ¨ Merge Request æ—¶è§¦å‘æµæ°´çº¿ï¼ˆå³â€œåˆå…¥å‰æ£€æŸ¥â€ï¼‰</span>
<span class="hljs-attr">workflow:</span>
  <span class="hljs-attr">rules:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">if:</span> <span class="hljs-string">$CI_PIPELINE_SOURCE</span> <span class="hljs-string">==</span> <span class="hljs-string">"merge_request_event"</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">when:</span> <span class="hljs-string">never</span>

<span class="hljs-attr">check:</span>
  <span class="hljs-attr">stage:</span> <span class="hljs-string">check</span>
  <span class="hljs-attr">interruptible:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># å¯ä¸­æ–­ï¼šå½“ MR æ›´æ–°æ—¶å–æ¶ˆæ—§æµæ°´çº¿</span>
  <span class="hljs-attr">script:</span>
    <span class="hljs-comment"># è„šæœ¬1ï¼šæƒé™/é…ç½®æ£€æŸ¥</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">chmod</span> <span class="hljs-string">+x</span> <span class="hljs-string">./cloud/env/install/script/config_checkstyle.sh</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">./cloud/env/install/script/config_checkstyle.sh</span> <span class="hljs-string">ucs-server</span> <span class="hljs-string">$GITLAB_USER_EMAIL</span> <span class="hljs-string">$CI_MERGE_REQUEST_TARGET_BRANCH_NAME</span>

    <span class="hljs-comment"># è„šæœ¬2ï¼šå¦ä¸€ä¸ªæ£€æŸ¥è„šæœ¬ï¼ˆç¤ºä¾‹ï¼‰</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">chmod</span> <span class="hljs-string">+x</span> <span class="hljs-string">./cloud/env/install/script/another_check.sh</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">./cloud/env/install/script/another_check.sh</span>

  <span class="hljs-comment"># åªåœ¨ MR ä¸­è¿è¡Œ</span>
  <span class="hljs-attr">only:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">merge_requests</span>

  <span class="hljs-attr">tags:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">ucs_server</span>

  <span class="hljs-comment"># å¯é€‰ï¼šæŒ‡å®š MR çš„ç›®æ ‡åˆ†æ”¯ï¼ˆæ¯”å¦‚åªå¯¹ main/develop çš„åˆå…¥åšæ£€æŸ¥ï¼‰</span>
  <span class="hljs-comment"># rules:</span>
  <span class="hljs-comment">#   - if: $CI_MERGE_REQUEST_TARGET_BRANCH_NAME =~ /^(main|develop)$/</span>
</code></pre>
<h3 data-id="heading-5">shè„šæœ¬æ–‡ä»¶</h3>
<h4 data-id="heading-6">JavaéªŒè¯å·®å¼‚æ–‡ä»¶</h4>
<p>ç”¨äºéªŒè¯åˆå…¥æ—¶ä¸¤ä¸ªåˆ†æ”¯ä¹‹é—´çš„å·®å¼‚æ–‡ä»¶ï¼Œå¯¹å·®å¼‚æ–‡ä»¶è¿›è¡Œcheckstyleï¼ˆé€šè¿‡æ‰§è¡ŒjaråŒ…ï¼‰æœ‰é—®é¢˜å°±è¿”å›0ï¼Œæ— é—®é¢˜ä¼šè¿”å›1ï¼Œgitlabåˆå¹¶æ£€æµ‹ä¼šæ ¹æ®è¿”å›å€¼åˆ¤å®šæµæ°´çº¿æˆåŠŸ/å¤±è´¥</p>
<p>åŸæœ‰è„šæœ¬å·²ç»é—å¤±ï¼Œåˆ¤æ–­é€»è¾‘åº”å½“æ˜¯jaråŒ…äº§ç”Ÿçš„è¾“å‡ºï¼Œåº”å½“åªçœ‹[WARN][ERROR]å¼€å¤´çš„çš„è¡Œæ˜¯å¦&gt;0ï¼Œæœ‰åˆ™æœ‰é—®é¢˜ï¼ˆéœ€è¦jaråŒ…å¯åŠ¨checkstyleï¼Œéœ€è¦xmlé…ç½®æ–‡ä»¶è¿›è¡Œè§„åˆ™é…ç½®ï¼‰</p>
<p>Javaç¨‹åºçš„checkstyleéœ€è¦ä»¥ä¸åŒç‰ˆæœ¬ä¸ºå¤§å‰æåˆ›å»ºå„è‡ªç¯å¢ƒï¼Œå…¶ä»–çš„å¦‚æœ¬åœ°æ‰§è¡Œhookï¼ŒJenkinsæ‰§è¡Œï¼Œgit CI/CDæ‰§è¡Œæµç¨‹ï¼Œéœ€è¦çš„å„ç§é™æ€èµ„æºéœ€è¦ä¸€è‡´</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># ================== å‚æ•°æ ¡éªŒ ==================</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$#</span> -ne 4 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: <span class="hljs-variable">$0</span> &lt;namespace&gt; &lt;email&gt; &lt;source_branch&gt; &lt;target_branch&gt;"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Example: <span class="hljs-variable">$0</span> ucs-server dev@example.com feature/add-config main"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

NAMESPACE=<span class="hljs-variable">$1</span>
EMAIL=<span class="hljs-variable">$2</span>
SOURCE_BRANCH=<span class="hljs-variable">$3</span>
TARGET_BRANCH=<span class="hljs-variable">$4</span>

<span class="hljs-comment"># ================== é…ç½®åŒº ==================</span>
<span class="hljs-comment"># Checkstyle jar åŒ…è·¯å¾„ï¼ˆè¯·æ ¹æ®å®é™…è·¯å¾„ä¿®æ”¹ï¼‰</span>
CHECKSTYLE_JAR=<span class="hljs-string">"./cloud/env/install/script/checkstyle.jar"</span>

<span class="hljs-comment"># Checkstyle é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆcheckstyle.xmlï¼‰</span>
CHECKSTYLE_CONFIG=<span class="hljs-string">"./cloud/env/install/script/checkstyle.xml"</span>

<span class="hljs-comment"># ä¸´æ—¶æ–‡ä»¶ç”¨äºä¿å­˜ Checkstyle è¾“å‡º</span>
CHECKSTYLE_LOG=<span class="hljs-string">"/tmp/checkstyle_output_$$_<span class="hljs-subst">$(date +%s)</span>.txt"</span>
<span class="hljs-comment"># ===========================================</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Analyzing Java files changed between '<span class="hljs-variable">$SOURCE_BRANCH</span>' and '<span class="hljs-variable">$TARGET_BRANCH</span>'..."</span>

<span class="hljs-comment"># 1. ç¡®ä¿è¿œç¨‹åˆ†æ”¯å­˜åœ¨</span>
<span class="hljs-keyword">if</span> ! git rev-parse --verify <span class="hljs-string">"origin/<span class="hljs-variable">$SOURCE_BRANCH</span>"</span> &gt; /dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Error: Remote branch 'origin/<span class="hljs-variable">$SOURCE_BRANCH</span>' not found."</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Available branches:"</span>; git branch -r
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-keyword">if</span> ! git rev-parse --verify <span class="hljs-string">"origin/<span class="hljs-variable">$TARGET_BRANCH</span>"</span> &gt; /dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Error: Remote branch 'origin/<span class="hljs-variable">$TARGET_BRANCH</span>' not found."</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Available branches:"</span>; git branch -r
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># 2. è·å–ä¸¤ä¸ªåˆ†æ”¯ä¹‹é—´å˜æ›´çš„ Java æ–‡ä»¶</span>
CHANGED_JAVA_FILES=()

<span class="hljs-keyword">while</span> IFS= <span class="hljs-built_in">read</span> -r file; <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">if</span> [[ <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> == *.java ]] &amp;&amp; [ -f <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> ]; <span class="hljs-keyword">then</span>
        CHANGED_JAVA_FILES+=(<span class="hljs-string">"<span class="hljs-variable">$file</span>"</span>)
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span> &lt; &lt;(git diff --name-only <span class="hljs-string">"origin/<span class="hljs-variable">$TARGET_BRANCH</span>"</span>...origin/<span class="hljs-variable">$SOURCE_BRANCH</span>)

<span class="hljs-comment"># 3. æ£€æŸ¥æ˜¯å¦æœ‰å˜æ›´çš„ Java æ–‡ä»¶</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-variable">${#CHANGED_JAVA_FILES[@]}</span> -eq 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"No Java files changed between 'origin/<span class="hljs-variable">$TARGET_BRANCH</span>' and 'origin/<span class="hljs-variable">$SOURCE_BRANCH</span>'."</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"No Java changes detected."</span> | mail -s <span class="hljs-string">"<span class="hljs-variable">$NAMESPACE</span>: No Java changes"</span> <span class="hljs-string">"<span class="hljs-variable">$EMAIL</span>"</span>
    <span class="hljs-built_in">exit</span> 0  <span class="hljs-comment"># æ— å˜æ›´è§†ä¸ºé€šè¿‡</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Found <span class="hljs-variable">${#CHANGED_JAVA_FILES[@]}</span> Java file(s) to check:"</span>
<span class="hljs-built_in">printf</span> <span class="hljs-string">'  %s\n'</span> <span class="hljs-string">"<span class="hljs-variable">${CHANGED_JAVA_FILES[@]}</span>"</span>

<span class="hljs-comment"># 4. æ‰§è¡Œ Checkstyle æ£€æŸ¥ï¼ˆä¸€æ¬¡æ€§ä¼ å…¥æ‰€æœ‰æ–‡ä»¶ï¼‰</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Running Checkstyle..."</span>
<span class="hljs-comment"># ä½¿ç”¨ -c æŒ‡å®šé…ç½®ï¼Œ-f xml æˆ– summary å¯é€‰ï¼Œè¿™é‡Œä½¿ç”¨ç®€æ´æ ¼å¼</span>
<span class="hljs-comment"># å¦‚æœä½ å¸Œæœ›è¯¦ç»†è¾“å‡ºï¼Œå¯ä»¥ä½¿ç”¨ -f xml å¹¶ç”¨ xmllint æ ¼å¼åŒ–</span>
<span class="hljs-keyword">if</span> java -jar <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_JAR</span>"</span> -c <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_CONFIG</span>"</span> <span class="hljs-string">"<span class="hljs-variable">${CHANGED_JAVA_FILES[@]}</span>"</span> &gt; <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_LOG</span>"</span> 2&gt;&amp;1; <span class="hljs-keyword">then</span>
    <span class="hljs-comment"># Checkstyle å‘½ä»¤æ‰§è¡ŒæˆåŠŸï¼ˆè¯­æ³•æ­£ç¡®ï¼‰ï¼Œä½†ä¸ä»£è¡¨æ— è­¦å‘Š/é”™è¯¯</span>
    OUTPUT=$(<span class="hljs-built_in">cat</span> <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_LOG</span>"</span>)
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$OUTPUT</span>"</span>

    <span class="hljs-comment"># æ£€æŸ¥è¾“å‡ºä¸­æ˜¯å¦åŒ…å«è¿è§„ä¿¡æ¯ï¼ˆCheckstyle é€šå¸¸ä¼šåœ¨æœ‰è¿è§„æ—¶è¾“å‡ºå†…å®¹ï¼‰</span>
    <span class="hljs-keyword">if</span> [[ -s <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_LOG</span>"</span> &amp;&amp; <span class="hljs-string">"<span class="hljs-subst">$(echo <span class="hljs-string">"<span class="hljs-variable">$OUTPUT</span>"</span> | grep -v '^$' | wc -l)</span>"</span> -gt 0 ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Checkstyle found issues in changed Java files."</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"Checkstyle Report:"</span> | mail -s <span class="hljs-string">"[FAIL] <span class="hljs-variable">$NAMESPACE</span>: Checkstyle failed"</span> <span class="hljs-string">"<span class="hljs-variable">$EMAIL</span>"</span> -A <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_LOG</span>"</span>
        <span class="hljs-built_in">rm</span> -f <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_LOG</span>"</span>
        <span class="hljs-built_in">exit</span> 1  <span class="hljs-comment"># æœ‰è¿è§„ â†’ å¤±è´¥</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"All changed Java files passed Checkstyle."</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"No checkstyle violations found."</span> | mail -s <span class="hljs-string">"[OK] <span class="hljs-variable">$NAMESPACE</span>: Checkstyle passed"</span> <span class="hljs-string">"<span class="hljs-variable">$EMAIL</span>"</span>
        <span class="hljs-built_in">rm</span> -f <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_LOG</span>"</span>
        <span class="hljs-built_in">exit</span> 0  <span class="hljs-comment"># æ— è¿è§„ â†’ æˆåŠŸ</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-comment"># Checkstyle å‘½ä»¤æ‰§è¡Œå¤±è´¥ï¼ˆå¦‚ jar æŠ¥é”™ã€é…ç½®é”™è¯¯ç­‰ï¼‰</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Checkstyle execution failed!"</span>
    <span class="hljs-built_in">cat</span> <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_LOG</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Checkstyle execution failed. See details."</span> | mail -s <span class="hljs-string">"[ERROR] <span class="hljs-variable">$NAMESPACE</span>: Checkstyle execution error"</span> <span class="hljs-string">"<span class="hljs-variable">$EMAIL</span>"</span> -A <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_LOG</span>"</span>
    <span class="hljs-built_in">rm</span> -f <span class="hljs-string">"<span class="hljs-variable">$CHECKSTYLE_LOG</span>"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>
</code></pre>
<h4 data-id="heading-7">ymléªŒè¯å·®å¼‚æ–‡ä»¶</h4>
<p>ä¸ä¸Šé¢çš„JavaéªŒè¯ç±»ä¼¼ï¼Œå°±æ˜¯æŸ¥è¯¢å·®å¼‚æ–‡ä»¶ymlä¸yamlï¼Œcheckstyleæœ‰é—®é¢˜å°±è¿”å›0ï¼Œæ— é—®é¢˜ä¼šè¿”å›1ï¼Œgitlabåˆå¹¶æ£€æµ‹ä¼šæ ¹æ®è¿”å›å€¼åˆ¤å®šæµæ°´çº¿æˆåŠŸ/å¤±è´¥</p>
<p>ï¼ˆå¦‚æœæ˜¯springå¯ä»¥è·³è¿‡æ‰€æœ‰çš„application.ymlæ–‡ä»¶ï¼Œå› ä¸ºyml éªŒè¯ä¸»è¦æ˜¯ä¸ºäº†äº¤ä»˜ç»™è¿ç»´åŒäº‹é…ç½®æ–‡ä»¶æ‰ä¼šæœ‰çš„æµæ°´çº¿æ­¥éª¤ï¼‰</p>
<p>åŸæœ‰è„šæœ¬å·²ç»é—å¤±ï¼Œåˆ¤æ–­é€»è¾‘åº”å½“é€šè¿‡yamllintè¿›è¡ŒéªŒè¯ï¼Œæ ¹æ®è¾“å‡ºäº§ç”Ÿè¡Œæ•°&gt;0åˆ™æœ‰é—®é¢˜ï¼ˆéœ€è¦ymlconfæ–‡ä»¶ä½œä¸ºé…ç½®è§„åˆ™ï¼‰</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$#</span> -ne 2 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"Usage: <span class="hljs-variable">$0</span> &lt;namespace&gt; &lt;email&gt;"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

NAMESPACE=<span class="hljs-variable">$1</span>
EMAIL=<span class="hljs-variable">$2</span>

<span class="hljs-comment"># ================== é…ç½®åŒº ==================</span>
TARGET_BRANCH=<span class="hljs-string">"main"</span>  <span class="hljs-comment"># ç›®æ ‡åˆå¹¶åˆ†æ”¯ï¼Œå¯æ ¹æ®éœ€è¦æ”¹ä¸º devã€release ç­‰</span>
CONFIG_FILE=<span class="hljs-string">"./cloud/env/install/script/ymlconf"</span>
<span class="hljs-comment"># ===========================================</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ” Checking YAML files changed between current branch and '<span class="hljs-variable">$TARGET_BRANCH</span>'..."</span>

<span class="hljs-comment"># 1. è·å–å½“å‰åˆ†æ”¯ç›¸å¯¹äºç›®æ ‡åˆ†æ”¯çš„å·®å¼‚æ–‡ä»¶ï¼ˆä»…æ–°å¢æˆ–ä¿®æ”¹ï¼‰</span>
<span class="hljs-comment"># æ³¨æ„ï¼šGitLab CI ä¼šè‡ªåŠ¨ fetch æ‰€æœ‰åˆ†æ”¯ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨</span>
CHANGED_YAML_FILES=()
<span class="hljs-keyword">while</span> IFS= <span class="hljs-built_in">read</span> -r file; <span class="hljs-keyword">do</span>
    <span class="hljs-keyword">if</span> [[ <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> == *.yml || <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> == *.yaml ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-keyword">if</span> [ -f <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> ]; <span class="hljs-keyword">then</span>  <span class="hljs-comment"># ç¡®ä¿æ–‡ä»¶å­˜åœ¨ï¼ˆé¿å…åˆ é™¤çš„æ–‡ä»¶ï¼‰</span>
            CHANGED_YAML_FILES+=(<span class="hljs-string">"<span class="hljs-variable">$file</span>"</span>)
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span> &lt; &lt;(git diff --name-only <span class="hljs-string">"origin/<span class="hljs-variable">$TARGET_BRANCH</span>"</span>...HEAD)

<span class="hljs-comment"># 2. æ£€æŸ¥æ˜¯å¦æœ‰å˜æ›´çš„ YAML æ–‡ä»¶</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-variable">${#CHANGED_YAML_FILES[@]}</span> -eq 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… No YAML files changed. Skipping yamllint."</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"No YAML changes detected."</span> | mail -s <span class="hljs-string">"<span class="hljs-variable">$NAMESPACE</span>: No YAML changes"</span> <span class="hljs-string">"<span class="hljs-variable">$EMAIL</span>"</span>
    <span class="hljs-built_in">exit</span> 0
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ“„ Found <span class="hljs-variable">${#CHANGED_YAML_FILES[@]}</span> YAML file(s) to check:"</span>
<span class="hljs-built_in">printf</span> <span class="hljs-string">'  %s\n'</span> <span class="hljs-string">"<span class="hljs-variable">${CHANGED_YAML_FILES[@]}</span>"</span>

<span class="hljs-comment"># 3. å¯¹å·®å¼‚æ–‡ä»¶é€ä¸ªè¿è¡Œ yamllint</span>
ERRORS_FOUND=<span class="hljs-string">""</span>
<span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${CHANGED_YAML_FILES[@]}</span>"</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">" linting <span class="hljs-variable">$file</span>"</span>
    <span class="hljs-keyword">if</span> ! yamllint -c <span class="hljs-string">"<span class="hljs-variable">$CONFIG_FILE</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> &gt; /tmp/yamllint.log 2&gt;&amp;1; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"âŒ yamllint failed on <span class="hljs-variable">$file</span>"</span>
        ERRORS_FOUND+=<span class="hljs-string">"<span class="hljs-variable">$file</span>:\n"</span>
        ERRORS_FOUND+=$(<span class="hljs-built_in">cat</span> /tmp/yamllint.log)
        ERRORS_FOUND+=<span class="hljs-string">"\n\n"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># 4. å¤„ç†ç»“æœ</span>
<span class="hljs-keyword">if</span> [ -n <span class="hljs-string">"<span class="hljs-variable">$ERRORS_FOUND</span>"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"YAML file has syntax errors!"</span>
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">$ERRORS_FOUND</span>"</span>
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">$ERRORS_FOUND</span>"</span> | mail -s <span class="hljs-string">"<span class="hljs-variable">$NAMESPACE</span> YAML file has syntax errors!"</span> <span class="hljs-string">"<span class="hljs-variable">$EMAIL</span>"</span>
    <span class="hljs-built_in">rm</span> -f /tmp/yamllint.log
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… All changed YAML files are valid."</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"All changed YAML files passed lint."</span> | mail -s <span class="hljs-string">"<span class="hljs-variable">$NAMESPACE</span>: YAML lint passed"</span> <span class="hljs-string">"<span class="hljs-variable">$EMAIL</span>"</span>
    <span class="hljs-built_in">rm</span> -f /tmp/yamllint.log
    <span class="hljs-built_in">exit</span> 0
<span class="hljs-keyword">fi</span>
</code></pre>
<h2 data-id="heading-8">å…¶ä»–é—®é¢˜</h2>
<h3 data-id="heading-9">gitlab runnerå®ä¾‹åœ¨shellæ¨¡å¼ä¸‹æ€ä¹ˆå ç”¨Centosèµ„æºçš„</h3>
<p>åœ¨ shell executor æ¨¡å¼ä¸‹ï¼ŒGitLab Runner çš„å·¥ä½œæ–¹å¼å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>ç›´æ¥åœ¨å®¿ä¸»æœºï¼ˆCentosï¼‰ä¸Šæ‰§è¡Œå‘½ä»¤ï¼šRunner ä¼šä»¥è¿è¡Œå®ƒçš„ç”¨æˆ·èº«ä»½ï¼ˆå¦‚ gitlab-runner ç”¨æˆ·ï¼‰ï¼Œåœ¨ç³»ç»Ÿ shell ä¸­ç›´æ¥æ‰§è¡Œ .gitlab-ci.yml ä¸­å®šä¹‰çš„ script å‘½ä»¤ã€‚</p>
</li>
<li>
<p>èµ„æºå ç”¨ç‰¹ç‚¹ï¼š</p>
<ul>
<li>CPU/å†…å­˜ï¼šç”±å®é™…æ‰§è¡Œçš„è„šæœ¬å†³å®šï¼ˆå¦‚ç¼–è¯‘ã€æµ‹è¯•ã€æ‰“åŒ…ç­‰ï¼‰ï¼Œç›´æ¥æ¶ˆè€—å®¿ä¸»æœºèµ„æºã€‚</li>
<li>ç£ç›˜ï¼šä¼šåœ¨ä¸´æ—¶ç›®å½•ï¼ˆé»˜è®¤ /home/gitlab-runner/builds//...ï¼‰å…‹éš†ä»£ç å¹¶æ‰§è¡Œä»»åŠ¡ï¼Œä»»åŠ¡ç»“æŸåé»˜è®¤æ¸…ç†ï¼ˆå¯é€šè¿‡ builds_dir é…ç½®ï¼‰ã€‚</li>
<li>ç¯å¢ƒä¾èµ–ï¼šæ‰€æœ‰ä¾èµ–ï¼ˆå¦‚ Pythonã€Node.jsã€Docker CLI ç­‰ï¼‰å¿…é¡»é¢„å…ˆå®‰è£…åœ¨ Centos ç³»ç»Ÿä¸­ã€‚</li>
<li>æ— éš”ç¦»æ€§ï¼šå¤šä¸ª job å…±äº«åŒä¸€ç³»ç»Ÿç¯å¢ƒï¼Œå¯èƒ½äº’ç›¸å¹²æ‰°ï¼ˆæ¯”å¦‚ä¿®æ”¹å…¨å±€ PATHã€å†™æ–‡ä»¶åˆ° /tmpï¼‰ã€‚</li>
<li>å¹¶å‘æ§åˆ¶ï¼šé€šè¿‡ concurrentï¼ˆå…¨å±€ï¼‰å’Œ limitï¼ˆæ¯ä¸ª runnerï¼‰æ§åˆ¶åŒæ—¶è¿è¡Œçš„ job æ•°ï¼Œé¿å…èµ„æºè€—å°½ã€‚</li>
</ul>
</li>
</ul>
<p>å»ºè®®ï¼š</p>
<ul>
<li>ç”Ÿäº§ç¯å¢ƒæ…ç”¨ shell æ¨¡å¼ï¼Œæ¨èç”¨ docker æˆ– kubernetes æä¾›éš”ç¦»ã€‚</li>
<li>å¦‚æœå¿…é¡»ç”¨ shellï¼Œç¡®ä¿ runner ç”¨æˆ·æƒé™æœ€å°åŒ–ï¼Œå¹¶ç›‘æ§ç³»ç»Ÿè´Ÿè½½ã€‚</li>
</ul>
<h3 data-id="heading-10">gitlab CI/CDå¦‚æœå¤±è´¥ï¼Œå¯ä¸å¯ä»¥é˜»æ­¢åˆå¹¶ä»»åŠ¡</h3>
<p>å®ç°æ–¹å¼ï¼š</p>
<ul>
<li>
<p>å¯ç”¨â€œåˆå¹¶å‰å¿…é¡»é€šè¿‡æµæ°´çº¿â€ï¼š</p>
<ul>
<li>è¿›å…¥é¡¹ç›® â†’ Settings &gt; General &gt; Merge requests</li>
<li>å‹¾é€‰ Pipelines must succeed</li>
<li>ï¼ˆå¯é€‰ï¼‰å‹¾é€‰ Require approval from code owners</li>
</ul>
</li>
<li>
<p>ä¿æŠ¤ç›®æ ‡åˆ†æ”¯ï¼ˆå¦‚ main / developï¼‰ï¼šï¼ˆè¿™ä¸ªå¯¹äºæœ‰è§„æ¨¡çš„å¼€å‘å›¢é˜Ÿï¼Œå·²ç»æœ‰CMOè¿›è¡Œé…ç½®è¿‡äº†ï¼‰</p>
<ul>
<li>
<p>Settings &gt; Repository &gt; Protected Branches</p>
</li>
<li>
<p>å¯¹ç›®æ ‡åˆ†æ”¯è®¾ç½®ï¼š</p>
<ul>
<li>Allowed to merge: Maintainersï¼ˆæˆ–æŒ‡å®šè§’è‰²ï¼‰</li>
<li>Require status checks to pass before mergingï¼ˆå¦‚æœå¯ç”¨äº†å¤–éƒ¨çŠ¶æ€æ£€æŸ¥ï¼‰</li>
</ul>
</li>
</ul>
</li>
<li>
<p>ç»“æœï¼š</p>
<ul>
<li>å¦‚æœ CI pipeline å¤±è´¥ï¼ˆä»»ä½• job å¤±è´¥ä¸”æœªè¢« allow_failure: true å¿½ç•¥ï¼‰ï¼ŒMerge æŒ‰é’®å˜ç°ï¼Œæ— æ³•åˆå¹¶ã€‚</li>
<li>å³ä½¿æœ‰ Approver åŒæ„ï¼Œåªè¦ pipeline å¤±è´¥ï¼Œä¹Ÿæ— æ³•åˆå¹¶ã€‚ å·¥ä½œæµç¨‹ï¼š</li>
</ul>
</li>
<li>
<p>æ³¨å†Œï¼šRunner å‘ GitLab Server æ³¨å†Œï¼Œè·å¾—å”¯ä¸€ tokenï¼Œå¹¶ç»‘å®šåˆ°é¡¹ç›®æˆ– groupã€‚</p>
</li>
<li>
<p>è½®è¯¢/é•¿è¿æ¥ï¼šRunner å®šæœŸå‘ GitLab Server çš„ /jobs/request API å‘èµ·è¯·æ±‚ï¼ˆé»˜è®¤æ¯å‡ ç§’ä¸€æ¬¡ï¼‰ï¼Œè¯¢é—®æ˜¯å¦æœ‰å¾…å¤„ç†çš„ jobã€‚</p>
</li>
<li>
<p>é¢†å–ä»»åŠ¡ï¼šå½“æœ‰åŒ¹é…æ ‡ç­¾ï¼ˆtagsï¼‰çš„ job åˆ°æ¥ï¼ŒRunner é¢†å–ä»»åŠ¡ï¼ˆåŒ…å« .gitlab-ci.yml ä¸­çš„ scriptã€variablesã€artifacts ç­‰ä¿¡æ¯ï¼‰ã€‚</p>
</li>
<li>
<p>æ‰§è¡Œä»»åŠ¡ ï¼š</p>
<ul>
<li>æ ¹æ®é…ç½®çš„ executorï¼ˆshell/docker/ssh/k8s ç­‰ï¼‰å¯åŠ¨æ‰§è¡Œç¯å¢ƒï¼›</li>
<li>å…‹éš†ä»£ç ï¼›</li>
<li>æ‰§è¡Œ before_script â†’ script â†’ after_scriptï¼›</li>
<li>ä¸Šä¼  artifacts/logsï¼›</li>
<li>ä¸ŠæŠ¥çŠ¶æ€ï¼ˆsuccess/failureï¼‰ã€‚</li>
</ul>
</li>
<li>
<p>é‡Šæ”¾èµ„æºï¼šä»»åŠ¡ç»“æŸï¼Œæ¸…ç†ä¸´æ—¶æ–‡ä»¶ï¼ˆé™¤éé…ç½®ä¿ç•™ï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-11">gitlab CI/CDï¼Œå¦‚æœè¦æ‰§è¡Œè„šæœ¬ï¼Œæœ‰å“ªäº›å‚æ•°æ˜¯gitlabè¿™è¾¹å¯ä»¥æä¾›</h3>
<p>GitLab è‡ªåŠ¨æ³¨å…¥å¤§é‡ é¢„å®šä¹‰ CI/CD å˜é‡ï¼ˆPredefined Variablesï¼‰ï¼Œä½ å¯ä»¥åœ¨è„šæœ¬ä¸­ç›´æ¥ä½¿ç”¨ï¼Œä¾‹å¦‚ï¼š</p>
<p>å¸¸ç”¨å†…ç½®å˜é‡ç¤ºä¾‹ï¼š</p>





















<table><thead><tr><th>å˜é‡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>CI_COMMIT_REF_NAME</td><td>å½“å‰åˆ†æ”¯æˆ– tag åï¼ˆå¦‚ main, v1.0ï¼‰</td></tr><tr><td>CI_PROJECT_DIR</td><td>CI ä»»åŠ¡çš„å·¥ä½œç›®å½•ï¼ˆä»£ç è¢« clone åˆ°è¿™é‡Œï¼‰</td></tr><tr><td>GITLAB_USER_EMAIL</td><td>è§¦å‘ pipeline çš„ç”¨æˆ·é‚®ç®±</td></tr></tbody></table>
<p>å…¶ä»–çš„åƒæ˜¯ä¸¤ä¸ªåˆ†æ”¯çš„åˆ†æ”¯hashä¹Ÿå¯ä»¥é€šè¿‡gitæä¾›çš„å‚æ•°è·å–åˆ°ï¼Œç”¨äºå·®å¼‚æ–‡ä»¶çš„æ’æŸ¥ã€‚æ›´å¤šçš„å¯ä»¥çœ‹å®˜ç½‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.gitlab.com%2Fci%2Fvariables%2Fpredefined_variables%2F" target="_blank" title="https://docs.gitlab.com/ci/variables/predefined_variables/" ref="nofollow noopener noreferrer">docs.gitlab.com/ci/variableâ€¦</a></p>
<h3 data-id="heading-12">åˆå¹¶ä»»åŠ¡ä¸‹ï¼Œä¸¤ä¸ªåˆ†æ”¯éƒ½æœ‰è„šæœ¬ï¼Œæ”¹ç”¨å“ªä¸€ä¸ªï¼Œå¦‚æœä»»æ„ä¸€æ–¹ç¼ºå°‘è„šæœ¬ï¼Œè¯¥ç”¨å“ªä¸€ä¸ª</h3>
<p>GitLab çš„è§„åˆ™éå¸¸æ˜ç¡®ï¼š å§‹ç»ˆä½¿ç”¨ source branchï¼ˆæºåˆ†æ”¯ï¼‰ä¸­çš„ .gitlab-ci.yml æ–‡ä»¶</p>
<p>è¯¦ç»†è¯´æ˜ï¼š</p>
<ul>
<li>å½“ä½ åˆ›å»ºä¸€ä¸ªä» feature â†’ main çš„ MRï¼Œ</li>
<li>GitLab ä¼š checkout feature åˆ†æ”¯çš„ä»£ç ï¼Œ</li>
<li>å¹¶è¯»å– feature åˆ†æ”¯æ ¹ç›®å½•ä¸‹çš„ .gitlab-ci.yml æ¥æ‰§è¡Œ pipelineã€‚</li>
<li>ä¸ä¼šå»è¯» main åˆ†æ”¯çš„ .gitlab-ci.ymlã€‚</li>
</ul>

























<table><thead><tr><th>æƒ…å†µ</th><th>ä½¿ç”¨å“ªä¸ª .gitlab-ci.yml?</th></tr></thead><tbody><tr><td>feature æœ‰ï¼Œmain æœ‰</td><td>âœ… ç”¨ feature çš„</td></tr><tr><td>feature æœ‰ï¼Œmain æ²¡æœ‰</td><td>âœ… ç”¨ feature çš„</td></tr><tr><td>feature æ²¡æœ‰ï¼Œmain æœ‰</td><td>âŒ pipeline ä¸ä¼šè§¦å‘ï¼ˆå› ä¸º source branch æ²¡æœ‰ .gitlab-ci.ymlï¼‰</td></tr><tr><td>ä¸¤è€…éƒ½æ²¡æœ‰</td><td>âŒ æ—  CI pipeline</td></tr></tbody></table>
<h3 data-id="heading-13">gitlab-ci.ymlä¼šæ‰§è¡Œæ›´å¤šè„šæœ¬ï¼Œè¿™äº›è„šæœ¬/é™æ€èµ„æºæ€ä¹ˆå­˜æ”¾</h3>
<p>æ¨èå°†å¤§èµ„æºï¼ˆå¦‚git CI/CDå¯ä»¥æ¥å…¥é€šè¿‡checkstyle.jaræ‰§è¡Œcheckstyleï¼Œå¯¹åº”çš„jaræ–‡ä»¶ï¼‰æ”¾åœ¨æœåŠ¡å™¨ä¸Šï¼Œå…¶ä»–çš„åˆ™å¯ä»¥æ”¾åœ¨å„è‡ªçš„ä»£ç ä»“åº“å†…</p>
<h3 data-id="heading-14">ä¸ºä»€ä¹ˆ GitLab Runner å®‰è£…æ—¶æ²¡æœ‰ gitlab-runner ç”¨æˆ·å°±æ— æ³•æ³¨å†Œï¼Ÿè¿™ä¸ªç”¨æˆ·ä»£è¡¨ä»€ä¹ˆï¼Ÿ</h3>
<p>å½“ä½ é€šè¿‡å®˜æ–¹æ–¹å¼å®‰è£… GitLab Runnerï¼ˆå¦‚ yum install gitlab-runner æˆ– dpkg -i gitlab-runner_xxx.debï¼‰ï¼Œå®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨ï¼š</p>
<ol start="0">
<li>åˆ›å»ºç³»ç»Ÿç”¨æˆ· gitlab-runner</li>
<li>ä»¥è¯¥ç”¨æˆ·èº«ä»½è¿è¡Œ runner æœåŠ¡</li>
<li>Runner åœ¨æ‰§è¡Œ job æ—¶ï¼Œæ‰€æœ‰å‘½ä»¤éƒ½ä»¥ gitlab-runner èº«ä»½è¿è¡Œ</li>
</ol>
<p>æ‰€ä»¥å¦‚æœæ‰‹åŠ¨çš„å®‰è£…ï¼Œå¯èƒ½ä¼šé”™è¿‡è¿™ä¸€æ­¥ï¼Œæœ€ç»ˆå¯¼è‡´æ— æ³•æ³¨å†Œrunneråˆ°gitlabä¸Šé¢</p>
<h3 data-id="heading-15">.gitlab-ci.ymlçš„å®Œæ•´å…‹éš†æ˜¯ä»€ä¹ˆæ„æ€</h3>
<p>ç­”æ¡ˆï¼šGitLab ä¼šå®Œæ•´å…‹éš†ï¼ˆcheckoutï¼‰æºåˆ†æ”¯ï¼ˆsource branchï¼‰çš„ä»£ç ï¼Œå¹¶ä½¿ç”¨è¯¥åˆ†æ”¯ä¸­çš„ .gitlab-ci.yml æ–‡ä»¶</p>
<ul>
<li>
<p>è¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬ï¼š</p>
<ul>
<li>åœ¨ Runner ä¸Šæ‰§è¡Œ git clone </li>
<li>git checkout ï¼ˆä¾‹å¦‚ feature/add-login çš„æœ€æ–° commitï¼‰</li>
<li>è¯»å–è¿™ä¸ª commit ä¸­çš„ .gitlab-ci.yml</li>
<li>æŒ‰ç…§å®ƒçš„å®šä¹‰æ‰§è¡Œ job</li>
</ul>
</li>
</ul>
<p>æ‰€ä»¥ï¼Œâ€œå®Œæ•´å…‹éš†â€åœ¨è¿™é‡Œçš„æ„æ€æ˜¯ï¼š</p>
<p>ä¸æ˜¯åªå¤åˆ¶ .gitlab-ci.yml æ–‡ä»¶ï¼Œè€Œæ˜¯æŠŠæ•´ä¸ªæºåˆ†æ”¯çš„ä»£ç ä»“åº“å®Œæ•´æ‹‰ä¸‹æ¥ï¼Œç¡®ä¿ CI é…ç½®å’Œä»£ç ç‰ˆæœ¬ä¸¥æ ¼ä¸€è‡´ã€‚</p>
<p>ä¸ºä»€ä¹ˆé‡è¦ï¼Ÿ</p>
<ul>
<li>å¦‚æœä½ ä¿®æ”¹äº† .gitlab-ci.ymlï¼ˆæ¯”å¦‚åŠ äº†ä¸€ä¸ªæµ‹è¯• jobï¼‰ï¼Œåªæœ‰æ¨é€åˆ° æºåˆ†æ”¯ æ‰ä¼šåœ¨ MR ä¸­ç”Ÿæ•ˆã€‚</li>
<li>ç›®æ ‡åˆ†æ”¯ï¼ˆå¦‚ mainï¼‰çš„ .gitlab-ci.ymlå®Œå…¨ä¸ä¼šè¢«ä½¿ç”¨ã€‚</li>
</ul>
<h3 data-id="heading-16">gitlab runneræ‹‰ä»£ç çš„æ—¶å€™æœ‰ä»€ä¹ˆçº§åˆ«å˜›ï¼Œæ¯”å¦‚ä¸€ä¸ªçº§åˆ«åªæ‹‰ä»£ç ï¼Œä¸€ä¸ªçº§åˆ«æŠŠå…¨éƒ¨çš„ä¿¡æ¯éƒ½æ‹‰å–ä¸‹æ¥ï¼Ÿå¦‚æœæœ‰ä¸åŒçº§åˆ«ï¼Œgitlabcicdæä¾›çš„å‚æ•°è¿˜ä¼šç”Ÿæ•ˆå—ï¼Ÿå¦‚ä½•é…ç½®ï¼Ÿå¦‚ä½•é€‰æ‹©ï¼Ÿ</h3>
<blockquote>
<p><strong>gitlab runneræ‹‰ä»£ç çš„æ—¶å€™æœ‰ä»€ä¹ˆçº§åˆ«å˜›ï¼Œæ¯”å¦‚ä¸€ä¸ªçº§åˆ«åªæ‹‰ä»£ç ï¼Œä¸€ä¸ªçº§åˆ«æŠŠå…¨éƒ¨çš„ä¿¡æ¯éƒ½æ‹‰å–ä¸‹æ¥ï¼Ÿ</strong></p>
</blockquote>
<p>GitLab Runner åœ¨æ‹‰å–ä»£ç æ—¶ï¼Œç¡®å®æ”¯æŒâ€œä¸åŒæ·±åº¦â€çš„å…‹éš†ï¼ˆclone depthï¼‰ï¼Œä½†æ²¡æœ‰â€œåªæ‹‰ä»£ç  / æ‹‰å…¨éƒ¨ä¿¡æ¯â€è¿™ç§äºŒå…ƒçº§åˆ«ã€‚</p>
<p>ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ§åˆ¶ æ‹‰å–å¤šå°‘ Git å†å²ï¼ˆcommit historyï¼‰ï¼š</p>
<ul>
<li>æµ…å…‹éš†ï¼ˆshallow cloneï¼‰ï¼šåªæ‹‰æœ€è¿‘ N ä¸ª commitï¼ˆé»˜è®¤è¡Œä¸ºï¼‰</li>
<li>æ·±å…‹éš†ï¼ˆfull cloneï¼‰ï¼šæ‹‰å–å®Œæ•´å†å²ï¼ˆæ‰€æœ‰åˆ†æ”¯ã€tagsã€å®Œæ•´ commit graphï¼‰</li>
</ul>
<p>æ³¨æ„ï¼šæ— è®ºå“ªç§æ–¹å¼ï¼Œéƒ½ä¼šæ‹‰å–å®Œæ•´çš„å½“å‰ commit çš„æ–‡ä»¶å†…å®¹ï¼ˆå³â€œä»£ç â€ï¼‰ã€‚</p>
<p>æ‰€è°“â€œåªæ‹‰ä»£ç â€å…¶å®æ˜¯è¯¯è§£ â€”â€” ä»£ç æ–‡ä»¶æ€»æ˜¯å®Œæ•´çš„ï¼ŒåŒºåˆ«åªåœ¨ å†å²è®°å½•æ˜¯å¦å®Œæ•´ã€‚
æµ…æ‹·è´ï¼Œæ·±æ‹·è´çš„åœ¨å„ä¸ªæ–¹é¢çš„ä¸åŒ</p>

























<table><thead><tr><th>é…ç½®</th><th>è¡Œä¸º</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>GIT_DEPTH: 1ï¼ˆé»˜è®¤ï¼‰</td><td>æµ…å…‹éš†ï¼šåªæ‹‰å½“å‰ commit + æœ€è¿‘ 1 å±‚å†å²</td><td>å¿«é€Ÿæ„å»ºã€èŠ‚çœå¸¦å®½</td></tr><tr><td>GIT_DEPTH: 0 æˆ–æœªè®¾ç½®</td><td>æ·±å…‹éš†ï¼šæ‹‰å–å®Œæ•´ä»“åº“å†å²ï¼ˆç­‰ä»·äº git clone --mirrorï¼‰</td><td>éœ€è¦ git logã€git describeã€è®¡ç®—ç‰ˆæœ¬å·ç­‰</td></tr><tr><td>GIT_DEPTH: 10</td><td>æ‹‰æœ€è¿‘ 10 ä¸ª commit çš„å†å²</td><td>æŠ˜ä¸­æ–¹æ¡ˆ</td></tr></tbody></table>
<p>ä¸åŒçš„é…ç½®æ¨èåœºæ™¯å¦‚ä¸‹ï¼š</p>





























<table><thead><tr><th>åœºæ™¯</th><th>æ¨èé…ç½®</th></tr></thead><tbody><tr><td>æ™®é€šæ„å»ºã€æµ‹è¯•ã€éƒ¨ç½²</td><td>GIT_DEPTH: 1ï¼ˆé»˜è®¤ï¼Œæœ€å¿«ï¼‰</td></tr><tr><td>éœ€è¦ç”Ÿæˆç‰ˆæœ¬å·ï¼ˆå¦‚ v1.2.3-5-gabc123ï¼‰</td><td>GIT_DEPTH: 0 + git fetch --tags</td></tr><tr><td>éœ€è¦åˆ†æ commit å·®å¼‚ï¼ˆå¦‚ changelogï¼‰</td><td>GIT_DEPTH: 0</td></tr><tr><td>ä½¿ç”¨ Lerna / Nx ç­‰å·¥å…·ä¾èµ– Git å†å²</td><td>GIT_DEPTH: 0</td></tr><tr><td>èŠ‚çœ CI æ—¶é—´å’Œå¸¦å®½</td><td>ä¿æŒé»˜è®¤ï¼ˆGIT_DEPTH: 1ï¼‰</td></tr></tbody></table>
<blockquote>
<p><strong>GitLab CI æä¾›çš„å‚æ•°è¿˜ä¼šç”Ÿæ•ˆå—ï¼Ÿ</strong></p>
</blockquote>
<p>ä¼šï¼å®Œå…¨ä¸å—å½±å“ã€‚</p>
<p>æ— è®ºä½ ç”¨æµ…å…‹éš†è¿˜æ˜¯æ·±å…‹éš†ï¼Œä»¥ä¸‹å†…å®¹éƒ½ æ­£å¸¸å¯ç”¨</p>
<blockquote>
<p>å¦‚ä½•é…ç½®ï¼Ÿ</p>
</blockquote>
<p>GitLab CI é€šè¿‡ä¸€ä¸ªå†…ç½®å˜é‡ GIT_DEPTH æ§åˆ¶å…‹éš†æ·±åº¦ï¼š</p>
<p>å¦‚ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">variables:</span>
  <span class="hljs-attr">GIT_DEPTH:</span> <span class="hljs-number">0</span>  <span class="hljs-comment"># æ‹‰å–å®Œæ•´å†å²</span>

<span class="hljs-attr">build:</span>
  <span class="hljs-attr">script:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">git</span> <span class="hljs-string">log</span> <span class="hljs-string">--oneline</span> <span class="hljs-string">-n</span> <span class="hljs-number">5</span>   <span class="hljs-comment"># åªæœ‰ GIT_DEPTH &gt; 1 æˆ– =0 æ—¶æ‰æœ‰å¤šä¸ª commit</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">git</span> <span class="hljs-string">describe</span> <span class="hljs-string">--tags</span>      <span class="hljs-comment"># éœ€è¦å®Œæ•´ tag å†å²</span>
</code></pre>
<blockquote>
<p><strong>é»˜è®¤è¡Œä¸ºæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
</blockquote>
<p>GIT_DEPTH: 1ï¼ˆæµ…å…‹éš†ï¼Œé«˜æ•ˆï¼‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude Skills å®æˆ˜æŒ‡å—ï¼šä¸€é”®ç”Ÿæˆå…¬ä¼—å·å°é¢ï¼Œ3D æ’ç”» + æè¾¹æ ‡é¢˜ 3 ç§’å‡ºå›¾]]></title>    <link>https://juejin.cn/post/7572537221540708367</link>    <guid>https://juejin.cn/post/7572537221540708367</guid>    <pubDate>2025-11-16T02:03:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572537221540708367" data-draft-id="7572524368879255586" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude Skills å®æˆ˜æŒ‡å—ï¼šä¸€é”®ç”Ÿæˆå…¬ä¼—å·å°é¢ï¼Œ3D æ’ç”» + æè¾¹æ ‡é¢˜ 3 ç§’å‡ºå›¾"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-16T02:03:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="wwwzhouhui"/> <meta itemprop="url" content="https://juejin.cn/user/3428746411400537"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude Skills å®æˆ˜æŒ‡å—ï¼šä¸€é”®ç”Ÿæˆå…¬ä¼—å·å°é¢ï¼Œ3D æ’ç”» + æè¾¹æ ‡é¢˜ 3 ç§’å‡ºå›¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3428746411400537/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    wwwzhouhui
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T02:03:43.000Z" title="Sun Nov 16 2025 02:03:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä½ æ˜¯ä¸æ˜¯ç»å¸¸ä¸ºäº†åšä¸€å¼ å…¬ä¼—å·å°é¢å›¾è€Œçƒ¦æ¼ï¼Ÿæ‰“å¼€PSæˆ–è€…Figmaï¼Œè°ƒè‰²ã€æ’ç‰ˆã€æ‰¾ç´ æï¼ŒæŠ˜è…¾å¤§åŠå¤©è¿˜ä¸ä¸€å®šæ»¡æ„ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œæœ‰æ—¶å€™çµæ„Ÿæ¥äº†æƒ³ç«‹åˆ»å‘æ–‡ï¼Œå´è¢«å°é¢å›¾å¡ä½äº†è¿›åº¦ã€‚ä½œä¸ºä¸€ä¸ªæŠ€æœ¯åšä¸»ï¼Œæˆ‘æ·±æœ‰ä½“ä¼šâ€”â€”æˆ‘æƒ³ä¸“æ³¨äºå†™ä½œå’Œåˆ†äº«æŠ€æœ¯ï¼Œè€Œä¸æ˜¯åœ¨è®¾è®¡å·¥å…·ä¸Šè€—è´¹æ—¶é—´ã€‚</p>
<p>å¥½æ¶ˆæ¯æ˜¯ï¼Œç°åœ¨æœ‰äº†AIåŠ æŒï¼Œè¿™ä¸ªé—®é¢˜å¯ä»¥å½»åº•è§£å†³äº†ï¼æˆ‘æœ€è¿‘å¼€å‘äº†ä¸€ä¸ªå« mp-cover-generator çš„å·¥å…·ï¼Œå®ƒèƒ½æ ¹æ®ä½ çš„æ–‡ç« ä¸»é¢˜å’Œæ ‡é¢˜ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯çˆ±çš„3Dæ’ç”»é£æ ¼å°é¢å›¾ã€‚ä¸éœ€è¦è®¾è®¡åŠŸåº•ï¼Œä¸éœ€è¦PSæŠ€èƒ½ï¼Œåªè¦ä¸€å¥è¯æè¿°ï¼Œ3ç§’é’Ÿå°±èƒ½æå®šã€‚æœ€å…³é”®çš„æ˜¯ï¼Œç”Ÿæˆçš„å°é¢å›¾è¿˜ç‰¹åˆ«æœ‰è´¨æ„Ÿï¼Œç±»ä¼¼çš®å…‹æ–¯åŠ¨ç”»çš„é‚£ç§å¡é€šé£æ ¼ï¼Œé…ä¸Šé†’ç›®çš„æè¾¹æ ‡é¢˜ï¼Œè§†è§‰å†²å‡»åŠ›ç›´æ¥æ‹‰æ»¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c04b4370f2cd4d1cbe37db3280880e3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=Gn0%2FliSmVETPLtJt%2BYo%2BZRbCi%2Fk%3D" alt="image-20251115213038620" loading="lazy"/></p>
<p>è¿™ç¯‡æ–‡ç« æˆ‘å°±æ¥æ‰‹æŠŠæ‰‹æ•™ä½ æ€ä¹ˆç”¨è¿™ä¸ªå·¥å…·ï¼Œä»ç¯å¢ƒæ­å»ºåˆ°å®é™…ç”Ÿæˆå°é¢ï¼Œå…¨ç¨‹å›¾æ–‡è¯¦è§£ã€‚ä¸ç®¡ä½ æ˜¯å…¬ä¼—å·ä½œè€…ã€æŠ€æœ¯åšä¸»ï¼Œè¿˜æ˜¯è¿è¥å°ä¼™ä¼´ï¼Œçœ‹å®Œè¿™ç¯‡éƒ½èƒ½ç«‹åˆ»ä¸Šæ‰‹ï¼Œå½»åº•å‘Šåˆ«å°é¢å›¾åˆ¶ä½œçš„çƒ¦æ¼ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2176bd82631d436aad500f29e09829b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=ZRgjPcIimOyJAu5hAkEZSZYuKNU%3D" alt="ç”Ÿæˆè¿‡ç¨‹2" loading="lazy"/></p>
<h2 data-id="heading-1">é¡¹ç›®ä»‹ç»</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ mp-cover-generatorï¼Ÿ</h3>
<p>mp-cover-generatorï¼ˆå…¬ä¼—å·å°é¢ç”Ÿæˆå™¨ï¼‰æ˜¯ä¸€ä¸ªåŸºäº AI æŠ€æœ¯çš„è‡ªåŠ¨åŒ–å°é¢å›¾ç”Ÿæˆå·¥å…·ã€‚å®ƒçš„æ ¸å¿ƒç†å¿µå¾ˆç®€å•ï¼š<strong>è®©å†…å®¹åˆ›ä½œè€…ä¸“æ³¨äºå†…å®¹æœ¬èº«ï¼Œè€Œä¸æ˜¯åœ¨è®¾è®¡ä¸Šæµªè´¹æ—¶é—´</strong>ã€‚</p>
<p>è¿™ä¸ªå·¥å…·æœ€å¤§çš„äº®ç‚¹æœ‰ä¸‰ä¸ªï¼š</p>
<p><strong>1. AI é©±åŠ¨çš„åº•å›¾ç”Ÿæˆ</strong>
å®ƒé›†æˆäº†å³æ¢¦ AIï¼ˆå­—èŠ‚è·³åŠ¨æ——ä¸‹çš„å¤šæ¨¡æ€ AI ç”Ÿæˆå¹³å°ï¼‰ï¼Œèƒ½æ ¹æ®ä½ çš„ä¸»é¢˜å…³é”®è¯ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯çˆ±åœ†æ¶¦çš„ 3D æ’ç”»é£æ ¼åº•å›¾ã€‚ä½ è¯´"MCP æŠ€æœ¯æ•™ç¨‹"ï¼Œå®ƒå°±ç»™ä½ ç”Ÿæˆä¸€ä¸ªå¸¦ç€å¯çˆ±ç”µè„‘ã€AI å¤§è„‘ã€æ•™ç¨‹ä¹¦ç±çš„å¡é€šåœºæ™¯ã€‚é£æ ¼ç±»ä¼¼çš®å…‹æ–¯åŠ¨ç”»ï¼Œè´¨æ„ŸæŸ”å’Œï¼Œè‰²å½©æ˜å¿«ï¼Œçœ‹ç€å°±è®©äººèˆ’æœã€‚</p>
<p><strong>2. æè¾¹å¡é€šå­—ä½“ï¼Œè§†è§‰å†²å‡»åŠ›çˆ†è¡¨</strong>
ç”Ÿæˆçš„å°é¢æ ‡é¢˜ä¸æ˜¯æ™®é€šçš„æ–‡å­—ï¼Œè€Œæ˜¯å¸¦æœ‰å¤šå±‚æè¾¹æ•ˆæœçš„å¡é€šå­—ä½“ã€‚ä¸»æ ‡é¢˜ç”¨çº¢è‰²é…ç™½è‰²æè¾¹ï¼Œå‰¯æ ‡é¢˜ç”¨æ©™é»„è‰²é…æ·±æ£•è‰²æè¾¹ï¼Œ8 ä¸ªæ–¹å‘çš„æ–‡å­—é˜´å½±æ¨¡æ‹Ÿå‡ºåšé‡çš„è½®å»“ï¼Œå†åŠ ä¸Šç«‹ä½“é˜´å½±å¢å¼ºè§†è§‰å†²å‡»åŠ›ã€‚è¿™ç§æ•ˆæœåœ¨å…¬ä¼—å·å°é¢ä¸Šéå¸¸å¸ç›ï¼Œèƒ½å¤§å¹…æå‡æ–‡ç« çš„ç‚¹å‡»ç‡ã€‚</p>
<p><strong>3. åŒæ ¼å¼è¾“å‡ºï¼Œéšå¿ƒæ‰€æ¬²</strong>
å·¥å…·ä¼šè‡ªåŠ¨ç”Ÿæˆ HTML å’Œé«˜æ¸…å›¾ç‰‡ä¸¤ç§æ ¼å¼ã€‚HTML æ–‡ä»¶å¯ä»¥åœ¨æµè§ˆå™¨ä¸­é¢„è§ˆå’Œç¼–è¾‘ï¼Œå›¾ç‰‡æ ¼å¼åˆ™æ”¯æŒ PNGï¼ˆæ— æŸé«˜è´¨é‡ï¼‰å’Œ JPEGï¼ˆå‹ç¼©èŠ‚çœç©ºé—´ï¼‰ä¸¤ç§ã€‚æœ€ç»ˆè¾“å‡ºçš„å›¾ç‰‡åˆ†è¾¨ç‡è¾¾åˆ° 5120x2916 åƒç´ ï¼Œ2 å€åƒç´ å¯†åº¦ï¼Œæ— è®ºæ˜¯åœ¨æ‰‹æœºä¸Šçœ‹è¿˜æ˜¯æ‰“å°å‡ºæ¥ï¼Œéƒ½éå¸¸æ¸…æ™°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4aefd5cd8faa4ef7962ba252bfbf9a04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=Bjcod5hLugtiEQ6LxrzOzerDCcg%3D" alt="image-20251115212415744" loading="lazy"/></p>
<h3 data-id="heading-3">æŠ€æœ¯æ¶æ„</h3>
<p>mp-cover-generator çš„æŠ€æœ¯æ ˆéå¸¸ç°ä»£ï¼š</p>
<ul>
<li><strong>AI å›¾åƒç”Ÿæˆ</strong>ï¼šåŸºäº jimeng-mcp-serverï¼ˆå³æ¢¦ AI çš„ MCP åè®®å°è£…ï¼‰ï¼Œæ”¯æŒæ–‡ç”Ÿå›¾åŠŸèƒ½</li>
<li><strong>å‰ç«¯æŠ€æœ¯</strong>ï¼šHTML5 + CSS3ï¼Œä½¿ç”¨å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒå¤šç§å±å¹•å°ºå¯¸</li>
<li><strong>æˆªå›¾å¼•æ“</strong>ï¼šPlaywrightï¼ˆå¾®è½¯å¼€æºçš„æµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…·ï¼‰ï¼Œå®ç° HTML åˆ°å›¾ç‰‡çš„é«˜è´¨é‡è½¬æ¢</li>
<li><strong>å®¹å™¨åŒ–éƒ¨ç½²</strong>ï¼šjimeng-free-api-all Docker å®¹å™¨ï¼Œæä¾›ç¨³å®šçš„ AI å›¾åƒç”ŸæˆæœåŠ¡</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcae215abf4a4a27baec371892ff0117~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=GWisf%2FDz3jBCQJuLbtLfilRw89g%3D" alt="image-20251115212549474" loading="lazy"/></p>
<p>æ•´ä¸ªå·¥å…·çš„å·¥ä½œæµç¨‹åˆ†ä¸ºä¸‰æ­¥ï¼š</p>
<ol>
<li>ç”¨æˆ·æä¾›ä¸»é¢˜å…³é”®è¯å’Œæ ‡é¢˜æ–‡å­—</li>
<li>è°ƒç”¨ jimeng-mcp-server ç”Ÿæˆ 3D æ’ç”»é£æ ¼åº•å›¾ï¼ˆè¿”å› 4 å¼ å¯é€‰ï¼‰</li>
<li>å åŠ æ–‡å­—å±‚ç”Ÿæˆ HTMLï¼Œä½¿ç”¨ Playwright è½¬æ¢ä¸ºé«˜æ¸…å›¾ç‰‡</li>
</ol>
<p>è¿™ä¸ªæµç¨‹å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œä»è¾“å…¥åˆ°è¾“å‡ºåªéœ€è¦ 10-20 ç§’ï¼Œæ•ˆç‡æé«˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6e59aebc79b4eeb95a7279e70d5b88e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=rXvzqOd9hFI6MeXvT7v67HKA4fk%3D" alt="image-20251115212518494" loading="lazy"/></p>
<h3 data-id="heading-4">é€‚ç”¨åœºæ™¯</h3>
<p>mp-cover-generator ç‰¹åˆ«é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li><strong>å…¬ä¼—å·æ–‡ç« å°é¢</strong>ï¼šæŠ€æœ¯åšå®¢ã€ç”Ÿæ´»åˆ†äº«ã€è¡Œä¸šèµ„è®¯ç­‰å„ç±»æ–‡ç« </li>
<li><strong>ç¤¾äº¤åª’ä½“æ¨ªå¹…å›¾</strong>ï¼šå¾®åšã€çŸ¥ä¹ã€å°çº¢ä¹¦ç­‰å¹³å°çš„é…å›¾</li>
<li><strong>æŠ€æœ¯åšå®¢å¤´å›¾</strong>ï¼šæ˜é‡‘ã€CSDNã€åšå®¢å›­ç­‰æŠ€æœ¯å¹³å°çš„æ–‡ç« é…å›¾</li>
<li><strong>å®£ä¼ æµ·æŠ¥å¿«é€Ÿè®¾è®¡</strong>ï¼šæ´»åŠ¨é¢„å‘Šã€è¯¾ç¨‹æ¨å¹¿ç­‰è½»é‡çº§è®¾è®¡éœ€æ±‚</li>
</ul>
<p>åªè¦ä½ éœ€è¦å›¾æ–‡ç»“åˆçš„è®¾è®¡ï¼Œå¹¶ä¸”æƒ³è¦å¯çˆ±çš„ 3D æ’ç”»é£æ ¼ï¼Œmp-cover-generator éƒ½èƒ½å¸®ä½ æå®šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3ec3941f1eb4c5487fb0bfe85a7148f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=pIQjeJYbwGzgL7yfc%2Bl8l3kJ6pw%3D" alt="image-20251115212639081" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4ce1b9421f640279c1de067810d5fd5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=4KLzdwVZ7YjvKSLESw5QA26xqqw%3D" alt="image-20251115212704574" loading="lazy"/></p>
<h2 data-id="heading-5">éƒ¨ç½²å®æˆ˜</h2>
<p>å¥½äº†ï¼Œç†è®ºè®²å®Œäº†ï¼Œå’±ä»¬ç›´æ¥ä¸Šæ‰‹æ“ä½œï¼ä¸‹é¢æˆ‘ä¼šä¸€æ­¥æ­¥å¸¦ä½ å®Œæˆç¯å¢ƒæ­å»ºå’Œå®é™…ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-6">ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡</h3>
<p>åœ¨ä½¿ç”¨ mp-cover-generator ä¹‹å‰ï¼Œä½ éœ€è¦å‡†å¤‡ä»¥ä¸‹ç¯å¢ƒï¼š</p>
<p><strong>1. å®‰è£… Docker</strong></p>
<p>jimeng-free-api-all æ˜¯é€šè¿‡ Docker å®¹å™¨è¿è¡Œçš„ï¼Œæ‰€ä»¥é¦–å…ˆè¦å®‰è£… Dockerã€‚</p>
<p>Linux/Mac ç”¨æˆ·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… Dockerï¼ˆä»¥ Ubuntu ä¸ºä¾‹ï¼‰</span>
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

<span class="hljs-comment"># å¯åŠ¨ Docker æœåŠ¡</span>
sudo systemctl start docker
sudo systemctl <span class="hljs-built_in">enable</span> docker
</code></pre>
<p>Windows ç”¨æˆ·ï¼š
è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.docker.com%2Fproducts%2Fdocker-desktop" target="_blank" title="https://www.docker.com/products/docker-desktop" ref="nofollow noopener noreferrer">Docker Desktop å®˜ç½‘</a> ä¸‹è½½å¹¶å®‰è£… Docker Desktopã€‚</p>
<p><strong>2. å®‰è£… Node.js</strong></p>
<p>Playwright éœ€è¦ Node.js 16+ ç¯å¢ƒã€‚æˆ‘ä»¬å¯ä»¥å»<a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fzh-cn%2Fdownload" target="_blank" title="https://nodejs.org/zh-cn/download" ref="nofollow noopener noreferrer">nodejs.org/zh-cn/downlâ€¦</a>  ä¸‹è½½</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be9e119e02f24c138a9206c6b72dc66d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=yqAl%2B6YxXrFXtGkjTmEqqhMlrTA%3D" alt="image-20251115201350566" loading="lazy"/></p>
<p>Linux/Mac ç”¨æˆ·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ nvm å®‰è£… Node.jsï¼ˆæ¨èï¼‰</span>
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.40.3/install.sh | bash
<span class="hljs-comment"># in lieu of restarting the shell</span>
\. <span class="hljs-string">"<span class="hljs-variable">$HOME</span>/.nvm/nvm.sh"</span>
<span class="hljs-comment"># Download and install Node.js:</span>
nvm install 22
<span class="hljs-comment"># Verify the Node.js version:</span>
node -v <span class="hljs-comment"># Should print "v22.19.0".</span>
<span class="hljs-comment"># Verify npm version:</span>
npm -v <span class="hljs-comment"># Should print "10.9.3".</span>
</code></pre>
<p>Windows ç”¨æˆ·ï¼š
è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2F" target="_blank" title="https://nodejs.org/" ref="nofollow noopener noreferrer">Node.js å®˜ç½‘</a> ä¸‹è½½å¹¶å®‰è£… LTS ç‰ˆæœ¬ã€‚</p>
<p><strong>3. å®‰è£… Python 3.10+</strong></p>
<p>jimeng-mcp-server éœ€è¦ Python ç¯å¢ƒã€‚</p>
<p>Linux/Mac ç”¨æˆ·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ Python ç‰ˆæœ¬</span>
python3 --version
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abf20da5df664f119a851957834f13c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=xlfUeS7zZc2WLiWJ0eK0c5dOq8M%3D" alt="image-20251115095759755" loading="lazy"/></p>
<p>Windows ç”¨æˆ·ï¼š
è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.python.org%2F" target="_blank" title="https://www.python.org/" ref="nofollow noopener noreferrer">Python å®˜ç½‘</a> ä¸‹è½½å¹¶å®‰è£… Python 3.10+ã€‚</p>
<h3 data-id="heading-7">ç¬¬äºŒæ­¥ï¼šå¯åŠ¨ jimeng-free-api-all å®¹å™¨</h3>
<p>jimeng-free-api-all æ˜¯å³æ¢¦ AI çš„å…è´¹ API æœåŠ¡ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå¯åŠ¨è¿™ä¸ªå®¹å™¨ã€‚</p>
<p><strong>ä¸‹è½½é•œåƒï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">docker pull wwwzhouhui569/jimeng-free-api-all:latest
</code></pre>
<p><strong>å¯åŠ¨ Docker å®¹å™¨ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">docker run -it -d --init \
  --name jimeng-free-api-all \
  -p 8001:8000 \
  -e TZ=Asia/Shanghai \
  wwwzhouhui569/jimeng-free-api-all:latest
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ca97c09614047e0a9b3265f25eb8c39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=i8WmfBmFCQ5ohNjdVwsgoyr50xs%3D" alt="å¯åŠ¨å®¹å™¨" loading="lazy"/></p>
<p><strong>éªŒè¯å®¹å™¨çŠ¶æ€ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å®¹å™¨æ˜¯å¦å¯åŠ¨æˆåŠŸ</span>
docker ps | grep jimeng

<span class="hljs-comment"># æµ‹è¯• API æ˜¯å¦å¯ç”¨</span>
curl http://localhost:8001
</code></pre>
<p>å¦‚æœçœ‹åˆ°ç±»ä¼¼ <code>{"message":"Welcome to Jimeng Free API"}</code> çš„å“åº”ï¼Œè¯´æ˜å®¹å™¨å¯åŠ¨æˆåŠŸã€‚</p>
<h3 data-id="heading-8">ç¬¬ä¸‰æ­¥ï¼šè·å–å³æ¢¦ API å¯†é’¥</h3>
<p>è¦ä½¿ç”¨å³æ¢¦ AI çš„å›¾åƒç”ŸæˆæœåŠ¡ï¼Œéœ€è¦è·å– API å¯†é’¥ï¼ˆå³ sessionidï¼‰ã€‚</p>
<p><strong>è·å–æ­¥éª¤ï¼š</strong></p>
<ol>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fjimeng.jianying.com%2F" target="_blank" title="https://jimeng.jianying.com/" ref="nofollow noopener noreferrer">å³æ¢¦ AI å®˜ç½‘</a> å¹¶ç™»å½•ï¼ˆå¯ä»¥ç”¨æŠ–éŸ³è´¦å·ç™»å½•ï¼‰</li>
<li>æŒ‰ <strong>F12</strong> æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·</li>
<li>åˆ‡æ¢åˆ° <strong>Application</strong> æ ‡ç­¾é¡µï¼ˆChromeï¼‰æˆ– <strong>å­˜å‚¨</strong> æ ‡ç­¾é¡µï¼ˆFirefoxï¼‰</li>
<li>æ‰¾åˆ° <strong>Cookies</strong> ä¸‹çš„ <strong>sessionid</strong> å€¼ï¼Œå¤åˆ¶å®ƒ</li>
<li>å°†è¿™ä¸ªå€¼ä¿å­˜ä¸‹æ¥ï¼Œåé¢ä¼šç”¨åˆ°</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43bdf049f87f417db3f7f66ce50d666f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=t%2Bh2Rc%2Ba%2FstBokMjNx2GdAyKTQE%3D" alt="è·å– sessionid" loading="lazy"/></p>
<p><strong>æ³¨æ„ï¼š</strong> å³æ¢¦ AI å…è´¹å±‚æ¯å¤©æä¾› <strong>88 ç§¯åˆ†</strong>ï¼Œæ¯æ¬¡ç”Ÿæˆå›¾ç‰‡æ¶ˆè€— 1-2 ç§¯åˆ†ï¼Œå®Œå…¨å¤Ÿæ—¥å¸¸ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-9">ç¬¬å››æ­¥ï¼šå®‰è£… jimeng-mcp-server</h3>
<p>jimeng-mcp-server æ˜¯å³æ¢¦ AI çš„ MCP åè®®å°è£…ï¼Œè®©æˆ‘ä»¬èƒ½åœ¨ Claude Code ä¸­ç›´æ¥è°ƒç”¨ã€‚</p>
<p><strong>å…‹éš†é¡¹ç›®ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš† jimeng-mcp-server é¡¹ç›®</span>
git <span class="hljs-built_in">clone</span> https://github.com/wwwzhouhui/jimeng-mcp-server.git
<span class="hljs-built_in">cd</span> jimeng-mcp-server
</code></pre>
<p><strong>å®‰è£… Python ä¾èµ–ï¼š</strong></p>
<p>é¡¹ç›®ä½¿ç”¨ <code>uv</code> ä½œä¸ºåŒ…ç®¡ç†å·¥å…·ï¼ˆæ¨èï¼‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä¼ ç»Ÿçš„ pipã€‚</p>
<p><strong>æ–¹æ³•ä¸€ï¼šä½¿ç”¨ uvï¼ˆæ¨èï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£… uvï¼ˆå¦‚æœå°šæœªå®‰è£…ï¼‰</span>
curl -LsSf https://astral.sh/uv/install.sh | sh

<span class="hljs-comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–</span>
uv venv
<span class="hljs-built_in">source</span> .venv/bin/activate  <span class="hljs-comment"># Linux/macOS</span>
<span class="hljs-comment"># æˆ–è€…åœ¨ Windows ä¸Šä½¿ç”¨: .venv\Scripts\activate</span>

uv pip install -e .
</code></pre>
<p><strong>æ–¹æ³•äºŒï¼šä½¿ç”¨ pip</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span>
python -m venv .venv
<span class="hljs-built_in">source</span> .venv/bin/activate  <span class="hljs-comment"># Linux/macOS</span>
<span class="hljs-comment"># æˆ–è€…åœ¨ Windows ä¸Šä½¿ç”¨: .venv\Scripts\activate</span>

<span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
pip install -e .
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b27e1dc57e042a3b480ee857eb9e43a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=6Yn0C6d8DJB42cFXDO%2Fd4kHToaE%3D" alt="å®‰è£…ä¾èµ–" loading="lazy"/></p>
<p>å®‰è£…è¿‡ç¨‹ä¸­å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚</p>
<p><strong>é…ç½® MCP æœåŠ¡å™¨ï¼š</strong></p>
<p>åˆ›å»º <code>.env</code> æ–‡ä»¶é…ç½®åç«¯ API åœ°å€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">touch</span> .<span class="hljs-built_in">env</span>
</code></pre>
<p>ç¼–è¾‘ <code>.env</code> æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-env" lang="env"># å³æ¢¦APIé…ç½®

# æ‚¨çš„å³æ¢¦APIå¯†é’¥ï¼ˆå¿…éœ€ï¼‰
JIMENG_API_KEY=ä½ çš„sessionidå€¼

# APIåŸºç¡€URLï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º https://jimeng.duckcloud.funï¼‰
JIMENG_API_URL=http://127.0.0.1:8001

# å›¾åƒç”Ÿæˆçš„é»˜è®¤æ¨¡å‹ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä¸º jimeng-4.0ï¼‰
JIMENG_MODEL=jimeng-3.1
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acb0ce2f23fe45deb9718572b1c18a19~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=wxqJMvm%2BKKewYqQSWcnTzcKSJos%3D" alt="é…ç½®ç¯å¢ƒå˜é‡" loading="lazy"/></p>
<p><strong>æ³¨æ„ï¼š</strong> å°† <code>JIMENG_API_KEY</code> æ›¿æ¢ä¸ºä½ åœ¨ç¬¬ä¸‰æ­¥è·å–çš„ sessionid å€¼ã€‚</p>
<h3 data-id="heading-10">ç¬¬äº”æ­¥ï¼šCherry Studioé…ç½®</h3>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Claude Desktop æˆ– Cherry Studioï¼Œéœ€è¦é…ç½® MCP æœåŠ¡å™¨ã€‚</p>
<p><strong>Claude Desktop é…ç½®ï¼š</strong></p>
<p>æ‰¾åˆ°é…ç½®æ–‡ä»¶ï¼ˆä¸åŒæ“ä½œç³»ç»Ÿä½ç½®ä¸åŒï¼‰ï¼š</p>
<ul>
<li><strong>macOS</strong>: <code>~/Library/Application Support/Claude/claude_desktop_config.json</code></li>
<li><strong>Windows</strong>: <code>%APPDATA%\Claude\claude_desktop_config.json</code></li>
<li><strong>Linux</strong>: <code>~/.config/Claude/claude_desktop_config.json</code></li>
</ul>
<p>ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"jimeng-mcp-server"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"python"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-m"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"jimeng_mcp.server"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"env"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"JIMENG_API_KEY"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ çš„sessionidå€¼"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"JIMENG_API_URL"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://127.0.0.1:8001"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æˆ–è€…ï¼Œå¦‚æœä½ å·²ç»é…ç½®äº† <code>.env</code> æ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"jimeng-mcp-server"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"python"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-m"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"jimeng_mcp.server"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>Cherry Studio SSE æ¨¡å¼é…ç½®ï¼š</strong></p>
<p>å¦‚æœä½ ä½¿ç”¨ Cherry Studioï¼Œå¯ä»¥ç”¨ SSE æ¨¡å¼ï¼š</p>
<ol>
<li>å¯åŠ¨ SSE æœåŠ¡å™¨ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> jimeng-mcp-server
<span class="hljs-built_in">source</span> .venv/bin/activate
python -m jimeng_mcp.server --transport sse --port 8080
</code></pre>
<ol start="2">
<li>åœ¨ Cherry Studio ä¸­æ·»åŠ  MCP æœåŠ¡å™¨ï¼š</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2a7823b1121428a828fa0739c9a4fb5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=xL7EMr0MhTgyZCf%2BS%2BYqVzJO%2B4U%3D" alt="Cherry Studio SSEé…ç½®" loading="lazy"/></p>
<p>é…ç½®å®Œæˆåï¼Œé‡å¯ Claude Desktop æˆ– Cherry Studioï¼ŒMCP æœåŠ¡å™¨å°±ä¼šè‡ªåŠ¨åŠ è½½ã€‚</p>
<h3 data-id="heading-11">ç¬¬å…­æ­¥ï¼šå®‰è£… mp-cover-generator</h3>
<p>ç°åœ¨å¯ä»¥å®‰è£… mp-cover-generator äº†ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®</span>
git <span class="hljs-built_in">clone</span> https://github.com/wwwzhouhui/skills_collection.git
<span class="hljs-built_in">cd</span> skills_collection/mp-cover-generator

<span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
npm install

<span class="hljs-comment"># Playwright ä¼šè‡ªåŠ¨å®‰è£… Chromium æµè§ˆå™¨</span>
<span class="hljs-comment"># å¦‚æœæ²¡æœ‰è‡ªåŠ¨å®‰è£…ï¼Œæ‰‹åŠ¨æ‰§è¡Œï¼š</span>
npx playwright install chromium
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œé¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">mp-cover-generator/
â”œâ”€â”€ SKILL.md              <span class="hljs-comment"># Skill è¯¦ç»†æ–‡æ¡£</span>
â”œâ”€â”€ README.md             <span class="hljs-comment"># ä½¿ç”¨è¯´æ˜</span>
â”œâ”€â”€ package.json          <span class="hljs-comment"># npm é…ç½®æ–‡ä»¶</span>
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ capture.js        <span class="hljs-comment"># HTML è½¬å›¾ç‰‡è„šæœ¬</span>
â””â”€â”€ resources/            <span class="hljs-comment"># ç¤ºä¾‹æ–‡ä»¶</span>
</code></pre>
<h3 data-id="heading-12">ç¬¬ä¸ƒæ­¥ï¼šç”Ÿæˆç¬¬ä¸€å¼ å°é¢å›¾</h3>
<p>ç¯å¢ƒæ­å»ºå®Œæˆï¼Œç°åœ¨æ¥ç”Ÿæˆç¬¬ä¸€å¼ å°é¢å›¾ï¼</p>
<p><strong>åœ¨ Claude Code ä¸­ç›´æ¥è¾“å…¥ï¼š</strong></p>
<pre><code class="hljs">è¯·ä½¿ç”¨ mp-cover-generator skill ç”Ÿæˆä¸€ä¸ª MCPæ¡ˆä¾‹åˆ†äº« claudeè°ƒç”¨AIç”Ÿå›¾è§†é¢‘æ•™ç¨‹ ä»‹ç»çš„æ–‡ç« çš„å…¬ä¼—å·å°é¢
</code></pre>
<p>Claude ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li><strong>è°ƒç”¨ jimeng-mcp-server</strong> ç”Ÿæˆ 3D æ’ç”»åº•å›¾ï¼ˆè¿”å› 4 å¼ å¯é€‰å›¾ç‰‡ï¼‰</li>
<li><strong>é€‰æ‹©ç¬¬ä¸€å¼ å›¾ç‰‡</strong>ï¼Œå åŠ æ–‡å­—å±‚ç”Ÿæˆ HTML</li>
<li><strong>ä½¿ç”¨ Playwright</strong> è½¬æ¢ä¸º PNG å’Œ JPEG å›¾ç‰‡</li>
</ol>
<p>æ•´ä¸ªè¿‡ç¨‹å¤§çº¦ <strong>20 ç§’</strong>ï¼Œä½ ä¼šå¾—åˆ°ï¼š</p>
<ul>
<li><code>mcp_tutorial_cover_YYYYMMDD.html</code> - HTML æ–‡ä»¶</li>
<li><code>mcp_tutorial_cover_YYYYMMDD.png</code> - PNG å›¾ç‰‡ï¼ˆçº¦ 4-5 MBï¼‰</li>
<li><code>mcp_tutorial_cover_YYYYMMDD.jpg</code> - JPEG å›¾ç‰‡ï¼ˆçº¦ 1.5 MBï¼‰</li>
</ul>
<p><strong>ç”Ÿæˆè¿‡ç¨‹æˆªå›¾ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e10c33d285f45bba3aca7318e9e19c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=JVZeh0Ycr7bxtUC2nvDRTzAjktE%3D" alt="ç”Ÿæˆè¿‡ç¨‹1" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91de57866fe84cfdb58c49fe122b7eeb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgd3d3emhvdWh1aQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763863423&amp;x-signature=CoHbV3s%2FCvGA1NaZlYUkbHX4m7c%3D" alt="ç”Ÿæˆè¿‡ç¨‹2" loading="lazy"/></p>
<p><strong>æ–¹å¼äºŒï¼šæ‰‹åŠ¨è½¬æ¢ HTML ä¸ºå›¾ç‰‡</strong></p>
<p>å¦‚æœä½ å·²ç»æœ‰äº† HTML æ–‡ä»¶ï¼Œæƒ³å•ç‹¬è½¬æ¢ä¸ºå›¾ç‰‡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è½¬æ¢ä¸º PNGï¼ˆæ— æŸé«˜è´¨é‡ï¼‰</span>
node scripts/capture.js your_cover.html your_cover.png

<span class="hljs-comment"># è½¬æ¢ä¸º JPEGï¼ˆå‹ç¼©ç‰ˆæœ¬ï¼‰</span>
node scripts/capture.js your_cover.html your_cover.jpg --quality 95

<span class="hljs-comment"># è‡ªå®šä¹‰å‚æ•°</span>
node scripts/capture.js cover.html cover.png \
  --width 2560 \
  --height 1097 \
  --scale 2 \
  --<span class="hljs-built_in">wait</span> 3000
</code></pre>
<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>--width</code>: è§†å£å®½åº¦ï¼ˆåƒç´ ï¼‰ï¼Œé»˜è®¤ 2560</li>
<li><code>--height</code>: è§†å£é«˜åº¦ï¼ˆåƒç´ ï¼‰ï¼Œé»˜è®¤ 1097</li>
<li><code>--quality</code>: JPEG è´¨é‡ï¼ˆ1-100ï¼‰ï¼Œé»˜è®¤ 95</li>
<li><code>--wait</code>: ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ï¼Œé»˜è®¤ 2000</li>
<li><code>--scale</code>: è®¾å¤‡åƒç´ æ¯”ï¼Œé»˜è®¤ 2ï¼ˆè¾“å‡º 2 å€é«˜æ¸…å›¾ï¼‰</li>
</ul>
<h3 data-id="heading-13">ç¬¬å…«æ­¥ï¼šæŸ¥çœ‹ç”Ÿæˆæ•ˆæœ</h3>
<p>ç”Ÿæˆå®Œæˆåï¼Œç”¨æµè§ˆå™¨æ‰“å¼€ HTML æ–‡ä»¶ï¼Œæˆ–è€…ç›´æ¥æŸ¥çœ‹å›¾ç‰‡ã€‚</p>
<p><strong>å°é¢å›¾ç‰¹ç‚¹ï¼š</strong></p>
<p><strong>è§†è§‰é£æ ¼ï¼š</strong></p>
<ul>
<li>ä¸»é¢˜é£æ ¼ï¼šå¯çˆ±ã€åœ†æ¶¦ã€ç®€æ´çš„ 3D æ’ç”»</li>
<li>è´¨æ„Ÿï¼šç±»ä¼¼çš®å…‹æ–¯åŠ¨ç”»æˆ–é»åœŸå®šæ ¼åŠ¨ç”»</li>
<li>è‰²å½©ï¼šå’Œè°æ˜å¿«ï¼Œä½é¥±å’Œåº¦æ¸å˜èƒŒæ™¯</li>
<li>æ„å›¾ï¼šå³å›¾å·¦æ–‡ï¼Œä¸»ä½“ä½äºå³ä¾§ 30-40% åŒºåŸŸ</li>
<li>ç•™ç™½ï¼šå·¦ä¾§ 60-70% å¹²å‡€ç•™ç™½ä¾›æ–‡å­—æ˜¾ç¤º</li>
</ul>
<p><strong>æ–‡å­—æ ·å¼ï¼ˆæ ¸å¿ƒäº®ç‚¹ï¼‰ï¼š</strong></p>
<ul>
<li><strong>ä¸»æ ‡é¢˜</strong>ï¼šçº¢è‰²ï¼ˆ#FF3333ï¼‰+ ç™½è‰²æè¾¹ï¼Œ8 æ–¹å‘æ–‡å­—é˜´å½±</li>
<li><strong>å‰¯æ ‡é¢˜</strong>ï¼šæ©™é»„è‰²ï¼ˆ#FFB84Dï¼‰+ æ·±æ£•è‰²æè¾¹ï¼Œå•è¡Œä¸æŠ˜è¡Œ</li>
<li><strong>ç«‹ä½“æ„Ÿ</strong>ï¼šå¤šå±‚é˜´å½±æ¨¡æ‹Ÿæè¾¹ + é¢å¤–ç«‹ä½“é˜´å½±</li>
<li><strong>ä½ç½®</strong>ï¼šå‚ç›´å±…ä¸­ï¼ˆ<code>top: 50%; transform: translateY(-50%);</code>ï¼‰</li>
<li><strong>å­—å·</strong>ï¼š5vwï¼ˆå¤§å­—ä½“ï¼Œå“åº”å¼ï¼‰</li>
</ul>
<p><strong>è‡ªåŠ¨ç”Ÿæˆä¿¡æ¯ï¼š</strong></p>
<ul>
<li><strong>æ—¥æœŸ</strong>ï¼šè‡ªåŠ¨æ˜¾ç¤ºå½“å‰æ—¥æœŸï¼ˆæ ¼å¼ï¼šFri. 11.15ï¼‰</li>
<li><strong>ä½œè€…</strong>ï¼šå›ºå®šæ˜¾ç¤º"O3sky"</li>
<li><strong>åˆ†è¾¨ç‡</strong>ï¼š5120x2916 åƒç´ ï¼ˆå®Œæ•´é¡µé¢æˆªå›¾ï¼Œæ— æˆªæ–­ï¼‰</li>
</ul>
<p>å¦‚æœå¯¹åº•å›¾ä¸æ»¡æ„ï¼Œå¯ä»¥é‡æ–°ç”Ÿæˆã€‚jimeng-mcp-server æ¯æ¬¡ä¼šè¿”å› <strong>4 å¼ ä¸åŒé£æ ¼çš„å›¾ç‰‡</strong>ï¼Œä½ å¯ä»¥é€‰æ‹©æœ€å–œæ¬¢çš„ä¸€å¼ ã€‚</p>
<h3 data-id="heading-14">ç¬¬ä¹æ­¥ï¼šè‡ªå®šä¹‰å°é¢æ ·å¼</h3>
<p>å¦‚æœä½ æƒ³è‡ªå®šä¹‰å°é¢çš„æ ·å¼ï¼Œå¯ä»¥ç¼–è¾‘ HTML æ–‡ä»¶ã€‚ä¸»è¦å¯è°ƒæ•´çš„éƒ¨åˆ†ï¼š</p>
<p><strong>1. ä¿®æ”¹æ ‡é¢˜é¢œè‰²</strong>
åœ¨ CSS ä¸­æ‰¾åˆ° <code>.headline-main</code> å’Œ <code>.headline-secondary</code>ï¼Œä¿®æ”¹ <code>color</code> å±æ€§ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.headline-main</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#FF3333</span>;  <span class="hljs-comment">/* ä¸»æ ‡é¢˜é¢œè‰²ï¼Œæ”¹ä¸ºä½ å–œæ¬¢çš„é¢œè‰² */</span>
}

<span class="hljs-selector-class">.headline-secondary</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#FFB84D</span>;  <span class="hljs-comment">/* å‰¯æ ‡é¢˜é¢œè‰² */</span>
}
</code></pre>
<p><strong>2. è°ƒæ•´æ ‡é¢˜ä½ç½®</strong>
é»˜è®¤æ˜¯å‚ç›´å±…ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥æ”¹æˆé ä¸Šæˆ–é ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.headline</span> {
    <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;  <span class="hljs-comment">/* å‚ç›´å±…ä¸­ */</span>
    <span class="hljs-comment">/* top: 20%; æ”¹ä¸ºé ä¸Š */</span>
    <span class="hljs-comment">/* top: 70%; æ”¹ä¸ºé ä¸‹ */</span>
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">50%</span>);
}
</code></pre>
<p><strong>3. ä¿®æ”¹å­—ä½“å¤§å°</strong>
é»˜è®¤å­—å·æ˜¯ 5vwï¼ˆå“åº”å¼ï¼‰ï¼Œå¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.headline</span> {
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">5vw</span>;  <span class="hljs-comment">/* æ”¹ä¸º 6vw ä¼šæ›´å¤§ï¼Œ4vw ä¼šæ›´å° */</span>
}
</code></pre>
<p><strong>4. æ›´æ¢ä½œè€…å</strong>
åœ¨ HTML ä¸­æ‰¾åˆ° <code>.author</code> éƒ¨åˆ†ï¼Œä¿®æ”¹æ–‡å­—å†…å®¹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"author"</span>&gt;</span>O3sky<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>  <span class="hljs-comment">&lt;!-- æ”¹ä¸ºä½ çš„åå­— --&gt;</span>
</code></pre>
<p>ä¿®æ”¹å®Œæˆåï¼Œé‡æ–°è¿è¡Œ capture.js è½¬æ¢ä¸ºå›¾ç‰‡å³å¯ã€‚</p>
<h2 data-id="heading-15">æ€»ç»“</h2>
<p>ä»Šå¤©ä¸»è¦å¸¦å¤§å®¶äº†è§£å¹¶å®ç°äº† <strong>mp-cover-generatorï¼ˆå…¬ä¼—å·å°é¢ç”Ÿæˆå™¨ï¼‰</strong> çš„ å®Œæ•´éƒ¨ç½²ä¸ä½¿ç”¨æµç¨‹ï¼Œè¯¥ å¼€æºè‡ªåŠ¨åŒ–å·¥å…· ä»¥ "AIå›¾åƒç”Ÿæˆ + æè¾¹å¡é€šå­—ä½“ + å®Œæ•´é¡µé¢æˆªå›¾" ä¸ºæ ¸å¿ƒä¼˜åŠ¿ï¼Œç»“åˆ å†…å®¹åˆ›ä½œæ•ˆç‡æå‡ éœ€æ±‚ï¼Œé€šè¿‡ jimeng-mcp-serveré›†æˆ ä¸ Playwrightæµè§ˆå™¨è‡ªåŠ¨åŒ–ï¼Œå½¢æˆäº†ä¸€å¥—ä» <strong>AIåº•å›¾ç”Ÿæˆ</strong> åˆ° <strong>é«˜æ¸…å°é¢è¾“å‡º</strong> çš„å…¨é“¾è·¯ <strong>å…¬ä¼—å·å°é¢åˆ¶ä½œè§£å†³æ–¹æ¡ˆ</strong>ã€‚</p>
<p>é€šè¿‡è¿™å¥—å®è·µæ–¹æ¡ˆï¼Œå…¬ä¼—å·ä½œè€…ä¸æŠ€æœ¯åšä¸» èƒ½å¤Ÿé«˜æ•ˆçªç ´ ä¼ ç»Ÿè®¾è®¡å·¥å…·å­¦ä¹ æˆæœ¬é«˜ã€åˆ¶ä½œå‘¨æœŸé•¿ çš„æ•ˆç‡ç“¶é¢ˆ â€”â€” å€ŸåŠ© ä¸‰å±‚æŠ€æœ¯æ ˆï¼ˆåŒ…æ‹¬ å³æ¢¦AIå›¾åƒç”Ÿæˆå±‚ã€HTML/CSSå“åº”å¼è®¾è®¡å±‚ã€Playwrightæˆªå›¾è½¬æ¢å±‚ï¼‰ï¼Œæ— éœ€ æŒæ¡PSã€Figmaç­‰ä¸“ä¸šè®¾è®¡å·¥å…·ï¼Œå°±èƒ½å¿«é€Ÿ å®ç°AIç”Ÿæˆ3Dæ’ç”»åº•å›¾ã€æ™ºèƒ½å åŠ æè¾¹å­—ä½“ã€è‡ªåŠ¨è½¬æ¢é«˜æ¸…å›¾ç‰‡ä¸‰å¤§æ ¸å¿ƒåŠŸèƒ½ï¼ˆå¦‚æœ¬æ¬¡æ¼”ç¤ºçš„ "ä¸€å¥è¯ç”ŸæˆMCPæ•™ç¨‹å°é¢ï¼Œ20ç§’æ‹¿åˆ°HTML+PNG+JPGä¸‰ç§æ ¼å¼"ï¼‰ã€‚æ— è®ºæ˜¯ æŠ€æœ¯åšå®¢å°é¢è®¾è®¡ã€å…¬ä¼—å·æ–‡ç« é…å›¾ï¼Œè¿˜æ˜¯ ç¤¾äº¤åª’ä½“æ¨ªå¹…å›¾ã€å®£ä¼ æµ·æŠ¥å¿«é€Ÿåˆ¶ä½œï¼Œéƒ½èƒ½é€šè¿‡ è‡ªç„¶è¯­è¨€æè¿°ä¸»é¢˜ å®Œæˆï¼Œæå¤§ æå‡å†…å®¹åˆ›ä½œæ•ˆç‡å’Œè§†è§‰å‘ˆç°è´¨é‡ã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¯¥ <strong>å°é¢ç”Ÿæˆå™¨</strong> ä¸ä»… <strong>æ”¯æŒå¯çˆ±åœ†æ¶¦çš„3Dæ’ç”»é£æ ¼ï¼ˆç±»ä¼¼çš®å…‹æ–¯åŠ¨ç”»ï¼‰</strong>ï¼Œè¿˜ <strong>æä¾›å¤šå±‚æè¾¹å¡é€šå­—ä½“æ•ˆæœï¼ˆ8æ–¹å‘æ–‡å­—é˜´å½± + ç«‹ä½“é˜´å½±ï¼‰</strong>ï¼Œè§†è§‰å†²å‡»åŠ›è¿œä¼˜äº <strong>ä¼ ç»Ÿçº¯æ–‡å­—æˆ–ç®€å•å›¾ç‰‡å åŠ æ–¹æ¡ˆ</strong>ï¼›ç‰¹åˆ«æ˜¯é€šè¿‡ Playwrightå®Œæ•´é¡µé¢æˆªå›¾ï¼Œæœ‰æ•ˆè§£å†³äº† ä¼ ç»Ÿæˆªå›¾å·¥å…·å†…å®¹æˆªæ–­å’Œåˆ†è¾¨ç‡ä¸è¶³ çš„éš¾é¢˜ï¼ˆè¾“å‡ºåˆ†è¾¨ç‡è¾¾åˆ° 5120x2916åƒç´ ï¼Œ2å€åƒç´ å¯†åº¦ï¼‰ã€‚åŒæ—¶ï¼Œæ–¹æ¡ˆå…·å¤‡è‰¯å¥½çš„å¯å®šåˆ¶æ€§ â€”â€” å°ä¼™ä¼´ä»¬å¯ä»¥åŸºäºç”Ÿæˆçš„HTMLæ–‡ä»¶è‡ªå®šä¹‰ æ ‡é¢˜é¢œè‰²ã€å­—ä½“å¤§å°ã€ä½ç½®å¸ƒå±€ ç­‰æ ·å¼ï¼Œè¿›ä¸€æ­¥å‘æŒ¥ CSSå“åº”å¼è®¾è®¡èƒ½åŠ› åœ¨ ä¸ªäººå“ç‰Œè§†è§‰ç»Ÿä¸€ã€ç³»åˆ—æ–‡ç« å°é¢é£æ ¼ä¸€è‡´æ€§ ç­‰åœºæ™¯çš„åº”ç”¨ä»·å€¼ã€‚æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥æŒ‰ç…§æ–‡ä¸­æä¾›çš„æ­¥éª¤è¿›è¡Œå®è·µï¼Œæ ¹æ®å®é™… å†…å®¹ä¸»é¢˜å’Œè§†è§‰éœ€æ±‚ è°ƒæ•´ ä¸»é¢˜å…³é”®è¯ã€æ ‡é¢˜æ–‡å­—ã€é¢œè‰²æ–¹æ¡ˆç­‰é…ç½®é¡¹ã€‚ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œç»“æŸäº†ï¼Œæˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« è§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»€ä¹ˆæ˜¯RAGï¼Ÿå•¥åˆæ˜¯å‘é‡ï¼Ÿå¸¦ä½ ä»å‘¨æ°ä¼¦çš„è§’åº¦è¯»æ‡‚.....]]></title>    <link>https://juejin.cn/post/7572454929145053219</link>    <guid>https://juejin.cn/post/7572454929145053219</guid>    <pubDate>2025-11-15T15:11:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572454929145053219" data-draft-id="7572493520003596322" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»€ä¹ˆæ˜¯RAGï¼Ÿå•¥åˆæ˜¯å‘é‡ï¼Ÿå¸¦ä½ ä»å‘¨æ°ä¼¦çš„è§’åº¦è¯»æ‡‚....."/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Agent"/> <meta itemprop="datePublished" content="2025-11-15T15:11:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="eacape"/> <meta itemprop="url" content="https://juejin.cn/user/4212984289440478"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»€ä¹ˆæ˜¯RAGï¼Ÿå•¥åˆæ˜¯å‘é‡ï¼Ÿå¸¦ä½ ä»å‘¨æ°ä¼¦çš„è§’åº¦è¯»æ‡‚.....
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984289440478/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    eacape
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T15:11:40.000Z" title="Sat Nov 15 2025 15:11:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>LLMç«äº†è¿™ä¹ˆé•¿æ—¶é—´ï¼ŒRAGã€mcpã€embeddingç­‰æŠ€æœ¯åè¯ä¹Ÿå‡ºç°åœ¨äº†æ—¥å¸¸çš„å…¬ä¼—å·æ–‡ç« ä¸­ï¼Œä½ æœ‰äº†è§£è¿‡è¿™äº›æŠ€æœ¯å—ï¼Ÿ</p>
</blockquote>
<h2 data-id="heading-0">å¤§æ¨¡å‹å‡ºç°å¹»è§‰å•¦</h2>
<p>ä½ å¯ä»¥æŠŠå¤§æ¨¡å‹æƒ³è±¡æˆï¼šä¸€ä¸ªçŸ¥è¯†æ¸Šåšã€å£æ‰æä½³çš„â€œå¤§å¿½æ‚ â€ã€‚</p>
<p>è¿™ä¸ªâ€œå¤§å¿½æ‚ â€è„‘å­é‡Œè£…äº†æµ·é‡çš„çŸ¥è¯†ï¼Œæ‰€ä»¥è·Ÿä½ èŠå¤©æ—¶æ€»æ˜¯ä¾ƒä¾ƒè€Œè°ˆï¼Œå¬èµ·æ¥éå¸¸æœ‰é“ç†ã€‚ä½†é—®é¢˜æ˜¯ï¼Œ<strong>ä»–æœ‰ä¸€ç§â€œæ— æ³•å¿å—æ²‰é»˜å’Œä¸çŸ¥é“â€çš„å¼ºè¿«ç—‡</strong>ã€‚å½“ä½ é—®åˆ°ä¸€ä¸ªä»–ä¸çŸ¥é“æˆ–è€…ä»–è®°å¿†æ¨¡ç³Šçš„äº‹æƒ…æ—¶ï¼Œä»–ä¸ä¼šè¯´â€œæˆ‘ä¸çŸ¥é“â€ï¼Œè€Œæ˜¯ä¼š<strong>åŸºäºä»–å·²æœ‰çš„çŸ¥è¯†â€œè„‘è¡¥â€å‡ºä¸€æ®µå¬èµ·æ¥æå…¶åˆç†ã€ä½†å®Œå…¨æ˜¯ç¼–é€ çš„å†…å®¹</strong>ï¼Œå¹¶ä¸”ç”¨éå¸¸è‡ªä¿¡ã€è‚¯å®šçš„è¯­æ°”å‘Šè¯‰ä½ ã€‚</p>
<p>è¿™å°±æ˜¯å¤§æ¨¡å‹çš„â€œå¹»è§‰â€ï¼Œå­¦æœ¯ä¸Šå¸¸ç§°ä¸ºâ€œèƒ¡è¨€ä¹±è¯­â€æˆ–â€œè™šæ„â€ã€‚å®ƒæŒ‡å¤§æ¨¡å‹ç”Ÿæˆçš„å†…å®¹åœ¨äº‹å®å±‚é¢æ˜¯é”™è¯¯çš„ã€ä¸å­˜åœ¨çš„ï¼Œä½†å½¢å¼ä¸Šå´éå¸¸è¿è´¯ã€å¯ä¿¡ã€‚</p>
<p>æ¯”å¦‚~æˆ‘çš„ä»£ç é‡Œæœ‰ä¸€ä¸ªåä¸º<code>@CustomFilter</code>æ³¨è§£ï¼Œè¿™ä¸ªæ³¨è§£å¤§æ¨¡å‹è‚¯å®šä¸çŸ¥é“å§....ä¸‹é¢æ˜¯å¤§æ¨¡å‹çš„å›ç­”ï¼Œæˆ‘æœäº†ä¸‹ <code>Mybatis-Plus</code> å¹¶æ²¡æœ‰è¿™ä¸ªæ³¨è§£ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5be1829eb750432fba924552e311521b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=ZF%2BAyV06mwb6PkDZWZ5BzEVDDvQ%3D" alt="image-20251114230523762" loading="lazy"/></p>
<h2 data-id="heading-1">è®©å¤§æ¨¡å‹åˆ«â€œèƒ¡è¯´å…«é“â€</h2>
<p>å¦‚ä½•ä¸è®©å¤§æ¨¡å‹èƒ¡è¯´å…«é“å‘¢ï¼Ÿçœ‹ä¸€ä¸‹ä¸‹é¢è¿™äº›æ–¹å¼å§ï¼Œå…¶ä¸­ RAG å°†ä¼šæ˜¯æˆ‘ä»¬è¿™ç¯‡æ–‡ç« è®²è¿°çš„é‡ç‚¹ã€‚</p>
<h3 data-id="heading-2">Prompt - åœ¨æé—®æ—¶ç»™å®ƒç«‹è§„çŸ©</h3>
<p>é€šè¿‡ç²¾å¿ƒè®¾è®¡ä½ çš„æé—®æ–¹å¼ï¼Œæ¥çº¦æŸæ¨¡å‹çš„è¡Œä¸ºã€‚</p>
<ul>
<li>
<p><strong>æ˜¯ä»€ä¹ˆ</strong>ï¼šåœ¨æé—®çš„æŒ‡ä»¤ä¸­ï¼Œæ˜ç¡®å‘Šè¯‰æ¨¡å‹â€œå¿…é¡»åŸºäºå·²çŸ¥äº‹å®â€ã€â€œå¦‚æœä¸çŸ¥é“å°±æ˜ç¡®è¯´ä¸çŸ¥é“â€ã€â€œç¦æ­¢è™šæ„ä¿¡æ¯â€ã€‚</p>
</li>
<li>
<p>ä¸¾ä¾‹ï¼šæç¤ºè¯å¦‚ä¸‹ï¼Œå¤§æ¨¡å‹ä¹Ÿç»™å‡ºäº†â€œä¸çŸ¥é“â€çš„å›ç­”</p>
<pre><code class="hljs">1.ä¸ç¡®å®šã€ä¸æ¸…æ¥šã€æ— æ³•ç¡®è®¤çš„å†…å®¹ï¼Œä¸€å¾‹å›ç­”ï¼šä¸çŸ¥é“ã€‚
2.ä¸èƒ½æ ¹æ®çŒœæµ‹ã€å¯èƒ½æ€§ã€å‡è®¾æ¥å›ç­”ã€‚
3.æ‰€æœ‰å›ç­”å¿…é¡»åŸºäºç¡®å®šã€å‡†ç¡®ã€å¯é çš„çŸ¥è¯†ã€‚
4.ä¸å…è®¸ç¼–é€ äº‹å®æˆ–è¡¥å……æœªç»ç¡®è®¤çš„ä¿¡æ¯ã€‚
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acc54e7e6b794e65bf56123ddf65135c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=5nlisaPzKRhT%2BoTcMvfmVOGr8dw%3D" alt="image-20251115000335026" loading="lazy"/></p>
</li>
<li>
<p><strong>ä¼˜ç‚¹</strong>ï¼šé›¶æˆæœ¬ï¼Œç®€å•æ˜“ç”¨ï¼Œå¯¹æ‰€æœ‰æ¨¡å‹éƒ½æœ‰æ•ˆã€‚</p>
</li>
<li>
<p><strong>ç¼ºç‚¹</strong>ï¼šçº¦æŸåŠ›æœ‰é™ï¼Œå¯¹äºå¤æ‚æˆ–æ¨¡å‹çŸ¥è¯†ç›²åŒºçš„é—®é¢˜ï¼Œå®ƒå¯èƒ½è¿˜æ˜¯ä¼šâ€œå¿ä¸ä½â€ç¼–é€ ï¼Œå¹¶ä¸”<strong>æˆ‘ä»¬æ˜¯æƒ³è¦å®ƒå›ç­”çš„...ğŸ˜­</strong></p>
</li>
</ul>
<hr/>
<h3 data-id="heading-3">Fine-Tuning - ä»æ ¹æœ¬ä¸Šæ”¹å˜å®ƒçš„çŸ¥è¯†</h3>
<ul>
<li><strong>æ˜¯ä»€ä¹ˆ</strong>ï¼šç”¨å¤§é‡â€œé«˜è´¨é‡ã€é«˜äº‹å®æ€§ã€ç›¸å…³å†…å®¹çš„â€çš„æ•°æ®å¯¹åŸºç¡€æ¨¡å‹è¿›è¡Œé¢å¤–çš„è®­ç»ƒï¼Œå¾®è°ƒå…¶å‚æ•°ã€‚</li>
<li><strong>ä¼˜ç‚¹</strong>ï¼šèƒ½ä»æ¨¡å‹å†…éƒ¨æå‡å…¶äº‹å®æ€§å’Œå¯é æ€§ï¼Œæ•ˆæœæ¯”è¾ƒæ ¹æœ¬ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šæˆæœ¬é«˜æ˜‚ï¼ˆéœ€è¦å¤§é‡ç®—åŠ›å’Œé«˜è´¨é‡æ•°æ®ï¼‰ï¼Œè¿‡ç¨‹å¤æ‚ï¼Œè€Œä¸”æ— æ³•æ•™ç»™æ¨¡å‹å®ƒä»æœªå­¦è¿‡çš„çŸ¥è¯†ï¼ˆæ¯”å¦‚æœ€æ–°æ–°é—»ï¼‰ã€‚</li>
</ul>
<p>æ¯”æ›¾ç»çš„AIå…­å°è™ï¼Œæœç‹—åˆ›å§‹äººç‹å°å·åˆ›ç«‹çš„ç™¾å·æ™ºèƒ½å·²ç»ä¸å†æ¨å‡ºé€šç”¨å¤§æ¨¡å‹ï¼Œè½¬å‘åŒ»ç–—å¤§æ¨¡å‹ï¼ŒèƒŒåå°±æ˜¯ç»™å¤§æ¨¡å‹ä¸æ–­çš„ Fine-Tuning åŒ»ç–—ç›¸å…³çš„æ•°æ®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5210ac765ef4d22bfb16d1a81828dcf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=Zb7RTHEAOaYmc4yK0YnnmBUn%2FeY%3D" alt="image-20251114232027429" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-4">RAG - ç»™å®ƒä¸€æœ¬â€œå‚è€ƒç­”æ¡ˆâ€ï¼Œè®©å®ƒç…§æœ¬å®£ç§‘</h3>
<p>è¿™æ˜¯ç›®å‰<strong>æœ€æµè¡Œã€æœ€æœ‰æ•ˆä¸”æˆæœ¬æœ€ä½</strong>çš„æ–¹æ³•ã€‚</p>
<ul>
<li>
<p><strong>æ˜¯ä»€ä¹ˆ</strong>ï¼š<strong>æ£€ç´¢å¢å¼ºç”Ÿæˆ</strong>ã€‚åœ¨è®©æ¨¡å‹å›ç­”ä¹‹å‰ï¼Œå…ˆä»ä¸€ä¸ªä½ å‡†å¤‡å¥½çš„ã€å¯ä¿¡çš„çŸ¥è¯†åº“ï¼ˆæ¯”å¦‚å…¬å¸æ–‡æ¡£ã€äº§å“æ‰‹å†Œã€æƒå¨è®ºæ–‡ï¼‰é‡Œï¼Œæœç´¢å‡ºä¸é—®é¢˜æœ€ç›¸å…³çš„ç‰‡æ®µï¼Œç„¶åæŠŠâ€œé—®é¢˜+ç›¸å…³ç‰‡æ®µâ€ä¸€èµ·äº¤ç»™æ¨¡å‹ï¼Œè®©å®ƒåŸºäºè¿™äº›ç‰‡æ®µæ¥ç»„ç»‡ç­”æ¡ˆã€‚</p>
</li>
<li>
<p><strong>ç”Ÿæ´»æ¯”å–»</strong>ï¼šå°±åƒè€ƒè¯•æ—¶ï¼Œä¸å…è®¸å­¦ç”Ÿè‡ªç”±å‘æŒ¥ï¼Œè€Œæ˜¯å‘ç»™ä»–ä¸€æœ¬ã€Šæ ‡å‡†ç­”æ¡ˆæ±‡ç¼–ã€‹ï¼Œè¦æ±‚ä»–æ‰€æœ‰çš„å›ç­”éƒ½å¿…é¡»å¼•ç”¨è¿™æœ¬æ±‡ç¼–é‡Œçš„åŸè¯ã€‚</p>
</li>
<li>
<p>å¦‚ä½•å·¥ä½œï¼š</p>
<ol start="0">
<li><strong>å‡†å¤‡çŸ¥è¯†åº“</strong>ï¼šæŠŠä½ çš„æ‰€æœ‰å¯é èµ„æ–™ï¼ˆPDFã€Wordã€ç½‘é¡µç­‰ï¼‰å¤„ç†æˆå¯æœç´¢çš„æ ¼å¼ã€‚</li>
<li><strong>ç”¨æˆ·æé—®</strong>ï¼šç”¨æˆ·é—®ï¼šâ€œæˆ‘ä»¬äº§å“çš„æ——èˆ°å‹å·æ”¯æŒå“ªäº›AIåŠŸèƒ½ï¼Ÿâ€</li>
<li><strong>å®æ—¶æ£€ç´¢</strong>ï¼šç³»ç»Ÿç«‹åˆ»åœ¨ä½ çš„äº§å“æ‰‹å†ŒçŸ¥è¯†åº“é‡Œæœç´¢â€œæ——èˆ°å‹å·â€ã€â€œAIåŠŸèƒ½â€ç­‰å…³é”®è¯ï¼Œæ‰¾åˆ°æœ€ç›¸å…³çš„å‡ æ®µæè¿°ã€‚</li>
<li><strong>ç»„åˆå¹¶å›ç­”</strong>ï¼šæ¨¡å‹æ”¶åˆ°çš„æŒ‡ä»¤å®é™…ä¸Šæ˜¯ï¼šâ€œè¯·æ ¹æ®ä»¥ä¸‹èµ„æ–™ï¼Œå›ç­”ç”¨æˆ·çš„é—®é¢˜ã€‚èµ„æ–™ï¼š[æ£€ç´¢åˆ°çš„äº§å“æ‰‹å†ŒåŸæ–‡]ã€‚ é—®é¢˜ï¼šæˆ‘ä»¬äº§å“çš„æ——èˆ°å‹å·æ”¯æŒå“ªäº›AIåŠŸèƒ½ï¼Ÿâ€</li>
<li><strong>æ¨¡å‹ç”Ÿæˆ</strong>ï¼šæ¨¡å‹ä¼šä¹–ä¹–åœ°åŸºäºä½ æä¾›çš„èµ„æ–™ï¼Œæ€»ç»“ã€å¤è¿°ç”Ÿæˆç­”æ¡ˆï¼Œå‡ ä¹ä¸ä¼šç¼–é€ ã€‚</li>
</ol>
</li>
</ul>
<h2 data-id="heading-5"><strong>æ£€ç´¢å¢å¼ºç”Ÿæˆ</strong></h2>
<p><em>Retrieval-Augmented Generation</em></p>
<ul>
<li><strong>è§£å†³æ€è·¯</strong>ï¼šå°†å¤–éƒ¨çŸ¥è¯†åº“ä¸LLMç»“åˆï¼Œé€šè¿‡æ£€ç´¢è·å–ç›¸å…³ä¿¡æ¯ï¼Œå¢å¼ºç”Ÿæˆè´¨é‡</li>
<li><strong>æ ¸å¿ƒä»·å€¼</strong>ï¼šé™ä½å¹»è§‰ã€æä¾›å®æ—¶ä¿¡æ¯ã€æ”¯æŒç§åŸŸçŸ¥è¯†</li>
</ul>
<p>ä¸€ä¸ªRAGç³»ç»Ÿçš„åŸºæœ¬æ¶æ„å°±æ˜¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåˆ†ä¸ºç´¢å¼•ã€æ£€ç´¢ã€ç”Ÿæˆä¸‰ä¸ªæ­¥éª¤ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¨“å¨“é“æ¥</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40c820f6542c433993d27899ffa32688~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=Fent3vMTtx2vVEtIGHFKe%2BQUD4k%3D" alt="image-20251114222532878" loading="lazy"/></p>
<h3 data-id="heading-6">ä»€ä¹ˆæ˜¯å‘é‡ï¼Ÿ</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨æ•™ä¸€ä¸ªå¤–æ˜Ÿäººç†è§£åœ°çƒè¯­è¨€ã€‚è¿™ä¸ªå¤–æ˜Ÿäººä¸æ‡‚ä¸­æ–‡ã€è‹±æ–‡ï¼Œä½†å®ƒç²¾é€šæ•°å­¦ã€‚ä½ æ€ä¹ˆå‘å®ƒè§£é‡Š"è‹¹æœ"è¿™ä¸ªè¯çš„å«ä¹‰å‘¢ï¼Ÿ</p>
<p><strong>å‘é‡çš„ç¥å¥‡ä¹‹å¤„</strong>å°±åœ¨äºï¼šå®ƒæŠŠäººç±»è¯­è¨€ä¸­æ¨¡ç³Šçš„ã€ä¸»è§‚çš„è¯­ä¹‰æ¦‚å¿µï¼Œè½¬æ¢æˆäº†ç²¾ç¡®çš„ã€å¯è®¡ç®—çš„æ•°å­¦è¡¨ç¤º(æœ€ç»ˆå½¢æ€æ˜¯ ä¸€ä¸ªå›ºå®šé•¿åº¦çš„æµ®ç‚¹æ•°æ•°ç»„)ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac16f8e923be4a598ca64e77edd5463a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=W79HqqllpJUWlWSnE98fdF5g%2Bo8%3D" alt="image-20251114234945089" loading="lazy"/></p>
<h3 data-id="heading-7">æŠŠä½ çš„èµ„æ–™å‘é‡åŒ–</h3>
<p>åœ¨RAGä¸­ä¾¿æ˜¯å°†ä½ æ‰€è¦æ„å»ºçš„â€œçŸ¥è¯†â€æ–‡æœ¬å…ˆåˆ‡åˆ†æˆå¾ˆå¤šç«¯çš„å°å—ï¼Œç„¶åå°†è¿™äº›å°å—ä½¿ç”¨å‘é‡æ¨¡å‹è¿›è¡Œå‘é‡åŒ–ï¼Œæœ€åå°†æ–‡æœ¬å—çš„å‘é‡å’Œæ–‡æœ¬å—åŒæ—¶å­˜åˆ°å‘é‡æ•°æ®åº“å½“ä¸­ã€‚</p>
<p><strong>æ–‡æœ¬å—å‘é‡å’Œæ–‡æœ¬å—æ˜¯ä¸€ç§ <code>key-value</code>ç»“æ„ï¼Œæ‰€ä»¥åé¢æˆ‘ä»¬æ‰¾åˆ°äº†æ–‡æœ¬å—å‘é‡ä¹Ÿå°±æ‰¾åˆ°äº†æ–‡æœ¬å—ã€‚</strong></p>
<p><strong>1. æ–‡æœ¬åˆ†å—å¤„ç†</strong></p>
<ul>
<li>å›ºå®šé•¿åº¦åˆ†å—ï¼šæŒ‰é¢„è®¾å­—ç¬¦æ•°å‡åŒ€åˆ‡åˆ†ï¼Œé€‚åˆæ ¼å¼è§„æ•´çš„æ–‡æ¡£</li>
<li>è¯­ä¹‰åˆ†å—ï¼šåŸºäºå¥å­è¾¹ç•Œå’Œè¯­ä¹‰å®Œæ•´æ€§è¿›è¡Œæ™ºèƒ½åˆ†å‰²</li>
<li>é‡å åˆ†å—ï¼šåœ¨ç›¸é‚»åˆ†å—é—´è®¾ç½®é‡å åŒºåŸŸï¼Œé¿å…å…³é”®ä¿¡æ¯è¢«å‰²è£‚</li>
<li>è‡ªå®šä¹‰åˆ†å—ï¼šå¯æ ¹æ®æ®µè½ã€ç« èŠ‚ç­‰æ–‡æ¡£ç»“æ„è¿›è¡Œçµæ´»åˆ’åˆ†</li>
</ul>
<p><strong>2. å‘é‡åŒ–ç¼–ç </strong></p>
<ul>
<li>
<p>OpenAIçš„text-embedding-ada-002ç­‰ç³»åˆ—</p>
</li>
<li>
<p>Googleçš„BERTåŠå…¶å˜ä½“æ¨¡å‹</p>
</li>
<li>
<p>Sentence-BERTç­‰ä¸“ç”¨è¯­ä¹‰ç¼–ç æ¨¡å‹</p>
</li>
<li>
<p>é˜¿é‡Œäº‘çš„text-embeddingç³»åˆ—</p>
</li>
<li>
<p>è½»é‡çº§æœ¬åœ°éƒ¨ç½²ï¼š</p>
<ul>
<li>all-MiniLM-L6-v2ç­‰å°å‹æ¨¡å‹ ï¼ˆè¯•è¿‡äº†ï¼Œä¸å¥½ç”¨åˆ«ç”¨ï¼Œä¸­å°å‹å…¬å¸ä¹–ä¹–ç”¨å‚å•†çš„ğŸ‘€ï¼‰</li>
<li>é’ˆå¯¹ä¸­æ–‡ä¼˜åŒ–çš„m3eç­‰å¼€æºæ¨¡å‹</li>
</ul>
</li>
</ul>
<p><strong>3. å‘é‡å­˜å‚¨æ–¹æ¡ˆ</strong></p>
<ul>
<li>
<p>Milvusï¼ˆå¼€æºé¦–é€‰ï¼Œå¼ºæ¨ï¼Œå›½äº§ä¹‹å…‰ğŸ’ªï¼‰</p>
</li>
<li>
<p>Pineconeï¼ˆå…¨æ‰˜ç®¡æœåŠ¡ï¼‰</p>
</li>
<li>
<p>Chromaï¼ˆè½»é‡æ˜“ç”¨ï¼‰</p>
</li>
<li>
<p>ä¼ ç»Ÿæ•°æ®åº“æ‰©å±•</p>
<ul>
<li>ElasticSearch with å‘é‡æ’ä»¶</li>
<li>PostgreSQL + pgvectoræ‰©å±•</li>
<li>Redis å‘é‡æœç´¢æ¨¡å—</li>
</ul>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d9d272b1003440eba6d23c8e3650a6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=DW8Or4PaARF9nM09oWsG9zEEspo%3D" alt="image-20251114235538955" loading="lazy"/></p>
<h3 data-id="heading-8">æ£€ç´¢å‘é‡åŒ–åçš„å†…å®¹</h3>
<p>é‚£ä¹ˆå°†åŸå§‹çš„æ–‡æ¡£è½¬æ¢ä¸ºå‘é‡å­˜å‚¨åï¼Œæˆ‘ä»¬è¦æ€ä¹ˆç”¨å‘¢ï¼Ÿå…¶å®ä¸€ä¸ªå‘é‡å¯ä»¥åœ¨ä¸€å †å‘é‡ä¹‹é—´æ‰¾å‡ºä»–çš„â€œå“¥ä»¬â€ã€‚</p>
<p>ä¸¾ä¸ªğŸŒ°ï¼šå‡å¦‚å…¨ä¸–ç•Œçš„äººéƒ½é¢éƒ¨ä¿¡æ¯æ˜¯ä¸€ä¸ªå‘é‡æ•°æ®åº“ï¼Œæˆ‘ä»¬æŠŠå‘¨æ°ä¼¦çš„è„¸çœ‹ä½œä¸€ä¸ªå‘é‡ï¼Œé‚£ä¹ˆå‘é‡æ•°æ®åº“å°±ä¼šå¾ˆå¿«ç»™æˆ‘ä»¬åŒ¹é…å‡ºâ€œå‘¨é¥¼ä¼¦â€œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d68a8623ce054a508108231596f7975c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=Tp4vRU8F8wzWq7kHzoMJReWkNRE%3D" alt="image-20251115010225934" loading="lazy"/></p>
<p>é‚£ä¹ˆæˆ‘ä»¬æƒ³è¦ä»å‘é‡æ•°æ®åº“é‡ŒåŒ¹é…å‡ºç›¸ä¼¼çš„å†…å®¹ï¼Œéœ€è¦ä»¥ä¸‹æ­¥éª¤</p>
<ul>
<li>å°†æŸ¥è¯¢çš„å†…å®¹ä¹Ÿè½¬æ¢ä¸ºå‘é‡</li>
<li>è®¡ç®—æŸ¥è¯¢å‘é‡ä¸æ‰€æœ‰æ–‡æ¡£å‘é‡çš„ç›¸ä¼¼åº¦</li>
<li>è¿”å›ç›¸ä¼¼åº¦æœ€é«˜çš„Kä¸ªæ–‡æœ¬å—ï¼ˆå‰é¢æˆ‘ä»¬è®²äº†å‘é‡å’Œæ–‡æœ¬å—æ˜¯ä¸€ç§key-valueç»“æ„ï¼Œæˆ‘ä»¬æœç´¢åˆ°äº†å‘é‡ï¼Œå°±æ‰¾åˆ°æ–‡æœ¬å—ï¼Œè¿™é‡Œå‘é‡èµ·åˆ°çš„æ˜¯ä¸€ä¸ªç´¢å¼•çš„ä½œç”¨ï¼‰</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf2d095ff5d24721a332f8d813a5b1a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=xsdqKMtG1Onk0e8%2FYXa%2Fq6fB3aI%3D" alt="image-20251115002605890" loading="lazy"/></p>
<h3 data-id="heading-9">æ€ä¹ˆè®¡ç®—ç›¸ä¼¼åº¦å‘¢</h3>
<p>è®¡ç®—å‘é‡ç›¸ä¼¼åº¦å¸¸ç”¨çš„ç®—æ³•æœ‰ä¸‰ç§ï¼šåˆ†åˆ«æ˜¯ç‚¹ç§¯ç›¸ä¼¼ã€ä½™å¼¦ç›¸ä¼¼ã€æ¬§æ°è·ç¦»</p>
<h4 data-id="heading-10">ç‚¹ç§¯ç›¸ä¼¼åº¦</h4>
<p>ç‚¹ç§¯ç›¸ä¼¼çš„è®¡ç®—æ–¹å¼å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸¤ä¸ªå‘é‡å¯¹åº”ä½ç½®çš„æ•°å€¼ç›¸ä¹˜ï¼Œå€¼è¶Šå¤§å°±æ˜¯è¶Šç›¸ä¼¼</p>
<pre><code class="hljs language-css" lang="css">ç‚¹ç§¯ = (<span class="hljs-selector-tag">A</span>â‚ Ã— <span class="hljs-selector-tag">B</span>â‚) + (<span class="hljs-selector-tag">A</span>â‚‚ Ã— <span class="hljs-selector-tag">B</span>â‚‚) + (<span class="hljs-selector-tag">A</span>â‚ƒ Ã— <span class="hljs-selector-tag">B</span>â‚ƒ) + ... + (<span class="hljs-selector-tag">A</span>â‚™ Ã— <span class="hljs-selector-tag">B</span>â‚™)  = Î£(<span class="hljs-selector-tag">A</span>áµ¢ Ã— <span class="hljs-selector-tag">B</span>áµ¢)  å¯¹äº <span class="hljs-selector-tag">i</span> ä» <span class="hljs-number">1</span> åˆ° n
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20b4df5e25a946ef953f096beddf2504~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=SqkxxlU%2BbpW3FvcZC2VIp%2BIpV8E%3D" alt="image-20251115013647329" loading="lazy"/></p>
<h4 data-id="heading-11">ä½™å¼¦ç›¸ä¼¼åº¦</h4>
<p>å…¶å®å°±æ˜¯é«˜ä¸­å­¦çš„<strong>è®¡ç®—ä¸¤ä¸ªç‚¹ä¸åŸç‚¹å½¢æˆçš„å¤¹è§’çš„ä½™å¼¦å€¼</strong>ï¼Œæ¯”å¦‚è¯´<strong>å·²çŸ¥å¹³é¢å†…ä¸¤ä¸ªç‚¹</strong> <em>X</em>(<em>x</em>1,<em>y</em>1) å’Œ <em>Y</em>(<em>x</em>2,<em>y</em>2)ï¼Œæˆ‘ä»¬å°±æ˜¯è¦è®¡ç®—ï¼Œè¿™ä¸¤ä¸ªç‚¹ä¸åŸç‚¹çš„è¿æ¥çº¿çš„å¤¹è§’çš„ä½™å¼¦å€¼ï¼Œæœ€ç»ˆä¹Ÿæ˜¯å€¼è¶Šå¤§çš„è¶Šç›¸ä¼¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/68ea1dfaffa84920b8beb2810da496d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=Dekf4jAwl3Yjq4IDyKBesaI0IBY%3D" alt="image-20251115015359575" loading="lazy"/></p>
<p>å…¬å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"> Â  Â  Â  Â  Â   <span class="hljs-selector-tag">A</span>Â·<span class="hljs-selector-tag">B</span>
cos(Î¸) = â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
 Â  Â  Â  Â   |<span class="hljs-selector-tag">A</span>| Ã— |<span class="hljs-selector-tag">B</span>|
â€‹
å…¶ä¸­ï¼š
<span class="hljs-selector-tag">A</span>Â·<span class="hljs-selector-tag">B</span> = å‘é‡<span class="hljs-selector-tag">A</span>å’Œ<span class="hljs-selector-tag">B</span>çš„ç‚¹ç§¯
|<span class="hljs-selector-tag">A</span>| = å‘é‡<span class="hljs-selector-tag">A</span>çš„é•¿åº¦ = âˆš(<span class="hljs-selector-tag">A</span>â‚Â² + <span class="hljs-selector-tag">A</span>â‚‚Â² + ... + <span class="hljs-selector-tag">A</span>â‚™Â²)
|<span class="hljs-selector-tag">B</span>| = å‘é‡<span class="hljs-selector-tag">B</span>çš„é•¿åº¦ = âˆš(<span class="hljs-selector-tag">B</span>â‚Â² + <span class="hljs-selector-tag">B</span>â‚‚Â² + ... + <span class="hljs-selector-tag">B</span>â‚™Â²)
â€‹
ä¸¾ä¸ªğŸŒ°å§
â€‹
å‡è®¾ï¼š
å‘é‡<span class="hljs-selector-tag">A</span> = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
å‘é‡<span class="hljs-selector-tag">B</span> = (<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>)
â€‹
è®¡ç®—æ­¥éª¤ï¼š
<span class="hljs-number">1</span>. ç‚¹ç§¯ <span class="hljs-selector-tag">A</span>Â·<span class="hljs-selector-tag">B</span> = (<span class="hljs-number">1</span>Ã—<span class="hljs-number">4</span>) + (<span class="hljs-number">2</span>Ã—<span class="hljs-number">5</span>) + (<span class="hljs-number">3</span>Ã—<span class="hljs-number">6</span>) = <span class="hljs-number">4</span> + <span class="hljs-number">10</span> + <span class="hljs-number">18</span> = <span class="hljs-number">32</span>
<span class="hljs-number">2</span>. å‘é‡<span class="hljs-selector-tag">A</span>é•¿åº¦ |<span class="hljs-selector-tag">A</span>| = âˆš(<span class="hljs-number">1</span>Â² + <span class="hljs-number">2</span>Â² + <span class="hljs-number">3</span>Â²) = âˆš(<span class="hljs-number">1</span> + <span class="hljs-number">4</span> + <span class="hljs-number">9</span>) = âˆš<span class="hljs-number">14</span> â‰ˆ <span class="hljs-number">3.74</span>
<span class="hljs-number">3</span>. å‘é‡<span class="hljs-selector-tag">B</span>é•¿åº¦ |<span class="hljs-selector-tag">B</span>| = âˆš(<span class="hljs-number">4</span>Â² + <span class="hljs-number">5</span>Â² + <span class="hljs-number">6</span>Â²) = âˆš(<span class="hljs-number">16</span> + <span class="hljs-number">25</span> + <span class="hljs-number">36</span>) = âˆš<span class="hljs-number">77</span> â‰ˆ <span class="hljs-number">8.77</span>
<span class="hljs-number">4</span>. ä½™å¼¦ç›¸ä¼¼åº¦ = <span class="hljs-number">32</span> / (<span class="hljs-number">3.74</span> Ã— <span class="hljs-number">8.77</span>) â‰ˆ <span class="hljs-number">32</span> / <span class="hljs-number">32.8</span> â‰ˆ <span class="hljs-number">0.975</span>
â€‹
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61b440edf7cb4759864aa55ffb598e10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=eoX1oB%2BSJjs8SACRkz38os3O2Vk%3D" alt="image-20251115015759265" loading="lazy"/></p>
<h4 data-id="heading-12">æ¬§æ°è·ç¦»</h4>
<p>åœ¨è¯­ä¹‰ç©ºé—´ä¸­æµ‹é‡"ç›´çº¿è·ç¦»"ï¼Œå…¬å¼ä¸ºï¼šè·ç¦» = âˆš[(Aâ‚-Bâ‚)Â² + (Aâ‚‚-Bâ‚‚)Â² + ... + (Aâ‚™-Bâ‚™)Â²]</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09e9e7316f43440f8d710622ce49f7d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=9xuYTSgFkysVosP5YLkipC3Fpiw%3D" alt="image-20251115015900791" loading="lazy"/></p>
<h4 data-id="heading-13">ä¸‰ç§æ–¹å¼çš„é€‚ç”¨åœºæ™¯</h4>
<p><strong>ä½™å¼¦ç›¸ä¼¼åº¦</strong>ï¼šæ–‡æœ¬è¯­ä¹‰æ¯”è¾ƒã€æ–‡æ¡£æ£€ç´¢æ’åºã€å†…å®¹æ¨èç³»ç»Ÿï¼ˆå¤šæ•°åœºæ™¯ç”¨çš„éƒ½æ˜¯è¿™ä¸ªï¼‰</p>
<p><strong>æ¬§æ°è·ç¦»</strong>ï¼šç©ºé—´ä½ç½®æµ‹é‡ã€èšç±»åˆ†æã€å¼‚å¸¸æ£€æµ‹</p>
<p><strong>ç‚¹ç§¯ç›¸ä¼¼åº¦</strong>ï¼šå¿«é€Ÿåˆæ­¥ç­›é€‰ã€è®¡ç®—èµ„æºæœ‰é™åœºæ™¯ï¼ˆè¯´ç™½äº†ï¼Œå°±æ˜¯æ¯”è¾ƒæ‹‰ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d9ec75e80ed4bf8a59c3405db71af07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=ZYbUoM%2F5UKgrs7n0MLOcSBZd4j4%3D" alt="image-20251115002350117" loading="lazy"/></p>
<h3 data-id="heading-14">LLM ç”Ÿæˆ</h3>
<p>å¥½äº†ï¼Œç»å†äº†ä¸Šé¢æµç¨‹æˆ‘ä»¬åŸºæœ¬çŸ¥é“äº†ç´¢å¼•å’Œæ£€ç´¢çš„è¿‡ç¨‹ï¼Œé‚£ä¹ˆç»è¿‡æ£€ç´¢åŒ¹é…åçš„æ–‡æ¡£å°±ä¼šä½œä¸ºæˆ‘ä»¬è·Ÿå¤§æ¨¡å‹äº¤äº’çš„ä¸€éƒ¨åˆ†ï¼Œè¿™æ ·å¤§æ¨¡å‹å°±ä¼šæ ¹æ®æˆ‘ä»¬æ¨èç»™å®ƒçš„æ–‡æ¡£è¿›è¡Œæ€è€ƒå›å¤ï¼Œå°±é¿å…â€œèƒ¡è¯´å…«é“â€ã€‚</p>
<p>ä¸‹é¢æœ‰ä¸€ä¸ªå®Œæ•´çš„æµç¨‹å›¾ï¼Œå¯ä»¥å›é¡¾ä¸€ä¸‹~</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d57ed55a36f8427fb7392122ff65fd08~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=4rlojaEoNDl1UjDSG7jywxVIQIs%3D" alt="image-20251115021335718" loading="lazy"/></p>
<h2 data-id="heading-15">RAG å®æˆ˜æ¡ˆä¾‹</h2>
<p>ä¸ºäº†æ›´æ·±å…¥çš„äº†è§£ RAG æˆ‘ä»¬å°±åˆ©ç”¨ Cherry Studio è¿™ä¸ªå·¥å…·æ­å»ºä¸€ä¸ªæœ€ç®€å•çš„ RAG</p>
<h3 data-id="heading-16">ç¬¬ä¸€æ­¥-æ³¨å†Œä¸€ä¸ªé˜¿é‡Œç™¾ç‚¼çš„è´¦å·</h3>
<p>ä¸ºä»€ä¹ˆé€‰æ‹©é˜¿é‡Œç™¾ç‚¼ï¼Ÿå…¶å®ç°åœ¨çš„ LLM å·®è·å¹¶ä¸å¤§ï¼Œæˆ‘ä»¬é€‰æ‹©å“ªå®¶éƒ½å¯ä»¥ï¼Œæœ€ä¸»è¦çš„ç™¾ç‚¼å¹³å°ä¸Šæœ‰å‘é‡æ¨¡å‹ï¼Œæˆ‘ä»¬ä»ä¸Šé¢å–ä¸€ä»½å¯†é’¥å°±å¯ä»¥ç›´æ¥ç”¨ LLM å’Œå‘é‡æ¨¡å‹å•¦ï¼Œæ¯”è¾ƒæ–¹ä¾¿ä¸€ç‚¹ï¼ˆä¹Ÿè®¸è…¾è®¯äº‘ã€ç™¾åº¦é£æ¡¨ã€å­—èŠ‚ç«å±±ä¹Ÿä¼šæœ‰ï¼Œä½†æ˜¯æˆ‘å¹¶ä¸çŸ¥é“......è¿™ä¸ªéšæ„ï¼‰</p>
<p>æˆ‘ä»¬å°±ç›´æ¥åˆ›å»ºä¸€ä¸ªAPI å¤åˆ¶å°±è¡Œäº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91606eb38d234819920396daae9aa3f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=rGZdyhcw%2BlWF1JKUE68s7TpgkOY%3D" alt="image-20251115223214671" loading="lazy"/></p>
<h3 data-id="heading-17">ç¬¬äºŒæ­¥-æ‰“å¼€Cherry Studioè¿›è¡Œç›¸å…³é…ç½®</h3>
<p>é¦–å…ˆï¼Œåœ¨æ¨¡å‹æœåŠ¡ä¸­æœç´¢åˆ°â€œé˜¿é‡Œäº‘ç™¾ç‚¼â€ï¼Œç„¶åå¡«å……å¥½åˆšåˆšå¤åˆ¶å¥½çš„å¯†é’¥ï¼Œæ£€æµ‹æˆåŠŸå³å¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5e19f12d88f4e6c9955110a35f7c5c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=3Zqmm7fCrE5RuxhmL7DX%2BSsTLj8%3D" alt="image-20251115223906067" loading="lazy"/></p>
<p>ç„¶åç‚¹å‡»æœ€ä¸‹æ–¹çš„æ·»åŠ æŒ‰é’®ï¼Œæ·»åŠ å‘é‡æ¨¡å‹ï¼štext-embedding-v4</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/032f9675807945d09bfa4343173002df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=39S9PkL%2F536%2Ffit3LX%2BgsujZDII%3D" alt="image-20251115224016654" loading="lazy"/></p>
<h3 data-id="heading-18">ç¬¬ä¸‰æ­¥-æ·»åŠ çŸ¥è¯†åº“</h3>
<p>åˆ›å»ºçŸ¥è¯†åº“ï¼Œé…ç½®å‘é‡æ¨¡å‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6a7c15ca3714b20bb98776e4130c207~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=%2F6W2Q3SXghMEu3L5URWjOnJN0oo%3D" alt="image-20251115224418364" loading="lazy"/></p>
<p>æ·»åŠ è¦å‘é‡åŒ–çš„æ–‡ä»¶æˆ–è€…ç›®å½•çš„ä½ç½®ï¼ˆæˆ‘è¦æ¼”ç¤ºçš„æ˜¯ @CustomFilter è¿™ä¸ªæ³¨è§£ï¼Œæ‰€ä»¥å°±æŠŠæœ‰è¿™ä¸ªæ³¨è§£çš„MilvusPlusçš„æºç æ·»åŠ è¿›æ¥äº†ï¼‰ï¼Œ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/386b1fd3db634f55965134c067faeb92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=coo%2BKZQzguaRTLDLtsI8WJqhosU%3D" alt="image-20251115224610581" loading="lazy"/></p>
<p>è¿™æ•´ä¸ªè¿‡ç¨‹å¯¹åº”çš„å°±æ˜¯ï¼Œä¹‹å‰è®²çš„RAGç³»ç»Ÿä¸­çš„ç´¢å¼•æµç¨‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf16902e695f4ccdb948309be23cb78b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=%2B9xfKlo1aTSc00XHOvH5%2B8Qv3UY%3D" alt="image-20251115224833168" loading="lazy"/></p>
<h3 data-id="heading-19">ç¬¬å››æ­¥-é…ç½®åŠ©æ‰‹ï¼Œä½“éªŒçŸ¥è¯†åº“</h3>
<p>é¦–å…ˆæˆ‘ä»¬å…ˆä¸ç»™ä»–é…ç½®çŸ¥è¯†åº“ï¼Œä½“éªŒä¸€ä¸‹ä»–æ˜¯å¦ä¼šâ€œèƒ¡è¯´å…«é“â€œ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f737791dc5c444958ac9cce4e598f7bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=yYeJzRzZhXgnEMaTyK%2BgvZ7NNW8%3D" alt="image-20251115225044022" loading="lazy"/></p>
<p>ç¡®å®åœ¨èƒ¡è¯´å…«é“äº†ã€‚ã€‚ã€‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f43107bda15d4b4c9f980b66942a31e1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=%2FTY%2F9NsGPQKPXj4RpkuUUwbtfn4%3D" alt="image-20251115225448855" loading="lazy"/></p>
<p>ç°åœ¨ç¼–è¾‘åŠ©æ‰‹ï¼Œç»™ä»–å®‰æ’ä¸ŠçŸ¥è¯†åº“çœ‹ä¸€ä¸‹ï¼Œå®Œç¾æ’’èŠ±ğŸ‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47657e65337543d58afe4c73fa642eb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZWFjYXBl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763824300&amp;x-signature=YVoMO5yy%2FQPQJ3g%2B59bj%2FNp3P6g%3D" alt="image-20251115225537768" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[antsï¼šå¼ºå¤§çš„é«˜æ€§èƒ½ä¸ä½æˆæœ¬ Go åç¨‹æ± ]]></title>    <link>https://juejin.cn/post/7572524368879075362</link>    <guid>https://juejin.cn/post/7572524368879075362</guid>    <pubDate>2025-11-15T16:14:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572524368879075362" data-draft-id="7572524368879058978" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="antsï¼šå¼ºå¤§çš„é«˜æ€§èƒ½ä¸ä½æˆæœ¬ Go åç¨‹æ± "/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T16:14:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Panco"/> <meta itemprop="url" content="https://juejin.cn/user/571401778501054"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            antsï¼šå¼ºå¤§çš„é«˜æ€§èƒ½ä¸ä½æˆæœ¬ Go åç¨‹æ± 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/571401778501054/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Panco
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T16:14:48.000Z" title="Sat Nov 15 2025 16:14:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¼€å‘é«˜å¹¶å‘ç¨‹åºæ—¶ï¼Œç®¡ç†å¹¶å‘çš„èƒ½åŠ›è‡³å…³é‡è¦ã€‚åœ¨ Golang ä¸­ï¼Œè™½ç„¶å¯ä»¥ä½¿ç”¨ Go å†…ç½®çš„ goroutines æ¥å¤„ç†å¹¶å‘ä»»åŠ¡ï¼Œä½†æ²¡æœ‰è°ƒåº¦å’Œæ§åˆ¶çš„ goroutine å¾ˆå®¹æ˜“å¯¼è‡´ç³»ç»Ÿèµ„æºè€—å°½ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œants æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ä¸”ä½æˆæœ¬çš„ Go åç¨‹æ± åº“ï¼Œå¯ä»¥æ›´é«˜æ•ˆåœ°ç®¡ç†å’Œä½¿ç”¨ goroutineã€‚</p>
<p>æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨ ants ä½œä¸º goroutine æ± æ¥ä¼˜åŒ– Go åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬å¦‚ä½•å®‰è£… antsã€åˆ›å»ºæ± ã€æäº¤ä»»åŠ¡ã€è°ƒæ•´å‚æ•°ç­‰ï¼Œå¹¶é€šè¿‡å‡ ä¸ªç¤ºä¾‹æ¼”ç¤ºå…¶å®é™…åº”ç”¨ã€‚</p>
<h2 data-id="heading-0">å®‰è£… ants</h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨é¡¹ç›®ä¸­å®‰è£… antsã€‚è¿™å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å®Œæˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash">goÂ getÂ -uÂ github.com/panjf2000/ants/v2
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œå°±å¯ä»¥åœ¨ä»£ç ä¸­å¼•ç”¨ ants äº†ã€‚</p>
<h2 data-id="heading-1">åŸºæœ¬ä½¿ç”¨æ–¹æ³•</h2>
<p>åŸºæœ¬çš„ä½¿ç”¨ ants éå¸¸ç®€å•ã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª goroutine æ± ï¼Œåœ¨æ± ä¸­æäº¤ä»»åŠ¡ï¼Œç„¶åå…³é—­æ± ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span>Â main

<span class="hljs-keyword">import</span>Â (
Â Â Â Â <span class="hljs-string">"fmt"</span>
Â Â Â Â <span class="hljs-string">"time"</span>
Â Â Â Â <span class="hljs-string">"github.com/panjf2000/ants/v2"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span>Â <span class="hljs-title">main</span><span class="hljs-params">()</span></span>Â {
Â Â Â Â runTaskÂ :=Â <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(iÂ <span class="hljs-keyword">interface</span>{})</span></span>Â {
Â Â Â Â Â Â Â Â fmt.Printf(<span class="hljs-string">"RunningÂ task:Â %d\n"</span>,Â i.(<span class="hljs-type">int</span>))
Â Â Â Â Â Â Â Â time.Sleep(<span class="hljs-number">1</span>Â *Â time.Second)Â <span class="hljs-comment">//Â æ¨¡æ‹Ÿä»»åŠ¡å¤„ç†</span>
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">//Â åˆ›å»ºä¸€ä¸ªå…·æœ‰Â 10Â ä¸ªÂ goroutinesÂ çš„æ± </span>
Â Â Â Â p,Â _Â :=Â ants.NewPoolWithFunc(<span class="hljs-number">10</span>,Â <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(iÂ <span class="hljs-keyword">interface</span>{})</span></span>Â {
Â Â Â Â Â Â Â Â runTask(i)
Â Â Â Â })
Â Â Â Â <span class="hljs-keyword">defer</span>Â p.Release()

Â Â Â Â <span class="hljs-comment">//Â æäº¤ä»»åŠ¡</span>
Â Â Â Â <span class="hljs-keyword">for</span>Â iÂ :=Â <span class="hljs-number">0</span>;Â iÂ &lt;Â <span class="hljs-number">30</span>;Â i++Â {
Â Â Â Â Â Â Â Â _Â =Â p.Invoke(i)
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">//Â ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
Â Â Â Â p.Wait()
Â Â Â Â fmt.Println(<span class="hljs-string">"AllÂ tasksÂ completed"</span>)
}
</code></pre>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåŒ…å« 10 ä¸ª goroutines çš„æ± ï¼Œå¹¶æäº¤äº† 30 ä¸ªä»»åŠ¡ã€‚ants ä¼šè‡ªåŠ¨è°ƒåº¦è¿™äº›ä»»åŠ¡ï¼Œç¡®ä¿å¹¶å‘æ•°ä¸ä¼šè¶…è¿‡æ± çš„å¤§å°ã€‚</p>
<h2 data-id="heading-2">è°ƒæ•´å‚æ•°</h2>
<p>ants æä¾›äº†å¤šç§å‚æ•°æ¥ä¼˜åŒ–æ± çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œå¯ä»¥è°ƒæ•´æ± çš„å¤§å°ã€è®¾ç½®éé˜»å¡æ¨¡å¼ã€ä»¥åŠè®¾ç½®ç©ºé—²çš„è¶…æ—¶æ—¶é—´ç­‰ã€‚</p>
<h3 data-id="heading-3">è®¾ç½®æ± å¤§å°</h3>
<p>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸åŒå¤§å°çš„æ± ï¼Œé€šè¿‡Â <code>NewPoolWithFunc</code>Â æ¥æŒ‡å®šæ± å¤§å°ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">p</span>,Â _Â :=Â ants.<span class="hljs-built_in">NewPoolWithFunc</span>(<span class="hljs-number">20</span>,Â <span class="hljs-built_in">func</span>(iÂ interface{})Â {
Â Â Â Â runTask(<span class="hljs-selector-tag">i</span>)
})
</code></pre>
<h3 data-id="heading-4">è®¾ç½®éé˜»å¡æ¨¡å¼</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæ± å·²æ»¡ï¼Œæ–°ä»»åŠ¡ä¼šé˜»å¡ç›´åˆ°æœ‰ç©ºé—² goroutine å¯ç”¨ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®éé˜»å¡æ¨¡å¼æ¥æ”¹å˜è¿™ä¸€è¡Œä¸ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">p</span>,Â _Â :=Â ants.<span class="hljs-built_in">NewPoolWithFunc</span>(<span class="hljs-number">10</span>,Â <span class="hljs-built_in">func</span>(iÂ interface{})Â {
Â Â Â Â runTask(<span class="hljs-selector-tag">i</span>)
},Â ants<span class="hljs-selector-class">.WithNonblocking</span>(true))
</code></pre>
<p>åœ¨éé˜»å¡æ¨¡å¼ä¸‹ï¼Œå¦‚æœæ± å·²æ»¡ï¼Œæ–°ä»»åŠ¡ä¼šç«‹å³è¿”å›é”™è¯¯ï¼Œè€Œä¸æ˜¯ç­‰å¾…ã€‚</p>
<h3 data-id="heading-5">è®¾ç½®ä»»åŠ¡è¶…æ—¶</h3>
<p>æˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®æ± ä¸­ä»»åŠ¡çš„è¶…æ—¶æ—¶é—´ï¼Œä»¥é¿å…æŸäº›ä»»åŠ¡è€—æ—¶è¿‡é•¿ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">p</span>,Â _Â :=Â ants.<span class="hljs-built_in">NewPoolWithFunc</span>(<span class="hljs-number">10</span>,Â <span class="hljs-built_in">func</span>(iÂ interface{})Â {
Â Â Â Â runTask(<span class="hljs-selector-tag">i</span>)
},Â ants<span class="hljs-selector-class">.WithExpireDuration</span>(<span class="hljs-number">5</span>Â *Â <span class="hljs-selector-tag">time</span><span class="hljs-selector-class">.Second</span>))
</code></pre>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæ¯ä¸ªä»»åŠ¡æœ€å¤šåªèƒ½è¿è¡Œ 5 ç§’é’Ÿï¼Œè¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œä»»åŠ¡å°†è¢«è‡ªåŠ¨ç»ˆæ­¢ã€‚</p>
<h2 data-id="heading-6">ç¤ºä¾‹ï¼šç½‘ç»œçˆ¬è™«</h2>
<p>å‡è®¾æˆ‘ä»¬æ­£åœ¨ç¼–å†™ä¸€ä¸ªç½‘ç»œçˆ¬è™«ï¼Œéœ€è¦å¹¶å‘è®¿é—®å¤šä¸ªç½‘é¡µã€‚å¯ä»¥ä½¿ç”¨ ants æ¥ç®¡ç†å¹¶å‘è¿æ¥ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span>Â main

<span class="hljs-keyword">import</span>Â (
Â Â Â Â <span class="hljs-string">"fmt"</span>
Â Â Â Â <span class="hljs-string">"net/http"</span>
Â Â Â Â <span class="hljs-string">"io/ioutil"</span>
Â Â Â Â <span class="hljs-string">"github.com/panjf2000/ants/v2"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span>Â <span class="hljs-title">main</span><span class="hljs-params">()</span></span>Â {
Â Â Â Â urlsÂ :=Â []<span class="hljs-type">string</span>{
Â Â Â Â Â Â Â Â <span class="hljs-string">"http://example.com"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"http://example.org"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"http://example.net"</span>,
Â Â Â Â }

Â Â Â Â fetchURLÂ :=Â <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(urlÂ <span class="hljs-type">string</span>)</span></span>Â {
Â Â Â Â Â Â Â Â resp,Â errÂ :=Â http.Get(url)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â errÂ !=Â <span class="hljs-literal">nil</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â fmt.Printf(<span class="hljs-string">"FailedÂ toÂ fetchÂ %s:Â %s\n"</span>,Â url,Â err)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â <span class="hljs-keyword">defer</span>Â resp.Body.Close()
Â Â Â Â Â Â Â Â body,Â _Â :=Â ioutil.ReadAll(resp.Body)
Â Â Â Â Â Â Â Â fmt.Printf(<span class="hljs-string">"FetchedÂ fromÂ %s:Â %dÂ bytes\n"</span>,Â url,Â <span class="hljs-built_in">len</span>(body))
Â Â Â Â }

Â Â Â Â p,Â _Â :=Â ants.NewPoolWithFunc(<span class="hljs-number">5</span>,Â <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(iÂ <span class="hljs-keyword">interface</span>{})</span></span>Â {
Â Â Â Â Â Â Â Â fetchURL(i.(<span class="hljs-type">string</span>))
Â Â Â Â })
Â Â Â Â <span class="hljs-keyword">defer</span>Â p.Release()

Â Â Â Â <span class="hljs-keyword">for</span>Â _,Â urlÂ :=Â <span class="hljs-keyword">range</span>Â urlsÂ {
Â Â Â Â Â Â Â Â _Â =Â p.Invoke(url)
Â Â Â Â }

Â Â Â Â p.Wait()
Â Â Â Â fmt.Println(<span class="hljs-string">"AllÂ URLsÂ fetched"</span>)
}
</code></pre>
<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç½‘ç»œçˆ¬è™«ï¼Œä½¿ç”¨ ants æ¥å¹¶å‘åœ°è®¿é—®å¤šä¸ªç½‘é¡µã€‚çˆ¬è™«åªä½¿ç”¨ 5 ä¸ª goroutinesï¼Œå¹¶å‘è®¿é—®å¤šä¸ª URLã€‚</p>
<h2 data-id="heading-7">æ‰©å±•æ€è·¯</h2>
<p>é™¤äº†åŸºæœ¬çš„ä»»åŠ¡æäº¤å’Œå‚æ•°è°ƒæ•´ï¼Œè¿˜æœ‰è®¸å¤šé«˜çº§ç”¨æ³•ã€‚ä¸‹é¢åˆ—ä¸¾å‡ ä¸ªï¼š</p>
<h3 data-id="heading-8">åŠ¨æ€è°ƒæ•´æ± å¤§å°</h3>
<p>æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®è¿è¡Œæ—¶ç¯å¢ƒåŠ¨æ€è°ƒæ•´æ± çš„å¤§å°ã€‚ants æ”¯æŒåœ¨è¿è¡Œæ—¶è°ƒæ•´æ± å¤§å°ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">pool<span class="hljs-selector-class">.Tune</span>(<span class="hljs-number">20</span>)
</code></pre>
<h3 data-id="heading-9">æ€§èƒ½ç›‘æ§</h3>
<p>ants å†…ç½®äº†ä¸€äº›æ€§èƒ½ç›‘æ§åŠŸèƒ½ï¼Œå¯ä»¥ç”¨æ¥è§‚å¯Ÿæ± çš„è¿è¡ŒçŠ¶æ€ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">fmt</span><span class="hljs-selector-class">.Printf</span>(<span class="hljs-string">"RunningÂ goroutines:Â %d\n"</span>,Â pool.<span class="hljs-built_in">Running</span>())
<span class="hljs-selector-tag">fmt</span><span class="hljs-selector-class">.Printf</span>(<span class="hljs-string">"FreeÂ goroutines:Â %d\n"</span>,Â pool.<span class="hljs-built_in">Free</span>())
</code></pre>
<h3 data-id="heading-10">å¼‚å¸¸å¤„ç†</h3>
<p>å¯ä»¥ä¸ºæ¯ä¸ªä»»åŠ¡è®¾ç½®å¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œç¡®ä¿ goroutine ä¸ä¼šå› ä¸º panic è€Œå´©æºƒï¼š</p>
<pre><code class="hljs language-go" lang="go">p,Â _Â :=Â ants.NewPoolWithFunc(<span class="hljs-number">10</span>,Â <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(iÂ <span class="hljs-keyword">interface</span>{})</span></span>Â {
Â Â Â Â <span class="hljs-keyword">defer</span>Â <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">()</span></span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â rÂ :=Â <span class="hljs-built_in">recover</span>();Â rÂ !=Â <span class="hljs-literal">nil</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â fmt.Println(<span class="hljs-string">"RecoveredÂ fromÂ panic"</span>,Â r)
Â Â Â Â Â Â Â Â }
Â Â Â Â }()
Â Â Â Â runTask(i)
})
</code></pre>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>ä½¿ç”¨ ants å¯ä»¥æ˜¾è‘—æé«˜ Go åº”ç”¨ç¨‹åºçš„å¹¶å‘èƒ½åŠ›ï¼Œä½¿å¾— goroutines çš„ç®¡ç†æ›´åŠ é«˜æ•ˆå’Œå¯é ã€‚é€šè¿‡è°ƒæ•´å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æ›´çµæ´»åœ°æ§åˆ¶æ± çš„è¡Œä¸ºï¼Œä»¥æ»¡è¶³ä¸åŒçš„åº”ç”¨åœºæ™¯éœ€æ±‚ã€‚æ— è®ºæ˜¯ç®€å•çš„å¹¶å‘ä»»åŠ¡ï¼Œè¿˜æ˜¯å¤æ‚çš„å¹¶å‘æ§åˆ¶ï¼Œants éƒ½æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚</p>
<p>å¸Œæœ›é€šè¿‡æœ¬æ–‡ï¼Œä½ èƒ½å¤Ÿå¯¹ ants æœ‰ä¸€ä¸ªå…¨é¢çš„ç†è§£ï¼Œå¹¶èƒ½åœ¨å®é™…é¡¹ç›®ä¸­çµæ´»è¿ç”¨ã€‚ğŸ”§ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[241. Java é›†åˆ - ä½¿ç”¨ Collections å·¥å‚ç±»å¤„ç†é›†åˆ]]></title>    <link>https://juejin.cn/post/7572459757107740726</link>    <guid>https://juejin.cn/post/7572459757107740726</guid>    <pubDate>2025-11-15T23:19:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572459757107740726" data-draft-id="7572465262739701779" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="241. Java é›†åˆ - ä½¿ç”¨ Collections å·¥å‚ç±»å¤„ç†é›†åˆ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T23:19:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CacheæŠ€æœ¯åˆ†äº«"/> <meta itemprop="url" content="https://juejin.cn/user/1662117313262776"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            241. Java é›†åˆ - ä½¿ç”¨ Collections å·¥å‚ç±»å¤„ç†é›†åˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1662117313262776/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CacheæŠ€æœ¯åˆ†äº«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T23:19:05.000Z" title="Sat Nov 15 2025 23:19:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">241. Java é›†åˆ - ä½¿ç”¨ <code>Collections</code> å·¥å‚ç±»å¤„ç†é›†åˆ</h2>
<p><code>Collections</code> å·¥å‚ç±»æä¾›äº†ä¸€ç»„æ–¹æ³•æ¥æ“ä½œé›†åˆåŠå…¶å†…å®¹ï¼ŒåŒ…å«äº†çº¦ 70 ä¸ªæ–¹æ³•ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†é‡ç‚¹ä»‹ç»å…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚</p>
<h4 data-id="heading-1">ğŸ† æå–é›†åˆä¸­çš„æœ€å°å€¼æˆ–æœ€å¤§å€¼</h4>
<p><code>Collections</code> ç±»æä¾›äº†ä¸¤ä¸ªæ–¹æ³• <code>min()</code> å’Œ <code>max()</code> æ¥æå–é›†åˆä¸­çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ã€‚ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼è°ƒç”¨å®ƒä»¬ï¼š</p>
<ol>
<li><strong>ä¸å¸¦æ¯”è¾ƒå™¨</strong>ï¼šå¦‚æœæ²¡æœ‰æä¾›æ¯”è¾ƒå™¨ï¼Œé›†åˆä¸­çš„å…ƒç´ å¿…é¡»å®ç° <code>Comparable</code> æ¥å£ï¼Œå¦åˆ™ä¼šæŠ›å‡º <code>ClassCastException</code> å¼‚å¸¸ã€‚</li>
<li><strong>å¸¦æ¯”è¾ƒå™¨</strong>ï¼šå¦‚æœæä¾›äº†ä¸€ä¸ªæ¯”è¾ƒå™¨ï¼Œ<code>min()</code> å’Œ <code>max()</code> å°†ä½¿ç”¨å®ƒæ¥ç¡®å®šæœ€å°å€¼æˆ–æœ€å¤§å€¼ï¼Œæ— è®ºé›†åˆå…ƒç´ æ˜¯å¦å®ç° <code>Comparable</code>ã€‚</li>
</ol>
<h5 data-id="heading-2">ç¤ºä¾‹ï¼šè·å–æœ€å°å€¼å’Œæœ€å¤§å€¼</h5>
<pre><code class="hljs language-java" lang="java">List&lt;Integer&gt; numbers = List.of(<span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">9</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>);
<span class="hljs-type">int</span> <span class="hljs-variable">min</span> <span class="hljs-operator">=</span> Collections.min(numbers);
<span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> Collections.max(numbers);
System.out.println(<span class="hljs-string">"Min: "</span> + min + <span class="hljs-string">", Max: "</span> + max);
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<ul>
<li>å¯¹äºç©ºé›†åˆï¼Œè°ƒç”¨ <code>min()</code> æˆ– <code>max()</code> æ–¹æ³•ä¼šæŠ›å‡º <code>NoSuchMethodException</code> å¼‚å¸¸ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-3">ğŸ” æŸ¥æ‰¾åˆ—è¡¨ä¸­çš„å­åˆ—è¡¨</h4>
<p><code>Collections</code> ç±»æä¾›äº†ä¸¤ä¸ªæ–¹æ³•æ¥æŸ¥æ‰¾å­åˆ—è¡¨åœ¨æ›´å¤§åˆ—è¡¨ä¸­çš„ä½ç½®ï¼š</p>
<ol>
<li><strong><code>indexOfSublist(List&lt;?&gt; source, List&lt;?&gt; target)</code></strong>ï¼šè¿”å›ç›®æ ‡åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ åœ¨æºåˆ—è¡¨ä¸­çš„ç´¢å¼•ã€‚å¦‚æœç›®æ ‡åˆ—è¡¨ä¸å­˜åœ¨ï¼Œè¿”å› <code>-1</code>ã€‚</li>
<li><strong><code>lastIndexOfSublist(List&lt;?&gt; source, List&lt;?&gt; target)</code></strong>ï¼šè¿”å›ç›®æ ‡åˆ—è¡¨æœ€åä¸€ä¸ªå…ƒç´ åœ¨æºåˆ—è¡¨ä¸­çš„ç´¢å¼•ã€‚</li>
</ol>
<h5 data-id="heading-4">ç¤ºä¾‹ï¼šæŸ¥æ‰¾å­åˆ—è¡¨</h5>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; source = List.of(<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>, <span class="hljs-string">"d"</span>, <span class="hljs-string">"e"</span>);
List&lt;String&gt; target = List.of(<span class="hljs-string">"c"</span>, <span class="hljs-string">"d"</span>);
<span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> Collections.indexOfSubList(source, target);
System.out.println(<span class="hljs-string">"Index of sublist: "</span> + index);
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">Index of sublist: <span class="hljs-number">2</span>
</code></pre>
<hr/>
<h4 data-id="heading-5">ğŸ”„ æ›´æ”¹åˆ—è¡¨å…ƒç´ çš„é¡ºåº</h4>
<p><code>Collections</code> ç±»æä¾›äº†å‡ ä¸ªæ–¹æ³•æ¥æ”¹å˜åˆ—è¡¨ä¸­å…ƒç´ çš„é¡ºåºï¼š</p>
<ol>
<li><strong><code>sort()</code></strong>ï¼šæŒ‰å‡åºæ’åºåˆ—è¡¨ã€‚å¯ä»¥ä¼ å…¥ä¸€ä¸ª <code>Comparator</code>ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™è¦æ±‚å…ƒç´ å¿…é¡»å®ç° <code>Comparable</code> æ¥å£ã€‚è‡ª Java SE 8 ä»¥æ¥ï¼Œæ¨èä½¿ç”¨ <code>List</code> æ¥å£ä¸­çš„ <code>sort()</code> æ–¹æ³•ã€‚</li>
<li><strong><code>shuffle()</code></strong>ï¼šéšæœºæ‰“ä¹±åˆ—è¡¨å…ƒç´ çš„é¡ºåºã€‚å¯ä»¥ä¼ å…¥ä¸€ä¸ª <code>Random</code> å®ä¾‹ï¼Œå¦‚æœéœ€è¦å¯é‡å¤çš„éšæœºé¡ºåºã€‚</li>
<li><strong><code>rotate()</code></strong>ï¼šæ—‹è½¬åˆ—è¡¨çš„å…ƒç´ ã€‚æ—‹è½¬åï¼Œç´¢å¼• 0 çš„å…ƒç´ å°†ç§»åŠ¨åˆ°ç´¢å¼• 1ï¼Œä¾æ­¤ç±»æ¨ï¼Œæœ€åçš„å…ƒç´ å°†ç§»åŠ¨åˆ°åˆ—è¡¨çš„å¼€å¤´ã€‚</li>
</ol>
<h5 data-id="heading-6">ç¤ºä¾‹ï¼šæ—‹è½¬åˆ—è¡¨å…ƒç´ </h5>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; strings = Arrays.asList(<span class="hljs-string">"0"</span>, <span class="hljs-string">"1"</span>, <span class="hljs-string">"2"</span>, <span class="hljs-string">"3"</span>, <span class="hljs-string">"4"</span>);
System.out.println(<span class="hljs-string">"Before rotate: "</span> + strings);
Collections.rotate(strings, <span class="hljs-number">1</span>); <span class="hljs-comment">// å‘å³æ—‹è½¬</span>
System.out.println(<span class="hljs-string">"After rotate: "</span> + strings);
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">Before rotate: [<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
After rotate: [<span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
</code></pre>
<ol>
<li><strong><code>reverse()</code></strong>ï¼šåè½¬åˆ—è¡¨ä¸­å…ƒç´ çš„é¡ºåºã€‚</li>
<li><strong><code>swap()</code></strong>ï¼šäº¤æ¢åˆ—è¡¨ä¸­çš„ä¸¤ä¸ªå…ƒç´ ã€‚</li>
</ol>
<h5 data-id="heading-7">ç¤ºä¾‹ï¼šåè½¬åˆ—è¡¨</h5>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; strings = Arrays.asList(<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>, <span class="hljs-string">"d"</span>);
Collections.reverse(strings);
System.out.println(<span class="hljs-string">"Reversed list: "</span> + strings);
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">Reversed list: [d, c, b, a]
</code></pre>
<hr/>
<h4 data-id="heading-8">ğŸ›¡ï¸ åŒ…è£…é›†åˆä¸ºä¸å¯å˜é›†åˆ</h4>
<p><code>Collections</code> å·¥å‚ç±»æä¾›äº†å‡ ç§æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºé›†åˆçš„ä¸å¯å˜åŒ…è£…å™¨ã€‚åŒ…è£…åçš„é›†åˆæ— æ³•ä¿®æ”¹ï¼Œä»»ä½•ä¿®æ”¹æ“ä½œéƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚é‡è¦çš„æ˜¯ï¼Œè¿™äº›æ–¹æ³•è¿”å›çš„æ˜¯åŒ…è£…å™¨ï¼Œè€Œä¸æ˜¯é›†åˆçš„å‰¯æœ¬ï¼Œæ‰€ä»¥å¦‚æœåŸé›†åˆè¢«ä¿®æ”¹ï¼ŒåŒ…è£…å™¨ä¹Ÿä¼šåæ˜ å‡ºè¿™äº›å˜åŒ–ã€‚</p>
<p>è¿™äº›æ–¹æ³•çš„å‘½åéµå¾ªä¸€å®šè§„åˆ™ï¼Œé€šå¸¸ä»¥ <code>unmodifiable</code> å¼€å¤´ã€‚ä¾‹å¦‚ï¼Œè¦åˆ›å»ºä¸€ä¸ªä¸å¯å˜çš„ <code>List</code> åŒ…è£…å™¨ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>unmodifiableList()</code> æ–¹æ³•ã€‚</p>
<h5 data-id="heading-9">ç¤ºä¾‹ï¼šåˆ›å»ºä¸å¯å˜åˆ—è¡¨</h5>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; strings = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(Arrays.asList(<span class="hljs-string">"0"</span>, <span class="hljs-string">"1"</span>, <span class="hljs-string">"2"</span>, <span class="hljs-string">"3"</span>, <span class="hljs-string">"4"</span>));
List&lt;String&gt; immutableStrings = Collections.unmodifiableList(strings);
System.out.println(immutableStrings);
<span class="hljs-comment">// ä¸‹é¢çš„ä»£ç ä¼šæŠ›å‡º UnsupportedOperationException å¼‚å¸¸</span>
immutableStrings.add(<span class="hljs-string">"5"</span>);
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java">[<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šå¦‚æœä½ ä¿®æ”¹äº†åŸå§‹é›†åˆï¼ˆ<code>strings</code>ï¼‰ï¼Œå®ƒä¹Ÿä¼šåæ˜ åœ¨ä¸å¯å˜é›†åˆä¸­ã€‚è¿™æ˜¯å› ä¸ºä¸å¯å˜åŒ…è£…å™¨ä»…ä»…æ˜¯åŸé›†åˆçš„ä¸€ä¸ªè§†å›¾ã€‚</p>
<hr/>
<h4 data-id="heading-10">ğŸ”’ åŒ…è£…é›†åˆä¸ºåŒæ­¥é›†åˆ</h4>
<p>å’Œåˆ›å»ºä¸å¯å˜é›†åˆç±»ä¼¼ï¼Œ<code>Collections</code> å·¥å‚ç±»è¿˜å¯ä»¥åˆ›å»ºåŒæ­¥é›†åˆçš„åŒ…è£…å™¨ã€‚åŒæ­¥é›†åˆç¡®ä¿åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å®‰å…¨è®¿é—®ã€‚</p>
<p>åŒæ­¥é›†åˆçš„å‘½åè§„åˆ™ä¸ºï¼š<code>synchronized</code> åè·Ÿé›†åˆç±»å‹åç§°ã€‚ä¾‹å¦‚ï¼Œè¦åˆ›å»ºåŒæ­¥çš„ <code>List</code>ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>synchronizedList()</code> æ–¹æ³•ã€‚</p>
<h5 data-id="heading-11">ç¤ºä¾‹ï¼šåˆ›å»ºåŒæ­¥åˆ—è¡¨</h5>
<pre><code class="hljs language-java" lang="java">List&lt;String&gt; synchronizedList = Collections.synchronizedList(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(Arrays.asList(<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>, <span class="hljs-string">"c"</span>)));
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li>æ‰€æœ‰å¯¹é›†åˆçš„è®¿é—®å¿…é¡»é€šè¿‡åŒæ­¥åŒ…è£…å™¨è¿›è¡Œã€‚</li>
<li>åœ¨éå†é›†åˆæ—¶ï¼Œä½¿ç”¨è¿­ä»£å™¨æˆ–æµæ—¶ï¼Œä»£ç éœ€è¦è¿›è¡ŒåŒæ­¥æ“ä½œï¼Œä»¥é¿å…ç«æ€æ¡ä»¶ã€‚</li>
</ul>
<p>å°½ç®¡ <code>Collections</code> æä¾›äº†åŒæ­¥é›†åˆï¼Œä½† <code>Java.util.concurrent</code> åŒ…ä¸­çš„ç±»é€šå¸¸æä¾›äº†æ›´å¥½çš„å¹¶å‘è§£å†³æ–¹æ¡ˆã€‚</p>
<hr/>
<h4 data-id="heading-12">ğŸ“œ å°ç»“</h4>
<ol>
<li><strong><code>min()</code> å’Œ <code>max()</code></strong>ï¼šæå–é›†åˆä¸­çš„æœ€å°å€¼å’Œæœ€å¤§å€¼ï¼Œæ”¯æŒä½¿ç”¨æ¯”è¾ƒå™¨ã€‚</li>
<li><strong><code>indexOfSubList()</code> å’Œ <code>lastIndexOfSubList()</code></strong>ï¼šæŸ¥æ‰¾å­åˆ—è¡¨åœ¨å¤§åˆ—è¡¨ä¸­çš„ä½ç½®ã€‚</li>
<li><strong>æ’åºå’Œé¡ºåºæ“ä½œ</strong>ï¼š<code>sort()</code>, <code>shuffle()</code>, <code>rotate()</code>, <code>reverse()</code> å’Œ <code>swap()</code> æä¾›äº†å¤šç§æ“ä½œé›†åˆé¡ºåºçš„æ–¹æ³•ã€‚</li>
<li><strong>ä¸å¯å˜é›†åˆåŒ…è£…</strong>ï¼šä½¿ç”¨ <code>unmodifiable</code> ç³»åˆ—æ–¹æ³•åˆ›å»ºä¸å¯å˜é›†åˆï¼Œä¿®æ”¹åŸé›†åˆä¼šåæ˜ åˆ°ä¸å¯å˜é›†åˆä¸­ã€‚</li>
<li><strong>åŒæ­¥é›†åˆåŒ…è£…</strong>ï¼šä½¿ç”¨ <code>synchronized</code> ç³»åˆ—æ–¹æ³•åˆ›å»ºåŒæ­¥é›†åˆï¼Œç¡®ä¿çº¿ç¨‹å®‰å…¨ã€‚</li>
</ol>
<hr/>
<p><strong>é—®é¢˜</strong>ï¼šå¦‚ä½•é€šè¿‡ <code>Collections</code> ç±»åˆ›å»ºä¸€ä¸ªä¸å¯å˜çš„ <code>List</code>ï¼Ÿ
<strong>ç­”æ¡ˆ</strong>ï¼šä½ å¯ä»¥ä½¿ç”¨ <code>Collections.unmodifiableList()</code> æ–¹æ³•åˆ›å»ºä¸€ä¸ªä¸å¯å˜çš„ <code>List</code>ï¼Œä½†è¦å°å¿ƒï¼Œå¦‚æœåŸå§‹é›†åˆè¢«ä¿®æ”¹ï¼ŒåŒ…è£…å™¨ä¹Ÿä¼šåæ˜ è¿™äº›å˜åŒ–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Linux ä¸‹çš„ç«¯å£è½¬å‘ï¼šsshã€socatã€iptables ä¸‰ç§æ–¹æ¡ˆå¯¹æ¯”]]></title>    <link>https://juejin.cn/post/7572697146286686258</link>    <guid>https://juejin.cn/post/7572697146286686258</guid>    <pubDate>2025-11-15T23:22:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572697146286686258" data-draft-id="7572714389922447400" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Linux ä¸‹çš„ç«¯å£è½¬å‘ï¼šsshã€socatã€iptables ä¸‰ç§æ–¹æ¡ˆå¯¹æ¯”"/> <meta itemprop="keywords" content="Linux"/> <meta itemprop="datePublished" content="2025-11-15T23:22:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LCGå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/3097802498120889"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Linux ä¸‹çš„ç«¯å£è½¬å‘ï¼šsshã€socatã€iptables ä¸‰ç§æ–¹æ¡ˆå¯¹æ¯”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097802498120889/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LCGå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T23:22:41.000Z" title="Sat Nov 15 2025 23:22:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1. ç«¯å£è½¬å‘æ¦‚è¿°</h3>
<p>ç«¯å£è½¬å‘ï¼ˆPort Forwardingï¼‰æ˜¯ä¸€ç§å°†ç½‘ç»œæ•°æ®åŒ…ä»ä¸€ä¸ªç½‘ç»œç«¯å£é‡å®šå‘åˆ°å¦ä¸€ä¸ªç«¯å£æˆ–ä¸»æœºçš„æŠ€æœ¯ã€‚åœ¨Linuxç¯å¢ƒä¸­ï¼Œç«¯å£è½¬å‘å¸¸ç”¨äºå®‰å…¨è®¿é—®ã€æœåŠ¡æš´éœ²ã€ç½‘ç»œè°ƒè¯•ç­‰åœºæ™¯ã€‚æœ¬æ–‡å°†è¯¦ç»†æ¢è®¨ä¸‰ç§å¸¸è§çš„ç«¯å£è½¬å‘æ–¹æ¡ˆï¼šSSHã€socatå’Œiptablesï¼Œåˆ†æå„è‡ªçš„ä¼˜ç¼ºç‚¹ï¼Œå¹¶æä¾›å®Œæ•´çš„é…ç½®ç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-1">2. ç¯å¢ƒå‡†å¤‡ä¸åŸºç¡€æ¦‚å¿µ</h3>
<h4 data-id="heading-2">2.1 æµ‹è¯•ç¯å¢ƒæ­å»º</h4>
<p>åœ¨å¼€å§‹é…ç½®ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡æµ‹è¯•ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºæµ‹è¯•ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p ~/port_forwarding_demo
<span class="hljs-built_in">cd</span> ~/port_forwarding_demo

<span class="hljs-comment"># å®‰è£…å¿…è¦å·¥å…·ï¼ˆåŸºäºUbuntu/Debianï¼‰</span>
sudo apt update
sudo apt install -y openssh-client openssh-server socat net-tools iptables-persistent netcat

<span class="hljs-comment"># éªŒè¯å·¥å…·å®‰è£…</span>
ssh -V
socat -version
iptables --version
</code></pre>
<h4 data-id="heading-3">2.2 ç½‘ç»œæ‹“æ‰‘è¯´æ˜</h4>
<p>åœ¨æœ¬æ–‡çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä»¥ä¸‹ç½‘ç»œé…ç½®ï¼š</p>
<ul>
<li><strong>æœ¬åœ°ä¸»æœº</strong>ï¼š127.0.0.1 (localhost)</li>
<li><strong>ç›®æ ‡æœåŠ¡</strong>ï¼šè¿è¡Œåœ¨8080ç«¯å£çš„WebæœåŠ¡</li>
<li><strong>ä¸­è½¬ç«¯å£</strong>ï¼š9000ï¼ˆç”¨äºè½¬å‘ï¼‰</li>
<li><strong>è¿œç¨‹ä¸»æœº</strong>ï¼š192.168.1.100ï¼ˆåœ¨å®é™…ä½¿ç”¨æ—¶æ›¿æ¢ä¸ºä½ çš„è¿œç¨‹æœåŠ¡å™¨IPï¼‰</li>
</ul>
<h3 data-id="heading-4">3. SSHç«¯å£è½¬å‘æ–¹æ¡ˆ</h3>
<h4 data-id="heading-5">3.1 SSHç«¯å£è½¬å‘åŸç†</h4>
<p>SSHç«¯å£è½¬å‘åˆ©ç”¨SSHåè®®çš„å®‰å…¨éš§é“åŠŸèƒ½ï¼Œåœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å»ºç«‹åŠ å¯†é€šé“ã€‚æ•°æ®æµå‘å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[å®¢æˆ·ç«¯åº”ç”¨] --&gt; B[æœ¬åœ°SSHå®¢æˆ·ç«¯];
    B --&gt; C[SSHåŠ å¯†éš§é“];
    C --&gt; D[è¿œç¨‹SSHæœåŠ¡å™¨];
    D --&gt; E[ç›®æ ‡æœåŠ¡];
    E --&gt; D;
    D --&gt; C;
    C --&gt; B;
    B --&gt; A;
    
    style A fill:#1e81b0,color:#fff
    style B fill:#1e81b0,color:#fff
    style C fill:#ee6c4d,color:#fff
    style D fill:#1e81b0,color:#fff
    style E fill:#1e81b0,color:#fff
</code></pre>
<h4 data-id="heading-6">3.2 æœ¬åœ°ç«¯å£è½¬å‘</h4>
<p>æœ¬åœ°ç«¯å£è½¬å‘å°†æœ¬åœ°ç«¯å£çš„æµé‡é€šè¿‡SSHéš§é“è½¬å‘åˆ°è¿œç¨‹æœåŠ¡å™¨ã€‚</p>
<p><strong>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šlocal_forward.sh</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># local_forward.sh - SSHæœ¬åœ°ç«¯å£è½¬å‘ç¤ºä¾‹</span>

<span class="hljs-comment"># é…ç½®å‚æ•°</span>
REMOTE_USER=<span class="hljs-string">"your_username"</span>
REMOTE_HOST=<span class="hljs-string">"192.168.1.100"</span>
REMOTE_PORT=<span class="hljs-string">"8080"</span>
LOCAL_PORT=<span class="hljs-string">"9000"</span>
SSH_PORT=<span class="hljs-string">"22"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­£åœ¨è®¾ç½®SSHæœ¬åœ°ç«¯å£è½¬å‘..."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å°†æœ¬åœ°ç«¯å£ <span class="hljs-variable">${LOCAL_PORT}</span> è½¬å‘åˆ° <span class="hljs-variable">${REMOTE_HOST}</span>:<span class="hljs-variable">${REMOTE_PORT}</span>"</span>

<span class="hljs-comment"># æ£€æŸ¥SSHå¯†é’¥æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ç”Ÿæˆ</span>
<span class="hljs-keyword">if</span> [ ! -f ~/.ssh/id_rsa ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ç”ŸæˆSSHå¯†é’¥å¯¹..."</span>
    ssh-keygen -t rsa -b 4096 -f ~/.ssh/id_rsa -N <span class="hljs-string">""</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è¯·å°†å…¬é’¥å¤åˆ¶åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼š"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ssh-copy-id <span class="hljs-variable">${REMOTE_USER}</span>@<span class="hljs-variable">${REMOTE_HOST}</span>"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ‰§è¡Œç«¯å£è½¬å‘å‘½ä»¤</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯åŠ¨SSHç«¯å£è½¬å‘ï¼ŒæŒ‰Ctrl+Cç»ˆæ­¢"</span>
ssh -N -L <span class="hljs-variable">${LOCAL_PORT}</span>:127.0.0.1:<span class="hljs-variable">${REMOTE_PORT}</span> <span class="hljs-variable">${REMOTE_USER}</span>@<span class="hljs-variable">${REMOTE_HOST}</span> -p <span class="hljs-variable">${SSH_PORT}</span>

<span class="hljs-comment"># å¦‚æœè¿æ¥å¤±è´¥ï¼Œæç¤ºç”¨æˆ·</span>
<span class="hljs-keyword">if</span> [ $? -ne 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"SSHè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ï¼š"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"1. è¿œç¨‹æœåŠ¡å™¨åœ°å€å’Œç”¨æˆ·åæ˜¯å¦æ­£ç¡®"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"2. SSHæœåŠ¡æ˜¯å¦åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šè¿è¡Œ"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"3. é˜²ç«å¢™è®¾ç½®æ˜¯å¦å…è®¸SSHè¿æ¥"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"4. æ˜¯å¦å·²ç»å°†SSHå…¬é’¥æ·»åŠ åˆ°è¿œç¨‹æœåŠ¡å™¨"</span>
<span class="hljs-keyword">fi</span>
</code></pre>
<p><strong>ä½¿ç”¨æ–¹æ³•ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç»™è„šæœ¬æ‰§è¡Œæƒé™</span>
<span class="hljs-built_in">chmod</span> +x local_forward.sh

<span class="hljs-comment"># æ‰§è¡Œç«¯å£è½¬å‘</span>
./local_forward.sh
</code></pre>
<h4 data-id="heading-7">3.3 è¿œç¨‹ç«¯å£è½¬å‘</h4>
<p>è¿œç¨‹ç«¯å£è½¬å‘å°†è¿œç¨‹æœåŠ¡å™¨ç«¯å£çš„æµé‡è½¬å‘åˆ°æœ¬åœ°æœåŠ¡ã€‚</p>
<p><strong>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šremote_forward.sh</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># remote_forward.sh - SSHè¿œç¨‹ç«¯å£è½¬å‘ç¤ºä¾‹</span>

<span class="hljs-comment"># é…ç½®å‚æ•°</span>
REMOTE_USER=<span class="hljs-string">"your_username"</span>
REMOTE_HOST=<span class="hljs-string">"192.168.1.100"</span>
REMOTE_PORT=<span class="hljs-string">"9000"</span>
LOCAL_PORT=<span class="hljs-string">"8080"</span>
LOCAL_HOST=<span class="hljs-string">"127.0.0.1"</span>
SSH_PORT=<span class="hljs-string">"22"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­£åœ¨è®¾ç½®SSHè¿œç¨‹ç«¯å£è½¬å‘..."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å°†è¿œç¨‹æœåŠ¡å™¨ <span class="hljs-variable">${REMOTE_HOST}</span> çš„ç«¯å£ <span class="hljs-variable">${REMOTE_PORT}</span> è½¬å‘åˆ°æœ¬åœ° <span class="hljs-variable">${LOCAL_HOST}</span>:<span class="hljs-variable">${LOCAL_PORT}</span>"</span>

<span class="hljs-comment"># æ£€æŸ¥æœ¬åœ°æœåŠ¡æ˜¯å¦è¿è¡Œ</span>
<span class="hljs-keyword">if</span> ! nc -z <span class="hljs-variable">${LOCAL_HOST}</span> <span class="hljs-variable">${LOCAL_PORT}</span> 2&gt;/dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è­¦å‘Šï¼šæœ¬åœ°æœåŠ¡ <span class="hljs-variable">${LOCAL_HOST}</span>:<span class="hljs-variable">${LOCAL_PORT}</span> å¯èƒ½æ²¡æœ‰è¿è¡Œ"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è¯·ç¡®ä¿åœ¨ç»§ç»­ä¹‹å‰å¯åŠ¨æœ¬åœ°æœåŠ¡"</span>
    <span class="hljs-built_in">read</span> -p <span class="hljs-string">"æ˜¯å¦ç»§ç»­ï¼Ÿ(y/n): "</span> -n 1 -r
    <span class="hljs-built_in">echo</span>
    <span class="hljs-keyword">if</span> [[ ! <span class="hljs-variable">$REPLY</span> =~ ^[Yy]$ ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">exit</span> 1
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ‰§è¡Œè¿œç¨‹ç«¯å£è½¬å‘</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯åŠ¨SSHè¿œç¨‹ç«¯å£è½¬å‘ï¼ŒæŒ‰Ctrl+Cç»ˆæ­¢"</span>
ssh -N -R <span class="hljs-variable">${REMOTE_PORT}</span>:<span class="hljs-variable">${LOCAL_HOST}</span>:<span class="hljs-variable">${LOCAL_PORT}</span> <span class="hljs-variable">${REMOTE_USER}</span>@<span class="hljs-variable">${REMOTE_HOST}</span> -p <span class="hljs-variable">${SSH_PORT}</span>

<span class="hljs-keyword">if</span> [ $? -ne 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"SSHè¿œç¨‹ç«¯å£è½¬å‘å¤±è´¥"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è¯·æ£€æŸ¥ï¼š"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"1. è¿œç¨‹æœåŠ¡å™¨çš„SSHé…ç½®æ˜¯å¦å…è®¸è¿œç¨‹ç«¯å£è½¬å‘ï¼ˆGatewayPortsé€‰é¡¹ï¼‰"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"2. è¿œç¨‹æœåŠ¡å™¨é˜²ç«å¢™è®¾ç½®"</span>
<span class="hljs-keyword">fi</span>
</code></pre>
<h4 data-id="heading-8">3.4 åŠ¨æ€ç«¯å£è½¬å‘</h4>
<p>åŠ¨æ€ç«¯å£è½¬å‘åˆ›å»ºSOCKSä»£ç†æœåŠ¡å™¨ã€‚</p>
<p><strong>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šdynamic_forward.sh</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># dynamic_forward.sh - SSHåŠ¨æ€ç«¯å£è½¬å‘ç¤ºä¾‹</span>

<span class="hljs-comment"># é…ç½®å‚æ•°</span>
REMOTE_USER=<span class="hljs-string">"your_username"</span>
REMOTE_HOST=<span class="hljs-string">"192.168.1.100"</span>
SOCKS_PORT=<span class="hljs-string">"1080"</span>
SSH_PORT=<span class="hljs-string">"22"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­£åœ¨è®¾ç½®SSHåŠ¨æ€ç«¯å£è½¬å‘(SOCKSä»£ç†)..."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"SOCKSä»£ç†å°†åœ¨æœ¬åœ°ç«¯å£ <span class="hljs-variable">${SOCKS_PORT}</span> å¯åŠ¨"</span>

<span class="hljs-comment"># å¯åŠ¨åŠ¨æ€ç«¯å£è½¬å‘</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯åŠ¨SOCKSä»£ç†æœåŠ¡å™¨ï¼ŒæŒ‰Ctrl+Cç»ˆæ­¢"</span>
ssh -N -D 127.0.0.1:<span class="hljs-variable">${SOCKS_PORT}</span> <span class="hljs-variable">${REMOTE_USER}</span>@<span class="hljs-variable">${REMOTE_HOST}</span> -p <span class="hljs-variable">${SSH_PORT}</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"SOCKSä»£ç†å·²åœæ­¢"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"é…ç½®æµè§ˆå™¨æˆ–å…¶ä»–åº”ç”¨ä½¿ç”¨SOCKSä»£ç†ï¼š127.0.0.1:<span class="hljs-variable">${SOCKS_PORT}</span>"</span>
</code></pre>
<h4 data-id="heading-9">3.5 SSHç«¯å£è½¬å‘é«˜çº§é…ç½®</h4>
<p><strong>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šssh_advanced.sh</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># ssh_advanced.sh - SSHé«˜çº§ç«¯å£è½¬å‘é…ç½®</span>

<span class="hljs-comment"># é…ç½®å‚æ•°</span>
REMOTE_USER=<span class="hljs-string">"your_username"</span>
REMOTE_HOST=<span class="hljs-string">"192.168.1.100"</span>
SSH_PORT=<span class="hljs-string">"22"</span>
CONFIG_FILE=<span class="hljs-string">"<span class="hljs-variable">$HOME</span>/ssh_forward_config"</span>

<span class="hljs-comment"># å†™å…¥SSHå®¢æˆ·ç«¯é…ç½®</span>
<span class="hljs-built_in">cat</span> &gt; <span class="hljs-variable">${CONFIG_FILE}</span> &lt;&lt; <span class="hljs-string">EOF
# SSHç«¯å£è½¬å‘é…ç½®
Host forward-server
    HostName ${REMOTE_HOST}
    User ${REMOTE_USER}
    Port ${SSH_PORT}
    ServerAliveInterval 60
    ServerAliveCountMax 3
    Compression yes
    ExitOnForwardFailure yes
    LocalForward 9000 127.0.0.1:8080
    RemoteForward 9001 127.0.0.1:3000
    
# è‡ªåŠ¨é‡è¿é…ç½®
Host auto-reconnect
    HostName ${REMOTE_HOST}
    User ${REMOTE_USER}
    Port ${SSH_PORT}
    ServerAliveInterval 30
    ServerAliveCountMax 10
    TCPKeepAlive yes
    ExitOnForwardFailure yes
EOF</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"SSHé…ç½®æ–‡ä»¶å·²ç”Ÿæˆ: <span class="hljs-variable">${CONFIG_FILE}</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ä½¿ç”¨æ–¹æ³•:"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"1. æœ¬åœ°è½¬å‘: ssh -L 9000:localhost:8080 <span class="hljs-variable">${REMOTE_USER}</span>@<span class="hljs-variable">${REMOTE_HOST}</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"2. è¿œç¨‹è½¬å‘: ssh -R 9001:localhost:3000 <span class="hljs-variable">${REMOTE_USER}</span>@<span class="hljs-variable">${REMOTE_HOST}</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"3. ä½¿ç”¨é…ç½®æ–‡ä»¶: ssh -F <span class="hljs-variable">${CONFIG_FILE}</span> forward-server"</span>
</code></pre>
<h3 data-id="heading-10">4. socatç«¯å£è½¬å‘æ–¹æ¡ˆ</h3>
<h4 data-id="heading-11">4.1 socatå·¥ä½œåŸç†</h4>
<p>socatæ˜¯ä¸€ä¸ªå¤šåŠŸèƒ½çš„ç½‘ç»œå·¥å…·ï¼Œå¯ä»¥åœ¨ä¸¤ä¸ªæ•°æ®æµä¹‹é—´å»ºç«‹åŒå‘é€šé“ã€‚å…¶æ•°æ®æµå‘å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æºå®¢æˆ·ç«¯] --&gt; B[socatè¿›ç¨‹];
    B --&gt; C[ç›®æ ‡æœåŠ¡];
    C --&gt; B;
    B --&gt; A;
    
    style A fill:#1e81b0,color:#fff
    style B fill:#ee6c4d,color:#fff
    style C fill:#1e81b0,color:#fff
</code></pre>
<h4 data-id="heading-12">4.2 åŸºç¡€TCPç«¯å£è½¬å‘</h4>
<p><strong>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šsocat_basic.sh</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># socat_basic.sh - åŸºç¡€TCPç«¯å£è½¬å‘</span>

LISTEN_PORT=<span class="hljs-string">"9000"</span>
TARGET_HOST=<span class="hljs-string">"192.168.1.100"</span>
TARGET_PORT=<span class="hljs-string">"8080"</span>
LOG_FILE=<span class="hljs-string">"/tmp/socat_forward.log"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯åŠ¨socat TCPç«¯å£è½¬å‘..."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç›‘å¬ç«¯å£: <span class="hljs-variable">${LISTEN_PORT}</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç›®æ ‡åœ°å€: <span class="hljs-variable">${TARGET_HOST}</span>:<span class="hljs-variable">${TARGET_PORT}</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ—¥å¿—æ–‡ä»¶: <span class="hljs-variable">${LOG_FILE}</span>"</span>

<span class="hljs-comment"># æ£€æŸ¥ç›®æ ‡ç«¯å£æ˜¯å¦å¯è¾¾</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æŸ¥ç›®æ ‡æœåŠ¡å™¨è¿é€šæ€§..."</span>
<span class="hljs-keyword">if</span> ! nc -z <span class="hljs-variable">${TARGET_HOST}</span> <span class="hljs-variable">${TARGET_PORT}</span> 2&gt;/dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è­¦å‘Š: æ— æ³•è¿æ¥åˆ°ç›®æ ‡æœåŠ¡å™¨ <span class="hljs-variable">${TARGET_HOST}</span>:<span class="hljs-variable">${TARGET_PORT}</span>"</span>
    <span class="hljs-built_in">read</span> -p <span class="hljs-string">"æ˜¯å¦ç»§ç»­ï¼Ÿ(y/n): "</span> -n 1 -r
    <span class="hljs-built_in">echo</span>
    <span class="hljs-keyword">if</span> [[ ! <span class="hljs-variable">$REPLY</span> =~ ^[Yy]$ ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">exit</span> 1
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># åˆ›å»ºæ—¥å¿—ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p $(<span class="hljs-built_in">dirname</span> <span class="hljs-variable">${LOG_FILE}</span>)

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯åŠ¨æ—¶é—´: <span class="hljs-subst">$(date)</span>"</span> &gt;&gt; <span class="hljs-variable">${LOG_FILE}</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯åŠ¨socatè¿›ç¨‹..."</span>

<span class="hljs-comment"># å¯åŠ¨socatç«¯å£è½¬å‘</span>
socat -d -d -lf <span class="hljs-variable">${LOG_FILE}</span> \
    TCP-LISTEN:<span class="hljs-variable">${LISTEN_PORT}</span>,fork,reuseaddr \
    TCP:<span class="hljs-variable">${TARGET_HOST}</span>:<span class="hljs-variable">${TARGET_PORT}</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"socatè¿›ç¨‹å·²åœæ­¢"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æŸ¥çœ‹è¯¦ç»†æ—¥å¿—: tail -f <span class="hljs-variable">${LOG_FILE}</span>"</span>
</code></pre>
<h4 data-id="heading-13">4.3 SSL/TLSåŠ å¯†è½¬å‘</h4>
<p><strong>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šsocat_ssl.sh</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># socat_ssl.sh - SSL/TLSåŠ å¯†ç«¯å£è½¬å‘</span>

LISTEN_PORT=<span class="hljs-string">"9000"</span>
TARGET_HOST=<span class="hljs-string">"192.168.1.100"</span>
TARGET_PORT=<span class="hljs-string">"8080"</span>
CERT_DIR=<span class="hljs-string">"./ssl_certs"</span>
KEY_FILE=<span class="hljs-string">"<span class="hljs-variable">${CERT_DIR}</span>/server.key"</span>
CERT_FILE=<span class="hljs-string">"<span class="hljs-variable">${CERT_DIR}</span>/server.crt"</span>
LOG_FILE=<span class="hljs-string">"/tmp/socat_ssl.log"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"è®¾ç½®SSL/TLSåŠ å¯†ç«¯å£è½¬å‘..."</span>

<span class="hljs-comment"># åˆ›å»ºSSLè¯ä¹¦ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">${CERT_DIR}</span>

<span class="hljs-comment"># ç”Ÿæˆè‡ªç­¾åSSLè¯ä¹¦ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰</span>
<span class="hljs-keyword">if</span> [ ! -f <span class="hljs-variable">${KEY_FILE}</span> ] || [ ! -f <span class="hljs-variable">${CERT_FILE}</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ç”Ÿæˆè‡ªç­¾åSSLè¯ä¹¦..."</span>
    openssl req -x509 -newkey rsa:4096 -keyout <span class="hljs-variable">${KEY_FILE}</span> \
        -out <span class="hljs-variable">${CERT_FILE}</span> -days 365 -nodes -subj \
        <span class="hljs-string">"/C=US/ST=State/L=City/O=Organization/CN=localhost"</span>
    
    <span class="hljs-keyword">if</span> [ $? -eq 0 ]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"SSLè¯ä¹¦å·²ç”Ÿæˆ:"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯†é’¥æ–‡ä»¶: <span class="hljs-variable">${KEY_FILE}</span>"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"è¯ä¹¦æ–‡ä»¶: <span class="hljs-variable">${CERT_FILE}</span>"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"SSLè¯ä¹¦ç”Ÿæˆå¤±è´¥"</span>
        <span class="hljs-built_in">exit</span> 1
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯åŠ¨SSLåŠ å¯†è½¬å‘..."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç›‘å¬ç«¯å£: <span class="hljs-variable">${LISTEN_PORT}</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç›®æ ‡åœ°å€: <span class="hljs-variable">${TARGET_HOST}</span>:<span class="hljs-variable">${TARGET_PORT}</span>"</span>

<span class="hljs-comment"># å¯åŠ¨SSLåŠ å¯†è½¬å‘</span>
socat -d -d -lf <span class="hljs-variable">${LOG_FILE}</span> \
    openssl-listen:<span class="hljs-variable">${LISTEN_PORT}</span>,fork,reuseaddr,cert=<span class="hljs-variable">${CERT_FILE}</span>,key=<span class="hljs-variable">${KEY_FILE}</span>,verify=0 \
    TCP:<span class="hljs-variable">${TARGET_HOST}</span>:<span class="hljs-variable">${TARGET_PORT}</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"SSLè½¬å‘è¿›ç¨‹å·²åœæ­¢"</span>
</code></pre>
<h4 data-id="heading-14">4.4 UDPç«¯å£è½¬å‘</h4>
<p><strong>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šsocat_udp.sh</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># socat_udp.sh - UDPç«¯å£è½¬å‘</span>

LISTEN_PORT=<span class="hljs-string">"9000"</span>
TARGET_HOST=<span class="hljs-string">"192.168.1.100"</span>
TARGET_PORT=<span class="hljs-string">"8080"</span>
PROTOCOL=<span class="hljs-string">"UDP"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯åŠ¨<span class="hljs-variable">${PROTOCOL}</span>ç«¯å£è½¬å‘..."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç›‘å¬ç«¯å£: <span class="hljs-variable">${LISTEN_PORT}</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç›®æ ‡åœ°å€: <span class="hljs-variable">${TARGET_HOST}</span>:<span class="hljs-variable">${TARGET_PORT}</span>"</span>

<span class="hljs-comment"># æ£€æŸ¥socatç‰ˆæœ¬æ˜¯å¦æ”¯æŒUDP</span>
socat -h | grep -q <span class="hljs-string">"UDP4"</span>
<span class="hljs-keyword">if</span> [ $? -ne 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è­¦å‘Š: å½“å‰socatç‰ˆæœ¬å¯èƒ½ä¸å®Œå…¨æ”¯æŒUDPåŠŸèƒ½"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯åŠ¨UDPç«¯å£è½¬å‘è¿›ç¨‹..."</span>

<span class="hljs-comment"># å¯åŠ¨UDPè½¬å‘</span>
socat -u UDP4-LISTEN:<span class="hljs-variable">${LISTEN_PORT}</span>,fork,reuseaddr \
    UDP4:<span class="hljs-variable">${TARGET_HOST}</span>:<span class="hljs-variable">${TARGET_PORT}</span> &amp;

PID=$!
<span class="hljs-built_in">echo</span> <span class="hljs-string">"UDPè½¬å‘è¿›ç¨‹å·²å¯åŠ¨ (PID: <span class="hljs-variable">${PID}</span>)"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æŒ‰ä»»æ„é”®åœæ­¢è½¬å‘..."</span>
<span class="hljs-built_in">read</span> -n 1

<span class="hljs-built_in">kill</span> <span class="hljs-variable">${PID}</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"UDPè½¬å‘è¿›ç¨‹å·²åœæ­¢"</span>
</code></pre>
<h4 data-id="heading-15">4.5 é«˜çº§socaté…ç½®</h4>
<p><strong>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šsocat_advanced.sh</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># socat_advanced.sh - é«˜çº§socaté…ç½®</span>

CONFIG_DIR=<span class="hljs-string">"./socat_configs"</span>
<span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">${CONFIG_DIR}</span>

<span class="hljs-comment"># åˆ›å»ºå¤šä¸ªè½¬å‘é…ç½®</span>
<span class="hljs-built_in">cat</span> &gt; <span class="hljs-variable">${CONFIG_DIR}</span>/web_forward.cfg &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment"># WebæœåŠ¡è½¬å‘é…ç½®</span>
<span class="hljs-comment"># ç›‘å¬ç«¯å£: 9080 -&gt; ç›®æ ‡: 192.168.1.100:80</span>
socat TCP-LISTEN:9080,fork,reuseaddr TCP:192.168.1.100:80
EOF

<span class="hljs-built_in">cat</span> &gt; <span class="hljs-variable">${CONFIG_DIR}</span>/database_forward.cfg &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment"># æ•°æ®åº“æœåŠ¡è½¬å‘é…ç½®  </span>
<span class="hljs-comment"># ç›‘å¬ç«¯å£: 93306 -&gt; ç›®æ ‡: 192.168.1.100:3306</span>
socat TCP-LISTEN:93306,fork,reuseaddr TCP:192.168.1.100:3306
EOF

<span class="hljs-built_in">cat</span> &gt; <span class="hljs-variable">${CONFIG_DIR}</span>/ssl_termination.cfg &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment"># SSLç»ˆæ­¢é…ç½®</span>
<span class="hljs-comment"># å¤–éƒ¨SSL -&gt; å†…éƒ¨æ˜æ–‡</span>
socat OPENSSL-LISTEN:9443,fork,reuseaddr,cert=./ssl_certs/server.crt,key=./ssl_certs/server.key,verify=0 TCP:192.168.1.100:443
EOF

<span class="hljs-comment"># åˆ›å»ºå¯åŠ¨è„šæœ¬</span>
<span class="hljs-built_in">cat</span> &gt; <span class="hljs-variable">${CONFIG_DIR}</span>/start_all.sh &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment">#!/bin/bash</span>
<span class="hljs-comment"># å¯åŠ¨æ‰€æœ‰socatè½¬å‘</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯åŠ¨æ‰€æœ‰socatè½¬å‘æœåŠ¡..."</span>

<span class="hljs-comment"># å¯åŠ¨Webè½¬å‘</span>
socat TCP-LISTEN:9080,fork,reuseaddr TCP:192.168.1.100:80 &amp;
WEB_PID=$!
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Webè½¬å‘å¯åŠ¨ (PID: <span class="hljs-variable">$WEB_PID</span>)"</span>

<span class="hljs-comment"># å¯åŠ¨æ•°æ®åº“è½¬å‘</span>
socat TCP-LISTEN:93306,fork,reuseaddr TCP:192.168.1.100:3306 &amp;
DB_PID=$!
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ•°æ®åº“è½¬å‘å¯åŠ¨ (PID: <span class="hljs-variable">$DB_PID</span>)"</span>

<span class="hljs-comment"># ä¿å­˜PIDæ–‡ä»¶</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$WEB_PID</span> <span class="hljs-variable">$DB_PID</span>"</span> &gt; /tmp/socat_pids.txt

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ‰€æœ‰æœåŠ¡å·²å¯åŠ¨"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"åœæ­¢æ‰€æœ‰æœåŠ¡: kill \$(cat /tmp/socat_pids.txt)"</span>
EOF

<span class="hljs-built_in">chmod</span> +x <span class="hljs-variable">${CONFIG_DIR}</span>/start_all.sh

<span class="hljs-built_in">echo</span> <span class="hljs-string">"é«˜çº§socaté…ç½®å·²ç”Ÿæˆåœ¨: <span class="hljs-variable">${CONFIG_DIR}</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"é…ç½®æ–‡ä»¶:"</span>
<span class="hljs-built_in">ls</span> -la <span class="hljs-variable">${CONFIG_DIR}</span>/
</code></pre>
<h3 data-id="heading-16">5. iptablesç«¯å£è½¬å‘æ–¹æ¡ˆ</h3>
<h4 data-id="heading-17">5.1 iptablesè½¬å‘åŸç†</h4>
<p>iptablesæ˜¯Linuxå†…æ ¸çš„åŒ…è¿‡æ»¤ç³»ç»Ÿï¼Œå¯ä»¥ç”¨äºå®ç°ç½‘ç»œåœ°å€è½¬æ¢(NAT)å’Œç«¯å£è½¬å‘ã€‚å…¶æ•°æ®æµå‘å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[å¤–éƒ¨å®¢æˆ·ç«¯] --&gt; B[ç½‘ç»œæ¥å£];
    B --&gt; C[PREROUTINGé“¾];
    C --&gt; D[è·¯ç”±åˆ¤æ–­];
    D --&gt; E[FORWARDé“¾];
    E --&gt; F[POSTROUTINGé“¾];
    F --&gt; G[ç›®æ ‡æœåŠ¡];
    G --&gt; F;
    F --&gt; E;
    E --&gt; D;
    D --&gt; C;
    C --&gt; B;
    B --&gt; A;
    
    style A fill:#1e81b0,color:#fff
    style B fill:#ee6c4d,color:#fff
    style C fill:#1e81b0,color:#fff
    style D fill:#1e81b0,color:#fff
    style E fill:#1e81b0,color:#fff
    style F fill:#1e81b0,color:#fff
    style G fill:#1e81b0,color:#fff
</code></pre>
<h4 data-id="heading-18">5.2 åŸºç¡€ç«¯å£è½¬å‘é…ç½®</h4>
<p><strong>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šiptables_basic.sh</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># iptables_basic.sh - åŸºç¡€iptablesç«¯å£è½¬å‘</span>

INTERNAL_HOST=<span class="hljs-string">"192.168.1.100"</span>
INTERNAL_PORT=<span class="hljs-string">"8080"</span>
EXTERNAL_PORT=<span class="hljs-string">"9000"</span>
EXTERNAL_IFACE=<span class="hljs-string">"eth0"</span>  <span class="hljs-comment"># æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"é…ç½®iptablesç«¯å£è½¬å‘..."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¤–éƒ¨ç«¯å£: <span class="hljs-variable">${EXTERNAL_PORT}</span> -&gt; å†…éƒ¨: <span class="hljs-variable">${INTERNAL_HOST}</span>:<span class="hljs-variable">${INTERNAL_PORT}</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç½‘ç»œæ¥å£: <span class="hljs-variable">${EXTERNAL_IFACE}</span>"</span>

<span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦å…·æœ‰rootæƒé™</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$EUID</span>"</span> -ne 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è¯·ä½¿ç”¨rootæƒé™è¿è¡Œæ­¤è„šæœ¬"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ä½¿ç”¨æ–¹æ³•: sudo ./iptables_basic.sh"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># å¯ç”¨IPè½¬å‘</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯ç”¨IPè½¬å‘..."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">'1'</span> &gt; /proc/sys/net/ipv4/ip_forward
sysctl -w net.ipv4.ip_forward=1

<span class="hljs-comment"># é…ç½®ç«¯å£è½¬å‘è§„åˆ™</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ·»åŠ iptablesè§„åˆ™..."</span>

<span class="hljs-comment"># 1. åœ¨natè¡¨çš„PREROUTINGé“¾ä¸­æ·»åŠ DNATè§„åˆ™</span>
iptables -t nat -A PREROUTING -i <span class="hljs-variable">${EXTERNAL_IFACE}</span> -p tcp --dport <span class="hljs-variable">${EXTERNAL_PORT}</span> \
    -j DNAT --to-destination <span class="hljs-variable">${INTERNAL_HOST}</span>:<span class="hljs-variable">${INTERNAL_PORT}</span>

<span class="hljs-comment"># 2. åœ¨natè¡¨çš„POSTROUTINGé“¾ä¸­æ·»åŠ SNATè§„åˆ™</span>
iptables -t nat -A POSTROUTING -o <span class="hljs-variable">${EXTERNAL_IFACE}</span> -p tcp -d <span class="hljs-variable">${INTERNAL_HOST}</span> --dport <span class="hljs-variable">${INTERNAL_PORT}</span> \
    -j MASQUERADE

<span class="hljs-comment"># 3. åœ¨filterè¡¨ä¸­å…è®¸è½¬å‘çš„æµé‡</span>
iptables -A FORWARD -i <span class="hljs-variable">${EXTERNAL_IFACE}</span> -o <span class="hljs-variable">${EXTERNAL_IFACE}</span> -p tcp \
    --dport <span class="hljs-variable">${INTERNAL_PORT}</span> -d <span class="hljs-variable">${INTERNAL_HOST}</span> -j ACCEPT
iptables -A FORWARD -i <span class="hljs-variable">${EXTERNAL_IFACE}</span> -o <span class="hljs-variable">${EXTERNAL_IFACE}</span> -p tcp \
    --sport <span class="hljs-variable">${INTERNAL_PORT}</span> -s <span class="hljs-variable">${INTERNAL_HOST}</span> -j ACCEPT

<span class="hljs-built_in">echo</span> <span class="hljs-string">"iptablesè§„åˆ™é…ç½®å®Œæˆ"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å½“å‰NATè¡¨è§„åˆ™:"</span>
iptables -t nat -L -n -v

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å½“å‰FILTERè¡¨è§„åˆ™:"</span>
iptables -L FORWARD -n -v
</code></pre>
<h4 data-id="heading-19">5.3 æŒä¹…åŒ–iptablesè§„åˆ™</h4>
<p><strong>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šiptables_persistent.sh</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># iptables_persistent.sh - iptablesè§„åˆ™æŒä¹…åŒ–</span>

RULES_FILE=<span class="hljs-string">"/etc/iptables/rules.v4"</span>
BACKUP_DIR=<span class="hljs-string">"./iptables_backup"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"é…ç½®iptablesè§„åˆ™æŒä¹…åŒ–..."</span>

<span class="hljs-comment"># æ£€æŸ¥rootæƒé™</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$EUID</span>"</span> -ne 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è¯·ä½¿ç”¨rootæƒé™è¿è¡Œæ­¤è„šæœ¬"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># åˆ›å»ºå¤‡ä»½ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">${BACKUP_DIR}</span>
BACKUP_FILE=<span class="hljs-string">"<span class="hljs-variable">${BACKUP_DIR}</span>/rules.v4.backup.<span class="hljs-subst">$(date +%Y%m%d_%H%M%S)</span>"</span>

<span class="hljs-comment"># å¤‡ä»½å½“å‰è§„åˆ™</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¤‡ä»½å½“å‰iptablesè§„åˆ™..."</span>
iptables-save &gt; <span class="hljs-variable">${BACKUP_FILE}</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"è§„åˆ™å·²å¤‡ä»½åˆ°: <span class="hljs-variable">${BACKUP_FILE}</span>"</span>

<span class="hljs-comment"># å®‰è£…iptables-persistentï¼ˆå¦‚æœæœªå®‰è£…ï¼‰</span>
<span class="hljs-keyword">if</span> ! <span class="hljs-built_in">command</span> -v netfilter-persistent &gt; /dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å®‰è£…iptables-persistent..."</span>
    apt update
    apt install -y iptables-persistent
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># ä¿å­˜å½“å‰è§„åˆ™</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ä¿å­˜å½“å‰è§„åˆ™åˆ°æŒä¹…åŒ–æ–‡ä»¶..."</span>
iptables-save &gt; <span class="hljs-variable">${RULES_FILE}</span>

<span class="hljs-comment"># åˆ›å»ºç³»ç»ŸæœåŠ¡è„šæœ¬</span>
<span class="hljs-built_in">cat</span> &gt; /etc/systemd/system/iptables-load.service &lt;&lt; <span class="hljs-string">EOF
[Unit]
Description=Load iptables rules
After=network.target

[Service]
Type=oneshot
ExecStart=/sbin/iptables-restore &lt; ${RULES_FILE}
ExecReload=/sbin/iptables-restore &lt; ${RULES_FILE}
RemainAfterExit=yes

[Install]
WantedBy=multi-user.target
EOF</span>

<span class="hljs-comment"># å¯ç”¨æœåŠ¡</span>
systemctl daemon-reload
systemctl <span class="hljs-built_in">enable</span> iptables-load.service

<span class="hljs-built_in">echo</span> <span class="hljs-string">"iptablesè§„åˆ™æŒä¹…åŒ–é…ç½®å®Œæˆ"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"è§„åˆ™æ–‡ä»¶: <span class="hljs-variable">${RULES_FILE}</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¤‡ä»½æ–‡ä»¶: <span class="hljs-variable">${BACKUP_FILE}</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æœåŠ¡çŠ¶æ€: systemctl status iptables-load"</span>
</code></pre>
<h4 data-id="heading-20">5.4 é«˜çº§iptablesè½¬å‘é…ç½®</h4>
<p><strong>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šiptables_advanced.sh</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># iptables_advanced.sh - é«˜çº§iptablesè½¬å‘é…ç½®</span>

<span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$EUID</span>"</span> -ne 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è¯·ä½¿ç”¨rootæƒé™è¿è¡Œæ­¤è„šæœ¬"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

CONFIG_DIR=<span class="hljs-string">"./iptables_advanced"</span>
<span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">${CONFIG_DIR}</span>

<span class="hljs-comment"># åˆ›å»ºç«¯å£è½¬å‘é…ç½®å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-title">create_forward_rule</span></span>() {
    <span class="hljs-built_in">local</span> name=<span class="hljs-variable">$1</span>
    <span class="hljs-built_in">local</span> ext_port=<span class="hljs-variable">$2</span>
    <span class="hljs-built_in">local</span> int_host=<span class="hljs-variable">$3</span>
    <span class="hljs-built_in">local</span> int_port=<span class="hljs-variable">$4</span>
    <span class="hljs-built_in">local</span> protocol=<span class="hljs-variable">${5:-tcp}</span>
    
    <span class="hljs-built_in">cat</span> &gt; <span class="hljs-variable">${CONFIG_DIR}</span>/forward_<span class="hljs-variable">${name}</span>.sh &lt;&lt; <span class="hljs-string">EOF
# !/bin/bash
# ${name}ç«¯å£è½¬å‘é…ç½®

echo "é…ç½®${name}ç«¯å£è½¬å‘..."
echo "å¤–éƒ¨ç«¯å£: \${EXT_PORT} -&gt; å†…éƒ¨: \${INT_HOST}:\${INT_PORT}"

# å¯ç”¨IPè½¬å‘
echo '1' &gt; /proc/sys/net/ipv4/ip_forward

# æ¸…ç†æ—§è§„åˆ™
iptables -t nat -D PREROUTING -p ${protocol} --dport ${ext_port} -j DNAT --to-destination ${int_host}:${int_port} 2&gt;/dev/null
iptables -t nat -D POSTROUTING -p ${protocol} -d ${int_host} --dport ${int_port} -j MASQUERADE 2&gt;/dev/null

# æ·»åŠ æ–°è§„åˆ™
iptables -t nat -A PREROUTING -p ${protocol} --dport ${ext_port} \\
    -j DNAT --to-destination ${int_host}:${int_port}
iptables -t nat -A POSTROUTING -p ${protocol} -d ${int_host} --dport ${int_port} \\
    -j MASQUERADE

# å…è®¸è½¬å‘
iptables -A FORWARD -p ${protocol} --dport ${int_port} -d ${int_host} -j ACCEPT
iptables -A FORWARD -p ${protocol} --sport ${int_port} -s ${int_host} -j ACCEPT

echo "${name}è½¬å‘è§„åˆ™é…ç½®å®Œæˆ"
EOF</span>
    
    <span class="hljs-built_in">chmod</span> +x <span class="hljs-variable">${CONFIG_DIR}</span>/forward_<span class="hljs-variable">${name}</span>.sh
}

<span class="hljs-comment"># åˆ›å»ºå¤šä¸ªè½¬å‘è§„åˆ™</span>
create_forward_rule <span class="hljs-string">"web"</span> <span class="hljs-string">"80"</span> <span class="hljs-string">"192.168.1.100"</span> <span class="hljs-string">"8080"</span>
create_forward_rule <span class="hljs-string">"https"</span> <span class="hljs-string">"443"</span> <span class="hljs-string">"192.168.1.100"</span> <span class="hljs-string">"8443"</span>
create_forward_rule <span class="hljs-string">"ssh"</span> <span class="hljs-string">"2222"</span> <span class="hljs-string">"192.168.1.100"</span> <span class="hljs-string">"22"</span>
create_forward_rule <span class="hljs-string">"database"</span> <span class="hljs-string">"3306"</span> <span class="hljs-string">"192.168.1.101"</span> <span class="hljs-string">"3306"</span>

<span class="hljs-comment"># åˆ›å»ºç®¡ç†è„šæœ¬</span>
<span class="hljs-built_in">cat</span> &gt; <span class="hljs-variable">${CONFIG_DIR}</span>/manage_forwarding.sh &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment">#!/bin/bash</span>
<span class="hljs-comment"># iptablesè½¬å‘ç®¡ç†è„šæœ¬</span>

ACTION=<span class="hljs-variable">${1:-status}</span>

<span class="hljs-keyword">case</span> <span class="hljs-variable">$ACTION</span> <span class="hljs-keyword">in</span>
    start)
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯åŠ¨æ‰€æœ‰ç«¯å£è½¬å‘..."</span>
        <span class="hljs-keyword">for</span> script <span class="hljs-keyword">in</span> <span class="hljs-variable">${CONFIG_DIR}</span>/forward_*.sh; <span class="hljs-keyword">do</span>
            <span class="hljs-keyword">if</span> [ -f <span class="hljs-string">"<span class="hljs-variable">$script</span>"</span> ]; <span class="hljs-keyword">then</span>
                <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ‰§è¡Œ: <span class="hljs-variable">$script</span>"</span>
                <span class="hljs-variable">$script</span>
            <span class="hljs-keyword">fi</span>
        <span class="hljs-keyword">done</span>
        ;;
    stop)
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"åœæ­¢æ‰€æœ‰ç«¯å£è½¬å‘..."</span>
        <span class="hljs-comment"># æ¸…ç†NATè§„åˆ™</span>
        iptables -t nat -F PREROUTING
        iptables -t nat -F POSTROUTING
        iptables -F FORWARD
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ‰€æœ‰è½¬å‘è§„åˆ™å·²æ¸…ç†"</span>
        ;;
    status)
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"å½“å‰NATè¡¨è§„åˆ™:"</span>
        iptables -t nat -L -n
        <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"å½“å‰FORWARDé“¾è§„åˆ™:"</span>
        iptables -L FORWARD -n
        ;;
    save)
        iptables-save &gt; /etc/iptables/rules.v4
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"è§„åˆ™å·²ä¿å­˜"</span>
        ;;
    *)
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"ä½¿ç”¨æ–¹æ³•: <span class="hljs-variable">$0</span> {start|stop|status|save}"</span>
        <span class="hljs-built_in">exit</span> 1
        ;;
<span class="hljs-keyword">esac</span>
EOF

<span class="hljs-built_in">chmod</span> +x <span class="hljs-variable">${CONFIG_DIR}</span>/manage_forwarding.sh

<span class="hljs-built_in">echo</span> <span class="hljs-string">"é«˜çº§iptablesé…ç½®å·²ç”Ÿæˆåœ¨: <span class="hljs-variable">${CONFIG_DIR}</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç®¡ç†è„šæœ¬: <span class="hljs-variable">${CONFIG_DIR}</span>/manage_forwarding.sh"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ä½¿ç”¨æ–¹æ³•:"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"  sudo <span class="hljs-variable">${CONFIG_DIR}</span>/manage_forwarding.sh start   # å¯åŠ¨æ‰€æœ‰è½¬å‘"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"  sudo <span class="hljs-variable">${CONFIG_DIR}</span>/manage_forwarding.sh stop    # åœæ­¢æ‰€æœ‰è½¬å‘"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"  sudo <span class="hljs-variable">${CONFIG_DIR}</span>/manage_forwarding.sh status  # æŸ¥çœ‹çŠ¶æ€"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"  sudo <span class="hljs-variable">${CONFIG_DIR}</span>/manage_forwarding.sh save    # ä¿å­˜è§„åˆ™"</span>
</code></pre>
<h3 data-id="heading-21">6. ä¸‰ç§æ–¹æ¡ˆå¯¹æ¯”æµ‹è¯•</h3>
<h4 data-id="heading-22">6.1 æ€§èƒ½æµ‹è¯•è„šæœ¬</h4>
<p><strong>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šperformance_test.sh</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># performance_test.sh - ä¸‰ç§æ–¹æ¡ˆæ€§èƒ½å¯¹æ¯”æµ‹è¯•</span>

TEST_DURATION=30
TARGET_HOST=<span class="hljs-string">"192.168.1.100"</span>
TARGET_PORT=<span class="hljs-string">"8080"</span>
LOCAL_PORT=<span class="hljs-string">"9000"</span>
RESULTS_FILE=<span class="hljs-string">"./performance_results.txt"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹æ€§èƒ½æµ‹è¯•..."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æµ‹è¯•æ—¶é•¿: <span class="hljs-variable">${TEST_DURATION}</span>ç§’"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç›®æ ‡æœåŠ¡: <span class="hljs-variable">${TARGET_HOST}</span>:<span class="hljs-variable">${TARGET_PORT}</span>"</span>

<span class="hljs-comment"># å®‰è£…æµ‹è¯•å·¥å…·</span>
<span class="hljs-keyword">if</span> ! <span class="hljs-built_in">command</span> -v ab &gt; /dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å®‰è£…Apache Bench..."</span>
    apt update
    apt install -y apache2-utils
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ¸…ç†æ—§ç»“æœ</span>
&gt; <span class="hljs-variable">${RESULTS_FILE}</span>

<span class="hljs-function"><span class="hljs-title">test_ssh_forwarding</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æµ‹è¯•SSHç«¯å£è½¬å‘æ€§èƒ½..."</span>
    
    <span class="hljs-comment"># å¯åŠ¨SSHè½¬å‘åå°è¿›ç¨‹</span>
    ssh -N -L <span class="hljs-variable">${LOCAL_PORT}</span>:<span class="hljs-variable">${TARGET_HOST}</span>:<span class="hljs-variable">${TARGET_PORT}</span> user@<span class="hljs-variable">${TARGET_HOST}</span> &amp;
    SSH_PID=$!
    
    <span class="hljs-comment"># ç­‰å¾…è¿æ¥å»ºç«‹</span>
    <span class="hljs-built_in">sleep</span> 5
    
    <span class="hljs-comment"># è¿è¡Œæ€§èƒ½æµ‹è¯•</span>
    ab -n 1000 -c 10 http://127.0.0.1:<span class="hljs-variable">${LOCAL_PORT}</span>/ &gt; /tmp/ssh_test.txt 2&gt;&amp;1
    
    <span class="hljs-comment"># æå–ç»“æœ</span>
    REQUESTS_PER_SECOND=$(grep <span class="hljs-string">"Requests per second"</span> /tmp/ssh_test.txt | awk <span class="hljs-string">'{print $4}'</span>)
    TIME_PER_REQUEST=$(grep <span class="hljs-string">"Time per request"</span> /tmp/ssh_test.txt | <span class="hljs-built_in">head</span> -1 | awk <span class="hljs-string">'{print $4}'</span>)
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"SSHç»“æœ: <span class="hljs-variable">${REQUESTS_PER_SECOND}</span> req/sec, <span class="hljs-variable">${TIME_PER_REQUEST}</span> ms/req"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"SSH: <span class="hljs-variable">${REQUESTS_PER_SECOND}</span> req/sec, <span class="hljs-variable">${TIME_PER_REQUEST}</span> ms/req"</span> &gt;&gt; <span class="hljs-variable">${RESULTS_FILE}</span>
    
    <span class="hljs-comment"># æ¸…ç†</span>
    <span class="hljs-built_in">kill</span> <span class="hljs-variable">${SSH_PID}</span>
}

<span class="hljs-function"><span class="hljs-title">test_socat_forwarding</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æµ‹è¯•socatç«¯å£è½¬å‘æ€§èƒ½..."</span>
    
    <span class="hljs-comment"># å¯åŠ¨socatè½¬å‘</span>
    socat TCP-LISTEN:<span class="hljs-variable">${LOCAL_PORT}</span>,fork,reuseaddr TCP:<span class="hljs-variable">${TARGET_HOST}</span>:<span class="hljs-variable">${TARGET_PORT}</span> &amp;
    SOCAT_PID=$!
    
    <span class="hljs-built_in">sleep</span> 2
    
    <span class="hljs-comment"># è¿è¡Œæ€§èƒ½æµ‹è¯•</span>
    ab -n 1000 -c 10 http://127.0.0.1:<span class="hljs-variable">${LOCAL_PORT}</span>/ &gt; /tmp/socat_test.txt 2&gt;&amp;1
    
    <span class="hljs-comment"># æå–ç»“æœ</span>
    REQUESTS_PER_SECOND=$(grep <span class="hljs-string">"Requests per second"</span> /tmp/socat_test.txt | awk <span class="hljs-string">'{print $4}'</span>)
    TIME_PER_REQUEST=$(grep <span class="hljs-string">"Time per request"</span> /tmp/socat_test.txt | <span class="hljs-built_in">head</span> -1 | awk <span class="hljs-string">'{print $4}'</span>)
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"socatç»“æœ: <span class="hljs-variable">${REQUESTS_PER_SECOND}</span> req/sec, <span class="hljs-variable">${TIME_PER_REQUEST}</span> ms/req"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"socat: <span class="hljs-variable">${REQUESTS_PER_SECOND}</span> req/sec, <span class="hljs-variable">${TIME_PER_REQUEST}</span> ms/req"</span> &gt;&gt; <span class="hljs-variable">${RESULTS_FILE}</span>
    
    <span class="hljs-comment"># æ¸…ç†</span>
    <span class="hljs-built_in">kill</span> <span class="hljs-variable">${SOCAT_PID}</span>
}

<span class="hljs-function"><span class="hljs-title">test_iptables_forwarding</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æµ‹è¯•iptablesç«¯å£è½¬å‘æ€§èƒ½..."</span>
    
    <span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$EUID</span>"</span> -ne 0 ]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"éœ€è¦rootæƒé™æµ‹è¯•iptables"</span>
        <span class="hljs-built_in">return</span>
    <span class="hljs-keyword">fi</span>
    
    <span class="hljs-comment"># é…ç½®iptablesè½¬å‘</span>
    ./iptables_basic.sh
    
    <span class="hljs-comment"># è¿è¡Œæ€§èƒ½æµ‹è¯•</span>
    ab -n 1000 -c 10 http://127.0.0.1:<span class="hljs-variable">${LOCAL_PORT}</span>/ &gt; /tmp/iptables_test.txt 2&gt;&amp;1
    
    <span class="hljs-comment"># æå–ç»“æœ</span>
    REQUESTS_PER_SECOND=$(grep <span class="hljs-string">"Requests per second"</span> /tmp/iptables_test.txt | awk <span class="hljs-string">'{print $4}'</span>)
    TIME_PER_REQUEST=$(grep <span class="hljs-string">"Time per request"</span> /tmp/iptables_test.txt | <span class="hljs-built_in">head</span> -1 | awk <span class="hljs-string">'{print $4}'</span>)
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"iptablesç»“æœ: <span class="hljs-variable">${REQUESTS_PER_SECOND}</span> req/sec, <span class="hljs-variable">${TIME_PER_REQUEST}</span> ms/req"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"iptables: <span class="hljs-variable">${REQUESTS_PER_SECOND}</span> req/sec, <span class="hljs-variable">${TIME_PER_REQUEST}</span> ms/req"</span> &gt;&gt; <span class="hljs-variable">${RESULTS_FILE}</span>
    
    <span class="hljs-comment"># æ¸…ç†è§„åˆ™</span>
    iptables -t nat -F
}

<span class="hljs-comment"># æ‰§è¡Œæµ‹è¯•</span>
test_ssh_forwarding
test_socat_forwarding
test_iptables_forwarding

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ€§èƒ½æµ‹è¯•å®Œæˆ"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç»“æœä¿å­˜åœ¨: <span class="hljs-variable">${RESULTS_FILE}</span>"</span>
<span class="hljs-built_in">cat</span> <span class="hljs-variable">${RESULTS_FILE}</span>
</code></pre>
<h4 data-id="heading-23">6.2 åŠŸèƒ½å¯¹æ¯”è¡¨æ ¼</h4>
<p><strong>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šfeature_comparison.md</strong></p>
<h2 data-id="heading-24">ä¸‰ç§ç«¯å£è½¬å‘æ–¹æ¡ˆåŠŸèƒ½å¯¹æ¯”</h2>







































































<table><thead><tr><th>ç‰¹æ€§</th><th>SSH</th><th>socat</th><th>iptables</th></tr></thead><tbody><tr><td><strong>åŠ å¯†æ”¯æŒ</strong></td><td>âœ… åŸç”Ÿæ”¯æŒ</td><td>âœ… éœ€è¦SSLé…ç½®</td><td>âŒ æ— åŠ å¯†</td></tr><tr><td><strong>è®¤è¯æœºåˆ¶</strong></td><td>âœ… å¤šç§è®¤è¯æ–¹å¼</td><td>âŒ æ— è®¤è¯</td><td>âŒ æ— è®¤è¯</td></tr><tr><td><strong>é…ç½®å¤æ‚åº¦</strong></td><td>ä¸­ç­‰</td><td>ç®€å•</td><td>å¤æ‚</td></tr><tr><td><strong>æ€§èƒ½å¼€é”€</strong></td><td>é«˜ï¼ˆåŠ å¯†å¼€é”€ï¼‰</td><td>ä¸­ç­‰</td><td>ä½ï¼ˆå†…æ ¸çº§ï¼‰</td></tr><tr><td><strong>æŒä¹…åŒ–</strong></td><td>éœ€è¦è„šæœ¬æˆ–æœåŠ¡</td><td>éœ€è¦è„šæœ¬æˆ–æœåŠ¡</td><td>éœ€è¦é¢å¤–é…ç½®</td></tr><tr><td><strong>è·¨å¹³å°</strong></td><td>âœ… å…¨å¹³å°æ”¯æŒ</td><td>âœ… å…¨å¹³å°æ”¯æŒ</td><td>âŒ ä»…Linux</td></tr><tr><td><strong>UDPæ”¯æŒ</strong></td><td>âœ… æœ‰é™æ”¯æŒ</td><td>âœ… å®Œæ•´æ”¯æŒ</td><td>âœ… å®Œæ•´æ”¯æŒ</td></tr><tr><td><strong>è°ƒè¯•èƒ½åŠ›</strong></td><td>ä¸­ç­‰</td><td>ä¼˜ç§€</td><td>å›°éš¾</td></tr><tr><td><strong>ç³»ç»Ÿä¾èµ–</strong></td><td>SSHå®¢æˆ·ç«¯/æœåŠ¡</td><td>socatäºŒè¿›åˆ¶</td><td>iptableså·¥å…·</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>å®‰å…¨è¿œç¨‹è®¿é—®ã€ä¸´æ—¶è½¬å‘</td><td>åè®®è½¬æ¢ã€è°ƒè¯•å·¥å…·</td><td>ç”Ÿäº§ç¯å¢ƒã€ç½‘å…³è½¬å‘</td></tr></tbody></table>
<h3 data-id="heading-25">æ¨èä½¿ç”¨åœºæ™¯</h3>
<h4 data-id="heading-26">SSHç«¯å£è½¬å‘</h4>
<ul>
<li>éœ€è¦åŠ å¯†çš„å®‰å…¨è¿æ¥</li>
<li>ä¸´æ—¶æ€§çš„ç«¯å£è½¬å‘éœ€æ±‚</li>
<li>è·¨è¶Šé˜²ç«å¢™çš„è®¿é—®</li>
<li>å¼€å‘è°ƒè¯•ç¯å¢ƒ</li>
</ul>
<h4 data-id="heading-27">socatç«¯å£è½¬å‘</h4>
<ul>
<li>åè®®è½¬æ¢å’Œè°ƒè¯•</li>
<li>å¤æ‚çš„æµå¤„ç†éœ€æ±‚</li>
<li>å¿«é€Ÿæµ‹è¯•å’ŒåŸå‹éªŒè¯</li>
<li>UDPç«¯å£è½¬å‘</li>
</ul>
<h4 data-id="heading-28">iptablesç«¯å£è½¬å‘</h4>
<ul>
<li>ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²</li>
<li>é«˜æ€§èƒ½è¦æ±‚çš„åœºæ™¯</li>
<li>ç³»ç»Ÿçº§ç«¯å£è½¬å‘</li>
<li>ç½‘å…³å’Œè·¯ç”±å™¨é…ç½®</li>
</ul>
<h3 data-id="heading-29">7. å®é™…åº”ç”¨æ¡ˆä¾‹</h3>
<h4 data-id="heading-30">7.1 ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²è„šæœ¬</h4>
<p><strong>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼šproduction_deploy.sh</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># production_deploy.sh - ç”Ÿäº§ç¯å¢ƒç«¯å£è½¬å‘éƒ¨ç½²</span>

<span class="hljs-built_in">set</span> -e  <span class="hljs-comment"># é‡åˆ°é”™è¯¯ç«‹å³é€€å‡º</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç”Ÿäº§ç¯å¢ƒç«¯å£è½¬å‘éƒ¨ç½²è„šæœ¬"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"================================"</span>

DEPLOY_MODE=<span class="hljs-variable">${1:-"iptables"}</span>  <span class="hljs-comment"># é»˜è®¤ä½¿ç”¨iptables</span>
CONFIG_FILE=<span class="hljs-string">"./deploy_config.conf"</span>

<span class="hljs-comment"># åŠ è½½é…ç½®</span>
<span class="hljs-keyword">if</span> [ -f <span class="hljs-string">"<span class="hljs-variable">${CONFIG_FILE}</span>"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">source</span> <span class="hljs-string">"<span class="hljs-variable">${CONFIG_FILE}</span>"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-comment"># é»˜è®¤é…ç½®</span>
    TARGET_SERVICES=(
        <span class="hljs-string">"web:80:192.168.1.100:8080"</span>
        <span class="hljs-string">"api:8080:192.168.1.101:3000"</span>
        <span class="hljs-string">"db:3306:192.168.1.102:3306"</span>
    )
    MONITOR_PORT=<span class="hljs-string">"9090"</span>
    LOG_DIR=<span class="hljs-string">"/var/log/port_forwarding"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-function"><span class="hljs-title">setup_monitoring</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è®¾ç½®ç›‘æ§å’Œæ—¥å¿—..."</span>
    <span class="hljs-built_in">mkdir</span> -p <span class="hljs-variable">${LOG_DIR}</span>
    
    <span class="hljs-comment"># å®‰è£…ç›‘æ§å·¥å…·</span>
    apt install -y htop iotop nethogs
    
    <span class="hljs-comment"># åˆ›å»ºç›‘æ§è„šæœ¬</span>
    <span class="hljs-built_in">cat</span> &gt; /usr/local/bin/monitor_forwarding.sh &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment">#!/bin/bash</span>
<span class="hljs-comment"># ç«¯å£è½¬å‘ç›‘æ§è„šæœ¬</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç«¯å£è½¬å‘çŠ¶æ€ç›‘æ§"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"=================="</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å½“å‰æ—¶é—´: <span class="hljs-subst">$(date)</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"1. ç½‘ç»œè¿æ¥ç»Ÿè®¡:"</span>
netstat -tulpn | grep -E <span class="hljs-string">":(9000|8080|3306)"</span> | <span class="hljs-built_in">sort</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"2. ç³»ç»Ÿèµ„æºä½¿ç”¨:"</span>
ps aux --<span class="hljs-built_in">sort</span>=-%cpu | <span class="hljs-built_in">head</span> -10
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"3. ç½‘ç»œæµé‡:"</span>
nethogs -t -d 1 -c 2 | <span class="hljs-built_in">head</span> -20
EOF
    
    <span class="hljs-built_in">chmod</span> +x /usr/local/bin/monitor_forwarding.sh
}

<span class="hljs-function"><span class="hljs-title">deploy_iptables</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"éƒ¨ç½²iptablesç«¯å£è½¬å‘..."</span>
    
    <span class="hljs-comment"># è°ƒç”¨é«˜çº§é…ç½®</span>
    ./iptables_advanced/manage_forwarding.sh start
    
    <span class="hljs-comment"># è®¾ç½®å®šæ—¶ç›‘æ§</span>
    (crontab -l 2&gt;/dev/null; <span class="hljs-built_in">echo</span> <span class="hljs-string">"*/5 * * * * /usr/local/bin/monitor_forwarding.sh &gt;&gt; <span class="hljs-variable">${LOG_DIR}</span>/monitor.log"</span>) | crontab -
}

<span class="hljs-function"><span class="hljs-title">deploy_socat</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"éƒ¨ç½²socatç«¯å£è½¬å‘..."</span>
    
    <span class="hljs-comment"># åˆ›å»ºsystemdæœåŠ¡</span>
    <span class="hljs-keyword">for</span> service <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${TARGET_SERVICES[@]}</span>"</span>; <span class="hljs-keyword">do</span>
        IFS=<span class="hljs-string">':'</span> <span class="hljs-built_in">read</span> -r name ext_port int_host int_port &lt;&lt;&lt; <span class="hljs-string">"<span class="hljs-variable">$service</span>"</span>
        
        <span class="hljs-built_in">cat</span> &gt; /etc/systemd/system/socat-<span class="hljs-variable">${name}</span>.service &lt;&lt; <span class="hljs-string">EOF
[Unit]
Description=socat port forwarding for ${name}
After=network.target

[Service]
Type=simple
ExecStart=/usr/bin/socat TCP-LISTEN:${ext_port},fork,reuseaddr TCP:${int_host}:${int_port}
Restart=always
RestartSec=3
User=root
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=multi-user.target
EOF</span>
        
        systemctl <span class="hljs-built_in">enable</span> socat-<span class="hljs-variable">${name}</span>.service
        systemctl start socat-<span class="hljs-variable">${name}</span>.service
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"æœåŠ¡ socat-<span class="hljs-variable">${name}</span> å·²å¯åŠ¨"</span>
    <span class="hljs-keyword">done</span>
}

<span class="hljs-keyword">case</span> <span class="hljs-variable">$DEPLOY_MODE</span> <span class="hljs-keyword">in</span>
    <span class="hljs-string">"iptables"</span>)
        deploy_iptables
        ;;
    <span class="hljs-string">"socat"</span>)
        deploy_socat
        ;;
    <span class="hljs-string">"ssh"</span>)
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"SSHè½¬å‘é€šå¸¸ç”¨äºä¸´æ—¶éœ€æ±‚ï¼Œä¸å»ºè®®ç”Ÿäº§ç¯å¢ƒæŒä¹…åŒ–éƒ¨ç½²"</span>
        ;;
    *)
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"æœªçŸ¥çš„éƒ¨ç½²æ¨¡å¼: <span class="hljs-variable">$DEPLOY_MODE</span>"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"å¯ç”¨æ¨¡å¼: iptables, socat, ssh"</span>
        <span class="hljs-built_in">exit</span> 1
        ;;
<span class="hljs-keyword">esac</span>

setup_monitoring

<span class="hljs-built_in">echo</span> <span class="hljs-string">"éƒ¨ç½²å®Œæˆ!"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç›‘æ§æ—¥å¿—: <span class="hljs-variable">${LOG_DIR}</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å®æ—¶ç›‘æ§: /usr/local/bin/monitor_forwarding.sh"</span>
</code></pre>
<h3 data-id="heading-31">8. æ•…éšœæ’é™¤ä¸ç»´æŠ¤</h3>
<h4 data-id="heading-32">8.1 å¸¸è§é—®é¢˜è¯Šæ–­è„šæœ¬</h4>
<p><strong>åˆ›å»ºé…ç½®æ–‡ä»¶ï¼štroubleshooting.sh</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># troubleshooting.sh - ç«¯å£è½¬å‘æ•…éšœè¯Šæ–­</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ç«¯å£è½¬å‘æ•…éšœè¯Šæ–­å·¥å…·"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"======================"</span>

<span class="hljs-function"><span class="hljs-title">check_connectivity</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"1. æ£€æŸ¥åŸºç¡€è¿é€šæ€§..."</span>
    
    <span class="hljs-keyword">if</span> ping -c 3 <span class="hljs-variable">$1</span> &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… å¯ä»¥pingé€šç›®æ ‡ä¸»æœº: <span class="hljs-variable">$1</span>"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"âŒ æ— æ³•pingé€šç›®æ ‡ä¸»æœº: <span class="hljs-variable">$1</span>"</span>
        <span class="hljs-built_in">return</span> 1
    <span class="hljs-keyword">fi</span>
    
    <span class="hljs-keyword">if</span> nc -z <span class="hljs-variable">$1</span> <span class="hljs-variable">$2</span> &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… ç›®æ ‡æœåŠ¡ç«¯å£å¯è®¿é—®: <span class="hljs-variable">$1</span>:<span class="hljs-variable">$2</span>"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"âŒ ç›®æ ‡æœåŠ¡ç«¯å£ä¸å¯è®¿é—®: <span class="hljs-variable">$1</span>:<span class="hljs-variable">$2</span>"</span>
        <span class="hljs-built_in">return</span> 1
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-function"><span class="hljs-title">check_forwarding_rules</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"2. æ£€æŸ¥è½¬å‘è§„åˆ™..."</span>
    
    <span class="hljs-keyword">case</span> <span class="hljs-variable">$1</span> <span class="hljs-keyword">in</span>
        <span class="hljs-string">"iptables"</span>)
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æŸ¥iptablesè§„åˆ™:"</span>
            iptables -t nat -L -n | grep -E <span class="hljs-string">"DNAT|REDIRECT"</span>
            iptables -L FORWARD -n | <span class="hljs-built_in">head</span> -10
            ;;
        <span class="hljs-string">"socat"</span>)
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æŸ¥socatè¿›ç¨‹:"</span>
            ps aux | grep socat | grep -v grep
            netstat -tulpn | grep socat
            ;;
        <span class="hljs-string">"ssh"</span>)
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æŸ¥SSHéš§é“:"</span>
            ps aux | grep <span class="hljs-string">"ssh.*-L\|ssh.*-R"</span> | grep -v grep
            netstat -tulpn | grep ssh
            ;;
    <span class="hljs-keyword">esac</span>
}

<span class="hljs-function"><span class="hljs-title">check_firewall</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®..."</span>
    
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v ufw &gt; /dev/null; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"UFWçŠ¶æ€:"</span>
        ufw status verbose
    <span class="hljs-keyword">fi</span>
    
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v firewall-cmd &gt; /dev/null; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"firewalldçŠ¶æ€:"</span>
        firewall-cmd --list-all
    <span class="hljs-keyword">fi</span>
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"iptablesé»˜è®¤ç­–ç•¥:"</span>
    iptables -L | grep <span class="hljs-string">"policy"</span>
}

<span class="hljs-function"><span class="hljs-title">check_system_resources</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"4. æ£€æŸ¥ç³»ç»Ÿèµ„æº..."</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å†…å­˜ä½¿ç”¨:"</span>
    free -h
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"CPUè´Ÿè½½:"</span>
    <span class="hljs-built_in">uptime</span>
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ç½‘ç»œè¿æ¥æ•°:"</span>
    netstat -an | grep -c ESTABLISHED
}

<span class="hljs-function"><span class="hljs-title">perform_deep_diagnosis</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"5. æ·±åº¦è¯Šæ–­..."</span>
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å†…æ ¸å‚æ•°:"</span>
    sysctl net.ipv4.ip_forward
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è·¯ç”±è¡¨:"</span>
    ip route show
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ç½‘ç»œæ¥å£:"</span>
    ip addr show
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è¿æ¥è·Ÿè¸ª:"</span>
    <span class="hljs-keyword">if</span> [ -f /proc/sys/net/netfilter/nf_conntrack_count ]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"è¿æ¥è·Ÿè¸ªæ•°: <span class="hljs-subst">$(cat /proc/sys/net/netfilter/nf_conntrack_count)</span>"</span>
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># æ‰§è¡Œè¯Šæ–­</span>
TARGET_HOST=<span class="hljs-variable">${1:-"192.168.1.100"}</span>
TARGET_PORT=<span class="hljs-variable">${2:-"8080"}</span>
FORWARD_TYPE=<span class="hljs-variable">${3:-"iptables"}</span>

check_connectivity <span class="hljs-variable">$TARGET_HOST</span> <span class="hljs-variable">$TARGET_PORT</span>
check_forwarding_rules <span class="hljs-variable">$FORWARD_TYPE</span>
check_firewall
check_system_resources
perform_deep_diagnosis

<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"è¯Šæ–­å®Œæˆ!"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ ¹æ®ä¸Šè¿°æ£€æŸ¥ç»“æœæ’æŸ¥é—®é¢˜"</span>
</code></pre>
<h3 data-id="heading-33">9. æ€»ç»“</h3>
<p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†Linuxä¸‹ä¸‰ç§ä¸»è¦çš„ç«¯å£è½¬å‘æ–¹æ¡ˆï¼šSSHã€socatå’Œiptablesã€‚æ¯ç§æ–¹æ¡ˆéƒ½æœ‰å…¶ç‹¬ç‰¹çš„ä¼˜åŠ¿å’Œé€‚ç”¨åœºæ™¯ï¼š</p>
<ul>
<li><strong>SSH</strong>ï¼šé€‚åˆéœ€è¦åŠ å¯†çš„å®‰å…¨åœºæ™¯å’Œä¸´æ—¶è½¬å‘éœ€æ±‚</li>
<li><strong>socat</strong>ï¼šåŠŸèƒ½å¼ºå¤§ï¼Œé€‚åˆåè®®è½¬æ¢å’Œå¤æ‚çš„æ•°æ®æµå¤„ç†</li>
<li><strong>iptables</strong>ï¼šæ€§èƒ½æœ€ä½³ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒçš„ç³»ç»Ÿçº§è½¬å‘</li>
</ul>
<p>é€šè¿‡æœ¬æ–‡æä¾›çš„å®Œæ•´é…ç½®è„šæœ¬å’Œè¯¦ç»†è¯´æ˜ï¼Œå³ä½¿æ˜¯Linuxæ–°æ‰‹ä¹Ÿå¯ä»¥æˆåŠŸéƒ¨ç½²å’Œä½¿ç”¨è¿™äº›ç«¯å£è½¬å‘æ–¹æ¡ˆã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå»ºè®®æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆï¼Œå¹¶ç»“åˆç›‘æ§å’Œæ•…éšœæ’é™¤å·¥å…·ç¡®ä¿æœåŠ¡çš„ç¨³å®šæ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ Linux ç½‘ç»œå‘½åç©ºé—´ï¼šè‡ªå·±åŠ¨æ‰‹å®ç°"è™šæ‹Ÿç½‘ç»œ"]]></title>    <link>https://juejin.cn/post/7572697146286768178</link>    <guid>https://juejin.cn/post/7572697146286768178</guid>    <pubDate>2025-11-16T01:06:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572697146286768178" data-draft-id="7572497847770398747" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ Linux ç½‘ç»œå‘½åç©ºé—´ï¼šè‡ªå·±åŠ¨æ‰‹å®ç°&quot;è™šæ‹Ÿç½‘ç»œ&quot;"/> <meta itemprop="keywords" content="Linux"/> <meta itemprop="datePublished" content="2025-11-16T01:06:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LCGå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/3097802498120889"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ Linux ç½‘ç»œå‘½åç©ºé—´ï¼šè‡ªå·±åŠ¨æ‰‹å®ç°"è™šæ‹Ÿç½‘ç»œ"
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3097802498120889/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LCGå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T01:06:55.000Z" title="Sun Nov 16 2025 01:06:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. æ¦‚è¿°</h2>
<p>Linux ç½‘ç»œå‘½åç©ºé—´æ˜¯ Linux å†…æ ¸æä¾›çš„ä¸€ç§ç½‘ç»œéš”ç¦»æœºåˆ¶ï¼Œå®ƒå…è®¸åˆ›å»ºå®Œå…¨ç‹¬ç«‹çš„ç½‘ç»œæ ˆå®ä¾‹ã€‚æ¯ä¸ªç½‘ç»œå‘½åç©ºé—´éƒ½æœ‰è‡ªå·±çš„ç½‘ç»œè®¾å¤‡ã€IP åœ°å€ã€è·¯ç”±è¡¨ã€é˜²ç«å¢™è§„åˆ™ç­‰ç½‘ç»œèµ„æºã€‚è¿™é¡¹æŠ€æœ¯æ˜¯å®¹å™¨åŒ–æŠ€æœ¯ï¼ˆå¦‚ Dockerï¼‰å’Œè™šæ‹ŸåŒ–çš„åŸºç¡€ã€‚</p>
<h2 data-id="heading-1">2. ç¯å¢ƒå‡†å¤‡</h2>
<h3 data-id="heading-2">2.1 ç³»ç»Ÿè¦æ±‚</h3>
<ul>
<li>Linux å†…æ ¸ 2.6.24 æˆ–æ›´é«˜ç‰ˆæœ¬</li>
<li>iproute2 å·¥å…·åŒ…</li>
<li>root æƒé™æˆ– sudo æƒé™</li>
</ul>
<h3 data-id="heading-3">2.2 æ£€æŸ¥ç³»ç»Ÿæ”¯æŒ</h3>
<p>åˆ›å»ºæ£€æŸ¥è„šæœ¬ <code>check_system.sh</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æ–‡ä»¶å: check_system.sh</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"=== ç³»ç»Ÿæ£€æŸ¥å¼€å§‹ ==="</span>

<span class="hljs-comment"># æ£€æŸ¥å†…æ ¸ç‰ˆæœ¬</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"1. æ£€æŸ¥å†…æ ¸ç‰ˆæœ¬:"</span>
<span class="hljs-built_in">uname</span> -r

<span class="hljs-comment"># æ£€æŸ¥ç½‘ç»œå‘½åç©ºé—´æ”¯æŒ</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n2. æ£€æŸ¥ç½‘ç»œå‘½åç©ºé—´æ”¯æŒ:"</span>
<span class="hljs-keyword">if</span> [ -e /proc/self/ns/net ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ“ ç³»ç»Ÿæ”¯æŒç½‘ç»œå‘½åç©ºé—´"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ— ç³»ç»Ÿä¸æ”¯æŒç½‘ç»œå‘½åç©ºé—´"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ£€æŸ¥ iproute2 å·¥å…·</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n3. æ£€æŸ¥ iproute2 å·¥å…·:"</span>
<span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v ip &gt; /dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ“ iproute2 å·²å®‰è£…"</span>
    ip -Version
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ— iproute2 æœªå®‰è£…ï¼Œè¯·å®‰è£…: sudo apt-get install iproute2"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ£€æŸ¥ç”¨æˆ·æƒé™</span>
<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n4. æ£€æŸ¥ç”¨æˆ·æƒé™:"</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$EUID</span>"</span> -eq 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ“ å½“å‰ä¸º root ç”¨æˆ·"</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âš  å½“å‰ä¸ºé root ç”¨æˆ·ï¼Œéƒ¨åˆ†æ“ä½œå¯èƒ½éœ€è¦ sudo"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n=== ç³»ç»Ÿæ£€æŸ¥å®Œæˆ ==="</span>
</code></pre>
<p>è¿è¡Œæ£€æŸ¥è„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x check_system.sh
./check_system.sh
</code></pre>
<h2 data-id="heading-4">3. åŸºç¡€ç½‘ç»œå‘½åç©ºé—´æ“ä½œ</h2>
<h3 data-id="heading-5">3.1 åˆ›å»ºå’Œåˆ é™¤ç½‘ç»œå‘½åç©ºé—´</h3>
<p>åˆ›å»ºåŸºç¡€æ“ä½œè„šæœ¬ <code>basic_namespace_operations.sh</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æ–‡ä»¶å: basic_namespace_operations.sh</span>

<span class="hljs-built_in">set</span> -e  <span class="hljs-comment"># é‡åˆ°é”™è¯¯ç«‹å³é€€å‡º</span>

<span class="hljs-comment"># é¢œè‰²å®šä¹‰</span>
RED=<span class="hljs-string">'\033[0;31m'</span>
GREEN=<span class="hljs-string">'\033[0;32m'</span>
YELLOW=<span class="hljs-string">'\033[1;33m'</span>
NC=<span class="hljs-string">'\033[0m'</span> <span class="hljs-comment"># No Color</span>

<span class="hljs-comment"># æ‰“å°å¸¦é¢œè‰²çš„æ¶ˆæ¯</span>
<span class="hljs-function"><span class="hljs-title">print_info</span></span>() {
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${GREEN}</span>[INFO]<span class="hljs-variable">${NC}</span> <span class="hljs-variable">$1</span>"</span>
}

<span class="hljs-function"><span class="hljs-title">print_warning</span></span>() {
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${YELLOW}</span>[WARNING]<span class="hljs-variable">${NC}</span> <span class="hljs-variable">$1</span>"</span>
}

<span class="hljs-function"><span class="hljs-title">print_error</span></span>() {
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${RED}</span>[ERROR]<span class="hljs-variable">${NC}</span> <span class="hljs-variable">$1</span>"</span>
}

<span class="hljs-comment"># åˆ›å»ºç½‘ç»œå‘½åç©ºé—´</span>
<span class="hljs-function"><span class="hljs-title">create_namespace</span></span>() {
    <span class="hljs-built_in">local</span> ns_name=<span class="hljs-variable">$1</span>
    print_info <span class="hljs-string">"åˆ›å»ºç½‘ç»œå‘½åç©ºé—´: <span class="hljs-variable">$ns_name</span>"</span>
    ip netns add <span class="hljs-variable">$ns_name</span>
    
    <span class="hljs-comment"># éªŒè¯åˆ›å»º</span>
    <span class="hljs-keyword">if</span> ip netns list | grep -q <span class="hljs-string">"<span class="hljs-variable">$ns_name</span>"</span>; <span class="hljs-keyword">then</span>
        print_info <span class="hljs-string">"âœ“ å‘½åç©ºé—´ <span class="hljs-variable">$ns_name</span> åˆ›å»ºæˆåŠŸ"</span>
    <span class="hljs-keyword">else</span>
        print_error <span class="hljs-string">"âœ— å‘½åç©ºé—´ <span class="hljs-variable">$ns_name</span> åˆ›å»ºå¤±è´¥"</span>
        <span class="hljs-built_in">exit</span> 1
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># åœ¨å‘½åç©ºé—´ä¸­æ‰§è¡Œå‘½ä»¤</span>
<span class="hljs-function"><span class="hljs-title">exec_in_namespace</span></span>() {
    <span class="hljs-built_in">local</span> ns_name=<span class="hljs-variable">$1</span>
    <span class="hljs-built_in">local</span> <span class="hljs-built_in">command</span>=<span class="hljs-variable">$2</span>
    print_info <span class="hljs-string">"åœ¨å‘½åç©ºé—´ <span class="hljs-variable">$ns_name</span> ä¸­æ‰§è¡Œ: <span class="hljs-variable">$command</span>"</span>
    ip netns <span class="hljs-built_in">exec</span> <span class="hljs-variable">$ns_name</span> <span class="hljs-variable">$command</span>
}

<span class="hljs-comment"># æ˜¾ç¤ºå‘½åç©ºé—´ç½‘ç»œä¿¡æ¯</span>
<span class="hljs-function"><span class="hljs-title">show_namespace_network</span></span>() {
    <span class="hljs-built_in">local</span> ns_name=<span class="hljs-variable">$1</span>
    print_info <span class="hljs-string">"=== å‘½åç©ºé—´ <span class="hljs-variable">$ns_name</span> çš„ç½‘ç»œä¿¡æ¯ ==="</span>
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ç½‘ç»œæ¥å£:"</span>
    exec_in_namespace <span class="hljs-variable">$ns_name</span> <span class="hljs-string">"ip link show"</span>
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nIP åœ°å€:"</span>
    exec_in_namespace <span class="hljs-variable">$ns_name</span> <span class="hljs-string">"ip addr show"</span>
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nè·¯ç”±è¡¨:"</span>
    exec_in_namespace <span class="hljs-variable">$ns_name</span> <span class="hljs-string">"ip route show"</span>
}

<span class="hljs-comment"># åˆ é™¤ç½‘ç»œå‘½åç©ºé—´</span>
<span class="hljs-function"><span class="hljs-title">delete_namespace</span></span>() {
    <span class="hljs-built_in">local</span> ns_name=<span class="hljs-variable">$1</span>
    print_info <span class="hljs-string">"åˆ é™¤ç½‘ç»œå‘½åç©ºé—´: <span class="hljs-variable">$ns_name</span>"</span>
    ip netns delete <span class="hljs-variable">$ns_name</span>
    
    <span class="hljs-comment"># éªŒè¯åˆ é™¤</span>
    <span class="hljs-keyword">if</span> ! ip netns list | grep -q <span class="hljs-string">"<span class="hljs-variable">$ns_name</span>"</span>; <span class="hljs-keyword">then</span>
        print_info <span class="hljs-string">"âœ“ å‘½åç©ºé—´ <span class="hljs-variable">$ns_name</span> åˆ é™¤æˆåŠŸ"</span>
    <span class="hljs-keyword">else</span>
        print_error <span class="hljs-string">"âœ— å‘½åç©ºé—´ <span class="hljs-variable">$ns_name</span> åˆ é™¤å¤±è´¥"</span>
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># ä¸»å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-title">main</span></span>() {
    print_info <span class="hljs-string">"å¼€å§‹åŸºç¡€ç½‘ç»œå‘½åç©ºé—´æ“ä½œæ¼”ç¤º"</span>
    
    <span class="hljs-comment"># åˆ›å»ºä¸¤ä¸ªæµ‹è¯•å‘½åç©ºé—´</span>
    create_namespace <span class="hljs-string">"ns1"</span>
    create_namespace <span class="hljs-string">"ns2"</span>
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n"</span>
    print_info <span class="hljs-string">"å½“å‰æ‰€æœ‰ç½‘ç»œå‘½åç©ºé—´:"</span>
    ip netns list
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n"</span>
    <span class="hljs-comment"># æ˜¾ç¤ºé»˜è®¤å‘½åç©ºé—´ä¿¡æ¯</span>
    print_info <span class="hljs-string">"=== é»˜è®¤å‘½åç©ºé—´ç½‘ç»œä¿¡æ¯ ==="</span>
    ip <span class="hljs-built_in">link</span> show
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n"</span>
    ip addr show
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n"</span>
    ip route show
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n"</span>
    <span class="hljs-comment"># æ˜¾ç¤ºæ–°åˆ›å»ºçš„å‘½åç©ºé—´ä¿¡æ¯</span>
    show_namespace_network <span class="hljs-string">"ns1"</span>
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n"</span>
    show_namespace_network <span class="hljs-string">"ns2"</span>
    
    <span class="hljs-comment"># æ¸…ç†</span>
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n"</span>
    delete_namespace <span class="hljs-string">"ns1"</span>
    delete_namespace <span class="hljs-string">"ns2"</span>
    
    print_info <span class="hljs-string">"åŸºç¡€ç½‘ç»œå‘½åç©ºé—´æ“ä½œæ¼”ç¤ºå®Œæˆ"</span>
}

<span class="hljs-comment"># æ‰§è¡Œä¸»å‡½æ•°</span>
main <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
</code></pre>
<p>è¿è¡ŒåŸºç¡€æ“ä½œè„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x basic_namespace_operations.sh
sudo ./basic_namespace_operations.sh
</code></pre>
<h2 data-id="heading-6">4. åˆ›å»ºè™šæ‹Ÿç½‘ç»œè®¾å¤‡</h2>
<h3 data-id="heading-7">4.1 åˆ›å»º veth pair</h3>
<p>vethï¼ˆè™šæ‹Ÿä»¥å¤ªç½‘è®¾å¤‡ï¼‰æ€»æ˜¯æˆå¯¹å‡ºç°ï¼Œç”¨äºè¿æ¥ä¸åŒçš„ç½‘ç»œå‘½åç©ºé—´ã€‚</p>
<p>åˆ›å»º veth é…ç½®è„šæœ¬ <code>create_veth_network.sh</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æ–‡ä»¶å: create_veth_network.sh</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-comment"># é¢œè‰²å®šä¹‰</span>
GREEN=<span class="hljs-string">'\033[0;32m'</span>
YELLOW=<span class="hljs-string">'\033[1;33m'</span>
BLUE=<span class="hljs-string">'\033[0;34m'</span>
NC=<span class="hljs-string">'\033[0m'</span>

<span class="hljs-function"><span class="hljs-title">print_info</span></span>() { <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${GREEN}</span>[INFO]<span class="hljs-variable">${NC}</span> <span class="hljs-variable">$1</span>"</span>; }
<span class="hljs-function"><span class="hljs-title">print_warning</span></span>() { <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${YELLOW}</span>[WARNING]<span class="hljs-variable">${NC}</span> <span class="hljs-variable">$1</span>"</span>; }
<span class="hljs-function"><span class="hljs-title">print_step</span></span>() { <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${BLUE}</span>[STEP]<span class="hljs-variable">${NC}</span> <span class="hljs-variable">$1</span>"</span>; }

<span class="hljs-comment"># æ¸…ç†å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-title">cleanup</span></span>() {
    print_info <span class="hljs-string">"æ‰§è¡Œæ¸…ç†æ“ä½œ..."</span>
    
    <span class="hljs-comment"># åˆ é™¤å‘½åç©ºé—´ï¼ˆå¦‚æœå­˜åœ¨ï¼‰</span>
    <span class="hljs-keyword">for</span> ns <span class="hljs-keyword">in</span> ns1 ns2; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> ip netns list | grep -q <span class="hljs-string">"<span class="hljs-variable">$ns</span>"</span>; <span class="hljs-keyword">then</span>
            ip netns delete <span class="hljs-variable">$ns</span> 2&gt;/dev/null || <span class="hljs-literal">true</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>
    
    <span class="hljs-comment"># åˆ é™¤ veth è®¾å¤‡ï¼ˆå¦‚æœå­˜åœ¨ï¼‰</span>
    ip <span class="hljs-built_in">link</span> delete veth1 2&gt;/dev/null || <span class="hljs-literal">true</span>
    ip <span class="hljs-built_in">link</span> delete veth1-br 2&gt;/dev/null || <span class="hljs-literal">true</span>
    ip <span class="hljs-built_in">link</span> delete veth2 2&gt;/dev/null || <span class="hljs-literal">true</span>
    ip <span class="hljs-built_in">link</span> delete veth2-br 2&gt;/dev/null || <span class="hljs-literal">true</span>
    ip <span class="hljs-built_in">link</span> delete br0 2&gt;/dev/null || <span class="hljs-literal">true</span>
}

<span class="hljs-comment"># æ•è·é€€å‡ºä¿¡å·</span>
<span class="hljs-built_in">trap</span> cleanup EXIT

<span class="hljs-function"><span class="hljs-title">main</span></span>() {
    print_info <span class="hljs-string">"å¼€å§‹åˆ›å»ºè™šæ‹Ÿç½‘ç»œ..."</span>
    
    <span class="hljs-comment"># æ­¥éª¤1: åˆ›å»ºç½‘ç»œå‘½åç©ºé—´</span>
    print_step <span class="hljs-string">"1. åˆ›å»ºç½‘ç»œå‘½åç©ºé—´"</span>
    ip netns add ns1
    ip netns add ns2
    print_info <span class="hljs-string">"âœ“ åˆ›å»ºå‘½åç©ºé—´: ns1, ns2"</span>
    
    <span class="hljs-comment"># æ­¥éª¤2: åˆ›å»ºç¬¬ä¸€å¯¹ veth</span>
    print_step <span class="hljs-string">"2. åˆ›å»º veth pair: veth1 &lt;-&gt; veth1-br"</span>
    ip <span class="hljs-built_in">link</span> add veth1 <span class="hljs-built_in">type</span> veth peer name veth1-br
    print_info <span class="hljs-string">"âœ“ åˆ›å»º veth pair: veth1 &lt;-&gt; veth1-br"</span>
    
    <span class="hljs-comment"># æ­¥éª¤3: åˆ›å»ºç¬¬äºŒå¯¹ veth</span>
    print_step <span class="hljs-string">"3. åˆ›å»º veth pair: veth2 &lt;-&gt; veth2-br"</span>
    ip <span class="hljs-built_in">link</span> add veth2 <span class="hljs-built_in">type</span> veth peer name veth2-br
    print_info <span class="hljs-string">"âœ“ åˆ›å»º veth pair: veth2 &lt;-&gt; veth2-br"</span>
    
    <span class="hljs-comment"># æ­¥éª¤4: å°† veth è®¾å¤‡ç§»åŠ¨åˆ°å¯¹åº”çš„å‘½åç©ºé—´</span>
    print_step <span class="hljs-string">"4. ç§»åŠ¨ veth è®¾å¤‡åˆ°å‘½åç©ºé—´"</span>
    ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> veth1 netns ns1
    ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> veth2 netns ns2
    print_info <span class="hljs-string">"âœ“ veth1 ç§»åŠ¨åˆ° ns1"</span>
    print_info <span class="hljs-string">"âœ“ veth2 ç§»åŠ¨åˆ° ns2"</span>
    
    <span class="hljs-comment"># æ­¥éª¤5: åœ¨å‘½åç©ºé—´ä¸­é…ç½®ç½‘ç»œæ¥å£</span>
    print_step <span class="hljs-string">"5. é…ç½®å‘½åç©ºé—´ä¸­çš„ç½‘ç»œæ¥å£"</span>
    
    <span class="hljs-comment"># é…ç½® ns1 ä¸­çš„ veth1</span>
    ip netns <span class="hljs-built_in">exec</span> ns1 ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> lo up
    ip netns <span class="hljs-built_in">exec</span> ns1 ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> veth1 up
    ip netns <span class="hljs-built_in">exec</span> ns1 ip addr add 10.0.1.10/24 dev veth1
    print_info <span class="hljs-string">"âœ“ ns1: veth1 é…ç½® IP 10.0.1.10/24"</span>
    
    <span class="hljs-comment"># é…ç½® ns2 ä¸­çš„ veth2</span>
    ip netns <span class="hljs-built_in">exec</span> ns2 ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> lo up
    ip netns <span class="hljs-built_in">exec</span> ns2 ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> veth2 up
    ip netns <span class="hljs-built_in">exec</span> ns2 ip addr add 10.0.1.20/24 dev veth2
    print_info <span class="hljs-string">"âœ“ ns2: veth2 é…ç½® IP 10.0.1.20/24"</span>
    
    <span class="hljs-comment"># æ­¥éª¤6: æµ‹è¯•è¿é€šæ€§</span>
    print_step <span class="hljs-string">"6. æµ‹è¯•ç›´æ¥è¿é€šæ€§"</span>
    
    <span class="hljs-comment"># ç”±äºæ²¡æœ‰æ¡¥æ¥ï¼Œæ­¤æ—¶åº”è¯¥æ— æ³•è¿é€š</span>
    print_info <span class="hljs-string">"æµ‹è¯• ns1 -&gt; ns2 è¿é€šæ€§:"</span>
    <span class="hljs-keyword">if</span> ip netns <span class="hljs-built_in">exec</span> ns1 ping -c 2 -W 1 10.0.1.20 &gt;/dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
        print_info <span class="hljs-string">"âœ“ ns1 å¯ä»¥ ping é€š ns2"</span>
    <span class="hljs-keyword">else</span>
        print_warning <span class="hljs-string">"âœ— ns1 æ— æ³• ping é€š ns2 (æ­£å¸¸ï¼Œå› ä¸ºå°šæœªæ¡¥æ¥)"</span>
    <span class="hljs-keyword">fi</span>
    
    <span class="hljs-comment"># æ˜¾ç¤ºç½‘ç»œé…ç½®</span>
    print_step <span class="hljs-string">"7. æ˜¾ç¤ºå½“å‰ç½‘ç»œé…ç½®"</span>
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\né»˜è®¤å‘½åç©ºé—´æ¥å£:"</span>
    ip <span class="hljs-built_in">link</span> show | grep -E <span class="hljs-string">"(veth|br)"</span>
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nns1 ç½‘ç»œé…ç½®:"</span>
    ip netns <span class="hljs-built_in">exec</span> ns1 ip addr show
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nns2 ç½‘ç»œé…ç½®:"</span>
    ip netns <span class="hljs-built_in">exec</span> ns2 ip addr show
    
    print_info <span class="hljs-string">"è™šæ‹Ÿç½‘ç»œåˆ›å»ºå®Œæˆï¼"</span>
    print_warning <span class="hljs-string">"æ³¨æ„: ç”±äºæ²¡æœ‰æ¡¥æ¥è®¾å¤‡ï¼Œå‘½åç©ºé—´ä¹‹é—´ç›®å‰æ— æ³•é€šä¿¡"</span>
}

main <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
</code></pre>
<p>è¿è¡Œ veth åˆ›å»ºè„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x create_veth_network.sh
sudo ./create_veth_network.sh
</code></pre>
<h2 data-id="heading-8">5. æ„å»ºå®Œæ•´è™šæ‹Ÿç½‘ç»œ</h2>
<h3 data-id="heading-9">5.1 ä½¿ç”¨ Linux ç½‘æ¡¥è¿æ¥å¤šä¸ªå‘½åç©ºé—´</h3>
<p>åˆ›å»ºå®Œæ•´çš„è™šæ‹Ÿç½‘ç»œè„šæœ¬ <code>create_complete_network.sh</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æ–‡ä»¶å: create_complete_network.sh</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-comment"># é¢œè‰²å®šä¹‰</span>
GREEN=<span class="hljs-string">'\033[0;32m'</span>
YELLOW=<span class="hljs-string">'\033[1;33m'</span>
BLUE=<span class="hljs-string">'\033[0;34m'</span>
RED=<span class="hljs-string">'\033[0;31m'</span>
NC=<span class="hljs-string">'\033[0m'</span>

<span class="hljs-function"><span class="hljs-title">print_info</span></span>() { <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${GREEN}</span>[INFO]<span class="hljs-variable">${NC}</span> <span class="hljs-variable">$1</span>"</span>; }
<span class="hljs-function"><span class="hljs-title">print_warning</span></span>() { <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${YELLOW}</span>[WARNING]<span class="hljs-variable">${NC}</span> <span class="hljs-variable">$1</span>"</span>; }
<span class="hljs-function"><span class="hljs-title">print_step</span></span>() { <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${BLUE}</span>[STEP]<span class="hljs-variable">${NC}</span> <span class="hljs-variable">$1</span>"</span>; }
<span class="hljs-function"><span class="hljs-title">print_error</span></span>() { <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${RED}</span>[ERROR]<span class="hljs-variable">${NC}</span> <span class="hljs-variable">$1</span>"</span>; }

<span class="hljs-comment"># ç½‘ç»œé…ç½®</span>
BRIDGE_NAME=<span class="hljs-string">"br0"</span>
BRIDGE_IP=<span class="hljs-string">"10.0.1.1/24"</span>
NS1_IP=<span class="hljs-string">"10.0.1.10/24"</span>
NS2_IP=<span class="hljs-string">"10.0.1.20/24"</span>
NS3_IP=<span class="hljs-string">"10.0.1.30/24"</span>

<span class="hljs-comment"># æ¸…ç†å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-title">cleanup</span></span>() {
    print_info <span class="hljs-string">"æ‰§è¡Œæ¸…ç†æ“ä½œ..."</span>
    
    <span class="hljs-comment"># åˆ é™¤å‘½åç©ºé—´</span>
    <span class="hljs-keyword">for</span> ns <span class="hljs-keyword">in</span> ns1 ns2 ns3; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> ip netns list | grep -q <span class="hljs-string">"<span class="hljs-variable">$ns</span>"</span>; <span class="hljs-keyword">then</span>
            ip netns delete <span class="hljs-variable">$ns</span> 2&gt;/dev/null || <span class="hljs-literal">true</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>
    
    <span class="hljs-comment"># åˆ é™¤ç½‘ç»œæ¥å£</span>
    <span class="hljs-keyword">for</span> iface <span class="hljs-keyword">in</span> veth1 veth1-br veth2 veth2-br veth3 veth3-br <span class="hljs-variable">$BRIDGE_NAME</span>; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> ip <span class="hljs-built_in">link</span> show <span class="hljs-variable">$iface</span> &gt;/dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
            ip <span class="hljs-built_in">link</span> delete <span class="hljs-variable">$iface</span> 2&gt;/dev/null || <span class="hljs-literal">true</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>
    
    <span class="hljs-comment"># æ¸…ç† iptables è§„åˆ™</span>
    iptables -t nat -D POSTROUTING -s 10.0.1.0/24 -j MASQUERADE 2&gt;/dev/null || <span class="hljs-literal">true</span>
}

<span class="hljs-built_in">trap</span> cleanup EXIT

<span class="hljs-comment"># æµ‹è¯•è¿é€šæ€§</span>
<span class="hljs-function"><span class="hljs-title">test_connectivity</span></span>() {
    <span class="hljs-built_in">local</span> source_ns=<span class="hljs-variable">$1</span>
    <span class="hljs-built_in">local</span> target_ip=<span class="hljs-variable">$2</span>
    <span class="hljs-built_in">local</span> test_name=<span class="hljs-variable">$3</span>
    
    print_info <span class="hljs-string">"æµ‹è¯• <span class="hljs-variable">$test_name</span>: <span class="hljs-variable">$source_ns</span> -&gt; <span class="hljs-variable">$target_ip</span>"</span>
    <span class="hljs-keyword">if</span> ip netns <span class="hljs-built_in">exec</span> <span class="hljs-variable">$source_ns</span> ping -c 2 -W 1 <span class="hljs-variable">$target_ip</span> &gt;/dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
        print_info <span class="hljs-string">"âœ“ <span class="hljs-variable">$test_name</span> æˆåŠŸ"</span>
        <span class="hljs-built_in">return</span> 0
    <span class="hljs-keyword">else</span>
        print_error <span class="hljs-string">"âœ— <span class="hljs-variable">$test_name</span> å¤±è´¥"</span>
        <span class="hljs-built_in">return</span> 1
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-function"><span class="hljs-title">main</span></span>() {
    print_info <span class="hljs-string">"å¼€å§‹åˆ›å»ºå®Œæ•´è™šæ‹Ÿç½‘ç»œ..."</span>
    
    <span class="hljs-comment"># æ­¥éª¤1: åˆ›å»ºç½‘ç»œå‘½åç©ºé—´</span>
    print_step <span class="hljs-string">"1. åˆ›å»ºä¸‰ä¸ªç½‘ç»œå‘½åç©ºé—´"</span>
    <span class="hljs-keyword">for</span> ns <span class="hljs-keyword">in</span> ns1 ns2 ns3; <span class="hljs-keyword">do</span>
        ip netns add <span class="hljs-variable">$ns</span>
        print_info <span class="hljs-string">"âœ“ åˆ›å»ºå‘½åç©ºé—´: <span class="hljs-variable">$ns</span>"</span>
    <span class="hljs-keyword">done</span>
    
    <span class="hljs-comment"># æ­¥éª¤2: åˆ›å»º Linux ç½‘æ¡¥</span>
    print_step <span class="hljs-string">"2. åˆ›å»º Linux ç½‘æ¡¥: <span class="hljs-variable">$BRIDGE_NAME</span>"</span>
    ip <span class="hljs-built_in">link</span> add name <span class="hljs-variable">$BRIDGE_NAME</span> <span class="hljs-built_in">type</span> bridge
    ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> <span class="hljs-variable">$BRIDGE_NAME</span> up
    ip addr add <span class="hljs-variable">$BRIDGE_IP</span> dev <span class="hljs-variable">$BRIDGE_NAME</span>
    print_info <span class="hljs-string">"âœ“ ç½‘æ¡¥ <span class="hljs-variable">$BRIDGE_NAME</span> åˆ›å»ºå¹¶å¯åŠ¨ï¼ŒIP: <span class="hljs-variable">$BRIDGE_IP</span>"</span>
    
    <span class="hljs-comment"># æ­¥éª¤3: åˆ›å»ºå¹¶é…ç½® veth pair</span>
    print_step <span class="hljs-string">"3. åˆ›å»ºå’Œé…ç½® veth pair"</span>
    
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> 1 2 3; <span class="hljs-keyword">do</span>
        <span class="hljs-comment"># åˆ›å»º veth pair</span>
        ip <span class="hljs-built_in">link</span> add veth<span class="hljs-variable">$i</span> <span class="hljs-built_in">type</span> veth peer name veth<span class="hljs-variable">$i</span>-br
        print_info <span class="hljs-string">"âœ“ åˆ›å»º veth pair: veth<span class="hljs-variable">$i</span> &lt;-&gt; veth<span class="hljs-variable">$i</span>-br"</span>
        
        <span class="hljs-comment"># å°† veth ä¸€ç«¯ç§»åŠ¨åˆ°å‘½åç©ºé—´</span>
        ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> veth<span class="hljs-variable">$i</span> netns ns<span class="hljs-variable">$i</span>
        print_info <span class="hljs-string">"âœ“ veth<span class="hljs-variable">$i</span> ç§»åŠ¨åˆ° ns<span class="hljs-variable">$i</span>"</span>
        
        <span class="hljs-comment"># å°† veth å¦ä¸€ç«¯è¿æ¥åˆ°ç½‘æ¡¥</span>
        ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> veth<span class="hljs-variable">$i</span>-br master <span class="hljs-variable">$BRIDGE_NAME</span>
        ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> veth<span class="hljs-variable">$i</span>-br up
        print_info <span class="hljs-string">"âœ“ veth<span class="hljs-variable">$i</span>-br è¿æ¥åˆ°ç½‘æ¡¥ <span class="hljs-variable">$BRIDGE_NAME</span>"</span>
        
        <span class="hljs-comment"># é…ç½®å‘½åç©ºé—´ä¸­çš„ç½‘ç»œ</span>
        ip netns <span class="hljs-built_in">exec</span> ns<span class="hljs-variable">$i</span> ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> lo up
        ip netns <span class="hljs-built_in">exec</span> ns<span class="hljs-variable">$i</span> ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> veth<span class="hljs-variable">$i</span> up
        
        <span class="hljs-comment"># åˆ†é… IP åœ°å€</span>
        <span class="hljs-keyword">case</span> <span class="hljs-variable">$i</span> <span class="hljs-keyword">in</span>
            1) ip netns <span class="hljs-built_in">exec</span> ns<span class="hljs-variable">$i</span> ip addr add <span class="hljs-variable">$NS1_IP</span> dev veth<span class="hljs-variable">$i</span> ;;
            2) ip netns <span class="hljs-built_in">exec</span> ns<span class="hljs-variable">$i</span> ip addr add <span class="hljs-variable">$NS2_IP</span> dev veth<span class="hljs-variable">$i</span> ;;
            3) ip netns <span class="hljs-built_in">exec</span> ns<span class="hljs-variable">$i</span> ip addr add <span class="hljs-variable">$NS3_IP</span> dev veth<span class="hljs-variable">$i</span> ;;
        <span class="hljs-keyword">esac</span>
        
        print_info <span class="hljs-string">"âœ“ ns<span class="hljs-variable">$i</span>: veth<span class="hljs-variable">$i</span> é…ç½®å®Œæˆ"</span>
    <span class="hljs-keyword">done</span>
    
    <span class="hljs-comment"># æ­¥éª¤4: é…ç½®é»˜è®¤ç½‘å…³</span>
    print_step <span class="hljs-string">"4. é…ç½®é»˜è®¤ç½‘å…³"</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> 1 2 3; <span class="hljs-keyword">do</span>
        ip netns <span class="hljs-built_in">exec</span> ns<span class="hljs-variable">$i</span> ip route add default via 10.0.1.1 dev veth<span class="hljs-variable">$i</span>
        print_info <span class="hljs-string">"âœ“ ns<span class="hljs-variable">$i</span> é»˜è®¤ç½‘å…³: 10.0.1.1"</span>
    <span class="hljs-keyword">done</span>
    
    <span class="hljs-comment"># æ­¥éª¤5: å¯ç”¨ IP è½¬å‘å’Œ NAT</span>
    print_step <span class="hljs-string">"5. é…ç½®ç³»ç»Ÿç½‘ç»œè®¾ç½®"</span>
    <span class="hljs-built_in">echo</span> 1 &gt; /proc/sys/net/ipv4/ip_forward
    iptables -t nat -A POSTROUTING -s 10.0.1.0/24 -j MASQUERADE
    print_info <span class="hljs-string">"âœ“ å¯ç”¨ IPv4 è½¬å‘"</span>
    print_info <span class="hljs-string">"âœ“ é…ç½® NAT MASQUERADE"</span>
    
    <span class="hljs-comment"># æ­¥éª¤6: æµ‹è¯•ç½‘ç»œè¿é€šæ€§</span>
    print_step <span class="hljs-string">"6. æµ‹è¯•ç½‘ç»œè¿é€šæ€§"</span>
    
    <span class="hljs-comment"># æµ‹è¯•ç½‘æ¡¥å†…éƒ¨é€šä¿¡</span>
    test_connectivity <span class="hljs-string">"ns1"</span> <span class="hljs-string">"10.0.1.20"</span> <span class="hljs-string">"å†…éƒ¨é€šä¿¡ ns1-&gt;ns2"</span>
    test_connectivity <span class="hljs-string">"ns1"</span> <span class="hljs-string">"10.0.1.30"</span> <span class="hljs-string">"å†…éƒ¨é€šä¿¡ ns1-&gt;ns3"</span>
    test_connectivity <span class="hljs-string">"ns2"</span> <span class="hljs-string">"10.0.1.10"</span> <span class="hljs-string">"å†…éƒ¨é€šä¿¡ ns2-&gt;ns1"</span>
    test_connectivity <span class="hljs-string">"ns3"</span> <span class="hljs-string">"10.0.1.10"</span> <span class="hljs-string">"å†…éƒ¨é€šä¿¡ ns3-&gt;ns1"</span>
    
    <span class="hljs-comment"># æµ‹è¯•ç½‘å…³å¯è¾¾æ€§</span>
    test_connectivity <span class="hljs-string">"ns1"</span> <span class="hljs-string">"10.0.1.1"</span> <span class="hljs-string">"ç½‘å…³å¯è¾¾æ€§"</span>
    
    <span class="hljs-comment"># æ­¥éª¤7: æ˜¾ç¤ºç½‘ç»œæ‹“æ‰‘ä¿¡æ¯</span>
    print_step <span class="hljs-string">"7. æ˜¾ç¤ºç½‘ç»œæ‹“æ‰‘ä¿¡æ¯"</span>
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n<span class="hljs-variable">${BLUE}</span>=== ç½‘ç»œæ‹“æ‰‘æ‘˜è¦ ===<span class="hljs-variable">${NC}</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ç½‘æ¡¥: <span class="hljs-variable">$BRIDGE_NAME</span> (IP: <span class="hljs-variable">$BRIDGE_IP</span>)"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"å‘½åç©ºé—´:"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"  ns1: veth1 (IP: <span class="hljs-variable">$NS1_IP</span>)"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"  ns2: veth2 (IP: <span class="hljs-variable">$NS2_IP</span>)"</span> 
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"  ns3: veth3 (IP: <span class="hljs-variable">$NS3_IP</span>)"</span>
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n<span class="hljs-variable">${BLUE}</span>=== ç½‘æ¡¥ä¿¡æ¯ ===<span class="hljs-variable">${NC}</span>"</span>
    brctl show <span class="hljs-variable">$BRIDGE_NAME</span>
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n<span class="hljs-variable">${BLUE}</span>=== è¯¦ç»†æ¥å£ä¿¡æ¯ ===<span class="hljs-variable">${NC}</span>"</span>
    <span class="hljs-keyword">for</span> ns <span class="hljs-keyword">in</span> ns1 ns2 ns3; <span class="hljs-keyword">do</span>
        <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nå‘½åç©ºé—´ <span class="hljs-variable">$ns</span>:"</span>
        ip netns <span class="hljs-built_in">exec</span> <span class="hljs-variable">$ns</span> ip addr show | grep -E <span class="hljs-string">"(inet|veth)"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"è·¯ç”±è¡¨:"</span>
        ip netns <span class="hljs-built_in">exec</span> <span class="hljs-variable">$ns</span> ip route show
    <span class="hljs-keyword">done</span>
    
    print_info <span class="hljs-string">"å®Œæ•´è™šæ‹Ÿç½‘ç»œåˆ›å»ºæˆåŠŸï¼"</span>
    print_warning <span class="hljs-string">"è¾“å…¥ 'sudo ./cleanup_network.sh' æ¥æ¸…ç†ç½‘ç»œ"</span>
}

main <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
</code></pre>
<p>è¿è¡Œå®Œæ•´ç½‘ç»œåˆ›å»ºè„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x create_complete_network.sh
sudo ./create_complete_network.sh
</code></pre>
<h3 data-id="heading-10">5.2 ç½‘ç»œæ‹“æ‰‘å¯è§†åŒ–</h3>
<p>åˆ›å»ºç½‘ç»œæ‹“æ‰‘å›¾ç”Ÿæˆè„šæœ¬ <code>generate_network_diagram.sh</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æ–‡ä»¶å: generate_network_diagram.sh</span>

<span class="hljs-built_in">cat</span> &gt; network_topology.md &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment"># è™šæ‹Ÿç½‘ç»œæ‹“æ‰‘å›¾</span>

```mermaid
graph TB
    %% æ ·å¼å®šä¹‰
    classDef default fill:<span class="hljs-comment">#1e1e1e,stroke:#666,stroke-width:2px,color:#fff;</span>
    classDef namespace fill:<span class="hljs-comment">#2d5a78,stroke:#4ca1cf,stroke-width:2px,color:#fff;</span>
    classDef bridge fill:<span class="hljs-comment">#5d3a6a,stroke:#b57edc,stroke-width:2px,color:#fff;</span>
    classDef veth fill:<span class="hljs-comment">#356635,stroke:#6bc36b,stroke-width:2px,color:#fff;</span>
    
    %% ç½‘æ¡¥
    br0[br0&lt;br/&gt;10.0.1.1/24]:::bridge
    
    %% å‘½åç©ºé—´1
    subgraph ns1[ç½‘ç»œå‘½åç©ºé—´ ns1]
        veth1_ns[veth1&lt;br/&gt;10.0.1.10/24]:::veth
    end
    
    %% å‘½åç©ºé—´2  
    subgraph ns2[ç½‘ç»œå‘½åç©ºé—´ ns2]
        veth2_ns[veth2&lt;br/&gt;10.0.1.20/24]:::veth
    end
    
    %% å‘½åç©ºé—´3
    subgraph ns3[ç½‘ç»œå‘½åç©ºé—´ ns3]
        veth3_ns[veth3&lt;br/&gt;10.0.1.30/24]:::veth
    end
    
    %% è¿æ¥å…³ç³»
    veth1_ns -.-&gt;|veth pair| veth1_br
    veth2_ns -.-&gt;|veth pair| veth2_br  
    veth3_ns -.-&gt;|veth pair| veth3_br
    
    veth1_br --&gt; br0
    veth2_br --&gt; br0
    veth3_br --&gt; br0
    
    %% éšè—çš„æ¡¥æ¥ç«¯
    veth1_br:::veth
    veth2_br:::veth
    veth3_br:::veth
    
    %% æ ·å¼åº”ç”¨
    class ns1,ns2,ns3 namespace;
</code></pre>
<h2 data-id="heading-11">æ•°æ®æµè·¯å¾„</h2>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    A[å¤–éƒ¨ç½‘ç»œ] &lt;--&gt; B[ç‰©ç†æ¥å£ eth0]
    B &lt;--&gt; C[Linux ä¸»æœºè·¯ç”±]
    C &lt;--&gt; D{NAT è½¬æ¢iptables}
    D &lt;--&gt; E[ç½‘æ¡¥ br0 10.0.1.1/24]
    
    E &lt;--&gt; F[veth1-br]
    F &lt;-.-&gt; G[veth1 10.0.1.10/24]
    G &lt;--&gt; H[ns1 åº”ç”¨]
    
    E &lt;--&gt; I[veth2-br]  
    I &lt;-.-&gt; J[veth2 10.0.1.20/24]
    J &lt;--&gt; K[ns2 åº”ç”¨]
    
    E &lt;--&gt; L[veth3-br]
    L &lt;-.-&gt; M[veth3 10.0.1.30/24]
    M &lt;--&gt; N[ns3 åº”ç”¨]
    
   
</code></pre>
<p>EOF</p>
<p>echo "ç½‘ç»œæ‹“æ‰‘å›¾å·²ç”Ÿæˆåˆ° network_topology.md"
echo "å¯ä»¥ä½¿ç”¨æ”¯æŒ Mermaid çš„ Markdown æŸ¥çœ‹å™¨æŸ¥çœ‹å›¾è¡¨"</p>
<p>è¿è¡Œæ‹“æ‰‘å›¾ç”Ÿæˆè„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x generate_network_diagram.sh
./generate_network_diagram.sh
</code></pre>
<h2 data-id="heading-12">6. é«˜çº§ç½‘ç»œé…ç½®</h2>
<h3 data-id="heading-13">6.1 VLAN éš”ç¦»é…ç½®</h3>
<p>åˆ›å»º VLAN é…ç½®è„šæœ¬ <code>configure_vlan.sh</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æ–‡ä»¶å: configure_vlan.sh</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-comment"># é¢œè‰²å®šä¹‰</span>
GREEN=<span class="hljs-string">'\033[0;32m'</span>
BLUE=<span class="hljs-string">'\033[0;34m'</span>
NC=<span class="hljs-string">'\033[0m'</span>

<span class="hljs-function"><span class="hljs-title">print_info</span></span>() { <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${GREEN}</span>[INFO]<span class="hljs-variable">${NC}</span> <span class="hljs-variable">$1</span>"</span>; }
<span class="hljs-function"><span class="hljs-title">print_step</span></span>() { <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${BLUE}</span>[STEP]<span class="hljs-variable">${NC}</span> <span class="hljs-variable">$1</span>"</span>; }

<span class="hljs-function"><span class="hljs-title">cleanup</span></span>() {
    print_info <span class="hljs-string">"æ¸…ç† VLAN é…ç½®..."</span>
    
    <span class="hljs-comment"># åˆ é™¤å‘½åç©ºé—´</span>
    <span class="hljs-keyword">for</span> ns <span class="hljs-keyword">in</span> vlan10-ns1 vlan10-ns2 vlan20-ns1 vlan20-ns2; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> ip netns list | grep -q <span class="hljs-string">"<span class="hljs-variable">$ns</span>"</span>; <span class="hljs-keyword">then</span>
            ip netns delete <span class="hljs-variable">$ns</span> 2&gt;/dev/null || <span class="hljs-literal">true</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>
    
    <span class="hljs-comment"># åˆ é™¤ VLAN æ¥å£å’Œç½‘æ¡¥</span>
    <span class="hljs-keyword">for</span> br <span class="hljs-keyword">in</span> br-vlan10 br-vlan20; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> ip <span class="hljs-built_in">link</span> show <span class="hljs-variable">$br</span> &gt;/dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
            ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> <span class="hljs-variable">$br</span> down
            ip <span class="hljs-built_in">link</span> delete <span class="hljs-variable">$br</span> 2&gt;/dev/null || <span class="hljs-literal">true</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>
    
    <span class="hljs-comment"># åˆ é™¤ç‰©ç†æ¥å£ä¸Šçš„ VLAN</span>
    <span class="hljs-keyword">for</span> vlan <span class="hljs-keyword">in</span> 10 20; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">if</span> ip <span class="hljs-built_in">link</span> show eth0.<span class="hljs-variable">$vlan</span> &gt;/dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
            ip <span class="hljs-built_in">link</span> delete eth0.<span class="hljs-variable">$vlan</span> 2&gt;/dev/null || <span class="hljs-literal">true</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">done</span>
}

<span class="hljs-built_in">trap</span> cleanup EXIT

<span class="hljs-function"><span class="hljs-title">main</span></span>() {
    print_info <span class="hljs-string">"å¼€å§‹é…ç½® VLAN ç½‘ç»œ..."</span>
    
    <span class="hljs-comment"># æ­¥éª¤1: åˆ›å»ºå‘½åç©ºé—´</span>
    print_step <span class="hljs-string">"1. åˆ›å»º VLAN å‘½åç©ºé—´"</span>
    <span class="hljs-keyword">for</span> ns <span class="hljs-keyword">in</span> vlan10-ns1 vlan10-ns2 vlan20-ns1 vlan20-ns2; <span class="hljs-keyword">do</span>
        ip netns add <span class="hljs-variable">$ns</span>
        print_info <span class="hljs-string">"âœ“ åˆ›å»ºå‘½åç©ºé—´: <span class="hljs-variable">$ns</span>"</span>
    <span class="hljs-keyword">done</span>
    
    <span class="hljs-comment"># æ­¥éª¤2: åˆ›å»º VLAN ç½‘æ¡¥</span>
    print_step <span class="hljs-string">"2. åˆ›å»º VLAN ç½‘æ¡¥"</span>
    ip <span class="hljs-built_in">link</span> add name br-vlan10 <span class="hljs-built_in">type</span> bridge
    ip <span class="hljs-built_in">link</span> add name br-vlan20 <span class="hljs-built_in">type</span> bridge
    ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> br-vlan10 up
    ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> br-vlan20 up
    print_info <span class="hljs-string">"âœ“ åˆ›å»ºç½‘æ¡¥: br-vlan10, br-vlan20"</span>
    
    <span class="hljs-comment"># æ­¥éª¤3: é…ç½® VLAN æ¥å£ (å¦‚æœç‰©ç†æ¥å£å­˜åœ¨)</span>
    print_step <span class="hljs-string">"3. é…ç½® VLAN æ¥å£"</span>
    PHYSICAL_IFACE=$(ip route | grep default | awk <span class="hljs-string">'{print $5}'</span> | <span class="hljs-built_in">head</span> -1)
    
    <span class="hljs-keyword">if</span> [ -n <span class="hljs-string">"<span class="hljs-variable">$PHYSICAL_IFACE</span>"</span> ] &amp;&amp; [ <span class="hljs-string">"<span class="hljs-variable">$PHYSICAL_IFACE</span>"</span> != <span class="hljs-string">"br0"</span> ]; <span class="hljs-keyword">then</span>
        <span class="hljs-comment"># åˆ›å»º VLAN å­æ¥å£</span>
        ip <span class="hljs-built_in">link</span> add <span class="hljs-built_in">link</span> <span class="hljs-variable">$PHYSICAL_IFACE</span> name <span class="hljs-variable">$PHYSICAL_IFACE</span>.10 <span class="hljs-built_in">type</span> vlan <span class="hljs-built_in">id</span> 10
        ip <span class="hljs-built_in">link</span> add <span class="hljs-built_in">link</span> <span class="hljs-variable">$PHYSICAL_IFACE</span> name <span class="hljs-variable">$PHYSICAL_IFACE</span>.20 <span class="hljs-built_in">type</span> vlan <span class="hljs-built_in">id</span> 20
        
        ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> <span class="hljs-variable">$PHYSICAL_IFACE</span>.10 up
        ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> <span class="hljs-variable">$PHYSICAL_IFACE</span>.20 up
        
        <span class="hljs-comment"># å°† VLAN æ¥å£è¿æ¥åˆ°å¯¹åº”çš„ç½‘æ¡¥</span>
        ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> <span class="hljs-variable">$PHYSICAL_IFACE</span>.10 master br-vlan10
        ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> <span class="hljs-variable">$PHYSICAL_IFACE</span>.20 master br-vlan20
        
        print_info <span class="hljs-string">"âœ“ åœ¨ <span class="hljs-variable">$PHYSICAL_IFACE</span> ä¸Šåˆ›å»º VLAN 10 å’Œ VLAN 20"</span>
    <span class="hljs-keyword">else</span>
        print_info <span class="hljs-string">"âš  æœªæ‰¾åˆ°åˆé€‚çš„ç‰©ç†æ¥å£ï¼Œä»…é…ç½®å†…éƒ¨ VLAN"</span>
    <span class="hljs-keyword">fi</span>
    
    <span class="hljs-comment"># æ­¥éª¤4: åˆ›å»ºå¹¶é…ç½® veth pair</span>
    print_step <span class="hljs-string">"4. é…ç½® veth pair å’Œ VLAN è¿æ¥"</span>
    
    <span class="hljs-comment"># VLAN 10 çš„å‘½åç©ºé—´</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> 1 2; <span class="hljs-keyword">do</span>
        <span class="hljs-comment"># åˆ›å»º veth pair</span>
        ip <span class="hljs-built_in">link</span> add veth-vlan10-<span class="hljs-variable">$i</span> <span class="hljs-built_in">type</span> veth peer name veth-vlan10-<span class="hljs-variable">$i</span>-br
        
        <span class="hljs-comment"># é…ç½®å‘½åç©ºé—´ç«¯</span>
        ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> veth-vlan10-<span class="hljs-variable">$i</span> netns vlan10-ns<span class="hljs-variable">$i</span>
        ip netns <span class="hljs-built_in">exec</span> vlan10-ns<span class="hljs-variable">$i</span> ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> lo up
        ip netns <span class="hljs-built_in">exec</span> vlan10-ns<span class="hljs-variable">$i</span> ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> veth-vlan10-<span class="hljs-variable">$i</span> up
        ip netns <span class="hljs-built_in">exec</span> vlan10-ns<span class="hljs-variable">$i</span> ip addr add 10.10.10.$i<span class="hljs-variable">$i</span>/24 dev veth-vlan10-<span class="hljs-variable">$i</span>
        
        <span class="hljs-comment"># é…ç½®ç½‘æ¡¥ç«¯</span>
        ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> veth-vlan10-<span class="hljs-variable">$i</span>-br master br-vlan10
        ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> veth-vlan10-<span class="hljs-variable">$i</span>-br up
        
        print_info <span class="hljs-string">"âœ“ é…ç½® VLAN10: vlan10-ns<span class="hljs-variable">$i</span> -&gt; 10.10.10.$i<span class="hljs-variable">$i</span>"</span>
    <span class="hljs-keyword">done</span>
    
    <span class="hljs-comment"># VLAN 20 çš„å‘½åç©ºé—´  </span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> 1 2; <span class="hljs-keyword">do</span>
        <span class="hljs-comment"># åˆ›å»º veth pair</span>
        ip <span class="hljs-built_in">link</span> add veth-vlan20-<span class="hljs-variable">$i</span> <span class="hljs-built_in">type</span> veth peer name veth-vlan20-<span class="hljs-variable">$i</span>-br
        
        <span class="hljs-comment"># é…ç½®å‘½åç©ºé—´ç«¯</span>
        ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> veth-vlan20-<span class="hljs-variable">$i</span> netns vlan20-ns<span class="hljs-variable">$i</span>
        ip netns <span class="hljs-built_in">exec</span> vlan20-ns<span class="hljs-variable">$i</span> ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> lo up
        ip netns <span class="hljs-built_in">exec</span> vlan20-ns<span class="hljs-variable">$i</span> ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> veth-vlan20-<span class="hljs-variable">$i</span> up
        ip netns <span class="hljs-built_in">exec</span> vlan20-ns<span class="hljs-variable">$i</span> ip addr add 10.10.20.$i<span class="hljs-variable">$i</span>/24 dev veth-vlan20-<span class="hljs-variable">$i</span>
        
        <span class="hljs-comment"># é…ç½®ç½‘æ¡¥ç«¯</span>
        ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> veth-vlan20-<span class="hljs-variable">$i</span>-br master br-vlan20
        ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> veth-vlan20-<span class="hljs-variable">$i</span>-br up
        
        print_info <span class="hljs-string">"âœ“ é…ç½® VLAN20: vlan20-ns<span class="hljs-variable">$i</span> -&gt; 10.10.20.$i<span class="hljs-variable">$i</span>"</span>
    <span class="hljs-keyword">done</span>
    
    <span class="hljs-comment"># æ­¥éª¤5: é…ç½®ç½‘æ¡¥ IP</span>
    print_step <span class="hljs-string">"5. é…ç½®ç½‘æ¡¥ç®¡ç† IP"</span>
    ip addr add 10.10.10.1/24 dev br-vlan10 2&gt;/dev/null || <span class="hljs-literal">true</span>
    ip addr add 10.10.20.1/24 dev br-vlan20 2&gt;/dev/null || <span class="hljs-literal">true</span>
    
    <span class="hljs-comment"># æ­¥éª¤6: æµ‹è¯•è¿é€šæ€§</span>
    print_step <span class="hljs-string">"6. æµ‹è¯• VLAN è¿é€šæ€§"</span>
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\næµ‹è¯• VLAN10 å†…éƒ¨é€šä¿¡:"</span>
    <span class="hljs-keyword">if</span> ip netns <span class="hljs-built_in">exec</span> vlan10-ns1 ping -c 2 -W 1 10.10.10.22 &gt;/dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
        print_info <span class="hljs-string">"âœ“ VLAN10 å†…éƒ¨é€šä¿¡æ­£å¸¸"</span>
    <span class="hljs-keyword">else</span>
        print_info <span class="hljs-string">"âœ— VLAN10 å†…éƒ¨é€šä¿¡å¤±è´¥"</span>
    <span class="hljs-keyword">fi</span>
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\næµ‹è¯• VLAN20 å†…éƒ¨é€šä¿¡:"</span>
    <span class="hljs-keyword">if</span> ip netns <span class="hljs-built_in">exec</span> vlan20-ns1 ping -c 2 -W 1 10.10.20.22 &gt;/dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
        print_info <span class="hljs-string">"âœ“ VLAN20 å†…éƒ¨é€šä¿¡æ­£å¸¸"</span>
    <span class="hljs-keyword">else</span>
        print_info <span class="hljs-string">"âœ— VLAN20 å†…éƒ¨é€šä¿¡å¤±è´¥"</span>
    <span class="hljs-keyword">fi</span>
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\næµ‹è¯• VLAN é—´éš”ç¦»:"</span>
    <span class="hljs-keyword">if</span> ip netns <span class="hljs-built_in">exec</span> vlan10-ns1 ping -c 2 -W 1 10.10.20.11 &gt;/dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
        print_info <span class="hljs-string">"âœ— VLAN éš”ç¦»å¤±è´¥ (å¼‚å¸¸)"</span>
    <span class="hljs-keyword">else</span>
        print_info <span class="hljs-string">"âœ“ VLAN éš”ç¦»æ­£å¸¸"</span>
    <span class="hljs-keyword">fi</span>
    
    <span class="hljs-comment"># æ­¥éª¤7: æ˜¾ç¤ºé…ç½®ä¿¡æ¯</span>
    print_step <span class="hljs-string">"7. æ˜¾ç¤º VLAN é…ç½®ä¿¡æ¯"</span>
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nç½‘æ¡¥ä¿¡æ¯:"</span>
    <span class="hljs-keyword">for</span> br <span class="hljs-keyword">in</span> br-vlan10 br-vlan20; <span class="hljs-keyword">do</span>
        <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n<span class="hljs-variable">$br</span>:"</span>
        bridge <span class="hljs-built_in">link</span> show dev <span class="hljs-variable">$br</span> 2&gt;/dev/null || brctl show <span class="hljs-variable">$br</span> 2&gt;/dev/null || <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ— æ³•è·å–ç½‘æ¡¥ä¿¡æ¯"</span>
    <span class="hljs-keyword">done</span>
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nVLAN æ¥å£:"</span>
    ip <span class="hljs-built_in">link</span> show | grep -E <span class="hljs-string">"vlan|br-vlan"</span>
    
    print_info <span class="hljs-string">"VLAN é…ç½®å®Œæˆï¼"</span>
}

main <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
</code></pre>
<p>è¿è¡Œ VLAN é…ç½®è„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x configure_vlan.sh
sudo ./configure_vlan.sh
</code></pre>
<h2 data-id="heading-14">7. ç½‘ç»œç›‘æ§å’Œè¯Šæ–­</h2>
<h3 data-id="heading-15">7.1 ç½‘ç»œçŠ¶æ€ç›‘æ§è„šæœ¬</h3>
<p>åˆ›å»ºç½‘ç»œç›‘æ§è„šæœ¬ <code>network_monitor.sh</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æ–‡ä»¶å: network_monitor.sh</span>

<span class="hljs-comment"># é¢œè‰²å®šä¹‰</span>
GREEN=<span class="hljs-string">'\033[0;32m'</span>
YELLOW=<span class="hljs-string">'\033[1;33m'</span>
RED=<span class="hljs-string">'\033[0;31m'</span>
BLUE=<span class="hljs-string">'\033[0;34m'</span>
NC=<span class="hljs-string">'\033[0m'</span>

<span class="hljs-function"><span class="hljs-title">print_header</span></span>() {
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${BLUE}</span>=== <span class="hljs-variable">$1</span> ===<span class="hljs-variable">${NC}</span>"</span>
}

<span class="hljs-function"><span class="hljs-title">print_success</span></span>() {
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${GREEN}</span>âœ“ $1<span class="hljs-variable">${NC}</span>"</span>
}

<span class="hljs-function"><span class="hljs-title">print_warning</span></span>() {
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${YELLOW}</span>âš  $1<span class="hljs-variable">${NC}</span>"</span>
}

<span class="hljs-function"><span class="hljs-title">print_error</span></span>() {
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${RED}</span>âœ— $1<span class="hljs-variable">${NC}</span>"</span>
}

<span class="hljs-comment"># ç›‘æ§å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-title">monitor_namespaces</span></span>() {
    print_header <span class="hljs-string">"ç½‘ç»œå‘½åç©ºé—´çŠ¶æ€"</span>
    
    <span class="hljs-built_in">local</span> namespaces=$(ip netns list)
    <span class="hljs-keyword">if</span> [ -z <span class="hljs-string">"<span class="hljs-variable">$namespaces</span>"</span> ]; <span class="hljs-keyword">then</span>
        print_warning <span class="hljs-string">"æ²¡æœ‰æ‰¾åˆ°ç½‘ç»œå‘½åç©ºé—´"</span>
        <span class="hljs-built_in">return</span>
    <span class="hljs-keyword">fi</span>
    
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$namespaces</span>"</span> | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> ns; <span class="hljs-keyword">do</span>
        <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nå‘½åç©ºé—´: <span class="hljs-variable">$ns</span>"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ¥å£çŠ¶æ€:"</span>
        ip netns <span class="hljs-built_in">exec</span> <span class="hljs-variable">$ns</span> ip -o <span class="hljs-built_in">link</span> show | awk <span class="hljs-string">'{print "  " $2 " " $3 " " $9}'</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"IP åœ°å€:"</span>
        ip netns <span class="hljs-built_in">exec</span> <span class="hljs-variable">$ns</span> ip -o addr show | grep -v <span class="hljs-string">"inet6"</span> | awk <span class="hljs-string">'{print "  " $2 " " $4}'</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"è·¯ç”±è¡¨:"</span>
        ip netns <span class="hljs-built_in">exec</span> <span class="hljs-variable">$ns</span> ip route show | sed <span class="hljs-string">'s/^/  /'</span>
    <span class="hljs-keyword">done</span>
}

<span class="hljs-function"><span class="hljs-title">monitor_bridges</span></span>() {
    print_header <span class="hljs-string">"ç½‘æ¡¥çŠ¶æ€"</span>
    
    <span class="hljs-comment"># å°è¯•ä½¿ç”¨ bridge å‘½ä»¤</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v bridge &gt; /dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
        bridge <span class="hljs-built_in">link</span> show
    <span class="hljs-keyword">else</span>
        <span class="hljs-comment"># å›é€€åˆ° brctl</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v brctl &gt; /dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
            brctl show
        <span class="hljs-keyword">else</span>
            print_warning <span class="hljs-string">"æœªæ‰¾åˆ° bridge-utils æˆ– iproute2 bridge å·¥å…·"</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-function"><span class="hljs-title">monitor_connections</span></span>() {
    print_header <span class="hljs-string">"æ´»è·ƒè¿æ¥æµ‹è¯•"</span>
    
    <span class="hljs-comment"># æµ‹è¯•æœ¬åœ°å›ç¯</span>
    <span class="hljs-keyword">if</span> ping -c 1 -W 1 127.0.0.1 &gt;/dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
        print_success <span class="hljs-string">"æœ¬åœ°å›ç¯æ­£å¸¸"</span>
    <span class="hljs-keyword">else</span>
        print_error <span class="hljs-string">"æœ¬åœ°å›ç¯å¼‚å¸¸"</span>
    <span class="hljs-keyword">fi</span>
    
    <span class="hljs-comment"># æµ‹è¯•ç½‘å…³è¿æ¥ï¼ˆå¦‚æœæœ‰é»˜è®¤ç½‘å…³ï¼‰</span>
    <span class="hljs-built_in">local</span> gateway=$(ip route | grep default | awk <span class="hljs-string">'{print $3}'</span> | <span class="hljs-built_in">head</span> -1)
    <span class="hljs-keyword">if</span> [ -n <span class="hljs-string">"<span class="hljs-variable">$gateway</span>"</span> ]; <span class="hljs-keyword">then</span>
        <span class="hljs-keyword">if</span> ping -c 1 -W 1 <span class="hljs-variable">$gateway</span> &gt;/dev/null 2&gt;&amp;1; <span class="hljs-keyword">then</span>
            print_success <span class="hljs-string">"ç½‘å…³ <span class="hljs-variable">$gateway</span> å¯è¾¾"</span>
        <span class="hljs-keyword">else</span>
            print_warning <span class="hljs-string">"ç½‘å…³ <span class="hljs-variable">$gateway</span> ä¸å¯è¾¾"</span>
        <span class="hljs-keyword">fi</span>
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-function"><span class="hljs-title">monitor_iptables</span></span>() {
    print_header <span class="hljs-string">"é˜²ç«å¢™è§„åˆ™"</span>
    
    <span class="hljs-keyword">for</span> table <span class="hljs-keyword">in</span> filter nat mangle; <span class="hljs-keyword">do</span>
        <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nè¡¨: <span class="hljs-variable">$table</span>"</span>
        iptables -t <span class="hljs-variable">$table</span> -L -n 2&gt;/dev/null | <span class="hljs-built_in">head</span> -20
    <span class="hljs-keyword">done</span>
}

<span class="hljs-function"><span class="hljs-title">monitor_system_stats</span></span>() {
    print_header <span class="hljs-string">"ç³»ç»Ÿç½‘ç»œç»Ÿè®¡"</span>
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nç½‘ç»œæ¥å£ç»Ÿè®¡:"</span>
    ip -s <span class="hljs-built_in">link</span> show
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nè¿æ¥ç»Ÿè®¡:"</span>
    ss -s
}

<span class="hljs-comment"># æŒç»­ç›‘æ§æ¨¡å¼</span>
<span class="hljs-function"><span class="hljs-title">continuous_monitor</span></span>() {
    <span class="hljs-built_in">local</span> interval=<span class="hljs-variable">${1:-5}</span>
    
    <span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span>
        clear
        print_header <span class="hljs-string">"ç½‘ç»œç›‘æ§ - <span class="hljs-subst">$(date)</span>"</span>
        monitor_namespaces
        monitor_bridges
        monitor_connections
        <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n<span class="hljs-variable">${YELLOW}</span>æŒ‰ Ctrl+C é€€å‡ºç›‘æ§...<span class="hljs-variable">${NC}</span>"</span>
        <span class="hljs-built_in">sleep</span> <span class="hljs-variable">$interval</span>
    <span class="hljs-keyword">done</span>
}

<span class="hljs-comment"># ä¸»å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-title">main</span></span>() {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"<span class="hljs-variable">${1:-}</span>"</span> <span class="hljs-keyword">in</span>
        <span class="hljs-string">"continuous"</span>|<span class="hljs-string">"cont"</span>|<span class="hljs-string">"c"</span>)
            continuous_monitor <span class="hljs-string">"<span class="hljs-variable">${2:-5}</span>"</span>
            ;;
        <span class="hljs-string">"help"</span>|<span class="hljs-string">"-h"</span>|<span class="hljs-string">"--help"</span>)
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"ç”¨æ³•: <span class="hljs-variable">$0</span> [mode]"</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ¨¡å¼:"</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"  continuous [interval]   æŒç»­ç›‘æ§æ¨¡å¼ï¼Œå¯æŒ‡å®šé—´éš”ï¼ˆç§’ï¼‰"</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"  help                    æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯"</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"  æ— å‚æ•°                  å•æ¬¡ç›‘æ§å¿«ç…§"</span>
            ;;
        *)
            print_header <span class="hljs-string">"ç½‘ç»œç›‘æ§å¿«ç…§ - <span class="hljs-subst">$(date)</span>"</span>
            monitor_namespaces
            monitor_bridges
            monitor_connections
            monitor_iptables
            monitor_system_stats
            ;;
    <span class="hljs-keyword">esac</span>
}

main <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
</code></pre>
<p>è¿è¡Œç½‘ç»œç›‘æ§ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x network_monitor.sh
<span class="hljs-comment"># å•æ¬¡ç›‘æ§</span>
sudo ./network_monitor.sh

<span class="hljs-comment"># æŒç»­ç›‘æ§ï¼ˆæ¯5ç§’åˆ·æ–°ï¼‰</span>
sudo ./network_monitor.sh continuous 5
</code></pre>
<h2 data-id="heading-16">8. æ¸…ç†è„šæœ¬</h2>
<p>åˆ›å»ºç½‘ç»œæ¸…ç†è„šæœ¬ <code>cleanup_network.sh</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># æ–‡ä»¶å: cleanup_network.sh</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-comment"># é¢œè‰²å®šä¹‰</span>
GREEN=<span class="hljs-string">'\033[0;32m'</span>
YELLOW=<span class="hljs-string">'\033[1;33m'</span>
RED=<span class="hljs-string">'\033[0;31m'</span>
NC=<span class="hljs-string">'\033[0m'</span>

<span class="hljs-function"><span class="hljs-title">print_info</span></span>() { <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${GREEN}</span>[INFO]<span class="hljs-variable">${NC}</span> <span class="hljs-variable">$1</span>"</span>; }
<span class="hljs-function"><span class="hljs-title">print_warning</span></span>() { <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${YELLOW}</span>[WARNING]<span class="hljs-variable">${NC}</span> <span class="hljs-variable">$1</span>"</span>; }
<span class="hljs-function"><span class="hljs-title">print_error</span></span>() { <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"<span class="hljs-variable">${RED}</span>[ERROR]<span class="hljs-variable">${NC}</span> <span class="hljs-variable">$1</span>"</span>; }

<span class="hljs-function"><span class="hljs-title">confirm_cleanup</span></span>() {
    <span class="hljs-built_in">read</span> -p <span class="hljs-string">"ç¡®å®šè¦æ¸…ç†æ‰€æœ‰è™šæ‹Ÿç½‘ç»œé…ç½®å—ï¼Ÿ(y/N): "</span> -n 1 -r
    <span class="hljs-built_in">echo</span>
    <span class="hljs-keyword">if</span> [[ ! <span class="hljs-variable">$REPLY</span> =~ ^[Yy]$ ]]; <span class="hljs-keyword">then</span>
        print_info <span class="hljs-string">"å–æ¶ˆæ¸…ç†æ“ä½œ"</span>
        <span class="hljs-built_in">exit</span> 0
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-function"><span class="hljs-title">cleanup_namespaces</span></span>() {
    print_info <span class="hljs-string">"æ¸…ç†ç½‘ç»œå‘½åç©ºé—´..."</span>
    
    <span class="hljs-built_in">local</span> namespaces=$(ip netns list | awk <span class="hljs-string">'{print $1}'</span>)
    <span class="hljs-keyword">if</span> [ -z <span class="hljs-string">"<span class="hljs-variable">$namespaces</span>"</span> ]; <span class="hljs-keyword">then</span>
        print_info <span class="hljs-string">"æ²¡æœ‰æ‰¾åˆ°éœ€è¦æ¸…ç†çš„å‘½åç©ºé—´"</span>
        <span class="hljs-built_in">return</span>
    <span class="hljs-keyword">fi</span>
    
    <span class="hljs-keyword">for</span> ns <span class="hljs-keyword">in</span> <span class="hljs-variable">$namespaces</span>; <span class="hljs-keyword">do</span>
        print_info <span class="hljs-string">"åˆ é™¤å‘½åç©ºé—´: <span class="hljs-variable">$ns</span>"</span>
        ip netns delete <span class="hljs-variable">$ns</span>
    <span class="hljs-keyword">done</span>
}

<span class="hljs-function"><span class="hljs-title">cleanup_bridges</span></span>() {
    print_info <span class="hljs-string">"æ¸…ç†ç½‘æ¡¥..."</span>
    
    <span class="hljs-comment"># è·å–æ‰€æœ‰ç½‘æ¡¥</span>
    <span class="hljs-built_in">local</span> bridges=$(ip <span class="hljs-built_in">link</span> show <span class="hljs-built_in">type</span> bridge | grep -o <span class="hljs-string">"br[^:]*"</span> || <span class="hljs-literal">true</span>)
    
    <span class="hljs-keyword">for</span> br <span class="hljs-keyword">in</span> <span class="hljs-variable">$bridges</span>; <span class="hljs-keyword">do</span>
        <span class="hljs-comment"># è·³è¿‡ä¸€äº›ç³»ç»Ÿç½‘æ¡¥</span>
        <span class="hljs-keyword">case</span> <span class="hljs-variable">$br</span> <span class="hljs-keyword">in</span>
            <span class="hljs-string">"docker0"</span>|<span class="hljs-string">"virbr0"</span>)
                print_warning <span class="hljs-string">"è·³è¿‡ç³»ç»Ÿç½‘æ¡¥: <span class="hljs-variable">$br</span>"</span>
                <span class="hljs-built_in">continue</span>
                ;;
        <span class="hljs-keyword">esac</span>
        
        print_info <span class="hljs-string">"åˆ é™¤ç½‘æ¡¥: <span class="hljs-variable">$br</span>"</span>
        ip <span class="hljs-built_in">link</span> <span class="hljs-built_in">set</span> <span class="hljs-variable">$br</span> down
        ip <span class="hljs-built_in">link</span> delete <span class="hljs-variable">$br</span>
    <span class="hljs-keyword">done</span>
}

<span class="hljs-function"><span class="hljs-title">cleanup_veth_pairs</span></span>() {
    print_info <span class="hljs-string">"æ¸…ç† veth pair..."</span>
    
    <span class="hljs-comment"># æŸ¥æ‰¾æ‰€æœ‰ veth è®¾å¤‡</span>
    <span class="hljs-built_in">local</span> veth_devices=$(ip <span class="hljs-built_in">link</span> show | grep -o <span class="hljs-string">"veth[^@]*"</span> | <span class="hljs-built_in">uniq</span> || <span class="hljs-literal">true</span>)
    
    <span class="hljs-keyword">for</span> dev <span class="hljs-keyword">in</span> <span class="hljs-variable">$veth_devices</span>; <span class="hljs-keyword">do</span>
        print_info <span class="hljs-string">"åˆ é™¤ veth è®¾å¤‡: <span class="hljs-variable">$dev</span>"</span>
        ip <span class="hljs-built_in">link</span> delete <span class="hljs-variable">$dev</span> 2&gt;/dev/null || <span class="hljs-literal">true</span>
    <span class="hljs-keyword">done</span>
}

<span class="hljs-function"><span class="hljs-title">cleanup_vlan_interfaces</span></span>() {
    print_info <span class="hljs-string">"æ¸…ç† VLAN æ¥å£..."</span>
    
    <span class="hljs-comment"># æŸ¥æ‰¾ VLAN å­æ¥å£</span>
    <span class="hljs-built_in">local</span> vlan_ifaces=$(ip <span class="hljs-built_in">link</span> show | grep -o <span class="hljs-string">"[^ ]*\.[0-9]*@[^:]*"</span> | <span class="hljs-built_in">cut</span> -d<span class="hljs-string">'@'</span> -f1 | <span class="hljs-built_in">uniq</span> || <span class="hljs-literal">true</span>)
    
    <span class="hljs-keyword">for</span> iface <span class="hljs-keyword">in</span> <span class="hljs-variable">$vlan_ifaces</span>; <span class="hljs-keyword">do</span>
        print_info <span class="hljs-string">"åˆ é™¤ VLAN æ¥å£: <span class="hljs-variable">$iface</span>"</span>
        ip <span class="hljs-built_in">link</span> delete <span class="hljs-variable">$iface</span> 2&gt;/dev/null || <span class="hljs-literal">true</span>
    <span class="hljs-keyword">done</span>
}

<span class="hljs-function"><span class="hljs-title">cleanup_iptables_rules</span></span>() {
    print_info <span class="hljs-string">"æ¸…ç† iptables è§„åˆ™..."</span>
    
    <span class="hljs-comment"># æ¸…ç† NAT è§„åˆ™</span>
    iptables -t nat -F
    iptables -t mangle -F
    iptables -F
    iptables -X
    
    print_info <span class="hljs-string">"âœ“ iptables è§„åˆ™å·²æ¸…ç†"</span>
}

<span class="hljs-function"><span class="hljs-title">reset_network_settings</span></span>() {
    print_info <span class="hljs-string">"é‡ç½®ç½‘ç»œè®¾ç½®..."</span>
    
    <span class="hljs-comment"># ç¦ç”¨ IP è½¬å‘</span>
    <span class="hljs-built_in">echo</span> 0 &gt; /proc/sys/net/ipv4/ip_forward
    
    <span class="hljs-comment"># åˆ·æ–°è·¯ç”±ç¼“å­˜</span>
    ip route flush cache
    
    print_info <span class="hljs-string">"âœ“ ç½‘ç»œè®¾ç½®å·²é‡ç½®"</span>
}

<span class="hljs-function"><span class="hljs-title">show_remaining_objects</span></span>() {
    print_info <span class="hljs-string">"æ£€æŸ¥å‰©ä½™ç½‘ç»œå¯¹è±¡..."</span>
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nå‰©ä½™ç½‘ç»œå‘½åç©ºé—´:"</span>
    ip netns list
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nå‰©ä½™ç½‘æ¡¥:"</span>
    ip <span class="hljs-built_in">link</span> show <span class="hljs-built_in">type</span> bridge 2&gt;/dev/null || <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ— "</span>
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nå‰©ä½™ veth è®¾å¤‡:"</span>
    ip <span class="hljs-built_in">link</span> show | grep <span class="hljs-string">"veth"</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ— "</span>
}

<span class="hljs-function"><span class="hljs-title">main</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"=== è™šæ‹Ÿç½‘ç»œæ¸…ç†å·¥å…· ==="</span>
    
    <span class="hljs-comment"># è¯·æ±‚ç¡®è®¤</span>
    confirm_cleanup
    
    <span class="hljs-comment"># æ‰§è¡Œæ¸…ç†æ“ä½œ</span>
    cleanup_namespaces
    cleanup_bridges
    cleanup_veth_pairs
    cleanup_vlan_interfaces
    cleanup_iptables_rules
    reset_network_settings
    
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n"</span>
    show_remaining_objects
    
    print_info <span class="hljs-string">"è™šæ‹Ÿç½‘ç»œæ¸…ç†å®Œæˆï¼"</span>
}

<span class="hljs-comment"># æ£€æŸ¥ root æƒé™</span>
<span class="hljs-keyword">if</span> [ <span class="hljs-string">"<span class="hljs-variable">$EUID</span>"</span> -ne 0 ]; <span class="hljs-keyword">then</span>
    print_error <span class="hljs-string">"è¯·ä½¿ç”¨ root æƒé™è¿è¡Œæ­¤è„šæœ¬: sudo <span class="hljs-variable">$0</span>"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

main <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
</code></pre>
<p>è¿è¡Œæ¸…ç†è„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x cleanup_network.sh
sudo ./cleanup_network.sh
</code></pre>
<h2 data-id="heading-17">9. æ€»ç»“</h2>
<p>é€šè¿‡æœ¬æ•™ç¨‹ï¼Œæˆ‘ä»¬æ·±å…¥å­¦ä¹ äº† Linux ç½‘ç»œå‘½åç©ºé—´çš„å„ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li><strong>åŸºç¡€æ¦‚å¿µ</strong>ï¼šç†è§£äº†ç½‘ç»œå‘½åç©ºé—´çš„éš”ç¦»æœºåˆ¶</li>
<li><strong>å®é™…æ“ä½œ</strong>ï¼šæŒæ¡äº†åˆ›å»ºã€é…ç½®å’Œç®¡ç†ç½‘ç»œå‘½åç©ºé—´çš„æŠ€èƒ½</li>
<li><strong>ç½‘ç»œæ„å»º</strong>ï¼šå­¦ä¼šäº†ä½¿ç”¨ veth pair å’Œç½‘æ¡¥æ„å»ºå¤æ‚è™šæ‹Ÿç½‘ç»œ</li>
<li><strong>é«˜çº§ç‰¹æ€§</strong>ï¼šäº†è§£äº† VLAN é…ç½®å’Œç½‘ç»œéš”ç¦»</li>
<li><strong>ç›‘æ§è¯Šæ–­</strong>ï¼šæŒæ¡äº†ç½‘ç»œçŠ¶æ€ç›‘æ§å’Œæ•…éšœè¯Šæ–­æ–¹æ³•</li>
</ol>
<p>è¿™äº›æŠ€èƒ½ä¸ºç†è§£å®¹å™¨ç½‘ç»œã€è™šæ‹ŸåŒ–æŠ€æœ¯å’Œäº‘åŸç”ŸåŸºç¡€è®¾æ–½æ‰“ä¸‹äº†åšå®åŸºç¡€ã€‚ç½‘ç»œå‘½åç©ºé—´æ˜¯ç°ä»£ Linux ç½‘ç»œè™šæ‹ŸåŒ–çš„æ ¸å¿ƒæŠ€æœ¯ï¼ŒæŒæ¡å®ƒå¯¹äºç³»ç»Ÿç®¡ç†å‘˜ã€ç½‘ç»œå·¥ç¨‹å¸ˆå’Œ DevOps å·¥ç¨‹å¸ˆéƒ½è‡³å…³é‡è¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java Seté›†åˆï¼šä½ çš„æ•°æ®å»é‡ç¥å™¨]]></title>    <link>https://juejin.cn/post/7572776177690116105</link>    <guid>https://juejin.cn/post/7572776177690116105</guid>    <pubDate>2025-11-16T01:22:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572776177690116105" data-draft-id="7572749797468225545" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java Seté›†åˆï¼šä½ çš„æ•°æ®å»é‡ç¥å™¨"/> <meta itemprop="keywords" content="åç«¯,Java,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-16T01:22:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¼šç¼–ç¨‹çš„å•æ´å®¾"/> <meta itemprop="url" content="https://juejin.cn/user/2506542242333832"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java Seté›†åˆï¼šä½ çš„æ•°æ®å»é‡ç¥å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2506542242333832/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¼šç¼–ç¨‹çš„å•æ´å®¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T01:22:37.000Z" title="Sun Nov 16 2025 01:22:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Java Seté›†åˆï¼šä½ çš„æ•°æ®å»é‡ç¥å™¨</h2>
<p>å„ä½é“å‹ä»¬å¥½ï¼Œæˆ‘æ˜¯ä¼šç¼–ç¨‹çš„å•æ´å®¾ï¼ä»Šå¤©å’±ä»¬æ¥èŠèŠJavaä¸­çš„Seté›†åˆâ€”â€”è¿™ç©æ„å„¿å°±åƒæ˜¯æ•°æ®ç•Œçš„"ç…§å¦–é•œ"ï¼Œä¸“é—¨è¯†åˆ«å’Œå»é™¤é‡å¤å…ƒç´ ï¼Œè®©ä½ çš„æ•°æ®ä¿æŒç‹¬ä¸€æ— äºŒï¼</p>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯Setï¼Ÿ</h3>
<p>æƒ³è±¡ä¸€ä¸‹å¤©åº­çš„ä»™äººåå½•ï¼šæ¯ä¸ªç¥ä»™éƒ½æ˜¯ç‹¬ä¸€æ— äºŒçš„ï¼Œä¸èƒ½æœ‰é‡å¤ã€‚Setå°±æ˜¯è¿™æ ·ä¸€ç§ä¸å…è®¸é‡å¤å…ƒç´ çš„é›†åˆï¼Œå®ƒå°±åƒä¸ªä¸¥æ ¼çš„å®ˆé—¨å‘˜ï¼Œç¡®ä¿æ¯ä¸ªå…ƒç´ éƒ½æ˜¯"ç‹¬ä¸€ä»½"çš„ã€‚</p>
<h3 data-id="heading-2">ä¸‰å¤§å»é‡é«˜æ‰‹</h3>
<h4 data-id="heading-3">1. HashSet - é—ªç”µä¾ </h4>
<p>HashSetå°±åƒæ˜¯ä¸ªæ‹¥æœ‰è¶…å¿«æŸ¥æ‰¾èƒ½åŠ›çš„é—ªç”µä¾ ï¼š</p>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp">Set&lt;String&gt; immortalSet = <span class="hljs-keyword">new</span> HashSet&lt;&gt;();
immortalSet.<span class="hljs-keyword">add</span>(<span class="hljs-string">"å•æ´å®¾"</span>);
immortalSet.<span class="hljs-keyword">add</span>(<span class="hljs-string">"ä½•ä»™å§‘"</span>);
immortalSet.<span class="hljs-keyword">add</span>(<span class="hljs-string">"é“æ‹æ"</span>);
immortalSet.<span class="hljs-keyword">add</span>(<span class="hljs-string">"å•æ´å®¾"</span>); <span class="hljs-comment">// è¿™ä¸ªä¸ä¼šé‡å¤æ·»åŠ ï¼</span>

System.<span class="hljs-keyword">out</span>.println(immortalSet.size()); <span class="hljs-comment">// è¾“å‡ºï¼š3</span>
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>åŸºäºå“ˆå¸Œè¡¨ï¼ŒæŸ¥æ‰¾é€Ÿåº¦è¶…å¿«ï¼ˆO(1)æ—¶é—´å¤æ‚åº¦ï¼‰</li>
<li>ä¸ä¿è¯å…ƒç´ é¡ºåºï¼ˆå°±åƒç¥ä»™ä»¬éšæ„ç«™é˜Ÿï¼‰</li>
<li>å…è®¸nullå…ƒç´ ï¼ˆä½†åªèƒ½æœ‰ä¸€ä¸ªnullï¼‰</li>
</ul>
<h4 data-id="heading-4">2. TreeSet - æ’åºå¤§å¸ˆ</h4>
<p>TreeSetå°±åƒæ˜¯ä¸ªè‡ªåŠ¨æ•´ç†é˜Ÿä¼çš„çºªå¾‹å§”å‘˜ï¼š</p>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp">Set&lt;String&gt; sortedImmortals = <span class="hljs-keyword">new</span> TreeSet&lt;&gt;();
sortedImmortals.<span class="hljs-keyword">add</span>(<span class="hljs-string">"é’Ÿç¦»æƒ"</span>);
sortedImmortals.<span class="hljs-keyword">add</span>(<span class="hljs-string">"è“é‡‡å’Œ"</span>);
sortedImmortals.<span class="hljs-keyword">add</span>(<span class="hljs-string">"å•æ´å®¾"</span>);

<span class="hljs-comment">// è‡ªåŠ¨æŒ‰å­—å…¸åºæ’åºï¼</span>
<span class="hljs-keyword">for</span> (String immortal : sortedImmortals) {
    System.<span class="hljs-keyword">out</span>.println(immortal); <span class="hljs-comment">// è¾“å‡ºï¼šè“é‡‡å’Œã€å•æ´å®¾ã€é’Ÿç¦»æƒ</span>
}
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>åŸºäºçº¢é»‘æ ‘ï¼Œè‡ªåŠ¨æ’åº</li>
<li>æŸ¥æ‰¾é€Ÿåº¦è¾ƒå¿«ï¼ˆO(log n)æ—¶é—´å¤æ‚åº¦ï¼‰</li>
<li>ä¸å…è®¸nullå…ƒç´ </li>
</ul>
<h4 data-id="heading-5">3. LinkedHashSet - æœ‰åºå»é‡ä¸“å®¶</h4>
<p>LinkedHashSetå°±åƒæ˜¯æ—¢ä¿æŒé¡ºåºåˆå»é‡çš„å®Œç¾ä¸»ä¹‰è€…ï¼š</p>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp">Set&lt;String&gt; orderedImmortals = <span class="hljs-keyword">new</span> LinkedHashSet&lt;&gt;();
orderedImmortals.<span class="hljs-keyword">add</span>(<span class="hljs-string">"å•æ´å®¾"</span>);
orderedImmortals.<span class="hljs-keyword">add</span>(<span class="hljs-string">"ä½•ä»™å§‘"</span>);
orderedImmortals.<span class="hljs-keyword">add</span>(<span class="hljs-string">"é“æ‹æ"</span>);

<span class="hljs-comment">// ä¿æŒæ’å…¥é¡ºåºï¼</span>
<span class="hljs-keyword">for</span> (String immortal : orderedImmortals) {
    System.<span class="hljs-keyword">out</span>.println(immortal); <span class="hljs-comment">// è¾“å‡ºé¡ºåºå’Œæ’å…¥é¡ºåºä¸€è‡´</span>
}
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>ä¿æŒæ’å…¥é¡ºåº</li>
<li>å»é‡èƒ½åŠ›ä¸HashSetç›¸åŒ</li>
<li>æŸ¥æ‰¾é€Ÿåº¦æ¥è¿‘HashSet</li>
</ul>
<h3 data-id="heading-6">Setçš„ä»™æ³•ç§˜ç±</h3>
<h4 data-id="heading-7">åŸºæœ¬æ“ä½œæ¼”ç¤º</h4>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp">Set&lt;String&gt; eightImmortals = <span class="hljs-keyword">new</span> HashSet&lt;&gt;();

<span class="hljs-comment">// æ·»åŠ å…ƒç´ </span>
eightImmortals.<span class="hljs-keyword">add</span>(<span class="hljs-string">"å•æ´å®¾"</span>);
eightImmortals.<span class="hljs-keyword">add</span>(<span class="hljs-string">"é’Ÿç¦»æƒ"</span>);
eightImmortals.<span class="hljs-keyword">add</span>(<span class="hljs-string">"è“é‡‡å’Œ"</span>);

<span class="hljs-comment">// æ£€æŸ¥å­˜åœ¨æ€§</span>
System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"æœ‰å•æ´å®¾å—ï¼Ÿ"</span> + eightImmortals.contains(<span class="hljs-string">"å•æ´å®¾"</span>));

<span class="hljs-comment">// åˆ é™¤å…ƒç´ </span>
eightImmortals.<span class="hljs-keyword">remove</span>(<span class="hljs-string">"è“é‡‡å’Œ"</span>);

<span class="hljs-comment">// è·å–å¤§å°</span>
System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"å½“å‰ä»™äººæ•°é‡ï¼š"</span> + eightImmortals.size());

<span class="hljs-comment">// æ¸…ç©ºé›†åˆ</span>
eightImmortals.clear();
</code></pre>
<h4 data-id="heading-8">é›†åˆè¿ç®—ï¼ˆæ•°å­¦è¯¾æ—¶é—´ï¼‰</h4>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">Set&lt;String&gt; <span class="hljs-attr">group1</span> = new HashSet&lt;&gt;(Arrays.asList(<span class="hljs-string">"å•æ´å®¾"</span>, <span class="hljs-string">"ä½•ä»™å§‘"</span>, <span class="hljs-string">"é“æ‹æ"</span>))<span class="hljs-comment">;</span>
Set&lt;String&gt; <span class="hljs-attr">group2</span> = new HashSet&lt;&gt;(Arrays.asList(<span class="hljs-string">"é’Ÿç¦»æƒ"</span>, <span class="hljs-string">"è“é‡‡å’Œ"</span>, <span class="hljs-string">"å•æ´å®¾"</span>))<span class="hljs-comment">;</span>

// å¹¶é›†ï¼ˆæ‰€æœ‰ä¸é‡å¤çš„å…ƒç´ ï¼‰
Set&lt;String&gt; <span class="hljs-attr">union</span> = new HashSet&lt;&gt;(group1)<span class="hljs-comment">;</span>
union.addAll(group2)<span class="hljs-comment">;</span>
System.out.println("æ‰€æœ‰ä»™äººï¼š" + union)<span class="hljs-comment">;</span>

// äº¤é›†ï¼ˆå…±åŒæ‹¥æœ‰çš„å…ƒç´ ï¼‰
Set&lt;String&gt; <span class="hljs-attr">intersection</span> = new HashSet&lt;&gt;(group1)<span class="hljs-comment">;</span>
intersection.retainAll(group2)<span class="hljs-comment">;</span>
System.out.println("å…±åŒä»™äººï¼š" + intersection)<span class="hljs-comment">;</span>

// å·®é›†ï¼ˆAæœ‰Bæ²¡æœ‰çš„å…ƒç´ ï¼‰
Set&lt;String&gt; <span class="hljs-attr">difference</span> = new HashSet&lt;&gt;(group1)<span class="hljs-comment">;</span>
difference.removeAll(group2)<span class="hljs-comment">;</span>
System.out.println("group1ç‹¬æœ‰çš„ä»™äººï¼š" + difference)<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-9">éå†çš„ä¸‰ç§ä»™æœ¯</h3>
<p><strong>æ–¹æ³•ä¸€ï¼šå¢å¼ºforå¾ªç¯ï¼ˆæ¨èï¼‰</strong></p>
<p>java</p>
<pre><code class="hljs language-erlang" lang="erlang"><span class="hljs-function"><span class="hljs-title">for</span> <span class="hljs-params">(String immortal : eightImmortals)</span> {
    S<span class="hljs-title">ystem</span>.<span class="hljs-title">out</span>.<span class="hljs-title">println</span><span class="hljs-params">(<span class="hljs-string">"ä»™äººï¼š"</span> + immortal)</span>;
}
</span></code></pre>
<p><strong>æ–¹æ³•äºŒï¼šè¿­ä»£å™¨</strong></p>
<p>java</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">Iterator</span>&lt;<span class="hljs-type">String</span>&gt; <span class="hljs-keyword">iterator</span> = eightImmortals.<span class="hljs-keyword">iterator</span>();
<span class="hljs-keyword">while</span> (<span class="hljs-keyword">iterator</span>.hasNext()) {
    System.out.println(<span class="hljs-string">"ä»™äººï¼š"</span> + <span class="hljs-keyword">iterator</span>.<span class="hljs-keyword">next</span>());
}
</code></pre>
<p><strong>æ–¹æ³•ä¸‰ï¼šJava 8+ Stream API</strong></p>
<p>java</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">eightImmortals</span><span class="hljs-selector-class">.stream</span>()
    <span class="hljs-selector-class">.filter</span>(immortal -&gt; immortal.<span class="hljs-built_in">startsWith</span>(<span class="hljs-string">"å•"</span>))
    <span class="hljs-selector-class">.forEach</span>(System.<span class="hljs-attribute">out</span>::println);
</code></pre>
<h3 data-id="heading-10">å®æˆ˜åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-11">åœºæ™¯1ï¼šç”¨æˆ·å»é‡</h4>
<p>java</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç”¨æˆ·æ³¨å†Œæ—¶æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦é‡å¤</span>
<span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">String</span>&gt; registeredUsers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();

<span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">registerUser</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> username</span>) {
    <span class="hljs-keyword">return</span> registeredUsers.<span class="hljs-title function_">add</span>(username); <span class="hljs-comment">// å¦‚æœå·²å­˜åœ¨è¿”å›false</span>
}
</code></pre>
<h4 data-id="heading-12">åœºæ™¯2ï¼šæ ‡ç­¾ç®¡ç†</h4>
<p>java</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// æ–‡ç« æ ‡ç­¾è‡ªåŠ¨å»é‡</span>
Set&lt;String&gt; articleTags = <span class="hljs-keyword">new</span> TreeSet&lt;&gt;(); <span class="hljs-comment">// è‡ªåŠ¨æ’åºçš„æ ‡ç­¾</span>
articleTags.<span class="hljs-keyword">add</span>(<span class="hljs-string">"Java"</span>);
articleTags.<span class="hljs-keyword">add</span>(<span class="hljs-string">"ç¼–ç¨‹"</span>);
articleTags.<span class="hljs-keyword">add</span>(<span class="hljs-string">"Java"</span>); <span class="hljs-comment">// è¿™ä¸ªä¸ä¼šé‡å¤æ·»åŠ </span>
</code></pre>
<h4 data-id="heading-13">åœºæ™¯3ï¼šæƒé™éªŒè¯</h4>
<p>java</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æœ‰æƒé™</span>
<span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">String</span>&gt; userPermissions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;(<span class="hljs-title class_">Arrays</span>.<span class="hljs-title function_">asList</span>(<span class="hljs-string">"read"</span>, <span class="hljs-string">"write"</span>));
<span class="hljs-keyword">if</span> (userPermissions.<span class="hljs-title function_">contains</span>(<span class="hljs-string">"admin"</span>)) {
    <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"æœ‰ç®¡ç†å‘˜æƒé™"</span>);
}
</code></pre>
<h3 data-id="heading-14">æ€§èƒ½å¯¹æ¯”è¡¨</h3>



































<table><thead><tr><th>æ“ä½œ</th><th>HashSet</th><th>TreeSet</th><th>LinkedHashSet</th></tr></thead><tbody><tr><td>æ·»åŠ å…ƒç´ </td><td>âš¡ï¸ è¶…å¿«</td><td>ğŸ¢ è¾ƒæ…¢ï¼ˆè¦æ’åºï¼‰</td><td>âš¡ï¸ å¿«</td></tr><tr><td>æŸ¥æ‰¾å…ƒç´ </td><td>âš¡ï¸ è¶…å¿«</td><td>ğŸ¢ è¾ƒå¿«</td><td>âš¡ï¸ è¶…å¿«</td></tr><tr><td>åˆ é™¤å…ƒç´ </td><td>âš¡ï¸ è¶…å¿«</td><td>ğŸ¢ è¾ƒæ…¢</td><td>âš¡ï¸ å¿«</td></tr><tr><td>ä¿æŒé¡ºåº</td><td>âŒ ä¸ä¿è¯</td><td>âœ… è‡ªåŠ¨æ’åº</td><td>âœ… æ’å…¥é¡ºåº</td></tr></tbody></table>
<h3 data-id="heading-15">é¿å‘æŒ‡å—</h3>
<h4 data-id="heading-16">è‡ªå®šä¹‰å¯¹è±¡çš„å»é‡</h4>
<p>å¦‚æœSetä¸­å­˜æ”¾è‡ªå®šä¹‰å¯¹è±¡ï¼Œéœ€è¦é‡å†™equals()å’ŒhashCode()æ–¹æ³•ï¼š</p>
<p>java</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Immortal</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">String</span> name;
    <span class="hljs-keyword">private</span> int age;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Immortal</span>(<span class="hljs-title class_">String</span> name, int age) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">equals</span>(<span class="hljs-params"><span class="hljs-built_in">Object</span> o</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span> == o) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (o == <span class="hljs-literal">null</span> || <span class="hljs-title function_">getClass</span>() != o.<span class="hljs-title function_">getClass</span>()) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-title class_">Immortal</span> immortal = (<span class="hljs-title class_">Immortal</span>) o;
        <span class="hljs-keyword">return</span> age == immortal.<span class="hljs-property">age</span> &amp;&amp; <span class="hljs-title class_">Objects</span>.<span class="hljs-title function_">equals</span>(name, immortal.<span class="hljs-property">name</span>);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> int <span class="hljs-title function_">hashCode</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Objects</span>.<span class="hljs-title function_">hash</span>(name, age);
    }
}

<span class="hljs-comment">// ç°åœ¨å¯ä»¥æ­£ç¡®å»é‡äº†</span>
<span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">Immortal</span>&gt; immortals = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
immortals.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Immortal</span>(<span class="hljs-string">"å•æ´å®¾"</span>, <span class="hljs-number">1000</span>));
immortals.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Immortal</span>(<span class="hljs-string">"å•æ´å®¾"</span>, <span class="hljs-number">1000</span>)); <span class="hljs-comment">// è¿™ä¸ªä¸ä¼šé‡å¤æ·»åŠ </span>
</code></pre>
<h3 data-id="heading-17">é€‰æ‹©å£è¯€</h3>
<ul>
<li><strong>è¦æœ€å¿«æŸ¥æ‰¾</strong>ï¼šç”¨HashSet</li>
<li><strong>è¦è‡ªåŠ¨æ’åº</strong>ï¼šç”¨TreeSet</li>
<li><strong>è¦ä¿æŒæ’å…¥é¡ºåº</strong>ï¼šç”¨LinkedHashSet</li>
<li><strong>å­˜æ”¾è‡ªå®šä¹‰å¯¹è±¡</strong>ï¼šè®°å¾—é‡å†™equalså’ŒhashCodeï¼</li>
</ul>
<h3 data-id="heading-18">æ€»ç»“</h3>
<p>Setå°±åƒæ˜¯Javaä¸–ç•Œçš„"å»é‡å¤§å¸ˆ"ï¼š</p>
<ul>
<li><strong>HashSet</strong>ï¼šé—ªç”µæŸ¥æ‰¾ï¼Œé€‚åˆå¤§å¤šæ•°åœºæ™¯</li>
<li><strong>TreeSet</strong>ï¼šè‡ªåŠ¨æ’åºï¼Œéœ€è¦æœ‰åºæ—¶ä½¿ç”¨</li>
<li><strong>LinkedHashSet</strong>ï¼šä¿æŒé¡ºåºï¼Œéœ€è¦è®°å½•æ’å…¥é¡ºåºæ—¶ä½¿ç”¨</li>
</ul>
<p>è®°ä½ï¼šSetçš„æ ¸å¿ƒä½¿å‘½å°±æ˜¯<strong>å»é‡</strong>ï¼å½“ä½ éœ€è¦ç¡®ä¿å…ƒç´ å”¯ä¸€æ€§æ—¶ï¼Œè¯·æ¯«ä¸çŠ¹è±«åœ°è¯·å‡ºSetå¤§æ³•ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[S2C-SQL DELETE åˆ é™¤æ•°æ®å®Œå…¨æŒ‡å—-99%çš„äººå¿˜è®°WHEREå­å¥ï¼ŒSQLé«˜æ‰‹å´è¿™æ ·å†™ï¼šä»åŸºç¡€è¯­æ³•åˆ°å¤šè¡¨å…³è”çš„æ•°æ®åˆ é™¤åˆ©å™¨]]></title>    <link>https://juejin.cn/post/7572459217812160575</link>    <guid>https://juejin.cn/post/7572459217812160575</guid>    <pubDate>2025-11-16T01:28:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572459217812160575" data-draft-id="7572465262739734547" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="S2C-SQL DELETE åˆ é™¤æ•°æ®å®Œå…¨æŒ‡å—-99%çš„äººå¿˜è®°WHEREå­å¥ï¼ŒSQLé«˜æ‰‹å´è¿™æ ·å†™ï¼šä»åŸºç¡€è¯­æ³•åˆ°å¤šè¡¨å…³è”çš„æ•°æ®åˆ é™¤åˆ©å™¨"/> <meta itemprop="keywords" content="SQL"/> <meta itemprop="datePublished" content="2025-11-16T01:28:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éƒ‘æ©èµ"/> <meta itemprop="url" content="https://juejin.cn/user/2883382090934252"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            S2C-SQL DELETE åˆ é™¤æ•°æ®å®Œå…¨æŒ‡å—-99%çš„äººå¿˜è®°WHEREå­å¥ï¼ŒSQLé«˜æ‰‹å´è¿™æ ·å†™ï¼šä»åŸºç¡€è¯­æ³•åˆ°å¤šè¡¨å…³è”çš„æ•°æ®åˆ é™¤åˆ©å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2883382090934252/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éƒ‘æ©èµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T01:28:08.000Z" title="Sun Nov 16 2025 01:28:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»28åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">S2C-SQL DELETE åˆ é™¤æ•°æ®å®Œå…¨æŒ‡å—-99%çš„äººå¿˜è®°WHEREå­å¥ï¼ŒSQLé«˜æ‰‹å´è¿™æ ·å†™ï¼šä»åŸºç¡€è¯­æ³•åˆ°å¤šè¡¨å…³è”çš„æ•°æ®åˆ é™¤åˆ©å™¨</h2>
<h3 data-id="heading-1">ğŸ“ æ‘˜è¦</h3>
<p>99% çš„äººæ‰§è¡Œ DELETE æ—¶å¿˜è®° WHERE å­å¥ï¼Œå¯¼è‡´å…¨è¡¨æ•°æ®è¢«è¯¯åˆ ï¼ŸSQL é«˜æ‰‹å´æŒæ¡ WHERE æ¡ä»¶ã€æ ‡è®°åˆ é™¤ã€æ•°æ®å½’æ¡£ç­‰æŠ€å·§ï¼Œæ•°æ®åˆ é™¤ç²¾å‡†å®‰å…¨ã€‚æœ¬æ–‡æ¡£ç”¨ç”Ÿæ´»åŒ–æ¯”å–»è§£æ SQL DELETE åˆ é™¤æ•°æ®ï¼Œä»åŸºç¡€è¯­æ³•åˆ°æ€§èƒ½ä¼˜åŒ–ï¼Œå¸®ä½ æŒæ¡æ•°æ®åˆ é™¤æ ¸å¿ƒæŠ€èƒ½ï¼Œé¿å…æ•°æ®ç¾éš¾ã€‚</p>
<hr/>
<blockquote>
<p><strong>é¢è¯•åœºæ™¯</strong>ï¼š</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šè¯·ä½ è¯´è¯´ SQL DELETE è¯­å¥çš„åŸºæœ¬ç”¨æ³•ï¼Ÿ</p>
<p><strong>æ±‚èŒè€… Aï¼ˆé”™è¯¯å›ç­”ï¼‰</strong>ï¼šDELETE å°±æ˜¯åˆ é™¤æ•°æ®ï¼Œç›´æ¥å†™ <code>DELETE FROM table</code> å°±è¡Œäº†ã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šå¦‚æœè¡¨é‡Œæœ‰ 10000 æ¡æ•°æ®ï¼Œä½ è¿™æ ·å†™ä¼šæ€æ ·ï¼Ÿ</p>
<p><strong>æ±‚èŒè€… A</strong>ï¼šå‘ƒ...åº”è¯¥åªä¼šåˆ é™¤ä¸€æ¡å§ï¼Ÿ</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šâŒ é”™è¯¯ï¼è¿™æ ·ä¼šåˆ é™¤æ‰€æœ‰ 10000 æ¡æ•°æ®ï¼è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ 99% çš„äººä¼šçŠ¯çš„é”™è¯¯ã€‚</p>
<p><strong>æ±‚èŒè€… Bï¼ˆæ­£ç¡®å›ç­”ï¼‰</strong>ï¼šDELETE è¯­å¥ç”¨äºåˆ é™¤è¡¨ä¸­å·²å­˜åœ¨çš„è®°å½•ã€‚åŸºæœ¬è¯­æ³•æ˜¯ <code>DELETE FROM table_name WHERE condition</code>ã€‚<strong>WHERE å­å¥éå¸¸é‡è¦</strong>ï¼Œå®ƒæŒ‡å®šå“ªäº›è®°å½•éœ€è¦åˆ é™¤ã€‚å¦‚æœçœç•¥ WHERE å­å¥ï¼Œæ‰€æœ‰è®°å½•éƒ½ä¼šè¢«åˆ é™¤ï¼Œè¿™å¯èƒ½å¯¼è‡´æ•°æ®ç¾éš¾ã€‚</p>
<p><strong>é¢è¯•å®˜</strong>ï¼šâœ… æ­£ç¡®ï¼çœ‹æ¥ä½ æŒæ¡äº† DELETE çš„æ ¸å¿ƒè¦ç‚¹ã€‚</p>
<p>é€šè¿‡è¿™ä¸ªé¢è¯•åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒæŒæ¡ DELETE è¯­å¥çš„å…³é”®åœ¨äºç†è§£ WHERE å­å¥çš„é‡è¦æ€§ï¼Œä»¥åŠå¦‚ä½•æ­£ç¡®ä½¿ç”¨å„ç§åˆ é™¤æŠ€å·§ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ¥æ·±å…¥å­¦ä¹  SQL DELETE è¯­å¥ï¼Œä»åŸºç¡€è¯­æ³•åˆ°æ€§èƒ½ä¼˜åŒ–ï¼ŒæŒæ¡æ•°æ®åˆ é™¤çš„æ ¸å¿ƒæŠ€èƒ½ã€‚</p>
</blockquote>
<h3 data-id="heading-2">ğŸ“‘ ç›®å½•</h3>
<ul>
<li><a href="#-%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86%E7%82%B9" title="#-%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86%E7%82%B9">ğŸ¯ å‰ç½®çŸ¥è¯†ç‚¹</a></li>
<li><a href="#-%E4%BB%80%E4%B9%88%E6%98%AF-delete" title="#-%E4%BB%80%E4%B9%88%E6%98%AF-delete">ğŸ” ä»€ä¹ˆæ˜¯ DELETEï¼Ÿ</a></li>
<li><a href="#-%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0" title="#-%E9%97%AE%E9%A2%98%E6%8F%8F%E8%BF%B0">â“ é—®é¢˜æè¿°</a></li>
<li><a href="#-%E9%97%AE%E9%A2%98%E8%80%83%E5%AF%9F%E7%82%B9" title="#-%E9%97%AE%E9%A2%98%E8%80%83%E5%AF%9F%E7%82%B9">ğŸ¯ é—®é¢˜è€ƒå¯Ÿç‚¹</a></li>
<li><a href="#-%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B" title="#-%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B">âš¡ å¿«é€Ÿä¸Šæ‰‹</a></li>
<li><a href="#%EF%B8%8F-delete-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95" title="#%EF%B8%8F-delete-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95">ğŸ—ï¸ DELETE åŸºæœ¬è¯­æ³•</a></li>
<li><a href="#-%E5%8D%95%E8%A1%A8%E5%88%A0%E9%99%A4" title="#-%E5%8D%95%E8%A1%A8%E5%88%A0%E9%99%A4">ğŸ“Š å•è¡¨åˆ é™¤</a></li>
<li><a href="#-delete-%E4%B8%8E-where-%E5%AD%90%E5%8F%A5" title="#-delete-%E4%B8%8E-where-%E5%AD%90%E5%8F%A5">ğŸ” DELETE ä¸ WHERE å­å¥</a></li>
<li><a href="#-delete-%E4%B8%8E%E5%AD%90%E6%9F%A5%E8%AF%A2" title="#-delete-%E4%B8%8E%E5%AD%90%E6%9F%A5%E8%AF%A2">ğŸ”— DELETE ä¸å­æŸ¥è¯¢</a></li>
<li><a href="#-delete-%E4%B8%8E-join" title="#-delete-%E4%B8%8E-join">ğŸ”€ DELETE ä¸ JOIN</a></li>
<li><a href="#-%E4%B8%8D%E5%90%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%AD%E6%B3%95%E5%B7%AE%E5%BC%82" title="#-%E4%B8%8D%E5%90%8C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AF%AD%E6%B3%95%E5%B7%AE%E5%BC%82">ğŸŒ ä¸åŒæ•°æ®åº“è¯­æ³•å·®å¼‚</a></li>
<li><a href="#%EF%B8%8F-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E8%AD%A6%E5%91%8A" title="#%EF%B8%8F-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9%E5%92%8C%E8%AD%A6%E5%91%8A">âš ï¸ æ³¨æ„äº‹é¡¹å’Œè­¦å‘Š</a></li>
<li><a href="#-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96" title="#-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96">ğŸš€ æ€§èƒ½ä¼˜åŒ–</a></li>
<li><a href="#-%E5%AF%B9%E6%AF%94%E7%A4%BA%E4%BE%8B" title="#-%E5%AF%B9%E6%AF%94%E7%A4%BA%E4%BE%8B">ğŸ†š å¯¹æ¯”ç¤ºä¾‹</a></li>
<li><a href="#-%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF%E4%B8%8E%E4%BF%AE%E6%AD%A3" title="#-%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF%E4%B8%8E%E4%BF%AE%E6%AD%A3">ğŸ› å¸¸è§é”™è¯¯ä¸ä¿®æ­£</a></li>
<li><a href="#-%E5%AE%9E%E6%88%98%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B" title="#-%E5%AE%9E%E6%88%98%E5%BA%94%E7%94%A8%E6%A1%88%E4%BE%8B">ğŸ’¼ å®æˆ˜åº”ç”¨æ¡ˆä¾‹</a></li>
<li><a href="#-%E6%80%BB%E7%BB%93" title="#-%E6%80%BB%E7%BB%93">ğŸ“š æ€»ç»“</a></li>
</ul>
<hr/>
<h3 data-id="heading-3">ğŸ¯ å‰ç½®çŸ¥è¯†ç‚¹</h3>
<h4 data-id="heading-4">åŸºç¡€çŸ¥è¯†ç‚¹ï¼ˆå¿…é¡»æŒæ¡ï¼‰</h4>
<ul>
<li><strong>æ•°æ®åº“è¡¨ç»“æ„</strong>ï¼šç†è§£è¡¨ã€å­—æ®µã€è®°å½•çš„æ¦‚å¿µ</li>
<li><strong>æ•°æ®ç±»å‹</strong>ï¼šäº†è§£å¸¸è§æ•°æ®ç±»å‹ï¼ˆæ•´æ•°ã€å­—ç¬¦ä¸²ã€æ—¥æœŸç­‰ï¼‰</li>
<li><strong>SQL åŸºç¡€è¯­æ³•</strong>ï¼šç†è§£ SQL è¯­å¥çš„åŸºæœ¬ç»“æ„</li>
<li><strong>WHERE å­å¥</strong>ï¼šæŒæ¡ WHERE æ¡ä»¶ç­›é€‰çš„åŸºæœ¬ç”¨æ³•ï¼ˆå‚è§ <a href="https://link.juejin.cn?target=.%2FS1D-SQL%2520WHERE%2520%25E6%259D%25A1%25E4%25BB%25B6%25E7%25AD%259B%25E9%2580%2589%25E5%25AE%258C%25E5%2585%25A8%25E6%258C%2587%25E5%258D%2597-99%2525%25E7%259A%2584%25E4%25BA%25BA%25E5%258F%25AA%25E4%25BC%259A%25E7%2594%25A8%25E7%25AD%2589%25E4%25BA%258E%25E5%2592%258C%25E5%25A4%25A7%25E4%25BA%258E%25EF%25BC%258CSQL%25E9%25AB%2598%25E6%2589%258B%25E5%258D%25B4%25E8%25BF%2599%25E6%25A0%25B7%25E5%2586%2599%25EF%25BC%259A%25E4%25BB%258E%25E5%259F%25BA%25E7%25A1%2580%25E8%25BF%2590%25E7%25AE%2597%25E7%25AC%25A6%25E5%2588%25B0%25E5%25A4%258D%25E6%259D%2582%25E6%259D%25A1%25E4%25BB%25B6%25E7%259A%2584%25E6%2595%25B0%25E6%258D%25AE%25E8%25BF%2587%25E6%25BB%25A4%25E5%2588%25A9%25E5%2599%25A8.md" target="_blank" title="./S1D-SQL%20WHERE%20%E6%9D%A1%E4%BB%B6%E7%AD%9B%E9%80%89%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97-99%25%E7%9A%84%E4%BA%BA%E5%8F%AA%E4%BC%9A%E7%94%A8%E7%AD%89%E4%BA%8E%E5%92%8C%E5%A4%A7%E4%BA%8E%EF%BC%8CSQL%E9%AB%98%E6%89%8B%E5%8D%B4%E8%BF%99%E6%A0%B7%E5%86%99%EF%BC%9A%E4%BB%8E%E5%9F%BA%E7%A1%80%E8%BF%90%E7%AE%97%E7%AC%A6%E5%88%B0%E5%A4%8D%E6%9D%82%E6%9D%A1%E4%BB%B6%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BF%87%E6%BB%A4%E5%88%A9%E5%99%A8.md" ref="nofollow noopener noreferrer">S1D-SQL WHERE æ¡ä»¶ç­›é€‰å®Œå…¨æŒ‡å—</a>ï¼‰</li>
</ul>
<h4 data-id="heading-5">è¿›é˜¶çŸ¥è¯†ç‚¹ï¼ˆå»ºè®®äº†è§£ï¼‰</h4>
<ul>
<li><strong>çº¦æŸï¼ˆconstraintï¼‰</strong>ï¼šäº†è§£ä¸»é”®ï¼ˆprimary keyï¼‰ã€å¤–é”®ï¼ˆforeign keyï¼‰ã€å”¯ä¸€æ€§çº¦æŸï¼ˆunique constraintï¼‰çš„ä½œç”¨</li>
<li><strong>å­æŸ¥è¯¢ï¼ˆsubqueryï¼‰</strong>ï¼šäº†è§£å­æŸ¥è¯¢çš„åŸºæœ¬æ¦‚å¿µå’Œä½¿ç”¨æ–¹æ³•</li>
<li><strong>å¤šè¡¨å…³è”ï¼ˆJOINï¼‰</strong>ï¼šäº†è§£è¡¨ä¸è¡¨ä¹‹é—´çš„å…³è”å…³ç³»</li>
<li><strong>äº‹åŠ¡ï¼ˆtransactionï¼‰</strong>ï¼šäº†è§£äº‹åŠ¡çš„åŸºæœ¬æ¦‚å¿µï¼Œç†è§£ COMMIT å’Œ ROLLBACK çš„ä½œç”¨</li>
</ul>
<h4 data-id="heading-6">å­¦ä¹ å»ºè®®</h4>
<ul>
<li><strong>å°ç™½ï¼ˆé›¶åŸºç¡€ï¼‰</strong>ï¼šå…ˆç†è§£è¡¨çš„åŸºæœ¬æ¦‚å¿µï¼ŒæŒæ¡ DELETE çš„åŸºæœ¬è¯­æ³•ï¼Œé‡ç‚¹ç†è§£ WHERE å­å¥çš„é‡è¦æ€§</li>
<li><strong>åˆçº§ï¼ˆåˆšå…¥é—¨ä¸ä¹…ï¼‰</strong>ï¼šå­¦ä¼šä½¿ç”¨ DELETE åˆ é™¤å•æ¡è®°å½•å’Œå¤šæ¡è®°å½•ï¼ŒæŒæ¡ WHERE æ¡ä»¶çš„ä½¿ç”¨</li>
<li><strong>ä¸­çº§ï¼ˆå…¥é—¨ä¸€æ®µæ—¶é—´ï¼‰</strong>ï¼šæŒæ¡ DELETE ä¸å­æŸ¥è¯¢ã€å¤šè¡¨å…³è”åˆ é™¤ã€æ ‡è®°åˆ é™¤ç­‰é«˜çº§æŠ€å·§</li>
<li><strong>é«˜çº§ï¼ˆèµ„æ·±å¼€å‘è€…ï¼‰</strong>ï¼šç†è§£ DELETE çš„æ€§èƒ½ä¼˜åŒ–ã€äº‹åŠ¡å¤„ç†ã€æ•°æ®å½’æ¡£ç­‰é«˜çº§ç‰¹æ€§</li>
</ul>
<hr/>
<h3 data-id="heading-7">ğŸ” ä»€ä¹ˆæ˜¯ DELETEï¼Ÿ</h3>
<h4 data-id="heading-8">æ ¸å¿ƒæ¦‚å¿µ</h4>
<p><strong>DELETEï¼ˆåˆ é™¤ï¼‰</strong> æ˜¯ SQL ä¸­ç”¨äºåˆ é™¤è¡¨ä¸­å·²å­˜åœ¨è®°å½•çš„è¯­å¥ã€‚</p>
<p><strong>ç”Ÿæ´»åŒ–æ¯”å–»</strong>ï¼šDELETE å°±åƒä»å›¾ä¹¦é¦†çš„ä¹¦ç±ç™»è®°å†Œï¼ˆè¡¨ï¼‰ä¸­åˆ é™¤æŸæ¡è®°å½•ã€‚æ¯”å¦‚æŸæœ¬ä¹¦å·²ç»ä¸¢å¤±ï¼Œéœ€è¦ä»ç™»è®°å†Œä¸­åˆ é™¤è¿™æ¡è®°å½•ã€‚DELETE ä¸ä¼šåˆ é™¤è¡¨ç»“æ„ï¼Œåªä¼šåˆ é™¤è¡¨ä¸­çš„æ•°æ®è®°å½•ã€‚</p>
<p>è®©æˆ‘ä»¬æ¥ç†è§£ä¸€ä¸‹ DELETE è¯­å¥çš„æœ¬è´¨ï¼šå®ƒæ˜¯å¯¹è¡¨ä¸­æ•°æ®çš„åˆ é™¤æ“ä½œï¼Œè€Œä¸æ˜¯å¯¹è¡¨ç»“æ„çš„ä¿®æ”¹ã€‚</p>
<h4 data-id="heading-9">ä¸ºä»€ä¹ˆéœ€è¦ DELETEï¼Ÿ</h4>
<h5 data-id="heading-10">âŒ ä¸ä½¿ç”¨ DELETE ä¼šæ€æ ·ï¼Ÿ</h5>
<p><strong>é—®é¢˜åœºæ™¯</strong>ï¼šå­¦ç”Ÿè¡¨ä¸­æŸä¸ªå­¦ç”Ÿå·²ç»é€€å­¦ï¼Œéœ€è¦åˆ é™¤ä»–çš„è®°å½•</p>
<p><strong>ä¸ä½¿ç”¨ DELETE</strong>ï¼š</p>
<ul>
<li>æ— æ³•åˆ é™¤å·²å­˜åœ¨çš„æ•°æ®</li>
<li>åªèƒ½æ‰‹åŠ¨ä¿®æ”¹è¡¨ç»“æ„ï¼ˆç¹çä¸”å®¹æ˜“å‡ºé”™ï¼‰</li>
<li>æ— æ³•æ‰¹é‡åˆ é™¤å¤šæ¡è®°å½•</li>
<li>æ— æ³•æ ¹æ®æ¡ä»¶é€‰æ‹©æ€§åˆ é™¤</li>
</ul>
<h5 data-id="heading-11">âœ… ä½¿ç”¨ DELETE çš„è§£å†³æ–¹æ¡ˆ</h5>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤å­¦ç”Ÿè¡¨ä¸­ id ä¸º 1 çš„å­¦ç”Ÿçš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… å¯ä»¥ç›´æ¥åˆ é™¤å·²å­˜åœ¨çš„æ•°æ®</li>
<li>âœ… æ“ä½œç®€å•ï¼Œä¸€æ¡è¯­å¥å³å¯å®Œæˆ</li>
<li>âœ… å¯ä»¥æ‰¹é‡åˆ é™¤å¤šæ¡è®°å½•</li>
<li>âœ… å¯ä»¥æ ¹æ®æ¡ä»¶é€‰æ‹©æ€§åˆ é™¤</li>
<li>âœ… å¯ä»¥é…åˆäº‹åŠ¡è¿›è¡Œå›æ»šæ“ä½œ</li>
</ul>
<hr/>
<h3 data-id="heading-12">â“ é—®é¢˜æè¿°</h3>
<h4 data-id="heading-13">çœŸå®åœºæ™¯</h4>
<p>æƒ³è±¡ä¸€ä¸‹è¿™æ ·çš„åœºæ™¯ï¼šä½ åœ¨ä¸€å®¶ç”µå•†å…¬å¸å·¥ä½œï¼Œè´Ÿè´£ç»´æŠ¤è®¢å•è¡¨ã€‚æŸå¤©ï¼Œäº§å“ç»ç†å‘Šè¯‰ä½ ï¼š"æˆ‘ä»¬éœ€è¦åˆ é™¤æ‰€æœ‰å·²å–æ¶ˆä¸”è¶…è¿‡ 30 å¤©çš„è®¢å•è®°å½•ã€‚"</p>
<p><strong>æ–°æ‰‹åšæ³•</strong>ï¼š</p>
<ul>
<li>å…ˆæŸ¥è¯¢æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„è®¢å•</li>
<li>ä¸€æ¡ä¸€æ¡æ‰‹åŠ¨åˆ é™¤æ¯æ¡è®°å½•</li>
<li>æˆ–è€…å†™ä¸€ä¸ªå¾ªç¯ï¼Œé€æ¡åˆ é™¤</li>
</ul>
<p><strong>é—®é¢˜</strong>ï¼š</p>
<ul>
<li>æ•ˆç‡ä½ä¸‹ï¼Œå¦‚æœç¬¦åˆæ¡ä»¶çš„è®¢å•æœ‰ 10000 ä¸ªï¼Œéœ€è¦æ‰§è¡Œ 10000 æ¬¡åˆ é™¤æ“ä½œ</li>
<li>å®¹æ˜“å‡ºé”™ï¼Œå¯èƒ½æ¼æ‰æŸäº›è®¢å•</li>
<li>ä»£ç å¤æ‚ï¼Œéœ€è¦å†™å¾ªç¯é€»è¾‘</li>
<li><strong>æœ€å±é™©çš„æ˜¯</strong>ï¼šå¦‚æœå¿˜è®°æ·»åŠ  WHERE æ¡ä»¶ï¼Œä¼šåˆ é™¤æ‰€æœ‰è®¢å•æ•°æ®ï¼</li>
</ul>
<p><strong>SQL é«˜æ‰‹åšæ³•</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¸€æ¡ DELETE è¯­å¥æå®š</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> orders 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'CANCELLED'</span> 
  <span class="hljs-keyword">AND</span> created_at <span class="hljs-operator">&lt;</span> DATE_SUB(NOW(), <span class="hljs-type">INTERVAL</span> <span class="hljs-number">30</span> <span class="hljs-keyword">DAY</span>);
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… ä¸€æ¡è¯­å¥å®Œæˆæ‰€æœ‰åˆ é™¤</li>
<li>âœ… æ•ˆç‡é«˜ï¼Œæ•°æ®åº“è‡ªåŠ¨ä¼˜åŒ–æ‰§è¡Œ</li>
<li>âœ… ä¸ä¼šæ¼æ‰ä»»ä½•ç¬¦åˆæ¡ä»¶çš„è®°å½•</li>
<li>âœ… ä»£ç ç®€æ´ï¼Œæ˜“äºç»´æŠ¤</li>
<li>âœ… å¯ä»¥å…ˆç”¨ SELECT æµ‹è¯•ï¼Œç¡®è®¤æ— è¯¯åå†æ‰§è¡Œ DELETE</li>
</ul>
<h4 data-id="heading-14">æ ¸å¿ƒç—›ç‚¹</h4>
<ol>
<li><strong>å¿˜è®° WHERE å­å¥</strong>ï¼š99% çš„äººåœ¨æ‰§è¡Œ DELETE æ—¶å¿˜è®°æ·»åŠ  WHERE æ¡ä»¶ï¼Œå¯¼è‡´å…¨è¡¨æ•°æ®è¢«è¯¯åˆ </li>
<li><strong>ä¸çŸ¥é“å¦‚ä½•æ‰¹é‡åˆ é™¤</strong>ï¼šé¢å¯¹å¤§é‡æ•°æ®éœ€è¦åˆ é™¤æ—¶ï¼Œä¸çŸ¥é“å¦‚ä½•é«˜æ•ˆå¤„ç†</li>
<li><strong>å¤šè¡¨å…³è”åˆ é™¤å›°éš¾</strong>ï¼šéœ€è¦æ ¹æ®å…¶ä»–è¡¨çš„æ•°æ®æ¥åˆ é™¤å½“å‰è¡¨æ—¶ï¼Œä¸çŸ¥é“å¦‚ä½•å†™ SQL</li>
<li><strong>æ€§èƒ½é—®é¢˜</strong>ï¼šåˆ é™¤å¤§é‡æ•°æ®æ—¶ï¼Œä¸çŸ¥é“å¦‚ä½•ä¼˜åŒ–æ€§èƒ½</li>
<li><strong>æ•°æ®æ¢å¤å›°éš¾</strong>ï¼šè¯¯åˆ æ•°æ®åï¼Œä¸çŸ¥é“å¦‚ä½•æ¢å¤</li>
</ol>
<hr/>
<h3 data-id="heading-15">ğŸ¯ é—®é¢˜è€ƒå¯Ÿç‚¹</h3>
<p>é€šè¿‡æœ¬æ–‡æ¡£çš„å­¦ä¹ ï¼Œä½ å°†æŒæ¡ä»¥ä¸‹æ ¸å¿ƒçŸ¥è¯†ç‚¹ï¼š</p>
<h4 data-id="heading-16">åŸºç¡€èƒ½åŠ› ğŸ”¥ Must</h4>
<ol>
<li><strong>DELETE åŸºæœ¬è¯­æ³•</strong>ï¼šæŒæ¡ DELETE è¯­å¥çš„åŸºæœ¬ç»“æ„å’Œè¯­æ³•è§„åˆ™</li>
<li><strong>WHERE å­å¥ä½¿ç”¨</strong>ï¼šç†è§£ WHERE å­å¥çš„é‡è¦æ€§ï¼ŒæŒæ¡æ¡ä»¶ç­›é€‰çš„å†™æ³•</li>
<li><strong>å•è¡¨åˆ é™¤</strong>ï¼šå­¦ä¼šåˆ é™¤å•æ¡è®°å½•ã€å¤šæ¡è®°å½•ï¼Œä»¥åŠåˆ é™¤å‰æ£€æŸ¥çš„æ–¹æ³•</li>
</ol>
<h4 data-id="heading-17">è¿›é˜¶èƒ½åŠ› â­ Should</h4>
<ol start="4">
<li><strong>å­æŸ¥è¯¢åˆ é™¤</strong>ï¼šå­¦ä¼šä½¿ç”¨å­æŸ¥è¯¢æ¥åˆ é™¤æ•°æ®ï¼Œç†è§£ EXISTS æ¡ä»¶çš„é‡è¦æ€§</li>
<li><strong>å¤šè¡¨å…³è”åˆ é™¤</strong>ï¼šæŒæ¡ MySQLã€SQL Server ç­‰ä¸åŒæ•°æ®åº“çš„å¤šè¡¨å…³è”åˆ é™¤è¯­æ³•</li>
<li><strong>æ ‡è®°åˆ é™¤</strong>ï¼šç†è§£æ ‡è®°åˆ é™¤ vs ç‰©ç†åˆ é™¤çš„åŒºåˆ«ï¼ŒæŒæ¡æ ‡è®°åˆ é™¤çš„æœ€ä½³å®è·µ</li>
</ol>
<h4 data-id="heading-18">é«˜çº§èƒ½åŠ› ğŸ’¡ Could</h4>
<ol start="7">
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šäº†è§£ DELETE vs TRUNCATEã€æ•°æ®å½’æ¡£ã€åˆ†æ‰¹åˆ é™¤ã€è¡Œé”ä¼˜åŒ–ç­‰æ€§èƒ½ä¼˜åŒ–æŠ€å·§</li>
<li><strong>ä¸åŒæ•°æ®åº“å·®å¼‚</strong>ï¼šäº†è§£ MySQLã€Oracleã€SQL Serverã€PostgreSQL ç­‰æ•°æ®åº“çš„è¯­æ³•å·®å¼‚</li>
<li><strong>å®æˆ˜åº”ç”¨</strong>ï¼šæŒæ¡å„ç§å®é™…ä¸šåŠ¡åœºæ™¯ä¸‹çš„ DELETE åº”ç”¨æŠ€å·§</li>
</ol>
<hr/>
<h3 data-id="heading-19">âš¡ å¿«é€Ÿä¸Šæ‰‹ ğŸ”¥ Must</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­æ¥å¿«é€Ÿäº†è§£ DELETE è¯­å¥çš„ä½¿ç”¨æ–¹æ³•ã€‚é€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿç†è§£ DELETE è¯­å¥çš„åŸºæœ¬ç”¨æ³•ã€‚</p>
<h4 data-id="heading-20">æœ€ç®€å•çš„ DELETE ç¤ºä¾‹</h4>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå­¦ç”Ÿè¡¨ <code>students</code>ï¼Œç°åœ¨éœ€è¦åˆ é™¤ id ä¸º 1 çš„å­¦ç”Ÿçš„è®°å½•ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤å­¦ç”Ÿè¡¨ä¸­ id ä¸º 1 çš„å­¦ç”Ÿçš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<p><strong>é€è¡Œä»£ç è§£é‡Š</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- DELETE FROM ä½œç”¨ï¼šæŒ‡å®šè¦åˆ é™¤æ•°æ®çš„è¡¨</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 

<span class="hljs-comment">-- WHERE ä½œç”¨ï¼šæŒ‡å®šåˆ é™¤æ¡ä»¶ï¼Œåªåˆ é™¤ id ä¸º 1 çš„è®°å½•</span>
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<p><strong>æ‰§è¡Œç»“æœ</strong>ï¼š</p>
<ul>
<li>å¦‚æœ id ä¸º 1 çš„è®°å½•å­˜åœ¨ï¼Œåˆ™åˆ é™¤è¯¥è®°å½•</li>
<li>å¦‚æœ id ä¸º 1 çš„è®°å½•ä¸å­˜åœ¨ï¼Œåˆ™ä¸åˆ é™¤ä»»ä½•è®°å½•ï¼ˆä¸ä¼šæŠ¥é”™ï¼‰</li>
</ul>
<p><strong>é‡è¦æé†’</strong>ï¼šâš ï¸ <strong>WHERE å­å¥éå¸¸é‡è¦ï¼</strong> å¦‚æœçœç•¥ WHERE å­å¥ï¼Œä¼šåˆ é™¤è¡¨ä¸­çš„æ‰€æœ‰è®°å½•ï¼è¯¦ç»†è¯´æ˜è¯·å‚è§ <a href="#-delete-%E4%B8%8E-where-%E5%AD%90%E5%8F%A5" title="#-delete-%E4%B8%8E-where-%E5%AD%90%E5%8F%A5">DELETE ä¸ WHERE å­å¥</a> ç« èŠ‚ã€‚</p>
<hr/>
<h3 data-id="heading-21">ğŸ—ï¸ DELETE åŸºæœ¬è¯­æ³• ğŸ”¥ Must</h3>
<h4 data-id="heading-22">åŸºæœ¬è¯­æ³•ç»“æ„</h4>
<p><strong>æ ‡å‡†è¯­æ³•</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> table_name 
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">condition</span>;
</code></pre>
<p><strong>è¯­æ³•è¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>DELETE FROM</code>ï¼šåˆ é™¤å‘½ä»¤å…³é”®å­—</li>
<li><code>table_name</code>ï¼šè¦åˆ é™¤æ•°æ®çš„è¡¨å</li>
<li><code>WHERE condition</code>ï¼šåˆ é™¤æ¡ä»¶ï¼Œç”¨äºæŒ‡å®šå“ªäº›æ•°æ®è¦åˆ é™¤ï¼ˆ<strong>å¯é€‰ï¼Œä½†å¼ºçƒˆå»ºè®®ä½¿ç”¨</strong>ï¼‰</li>
</ul>
<h4 data-id="heading-23">å‚æ•°è¯´æ˜</h4>




















<table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>æ˜¯å¦å¿…éœ€</th></tr></thead><tbody><tr><td><code>table_name</code></td><td>è¦åˆ é™¤æ•°æ®çš„è¡¨å</td><td>âœ… å¿…éœ€</td></tr><tr><td><code>WHERE condition</code></td><td>åˆ é™¤æ¡ä»¶</td><td>âš ï¸ å¯é€‰ï¼Œä½†å¼ºçƒˆå»ºè®®ä½¿ç”¨</td></tr></tbody></table>
<h4 data-id="heading-24">é‡è¦æé†’</h4>
<p>âš ï¸ <strong>WHERE å­å¥çš„é‡è¦æ€§</strong>å’Œ<strong>åˆ é™¤å‰æ£€æŸ¥</strong>çš„è¯¦ç»†è¯´æ˜ï¼Œè¯·å‚è§ <a href="#-delete-%E4%B8%8E-where-%E5%AD%90%E5%8F%A5" title="#-delete-%E4%B8%8E-where-%E5%AD%90%E5%8F%A5">DELETE ä¸ WHERE å­å¥</a> ç« èŠ‚ã€‚</p>
<hr/>
<h3 data-id="heading-25">ğŸ“Š å•è¡¨åˆ é™¤ ğŸ”¥ Must</h3>
<h4 data-id="heading-26">åˆ é™¤å•æ¡è®°å½•</h4>
<p><strong>è¯­æ³•</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> table_name 
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">condition</span>;
</code></pre>
<p><strong>ç¤ºä¾‹ 1ï¼šåˆ é™¤æŒ‡å®š ID çš„è®°å½•</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤å­¦ç”Ÿè¡¨ä¸­ id ä¸º 1 çš„å­¦ç”Ÿçš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<p><strong>ç¤ºä¾‹ 2ï¼šåˆ é™¤æŒ‡å®šå§“åçš„è®°å½•</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤å­¦ç”Ÿè¡¨ä¸­å§“åä¸º"å¼ ä¸‰"çš„å­¦ç”Ÿçš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'å¼ ä¸‰'</span>;
</code></pre>
<p><strong>ç¤ºä¾‹ 3ï¼šåˆ é™¤æŒ‡å®šæ¡ä»¶çš„è®°å½•</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤å­¦ç”Ÿè¡¨ä¸­æˆç»©å°äº 60 åˆ†çš„å­¦ç”Ÿçš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>;
</code></pre>
<h4 data-id="heading-27">åˆ é™¤å¤šæ¡è®°å½•</h4>
<p><strong>è¯­æ³•</strong>ï¼šä¸åˆ é™¤å•æ¡è®°å½•ç›¸åŒï¼ŒWHERE æ¡ä»¶åŒ¹é…å¤šæ¡è®°å½•å³å¯</p>
<p><strong>ç¤ºä¾‹ 1ï¼šåˆ é™¤ç¬¦åˆæ¡ä»¶çš„å¤šæ¡è®°å½•</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤å­¦ç”Ÿè¡¨ä¸­æˆç»©å°äº 60 åˆ†çš„æ‰€æœ‰å­¦ç”Ÿçš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>;
</code></pre>
<p><strong>ç¤ºä¾‹ 2ï¼šä½¿ç”¨ IN åˆ é™¤å¤šæ¡è®°å½•</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤å­¦ç”Ÿè¡¨ä¸­ id ä¸º 1ã€2ã€3 çš„å­¦ç”Ÿçš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> id <span class="hljs-keyword">IN</span> (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
</code></pre>
<p><strong>ç¤ºä¾‹ 3ï¼šä½¿ç”¨ BETWEEN åˆ é™¤èŒƒå›´å†…çš„è®°å½•</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤å­¦ç”Ÿè¡¨ä¸­ id åœ¨ 1 åˆ° 100 ä¹‹é—´çš„å­¦ç”Ÿçš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> id <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">100</span>;
</code></pre>
<h4 data-id="heading-28">åˆ é™¤æ‰€æœ‰è®°å½•</h4>
<p><strong>è¯­æ³•</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> table_name;
</code></pre>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤å­¦ç”Ÿè¡¨ä¸­çš„æ‰€æœ‰è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students;
</code></pre>
<p><strong>é‡è¦æé†’</strong>ï¼š</p>
<ul>
<li>âš ï¸ <strong>è¿™ä¼šåˆ é™¤è¡¨ä¸­çš„æ‰€æœ‰è®°å½•ï¼</strong></li>
<li>âš ï¸ <strong>è¡¨ç»“æ„ã€å±æ€§å’Œç´¢å¼•å°†ä¿æŒä¸å˜</strong></li>
<li>âš ï¸ <strong>å¦‚æœè¦åˆ é™¤æ‰€æœ‰è®°å½•ï¼Œå»ºè®®ä½¿ç”¨ TRUNCATE TABLEï¼ˆæ€§èƒ½æ›´å¥½ï¼‰</strong></li>
</ul>
<p><strong>TRUNCATE vs DELETE</strong>ï¼š</p>
<ul>
<li><code>TRUNCATE TABLE</code> æ¯” <code>DELETE</code> æ›´å¿«</li>
<li><code>TRUNCATE TABLE</code> ä½¿ç”¨è¾ƒå°‘çš„ç³»ç»Ÿå’Œäº‹åŠ¡æ—¥å¿—èµ„æº</li>
<li><code>TRUNCATE TABLE</code> ä¸èƒ½å›æ»šï¼ˆæŸäº›æ•°æ®åº“ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-29">ğŸ” DELETE ä¸ WHERE å­å¥ ğŸ”¥ Must</h3>
<h4 data-id="heading-30">WHERE å­å¥çš„é‡è¦æ€§</h4>
<p><strong>WHERE å­å¥æ˜¯ DELETE è¯­å¥çš„æ ¸å¿ƒ</strong>ï¼Œå®ƒå†³å®šäº†å“ªäº›è®°å½•ä¼šè¢«åˆ é™¤ã€‚æˆ‘ä»¬æ¥æ·±å…¥ç†è§£ä¸€ä¸‹ WHERE å­å¥çš„é‡è¦æ€§ã€‚</p>
<p><strong>é‡è¦åŸåˆ™</strong>ï¼š</p>
<ul>
<li>âœ… <strong>å§‹ç»ˆä½¿ç”¨ WHERE å­å¥</strong>ï¼šé™¤éä½ çœŸçš„æƒ³åˆ é™¤æ‰€æœ‰è®°å½•</li>
<li>âœ… <strong>åˆ é™¤å‰æ£€æŸ¥</strong>ï¼šå…ˆç”¨ SELECT æµ‹è¯• WHERE æ¡ä»¶</li>
<li>âœ… <strong>æ¡ä»¶è¦ç²¾ç¡®</strong>ï¼šç¡®ä¿ WHERE æ¡ä»¶å‡†ç¡®åŒ¹é…è¦åˆ é™¤çš„è®°å½•</li>
</ul>
<h4 data-id="heading-31">ä½¿ç”¨å•ä¸ªæ¡ä»¶</h4>
<p><strong>ç¤ºä¾‹ 1ï¼šä½¿ç”¨ç­‰äºæ¡ä»¶</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤ id ä¸º 1 çš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<p><strong>ç¤ºä¾‹ 2ï¼šä½¿ç”¨å¤§äºæ¡ä»¶</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤ id å¤§äº 100 çš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">&gt;</span> <span class="hljs-number">100</span>;
</code></pre>
<p><strong>ç¤ºä¾‹ 3ï¼šä½¿ç”¨ LIKE æ¡ä»¶</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤å§“åä»¥"å¼ "å¼€å¤´çš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'å¼ %'</span>;
</code></pre>
<h4 data-id="heading-32">ä½¿ç”¨å¤šä¸ªæ¡ä»¶</h4>
<p><strong>ç¤ºä¾‹ 1ï¼šä½¿ç”¨ AND è¿æ¥å¤šä¸ªæ¡ä»¶</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤æˆç»©å°äº 60 åˆ†ä¸”å¹´é¾„å¤§äº 20 å²çš„å­¦ç”Ÿçš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span> <span class="hljs-keyword">AND</span> age <span class="hljs-operator">&gt;</span> <span class="hljs-number">20</span>;
</code></pre>
<p><strong>ç¤ºä¾‹ 2ï¼šä½¿ç”¨ OR è¿æ¥å¤šä¸ªæ¡ä»¶</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤æˆç»©å°äº 60 åˆ†æˆ–å¹´é¾„å¤§äº 25 å²çš„å­¦ç”Ÿçš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span> <span class="hljs-keyword">OR</span> age <span class="hljs-operator">&gt;</span> <span class="hljs-number">25</span>;
</code></pre>
<p><strong>ç¤ºä¾‹ 3ï¼šä½¿ç”¨ NOT æ¡ä»¶</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤æˆç»©ä¸å°äº 60 åˆ†çš„å­¦ç”Ÿçš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">NOT</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>;
</code></pre>
<h4 data-id="heading-33">ä½¿ç”¨ NULL æ¡ä»¶</h4>
<p><strong>ç¤ºä¾‹ 1ï¼šåˆ é™¤ NULL å€¼</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤ email ä¸º NULL çš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> email <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>;
</code></pre>
<p><strong>ç¤ºä¾‹ 2ï¼šåˆ é™¤é NULL å€¼</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤ email ä¸ä¸º NULL çš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> email <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>;
</code></pre>
<h4 data-id="heading-34">åˆ é™¤å‰æ£€æŸ¥çš„æœ€ä½³å®è·µ</h4>
<p><strong>å»ºè®®æµç¨‹</strong>ï¼š</p>
<ol>
<li><strong>ç¬¬ä¸€æ­¥ï¼šå…ˆç”¨ SELECT æŸ¥çœ‹ä¼šåˆ é™¤å“ªäº›è®°å½•</strong></li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥çœ‹è¦åˆ é™¤çš„è®°å½•</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>;
</code></pre>
<ol start="2">
<li><strong>ç¬¬äºŒæ­¥ï¼šç¡®è®¤è®°å½•æ•°é‡å’Œå†…å®¹</strong></li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥çœ‹è¦åˆ é™¤çš„è®°å½•æ•°é‡</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>;
</code></pre>
<ol start="3">
<li><strong>ç¬¬ä¸‰æ­¥ï¼šç¡®è®¤æ— è¯¯åï¼Œå†æ‰§è¡Œ DELETE</strong></li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ‰§è¡Œåˆ é™¤</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>;
</code></pre>
<hr/>
<h3 data-id="heading-35">ğŸ”— DELETE ä¸å­æŸ¥è¯¢ â­ Should</h3>
<h4 data-id="heading-36">åŸºäºå­æŸ¥è¯¢åˆ é™¤</h4>
<p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨å­æŸ¥è¯¢æ¥åˆ é™¤æ•°æ®ã€‚é€šè¿‡å­æŸ¥è¯¢ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å…¶ä»–è¡¨çš„æ•°æ®æ¥å†³å®šè¦åˆ é™¤å“ªäº›è®°å½•ã€‚</p>
<p><strong>è¯­æ³•</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> table_name 
<span class="hljs-keyword">WHERE</span> column_name <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> column_name <span class="hljs-keyword">FROM</span> other_table <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">condition</span>);
</code></pre>
<p><strong>ç¤ºä¾‹ 1ï¼šåŸºäºå¦ä¸€ä¸ªè¡¨çš„æ•°æ®åˆ é™¤</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤é”€å”®äººå‘˜çš„é…é¢å†å²è®°å½•ï¼Œè¿™äº›é”€å”®äººå‘˜çš„å¹´åº¦é”€å”®é¢è¶…è¿‡ 2500000</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> Sales.SalesPersonQuotaHistory   
<span class="hljs-keyword">WHERE</span> BusinessEntityID <span class="hljs-keyword">IN</span>   
    (<span class="hljs-keyword">SELECT</span> BusinessEntityID   
     <span class="hljs-keyword">FROM</span> Sales.SalesPerson   
     <span class="hljs-keyword">WHERE</span> SalesYTD <span class="hljs-operator">&gt;</span> <span class="hljs-number">2500000.00</span>);
</code></pre>
<p><strong>ç¤ºä¾‹ 2ï¼šä½¿ç”¨ EXISTS æ¡ä»¶åˆ é™¤</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤å­˜åœ¨å…³è”è®¢å•çš„å®¢æˆ·è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> customers 
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">EXISTS</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> 
    <span class="hljs-keyword">FROM</span> orders 
    <span class="hljs-keyword">WHERE</span> orders.customer_id <span class="hljs-operator">=</span> customers.id
);
</code></pre>
<h4 data-id="heading-37">ä½¿ç”¨ EXISTS çš„ä¼˜åŠ¿</h4>
<p><strong>EXISTS vs IN</strong>ï¼š</p>
<ul>
<li><code>EXISTS</code> é€šå¸¸æ¯” <code>IN</code> æ€§èƒ½æ›´å¥½</li>
<li><code>EXISTS</code> åœ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹åå°±ä¼šåœæ­¢æœç´¢</li>
<li><code>IN</code> éœ€è¦å…ˆæ‰§è¡Œå­æŸ¥è¯¢ï¼Œç„¶åè¿›è¡ŒåŒ¹é…</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šä½¿ç”¨ EXISTS ä¼˜åŒ–åˆ é™¤</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä½¿ç”¨ EXISTS åˆ é™¤å­˜åœ¨å…³è”è®¢å•çš„å®¢æˆ·è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> customers 
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">EXISTS</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> 
    <span class="hljs-keyword">FROM</span> orders 
    <span class="hljs-keyword">WHERE</span> orders.customer_id <span class="hljs-operator">=</span> customers.id
      <span class="hljs-keyword">AND</span> orders.status <span class="hljs-operator">=</span> <span class="hljs-string">'CANCELLED'</span>
);
</code></pre>
<hr/>
<h3 data-id="heading-38">ğŸ”€ DELETE ä¸ JOIN â­ Should</h3>
<h4 data-id="heading-39">MySQL å¤šè¡¨å…³è”åˆ é™¤</h4>
<p><strong>è¯­æ³•</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DELETE</span> t1 <span class="hljs-keyword">FROM</span> table1 t1
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> table2 t2 <span class="hljs-keyword">ON</span> t1.id <span class="hljs-operator">=</span> t2.id
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">condition</span>;
</code></pre>
<p><strong>ç¤ºä¾‹ 1ï¼šä½¿ç”¨ INNER JOIN åˆ é™¤</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤é”€å”®äººå‘˜çš„é…é¢å†å²è®°å½•ï¼Œè¿™äº›é”€å”®äººå‘˜çš„å¹´åº¦é”€å”®é¢è¶…è¿‡ 4500000</span>
<span class="hljs-keyword">DELETE</span> sq
<span class="hljs-keyword">FROM</span> Sales.SalesPersonQuotaHistory sq
     <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> Sales.SalesPerson sp <span class="hljs-keyword">ON</span> sq.BusinessEntityID <span class="hljs-operator">=</span> sp.BusinessEntityID
<span class="hljs-keyword">WHERE</span> sp.SalesYTD <span class="hljs-operator">&gt;</span> <span class="hljs-number">4500000.00</span>;
</code></pre>
<p><strong>ç¤ºä¾‹ 2ï¼šä½¿ç”¨ LEFT JOIN åˆ é™¤</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤æ²¡æœ‰å…³è”è®¢å•çš„å®¢æˆ·è®°å½•</span>
<span class="hljs-keyword">DELETE</span> c
<span class="hljs-keyword">FROM</span> customers c
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> orders o <span class="hljs-keyword">ON</span> c.id <span class="hljs-operator">=</span> o.customer_id
<span class="hljs-keyword">WHERE</span> o.id <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>;
</code></pre>
<h4 data-id="heading-40">SQL Server å¤šè¡¨å…³è”åˆ é™¤</h4>
<p><strong>è¯­æ³• 1ï¼šä½¿ç”¨ FROM å­å¥</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> table1
<span class="hljs-keyword">FROM</span> table1
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> table2 <span class="hljs-keyword">ON</span> table1.id <span class="hljs-operator">=</span> table2.id
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">condition</span>;
</code></pre>
<p><strong>è¯­æ³• 2ï¼šä½¿ç”¨ DELETE åˆ«å</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DELETE</span> t1
<span class="hljs-keyword">FROM</span> table1 t1
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> table2 t2 <span class="hljs-keyword">ON</span> t1.id <span class="hljs-operator">=</span> t2.id
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">condition</span>;
</code></pre>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤é”€å”®äººå‘˜çš„é…é¢å†å²è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> Sales.SalesPersonQuotaHistory
<span class="hljs-keyword">FROM</span> Sales.SalesPersonQuotaHistory <span class="hljs-keyword">AS</span> spqh
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> Sales.SalesPerson <span class="hljs-keyword">AS</span> sp
<span class="hljs-keyword">ON</span> spqh.BusinessEntityID <span class="hljs-operator">=</span> sp.BusinessEntityID
<span class="hljs-keyword">WHERE</span> sp.SalesYTD <span class="hljs-operator">&gt;</span> <span class="hljs-number">2500000.00</span>;
</code></pre>
<hr/>
<h3 data-id="heading-41">ğŸŒ ä¸åŒæ•°æ®åº“è¯­æ³•å·®å¼‚ ğŸ’¡ Could</h3>
<h4 data-id="heading-42">MySQL</h4>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>æ”¯æŒä½¿ç”¨ <code>LIMIT</code> é™åˆ¶åˆ é™¤çš„è¡Œæ•°</li>
<li>å¯ä»¥é€šè¿‡è®¾ç½® <code>sql_safe_updates</code> å¼ºåˆ¶è¦æ±‚ WHERE æ¡ä»¶</li>
<li>DELETE è¯­å¥ä¼šè¿”å›åˆ é™¤çš„è¡Œæ•°</li>
</ul>
<p><strong>å®‰å…¨æ¨¡å¼è®¾ç½®</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å¼€å¯å®‰å…¨æ›´æ–°æ¨¡å¼ï¼Œå¼ºåˆ¶è¦æ±‚ WHERE æ¡ä»¶</span>
<span class="hljs-keyword">SET</span> sql_safe_updates <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<p><strong>ä½¿ç”¨ LIMIT åˆ é™¤</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤å‰ 100 æ¡ç¬¦åˆæ¡ä»¶çš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>
LIMIT <span class="hljs-number">100</span>;
</code></pre>
<p><strong>è¿”å›ç»“æœç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤ id=1 çš„è®°å½•</span>
mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-number">1</span>;
Query OK, <span class="hljs-number">1</span> <span class="hljs-type">row</span> affected (<span class="hljs-number">0.00</span> sec)
<span class="hljs-keyword">Rows</span> matched: <span class="hljs-number">1</span>  Changed: <span class="hljs-number">1</span>  Warnings: <span class="hljs-number">0</span>

<span class="hljs-comment">-- åˆ é™¤ id=999 çš„è®°å½•ï¼ˆä¸å­˜åœ¨ï¼‰</span>
mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> id<span class="hljs-operator">=</span><span class="hljs-number">999</span>;
Query OK, <span class="hljs-number">0</span> <span class="hljs-keyword">rows</span> affected (<span class="hljs-number">0.00</span> sec)
<span class="hljs-keyword">Rows</span> matched: <span class="hljs-number">0</span>  Changed: <span class="hljs-number">0</span>  Warnings: <span class="hljs-number">0</span>
</code></pre>
<h4 data-id="heading-43">SQL Server</h4>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>æ”¯æŒä½¿ç”¨ <code>TOP</code> é™åˆ¶åˆ é™¤çš„è¡Œæ•°</li>
<li>æ”¯æŒä½¿ç”¨ <code>OUTPUT</code> å­å¥è¿”å›åˆ é™¤çš„è¡Œ</li>
<li>æ”¯æŒä½¿ç”¨ CTEï¼ˆå…¬ç”¨è¡¨è¡¨è¾¾å¼ï¼‰</li>
<li>æ”¯æŒä½¿ç”¨æ¸¸æ ‡è¿›è¡Œå®šä½åˆ é™¤</li>
</ul>
<p><strong>TOP è¯­æ³•</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DELETE</span> TOP (<span class="hljs-number">20</span>) <span class="hljs-keyword">FROM</span> table_name <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">condition</span>;
</code></pre>
<p><strong>OUTPUT è¯­æ³•</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> table_name
OUTPUT DELETED.<span class="hljs-operator">*</span>
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">condition</span>;
</code></pre>
<p><strong>ç¤ºä¾‹ï¼šä½¿ç”¨ OUTPUT è¿”å›åˆ é™¤çš„è¡Œ</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤å¹¶è¿”å›åˆ é™¤çš„è¡Œ</span>
<span class="hljs-keyword">DELETE</span> Sales.ShoppingCartItem  
OUTPUT DELETED.<span class="hljs-operator">*</span>   
<span class="hljs-keyword">WHERE</span> ShoppingCartID <span class="hljs-operator">=</span> <span class="hljs-number">20621</span>;
</code></pre>
<h4 data-id="heading-44">Oracle</h4>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>æ”¯æŒä½¿ç”¨ <code>ROWNUM</code> é™åˆ¶åˆ é™¤çš„è¡Œæ•°</li>
<li>è¯­æ³•ç›¸å¯¹æ ‡å‡†</li>
</ul>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> table_name
<span class="hljs-keyword">WHERE</span> ROWNUM <span class="hljs-operator">&lt;=</span> <span class="hljs-number">100</span>;
</code></pre>
<h4 data-id="heading-45">PostgreSQL</h4>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>è¯­æ³•ç›¸å¯¹æ ‡å‡†</li>
<li>æ”¯æŒ <code>RETURNING</code> å­å¥è¿”å›åˆ é™¤çš„è¡Œ</li>
</ul>
<p><strong>RETURNING è¯­æ³•</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> table_name
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">condition</span>
RETURNING <span class="hljs-operator">*</span>;
</code></pre>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤å¹¶è¿”å›åˆ é™¤çš„è¡Œ</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>
RETURNING <span class="hljs-operator">*</span>;
</code></pre>
<hr/>
<h3 data-id="heading-46">âš ï¸ æ³¨æ„äº‹é¡¹å’Œè­¦å‘Š</h3>
<h4 data-id="heading-47">WHERE å­å¥çš„é‡è¦æ€§</h4>
<p>âš ï¸ <strong>é‡è¦è­¦å‘Š</strong>ï¼šåœ¨åˆ é™¤è®°å½•æ—¶è¦æ ¼å¤–å°å¿ƒï¼å› ä¸ºæ‚¨ä¸èƒ½é‡æ¥ï¼</p>
<p><strong>æ ¸å¿ƒè¦ç‚¹</strong>ï¼š</p>
<ul>
<li>å¦‚æœçœç•¥ WHERE å­å¥ï¼Œæ‰€æœ‰çš„è®°å½•éƒ½å°†è¢«åˆ é™¤ï¼</li>
<li>æ‰§è¡Œæ²¡æœ‰ WHERE å­å¥çš„ DELETE è¦æ…é‡ï¼Œå†æ…é‡ï¼</li>
</ul>
<p><strong>è¯¦ç»†è¯´æ˜å’Œæœ€ä½³å®è·µ</strong>ï¼Œè¯·å‚è§ <a href="#-delete-%E4%B8%8E-where-%E5%AD%90%E5%8F%A5" title="#-delete-%E4%B8%8E-where-%E5%AD%90%E5%8F%A5">DELETE ä¸ WHERE å­å¥</a> ç« èŠ‚ã€‚</p>
<h4 data-id="heading-48">åˆ é™¤å‰æ£€æŸ¥</h4>
<p><strong>å»ºè®®</strong>ï¼šå§‹ç»ˆå»ºè®®ä» SELECT è¯­å¥å¼€å§‹ï¼Œç„¶åå†åˆ é™¤ä»»ä½•å†…å®¹ï¼Œä»¥ç¡®ä¿å®šä½çš„æ˜¯æ­£ç¡®çš„è®°å½•ã€‚</p>
<p><strong>è¯¦ç»†æ£€æŸ¥æ–¹æ³•å’Œæœ€ä½³å®è·µ</strong>ï¼Œè¯·å‚è§ <a href="#-delete-%E4%B8%8E-where-%E5%AD%90%E5%8F%A5" title="#-delete-%E4%B8%8E-where-%E5%AD%90%E5%8F%A5">DELETE ä¸ WHERE å­å¥</a> ç« èŠ‚ä¸­çš„"åˆ é™¤å‰æ£€æŸ¥çš„æœ€ä½³å®è·µ"å°èŠ‚ã€‚</p>
<h4 data-id="heading-49">å¤–é”®çº¦æŸçš„å½±å“</h4>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li>å¤§å¤šæ•°æ•°æ®åº“ç³»ç»Ÿéƒ½æ”¯æŒå¤–é”®çº¦æŸï¼Œå› æ­¤å½“åˆ é™¤è¡¨ä¸­çš„ä¸€è¡Œæ—¶ï¼Œå¤–é”®è¡¨ä¸­çš„è¡Œä¹Ÿä¼šè‡ªåŠ¨åˆ é™¤ï¼ˆå¦‚æœè®¾ç½®äº† CASCADEï¼‰</li>
<li>ä»é€»è¾‘ä¸Šè®²ï¼Œå¦‚æœä¸å¼•ç”¨å‘˜å·¥ï¼Œå°±ä¸èƒ½å­˜åœ¨ä¾èµ–å…³ç³»ã€‚æ¢å¥è¯è¯´ï¼Œå½“åˆ é™¤å‘˜å·¥ä¿¡æ¯æ—¶ï¼Œä»–/å¥¹çš„å®¶å±ä¹Ÿå¿…é¡»è¦åˆ é™¤</li>
</ul>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤å‘˜å·¥åŠå…¶ç›¸å…³ä¾èµ–</span>
<span class="hljs-keyword">DELETE</span>
<span class="hljs-keyword">FROM</span> employees
<span class="hljs-keyword">WHERE</span> employee_id <span class="hljs-operator">=</span> <span class="hljs-number">199</span>;

<span class="hljs-keyword">DELETE</span>
<span class="hljs-keyword">FROM</span> dependents
<span class="hljs-keyword">WHERE</span> employee_id <span class="hljs-operator">=</span> <span class="hljs-number">199</span>;
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<ul>
<li>å¦‚æœè¡¨ä¹‹é—´å­˜åœ¨å¤–é”®å…³ç³»ï¼Œåˆ é™¤ä¸»è¡¨è®°å½•æ—¶å¯èƒ½ä¼šå½±å“ä»è¡¨è®°å½•</li>
<li>éœ€è¦æ ¹æ®å¤–é”®çº¦æŸçš„é…ç½®ï¼ˆCASCADEã€SET NULL ç­‰ï¼‰æ¥å¤„ç†</li>
</ul>
<h4 data-id="heading-50">äº‹åŠ¡å¤„ç†</h4>
<p><strong>ä½¿ç”¨äº‹åŠ¡ç¡®ä¿æ•°æ®ä¸€è‡´æ€§</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å¼€å§‹äº‹åŠ¡</span>
<span class="hljs-keyword">START</span> TRANSACTION;

<span class="hljs-comment">-- æ‰§è¡Œåˆ é™¤æ“ä½œ</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">80</span>;

<span class="hljs-comment">-- æ£€æŸ¥åˆ é™¤ç»“æœ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&gt;=</span> <span class="hljs-number">80</span>;

<span class="hljs-comment">-- å¦‚æœç»“æœæ­£ç¡®ï¼Œæäº¤äº‹åŠ¡</span>
<span class="hljs-keyword">COMMIT</span>;

<span class="hljs-comment">-- å¦‚æœç»“æœä¸æ­£ç¡®ï¼Œå›æ»šäº‹åŠ¡</span>
<span class="hljs-comment">-- ROLLBACK;</span>
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… ç¡®ä¿æ•°æ®ä¸€è‡´æ€§</li>
<li>âœ… å¯ä»¥å›æ»šé”™è¯¯çš„åˆ é™¤</li>
<li>âœ… ä¿è¯åŸå­æ€§æ“ä½œ</li>
</ul>
<h4 data-id="heading-51">å›æ»šæ“ä½œ</h4>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li>ç”±äº DELETE è¯­å¥æ˜¯ DML æ“ä½œï¼Œå®ƒå¯ä»¥åœ¨è¯­å¥ä¸­æ‰§è¡Œæ—¶å›æ»š</li>
<li>å¦‚æœæ‚¨æ„å¤–åˆ é™¤è®°å½•æˆ–éœ€è¦é‡å¤è¯¥è¿‡ç¨‹ï¼Œå¯ä»¥ä½¿ç”¨ ROLLBACK å‘½ä»¤</li>
</ul>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">START</span> TRANSACTION;
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>;
<span class="hljs-comment">-- å¦‚æœéœ€è¦ï¼Œå¯ä»¥å›æ»šåˆ é™¤</span>
<span class="hljs-keyword">ROLLBACK</span>;
</code></pre>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li>ROLLBACK å‘½ä»¤å°†æ’¤é”€ DELETE è¯­å¥æ‰€åšçš„æ›´æ”¹ï¼Œæœ‰æ•ˆåœ°æ¢å¤åœ¨äº‹åŠ¡æœŸé—´åˆ é™¤çš„è®°å½•</li>
</ul>
<h4 data-id="heading-52">æ— åŒ¹é…è®°å½•çš„å¤„ç†</h4>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li>å¦‚æœ WHERE æ¡ä»¶æ²¡æœ‰åŒ¹é…åˆ°ä»»ä½•è®°å½•ï¼ŒDELETE è¯­å¥ä¸ä¼šæŠ¥é”™ï¼Œä¹Ÿä¸ä¼šæœ‰ä»»ä½•è®°å½•è¢«åˆ é™¤</li>
</ul>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤ id ä¸º 999 çš„è®°å½•ï¼ˆå‡è®¾ä¸å­˜åœ¨ï¼‰</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">999</span>;
</code></pre>
<p><strong>æ‰§è¡Œç»“æœ</strong>ï¼š</p>
<ul>
<li>ä¸ä¼šæŠ¥é”™</li>
<li>ä¸ä¼šåˆ é™¤ä»»ä½•è®°å½•</li>
<li>MySQL ä¼šè¿”å› <code>Rows matched: 0  Changed: 0</code></li>
</ul>
<p><strong>å»ºè®®</strong>ï¼š</p>
<ul>
<li>å¦‚æœéœ€è¦ç¡®è®¤æ˜¯å¦æœ‰è®°å½•è¢«åˆ é™¤ï¼Œå¯ä»¥æ£€æŸ¥ DELETE è¯­å¥çš„è¿”å›ç»“æœ</li>
</ul>
<h4 data-id="heading-53">è§¦å‘å™¨çš„å½±å“</h4>
<p><strong>è¯´æ˜</strong>ï¼š</p>
<ul>
<li>DELETE è¯­å¥å¯èƒ½ä¼šå› ä¸ºè¿åè§¦å‘å™¨æˆ–å°è¯•åˆ é™¤å¦ä¸€ä¸ªè¡¨ä¸­å…·æœ‰ FOREIGN KEY çº¦æŸçš„æ•°æ®å¼•ç”¨çš„è¡Œè€Œå¤±è´¥</li>
<li>å¦‚æœ DELETE åˆ é™¤å¤šè¡Œï¼Œå¹¶ä¸”ä»»ä½•è¢«åˆ é™¤çš„è¡Œè¿åè§¦å‘å™¨æˆ–çº¦æŸï¼Œåˆ™è¯­å¥è¢«å–æ¶ˆï¼Œè¿”å›é”™è¯¯ï¼Œå¹¶ä¸”ä¸åˆ é™¤ä»»ä½•è¡Œ</li>
</ul>
<h4 data-id="heading-54">é”™è¯¯å¤„ç†</h4>
<p><strong>ä½¿ç”¨ TRY...CATCH å¤„ç†é”™è¯¯ï¼ˆSQL Serverï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">BEGIN</span> TRY
    <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> table_name <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">condition</span>;
<span class="hljs-keyword">END</span> TRY
<span class="hljs-keyword">BEGIN</span> CATCH
    <span class="hljs-comment">-- é”™è¯¯å¤„ç†é€»è¾‘</span>
    <span class="hljs-keyword">SELECT</span> ERROR_MESSAGE();
<span class="hljs-keyword">END</span> CATCH;
</code></pre>
<hr/>
<h3 data-id="heading-55">ğŸš€ æ€§èƒ½ä¼˜åŒ– ğŸ’¡ Could</h3>
<h4 data-id="heading-56">DELETE vs TRUNCATE</h4>
<p>æˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹ DELETE å’Œ TRUNCATE çš„åŒºåˆ«ï¼Œè¿™å¯¹äºæ€§èƒ½ä¼˜åŒ–éå¸¸é‡è¦ã€‚</p>
<p><strong>åŒºåˆ«è¯´æ˜</strong>ï¼š</p>
<ol>
<li><strong>å¯¹äºåˆ é™¤æ•´ä¸ªè¡¨çš„æ‰€æœ‰æ•°æ®æ—¶ï¼ŒDELETE å¹¶ä¸ä¼šé‡Šæ”¾è¡¨æ‰€å ç”¨çš„ç©ºé—´</strong></li>
<li><strong>å¦‚æœç”¨æˆ·ç¡®å®šæ˜¯åˆ é™¤æ•´è¡¨çš„æ‰€æœ‰æ•°æ®ï¼Œé‚£ä¹ˆä½¿ç”¨ TRUNCATE TABLE é€Ÿåº¦æ›´å¿«</strong></li>
</ol>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ é™¤æ‰€æœ‰éƒ¨é—¨ä¿¡æ¯:ä½¿ç”¨ DELETE</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> table_name;

<span class="hljs-comment">-- åˆ é™¤æ‰€æœ‰éƒ¨é—¨ä¿¡æ¯:ä½¿ç”¨ TRUNCATE</span>
<span class="hljs-keyword">TRUNCATE</span> <span class="hljs-keyword">TABLE</span> table_name;
</code></pre>
<p><strong>TRUNCATE TABLE çš„ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… TRUNCATE TABLE æ¯” DELETE æ›´å¿«</li>
<li>âœ… TRUNCATE TABLE ä½¿ç”¨è¾ƒå°‘çš„ç³»ç»Ÿå’Œäº‹åŠ¡æ—¥å¿—èµ„æº</li>
<li>âœ… TRUNCATE TABLE æœ‰é™åˆ¶ï¼Œä¾‹å¦‚ï¼Œè¡¨ä¸èƒ½å‚ä¸å¤åˆ¶</li>
</ul>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ul>
<li>è¦åˆ é™¤è¡¨ä¸­çš„æ‰€æœ‰è¡Œï¼Œè¯·ä½¿ç”¨ TRUNCATE TABLE</li>
<li>TRUNCATE TABLE æ¯” DELETE æ›´å¿«ï¼Œå¹¶ä¸”ä½¿ç”¨è¾ƒå°‘çš„ç³»ç»Ÿå’Œäº‹åŠ¡æ—¥å¿—èµ„æº</li>
</ul>
<h4 data-id="heading-57">æ ‡è®°åˆ é™¤ vs ç‰©ç†åˆ é™¤</h4>
<p>è®©æˆ‘ä»¬æ¥ç†è§£ä¸€ä¸‹æ ‡è®°åˆ é™¤å’Œç‰©ç†åˆ é™¤çš„åŒºåˆ«ã€‚è¿™æ˜¯å®é™…å¼€å‘ä¸­éå¸¸é‡è¦çš„æœ€ä½³å®è·µã€‚</p>
<p><strong>é—®é¢˜</strong>ï¼š</p>
<ul>
<li>é€šè¿‡ä» InnoDB å­˜å‚¨ç©ºé—´åˆ†å¸ƒï¼ŒDELETE å¯¹æ€§èƒ½çš„å½±å“å¯ä»¥çœ‹åˆ°ï¼ŒDELETE ç‰©ç†åˆ é™¤æ—¢ä¸èƒ½é‡Šæ”¾ç£ç›˜ç©ºé—´ï¼Œè€Œä¸”ä¼šäº§ç”Ÿå¤§é‡çš„ç¢ç‰‡ï¼Œå¯¼è‡´ç´¢å¼•é¢‘ç¹åˆ†è£‚ï¼Œå½±å“ SQL æ‰§è¡Œè®¡åˆ’çš„ç¨³å®šæ€§</li>
<li>åŒæ—¶åœ¨ç¢ç‰‡å›æ”¶æ—¶ï¼Œä¼šè€—ç”¨å¤§é‡çš„ CPUï¼Œç£ç›˜ç©ºé—´ï¼Œå½±å“è¡¨ä¸Šæ­£å¸¸çš„ DML æ“ä½œ</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>åœ¨ä¸šåŠ¡ä»£ç å±‚é¢ï¼Œåº”è¯¥åšé€»è¾‘æ ‡è®°åˆ é™¤ï¼Œé¿å…ç‰©ç†åˆ é™¤</li>
</ul>
<p><strong>å®ç°æ–¹å¼</strong>ï¼š</p>
<ul>
<li>åœ¨ MySQL æ•°æ®åº“å»ºæ¨¡è§„èŒƒä¸­æœ‰ 4 ä¸ªå…¬å…±å­—æ®µï¼ŒåŸºæœ¬ä¸Šæ¯ä¸ªè¡¨å¿…é¡»æœ‰çš„ï¼ŒåŒæ—¶åœ¨ create_time åˆ—è¦åˆ›å»ºç´¢å¼•</li>
</ul>
<p><strong>å­—æ®µå®šä¹‰</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">`id` <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®id'</span>,
`is_deleted` tinyint(<span class="hljs-number">4</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'æ˜¯å¦é€»è¾‘åˆ é™¤ï¼š0ï¼šæœªåˆ é™¤ï¼Œ1ï¼šå·²åˆ é™¤'</span>,
`create_time` <span class="hljs-type">timestamp</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
`update_time` <span class="hljs-type">timestamp</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'ä¿®æ”¹æ—¶é—´'</span>
</code></pre>
<p><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æœ‰äº†åˆ é™¤æ ‡è®°ï¼Œä¸šåŠ¡æ¥å£çš„ DELETE æ“ä½œå°±å¯ä»¥è½¬æ¢ä¸º UPDATE</span>
<span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">SET</span> is_deleted <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1213</span>;

<span class="hljs-comment">-- æŸ¥è¯¢çš„æ—¶å€™éœ€è¦å¸¦ä¸Š is_deleted è¿‡æ»¤</span>
<span class="hljs-keyword">SELECT</span> id, age, phone <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">WHERE</span> is_deleted <span class="hljs-operator">=</span> <span class="hljs-number">0</span> <span class="hljs-keyword">AND</span> name <span class="hljs-keyword">LIKE</span> <span class="hljs-string">'lyn12%'</span>;
</code></pre>
<h4 data-id="heading-58">æ•°æ®å½’æ¡£æ–¹å¼</h4>
<p><strong>é€šç”¨æ•°æ®å½’æ¡£æ–¹æ³•</strong>ï¼š</p>
<p><strong>æ­¥éª¤ 1ï¼šåˆ›å»ºå½’æ¡£è¡¨</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `ota_order_bak` (
  <span class="hljs-comment">-- è¡¨ç»“æ„å®šä¹‰</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8
<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> <span class="hljs-keyword">RANGE</span> (to_days(create_time)) ( 
  <span class="hljs-keyword">PARTITION</span> p201808 <span class="hljs-keyword">VALUES</span> LESS THAN (to_days(<span class="hljs-string">'2018-09-01'</span>)), 
  <span class="hljs-comment">-- æ›´å¤šåˆ†åŒº...</span>
);
</code></pre>
<p><strong>æ­¥éª¤ 2ï¼šæ’å…¥åŸè¡¨ä¸­æ— æ•ˆçš„æ•°æ®</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> tbl_p201808 <span class="hljs-keyword">AS</span> 
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> ota_order 
<span class="hljs-keyword">WHERE</span> create_time <span class="hljs-keyword">BETWEEN</span> <span class="hljs-string">'2018-08-01 00:00:00'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'2018-08-31 23:59:59'</span>;
</code></pre>
<p><strong>æ­¥éª¤ 3ï¼šè·Ÿå½’æ¡£è¡¨åˆ†åŒºåšåˆ†åŒºäº¤æ¢</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> ota_order_bak EXCHANGE <span class="hljs-keyword">PARTITION</span> p201808 <span class="hljs-keyword">WITH</span> <span class="hljs-keyword">TABLE</span> tbl_p201808;
</code></pre>
<p><strong>æ­¥éª¤ 4ï¼šåˆ é™¤åŸè¡¨ä¸­å·²ç»å½’æ¡£çš„æ•°æ®</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> ota_order 
<span class="hljs-keyword">WHERE</span> create_time <span class="hljs-keyword">BETWEEN</span> <span class="hljs-string">'2018-08-01 00:00:00'</span> <span class="hljs-keyword">AND</span> <span class="hljs-string">'2018-08-31 23:59:59'</span> 
LIMIT <span class="hljs-number">3000</span>;
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>è¿™æ ·åŸè¡¨å’Œå½’æ¡£è¡¨éƒ½æ˜¯æŒ‰æœˆçš„åˆ†åŒºè¡¨ï¼Œåªéœ€è¦åˆ›å»ºä¸€ä¸ªä¸­é—´æ™®é€šè¡¨ï¼Œåœ¨ä¸šåŠ¡ä½å³°æœŸåšä¸¤æ¬¡åˆ†åŒºäº¤æ¢ï¼Œæ—¢å¯ä»¥åˆ é™¤æ— æ•ˆæ•°æ®ï¼Œåˆèƒ½å›æ”¶ç©ºé—´ï¼Œè€Œä¸”æ²¡æœ‰ç©ºé—´ç¢ç‰‡ï¼Œä¸ä¼šå½±å“è¡¨ä¸Šçš„ç´¢å¼•åŠ SQL çš„æ‰§è¡Œè®¡åˆ’</li>
</ul>
<h4 data-id="heading-59">åˆ†æ‰¹åˆ é™¤</h4>
<p><strong>å½“éœ€è¦åˆ é™¤å¤§é‡æ•°æ®æ—¶ï¼Œå¯ä»¥åˆ†æ‰¹è¿›è¡Œåˆ é™¤ï¼Œé¿å…ä¸€æ¬¡æ€§åˆ é™¤è¿‡å¤šæ•°æ®å½±å“æ€§èƒ½</strong></p>
<p><strong>æ–¹å¼ 1ï¼šä½¿ç”¨ LIMIT åˆ†æ‰¹åˆ é™¤ï¼ˆMySQLï¼‰</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ¯æ¬¡åªåˆ é™¤ 1000 æ¡</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">80</span>
LIMIT <span class="hljs-number">1000</span>;
</code></pre>
<p><strong>æ–¹å¼ 2ï¼šä½¿ç”¨å¾ªç¯åˆ†æ‰¹åˆ é™¤</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç¬¬ä¸€æ¬¡åˆ é™¤ id 1-1000</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">80</span> <span class="hljs-keyword">AND</span> id <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">1</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">1000</span>;

<span class="hljs-comment">-- ç¬¬äºŒæ¬¡åˆ é™¤ id 1001-2000</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">80</span> <span class="hljs-keyword">AND</span> id <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">1001</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">2000</span>;
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… å‡å°‘é”è¡¨æ—¶é—´</li>
<li>âœ… é™ä½å¯¹æ•°æ®åº“æ€§èƒ½çš„å½±å“</li>
<li>âœ… å¯ä»¥éšæ—¶ä¸­æ–­å’Œæ¢å¤</li>
</ul>
<h4 data-id="heading-60">è¡Œé”ä¼˜åŒ–</h4>
<p><strong>åœ¨ MySQL ä¸­ï¼Œå½“æ‰§è¡Œ <code>DELETE xxxx WHERE topic_id = xxx</code> æ—¶ï¼ŒMySQL ä¼šå¯¹ topic_id ç´¢å¼•åŠ è¡Œé”</strong></p>
<p><strong>é—®é¢˜åœºæ™¯</strong>ï¼š</p>
<ul>
<li>åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¦‚æœå¤šä¸ªæ“ä½œåœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œè¡Œé”çš„æŒæœ‰æ—¶é—´ä¼šå»¶é•¿</li>
<li>å¯ä»¥é€šè¿‡è°ƒæ•´æ“ä½œé¡ºåºæ¥é™ä½è¡Œé”çš„æŒæœ‰ç²’åº¦</li>
</ul>
<p><strong>ä¼˜åŒ–ç¤ºä¾‹</strong>ï¼š</p>
<p>åŸé€»è¾‘ï¼ˆæ€§èƒ½è¾ƒå·®ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">START</span> TRANSACTION;
<span class="hljs-comment">-- ç¬¬ä¸€æ­¥ï¼šDELETEï¼ˆåŠ è¡Œé”ï¼‰</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> topics <span class="hljs-keyword">WHERE</span> topic_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
<span class="hljs-comment">-- ç¬¬äºŒæ­¥ï¼šINSERTï¼ˆè¡Œé”ä¸€ç›´æŒæœ‰ï¼Œç›´åˆ°äº‹åŠ¡ç»“æŸï¼‰</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> results (topic_id, <span class="hljs-keyword">result</span>) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'AC'</span>);
<span class="hljs-keyword">COMMIT</span>;
</code></pre>
<p>ä¼˜åŒ–åï¼ˆæ€§èƒ½æ›´å¥½ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">START</span> TRANSACTION;
<span class="hljs-comment">-- ç¬¬ä¸€æ­¥ï¼šINSERTï¼ˆä¸åŠ è¡Œé”æˆ–åŠ é”æ—¶é—´çŸ­ï¼‰</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> results (topic_id, <span class="hljs-keyword">result</span>) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'AC'</span>);
<span class="hljs-comment">-- ç¬¬äºŒæ­¥ï¼šDELETEï¼ˆè¡Œé”æŒæœ‰æ—¶é—´çŸ­ï¼‰</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> topics <span class="hljs-keyword">WHERE</span> topic_id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
<span class="hljs-keyword">COMMIT</span>;
</code></pre>
<h4 data-id="heading-61">ç´¢å¼•çš„ä½¿ç”¨</h4>
<p><strong>å¯¹äº DELETE è¯­å¥ä¸­æ¶‰åŠçš„åˆ—ï¼Œç¡®ä¿ç›¸åº”çš„åˆ—ä¸Šå»ºæœ‰ç´¢å¼•ï¼Œä»¥æé«˜æ£€ç´¢é€Ÿåº¦</strong></p>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li>WHERE æ¡ä»¶ä¸­çš„å­—æ®µåº”è¯¥æœ‰ç´¢å¼•</li>
<li>ä½†ç´¢å¼•ä¹Ÿä¼šå½±å“ DELETE çš„æ€§èƒ½ï¼ˆéœ€è¦æ›´æ–°ç´¢å¼•ï¼‰</li>
<li>éœ€è¦æƒè¡¡æŸ¥è¯¢é€Ÿåº¦å’Œåˆ é™¤é€Ÿåº¦</li>
</ul>
<h4 data-id="heading-62">å¤§æ•°æ®åˆ é™¤çš„æ³¨æ„äº‹é¡¹</h4>
<p><strong>å¤§æ•°æ®åˆ é™¤è¦æ³¨æ„</strong>ï¼š</p>
<ul>
<li>âœ… <strong>ç´¢å¼•</strong>ï¼šç¡®ä¿ WHERE æ¡ä»¶å­—æ®µæœ‰ç´¢å¼•</li>
<li>âœ… <strong>åˆ†æ‰¹åˆ é™¤</strong>ï¼šé¿å…ä¸€æ¬¡æ€§åˆ é™¤è¿‡å¤šæ•°æ®</li>
<li>âœ… <strong>äº‹åŠ¡</strong>ï¼šä½¿ç”¨äº‹åŠ¡ç¡®ä¿æ•°æ®ä¸€è‡´æ€§</li>
</ul>
<p><strong>é‡è¦æé†’</strong>ï¼š</p>
<ul>
<li>âš ï¸ å¦‚æœåˆ é™¤æ¡ä»¶ä¸ç²¾å‡†ï¼Œå¯èƒ½å¯¼è‡´å¤§é¢ç§¯é”è¡¨ï¼Œå½±å“å…¶ä»–ä¸šåŠ¡</li>
</ul>
<hr/>
<h3 data-id="heading-63">ğŸ†š å¯¹æ¯”ç¤ºä¾‹ â­ Should</h3>
<h4 data-id="heading-64">ä¸ä½¿ç”¨ DELETE vs ä½¿ç”¨ DELETE</h4>
<p><strong>åœºæ™¯</strong>ï¼šéœ€è¦åˆ é™¤å­¦ç”Ÿè¡¨ä¸­æˆç»©å°äº 60 åˆ†çš„æ‰€æœ‰è®°å½•</p>
<p><strong>âŒ ä¸ä½¿ç”¨ DELETEï¼ˆæ‰‹åŠ¨åˆ é™¤ï¼‰</strong>ï¼š</p>
<ul>
<li>éœ€è¦å…ˆæŸ¥è¯¢æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„è®°å½•</li>
<li>ç„¶åé€æ¡æ‰‹åŠ¨åˆ é™¤</li>
<li>æ•ˆç‡ä½ä¸‹ï¼Œå®¹æ˜“å‡ºé”™</li>
</ul>
<p><strong>âœ… ä½¿ç”¨ DELETEï¼ˆä¸€æ¡è¯­å¥æå®šï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¸€æ¡ DELETE è¯­å¥å®Œæˆæ‰€æœ‰åˆ é™¤</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>;
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… æ“ä½œç®€å•ï¼Œä¸€æ¡è¯­å¥å³å¯å®Œæˆ</li>
<li>âœ… æ•ˆç‡é«˜ï¼Œæ•°æ®åº“è‡ªåŠ¨ä¼˜åŒ–æ‰§è¡Œ</li>
<li>âœ… ä¸ä¼šæ¼æ‰ä»»ä½•ç¬¦åˆæ¡ä»¶çš„è®°å½•</li>
<li>âœ… ä»£ç ç®€æ´ï¼Œæ˜“äºç»´æŠ¤</li>
</ul>
<h4 data-id="heading-65">é”™è¯¯å†™æ³• vs æ­£ç¡®å†™æ³•</h4>
<p><strong>âŒ é”™è¯¯å†™æ³• 1ï¼šå¿˜è®° WHERE å­å¥</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å±é™©ï¼è¿™ä¼šåˆ é™¤æ‰€æœ‰è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students;
</code></pre>
<p><strong>âœ… æ­£ç¡®å†™æ³• 1ï¼šå§‹ç»ˆä½¿ç”¨ WHERE å­å¥</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ­£ç¡®ï¼šæŒ‡å®šåˆ é™¤æ¡ä»¶</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<p><strong>âŒ é”™è¯¯å†™æ³• 2ï¼šåˆ é™¤å‰ä¸æ£€æŸ¥</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å±é™©ï¼å¯èƒ½åˆ é™¤é”™è¯¯çš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>;
</code></pre>
<p><strong>âœ… æ­£ç¡®å†™æ³• 2ï¼šåˆ é™¤å‰å…ˆæ£€æŸ¥</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç¬¬ä¸€æ­¥ï¼šå…ˆæŸ¥è¯¢è¦åˆ é™¤çš„è®°å½•</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>;

<span class="hljs-comment">-- ç¬¬äºŒæ­¥ï¼šç¡®è®¤æ— è¯¯åï¼Œå†æ‰§è¡Œåˆ é™¤</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>;
</code></pre>
<p><strong>âŒ é”™è¯¯å†™æ³• 3ï¼šä¸ä½¿ç”¨äº‹åŠ¡</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å±é™©ï¼å¦‚æœåˆ é™¤å‡ºé”™ï¼Œæ— æ³•å›æ»š</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>;
</code></pre>
<p><strong>âœ… æ­£ç¡®å†™æ³• 3ï¼šä½¿ç”¨äº‹åŠ¡ç¡®ä¿å®‰å…¨</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å¼€å§‹äº‹åŠ¡</span>
<span class="hljs-keyword">START</span> TRANSACTION;

<span class="hljs-comment">-- æ‰§è¡Œåˆ é™¤æ“ä½œ</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>;

<span class="hljs-comment">-- æ£€æŸ¥åˆ é™¤ç»“æœ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&gt;=</span> <span class="hljs-number">60</span>;

<span class="hljs-comment">-- å¦‚æœç»“æœæ­£ç¡®ï¼Œæäº¤äº‹åŠ¡</span>
<span class="hljs-keyword">COMMIT</span>;

<span class="hljs-comment">-- å¦‚æœç»“æœä¸æ­£ç¡®ï¼Œå›æ»šäº‹åŠ¡</span>
<span class="hljs-comment">-- ROLLBACK;</span>
</code></pre>
<h4 data-id="heading-66">ç‰©ç†åˆ é™¤ vs æ ‡è®°åˆ é™¤</h4>
<p><strong>âŒ ç‰©ç†åˆ é™¤ï¼ˆä¸æ¨èï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç›´æ¥åˆ é™¤è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1213</span>;
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼š</p>
<ul>
<li>âŒ æ— æ³•æ¢å¤æ•°æ®</li>
<li>âŒ ä¼šäº§ç”Ÿå¤§é‡ç¢ç‰‡</li>
<li>âŒ å½±å“æ€§èƒ½</li>
</ul>
<p><strong>âœ… æ ‡è®°åˆ é™¤ï¼ˆæ¨èï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä½¿ç”¨æ ‡è®°åˆ é™¤</span>
<span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">SET</span> is_deleted <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-operator">=</span> <span class="hljs-number">1213</span>;

<span class="hljs-comment">-- æŸ¥è¯¢æ—¶è¿‡æ»¤å·²åˆ é™¤çš„è®°å½•</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">WHERE</span> is_deleted <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… å¯ä»¥æ¢å¤æ•°æ®</li>
<li>âœ… ä¸ä¼šäº§ç”Ÿç¢ç‰‡</li>
<li>âœ… æ€§èƒ½æ›´å¥½</li>
</ul>
<hr/>
<h3 data-id="heading-67">ğŸ› å¸¸è§é”™è¯¯ä¸ä¿®æ­£ ğŸ”¥ Must</h3>
<h4 data-id="heading-68">é”™è¯¯ 1ï¼šå¿˜è®° WHERE å­å¥</h4>
<p><strong>é”™è¯¯ç°è±¡</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- âŒ å±é™©ï¼è¿™ä¼šåˆ é™¤æ‰€æœ‰è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students;
</code></pre>
<p><strong>é—®é¢˜åˆ†æ</strong>ï¼š</p>
<ul>
<li>è¿™æ˜¯æœ€å¸¸è§çš„é”™è¯¯ï¼Œ99% çš„äººä¼šçŠ¯è¿™ä¸ªé”™è¯¯</li>
<li>å¦‚æœçœç•¥ WHERE å­å¥ï¼Œæ‰€æœ‰è®°å½•éƒ½å°†è¢«åˆ é™¤</li>
</ul>
<p><strong>ä¿®æ­£æ–¹æ³•å’Œé¢„é˜²æªæ–½</strong>ï¼Œè¯·å‚è§ <a href="#-delete-%E4%B8%8E-where-%E5%AD%90%E5%8F%A5" title="#-delete-%E4%B8%8E-where-%E5%AD%90%E5%8F%A5">DELETE ä¸ WHERE å­å¥</a> ç« èŠ‚ã€‚</p>
<h4 data-id="heading-69">é”™è¯¯ 2ï¼šåˆ é™¤å‰ä¸æ£€æŸ¥</h4>
<p><strong>é”™è¯¯ç°è±¡</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- âŒ å±é™©ï¼å¯èƒ½åˆ é™¤é”™è¯¯çš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>;
</code></pre>
<p><strong>é—®é¢˜åˆ†æ</strong>ï¼š</p>
<ul>
<li>æ²¡æœ‰å…ˆæŸ¥è¯¢è¦åˆ é™¤çš„è®°å½•ï¼Œç›´æ¥æ‰§è¡Œåˆ é™¤</li>
<li>å¯èƒ½åˆ é™¤é”™è¯¯çš„è®°å½•ï¼Œæ— æ³•æ¢å¤</li>
</ul>
<p><strong>ä¿®æ­£æ–¹æ³•å’Œé¢„é˜²æªæ–½</strong>ï¼Œè¯·å‚è§ <a href="#-delete-%E4%B8%8E-where-%E5%AD%90%E5%8F%A5" title="#-delete-%E4%B8%8E-where-%E5%AD%90%E5%8F%A5">DELETE ä¸ WHERE å­å¥</a> ç« èŠ‚ä¸­çš„"åˆ é™¤å‰æ£€æŸ¥çš„æœ€ä½³å®è·µ"å°èŠ‚ã€‚</p>
<h4 data-id="heading-70">é”™è¯¯ 3ï¼šæ¡ä»¶ä¸ç²¾ç¡®</h4>
<p><strong>é”™è¯¯ç°è±¡</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- âŒ å±é™©ï¼å¯èƒ½åˆ é™¤é”™è¯¯çš„è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'å¼ '</span>;
</code></pre>
<p><strong>é—®é¢˜åˆ†æ</strong>ï¼š</p>
<ul>
<li>æ¡ä»¶ä¸ç²¾ç¡®ï¼Œå¯èƒ½åŒ¹é…åˆ°å¤šæ¡è®°å½•</li>
<li>å¦‚æœåªæƒ³åˆ é™¤ä¸€æ¡è®°å½•ï¼Œåº”è¯¥ä½¿ç”¨å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚ idï¼‰</li>
</ul>
<p><strong>ä¿®æ­£æ–¹æ³•</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- âœ… æ­£ç¡®ï¼šä½¿ç”¨å”¯ä¸€æ ‡è¯†åˆ é™¤</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">-- âœ… æˆ–è€…ï¼šä½¿ç”¨æ›´ç²¾ç¡®çš„æ¡ä»¶</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'å¼ ä¸‰'</span> <span class="hljs-keyword">AND</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
</code></pre>
<p><strong>é¢„é˜²æªæ–½</strong>ï¼š</p>
<ul>
<li>å°½é‡ä½¿ç”¨å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚ä¸»é”®ï¼‰åˆ é™¤</li>
<li>å¦‚æœä½¿ç”¨éå”¯ä¸€å­—æ®µï¼Œç¡®ä¿æ¡ä»¶è¶³å¤Ÿç²¾ç¡®</li>
<li>åˆ é™¤å‰å…ˆæŸ¥è¯¢ï¼Œç¡®è®¤åŒ¹é…çš„è®°å½•æ•°é‡</li>
</ul>
<h4 data-id="heading-71">é”™è¯¯ 4ï¼šä¸ä½¿ç”¨äº‹åŠ¡</h4>
<p><strong>é”™è¯¯ç°è±¡</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- âŒ å±é™©ï¼å¦‚æœåˆ é™¤å‡ºé”™ï¼Œæ— æ³•å›æ»š</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>;
</code></pre>
<p><strong>é—®é¢˜åˆ†æ</strong>ï¼š</p>
<ul>
<li>æ²¡æœ‰ä½¿ç”¨äº‹åŠ¡ï¼Œå¦‚æœåˆ é™¤å‡ºé”™ï¼Œæ— æ³•å›æ»š</li>
<li>å¯¹äºé‡è¦çš„æ•°æ®åˆ é™¤æ“ä½œï¼Œåº”è¯¥ä½¿ç”¨äº‹åŠ¡</li>
</ul>
<p><strong>ä¿®æ­£æ–¹æ³•</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- âœ… æ­£ç¡®ï¼šä½¿ç”¨äº‹åŠ¡ç¡®ä¿å®‰å…¨</span>
<span class="hljs-keyword">START</span> TRANSACTION;

<span class="hljs-comment">-- æ‰§è¡Œåˆ é™¤æ“ä½œ</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>;

<span class="hljs-comment">-- æ£€æŸ¥åˆ é™¤ç»“æœ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> students <span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&gt;=</span> <span class="hljs-number">60</span>;

<span class="hljs-comment">-- å¦‚æœç»“æœæ­£ç¡®ï¼Œæäº¤äº‹åŠ¡</span>
<span class="hljs-keyword">COMMIT</span>;

<span class="hljs-comment">-- å¦‚æœç»“æœä¸æ­£ç¡®ï¼Œå›æ»šäº‹åŠ¡</span>
<span class="hljs-comment">-- ROLLBACK;</span>
</code></pre>
<p><strong>é¢„é˜²æªæ–½</strong>ï¼š</p>
<ul>
<li>å¯¹äºé‡è¦çš„æ•°æ®åˆ é™¤æ“ä½œï¼Œå§‹ç»ˆä½¿ç”¨äº‹åŠ¡</li>
<li>åˆ é™¤åæ£€æŸ¥ç»“æœï¼Œç¡®è®¤æ— è¯¯åå†æäº¤</li>
<li>å¦‚æœç»“æœä¸æ­£ç¡®ï¼Œç«‹å³å›æ»š</li>
</ul>
<h4 data-id="heading-72">é”™è¯¯ 5ï¼šæ€§èƒ½é—®é¢˜</h4>
<p><strong>é”™è¯¯ç°è±¡</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- âŒ æ€§èƒ½é—®é¢˜ï¼šä¸€æ¬¡æ€§åˆ é™¤å¤§é‡æ•°æ®</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>;
<span class="hljs-comment">-- å¦‚æœç¬¦åˆæ¡ä»¶çš„è®°å½•æœ‰ 100 ä¸‡æ¡ï¼Œè¿™ä¼šå¾ˆæ…¢</span>
</code></pre>
<p><strong>é—®é¢˜åˆ†æ</strong>ï¼š</p>
<ul>
<li>ä¸€æ¬¡æ€§åˆ é™¤å¤§é‡æ•°æ®ï¼Œä¼šå¯¼è‡´é”è¡¨æ—¶é—´è¿‡é•¿</li>
<li>å½±å“å…¶ä»–ä¸šåŠ¡çš„æ­£å¸¸æ‰§è¡Œ</li>
</ul>
<p><strong>ä¿®æ­£æ–¹æ³•</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- âœ… æ­£ç¡®ï¼šåˆ†æ‰¹åˆ é™¤</span>
<span class="hljs-comment">-- æ¯æ¬¡åªåˆ é™¤ 1000 æ¡</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> score <span class="hljs-operator">&lt;</span> <span class="hljs-number">60</span>
LIMIT <span class="hljs-number">1000</span>;

<span class="hljs-comment">-- é‡å¤æ‰§è¡Œï¼Œç›´åˆ°åˆ é™¤å®Œæˆ</span>
</code></pre>
<p><strong>é¢„é˜²æªæ–½</strong>ï¼š</p>
<ul>
<li>å¯¹äºå¤§é‡æ•°æ®çš„åˆ é™¤ï¼Œä½¿ç”¨åˆ†æ‰¹åˆ é™¤</li>
<li>åœ¨ä¸šåŠ¡ä½å³°æœŸæ‰§è¡Œåˆ é™¤æ“ä½œ</li>
<li>ç›‘æ§åˆ é™¤è¿›åº¦ï¼Œç¡®ä¿ä¸å½±å“å…¶ä»–ä¸šåŠ¡</li>
</ul>
<hr/>
<h3 data-id="heading-73">ğŸ’¼ å®æˆ˜åº”ç”¨æ¡ˆä¾‹ â­ Should</h3>
<h4 data-id="heading-74">æ¡ˆä¾‹ 1ï¼šåˆ é™¤è¿‡æœŸè®¢å•</h4>
<p><strong>åœºæ™¯</strong>ï¼šåˆ é™¤æ‰€æœ‰å·²å–æ¶ˆä¸”è¶…è¿‡ 30 å¤©çš„è®¢å•è®°å½•</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç¬¬ä¸€æ­¥ï¼šå…ˆæŸ¥è¯¢è¦åˆ é™¤çš„è®°å½•</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> orders 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'CANCELLED'</span> 
  <span class="hljs-keyword">AND</span> created_at <span class="hljs-operator">&lt;</span> DATE_SUB(NOW(), <span class="hljs-type">INTERVAL</span> <span class="hljs-number">30</span> <span class="hljs-keyword">DAY</span>);

<span class="hljs-comment">-- ç¬¬äºŒæ­¥ï¼šç¡®è®¤æ— è¯¯åï¼Œæ‰§è¡Œåˆ é™¤</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> orders 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'CANCELLED'</span> 
  <span class="hljs-keyword">AND</span> created_at <span class="hljs-operator">&lt;</span> DATE_SUB(NOW(), <span class="hljs-type">INTERVAL</span> <span class="hljs-number">30</span> <span class="hljs-keyword">DAY</span>);
</code></pre>
<p><strong>ä¼˜åŒ–å»ºè®®</strong>ï¼š</p>
<ul>
<li>å¦‚æœè®¢å•æ•°é‡å¾ˆå¤§ï¼Œå»ºè®®åˆ†æ‰¹åˆ é™¤</li>
<li>åœ¨ä¸šåŠ¡ä½å³°æœŸæ‰§è¡Œåˆ é™¤æ“ä½œ</li>
<li>ä½¿ç”¨äº‹åŠ¡ç¡®ä¿æ•°æ®ä¸€è‡´æ€§</li>
</ul>
<h4 data-id="heading-75">æ¡ˆä¾‹ 2ï¼šåˆ é™¤æ— æ•ˆç”¨æˆ·</h4>
<p><strong>åœºæ™¯</strong>ï¼šåˆ é™¤æ‰€æœ‰æ³¨å†Œä½†ä»æœªç™»å½•çš„ç”¨æˆ·è®°å½•</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä½¿ç”¨å­æŸ¥è¯¢åˆ é™¤</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> users 
<span class="hljs-keyword">WHERE</span> id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> user_id 
    <span class="hljs-keyword">FROM</span> login_logs
);
</code></pre>
<p><strong>æˆ–è€…ä½¿ç”¨ EXISTS</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä½¿ç”¨ EXISTS åˆ é™¤ï¼ˆæ€§èƒ½æ›´å¥½ï¼‰</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> users 
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> 
    <span class="hljs-keyword">FROM</span> login_logs 
    <span class="hljs-keyword">WHERE</span> login_logs.user_id <span class="hljs-operator">=</span> users.id
);
</code></pre>
<h4 data-id="heading-76">æ¡ˆä¾‹ 3ï¼šåˆ é™¤é‡å¤æ•°æ®</h4>
<p><strong>åœºæ™¯</strong>ï¼šåˆ é™¤å­¦ç”Ÿè¡¨ä¸­çš„é‡å¤è®°å½•ï¼ˆä¿ç•™ id æœ€å°çš„è®°å½•ï¼‰</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä½¿ç”¨å­æŸ¥è¯¢åˆ é™¤é‡å¤è®°å½•</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> students 
<span class="hljs-keyword">WHERE</span> id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">MIN</span>(id) 
    <span class="hljs-keyword">FROM</span> students 
    <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> name, email
);
</code></pre>
<p><strong>æˆ–è€…ä½¿ç”¨çª—å£å‡½æ•°ï¼ˆSQL Serverï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä½¿ç”¨ CTE å’Œ ROW_NUMBER() åˆ é™¤é‡å¤è®°å½•</span>
<span class="hljs-keyword">WITH</span> CTE <span class="hljs-keyword">AS</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>, 
           <span class="hljs-built_in">ROW_NUMBER</span>() <span class="hljs-keyword">OVER</span>(<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> name, email <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> id) <span class="hljs-keyword">AS</span> Row_Num
    <span class="hljs-keyword">FROM</span> students
)
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> CTE
<span class="hljs-keyword">WHERE</span> Row_Num <span class="hljs-operator">&gt;</span> <span class="hljs-number">1</span>;
</code></pre>
<h4 data-id="heading-77">æ¡ˆä¾‹ 4ï¼šå¤šè¡¨å…³è”åˆ é™¤</h4>
<p><strong>åœºæ™¯</strong>ï¼šåˆ é™¤æ‰€æœ‰æ²¡æœ‰è®¢å•çš„å®¢æˆ·è®°å½•</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼ˆMySQLï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä½¿ç”¨ LEFT JOIN åˆ é™¤</span>
<span class="hljs-keyword">DELETE</span> c
<span class="hljs-keyword">FROM</span> customers c
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> orders o <span class="hljs-keyword">ON</span> c.id <span class="hljs-operator">=</span> o.customer_id
<span class="hljs-keyword">WHERE</span> o.id <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>;
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼ˆSQL Serverï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä½¿ç”¨å­æŸ¥è¯¢åˆ é™¤</span>
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> customers 
<span class="hljs-keyword">WHERE</span> id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> customer_id 
    <span class="hljs-keyword">FROM</span> orders
);
</code></pre>
<h4 data-id="heading-78">æ¡ˆä¾‹ 5ï¼šæ ‡è®°åˆ é™¤å®ç°</h4>
<p><strong>åœºæ™¯</strong>ï¼šå®ç°è½¯åˆ é™¤ï¼ˆæ ‡è®°åˆ é™¤ï¼‰ï¼Œè€Œä¸æ˜¯ç‰©ç†åˆ é™¤</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ç¬¬ä¸€æ­¥ï¼šåœ¨è¡¨ä¸­æ·»åŠ  is_deleted å­—æ®µ</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> users 
<span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> is_deleted TINYINT(<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> 
COMMENT <span class="hljs-string">'æ˜¯å¦åˆ é™¤ï¼š0-æœªåˆ é™¤ï¼Œ1-å·²åˆ é™¤'</span>;

<span class="hljs-comment">-- ç¬¬äºŒæ­¥ï¼šåˆ é™¤æ“ä½œæ”¹ä¸ºæ›´æ–°æ“ä½œ</span>
<span class="hljs-keyword">UPDATE</span> users 
<span class="hljs-keyword">SET</span> is_deleted <span class="hljs-operator">=</span> <span class="hljs-number">1</span> 
<span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">-- ç¬¬ä¸‰æ­¥ï¼šæŸ¥è¯¢æ—¶è¿‡æ»¤å·²åˆ é™¤çš„è®°å½•</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users 
<span class="hljs-keyword">WHERE</span> is_deleted <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>âœ… å¯ä»¥æ¢å¤æ•°æ®</li>
<li>âœ… ä¸ä¼šäº§ç”Ÿç¢ç‰‡</li>
<li>âœ… æ€§èƒ½æ›´å¥½</li>
<li>âœ… å¯ä»¥è®°å½•åˆ é™¤æ—¶é—´</li>
</ul>
<hr/>
<h3 data-id="heading-79">ğŸ“š æ€»ç»“</h3>
<p>é€šè¿‡æœ¬æ–‡æ¡£çš„å­¦ä¹ ï¼Œæˆ‘ä»¬æŒæ¡äº† SQL DELETE è¯­å¥çš„æ ¸å¿ƒæŠ€èƒ½ã€‚è®©æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹å…³é”®è¦ç‚¹ï¼š</p>
<h4 data-id="heading-80">æ ¸å¿ƒè¦ç‚¹å›é¡¾</h4>
<ol>
<li><strong>WHERE å­å¥çš„é‡è¦æ€§</strong>ï¼šâš ï¸ è¿™æ˜¯ DELETE è¯­å¥æœ€æ ¸å¿ƒçš„è¦ç‚¹ï¼Œ99% çš„äººä¼šå¿˜è®° WHERE å­å¥ï¼Œå¯¼è‡´å…¨è¡¨æ•°æ®è¢«è¯¯åˆ </li>
<li><strong>åˆ é™¤å‰æ£€æŸ¥</strong>ï¼šâœ… å§‹ç»ˆå»ºè®®ä» SELECT è¯­å¥å¼€å§‹ï¼Œç„¶åå†åˆ é™¤ä»»ä½•å†…å®¹ï¼Œä»¥ç¡®ä¿å®šä½çš„æ˜¯æ­£ç¡®çš„è®°å½•</li>
<li><strong>æ ‡è®°åˆ é™¤ vs ç‰©ç†åˆ é™¤</strong>ï¼šâœ… åœ¨ä¸šåŠ¡ä»£ç å±‚é¢ï¼Œåº”è¯¥åšé€»è¾‘æ ‡è®°åˆ é™¤ï¼Œé¿å…ç‰©ç†åˆ é™¤</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šâœ… å¯¹äºå¤§é‡æ•°æ®çš„åˆ é™¤ï¼Œä½¿ç”¨åˆ†æ‰¹åˆ é™¤ã€æ•°æ®å½’æ¡£ç­‰æ–¹å¼ä¼˜åŒ–æ€§èƒ½</li>
<li><strong>äº‹åŠ¡å¤„ç†</strong>ï¼šâœ… å¯¹äºé‡è¦çš„æ•°æ®åˆ é™¤æ“ä½œï¼Œå§‹ç»ˆä½¿ç”¨äº‹åŠ¡ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§</li>
</ol>
<h4 data-id="heading-81">æœ€ä½³å®è·µæ€»ç»“</h4>
<ol>
<li><strong>å§‹ç»ˆä½¿ç”¨ WHERE å­å¥</strong>ï¼šæ‰§è¡Œæ²¡æœ‰ WHERE å­å¥çš„ DELETE è¦æ…é‡ï¼Œå†æ…é‡</li>
<li><strong>åˆ é™¤å‰æ£€æŸ¥</strong>ï¼šå…ˆç”¨ SELECT æµ‹è¯• WHERE æ¡ä»¶ï¼Œç¡®è®¤æ— è¯¯åå†æ‰§è¡Œ DELETE</li>
<li><strong>ä½¿ç”¨æ ‡è®°åˆ é™¤</strong>ï¼šåœ¨ä¸šåŠ¡ä»£ç å±‚é¢ï¼Œåº”è¯¥åšé€»è¾‘æ ‡è®°åˆ é™¤ï¼Œé¿å…ç‰©ç†åˆ é™¤</li>
<li><strong>æ•°æ®å½’æ¡£</strong>ï¼šä¸ºäº†å®ç°æ•°æ®å½’æ¡£éœ€æ±‚ï¼Œå¯ä»¥ç”¨é‡‡ç”¨ MySQL åˆ†åŒºè¡¨ç‰¹æ€§æ¥å®ç°</li>
<li><strong>æƒé™æ§åˆ¶</strong>ï¼šæ§åˆ¶ä¸šåŠ¡è´¦å·æƒé™ï¼Œåªæˆäºˆå¿…è¦çš„ DML æƒé™ï¼Œä¸æˆäºˆ DELETE æƒé™</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š
<ul>
<li>ä½¿ç”¨ç´¢å¼•æé«˜æŸ¥è¯¢é€Ÿåº¦</li>
<li>åˆ†æ‰¹åˆ é™¤å¤§é‡æ•°æ®</li>
<li>ä½¿ç”¨äº‹åŠ¡ç¡®ä¿æ•°æ®ä¸€è‡´æ€§</li>
<li>è°ƒæ•´æ“ä½œé¡ºåºé™ä½è¡Œé”æŒæœ‰ç²’åº¦</li>
</ul>
</li>
</ol>
<h4 data-id="heading-82">å†™åœ¨æœ€å</h4>
<p>ğŸ’ª <strong>æŒæ¡ DELETE è¯­å¥çš„å…³é”®åœ¨äºç†è§£ WHERE å­å¥çš„é‡è¦æ€§ï¼Œä»¥åŠå¦‚ä½•æ­£ç¡®ä½¿ç”¨å„ç§åˆ é™¤æŠ€å·§ã€‚</strong> é€šè¿‡æœ¬æ–‡æ¡£çš„å­¦ä¹ ï¼Œç›¸ä¿¡ä½ å·²ç»æŒæ¡äº† SQL DELETE è¯­å¥çš„æ ¸å¿ƒæŠ€èƒ½ã€‚åœ¨å®é™…å·¥ä½œä¸­ï¼Œè®°ä½ï¼š<strong>åˆ é™¤æ•°æ®è¦è°¨æ…ï¼ŒWHERE å­å¥ä¸èƒ½å¿˜ï¼</strong></p>
<p>ğŸš€ <strong>è®©æˆ‘ä»¬ä¸€èµ·æˆä¸º SQL é«˜æ‰‹ï¼ŒæŒæ¡æ•°æ®åˆ é™¤çš„æ ¸å¿ƒæŠ€èƒ½ï¼Œé¿å…æ•°æ®ç¾éš¾ï¼</strong></p>
<hr/>
<p><strong>ä½œè€…</strong>ï¼šéƒ‘æ©èµ<br/>
<strong>æœºæ„</strong>ï¼šå¦é—¨å·¥å­¦é™¢äººå·¥æ™ºèƒ½åˆ›ä½œåŠ<br/>
<strong>æ—¥æœŸ</strong>ï¼š2025 å¹´ 01 æœˆ 27 æ—¥</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[20251115å¤ç›˜è®°å½•ï¼šè®©åˆ†é¡µä¹–ä¹–â€œåå¥½â€+ å¡ç‰‡ç»Ÿä¸€æ¸å˜æè¾¹ä¸åœ†è§’]]></title>    <link>https://juejin.cn/post/7572502156487573530</link>    <guid>https://juejin.cn/post/7572502156487573530</guid>    <pubDate>2025-11-15T16:49:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572502156487573530" data-draft-id="7572566115849191474" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="20251115å¤ç›˜è®°å½•ï¼šè®©åˆ†é¡µä¹–ä¹–â€œåå¥½â€+ å¡ç‰‡ç»Ÿä¸€æ¸å˜æè¾¹ä¸åœ†è§’"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-15T16:49:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼ å¯çˆ±"/> <meta itemprop="url" content="https://juejin.cn/user/2608489519384504"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            20251115å¤ç›˜è®°å½•ï¼šè®©åˆ†é¡µä¹–ä¹–â€œåå¥½â€+ å¡ç‰‡ç»Ÿä¸€æ¸å˜æè¾¹ä¸åœ†è§’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2608489519384504/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼ å¯çˆ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T16:49:23.000Z" title="Sat Nov 15 2025 16:49:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2b8d7f44ed642dcada8b17e3e5d14eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byg5Y-v54ix:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763830556&amp;x-signature=J7wwUWXxYGX3SvfEEObWNS7kyX8%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-0">ğŸŒˆ ä¸€ã€è¿™æ¬¡åˆ°åº•åŠ¨äº†å•¥ï¼Ÿï¼ˆä¸€å¥è¯æ€»ç»“ï¼‰</h2>
<p><strong>åˆ†é¡µè´´å¡ç‰‡ã€å†…å®¹åŒºæ’‘æ»¡è§†çª—ã€å¡ç‰‡ç»Ÿä¸€ 4px åœ†è§’ + 1px æ¸å˜æè¾¹ã€å»æ‰åŸç”Ÿ number çš„ä¸Šä¸‹ç®­å¤´ã€‚</strong></p>
<hr/>
<h2 data-id="heading-1">ğŸ§© äºŒã€æ¯ä¸ªæ”¹åŠ¨ç‚¹éƒ½è®²è®²ï¼ˆè½»æ¾ä½†ä¸¥è°¨ï¼‰</h2>
<h3 data-id="heading-2">ğŸ° 1ï¼‰åˆ†é¡µæ¡ä¹–ä¹–è´´åœ¨å¡ç‰‡ä¸‹æ–¹</h3>
<p>ä»¥å‰åˆ†é¡µæ‰åœ¨é¡µé¢åº•éƒ¨ï¼Œä¸‹é¢ç•™ä¸€å—ç©ºç©ºçš„ç™½è‰²åŒºåŸŸï¼Œçœ‹èµ·æ¥æœ‰ç‚¹å¯‚å¯ã€‚</p>
<p>ç°åœ¨ï¼š</p>
<ul>
<li>å¤–å±‚å®¹å™¨ï¼š<code>height: calc(100vh - offset)</code></li>
<li>å†…å®¹åŒº flex å æ»¡ï¼š<code>flex: 1</code></li>
<li>åˆ†é¡µåŒºç”¨ <code>margin-top: auto</code> è‡ªåŠ¨æ¨åˆ°åº•</li>
</ul>
<p><strong>ç¨³äº†ã€‚</strong><br/>
åˆ†é¡µç»ˆäºååœ¨è¯¥åçš„ä½ç½®ï¼Œåƒæ˜¯â€œå¥½ï¼æˆ‘è´´è¿™å„¿ä¸åŠ¨äº†ï¼â€çš„æ„Ÿè§‰ã€‚</p>
<hr/>
<h3 data-id="heading-3">ğŸ€ 2ï¼‰æ•°å­—è¾“å…¥æ¡†çš„åŸç”Ÿç®­å¤´ â†’ bye~</h3>
<p>ElementPlus çš„ <code>controls="false"</code> åªæ˜¯è®©å®ƒä¸æ˜¾ç¤ºç»„ä»¶çš„æŒ‰é’®ï¼Œ<br/>
ä½†æµè§ˆå™¨åŸç”Ÿ spinner è¿˜æ˜¯ä¼šå·å·å†’å‡ºæ¥ï¼š</p>
<p>äºæ˜¯è¡¥äº†è¿™æ®µâ€œæ¸©æŸ”ä½†æœ‰æ•ˆâ€çš„éšè—æ³•æœ¯ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">input[type=<span class="hljs-string">"number"</span>]<span class="hljs-symbol">:</span><span class="hljs-symbol">:-webkit-inner-spin-button</span>,
input[type=<span class="hljs-string">"number"</span>]<span class="hljs-symbol">:</span><span class="hljs-symbol">:-webkit-outer-spin-button</span> {
  -webkit-<span class="hljs-symbol">appearance:</span> none;
  <span class="hljs-symbol">margin:</span> <span class="hljs-number">0</span>;
}

input[type=<span class="hljs-string">"number"</span>] {
  -moz-<span class="hljs-symbol">appearance:</span> textfield;
}
</code></pre>
<p><strong>æœ€ç»ˆæ•ˆæœï¼šå°æ¸…çˆ½ã€å°ç»Ÿä¸€ã€å°å¯çˆ±ã€‚</strong></p>
<hr/>
<h3 data-id="heading-4">ğŸ§Š 3ï¼‰å¡ç‰‡åœ†è§’ç»Ÿä¸€ä¸º 4pxï¼ˆå†é…åˆ overflow: hiddenï¼‰</h3>
<p>æ‰€æœ‰å¡ç‰‡ï¼ˆåŒ…æ‹¬â€œåˆ›å»ºåº”ç”¨â€çš„é‚£å—ï¼‰ç»Ÿä¸€ 4pxï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
<span class="hljs-attribute">overflow</span>: hidden;
</code></pre>
<p>èƒŒæ™¯ã€å›¾ç‰‡ã€é˜´å½±éƒ½ä¹–ä¹–è¢«åœ†è§’è£åˆ‡ï¼Œè§†è§‰ç§©åºä¸€ä¸‹å­å‡ºæ¥äº†ã€‚</p>
<hr/>
<h3 data-id="heading-5">ğŸŒˆ 4ï¼‰å¡ç‰‡ä¾ç±»å‹æ˜¾ç¤ºã€Œ1px æ¸å˜æè¾¹ã€</h3>
<p>ä¸¤ä¸ªä¸åŒç±»å‹çš„åº”ç”¨ â†’ ä¸¤ç§ç‹¬ç«‹æ¸å˜å¤–è¾¹æ¡†ã€‚<br/>
ä½†æˆ‘æ²¡æœ‰èµ°â€œä¼ªå…ƒç´  + maskâ€è¿™ç§åç¡¬æ ¸çš„è·¯çº¿ï¼ˆlint è¿˜ä¼šå” å¨æˆ‘ï¼‰ã€‚</p>
<p>æœ€ç»ˆæ–¹æ¡ˆä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid transparent;
<span class="hljs-attribute">border-image</span>: <span class="hljs-built_in">linear-gradient</span>(...) <span class="hljs-number">1</span>;
</code></pre>
<hr/>
<h2 data-id="heading-6">ğŸ›  ä¸‰ã€å…³é”®æ”¹çš„æ–‡ä»¶</h2>

















<table><thead><tr><th>æ–‡ä»¶å</th><th>èŒè´£</th></tr></thead><tbody><tr><td><strong>home.vue</strong></td><td>å¸ƒå±€ã€åœ†è§’ã€æ¸å˜è¾¹æ¡†ã€åˆ†é¡µå®šä½å…¨éƒ¨åœ¨è¿™é‡Œ</td></tr><tr><td><strong>index.vue</strong></td><td>éšè—æ•°å­—è¾“å…¥ spinner çš„ CSS è¡¥å……</td></tr></tbody></table>
<p>éå¸¸å¹²å‡€ï¼Œæ”¹åŠ¨èŒƒå›´ä¸ä¹±è·‘ã€‚</p>
<hr/>
<h2 data-id="heading-7">ğŸ§  å››ã€ä¸ºä»€ä¹ˆè¿™æ ·å®ç°ï¼Ÿï¼ˆä¸“ä¸šä½†ä¸åºŸè¯ï¼‰</h2>
<h3 data-id="heading-8">âœ” calc é…åˆè§†å£</h3>
<p>å› ä¸ºä½ ä¸æƒ³å†…å®¹åŒºâ€œçŸ­ä¸€æˆªâ€ï¼Œä¹Ÿä¸æƒ³æ— é™æ’‘æ»¡ï¼ŒæŠŠé¡¶éƒ¨çš„å¯¼èˆªæ æ‰£æ‰å³å¯ã€‚</p>
<h3 data-id="heading-9">âœ” margin-top: auto</h3>
<p>ç”¨ flex è®©åˆ†é¡µä¹–ä¹–åˆ°å®¹å™¨åº•éƒ¨ï¼Œå“åº”å¼è‡ªç„¶åˆä¸å®¹æ˜“ç‚¸ã€‚</p>
<h3 data-id="heading-10">âœ” border-image èµ¢éº»äº†</h3>
<ul>
<li>ä¸ç”¨å†™ mask</li>
<li>ä¸ç”¨ hack</li>
<li>åœ†è§’è‡ªç„¶ç”Ÿæ•ˆ</li>
<li>æµè§ˆå™¨å¿ƒæƒ…æ›´å¥½ï¼ˆä½ å¿ƒæƒ…ä¹Ÿæ›´å¥½ï¼‰</li>
</ul>
<h3 data-id="heading-11">âœ” éšè—åŸç”Ÿ spinner çš„åŸå› </h3>
<p>ä¸ºäº†è§†è§‰ç»Ÿä¸€å’Œæ‰‹æ„Ÿæ›´é¡ºæ»‘ï¼Œæ˜¯ä½ çœ‹ä¸è§ä½†ä¼šçœŸåˆ‡æ„Ÿå—åˆ°çš„é‚£ç§å°ä¼˜åŒ–ã€‚</p>
<hr/>
<h2 data-id="heading-12">ğŸ§¯ äº”ã€è¸©åˆ°çš„å°å‘ &amp; è§£å†³åŠæ³•</h2>
<h3 data-id="heading-13">â—1ï¼‰CSS ä¸å°å¿ƒå†™è¿›äº† <code>&lt;script&gt;</code></h3>
<p>é¡µé¢ç›´æ¥çº¢åˆ°å‘å…‰ âš ï¸<br/>
â†’ æ¢å¤ data() / mounted()ï¼Œé‡æ–°æ•´ç†ç»“æ„ã€‚</p>
<h3 data-id="heading-14">â—2ï¼‰mask å¤ªçˆ±æŒ‘æµè§ˆå™¨</h3>
<p>lint æç¤º + åœ†è§’é”¯é½¿ï¼ˆå“å‘¦ï¼‰ã€‚<br/>
â†’ æ¢ border-imageï¼Œä¸€åˆ‡å›å½’é¡ºæ»‘ã€‚</p>
<h3 data-id="heading-15">â—3ï¼‰ElementPlus çš„åœ†è§’è¦†ç›–ä½ å†™çš„åœ†è§’</h3>
<p>â†’ è°ƒæ•´é€‰æ‹©å™¨æƒé‡ï¼Œä»…å¯¹å½“å‰é¡µé¢ä½œç”¨ï¼Œå¿…è¦æ—¶åŠ  <code>!important</code>ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangGraph+BrightData+PaperSearchçš„ç ”ç©¶åŠ©ç†]]></title>    <link>https://juejin.cn/post/7572714389942337588</link>    <guid>https://juejin.cn/post/7572714389942337588</guid>    <pubDate>2025-11-15T17:43:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572714389942337588" data-draft-id="7572524368879108130" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangGraph+BrightData+PaperSearchçš„ç ”ç©¶åŠ©ç†"/> <meta itemprop="keywords" content="MCP,LangChain,çˆ¬è™«"/> <meta itemprop="datePublished" content="2025-11-15T17:43:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Miku16"/> <meta itemprop="url" content="https://juejin.cn/user/525983678469801"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangGraph+BrightData+PaperSearchçš„ç ”ç©¶åŠ©ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/525983678469801/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Miku16
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T17:43:28.000Z" title="Sat Nov 15 2025 17:43:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">LangGraph+BrightData+PaperSearchçš„ç ”ç©¶åŠ©ç†</h2>
<p>æ‘˜è¦ï¼šä½¿ç”¨LangGraphçš„ReAct-AgentèŒƒå¼é›†æˆäº†BrightDataå’ŒPaperSearchçš„MCPå·¥å…·ï¼Œé€šè¿‡æœç´¢å’Œçˆ¬å–é¢†è‹±å’Œå­¦æœ¯ç½‘ç«™ï¼Œå®ç°è®ºæ–‡æœç´¢å’Œè¯»å–ï¼Œå­¦è€…ä¿¡æ¯æå–ï¼Œé‚®ç®±æŸ¥æ‰¾ç­‰åŠŸèƒ½ã€‚</p>
<p>é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F16Miku%2FAgent-Learning" target="_blank" title="https://github.com/16Miku/Agent-Learning" ref="nofollow noopener noreferrer">github.com/16Miku/Agenâ€¦</a></p>
<h3 data-id="heading-1">ğŸš€ å‰è¨€ï¼šæˆ‘çš„ AI åŠ©ç†â€œç²¾ç¥åˆ†è£‚â€äº†</h3>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä½ ä»¬çš„æŠ€æœ¯åšä¸»ã€‚æœ€è¿‘åœ¨å¼€å‘ AI Agent çš„æ—¶å€™ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªå¾ˆå¤´ç–¼çš„é—®é¢˜ï¼š<strong>å¦‚ä½•è®©ä¸€ä¸ª Agent æ—¢èƒ½åšâ€œæ­£ç»äº‹â€ï¼Œåˆèƒ½â€œå¥½å¥½èŠå¤©â€ï¼Ÿ</strong></p>
<ul>
<li>å½“æˆ‘è®©å®ƒåˆ†æè®ºæ–‡æ—¶ï¼Œæˆ‘å¸Œæœ›å®ƒç»™æˆ‘ä¸€ä¸ªç»“æ„æ¸…æ™°ã€å­—æ®µåˆ†æ˜çš„ JSON æŠ¥å‘Šã€‚</li>
<li>å½“æˆ‘è®©å®ƒæŠ“å–ä¸ªäººä¸»é¡µæ—¶ï¼Œæˆ‘ä¹Ÿå¸Œæœ›å¾—åˆ°ä¸€ä»½è§„æ•´çš„ç»“æ„åŒ–æ•°æ®ã€‚</li>
<li>ä½†å½“æˆ‘åªæ˜¯æƒ³è·Ÿå®ƒè¯´å¥â€œå¹²å¾—ä¸é”™â€æ—¶ï¼Œæˆ‘å¸Œæœ›å®ƒèƒ½åƒä¸ªæ­£å¸¸â€œäººâ€ä¸€æ ·å›å¤æˆ‘ï¼Œè€Œä¸æ˜¯å†·å†°å†°åœ°ç”©ç»™æˆ‘ä¸€ä¸ªç©ºçš„ JSON å¯¹è±¡ã€‚</li>
</ul>
<p>ä¼ ç»Ÿçš„ Agent å¼€å‘æ¨¡å¼ï¼Œæ¯”å¦‚ç”¨ <code>response_format</code> å¼ºè¡Œè§„å®šè¾“å‡ºæ ¼å¼ï¼Œè™½ç„¶èƒ½è§£å†³å‰ä¸¤ä¸ªé—®é¢˜ï¼Œä½†å´è®© Agent ä¸§å¤±äº†çµæ´»æ€§ï¼Œå˜æˆäº†ä¸€ä¸ªåªä¼šâ€œå¡«è¡¨â€çš„æœºå™¨äººã€‚è¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„â€œæ™ºèƒ½åŠ©ç†â€ã€‚</p>
<p>ç»è¿‡ä¸€ç•ªæ¢ç´¢ï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€ç§æå…¶ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼š<strong>æŠŠç»“æ„åŒ–è¾“å‡ºæœ¬èº«ï¼Œä¹Ÿå˜æˆä¸€ç§â€œå·¥å…·â€ï¼</strong> è®© Agent è‡ªå·±æ¥å†³å®šä»€ä¹ˆæ—¶å€™è¯¥â€œå¡«è¡¨â€ï¼Œä»€ä¹ˆæ—¶å€™è¯¥â€œèŠå¤©â€ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘å°±å°†æ‰‹æŠŠæ‰‹å¸¦å¤§å®¶ï¼Œä½¿ç”¨ LangGraph å’Œ Google æœ€æ–°çš„ <code>gemini-2.5-flash</code> æ¨¡å‹ï¼Œæ„å»ºä¸€ä¸ªèƒ½å¤Ÿ<strong>æ— ç¼åˆ‡æ¢</strong>äº<strong>å­¦æœ¯ç ”ç©¶</strong>ã€<strong>ä¿¡æ¯æŠ“å–</strong>å’Œ<strong>æ—¥å¸¸å¯¹è¯</strong>ä¸‰ç§æ¨¡å¼çš„â€œå…¨èƒ½AIç ”ç©¶åŠ©ç†â€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d306953739a434eb3553f5083bfd7d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWlrdTE2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763833408&amp;x-signature=2gmX8vgQJjboP2STzkRZo9Trgt8%3D" alt="AI Assistant" loading="lazy"/> <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/794b140abe53457798b70cdb7ebd0204~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWlrdTE2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763833408&amp;x-signature=yy1MVpyLPjPRcUkQvLuLFYZP4kI%3D" alt="LangGraph" loading="lazy"/> <img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fb9da91725c46149b3fd129707dc6de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWlrdTE2:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763833408&amp;x-signature=URZYGIJXLAh6DwAYTEPQeJ%2BeZtc%3D" alt="Gemini" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-2">ğŸ”¥ æ ¸å¿ƒæ€è·¯ï¼šè®©â€œæ ¼å¼â€æˆä¸ºä¸€ç§å¯é€‰å·¥å…·</h3>
<p>æˆ‘ä»¬è¿™æ¬¡ä¼˜åŒ–çš„æ ¸å¿ƒæ€æƒ³ï¼Œç®€å•æ¥è¯´å°±æ˜¯ï¼š<strong>ä¸å¼ºè¿«ï¼Œåªå¼•å¯¼</strong>ã€‚</p>
<p>æˆ‘ä»¬ä¸å†ç²—æš´åœ°å‘Šè¯‰ LLMï¼šâ€œä½ å¿…é¡»ç”¨è¿™ä¸ªæ ¼å¼å›å¤æˆ‘ï¼â€ è€Œæ˜¯æ¢ä¸€ç§æ›´èªæ˜çš„æ–¹å¼ï¼š</p>
<ol>
<li>æˆ‘ä»¬å®šä¹‰å¥½æƒ³è¦çš„æŠ¥å‘Šæ ¼å¼ï¼Œæ¯”å¦‚ <code>PaperAnalysis</code>ï¼ˆè®ºæ–‡åˆ†ææŠ¥å‘Šï¼‰å’Œ <code>LinkedinProfile</code>ï¼ˆé¢†è‹±ä¸»é¡µæŠ¥å‘Šï¼‰ã€‚</li>
<li>ä½†æˆ‘ä»¬ä¸æŠŠå®ƒä»¬ä½œä¸ºå¼ºåˆ¶çš„ <code>response_format</code>ï¼Œè€Œæ˜¯æŠŠå®ƒä»¬ä¼ªè£…æˆä¸¤ä¸ªç‰¹æ®Šçš„â€œå·¥å…·â€äº¤ç»™ Agentã€‚</li>
<li>æˆ‘ä»¬åœ¨ System Prompt ä¸­æ˜ç¡®å‘Šè¯‰ Agentï¼šâ€œä½ çš„å·¥å…·ç®±é‡Œæœ‰æœç´¢ã€æŠ“å–ç­‰æ™®é€šå·¥å…·ï¼Œè¿˜æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„â€˜æŠ¥å‘Šç”Ÿæˆâ€™å·¥å…·ã€‚å½“ä½ éœ€è¦äº§å‡ºæ­£å¼æŠ¥å‘Šæ—¶ï¼Œè¯·åœ¨æ”¶é›†å®Œæ‰€æœ‰ä¿¡æ¯åï¼Œè°ƒç”¨è¿™ä¸¤ä¸ªå·¥å…·æ¥æ ¼å¼åŒ–ä½ çš„æœ€ç»ˆç­”æ¡ˆã€‚â€</li>
</ol>
<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼š</p>
<ul>
<li><strong>é«˜åº¦çµæ´»</strong>ï¼šAgent æŒæ¡äº†ä¸»åŠ¨æƒï¼Œå¯ä»¥æ ¹æ®å¯¹è¯ä¸Šä¸‹æ–‡è‡ªä¸»åˆ¤æ–­æ˜¯å¦éœ€è¦ç»“æ„åŒ–è¾“å‡ºã€‚</li>
<li><strong>ä»»åŠ¡è§£è€¦</strong>ï¼šå°†â€œä¿¡æ¯æ”¶é›†â€å’Œâ€œæ ¼å¼åŒ–è¾“å‡ºâ€ä¸¤ä¸ªæ­¥éª¤åˆ†å¼€ï¼ŒAgent çš„æ€è€ƒè¿‡ç¨‹ï¼ˆChain of Thoughtï¼‰æ›´åŠ æ¸…æ™°ï¼Œæœ‰åŠ©äºå®Œæˆå¤æ‚ä»»åŠ¡ã€‚</li>
<li><strong>è‡ªç„¶äº¤äº’</strong>ï¼šå¯¹äºæ™®é€šèŠå¤©ï¼ŒAgent å¯ä»¥ç›´æ¥å›å¤ï¼Œäº¤äº’ä½“éªŒå¤§å¤§æå‡ã€‚</li>
</ul>
<p>ç†è®ºè¯´å®Œäº†ï¼Œè®©æˆ‘ä»¬  show the code!</p>
<hr/>
<h3 data-id="heading-3">ğŸ› ï¸ å®æˆ˜æ¼”ç»ƒï¼šä¸‰æ­¥æ„å»ºå…¨èƒ½åŠ©ç†</h3>
<h4 data-id="heading-4">æ­¥éª¤ 1: ç¯å¢ƒå‡†å¤‡ä¸ä¾èµ–å®‰è£…</h4>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Colab ç¯å¢ƒä¸­å®‰è£…æ‰€æœ‰å¿…éœ€çš„åº“ã€‚è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº† <code>langgraph</code> æ ¸å¿ƒæ¡†æ¶ï¼Œ<code>langchain-google-genai</code> ç”¨äºé©±åŠ¨ Gemini æ¨¡å‹ï¼Œä»¥åŠ <code>beautifulsoup4</code> ç­‰è¾…åŠ©åº“ã€‚</p>
<blockquote>
<p><strong>âš ï¸ æ³¨æ„ï¼š</strong> æ¯æ¬¡å®‰è£…æˆ–å‡çº§åº“ä¹‹åï¼Œä¸ºäº†è®©æ–°ç‰ˆæœ¬ç”Ÿæ•ˆï¼Œè¯·åŠ¡å¿…åœ¨ Colab èœå•æ ç‚¹å‡» â€œä»£ç æ‰§è¡Œç¨‹åºâ€ -&gt; â€œé‡å¯ä¼šè¯â€ã€‚</p>
</blockquote>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># --- æ­¥éª¤ 1: å®‰è£…ä¸é‡å¯ ---</span>
!pip install --upgrade --quiet langchain langchain-core langchain-mcp-adapters langchain-google-genai langgraph beautifulsoup4
<span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… åº“å·²å‡çº§ã€‚è¯·åŠ¡å¿…ä»èœå•æ ç‚¹å‡» 'ä»£ç æ‰§è¡Œç¨‹åº' -&gt; 'é‡å¯ä¼šè¯'ï¼Œç„¶åå†ç»§ç»­è¿è¡Œä¸‹é¢çš„ä»£ç ï¼"</span>)
</code></pre>
<h4 data-id="heading-5">æ­¥éª¤ 2: ç¼–å†™â€œçµé­‚â€ä»£ç </h4>
<p>è¿™æ˜¯æˆ‘ä»¬æ•´ä¸ªé¡¹ç›®çš„æ ¸å¿ƒä»£ç ã€‚æˆ‘ä¼šé€ä¸€æ‹†è§£ï¼Œè®©ä½ çœ‹æ‡‚æ¯ä¸€éƒ¨åˆ†çš„åŠŸèƒ½ã€‚</p>
<h5 data-id="heading-6">2.1 å¯¼å…¥ä¸å¯†é’¥é…ç½®</h5>
<p>å¸¸è§„æ“ä½œï¼Œå¯¼å…¥æ‰€æœ‰éœ€è¦çš„æ¨¡å—ï¼Œå¹¶ä» Colab çš„ <code>userdata</code> ä¸­åŠ è½½æˆ‘ä»¬çš„ API å¯†é’¥ã€‚è¿™ç§æ–¹å¼æ¯”ç›´æ¥æŠŠå¯†é’¥å†™åœ¨ä»£ç é‡Œæ›´å®‰å…¨ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 2.1: å¯¼å…¥</span>
<span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>, <span class="hljs-type">Union</span>
<span class="hljs-keyword">from</span> dataclasses <span class="hljs-keyword">import</span> dataclass
<span class="hljs-keyword">import</span> nest_asyncio
nest_asyncio.apply() <span class="hljs-comment"># å…è®¸åœ¨Jupyter/Colabç¯å¢ƒä¸­åµŒå¥—è¿è¡Œasyncioäº‹ä»¶å¾ªç¯</span>

<span class="hljs-keyword">from</span> langchain_google_genai <span class="hljs-keyword">import</span> ChatGoogleGenerativeAI
<span class="hljs-keyword">from</span> langchain_mcp_adapters.client <span class="hljs-keyword">import</span> MultiServerMCPClient
<span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent
<span class="hljs-keyword">from</span> langgraph.checkpoint.memory <span class="hljs-keyword">import</span> InMemorySaver
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, Field <span class="hljs-comment"># å¯¼å…¥ Pydantic ç”¨äºå®šä¹‰æˆ‘ä»¬çš„â€œä¼ªå·¥å…·â€</span>

<span class="hljs-comment"># 2.2: åŠ è½½å¯†é’¥</span>
<span class="hljs-keyword">from</span> google.colab <span class="hljs-keyword">import</span> userdata
os.environ[<span class="hljs-string">"GEMINI_API_KEY"</span>] = userdata.get(<span class="hljs-string">'GEMINI_API_KEY'</span>)
BrightData_API_KEY = userdata.get(<span class="hljs-string">'BrightData_API_KEY'</span>)
Paper_Search_API_KEY = userdata.get(<span class="hljs-string">'Paper_Search_API_KEY'</span>)
</code></pre>
<h5 data-id="heading-7">2.2 ğŸ”¥ æ ¸å¿ƒä¼˜åŒ–ç‚¹ï¼šåˆ›å»ºâ€œä¼ªå·¥å…·â€ğŸ”¥</h5>
<p>è¿™é‡Œå°±æ˜¯æˆ‘ä»¬æ•´ä¸ªæ–¹æ¡ˆçš„â€œé­”æ³•â€æ‰€åœ¨ï¼æˆ‘ä»¬ä½¿ç”¨ Pydantic çš„ <code>BaseModel</code> æ¥å®šä¹‰ä¸¤ä¸ªç±»ï¼š<code>PaperAnalysis</code> å’Œ <code>LinkedinProfile</code>ã€‚</p>
<ul>
<li><strong><code>BaseModel</code></strong>: Pydantic çš„åŸºç¡€ç±»ï¼Œèƒ½è®©æˆ‘ä»¬åƒå®šä¹‰ä¸€ä¸ªæ™®é€šçš„ Python ç±»ä¸€æ ·æ¥å®šä¹‰æ•°æ®ç»“æ„ã€‚</li>
<li><strong><code>Field</code></strong>: ç”¨äºä¸ºç±»çš„å±æ€§æ·»åŠ é¢å¤–çš„æè¿°ä¿¡æ¯ã€‚<strong>è¿™ä¸€ç‚¹è‡³å…³é‡è¦</strong>ï¼Œå› ä¸º LLM æ­£æ˜¯é€šè¿‡è¯»å–è¿™äº› <code>description</code> æ¥ç†è§£æ¯ä¸ªå­—æ®µçš„å«ä¹‰ä»¥åŠæ•´ä¸ªâ€œå·¥å…·â€çš„ä½œç”¨ã€‚</li>
<li><strong>ç±»çš„æ–‡æ¡£å­—ç¬¦ä¸² (docstring)</strong>: æ¯”å¦‚ <code>"""å½“ç”¨æˆ·è¦æ±‚...è°ƒç”¨æ­¤å·¥å…·æ¥æ ¼å¼åŒ–æœ€ç»ˆæŠ¥å‘Šã€‚"""</code>ï¼Œè¿™æ˜¯å¯¹æ•´ä¸ªå·¥å…·æœ€ç›´æ¥çš„æè¿°ï¼ŒAgent ä¼šä¼˜å…ˆè¯»å–å®ƒæ¥åˆ¤æ–­å·¥å…·çš„ç”¨é€”ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ================================================================= #</span>
<span class="hljs-comment">#  ğŸ”¥ğŸ”¥ğŸ”¥ æ ¸å¿ƒä¼˜åŒ–ç‚¹ 1: åˆ›å»ºä¸“é—¨ç”¨äºç»“æ„åŒ–è¾“å‡ºçš„â€œä¼ªå·¥å…·â€ ğŸ”¥ğŸ”¥ğŸ”¥</span>
<span class="hljs-comment"># ================================================================= #</span>
<span class="hljs-comment"># æˆ‘ä»¬ä¸å†å°† dataclass ä½œä¸º response_formatï¼Œè€Œæ˜¯å°†å®ƒä»¬åŒ…è£…æˆ Pydantic æ¨¡å‹ï¼Œ</span>
<span class="hljs-comment"># å¹¶ä½œä¸ºâ€œå·¥å…·â€æä¾›ç»™ Agentã€‚è¿™è®© Agent å¯ä»¥è‡ªå·±å†³å®šä½•æ—¶è°ƒç”¨å®ƒä»¬ã€‚</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">PaperAnalysis</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-string">"""å½“ç”¨æˆ·è¦æ±‚å¯¹ä¸€ç¯‡å­¦æœ¯è®ºæ–‡è¿›è¡Œè¯¦ç»†åˆ†ææ—¶ï¼Œè°ƒç”¨æ­¤å·¥å…·æ¥æ ¼å¼åŒ–æœ€ç»ˆæŠ¥å‘Šã€‚"""</span>
    title: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"è®ºæ–‡çš„å®Œæ•´æ ‡é¢˜"</span>)
    authors: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>] = Field(description=<span class="hljs-string">"è®ºæ–‡çš„æ ¸å¿ƒä½œè€…åˆ—è¡¨"</span>)
    research_field: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"æ ¹æ®å†…å®¹æ€»ç»“å‡ºçš„ç ”ç©¶æ–¹å‘"</span>)
    summary: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"å¯¹è®ºæ–‡æ ¸å¿ƒè´¡çŒ®çš„è¯¦ç»†æ€»ç»“"</span>)
    author_contact: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"ä»æŠ“å–å†…å®¹ä¸­æ‰¾åˆ°çš„ä½œè€…é‚®ç®±æˆ–ä¸ªäººä¸»é¡µï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™ä¸º 'è”ç³»æ–¹å¼æœªæ‰¾åˆ°'"</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedinProfile</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-string">"""å½“ç”¨æˆ·è¦æ±‚æå–é¢†è‹±ä¸ªäººä¸»é¡µä¿¡æ¯æ—¶ï¼Œè°ƒç”¨æ­¤å·¥å…·æ¥æ ¼å¼åŒ–æœ€ç»ˆæŠ¥å‘Šã€‚"""</span>
    full_name: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"ç”¨æˆ·çš„å…¨å"</span>)
    headline: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"ç”¨æˆ·çš„å¤´è¡”æˆ–å½“å‰èŒä½"</span>)
    location: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"ç”¨æˆ·æ‰€åœ¨çš„åœ°ç†ä½ç½®"</span>)
    summary: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"ä¸ªäººç®€ä»‹éƒ¨åˆ†çš„æ€»ç»“"</span>)
    experience: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>] = Field(description=<span class="hljs-string">"ä¸€ä¸ªåŒ…å«æ‰€æœ‰å·¥ä½œç»å†çš„åˆ—è¡¨"</span>)
    contact: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"ä»æŠ“å–å†…å®¹ä¸­æ‰¾åˆ°çš„é‚®ç®±æˆ–ä¸ªäººä¸»é¡µï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™ä¸º 'è”ç³»æ–¹å¼æœªæ‰¾åˆ°'"</span>)
</code></pre>
<h5 data-id="heading-8">2.3 è®¾è®¡â€œè¡ŒåŠ¨æŒ‡å—â€ï¼šSystem Prompt</h5>
<p>ä¸€ä¸ªå¥½çš„ System Prompt æ˜¯ Agent çš„â€œçµé­‚â€ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ˜ç¡®åœ°ä¸º Agent è®¾å®šäº†è§’è‰²ã€èƒ½åŠ›ï¼Œä»¥åŠæœ€é‡è¦çš„â€”â€”è¡ŒåŠ¨æŒ‡å—ï¼ˆReAct æ€è€ƒæ¨¡å¼ï¼‰ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ç‰¹åœ°å¼ºè°ƒäº† <code>PaperAnalysis</code> å’Œ <code>LinkedinProfile</code> æ˜¯<strong>ç‰¹æ®Šçš„â€œæŠ¥å‘Šç”Ÿæˆâ€å·¥å…·</strong>ï¼Œå¹¶æŒ‡å¯¼ Agent åœ¨æ”¶é›†å®Œä¿¡æ¯å<strong>å¿…é¡»</strong>è°ƒç”¨å®ƒä»¬æ¥ç”ŸæˆæŠ¥å‘Šã€‚è¿™ç§æ˜ç¡®çš„æŒ‡ä»¤å¯¹äºå¼•å¯¼ Agent è¡Œä¸ºè‡³å…³é‡è¦ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># --- æ­¥éª¤ 2.3: è®¾è®¡ä¸€ä¸ªæ›´é€šç”¨çš„ System Prompt ---</span>
SYSTEM_PROMPT = <span class="hljs-string">"""
ä½ æ˜¯ä¸€ä¸ªå…¨èƒ½çš„AIç ”ç©¶åŠ©ç†ã€‚ä½ å¯ä»¥å¤„ç†å¤šç§ä»»åŠ¡ï¼ŒåŒ…æ‹¬åˆ†æå­¦æœ¯è®ºæ–‡å’ŒæŸ¥è¯¢ä¸ªäººèµ„æ–™ã€‚

**ä½ çš„èƒ½åŠ› (å·¥å…·ç®±):**
*   ä½ æ‹¥æœ‰å­¦æœ¯æœç´¢ã€é€šç”¨ç½‘é¡µæœç´¢å’Œç½‘é¡µæŠ“å–ç­‰ä¸€ç³»åˆ—å·¥å…·ã€‚
*   **ç‰¹åˆ«æ³¨æ„:** ä½ è¿˜æ‹¥æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„â€œæŠ¥å‘Šç”Ÿæˆâ€å·¥å…·ï¼š`PaperAnalysis` å’Œ `LinkedinProfile`ã€‚

**ä½ çš„è¡ŒåŠ¨æŒ‡å— (ReAct æ€è€ƒæ¨¡å¼):**
1.  **åˆ†æä¸è§„åˆ’:** ç†è§£ç”¨æˆ·çš„è¯·æ±‚ã€‚å¦‚æœç”¨æˆ·çš„æœ€ç»ˆç›®çš„æ˜¯ç”Ÿæˆä¸€ä»½ç»“æ„åŒ–çš„æŠ¥å‘Šï¼ˆæ¯”å¦‚è®ºæ–‡åˆ†ææˆ–ä¸ªäººèµ„æ–™æ€»ç»“ï¼‰ï¼Œä½ çš„æœ€ç»ˆè¡ŒåŠ¨**å¿…é¡»**æ˜¯è°ƒç”¨ `PaperAnalysis` æˆ– `LinkedinProfile` å·¥å…·ã€‚
2.  **ä¿¡æ¯æ”¶é›†:** ä½¿ç”¨ä½ çš„å…¶ä»–å·¥å…·ï¼ˆå¦‚ `search_arxiv`, `scrape_as_markdown`ï¼‰æ¥æ”¶é›†å¡«å……æŠ¥å‘Šæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚
3.  **ç”ŸæˆæŠ¥å‘Š:** å½“ä½ æ”¶é›†åˆ°è¶³å¤Ÿçš„ä¿¡æ¯åï¼Œè°ƒç”¨ç›¸åº”çš„æŠ¥å‘Šç”Ÿæˆå·¥å…· (`PaperAnalysis` æˆ– `LinkedinProfile`)ï¼Œå°†æ”¶é›†åˆ°çš„ä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚
4.  **æ™®é€šå¯¹è¯:** å¦‚æœç”¨æˆ·åªæ˜¯è¿›è¡Œæ™®é€šèŠå¤©æˆ–æå‡ºç®€å•é—®é¢˜ï¼Œç›´æ¥ç”¨è‡ªç„¶è¯­è¨€å›ç­”å³å¯ï¼Œæ— éœ€è°ƒç”¨æŠ¥å‘Šå·¥å…·ã€‚
"""</span>
</code></pre>
<h5 data-id="heading-9">2.4 Agent çš„ç»„è£…ä¸æµ‹è¯•</h5>
<p>ç°åœ¨ï¼Œä¸‡äº‹ä¿±å¤‡ï¼Œæˆ‘ä»¬æ¥ç»„è£… Agentã€‚</p>
<ol>
<li><strong>åˆå§‹åŒ–å·¥å…·é›†</strong>ï¼šæˆ‘ä»¬é€šè¿‡ <code>MultiServerMCPClient</code> åŠ è½½äº†æ¥è‡ª BrightData å’Œ Paper Search çš„çœŸå®å·¥å…·é›†ã€‚</li>
<li><strong>æ³¨å…¥â€œä¼ªå·¥å…·â€</strong>ï¼šæˆ‘ä»¬å°†åˆšæ‰å®šä¹‰çš„ <code>PaperAnalysis</code> å’Œ <code>LinkedinProfile</code> ç±»ï¼Œåƒæ™®é€šå·¥å…·ä¸€æ ·ï¼Œè¿½åŠ åˆ° <code>all_tools</code> åˆ—è¡¨ä¸­ã€‚</li>
<li><strong>åˆ›å»º Agent</strong>ï¼šè°ƒç”¨ <code>create_agent</code> å‡½æ•°ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬<strong>æ²¡æœ‰ä¼ é€’ <code>response_format</code> å‚æ•°</strong>ï¼è¿™å°±æ˜¯æˆ‘ä»¬èµ‹äºˆ Agent è‡ªç”±çš„å…³é”®ã€‚</li>
<li><strong>å¤šä»»åŠ¡æµ‹è¯•</strong>ï¼šæˆ‘ä»¬è®¾è®¡äº†ä¸‰ä¸ªè¿ç»­çš„æµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–äº†è®ºæ–‡åˆ†æã€ä¸ªäººèµ„æ–™æŸ¥è¯¢å’Œæ™®é€šèŠå¤©è¿™ä¸‰ç§åœºæ™¯ã€‚</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># --- æ­¥éª¤ 2.4: å®šä¹‰ä¸»å¼‚æ­¥å‡½æ•° ---</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸš€ å¼€å§‹é…ç½®é€šç”¨ AI Agent..."</span>)

    <span class="hljs-comment"># --- åˆå§‹åŒ–å·¥å…·é›† ---</span>
    <span class="hljs-comment"># MultiServerMCPClient ç”¨äºè¿æ¥å’Œç®¡ç†å¤šä¸ªå¤–éƒ¨å·¥å…·æœåŠ¡</span>
    mcp_client = MultiServerMCPClient({
        <span class="hljs-string">"bright_data"</span>: {
            <span class="hljs-string">"url"</span>: <span class="hljs-string">f"https://mcp.brightdata.com/mcp?token=<span class="hljs-subst">{BrightData_API_KEY}</span>&amp;pro=1"</span>,
            <span class="hljs-string">"transport"</span>: <span class="hljs-string">"streamable_http"</span>,
        },
        <span class="hljs-string">"Paper_Search"</span>: {
            <span class="hljs-string">"url"</span>: <span class="hljs-string">f"https://server.smithery.ai/@adamamer20/paper-search-mcp-openai/mcp?api_key=<span class="hljs-subst">{Paper_Search_API_KEY}</span>"</span>,
            <span class="hljs-string">"transport"</span>: <span class="hljs-string">"streamable_http"</span>,
        }
    })

    <span class="hljs-comment"># å¼‚æ­¥è·å–æ‰€æœ‰å¯ç”¨çš„çœŸå®å·¥å…·</span>
    real_tools = <span class="hljs-keyword">await</span> mcp_client.get_tools()

    <span class="hljs-comment"># å°†æˆ‘ä»¬çš„â€œä¼ªå·¥å…·â€ï¼ˆPydanticæ¨¡å‹ï¼‰åŠ å…¥åˆ°å·¥å…·åˆ—è¡¨ä¸­</span>
    all_tools = real_tools + [PaperAnalysis, LinkedinProfile]
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… æˆåŠŸåŠ è½½ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(all_tools)}</span> ä¸ªå·¥å…·ã€‚"</span>)

    <span class="hljs-comment"># --- é…ç½® LLM ---</span>
    <span class="hljs-comment"># ä½¿ç”¨ Google çš„ gemini-2.5-flash æ¨¡å‹ï¼Œæ€§ä»·æ¯”å¾ˆé«˜</span>
    llm = ChatGoogleGenerativeAI(model=<span class="hljs-string">"gemini-2.5-flash"</span>, google_api_key=os.environ[<span class="hljs-string">"GEMINI_API_KEY"</span>])
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… LLM é…ç½®å®Œæˆ: gemini-2.5-flash"</span>)

    <span class="hljs-comment"># --- é…ç½®å†…å­˜ ---</span>
    <span class="hljs-comment"># ä½¿ç”¨å†…å­˜å­˜å‚¨ä¼šè¯å†å²ï¼Œæ–¹ä¾¿è¿›è¡Œå¤šè½®å¯¹è¯</span>
    checkpointer = InMemorySaver()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ’¾ å†…å­˜å·²é…ç½®: InMemorySaver"</span>)

    <span class="hljs-comment"># --- æ­¥éª¤ 2.5: åˆ›å»º Agentï¼Œæ³¨æ„è¿™æ¬¡ä¸æŒ‡å®š response_format ---</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ¤– æ­£åœ¨åˆ›å»ºé€šç”¨ Agent..."</span>)
    agent_executor = create_agent(
        model=llm,
        tools=all_tools, <span class="hljs-comment"># ä¼ å…¥åŒ…å«çœŸå®å·¥å…·å’Œâ€œä¼ªå·¥å…·â€çš„å®Œæ•´åˆ—è¡¨</span>
        system_prompt=SYSTEM_PROMPT,
        checkpointer=checkpointer
        <span class="hljs-comment"># æˆ‘ä»¬ç§»é™¤äº† response_formatï¼Œç»™äºˆ Agent æ›´å¤§çš„è‡ªç”±åº¦</span>
    )
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… Agent åˆ›å»ºæˆåŠŸï¼"</span>)

    <span class="hljs-comment"># --- æ­¥éª¤ 2.6: è¿›è¡Œå¤šä»»åŠ¡æµ‹è¯• ---</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸš€ å¼€å§‹å¤šä»»åŠ¡å¯¹è¯æµ‹è¯•ï¼"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)

    <span class="hljs-comment"># ä¸ºæœ¬æ¬¡å¯¹è¯åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„çº¿ç¨‹IDï¼Œä»¥ä¿æŒä¸Šä¸‹æ–‡</span>
    conversation_config = {<span class="hljs-string">"configurable"</span>: {<span class="hljs-string">"thread_id"</span>: <span class="hljs-string">"multi-task-thread-1"</span>}}

    <span class="hljs-comment"># --- ä»»åŠ¡1: è®ºæ–‡åˆ†æ ---</span>
    user_input_1 = <span class="hljs-string">"è¯·ä½¿ç”¨ 'search_arxiv' å·¥å…·æœç´¢ 'https://arxiv.org/abs/2409.09046'é‡Œçš„è¿™ç¯‡è®ºæ–‡ï¼Œå¹¶ç”¨ 'read_arxiv_paper' å·¥å…·è¯»å–è®ºæ–‡å†…å®¹ã€‚å¸®æˆ‘æå–è®ºæ–‡ä¸»è¦å†…å®¹å’Œæå–ä½œè€…ä¿¡æ¯ï¼Œå°¤å…¶æ˜¯ä½œè€…ä»¬çš„é‚®ç®±ã€‚"</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ‘¤ ç”¨æˆ· (ä»»åŠ¡1): <span class="hljs-subst">{user_input_1}</span>\n"</span>)
    response_1 = <span class="hljs-keyword">await</span> agent_executor.ainvoke({<span class="hljs-string">"messages"</span>: [(<span class="hljs-string">"user"</span>, user_input_1)]}, config=conversation_config)
    final_answer_1 = response_1[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>].content
    <span class="hljs-comment"># ... (æ‰“å°éƒ¨åˆ†çœç•¥) ...</span>

    <span class="hljs-comment"># --- ä»»åŠ¡2: ä¸ªäººèµ„æ–™æŸ¥è¯¢ ---</span>
    user_input_2 = <span class="hljs-string">"å¹²å¾—å¥½ï¼ç°åœ¨ï¼Œè¯·å¸®æˆ‘æŸ¥æ‰¾å´æ©è¾¾çš„é¢†è‹±ä¸»é¡µä¿¡æ¯ï¼Œå¹¶ä»¥ç»“æ„åŒ–å½¢å¼è¿”å›ã€‚"</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ‘¤ ç”¨æˆ· (ä»»åŠ¡2): <span class="hljs-subst">{user_input_2}</span>\n"</span>)
    response_2 = <span class="hljs-keyword">await</span> agent_executor.ainvoke({<span class="hljs-string">"messages"</span>: [(<span class="hljs-string">"user"</span>, user_input_2)]}, config=conversation_config)
    final_answer_2 = response_2[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>].content
    <span class="hljs-comment"># ... (æ‰“å°éƒ¨åˆ†çœç•¥) ...</span>

    <span class="hljs-comment"># --- ä»»åŠ¡3: æ™®é€šèŠå¤© ---</span>
    user_input_3 = <span class="hljs-string">"è°¢è°¢ä½ ï¼Œä½ çœŸæ˜¯ä¸ªå¥½å¸®æ‰‹ã€‚"</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ‘¤ ç”¨æˆ· (ä»»åŠ¡3): <span class="hljs-subst">{user_input_3}</span>\n"</span>)
    response_3 = <span class="hljs-keyword">await</span> agent_executor.ainvoke({<span class="hljs-string">"messages"</span>: [(<span class="hljs-string">"user"</span>, user_input_3)]}, config=conversation_config)
    final_answer_3 = response_3[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>].content
    <span class="hljs-comment"># ... (æ‰“å°éƒ¨åˆ†çœç•¥) ...</span>

    <span class="hljs-comment"># --- ç»Ÿä¸€è¾“å‡ºæœ€ç»ˆç»“æœ ---</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"---"</span> * <span class="hljs-number">20</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æœ€ç»ˆæˆæœå±•ç¤º:"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"---"</span> * <span class="hljs-number">20</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n[ä»»åŠ¡ä¸€ï¼šè®ºæ–‡åˆ†æç»“æœ]\n"</span>)
    <span class="hljs-built_in">print</span>(final_answer_1)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n[ä»»åŠ¡äºŒï¼šä¸ªäººèµ„æ–™æŸ¥è¯¢ç»“æœ]\n"</span>)
    <span class="hljs-built_in">print</span>(final_answer_2)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n[ä»»åŠ¡ä¸‰ï¼šæ™®é€šèŠå¤©ç»“æœ]\n"</span>)
    <span class="hljs-built_in">print</span>(final_answer_3)


<span class="hljs-comment"># --- æ­¥éª¤ 2.7: è¿è¡Œä¸»å‡½æ•° ---</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    asyncio.run(main())
</code></pre>
<h4 data-id="heading-10">æ­¥éª¤ 3: è§è¯å¥‡è¿¹ï¼åˆ†æè¿è¡Œç»“æœ</h4>
<p>è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªèªæ˜çš„ Agent æ˜¯å¦‚ä½•å¤„ç†æˆ‘ä»¬æŠ›ç»™å®ƒçš„ä¸‰ä¸ªä¸åŒä»»åŠ¡çš„ã€‚</p>
<h5 data-id="heading-11">ä»»åŠ¡ 1: è®ºæ–‡åˆ†æ ğŸ“–</h5>
<p><strong>ç”¨æˆ·è¾“å…¥</strong>: <code>è¯·ä½¿ç”¨ 'search_arxiv' å·¥å…·æœç´¢ 'https://arxiv.org/abs/2409.09046'é‡Œçš„è¿™ç¯‡è®ºæ–‡...å¸®æˆ‘æå–è®ºæ–‡ä¸»è¦å†…å®¹å’Œæå–ä½œè€…ä¿¡æ¯...</code></p>
<p><strong>Agent å›ç­”</strong>:</p>
<pre><code class="hljs language-text" lang="text">å¥½çš„ï¼Œæˆ‘å·²ç»è¯»å–äº†è¿™ç¯‡è®ºæ–‡ã€‚

**è®ºæ–‡ä¸»è¦å†…å®¹æ‘˜è¦ï¼š**

å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰åœ¨äººå·¥æ™ºèƒ½æ³•å¾‹å’Œæ”¿ç­–åº”ç”¨ä¸­é¢ä¸´çŸ¥è¯†è¿‡æ—¶ã€å¹»è§‰å’Œå¤æ‚è¯­å¢ƒä¸­æ¨ç†èƒ½åŠ›å·®çš„å±€é™æ€§ã€‚æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ç³»ç»Ÿé€šè¿‡æ•´åˆå¤–éƒ¨çŸ¥è¯†æ¥è§£å†³è¿™äº›é—®é¢˜...ä¸ºé«˜é£é™©æ³•å¾‹å’Œæ”¿ç­–åº”ç”¨æä¾›äº†ä¸€ä¸ªå¼ºå¤§ä¸”é€‚åº”æ€§å¼ºçš„è§£å†³æ–¹æ¡ˆã€‚

**ä½œè€…ä¿¡æ¯ï¼š**

*   **ä½œè€…ï¼š** Rishi Kalra, Zekun Wu, Ayesha Gulley, Airlie Hilliard, Xin Guan, Adriano Koshiyama, Philip Treleaven
*   **æ‰€å±æœºæ„ï¼š** Holistic AI å’Œ University College London

è®ºæ–‡ä¸­å¹¶æœªç›´æ¥æä¾›ä½œè€…çš„é‚®ç®±åœ°å€...ä¸ºäº†è·å–ä½œè€…çš„é‚®ç®±ï¼Œæˆ‘éœ€è¦è¿›è¡Œä¸€æ¬¡ç½‘é¡µæœç´¢ã€‚è¯·é—®æ‚¨æ˜¯å¦å¸Œæœ›æˆ‘å°è¯•æœç´¢ä½œè€…çš„é‚®ç®±ï¼Ÿ
</code></pre>
<p><strong>ç»“æœåˆ†æ</strong>:
Agent å‡†ç¡®åœ°æ‰§è¡Œäº† <code>search_arxiv</code> å’Œ <code>read_arxiv_paper</code> å·¥å…·ï¼Œå¹¶ç”¨ Markdown æ ¼å¼æ¸…æ™°åœ°æ€»ç»“äº†è®ºæ–‡å†…å®¹å’Œä½œè€…ä¿¡æ¯ã€‚æœ‰è¶£çš„æ˜¯ï¼Œå®ƒ<strong>æ²¡æœ‰</strong>è°ƒç”¨æˆ‘ä»¬é¢„è®¾çš„ <code>PaperAnalysis</code> å·¥å…·ã€‚è¿™æ°æ°è¯æ˜äº†å®ƒçš„æ™ºèƒ½å’Œçµæ´»æ€§ï¼å®ƒåˆ¤æ–­å½“å‰åœºæ™¯ä¸‹ï¼Œä¸€ä¸ªæ ¼å¼åŒ–çš„æ–‡æœ¬å›å¤å·²ç»è¶³å¤Ÿæ¸…æ™°ï¼Œå¹¶ä¸”åœ¨å‘ç°ä¿¡æ¯ä¸å®Œæ•´ï¼ˆæ‰¾ä¸åˆ°é‚®ç®±ï¼‰æ—¶ï¼Œå®ƒæ²¡æœ‰å¼ºè¡Œå¡«è¡¨ï¼Œè€Œæ˜¯ä¸»åŠ¨ä¸ç”¨æˆ·æ²Ÿé€šï¼Œè¯·æ±‚ä¸‹ä¸€æ­¥æŒ‡ä»¤ã€‚éå¸¸æ£’ï¼</p>
<h5 data-id="heading-12">ä»»åŠ¡ 2: ä¸ªäººèµ„æ–™æŸ¥è¯¢ ğŸ§‘â€ğŸ’¼</h5>
<p><strong>ç”¨æˆ·è¾“å…¥</strong>: <code>å¹²å¾—å¥½ï¼ç°åœ¨ï¼Œè¯·å¸®æˆ‘æŸ¥æ‰¾å´æ©è¾¾çš„é¢†è‹±ä¸»é¡µä¿¡æ¯ï¼Œå¹¶ä»¥ç»“æ„åŒ–å½¢å¼è¿”å›ã€‚</code></p>
<p><strong>Agent å›ç­”</strong>:</p>
<pre><code class="hljs language-text" lang="text">å¥½çš„ï¼Œè¿™æ˜¯å´æ©è¾¾ï¼ˆAndrew Ngï¼‰çš„é¢†è‹±ä¸»é¡µä¿¡æ¯ï¼š

**å…¨å:** Andrew Ng
**å¤´è¡”:** DeepLearning.AI åˆ›å§‹äººï¼›AI Fund ç®¡ç†åˆä¼™äººï¼›LandingAI æ‰§è¡Œä¸»å¸­
**åœ°ç‚¹:** ç¾å›½åŠ åˆ©ç¦å°¼äºšå·å¸•æ´›é˜¿å°”æ‰˜
**ä¸ªäººç®€ä»‹:** Andrew Ng æ˜¯äººå·¥æ™ºèƒ½é¢†åŸŸçš„æ°å‡ºäººç‰©...ä»–çš„ä¸ªäººä¸»é¡µæ˜¯ http://andrewng.orgã€‚
**ç»å†:**
*   DeepLearning.AI åˆ›å§‹äºº (2017 å¹´ 6 æœˆ - è‡³ä»Š)
*   AI Fund ç®¡ç†åˆä¼™äºº (2018 å¹´ 1 æœˆ - è‡³ä»Š)
*   ...
**è”ç³»æ–¹å¼:** https://www.linkedin.com/in/andrewyng
</code></pre>
<p><strong>ç»“æœåˆ†æ</strong>:
<strong>å®Œç¾ï¼</strong> è¿™æ¬¡ Agent çš„è¡¨ç°å ªç§°å…¸èŒƒã€‚</p>
<ol>
<li>å®ƒç†è§£äº†â€œå´æ©è¾¾â€å’Œâ€œé¢†è‹±ä¸»é¡µâ€ã€‚</li>
<li>è°ƒç”¨ <code>search_engine</code> å·¥å…·æ‰¾åˆ°äº†æ­£ç¡®çš„ URLã€‚</li>
<li>è°ƒç”¨ <code>web_data_linkedin_person_profile</code> å·¥å…·æŠ“å–äº†é¡µé¢ä¿¡æ¯ã€‚</li>
<li><strong>æœ€å…³é”®çš„ä¸€æ­¥</strong>ï¼šå®ƒè°ƒç”¨äº†æˆ‘ä»¬å®šä¹‰çš„ <code>LinkedinProfile</code> è¿™ä¸ªâ€œä¼ªå·¥å…·â€ï¼Œå°†æŠ“å–åˆ°çš„éç»“æ„åŒ–ä¿¡æ¯ï¼Œè‡ªåŠ¨å¡«å……åˆ°äº†æˆ‘ä»¬é¢„è®¾çš„å­—æ®µä¸­ã€‚</li>
<li>æœ€åï¼Œå®ƒå°†è¿™ä¸ªç»“æ„åŒ–çš„ç»“æœä»¥ç”¨æˆ·å‹å¥½çš„æ ¼å¼å‘ˆç°å‡ºæ¥ã€‚</li>
</ol>
<p>è¿™å®Œç¾åœ°å±•ç¤ºäº†æˆ‘ä»¬çš„æ ¸å¿ƒç­–ç•¥æ˜¯å¤šä¹ˆæˆåŠŸï¼</p>
<h5 data-id="heading-13">ä»»åŠ¡ 3: æ™®é€šèŠå¤© ğŸ˜Š</h5>
<p><strong>ç”¨æˆ·è¾“å…¥</strong>: <code>è°¢è°¢ä½ ï¼Œä½ çœŸæ˜¯ä¸ªå¥½å¸®æ‰‹ã€‚</code></p>
<p><strong>Agent å›ç­”</strong>:</p>
<pre><code class="hljs language-text" lang="text">ä¸å®¢æ°”ï¼å¾ˆé«˜å…´èƒ½å¸®åˆ°æ‚¨ã€‚å¦‚æœæ‚¨è¿˜æœ‰å…¶ä»–é—®é¢˜æˆ–éœ€è¦è¿›ä¸€æ­¥çš„å¸®åŠ©ï¼Œè¯·éšæ—¶å‘Šè¯‰æˆ‘ã€‚
</code></pre>
<p><strong>ç»“æœåˆ†æ</strong>:
æ­£å¦‚æˆ‘ä»¬æ‰€æœŸæœ›çš„ï¼ŒAgent åœ¨é¢å¯¹ç®€å•çš„æ„Ÿè°¢æ—¶ï¼Œç»™å‡ºäº†ä¸€ä¸ªè‡ªç„¶ã€ç¤¼è²Œçš„å›å¤ã€‚å®ƒæ²¡æœ‰è°ƒç”¨ä»»ä½•å·¥å…·ï¼Œæ›´æ²¡æœ‰å»å°è¯•åŒ¹é… <code>PaperAnalysis</code> æˆ– <code>LinkedinProfile</code>ï¼Œå› ä¸ºå®ƒæ¸…æ¥šåœ°çŸ¥é“ï¼Œè¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„å¯¹è¯ã€‚è¿™è¯æ˜äº†æˆ‘ä»¬çš„ Agent çœŸæ­£å®ç°äº†â€œèƒ½å±ˆèƒ½ä¼¸â€ï¼Œåœ¨ä¸åŒåœºæ™¯ä¸‹æ¸¸åˆƒæœ‰ä½™ã€‚</p>
<hr/>
<h3 data-id="heading-14">æ€»ç»“ä¸å±•æœ›</h3>
<p>é€šè¿‡è¿™æ¬¡å®è·µï¼Œæˆ‘ä»¬æˆåŠŸä½¿ç”¨LangGraphçš„ReAct-AgentèŒƒå¼é›†æˆäº†BrightDataå’ŒPaperSearchçš„MCPå·¥å…·ï¼Œé€šè¿‡æœç´¢å’Œçˆ¬å–é¢†è‹±å’Œå­¦æœ¯ç½‘ç«™ï¼Œå®ç°äº†å…·å¤‡è®ºæ–‡æœç´¢å’Œè¯»å–ï¼Œå­¦è€…ä¿¡æ¯æå–ï¼Œé‚®ç®±æŸ¥æ‰¾ç­‰åŠŸèƒ½çš„ AI åŠ©ç†ã€‚å…¶æˆåŠŸçš„å…³é”®ï¼Œå°±åœ¨äºæˆ‘ä»¬è½¬å˜äº†æ€è·¯ï¼š</p>
<blockquote>
<p><strong>å°†â€œå¼ºåˆ¶çš„è¾“å‡ºæ ¼å¼â€è½¬å˜ä¸ºâ€œå¯é€‰çš„æ ¼å¼åŒ–å·¥å…·â€ï¼ŒæŠŠæœ€ç»ˆå†³ç­–æƒäº¤è¿˜ç»™ Agentã€‚</strong></p>
</blockquote>
<p>è¿™ç§åŸºäº Pydantic æ¨¡å‹å’Œ ReAct æ¨¡å¼çš„â€œä¼ªå·¥å…·â€æ–¹æ³•ï¼Œä¸ä»…è®©æˆ‘ä»¬çš„ Agent æ›´åŠ æ™ºèƒ½å’Œçµæ´»ï¼Œä¹Ÿä¸ºæˆ‘ä»¬æœªæ¥æ„å»ºæ›´å¤æ‚çš„ã€å¤šåŠŸèƒ½çš„ Agent ç³»ç»Ÿæä¾›äº†ä¸€ä¸ªæå…·ä»·å€¼çš„è®¾è®¡èŒƒå¼ã€‚</p>
<p>å¸Œæœ›ä»Šå¤©çš„åˆ†äº«èƒ½å¯¹ä½ æœ‰æ‰€å¯å‘ã€‚å¦‚æœä½ å¯¹è¿™ä¸ªé¡¹ç›®æœ‰ä»»ä½•ç–‘é—®æˆ–è€…æ›´å¥½çš„æƒ³æ³•ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºï¼</p>
<hr/>
<p><strong>é™„ï¼šå®Œæ•´é¡¹ç›®æºç </strong></p>
<p>ï¼ˆä¸ºäº†æ–¹ä¾¿å¤§å®¶å¤åˆ¶ä»£ç ï¼Œè¿™é‡Œå†æ¬¡è´´å‡ºå®Œæ•´çš„ã€å¯ç›´æ¥è¿è¡Œçš„ä»£ç ï¼‰</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># --- æ­¥éª¤ 1: å®‰è£…ä¸é‡å¯ (åŒå‰) ---</span>
!pip install --upgrade --quiet langchain langchain-core langchain-mcp-adapters langchain-google-genai langgraph beautifulsoup4
<span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… åº“å·²å‡çº§ã€‚è¯·åŠ¡å¿…ä»èœå•æ ç‚¹å‡» 'ä»£ç æ‰§è¡Œç¨‹åº' -&gt; 'é‡å¯ä¼šè¯'ï¼Œç„¶åå†ç»§ç»­è¿è¡Œä¸‹é¢çš„ä»£ç ï¼"</span>)



<span class="hljs-comment"># --- æ­¥éª¤ 2: å®Œæ•´ä»£ç  ---</span>

<span class="hljs-comment"># 2.1: å¯¼å…¥</span>
<span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>, <span class="hljs-type">Union</span>
<span class="hljs-keyword">from</span> dataclasses <span class="hljs-keyword">import</span> dataclass
<span class="hljs-keyword">import</span> nest_asyncio
nest_asyncio.apply()

<span class="hljs-keyword">from</span> langchain_google_genai <span class="hljs-keyword">import</span> ChatGoogleGenerativeAI
<span class="hljs-keyword">from</span> langchain_mcp_adapters.client <span class="hljs-keyword">import</span> MultiServerMCPClient
<span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent
<span class="hljs-keyword">from</span> langgraph.checkpoint.memory <span class="hljs-keyword">import</span> InMemorySaver
<span class="hljs-comment"># from langchain_core.pydantic_v1 import BaseModel, Field # å¯¼å…¥ Pydantic ç”¨äºåŠ¨æ€å·¥å…·</span>
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel, Field


<span class="hljs-comment"># 2.2: åŠ è½½å¯†é’¥</span>
<span class="hljs-keyword">from</span> google.colab <span class="hljs-keyword">import</span> userdata
os.environ[<span class="hljs-string">"GEMINI_API_KEY"</span>] = userdata.get(<span class="hljs-string">'GEMINI_API_KEY'</span>)
BrightData_API_KEY = userdata.get(<span class="hljs-string">'BrightData_API_KEY'</span>)
Paper_Search_API_KEY = userdata.get(<span class="hljs-string">'Paper_Search_API_KEY'</span>)

<span class="hljs-comment"># ================================================================= #</span>
<span class="hljs-comment">#  ğŸ”¥ğŸ”¥ğŸ”¥ æ ¸å¿ƒä¼˜åŒ–ç‚¹ 1: åˆ›å»ºä¸“é—¨ç”¨äºç»“æ„åŒ–è¾“å‡ºçš„â€œä¼ªå·¥å…·â€ ğŸ”¥ğŸ”¥ğŸ”¥</span>
<span class="hljs-comment"># ================================================================= #</span>
<span class="hljs-comment"># æˆ‘ä»¬ä¸å†å°† dataclass ä½œä¸º response_formatï¼Œè€Œæ˜¯å°†å®ƒä»¬åŒ…è£…æˆ Pydantic æ¨¡å‹ï¼Œ</span>
<span class="hljs-comment"># å¹¶ä½œä¸ºâ€œå·¥å…·â€æä¾›ç»™ Agentã€‚è¿™è®© Agent å¯ä»¥è‡ªå·±å†³å®šä½•æ—¶è°ƒç”¨å®ƒä»¬ã€‚</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">PaperAnalysis</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-string">"""å½“ç”¨æˆ·è¦æ±‚å¯¹ä¸€ç¯‡å­¦æœ¯è®ºæ–‡è¿›è¡Œè¯¦ç»†åˆ†ææ—¶ï¼Œè°ƒç”¨æ­¤å·¥å…·æ¥æ ¼å¼åŒ–æœ€ç»ˆæŠ¥å‘Šã€‚"""</span>
    title: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"è®ºæ–‡çš„å®Œæ•´æ ‡é¢˜"</span>)
    authors: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>] = Field(description=<span class="hljs-string">"è®ºæ–‡çš„æ ¸å¿ƒä½œè€…åˆ—è¡¨"</span>)
    research_field: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"æ ¹æ®å†…å®¹æ€»ç»“å‡ºçš„ç ”ç©¶æ–¹å‘"</span>)
    summary: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"å¯¹è®ºæ–‡æ ¸å¿ƒè´¡çŒ®çš„è¯¦ç»†æ€»ç»“"</span>)
    author_contact: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"ä»æŠ“å–å†…å®¹ä¸­æ‰¾åˆ°çš„ä½œè€…é‚®ç®±æˆ–ä¸ªäººä¸»é¡µï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™ä¸º 'è”ç³»æ–¹å¼æœªæ‰¾åˆ°'"</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">LinkedinProfile</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-string">"""å½“ç”¨æˆ·è¦æ±‚æå–é¢†è‹±ä¸ªäººä¸»é¡µä¿¡æ¯æ—¶ï¼Œè°ƒç”¨æ­¤å·¥å…·æ¥æ ¼å¼åŒ–æœ€ç»ˆæŠ¥å‘Šã€‚"""</span>
    full_name: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"ç”¨æˆ·çš„å…¨å"</span>)
    headline: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"ç”¨æˆ·çš„å¤´è¡”æˆ–å½“å‰èŒä½"</span>)
    location: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"ç”¨æˆ·æ‰€åœ¨çš„åœ°ç†ä½ç½®"</span>)
    summary: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"ä¸ªäººç®€ä»‹éƒ¨åˆ†çš„æ€»ç»“"</span>)
    experience: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>] = Field(description=<span class="hljs-string">"ä¸€ä¸ªåŒ…å«æ‰€æœ‰å·¥ä½œç»å†çš„åˆ—è¡¨"</span>)
    contact: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"ä»æŠ“å–å†…å®¹ä¸­æ‰¾åˆ°çš„é‚®ç®±æˆ–ä¸ªäººä¸»é¡µï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™ä¸º 'è”ç³»æ–¹å¼æœªæ‰¾åˆ°'"</span>)

<span class="hljs-comment"># --- æ­¥éª¤ 2.3: è®¾è®¡ä¸€ä¸ªæ›´é€šç”¨çš„ System Prompt ---</span>
SYSTEM_PROMPT = <span class="hljs-string">"""
ä½ æ˜¯ä¸€ä¸ªå…¨èƒ½çš„AIç ”ç©¶åŠ©ç†ã€‚ä½ å¯ä»¥å¤„ç†å¤šç§ä»»åŠ¡ï¼ŒåŒ…æ‹¬åˆ†æå­¦æœ¯è®ºæ–‡å’ŒæŸ¥è¯¢ä¸ªäººèµ„æ–™ã€‚

**ä½ çš„èƒ½åŠ› (å·¥å…·ç®±):**
*   ä½ æ‹¥æœ‰å­¦æœ¯æœç´¢ã€é€šç”¨ç½‘é¡µæœç´¢å’Œç½‘é¡µæŠ“å–ç­‰ä¸€ç³»åˆ—å·¥å…·ã€‚
*   **ç‰¹åˆ«æ³¨æ„:** ä½ è¿˜æ‹¥æœ‰ä¸¤ä¸ªç‰¹æ®Šçš„â€œæŠ¥å‘Šç”Ÿæˆâ€å·¥å…·ï¼š`PaperAnalysis` å’Œ `LinkedinProfile`ã€‚

**ä½ çš„è¡ŒåŠ¨æŒ‡å— (ReAct æ€è€ƒæ¨¡å¼):**
1.  **åˆ†æä¸è§„åˆ’:** ç†è§£ç”¨æˆ·çš„è¯·æ±‚ã€‚å¦‚æœç”¨æˆ·çš„æœ€ç»ˆç›®çš„æ˜¯ç”Ÿæˆä¸€ä»½ç»“æ„åŒ–çš„æŠ¥å‘Šï¼ˆæ¯”å¦‚è®ºæ–‡åˆ†ææˆ–ä¸ªäººèµ„æ–™æ€»ç»“ï¼‰ï¼Œä½ çš„æœ€ç»ˆè¡ŒåŠ¨**å¿…é¡»**æ˜¯è°ƒç”¨ `PaperAnalysis` æˆ– `LinkedinProfile` å·¥å…·ã€‚
2.  **ä¿¡æ¯æ”¶é›†:** ä½¿ç”¨ä½ çš„å…¶ä»–å·¥å…·ï¼ˆå¦‚ `search_arxiv`, `scrape_as_markdown`ï¼‰æ¥æ”¶é›†å¡«å……æŠ¥å‘Šæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚
3.  **ç”ŸæˆæŠ¥å‘Š:** å½“ä½ æ”¶é›†åˆ°è¶³å¤Ÿçš„ä¿¡æ¯åï¼Œè°ƒç”¨ç›¸åº”çš„æŠ¥å‘Šç”Ÿæˆå·¥å…· (`PaperAnalysis` æˆ– `LinkedinProfile`)ï¼Œå°†æ”¶é›†åˆ°çš„ä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚
4.  **æ™®é€šå¯¹è¯:** å¦‚æœç”¨æˆ·åªæ˜¯è¿›è¡Œæ™®é€šèŠå¤©æˆ–æå‡ºç®€å•é—®é¢˜ï¼Œç›´æ¥ç”¨è‡ªç„¶è¯­è¨€å›ç­”å³å¯ï¼Œæ— éœ€è°ƒç”¨æŠ¥å‘Šå·¥å…·ã€‚
"""</span>

<span class="hljs-comment"># --- æ­¥éª¤ 2.4: å®šä¹‰ä¸»å¼‚æ­¥å‡½æ•° ---</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸš€ å¼€å§‹é…ç½®é€šç”¨ AI Agent..."</span>)

    <span class="hljs-comment"># --- åˆå§‹åŒ–å·¥å…·é›† ---</span>
    mcp_client = MultiServerMCPClient({
    <span class="hljs-string">"bright_data"</span>: {
        <span class="hljs-string">"url"</span>: <span class="hljs-string">f"https://mcp.brightdata.com/mcp?token=<span class="hljs-subst">{BrightData_API_KEY}</span>&amp;pro=1"</span>,
        <span class="hljs-string">"transport"</span>: <span class="hljs-string">"streamable_http"</span>,
    },
    <span class="hljs-string">"Paper_Search"</span>: {
        <span class="hljs-string">"url"</span>: <span class="hljs-string">f"https://server.smithery.ai/@adamamer20/paper-search-mcp-openai/mcp?api_key=<span class="hljs-subst">{Paper_Search_API_KEY}</span>"</span>,
        <span class="hljs-string">"transport"</span>: <span class="hljs-string">"streamable_http"</span>,
    }
    })


    real_tools = <span class="hljs-keyword">await</span> mcp_client.get_tools()

    <span class="hljs-comment"># å°†æˆ‘ä»¬çš„â€œä¼ªå·¥å…·â€åŠ å…¥å·¥å…·åˆ—è¡¨</span>
    all_tools = real_tools + [PaperAnalysis, LinkedinProfile]
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… æˆåŠŸåŠ è½½ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(all_tools)}</span> ä¸ªå·¥å…·ã€‚"</span>)

    <span class="hljs-comment"># --- é…ç½® LLM ---</span>
    llm = ChatGoogleGenerativeAI(model=<span class="hljs-string">"gemini-2.5-flash"</span>, google_api_key=os.environ[<span class="hljs-string">"GEMINI_API_KEY"</span>])
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… LLM é…ç½®å®Œæˆ: gemini-2.5-flash"</span>)

    <span class="hljs-comment"># --- é…ç½®å†…å­˜ ---</span>
    checkpointer = InMemorySaver()
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ’¾ å†…å­˜å·²é…ç½®: InMemorySaver"</span>)

    <span class="hljs-comment"># --- æ­¥éª¤ 2.5: åˆ›å»º Agentï¼Œæ³¨æ„è¿™æ¬¡ä¸æŒ‡å®š response_format ---</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ¤– æ­£åœ¨åˆ›å»ºé€šç”¨ Agent..."</span>)
    agent_executor = create_agent(
        model=llm,
        tools=all_tools,
        system_prompt=SYSTEM_PROMPT,
        checkpointer=checkpointer
        <span class="hljs-comment"># æˆ‘ä»¬ç§»é™¤äº† response_formatï¼Œç»™äºˆ Agent æ›´å¤§çš„è‡ªç”±åº¦</span>
    )
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœ… Agent åˆ›å»ºæˆåŠŸï¼"</span>)

    <span class="hljs-comment"># --- æ­¥éª¤ 2.6: è¿›è¡Œå¤šä»»åŠ¡æµ‹è¯• ---</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸš€ å¼€å§‹å¤šä»»åŠ¡å¯¹è¯æµ‹è¯•ï¼"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)

    conversation_config = {<span class="hljs-string">"configurable"</span>: {<span class="hljs-string">"thread_id"</span>: <span class="hljs-string">"multi-task-thread-1"</span>}}

    <span class="hljs-comment"># --- ä»»åŠ¡1: è®ºæ–‡åˆ†æ ---</span>
    user_input_1 = <span class="hljs-string">"è¯·ä½¿ç”¨ 'search_arxiv' å·¥å…·æœç´¢ 'https://arxiv.org/abs/2409.09046'é‡Œçš„è¿™ç¯‡è®ºæ–‡ï¼Œå¹¶ç”¨ 'read_arxiv_paper' å·¥å…·è¯»å–è®ºæ–‡å†…å®¹ã€‚å¸®æˆ‘æå–è®ºæ–‡ä¸»è¦å†…å®¹å’Œæå–ä½œè€…ä¿¡æ¯ï¼Œå°¤å…¶æ˜¯ä½œè€…ä»¬çš„é‚®ç®±ã€‚"</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ‘¤ ç”¨æˆ· (ä»»åŠ¡1): <span class="hljs-subst">{user_input_1}</span>\n"</span>)
    response_1 = <span class="hljs-keyword">await</span> agent_executor.ainvoke({<span class="hljs-string">"messages"</span>: [(<span class="hljs-string">"user"</span>, user_input_1)]}, config=conversation_config)
    final_answer_1 = response_1[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>].content
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"ğŸ¤–"</span> * <span class="hljs-number">25</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ¤– Agent çš„å›ç­” (ä»»åŠ¡1):"</span>)
    <span class="hljs-built_in">print</span>(final_answer_1)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ¤–"</span> * <span class="hljs-number">25</span> + <span class="hljs-string">"\n"</span>)

    <span class="hljs-comment"># --- ä»»åŠ¡2: ä¸ªäººèµ„æ–™æŸ¥è¯¢ ---</span>
    user_input_2 = <span class="hljs-string">"å¹²å¾—å¥½ï¼ç°åœ¨ï¼Œè¯·å¸®æˆ‘æŸ¥æ‰¾å´æ©è¾¾çš„é¢†è‹±ä¸»é¡µä¿¡æ¯ï¼Œå¹¶ä»¥ç»“æ„åŒ–å½¢å¼è¿”å›ã€‚"</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ‘¤ ç”¨æˆ· (ä»»åŠ¡2): <span class="hljs-subst">{user_input_2}</span>\n"</span>)
    response_2 = <span class="hljs-keyword">await</span> agent_executor.ainvoke({<span class="hljs-string">"messages"</span>: [(<span class="hljs-string">"user"</span>, user_input_2)]}, config=conversation_config)
    final_answer_2 = response_2[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>].content
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"ğŸ¤–"</span> * <span class="hljs-number">25</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ¤– Agent çš„å›ç­” (ä»»åŠ¡2):"</span>)
    <span class="hljs-built_in">print</span>(final_answer_2)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ¤–"</span> * <span class="hljs-number">25</span> + <span class="hljs-string">"\n"</span>)

    <span class="hljs-comment"># --- ä»»åŠ¡3: æ™®é€šèŠå¤© ---</span>
    user_input_3 = <span class="hljs-string">"è°¢è°¢ä½ ï¼Œä½ çœŸæ˜¯ä¸ªå¥½å¸®æ‰‹ã€‚"</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ğŸ‘¤ ç”¨æˆ· (ä»»åŠ¡3): <span class="hljs-subst">{user_input_3}</span>\n"</span>)
    response_3 = <span class="hljs-keyword">await</span> agent_executor.ainvoke({<span class="hljs-string">"messages"</span>: [(<span class="hljs-string">"user"</span>, user_input_3)]}, config=conversation_config)
    final_answer_3 = response_3[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>].content
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"ğŸ¤–"</span> * <span class="hljs-number">25</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ¤– Agent çš„å›ç­” (ä»»åŠ¡3):"</span>)
    <span class="hljs-built_in">print</span>(final_answer_3)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ¤–"</span> * <span class="hljs-number">25</span>)

<span class="hljs-comment"># --- æ­¥éª¤ 2.7: è¿è¡Œä¸»å‡½æ•° ---</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    asyncio.run(main())
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€OpenGLå­¦ä¹ æ»¤é•œç›¸æœºã€- Day10: ç›¸æœºé¢„è§ˆä¸ OpenGL ç»“åˆ]]></title>    <link>https://juejin.cn/post/7572493520004104226</link>    <guid>https://juejin.cn/post/7572493520004104226</guid>    <pubDate>2025-11-16T02:51:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572493520004104226" data-draft-id="7572524368879337506" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€OpenGLå­¦ä¹ æ»¤é•œç›¸æœºã€- Day10: ç›¸æœºé¢„è§ˆä¸ OpenGL ç»“åˆ"/> <meta itemprop="keywords" content="Android,OpenGL"/> <meta itemprop="datePublished" content="2025-11-16T02:51:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‹ä½å­"/> <meta itemprop="url" content="https://juejin.cn/user/2313028193761389"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€OpenGLå­¦ä¹ æ»¤é•œç›¸æœºã€- Day10: ç›¸æœºé¢„è§ˆä¸ OpenGL ç»“åˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2313028193761389/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‹ä½å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T02:51:08.000Z" title="Sun Nov 16 2025 02:51:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://juejin.cn/post/7567889397497528383" target="_blank" title="https://juejin.cn/post/7567889397497528383">å‰è¨€: ã€OpenGLå­¦ä¹ ã€ ä»é›¶æ‰“é€  Android æ»¤é•œç›¸æœº</a></p>
<p><a href="https://juejin.cn/post/7571299394345435178" target="_blank" title="https://juejin.cn/post/7571299394345435178">ä¸Šä¸€ç¯‡:ã€OpenGLå­¦ä¹ æ»¤é•œç›¸æœºã€- Day9: CameraX åŸºç¡€é›†æˆ</a></p>
<p>Github: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxiaweizi%2FOpenGLTest" target="_blank" title="https://github.com/xiaweizi/OpenGLTest" ref="nofollow noopener noreferrer">OpenGLTest</a></p>
</blockquote>
<h2 data-id="heading-0">ğŸ“š ä»Šæ—¥ç›®æ ‡</h2>
<ul>
<li>ç†è§£ SurfaceTexture çš„å·¥ä½œåŸç†</li>
<li>æŒæ¡ OES çº¹ç†ï¼ˆå¤–éƒ¨çº¹ç†ï¼‰çš„ä½¿ç”¨</li>
<li>å­¦ä¹ å¦‚ä½•å°†ç›¸æœºæ•°æ®ä¼ é€’ç»™ OpenGL</li>
<li>å®ç°ä½¿ç”¨ GLSurfaceView æ¸²æŸ“ç›¸æœºé¢„è§ˆ</li>
<li>ä¸ºå®æ—¶æ»¤é•œåŠŸèƒ½æ‰“ä¸‹åŸºç¡€</li>
</ul>
<p><strong>è¿è¡Œæ•ˆæœï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9919d301e97d478a944f07d814326fb7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiL5L2N5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763866268&amp;x-signature=BHN92LSsuvvmyJrLL7mSKQPUeGE%3D" alt="Day10.png" loading="lazy"/></p>
<h2 data-id="heading-1">ğŸ¯ å­¦ä¹ å†…å®¹</h2>
<h3 data-id="heading-2">1. SurfaceTexture ç®€ä»‹</h3>
<p><strong>SurfaceTexture</strong> æ˜¯ Android ä¸­ç”¨äºå°†å›¾åƒæµä½œä¸º OpenGL çº¹ç†çš„å…³é”®ç±»ã€‚</p>
<h4 data-id="heading-3">ä»€ä¹ˆæ˜¯ SurfaceTextureï¼Ÿ</h4>
<pre><code class="hljs">ç›¸æœº â†’ SurfaceTexture â†’ OpenGL çº¹ç† â†’ GLSurfaceView â†’ å±å¹•
</code></pre>
<p><strong>ä½œç”¨</strong>ï¼š</p>
<ul>
<li>ğŸ“¹ æ¥æ”¶ç›¸æœºã€è§†é¢‘è§£ç å™¨ç­‰çš„å›¾åƒæµ</li>
<li>ğŸ”„ å°†å›¾åƒæ•°æ®è½¬æ¢ä¸º OpenGL ES çº¹ç†</li>
<li>ğŸ¨ å…è®¸åœ¨ OpenGL ä¸­å¯¹å›¾åƒè¿›è¡Œå¤„ç†</li>
</ul>
<h4 data-id="heading-4">SurfaceTexture vs PreviewView</h4>






























<table><thead><tr><th>ç‰¹æ€§</th><th>PreviewView</th><th>SurfaceTexture + GLSurfaceView</th></tr></thead><tbody><tr><td><strong>ä½¿ç”¨éš¾åº¦</strong></td><td>ç®€å•</td><td>å¤æ‚</td></tr><tr><td><strong>åŠŸèƒ½</strong></td><td>ä»…é¢„è§ˆ</td><td>é¢„è§ˆ + å®æ—¶å¤„ç†</td></tr><tr><td><strong>æ»¤é•œæ”¯æŒ</strong></td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æ”¯æŒ</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>æ™®é€šç›¸æœºé¢„è§ˆ</td><td>å®æ—¶æ»¤é•œã€ç¾é¢œ</td></tr></tbody></table>
<h3 data-id="heading-5">2. OES çº¹ç†ï¼ˆå¤–éƒ¨çº¹ç†ï¼‰</h3>
<h4 data-id="heading-6">ä»€ä¹ˆæ˜¯ OES çº¹ç†ï¼Ÿ</h4>
<p>OES çº¹ç†ï¼ˆ<code>GL_TEXTURE_EXTERNAL_OES</code>ï¼‰æ˜¯ OpenGL ES çš„æ‰©å±•ï¼Œä¸“é—¨ç”¨äºæ¥æ”¶å¤–éƒ¨å›¾åƒæµã€‚</p>
<p><strong>ä¸æ™®é€šçº¹ç†çš„åŒºåˆ«</strong>ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>GL_TEXTURE_2D</th><th>GL_TEXTURE_EXTERNAL_OES</th></tr></thead><tbody><tr><td><strong>æ•°æ®æ¥æº</strong></td><td>å†…å­˜ä¸­çš„å›¾åƒæ•°æ®</td><td>ç›¸æœºã€è§†é¢‘ç­‰å¤–éƒ¨æµ</td></tr><tr><td><strong>çº¹ç†åæ ‡</strong></td><td>(0,0) åˆ° (1,1)</td><td>å¯èƒ½éœ€è¦å˜æ¢çŸ©é˜µ</td></tr><tr><td><strong>é‡‡æ ·å™¨ç±»å‹</strong></td><td><code>sampler2D</code></td><td><code>samplerExternalOES</code></td></tr><tr><td><strong>çº¹ç†å‚æ•°</strong></td><td>å…¨éƒ¨æ”¯æŒ</td><td>éƒ¨åˆ†é™åˆ¶</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>ä¸€èˆ¬</td><td>æ›´é«˜ï¼ˆé›¶æ‹·è´ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-7">GLSL ä¸­çš„ OES çº¹ç†</h4>
<pre><code class="hljs language-glsl" lang="glsl">#extension GL_OES_EGL_image_external : require

precision mediump float;

varying vec2 vTexCoord;
uniform samplerExternalOES uTexture;  // æ³¨æ„ï¼šä¸æ˜¯ sampler2D

void main() {
    gl_FragColor = texture2D(uTexture, vTexCoord);
}
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>å¿…é¡»å£°æ˜æ‰©å±•ï¼š<code>#extension GL_OES_EGL_image_external : require</code></li>
<li>ä½¿ç”¨ <code>samplerExternalOES</code> è€Œä¸æ˜¯ <code>sampler2D</code></li>
<li>é‡‡æ ·æ–¹å¼ä»ç„¶æ˜¯ <code>texture2D()</code></li>
</ul>
<h3 data-id="heading-8">3. å®ç°æµç¨‹</h3>
<h4 data-id="heading-9">3.1 åˆ›å»º OES çº¹ç†</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createOESTexture</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">val</span> textures = IntArray(<span class="hljs-number">1</span>)
    GLES20.glGenTextures(<span class="hljs-number">1</span>, textures, <span class="hljs-number">0</span>)
    
    <span class="hljs-keyword">val</span> textureId = textures[<span class="hljs-number">0</span>]
    GLES20.glBindTexture(GLES11Ext.GL_TEXTURE_EXTERNAL_OES, textureId)
    
    <span class="hljs-comment">// è®¾ç½®çº¹ç†å‚æ•°</span>
    GLES20.glTexParameteri(
        GLES11Ext.GL_TEXTURE_EXTERNAL_OES,
        GLES20.GL_TEXTURE_MIN_FILTER,
        GLES20.GL_LINEAR
    )
    GLES20.glTexParameteri(
        GLES11Ext.GL_TEXTURE_EXTERNAL_OES,
        GLES20.GL_TEXTURE_MAG_FILTER,
        GLES20.GL_LINEAR
    )
    GLES20.glTexParameteri(
        GLES11Ext.GL_TEXTURE_EXTERNAL_OES,
        GLES20.GL_TEXTURE_WRAP_S,
        GLES20.GL_CLAMP_TO_EDGE
    )
    GLES20.glTexParameteri(
        GLES11Ext.GL_TEXTURE_EXTERNAL_OES,
        GLES20.GL_TEXTURE_WRAP_T,
        GLES20.GL_CLAMP_TO_EDGE
    )
    
    <span class="hljs-keyword">return</span> textureId
}
</code></pre>
<h4 data-id="heading-10">3.2 åˆ›å»º SurfaceTexture</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> surfaceTexture: SurfaceTexture
<span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> oesTextureId: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>

<span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceCreated</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, config: <span class="hljs-type">EGLConfig</span>?)</span></span> {
    <span class="hljs-comment">// 1. åˆ›å»º OES çº¹ç†</span>
    oesTextureId = createOESTexture()
    
    <span class="hljs-comment">// 2. åˆ›å»º SurfaceTexture</span>
    surfaceTexture = SurfaceTexture(oesTextureId)
    
    <span class="hljs-comment">// 3. è®¾ç½®ç›‘å¬å™¨ï¼ˆå½“æœ‰æ–°å¸§æ—¶å›è°ƒï¼‰</span>
    surfaceTexture.setOnFrameAvailableListener {
        <span class="hljs-comment">// è¯·æ±‚é‡æ–°æ¸²æŸ“</span>
        glSurfaceView.requestRender()
    }
    
    <span class="hljs-comment">// 4. å¯åŠ¨ç›¸æœºï¼ˆä¼ é€’ SurfaceTextureï¼‰</span>
    startCamera(surfaceTexture)
}
</code></pre>
<h4 data-id="heading-11">3.3 ç»‘å®šç›¸æœºåˆ° SurfaceTexture</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startCamera</span><span class="hljs-params">(surfaceTexture: <span class="hljs-type">SurfaceTexture</span>)</span></span> {
    <span class="hljs-keyword">val</span> cameraProviderFuture = ProcessCameraProvider.getInstance(context)
    
    cameraProviderFuture.addListener({
        <span class="hljs-keyword">val</span> cameraProvider = cameraProviderFuture.<span class="hljs-keyword">get</span>()
        
        <span class="hljs-comment">// åˆ›å»º Previewï¼Œä½†ä¸ä½¿ç”¨ PreviewView</span>
        <span class="hljs-keyword">val</span> preview = Preview.Builder().build()
        
        <span class="hljs-comment">// å°† SurfaceTexture åŒ…è£…ä¸º Surface</span>
        <span class="hljs-keyword">val</span> surface = Surface(surfaceTexture)
        
        <span class="hljs-comment">// åˆ›å»º SurfaceProvider</span>
        preview.setSurfaceProvider { request -&gt;
            <span class="hljs-comment">// è·å–ç›¸æœºçš„åˆ†è¾¨ç‡</span>
            <span class="hljs-keyword">val</span> resolution = request.resolution
            surfaceTexture.setDefaultBufferSize(resolution.width, resolution.height)
            
            <span class="hljs-comment">// æä¾› Surface</span>
            request.provideSurface(
                surface,
                ContextCompat.getMainExecutor(context)
            ) { }
        }
        
        <span class="hljs-keyword">val</span> cameraSelector = CameraSelector.DEFAULT_BACK_CAMERA
        
        cameraProvider.unbindAll()
        cameraProvider.bindToLifecycle(
            <span class="hljs-keyword">this</span>,
            cameraSelector,
            preview
        )
        
    }, ContextCompat.getMainExecutor(context))
}
</code></pre>
<h4 data-id="heading-12">3.4 åœ¨ onDrawFrame ä¸­æ›´æ–°çº¹ç†</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDrawFrame</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?)</span></span> {
    <span class="hljs-comment">// 1. æ›´æ–° SurfaceTextureï¼ˆè·å–æœ€æ–°å¸§ï¼‰</span>
    surfaceTexture.updateTexImage()
    
    <span class="hljs-comment">// 2. è·å–çº¹ç†å˜æ¢çŸ©é˜µï¼ˆå¤„ç†æ—‹è½¬ã€é•œåƒç­‰ï¼‰</span>
    <span class="hljs-keyword">val</span> transformMatrix = FloatArray(<span class="hljs-number">16</span>)
    surfaceTexture.getTransformMatrix(transformMatrix)
    
    <span class="hljs-comment">// 3. æ¸…å±</span>
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT)
    
    <span class="hljs-comment">// 4. ä½¿ç”¨ç€è‰²å™¨ç¨‹åº</span>
    GLES20.glUseProgram(program)
    
    <span class="hljs-comment">// 5. ç»‘å®š OES çº¹ç†</span>
    GLES20.glActiveTexture(GLES20.GL_TEXTURE0)
    GLES20.glBindTexture(GLES11Ext.GL_TEXTURE_EXTERNAL_OES, oesTextureId)
    GLES20.glUniform1i(uTextureLocation, <span class="hljs-number">0</span>)
    
    <span class="hljs-comment">// 6. ä¼ é€’å˜æ¢çŸ©é˜µ</span>
    GLES20.glUniformMatrix4fv(uTransformMatrixLocation, <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>, transformMatrix, <span class="hljs-number">0</span>)
    
    <span class="hljs-comment">// 7. ç»˜åˆ¶</span>
    drawQuad()
}
</code></pre>
<h3 data-id="heading-13">4. çº¹ç†å˜æ¢çŸ©é˜µ</h3>
<h4 data-id="heading-14">ä¸ºä»€ä¹ˆéœ€è¦å˜æ¢çŸ©é˜µï¼Ÿ</h4>
<p>ç›¸æœºè¾“å‡ºçš„å›¾åƒå¯èƒ½æœ‰ï¼š</p>
<ul>
<li>ğŸ”„ <strong>æ—‹è½¬</strong>ï¼šç›¸æœºä¼ æ„Ÿå™¨æ–¹å‘ä¸å±å¹•ä¸ä¸€è‡´</li>
<li>ğŸª <strong>é•œåƒ</strong>ï¼šå‰ç½®ç›¸æœºé€šå¸¸æ˜¯é•œåƒçš„</li>
<li>ğŸ“ <strong>è£å‰ª</strong>ï¼šåˆ†è¾¨ç‡ä¸åŒ¹é…</li>
</ul>
<p><code>SurfaceTexture.getTransformMatrix()</code> æä¾›çš„çŸ©é˜µå¯ä»¥è‡ªåŠ¨å¤„ç†è¿™äº›é—®é¢˜ã€‚</p>
<h4 data-id="heading-15">åœ¨ç€è‰²å™¨ä¸­åº”ç”¨å˜æ¢çŸ©é˜µ</h4>
<pre><code class="hljs language-glsl" lang="glsl">// é¡¶ç‚¹ç€è‰²å™¨
attribute vec4 aPosition;
attribute vec4 aTexCoord;
uniform mat4 uTransformMatrix;  // å˜æ¢çŸ©é˜µ
varying vec2 vTexCoord;

void main() {
    // åº”ç”¨å˜æ¢çŸ©é˜µåˆ°çº¹ç†åæ ‡
    vec4 transformedCoord = uTransformMatrix * aTexCoord;
    vTexCoord = transformedCoord.xy;
    gl_Position = aPosition;
}
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šçº¹ç†åæ ‡éœ€è¦ä½¿ç”¨ 4D å‘é‡ï¼ˆvec4ï¼‰ï¼Œç¬¬ä¸‰ä¸ªåˆ†é‡ä¸º 0ï¼Œç¬¬å››ä¸ªä¸º 1ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> texCoords = floatArrayOf(
    <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">1f</span>,  <span class="hljs-comment">// å·¦ä¸‹</span>
    <span class="hljs-number">1f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">1f</span>,  <span class="hljs-comment">// å³ä¸‹</span>
    <span class="hljs-number">0f</span>, <span class="hljs-number">1f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">1f</span>,  <span class="hljs-comment">// å·¦ä¸Š</span>
    <span class="hljs-number">1f</span>, <span class="hljs-number">1f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">1f</span>   <span class="hljs-comment">// å³ä¸Š</span>
)
</code></pre>
<h3 data-id="heading-16">5. GLSurfaceView æ¸²æŸ“æ¨¡å¼</h3>
<h4 data-id="heading-17">ä¸¤ç§æ¸²æŸ“æ¨¡å¼</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. è¿ç»­æ¸²æŸ“ï¼ˆé»˜è®¤ï¼‰</span>
glSurfaceView.renderMode = GLSurfaceView.RENDERMODE_CONTINUOUSLY

<span class="hljs-comment">// 2. æŒ‰éœ€æ¸²æŸ“ï¼ˆæ¨èç”¨äºç›¸æœºï¼‰</span>
glSurfaceView.renderMode = GLSurfaceView.RENDERMODE_WHEN_DIRTY
</code></pre>
<p><strong>æ¨èåšæ³•</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>RENDERMODE_WHEN_DIRTY</code></li>
<li>åœ¨ <code>SurfaceTexture.setOnFrameAvailableListener</code> ä¸­è°ƒç”¨ <code>requestRender()</code></li>
<li>é¿å…æ— è°“çš„é‡ç»˜ï¼ŒèŠ‚çœç”µé‡</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin">surfaceTexture.setOnFrameAvailableListener {
    glSurfaceView.requestRender()  <span class="hljs-comment">// æœ‰æ–°å¸§æ—¶æ‰æ¸²æŸ“</span>
}
</code></pre>
<h3 data-id="heading-18">6. å®Œæ•´çš„ Renderer å®ç°</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Day10Renderer</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) : GLSurfaceView.Renderer {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> program: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> oesTextureId: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> surfaceTexture: SurfaceTexture
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> uTextureLocation: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> uTransformMatrixLocation: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> transformMatrix = FloatArray(<span class="hljs-number">16</span>)
    
    <span class="hljs-comment">// OES çº¹ç†çš„é¡¶ç‚¹ç€è‰²å™¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> vertexShaderCode = <span class="hljs-string">"""
        attribute vec4 aPosition;
        attribute vec4 aTexCoord;
        uniform mat4 uTransformMatrix;
        varying vec2 vTexCoord;
        
        void main() {
            vec4 transformedCoord = uTransformMatrix * aTexCoord;
            vTexCoord = transformedCoord.xy;
            gl_Position = aPosition;
        }
    """</span>.trimIndent()
    
    <span class="hljs-comment">// OES çº¹ç†çš„ç‰‡æ®µç€è‰²å™¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> fragmentShaderCode = <span class="hljs-string">"""
        #extension GL_OES_EGL_image_external : require
        precision mediump float;
        
        varying vec2 vTexCoord;
        uniform samplerExternalOES uTexture;
        
        void main() {
            gl_FragColor = texture2D(uTexture, vTexCoord);
        }
    """</span>.trimIndent()
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceCreated</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, config: <span class="hljs-type">EGLConfig</span>?)</span></span> {
        GLES20.glClearColor(<span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">1f</span>)
        
        <span class="hljs-comment">// ç¼–è¯‘ç€è‰²å™¨</span>
        program = createProgram(vertexShaderCode, fragmentShaderCode)
        
        <span class="hljs-comment">// è·å–å˜é‡ä½ç½®</span>
        uTextureLocation = GLES20.glGetUniformLocation(program, <span class="hljs-string">"uTexture"</span>)
        uTransformMatrixLocation = GLES20.glGetUniformLocation(program, <span class="hljs-string">"uTransformMatrix"</span>)
        
        <span class="hljs-comment">// åˆ›å»º OES çº¹ç†</span>
        oesTextureId = createOESTexture()
        
        <span class="hljs-comment">// åˆ›å»º SurfaceTexture</span>
        surfaceTexture = SurfaceTexture(oesTextureId)
        surfaceTexture.setOnFrameAvailableListener {
            <span class="hljs-comment">// è¯·æ±‚é‡æ–°æ¸²æŸ“</span>
        }
        
        <span class="hljs-comment">// å¯åŠ¨ç›¸æœº</span>
        startCamera()
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDrawFrame</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?)</span></span> {
        <span class="hljs-comment">// æ›´æ–°çº¹ç†</span>
        surfaceTexture.updateTexImage()
        surfaceTexture.getTransformMatrix(transformMatrix)
        
        <span class="hljs-comment">// æ¸…å±</span>
        GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT)
        
        <span class="hljs-comment">// ä½¿ç”¨ç¨‹åº</span>
        GLES20.glUseProgram(program)
        
        <span class="hljs-comment">// ç»‘å®šçº¹ç†</span>
        GLES20.glActiveTexture(GLES20.GL_TEXTURE0)
        GLES20.glBindTexture(GLES11Ext.GL_TEXTURE_EXTERNAL_OES, oesTextureId)
        GLES20.glUniform1i(uTextureLocation, <span class="hljs-number">0</span>)
        
        <span class="hljs-comment">// ä¼ é€’å˜æ¢çŸ©é˜µ</span>
        GLES20.glUniformMatrix4fv(uTransformMatrixLocation, <span class="hljs-number">1</span>, <span class="hljs-literal">false</span>, transformMatrix, <span class="hljs-number">0</span>)
        
        <span class="hljs-comment">// ç»˜åˆ¶</span>
        drawQuad()
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceChanged</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, width: <span class="hljs-type">Int</span>, height: <span class="hljs-type">Int</span>)</span></span> {
        GLES20.glViewport(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, width, height)
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createOESTexture</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Int</span> {
        <span class="hljs-comment">// OES çº¹ç†åˆ›å»ºä»£ç </span>
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startCamera</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// ç›¸æœºå¯åŠ¨ä»£ç </span>
    }
}
</code></pre>
<h3 data-id="heading-19">7. å¸¸è§é—®é¢˜å¤„ç†</h3>
<h4 data-id="heading-20">7.1 å›¾åƒæ–¹å‘é—®é¢˜</h4>
<p><strong>é—®é¢˜</strong>ï¼šç›¸æœºé¢„è§ˆå¯èƒ½æ—‹è½¬ 90Â°ã€180Â° æˆ– 270Â°ã€‚</p>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>âœ… ä½¿ç”¨ <code>surfaceTexture.getTransformMatrix()</code> è‡ªåŠ¨å¤„ç†</li>
<li>âœ… åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­åº”ç”¨å˜æ¢çŸ©é˜µ</li>
<li>âŒ ä¸è¦æ‰‹åŠ¨æ—‹è½¬ï¼ˆä¼šå¢åŠ å¤æ‚åº¦ï¼‰</li>
</ul>
<h4 data-id="heading-21">7.2 å‰ç½®ç›¸æœºé•œåƒé—®é¢˜</h4>
<p><strong>é—®é¢˜</strong>ï¼šå‰ç½®ç›¸æœºé¢„è§ˆæ˜¯é•œåƒçš„ã€‚</p>
<p><strong>è§£å†³æ–¹æ³•</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å¦‚æœéœ€è¦å–æ¶ˆé•œåƒï¼Œå¯ä»¥åœ¨å˜æ¢çŸ©é˜µä¸Šå†åº”ç”¨ä¸€ä¸ªé•œåƒå˜æ¢</span>
<span class="hljs-keyword">if</span> (lensFacing == CameraSelector.LENS_FACING_FRONT) {
    <span class="hljs-comment">// æ°´å¹³ç¿»è½¬çŸ©é˜µ</span>
    <span class="hljs-keyword">val</span> flipMatrix = floatArrayOf(
        -<span class="hljs-number">1f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>,
        <span class="hljs-number">0f</span>, <span class="hljs-number">1f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>,
        <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">1f</span>, <span class="hljs-number">0f</span>,
        <span class="hljs-number">1f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">0f</span>, <span class="hljs-number">1f</span>
    )
    Matrix.multiplyMM(finalMatrix, <span class="hljs-number">0</span>, flipMatrix, <span class="hljs-number">0</span>, transformMatrix, <span class="hljs-number">0</span>)
}
</code></pre>
<h4 data-id="heading-22">7.3 é»‘å±é—®é¢˜</h4>
<p><strong>å¯èƒ½åŸå› </strong>ï¼š</p>
<ol>
<li>æœªè°ƒç”¨ <code>surfaceTexture.updateTexImage()</code></li>
<li>OES çº¹ç†åˆ›å»ºå¤±è´¥</li>
<li>ç€è‰²å™¨ä¸­æœªå£°æ˜ <code>#extension</code></li>
<li>ç›¸æœºæœªæ­£ç¡®ç»‘å®šåˆ° SurfaceTexture</li>
</ol>
<p><strong>è°ƒè¯•æ–¹æ³•</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ£€æŸ¥çº¹ç† ID</span>
Log.d(TAG, <span class="hljs-string">"OES Texture ID: <span class="hljs-variable">$oesTextureId</span>"</span>)

<span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰æ–°å¸§</span>
surfaceTexture.setOnFrameAvailableListener {
    Log.d(TAG, <span class="hljs-string">"New frame available"</span>)
    glSurfaceView.requestRender()
}

<span class="hljs-comment">// æ£€æŸ¥ OpenGL é”™è¯¯</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkGLError</span><span class="hljs-params">(op: <span class="hljs-type">String</span>)</span></span> {
    <span class="hljs-keyword">var</span> error: <span class="hljs-built_in">Int</span>
    <span class="hljs-keyword">while</span> (GLES20.glGetError().also { error = it } != GLES20.GL_NO_ERROR) {
        Log.e(TAG, <span class="hljs-string">"<span class="hljs-variable">$op</span>: glError <span class="hljs-variable">$error</span>"</span>)
    }
}
</code></pre>
<h3 data-id="heading-23">8. æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-24">8.1 ä½¿ç”¨æŒ‰éœ€æ¸²æŸ“</h4>
<pre><code class="hljs language-kotlin" lang="kotlin">glSurfaceView.renderMode = GLSurfaceView.RENDERMODE_WHEN_DIRTY

surfaceTexture.setOnFrameAvailableListener {
    glSurfaceView.requestRender()  <span class="hljs-comment">// åªåœ¨æœ‰æ–°å¸§æ—¶æ¸²æŸ“</span>
}
</code></pre>
<h4 data-id="heading-25">8.2 é¿å…ä¸å¿…è¦çš„æ‹·è´</h4>
<p>OES çº¹ç†çš„ä¼˜åŠ¿æ˜¯<strong>é›¶æ‹·è´</strong>ï¼š</p>
<ul>
<li>ç›¸æœºæ•°æ®ç›´æ¥å†™å…¥ GPU çº¹ç†</li>
<li>æ— éœ€ CPU å‚ä¸æ•°æ®ä¼ è¾“</li>
<li>æ€§èƒ½æ›´é«˜ï¼Œå»¶è¿Ÿæ›´ä½</li>
</ul>
<h4 data-id="heading-26">8.3 é€‰æ‹©åˆé€‚çš„åˆ†è¾¨ç‡</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> preview = Preview.Builder()
    .setTargetResolution(Size(<span class="hljs-number">1280</span>, <span class="hljs-number">720</span>))  <span class="hljs-comment">// é™ä½åˆ†è¾¨ç‡æé«˜æ€§èƒ½</span>
    .build()
</code></pre>
<h2 data-id="heading-27">ğŸ’» ä»£ç å®è·µ</h2>
<h3 data-id="heading-28">ä»Šæ—¥ä»»åŠ¡</h3>
<p>å®ç°ç›¸æœºé¢„è§ˆä¸ OpenGL ç»“åˆï¼š</p>
<ol>
<li><strong>åˆ›å»º OES çº¹ç†</strong></li>
<li><strong>ä½¿ç”¨ SurfaceTexture æ¥æ”¶ç›¸æœºæ•°æ®</strong></li>
<li><strong>åœ¨ GLSurfaceView ä¸­æ¸²æŸ“ç›¸æœºé¢„è§ˆ</strong></li>
<li><strong>å¤„ç†çº¹ç†å˜æ¢çŸ©é˜µ</strong></li>
<li><strong>æ”¯æŒå‰åæ‘„åƒå¤´åˆ‡æ¢</strong></li>
</ol>
<h3 data-id="heading-29">å®ç°æ•ˆæœ</h3>
<ul>
<li>ğŸ“¹ ä½¿ç”¨ OpenGL æ¸²æŸ“ç›¸æœºå®æ—¶é¢„è§ˆ</li>
<li>ğŸ”„ è‡ªåŠ¨å¤„ç†å›¾åƒæ—‹è½¬å’Œé•œåƒ</li>
<li>ğŸ“± æ”¯æŒå‰åæ‘„åƒå¤´åˆ‡æ¢</li>
<li>âš¡ é«˜æ€§èƒ½ã€ä½å»¶è¿Ÿ</li>
</ul>
<h3 data-id="heading-30">æ ¸å¿ƒä»£ç ç»“æ„</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Day10Renderer</span>(context: Context, <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> glSurfaceView: GLSurfaceView) 
    : GLSurfaceView.Renderer {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> oesTextureId: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> surfaceTexture: SurfaceTexture
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getSurfaceTexture</span><span class="hljs-params">()</span></span>: SurfaceTexture = surfaceTexture
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onSurfaceCreated</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?, config: <span class="hljs-type">EGLConfig</span>?)</span></span> {
        <span class="hljs-comment">// åˆ›å»º OES çº¹ç†å’Œ SurfaceTexture</span>
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDrawFrame</span><span class="hljs-params">(gl: <span class="hljs-type">GL10</span>?)</span></span> {
        <span class="hljs-comment">// æ›´æ–°çº¹ç†å¹¶æ¸²æŸ“</span>
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Day10Activity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> glSurfaceView: GLSurfaceView
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> renderer: Day10Renderer
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        
        glSurfaceView = GLSurfaceView(<span class="hljs-keyword">this</span>)
        glSurfaceView.setEGLContextClientVersion(<span class="hljs-number">2</span>)
        
        renderer = Day10Renderer(<span class="hljs-keyword">this</span>, glSurfaceView)
        glSurfaceView.setRenderer(renderer)
        glSurfaceView.renderMode = GLSurfaceView.RENDERMODE_WHEN_DIRTY
        
        setContentView(glSurfaceView)
        
        <span class="hljs-comment">// å¯åŠ¨ç›¸æœº</span>
        startCamera(renderer.getSurfaceTexture())
    }
}
</code></pre>
<h2 data-id="heading-31">ğŸ§ª ç»ƒä¹ ä»»åŠ¡</h2>
<h3 data-id="heading-32">åŸºç¡€ä»»åŠ¡</h3>
<ol>
<li>âœ… å®ç° OES çº¹ç†åˆ›å»º</li>
<li>âœ… ä½¿ç”¨ SurfaceTexture æ¥æ”¶ç›¸æœºæ•°æ®</li>
<li>âœ… åœ¨ OpenGL ä¸­æ¸²æŸ“ç›¸æœºé¢„è§ˆ</li>
</ol>
<h3 data-id="heading-33">è¿›é˜¶ä»»åŠ¡</h3>
<ol>
<li>ğŸ¨ æ·»åŠ ç®€å•æ»¤é•œï¼ˆç°åº¦ã€åè‰²ï¼‰</li>
<li>ğŸ“ æ”¯æŒæåˆç¼©æ”¾</li>
<li>ğŸ”¦ æ·»åŠ é—ªå…‰ç¯æ§åˆ¶</li>
<li>ğŸ“¸ æ”¯æŒæ‹ç…§åŠŸèƒ½ï¼ˆä» OpenGL çº¹ç†ä¿å­˜ï¼‰</li>
</ol>
<h3 data-id="heading-34">æŒ‘æˆ˜ä»»åŠ¡</h3>
<ol>
<li>ğŸ¬ å®ç°å½•åƒåŠŸèƒ½ï¼ˆä½¿ç”¨ MediaCodecï¼‰</li>
<li>ğŸ–¼ï¸ å®ç°åŒé‡æ›å…‰æ•ˆæœï¼ˆä¸¤ä¸ªç›¸æœºæ··åˆï¼‰</li>
<li>ğŸŒˆ å®ç°å®æ—¶ç¾é¢œï¼ˆç£¨çš®ã€ç¾ç™½ï¼‰</li>
<li>ğŸ“Š æ˜¾ç¤º FPS æ€§èƒ½æŒ‡æ ‡</li>
</ol>
<h2 data-id="heading-35">ğŸ“– çŸ¥è¯†ç‚¹æ€»ç»“</h2>
<h3 data-id="heading-36">æ ¸å¿ƒæ¦‚å¿µ</h3>

























<table><thead><tr><th>æ¦‚å¿µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>SurfaceTexture</strong></td><td>å°†å›¾åƒæµè½¬æ¢ä¸º OpenGL çº¹ç†</td></tr><tr><td><strong>OES çº¹ç†</strong></td><td>ä¸“ç”¨äºå¤–éƒ¨å›¾åƒæµçš„çº¹ç†ç±»å‹</td></tr><tr><td><strong>å˜æ¢çŸ©é˜µ</strong></td><td>å¤„ç†æ—‹è½¬ã€é•œåƒã€è£å‰ª</td></tr><tr><td><strong>æŒ‰éœ€æ¸²æŸ“</strong></td><td>ä»…åœ¨æœ‰æ–°å¸§æ—¶æ¸²æŸ“ï¼ŒèŠ‚çœç”µé‡</td></tr></tbody></table>
<h3 data-id="heading-37">å…³é”® API</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// åˆ›å»º OES çº¹ç†</span>
GLES20.glBindTexture(GLES11Ext.GL_TEXTURE_EXTERNAL_OES, textureId)

<span class="hljs-comment">// åˆ›å»º SurfaceTexture</span>
<span class="hljs-keyword">val</span> surfaceTexture = SurfaceTexture(oesTextureId)

<span class="hljs-comment">// æ›´æ–°çº¹ç†</span>
surfaceTexture.updateTexImage()

<span class="hljs-comment">// è·å–å˜æ¢çŸ©é˜µ</span>
surfaceTexture.getTransformMatrix(matrix)
</code></pre>
<h3 data-id="heading-38">æœ€ä½³å®è·µ</h3>
<ol>
<li>âœ… <strong>ä½¿ç”¨æŒ‰éœ€æ¸²æŸ“æ¨¡å¼</strong>ï¼šèŠ‚çœç”µé‡</li>
<li>âœ… <strong>åœ¨ onFrameAvailable ä¸­ requestRender()</strong>ï¼šåŠæ—¶æ›´æ–°</li>
<li>âœ… <strong>ä½¿ç”¨å˜æ¢çŸ©é˜µ</strong>ï¼šè‡ªåŠ¨å¤„ç†æ—‹è½¬å’Œé•œåƒ</li>
<li>âœ… <strong>æ£€æŸ¥ OpenGL é”™è¯¯</strong>ï¼šåŠæ—¶å‘ç°é—®é¢˜</li>
<li>âœ… <strong>é€‰æ‹©åˆé€‚çš„åˆ†è¾¨ç‡</strong>ï¼šå¹³è¡¡æ€§èƒ½å’Œè´¨é‡</li>
</ol>
<h2 data-id="heading-39">ğŸ”— å‚è€ƒèµ„æ–™</h2>
<h3 data-id="heading-40">å®˜æ–¹æ–‡æ¡£</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroid%2Fgraphics%2FSurfaceTexture" target="_blank" title="https://developer.android.com/reference/android/graphics/SurfaceTexture" ref="nofollow noopener noreferrer">SurfaceTexture</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.khronos.org%2Fregistry%2FOpenGL%2Fextensions%2FOES%2FOES_EGL_image_external.txt" target="_blank" title="https://www.khronos.org/registry/OpenGL/extensions/OES/OES_EGL_image_external.txt" ref="nofollow noopener noreferrer">GL_TEXTURE_EXTERNAL_OES</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroid%2Fopengl%2FGLSurfaceView" target="_blank" title="https://developer.android.com/reference/android/opengl/GLSurfaceView" ref="nofollow noopener noreferrer">GLSurfaceView</a></li>
</ul>
<h3 data-id="heading-41">æ¨èé˜…è¯»</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgoogle%2Fgrafika" target="_blank" title="https://github.com/google/grafika" ref="nofollow noopener noreferrer">Grafika</a> - Google çš„ OpenGL ç¤ºä¾‹é¡¹ç›®</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsource.android.com%2Fdevices%2Fcamera" target="_blank" title="https://source.android.com/devices/camera" ref="nofollow noopener noreferrer">Android ç›¸æœºæ¶æ„</a></li>
</ul>
<h2 data-id="heading-42">ğŸ“ ä»Šæ—¥æ€»ç»“</h2>
<p>ä»Šå¤©æˆ‘ä»¬å­¦ä¹ äº†ç›¸æœºé¢„è§ˆä¸ OpenGL çš„ç»“åˆï¼š</p>
<ol>
<li>âœ… ç†è§£äº† SurfaceTexture çš„å·¥ä½œåŸç†</li>
<li>âœ… æŒæ¡äº† OES çº¹ç†çš„åˆ›å»ºå’Œä½¿ç”¨</li>
<li>âœ… å­¦ä¼šäº†å°†ç›¸æœºæ•°æ®ä¼ é€’ç»™ OpenGL</li>
<li>âœ… å®ç°äº†ä½¿ç”¨ GLSurfaceView æ¸²æŸ“ç›¸æœºé¢„è§ˆ</li>
<li>âœ… äº†è§£äº†çº¹ç†å˜æ¢çŸ©é˜µçš„åº”ç”¨</li>
</ol>
<p><strong>å…³é”®è¦ç‚¹</strong>ï¼š</p>
<ul>
<li>SurfaceTexture æ˜¯è¿æ¥ç›¸æœºå’Œ OpenGL çš„æ¡¥æ¢</li>
<li>OES çº¹ç†æä¾›äº†é«˜æ€§èƒ½çš„é›¶æ‹·è´å›¾åƒä¼ è¾“</li>
<li>å˜æ¢çŸ©é˜µè‡ªåŠ¨å¤„ç†æ—‹è½¬ã€é•œåƒç­‰é—®é¢˜</li>
<li>æŒ‰éœ€æ¸²æŸ“æ¨¡å¼èƒ½èŠ‚çœç”µé‡</li>
</ul>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">ä¸‹ä¸€ç¯‡</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¼€å‘éœ€æŒæ¡çš„çŸ¥è¯†ï¼šé«˜ç²¾åœ°å›¾]]></title>    <link>https://juejin.cn/post/7572781559766728754</link>    <guid>https://juejin.cn/post/7572781559766728754</guid>    <pubDate>2025-11-16T01:07:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572781559766728754" data-draft-id="7558050672820142143" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¼€å‘éœ€æŒæ¡çš„çŸ¥è¯†ï¼šé«˜ç²¾åœ°å›¾"/> <meta itemprop="keywords" content="åç«¯,ç®—æ³•,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-16T01:07:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰å¹´ä¹‹çº¦"/> <meta itemprop="url" content="https://juejin.cn/user/3448523142729784"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¼€å‘éœ€æŒæ¡çš„çŸ¥è¯†ï¼šé«˜ç²¾åœ°å›¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3448523142729784/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰å¹´ä¹‹çº¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T01:07:33.000Z" title="Sun Nov 16 2025 01:07:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é«˜ç²¾åº¦åœ°å›¾ï¼ˆHD Map, High-Definition Mapï¼‰æ˜¯è‡ªåŠ¨é©¾é©¶ã€æ™ºèƒ½äº¤é€šå’Œå¯¼èˆªé¢†åŸŸçš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ï¼Œå…¶ç²¾åº¦å¯è¾¾<strong>å˜ç±³çº§</strong>ï¼ˆå¯¹æ¯”ä¼ ç»Ÿå¯¼èˆªåœ°å›¾çš„ç±³çº§ï¼‰ï¼Œå¹¶æä¾›<strong>ç²¾ç»†åŒ–è½¦é“æ¨¡å‹</strong>å’Œ<strong>åŠ¨æ€è¯­ä¹‰ä¿¡æ¯</strong>ã€‚ä»¥ä¸‹æ˜¯å…¶æ ¸å¿ƒä¼˜åŠ¿åŠå…¸å‹åº”ç”¨ï¼š</p>
<hr/>
<h3 data-id="heading-0"><strong>1. è‡ªåŠ¨é©¾é©¶çš„æ ¸å¿ƒæ”¯æŸ±</strong></h3>
<h4 data-id="heading-1"><strong>ï¼ˆ1ï¼‰è¶…è§†è·æ„ŸçŸ¥è¡¥å……</strong></h4>
<ul>
<li><strong>é—®é¢˜</strong>ï¼šè½¦è½½ä¼ æ„Ÿå™¨ï¼ˆLiDARã€æ‘„åƒå¤´ï¼‰å—é™äºè§†è·ã€é®æŒ¡å’Œå¤©æ°”ï¼ˆå¦‚é›¾å¤©ï¼‰ã€‚</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šHDåœ°å›¾æä¾›å‰æ–¹å¼¯é“å¡åº¦ã€è½¦é“çº¿æ›²ç‡ã€çº¢ç»¿ç¯ä½ç½®ç­‰ä¿¡æ¯ï¼Œæå‰è°ƒæ•´è½¦è¾†è·¯å¾„æˆ–é€Ÿåº¦ã€‚</li>
</ul>
<h4 data-id="heading-2"><strong>ï¼ˆ2ï¼‰è½¦é“çº§å¯¼èˆª</strong></h4>
<ul>
<li><strong>é™æ€ç²¾åº¦</strong>ï¼šè½¦é“çº¿ä½ç½®ã€å®½åº¦ã€é—´è·ç²¾ç¡®åˆ°å˜ç±³ï¼Œæ”¯æŒè½¦è¾†ä¿æŒä¸­å¿ƒçº¿ï¼ˆå¦‚è‡ªåŠ¨é©¾é©¶å·¡èˆªï¼‰ã€‚</li>
<li><strong>åŠ¨æ€å“åº”</strong>ï¼šé‡åˆ°æ–½å·¥æ”¹é“æ—¶ï¼Œç»“åˆé«˜ç²¾åº¦è½¦é“æ¨¡å‹å¿«é€Ÿè§„åˆ’æ–°è·¯å¾„ã€‚</li>
</ul>
<h4 data-id="heading-3"><strong>ï¼ˆ3ï¼‰é™ä½ç®—åŠ›éœ€æ±‚</strong></h4>
<ul>
<li><strong>å‡å°‘æ„ŸçŸ¥è´Ÿæ‹…</strong>ï¼šé¢„çŸ¥éš§é“å‡ºå£æ— é˜³å…‰çœ©å…‰ï¼Œæ— éœ€å®æ—¶è¯†åˆ«è½¦é“çº¿ã€‚</li>
<li><strong>é¢„æµ‹èƒ½åŠ›</strong>ï¼šæå‰è·çŸ¥å‰æ–¹åˆ†å²”è·¯æ±‡æµç‚¹ï¼Œä¼˜åŒ–å˜é“æ—¶æœºï¼ˆå¦‚åŒé“æ±‡å…¥é«˜é€Ÿï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-4"><strong>2. äº¤é€šæ•ˆç‡ä¸å®‰å…¨æ€§æå‡</strong></h3>
<h4 data-id="heading-5"><strong>ï¼ˆ1ï¼‰è½¦è·¯ååŒï¼ˆV2Iï¼‰</strong></h4>
<ul>
<li><strong>åŠ¨æ€ä¿¡å·ç¯åŒæ­¥</strong>ï¼šçº¢ç»¿ç¯ç›¸ä½è®¡åˆ’ï¼ˆç»¿ç¯æ—¶é—´ï¼‰å†™å…¥HDåœ°å›¾ï¼Œè½¦è¾†è°ƒæ•´é€Ÿåº¦â€œç»¿æ³¢é€šè¡Œâ€ã€‚</li>
<li><strong>å±é™©é¢„è­¦</strong>ï¼šå¼¯é“äº‹æ•…å¤šå‘è·¯æ®µæ ‡æ³¨é£é™©ç­‰çº§ï¼Œè§¦å‘è½¦è¾†è‡ªåŠ¨å‡é€Ÿã€‚</li>
</ul>
<h4 data-id="heading-6"><strong>ï¼ˆ2ï¼‰æ‹¥å µæ²»ç†</strong></h4>
<ul>
<li><strong>è½¦é“çº§æµé‡åˆ†æ</strong>ï¼šæŸè½¦é“æ•…éšœè½¦åœé æ—¶ï¼Œå¯¼èˆªç³»ç»ŸåŠ¨æ€å¼•å¯¼è½¦è¾†ç»•è¡Œã€‚</li>
<li><strong>æ”¶è´¹ç«™ä¼˜åŒ–</strong>ï¼šé¢„çŸ¥ETCæ†å’Œäººå·¥çª—å£ä½ç½®ï¼Œå‡å°‘æ’é˜Ÿäº¤ç»‡ã€‚</li>
</ul>
<h3 data-id="heading-7"><strong>3. ç²¾ç»†åŒ–åŸå¸‚ç®¡ç†</strong></h3>
<h4 data-id="heading-8"><strong>ï¼ˆ1ï¼‰é“è·¯ç»´æŠ¤</strong></h4>
<ul>
<li><strong>ç—…å®³æ£€æµ‹</strong>ï¼šè·¯é¢è£‚ç¼ã€å‡¹å‘ä¸åœ°å›¾åŸºå‡†æ¯”å¯¹ï¼Œè‡ªåŠ¨ç”Ÿæˆå…»æŠ¤å·¥å•ã€‚</li>
<li><strong>æ–½å·¥åŠ¨æ€</strong>ï¼šä¸´æ—¶å›´æŒ¡ä¿¡æ¯æ›´æ–°åï¼Œä¸ºç‰©æµè½¦è¾†è§„åˆ’é¿è®©è·¯å¾„ã€‚</li>
</ul>
<h4 data-id="heading-9"><strong>ï¼ˆ2ï¼‰åŸå¸‚è§„åˆ’è¾…åŠ©</strong></h4>
<ul>
<li><strong>å†å²æ•°æ®å åŠ </strong>ï¼šæ¯”å¯¹å¤šå¹´è½¦é“å˜åŒ–ï¼Œåˆ†ææ‹“å®½æˆ–ç¼©çª„å¯¹äº¤é€šæµå½±å“ã€‚</li>
<li><strong>ä»¿çœŸéªŒè¯</strong>ï¼šè™šæ‹Ÿæµ‹è¯•æ–°äº¤é€šæ¢çº½è®¾è®¡ï¼ˆå¦‚æ–°å¢åŒé“ï¼‰ï¼ŒéªŒè¯å¯¹ç°æœ‰è·¯ç½‘å½±å“ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>4. æˆæœ¬ä¸å•†ä¸šåŒ–æ½œåŠ›</strong></h3>
<h4 data-id="heading-11"><strong>ï¼ˆ1ï¼‰å‡å°‘ç¡¬ä»¶æˆæœ¬</strong></h4>
<ul>
<li><strong>ä½é…ä¼ æ„Ÿå™¨å¯è¡Œ</strong>ï¼šéƒ¨åˆ†åœºæ™¯ä¸‹ï¼Œ16çº¿LiDAR+HDåœ°å›¾å¯æ›¿ä»£64çº¿LiDAR+æ— åœ°å›¾æ–¹æ¡ˆã€‚</li>
<li><strong>çº¯è§†è§‰æ–¹æ¡ˆå‡çº§</strong>ï¼šç‰¹æ–¯æ‹‰FSDé€šè¿‡å½±å­æ¨¡å¼è¡¥å……â€œè®°å¿†è·¯å¾„â€ï¼Œç±»ä¼¼è½»é‡çº§HDåœ°å›¾ã€‚</li>
</ul>
<h4 data-id="heading-12"><strong>ï¼ˆ2ï¼‰ä»˜è´¹æ¨¡å¼åˆ›æ–°</strong></h4>
<ul>
<li><strong>åŠ¨æ€æ•°æ®æœåŠ¡</strong>ï¼šé“è·¯æ‹¥å µæ”¶è´¹ã€è‡ªåŠ¨é©¾é©¶è·¯å¾„è®¢é˜…åˆ¶ã€‚</li>
<li><strong>å¹¿å‘Šç²¾å‡†æŠ•æ”¾</strong>ï¼šå•†è¶…å…¥å£è½¦é“çº§æç¤ºï¼ˆå¦‚â€œå·¦è½¬å³è¾¾åœ°ä¸‹åœè½¦åœºâ€ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-13"><strong>5. æŠ€æœ¯çªç ´ä¸æœªæ¥æ½œåŠ›</strong></h3>
<h4 data-id="heading-14"><strong>ï¼ˆ1ï¼‰æ•°å­—å­ªç”Ÿåº”ç”¨</strong></h4>
<ul>
<li><strong>å®æ—¶æ˜ å°„</strong>ï¼šè½¦è¾†è¡Œé©¶è½¨è¿¹ã€é“è·¯å¼‚ç‰©æ‰è½ä¸åœ°å›¾ä¸­æ¨¡å‹åŠ¨æ€åŒæ­¥ï¼Œç”¨äºå…¬å®‰æˆ–åº”æ€¥æŒ‡æŒ¥ã€‚</li>
</ul>
<h4 data-id="heading-15"><strong>ï¼ˆ2ï¼‰Cç«¯äº¤äº’å‡çº§</strong></h4>
<ul>
<li><strong>ARå¯¼èˆª</strong>ï¼šè½¦è½½AR-HUDä¸­æŠ•å°„å®é™…è½¦é“çº¿ï¼Œå¼•å¯¼å¤æ‚ç«‹äº¤ï¼ˆå¦‚é‡åº†é»„æ¡·æ¹¾ç«‹äº¤ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-16"><strong>6. å±€é™æ€§ä¸æŒ‘æˆ˜</strong></h3>





















<table><thead><tr><th><strong>ä¼˜åŠ¿</strong></th><th><strong>å¯¹åº”æŒ‘æˆ˜</strong></th></tr></thead><tbody><tr><td>å˜ç±³çº§ç²¾åº¦</td><td>éœ€å‘¨æœŸæ€§æµ‹ç»˜æ›´æ–°ï¼Œå±±åŒºç»´æŠ¤æˆæœ¬é«˜</td></tr><tr><td>é™æ€+åŠ¨æ€æ•°æ®ç»“åˆ</td><td>æ•°æ®å­˜å‚¨é‡è¾¾æ™®é€šåœ°å›¾1000å€ï¼ˆGB/å…¬é‡Œï¼‰</td></tr><tr><td>æ”¿ç­–æ”¯æŒï¼ˆå¦‚åŒ—æ–—ç³»ç»Ÿï¼‰</td><td>è·¨å¢ƒåœ°å›¾åˆè§„æ€§ï¼ˆå¦‚åŠ å¯†åæ ‡ç³»ç»Ÿä¸€ï¼‰</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-17"><strong>å…¸å‹åœºæ™¯æ¡ˆä¾‹</strong></h3>
<ul>
<li><strong>åŒ—äº¬äº¦åº„è‡ªåŠ¨é©¾é©¶åŒº</strong>ï¼šHDåœ°å›¾æ”¯æŒRobotaxiåœ¨æ— ä¿æŠ¤å·¦è½¬ä¸­ç²¾å‡†å®šä½æ¨ªå‘è½¦æµé—´éš™ã€‚</li>
<li><strong>æ¸¯ç æ¾³å¤§æ¡¥</strong>ï¼šè½¦é“çº§å¡åº¦ä¸æ¨ªé£é¢„è­¦ï¼Œä¿éšœæç«¯å¤©æ°”é€šè¡Œå®‰å…¨ã€‚</li>
</ul>
<h2 data-id="heading-18"><strong>æ ¸å¿ƒæŠ€æœ¯</strong></h2>
<p>é«˜ç²¾åº¦åœ°å›¾ï¼ˆHD Mapï¼‰çš„æ„å»ºå’Œæ›´æ–°æ¶‰åŠå¤šé¢†åŸŸæŠ€æœ¯èåˆï¼Œå…¶æ ¸å¿ƒç¯èŠ‚åŒ…æ‹¬<strong>æ•°æ®é‡‡é›†ã€å¤„ç†ã€å»ºæ¨¡ã€æ›´æ–°ä¸åº”ç”¨</strong>ã€‚ä»¥ä¸‹æ˜¯å…·ä½“æŠ€æœ¯åˆ†ç±»ã€å½“å‰è§£å†³æ–¹æ¡ˆåŠå…¸å‹å…¬å¸/å¼€æºå·¥å…·æ€»ç»“ï¼š</p>
<hr/>
<h3 data-id="heading-19"><strong>1. æ•°æ®é‡‡é›†æŠ€æœ¯</strong></h3>
<h4 data-id="heading-20"><strong>ï¼ˆ1ï¼‰é‡‡é›†è®¾å¤‡</strong></h4>



































<table><thead><tr><th><strong>æŠ€æœ¯</strong></th><th><strong>ç²¾åº¦/æˆæœ¬</strong></th><th><strong>åº”ç”¨åœºæ™¯</strong></th><th><strong>å±€é™</strong></th></tr></thead><tbody><tr><td><strong>Mobile Mapping System (MMS)</strong></td><td>å˜ç±³çº§/é«˜æˆæœ¬</td><td>åŸå¸‚çº§ä¸»å¹²é“ã€é«˜é€Ÿè·¯å»ºå›¾</td><td>è½¦é˜Ÿè°ƒåº¦å¤æ‚ï¼Œå±±åŒºè¦†ç›–å›°éš¾</td></tr><tr><td><strong>GNSS/RTKå®šä½</strong></td><td>5-10cm/ä¸­æˆæœ¬</td><td>å®¤å¤–è½¦é“çº¿ã€ä¿¡å·ç¯ä½å§¿</td><td>ä¿¡å·é®æŒ¡ï¼ˆéš§é“ï¼‰éœ€è¾…åŠ©å®šä½</td></tr><tr><td><strong>LiDARæ¿€å…‰æ‰«æ</strong></td><td>æ¯«ç±³-å˜ç±³çº§/é«˜æˆæœ¬</td><td>éš§é“ã€ç«‹äº¤ç­‰3Dç»“æ„é‡å»º</td><td>ç‚¹äº‘å¤„ç†ç®—åŠ›éœ€æ±‚å¤§</td></tr><tr><td><strong>ä½æˆæœ¬ç»„åˆæ–¹æ¡ˆ</strong></td><td>1-5m/ä½æˆæœ¬</td><td>ä¼—åŒ…æ›´æ–°ï¼ˆè½¦ç«¯ä¼ æ„Ÿå™¨å›ä¼ ï¼‰</td><td>éœ€åå¤„ç†ä¼˜åŒ–ï¼ˆSLAMèåˆï¼‰</td></tr></tbody></table>
<h4 data-id="heading-21"><strong>ï¼ˆ2ï¼‰ä¼—åŒ…é‡‡é›†ï¼ˆCrowdsourcingï¼‰</strong></h4>
<ul>
<li><strong>æ–¹æ¡ˆ</strong>ï¼šç‰¹æ–¯æ‹‰ã€å°é¹ç­‰è½¦ä¼åˆ©ç”¨ç”¨æˆ·è½¦è¾†æ‘„åƒå¤´+GNSSæ•°æ®è¡¥å……æ›´æ–°ã€‚</li>
<li><strong>ä»£è¡¨</strong>ï¼šMobileye Roadbookï¼ˆé€šè¿‡å‰è§†æ‘„åƒå¤´ç”Ÿæˆæè¿°é“è·¯è¯­ä¹‰çš„è½»é‡åŒ–åœ°å›¾ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-22"><strong>2. æ•°æ®å¤„ç†ä¸å»ºæ¨¡æŠ€æœ¯</strong></h3>
<h4 data-id="heading-23"><strong>ï¼ˆ1ï¼‰SLAMï¼ˆåŒæ­¥å®šä½ä¸å»ºå›¾ï¼‰</strong></h4>
<ul>
<li><strong>LiDAR SLAM</strong>ï¼šLIO-SAMï¼ˆç´§è€¦åˆLiDAR-IMUï¼‰ã€LeGO-LOAMï¼ˆè½»é‡åŒ–ï¼‰ã€‚</li>
<li><strong>è§†è§‰SLAM</strong>ï¼šORB-SLAM3ï¼ˆå¤šä¼ æ„Ÿå™¨èåˆï¼‰ã€VINS-Fusionï¼ˆå•ç›®+IMUï¼‰ã€‚</li>
<li><strong>ä½œç”¨</strong>ï¼šè§£å†³GNSSæ— ä¿¡å·åŒºï¼ˆåœ°ä¸‹è½¦åº“ï¼‰çš„å®šä½é—®é¢˜ã€‚</li>
</ul>
<h4 data-id="heading-24"><strong>ï¼ˆ2ï¼‰ç‚¹äº‘å¤„ç†</strong></h4>
<ul>
<li><strong>é™å™ª</strong>ï¼šç»Ÿè®¡æ»¤æ³¢ï¼ˆStatistical Outlier Removalï¼‰ã€‚</li>
<li><strong>ç‰¹å¾æå–</strong>ï¼šRANSACç®—æ³•è¯†åˆ«è½¦é“çº¿ã€é“è·¯è¾¹ç¼˜ã€‚</li>
<li><strong>å·¥å…·</strong>ï¼šPCLï¼ˆPoint Cloud Libraryï¼‰ã€CloudCompareã€‚</li>
</ul>
<h4 data-id="heading-25"><strong>ï¼ˆ3ï¼‰è¯­ä¹‰å»ºæ¨¡</strong></h4>
<ul>
<li><strong>è¦ç´ åˆ†ç±»</strong>ï¼šCNNï¼ˆè½¦é“çº¿è¯†åˆ«ï¼‰ã€PointNet++ï¼ˆ3Dç›®æ ‡æ£€æµ‹ï¼‰ã€‚</li>
<li><strong>Laneæ¨¡å‹æ„å»º</strong>ï¼šåˆ†ç±»å‹ï¼ˆå•è™šçº¿ã€åŒå®çº¿ï¼‰ä¸å‡ ä½•ä¿¡æ¯ç¼–ç ï¼Œè¾“å‡º<strong>Lanelet2</strong>æˆ–<strong>OpenDRIVE</strong>æ ¼å¼ã€‚</li>
</ul>
<h4 data-id="heading-26"><strong>ï¼ˆ4ï¼‰æ‹“æ‰‘ç½‘ç»œ</strong></h4>
<ul>
<li><strong>èŠ‚ç‚¹-Linkè¿æ¥</strong>ï¼šåŸºäºæ‹“æ‰‘ä¸€è‡´æ€§æ ¡éªŒï¼ˆå¦‚æ— å‘å›¾æ¡¥æ£€æµ‹ï¼‰ã€‚</li>
<li><strong>æ ‡å‡†æ ¼å¼</strong>ï¼šNDSï¼ˆå¯¼èˆªæ•°æ®æ ‡å‡†ï¼‰ã€SHPï¼ˆShapefileç©ºé—´æ•°æ®ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-27"><strong>3. åœ°å›¾æ›´æ–°æŠ€æœ¯</strong></h3>



































<table><thead><tr><th><strong>æŠ€æœ¯</strong></th><th><strong>æ›´æ–°å»¶è¿Ÿ</strong></th><th><strong>åº”ç”¨åœºæ™¯</strong></th><th><strong>æ¡ˆä¾‹</strong></th></tr></thead><tbody><tr><td><strong>ä¼ä¸šä¸“ä¸šé‡‡é›†è½¦</strong></td><td>æœˆ/å­£åº¦çº§</td><td>åŸºç¡€æ¡†æ¶æ›´æ–°</td><td>å››ç»´å›¾æ–°ã€é«˜å¾·</td></tr><tr><td><strong>è½¦ç«¯ä¼—åŒ…å®æ—¶æ›´æ–°</strong></td><td>åˆ†é’Ÿ-å°æ—¶çº§</td><td>çº¢ç»¿ç¯ä½ç½®å¾®è°ƒã€ä¸´æ—¶æ–½å·¥</td><td>ç‰¹æ–¯æ‹‰â€œè®°å¿†è·¯å¾„â€ã€ç™¾åº¦Apollo</td></tr><tr><td><strong>è·¯ä¾§å•å…ƒï¼ˆRSUï¼‰æ¨é€</strong></td><td>ç§’çº§</td><td>äº‹æ•…é¢„è­¦ã€ç»¿æ³¢é€Ÿåº¦</td><td>åä¸ºæ™ºæ…§å…¬è·¯æ–¹æ¡ˆ</td></tr><tr><td><strong>å·®åˆ†æ›´æ–°</strong></td><td>æŒ‰éœ€</td><td>å±€éƒ¨æ•°æ®å˜æ›´ï¼ˆå¦‚è½¦é“æ•°é‡å¢å‡ï¼‰</td><td>HERE OTA Update</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-28"><strong>4. åº”ç”¨ä¸åŠ¨æ€æœåŠ¡</strong></h3>
<h4 data-id="heading-29"><strong>ï¼ˆ1ï¼‰è‡ªåŠ¨é©¾é©¶é›†æˆ</strong></h4>
<ul>
<li><strong>å®šä½æ¨¡å—</strong>ï¼šåŒ¹é…LiDARå®æ—¶æ‰«æä¸HDåœ°å›¾ç‚¹äº‘ï¼ˆå¦‚NDTç®—æ³•ï¼‰ã€‚</li>
<li><strong>è·¯å¾„è§„åˆ’</strong>ï¼šç»“åˆè½¦é“è¯­ä¹‰ä¿¡æ¯ï¼ˆå¦‚ç¦è¡Œã€æ±‡å…¥ç‚¹ï¼‰ï¼Œè¾“å‡ºFrenetåæ ‡ã€‚</li>
</ul>
<h4 data-id="heading-30"><strong>ï¼ˆ2ï¼‰äº¤é€šç®¡ç†</strong></h4>
<ul>
<li><strong>åŠ¨æ€åœ°å›¾åˆ‡ç‰‡</strong>ï¼šæ ¹æ®è¡Œæ”¿åŒºåŸŸæˆ–è¡Œæ”¿åŒºåˆ’åŠ¨æ€è£å‰ªæ•°æ®ã€‚</li>
<li><strong>åŠ å¯†ä¼ è¾“</strong>ï¼šå›½å¯†SM4ç®—æ³•ä¿æŠ¤ä¼ è¾“è¿‡ç¨‹æ•°æ®å®‰å…¨ã€‚</li>
</ul>
<h4 data-id="heading-31"><strong>ï¼ˆ3ï¼‰å¼€æºæ–¹æ¡ˆ</strong></h4>
<ul>
<li><strong>Autoware</strong>ï¼šæ”¯æŒOpenDRIVEæ ¼å¼åœ°å›¾è§£æã€‚</li>
<li><strong>Apollo HD Map</strong>ï¼šç™¾åº¦å¼€æºï¼Œå«10+é“è·¯è¦ç´ ç±»å‹ï¼ˆæ°´é©¬ã€å…¬äº¤ç«™å°ï¼‰ã€‚ -Â <strong>Lanelet2</strong>ï¼šå¾·å›½FTMç ”ç©¶æ‰€å¼€å‘ï¼Œè½»é‡åŒ–è½¦é“æ‹“æ‰‘è¡¨è¾¾ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-32"><strong>5. å½“å‰ä¸»æµè§£å†³æ–¹æ¡ˆå¯¹æ¯”</strong></h3>









































<table><thead><tr><th><strong>å…¬å¸/é¡¹ç›®</strong></th><th><strong>æ ¸å¿ƒæŠ€æœ¯</strong></th><th><strong>å•†ä¸šæ¨¡å¼</strong></th><th><strong>è¦†ç›–è§„æ¨¡</strong></th></tr></thead><tbody><tr><td><strong>ç™¾åº¦Apollo</strong></td><td>è§†è§‰+LiDAR SLAMï¼Œä¼—åŒ…æ›´æ–°</td><td>å…è´¹å¼€æº+è‡ªåŠ¨é©¾é©¶æ–¹æ¡ˆé›†æˆ</td><td>å›½å†…20+åŸå¸‚</td></tr><tr><td><strong>é«˜å¾·ï¼ˆé˜¿é‡Œï¼‰</strong></td><td>GNSS/RTK+ä¸“ä¸šMMSè½¦é˜Ÿ</td><td>æ”¶è´¹æ•°æ®æœåŠ¡+å¯¼èˆªåº”ç”¨</td><td>å…¨å›½å…¬è·¯ç½‘</td></tr><tr><td><strong>Mobileye</strong></td><td>å‰è§†æ‘„åƒå¤´è¯­ä¹‰ä¼—åŒ…</td><td>èŠ¯ç‰‡é¢„è£…ï¼ŒæŒ‰é‡Œç¨‹è®¢é˜…</td><td>å…¨çƒä¸»è¦å›½å®¶</td></tr><tr><td><strong>Here Tech</strong></td><td>åŸå¸‚æ•°å­—å­ªç”Ÿ+5Gå®æ—¶æ›´æ–°</td><td>åŠ¨æ€äº‹ä»¶æ”¶è´¹ï¼ˆå¦‚æ‹¥å µé¢„è­¦ï¼‰</td><td>æ¬§ç¾åŠäºšæ´²ä¸»è¦åŸå¸‚</td></tr><tr><td><strong>ç‰¹æ–¯æ‹‰</strong></td><td>çº¯è§†è§‰è®°å¿†è·¯å¾„ï¼ˆæ— LiDARä¾èµ–ï¼‰</td><td>å…è´¹ï¼ˆFSDåŒ…åŒ…å«ï¼‰</td><td>ç”¨æˆ·è¡Œé©¶åŒºåŸŸåŠ¨æ€æ›´æ–°</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-33"><strong>6. æŠ€æœ¯æŒ‘æˆ˜ä¸è¶‹åŠ¿</strong></h3>
<ul>
<li><strong>å¤šä¼ æ„Ÿå™¨èåˆ</strong>ï¼šæ¿€å…‰é›·è¾¾ã€æ‘„åƒå¤´ã€æ¯«ç±³æ³¢é›·è¾¾çš„æ•°æ®å¯¹é½ï¼ˆæ—¶ç©ºåŒæ­¥ï¼‰ã€‚</li>
<li><strong>è½»é‡åŒ–</strong>ï¼šé˜¿é‡ŒAHSï¼ˆè‡ªé€‚åº”é«˜ç²¾åœ°å›¾ï¼‰æŒ‰éœ€è¯·æ±‚å±€éƒ¨æ•°æ®ï¼Œé™ä½è½¦ç«¯å­˜å‚¨ã€‚</li>
<li><strong>åˆè§„æ€§</strong>ï¼šä¸­å›½ã€Šæµ‹ç»˜èµ„è´¨ã€‹è¦æ±‚â€œç”²çº§â€ï¼Œå¤–èµ„åœ°å›¾å•†éœ€ä¸æœ¬åœŸä¼ä¸šåˆä½œï¼ˆå¦‚Here+å››ç»´å›¾æ–°ï¼‰ã€‚</li>
</ul>
<p>ç™¾åº¦Â <strong>Apollo</strong>Â è‡ªåŠ¨é©¾é©¶å¹³å°çš„é«˜ç²¾åº¦åœ°å›¾æ¨¡å—ï¼ˆ<strong>Apollo HD Map</strong>ï¼‰æ˜¯å…¶æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œé‡‡ç”¨Â  <strong>â€œè‡ªç ”+å¼€æº+ç”Ÿæ€åˆä½œâ€</strong> Â æ¨¡å¼ï¼Œæ·±åº¦èåˆè½¦ç«¯ä¼ æ„Ÿå™¨æ•°æ®ä¸åœ°å›¾ç”Ÿäº§ç®¡çº¿ã€‚ä»¥ä¸‹æ˜¯å…¶å…·ä½“æŠ€æœ¯å®ç°æ–¹æ¡ˆï¼š</p>
<hr/>
<h3 data-id="heading-34"><strong>1. æ•´ä½“æ¶æ„</strong></h3>
<p>Apollo HD Map åˆ†ä¸ºÂ <strong>æ•°æ®ç”Ÿäº§ã€æ•°æ®ç®¡ç†ã€æ•°æ®åº”ç”¨</strong>Â ä¸‰å±‚ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">gherkin
å¤åˆ¶
                      +<span class="hljs-comment">------------------+</span>
                      | æ•°æ®åº”ç”¨å±‚        |  â† è‡ªåŠ¨é©¾é©¶å®šä½ã€è§„åˆ’ã€æ§åˆ¶
                      +<span class="hljs-comment">------------------+</span>
                      | æ•°æ®ç®¡ç†å±‚        |  â† åœ°å›¾ç‰ˆæœ¬æ§åˆ¶ã€å·®åˆ†æ›´æ–°
                      +<span class="hljs-comment">------------------+</span>
                      | æ•°æ®ç”Ÿäº§å±‚        |  â† é‡‡é›†ã€å¤„ç†ã€å»ºæ¨¡ã€éªŒè¯
                      +<span class="hljs-comment">------------------+</span>
</code></pre>
<ul>
<li><strong>æ ¸å¿ƒç›®æ ‡</strong>ï¼šæä¾›å˜ç±³çº§ç²¾åº¦è½¦é“æ¨¡å‹ã€åŠ¨æ€è¯­ä¹‰ï¼ˆçº¢ç»¿ç¯ã€æ–½å·¥åŒºï¼‰å’ŒÂ <strong>åˆ†é’Ÿçº§æ›´æ–°</strong>Â èƒ½åŠ›ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-35"><strong>2. æ•°æ®ç”Ÿäº§æµç¨‹</strong></h3>
<h4 data-id="heading-36"><strong>(1) é‡‡é›†è®¾å¤‡ç»„åˆ</strong></h4>
<h4 data-id="heading-37"><strong>(1) é‡‡é›†è®¾å¤‡ç»„åˆ</strong></h4>
<ul>
<li>
<p><strong>ä¸“ä¸šé‡‡é›†è½¦</strong>ï¼šé…å¤‡ Velodyne LiDARï¼ˆ64çº¿ï¼‰+ é«˜è½¨ RTK-GNSS + å…¨æ™¯ç›¸æœº + IMUï¼Œè¦†ç›–ä¸»åŸé«˜é€Ÿã€‚</p>
</li>
<li>
<p><strong>ä¼—åŒ…è¡¥å……</strong>ï¼šç”¨æˆ·è½¦è¾†ï¼ˆç™¾åº¦åˆä½œè½¦å‹ï¼‰çš„ GNSS + å•ç›®æ‘„åƒå¤´æ•°æ®ï¼Œç”¨äºè¡¥å……ç»†èŠ‚ã€‚ -Â <strong>ç‰¹æ®Šåœºæ™¯</strong>ï¼š</p>
<ul>
<li>éš§é“ï¼šUWBï¼ˆè¶…å®½å¸¦ï¼‰è¾…åŠ©å®šä½ã€‚</li>
<li>åœ°ä¸‹è½¦åº“ï¼šSLAMï¼ˆæ— GNSSï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-38"><strong>(2) å¤„ç†ç®¡çº¿</strong></h4>
<h5 data-id="heading-39"><strong>â‘  ç‚¹äº‘å¤„ç†</strong></h5>
<ul>
<li>
<p><strong>LIO-SAMä¼˜åŒ–</strong>ï¼šLiDAR-IMUç´§è€¦åˆï¼Œç”Ÿæˆå…¨å±€ä¸€è‡´ç‚¹äº‘ï¼ˆé—­ç¯æ£€æµ‹ï¼‰ã€‚</p>
</li>
<li>
<p><strong>è‡ªåŠ¨åŒ–è¦ç´ æå–</strong>ï¼š</p>
<ul>
<li>è½¦é“çº¿ï¼šåŸºäºç‚¹äº‘åå°„å¼ºåº¦ï¼ˆPCAä¸»æˆåˆ†åˆ†æï¼‰ã€‚</li>
<li>çº¢ç»¿ç¯ï¼šYOLOv4æ£€æµ‹2Dæ¡†ï¼ŒæŠ•å½±åˆ°3Dç‚¹äº‘ã€‚</li>
</ul>
</li>
<li>
<p><strong>å·¥å…·é“¾</strong>ï¼šApolloè‡ªç ”Â <code>C++ PCLæ’ä»¶</code>Â å®ç°å¿«é€Ÿæ ‡æ³¨ã€‚</p>
</li>
</ul>
<h5 data-id="heading-40"><strong>â‘¡ è¯­ä¹‰å»ºæ¨¡</strong></h5>
<ul>
<li>
<p><strong>æ ¼å¼è¾“å‡º</strong>ï¼š<strong>Apolloä¸“ç”¨æ ¼å¼</strong>ï¼ˆæ‰©å±•Lanelet2ï¼‰å’ŒÂ <strong>OpenDRIVE</strong>ã€‚ -Â <strong>æ ¸å¿ƒè¦ç´ </strong>ï¼š</p>
<ul>
<li><strong>è½¦é“çº§</strong>ï¼šä¸­å¿ƒçº¿ã€è¾¹ç•Œçº¿ã€è½¦é“ç±»å‹ï¼ˆè™š/å®çº¿ï¼‰ã€‚</li>
<li><strong>äº¤é€šè®¾æ–½</strong>ï¼šçº¢ç»¿ç¯ã€è·¯ç‰Œã€å…¬äº¤ç«™å°ã€‚</li>
<li><strong>åŠ¨æ€å¯¹è±¡</strong>ï¼šæ°´é©¬ã€ä¸´æ—¶æ–½å·¥åŒºã€‚</li>
</ul>
</li>
</ul>
<h5 data-id="heading-41"><strong>â‘¢ æ‹“æ‰‘æ ¡éªŒ</strong></h5>
<ul>
<li><strong>èŠ‚ç‚¹-linkè§„åˆ™</strong>ï¼šé¿å…æ–­å¤´è·¯ã€è‡ªå¾ªç¯ç­‰é€»è¾‘é”™è¯¯ã€‚</li>
<li><strong>æ ¡éªŒç®—æ³•</strong>ï¼šåŸºäºå›¾è®ºçš„â€œå•æºæœ€çŸ­è·¯å¾„â€æ£€æŸ¥ã€‚</li>
</ul>
<h4 data-id="heading-42"><strong>(3) åœ°å›¾éªŒè¯</strong></h4>
<ul>
<li><strong>ä»¿çœŸæµ‹è¯•</strong>ï¼šåœ¨Â <strong>LGSVL</strong>Â æˆ–Â <strong>CARLA</strong>Â ä¸­åŠ è½½HDåœ°å›¾ï¼Œæµ‹è¯•è½¦è¾†æ˜¯å¦æŒ‰é¢„æœŸå˜é“ã€‚</li>
<li><strong>è·¯æµ‹æŒ‡æ ‡</strong>ï¼šæ¨ªå‘è¯¯å·®ï¼ˆ&lt;10cmï¼‰ã€è¦ç´ ç¼ºå¤±ç‡ï¼ˆ&lt;0.1%ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-43"><strong>3. æ•°æ®ç®¡ç†æ–¹æ¡ˆ</strong></h3>
<h4 data-id="heading-44"><strong>(1) åˆ†å±‚åˆ†å—å­˜å‚¨</strong></h4>
<ul>
<li>
<p><strong>æ ‡å‡†åˆ’åˆ†</strong>ï¼šæŒ‰é“è·¯åŒºåŸŸåˆ‡ç‰‡ï¼ˆTileï¼‰ï¼Œæ¯Tileçº¦1å¹³æ–¹å…¬é‡Œã€‚</p>
</li>
<li>
<p><strong>åˆ†å±‚ç»“æ„</strong>ï¼š</p>
<ul>
<li><strong>Base Layer</strong>ï¼šè½¦é“çº¿ã€è·¯ç¼˜çŸ³ï¼ˆé•¿æœŸä¸å˜ï¼‰ã€‚</li>
<li><strong>Dynamic Layer</strong>ï¼šçº¢ç»¿ç¯ç›¸ä½ã€ä¸´æ—¶æ–½å·¥ï¼ˆåŠ¨æ€æ›´æ–°ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-45"><strong>(2) å·®åˆ†æ›´æ–°ï¼ˆOTA Updateï¼‰</strong></h4>
<ul>
<li>
<p><strong>è§¦å‘æ¡ä»¶</strong>ï¼šæ£€æµ‹åˆ°è½¦é“å¢åŠ /å‡å°‘ã€çº¢ç»¿ç¯ä½ç½®å˜æ›´ã€‚</p>
</li>
<li>
<p><strong>æ›´æ–°ç²’åº¦</strong>ï¼š</p>
<ul>
<li>å…¨é‡æ›´æ–°ï¼ˆæ–°åŒºåŸŸå‘å¸ƒï¼‰â†’ åˆ†é’Ÿçº§ã€‚</li>
<li>å·®åˆ†æ›´æ–°ï¼ˆä»…å‘å˜æ›´éƒ¨åˆ†ï¼‰â†’ ç§’çº§ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¼ è¾“åè®®</strong>ï¼šåŸºäºProtobufåºåˆ—åŒ–ï¼Œé€šè¿‡MQTTåè®®æ¨é€ã€‚</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-46"><strong>4. æ•°æ®åº”ç”¨åœºæ™¯</strong></h3>
<h4 data-id="heading-47"><strong>(1) è‡ªåŠ¨é©¾é©¶å®šä½</strong></h4>
<ul>
<li><strong>NDTï¼ˆæ­£æ€åˆ†å¸ƒå˜æ¢ï¼‰åŒ¹é…</strong>ï¼šLiDARæ‰«æä¸ç‚¹äº‘åœ°å›¾åŒ¹é…ï¼Œå®šä½è¯¯å·®Â±5cmã€‚</li>
<li><strong>æ— åœ°å›¾åŒºåŸŸ</strong>ï¼šåˆ‡æ¢è‡³è§†è§‰SLAMï¼ˆApollo Perceptionæ¨¡å—ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-48"><strong>(2) è·¯å¾„è§„åˆ’</strong></h4>
<ul>
<li>
<p><strong>åŒå±‚è§„åˆ’</strong>ï¼š</p>
<ul>
<li><strong>å…¨å±€è§„åˆ’</strong>ï¼šåŸºäºHDåœ°å›¾ç”ŸæˆFrenetåæ ‡ï¼ˆs-tåæ ‡ç³»ï¼‰ã€‚</li>
<li><strong>å±€éƒ¨è§„åˆ’</strong>ï¼šåŠ¨æ€é¿éšœï¼ˆå¦‚åœ°å›¾æœªæ ‡æ³¨çš„è¡Œäººï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>å˜é“é€»è¾‘</strong>ï¼šåŸºäºHDåœ°å›¾çš„è½¦é“è¿æ¥æ€§ï¼ˆå¦‚â€œå³é“å¯æ±‡å…¥å·¦ä¾§â€ï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-49"><strong>(3) è½¦è·¯ååŒï¼ˆV2Xï¼‰</strong></h4>
<ul>
<li><strong>RSUåŒæ­¥</strong>ï¼šè·¯ä¾§å•å…ƒå®æ—¶æ¨é€çº¢ç»¿ç¯ç›¸ä½è‡³è½¦ç«¯ã€‚</li>
<li><strong>é«˜ç²¾äº‹ä»¶</strong>ï¼šäº‹æ•…ç‚¹æ›´æ–°åï¼Œè§¦å‘è½¦è¾†ç´§æ€¥åˆ¶åŠ¨ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-50"><strong>5. æŠ€æœ¯ç‰¹è‰²</strong></h3>
<h4 data-id="heading-51"><strong>(1) è½»é‡åŒ–éƒ¨ç½²</strong></h4>
<ul>
<li><strong>æŒ‰éœ€åŠ è½½</strong>ï¼šä»…ä¸‹è½½è½¦è¾†è¡Œé©¶è·¯çº¿çš„Tileï¼ŒèŠ‚çœå¸¦å®½ï¼ˆå¦‚é•¿é€”é«˜é€Ÿè·¯å¾„é¢„æµ‹ä¸‹è½½ï¼‰ã€‚</li>
<li><strong>ç¼“å­˜ç­–ç•¥</strong>ï¼šTileç¼“å­˜æ—¶é—´åŠ¨æ€è°ƒæ•´ï¼ˆå¦‚åŸåŒºé«˜é¢‘æ›´æ–°ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-52"><strong>(2) ä¼—åŒ…æ›´æ–°æœºåˆ¶</strong></h4>
<ul>
<li>
<p><strong>ç”¨æˆ·æ•°æ®åé¦ˆ</strong>ï¼š</p>
<ul>
<li>è½¦è¾†æ£€æµ‹åˆ°åœ°å›¾é”™è¯¯ï¼ˆå¦‚è½¦é“çº¿é”™ä½ï¼‰â†’ ä¸Šä¼ å·®å¼‚æ•°æ®è‡³Apolloäº‘ã€‚</li>
<li>åå°ç¡®è®¤ååˆå¹¶ï¼Œè§¦å‘å·®åˆ†æ›´æ–°ã€‚</li>
</ul>
</li>
<li>
<p><strong>è´¨é‡è¯„ä¼°</strong>ï¼šä¼—åŒ…æ•°æ®éœ€ç»ä¸“ä¸šæ£€æµ‹ï¼ˆå¦‚RTK-GNSSæ ¡éªŒï¼‰ã€‚</p>
</li>
</ul>
<h4 data-id="heading-53"><strong>(3) å¼€æºå·¥å…·é“¾</strong></h4>
<ul>
<li><strong>Apollo Map Engine</strong>ï¼šæ”¯æŒç¼–è¾‘ã€éªŒè¯ã€å¯¼å‡ºHDåœ°å›¾ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FApolloAuto%2Fapollo" target="_blank" title="https://github.com/ApolloAuto/apollo" ref="nofollow noopener noreferrer">GitHubå¼€æº</a>ï¼‰ã€‚</li>
<li><strong>æ”¯æŒæ ¼å¼</strong>ï¼šOpenDRIVEã€Lanelet2ã€SHPï¼ˆShapefileï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-54"><strong>6. ä¸ç«å“å¯¹æ¯”</strong></h3>









































<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>Apollo HD Map</strong></th><th><strong>Mobileye Roadbook</strong></th><th><strong>é«˜å¾·HD Map</strong></th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒé‡‡é›†æ–¹å¼</strong></td><td>LiDAR+RTK+ä¼—åŒ…</td><td>å‰è§†æ‘„åƒå¤´ï¼ˆä½æˆæœ¬ï¼‰</td><td>GNSS/RTK+MMSè½¦é˜Ÿ</td></tr><tr><td><strong>åœ°å›¾æ›´æ–°é€Ÿåº¦</strong></td><td>åˆ†é’Ÿçº§ï¼ˆåŠ¨æ€å±‚ï¼‰</td><td>å°æ—¶çº§</td><td>å­£åº¦çº§</td></tr><tr><td><strong>æ˜¯å¦å¼€æº</strong></td><td>æ˜¯ï¼ˆéƒ¨åˆ†æ¨¡å—ï¼‰</td><td>å¦</td><td>å¦</td></tr><tr><td><strong>è½¦è§„çº§éªŒè¯</strong></td><td>åŒ—äº¬/é‡åº†ç­‰è·¯æµ‹</td><td>å…¨çƒç”¨æˆ·éªŒè¯</td><td>ä¸»æœºå‚åˆä½œéªŒè¯</td></tr><tr><td><strong>ä¼—åŒ…èƒ½åŠ›</strong></td><td>å¼ºï¼ˆç”¨æˆ·è·¯å¾„è®°å¿†ï¼‰</td><td>å¼ºï¼ˆGlobalï¼‰</td><td>å¼±ï¼ˆä¸“ä¸šæµ‹ç»˜ä¸ºä¸»ï¼‰</td></tr></tbody></table>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claudeå‘å¸ƒæ–°åŠŸèƒ½Agent Skillsï¼Œè®©ä½ çš„Agentæ›´ä¸“ä¸š]]></title>    <link>https://juejin.cn/post/7572714389942435892</link>    <guid>https://juejin.cn/post/7572714389942435892</guid>    <pubDate>2025-11-16T01:18:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572714389942435892" data-draft-id="7567208390369247272" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claudeå‘å¸ƒæ–°åŠŸèƒ½Agent Skillsï¼Œè®©ä½ çš„Agentæ›´ä¸“ä¸š"/> <meta itemprop="keywords" content="Claude,AIGC"/> <meta itemprop="datePublished" content="2025-11-16T01:18:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æºªå½¼å²¸"/> <meta itemprop="url" content="https://juejin.cn/user/976781670357400"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claudeå‘å¸ƒæ–°åŠŸèƒ½Agent Skillsï¼Œè®©ä½ çš„Agentæ›´ä¸“ä¸š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/976781670357400/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æºªå½¼å²¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T01:18:54.000Z" title="Sun Nov 16 2025 01:18:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æºªï¼Œè§å­—å¦‚é¢ã€‚2025å¹´10æœˆ16æ—¥ï¼ŒAnthropicå‘å¸ƒäº†Claudeæ¨¡å‹çš„ä¸€é¡¹é‡å¤§æ›´æ–°Agent Skillsï¼Œå®ƒå…è®¸ç”¨æˆ·å°†ä¸“ä¸šçŸ¥è¯†ã€è„šæœ¬å’Œèµ„æºæ‰“åŒ…æˆæ¨¡å—åŒ–çš„â€œæŠ€èƒ½æ–‡ä»¶å¤¹â€ï¼ˆSkill foldersï¼‰ï¼Œè®© AI èƒ½åœ¨ç‰¹å®šå·¥ä½œåœºæ™¯ä¸­æ›´ä¸“ä¸šåœ°æ‰§è¡Œä»»åŠ¡ã€‚å¯¹Claude Code CLIå¾€æœŸå†…å®¹æ„Ÿå…´è¶£çš„å°ä¼™ä¼´ä¹Ÿå¯ä»¥çœ‹å¾€æœŸå†…å®¹ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247493170%26idx%3D1%26sn%3D13e9d5122d788175ab587ce33720f777%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247493170&amp;idx=1&amp;sn=13e9d5122d788175ab587ce33720f777&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Hooksæ‰æ˜¯Claude Code CLI çš„é©å‘½æ€§æ›´æ–°</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247493196%26idx%3D1%26sn%3Db4efa96c86f66fff3acd21c175ceb89f%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247493196&amp;idx=1&amp;sn=b4efa96c86f66fff3acd21c175ceb89f&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Claude Codeé¢ è¦†ç¼–ç¨‹é£æ ¼çš„Output Styles</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247493228%26idx%3D1%26sn%3D7bb969019478e4e38974776bb04fedda%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247493228&amp;idx=1&amp;sn=7bb969019478e4e38974776bb04fedda&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">åˆ†äº«ä¸€ä¸ªClaude Codeå®è—ç½‘ç«™Claude Code Templates</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247493269%26idx%3D1%26sn%3D4775c90a4fab04126502bf79b0f75d70%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247493269&amp;idx=1&amp;sn=4775c90a4fab04126502bf79b0f75d70&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Claude Codeä¸Šçº¿æ’ä»¶ç³»ç»Ÿï¼ŒAIç¼–ç¨‹æ¨¡å¼å†æ¬¡å‡çº§</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247493288%26idx%3D1%26sn%3D0274d7f3a741cbfde4d09adf7a595efb%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247493288&amp;idx=1&amp;sn=0274d7f3a741cbfde4d09adf7a595efb&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">å¦‚ä½•ä»é›¶å¼€å§‹åˆ›å»ºä¸€ä¸ªClaude Codeæ’ä»¶</a></li>
</ul>
<h2 data-id="heading-1">å½“å‰ä½¿ç”¨ç‰ˆæœ¬</h2>
<p>2.0.24 (Claude Code)</p>
<h2 data-id="heading-2">ç®€ä»‹</h2>
<p>å®˜æ–¹çš„æè¿°æ˜¯ï¼šâ€œä»£ç†æŠ€èƒ½å°†ä¸“ä¸šçŸ¥è¯†æ‰“åŒ…åˆ°å¯å‘ç°çš„åŠŸèƒ½ä¸­ã€‚æ¯ä¸ªæŠ€èƒ½éƒ½ç”±ä¸€ä¸ª SKILL.md æ–‡ä»¶ç»„æˆï¼Œå…¶ä¸­åŒ…å«Claudeåœ¨éœ€è¦æ—¶é˜…è¯»çš„ è¯´æ˜ã€è„šæœ¬ å’Œ æ¨¡æ¿ ç­‰å¯é€‰æ”¯æŒæ–‡ä»¶â€ã€‚</p>
<p>ç”¨ç™½è¯è®²å°±æ˜¯ï¼ŒAgent Skillæ˜¯ä¸€ä¸ªç”¨äºå‘Šè¯‰æ¨¡å‹å¦‚ä½•æ‰§è¡ŒæŸé¡¹æ“ä½œçš„Markdownæ–‡ä»¶ï¼ŒåŒæ—¶å…è®¸é™„å¸¦é¢å¤–çš„æ–‡æ¡£å’Œé¢„å…ˆç¼–å†™çš„è„šæœ¬ï¼Œé€šè¿‡è¿è¡Œè¿™äº›è„šæœ¬ï¼Œä½¿æ¨¡å‹åœ¨æ‰§è¡Œç‰¹å®šä»»åŠ¡æ—¶æ›´ä¸“ä¸šã€æ›´é«˜æ•ˆï¼Œæ˜¯AIâ€œå¯åŠ è½½çš„èƒ½åŠ›åŒ…â€</p>
<p>å®˜ç½‘åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.claude.com%2Fen%2Fdocs%2Fclaude-code%2Fskills" target="_blank" title="https://docs.claude.com/en/docs/claude-code/skills" ref="nofollow noopener noreferrer">docs.claude.com/en/docs/claâ€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbaf20322f164eda82b6bdb74dddb3d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=cqXXFH5QK%2BT4hFH5I2Xs3zE2e98%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Anthropicæä¾›äº†ä¸€ç³»åˆ—Skillç¤ºä¾‹ï¼Œéƒ¨åˆ†å·²ç»é›†æˆåˆ°äº†Claude Codeæ¡Œé¢ç«¯ï¼Œä¹Ÿå¯ä»¥åœ¨Claude Code CLIä¸­ä½¿ç”¨ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥è‡ªè¡Œäº†è§£ã€‚</p>
<p>Githubåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills" target="_blank" title="https://github.com/anthropics/skills" ref="nofollow noopener noreferrer">github.com/anthropics/â€¦</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31ad3b7da1224a5b9b049e643cd29f30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=aOUWIj6Gd4yGTG3L9YztKUoriI8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-3">ä¼˜åŠ¿</h2>
<p>Agent Skillså…·å¤‡å¦‚ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li>ä¸ºæ‚¨çš„ç‰¹å®šå·¥ä½œæµç¨‹æ‰©å±• Claude çš„åŠŸèƒ½</li>
<li>é€šè¿‡ git åœ¨å›¢é˜Ÿä¸­å…±äº«ä¸“ä¸šçŸ¥è¯†</li>
<li>å‡å°‘é‡å¤æç¤º</li>
<li>ä¸ºå¤æ‚ä»»åŠ¡ç¼–å†™å¤šç§æŠ€èƒ½</li>
</ul>
<h2 data-id="heading-4">å¦‚ä½•è°ƒç”¨ï¼Ÿ</h2>
<p>æŠ€èƒ½æ˜¯æ¨¡å‹è°ƒç”¨çš„ï¼ŒClaude æ ¹æ®æ‚¨çš„è¯·æ±‚å’ŒæŠ€èƒ½çš„æè¿°è‡ªä¸»å†³å®šä½•æ—¶ä½¿ç”¨å®ƒä»¬ã€‚</p>
<h2 data-id="heading-5">Skillsç±»å‹</h2>
<p>Agent Skillsæœ‰ 3ç§ç±»å‹ï¼ŒClaude Codeä»ä»¥ä¸‹æ¥æºè‡ªåŠ¨å‘ç°Skillsï¼š</p>
<ul>
<li>ä¸ªäºº(å…¨å±€)æŠ€èƒ½ï¼šä½œç”¨äºæ‰€æœ‰é¡¹ç›®ï¼Œè·¯å¾„åœ¨ ~/.claude/skills/ ç›®å½•ä¸‹</li>
<li>é¡¹ç›®æŠ€èƒ½ï¼šä½œç”¨äºç‰¹å®šé¡¹ç›®ï¼Œè·¯å¾„åœ¨ .claude/skills/ ç›®å½•ä¸‹</li>
<li>æ’ä»¶æŠ€èƒ½ï¼šä¸å·²å®‰è£…çš„æ’ä»¶æ†ç»‘åœ¨ä¸€èµ·</li>
</ul>
<h2 data-id="heading-6">Skillsç›®å½•åŠæ“ä½œ</h2>
<h3 data-id="heading-7">Skillç›®å½•ç»“æ„</h3>
<p>Agent Skillsçš„æ–‡ä»¶ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-keyword">my</span>-skill/
â”œâ”€â”€ SKILL.mdÂ <span class="hljs-comment"># æŒ‡ä»¤ä¸è¯´æ˜æ–‡ä»¶ å¿…éœ€é¡¹</span>
â”œâ”€â”€ reference.mdÂ <span class="hljs-comment"># æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰</span>
â”œâ”€â”€ examples.mdÂ <span class="hljs-comment"># ç¤ºä¾‹ï¼ˆå¯é€‰ï¼‰</span>
â”œâ”€â”€ scripts/Â <span class="hljs-comment"># è„šæœ¬ï¼ˆå¯é€‰ï¼‰</span>
â”‚ Â  â””â”€â”€ helper.py
â””â”€â”€ templates/ Â <span class="hljs-comment"># æ¨¡ç‰ˆï¼ˆå¯é€‰ï¼‰</span>
Â  Â  â””â”€â”€ template.txt
</code></pre>
<h3 data-id="heading-8">SKILL.md</h3>
<p>æ¯ä¸ªSkillséƒ½å®šä¹‰åœ¨å…·æœ‰ä»¥ä¸‹ç»“æ„çš„ Markdown æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">your-skill-name</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">Introduce</span> <span class="hljs-string">the</span> <span class="hljs-string">Skills</span>Â <span class="hljs-string">functionã€‚Description</span>Â <span class="hljs-string">of</span>Â <span class="hljs-string">when</span>Â <span class="hljs-string">this</span> <span class="hljs-string">Skill</span> <span class="hljs-string">should</span> <span class="hljs-string">be</span> <span class="hljs-string">invoked</span>
<span class="hljs-attr">allowed-tools:</span> <span class="hljs-string">which</span> <span class="hljs-string">tools</span> <span class="hljs-string">Claude</span> <span class="hljs-string">can</span> <span class="hljs-string">use</span>Â <span class="hljs-string">when</span>Â <span class="hljs-string">a</span> <span class="hljs-string">Skill</span>Â <span class="hljs-string">is</span>Â <span class="hljs-string">active</span>
<span class="hljs-string">licenseï¼šskill</span> <span class="hljs-string">license</span>
<span class="hljs-meta">---</span>
<span class="hljs-string">Skill</span> <span class="hljs-string">Implementation</span>Â <span class="hljs-string">and</span>Â <span class="hljs-string">Requirements</span>
</code></pre>
<p>SkillæŠ€èƒ½Markdown Frontmatterå±æ€§ï¼š</p>
<ul>
<li>nameï¼šSkillåç§°</li>
<li>descriptionï¼šæè¿°SkillåŠŸèƒ½åŠä½•æ—¶åº”è¯¥è°ƒç”¨æ­¤Skill</li>
<li>allowed-toolsï¼šSkillå¤„äºæ´»åŠ¨çŠ¶æ€æ—¶å¯ä»¥ä½¿ç”¨çš„å·¥å…·</li>
<li>licenseï¼šå¼€æºè®¸å¯åè®®</li>
</ul>
<p>Skillä¸­å¯ä»¥å¼•ç”¨å…¶ä»–é¢å¤–çš„æ–‡ä»¶ä½œä¸ºä¸Šä¸‹æ–‡ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">For advanced usage, seeÂ <span class="hljs-selector-attr">[reference.md]</span>(reference.md).
</code></pre>
<p>ä¹Ÿå¯ä»¥ä½¿ç”¨æ–‡ä»¶è·¯å¾„å½¢å¼</p>
<pre><code class="hljs language-bash" lang="bash">For advanced usage, see ./reference.md
</code></pre>
<p>éœ€è¦æ‰§è¡Œè„šæœ¬çš„æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼æŒ‡å®šï¼š</p>
<pre><code class="hljs language-go" lang="go">Run the helper script:
<span class="hljs-string">``</span><span class="hljs-string">`bash
python scripts/helper.py input.txt
`</span><span class="hljs-string">``</span>
</code></pre>
<p>å¯¹äº allowed-tools çš„ä½¿ç”¨ï¼Œå¯ä»¥åœ¨ frontmatter ä¸­æ¥é™åˆ¶ Claude åœ¨æŠ€èƒ½å¤„äºæ´»åŠ¨çŠ¶æ€æ—¶å¯ä»¥ä½¿ç”¨çš„å·¥å…·ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">your-skill-name</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">Introduce</span> <span class="hljs-string">the</span> <span class="hljs-string">Skills</span> <span class="hljs-string">functionã€‚Description</span> <span class="hljs-string">of</span> <span class="hljs-string">when</span> <span class="hljs-string">this</span> <span class="hljs-string">Skill</span> <span class="hljs-string">should</span> <span class="hljs-string">be</span> <span class="hljs-string">invoked</span>
<span class="hljs-attr">allowed-tools:</span> <span class="hljs-string">Read,</span> <span class="hljs-string">Grep,</span> <span class="hljs-string">Glob</span>
<span class="hljs-meta">---
</span></code></pre>
<h2 data-id="heading-9">åŸºæœ¬ä½¿ç”¨</h2>
<h3 data-id="heading-10">å‰ææ¡ä»¶</h3>
<ul>
<li>Claude Code ç‰ˆæœ¬ 1.0 æˆ–æ›´é«˜ç‰ˆæœ¬</li>
</ul>
<h3 data-id="heading-11">å®˜æ–¹Skillå®‰è£…ä½¿ç”¨</h3>
<p>é¦–å…ˆä»¥Claude Codeå®˜æ–¹Skill å¸‚åœºä¸ºä¾‹ï¼Œåœ¨äº¤äº’å¼å‘½ä»¤ä¸­è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤æ·»åŠ Skillå¸‚åœºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/plugin marketplace add anthropics/skills
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76b51ed79fe44f21be947774fda099b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=tXfzksxxUkyi%2BuF5DLKp0CW0mE4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨æ’ä»¶å¸‚åœºé€‰æ‹©ã€Browse and install pluginsã€‘æµè§ˆå¹¶å®‰è£…</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3ac55bc3fb945ad8886307c0891c197~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=rdpFaS2I6CjMib0bE6YISU3tD9c%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ–è€…é€šè¿‡ä»¥ä¸‹å‘½ä»¤ç›´æ¥å®‰è£…ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">/plugin installÂ <span class="hljs-variable language_">document</span>-skills\<span class="hljs-meta">@anthropic</span>-agent-skills
/plugin install example-skills\<span class="hljs-meta">@anthropic</span>-agent-skills
</code></pre>
<p>document-skills å’Œ example-skills åŒ…å«çš„Skillså¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59b3b19575114609ba101408b7f4be8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=bJtdGd3lTOVZBjSQZGFG7zUwC%2Fk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®‰è£…å®Œæˆåï¼Œæ ¹æ®æç¤ºé‡å¯Claude Code CLI</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c51b45603f3a4bdb902bb0e06d218bcf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=sQbiUb6BPwb4sLXU3MRvU8Zifa8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨äº¤äº’å¼å‘½ä»¤ä¸­ç›´æ¥è¾“å…¥æç¤ºè¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">æå–Â /Users/username/Desktop/å·¥ä½œç°¿1.xlsx æ–‡ä»¶å†…å®¹Â 
</code></pre>
<p>Claude Code CLIä¼šå…ˆè¿›è¡Œæƒé™è¯·æ±‚ï¼Œç„¶åå¯åŠ¨Excelå¤„ç†æŠ€èƒ½</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b6a82c077ba439d8e1d8548612b1e35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=mSn%2FRUkiXeXZO9tbG2Mqnhj299w%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…è®¸åï¼ŒClaude Code CLIä¼šå®‰è£…æ‰€éœ€çš„ä¾èµ–å¹¶åˆ›å»ºè„šæœ¬</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1df6bf7bf2c74e6ebbc7d58cacb75a63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=4G2S%2B6u8JCdpooAKNrypZRVow0I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…è®¸è„šæœ¬åæœ€ç»ˆè¯»å–åˆ°äº†Excelè¡¨æ ¼å†…å®¹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1873d8d1fd5b4602a257e58ce16c973c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=WFC1qRxMIlBUBTvDL35agKgJA9I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœ€åçœ‹ä¸€ä¸‹ä¼ ç»ŸClaude Code CLIè¯»å–Excelè¡¨æ ¼çš„æ•ˆæœ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d04c69d89837447aacf2f1c8bd577905~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=Z2fIbFAW8KwBCzT8Qc8XeGqoVGA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-12">ä¸‰æ–¹Skillå®‰è£…ä½¿ç”¨</h3>
<p>è¿™é‡Œä»¥Claude Code Templatesæä¾›çš„Skillsä¸ºä¾‹ï¼Œå¯¹Claude Code Templatesè¿˜ä¸äº†è§£çš„å°ä¼™ä¼´å¯ä»¥çœ‹å¾€æœŸå†…å®¹ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Njg3ODUzOA%3D%3D%26mid%3D2247493228%26idx%3D1%26sn%3D7bb969019478e4e38974776bb04fedda%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Njg3ODUzOA==&amp;mid=2247493228&amp;idx=1&amp;sn=7bb969019478e4e38974776bb04fedda&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">åˆ†äº«ä¸€ä¸ªClaude Codeå®è—ç½‘ç«™Claude Code Templates</a></p>
<p>è¿›å…¥é¡¹ç›®æ ¹ç›®å½•ï¼Œåœ¨å‘½ä»¤è¡Œç»ˆç«¯è¾“å…¥å¦‚ä¸‹æŒ‡ä»¤è¿›è¡Œå®‰è£…ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">$Â npx claude-code-templates\@latest <span class="hljs-attr">--skill</span>=creative-design/canvas-design --<span class="hljs-literal">yes</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ebaee8eeced443e836dd6816fa30d36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=AltEG%2B2VIw1KNnX6pcg7fzrw6Lo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®‰è£…å®Œæˆåï¼Œé¡¹ç›® .claude/ ç›®å½•ä¼šå¤šå‡ºä¸€ä¸ª skills ç›®å½•</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/755ed8a633cf4e91beb7f978278fa55a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=iJn8Pa43k6yVBKFy9EA6hwvt1fo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®Œæ•´çš„ SKILL.md å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">name:</span> canvas-design
<span class="hljs-symbol">description:</span>Â CreateÂ beautiful visual artÂ <span class="hljs-keyword">in</span>Â .pngÂ <span class="hljs-built_in">and</span>Â .pdf documentsÂ <span class="hljs-keyword">using</span>Â design philosophy. You should use this skillÂ <span class="hljs-keyword">when</span>Â theÂ userÂ asksÂ <span class="hljs-keyword">to</span>Â createÂ a poster, pieceÂ <span class="hljs-keyword">of</span>Â art, design,Â <span class="hljs-built_in">or</span>Â otherÂ <span class="hljs-keyword">static</span>Â piece.Â CreateÂ original visual designs, never copying existing artists<span class="hljs-comment">' work to avoid copyright violations.</span>
<span class="hljs-symbol">license:</span> Complete terms <span class="hljs-keyword">in</span> LICENSE.txt
--------------------------------------

These are instructions <span class="hljs-keyword">for</span> creating design philosophies - aesthetic movements that are <span class="hljs-keyword">then</span> EXPRESSED VISUALLY. Output only .md files, .pdf files, <span class="hljs-built_in">and</span> .png files.
Complete this <span class="hljs-keyword">in</span> two steps:

<span class="hljs-number">1</span>.  Design Philosophy Creation (.md file)
<span class="hljs-number">2</span>.  Express <span class="hljs-keyword">by</span> creating it <span class="hljs-keyword">on</span> a canvas (.pdf file <span class="hljs-built_in">or</span> .png file)
    First, undertake this task:

## DESIGN PHILOSOPHY CREATION

<span class="hljs-keyword">To</span> begin, create a VISUAL PHILOSOPHY (<span class="hljs-built_in">not</span> layouts <span class="hljs-built_in">or</span> templates) that will be interpreted through:

*   Form, space, color, composition
*   Images, graphics, shapes, patterns
*   Minimal <span class="hljs-keyword">text</span> <span class="hljs-keyword">as</span> visual accent

### THE CRITICAL UNDERSTANDING

*   What <span class="hljs-built_in">is</span> received: Some subtle input <span class="hljs-built_in">or</span> instructions <span class="hljs-keyword">by</span> the user that should be taken <span class="hljs-keyword">into</span> account, but used <span class="hljs-keyword">as</span> a foundation; it should <span class="hljs-built_in">not</span> constrain creative freedom.
*   What <span class="hljs-built_in">is</span> created: A design philosophy/aesthetic movement.
*   What happens <span class="hljs-keyword">next</span>: <span class="hljs-keyword">Then</span>, the same version receives the philosophy <span class="hljs-built_in">and</span> EXPRESSES IT VISUALLY - creating artifacts that are <span class="hljs-number">90%</span> visual design, <span class="hljs-number">10%</span> essential <span class="hljs-keyword">text</span>.
    Consider this approach:
*   Write a manifesto <span class="hljs-keyword">for</span> an art movement
*   The <span class="hljs-keyword">next</span> phase involves making the artwork
    The philosophy must emphasize: Visual expression. Spatial communication. Artistic interpretation. Minimal words.

### HOW <span class="hljs-keyword">TO</span> GENERATE A VISUAL PHILOSOPHY

**Name the movement** (<span class="hljs-number">1</span>-<span class="hljs-number">2</span> words): <span class="hljs-string">"Brutalist Joy"</span> / <span class="hljs-string">"Chromatic Silence"</span> / <span class="hljs-string">"Metabolist Dreams"</span>
**Articulate the philosophy** (<span class="hljs-number">4</span>-<span class="hljs-number">6</span> paragraphs - concise but complete):
<span class="hljs-keyword">To</span> capture the VISUAL essence, express how the philosophy manifests through:

*   Space <span class="hljs-built_in">and</span> form
*   Color <span class="hljs-built_in">and</span> material
*   Scale <span class="hljs-built_in">and</span> rhythm
*   Composition <span class="hljs-built_in">and</span> balance
*   Visual hierarchy
    **CRITICAL GUIDELINES:**
*   **Avoid redundancy**: <span class="hljs-keyword">Each</span> design aspect should be mentioned once. Avoid repeating points about color theory, spatial relationships, <span class="hljs-built_in">or</span> typographic principles unless adding <span class="hljs-built_in">new</span> depth.
*   **Emphasize craftsmanship REPEATEDLY**: The philosophy MUST stress multiple times that the final work should appear <span class="hljs-keyword">as</span> though it took countless hours <span class="hljs-keyword">to</span> create, was labored over <span class="hljs-keyword">with</span> care, <span class="hljs-built_in">and</span> comes <span class="hljs-keyword">from</span> someone at the absolute top <span class="hljs-keyword">of</span> their field. This framing <span class="hljs-built_in">is</span> essential - repeat phrases <span class="hljs-built_in">like</span> <span class="hljs-string">"meticulously crafted,"</span> <span class="hljs-string">"the product of deep expertise,"</span> <span class="hljs-string">"painstaking attention,"</span> <span class="hljs-string">"master-level execution."</span>
*   **Leave creative space**: Remain specific about the aesthetic direction, but concise enough that the <span class="hljs-keyword">next</span> Claude has room <span class="hljs-keyword">to</span> make interpretive choices also at a extremely high level <span class="hljs-keyword">of</span> craftmanship.
    The philosophy must guide the <span class="hljs-keyword">next</span> version <span class="hljs-keyword">to</span> express ideas VISUALLY, <span class="hljs-built_in">not</span> through <span class="hljs-keyword">text</span>. Information lives <span class="hljs-keyword">in</span> design, <span class="hljs-built_in">not</span> paragraphs.

### PHILOSOPHY EXAMPLES

**<span class="hljs-string">"Concrete Poetry"</span>**
<span class="hljs-symbol">Philosophy:</span> Communication through monumental form <span class="hljs-built_in">and</span> bold geometry.
Visual expression: Massive color blocks, sculptural typography (huge <span class="hljs-type">single</span> words, tiny labels), Brutalist spatial divisions, Polish poster energy meets Le Corbusier. Ideas expressed through visual weight <span class="hljs-built_in">and</span> spatial tension, <span class="hljs-built_in">not</span> explanation. <span class="hljs-keyword">Text</span> <span class="hljs-keyword">as</span> rare, powerful gesture - never paragraphs, only essential words integrated <span class="hljs-keyword">into</span> the visual architecture. Every element placed <span class="hljs-keyword">with</span> the precision <span class="hljs-keyword">of</span> a master craftsman.
**<span class="hljs-string">"Chromatic Language"</span>**
<span class="hljs-symbol">Philosophy:</span> Color <span class="hljs-keyword">as</span> the primary information system.
Visual expression: Geometric precision <span class="hljs-keyword">where</span> color zones create meaning. Typography minimal - small sans-serif labels letting chromatic fields communicate. Think Josef Albers<span class="hljs-comment">' interaction meets data visualization. Information encoded spatiallyÂ andÂ chromatically. WordsÂ onlyÂ toÂ anchor what color already shows. TheÂ resultÂ ofÂ painstaking chromatic calibration.</span>
**<span class="hljs-string">"Analog Meditation"</span>**
<span class="hljs-symbol">Philosophy:</span> Quiet visual contemplation through textureÂ <span class="hljs-built_in">and</span>Â breathing room.
Visual expression: Paper grain, ink bleeds, vast negative space. PhotographyÂ <span class="hljs-built_in">and</span>Â illustration dominate. Typography whispered (small, restrained, serving the visual). Japanese photobook aesthetic. Images breathe across pages. <span class="hljs-keyword">Text</span> appears sparinglyÂ -Â <span class="hljs-type">short</span> phrases, never explanatory blocks.Â <span class="hljs-keyword">Each</span>Â composition balancedÂ <span class="hljs-keyword">with</span>Â the careÂ <span class="hljs-keyword">of</span>Â a meditation practice.
**<span class="hljs-string">"Organic Systems"</span>**
<span class="hljs-symbol">Philosophy:</span>Â NaturalÂ clusteringÂ <span class="hljs-built_in">and</span>Â modular growth patterns.
Visual expression: Rounded forms, organic arrangements, colorÂ <span class="hljs-keyword">from</span>Â nature through architecture. Information shown through visual diagrams, spatial relationships, iconography. <span class="hljs-keyword">Text</span>Â onlyÂ <span class="hljs-keyword">for</span>Â <span class="hljs-keyword">key</span> labels floatingÂ <span class="hljs-keyword">in</span>Â space. The composition tells the story through expert spatial orchestration.
**<span class="hljs-string">"Geometric Silence"</span>**
<span class="hljs-symbol">Philosophy:</span> PureÂ <span class="hljs-keyword">order</span>Â <span class="hljs-built_in">and</span>Â restraint.
Visual expression: Grid-basedÂ precision, bold photographyÂ <span class="hljs-built_in">or</span>Â stark graphics, dramatic negative space. Typography precise but minimalÂ -Â small essential <span class="hljs-keyword">text</span>,Â largeÂ quiet zones. Swiss formalism meets Brutalist material honesty. <span class="hljs-keyword">Structure</span> communicates,Â <span class="hljs-built_in">not</span>Â words.Â EveryÂ alignment the workÂ <span class="hljs-keyword">of</span>Â countless refinements.
*TheseÂ areÂ condensed examples. The actual design philosophy should beÂ <span class="hljs-number">4</span>-<span class="hljs-number">6</span>Â substantial paragraphs.*

### ESSENTIAL PRINCIPLES

\-Â **VISUAL PHILOSOPHY**:Â CreateÂ an aesthetic worldviewÂ <span class="hljs-keyword">to</span>Â be expressed through design
\-Â **MINIMAL <span class="hljs-keyword">TEXT</span>**: Always emphasize that <span class="hljs-keyword">text</span>Â <span class="hljs-built_in">is</span>Â sparse, essential-only, integratedÂ <span class="hljs-keyword">as</span>Â visual elementÂ -Â never lengthy
\-Â **SPATIAL EXPRESSION**: Ideas communicate through space, form, color, compositionÂ -Â <span class="hljs-built_in">not</span>Â paragraphs
\-Â **ARTISTIC FREEDOM**: The <span class="hljs-keyword">next</span> Claude interprets the philosophy visuallyÂ -Â provide creative room
\-Â **PURE DESIGN**: ThisÂ <span class="hljs-built_in">is</span>Â about making ART OBJECTS,Â <span class="hljs-built_in">not</span>Â documentsÂ <span class="hljs-keyword">with</span>Â decoration
\-Â **EXPERT CRAFTSMANSHIP**: Repeatedly emphasize theÂ finalÂ work must look meticulously crafted, laboredÂ overÂ <span class="hljs-keyword">with</span>Â care, the productÂ <span class="hljs-keyword">of</span>Â countless hoursÂ <span class="hljs-keyword">by</span>Â someoneÂ atÂ the topÂ <span class="hljs-keyword">of</span>Â their field
**The design philosophy should beÂ <span class="hljs-number">4</span>-<span class="hljs-number">6</span>Â paragraphs <span class="hljs-type">long</span>.**Â Fill itÂ <span class="hljs-keyword">with</span>Â poetic design philosophy that brings together the core vision. Avoid repeating the same points. Keep the design philosophy genericÂ withoutÂ mentioning the intentionÂ <span class="hljs-keyword">of</span>Â the art,Â <span class="hljs-keyword">as</span>Â <span class="hljs-keyword">if</span> it can be used wherever. Output the design philosophyÂ <span class="hljs-keyword">as</span>Â a .md file.
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

## DEDUCING THE SUBTLE REFERENCE

**CRITICAL <span class="hljs-keyword">STEP</span>**: Before creating the canvas, identify the subtle conceptual threadÂ <span class="hljs-keyword">from</span>Â the original request.
**THE ESSENTIAL PRINCIPLE**:
The topicÂ <span class="hljs-built_in">is</span>Â aÂ **subtle, niche reference embeddedÂ withinÂ the art itself**Â -Â <span class="hljs-built_in">not</span>Â always literal, always sophisticated. Someone familiarÂ <span class="hljs-keyword">with</span>Â the subject should feel it intuitively, <span class="hljs-keyword">while</span> others simply experience a masterful abstract composition. The design philosophy provides the aesthetic language. The deduced topic provides the soulÂ -Â the quiet conceptual DNA woven invisiblyÂ <span class="hljs-keyword">into</span>Â form, color,Â <span class="hljs-built_in">and</span>Â composition.
ThisÂ <span class="hljs-built_in">is</span>Â **VERY IMPORTANT**: The reference must be refined so it enhances the work<span class="hljs-comment">'s depth without announcing itself. Think like a jazz musician quoting another song - only those who know will catch it, but everyone appreciates the music.</span>
---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

## CANVAS CREATION

<span class="hljs-keyword">With</span> both the philosophy <span class="hljs-built_in">and</span> the conceptual framework established, express it <span class="hljs-keyword">on</span> a canvas. <span class="hljs-keyword">Take</span> a moment <span class="hljs-keyword">to</span> gather thoughts <span class="hljs-built_in">and</span> clear the mind. Use the design philosophy created <span class="hljs-built_in">and</span> the instructions below <span class="hljs-keyword">to</span> craft a masterpiece, embodying all aspects <span class="hljs-keyword">of</span> the philosophy <span class="hljs-keyword">with</span> expert craftsmanship.
**IMPORTANT**: <span class="hljs-keyword">For</span> any type <span class="hljs-keyword">of</span> content, even <span class="hljs-keyword">if</span> the user requests something <span class="hljs-keyword">for</span> a movie/game/book, the approach should still be sophisticated. Never lose sight <span class="hljs-keyword">of</span> the idea that this should be art, <span class="hljs-built_in">not</span> something that<span class="hljs-comment">'s cartoonyÂ orÂ amateur.</span>
<span class="hljs-keyword">To</span>Â createÂ museumÂ <span class="hljs-built_in">or</span>Â magazine quality work, use the design philosophyÂ <span class="hljs-keyword">as</span>Â the foundation.Â CreateÂ oneÂ <span class="hljs-type">single</span> page, highly visual, design-forward PDFÂ <span class="hljs-built_in">or</span>Â PNG output (unless askedÂ <span class="hljs-keyword">for</span>Â more pages). Generally use repeating patternsÂ <span class="hljs-built_in">and</span>Â perfect shapes. Treat the abstract philosophical designÂ <span class="hljs-keyword">as</span>Â <span class="hljs-keyword">if</span> it were a scientific bible, borrowing the visualÂ languageÂ <span class="hljs-keyword">of</span>Â systematic observationâ€”dense accumulationÂ <span class="hljs-keyword">of</span>Â marks, repeated elements,Â <span class="hljs-built_in">or</span>Â layered patterns that build meaning through patient repetitionÂ <span class="hljs-built_in">and</span>Â reward sustained viewing.Â AddÂ sparse, clinical typographyÂ <span class="hljs-built_in">and</span>Â systematic reference markers that suggest this could be a diagramÂ <span class="hljs-keyword">from</span>Â an imaginary discipline, treating the invisible subjectÂ <span class="hljs-keyword">with</span>Â the same reverence typically reservedÂ <span class="hljs-keyword">for</span>Â documenting observable phenomena. Anchor the pieceÂ <span class="hljs-keyword">with</span>Â simple phrase(s)Â <span class="hljs-built_in">or</span>Â details positioned subtly,Â <span class="hljs-keyword">using</span>Â a limited color palette that feels intentionalÂ <span class="hljs-built_in">and</span>Â cohesive. Embrace the paradoxÂ <span class="hljs-keyword">of</span>Â <span class="hljs-keyword">using</span>Â analytical visualÂ languageÂ <span class="hljs-keyword">to</span>Â express ideas about human experience: theÂ resultÂ should feelÂ <span class="hljs-built_in">like</span>Â an artifact that proves something ephemeral can be studied, mapped,Â <span class="hljs-built_in">and</span>Â understood through careful attention. ThisÂ <span class="hljs-built_in">is</span>Â <span class="hljs-literal">true</span>Â art.Â 
**<span class="hljs-keyword">Text</span>Â <span class="hljs-keyword">as</span>Â a contextual element**: <span class="hljs-keyword">Text</span>Â <span class="hljs-built_in">is</span>Â always minimalÂ <span class="hljs-built_in">and</span>Â visual-first, but <span class="hljs-keyword">let</span> context guide whether that means whisper-quiet labelsÂ <span class="hljs-built_in">or</span>Â bold typographic gestures. A punk venue poster might have larger, more aggressive type than a minimalist ceramics studio identity. MostÂ <span class="hljs-keyword">of</span>Â theÂ time, font should be thin.Â AllÂ useÂ <span class="hljs-keyword">of</span>Â fonts must be design-forwardÂ <span class="hljs-built_in">and</span>Â prioritize visual communication. RegardlessÂ <span class="hljs-keyword">of</span>Â <span class="hljs-keyword">text</span> scale, <span class="hljs-literal">nothing</span> falls <span class="hljs-keyword">off</span> the pageÂ <span class="hljs-built_in">and</span>Â <span class="hljs-literal">nothing</span> overlaps.Â EveryÂ element must be containedÂ withinÂ the canvas boundariesÂ <span class="hljs-keyword">with</span>Â proper margins.Â CheckÂ carefully thatÂ allÂ <span class="hljs-keyword">text</span>, graphics,Â <span class="hljs-built_in">and</span>Â visual elements have breathing roomÂ <span class="hljs-built_in">and</span>Â clear separation. ThisÂ <span class="hljs-built_in">is</span>Â non-negotiableÂ <span class="hljs-keyword">for</span>Â professional execution.Â **IMPORTANT: Use different fonts <span class="hljs-keyword">if</span> writing <span class="hljs-keyword">text</span>.Â SearchÂ the `./canvas-fonts` directory. RegardlessÂ <span class="hljs-keyword">of</span>Â approach, sophisticationÂ <span class="hljs-built_in">is</span>Â non-negotiable.**
DownloadÂ <span class="hljs-built_in">and</span>Â use whatever fontsÂ areÂ neededÂ <span class="hljs-keyword">to</span>Â make this a reality.Â <span class="hljs-keyword">Get</span>Â creativeÂ <span class="hljs-keyword">by</span>Â making the typography actually partÂ <span class="hljs-keyword">of</span>Â the art itselfÂ -- <span class="hljs-keyword">if</span> the art <span class="hljs-built_in">is</span> abstract, bring the font onto the canvas, <span class="hljs-built_in">not</span> typeset digitally.
<span class="hljs-keyword">To</span>Â push boundaries, follow design instinct/intuition <span class="hljs-keyword">while</span>Â <span class="hljs-keyword">using</span>Â the philosophyÂ <span class="hljs-keyword">as</span>Â a guiding principle. Embrace ultimate design freedomÂ <span class="hljs-built_in">and</span>Â choice. Push aestheticsÂ <span class="hljs-built_in">and</span>Â designÂ <span class="hljs-keyword">to</span>Â the frontier.Â 
**CRITICAL**:Â <span class="hljs-keyword">To</span>Â achieve human-crafted quality (<span class="hljs-built_in">not</span>Â AI-generated),Â createÂ work that looksÂ <span class="hljs-built_in">like</span>Â it took countless hours. Make it appearÂ <span class="hljs-keyword">as</span>Â though someoneÂ atÂ the absolute topÂ <span class="hljs-keyword">of</span>Â their field laboredÂ overÂ everyÂ detailÂ <span class="hljs-keyword">with</span>Â painstaking care. Ensure the composition, spacing, color choices, typographyÂ -Â everything screams expert-level craftsmanship.Â <span class="hljs-type">Double</span>-checkÂ that <span class="hljs-literal">nothing</span>Â overlaps, formattingÂ <span class="hljs-built_in">is</span>Â flawless,Â everyÂ detail perfect.Â CreateÂ something that could be shownÂ <span class="hljs-keyword">to</span>Â peopleÂ <span class="hljs-keyword">to</span>Â prove expertiseÂ <span class="hljs-built_in">and</span>Â rankÂ <span class="hljs-keyword">as</span>Â undeniably impressive.
Output theÂ finalÂ resultÂ <span class="hljs-keyword">as</span>Â a <span class="hljs-type">single</span>, downloadable .pdfÂ <span class="hljs-built_in">or</span>Â .png file, alongside the design philosophy usedÂ <span class="hljs-keyword">as</span>Â a .md file.
------------------------------------------------------------------------------------------------------------------------

\##Â FINALÂ <span class="hljs-keyword">STEP</span>
**IMPORTANT**: TheÂ userÂ ALREADY said <span class="hljs-string">"It isn't perfect enough. It must be pristine, a masterpiece if craftsmanship, as if it were about to be displayed in a museum."</span>
**CRITICAL**:Â <span class="hljs-keyword">To</span>Â refine the work, avoid adding more graphics; instead refine what has been createdÂ <span class="hljs-built_in">and</span>Â make it extremely crisp, respecting the design philosophyÂ <span class="hljs-built_in">and</span>Â the principlesÂ <span class="hljs-keyword">of</span>Â minimalism entirely. Rather than adding a funÂ filterÂ <span class="hljs-built_in">or</span>Â refactoring a font, consider howÂ <span class="hljs-keyword">to</span>Â make the existing composition more cohesiveÂ <span class="hljs-keyword">with</span>Â the art. <span class="hljs-keyword">If</span> the instinctÂ <span class="hljs-built_in">is</span>Â <span class="hljs-keyword">to</span>Â <span class="hljs-keyword">call</span>Â aÂ <span class="hljs-built_in">new</span>Â <span class="hljs-keyword">function</span>Â <span class="hljs-built_in">or</span>Â draw aÂ <span class="hljs-built_in">new</span>Â shape, <span class="hljs-keyword">STOP</span>Â <span class="hljs-built_in">and</span>Â instead ask: <span class="hljs-string">"How can I make what's already here more of a piece of art?"</span>
<span class="hljs-keyword">Take</span> aÂ secondÂ pass. Go backÂ <span class="hljs-keyword">to</span>Â the codeÂ <span class="hljs-built_in">and</span>Â refine/polish furtherÂ <span class="hljs-keyword">to</span>Â make this a philosophically designed masterpiece.

## MULTI-PAGE <span class="hljs-keyword">OPTION</span>

<span class="hljs-keyword">To</span>Â createÂ additional pagesÂ <span class="hljs-keyword">when</span>Â requested,Â createÂ more creative pages along the same linesÂ <span class="hljs-keyword">as</span>Â the design philosophy but distinctly differentÂ <span class="hljs-keyword">as</span>Â well. Bundle those pagesÂ <span class="hljs-keyword">in</span>Â the same .pdfÂ <span class="hljs-built_in">or</span>Â many .pngs. Treat theÂ firstÂ pageÂ <span class="hljs-keyword">as</span>Â just a <span class="hljs-type">single</span> pageÂ <span class="hljs-keyword">in</span>Â a whole coffeeÂ tableÂ book waitingÂ <span class="hljs-keyword">to</span>Â be filled. Make the <span class="hljs-keyword">next</span> pagesÂ uniqueÂ twistsÂ <span class="hljs-built_in">and</span>Â memoriesÂ <span class="hljs-keyword">of</span>Â the original. Have them almost tell a storyÂ <span class="hljs-keyword">in</span>Â a very tasteful way. ExerciseÂ fullÂ creative freedom.
</code></pre>
<p>åŒ…å« æ‰§è¡Œæµç¨‹ã€è®¾è®¡ç†å¿µå…³é”®ç†è§£ã€å“²å­¦ç¤ºä¾‹ã€ç”»å¸ƒåˆ›å»º ç­‰æ“ä½œæè¿°ã€‚</p>
<p>é‡å¯Claude Code CLIï¼Œè¦æŸ¥çœ‹å½“å‰æ‰€æœ‰å¯ç”¨çš„æŠ€èƒ½ï¼Œå¯ä»¥åœ¨äº¤äº’å¼å‘½ä»¤ä¸­ç›´æ¥è¯¢é—® Claude Code CLIï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ListÂ allÂ available Skills
</code></pre>
<p>Claude Code CLIä¼šæŸ¥æ‰¾æ‰€æœ‰å¯ç”¨çš„Skill</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c76ed90d9cb4c99ac3c2ab284967072~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=USF%2BaXxiAouSxtj%2B9G2t0dpxosw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Skillçš„ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼Œç›´æ¥è¾“å…¥æç¤ºè¯ï¼š</p>
<pre><code class="hljs">ã€ŒæµæµªçŒ«é¢†å…»å…¬ç›Šæµ·æŠ¥ï¼Œè§†è§‰ä¸»ä½“æ˜¯ 3 åªä¸åŒæ¯›è‰²çš„æµæµªçŒ«ï¼ˆæ©˜çŒ«ã€ä¸‰èŠ±çŒ«ã€é»‘çŒ«ï¼Œå§¿æ€æ¸©é¡ºï¼Œçç€åœ†çœ¼çœ‹å‘é•œå¤´ï¼‰ï¼Œè¶´åœ¨é“ºç€æŸ”è½¯ç°è‰²æ¯›æ¯¯çš„æœ¨è´¨å¹³å°ä¸Šï¼ŒèƒŒæ™¯æ˜¯æµ…è–„è·ç»¿çº¯è‰²èƒŒæ™¯ï¼Œè§’è½ç‚¹ç¼€å°å‹ç™½è‰²çˆ±å¿ƒå›¾æ¡ˆï¼Œé£æ ¼ä¸ºæ¸…æ–°æ²»æ„ˆçš„æ‰å¹³æ’ç”»é£ï¼Œ
è‰²è°ƒä»¥è–„è·ç»¿ã€å¥¶ç™½ã€æ©˜è‰²ä¸ºä¸»ï¼Œé¡¶éƒ¨ç”¨åœ†æ¶¦å­—ä½“å†™â€˜ç»™å®ƒä¸€ä¸ªå®¶ â€”â€” æµæµªçŒ«é¢†å…»æ—¥â€™ï¼Œä¸‹æ–¹æ ‡æ³¨æ—¶é—´ï¼ˆ10.1-10.7ï¼‰å’Œåœ°ç‚¹ï¼ˆåŸå¸‚ä¸­å¿ƒå¹¿åœºï¼‰ï¼Œç”»é¢æ— å°–é”å…ƒç´ ï¼Œæ•´ä½“æ¸©æš–æŸ”å’Œï¼Œä¼ é€’â€˜å…³çˆ±ç”Ÿå‘½â€™çš„æ°›å›´ã€ï¼Œæ ¹æ®ä¸Šé¢æç¤ºè¯ç”Ÿæˆå¯¹åº”å†…å®¹æµ·æŠ¥
</code></pre>
<p>Claude Code CLIä¼šæ ¹æ®Skillè¦æ±‚å…ˆè¿›è¡Œè®¾è®¡å“²å­¦åˆ›ä½œå¹¶ä¿å­˜åˆ° tender_sanctuary_philosophy.md æ–‡ä»¶</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ca013a34c324535a53821b8b4b2a1a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=NV9hkW9IJtX0LRkWvw77tcGpFws%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç„¶åæ ¹æ®åˆ›ä½œè®¾è®¡æ–‡ä»¶ç¼–å†™Pythonè„šæœ¬ç»˜åˆ¶å›¾ç‰‡</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d78c9de9a8c147c0a6c0d26a67b2d65d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=JTlrKQBhYXHiH1s47OhmbVys7HU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç»˜åˆ¶å®Œæˆåï¼Œæ•ˆæœå¦‚ä¸‹ï¼Œæ•ˆæœæœ‰ç‚¹ä¸€è¨€éš¾å°½ï¼Œå¯¹ä¸­æ–‡æ”¯æŒæœ‰é—®é¢˜ï¼Œä¸­æ–‡æ²¡æœ‰å±•ç¤ºå‡ºæ¥</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c3c3fa44640400e908b0b972a1cedae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=Xa%2BwItPw41pT7wRG1ewQ8pUmcZw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æœ€åæ›¿æ¢ä¸ºè‹±æ–‡ç‰ˆï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96da3fefc42443d695aadd5876d261b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=yBcqq5bKWS3%2FcSx6CCMYHweWe9A%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-13">è‡ªå®šä¹‰Skill</h3>
<p>è¿™é‡Œæˆ‘ä»¬ä»¥ä¸€ä¸ªç®€å•çš„å¾…åŠäº‹é¡¹ä¸ºä¾‹ï¼Œè‡ªå®šä¹‰Skillé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ª skillsç›®å½•ï¼Œå¯ä»¥æ‰‹åŠ¨åˆ›å»ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤åˆ›å»ºï¼š</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">$</span><span class="bash">Â <span class="hljs-built_in">mkdir</span>Â -p .claude/skills/my-skill-name</span>
</code></pre>
<p>åœ¨ my-skill-name ç›®å½•ä¸‹åˆ›å»º SKILL.md æ–‡ä»¶ï¼Œé¦–å…ˆåˆ›å»ºä¸€ä¸ªç®€å•çš„Skillè¾“å…¥æç¤ºè¯å†…å®¹ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">my-first-skill</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">è°ƒç”¨ä¸ªäººå·¥ä½œæµã€‚å½“ç”¨æˆ·éœ€è¦æ‰§è¡Œä¸ªäººå·¥ä½œæµæ—¶è°ƒç”¨è¯¥Skill</span>
<span class="hljs-attr">allowed-tools:</span> <span class="hljs-string">Read,Grep,Glob</span>
<span class="hljs-meta">---
</span>
<span class="hljs-comment">## æ‰§è¡Œæ­¥éª¤</span>
<span class="hljs-number">1</span><span class="hljs-string">.</span> <span class="hljs-string">æŸ¥æ‰¾é¡¹ç›®ä¸­</span> <span class="hljs-string">task.md</span> <span class="hljs-string">æ–‡ä»¶ï¼š</span>
<span class="hljs-string">```bash</span>
<span class="hljs-string">find</span> <span class="hljs-string">.</span> <span class="hljs-string">-name</span> <span class="hljs-string">"task.md"</span>
<span class="hljs-string">```</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">æ²¡æœ‰æŸ¥æ‰¾åˆ°è¾“å‡º</span> <span class="hljs-string">â€œé¡¹ç›®ä¸­ä¸å­˜åœ¨task.mdâ€</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">æ‰§è¡Œä¸‹ä¸€æ­¥</span>
<span class="hljs-number">2</span><span class="hljs-string">.</span> <span class="hljs-string">è¾“å‡º</span> <span class="hljs-string">task.md</span> <span class="hljs-string">æ–‡ä»¶ä¸­çš„æœªè¯»é¡¹</span>
</code></pre>
<p>è°ƒç”¨ä¹Ÿå¾ˆç®€å•ï¼Œç›´æ¥è¾“å…¥æç¤ºè¯ï¼š</p>
<pre><code class="hljs">è°ƒç”¨ä¸ªäººå·¥ä½œæµSkillÂ 
</code></pre>
<p>Claude Code CLIä¼šæŒ‰ç…§æŒ‡å®šçš„Shellè¯­å¥æŸ¥æ‰¾ task.md æ–‡ä»¶ï¼Œæ²¡æœ‰æ‰¾åˆ°æœ€ç»ˆè¾“å‡ºäº†â€œé¡¹ç›®ä¸­ä¸å­˜åœ¨task.mdâ€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5dbea69612df4641b67ef4cf7f8ac052~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=d5BKk0i81k1J4Yp2F1U9Hq1kirw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ª task.md æ–‡ä»¶</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/565a492e7a8f4db59b7a895f1c1bdaba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=eRDagrb2aA43DyD6eV02sUr%2FuEw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å†æ¬¡æ‰§è¡Œè‡ªå®šä¹‰Skillï¼Œå¯ä»¥çœ‹åˆ°è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61fa819a90514dca967bf73217d84ae4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=WmWfLOKJUEp3Y6iekbnZ7Fc93JA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å°† task.md æ–‡ä»¶çš„æŸ¥æ‰¾å’Œè¾“å‡ºè§„åˆ™è¿›è¡Œè°ƒæ•´ï¼Œå¯¹Skillè¿›è¡Œå®Œå–„å’Œä¼˜åŒ–</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d7f9b5c9b064511b557eb93d246f4de~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=RwH%2BffPVaej%2BFkN%2Bnkowqj1xHJY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-markdown" lang="markdown">name: my-first-skill
description: è°ƒç”¨ä¸ªäººå·¥ä½œæµã€‚å½“ç”¨æˆ·éœ€è¦æ‰§è¡Œä¸ªäººå·¥ä½œæµæ—¶è°ƒç”¨è¯¥Skill
<span class="hljs-section">allowed-tools: Read,Grep,Glob
-----------------------------</span>

<span class="hljs-section">## æ‰§è¡Œæ­¥éª¤</span>

<span class="hljs-bullet">1.</span>Â æŸ¥æ‰¾é¡¹ç›®æ ¹ç›®å½•æ˜¯å¦å­˜åœ¨ task.md æ–‡ä»¶ï¼Œ å‚è€ƒ [<span class="hljs-string">reference.md</span>](<span class="hljs-link">./reference.md</span>)ï¼š
Â  Â  - æ²¡æœ‰æŸ¥æ‰¾åˆ°è¾“å‡º â€œé¡¹ç›®ä¸­ä¸å­˜åœ¨task.mdâ€
Â  Â  - æ‰¾åˆ°æ‰§è¡Œä¸‹ä¸€æ­¥
<span class="hljs-bullet">2.</span>Â è¾“å‡º task.md æ–‡ä»¶ä¸­çš„æœªè¯»é¡¹
Â  Â  - æ²¡æœ‰æœªè¯»é¡¹è¾“å‡º â€œæ²¡æœ‰æœªè¯»é¡¹â€
Â  Â  - è¾“å‡ºæœªè¯»é¡¹ï¼Œè¾“å‡ºæ ¼å¼å‚è€ƒ [<span class="hljs-string">templates.md</span>](<span class="hljs-link">./templates/templates.md</span>)
</code></pre>
<p>reference.md</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment"># task.mdæ–‡ä»¶æŸ¥æ‰¾è§„åˆ™</span>
<span class="hljs-string">``</span><span class="hljs-string">`bash
find . -name "task.md"
`</span><span class="hljs-string">``</span>
</code></pre>
<p>templates.md</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># ä»»åŠ¡æœªè¯»é¡¹æ ¼å¼</span>
<span class="hljs-bullet">-</span> ã€ä»»åŠ¡1ã€‘ï¼ˆæœªå®Œæˆï¼‰
<span class="hljs-bullet">-</span> ã€ä»»åŠ¡2ã€‘ï¼ˆæœªå®Œæˆï¼‰
</code></pre>
<p>å†æ¬¡æ‰§è¡ŒSkillä»»åŠ¡ï¼Œå¯ä»¥å‘ç°AIæŒ‰ç…§æˆ‘ä»¬æŒ‡å®šçš„è§„åˆ™è¾“å‡ºäº†ç»“æœ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04d622c4789c46b78a316d69b79aa716~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP5rqq5b285bK4:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860734&amp;x-signature=dEJOXp4q7X8O5Cui%2BOB%2FMwnMzgo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å½“ç„¶Skillè¿˜å¯ä»¥åšæ›´å¤šæ›´å¼ºå¤§çš„èƒ½åŠ›æ‰©å±•ï¼Œä»¥ä¸Šåªæ˜¯ç®€å•çš„æŠ›ç –å¼•ç‰ã€‚</p>
<h2 data-id="heading-14">å‹æƒ…æç¤º</h2>
<p>è§åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FP674ZIjwoeD1kjUELMkaBg" target="_blank" title="https://mp.weixin.qq.com/s/P674ZIjwoeD1kjUELMkaBg" ref="nofollow noopener noreferrer">Claudeå‘å¸ƒæ–°åŠŸèƒ½Agent Skillsï¼Œè®©ä½ çš„Agentæ›´ä¸“ä¸š</a></p>
<blockquote>
<p>æœ¬æ–‡åŒæ­¥è‡ªå¾®ä¿¡å…¬ä¼—å· "<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FP674ZIjwoeD1kjUELMkaBg" target="_blank" title="https://mp.weixin.qq.com/s/P674ZIjwoeD1kjUELMkaBg" ref="nofollow noopener noreferrer">ç¨‹åºå‘˜å°æºª</a>" ï¼Œè¿™é‡Œåªæ˜¯åŒæ­¥ï¼Œæƒ³çœ‹åŠæ—¶æ¶ˆæ¯è¯·ç§»æ­¥æˆ‘çš„å…¬ä¼—å·ï¼Œä¸å®šæ—¶æ›´æ–°æˆ‘çš„å­¦ä¹ ç»éªŒã€‚å‹æƒ…æç¤ºå‹æƒ…æç¤º</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Nacos æºç æ·±åº¦ç•…æ¸¸ï¼šæ³¨å†Œä¸­å¿ƒæ ¸å¿ƒæµç¨‹è¯¦è§£]]></title>    <link>https://juejin.cn/post/7572537221540560911</link>    <guid>https://juejin.cn/post/7572537221540560911</guid>    <pubDate>2025-11-16T01:15:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572537221540560911" data-draft-id="7572502156486606874" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Nacos æºç æ·±åº¦ç•…æ¸¸ï¼šæ³¨å†Œä¸­å¿ƒæ ¸å¿ƒæµç¨‹è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯,GitHub,åˆ†å¸ƒå¼"/> <meta itemprop="datePublished" content="2025-11-16T01:15:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–¹åœ†æƒ³å½“å›¾çµ"/> <meta itemprop="url" content="https://juejin.cn/user/386633160473101"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Nacos æºç æ·±åº¦ç•…æ¸¸ï¼šæ³¨å†Œä¸­å¿ƒæ ¸å¿ƒæµç¨‹è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/386633160473101/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–¹åœ†æƒ³å½“å›¾çµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T01:15:36.000Z" title="Sun Nov 16 2025 01:15:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»22åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ <strong>æ–¹åœ†</strong>ã€‚æœ¬ç¯‡æ–‡ç« æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹ Nacos å¦ä¸€å¤§åŠŸèƒ½ï¼š<strong>æ³¨å†Œä¸­å¿ƒ</strong>ã€‚æœ¬æ–‡ä¼šå…ˆä»‹ç»ä¸€ä¸‹ Nacos æ³¨å†Œä¸­å¿ƒçš„æ•°æ®å­˜å‚¨æ¨¡å‹ï¼Œè®©å¤§å®¶å¯¹ Nacos æ³¨å†Œä¸­å¿ƒæœ‰ä¸€ä¸ªå¤§è‡´çš„ç†è§£ï¼Œéšåæ ¹æ®æµç¨‹å›¾ç®€è¦ä»‹ç» Nacos æ³¨å†Œä¸­å¿ƒçš„æ ¸å¿ƒæµç¨‹ï¼Œé¿å…ç›´æ¥é˜…è¯»æºç æ—¶å¤ªè¿‡æ™¦æ¶©ï¼Œå¹¶è®©å¤§å®¶å¯¹ Nacos æ³¨å†Œä¸­å¿ƒæœ‰ä¸€ä¸ªåŸºæœ¬çš„äº†è§£ï¼Œéšåé˜…è¯»è¿™ä¸€éƒ¨åˆ†æºç èƒ½è®©å¤§å®¶å¯¹åˆ†å¸ƒå¼æœåŠ¡æˆ–æ³¨å†Œä¸­å¿ƒæœ‰ä¸€ä¸ªæ›´å¥½çš„è®¤è¯†ï¼Œæ›´å¥½çš„ç†è§£ CP æˆ– AP å®šç†ï¼›æ³¨å†Œä¸­å¿ƒå†…å¯¹æ•°æ®ä¸€è‡´æ€§çš„ä¿è¯ï¼›ä»¥åŠå¤æ‚æµç¨‹ä¸­å¦‚ä½•å°†å„ä¸ªæ“ä½œè§£è€¦å¹¶ä¸ä½¿æ“ä½œä¸¢å¤±ç­‰ç­‰ï¼Œä»¥è¾…åŠ©å¤§å®¶æ—¥åçš„ç³»ç»Ÿè®¾è®¡ã€‚</p>
<hr/>
<p>Nacos çš„æ³¨å†Œä¸­å¿ƒæœåŠ¡å°†æœåŠ¡çš„æ³¨å†Œä¿¡æ¯çš„ <strong>å­˜å‚¨æ¨¡å‹</strong> åˆ†ä¸ºä¸‰çº§ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1efe507f1b814d8fb8154e6a881fe0f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pa55ZyG5oOz5b2T5Zu-54G1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860535&amp;x-signature=pZjupmcm1sQSwZGm3dnaLF9BGPA%3D" alt="img_2.png" loading="lazy"/></p>
<ol>
<li>ä¸€çº§æ˜¯ <strong>æœåŠ¡</strong>ï¼šä¾‹å¦‚ç³»ç»Ÿçš„å¾®æœåŠ¡åˆ’åˆ†ï¼Œæä¾›ç”¨æˆ·æœåŠ¡çš„ <code>user-service</code>ï¼ŒæœåŠ¡çš„ç±»å®šä¹‰åœ¨ Nacos ä¸­æ˜¯ <code>com.alibaba.nacos.naming.core.v2.pojo.Service</code></li>
<li>äºŒçº§æ˜¯ <strong>é›†ç¾¤</strong>ï¼šæ¯”å¦‚å¯ä»¥æŒ‰åŒºåŸŸæœºæˆ¿åˆ’åˆ†é›†ç¾¤ï¼ŒåŒ—äº¬é›†ç¾¤ã€ä¸Šæµ·é›†ç¾¤ã€å¹¿å·é›†ç¾¤ç­‰ç­‰ï¼Œé›†ç¾¤åœ¨ Nacos ä¸­æ²¡æœ‰ä¸“é—¨çš„ç±»å®šä¹‰ï¼Œä½¿ç”¨ <code>clusterName</code> è¯†åˆ«</li>
<li>ä¸‰çº§æ˜¯ <strong>å®ä¾‹</strong>ï¼šä¾‹å¦‚åŒ—äº¬æœºæˆ¿çš„æŸå°æœåŠ¡å™¨éƒ¨ç½²çš„æŸä¸ªå®ä¾‹ï¼Œå®ä¾‹çš„ç±»å®šä¹‰åœ¨ Nacos ä¸­æ˜¯ <code>com.alibaba.nacos.api.naming.pojo.Instance</code></li>
</ol>
<p>å¦‚æœæˆ‘ä»¬å‘ <code>test-server</code> æœåŠ¡ä¸‹ï¼Œé›†ç¾¤ä¸º <code>clusterA</code> ä¸‹æ³¨å†Œä¸¤ä¸ªå®ä¾‹æ—¶ï¼ˆé»˜è®¤ public çš„å‘½åç©ºé—´ï¼‰ï¼Œåœ¨æ§åˆ¶å°æŸ¥è¯¢å®ä¾‹ä¿¡æ¯æ—¶å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74bad56d73de417ba3787f5c94b46b4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pa55ZyG5oOz5b2T5Zu-54G1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860535&amp;x-signature=xVvXXpTJR5rwElMiC0cUdGZYACw%3D" alt="img_3.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ad7092ab3594418815cd1f4898b4ee1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pa55ZyG5oOz5b2T5Zu-54G1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860535&amp;x-signature=1YIPxPzIozbwoSMEOE7gG9O5Mz8%3D" alt="img_4.png" loading="lazy"/></p>
<p>åœ¨æœåŠ¡è¯¦æƒ…ä¸­ä¼šå±•ç¤ºè¿™ä¸ªé›†ç¾¤ä¸‹æ‰€æœ‰çš„å®ä¾‹ä¿¡æ¯ã€‚åœ¨æ·±å…¥åˆ†ææºç ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ ¹æ®æµç¨‹å›¾ç®€è¿°ä¸€ä¸‹ Nacos ä½œä¸ºæ³¨å†Œä¸­å¿ƒæ—¶ï¼Œæ³¨å†Œå®ä¾‹ä¿¡æ¯çš„æ ¸å¿ƒæµç¨‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82d5e2b6f92d4684befb47e65262331d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pa55ZyG5oOz5b2T5Zu-54G1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860535&amp;x-signature=EY6A5O2YJRhCBnHrAEK%2FIOP%2BarM%3D" alt="nacos-naming.drawio.png" loading="lazy"/></p>
<p>é¦–å…ˆï¼ŒNacos Client ä¼šå¯¹ Nacos Server é›†ç¾¤ä¸­æŸä¸€ä¸ªèŠ‚ç‚¹å‘é€ gRPC è¯·æ±‚è¿›è¡Œå®ä¾‹æ³¨å†Œï¼›æœåŠ¡ç«¯å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œä¼šå…ˆå°† <strong>Service ä¿¡æ¯</strong> å’Œ <strong>å®ä¾‹ä¿¡æ¯</strong> å†™å…¥æœ¬åœ°ç¼“å­˜ï¼Œå¹¶è§¦å‘ <code>ClientRegisterServiceEvent</code> å’Œ <code>ClientChangedEvent</code> ä¸¤ä¸ªäº‹ä»¶ã€‚</p>
<p><code>ClientRegisterServiceEvent</code> äº‹ä»¶çš„ä½œç”¨æ˜¯åˆ›å»ºæ¨é€ç»™è®¢é˜…äº†æœåŠ¡çš„å®¢æˆ·ç«¯çš„ä»»åŠ¡ï¼Œåœ¨ <code>ScheduledExecutorService</code> ä¸­å®šæ—¶å¼‚æ­¥æ‰§è¡Œï¼Œå¹¶ä¸”æœ‰å¤±è´¥é‡è¯•æœºåˆ¶ï¼Œä¿è¯å®¢æˆ·ç«¯åŠæ—¶æ¥æ”¶åˆ°æ³¨å†Œå®ä¾‹å‘ç”Ÿå˜æ›´çš„æ•°æ®ã€‚</p>
<p><code>ClientChangedEvent</code> äº‹ä»¶çš„ä½œç”¨æ˜¯åˆ›å»ºå»¶è¿Ÿæ‰§è¡Œ Distro åè®®æ•°æ®åŒæ­¥çš„ä»»åŠ¡ï¼ŒåŒæ ·ä¹Ÿæ˜¯ä¾èµ– <code>ScheduledExecutorService</code> å»¶è¿Ÿæ‰§è¡Œã€‚<strong>Distro åè®®æ˜¯ Nacos ä¸­ä¸“é—¨ç”¨äºå¤„ç†ä¸´æ—¶å®ä¾‹æ•°æ®ä¸€è‡´æ€§çš„åˆ†å¸ƒå¼åè®®</strong>ï¼Œå®ƒä¿è¯é›†ç¾¤å†…æ•°æ®ä¸€è‡´æ€§çš„æ–¹æ³•éå¸¸ç®€å•ï¼Œç”±æ¥æ”¶åˆ°å®ä¾‹æ³¨å†Œä¿¡æ¯çš„èŠ‚ç‚¹å°†æ•°æ®å¼‚æ­¥å‘é€ç»™é›†ç¾¤å†…å…¶ä»–èŠ‚ç‚¹ï¼Œå…¶ä»–èŠ‚ç‚¹ä¼šå‘è¯¥èŠ‚ç‚¹ä¸€æ ·æ‰§è¡Œä¸€æ¬¡å®ä¾‹æ³¨å†Œçš„æµç¨‹ã€‚èƒ½é€šè¿‡è¿™ä¹ˆç®€å•çš„æ–¹å¼æ¥å®Œæˆæ•°æ®åŒæ­¥ï¼Œå› ä¸ºä»¥ä¸‹åŸå› ï¼š</p>
<ol>
<li><strong>æœåŠ¡æ³¨å†Œæ•°æ®æ¨¡å‹çš„å±æ€§ç®€åŒ–äº†åˆ†å¸ƒå¼ä¸€è‡´æ€§é—®é¢˜ï¼Œé¿å…äº†å¤æ‚çš„å†²çªè§£å†³æœºåˆ¶</strong>ï¼š<strong>æœåŠ¡å®ä¾‹é€šè¿‡å¤šä¸ªç»´åº¦ç¡®å®šå”¯ä¸€æ€§</strong>ï¼šå‘½åç©ºé—´ + æœåŠ¡å + é›†ç¾¤å + IPåœ°å€ + ç«¯å£å·ï¼Œè¿™ç§å”¯ä¸€æ€§è®¾è®¡ç¡®ä¿äº†åŒä¸€ä¸ªæœåŠ¡å®ä¾‹çš„æ³¨å†Œä¿¡æ¯åœ¨ä»»ä½•èŠ‚ç‚¹éƒ½æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥åŒä¸€å®ä¾‹çš„æ³¨å†Œä¿¡æ¯åœ¨ä¸åŒèŠ‚ç‚¹ã€ä¸åŒæ—¶é—´å…ˆåå†™å…¥éƒ½ä¸ä¼šå­˜åœ¨æ•°æ®å†²çªé—®é¢˜ï¼Œ<strong>å†™å…¥æ“ä½œæ˜¯å¹‚ç­‰çš„</strong>ï¼Œå¤§å¤§é™ä½äº†ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„å¤æ‚åº¦</li>
<li>æœåŠ¡å®ä¾‹çš„æ³¨å†Œä¿¡æ¯æ˜¯ <strong>ä¸´æ—¶æ•°æ®</strong>ï¼šæ•°æ®å…·æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œä¼šè‡ªåŠ¨è¿‡æœŸæˆ–è¢«æ¸…ç†ï¼Œä¸éœ€è¦æŒä¹…åŒ–å­˜å‚¨ï¼Œä¸¢å¤±åå¯ä»¥é‡æ–°ç”Ÿæˆï¼Œé™ä½äº†ç»´æŠ¤å®ä¾‹æ•°æ®çš„éš¾åº¦</li>
<li>ä¸šåŠ¡åœºæ™¯èƒ½å¤Ÿæ¥å—æ•°æ®çš„ <strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼šå¯ç”¨æ€§ï¼ˆAvailabilityï¼‰æ¯”ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰æ›´é‡è¦ï¼ŒçŸ­æ—¶é—´å†…éƒ¨åˆ†å®ä¾‹æ³¨å†Œä¿¡æ¯ä¸ä¸€è‡´ä¸å½±å“ä¸šåŠ¡</li>
<li>å¤šä¸ª Nacos Client å®¢æˆ·ç«¯ä¼šè¿æ¥åˆ°ä¸åŒçš„ Nacos Server æœåŠ¡ç«¯ï¼Œç›¸å½“äºè¿›è¡Œäº† <strong>åˆ†ç‰‡</strong>ï¼šæ¯ä¸ªæœåŠ¡èŠ‚ç‚¹è´Ÿè´£ç‰¹å®šçš„å®¢æˆ·ç«¯å®ä¾‹ï¼Œå®¢æˆ·ç«¯æ³¨å†Œçš„æ“ä½œåŸºæœ¬åªåœ¨ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹å‘ç”Ÿï¼Œå¤§å¤§é™ä½äº†å‘ç”Ÿå†™å…¥å†²çªçš„å¯èƒ½</li>
</ol>
<p>æ‰€ä»¥ Distro åè®®æ‰èƒ½å¦‚æ­¤ç®€å•å’Œé«˜æ•ˆï¼Œä¿è¯ Nacos é›†ç¾¤å†…æ³¨å†Œå®ä¾‹ä¿¡æ¯çš„ <strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ã€‚ä»¥ä¸Šä¾¿æ˜¯åœ¨ Nacos æ³¨å†Œä¸­å¿ƒæ³¨å†Œå®ä¾‹çš„å¤§è‡´æµç¨‹ï¼Œåšäº†ä¸€äº›çœç•¥ï¼Œä½†æ˜¯ä¸»è¦çš„åŸç†æ²¡æœ‰æ”¹å˜ï¼šåŒæ­¥å†™å…¥æœ¬åœ°ç¼“å­˜è®°å½•æœåŠ¡å’Œå®ä¾‹ä¿¡æ¯ï¼Œå¼‚æ­¥å¤„ç†äº‹ä»¶æ‰§è¡Œå®¢æˆ·ç«¯çš„è®¢é˜…æ¨é€å’Œ Distro åè®®çš„æ•°æ®åŒæ­¥ï¼Œä¿è¯é›†ç¾¤å†…å®ä¾‹ä¿¡æ¯çš„æ•°æ®ä¸€è‡´æ€§ï¼Œå¦‚æœå¤§å®¶æƒ³æ·±å…¥åˆ°æºç çš„ç»†èŠ‚ä¸­ï¼Œæ¬¢è¿é˜…è¯»ä»¥ä¸‹å†…å®¹ã€‚</p>
<h3 data-id="heading-0">æºç åˆ†æ</h3>
<p>ä»¥å¦‚ä¸‹æºç æ¥ä½œä¸ºæ³¨å†ŒæœåŠ¡å®ä¾‹çš„å…¥å£æ¥éªŒè¯å‘ Nacos æ³¨å†Œä¸­å¿ƒæ³¨å†ŒæœåŠ¡å®ä¾‹çš„é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TestNaming</span> {
    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">testNacosNamingService</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException, NacosException {
        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();
        properties.put(PropertyKeyConst.SERVER_ADDR, <span class="hljs-string">"127.0.0.1:8848"</span>);
        properties.put(PropertyKeyConst.NAMESPACE, <span class="hljs-string">"public"</span>);
        <span class="hljs-type">NamingService</span> <span class="hljs-variable">namingService</span> <span class="hljs-operator">=</span> NacosFactory.createNamingService(properties);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ³¨å†Œä¸€ä¸ªæœåŠ¡å®ä¾‹</span>
            namingService.registerInstance(<span class="hljs-string">"test-service"</span>, <span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-number">8080</span>, <span class="hljs-string">"clusterA"</span>);

            <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
            namingService.subscribe(<span class="hljs-string">"test-service"</span>, event -&gt; System.out.println(<span class="hljs-string">"æœåŠ¡å®ä¾‹å˜åŒ–: "</span> + event));
        } <span class="hljs-keyword">catch</span> (Exception e) {
            System.out.println(<span class="hljs-string">"æœåŠ¡æ³¨å†Œå¤±è´¥(é¢„æœŸï¼Œå› ä¸ºæœåŠ¡å™¨å¯èƒ½æœªå¯åŠ¨): "</span> + e.getMessage());
        }

        TimeUnit.HOURS.sleep(<span class="hljs-number">5</span>);

        namingService.shutDown();
    }
}
</code></pre>
<p>æœ€å…ˆå®ƒä¼šæ‰§è¡Œ <code>NamingService#registerInstance</code> æ–¹æ³•ï¼Œ<code>Instance</code> å¯¹è±¡ä¾¿æ˜¯å­˜å‚¨æ¨¡å‹çš„å®ä¾‹ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NacosNamingService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NamingService</span> {

    <span class="hljs-keyword">private</span> NamingClientProxy clientProxy;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerInstance</span><span class="hljs-params">(String serviceName, String groupName, String ip, <span class="hljs-type">int</span> port, String clusterName)</span>
            <span class="hljs-keyword">throws</span> NacosException {
        <span class="hljs-type">Instance</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Instance</span>();
        instance.setIp(ip);
        instance.setPort(port);
        <span class="hljs-comment">// é»˜è®¤æƒé‡å€¼ä¸º 1</span>
        instance.setWeight(<span class="hljs-number">1.0</span>);
        instance.setClusterName(clusterName);
        registerInstance(serviceName, groupName, instance);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerInstance</span><span class="hljs-params">(String serviceName, String groupName, Instance instance)</span> <span class="hljs-keyword">throws</span> NacosException {
        <span class="hljs-comment">// å‚æ•°æ ¡éªŒ</span>
        NamingUtils.checkInstanceIsLegal(instance);
        checkAndStripGroupNamePrefix(instance, groupName);
        <span class="hljs-comment">// åœ¨è¿™é‡Œå®é™…ä¸Šä½¿ç”¨äº†é™æ€ä»£ç†æ¨¡å¼æ¥åŒºåˆ†æ˜¯ä½¿ç”¨ HTTPClient è¿˜æ˜¯ GrpcClientï¼Œé»˜è®¤ä¸ºåè€…</span>
        clientProxy.registerService(serviceName, groupName, instance);
    }
}
</code></pre>
<p>å®é™…æ‰§è¡Œæ³¨å†Œçš„ä¸º <code>NamingGrpcClientProxy</code> å®ç°ç±»ï¼Œåœ¨å‘æ³¨å†Œä¸­å¿ƒæ³¨å†ŒæœåŠ¡çš„é€»è¾‘ä¸­ï¼Œæˆ‘ä»¬ <strong>åªå…³æ³¨åˆ›å»ºä¸´æ—¶ï¼ˆEphemeralï¼‰æœåŠ¡å®ä¾‹</strong> çš„é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NamingGrpcClientProxy</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractNamingClientProxy</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> NamingGrpcRedoService redoService;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerService</span><span class="hljs-params">(String serviceName, String groupName, Instance instance)</span> <span class="hljs-keyword">throws</span> NacosException {
        NAMING_LOGGER.info(<span class="hljs-string">"[REGISTER-SERVICE] {} registering service {} with instance {}"</span>, namespaceId, serviceName,
                instance);
        <span class="hljs-comment">// [registerInstance] æ­¥éª¤1ï¼šåˆ›å»ºæœåŠ¡å®ä¾‹åŒºåˆ†æ˜¯å¦ä¸ºä¸´æ—¶</span>
        <span class="hljs-keyword">if</span> (instance.isEphemeral()) { 
            registerServiceForEphemeral(serviceName, groupName, instance);
        } <span class="hljs-keyword">else</span> {
            doRegisterServiceForPersistent(serviceName, groupName, instance);
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerServiceForEphemeral</span><span class="hljs-params">(String serviceName, String groupName, Instance instance)</span>
            <span class="hljs-keyword">throws</span> NacosException {
        redoService.cacheInstanceForRedo(serviceName, groupName, instance);
        doRegisterService(serviceName, groupName, instance);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doRegisterService</span><span class="hljs-params">(String serviceName, String groupName, Instance instance)</span> <span class="hljs-keyword">throws</span> NacosException {
        <span class="hljs-comment">// å®¢æˆ·ç«¯åˆ›å»ºæ³¨å†Œå®ä¾‹è¯·æ±‚å¯¹è±¡ï¼ŒåŒ…å«å‘½åç©ºé—´ã€æœåŠ¡åã€åˆ†ç»„åå’Œå®ä¾‹ä¿¡æ¯</span>
        <span class="hljs-type">InstanceRequest</span> <span class="hljs-variable">request</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InstanceRequest</span>(namespaceId, serviceName, groupName,
                NamingRemoteConstants.REGISTER_INSTANCE, instance);
        <span class="hljs-comment">// [registerInstance] æ­¥éª¤2ï¼šé€šè¿‡gRPCåè®®å‘æœåŠ¡ç«¯å‘é€æ³¨å†Œè¯·æ±‚</span>
        requestToServer(request, Response.class);
        redoService.instanceRegistered(serviceName, groupName);
    }
}
</code></pre>
<p>åœ¨ä¸Šè¿°æ­¥éª¤ä¸­ï¼Œå¯ä»¥å‘ç°åˆ†åˆ«ä¸¤æ¬¡è°ƒç”¨äº† <code>redoServer</code> çš„ <code>cacheInstanceForRedo</code> å’Œ <code>instanceRegistered</code> æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NamingGrpcRedoService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ConnectionEventListener</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ConcurrentMap&lt;String, InstanceRedoData&gt; registeredInstances = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-comment">// åˆ›å»º InstanceRedoData å¯¹è±¡åœ¨ ConcurrentMap ä¸­</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cacheInstanceForRedo</span><span class="hljs-params">(String serviceName, String groupName, Instance instance)</span> {
        <span class="hljs-comment">// eg: DEFAULT_GROUP@@test-service</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> NamingUtils.getGroupedName(serviceName, groupName);
        <span class="hljs-type">InstanceRedoData</span> <span class="hljs-variable">redoData</span> <span class="hljs-operator">=</span> InstanceRedoData.build(serviceName, groupName, instance);
        <span class="hljs-keyword">synchronized</span> (registeredInstances) {
            registeredInstances.put(key, redoData);
        }
    }
}
</code></pre>
<p>é¦–å…ˆå®ƒä¼šåˆ›å»º <code>InstanceRedoData</code> å¯¹è±¡ä¿å­˜åœ¨ <code>ConcurrentMap</code> ä¸­ï¼Œåˆå§‹å­—æ®µå€¼å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e384e223d7864c9e8ffe2f6384976b38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pa55ZyG5oOz5b2T5Zu-54G1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860535&amp;x-signature=GjJ0dffh%2BVrt%2BPLe5jHzzQZ1NtA%3D" alt="img.png" loading="lazy"/></p>
<p>åœ¨æˆåŠŸè°ƒç”¨å‘æœåŠ¡ç«¯æ³¨å†Œå®ä¾‹åï¼Œä¼šå°† <code>InstanceRedoData#registered</code> å­—æ®µæ ‡è®°ä¸º trueï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NamingGrpcRedoService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ConnectionEventListener</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ConcurrentMap&lt;String, InstanceRedoData&gt; registeredInstances = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">instanceRegistered</span><span class="hljs-params">(String serviceName, String groupName)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> NamingUtils.getGroupedName(serviceName, groupName);
        <span class="hljs-keyword">synchronized</span> (registeredInstances) {
            <span class="hljs-type">InstanceRedoData</span> <span class="hljs-variable">redoData</span> <span class="hljs-operator">=</span> registeredInstances.get(key);
            <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> != redoData) {
                <span class="hljs-comment">// æ ‡è®° registered å­—æ®µä¸º true</span>
                redoData.registered();
            }
        }
    }
}
</code></pre>
<p>è‡³äº <code>InstanceRedoData</code> å¯¹è±¡æœ‰ä»€ä¹ˆä½œç”¨æˆ‘ä»¬ä¹‹åå†çœ‹ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆå›åˆ° gRPC è¯·æ±‚æœåŠ¡ç«¯æ³¨å†Œå®ä¾‹çš„é€»è¾‘ä¸­ã€‚Nacos Client ä¼šå‘æœåŠ¡ç«¯å‘é€ <code>InstanceRequest</code> è¯·æ±‚ï¼Œå¹¶æœ‰ Nacos Server ç«¯çš„ <code>InstanceRequestHandler</code> æ‰¿æ¥ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InstanceRequestHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RequestHandler</span>&lt;InstanceRequest, InstanceResponse&gt; {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> EphemeralClientOperationServiceImpl clientOperationService;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">InstanceRequestHandler</span><span class="hljs-params">(EphemeralClientOperationServiceImpl clientOperationService)</span> {
        <span class="hljs-built_in">this</span>.clientOperationService = clientOperationService;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-meta">@NamespaceValidation</span>
    <span class="hljs-meta">@TpsControl(pointName = "RemoteNamingInstanceRegisterDeregister", name = "RemoteNamingInstanceRegisterDeregister")</span>
    <span class="hljs-meta">@Secured(action = ActionTypes.WRITE)</span>
    <span class="hljs-meta">@ExtractorManager</span>.Extractor(rpcExtractor = InstanceRequestParamExtractor.class)
    <span class="hljs-keyword">public</span> InstanceResponse <span class="hljs-title function_">handle</span><span class="hljs-params">(InstanceRequest request, RequestMeta meta)</span> <span class="hljs-keyword">throws</span> NacosException {
        <span class="hljs-comment">// [registerInstance] æ­¥éª¤3ï¼šæ ¹æ®è¯·æ±‚å‚æ•°åˆ›å»ºæœåŠ¡å¯¹è±¡ï¼Œè®¾ç½®ä¸ºephemeralï¼ˆä¸´æ—¶ï¼‰æœåŠ¡</span>
        <span class="hljs-type">Service</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> Service.newService(request.getNamespace(), request.getGroupName(), request.getServiceName(),
                <span class="hljs-literal">true</span>);
        InstanceUtil.setInstanceIdIfEmpty(request.getInstance(), service.getGroupedServiceName());
        <span class="hljs-keyword">switch</span> (request.getType()) {
            <span class="hljs-keyword">case</span> NamingRemoteConstants.REGISTER_INSTANCE:
                <span class="hljs-comment">// æ ¹æ®è¯·æ±‚ç±»å‹åˆ†å‘åˆ°å…·ä½“çš„æ³¨å†Œå®ä¾‹æ–¹æ³•</span>
                <span class="hljs-keyword">return</span> registerInstance(service, request, meta);
            <span class="hljs-keyword">case</span> NamingRemoteConstants.DE_REGISTER_INSTANCE:
                <span class="hljs-keyword">return</span> deregisterInstance(service, request, meta);
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NacosException</span>(NacosException.INVALID_PARAM,
                        String.format(<span class="hljs-string">"Unsupported request type %s"</span>, request.getType()));
        }
    }

    <span class="hljs-keyword">private</span> InstanceResponse <span class="hljs-title function_">registerInstance</span><span class="hljs-params">(Service service, InstanceRequest request, RequestMeta meta)</span>
            <span class="hljs-keyword">throws</span> NacosException {
        <span class="hljs-comment">// è°ƒç”¨å®¢æˆ·ç«¯æ“ä½œæœåŠ¡æ³¨å†Œå®ä¾‹ï¼Œä¼ å…¥æœåŠ¡ã€å®ä¾‹å’Œè¿æ¥ID</span>
        clientOperationService.registerInstance(service, request.getInstance(), meta.getConnectionId());
        <span class="hljs-comment">// å‘å¸ƒå®ä¾‹æ³¨å†Œè·Ÿè¸ªäº‹ä»¶ï¼Œè®°å½•æ³¨å†Œæ“ä½œçš„è¯¦ç»†ä¿¡æ¯</span>
        NotifyCenter.publishEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RegisterInstanceTraceEvent</span>(System.currentTimeMillis(),
                NamingRequestUtil.getSourceIpForGrpcRequest(meta), <span class="hljs-literal">true</span>, service.getNamespace(), service.getGroup(),
                service.getName(), request.getInstance().getIp(), request.getInstance().getPort()));
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">InstanceResponse</span>(NamingRemoteConstants.REGISTER_INSTANCE);
    }
}
</code></pre>
<p>å®ƒä¼šåˆ›å»º <code>Service</code> å¯¹è±¡ï¼Œå®ƒæ˜¯å­˜å‚¨æ¨¡å‹ä¸­çš„æœåŠ¡ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37b23fbb9a9e4a7ea343c8d4e90d6487~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pa55ZyG5oOz5b2T5Zu-54G1:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763860535&amp;x-signature=bDn4A65AAZlt%2BrS0O7PvXd7rfx8%3D" alt="img_1.png" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆæ·±å…¥åˆ°å…¶ä¸­è°ƒç”¨çš„ <code>EphemeralClientOperationServiceImpl#registerInstance</code> æ–¹æ³•ä¸­ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EphemeralClientOperationServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ClientOperationService</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">registerInstance</span><span class="hljs-params">(Service service, Instance instance, String clientId)</span> <span class="hljs-keyword">throws</span> NacosException {
        <span class="hljs-comment">// éªŒè¯å®ä¾‹çš„åˆæ³•æ€§ï¼ˆIPã€ç«¯å£ç­‰ï¼‰</span>
        NamingUtils.checkInstanceIsLegal(instance);

        <span class="hljs-comment">// [registerInstance] æ­¥éª¤4ï¼šä»æœåŠ¡ç®¡ç†å™¨è·å–å•ä¾‹æœåŠ¡å¯¹è±¡</span>
        <span class="hljs-type">Service</span> <span class="hljs-variable">singleton</span> <span class="hljs-operator">=</span> ServiceManager.getInstance().getSingleton(service);
        <span class="hljs-keyword">if</span> (!singleton.isEphemeral()) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NacosRuntimeException</span>(NacosException.INVALID_PARAM,
                    String.format(<span class="hljs-string">"Current service %s is persistent service, can't register ephemeral instance."</span>,
                            singleton.getGroupedServiceName()));
        }
        <span class="hljs-comment">// è·å–å®¢æˆ·ç«¯è¿æ¥å¯¹è±¡å¹¶éªŒè¯å…¶åˆæ³•æ€§</span>
        <span class="hljs-type">Client</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> clientManager.getClient(clientId);
        checkClientIsLegal(client, clientId);
        <span class="hljs-comment">// å°†å®ä¾‹ä¿¡æ¯è½¬æ¢ä¸ºå‘å¸ƒä¿¡æ¯å¯¹è±¡</span>
        <span class="hljs-type">InstancePublishInfo</span> <span class="hljs-variable">instanceInfo</span> <span class="hljs-operator">=</span> getPublishInfo(instance);
        <span class="hljs-comment">// [registerInstance] æ­¥éª¤5ï¼šå°†å®ä¾‹ä¿¡æ¯ InstancePublishInfo æ·»åŠ åˆ°å®¢æˆ·ç«¯çš„æœåŠ¡å®ä¾‹åˆ—è¡¨ä¸­</span>
        client.addServiceInstance(singleton, instanceInfo);
        client.setLastUpdatedTime();
        client.recalculateRevision();
        <span class="hljs-comment">// å‘å¸ƒå®¢æˆ·ç«¯æ³¨å†ŒæœåŠ¡äº‹ä»¶</span>
        NotifyCenter.publishEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ClientOperationEvent</span>(singleton, clientId));
        <span class="hljs-comment">// å‘å¸ƒå®ä¾‹å…ƒæ•°æ®äº‹ä»¶ï¼Œå®Œæˆæ³¨å†Œæµç¨‹</span>
        NotifyCenter
                .publishEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MetadataEvent</span>.InstanceMetadataEvent(singleton, instanceInfo.getMetadataId(), <span class="hljs-literal">false</span>));
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceManager</span> {

    <span class="hljs-comment">// å•ä¾‹æ¨¡å¼ï¼šé¥¿æ±‰å¼</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ServiceManager</span> <span class="hljs-variable">INSTANCE</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceManager</span>();
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ServiceManager <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> INSTANCE;
    }


    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ConcurrentHashMap&lt;Service, Service&gt; singletonRepository;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ConcurrentHashMap&lt;String, Set&lt;Service&gt;&gt; namespaceSingletonMaps;

    <span class="hljs-keyword">private</span> <span class="hljs-title function_">ServiceManager</span><span class="hljs-params">()</span> {
        singletonRepository = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;(<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">10</span>);
        namespaceSingletonMaps = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;(<span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">2</span>);
    }
    
    <span class="hljs-keyword">public</span> Service <span class="hljs-title function_">getSingleton</span><span class="hljs-params">(Service service)</span> {
        <span class="hljs-comment">// é¦–å…ˆåœ¨ singletonRepository ä¸­æŸ¥æ‰¾æˆ–åˆ›å»ºæœåŠ¡å•ä¾‹</span>
        <span class="hljs-type">Service</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> singletonRepository.computeIfAbsent(service, key -&gt; {
            NotifyCenter.publishEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MetadataEvent</span>.ServiceMetadataEvent(service, <span class="hljs-literal">false</span>));
            <span class="hljs-keyword">return</span> service;
        });
        <span class="hljs-comment">// [registerInstance] å…³é”®æ•°æ®å†™å…¥ï¼šå°†æœåŠ¡æ·»åŠ åˆ°å‘½åç©ºé—´æœåŠ¡æ˜ å°„è¡¨ä¸­ namespaceSingletonMaps</span>
        namespaceSingletonMaps.computeIfAbsent(result.getNamespace(), namespace -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashSet</span>&lt;&gt;()).add(result);
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<p>åœ¨ <strong>[registerInstance] æ­¥éª¤4</strong> ä¸­å®Œæˆäº† <strong>æœåŠ¡å®ä¾‹ä¿¡æ¯æ³¨å†Œåæœ¬åœ°ç¼“å­˜çš„å†™å…¥</strong>ï¼Œå®ƒä¼šè¢«è®°å½•åˆ° <code>ServiceManager#singletonRepository</code> å’Œ <code>ServiceManager#namespaceSingletonMaps</code> ä¸¤ä¸ªå˜é‡ä¸­ï¼Œå¹¶ä¸”åœ¨åœ¨é¦–æ¬¡é€šè¿‡ <code>ConcurrentHashMap#computeIfAbsent</code> æ–¹æ³•æ·»åŠ æ—¶ä¼šè§¦å‘ <code>ServiceMetadataEvent</code> äº‹ä»¶ï¼Œè¿™ä¸ªäº‹ä»¶ç”¨äºæ›´æ–°æœåŠ¡ä¿¡æ¯çš„å…ƒæ•°æ®ï¼Œæ¯”è¾ƒç®€å•å°±ä¸å†è§£é‡Šäº†ï¼Œè¿™æœ‰ä¸€ç‚¹ <strong>ä»£ç è§„èŒƒ</strong> éœ€è¦æ³¨æ„ï¼šå®ƒå°† <code>ServiceManager#getSingleton</code> å‘½åä¸ºè·å–æœåŠ¡å®ä¾‹çš„æ–¹æ³•ï¼Œä½†æ˜¯å´åœ¨è¿™ä¸ª <code>get</code> æ–¹æ³•ä¸­æ‰§è¡Œäº†å†™å…¥é€»è¾‘ï¼Œå…·æœ‰è¿·æƒ‘æ€§ï¼Œåº”è¯¥ä¿®æ”¹å‘½åä¸º <code>registerAndGetSingleton</code> æ‰å¯¹ã€‚å†å›åˆ° <code>registerInstance</code> æ–¹æ³•ä¸­ï¼Œ<strong>[registerInstance] æ­¥éª¤5</strong> ä¹Ÿæ˜¯ä¸€æ®µé‡è¦çš„é€»è¾‘ï¼Œå®ƒä¼šåœ¨ <code>ConcurrentHashMap&lt;Service, InstancePublishInfo&gt; publishers</code> è®°å½•æ³¨å†Œå®ä¾‹çš„å‘å¸ƒä¿¡æ¯ <code>InstancePublishInfo</code>ï¼ŒåŒ…å« <strong>å®ä¾‹çš„ IPï¼Œç«¯å£å’Œé›†ç¾¤ç­‰å¿…è¦ä¿¡æ¯</strong>ï¼Œåç»­ä¼šä»å‘å¸ƒä¿¡æ¯ä¸­æ¥è·å–è¿™äº›å­—æ®µå€¼ï¼Œå¹¶ä¸”ä¼šè§¦å‘ <code>ClientChangedEvent</code> äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractClient</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Client</span> {

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> ConcurrentHashMap&lt;Service, InstancePublishInfo&gt; publishers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;(<span class="hljs-number">16</span>, <span class="hljs-number">0.75f</span>, <span class="hljs-number">1</span>);
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">addServiceInstance</span><span class="hljs-params">(Service service, InstancePublishInfo instancePublishInfo)</span> {
        <span class="hljs-keyword">if</span> (instancePublishInfo <span class="hljs-keyword">instanceof</span> BatchInstancePublishInfo) {
            <span class="hljs-type">InstancePublishInfo</span> <span class="hljs-variable">old</span> <span class="hljs-operator">=</span> publishers.put(service, instancePublishInfo);
            MetricsMonitor.incrementIpCountWithBatchRegister(old, (BatchInstancePublishInfo) instancePublishInfo);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// è®°å½•å®ä¾‹çš„å‘å¸ƒä¿¡æ¯ï¼Œç”¨äºåç»­ä»å‘å¸ƒä¿¡æ¯ä¸­è§£æè·å–æ³¨å†Œå®ä¾‹çš„ IP ä¿¡æ¯ç­‰</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> == publishers.put(service, instancePublishInfo)) {
                MetricsMonitor.incrementInstanceCount();
            }
        }
        <span class="hljs-comment">// è§¦å‘ ClientChangedEvent äº‹ä»¶</span>
        NotifyCenter.publishEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ClientEvent</span>.ClientChangedEvent(<span class="hljs-built_in">this</span>));
        Loggers.SRV_LOG.info(<span class="hljs-string">"Client change for service {}, {}"</span>, service, getClientId());
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<p>åœ¨ <code>registerInstance</code> æ–¹æ³•ä¸­è¿˜ä¼šå‘å¸ƒä¸¤ä¸ªäº‹ä»¶ï¼š<code>ClientRegisterServiceEvent</code> å’Œ <code>InstanceMetadataEvent</code>ï¼Œåè€…ç”¨äºå†™å…¥å®ä¾‹çš„å…ƒæ•°æ®æ¯”è¾ƒç®€å•ï¼Œå°±ä¸å†èµ˜è¿°äº†ã€‚åœ¨ä»¥ä¸Šé€»è¾‘ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“äº†æœåŠ¡ä¿¡æ¯ <code>Service</code> è¢«è®°å½•åœ¨äº† <code>ServiceManager</code> ä¸­ï¼ŒæœåŠ¡ä¸‹å®ä¾‹çš„ä¿¡æ¯è¢«ä¿å­˜åœ¨äº† <code>AbstractClient#publishers</code> å­—æ®µä¸­ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ <code>ClientRegisterServiceEvent</code> äº‹ä»¶å’Œ <code>ClientChangedEvent</code> äº‹ä»¶æ˜¯å¦‚ä½•è¢«å¤„ç†çš„ã€‚</p>
<h4 data-id="heading-1">ClientRegisterServiceEvent</h4>
<p><code>ClientRegisterServiceEvent</code> äº‹ä»¶ç”± <code>ClientServiceIndexesManager</code> è®¢é˜…å¹¶æ¶ˆè´¹ï¼Œåœ¨è¿™é‡Œä¹Ÿä¼šè®°å½•æœåŠ¡ä¿¡æ¯ï¼Œå¦‚ä¸‹æ–¹ä»£ç æ‰€ç¤ºï¼Œå®ƒè¿˜ä¼šè§¦å‘ <code>ServiceChangedEvent</code> äº‹ä»¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClientServiceIndexesManager</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SmartSubscriber</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ConcurrentMap&lt;Service, Set&lt;String&gt;&gt; publisherIndexes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleClientOperation</span><span class="hljs-params">(ClientOperationEvent event)</span> {
        <span class="hljs-type">Service</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> event.getService();
        <span class="hljs-type">String</span> <span class="hljs-variable">clientId</span> <span class="hljs-operator">=</span> event.getClientId();
        <span class="hljs-keyword">if</span> (event <span class="hljs-keyword">instanceof</span> ClientOperationEvent.ClientRegisterServiceEvent) {
            <span class="hljs-comment">// [registerInstance] æ­¥éª¤6ï¼šå¤„ç†å®¢æˆ·ç«¯æ³¨å†ŒæœåŠ¡äº‹ä»¶ï¼Œå°†æœåŠ¡å’Œå®¢æˆ·ç«¯IDæ·»åŠ åˆ°å‘å¸ƒè€…ç´¢å¼• publisherIndexes ä¸­</span>
            addPublisherIndexes(service, clientId);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event <span class="hljs-keyword">instanceof</span> ClientOperationEvent.ClientDeregisterServiceEvent) {
            removePublisherIndexes(service, clientId);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event <span class="hljs-keyword">instanceof</span> ClientOperationEvent.ClientSubscribeServiceEvent) {
            addSubscriberIndexes(service, clientId);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event <span class="hljs-keyword">instanceof</span> ClientOperationEvent.ClientUnsubscribeServiceEvent) {
            removeSubscriberIndexes(service, clientId);
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addPublisherIndexes</span><span class="hljs-params">(Service service, String clientId)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">serviceChangedType</span> <span class="hljs-operator">=</span> Constants.ServiceChangedType.INSTANCE_CHANGED;
        <span class="hljs-keyword">if</span> (!publisherIndexes.containsKey(service)) {
            <span class="hljs-comment">// å”¯ä¸€éœ€è¦æ›´æ–°ç´¢å¼•çš„æ—¶é—´æ˜¯ "é¦–æ¬¡" åˆ›å»ºæœåŠ¡çš„æ—¶</span>
            serviceChangedType = Constants.ServiceChangedType.ADD_SERVICE;
        }
        <span class="hljs-comment">// å‘å¸ƒæœåŠ¡å˜æ›´äº‹ä»¶ï¼Œé€šçŸ¥è®¢é˜…è€…æœ‰æ–°çš„æœåŠ¡å®ä¾‹æ³¨å†Œ</span>
        NotifyCenter.publishEvent(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceEvent</span>.ServiceChangedEvent(service, serviceChangedType, <span class="hljs-literal">true</span>));
        publisherIndexes.computeIfAbsent(service, key -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashSet</span>&lt;&gt;()).add(clientId);
    }
}
</code></pre>
<p><code>ServiceChangedEvent</code> äº‹ä»¶è¢« <code>NamingSubscriberServiceV2Impl</code> è®¢é˜…å¹¶æ¶ˆè´¹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NamingSubscriberServiceV2Impl</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SmartSubscriber</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NamingSubscriberService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> PushDelayTaskExecuteEngine delayTaskEngine;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onEvent</span><span class="hljs-params">(Event event)</span> {
        <span class="hljs-keyword">if</span> (event <span class="hljs-keyword">instanceof</span> ServiceEvent.ServiceChangedEvent) {
            <span class="hljs-comment">// [registerInstance] æ­¥éª¤7ï¼šå¤„ç†æœåŠ¡å˜æ›´äº‹ä»¶ï¼Œåˆ›å»ºæ¨é€ä»»åŠ¡å°†æœåŠ¡å˜æ›´é€šçŸ¥ç»™æ‰€æœ‰è®¢é˜…è€…</span>
            ServiceEvent.<span class="hljs-type">ServiceChangedEvent</span> <span class="hljs-variable">serviceChangedEvent</span> <span class="hljs-operator">=</span> (ServiceEvent.ServiceChangedEvent) event;
            <span class="hljs-type">Service</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> serviceChangedEvent.getService();
            delayTaskEngine.addTask(service, <span class="hljs-keyword">new</span> <span class="hljs-title class_">PushDelayTask</span>(service, PushConfig.getInstance().getPushTaskDelay()));
            MetricsMonitor.incrementServiceChangeCount(service);
        }
    }
}
</code></pre>
<p>å®ƒä¼šåˆ›å»ºä¸€ä¸ª <code>PushDelayTask</code> æ·»åŠ åˆ° <code>NacosDelayTaskExecuteEngine#tasks</code> ä¸­ï¼Œè¿™ä¸ª <code>NacosDelayTaskExecuteEngine</code> æˆ‘ä»¬åœ¨é…ç½®å‘å¸ƒçš„ç« èŠ‚ä»‹ç»è¿‡ï¼Œæœ¬è´¨ä¸Šå®ƒæ˜¯ä¸€ä¸ª <code>ScheduledExecutorService</code> åœ¨æ¯ 100ms æ‰§è¡Œä¸€ä¸ª <code>ConcurrentHashMap&lt;Object, AbstractDelayTask&gt; tasks</code> çš„ä»»åŠ¡ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ <code>PushDelayTask</code> ä»»åŠ¡ï¼Œé‡ç‚¹å…³æ³¨æ³¨é‡Šä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PushDelayTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractDelayTask</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Service service;

    <span class="hljs-comment">// æ˜¯å¦æ¨é€ç»™æ‰€æœ‰è®¢é˜…æœåŠ¡ä¿¡æ¯çš„ Client</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> pushToAll;

    <span class="hljs-keyword">private</span> Set&lt;String&gt; targetClients;

    <span class="hljs-comment">// åˆ›å»ºæ¨é€æ‰€æœ‰è®¢é˜…è€…çš„ä»»åŠ¡ï¼Œä¸Šæ–‡ä¸­ä¾¿æ˜¯è°ƒç”¨çš„è¿™ä¸ªæ„é€ å‡½æ•°</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PushDelayTask</span><span class="hljs-params">(Service service, <span class="hljs-type">long</span> delay)</span> {
        <span class="hljs-built_in">this</span>.service = service;
        pushToAll = <span class="hljs-literal">true</span>;
        targetClients = <span class="hljs-literal">null</span>;
        setTaskInterval(delay);
        setLastProcessTime(System.currentTimeMillis());
    }

    <span class="hljs-comment">// åˆ›å»ºæ¨é€æŸä¸€ä¸ªè®¢é˜…è€…çš„ä»»åŠ¡ï¼Œä¸“é—¨ç”¨äºå¤„ç†æŸä¸ª IP æ¨é€å¤±è´¥çš„æƒ…å†µ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PushDelayTask</span><span class="hljs-params">(Service service, <span class="hljs-type">long</span> delay, String targetClient)</span> {
        <span class="hljs-built_in">this</span>.service = service;
        <span class="hljs-built_in">this</span>.pushToAll = <span class="hljs-literal">false</span>;
        <span class="hljs-built_in">this</span>.targetClients = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;(<span class="hljs-number">1</span>);
        <span class="hljs-built_in">this</span>.targetClients.add(targetClient);
        setTaskInterval(delay);
        setLastProcessTime(System.currentTimeMillis());
    }

    <span class="hljs-comment">// åˆå¹¶ä»»åŠ¡ï¼Œé¿å…å¤šæ¬¡é‡å¤è°ƒç”¨</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">merge</span><span class="hljs-params">(AbstractDelayTask task)</span> {
        <span class="hljs-keyword">if</span> (!(task <span class="hljs-keyword">instanceof</span> PushDelayTask)) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-type">PushDelayTask</span> <span class="hljs-variable">oldTask</span> <span class="hljs-operator">=</span> (PushDelayTask) task;
        <span class="hljs-keyword">if</span> (isPushToAll() || oldTask.isPushToAll()) {
            pushToAll = <span class="hljs-literal">true</span>;
            targetClients = <span class="hljs-literal">null</span>;
        } <span class="hljs-keyword">else</span> {
            targetClients.addAll(oldTask.getTargetClients());
        }
        setLastProcessTime(Math.min(getLastProcessTime(), task.getLastProcessTime()));
        Loggers.PUSH.info(<span class="hljs-string">"[PUSH] Task merge for {}"</span>, service);
    }

    <span class="hljs-keyword">public</span> Service <span class="hljs-title function_">getService</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> service;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isPushToAll</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> pushToAll;
    }

    <span class="hljs-comment">// è·å–ç›®æ ‡æ¨é€ Client</span>
    <span class="hljs-keyword">public</span> Set&lt;String&gt; <span class="hljs-title function_">getTargetClients</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> targetClients;
    }
}
</code></pre>
<p>æˆ‘ä»¬èƒ½äº†è§£åˆ° <code>PushDelayTask</code> èƒ½å¤Ÿ <strong>åŒºåˆ†æ˜¯æ¨é€ç»™æ‰€æœ‰å®¢æˆ·ç«¯è¿˜æ˜¯åªæ¨é€å•ä¸€å®¢æˆ·ç«¯ï¼Œè¿™ä¹ˆåšçš„ç›®çš„æ˜¯å¯ä»¥é’ˆå¯¹æŸäº›æ¨é€å¼‚å¸¸çš„å®¢æˆ·ç«¯è¿›è¡Œä»»åŠ¡é‡è¯•</strong>ã€‚éšå <code>PushDelayTask</code> ä¼šè¢« <code>PushDelayTaskProcessor</code> å¤„ç†ï¼Œä¼šè¢«å°è£…åˆ° <code>PushExecuteTask</code> ä»»åŠ¡ä¸­ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PushDelayTaskProcessor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NacosTaskProcessor</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> PushDelayTaskExecuteEngine executeEngine;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PushDelayTaskProcessor</span><span class="hljs-params">(PushDelayTaskExecuteEngine executeEngine)</span> {
        <span class="hljs-built_in">this</span>.executeEngine = executeEngine;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">process</span><span class="hljs-params">(NacosTask task)</span> {
        <span class="hljs-type">PushDelayTask</span> <span class="hljs-variable">pushDelayTask</span> <span class="hljs-operator">=</span> (PushDelayTask) task;
        <span class="hljs-type">Service</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> pushDelayTask.getService();
        <span class="hljs-comment">// [registerInstance] æ­¥éª¤8ï¼šåˆ†å‘æ¨é€ä»»åŠ¡åˆ°æ‰§è¡Œå™¨ï¼Œå‡†å¤‡å°†æœåŠ¡å˜æ›´æ¨é€ç»™å®¢æˆ·ç«¯</span>
        NamingExecuteTaskDispatcher.getInstance()
                .dispatchAndExecuteTask(service, <span class="hljs-keyword">new</span> <span class="hljs-title class_">PushExecuteTask</span>(service, executeEngine, pushDelayTask));
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<p><code>NamingExecuteTaskDispatcher#dispatchAndExecuteTask</code> æ–¹æ³•ä¼šæ‰§è¡Œåˆ°å¦‚ä¸‹é€»è¾‘ä¸­ï¼Œåˆ†é…ç»™æŸä¸€æ¡çº¿ç¨‹å»å¤„ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NacosExecuteTaskExecuteEngine</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractNacosTaskExecuteEngine</span>&lt;AbstractExecuteTask&gt; {

    <span class="hljs-comment">// æœ¬è´¨ä¸Šæ˜¯å¤šæ¡çº¿ç¨‹</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> TaskExecuteWorker[] executeWorkers;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">NacosExecuteTaskExecuteEngine</span><span class="hljs-params">(String name, Logger logger, <span class="hljs-type">int</span> dispatchWorkerCount)</span> {
        <span class="hljs-built_in">super</span>(logger);
        executeWorkers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TaskExecuteWorker</span>[dispatchWorkerCount];
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">mod</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; mod &lt; dispatchWorkerCount; ++mod) {
            executeWorkers[mod] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TaskExecuteWorker</span>(name, mod, dispatchWorkerCount, getEngineLog());
        }
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addTask</span><span class="hljs-params">(Object tag, AbstractExecuteTask task)</span> {
        <span class="hljs-type">NacosTaskProcessor</span> <span class="hljs-variable">processor</span> <span class="hljs-operator">=</span> getProcessor(tag);
        <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> != processor) {
            processor.process(task);
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-comment">// åˆ†é…ç»™æŸä¸ªçº¿ç¨‹å¤„ç†</span>
        <span class="hljs-type">TaskExecuteWorker</span> <span class="hljs-variable">worker</span> <span class="hljs-operator">=</span> getWorker(tag);
        worker.process(task);
    }

    <span class="hljs-keyword">private</span> TaskExecuteWorker <span class="hljs-title function_">getWorker</span><span class="hljs-params">(Object tag)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">idx</span> <span class="hljs-operator">=</span> (tag.hashCode() &amp; Integer.MAX_VALUE) % workersCount();
        <span class="hljs-keyword">return</span> executeWorkers[idx];
    }
}
</code></pre>
<p>ä»¥ä¸Šé€»è¾‘è¿˜æœªæ¶‰åŠ <code>PushExecuteTask</code> æ¨é€æœåŠ¡å˜æ›´çš„é€»è¾‘å¤„ç†ï¼Œå¤§å®¶åªéœ€è¦äº†è§£åˆ°ï¼Œè‡³æ­¤å°†æ¨é€ä»»åŠ¡è½¬äº¤åˆ°äº†æŸä¸ªå•ä¸€çš„çº¿ç¨‹ä¸­å»æ‰§è¡Œäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹ <code>PushExecuteTask</code> çš„å…·ä½“é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PushExecuteTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractExecuteTask</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> PushDelayTaskExecuteEngine delayTaskEngine;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> PushDelayTask delayTask;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// [registerInstance] æ­¥éª¤9ï¼šç”Ÿæˆæ¨é€æ•°æ®ï¼ŒåŒ…å«æœåŠ¡å®ä¾‹ä¿¡æ¯å’Œå…ƒæ•°æ®</span>
            <span class="hljs-type">PushDataWrapper</span> <span class="hljs-variable">wrapper</span> <span class="hljs-operator">=</span> generatePushData();
            <span class="hljs-type">ClientManager</span> <span class="hljs-variable">clientManager</span> <span class="hljs-operator">=</span> delayTaskEngine.getClientManager();
            <span class="hljs-comment">// éå†ç›®æ ‡å®¢æˆ·ç«¯ï¼Œå‘è®¢é˜…äº†è¯¥æœåŠ¡çš„å®¢æˆ·ç«¯æ¨é€æ•°æ®</span>
            <span class="hljs-keyword">for</span> (String each : getTargetClientIds()) {
                <span class="hljs-type">Client</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> clientManager.getClient(each);
                <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> == client) {
                    <span class="hljs-comment">// means this client has disconnect</span>
                    <span class="hljs-keyword">continue</span>;
                }
                <span class="hljs-type">Subscriber</span> <span class="hljs-variable">subscriber</span> <span class="hljs-operator">=</span> client.getSubscriber(service);
                <span class="hljs-comment">// skip if null</span>
                <span class="hljs-keyword">if</span> (subscriber == <span class="hljs-literal">null</span>) {
                    <span class="hljs-keyword">continue</span>;
                }
                <span class="hljs-comment">// é€šè¿‡æ¨é€æ‰§è¡Œå™¨å‘å®¢æˆ·ç«¯æ¨é€æœåŠ¡å˜æ›´é€šçŸ¥</span>
                delayTaskEngine.getPushExecutor().doPushWithCallback(each, subscriber, wrapper,
                        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServicePushCallback</span>(each, subscriber, wrapper.getOriginalData(), delayTask.isPushToAll()));
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            Loggers.PUSH.error(<span class="hljs-string">"Push task for service"</span> + service.getGroupedServiceName() + <span class="hljs-string">" execute failed "</span>, e);
            <span class="hljs-comment">// å¼‚å¸¸é‡è¯•</span>
            delayTaskEngine.addTask(service, <span class="hljs-keyword">new</span> <span class="hljs-title class_">PushDelayTask</span>(service, <span class="hljs-number">1000L</span>));
        }
    }

    <span class="hljs-comment">// åˆå§‹æ¨é€æ—¶è·å–æ‰€æœ‰è®¢é˜…æœåŠ¡ä¿¡æ¯çš„ Clientï¼›å¦‚æœä¸æ˜¯æ¨é€æ‰€æœ‰ï¼Œè¯´æ˜æ˜¯å¤„ç†å¤±è´¥é‡è¯•çš„åœºæ™¯ï¼Œåˆ™åªæ¨é€ç›®æ ‡ Client å³å¯</span>
    <span class="hljs-keyword">private</span> Collection&lt;String&gt; <span class="hljs-title function_">getTargetClientIds</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> delayTask.isPushToAll() ? delayTaskEngine.getIndexesManager().getAllClientsSubscribeService(service)
                : delayTask.getTargetClients();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServicePushCallback</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NamingPushCallback</span> {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">()</span> {
            <span class="hljs-comment">// monitor and log</span>
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onFail</span><span class="hljs-params">(Throwable e)</span> {
            <span class="hljs-type">long</span> <span class="hljs-variable">pushCostTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - executeStartTime;
            <span class="hljs-keyword">if</span> (!(e <span class="hljs-keyword">instanceof</span> NoRequiredRetryException)) {
                Loggers.PUSH.error(<span class="hljs-string">"Reason detail: "</span>, e);
                <span class="hljs-comment">// å¦‚æœé’ˆå¯¹æŸä¸ª IP æ¨é€å¤±è´¥ï¼Œåˆ™åˆ›å»ºæ¨é€é’ˆå¯¹ç›®æ ‡ IP çš„ä»»åŠ¡é‡è¯•æ¨é€</span>
                delayTaskEngine.addTask(service,
                        <span class="hljs-keyword">new</span> <span class="hljs-title class_">PushDelayTask</span>(service, PushConfig.getInstance().getPushTaskRetryDelay(), clientId));
            }
            <span class="hljs-type">PushResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> PushResult
                    .pushFailed(service, clientId, actualServiceInfo, subscriber, pushCostTime, e, isPushToAll);
            PushResultHookHolder.getInstance().pushFailed(result);
        }
    }

}
</code></pre>
<p>ä»ä»¥ä¸Šé€»è¾‘ä¸­å¯çŸ¥ï¼šæœåŠ¡æ³¨å†Œä¿¡æ¯å°†æ¨é€ç»™æ¯ä¸ªè®¢é˜…äº†è¿™ä¸ªæœåŠ¡çš„ Clientï¼Œå¦‚æœæ¨é€å¤±è´¥ä¼šé‡æ–°æ·»åŠ  <code>PushDelayTask</code> ä»»åŠ¡é‡è¯•ï¼Œä»¥æ­¤æ¥ä¿è¯è®¢é˜…æœåŠ¡å®ä¾‹ä¿¡æ¯çš„ Client éƒ½æ¥æ”¶åˆ°å˜æ›´ã€‚éœ€è¦æ³¨æ„çš„æ˜¯åœ¨ <strong>[registerInstance] æ­¥éª¤9</strong> ä¸­æœ‰ä»¥ä¸‹éå¸¸å…³é”®çš„é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PushExecuteTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractExecuteTask</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> PushDelayTaskExecuteEngine delayTaskEngine;
    
    <span class="hljs-comment">// ç”Ÿæˆæ¨é€è¯·æ±‚ä¿¡æ¯</span>
    <span class="hljs-keyword">private</span> PushDataWrapper <span class="hljs-title function_">generatePushData</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è·å–è¦æ¨é€çš„æœåŠ¡ä¿¡æ¯ï¼ŒåŒ…å«å®ä¾‹ä¿¡æ¯</span>
        <span class="hljs-type">ServiceInfo</span> <span class="hljs-variable">serviceInfo</span> <span class="hljs-operator">=</span> delayTaskEngine.getServiceStorage().getPushData(service);
        <span class="hljs-type">ServiceMetadata</span> <span class="hljs-variable">serviceMetadata</span> <span class="hljs-operator">=</span> delayTaskEngine.getMetadataManager().getServiceMetadata(service).orElse(<span class="hljs-literal">null</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PushDataWrapper</span>(serviceMetadata, serviceInfo);
    }
}

<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ServiceStorage</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ConcurrentMap&lt;Service, Set&lt;String&gt;&gt; serviceClusterIndex;
    
    <span class="hljs-keyword">public</span> ServiceInfo <span class="hljs-title function_">getPushData</span><span class="hljs-params">(Service service)</span> {
        <span class="hljs-type">ServiceInfo</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> emptyServiceInfo(service);
        <span class="hljs-keyword">if</span> (!ServiceManager.getInstance().containSingleton(service)) {
            <span class="hljs-keyword">return</span> result;
        }
        <span class="hljs-type">Service</span> <span class="hljs-variable">singleton</span> <span class="hljs-operator">=</span> ServiceManager.getInstance().getSingleton(service);
        result.setHosts(getAllInstancesFromIndex(singleton));
        serviceDataIndexes.put(singleton, result);
        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-keyword">private</span> ServiceInfo <span class="hljs-title function_">emptyServiceInfo</span><span class="hljs-params">(Service service)</span> {
        <span class="hljs-type">ServiceInfo</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceInfo</span>();
        result.setName(service.getName());
        result.setGroupName(service.getGroup());
        result.setLastRefTime(System.currentTimeMillis());
        result.setCacheMillis(switchDomain.getDefaultPushCacheMillis());
        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-comment">// è·å–æœåŠ¡ä¸‹æ‰€æœ‰çš„å®ä¾‹ä¿¡æ¯</span>
    <span class="hljs-keyword">private</span> List&lt;Instance&gt; <span class="hljs-title function_">getAllInstancesFromIndex</span><span class="hljs-params">(Service service)</span> {
        Set&lt;Instance&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
        Set&lt;String&gt; clusters = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
        <span class="hljs-comment">// è·å– ClientId</span>
        <span class="hljs-keyword">for</span> (String each : serviceIndexesManager.getAllClientsRegisteredService(service)) {
            <span class="hljs-comment">// è·å–å®ä¾‹æ³¨å†Œä¿¡æ¯ InstancePublishInfo</span>
            Optional&lt;InstancePublishInfo&gt; instancePublishInfo = getInstanceInfo(each, service);
            <span class="hljs-keyword">if</span> (instancePublishInfo.isPresent()) {
                <span class="hljs-type">InstancePublishInfo</span> <span class="hljs-variable">publishInfo</span> <span class="hljs-operator">=</span> instancePublishInfo.get();
                <span class="hljs-comment">//If it is a BatchInstancePublishInfo type, it will be processed manually and added to the instance list</span>
                <span class="hljs-keyword">if</span> (publishInfo <span class="hljs-keyword">instanceof</span> BatchInstancePublishInfo) {
                    <span class="hljs-type">BatchInstancePublishInfo</span> <span class="hljs-variable">batchInstancePublishInfo</span> <span class="hljs-operator">=</span> (BatchInstancePublishInfo) publishInfo;
                    List&lt;Instance&gt; batchInstance = parseBatchInstance(service, batchInstancePublishInfo, clusters);
                    result.addAll(batchInstance);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// æ ¹æ®è¯·æ±‚æ—¶ InstancePublishInfo çš„æ³¨å†Œå®ä¾‹å¯¹è±¡åˆ›å»ºå‡º Instance å®ä¾‹</span>
                    <span class="hljs-type">Instance</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> parseInstance(service, instancePublishInfo.get());
                    result.add(instance);
                    clusters.add(instance.getClusterName());
                }
            }
        }
        <span class="hljs-comment">// ç¼“å­˜è®°å½•è¿™ä¸ªæœåŠ¡çš„é›†ç¾¤</span>
        serviceClusterIndex.put(service, clusters);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;(result);
    }
}
</code></pre>
<p>åœ¨ <code>generatePushData</code> æ–¹æ³•ä¸­ï¼Œç”Ÿæˆäº† <code>ServiceInfo</code> å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«æœåŠ¡å’Œè¯¥æœåŠ¡ä¸‹æ³¨å†Œçš„æ‰€æœ‰å®ä¾‹ï¼Œå®ä¾‹ä¿¡æ¯æ˜¯ä» <code>InstancePublishInfo</code> ä¸­è§£æå‡ºæ¥çš„ï¼Œå®ä¾‹çš„å‘å¸ƒä¿¡æ¯æˆ‘ä»¬åœ¨ä¸Šæ–‡ä¸­æåˆ°è¿‡ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦æ³¨æ„åœ¨ <code>getAllInstancesFromIndex</code> <strong>è¯»æ–¹æ³•ä¸­åŒ…å«äº†ç¼“å­˜å†™å…¥çš„é€»è¾‘</strong>ï¼Œè¿™ç§å†™æ³•æ˜¯éå¸¸ä¸æ¨èçš„ï¼Œå…·æœ‰è¿·æƒ‘æ€§ï¼šè°ä¼šæƒ³åˆ°åœ¨è¯»æ–¹æ³•ä¸­è¿˜ä¼šåŒ…å«å†™é€»è¾‘å‘¢ï¼Ÿæ‰€ä»¥åœ¨æ—¥å¸¸å¼€å‘ä¸­ä¸€å®šè¦é¿å…è¿™ç§å†™æ³•ï¼</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼š<code>ClientRegisterServiceEvent</code> äº‹ä»¶çš„ä½œç”¨æ˜¯å°†æœåŠ¡å®ä¾‹çš„å˜æ›´ä¿¡æ¯æ¨é€ç»™è®¢é˜…äº†è¿™ä¸ªæœåŠ¡çš„æ‰€æœ‰å®¢æˆ·ç«¯ã€‚</p>
<h4 data-id="heading-2">ClientChangedEvent</h4>
<p><code>ClientChangedEvent</code> äº‹ä»¶ä¼šè¢« <code>DistroClientDataProcessor</code> è®¢é˜…å¹¶æ¶ˆè´¹ï¼Œåœ¨å®ƒçš„ <code>onEvent</code> æ–¹æ³•ä¸­çš„ <code>else</code> é€»è¾‘ä¸­å¯ä»¥å‘ç°å®ƒè°ƒç”¨äº† <code>syncToAllServer</code> æ–¹æ³•ï¼Œä»æ–¹æ³•åä¸­å¯ä»¥å¤§æ¦‚èƒ½çŒœå‡ºæ¥ï¼Œåœ¨ Nacos é‡‡ç”¨é›†ç¾¤æ¨¡å¼éƒ¨ç½²æ—¶ï¼Œä¼šé€šè¿‡è¿™ä¸ªæ–¹æ³•å°†æ³¨å†Œçš„æœåŠ¡ä¿¡æ¯åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Šï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistroClientDataProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SmartSubscriber</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DistroDataStorage</span>, DistroDataProcessor {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DistroProtocol distroProtocol;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onEvent</span><span class="hljs-params">(Event event)</span> {
        <span class="hljs-keyword">if</span> (EnvUtil.getStandaloneMode()) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span> (event <span class="hljs-keyword">instanceof</span> ClientEvent.ClientVerifyFailedEvent) {
            syncToVerifyFailedServer((ClientEvent.ClientVerifyFailedEvent) event);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// [registerInstance] æ­¥éª¤10ï¼šåŒæ­¥æ‰€æœ‰æœåŠ¡</span>
            syncToAllServer((ClientEvent) event);
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">syncToAllServer</span><span class="hljs-params">(ClientEvent event)</span> {
        <span class="hljs-type">Client</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> event.getClient();
        <span class="hljs-keyword">if</span> (isInvalidClient(client)) {
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-comment">// åŒºåˆ†å®¢æˆ·ç«¯æ–­å¼€è¿æ¥çš„äº‹ä»¶å®¢æˆ·ç«¯å˜æ›´äº‹ä»¶</span>
        <span class="hljs-keyword">if</span> (event <span class="hljs-keyword">instanceof</span> ClientEvent.ClientDisconnectEvent) {
            <span class="hljs-type">DistroKey</span> <span class="hljs-variable">distroKey</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DistroKey</span>(client.getClientId(), TYPE);
            distroProtocol.sync(distroKey, DataOperation.DELETE);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event <span class="hljs-keyword">instanceof</span> ClientEvent.ClientChangedEvent) {
            <span class="hljs-type">DistroKey</span> <span class="hljs-variable">distroKey</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DistroKey</span>(client.getClientId(), TYPE);
            distroProtocol.sync(distroKey, DataOperation.CHANGE);
        }
    }
}
</code></pre>
<p>åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå¯ä»¥å‘ç°è°ƒç”¨äº† <code>DistroProtocol#sync</code> æ–¹æ³•ï¼Œ<code>DistroProtocol</code> è¡¨ç¤º <strong>Distro åè®®</strong>ï¼š<strong>ä¸“é—¨ç”¨äºå¤„ç†ä¸´æ—¶å®ä¾‹æ•°æ®ä¸€è‡´æ€§çš„åˆ†å¸ƒå¼åè®®</strong>ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é€šè¿‡ Nacos çš„é€»è¾‘æ¥äº†è§£ä¸€ä¸‹è¿™ä¸ªåè®®ã€‚åœ¨ <code>DistroProtocol#sync</code> æ–¹æ³•ä¸­ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistroProtocol</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DistroTaskEngineHolder distroTaskEngineHolder;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sync</span><span class="hljs-params">(DistroKey distroKey, DataOperation action)</span> {
        sync(distroKey, action, DistroConfig.getInstance().getSyncDelayMillis());
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sync</span><span class="hljs-params">(DistroKey distroKey, DataOperation action, <span class="hljs-type">long</span> delay)</span> {
        <span class="hljs-keyword">for</span> (Member each : memberManager.allMembersWithoutSelf()) {
            syncToTarget(distroKey, action, each.getAddress(), delay);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">syncToTarget</span><span class="hljs-params">(DistroKey distroKey, DataOperation action, String targetServer, <span class="hljs-type">long</span> delay)</span> {
        <span class="hljs-type">DistroKey</span> <span class="hljs-variable">distroKeyWithTarget</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DistroKey</span>(distroKey.getResourceKey(), distroKey.getResourceType(),
                targetServer);
        <span class="hljs-comment">// åˆ›å»ºå¼‚æ­¥ DistroDelayTask ä»»åŠ¡</span>
        <span class="hljs-type">DistroDelayTask</span> <span class="hljs-variable">distroDelayTask</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DistroDelayTask</span>(distroKeyWithTarget, action, delay);
        <span class="hljs-comment">// æ·»åŠ åˆ°ä»»åŠ¡åˆ—è¡¨ä¸­å»¶è¿Ÿæ‰§è¡Œ</span>
        distroTaskEngineHolder.getDelayTaskExecuteEngine().addTask(distroKeyWithTarget, distroDelayTask);
        <span class="hljs-keyword">if</span> (Loggers.DISTRO.isDebugEnabled()) {
            Loggers.DISTRO.debug(<span class="hljs-string">"[DISTRO-SCHEDULE] {} to {}"</span>, distroKey, targetServer);
        }
    }
}
</code></pre>
<p>å®ƒä¼šåˆ›å»ºä¸€ä¸ª <code>DistroDelayTask</code> æ·»åŠ åˆ° <code>NacosDelayTaskExecuteEngine#tasks</code> ä¸­ï¼Œè¿™ä¸ª <code>NacosDelayTaskExecuteEngine</code> æˆ‘ä»¬åœ¨é…ç½®å‘å¸ƒçš„ç« èŠ‚ä»‹ç»è¿‡ï¼Œæœ¬è´¨ä¸Šå®ƒæ˜¯ä¸€ä¸ª <code>ScheduledExecutorService</code> åœ¨æ¯ 100ms æ‰§è¡Œä¸€ä¸ª <code>ConcurrentHashMap&lt;Object, AbstractDelayTask&gt; tasks</code> çš„ä»»åŠ¡ã€‚<code>DistroDelayTask</code> ä»»åŠ¡ä¸­æ²¡æœ‰ä»€ä¹ˆé‡è¦çš„é€»è¾‘ï¼Œç›´æ¥æ¥çœ‹å¤„ç†è¿™ä¸ªä»»åŠ¡çš„å®ç°ç±» <code>DistroDelayTaskProcessor</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistroDelayTaskProcessor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">NacosTaskProcessor</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DistroTaskEngineHolder distroTaskEngineHolder;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DistroComponentHolder distroComponentHolder;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DistroDelayTaskProcessor</span><span class="hljs-params">(DistroTaskEngineHolder distroTaskEngineHolder,
                                    DistroComponentHolder distroComponentHolder)</span> {
        <span class="hljs-built_in">this</span>.distroTaskEngineHolder = distroTaskEngineHolder;
        <span class="hljs-built_in">this</span>.distroComponentHolder = distroComponentHolder;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">process</span><span class="hljs-params">(NacosTask task)</span> {
        <span class="hljs-keyword">if</span> (!(task <span class="hljs-keyword">instanceof</span> DistroDelayTask)) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-type">DistroDelayTask</span> <span class="hljs-variable">distroDelayTask</span> <span class="hljs-operator">=</span> (DistroDelayTask) task;
        <span class="hljs-type">DistroKey</span> <span class="hljs-variable">distroKey</span> <span class="hljs-operator">=</span> distroDelayTask.getDistroKey();
        <span class="hljs-keyword">switch</span> (distroDelayTask.getAction()) {
            <span class="hljs-keyword">case</span> DELETE:
                <span class="hljs-type">DistroSyncDeleteTask</span> <span class="hljs-variable">syncDeleteTask</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DistroSyncDeleteTask</span>(distroKey, distroComponentHolder);
                distroTaskEngineHolder.getExecuteWorkersManager().addTask(distroKey, syncDeleteTask);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">case</span> CHANGE:
            <span class="hljs-keyword">case</span> ADD:
                <span class="hljs-comment">// [registerInstance] æ­¥éª¤11ï¼šåˆ›å»º DistroSyncChangeTask ä»»åŠ¡å¼‚æ­¥æ‰§è¡Œ</span>
                <span class="hljs-type">DistroSyncChangeTask</span> <span class="hljs-variable">syncChangeTask</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DistroSyncChangeTask</span>(distroKey, distroComponentHolder);
                distroTaskEngineHolder.getExecuteWorkersManager().addTask(distroKey, syncChangeTask);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }
}
</code></pre>
<p><strong>[registerInstance] æ­¥éª¤11</strong> ä¼šåˆ›å»º <code>DistroSyncChangeTask</code> ä»»åŠ¡åŒæ ·æ·»åŠ åˆ°å»¶è¿Ÿæ‰§è¡Œçš„ä»»åŠ¡é˜Ÿåˆ—ä¸­ç­‰å¾…å¤„ç†ï¼Œè¿™ä¸ªä»»åŠ¡çš„é€»è¾‘æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistroSyncChangeTask</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractDistroExecuteTask</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">DataOperation</span> <span class="hljs-variable">OPERATION</span> <span class="hljs-operator">=</span> DataOperation.CHANGE;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DistroSyncChangeTask</span><span class="hljs-params">(DistroKey distroKey, DistroComponentHolder distroComponentHolder)</span> {
        <span class="hljs-built_in">super</span>(distroKey, distroComponentHolder);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> DataOperation <span class="hljs-title function_">getDataOperation</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> OPERATION;
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">doExecute</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">type</span> <span class="hljs-operator">=</span> getDistroKey().getResourceType();
        <span class="hljs-type">DistroData</span> <span class="hljs-variable">distroData</span> <span class="hljs-operator">=</span> getDistroData(type);
        <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> == distroData) {
            Loggers.DISTRO.warn(<span class="hljs-string">"[DISTRO] {} with null data to sync, skip"</span>, toString());
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-comment">// gRPC é€šçŸ¥å…¶ä»–èŠ‚ç‚¹æœåŠ¡å®ä¾‹ä¿¡æ¯</span>
        <span class="hljs-keyword">return</span> getDistroComponentHolder().findTransportAgent(type).syncData(distroData, getDistroKey().getTargetServer());
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doExecuteWithCallback</span><span class="hljs-params">(DistroCallback callback)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">type</span> <span class="hljs-operator">=</span> getDistroKey().getResourceType();
        <span class="hljs-type">DistroData</span> <span class="hljs-variable">distroData</span> <span class="hljs-operator">=</span> getDistroData(type);
        <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> == distroData) {
            Loggers.DISTRO.warn(<span class="hljs-string">"[DISTRO] {} with null data to sync, skip"</span>, toString());
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-comment">// gRPC é€šçŸ¥å…¶ä»–èŠ‚ç‚¹æœåŠ¡å®ä¾‹ä¿¡æ¯</span>
        getDistroComponentHolder().findTransportAgent(type).syncData(distroData, getDistroKey().getTargetServer(), callback);
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"DistroSyncChangeTask for "</span> + getDistroKey().toString();
    }
    
    <span class="hljs-comment">// è·å– Distro è¦æ¨é€çš„æ•°æ®</span>
    <span class="hljs-keyword">private</span> DistroData <span class="hljs-title function_">getDistroData</span><span class="hljs-params">(String type)</span> {
        <span class="hljs-type">DistroData</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> getDistroComponentHolder().findDataStorage(type).getDistroData(getDistroKey());
        <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> != result) {
            result.setType(OPERATION);
        }
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<p>å®ƒçš„æºç å¾ˆç®€çŸ­ï¼Œä¸»è¦å…³æ³¨ <code>doExecute</code> å’Œ <code>doExecuteWithCallback</code> æ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•çš„é€»è¾‘æ˜¯å€ŸåŠ© gRPC é€šçŸ¥é›†ç¾¤ä¸­å…¶ä»–èŠ‚ç‚¹ï¼ŒåŒºåˆ«æ˜¯æ˜¯å¦åœ¨ gRPC è°ƒç”¨å®Œæˆåæ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªä»»åŠ¡çš„æ‰§è¡Œæ˜¯åœ¨ <code>NacosExecuteTaskExecuteEngine</code> ä¸­å¼‚æ­¥æ‰§è¡Œçš„ï¼Œå› ä¸ºåœ¨ä¸Šæ–‡ä¸­è®²è§£è¿‡å°±ä¸å†èµ˜è¿°äº†ï¼Œå¤±è´¥é‡è¯•é‡‡ç”¨çš„è¿˜æ˜¯é‡æ–°æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ç­‰å¾…æ‰§è¡Œã€‚é™¤æ­¤ä¹‹å¤–æˆ‘ä»¬ä¹Ÿè¦å¼„æ¸…æ¥šæ¨é€çš„ DistroData ä¸­åˆ°åº•éƒ½åŒ…å«å“ªäº›ä¿¡æ¯ï¼Œå¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼Œå®ƒä¼šæ‰§è¡Œåˆ° <code>AbstractClient#generateSyncData</code> çš„é€»è¾‘ä¸­ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AbstractClient</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Client</span> {
    <span class="hljs-comment">// ...</span>
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ClientSyncData <span class="hljs-title function_">generateSyncData</span><span class="hljs-params">()</span> {
        List&lt;String&gt; namespaces = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();
        List&lt;String&gt; groupNames = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();
        List&lt;String&gt; serviceNames = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();

        List&lt;String&gt; batchNamespaces = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();
        List&lt;String&gt; batchGroupNames = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();
        List&lt;String&gt; batchServiceNames = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();

        List&lt;InstancePublishInfo&gt; instances = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();
        List&lt;BatchInstancePublishInfo&gt; batchInstancePublishInfos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();
        <span class="hljs-type">BatchInstanceData</span>  <span class="hljs-variable">batchInstanceData</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BatchInstanceData</span>();
        <span class="hljs-keyword">for</span> (Map.Entry&lt;Service, InstancePublishInfo&gt; entry : publishers.entrySet()) {
            <span class="hljs-type">InstancePublishInfo</span> <span class="hljs-variable">instancePublishInfo</span> <span class="hljs-operator">=</span> entry.getValue();
            <span class="hljs-keyword">if</span> (instancePublishInfo <span class="hljs-keyword">instanceof</span> BatchInstancePublishInfo) {
                <span class="hljs-type">BatchInstancePublishInfo</span> <span class="hljs-variable">batchInstance</span> <span class="hljs-operator">=</span> (BatchInstancePublishInfo) instancePublishInfo;
                batchInstancePublishInfos.add(batchInstance);
                buildBatchInstanceData(batchInstanceData, batchNamespaces, batchGroupNames, batchServiceNames, entry);
                batchInstanceData.setBatchInstancePublishInfos(batchInstancePublishInfos);
            } <span class="hljs-keyword">else</span> {
                namespaces.add(entry.getKey().getNamespace());
                groupNames.add(entry.getKey().getGroup());
                serviceNames.add(entry.getKey().getName());
                instances.add(entry.getValue());
            }
        }
        <span class="hljs-comment">// åŒ…å«äº†å‘½åç©ºé—´ã€æœåŠ¡ä¿¡æ¯å’Œå®ä¾‹ä¿¡æ¯ï¼ˆInstancePublishInfo æˆ– BatchInstanceDataï¼‰ç­‰</span>
        <span class="hljs-type">ClientSyncData</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClientSyncData</span>(getClientId(), namespaces, groupNames, serviceNames, instances, batchInstanceData);
        data.getAttributes().addClientAttribute(REVISION, getRevision());
        <span class="hljs-keyword">return</span> data;
    }
}
</code></pre>
<p>è™½ç„¶æ¯”è¾ƒé•¿ï¼Œåªçœ‹æ³¨é‡Šç›¸å…³çš„å†…å®¹å³å¯ï¼Œæ¨é€å†…å®¹åŒ…å«äº†å‘½åç©ºé—´ã€æœåŠ¡ä¿¡æ¯å’Œå®ä¾‹ä¿¡æ¯ç­‰ï¼Œè¿™äº›ä¿¡æ¯å¤§éƒ¨åˆ†éƒ½æ¥è‡ª <code>InstancePublishInfo</code>ï¼Œå¯è§è¿™ä¸ªå¯¹è±¡å¤šä¹ˆé‡è¦ã€‚</p>
<p><code>DistroSyncChangeTask</code> ä»»åŠ¡ä¼šå‘å…¶ä»–èŠ‚ç‚¹å‘é€ <code>DistroDataRequest</code> è¯·æ±‚ï¼Œè¿™ä¸ªè¯·æ±‚æ˜¯å¦‚ä½•è¢«å¤„ç†çš„å‘¢ï¼Ÿç»§ç»­çœ‹ <code>DistroDataRequestHandler</code> çš„é€»è¾‘ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@InvokeSource(source = {RemoteConstants.LABEL_SOURCE_CLUSTER})</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistroDataRequestHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RequestHandler</span>&lt;DistroDataRequest, DistroDataResponse&gt; {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DistroProtocol distroProtocol;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DistroDataRequestHandler</span><span class="hljs-params">(DistroProtocol distroProtocol)</span> {
        <span class="hljs-built_in">this</span>.distroProtocol = distroProtocol;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-meta">@Secured(apiType = ApiType.INNER_API)</span>
    <span class="hljs-keyword">public</span> DistroDataResponse <span class="hljs-title function_">handle</span><span class="hljs-params">(DistroDataRequest request, RequestMeta meta)</span> <span class="hljs-keyword">throws</span> NacosException {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">switch</span> (request.getDataOperation()) {
                <span class="hljs-keyword">case</span> VERIFY:
                    <span class="hljs-keyword">return</span> handleVerify(request.getDistroData(), meta);
                <span class="hljs-keyword">case</span> SNAPSHOT:
                    <span class="hljs-keyword">return</span> handleSnapshot();
                <span class="hljs-keyword">case</span> ADD:
                <span class="hljs-keyword">case</span> CHANGE:
                <span class="hljs-keyword">case</span> DELETE:
                    <span class="hljs-comment">// [registerInstance] æ­¥éª¤12 å¤„ç† DistroDataRequest è¯·æ±‚</span>
                    <span class="hljs-keyword">return</span> handleSyncData(request.getDistroData());
                <span class="hljs-keyword">case</span> QUERY:
                    <span class="hljs-keyword">return</span> handleQueryData(request.getDistroData());
                <span class="hljs-keyword">default</span>:
                    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DistroDataResponse</span>();
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            Loggers.DISTRO.error(<span class="hljs-string">"[DISTRO-FAILED] distro handle with exception"</span>, e);
            <span class="hljs-type">DistroDataResponse</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DistroDataResponse</span>();
            result.setResultCode(ResponseCode.FAIL.getCode());
            result.setErrorCode(ResponseCode.FAIL.getCode());
            result.setMessage(<span class="hljs-string">"handle distro request with exception"</span>);
            <span class="hljs-keyword">return</span> result;
        }
    }

    <span class="hljs-keyword">private</span> DistroDataResponse <span class="hljs-title function_">handleSyncData</span><span class="hljs-params">(DistroData distroData)</span> {
        <span class="hljs-type">DistroDataResponse</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DistroDataResponse</span>();
        <span class="hljs-keyword">if</span> (!distroProtocol.onReceive(distroData)) {
            result.setErrorCode(ResponseCode.FAIL.getCode());
            result.setMessage(<span class="hljs-string">"[DISTRO-FAILED] distro data handle failed"</span>);
        }
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<p>æˆ‘ä»¬éœ€è¦å…³æ³¨ <code>DistroProtocol#onReceive</code> æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistroProtocol</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> DistroComponentHolder distroComponentHolder;
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onReceive</span><span class="hljs-params">(DistroData distroData)</span> {
        Loggers.DISTRO.info(<span class="hljs-string">"[DISTRO] Receive distro data type: {}, key: {}"</span>, distroData.getType(),
                distroData.getDistroKey());
        <span class="hljs-type">String</span> <span class="hljs-variable">resourceType</span> <span class="hljs-operator">=</span> distroData.getDistroKey().getResourceType();
        <span class="hljs-type">DistroDataProcessor</span> <span class="hljs-variable">dataProcessor</span> <span class="hljs-operator">=</span> distroComponentHolder.findDataProcessor(resourceType);
        <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> == dataProcessor) {
            Loggers.DISTRO.warn(<span class="hljs-string">"[DISTRO] Can't find data process for received data {}"</span>, resourceType);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">return</span> dataProcessor.processData(distroData);
    }
}
</code></pre>
<p>å®ƒä¼šæ‰§è¡Œåˆ° <code>DistroClientDataProcessor#processData</code> æ–¹æ³•ï¼Œå…¶ä¸­çš„ <code>upgradeClient</code> æ–¹æ³•æ˜¯å…³é”®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistroClientDataProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SmartSubscriber</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DistroDataStorage</span>, DistroDataProcessor {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">processData</span><span class="hljs-params">(DistroData distroData)</span> {
        <span class="hljs-keyword">switch</span> (distroData.getType()) {
            <span class="hljs-keyword">case</span> ADD:
            <span class="hljs-keyword">case</span> CHANGE:
                <span class="hljs-comment">// [registerInstance] æ­¥éª¤12ï¼šå¤„ç† Distro åè®®åŒæ­¥çš„æ•°æ®</span>
                <span class="hljs-type">ClientSyncData</span> <span class="hljs-variable">clientSyncData</span> <span class="hljs-operator">=</span> ApplicationUtils.getBean(Serializer.class)
                        .deserialize(distroData.getContent(), ClientSyncData.class);
                handlerClientSyncData(clientSyncData);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">case</span> DELETE:
                <span class="hljs-type">String</span> <span class="hljs-variable">deleteClientId</span> <span class="hljs-operator">=</span> distroData.getDistroKey().getResourceKey();
                Loggers.DISTRO.info(<span class="hljs-string">"[Client-Delete] Received distro client sync data {}"</span>, deleteClientId);
                clientManager.clientDisconnected(deleteClientId);
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handlerClientSyncData</span><span class="hljs-params">(ClientSyncData clientSyncData)</span> {
        Loggers.DISTRO
                .info(<span class="hljs-string">"[Client-Add] Received distro client sync data {}, revision={}"</span>, clientSyncData.getClientId(),
                        clientSyncData.getAttributes().getClientAttribute(ClientConstants.REVISION, <span class="hljs-number">0L</span>));
        clientManager.syncClientConnected(clientSyncData.getClientId(), clientSyncData.getAttributes());
        <span class="hljs-type">Client</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> clientManager.getClient(clientSyncData.getClientId());
        <span class="hljs-comment">// upgrade æ˜¯å‡çº§çš„å«ä¹‰ï¼Œå®é™…é€»è¾‘æ˜¯å®Œæˆ Distro æ•°æ®çš„å†™å…¥</span>
        upgradeClient(client, clientSyncData);
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">upgradeClient</span><span class="hljs-params">(Client client, ClientSyncData clientSyncData)</span> {
        Set&lt;Service&gt; syncedService = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
        <span class="hljs-comment">// process batch instance sync logic</span>
        processBatchInstanceDistroData(syncedService, client, clientSyncData);
        List&lt;String&gt; namespaces = clientSyncData.getNamespaces();
        List&lt;String&gt; groupNames = clientSyncData.getGroupNames();
        List&lt;String&gt; serviceNames = clientSyncData.getServiceNames();
        List&lt;InstancePublishInfo&gt; instances = clientSyncData.getInstancePublishInfos();

        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; namespaces.size(); i++) {
            <span class="hljs-type">Service</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> Service.newService(namespaces.get(i), groupNames.get(i), serviceNames.get(i));
            <span class="hljs-comment">// æ³¨å†Œå¹¶è·å–æœåŠ¡ä¿¡æ¯</span>
            <span class="hljs-type">Service</span> <span class="hljs-variable">singleton</span> <span class="hljs-operator">=</span> ServiceManager.getInstance().getSingleton(service);
            syncedService.add(singleton);
            <span class="hljs-type">InstancePublishInfo</span> <span class="hljs-variable">instancePublishInfo</span> <span class="hljs-operator">=</span> instances.get(i);
            <span class="hljs-keyword">if</span> (!instancePublishInfo.equals(client.getInstancePublishInfo(singleton))) {
                <span class="hljs-comment">// æ‰§è¡Œçš„æ˜¯ [registerInstance] æ­¥éª¤5 çš„é€»è¾‘ï¼šå°†å®ä¾‹ä¿¡æ¯ InstancePublishInfo æ·»åŠ åˆ°å®¢æˆ·ç«¯çš„æœåŠ¡å®ä¾‹åˆ—è¡¨ä¸­</span>
                client.addServiceInstance(singleton, instancePublishInfo);
                <span class="hljs-comment">// è§¦å‘ ClientRegisterServiceEvent äº‹ä»¶</span>
                NotifyCenter.publishEvent(
                        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClientOperationEvent</span>.ClientRegisterServiceEvent(singleton, client.getClientId()));
                NotifyCenter.publishEvent(
                        <span class="hljs-keyword">new</span> <span class="hljs-title class_">MetadataEvent</span>.InstanceMetadataEvent(singleton, instancePublishInfo.getMetadataId(), <span class="hljs-literal">false</span>));
            }
        }
        <span class="hljs-keyword">for</span> (Service each : client.getAllPublishedService()) {
            <span class="hljs-keyword">if</span> (!syncedService.contains(each)) {
                client.removeServiceInstance(each);
                NotifyCenter.publishEvent(
                        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClientOperationEvent</span>.ClientDeregisterServiceEvent(each, client.getClientId()));
            }
        }
        client.setRevision(clientSyncData.getAttributes().&lt;Integer&gt;getClientAttribute(ClientConstants.REVISION, <span class="hljs-number">0</span>));
    }
}
</code></pre>
<p><code>DistroClientDataProcessor#upgradeClient</code> æ–¹æ³•ä¼šæ‰§è¡Œæ—¶å°±å’Œå¼€ç¯‡ä»‹ç»çš„ <code>EphemeralClientOperationServiceImpl#registerInstance</code> æ–¹æ³•åŸºæœ¬ä¸€è‡´çš„é€»è¾‘ï¼Œæ³¨å†Œ <code>Service</code> ä¿¡æ¯ï¼Œå†™å…¥å®ä¾‹ä¿¡æ¯ <code>InstancePublishInfo</code>ï¼Œå¹¶åœ¨éšåå‘å¸ƒ <code>ClientRegisterServiceEvent</code> äº‹ä»¶ï¼Œè¿™ä¸ªäº‹ä»¶æˆ‘ä»¬åœ¨ä¸Šä¸€ä¸ªå°èŠ‚ä¸“é—¨ä»‹ç»è¿‡ï¼Œå®ƒçš„ä½œç”¨æ˜¯å°†æœåŠ¡å®ä¾‹çš„å˜æ›´ä¿¡æ¯æ¨é€ç»™è®¢é˜…äº†è¿™ä¸ªæœåŠ¡çš„æ‰€æœ‰å®¢æˆ·ç«¯ã€‚</p>
<p>æ€»è€Œè¨€ä¹‹ï¼Œé€šè¿‡ Distro åè®®åŒæ­¥æ•°æ®ç»™é›†ç¾¤ä¸­å…¶ä»–èŠ‚ç‚¹ç›¸å½“äºåœ¨å…¶ä»–èŠ‚ç‚¹é‡æ–°æ‰§è¡Œäº†ä¸€æ¬¡å®ä¾‹æ³¨å†Œçš„é€»è¾‘ã€‚ä¸è¿‡ï¼Œå¤§å®¶æœ‰æ²¡æœ‰è€ƒè™‘è¿‡è¿™ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆ Distro åè®®èƒ½å¤Ÿé€šè¿‡å¦‚æ­¤ç®€å•çš„æ–¹å¼åœ¨æœåŠ¡å‘ç°åœºæ™¯ä¸‹ä¿è¯æ•°æ®çš„æœ€ç»ˆä¸€è‡´æ€§å‘¢ï¼Ÿ</p>
<p>æœ€ä¸»è¦çš„åŸå› æ˜¯ï¼š<strong>æœåŠ¡æ³¨å†Œæ•°æ®æ¨¡å‹çš„å±æ€§ç®€åŒ–äº†åˆ†å¸ƒå¼ä¸€è‡´æ€§é—®é¢˜ï¼Œé¿å…äº†å¤æ‚çš„å†²çªè§£å†³æœºåˆ¶</strong>ã€‚è¯¥å¦‚ä½•ç†è§£è¿™ä¸ªç‰¹ç‚¹å‘¢ï¼Ÿ</p>
<ul>
<li><strong>æœåŠ¡å®ä¾‹é€šè¿‡å¤šä¸ªç»´åº¦ç¡®å®šå”¯ä¸€æ€§</strong>ï¼šå‘½åç©ºé—´ + æœåŠ¡å + é›†ç¾¤å + IPåœ°å€ + ç«¯å£å·ï¼Œè¿™ç§å”¯ä¸€æ€§è®¾è®¡ç¡®ä¿äº†åŒä¸€ä¸ªæœåŠ¡å®ä¾‹çš„æ³¨å†Œä¿¡æ¯åœ¨ä»»ä½•èŠ‚ç‚¹éƒ½æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥åŒä¸€å®ä¾‹çš„æ³¨å†Œä¿¡æ¯åœ¨ä¸åŒèŠ‚ç‚¹ã€ä¸åŒæ—¶é—´å…ˆåå†™å…¥éƒ½ä¸ä¼šå­˜åœ¨æ•°æ®å†²çªé—®é¢˜ï¼Œ<strong>å†™å…¥æ“ä½œæ˜¯å¹‚ç­‰çš„</strong>ï¼Œå¤§å¤§é™ä½äº†ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„å¤æ‚åº¦ã€‚</li>
</ul>
<p>ç†è§£äº†è¿™ä¸€ç‚¹ï¼Œæˆ‘è§‰å¾—ä¾¿æ¸…æ¥šäº† Distro åè®®çš„ç²¾é«“ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ä»¥ä¸‹åŸå› ä½¿å¾— Distro åè®®é€‚ç”¨ï¼š</p>
<ol>
<li>æœåŠ¡å®ä¾‹çš„æ³¨å†Œä¿¡æ¯æ˜¯ <strong>ä¸´æ—¶æ•°æ®</strong>ï¼šæ•°æ®å…·æœ‰ç”Ÿå‘½å‘¨æœŸï¼Œä¼šè‡ªåŠ¨è¿‡æœŸæˆ–è¢«æ¸…ç†ï¼Œä¸éœ€è¦æŒä¹…åŒ–å­˜å‚¨ï¼Œä¸¢å¤±åå¯ä»¥é‡æ–°ç”Ÿæˆï¼Œé™ä½äº†ç»´æŠ¤å®ä¾‹æ•°æ®çš„éš¾åº¦</li>
<li>ä¸šåŠ¡åœºæ™¯èƒ½å¤Ÿæ¥å—æ•°æ®çš„ <strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼šå¯ç”¨æ€§ï¼ˆAvailabilityï¼‰æ¯”ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰æ›´é‡è¦ï¼ŒçŸ­æ—¶é—´å†…éƒ¨åˆ†å®ä¾‹æ³¨å†Œä¿¡æ¯ä¸ä¸€è‡´ä¸å½±å“ä¸šåŠ¡</li>
<li>å¤šä¸ª Nacos Client å®¢æˆ·ç«¯ä¼šè¿æ¥åˆ°ä¸åŒçš„ Nacos Server æœåŠ¡ç«¯ï¼Œç›¸å½“äºè¿›è¡Œäº† <strong>åˆ†ç‰‡</strong>ï¼šæ¯ä¸ªæœåŠ¡èŠ‚ç‚¹è´Ÿè´£ç‰¹å®šçš„å®¢æˆ·ç«¯å®ä¾‹ï¼Œå®¢æˆ·ç«¯æ³¨å†Œçš„æ“ä½œåŸºæœ¬åªåœ¨ä¸€ä¸ªæœåŠ¡èŠ‚ç‚¹å‘ç”Ÿï¼Œå¤§å¤§é™ä½äº†å‘ç”Ÿå†™å…¥å†²çªçš„å¯èƒ½</li>
</ol>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹åœ¨ Distro åè®®ä¸­æ˜¯å¦‚ä½•æ¸…ç†è¿‡æœŸæ•°æ®çš„ï¼Œæ ¸å¿ƒé€»è¾‘åœ¨ <code>ExpiredClientCleaner</code> ä¸­ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®šæœŸæ‰§è¡Œçš„ä»»åŠ¡ï¼Œä»»åŠ¡é€»è¾‘å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ExpiredClientCleaner</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> EphemeralIpPortClientManager clientManager;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">currentTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
        <span class="hljs-comment">// è·å–å½“å‰ Nacos Server ä¸‹è¿æ¥çš„æ‰€æœ‰å®¢æˆ·ç«¯</span>
        <span class="hljs-keyword">for</span> (String each : clientManager.allClientId()) {
            <span class="hljs-comment">// éå†å¤„ç†å®¢æˆ·ç«¯ä¿¡æ¯</span>
            <span class="hljs-type">IpPortBasedClient</span> <span class="hljs-variable">client</span> <span class="hljs-operator">=</span> (IpPortBasedClient) clientManager.getClient(each);
            <span class="hljs-comment">// å¦‚æœå®¢æˆ·ç«¯å·²ç»å¤±æ•ˆï¼ˆåœ¨è§„å®šæ—¶é—´æ®µå†…å¤±å»å¿ƒè·³ï¼‰äº†</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> != client &amp;&amp; isExpireClient(currentTime, client)) {
                <span class="hljs-comment">// æ‰§è¡Œå®¢æˆ·ç«¯æ–­å¼€çš„é€»è¾‘ï¼Œä¼šè§¦å‘ ClientDisconnectEvent äº‹ä»¶ï¼Œåˆ é™¤å¤±æ•ˆçš„é“¾æ¥å¹¶é€šçŸ¥é›†ç¾¤å†…å…¶ä»–èŠ‚ç‚¹</span>
                clientManager.clientDisconnected(each);
            }
        }
    }
}
</code></pre>
<p>è¿™ä¸ªå®šæ—¶ä»»åŠ¡ä¼šåœ¨ Nacos Server å¯åŠ¨æ—¶ï¼Œåœ¨ <code>ScheduledExecutorService</code> ä¸­å®šæœŸ 5s æ‰§è¡Œä¸€æ¬¡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EphemeralIpPortClientManager</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ClientManager</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">EphemeralIpPortClientManager</span><span class="hljs-params">(DistroMapper distroMapper, SwitchDomain switchDomain)</span> {
        <span class="hljs-comment">// é»˜è®¤å®šæœŸ 5s æ£€æŸ¥ä¸€æ¬¡</span>
        GlobalExecutor.scheduleExpiredClientCleaner(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ExpiredClientCleaner</span>(<span class="hljs-built_in">this</span>, switchDomain), <span class="hljs-number">0</span>,
                Constants.DEFAULT_HEART_BEAT_INTERVAL, TimeUnit.MILLISECONDS);
        <span class="hljs-comment">// ...</span>
    }
}
</code></pre>
<p>ä»¥æ­¤æ¥ä¿è¯è¿‡æœŸçš„å®ä¾‹æ•°æ®èƒ½åŠæ—¶è¢«ç§»é™¤ã€‚</p>
<hr/>
<h3 data-id="heading-3">å·¨äººçš„è‚©è†€</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Falibaba%2Fnacos" target="_blank" title="https://github.com/alibaba/nacos" ref="nofollow noopener noreferrer">Github - alibaba/nacos</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fwenxuehai%2Fp%2F16179629.html" target="_blank" title="https://www.cnblogs.com/wenxuehai/p/16179629.html" ref="nofollow noopener noreferrer">åšå®¢å›­ - Nacosçš„åŸºæœ¬ä½¿ç”¨ï¼ˆæ³¨å†Œä¸­å¿ƒã€é…ç½®ä¸­å¿ƒï¼‰</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude vs Doubao Seek Code äº§ç èƒ½åŠ›å¯¹æ¯”]]></title>    <link>https://juejin.cn/post/7572537221540642831</link>    <guid>https://juejin.cn/post/7572537221540642831</guid>    <pubDate>2025-11-16T01:51:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572537221540642831" data-draft-id="7572714389942517812" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude vs Doubao Seek Code äº§ç èƒ½åŠ›å¯¹æ¯”"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,Claude,ä»£ç è§„èŒƒ"/> <meta itemprop="datePublished" content="2025-11-16T01:51:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="jump_jump"/> <meta itemprop="url" content="https://juejin.cn/user/4230576474692765"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude vs Doubao Seek Code äº§ç èƒ½åŠ›å¯¹æ¯”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4230576474692765/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    jump_jump
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T01:51:43.000Z" title="Sun Nov 16 2025 01:51:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æµ‹è¯•åœºæ™¯</h2>
<p><strong>ç›¸åŒæµ‹è¯•ä»»åŠ¡</strong>ï¼šæ„å»ºä¸€ä¸ª agentï¼Œç”¨äºæ„å»ºäº§å“å¯è¡Œæ€§æ–¹æ¡ˆï¼Œæ”¯æŒæ–‡æ¡£äº§å‡ºï¼Œä½¿ç”¨ CrewAI</p>
<h2 data-id="heading-1">æ¨¡å‹ä¿¡æ¯</h2>




















<table><thead><tr><th>ç»´åº¦</th><th>Claude Code</th><th>Doubao Seek Code</th></tr></thead><tbody><tr><td>æ¨¡å‹ç‰ˆæœ¬</td><td>claude-sonnet-4-5-20250929</td><td>doubao-seed-code-preview-latest</td></tr><tr><td>å®šä½</td><td>Anthropic å®˜æ–¹ CLI å·¥å…·</td><td>å­—èŠ‚è·³åŠ¨è±†åŒ…ä»£ç æ¨¡å‹</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">ä¸€ã€é¡¹ç›®ç»“æ„å¯¹æ¯”</h2>
<h3 data-id="heading-3">Claude Code ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">crew-demo/
â”œâ”€â”€ main.py                      <span class="hljs-comment"># CLIå…¥å£æ–‡ä»¶</span>
â”œâ”€â”€ requirements.txt             <span class="hljs-comment"># Pythonä¾èµ–</span>
â”œâ”€â”€ .env.example                <span class="hljs-comment"># ç¯å¢ƒå˜é‡ç¤ºä¾‹</span>
â”œâ”€â”€ README.md                   <span class="hljs-comment"># é¡¹ç›®æ–‡æ¡£</span>
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ crew_manager.py         <span class="hljs-comment"># Crewç®¡ç†å™¨</span>
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ feasibility_agents.py   <span class="hljs-comment"># Agentå®šä¹‰</span>
â”‚   â”œâ”€â”€ tasks/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ feasibility_tasks.py    <span class="hljs-comment"># ä»»åŠ¡å®šä¹‰</span>
â”‚   â”œâ”€â”€ tools/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ document_generator.py   <span class="hljs-comment"># æ–‡æ¡£ç”Ÿæˆå·¥å…·</span>
â”‚   â””â”€â”€ config/
â”‚       â””â”€â”€ __init__.py
â””â”€â”€ output/                     <span class="hljs-comment"># è¾“å‡ºæŠ¥å‘Šç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰</span>
    â””â”€â”€ feasibility_report_*.md
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>é‡‡ç”¨æ ‡å‡† Python åŒ…ç»“æ„</li>
<li>æ¨¡å—åŒ–è®¾è®¡ï¼ŒèŒè´£åˆ†ç¦»æ¸…æ™°</li>
<li>ä½¿ç”¨ <code>src/</code> ç›®å½•éš”ç¦»æºä»£ç </li>
<li>æ›´ç¬¦åˆå¤§å‹é¡¹ç›®çš„å·¥ç¨‹åŒ–è§„èŒƒ</li>
</ul>
<h3 data-id="heading-4">Doubao Seek Code ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">â”œâ”€â”€ config.yaml         <span class="hljs-comment"># æ™ºèƒ½ä½“ä¸ä»»åŠ¡é…ç½®æ–‡ä»¶</span>
â”œâ”€â”€ agents.py           <span class="hljs-comment"># æ™ºèƒ½ä½“å®šä¹‰æ¨¡å—</span>
â”œâ”€â”€ tasks.py            <span class="hljs-comment"># ä»»åŠ¡å®šä¹‰æ¨¡å—</span>
â”œâ”€â”€ crew.py             <span class="hljs-comment"># CrewAI åè°ƒæ¨¡å—</span>
â”œâ”€â”€ main.py             <span class="hljs-comment"># ä¸»å…¥å£ç¨‹åº</span>
â”œâ”€â”€ example_usage.py    <span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
â”œâ”€â”€ .env.example        <span class="hljs-comment"># ç¯å¢ƒå˜é‡ç¤ºä¾‹</span>
â””â”€â”€ requirements.txt    <span class="hljs-comment"># ä¾èµ–åˆ—è¡¨</span>
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>æ‰å¹³åŒ–ç»“æ„ï¼Œæ‰€æœ‰æ–‡ä»¶åœ¨æ ¹ç›®å½•</li>
<li>é€šè¿‡é…ç½®æ–‡ä»¶ï¼ˆconfig.yamlï¼‰ç®¡ç†é…ç½®</li>
<li>ç»“æ„ç®€æ´ï¼Œé€‚åˆä¸­å°å‹é¡¹ç›®</li>
<li>å¿«é€Ÿä¸Šæ‰‹ï¼Œæ˜“äºç†è§£</li>
</ul>
<p><strong>å¯¹æ¯”ç»“è®º</strong>ï¼š</p>
<ul>
<li>Claude Code æ›´æ³¨é‡å·¥ç¨‹åŒ–å’Œå¯æ‰©å±•æ€§</li>
<li>Doubao æ›´æ³¨é‡ç®€æ´æ€§å’Œå¿«é€Ÿå¼€å‘</li>
</ul>
<hr/>
<h2 data-id="heading-5">äºŒã€Agent å®šä¹‰æ–¹å¼å¯¹æ¯”</h2>
<h3 data-id="heading-6">Claude Code - ä»£ç åŒ–å®šä¹‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">financial_analyst</span>(<span class="hljs-params">self</span>) -&gt; Agent:
    <span class="hljs-string">"""è´¢åŠ¡åˆ†æå¸ˆ - è´Ÿè´£æˆæœ¬æ”¶ç›Šåˆ†æ"""</span>
    <span class="hljs-keyword">return</span> Agent(
        role=<span class="hljs-string">"è´¢åŠ¡åˆ†æå¸ˆ"</span>,
        goal=<span class="hljs-string">"è¯„ä¼°äº§å“çš„è´¢åŠ¡å¯è¡Œæ€§ï¼ŒåŒ…æ‹¬æŠ•èµ„æˆæœ¬ã€é¢„æœŸæ”¶ç›Šã€ROIå’Œè´¢åŠ¡é£é™©"</span>,
        backstory=<span class="hljs-string">"""ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„è´¢åŠ¡åˆ†æå¸ˆï¼Œä¸“æ³¨äºåˆ›ä¸šé¡¹ç›®å’Œæ–°äº§å“çš„è´¢åŠ¡è¯„ä¼°ã€‚
        ä½ èƒ½å¤Ÿå‡†ç¡®ä¼°ç®—é¡¹ç›®æˆæœ¬ï¼Œé¢„æµ‹æ”¶å…¥æ¨¡å‹ï¼Œå¹¶è®¡ç®—å…³é”®è´¢åŠ¡æŒ‡æ ‡ã€‚
        ä½ çš„åˆ†æå¸®åŠ©å†³ç­–è€…ç†è§£é¡¹ç›®çš„ç»æµä»·å€¼å’ŒæŠ•èµ„å›æŠ¥ã€‚"""</span>,
        verbose=<span class="hljs-literal">True</span>,
        allow_delegation=<span class="hljs-literal">False</span>,
        llm=self.llm
    )
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>ç±»å‹æç¤ºï¼ŒIDE æ”¯æŒæ›´å¥½</li>
<li>çµæ´»æ€§é«˜ï¼Œå¯ä»¥åŠ¨æ€é…ç½®</li>
<li>backstory è¯¦ç»†ï¼Œä¸Šä¸‹æ–‡ä¸°å¯Œ</li>
</ul>
<h3 data-id="heading-7">Doubao Seek Code - é…ç½®åŒ–å®šä¹‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">financial_analyst:</span>
    <span class="hljs-attr">role:</span> <span class="hljs-string">è´¢åŠ¡åˆ†æå¸ˆ</span>
    <span class="hljs-attr">goal:</span> <span class="hljs-string">è¿›è¡Œè´¢åŠ¡é¢„æµ‹ã€æˆæœ¬åˆ†æå’ŒæŠ•èµ„å›æŠ¥ç‡è®¡ç®—</span>
    <span class="hljs-attr">backstory:</span> <span class="hljs-string">æ³¨å†Œä¼šè®¡å¸ˆ,æ‹¥æœ‰ä¸°å¯Œçš„</span> <span class="hljs-string">startup</span> <span class="hljs-string">è´¢åŠ¡å»ºæ¨¡ç»éªŒ</span>
    <span class="hljs-attr">tools:</span> []
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>å£°æ˜å¼é…ç½®ï¼Œéå¼€å‘äººå‘˜ä¹Ÿèƒ½ç†è§£</li>
<li>é›†ä¸­ç®¡ç†ï¼Œæ˜“äºæ‰¹é‡ä¿®æ”¹</li>
<li>ç»“æ„æ¸…æ™°ï¼Œé…ç½®ä¸ä»£ç åˆ†ç¦»</li>
</ul>
<p><strong>å¯¹æ¯”ç»“è®º</strong>ï¼š</p>
<ul>
<li>Claude Code é€‚åˆéœ€è¦å¤æ‚é€»è¾‘å’ŒåŠ¨æ€é…ç½®çš„åœºæ™¯</li>
<li>Doubao é€‚åˆé…ç½®é©±åŠ¨ã€éœ€è¦é¢‘ç¹è°ƒæ•´è§’è‰²çš„åœºæ™¯</li>
</ul>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€ä»»åŠ¡æè¿°å¯¹æ¯”</h2>
<h3 data-id="heading-9">Claude Code - è¯¦ç»†ä»»åŠ¡æè¿°</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@staticmethod</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">market_research_task</span>(<span class="hljs-params">agent, product_description: <span class="hljs-built_in">str</span></span>) -&gt; Task:
    <span class="hljs-string">"""å¸‚åœºè°ƒç ”ä»»åŠ¡"""</span>
    <span class="hljs-keyword">return</span> Task(
        description=<span class="hljs-string">f"""
        é’ˆå¯¹ä»¥ä¸‹äº§å“è¿›è¡Œæ·±å…¥çš„å¸‚åœºè°ƒç ”å’Œåˆ†æï¼š

        äº§å“æè¿°ï¼š<span class="hljs-subst">{product_description}</span>

        è¯·å®Œæˆä»¥ä¸‹åˆ†æï¼š
        1. ç›®æ ‡å¸‚åœºåˆ†æ
            - ç›®æ ‡ç”¨æˆ·ç”»åƒ
            - å¸‚åœºè§„æ¨¡ï¼ˆTAMã€SAMã€SOMï¼‰
            - ç”¨æˆ·ç—›ç‚¹å’Œéœ€æ±‚

        2. ç«å“åˆ†æ
            - ä¸»è¦ç«å“åˆ—è¡¨ï¼ˆè‡³å°‘3-5ä¸ªï¼‰
            - ç«å“ä¼˜åŠ£åŠ¿å¯¹æ¯”
            - å¸‚åœºå·®å¼‚åŒ–æœºä¼š

        3. å¸‚åœºè¶‹åŠ¿
            - è¡Œä¸šå‘å±•è¶‹åŠ¿
            - æŠ€æœ¯è¶‹åŠ¿
            - ç”¨æˆ·è¡Œä¸ºè¶‹åŠ¿

        4. å¸‚åœºæœºä¼šè¯„ä¼°
            - å¸‚åœºåˆ‡å…¥ç‚¹
            - æ½œåœ¨å¢é•¿ç©ºé—´
            - å¸‚åœºæ—¶æœºè¯„ä¼°

        è¯·æä¾›è¯¦ç»†çš„æ•°æ®æ”¯æŒå’Œæ¸…æ™°çš„ç»“è®ºã€‚
        """</span>,
        agent=agent,
        expected_output=<span class="hljs-string">"è¯¦ç»†çš„å¸‚åœºè°ƒç ”æŠ¥å‘Šï¼ŒåŒ…å«ç›®æ ‡å¸‚åœºåˆ†æã€ç«å“åˆ†æã€å¸‚åœºè¶‹åŠ¿å’Œæœºä¼šè¯„ä¼°"</span>,
    )
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>ä»»åŠ¡æè¿°æå…¶è¯¦ç»†</li>
<li>æ˜ç¡®äº†æ¯ä¸ªåˆ†æç»´åº¦çš„å…·ä½“è¦æ±‚</li>
<li>åŒ…å«æœŸæœ›è¾“å‡ºçš„è¯¦ç»†è¯´æ˜</li>
</ul>
<h3 data-id="heading-10">Doubao Seek Code - ç®€æ´ä»»åŠ¡æè¿°</h3>
<pre><code class="hljs language-python" lang="python">market_analysis_task = Task(
    description=self._format_task_description(
        <span class="hljs-comment"># 1. åˆ†æç›®æ ‡å¸‚åœºè§„æ¨¡ï¼ˆTAM/SAM/SOMï¼‰</span>
        <span class="hljs-comment"># 2. ç ”ç©¶å¸‚åœºå¢é•¿è¶‹åŠ¿å’Œé©±åŠ¨å› ç´ </span>
        <span class="hljs-comment"># 3. åˆ†æç«äº‰æ ¼å±€ï¼ˆç›´æ¥/é—´æ¥ç«äº‰å¯¹æ‰‹ï¼‰</span>
        <span class="hljs-comment"># 4. å®šä¹‰ç›®æ ‡ç”¨æˆ·ç”»åƒå’Œæ ¸å¿ƒéœ€æ±‚</span>
        tasks_config[<span class="hljs-string">"market_analysis"</span>][<span class="hljs-string">"description"</span>]
    ),
    agent=self.agents[<span class="hljs-string">"market_researcher"</span>],
    expected_output=<span class="hljs-string">"ç»“æ„åŒ–çš„å¸‚åœºå¯è¡Œæ€§åˆ†ææŠ¥å‘Šç‰‡æ®µï¼ŒåŒ…å«å¸‚åœºè§„æ¨¡ã€è¶‹åŠ¿ã€ç«äº‰æ ¼å±€å’Œç”¨æˆ·éœ€æ±‚"</span>,
)
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>å®é™…æè¿°ä»é…ç½®æ–‡ä»¶è¯»å–</li>
<li>æ›´ç®€æ´ï¼Œä½†ä¾èµ–é…ç½®æ–‡ä»¶çš„å®Œæ•´æ€§</li>
</ul>
<p><strong>å¯¹æ¯”ç»“è®º</strong>ï¼š</p>
<ul>
<li>Claude Code æ›´é€‚åˆå¤æ‚ä»»åŠ¡ï¼Œéœ€è¦è¯¦ç»†æŒ‡å¯¼</li>
<li>Doubao æ›´é€‚åˆæ ‡å‡†åŒ–ä»»åŠ¡ï¼Œé€šè¿‡é…ç½®å¤ç”¨</li>
</ul>
<hr/>
<h2 data-id="heading-11">å››ã€README æ–‡æ¡£å¯¹æ¯”</h2>
<h3 data-id="heading-12">æ–‡æ¡£å®Œæ•´åº¦</h3>























































<table><thead><tr><th>ç»´åº¦</th><th>Claude Code</th><th>Doubao Seek Code</th></tr></thead><tbody><tr><td>åŠŸèƒ½ä»‹ç»</td><td>âœ… è¯¦ç»†</td><td>âœ… ç®€æ´</td></tr><tr><td>å®‰è£…æ­¥éª¤</td><td>âœ… å®Œæ•´ï¼ˆå«è™šæ‹Ÿç¯å¢ƒï¼‰</td><td>âœ… åŸºç¡€æ­¥éª¤</td></tr><tr><td>ä½¿ç”¨ç¤ºä¾‹</td><td>âœ… å¤šç§åœºæ™¯ç¤ºä¾‹</td><td>âœ… åŸºç¡€ç¤ºä¾‹</td></tr><tr><td>é«˜çº§åŠŸèƒ½</td><td>âœ… æ¨¡å‹åˆ‡æ¢ã€åˆ†ææ¨¡å¼</td><td>âŒ æ— </td></tr><tr><td>æµç¨‹å›¾</td><td>âœ… Mermaid å›¾è¡¨</td><td>âŒ æ— </td></tr><tr><td>Agent è¯¦è§£</td><td>âœ… æ¯ä¸ª Agent è¯¦ç»†è¯´æ˜</td><td>âœ… è¡¨æ ¼æ¦‚è§ˆ</td></tr><tr><td>æœ€ä½³å®è·µ</td><td>âœ… æä¾›å»ºè®®</td><td>âœ… æ³¨æ„äº‹é¡¹</td></tr><tr><td>æ•…éšœæ’æŸ¥</td><td>âœ… å¸¸è§é—®é¢˜ Q&amp;A</td><td>âŒ æ— </td></tr><tr><td>è‡ªå®šä¹‰æ‰©å±•</td><td>âœ… ä»£ç ç¤ºä¾‹</td><td>âœ… é…ç½®è¯´æ˜</td></tr></tbody></table>
<p><strong>å¯¹æ¯”ç»“è®º</strong>ï¼š</p>
<ul>
<li>Claude Code æ–‡æ¡£æ›´é€‚åˆåˆå­¦è€…å’Œæ·±åº¦ç”¨æˆ·</li>
<li>Doubao æ–‡æ¡£é€‚åˆå¿«é€Ÿä¸Šæ‰‹</li>
</ul>
<hr/>
<h2 data-id="heading-13">äº”ã€æ ¸å¿ƒä¼˜åŠ¿å¯¹æ¯”</h2>
<h3 data-id="heading-14">Claude Code ä¼˜åŠ¿</h3>
<ol>
<li>
<p><strong>äº¤äº’æ€§å¼º</strong></p>
<ul>
<li>æ”¯æŒéšæ—¶æ‰“æ–­å½“å‰ä»»åŠ¡</li>
<li>å¯æ ¹æ®ç”¨æˆ·è¾“å…¥åŠ¨æ€è°ƒæ•´åç»­é€»è¾‘</li>
<li>æ›´ç¬¦åˆå®é™…å¼€å‘ä¸­çš„è¿­ä»£è¿‡ç¨‹</li>
</ul>
</li>
<li>
<p><strong>å·¥ç¨‹åŒ–ç¨‹åº¦é«˜</strong></p>
<ul>
<li>æ ‡å‡†åŒ–çš„é¡¹ç›®ç»“æ„</li>
<li>å®Œå–„çš„æ–‡æ¡£å’Œç¤ºä¾‹</li>
<li>æ”¯æŒå¤šç§åˆ†ææ¨¡å¼ï¼ˆfull/quickï¼‰</li>
</ul>
</li>
<li>
<p><strong>åŠŸèƒ½ä¸°å¯Œ</strong></p>
<ul>
<li>æ”¯æŒä»æ–‡ä»¶è¯»å–äº§å“æè¿°</li>
<li>æä¾›å¤šç§æ¨¡å‹é€‰æ‹©</li>
<li>åŒ…å«æµç¨‹å¯è§†åŒ–ï¼ˆMermaidï¼‰</li>
</ul>
</li>
</ol>
<h3 data-id="heading-15">Doubao Seek Code ä¼˜åŠ¿</h3>
<ol>
<li>
<p><strong>æˆæœ¬ä¼˜åŠ¿</strong></p>
<ul>
<li>é¦–æœˆ 9.9 å…ƒ</li>
<li>åç»­ 40 å…ƒ/æœˆ</li>
<li>å¯¹æ¯” Claude/GPT-4 æ˜¾è‘—é™ä½æˆæœ¬</li>
</ul>
</li>
<li>
<p><strong>é…ç½®åŒ–è®¾è®¡</strong></p>
<ul>
<li>YAML é…ç½®æ–‡ä»¶ç®¡ç†</li>
<li>éå¼€å‘äººå‘˜ä¹Ÿèƒ½è°ƒæ•´</li>
<li>æ˜“äºæ‰¹é‡ä¿®æ”¹å’Œå¤ç”¨</li>
</ul>
</li>
<li>
<p><strong>å¿«é€Ÿä¸Šæ‰‹</strong></p>
<ul>
<li>æ‰å¹³åŒ–ç»“æ„ï¼Œæ–‡ä»¶æ›´å°‘</li>
<li>ç®€æ´çš„æ–‡æ¡£</li>
<li>è‡ªå¸¦ä½¿ç”¨ç¤ºä¾‹ï¼ˆexample_usage.pyï¼‰</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-16">å…­ã€å­˜åœ¨çš„é—®é¢˜</h2>
<h3 data-id="heading-17">Doubao Seek Code</h3>
<p><strong>å·¥ä½œæµé—®é¢˜</strong>ï¼š</p>
<ul>
<li>éœ€è¦åœ¨æç¤ºè¯ä¸­æ˜ç¡®æ·»åŠ "ç›´æ¥äº§ç "</li>
<li>é»˜è®¤æµç¨‹ï¼šå…ˆå»ºç«‹ requirements.txt â†’ æ‹‰å–ä¾èµ– â†’ äº§ç </li>
<li>ç”¨æˆ·å¿…é¡»ä¸­æ­¢å¯¹è¯å¹¶é‡æ–°è¦æ±‚æ‰èƒ½è·³è¿‡ä¾èµ–å®‰è£…</li>
<li>Claude Code åˆ™ä¼šå…ˆå®Œæˆæ‰€æœ‰ä»£ç ç”Ÿæˆï¼Œæœ€åå†å¤„ç†ä¾èµ–</li>
</ul>
<p><strong>å½±å“</strong>ï¼š</p>
<ul>
<li>é™ä½äº†å¼€å‘æ•ˆç‡</li>
<li>æ‰“æ–­äº†è¿ç»­çš„äº§ç ä½“éªŒ</li>
<li>éœ€è¦ç”¨æˆ·å¹²é¢„</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RocketMQ vs Kafka03 - é«˜å¯ç”¨æœºåˆ¶æ·±åº¦å‰–æ]]></title>    <link>https://juejin.cn/post/7572510909445586994</link>    <guid>https://juejin.cn/post/7572510909445586994</guid>    <pubDate>2025-11-15T12:51:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572510909445586994" data-draft-id="7572502156487147546" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RocketMQ vs Kafka03 - é«˜å¯ç”¨æœºåˆ¶æ·±åº¦å‰–æ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T12:51:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼ å°é»‘12"/> <meta itemprop="url" content="https://juejin.cn/user/985627390911096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RocketMQ vs Kafka03 - é«˜å¯ç”¨æœºåˆ¶æ·±åº¦å‰–æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/985627390911096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼ å°é»‘12
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T12:51:51.000Z" title="Sat Nov 15 2025 12:51:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»24åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬ä¸‰ç¯‡ï¼šé«˜å¯ç”¨æœºåˆ¶æ·±åº¦å‰–æ</h2>
<blockquote>
<p>é«˜å¯ç”¨è¿™äº‹å„¿ï¼Œä»æ¥ä¸æ˜¯é æŸä¸€ä¸ªå‚æ•°"è°ƒä¼˜"å°±èƒ½è§£å†³çš„ã€‚å®ƒèƒŒåæ˜¯å‰¯æœ¬åè®®ã€æ•…éšœæ£€æµ‹ã€è‡ªåŠ¨åˆ‡æ¢ã€æ•°æ®å¯¹é½è¿™ä¸€æ•´å¥—æœºåˆ¶ã€‚æœ¬æ–‡ä¼šä» Kafka å’Œ RocketMQ çš„æºç å®ç°å…¥æ‰‹ï¼ŒæŠŠ ISRã€HW/LEOã€Raftã€ä¸»ä»å¤åˆ¶ç­‰å…³é”®è·¯å¾„æ‹†å¼€è®²ï¼ŒåŒæ—¶ç»™å‡ºçœŸå®åœºæ™¯ä¸‹çš„é…ç½®ç­–ç•¥å’Œè¸©å‘ç»éªŒã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">3.1 é«˜å¯ç”¨è®¾è®¡ç†å¿µ</h3>
<p>å…ˆç†æ¸…æ¦‚å¿µï¼šé«˜å¯ç”¨ï¼ˆHAï¼‰çš„ç›®æ ‡æ˜¯"å°½å¯èƒ½å‡å°‘ä¸å¯ç”¨æ—¶é—´"ã€‚ä¸šç•Œå¸¸ç”¨çš„æŒ‡æ ‡æ˜¯ï¼š</p>
<ul>
<li><strong>99.9%</strong>ï¼šå¹´ä¸å¯ç”¨æ—¶é—´çº¦ 8.76 å°æ—¶ï¼ˆä¸€èˆ¬ä¸šåŠ¡å¯æ¥å—ï¼‰</li>
<li><strong>99.99%</strong>ï¼šå¹´ä¸å¯ç”¨æ—¶é—´çº¦ 52.6 åˆ†é’Ÿï¼ˆé‡‘èã€æ”¯ä»˜ç­‰æ ¸å¿ƒç³»ç»Ÿï¼‰</li>
<li><strong>99.999%</strong>ï¼šå¹´ä¸å¯ç”¨æ—¶é—´çº¦ 5.26 åˆ†é’Ÿï¼ˆè¿è¥å•†çº§åˆ«ï¼‰</li>
</ul>
<p>è¦åšåˆ° 4 ä¸ª 9ï¼Œå¿…é¡»åœ¨æ¶æ„ã€æµç¨‹ã€å·¥å…·ä¸‰ä¸ªå±‚é¢åŒæ—¶æŠ•å…¥ï¼š</p>
<ol>
<li><strong>æ¶æ„å±‚</strong>ï¼šå¤šå‰¯æœ¬ã€è·¨æœºæˆ¿ã€è‡ªåŠ¨æ•…éšœè½¬ç§»</li>
<li><strong>æµç¨‹å±‚</strong>ï¼šå˜æ›´å®¡æ‰¹ã€å®¹é‡è§„åˆ’ã€æ•…éšœæ¼”ç»ƒ</li>
<li><strong>å·¥å…·å±‚</strong>ï¼šç›‘æ§å‘Šè­¦ã€è‡ªåŠ¨åŒ–è¿ç»´ã€å›æ»šæœºåˆ¶</li>
</ol>
<p>Kafka å’Œ RocketMQ åœ¨è¿™ä¸‰ä¸ªç»´åº¦çš„æŠ•å…¥æ–¹å¼ä¸å¤ªä¸€æ ·ã€‚</p>
<h4 data-id="heading-2">Kafkaï¼šå»ä¸­å¿ƒ + ISR + Controller</h4>
<p>Kafka çš„æ¶æ„å“²å­¦æ˜¯"å»ä¸­å¿ƒåŒ–"ï¼šæ¯ä¸ª Broker éƒ½å¯èƒ½æ˜¯æŸäº› Partition çš„ Leaderï¼Œä¹Ÿå¯èƒ½æ˜¯å¦ä¸€äº› Partition çš„ Followerã€‚è¿™ç§è®¾è®¡å¸¦æ¥ä¸¤ä¸ªå¥½å¤„ï¼š</p>
<ol>
<li><strong>è´Ÿè½½å‡è¡¡å¤©ç„¶</strong>ï¼šLeader åˆ†æ•£åœ¨å„ä¸ª Brokerï¼Œä¸ä¼šæ‰€æœ‰å‹åŠ›é›†ä¸­åœ¨æŸå°æœºå™¨ã€‚</li>
<li><strong>æ‰©å±•æ€§å¼º</strong>ï¼šåŠ ä¸€å° Brokerï¼Œç«‹åˆ»å°±èƒ½åˆ†æ‹…æµé‡ã€‚</li>
</ol>
<p>ä½†å»ä¸­å¿ƒä¹Ÿæœ‰ä»£ä»·ï¼šéœ€è¦ä¸€ä¸ª"åè°ƒè€…"æ¥ç®¡ç†å…ƒæ•°æ®ã€è§¦å‘ Leader é€‰ä¸¾ã€‚è¿™ä¸ªåè°ƒè€…å°±æ˜¯ Controllerã€‚</p>
<p><strong>Controller çš„æ ¸å¿ƒèŒè´£</strong>ï¼š</p>
<ul>
<li>ç›‘å¬ Broker çš„ä¸Šä¸‹çº¿ï¼ˆé€šè¿‡ ZooKeeper session / KRaft å¿ƒè·³ï¼‰</li>
<li>ç®¡ç†æ¯ä¸ª Partition çš„ ISR åˆ—è¡¨</li>
<li>åœ¨ Leader å®•æœºæ—¶ä» ISR ä¸­é€‰æ–° Leader</li>
<li>æŠŠå…ƒæ•°æ®å˜æ›´é€šçŸ¥åˆ°æ‰€æœ‰ Broker</li>
</ul>
<p><strong>ISR æœºåˆ¶</strong>ï¼š</p>
<ul>
<li>ISRï¼ˆIn-Sync Replicasï¼‰æ˜¯ Kafka é«˜å¯ç”¨çš„æ ¸å¿ƒã€‚åªæœ‰"ç´§è·Ÿ"Leader çš„å‰¯æœ¬æ‰èƒ½ç•™åœ¨ ISR ä¸­ã€‚</li>
<li>åˆ¤å®šæ ‡å‡†ï¼šFollower çš„ LEOï¼ˆLog End Offsetï¼‰ä¸ Leader çš„ LEO å·®è·ä¸è¶…è¿‡ <code>replica.lag.time.max.ms</code>ï¼ˆé»˜è®¤ 10 ç§’ï¼‰ã€‚</li>
<li>å†™å…¥æ—¶ Producer é…ç½® <code>acks=all</code>ï¼Œåªæœ‰ ISR å†…çš„æ‰€æœ‰å‰¯æœ¬éƒ½å†™å…¥æˆåŠŸï¼Œæ‰ç®—çœŸæ­£æˆåŠŸã€‚</li>
</ul>
<p>Kafka çš„è¿™å¥—ç†å¿µï¼Œé€‚åˆ"é«˜åå + å¤šåˆ†åŒº + åŠ¨æ€æ‰©ç¼©å®¹"çš„åœºæ™¯ï¼Œæ¯”å¦‚æ—¥å¿—æµã€ç›‘æ§æ•°æ®ã€‚</p>
<h4 data-id="heading-3">RocketMQï¼šä¸»å¤‡æ˜ç¡® + åˆ·ç›˜æ§åˆ¶ + DLedger</h4>
<p>RocketMQ çš„å“²å­¦æ˜¯"ä¸»å¤‡è§’è‰²æ¸…æ™°"ï¼šMaster è´Ÿè´£è¯»å†™ï¼ŒSlave è´Ÿè´£å¤‡ä»½ã€‚è¿™ç§è®¾è®¡ç®€å•ç²—æš´ï¼Œè¿ç»´å®¹æ˜“ç†è§£ã€‚</p>
<p><strong>Master-Slave çš„ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>å†™å…¥è·¯å¾„æ˜ç¡®ï¼šProducer åªè¿ Masterï¼Œä¸ä¼šåˆ†æ•£åˆ°å¤šå°æœºå™¨ã€‚</li>
<li>åˆ‡æ¢é€»è¾‘æ¸…æ™°ï¼šMaster æŒ‚äº†ï¼Œè¦ä¹ˆäººå·¥æå‡ Slaveï¼Œè¦ä¹ˆé  DLedger è‡ªåŠ¨é€‰ä¸¾ã€‚</li>
<li>é…ç½®ç›´è§‚ï¼š<code>SYNC_MASTER</code> vs <code>ASYNC_MASTER</code>ã€åŒæ­¥åˆ·ç›˜ vs å¼‚æ­¥åˆ·ç›˜ï¼Œç»„åˆèµ·æ¥å°±æ˜¯å››ç§å¯é æ€§ç­‰çº§ã€‚</li>
</ul>
<p>ä½†ä¸»å¤‡ä¹Ÿæœ‰é™åˆ¶ï¼šå• Master çš„å†™å…¥èƒ½åŠ›æœ‰ä¸Šé™ã€‚æ‰€ä»¥ RocketMQ é€šå¸¸ä¼šéƒ¨ç½²å¤šç»„ Master-Slaveï¼Œæ¯ç»„æ‰¿æ‹…ä¸€éƒ¨åˆ† Topic/Queueã€‚</p>
<p><strong>DLedgerï¼ˆ4.5+ï¼‰</strong>ï¼š</p>
<ul>
<li>æŠŠ CommitLog å­˜å‚¨æŠ½è±¡æˆ Raft æ—¥å¿—ï¼Œå†™å…¥éœ€è¦å¤šæ•°æ´¾ç¡®è®¤ã€‚</li>
<li>Leader æ•…éšœè‡ªåŠ¨é€‰ä¸¾æ–° Leaderï¼Œä¸éœ€è¦äººå·¥å¹²é¢„ã€‚</li>
<li>é€‚åˆå¯¹ä¸€è‡´æ€§è¦æ±‚é«˜ã€åˆå¸Œæœ›è‡ªåŠ¨åˆ‡æ¢çš„åœºæ™¯ï¼ˆå¦‚é‡‘èæ ¸å¿ƒç³»ç»Ÿï¼‰ã€‚</li>
</ul>
<p>RocketMQ çš„è¿™å¥—ç†å¿µï¼Œé€‚åˆ"ç¡®å®šæ€§ + å¯æ§æ€§ + ä¸šåŠ¡æ¶ˆæ¯"çš„åœºæ™¯ï¼Œæ¯”å¦‚è®¢å•ã€æ”¯ä»˜ã€åº“å­˜ã€‚</p>
<h4 data-id="heading-4">ä¸¤è€…å¯¹æ¯”</h4>






























<table><thead><tr><th>ç»´åº¦</th><th>Kafka</th><th>RocketMQ</th></tr></thead><tbody><tr><td>è§’è‰²æ¨¡å‹</td><td>å»ä¸­å¿ƒåŒ–ï¼ŒåŠ¨æ€ Leader</td><td>ä¸»å¤‡æ˜ç¡®ï¼ŒMaster/Slave æˆ– DLedger</td></tr><tr><td>å‰¯æœ¬åŒæ­¥</td><td>ISR åŠ¨æ€è°ƒæ•´ï¼Œçµæ´»ä½†éœ€ç›‘æ§</td><td>æ¨¡å¼å›ºå®šï¼Œç®€å•ä½†åˆ‡æ¢éœ€è§„åˆ’</td></tr><tr><td>æ§åˆ¶é¢</td><td>Controller é‡ï¼Œéœ€é…åˆ ZK/KRaft</td><td>NameServer è½»ï¼Œé€»è¾‘åœ¨ Broker</td></tr><tr><td>é€‚åˆåœºæ™¯</td><td>æ—¥å¿—æµã€é«˜ååã€æµå¤„ç†</td><td>ä¸šåŠ¡æ¶ˆæ¯ã€äº‹åŠ¡ã€è®¢å•</td></tr></tbody></table>
<p>æ²¡æœ‰"è°æ›´å¥½"ï¼Œåªæœ‰"è°æ›´é€‚åˆä½ çš„åœºæ™¯"ã€‚ä¸‹é¢å‡ èŠ‚ä¼šæ·±å…¥æºç å’Œé…ç½®ï¼ŒæŠŠä¸¤è€…çš„é«˜å¯ç”¨æœºåˆ¶æ‹†åˆ°åº•ã€‚</p>
<hr/>
<h3 data-id="heading-5">3.2 æ•…éšœæ£€æµ‹ä¸æ¢å¤</h3>
<p>æ•…éšœæ£€æµ‹åˆ†ä¸‰æ­¥ï¼šæ„ŸçŸ¥ã€åˆ¤å®šã€å¤„ç½®ã€‚Kafka å’Œ RocketMQ åœ¨æ¯ä¸€æ­¥çš„å®ç°éƒ½æœ‰å·®å¼‚ã€‚</p>
<h4 data-id="heading-6">Kafka çš„æ•…éšœæ£€æµ‹é“¾è·¯</h4>
<h5 data-id="heading-7">Broker å¿ƒè·³ä¸ session ç®¡ç†</h5>
<p><strong>ZooKeeper æ¨¡å¼ï¼ˆ3.0 ä¹‹å‰ï¼‰</strong>ï¼š</p>
<p>Broker å¯åŠ¨æ—¶ä¼šåœ¨ ZooKeeper åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹ <code>/brokers/ids/{brokerId}</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"host"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"192.168.1.10"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"port"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">9092</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"timestamp"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1700000000000"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"endpoints"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"PLAINTEXT://192.168.1.10:9092"</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™æ˜¯ä¸ªä¸´æ—¶èŠ‚ç‚¹ï¼ˆEphemeralï¼‰ï¼ŒBroker ä¸ ZooKeeper çš„ session æ–­å¼€åï¼ŒèŠ‚ç‚¹ä¼šè‡ªåŠ¨åˆ é™¤ã€‚Controller ç›‘å¬ <code>/brokers/ids</code> ç›®å½•ï¼Œä¸€æ—¦èŠ‚ç‚¹æ¶ˆå¤±ï¼Œç«‹åˆ»è§¦å‘å¤„ç†ã€‚</p>
<p>å…³é”®å‚æ•°ï¼š</p>
<ul>
<li><code>zookeeper.session.timeout.ms</code>ï¼šé»˜è®¤ 18000ï¼ˆ18 ç§’ï¼‰ï¼Œsession è¶…æ—¶æ—¶é—´</li>
<li><code>zookeeper.connection.timeout.ms</code>ï¼šé»˜è®¤ 18000ï¼ˆ18 ç§’ï¼‰ï¼Œè¿æ¥è¶…æ—¶æ—¶é—´</li>
</ul>
<p>è°ƒä¼˜ç»éªŒï¼š</p>
<ul>
<li>session è¶…æ—¶ä¸è¦å¤ªçŸ­ï¼Œå¦åˆ™ç½‘ç»œæŠ–åŠ¨ä¼šé¢‘ç¹è§¦å‘ failoverã€‚</li>
<li>ä¹Ÿä¸è¦å¤ªé•¿ï¼Œå¦åˆ™æ•…éšœæ¢å¤æ…¢ã€‚ä¸€èˆ¬ç”Ÿäº§ç¯å¢ƒä¿æŒ 18~30 ç§’ã€‚</li>
</ul>
<p><strong>KRaft æ¨¡å¼ï¼ˆ3.0+ï¼‰</strong>ï¼š</p>
<p>ä¸å†ä¾èµ– ZooKeeperï¼ŒBroker ç›´æ¥ä¸ Controller é€šä¿¡ã€‚Controller å†…éƒ¨ç»´æŠ¤ Broker çš„å¿ƒè·³è¡¨ï¼Œé€šè¿‡ Raft é€šé“å®šæœŸæ”¶å¿ƒè·³ã€‚</p>
<p>å…³é”®å‚æ•°ï¼š</p>
<ul>
<li><code>broker.session.timeout.ms</code>ï¼šé»˜è®¤ 9000ï¼ˆ9 ç§’ï¼‰</li>
<li><code>broker.heartbeat.interval.ms</code>ï¼šé»˜è®¤ 2000ï¼ˆ2 ç§’ï¼‰</li>
</ul>
<p>KRaft çš„æ•…éšœæ„ŸçŸ¥æ›´å¿«ï¼ˆ9 ç§’ vs 18 ç§’ï¼‰ï¼Œå…ƒæ•°æ®å˜æ›´ä¹Ÿæ›´å¿«ï¼ˆä¸éœ€è¦ç»è¿‡ ZooKeeperï¼‰ã€‚</p>
<h5 data-id="heading-8">ISR æ”¶ç¼©ä¸æ‰©å±•</h5>
<p>ISR çš„æ›´æ–°é€»è¾‘åœ¨ <code>Partition.scala</code> çš„ <code>maybeExpandIsr()</code> å’Œ <code>maybeShrinkIsr()</code> æ–¹æ³•ä¸­ã€‚</p>
<p><strong>æ”¶ç¼©é€»è¾‘ï¼ˆmaybeShrinkIsrï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maybeShrinkIsr</span></span>(): <span class="hljs-type">Unit</span> = {
  <span class="hljs-keyword">val</span> now = time.milliseconds()
  <span class="hljs-keyword">val</span> outOfSyncReplicas = inSyncReplicas.filter { replica =&gt;
    <span class="hljs-keyword">val</span> lastCaughtUpTimeMs = replica.lastCaughtUpTimeMs
    (now - lastCaughtUpTimeMs) &gt; replicaLagTimeMaxMs
  }
  
  <span class="hljs-keyword">if</span> (outOfSyncReplicas.nonEmpty) {
    <span class="hljs-keyword">val</span> newIsr = inSyncReplicas -- outOfSyncReplicas
    updateIsr(newIsr)
    zkClient.updateIsr(topic, partition, newIsr)
  }
}
</code></pre>
<p>æ ¸å¿ƒé€»è¾‘ï¼š</p>
<ol>
<li>éå†æ‰€æœ‰ ISR å‰¯æœ¬ï¼Œæ£€æŸ¥ <code>lastCaughtUpTimeMs</code>ï¼ˆæœ€åä¸€æ¬¡è¿½ä¸Š Leader çš„æ—¶é—´ï¼‰ã€‚</li>
<li>å¦‚æœ <code>now - lastCaughtUpTimeMs &gt; replica.lag.time.max.ms</code>ï¼Œè¸¢å‡º ISRã€‚</li>
<li>æ›´æ–°æœ¬åœ° ISR åˆ—è¡¨ï¼ŒåŒæ—¶å†™å…¥ ZooKeeperï¼ˆZK æ¨¡å¼ï¼‰æˆ–å…ƒæ•°æ®æ—¥å¿—ï¼ˆKRaftï¼‰ã€‚</li>
</ol>
<p><strong>æ‰©å±•é€»è¾‘ï¼ˆmaybeExpandIsrï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">maybeExpandIsr</span></span>(): <span class="hljs-type">Unit</span> = {
  <span class="hljs-keyword">val</span> outOfSyncReplicas = assignedReplicas -- inSyncReplicas
  <span class="hljs-keyword">val</span> caughtUpReplicas = outOfSyncReplicas.filter { replica =&gt;
    replica.logEndOffset &gt;= leader.highWatermark
  }
  
  <span class="hljs-keyword">if</span> (caughtUpReplicas.nonEmpty) {
    <span class="hljs-keyword">val</span> newIsr = inSyncReplicas ++ caughtUpReplicas
    updateIsr(newIsr)
    zkClient.updateIsr(topic, partition, newIsr)
  }
}
</code></pre>
<p>æ ¸å¿ƒé€»è¾‘ï¼š</p>
<ol>
<li>æ‰¾å‡ºæ‰€æœ‰"ä¸åœ¨ ISR ä¸­"çš„å‰¯æœ¬ã€‚</li>
<li>å¦‚æœæŸä¸ªå‰¯æœ¬çš„ LEO å·²ç»è¿½ä¸Š Leader çš„ HWï¼Œè¯´æ˜å®ƒå·²ç»åŒæ­¥å®Œæˆï¼Œå¯ä»¥åŠ å…¥ ISRã€‚</li>
<li>æ›´æ–° ISR åˆ—è¡¨ã€‚</li>
</ol>
<p><strong>ISR æŠ–åŠ¨é—®é¢˜</strong>ï¼š</p>
<p>å¦‚æœç½‘ç»œä¸ç¨³å®šï¼ŒFollower ä¼šé¢‘ç¹è¿›å‡º ISRï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>ZooKeeper å†™å…¥å‹åŠ›å¤§</li>
<li>Controller é¢‘ç¹å‘é€ UpdateMetadata è¯·æ±‚</li>
<li>ç›‘æ§å‘Šè­¦é¢‘ç¹è§¦å‘</li>
</ul>
<p>ä¼˜åŒ–æ‰‹æ®µï¼š</p>
<ul>
<li>è°ƒå¤§ <code>replica.lag.time.max.ms</code>ï¼ˆä» 10 ç§’è°ƒåˆ° 30 ç§’ï¼‰</li>
<li>å‡çº§åˆ° KRaftï¼Œå‡å°‘ ZooKeeper å†™å…¥</li>
<li>ä½¿ç”¨ Cruise Control æ£€æµ‹æ…¢å‰¯æœ¬ï¼Œæå‰è¿ç§»</li>
</ul>
<h5 data-id="heading-9">Leader é€‰ä¸¾æµç¨‹</h5>
<p>Leader å®•æœºåï¼ŒController ä¼šä» ISR ä¸­é€‰å‡ºæ–° Leaderã€‚é€‰ä¸¾é€»è¾‘åœ¨ <code>PartitionStateMachine.scala</code> ä¸­ã€‚</p>
<p><strong>é€‰ä¸¾æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>
<p><strong>è§¦å‘æ¡ä»¶</strong>ï¼š</p>
<ul>
<li>Broker ä¸‹çº¿ï¼ˆZK session è¶…æ—¶ / KRaft å¿ƒè·³è¶…æ—¶ï¼‰</li>
<li>Leader æ‰€åœ¨ Broker ä¸‹çº¿</li>
<li>æ‰‹åŠ¨è§¦å‘ Preferred Leader Election</li>
</ul>
</li>
<li>
<p><strong>é€‰ä¸¾ç­–ç•¥</strong>ï¼š</p>
<ul>
<li>ä»å½“å‰ ISR åˆ—è¡¨ä¸­é€‰æ‹©ç¬¬ä¸€ä¸ªå¯ç”¨çš„å‰¯æœ¬</li>
<li>å¦‚æœ ISR ä¸ºç©ºä¸” <code>unclean.leader.election.enable=true</code>ï¼Œä»æ‰€æœ‰å‰¯æœ¬ä¸­é€‰æ‹© LEO æœ€å¤§çš„ï¼ˆå¯èƒ½ä¸¢æ•°æ®ï¼‰</li>
<li>å¦‚æœ ISR ä¸ºç©ºä¸”ä¸å…è®¸ Uncleanï¼ŒPartition è¿›å…¥ç¦»çº¿çŠ¶æ€</li>
</ul>
</li>
<li>
<p><strong>å…ƒæ•°æ®æ›´æ–°</strong>ï¼š</p>
<ul>
<li>Controller æ›´æ–° Leader Epochï¼ˆé˜²æ­¢è„‘è£‚ï¼‰</li>
<li>é€šçŸ¥æ–° Leader å¼€å§‹æœåŠ¡</li>
<li>é€šçŸ¥å…¶ä»– Broker æ›´æ–°å…ƒæ•°æ®</li>
</ul>
</li>
<li>
<p><strong>é€šçŸ¥ Follower</strong>ï¼š</p>
<ul>
<li>Follower æ”¶åˆ° Leader å˜æ›´é€šçŸ¥åï¼Œä¼šæˆªæ–­æœ¬åœ°æ—¥å¿—åˆ°æ–° Leader çš„ HWï¼Œé¿å…æ•°æ®ä¸ä¸€è‡´</li>
</ul>
</li>
</ol>
<p><strong>æºç å…³é”®è·¯å¾„</strong>ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">// PartitionStateMachine.scala</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">electLeader</span></span>(partition: <span class="hljs-type">TopicPartition</span>): <span class="hljs-type">Unit</span> = {
  <span class="hljs-keyword">val</span> isr = zkClient.getInSyncReplicas(partition)
  <span class="hljs-keyword">val</span> newLeader = <span class="hljs-keyword">if</span> (isr.nonEmpty) {
    isr.head  <span class="hljs-comment">// é€‰æ‹© ISR ç¬¬ä¸€ä¸ª</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (uncleanLeaderElectionEnable) {
    allReplicas.maxBy(_.logEndOffset)  <span class="hljs-comment">// é€‰æ‹© LEO æœ€å¤§çš„</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-number">-1</span>  <span class="hljs-comment">// ç¦»çº¿</span>
  }
  
  <span class="hljs-keyword">if</span> (newLeader &gt;= <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">val</span> newLeaderEpoch = controllerEpoch + <span class="hljs-number">1</span>
    zkClient.updateLeaderAndIsr(partition, newLeader, isr, newLeaderEpoch)
    sendUpdateMetadataRequest(allBrokers)
  }
}
</code></pre>
<p><strong>Unclean Leader Election çš„é£é™©</strong>ï¼š</p>
<p>å¦‚æœå¼€å¯ <code>unclean.leader.election.enable=true</code>ï¼Œå…è®¸è½åå‰¯æœ¬ä¸Šä½ï¼š</p>
<ul>
<li>å¯èƒ½è¯»åˆ°æ—§æ•°æ®ï¼ˆLEO å°çš„å‰¯æœ¬æˆä¸º Leaderï¼‰</li>
<li>å¯èƒ½ä¸¢å¤±æ•°æ®ï¼ˆæ–° Leader ä¸åŒ…å«æ—§ Leader çš„éƒ¨åˆ†æ•°æ®ï¼‰</li>
</ul>
<p>ç”Ÿäº§ç¯å¢ƒä¸€èˆ¬ç¦ç”¨è¿™ä¸ªå‚æ•°ï¼Œå®å¯ Partition æš‚æ—¶ç¦»çº¿ï¼Œä¹Ÿä¸è¦æ•°æ®é”™ä¹±ã€‚</p>
<h5 data-id="heading-10">Controlled Shutdownï¼ˆä¼˜é›…åœæœºï¼‰</h5>
<p>Kafka æ”¯æŒä¼˜é›…åœæœºï¼Œåœ¨ Broker ä¸‹çº¿å‰ä¸»åŠ¨è¿ç§» Leaderã€‚</p>
<p><strong>æµç¨‹</strong>ï¼š</p>
<ol>
<li>Broker å‘ Controller å‘é€ <code>ControlledShutdownRequest</code></li>
<li>Controller æŠŠè¯¥ Broker ä¸Šæ‰€æœ‰ Leader Partition è¿ç§»åˆ°å…¶ä»–å‰¯æœ¬</li>
<li>è¿ç§»å®Œæˆåï¼ŒBroker å…³é—­ç½‘ç»œç›‘å¬ï¼Œç­‰å¾…å‰©ä½™è¯·æ±‚å¤„ç†å®Œ</li>
<li>æœ€åå…³é—­ç£ç›˜åˆ·ç›˜ã€æ—¥å¿—æ¸…ç†ç­‰åå°çº¿ç¨‹</li>
</ol>
<p><strong>é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># å¼€å¯ä¼˜é›…åœæœº
controlled.shutdown.enable=true

# æœ€å¤§é‡è¯•æ¬¡æ•°
controlled.shutdown.max.retries=3

# é‡è¯•é—´éš”
controlled.shutdown.retry.backoff.ms=5000
</code></pre>
<p>å®æˆ˜ä¸­ï¼Œä¼˜é›…åœæœºèƒ½å‡å°‘ Partition ä¸å¯ç”¨æ—¶é—´ï¼ˆä» 10 ç§’é™åˆ° &lt; 1 ç§’ï¼‰ã€‚ä½†å¦‚æœç½‘ç»œæœ‰é—®é¢˜ï¼Œå¯èƒ½å¡åœ¨"ç­‰å¾… Leader è¿ç§»"é˜¶æ®µï¼Œéœ€è¦è®¾ç½®è¶…æ—¶ã€‚</p>
<h4 data-id="heading-11">RocketMQ çš„æ•…éšœæ£€æµ‹é“¾è·¯</h4>
<h5 data-id="heading-12">Broker å¿ƒè·³æœºåˆ¶</h5>
<p>RocketMQ çš„å¿ƒè·³åˆ†ä¸¤ç±»ï¼š</p>
<ol>
<li><strong>Broker â†’ NameServer</strong>ï¼šæ¯ 30 ç§’ä¸ŠæŠ¥è·¯ç”±ä¿¡æ¯</li>
<li><strong>Slave â†’ Master</strong>ï¼šHAService çš„é•¿è¿æ¥å¿ƒè·³ï¼Œç§’çº§æ£€æµ‹</li>
</ol>
<p><strong>Broker æ³¨å†Œæµç¨‹</strong>ï¼š</p>
<p>Broker å¯åŠ¨æ—¶å‘æ‰€æœ‰ NameServer å‘é€æ³¨å†Œè¯·æ±‚ï¼ŒåŒ…å«ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"brokerName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"broker-a"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"brokerId"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"brokerAddr"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"192.168.1.10:10911"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"clusterName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"DefaultCluster"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"haServerAddr"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"192.168.1.10:10912"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"topicConfigWrapper"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>...<span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>NameServer æ”¶åˆ°åæ›´æ–°è·¯ç”±è¡¨ï¼Œå¹¶è®°å½•æ—¶é—´æˆ³ã€‚åç»­æ¯ 30 ç§’ Broker ä¼šé‡æ–°å‘ä¸€æ¬¡ã€‚</p>
<p><strong>å¿ƒè·³è¶…æ—¶åˆ¤å®š</strong>ï¼š</p>
<p>NameServer æœ‰ä¸ªå®šæ—¶ä»»åŠ¡ <code>RouteInfoManager.scanNotActiveBroker()</code>ï¼Œæ¯ 10 ç§’æ‰«ä¸€æ¬¡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">scanNotActiveBroker</span><span class="hljs-params">()</span> {
    <span class="hljs-type">long</span> <span class="hljs-variable">current</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
    Iterator&lt;Entry&lt;String, BrokerLiveInfo&gt;&gt; it = brokerLiveTable.entrySet().iterator();
    <span class="hljs-keyword">while</span> (it.hasNext()) {
        Entry&lt;String, BrokerLiveInfo&gt; entry = it.next();
        <span class="hljs-type">long</span> <span class="hljs-variable">last</span> <span class="hljs-operator">=</span> entry.getValue().getLastUpdateTimestamp();
        <span class="hljs-keyword">if</span> ((current - last) &gt; brokerExpiredTime) {  <span class="hljs-comment">// é»˜è®¤ 120 ç§’</span>
            it.remove();
            onBrokerInactive(entry.getKey());
        }
    }
}
</code></pre>
<p>è¶…è¿‡ 120 ç§’æ²¡æ”¶åˆ°å¿ƒè·³ï¼ŒNameServer æŠŠ Broker ä»è·¯ç”±è¡¨ç§»é™¤ã€‚Producer/Consumer åœ¨ä¸‹æ¬¡æ‹‰å–è·¯ç”±æ—¶ä¼šæ„ŸçŸ¥åˆ°å˜åŒ–ã€‚</p>
<p><strong>é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># Broker å¿ƒè·³é—´éš”ï¼ˆæ¯«ç§’ï¼‰
heartbeatBrokerInterval=30000

# NameServer è®¤ä¸º Broker å¤±æ•ˆçš„æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
brokerExpiredTime=120000
</code></pre>
<p>è°ƒä¼˜å»ºè®®ï¼š</p>
<ul>
<li>å¿ƒè·³é—´éš”ä¸è¦å¤ªé•¿ï¼Œå¦åˆ™æ•…éšœæ„ŸçŸ¥æ…¢ã€‚</li>
<li>è¶…æ—¶æ—¶é—´è‡³å°‘è¦æ˜¯å¿ƒè·³é—´éš”çš„ 3 å€ï¼Œé˜²æ­¢å¶å‘ä¸¢åŒ…ã€‚</li>
</ul>
<h5 data-id="heading-13">HAServiceï¼šä¸»ä»å¤åˆ¶ç›‘æ§</h5>
<p>Slave é€šè¿‡ HAService ä¸ Master ä¿æŒé•¿è¿æ¥ï¼Œå®æ—¶å¤åˆ¶ CommitLogã€‚</p>
<p><strong>HAService çº¿ç¨‹æ¨¡å‹</strong>ï¼š</p>
<p>Master ç«¯ï¼š</p>
<ul>
<li><code>AcceptSocketService</code>ï¼šæ¥å— Slave è¿æ¥</li>
<li><code>HAConnection.WriteSocketService</code>ï¼šå‘ Slave å‘é€æ•°æ®</li>
<li><code>HAConnection.ReadSocketService</code>ï¼šæ¥æ”¶ Slave çš„ ACK</li>
</ul>
<p>Slave ç«¯ï¼š</p>
<ul>
<li><code>HAClient</code>ï¼šè¿æ¥ Masterï¼Œæ‹‰å–æ•°æ®å¹¶å†™å…¥æœ¬åœ° CommitLog</li>
</ul>
<p><strong>å¤åˆ¶å»¶è¿Ÿç›‘æ§</strong>ï¼š</p>
<p>Master ä¼šè®°å½•æ¯ä¸ª Slave çš„å¤åˆ¶è¿›åº¦ï¼ˆSlave Ack Offsetï¼‰ï¼Œä¸å½“å‰ CommitLog çš„æœ€å¤§åç§»é‡å¯¹æ¯”ï¼Œå¾—å‡ºå»¶è¿Ÿï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">long</span> <span class="hljs-variable">masterMaxOffset</span> <span class="hljs-operator">=</span> commitLog.getMaxOffset();
<span class="hljs-type">long</span> <span class="hljs-variable">slaveAckOffset</span> <span class="hljs-operator">=</span> haConnection.getSlaveAckOffset();
<span class="hljs-type">long</span> <span class="hljs-variable">diff</span> <span class="hljs-operator">=</span> masterMaxOffset - slaveAckOffset;

<span class="hljs-keyword">if</span> (diff &gt; maxTransferLag) {
    log.warn(<span class="hljs-string">"Slave lag too large: {}MB"</span>, diff / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>);
}
</code></pre>
<p>å¦‚æœå»¶è¿Ÿè¿‡å¤§ï¼ˆæ¯”å¦‚ &gt; 1GBï¼‰ï¼Œè¯´æ˜ Slave æ€§èƒ½è·Ÿä¸ä¸Šæˆ–ç½‘ç»œæœ‰é—®é¢˜ï¼Œéœ€è¦å‘Šè­¦ã€‚</p>
<h5 data-id="heading-14">DLedger çš„ Raft é€‰ä¸¾</h5>
<p>DLedger æ˜¯ RocketMQ 4.5+ å¼•å…¥çš„ Raft å®ç°ï¼Œç”¨äºæ›¿ä»£ Master-Slave çš„æ‰‹åŠ¨åˆ‡æ¢ã€‚</p>
<p><strong>Raft æ ¸å¿ƒè§’è‰²</strong>ï¼š</p>
<ul>
<li><strong>Leader</strong>ï¼šè´Ÿè´£è¯»å†™ï¼Œç±»ä¼¼ Master</li>
<li><strong>Follower</strong>ï¼šä» Leader å¤åˆ¶æ•°æ®ï¼Œç±»ä¼¼ Slave</li>
<li><strong>Candidate</strong>ï¼šé€‰ä¸¾ä¸­çš„ä¸´æ—¶è§’è‰²</li>
</ul>
<p><strong>é€‰ä¸¾è§¦å‘</strong>ï¼š</p>
<ul>
<li>Leader å¿ƒè·³è¶…æ—¶ï¼ˆé»˜è®¤ 1 ç§’ï¼‰</li>
<li>Follower æ”¶ä¸åˆ° Leader å¿ƒè·³ï¼Œè¿›å…¥ Candidate çŠ¶æ€</li>
<li>å‘å…¶ä»–èŠ‚ç‚¹å‘èµ·æŠ•ç¥¨è¯·æ±‚</li>
</ul>
<p><strong>æŠ•ç¥¨é€»è¾‘</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// DLedgerLeaderElector.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleVote</span><span class="hljs-params">(VoteRequest request)</span> {
    <span class="hljs-keyword">if</span> (request.getTerm() &gt; <span class="hljs-built_in">this</span>.term) {
        <span class="hljs-comment">// å¯¹æ–¹ term æ›´å¤§ï¼ŒåŒæ„æŠ•ç¥¨</span>
        <span class="hljs-built_in">this</span>.term = request.getTerm();
        <span class="hljs-built_in">this</span>.votedFor = request.getCandidateId();
        <span class="hljs-keyword">return</span> VoteResponse.ACCEPT;
    }
    
    <span class="hljs-keyword">if</span> (request.getLedgerEndIndex() &lt; <span class="hljs-built_in">this</span>.ledgerEndIndex) {
        <span class="hljs-comment">// å¯¹æ–¹æ•°æ®è½åï¼Œæ‹’ç»æŠ•ç¥¨</span>
        <span class="hljs-keyword">return</span> VoteResponse.REJECT;
    }
    
    <span class="hljs-comment">// å…¶ä»–æƒ…å†µçœ‹æ˜¯å¦å·²æŠ•ç¥¨</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.votedFor == <span class="hljs-literal">null</span> || <span class="hljs-built_in">this</span>.votedFor.equals(request.getCandidateId())) {
        <span class="hljs-built_in">this</span>.votedFor = request.getCandidateId();
        <span class="hljs-keyword">return</span> VoteResponse.ACCEPT;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> VoteResponse.REJECT;
    }
}
</code></pre>
<p><strong>é€‰ä¸¾å®Œæˆ</strong>ï¼š</p>
<ul>
<li>è·å¾—å¤šæ•°ç¥¨çš„ Candidate æˆä¸º Leader</li>
<li>Leader å®šæœŸå‘é€å¿ƒè·³ï¼ˆAppendEntriesï¼‰ç»´æŒåœ°ä½</li>
<li>å¦‚æœ Leader æŒ‚æ‰ï¼Œå†æ¬¡å‘èµ·é€‰ä¸¾</li>
</ul>
<p>DLedger çš„ä¼˜åŠ¿æ˜¯"è‡ªåŠ¨åˆ‡æ¢ + å¼ºä¸€è‡´"ï¼Œç¼ºç‚¹æ˜¯æ€§èƒ½ç•¥ä½äºå¼‚æ­¥å¤åˆ¶ï¼ˆéœ€è¦å¤šæ•°æ´¾ç¡®è®¤ï¼‰ã€‚</p>
<h4 data-id="heading-15">æ•…éšœæ¢å¤æ—¶é—´å¯¹æ¯”</h4>








































<table><thead><tr><th>æ•…éšœç±»å‹</th><th>Kafka (ZK)</th><th>Kafka (KRaft)</th><th>RocketMQ (MS)</th><th>RocketMQ (DLedger)</th></tr></thead><tbody><tr><td>Broker å®•æœºæ„ŸçŸ¥</td><td>18 ç§’</td><td>9 ç§’</td><td>120 ç§’</td><td>1 ç§’</td></tr><tr><td>Leader é€‰ä¸¾æ—¶é—´</td><td>5~10 ç§’</td><td>2~5 ç§’</td><td>äººå·¥ï¼ˆåˆ†é’Ÿçº§ï¼‰</td><td>è‡ªåŠ¨ï¼ˆ&lt; 1 ç§’ï¼‰</td></tr><tr><td>è·¯ç”±æ›´æ–°æ—¶é—´</td><td>ç«‹å³</td><td>ç«‹å³</td><td>120 ç§’å†…</td><td>ç«‹å³</td></tr><tr><td>æ€»æ¢å¤æ—¶é—´</td><td>20~30 ç§’</td><td>10~15 ç§’</td><td>2~5 åˆ†é’Ÿ</td><td>2~3 ç§’</td></tr></tbody></table>
<p>RocketMQ çš„ DLedger åœ¨è‡ªåŠ¨åˆ‡æ¢ä¸Šæœ‰æ˜æ˜¾ä¼˜åŠ¿ï¼Œä½† Master-Slave æ¨¡å¼çš„å¿ƒè·³è¶…æ—¶å¤ªé•¿ï¼ˆ120 ç§’ï¼‰ï¼Œéœ€è¦é ç›‘æ§æå‰å‘ç°é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-16">3.3 æ•°æ®ä¸€è‡´æ€§ä¿è¯</h3>
<p>ä¸€è‡´æ€§æ˜¯"ä¸åŒå‰¯æœ¬èƒ½çœ‹åˆ°ç›¸åŒæ•°æ®"çš„èƒ½åŠ›ã€‚åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œç½‘ç»œå»¶è¿Ÿã€èŠ‚ç‚¹æ•…éšœéƒ½ä¼šé€ æˆæ•°æ®ä¸ä¸€è‡´ã€‚Kafka å’Œ RocketMQ é€šè¿‡ä¸åŒçš„åè®®ä¿è¯ä¸€è‡´æ€§ã€‚</p>
<h4 data-id="heading-17">Kafkaï¼šHW/LEO + Leader Epoch</h4>
<h5 data-id="heading-18">HWï¼ˆHigh Watermarkï¼‰ä¸ LEOï¼ˆLog End Offsetï¼‰</h5>
<p>è¿™æ˜¯ Kafka å‰¯æœ¬æœºåˆ¶çš„æ ¸å¿ƒæ¦‚å¿µã€‚</p>
<p><strong>LEO</strong>ï¼šæ—¥å¿—çš„æœ€æ–°åç§»é‡ï¼Œå³"å†™åˆ°å“ªå„¿äº†"ã€‚æ¯ä¸ªå‰¯æœ¬éƒ½æœ‰è‡ªå·±çš„ LEOã€‚</p>
<p><strong>HW</strong>ï¼šHigh Watermarkï¼Œæ‰€æœ‰ ISR å‰¯æœ¬éƒ½å·²ç¡®è®¤çš„åç§»é‡ï¼Œå³"æ¶ˆè´¹è€…èƒ½è¯»åˆ°å“ªå„¿"ã€‚</p>
<p>å…³ç³»ï¼š<code>HW &lt;= min(æ‰€æœ‰ ISR å‰¯æœ¬çš„ LEO)</code></p>
<p>ä¸¾ä¾‹ï¼š</p>
<ul>
<li>Leader LEO = 100</li>
<li>Follower1 LEO = 98</li>
<li>Follower2 LEO = 97</li>
<li>ISR = [Leader, Follower1, Follower2]</li>
<li>åˆ™ HW = min(100, 98, 97) = 97</li>
</ul>
<p>Consumer åªèƒ½è¯»åˆ° Offset 97 ä¹‹å‰çš„æ•°æ®ï¼ŒOffset 98~100 è™½ç„¶ Leader æœ‰ï¼Œä½†è¿˜æ²¡"å¤šæ•°æ´¾ç¡®è®¤"ï¼Œæš‚æ—¶ä¸å¯è§ã€‚</p>
<p><strong>HW æ›´æ–°æµç¨‹</strong>ï¼š</p>
<ol>
<li>Producer å‘é€æ¶ˆæ¯åˆ° Leaderï¼ŒLeader å†™å…¥æœ¬åœ°æ—¥å¿—ï¼ŒLEO å˜ä¸º 101ã€‚</li>
<li>Follower é€šè¿‡ Fetch è¯·æ±‚æ‹‰å–æ•°æ®ï¼Œå†™å…¥æœ¬åœ°æ—¥å¿—ï¼Œå„è‡ª LEO æ›´æ–°ã€‚</li>
<li>Follower åœ¨ä¸‹ä¸€æ¬¡ Fetch æ—¶å¸¦ä¸Šè‡ªå·±çš„ LEOï¼ŒLeader æ®æ­¤æ›´æ–° HWã€‚</li>
<li>HW æ›´æ–°åï¼ŒLeader åœ¨ FetchResponse ä¸­è¿”å›æ–°çš„ HW ç»™ Followerï¼ŒFollower ä¹Ÿæ›´æ–°æœ¬åœ° HWã€‚</li>
</ol>
<p>è¿™ä¸ªæµç¨‹æœ‰ä¸ªç‰¹ç‚¹ï¼š<strong>HW çš„æ›´æ–°éœ€è¦ä¸¤è½® Fetch</strong>ã€‚è¿™åœ¨æ—§ç‰ˆæœ¬ä¸­ä¼šå¯¼è‡´æ•°æ®æˆªæ–­é—®é¢˜ï¼Œæ–°ç‰ˆæœ¬é€šè¿‡ Leader Epoch ä¿®å¤ã€‚</p>
<h5 data-id="heading-19">Leader Epoch æœºåˆ¶</h5>
<p>Leader Epoch æ˜¯ Kafka 2.5+ å¼•å…¥çš„æœºåˆ¶ï¼Œç”¨äºè§£å†³ HW æ›´æ–°æ»åå¯¼è‡´çš„æ•°æ®æˆªæ–­é—®é¢˜ã€‚</p>
<p><strong>é—®é¢˜åœºæ™¯</strong>ï¼š</p>
<ol>
<li>Leader Aï¼ŒFollower Bï¼ŒISR = [A, B]</li>
<li>Leader A å†™å…¥ Offset 100~102ï¼ŒLEO = 103ï¼Œä½† HW è¿˜æ˜¯ 100ï¼ˆéœ€è¦ç­‰ B æ‹‰å–ï¼‰</li>
<li>B æ‹‰å–æ•°æ®ï¼ŒLEO = 103ï¼Œä½†æœ¬åœ° HW è¿˜æ˜¯ 100ï¼ˆéœ€è¦ç­‰ä¸‹ä¸€è½® Fetchï¼‰</li>
<li>æ­¤æ—¶ A å®•æœºï¼ŒB å½“é€‰ Leaderã€‚ä½† B çš„ HW æ˜¯ 100ï¼Œæ‰€ä»¥ B ä¼šæˆªæ–­ 101~102 çš„æ•°æ®</li>
<li>å¦‚æœ A æ¢å¤åé‡æ–°åŠ å…¥ï¼Œä¼šä» B åŒæ­¥ï¼Œå¯¼è‡´ 101~102 çš„æ•°æ®æ°¸ä¹…ä¸¢å¤±</li>
</ol>
<p><strong>Leader Epoch è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<p>æ¯æ¬¡ Leader é€‰ä¸¾ï¼ŒEpoch é€’å¢ã€‚Follower åœ¨åŒæ­¥å‰ï¼Œå…ˆå‘ Leader æŸ¥è¯¢"æˆ‘çš„ Epoch å¯¹åº”çš„æˆªæ–­ç‚¹"ï¼Œè€Œä¸æ˜¯ç›²ç›®æˆªæ–­åˆ° HWã€‚</p>
<p><strong>Epoch æŸ¥è¯¢æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">// Follower å‘æ–° Leader æŸ¥è¯¢</span>
<span class="hljs-keyword">val</span> request = <span class="hljs-type">OffsetsForLeaderEpochRequest</span>(myEpoch, myLEO)
<span class="hljs-keyword">val</span> response = leader.offsetsForLeaderEpoch(request)

<span class="hljs-keyword">if</span> (response.endOffset &lt; myLEO) {
  truncateTo(response.endOffset)  <span class="hljs-comment">// åªæˆªæ–­å¿…è¦çš„éƒ¨åˆ†</span>
}
</code></pre>
<p>è¿™æ ·å°±é¿å…äº†"HW æ»åå¯¼è‡´çš„æ•°æ®ä¸¢å¤±"ã€‚Leader Epoch ä¿¡æ¯å­˜å‚¨åœ¨ <code>.snapshot</code> æ–‡ä»¶ä¸­ã€‚</p>
<h4 data-id="heading-20">RocketMQï¼šCommitLog å¤åˆ¶ + Raft æ—¥å¿—</h4>
<h5 data-id="heading-21">ä¸»ä»å¤åˆ¶çš„ ACK æœºåˆ¶</h5>
<p>RocketMQ çš„ Master-Slave å¤åˆ¶ç›¸å¯¹ç®€å•ï¼š</p>
<p><strong>ASYNC_MASTERï¼ˆå¼‚æ­¥å¤åˆ¶ï¼‰</strong>ï¼š</p>
<ol>
<li>Producer å‘æ¶ˆæ¯åˆ° Master</li>
<li>Master å†™å…¥ CommitLogï¼Œç«‹å³è¿”å›æˆåŠŸ</li>
<li>HAService åå°çº¿ç¨‹å¼‚æ­¥æŠŠ CommitLog å¤åˆ¶åˆ° Slave</li>
</ol>
<p>è¿™ç§æ¨¡å¼æ€§èƒ½æœ€é«˜ï¼Œä½† Master å®•æœºä¼šä¸¢å¤±"æœªå¤åˆ¶çš„éƒ¨åˆ†"ã€‚</p>
<p><strong>SYNC_MASTERï¼ˆåŒæ­¥å¤åˆ¶ï¼‰</strong>ï¼š</p>
<ol>
<li>Producer å‘æ¶ˆæ¯åˆ° Master</li>
<li>Master å†™å…¥ CommitLogï¼Œç­‰å¾… Slave è¿”å› ACK</li>
<li>Slave å†™å…¥æˆåŠŸåè¿”å› ACK</li>
<li>Master æ”¶åˆ° ACK åæ‰è¿”å› Producer æˆåŠŸ</li>
</ol>
<p>è¿™ç§æ¨¡å¼å¯é æ€§é«˜ï¼Œä½†æ€§èƒ½ä¼šä¸‹é™ 30% å·¦å³ï¼ˆå¢åŠ ä¸€æ¬¡ç½‘ç»œå¾€è¿”ï¼‰ã€‚</p>
<p><strong>æºç æ ¸å¿ƒé€»è¾‘</strong>ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// HAService.javaï¼ˆMaster ç«¯ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyTransferSome</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">long</span> offset)</span> {
    <span class="hljs-keyword">for</span> (HAConnection conn : connectionList) {
        conn.getTransferService().wakeup();  <span class="hljs-comment">// å”¤é†’å‘é€çº¿ç¨‹</span>
    }
    
    <span class="hljs-keyword">if</span> (BrokerRole.SYNC_MASTER == brokerRole) {
        <span class="hljs-comment">// åŒæ­¥å¤åˆ¶ï¼Œç­‰å¾… Slave ACK</span>
        waitForSlaveAck(offset, syncFlushTimeout);
    }
}
</code></pre>
<p><strong>Slave ACK é€»è¾‘</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// HAClient.javaï¼ˆSlave ç«¯ï¼‰</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dispatchReadRequest</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// è¯»å– Master å‘æ¥çš„æ•°æ®</span>
    <span class="hljs-type">long</span> <span class="hljs-variable">masterOffset</span> <span class="hljs-operator">=</span> readSocketBuffer.getLong();
    <span class="hljs-type">byte</span>[] bodyData = readSocketBuffer.getBytes();
    
    <span class="hljs-comment">// å†™å…¥æœ¬åœ° CommitLog</span>
    commitLog.appendData(masterOffset, bodyData);
    
    <span class="hljs-comment">// è¿”å› ACK</span>
    <span class="hljs-built_in">this</span>.currentReportedOffset = masterOffset + bodyData.length;
    reportSlaveMaxOffset(currentReportedOffset);
}
</code></pre>
<h5 data-id="heading-22">DLedger çš„ Raft æ—¥å¿—å¤åˆ¶</h5>
<p>DLedger æŠŠ CommitLog æŠ½è±¡æˆ Raft æ—¥å¿—ï¼ˆDLedger Logï¼‰ï¼Œæ¯æ¡æ¶ˆæ¯å¯¹åº”ä¸€ä¸ª Entryã€‚</p>
<p><strong>AppendEntries æµç¨‹</strong>ï¼š</p>
<ol>
<li>Leader æ”¶åˆ°å†™å…¥è¯·æ±‚ï¼Œåˆ†é…é€’å¢çš„ Index</li>
<li>Leader å‘æ‰€æœ‰ Follower å‘é€ AppendEntriesRequest</li>
<li>Follower å†™å…¥æœ¬åœ°æ—¥å¿—ï¼Œè¿”å› ACK</li>
<li>Leader æ”¶åˆ°å¤šæ•°æ´¾ ACK åï¼Œæäº¤ï¼ˆcommitï¼‰è¯¥ Entry</li>
<li>Leader è¿”å› Producer æˆåŠŸ</li>
</ol>
<p><strong>æºç å…³é”®è·¯å¾„</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// DLedgerEntryPusher.javaï¼ˆLeader ç«¯ï¼‰</span>
<span class="hljs-keyword">public</span> CompletableFuture&lt;AppendEntryResponse&gt; <span class="hljs-title function_">handleAppend</span><span class="hljs-params">(DLedgerEntry entry)</span> {
    <span class="hljs-comment">// å†™å…¥æœ¬åœ°æ—¥å¿—</span>
    dLedgerStore.appendAsLeader(entry);
    
    <span class="hljs-comment">// å‘æ‰€æœ‰ Follower æ¨é€</span>
    List&lt;CompletableFuture&lt;PushEntryResponse&gt;&gt; futures = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-keyword">for</span> (String peerId : peerMap.keySet()) {
        futures.add(pushToFollower(peerId, entry));
    }
    
    <span class="hljs-comment">// ç­‰å¾…å¤šæ•°æ´¾ ACK</span>
    <span class="hljs-keyword">return</span> CompletableFuture.allOf(futures.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CompletableFuture</span>[<span class="hljs-number">0</span>]))
        .thenApply(v -&gt; {
            <span class="hljs-type">int</span> <span class="hljs-variable">ackCount</span> <span class="hljs-operator">=</span> (<span class="hljs-type">int</span>) futures.stream().filter(f -&gt; f.join().isSuccess()).count();
            <span class="hljs-keyword">if</span> (ackCount &gt;= quorum) {  <span class="hljs-comment">// quorum = (n + 1) / 2</span>
                dLedgerStore.updateCommittedIndex(entry.getIndex());
                <span class="hljs-keyword">return</span> AppendEntryResponse.success();
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> AppendEntryResponse.fail();
            }
        });
}
</code></pre>
<p><strong>æ—¥å¿—å¯¹é½</strong>ï¼š</p>
<p>Follower æ¥æ”¶åˆ° AppendEntries åï¼Œä¼šæ£€æŸ¥ prevIndex æ˜¯å¦åŒ¹é…ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// DLedgerStore.javaï¼ˆFollower ç«¯ï¼‰</span>
<span class="hljs-keyword">public</span> AppendEntryResponse <span class="hljs-title function_">appendAsFollower</span><span class="hljs-params">(DLedgerEntry entry, <span class="hljs-type">long</span> prevIndex, <span class="hljs-type">long</span> prevTerm)</span> {
    <span class="hljs-type">DLedgerEntry</span> <span class="hljs-variable">localPrev</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.get(prevIndex);
    
    <span class="hljs-keyword">if</span> (localPrev == <span class="hljs-literal">null</span> || localPrev.getTerm() != prevTerm) {
        <span class="hljs-comment">// æ—¥å¿—ä¸è¿ç»­æˆ– term ä¸åŒ¹é…ï¼Œæ‹’ç»</span>
        <span class="hljs-keyword">return</span> AppendEntryResponse.inconsistent();
    }
    
    <span class="hljs-comment">// å†™å…¥æ—¥å¿—</span>
    <span class="hljs-built_in">this</span>.appendData(entry);
    <span class="hljs-keyword">return</span> AppendEntryResponse.success();
}
</code></pre>
<p>å¦‚æœæ—¥å¿—ä¸è¿ç»­ï¼ŒLeader ä¼šå›é€€ prevIndex é‡æ–°å‘é€ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€è‡´ç‚¹ã€‚</p>
<h4 data-id="heading-23">acks å‚æ•°ä¸ min.insync.replicas</h4>
<p>Kafka çš„ <code>acks</code> å‚æ•°å†³å®šäº† Producer å¯¹"å†™å…¥æˆåŠŸ"çš„å®šä¹‰ã€‚</p>
<p><strong>acks=0</strong>ï¼š</p>
<ul>
<li>Producer å‘å®Œå°±è¿”å›ï¼Œä¸ç­‰ä»»ä½•ç¡®è®¤</li>
<li>æ€§èƒ½æœ€é«˜ï¼Œä½†ç½‘ç»œä¸¢åŒ…ã€Broker å´©æºƒéƒ½ä¼šä¸¢æ¶ˆæ¯</li>
<li>é€‚åˆæ—¥å¿—é‡‡é›†ã€ç›‘æ§æ•°æ®ç­‰"ä¸¢å‡ æ¡æ— æ‰€è°“"çš„åœºæ™¯</li>
</ul>
<p><strong>acks=1</strong>ï¼š</p>
<ul>
<li>Leader å†™å…¥æˆåŠŸå°±è¿”å›</li>
<li>å¦‚æœ Leader å†™å…¥åç«‹åˆ»å®•æœºã€æ•°æ®è¿˜æ²¡å¤åˆ¶åˆ° Followerï¼Œä¼šä¸¢æ¶ˆæ¯</li>
<li>æ€§èƒ½å’Œå¯é æ€§çš„æŠ˜ä¸­æ–¹æ¡ˆ</li>
</ul>
<p><strong>acks=allï¼ˆ-1ï¼‰</strong>ï¼š</p>
<ul>
<li>æ‰€æœ‰ ISR å‰¯æœ¬éƒ½å†™å…¥æˆåŠŸæ‰è¿”å›</li>
<li>é…åˆ <code>min.insync.replicas &gt;= 2</code>ï¼Œä¿è¯è‡³å°‘ä¸¤ä¸ªå‰¯æœ¬æœ‰æ•°æ®</li>
<li>å¯é æ€§æœ€é«˜ï¼Œä½†æ€§èƒ½ä¼šé™ä½</li>
</ul>
<p><strong>min.insync.replicas çš„ä½œç”¨</strong>ï¼š</p>
<p>å³ä½¿ <code>acks=all</code>ï¼Œå¦‚æœ ISR åªå‰© 1 ä¸ªï¼ˆLeaderï¼‰ï¼Œå†™å…¥ä»ç„¶ä¼šæˆåŠŸã€‚ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µï¼Œè®¾ç½® <code>min.insync.replicas=2</code>ï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># Topic çº§åˆ«é…ç½®
min.insync.replicas=2
</code></pre>
<p>å¦‚æœ ISR å°‘äº 2 ä¸ªï¼ŒProducer å†™å…¥ä¼šå¤±è´¥ï¼ˆæŠ›å‡º <code>NotEnoughReplicasException</code>ï¼‰ï¼Œå€’é€¼è¿ç»´ä¿®å¤å‰¯æœ¬ã€‚</p>
<p><strong>å®æˆ˜è¸©å‘</strong>ï¼š</p>
<p>æŸå…¬å¸é…ç½®äº† <code>acks=all + min.insync.replicas=2</code>ï¼Œä½†åœ¨æ»šåŠ¨å‡çº§æ—¶ï¼ŒISR åªå‰© 1 ä¸ªï¼Œå¯¼è‡´å†™å…¥å…¨éƒ¨å¤±è´¥ã€‚</p>
<p>è§£å†³åŠæ³•ï¼š</p>
<ul>
<li>å‡çº§å‰æ£€æŸ¥æ‰€æœ‰ Partition çš„ ISR æ•°é‡</li>
<li>å‡çº§æ—¶é™é€Ÿï¼Œé¿å…å¤§é‡ Partition åŒæ—¶è¿ç§»</li>
<li>å¿…è¦æ—¶ä¸´æ—¶è°ƒä½ <code>min.insync.replicas</code>ï¼ˆä½†è¦è¯„ä¼°é£é™©ï¼‰</li>
</ul>
<h4 data-id="heading-24">Leader Epochï¼šé˜²æ­¢æ•°æ®æˆªæ–­</h4>
<p>å‰é¢è®²äº† Leader Epoch çš„åŸç†ï¼Œè¿™é‡Œè¡¥å……å®é™…åœºæ™¯ä¸‹çš„æ•ˆæœã€‚</p>
<p><strong>åœºæ™¯é‡ç°</strong>ï¼ˆæ—§ç‰ˆæœ¬ï¼Œæ—  Leader Epochï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">æ—¶é—´çº¿ï¼š
T1: Leader A (<span class="hljs-attr">LEO</span>=<span class="hljs-number">105</span>, HW=<span class="hljs-number">100</span>), Follower B (LEO=<span class="hljs-number">105</span>, HW=<span class="hljs-number">100</span>)
T2: A å†™å…¥ 106~110ï¼Œ<span class="hljs-attr">LEO</span>=<span class="hljs-number">111</span>ï¼ŒHW è¿˜æ˜¯ <span class="hljs-number">100</span>ï¼ˆéœ€ç­‰ B æ‹‰å–ï¼‰
T3: A å®•æœº
T4: B å½“é€‰ Leaderï¼Œä½† B çš„ <span class="hljs-attr">HW</span>=<span class="hljs-number">100</span>ï¼Œæˆªæ–­åˆ° <span class="hljs-number">100</span>
T5: A æ¢å¤ï¼Œä» B åŒæ­¥ï¼Œä¹Ÿæˆªæ–­åˆ° 100
T6: æ•°æ® 101~110 æ°¸ä¹…ä¸¢å¤±
</code></pre>
<p><strong>å¼•å…¥ Leader Epoch å</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">T1: <span class="hljs-attr">Epoch</span>=<span class="hljs-number">5</span>, Leader A (LEO=<span class="hljs-number">105</span>)
T2: A å†™å…¥ 106~110ï¼Œ<span class="hljs-attr">LEO</span>=<span class="hljs-number">111</span>
T3: A å®•æœºï¼ŒEpoch é€’å¢ä¸º 6
T4: B å½“é€‰ Leader (<span class="hljs-attr">Epoch</span>=<span class="hljs-number">6</span>, LEO=<span class="hljs-number">105</span>)
T5: A æ¢å¤ï¼ŒæŸ¥è¯¢ Epoch 6 çš„èµ·å§‹ Offsetï¼Œå¾—çŸ¥æ˜¯ 105
T6: A æˆªæ–­åˆ° 105ï¼ˆè€Œä¸æ˜¯ç›²ç›®æˆªæ–­åˆ° HWï¼‰ï¼Œä¿ç•™äº† 100~105 çš„æ•°æ®
</code></pre>
<p>è™½ç„¶ 106~110 ä»ç„¶æ²¡æœ‰è¢«å¤åˆ¶åˆ° Bï¼Œä½†è‡³å°‘é¿å…äº†"B æˆªæ–­å A ä¹Ÿè·Ÿç€æˆªæ–­"çš„é—®é¢˜ã€‚</p>
<p><strong>é…ç½®</strong>ï¼š</p>
<p>Leader Epoch ä» 2.5+ é»˜è®¤å¼€å¯ï¼Œä¸éœ€è¦é¢å¤–é…ç½®ã€‚å¯ä»¥é€šè¿‡ <code>kafka-log-dirs.sh</code> æŸ¥çœ‹ <code>.snapshot</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">kafka-log-dirs.sh --bootstrap-server localhost:9092 \
  --describe --topic my-topic
</code></pre>
<h4 data-id="heading-25">RocketMQï¼šåŒæ­¥åˆ·ç›˜ + åŒæ­¥å¤åˆ¶çš„ç»„åˆ</h4>
<p>RocketMQ æä¾›äº†"åˆ·ç›˜"å’Œ"å¤åˆ¶"ä¸¤ä¸ªç»´åº¦çš„é…ç½®ï¼Œç»„åˆèµ·æ¥æœ‰å››ç§å¯é æ€§ç­‰çº§ã€‚</p>








































<table><thead><tr><th>åˆ·ç›˜</th><th>å¤åˆ¶</th><th>å¯é æ€§</th><th>æ€§èƒ½</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>å¼‚æ­¥</td><td>å¼‚æ­¥</td><td>è¾ƒä½</td><td>æœ€é«˜</td><td>æ—¥å¿—ã€ç›‘æ§</td></tr><tr><td>å¼‚æ­¥</td><td>åŒæ­¥</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>ä¸€èˆ¬ä¸šåŠ¡</td></tr><tr><td>åŒæ­¥</td><td>å¼‚æ­¥</td><td>ä¸­ç­‰</td><td>ä¸­ç­‰</td><td>éœ€è¦å•æœºå¯é </td></tr><tr><td>åŒæ­¥</td><td>åŒæ­¥</td><td>æœ€é«˜</td><td>è¾ƒä½</td><td>é‡‘èã€æ”¯ä»˜</td></tr></tbody></table>
<p><strong>æºç å®ç°</strong>ï¼ˆåŒæ­¥åˆ·ç›˜ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// CommitLog.java</span>
<span class="hljs-keyword">public</span> PutMessageResult <span class="hljs-title function_">putMessage</span><span class="hljs-params">(MessageExtBrokerInner msg)</span> {
    <span class="hljs-comment">// å†™å…¥ MappedFile</span>
    <span class="hljs-type">AppendMessageResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> mappedFile.appendMessage(msg);
    
    <span class="hljs-comment">// åŒæ­¥åˆ·ç›˜</span>
    <span class="hljs-keyword">if</span> (FlushDiskType.SYNC_FLUSH == flushDiskType) {
        <span class="hljs-type">GroupCommitService</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.groupCommitService;
        service.putRequest(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GroupCommitRequest</span>(result.getWroteOffset() + result.getWroteBytes()));
        
        CompletableFuture&lt;FlushStatus&gt; flushFuture = service.waitForFlush(syncFlushTimeout);
        <span class="hljs-type">FlushStatus</span> <span class="hljs-variable">flushStatus</span> <span class="hljs-operator">=</span> flushFuture.get();
        
        <span class="hljs-keyword">if</span> (flushStatus != FlushStatus.FLUSH_OK) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PutMessageResult</span>(PutMessageStatus.FLUSH_DISK_TIMEOUT, result);
        }
    }
    
    <span class="hljs-comment">// åŒæ­¥å¤åˆ¶</span>
    <span class="hljs-keyword">if</span> (BrokerRole.SYNC_MASTER == brokerRole) {
        <span class="hljs-type">HAService</span> <span class="hljs-variable">ha</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.haService;
        <span class="hljs-keyword">if</span> (!ha.isSlaveOK(result.getWroteOffset() + result.getWroteBytes())) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PutMessageResult</span>(PutMessageStatus.SLAVE_NOT_AVAILABLE, result);
        }
        
        CompletableFuture&lt;PutMessageStatus&gt; replicaFuture = 
            ha.waitForSlave(result.getWroteOffset() + result.getWroteBytes(), syncFlushTimeout);
        <span class="hljs-type">PutMessageStatus</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> replicaFuture.get();
        
        <span class="hljs-keyword">if</span> (status != PutMessageStatus.PUT_OK) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PutMessageResult</span>(PutMessageStatus.FLUSH_SLAVE_TIMEOUT, result);
        }
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PutMessageResult</span>(PutMessageStatus.PUT_OK, result);
}
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li>åŒæ­¥åˆ·ç›˜å’ŒåŒæ­¥å¤åˆ¶éƒ½æ˜¯é˜»å¡ç­‰å¾…çš„ï¼ˆé€šè¿‡ CountDownLatch æˆ– CompletableFutureï¼‰</li>
<li>è¶…æ—¶æ—¶é—´é»˜è®¤ 5 ç§’ï¼ˆ<code>syncFlushTimeout</code>ï¼‰ï¼Œå¯è°ƒæ•´</li>
<li>å¦‚æœè¶…æ—¶ï¼Œè¿”å›å¤±è´¥çŠ¶æ€ï¼ŒProducer éœ€è¦é‡è¯•</li>
</ul>
<p><strong>DLedger çš„æ—¥å¿—æäº¤</strong>ï¼š</p>
<p>DLedger æ¨¡å¼ä¸‹ï¼Œå†™å…¥æµç¨‹å˜ä¸ºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// DLedgerCommitLog.java</span>
<span class="hljs-keyword">public</span> CompletableFuture&lt;PutMessageResult&gt; <span class="hljs-title function_">asyncPutMessage</span><span class="hljs-params">(MessageExtBrokerInner msg)</span> {
    <span class="hljs-comment">// æ„é€  DLedger Entry</span>
    <span class="hljs-type">DLedgerEntry</span> <span class="hljs-variable">entry</span> <span class="hljs-operator">=</span> encodeToDLedgerEntry(msg);
    
    <span class="hljs-comment">// Append åˆ° DLedgerï¼ˆè‡ªåŠ¨è§¦å‘ Raft å¤åˆ¶ï¼‰</span>
    <span class="hljs-keyword">return</span> dLedgerServer.appendAsLeader(entry)
        .thenApply(response -&gt; {
            <span class="hljs-keyword">if</span> (response.getCode() == DLedgerResponseCode.SUCCESS) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PutMessageResult</span>(PutMessageStatus.PUT_OK, ...);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PutMessageResult</span>(PutMessageStatus.SERVICE_NOT_AVAILABLE, ...);
            }
        });
}
</code></pre>
<p>DLedger å†…éƒ¨ä¼šå¤„ç† Raft å¤åˆ¶ã€å¤šæ•°æ´¾ç¡®è®¤ã€æ—¥å¿—å¯¹é½ç­‰é€»è¾‘ï¼Œä¸šåŠ¡ä¾§åªéœ€è¦é…ç½®å‰¯æœ¬æ•°é‡å’Œè¶…æ—¶æ—¶é—´ã€‚</p>
<hr/>
<h3 data-id="heading-26">3.4 æ¶ˆæ¯é‡å¤ä¸å¹‚ç­‰æ€§</h3>
<p>é«˜å¯ç”¨ = é‡è¯• + å¤šå‰¯æœ¬ï¼Œé‡å¤æ¶ˆæ¯ä¸å¯é¿å…ã€‚Kafka å’Œ RocketMQ éƒ½æä¾›äº†ä¸€äº›æ‰‹æ®µå‡å°‘é‡å¤ï¼Œä½†ç«¯åˆ°ç«¯çš„å¹‚ç­‰è¿˜æ˜¯è¦ä¸šåŠ¡è‡ªå·±ä¿è¯ã€‚</p>
<h4 data-id="heading-27">Kafkaï¼šå¹‚ç­‰ Producer + äº‹åŠ¡æ¶ˆæ¯</h4>
<h5 data-id="heading-28">å¹‚ç­‰ Producerï¼ˆPID + Sequence Numberï¼‰</h5>
<p>Kafka 0.11+ å¼•å…¥äº†å¹‚ç­‰ Producerï¼Œè§£å†³"ç½‘ç»œé‡ä¼ å¯¼è‡´é‡å¤"çš„é—®é¢˜ã€‚</p>
<p><strong>å¼€å¯æ–¹å¼</strong>ï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># Producer é…ç½®
enable.idempotence=true
</code></pre>
<p>å¼€å¯åï¼ŒProducer ä¼šè¢«åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ PIDï¼ˆProducer IDï¼‰ï¼Œæ¯æ¡æ¶ˆæ¯å¸¦ä¸Šé€’å¢çš„ Sequence Numberã€‚Broker ç«¯ä¼šç¼“å­˜æœ€è¿‘çš„ Sequenceï¼Œé‡å¤æ¶ˆæ¯ä¼šè¢«ç›´æ¥ä¸¢å¼ƒã€‚</p>
<p><strong>æºç é€»è¾‘</strong>ï¼ˆBroker ç«¯ï¼‰ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">// Partition.scala</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">checkDuplicates</span></span>(producerId: <span class="hljs-type">Long</span>, sequence: <span class="hljs-type">Int</span>): <span class="hljs-type">Boolean</span> = {
  <span class="hljs-keyword">val</span> lastSeq = producerStateManager.lastSequence(producerId)
  
  <span class="hljs-keyword">if</span> (sequence &lt;= lastSeq) {
    <span class="hljs-comment">// é‡å¤æ¶ˆæ¯ï¼Œè¿”å›æˆåŠŸä½†ä¸å†™å…¥</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  }
  
  <span class="hljs-keyword">if</span> (sequence != lastSeq + <span class="hljs-number">1</span>) {
    <span class="hljs-comment">// åºå·ä¸è¿ç»­ï¼Œè¯´æ˜æœ‰æ¶ˆæ¯ä¸¢å¤±ï¼ŒæŠ¥é”™</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-type">OutOfOrderSequenceException</span>(...)
  }
  
  producerStateManager.updateSequence(producerId, sequence)
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
}
</code></pre>
<p><strong>é™åˆ¶</strong>ï¼š</p>
<ul>
<li>åªèƒ½ä¿è¯å•ä¸ª Producer å®ä¾‹ã€å•ä¸ª Partition çš„å¹‚ç­‰</li>
<li>è·¨ Partition æˆ–å¤šä¸ª Producer å®ä¾‹ä¸ä¿è¯</li>
<li>Producer é‡å¯å PID ä¼šå˜ï¼Œæ— æ³•è·¨ä¼šè¯å»é‡</li>
</ul>
<h5 data-id="heading-29">äº‹åŠ¡æ¶ˆæ¯ï¼ˆTransactional Producerï¼‰</h5>
<p>Kafka çš„äº‹åŠ¡æ¶ˆæ¯é€šè¿‡ä¸¤é˜¶æ®µæäº¤ï¼ˆ2PCï¼‰å®ç° Exactly Onceã€‚</p>
<p><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Properties</span> <span class="hljs-variable">props</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();
props.put(<span class="hljs-string">"transactional.id"</span>, <span class="hljs-string">"my-transactional-id"</span>);
props.put(<span class="hljs-string">"enable.idempotence"</span>, <span class="hljs-string">"true"</span>);

KafkaProducer&lt;String, String&gt; producer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">KafkaProducer</span>&lt;&gt;(props);

producer.initTransactions();

<span class="hljs-keyword">try</span> {
    producer.beginTransaction();
    producer.send(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ProducerRecord</span>&lt;&gt;(<span class="hljs-string">"topic1"</span>, <span class="hljs-string">"msg1"</span>));
    producer.send(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ProducerRecord</span>&lt;&gt;(<span class="hljs-string">"topic2"</span>, <span class="hljs-string">"msg2"</span>));
    producer.commitTransaction();
} <span class="hljs-keyword">catch</span> (Exception e) {
    producer.abortTransaction();
}
</code></pre>
<p><strong>äº‹åŠ¡åè°ƒå™¨ï¼ˆTransaction Coordinatorï¼‰</strong>ï¼š</p>
<p>Kafka å†…éƒ¨æœ‰ä¸ª <code>__transaction_state</code> Topicï¼Œå­˜å‚¨äº‹åŠ¡çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">TransactionId</span> <span class="hljs-string">-&gt;</span> {
  <span class="hljs-attr">producerId:</span> <span class="hljs-number">12345</span>,
  <span class="hljs-attr">producerEpoch:</span> <span class="hljs-number">0</span>,
  <span class="hljs-attr">state:</span> <span class="hljs-string">Ongoing</span> <span class="hljs-string">|</span> <span class="hljs-string">PrepareCommit</span> <span class="hljs-string">|</span> <span class="hljs-string">PrepareAbort</span> <span class="hljs-string">|</span> <span class="hljs-string">CompleteCommit</span> <span class="hljs-string">|</span> <span class="hljs-string">CompleteAbort</span>,
  <span class="hljs-attr">partitions:</span> [<span class="hljs-string">topic1-0</span>, <span class="hljs-string">topic2-1</span>],
  <span class="hljs-attr">txnStartTimestamp:</span> <span class="hljs-number">1700000000</span>
}
</code></pre>
<p><strong>2PC æµç¨‹</strong>ï¼š</p>
<ol>
<li><strong>Begin</strong>ï¼šProducer å‘ Coordinator æ³¨å†Œäº‹åŠ¡</li>
<li><strong>Prepare</strong>ï¼šProducer å‘é€æ¶ˆæ¯åˆ°å„ä¸ª Partitionï¼Œä½†æ ‡è®°ä¸º"äº‹åŠ¡ä¸­"</li>
<li><strong>Commit</strong>ï¼šProducer è°ƒç”¨ <code>commitTransaction()</code>ï¼ŒCoordinator å†™å…¥ <code>PrepareCommit</code> çŠ¶æ€</li>
<li><strong>Complete</strong>ï¼šCoordinator å‘æ‰€æœ‰ Partition å‘é€ <code>WriteTxnMarker</code>ï¼Œæ ‡è®°äº‹åŠ¡å®Œæˆ</li>
<li><strong>Cleanup</strong>ï¼šæ¸…ç†äº‹åŠ¡çŠ¶æ€</li>
</ol>
<p><strong>Consumer ç«¯</strong>ï¼š</p>
<p>Consumer éœ€è¦é…ç½® <code>isolation.level=read_committed</code>ï¼Œè¿™æ ·åªä¼šè¯»åˆ°å·²æäº¤çš„äº‹åŠ¡æ¶ˆæ¯ã€‚</p>
<p><strong>æ€§èƒ½å½±å“</strong>ï¼š</p>
<p>äº‹åŠ¡æ¶ˆæ¯çš„æ€§èƒ½ä¼šä¸‹é™ 20~30%ï¼Œå› ä¸ºï¼š</p>
<ul>
<li>éœ€è¦å†™å…¥äº‹åŠ¡çŠ¶æ€åˆ° <code>__transaction_state</code></li>
<li>éœ€è¦ç­‰å¾…æ‰€æœ‰ Partition ç¡®è®¤</li>
<li>Consumer éœ€è¦è¿‡æ»¤æœªæäº¤çš„æ¶ˆæ¯</li>
</ul>
<h4 data-id="heading-30">RocketMQï¼šåŠæ¶ˆæ¯ + æœ¬åœ°äº‹åŠ¡ + å›æŸ¥</h4>
<p>RocketMQ çš„äº‹åŠ¡æ¶ˆæ¯èµ°å¦ä¸€æ¡è·¯ï¼šå…ˆå‘åŠæ¶ˆæ¯ï¼ˆå¯¹ Consumer ä¸å¯è§ï¼‰ï¼Œä¸šåŠ¡æ‰§è¡Œæœ¬åœ°äº‹åŠ¡ï¼Œå†å†³å®šæäº¤è¿˜æ˜¯å›æ»šã€‚</p>
<p><strong>æµç¨‹</strong>ï¼š</p>
<ol>
<li><strong>å‘é€åŠæ¶ˆæ¯</strong>ï¼šProducer è°ƒç”¨ <code>sendMessageInTransaction()</code>ï¼ŒBroker å†™å…¥åŠæ¶ˆæ¯åˆ°ç‰¹æ®Š Topic <code>RMQ_SYS_TRANS_HALF_TOPIC</code></li>
<li><strong>æ‰§è¡Œæœ¬åœ°äº‹åŠ¡</strong>ï¼šProducer æ‰§è¡Œæœ¬åœ°äº‹åŠ¡é€»è¾‘ï¼ˆå¦‚æ‰£å‡åº“å­˜ã€æ›´æ–°è®¢å•ï¼‰</li>
<li><strong>æäº¤/å›æ»š</strong>ï¼šæ ¹æ®æœ¬åœ°äº‹åŠ¡ç»“æœï¼ŒProducer å‘Šè¯‰ Broker æäº¤æˆ–å›æ»š</li>
<li><strong>Broker å¤„ç†</strong>ï¼šæäº¤åˆ™æŠŠåŠæ¶ˆæ¯ç§»åˆ°æ­£å¸¸ Topicï¼Œå›æ»šåˆ™åˆ é™¤åŠæ¶ˆæ¯</li>
<li><strong>å›æŸ¥</strong>ï¼šå¦‚æœ Broker é•¿æ—¶é—´æ²¡æ”¶åˆ°ç»“æœï¼Œä¼šå›æŸ¥ Producer æœ¬åœ°äº‹åŠ¡çŠ¶æ€</li>
</ol>
<p><strong>æºç å®ç°</strong>ï¼ˆå‘é€åŠæ¶ˆæ¯ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// TransactionalMessageBridge.java</span>
<span class="hljs-keyword">public</span> PutMessageResult <span class="hljs-title function_">putHalfMessage</span><span class="hljs-params">(MessageExtBrokerInner msgInner)</span> {
    <span class="hljs-comment">// æ”¹å†™ Topic ä¸ºåŠæ¶ˆæ¯ Topic</span>
    msgInner.setTopic(TransactionalMessageUtil.buildHalfTopic());
    msgInner.setQueueId(<span class="hljs-number">0</span>);
    
    <span class="hljs-comment">// å†™å…¥ CommitLog</span>
    <span class="hljs-keyword">return</span> commitLog.putMessage(msgInner);
}
</code></pre>
<p><strong>å›æŸ¥æœºåˆ¶</strong>ï¼š</p>
<p>Broker æœ‰ä¸ªå®šæ—¶ä»»åŠ¡ <code>TransactionalMessageCheckService</code>ï¼Œæ¯åˆ†é’Ÿæ‰«ä¸€æ¬¡åŠæ¶ˆæ¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// TransactionalMessageCheckService.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">check</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// ä»åŠæ¶ˆæ¯ Topic æ‹‰å–æ¶ˆæ¯</span>
    List&lt;MessageExt&gt; halfMessages = pullHalfMessages();
    
    <span class="hljs-keyword">for</span> (MessageExt msg : halfMessages) {
        <span class="hljs-keyword">if</span> (System.currentTimeMillis() - msg.getStoreTimestamp() &gt; checkImmunityTime) {
            <span class="hljs-comment">// è¶…æ—¶æœªæ”¶åˆ°æäº¤/å›æ»šï¼Œå›æŸ¥ Producer</span>
            checkProducer(msg);
        }
    }
}
</code></pre>
<p>å›æŸ¥æœ€å¤š 15 æ¬¡ï¼ˆå¯é…ç½®ï¼‰ï¼Œè¶…è¿‡æ¬¡æ•°ä¼šç§»åˆ°æ­»ä¿¡é˜Ÿåˆ—ã€‚</p>
<p><strong>å¯¹æ¯”</strong>ï¼š</p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>Kafka äº‹åŠ¡</th><th>RocketMQ äº‹åŠ¡</th></tr></thead><tbody><tr><td>å®ç°æ–¹å¼</td><td>2PC + äº‹åŠ¡åè°ƒå™¨</td><td>åŠæ¶ˆæ¯ + å›æŸ¥</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å¤š Topic åŸå­å†™å…¥</td><td>æœ¬åœ°äº‹åŠ¡ + æ¶ˆæ¯å‘é€</td></tr><tr><td>æ€§èƒ½å½±å“</td><td>20~30%</td><td>15~20%</td></tr><tr><td>è¿ç»´å¤æ‚åº¦</td><td>ä¸­ç­‰</td><td>è¾ƒä½</td></tr></tbody></table>
<p>Kafka çš„äº‹åŠ¡æ›´é€‚åˆ Kafka Streams è¿™ç§"è¯»ä¸€ä¸ª Topicã€å†™å¤šä¸ª Topic"çš„åœºæ™¯ï¼›RocketMQ çš„äº‹åŠ¡æ›´é€‚åˆ"æ‰£åº“å­˜ + å‘æ¶ˆæ¯"è¿™ç§ä¸šåŠ¡åœºæ™¯ã€‚</p>
<h4 data-id="heading-31">ä¸šåŠ¡ä¾§å¹‚ç­‰çš„å…¸å‹åšæ³•</h4>
<p>æ— è®ºç”¨å“ªç§ MQï¼Œä¸šåŠ¡ä¾§çš„å¹‚ç­‰æ˜¯é€ƒä¸æ‰çš„ã€‚å‡ ä¸ªå¸¸è§æ‰‹æ®µï¼š</p>
<ol>
<li><strong>æ•°æ®åº“å”¯ä¸€ç´¢å¼•</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `order_message` (
  `msg_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">PRIMARY</span> KEY,
  `order_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">32</span>),
  `status` tinyint,
  `create_time` datetime,
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_msg_id` (`msg_id`)
) ENGINE<span class="hljs-operator">=</span>InnoDB;
</code></pre>
<p>æ’å…¥æ—¶å¦‚æœ <code>msg_id</code> é‡å¤ï¼Œä¼šæŠ¥ DuplicateKeyExceptionï¼Œä¸šåŠ¡ç›´æ¥å¿½ç•¥å³å¯ã€‚</p>
<ol start="2">
<li><strong>Redis SET</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"msg:processed:"</span> + msgId;
<span class="hljs-keyword">if</span> (redis.setnx(key, <span class="hljs-string">"1"</span>, <span class="hljs-number">3600</span>)) {
    <span class="hljs-comment">// ç¬¬ä¸€æ¬¡å¤„ç†</span>
    processBusiness(msg);
} <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// é‡å¤æ¶ˆæ¯ï¼Œè·³è¿‡</span>
    log.warn(<span class="hljs-string">"Duplicate message: {}"</span>, msgId);
}
</code></pre>
<ol start="3">
<li><strong>çŠ¶æ€æœº + ä¹è§‚é”</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŸ¥è¯¢å½“å‰çŠ¶æ€</span>
<span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderMapper.selectById(orderId);

<span class="hljs-keyword">if</span> (order.getStatus() != UNPAID) {
    <span class="hljs-comment">// å·²å¤„ç†è¿‡ï¼Œè·³è¿‡</span>
    <span class="hljs-keyword">return</span>;
}

<span class="hljs-comment">// æ›´æ–°çŠ¶æ€ï¼Œå¸¦ç‰ˆæœ¬å·</span>
<span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> orderMapper.updateStatus(orderId, PAID, order.getVersion());
<span class="hljs-keyword">if</span> (rows == <span class="hljs-number">0</span>) {
    <span class="hljs-comment">// å¹¶å‘å†²çªï¼Œé‡è¯•æˆ–æ”¾å¼ƒ</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentModificationException</span>();
}
</code></pre>
<p>å®æˆ˜ç»éªŒï¼š</p>
<ul>
<li>å¹‚ç­‰é”®è¦é€‰å¯¹ï¼Œè®¢å•å·ã€æ”¯ä»˜æµæ°´å·ç­‰å¤©ç„¶å”¯ä¸€çš„ä¸šåŠ¡ä¸»é”®æœ€é è°±ã€‚</li>
<li>Redis å»é‡è¦è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œé˜²æ­¢å†…å­˜çˆ†ç‚¸ã€‚</li>
<li>çŠ¶æ€æœºè®¾è®¡è¦ä¸¥è°¨ï¼Œé¿å…å‡ºç°"ä¸å¯é€†çŠ¶æ€"çš„é€»è¾‘æ¼æ´ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-32">3.5 å®¹ç¾ä¸å¤‡ä»½</h3>
<p>å•æœºæˆ¿çš„é«˜å¯ç”¨åªèƒ½é˜²"æœºå™¨æŒ‚""ç¨‹åºæŒ‚"ï¼Œé˜²ä¸äº†"æœºæˆ¿æ–­ç”µ""ç½‘ç»œå‰²æ¥"ã€‚è·¨æœºæˆ¿å®¹ç¾æ˜¯æ›´é«˜å±‚æ¬¡çš„å¯ç”¨æ€§ä¿éšœã€‚</p>
<h4 data-id="heading-33">Kafka çš„è·¨æœºæˆ¿æ–¹æ¡ˆ</h4>
<h5 data-id="heading-34">MirrorMaker 2.0</h5>
<p>MirrorMaker æ˜¯ Kafka å®˜æ–¹çš„è·¨é›†ç¾¤å¤åˆ¶å·¥å…·ã€‚2.0 ç‰ˆæœ¬é‡å†™äº†æ¶æ„ï¼Œæ”¯æŒåŒå‘åŒæ­¥ã€Topic ç™½åå•ã€ACL åŒæ­¥ç­‰åŠŸèƒ½ã€‚</p>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<p>MirrorMaker æœ¬è´¨ä¸Šæ˜¯"æ¶ˆè´¹æºé›†ç¾¤ + å†™å…¥ç›®æ ‡é›†ç¾¤"çš„æ¡¥æ¥å™¨ã€‚</p>
<pre><code class="hljs language-css" lang="css">Source Cluster (<span class="hljs-selector-tag">A</span> æœºæˆ¿)
    â†“ Consumer
MirrorMaker
    â†“ Producer
Target Cluster (<span class="hljs-selector-tag">B</span> æœºæˆ¿)
</code></pre>
<p><strong>é…ç½®ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># æºé›†ç¾¤
source.bootstrap.servers=kafka-a:9092
source.cluster.alias=cluster-a

# ç›®æ ‡é›†ç¾¤
target.bootstrap.servers=kafka-b:9092
target.cluster.alias=cluster-b

# Topic ç™½åå•
topics=order.*, payment.*
topics.blacklist=test.*

# åŒæ­¥é…ç½®
sync.topic.configs.enabled=true
sync.topic.acls.enabled=true
</code></pre>
<p><strong>åŒå‘åŒæ­¥</strong>ï¼š</p>
<p>å¦‚æœéœ€è¦åŒæ´»ï¼Œå¯ä»¥éƒ¨ç½²ä¸¤ä¸ª MirrorMakerï¼ŒAâ†’B å’Œ Bâ†’A åŒæ—¶è·‘ã€‚ä½†è¦æ³¨æ„ï¼š</p>
<ul>
<li>æ¶ˆæ¯å¯èƒ½å¾ªç¯å¤åˆ¶ï¼ˆA å†™çš„æ¶ˆæ¯è¢«å¤åˆ¶åˆ° Bï¼ŒB åˆå¤åˆ¶å› Aï¼‰</li>
<li>éœ€è¦åœ¨æ¶ˆæ¯å¤´é‡ŒåŠ æ ‡è®°ï¼Œé˜²æ­¢æ­»å¾ªç¯</li>
</ul>
<p><strong>æ€§èƒ½è°ƒä¼˜</strong>ï¼š</p>
<ul>
<li><code>tasks.max</code>ï¼šMirrorMaker çš„å¹¶è¡Œåº¦ï¼Œå»ºè®®è®¾ç½®ä¸ºæºé›†ç¾¤ Partition æ•°çš„ 1~2 å€</li>
<li><code>offset.lag.max</code>ï¼šå¤åˆ¶å»¶è¿Ÿé˜ˆå€¼ï¼Œè¶…è¿‡ä¼šè§¦å‘å‘Šè­¦</li>
<li><code>replication.factor</code>ï¼šç›®æ ‡é›†ç¾¤çš„å‰¯æœ¬æ•°ï¼Œå»ºè®®ä¸æºé›†ç¾¤ä¸€è‡´</li>
</ul>
<h5 data-id="heading-35">Cluster Linkingï¼ˆConfluent å•†ç”¨ç‰¹æ€§ï¼‰</h5>
<p>Confluent Platform æä¾›çš„ Cluster Linking åŠŸèƒ½æ›´å¼ºï¼š</p>
<ul>
<li>æ”¯æŒå®æ—¶åŒå‘åŒæ­¥</li>
<li>æ”¯æŒ Schema Registry åŒæ­¥</li>
<li>æ”¯æŒç»†ç²’åº¦çš„æµæ§å’Œé™é€Ÿ</li>
</ul>
<p>ä½†è¿™æ˜¯å•†ç”¨ç‰ˆï¼Œå¼€æºç‰ˆç”¨ä¸äº†ã€‚</p>
<h4 data-id="heading-36">RocketMQ çš„è·¨æœºæˆ¿æ–¹æ¡ˆ</h4>
<h5 data-id="heading-37">åŒåŸåŒæ´»ï¼šåŒé›†ç¾¤ + åŒå†™</h5>
<p>å¸¸è§åšæ³•æ˜¯éƒ¨ç½²ä¸¤å¥— RocketMQ é›†ç¾¤ï¼Œä¸šåŠ¡åŒå†™ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Producer åŒå†™</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">sendMessage</span><span class="hljs-params">(Message msg)</span> {
    <span class="hljs-keyword">try</span> {
        producerA.send(msg);  <span class="hljs-comment">// å†™ A æœºæˆ¿</span>
    } <span class="hljs-keyword">catch</span> (Exception e) {
        log.error(<span class="hljs-string">"Send to cluster A failed"</span>, e);
    }
    
    <span class="hljs-keyword">try</span> {
        producerB.send(msg);  <span class="hljs-comment">// å†™ B æœºæˆ¿</span>
    } <span class="hljs-keyword">catch</span> (Exception e) {
        log.error(<span class="hljs-string">"Send to cluster B failed"</span>, e);
    }
}
</code></pre>
<p>é—®é¢˜ï¼š</p>
<ul>
<li>åŒå†™ä¼šå¢åŠ å»¶è¿Ÿ</li>
<li>ä¸¤ä¸ªé›†ç¾¤çš„ Offset ä¸ä¸€è‡´ï¼ŒConsumer åˆ‡æ¢æ—¶éœ€è¦é‡æ–°å®šä½</li>
</ul>
<p>ä¼˜åŒ–æ–¹æ¡ˆï¼š</p>
<ul>
<li>å¼‚æ­¥åŒå†™ï¼šå…ˆå†™ä¸»é›†ç¾¤ï¼ŒæˆåŠŸåå¼‚æ­¥å†™å¤‡é›†ç¾¤</li>
<li>æ¶ˆæ¯è½¨è¿¹ï¼šé€šè¿‡æ¶ˆæ¯ ID å…³è”ä¸¤ä¾§çš„æ¶ˆæ¯ï¼Œæ–¹ä¾¿æ’æŸ¥</li>
</ul>
<h5 data-id="heading-38">DLedger è·¨æœºæˆ¿</h5>
<p>å¦‚æœç½‘ç»œå»¶è¿Ÿ &lt; 5msï¼ˆåŒåŸä¸“çº¿ï¼‰ï¼Œå¯ä»¥ç”¨ DLedger æŠŠå‰¯æœ¬åˆ†å¸ƒåˆ°ä¸åŒæœºæˆ¿ï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># DLedger é…ç½®
dLedgerPeers=n0-192.168.1.10:40911;n1-192.168.2.10:40911;n2-192.168.3.10:40911
</code></pre>
<p><code>n0</code> åœ¨ A æœºæˆ¿ï¼Œ<code>n1</code> åœ¨ B æœºæˆ¿ï¼Œ<code>n2</code> åœ¨ C æœºæˆ¿ã€‚ä»»æ„æœºæˆ¿æ•…éšœï¼Œå‰©ä½™ä¸¤ä¸ªæœºæˆ¿ä»èƒ½è¾¾æˆå¤šæ•°æ´¾ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li>è·¨æœºæˆ¿å»¶è¿Ÿä¼šå½±å“ Raft é€‰ä¸¾å’Œæ—¥å¿—å¤åˆ¶ï¼ŒRTT &gt; 10ms ä¸å»ºè®®ç”¨è¿™ç§æ–¹æ¡ˆ</li>
<li>ç½‘ç»œæŠ–åŠ¨å¯èƒ½å¯¼è‡´é¢‘ç¹é€‰ä¸¾ï¼Œéœ€è¦è°ƒæ•´ <code>heartBeatTimeIntervalMs</code>ï¼ˆé»˜è®¤ 1000msï¼‰</li>
</ul>
<h5 data-id="heading-39">æ¶ˆæ¯å¤‡ä»½ä¸æ¢å¤</h5>
<p>RocketMQ çš„ CommitLog æ˜¯ç‹¬ç«‹æ–‡ä»¶ï¼Œå¯ä»¥ç›´æ¥æ‹·è´åˆ°å¯¹è±¡å­˜å‚¨åšå¤‡ä»½ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®šæ—¶å¤‡ä»½è„šæœ¬</span>
rsync -avz /data/rocketmq/store/commitlog/ \
  s3://backup-bucket/commitlog/$(<span class="hljs-built_in">date</span> +%Y%m%d)/
</code></pre>
<p>æ¢å¤æ—¶ï¼š</p>
<ol>
<li>æ‹·è´ CommitLog æ–‡ä»¶åˆ°æ–° Broker</li>
<li>å¯åŠ¨ Brokerï¼Œè‡ªåŠ¨é‡å»º ConsumeQueue</li>
<li>éªŒè¯æ¶ˆæ¯å¯æ¶ˆè´¹</li>
</ol>
<p>è¿™ä¸ªæ–¹æ¡ˆçš„å¥½å¤„æ˜¯ç®€å•ç²—æš´ï¼Œé€‚åˆ"å®šæœŸå…¨é‡å¤‡ä»½"ã€‚ç¼ºç‚¹æ˜¯æ¢å¤æ—¶é—´é•¿ï¼ˆéœ€è¦é‡å»ºç´¢å¼•ï¼‰ã€‚</p>
<h4 data-id="heading-40">å®¹ç¾æ¼”ç»ƒçš„å…³é”®åŠ¨ä½œ</h4>
<p>å®¹ç¾æ–¹æ¡ˆå†™å¾—å†æ¼‚äº®ï¼Œä¸æ¼”ç»ƒéƒ½æ˜¯çº¸é¢æ–‡ç« ã€‚å‡ ä¸ªå¿…åšçš„æ¼”ç»ƒé¡¹ï¼š</p>
<ol>
<li>
<p><strong>æœºæˆ¿æ–­ç”µæ¼”ç»ƒ</strong>ï¼š</p>
<ul>
<li>å¼ºåˆ¶å…³é—­ä¸€ä¸ªæœºæˆ¿çš„æ‰€æœ‰ Broker</li>
<li>éªŒè¯å¦ä¸€ä¾§é›†ç¾¤èƒ½å¦è‡ªåŠ¨æ¥ç®¡æµé‡</li>
<li>éªŒè¯æ•°æ®æ˜¯å¦ä¸¢å¤±</li>
</ul>
</li>
<li>
<p><strong>ç½‘ç»œéš”ç¦»æ¼”ç»ƒ</strong>ï¼š</p>
<ul>
<li>ç”¨ iptables æ¨¡æ‹Ÿæœºæˆ¿ä¹‹é—´ç½‘ç»œä¸­æ–­</li>
<li>éªŒè¯ Raft æˆ–ä¸»ä»å¤åˆ¶çš„è¡¨ç°</li>
<li>éªŒè¯ Producer/Consumer çš„åˆ‡æ¢é€»è¾‘</li>
</ul>
</li>
<li>
<p><strong>å…¨é‡åˆ‡æµæ¼”ç»ƒ</strong>ï¼š</p>
<ul>
<li>æŠŠæ‰€æœ‰ Producer/Consumer ä» A é›†ç¾¤åˆ‡åˆ° B é›†ç¾¤</li>
<li>éªŒè¯åˆ‡æ¢æ—¶é—´ã€æ¶ˆæ¯ä¸¢å¤±ã€é‡å¤æ¶ˆè´¹ç­‰</li>
<li>éªŒè¯å›æ»šæ–¹æ¡ˆæ˜¯å¦å¯ç”¨</li>
</ul>
</li>
</ol>
<p>æ¼”ç»ƒåä¸€å®šè¦å¤ç›˜ï¼š</p>
<ul>
<li>å®é™…æ¢å¤æ—¶é—´ vs é¢„æœŸæ—¶é—´</li>
<li>å“ªäº›æ­¥éª¤å¡ä½äº†</li>
<li>ç›‘æ§å‘Šè­¦æ˜¯å¦åŠæ—¶</li>
<li>æœ‰æ²¡æœ‰é—æ¼çš„æ£€æŸ¥é¡¹</li>
</ul>
<hr/>
<h3 data-id="heading-41">æ€»ç»“</h3>
<p>é«˜å¯ç”¨æ˜¯ä¸ªç³»ç»Ÿå·¥ç¨‹ï¼Œæ¶‰åŠæ¶æ„ã€é…ç½®ã€ç›‘æ§ã€æµç¨‹ç­‰å¤šä¸ªå±‚é¢ã€‚Kafka å’Œ RocketMQ å„æœ‰ä¼˜åŠ¿ï¼š</p>
<p><strong>Kafka</strong>ï¼š</p>
<ul>
<li>å»ä¸­å¿ƒåŒ– + ISR æœºåˆ¶ï¼Œé€‚åˆé«˜ååã€åŠ¨æ€æ‰©å®¹çš„åœºæ™¯</li>
<li>KRaft æ¨¡å¼å¤§å¹…æå‡æ•…éšœæ„ŸçŸ¥é€Ÿåº¦å’Œå…ƒæ•°æ®æ€§èƒ½</li>
<li>äº‹åŠ¡æ¶ˆæ¯é€‚åˆæµå¤„ç†ï¼Œä½†ä¸šåŠ¡åº”ç”¨éœ€è¦ä»”ç»†è®¾è®¡</li>
</ul>
<p><strong>RocketMQ</strong>ï¼š</p>
<ul>
<li>ä¸»å¤‡æ˜ç¡® + åˆ·ç›˜/å¤åˆ¶ç»„åˆï¼Œé€‚åˆå¯¹ä¸€è‡´æ€§è¦æ±‚é«˜çš„ä¸šåŠ¡</li>
<li>DLedger å®ç°è‡ªåŠ¨åˆ‡æ¢ï¼Œé™ä½è¿ç»´æˆæœ¬</li>
<li>äº‹åŠ¡æ¶ˆæ¯é€‚åˆ"æœ¬åœ°äº‹åŠ¡ + æ¶ˆæ¯å‘é€"çš„åœºæ™¯</li>
</ul>
<p><strong>è½åœ°å»ºè®®</strong>ï¼š</p>
<ol>
<li><strong>æ¶æ„é€‰å‹</strong>ï¼šæ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹é€‰æ‹©åˆé€‚çš„å‰¯æœ¬æ¨¡å‹å’Œä¸€è‡´æ€§ç­–ç•¥</li>
<li><strong>å‚æ•°è°ƒä¼˜</strong>ï¼š<code>acks</code>ã€<code>min.insync.replicas</code>ã€<code>replica.lag.time.max.ms</code>ã€<code>heartbeatBrokerInterval</code> ç­‰è¦ç»“åˆç½‘ç»œè´¨é‡è°ƒæ•´</li>
<li><strong>ç›‘æ§å‘Šè­¦</strong>ï¼šåˆ†å±‚ç›‘æ§ï¼ˆåŸºç¡€/æœåŠ¡/ä¸šåŠ¡ï¼‰ï¼Œå‘Šè­¦åˆ†çº§ï¼ˆP0/P1/P2ï¼‰</li>
<li><strong>å®¹ç¾æ¼”ç»ƒ</strong>ï¼šå®šæœŸæ¼”ç»ƒï¼Œå¤ç›˜æ”¹è¿›ï¼Œç›´åˆ°"ä¸€é”®åˆ‡æ¢"</li>
</ol>
<p>é«˜å¯ç”¨æ²¡æœ‰æ·å¾„ï¼Œåªæœ‰æŠŠè¿™äº›åŸºç¡€æ‰“ç‰¢ï¼Œæ‰èƒ½åœ¨æ•…éšœæ¥ä¸´æ—¶ä»å®¹åº”å¯¹ã€‚
``</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RocketMQ vs Kafka04 - é«˜æ€§èƒ½è®¾è®¡ä¸è°ƒä¼˜]]></title>    <link>https://juejin.cn/post/7572566115848962098</link>    <guid>https://juejin.cn/post/7572566115848962098</guid>    <pubDate>2025-11-15T13:22:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572566115848962098" data-draft-id="7572566115848945714" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RocketMQ vs Kafka04 - é«˜æ€§èƒ½è®¾è®¡ä¸è°ƒä¼˜"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T13:22:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼ å°é»‘12"/> <meta itemprop="url" content="https://juejin.cn/user/985627390911096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RocketMQ vs Kafka04 - é«˜æ€§èƒ½è®¾è®¡ä¸è°ƒä¼˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/985627390911096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼ å°é»‘12
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T13:22:53.000Z" title="Sat Nov 15 2025 13:22:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¬¬å››ç¯‡ï¼šé«˜æ€§èƒ½è®¾è®¡ä¸è°ƒä¼˜</h2>
<blockquote>
<p>æ€§èƒ½è°ƒä¼˜è¿™äº‹å„¿ï¼Œä¸ƒåˆ†é è®¾è®¡ï¼Œä¸‰åˆ†é å‚æ•°ã€‚Kafka å’Œ RocketMQ éƒ½æŠŠ"é¡ºåºå†™ + æ‰¹å¤„ç† + é›¶æ‹·è´"å†™åœ¨äº†éª¨å­é‡Œï¼Œä½†çœŸæ­£æ‹‰å¼€å·®è·çš„ï¼Œæ˜¯ç½‘ç»œæ¨¡å‹ã€å†…å­˜ç®¡ç†ã€çº¿ç¨‹è°ƒåº¦è¿™äº›ç»†èŠ‚ã€‚æœ¬æ–‡ä¼šä»æºç çº§åˆ«å‰–æä¸¤è€…çš„æ€§èƒ½è®¾è®¡ï¼ŒåŒæ—¶ç»™å‡ºçœŸå®å‹æµ‹æ•°æ®å’Œè°ƒä¼˜ç»éªŒï¼Œå¸®ä½ ç»•è¿‡é‚£äº›"çœ‹èµ·æ¥æœ‰ç”¨ã€å®é™…æ²¡ç”¨"çš„ä¼˜åŒ–æ‰‹æ®µã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">4.1 é«˜æ€§èƒ½è®¾è®¡åŸåˆ™</h3>
<p>å…ˆè¯´ç»“è®ºï¼šKafka å’Œ RocketMQ çš„æ€§èƒ½éƒ½å¾ˆå¼ºï¼Œå•æœº TPS éƒ½èƒ½è·‘åˆ°ç™¾ä¸‡çº§ã€‚å·®å¼‚ä¸»è¦åœ¨ï¼š</p>
<ul>
<li><strong>Kafka</strong>ï¼šæ›´ä¾èµ– Page Cacheï¼Œè¯»å†™éƒ½è¿½æ±‚"å†…å­˜é€Ÿåº¦"ï¼›æ‰¹å¤„ç†ç²’åº¦æ›´å¤§ï¼ˆProducer ç«¯ batchï¼‰</li>
<li><strong>RocketMQ</strong>ï¼šæ›´ä¾èµ–å †å¤–å†…å­˜ï¼Œå†™å…¥é“¾è·¯çŸ­ï¼ˆCommitLog ä¸€æŠŠæ¢­ï¼‰ï¼›è¯»å–æœ‰"ä¸¤è·³"ï¼ˆConsumeQueue â†’ CommitLogï¼‰</li>
</ul>
<p>ä½†æ— è®ºå“ªä¸ªï¼Œåº•å±‚éƒ½éµå¾ªå‡ æ¡é“å¾‹ï¼š</p>
<ol>
<li><strong>é¡ºåºå†™ &gt; éšæœºå†™</strong>ï¼šç£ç›˜é¡ºåºå†™èƒ½è·‘åˆ° 500MB/s+ï¼Œéšæœºå†™åªæœ‰å‡ å MB/s</li>
<li><strong>æ‰¹é‡ &gt; å•æ¡</strong>ï¼šç½‘ç»œ/ç£ç›˜çš„å¼€é”€éƒ½åœ¨"ç³»ç»Ÿè°ƒç”¨"ï¼Œæ‰¹é‡èƒ½æŠŠå•æ¬¡å¼€é”€æ‘Šè–„</li>
<li><strong>é›¶æ‹·è´ &gt; å¤šæ¬¡æ‹·è´</strong>ï¼šsendfileã€mmap èƒ½å‡å°‘æ•°æ®åœ¨å†…æ ¸æ€/ç”¨æˆ·æ€ä¹‹é—´çš„æ¬è¿</li>
</ol>
<p>ä¸‹é¢åˆ†æ¨¡å—æ‹†å¼€è®²ã€‚</p>
<h4 data-id="heading-2">Kafka çš„æ€§èƒ½æŠ€å·§</h4>
<h5 data-id="heading-3">é¡ºåºå†™ + Page Cache</h5>
<p>Kafka çš„ Segment æ˜¯ append-only çš„ï¼Œæ‰€æœ‰å†™å…¥éƒ½æ˜¯è¿½åŠ ã€‚ç£ç›˜é¡ºåºå†™çš„æ€§èƒ½æ¥è¿‘å†…å­˜ï¼š</p>
<ul>
<li>æœºæ¢°ç›˜ï¼ˆHDDï¼‰ï¼š100~150 MB/s</li>
<li>SATA SSDï¼š500~600 MB/s</li>
<li>NVMe SSDï¼š2000~3000 MB/s</li>
</ul>
<p>Kafka é»˜è®¤ä¸ä¸»åŠ¨åˆ·ç›˜ï¼ˆ<code>log.flush.interval.messages=Long.MaxValue</code>ï¼‰ï¼ŒæŠŠ flush äº¤ç»™ OSï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">// LogSegment.scala</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">append</span></span>(records: <span class="hljs-type">MemoryRecords</span>): <span class="hljs-type">Unit</span> = {
  <span class="hljs-keyword">val</span> written = fileChannel.write(records.buffer, fileSize)
  fileSize += written
  <span class="hljs-comment">// ä¸è°ƒç”¨ force()ï¼Œè®© OS å†³å®šåˆ·ç›˜æ—¶æœº</span>
}
</code></pre>
<p>è¿™ä¸ªç­–ç•¥çš„å¥½å¤„æ˜¯æ€§èƒ½é«˜ï¼Œä»£ä»·æ˜¯å•æœºå®•æœºå¯èƒ½ä¸¢æ•°æ®ã€‚Kafka é€šè¿‡ <code>acks=all</code> + å¤šå‰¯æœ¬æ¥å¼¥è¡¥è¿™ä¸ªé£é™©ã€‚</p>
<p><strong>Page Cache ä¼˜åŒ–</strong>ï¼š</p>
<p>Page Cache æ˜¯ Kafka æ€§èƒ½çš„"æ”¾å¤§å™¨"ã€‚å¦‚æœ Cache å‘½ä¸­ç‡é«˜ï¼Œè¯»å†™éƒ½æ˜¯å†…å­˜é€Ÿåº¦ï¼›å¦‚æœå‘½ä¸­ç‡ä½ï¼Œæ€§èƒ½ä¼šæ–­å´–å¼ä¸‹è·Œã€‚</p>
<p>å‡ ä¸ªå½±å“ Page Cache çš„å› ç´ ï¼š</p>
<ol>
<li><strong>å†…å­˜å¤§å°</strong>ï¼šPage Cache = æ€»å†…å­˜ - JVM å † - OS ä¿ç•™ã€‚ä¸€èˆ¬ç•™ 70% ä»¥ä¸Šç»™ Page Cacheã€‚</li>
<li><strong>è¯»å†™æ¨¡å¼</strong>ï¼šé¡ºåºè¯»å†™çš„å‘½ä¸­ç‡è¿œé«˜äºéšæœºè¯»å†™ã€‚</li>
<li><strong>å…¶ä»–è¿›ç¨‹</strong>ï¼šåŒæœºå™¨çš„å…¶ä»–è¿›ç¨‹ï¼ˆå¦‚ Hadoopã€MySQLï¼‰ä¼šæŠ¢ Page Cacheã€‚</li>
</ol>
<p>æŸ¥çœ‹ Page Cache å‘½ä¸­ç‡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ Kafka è¿›ç¨‹çš„ Page Cache ä½¿ç”¨</span>
sudo pcstat /var/kafka-logs/topic-*/00000000000000000000.<span class="hljs-built_in">log</span>

<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹</span>
|-------------------------------------------+----------------+------------+-----------+---------|
| Name                                      | Size           | Pages      | Cached    | Percent |
|-------------------------------------------+----------------+------------+-----------+---------|
| 00000000000000000000.<span class="hljs-built_in">log</span>                  | 1073741824     | 262144     | 261000    | 99.56%  |
|-------------------------------------------+----------------+------------+-----------+---------|
</code></pre>
<p>å¦‚æœ Cached Percent &lt; 90%ï¼Œè¯´æ˜ Page Cache ä¸å¤Ÿï¼Œè€ƒè™‘åŠ å†…å­˜æˆ–å‡å°‘æ•°æ®ä¿ç•™æ—¶é—´ã€‚</p>
<h5 data-id="heading-4">Zero-Copyï¼ˆsendfile + mmapï¼‰</h5>
<p>Kafka åœ¨è¯»å–æ—¶ç”¨ sendfile ç³»ç»Ÿè°ƒç”¨ï¼Œé¿å…æ•°æ®åœ¨å†…æ ¸æ€/ç”¨æˆ·æ€ä¹‹é—´æ‹·è´ã€‚</p>
<p><strong>ä¼ ç»Ÿæ–¹å¼</strong>ï¼ˆ4 æ¬¡æ‹·è´ï¼‰ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ç£ç›˜ â†’ å†…æ ¸ç¼“å†²åŒºï¼ˆDMAï¼‰
<span class="hljs-bullet">2.</span> å†…æ ¸ç¼“å†²åŒº â†’ ç”¨æˆ·ç¼“å†²åŒºï¼ˆreadï¼‰
<span class="hljs-bullet">3.</span> ç”¨æˆ·ç¼“å†²åŒº â†’ Socket ç¼“å†²åŒºï¼ˆwriteï¼‰
<span class="hljs-bullet">4.</span> Socket ç¼“å†²åŒº â†’ ç½‘å¡ï¼ˆDMAï¼‰
</code></pre>
<p><strong>sendfile æ–¹å¼</strong>ï¼ˆ2 æ¬¡æ‹·è´ï¼‰ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ç£ç›˜ â†’ å†…æ ¸ç¼“å†²åŒºï¼ˆDMAï¼‰
<span class="hljs-bullet">2.</span> å†…æ ¸ç¼“å†²åŒº â†’ ç½‘å¡ï¼ˆsendfile + DMAï¼‰
</code></pre>
<p>æºç åœ¨ <code>FileRecords.java</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">writeTo</span><span class="hljs-params">(GatheringByteChannel channel, <span class="hljs-type">long</span> position, <span class="hljs-type">int</span> length)</span> {
    <span class="hljs-keyword">if</span> (channel <span class="hljs-keyword">instanceof</span> TransportLayer) {
        <span class="hljs-comment">// ä½¿ç”¨ sendfile</span>
        <span class="hljs-keyword">return</span> transferTo(position, length, channel);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å›é€€åˆ°æ™®é€šå†™å…¥</span>
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.writeTo(channel, position, length);
    }
}

<span class="hljs-keyword">private</span> <span class="hljs-type">long</span> <span class="hljs-title function_">transferTo</span><span class="hljs-params">(<span class="hljs-type">long</span> position, <span class="hljs-type">int</span> count, GatheringByteChannel target)</span> {
    <span class="hljs-keyword">return</span> fileChannel.transferTo(position, count, target);
}
</code></pre>
<p><code>transferTo()</code> åº•å±‚ä¼šè°ƒç”¨ Linux çš„ <code>sendfile64()</code> ç³»ç»Ÿè°ƒç”¨ã€‚</p>
<h5 data-id="heading-5">æ‰¹é‡å¤„ç†</h5>
<p>Kafka çš„æ‰¹é‡å¤„ç†è´¯ç©¿æ•´ä¸ªé“¾è·¯ï¼š</p>
<p><strong>Producer ç«¯</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// KafkaProducer.java</span>
<span class="hljs-keyword">private</span> Future&lt;RecordMetadata&gt; <span class="hljs-title function_">doSend</span><span class="hljs-params">(ProducerRecord&lt;K, V&gt; record, Callback callback)</span> {
    <span class="hljs-comment">// æ¶ˆæ¯å…ˆè¿› RecordAccumulator ç¼“å†²åŒº</span>
    RecordAccumulator.<span class="hljs-type">RecordAppendResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> accumulator.append(
        tp, timestamp, serializedKey, serializedValue, headers, 
        interceptCallback, remainingWaitMs, <span class="hljs-literal">true</span>);
    
    <span class="hljs-comment">// æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ä¹‹ä¸€å°±å‘é€ï¼š</span>
    <span class="hljs-comment">// 1. batch æ»¡äº†ï¼ˆbatch.sizeï¼Œé»˜è®¤ 16KBï¼‰</span>
    <span class="hljs-comment">// 2. ç­‰å¾…è¶…æ—¶ï¼ˆlinger.msï¼Œé»˜è®¤ 0ï¼‰</span>
    <span class="hljs-comment">// 3. ç¼“å†²åŒºæ»¡äº†ï¼ˆbuffer.memoryï¼Œé»˜è®¤ 32MBï¼‰</span>
    <span class="hljs-keyword">if</span> (result.batchIsFull || result.newBatchCreated) {
        sender.wakeup();
    }
}
</code></pre>
<p><strong>Consumer ç«¯</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Fetcher.java</span>
<span class="hljs-keyword">private</span> Map&lt;TopicPartition, List&lt;ConsumerRecord&lt;K, V&gt;&gt;&gt; <span class="hljs-title function_">fetchRecords</span><span class="hljs-params">(<span class="hljs-type">int</span> maxRecords)</span> {
    <span class="hljs-comment">// ä¸€æ¬¡æ‹‰å–å¤šä¸ª Partition çš„æ•°æ®</span>
    Map&lt;TopicPartition, FetchResponse.PartitionData&gt; fetchData = 
        fetchFromBroker(maxWaitMs, minBytes, maxBytes);
    
    <span class="hljs-comment">// æ‰¹é‡è§£æ</span>
    <span class="hljs-keyword">return</span> parseFetchedData(fetchData, maxRecords);
}
</code></pre>
<p><strong>Broker ç«¯</strong>ï¼š</p>
<p>Broker åœ¨å¤„ç† Produce/Fetch è¯·æ±‚æ—¶ä¹Ÿæ˜¯æ‰¹é‡çš„ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">// ReplicaManager.scala</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">appendRecords</span></span>(records: <span class="hljs-type">Map</span>[<span class="hljs-type">TopicPartition</span>, <span class="hljs-type">MemoryRecords</span>], 
                   requiredAcks: <span class="hljs-type">Int</span>): <span class="hljs-type">Map</span>[<span class="hljs-type">TopicPartition</span>, <span class="hljs-type">PartitionResponse</span>] = {
    <span class="hljs-comment">// æ‰¹é‡å†™å…¥å¤šä¸ª Partition</span>
    <span class="hljs-keyword">val</span> produceResults = records.map { <span class="hljs-keyword">case</span> (tp, records) =&gt;
      <span class="hljs-keyword">val</span> partition = getPartition(tp)
      partition.appendRecordsToLeader(records, requiredAcks)
    }
    
    produceResults.toMap
}
</code></pre>
<p><strong>è°ƒä¼˜å»ºè®®</strong>ï¼š</p>
<ul>
<li>Producerï¼š<code>linger.ms=10~50</code>ï¼Œè®© batch å°½é‡å¤§ï¼›ä½†ä¸è¦å¤ªå¤§ï¼Œå¦åˆ™å»¶è¿Ÿé«˜</li>
<li>Consumerï¼š<code>fetch.min.bytes=1MB</code>ï¼Œç­‰è¶³å¤Ÿæ•°æ®å†è¿”å›ï¼›<code>max.poll.records=500</code>ï¼Œå•æ¬¡æ‹‰å¤šæ¡</li>
<li>Brokerï¼š<code>num.io.threads</code> è¦å¤Ÿï¼Œå¦åˆ™æ‰¹é‡å†™å…¥ä¼šæ’é˜Ÿ</li>
</ul>
<h5 data-id="heading-6">å‹ç¼©</h5>
<p>Kafka æ”¯æŒå¤šç§å‹ç¼©ç®—æ³•ï¼šGzipã€Snappyã€LZ4ã€Zstdã€‚</p>
<p><strong>å‹ç¼©é“¾è·¯</strong>ï¼š</p>
<ol>
<li>Producer ç«¯å‹ç¼©ï¼ˆå‹ç¼©æ•´ä¸ª batchï¼‰</li>
<li>Broker ä¿æŒå‹ç¼©çŠ¶æ€å­˜å‚¨ï¼ˆèŠ‚çœç£ç›˜å’Œç½‘ç»œï¼‰</li>
<li>Consumer ç«¯è§£å‹</li>
</ol>
<p><strong>å‹ç¼©æ¯”å¯¹æ¯”</strong>ï¼ˆ1KB JSON æ¶ˆæ¯ï¼‰ï¼š</p>








































<table><thead><tr><th>ç®—æ³•</th><th>å‹ç¼©æ¯”</th><th>å‹ç¼©è€—æ—¶</th><th>è§£å‹è€—æ—¶</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Gzip</td><td>4:1</td><td>10ms</td><td>3ms</td><td>ç½‘ç»œå—é™</td></tr><tr><td>Snappy</td><td>2.5:1</td><td>2ms</td><td>1ms</td><td>CPU å—é™</td></tr><tr><td>LZ4</td><td>2.8:1</td><td>1.5ms</td><td>0.8ms</td><td>å¹³è¡¡</td></tr><tr><td>Zstd</td><td>3.5:1</td><td>5ms</td><td>2ms</td><td>ç£ç›˜å—é™</td></tr></tbody></table>
<p>å®æˆ˜ä¸­ï¼ŒLZ4 æ˜¯é¦–é€‰ï¼šå‹ç¼©æ¯”ä¸é”™ï¼Œé€Ÿåº¦å¿«ã€‚å¦‚æœç½‘ç»œæ˜¯ç“¶é¢ˆï¼ˆè·¨æœºæˆ¿ï¼‰ï¼Œå¯ä»¥ç”¨ Zstdã€‚</p>
<h4 data-id="heading-7">RocketMQ çš„æ€§èƒ½æŠ€å·§</h4>
<h5 data-id="heading-8">CommitLog ä¸€æŠŠæ¢­ + ConsumeQueue å¼‚æ­¥</h5>
<p>RocketMQ çš„å†™å…¥è·¯å¾„éå¸¸çŸ­ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">Producer â†’ Broker â†’ CommitLog â†’ è¿”å›æˆåŠŸ
<span class="hljs-code">                      â†“ å¼‚æ­¥
                  ConsumeQueue
</span></code></pre>
<p>æ‰€æœ‰ Topic çš„æ¶ˆæ¯éƒ½å†™åŒä¸€ä¸ª CommitLogï¼Œç£ç›˜ç£å¤´åªéœ€è¦åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸Šé¡ºåºç§»åŠ¨ï¼ŒIOPS åˆ©ç”¨ç‡æ‹‰æ»¡ã€‚</p>
<p><strong>æºç </strong>ï¼ˆå†™å…¥ CommitLogï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// CommitLog.java</span>
<span class="hljs-keyword">public</span> PutMessageResult <span class="hljs-title function_">putMessage</span><span class="hljs-params">(<span class="hljs-keyword">final</span> MessageExtBrokerInner msg)</span> {
    <span class="hljs-comment">// è·å–å½“å‰ MappedFile</span>
    <span class="hljs-type">MappedFile</span> <span class="hljs-variable">mappedFile</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.mappedFileQueue.getLastMappedFile();
    
    <span class="hljs-comment">// è¿½åŠ æ¶ˆæ¯</span>
    <span class="hljs-type">AppendMessageResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> mappedFile.appendMessage(msg, <span class="hljs-built_in">this</span>.appendMessageCallback);
    
    <span class="hljs-comment">// å¼‚æ­¥åˆ·ç›˜</span>
    <span class="hljs-keyword">if</span> (FlushDiskType.ASYNC_FLUSH == <span class="hljs-built_in">this</span>.defaultMessageStore.getMessageStoreConfig().getFlushDiskType()) {
        flushCommitLogService.wakeup();
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PutMessageResult</span>(PutMessageStatus.PUT_OK, result);
}
</code></pre>
<p><strong>å¼‚æ­¥æ„å»º ConsumeQueue</strong>ï¼š</p>
<p><code>ReputMessageService</code> çº¿ç¨‹ç›‘å¬ CommitLog çš„æ›´æ–°ï¼Œå¼‚æ­¥æ„å»ºå„ä¸ª Topic-Queue çš„ç´¢å¼•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ReputMessageService.javaï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ReputMessageService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ServiceThread</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-type">long</span> <span class="hljs-variable">reputFromOffset</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">while</span> (!<span class="hljs-built_in">this</span>.isStopped()) {
            <span class="hljs-comment">// ä» CommitLog è¯»å–æ–°æ¶ˆæ¯</span>
            <span class="hljs-type">SelectMappedBufferResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> 
                DefaultMessageStore.<span class="hljs-built_in">this</span>.commitLog.getData(reputFromOffset);
            
            <span class="hljs-keyword">if</span> (result != <span class="hljs-literal">null</span>) {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-comment">// è§£ææ¶ˆæ¯</span>
                    <span class="hljs-type">DispatchRequest</span> <span class="hljs-variable">dispatchRequest</span> <span class="hljs-operator">=</span> 
                        DefaultMessageStore.<span class="hljs-built_in">this</span>.commitLog.checkMessageAndReturnSize(result.getByteBuffer(), ...);
                    
                    <span class="hljs-comment">// åˆ†å‘åˆ°å„ä¸ª ConsumeQueue</span>
                    DefaultMessageStore.<span class="hljs-built_in">this</span>.doDispatch(dispatchRequest);
                    
                    <span class="hljs-comment">// æ›´æ–°åç§»é‡</span>
                    reputFromOffset += dispatchRequest.getMsgSize();
                } <span class="hljs-keyword">finally</span> {
                    result.release();
                }
            }
        }
    }
}
</code></pre>
<p>è¿™ä¸ªçº¿ç¨‹æ˜¯å•çº¿ç¨‹çš„ï¼ŒæŒ‰é¡ºåºæ„å»ºç´¢å¼•ã€‚å¦‚æœ CommitLog å†™å…¥è¿‡å¿«ï¼ŒConsumeQueue æ„å»ºå¯èƒ½æ»åã€‚ç›‘æ§æŒ‡æ ‡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹ reput å»¶è¿Ÿ</span>
grep <span class="hljs-string">"reput"</span> /data/rocketmq/logs/rocketmqlogs/store.log | <span class="hljs-built_in">tail</span> -20

<span class="hljs-comment"># æ­£å¸¸æƒ…å†µä¸‹å»¶è¿Ÿ &lt; 1ms</span>
<span class="hljs-comment"># å¦‚æœå»¶è¿Ÿ &gt; 10msï¼Œè¯´æ˜ reput çº¿ç¨‹è·Ÿä¸ä¸Šï¼Œéœ€è¦ä¼˜åŒ–ç£ç›˜æˆ– CPU</span>
</code></pre>
<h5 data-id="heading-9">TransientStorePoolï¼šå †å¤–å†…å­˜åŠ é€Ÿ</h5>
<p>TransientStorePool æ˜¯ RocketMQ 4.5+ å¼•å…¥çš„ç‰¹æ€§ï¼ŒæŠŠå†™å…¥ç¼“å†²æ”¾åˆ°å †å¤–å†…å­˜ï¼ˆDirectBufferï¼‰ï¼Œé¿å¼€ GCã€‚</p>
<p><strong>å·¥ä½œåŸç†</strong>ï¼š</p>
<pre><code class="hljs">æ¶ˆæ¯ â†’ DirectBufferï¼ˆå †å¤–ï¼‰ â†’ MappedFileï¼ˆmmapï¼‰ â†’ ç£ç›˜
</code></pre>
<p>ä¸å¼€å¯æ—¶ï¼š</p>
<pre><code class="hljs">æ¶ˆæ¯ â†’ MappedFileï¼ˆmmapï¼‰ â†’ ç£ç›˜
</code></pre>
<p>ç›´æ¥å†™ MappedFile ä¼šè§¦å‘ page faultï¼Œå †å¤–ç¼“å†²èƒ½å‡å°‘ fault æ¬¡æ•°ã€‚</p>
<p><strong>æºç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// TransientStorePool.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransientStorePool</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> poolSize;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> fileSize;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Deque&lt;ByteBuffer&gt; availableBuffers;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">init</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; poolSize; i++) {
            <span class="hljs-comment">// åˆ†é… DirectBuffer</span>
            <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">buffer</span> <span class="hljs-operator">=</span> ByteBuffer.allocateDirect(fileSize);
            availableBuffers.offer(buffer);
        }
    }
    
    <span class="hljs-keyword">public</span> ByteBuffer <span class="hljs-title function_">borrowBuffer</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> availableBuffers.poll();
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">returnBuffer</span><span class="hljs-params">(ByteBuffer buffer)</span> {
        buffer.clear();
        availableBuffers.offer(buffer);
    }
}
</code></pre>
<p><strong>é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># å¼€å¯å †å¤–å†…å­˜æ± 
transientStorePoolEnable=true

# æ± å¤§å°ï¼ˆå•ä½ï¼šä¸ªï¼‰
transientStorePoolSize=5
</code></pre>
<p>æ¯ä¸ª Buffer çš„å¤§å° = <code>mapedFileSizeCommitLog</code>ï¼ˆé»˜è®¤ 1GBï¼‰ï¼Œæ‰€ä»¥ <code>poolSize=5</code> æ„å‘³ç€å ç”¨ 5GB å †å¤–å†…å­˜ã€‚</p>
<p><strong>æ€§èƒ½æå‡</strong>ï¼š</p>
<p>æŸå‹æµ‹ï¼ˆ1KB æ¶ˆæ¯ï¼Œ100 Topicï¼‰ï¼š</p>























<table><thead><tr><th>é…ç½®</th><th>TPS</th><th>P99 å»¶è¿Ÿ</th><th>GC æ—¶é—´</th></tr></thead><tbody><tr><td>ä¸å¼€å¯ TransientStorePool</td><td>120 ä¸‡</td><td>1.2ms</td><td>200ms/min</td></tr><tr><td>å¼€å¯ TransientStorePool</td><td>160 ä¸‡</td><td>0.8ms</td><td>50ms/min</td></tr></tbody></table>
<p>TPS æå‡ 30%ï¼ŒGC æ—¶é—´é™ä½ 75%ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li>å †å¤–å†…å­˜ä¸å— JVM ç®¡ç†ï¼Œæ³„æ¼äº†å¾ˆéš¾æ’æŸ¥ã€‚éœ€è¦ç›‘æ§ <code>direct buffer</code> ä½¿ç”¨é‡ã€‚</li>
<li>å¦‚æœå¼€å¯äº† <code>transientStorePoolEnable</code> ä½†å¿˜äº†å¼€ <code>flushCommitLogAsync</code>ï¼Œä¼šå‡ºç°å†™å…¥å¡é¡¿ï¼ˆå› ä¸ºåŒæ­¥åˆ·ç›˜ä¸ä¼šä½¿ç”¨ transient bufferï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10">4.2 ç½‘ç»œå±‚ä¼˜åŒ–</h3>
<p>ç½‘ç»œæ˜¯"ååçš„å¤©èŠ±æ¿ï¼Œå»¶è¿Ÿçš„åœ°æ¿"ã€‚Kafka å’Œ RocketMQ éƒ½ç”¨äº† Reactor æ¨¡å‹ï¼Œä½†å®ç°ç»†èŠ‚ä¸åŒã€‚</p>
<h4 data-id="heading-11">Kafka çš„ç½‘ç»œæ¶æ„</h4>
<p>Kafka è‡ªå·±å®ç°äº†ä¸€å¥— NIO æ¡†æ¶ï¼Œåˆ†ä¸ºä¸‰å±‚ï¼š</p>
<ol>
<li><strong>Acceptor</strong>ï¼šæ¥å—æ–°è¿æ¥ï¼Œå•çº¿ç¨‹</li>
<li><strong>Processor</strong>ï¼šè¯»å†™ socketï¼Œå¤šçº¿ç¨‹ï¼ˆ<code>num.network.threads</code>ï¼‰</li>
<li><strong>RequestHandler</strong>ï¼šå¤„ç†è¯·æ±‚é€»è¾‘ï¼Œå¤šçº¿ç¨‹ï¼ˆ<code>num.io.threads</code>ï¼‰</li>
</ol>
<p><strong>æºç </strong>ï¼ˆ<code>SocketServer.scala</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SocketServer</span> </span>{
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> acceptors = <span class="hljs-keyword">new</span> mutable.<span class="hljs-type">HashMap</span>[<span class="hljs-type">EndPoint</span>, <span class="hljs-type">Acceptor</span>]
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> processors = <span class="hljs-keyword">new</span> <span class="hljs-type">Array</span>[<span class="hljs-type">Processor</span>](numProcessorThreads)
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> requestChannel = <span class="hljs-keyword">new</span> <span class="hljs-type">RequestChannel</span>(queueSize)
  
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">startup</span></span>(): <span class="hljs-type">Unit</span> = {
    <span class="hljs-comment">// å¯åŠ¨ Processor çº¿ç¨‹</span>
    <span class="hljs-keyword">for</span> (i &lt;- <span class="hljs-number">0</span> until numProcessorThreads) {
      processors(i) = <span class="hljs-keyword">new</span> <span class="hljs-type">Processor</span>(i, requestChannel, ...)
      <span class="hljs-type">Utils</span>.newThread(<span class="hljs-string">s"kafka-network-thread-<span class="hljs-subst">$i</span>"</span>, processors(i)).start()
    }
    
    <span class="hljs-comment">// å¯åŠ¨ Acceptor</span>
    acceptors.foreach { <span class="hljs-keyword">case</span> (endpoint, acceptor) =&gt;
      <span class="hljs-type">Utils</span>.newThread(<span class="hljs-string">s"kafka-socket-acceptor-<span class="hljs-subst">$endpoint</span>"</span>, acceptor).start()
    }
  }
}
</code></pre>
<p><strong>Processor çº¿ç¨‹çš„å·¥ä½œ</strong>ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Processor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Runnable</span> </span>{
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> newConnections = <span class="hljs-keyword">new</span> <span class="hljs-type">ConcurrentLinkedQueue</span>[<span class="hljs-type">SocketChannel</span>]()
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> selector = <span class="hljs-keyword">new</span> <span class="hljs-type">KafkaSelector</span>(...)
  
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(): <span class="hljs-type">Unit</span> = {
    <span class="hljs-keyword">while</span> (isRunning) {
      <span class="hljs-comment">// 1. æ¥å—æ–°è¿æ¥ï¼ˆç”± Acceptor åˆ†å‘è¿‡æ¥ï¼‰</span>
      configureNewConnections()
      
      <span class="hljs-comment">// 2. å¤„ç†è¯»å†™äº‹ä»¶</span>
      selector.poll(<span class="hljs-number">300</span>)
      
      <span class="hljs-comment">// 3. æŠŠå®Œæ•´çš„è¯·æ±‚æ”¾åˆ° RequestChannel</span>
      processCompletedReceives()
      
      <span class="hljs-comment">// 4. æŠŠå“åº”å†™å…¥ socket</span>
      processCompletedSends()
    }
  }
}
</code></pre>
<p><strong>RequestHandler çº¿ç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">KafkaRequestHandler</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Runnable</span> </span>{
  <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span></span>(): <span class="hljs-type">Unit</span> = {
    <span class="hljs-keyword">while</span> (!stopped) {
      <span class="hljs-comment">// ä» RequestChannel å–è¯·æ±‚</span>
      <span class="hljs-keyword">val</span> req = requestChannel.receiveRequest(<span class="hljs-number">300</span>)
      
      <span class="hljs-comment">// è°ƒç”¨ KafkaApis å¤„ç†</span>
      apis.handle(req)
    }
  }
}
</code></pre>
<p><strong>è°ƒä¼˜è¦ç‚¹</strong>ï¼š</p>
<ol>
<li>
<p><strong>num.network.threads</strong>ï¼š</p>
<ul>
<li>é»˜è®¤ 3ï¼Œä¸€èˆ¬è®¾ç½®ä¸ºç½‘å¡é˜Ÿåˆ—æ•°ï¼ˆ4~8ï¼‰</li>
<li>å¦‚æœ socket è¯»å†™æ…¢ï¼ŒCPU åˆ©ç”¨ç‡ä½ï¼Œå¯ä»¥åŠ åˆ° 16</li>
</ul>
</li>
<li>
<p><strong>num.io.threads</strong>ï¼š</p>
<ul>
<li>é»˜è®¤ 8ï¼Œå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼ˆProduce/Fetchï¼‰</li>
<li>å¯ä»¥æ ¹æ® CPU æ ¸æ•°è°ƒæ•´ï¼ˆå»ºè®® CPU æ ¸æ•°çš„ 0.5~1 å€ï¼‰</li>
</ul>
</li>
<li>
<p><strong>queued.max.requests</strong>ï¼š</p>
<ul>
<li>RequestChannel çš„é˜Ÿåˆ—é•¿åº¦ï¼Œé»˜è®¤ 500</li>
<li>å¦‚æœé˜Ÿåˆ—ç»å¸¸æ»¡ï¼Œè¯´æ˜ IO çº¿ç¨‹å¤„ç†ä¸è¿‡æ¥ï¼Œéœ€è¦åŠ  <code>num.io.threads</code></li>
</ul>
</li>
<li>
<p><strong>socket.send.buffer.bytes / socket.receive.buffer.bytes</strong>ï¼š</p>
<ul>
<li>é»˜è®¤ 100KBï¼Œè·¨æœºæˆ¿åœºæ™¯å»ºè®®è°ƒå¤§åˆ° 1MB+</li>
</ul>
</li>
</ol>
<p>æŸ¥çœ‹é˜Ÿåˆ—æ·±åº¦ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># JMX æŒ‡æ ‡</span>
kafka.network:<span class="hljs-built_in">type</span>=RequestChannel,name=RequestQueueSize

<span class="hljs-comment"># å¦‚æœå€¼ &gt; 100ï¼Œè¯´æ˜è¯·æ±‚ç§¯å‹</span>
</code></pre>
<h4 data-id="heading-12">RocketMQ çš„ç½‘ç»œæ¶æ„</h4>
<p>RocketMQ ç›´æ¥ç”¨ Nettyï¼Œçœå»äº†è‡ªå·±ç»´æŠ¤ NIO çš„éº»çƒ¦ã€‚</p>
<p><strong>æ¶æ„</strong>ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-built_in">Client</span> â†’ Netty EventLoop â†’ RequestTask â†’ ExecutorService â†’ Processor
</code></pre>
<p><strong>æºç </strong>ï¼ˆ<code>NettyRemotingServer.java</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NettyRemotingServer</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> EventLoopGroup eventLoopGroupBoss;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> EventLoopGroup eventLoopGroupSelector;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">start</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// Boss çº¿ç¨‹å¤„ç†è¿æ¥</span>
        <span class="hljs-built_in">this</span>.eventLoopGroupBoss = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NioEventLoopGroup</span>(<span class="hljs-number">1</span>, 
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadFactoryImpl</span>(<span class="hljs-string">"NettyBoss_"</span>));
        
        <span class="hljs-comment">// Worker çº¿ç¨‹å¤„ç† IO</span>
        <span class="hljs-built_in">this</span>.eventLoopGroupSelector = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NioEventLoopGroup</span>(
            nettyServerConfig.getServerSelectorThreads(),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadFactoryImpl</span>(<span class="hljs-string">"NettyServerNIOSelector_"</span>));
        
        <span class="hljs-type">ServerBootstrap</span> <span class="hljs-variable">bootstrap</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServerBootstrap</span>();
        bootstrap.group(<span class="hljs-built_in">this</span>.eventLoopGroupBoss, <span class="hljs-built_in">this</span>.eventLoopGroupSelector)
            .channel(NioServerSocketChannel.class)
            .childHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ChannelInitializer</span>&lt;SocketChannel&gt;() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initChannel</span><span class="hljs-params">(SocketChannel ch)</span> {
                    ch.pipeline()
                        .addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">NettyEncoder</span>())
                        .addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">NettyDecoder</span>())
                        .addLast(<span class="hljs-keyword">new</span> <span class="hljs-title class_">NettyServerHandler</span>());  <span class="hljs-comment">// å¤„ç†è¯·æ±‚</span>
                }
            });
        
        <span class="hljs-type">ChannelFuture</span> <span class="hljs-variable">sync</span> <span class="hljs-operator">=</span> bootstrap.bind(port).sync();
    }
}
</code></pre>
<p><strong>è¯·æ±‚å¤„ç†</strong>ï¼š</p>
<p>Netty æ¥æ”¶åˆ°å®Œæ•´è¯·æ±‚åï¼Œä¼šä¸¢åˆ°çº¿ç¨‹æ± å¤„ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// NettyServerHandler.java</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">channelRead0</span><span class="hljs-params">(ChannelHandlerContext ctx, RemotingCommand msg)</span> {
    <span class="hljs-comment">// æ ¹æ®è¯·æ±‚ç±»å‹é€‰æ‹©çº¿ç¨‹æ± </span>
    <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> getExecutorService(msg.getCode());
    
    <span class="hljs-keyword">if</span> (executor == <span class="hljs-literal">null</span>) {
        executor = <span class="hljs-built_in">this</span>.defaultExecutor;  <span class="hljs-comment">// é»˜è®¤çº¿ç¨‹æ± </span>
    }
    
    <span class="hljs-comment">// æäº¤ä»»åŠ¡</span>
    executor.submit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">RequestTask</span>(ctx, msg));
}
</code></pre>
<p><strong>çº¿ç¨‹æ± åˆ†ç±»</strong>ï¼š</p>
<ul>
<li><code>sendMessageExecutor</code>ï¼šå¤„ç† SEND_MESSAGE è¯·æ±‚</li>
<li><code>pullMessageExecutor</code>ï¼šå¤„ç† PULL_MESSAGE è¯·æ±‚</li>
<li><code>queryMessageExecutor</code>ï¼šå¤„ç†æŸ¥è¯¢è¯·æ±‚</li>
<li><code>adminBrokerExecutor</code>ï¼šå¤„ç†ç®¡ç†å‘½ä»¤</li>
</ul>
<p><strong>è°ƒä¼˜è¦ç‚¹</strong>ï¼š</p>
<ol>
<li>
<p><strong>serverSelectorThreads</strong>ï¼š</p>
<ul>
<li>Netty EventLoop çº¿ç¨‹æ•°ï¼Œé»˜è®¤ 3</li>
<li>å¯ä»¥è°ƒåˆ° CPU æ ¸æ•°çš„ 1~2 å€</li>
</ul>
</li>
<li>
<p><strong>sendMessageThreadPoolNums</strong>ï¼š</p>
<ul>
<li>å¤„ç†å†™å…¥çš„çº¿ç¨‹æ•°ï¼Œé»˜è®¤ 16</li>
<li>æ ¹æ® TPS è°ƒæ•´ï¼Œä¿æŒé˜Ÿåˆ—é•¿åº¦ &lt; 100</li>
</ul>
</li>
<li>
<p><strong>pullMessageThreadPoolNums</strong>ï¼š</p>
<ul>
<li>å¤„ç†æ‹‰å–çš„çº¿ç¨‹æ•°ï¼Œé»˜è®¤ 16</li>
<li>æ¶ˆè´¹é«˜å³°æ—¶å¯ä»¥è°ƒå¤§</li>
</ul>
</li>
</ol>
<p>æŸ¥çœ‹çº¿ç¨‹æ± çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é€šè¿‡ mqadmin æŸ¥çœ‹</span>
sh mqadmin clusterList -n localhost:9876

<span class="hljs-comment"># æŸ¥çœ‹çº¿ç¨‹æ± é˜Ÿåˆ—æ·±åº¦</span>
jstack &lt;pid&gt; | grep <span class="hljs-string">"sendMessageExecutor"</span>

<span class="hljs-comment"># å¦‚æœå¤§é‡çº¿ç¨‹ WAITINGï¼Œè¯´æ˜é˜Ÿåˆ—æ»¡äº†</span>
</code></pre>
<h4 data-id="heading-13">ç½‘ç»œè°ƒä¼˜å¯¹æ¯”</h4>





























<table><thead><tr><th>æŒ‡æ ‡</th><th>Kafka</th><th>RocketMQ</th><th>è°ƒä¼˜é‡ç‚¹</th></tr></thead><tbody><tr><td>å¹¶å‘è¿æ¥æ•°</td><td>1000+</td><td>5000+</td><td>RocketMQ ç”¨ Nettyï¼Œè¿æ¥æ•°æ›´é«˜</td></tr><tr><td>å•è¿æ¥åå</td><td>50MB/s</td><td>60MB/s</td><td>å·®è·ä¸å¤§</td></tr><tr><td>å»¶è¿ŸæŠ–åŠ¨</td><td>ä¾èµ– RequestChannel é˜Ÿåˆ—</td><td>ä¾èµ–çº¿ç¨‹æ± é˜Ÿåˆ—</td><td>éƒ½è¦ç›‘æ§é˜Ÿåˆ—æ·±åº¦</td></tr></tbody></table>
<p><strong>ç½‘ç»œå±‚çš„é€šç”¨ä¼˜åŒ–</strong>ï¼š</p>
<ol>
<li><strong>æ‰“å¼€ TCP_NODELAY</strong>ï¼šç¦ç”¨ Nagle ç®—æ³•ï¼Œé™ä½å»¶è¿Ÿ</li>
<li><strong>è°ƒå¤§ SO_SNDBUF / SO_RCVBUF</strong>ï¼šè·¨æœºæˆ¿åœºæ™¯ä¸‹ï¼Œæ ¹æ® BDPï¼ˆå¸¦å®½Ã—å»¶è¿Ÿï¼‰è®¡ç®—åˆé€‚çš„ç¼“å†²åŒºå¤§å°</li>
<li><strong>å¼€å¯ RPS/RFS</strong>ï¼šæŠŠç½‘ç»œä¸­æ–­ç»‘å®šåˆ°å¤šä¸ª CPU æ ¸ï¼Œé¿å…å•æ ¸æ‰“æ»¡</li>
</ol>
<hr/>
<h3 data-id="heading-14">4.3 ç£ç›˜ IO ä¼˜åŒ–</h3>
<p>ç£ç›˜æ˜¯æ€§èƒ½çš„"æœ€åä¸€é“å"ã€‚</p>
<h4 data-id="heading-15">Kafka çš„ç£ç›˜ç­–ç•¥</h4>
<p>Kafka ä¾èµ–é¡ºåºå†™ + Page Cacheï¼Œç£ç›˜é€‰å‹å’Œæ–‡ä»¶ç³»ç»Ÿé…ç½®ç›´æ¥å½±å“æ€§èƒ½ã€‚</p>
<p><strong>ç£ç›˜é€‰å‹</strong>ï¼š</p>

































<table><thead><tr><th>ç£ç›˜ç±»å‹</th><th>é¡ºåºå†™åå</th><th>éšæœº IOPS</th><th>ä»·æ ¼</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>HDDï¼ˆ7200 è½¬ï¼‰</td><td>100~150 MB/s</td><td>100~200</td><td>ä½</td><td>æˆæœ¬æ•æ„Ÿã€æ•°æ®é‡å¤§</td></tr><tr><td>SATA SSD</td><td>500~600 MB/s</td><td>5ä¸‡+</td><td>ä¸­</td><td>ä¸€èˆ¬åœºæ™¯</td></tr><tr><td>NVMe SSD</td><td>2000~3000 MB/s</td><td>50ä¸‡+</td><td>é«˜</td><td>é«˜æ€§èƒ½åœºæ™¯</td></tr></tbody></table>
<p>Kafka æ›´åƒ"é¡ºåºå†™åå"ï¼ŒSATA SSD å°±å¤Ÿç”¨ï¼›å¦‚æœé¢„ç®—è¶³ï¼ŒNVMe èƒ½æŠŠå»¶è¿Ÿå‹å¾—æ›´ä½ã€‚</p>
<p><strong>RAID é…ç½®</strong>ï¼š</p>
<ul>
<li><strong>RAID0</strong>ï¼šæ¡å¸¦åŒ–ï¼Œæ€§èƒ½æœ€é«˜ï¼Œä½†ä»»æ„ç£ç›˜æ•…éšœéƒ½ä¼šä¸¢æ•°æ®</li>
<li><strong>RAID10</strong>ï¼šé•œåƒ+æ¡å¸¦ï¼Œæ€§èƒ½å’Œå¯é æ€§å…¼é¡¾ï¼Œæ¨è</li>
<li><strong>RAID5/6</strong>ï¼šæ ¡éªŒå†—ä½™ï¼Œå†™å…¥æ€§èƒ½å·®ï¼Œä¸æ¨è</li>
</ul>
<p>Kafka é€šå¸¸é… RAID10ï¼Œå†ç»“åˆå‰¯æœ¬æœºåˆ¶åšå®¹ç¾ã€‚</p>
<p><strong>æ–‡ä»¶ç³»ç»Ÿ</strong>ï¼š</p>
<ul>
<li><strong>XFS</strong>ï¼šæ¨èï¼Œå¤§æ–‡ä»¶æ€§èƒ½å¥½ï¼Œæ”¯æŒå¹¶å‘å†™å…¥</li>
<li><strong>EXT4</strong>ï¼šä¹Ÿå¯ä»¥ï¼Œä½†è¦è°ƒæ•´å‚æ•°</li>
<li><strong>ZFS/Btrfs</strong>ï¼šåŠŸèƒ½ä¸°å¯Œä½†æ€§èƒ½å¼€é”€å¤§ï¼Œä¸æ¨è</li>
</ul>
<p>XFS è°ƒä¼˜ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŒ‚è½½é€‰é¡¹</span>
mount -o noatime,nodiratime,nobarrier /dev/sda1 /var/kafka-logs

<span class="hljs-comment"># å…³é—­ atime å‡å°‘å†™å…¥</span>
<span class="hljs-comment"># å…³é—­ barrier æå‡æ€§èƒ½ï¼ˆéœ€è¦ UPS æˆ–å‰¯æœ¬ä¿éšœï¼‰</span>
</code></pre>
<p><strong>Page Cache å›æ”¶ç­–ç•¥</strong>ï¼š</p>
<p>è°ƒæ•´å†…æ ¸å‚æ•°ï¼Œå‡å°‘ Page Cache è¢«å›æ”¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># /etc/sysctl.conf</span>
vm.dirty_ratio=80              <span class="hljs-comment"># è„é¡µè¾¾åˆ° 80% æ‰å¼ºåˆ¶åˆ·ç›˜</span>
vm.dirty_background_ratio=5    <span class="hljs-comment"># åå°åˆ·ç›˜é˜ˆå€¼</span>
vm.swappiness=1                <span class="hljs-comment"># å°½é‡ä¸ç”¨ swap</span>
</code></pre>
<h4 data-id="heading-16">RocketMQ çš„ç£ç›˜ç­–ç•¥</h4>
<p>RocketMQ çš„ç£ç›˜ç”¨æ³•å’Œ Kafka ç±»ä¼¼ï¼Œä½†å¤šäº†"æ–‡ä»¶é¢„çƒ­"å’Œ"é¢„åˆ†é…"ã€‚</p>
<p><strong>æ–‡ä»¶é¢„åˆ†é…</strong>ï¼š</p>
<p>CommitLog æ–‡ä»¶åœ¨ä½¿ç”¨å‰ä¼šé¢„åˆ›å»ºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// MappedFileQueue.java</span>
<span class="hljs-keyword">public</span> MappedFile <span class="hljs-title function_">getLastMappedFile</span><span class="hljs-params">(<span class="hljs-keyword">final</span> <span class="hljs-type">long</span> startOffset, <span class="hljs-type">boolean</span> needCreate)</span> {
    <span class="hljs-type">MappedFile</span> <span class="hljs-variable">mappedFileLast</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.mappedFiles.get(<span class="hljs-built_in">this</span>.mappedFiles.size() - <span class="hljs-number">1</span>);
    
    <span class="hljs-keyword">if</span> (mappedFileLast.isFull()) {
        <span class="hljs-comment">// æ–‡ä»¶æ»¡äº†ï¼Œåˆ›å»ºä¸‹ä¸€ä¸ª</span>
        <span class="hljs-type">MappedFile</span> <span class="hljs-variable">newFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MappedFile</span>(
            nextFilePath, 
            <span class="hljs-built_in">this</span>.mappedFileSize,
            <span class="hljs-built_in">this</span>.transientStorePool);
        
        <span class="hljs-built_in">this</span>.mappedFiles.add(newFile);
        <span class="hljs-keyword">return</span> newFile;
    }
    
    <span class="hljs-keyword">return</span> mappedFileLast;
}
</code></pre>
<p>é¢„åˆ†é…çš„å¥½å¤„ï¼š</p>
<ul>
<li>é¿å…å†™å…¥æ—¶ä¸´æ—¶åˆ›å»ºæ–‡ä»¶ï¼Œå‡å°‘å¡é¡¿</li>
<li>æå‰å ç”¨ç£ç›˜ç©ºé—´ï¼Œé˜²æ­¢ç¢ç‰‡åŒ–</li>
</ul>
<p><strong>æ–‡ä»¶é¢„çƒ­ï¼ˆwarmMappedFileEnableï¼‰</strong>ï¼š</p>
<p>æ–‡ä»¶åˆ›å»ºåï¼Œå¯ä»¥"é¢„çƒ­"åˆ°å†…å­˜ï¼Œå‡å°‘åç»­çš„ page faultï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// MappedFile.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">warmMappedFile</span><span class="hljs-params">(FlushDiskType type, <span class="hljs-type">int</span> pages)</span> {
    <span class="hljs-type">ByteBuffer</span> <span class="hljs-variable">byteBuffer</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.mappedByteBuffer.slice();
    
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; pages; i++) {
        <span class="hljs-comment">// æ¯éš” 4KB å†™ä¸€ä¸ªå­—èŠ‚ï¼Œè§¦å‘ page fault</span>
        byteBuffer.put(i * <span class="hljs-number">4096</span>, (<span class="hljs-type">byte</span>) <span class="hljs-number">0</span>);
    }
    
    <span class="hljs-keyword">if</span> (type == FlushDiskType.SYNC_FLUSH) {
        <span class="hljs-comment">// åŒæ­¥åˆ·ç›˜æ¨¡å¼ä¸‹ï¼Œè¿˜è¦ mlockï¼Œé”å®šå†…å­˜é¡µ</span>
        LibC.INSTANCE.mlock(address, fileSize);
    }
}
</code></pre>
<p><strong>é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># å¼€å¯æ–‡ä»¶é¢„çƒ­
warmMapedFileEnable=true

# é¢„çƒ­é¡µæ•°ï¼ˆ-1 è¡¨ç¤ºå…¨éƒ¨ï¼‰
mapedFileSizeCommitLog=1073741824  # 1GB
</code></pre>
<p>é¢„çƒ­ä¼šå ç”¨ CPU å’Œå†…å­˜ï¼Œä½†èƒ½æ¢æ¥æ›´ç¨³å®šçš„å»¶è¿Ÿï¼ˆP999 ä» 10ms é™åˆ° 2msï¼‰ã€‚</p>
<p><strong>ç£ç›˜ IO è°ƒåº¦å™¨</strong>ï¼š</p>
<p>Linux çš„ IO è°ƒåº¦å™¨ä¼šå½±å“æ€§èƒ½ï¼š</p>
<ul>
<li><strong>CFQ</strong>ï¼ˆå®Œå…¨å…¬å¹³ï¼‰ï¼šé»˜è®¤ï¼Œä½†ä¼šå¯¼è‡´å»¶è¿Ÿä¸ç¨³å®š</li>
<li><strong>Deadline</strong>ï¼šä¼˜å…ˆå¤„ç†è¯»è¯·æ±‚ï¼Œå»¶è¿Ÿæ›´ç¨³å®š</li>
<li><strong>Noop</strong>ï¼šä¸æ’é˜Ÿï¼Œé€‚åˆ SSD</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹å½“å‰è°ƒåº¦å™¨</span>
<span class="hljs-built_in">cat</span> /sys/block/sda/queue/scheduler

<span class="hljs-comment"># æ”¹ä¸º deadline</span>
<span class="hljs-built_in">echo</span> deadline &gt; /sys/block/sda/queue/scheduler

<span class="hljs-comment"># æˆ–è€…æ”¹ä¸º noopï¼ˆSSDï¼‰</span>
<span class="hljs-built_in">echo</span> noop &gt; /sys/block/sda/queue/scheduler
</code></pre>
<p>RocketMQ å®˜æ–¹å»ºè®®ç”¨ Deadline æˆ– Noopã€‚</p>
<hr/>
<h3 data-id="heading-17">4.4 å†…å­˜ç®¡ç†ä¼˜åŒ–</h3>
<p>å†…å­˜åˆ†é…ç­–ç•¥å†³å®šäº† GC è¡Œä¸ºï¼ŒGC åœé¡¿ä¼šç›´æ¥å½±å“å»¶è¿Ÿã€‚</p>
<h4 data-id="heading-18">Kafka çš„å†…å­˜åˆ†é…</h4>
<p>Kafka Broker çš„å†…å­˜ä¸»è¦åˆ†ä¸¤å—ï¼š</p>
<ol>
<li><strong>JVM å †</strong>ï¼š6~8GBï¼Œå­˜å‚¨å…ƒæ•°æ®ã€è¯·æ±‚å¯¹è±¡ã€Log Cleaner çš„ç¼“å†²ç­‰</li>
<li><strong>Page Cache</strong>ï¼šå‰©ä½™æ‰€æœ‰å†…å­˜ï¼Œå­˜å‚¨æ¶ˆæ¯æ•°æ®</li>
</ol>
<p><strong>JVM å‚æ•°</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">export</span> KAFKA_HEAP_OPTS=<span class="hljs-string">"-Xms6g -Xmx6g"</span>
<span class="hljs-built_in">export</span> KAFKA_JVM_PERFORMANCE_OPTS=<span class="hljs-string">"-XX:+UseG1GC -XX:MaxGCPauseMillis=20 -XX:InitiatingHeapOccupancyPercent=35"</span>
</code></pre>
<p><strong>G1 GC é…ç½®</strong>ï¼š</p>
<ul>
<li><code>MaxGCPauseMillis=20</code>ï¼šæœŸæœ›çš„æœ€å¤§åœé¡¿æ—¶é—´ï¼ŒG1 ä¼šå°½é‡æ§åˆ¶</li>
<li><code>InitiatingHeapOccupancyPercent=35</code>ï¼šå †å ç”¨ 35% å°±å¼€å§‹å¹¶å‘æ ‡è®°ï¼Œé¿å… Full GC</li>
</ul>
<p><strong>GC æ—¥å¿—åˆ†æ</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¼€å¯ GC æ—¥å¿—</span>
-Xlog:gc*:file=/var/log/kafka/gc.log:time,<span class="hljs-built_in">uptime</span>,level,tags

<span class="hljs-comment"># åˆ†æ GC</span>
grep <span class="hljs-string">"Pause Young"</span> gc.log | awk <span class="hljs-string">'{print $NF}'</span> | <span class="hljs-built_in">sort</span> -n | <span class="hljs-built_in">tail</span> -20

<span class="hljs-comment"># å¦‚æœ P99 &gt; 50msï¼Œéœ€è¦ä¼˜åŒ–</span>
</code></pre>
<p>å¸¸è§é—®é¢˜ï¼š</p>
<ul>
<li><strong>é¢‘ç¹ Young GC</strong>ï¼šå¯¹è±¡åˆ›å»ºè¿‡å¤šï¼Œè€ƒè™‘å¯¹è±¡æ± æˆ–å‡å°å †</li>
<li><strong>Full GC</strong>ï¼šè€å¹´ä»£æ»¡äº†ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰å†…å­˜æ³„æ¼</li>
</ul>
<h4 data-id="heading-19">RocketMQ çš„å†…å­˜åˆ†é…</h4>
<p>RocketMQ çš„å†…å­˜åˆ†ä¸‰å—ï¼š</p>
<ol>
<li><strong>JVM å †</strong>ï¼š8~16GBï¼Œå­˜å‚¨æ¶ˆæ¯å¯¹è±¡ã€ç´¢å¼•ç­‰</li>
<li><strong>å †å¤–å†…å­˜</strong>ï¼šTransientStorePoolã€MappedFile</li>
<li><strong>Page Cache</strong>ï¼šå‰©ä½™å†…å­˜</li>
</ol>
<p><strong>JVM å‚æ•°</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">JAVA_OPT=<span class="hljs-string">"<span class="hljs-variable">${JAVA_OPT}</span> -server -Xms8g -Xmx8g -Xmn4g"</span>
JAVA_OPT=<span class="hljs-string">"<span class="hljs-variable">${JAVA_OPT}</span> -XX:+UseG1GC -XX:MaxGCPauseMillis=50"</span>
JAVA_OPT=<span class="hljs-string">"<span class="hljs-variable">${JAVA_OPT}</span> -XX:+DisableExplicitGC"</span>  <span class="hljs-comment"># ç¦ç”¨ System.gc()</span>
</code></pre>
<p><strong>å †å¤–å†…å­˜ç›‘æ§</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŸ¥çœ‹ DirectBuffer ä½¿ç”¨</span>
<span class="hljs-type">long</span> <span class="hljs-variable">directMemory</span> <span class="hljs-operator">=</span> sun.misc.SharedSecrets.getJavaNioAccess()
    .getDirectBufferPool()
    .getMemoryUsed();

log.info(<span class="hljs-string">"Direct memory used: {}MB"</span>, directMemory / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>);
</code></pre>
<p>å¦‚æœ DirectBuffer æŒç»­å¢é•¿ä¸é‡Šæ”¾ï¼Œè¯´æ˜æœ‰æ³„æ¼ã€‚å¸¸è§åŸå› ï¼š</p>
<ul>
<li>MappedFile æ²¡æœ‰æ­£ç¡® unmap</li>
<li>TransientStorePool çš„ buffer æ²¡æœ‰å½’è¿˜</li>
</ul>
<hr/>
<h3 data-id="heading-20">4.5 çº¿ç¨‹æ¨¡å‹ä¼˜åŒ–</h3>
<p>çº¿ç¨‹æ¨¡å‹æ˜¯æ€§èƒ½è°ƒä¼˜çš„"æœ€åä¸€å…¬é‡Œ"ã€‚</p>
<h4 data-id="heading-21">Kafka çš„çº¿ç¨‹æ± </h4>
<p>Kafka çš„çº¿ç¨‹æ± æ¯”è¾ƒç®€å•ï¼Œä¸»è¦æ˜¯ Networkã€IOã€Log Cleaner ä¸‰ç±»ã€‚</p>
<p><strong>ç›‘æ§çº¿ç¨‹æ± </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é€šè¿‡ JMX æŸ¥çœ‹</span>
kafka.server:type=KafkaRequestHandlerPool,name=RequestHandlerAvgIdlePercent

<span class="hljs-comment">// å¦‚æœ IdlePercent &lt; 20%ï¼Œè¯´æ˜ IO çº¿ç¨‹å¿™ä¸è¿‡æ¥</span>
</code></pre>
<p><strong>å¸¸è§ç“¶é¢ˆ</strong>ï¼š</p>
<ol>
<li>
<p><strong>IO çº¿ç¨‹æ‰“æ»¡</strong>ï¼š</p>
<ul>
<li>è¡¨ç°ï¼šRequestChannel é˜Ÿåˆ—æ·±åº¦ &gt; 100ï¼ŒCPU æ‰“æ»¡</li>
<li>è§£å†³ï¼šå¢åŠ  <code>num.io.threads</code></li>
</ul>
</li>
<li>
<p><strong>Network çº¿ç¨‹æ…¢</strong>ï¼š</p>
<ul>
<li>è¡¨ç°ï¼šsocket buffer æ»¡ï¼Œclients æŠ¥ timeout</li>
<li>è§£å†³ï¼šå¢åŠ  <code>num.network.threads</code>ï¼Œæˆ–ä¼˜åŒ–ç½‘ç»œç¡¬ä»¶</li>
</ul>
</li>
<li>
<p><strong>Log Cleaner æ‹–æ…¢</strong>ï¼š</p>
<ul>
<li>è¡¨ç°ï¼šcompaction è·Ÿä¸ä¸Šï¼ŒSegment è¶Šæ¥è¶Šå¤š</li>
<li>è§£å†³ï¼šå¢åŠ  <code>log.cleaner.threads</code>ï¼Œæˆ–è°ƒæ•´ <code>min.cleanable.dirty.ratio</code></li>
</ul>
</li>
</ol>
<h4 data-id="heading-22">RocketMQ çš„çº¿ç¨‹æ± </h4>
<p>RocketMQ çš„çº¿ç¨‹æ± æ›´ç»†åŒ–ï¼Œæ¯ç§è¯·æ±‚éƒ½æœ‰ç‹¬ç«‹çš„çº¿ç¨‹æ± ã€‚</p>
<p><strong>çº¿ç¨‹æ± é…ç½®</strong>ï¼š</p>
<pre><code class="hljs language-properties" lang="properties"># å†™å…¥çº¿ç¨‹æ± 
sendMessageThreadPoolNums=16

# æ‹‰å–çº¿ç¨‹æ± 
pullMessageThreadPoolNums=16

# æŸ¥è¯¢çº¿ç¨‹æ± 
queryMessageThreadPoolNums=8

# ç®¡ç†çº¿ç¨‹æ± 
adminBrokerThreadPoolNums=16
</code></pre>
<p><strong>çº¿ç¨‹æ± ç›‘æ§</strong>ï¼š</p>
<p>RocketMQ æœ‰å†…ç½®çš„çº¿ç¨‹æ± ç›‘æ§ï¼Œå¯ä»¥é€šè¿‡ JMX æŸ¥çœ‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹çº¿ç¨‹æ± çŠ¶æ€</span>
sh mqadmin brokerRuntimeInfo -n localhost:9876 -b broker-a

<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹ï¼š</span>
sendMessageThreadPoolQueueSize: 50         <span class="hljs-comment"># é˜Ÿåˆ—æ·±åº¦</span>
sendMessageThreadPoolQueueCapacity: 10000  <span class="hljs-comment"># é˜Ÿåˆ—å®¹é‡</span>
pullMessageThreadPoolQueueSize: 20
</code></pre>
<p><strong>è°ƒä¼˜ç­–ç•¥</strong>ï¼š</p>
<ol>
<li><strong>é˜Ÿåˆ—æ·±åº¦ &gt; 100</strong>ï¼šçº¿ç¨‹æ± å¤„ç†ä¸è¿‡æ¥ï¼Œå¢åŠ çº¿ç¨‹æ•°</li>
<li><strong>é˜Ÿåˆ—æ·±åº¦ = 0</strong>ï¼šçº¿ç¨‹æ± é—²ç½®ï¼Œå¯ä»¥å‡å°‘çº¿ç¨‹æ•°</li>
<li><strong>é˜Ÿåˆ—æ·±åº¦æ³¢åŠ¨å¤§</strong>ï¼šæµé‡ä¸å‡åŒ€ï¼Œè€ƒè™‘å‰Šå³°æˆ–é™æµ</li>
</ol>
<p><strong>æºç </strong>ï¼ˆçº¿ç¨‹æ± åˆ›å»ºï¼‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// BrokerController.java</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initializeThreadExecutors</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">this</span>.sendMessageExecutor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BrokerFixedThreadPoolExecutor</span>(
        <span class="hljs-built_in">this</span>.brokerConfig.getSendMessageThreadPoolNums(),
        <span class="hljs-built_in">this</span>.brokerConfig.getSendMessageThreadPoolNums(),
        <span class="hljs-number">1000</span> * <span class="hljs-number">60</span>,
        TimeUnit.MILLISECONDS,
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedBlockingQueue</span>&lt;&gt;(<span class="hljs-number">10000</span>),  <span class="hljs-comment">// é˜Ÿåˆ—é•¿åº¦</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadFactoryImpl</span>(<span class="hljs-string">"SendMessageThread_"</span>));
    
    <span class="hljs-comment">// å…¶ä»–çº¿ç¨‹æ± ç±»ä¼¼...</span>
}
</code></pre>
<p><strong>æ‹’ç»ç­–ç•¥</strong>ï¼š</p>
<p>å¦‚æœé˜Ÿåˆ—æ»¡äº†ï¼ŒRocketMQ ä¼šè¿”å› <code>SYSTEM_BUSY</code>ï¼ŒProducer éœ€è¦é‡è¯•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// BrokerFastFailure.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cleanExpiredRequest</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// å®šæœŸæ¸…ç†è¶…æ—¶è¯·æ±‚</span>
    <span class="hljs-keyword">while</span> (!requestQueue.isEmpty()) {
        <span class="hljs-type">Runnable</span> <span class="hljs-variable">task</span> <span class="hljs-operator">=</span> requestQueue.peek();
        <span class="hljs-keyword">if</span> (System.currentTimeMillis() - task.getCreateTimestamp() &gt; waitTimeMillsInQueue) {
            requestQueue.poll();
            task.returnResponse(ResponseCode.SYSTEM_BUSY);
        }
    }
}
</code></pre>
<p><strong>è°ƒä¼˜æ¡ˆä¾‹</strong>ï¼š</p>
<p>æŸ RocketMQ é›†ç¾¤ TPS å¡åœ¨ 5 ä¸‡ï¼ŒCPU åªæœ‰ 30%ï¼š</p>
<ol>
<li>æŸ¥çœ‹çº¿ç¨‹æ± ï¼Œå‘ç° <code>sendMessageExecutor</code> é˜Ÿåˆ—æ·±åº¦ 5000+</li>
<li>çº¿ç¨‹æ•°åªæœ‰ 16ï¼Œå¤„ç†ä¸è¿‡æ¥</li>
<li>è°ƒæ•´ <code>sendMessageThreadPoolNums=64</code></li>
<li>TPS æå‡åˆ° 20 ä¸‡ï¼ŒCPU å‡åˆ° 70%</li>
</ol>
<hr/>
<h3 data-id="heading-23">4.6 æ€§èƒ½æµ‹è¯•ä¸åŸºå‡†</h3>
<p>å‹æµ‹è¦è®¾è®¡å¥½åœºæ™¯ï¼Œå¦åˆ™æµ‹å‡ºæ¥çš„æ•°æ®æ²¡æœ‰å‚è€ƒä»·å€¼ã€‚</p>
<h4 data-id="heading-24">æµ‹è¯•åœºæ™¯è®¾è®¡</h4>
<p><strong>å• Topic åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç›®çš„ï¼šæµ‹è¯•å• Topic çš„æé™æ€§èƒ½</li>
<li>é…ç½®ï¼š1 ä¸ª Topicï¼Œ4~8 ä¸ª Partition/Queueï¼Œ3 å‰¯æœ¬</li>
<li>æ¶ˆæ¯å¤§å°ï¼š1KB / 10KB / 100KB</li>
<li>å‘é€æ¨¡å¼ï¼šåŒæ­¥ / å¼‚æ­¥</li>
</ul>
<p><strong>å¤š Topic åœºæ™¯</strong>ï¼š</p>
<ul>
<li>ç›®çš„ï¼šæµ‹è¯•å¤š Topic å¹¶å‘å†™å…¥çš„æ€§èƒ½</li>
<li>é…ç½®ï¼š100 ä¸ª Topicï¼Œæ¯ä¸ª 4 ä¸ª Partition/Queue</li>
<li>æ¶ˆæ¯å¤§å°ï¼š1KB</li>
<li>å‘é€æ¨¡å¼ï¼šå¼‚æ­¥</li>
</ul>
<p><strong>å°æ¶ˆæ¯ vs å¤§æ¶ˆæ¯</strong>ï¼š</p>
<ul>
<li>å°æ¶ˆæ¯ï¼ˆ&lt; 1KBï¼‰ï¼šè€ƒéªŒæ‰¹å¤„ç†å’Œç½‘ç»œæ€§èƒ½</li>
<li>å¤§æ¶ˆæ¯ï¼ˆ&gt; 100KBï¼‰ï¼šè€ƒéªŒç£ç›˜ååå’Œå¸¦å®½</li>
</ul>
<h4 data-id="heading-25">Kafka å‹æµ‹å®æˆ˜</h4>
<p><strong>æµ‹è¯•ç¯å¢ƒ</strong>ï¼š</p>
<ul>
<li>æœåŠ¡å™¨ï¼š3 å°ï¼Œ32 æ ¸ / 128GB / NVMe SSD</li>
<li>ç½‘ç»œï¼šä¸‡å…†</li>
<li>Kafka ç‰ˆæœ¬ï¼š3.5.0ï¼ˆKRaft æ¨¡å¼ï¼‰</li>
<li>é…ç½®ï¼š3 å‰¯æœ¬ï¼Œ<code>acks=all</code>ï¼Œ<code>min.insync.replicas=2</code></li>
</ul>
<p><strong>å‹æµ‹å‘½ä»¤</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Producer å‹æµ‹</span>
kafka-producer-perf-test.sh \
  --topic perf-test \
  --num-records 10000000 \
  --record-size 1024 \
  --throughput -1 \
  --producer-props \
    bootstrap.servers=kafka1:9092,kafka2:9092,kafka3:9092 \
    acks=all \
    linger.ms=10 \
    batch.size=65536 \
    compression.type=lz4
</code></pre>
<p><strong>æµ‹è¯•ç»“æœ</strong>ï¼ˆ1KB æ¶ˆæ¯ï¼‰ï¼š</p>


















































<table><thead><tr><th>Partition æ•°</th><th>acks</th><th>linger.ms</th><th>TPS</th><th>P99 å»¶è¿Ÿ</th><th>CPU</th><th>ç½‘ç»œ</th></tr></thead><tbody><tr><td>6</td><td>1</td><td>0</td><td>80 ä¸‡</td><td>2.5ms</td><td>50%</td><td>600MB/s</td></tr><tr><td>6</td><td>1</td><td>10</td><td>120 ä¸‡</td><td>12ms</td><td>60%</td><td>900MB/s</td></tr><tr><td>6</td><td>all</td><td>10</td><td>90 ä¸‡</td><td>18ms</td><td>70%</td><td>700MB/s</td></tr><tr><td>12</td><td>all</td><td>10</td><td>140 ä¸‡</td><td>15ms</td><td>80%</td><td>1GB/s</td></tr></tbody></table>
<p><strong>ç»“è®º</strong>ï¼š</p>
<ul>
<li><code>linger.ms</code> å¯¹ TPS å½±å“å¤§ï¼ˆä» 80 ä¸‡æåˆ° 120 ä¸‡ï¼‰ï¼Œä½†å»¶è¿Ÿä¼šå¢åŠ </li>
<li>Partition æ•°é‡è¶Šå¤šï¼ŒTPS è¶Šé«˜ï¼ˆå¹¶è¡Œåº¦æ›´é«˜ï¼‰</li>
<li><code>acks=all</code> ä¼šé™ä½ TPS 20~30%</li>
</ul>
<h4 data-id="heading-26">RocketMQ å‹æµ‹å®æˆ˜</h4>
<p><strong>æµ‹è¯•ç¯å¢ƒ</strong>ï¼š</p>
<ul>
<li>æœåŠ¡å™¨ï¼š3 å°ï¼Œ32 æ ¸ / 128GB / NVMe SSD</li>
<li>ç½‘ç»œï¼šä¸‡å…†</li>
<li>RocketMQ ç‰ˆæœ¬ï¼š4.9.4</li>
<li>é…ç½®ï¼š3 å‰¯æœ¬ï¼ˆDLedgerï¼‰ï¼ŒåŒæ­¥åˆ·ç›˜</li>
</ul>
<p><strong>å‹æµ‹å‘½ä»¤</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Producer å‹æµ‹</span>
sh benchmark.sh producer \
  -n localhost:9876 \
  -t perf-test \
  -s 1024 \
  -c 100  <span class="hljs-comment"># 100 ä¸ªå¹¶å‘</span>
</code></pre>
<p><strong>æµ‹è¯•ç»“æœ</strong>ï¼ˆ1KB æ¶ˆæ¯ï¼‰ï¼š</p>


















































<table><thead><tr><th>Queue æ•°</th><th>åˆ·ç›˜</th><th>å¤åˆ¶</th><th>TPS</th><th>P99 å»¶è¿Ÿ</th><th>CPU</th><th>ç½‘ç»œ</th></tr></thead><tbody><tr><td>4</td><td>å¼‚æ­¥</td><td>å¼‚æ­¥</td><td>150 ä¸‡</td><td>0.8ms</td><td>50%</td><td>1.1GB/s</td></tr><tr><td>4</td><td>å¼‚æ­¥</td><td>åŒæ­¥</td><td>110 ä¸‡</td><td>2.5ms</td><td>65%</td><td>850MB/s</td></tr><tr><td>4</td><td>åŒæ­¥</td><td>åŒæ­¥</td><td>70 ä¸‡</td><td>8ms</td><td>75%</td><td>550MB/s</td></tr><tr><td>8</td><td>å¼‚æ­¥</td><td>å¼‚æ­¥</td><td>180 ä¸‡</td><td>0.7ms</td><td>60%</td><td>1.3GB/s</td></tr></tbody></table>
<p><strong>ç»“è®º</strong>ï¼š</p>
<ul>
<li>å¼‚æ­¥åˆ·ç›˜ + å¼‚æ­¥å¤åˆ¶æ€§èƒ½æœ€é«˜ï¼ˆ180 ä¸‡ TPSï¼‰</li>
<li>åŒæ­¥åˆ·ç›˜ä¼šé™ä½ TPS 50%+</li>
<li>Queue æ•°é‡å¢åŠ èƒ½æå‡ TPSï¼Œä½†æå‡å¹…åº¦ä¸å¦‚ Kafka çš„ Partition</li>
</ul>
<h4 data-id="heading-27">æ€§èƒ½ç“¶é¢ˆå®šä½</h4>
<p>å‹æµ‹è¿‡ç¨‹ä¸­å¦‚æœ TPS ä¸Šä¸å»ï¼ŒæŒ‰ä»¥ä¸‹é¡ºåºæ’æŸ¥ï¼š</p>
<ol>
<li>
<p><strong>CPU</strong>ï¼š</p>
<ul>
<li><code>top -H -p &lt;pid&gt;</code>ï¼Œçœ‹å“ªäº›çº¿ç¨‹å  CPU é«˜</li>
<li>å¦‚æœ CPU &lt; 70%ï¼Œè¯´æ˜ä¸æ˜¯ CPU ç“¶é¢ˆ</li>
<li>å¦‚æœ CPU = 100%ï¼Œç”¨ <code>perf top</code> çœ‹çƒ­ç‚¹å‡½æ•°</li>
</ul>
</li>
<li>
<p><strong>ç½‘ç»œ</strong>ï¼š</p>
<ul>
<li><code>iftop</code> æˆ– <code>nload</code> çœ‹ç½‘ç»œåå</li>
<li>å¦‚æœæ¥è¿‘ä¸‡å…†ä¸Šé™ï¼ˆ1.2GB/sï¼‰ï¼Œè¯´æ˜ç½‘ç»œæ˜¯ç“¶é¢ˆ</li>
</ul>
</li>
<li>
<p><strong>ç£ç›˜</strong>ï¼š</p>
<ul>
<li><code>iostat -x 1</code> çœ‹ç£ç›˜åˆ©ç”¨ç‡å’Œåå</li>
<li>å¦‚æœ <code>%util</code> = 100%ï¼Œè¯´æ˜ç£ç›˜æ˜¯ç“¶é¢ˆ</li>
</ul>
</li>
<li>
<p><strong>çº¿ç¨‹æ± </strong>ï¼š</p>
<ul>
<li>çœ‹é˜Ÿåˆ—æ·±åº¦ï¼Œå¦‚æœ &gt; 1000ï¼Œè¯´æ˜çº¿ç¨‹æ± ä¸å¤Ÿ</li>
</ul>
</li>
<li>
<p><strong>GC</strong>ï¼š</p>
<ul>
<li>çœ‹ GC æ—¥å¿—ï¼Œå¦‚æœé¢‘ç¹ Full GCï¼Œè¯´æ˜å †å¤ªå°æˆ–æœ‰æ³„æ¼</li>
</ul>
</li>
</ol>
<hr/>
<p><strong>èƒŒæ™¯</strong>ï¼š</p>
<p>æŸä¸šåŠ¡ Kafka çš„ P99 å»¶è¿Ÿ 2msï¼Œä½† P999 å»¶è¿Ÿ 200ms+ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚</p>
<p><strong>æ’æŸ¥</strong>ï¼š</p>
<ol>
<li>æŸ¥çœ‹ Producer æ—¥å¿—ï¼Œå‘ç°å¶å‘çš„ timeout å¼‚å¸¸</li>
<li>æŸ¥çœ‹ Broker GC æ—¥å¿—ï¼Œå‘ç°å¶å‘ Full GCï¼ˆ500ms+ï¼‰</li>
<li>æŸ¥çœ‹ç½‘ç»œç›‘æ§ï¼Œå‘ç° Processor çº¿ç¨‹å¶å°”å¡ä½</li>
</ol>
<p><strong>å®šä½</strong>ï¼š</p>
<ol>
<li><strong>Full GC åŸå› </strong>ï¼šLog Cleaner å ç”¨å¤§é‡å†…å­˜ï¼Œè§¦å‘ Full GC</li>
<li><strong>Processor å¡ä½åŸå› </strong>ï¼šæŸäº›æ…¢ Consumer çš„ Fetch è¯·æ±‚è€—æ—¶é•¿ï¼Œé˜»å¡äº†å…¶ä»–è¯·æ±‚</li>
</ol>
<p><strong>ä¼˜åŒ–</strong>ï¼š</p>
<ol>
<li>è°ƒæ•´ Log Cleaner é…ç½®ï¼š</li>
</ol>
<pre><code class="hljs language-properties" lang="properties">log.cleaner.dedupe.buffer.size=256MB  # ä» 128MB è°ƒå¤§
log.cleaner.threads=2                  # å¢åŠ çº¿ç¨‹
</code></pre>
<ol start="2">
<li>
<p>å¢åŠ  <code>num.network.threads</code>ï¼ˆä» 3 è°ƒåˆ° 8ï¼‰ï¼Œé¿å…æ…¢è¯·æ±‚é˜»å¡</p>
</li>
<li>
<p>Consumer ç«¯ä¼˜åŒ–ï¼š</p>
<ul>
<li>å¢åŠ  Consumer å®ä¾‹ï¼Œå‡å°‘å•ä¸ª Consumer çš„è´Ÿè½½</li>
<li>å¼€å¯ <code>max.poll.records=500</code>ï¼Œæ‰¹é‡å¤„ç†</li>
</ul>
</li>
</ol>
<p><strong>æ•ˆæœ</strong>ï¼š</p>
<ul>
<li>Full GC é¢‘ç‡é™ä½ 90%</li>
<li>P999 å»¶è¿Ÿä» 200ms é™åˆ° 10ms</li>
</ul>
<p><strong>ç»éªŒ</strong>ï¼š</p>
<p>P999 å»¶è¿Ÿçš„"é•¿å°¾"å¾€å¾€æ˜¯ GCã€æ…¢è¯·æ±‚ã€ç½‘ç»œæŠ–åŠ¨ç­‰å¶å‘é—®é¢˜ã€‚éœ€è¦ç»“åˆæ—¥å¿—å’Œç›‘æ§ï¼Œé€ä¸ªæ’æŸ¥ã€‚</p>
<hr/>
<h3 data-id="heading-28">æ€»ç»“</h3>
<p>æ€§èƒ½è°ƒä¼˜æ˜¯ä¸ª"æœ¨æ¡¶æ•ˆåº”"ï¼šç½‘ç»œã€ç£ç›˜ã€CPUã€å†…å­˜ã€çº¿ç¨‹ã€é…ç½®ï¼Œä»»ä½•ä¸€å—çŸ­äº†éƒ½ä¼šæ‹–åè…¿ã€‚</p>
<p><strong>Kafka è°ƒä¼˜é‡ç‚¹</strong>ï¼š</p>
<ol>
<li><strong>Page Cache</strong>ï¼šä¿è¯æœ‰è¶³å¤Ÿå†…å­˜ï¼Œé¿å…è¢«å…¶ä»–è¿›ç¨‹æŒ¤å </li>
<li><strong>æ‰¹é‡ + linger</strong>ï¼šProducer ç«¯è°ƒæ•´ <code>linger.ms</code> å’Œ <code>batch.size</code></li>
<li><strong>çº¿ç¨‹æ± </strong>ï¼š<code>num.network.threads</code> å’Œ <code>num.io.threads</code> è¦å¤Ÿ</li>
<li><strong>ç£ç›˜</strong>ï¼šç”¨ SSDï¼ŒXFS æ–‡ä»¶ç³»ç»Ÿï¼Œå…³é—­ atime</li>
<li><strong>ç›‘æ§</strong>ï¼šç›¯ Page Cache å‘½ä¸­ç‡ã€GCã€Under-Replicated Partitions</li>
</ol>
<p><strong>RocketMQ è°ƒä¼˜é‡ç‚¹</strong>ï¼š</p>
<ol>
<li><strong>åˆ·ç›˜ + å¤åˆ¶</strong>ï¼šæ ¹æ®ä¸šåŠ¡é€‰æ‹©åˆé€‚çš„ç»„åˆï¼ˆå¼‚æ­¥æ€§èƒ½é«˜ï¼ŒåŒæ­¥å¯é æ€§é«˜ï¼‰</li>
<li><strong>TransientStorePool</strong>ï¼šé«˜åååœºæ™¯ä¸‹å¼€å¯ï¼Œå‡å°‘ GC</li>
<li><strong>çº¿ç¨‹æ± </strong>ï¼š<code>sendMessageThreadPoolNums</code> å’Œ <code>pullMessageThreadPoolNums</code> æ ¹æ® TPS è°ƒæ•´</li>
<li><strong>æ–‡ä»¶é¢„çƒ­</strong>ï¼šå¼€å¯ <code>warmMappedFileEnable</code>ï¼Œå‡å°‘é¦–å†™å»¶è¿Ÿ</li>
<li><strong>ç›‘æ§</strong>ï¼šç›¯åˆ·ç›˜è€—æ—¶ã€å¤åˆ¶å»¶è¿Ÿã€çº¿ç¨‹æ± é˜Ÿåˆ—æ·±åº¦</li>
</ol>
<p><strong>é€šç”¨å»ºè®®</strong>ï¼š</p>
<ol>
<li><strong>å‹æµ‹è¦è´´è¿‘çœŸå®</strong>ï¼šç”¨çœŸå®çš„æ¶ˆæ¯å¤§å°ã€Topic æ•°é‡ã€æµé‡æ¨¡å¼</li>
<li><strong>ç›‘æ§è¦å…¨é¢</strong>ï¼šCPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œã€GCã€çº¿ç¨‹æ± ï¼Œç¼ºä¸€ä¸å¯</li>
<li><strong>ä¼˜åŒ–è¦æœ‰æ•°æ®</strong>ï¼šæ¯æ¬¡ä¼˜åŒ–å‰åéƒ½è¦è®°å½•æ•°æ®ï¼Œå¯¹æ¯”æ•ˆæœ</li>
<li><strong>ä¸è¦è¿‡åº¦ä¼˜åŒ–</strong>ï¼šè¾¾åˆ°ä¸šåŠ¡ç›®æ ‡å°±å¤Ÿäº†ï¼Œä¸è¦è¿½æ±‚"ç†è®ºæé™"</li>
</ol>
<p>æ€§èƒ½è°ƒä¼˜çš„æœ¬è´¨ï¼Œæ˜¯åœ¨"å¯é æ€§ã€å»¶è¿Ÿã€åå"ä¹‹é—´æ‰¾å¹³è¡¡ã€‚æ²¡æœ‰æœ€ä¼˜è§£ï¼Œåªæœ‰æœ€é€‚åˆä½ ä¸šåŠ¡çš„è§£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•è§£å†³MySQLå”¯ä¸€ç´¢å¼•ä¸é€»è¾‘åˆ é™¤å†²çª]]></title>    <link>https://juejin.cn/post/7572497847770890267</link>    <guid>https://juejin.cn/post/7572497847770890267</guid>    <pubDate>2025-11-15T14:28:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572497847770890267" data-draft-id="7572781559750950939" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•è§£å†³MySQLå”¯ä¸€ç´¢å¼•ä¸é€»è¾‘åˆ é™¤å†²çª"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T14:28:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CyberShen"/> <meta itemprop="url" content="https://juejin.cn/user/554609587530014"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•è§£å†³MySQLå”¯ä¸€ç´¢å¼•ä¸é€»è¾‘åˆ é™¤å†²çª
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/554609587530014/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CyberShen
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T14:28:49.000Z" title="Sat Nov 15 2025 14:28:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å½“ä»Šä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œ<strong>é€»è¾‘åˆ é™¤</strong>å·²æˆä¸ºæ•°æ®ç®¡ç†çš„æ ‡é…åšæ³•ï¼Œå®ƒé€šè¿‡ä¸€ä¸ªæ ‡è®°å­—æ®µï¼ˆå¦‚Â <code>is_deleted</code>ï¼‰æ¥æ ‡è¯†æ•°æ®æ˜¯å¦è¢«åˆ é™¤ï¼Œè€Œä¸æ˜¯çœŸæ­£ä»æ•°æ®åº“ä¸­ç§»é™¤æ•°æ®ã€‚è¿™ç§åšæ³•æœ‰åˆ©äºæ•°æ®å®¡è®¡ã€æ•…éšœæ¢å¤å’Œå†å²è®°å½•è¿½è¸ªã€‚ç„¶è€Œï¼Œå½“è¡¨ä¸­å­˜åœ¨<strong>å”¯ä¸€ç´¢å¼•</strong>æ—¶ï¼Œé€»è¾‘åˆ é™¤å°±ä¼šå¸¦æ¥ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼šå·²åˆ é™¤çš„æ•°æ®ä»ç„¶å ç”¨ç€å”¯ä¸€ç´¢å¼•çš„â€œä½ç½®â€ï¼Œå¯¼è‡´æ–°æ’å…¥çš„åˆæ³•æ•°æ®å› è¿åå”¯ä¸€çº¦æŸè€Œè¢«æ‹’ç»ã€‚</p>
<h2 data-id="heading-0">é—®é¢˜åœºæ™¯åˆ†æ</h2>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç”¨æˆ·è¡¨ï¼Œå…¶ä¸­Â <code>username</code>å­—æ®µéœ€è¦ä¿æŒå”¯ä¸€æ€§ï¼Œæˆ‘ä»¬ä¸ºæ­¤åˆ›å»ºäº†å”¯ä¸€ç´¢å¼•ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨Â <code>is_deleted</code>å­—æ®µå®ç°é€»è¾‘åˆ é™¤ï¼ˆ0è¡¨ç¤ºæœªåˆ é™¤ï¼Œ1è¡¨ç¤ºå·²åˆ é™¤ï¼‰ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `<span class="hljs-keyword">user</span>` (
  `id` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,
  `username` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  `is_deleted` TINYINT(<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,
  `email` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> INDEX `idx_username_unique` (`username`)
);
</code></pre>
<p>ç°åœ¨è€ƒè™‘ä»¥ä¸‹æ“ä½œåºåˆ—ï¼š</p>
<ol>
<li>æ’å…¥ç”¨æˆ·åä¸º"å¼ ä¸‰"çš„è®°å½•ï¼š<code>INSERT INTO user (username, is_deleted, email) VALUES ('å¼ ä¸‰', 0, 'zhangsan@example.com');</code></li>
<li>é€»è¾‘åˆ é™¤è¿™æ¡è®°å½•ï¼š<code>UPDATE user SET is_deleted = 1 WHERE username = 'å¼ ä¸‰';</code></li>
<li>å°è¯•é‡æ–°åˆ›å»ºç”¨æˆ·åä¸º"å¼ ä¸‰"çš„æ–°ç”¨æˆ·ï¼š<code>INSERT INTO user (username, is_deleted, email) VALUES ('å¼ ä¸‰', 0, 'new_zhangsan@example.com');</code></li>
</ol>
<p>æ­¤æ—¶ï¼Œç¬¬ä¸‰æ­¥æ“ä½œä¼šå¤±è´¥ï¼Œå¹¶æŠ¥å‘Š"Duplicate entry"é”™è¯¯ã€‚å› ä¸ºå”¯ä¸€ç´¢å¼•ä»ç„¶è®¤ä¸ºç”¨æˆ·å"å¼ ä¸‰"å·²å­˜åœ¨ï¼Œå°½ç®¡å®ƒå¯¹åº”çš„æ•°æ®å·²è¢«æ ‡è®°ä¸ºåˆ é™¤ã€‚</p>
<h2 data-id="heading-1">è§£å†³æ–¹æ¡ˆå¯¹æ¯”</h2>
<p>ä»¥ä¸‹æ˜¯å‡ ç§è§£å†³è¿™ä¸€é—®é¢˜çš„æ–¹æ¡ˆï¼Œå„æœ‰ä¼˜ç¼ºç‚¹ï¼Œé€‚ç”¨äºä¸åŒåœºæ™¯ã€‚</p>
<h3 data-id="heading-2">æ–¹æ¡ˆä¸€ï¼šå°†åˆ é™¤æ ‡è¯†è®¾ç½®ä¸ºNULL</h3>
<p>åˆ©ç”¨<strong>æ•°æ®åº“å”¯ä¸€ç´¢å¼•å¯¹NULLå€¼æ— æ•ˆ</strong>çš„ç‰¹æ€§ï¼Œå°†åˆ é™¤æ ‡è¯†å­—æ®µè®¾ç½®ä¸ºNULLè€Œéå›ºå®šçš„å€¼ã€‚<strong>å®ç°æ–¹å¼ï¼š</strong></p>
<ul>
<li>æœªåˆ é™¤æ—¶ï¼Œ<code>del_flag</code>å­—æ®µä¸º0ï¼ˆæˆ–NOT NULLï¼‰</li>
<li>é€»è¾‘åˆ é™¤æ—¶ï¼Œå°†Â <code>del_flag</code>è®¾ç½®ä¸ºNULL</li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºè”åˆå”¯ä¸€ç´¢å¼•</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">UNIQUE</span> INDEX idx_username_del_flag (username, del_flag);

<span class="hljs-comment">-- é€»è¾‘åˆ é™¤æ—¶è®¾ç½®del_flagä¸ºNULL</span>
<span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">SET</span> del_flag <span class="hljs-operator">=</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">WHERE</span> username <span class="hljs-operator">=</span> <span class="hljs-string">'å¼ ä¸‰'</span> <span class="hljs-keyword">AND</span> del_flag <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
</code></pre>
<p>å¦‚æœä½ ä½¿ç”¨MyBatis-Plusï¼Œå¯ä»¥é€šè¿‡æ³¨è§£ç®€åŒ–é…ç½®ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * æ˜¯å¦åˆ é™¤
 * ä¸ºè§£å†³'é€»è¾‘åˆ é™¤'å’Œ'å”¯ä¸€ç´¢å¼•'å†²çªé—®é¢˜ï¼Œå°†é€»è¾‘åˆ é™¤å­—æ®µè®¾ç½®ä¸ºNULL
 */</span>
<span class="hljs-meta">@TableLogic(value = <span class="hljs-string">"0"</span>, delval = <span class="hljs-string">"NULL"</span>)</span>
<span class="hljs-keyword">private</span> <span class="hljs-built_in">Boolean</span> deleteFlag;
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼šå®ç°ç®€å•ï¼Œæ— éœ€æ”¹å˜è¡¨ç»“æ„<strong>ç¼ºç‚¹</strong>ï¼šè¯­ä¹‰ä¸Šä¸å¤Ÿç›´è§‚ï¼ŒNULLå€¼çš„å¤„ç†å¯èƒ½éœ€è¦é¢å¤–æ³¨æ„</p>
<h3 data-id="heading-3">æ–¹æ¡ˆäºŒï¼šä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºåˆ é™¤æ ‡å¿—</h3>
<p>å°†åˆ é™¤æ ‡å¿—ä»å¸ƒå°”å€¼æ”¹ä¸ºæ—¶é—´æˆ³ï¼Œ<strong>åˆ©ç”¨æ—¶é—´æˆ³çš„é«˜å”¯ä¸€æ€§</strong>é¿å…å†²çªã€‚<strong>å®ç°æ–¹å¼ï¼š</strong></p>
<ul>
<li>æœªåˆ é™¤æ—¶ï¼Œ<code>delete_time</code>å­—æ®µä¸º0æˆ–NULL</li>
<li>é€»è¾‘åˆ é™¤æ—¶ï¼Œå°†Â <code>delete_time</code>è®¾ç½®ä¸ºå½“å‰æ—¶é—´æˆ³</li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¿®æ”¹è¡¨ç»“æ„ï¼Œå°†åˆ é™¤æ ‡å¿—æ”¹ä¸ºæ—¶é—´æˆ³</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">user</span> 
<span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> delete_time <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'åˆ é™¤æ—¶é—´ï¼Œ0è¡¨ç¤ºæœªåˆ é™¤'</span>;

<span class="hljs-comment">-- åˆ›å»ºè”åˆå”¯ä¸€ç´¢å¼•</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">UNIQUE</span> INDEX idx_username_delete_time (username, delete_time);

<span class="hljs-comment">-- é€»è¾‘åˆ é™¤æ—¶è®¾ç½®delete_timeä¸ºå½“å‰æ—¶é—´æˆ³</span>
<span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">SET</span> delete_time <span class="hljs-operator">=</span> UNIX_TIMESTAMP() <span class="hljs-keyword">WHERE</span> username <span class="hljs-operator">=</span> <span class="hljs-string">'å¼ ä¸‰'</span> <span class="hljs-keyword">AND</span> delete_time <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼šå¯ä»¥è®°å½•åˆ é™¤æ—¶é—´ï¼Œå†²çªå¯èƒ½æ€§æä½<strong>ç¼ºç‚¹</strong>ï¼šéœ€è¦ä¿®æ”¹è¡¨ç»“æ„ï¼Œå­˜å‚¨ç©ºé—´ç¨å¤§</p>
<h3 data-id="heading-4">æ–¹æ¡ˆä¸‰ï¼šæ–°å¢åˆ é™¤å”¯ä¸€æ ‡è¯†å­—æ®µ</h3>
<p><strong>æ–°å¢ä¸€ä¸ªä¸“é—¨ç”¨äºå”¯ä¸€çº¦æŸçš„å­—æ®µ</strong>ï¼Œä¸åŸæœ‰å”¯ä¸€å­—æ®µç»„æˆè”åˆå”¯ä¸€ç´¢å¼•ã€‚<strong>å®ç°æ–¹å¼ï¼š</strong></p>
<ul>
<li>æ–°å¢Â <code>del_unique_key</code>å­—æ®µï¼Œé»˜è®¤å€¼ä¸º0ï¼ˆç±»å‹ä¸ä¸»é”®ç›¸åŒï¼‰</li>
<li>é€»è¾‘åˆ é™¤æ—¶ï¼Œå°†Â <code>del_unique_key</code>è®¾ç½®ä¸ºè¯¥è®°å½•çš„ä¸»é”®ID</li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ–°å¢del_unique_keyå­—æ®µ</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">user</span> 
<span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> del_unique_key <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'ç”¨äºå”¯ä¸€ç´¢å¼•çš„é€»è¾‘åˆ é™¤å­—æ®µ'</span>;

<span class="hljs-comment">-- åˆ›å»ºè”åˆå”¯ä¸€ç´¢å¼•</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">UNIQUE</span> INDEX idx_username_del_unique (username, del_unique_key);

<span class="hljs-comment">-- é€»è¾‘åˆ é™¤æ—¶è®¾ç½®del_unique_keyä¸ºä¸»é”®å€¼</span>
<span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">SET</span> del_unique_key <span class="hljs-operator">=</span> id, is_deleted <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> username <span class="hljs-operator">=</span> <span class="hljs-string">'å¼ ä¸‰'</span> <span class="hljs-keyword">AND</span> is_deleted <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼šä¿è¯å”¯ä¸€æ€§ï¼Œæ˜“äºç†è§£<strong>ç¼ºç‚¹</strong>ï¼šéœ€è¦æ–°å¢å­—æ®µï¼Œåˆ é™¤æ“ä½œç¨å¤æ‚</p>
<h3 data-id="heading-5">æ–¹æ¡ˆå››ï¼šMySQL 8.0+ è™šæ‹Ÿç”Ÿæˆåˆ—æ–¹æ¡ˆï¼ˆæ¨èï¼‰</h3>
<p>å¯¹äºMySQL 8.0.13åŠä»¥ä¸Šç‰ˆæœ¬ï¼Œ<strong>è™šæ‹Ÿç”Ÿæˆåˆ—</strong>æä¾›äº†ä¸€ç§ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆã€‚<strong>å®ç°åŸç†ï¼š</strong> åˆ›å»ºè™šæ‹Ÿç”Ÿæˆåˆ—ï¼Œä»…å½“æ•°æ®æœªåˆ é™¤æ—¶æ˜¾ç¤ºä¸šåŠ¡å­—æ®µå€¼ï¼Œåˆ é™¤åæ˜¾ç¤ºNULLï¼Œç„¶ååœ¨è¯¥è™šæ‹Ÿåˆ—ä¸Šåˆ›å»ºå”¯ä¸€ç´¢å¼•ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ·»åŠ è™šæ‹Ÿç”Ÿæˆåˆ—</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">user</span>
  <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> username_visible <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>)
    GENERATED ALWAYS <span class="hljs-keyword">AS</span> (IF(is_deleted <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, username, <span class="hljs-keyword">NULL</span>)) VIRTUAL,
  <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> email_visible <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>)
    GENERATED ALWAYS <span class="hljs-keyword">AS</span> (IF(is_deleted <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, email, <span class="hljs-keyword">NULL</span>)) VIRTUAL;

<span class="hljs-comment">-- åœ¨è™šæ‹Ÿåˆ—ä¸Šåˆ›å»ºå”¯ä¸€ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">UNIQUE</span> INDEX idx_user_unique
  <span class="hljs-keyword">ON</span> <span class="hljs-keyword">user</span>(username_visible, email_visible);
</code></pre>
<p>ç°åœ¨ï¼Œå¯ä»¥æ­£å¸¸è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ’å…¥ç¬¬ä¸€æ¡æ•°æ®</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">user</span> (username, is_deleted, email) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-number">0</span>, <span class="hljs-string">'zhangsan@example.com'</span>);

<span class="hljs-comment">-- é€»è¾‘åˆ é™¤è¯¥æ•°æ®</span>
<span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">SET</span> is_deleted <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> username <span class="hljs-operator">=</span> <span class="hljs-string">'å¼ ä¸‰'</span>;

<span class="hljs-comment">-- å†æ¬¡æ’å…¥ç›¸åŒç”¨æˆ·åï¼ŒæˆåŠŸï¼</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">user</span> (username, is_deleted, email) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-number">0</span>, <span class="hljs-string">'new_zhangsan@example.com'</span>);
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>å®Œå…¨åœ¨æ•°æ®åº“å±‚è§£å†³ï¼Œæ— éœ€ä¿®æ”¹ä¸šåŠ¡ä»£ç </li>
<li>ç´¢å¼•æ•ˆç‡é«˜ï¼Œä»…å¯¹æœªåˆ é™¤æ•°æ®å»ºç«‹ç´¢å¼•</li>
<li>è¯­ä¹‰æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>ï¼šéœ€è¦MySQL 8.0.13+ç‰ˆæœ¬æ”¯æŒ</p>
<h3 data-id="heading-6">æ–¹æ¡ˆäº”ï¼šç‰©ç†åˆ é™¤ä¸å†å²è¡¨</h3>
<p>å¦‚æœä¸šåŠ¡å…è®¸ï¼Œå¯ä»¥è€ƒè™‘<strong>ç‰©ç†åˆ é™¤+å†å²è¡¨</strong>çš„æ–¹æ¡ˆã€‚<strong>å®ç°æ–¹å¼ï¼š</strong></p>
<ul>
<li>ä¸»è¡¨ä½¿ç”¨ç‰©ç†åˆ é™¤</li>
<li>åˆ é™¤å‰å°†æ•°æ®è½¬ç§»è‡³å†å²è¡¨</li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºå†å²è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> user_history <span class="hljs-keyword">LIKE</span> <span class="hljs-keyword">user</span>;
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> user_history <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> deleted_at <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>;

<span class="hljs-comment">-- åˆ é™¤æ“ä½œï¼ˆäº‹åŠ¡ä¸­æ‰§è¡Œï¼‰</span>
<span class="hljs-keyword">START</span> TRANSACTION;
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> user_history <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span>, NOW() <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
<span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;
<span class="hljs-keyword">COMMIT</span>;
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼šå½»åº•é¿å…å”¯ä¸€ç´¢å¼•å†²çªï¼Œæ•°æ®å½’æ¡£æ¸…æ™°<strong>ç¼ºç‚¹</strong>ï¼šå®ç°å¤æ‚ï¼Œéœ€è¦ç»´æŠ¤å†å²è¡¨</p>
<h3 data-id="heading-7">æ–¹æ¡ˆå…­ï¼šå¼•å…¥Redisç­‰å¤–éƒ¨ç¼“å­˜</h3>
<p><strong>å°†å”¯ä¸€æ€§æ£€æŸ¥ç§»è‡³åº”ç”¨å±‚</strong>ï¼Œé€šè¿‡Redisç­‰é«˜æ€§èƒ½ç¼“å­˜ä¿è¯å”¯ä¸€æ€§ã€‚<strong>å®ç°æ–¹å¼ï¼š</strong></p>
<ul>
<li>ç§»é™¤æ•°æ®åº“å±‚é¢çš„å”¯ä¸€çº¦æŸ</li>
<li>æ’å…¥æ•°æ®å‰ï¼Œå…ˆæ£€æŸ¥Redisä¸­æ˜¯å¦å­˜åœ¨ç›¸åŒé”®å€¼</li>
<li>ä½¿ç”¨Redisçš„åŸå­æ“ä½œä¿è¯å¹¶å‘å®‰å…¨</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¼ªä»£ç ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">insertUser</span>(<span class="hljs-params">User user</span>) {
    <span class="hljs-title class_">String</span> key = <span class="hljs-string">"user:unique:"</span> + user.<span class="hljs-title function_">getUsername</span>();
    <span class="hljs-comment">// ä½¿ç”¨SETNXåŸå­æ“ä½œ</span>
    <span class="hljs-built_in">boolean</span> success = redis.<span class="hljs-title function_">setnx</span>(key, user.<span class="hljs-title function_">getId</span>(), expiration);
    <span class="hljs-keyword">if</span> (!success) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(<span class="hljs-string">"ç”¨æˆ·åå·²å­˜åœ¨"</span>);
    }
    <span class="hljs-comment">// æ’å…¥æ•°æ®åº“</span>
    <span class="hljs-keyword">return</span> userMapper.<span class="hljs-title function_">insert</span>(user) &gt; <span class="hljs-number">0</span>;
}

<span class="hljs-comment">// åˆ é™¤æ—¶</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">deleteUser</span>(<span class="hljs-params">Long userId</span>) {
    <span class="hljs-title class_">User</span> user = userMapper.<span class="hljs-title function_">selectById</span>(userId);
    <span class="hljs-title class_">String</span> key = <span class="hljs-string">"user:unique:"</span> + user.<span class="hljs-title function_">getUsername</span>();
    redis.<span class="hljs-title function_">delete</span>(key);
    <span class="hljs-keyword">return</span> userMapper.<span class="hljs-title function_">logicDelete</span>(userId);
}
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼šé«˜æ€§èƒ½ï¼Œçµæ´»æ€§å¼º<strong>ç¼ºç‚¹</strong>ï¼šç³»ç»Ÿå¤æ‚åº¦å¢åŠ ï¼Œéœ€è¦ç»´æŠ¤æ•°æ®ä¸€è‡´æ€§</p>
<h2 data-id="heading-8">æ–¹æ¡ˆæ¯”è¾ƒä¸é€‰å‹å»ºè®®</h2>
<p>ä¸‹è¡¨å¯¹æ¯”äº†å„æ–¹æ¡ˆçš„é€‚ç”¨åœºæ™¯å’Œæ³¨æ„äº‹é¡¹ï¼š</p>






















































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>é€‚ç”¨åœºæ™¯</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>æ¨èæŒ‡æ•°</th></tr></thead><tbody><tr><td>åˆ é™¤æ ‡è¯†è®¾ä¸ºNULL</td><td>ç®€å•ä¸šåŠ¡ï¼Œæ•°æ®é‡å°</td><td>å®ç°ç®€å•</td><td>è¯­ä¹‰ä¸æ¸…ï¼ŒNULLå¤„ç†å¤æ‚</td><td>â˜…â˜…â˜…â˜†â˜†</td></tr><tr><td>æ—¶é—´æˆ³åˆ é™¤æ ‡å¿—</td><td>éœ€è¦è®°å½•åˆ é™¤æ—¶é—´</td><td>è®°å½•åˆ é™¤æ—¶é—´ï¼Œä½æ¦‚ç‡å†²çª</td><td>å­˜å‚¨ç©ºé—´ç¨å¤§</td><td>â˜…â˜…â˜…â˜…â˜†</td></tr><tr><td>æ–°å¢åˆ é™¤æ ‡è¯†å­—æ®µ</td><td>å¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯</td><td>ä¿è¯å”¯ä¸€æ€§ï¼Œæ˜“äºç†è§£</td><td>éœ€è¦æ–°å¢å­—æ®µ</td><td>â˜…â˜…â˜…â˜…â˜†</td></tr><tr><td>è™šæ‹Ÿç”Ÿæˆåˆ—(MySQL 8.0+)</td><td>MySQL 8.0+ç¯å¢ƒ</td><td>æ•°æ®åº“å±‚è§£å†³ï¼Œé«˜æ•ˆ</td><td>ç‰ˆæœ¬è¦æ±‚é«˜</td><td>â˜…â˜…â˜…â˜…â˜…</td></tr><tr><td>ç‰©ç†åˆ é™¤+å†å²è¡¨</td><td>æ•°æ®å½’æ¡£é‡è¦åœºæ™¯</td><td>å½»åº•è§£å†³å†²çª</td><td>å®ç°å¤æ‚ï¼Œç»´æŠ¤æˆæœ¬é«˜</td><td>â˜…â˜…â˜†â˜†â˜†</td></tr><tr><td>Rediså¤–éƒ¨ç¼“å­˜</td><td>é«˜å¹¶å‘ï¼Œé«˜æ€§èƒ½è¦æ±‚</td><td>æ€§èƒ½æé«˜</td><td>ç³»ç»Ÿå¤æ‚ï¼Œä¸€è‡´æ€§éš¾ä¿è¯</td><td>â˜…â˜…â˜…â˜†â˜†</td></tr></tbody></table>
<p><strong>é€‰å‹å»ºè®®ï¼š</strong></p>
<ol>
<li><strong>æ–°å»ºç³»ç»Ÿä¸”ä½¿ç”¨MySQL 8.0+</strong> ï¼šå¼ºçƒˆæ¨è<strong>è™šæ‹Ÿç”Ÿæˆåˆ—æ–¹æ¡ˆ</strong>ï¼Œå®ƒåœ¨æ•°æ®åº“å±‚é¢å®Œç¾è§£å†³é—®é¢˜ï¼Œä¸”æ— éœ€ä¿®æ”¹ä¸šåŠ¡ä»£ç ã€‚</li>
<li><strong>ç°æœ‰ç³»ç»Ÿæ”¹é€ </strong>ï¼šä¼˜å…ˆè€ƒè™‘<strong>æ–°å¢åˆ é™¤æ ‡è¯†å­—æ®µ</strong>æˆ–<strong>æ—¶é—´æˆ³æ–¹æ¡ˆ</strong>ï¼Œå¯¹ç°æœ‰ä¸šåŠ¡å½±å“è¾ƒå°ã€‚</li>
<li><strong>é«˜å¹¶å‘åœºæ™¯</strong>ï¼šå¯ä»¥è€ƒè™‘<strong>Redisæ–¹æ¡ˆ</strong>ï¼Œä½†è¦åšå¥½æ•°æ®ä¸€è‡´æ€§çš„ä¿éšœã€‚</li>
<li><strong>æ•°æ®æ•æ„Ÿå‹ä¸šåŠ¡</strong>ï¼š<strong>ç‰©ç†åˆ é™¤+å†å²è¡¨</strong>è™½ç„¶å®ç°å¤æ‚ï¼Œä½†æä¾›äº†å®Œæ•´çš„æ•°æ®è¿½è¸ªèƒ½åŠ›ã€‚</li>
</ol>
<h2 data-id="heading-9">å®æˆ˜ç¤ºä¾‹ï¼šè™šæ‹Ÿç”Ÿæˆåˆ—æ–¹æ¡ˆå®Œæ•´å®ç°</h2>
<p>ä»¥ä¸‹æ˜¯åœ¨MySQL 8.0+ç¯å¢ƒä¸­ä½¿ç”¨è™šæ‹Ÿç”Ÿæˆåˆ—çš„å®Œæ•´ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºè¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `<span class="hljs-keyword">user</span>` (
  `id` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,
  `username` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  `is_deleted` TINYINT(<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>,
  `email` <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`)
) ENGINE<span class="hljs-operator">=</span>InnoDB;

<span class="hljs-comment">-- æ·»åŠ è™šæ‹Ÿç”Ÿæˆåˆ—</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">user</span>
  <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> username_visible <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>)
    GENERATED ALWAYS <span class="hljs-keyword">AS</span> (IF(is_deleted <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, username, <span class="hljs-keyword">NULL</span>)) VIRTUAL,
  <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> email_visible <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">255</span>)
    GENERATED ALWAYS <span class="hljs-keyword">AS</span> (IF(is_deleted <span class="hljs-operator">=</span> <span class="hljs-number">0</span>, email, <span class="hljs-keyword">NULL</span>)) VIRTUAL;

<span class="hljs-comment">-- åˆ›å»ºå”¯ä¸€ç´¢å¼•</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">UNIQUE</span> INDEX idx_user_unique
  <span class="hljs-keyword">ON</span> <span class="hljs-keyword">user</span>(username_visible, email_visible);

<span class="hljs-comment">-- æµ‹è¯•æ•°æ®æ“ä½œ</span>
<span class="hljs-comment">-- 1. æ’å…¥ç¬¬ä¸€æ¡æ•°æ®</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">user</span> (username, is_deleted, email) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'zhangsan'</span>, <span class="hljs-number">0</span>, <span class="hljs-string">'zhangsan@example.com'</span>);

<span class="hljs-comment">-- 2. é€»è¾‘åˆ é™¤ç¬¬ä¸€æ¡æ•°æ®</span>
<span class="hljs-keyword">UPDATE</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">SET</span> is_deleted <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-keyword">WHERE</span> username <span class="hljs-operator">=</span> <span class="hljs-string">'zhangsan'</span>;

<span class="hljs-comment">-- 3. æ’å…¥åŒç”¨æˆ·åçš„æ–°æ•°æ®ï¼ˆåº”è¯¥æˆåŠŸï¼‰</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">user</span> (username, is_deleted, email) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'zhangsan'</span>, <span class="hljs-number">0</span>, <span class="hljs-string">'new_zhangsan@example.com'</span>);

<span class="hljs-comment">-- 4. æŸ¥è¯¢éªŒè¯</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">WHERE</span> is_deleted <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
</code></pre>
<h2 data-id="heading-10">æ€»ç»“</h2>
<p>MySQLå”¯ä¸€ç´¢å¼•ä¸é€»è¾‘åˆ é™¤çš„å†²çªæ˜¯æ•°æ®åº“è®¾è®¡ä¸­å¸¸è§ä½†å®Œå…¨å¯ä»¥è§£å†³çš„é—®é¢˜ã€‚é€‰æ‹©å“ªç§æ–¹æ¡ˆåº”æ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚ã€æŠ€æœ¯ç¯å¢ƒå’Œæœªæ¥å‘å±•è§„åˆ’æ¥å†³å®šã€‚å¯¹äºå¤§å¤šæ•°åœºæ™¯ï¼Œæˆ‘æ¨è<strong>è™šæ‹Ÿç”Ÿæˆåˆ—æ–¹æ¡ˆ</strong>ï¼ˆMySQL 8.0+ï¼‰æˆ–<strong>æ–°å¢åˆ é™¤æ ‡è¯†å­—æ®µæ–¹æ¡ˆ</strong>ï¼ˆMySQLä½ç‰ˆæœ¬ï¼‰ï¼Œå®ƒä»¬åœ¨å¤æ‚æ€§ã€æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§ä¹‹é—´å–å¾—äº†è¾ƒå¥½çš„å¹³è¡¡ã€‚æ— è®ºé€‰æ‹©å“ªç§æ–¹æ¡ˆï¼Œé‡è¦çš„æ˜¯è¦åœ¨é¡¹ç›®æ—©æœŸå°±è€ƒè™‘å¹¶è®¾è®¡å¥½åˆ é™¤ç­–ç•¥ï¼Œé¿å…åœ¨ä¸šåŠ¡å‘å±•åˆ°ä¸€å®šé˜¶æ®µåæ‰å‘ç°æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œé‚£æ—¶å†è¿›è¡Œæ”¹é€ å°†ä»˜å‡ºæ›´å¤§çš„ä»£ä»·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ•°æ®-154 Apache Druid æ¶æ„ä¸ç»„ä»¶èŒè´£å…¨è§£æ ç‰ˆæœ¬æ¶æ„ï¼šCoordinator/Overlord/Historical å®æˆ˜]]></title>    <link>https://juejin.cn/post/7572493520003973154</link>    <guid>https://juejin.cn/post/7572493520003973154</guid>    <pubDate>2025-11-16T01:53:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572493520003973154" data-draft-id="7572537221540659215" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ•°æ®-154 Apache Druid æ¶æ„ä¸ç»„ä»¶èŒè´£å…¨è§£æ ç‰ˆæœ¬æ¶æ„ï¼šCoordinator/Overlord/Historical å®æˆ˜"/> <meta itemprop="keywords" content="åç«¯,å¤§æ•°æ®,Apache"/> <meta itemprop="datePublished" content="2025-11-16T01:53:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ­¦å­åº·"/> <meta itemprop="url" content="https://juejin.cn/user/149189314230039"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ•°æ®-154 Apache Druid æ¶æ„ä¸ç»„ä»¶èŒè´£å…¨è§£æ ç‰ˆæœ¬æ¶æ„ï¼šCoordinator/Overlord/Historical å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/149189314230039/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ­¦å­åº·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T01:53:43.000Z" title="Sun Nov 16 2025 01:53:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">TL;DR</h2>
<ul>
<li>åœºæ™¯ï¼šå®æ—¶ + å†å² OLAPï¼Œéœ€è¦ç¨³å®šæ‘„å…¥ã€å¯æ‰©å±•æŸ¥è¯¢ä¸å¯é¢„æœŸçš„é›†ç¾¤è¿ç»´ã€‚</li>
<li>ç»“è®ºï¼šæŒ‰ Masterï¼ˆCoordinator/Overlordï¼‰/Queryï¼ˆBroker/Routerï¼‰/Dataï¼ˆHistorical/MiddleManagerï¼‰æ‹†åˆ†ï¼Œé…åˆ ZKã€å…ƒåº“ä¸ Deep Storageï¼Œä¼˜å…ˆæ²»ç† Segment ä¸ä»»åŠ¡è°ƒåº¦ã€‚</li>
<li>äº§å‡ºï¼šæ¶æ„è¦ç‚¹æ¸…å•ã€ç‰ˆæœ¬/ä¾èµ–çŸ©é˜µï¼ˆå¾…ä½ ç¡®è®¤ï¼‰ã€å¸¸è§æ•…éšœå®šä½ä¸ä¿®å¤é€ŸæŸ¥å¡ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d816449f9b75462fa544136705b61f01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763862823&amp;x-signature=6smXSCuEfiknlQz5K3txjxD6Gxw%3D" alt="å¤§æ•°æ®-154 Apache Druid æ¶æ„ä¸ç»„ä»¶èŒè´£å…¨è§£æ ç‰ˆæœ¬æ¶æ„ï¼šCoordinator/Overlord/Historical å®æˆ˜" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/976bb980f8a34547b140d96fee19d86c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763862823&amp;x-signature=ucfJP7y19e4QbsAIf4Lz3WFaVSE%3D" alt="Apache Druid" loading="lazy"/></p>
<h2 data-id="heading-1">åŸºç¡€æ¶æ„</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc7dc103ccb44197aca947eb6367b5d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763862823&amp;x-signature=%2BQjmzMXVONpj3rLbSvuiYwxNSvE%3D" alt="Druid åŸºç¡€æ¶æ„" loading="lazy"/></p>
<h3 data-id="heading-2">Coordinator Node</h3>
<p>Druidçš„Coordinatorç»„ä»¶ä¸»è¦è´Ÿè´£é›†ç¾¤ä¸­å†å²èŠ‚ç‚¹(Historical Node)çš„æ•°æ®è´Ÿè½½å‡è¡¡å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚å…·ä½“æ¥è¯´ï¼Œå®ƒçš„æ ¸å¿ƒèŒè´£åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li>
<p><strong>æ•°æ®è´Ÿè½½å‡è¡¡</strong>ï¼š</p>
<ul>
<li>ç›‘æ§å„å†å²èŠ‚ç‚¹çš„è´Ÿè½½æƒ…å†µ</li>
<li>æ ¹æ®é…ç½®çš„å‡è¡¡ç­–ç•¥åœ¨èŠ‚ç‚¹é—´è¿ç§»Segment</li>
<li>ç¡®ä¿æ•°æ®å‡åŒ€åˆ†å¸ƒï¼Œé¿å…æŸäº›èŠ‚ç‚¹è¿‡è½½</li>
<li>å¤„ç†æ–°åŠ å…¥æˆ–å¤±æ•ˆèŠ‚ç‚¹åçš„æ•°æ®é‡åˆ†å¸ƒ</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼š</p>
<ul>
<li>æŒ‰ç…§é¢„å…ˆå®šä¹‰çš„è§„åˆ™(Rule)ç®¡ç†æ•°æ®</li>
<li>åè°ƒæ–°æ•°æ®çš„åŠ è½½æµç¨‹</li>
<li>å®šæœŸæ£€æŸ¥å¹¶å¸è½½è¿‡æœŸæ•°æ®</li>
<li>æ ¹æ®éœ€è¦å¤åˆ¶é‡è¦æ•°æ®ä»¥æé«˜å¯ç”¨æ€§</li>
<li>æ‰§è¡Œæ•°æ®çš„å†·çƒ­åˆ†å±‚ç­–ç•¥</li>
</ul>
</li>
</ol>
<p>Coordinatorçš„è¿è¡Œæ˜¯å‘¨æœŸæ€§çš„ï¼Œå…¶æ‰§è¡Œé—´éš”ç”±druid.coordinator.periodå‚æ•°æ§åˆ¶ï¼Œé»˜è®¤å€¼ä¸º60000æ¯«ç§’(60ç§’)ã€‚æ¯æ¬¡è¿è¡Œæ—¶ï¼ŒCoordinatorä¼šï¼š</p>
<ol>
<li>
<p><strong>é›†ç¾¤çŠ¶æ€åŒæ­¥</strong>ï¼š</p>
<ul>
<li>ç»´æŒä¸ZooKeeperçš„æŒä¹…è¿æ¥</li>
<li>å®æ—¶è·å–é›†ç¾¤æ‹“æ‰‘å’ŒèŠ‚ç‚¹çŠ¶æ€ä¿¡æ¯</li>
<li>ç›‘æ§å†å²èŠ‚ç‚¹çš„åŠ å…¥ã€ç¦»å¼€æˆ–æ•…éšœæƒ…å†µ</li>
</ul>
</li>
<li>
<p><strong>å…ƒæ•°æ®ç®¡ç†</strong>ï¼š</p>
<ul>
<li>è¿æ¥é…ç½®çš„å…ƒæ•°æ®åº“(é€šå¸¸æ˜¯MySQLæˆ–PostgreSQL)</li>
<li>è¯»å–å’Œç»´æŠ¤æ‰€æœ‰Segmentçš„å…ƒä¿¡æ¯</li>
<li>è·å–å’Œå¤„ç†æ•°æ®ç®¡ç†è§„åˆ™(Rule)é…ç½®</li>
<li>è®°å½•Segmentçš„åˆ†å¸ƒå’ŒçŠ¶æ€å˜æ›´</li>
</ul>
</li>
<li>
<p><strong>å†³ç­–æ‰§è¡Œ</strong>ï¼š</p>
<ul>
<li>æ ¹æ®è§„åˆ™å’Œå½“å‰çŠ¶æ€ç”Ÿæˆæ•°æ®ç®¡ç†è®¡åˆ’</li>
<li>å‘å†å²èŠ‚ç‚¹ä¸‹å‘åŠ è½½/å¸è½½æŒ‡ä»¤</li>
<li>åè°ƒèŠ‚ç‚¹é—´çš„æ•°æ®è¿ç§»æ“ä½œ</li>
<li>å¤„ç†æ•°æ®å¤åˆ¶å’Œå‡è¡¡çš„è¯·æ±‚</li>
</ul>
</li>
</ol>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒCoordinatorçš„è¿™äº›åŠŸèƒ½ç¡®ä¿äº†Druidé›†ç¾¤èƒ½å¤Ÿï¼š</p>
<ul>
<li>è‡ªåŠ¨é€‚åº”å·¥ä½œè´Ÿè½½å˜åŒ–</li>
<li>ä¼˜é›…å¤„ç†èŠ‚ç‚¹æ‰©å®¹æˆ–æ•…éšœ</li>
<li>æŒ‰éœ€ä¿ç•™æœ‰ä»·å€¼çš„å†å²æ•°æ®</li>
<li>é«˜æ•ˆåˆ©ç”¨é›†ç¾¤å­˜å‚¨èµ„æº</li>
</ul>
<h3 data-id="heading-3">Overlord Node</h3>
<p>è¿›ç¨‹ç›‘è§†MiddleManagerè¿›ç¨‹ï¼Œå¹¶ä¸”æ˜¯Druidæ•°æ®æ‘„å…¥çš„ä¸»èŠ‚ç‚¹ï¼Œè´Ÿè´£å°†æå–ä»»åŠ¡åˆ†é…ç»™MiddleManagerså¹¶åè°ƒSegmentå‘å¸ƒï¼ŒåŒ…æ‹¬æ¥å—ã€æ‹†è§£ã€åˆ†é…Taskï¼Œä»¥åŠåˆ›å»ºTaskç›¸å…³çš„é”ï¼Œå¹¶è¿”å›Taskçš„çŠ¶æ€ã€‚</p>
<h3 data-id="heading-4">Historical Node</h3>
<p>åŠ è½½ç”Ÿæˆå¥½çš„æ•°æ®æ–‡ä»¶ï¼Œä»¥ä¾›æ•°æ®æŸ¥è¯¢ã€‚Historical Nodeæ˜¯æ•´ä¸ªé›†ç¾¤æŸ¥è¯¢æ€§èƒ½çš„æ ¸å¿ƒæ‰€åœ¨ï¼ŒHistoricalä¼šæ‰¿æ‹…ç»å¤§éƒ¨åˆ†çš„SegmentæŸ¥è¯¢ã€‚</p>
<ul>
<li>Historical è¿›ç¨‹ä» Deep Storage ä¸­ä¸‹è½½ Segmentï¼Œå¹¶å“åº”æœ‰å…³è¿™äº›Segmentçš„æŸ¥è¯¢è¯·æ±‚ï¼ˆè¿™äº›è¯·æ±‚æ¥è‡ªBrokerè¿›ç¨‹ï¼‰</li>
<li>Historical è¿›ç¨‹ä¸å¤„ç†å†™å…¥è¯·æ±‚</li>
<li>Historical è¿›ç¨‹é‡‡ç”¨äº†æ— å…±äº«æ¶æ„è®¾è®¡ï¼Œå®ƒçŸ¥é“å¦‚ä½•å»åŠ è½½å’Œåˆ é™¤ Segmentï¼Œä»¥åŠå¦‚ä½•åŸºäº Segment æ¥å“åº”æŸ¥è¯¢ã€‚å³ä¾¿åº•å±‚çš„æ·±åº¦å­˜å‚¨æ— æ³•æ­£å¸¸å·¥ä½œï¼ŒHistorical è¿›ç¨‹è¿˜æ˜¯èƒ½é’ˆå¯¹å…¶å·²åŒæ­¥çš„ Segmentsï¼Œæ­£å¸¸æä¾›æŸ¥è¯¢æœåŠ¡ã€‚</li>
<li>åº•å±‚çš„æ·±åº¦å­˜å‚¨æ— æ³•æ­£å¸¸å·¥ä½œï¼ŒHistoricalè¿›ç¨‹è¿˜æ˜¯èƒ½é’ˆå¯¹å…¶å·²åŒæ­¥çš„ Segmentsï¼Œæ­£å¸¸æä¾›æŸ¥è¯¢æœåŠ¡ã€‚</li>
</ul>
<h3 data-id="heading-5">MiddleManager Node</h3>
<p>åŠæ—¶æ‘„å…¥å®æ—¶æ•°æ®ï¼Œç”ŸæˆSegmentæ•°æ®æ–‡ä»¶</p>
<ul>
<li>MiddleManager è¿›ç¨‹æ˜¯æ‰§è¡Œæäº¤ä»»åŠ¡çš„å·¥ä½œèŠ‚ç‚¹ï¼ŒMiddleManagerså°†ä»»åŠ¡è½¬å‘ç»™åœ¨ä¸åŒJVMä¸­è¿è¡Œçš„Peonè¿›ç¨‹</li>
<li>MiddleManagerã€Peonã€Taskçš„å¯¹åº”å…³ç³»æ˜¯ï¼šæ¯ä¸ªPeonè¿›ç¨‹ä¸€æ¬¡åªèƒ½è¿è¡Œä¸€ä¸ªTaskä»»åŠ¡ï¼Œä½†ä¸€ä¸ªMiddleManagerå´å¯ä»¥ç®¡ç†å¤šä¸ªPeonè¿›ç¨‹</li>
</ul>
<h3 data-id="heading-6">Broker Node</h3>
<p>æ¥æ”¶å®¢æˆ·ç«¯æŸ¥è¯¢è¯·æ±‚ï¼Œå¹¶å°†è¿™äº›æŸ¥è¯¢è½¬å‘ç»™ Histo å’Œ MiddleManagersã€‚å½“Brokersä»è¿™äº›å­æŸ¥è¯¢ä¸­æ”¶åˆ°ç»“æœæ—¶ï¼Œå®ƒä»¬ä¼šåˆå¹¶è¿™äº›ç»“æœå¹¶å°†å®ƒä»¬è¿”å›ç»™è°ƒç”¨è€…ã€‚</p>
<ul>
<li>Broker èŠ‚ç‚¹è´Ÿè´£è½¬å‘ClientæŸ¥è¯¢è¯·æ±‚çš„</li>
<li>Broker é€šè¿‡ ZooKeeper èƒ½å¤ŸçŸ¥é“å“ªä¸ª Segment åœ¨å“ªäº›èŠ‚ç‚¹ä¸Šï¼Œå°†æŸ¥è¯¢è½¬å‘ç»™ç›¸åº”èŠ‚ç‚¹</li>
<li>æ‰€æœ‰èŠ‚ç‚¹è¿”å›æ•°æ®åï¼ŒBrokerä¼šæ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®è¿›è¡Œåˆå¹¶ï¼Œç„¶åè¿”å›ç»™Client</li>
</ul>
<h3 data-id="heading-7">Router Node</h3>
<p>ï¼ˆå¯é€‰ï¼‰
è´Ÿè´£å°†è·¯ç”±è½¬å‘åˆ°Brokerã€Coordinatorã€Overlords</p>
<ul>
<li>Routerè¿›ç¨‹å¯ä»¥åœ¨ Brokerã€Overlordsã€Coordinatorè¿›ç¨‹ä¹‹ä¸Šï¼Œæä¾›ä¸€å±‚ç»Ÿä¸€çš„APIç½‘å…³</li>
<li>Routerè¿›ç¨‹æ˜¯å¯é€‰çš„ï¼Œå¦‚æœé›†ç¾¤æ•°æ®è§„æ¨¡å·²ç»åˆ°è¾¾äº†TBçº§åˆ«ï¼Œéœ€è¦è€ƒè™‘å¯åŠ¨ï¼ˆdruid.router.managerProxy.enable=trueï¼‰</li>
<li>ä¸€æ—¦é›†ç¾¤è§„æ¨¡è¾¾åˆ°ä¸€å®šæ•°é‡çº§ï¼Œé‚£ä¹ˆå‘ç”Ÿæ•…éšœçš„æ¦‚ç‡å°±ä¼šå˜å¾—ä¸å®¹å¿½è§†ï¼Œè€ŒRouteræ”¯æŒå°†è¯·æ±‚åªå‘é€ç»™å¥åº·çš„èŠ‚ç‚¹ï¼Œé¿å…è¯·æ±‚å¤±è´¥ã€‚</li>
<li>åŒæ—¶ï¼ŒæŸ¥è¯¢çš„å“åº”æ—¶é—´å’Œèµ„æºæ¶ˆè€—ï¼Œä¹Ÿä¼šéšç€æ•°æ®é‡çš„å¢é•¿è€Œå˜é«˜ï¼Œè€ŒRouteræ”¯æŒè®¾ç½®æŸ¥è¯¢çš„ä¼˜å…ˆçº§å’Œè´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œé¿å…äº†å¤§æŸ¥è¯¢é€ æˆçš„é˜Ÿåˆ—å †ç§¯æˆ–æŸ¥è¯¢çƒ­ç‚¹ç­‰é—®é¢˜</li>
</ul>
<h3 data-id="heading-8">å¦‚ä½•åˆ†ç±»</h3>
<p>Druidçš„è¿›ç¨‹å¯ä»¥è¢«ä»»æ„éƒ¨ç½²ï¼Œä¸ºäº†ç†è§£ä¸éƒ¨ç½²ç»„ç»‡æ–¹ä¾¿ï¼Œè¿™äº›è¿›ç¨‹åˆ†ä¸ºäº†ä¸‰ç±»ï¼š</p>
<ul>
<li>Masterï¼šCoordinatorã€Overlord è´Ÿè´£æ•°æ®å¯ç”¨æ€§å’Œæ‘„å–</li>
<li>Queryï¼šBrokerã€Router è´Ÿè´£å¤„ç†å¤–éƒ¨è¯·æ±‚</li>
<li>Dataï¼šHistoricalã€MiddleManagerï¼Œè´Ÿè´£å®é™…çš„Ingestionè´Ÿè½½å’Œæ•°æ®å­˜å‚¨</li>
</ul>
<h3 data-id="heading-9">å…¶ä»–ä¾èµ–</h3>
<p>Deep Storage
å­˜æ”¾ç”Ÿæˆçš„ Segment æ•°æ®æ–‡ä»¶ï¼Œå¹¶ä¾›å†å²æœåŠ¡å™¨ä¸‹è½½ï¼Œå¯¹äºå•èŠ‚ç‚¹é›†ç¾¤å¯ä»¥æ˜¯æœ¬åœ°ç£ç›˜ï¼Œè€Œå¯¹äºåˆ†å¸ƒå¼é›†ç¾¤ä¸€èˆ¬æ˜¯HDFSã€‚</p>
<ul>
<li>Druidä½¿ç”¨ Deep Storageæ¥åšæ•°æ®çš„å¤‡ä»½ï¼Œä¹Ÿä½œä¸ºDruidè¿›ç¨‹ä¹‹é—´åœ¨åå°ä¼ è¾“æ•°æ®çš„ä¸€ç§æ–¹å¼</li>
<li>å½“ç›¸åº”æŸ¥è¯¢æ—¶ï¼ŒHistoricalé¦–å…ˆä»æœ¬åœ°ç£ç›˜è¯»å–é¢„å–çš„æ®µï¼Œè¿™ä¹Ÿæ„å‘³ç€éœ€è¦åœ¨Deep Storageå’ŒåŠ è½½çš„æ•°æ®Historicalä¸­æ‹¥æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´ã€‚</li>
</ul>
<h4 data-id="heading-10">Metadata Storage</h4>
<p>å­˜å‚¨Duridé›†ç¾¤çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œå¦‚Segmentçš„ç›¸å…³ä¿¡æ¯ï¼Œä¸€èˆ¬ä½¿ç”¨MySQLã€‚<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a63688b05b0f4de1803e5e76a75012cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763862823&amp;x-signature=Lq5BfnQUfsJsCwvf5iOlzCF4HSk%3D" alt="Metadata Storage" loading="lazy"/></p>
<h4 data-id="heading-11">ZooKeeper</h4>
<p>Druid é›†ç¾¤é€šè¿‡ä»¥ä¸‹å‡ ä¸ªå…³é”®æœºåˆ¶æ¥ç¡®ä¿é›†ç¾¤å†…å„èŠ‚ç‚¹çš„åè°ƒå·¥ä½œï¼š</p>
<h5 data-id="heading-12">1. Coordinator èŠ‚ç‚¹çš„ Leader é€‰ä¸¾æœºåˆ¶</h5>
<ul>
<li><strong>é€‰ä¸¾åè®®</strong>ï¼šé‡‡ç”¨åŸºäº Zookeeper çš„ Leader é€‰ä¸¾ç®—æ³•</li>
<li><strong>èŒè´£èŒƒå›´</strong>ï¼š
<ul>
<li>ç›‘æ§ Historical èŠ‚ç‚¹çš„ Segment åŠ è½½çŠ¶æ€</li>
<li>åè°ƒ Segment åœ¨é›†ç¾¤ä¸­çš„åˆ†å¸ƒ</li>
<li>ç®¡ç† Segment çš„åŠ è½½å’Œä¸¢å¼ƒç­–ç•¥</li>
</ul>
</li>
<li><strong>é€‰ä¸¾è¿‡ç¨‹</strong>ï¼šå½“å½“å‰ Leader ä¸‹çº¿æ—¶ï¼Œæ‰€æœ‰ Coordinator èŠ‚ç‚¹ä¼šå‚ä¸æ–°ä¸€è½®é€‰ä¸¾ï¼Œæœ€å…ˆåœ¨ Zookeeper ä¸Šåˆ›å»ºä¸´æ—¶èŠ‚ç‚¹çš„æˆä¸ºæ–° Leader</li>
</ul>
<h5 data-id="heading-13">2. Historical èŠ‚ç‚¹å‘å¸ƒ Segment çš„åè®®</h5>
<ul>
<li><strong>å‘å¸ƒæµç¨‹</strong>ï¼š
<ol>
<li>Historical èŠ‚ç‚¹å®Œæˆ Segment åŠ è½½åï¼Œä¼šåœ¨å…ƒæ•°æ®å­˜å‚¨ä¸­æ›´æ–°çŠ¶æ€</li>
<li>å‘ Coordinator å‘é€ Segment å¯ç”¨é€šçŸ¥</li>
<li>Coordinator éªŒè¯å…ƒæ•°æ®ä¸€è‡´æ€§åï¼Œå°†è¯¥ Segment æ ‡è®°ä¸ºå¯æŸ¥è¯¢</li>
</ol>
</li>
<li><strong>å®¹é”™æœºåˆ¶</strong>ï¼šå¦‚æœå‘å¸ƒè¿‡ç¨‹ä¸­å¤±è´¥ï¼ŒSegment ä¼šè¢«æ ‡è®°ä¸ºå¤±è´¥çŠ¶æ€ï¼Œå¹¶ç”± Coordinator å®‰æ’é‡è¯•</li>
</ul>
<h5 data-id="heading-14">3. Coordinator å’Œ Historical é—´çš„ Segment ç®¡ç†åè®®</h5>
<ul>
<li><strong>Load Segment æµç¨‹</strong>ï¼š
<ol>
<li>Coordinator æ ¹æ®è´Ÿè½½å‡è¡¡ç­–ç•¥é€‰æ‹©ç›®æ ‡ Historical èŠ‚ç‚¹</li>
<li>å‘é€ HTTP è¯·æ±‚é€šçŸ¥ Historical åŠ è½½æŒ‡å®š Segment</li>
<li>Historical ä»æ·±åº¦å­˜å‚¨ä¸‹è½½ Segment æ•°æ®å¹¶åŠ è½½åˆ°å†…å­˜</li>
</ol>
</li>
<li><strong>Drop Segment æµç¨‹</strong>ï¼š
<ol>
<li>Coordinator å‘é€åˆ é™¤æŒ‡ä»¤ç»™ Historical</li>
<li>Historical ä»å†…å­˜å¸è½½ Segment å¹¶åˆ é™¤æœ¬åœ°å‰¯æœ¬</li>
<li>æ›´æ–°å…ƒæ•°æ®çŠ¶æ€</li>
</ol>
</li>
</ul>
<h5 data-id="heading-15">4. Overlord èŠ‚ç‚¹çš„ Leader é€‰ä¸¾æœºåˆ¶</h5>
<ul>
<li><strong>é€‰ä¸¾ç‰¹ç‚¹</strong>ï¼šä¸ Coordinator ç±»ä¼¼ï¼ŒåŒæ ·åŸºäº Zookeeper</li>
<li><strong>èŒè´£èŒƒå›´</strong>ï¼š
<ul>
<li>æ¥æ”¶å’Œå¤„ç†ä»»åŠ¡æäº¤è¯·æ±‚</li>
<li>åˆ†é…ä»»åŠ¡ç»™ MiddleManager</li>
<li>ç›‘æ§ä»»åŠ¡æ‰§è¡ŒçŠ¶æ€</li>
</ul>
</li>
<li><strong>æ•…éšœè½¬ç§»</strong>ï¼šå½“ Leader å¤±æ•ˆæ—¶ï¼Œæ–° Leader ä¼šæ¥ç®¡æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡çŠ¶æ€</li>
</ul>
<h5 data-id="heading-16">5. Overlord å’Œ MiddleManager é—´çš„ä»»åŠ¡ç®¡ç†åè®®</h5>
<ul>
<li><strong>ä»»åŠ¡åˆ†é…æµç¨‹</strong>ï¼š
<ol>
<li>Overlord æ¥æ”¶ä»»åŠ¡æäº¤è¯·æ±‚</li>
<li>æ ¹æ® MiddleManager çš„è´Ÿè½½æƒ…å†µé€‰æ‹©æ‰§è¡ŒèŠ‚ç‚¹</li>
<li>é€šè¿‡ HTTP æ¥å£å°†ä»»åŠ¡æè¿°å‘é€ç»™ MiddleManager</li>
</ol>
</li>
<li><strong>çŠ¶æ€åŒæ­¥æœºåˆ¶</strong>ï¼š
<ul>
<li>MiddleManager å®šæœŸå‘ Overlord å‘é€å¿ƒè·³å’Œä»»åŠ¡çŠ¶æ€æ›´æ–°</li>
<li>Overlord ç›‘æ§ä»»åŠ¡è¿›åº¦ï¼Œå¿…è¦æ—¶è¿›è¡Œé‡è¯•æˆ–é‡æ–°è°ƒåº¦</li>
</ul>
</li>
<li><strong>å®¹é”™å¤„ç†</strong>ï¼šå½“ MiddleManager å¤±è”æ—¶ï¼ŒOverlord ä¼šå°†ä»»åŠ¡é‡æ–°åˆ†é…ç»™å…¶ä»–å¯ç”¨èŠ‚ç‚¹</li>
</ul>
<p>è¿™äº›åè°ƒæœºåˆ¶å…±åŒç¡®ä¿äº† Druid é›†ç¾¤åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„å¯é è¿è¡Œå’Œæ•°æ®ä¸€è‡´æ€§ã€‚</p>
<h2 data-id="heading-17">æ¶æ„æ¼”è¿›</h2>
<h3 data-id="heading-18">åˆå§‹ç‰ˆæœ¬~0.6.0</h3>
<p>2012-2013å¹´
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3f65a9edec342d581b6f5eb353935d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763862823&amp;x-signature=Vej8frwCB6nVPN3wYyPIm0HsNGI%3D" alt="Druid 0.6.0" loading="lazy"/></p>
<h3 data-id="heading-19">0.7.0~0.12.0</h3>
<p>2013å¹´-2018å¹´</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0d597329cd0d42fa9a77b95aead03a68~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763862823&amp;x-signature=1B8WGEIadhkCWr89HCpAoyMXOyI%3D" alt="Druid 0.7.0" loading="lazy"/></p>
<h3 data-id="heading-20">é›†ç¾¤ç®¡ç†</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3aeb2f0018924f7fbecfc03e16e855e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763862823&amp;x-signature=fDN9IHre%2B3WnZs3ee30OTbe3B8E%3D" alt="Druid é›†ç¾¤ç®¡ç†" loading="lazy"/></p>
<h3 data-id="heading-21">0.13.0~å½“å‰ç‰ˆæœ¬</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61d34c4415c947619daaa83875cb91b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763862823&amp;x-signature=FVRrcZFl%2FU33SAu4EL%2FHef%2BaNBM%3D" alt="Druid 0.13.0" loading="lazy"/></p>
<h4 data-id="heading-22">Lambdaæ¶æ„</h4>
<p>ä»å¤§çš„æ¶æ„ä¸Šçœ‹ï¼ŒDruidæ˜¯ä¸€ä¸ªLambdaæ¶æ„ã€‚
Lambdaæ¶æ„æ˜¯ç”±Stormåç€Nathan Marzæå‡ºçš„ä¸€ä¸ªå®æ—¶å¤§æ•°æ®å¤„ç†æ¡†æ¶ï¼ŒLambdaæ¶æ„è®¾è®¡æ˜¯ä¸ºäº†å¤„ç†å¤§è§„æ¨¡æ•°æ®æ—¶ï¼ŒåŒæ—¶å‘æŒ¥æµå¤„ç†å’Œæ‰¹å¤„ç†çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>é€šè¿‡æ‰¹å¤„ç†æä¾›å…¨é¢ã€å‡†ç¡®çš„æ•°æ®</li>
<li>é€šè¿‡æµå¤„ç†æä¾›ä½å»¶è¿Ÿçš„æ•°æ®
ä»è€Œè¾¾åˆ°å¹³è¡¡å»¶è¿Ÿã€ååé‡å’Œå®¹é”™æ€§çš„ç›®çš„ï¼Œä¸ºäº†æ»¡è¶³ä¸‹æ¸¸çš„åŠæ—¶æŸ¥è¯¢ï¼Œæ‰¹å¤„ç†å’Œæµå¤„ç†çš„ç»“æœä¼šåˆå¹¶ã€‚</li>
</ul>
<p>Lambdaæ¶æ„åŒ…å«ä¸‰å±‚ï¼šBatchLayerã€SpeedLayerã€Serving Layer</p>
<ul>
<li>BatchLayerï¼šæ‰¹å¤„ç†å±‚ï¼Œå¯¹ç¦»çº¿çš„å†å²æ•°æ®è¿›è¡Œé¢„è®¡ç®—ï¼Œä¸ºäº†ä¸‹æ¸¸èƒ½å¤Ÿå¿«é€ŸæŸ¥è¯¢æƒ³è¦çš„ç»“æœï¼Œç”±äºæ‰¹å¤„ç†åŸºäºå®Œæˆçš„å†å²æ•°æ®é›†ï¼Œå‡†ç¡®æ€§å¯ä»¥å¾—åˆ°ä¿è¯ï¼Œæ‰¹å¤„ç†å±‚å¯ä»¥ç”¨Hadoopã€Sparkã€Flinkç­‰æ¡†æ¶è®¡ç®—ã€‚</li>
<li>SpeedLayerï¼šåŠ é€Ÿå¤„ç†å±‚ï¼Œå¤„ç†å®æ—¶çš„å¢é‡æ•°æ®ï¼Œè¿™ä¸€å±‚é‡ç‚¹åœ¨äºä½å»¶è¿Ÿï¼ŒåŠ é€Ÿå±‚çš„æ•°æ®ä¸å¦‚æ‰¹å¤„ç†å±‚é‚£æ ·å®Œæ•´å’Œå‡†ç¡®ï¼Œä½†æ˜¯å¯ä»¥å¡«è¡¥æ‰¹å¤„ç†é«˜å»¶è¿Ÿå¯¼è‡´çš„æ•°æ®ç©ºç™½ã€‚åŠ é€Ÿå±‚å¯ä»¥ä½¿ç”¨Stormã€Spark Streamingå’ŒFlinkç­‰æ¡†æ¶è®¡ç®—ã€‚</li>
<li>ServingLayerï¼šåˆå¹¶å±‚ï¼Œå°†å†å²æ•°æ®ã€å®æ—¶æ•°æ®åˆå¹¶åœ¨ä¸€èµ·ï¼Œè¾“å‡ºåˆ°æ•°æ®åº“æˆ–è€…å…¶ä»–ä»‹è´¨ï¼Œä¾›ä¸‹æ¸¸åˆ†æ</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8894735527a14986826d8568b1603202~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q2m5a2Q5bq3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763862823&amp;x-signature=XOPIRv5eUYpi7FrLXlPD6dELkz4%3D" alt="Druid æ¯ä¸€å±‚çš„æ¶æ„" loading="lazy"/></p>
<h3 data-id="heading-23">æµå¼æ•°æ®é“¾è·¯</h3>
<p>Raw Data - Kafka - Streaming Processorï¼ˆOptional å®æ—¶ETLï¼‰-  Kafkaï¼ˆOptionalï¼‰- Druid - Application/User</p>
<h3 data-id="heading-24">æ‰¹å¤„ç†æ•°æ®é“¾è·¯</h3>
<p>Raw data - Kafkaï¼ˆOptionalï¼‰ - HDFS - ETL Processï¼ˆOptionalï¼‰- Druid - Application/User</p>
<h2 data-id="heading-25">é”™è¯¯é€ŸæŸ¥</h2>



























































<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹å› </th><th>å®šä½</th><th>ä¿®å¤</th></tr></thead><tbody><tr><td>æŸ¥è¯¢æ…¢/æŠ–åŠ¨/çƒ­ç‚¹æ®µ</td><td>Segment è¿‡ç¢ã€ç¼º compactionï¼›Broker åˆå¹¶å¼€é”€å¤§ï¼›ç¼“å­˜å‘½ä¸­ä½</td><td>æŸ¥çœ‹ Broker/Historical æŒ‡æ ‡ï¼ˆmerge/CPU/ç¼“å­˜å‘½ä¸­ï¼‰ã€segment å¤§å°ä¸æ•°é‡</td><td>å¯ç”¨/ä¼˜åŒ– compactionï¼Œæ§åˆ¶ segmentGranularityï¼›è°ƒä¼˜ Broker çº¿ç¨‹ä¸æŸ¥è¯¢å¹¶å‘ï¼›å¼€å¯/ä¼˜åŒ–ç¼“å­˜ç­–ç•¥</td></tr><tr><td>Segment æ— æ³•åŠ è½½/â€œä¸¢ç‰‡â€</td><td>Deep Storage è¯»å†™/æƒé™é—®é¢˜ï¼›Coordinator è§„åˆ™è§¦å‘ Drop</td><td>Coordinator åŠ¨ä½œæ—¥å¿—ã€Historical æ—¥å¿—ä¸ Deep Storage ACL</td><td>ä¿®æ­£ load/drop è§„åˆ™ä¸ ACLï¼›é‡è¯•åŠ è½½ï¼›æ ¡éªŒå‰¯æœ¬ä¸å¯ç”¨ç©ºé—´</td></tr><tr><td>å®æ—¶æ‘„å…¥å †ç§¯</td><td>MiddleManager slot/å†…å­˜ä¸è¶³ï¼›Kafka backlog å¢é•¿</td><td>Overlord ä»»åŠ¡çŠ¶æ€ã€Peon æ—¥å¿—ã€Kafka lag</td><td>æ‰©å®¹ MiddleManager/æé«˜ taskSlots ä¸å†…å­˜ï¼›è°ƒå° segment é¢—ç²’åº¦ï¼›å¢åŠ å¹¶å‘/é™é€Ÿ</td></tr><tr><td>Leader é¢‘ç¹åˆ‡æ¢</td><td>ZK æŠ–åŠ¨/ä¼šè¯è¿‡æœŸ</td><td>ZK æ—¥å¿—ã€ä¼šè¯è¿‡æœŸè®¡æ•°ã€ç½‘ç»œæŠ–åŠ¨æ’æŸ¥</td><td>æé«˜ä¼šè¯è¶…æ—¶ï¼›ç¨³å®š ZKï¼ˆä¸‰/äº”èŠ‚ç‚¹å¥‡æ•°ï¼‰ï¼›éš”ç¦»å™ªå£°ç½‘ç»œ</td></tr><tr><td>æŸ¥è¯¢ç»“æœç¼ºå¤±/ä¸ä¸€è‡´</td><td>Segment æœªå‘å¸ƒ/æœªæ ‡è®°å¯æŸ¥è¯¢ï¼›æ™šåˆ°æ•°æ®æœªå¹¶å…¥</td><td>å…ƒåº“çŠ¶æ€ã€Coordinator è§„åˆ™ã€æ•°æ®æ—¶é—´çª—å£</td><td>æ ¡å‡†å‘å¸ƒæµç¨‹ï¼›é…ç½® lateMessage å¤„ç†ä¸çª—å£ï¼›è¡¥è·‘/é‡ç®—å¹¶ compaction</td></tr><tr><td>Historical ç£ç›˜æ‰“æ»¡</td><td>æœ¬åœ°ç¼“å­˜æ— ä¸Šé™ï¼›å‰¯æœ¬æ•°/ä¿ç•™ç­–ç•¥ä¸å½“</td><td>ç£ç›˜ç›‘æ§ã€ç¼“å­˜ç›®å½•ä¸å‰¯æœ¬ç­–ç•¥</td><td>è®¾å®šç¼“å­˜ä¸Šé™ä¸æ¸…ç†ç­–ç•¥ï¼›æ”¶æ•›å‰¯æœ¬/ä¿ç•™è§„åˆ™ï¼›æ‰©å®¹ç£ç›˜/èŠ‚ç‚¹</td></tr><tr><td>ä»»åŠ¡é¢‘ç¹å¤±è´¥/é‡è¯•</td><td>Peon å†…å­˜ä¸è¶³ã€ä¾èµ– JAR/æƒé™é—®é¢˜</td><td>Peon GC/OOM æ—¥å¿—ã€å®¹å™¨é™åˆ¶ã€ä¾èµ–æ ¡éªŒ</td><td>ä¸Šè°ƒ Xmx/å®¹å™¨é™åˆ¶ï¼›ä¿®æ­£ä¾èµ–ä¸æƒé™ï¼›åˆ†è§£å¤§ä»»åŠ¡ï¼Œç¼©çŸ­çª—å£</td></tr><tr><td>Broker 502/è¶…æ—¶</td><td>ä¸‹æ¸¸èŠ‚ç‚¹æ…¢/ä¸å¯è¾¾ï¼›èšåˆè¶…æ—¶</td><td>Broker æ—¥å¿—ä¸ä¸‹æ¸¸å¥åº·æ£€æŸ¥</td><td>ä¸ºæ…¢æŸ¥è¯¢è®¾ç½®ä¸“ç”¨æ± /ä¼˜å…ˆçº§ï¼›é™æµä¸è¶…æ—¶åˆ†çº§ï¼›æ’é™¤æ•…éšœèŠ‚ç‚¹</td></tr></tbody></table>
<h2 data-id="heading-26">å…¶ä»–ç³»åˆ—</h2>
<h3 data-id="heading-27">ğŸš€ AIç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>AIç‚¼ä¸¹æ—¥å¿—-29 - å­—èŠ‚è·³åŠ¨ DeerFlow æ·±åº¦ç ”ç©¶æ¡†<em>æ–œä½“æ ·å¼</em>æ¶ ç§æœ‰éƒ¨ç½² æµ‹è¯•ä¸Šæ‰‹ æ¶æ„ç ”ç©¶</strong>ï¼ŒæŒç»­æ‰“é€ å®ç”¨AIå·¥å…·æŒ‡å—ï¼
<strong>AI-è°ƒæŸ¥ç ”ç©¶-108-å…·èº«æ™ºèƒ½ æœºå™¨äººæ¨¡å‹è®­ç»ƒå…¨æµç¨‹è¯¦è§£ï¼šä»é¢„è®­ç»ƒåˆ°å¼ºåŒ–å­¦ä¹ ä¸äººç±»åé¦ˆ</strong></p>
<h3 data-id="heading-28">ğŸ’» Javaç¯‡æŒç»­æ›´æ–°ä¸­ï¼ˆé•¿æœŸæ›´æ–°ï¼‰</h3>
<p><strong>Java-154 æ·±å…¥æµ…å‡º MongoDB ç”¨Javaè®¿é—® MongoDB æ•°æ®åº“ ä»ç¯å¢ƒæ­å»ºåˆ°CRUDå®Œæ•´ç¤ºä¾‹</strong>
MyBatis å·²å®Œç»“ï¼ŒSpring å·²å®Œç»“ï¼ŒNginxå·²å®Œç»“ï¼ŒTomcatå·²å®Œç»“ï¼Œåˆ†å¸ƒå¼æœåŠ¡æ­£åœ¨æ›´æ–°ï¼æ·±å…¥æµ…å‡ºåŠ©ä½ æ‰“ç‰¢åŸºç¡€ï¼</p>
<h3 data-id="heading-29">ğŸ“Š å¤§æ•°æ®æ¿å—å·²å®Œæˆå¤šé¡¹å¹²è´§æ›´æ–°ï¼ˆ300ç¯‡ï¼‰ï¼š</h3>
<p>åŒ…æ‹¬ Hadoopã€Hiveã€Kafkaã€Flinkã€ClickHouseã€Elasticsearch ç­‰äºŒåä½™é¡¹æ ¸å¿ƒç»„ä»¶ï¼Œè¦†ç›–ç¦»çº¿+å®æ—¶æ•°ä»“å…¨æ ˆï¼
<strong>å¤§æ•°æ®-278 Spark MLib - åŸºç¡€ä»‹ç» æœºå™¨å­¦ä¹ ç®—æ³• æ¢¯åº¦æå‡æ ‘ GBDTæ¡ˆä¾‹ è¯¦è§£</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é€šç”¨ä¼šè¯æ§åˆ¶æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7572408522439131171</link>    <guid>https://juejin.cn/post/7572408522439131171</guid>    <pubDate>2025-11-15T12:39:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572408522439131171" data-draft-id="7572453554331844608" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€šç”¨ä¼šè¯æ§åˆ¶æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-15T12:39:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Heo"/> <meta itemprop="url" content="https://juejin.cn/user/1410009035452887"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€šç”¨ä¼šè¯æ§åˆ¶æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1410009035452887/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Heo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T12:39:30.000Z" title="Sat Nov 15 2025 12:39:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä¼šè¯æ§åˆ¶æ¦‚å¿µ</h2>
<ul>
<li>ç›®çš„ï¼šåœ¨æ— çŠ¶æ€çš„ HTTP è¯·æ±‚é—´<strong>è¯†åˆ«/é‰´æƒç”¨æˆ·èº«ä»½</strong>å¹¶ç»´æŒç™»å½•çŠ¶æ€ã€‚</li>
<li>æ ¸å¿ƒé—®é¢˜ï¼šè°ä¿å­˜â€œç”¨æˆ·çŠ¶æ€â€ï¼Ÿï¼ˆæœåŠ¡å™¨ / å®¢æˆ·ç«¯ / ç¬¬ä¸‰æ–¹è®¤è¯æœåŠ¡å™¨ï¼‰ï¼Œä»¥åŠå¦‚ä½•å®‰å…¨åœ°åœ¨å¤šè¯·æ±‚é—´ä¼ é€’è¯¥å‡­è¯ï¼ˆCookie / Authorization headerï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-1">äºŒã€ä¼ ç»Ÿæ–¹æ¡ˆï¼šCookie + æœåŠ¡ç«¯ Session</h2>
<h3 data-id="heading-2">1) æµç¨‹</h3>
<ol>
<li>ç”¨æˆ·ç™»å½•ï¼Œåç«¯éªŒè¯å‡­è¯ï¼ˆç”¨æˆ·å/å¯†ç ï¼‰ã€‚</li>
<li>åç«¯åœ¨æœåŠ¡å™¨ç«¯åˆ›å»º sessionï¼ˆæ¯”å¦‚ <code>sessionId</code> å¯¹åº”çš„å¯¹è±¡å­˜åœ¨ Redis / DB / å†…å­˜ï¼‰ï¼Œå¹¶è¿”å› <code>Set-Cookie: sessionId=xxx; HttpOnly; Secure; SameSite=Lax; Path=/</code> å“åº”å¤´éƒ¨ä¿¡æ¯ã€‚</li>
<li>æµè§ˆå™¨è‡ªåŠ¨å¸¦ä¸Š Cookieï¼ˆåŒæºæˆ–æŒ‰ CORS é…ç½®å¸¦ä¸Š <code>credentials: 'include'</code>ï¼‰ï¼Œåç«¯æ ¹æ® <code>sessionId</code> åœ¨ session store æŸ¥åˆ°ç”¨æˆ·ä¿¡æ¯å¹¶æˆæƒã€‚</li>
</ol>
<h3 data-id="heading-3">2) ç¤ºä¾‹ï¼ˆExpress + express-session + Redisï¼‰</h3>
<p>åç«¯ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> session = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express-session'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">RedisStore</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'connect-redis'</span>)(session);
app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">session</span>({
  <span class="hljs-attr">store</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">RedisStore</span>({ <span class="hljs-attr">client</span>: redisClient }),
  <span class="hljs-attr">secret</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">SESSION_SECRET</span>,
  <span class="hljs-attr">name</span>: <span class="hljs-string">'sid'</span>,
  <span class="hljs-attr">resave</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">saveUninitialized</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">cookie</span>: {
    <span class="hljs-attr">httpOnly</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">secure</span>: <span class="hljs-literal">true</span>,      <span class="hljs-comment">// ç”Ÿäº§å¿…é¡» https</span>
    <span class="hljs-attr">sameSite</span>: <span class="hljs-string">'lax'</span>,   <span class="hljs-comment">// æˆ– 'strict' / 'none'ï¼ˆé…åˆè·¨åŸŸï¼‰</span>
    <span class="hljs-attr">maxAge</span>: <span class="hljs-number">24</span> * <span class="hljs-number">3600</span> * <span class="hljs-number">1000</span>
  }
}));
</code></pre>
<p>å‰ç«¯ï¼ˆfetchï¼‰ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/profile'</span>, { <span class="hljs-attr">credentials</span>: <span class="hljs-string">'include'</span> })
</code></pre>
<h3 data-id="heading-4">3) ä¼˜ç‚¹</h3>
<ul>
<li>ç®€å•æ˜ç¡®ï¼šåç«¯å®Œå…¨æ§åˆ¶ä¼šè¯ï¼ˆå¯ä»¥éšæ—¶åºŸå¼ƒ/ä¿®æ”¹ï¼‰ã€‚</li>
<li>æ”¯æŒæœåŠ¡ç«¯ä¼šè¯å¤±æ•ˆï¼ˆlogout ç«‹åˆ»ç”Ÿæ•ˆï¼‰ã€‚</li>
<li>æ˜“äºé›†æˆç»†ç²’åº¦æƒé™ã€ä¼šè¯ç»Ÿè®¡ä¸å®¡è®¡ï¼ˆå­˜ Redis çš„ session å¯åŒ…å«ç™»å½• IPã€è®¾å¤‡ä¿¡æ¯ç­‰ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-5">4) ç¼ºç‚¹</h3>
<ul>
<li><strong>æ°´å¹³æ‰©å±•</strong>éœ€å…±äº« session storeï¼ˆRedisï¼‰ã€‚</li>
<li>Session å­˜å‚¨å’ŒæŸ¥è¯¢å¸¦æ¥é¢å¤–å»¶è¿Ÿä¸æˆæœ¬ã€‚</li>
<li>è·¨åŸŸåœºæ™¯å¤æ‚ï¼šéœ€è¦æ­£ç¡®é…ç½® <code>Access-Control-Allow-Credentials</code>ã€<code>Set-Cookie</code> çš„ <code>SameSite=None; Secure</code> ç­‰ï¼Œé¿å…å®‰å…¨é—®é¢˜ã€‚</li>
</ul>
<h2 data-id="heading-6">ä¸‰ã€JWTï¼ˆJSON Web Tokenï¼‰æ–¹æ¡ˆæ¦‚è¿°</h2>
<h3 data-id="heading-7">1) JWT çš„åŸºæœ¬æ€æƒ³ï¼ˆæ— çŠ¶æ€ tokenï¼‰</h3>
<ul>
<li>åç«¯å‘æ”¾ä¸€ä¸ªç­¾åçš„ tokenï¼ˆé€šå¸¸æ˜¯ Access Tokenï¼‰ï¼ŒåŒ…å«ç”¨æˆ· idã€åˆ°æœŸæ—¶é—´ç­‰ã€‚</li>
<li>å‰ç«¯æºå¸¦ tokenï¼ˆé€šå¸¸æ”¾åœ¨ Authorization header æˆ–è€…æ”¾å…¥ HttpOnly cookieï¼‰å‘åç«¯è¯·æ±‚ï¼›åç«¯ä¸æŸ¥ session storeï¼Œè€Œæ˜¯ç›´æ¥éªŒè¯ token çš„ç­¾åä¸æœ‰æ•ˆæœŸï¼Œè‹¥é€šè¿‡åˆ™é‰´æƒæˆåŠŸã€‚</li>
</ul>
<p>JWT å…¸å‹æ ¼å¼ï¼š<code>header.payload.signature</code>ï¼ˆBase64 ç¼–ç ï¼‰</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> jwt = <span class="hljs-built_in">require</span>(<span class="hljs-string">'jsonwebtoken'</span>);
<span class="hljs-keyword">const</span> accessToken = jwt.<span class="hljs-title function_">sign</span>({ <span class="hljs-attr">uid</span>: xxx }, process.<span class="hljs-property">env</span>.<span class="hljs-property">JWT_SECRET</span>, { <span class="hljs-attr">expiresIn</span>: <span class="hljs-string">'15m'</span> });
<span class="hljs-keyword">const</span> payload = jwt.<span class="hljs-title function_">verify</span>(accessToken, process.<span class="hljs-property">env</span>.<span class="hljs-property">JWT_SECRET</span>);
</code></pre>
<h3 data-id="heading-8">2) å¸¸è§æ‹“å±•</h3>
<ul>
<li>â€‹**çŸ­æœŸ Access Tokenï¼ˆå¦‚ 5â€“15 åˆ†é’Ÿï¼‰**â€‹ï¼šæ”¾åœ¨å†…å­˜æˆ–çŸ­å¯¿å‘½å­˜å‚¨ï¼ˆä¸æ”¾ localStorage æ›´å®‰å…¨ï¼‰ï¼Œç”¨äº API è°ƒç”¨ã€‚</li>
<li>â€‹<strong>é•¿æœŸ Refresh Tokenï¼ˆå¦‚ 14 å¤©æˆ–æ›´é•¿ï¼‰<strong>â€‹ï¼šå®‰å…¨ä¿å­˜ï¼ˆâ€‹</strong>HttpOnly, Secure cookie</strong>â€‹ï¼‰ï¼Œç”¨äºæ¢å–æ–°çš„ Access Tokenã€‚æ¯æ¬¡åˆ·æ–°éƒ½ä¼šå‘é€æ–°çš„ refresh tokenã€‚æœåŠ¡ç«¯ä¼šä¿å­˜ refresh token çš„å…ƒæ•°æ®ï¼ˆredisï¼‰ã€‚</li>
<li>Access Token å¯æ”¾åœ¨ Authorization: <code>Bearer &lt;token&gt;</code>ï¼Œæˆ–ä¹Ÿå¯æ”¾åœ¨ HttpOnly cookieï¼ˆåŒåŸŸ + credentialsï¼‰
<blockquote>
<p>æ¨èå°† Refresh Token æ”¾ HttpOnly cookieï¼ŒAccess Token æ”¾å†…å­˜å¹¶é€šè¿‡ Authorization header å‘é€ï¼ˆå‡å°‘ CSRF é£é™©ï¼‰ã€‚</p>
</blockquote>
</li>
</ul>
<h3 data-id="heading-9">3) ä¼˜ç‚¹</h3>
<ul>
<li>â€‹<strong>æ— çŠ¶æ€</strong>â€‹ï¼Œåç«¯ä¸å¿…ä¿å­˜ sessionï¼ˆå®¹æ˜“æ¨ªå‘æ‰©å±•ï¼Œé€‚åˆå¾®æœåŠ¡ &amp; æ— çŠ¶æ€åç«¯ï¼‰ï¼Œæ›´é€‚åˆç§»åŠ¨ç«¯ SPA ç­‰åˆ†å¸ƒå¼é‰´æƒã€‚</li>
<li>Token è‡ªåŒ…å«ï¼ˆæœ¬èº«æºå¸¦ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œåç«¯åªéœ€éªŒè¯ token ç­¾åï¼Œå°±ç›´æ¥çŸ¥é“ token æ˜¯å¦æœ‰æ•ˆä»¥åŠç”¨æˆ·ä¿¡æ¯ï¼Œæ— éœ€å†æŸ¥è¯¢æ•°æ®åº“æˆ–è€… session å­˜å‚¨ï¼‰ï¼Œå‡å°‘æ¯æ¬¡è¯·æ±‚çš„ DB æŸ¥è¯¢ã€‚</li>
<li>ä¸ OAuth2 å…¼å®¹ï¼Œä¾¿äºåš SSO ä¸ç¬¬ä¸‰æ–¹ç™»å½•ã€‚</li>
</ul>
<h3 data-id="heading-10">4) ç¼ºç‚¹</h3>
<ul>
<li>â€‹<strong>æ— æ³•è½»æ˜“æ’¤é”€</strong>â€‹ï¼ˆaccess token åœ¨æœ‰æ•ˆæœŸå†…ä¸€ç›´å¯ç”¨ï¼Œé™¤éå¼•å…¥é»‘åå•/æ’¤é”€æœºåˆ¶ï¼‰ã€‚</li>
<li>å¦‚æœæŠŠ JWT æ”¾åœ¨ localStorageï¼ˆå¯è¢« JS è¯»å–ï¼‰ä¼šå¢åŠ  XSS é£é™©ï¼›å¦‚æœæ”¾ Cookieï¼Œåˆ™é¢ä¸´ CSRF é£é™©ã€‚</li>
</ul>
<h2 data-id="heading-11">å››ã€Cookie Session ä¸ JWT çš„ä¸»è¦åŒºåˆ«</h2>
<p>è¡¨æ ¼ è¿˜åœ¨åŠ è½½ä¸­ï¼Œè¯·ç­‰å¾…åŠ è½½å®Œæˆåå†å°è¯•å¤åˆ¶</p>
<h2 data-id="heading-12">äº”ã€å®‰å…¨ç­–ç•¥</h2>
<h3 data-id="heading-13">CSRF é˜²æŠ¤ï¼ˆCookie è‡ªåŠ¨å¸¦ credential çš„æƒ…å†µä¸‹ï¼‰</h3>
<ul>
<li>ä¼˜å…ˆï¼šä½¿ç”¨ <strong>SameSite=Lax</strong> æˆ– â€‹<strong>SameSite=Strict â€‹</strong>â€‹ã€‚</li>
<li>å¯¹äºå¿…é¡» <code>SameSite=None</code> çš„è·¨ç«™åœºæ™¯ï¼Œé…åˆ â€‹**CSRF Tokenï¼ˆåŒ submit cookieï¼‰**â€‹ï¼š
<ul>
<li>åç«¯åœ¨ç™»å½•æ—¶è®¾ <code>Set-Cookie: CSRF-Token=xxx; HttpOnly=false; Secure</code>ï¼ˆå¯è¢« JS è¯»å–ï¼‰</li>
<li>å‰ç«¯æ¯æ¬¡è¯·æ±‚åœ¨ header ä¸­å¸¦ <code>X-CSRF-Token: &lt;value&gt;</code>ï¼Œåç«¯éªŒè¯ header ä¸ cookie å€¼ä¸€è‡´ã€‚</li>
</ul>
</li>
<li>æˆ–ä½¿ç”¨ <code>Origin</code> / <code>Referer</code> æ£€æŸ¥ï¼ˆåªå…è®¸æ¥è‡ªå¯ä¿¡åŸŸçš„è¯·æ±‚ï¼‰ã€‚</li>
</ul>
<blockquote>
<p>æ ¸å¿ƒï¼šCSRF æ”»å‡»è€… â€‹<strong>å¯ä»¥å‘è¯·æ±‚</strong>â€‹ï¼Œä½† â€‹<strong>æ²¡æ³•è¯» Cookie</strong>â€‹ï¼Œæ— æ³•æŠŠ token æ”¾åˆ° header ä¸­ï¼Œæ‰€ä»¥æ ¡éªŒ(<code>(req.cookies["CSRF-Token"] !== req.headers["X-CSRF-Token"])</code>)ã€‚<strong>CSRF æ”»å‡»èƒ½å‘è¯·æ±‚ï¼Œä½†æ‹¿ä¸åˆ° cookie å†…å®¹ ã€‚</strong></p>
</blockquote>
<h3 data-id="heading-14">XSS é˜²æŠ¤ï¼ˆé¿å… token è¢«çªƒå–ï¼‰</h3>
<ul>
<li>å¯¹å¯æ‰§è¡Œ token çš„å­˜å‚¨é¿å…ä½¿ç”¨ <code>localStorage</code>ï¼ˆHttpOnly cookie é˜²æ­¢ JS è¯»å–ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-15">JWT å¯æ’¤é”€æ€§ç­–ç•¥</h3>
<ul>
<li>â€‹<strong>çŸ­å¯¿å‘½ access token + refresh token</strong>â€‹ï¼ˆrefresh token å­˜ HttpOnly cookieï¼‰ï¼š
<ul>
<li>access token è¿‡æœŸå¿«ï¼Œå¯å‡å°‘æ»¥ç”¨çª—å£ã€‚</li>
<li>refresh token åœ¨æœåŠ¡ç«¯æœ‰é»‘åå•/DB è®°å½•ï¼Œå¿…è¦æ—¶æ’¤é”€ï¼ˆä¾‹å¦‚ç”¨æˆ·ç™»å‡ºã€å¯†ç å˜æ›´ï¼‰ã€‚</li>
</ul>
</li>
<li>â€‹**token idï¼ˆjtiï¼‰ + å­˜åœ¨æœåŠ¡ç«¯é»‘åå•ï¼ˆRedisï¼‰**â€‹ï¼šåœ¨ logout / å¼ºåˆ¶ä¸‹çº¿æ—¶æŠŠ jti å†™å…¥é»‘åå•å¹¶åœ¨éªŒè¯æ—¶æ£€æŸ¥ã€‚é»‘åå•å¯è®¾ç½®è¿‡æœŸä¸åˆ†å¸ƒå¼ç¼“å­˜ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸå‹ç†è§£ä»å…¥é—¨åˆ°ç²¾é€š]]></title>    <link>https://juejin.cn/post/7572454929144905763</link>    <guid>https://juejin.cn/post/7572454929144905763</guid>    <pubDate>2025-11-15T13:08:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572454929144905763" data-draft-id="7572454929144889379" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸå‹ç†è§£ä»å…¥é—¨åˆ°ç²¾é€š"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-15T13:08:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Heo"/> <meta itemprop="url" content="https://juejin.cn/user/1410009035452887"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸå‹ç†è§£ä»å…¥é—¨åˆ°ç²¾é€š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1410009035452887/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Heo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T13:08:15.000Z" title="Sat Nov 15 2025 13:08:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸå‹è¿™å—çŸ¥è¯†ç‚¹ï¼Œå…¶å®åœ¨æˆ‘ä»¬å·¥ä½œä¸­çš„ä½¿ç”¨éå¸¸ç®€å•ã€‚ä½†æ˜¯ä¿—è¯è¯´â€œé¢è¯•é€ ç«ç®­ï¼Œå·¥ä½œæ‹§èºä¸â€ï¼Œåœ¨é¢è¯•ä¸­ï¼Œé¢è¯•å®˜ä¸æ—¶å°±ä¼šè€ƒå¯Ÿä¸€äº›èŠ±é‡Œèƒ¡å“¨çš„é—®é¢˜ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬åªæœ‰å°†è¿™ä¸ªæ¦‚å¿µå’Œä»–çš„ç›¸å…³çŸ¥è¯†ç†è§£é€å½»ï¼Œæ‰èƒ½ä»¥ä¸å˜åº”ä¸‡å˜ã€‚</p>
</blockquote>
<ol>
<li>
<h2 data-id="heading-0">ä¸¤ä¸ªå®¹æ˜“æ··æ·†ä½†è¦åˆ†æ¸…çš„ä¸œè¥¿</h2>
</li>
<li>
<p>â€‹<strong>æ¯ä¸ªæ™®é€šå¯¹è±¡éƒ½æœ‰å†…éƒ¨éšå¼å±æ€§ â€‹<code>[[Prototype]]</code><strong>â€‹â€‹</strong>ï¼ˆå¸¸è§è®¿é—®å â€‹<code>proto</code><strong>â€‹</strong>ï¼‰</strong> â€”â€” å®ƒæŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ï¼ˆå³åŸå‹å¯¹è±¡ï¼‰ã€‚</p>
<blockquote>
<p>æ‰€ä»¥åŸå‹å¯¹è±¡åå­—çš„ç”±æ¥å°±æ˜¯ï¼Œä¸€ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ª prototype å±æ€§ï¼Œå°±æ˜¯åŸå‹å±æ€§ï¼Œè€Œè¿™ä¸ªåŸå‹å±æ€§æœ¬èº«åˆæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸ºåŸå‹å¯¹è±¡ã€‚</p>
</blockquote>
</li>
<li>
<p><strong>å‡½æ•°ï¼ˆä½œä¸ºæ„é€ å‡½æ•°ï¼‰æœ‰ â€‹<code>.prototype</code><strong>â€‹</strong>â€‹ å±æ€§</strong> â€”â€” å½“ä½ ç”¨ <code>new Fn()</code> åˆ›å»ºå®ä¾‹æ—¶ï¼Œå®ä¾‹çš„ <code>[[Prototype]]</code> ä¼šè¢«è®¾ç½®ä¸º <code>Fn.prototype</code>ã€‚</p>
</li>
</ol>
<blockquote>
<p>æ€»ç»“ï¼š<code>.prototype</code> æ˜¯æ„é€ å‡½æ•°çš„å±æ€§ï¼›<code>[[Prototype]]/__proto__</code> æ˜¯æ™®é€šå¯¹è±¡å®ä¾‹çš„å†…éƒ¨æŒ‡é’ˆï¼ŒäºŒè€…åœ¨æ„é€ /å®ä¾‹åŒ–æ—¶å»ºç«‹è”ç³»ï¼Œä½†ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚</p>
</blockquote>
<ol start="2">
<li>
<h2 data-id="heading-1">åŸå‹é“¾ï¼šå±æ€§æŸ¥æ‰¾çš„æ ¸å¿ƒæœºåˆ¶</h2>
</li>
</ol>
<p>å½“ä½ è®¿é—® <code>obj.prop</code> æ—¶ï¼ŒJS çš„æŸ¥æ‰¾æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>å…ˆæŸ¥çœ‹ <code>obj</code> è‡ªèº«æ˜¯å¦æœ‰åä¸º <code>prop</code> çš„â€‹<strong>è‡ªæœ‰å±æ€§</strong>â€‹ã€‚æœ‰å°±è¿”å›ã€‚</li>
<li>æ²¡æœ‰åˆ™æ²¿ç€ <code>obj.[[Prototype]]</code>ï¼ˆå³ <code>obj.__proto__</code>ï¼‰å»æ‰¾ï¼Œæ‰¾åˆ°å°±è¿”å›ã€‚</li>
<li>è‹¥ä»æœªæ‰¾åˆ°åˆ™ç»§ç»­æ²¿ç€åŸå‹çš„ <code>[[Prototype]]</code>ï¼ˆå½¢æˆé“¾ï¼‰å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ° <code>null</code>ï¼ˆæŸ¥ä¸åˆ°è¿”å› <code>undefined</code>ï¼‰ã€‚</li>
</ol>
<p>è¿™å°±æ˜¯æ‰€è°“çš„ â€‹**åŸå‹é“¾ï¼ˆprototype chainï¼‰**â€‹ã€‚</p>
<blockquote>
<p>ES6 <code>class</code> æ˜¯è¯­æ³•ç³–ï¼Œæœ¬è´¨ä»ç”¨åŸå‹ã€‚</p>
</blockquote>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> grand = { <span class="hljs-title function_">greet</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-string">'hi from grand'</span>; } };
<span class="hljs-keyword">const</span> parent = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(grand);
parent.<span class="hljs-property">say</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-string">'parent'</span>;
<span class="hljs-keyword">const</span> child = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(parent);
child.<span class="hljs-property">own</span> = <span class="hljs-number">1</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child.<span class="hljs-property">own</span>);           <span class="hljs-comment">// 1 ï¼ˆown propertyï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child.<span class="hljs-title function_">say</span>());         <span class="hljs-comment">// 'parent' ï¼ˆä» parent æ‰¾åˆ°ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(child.<span class="hljs-title function_">greet</span>());       <span class="hljs-comment">// 'hi from grand' ï¼ˆä» grand æ‰¾åˆ°ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(child)); <span class="hljs-comment">// parent</span>
</code></pre>
<p>æˆ‘ä»¬æ—¢å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°çš„æ–¹å¼å®ç°ç»§æ‰¿ï¼Œä¹Ÿå¯ä»¥é€šè¿‡çº¯åŸå‹ç»§æ‰¿ï¼ˆObject.create()ï¼‰çš„æ–¹å¼å®ç°ã€‚</p>
<ul>
<li><code>Object.getPrototypeOf(obj)</code>ï¼šå®‰å…¨åœ°è·å– <code>[[Prototype]]</code>ã€‚</li>
<li><code>Object.setPrototypeOf(obj, proto)</code>ï¼šè®¾ç½®å¯¹è±¡çš„åŸå‹ã€‚é€šå¸¸ä¼˜å…ˆå»ºè®®ä½¿ç”¨ <code>Object.create</code> åœ¨åˆ›å»ºæ—¶è®¾ç½®åŸå‹ã€‚</li>
</ul>
<ol start="3">
<li>
<h2 data-id="heading-2">æ„é€ å‡½æ•°ä¸ <code>new</code> çš„å·¥ä½œåŸç†</h2>
</li>
</ol>
<p>å½“ä½ å†™ <code>new F(arg)</code>ï¼š</p>
<ol>
<li>æ–°å»ºä¸€ä¸ªç©ºå¯¹è±¡ <code>obj</code>ã€‚</li>
<li>è¿™ä¸ªç©ºå¯¹è±¡çš„ <code>[[Prototype]]</code> è¢«è®¾ç½®ä¸º <code>F.prototype</code>ã€‚</li>
<li>æ‰§è¡Œ <code>F</code>ï¼Œå¹¶æŠŠ <code>this</code> æŒ‡å‘ <code>obj</code>ã€‚</li>
<li>è‹¥ <code>F</code> è¿”å›å¯¹è±¡ï¼Œåˆ™æœ€ç»ˆç»“æœä¸ºè¯¥å¯¹è±¡ï¼›å¦åˆ™è¿”å› <code>obj</code>ã€‚</li>
</ol>
<p>å› æ­¤ï¼Œ<code>F.prototype</code> æ˜¯å®ä¾‹ç»§æ‰¿çš„æ–¹æ³•/å±æ€§çš„æ¥æºã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">/**
 * æ¨¡æ‹Ÿå®ç° new æ“ä½œç¬¦çš„å‡½æ•°
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Function</span>} Constructor æ„é€ å‡½æ•°
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">...any</span>} args ä¼ é€’ç»™æ„é€ å‡½æ•°çš„å‚æ•°
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">*</span>} å¦‚æœæ— è¿”å›å€¼æˆ–è€…æ˜¾ç¤ºè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™è¿”å›æ„é€ å‡½æ•°çš„æ‰§è¡Œç»“æœï¼›å¦‚æœæ˜¾ç¤ºè¿”å›ä¸€ä¸ªåŸºæœ¬ç±»å‹ï¼Œåˆ™è¿”å›æ„é€ å‡½æ•°çš„å®ä¾‹
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">myNew</span>(<span class="hljs-params">Constructor, ...args</span>) {
    <span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ç©ºå¯¹è±¡ 2. ä¸ºè¿™ä¸ªç©ºå¯¹è±¡è®¾ç½®åŸå‹(__proto__)</span>
    <span class="hljs-comment">// å¯ä»¥ä½¿ç”¨ {}ï¼Œä½†æ˜¯æ¨èä½¿ç”¨ Object.create() åˆ›å»ºå¯¹è±¡å¹¶è®¾ç½®åŸå‹</span>
    <span class="hljs-keyword">const</span> instance = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">Constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>)

    <span class="hljs-comment">// 3. ç»‘å®šæ„é€ å‡½æ•°çš„thisä¸ºå…¶æ–°åˆ›å»ºçš„ç©ºå®ä¾‹å¯¹è±¡ï¼Œå¹¶æ‰§è¡Œæ„é€ å‡½æ•°ä½“</span>
    <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Constructor</span>.<span class="hljs-title function_">apply</span>(instance, args)

    <span class="hljs-keyword">const</span> isObject = <span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'object'</span> &amp;&amp; result !== <span class="hljs-literal">null</span>
    <span class="hljs-keyword">const</span> isFunction = <span class="hljs-keyword">typeof</span> result === <span class="hljs-string">'function'</span>
    <span class="hljs-comment">// 4. å¦‚æœæ„é€ å‡½æ•°è¿”å›ä¸€ä¸ªéåŸå§‹å€¼ï¼Œåˆ™è¿”å›è¿™ä¸ªå¯¹è±¡ï¼›å¦åˆ™è¿”å›åˆ›å»ºçš„æ–°å®ä¾‹å¯¹è±¡</span>
    <span class="hljs-keyword">if</span> (isObject || isFunction) <span class="hljs-keyword">return</span> result
    <span class="hljs-keyword">return</span> instance
}
</code></pre>
<ol start="4">
<li>
<h2 data-id="heading-3"><code>hasOwnProperty</code>ã€<code>in</code>ã€<code>Object.keys</code> çš„åŒºåˆ«</h2>
</li>
</ol>
<ul>
<li><code>obj.hasOwnProperty('a')</code>ï¼šåªæ£€æŸ¥è‡ªèº«å±æ€§ï¼ˆä¸èµ°åŸå‹é“¾ï¼‰ã€‚</li>
<li><code>'a' in obj</code>ï¼šæ£€æŸ¥è‡ªèº«æˆ–åŸå‹é“¾ä¸Šæ˜¯å¦å­˜åœ¨å±æ€§ï¼ˆåŒ…æ‹¬ä¸å¯æšä¸¾çš„ï¼‰ã€‚</li>
<li><code>Object.keys(obj)</code> / <code>for...in</code>ï¼š<code>Object.keys</code> è¿”å›è‡ªèº«å¯æšä¸¾å±æ€§æ•°ç»„ï¼›<code>for...in</code> ä¼šæšä¸¾è‡ªèº« + å¯æšä¸¾çš„ç»§æ‰¿å±æ€§ï¼ˆå¯ç”¨ <code>hasOwnProperty</code> è¿‡æ»¤ï¼‰ã€‚</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> p = {<span class="hljs-attr">x</span>:<span class="hljs-number">1</span>};
<span class="hljs-keyword">const</span> o = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(p);
o.<span class="hljs-property">y</span> = <span class="hljs-number">2</span>;

<span class="hljs-string">'x'</span> <span class="hljs-keyword">in</span> o <span class="hljs-comment">// true</span>
o.<span class="hljs-title function_">hasOwnProperty</span>(<span class="hljs-string">'x'</span>) <span class="hljs-comment">// false</span>
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(o) <span class="hljs-comment">// ['y']</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> k <span class="hljs-keyword">in</span> o) { <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(k); } <span class="hljs-comment">// 'y' 'x'</span>
</code></pre>
<ol start="5">
<li>
<h2 data-id="heading-4"><code>instanceof</code> å¦‚ä½•å·¥ä½œ</h2>
</li>
</ol>
<p><code>obj instanceof Constructor</code> æ£€æŸ¥çš„æ˜¯ <code>Constructor.prototype</code> æ˜¯å¦å‡ºç°åœ¨ <code>obj</code> çš„åŸå‹é“¾ä¸Šï¼ˆé€šè¿‡ <code>Object.getPrototypeOf</code> é€’å½’åˆ¤æ–­ï¼‰ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">/**
 * æ¨¡æ‹Ÿ instanceOf çš„å®ç°
 * <span class="hljs-doctag">@param</span> object å®ä¾‹å¯¹è±¡
 * <span class="hljs-doctag">@param</span> Constructor æ„é€ å‡½æ•°(ç±»)
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">boolean</span>}
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">myInstanceOf</span>(<span class="hljs-params"><span class="hljs-built_in">object</span>, Constructor</span>) {
    <span class="hljs-comment">// åˆå§‹è·å–å¯¹è±¡çš„åŸå‹</span>
    <span class="hljs-keyword">let</span> proto = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(<span class="hljs-built_in">object</span>)

    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-comment">// éå†åˆ°åŸå‹é“¾é¡¶ç«¯</span>
        <span class="hljs-keyword">if</span> (proto === <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
        <span class="hljs-comment">// æ‰¾åˆ°åŒ¹é…çš„åŸå‹</span>
        <span class="hljs-keyword">if</span> (proto === <span class="hljs-title class_">Constructor</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
        <span class="hljs-comment">// ç»§ç»­å‘ä¸ŠæŸ¥æ‰¾åŸå‹é“¾</span>
        proto = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getPrototypeOf</span>(proto)
    }
}
</code></pre>
<ol start="6">
<li>
<h2 data-id="heading-5">è¦†ç›–ä¸è¯»å–é¡ºåº</h2>
</li>
</ol>
<p>å¦‚æœå¯¹è±¡è‡ªèº«æœ‰åŒåå±æ€§ï¼Œä¼šé®è”½åŸå‹ä¸Šçš„åŒåå±æ€§ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> proto = {<span class="hljs-attr">v</span>:<span class="hljs-number">1</span>};
<span class="hljs-keyword">const</span> o = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(proto);
o.<span class="hljs-property">v</span> = <span class="hljs-number">2</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(o.<span class="hljs-property">v</span>); <span class="hljs-comment">// 2 ï¼ˆè‡ªèº«å±æ€§ä¼˜å…ˆï¼‰</span>
<span class="hljs-keyword">delete</span> o.<span class="hljs-property">v</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(o.<span class="hljs-property">v</span>); <span class="hljs-comment">// 1 ï¼ˆå›é€€åˆ°åŸå‹ï¼‰</span>
</code></pre>
<ol start="7">
<li>
<h2 data-id="heading-6">ä¿®æ”¹åŸå‹</h2>
</li>
</ol>
<p>ä½ å¯ä»¥ç»™åŸå‹æ·»åŠ /ä¿®æ”¹æ–¹æ³•ï¼Œæ‰€æœ‰ç»§æ‰¿è¯¥åŸå‹çš„å¯¹è±¡éƒ½ä¼šå—å½±å“ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myLog</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){ <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span>); };
[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>].<span class="hljs-title function_">myLog</span>(); <span class="hljs-comment">// 3</span>
</code></pre>
<p>â€‹<strong>æ³¨æ„</strong>â€‹ï¼š</p>
<ul>
<li>ä¸è¦éšæ„ä¿®æ”¹å†…ç½®å¯¹è±¡ï¼ˆå¦‚ <code>Object.prototype</code>ã€<code>Array.prototype</code>ï¼‰ã€‚ä¿®æ”¹ prototype ä¼šå½±å“æ‰€æœ‰å®ä¾‹ï¼Œå¯èƒ½å¼•å…¥éš¾ä»¥è¿½è¸ªçš„å‰¯ä½œç”¨ã€‚
<blockquote>
<p>è¿™ä¹Ÿæ˜¯éå¸¸å¸¸è§çš„ä¸€ç§ç½‘ç»œå®‰å…¨æ¼æ´ï¼šåŸå‹æ±¡æŸ“ã€‚æŒ‡æ”»å‡»è€…ä½¿ç”¨æŸç§</p>
</blockquote>
</li>
</ul>
<ol start="8">
<li>
<h2 data-id="heading-7">å•ç‹¬è¯´è¯´ constructor</h2>
</li>
</ol>
<p>ä¸Šé¢çš„å†…å®¹çœ‹èµ·æ¥æ˜¯ä¸æ˜¯è¿˜æŒºç®€å•çš„ã€‚å¦‚æœä¸Šé¢å†…å®¹å·²ç»å®Œå…¨ç†è§£äº†ï¼Œé‚£ä¹ˆå†æ¥çœ‹ construtor å±æ€§ã€‚</p>
<p>JavaScript æ¯ä¸ªå‡½æ•°ï¼ˆæ„é€ å‡½æ•°ï¼‰å¯¹è±¡å¤©ç”Ÿéƒ½ä¼šæœ‰ä¸€ä¸ª <code>prototype</code> å±æ€§ï¼Œè€Œè¿™ä¸ª <code>prototype</code> å¯¹è±¡ä¸­ï¼Œé»˜è®¤ä¼šæœ‰ä¸€ä¸ªæŒ‡å‘å‡½æ•°æœ¬èº«çš„å±æ€§ â€”â€” <code>constructor</code>ã€‚</p>
<p>å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p><strong>constructor æ˜¯åŸå‹å¯¹è±¡ä¸Šä¸€ä¸ªæŒ‡é’ˆï¼Œç”¨æ¥æŒ‡å‘åˆ›å»ºè¯¥å®ä¾‹çš„æ„é€ å‡½æ•°ã€‚</strong></p>
</blockquote>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name; }
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span> === <span class="hljs-title class_">Person</span>); <span class="hljs-comment">// true</span>
</code></pre>
<p>ä¸Šè¿°è¿™æ®µä»£ç è¿˜æ¯”è¾ƒå¥½ç†è§£ï¼Œæ€»ä¹‹å°±æ˜¯ prototype è¿™ä¸ªå¯¹è±¡èº«ä¸Šæœ‰ä¸€ä¸ªå±æ€§å«åš constructorï¼Œè¿™ä¸ª constructor åˆšå¥½æŒ‡å‘åŸ æ„é€ å‡½æ•°ã€‚</p>
<p>æ¥ç€è¿™æ®µä»£ç çš„æ€è·¯ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) { <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name; }
<span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">"Tom"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p.<span class="hljs-property">constructor</span> === <span class="hljs-title class_">Person</span>); <span class="hljs-comment">// true</span>
</code></pre>
<p>è¯¶ï¼Ÿä¸å„¿ï¼Ÿconstructor ä¸æ˜¯ prototype ä¸Šçš„å±æ€§å—ï¼Ÿå®ä¾‹å¯¹è±¡ä¸Šä¹Ÿæœ‰è¿™ä¸ªå±æ€§å—ï¼Ÿ</p>
<p>å¦‚æœä½ èƒ½æƒ³åˆ°è¿™é‡Œï¼Œé‚£è¯´æ˜ä¹‹å‰çš„å†…å®¹è‡³å°‘ä½ å·²ç»å­¦æ‡‚äº†ã€‚æ¥ä¸‹æ¥è®©æˆ‘å‘Šè¯‰ä½ ä¸ºä»€ä¹ˆ <code>p.constructor === Person</code>ï¼Ÿ</p>
<p>åŸå› å…¶å®ä¹Ÿå¾ˆç®€å•ï¼Œå› ä¸ºï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript">p.<span class="hljs-property">constructor</span>
= p.<span class="hljs-property">__proto__</span>.<span class="hljs-property">constructor</span>   <span class="hljs-comment">// å®ä¾‹ä¸Šæ²¡æœ‰ constructorï¼Œä¼šå»åŸå‹ __proto__ æŸ¥æ‰¾</span>
= <span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span>
= <span class="hljs-title class_">Person</span>
</code></pre>
<h3 data-id="heading-8">ä¸ºä»€ä¹ˆä¸Šé¢çš„ç»§æ‰¿æ–¹å¼æˆ‘æ²¡æœ‰è¯´ constructorï¼Ÿ</h3>
<p>å› ä¸ºåŸå‹é‡å†™åä¼šä¸¢å¤± constructor æŒ‡å‘ï¼Œéœ€è¦æ‰‹åŠ¨è¡¥å›ã€‚çœ‹è¿™æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params"/>) {}
<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = {
  <span class="hljs-title function_">eat</span>(<span class="hljs-params"/>) {}
};
</code></pre>
<p>ä¹çœ¼ä¸€çœ‹ï¼Œæˆ‘ä»¬æ˜¯ä¸º Animal æ„é€ å‡½æ•°æ·»åŠ äº† eat æ–¹æ³•ï¼Œä½†å…¶å® âš ï¸ è¿™æ ·åšä¼š â€‹<strong>è¦†ç›–åŸå§‹é»˜è®¤çš„ prototype å¯¹è±¡</strong>â€‹ï¼Œä»è€Œå¯¼è‡´ <code>constructor</code> ä¸¢å¤±ï¼ˆå˜æˆ Object ==&gt; <code>{ eat(){} }</code> ï¼‰ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">constructor</span>); <span class="hljs-comment">// æ­¤æ—¶æ˜¯ Objectï¼Œä¸æ˜¯ Animal</span>
</code></pre>
<p>æ‰€ä»¥ï¼Œå¦‚æœä½ éè¦è¿™ä¹ˆå†™ï¼Œè¿˜å¾—è‡ªå·±è¡¥å› constructorï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Animal</span>(<span class="hljs-params"/>) {}
<span class="hljs-title class_">Animal</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> = {
  <span class="hljs-attr">constructor</span>: <span class="hljs-title class_">Animal</span>, <span class="hljs-comment">// æ‰‹åŠ¨è¡¥å›æ„é€ å‡½æ•°</span>
  <span class="hljs-title function_">eat</span>(<span class="hljs-params"/>) {}
};
</code></pre>
<p>è¿™æ ·ä½ æ˜¯ä¸æ˜¯æ˜ç™½äº†ï¼Œä¸ºä»€ä¹ˆä¸Šé¢çš„ç»§æ‰¿æ–¹å¼æˆ‘æ²¡æœ‰è¯´ constructorã€‚ä¸æ˜¯ä¸è¡Œï¼Œè€Œæ˜¯ä¸å¤ªæ¨èã€‚â€‹<strong>ä»»ä½•äººéƒ½å¯ä»¥éšæ„æ”¹åŸå‹</strong>â€‹ï¼Œå¯¼è‡´ <code>constructor</code> å˜å¾—ä¸å¯ä¿¡ã€‚</p>
<blockquote>
<p>ES6 class çš„ <code>constructor</code> æœ¬è´¨ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚</p>
</blockquote>
<ol start="9">
<li>
<h2 data-id="heading-9">æˆ‘æ˜¯çœŸçš„ä¸æƒ³å†è°ˆ Funciton äº†</h2>
</li>
</ol>
<blockquote>
<p>è¿™ä¸€èŠ‚å®Œå…¨å¯ä»¥ä¸çœ‹ï¼Œå› ä¸ºæœ¬è´¨ä¸Šè¿˜æ˜¯ä¸Šé¢çš„å†…å®¹ï¼Œä½†å¥ˆä½•æ€»æœ‰é¢è¯•å®˜å–œæ¬¢æŒ–å‘ï¼Œä¹Ÿæ€»æœ‰åŒå­¦å–œæ¬¢ä¸Šå½“~</p>
</blockquote>
<p>æ™®é€šå‡½æ•°ï¼ˆéç®­å¤´ï¼‰å¤©ç„¶å¯ä»¥ä½œä¸ºæ„é€ å‡½æ•°ã€‚æ‰€ä»¥ä¸Šé¢è¯´çš„ä»€ä¹ˆ Objectã€Person ç­‰ç­‰æ‰€æœ‰å‡½æ•°éƒ½æ˜¯ <code>Function</code> çš„å®ä¾‹ã€‚</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Person</span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>) <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>) <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Function</span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>) <span class="hljs-comment">// true</span>
</code></pre>
<p><code>Function.prototype</code> è‡ªèº«ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼ˆå†…ç½®ï¼‰ï¼Œå®ƒçš„ <code>prototype</code> ä¸æ™®é€šå¯¹è±¡ä¸åŒâ€”â€”è®°ä½ <code>Function</code> æœ¬èº«æ˜¯ä¸€ä¸ª constructorï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title class_">Function</span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Function</span> <span class="hljs-comment">// true</span>
<span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Function</span> <span class="hljs-comment">// false (Function.prototype æ˜¯ä¸ªæ™®é€šå‡½æ•°å¯¹è±¡)</span>
<span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> <span class="hljs-comment">// true</span>
</code></pre>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title class_">Person</span> (æ„é€ å‡½æ•°)
  â”‚
  â”œâ”€â”€ prototype â†’ <span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> â†’ { <span class="hljs-attr">constructor</span>: <span class="hljs-title class_">Person</span>, ... }  âœ…
  â””â”€â”€ __proto__ â†’ <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>  âœ…
</code></pre>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title class_">Function</span>.<span class="hljs-property">__proto__</span> === <span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> <span class="hljs-comment">// true</span>
</code></pre>
<blockquote>
<p>Function è‡ªå·±ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¹Ÿæ˜¯è‡ªå·±æ„é€ å‡ºæ¥çš„ã€‚è¿™å°±åƒæ˜¯å…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹çš„é—®é¢˜ ğŸ˜‚ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è·¨åŸŸé—®é¢˜è§£å†³æ–¹æ¡ˆæ±‡æ€»]]></title>    <link>https://juejin.cn/post/7572453554331926528</link>    <guid>https://juejin.cn/post/7572453554331926528</guid>    <pubDate>2025-11-15T13:17:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572453554331926528" data-draft-id="7572714389922742312" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è·¨åŸŸé—®é¢˜è§£å†³æ–¹æ¡ˆæ±‡æ€»"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-15T13:17:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Heo"/> <meta itemprop="url" content="https://juejin.cn/user/1410009035452887"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è·¨åŸŸé—®é¢˜è§£å†³æ–¹æ¡ˆæ±‡æ€»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1410009035452887/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Heo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T13:17:16.000Z" title="Sat Nov 15 2025 13:17:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å…¨æ–‡é»˜è®¤è®²çš„æ˜¯æµè§ˆå™¨ç«¯å‘èµ·çš„ HTTP è¯·æ±‚çš„â€œè·¨åŸŸâ€é—®é¢˜ï¼ˆåŒæºç­–ç•¥å¯¼è‡´çš„å—é™ï¼‰ã€‚</p>
</blockquote>
<h2 data-id="heading-0">è·¨åŸŸ / åŒæºç­–ç•¥æ¦‚è¿°</h2>
<ul>
<li>â€‹**åŒæºï¼ˆsame-originï¼‰**â€‹ï¼šåè®®ã€åŸŸåï¼ˆhostï¼‰ã€ç«¯å£ ä¸‰è€…å®Œå…¨ç›¸åŒç§°ä¸ºåŒæºã€‚ ä¾‹å¦‚ <code>https://example.com:443</code> å’Œ <code>http://example.com</code> <strong>ä¸æ˜¯</strong>åŒæºï¼ˆåè®®ä¸åŒï¼‰ã€‚</li>
<li>â€‹**åŒæºç­–ç•¥ï¼ˆSOPï¼‰**â€‹ï¼šæµè§ˆå™¨çš„ä¸€ç§å®‰å…¨æœºåˆ¶ï¼Œé™åˆ¶ä»ä¸€ä¸ªæºåŠ è½½çš„è„šæœ¬å»è¯»å–å¦ä¸€ä¸ªæºçš„å“åº”ï¼ˆä»¥é˜² CSRF / æ•°æ®æ³„éœ²ï¼‰ã€‚</li>
<li>â€‹**è·¨åŸŸï¼ˆcross-originï¼‰**â€‹ï¼šå½“è¯·æ±‚ç›®æ ‡ä¸æ»¡è¶³åŒæºæ—¶å³ä¸ºè·¨åŸŸï¼Œè¯·æ±‚ä»å¯å‘å‡ºï¼Œä½†æµè§ˆå™¨ä¼šé˜»æ­¢ JS è¯»å–å“åº”ï¼Œé™¤éæœåŠ¡å™¨æ˜ç¡®å…è®¸ï¼ˆå³ CORS -&gt; è·¨åŸŸèµ„æºå…±äº«ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-1">CORSï¼ˆCross-Origin Resource Sharingï¼‰</h2>
<p>CORSï¼ˆCross-Origin Resource Sharingï¼‰è·¨åŸŸèµ„æºå…±äº«ã€‚æµè§ˆå™¨ä¼šæ ¹æ®å“åº”å¤´åˆ¤æ–­æ˜¯å¦å…è®¸è·¨åŸŸè¯»å–ã€‚ä¸€äº›å…³é”®çš„å“åº”å¤´åŒ…æ‹¬ï¼š</p>
<ul>
<li><code>Access-Control-Allow-Origin</code>ï¼šå…è®¸çš„æºï¼ˆæˆ– <code>*</code>ï¼‰ã€‚
<blockquote>
<p>ä½†æ˜¯è¿™é‡Œæˆ‘ä»¬ä¸€èˆ¬ä¸é…ç½®ä¸º <code>*</code>ï¼Œå› ä¸º<strong>å¦‚æœå“åº”åŒ…å«æ•æ„Ÿæ•°æ®æˆ–ä¾èµ– cookie/å‡­è¯ï¼ˆAuthorization / sessionï¼‰ï¼Œ</strong> <code>*</code> ä¸ <code>Access-Control-Allow-Credentials: true</code> ä¸èƒ½åŒç”¨ï¼Œæµè§ˆå™¨ä¹Ÿä¼šæ‹’ç»è¿™ç§ç»„åˆï¼Œå±äºå®‰å…¨æ¼æ´ âš ï¸ã€‚ï¼ˆç¯‡å¹…æœ‰é™ï¼Œæ›´å¤šç»†èŠ‚è§ä¸‹ç¯‡æ–‡ç« ã€‚ï¼‰</p>
</blockquote>
</li>
<li><code>Access-Control-Allow-Methods</code>ï¼šå…è®¸çš„æ–¹æ³•ï¼ˆGET, POST, PUT...ï¼‰ã€‚</li>
<li><code>Access-Control-Allow-Headers</code>ï¼šå…è®¸çš„è‡ªå®šä¹‰ Headerï¼ˆå¦‚ <code>Authorization, X-Custom-Header</code>ï¼‰ã€‚</li>
<li><code>Access-Control-Allow-Credentials</code>ï¼šæ˜¯å¦å…è®¸å¸¦ cookie/å‡­è¯ï¼ˆ<code>true</code> è¡¨ç¤ºå…è®¸ï¼‰ã€‚</li>
<li><code>Access-Control-Expose-Headers</code>ï¼šå…è®¸å‰ç«¯è®¿é—®çš„å“åº”å¤´ã€‚</li>
<li><code>Access-Control-Max-Age</code>ï¼šé¢„æ£€ï¼ˆpreflightï¼‰ç»“æœç¼“å­˜æ—¶é•¿ï¼ˆç§’ï¼‰ã€‚
<blockquote>
<p>é¢„æ£€è¯·æ±‚ï¼ˆpreflightï¼‰ï¼šå½“è¯·æ±‚ä½¿ç”¨äº†éâ€œç®€å•è¯·æ±‚â€æ–¹æ³•æˆ–è‡ªå®šä¹‰äº† headerã€æˆ– <code>Content-Type</code> éç®€å•ç±»å‹æ—¶ï¼Œæµè§ˆå™¨ä¼šå…ˆå‘ <code>OPTIONS</code> è¯·æ±‚è¯¢é—®æœåŠ¡å™¨æ˜¯å¦å…è®¸ã€‚</p>
</blockquote>
</li>
</ul>
<h2 data-id="heading-2">å¸¸è§è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-3">æ–¹æ¡ˆ A â€” åœ¨æœåŠ¡ç«¯æ­£ç¡®é…ç½® CORS</h3>
<p>è¿™æ˜¯æœ€é€šç”¨ä¹Ÿæœ€æ¨èçš„åšæ³•ï¼šâ€‹<strong>åœ¨å“åº”é‡Œè¿”å›æ­£ç¡®çš„ CORS å¤´</strong>â€‹ã€‚</p>
<h4 data-id="heading-4">Expressï¼ˆNodeï¼‰ç¤ºä¾‹ï¼ˆä½¿ç”¨ <code>cors</code> ä¸­é—´ä»¶ï¼‰</h4>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">'express'</span>)
<span class="hljs-keyword">const</span> cors = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cors'</span>)
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>()

app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">cors</span>({
  <span class="hljs-attr">origin</span>: <span class="hljs-string">'https://app.example.com'</span>, <span class="hljs-comment">// æ³¨æ„ä¸èƒ½ç”¨ '*' é…åˆ credentials</span>
  <span class="hljs-attr">methods</span>: [<span class="hljs-string">'GET'</span>,<span class="hljs-string">'POST'</span>,<span class="hljs-string">'PUT'</span>,<span class="hljs-string">'DELETE'</span>,<span class="hljs-string">'OPTIONS'</span>],
  <span class="hljs-attr">credentials</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å…è®¸ cookie</span>
  <span class="hljs-attr">allowedHeaders</span>: [<span class="hljs-string">'Content-Type'</span>,<span class="hljs-string">'Authorization'</span>,<span class="hljs-string">'X-Requested-With'</span>]
}));
</code></pre>
<h4 data-id="heading-5">Nginxï¼šæŠŠ CORS header åŠ åˆ°å“åº”ä¸Š</h4>
<pre><code class="hljs language-Nginx" lang="Nginx">location /api/ {
  if ($request_method = 'OPTIONS') {
    add_header 'Access-Control-Allow-Origin' 'https://app.example.com';
    add_header 'Access-Control-Allow-Methods' 'GET,POST,OPTIONS,PUT,DELETE';
    add_header 'Access-Control-Allow-Headers' 'Authorization,Content-Type';
    add_header 'Access-Control-Allow-Credentials' 'true';
    add_header 'Access-Control-Max-Age' 1728000;
    add_header 'Content-Length' 0;
    add_header 'Content-Type' 'text/plain charset=UTF-8';
    return 204;
  }

  proxy_pass http://backend;
  proxy_set_header Host $host;
  proxy_set_header X-Real-IP $remote_addr;
  # æŠŠ header æ·»åŠ åˆ°åç«¯å“åº”
  proxy_hide_header 'Access-Control-Allow-Origin';
  add_header 'Access-Control-Allow-Origin' 'https://app.example.com';
  add_header 'Access-Control-Allow-Credentials' 'true';
}
</code></pre>
<h3 data-id="heading-6">æ–¹æ¡ˆ B â€” å‰ç«¯ä»£ç†åˆ°åŒæºï¼ˆä»…å¼€å‘é˜¶æ®µï¼‰</h3>
<p>å¼€å‘é˜¶æ®µæˆ–æ²¡æœ‰åç«¯æƒé™æ—¶ä½¿ç”¨æˆ‘ä»¬ç»å¸¸ä½¿ç”¨æ„å»ºå·¥å…·çš„ dev server å®ç°åå‘ä»£ç†ã€‚æŠŠè·¨åŸŸè¯·æ±‚ä»£ç†åˆ°æœ¬åœ° dev serverï¼ˆåŒæºï¼‰ï¼Œç”± dev server è½¬å‘åˆ°ç›®æ ‡æœåŠ¡å™¨ã€‚</p>
<h4 data-id="heading-7">Vite dev server é…ç½®</h4>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">server</span>: {
    <span class="hljs-attr">proxy</span>: {
      <span class="hljs-string">'/api'</span>: {
        <span class="hljs-attr">target</span>: <span class="hljs-string">'https://api.example.com'</span>,
        <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">rewrite</span>: <span class="hljs-function"><span class="hljs-params">path</span> =&gt;</span> path.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^\/api/</span>, <span class="hljs-string">''</span>)
      }
    }
  }
}
</code></pre>
<h3 data-id="heading-8">æ–¹æ¡ˆ C â€” Nginx åå‘ä»£ç†ï¼ˆç”Ÿäº§é˜¶æ®µå¸¸ç”¨ï¼‰</h3>
<p>è¿™ä¹Ÿæ˜¯ç”Ÿäº§ç¯å¢ƒä¸‹çš„å¸¸ç”¨æ–¹æ¡ˆã€‚åœ¨ Nginx ç­‰åå‘ä»£ç†å±‚ç»Ÿä¸€è½¬å‘ï¼Œå‰ç«¯è°ƒç”¨åŒåŸŸï¼ˆNginxï¼‰ï¼ŒNginx ä»£ç†åå†ä¸åç«¯è·¨åŸŸé€šä¿¡ã€‚</p>
<blockquote>
<p>å‰ç«¯è¯·æ±‚ï¼š<code>https://app.example.com/api/...</code>ï¼ˆåŒæºï¼‰ Nginx proxy_pass -&gt; <code>https://api.example.com/...</code>ã€‚</p>
</blockquote>
<pre><code class="hljs language-Bash" lang="Bash">server {
    listen 80;
    server_name example.com;

    <span class="hljs-comment"># é™æ€èµ„æºä»£ç†</span>
    location /static/ {
        root /project/static;
        index index.html index.html; <span class="hljs-comment"># è®¿é—® /static/ ä¼šè‡ªåŠ¨â€œé‡å®šå‘â€åˆ° /project/static/index.html æ–‡ä»¶</span>
    }

    <span class="hljs-comment"># APIä»£ç†</span>
    location /api/ {
        rewrite ^/api/(.*)$ /<span class="hljs-variable">$1</span> <span class="hljs-built_in">break</span>; <span class="hljs-comment"># å¦‚æœæœåŠ¡å™¨æ²¡æœ‰ /api è®°å¾—é‡å†™</span>
        proxy_pass http://api.example.com; <span class="hljs-comment"># ä»£ç†çš„åœ°å€</span>
        
    }
}
</code></pre>
<h3 data-id="heading-9">æ–¹æ¡ˆ D â€” JSONPï¼ˆå·²è¿‡æ—¶ï¼Œä»…é™ GETï¼‰</h3>
<p>åªæ”¯æŒ <code>GET</code>ï¼Œé€šè¿‡ <code>&lt;script&gt;</code> æ ‡ç­¾ç»•è¿‡ SOPï¼ŒæœåŠ¡ç«¯è¿”å› <code>callback(...)</code>ï¼Œå®¹æ˜“è¢«æ”»å‡»è€…ä½¿ç”¨ <code>callback</code> æ¶æ„å‡½æ•°åš XSS æ”»å‡»ã€‚</p>
<h3 data-id="heading-10">æ–¹æ¡ˆ E â€” postMessageï¼ˆè·¨çª—å£/iframe åœºæ™¯ï¼‰</h3>
<p>å½“éœ€è¦è·¨åŸŸé¡µé¢é—´é€šä¿¡ï¼ˆiframe å’Œçˆ¶çª—å£ï¼‰ï¼Œä½¿ç”¨ <code>window.postMessage</code>ã€‚é€‚ç”¨äºé¡µé¢é—´æ•°æ®äº¤æ¢ï¼Œä¸é€‚ç”¨äºæ™®é€š API è¯·æ±‚ã€‚æˆ‘ä»¬ä¸€èˆ¬ä¼šåœ¨å¾®å‰ç«¯ã€OAuth ç¬¬ä¸‰æ–¹ç™»å½•ã€å•ç‚¹ç™»å½•ã€æ”¯ä»˜é¡µé¢å›è°ƒã€WebView æ··åˆå¼€å‘ä¸­ä½¿ç”¨ã€‚</p>
<h3 data-id="heading-11">æ–¹æ¡ˆ F â€” WebSocketï¼ˆä¸å— CORS é™åˆ¶ï¼‰</h3>
<p>WebSocket æ¡æ‰‹ä¸æ˜¯æ ‡å‡†çš„ CORSï¼›å¦‚æœç”¨ WS/WSSï¼Œæµè§ˆå™¨ä¸ä¼šå› åŒæºé™åˆ¶é˜»æ­¢è¯»å–æ¶ˆæ¯ï¼ˆä½†æœåŠ¡å™¨å¯èƒ½åš origin æ ¡éªŒï¼‰ã€‚æˆ‘ä»¬ä¹Ÿä¸å¯èƒ½ä¸ºäº†è·¨åŸŸå¼ºè¡Œä½¿ç”¨ WebSocketã€‚ï¼ˆä¹‹åä¼šè¯¦ç»†ä»‹ç» HTTP åè®®å’Œ WebSocket åè®®å…³ç³»å’Œä»–ä»¬çš„ä½¿ç”¨ï¼‰</p>
<h2 data-id="heading-12">å¼€å‘æ—¶ä¸€äº›å‘</h2>
<p>åœ¨æˆ‘åˆšå¼€å§‹ç‹¬ç«‹ä»é›¶åˆ°ä¸€æ­å»ºå‰åç«¯é¡¹ç›®çš„æ—¶å€™ï¼ˆå½“æ—¶è¿˜æ²¡æœ‰ä»€ä¹ˆ AI Codingï¼Œå…¨å‡­ä¸€æ‰‹æœç´¢å¼•æ“ï¼‰ï¼Œè¿™ä¸ªé—®é¢˜è®©æˆ‘çº¢æ¸©åˆ°æ™šä¸Šä¸€ç‚¹ä¹Ÿæ²¡æœ‰è§£å†³ï¼ˆæ²¡é”™ï¼Œå½“æ—¶æˆ‘è¿˜å¾ˆèœ hhï¼‰ã€‚</p>
<h3 data-id="heading-13">å¤„ç†å¸¦ cookie / å¸¦å‡­è¯çš„è·¨åŸŸè¯·æ±‚</h3>
<ol>
<li>æœåŠ¡ç«¯ï¼š
<ol>
<li><code>Access-Control-Allow-Origin: https://app.example.com</code>ï¼ˆå…·ä½“ originï¼Œä¸èƒ½æ˜¯ <code>*</code>ï¼‰</li>
<li><code>Access-Control-Allow-Credentials: true</code></li>
</ol>
</li>
<li>å‰ç«¯ï¼ˆfetch / xhrï¼‰ï¼š
<ol>
<li><code>fetch(url, { credentials: 'include' })</code> æˆ– <code>xhr.withCredentials = true</code></li>
</ol>
</li>
</ol>
<p>â€‹<strong>å½“æ—¶æˆ‘çŠ¯çš„é”™è¯¯</strong>â€‹ï¼š</p>
<ul>
<li>æ²¡æœ‰è®¾ç½® <code>credentials: 'include'</code>ï¼Œæµè§ˆå™¨ä¸ä¼šå‘é€ cookieã€‚</li>
<li>æœåŠ¡ç«¯å›é€ <code>Access-Control-Allow-Origin: *</code> ä¸ <code>Allow-Credentials: true</code> åŒæ—¶å­˜åœ¨ï¼ˆæµè§ˆå™¨ä¼šæ‹’ç»ï¼‰ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot 3.2éœ‡æ’¼å‘å¸ƒï¼š5ä¸ªå¿…çŸ¥çš„æ–°ç‰¹æ€§è®©ä½ å¼€å‘æ•ˆç‡æå‡50%]]></title>    <link>https://juejin.cn/post/7572493520003792930</link>    <guid>https://juejin.cn/post/7572493520003792930</guid>    <pubDate>2025-11-16T00:16:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572493520003792930" data-draft-id="7572493520003776546" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot 3.2éœ‡æ’¼å‘å¸ƒï¼š5ä¸ªå¿…çŸ¥çš„æ–°ç‰¹æ€§è®©ä½ å¼€å‘æ•ˆç‡æå‡50%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-16T00:16:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot 3.2éœ‡æ’¼å‘å¸ƒï¼š5ä¸ªå¿…çŸ¥çš„æ–°ç‰¹æ€§è®©ä½ å¼€å‘æ•ˆç‡æå‡50%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T00:16:56.000Z" title="Sun Nov 16 2025 00:16:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Spring Boot 3.2éœ‡æ’¼å‘å¸ƒï¼š5ä¸ªå¿…çŸ¥çš„æ–°ç‰¹æ€§è®©ä½ å¼€å‘æ•ˆç‡æå‡50%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Spring Boot 3.2çš„å‘å¸ƒæ— ç–‘æ˜¯Javaç”Ÿæ€åœˆçš„ä¸€å¤§ç››äº‹ã€‚ä½œä¸ºSpringæ¡†æ¶çš„æ ¸å¿ƒé¡¹ç›®ä¹‹ä¸€ï¼ŒSpring Bootå§‹ç»ˆè‡´åŠ›äºç®€åŒ–ä¼ä¸šçº§åº”ç”¨çš„å¼€å‘å’Œéƒ¨ç½²ã€‚æœ¬æ¬¡3.2ç‰ˆæœ¬çš„æ›´æ–°ä¸ä»…å»¶ç»­äº†è¿™ä¸€ä¼ ç»Ÿï¼Œæ›´å¸¦æ¥äº†å¤šé¡¹çªç ´æ€§çš„æ”¹è¿›å’Œåˆ›æ–°ã€‚ä»æ€§èƒ½ä¼˜åŒ–åˆ°å¼€å‘ä½“éªŒçš„æå‡ï¼Œä»å¯¹æœ€æ–°Javaç‰¹æ€§çš„æ”¯æŒåˆ°ä¸äº‘åŸç”ŸæŠ€æœ¯çš„æ·±åº¦æ•´åˆï¼ŒSpring Boot 3.2ä¸ºå¼€å‘è€…æä¾›äº†å‰æ‰€æœªæœ‰çš„ä¾¿åˆ©å’Œæ•ˆç‡ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥å‰–æSpring Boot 3.2ä¸­æœ€å€¼å¾—å…³æ³¨çš„5å¤§æ–°ç‰¹æ€§ï¼Œè¿™äº›ç‰¹æ€§ç»è¿‡ç²¾å¿ƒè®¾è®¡å’Œå®è·µéªŒè¯ï¼Œæœ‰æœ›å°†ä½ çš„å¼€å‘æ•ˆç‡æå‡50%ç”šè‡³æ›´é«˜ã€‚æ— è®ºä½ æ˜¯Spring Bootçš„è€ç”¨æˆ·è¿˜æ˜¯åˆšåˆšæ¥è§¦è¿™ä¸€æ¡†æ¶çš„æ–°æ‰‹ï¼Œè¿™äº›æ–°åŠŸèƒ½éƒ½å°†ä¸ºä½ å¸¦æ¥å…¨æ–°çš„å¼€å‘ä½“éªŒã€‚</p>
<h2 data-id="heading-2">ä¸»ä½“å†…å®¹</h2>
<h3 data-id="heading-3">1. è™šæ‹Ÿçº¿ç¨‹(Virtual Threads)çš„å…¨é¢æ”¯æŒ</h3>
<p><strong>èƒŒæ™¯ä¸æ„ä¹‰ï¼š</strong>
éšç€Java 21çš„å‘å¸ƒï¼Œè™šæ‹Ÿçº¿ç¨‹æˆä¸ºäº†æœ€å—ç©ç›®çš„ç‰¹æ€§ä¹‹ä¸€ã€‚Spring Boot 3.2å¯¹è™šæ‹Ÿçº¿ç¨‹æä¾›äº†å¼€ç®±å³ç”¨çš„æ”¯æŒï¼Œè¿™æ ‡å¿—ç€å“åº”å¼ç¼–ç¨‹ä¹‹å¤–çš„å¦ä¸€ç§é«˜æ€§èƒ½å¹¶å‘æ¨¡å‹çš„åˆ°æ¥ã€‚</p>
<p><strong>æŠ€æœ¯å®ç°ç»†èŠ‚ï¼š</strong></p>
<ul>
<li>Spring MVCå’ŒWebFluxç°åœ¨éƒ½å¯ä»¥é…ç½®ä¸ºä½¿ç”¨è™šæ‹Ÿçº¿ç¨‹</li>
<li><code>spring.threads.virtual.enabled=true</code>å³å¯å¯ç”¨å…¨å±€è™šæ‹Ÿçº¿ç¨‹æ”¯æŒ</li>
<li>Tomcat/Jettyç­‰åµŒå…¥å¼æœåŠ¡å™¨å·²é€‚é…è™šæ‹Ÿçº¿ç¨‹æ¨¡å‹</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VirtualThreadConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> TomcatProtocolHandlerCustomizer&lt;?&gt; protocolHandlerVirtualThreadExecutorCustomizer() {
        <span class="hljs-keyword">return</span> protocolHandler -&gt; {
            protocolHandler.setExecutor(Executors.newVirtualThreadPerTaskExecutor());
        };
    }
}
</code></pre>
<p><strong>æ€§èƒ½ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>ä¸ä¼ ç»Ÿå¹³å°çº¿ç¨‹ç›¸æ¯”ï¼Œå†…å­˜å ç”¨å‡å°‘90%</li>
<li>ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€å‡ ä¹ä¸ºé›¶</li>
<li>è½»æ¾æ”¯æŒç™¾ä¸‡çº§å¹¶å‘è¿æ¥</li>
</ul>
<p><strong>æœ€ä½³å®è·µå»ºè®®ï¼š</strong></p>
<ol>
<li>IOå¯†é›†å‹åº”ç”¨æœ€é€‚åˆé‡‡ç”¨è™šæ‹Ÿçº¿ç¨‹</li>
<li>CPUå¯†é›†å‹ä»»åŠ¡ä»éœ€è°¨æ…è¯„ä¼°</li>
<li>ä¸ä¼ ç»Ÿçº¿ç¨‹æ± æ··åˆä½¿ç”¨æ—¶éœ€æ³¨æ„èµ„æºéš”ç¦»</li>
</ol>
<h3 data-id="heading-4">2. CRaC(Coordinated Restore at Checkpoint)çš„ç”Ÿäº§å°±ç»ªæ”¯æŒ</h3>
<p><strong>åˆ›æ–°ä»·å€¼ï¼š</strong>
CRaCæŠ€æœ¯é€šè¿‡åœ¨ç‰¹å®šæ—¶åˆ»ä¿å­˜JVMçŠ¶æ€å¹¶å¿«é€Ÿæ¢å¤çš„èƒ½åŠ›ï¼Œå½»åº•æ”¹å˜äº†Javaåº”ç”¨çš„å¯åŠ¨é€Ÿåº¦é—®é¢˜ã€‚</p>
<p><strong>é›†æˆæ–¹å¼ï¼š</strong></p>
<ul>
<li>Spring Bootè‡ªåŠ¨æ£€æµ‹CRaCè¿è¡Œç¯å¢ƒ</li>
<li><code>ApplicationStartup</code>æ¥å£æ–°å¢CRaCç›¸å…³äº‹ä»¶å›è°ƒ</li>
<li><code>@Checkpoint</code>æ³¨è§£æ ‡è®°å…³é”®ä¿å­˜ç‚¹</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyController</span> {

    <span class="hljs-meta">@Checkpoint</span> <span class="hljs-comment">// JVMå°†åœ¨å¤„ç†é¦–ä¸ªè¯·æ±‚å‰åˆ›å»ºæ£€æŸ¥ç‚¹</span>
    <span class="hljs-meta">@GetMapping("/")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">home</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello from CRaC-enabled app!"</span>;
    }
}
</code></pre>
<p><strong>å®æµ‹æ•°æ®å¯¹æ¯”ï¼š</strong></p>




















<table><thead><tr><th/><th>Cold Start</th><th>CRaCæ¢å¤</th></tr></thead><tbody><tr><td>Webåº”ç”¨</td><td>3500ms</td><td>&lt;100ms</td></tr><tr><td>Batchä½œä¸š</td><td>4200ms</td><td>&lt;50ms</td></tr></tbody></table>
<h3 data-id="heading-5">3. Spring AIæ¨¡å—çš„æ­£å¼å¼•å…¥</h3>
<p><strong>å˜é©æ€§å½±å“ï¼š</strong>
AIåŠŸèƒ½çš„é›†æˆä½¿Springåº”ç”¨ç¬¬ä¸€æ¬¡å…·å¤‡äº†åŸç”Ÿçš„å¤§æ¨¡å‹äº¤äº’èƒ½åŠ›ã€‚</p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½ç»„ä»¶ï¼š</strong></p>
<ul>
<li><code>AiTemplate</code>: AIæ“ä½œçš„ç»Ÿä¸€å…¥å£æ¨¡æ¿ç±»</li>
<li><code>EmbeddingClient</code>:å‘é‡åµŒå…¥ç”Ÿæˆæ¥å£</li>
<li><code>PromptTemplate</code>:æç¤ºè¯æ¨¡æ¿å¼•æ“</li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomerSupportService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AiTemplate aiTemplate;

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">generateResponse</span><span class="hljs-params">(String query)</span> {
        <span class="hljs-type">Prompt</span> <span class="hljs-variable">prompt</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PromptBuilder</span>()
            .withTemplate(<span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å®¢æœä»£è¡¨ã€‚è¯·å›ç­”ä»¥ä¸‹å®¢æˆ·é—®é¢˜: {{query}}"</span>)
            .withVariable(<span class="hljs-string">"query"</span>, query)
            .build();
            
        <span class="hljs-keyword">return</span> aiTemplate.generate(prompt).getOutput();
    }
}
</code></pre>
<p><strong>é›†æˆç”Ÿæ€ç³»ç»Ÿï¼š</strong></p>
<ol>
<li>OpenAI/GPT4é»˜è®¤æ”¯æŒ
2.Bedrock(Amazon)ã€VertexAI(Google)é€‚é…å™¨å¯é€‰
3.HuggingFaceæœ¬åœ°æ¨¡å‹å…¼å®¹å±‚</li>
</ol>
<h3 data-id="heading-6">4.JDK21ç‰¹æ€§çš„æ·±åº¦æ•´åˆ</h3>
<p><strong>è¯­è¨€çº§æ”¹è¿›åˆ©ç”¨ï¼š</strong></p>
<h4 data-id="heading-7">Recordsæ¨¡å¼çš„è‡ªåŠ¨ç»‘å®š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/users")</span>
<span class="hljs-keyword">public</span> ResponseEntity&lt;User&gt; <span class="hljs-title function_">createUser</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> UserRecord(
    String username, 
    <span class="hljs-meta">@Email</span> String email,
    <span class="hljs-meta">@Size(min=8)</span> String password)</span> userInput) {
    
    <span class="hljs-comment">// Springè‡ªåŠ¨è§£æ„Recordå¹¶è¿›è¡ŒéªŒè¯  </span>
}
</code></pre>
<h4 data-id="heading-8">switchæ¨¡å¼åŒ¹é…ç®€åŒ–é€»è¾‘æ§åˆ¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@EventListener</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleEvent</span><span class="hljs-params">(ApplicationEvent event)</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">switch</span>(event) {
        <span class="hljs-keyword">case</span> ContextStartedEvent e -&gt; <span class="hljs-string">"ä¸Šä¸‹æ–‡å¯åŠ¨"</span>;
        <span class="hljs-keyword">case</span> PayloadApplicationEvent&lt;?&gt;(String payload) -&gt; <span class="hljs-string">"å­—ç¬¦ä¸²è´Ÿè½½:"</span>+payload;
        <span class="hljs-keyword">default</span> -&gt; <span class="hljs-string">"æœªçŸ¥äº‹ä»¶"</span>;
    };
}
</code></pre>
<h4 data-id="heading-9">sealedæ¥å£å¢å¼ºAPIè®¾è®¡å®‰å…¨è¾¹ç•Œ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">PaymentResult</span> 
    <span class="hljs-keyword">permits</span> Success, Failure, Pending {}
    
<span class="hljs-comment">// Controllerä¸­å¯ç›´æ¥ä½¿ç”¨å¯†å°ç±»å‹ä½œä¸ºè¿”å›å€¼    </span>
</code></pre>
<p>###5.GraalVMåŸç”Ÿé•œåƒæ„å»ºçš„é©å‘½æ€§æ”¹è¿›</p>
<p><strong>æ„å»ºè¿‡ç¨‹ä¼˜åŒ–äº®ç‚¹:</strong></p>
<p>1.<strong>å†…å­˜æ¶ˆè€—é™ä½40%</strong>:æ–°çš„åˆ†æç®—æ³•æ˜¾è‘—å‡å°‘æ„å»ºæ—¶å†…å­˜éœ€æ±‚<br/>
2.<strong>æ„å»ºé€Ÿåº¦æå‡60%</strong>:å¹¶è¡ŒåŒ–å¤„ç†å’Œå¢é‡ç¼–è¯‘æŠ€æœ¯å¼•å…¥<br/>
3.<strong>åå°„é…ç½®è‡ªåŠ¨åŒ–</strong>:è¿è¡Œæ—¶åŠ¨æ€æ”¶é›†å–ä»£æ‰‹åŠ¨é…ç½®</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#æ–°ç‰ˆæ„å»ºå‘½ä»¤ç¤ºä¾‹:</span>
./mvnw spring-boot:build-image \
<span class="hljs-attr">-Dspring-boot.aot.enabled</span>=<span class="hljs-literal">true</span> \
<span class="hljs-attr">-Dspring-boot.build-image.pullPolicy</span>=always \
<span class="hljs-attr">-Dspring-boot.build-image.builder</span>=paketobuildpacks/builder-jammy-tiny:latest  
</code></pre>
<p><strong>èµ„æºå ç”¨å¯¹æ¯”è¡¨:</strong></p>

























<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼ ç»ŸJAR</th><th>GraalVMåŸç”Ÿé•œåƒ</th></tr></thead><tbody><tr><td>å¯åŠ¨æ—¶é—´</td><td>2500ms</td><td>50ms</td></tr><tr><td>å†…å­˜å ç”¨</td><td>512MB</td><td>64MB</td></tr><tr><td>ç£ç›˜ç©ºé—´</td><td>35MB</td><td>22MB</td></tr></tbody></table>
<p>##æ€»ç»“ä¸å±•æœ›</p>
<p>SpringBoot3.2çš„è¿™äº›åˆ›æ–°ç‰¹æ€§ä¸ä»…ä»…æ˜¯ç®€å•çš„ç‰ˆæœ¬è¿­ä»£å‡çº§â€”â€”å®ƒä»¬ä»£è¡¨äº†ç°ä»£Javaå¼€å‘çš„ä¸‰ä¸ªå…³é”®æ–¹å‘è½¬å‹:</p>
<p>1.<strong>æ€§èƒ½èŒƒå¼è½¬ç§»</strong>:ä»å•çº¯ä¾èµ–ç¡¬ä»¶æ‰©å®¹è½¬å‘æ·±åº¦çš„è¿è¡Œæ—¶ä¼˜åŒ–<br/>
2.<strong>å¼€å‘æ¨¡å¼è¿›åŒ–</strong>:å£°æ˜å¼ç¼–ç¨‹æ‰©å±•åˆ°AIé›†æˆé¢†åŸŸ<br/>
3.<strong>éƒ¨ç½²å½¢æ€é©æ–°</strong>:äº‘åŸç”Ÿç‰¹è´¨é€šè¿‡GraalVMè¾¾åˆ°æ–°é«˜åº¦</p>
<p>å¯¹äºå·²ç»é‡‡ç”¨å¾®æœåŠ¡æ¶æ„çš„ä¼ä¸šè€Œè¨€,è¿™äº›æ”¹è¿›æ„å‘³ç€å¯ä»¥èŠ‚çœ30%-50%çš„åŸºç¡€è®¾æ–½æˆæœ¬;å¯¹äºå¼€å‘è€…ä¸ªä½“æ¥è¯´,ç”Ÿäº§åŠ›æå‡çš„æ•ˆæœæ›´åŠ ç›´è§‚å¯æ„Ÿã€‚</p>
<p>éšç€2024å¹´çš„ä¸´è¿‘,æˆ‘ä»¬æœ‰ç†ç”±ç›¸ä¿¡SpringBootå°†ç»§ç»­å¼•é¢†ä¼ä¸šçº§Javaå¼€å‘çš„æ½®æµæ–¹å‘ã€‚è¿™æ¬¡å‘å¸ƒçš„è¯¸å¤šåŠŸèƒ½ä¹Ÿæš—ç¤ºäº†æœªæ¥çš„å‘å±•è¶‹åŠ¿:æ›´æ·±åº¦çš„AIé›†æˆã€æ›´æ™ºèƒ½çš„ç¼–è¯‘å™¨åä½œä»¥åŠæ›´å½»åº•çš„æ— æœåŠ¡å™¨åŒ–æ”¯æŒéƒ½å·²åœ¨è·¯çº¿å›¾ä¸­æ¸…æ™°å¯è§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Trae WebGen-soloæ¨¡å¼å¿«é€Ÿå®Œæˆé¡¹ç›®]]></title>    <link>https://juejin.cn/post/7572537221540462607</link>    <guid>https://juejin.cn/post/7572537221540462607</guid>    <pubDate>2025-11-15T23:34:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572537221540462607" data-draft-id="7572537221540446223" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Trae WebGen-soloæ¨¡å¼å¿«é€Ÿå®Œæˆé¡¹ç›®"/> <meta itemprop="keywords" content="Trae,äººå·¥æ™ºèƒ½,å…¨æ ˆ"/> <meta itemprop="datePublished" content="2025-11-15T23:34:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Trae WebGen-soloæ¨¡å¼å¿«é€Ÿå®Œæˆé¡¹ç›®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T23:34:48.000Z" title="Sat Nov 15 2025 23:34:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¯ ä¸€ã€é¡¹ç›®ç›®æ ‡å®šä¹‰</h2>
<p>åç§°ï¼š<strong>Trae WebGen (Solo Mode)</strong><br/>
ä»»åŠ¡ï¼š</p>
<blockquote>
<p>ç”¨æˆ·è¾“å…¥ä¸€å¥è¯ï¼Œä¾‹å¦‚<br/>
â€œå¸®æˆ‘ç”Ÿæˆä¸€ä¸ªç®€çº¦çš„åšå®¢é¦–é¡µï¼Œæœ‰æ ‡é¢˜ã€æ–‡ç« é¢„è§ˆå’Œåº•éƒ¨ç‰ˆæƒã€‚â€<br/>
ç¨‹åºå³å¯è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªHTMLæ–‡ä»¶é¡µé¢ï¼Œå¹¶åœ¨ç”ŸæˆåŒºå®æ—¶é¢„è§ˆã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ğŸ§© äºŒã€æ ¸å¿ƒåŠŸèƒ½æ¨¡å—</h2>
<ol>
<li>
<p><strong>è¾“å…¥è§£æå±‚ï¼ˆInput Parserï¼‰</strong></p>
<ul>
<li>è§£æè‡ªç„¶è¯­è¨€éœ€æ±‚</li>
<li>æå–å…³é”®ç»„ä»¶ï¼ˆä¾‹å¦‚â€œæ ‡é¢˜â€ã€â€œæŒ‰é’®â€ã€â€œå¯¼èˆªæ â€ã€â€œå›¾æ–‡å¸ƒå±€â€ï¼‰</li>
</ul>
</li>
<li>
<p><strong>é¡µé¢æ¨¡æ¿ç”Ÿæˆå±‚ï¼ˆTemplate Engineï¼‰</strong></p>
<ul>
<li>åŸºäºå…³é”®å­—è°ƒç”¨å†…ç½®æ¨¡æ¿ä»£ç å—</li>
<li>åŠ¨æ€ç»„åˆå¸ƒå±€ç»“æ„</li>
<li>è‡ªåŠ¨æ’å…¥æ ·å¼ï¼ˆTailwind-like inline CSS æˆ–è‡ªå®šä¹‰ç”Ÿæˆï¼‰</li>
</ul>
</li>
<li>
<p><strong>æ¸²æŸ“ä¸å¯¼å‡ºå±‚</strong></p>
<ul>
<li>åœ¨æµè§ˆå™¨ä¸­å®æ—¶é¢„è§ˆ</li>
<li>ä¸€é”®å¯¼å‡º <code>.html</code> æ–‡ä»¶</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-2">ğŸ›  ä¸‰ã€æŠ€æœ¯æ ˆä¸çº¦æŸ</h2>






























<table><thead><tr><th>æ¨¡å—</th><th>æŠ€æœ¯</th><th>åŸå› </th></tr></thead><tbody><tr><td>UIé€»è¾‘</td><td>åŸç”Ÿ HTML + JS</td><td>ä¿æŒè½»é‡ã€é›¶ä¾èµ–</td></tr><tr><td>æ¨¡æ¿å¼•æ“</td><td>JSå­—ç¬¦ä¸²æ‹¼æ¥ + JSONæ¨¡æ¿æè¿°</td><td>å¿«é€Ÿçµæ´»</td></tr><tr><td>æ ·å¼ç³»ç»Ÿ</td><td>å†…è”CSSç”Ÿæˆå™¨</td><td>é¿å…å¤æ‚CSSä¾èµ–</td></tr><tr><td>æ—¶é—´é¢„ç®—</td><td>1å°æ—¶</td><td>SOLOæ¨¡å¼è¦æ±‚é«˜æ•ˆæç®€</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-3">âš™ï¸ å››ã€å¼€å‘é‡Œç¨‹ç¢‘</h2>





























<table><thead><tr><th>æ—¶é—´ï¼ˆåˆ†é’Ÿï¼‰</th><th>ä»»åŠ¡</th></tr></thead><tbody><tr><td>0-10</td><td>åˆå§‹åŒ–HTMLç•Œé¢ç»“æ„</td></tr><tr><td>10-25</td><td>ç¼–å†™Keywordè§£æé€»è¾‘</td></tr><tr><td>25-45</td><td>æ„å»ºæ¨¡æ¿ç”Ÿæˆå¼•æ“</td></tr><tr><td>45-55</td><td>å®Œæˆå®æ—¶æ¸²æŸ“æ¨¡å—</td></tr><tr><td>55-60</td><td>æ‰“åŒ…æµ‹è¯•ä¸å¯¼å‡ºåŠŸèƒ½</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-4">ğŸš€ äº”ã€èµ·å§‹ä»£ç ï¼ˆHTML + JSä¸€ä½“ï¼‰</h2>
<p>ä¸‹é¢æ˜¯ä¸€ä»½â€œå¯ç›´æ¥è¿è¡Œâ€çš„ç‰ˆæœ¬ï¼š</p>
<blockquote>
<p>æ‰“å¼€æµè§ˆå™¨åå³å¯ç›´æ¥ç”Ÿæˆç½‘é¡µç»“æ„ã€‚</p>
</blockquote>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width,initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Trae WebGen Solo<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-tag">body</span> { <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Segoe UI'</span>, sans-serif; <span class="hljs-attribute">background</span>: <span class="hljs-number">#f8f9fa</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>; }
    <span class="hljs-selector-tag">header</span> { <span class="hljs-attribute">background</span>: <span class="hljs-number">#111</span>; <span class="hljs-attribute">color</span>: white; <span class="hljs-attribute">padding</span>: <span class="hljs-number">1em</span>; <span class="hljs-attribute">text-align</span>: center; }
    <span class="hljs-selector-tag">main</span> { <span class="hljs-attribute">display</span>: flex; <span class="hljs-attribute">flex-direction</span>: column; <span class="hljs-attribute">align-items</span>: center; <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>; }
    <span class="hljs-selector-tag">textarea</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">80%</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>; <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>; }
    <span class="hljs-selector-tag">button</span> { <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>; <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>; <span class="hljs-attribute">font-weight</span>: bold; <span class="hljs-attribute">cursor</span>: pointer; <span class="hljs-attribute">background</span>: <span class="hljs-number">#007bff</span>; <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>; <span class="hljs-attribute">border</span>: none; <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;}
    <span class="hljs-selector-id">#output</span> { <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>; <span class="hljs-attribute">width</span>: <span class="hljs-number">90%</span>; <span class="hljs-attribute">background</span>: white; <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ddd</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>; <span class="hljs-attribute">min-height</span>: <span class="hljs-number">200px</span>; }
    <span class="hljs-selector-tag">iframe</span> { <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>; <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>; <span class="hljs-attribute">border</span>: none; <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>; }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Trae WebGen Solo Mode<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userInput"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥ç½‘é¡µéœ€æ±‚ï¼Œä¾‹å¦‚ã€ç”Ÿæˆæœ‰æ ‡é¢˜å’Œæ–‡ç« å¡ç‰‡çš„åšå®¢é¡µã€"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"generateWeb()"</span>&gt;</span>ç”Ÿæˆç½‘é¡µ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"output"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"preview"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">const</span> templates = {
      <span class="hljs-attr">title</span>: <span class="hljs-function"><span class="hljs-params">txt</span> =&gt;</span> <span class="hljs-string">`&lt;h1 style="text-align:center; font-size:2em; margin-top:20px;"&gt;<span class="hljs-subst">${txt || <span class="hljs-string">'æˆ‘çš„ç½‘é¡µæ ‡é¢˜'</span>}</span>&lt;/h1&gt;`</span>,
      <span class="hljs-attr">paragraph</span>: <span class="hljs-function"><span class="hljs-params">txt</span> =&gt;</span> <span class="hljs-string">`&lt;p style="line-height:1.7;"&gt;<span class="hljs-subst">${txt || <span class="hljs-string">'è¿™æ˜¯ä¸€æ®µç¤ºä¾‹æ–‡å­—ã€‚'</span>}</span>&lt;/p&gt;`</span>,
      <span class="hljs-attr">footer</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-string">`&lt;footer style="text-align:center;padding:10px;background:#222;color:#fff;"&gt;Â© 2025 Trae WebGen&lt;/footer&gt;`</span>,
      <span class="hljs-attr">article</span>: <span class="hljs-function">(<span class="hljs-params">title, body</span>) =&gt;</span> <span class="hljs-string">`
        &lt;article style="border-bottom:1px solid #ddd;margin:20px 0;padding-bottom:10px;"&gt;
          &lt;h2&gt;<span class="hljs-subst">${title || <span class="hljs-string">'æ–‡ç« æ ‡é¢˜'</span>}</span>&lt;/h2&gt;
          &lt;p&gt;<span class="hljs-subst">${body || <span class="hljs-string">'è¿™æ˜¯æ–‡ç« çš„é¢„è§ˆéƒ¨åˆ†â€¦â€¦'</span>}</span>&lt;/p&gt;
        &lt;/article&gt;`</span>
    };

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">parseInput</span>(<span class="hljs-params">text</span>) {
      <span class="hljs-keyword">const</span> keywords = [];
      <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/æ ‡é¢˜/</span>.<span class="hljs-title function_">test</span>(text)) keywords.<span class="hljs-title function_">push</span>(<span class="hljs-string">'title'</span>);
      <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/æ–‡ç« |åšå®¢/</span>.<span class="hljs-title function_">test</span>(text)) keywords.<span class="hljs-title function_">push</span>(<span class="hljs-string">'article'</span>);
      <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/æ®µè½|ä»‹ç»|è¯´æ˜/</span>.<span class="hljs-title function_">test</span>(text)) keywords.<span class="hljs-title function_">push</span>(<span class="hljs-string">'paragraph'</span>);
      <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/åº•éƒ¨|ç‰ˆæƒ/</span>.<span class="hljs-title function_">test</span>(text)) keywords.<span class="hljs-title function_">push</span>(<span class="hljs-string">'footer'</span>);
      <span class="hljs-keyword">return</span> keywords;
    }

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateHTML</span>(<span class="hljs-params">keywords</span>) {
      <span class="hljs-keyword">let</span> html = <span class="hljs-string">'&lt;section style="max-width:800px;margin:auto;padding:20px;"&gt;'</span>;
      <span class="hljs-keyword">if</span> (keywords.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'title'</span>)) html += templates.<span class="hljs-title function_">title</span>(<span class="hljs-string">'æ¬¢è¿è®¿é—®æˆ‘çš„ç½‘ç«™'</span>);
      <span class="hljs-keyword">if</span> (keywords.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'article'</span>)) {
        html += templates.<span class="hljs-title function_">article</span>(<span class="hljs-string">'ç¬¬ä¸€ç¯‡æ–‡ç« '</span>, <span class="hljs-string">'å†…å®¹é¢„è§ˆâ€¦â€¦'</span>);
        html += templates.<span class="hljs-title function_">article</span>(<span class="hljs-string">'ç¬¬äºŒç¯‡æ–‡ç« '</span>, <span class="hljs-string">'æ›´å¤šå†…å®¹æ­£åœ¨åŠ è½½â€¦â€¦'</span>);
      }
      <span class="hljs-keyword">if</span> (keywords.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'paragraph'</span>)) html += templates.<span class="hljs-title function_">paragraph</span>(<span class="hljs-string">'æœ¬ç«™æ˜¯ç”±Trae WebGenè‡ªåŠ¨ç”Ÿæˆã€‚'</span>);
      <span class="hljs-keyword">if</span> (keywords.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'footer'</span>)) html += templates.<span class="hljs-title function_">footer</span>();
      html += <span class="hljs-string">'&lt;/section&gt;'</span>;
      <span class="hljs-keyword">return</span> html;
    }

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateWeb</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> text = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'userInput'</span>).<span class="hljs-property">value</span>;
      <span class="hljs-keyword">const</span> keywords = <span class="hljs-title function_">parseInput</span>(text);
      <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">generateHTML</span>(keywords);
      <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'output'</span>).<span class="hljs-property">textContent</span> = result;

      <span class="hljs-keyword">const</span> iframe = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'preview'</span>);
      <span class="hljs-keyword">const</span> doc = iframe.<span class="hljs-property">contentDocument</span> || iframe.<span class="hljs-property">contentWindow</span>.<span class="hljs-property">document</span>;
      doc.<span class="hljs-title function_">open</span>();
      doc.<span class="hljs-title function_">write</span>(result);
      doc.<span class="hljs-title function_">close</span>();
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<hr/>
<h2 data-id="heading-5">ğŸ’¡ å…­ã€ç©æ³•æ‰©å±•ï¼ˆå¯é€‰ï¼‰</h2>
<ol>
<li>
<p><strong>åŠ å…¥ AI Prompt æ¨¡å—</strong></p>
<ul>
<li>å¯è¿æ¥ LLMï¼ˆå¦‚æœ¬åœ°æ¨¡å‹æˆ–APIï¼‰è‡ªåŠ¨æ¨æ–­ç½‘é¡µç»“æ„å…³é”®å­—ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä¿å­˜æ¨¡æ¿ç³»ç»Ÿ</strong></p>
<ul>
<li>ç”¨æˆ·å¯â€œæ”¶è—â€ç”Ÿæˆçš„ç½‘é¡µæ ·å¼ç‰‡æ®µã€‚</li>
</ul>
</li>
<li>
<p><strong>å¯¼å‡º ZIP åŒ…</strong></p>
<ul>
<li>ä¸€é”®å°†ç”Ÿæˆå†…å®¹æ‰“åŒ…ä¸‹è½½æˆå®Œæ•´ç½‘ç«™é¡¹ç›®ã€‚</li>
</ul>
</li>
<li>
<p><strong>å¤šäººæ¨¡å¼ï¼ˆTrae Co-opï¼‰</strong></p>
<ul>
<li>ä¸åŒç”¨æˆ·å¯ååŒç¼–è¾‘åŒä¸€é¡µé¢çš„æ„æ€ä¸ç”Ÿæˆé€»è¾‘ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-6">ğŸ§™â€â™‚ï¸ ä¸ƒã€ç»“è¯­</h2>
<p>Trae SOLO æ¨¡å¼çš„é­”åŠ›åœ¨äºï¼š</p>
<blockquote>
<p>ä¸é å¤§å›¢é˜Ÿï¼Œä¸æ‹¼æ¡†æ¶ç”Ÿæ€ï¼Œ<br/>
åªå‡­ä½ çš„é”®ç›˜ã€ç›´è§‰å’Œä¸€ç‚¹ç‚¹â€œé›¶ä¿¡ä»»çš„å‹‡æ°”â€ã€‚</p>
</blockquote>
<p>è¿™ä¸€å°æ—¶ï¼Œä½ ä¸åªæ˜¯å†™ä»£ç ã€‚<br/>
ä½ åœ¨ <strong>åˆ›é€ ä¸€ä¸ªæ‡‚ä½ è¯­è¨€çš„ç½‘é¡µç”Ÿæˆå™¨</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘ç”¨ SOLO Coder åš Excalidraw å¼€æºé¡¹ç›®äºŒæ¬¡å¼€å‘]]></title>    <link>https://juejin.cn/post/7572697146286735410</link>    <guid>https://juejin.cn/post/7572697146286735410</guid>    <pubDate>2025-11-16T00:17:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572697146286735410" data-draft-id="7572387666979979290" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘ç”¨ SOLO Coder åš Excalidraw å¼€æºé¡¹ç›®äºŒæ¬¡å¼€å‘"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-11-16T00:17:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸æƒ‘_"/> <meta itemprop="url" content="https://juejin.cn/user/1471609400466218"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘ç”¨ SOLO Coder åš Excalidraw å¼€æºé¡¹ç›®äºŒæ¬¡å¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1471609400466218/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸æƒ‘_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-16T00:17:44.000Z" title="Sun Nov 16 2025 00:17:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘æ€»è§‰å¾—ï¼ŒçœŸæ­£çš„äºŒæ¬¡å¼€å‘ä¸æ˜¯æŠŠåŠŸèƒ½è´´åˆ°ä»£ç é‡Œé‚£ä¹ˆç®€å•ï¼Œè€Œæ˜¯è¦åœ¨ä¸€ä¸ªæœ‰ç”Ÿå‘½åŠ›çš„å¼€æºé¡¹ç›®é‡Œï¼Œæ‘¸ç´¢å‡ºå®ƒçš„æ°”è´¨å’Œè„‰ç»œï¼Œç„¶åæŠŠè‡ªå·±çš„æ”¹åŠ¨åƒä¸€å—åˆé€‚çš„æœ¨æ–™ï¼Œæ‰“ç£¨åˆ°æ°å¥½å’¬åˆçš„ä½ç½®ã€‚Excalidraw æ­£å¥½æ˜¯é‚£ç§é€‚åˆé›•ç¢çš„é¡¹ç›®ï¼šæ¥å£æ¸…æ™°ã€ç»“æ„åˆ†æ˜ã€ç¤¾åŒºç¨³å¥ï¼Œç”šè‡³å®ƒçš„ç™½æ¿æœ¬èº«å°±é¼“åŠ±ä½ åœ¨ä¸Šé¢ç”»æ¥ç”»å»ã€‚äºæ˜¯æˆ‘æŠŠä¸€ä¸ªå°æ„¿æœ›ä¸¢ç»™ SOLO Coderï¼šæŠŠæ–‡æœ¬ â†’ å›¾å½¢çš„æ™ºèƒ½ç”Ÿæˆåšè¿›æ¥ï¼Œæµç¨‹å›¾ä¹Ÿå¥½ï¼Œæ€ç»´å¯¼å›¾ä¹Ÿç½¢ï¼Œæœ€å¥½çš„ç»“æœå°±æ˜¯æˆ‘èƒ½åœ¨ç¼–è¾‘å™¨é‡Œå†™ä¸€å¥è¯ï¼Œè½»è½»ä¸€ç‚¹ï¼Œå°±çœ‹åˆ°å›¾åƒåœ¨é¢å‰æˆå½¢ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44c9372d06e84782bc5118f4f5aad85a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=RC5YxC7RVoQcAgqy1bxDgb8PN4M%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€ç¯‡å®Œæ•´çš„AIç»˜å›¾åŠŸèƒ½äºŒæ¬¡å¼€å‘ç¬”è®°ï¼šæˆ‘ç”¨ SOLO Coder åœ¨ Excalidraw å¼€æºé¡¹ç›®ä¸­å¢åŠ æ–‡æœ¬â†’å›¾å½¢çš„ AI èƒ½åŠ›ï¼Œæ”¯æŒæµç¨‹å›¾ä¸æ€ç»´å¯¼å›¾ï¼Œå¹¶åœ¨ç¼–è¾‘å™¨é‡Œç›´æ¥é¢„è§ˆå’Œæ’å…¥ã€‚æ–‡ç« è¦†ç›–ç¯å¢ƒæ­å»ºã€å‰åç«¯æ”¹é€ ã€è”è°ƒéªŒè¯ã€é—®é¢˜å¤„ç†ä¸å¯å¤åˆ¶çš„æ“ä½œæ­¥éª¤ï¼Œå…ˆçœ‹æ•ˆæœå§ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ccc064be923f4f33aa161ff06c16a3b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=RaInPrvxWlWbgdAc6HCl%2F1%2Fj1tE%3D" alt="1114-2.gif" loading="lazy"/></p>
<p>ä½ å°†è·å¾—</p>
<ul>
<li>åœ¨ä¸»èœå•æ–°å¢AIç»˜å›¾å…¥å£ï¼Œæ‰“å¼€æ–‡æœ¬è½¬å›¾å¯¹è¯æ¡†ï¼ˆTTDï¼‰</li>
<li>å‰ç«¯å°†æ–‡æœ¬ä¸å›¾ç±»å‹å‘é€åˆ°åç«¯ï¼›åç«¯æ¥å…¥è±†åŒ…ï¼ˆVolcengine Arkï¼‰ç”Ÿæˆ Mermaid æ–‡æœ¬</li>
<li>é¢„è§ˆåŒºæ¸²æŸ“å¹¶ä¸€é”®æ’å…¥åˆ°ç”»å¸ƒï¼›å¤±è´¥æ—¶æœ‰æ¸…æ´—ä¸å…œåº•ç­–ç•¥</li>
</ul>
<p>åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å·²ç»é€šè¿‡SOLO Coder éƒ¨ç½²äº†æœ¬åœ°çš„Excalidrawï¼Œæ¥ç€è¦æ‰¾å…¥å£ï¼Œæ‰¾ä¸€ä¸ªäººèµ°è¿‘ç™½æ¿æ—¶è‡ªç„¶ä¼šæŒ‰ä¸‹çš„åœ°æ–¹ã€‚æˆ‘æŠŠAIç»˜å›¾æ”¾åˆ°ä¸»èœå•é‡Œï¼Œè®©å®ƒåƒä¸€ä¸ªè½»å¾®çš„é‚€è¯·è€Œä¸æ˜¯å¼ºåˆ¶çš„å¼•å¯¼ã€‚ç‚¹å‡»ä»¥åï¼Œå‰ç«¯æŠ›ç»™æˆ‘ç¬¬ä¸€ä¸ªæ€åº¦ä¸å¥½çš„æŠ¥é”™ï¼š<code>setAppState is not a function</code>ã€‚ä¸¤ç§’é’Ÿçš„å¿ƒæƒ…èµ·ä¼ä¹‹åï¼Œæˆ‘æ„è¯†åˆ°æ˜¯è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡AIå»è§£å†³ï¼Œäºæ˜¯æˆ‘æŠŠAIäº§ç”Ÿçš„é—®é¢˜æ¢ä¸ªäº†AIã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5f338985e11406b9860ce6e8fcf6165~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=SJLxzCniCWg6aBii2Pvtg3Yj9Bo%3D" alt="image.png" loading="lazy"/>
ä¸éš¾å‘ç°ï¼Œå®ƒå¾ˆå¿«ä¿®å¤äº†è¿™ä¸ªé—®é¢˜ï¼ŒExcalidraw çš„å‘½ä»¤å¼æ¥å£é‡Œæ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œåº”è¯¥ç”¨ <code>updateScene</code>ã€‚æŠŠå…¨å±€äº‹ä»¶æ”¹æˆ <code>updateScene({ appState: { openDialog: ... } })</code>ï¼Œå¯¹è¯æ¡†ä¹–ä¹–å¼¹å‡ºæ¥ï¼Œåƒç»ˆäºæ»‘åˆ°æ¡Œé¢æ­£ä¸­é—´çš„ä¸€æ¯èŒ¶ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ff559656a01476f87b1c4964105393b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=QxiB4NbZKEmsniQ%2FAzMthsodwDg%3D" alt="image.png" loading="lazy"/>
è¿™æ‰‡çª—å« TTDï¼Œå¯¹è¯æ¡†çš„å…¨åæ˜¯ Text-to-Diagramã€‚ä¹Ÿå°±æ˜¯ Text-to-Diagramã€‚å¯¹è¯æ¡†çš„å½¢æ€å¾ˆå‹å¥½ï¼Œå·¦è¾¹ä¸€ä¸ªæ–‡æœ¬æ¡†ï¼Œå³è¾¹ä¸€ä¸ªé¢„è§ˆåŒºï¼Œé¼ æ ‡åœ¨æ–‡æœ¬æ¡†é‡Œç‚¹å‡»ä¸€ä¸‹ï¼Œé‚£ç§æ‰‹æŒ‡å‹ä¸‹å»çš„ç¬é—´ï¼Œæˆ‘é¡ºæ‰‹æˆªäº†ä¸€å¼ å›¾ï¼Œç•™ä½œäº¤äº’èµ·ç‚¹çš„æ ‡è®°ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d2a10c0cf9c474eaa863bed731efa38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=unYW20bZPrUY%2FyH1AhcX1cZ0HUY%3D" alt="image.png" loading="lazy"/>
ç¬¬ä¸€æ¬¡æŒ‰ä¸‹Generateï¼Œæˆ‘çœ‹åˆ°çš„æ˜¯ä¸€ç‰‡æ²‰é»˜ï¼Œé¢„è§ˆåŒºå®‰é™åœ°ä¸åŠ¨ï¼Œè¿˜ç»™æˆ‘æŠ›äº†ä¸€ä¸ªGenerated an invalid diagramã€‚æˆ‘æŠŠè¿™ä¸ªæˆªå›¾ä¹Ÿç•™ä¸‹ï¼Œä½œä¸ºä¸€æ¬¡ä¸å¤ªæˆåŠŸçš„å°è¯•ã€‚é‚£ä¼šå„¿æˆ‘å°±æ˜ç™½äº†ï¼Œè¿™ä¸æ˜¯æ²¡è°ƒç”¨ï¼Œè€Œæ˜¯è°ƒç”¨äº†ï¼Œä½†è¿”å›çš„ Mermaid æ–‡æœ¬ä¸åˆèº«ã€‚æ€ç»´å¯¼å›¾çš„ Mermaid è¯­æ³•ç®—æ˜¯å®éªŒæ€§ï¼Œè½¬æ¢åº“ä¸æ˜¯å¯¹æ‰€æœ‰æƒ…å†µéƒ½æ‹¿å¾—å¾ˆç¨³ã€‚äºæ˜¯æˆ‘æŠŠåç«¯æ´¾ä¸Šå°ï¼Œæ­äº†ä¸€ä¸ªå¹²å‡€çš„ ai-backend ï¼Œç”¨ Express åšè·¯ç”±ï¼Œè®©å®ƒç«™åœ¨ excalidraw-master çš„æ—è¾¹ï¼ŒåŒæ—¶æ‚„æ‚„æ¥å…¥è±†åŒ…ï¼ˆVolcengine Arkï¼‰çš„ Chat Completionsï¼Œç”¨ .env.local ç•™ä½å¯†é’¥ï¼Œä¸å¾€å‰ç«¯æš´éœ²ï¼Œä¿æŒæ•´ä¸ªç»“æ„æ¸…çˆ½ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2678a90256624a3d928c1cf9c57e0aa3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=H07Z5HgwuhGmbTnB3mWtOEkwAKM%3D" alt="image.png" loading="lazy"/></p>
<p>åç«¯è¿™è¾¹ï¼Œæˆ‘ç›´æ¥æŠŠè±†åŒ…APIè¾“å…¥ä¸ªSOLOã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/788f70c912c3481ba51dab0abaf55e2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=ryqs5pm7F3UA%2BSSpRI%2B2DI3CE6U%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™é‡Œæœ‰è¯¦è§£çš„APIæ–‡æ¡£ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a761f7773fc40099239adccf93a0852~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=pZg82gVjaAonuZXXlMvFp284wM4%3D" alt="image.png" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ä¼šæ–°å»ºä¸€ä¸ª <code>ai-backend</code>ï¼Œè®©å®ƒç«™åœ¨ä¸»é¡¹ç›®çš„æ—ä¾§ï¼Œå•çº¯ã€å®‰é™ï¼Œè¯» <code>.env.local</code> é‡Œçš„å¯†é’¥ï¼Œä¸æŠŠä»»ä½•æ•æ„Ÿä¿¡æ¯æš´éœ²åˆ°å‰ç«¯ï¼Œä¹Ÿä¸å¾€ä»“åº“é‡Œä¹±æäº¤ã€‚è·¯ç”±åªåšä¸€ä»¶äº‹ï¼š<code>/v1/ai/text-to-diagram/generate</code> æ¥å— <code>prompt</code> å’Œ <code>type</code>ï¼Œä¼˜å…ˆè°ƒç”¨è±†åŒ… Ark Chat Completionsï¼ŒæŠŠè¿”å›çš„å†…å®¹æ¸…æ´—ä¸€ä¸‹ã€‚</p>
<p>æˆ‘å¾ˆåœ¨æ„äº¤äº’çš„å¾®å¦™ã€‚TTD å¯¹è¯æ¡†é‡Œé‚£æ®µè‹±æ–‡æç¤ºï¼Œè¯´ç³»ç»Ÿç›®å‰ç”¨ Mermaid å½“ä¸­é—´æ­¥éª¤ï¼Œè¿™å¥è¯åƒä¸€ä¸ªå‰ç½®çš„åè®®ï¼šä½ è¦ä¹ˆç»™æˆ‘æµç¨‹ã€è¦ä¹ˆç»™æˆ‘ç»“æ„ï¼Œæˆ‘æ¥æƒ³åŠæ³•å¸®ä½ æˆé•¿ä¸ºå›¾åƒã€‚ç”¨æˆ·å†™çš„æ˜¯äººè¯ï¼Œæ¨¡å‹ç†è§£çš„æ˜¯äººè¯ï¼Œä½†é¢„è§ˆéœ€è¦çš„æ˜¯è§„æ•´çš„è¯­è¨€ã€‚æ‰€ä»¥æˆ‘æŠŠç±»å‹çš„é€‰æ‹©å‰ç½®åˆ°ç”ŸæˆåŠ¨ä½œçš„ä¸Šæ–¹ï¼Œè®©è¿™ç»„ UI å½¢æˆä¸€ä¸ªå¿ƒæ™ºé“¾æ¡ï¼šè¾“å…¥ã€é€‰æ‹©ã€ç”Ÿæˆã€é¢„è§ˆã€æ’å…¥ã€‚ä½ èƒ½æ„Ÿåˆ°æ‰‹åŠ¿çš„é¡ºç•…ï¼Œèƒ½çœ‹åˆ°é¢„æœŸçš„ç»“æœï¼Œè¿™æ¯”ä»»ä½•æ–‡æ¡£æç¤ºéƒ½æœ‰æ•ˆã€‚</p>
<p>è¿‡ç¨‹ä¸­æœ‰ä¸€äº›æ¬¡è¦çš„æ’æ›²ï¼Œæ¯”å¦‚æµè§ˆå™¨æ ‡ç­¾æ„å¤–æ‰“å¼€æ—§ç«¯å£ 3000ï¼Œæ‰€ä»¥äº‹ä»¶ç›‘å¬å¹¶æ²¡æœ‰æ³¨å†Œåˆ°ä½ çœ‹çš„é¡µé¢ä¸Šï¼›æ¯”å¦‚æˆ‘ä¸€åº¦å°è¯•ç”¨ <code>window.addEventListener</code> åšä¸€äº›å…¨å±€æ§åˆ¶ï¼Œåæ¥è¿˜æ˜¯æŠŠå®ƒè§„æ•´åˆ° <code>useEffect</code>ï¼Œè·Ÿç€ <code>excalidrawAPI</code> èµ°ç”Ÿå‘½å‘¨æœŸï¼›æ¯”å¦‚Mermaid åŸæ–‡é‚£ä¸€é¡µä¼šè®©äººæƒ³æŸ¥çœ‹ç»†èŠ‚ï¼Œæˆ‘å°±ä¿ç•™äº†View as Mermaidçš„è·³è½¬ï¼Œç»™è°ƒè¯•è€…ä¸€ä¸ªåå¤‡çš„å·¥å…·ã€‚æ¯ä¸€ä¸ªå°åŠ¨ä½œéƒ½ä¸æ˜¯å¿…é¡»ï¼Œä½†å®ƒä»¬æ˜¯è´´å¿ƒï¼Œæˆ‘å¸Œæœ›è¿™å¥—ä½“éªŒä¸æ˜¯ç¡¬å¡è¿›å»çš„åŠŸèƒ½ï¼Œè€Œæ˜¯ä¸€ç§è‡ªç„¶çš„å»¶ä¼¸ã€‚</p>
<p>è±†åŒ…çš„æ¥å…¥è‡ªå·±ä¹Ÿå¸¦äº†ä¸€ç‚¹ä¸ªæ€§ã€‚æˆ‘æŠŠå¯†é’¥æ”¾åœ¨æœ¬åœ° <code>.env.local</code> é‡Œï¼Œä¸åœ¨ä»£ç é‡Œè½ç¬”ï¼Œä¹Ÿä¸åœ¨ç»ˆç«¯é‡Œå†™é•¿ä¸²çš„ä¸´æ—¶å˜é‡ã€‚æ¨¡å‹çš„å‚æ•°æ²¡æœ‰èµ°æç«¯ï¼Œ<code>max_completion_tokens</code> è®¾ä¸ªæ¸©å’Œçš„ä¸Šé™ï¼Œ<code>reasoning_effort</code> æ”¾åœ¨ä¸­ç­‰ï¼Œç¡®ä¿ç¨³å®šå’Œæˆæœ¬å¯æ§ã€‚æœ‰æ—¶ä¸ºäº†è®©é¢„è§ˆç¨³å®šï¼Œæˆ‘ä¼šæŠŠ Mindmap çš„ç”Ÿæˆæç¤ºæ‚„æ‚„å¼•å¯¼æˆ Flowchart çš„å±‚çº§è¡¨è¾¾ï¼Œæ¯•ç«Ÿè½¬æ¢é“¾è·¯å¯¹æµç¨‹å›¾æ›´å‹å¥½ï¼Œè¿™ä¸æ˜¯èƒŒå›ï¼Œæ›´åƒæ˜¯ä¸€ä¸ªå®ç”¨ä¸»ä¹‰çš„é€‰æ‹©ã€‚ç”¨æˆ·è¦çš„æ˜¯çœ‹åˆ°ç»“æ„å¹¶å¯ç¼–è¾‘çš„å›¾å½¢ï¼Œå›¾çš„æ ·å¼å¯ä»¥æ…¢æ…¢æ‰“ç£¨ï¼Œä½†ç©ºç™½çš„é¢„è§ˆç­‰ä¸åŠã€‚</p>
<p>è¿™æ—¶å€™æ•´æ¡é“¾è·¯å¼€å§‹æœ‰äº†æ¡æ‰‹çš„æ„Ÿè§‰ã€‚æˆ‘åœ¨é¦–é¡µæˆªå›¾ä¹‹åï¼Œåˆæˆªäº†ä¸€ä¸ªä¸»èœå•å±•å¼€çš„ç”»é¢ï¼Œé‚£é‡Œæœ‰AIç»˜å›¾è¿™ä¸ªæ–°æœ‹å‹ã€‚æˆ‘ç‚¹å¼€å¯¹è¯æ¡†ï¼Œåœ¨æ–‡æœ¬æ¡†é‡Œæ•²äº†ä¸€æ®µç»“æ„â€”â€”æ¯”å¦‚æŠŠé¡¹ç›®è§„åˆ’æ”¾åœ¨é¦–è¡Œï¼Œç„¶åç”¨çŸ­å¥æŠŠç›®æ ‡èŒƒå›´æ—¶é—´èµ„æºå›¢é˜Ÿé¢„ç®—ä¸€è¡Œä¸€è¡Œåˆ—å‡ºæ¥ï¼Œç„¶åæŒ‰ä¸‹Generateã€‚è¿™å›é¢„è§ˆåŒºä¸å†å†·åœºï¼Œå›¾åƒä»å³è¾¹é•¿å‡ºæ¥ï¼ŒèŠ‚ç‚¹ç´§ç´§æ’åˆ—ï¼ŒåƒæŠŠæ•£è½çš„ä¹¦é¡µç”¨çº¿ç©¿åœ¨ä¸€èµ·ã€‚æˆ‘è®©å®ƒè½åˆ°ç”»å¸ƒä¸­å¤®ï¼Œæ”¾å¤§ä¸€ç‚¹ï¼Œç»™è¿™ä¸ªæ—¶åˆ»ç•™ä¸€å¼ å¹²å‡€çš„æˆªå›¾ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06827f2c5b5f47cea490247124f5e17a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=4bEMWKimkbIA9yfzYrI7EG5AcW0%3D" alt="image.png" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ç‚¹å‡»InsertæŒ‰é’®ï¼Œå°±å¯ä»¥å°†å†…å®¹æ’å…¥åˆ°ç”»å¸ƒä¸­ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6508bd6916cc41dbb9b238748e363c0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5oORXw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763857063&amp;x-signature=vbRCSy2zV9VNECpx1p1IKCLSYKs%3D" alt="image.png" loading="lazy"/></p>
<p>å¶å°”ï¼Œå®ƒè¿˜ä¼šé—¹äº›æƒ…ç»ªã€‚æ¯”å¦‚ä½ è¾“å…¥äº†å¤ªé•¿çš„ä¸€æ®µè¯ï¼Œæ²¡æœ‰æ¸…æ™°çš„ç»“æ„ï¼Œå®ƒä¼šå†æ¬¡ç”¨Generated an invalid diagramæé†’ä½ ï¼Œè¯­æ°”åƒæœ‹å‹ã€‚è¿™ä¸ªæ—¶å€™ï¼Œä¸è¦æŠŠé”…ä¸¢ç»™æ¨¡å‹ï¼Œç¨å¾®è°ƒæ•´ä¸€ä¸‹æ–‡æœ¬ï¼ŒæŠŠä¸»é¢˜æ”¾åœ¨ç¬¬ä¸€è¡Œï¼ŒæŠŠä¸€çº§è¦ç‚¹ä¸€è¡Œä¸€ä¸ªï¼Œé£æ ¼æ›´åƒå¤§çº²ï¼Œå†æŒ‰ä¸€ä¸‹ç”Ÿæˆã€‚å®ƒä¼šç»™ä½ é¢å­ï¼Œé¢„è§ˆå°±å‡ºæ¥äº†ã€‚å¦‚æœä½ æƒ³æ›´ç¡®å®šä¸€ç‚¹ï¼ŒæŠŠå³ä¸Šè§’çš„ç±»å‹åˆ‡åˆ° Flowchartï¼Œå®ƒå‡ ä¹ä¸ä¼šè®©ä½ å¤±æœ›ã€‚</p>
<p>å†™åˆ°è¿™é‡Œï¼Œæˆ‘å¼€å§‹è§‰å¾—è¿™ä»¶äº‹å¹¶ä¸åªæ˜¯ç»™é¡¹ç›®åŠ äº†ä¸€ä¸ªAIåŠŸèƒ½ã€‚å®ƒæ›´åƒæ˜¯è®©ä¸€ä¸ªæˆç†Ÿçš„å·¥å…·ï¼Œå­¦ä¼šå¬å¦ä¸€ç§è¯­è¨€ã€‚Excalidraw åŸæœ¬é¼“åŠ±ä½ ç”¨æ‰‹å»ç”»ï¼Œç°åœ¨å®ƒä¹Ÿå¯ä»¥ç†è§£ä½ è¯´ç”»ä¸€ä¸ªè¿™æ ·çš„ç»“æ„ã€‚TTD å¯¹è¯æ¡†ä¸æ˜¯é­”æ³•ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªç†æ€§çš„æ¡¥æ¢ï¼ŒæŠŠäººçš„è¡¨è¾¾è¿æ¥åˆ°å›¾çš„è¡¨è¾¾ï¼Œå¸®ä½ è·¨è¿‡å»ã€‚SOLO Coder åœ¨è¿™ä»¶äº‹ä¸Šæ‰®æ¼”çš„è§’è‰²ï¼Œæ˜¯æŠŠé‚£äº›æ˜“ç¢çš„è¡”æ¥ç‚¹ï¼Œæ›¿ä½ ç¨³ç¨³åœ°å›ºå®šä½ã€‚ä¸‹è½½ã€å®‰è£…ã€èµ·æœåŠ¡ã€ä¿®äº‹ä»¶ã€æ¥æ¨¡å‹ã€æ¸…æ–‡æœ¬ã€å…œåº•ï¼Œè¿™äº›çœ‹èµ·æ¥åƒæ˜¯å·¥ç¨‹ç»†èŠ‚ï¼Œä½†å®ƒä»¬æ„æˆäº†æ•´ä¸ªä½“éªŒçš„å®æ„Ÿã€‚</p>
<p>å¦‚æœä½ é—®æˆ‘ï¼ŒSOLO Coder åœ¨è¿™ä»¶äº‹é‡Œåšäº†ä»€ä¹ˆï¼Œæˆ‘æƒ³è¯´å®ƒå¹¶æ²¡æœ‰æ›¿æˆ‘å†™æ‰æ‰€æœ‰ä»£ç ï¼Œä½†å®ƒå¸®æˆ‘æŠŠé‚£æ¡ä»ä¸‹è½½åˆ°çœ‹è§çš„è·¯å¾„é“ºå¹³äº†ã€‚åœ¨æœ¬åœ°æ‹‰èµ·é¡¹ç›®ï¼Œåè°ƒå·¥ä½œåŒºä¾èµ–ã€å¯åŠ¨ Viteï¼Œä¿®å¥½å…¥å£äº‹ä»¶ï¼ŒæŠŠåç«¯æœåŠ¡è·‘èµ·æ¥ï¼Œè±†åŒ…çš„å¯†é’¥è—åœ¨ .env.local ï¼Œè°ƒç”¨é“¾æ¡ä¸²ä¸Šå»ï¼Œé¢„è§ˆé“¾æ¡åˆç¨³ä½ï¼Œå†ç»™è¿™æ¡è·¯æ”¾å‡ ä¸ªè·¯æ ‡ï¼Œè¿™äº›å·¥ä½œå¬èµ·æ¥ä¸èµ·çœ¼ï¼Œå´è®©ä¸€åˆ‡å˜å¾—é¡ºç•…ã€‚äºŒæ¬¡å¼€å‘çœŸæ­£çš„é­…åŠ›åœ¨äºæ­¤ï¼šä½ ä¸æ˜¯æŠŠè‡ªå·±çš„æƒ³æ³•è´´ä¸Šå»ï¼Œè€Œæ˜¯æŠŠå®ƒæ‰è¿›æ¥ï¼Œè·Ÿé¡¹ç›®çš„è¯­è¨€åœ¨ä¸€èµ·ï¼Œè·Ÿå®ƒçš„èŠ‚å¥åœ¨ä¸€èµ·ã€‚</p>
<p>æˆ‘æŠŠè¿™ç¯‡æ–‡ç« å†™æˆä¸€æ®µè¿ç»­çš„å™äº‹ï¼Œä¸è®²é¦–å…ˆã€å…¶æ¬¡ã€æœ€åï¼Œä¸åšæŠ¥å‘Šé‚£æ ·å †è§‚ç‚¹ã€‚æˆ‘åªæ˜¯æŠŠè‡ªå·±çš„å®æ“æ‘Šå¼€ï¼Œè®©é‚£äº›æŒ‰é”®ã€é“¾æ¥ã€è·¯å¾„ã€æ‹è§’ã€é”™è¯¯å’Œä¿®å¤å…¨éƒ½åœ¨åœ°ä¸Šï¼Œå¸¦ç€ä½ èµ°è¿‡ä¸€æ¬¡ã€‚ç­‰ä½ èµ°å®Œï¼Œä½ ä¼šå‘ç°ä½ ä¹Ÿèƒ½è¿™æ ·ï¼ŒæŠŠä¸€ä¸ªæƒ³æ³•äº¤ç»™ SOLO Coderï¼Œç»™å®ƒä¸€ä¸ªè¢«éªŒè¯çš„å‡ºå£ï¼Œåªè¦ä½ æ„¿æ„åœ¨ä¸­é—´è¡¥ä¸Šä¸€ç‚¹ç‚¹è€å¿ƒï¼Œè¿™æ¡è·¯ä¼šå˜å¾—åƒä¸€æ¡å¹³æ•´çš„æœ¨æ¿é“ï¼Œè¸©ä¸Šå»ä¸ä¼šå‘å‡ºå±å˜çš„å£°å“ã€‚è¿™ä¸ªé¡¹ç›®äºæ˜¯æœ‰äº†ä¸€ä¸ªæ–°ä¹ æƒ¯ï¼šä¸ä»…ç”¨æ‰‹ç”»ï¼Œè¿˜èƒ½ç”¨è¯ç”»ã€‚å›¾åƒä¸å†éœ€è¦ä½ å»ä¸€ä¸ªä¸ªæ‘†æ”¾ï¼Œå®ƒå¯ä»¥æŒ‰ç…§ä½ çš„æ–‡å­—ï¼Œè‡ªå·±ç«™åœ¨ç”»å¸ƒä¸Šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisï¼ˆ126ï¼‰ Redisåœ¨å®æ—¶ç»Ÿè®¡ä¸­çš„åº”ç”¨æœ‰å“ªäº›ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572497847771693083</link>    <guid>https://juejin.cn/post/7572497847771693083</guid>    <pubDate>2025-11-15T23:33:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572497847771693083" data-draft-id="7572510909446291506" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisï¼ˆ126ï¼‰ Redisåœ¨å®æ—¶ç»Ÿè®¡ä¸­çš„åº”ç”¨æœ‰å“ªäº›ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T23:33:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisï¼ˆ126ï¼‰ Redisåœ¨å®æ—¶ç»Ÿè®¡ä¸­çš„åº”ç”¨æœ‰å“ªäº›ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T23:33:23.000Z" title="Sat Nov 15 2025 23:33:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Redis åœ¨å®æ—¶ç»Ÿè®¡ä¸­çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼Œä¸»è¦ç”¨äºä»¥ä¸‹å‡ ä¸ªåœºæ™¯ï¼šé¡µé¢è®¿é—®é‡ç»Ÿè®¡ã€ç”¨æˆ·è¡Œä¸ºåˆ†æã€è®¡æ•°å™¨ã€æ•°æ®é‡‡æ ·ã€å®æ—¶æ•°æ®èšåˆç­‰ã€‚ä¸‹é¢è¯¦ç»†æè¿°è¿™äº›åº”ç”¨åœºæ™¯ï¼Œå¹¶ç»“åˆ Java ä»£ç ç¤ºä¾‹è¿›è¡Œè®²è§£ã€‚</p>
<h3 data-id="heading-0">1. é¡µé¢è®¿é—®é‡ç»Ÿè®¡</h3>
<p>Redis å¯ä»¥ç”¨äºç»Ÿè®¡é¡µé¢çš„è®¿é—®é‡ï¼Œé€šè¿‡ä½¿ç”¨ Redis çš„è‡ªå¢æ“ä½œï¼Œå¯ä»¥å¿«é€Ÿè®°å½•é¡µé¢çš„è®¿é—®æ¬¡æ•°ã€‚</p>
<h4 data-id="heading-1">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PageViewCounter</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">pageKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"page:home"</span>;
            
            <span class="hljs-comment">// å¢åŠ é¡µé¢è®¿é—®é‡</span>
            jedis.incr(pageKey);
            
            <span class="hljs-comment">// è·å–å½“å‰é¡µé¢è®¿é—®é‡</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">pageViews</span> <span class="hljs-operator">=</span> jedis.get(pageKey);
            System.out.println(<span class="hljs-string">"Home page views: "</span> + pageViews);
        }
    }
}
</code></pre>
<h3 data-id="heading-2">2. ç”¨æˆ·è¡Œä¸ºåˆ†æ</h3>
<p>Redis å¯ä»¥è®°å½•ç”¨æˆ·çš„å„ç§è¡Œä¸ºï¼ˆä¾‹å¦‚ç™»å½•ã€ç‚¹å‡»ã€è´­ä¹°ç­‰ï¼‰ï¼Œå¹¶è¿›è¡Œå®æ—¶åˆ†æã€‚</p>
<h4 data-id="heading-3">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserBehaviorTracker</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user123"</span>;
            <span class="hljs-type">String</span> <span class="hljs-variable">behaviorKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"behavior:"</span> + userId;
            
            <span class="hljs-comment">// è®°å½•ç”¨æˆ·è¡Œä¸º</span>
            jedis.hincrBy(behaviorKey, <span class="hljs-string">"login"</span>, <span class="hljs-number">1</span>);
            jedis.hincrBy(behaviorKey, <span class="hljs-string">"click"</span>, <span class="hljs-number">5</span>);
            jedis.hincrBy(behaviorKey, <span class="hljs-string">"purchase"</span>, <span class="hljs-number">2</span>);
            
            <span class="hljs-comment">// è·å–ç”¨æˆ·è¡Œä¸ºç»Ÿè®¡</span>
            System.out.println(<span class="hljs-string">"User behavior: "</span> + jedis.hgetAll(behaviorKey));
        }
    }
}
</code></pre>
<h3 data-id="heading-4">3. è®¡æ•°å™¨</h3>
<p>Redis çš„è‡ªå¢æ“ä½œéå¸¸é€‚åˆç”¨äºå®ç°å„ç§è®¡æ•°å™¨ï¼Œä¾‹å¦‚ç½‘ç«™çš„è®¿é—®é‡ã€å•†å“é”€å”®é‡ç­‰ã€‚</p>
<h4 data-id="heading-5">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericCounter</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">counterKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"counter:generic"</span>;
            
            <span class="hljs-comment">// è‡ªå¢è®¡æ•°å™¨</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> jedis.incr(counterKey);
            System.out.println(<span class="hljs-string">"Current count: "</span> + count);
        }
    }
}
</code></pre>
<h3 data-id="heading-6">4. æ•°æ®é‡‡æ ·</h3>
<p>Redis å¯ä»¥ç”¨äºå­˜å‚¨å’Œåˆ†æå®æ—¶æ•°æ®æ ·æœ¬ï¼Œä¾‹å¦‚è®°å½•æ¯åˆ†é’Ÿçš„è®¿é—®é‡ï¼Œä»¥ä¾¿åç»­è¿›è¡Œç»Ÿè®¡åˆ†æã€‚</p>
<h4 data-id="heading-7">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> java.time.Instant;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataSampling</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">sampleKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"samples:pageviews"</span>;
            <span class="hljs-type">long</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> Instant.now().getEpochSecond();
            
            <span class="hljs-comment">// è®°å½•å½“å‰æ—¶é—´æˆ³çš„è®¿é—®é‡</span>
            jedis.zadd(sampleKey, timestamp, String.valueOf(timestamp));
            
            <span class="hljs-comment">// è·å–æœ€è¿‘ä¸€åˆ†é’Ÿçš„è®¿é—®é‡</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">oneMinuteAgo</span> <span class="hljs-operator">=</span> timestamp - <span class="hljs-number">60</span>;
            <span class="hljs-type">long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> jedis.zcount(sampleKey, oneMinuteAgo, timestamp);
            System.out.println(<span class="hljs-string">"Page views in the last minute: "</span> + count);
        }
    }
}
</code></pre>
<h3 data-id="heading-8">5. å®æ—¶æ•°æ®èšåˆ</h3>
<p>é€šè¿‡ Redis çš„ Hash æ•°æ®ç»“æ„ï¼Œå¯ä»¥å®ç°å¯¹å¤šç§æ•°æ®çš„èšåˆç»Ÿè®¡ï¼Œä¾‹å¦‚ç»Ÿè®¡å¤šä¸ªæœåŠ¡å™¨çš„ CPU è´Ÿè½½ã€å†…å­˜ä½¿ç”¨ç­‰ã€‚</p>
<h4 data-id="heading-9">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RealTimeAggregation</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">aggregationKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"aggregation:cpu_load"</span>;
            
            <span class="hljs-comment">// æ¨¡æ‹Ÿè®°å½•ä¸åŒæœåŠ¡å™¨çš„ CPU è´Ÿè½½</span>
            jedis.hincrByFloat(aggregationKey, <span class="hljs-string">"server1"</span>, <span class="hljs-number">20.5</span>);
            jedis.hincrByFloat(aggregationKey, <span class="hljs-string">"server2"</span>, <span class="hljs-number">30.2</span>);
            jedis.hincrByFloat(aggregationKey, <span class="hljs-string">"server3"</span>, <span class="hljs-number">25.1</span>);
            
            <span class="hljs-comment">// è·å–èšåˆç»“æœ</span>
            System.out.println(<span class="hljs-string">"CPU Load: "</span> + jedis.hgetAll(aggregationKey));
        }
    }
}
</code></pre>
<h3 data-id="heading-10">6. å®æ—¶ç”¨æˆ·åœ¨çº¿ç»Ÿè®¡</h3>
<p>åˆ©ç”¨ Redis çš„ Set æ•°æ®ç»“æ„ï¼Œå¯ä»¥ç»Ÿè®¡å½“å‰åœ¨çº¿ç”¨æˆ·æ•°ï¼Œå¹¶è¿›è¡Œå®æ—¶æŸ¥è¯¢ã€‚</p>
<h4 data-id="heading-11">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OnlineUserCounter</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">onlineUsersKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"users:online"</span>;
            <span class="hljs-type">String</span> <span class="hljs-variable">userId</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user123"</span>;
            
            <span class="hljs-comment">// ç”¨æˆ·ä¸Šçº¿</span>
            jedis.sadd(onlineUsersKey, userId);
            
            <span class="hljs-comment">// è·å–å½“å‰åœ¨çº¿ç”¨æˆ·æ•°</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">onlineCount</span> <span class="hljs-operator">=</span> jedis.scard(onlineUsersKey);
            System.out.println(<span class="hljs-string">"Current online users: "</span> + onlineCount);
            
            <span class="hljs-comment">// ç”¨æˆ·ä¸‹çº¿</span>
            jedis.srem(onlineUsersKey, userId);
            
            <span class="hljs-comment">// è·å–å½“å‰åœ¨çº¿ç”¨æˆ·æ•°</span>
            onlineCount = jedis.scard(onlineUsersKey);
            System.out.println(<span class="hljs-string">"Current online users after logout: "</span> + onlineCount);
        }
    }
}
</code></pre>
<p>Redis çš„é«˜æ€§èƒ½å’Œä¸°å¯Œçš„æ•°æ®ç»“æ„ä½¿å…¶æˆä¸ºå®æ—¶ç»Ÿè®¡åº”ç”¨çš„ç†æƒ³é€‰æ‹©ã€‚é€šè¿‡è¿™äº›ç¤ºä¾‹ä»£ç ï¼Œå¯ä»¥çœ‹åˆ° Redis åœ¨é¡µé¢è®¿é—®é‡ç»Ÿè®¡ã€ç”¨æˆ·è¡Œä¸ºåˆ†æã€è®¡æ•°å™¨ã€æ•°æ®é‡‡æ ·ã€å®æ—¶æ•°æ®èšåˆä»¥åŠå®æ—¶ç”¨æˆ·åœ¨çº¿ç»Ÿè®¡ç­‰æ–¹é¢çš„å¼ºå¤§åŠŸèƒ½ã€‚å¸Œæœ›è¿™äº›ç¤ºä¾‹èƒ½å¤Ÿå¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨ Redis äºå®æ—¶ç»Ÿè®¡åœºæ™¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisï¼ˆ127ï¼‰Redisçš„å†…éƒ¨æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572781559766646834</link>    <guid>https://juejin.cn/post/7572781559766646834</guid>    <pubDate>2025-11-15T23:34:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572781559766646834" data-draft-id="7572515402796204082" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisï¼ˆ127ï¼‰Redisçš„å†…éƒ¨æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T23:34:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisï¼ˆ127ï¼‰Redisçš„å†…éƒ¨æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T23:34:20.000Z" title="Sat Nov 15 2025 23:34:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Redis æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œå…¶åº•å±‚å®ç°ä¾èµ–äºå¤šç§æ•°æ®ç»“æ„ã€‚è¿™äº›æ•°æ®ç»“æ„ä¸ä»…å†³å®šäº† Redis çš„é«˜æ€§èƒ½ï¼Œä¹Ÿä½¿å¾— Redis åœ¨å¤„ç†ä¸åŒç±»å‹çš„æ•°æ®æ—¶èƒ½å¤Ÿä¿æŒé«˜æ•ˆã€‚ä¸‹é¢è¯¦ç»†ä»‹ç» Redis çš„å†…éƒ¨æ•°æ®ç»“æ„ï¼Œå¹¶ç»“åˆå…·ä½“ä»£ç ç¤ºä¾‹è¿›è¡Œè§£é‡Šã€‚</p>
<h3 data-id="heading-0">1. å­—ç¬¦ä¸²ï¼ˆStringï¼‰</h3>
<p>å­—ç¬¦ä¸²æ˜¯ Redis ä¸­æœ€åŸºæœ¬çš„æ•°æ®ç±»å‹ã€‚å®ƒä¸ä»…å¯ä»¥å­˜å‚¨æ–‡æœ¬ï¼Œè¿˜å¯ä»¥å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ï¼Œå¦‚å›¾åƒæˆ–åºåˆ—åŒ–å¯¹è±¡ã€‚</p>
<h4 data-id="heading-1">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisStringExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-comment">// è®¾ç½®å­—ç¬¦ä¸²é”®å€¼</span>
            jedis.set(<span class="hljs-string">"key"</span>, <span class="hljs-string">"value"</span>);
            
            <span class="hljs-comment">// è·å–å­—ç¬¦ä¸²é”®å€¼</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> jedis.get(<span class="hljs-string">"key"</span>);
            System.out.println(<span class="hljs-string">"Stored string in redis: "</span> + value);
        }
    }
}
</code></pre>
<h3 data-id="heading-2">2. å“ˆå¸Œï¼ˆHashï¼‰</h3>
<p>å“ˆå¸Œç±»å‹æ˜¯ä¸€ä¸ªé”®å€¼å¯¹é›†åˆï¼Œç±»ä¼¼äº Java çš„ <code>HashMap</code>ã€‚å“ˆå¸Œç‰¹åˆ«é€‚åˆå­˜å‚¨å¯¹è±¡ã€‚</p>
<h4 data-id="heading-3">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisHashExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">userKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:1000"</span>;
            
            <span class="hljs-comment">// è®¾ç½®å“ˆå¸Œå­—æ®µ</span>
            jedis.hset(userKey, <span class="hljs-string">"name"</span>, <span class="hljs-string">"John"</span>);
            jedis.hset(userKey, <span class="hljs-string">"age"</span>, <span class="hljs-string">"30"</span>);
            
            <span class="hljs-comment">// è·å–å“ˆå¸Œå­—æ®µ</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> jedis.hget(userKey, <span class="hljs-string">"name"</span>);
            <span class="hljs-type">String</span> <span class="hljs-variable">age</span> <span class="hljs-operator">=</span> jedis.hget(userKey, <span class="hljs-string">"age"</span>);
            
            System.out.println(<span class="hljs-string">"Name: "</span> + name);
            System.out.println(<span class="hljs-string">"Age: "</span> + age);
        }
    }
}
</code></pre>
<h3 data-id="heading-4">3. åˆ—è¡¨ï¼ˆListï¼‰</h3>
<p>åˆ—è¡¨æ˜¯ä¸€ä¸ªæœ‰åºçš„å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œå¯ä»¥ä»åˆ—è¡¨çš„ä¸¤ç«¯è¿›è¡Œå‹å…¥å’Œå¼¹å‡ºæ“ä½œï¼Œç±»ä¼¼äº LinkedListã€‚</p>
<h4 data-id="heading-5">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisListExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">listKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"taskQueue"</span>;
            
            <span class="hljs-comment">// ä»åˆ—è¡¨å·¦ä¾§å‹å…¥</span>
            jedis.lpush(listKey, <span class="hljs-string">"Task1"</span>, <span class="hljs-string">"Task2"</span>, <span class="hljs-string">"Task3"</span>);
            
            <span class="hljs-comment">// ä»åˆ—è¡¨å³ä¾§å¼¹å‡º</span>
            <span class="hljs-type">String</span> <span class="hljs-variable">task</span> <span class="hljs-operator">=</span> jedis.rpop(listKey);
            System.out.println(<span class="hljs-string">"Popped task: "</span> + task);
            
            <span class="hljs-comment">// è·å–åˆ—è¡¨æ‰€æœ‰å…ƒç´ </span>
            System.out.println(<span class="hljs-string">"Remaining tasks: "</span> + jedis.lrange(listKey, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>));
        }
    }
}
</code></pre>
<h3 data-id="heading-6">4. é›†åˆï¼ˆSetï¼‰</h3>
<p>é›†åˆæ˜¯ä¸€ä¸ªæ— åºçš„å­—ç¬¦ä¸²é›†åˆï¼Œç”¨äºé«˜æ•ˆåœ°è¿›è¡Œæ·»åŠ ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œã€‚</p>
<h4 data-id="heading-7">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisSetExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">setKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"userRoles"</span>;
            
            <span class="hljs-comment">// æ·»åŠ é›†åˆå…ƒç´ </span>
            jedis.sadd(setKey, <span class="hljs-string">"admin"</span>, <span class="hljs-string">"editor"</span>, <span class="hljs-string">"viewer"</span>);
            
            <span class="hljs-comment">// è·å–é›†åˆæ‰€æœ‰å…ƒç´ </span>
            System.out.println(<span class="hljs-string">"User roles: "</span> + jedis.smembers(setKey));
            
            <span class="hljs-comment">// åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">isAdmin</span> <span class="hljs-operator">=</span> jedis.sismember(setKey, <span class="hljs-string">"admin"</span>);
            System.out.println(<span class="hljs-string">"Is admin: "</span> + isAdmin);
        }
    }
}
</code></pre>
<h3 data-id="heading-8">5. æœ‰åºé›†åˆï¼ˆSorted Setï¼‰</h3>
<p>æœ‰åºé›†åˆæ˜¯ä¸€ä¸ªå¸¦æœ‰åˆ†æ•°çš„å­—ç¬¦ä¸²é›†åˆï¼Œé›†åˆä¸­çš„å…ƒç´ æŒ‰åˆ†æ•°è¿›è¡Œæ’åºï¼Œé€‚ç”¨äºå®ç°æ’è¡Œæ¦œç­‰åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-9">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisSortedSetExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">sortedSetKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"leaderboard"</span>;
            
            <span class="hljs-comment">// æ·»åŠ æœ‰åºé›†åˆå…ƒç´ </span>
            jedis.zadd(sortedSetKey, <span class="hljs-number">100</span>, <span class="hljs-string">"user1"</span>);
            jedis.zadd(sortedSetKey, <span class="hljs-number">200</span>, <span class="hljs-string">"user2"</span>);
            jedis.zadd(sortedSetKey, <span class="hljs-number">150</span>, <span class="hljs-string">"user3"</span>);
            
            <span class="hljs-comment">// è·å–æœ‰åºé›†åˆå…ƒç´ </span>
            System.out.println(<span class="hljs-string">"Leaderboard: "</span> + jedis.zrevrangeWithScores(sortedSetKey, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>));
        }
    }
}
</code></pre>
<h3 data-id="heading-10">6. ä½å›¾ï¼ˆBitmapï¼‰</h3>
<p>ä½å›¾æ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥å¯¹å­—ç¬¦ä¸²ä¸­çš„å•ä¸ªä½è¿›è¡Œæ“ä½œï¼Œé€‚ç”¨äºå®ç°å¸ƒéš†è¿‡æ»¤å™¨ç­‰åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-11">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisBitmapExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">bitmapKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"user:active"</span>;
            
            <span class="hljs-comment">// è®¾ç½®æŸä¸ªä½ä¸º1</span>
            jedis.setbit(bitmapKey, <span class="hljs-number">1</span>, <span class="hljs-literal">true</span>);
            jedis.setbit(bitmapKey, <span class="hljs-number">3</span>, <span class="hljs-literal">true</span>);
            
            <span class="hljs-comment">// è·å–æŸä¸ªä½çš„å€¼</span>
            <span class="hljs-type">boolean</span> <span class="hljs-variable">isActive</span> <span class="hljs-operator">=</span> jedis.getbit(bitmapKey, <span class="hljs-number">1</span>);
            System.out.println(<span class="hljs-string">"User is active at position 1: "</span> + isActive);
            
            <span class="hljs-comment">// ç»Ÿè®¡ä½å›¾ä¸­å€¼ä¸º1çš„ä½æ•°</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">activeUserCount</span> <span class="hljs-operator">=</span> jedis.bitcount(bitmapKey);
            System.out.println(<span class="hljs-string">"Active user count: "</span> + activeUserCount);
        }
    }
}
</code></pre>
<h3 data-id="heading-12">7. HyperLogLog</h3>
<p>HyperLogLog æ˜¯ä¸€ç§ç”¨äºåŸºæ•°ä¼°ç®—çš„æ¦‚ç‡æ€§æ•°æ®ç»“æ„ï¼Œé€‚ç”¨äºå¤§è§„æ¨¡å»é‡è®¡æ•°ã€‚</p>
<h4 data-id="heading-13">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisHyperLogLogExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">hllKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"uniqueVisitors"</span>;
            
            <span class="hljs-comment">// æ·»åŠ å…ƒç´ </span>
            jedis.pfadd(hllKey, <span class="hljs-string">"user1"</span>, <span class="hljs-string">"user2"</span>, <span class="hljs-string">"user3"</span>, <span class="hljs-string">"user2"</span>);
            
            <span class="hljs-comment">// ä¼°ç®—åŸºæ•°</span>
            <span class="hljs-type">long</span> <span class="hljs-variable">uniqueCount</span> <span class="hljs-operator">=</span> jedis.pfcount(hllKey);
            System.out.println(<span class="hljs-string">"Unique visitors: "</span> + uniqueCount);
        }
    }
}
</code></pre>
<h3 data-id="heading-14">8. æµï¼ˆStreamï¼‰</h3>
<p>æµæ˜¯ Redis 5.0 å¼•å…¥çš„æ•°æ®ç»“æ„ï¼Œé€‚ç”¨äºå¤„ç†æ—¥å¿—å’Œæ¶ˆæ¯é˜Ÿåˆ—ã€‚</p>
<h4 data-id="heading-15">ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> redis.clients.jedis.Jedis;
<span class="hljs-keyword">import</span> redis.clients.jedis.StreamEntryID;

<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisStreamExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> (<span class="hljs-type">Jedis</span> <span class="hljs-variable">jedis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Jedis</span>(<span class="hljs-string">"localhost"</span>, <span class="hljs-number">6379</span>)) {
            <span class="hljs-type">String</span> <span class="hljs-variable">streamKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"mystream"</span>;
            
            <span class="hljs-comment">// æ·»åŠ æµå…ƒç´ </span>
            Map&lt;String, String&gt; entry = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
            entry.put(<span class="hljs-string">"name"</span>, <span class="hljs-string">"Alice"</span>);
            entry.put(<span class="hljs-string">"message"</span>, <span class="hljs-string">"Hello, World!"</span>);
            jedis.xadd(streamKey, StreamEntryID.NEW_ENTRY, entry);
            
            <span class="hljs-comment">// è¯»å–æµå…ƒç´ </span>
            List&lt;Map.Entry&lt;String, List&lt;StreamEntry&gt;&gt;&gt; streamEntries = jedis.xread(StreamEntryID.UNRECEIVED_ENTRY, streamKey);
            <span class="hljs-keyword">for</span> (Map.Entry&lt;String, List&lt;StreamEntry&gt;&gt; streamEntry : streamEntries) {
                System.out.println(<span class="hljs-string">"Stream: "</span> + streamEntry.getKey());
                <span class="hljs-keyword">for</span> (StreamEntry entry : streamEntry.getValue()) {
                    System.out.println(<span class="hljs-string">"Entry ID: "</span> + entry.getID());
                    System.out.println(<span class="hljs-string">"Fields: "</span> + entry.getFields());
                }
            }
        }
    }
}
</code></pre>
<p>ä¸Šè¿°ä»£ç å±•ç¤ºäº† Redis ä¸­å‡ ç§ä¸»è¦æ•°æ®ç»“æ„çš„ä½¿ç”¨ç¤ºä¾‹ã€‚æ¯ç§æ•°æ®ç»“æ„éƒ½æœ‰å…¶ç‰¹å®šçš„ç”¨é€”å’Œä¼˜åŠ¿ï¼Œå¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„æ¥å®ç°é«˜æ•ˆçš„æ•°æ®å­˜å‚¨å’Œæ“ä½œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é›¶ä¿¡ä»»æ¶æ„ä¸‹çš„ WebAIGC æœåŠ¡å®‰å…¨æŠ€æœ¯å‡çº§æ–¹å‘]]></title>    <link>https://juejin.cn/post/7572534419879673891</link>    <guid>https://juejin.cn/post/7572534419879673891</guid>    <pubDate>2025-11-15T23:29:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572534419879673891" data-draft-id="7572714389942353972" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é›¶ä¿¡ä»»æ¶æ„ä¸‹çš„ WebAIGC æœåŠ¡å®‰å…¨æŠ€æœ¯å‡çº§æ–¹å‘"/> <meta itemprop="keywords" content="Trae,äººå·¥æ™ºèƒ½,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-15T23:29:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é›¶ä¿¡ä»»æ¶æ„ä¸‹çš„ WebAIGC æœåŠ¡å®‰å…¨æŠ€æœ¯å‡çº§æ–¹å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T23:29:46.000Z" title="Sat Nov 15 2025 23:29:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šæˆ‘ä»¬å·²ä¸å†â€œç›¸ä¿¡â€ä¸€åˆ‡</h2>
<p>åœ¨äº’è”ç½‘æ±Ÿæ¹–çš„æ—§æ—¶ä»£ï¼Œå®‰å…¨é˜²çº¿çš„å“²å­¦åƒæ˜¯ä¸€åº§å¤åŸé—¨ï¼š</p>
<blockquote>
<p>â€œåªè¦è¿›äº†åŸï¼Œå…¨æ˜¯è‡ªå·±äººï¼›åªè¦åœ¨å¤–é¢ï¼Œå…¨æ˜¯åäººã€‚â€</p>
</blockquote>
<p>è¿™ç§â€œåŸå†…æ— æ•Œâ€çš„é€»è¾‘ç®€å•ç²—æš´ï¼Œä½†å½“æˆ‘ä»¬çš„ <strong>åº”ç”¨ã€ç”¨æˆ·å’ŒAIæ¨¡å‹</strong> åˆ†æ•£åˆ°å…¨çƒå„åœ°çš„äº‘ç«¯èŠ‚ç‚¹ä¸Šæ—¶ï¼ŒåŸé—¨çš„æ¦‚å¿µå˜å¾—åƒã€Šä¸‰ä½“ã€‹çš„é¢å£è®¡åˆ’â€”â€”çœ‹ä¼¼é˜²å¾¡ï¼Œå®åˆ™é€æ˜ã€‚</p>
<p>äºæ˜¯ï¼Œæ–°æ—¶ä»£çš„å£å·å˜æˆäº†ï¼š</p>
<blockquote>
<p><strong>é›¶ä¿¡ä»»ï¼ˆZero Trustï¼‰â€”â€”é»˜è®¤æ— ä¿¡ä»»ï¼Œä¸€åˆ‡éªŒè¯é‡å¯ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ä¸€ã€é›¶ä¿¡ä»»ç†å¿µçš„å†…æ ¸å“²å­¦</h2>
<p>å¦‚æœæŠŠè®¡ç®—ç³»ç»Ÿæ¯”ä½œä¸€ä¸ªç¤¾ä¼šï¼Œé‚£ä¹ˆâ€œé›¶ä¿¡ä»»â€å°±åƒæ˜¯ä¸€ä¸ªåä¹Œæ‰˜é‚¦çš„ç†æ€§å›½åº¦ï¼š</p>
<ul>
<li>å…¬æ°‘ï¼ˆç”¨æˆ·ã€åº”ç”¨ã€è®¾å¤‡ï¼‰æ¯æ¬¡å‡ºé—¨ï¼ˆç½‘ç»œè®¿é—®ï¼‰éƒ½è¦èº«ä»½è¯æ˜ã€‚</li>
<li>è¯ä»¶é€šè¿‡å¤šå±‚éªŒè¯ï¼ˆèº«ä»½è®¤è¯ã€å¤šå› ç´ éªŒè¯ã€è¡Œä¸ºåˆ†æï¼‰ã€‚</li>
<li>è­¦å¯Ÿç³»ç»Ÿï¼ˆå®‰å…¨ç­–ç•¥å¼•æ“ï¼‰å®æ—¶ç›‘æ§æ˜¯å¦æœ‰å¼‚å¸¸ä¸¾åŠ¨ã€‚</li>
</ul>
<p>åœ¨è®¡ç®—çš„ä¸–ç•Œé‡Œï¼Œè¿™æ„å‘³ç€ï¼š</p>

























<table><thead><tr><th>ä¼ ç»Ÿå®‰å…¨æ¨¡å‹</th><th>é›¶ä¿¡ä»»æ¨¡å‹</th></tr></thead><tbody><tr><td>å…ˆä¿¡ä»»ã€åéªŒè¯</td><td>æ°¸ä¸ä¿¡ä»»ã€æŒç»­éªŒè¯</td></tr><tr><td>ç½‘ç»œè¾¹ç•Œä¿æŠ¤</td><td>åŠ¨æ€èº«ä»½å’Œä¸Šä¸‹æ–‡é©±åŠ¨</td></tr><tr><td>é™æ€è®¿é—®æ§åˆ¶</td><td>ç»†ç²’åº¦ç­–ç•¥ã€è‡ªé€‚åº”è®¿é—®</td></tr><tr><td>å†…ç½‘=å®‰å…¨åŒº</td><td>å†…ç½‘=æ½œåœ¨å¨èƒæº</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">äºŒã€WebAIGC çš„æ–°å®‰å…¨ç—›ç‚¹</h2>
<p>å½“ AIGCï¼ˆAI Generated Contentï¼‰ èµ°å‘ Web åŒ–ï¼Œå®‰å…¨é—®é¢˜å˜å¾—å‰æ‰€æœªæœ‰åœ°â€œå…ƒâ€ï¼š</p>
<ol>
<li><strong>Prompt æ³¨å…¥æ”»å‡»</strong>ï¼š<br/>
æ”»å‡»è€…åƒç»™AIå–‚äº†ä¸€é¢—â€œé‚ªå¿µç§å­â€ï¼Œè®©å®ƒè‡ªæˆ‘ç¯¡æ”¹è¾“å‡ºé€»è¾‘ã€‚</li>
<li><strong>æ¨¡å‹çªƒå–ä¸è¶Šæƒè°ƒç”¨</strong>ï¼š<br/>
æ”¹æ”¹è¯·æ±‚å¤´ä¹Ÿè®¸å°±èƒ½è®¿é—®å¦ä¸€ä½ç”¨æˆ·çš„å®šåˆ¶æ¨¡å‹æ¥å£ï¼ŒçŠ¹å¦‚å·åˆ«äººé­”æ³•å·è½´ã€‚</li>
<li><strong>æ•°æ®æŠ•æ¯’</strong>ï¼š<br/>
è®­ç»ƒé›†è¢«æ··å…¥æ¶æ„æ•°æ®ï¼ŒAIåƒè¯»äº†é”™è¯¯çš„ã€Šèµ„æ²»é€šé‰´ã€‹ã€‚</li>
<li><strong>ç”Ÿæˆå†…å®¹æ»¥ç”¨</strong>ï¼š<br/>
AIç”Ÿæˆå¯èƒ½è¢«ç”¨äºè¯ˆéª—ã€é’“é±¼æˆ–è™šå‡å®£ä¼ ï¼Œé˜²æŠ¤éœ€è¦â€œè¯­ä¹‰çº§â€å®‰å…¨åˆ†æã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-3">ä¸‰ã€é›¶ä¿¡ä»»æ¶æ„ä¸‹çš„å®‰å…¨æŠ€æœ¯å‡çº§æ–¹å‘</h2>
<h3 data-id="heading-4">1. <strong>èº«ä»½æ— è¾¹ç•ŒåŒ–è®¤è¯</strong></h3>
<p>ä¼ ç»Ÿçš„ OAuth2ã€JWT å·²ç»æ˜¯è€å…µï¼Œä½†åœ¨é›¶ä¿¡ä»»ä¸‹ï¼Œæˆ‘ä»¬è¦åšåˆ°ï¼š</p>
<ul>
<li>æ¯æ¬¡ API è®¿é—®çš†éœ€ <strong>å®æ—¶èº«ä»½éªŒè¯</strong>ï¼›</li>
<li>å¼•å…¥ <strong>åŠ¨æ€ä¸Šä¸‹æ–‡æ ‡ç­¾</strong>ï¼ˆè®¾å¤‡æŒ‡çº¹ã€åœ°ç†ä½ç½®ã€è®¿é—®æ—¶é—´æ®µï¼‰ï¼›</li>
<li>å®ç°â€œä¿¡ä»»æ»‘åŠ¨çª—å£â€ï¼šä¿¡ä»»ä¸æ˜¯ä¸€æ¬¡è®¤è¯ï¼Œè€Œæ˜¯ä¸ªä¸æ–­è¡°å‡çš„å‡½æ•°ã€‚</li>
</ul>
<blockquote>
<p>å°±åƒå–å’–å•¡æç¥ï¼Œæ—¶é—´ä¸€ä¹…å°±å¾—å†æ¥ä¸€æ¯ã€‚</p>
</blockquote>
<p><strong>ç¤ºä¾‹ï¼šåŠ¨æ€ä»¤ç‰Œç­¾å‘æœºåˆ¶ï¼ˆJSä¼ªä»£ç ï¼‰</strong></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">issueDynamicToken</span>(<span class="hljs-params">userContext</span>) </span>{
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">trustScore</span> = <span class="hljs-title function_ invoke__">calculateTrust</span>(userContext); <span class="hljs-comment">// åŸºäºè®¾å¤‡ã€åœ°ç†ã€å†å²è¡Œä¸º</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">expireTime</span> = trustScore &gt; <span class="hljs-number">80</span> ? <span class="hljs-number">10</span> * <span class="hljs-number">60</span> : <span class="hljs-number">3</span> * <span class="hljs-number">60</span>; <span class="hljs-comment">// é«˜å¯ä¿¡ç¼©çŸ­å¯¿å‘½ï¼Œé˜²æ»¥ç”¨</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">token</span> = <span class="hljs-title function_ invoke__">signToken</span>({
    <span class="hljs-attr">uid</span>: userContext.id,
    <span class="hljs-attr">trust</span>: trustScore,
    <span class="hljs-attr">exp</span>: Date.<span class="hljs-title function_ invoke__">now</span>() + expireTime * <span class="hljs-number">1000</span>
  });
  <span class="hljs-keyword">return</span> token;
}
</code></pre>
<hr/>
<h3 data-id="heading-5">2. <strong>å¤šå±‚ç­–ç•¥ç®¡æ§ï¼ˆPolicy-as-Codeï¼‰</strong></h3>
<p>äººç±»å®‰å…¨å›¢é˜Ÿå¤ªæ…¢ï¼ŒAIæ—¶ä»£çš„é˜²å¾¡è¦â€œè‡ªåŠ¨é•¿ç‰™â€ï¼š</p>
<ul>
<li>ç­–ç•¥ä»¥ä»£ç å½¢å¼å£°æ˜ï¼ˆJSON/YAML/JS è¡¨è¾¾å¼ï¼‰ã€‚</li>
<li>å®æ—¶è®¡ç®—â€œæ˜¯å¦å…è®¸è®¿é—®ã€å…è®¸ç”Ÿæˆæˆ–è°ƒç”¨æ¨¡å‹â€ã€‚</li>
<li>å®‰å…¨å›¢é˜Ÿä¸å†å‘å¸ƒæ–‡æ¡£ï¼Œè€Œæ˜¯ç›´æ¥å‘å¸ƒâ€œå®‰å…¨é€»è¾‘æ¨¡å—â€ã€‚</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šæ™ºèƒ½ç­–ç•¥æ£€æŸ¥</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">policyCheck</span>(<span class="hljs-params">request, userContext</span>) {
  <span class="hljs-keyword">const</span> rules = [
    { <span class="hljs-attr">condition</span>: userContext.<span class="hljs-property">trust</span> &lt; <span class="hljs-number">50</span>, <span class="hljs-attr">action</span>: <span class="hljs-string">'deny'</span>, <span class="hljs-attr">reason</span>: <span class="hljs-string">'Low Trust'</span> },
    { <span class="hljs-attr">condition</span>: request.<span class="hljs-property">endpoint</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'/admin'</span>), <span class="hljs-attr">role</span>: <span class="hljs-string">'Admin'</span> },
    { <span class="hljs-attr">condition</span>: <span class="hljs-regexp">/forbidden|jailbreak/i</span>.<span class="hljs-title function_">test</span>(request.<span class="hljs-property">input</span>), <span class="hljs-attr">action</span>: <span class="hljs-string">'sanitize'</span> }
  ];

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> rule <span class="hljs-keyword">of</span> rules) {
    <span class="hljs-keyword">if</span> (evalRule(rule.<span class="hljs-property">condition</span>, request, userContext)) {
      <span class="hljs-keyword">return</span> rule.<span class="hljs-property">action</span> || <span class="hljs-string">'allow'</span>;
    }
  }
}
</code></pre>
<blockquote>
<p>è¿™å°±åƒä¸€ä½â€œæ•°å­—è´¨æ£€å‘˜â€ï¼Œæ¯æ¬¡AIå‘è¨€å‰éƒ½è¢«è¯¢é—®ï¼šâ€œä½ ç¡®å®šä½ è¯¥è¯´è¿™ä¸ªå—ï¼Ÿâ€</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">3. <strong>å†…å®¹çº§é˜²å¾¡ä¸è¯­ä¹‰å®¡è®¡</strong></h3>
<p>åœ¨ AIGC ç¯å¢ƒä¸­ï¼Œä¿¡æ¯æµä¸æ˜¯å­—èŠ‚æµï¼Œè€Œæ˜¯â€œæ„ä¹‰æµâ€ã€‚<br/>
å®‰å…¨æ§åˆ¶å¿…é¡»å…·å¤‡è¯­ä¹‰ç†è§£ï¼š</p>
<ul>
<li>å¯ç”¨ <strong>å†…å®¹è¿‡æ»¤æ¨¡å‹</strong>ï¼šæ£€æµ‹æ»¥ç”¨ã€æ•æ„Ÿè¡¨è¾¾ã€æ•°æ®æ³„éœ²ã€‚</li>
<li>å¯¹ç”Ÿæˆè¯·æ±‚è¿›è¡Œâ€œæ„å›¾åˆ†æâ€ï¼Œæ£€æµ‹è¶Šæƒæç¤ºè¯ã€‚</li>
<li>åˆ©ç”¨ <strong>Embedding ç›¸ä¼¼åº¦é˜²å¾¡</strong>ï¼šé˜²æ­¢éšè—å¼æ”»å‡»ï¼Œæ¯”å¦‚åˆ©ç”¨è¯­ä¹‰é‡å†™ç»•è¿‡è§„åˆ™ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">4. <strong>æ¨¡å‹çº§é˜²æŠ¤ä¸è®¿é—®æ°´å°</strong></h3>
<p>æœªæ¥ï¼Œæ¨¡å‹ä¸ä»…éœ€è¦â€œé˜²å¾¡è¾“å…¥â€ï¼Œè¿˜éœ€è¦â€œè¯æ˜è‡ªå·±â€ï¼š</p>
<ul>
<li><strong>æ¨¡å‹æ°´å°</strong>ï¼šåœ¨è¾“å‡ºä¸­åµŒå…¥å¯éªŒè¯çš„æ•°å­¦ç‰¹å¾ï¼Œç”¨äºæº¯æºã€‚</li>
<li><strong>å¤šé‡è°ƒç”¨å‰ªè£</strong>ï¼šé™åˆ¶å‚æ•°è§„æ¨¡ã€é˜²æ»¥ç”¨å¤§æ¨¡å‹è®¡ç®—èµ„æºã€‚</li>
<li><strong>å¯éªŒè¯æ‰§è¡Œç¯å¢ƒï¼ˆVEEï¼‰</strong> ï¼šç¡®ä¿æ¨¡å‹æƒé‡å’Œè¿è¡Œé€»è¾‘æœªè¢«ç¯¡æ”¹ã€‚</li>
</ul>
<blockquote>
<p>ç®€å•è¯´ï¼Œå°±æ˜¯è®©AIä¹Ÿè£…ä¸Šé˜²ç›—é—¨ï¼Œè¿˜å¸¦GPSå®šä½ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">å››ã€WebAIGC çš„å®‰å…¨å‡çº§è·¯çº¿å›¾</h2>



































<table><thead><tr><th>é˜¶æ®µ</th><th>ç›®æ ‡</th><th>æŠ€æœ¯æ‰‹æ®µ</th></tr></thead><tbody><tr><td><strong>é˜¶æ®µ1</strong></td><td>åŸºç¡€èº«ä»½å®‰å…¨</td><td>MFAã€åŠ¨æ€ä»¤ç‰Œã€APIç½‘å…³éªŒè¯</td></tr><tr><td><strong>é˜¶æ®µ2</strong></td><td>ç­–ç•¥è‡ªåŠ¨åŒ–</td><td>Policy-as-Codeã€è¡Œä¸ºæ£€æµ‹å¼•æ“</td></tr><tr><td><strong>é˜¶æ®µ3</strong></td><td>å†…å®¹çº§é˜²å¾¡</td><td>Promptåˆ†æã€ç”Ÿæˆè¯­ä¹‰å®¡è®¡</td></tr><tr><td><strong>é˜¶æ®µ4</strong></td><td>å¯éªŒè¯AI</td><td>æ¨¡å‹æ°´å°ã€å¯ä¿¡æ‰§è¡Œç¯å¢ƒ</td></tr><tr><td><strong>é˜¶æ®µ5</strong></td><td>è‡ªé€‚åº”é›¶ä¿¡ä»»AI</td><td>AIç®¡AIçš„è‡ªä¸»å®‰å…¨æ²»ç†ç³»ç»Ÿ</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-9">äº”ã€ç»“è¯­ï¼šä¿¡ä»»ä¹‹æ­»ï¼Œæ™ºèƒ½ä¹‹ç”Ÿ</h2>
<p>é›¶ä¿¡ä»»ä¸æ˜¯â€œä¸ä¿¡ä»»â€ï¼Œè€Œæ˜¯ <strong>å°†ä¿¡ä»»çš„å®šä¹‰æ‹¿å›ç§‘å­¦ä¸–ç•Œ</strong>ã€‚<br/>
åœ¨ AIGC æ—¶ä»£ï¼Œå®‰å…¨è¾¹ç•Œæ¨¡ç³Šï¼Œäººæœºåä½œå¯†åˆ‡ï¼Œæˆ‘ä»¬è¦è®©ç³»ç»Ÿåƒè©¹å§†æ–¯Â·é‚¦å¾·ä¸€æ ·ç†æ™ºï¼Œåˆåƒåº„å­ä¸€æ ·æ¸…é†’ã€‚</p>
<blockquote>
<p><strong>çœŸæ­£çš„å®‰å…¨ï¼Œä¸æ˜¯ç­‘å¢™ï¼Œè€Œæ˜¯è®©ç³»ç»Ÿå­¦ä¼šæ€€ç–‘ã€‚</strong></p>
</blockquote>
<hr/>
<p><em>å°‘ä¸€ç‚¹ç›²ç›®ä¿¡ä»»ï¼Œå¤šä¸€ä»½è®¡ç®—çš„æ€€ç–‘ã€‚<br/>
åœ¨é›¶ä¿¡ä»»çš„ä¸–ç•Œé‡Œï¼ŒAIæ‰ä¼šçœŸçš„è‡ªç”±ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[REST API ä¸å‰åç«¯äº¤äº’ï¼šè®©åº”ç”¨çœŸæ­£è·‘èµ·æ¥]]></title>    <link>https://juejin.cn/post/7572781559766548530</link>    <guid>https://juejin.cn/post/7572781559766548530</guid>    <pubDate>2025-11-15T21:48:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572781559766548530" data-draft-id="7572515402796023858" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="REST API ä¸å‰åç«¯äº¤äº’ï¼šè®©åº”ç”¨çœŸæ­£è·‘èµ·æ¥"/> <meta itemprop="keywords" content="åç«¯,Python,IPython"/> <meta itemprop="datePublished" content="2025-11-15T21:48:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            REST API ä¸å‰åç«¯äº¤äº’ï¼šè®©åº”ç”¨çœŸæ­£è·‘èµ·æ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T21:48:51.000Z" title="Sat Nov 15 2025 21:48:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨ç°ä»£ Web å¼€å‘ä¸­ï¼Œå‰åç«¯åˆ†ç¦»å·²ç»æˆä¸ºä¸»æµã€‚æ— è®ºä½ æ˜¯åœ¨åšç®¡ç†åå°ã€å°ç¨‹åºã€ç§»åŠ¨ App è¿˜æ˜¯å¤æ‚çš„ Web ç³»ç»Ÿï¼Œéƒ½ç»•ä¸å¼€ä¸€ä¸ªå…³é”®æŠ€æœ¯ï¼š
<strong>REST API</strong>ã€‚</p>
</blockquote>
<p>å½“ä½ èƒ½ç”¨ Python å†™å‡ºæ¸…æ™°ã€è§„èŒƒã€æ˜“ç”¨çš„ REST API æ—¶ï¼Œä½ åšçš„é¡¹ç›®å°±èƒ½è¢«å„ç±»å‰ç«¯è½»æ¾è°ƒç”¨ï¼Œä»è€Œå…·å¤‡çœŸæ­£çš„â€œäº’è”ç½‘åº”ç”¨èƒ½åŠ›â€ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°±èŠèŠ REST API æ˜¯ä»€ä¹ˆã€ä¸ºä»€ä¹ˆé‡è¦ã€è¯¥æ€ä¹ˆç”¨ Python å®ç°ï¼Œä»¥åŠå‰åç«¯ä¹‹é—´æ˜¯å¦‚ä½•äº¤äº’çš„ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯ REST API</h2>
<p>REST çš„å…¨ç§°æ˜¯ Representational State Transferï¼Œæ˜¯ä¸€ç§è½»é‡çº§ã€æ ‡å‡†åŒ–çš„æ¥å£è®¾è®¡é£æ ¼ã€‚</p>
<p>å®ƒä¸å¤æ‚ï¼Œç”¨ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼š</p>
<p><strong>ä½¿ç”¨ URL è¡¨ç¤ºèµ„æºï¼Œç”¨ HTTP æ–¹æ³•è¡¨è¾¾æ“ä½œã€‚</strong></p>
<p>æ¯”å¦‚â€œæ–‡ç« â€è¿™ä¸ªèµ„æºï¼š</p>



































<table><thead><tr><th>æ“ä½œ</th><th>æ–¹æ³•</th><th>ç¤ºä¾‹ URL</th></tr></thead><tbody><tr><td>è·å–æ–‡ç« åˆ—è¡¨</td><td>GET</td><td>/api/articles/</td></tr><tr><td>åˆ›å»ºä¸€ç¯‡æ–‡ç« </td><td>POST</td><td>/api/articles/</td></tr><tr><td>è·å–æŸç¯‡æ–‡ç« è¯¦æƒ…</td><td>GET</td><td>/api/articles/10/</td></tr><tr><td>æ›´æ–°æ–‡ç« </td><td>PUT</td><td>/api/articles/10/</td></tr><tr><td>åˆ é™¤æ–‡ç« </td><td>DELETE</td><td>/api/articles/10/</td></tr></tbody></table>
<p>è¿™å°±æ˜¯ REST æœ€æ ¸å¿ƒçš„æ€æƒ³ï¼š
<strong>URL è¡¨èµ„æºï¼Œæ–¹æ³•è¡¨è¡Œä¸ºã€‚</strong></p>
<hr/>
<h2 data-id="heading-1">äºŒã€REST API ä¸ºä»€ä¹ˆé‡è¦</h2>
<p>åœ¨å‰åç«¯åˆ†ç¦»æ¶æ„ä¸‹ï¼š</p>
<ul>
<li>å‰ç«¯ï¼šè´Ÿè´£é¡µé¢ã€å±•ç¤ºã€äº¤äº’</li>
<li>åç«¯ï¼šè´Ÿè´£æ•°æ®ã€ä¸šåŠ¡é€»è¾‘ã€æƒé™ã€å­˜å‚¨</li>
</ul>
<p>ä¸¤è€…é€šè¿‡ API è¿æ¥ï¼Œåƒè¿™æ ·ï¼š</p>
<pre><code class="hljs language-css" lang="css">React / Vue / å°ç¨‹åº / App  â†’  <span class="hljs-attribute">REST</span> API  â†’  Python åç«¯
</code></pre>
<p>å¥½å¤„éå¸¸æ˜ç¡®ï¼š</p>
<ol>
<li><strong>çµæ´»ï¼šä¸€ä¸ªåç«¯ï¼Œå¯ä»¥æœåŠ¡å¤šç«¯</strong></li>
<li><strong>è§£è€¦ï¼šå‰ç«¯æ”¹ç•Œé¢ä¸å½±å“åç«¯é€»è¾‘</strong></li>
<li><strong>å¯æµ‹è¯•ï¼šAPI å¯ä»¥ç”¨ Postmanã€curl æµ‹è¯•</strong></li>
<li><strong>æ ‡å‡†åŒ–ï¼šç»“æ„æ¸…æ™°ï¼Œå›¢é˜Ÿåä½œæ›´å®¹æ˜“</strong></li>
</ol>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ä½ å†™å¥½ APIï¼Œåº”ç”¨å°±èƒ½éšä¾¿æ¥å„ç§å‰ç«¯ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€Python å¦‚ä½•å®ç° REST API</h2>
<p>Python æœ‰å¾ˆå¤šæ–¹å¼å¯ä»¥åˆ›å»º REST APIï¼Œæœ€å¸¸ç”¨çš„æœ‰ï¼š</p>
<ul>
<li><strong>Flask</strong>ï¼šè½»é‡çµæ´»</li>
<li><strong>Django REST framework</strong>ï¼šå¼ºå¤§ã€ä¼ä¸šçº§</li>
<li><strong>FastAPI</strong>ï¼šé«˜æ€§èƒ½ã€ç°ä»£åŒ–ï¼ˆæ–‡æ¡£å¥½ã€é€Ÿåº¦å¿«ï¼‰</li>
</ul>
<p>ä¸‹é¢æˆ‘ä»¬ç”¨ Flask ç¤ºèŒƒä¸€ä¸ªæœ€ç®€å•çš„ REST APIã€‚</p>
<hr/>
<h2 data-id="heading-3">å››ã€ç”¨ Flask å†™ä¸€ä¸ªç®€å• REST API</h2>
<p>ä½ å…ˆå®‰è£… Flaskï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install flask
</code></pre>
<p>å†™ä¸€ä¸ªåŸºç¡€æ¥å£ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask, jsonify, request

app = Flask(__name__)

articles = [
    {<span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"title"</span>: <span class="hljs-string">"Hello Python"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"Flask makes API easy"</span>},
    {<span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>, <span class="hljs-string">"title"</span>: <span class="hljs-string">"REST é£æ ¼"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"è®©æ¥å£æ›´æ ‡å‡†æ›´æ¸…æ™°"</span>},
]

<span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">"/api/articles"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_articles</span>():
    <span class="hljs-keyword">return</span> jsonify(articles)

<span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/api/articles"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_article</span>():
    data = request.json
    data[<span class="hljs-string">"id"</span>] = <span class="hljs-built_in">len</span>(articles) + <span class="hljs-number">1</span>
    articles.append(data)
    <span class="hljs-keyword">return</span> jsonify({<span class="hljs-string">"message"</span>: <span class="hljs-string">"created"</span>, <span class="hljs-string">"article"</span>: data})

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    app.run()
</code></pre>
<p>è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python app.py
</code></pre>
<p>ç„¶åä½ å°±å¯ä»¥è®¿é—®ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2F127.0.0.1%3A5000%2Fapi%2Farticles" target="_blank" title="http://127.0.0.1:5000/api/articles" ref="nofollow noopener noreferrer">http://127.0.0.1:5000/api/articles</a>
è·å–æ–‡ç« åˆ—è¡¨</li>
<li>POST ç›¸åŒåœ°å€å³å¯åˆ›å»ºæ–‡ç« </li>
</ul>
<p>è¿™å°±æ˜¯æœ€åŸºç¡€çš„ REST APIã€‚</p>
<hr/>
<h2 data-id="heading-4">äº”ã€å‰ç«¯æ˜¯å¦‚ä½•è°ƒç”¨ API çš„</h2>
<p>ç°ä»£å‰ç«¯ä¸€èˆ¬ä½¿ç”¨ <strong>axiosã€fetchã€uni.requestã€å°ç¨‹åº API ç­‰æ–¹å¼</strong> æ¥è°ƒç”¨åç«¯æ¥å£ã€‚</p>
<p>ä»¥ JavaScript fetch ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">fetch</span>(<span class="hljs-string">"http://127.0.0.1:5000/api/articles"</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">resp</span> =&gt;</span> resp.<span class="hljs-title function_">json</span>())
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data));
</code></pre>
<p>è¿”å›å€¼é€šå¸¸æ˜¯ JSONï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">[</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Hello Python"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Flask makes API easy"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"title"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"REST é£æ ¼"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"è®©æ¥å£æ›´æ ‡å‡†æ›´æ¸…æ™°"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">]</span>
</code></pre>
<p>ä½ ä¼šå‘ç°ï¼Œå‰ç«¯ä¸éœ€è¦çŸ¥é“ä»»ä½•æ•°æ®åº“ç»†èŠ‚ï¼Œåªç”¨å…³æ³¨æ•°æ®æœ¬èº«å³å¯ã€‚</p>
<hr/>
<h2 data-id="heading-5">å…­ã€REST API å¿…é¡»éµå®ˆçš„è§„èŒƒ</h2>
<p>ä¸€ä¸ªä¼˜ç§€çš„ API åº”è¯¥æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<h4 data-id="heading-6">1. è¿”å›ç»Ÿä¸€çš„ JSON ç»“æ„</h4>
<p>ä¸è¦è®©å‰ç«¯çŒœå­—æ®µã€‚</p>
<h4 data-id="heading-7">2. æ˜ç¡®çš„ HTTP çŠ¶æ€ç </h4>
<p>ç¤ºä¾‹ï¼š</p>
<ul>
<li>200 æˆåŠŸ</li>
<li>201 åˆ›å»ºæˆåŠŸ</li>
<li>400 å‚æ•°é”™è¯¯</li>
<li>401 æœªç™»å½•</li>
<li>500 æœåŠ¡ç«¯é”™è¯¯</li>
</ul>
<h4 data-id="heading-8">3. ä½¿ç”¨åè¯åš URL</h4>
<p>å°½é‡é¿å…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/getArticle
/addArticle
</code></pre>
<p>è¦è¿™æ ·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/articles/
/articles/10
</code></pre>
<h4 data-id="heading-9">4. ä¿è¯æ•°æ®ç»“æ„æ¸…æ™°å¯è¯»</h4>
<p>å­—æ®µåç§°ç®€æ´ç»Ÿä¸€ã€‚</p>
<hr/>
<h2 data-id="heading-10">ä¸ƒã€Python ä¸­æ›´å¼ºå¤§çš„ REST æ¡†æ¶æ¨è</h2>
<p>å¦‚æœä½ çš„é¡¹ç›®è¾ƒå¤§ï¼Œæ¨èä½¿ç”¨ï¼š</p>
<h3 data-id="heading-11">Django REST framework</h3>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>è‡ªå¸¦è®¤è¯ç³»ç»Ÿ</li>
<li>è‡ªå¸¦åˆ†é¡µã€åºåˆ—åŒ–ã€éªŒè¯</li>
<li>ä¼ä¸šçº§é¡¹ç›®é¦–é€‰</li>
</ul>
<p>ä¸€è¡Œä»£ç å°±èƒ½ç”Ÿæˆ APIï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> rest_framework.viewsets <span class="hljs-keyword">import</span> ModelViewSet
</code></pre>
<h3 data-id="heading-12">FastAPI</h3>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>éå¸¸å¿«</li>
<li>è‡ªåŠ¨ç”Ÿæˆ Swagger æ–‡æ¡£</li>
<li>å¼‚æ­¥æ”¯æŒå¼º</li>
</ul>
<p>ç¤ºä¾‹è¯­æ³•ç®€æ´æ¼‚äº®ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> FastAPI

app = FastAPI()

<span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">"/items"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">read_items</span>():
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"msg"</span>: <span class="hljs-string">"hello"</span>}
</code></pre>
<hr/>
<h2 data-id="heading-13">å…«ã€æ€»ç»“</h2>
<p>è¿™ä¸€ç« æˆ‘ä»¬ææ¸…æ¥šäº†ï¼š</p>
<ul>
<li>REST API æ˜¯å‰åç«¯åˆ†ç¦»çš„åŸºçŸ³</li>
<li>API å°±æ˜¯èµ„æºï¼ˆURLï¼‰+ è¡Œä¸ºï¼ˆHTTP æ–¹æ³•ï¼‰</li>
<li>Python å¯ä»¥ç”¨ Flaskã€Django RESTã€FastAPI ç­‰æ¡†æ¶å®ç°</li>
<li>å‰ç«¯é€šè¿‡ JSON/HTTP è°ƒç”¨ API</li>
<li>ä¼˜ç§€çš„ API å¿…é¡»è§„èŒƒã€ç»Ÿä¸€ã€æ¸…æ™°</li>
</ul>
<p>å½“ä½ èƒ½ç†Ÿç»ƒå†™ REST APIï¼Œä½ å·²ç»å…·å¤‡æˆä¸ºåç«¯å¼€å‘è€…çš„é‡è¦èƒ½åŠ›ã€‚
åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œå®ƒèƒ½å¸®ä½ å¿«é€Ÿæ­å»ºæœåŠ¡ç«¯ç³»ç»Ÿï¼Œè®©ä½ çš„ä¸šåŠ¡çœŸæ­£è½åœ°è¿è¡Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python ç»¼åˆé¡¹ç›®å®æˆ˜ï¼šå­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿï¼ˆå‘½ä»¤è¡Œç‰ˆï¼‰]]></title>    <link>https://juejin.cn/post/7572515402796040242</link>    <guid>https://juejin.cn/post/7572515402796040242</guid>    <pubDate>2025-11-15T21:49:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572515402796040242" data-draft-id="7572502156487901210" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python ç»¼åˆé¡¹ç›®å®æˆ˜ï¼šå­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿï¼ˆå‘½ä»¤è¡Œç‰ˆï¼‰"/> <meta itemprop="keywords" content="åç«¯,Python,IPython"/> <meta itemprop="datePublished" content="2025-11-15T21:49:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python ç»¼åˆé¡¹ç›®å®æˆ˜ï¼šå­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿï¼ˆå‘½ä»¤è¡Œç‰ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T21:49:28.000Z" title="Sat Nov 15 2025 21:49:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å½“æˆ‘ä»¬å­¦å®Œ Python çš„åŸºæœ¬è¯­æ³•ã€å‡½æ•°ã€æ–‡ä»¶æ“ä½œã€æ•°æ®ç»“æ„ä¹‹åï¼Œæœ€é‡è¦çš„å°±æ˜¯â€œåŠ¨æ‰‹æŠŠé›¶æ•£æŠ€èƒ½ç»„åˆèµ·æ¥â€ã€‚
ä¸€ä¸ª <strong>å‘½ä»¤è¡Œç‰ˆæœ¬çš„å­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿ</strong> éå¸¸é€‚åˆä½œä¸ºé˜¶æ®µæ€§å°é¡¹ç›®ï¼Œå®ƒä¸éœ€è¦ç”¨åˆ°ä»»ä½• GUI æ¡†æ¶ï¼Œä½†æ¶µç›–äº†å¦‚ä¸‹å…³é”®çŸ¥è¯†ç‚¹ï¼š</p>
</blockquote>
<ul>
<li>æ–‡ä»¶è¯»å†™</li>
<li>åˆ—è¡¨ä¸å­—å…¸æ“ä½œ</li>
<li>è¾“å…¥ä¸è¾“å‡º</li>
<li>æµç¨‹æ§åˆ¶ä¸å¼‚å¸¸å¤„ç†</li>
<li>æ¨¡å—åŒ–ï¼ˆå¯é€‰ï¼‰</li>
<li>ç¨‹åºç»“æ„è®¾è®¡</li>
</ul>
<p>è¿™ç±»å°é¡¹ç›®è™½ç„¶ç®€å•ï¼Œä½†éå¸¸æ¥è¿‘çœŸå®ä¸šåŠ¡é€»è¾‘ï¼Œæ˜¯ä»â€œè¯­æ³•â€è¿ˆå‘â€œå°å‹åº”ç”¨â€çš„ç¬¬ä¸€æ­¥ã€‚</p>
<hr/>
<h2 data-id="heading-0">1. é¡¹ç›®åŠŸèƒ½è®¾è®¡</h2>
<p>æˆ‘ä»¬å…ˆæŠŠé¡¹ç›®åŠŸèƒ½è§„åˆ’æ¸…æ¥šï¼Œè¿™æ¯”å†™ä»£ç æ›´é‡è¦ï¼š</p>
<h4 data-id="heading-1"><strong>æ ¸å¿ƒéœ€æ±‚</strong></h4>
<ol>
<li><strong>æ·»åŠ å­¦ç”Ÿæˆç»©</strong></li>
<li><strong>æŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿæˆç»©</strong></li>
<li><strong>æŸ¥è¯¢æŒ‡å®šå­¦ç”Ÿ</strong></li>
<li><strong>ä¿®æ”¹å­¦ç”Ÿæˆç»©</strong></li>
<li><strong>åˆ é™¤å­¦ç”Ÿä¿¡æ¯</strong></li>
<li><strong>ä¿å­˜åˆ°æ–‡ä»¶ / ä»æ–‡ä»¶è¯»å–</strong></li>
<li><strong>é€€å‡ºç¨‹åº</strong></li>
</ol>
<h4 data-id="heading-2"><strong>æ•°æ®ç»“æ„è®¾è®¡</strong></h4>
<p>æˆ‘ä»¬ç”¨å­—å…¸è¡¨ç¤ºä¸€ä¸ªå­¦ç”Ÿï¼š</p>
<pre><code class="hljs language-python" lang="python">{
    <span class="hljs-string">"id"</span>: <span class="hljs-string">"2025001"</span>,
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>,
    <span class="hljs-string">"score"</span>: <span class="hljs-number">88</span>
}
</code></pre>
<p>å…¨éƒ¨å­¦ç”Ÿæ•°æ®ä½¿ç”¨åˆ—è¡¨ä¿å­˜ï¼š</p>
<pre><code class="hljs language-python" lang="python">students = []
</code></pre>
<p>è¿™ä¸ªç»“æ„æ¸…æ™°ã€æ‰©å±•æ€§å¼ºï¼Œä¹Ÿæ–¹ä¾¿åºåˆ—åŒ–ä¿å­˜ã€‚</p>
<hr/>
<h2 data-id="heading-3">2. ä¸»èœå•è®¾è®¡</h2>
<p>å‘½ä»¤è¡Œç¨‹åºæœ€é‡è¦çš„å°±æ˜¯èœå•å¾ªç¯ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">show_menu</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n===== å­¦ç”Ÿæˆç»©ç®¡ç†ç³»ç»Ÿ ====="</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"1. æ·»åŠ å­¦ç”Ÿæˆç»©"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"2. æŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿ"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"3. æŸ¥è¯¢å­¦ç”Ÿ"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"4. ä¿®æ”¹å­¦ç”Ÿæˆç»©"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"5. åˆ é™¤å­¦ç”Ÿä¿¡æ¯"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"6. ä¿å­˜æ•°æ®"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"7. è¯»å–æ•°æ®"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"0. é€€å‡ºç³»ç»Ÿ"</span>)
</code></pre>
<p>çœ‹èµ·æ¥ç®€å•ï¼Œä½†è¿™æ˜¯åç»­æ‰€æœ‰æ“ä½œçš„â€œå…¥å£â€ã€‚</p>
<hr/>
<h2 data-id="heading-4">3. åŠŸèƒ½å®ç°</h2>
<p>ä¸‹é¢ç»™å‡ºå®Œæ•´çš„æ ¸å¿ƒé€»è¾‘ï¼Œä»£ç ç»“æ„æ¸…æ™°æ˜“æ‡‚ã€‚</p>
<hr/>
<h3 data-id="heading-5">â‘  æ·»åŠ å­¦ç”Ÿ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">add_student</span>(<span class="hljs-params">students</span>):
    sid = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥å­¦å·ï¼š"</span>)
    name = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥å§“åï¼š"</span>)
    score = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥æˆç»©ï¼š"</span>))
    students.append({<span class="hljs-string">"id"</span>: sid, <span class="hljs-string">"name"</span>: name, <span class="hljs-string">"score"</span>: score})
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ·»åŠ æˆåŠŸï¼"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-6">â‘¡ æŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">show_all</span>(<span class="hljs-params">students</span>):
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> students:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"å½“å‰æ²¡æœ‰å­¦ç”Ÿæ•°æ®"</span>)
        <span class="hljs-keyword">return</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n--- æ‰€æœ‰å­¦ç”Ÿæˆç»© ---"</span>)
    <span class="hljs-keyword">for</span> stu <span class="hljs-keyword">in</span> students:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­¦å·ï¼š<span class="hljs-subst">{stu[<span class="hljs-string">'id'</span>]}</span>ï¼Œå§“åï¼š<span class="hljs-subst">{stu[<span class="hljs-string">'name'</span>]}</span>ï¼Œæˆç»©ï¼š<span class="hljs-subst">{stu[<span class="hljs-string">'score'</span>]}</span>"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-7">â‘¢ æŒ‰å­¦å·æŸ¥è¯¢å­¦ç”Ÿ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">find_student</span>(<span class="hljs-params">students</span>):
    sid = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥è¦æŸ¥è¯¢çš„å­¦å·ï¼š"</span>)
    <span class="hljs-keyword">for</span> stu <span class="hljs-keyword">in</span> students:
        <span class="hljs-keyword">if</span> stu[<span class="hljs-string">"id"</span>] == sid:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰¾åˆ° â†’ å§“åï¼š<span class="hljs-subst">{stu[<span class="hljs-string">'name'</span>]}</span>ï¼Œæˆç»©ï¼š<span class="hljs-subst">{stu[<span class="hljs-string">'score'</span>]}</span>"</span>)
            <span class="hljs-keyword">return</span> stu
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æœªæ‰¾åˆ°è¯¥å­¦ç”Ÿ"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
</code></pre>
<hr/>
<h3 data-id="heading-8">â‘£ ä¿®æ”¹æˆç»©</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">update_student</span>(<span class="hljs-params">students</span>):
    stu = find_student(students)
    <span class="hljs-keyword">if</span> stu:
        new_score = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥æ–°æˆç»©ï¼š"</span>))
        stu[<span class="hljs-string">"score"</span>] = new_score
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¿®æ”¹æˆåŠŸï¼"</span>)
</code></pre>
<hr/>
<h3 data-id="heading-9">â‘¤ åˆ é™¤å­¦ç”Ÿ</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">delete_student</span>(<span class="hljs-params">students</span>):
    stu = find_student(students)
    <span class="hljs-keyword">if</span> stu:
        students.remove(stu)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆ é™¤æˆåŠŸï¼"</span>)
</code></pre>
<hr/>
<h2 data-id="heading-10">4. æ•°æ®æŒä¹…åŒ–ï¼ˆæ–‡ä»¶ä¿å­˜ &amp; è¯»å–ï¼‰</h2>
<p>æˆ‘ä»¬ä½¿ç”¨ç®€å•çš„ JSON æ ¼å¼ï¼Œå› ä¸ºå®ƒç»“æ„æ¸…æ™°ã€æ–¹ä¾¿è¯»å†™ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> json

<span class="hljs-keyword">def</span> <span class="hljs-title function_">save_data</span>(<span class="hljs-params">students, filename=<span class="hljs-string">"students.json"</span></span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">"w"</span>, encoding=<span class="hljs-string">"utf-8"</span>) <span class="hljs-keyword">as</span> f:
        json.dump(students, f, ensure_ascii=<span class="hljs-literal">False</span>, indent=<span class="hljs-number">2</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ•°æ®å·²ä¿å­˜!"</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">load_data</span>(<span class="hljs-params">filename=<span class="hljs-string">"students.json"</span></span>):
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filename, <span class="hljs-string">"r"</span>, encoding=<span class="hljs-string">"utf-8"</span>) <span class="hljs-keyword">as</span> f:
            data = json.load(f)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ•°æ®è¯»å–æˆåŠŸ!"</span>)
        <span class="hljs-keyword">return</span> data
    <span class="hljs-keyword">except</span> FileNotFoundError:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä½¿ç”¨ç©ºæ•°æ®ã€‚"</span>)
        <span class="hljs-keyword">return</span> []
</code></pre>
<hr/>
<h2 data-id="heading-11">5. ä¸»ç¨‹åºï¼ˆæŠŠæ‰€æœ‰åŠŸèƒ½ä¸²èµ·æ¥ï¼‰</h2>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    students = load_data()

    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        show_menu()
        choice = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·é€‰æ‹©æ“ä½œï¼š"</span>)

        <span class="hljs-keyword">if</span> choice == <span class="hljs-string">"1"</span>:
            add_student(students)
        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">"2"</span>:
            show_all(students)
        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">"3"</span>:
            find_student(students)
        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">"4"</span>:
            update_student(students)
        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">"5"</span>:
            delete_student(students)
        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">"6"</span>:
            save_data(students)
        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">"7"</span>:
            students = load_data()
        <span class="hljs-keyword">elif</span> choice == <span class="hljs-string">"0"</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"é€€å‡ºç³»ç»Ÿï¼Œæ¬¢è¿ä¸‹æ¬¡ä½¿ç”¨ï¼"</span>)
            <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¾“å…¥æ— æ•ˆï¼Œè¯·é‡æ–°é€‰æ‹©!"</span>)
</code></pre>
<p>è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">python student_system.py
</code></pre>
<p>ä½ çš„ç¬¬ä¸€ä¸ªå®Œæ•´å°ç³»ç»Ÿå°±èƒ½è·‘èµ·æ¥äº†ã€‚</p>
<hr/>
<h2 data-id="heading-12">6. é¡¹ç›®æ‰©å±•æ–¹å‘</h2>
<p>å¦‚æœä½ æƒ³ç»§ç»­å‡çº§è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘ç»™ä½ ä¸€äº›å¾ˆå¥½æ‹“å±•æ–¹å‘ï¼š</p>
<h4 data-id="heading-13">âœ” å¢åŠ æˆç»©æ’åºåŠŸèƒ½</h4>
<p>æŒ‰æˆç»©æ’åºã€æŒ‰å§“åæ’åºç­‰ã€‚</p>
<h4 data-id="heading-14">âœ” å¢åŠ æˆç»©ç»Ÿè®¡</h4>
<p>æœ€é«˜åˆ†ã€æœ€ä½åˆ†ã€å¹³å‡åˆ†ã€‚</p>
<h4 data-id="heading-15">âœ” ä½¿ç”¨ SQLite/MySQL æŒä¹…åŒ–</h4>
<p>ä»æ–‡ä»¶å‡çº§æˆçœŸæ­£çš„æ•°æ®åº“ã€‚</p>
<h4 data-id="heading-16">âœ” ä½¿ç”¨ç±»å°è£…</h4>
<p>å°†å­¦ç”Ÿã€ç³»ç»Ÿå°è£…ä¸ºç±»ï¼Œä»£ç æ›´ä¸“ä¸šã€‚</p>
<h4 data-id="heading-17">âœ” ä½¿ç”¨ Tkinter / PyQt åš GUI</h4>
<p>ç¬é—´å˜æˆæ¡Œé¢åº”ç”¨ã€‚</p>
<h4 data-id="heading-18">âœ” ä½¿ç”¨ Flask / FastAPI æä¾› REST API</h4>
<p>åšæˆä¸€ä¸ªçœŸæ­£çš„â€œå­¦ç”Ÿç®¡ç†åå°â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java ä¸­ UnaryOperator æ¥å£ä¸ Lambda è¡¨è¾¾å¼çš„åº”ç”¨ç¤ºä¾‹]]></title>    <link>https://juejin.cn/post/7572459757107724342</link>    <guid>https://juejin.cn/post/7572459757107724342</guid>    <pubDate>2025-11-15T19:21:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572459757107724342" data-draft-id="7572481101710278710" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java ä¸­ UnaryOperator æ¥å£ä¸ Lambda è¡¨è¾¾å¼çš„åº”ç”¨ç¤ºä¾‹"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-11-15T19:21:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Dcs"/> <meta itemprop="url" content="https://juejin.cn/user/3679404422861902"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java ä¸­ UnaryOperator æ¥å£ä¸ Lambda è¡¨è¾¾å¼çš„åº”ç”¨ç¤ºä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3679404422861902/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Dcs
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T19:21:15.000Z" title="Sat Nov 15 2025 19:21:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œè¿™é‡Œæ˜¯<strong>æ¶æ„èµ„æºæ ˆ</strong>ï¼ç‚¹å‡»ä¸Šæ–¹å…³æ³¨ï¼Œæ·»åŠ â€œ<strong>æ˜Ÿæ ‡</strong>â€ï¼Œä¸€èµ·å­¦ä¹ å¤§å‚å‰æ²¿æ¶æ„ï¼</p>
<p>å…³æ³¨ã€å‘é€<code>C1</code>å³å¯è·å–JetBrainså…¨å®¶æ¡¶æ¿€æ´»å·¥å…·å’Œç ï¼</p>
<hr/>
<p>åœ¨ Java 8 å¼•å…¥ Lambda è¡¨è¾¾å¼çš„è¿‡ç¨‹ä¸­ï¼Œå¼€å‘è€…é¢ä¸´äº†è®¸å¤šæ–°çš„æ¥å£ï¼Œå…¶ä¸­ä¸ä¹ä¸€äº›çœ‹èµ·æ¥é¢‡ä¸ºå­¦æœ¯ã€éš¾ä»¥ç†è§£çš„åç§°ã€‚<strong>UnaryOperator</strong> æ¥å£å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œä½†å…¶å®å®ƒçš„ç”¨é€”å’Œå®ç°éå¸¸ç®€å•ã€‚</p>
<h3 data-id="heading-0"><strong>UnaryOperator çš„åŠŸèƒ½</strong></h3>
<p><strong>UnaryOperator</strong> æ¥å£çš„åŠŸèƒ½å°±æ˜¯æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œå¤„ç†å®ƒåè¿”å›ç›¸åŒç±»å‹çš„å¯¹è±¡ã€‚è¿™ä¸ªâ€œunaryâ€ç‰¹æ€§æ„å‘³ç€è¾“å…¥å’Œè¾“å‡ºçš„å¯¹è±¡ç±»å‹æ˜¯ç›¸åŒçš„ã€‚</p>
<p>ä»æŠ€æœ¯è§’åº¦çœ‹ï¼Œ<strong>UnaryOperator</strong> æ¥å£ç»§æ‰¿äº† <strong>Function</strong> æ¥å£ï¼Œå¹¶ä¸”å®šä¹‰äº†ä¸€ä¸ªåä¸º <strong>apply</strong> çš„æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-java" lang="java">java.util.function.UnaryOperator
<span class="hljs-meta">@FunctionalInterface</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UnaryOperator</span>&lt;T&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Function</span>&lt;T, T&gt; {
    T <span class="hljs-title function_">apply</span><span class="hljs-params">(T t)</span>;
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d097d6e6669f4bb18fab03c2cf0e8b8d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGNz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763839275&amp;x-signature=o%2FmS%2BTD3RyuHY%2FPqILCHUprgWVs%3D" alt="image" loading="lazy"/></p>
<p>æ¯”å¦‚ï¼Œä½ å¯èƒ½æƒ³ä»ä¸€ä¸ªå¯¹ä¸€ä¸ªå­—ç¬¦ä¸²åšç‰¹æ®Šå¤„ç†åè¿”å›æ–°çš„å­—ç¬¦ä¸²ã€‚è¿™æ­£æ˜¯ <strong>UnaryOperator</strong> çš„åº”ç”¨åœºæ™¯â€”â€”è¾“å…¥å’Œè¾“å‡ºéƒ½æ˜¯å­—ç¬¦ä¸²ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee962e4a8162472282a1f590454d9889~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGNz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763839275&amp;x-signature=1psbfMxnAYBytTYGDR85E1LAyWk%3D" alt="image" loading="lazy"/></p>
<h3 data-id="heading-1"><strong>UnaryOperator å®ç°ç¤ºä¾‹</strong></h3>
<p>é¦–å…ˆæ¥çœ‹ä¸€ä¸ªä¼ ç»Ÿçš„å®ç°æ–¹å¼ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç±» <code>UnaryOperatorExample</code> æ¥å®ç° <strong>UnaryOperator</strong> æ¥å£ï¼Œå¹¶æä¾› <code>apply</code> æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.xiaod.lambda;


<span class="hljs-keyword">import</span> java.util.function.UnaryOperator;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UnaryOperatorImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UnaryOperator</span>&lt;String&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">apply</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-keyword">return</span> name+<span class="hljs-string">"ï¼Œè´¢è¿æ»šæ»šï¼"</span>;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UnaryOperatorImplTest</span> {

    <span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUnaryOperatorImpl</span><span class="hljs-params">()</span> {
        <span class="hljs-type">UnaryOperatorImpl</span> <span class="hljs-variable">unaryOperatorImpl</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnaryOperatorImpl</span>();
        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">"å°D"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> unaryOperatorImpl.apply(name);
        <span class="hljs-comment">// å°Dï¼Œè´¢è¿æ»šæ»šï¼</span>
        System.out.println(result);
    }

}
</code></pre>
<p>æ‰§è¡Œä¸Šè¿°ä»£ç åï¼Œæ§åˆ¶å°å°†è¾“å‡ºå­—ç¬¦ä¸² <code>å°Dï¼Œè´¢è¿æ»šæ»šï¼</code>ã€‚</p>
<h3 data-id="heading-2"><strong>UnaryOperator çš„ Lambda è¡¨è¾¾å¼ç¤ºä¾‹</strong></h3>
<p>ä½¿ç”¨ Java çš„ Lambda è¡¨è¾¾å¼å¯ä»¥ç®€åŒ–ä»£ç ï¼Œä¸å†éœ€è¦åˆ›å»ºå®Œæ•´çš„ç±»ã€‚é€šè¿‡ Lambda è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥å®ç° <strong>UnaryOperator</strong> æ¥å£ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUnaryOperatorImplLambda</span><span class="hljs-params">()</span> {
        UnaryOperator&lt;String&gt; extensionAdder = (String name) -&gt; { <span class="hljs-keyword">return</span> name+<span class="hljs-string">"ï¼Œè´¢è¿æ»šæ»šï¼"</span>;} ;
        <span class="hljs-type">String</span> <span class="hljs-variable">newText</span> <span class="hljs-operator">=</span> extensionAdder.apply(<span class="hljs-string">"å°D1"</span>);
        <span class="hljs-comment">// å°D1ï¼Œè´¢è¿æ»šæ»šï¼</span>
        System.out.println(newText);
    }

</code></pre>
<p>Lambda è¡¨è¾¾å¼ä½¿å¾—ä»£ç æ›´åŠ ç®€æ´å’Œç´§å‡‘ï¼Œèƒ½å¤Ÿå¿«é€Ÿä¼ è¾¾åŠŸèƒ½æ„å›¾ã€‚</p>
<h3 data-id="heading-3"><strong>è¿›ä¸€æ­¥ç®€åŒ– Lambda è¡¨è¾¾å¼</strong></h3>
<p>ä½ è¿˜å¯ä»¥è¿›ä¸€æ­¥ç®€åŒ– Lambda è¡¨è¾¾å¼ï¼Œçœç•¥ç±»å‹å£°æ˜ï¼Œä½¿å¾—ä»£ç æ›´åŠ ç®€æ´ï¼š</p>
<pre><code class="hljs language-java" lang="java">UnaryOperator&lt;String&gt; extensionAdder = text -&gt; text + <span class="hljs-string">".txt"</span>;
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Test</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testUnaryOperatorImplLambda1</span><span class="hljs-params">()</span> {
        UnaryOperator&lt;String&gt; extensionAdder = (name)-&gt; name+<span class="hljs-string">"ï¼Œè´¢è¿æ»šæ»šï¼"</span> ;
        <span class="hljs-type">String</span> <span class="hljs-variable">newText</span> <span class="hljs-operator">=</span> extensionAdder.apply(<span class="hljs-string">"å°D2"</span>);
        <span class="hljs-comment">// å°D2ï¼Œè´¢è¿æ»šæ»šï¼</span>
        System.out.println(newText);
    }
</code></pre>
<h3 data-id="heading-4"><strong>Java API ä¸­ UnaryOperator çš„åº”ç”¨</strong></h3>
<p><strong>UnaryOperator</strong> æ¥å£åœ¨ Java API ä¸­å¹¿æ³›åº”ç”¨ã€‚ä¾‹å¦‚ï¼Œå®ƒä½œä¸ºå‚æ•°ä¼ é€’ç»™ <strong>Stream</strong> ç±»çš„ <code>iterate</code> æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">static</span> &lt;T&gt; Stream&lt;T&gt; <span class="hljs-title function_">iterate</span><span class="hljs-params">(T seed, UnaryOperator&lt;T&gt; f)</span>;
</code></pre>
<p>è¿™ç§æ–¹æ³•ç­¾åå¯èƒ½å¯¹åˆå­¦è€…æ¥è¯´æ¯”è¾ƒé™Œç”Ÿï¼Œä½†é€šè¿‡ <strong>UnaryOperator</strong> çš„ç®€å•ç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°ç†è§£ï¼šå®ƒåªæ˜¯æ¥æ”¶å¹¶è¿”å›ç›¸åŒç±»å‹çš„æ•°æ®ã€‚Lambda è¡¨è¾¾å¼çš„å¼•å…¥ï¼Œä½¿å¾— Java ç¼–ç¨‹æ›´ç®€æ´æ˜“è¯»ï¼Œä¹Ÿæå¤§æé«˜äº†å¼€å‘æ•ˆç‡ã€‚</p>
<h3 data-id="heading-5"><strong>æ€»ç»“</strong></h3>
<p>é€šè¿‡è¿™ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œæˆ‘ä»¬æ·±å…¥äº†è§£äº† <strong>UnaryOperator</strong> æ¥å£åŠå…¶åœ¨ Java Lambda è¡¨è¾¾å¼ä¸­çš„åº”ç”¨ã€‚ä½œä¸ºä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å·¥å…·ï¼Œå®ƒç®€åŒ–äº† Java ç¼–ç¨‹çš„å¤æ‚æ€§ï¼Œä½¿å¾—ä»£ç æ›´åŠ ç®€æ´å’Œæ˜“äºç»´æŠ¤ã€‚</p>
<hr/>
<p><strong>å–œæ¬¢å°±å¥–åŠ±ä¸€ä¸ªâ€œğŸ‘â€å’Œâ€œåœ¨çœ‹â€å‘—~</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5097f5cd8ee944e4893201a7b6deaf68~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGNz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763839275&amp;x-signature=7sqwJIDs3EuLkoLjDfBQIt0ezFo%3D" alt="image" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TRAE SOLO æ­£å¼ç‰ˆå®æˆ˜ï¼šä¸€ä¸ªå…¨æ ˆæ‰“å¡é¡¹ç›®çš„çœŸå®ä½“éªŒ]]></title>    <link>https://juejin.cn/post/7572397142364766250</link>    <guid>https://juejin.cn/post/7572397142364766250</guid>    <pubDate>2025-11-14T12:46:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572397142364766250" data-draft-id="7572397142364749866" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TRAE SOLO æ­£å¼ç‰ˆå®æˆ˜ï¼šä¸€ä¸ªå…¨æ ˆæ‰“å¡é¡¹ç›®çš„çœŸå®ä½“éªŒ"/> <meta itemprop="keywords" content="Trae,Solo,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-14T12:46:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å“¥æ•°æ™ºè°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3825956195409223"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TRAE SOLO æ­£å¼ç‰ˆå®æˆ˜ï¼šä¸€ä¸ªå…¨æ ˆæ‰“å¡é¡¹ç›®çš„çœŸå®ä½“éªŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3825956195409223/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å“¥æ•°æ™ºè°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T12:46:41.000Z" title="Fri Nov 14 2025 12:46:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰å¤© <code>TRAE</code> è¿›è¡Œå‡çº§ï¼Œå‘å¸ƒäº† <code>SOLO</code> æ­£å¼ç‰ˆï¼Œä»Šå¤©ï¼Œæˆ‘ä»¬å°±è¯•è¯•æ–°ç‰ˆå®æˆ˜æ•ˆæœå…·ä½“å¦‚ä½•ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« åŒ…æ‹¬ä¸€ä¸ªâ€œå®æˆ˜è¿‡ç¨‹â€å’Œâ€œä½¿ç”¨åçš„ä½“ä¼šâ€ï¼Œå¦‚æœä½ æ­£åœ¨è€ƒè™‘è¦ä¸è¦å°è¯• <code>TRAE SOLO</code>ï¼Œè¿™ç¯‡æ–‡ç« åº”è¯¥å¯ä»¥å¸®åˆ°ä½ ã€‚</p>
<h2 data-id="heading-0">ç›®æ ‡</h2>
<p>è®¡åˆ’æ­å»ºä¸€ä¸ªå…±åŒå­¦ä¹ çš„å¹³å°ï¼Œç”¨æˆ·å¯ä»¥è®¾ç½®è‡ªå·±çš„å­¦ä¹ ä¸»é¢˜ï¼Œå¹¶è®¾ç½®å­¦ä¹ è®¡åˆ’çš„é‡Œç¨‹ç¢‘èŠ‚ç‚¹ï¼Œæ¯ä¸ªäººå¯ä»¥åŠ å…¥è‡ªå·±æƒ³è¦å­¦ä¹ çš„ä¸»é¢˜ï¼Œå¹¶æ¯å¤©æ‰“å¡ã€‚</p>
<p>è¿™ä¸ªé¡¹ç›®åŒ…æ‹¬<strong>å‰åç«¯</strong>ï¼Œæ ¸å¿ƒéœ€æ±‚ä¸»è¦æ˜¯<strong>3å¼ å…³è”è¡¨</strong>ï¼Œåº”è¯¥å¯ä»¥å½“åšä¸€ä¸ªæ¯”è¾ƒå…¸å‹çš„å®æˆ˜åœºæ™¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ace5aac0a3324d978740d71d2db6ad4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763729593&amp;x-signature=yk5PXq9DmTObsp8WTVyUgWkDrtw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">å®æˆ˜è®°å½•</h2>
<p>ç”±äºä»Šå¤©çš„åˆ†äº«é‡ç‚¹åœ¨å®æˆ˜æ•ˆæœï¼Œå› æ­¤å…·ä½“æ“ä½œä¼šç¨å¾®ç®€ç•¥ä¸€ç‚¹ã€‚</p>
<h3 data-id="heading-2">åˆç‰ˆç”Ÿæˆ</h3>
<p>ä½¿ç”¨ <code>SOLO Builder</code> æ™ºèƒ½ä½“ç”Ÿæˆåˆç‰ˆã€‚</p>
<p><strong>æŒ‡ä»¤</strong></p>
<pre><code class="hljs language-diff" lang="diff">æˆ‘ä»¬æœ‰ä¸€ä¸ªæŠ€æœ¯ç¤¾åŒºï¼Œé›†ä¸­å­¦ä¹ äº¤æµTRAE SOLOï¼Œæƒ³è¦æ­å»ºä¸€ä¸ªå­¦ä¹ æ‰“å¡å¹³å°ã€‚
<span class="hljs-deletion">- å¯ä»¥åˆ›å»ºå­¦ä¹ è®¡åˆ’ï¼ŒåŒ…æ‹¬ä¸»é¢˜ã€å‘¨æœŸå’Œé‡Œç¨‹ç¢‘ã€‚</span>
<span class="hljs-deletion">- å¯ä»¥é’ˆå¯¹æ¯ä¸€ä¸ªé‡Œç¨‹ç¢‘è¿›è¡Œæ‰“å¡è®°å½•ã€‚</span>
<span class="hljs-deletion">- æä¾›æ‰“å¡å®Œæˆæ’è¡Œæ¦œ</span>
<span class="hljs-deletion">- æ•´ä½“é£æ ¼å‚è€ƒæˆªå›¾</span>
å‰ç«¯ä½¿ç”¨vue+elementui+javascriptï¼Œåç«¯ä½¿ç”¨springboot+h2å†…å­˜æ•°æ®åº“ã€‚
</code></pre>
<p><strong>è¿‡ç¨‹</strong></p>
<p>è¿‡ç¨‹æ²¡æœ‰å¤ªå¤§å˜åŠ¨ï¼Œä¾ç„¶æ˜¯å…ˆç”Ÿæˆç›¸å…³çš„<strong>æ–‡æ¡£</strong>ï¼Œæ–‡æ¡£å†…å®¹ç¡®å®è¯¦ç»†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd37a98225624d6f8e7167ea3d2ed4d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763729593&amp;x-signature=idTqsbHrDoPOzblglxDda03sxU0%3D" alt="" loading="lazy"/></p>
<p>æŒ‰ç…§ä»»åŠ¡æ¸…å•è¿›è¡Œç”Ÿæˆï¼ŒåŒæ—¶å¯ä»¥çœ‹åˆ°ä»»åŠ¡è¿‡ç¨‹è‡ªåŠ¨è¿›è¡Œäº†<strong>æ€»ç»“</strong>ï¼Œçœ‹èµ·æ¥æ›´åŠ æœ‰æ¡ç†äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0828d2a110c4e9590b123bb66d57340~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763729593&amp;x-signature=jJH5tVXF8eRc7qyxjqGcWXPLt1w%3D" alt="" loading="lazy"/></p>
<p><strong>ç»“æœ</strong></p>
<p>è¿™æ¬¡ç”ŸæˆæŒç»­è¿è¡Œäº†1ä¸ªå°æ—¶ä»æœªç»“æŸã€‚</p>
<p>åæ¥æˆ‘è·Ÿè¸ªäº†è¯¦ç»†çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œåœ¨30åˆ†é’Ÿå·¦å³ï¼Œä¸»è¦ä»£ç å·²ç»åŸºæœ¬ç”Ÿæˆå®Œæˆï¼Œå‰©ä½™æ—¶é—´ï¼Œä¸€ç›´åœ¨åå¤è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œä½†æ²¡æœ‰æˆåŠŸã€‚</p>
<p>å¤šæ¬¡å°è¯•è§£å†³å¤±è´¥åï¼Œæˆ‘ä¸­æ–­äº†ç”Ÿæˆï¼Œå¹¶æ‰‹åŠ¨ä¿®å¤äº† bugã€‚</p>
<p>è¿™ä¸ª bug ä¿®å¤å®Œæˆåï¼Œé¡¹ç›®çš„å®Œæˆåº¦å€’æ˜¯è¿˜å¯ä»¥ã€‚</p>
<p>å…ˆçœ‹å‡ ä¸ªç•Œé¢ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/000f59b92b7f49fdbdf8c32388b0148b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763729593&amp;x-signature=lVvY1P%2FRFNH7reyj2%2F0GIOaCMQo%3D" alt="é¦–é¡µ" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a818b97f1854e99ba4f3ae0f357d938~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763729593&amp;x-signature=e2c%2Bigb1o2lXdlTyzJREIUJm13g%3D" alt="æ·»åŠ å­¦ä¹ è®¡åˆ’æˆåŠŸ" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a97a36f457614cbf9ed463849ca0696e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763729593&amp;x-signature=tPB070X2lB9A1hLx6CniKhoI%2FUo%3D" alt="æ‰“å¡" loading="lazy"/></p>
<p>æ³¨ï¼šç•Œé¢é£æ ¼æ˜¯åœ¨æ–‡æ¡£ä¸­åˆ†æé”™äº†ï¼Œä¸æ˜¯ç”Ÿæˆåç¦»çš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2cbbd7b4b6b04cab8e2e8d8eb7886a01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763729593&amp;x-signature=QRPfjbhhuJLltYzGZf2UWqVYJs0%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥çœ‹ä¸‹ä»£ç ï¼Œä¸€æ³¢å¯¹è¯ï¼Œä¸€å…± 65 ä¸ªæ–‡ä»¶ï¼ŒåŒ…æ‹¬å‰åç«¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/644dfbb9b77d4970963d5376070e99b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763729593&amp;x-signature=CnmFCq7XUxVUi7IRqQz4wDvrK8I%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">å®æˆ˜ä½“ä¼š</h2>
<p>å› ä¸ºè¿™æ¬¡æ˜¯ä¸ªå¤§ç‰ˆæœ¬ï¼Œæˆ‘ä»¬ä¸“é—¨åˆ†å‡ºä¸€ä¸ªç« èŠ‚åˆ†äº«ä¸‹å®é™…ä½¿ç”¨ä½“ä¼šï¼Œæ–¹ä¾¿å¤§å®¶åˆ¤æ–­ã€‚</p>
<p>ä¸Šé¢å®æˆ˜è®°å½•æ˜¯æœ€åæˆåŠŸçš„ä¸€æ¬¡ï¼Œä¹‹å‰ä¸ºäº†æ¢ç´¢ <code>SOLO æ­£å¼ç‰ˆ</code>çš„åŸºæœ¬è¾¹ç•Œï¼Œæˆ‘å°è¯•äº†å¾ˆå¤šæƒ…å†µï¼ŒåŒ…æ‹¬æç¤ºè¯è¯¦ç»†ç¨‹åº¦ã€ä¸åŒæ™ºèƒ½ä½“æ•ˆæœã€Planæ¨¡å¼ã€‚</p>
<p><strong>ç¬¬1ç‚¹</strong></p>
<p><code>SOLO Coder</code> çš„å“åº”é€Ÿåº¦ç›¸å¯¹ <code>SOLO Builder</code> é€Ÿåº¦æ›´å¿«ï¼ŒåŒ…æ‹¬ç”Ÿæˆæ–‡æ¡£ï¼Œä½†æ˜¯ï¼Œå¯¹ä» 0 åˆ° 1 çš„è¿™ç§éœ€è¦å¤„ç†å¤šæ–¹é¢å†…å®¹æ‚ç³…çš„é—®é¢˜ä¸å¤ªæ“…é•¿ã€‚</p>
<p>è¿™ç±»é—®é¢˜ï¼Œå°¤å…¶æ˜¯<strong>åŒ…å«å‰ç«¯ç•Œé¢çš„ï¼Œè¿˜æ˜¯æ›´é€‚åˆ ä½¿ç”¨ SOLO Builder å¤„ç†</strong>ã€‚</p>
<p>å› æ­¤ï¼Œæ¨¡å‹å°šæœªå†æ¬¡å¤§å¹…æå‡å‰ï¼Œ<strong>æ¨èä½¿ç”¨æ–¹æ³•</strong>ï¼š</p>
<ol>
<li>å…ˆç”¨ SOLO Builder è¿›è¡Œåˆ†æï¼Œå¹¶ç”Ÿæˆæ–‡æ¡£ï¼›</li>
<li>ç„¶åä½¿ç”¨ SOLO Builder è¿›è¡Œå‰ç«¯éƒ¨åˆ†å¼€å‘ï¼›</li>
<li>å†é€šè¿‡ SOLO Coder è¿›è¡Œåç«¯åŠŸèƒ½å¼€å‘ã€‚</li>
</ol>
<p><strong>ç¬¬2ç‚¹</strong></p>
<p><code>Max</code> æ¨¡å¼ç¡®å®çˆ½ï¼Œä¸ä¼šå‡ºç°éœ€è¦æ‰‹åŠ¨â€œç»§ç»­â€çš„æƒ…å†µï¼Œå°±æ˜¯ <code>token</code> ä¸çŸ¥é“æ‰›ä¸æ‰›å¾—ä½ã€‚</p>
<p>åƒæˆ‘è¿™æ¬¡ç›´æ¥è·‘äº†1ä¸ªå°æ—¶ï¼Œè¦æ˜¯ <code>token</code>ï¼Œä¸æ•¢æƒ³ã€‚</p>
<p><strong>ç¬¬3ç‚¹</strong></p>
<p>æ–°æ¨¡å‹çš„ç›´è§‚ä½“éªŒè¿˜æ˜¯ä¸é”™çš„ï¼Œå¹¶ä¸”æ˜¯å›½å†…æœ€è¿‘å‡ ä¸ªå¤´éƒ¨æ¨¡å‹ä¸­å°‘æœ‰çš„<strong>æ”¯æŒä¸Šä¼ å›¾ç‰‡</strong>çš„ã€‚</p>
<p>ä½†æ˜¯ï¼Œæœ‰å‡ ä¸ªé—®é¢˜æ„Ÿè§‰éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>ä¸­æ–‡æ§åˆ¶ä¸å¤ªç¨³å®šï¼Œå¯¹è¯é•¿äº†ä¹‹åæœ‰è¾ƒå¤§å‡ ç‡å¼€å§‹ä½¿ç”¨è‹±æ–‡è¾“å‡ºï¼Œä¸å¤ªæ–¹ä¾¿è·Ÿè¸ªè°ƒè¯•ã€‚</li>
<li>å¯¹äºå°é—®é¢˜çš„å®šä½ä¸å¤ªâ€œèªæ˜â€ï¼Œæ€»æ˜¯ä¼šå°è¯•å¤šç§æ–¹æ³•ï¼Œæœ€åæ‰é€‰æ‹©äº†ä¸€ç§è¾ƒå¥½çš„æ–¹æ¡ˆï¼Œæ˜¯å¦å¯ä»¥å‚è€ƒ GPT-5.1 è®¾ç½®æ¨¡å‹åå¥½ï¼Œæ¯”å¦‚ï¼šä¿å®ˆå‹ã€æ¿€è¿›å‹ã€‚</li>
</ul>
<p><strong>ç¬¬4ç‚¹</strong></p>
<p>è¿™æ˜¯ä»Šå¤©è¿™æ¬¡å®æˆ˜ç¢°åˆ°æœ€å¤§çš„ä¸€ä¸ªé—®é¢˜ï¼Œä¹Ÿæ˜¯å‰é¢æåˆ°å¡äº†æ¥è¿‘åŠä¸ªå°æ—¶çš„åŸå› ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">VueCompilerError:</span> Element <span class="hljs-built_in">is</span> missing <span class="hljs-keyword">end</span> tag.
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/900c408812f1402aac16a0b5470dd60f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763729593&amp;x-signature=fUCQGNMPhAOv4Q2oV%2FI6QU0PWL0%3D" alt="" loading="lazy"/></p>
<p>é”™è¯¯å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯ <code>vue</code> é¡µé¢ <code>&lt;style&gt;</code> ç¼ºå°‘é—­åˆæ ‡ç­¾ <code>&lt;/style&gt;</code>ã€‚æˆ‘æ‰‹åŠ¨åŠ ä¸Šåå°±å¥½äº†ã€‚</p>
<p>ä½†è¿™ä¸ªé—®é¢˜åœ¨ä¹‹å‰ä½¿ç”¨è¿‡ç¨‹ä¸­ä¹Ÿç¢°åˆ°è¿‡å‡ æ¬¡ï¼Œæ¯æ¬¡ç¢°åˆ°åï¼Œæƒ³è¦ä¾èµ– <code>SOLO</code> è‡ªå·±è§£å†³éƒ½å¾ˆéš¾ï¼Œç»™äººæ„Ÿè§‰åƒæ˜¯è¿™å—çš„è®­ç»ƒæ•°æ®è¢«æ±¡æŸ“äº†ã€‚</p>
<blockquote>
<p>å·²ç»åé¦ˆç»™å®˜æ–¹ï¼Œå¸Œæœ›å¯ä»¥å°½æ—©è§£å†³ã€‚</p>
</blockquote>
<h2 data-id="heading-4">ç»“è¯­</h2>
<p>å®æˆ˜è¡¨ç°è™½ä¸å®Œç¾ï¼Œä½†å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å› ä¸ºæˆ‘åˆ»æ„é€‰æ‹©äº†è¾ƒå¤æ‚çš„ä¸‰è¡¨å…³è”éœ€æ±‚ï¼Œä»¥è¯•æ¢ SOLO æ­£å¼ç‰ˆçš„èƒ½åŠ›è¾¹ç•Œã€‚</p>
<p>ç»¼åˆä¸‹æ¥ï¼Œ<code>TRAE SOLO æ­£å¼ç‰ˆ</code>çš„æ•´ä½“ä½“éªŒè¿˜ç®—ä¸é”™ï¼Œä½†ä»éœ€è¿›æ­¥ã€‚</p>
<p>å¦‚æœä½ æœ‰æ„å‘ï¼Œå¼ºçƒˆå»ºè®®è¯•è¯•ï¼Œå½“å‰è¿˜åœ¨å…è´¹ä¸­~</p>
<p>ä¹Ÿå¸Œæœ› <code>TRAE</code> åç»­ç»§ç»­è¿›åŒ–ï¼Œä¸ºå¤§å®¶æä¾›æ›´åŠ æ™ºèƒ½çš„äº§å“æœåŠ¡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å¼€å‘å°æŠ€å·§-ã€JavaScriptã€‘- è·å–å…ƒç´ è·ç¦» document é¡¶éƒ¨çš„è·ç¦»]]></title>    <link>https://juejin.cn/post/7572459217812045887</link>    <guid>https://juejin.cn/post/7572459217812045887</guid>    <pubDate>2025-11-15T15:16:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572459217812045887" data-draft-id="7571650164843348002" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å¼€å‘å°æŠ€å·§-ã€JavaScriptã€‘- è·å–å…ƒç´ è·ç¦» document é¡¶éƒ¨çš„è·ç¦»"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,React.js"/> <meta itemprop="datePublished" content="2025-11-15T15:16:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¦æ­¢æ‘†çƒ‚_æ‰æµ…"/> <meta itemprop="url" content="https://juejin.cn/user/92819673587448"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¼€å‘å°æŠ€å·§-ã€JavaScriptã€‘- è·å–å…ƒç´ è·ç¦» document é¡¶éƒ¨çš„è·ç¦»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/92819673587448/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¦æ­¢æ‘†çƒ‚_æ‰æµ…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T15:16:24.000Z" title="Sat Nov 15 2025 15:16:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;color:#282d36}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px;color:#2f845e}.markdown-body h2{font-size:22px;display:inline-block;font-weight:700;background:#2f845e;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(47,132,194,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 32px);border-bottom:3px solid #2f845e}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%;box-shadow:6px 6px 6px #888}.markdown-body hr{border:none;border-top:1px solid rgba(66,185,131,.15);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:16px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#262626;border:1px solid #2f845e;border-top:8px solid #2f845e;background:linear-gradient(180deg,rgba(66,185,131,.1),transparent)!important}.markdown-body pre&gt;code.hljs[lang]:before{top:8px!important;color:#2f845e!important}.markdown-body pre&gt;code.language-awesome_error{border:1px solid #ff4d4f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ff4d4f!important;background:#fff2f0!important}.markdown-body pre&gt;code.language-awesome_error:before{content:"!"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ff4d4f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_warn{border:1px solid #ffc46f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ffc46f!important;background:#fffbe6!important}.markdown-body pre&gt;code.language-awesome_warn:before{content:"â˜‚"!important;position:absolute;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ffc46f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_success{border:1px solid #52c41a!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#52c41a!important;background:#f6ffed!important}.markdown-body pre&gt;code.language-awesome_success:before{content:"âœ“"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#52c41a!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_info{border:1px solid #1890ff!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#1890ff!important;background:#e6f7ff!important}.markdown-body pre&gt;code.language-awesome_info:before{content:"i"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#1890ff!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body strong{background-color:inherit;color:#2f845e}.markdown-body em{background-color:inherit;color:#949415}.markdown-body a{text-decoration:none;color:#2f8e54;border-bottom:1px solid #3f9e64}.markdown-body a:active,.markdown-body a:hover{color:#3f9e64}.markdown-body a[class^=footnote]{margin-left:4px}.markdown-body a:before{content:"â¤ "}.markdown-body table{font-size:12px;width:100%;max-width:100%;overflow:auto;border:2px solid #2f8e54}.markdown-body thead{background:#2f8e54;color:#fff;text-align:left;font-weight:700}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:22px}.markdown-body td{min-width:120px}.markdown-body blockquote{padding:1px 22px;margin:22px 0;border-left:6px solid #2f845e;background-color:rgba(66,185,131,.1);border-radius:2px}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#2f845e}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px;color:#282d36}.markdown-body del{color:#2f845e}.markdown-body input[type=checkbox]:checked:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/klEQVQ4T72TMU7DQBBF318XdFR06egQEnAXRINEGlqgowoIR8AF4AZOZ4JEGq5AC5EixBU4A55BNrEVHAcSBTHlaubt37/zxZKlcn7n6mDPXJvz8IJ89HzWu8t7C8D2dfsY52ae4apHnLx0ktsCsHXZjiUuFgG40x2eJ/H/AhztB+zDUTpLwWj8jGkzxSHiHaMPrDQC8sMoilKzLAUqiKQjmb+ZuAdW80tmelCHODoNgSfP7AFprTTaRTzsJN1GEyuIZ7uW6TEEHwCtyV/6EVBKJHhfzgC0Xv/iXwEFBF4FG0378bd7sPQq5xK/hSnk6sdlX3mZrKkwLZKBeu8n9XuWEUE7X+YAAAAASUVORK5CYII=);position:relative;top:-1px;left:-1px}.markdown-body .math .katex{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}@media (max-width:720px){.markdown-body h1{font-size:22px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è·å–å…ƒç´ è·ç¦» document é¡¶éƒ¨çš„è·ç¦»</h2>
<h3 data-id="heading-1">æ–¹æ¡ˆ1ï¼šä½¿ç”¨ <code>offsetTop</code>ï¼ˆæœ€ç®€å•ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myDiv'</span>)
<span class="hljs-keyword">const</span> distance = element.<span class="hljs-property">offsetTop</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(distance)  <span class="hljs-comment">// 500ï¼ˆåƒç´ ï¼‰</span>
</code></pre>
<h3 data-id="heading-2">æ–¹æ¡ˆ2ï¼šä½¿ç”¨ <code>getBoundingClientRect() + scrollY</code>ï¼ˆæœ€å‡†ç¡®ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myDiv'</span>)
<span class="hljs-keyword">const</span> distance = element.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">top</span> + <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(distance)  <span class="hljs-comment">// 500ï¼ˆåƒç´ ï¼‰</span>
</code></pre>
<h3 data-id="heading-3">æ–¹æ¡ˆ3ï¼šé€’å½’è®¡ç®—ï¼ˆå¤„ç†åµŒå¥—ä½ç½®ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getDistanceFromTop</span>(<span class="hljs-params">element</span>) {
  <span class="hljs-keyword">let</span> distance = <span class="hljs-number">0</span>
  <span class="hljs-keyword">let</span> current = element

  <span class="hljs-keyword">while</span> (current) {
    distance += current.<span class="hljs-property">offsetTop</span>
    current = current.<span class="hljs-property">offsetParent</span>
  }

  <span class="hljs-keyword">return</span> distance
}

<span class="hljs-keyword">const</span> distance = <span class="hljs-title function_">getDistanceFromTop</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myDiv'</span>))
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(distance)
</code></pre>
<h3 data-id="heading-4">å¯¹æ¯”è¡¨æ ¼</h3>





























<table><thead><tr><th>æ–¹æ³•</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>æ¨èåº¦</th></tr></thead><tbody><tr><td><code>offsetTop</code></td><td>ç®€å•å¿«é€Ÿ</td><td>åªè¿”å›ç›¸å¯¹æœ€è¿‘å®šä½çˆ¶å…ƒç´ </td><td>â­â­â­</td></tr><tr><td><code>getBoundingClientRect().top + scrollY</code></td><td>ç²¾ç¡®ã€å…¼å®¹æ€§å¥½</td><td>ç¨å¤æ‚</td><td>â­â­â­â­â­</td></tr><tr><td>é€’å½’è®¡ç®—</td><td>å¤„ç†å¤æ‚åµŒå¥—</td><td>ä»£ç å¤æ‚</td><td>â­â­</td></tr></tbody></table>
<h3 data-id="heading-5">å®Œæ•´ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æœ€æ¨èçš„æ–¹æ³•</span>
<span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myDiv'</span>)
<span class="hljs-keyword">const</span> distanceFromDocTop = element.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">top</span> + <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å…ƒç´ è·ç¦»æ–‡æ¡£é¡¶éƒ¨: <span class="hljs-subst">${distanceFromDocTop}</span>px`</span>)
</code></pre>
<h3 data-id="heading-6">React ä¸­ä½¿ç”¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useRef, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> elementRef = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">null</span>)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (elementRef.<span class="hljs-property">current</span>) {
      <span class="hljs-keyword">const</span> distance = elementRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">top</span> + <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è·ç¦»æ–‡æ¡£é¡¶éƒ¨:'</span>, distance)
    }
  }, [])

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{elementRef}</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<h3 data-id="heading-7">å®é™…åº”ç”¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·å–å…ƒç´ åˆ°æ–‡æ¡£é¡¶éƒ¨çš„è·ç¦»</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getElementDistanceFromTop</span>(<span class="hljs-params">elementId, offset = <span class="hljs-number">0</span></span>) {
  <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(elementId)
  
  <span class="hljs-keyword">if</span> (!element) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`å…ƒç´  <span class="hljs-subst">${elementId}</span> ä¸å­˜åœ¨`</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
  }

  <span class="hljs-keyword">return</span> element.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">top</span> + <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span> - offset
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> distance = <span class="hljs-title function_">getElementDistanceFromTop</span>(<span class="hljs-string">'myDiv'</span>, <span class="hljs-number">100</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(distance)  <span class="hljs-comment">// è¿”å›å…ƒç´ è·ç¦»æ–‡æ¡£é¡¶éƒ¨ï¼Œå‡å» 100px çš„åç§»</span>

<span class="hljs-comment">// æ»šåŠ¨åˆ°è¯¥ä½ç½®</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>({
  <span class="hljs-attr">top</span>: distance,
  <span class="hljs-attr">behavior</span>: <span class="hljs-string">'smooth'</span>
})
</code></pre>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p><strong>æœ€ä½³æ–¹æ¡ˆ</strong>ï¼š<code>element.getBoundingClientRect().top + window.scrollY</code></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/**
Â * æ»šåŠ¨åˆ°æŒ‡å®šå…ƒç´ 
Â * <span class="hljs-doctag">@param</span> id å…ƒç´ ID
Â * <span class="hljs-doctag">@param</span> offsetTop åç§»é‡ã€æŒ‡å®šå…ƒç´ ä¸Šä¸‹åç§»é‡ã€‘
Â */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">scrollTo</span> = (<span class="hljs-params">id: <span class="hljs-built_in">string</span>, offsetTop: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span></span>) =&gt; {
Â  <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(id)
Â  <span class="hljs-keyword">if</span> (!element) {
Â  Â  <span class="hljs-keyword">return</span>
Â  }

Â  <span class="hljs-keyword">const</span> elementTop = element.<span class="hljs-title function_">getBoundingClientRect</span>().<span class="hljs-property">top</span> + <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>
Â  <span class="hljs-keyword">const</span> targetTop = elementTop - offsetTop

Â  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>({
Â  Â  <span class="hljs-attr">top</span>: targetTop,
Â  Â  <span class="hljs-attr">behavior</span>: <span class="hljs-string">'smooth'</span>,
Â  })
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Jetpack Compose Navigation 2.x è¯¦è§£]]></title>    <link>https://juejin.cn/post/7572497847771136027</link>    <guid>https://juejin.cn/post/7572497847771136027</guid>    <pubDate>2025-11-15T15:51:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572497847771136027" data-draft-id="7572466174224777242" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Jetpack Compose Navigation 2.x è¯¦è§£"/> <meta itemprop="keywords" content="Android,Android Jetpack"/> <meta itemprop="datePublished" content="2025-11-15T15:51:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ç™½"/> <meta itemprop="url" content="https://juejin.cn/user/2549135752044601"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Jetpack Compose Navigation 2.x è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2549135752044601/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ç™½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T15:51:26.000Z" title="Sat Nov 15 2025 15:51:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç®€å•çš„é¡µé¢è·³è½¬</h2>
<p>åœ¨ Compose ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ© <code>State</code> å®ç°ä¸€ä¸ªéå¸¸ç®€å•çš„å±å¹•å†…å®¹åˆ‡æ¢æ•ˆæœã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">ComponentActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        enableEdgeToEdge()
        setContent {
            ComposeNavigationTestTheme {
                MyApp()
            }
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">MyApp</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier)</span></span> {
    <span class="hljs-comment">// å½“å‰æ˜¾ç¤ºçš„é¡µé¢</span>
    <span class="hljs-keyword">var</span> currentScreen <span class="hljs-keyword">by</span> remember { mutableIntStateOf(<span class="hljs-number">0</span>) }

    <span class="hljs-keyword">when</span> (currentScreen) {
        <span class="hljs-number">0</span> -&gt; ScreenA(modifier = modifier, onClick = {
            currentScreen = <span class="hljs-number">1</span>
        })

        <span class="hljs-number">1</span> -&gt; ScreenB(modifier = modifier, onClick = {
            currentScreen = <span class="hljs-number">2</span>
        })

        <span class="hljs-number">2</span> -&gt; ScreenC(modifier = modifier, onClick = {
            currentScreen = <span class="hljs-number">0</span>
        })
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ScreenA</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier, onClick: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    Column(
        modifier = modifier.fillMaxSize(),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(<span class="hljs-string">"è¿™é‡Œæ˜¯é¡µé¢ A"</span>)
        Button(onClick = onClick) {
            Text(<span class="hljs-string">"è·³è½¬åˆ°é¡µé¢ B"</span>)
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ScreenB</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier, onClick: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    Column(
        modifier = modifier.fillMaxSize(),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(<span class="hljs-string">"è¿™é‡Œæ˜¯é¡µé¢ B"</span>)
        Button(onClick = onClick) {
            Text(<span class="hljs-string">"è·³è½¬åˆ°é¡µé¢ C"</span>)
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ScreenC</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier, onClick: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    Column(
        modifier = modifier.fillMaxSize(),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(<span class="hljs-string">"è¿™é‡Œæ˜¯é¡µé¢ C"</span>)
        Button(onClick = onClick) {
            Text(<span class="hljs-string">"è·³è½¬åˆ°é¡µé¢ A"</span>)
        }
    }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8acf2f8b15204baba495c39784bf867c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo55m9:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763826685&amp;x-signature=ADpqukGfkVn4iioMJoazC4RfT5E%3D" alt="Screen_recording_20251115_151253.gif" width="50%" loading="lazy"/>
<p>ä½†å½“å‰çš„æ•ˆæœåªæœ‰é¡µé¢åˆ‡æ¢ï¼Œæ²¡æœ‰é¡µé¢å¯¼èˆªã€‚æŒ‰ä¸‹è¿”å›é”®æ—¶ï¼Œåªä¼šå›åˆ°æ¡Œé¢ï¼Œæ— æ³•å›åˆ°ä¸Šä¸€ä¸ªé¡µé¢ã€‚</p>
<p>å½“ç„¶ï¼Œä½ å¯ä»¥è‡ªå·±æ¥å®ç°å¯¼èˆªåŠŸèƒ½ï¼Œä½†æˆ‘ä»¬æ›´å¤šä¼šä½¿ç”¨ <code>Navigation</code> ç»„ä»¶ã€‚</p>
<h2 data-id="heading-1">æ·»åŠ ä¾èµ–</h2>
<p>åœ¨ <code>build.gradle.kts</code> æ–‡ä»¶ä¸­æ·»åŠ ä¾èµ–ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">dependencies {
    implementation(<span class="hljs-string">"androidx.navigation:navigation-compose:2.9.6"</span>)
}
</code></pre>
<h2 data-id="heading-2">ç®€å•ç”¨æ³•</h2>
<p>ä¿®æ”¹ <code>MyApp</code> å‡½æ•°ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> SCREEN_A = <span class="hljs-string">"screen_a"</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> SCREEN_B = <span class="hljs-string">"screen_b"</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> SCREEN_C = <span class="hljs-string">"screen_c"</span>

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">MyApp</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier)</span></span> {
    <span class="hljs-keyword">val</span> navController = rememberNavController()

    NavHost(navController = navController, startDestination = SCREEN_A, modifier = modifier) {
        <span class="hljs-comment">// è·¯ç”±å­—ç¬¦ä¸²æ˜ å°„åˆ°Composableé¡µé¢</span>
        composable(route = SCREEN_A) {
            ScreenA {
                <span class="hljs-comment">// è·³è½¬</span>
                navController.navigate(route = SCREEN_B)
            }
        }
        composable(route = SCREEN_B) {
            ScreenB {
                navController.navigate(route = SCREEN_C)
            }
        }
        composable(route = SCREEN_C) {
            ScreenC {
                navController.navigate(route = SCREEN_A)
            }
        }
    }
}
</code></pre>
<p>æˆ‘ä»¬å®šä¹‰äº†æ¯ä¸ªé¡µé¢çš„è·¯ç”±ï¼Œè®¾ç½®èµ·å§‹è·¯ç”±ä¸º <code>SCREEN_A</code>ï¼Œä¹Ÿå°±æ˜¯å¯åŠ¨é¡µä¸º <code>ScreenA</code>ã€‚</p>
<p>è¿™æ ·å°±å…·å¤‡å¯¼èˆªåŠŸèƒ½äº†ï¼Œè¿è¡Œæ•ˆæœï¼š</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d269aeef54a04cad8a70886185f76900~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo55m9:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763826685&amp;x-signature=BH0CF%2FptnjB5gXjd2MbrjL%2B55to%3D" alt="Screen_recording_20251115_203503.gif" width="50%" loading="lazy"/>
<h2 data-id="heading-3">å½“å‰æ‰€åœ¨é¡µé¢</h2>
<p>è¦çŸ¥é“å½“å‰æ‰€åœ¨é¡µé¢ï¼Œå¯ä»¥ä½¿ç”¨ <code>NavDestination</code> è·å–å½“å‰é¡µé¢çš„è·¯ç”±ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> navController = rememberNavController()
navController.currentDestination?.route
</code></pre>
<p>åœ¨ Compose ä¸­ï¼Œæˆ‘ä»¬æ›´å¤šä¼šä½¿ç”¨ <code>NavController.currentBackStackEntryAsState()</code>ï¼Œå› ä¸ºå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ª <code>State</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> navController = rememberNavController()

<span class="hljs-keyword">val</span> currentBackStack <span class="hljs-keyword">by</span> navController.currentBackStackEntryAsState()
currentBackStack?.destination?.route
</code></pre>
<h2 data-id="heading-4">å¯åŠ¨æ¨¡å¼</h2>
<p>è·³è½¬çš„é»˜è®¤è¡Œä¸ºå¯¹åº”çš„æ˜¯ Activity ä¸­çš„ <code>Standard</code> å¯åŠ¨æ¨¡å¼ã€‚</p>
<p>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨è·³è½¬æ—¶æŒ‡å®šé¢å¤–çš„è¡Œä¸ºã€‚</p>
<h3 data-id="heading-5">popUpTo</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å‡è®¾åœ¨ ScreenC ä¸­è·³è½¬åˆ° ScreenA</span>
navController.navigate(route = SCREEN_A) {
    popUpTo(route = SCREEN_A) {
        inclusive = <span class="hljs-literal">true</span>
    }
}
</code></pre>
<p>ä¸Šé¢çš„ä»£ç è¡¨ç¤ºåœ¨è·³è½¬åˆ° ScreenA ä¹‹å‰ï¼Œä¼šä¸æ–­è®©é¡µé¢å‡ºæ ˆï¼Œç›´åˆ°é‡åˆ°ä¼ å…¥ <code>popUpTo()</code> å‡½æ•°çš„è·¯ç”±å‚æ•°å¯¹åº”çš„é¡µé¢ï¼ˆScreenAï¼‰ï¼Œå°† <code>inclusive</code>ï¼ˆåŒ…æ‹¬ï¼‰å±æ€§è®¾ä¸º trueï¼Œé‚£ä¹ˆåœ¨é‡åˆ°ç›®æ ‡é¡µé¢æ—¶ï¼Œä¹Ÿä¼šå°†ç›®æ ‡é¡µé¢å¼¹å‡ºæ ˆã€‚</p>
<p>è¿™ä¸ªç»„åˆå¸¸ç”¨äºæ¨¡æ‹Ÿ Activity çš„ <code>singleTask</code> å¯åŠ¨æ¨¡å¼çš„æ ˆè¡Œä¸ºã€‚</p>
<p>æ¯”å¦‚å½“å‰çš„è¿”å›æ ˆæ˜¯ <code>A -&gt; B -&gt; C</code>ï¼Œå¦‚æœä» <code>C</code> è·³å› <code>A</code>ï¼Œæˆ‘ä»¬å¸Œæœ›æ¸…é™¤æ‰ <code>A</code> ä¸Šé¢çš„ <code>B</code> å’Œ <code>C</code>ï¼Œå¹¶ä¸”ä¸å¸Œæœ›æœ‰ä¸¤ä¸ª <code>A</code>ï¼ˆé”€æ¯æ—§çš„ <code>A</code>ï¼‰ï¼Œå°±å¯ä»¥ä½¿ç”¨å®ƒã€‚</p>
<blockquote>
<p>ä½†è¯·æ³¨æ„ï¼Œè¿™å’Œ Activity çš„ <code>singleTask</code> è¡Œä¸ºå¹¶ä¸å®Œå…¨ä¸€è‡´ï¼Œå…·ä½“å¯ä»¥çœ‹æˆ‘çš„è¿™ç¯‡åšå®¢ï¼š<a href="https://juejin.cn/post/7510057969264590858" target="_blank" title="https://juejin.cn/post/7510057969264590858">ç²¾é€š Activity å››å¤§å¯åŠ¨æ¨¡å¼</a>ã€‚</p>
</blockquote>
<h3 data-id="heading-6">launchSingleTop</h3>
<p><code>launchSingleTop</code> å±æ€§çš„æ•ˆæœç±»ä¼¼äº Activity çš„ <code>singleTop</code> å¯åŠ¨æ¨¡å¼ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">composable(route = SCREEN_A) {
    ScreenA {
        navController.navigate(route = SCREEN_A) {
            launchSingleTop = <span class="hljs-literal">true</span>
        }
    }
}
</code></pre>
<p>å½“æŒ‡å®š <code>launchSingleTop</code> ä¸º <code>true</code> æ—¶ï¼Œ<code>NavController</code> ä¼šåˆ¤æ–­è¿”å›æ ˆçš„é¡¶éƒ¨æ˜¯å¦ä¸ºå¯¼èˆªç›®æ ‡é¡µã€‚å¦‚æœæ˜¯ï¼Œ<code>NavController</code> å°±ä¸ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ï¼Œè€Œæ˜¯ä¼šå¤ç”¨æ ˆé¡¶çš„å®ä¾‹ã€‚</p>
<p>é¿å…äº†åœ¨æ ˆé¡¶å¤šæ¬¡åˆ›å»ºç›¸åŒçš„é¡µé¢å®ä¾‹ã€‚</p>
<h2 data-id="heading-7">è·³è½¬æ—¶ä¼ é€’å‚æ•°</h2>
<h3 data-id="heading-8">å¿…é€‰å‚æ•°</h3>
<p>é¦–å…ˆï¼Œä¿®æ”¹ ScreenBï¼Œè®©å®ƒèƒ½å¤Ÿæ¥æ”¶å­—ç¬¦ä¸²å‚æ•° <code>userId</code>ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ScreenB</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier, userId: <span class="hljs-type">String</span>? = <span class="hljs-literal">null</span>, onClick: () -&gt; <span class="hljs-type">Unit</span> = {})</span></span> {
    Column(
        modifier = modifier.fillMaxSize(),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(<span class="hljs-string">"è¿™é‡Œæ˜¯é¡µé¢ B"</span>)
        Text(text = <span class="hljs-string">"ç”¨æˆ·idä¸ºï¼š<span class="hljs-variable">$userId</span>"</span>)
        Button(onClick = onClick) {
            Text(<span class="hljs-string">"è·³è½¬åˆ°é¡µé¢ C"</span>)
        }
    }
}
</code></pre>
<p>æ¥ç€ä¿®æ”¹ <code>NavHost</code>ï¼Œä½¿å¾—è·¯ç”±èŠ‚ç‚¹èƒ½å¤Ÿæ”¯æŒå‚æ•°ä¼ é€’ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">composable(
    <span class="hljs-comment">// æ–°å¢userIdè·¯ç”±å‚æ•° </span>
    route = <span class="hljs-string">"<span class="hljs-subst">${SCREEN_B}</span>/{userId}"</span>,
    arguments = listOf(
        <span class="hljs-comment">// æŒ‡å®šè·¯ç”±å‚æ•°çš„ç±»å‹</span>
        navArgument(name = <span class="hljs-string">"userId"</span>) {
            type = NavType.StringType
        }
    )
) { navBackStackEntry -&gt;
    <span class="hljs-comment">// è·å–å‚æ•°æ•°æ®</span>
    <span class="hljs-keyword">val</span> userId = navBackStackEntry.arguments?.getString(<span class="hljs-string">"userId"</span>)
    ScreenB(userId = userId) {
        navController.navigate(route = SCREEN_C)
    }
}
</code></pre>
<p>æœ€åï¼Œåœ¨é¡µé¢è·³è½¬æ—¶ï¼Œå°†å‚æ•°ä¼ é€’è¿›æ¥ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">composable(route = SCREEN_A) {
    ScreenA {
        <span class="hljs-keyword">val</span> userId = <span class="hljs-string">"123"</span>
        navController.navigate(route = <span class="hljs-string">"<span class="hljs-subst">${SCREEN_B}</span>/<span class="hljs-variable">$userId</span>"</span>)
    }
}
</code></pre>
<p>è¿è¡Œæ•ˆæœï¼š</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a56671ea42b42b9a61cb2f809548878~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo55m9:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763826685&amp;x-signature=728GPJfa%2FpgaymorN%2FOE7Q4w%2BQw%3D" alt="image.png" width="50%" loading="lazy"/>
<h3 data-id="heading-9">å¯é€‰å‚æ•°</h3>
<p><code>Navigation</code> ä¹Ÿæ”¯æŒå¯é€‰å‚æ•°ï¼Œç±»ä¼¼äº URL çš„æŸ¥è¯¢å‚æ•°ã€‚</p>
<p>ä¿®æ”¹ <code>NavHost</code> ä¸­ ScreenB çš„è·¯ç”±å®šä¹‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">composable(
    <span class="hljs-comment">// å®šä¹‰å¯é€‰å‚æ•°</span>
    route = <span class="hljs-string">"<span class="hljs-subst">${SCREEN_B}</span>?userId={userId}"</span>,
    arguments = listOf(
        navArgument(name = <span class="hljs-string">"userId"</span>) {
            type = NavType.StringType
            nullable = <span class="hljs-literal">true</span> <span class="hljs-comment">// å¿…é¡»è¦å…è®¸ä¸ºç©º</span>
            <span class="hljs-comment">// defaultValue = "0" // å¯æä¾›é»˜è®¤å€¼</span>
        }
    )
) { navBackStackEntry -&gt;
    <span class="hljs-keyword">val</span> userId = navBackStackEntry.arguments?.getString(<span class="hljs-string">"userId"</span>) <span class="hljs-comment">// å¯èƒ½ä¸º null</span>
    ScreenB(userId = userId) {
        navController.navigate(route = SCREEN_C)
    }
}
</code></pre>
<p>è·³è½¬æ—¶ï¼Œå¯ä»¥æºå¸¦å‚æ•°ï¼Œä¹Ÿå¯ä»¥ä¸ä¼ å…¥ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">composable(route = SCREEN_A) {
    ScreenA {
        <span class="hljs-comment">// å¸¦å‚æ•°è·³è½¬</span>
        navController.navigate(route = <span class="hljs-string">"<span class="hljs-subst">${SCREEN_B}</span>?userId=456"</span>)

        <span class="hljs-comment">// ä¸å¸¦å‚æ•°è·³è½¬</span>
        navController.navigate(route = SCREEN_B)
    }
}
</code></pre>
<h2 data-id="heading-10">é¡µé¢é—´è¿”å›ç»“æœ</h2>
<p>ä» <code>A</code> è·³è½¬åˆ° <code>B</code>ï¼Œå¦‚æœè¿˜éœ€è¦åœ¨ <code>B</code> é¡µé¢è¿”å›ä¸€ä¸ªç»“æœç»™ <code>A</code>ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>SavedStateHandle</code> æ¥å®Œæˆ</p>
<p>ä¿®æ”¹ <code>ScreenB</code>ï¼Œä½¿å…¶èƒ½å¤Ÿè¿”å›ç»“æœï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ScreenB</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier, onClick: (<span class="hljs-type">String</span>) -&gt; <span class="hljs-type">Unit</span> = {})</span></span> {
    Column(
        modifier = modifier.fillMaxSize(),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(<span class="hljs-string">"è¿™é‡Œæ˜¯é¡µé¢ B"</span>)
        Button(onClick = { onClick(<span class="hljs-string">"è¿™æ˜¯Bè¿”å›çš„ç»“æœ"</span>) }) {
            Text(<span class="hljs-string">"è¿”å›ç»“æœ"</span>)
        }
    }
}
</code></pre>
<p>ä¿®æ”¹ <code>NavHost</code> ä¸­ <code>ScreenB</code> çš„è·¯ç”±å®šä¹‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">composable(
    route = SCREEN_B
) { navBackStackEntry -&gt;
    ScreenB { result -&gt;
        <span class="hljs-comment">// å°†ç»“æœè®¾ç½®åˆ°ä¸Šä¸€ä¸ªé¡µé¢çš„SavedStateHandleä¸­</span>
        navController.previousBackStackEntry
            ?.savedStateHandle
            ?.<span class="hljs-keyword">set</span>(<span class="hljs-string">"result_key"</span>, result)
        <span class="hljs-comment">// å›åˆ°ä¸Šä¸€ä¸ªé¡µé¢</span>
        navController.popBackStack() <span class="hljs-comment">// å°†å½“å‰é¡µé¢å¼¹å‡ºæ ˆ</span>
    }
}
</code></pre>
<p>ç°åœ¨ï¼Œå°±èƒ½å¤Ÿåœ¨ <code>ScreenA</code> ä¸­æ¥æ”¶ç»“æœäº†ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">composable(route = SCREEN_A) { navBackStackEntry -&gt;

    <span class="hljs-comment">// è¿™æ ·ä¹Ÿèƒ½è·å–åˆ°å½“å‰çš„æ ˆèŠ‚ç‚¹</span>
    <span class="hljs-comment">// navController.currentBackStackEntry</span>

    <span class="hljs-comment">// ç›‘å¬æ ˆèŠ‚ç‚¹çš„å‚æ•°</span>
    <span class="hljs-keyword">val</span> result = navBackStackEntry.savedStateHandle.getStateFlow&lt;String?&gt;(
        key = <span class="hljs-string">"result_key"</span>,
        initialValue = <span class="hljs-literal">null</span>
    ).collectAsState()

    ScreenA(resultFromB = result.value) {
        <span class="hljs-comment">// ç§»é™¤å‚æ•°</span>
        navBackStackEntry.savedStateHandle.remove&lt;String&gt;(<span class="hljs-string">"result_key"</span>)

        navController.navigate(route = SCREEN_B)
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">ScreenA</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier, resultFromB: <span class="hljs-type">String</span>?, onClick: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    Column(
        modifier = modifier.fillMaxSize(),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(<span class="hljs-string">"è¿™é‡Œæ˜¯é¡µé¢ A"</span>)
        resultFromB?.let {
            Text(<span class="hljs-string">"ä»Bè¿”å›çš„ç»“æœ: <span class="hljs-variable">$it</span>"</span>)
        }
        Button(onClick = onClick) {
            Text(<span class="hljs-string">"è·³è½¬åˆ°é¡µé¢ B"</span>)
        }
    }
}
</code></pre>
<h2 data-id="heading-11">é«˜çº§å¯¼èˆªæŠ€å·§</h2>
<h3 data-id="heading-12">åµŒå¥—å¯¼èˆªå›¾ (Nested Navigation)</h3>
<p>å½“åº”ç”¨å˜å¾—å¤æ‚æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åµŒå¥—å¯¼èˆªå›¾æ¥è®©è·¯ç”±æ›´åŠ æ¸…æ™°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> SCREEN_A = <span class="hljs-string">"screen_a"</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> SCREEN_B = <span class="hljs-string">"screen_b"</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> AUTH_FLOW_ROUTE = <span class="hljs-string">"auth_flow"</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> LOGIN_ROUTE = <span class="hljs-string">"login"</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> REGISTER_ROUTE = <span class="hljs-string">"register"</span>

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">MyComplexApp</span><span class="hljs-params">(modifier: <span class="hljs-type">Modifier</span> = Modifier)</span></span> {
    <span class="hljs-keyword">val</span> navController = rememberNavController()
    NavHost(navController = navController, startDestination = SCREEN_A) {
        <span class="hljs-comment">// ä¸»åº”ç”¨é¡µé¢</span>
        composable(route = SCREEN_A) {
            Column(
                modifier = Modifier.fillMaxSize(),
                horizontalAlignment = Alignment.CenterHorizontally,
                verticalArrangement = Arrangement.Center
            ) {
                Text(<span class="hljs-string">"A"</span>)
                Button(onClick = {
                    <span class="hljs-comment">// å°†è·³è½¬åˆ°å­å›¾çš„èµ·å§‹é¡µ (LOGIN_ROUTE)</span>
                    navController.navigate(route = AUTH_FLOW_ROUTE)
                }) {
                    Text(<span class="hljs-string">"è·³è½¬åˆ°ç™»å½•é¡µ"</span>)
                }
            }
        }
        composable(route = SCREEN_B) {
            Text(<span class="hljs-string">"B"</span>)
        }

        <span class="hljs-comment">// å­å¯¼èˆªå›¾-è®¤è¯æµç¨‹</span>
        navigation(
            startDestination = LOGIN_ROUTE, <span class="hljs-comment">// å­å›¾çš„èµ·å§‹é¡µ</span>
            route = AUTH_FLOW_ROUTE         <span class="hljs-comment">// å­å›¾çš„è·¯ç”±å</span>
        ) {
            composable(route = LOGIN_ROUTE) {
                Box(Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {
                    Text(<span class="hljs-string">"Login"</span>)
                }
            }
            composable(route = REGISTER_ROUTE) {
                Text(<span class="hljs-string">"Register"</span>)
            }
        }
    }

}
</code></pre>
<p>å¯¼èˆªå®Œæˆæ—¶ï¼Œå›é€€æ ˆå°†ä¼šæ˜¯ <code>[ SCREEN_A, LOGIN_ROUTE ]</code>ã€‚</p>
<h3 data-id="heading-13">ViewModel ä½œç”¨åŸŸ</h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>ViewModel</code> çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šåˆ°äº† <code>NavBackStackEntry</code> è¿”å›æ ˆèŠ‚ç‚¹ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬å¸Œæœ›å¤šä¸ªé¡µé¢ï¼ˆComposableï¼‰å…±äº«ä¸€ä¸ª <code>ViewModel</code>ï¼Œæˆ‘ä»¬å¯ä»¥æå‡ <code>ViewModel</code> çš„ä½œç”¨åŸŸåˆ°è¿™äº›å±å¹•å…±åŒçš„åµŒå¥—å¯¼èˆªå›¾ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬å¸Œæœ›ç™»å½•å’Œæ³¨å†Œé¡µé¢èƒ½å¤Ÿå…±äº«ä¸€ä¸ªé‚®ç®±æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SharedAuthViewModel</span> : <span class="hljs-type">ViewModel</span>() {

    <span class="hljs-comment">// é‚®ç®±</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _email = MutableStateFlow(<span class="hljs-string">""</span>)
    <span class="hljs-keyword">val</span> email: StateFlow&lt;String&gt; = _email

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">updateEmail</span><span class="hljs-params">(newEmail: <span class="hljs-type">String</span>)</span></span> {
        _email.value = newEmail
    }

    <span class="hljs-keyword">init</span> {
        Log.d(<span class="hljs-string">"AuthViewModel"</span>, <span class="hljs-string">"ViewModel created!"</span>)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCleared</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onCleared()
        Log.d(<span class="hljs-string">"AuthViewModel"</span>, <span class="hljs-string">"ViewModel destroyed!"</span>)
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">ComponentActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContent {
            ComposeNavigationTestTheme {
                MyApp()
            }
        }
    }
}

<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> HOME_ROUTE = <span class="hljs-string">"home"</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> AUTH_FLOW_ROUTE = <span class="hljs-string">"auth_flow"</span> <span class="hljs-comment">// åµŒå¥—å›¾çš„è·¯ç”±</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> LOGIN_ROUTE = <span class="hljs-string">"login"</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">val</span> REGISTER_ROUTE = <span class="hljs-string">"register"</span>

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">MyApp</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> navController = rememberNavController()

    NavHost(navController = navController, startDestination = HOME_ROUTE) {
        composable(HOME_ROUTE) {
            HomeScreen {
                navController.navigate(AUTH_FLOW_ROUTE)
            }
        }

        <span class="hljs-comment">// è®¤è¯æµç¨‹å­å›¾</span>
        navigation(
            startDestination = LOGIN_ROUTE,
            route = AUTH_FLOW_ROUTE
        ) {
            composable(LOGIN_ROUTE) { navBackStackEntry -&gt;
                <span class="hljs-comment">// è·å–å­å›¾çš„ NavBackStackEntry</span>
                <span class="hljs-keyword">val</span> authGraphEntry = remember(navBackStackEntry) {
                    <span class="hljs-keyword">val</span> parentRoute = navBackStackEntry.destination.parent!!.route!!
                    navController.getBackStackEntry(parentRoute)
                }
                <span class="hljs-comment">// å°† ViewModel ä½œç”¨åŸŸé™å®šåˆ°è¿™ä¸ªå­å›¾</span>
                <span class="hljs-keyword">val</span> authViewModel: SharedAuthViewModel = viewModel(authGraphEntry)

                LoginScreen(
                    viewModel = authViewModel,
                    toRegister = { navController.navigate(REGISTER_ROUTE) },
                    toHome = {
                        <span class="hljs-comment">// å›åˆ°ä¸»é¡µ</span>
                        navController.popBackStack(HOME_ROUTE, inclusive = <span class="hljs-literal">false</span>)
                    })
            }

            composable(REGISTER_ROUTE) { navBackStackEntry -&gt;
                <span class="hljs-keyword">val</span> authGraphEntry = remember(navBackStackEntry) {
                    <span class="hljs-keyword">val</span> parentRoute = navBackStackEntry.destination.parent!!.route!!
                    navController.getBackStackEntry(parentRoute)
                }
                <span class="hljs-comment">// ä¸ LoginScreen è·å–åˆ°å®Œå…¨ç›¸åŒçš„ ViewModel å®ä¾‹</span>
                <span class="hljs-keyword">val</span> authViewModel: SharedAuthViewModel = viewModel(authGraphEntry)

                RegisterScreen(viewModel = authViewModel) {
                    <span class="hljs-comment">// å›åˆ°ç™»å½•é¡µ</span>
                    navController.navigate(LOGIN_ROUTE) {
                        popUpTo(route = LOGIN_ROUTE) { 
                            inclusive = <span class="hljs-literal">true</span>
                        }
                    }
                    <span class="hljs-comment">// æˆ–è€…ç›´æ¥ä½¿ç”¨ navController.popBackStack()</span>
                }
            }
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">HomeScreen</span><span class="hljs-params">(onClick: () -&gt; <span class="hljs-type">Unit</span> = {})</span></span> {
    Column(
        modifier = Modifier.fillMaxSize(),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(<span class="hljs-string">"ä¸»å±å¹•"</span>)
        Button(onClick = onClick) {
            Text(<span class="hljs-string">"è¿›å…¥ç™»å½•/æ³¨å†Œæµç¨‹"</span>)
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">LoginScreen</span><span class="hljs-params">(
    viewModel: <span class="hljs-type">SharedAuthViewModel</span>,
    toRegister: () -&gt; <span class="hljs-type">Unit</span>,
    toHome: () -&gt; <span class="hljs-type">Unit</span>
)</span></span> {
    <span class="hljs-keyword">val</span> email <span class="hljs-keyword">by</span> viewModel.email.collectAsState()

    Column(
        modifier = Modifier
            .fillMaxSize()
            .padding(<span class="hljs-number">16.</span>dp),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(<span class="hljs-string">"ç™»å½•é¡µ"</span>)
        TextField(
            value = email,
            onValueChange = { viewModel.updateEmail(it) },
            label = { Text(<span class="hljs-string">"å…±äº«çš„ Email"</span>) }
        )
        Spacer(Modifier.height(<span class="hljs-number">16.</span>dp))
        Button(onClick = toRegister) {
            Text(<span class="hljs-string">"è·³è½¬åˆ°æ³¨å†Œé¡µ"</span>)
        }
        Spacer(Modifier.height(<span class="hljs-number">8.</span>dp))
        Button(onClick = toHome) {
            Text(<span class="hljs-string">"è¿”å›ä¸»é¡µ"</span>)
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">RegisterScreen</span><span class="hljs-params">(viewModel: <span class="hljs-type">SharedAuthViewModel</span>, toLogin: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    <span class="hljs-keyword">val</span> email <span class="hljs-keyword">by</span> viewModel.email.collectAsState()

    Column(
        modifier = Modifier
            .fillMaxSize()
            .padding(<span class="hljs-number">16.</span>dp),
        horizontalAlignment = Alignment.CenterHorizontally,
        verticalArrangement = Arrangement.Center
    ) {
        Text(<span class="hljs-string">"æ³¨å†Œé¡µ"</span>)
        TextField(
            value = email,
            onValueChange = { viewModel.updateEmail(it) },
            label = { Text(<span class="hljs-string">"å…±äº«çš„ Email (ä¸ç™»å½•é¡µåŒæ­¥)"</span>) }
        )
        Spacer(Modifier.height(<span class="hljs-number">16.</span>dp))
        Button(onClick = toLogin) {
            Text(<span class="hljs-string">"è¿”å›ç™»å½•é¡µ"</span>)
        }
    }
}
</code></pre>
<p><code>popBackStack(route, inclusive)</code> çš„è¡Œä¸ºæ˜¯ä¸æ–­ä»æ ˆé¡¶å¼¹å‡ºé¡µé¢ï¼Œç›´åˆ°æ‰¾åˆ°å‡½æ•°å‚æ•° <code>route</code>ï¼Œå¦‚æœ <code>inclusive</code> æ ‡å¿—ä¸º <code>true</code>ï¼Œé‚£ä¹ˆ <code>route</code> ä¹Ÿä¼šä¸€å¹¶å¼¹å‡ºã€‚</p>
<h3 data-id="heading-14">åº•éƒ¨å¯¼èˆªæ çš„çŠ¶æ€ä¿å­˜ä¸æ¢å¤</h3>
<p>åœ¨å®ç°åº•éƒ¨å¯¼èˆªæ æ—¶ï¼Œåˆ‡æ¢ Tab å¾€å¾€ä¼šå¯¼è‡´å‰ä¸€ä¸ª Tab çš„çŠ¶æ€ï¼ˆå¦‚æ»šåŠ¨ä½ç½®ï¼‰ä¸¢å¤±ã€‚</p>
<p>ä¸ºäº†å®ç°çŠ¶æ€çš„ä¿å­˜ä¸æ¢å¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸‰ä¸ªå…³é”®é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// å½“ç‚¹å‡»åº•éƒ¨ Tab æ—¶ï¼Œè°ƒç”¨æ­¤æ–¹æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> NavController.<span class="hljs-title">onBottomNavClicked</span><span class="hljs-params">(route: <span class="hljs-type">String</span>)</span></span> {
    <span class="hljs-keyword">this</span>.navigate(route) {
        <span class="hljs-comment">// å¼¹å‡ºåˆ°å›¾çš„èµ·å§‹ç‚¹ï¼Œé¿å…å›é€€æ ˆæ— é™ç´¯ç§¯</span>
        popUpTo(<span class="hljs-keyword">this</span><span class="hljs-symbol">@onBottomNavClicked</span>.graph.findStartDestination().id) {
            saveState = <span class="hljs-literal">true</span> <span class="hljs-comment">// å…³é”®ï¼šå¼¹å‡ºæ—¶ä¿å­˜æ ˆä¸­é¡µé¢çš„çŠ¶æ€</span>
        }
        <span class="hljs-comment">// é¿å…åœ¨å·²ä½äºæ ˆé¡¶æ—¶é‡å¤åˆ›å»º</span>
        launchSingleTop = <span class="hljs-literal">true</span>
        <span class="hljs-comment">// å…³é”®ï¼šå¯¼èˆªåˆ°ç›®çš„åœ°æ—¶ï¼Œæ¢å¤å…¶ä¹‹å‰ä¿å­˜çš„çŠ¶æ€</span>
        restoreState = <span class="hljs-literal">true</span>
    }
}
</code></pre>
<p>è¿™æ ·èƒ½å®ç°çŠ¶æ€ä¸ä¸¢å¤±ï¼Œå¹¶ä¸”åœ¨ <code>é¦–é¡µ -&gt; æœç´¢ -&gt; æˆ‘çš„</code> æ¥å›åˆ‡æ¢æ—¶ï¼Œå›é€€æ ˆåªä¼šæ˜¯è¿™å‡ ä¸ªï¼š<code>é¦–é¡µ</code>ã€<code>é¦–é¡µ -&gt; æœç´¢</code>ã€<code>é¦–é¡µ -&gt; æˆ‘çš„</code>ã€‚</p>
<p>ç¤ºä¾‹ä»£ç ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TabViewModel</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> tabName: String) : ViewModel() {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _count = MutableStateFlow(<span class="hljs-number">0</span>)
    <span class="hljs-keyword">val</span> count = _count.asStateFlow()

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">increment</span><span class="hljs-params">()</span></span> {
        _count.value++
    }

    <span class="hljs-keyword">init</span> {
        Log.d(<span class="hljs-string">"ViewModelLifecycle"</span>, <span class="hljs-string">"<span class="hljs-variable">$tabName</span> ViewModel CREATED"</span>)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCleared</span><span class="hljs-params">()</span></span> {
        Log.d(<span class="hljs-string">"ViewModelLifecycle"</span>, <span class="hljs-string">"<span class="hljs-variable">$tabName</span> ViewModel CLEARED"</span>)
        <span class="hljs-keyword">super</span>.onCleared()
    }
}

<span class="hljs-comment">// åº•éƒ¨ Tab çš„è·¯ç”±</span>
<span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Screen</span>(<span class="hljs-keyword">val</span> route: String, <span class="hljs-keyword">val</span> icon: ImageVector, <span class="hljs-keyword">val</span> label: String) {
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Home : Screen(<span class="hljs-string">"home"</span>, Icons.Filled.Home, <span class="hljs-string">"é¦–é¡µ"</span>)
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Search : Screen(<span class="hljs-string">"search"</span>, Icons.Filled.Search, <span class="hljs-string">"æœç´¢"</span>)
    <span class="hljs-keyword">data</span> <span class="hljs-keyword">object</span> Profile : Screen(<span class="hljs-string">"profile"</span>, Icons.Filled.Person, <span class="hljs-string">"æˆ‘çš„"</span>)
}

<span class="hljs-keyword">val</span> bottomNavItems = listOf(
    Screen.Home,
    Screen.Search,
    Screen.Profile
)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">ComponentActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        setContent {
            ComposeNavigationTestTheme {
                MainScreen()
            }
        }
    }
}

<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">MainScreen</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> navController = rememberNavController()
    Scaffold(
        bottomBar = {
            MyBottomNavBar(navController = navController)
        }
    ) { paddingValues -&gt;
        NavHost(
            navController = navController,
            startDestination = Screen.Home.route,
            modifier = Modifier.padding(paddingValues)
        ) {
            composable(Screen.Home.route) {
                <span class="hljs-comment">// æ‰‹åŠ¨åˆ›å»º factory æ¥ä¼ é€’ tabNameï¼Œä»¥ä¾¿è§‚å¯Ÿæ—¥å¿—</span>
                <span class="hljs-keyword">val</span> vm: TabViewModel = viewModel(factory = TabViewModelFactory(<span class="hljs-string">"Home"</span>))
                TabScreenContent(vm)
            }
            composable(Screen.Search.route) {
                <span class="hljs-keyword">val</span> vm: TabViewModel = viewModel(factory = TabViewModelFactory(<span class="hljs-string">"Search"</span>))
                TabScreenContent(vm)
            }
            composable(Screen.Profile.route) {
                <span class="hljs-keyword">val</span> vm: TabViewModel = viewModel(factory = TabViewModelFactory(<span class="hljs-string">"Profile"</span>))
                TabScreenContent(vm)
            }
        }
    }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">TabViewModelFactory</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> tabName: String) : ViewModelProvider.Factory {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T : ViewModel&gt;</span> <span class="hljs-title">create</span><span class="hljs-params">(modelClass: <span class="hljs-type">Class</span>&lt;<span class="hljs-type">T</span>&gt;)</span></span>: T {
        <span class="hljs-keyword">if</span> (modelClass.isAssignableFrom(TabViewModel::<span class="hljs-keyword">class</span>.java)) {
            <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span>
            <span class="hljs-keyword">return</span> TabViewModel(tabName) <span class="hljs-keyword">as</span> T
        }
        <span class="hljs-keyword">throw</span> IllegalArgumentException(<span class="hljs-string">"Unknown ViewModel class"</span>)
    }
}


<span class="hljs-comment">// åº•éƒ¨å¯¼èˆªæ </span>
<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">MyBottomNavBar</span><span class="hljs-params">(navController: <span class="hljs-type">NavController</span>)</span></span> {
    NavigationBar {
        <span class="hljs-comment">// å½“å‰è·¯ç”±çŠ¶æ€</span>
        <span class="hljs-keyword">val</span> navBackStackEntry <span class="hljs-keyword">by</span> navController.currentBackStackEntryAsState()
        <span class="hljs-keyword">val</span> currentRoute = navBackStackEntry?.destination?.route

        bottomNavItems.forEach { screen -&gt;
            NavigationBarItem(
                selected = currentRoute == screen.route,
                onClick = {
                    navController.navigate(screen.route) {
                        <span class="hljs-comment">// å¼¹å‡ºåˆ°å›¾çš„èµ·å§‹ç‚¹ï¼Œåœ¨è¿™é‡Œç›¸å½“äºæ˜¯ï¼š</span>
                        <span class="hljs-comment">// popUpTo(Screen.Home.route) {</span>
                        <span class="hljs-comment">//     saveState = true</span>
                        <span class="hljs-comment">//     inclusive = false</span>
                        <span class="hljs-comment">// }</span>
                        popUpTo(navController.graph.findStartDestination().id) {
                            <span class="hljs-comment">// å…³é”®ï¼šå¼¹å‡ºå±å¹•æ—¶ï¼Œä¿å­˜å®ƒä»¬çš„çŠ¶æ€</span>
                            saveState = <span class="hljs-literal">true</span>
                        }
                        <span class="hljs-comment">// é¿å…åœ¨å·²ä½äºæ ˆé¡¶æ—¶é‡å¤åˆ›å»ºå®ä¾‹</span>
                        launchSingleTop = <span class="hljs-literal">true</span>
                        <span class="hljs-comment">// å…³é”®ï¼šå¯¼èˆªåˆ°ç›®çš„åœ°æ—¶ï¼Œæ¢å¤å…¶ä¹‹å‰ä¿å­˜çš„çŠ¶æ€</span>
                        restoreState = <span class="hljs-literal">true</span>
                    }
                },
                icon = { Icon(screen.icon, contentDescription = screen.label) },
                label = { Text(screen.label) }
            )
        }
    }
}

<span class="hljs-comment">// Tab å±å¹•å†…å®¹</span>
<span class="hljs-meta">@Composable</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">TabScreenContent</span><span class="hljs-params">(viewModel: <span class="hljs-type">TabViewModel</span>)</span></span> {
    <span class="hljs-keyword">val</span> count <span class="hljs-keyword">by</span> viewModel.count.collectAsState()
    <span class="hljs-keyword">val</span> listState = rememberLazyListState() <span class="hljs-comment">// ç”¨äºæ¼”ç¤ºæ»šåŠ¨ä½ç½®çš„ä¿å­˜</span>

    Column(modifier = Modifier.fillMaxSize()) {
        Text(text = <span class="hljs-string">"å½“å‰è®¡æ•°å€¼: <span class="hljs-variable">$count</span>"</span>, style = MaterialTheme.typography.headlineMedium)
        Button(onClick = { viewModel.increment() }) {
            Text(<span class="hljs-string">"ç‚¹æˆ‘ +1"</span>)
        }

        LazyColumn(state = listState) {
            items(<span class="hljs-number">100</span>) {
                Text(text = <span class="hljs-string">"æˆ‘æ˜¯åˆ—è¡¨é¡¹ <span class="hljs-variable">$it</span>"</span>, modifier = Modifier.padding(<span class="hljs-number">16.</span>dp))
            }
        }
    }
}
</code></pre>
<p>åœ¨è¿™é‡Œèµ·å§‹é¡µæ˜¯ <code>home</code>ï¼Œå‡è®¾å½“å‰çš„è¿”å›æ ˆæ˜¯ <code>[home, profile]</code>ï¼Œç‚¹å‡» <code>search</code> æ ‡ç­¾é¡µæ—¶å°†ä¼šå‘ç”Ÿï¼š</p>
<ul>
<li>
<p><code>popUpTo(navController.graph.findStartDestination().id)</code>ï¼šå°†é™¤äº†èµ·å§‹é¡µï¼ˆ<code>home</code>ï¼‰çš„é¡µé¢éƒ½å¼¹å‡ºæ ˆï¼Œè¿”å›æ ˆä¼šå˜ä¸º <code>[home]</code>ã€‚ï¼ˆ<code>inclusive</code> é»˜è®¤ä¸º <code>false</code>ï¼‰</p>
</li>
<li>
<p><code>saveState = true</code>ï¼šå°†å¼¹å‡ºçš„é¡µé¢çš„ <code>ViewModel</code> å’Œ UI çŠ¶æ€è¿›è¡Œä¿å­˜ã€‚</p>
</li>
<li>
<p><code>launchSingleTop = true</code>ï¼šé˜²æ­¢é‡å¤ç‚¹å‡»åŒä¸€ä¸ª Tab æ—¶ï¼Œåˆ›å»ºå¤šä¸ªé¡µé¢å®ä¾‹ã€‚</p>
</li>
<li>
<p><code>restoreState = true</code>ï¼šå¯¼èˆªåˆ° <code>search</code> é¡µæ—¶ï¼Œä¼šå…ˆçœ‹çœ‹ä¹‹å‰æœ‰æ²¡æœ‰ä¸º <code>search</code> é¡µä¿å­˜è¿‡çŠ¶æ€ã€‚</p>
<ul>
<li>å¦‚æœæœ‰ï¼Œä¼šç›´æ¥å”¤é†’ä¹‹å‰çš„ <code>search</code> å®ä¾‹ï¼Œæ¢å¤å…¶ <code>ViewModel</code> å’Œ UI çŠ¶æ€ï¼ˆè¿™é‡Œæ˜¯æ»šåŠ¨ä½ç½®ï¼‰ã€‚</li>
<li>å¦‚æœæ²¡æœ‰ï¼Œæ„å‘³ç€æ˜¯ç¬¬ä¸€æ¬¡ç‚¹å‡»ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ <code>search</code> é¡µé¢å®ä¾‹ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-15">æ”¯æŒ deep Link</h2>
<p>deep link å°±æ˜¯å¯ä»¥è®©ç¬¬ä¸‰æ–¹ï¼ˆå¦‚æµè§ˆå™¨ã€å…¶ä»–åº”ç”¨ç­‰ï¼‰ç›´æ¥å”¤èµ·æŒ‡å®šçš„é¡µé¢ã€‚</p>
<p>é¦–å…ˆï¼Œè®©å½“å‰çš„ Activity æ”¯æŒ deep linkï¼Œä¿®æ”¹ <code>AndroidManifest.xml</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">activity</span>
    <span class="hljs-attr">android:name</span>=<span class="hljs-string">".MainActivity"</span>
    <span class="hljs-attr">android:exported</span>=<span class="hljs-string">"true"</span>
    <span class="hljs-attr">android:theme</span>=<span class="hljs-string">"@style/Theme.ComposeNavigationTest"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">intent-filter</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.action.MAIN"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.category.LAUNCHER"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">intent-filter</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">intent-filter</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">action</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.action.VIEW"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.category.DEFAULT"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">category</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.intent.category.BROWSABLE"</span> /&gt;</span>
        
        <span class="hljs-comment">&lt;!-- æ”¯æŒ myapp://screen_b æ ¼å¼--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">data</span>
            <span class="hljs-attr">android:host</span>=<span class="hljs-string">"screen_b"</span>
            <span class="hljs-attr">android:scheme</span>=<span class="hljs-string">"myapp"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">intent-filter</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">activity</span>&gt;</span>
</code></pre>
<p>ç„¶ååœ¨ ScreenB é¡µé¢çš„è·¯ç”±å®šä¹‰å¤„åŠ ä¸Š deep link çš„æ”¯æŒå³å¯ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">composable(
    route = <span class="hljs-string">"<span class="hljs-subst">${SCREEN_B}</span>/{userId}"</span>,
    arguments = listOf(
        navArgument(name = <span class="hljs-string">"userId"</span>) {
            type = NavType.StringType
        }
    ),
    <span class="hljs-comment">// æ·»åŠ  deepLinks åˆ—è¡¨</span>
    deepLinks = listOf(
        navDeepLink {
            <span class="hljs-comment">// å®šä¹‰ URI æ ¼å¼ï¼Œå®ƒä¼šè‡ªåŠ¨åŒ¹é…è·¯ç”±å‚æ•°</span>
            uriPattern = <span class="hljs-string">"myapp://<span class="hljs-variable">$SCREEN_B</span>/{userId}"</span>
        }
    )
) { navBackStackEntry -&gt;
    <span class="hljs-keyword">val</span> userId = navBackStackEntry.arguments?.getString(<span class="hljs-string">"userId"</span>)
    ScreenB(userId = userId) {
        navController.navigate(route = SCREEN_C)
    }
}
</code></pre>
<p>åªè¦è¿›å…¥ "myapp://screen_b/321" é“¾æ¥ï¼Œå³å¯åœ¨æ‰“å¼€é¡µé¢ B çš„åŒæ—¶ä¼ é€’ <code>userId</code> ä¸º "321" çš„å‚æ•°ã€‚</p>
<h2 data-id="heading-16">å‚è€ƒ</h2>
<p>å‚è€ƒéƒ­éœ–å¤§ä½¬çš„åšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FTQLEydGZsVm2ObtKFjFRMg" target="_blank" title="https://mp.weixin.qq.com/s/TQLEydGZsVm2ObtKFjFRMg" ref="nofollow noopener noreferrer">å†™ç»™åˆå­¦è€…çš„Jetpack Composeæ•™ç¨‹ï¼ŒNavigation</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ Claude Code ä¼˜åŒ–åšå®¢å†™ä½œï¼šæˆ‘çš„å®Œæ•´å·¥ä½œæµç¨‹]]></title>    <link>https://juejin.cn/post/7572453554332024832</link>    <guid>https://juejin.cn/post/7572453554332024832</guid>    <pubDate>2025-11-15T14:19:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572453554332024832" data-draft-id="7572493520003514402" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ Claude Code ä¼˜åŒ–åšå®¢å†™ä½œï¼šæˆ‘çš„å®Œæ•´å·¥ä½œæµç¨‹"/> <meta itemprop="keywords" content="Claude"/> <meta itemprop="datePublished" content="2025-11-15T14:19:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ Claude Code ä¼˜åŒ–åšå®¢å†™ä½œï¼šæˆ‘çš„å®Œæ•´å·¥ä½œæµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T14:19:09.000Z" title="Sat Nov 15 2025 14:19:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aaronheld.com%2Fpost%2Fstreamlining-blog-writing-with-claude-code" target="_blank" title="https://www.aaronheld.com/post/streamlining-blog-writing-with-claude-code" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7050bfcdd00419b848a93c61dab7ab0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763821149&amp;x-signature=tmWZMYdP6bevEPDB7nNLZFTxY70%3D" alt="" loading="lazy"/></p>
<p>ç°ä»£å†™ä½œè€…çš„é…ç½®ï¼šäººç±»åˆ›é€ åŠ›ä¸AIåŠ©æ‰‹çš„ç»“åˆ</p>
<h2 data-id="heading-0">ä»‹ç»</h2>
<p>25å¹´æ¥ï¼Œæˆ‘ä¸€ç›´åœ¨é€šè¿‡æ— æ•°æ¬¡å†™ä½œå’ŒæŠ€æœ¯æµç¨‹çš„è¿­ä»£æ¥å†™åšå®¢ã€‚æœ€è¿‘ï¼Œæˆ‘å‘ç°äº†ä¸€äº›è®©å†™ä½œå†æ¬¡å˜å¾—<strong>æ„‰å¿«</strong>çš„ä¸œè¥¿ï¼šClaude Codeã€‚è¿™ä¸æ˜¯å¦ä¸€ä¸ª"AIå°†å–ä»£å†™ä½œè€…"çš„æ•…äº‹ã€‚è€Œæ˜¯å…³äºAIå¦‚ä½•é€šè¿‡å¤„ç†å†…å®¹åˆ›å»ºçš„ç¹çéƒ¨åˆ†æ¥å¢å¼ºåˆ›é€ æ€§è¡¨è¾¾ã€‚å…³é”®æ˜¯ï¼Œå®ƒå¸®åŠ©æˆ‘å…‹æœäº†æœ€åçš„éšœç¢ï¼šå®é™…å‘å¸ƒã€‚</p>
<p>æˆ‘çš„å¤§å¤šæ•°æ–‡ç« éƒ½å§‹äºä»æœªè§è¿‡å¤©æ—¥çš„åˆç¨¿ã€‚ç°åœ¨ï¼Œæˆ‘çš„<strong>æœºå™¨äººä¼™ä¼´</strong>æŒ‡å¯¼æˆ‘å®Œæˆä»æƒ³æ³•åˆ°æ‰§è¡Œçš„æ•´ä¸ªè¿‡ç¨‹ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å¸¦ä½ èµ°è¿‡ä»æœ€åˆæƒ³æ³•åˆ°å‘å¸ƒæ–‡ç« çš„å®Œæ•´å·¥ä½œæµç¨‹ï¼Œå‡†ç¡®å±•ç¤ºClaude Codeå¦‚ä½•ä¸æˆ‘é€‰æ‹©çš„é™æ€ç½‘ç«™ç”Ÿæˆå™¨Hugoé›†æˆã€‚ä½ å°†çœ‹åˆ°çœŸå®çš„æˆªå›¾ã€å®é™…çš„å‘½ä»¤ï¼Œä»¥åŠå½“äººç±»æ´å¯ŸåŠ›ä¸AIåŠ©æ‰‹ç›¸é‡æ—¶å‘ç”Ÿçš„çœŸæ­£åä½œè¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-1">éµå¾ªæ–‡æ¡£åŒ–çš„å·¥ä½œæµç¨‹</h2>
<p>æˆ‘å³å°†æ¼”ç¤ºçš„è¿‡ç¨‹ä¸æ˜¯ä¸´æ—¶çš„ - å®ƒéµå¾ªæˆ‘ç»è¿‡æ—¶é—´å¼€å‘å’Œå®Œå–„çš„ç‰¹å®šClaudeå·¥ä½œæµç¨‹æ–‡ä»¶ã€‚è¿™ä¸ªå·¥ä½œæµç¨‹æ–‡æ¡£ä½œä¸ºæŒ‡å¯¼ï¼ŒClaudeå¯ä»¥å‚è€ƒå®ƒä»¥åœ¨ä¸åŒåšå®¢å†™ä½œä¼šè¯ä¸­ä¿æŒä¸€è‡´æ€§ã€‚</p>
<p>ä½ å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹å®Œæ•´çš„å·¥ä½œæµç¨‹æ–‡ä»¶ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Faheld%2Faaronheld-blog%2Fblob%2Fmain%2F.claude%2Fworkflows%2Fcreate-blog-post-with-image.md" target="_blank" title="https://github.com/aheld/aaronheld-blog/blob/main/.claude/workflows/create-blog-post-with-image.md" ref="nofollow noopener noreferrer">create-blog-post-with-image.md</a></p>
<p>æ‹¥æœ‰æ–‡æ¡£åŒ–çš„å·¥ä½œæµç¨‹æä¾›äº†å‡ ä¸ªå¥½å¤„ï¼š</p>
<ul>
<li>åœ¨ä¸åŒå†™ä½œä¼šè¯ä¸­çš„<strong>ä¸€è‡´æ€§</strong></li>
<li>å…¶ä»–äººå¯ä»¥éµå¾ªçš„<strong>å¯é‡ç°è¿‡ç¨‹</strong></li>
<li>éšç€æˆ‘æ”¹è¿›å·¥ä½œæµç¨‹çš„<strong>è¿­ä»£æ”¹è¿›</strong></li>
<li>ä¸ºClaudeæä¾›<strong>ä¸Šä¸‹æ–‡</strong>ï¼Œè®©å®ƒç†è§£æˆ‘çš„åå¥½å’Œæ ‡å‡†</li>
</ul>
<p>è¿™ä¸ªå·¥ä½œæµç¨‹æ–‡ä»¶å……å½“è“å›¾ï¼Œå°†å¯èƒ½æ˜¯æ··ä¹±çš„åˆ›ä½œè¿‡ç¨‹è½¬å˜ä¸ºç»“æ„åŒ–çš„ã€å¯é‡å¤çš„ç³»ç»Ÿã€‚</p>
<h2 data-id="heading-2">è®¾ç½®ï¼šå››çª—å£å·¥ä½œæµç¨‹</h2>
<p>æˆ‘çš„Claude Codeåšå®¢å·¥ä½œæµç¨‹çš„åŸºç¡€æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„å››çª—å£è®¾ç½®ï¼Œåˆ›å»ºäº†ä¸€ä¸ªå…¨é¢çš„å†™ä½œç¯å¢ƒã€‚ä»¥ä¸‹æ˜¯è¿™äº›çª—å£å¦‚ä½•ååŒå·¥ä½œï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d8c11a9375041adb60d583416db5cab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763821149&amp;x-signature=tJ2XljI%2FRFPDxbQMQaFG%2ByHxMrE%3D" alt="" loading="lazy"/></p>
<p>å››ä¸ªçª—å£å’Œè°å·¥ä½œï¼šHugoæœåŠ¡å™¨ã€Claude Codeã€VSCodeç¼–è¾‘å™¨å’Œç§»åŠ¨æµè§ˆå™¨é¢„è§ˆ</p>
<h3 data-id="heading-3">çª—å£1ï¼šHugoæœåŠ¡å™¨ç»ˆç«¯ï¼ˆå³ä¸‹è§’ï¼‰</h3>
<pre><code class="hljs language-css" lang="css">hugo server -D <span class="hljs-attr">--navigateToChanged</span>
</code></pre>
<p>è¿™åœ¨æ•´ä¸ªå†™ä½œè¿‡ç¨‹ä¸­ä¿æŒè¿è¡Œï¼Œéšç€å†…å®¹çš„æ¼”è¿›æä¾›å³æ—¶åé¦ˆã€‚<code>--navigateToChanged</code>æ ‡å¿—ä¼šè‡ªåŠ¨å°†ä½ çš„æµè§ˆå™¨å¯¼èˆªåˆ°æ›´æ–°çš„å†…å®¹ï¼Œä½¿åé¦ˆå¾ªç¯å‡ ä¹å³æ—¶ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">âš¡ hugo server --navigateToChanged

Watching <span class="hljs-keyword">for</span> changes <span class="hljs-keyword">in</span> /Users/aheld/Projects/aheld/aaronheld-blog/{archetypes,assets,content,i18n,layouts,static}

Watching <span class="hljs-keyword">for</span> config changes <span class="hljs-keyword">in</span> /Users/aheld/Projects/aheld/aaronheld-blog/config.yml, /Users/aheld/Projects/aheld/aaronheld-blog/go.mod

Start building sites â€¦

hugo v0.147.9+extended+withdeploy darwin/arm64 BuildDate=2025-06-23T08:22:20Z VendorInfo=brew



                  â”‚ EN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€
 Pages            â”‚ 276

 Paginator pages  â”‚  43

 Non-page files   â”‚  47

 Static files     â”‚  20

 Processed images â”‚  26

 Aliases          â”‚  90

 Cleaned          â”‚   0



Built <span class="hljs-keyword">in</span> 132 ms

Environment: <span class="hljs-string">"development"</span>

Serving pages from disk

Running <span class="hljs-keyword">in</span> Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender

Web Server is available at http://localhost:1313/ (<span class="hljs-built_in">bind</span> address 127.0.0.1)

Press Ctrl+C to stop
</code></pre>
<h3 data-id="heading-4">çª—å£2ï¼šClaude Codeç»ˆç«¯ï¼ˆå³ä¸Šè§’ï¼‰</h3>
<p>è¿™æ˜¯åä½œå‘ç”Ÿçš„åœ°æ–¹ã€‚æˆ‘ä½¿ç”¨Claude Codeè¿›è¡Œè§„åˆ’ã€ç ”ç©¶ã€å†™ä½œï¼Œç”šè‡³åœ¨éœ€è¦æ—¶è°ƒè¯•æ„å»ºè¿‡ç¨‹ã€‚Claudeæä¾›æˆ˜ç•¥æ€§æ€ç»´å’Œå†…å®¹ç”Ÿæˆï¼Œè€Œæˆ‘æŒ‡å¯¼æ–¹å‘ã€‚</p>
<h3 data-id="heading-5">çª—å£3ï¼šVSCodeç¼–è¾‘å™¨ï¼ˆå·¦ä¸Šè§’ï¼‰</h3>
<p>ç¼–è¾‘å™¨çª—å£æ˜¯æˆ‘å®¡æŸ¥Claudeçš„æ›´æ”¹ã€è¿›è¡Œå®æ—¶æ›´æ–°å’Œç»´æŠ¤è´¨é‡æ§åˆ¶çš„åœ°æ–¹ã€‚è¿™å¯¹åä½œè¿‡ç¨‹è‡³å…³é‡è¦ - æˆ‘å¯ä»¥å‡†ç¡®çœ‹åˆ°Claudeåœ¨ä¿®æ”¹ä»€ä¹ˆï¼Œå¹¶å®æ—¶æ‰¹å‡†æˆ–è°ƒæ•´æ›´æ”¹ã€‚</p>
<h3 data-id="heading-6">çª—å£4ï¼šç§»åŠ¨æ¨¡æ‹Ÿæ¨¡å¼çš„æµè§ˆå™¨ï¼ˆå·¦ä¸‹è§’ï¼‰</h3>
<p>è®¾ç½®ä¸ºç§»åŠ¨æ¨¡æ‹Ÿæ¨¡å¼çš„æµè§ˆå™¨çª—å£è®©æˆ‘èƒ½ç«‹å³çœ‹åˆ°å†…å®¹åœ¨å°å±å¹•ä¸Šçš„å¤–è§‚ã€‚ç”±äºå¤§å¤šæ•°è¯»è€…åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè®¿é—®åšå®¢ï¼Œè¿™ç¡®ä¿å†…å®¹ä¸ºå®é™…çš„é˜…è¯»ä½“éªŒè¿›è¡Œäº†ä¼˜åŒ–ã€‚</p>
<p>è¿™ä¸ªå››çª—å£è®¾ç½®çš„ç¾å¦™ä¹‹å¤„åœ¨äºå®Œæ•´çš„åé¦ˆå¾ªç¯ï¼šClaudeç”Ÿæˆå†…å®¹ï¼Œæˆ‘åœ¨VSCodeä¸­å®¡æŸ¥ï¼ŒHugoç«‹å³é‡å»ºï¼Œæˆ‘å¯ä»¥ç«‹å³çœ‹åˆ°æ¡Œé¢å’Œç§»åŠ¨æ¼”ç¤ºã€‚è¿™å°±åƒæ‹¥æœ‰ä¸€ä¸ªå®Œæ•´çš„ç¼–è¾‘å’Œè®¾è®¡å›¢é˜Ÿå®Œç¾åŒæ­¥å·¥ä½œã€‚</p>
<p>æˆ‘å–œæ¬¢åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨claude codeï¼Œè€Œä¸æ˜¯ä¸“é—¨çš„AIç¼–è¾‘å™¨ã€‚è¿™ç»™äº†æˆ‘é€‰æ‹©çš„è‡ªç”±ã€‚å½“è¿›è¡ŒWebå‰ç«¯å·¥ä½œæ—¶ï¼Œæˆ‘ç»å¸¸åœ¨è¿™ä¸ªå·¥ä½œæµç¨‹ä¸­ä½¿ç”¨neovimï¼Œå¹¶åœ¨ç§»åŠ¨è§†å›¾æ—è¾¹æ·»åŠ ä¸€ä¸ªé¢å¤–çš„æ¡Œé¢æµè§ˆå™¨é¢„è§ˆçª—å£ã€‚æˆ‘å‘ç°VSCode markdowné¢„è§ˆä¿æŒåŒæ­¥æ›´å¥½ï¼Œè¿™åœ¨è¿™ç§æƒ…å†µä¸‹å¾ˆæœ‰å¸®åŠ©ã€‚</p>
<h2 data-id="heading-7">ç¬¬1æ­¥ï¼šä½¿ç”¨Claudeçš„TodoWriteè¿›è¡Œå†…å®¹è§„åˆ’</h2>
<p>Claude Codeå¯¹å†™ä½œè€…æœ€æœ‰ç”¨çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯TodoWriteå·¥å…·ã€‚ä¸æ˜¯ä»ç©ºç™½é¡µé¢å¼€å§‹ï¼ˆä¼ ç»Ÿçš„å†™ä½œè€…å™©æ¢¦ï¼‰ï¼Œæˆ‘é¦–å…ˆè®©Claudeå°†å†™ä½œé¡¹ç›®åˆ†è§£ä¸ºå¯ç®¡ç†çš„ä»»åŠ¡ã€‚</p>
<pre><code class="hljs language-css" lang="css">build <span class="hljs-selector-tag">a</span> plan <span class="hljs-selector-tag">to</span> write <span class="hljs-selector-tag">a</span> blog <span class="hljs-selector-tag">article</span> about my local claude workflow <span class="hljs-selector-tag">to</span> write blog articles. <span class="hljs-selector-tag">I</span> want <span class="hljs-selector-tag">to</span> highlight the steps where <span class="hljs-selector-tag">I</span> use the workflow.

Write the <span class="hljs-selector-tag">article</span> by following the workflow and capturing screenshots and text commands at each step.

Add <span class="hljs-selector-tag">a</span> detail that <span class="hljs-selector-tag">I</span> am running "hugo serve" in another terminal window.

When the plan is done, write it <span class="hljs-selector-tag">to</span> <span class="hljs-selector-tag">a</span> local file under ./specs/
</code></pre>
<p>ä»¥åŠè¾“å‡ºï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">âº Perfect! I<span class="hljs-comment">'ve created a comprehensive plan for your Claude workflow blog article at specs/claude-workflow-blog-plan.md.</span>

The plan includes:

<span class="hljs-number">10</span> detailed workflow steps <span class="hljs-keyword">from</span> initial setup <span class="hljs-keyword">to</span> post-publication monitoring, <span class="hljs-keyword">with</span> <span class="hljs-keyword">each</span> <span class="hljs-keyword">step</span> covering:
- Specific content <span class="hljs-keyword">to</span> write
- Exact commands <span class="hljs-keyword">to</span> capture/demonstrate
- Screenshots needed at <span class="hljs-keyword">each</span> stage

<span class="hljs-keyword">Key</span> features <span class="hljs-keyword">of</span> the plan:
- Shows the dual-terminal approach (Hugo server running + Claude work terminal)
- Documents authentic workflow <span class="hljs-keyword">with</span> real commands <span class="hljs-built_in">and</span> outputs
- Includes proper screenshot organization <span class="hljs-built_in">and</span> naming
- Follows your existing blog <span class="hljs-keyword">structure</span> <span class="hljs-built_in">and</span> commit message standards
- Balances technical detail <span class="hljs-keyword">with</span> engaging storytelling

The plan <span class="hljs-built_in">is</span> designed <span class="hljs-keyword">to</span> create a <span class="hljs-number">1500</span>-<span class="hljs-number">2000</span> word article that authentically demonstrates how you use Claude Code <span class="hljs-keyword">for</span> blog writing <span class="hljs-keyword">while</span> providing actionable guidance <span class="hljs-keyword">for</span> readers.

<span class="hljs-keyword">Each</span> <span class="hljs-keyword">step</span> builds naturally <span class="hljs-keyword">on</span> the previous one, showing the complete journey <span class="hljs-keyword">from</span> idea <span class="hljs-keyword">to</span> published post.

You can now follow this plan <span class="hljs-keyword">step</span>-<span class="hljs-keyword">by</span>-<span class="hljs-keyword">step</span> <span class="hljs-keyword">to</span> write the actual blog article, capturing real screenshots <span class="hljs-built_in">and</span> command outputs <span class="hljs-keyword">as</span> you go through your genuine workflow!
</code></pre>
<p>å½“æˆ‘è¦æ±‚Claudeè§„åˆ’è¿™ç¯‡åšå®¢æ–‡ç« æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼š</p>
<p>Claudeç«‹å³åˆ›å»ºäº†ä¸€ä¸ªç»“æ„åŒ–çš„ä»»åŠ¡åˆ—è¡¨ï¼š</p>
<ul>
<li>æ’°å†™å…³äºClaude + Hugoå·¥ä½œæµç¨‹çš„å¼•äººå…¥èƒœçš„ä»‹ç»</li>
<li>è®°å½•åŒç»ˆç«¯è®¾ç½®è¿‡ç¨‹</li>
<li>è§£é‡ŠClaudeçš„è§„åˆ’å’Œç ”ç©¶èƒ½åŠ›</li>
<li>å±•ç¤ºåä½œå†…å®¹åˆ›å»ºè¿‡ç¨‹</li>
<li>è®°å½•æµ‹è¯•å’Œé¢„è§ˆå·¥ä½œæµç¨‹</li>
<li>æ¶µç›–éƒ¨ç½²å’Œç›‘æ§æ­¥éª¤</li>
<li>æ’°å†™å¸¦æœ‰å¥½å¤„å’Œå»ºè®®çš„ç»“è®º</li>
</ul>
<p>è¿™ä¸ªè§„åˆ’é˜¶æ®µæœ‰ä¸¤ä¸ªç›®çš„ï¼š</p>
<ul>
<li><strong>åˆ†è§£å¤æ‚æ€§</strong> - å†™ä½œå˜æˆä¸€ç³»åˆ—è¾ƒå°çš„ã€å¯ç®¡ç†çš„ä»»åŠ¡</li>
<li><strong>ä¿æŒä¸“æ³¨</strong> - æ¯ä¸ªä»»åŠ¡éƒ½æœ‰æ˜ç¡®çš„ç›®æ ‡ï¼Œé˜²æ­¢"èŒƒå›´è”“å»¶"</li>
</ul>
<p>TodoWriteå·¥å…·è¿˜å®æ—¶è·Ÿè¸ªè¿›åº¦ï¼Œæ˜¾ç¤ºå·²å®Œæˆã€è¿›è¡Œä¸­å’Œå¾…å¤„ç†çš„ä»»åŠ¡ã€‚è¿™å°±åƒåœ¨å†™ä½œè¿‡ç¨‹ä¸­å†…ç½®äº†ä¸€ä¸ªç†Ÿç»ƒçš„é¡¹ç›®ç»ç†ã€‚</p>
<p>Claudeç”Ÿæˆè®¡åˆ’åï¼Œæˆ‘å®¡æŸ¥å¹¶ç¼–è¾‘å®ƒï¼Œç„¶åè¦æ±‚Claudeé‡æ–°åŠ è½½æœ€ç»ˆç‰ˆæœ¬ï¼Œç¡®ä¿å®ƒä»æ­£ç¡®çš„è“å›¾å¼€å§‹å·¥ä½œã€‚</p>
<h2 data-id="heading-8">ç¬¬2æ­¥ï¼šç ”ç©¶å’Œä¸Šä¸‹æ–‡æ”¶é›†</h2>
<p>Claude Codeæ“…é•¿ä»å¤šä¸ªæ¥æºæ”¶é›†ä¸Šä¸‹æ–‡ï¼Œä½¿ç ”ç©¶æ„Ÿè§‰ä¸åƒè€ƒå¤å­¦ï¼Œæ›´åƒåä½œã€‚å¯¹äºè¿™ç¯‡åšå®¢æ–‡ç« ï¼Œæˆ‘æ¼”ç¤ºäº†å‡ ä¸ªå…³é”®çš„ç ”ç©¶æ–¹æ³•ï¼š</p>
<h3 data-id="heading-9">æŒ–æ˜ç°æœ‰å†…å®¹</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä½¿ç”¨Claudeçš„Grepå·¥å…·æœç´¢æˆ‘å¤šå¹´çš„åšå®¢å†…å®¹ä»¥å¯»æ‰¾ç›¸å…³ä¸»é¢˜ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">âº ğŸ” <span class="hljs-keyword">Step</span> <span class="hljs-number">3</span>: Content Research <span class="hljs-built_in">and</span> Context Gathering

Now <span class="hljs-keyword">let</span><span class="hljs-comment">'s demonstrate Claude's research capabilities and how I leverage existing blog content for context.</span>

First, <span class="hljs-keyword">let</span><span class="hljs-comment">'s search for existing content related to workflows or AI:</span>

âº Search(pattern: <span class="hljs-string">"workflow|AI|automation|tool"</span>, path: <span class="hljs-string">"content/post"</span>)
â¿  Found <span class="hljs-number">67</span> files (ctrl+r <span class="hljs-keyword">to</span> expand)

âº Great! <span class="hljs-keyword">Let</span><span class="hljs-comment">'s look at some relevant posts that might provide context:</span>

âº Read(<span class="hljs-string">"content/post/we-finally-care-about-context/index.md"</span>)
â¿  Read <span class="hljs-number">10</span> lines (ctrl+r <span class="hljs-keyword">to</span> expand)

âº Read(<span class="hljs-string">"content/post/answers-chat-bot-for-your-wordpress-blog/index.md"</span>)
â¿  Read <span class="hljs-number">15</span> lines (ctrl+r <span class="hljs-keyword">to</span> expand)

âº Now <span class="hljs-keyword">let</span><span class="hljs-comment">'s demonstrate searching for more specific content:</span>

âº Bash(<span class="hljs-string">"find content/post -name \"</span>*.md\<span class="hljs-string">" | head -10"</span>)
â¿  content/post/the-weapon-<span class="hljs-keyword">by</span>-fredric-brown/index.md
     content/post/agile-vs-economic-downturns/index.md
     content/post/barcampphilly-was-a-success/index.md
     â€¦ +<span class="hljs-number">9</span> lines (ctrl+r <span class="hljs-keyword">to</span> expand)
</code></pre>
<p>è¿™æ­ç¤ºäº†ç›¸å…³æ–‡ç« ï¼Œå¦‚"æˆ‘ä»¬ç»ˆäºå…³å¿ƒä¸Šä¸‹æ–‡äº†"å’Œ"ä½ çš„WordPressåšå®¢çš„ç­”æ¡ˆèŠå¤©æœºå™¨äºº" - ä¸ºæˆ‘ä¹‹å‰å¯¹AIå’Œè‡ªåŠ¨åŒ–çš„æ€è€ƒæä¾›äº†å®è´µçš„ä¸Šä¸‹æ–‡ã€‚</p>
<h3 data-id="heading-10">å½“å‰ä¿¡æ¯çš„ç½‘ç»œç ”ç©¶</h3>
<p>ç”±äºAIå·¥å…·å‘å±•è¿…é€Ÿï¼Œæˆ‘è®©Claudeè¿›è¡Œç½‘ç»œç ”ç©¶ä»¥è·å–2025å¹´å…³äºClaude Codeå·¥ä½œæµç¨‹çš„æœ€æ–°ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">âº Now <span class="hljs-keyword">let</span> <span class="hljs-keyword">me</span> demonstrate <span class="hljs-keyword">using</span> Claude<span class="hljs-comment">'s web research capabilities by looking up current information about Claude Code:</span>

âº Web Search(<span class="hljs-string">"Claude Code AI assistant blog writing workflow 2025"</span>)
â¿  Did <span class="hljs-number">1</span> search <span class="hljs-keyword">in</span> <span class="hljs-number">29s</span>
</code></pre>
<p>ç ”ç©¶æ˜¾ç¤ºClaude Codeå·²ç»æ˜¾è‘—å‘å±•ï¼Œå¼€å‘äººå‘˜æŠ¥å‘Š"æ— è®ºå¤æ‚æ€§å¦‚ä½•ï¼Œ30-45åˆ†é’Ÿå†…å®Œæˆé¡¹ç›®"å’Œåƒå·¥ä½œæµç¨‹è‡ªåŠ¨åŒ–çš„é’©å­è¿™æ ·çš„æ–°åŠŸèƒ½ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet">âº Perfect! This demonstrates multiple research capabilities
This <span class="hljs-keyword">step</span> demonstrates Claude<span class="hljs-comment">'s research capabilities:</span>
- Searching existing content <span class="hljs-keyword">using</span> Grep <span class="hljs-built_in">and</span> Bash tools <span class="hljs-keyword">to</span> find relevant past articles
- Web research <span class="hljs-keyword">using</span> WebSearch <span class="hljs-keyword">to</span> <span class="hljs-keyword">get</span> current information about Claude Code
- Context synthesis combining multiple information sources <span class="hljs-keyword">to</span> inform the writing process
- Knowledge integration connecting <span class="hljs-built_in">new</span> research <span class="hljs-keyword">with</span> existing blog content patterns
</code></pre>
<p>å…³äºè¿™ä¸ªé˜¶æ®µçš„æœ‰è¶£ä¹‹å¤„åœ¨äºï¼Œæˆ‘æ²¡æœ‰è¦æ±‚Claudeåšä»»ä½•å¤–éƒ¨ç ”ç©¶ã€‚æˆ‘ä¿ç•™è¿™éƒ¨åˆ†æ˜¯å› ä¸ºæˆ‘çš„æœ‹å‹Claudeä¼¼ä¹å¯¹è¿™ä¸ªèƒ½åŠ›æ„Ÿåˆ°è‡ªè±ªï¼Œæˆ‘ä¸æƒ³è®©å®ƒæ„Ÿåˆ°è¢«å¿½è§†ã€‚</p>
<h3 data-id="heading-11">ä¸Šä¸‹æ–‡ç»¼åˆ</h3>
<p>é­”æ³•å‘ç”Ÿæ—¶æ˜¯Claudeå°†å†å²ä¸Šä¸‹æ–‡ï¼ˆä½ çš„ç°æœ‰å†…å®¹ï¼‰ä¸å½“å‰ç ”ç©¶ï¼ˆç½‘ç»œå‘ç°ï¼‰ç»“åˆèµ·æ¥ï¼Œä¸ºå†™ä½œè¿‡ç¨‹æä¾›ä¿¡æ¯ã€‚è¿™ä¸ä»…ä»…æ˜¯ä¿¡æ¯æ”¶é›† - å®ƒæ˜¯æ™ºèƒ½çš„ä¸Šä¸‹æ–‡ç¼–ç»‡ï¼Œç¡®ä¿æ–°å†…å®¹ä¸ä½ çš„ç°æœ‰ä½œå“è‡ªç„¶èåˆï¼ŒåŒæ—¶èå…¥æœ€æ–°å‘å±•ã€‚</p>
<h2 data-id="heading-12">ç¬¬3æ­¥ï¼šåä½œå†™ä½œè¿‡ç¨‹</h2>
<p>è¿™é‡Œå˜å¾—å…ƒäº† - æˆ‘å®é™…ä¸Šæ˜¯åœ¨æ¼”ç¤ºåä½œè¿‡ç¨‹æœ¬èº«æ—¶å†™è¿™ä¸€éƒ¨åˆ†ã€‚ä½ ç°åœ¨è¯»çš„å†…å®¹æ˜¯é€šè¿‡äººç±»æŒ‡å¯¼ä¸AIååŠ©ä¹‹é—´çš„è¿­ä»£ä¹‹èˆå†™æˆçš„ã€‚</p>
<h3 data-id="heading-13">Editå·¥å…·çš„å®é™…åº”ç”¨</h3>
<p>Claudeä¸é‡å†™æ•´ä¸ªç« èŠ‚ï¼Œè€Œæ˜¯ä½¿ç”¨æœ‰é’ˆå¯¹æ€§çš„ç¼–è¾‘æ¥æ‰©å±•å’Œæ”¹è¿›å†…å®¹ã€‚ä¾‹å¦‚ï¼Œç»†å¿ƒçš„è¯»è€…ä¼šæ³¨æ„åˆ°Claudeæœ€åˆè®¡åˆ’å†™æˆ‘çš„"åŒç»ˆç«¯"å·¥ä½œæµç¨‹ã€‚è¯»åˆ°é‚£ç‚¹æ—¶æˆ‘æ„è¯†åˆ°å®ƒä¸æˆ‘çš„å±å¹•ä¸åŒ¹é…ï¼Œæˆ‘å®é™…ä¸Šæœ‰å››ä¸ªçª—å£åœ¨è¿è¡Œã€‚æ‰€ä»¥æˆ‘å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">Change the setup <span class="hljs-selector-tag">from</span> <span class="hljs-selector-tag">a</span> "Dual Terminal Workflow" <span class="hljs-selector-tag">to</span> <span class="hljs-selector-tag">a</span> <span class="hljs-number">4</span> window workflow. Highlight the same two terminals, but add the vscode editor (where <span class="hljs-selector-tag">I</span> make live updates and review claude's changes) as well as <span class="hljs-selector-tag">a</span> live reload browser set <span class="hljs-selector-tag">to</span> mobile emulation
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4ccb01473b74ab2a8ae2027f5974b75~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763821149&amp;x-signature=78KyzOivKQyINaStf5bfF08izCA%3D" alt="" loading="lazy"/></p>
<p>æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°æ˜¾ç¤ºæ–°å†…å®¹æ­£åœ¨è¢«å†™å…¥</p>
<h3 data-id="heading-14">å®æ—¶åé¦ˆå¾ªç¯</h3>
<p>åœ¨åå°è¿è¡Œçš„HugoæœåŠ¡å™¨æ„å‘³ç€æˆ‘å¯ä»¥ç«‹å³çœ‹åˆ°æ›´æ”¹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0da2ff7918d4e82912eb7e5acff66d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763821149&amp;x-signature=6MPkdv%2FgBIJdJ4Hl2bInM00QlDc%3D" alt="" loading="lazy"/></p>
<p>æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°æ˜¾ç¤ºæ–°å†…å®¹æ­£åœ¨è¢«å†™å…¥</p>
<h3 data-id="heading-15">äººæœºä¼™ä¼´å…³ç³»</h3>
<p>è¿™ä¸æ˜¯Claude<strong>ä¸º</strong>æˆ‘å†™ä½œ - è€Œæ˜¯Claude<strong>ä¸</strong>æˆ‘ä¸€èµ·å†™ä½œã€‚æˆ‘æä¾›ï¼š</p>
<ul>
<li><strong>æ–¹å‘å’Œå£°éŸ³</strong> - "è®©è¿™éƒ¨åˆ†æ›´å¯¹è¯åŒ–"æˆ–"åœ¨è¿™é‡Œæ·»åŠ ä¸€ä¸ªæŠ€æœ¯ä¾‹å­"</li>
<li><strong>å†…å®¹ä¸“ä¸šçŸ¥è¯†</strong> - æˆ‘çš„å†™ä½œç»éªŒå’Œç‰¹å®šçŸ¥è¯†</li>
<li><strong>è´¨é‡æ§åˆ¶</strong> - å®¡æŸ¥æ¯ä¸ªæ›´æ”¹ä»¥ç¡®ä¿å®ƒç¬¦åˆæˆ‘çš„é£æ ¼å’Œæ„å›¾</li>
<li><strong>æœ€ç»ˆç‰ˆæœ¬</strong> - æˆ‘é€šå¸¸é‡å†™æˆ–é‡å†™è¿™äº›é¡µé¢ä¸Šçš„å¤§éƒ¨åˆ†å†…å®¹ã€‚å¸Œæœ›ä½ ç°åœ¨ç›¸ä¿¡æˆ‘æ­£åœ¨å†™è¿™ä¸ªå¥å­ï¼Œä½†æœªæ¥çš„å·¥ä½œæµç¨‹å°†æœ‰Claudeåœ¨æˆ‘çš„ä¸ªäººé£æ ¼ä¸Šè®­ç»ƒï¼Œæ‰€ä»¥è¿™ä¸ªåŒºåˆ«å¯èƒ½å˜å¾—æ›´åŠ æ¨¡ç³Šã€‚</li>
</ul>
<p>Claudeæä¾›ï¼š</p>
<ul>
<li><strong>ç»“æ„å’Œæµç¨‹</strong> - å°†æ€æƒ³ç»„ç»‡æˆè¿è´¯çš„ç« èŠ‚</li>
<li><strong>ç ”ç©¶ç»¼åˆ</strong> - å°†æ¥è‡ªå¤šä¸ªæ¥æºçš„ä¿¡æ¯ç¼–ç»‡åœ¨ä¸€èµ·</li>
<li><strong>è‰ç¨¿åŠ é€Ÿ</strong> - å°†ç²—ç•¥çš„æƒ³æ³•è½¬åŒ–ä¸ºç²¾ç‚¼çš„æ•£æ–‡</li>
<li><strong>ä¸€è‡´æ€§</strong> - åœ¨é•¿ç¯‡æ–‡ç« ä¸­ä¿æŒè¯­è°ƒå’Œé£æ ¼</li>
</ul>
<h3 data-id="heading-16">è¿­ä»£è¿‡ç¨‹</h3>
<p>å†™ä½œå˜æˆå¯¹è¯ï¼š</p>
<ul>
<li><strong>äººç±»</strong>ï¼š"æ‰©å±•ç ”ç©¶æ–¹æ³•éƒ¨åˆ†"</li>
<li><strong>Claude</strong>ï¼šæ·»åŠ å¸¦æœ‰ç¤ºä¾‹å’Œæˆªå›¾çš„è¯¦ç»†å†…å®¹</li>
<li><strong>äººç±»</strong>ï¼šé˜…è¯»å¹¶ç¼–è¾‘AIå†™çš„å†…å®¹</li>
<li><strong>äººç±»</strong>ï¼š"è¿™æ„Ÿè§‰å¤ªæŠ€æœ¯åŒ–äº† - è®©å®ƒæ›´æ˜“ç†è§£"</li>
<li><strong>Claude</strong>ï¼šä¿®æ”¹è¯­è¨€å¹¶æ·»åŠ ç±»æ¯”</li>
<li><strong>äººç±»</strong>ï¼šé˜…è¯»å¹¶ç¼–è¾‘AIå†™çš„å†…å®¹</li>
</ul>
<p>è¿™ç§æ¥å›ç»§ç»­ï¼Œç›´åˆ°å†…å®¹æ„Ÿè§‰åˆé€‚ã€‚è¿™æ˜¯åä½œç¼–è¾‘çš„æœ€ä½³çŠ¶æ€ã€‚</p>
<p>å¦‚æœä½ åœ¨Claudeçš„Editå·¥å…·ä¹‹å¤–ç›´æ¥å¯¹æ–‡ä»¶è¿›è¡Œç¼–è¾‘ï¼Œè®©Claudeé‡æ–°åŠ è½½æ–‡ä»¶ä»¥ç¡®ä¿å®ƒæœ‰æœ€æ–°ç‰ˆæœ¬æ˜¯ä¸€ä¸ªå¥½çš„åšæ³•ã€‚</p>
<h2 data-id="heading-17">ç¬¬4æ­¥ï¼šé€‰æ‹©æ ‡é¢˜å›¾åƒ</h2>
<p>åœ¨å‘å¸ƒä¹‹å‰ï¼Œæ¯ç¯‡åšå®¢æ–‡ç« éƒ½éœ€è¦ä¸€ä¸ªå¼•äººæ³¨ç›®çš„æ ‡é¢˜å›¾åƒã€‚Claude Codeä¸Unsplashçš„é›†æˆä½¿æ‰¾åˆ°å®Œç¾çš„å›¾åƒå˜å¾—ç®€å•ï¼Œå¹¶ç¡®ä¿é€‚å½“çš„å½’å±ã€‚</p>
<h3 data-id="heading-18">ä½¿ç”¨Unsplashé›†æˆæŸ¥æ‰¾å›¾åƒ</h3>
<p>å¯¹äºè¿™ç¯‡å…³äºAIè¾…åŠ©å†™ä½œçš„åšå®¢æ–‡ç« ï¼Œæˆ‘æœç´¢äº†èƒ½å¤Ÿæ•æ‰å·¥ä½œæµç¨‹æœ¬è´¨çš„å›¾åƒï¼š</p>
<pre><code class="hljs language-css" lang="css">find <span class="hljs-selector-tag">a</span> retro scifi image of <span class="hljs-selector-tag">a</span> helpful robot writer, preferably <span class="hljs-selector-tag">from</span> the pulp era
</code></pre>
<p>Claudeçš„Unsplashæœç´¢è¿”å›äº†å‡ ä¸ªé€‰é¡¹ï¼ŒåŒ…æ‹¬å¤å¤é£æ ¼çš„æœºå™¨äººå’Œæœªæ¥ä¸»ä¹‰çš„å†™ä½œåœºæ™¯ã€‚å®ƒè®¤ä¸ºé€‰æ‹©çš„å›¾åƒå®Œç¾åœ°æ•æ‰äº†åä½œçš„äººæœºå†™ä½œä¸»é¢˜ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet">âº I<span class="hljs-comment">'ll help you find a retro sci-fi image of a helpful robot writer from the pulp era using Unsplash.</span>

âº unsplash - search_photos (MCP)(query: <span class="hljs-string">"retro robot writer typewriter vintage sci-fi"</span>, per_page: <span class="hljs-number">5</span>)
â¿  âš  Large MCP response (~<span class="hljs-number">14.0</span>k tokens), this can fill up context
â¿  Found <span class="hljs-number">2400</span> photos (page <span class="hljs-number">1</span>/<span class="hljs-number">480</span>)

âº These are great vintage typewriter images, but I notice they<span class="hljs-comment">'re actual typewriters rather than robots. Let me try a more specific search for retro sci-fi robots or pulp era illustrations:</span>

âº unsplash - search_photos (MCP)(query: <span class="hljs-string">"pulp sci-fi robot illustration vintage"</span>, per_page: <span class="hljs-number">3</span>)
â¿  Found <span class="hljs-number">2400</span> photos (page <span class="hljs-number">1</span>/<span class="hljs-number">800</span>):
â¿  {
       <span class="hljs-string">"id"</span>: <span class="hljs-string">"kvX8IkD4OmQ"</span>,
       <span class="hljs-string">"slug"</span>: <span class="hljs-string">"black-and-gray-bicycle-with-stand-kvX8IkD4OmQ"</span>,
     â€¦ +<span class="hljs-number">120</span> lines (ctrl+r <span class="hljs-keyword">to</span> expand)
  â¿  [Image]
  â¿  {
       <span class="hljs-string">"id"</span>: <span class="hljs-string">"F799HJMu0kY"</span>,
       <span class="hljs-string">"slug"</span>: <span class="hljs-string">"gray-and-blue-robot-toy-F799HJMu0kY"</span>,
     â€¦ +<span class="hljs-number">117</span> lines (ctrl+r <span class="hljs-keyword">to</span> expand)
...

âº Perfect! I found some great options. The second image <span class="hljs-keyword">with</span> the gray <span class="hljs-built_in">and</span> blue robot toy <span class="hljs-built_in">is</span> perfect - it has a retro, helpful robot aesthetic that would work great <span class="hljs-keyword">as</span> a featured image <span class="hljs-keyword">for</span> your blog post. The third image <span class="hljs-keyword">of</span> the Tin Man <span class="hljs-keyword">from</span> Wizard <span class="hljs-keyword">of</span> Oz also has a nice vintage robot feel.

<span class="hljs-keyword">For</span> your blog post, I<span class="hljs-comment">'d recommend the gray and blue robot toy (image #2) as it:</span>
- Has a friendly, helpful appearance
- Retro sci-fi aesthetic without being too vintage/pulp
- Clean composition that would work well <span class="hljs-keyword">as</span> a featured image

&gt; yes use #<span class="hljs-number">2</span>

âº Perfect! Now <span class="hljs-keyword">let</span><span class="hljs-comment">'s update the blog post front matter to use the correct image filename:</span>

âº Update(<span class="hljs-string">"content/post/streamlining-blog-writing-with-claude-code/index.md"</span>)
â¿  Updated

âº Excellent! The image downloaded successfully (<span class="hljs-number">126</span>k file size). Now <span class="hljs-keyword">let</span><span class="hljs-comment">'s test how it looks in the Hugo server by checking if it's accessible:</span>
...

âº Perfect! Your blog post <span class="hljs-built_in">is</span> now complete <span class="hljs-keyword">with</span>:
</code></pre>
<h3 data-id="heading-19">è‡ªåŠ¨å½’å±å¤„ç†</h3>
<p>æˆ‘è®¾ç½®Claudeçš„Unsplashé›†æˆçš„æœ€ä½³åŠŸèƒ½ä¹‹ä¸€æ˜¯è‡ªåŠ¨å½’å±å¤„ç†ã€‚å½“ä½ é€‰æ‹©å›¾åƒæ—¶ï¼ŒClaudeä»¥é€‚å½“çš„markdownæ ¼å¼æä¾›å®Œæ•´çš„å½’å±æ–‡æœ¬ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Photo by <span class="hljs-section">[Johnny Briggs]</span>(https://unsplash.com/@johnnyboylee?<span class="hljs-attr">utm_content</span>=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash) <span class="hljs-literal">on</span> [Unsplash](https://unsplash.com/photos/black-typewriter-<span class="hljs-literal">on</span>-brown-wooden-table-Q2sI-omncsk?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash)
</code></pre>
<p>è¿™ç¡®ä¿å¯¹æ‘„å½±å¸ˆçš„é€‚å½“è®¤å¯ï¼ŒåŒæ—¶éµå®ˆUnsplashçš„æœåŠ¡æ¡æ¬¾ã€‚å›¾åƒä¼šè‡ªåŠ¨ä¸‹è½½åˆ°ä½ çš„æ–‡ç« ç›®å½•ï¼Œå¹¶å¸¦æœ‰é€‚å½“çš„æ–‡ä»¶åã€‚</p>
<h3 data-id="heading-20">ä¸Hugo Front matterçš„é›†æˆ</h3>
<p>é€‰æ‹©çš„å›¾åƒä¸Hugoçš„front matteræ— ç¼é›†æˆï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">cover:
  image: <span class="hljs-string">"featured-image.jpg"</span>
  alt: <span class="hljs-string">"Modern workspace with laptop and coffee representing AI-assisted writing workflow"</span>
  caption: <span class="hljs-string">"The modern writer's setup: Where human creativity meets AI assistance"</span>
</code></pre>
<p>è¿™ç§æ–¹æ³•ç¡®ä¿ä½ çš„åšå®¢æ–‡ç« æœ‰ä¸“ä¸šçš„ã€åˆæ³•åˆè§„çš„å›¾åƒï¼Œå¢å¼ºå†…å®¹è€Œä¸æ˜¯åˆ†æ•£æ³¨æ„åŠ›ã€‚</p>
<p>å¦‚æœä½ æ³¨æ„åˆ°è¿™é‡Œä½¿ç”¨çš„å›¾åƒï¼Œå®ƒ<strong>ä¸æ˜¯</strong>ä¸€ä¸ªç°è‰²å’Œè“è‰²çš„ç©å…·æœºå™¨äººï¼æˆ‘é€šè¿‡Claudeç»å†äº†å‡ å¼ å›¾åƒï¼Œç„¶åæˆ‘è‡ªå·±åšäº†ä¸€ä¸ªæœç´¢ã€‚ClaudeçœŸçš„å¾ˆåŠªåŠ›ï¼Œä½†æœ‰æ—¶æˆ‘åªéœ€è¦è‡ªå·±åšå·¥ä½œå¹¶æä¾›åé¦ˆã€‚</p>
<p>æˆ‘ä¸ªäººä¸å–œæ¬¢AIè‰ºæœ¯ã€‚ä½¿ç”¨é‚£å°†å’Œå‘å¸ƒClaudeåå‡ºçš„è¿™ç¯‡æ–‡ç« çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ä¸€æ ·æ‡’æƒ°å’Œä¸çœŸå®ã€‚å¦‚æœä½ å°Šé‡ä½ çš„å®¢æˆ·ã€è¯»è€…å’Œæ™®é€šäºº - ä¸è¦é‚£ä¹ˆæ‡’æƒ°ã€‚</p>
<p>æœ‰å¾ˆå¤šé«˜è´¨é‡å’Œè‰ºæœ¯æ€§çš„å›¾åƒï¼Œæˆ‘å®æ„¿ç”¨æˆ‘çš„å°åšå®¢é€šè¿‡å½’å±é“¾æ¥å’Œæˆ‘çš„æ„Ÿè°¢æ¥çªå‡ºæŸäººçš„åŠªåŠ›ï¼å¤å¤å°ç¯å’Œè€å¼æ‰“å­—æœºçš„æ ‡é¢˜å›¾åƒæ—¢åœ¨è‰ºæœ¯ä¸Šæœ‰è¶£ï¼Œåˆåœ¨æŠ€æœ¯ä¸Šæ‹æ‘„å¾—å¾ˆå¥½ã€‚</p>
<h2 data-id="heading-21">ç¬¬5æ­¥ï¼šå‘å¸ƒå’Œéƒ¨ç½²</h2>
<p>å·¥ä½œæµç¨‹çš„æœ€åä¸€æ­¥å±•ç¤ºäº†å†…å®¹åˆ›å»ºå’Œéƒ¨ç½²ä¹‹é—´çš„æ— ç¼é›†æˆã€‚ä¸€æ—¦åšå®¢æ–‡ç« å®Œæˆï¼Œå‘å¸ƒéµå¾ªå·²å»ºç«‹çš„Gitå·¥ä½œæµç¨‹ï¼ŒClaudeååŠ©ç›‘æ§ã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">let</span><span class="hljs-comment">'s publish this!</span>

Commit the current changes, use the github-action agent <span class="hljs-keyword">to</span> watch <span class="hljs-keyword">for</span> the job completion, <span class="hljs-built_in">and</span> <span class="hljs-keyword">then</span> check that version <span class="hljs-built_in">is</span> visible online at its proper url <span class="hljs-built_in">and</span> <span class="hljs-keyword">on</span> the homepage <span class="hljs-keyword">as</span> the most recent post
</code></pre>
<p>Claudeå¤„ç†æ•´ä¸ªéƒ¨ç½²è¿‡ç¨‹ï¼š</p>
<ul>
<li><strong>æš‚å­˜å’Œæäº¤æ‰€æœ‰æ›´æ”¹</strong>ï¼Œä½¿ç”¨é€‚å½“çš„æäº¤æ¶ˆæ¯æ ¼å¼</li>
<li><strong>æ¨é€åˆ°GitHub</strong>ï¼Œè§¦å‘è‡ªåŠ¨éƒ¨ç½²ç®¡é“</li>
<li><strong>ç›‘æ§GitHub Actions</strong>ï¼Œä½¿ç”¨ä¸“é—¨çš„ä»£ç†ç›‘è§†å·¥ä½œæµç¨‹å®Œæˆ</li>
<li><strong>éªŒè¯éƒ¨ç½²çŠ¶æ€</strong>ï¼Œç¡®è®¤è‰ç¨¿è¡Œä¸º</li>
</ul>
<h3 data-id="heading-22">Gitæäº¤æ ‡å‡†</h3>
<p>éµå¾ªCLAUDE.mdæ ‡å‡†ï¼Œæäº¤ä½¿ç”¨ç»“æ„åŒ–æ¶ˆæ¯ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">git</span> <span class="hljs-selector-tag">commit</span> <span class="hljs-selector-tag">-m</span> "<span class="hljs-selector-tag">Add</span> <span class="hljs-selector-tag">comprehensive</span> <span class="hljs-selector-tag">blog</span> <span class="hljs-selector-tag">post</span> <span class="hljs-selector-tag">about</span> <span class="hljs-selector-tag">Claude</span> <span class="hljs-selector-tag">Code</span> <span class="hljs-selector-tag">workflow</span>

<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Document</span> <span class="hljs-selector-tag">complete</span> <span class="hljs-number">4</span><span class="hljs-selector-tag">-window</span> <span class="hljs-selector-tag">workflow</span> <span class="hljs-selector-tag">setup</span> <span class="hljs-selector-tag">for</span> <span class="hljs-selector-tag">collaborative</span> <span class="hljs-selector-tag">writing</span>
<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Include</span> <span class="hljs-selector-tag">real</span> <span class="hljs-selector-tag">screenshots</span> <span class="hljs-selector-tag">and</span> <span class="hljs-selector-tag">command</span> <span class="hljs-selector-tag">examples</span> <span class="hljs-selector-tag">from</span> <span class="hljs-selector-tag">actual</span> <span class="hljs-selector-tag">process</span>
<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Cover</span> <span class="hljs-selector-tag">planning</span>, <span class="hljs-selector-tag">research</span>, <span class="hljs-selector-tag">writing</span>, <span class="hljs-selector-tag">and</span> <span class="hljs-selector-tag">deployment</span> <span class="hljs-selector-tag">phases</span>
<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Add</span> <span class="hljs-selector-tag">featured</span> <span class="hljs-selector-tag">image</span> <span class="hljs-selector-tag">with</span> <span class="hljs-selector-tag">proper</span> <span class="hljs-selector-tag">Unsplash</span> <span class="hljs-selector-tag">attribution</span>
<span class="hljs-selector-tag">-</span> <span class="hljs-selector-tag">Create</span> <span class="hljs-selector-tag">draft</span> <span class="hljs-selector-tag">version</span> <span class="hljs-selector-tag">for</span> <span class="hljs-selector-tag">review</span> <span class="hljs-selector-tag">before</span> <span class="hljs-selector-tag">publication</span>

ğŸ¤– <span class="hljs-selector-tag">Generated</span> <span class="hljs-selector-tag">with</span> <span class="hljs-selector-attr">[Claude Code]</span>(<span class="hljs-attribute">https</span>:<span class="hljs-comment">//claude.ai/code)</span>

<span class="hljs-attribute">Co-Authored-By</span>: Claude &lt;noreply<span class="hljs-variable">@anthropic</span>.com&gt;"
</code></pre>
<h3 data-id="heading-23">è‡ªåŠ¨éƒ¨ç½²ç®¡é“</h3>
<p>GitHub Actionså·¥ä½œæµç¨‹è‡ªåŠ¨ï¼š</p>
<ul>
<li>ä½¿ç”¨ç‰ˆæœ¬0.146.0æ„å»ºHugoç«™ç‚¹</li>
<li>éƒ¨ç½²åˆ°Azureé™æ€Web Apps</li>
<li>æä¾›éƒ¨ç½²çŠ¶æ€çš„å³æ—¶åé¦ˆ</li>
</ul>
<h3 data-id="heading-24">è‰ç¨¿éªŒè¯</h3>
<p>ClaudeéªŒè¯éƒ¨ç½²ï¼š</p>
<ul>
<li><strong>ä¸»é¡µæ£€æŸ¥</strong>ï¼šâœ… ç¡®è®¤æ–‡ç« ä½œä¸ºæœ€æ–°æ–‡ç« å¯è§</li>
<li><strong>ç›´æ¥URLæ£€æŸ¥</strong>ï¼šâœ… ç¡®è®¤200å“åº”å¹¶æ£€æŸ¥å†…å®¹</li>
<li><strong>éƒ¨ç½²çŠ¶æ€</strong>ï¼šâœ… ç›‘æ§GitHub Actionså®Œæˆ</li>
</ul>
<p>è¿™ç§éªŒè¯ç¡®ä¿å†…å®¹æ˜¯æˆ‘æ‰€æœŸæœ›çš„ã€‚ç”±äºæˆ‘ä¹Ÿä½¿ç”¨BrowserMCPï¼Œæˆ‘å¯ä»¥çœ‹åˆ°æˆ‘çš„æ¡Œé¢æµè§ˆå™¨åŠ è½½é¡µé¢ï¼Œæˆ‘å¯ä»¥åŒé‡æ£€æŸ¥å¸ƒå±€</p>
<pre><code class="hljs language-vbnet" lang="vbnet">âº github-actions-monitor(Monitor publication deployment)
â¿  Done (<span class="hljs-number">14</span> tool uses Â· <span class="hljs-number">75.9</span>k tokens Â· <span class="hljs-number">1</span>m <span class="hljs-number">57.4</span>s)

âº ğŸ‰ Publication Complete!

Your Claude Code workflow blog post <span class="hljs-built_in">is</span> now live <span class="hljs-built_in">and</span> <span class="hljs-keyword">public</span>!

âœ… Deployment Verified:
- GitHub Actions: Successfully deployed commit d6ad816
- Homepage: Shows <span class="hljs-keyword">as</span> the most recent post
- Direct URL: https://www.aaronheld.com/post/streamlining-blog-writing-<span class="hljs-keyword">with</span>-claude-code/ â† LIVE
- Content: All screenshots, formatting, <span class="hljs-built_in">and</span> content displaying perfectly

ğŸ¯ Meta Achievement Unlocked:
This blog post about the Claude Code workflow was created <span class="hljs-keyword">using</span> the exact workflow it describes - <span class="hljs-keyword">from</span> initial planning <span class="hljs-keyword">with</span> TodoWrite, through collaborative writing, <span class="hljs-keyword">to</span> automated deployment <span class="hljs-built_in">and</span> verification. The post serves <span class="hljs-keyword">as</span> both documentation <span class="hljs-built_in">and</span> proof-<span class="hljs-keyword">of</span>-concept!

ğŸ“Š Final Stats:
- Complete workflow demonstrated: Planning â†’ Research â†’ Writing â†’ Publishing
- Real screenshots captured: Showing actual process steps
- Comprehensive guide: <span class="hljs-number">1</span>,<span class="hljs-number">500</span>+ words <span class="hljs-keyword">with</span> technical details
- Live example: The post itself proves the workflow works

Your readers now have a complete, authentic guide <span class="hljs-keyword">to</span> AI-assisted blogging <span class="hljs-keyword">with</span> Claude Code, demonstrated through the very post they<span class="hljs-comment">'re reading!</span>
</code></pre>
<h2 data-id="heading-25">ç»“æœï¼šä¸ºä»€ä¹ˆè¿™ä¸ªå·¥ä½œæµç¨‹æœ‰æ•ˆ</h2>
<p>åœ¨å®æ–½è¿™ä¸ªClaude Code + Hugoå·¥ä½œæµç¨‹åï¼Œå‡ºç°äº†å‡ ä¸ªå…³é”®å¥½å¤„ï¼š</p>
<h3 data-id="heading-26">åœ¨ä¸æŸå¤±è´¨é‡çš„æƒ…å†µä¸‹èŠ‚çœæ—¶é—´</h3>
<p>è¿‡å»éœ€è¦æˆ‘å‡ å¤©å†™ä½œå’Œæ‹–å»¶çš„äº‹æƒ…ç°åœ¨åœ¨å‡ ä¸ªå°æ—¶çš„ä¸“æ³¨åŠªåŠ›ä¸­å‘ç”Ÿã€‚è´¨é‡å®é™…ä¸Š<strong>æé«˜</strong>äº†ã€‚ç ”ç©¶é˜¶æ®µæ›´å½»åº•ï¼Œç»“æ„æ›´æœ‰ç»„ç»‡ï¼Œè¿­ä»£ç¼–è¾‘è¿‡ç¨‹æ•æ‰åˆ°æˆ‘å¯èƒ½é—æ¼çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-27">å‡å°‘å†™ä½œéšœç¢</h3>
<p>TodoWriteè§„åˆ’é˜¶æ®µæ¶ˆé™¤äº†ç©ºç™½é¡µé¢é—®é¢˜ã€‚ä¸æ˜¯ç›¯ç€ç©ºæ–‡æ¡£æƒ³çŸ¥é“ä»å“ªé‡Œå¼€å§‹ï¼Œæˆ‘æœ‰ä¸€ä¸ªå®Œæˆç‰¹å®šä»»åŠ¡çš„æ¸…æ™°è·¯çº¿å›¾ã€‚</p>
<h3 data-id="heading-28">æ›´å¥½çš„ç ”ç©¶é›†æˆ</h3>
<p>Claudeèƒ½å¤Ÿå¿«é€Ÿæœç´¢æˆ‘çš„ç°æœ‰å†…å®¹å¹¶æ‹‰å…¥å½“å‰ç½‘ç»œç ”ç©¶ï¼Œæ„å‘³ç€æˆ‘çš„æ–‡ç« ä¿¡æ¯æ›´å……åˆ†ï¼Œä¸æˆ‘æ›´å¹¿æ³›çš„ä½œå“è”ç³»æ›´ç´§å¯†ã€‚æ³¨æ„ï¼šå¯¹äºæ›´æ·±å…¥çš„ç ”ç©¶ï¼Œæ¯”å¦‚æˆ‘å…³äºæ•æ·å’Œç»æµè¡°é€€çš„å¸–å­ï¼Œæˆ‘ä¿®æ”¹è¿™ä¸ªå·¥ä½œæµç¨‹ã€‚æˆ‘é¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºç™½å¸–å­å¹¶åœ¨Geminiä¸­è¿›è¡Œç ”ç©¶ã€‚ä¸€æ—¦æˆ‘æœ‰è‰ç¨¿ï¼Œæˆ‘å°†å…¶ç²˜è´´åˆ°VS Codeå¹¶ç»§ç»­è¿­ä»£ï¼Œä½¿ç”¨Claudeå¯»æ‰¾éAIç”Ÿæˆçš„å›¾åƒç­‰ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-29">çœŸå®çš„åä½œ</h3>
<p>è¿™ä¸æ˜¯AIå–ä»£äººç±»åˆ›é€ åŠ› - è€Œæ˜¯AIæ”¾å¤§å®ƒã€‚æˆ‘çš„å£°éŸ³ã€ä¸“ä¸šçŸ¥è¯†å’Œç¼–è¾‘åˆ¤æ–­ä»ç„¶æ˜¯è¿‡ç¨‹çš„æ ¸å¿ƒã€‚Claudeå¤„ç†æœºæ¢°æ–¹é¢ï¼Œè€Œæˆ‘ä¸“æ³¨äºåˆ›æ„å’Œæˆ˜ç•¥å…ƒç´ ã€‚</p>
<h2 data-id="heading-30">å¼€å§‹ï¼šä½ çš„ä¸‹ä¸€æ­¥</h2>
<p>å¦‚æœä½ æƒ³è‡ªå·±å°è¯•è¿™ä¸ªå·¥ä½œæµç¨‹ï¼š</p>
<ul>
<li><strong>ä»Claude Codeå¼€å§‹</strong> - ç†Ÿæ‚‰TodoWriteã€Editå’Œç ”ç©¶å·¥å…·</li>
<li><strong>è®¾ç½®ä½ çš„ç¯å¢ƒ</strong> - HugoæœåŠ¡å™¨ï¼ˆæˆ–ä½ çš„é™æ€ç”Ÿæˆå™¨ï¼‰+ Claudeå·¥ä½œç©ºé—´</li>
<li><strong>ä»è§„åˆ’å¼€å§‹</strong> - è®©Claudeå°†ä½ çš„ä¸‹ä¸€ä¸ªå†™ä½œé¡¹ç›®åˆ†è§£ä¸ºå¯ç®¡ç†çš„ä»»åŠ¡</li>
<li><strong>å°è¯•ç ”ç©¶é˜¶æ®µ</strong> - å°è¯•å°†ç°æœ‰å†…å®¹æœç´¢ä¸ç½‘ç»œç ”ç©¶ç»“åˆèµ·æ¥</li>
<li><strong>æ‹¥æŠ±è¿­ä»£è¿‡ç¨‹</strong> - ä¸è¦æœŸæœ›ç¬¬ä¸€ç¨¿å°±å®Œç¾ï¼›è®©åä½œæ¼”è¿›</li>
</ul>
<p>å†…å®¹åˆ›å»ºçš„æœªæ¥ä¸æ˜¯å…³äºAIå–ä»£å†™ä½œè€… - è€Œæ˜¯å…³äºAIè®©å†™ä½œæ›´é«˜æ•ˆã€æ›´ç ”ç©¶é©±åŠ¨ï¼Œå¦ç‡åœ°è¯´ï¼Œæ›´æœ‰è¶£ã€‚å°è¯•ä¸€ä¸‹ï¼Œä½ å¯èƒ½ä¼šå‘ç°å†™ä½œå†æ¬¡å˜å¾—æ„‰å¿«ã€‚</p>
<p>æˆ‘ä¼šåœ¨æœªæ¥çš„å¸–å­ä¸­è¯¦ç»†ä»‹ç»æˆ‘çš„è®¾ç½®ã€‚æˆ‘å¤§é‡åˆ©ç”¨å‡ ä¸ªMCPå’ŒClaudeçš„å­ä»£ç†æ¥é«˜æ•ˆä½¿ç”¨ä¸Šä¸‹æ–‡ã€‚æˆ‘å›´ç»•å¤šæ­¥éª¤ä¸Šä¸‹æ–‡æ–‡ä»¶çš„å¾ˆå¤šæ€è€ƒéƒ½æ˜¯å…³äºå†…å­˜ç®¡ç†å’Œä¿æŒä»¤ç‰Œä½¿ç”¨ä¼˜åŒ–ã€‚è¿™ä¸ªå·¥ä½œæµç¨‹åœ¨æˆ‘çš„ä¸“ä¸šè®¡åˆ’ä¸Šè¿è¡Œè‰¯å¥½ï¼ˆåœ¨æœ¬æ–‡æ’°å†™æ—¶20ç¾å…ƒ/æœˆï¼‰</p>
<p>è¿™ç¯‡æ•´ä¸ªåšå®¢æ–‡ç« éƒ½æ˜¯ä½¿ç”¨ä¸Šè¿°ç¡®åˆ‡å·¥ä½œæµç¨‹ç¼–å†™çš„ï¼Œåœ¨å®é™…å†™ä½œè¿‡ç¨‹ä¸­æ•è·äº†çœŸå®çš„æˆªå›¾ã€‚åœ¨ä½¿ç”¨è¿‡ç¨‹çš„åŒæ—¶è®°å½•è¿‡ç¨‹æ˜¯ä¸€ç§æœ‰è¶£çš„å…ƒä½“éªŒï¼Œå› ä¸ºæˆ‘åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¸æ–­è°ƒæ•´è¿‡ç¨‹ã€‚æŒ‰ç…§AIå·¥ä½œæµç¨‹çš„å‘å±•é€Ÿåº¦ï¼Œæˆ‘éœ€è¦æ¯éš”å‡ å‘¨ä¿®æ”¹è¿™ç¯‡æ–‡ç« </p>
<p>å¦‚æœä½ ä¸ºä½ ä¸Šä¸€ä¸ªé¡¹ç›®æ„Ÿåˆ°éª„å‚²ï¼Œé‚£ä¹ˆä½ æ²¡æœ‰å­¦åˆ°ä»»ä½•ä¸œè¥¿ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘å¦‚ä½•ä½¿ç”¨æ¯ä¸€ä¸ª Claude Code åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7572714389922873384</link>    <guid>https://juejin.cn/post/7572714389922873384</guid>    <pubDate>2025-11-15T14:38:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572714389922873384" data-draft-id="7572454929144987683" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘å¦‚ä½•ä½¿ç”¨æ¯ä¸€ä¸ª Claude Code åŠŸèƒ½"/> <meta itemprop="keywords" content="Claude"/> <meta itemprop="datePublished" content="2025-11-15T14:38:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘å¦‚ä½•ä½¿ç”¨æ¯ä¸€ä¸ª Claude Code åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T14:38:32.000Z" title="Sat Nov 15 2025 14:38:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.sshh.io%2Fp%2Fhow-i-use-every-claude-code-feature" target="_blank" title="https://blog.sshh.io/p/how-i-use-every-claude-code-feature" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<p>å…³äºæˆ‘ä½¿ç”¨ Claude Code å„ç§æ–¹å¼çš„å…¨é¢æ€»ç»“ã€‚</p>
<hr/>
<p>æˆ‘ç»å¸¸ä½¿ç”¨ Claude Codeã€‚</p>
<p>ä½œä¸ºä¸šä½™çˆ±å¥½è€…ï¼Œæˆ‘æ¯å‘¨åœ¨è™šæ‹Ÿæœºä¸­è¿è¡Œå¥½å‡ æ¬¡ï¼Œç”¨äºä¸ªäººé¡¹ç›®ï¼Œç»å¸¸ä½¿ç”¨ <code>--dangerously-skip-permissions</code> æ¥éšæ€§ç¼–ç æˆ‘è„‘æµ·ä¸­æƒ³åˆ°çš„ä»»ä½•æƒ³æ³•ã€‚åœ¨å·¥ä½œä¸­ï¼Œæˆ‘å›¢é˜Ÿçš„ä¸€éƒ¨åˆ†ä¸ºæˆ‘ä»¬å·¥ç¨‹å›¢é˜Ÿæ„å»º AI-IDE è§„åˆ™å’Œå·¥å…·ï¼Œæ¯æœˆæ¶ˆè€—æ•°åäº¿ä¸ª token ä»…ç”¨äºä»£ç ç”Ÿæˆã€‚</p>
<p>CLI agent é¢†åŸŸå˜å¾—è¶Šæ¥è¶Šæ‹¥æŒ¤ï¼Œåœ¨ Claude Codeã€Gemini CLIã€Cursor å’Œ Codex CLI ä¹‹é—´ï¼Œæˆ‘è§‰å¾—çœŸæ­£çš„æ¯”èµ›æ˜¯åœ¨ Anthropic å’Œ OpenAI ä¹‹é—´ã€‚ä½†è¯´å®è¯ï¼Œå½“æˆ‘å’Œå…¶ä»–å¼€å‘è€…äº¤è°ˆæ—¶ï¼Œä»–ä»¬çš„é€‰æ‹©å¾€å¾€å½’ç»“ä¸ºçœ‹èµ·æ¥å¾ˆè¡¨é¢çš„ä¸œè¥¿â€”â€”ä¸€ä¸ª"å¹¸è¿"çš„åŠŸèƒ½å®ç°æˆ–è€…ä»–ä»¬åå¥½çš„ç³»ç»Ÿæç¤º"é£æ ¼"ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œè¿™äº›å·¥å…·éƒ½ç›¸å½“ä¸é”™ã€‚æˆ‘ä¹Ÿè§‰å¾—äººä»¬å¾€å¾€è¿‡åº¦å…³æ³¨è¾“å‡ºé£æ ¼æˆ– UIã€‚å¯¹æˆ‘æ¥è¯´ï¼Œ"ä½ å®Œå…¨æ­£ç¡®ï¼"çš„è°„åªšä¸æ˜¯ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ bugï¼›è¿™æ˜¯ä¸€ä¸ªä¿¡å·ï¼Œè¯´æ˜ä½ å‚ä¸å¾—å¤ªå¤šäº†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘çš„ç›®æ ‡æ˜¯"å‘å°„åå¿˜è®°"â€”â€”å§”æ‰˜ã€è®¾ç½®ä¸Šä¸‹æ–‡ï¼Œç„¶åè®©å®ƒå·¥ä½œã€‚é€šè¿‡æœ€ç»ˆçš„ PR è€Œä¸æ˜¯è¿‡ç¨‹æ¥è¯„åˆ¤å·¥å…·ã€‚</p>
<p>åšæŒä½¿ç”¨ Claude Code å‡ ä¸ªæœˆåï¼Œè¿™ç¯‡æ–‡ç« æ˜¯æˆ‘å¯¹ Claude Code æ•´ä¸ªç”Ÿæ€ç³»ç»Ÿçš„åæ€ã€‚æˆ‘ä»¬å°†æ¶µç›–æˆ‘ä½¿ç”¨çš„å‡ ä¹æ¯ä¸ªåŠŸèƒ½ï¼ˆåŒæ ·é‡è¦çš„æ˜¯ï¼Œæˆ‘æ²¡æœ‰ä½¿ç”¨çš„åŠŸèƒ½ï¼‰ï¼Œä»åŸºç¡€çš„ CLAUDE.md æ–‡ä»¶å’Œè‡ªå®šä¹‰æ–œæ å‘½ä»¤ï¼Œåˆ°å¼ºå¤§çš„ Subagentsã€Hooks å’Œ GitHub Actions ä¸–ç•Œã€‚è¿™ç¯‡æ–‡ç« æœ‰ç‚¹é•¿ï¼Œæˆ‘å»ºè®®å°†å…¶ä½œä¸ºå‚è€ƒè€Œä¸æ˜¯å®Œæ•´é˜…è¯»çš„å†…å®¹ã€‚</p>
<h2 data-id="heading-0">CLAUDE.md</h2>
<p>åœ¨ä½ çš„ä»£ç åº“ä¸­æœ‰æ•ˆä½¿ç”¨ Claude Code æœ€é‡è¦æ–‡ä»¶æ˜¯æ ¹ç›®å½•ä¸‹çš„ <code>CLAUDE.md</code>ã€‚è¿™ä¸ªæ–‡ä»¶æ˜¯ agent çš„"å®ªæ³•"ï¼Œæ˜¯äº†è§£ä½ çš„ç‰¹å®šå­˜å‚¨åº“å¦‚ä½•å·¥ä½œçš„ä¸»è¦çœŸå®æ¥æºã€‚</p>
<p>ä½ å¦‚ä½•å¤„ç†è¿™ä¸ªæ–‡ä»¶å–å†³äºä¸Šä¸‹æ–‡ã€‚å¯¹äºæˆ‘çš„ä¸šä½™é¡¹ç›®ï¼Œæˆ‘è®© Claude åœ¨å…¶ä¸­å€¾å€’ä»»ä½•å®ƒæƒ³è¦çš„ä¸œè¥¿ã€‚</p>
<p>åœ¨æˆ‘çš„ä¸“ä¸šå·¥ä½œä¸­ï¼Œæˆ‘ä»¬çš„å•ä½“ä»“åº“çš„ <code>CLAUDE.md</code> æ˜¯ä¸¥æ ¼ç»´æŠ¤çš„ï¼Œç›®å‰æœ‰ 13KBï¼ˆæˆ‘å¾ˆå®¹æ˜“çœ‹åˆ°å®ƒå¢é•¿åˆ° 25KBï¼‰ã€‚</p>
<ul>
<li>å®ƒåªè®°å½• 30%ï¼ˆä»»æ„ï¼‰æˆ–æ›´å¤šå·¥ç¨‹å¸ˆä½¿ç”¨çš„å·¥å…·å’Œ APIï¼ˆå…¶ä»–å·¥å…·åœ¨äº§å“æˆ–åº“ç‰¹å®šçš„ markdown æ–‡ä»¶ä¸­è®°å½•ï¼‰</li>
<li>æˆ‘ä»¬ç”šè‡³å¼€å§‹ä¸ºæ¯ä¸ªå†…éƒ¨å·¥å…·çš„æ–‡æ¡£æœ‰æ•ˆåˆ†é…æœ€å¤§ token è®¡æ•°ï¼Œå°±åƒå‘å›¢é˜Ÿå‡ºå”®"å¹¿å‘Šç©ºé—´"ä¸€æ ·ã€‚å¦‚æœä½ ä¸èƒ½ç®€æ´åœ°è§£é‡Šä½ çš„å·¥å…·ï¼Œå®ƒå°±ä¸é€‚åˆæ”¾åœ¨ <code>CLAUDE.md</code> ä¸­ã€‚</li>
</ul>
<h3 data-id="heading-1">æç¤ºå’Œå¸¸è§åæ¨¡å¼</h3>
<p>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæˆ‘ä»¬ä¸ºç¼–å†™æœ‰æ•ˆçš„ <code>CLAUDE.md</code> å‘å±•äº†å¼ºçƒˆã€æœ‰è§‚ç‚¹çš„å“²å­¦ã€‚</p>
<ol>
<li>
<p><strong>ä»æŠ¤æ å¼€å§‹ï¼Œè€Œä¸æ˜¯æ‰‹å†Œã€‚</strong> ä½ çš„ <code>CLAUDE.md</code> åº”è¯¥ä»å°å¼€å§‹ï¼ŒåŸºäº Claude å‡ºé”™çš„åœ°æ–¹è¿›è¡Œè®°å½•ã€‚</p>
</li>
<li>
<p><strong>ä¸è¦ @-æ–‡ä»¶æ–‡æ¡£ã€‚</strong> å¦‚æœä½ åœ¨åˆ«å¤„æœ‰å¤§é‡æ–‡æ¡£ï¼Œåœ¨ä½ çš„ <code>CLAUDE.md</code> ä¸­ @-æåŠè¿™äº›æ–‡ä»¶å¾ˆè¯±äººã€‚è¿™ä¼šåœ¨æ¯æ¬¡è¿è¡Œæ—¶é€šè¿‡åµŒå…¥æ•´ä¸ªæ–‡ä»¶æ¥è†¨èƒ€ä¸Šä¸‹æ–‡çª—å£ã€‚ä½†å¦‚æœä½ åªæ˜¯æåŠè·¯å¾„ï¼ŒClaude ç»å¸¸ä¼šå¿½ç•¥å®ƒã€‚ä½ å¿…é¡»å‘ agent æ¨é”€ä¸ºä»€ä¹ˆè¦ä»¥åŠä½•æ—¶è¯»å–æ–‡ä»¶ã€‚"å¯¹äºå¤æ‚â€¦â€¦ä½¿ç”¨æˆ–é‡åˆ° <code>FooBarError</code> æ—¶ï¼Œè¯·å‚é˜… <code>path/to/docs.md</code> ä»¥è·å–é«˜çº§æ•…éšœæ’é™¤æ­¥éª¤ã€‚"</p>
</li>
<li>
<p><strong>ä¸è¦åªè¯´"æ°¸è¿œä¸è¦"ã€‚</strong> é¿å…åƒ"æ°¸è¿œä¸è¦ä½¿ç”¨ <code>--foo-bar</code> æ ‡å¿—"è¿™æ ·çš„ä»…å¦å®šçº¦æŸã€‚å½“ agent è®¤ä¸ºå®ƒå¿…é¡»ä½¿ç”¨è¯¥æ ‡å¿—æ—¶ï¼Œå®ƒä¼šå¡ä½ã€‚å§‹ç»ˆæä¾›æ›¿ä»£æ–¹æ¡ˆã€‚</p>
</li>
<li>
<p><strong>ä½¿ç”¨ CLAUDE.md ä½œä¸ºå¼ºåˆ¶å‡½æ•°ã€‚</strong> å¦‚æœä½ çš„ CLI å‘½ä»¤å¤æ‚å†—é•¿ï¼Œä¸è¦å†™æ®µè½æ–‡æ¡£æ¥è§£é‡Šå®ƒä»¬ã€‚é‚£æ˜¯ä¿®è¡¥äººçš„é—®é¢˜ã€‚ç›¸åï¼Œç¼–å†™ä¸€ä¸ªå…·æœ‰æ¸…æ™°ã€ç›´è§‚ API çš„ç®€å• bash åŒ…è£…å™¨å¹¶è®°å½•å®ƒã€‚ä¿æŒ <code>CLAUDE.md</code> å°½å¯èƒ½ç®€çŸ­æ˜¯ç®€åŒ–ä»£ç åº“å’Œå†…éƒ¨å·¥å…·çš„æå¥½å¼ºåˆ¶å‡½æ•°ã€‚</p>
</li>
</ol>
<p>è¿™æ˜¯ä¸€ä¸ªç®€åŒ–çš„å¿«ç…§ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># å•ä½“ä»“åº“</span>

<span class="hljs-section">## Python</span>
<span class="hljs-bullet">-</span> å§‹ç»ˆ ...
<span class="hljs-bullet">-</span> ä½¿ç”¨ <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">command</span>&gt;</span></span> æµ‹è¯•
... å¦å¤– 10 ä¸ª ...

<span class="hljs-section">## &lt;å†…éƒ¨ CLI å·¥å…·&gt;</span>
... 10 ä¸ªé¡¹ç›®ï¼Œä¸“æ³¨äº 80% çš„ç”¨ä¾‹ ...
<span class="hljs-bullet">-</span> &lt;ä½¿ç”¨ç¤ºä¾‹&gt;
<span class="hljs-bullet">-</span> å§‹ç»ˆ ...
<span class="hljs-bullet">-</span> æ°¸è¿œä¸è¦ <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">x</span>&gt;</span></span>ï¼Œåå¥½ <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Y</span>&gt;</span></span>

å¯¹äº &lt;å¤æ‚ä½¿ç”¨&gt; æˆ– &lt;é”™è¯¯&gt;ï¼Œè¯·å‚é˜… path/to/<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">tool</span>&gt;</span></span><span class="hljs-emphasis">_docs.md

...
</span></code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4452b60912d646fab8e429f0312ee86f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piv6a2U5Li45ZWK:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822312&amp;x-signature=V9M021APJKXVd8wREvOH%2B0s%2B24M%3D" alt="" loading="lazy"/></p>
<p>æœ€åï¼Œæˆ‘ä»¬ä¿æŒè¿™ä¸ªæ–‡ä»¶ä¸ <code>AGENTS.md</code> æ–‡ä»¶åŒæ­¥ï¼Œä»¥ä¿æŒä¸æˆ‘ä»¬å·¥ç¨‹å¸ˆå¯èƒ½ä½¿ç”¨çš„å…¶ä»– AI IDE çš„å…¼å®¹æ€§ã€‚</p>
<p><em>å¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸ºç¼–ç  agents ç¼–å†™ markdown çš„æ›´å¤šæç¤ºï¼Œè¯·å‚é˜…"AI Can't Read Your Docs"ã€"AI-powered Software Engineering"å’Œ"How Cursor (AI IDE) Works"ã€‚</em></p>
<p><strong>è¦ç‚¹ï¼š</strong> å°†ä½ çš„ <code>CLAUDE.md</code> è§†ä¸ºé«˜çº§ã€ç²¾é€‰çš„æŠ¤æ å’ŒæŒ‡é’ˆé›†åˆã€‚ç”¨å®ƒæ¥æŒ‡å¯¼ä½ éœ€è¦åœ¨å“ªé‡ŒæŠ•èµ„æ›´å¤š AIï¼ˆå’Œäººç±»ï¼‰å‹å¥½çš„å·¥å…·ï¼Œè€Œä¸æ˜¯è¯•å›¾ä½¿å…¶æˆä¸ºå…¨é¢çš„æ‰‹å†Œã€‚</p>
<h2 data-id="heading-2">Compact, Context, &amp; Clear</h2>
<p>æˆ‘å»ºè®®åœ¨ç¼–ç ä¼šè¯ä¸­é€”è‡³å°‘è¿è¡Œä¸€æ¬¡ <code>/context</code> æ¥äº†è§£ä½ å¦‚ä½•ä½¿ç”¨ä½ çš„ 200k token ä¸Šä¸‹æ–‡çª—å£ï¼ˆå³ä½¿ä½¿ç”¨ Sonnet-1Mï¼Œæˆ‘ä¹Ÿä¸ç›¸ä¿¡å®Œæ•´ä¸Šä¸‹æ–‡çª—å£è¢«æœ‰æ•ˆä½¿ç”¨ï¼‰ã€‚å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œåœ¨å•ä½“ä»“åº“ä¸­çš„æ–°ä¼šè¯åŸºå‡†æˆæœ¬çº¦ä¸º ~20k tokenï¼ˆ10%ï¼‰ï¼Œå‰©ä½™ 180k ç”¨äºè¿›è¡Œæ›´æ”¹â€”â€”è¿™å¯èƒ½ä¼šå¾ˆå¿«å¡«æ»¡ã€‚</p>
<p>æˆ‘æœ‰ä¸‰ä¸ªä¸»è¦å·¥ä½œæµç¨‹ï¼š</p>
<ul>
<li>
<p><strong><code>/compact</code>ï¼ˆé¿å…ï¼‰ï¼š</strong> æˆ‘å°½å¯èƒ½é¿å…ä½¿ç”¨è¿™ä¸ªã€‚è‡ªåŠ¨å‹ç¼©æ˜¯ä¸é€æ˜çš„ã€å®¹æ˜“å‡ºé”™çš„ï¼Œå¹¶ä¸”æ²¡æœ‰å¾ˆå¥½åœ°ä¼˜åŒ–ã€‚</p>
</li>
<li>
<p><strong><code>/clear</code> + <code>/catchup</code>ï¼ˆç®€å•é‡å¯ï¼‰ï¼š</strong> æˆ‘çš„é»˜è®¤é‡å¯æ–¹å¼ã€‚æˆ‘ <code>/clear</code> çŠ¶æ€ï¼Œç„¶åè¿è¡Œè‡ªå®šä¹‰çš„ <code>/catchup</code> å‘½ä»¤è®© Claude è¯»å–æˆ‘ git åˆ†æ”¯ä¸­æ‰€æœ‰æ›´æ”¹çš„æ–‡ä»¶ã€‚</p>
</li>
<li>
<p><strong>"Document &amp; Clear"ï¼ˆå¤æ‚é‡å¯ï¼‰ï¼š</strong> å¯¹äºå¤§å‹ä»»åŠ¡ã€‚æˆ‘è®© Claude å°†å…¶è®¡åˆ’å’Œè¿›åº¦è½¬å‚¨åˆ° <code>.md</code> æ–‡ä»¶ä¸­ï¼Œ<code>/clear</code> çŠ¶æ€ï¼Œç„¶åé€šè¿‡å‘Šè¯‰å®ƒè¯»å– <code>.md</code> æ–‡ä»¶å¹¶ç»§ç»­æ¥å¼€å§‹æ–°ä¼šè¯ã€‚</p>
</li>
</ul>
<p><strong>è¦ç‚¹ï¼š</strong> ä¸è¦ç›¸ä¿¡è‡ªåŠ¨å‹ç¼©ã€‚ä½¿ç”¨ <code>/clear</code> è¿›è¡Œç®€å•é‡å¯ï¼Œä½¿ç”¨"Document &amp; Clear"æ–¹æ³•ä¸ºå¤æ‚ä»»åŠ¡åˆ›å»ºæŒä¹…çš„å¤–éƒ¨"è®°å¿†"ã€‚</p>
<h2 data-id="heading-3">Custom Slash Commands</h2>
<p>æˆ‘è®¤ä¸ºæ–œæ å‘½ä»¤åªæ˜¯é¢‘ç¹ä½¿ç”¨çš„æç¤ºçš„ç®€å•å¿«æ·æ–¹å¼ï¼Œä»…æ­¤è€Œå·²ã€‚æˆ‘çš„è®¾ç½®æ˜¯æœ€å°åŒ–çš„ï¼š</p>
<ul>
<li>
<p><code>/catchup</code>ï¼šæˆ‘ä¹‹å‰æåˆ°çš„å‘½ä»¤ã€‚å®ƒåªæ˜¯æç¤º Claude è¯»å–æˆ‘å½“å‰ git åˆ†æ”¯ä¸­æ‰€æœ‰æ›´æ”¹çš„æ–‡ä»¶ã€‚</p>
</li>
<li>
<p><code>/pr</code>ï¼šä¸€ä¸ªç®€å•çš„åŠ©æ‰‹ï¼Œæ¸…ç†æˆ‘çš„ä»£ç ã€æš‚å­˜å®ƒå¹¶å‡†å¤‡ pull requestã€‚</p>
</li>
</ul>
<p>æ•æˆ‘ç›´è¨€ï¼Œå¦‚æœä½ æœ‰ä¸€é•¿ä¸²å¤æ‚çš„è‡ªå®šä¹‰æ–œæ å‘½ä»¤ï¼Œä½ å°±åˆ›å»ºäº†ä¸€ä¸ªåæ¨¡å¼ã€‚å¯¹æˆ‘æ¥è¯´ï¼Œåƒ Claude è¿™æ ·çš„ agent çš„å…¨éƒ¨æ„ä¹‰åœ¨äºä½ å¯ä»¥è¾“å…¥å‡ ä¹ä»»ä½•ä½ æƒ³è¦çš„ä¸œè¥¿å¹¶è·å¾—æœ‰ç”¨çš„ã€å¯åˆå¹¶çš„ç»“æœã€‚å½“ä½ å¼ºè¿«å·¥ç¨‹å¸ˆï¼ˆæˆ–éå·¥ç¨‹å¸ˆï¼‰å­¦ä¹ ä¸€å¥—æ–°çš„ã€åœ¨æŸå¤„è®°å½•çš„åŸºæœ¬é­”æ³•å‘½ä»¤æ¥å®Œæˆå·¥ä½œæ—¶ï¼Œä½ å°±å¤±è´¥äº†ã€‚</p>
<p><strong>è¦ç‚¹ï¼š</strong> ä½¿ç”¨æ–œæ å‘½ä»¤ä½œä¸ºç®€å•çš„ä¸ªäººå¿«æ·æ–¹å¼ï¼Œè€Œä¸æ˜¯ä½œä¸ºæ„å»ºæ›´ç›´è§‚çš„ <code>CLAUDE.md</code> å’Œæ›´å¥½å·¥å…·çš„ agent çš„æ›¿ä»£å“ã€‚</p>
<h2 data-id="heading-4">Custom Subagents</h2>
<p>åœ¨ç†è®ºä¸Šï¼Œè‡ªå®šä¹‰ subagents æ˜¯ Claude Code æœ€å¼ºå¤§çš„ä¸Šä¸‹æ–‡ç®¡ç†åŠŸèƒ½ã€‚æ¨é”€å¾ˆç®€å•ï¼šä¸€ä¸ªå¤æ‚ä»»åŠ¡éœ€è¦ X ä¸ª token çš„è¾“å…¥ä¸Šä¸‹æ–‡ï¼ˆä¾‹å¦‚ï¼Œå¦‚ä½•è¿è¡Œæµ‹è¯•ï¼‰ï¼Œç´¯ç§¯ Y ä¸ª token çš„å·¥ä½œä¸Šä¸‹æ–‡ï¼Œå¹¶äº§ç”Ÿ Z ä¸ª token çš„ç­”æ¡ˆã€‚è¿è¡Œ N ä¸ªä»»åŠ¡æ„å‘³ç€åœ¨ä½ çš„ä¸»çª—å£ä¸­æœ‰ <code>(X + Y + Z) * N</code> ä¸ª tokenã€‚</p>
<p>subagent è§£å†³æ–¹æ¡ˆæ˜¯å°† <code>(X + Y) * N</code> å·¥ä½œå¤–åŒ…ç»™ä¸“é—¨çš„ agentsï¼Œå®ƒä»¬åªè¿”å›æœ€ç»ˆçš„ Z token ç­”æ¡ˆï¼Œä¿æŒä¸»ä¸Šä¸‹æ–‡å¹²å‡€ã€‚</p>
<p>æˆ‘å‘ç°å®ƒä»¬æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æƒ³æ³•ï¼Œä½†åœ¨å®è·µä¸­ï¼Œè‡ªå®šä¹‰ subagents ä¼šäº§ç”Ÿä¸¤ä¸ªæ–°é—®é¢˜ï¼š</p>
<ol>
<li>
<p><strong>å®ƒä»¬å°é”ä¸Šä¸‹æ–‡ï¼š</strong> å¦‚æœæˆ‘åˆ¶ä½œä¸€ä¸ª <code>PythonTests</code> subagentï¼Œæˆ‘ç°åœ¨å·²ç»ä»æˆ‘çš„ä¸» agent ä¸­éšè—äº†æ‰€æœ‰æµ‹è¯•ä¸Šä¸‹æ–‡ã€‚å®ƒä¸å†èƒ½å¯¹æ›´æ”¹è¿›è¡Œæ•´ä½“æ¨ç†ã€‚å®ƒç°åœ¨è¢«è¿«è°ƒç”¨ subagent åªæ˜¯ä¸ºäº†çŸ¥é“å¦‚ä½•éªŒè¯è‡ªå·±çš„ä»£ç ã€‚</p>
</li>
<li>
<p><strong>å®ƒä»¬å¼ºåˆ¶äººç±»å·¥ä½œæµç¨‹ï¼š</strong> æ›´ç³Ÿç³•çš„æ˜¯ï¼Œå®ƒä»¬å¼ºè¿« Claude è¿›å…¥åƒµç¡¬çš„ã€äººç±»å®šä¹‰çš„å·¥ä½œæµç¨‹ã€‚æˆ‘ç°åœ¨åœ¨è§„å®šå®ƒå¿…é¡»å¦‚ä½•å§”æ‰˜ï¼Œè¿™æ­£æ˜¯æˆ‘è¯•å›¾è®© agent ä¸ºæˆ‘è§£å†³çš„é—®é¢˜ã€‚</p>
</li>
</ol>
<p>æˆ‘åå¥½çš„æ›¿ä»£æ–¹æ¡ˆæ˜¯ä½¿ç”¨ Claude å†…ç½®çš„ <code>Task(...)</code> åŠŸèƒ½æ¥ç”Ÿæˆé€šç”¨ agent çš„å‰¯æœ¬ã€‚</p>
<p>æˆ‘å°†æ‰€æœ‰å…³é”®ä¸Šä¸‹æ–‡æ”¾åœ¨ <code>CLAUDE.md</code> ä¸­ã€‚ç„¶åï¼Œæˆ‘è®©ä¸» agent å†³å®šä½•æ—¶ä»¥åŠå¦‚ä½•å°†å·¥ä½œå§”æ‰˜ç»™è‡ªèº«çš„å‰¯æœ¬ã€‚è¿™ç»™äº†æˆ‘æ‰€æœ‰ subagents çš„ä¸Šä¸‹æ–‡èŠ‚çœå¥½å¤„ï¼Œè€Œæ²¡æœ‰ç¼ºç‚¹ã€‚agent åŠ¨æ€ç®¡ç†è‡ªå·±çš„ç¼–æ’ã€‚</p>
<p>åœ¨æˆ‘çš„"Building Multi-Agent Systems (Part 2)"æ–‡ç« ä¸­ï¼Œæˆ‘ç§°ä¹‹ä¸º"Master-Clone"æ¶æ„ï¼Œæˆ‘å¼ºçƒˆåå¥½å®ƒè€Œä¸æ˜¯è‡ªå®šä¹‰ subagents é¼“åŠ±çš„"Lead-Specialist"æ¨¡å‹ã€‚</p>
<p><strong>è¦ç‚¹ï¼š</strong> è‡ªå®šä¹‰ subagents æ˜¯ä¸€ä¸ªè„†å¼±çš„è§£å†³æ–¹æ¡ˆã€‚ç»™ä½ çš„ä¸» agent ä¸Šä¸‹æ–‡ï¼ˆåœ¨ <code>CLAUDE.md</code> ä¸­ï¼‰å¹¶è®©å®ƒä½¿ç”¨è‡ªå·±çš„ <code>Task/Explore(...)</code> åŠŸèƒ½æ¥ç®¡ç†å§”æ‰˜ã€‚</p>
<h2 data-id="heading-5">Resume, Continue, &amp; History</h2>
<p>åœ¨ç®€å•å±‚é¢ä¸Šï¼Œæˆ‘ç»å¸¸ä½¿ç”¨ <code>claude --resume</code> å’Œ <code>claude --continue</code>ã€‚å®ƒä»¬éå¸¸é€‚åˆé‡å¯å‡ºé”™çš„ç»ˆç«¯æˆ–å¿«é€Ÿé‡å¯æ—§ä¼šè¯ã€‚æˆ‘ç»å¸¸ <code>claude --resume</code> å‡ å¤©å‰çš„ä¼šè¯ï¼Œåªæ˜¯è¯¢é—® agent æ€»ç»“å®ƒå¦‚ä½•å…‹æœç‰¹å®šé”™è¯¯ï¼Œç„¶åæˆ‘ç”¨å®ƒæ¥æ”¹è¿›æˆ‘ä»¬çš„ <code>CLAUDE.md</code> å’Œå†…éƒ¨å·¥å…·ã€‚</p>
<p>æ›´æ·±å…¥åœ°è¯´ï¼ŒClaude Code å°†æ‰€æœ‰ä¼šè¯å†å²å­˜å‚¨åœ¨ <code>~/.claude/projects/</code> ä¸­ï¼Œä»¥æŒ–æ˜åŸå§‹å†å²ä¼šè¯æ•°æ®ã€‚æˆ‘æœ‰è„šæœ¬å¯¹è¿™äº›æ—¥å¿—è¿è¡Œå…ƒåˆ†æï¼Œå¯»æ‰¾å¸¸è§å¼‚å¸¸ã€æƒé™è¯·æ±‚å’Œé”™è¯¯æ¨¡å¼ï¼Œä»¥å¸®åŠ©æ”¹è¿›é¢å‘ agent çš„ä¸Šä¸‹æ–‡ã€‚</p>
<p><strong>è¦ç‚¹ï¼š</strong> ä½¿ç”¨ <code>claude --resume</code> å’Œ <code>claude --continue</code> é‡å¯ä¼šè¯å¹¶å‘ç°è¢«åŸ‹è—çš„å†å²ä¸Šä¸‹æ–‡ã€‚</p>
<h2 data-id="heading-6">Hooks</h2>
<p>Hooks å¾ˆé‡è¦ã€‚æˆ‘ä¸åœ¨ä¸šä½™é¡¹ç›®ä¸­ä½¿ç”¨å®ƒä»¬ï¼Œä½†å®ƒä»¬å¯¹äºåœ¨å¤æ‚ä¼ä¸šä»“åº“ä¸­å¼•å¯¼ Claude è‡³å…³é‡è¦ã€‚å®ƒä»¬æ˜¯ç¡®å®šæ€§çš„"å¿…é¡»åš"è§„åˆ™ï¼Œè¡¥å…… <code>CLAUDE.md</code> ä¸­çš„"åº”è¯¥åš"å»ºè®®ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨ä¸¤ç§ç±»å‹ï¼š</p>
<ol>
<li>
<p><strong>æäº¤æ—¶é˜»æ­¢ Hooksï¼š</strong> è¿™æ˜¯æˆ‘ä»¬çš„ä¸»è¦ç­–ç•¥ã€‚æˆ‘ä»¬æœ‰ä¸€ä¸ª <code>PreToolUse</code> hook åŒ…è£…ä»»ä½• <code>Bash(git commit)</code> å‘½ä»¤ã€‚å®ƒæ£€æŸ¥ <code>/tmp/agent-pre-commit-pass</code> æ–‡ä»¶ï¼Œæˆ‘ä»¬çš„æµ‹è¯•è„šæœ¬åªæœ‰åœ¨æ‰€æœ‰æµ‹è¯•é€šè¿‡æ—¶æ‰ä¼šåˆ›å»ºè¯¥æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶ç¼ºå¤±ï¼Œhook ä¼šé˜»æ­¢æäº¤ï¼Œè¿«ä½¿ Claude è¿›å…¥"æµ‹è¯•å¹¶ä¿®å¤"å¾ªç¯ï¼Œç›´åˆ°æ„å»ºå˜ä¸ºç»¿è‰²ã€‚</p>
</li>
<li>
<p><strong>æç¤º Hooksï¼š</strong> è¿™äº›æ˜¯ç®€å•çš„ã€éé˜»å¡çš„ hooksï¼Œå¦‚æœ agent æ­£åœ¨åšæ¬¡ä¼˜çš„äº‹æƒ…ï¼Œä¼šæä¾›"å³å‘å³å¿˜"çš„åé¦ˆã€‚</p>
</li>
</ol>
<p>æˆ‘ä»¬æœ‰æ„ä¸ä½¿ç”¨"å†™å…¥æ—¶é˜»æ­¢" hooksï¼ˆä¾‹å¦‚ï¼Œåœ¨ <code>Edit</code> æˆ– <code>Write</code> ä¸Šï¼‰ã€‚åœ¨è®¡åˆ’ä¸­é€”é˜»æ­¢ agent ä¼šæ··æ·†ç”šè‡³"æŒ«è´¥"å®ƒã€‚è®©å®ƒå®Œæˆå·¥ä½œç„¶ååœ¨æäº¤é˜¶æ®µæ£€æŸ¥æœ€ç»ˆçš„ã€å®Œæˆçš„ç»“æœè¦æœ‰æ•ˆå¾—å¤šã€‚</p>
<p><strong>è¦ç‚¹ï¼š</strong> ä½¿ç”¨ hooks åœ¨æäº¤æ—¶å¼ºåˆ¶çŠ¶æ€éªŒè¯ï¼ˆblock-at-submitï¼‰ã€‚é¿å…åœ¨å†™å…¥æ—¶é˜»æ­¢â€”â€”è®© agent å®Œæˆè®¡åˆ’ï¼Œç„¶åæ£€æŸ¥æœ€ç»ˆç»“æœã€‚</p>
<h2 data-id="heading-7">Planning Mode</h2>
<p>å¯¹äºä»»ä½•"å¤§å‹"åŠŸèƒ½æ›´æ”¹ï¼Œä½¿ç”¨ AI IDE è¿›è¡Œè§„åˆ’æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p>
<p>å¯¹äºæˆ‘çš„ä¸šä½™é¡¹ç›®ï¼Œæˆ‘åªä½¿ç”¨å†…ç½®çš„è§„åˆ’æ¨¡å¼ã€‚è¿™æ˜¯åœ¨ Claude å¼€å§‹ä¹‹å‰ä¸ä¹‹å¯¹é½çš„ä¸€ç§æ–¹å¼ï¼Œå®šä¹‰äº†å¦‚ä½•æ„å»ºæŸç‰©ä»¥åŠå®ƒéœ€è¦åœæ­¢å¹¶å±•ç¤ºå·¥ä½œçš„"æ£€æŸ¥ç‚¹"ã€‚å®šæœŸä½¿ç”¨è¿™ä¸ªå¯ä»¥å»ºç«‹å¼ºçƒˆçš„ç›´è§‰ï¼Œäº†è§£è·å¾—è‰¯å¥½è®¡åˆ’è€Œä¸è®© Claude æç ¸å®ç°æ‰€éœ€çš„æœ€å°ä¸Šä¸‹æ–‡ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„å·¥ä½œå•ä½“ä»“åº“ä¸­ï¼Œæˆ‘ä»¬å¼€å§‹æ¨å‡ºåŸºäº Claude Code SDK æ„å»ºçš„è‡ªå®šä¹‰è§„åˆ’å·¥å…·ã€‚å®ƒç±»ä¼¼äºåŸç”Ÿè®¡åˆ’æ¨¡å¼ï¼Œä½†ç»è¿‡å¤§é‡æç¤ºä»¥ä½¿å…¶è¾“å‡ºä¸æˆ‘ä»¬ç°æœ‰çš„æŠ€æœ¯è®¾è®¡æ ¼å¼å¯¹é½ã€‚å®ƒè¿˜å¼€ç®±å³ç”¨åœ°å¼ºåˆ¶æ‰§è¡Œæˆ‘ä»¬çš„å†…éƒ¨æœ€ä½³å®è·µâ€”â€”ä»ä»£ç ç»“æ„åˆ°æ•°æ®éšç§å’Œå®‰å…¨ã€‚è¿™è®©æˆ‘ä»¬çš„å·¥ç¨‹å¸ˆèƒ½å¤Ÿ" vibe plan"ä¸€ä¸ªæ–°åŠŸèƒ½ï¼Œå°±åƒä»–ä»¬æ˜¯é«˜çº§æ¶æ„å¸ˆä¸€æ ·ï¼ˆè‡³å°‘è¿™æ˜¯æ¨é”€çš„è¯´æ³•ï¼‰ã€‚</p>
<p><strong>è¦ç‚¹ï¼š</strong> å¯¹äºå¤æ‚æ›´æ”¹ï¼Œå§‹ç»ˆä½¿ç”¨å†…ç½®è§„åˆ’æ¨¡å¼åœ¨ agent å¼€å§‹å·¥ä½œä¹‹å‰å¯¹é½è®¡åˆ’ã€‚</p>
<h2 data-id="heading-8">Skills</h2>
<p>æˆ‘åŒæ„ Simon Willison çš„è§‚ç‚¹ï¼š<strong>Skills å¯èƒ½æ¯” MCP æ›´é‡è¦ã€‚</strong></p>
<p>å¦‚æœä½ ä¸€ç›´åœ¨å…³æ³¨æˆ‘çš„æ–‡ç« ï¼Œä½ ä¼šçŸ¥é“æˆ‘å·²ç»åç¦»äº† MCP è¿›è¡Œå¤§å¤šæ•°å¼€å‘å·¥ä½œï¼Œåå¥½æ„å»ºç®€å•çš„ CLIï¼ˆæ­£å¦‚æˆ‘åœ¨"AI Can't Read Your Docs"ä¸­äº‰è®ºçš„é‚£æ ·ï¼‰ã€‚æˆ‘çš„ agent è‡ªæ²»å¿ƒæ™ºæ¨¡å‹å·²ç»æ¼”å˜ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>
<p><strong>å•ä¸€æç¤ºï¼š</strong> åœ¨ä¸€ä¸ªå·¨å¤§çš„æç¤ºä¸­ç»™ agent æ‰€æœ‰ä¸Šä¸‹æ–‡ã€‚ï¼ˆè„†å¼±ï¼Œä¸å¯æ‰©å±•ï¼‰</p>
</li>
<li>
<p><strong>å·¥å…·è°ƒç”¨ï¼š</strong> "ç»å…¸" agent æ¨¡å‹ã€‚æˆ‘ä»¬æ‰‹å·¥åˆ¶ä½œå·¥å…·å¹¶ä¸º agent æŠ½è±¡ç°å®ã€‚ï¼ˆæ›´å¥½ï¼Œä½†åˆ›å»ºäº†æ–°çš„æŠ½è±¡å’Œä¸Šä¸‹æ–‡ç“¶é¢ˆï¼‰</p>
</li>
<li>
<p><strong>è„šæœ¬ç¼–å†™ï¼š</strong> æˆ‘ä»¬ç»™ agent è®¿é—®åŸå§‹ç¯å¢ƒâ€”â€”äºŒè¿›åˆ¶æ–‡ä»¶ã€è„šæœ¬å’Œæ–‡æ¡£â€”â€”å®ƒåŠ¨æ€ç¼–å†™ä»£ç æ¥ä¸å®ƒä»¬äº¤äº’ã€‚</p>
</li>
</ol>
<p>è€ƒè™‘åˆ°è¿™ä¸ªæ¨¡å‹ï¼Œ<strong>Agent Skills</strong> æ˜¯æ˜æ˜¾çš„ä¸‹ä¸€ä¸ªåŠŸèƒ½ã€‚å®ƒä»¬æ˜¯"è„šæœ¬ç¼–å†™"å±‚çš„æ­£å¼äº§å“åŒ–ã€‚</p>
<p>å¦‚æœä½ åƒæˆ‘ä¸€æ ·ï¼Œå·²ç»åå¥½ CLI è€Œä¸æ˜¯ MCPï¼Œä½ ä¸€ç›´åœ¨éšå«åœ°è·å¾— Skills çš„å¥½å¤„ã€‚<code>SKILL.md</code> æ–‡ä»¶åªæ˜¯ä¸€ç§æ›´æœ‰ç»„ç»‡ã€å¯å…±äº«å’Œå¯å‘ç°çš„æ–¹å¼æ¥è®°å½•è¿™äº› CLI å’Œè„šæœ¬å¹¶å°†å®ƒä»¬æš´éœ²ç»™ agentã€‚</p>
<p><strong>è¦ç‚¹ï¼š</strong> Skills æ˜¯æ­£ç¡®çš„æŠ½è±¡ã€‚å®ƒä»¬æ­£å¼åŒ–äº†åŸºäº"è„šæœ¬ç¼–å†™"çš„ agent æ¨¡å‹ï¼Œè¿™æ¯” MCP ä»£è¡¨çš„åƒµç¡¬ã€ç±»ä¼¼ API çš„æ¨¡å‹æ›´å¥å£®å’Œçµæ´»ã€‚</p>
<h2 data-id="heading-9">MCP (Model Context Protocol)</h2>
<p>Skills ä¸æ„å‘³ç€ MCP å·²æ­»ï¼ˆå¦è§"Everything Wrong with MCP"ï¼‰ã€‚ä»¥å‰ï¼Œè®¸å¤šäººæ„å»ºäº†ç³Ÿç³•çš„ã€ä¸Šä¸‹æ–‡ç¹é‡çš„ MCPï¼Œæœ‰å‡ åä¸ªåªæ˜¯é•œåƒ REST API çš„å·¥å…·ï¼ˆ<code>read_thing_a()</code>ã€<code>read_thing_b()</code>ã€<code>update_thing_c()</code>ï¼‰ã€‚</p>
<p>"è„šæœ¬ç¼–å†™"æ¨¡å‹ï¼ˆç°åœ¨ç”± Skills æ­£å¼åŒ–ï¼‰æ›´å¥½ï¼Œä½†å®ƒéœ€è¦ä¸€ç§å®‰å…¨çš„æ–¹å¼æ¥è®¿é—®ç¯å¢ƒã€‚å¯¹æˆ‘æ¥è¯´ï¼Œè¿™æ˜¯ MCP æ–°çš„ã€æ›´é›†ä¸­çš„è§’è‰²ã€‚</p>
<p>è€Œä¸æ˜¯è‡ƒè‚¿çš„ APIï¼ŒMCP åº”è¯¥æ˜¯ä¸€ä¸ªç®€å•çš„ã€å®‰å…¨çš„ç½‘å…³ï¼Œæä¾›å‡ ä¸ªå¼ºå¤§çš„ã€é«˜çº§å·¥å…·ï¼š</p>
<ul>
<li><code>download_raw_data(filtersâ€¦)</code></li>
<li><code>take_sensitive_gated_action(argsâ€¦)</code></li>
<li><code>execute_code_in_environment_with_state(codeâ€¦)</code></li>
</ul>
<p>åœ¨è¿™ä¸ªæ¨¡å‹ä¸­ï¼ŒMCP çš„å·¥ä½œä¸æ˜¯ä¸º agent æŠ½è±¡ç°å®ï¼›å®ƒçš„å·¥ä½œæ˜¯ç®¡ç†è®¤è¯ã€ç½‘ç»œå’Œå®‰å…¨è¾¹ç•Œï¼Œç„¶åè®©è·¯ã€‚å®ƒä¸º agent æä¾›å…¥å£ç‚¹ï¼Œç„¶å agent ä½¿ç”¨å…¶è„šæœ¬ç¼–å†™å’Œ markdown ä¸Šä¸‹æ–‡æ¥å®Œæˆå®é™…å·¥ä½œã€‚</p>
<p>æˆ‘ä»ç„¶ä½¿ç”¨çš„å”¯ä¸€ MCP æ˜¯ç”¨äº Playwrightï¼Œè¿™å¾ˆåˆç†â€”â€”å®ƒæ˜¯ä¸€ä¸ªå¤æ‚çš„ã€æœ‰çŠ¶æ€çš„ç¯å¢ƒã€‚æˆ‘æ‰€æœ‰çš„æ— çŠ¶æ€å·¥å…·ï¼ˆå¦‚ Jiraã€AWSã€GitHubï¼‰éƒ½å·²è¿ç§»åˆ°ç®€å•çš„ CLIã€‚</p>
<p><strong>è¦ç‚¹ï¼š</strong> ä½¿ç”¨å……å½“æ•°æ®ç½‘å…³çš„ MCPã€‚ç»™ agent ä¸€ä¸¤ä¸ªé«˜çº§å·¥å…·ï¼ˆå¦‚åŸå§‹æ•°æ®è½¬å‚¨ APIï¼‰ï¼Œç„¶åå®ƒå¯ä»¥ç¼–å†™è„šæœ¬æ¥å¯¹æŠ—ã€‚</p>
<h2 data-id="heading-10">Claude Code SDK</h2>
<p>Claude Code ä¸ä»…ä»…æ˜¯ä¸€ä¸ªäº¤äº’å¼ CLIï¼›å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¼ºå¤§çš„ SDKï¼Œç”¨äºæ„å»ºå…¨æ–°çš„ agentsâ€”â€”æ—¢ç”¨äºç¼–ç ä»»åŠ¡ä¹Ÿç”¨äºéç¼–ç ä»»åŠ¡ã€‚æˆ‘å·²ç»å¼€å§‹å°†å®ƒä½œä¸ºæˆ‘é»˜è®¤çš„ agent æ¡†æ¶ï¼Œè€Œä¸æ˜¯åƒ LangChain/CrewAI è¿™æ ·çš„å·¥å…·ï¼Œç”¨äºå¤§å¤šæ•°æ–°çš„ä¸šä½™é¡¹ç›®ã€‚</p>
<p>æˆ‘ä»¥ä¸‰ç§ä¸»è¦æ–¹å¼ä½¿ç”¨å®ƒï¼š</p>
<ol>
<li>
<p><strong>å¤§è§„æ¨¡å¹¶è¡Œè„šæœ¬ç¼–å†™ï¼š</strong> å¯¹äºå¤§è§„æ¨¡é‡æ„ã€é”™è¯¯ä¿®å¤æˆ–è¿ç§»ï¼Œæˆ‘ä¸ä½¿ç”¨äº¤äº’å¼èŠå¤©ã€‚æˆ‘ç¼–å†™ç®€å•çš„ bash è„šæœ¬å¹¶è¡Œè°ƒç”¨ <code>claude -p "in /pathA change all refs from foo to bar"</code>ã€‚è¿™æ¯”è¯•å›¾è®©ä¸» agent ç®¡ç†å‡ åä¸ª subagent ä»»åŠ¡æ›´å…·å¯æ‰©å±•æ€§å’Œå¯æ§æ€§ã€‚</p>
</li>
<li>
<p><strong>æ„å»ºå†…éƒ¨èŠå¤©å·¥å…·ï¼š</strong> SDK éå¸¸é€‚åˆå°†å¤æ‚è¿‡ç¨‹åŒ…è£…åœ¨ç®€å•çš„èŠå¤©ç•Œé¢ä¸­ï¼Œä¾›éæŠ€æœ¯ç”¨æˆ·ä½¿ç”¨ã€‚æ¯”å¦‚ä¸€ä¸ªå®‰è£…ç¨‹åºï¼Œåœ¨å‡ºé”™æ—¶å›é€€åˆ° Claude Code SDK æ¥ä¸ºç”¨æˆ·ä¿®å¤é—®é¢˜ã€‚æˆ–è€…ä¸€ä¸ªå†…éƒ¨çš„"v0-at-home"å·¥å…·ï¼Œè®©æˆ‘ä»¬çš„è®¾è®¡å›¢é˜Ÿåœ¨æˆ‘ä»¬å†…éƒ¨çš„ UI æ¡†æ¶ä¸­ vibe-code æ¨¡æ‹Ÿå‰ç«¯ï¼Œç¡®ä¿ä»–ä»¬çš„æƒ³æ³•æ˜¯é«˜ä¿çœŸçš„ï¼Œå¹¶ä¸”ä»£ç æ›´ç›´æ¥å¯ç”¨åœ¨å‰ç«¯ç”Ÿäº§ä»£ç ä¸­ã€‚</p>
</li>
<li>
<p><strong>å¿«é€Ÿ Agent åŸå‹åˆ¶ä½œï¼š</strong> è¿™æ˜¯æˆ‘æœ€å¸¸è§çš„ç”¨æ³•ã€‚å®ƒä¸ä»…ç”¨äºç¼–ç ã€‚å¦‚æœæˆ‘å¯¹ä»»ä½• agent ä»»åŠ¡æœ‰æƒ³æ³•ï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨è‡ªå®šä¹‰ CLI æˆ– MCP çš„"å¨èƒè°ƒæŸ¥ agent"ï¼‰ï¼Œæˆ‘ä½¿ç”¨ Claude Code SDK åœ¨æŠ•å…¥å®Œæ•´çš„ã€éƒ¨ç½²çš„è„šæ‰‹æ¶ä¹‹å‰å¿«é€Ÿæ„å»ºå’Œæµ‹è¯•åŸå‹ã€‚</p>
</li>
</ol>
<p><strong>è¦ç‚¹ï¼š</strong> Claude Code SDK æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ã€é€šç”¨çš„ agent æ¡†æ¶ã€‚ç”¨å®ƒæ¥æ‰¹å¤„ç†ä»£ç ã€æ„å»ºå†…éƒ¨å·¥å…·ï¼Œä»¥åŠåœ¨é‡‡ç”¨æ›´å¤æ‚çš„æ¡†æ¶ä¹‹å‰å¿«é€ŸåŸå‹åŒ–æ–°çš„ agentsã€‚</p>
<h2 data-id="heading-11">Claude Code GHA</h2>
<p>Claude Code GitHub Action (GHA) å¯èƒ½æ˜¯æˆ‘æœ€å–œæ¬¢å’Œæœ€è¢«ä½ä¼°çš„åŠŸèƒ½ä¹‹ä¸€ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ¦‚å¿µï¼šåªæ˜¯åœ¨ GHA ä¸­è¿è¡Œ Claude Codeã€‚ä½†æ­£æ˜¯è¿™ç§ç®€å•æ€§ä½¿å…¶å¦‚æ­¤å¼ºå¤§ã€‚</p>
<p>å®ƒç±»ä¼¼äº Cursor çš„åå° agents æˆ– Codex æ‰˜ç®¡çš„ web UIï¼Œä½†å¯å®šåˆ¶æ€§æ›´å¼ºã€‚ä½ æ§åˆ¶æ•´ä¸ªå®¹å™¨å’Œç¯å¢ƒï¼Œç»™ä½ æ›´å¤šçš„æ•°æ®è®¿é—®æƒé™ï¼Œå…³é”®æ˜¯ï¼Œæ¯”ä»»ä½•å…¶ä»–äº§å“æä¾›æ›´å¼ºçš„æ²™ç›’å’Œå®¡è®¡æ§åˆ¶ã€‚æ­¤å¤–ï¼Œå®ƒæ”¯æŒæ‰€æœ‰é«˜çº§åŠŸèƒ½ï¼Œå¦‚ Hooks å’Œ MCPã€‚</p>
<p>æˆ‘ä»¬ç”¨å®ƒæ¥æ„å»ºè‡ªå®šä¹‰çš„"ä»ä»»ä½•åœ°æ–¹åˆ›å»º PR"å·¥å…·ã€‚ç”¨æˆ·å¯ä»¥ä» Slackã€Jira ç”šè‡³ CloudWatch è­¦æŠ¥è§¦å‘ PRï¼ŒGHA å°†ä¿®å¤é”™è¯¯æˆ–æ·»åŠ åŠŸèƒ½å¹¶è¿”å›ä¸€ä¸ªå®Œå…¨æµ‹è¯•çš„ PRÂ¹ã€‚</p>
<p>ç”±äº GHA æ—¥å¿—æ˜¯å®Œæ•´çš„ agent æ—¥å¿—ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªæ“ä½œæµç¨‹ï¼Œåœ¨å…¬å¸å±‚é¢å®šæœŸå®¡æŸ¥è¿™äº›æ—¥å¿—ï¼Œå¯»æ‰¾å¸¸è§é”™è¯¯ã€bash é”™è¯¯æˆ–ä¸å¯¹é½çš„å·¥ç¨‹å®è·µã€‚è¿™åˆ›å»ºäº†ä¸€ä¸ªæ•°æ®é©±åŠ¨çš„é£è½®ï¼šBugs â†’ æ”¹è¿›çš„ CLAUDE.md / CLIs â†’ æ›´å¥½çš„ Agentã€‚</p>
<pre><code class="hljs language-bash" lang="bash">$ query-claude-gha-logs --since 5d | claude -p <span class="hljs-string">"see what the other claudes were getting stuck on and fix it, then put up a PR"</span>
</code></pre>
<p><strong>è¦ç‚¹ï¼š</strong> GHA æ˜¯æ“ä½œåŒ– Claude Code çš„ç»ˆææ–¹å¼ã€‚å®ƒå°†å®ƒä»ä¸ªäººå·¥å…·è½¬å˜ä¸ºå·¥ç¨‹ç³»ç»Ÿçš„æ ¸å¿ƒã€å¯å®¡è®¡å’Œè‡ªæˆ‘æ”¹è¿›çš„éƒ¨åˆ†ã€‚</p>
<h2 data-id="heading-12">settings.json</h2>
<p>æœ€åï¼Œæˆ‘å‘ç°å¯¹äºä¸šä½™å’Œä¸“ä¸šå·¥ä½œï¼Œæœ‰å‡ ä¸ªç‰¹å®šçš„ <code>settings.json</code> é…ç½®è‡³å…³é‡è¦ã€‚</p>
<ul>
<li>
<p><strong><code>HTTPS_PROXY</code>/<code>HTTP_PROXY</code></strong>ï¼šè¿™å¯¹äºè°ƒè¯•å¾ˆæ£’ã€‚æˆ‘ç”¨å®ƒæ¥æ£€æŸ¥åŸå§‹æµé‡ï¼Œçœ‹çœ‹ Claude æ­£åœ¨å‘é€ä»€ä¹ˆæç¤ºã€‚å¯¹äºåå° agentsï¼Œå®ƒä¹Ÿæ˜¯ç»†ç²’åº¦ç½‘ç»œæ²™ç›’çš„å¼ºå¤§å·¥å…·ã€‚</p>
</li>
<li>
<p><strong><code>MCP_TOOL_TIMEOUT</code>/<code>BASH_MAX_TIMEOUT_MS</code></strong>ï¼šæˆ‘æé«˜äº†è¿™äº›ã€‚æˆ‘å–œæ¬¢è¿è¡Œé•¿è€Œå¤æ‚çš„å‘½ä»¤ï¼Œé»˜è®¤è¶…æ—¶é€šå¸¸è¿‡äºä¿å®ˆã€‚è€å®è¯´ï¼Œæ—¢ç„¶ bash åå°ä»»åŠ¡å·²ç»å­˜åœ¨ï¼Œæˆ‘ä¸ç¡®å®šè¿™æ˜¯å¦ä»ç„¶éœ€è¦ï¼Œä½†æˆ‘ä¿ç•™å®ƒä»¥é˜²ä¸‡ä¸€ã€‚</p>
</li>
<li>
<p><strong><code>ANTHROPIC_API_KEY</code></strong>ï¼šåœ¨å·¥ä½œä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¼ä¸š API å¯†é’¥ï¼ˆé€šè¿‡ apiKeyHelperï¼‰ã€‚å®ƒå°†æˆ‘ä»¬ä»"æŒ‰åº§ä½"è®¸å¯æ¨¡å¼è½¬å˜ä¸º"åŸºäºä½¿ç”¨"å®šä»·ï¼Œè¿™å¯¹æˆ‘ä»¬çš„å·¥ä½œæ–¹å¼æ¥è¯´æ˜¯æ›´å¥½çš„æ¨¡å‹ã€‚</p>
<ul>
<li>å®ƒè€ƒè™‘äº†å¼€å‘è€…ä½¿ç”¨çš„å·¨å¤§å·®å¼‚ï¼ˆæˆ‘ä»¬çœ‹åˆ°å·¥ç¨‹å¸ˆä¹‹é—´æœ‰ 1:100x çš„å·®å¼‚ï¼‰ã€‚</li>
<li>å®ƒè®©å·¥ç¨‹å¸ˆå¯ä»¥åœ¨æˆ‘ä»¬çš„å•ä¸€ä¼ä¸šè´¦æˆ·ä¸‹å°è¯•é Claude Code LLM è„šæœ¬ã€‚</li>
</ul>
</li>
<li>
<p><strong><code>"permissions"</code></strong>ï¼šæˆ‘å¶å°”ä¼šè‡ªæˆ‘å®¡è®¡æˆ‘å…è®¸ Claude è‡ªåŠ¨è¿è¡Œçš„å‘½ä»¤åˆ—è¡¨ã€‚</p>
</li>
</ul>
<p><strong>è¦ç‚¹ï¼š</strong> ä½ çš„ <code>settings.json</code> æ˜¯é«˜çº§è‡ªå®šä¹‰çš„å¼ºå¤§åœ°æ–¹ã€‚</p>
<h2 data-id="heading-13">Conclusion</h2>
<p>å†…å®¹å¾ˆå¤šï¼Œä½†å¸Œæœ›ä½ è§‰å¾—æœ‰ç”¨ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰ä½¿ç”¨åŸºäº CLI çš„ agentï¼Œå¦‚ Claude Code æˆ– Codex CLIï¼Œä½ å¯èƒ½åº”è¯¥å¼€å§‹ä½¿ç”¨ã€‚å…³äºè¿™äº›é«˜çº§åŠŸèƒ½å¾ˆå°‘æœ‰å¥½çš„æŒ‡å—ï¼Œæ‰€ä»¥å­¦ä¹ çš„å”¯ä¸€æ–¹æ³•æ˜¯æŠ•å…¥å…¶ä¸­ã€‚</p>
<hr/>
<p>Â¹å¯¹æˆ‘æ¥è¯´ï¼Œä¸€ä¸ªç›¸å½“æœ‰è¶£çš„å“²å­¦é—®é¢˜æ˜¯ï¼Œä¸€ä¸ªç›´æ¥ä»å®¢æˆ·è¯·æ±‚ï¼ˆæ²¡æœ‰å†…éƒ¨äººç±»æç¤ºè€…ï¼‰ç”Ÿæˆçš„ PR åº”è¯¥æœ‰å¤šå°‘å®¡æŸ¥è€…ï¼Ÿæˆ‘ä»¬ç°åœ¨æš‚æ—¶å¯¹ä»»ä½• AI å‘èµ·çš„ PR é‡‡ç”¨ 2 ä¸ªäººç±»æ‰¹å‡†ï¼Œä½†å½“ä¸å†æ˜¯äººä¸ºå¦ä¸€ä¸ªäººç±»åˆ¶ä½œä¸œè¥¿ä¾›å…¶å®¡æŸ¥æ—¶ï¼Œè¿™æœ‰ç‚¹å¥‡æ€ªçš„æ¨¡å¼è½¬å˜ï¼ˆè‡³å°‘å¯¹æˆ‘æ¥è¯´æ˜¯è¿™æ ·ï¼‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬ä¸€æ¬¡ç”¨ Ollama è·‘è§†è§‰æ¨¡å‹ï¼šQwen2.5-VL 7B ç»™äº†æˆ‘ä¸€ä¸ªæ„å¤–æƒŠå–œ]]></title>    <link>https://juejin.cn/post/7572510909445783602</link>    <guid>https://juejin.cn/post/7572510909445783602</guid>    <pubDate>2025-11-15T14:43:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572510909445783602" data-draft-id="7572497847770972187" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬ä¸€æ¬¡ç”¨ Ollama è·‘è§†è§‰æ¨¡å‹ï¼šQwen2.5-VL 7B ç»™äº†æˆ‘ä¸€ä¸ªæ„å¤–æƒŠå–œ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T14:43:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‹‡å“¥Javaå®æˆ˜"/> <meta itemprop="url" content="https://juejin.cn/user/3693987061329080"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬ä¸€æ¬¡ç”¨ Ollama è·‘è§†è§‰æ¨¡å‹ï¼šQwen2.5-VL 7B ç»™äº†æˆ‘ä¸€ä¸ªæ„å¤–æƒŠå–œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3693987061329080/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‹‡å“¥Javaå®æˆ˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T14:43:19.000Z" title="Sat Nov 15 2025 14:43:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰å‡ å¤©åœ¨ Mac ä¸Šå®‰è£…äº† Ollamaï¼Œå¹¶ä¸‹è½½äº† Qwen2.5-VL 7B åšäº†ä¸€äº›æµ‹è¯•ï¼Œæ•´ä¸ªè¿‡ç¨‹è¿˜æŒºæœ‰æ„æ€ï¼Œåˆ†äº«ç»™å¤§å®¶ã€‚</p>
<h2 data-id="heading-0">1 Mac å®‰è£… Ollama</h2>
<p>è¿›å…¥ Ollama å®˜ç½‘ ï¼Œæˆ‘çš„ç”µè„‘æ˜¯ Mac Studio ï¼Œæ‰€ä»¥é€‰æ‹© MacOS ä¸‹è½½ ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18c08a20628e46939de3845bc0741a28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=xNMGGgrNT7Ld1ODuyem0ql4itVU%3D" alt="image-20251115204120250" loading="lazy"/></p>
<p>ä¸‹è½½å®Œæˆåï¼ŒåŒå‡»å®‰è£… ï¼Œå®‰è£…å®Œæˆåç•Œé¢å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0aac9729c09d46b898d3aaf639483421~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=R2l61ISKOmHaKFCLxyvv4cLIKy0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">2 ä¸‹è½½ Qwen 2.5 VL 7B</h2>
<p>Qwen 2.5-VL æ˜¯é˜¿é‡Œå·´å·´é€šä¹‰åƒé—®å›¢é˜Ÿå¼€å‘çš„ä¸€æ¬¾å¼€æºçš„æ——èˆ°çº§è§†è§‰è¯­è¨€æ¨¡å‹ã€‚</p>
<p>å®ƒèƒ½å¤Ÿå¤„ç†æ–‡æœ¬ã€å›¾åƒå’Œè§†é¢‘ï¼Œå¹¶å…·å¤‡å¼ºå¤§çš„è§†è§‰ç†è§£å’Œäº¤äº’èƒ½åŠ›ã€‚è¯¥æ¨¡å‹æœ‰ä¸åŒå‚æ•°è§„æ¨¡ï¼ˆå¦‚ 3Bã€7B å’Œ 72Bï¼‰ï¼Œé€‚ç”¨äºä»è¾¹ç¼˜ AI åˆ°é«˜æ€§èƒ½è®¡ç®—çš„å¤šç§åœºæ™¯ ã€‚</p>
<p>ä¸‹è½½ Qwen 2.5 VL æœ‰ä¸¤ç§æ–¹å¼ ï¼š</p>
<p><strong>1ã€é€šè¿‡å‘½ä»¤è¡Œè¯·æ±‚</strong></p>
<pre><code class="hljs">ollama pull qwen2.5vl:7b
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c498324096134bb89fcc8a6720e6c43f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=LhXMCOCs6vaemLnqTHzaGoV4VX8%3D" alt="" loading="lazy"/></p>
<p><strong>2ã€é€šè¿‡ Ollama GUI ç•Œé¢å®‰è£…</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6af61ece64e44ad4a852809189094c6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=%2BV%2BnGnhaQ8r%2Bhg8cduLbzSc4U3k%3D" alt="" loading="lazy"/></p>
<p>åœ¨ GUI ç•Œé¢é€‰æ‹©æ¨¡å‹ ï¼Œè‹¥æœªä¸‹è½½ä¼šæ˜¾ç¤ºä¸‹è½½å›¾æ ‡ï¼Œç„¶ååœ¨å¯¹è¯æ¡†ä¸­è¾“å…¥ä»»æ„æ–‡æœ¬å³å¯è‡ªåŠ¨ä¸‹è½½ã€‚</p>
<h2 data-id="heading-2">3 æ–‡æœ¬/å›¾ç‰‡ä½“éªŒ</h2>
<p>ä¸‹è½½å®Œæ¨¡å‹åï¼Œå³å¯åœ¨å¯¹è¯æ¡†ä¸­è¿›è¡Œå¯¹è¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/652343a76a76444b90294d8579ccf729~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=PK9q5%2Bs%2BHqlFW3Mh3BGitEBxzA4%3D" alt="" loading="lazy"/></p>
<p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ ollama å¯åŠ¨æ¨¡å‹åå±•å¼€å¯¹è¯ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ollama run qwen2<span class="hljs-number">.5</span>vl:<span class="hljs-number">7b</span>
</code></pre>
<p>æ¥ä¸‹æ¥ï¼Œè¿›è¡Œå›¾ç‰‡æ£€æµ‹ï¼Œå›¾ç‰‡å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6b6fb58686541caa1886c875d4bc7e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=NRsviItMqgwuHOKJjK0GNJ582qg%3D" alt="" loading="lazy"/></p>
<p>æ£€æµ‹ç»“æœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57e3a93aed86459ca6c71fe48aeaae8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=%2FplIQsTRUkFT8t5d7lSNqCKDqE8%3D" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è¯¥æ¨¡å‹è¯†åˆ«å›¾åƒä¸­çš„æ–‡å­—ã€å…¬å¼æˆ–æŠ½å–ç¥¨æ®ã€è¯ä»¶ã€è¡¨å•ä¸­çš„ä¿¡æ¯ï¼Œæ”¯æŒæ ¼å¼åŒ–è¾“å‡ºæ–‡æœ¬ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8e512c6b3b1c47ef872bbd4fc40cae9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=lDJAGUQo0HVAHwX74WfNbhV21Xg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">4 ç¨‹åºè°ƒç”¨åˆ†æå›¾ç‰‡</h2>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ç¼–å†™ python è°ƒç”¨ Ollama æ¥å£ï¼ŒåŒæ ·æ˜¯åˆ†æå›¾ç‰‡ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fef6e0a70d33491d83ee831c437d6886~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=BO8d8z3k8xfvKu7KUojX%2FcE%2BoLQ%3D" alt="" loading="lazy"/></p>
<p>åŒæ ·ï¼ŒOllama ä¹Ÿæ”¯æŒå…¼å®¹ OpenAI çš„æ¥å£åè®® ï¼Œå¯ä»¥å®ç°æµå¼å¯¹è¯ï¼Œè§ä¸‹å›¾ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">curl http://localhost:<span class="hljs-number">11434</span>/api/chat -d <span class="hljs-comment">'{</span>
 Â <span class="hljs-string">"model"</span>: <span class="hljs-string">"qwen2.5vl:7b"</span>,
 Â <span class="hljs-string">"messages"</span>: [
 Â   { <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"å†™ä¸€æ®µä»£ç "</span> }
  ]
}<span class="hljs-comment">'</span>
</code></pre>
<p>æ•ˆæœè§ä¸‹å›¾ ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9f803bb3c794d59b1f61528b138ced3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YuH5ZOlSmF2YeWunuaImA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763822598&amp;x-signature=2qoq8esIsQzQACIPSNLRQmSdf54%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">5 æ€»ç»“</h2>
<p>Qwen 2.5-VL 7B ç®€ç›´å°±æ˜¯â€œæœ¬åœ°è§†è§‰å°é’¢ç‚®â€ï¼Œå„ç§å›¾åƒä¿¡æ¯éƒ½èƒ½ä¸€æŠŠæŠ“ï¼Œæ— è®ºç»™å®ƒæˆªå›¾ã€ç¥¨æ®ã€å›¾è¡¨è¿˜æ˜¯å¤æ‚åœºæ™¯ï¼Œå®ƒéƒ½èƒ½æœ‰æ‰€ä½œä¸ºã€‚</p>
<p>ç¬”è€…è®¤ä¸ºå®ƒå°¤å…¶é€‚åˆåœ¨å¦‚ä¸‹åœºæ™¯ä¸­å‘æŒ¥ä½œç”¨ï¼š</p>
<ul>
<li><strong>æ–‡æ¡£å’Œç¥¨æ®è§£æ</strong>ï¼šå‘ç¥¨ã€åˆåŒã€æŠ¥è¡¨ã€æ‰«æä»¶ï¼Œä¸€æ¬¡æ¨ç†å³å¯æå–æ–‡å­—å¹¶ç”Ÿæˆç»“æ„åŒ–æ•°æ®</li>
<li><strong>è¡¨æ ¼ä¸å›¾è¡¨è§£æ</strong>ï¼šè´¢åŠ¡æŠ¥è¡¨ã€ç»Ÿè®¡å›¾è¡¨ï¼Œå¿«é€Ÿæå–è¡¨å¤´å’Œæ•°æ®ï¼Œæ–¹ä¾¿åç»­åˆ†æ</li>
<li><strong>å›¾ç‰‡åœºæ™¯ç†è§£</strong>ï¼šä»“åº“ã€æœºæˆ¿ã€åŠå…¬å®¤ç­‰ç…§ç‰‡ï¼Œè‡ªåŠ¨è¯†åˆ«ç‰©ä½“å’Œæ•´ä½“åœºæ™¯</li>
<li><strong>å¤šæ¨¡æ€é—®ç­”</strong>ï¼šç»“åˆå›¾ç‰‡å’Œæ–‡æœ¬å†…å®¹å›ç­”é—®é¢˜ï¼Œæ”¯æŒç§‘ç ”ã€æ•™è‚²æˆ–äº§å“åŸå‹</li>
<li><strong>å†…å®¹å®¡æ ¸ä¸åˆè§„æ£€æµ‹</strong>ï¼šè¯†åˆ«æ•æ„Ÿæ–‡å­—æˆ–è¿è§„å›¾åƒï¼Œæœ¬åœ°éƒ¨ç½²ä¿æŠ¤éšç§</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•ä½¿ç”¨Superpowers MCPå¼ºåˆ¶Claude Codeåœ¨ç¼–ç å‰è¿›è¡Œè§„åˆ’]]></title>    <link>https://juejin.cn/post/7572714389922889768</link>    <guid>https://juejin.cn/post/7572714389922889768</guid>    <pubDate>2025-11-15T14:51:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572714389922889768" data-draft-id="7572524368878927906" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•ä½¿ç”¨Superpowers MCPå¼ºåˆ¶Claude Codeåœ¨ç¼–ç å‰è¿›è¡Œè§„åˆ’"/> <meta itemprop="keywords" content="Claude"/> <meta itemprop="datePublished" content="2025-11-15T14:51:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜¯é­”ä¸¸å•Š"/> <meta itemprop="url" content="https://juejin.cn/user/3217622495411292"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•ä½¿ç”¨Superpowers MCPå¼ºåˆ¶Claude Codeåœ¨ç¼–ç å‰è¿›è¡Œè§„åˆ’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3217622495411292/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜¯é­”ä¸¸å•Š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T14:51:54.000Z" title="Sat Nov 15 2025 14:51:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.trevorlasn.com%2Fblog%2Fsuperpowers-claude-code-skills" target="_blank" title="https://www.trevorlasn.com/blog/superpowers-claude-code-skills" ref="nofollow noopener noreferrer">è½¬è½½</a></p>
<p>Superpowersæ˜¯ä¸€ä¸ªå¼ºåˆ¶æ‰§è¡Œç³»ç»ŸåŒ–å·¥ä½œæµçš„MCPã€‚æˆ‘ä½¿ç”¨å®ƒå°†skillcraftå‡çº§åˆ°Next.js 16ï¼Œæ²¡æœ‰é—æ¼ä»»ä½•ä¸€ä¸ªæ–‡ä»¶ã€‚</p>
<p>æˆ‘è¿‡å»å‡ ä¸ªæœˆä¸€ç›´åœ¨ç”¨Claudeæ„å»ºskillcraft.aiã€‚Claudeå¾ˆæ“…é•¿å¿«é€Ÿç¼–å†™ä»£ç ï¼Œä½†å®ƒæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå®ƒç»å¸¸è·³è¿‡æ­¥éª¤ã€‚</p>
<p>å½“æˆ‘è®©Claudeå¸®åŠ©è¿ç§»æŸä¸ªå¤§å‹é¡¹ç›®æ—¶ï¼Œå®ƒä¼šç«‹å³å¼€å§‹å»ºè®®ä¿®æ”¹ã€‚æ²¡æœ‰è§„åˆ’é˜¶æ®µã€‚æ²¡æœ‰"è®©æˆ‘å…ˆæ‰¾åˆ°æ‰€æœ‰éœ€è¦æ›´æ–°çš„æ–‡ä»¶"ã€‚åªæ˜¯ç›´æ¥è¿›å…¥ä»£ç ä¿®æ”¹å¹¶æœŸæœ›è·å¾—æœ€å¥½çš„ç»“æœã€‚</p>
<p>è¿™å°±æ˜¯ä½ é—æ¼æ–‡ä»¶çš„æ–¹å¼ã€‚è¿™å°±æ˜¯ä½ å‘å¸ƒbugçš„æ–¹å¼ã€‚</p>
<p>Superpowersæ˜¯ä¸€ä¸ªè§£å†³è¿™ä¸ªé—®é¢˜MCPã€‚å®ƒåŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªç»“æ„åŒ–å·¥ä½œæµåº“â€”â€”æµ‹è¯•ã€è°ƒè¯•ã€è§„åˆ’â€”â€”Claude Codeä¼šè‡ªåŠ¨åŠ è½½å¹¶çœŸæ­£éµå¾ªçš„å·¥ä½œæµã€‚</p>
<p>Claude Codeä¸­çš„skillæ˜¯ä¸€ä¸ªåŒ…å«æŒ‡ä»¤ã€è„šæœ¬å’Œèµ„æºçš„æ–‡ä»¶å¤¹ï¼ŒClaudeåœ¨éœ€è¦æ—¶ä¼šåŠ è½½å®ƒã€‚è¿™æ˜¯Anthropicçš„Agent SkillsåŠŸèƒ½çš„ä¸€éƒ¨åˆ†ï¼Œè¯¥åŠŸèƒ½å¯åœ¨Claudeåº”ç”¨ã€Claude Codeå’ŒAPIä¸­å·¥ä½œã€‚æ¯ä¸ªskillå®šä¹‰äº†å®ƒä½•æ—¶é€‚ç”¨ã€éµå¾ªä»€ä¹ˆæµç¨‹ä»¥åŠä¸èƒ½èµ°ä»€ä¹ˆæ·å¾„ã€‚å½“ä½ å¼€å§‹ä¸€ä¸ªåŒ¹é…skillçš„ä»»åŠ¡æ—¶ï¼ŒClaudeä¼šæ‰«æå¯ç”¨çš„skillsï¼Œæ‰¾åˆ°åŒ¹é…é¡¹å¹¶è‡ªåŠ¨åŠ è½½å®ƒã€‚</p>
<p>æˆ‘ç»å¸¸ä½¿ç”¨ä¸‰ä¸ªæ–œæ å‘½ä»¤ï¼š</p>





















<table><thead><tr><th>å‘½ä»¤</th><th>å®ƒçš„ä½œç”¨</th></tr></thead><tbody><tr><td><code>/superpowers:brainstorm</code></td><td>åœ¨ç¼–ç å‰å®Œå–„ç²—ç•¥çš„æƒ³æ³•</td></tr><tr><td><code>/superpowers:write-plan</code></td><td>åˆ›å»ºè¯¦ç»†çš„å®æ–½è®¡åˆ’</td></tr><tr><td><code>/superpowers:execute-plan</code></td><td>ä»¥æ‰¹æ¬¡æ–¹å¼è¿è¡Œè®¡åˆ’å¹¶è¿›è¡Œå®¡æŸ¥æ£€æŸ¥ç‚¹</td></tr></tbody></table>
<p>æˆ‘å°†Superpowersæ·»åŠ åˆ°æˆ‘çš„<code>CLAUDE.md</code>ä¸­ï¼Œè¿™æ ·å®ƒåœ¨æ¯æ¬¡ä¼šè¯æ—¶éƒ½ä¼šè‡ªåŠ¨åŠ è½½ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Project Setup</span>

Use the Superpowers MCP <span class="hljs-keyword">for</span> <span class="hljs-built_in">all</span> development work. Load it at session start.
</code></pre>
<p>è¿™å¯¹tokenæ•ˆç‡æ¥è¯´æ„ä¹‰é‡å¤§â€”â€”Claudeä¸å†ç‡ƒçƒ§contextè¯•å›¾å°†æ‰€æœ‰å†…å®¹ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œæ˜¯å°†å·¥ä½œåˆ†æˆ5åˆ†é’Ÿçš„å—å¹¶å°†è¿›åº¦å†™å…¥markdownæ–‡ä»¶ã€‚ä½ æ°¸è¿œä¸ä¼šåœ¨ä¼šè¯ä¹‹é—´ä¸¢å¤±ä¸Šä¸‹æ–‡ï¼Œå› ä¸ºè®¡åˆ’å°±åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯é”å®šåœ¨ä¸‰å°æ—¶å‰è¾¾åˆ°tokené™åˆ¶çš„æŸä¸ªå¯¹è¯ä¸­ã€‚</p>
<p>ç”Ÿæˆçš„æ–‡ä»¶çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">~<span class="hljs-regexp">/.config/superpowers</span><span class="hljs-regexp">/
â””â”€â”€ plans/</span>
    â””â”€â”€ nextjs-<span class="hljs-number">16</span>-migration/
        â”œâ”€â”€ <span class="hljs-variable constant_">PLAN</span>.md                  <span class="hljs-comment"># Complete migration roadmap</span>
        â”œâ”€â”€ progress.md              <span class="hljs-comment"># Current status and completed tasks</span>
        â””â”€â”€ verification.md          <span class="hljs-comment"># Test commands and success criteria</span>
</code></pre>
<p><code>PLAN.md</code>æ–‡ä»¶åŒ…å«æ‰€æœ‰å†…å®¹ï¼š</p>





































<table><thead><tr><th>éƒ¨åˆ†</th><th>åŒ…å«å†…å®¹</th></tr></thead><tbody><tr><td>Overview</td><td>éœ€è¦æ”¹å˜ä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆ</td></tr><tr><td>Phase 1</td><td>APIè·¯ç”±é‡æ„ï¼ˆ23ä¸ªæ–‡ä»¶ï¼‰</td></tr><tr><td>Phase 2</td><td>ç»„ä»¶æ—¶é—´æ•æ„Ÿæ€§ä¿®å¤</td></tr><tr><td>Phase 3</td><td>Context provider Suspenseè¾¹ç•Œ</td></tr><tr><td>Phase 4</td><td>å¯ç”¨cacheComponents</td></tr><tr><td>Phase 5</td><td>æµ‹è¯•å’ŒéªŒè¯</td></tr><tr><td>Rollback</td><td>å¦‚æœå‡ºç°æ•…éšœæ€ä¹ˆåŠ</td></tr></tbody></table>
<p>Skillcraftè¿è¡Œåœ¨Next.jsä¸Šï¼Œæˆ‘æƒ³å¯ç”¨Next.js 16ä¸­çš„æ–°<code>cacheComponents</code>åŠŸèƒ½ã€‚è¿™ä¸ªä¸œè¥¿ä¼šç ´åå„ç§æ¨¡å¼â€”â€”è®¿é—®<code>searchParams</code>çš„APIè·¯ç”±ï¼Œä½¿ç”¨<code>new Date()</code>çš„ç»„ä»¶ï¼Œæ²¡æœ‰Suspenseè¾¹ç•Œçš„context providersã€‚</p>
<p>æˆ‘è¿è¡Œ<code>/superpowers:write-plan</code>å¹¶å¾—åˆ°äº†ä¸€ä¸ª500è¡Œçš„è®¡åˆ’ã€‚ä¸æ˜¯ä¸€äº›æ¨¡ç³Šçš„å¤§çº²ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„è·¯çº¿å›¾ï¼šæ‰€æœ‰23ä¸ªéœ€è¦æ›´æ”¹çš„APIè·¯ç”±æ–‡ä»¶ï¼Œä¸¤ä¸ªä¼šç ´åé¢„æ¸²æŸ“çš„ä½¿ç”¨<code>new Date()</code>çš„ç»„ä»¶ï¼Œéœ€è¦Suspenseè¾¹ç•Œçš„ç‰¹å®šcontext providersï¼Œä»¥åŠä¸€ä¸ªå¸¦æœ‰æµ‹è¯•æ£€æŸ¥ç‚¹çš„4å¤©æ—¶é—´çº¿ã€‚</p>
<p>è¯¥è®¡åˆ’åŒ…å«äº†æ¯ä¸ªé˜¶æ®µçš„éªŒè¯å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Test specific endpoints after API refactoring</span>
curl http://localhost:3000/api/leaderboard
curl http://localhost:3000/api/courses/recent
curl http://localhost:3000/api/topics
</code></pre>
<p>å®ƒè®°å½•äº†ä¿®æ”¹å‰åçš„æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Before: Incompatible with cacheComponents</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> runtime = <span class="hljs-string">'nodejs'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> dynamic = <span class="hljs-string">'force-dynamic'</span>

<span class="hljs-comment">// After: Clean (API routes are dynamic by default)</span>
<span class="hljs-comment">// Note: With cacheComponents enabled, API routes are dynamic by default</span>
</code></pre>
<p>å®ƒç”šè‡³å®šä¹‰äº†æˆåŠŸæ ‡å‡†ï¼ˆæ„å»ºæˆåŠŸï¼ŒCLSä¿æŒåœ¨0.000ï¼ŒLighthouseåˆ†æ•°â‰¥ 95ï¼‰å’Œå›æ»šè®¡åˆ’ã€‚</p>
<p>æ²¡æœ‰è¿™ä¸ªè®¡åˆ’ï¼Œæˆ‘ä¼šå¯ç”¨cacheComponentsï¼Œé‡åˆ°é”™è¯¯ï¼Œé€ä¸€ä¿®å¤ï¼Œå¹¶è‚¯å®šä¼šé—æ¼è¾¹ç¼˜æƒ…å†µã€‚è¿ç§»ä¼šéœ€è¦å‡ å¤©çš„ååº”å¼è°ƒè¯•ã€‚æœ‰äº†è®¡åˆ’ï¼Œåœ¨æ¥è§¦ä»»ä½•ä»£ç ä¹‹å‰æˆ‘å°±æœ‰äº†å®Œæ•´çš„è·¯çº¿å›¾ã€‚</p>
<p>è¯¥åº“åŒ…å«å¤šä¸ªç”¨äºæµ‹è¯•ã€è°ƒè¯•å’Œå¼€å‘å·¥ä½œæµçš„skillsï¼š</p>





















<table><thead><tr><th>Skill</th><th>å®ƒå¼ºåˆ¶æ‰§è¡Œçš„å†…å®¹</th></tr></thead><tbody><tr><td><code>test-driven-development</code></td><td>RED-GREEN-REFACTORï¼šç¼–å†™æµ‹è¯•ï¼Œè§‚å¯Ÿå¤±è´¥ï¼Œç¼–å†™ä»£ç </td></tr><tr><td><code>systematic-debugging</code></td><td>4é˜¶æ®µæ–¹æ³•ï¼šæ ¹æœ¬åŸå› è°ƒæŸ¥ â†’ æ¨¡å¼åˆ†æ â†’ å‡è®¾æµ‹è¯• â†’ å®æ–½</td></tr><tr><td><code>verification-before-completion</code></td><td>åœ¨å£°ç§°å·¥ä½œå®Œæˆä¹‹å‰è¿è¡ŒéªŒè¯å‘½ä»¤å¹¶ç¡®è®¤è¾“å‡º</td></tr></tbody></table>
<p>è¿™äº›skillså­—é¢ä¸Šé˜»æ­¢ä½ è·³è¿‡æ­¥éª¤ã€‚å†ä¹Ÿæ²¡æœ‰"æˆ‘è®¤ä¸ºå®ƒæœ‰æ•ˆ"è€Œæ²¡æœ‰è¯æ˜çš„æƒ…å†µã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨è¿›è¡Œè¿ç§»å¹¶éœ€è¦æ‰¾åˆ°ä¸€ä¸ªæ¨¡å¼çš„æ‰€æœ‰å®ä¾‹ï¼ŒSuperpowersä¼šæ‰¾åˆ°å®ƒä»¬æ‰€æœ‰ã€‚å¦‚æœä½ æ­£åœ¨è°ƒè¯•å¹¶å³å°†çŒœæµ‹ä¿®å¤æ–¹æ¡ˆï¼Œå®ƒä¼šé˜»æ­¢ä½ å¹¶è®©ä½ å…ˆè°ƒæŸ¥æ ¹æœ¬åŸå› ã€‚å¦‚æœé—æ¼ä¸€ä¸ªæ–‡ä»¶ä¼šç ´åç”Ÿäº§ç¯å¢ƒï¼Œå®ƒä¼šåœ¨ä½ å®Œæˆä¹‹å‰è®©ä½ éªŒè¯ä¸€åˆ‡ã€‚</p>
<h2 data-id="heading-0">å®‰è£…</h2>
<p>Superpowersä¸Claude Codeï¼ˆCLIå·¥å…·ï¼‰ä¸€èµ·å·¥ä½œã€‚é€šè¿‡æ’ä»¶å¸‚åœºå®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># In Claude Code</span>
/plugin marketplace add obra/superpowers-marketplace
/plugin install superpowers@superpowers-marketplace
</code></pre>
<p>æˆ–è€…æ‰‹åŠ¨å°†å…¶æ·»åŠ åˆ°<code>.claude/plugins.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"plugins"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"superpowers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"github"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"owner"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"obra"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"repo"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"superpowers"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å½“Claude Codeå¯åŠ¨æ—¶ï¼Œä½ ä¼šçœ‹åˆ°skillsåŠ è½½çš„ç¡®è®¤ä¿¡æ¯ã€‚ç„¶ååªéœ€ä½¿ç”¨æ–œæ å‘½ä»¤ï¼šåœ¨å¼€å§‹å¤æ‚åŠŸèƒ½ä¹‹å‰ä½¿ç”¨<code>/superpowers:brainstorm</code>ï¼Œå¯¹äºè¿ç§»æˆ–å¤šæ–‡ä»¶é‡æ„ä½¿ç”¨<code>/superpowers:write-plan</code>ï¼Œä½¿ç”¨<code>/superpowers:execute-plan</code>ä»¥æ‰¹æ¬¡æ–¹å¼è¿è¡Œè¿™äº›è®¡åˆ’ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åç«¯å¼€å‘å¦‚ä½•å°†åˆ›æ–°è½¬åŒ–ä¸ºä¸“åˆ©ï¼Ÿæ¡ˆä¾‹ã€æµç¨‹ä¸å®æ“æŒ‡å—]]></title>    <link>https://juejin.cn/post/7572403510468296747</link>    <guid>https://juejin.cn/post/7572403510468296747</guid>    <pubDate>2025-11-15T13:13:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572403510468296747" data-draft-id="7572481101710000182" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åç«¯å¼€å‘å¦‚ä½•å°†åˆ›æ–°è½¬åŒ–ä¸ºä¸“åˆ©ï¼Ÿæ¡ˆä¾‹ã€æµç¨‹ä¸å®æ“æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T13:13:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="oioihoii"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åç«¯å¼€å‘å¦‚ä½•å°†åˆ›æ–°è½¬åŒ–ä¸ºä¸“åˆ©ï¼Ÿæ¡ˆä¾‹ã€æµç¨‹ä¸å®æ“æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    oioihoii
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T13:13:16.000Z" title="Sat Nov 15 2025 13:13:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æŠ€æœ¯é©±åŠ¨çš„å•†ä¸šç¯å¢ƒä¸­ï¼Œä¸“åˆ©ä¸ä»…æ˜¯æ³•å¾‹ä¿æŠ¤çš„ç›¾ç‰Œï¼Œæ›´æ˜¯ä¼ä¸šæ ¸å¿ƒç«äº‰åŠ›çš„ä½“ç°ã€‚å¾ˆå¤šåç«¯å¼€å‘è€…å¯èƒ½è®¤ä¸ºä¸“åˆ©ç¦»æ—¥å¸¸ coding å¾ˆé¥è¿œï¼Œä½†å®é™…ä¸Šï¼Œ<strong>åç«¯æŠ€æœ¯æ–¹æ¡ˆå®Œå…¨å¯ä»¥ç”³è¯·ä¸“åˆ©</strong>ï¼Œåªè¦å®ƒèƒ½è§£å†³å…·ä½“çš„æŠ€æœ¯é—®é¢˜å¹¶äº§ç”ŸæŠ€æœ¯æ•ˆæœã€‚æœ¬æ–‡å°†ç»“åˆçœŸå®æ¡ˆä¾‹ï¼Œä¸ºä½ è§£æåç«¯ä¸“åˆ©ä»æ„æ€åˆ°è½åœ°çš„å…¨è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ ä¸ºä»€ä¹ˆåç«¯åˆ›æ–°å¯ä»¥ç”³è¯·ä¸“åˆ©ï¼Ÿ</h2>
<p>è®¸å¤šäººæœ‰ä¸€ä¸ªè¯¯è§£ï¼Œè®¤ä¸ºâ€œè½¯ä»¶ä»£ç â€æˆ–â€œç®—æ³•â€ä¸èƒ½ç”³è¯·ä¸“åˆ©ã€‚å®é™…ä¸Šï¼Œæ³•å¾‹æ’æ–¥çš„æ˜¯<strong>çº¯ç²¹çš„æ•°å­¦ç®—æ³•ã€å•†ä¸šæ–¹æ³•æˆ–æ™ºåŠ›æ´»åŠ¨è§„åˆ™</strong>æœ¬èº«ï¼Œä½†å½“ä½ çš„ç¨‹åº<strong>ä½œä¸ºæŠ€æœ¯æ–¹æ¡ˆçš„ä¸€éƒ¨åˆ†</strong>ï¼Œç”¨äºè§£å†³å…·ä½“æŠ€æœ¯é—®é¢˜æ—¶ï¼Œå®ƒå°±å…·å¤‡äº†ç”³è¯·ä¸“åˆ©çš„æ½œåŠ›ã€‚</p>
<p>æ ¹æ®ã€Šä¸“åˆ©å®¡æŸ¥æŒ‡å—ã€‹ï¼Œåˆ¤æ–­ä¸€ä¸ªæ¶‰åŠè®¡ç®—æœºç¨‹åºçš„å‘æ˜æ˜¯å¦å¯ä¸“åˆ©ï¼Œå…³é”®åœ¨äºå®ƒæ˜¯å¦æ„æˆäº†ä¸€ä¸ª <strong>â€œæŠ€æœ¯æ–¹æ¡ˆâ€</strong> ï¼Œå³ï¼š</p>
<ul>
<li><strong>è§£å†³çš„æ˜¯æŠ€æœ¯é—®é¢˜</strong>ï¼ˆå¦‚æå‡ç¡¬ä»¶æ•ˆèƒ½ã€ä¼˜åŒ–ç½‘ç»œèµ„æºã€ä¿éšœæ•°æ®å®‰å…¨ï¼‰</li>
<li><strong>é‡‡ç”¨äº†éµå¾ªè‡ªç„¶è§„å¾‹çš„æŠ€æœ¯æ‰‹æ®µ</strong>ï¼ˆé€šè¿‡è®¡ç®—æœºç¨‹åºå¯¹è®¡ç®—æœºå†…éƒ¨æˆ–å¤–éƒ¨å¯¹è±¡è¿›è¡Œæ§åˆ¶æˆ–å¤„ç†ï¼‰</li>
<li><strong>è·å¾—äº†ç¬¦åˆè‡ªç„¶è§„å¾‹çš„æŠ€æœ¯æ•ˆæœ</strong>ï¼ˆå¦‚é™ä½æœåŠ¡å™¨è´Ÿè½½ã€æé«˜æ•°æ®å¤„ç†é€Ÿåº¦ï¼‰</li>
</ul>
<p><strong>åç«¯ä¸“åˆ©ä¿æŠ¤çš„æ˜¯ä»€ä¹ˆï¼Ÿ</strong>
ä¸ä¿æŠ¤ä»£ç è¡¨è¾¾å½¢å¼çš„<strong>è½¯ä»¶è‘—ä½œæƒ</strong>ä¸åŒï¼Œä¸“åˆ©ä¿æŠ¤çš„æ˜¯è½¯ä»¶çš„è®¾è®¡<strong>æ„æ€ä¸è§£å†³æ–¹æ¡ˆ</strong>ã€‚è¿™æ„å‘³ç€ï¼Œå³ä¾¿ä»–äººç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€é‡å†™äº†ä½ çš„æ ¸å¿ƒé€»è¾‘ï¼Œåªè¦å®ç°äº†ç›¸åŒçš„æŠ€æœ¯æ–¹æ¡ˆï¼Œä¹Ÿå¯èƒ½æ„æˆä¾µæƒã€‚</p>
<h2 data-id="heading-1">äºŒã€ çœŸå®æ¡ˆä¾‹ï¼šåç«¯ä¸“åˆ©å°±åœ¨æˆ‘ä»¬èº«è¾¹</h2>
<p>ä»¥ä¸‹æ˜¯ä¸€äº›è¿‘å¹´æ¥å·²å…¬å¼€çš„çœŸå®åç«¯ä¸“åˆ©æ¡ˆä¾‹ï¼Œå®ƒä»¬éƒ½æºäºè§£å†³å®é™…å¼€å‘ä¸­çš„ç—›ç‚¹ã€‚</p>





























<table><thead><tr><th align="left">ä¸“åˆ©åç§°</th><th align="left">ç”³è¯·äºº/ä¸“åˆ©æƒäºº</th><th align="left">æ ¸å¿ƒè¦è§£å†³çš„æŠ€æœ¯é—®é¢˜</th><th align="left">æŠ€æœ¯æ–¹æ¡ˆæ¦‚è§ˆ</th></tr></thead><tbody><tr><td align="left"><strong>ã€ŠæœåŠ¡æ³¨å†ŒåŠæ‹¦æˆªæ–¹æ³•ã€è£…ç½®ã€ç”µå­è®¾å¤‡åŠå¯è¯»å­˜å‚¨ä»‹è´¨ã€‹</strong></td><td align="left">å¤©å†•ç§‘æŠ€</td><td align="left">è§£å†³åŸç”ŸgRPCæ¡†æ¶åœ¨æœåŠ¡ç®¡ç†ä¸­å­˜åœ¨çš„<strong>ä»£ç å†—ä½™ã€æ‹¦æˆªç²’åº¦ç²—ã€åŠ¨æ€æ‰©å±•å›°éš¾</strong>ç­‰é—®é¢˜ã€‚</td><td align="left">å¼•å…¥<strong>Javaè‡ªå®šä¹‰æ³¨è§£</strong>ï¼Œåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å®ŒæˆæœåŠ¡çš„æ³¨å†Œä¸æ‹¦æˆªå™¨çš„ç»‘å®šï¼Œå®ç°äº†<strong>æ–¹æ³•çº§çš„ç²¾å‡†æ‹¦æˆª</strong>å’Œé…ç½®çš„è‡ªåŠ¨åŒ–ã€‚</td></tr><tr><td align="left"><strong>ã€Šåç«¯æœåŠ¡è°ƒç”¨æ–¹æ³•ã€è£…ç½®ã€ç”µå­è®¾å¤‡åŠç¨‹åºäº§å“ã€‹</strong></td><td align="left">æ‹‰å¡æ‹‰</td><td align="left">ä¼˜åŒ–åç«¯æœåŠ¡è°ƒç”¨æ—¶çš„<strong>èµ„æºåˆ©ç”¨ä¸æ•ˆç‡</strong>ï¼Œåˆç†å¤„ç†åŒæ­¥ä¸å¼‚æ­¥ä»»åŠ¡ã€‚</td><td align="left">å°†æœåŠ¡è°ƒç”¨è¯·æ±‚æ³¨å†Œä¸ºIOäº‹ä»¶ï¼Œç”±åŒæ­¥çº¿ç¨‹è½®è¯¢é˜Ÿåˆ—ï¼Œå¹¶æ ¹æ®äº‹ä»¶ç±»å‹<strong>æ™ºèƒ½åˆ†é…ç”±åŒæ­¥çº¿ç¨‹å¤„ç†æˆ–æ´¾å‘ç»™å¼‚æ­¥çº¿ç¨‹</strong>ï¼Œå¤„ç†å®Œæˆåå†å›å½’åŒæ­¥é˜Ÿåˆ—ã€‚</td></tr><tr><td align="left"><strong>ã€Šä¸€ç§åŸºäºä¸­é—´å±‚çš„å¤šAgentæ´¾å‘æ–¹æ³•åŠè£…ç½®ã€‹</strong></td><td align="left">æ˜“æ–¹è¾¾åŸºé‡‘</td><td align="left">åœ¨å‰ç«¯ä¸åç«¯ä¹‹é—´å®ç°<strong>ç»Ÿä¸€ã€æ ‡å‡†åŒ–çš„æ¥å£è§£è€¦</strong>ï¼Œä»¥é«˜æ•ˆæ´¾å‘å’Œç®¡ç†å¤šä¸ªAI Agentã€‚</td><td align="left">é€šè¿‡ä¸€ä¸ª<strong>ä¸­é—´å±‚</strong>å¯¹ç”¨æˆ·è¯·æ±‚è¿›è¡Œé¢„å¤„ç†ã€åŒ¹é…ç›®æ ‡Agentã€æ•´åˆç­”å¤æ•°æ®å¹¶è¿”å›ï¼Œå®ç°äº†å‰åç«¯çš„è§£è€¦å’ŒAgentçš„ç²¾å‡†æ´¾å‘ã€‚</td></tr></tbody></table>
<p>ä»è¿™äº›æ¡ˆä¾‹å¯ä»¥çœ‹å‡ºï¼Œåç«¯ä¸“åˆ©å¹¶éé¥ä¸å¯åŠçš„â€œé»‘ç§‘æŠ€â€ï¼Œå®ƒä»¬å¾€å¾€æ˜¯å¯¹<strong>ç°æœ‰æ¡†æ¶çš„ä¼˜åŒ–ã€å¯¹ç‰¹å®šä¸šåŠ¡åœºæ™¯ä¸‹æŠ€æœ¯éš¾é¢˜çš„æ”»å…‹ï¼Œæˆ–æ˜¯è®¾è®¡äº†ä¸€å¥—æ›´é«˜æ•ˆçš„æ¶æ„æ¨¡å¼</strong>ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€ ä»ä»£ç åˆ°ä¸“åˆ©ï¼šå…³é”®æ­¥éª¤ä¸æ’°å†™æŠ€å·§</h2>
<p>å°†ä½ çš„åç«¯åˆ›æ–°è½¬åŒ–ä¸ºä¸“åˆ©ï¼Œéœ€è¦ç»å†ä¸€ä¸ªç³»ç»Ÿæ€§çš„è¿‡ç¨‹ã€‚</p>
<h3 data-id="heading-3">1. ç¡®å®šæŠ€æœ¯åˆ›æ–°ç‚¹</h3>
<p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚é—®è‡ªå·±ï¼šæˆ‘çš„ä»£ç ç©¶ç«Ÿåœ¨å“ªæ–¹é¢å®ç°äº†çªç ´ï¼Ÿ</p>
<ul>
<li><strong>æ˜¯æ–°çš„ç®—æ³•å—ï¼Ÿ</strong>ï¼ˆå¦‚ä¸€ç§æ–°çš„åˆ†å¸ƒå¼äº‹åŠ¡å¤„ç†æœºåˆ¶ï¼‰</li>
<li><strong>æ˜¯ç³»ç»Ÿæ¶æ„çš„ä¼˜åŒ–å—ï¼Ÿ</strong>ï¼ˆå¦‚ä¸€ç§æ–°çš„å¾®æœåŠ¡é—´é€šä¿¡åè®®ï¼‰</li>
<li><strong>æ˜¯æå‡äº†æŸé¡¹æ€§èƒ½æŒ‡æ ‡å—ï¼Ÿ</strong>ï¼ˆå¦‚é€šè¿‡åˆ›æ–°çš„ç¼“å­˜åŒæ­¥ç®—æ³•ï¼Œæé«˜äº†æ•°æ®å¤„ç†é€Ÿåº¦ï¼‰</li>
</ul>
<p><strong>åœ¨ç¡®å®šåˆ›æ–°ç‚¹åï¼ŒåŠ¡å¿…è¿›è¡Œä¸“åˆ©æ£€ç´¢</strong>ï¼Œåˆ©ç”¨Google Patentsã€å„å›½ä¸“åˆ©å±€å®˜ç½‘ç­‰æ•°æ®åº“ï¼Œç¡®è®¤ä½ çš„æƒ³æ³•æ˜¯å¦å…·å¤‡æ–°é¢–æ€§ã€‚</p>
<h3 data-id="heading-4">2. æ’°å†™é«˜è´¨é‡çš„ä¸“åˆ©ç”³è¯·æ–‡ä»¶</h3>
<p>ä¸“åˆ©ç”³è¯·æ–‡ä»¶æœ‰ä¸¥æ ¼çš„æ ¼å¼è¦æ±‚ï¼Œä¸»è¦åŒ…æ‹¬è¯´æ˜ä¹¦ã€æƒåˆ©è¦æ±‚ä¹¦ã€æ‘˜è¦å’Œé™„å›¾ã€‚å¯¹äºåç«¯ä¸“åˆ©ï¼Œä»¥ä¸‹å‡ ç‚¹è‡³å…³é‡è¦ï¼š</p>
<ul>
<li><strong>å¼ºè°ƒâ€œæŠ€æœ¯ä¸‰è¦ç´ â€</strong>ï¼šåœ¨æ•´ä¸ªè¯´æ˜ä¹¦ä¸­ï¼Œåå¤æ¸…æ™°åœ°é˜è¿° <strong>â€œæŠ€æœ¯é—®é¢˜â€ã€â€œæŠ€æœ¯æ‰‹æ®µâ€å’Œâ€œæŠ€æœ¯æ•ˆæœâ€</strong> ã€‚</li>
<li><strong>å–„ç”¨é™„å›¾</strong>ï¼šç»˜åˆ¶æ¸…æ™°çš„<strong>ç³»ç»Ÿæ¶æ„å›¾ã€æ•°æ®æµç¨‹å›¾ã€æ¨¡å—äº¤äº’å›¾</strong>ï¼Œè¿™èƒ½å¸®åŠ©å®¡æŸ¥å‘˜ç›´è§‚åœ°ç†è§£ä½ çš„æ–¹æ¡ˆã€‚</li>
<li><strong>å†™å¥½æƒåˆ©è¦æ±‚ä¹¦</strong>ï¼šè¿™æ˜¯å®šä¹‰ä¸“åˆ©ä¿æŠ¤èŒƒå›´çš„æ³•å¾‹æ ¸å¿ƒã€‚é€šå¸¸éœ€è¦å‡†å¤‡ï¼š
<ul>
<li><strong>æ–¹æ³•æƒåˆ©è¦æ±‚</strong>ï¼šæè¿°æ‰§è¡Œè¯¥è½¯ä»¶åŠŸèƒ½çš„å„ä¸ªæ­¥éª¤ã€‚</li>
<li><strong>è™šæ‹Ÿè£…ç½®æƒåˆ©è¦æ±‚</strong>ï¼šæè¿°æ‰§è¡Œè¯¥è½¯ä»¶åŠŸèƒ½çš„è™šæ‹ŸåŠŸèƒ½æ¨¡å—ï¼ˆä¾‹å¦‚ï¼šâ€œä¸€ç§â€¦è£…ç½®ï¼ŒåŒ…æ‹¬ï¼šæ¥æ”¶æ¨¡å—ã€å¤„ç†æ¨¡å—ã€å‘é€æ¨¡å—â€ï¼‰ã€‚</li>
<li><strong>ï¼ˆå¯é€‰ï¼‰éè™šæ‹Ÿè£…ç½®æƒåˆ©è¦æ±‚</strong>ï¼šå¦‚æœè€ƒè™‘æœªæ¥åœ¨ç¾å›½ç­‰åœ°åŒºå¸ƒå±€ï¼Œè¿˜éœ€è¦å‡†å¤‡åŒ…å«å¤„ç†å™¨ã€å­˜å‚¨å™¨ç­‰ç¡¬ä»¶ç»“æ„çš„æƒåˆ©è¦æ±‚ï¼Œä¾‹å¦‚â€œä¸€ç§â€¦è£…ç½®ï¼ŒåŒ…æ‹¬å¤„ç†å™¨ï¼Œæ‰€è¿°å¤„ç†å™¨ç”¨äºâ€¦â€ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-5">3. åº”å¯¹å®¡æŸ¥æµç¨‹</h3>
<p>æäº¤ç”³è¯·åï¼Œä¸“åˆ©å±€ä¼šè¿›è¡Œå®¡æŸ¥ã€‚å®¡æŸ¥å‘˜å¯èƒ½ä¼šå°±æŠ€æœ¯çš„æ–°é¢–æ€§ã€åˆ›é€ æ€§ç­‰æå‡ºæ„è§ã€‚ä½ éœ€è¦ä¸ä¸“åˆ©ä»£ç†äººå¯†åˆ‡é…åˆï¼Œè¯¦ç»†å›åº”å®¡æŸ¥å‘˜çš„ç–‘é—®ï¼Œå¹¶æä¾›å……åˆ†çš„æŠ€æœ¯è§£é‡Šã€‚</p>
<h2 data-id="heading-6">å››ã€ ç»™åç«¯å¼€å‘è€…çš„ä¸“åˆ©æ„æ€å¯å‘</h2>
<p>ä½ çš„æ—¥å¸¸å·¥ä½œå¯èƒ½å°±è•´å«ç€ä¸“åˆ©çš„ç§å­ï¼š</p>
<ul>
<li><strong>èšç„¦æ€§èƒ½ç“¶é¢ˆ</strong>ï¼šä½ æ˜¯å¦è®¾è®¡äº†ä¸€ç§å·§å¦™çš„<strong>æ•°æ®åº“è¿æ¥æ± ç®¡ç†æ–¹æ¡ˆ</strong>ï¼Œæ˜¾è‘—é™ä½äº†é«˜å¹¶å‘ä¸‹çš„å“åº”å»¶è¿Ÿï¼Ÿ</li>
<li><strong>è§£å†³ä¸šåŠ¡ä¸€è‡´æ€§</strong>ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä½ æ˜¯å¦å‘æ˜äº†ä¸€ç§<strong>æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆ</strong>ï¼Œç¡®ä¿äº†è·¨æœåŠ¡çš„æ•°æ®å‡†ç¡®ï¼Ÿ</li>
<li><strong>ä¼˜åŒ–èµ„æºè°ƒåº¦</strong>ï¼šä½ æ˜¯å¦æ”¹è¿›äº†<strong>Kubernetesçš„è°ƒåº¦å™¨</strong>ï¼Œä½¿å¾—é›†ç¾¤è®¡ç®—èµ„æºåˆ©ç”¨ç‡å¤§å¹…æå‡ï¼Ÿ</li>
<li><strong>å¢å¼ºç³»ç»Ÿå®‰å…¨</strong>ï¼šä½ æ˜¯å¦è®¾è®¡äº†ä¸€å¥—<strong>APIè®¿é—®æƒé™çš„åŠ¨æ€æ ¡éªŒæœºåˆ¶</strong>ï¼Œæœ‰æ•ˆé˜²å¾¡äº†æœªæˆæƒè®¿é—®ï¼Ÿ</li>
</ul>
<h2 data-id="heading-7">äº”ã€ é‡è¦æé†’</h2>
<ul>
<li><strong>å¯»æ±‚ä¸“ä¸šå¸®åŠ©</strong>ï¼šä¸“åˆ©ç”³è¯·ï¼Œå°¤å…¶æ˜¯æƒåˆ©è¦æ±‚ä¹¦çš„æ’°å†™ï¼Œä¸“ä¸šæ€§æå¼ºã€‚å¼ºçƒˆå»ºè®®ä¸<strong>ä¸“åˆ©ä»£ç†äºº</strong>åˆä½œï¼Œç‰¹åˆ«æ˜¯æ‰¾æœ‰è®¡ç®—æœºè½¯ä»¶é¢†åŸŸç»éªŒçš„ä»£ç†äººï¼Œèƒ½æ˜¾è‘—æé«˜æˆåŠŸç‡ã€‚</li>
<li><strong>æ³¨æ„ç”³è¯·æ—¶æœº</strong>ï¼šåœ¨ç”³è¯·ä¸“åˆ©ä¹‹å‰ï¼Œ<strong>åˆ‡å‹¿åœ¨æŠ€æœ¯ä¼šè®®ã€è®ºå›æˆ–å­¦æœ¯æœŸåˆŠä¸Šè¿‡æ—©å…¬å¼€ä½ çš„æŠ€æœ¯ç»†èŠ‚</strong>ï¼Œå¦åˆ™å¯èƒ½ä¼šç ´åå…¶æ–°é¢–æ€§ï¼Œå¯¼è‡´æ— æ³•æˆæƒã€‚</li>
<li><strong>å…¬å¸æ”¿ç­–ä¸å¥–åŠ±</strong>ï¼šå¾ˆå¤šç§‘æŠ€å…¬å¸è®¾æœ‰ä¸“é—¨çš„ä¸“åˆ©å§”å‘˜ä¼šå’Œå¥–åŠ±æœºåˆ¶ï¼Œé¼“åŠ±å‘˜å·¥ç”³æŠ¥ã€‚ç§¯æäº†è§£å¹¶åˆ©ç”¨å…¬å¸å†…éƒ¨æ”¿ç­–ï¼Œè¿™ä¸ä»…èƒ½ä¿æŠ¤åˆ›æ–°ï¼Œè¿˜å¯èƒ½ä¸ºä½ å¸¦æ¥ä¸°åšçš„å›æŠ¥ã€‚</li>
</ul>
<h2 data-id="heading-8">ç»“è¯­</h2>
<p>å°†åç«¯åˆ›æ–°ç”³è¯·ä¸ºä¸“åˆ©ï¼Œæ˜¯ä¸€ä¸ªå°†æŠ€æœ¯æ™ºæ…§è½¬åŒ–ä¸ºæ³•å¾‹èµ„äº§å’Œå•†ä¸šç«äº‰åŠ›çš„è¿‡ç¨‹ã€‚å®ƒå¹¶éé«˜ä¸å¯æ”€ï¼Œåªè¦ä½ å–„äºå‘ç°ã€å‹¤äºæ€»ç»“ï¼Œå¹¶æ‡‚å¾—è¿ç”¨è§„åˆ™ï¼Œä½ çš„ä»£ç åŒæ ·å¯ä»¥æˆä¸ºå—æ³•å¾‹ä¿æŠ¤çš„å‘æ˜åˆ›é€ ã€‚</p>
<p>å¸Œæœ›æœ¬æ–‡èƒ½ä¸ºä½ æ‰“å¼€ä¸€æ‰‡æ–°çš„å¤§é—¨ã€‚å¦‚æœä½ æ­£åœ¨æŸä¸ªæŠ€æœ¯ç‚¹ä¸Šæœ‰æ‰€çªç ´ï¼Œä¸å¦¨ç°åœ¨å°±æŒ‰ç…§æ–‡ä¸­çš„æ€è·¯è¯„ä¼°ä¸€ä¸‹å®ƒçš„ä¸“åˆ©æ½œåŠ›å§ï¼</p>
<hr/>
<p><strong>å…è´£å£°æ˜</strong>ï¼šæœ¬æ–‡å†…å®¹ä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆä»»ä½•å½¢å¼çš„æ³•å¾‹å»ºè®®ã€‚åœ¨å…·ä½“ç”³è¯·ä¸“åˆ©æ—¶ï¼Œè¯·åŠ¡å¿…å’¨è¯¢å¹¶å§”æ‰˜ä¸“ä¸šçš„ä¸“åˆ©ä»£ç†æœºæ„æˆ–å¾‹å¸ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ–‡å¿ƒ5.0ï¼š2.4ä¸‡äº¿å‚æ•°çš„â€œå…¨èƒ½AIâ€ï¼Œå®ƒçœŸåšåˆ°äº†å—ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572459217811832895</link>    <guid>https://juejin.cn/post/7572459217811832895</guid>    <pubDate>2025-11-15T13:13:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572459217811832895" data-draft-id="7572403510468280363" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ–‡å¿ƒ5.0ï¼š2.4ä¸‡äº¿å‚æ•°çš„â€œå…¨èƒ½AIâ€ï¼Œå®ƒçœŸåšåˆ°äº†å—ï¼Ÿ"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-11-15T13:13:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ–‡å¿ƒ5.0ï¼š2.4ä¸‡äº¿å‚æ•°çš„â€œå…¨èƒ½AIâ€ï¼Œå®ƒçœŸåšåˆ°äº†å—ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T13:13:31.000Z" title="Sat Nov 15 2025 13:13:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å’±ä»¬AIåœˆé‡Œæœ€è¿‘æœ€ç«çš„è¯é¢˜æ˜¯å•¥ï¼Ÿé‚£å¿…é¡»æ˜¯ç™¾åº¦æ–‡å¿ƒå¤§æ¨¡å‹5.0çš„æ¨ªç©ºå‡ºä¸–å•Šï¼è¯´å®è¯ï¼Œåˆšå¬åˆ°è¿™æ•°å­—çš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿæ„£äº†ä¸€ä¸‹â€”â€”2.4ä¸‡äº¿å‚æ•°ï¼Œè¿™ç®€ç›´æ˜¯æŠŠæ•´ä¸ªçŸ¥è¯†å®‡å®™éƒ½å¡è¿›äº†ä¸€ä¸ªå¤§è„‘é‡Œã€‚ä½†å‚æ•°å¤šå°±ä¸€å®šå¥½å—ï¼Ÿæ–‡å¿ƒ5.0æƒ³å‘Šè¯‰æˆ‘ä»¬ï¼Œå®ƒä¸å…‰è¦â€œå¤§â€ï¼Œæ›´è¦â€œåŸç”Ÿå…¨æ¨¡æ€â€çš„æ™ºæ…§ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-15_20.55.23-1024x633.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-15_20.55.23-1024x633.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35c1e4cbd35f46128ec6261b66a43d6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763817210&amp;x-signature=FjeUVmJ5d9b16TSookIzt60jVW8%3D" alt="iShot_2025-11-15_20.55.23" loading="lazy"/></a></p>
<h3 data-id="heading-0">ä¸åªæ˜¯â€œå¤§â€ï¼Œæ›´æ˜¯â€œç²¾æ˜â€çš„å¤§è„‘</h3>
<p>2.4ä¸‡äº¿å‚æ•°ï¼Œè¿™ä¸ªæ•°å­—å¬èµ·æ¥å¾ˆå”¬äººï¼Œæ¯•ç«Ÿå¤§å¤šæ•°äººå¯¹ä¸‡äº¿è¿™ä¸ªé‡çº§æ²¡ä»€ä¹ˆæ¦‚å¿µã€‚ä½†å¦‚æœæˆ‘å‘Šè¯‰ä½ ï¼Œè¿™ä¸ªåºå¤§çš„æ™ºèƒ½ä½“æ¯æ¬¡è§£å†³é—®é¢˜æ—¶ï¼Œåªä¼šæ¿€æ´»å…¶ä¸­ä¸åˆ°3%çš„â€œä¸“å®¶â€æ¥å·¥ä½œï¼Œä½ æ˜¯ä¸æ˜¯ä¼šè§‰å¾—æ›´æœ‰è¶£äº†ï¼Ÿ</p>
<p>è¿™å¯ä¸æ˜¯ä»€ä¹ˆé­”æœ¯ï¼Œè€Œæ˜¯æ–‡å¿ƒ5.0é‡‡ç”¨çš„â€œè¶…ç¨€ç–æ··åˆä¸“å®¶ï¼ˆMoEï¼‰æ¶æ„â€åœ¨å‘æŒ¥ä½œç”¨ã€‚ä½ å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆä¸€ä¸ªæ‹¥æœ‰æ— æ•°é¡¶å°–é¡¾é—®çš„æ™ºå›Šå›¢ï¼Œå½“æ¥åˆ°ä¸€ä¸ªå…·ä½“ä»»åŠ¡æ—¶ï¼Œç³»ç»Ÿä¼šç²¾å‡†åœ°æŒ‘é€‰å‡ºæœ€æ“…é•¿è¿™ä¸ªé¢†åŸŸçš„å‡ ä½ä¸“å®¶æ¥å‡ºè°‹åˆ’ç­–ï¼Œè€Œä¸æ˜¯è®©æ‰€æœ‰äººéƒ½å‚ä¸ã€‚è¿™æ ·ä¸€æ¥ï¼Œå®ƒæ—¢èƒ½æ‹¥æœ‰æµ·é‡çš„çŸ¥è¯†å‚¨å¤‡ï¼Œåˆèƒ½ä¿è¯æ¯æ¬¡æ€è€ƒéƒ½é«˜æ•ˆã€è¿…é€Ÿã€‚è¿™ç®€ç›´å°±æ˜¯æŠŠâ€œç”¨å¯¹äººâ€çš„æ™ºæ…§å‘æŒ¥åˆ°äº†æè‡´ï¼Œå½»åº•å‘Šåˆ«äº†â€œå¤§è€Œç¬¨é‡â€çš„åˆ»æ¿å°è±¡ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-15_20.55.30-1024x581.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-15_20.55.30-1024x581.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a46ff3811a644582aeedf930be7a3be8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763817210&amp;x-signature=gRSKxQ8GlErAbWv1Akp1pb86ae0%3D" alt="iShot_2025-11-15_20.55.30" loading="lazy"/></a></p>
<h3 data-id="heading-1">å‘Šåˆ«â€œæ‹¼æ¥æ€ªâ€ï¼šçœŸæ­£â€œçœ‹å¬æ‡‚â€çš„AI</h3>
<p>å¦‚æœè¯´å‚æ•°è§„æ¨¡æ˜¯ä½“é‡ï¼Œé‚£â€œåŸç”Ÿå…¨æ¨¡æ€â€å°±æ˜¯æ–‡å¿ƒ5.0çœŸæ­£çš„çµé­‚ã€‚åœ¨è¿‡å»ï¼Œå¾ˆå¤šæ‰€è°“çš„å¤šæ¨¡æ€æ¨¡å‹ï¼Œå…¶å®æ›´åƒæ˜¯æŠŠæ–‡æœ¬ã€å›¾ç‰‡ã€éŸ³é¢‘æ¨¡å‹åæœŸâ€œæ‹¼æ¥â€èµ·æ¥çš„ï¼Œå®ƒä»¬å„è‡ªä¸ºæˆ˜ï¼Œç†è§£èµ·æ¥éš¾å…æœ‰ç‚¹éš”é˜‚ã€‚</p>
<p>ä½†æ–‡å¿ƒ5.0ä¸ä¸€æ ·ï¼Œå®ƒä»â€œå¨˜èƒé‡Œâ€â€”â€”ä¹Ÿå°±æ˜¯æ¨¡å‹è®­ç»ƒçš„ä¸€å¼€å§‹ï¼Œå°±è®©æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ã€è§†é¢‘è¿™äº›ä¸åŒæ¨¡æ€çš„æ•°æ®åœ¨ç»Ÿä¸€çš„æ¶æ„ä¸‹ä¸€èµ·å­¦ä¹ ã€ä¸€èµ·æˆé•¿ã€‚è¿™å°±åƒæˆ‘ä»¬äººç±»ä¸€æ ·ï¼ŒåŒæ—¶åŠ¨ç”¨è§†è§‰ã€å¬è§‰ã€è¯­è¨€å»ç†è§£è¿™ä¸ªä¸–ç•Œï¼Œçœ‹åˆ°ä¸€åªé¸Ÿåœ¨å”±æ­Œï¼Œæˆ‘ä»¬èƒ½ç«‹åˆ»å°†å®ƒçš„å½¢è±¡å’Œå£°éŸ³è”ç³»èµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªå®Œæ•´çš„è®¤çŸ¥ã€‚æ–‡å¿ƒ5.0çš„ç›®æ ‡ï¼Œå°±æ˜¯è®©AIä¹Ÿèƒ½æ‹¥æœ‰è¿™ç§ä»åº•å±‚å°±ä¸€ä½“åŒ–çš„ç†è§£ä¸ç”Ÿæˆèƒ½åŠ›ï¼Œè€Œä¸æ˜¯ç®€å•çš„â€œçœ‹å›¾è¯´è¯â€æˆ–â€œå¬å£°ä½œè¯—â€ã€‚è¿™ç§â€œä¸€ä½“åŒ–â€æ„å‘³ç€å®ƒèƒ½æ›´æœ¬è´¨ã€æ›´ç²¾å‡†åœ°ç†è§£ä½ çš„æ„å›¾ï¼Œä¹Ÿèƒ½ç”Ÿæˆæ›´è¿è´¯ã€æ›´å¯Œæœ‰æƒ³è±¡åŠ›çš„å†…å®¹ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-15_20.55.40-1024x537.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-15_20.55.40-1024x537.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/634c05740e764fdd867bd08edc2cfc81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763817210&amp;x-signature=iXyCD0EFTv%2Bnk%2BWKI5vKNTlTKZ0%3D" alt="iShot_2025-11-15_20.55.40" loading="lazy"/></a></p>
<h3 data-id="heading-2">å®åŠ›å‡ ä½•ï¼Ÿå®æµ‹ä¸è¯„æµ‹è§çœŸç« </h3>
<p>é‚£ä¹ˆï¼Œè¿™æ ·ä¸€ä¸ªâ€œå¤§è€Œç²¾æ˜â€åˆâ€œåŸç”Ÿå…¨æ¨¡æ€â€çš„æ¨¡å‹ï¼Œç©¶ç«Ÿèƒ½åšäº›ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>æ ¹æ®å®˜æ–¹å…¬å¸ƒçš„æ•°æ®ï¼Œæ–‡å¿ƒ5.0åœ¨40å¤šé¡¹æƒå¨åŸºå‡†æµ‹è¯•ä¸­ï¼Œå…¶è¯­è¨€ä¸å¤šæ¨¡æ€ç†è§£èƒ½åŠ›å·²ç»èƒ½ä¸Gemini-2.5-Proã€GPT-5-Highè¿™äº›å›½é™…é¡¶å°–æ¨¡å‹<strong>æŒå¹³</strong>ã€‚æ›´è®©äººå…´å¥‹çš„æ˜¯ï¼Œå®ƒåœ¨LMArenaå¤§æ¨¡å‹ç«æŠ€åœºçš„æ–‡æœ¬ä»»åŠ¡è¯„æµ‹ä¸­ï¼Œä½åˆ—å…¨çƒå¹¶åˆ—ç¬¬äºŒã€ä¸­å›½ç¬¬ä¸€ï¼</p>
<p>åª’ä½“çš„å®æµ‹ä¹Ÿé€éœ²å‡ºä¸å°‘äº®ç‚¹ï¼š</p>
<ul>
<li><strong>è§†é¢‘ç†è§£é«˜æ‰‹</strong>ï¼šå®ƒèƒ½ç²¾å‡†åˆ†æã€Šåä¾¦æ¢æŸ¯å—ã€‹ä¸­å¤æ‚çš„ç ´æ¡ˆé€»è¾‘é“¾ï¼Œç”šè‡³èƒ½æ€»ç»“é•¿è¾¾35åˆ†é’Ÿçš„è‹±æ–‡å¯¹è¯è§†é¢‘çš„æ ¸å¿ƒè§‚ç‚¹å’Œå‘è¨€è€…ç«‹åœºï¼Œè¿™å¯ä¸æ˜¯ç®€å•çš„å†…å®¹è¯†åˆ«ï¼Œè€Œæ˜¯æ·±å±‚æ¬¡çš„é€»è¾‘åˆ†æå’Œæ¦‚æ‹¬èƒ½åŠ›ã€‚</li>
<li><strong>åˆ›æ„ç¼–ç¨‹å¤§å¸ˆ</strong>ï¼šä½ éšå£ä¸€å¥â€œæŠŠå¯¹æ‰‹çš„æ£‹å­ç›´æ¥æ‰”è¿›ä»€åˆ¹æµ·â€ï¼Œå®ƒå°±èƒ½ç†è§£ä½ å¤©é©¬è¡Œç©ºçš„æ„å›¾ï¼Œç”Ÿæˆä¸€ä¸ªå¯è¿è¡Œçš„â€œæŠ€èƒ½äº”å­æ£‹â€ç½‘é¡µæ¸¸æˆä»£ç ã€‚è¿™æƒ³è±¡åŠ›ä¸æ‰§è¡ŒåŠ›ï¼ŒçœŸæ˜¯è®©äººæ‹æ¡ˆå«ç»ã€‚</li>
<li><strong>é«˜æƒ…å•†æ²Ÿé€šè€…</strong>ï¼šåœ¨å¤„ç†æƒ…æ„Ÿç±»é—®é¢˜æ—¶ï¼Œæ–‡å¿ƒ5.0çš„å›å¤ä¸å†æ˜¯å†·å†°å†°çš„å¥—è¯ï¼Œè€Œæ˜¯å±•ç°å‡ºæ›´å¼ºçš„åŒç†å¿ƒå’Œç»†è…»æ„Ÿï¼Œå°±åƒä¸€ä¸ªçœŸæ­£çš„â€œé«˜æƒ…å•†â€æœ‹å‹åœ¨ä¸ä½ äº¤æµã€‚</li>
</ul>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-15_20.55.45-1024x389.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-15_20.55.45-1024x389.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95a906475fe04196a55ed6acfd161a06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763817210&amp;x-signature=9pGbqMPHsrvqcpATSB1sXiUYcxM%3D" alt="iShot_2025-11-15_20.55.45" loading="lazy"/></a></p>
<h3 data-id="heading-3">èµ°å‘ç°å®ï¼šè§¦æ‰‹å¯åŠçš„AIæ™ºèƒ½ä½“</h3>
<p>æ–‡å¿ƒå¤§æ¨¡å‹5.0å¹¶éæŸä¹‹é«˜é˜çš„å®éªŒå®¤äº§å“ã€‚æ™®é€šç”¨æˆ·ç°åœ¨å°±èƒ½é€šè¿‡**â€œæ–‡å¿ƒä¸€è¨€Appâ€<strong>ä½“éªŒåˆ°å®ƒçš„Previewç‰ˆæœ¬ã€‚è€Œå¯¹äºæˆ‘ä»¬å¼€å‘è€…å’Œä¼ä¸šç”¨æˆ·æ¥è¯´ï¼Œåˆ™å¯ä»¥é€šè¿‡</strong>ç™¾åº¦åƒå¸†å¤§æ¨¡å‹å¹³å°**è°ƒç”¨å…¶APIæœåŠ¡ï¼Œå°†è¿™äº›å¼ºå¤§çš„èƒ½åŠ›é›†æˆåˆ°æˆ‘ä»¬è‡ªå·±çš„äº§å“å’Œè§£å†³æ–¹æ¡ˆä¸­ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2025%2F11%2FiShot_2025-11-15_20.56.09-1024x296.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2025/11/iShot_2025-11-15_20.56.09-1024x296.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4038c0f285348bd83deebbd3bbabfb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763817210&amp;x-signature=VHUkK%2ByOwYaR4%2Fa3nZFT8qJcI%2Fo%3D" alt="iShot_2025-11-15_20.56.09" loading="lazy"/></a></p>
<p>ç™¾åº¦åˆ›å§‹äººæå½¦å®æ›¾è¯´è¿‡ï¼Œâ€œæ™ºèƒ½æœ¬èº«æ˜¯æœ€å¤§çš„åº”ç”¨ï¼Œè€ŒæŠ€æœ¯è¿­ä»£é€Ÿåº¦æ˜¯å”¯ä¸€çš„æŠ¤åŸæ²³â€ã€‚æ–‡å¿ƒ5.0çš„å‘å¸ƒï¼Œæ— ç–‘æ˜¯ç™¾åº¦åœ¨è¿™æ¡æŠ¤åŸæ²³ä¸Šåˆä¸€æ¬¡æ·±æŒ–ã€‚å®ƒä¸ä»…ä»…æ˜¯ä¸€ä¸ªæŠ€æœ¯ä¸Šçš„çªç ´ï¼Œæ›´æ˜¯ä¸ºæˆ‘ä»¬æç»˜äº†ä¸€ä¸ªæ›´å…·æƒ³è±¡åŠ›çš„AIæœªæ¥ï¼šä¸€ä¸ªä¸å†å—é™äºå•ä¸€æ¨¡æ€ã€èƒ½çœŸæ­£åƒäººä¸€æ ·æ€è€ƒã€ç†è§£å’Œåˆ›é€ çš„æ™ºèƒ½æ—¶ä»£ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»åç«¯å¼€å‘è€…åˆ°Agentå·¥ç¨‹å¸ˆï¼šä¸€ä»½ç³»ç»Ÿæ€§çš„å­¦ä¹ æŒ‡å—]]></title>    <link>https://juejin.cn/post/7572459217811865663</link>    <guid>https://juejin.cn/post/7572459217811865663</guid>    <pubDate>2025-11-15T13:25:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572459217811865663" data-draft-id="7572459757107363894" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»åç«¯å¼€å‘è€…åˆ°Agentå·¥ç¨‹å¸ˆï¼šä¸€ä»½ç³»ç»Ÿæ€§çš„å­¦ä¹ æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-15T13:25:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="oioihoii"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»åç«¯å¼€å‘è€…åˆ°Agentå·¥ç¨‹å¸ˆï¼šä¸€ä»½ç³»ç»Ÿæ€§çš„å­¦ä¹ æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    oioihoii
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T13:25:50.000Z" title="Sat Nov 15 2025 13:25:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸‹é¢çš„å†…å®¹æ˜¯ä¹‹å‰ç”¨AIç”Ÿæˆçš„ï¼Œæ ¹æ®è¿™ä»½AIå¤§çº²ï¼Œæˆ‘å·²ç»åˆ°äº†ç¬¬äºŒé˜¶æ®µï¼Œæˆ‘æ„Ÿè§‰è¿™ä»½è·¯çº¿å›¾ç¡®å®åˆ‡å®å¯è¡Œï¼Œæ‰€ä»¥ä¸“é—¨ç¿»å‡ºæ¥åšåˆ†äº«ã€‚</p>
</blockquote>
<h3 data-id="heading-0">ä¸ºä»€ä¹ˆåç«¯å¼€å‘è€…æ˜¯å­¦ä¹ Agentçš„ç»ä½³äººé€‰ï¼Ÿ</h3>
<p>å¦‚æœä½ æ˜¯ä¸€ååç«¯å¼€å‘è€…ï¼Œæ­å–œä½ ï¼Œä½ å·²ç»å…·å¤‡äº†å­¦ä¹ AgentæŠ€æœ¯çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>ç³»ç»Ÿæ¶æ„æ€ç»´</strong>ï¼šä½ èƒ½ç†è§£å¤æ‚ç³»ç»Ÿç”±æ¨¡å—ç»„æˆå¹¶è®¾è®¡å…¶äº¤äº’ï¼Œè€ŒAgentæœ¬èº«å°±æ˜¯ä¸€ç§â€œå¾®ç³»ç»Ÿâ€ã€‚</li>
<li><strong>APIè®¾è®¡ä¸é›†æˆä¸“å®¶</strong>ï¼šAgentçš„æ ¸å¿ƒèƒ½åŠ›ä¹‹ä¸€å°±æ˜¯è°ƒç”¨å·¥å…·ï¼ˆToolï¼‰ï¼Œè€Œè¿™æœ¬è´¨ä¸Šå°±æ˜¯APIè°ƒç”¨ï¼Œè¿™æ˜¯ä½ çš„è€æœ¬è¡Œã€‚</li>
<li><strong>å¹¶å‘ä¸å¼‚æ­¥ç¼–ç¨‹é«˜æ‰‹</strong>ï¼šAgentç»å¸¸éœ€è¦å¤„ç†å¤šæ­¥éª¤ä»»åŠ¡æˆ–å¹¶å‘è¯·æ±‚ï¼Œä½ å¯¹å¼‚æ­¥æµç¨‹çš„æ§åˆ¶èƒ½åŠ›è‡³å…³é‡è¦ã€‚</li>
<li><strong>å·¥ç¨‹åŒ–ä¸è¿ç»´ä¸“å®¶</strong>ï¼šä½ çŸ¥é“å¦‚ä½•ç¼–å†™å¯æµ‹è¯•ã€å¯éƒ¨ç½²ã€å¯ç›‘æ§çš„ä»£ç ï¼Œè¿™æ­£æ˜¯PoCæ¼”ç¤ºä¸ç”Ÿäº§çº§Agentç³»ç»Ÿçš„ä¸»è¦å·®è·ã€‚</li>
</ol>
<p>è¿™ä»½æŒ‡å—å°†ä¸ºä½ è§„åˆ’ä¸€æ¡ä»å…¥é—¨åˆ°ç²¾é€šçš„æ¸…æ™°è·¯å¾„ã€‚</p>
<h3 data-id="heading-1">å­¦ä¹ è·¯çº¿å›¾ï¼šå››ä¸ªé˜¶æ®µï¼Œä»å…¥é—¨åˆ°ä¸“å®¶</h3>
<p>æˆ‘ä»¬å»ºè®®éµå¾ªä»¥ä¸‹å››ä¸ªé˜¶æ®µï¼Œå¾ªåºæ¸è¿›ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½åŒ…å«æ˜ç¡®çš„ç›®æ ‡ã€æŠ€æœ¯è¦ç‚¹å’Œå®è·µé¡¹ç›®ã€‚</p>
<hr/>
<h4 data-id="heading-2"><strong>é˜¶æ®µä¸€ï¼šåŸºç¡€è®¤çŸ¥ä¸ç¯å¢ƒæ­å»ºï¼ˆ1-2å‘¨ï¼‰</strong></h4>
<p><strong>ç›®æ ‡</strong>ï¼šå»ºç«‹å¯¹Agentçš„æ ¸å¿ƒè®¤çŸ¥ï¼Œæ­å»ºå¼€å‘ç¯å¢ƒã€‚</p>
<p><strong>å­¦ä¹ å†…å®¹</strong>ï¼š</p>
<ul>
<li><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼š
<ul>
<li><strong>Agent</strong>ï¼šèƒ½æ„ŸçŸ¥ç¯å¢ƒã€å†³ç­–å¹¶æ‰§è¡ŒåŠ¨ä½œä»¥è¾¾æˆç›®æ ‡çš„ç¨‹åºã€‚</li>
<li><strong>LLM</strong>ï¼šAgentçš„â€œå¤§è„‘â€ï¼Œè´Ÿè´£ç†è§£ä¸æ¨ç†ã€‚</li>
<li><strong>Prompt Engineering</strong>ï¼šä¸LLMå¤§è„‘é«˜æ•ˆæ²Ÿé€šçš„â€œè¯­è¨€â€ã€‚</li>
<li><strong>Tool/Function Calling</strong>ï¼šAgentçš„â€œæ‰‹å’Œè„šâ€ï¼Œç”¨äºæ‰§è¡Œå…·ä½“æ“ä½œï¼ˆå¦‚è°ƒç”¨APIã€æŸ¥è¯¢DBï¼‰ã€‚</li>
</ul>
</li>
<li><strong>æŠ€æœ¯é€‰å‹</strong>ï¼š
<ul>
<li><strong>è¯­è¨€</strong>ï¼šé¦–é€‰<strong>Python</strong>ï¼Œå› å…¶æ‹¥æœ‰æœ€æˆç†Ÿçš„AIç”Ÿæ€ã€‚</li>
<li><strong>æ¡†æ¶</strong>ï¼š<strong>LangChain</strong>ï¼Œå½“å‰æœ€ä¸»æµçš„Agentåº”ç”¨å¼€å‘æ¡†æ¶ã€‚</li>
<li><strong>æ¨¡å‹API</strong>ï¼šä»<strong>OpenAI GPT-4o/3.5-Turbo</strong>å¼€å§‹ï¼Œå…¶å¯¹Function Callingæ”¯æŒè‰¯å¥½ã€‚</li>
</ul>
</li>
</ul>
<p><strong>åŠ¨æ‰‹å®è·µ</strong>ï¼š</p>
<ol>
<li>é…ç½®Pythonç¯å¢ƒï¼Œå®‰è£…<code>langchain</code>ã€<code>langchain-openai</code>ç­‰æ ¸å¿ƒåº“ã€‚</li>
<li>è·å–OpenAI API Keyã€‚</li>
<li>ç¼–å†™ä¸€ä¸ªæœ€ç®€å•çš„è„šæœ¬ï¼ŒæˆåŠŸè°ƒç”¨ChatGPT APIã€‚</li>
</ol>
<hr/>
<h4 data-id="heading-3"><strong>é˜¶æ®µäºŒï¼šæŒæ¡æ ¸å¿ƒç»„ä»¶ä¸ç®€å•å®è·µï¼ˆ2-3å‘¨ï¼‰</strong></h4>
<p><strong>ç›®æ ‡</strong>ï¼šæ·±å…¥ç†è§£LangChainæ ¸å¿ƒæ¨¡å—ï¼Œæ„å»ºèƒ½è°ƒç”¨å·¥å…·çš„å•ä¸€Agentã€‚</p>
<p><strong>å­¦ä¹ å†…å®¹</strong>ï¼š</p>
<ul>
<li><strong>LangChainæ ¸å¿ƒç»„ä»¶</strong>ï¼š
<ul>
<li><strong>Models</strong>ï¼šæ¥å…¥ä¸åŒLLMã€‚</li>
<li><strong>Prompts</strong>ï¼šä½¿ç”¨<code>ChatPromptTemplate</code>æ„å»ºé«˜è´¨é‡çš„å¯¹è¯æç¤ºã€‚</li>
<li><strong>Chains</strong>ï¼šå°†å¤šä¸ªæ­¥éª¤ä¸²è”æˆå·¥ä½œæµã€‚</li>
<li><strong>Tools</strong>ï¼š<strong>ä½ çš„æ ¸å¿ƒä¼˜åŠ¿åŒº</strong>ï¼å­¦ä¹ å¦‚ä½•å°†ä»»æ„å‡½æ•°æˆ–HTTP APIå°è£…æˆAgentå¯è°ƒç”¨çš„Toolã€‚</li>
<li><strong>Agents</strong>ï¼šç†è§£å†…ç½®Agentç±»å‹ï¼ˆå¦‚<code>OPENAI_FUNCTIONS</code>ï¼‰åŠå…¶æ‰§è¡Œå¾ªç¯ã€‚</li>
</ul>
</li>
</ul>
<p><strong>é¡¹ç›®å®æˆ˜</strong>ï¼š</p>
<ul>
<li><strong>é¡¹ç›®1ï¼šæ™ºèƒ½å¤©æ°”æŸ¥è¯¢åŠ©æ‰‹</strong>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šç”¨æˆ·è¾“å…¥â€œä¸Šæµ·å¤©æ°”å¦‚ä½•ï¼Ÿâ€ï¼ŒAgentè‡ªåŠ¨è°ƒç”¨å¤©æ°”APIå¹¶è¿”å›ç»“æœã€‚</li>
<li><strong>æŠ€æœ¯è¦ç‚¹</strong>ï¼šå°è£…å¤©æ°”APIä¸ºToolï¼Œä½¿ç”¨Agentè¿›è¡Œè§„åˆ’å’Œè°ƒç”¨ã€‚</li>
</ul>
</li>
<li><strong>é¡¹ç›®2ï¼šè‡ªç„¶è¯­è¨€æ•°æ®åº“æŸ¥è¯¢åŠ©æ‰‹</strong>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šç”¨æˆ·ç”¨è‡ªç„¶è¯­è¨€æŸ¥è¯¢æ•°æ®åº“ï¼Œå¦‚â€œæŸ¥è¯¢é”€å”®é¢æœ€é«˜çš„äº§å“â€ã€‚</li>
<li><strong>æŠ€æœ¯è¦ç‚¹</strong>ï¼šå°è£…SQLæŸ¥è¯¢ä¸ºToolï¼Œ<strong>é‡ç‚¹å®è·µSQLå®‰å…¨æ ¡éªŒ</strong>ï¼Œé˜²æ­¢SQLæ³¨å…¥ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h4 data-id="heading-4"><strong>é˜¶æ®µä¸‰ï¼šè¿›é˜¶æ¦‚å¿µä¸å¤æ‚ç³»ç»Ÿæ„å»ºï¼ˆ3-4å‘¨ï¼‰</strong></h4>
<p><strong>ç›®æ ‡</strong>ï¼šæ„å»ºå¤šæ­¥éª¤ã€æœ‰çŠ¶æ€ã€å…·å¤‡ä¸“ä¸šçŸ¥è¯†çš„å¤æ‚Agentç³»ç»Ÿã€‚</p>
<p><strong>å­¦ä¹ å†…å®¹</strong>ï¼š</p>
<ul>
<li><strong>RAG</strong>ï¼šæ£€ç´¢å¢å¼ºç”Ÿæˆã€‚è®©Agentå…·å¤‡è®¿é—®ç§æœ‰çŸ¥è¯†åº“çš„èƒ½åŠ›ã€‚
<ul>
<li>æ ¸å¿ƒæµç¨‹ï¼šæ–‡æ¡£åŠ è½½ -&gt; åˆ‡åˆ† -&gt; å‘é‡åŒ– -&gt; å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“ï¼ˆå¦‚ChromaDB/FAISSï¼‰-&gt; æ£€ç´¢ã€‚</li>
</ul>
</li>
<li><strong>LangGraph</strong>ï¼š<strong>æ„å»ºå¤æ‚Agentçš„ç»ˆæåˆ©å™¨</strong>ã€‚å®ƒç”¨å›¾çš„æ¦‚å¿µæ¥å®šä¹‰å…·æœ‰çŠ¶æ€ã€å¾ªç¯å’Œåˆ†æ”¯çš„å¤æ‚å·¥ä½œæµï¼Œéå¸¸é€‚åˆå®ç°ReActæ¨¡å¼ã€‚</li>
</ul>
<p><strong>é¡¹ç›®å®æˆ˜</strong>ï¼š</p>
<ul>
<li><strong>é¡¹ç›®3ï¼šæŠ€æœ¯æ–‡æ¡£æ™ºèƒ½é—®ç­”æœºå™¨äººï¼ˆRAGï¼‰</strong>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šåŸºäºå…¬å¸/é¡¹ç›®çš„æŠ€æœ¯æ–‡æ¡£ï¼ˆMarkdown/PDFï¼‰ï¼Œå›ç­”ç²¾å‡†çš„æŠ€æœ¯é—®é¢˜ã€‚</li>
<li><strong>æŠ€æœ¯è¦ç‚¹</strong>ï¼šæ­å»ºå®Œæ•´çš„RAGç®¡é“ï¼Œé›†æˆå‘é‡æ•°æ®åº“è¿›è¡Œç›¸ä¼¼æ€§æ£€ç´¢ã€‚</li>
</ul>
</li>
<li><strong>é¡¹ç›®4ï¼šè‡ªä¸»ç ”ç©¶åŠ©æ‰‹ï¼ˆLangGraphï¼‰</strong>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šç»™å®šä¸€ä¸ªå¤æ‚ä¸»é¢˜ï¼ŒAgentèƒ½è‡ªåŠ¨è§„åˆ’æ­¥éª¤ï¼ˆæœç´¢ -&gt; é˜…è¯» -&gt; æ€»ç»“ -&gt; æŠ¥å‘Šï¼‰ã€‚</li>
<li><strong>æŠ€æœ¯è¦ç‚¹</strong>ï¼šä½¿ç”¨LangGraphå®šä¹‰çŠ¶æ€å’ŒèŠ‚ç‚¹ï¼Œæ„å»ºä¸€ä¸ªå¯æ§çš„ã€å¤šæ­¥éª¤çš„è‡ªä¸»Agentã€‚<strong>æ­¤å¤„å¯å®Œç¾è¿ç”¨ä½ çš„å¾®æœåŠ¡ç¼–æ’ç»éªŒ</strong>ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h4 data-id="heading-5"><strong>é˜¶æ®µå››ï¼šå·¥ç¨‹åŒ–ã€ä¼˜åŒ–ä¸ç”Ÿäº§éƒ¨ç½²ï¼ˆé•¿æœŸï¼‰</strong></h4>
<p><strong>ç›®æ ‡</strong>ï¼šå°†Agentç³»ç»Ÿæ‰“ç£¨è‡³ç”Ÿäº§çº§åˆ«ã€‚</p>
<p><strong>å­¦ä¹ å†…å®¹</strong>ï¼š</p>
<ul>
<li><strong>å¯è§‚æµ‹æ€§</strong>ï¼š
<ul>
<li>ä½¿ç”¨<strong>LangSmith</strong>å¯¹Agentçš„æ€è€ƒè¿‡ç¨‹ã€å·¥å…·è°ƒç”¨ã€è€—æ—¶å’Œæˆæœ¬è¿›è¡Œå…¨æ–¹ä½è¿½è¸ªå’Œè°ƒè¯•ã€‚</li>
<li>å»ºç«‹ä¸šåŠ¡æŒ‡æ ‡ï¼ˆå¦‚ä»»åŠ¡å®Œæˆç‡ï¼‰æ¥è¯„ä¼°Agentæ€§èƒ½ã€‚</li>
</ul>
</li>
<li><strong>ä¼˜åŒ–</strong>ï¼š
<ul>
<li><strong>ç¼“å­˜</strong>ï¼šå¯¹Embeddingå’ŒLLMå“åº”è¿›è¡Œç¼“å­˜ä»¥é™ä½æˆæœ¬ä¸å»¶è¿Ÿã€‚</li>
<li><strong>é™æµä¸é™çº§</strong>ï¼šä¿éšœLLM APIçš„ç¨³å®šæ€§å’ŒæœåŠ¡çš„éŸ§æ€§ã€‚</li>
<li><strong>æ¨¡å‹é€‰å‹</strong>ï¼šæ¢ç´¢æˆæœ¬æ•ˆç›Šæ›´é«˜çš„å¼€æºæ¨¡å‹ï¼ˆå¦‚é€šè¿‡Ollamaéƒ¨ç½²Llamaã€Qwenç­‰ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>éƒ¨ç½²</strong>ï¼š
<ul>
<li>ä½¿ç”¨<strong>FastAPI</strong>å°†Agentå°è£…æˆRESTful APIã€‚</li>
<li>ä½¿ç”¨<strong>Docker</strong>å®¹å™¨åŒ–åº”ç”¨ã€‚</li>
<li>åœ¨<strong>Kubernetes</strong>ä¸Šéƒ¨ç½²ï¼Œå®ç°å¼¹æ€§ä¼¸ç¼©ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-6">ç»™åç«¯å¼€å‘è€…çš„æ ¸å¿ƒå»ºè®®</h3>
<ol>
<li><strong>å‘æŒ¥ä½ çš„å·¥ç¨‹ä¼˜åŠ¿</strong>ï¼šå½“ä½ æ„å»ºAgentæ—¶ï¼Œä½ ä¸ä»…ä»…æ˜¯åœ¨å†™Promptï¼Œä½ æ˜¯åœ¨<strong>è®¾è®¡ä¸€ä¸ªç³»ç»Ÿ</strong>ã€‚ç”¨ä½ ç†Ÿæ‚‰çš„æ¶æ„æ¨¡å¼ã€è®¾è®¡åŸåˆ™å»æ€è€ƒAgentçš„å„ä¸ªç»„ä»¶ã€‚</li>
<li><strong>ä»åšä¸­å­¦</strong>ï¼šAgentæŠ€æœ¯å®è·µæ€§æå¼ºã€‚ä¸è¦åœç•™åœ¨ç†è®ºï¼Œä»ç¬¬ä¸€ä¸ªå°é¡¹ç›®å¼€å§‹æ•²ä»£ç ï¼Œé‡åˆ°çš„æ¯ä¸€ä¸ªé—®é¢˜éƒ½æ˜¯æœ€å¥½çš„å­¦ä¹ ææ–™ã€‚</li>
<li><strong>æ‹¥æŠ±ç¤¾åŒº</strong>ï¼šLangChainæ–‡æ¡£è¯¦å°½ï¼ŒDiscordç¤¾åŒºæ´»è·ƒã€‚é‡åˆ°é—®é¢˜æ—¶ï¼Œè¿™äº›éƒ½æ˜¯å®è´µçš„èµ„æºã€‚</li>
</ol>
<p>AgentæŠ€æœ¯æ­£åœ¨è¿…é€Ÿæ”¹å˜è½¯ä»¶ä¸ä¸–ç•Œçš„äº¤äº’æ–¹å¼ã€‚ä½œä¸ºä¸€ååç«¯å¼€å‘è€…ï¼Œä½ æ‰‹æ¡ç³»ç»Ÿå·¥ç¨‹çš„é’¥åŒ™ï¼Œå¿…å°†èƒ½åœ¨è¿™åœºå˜é©ä¸­æ„å»ºå‡ºç¨³å®šã€å¼ºå¤§ä¸”çœŸæ­£æœ‰ç”¨çš„æ™ºèƒ½ç³»ç»Ÿã€‚</p>
<p><strong>ç¥ä½ å­¦ä¹ é¡ºåˆ©ï¼Œå¼€å¯ä½ çš„Agentå·¥ç¨‹å¸ˆä¹‹æ—…ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MinIO ä¸å†â€œå¼€æ”¾â€ï¼ŒRustFS èƒ½å¦æˆä¸ºæ›´ä¼˜é€‰æ‹©ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572459757107396662</link>    <guid>https://juejin.cn/post/7572459757107396662</guid>    <pubDate>2025-11-15T13:29:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572459757107396662" data-draft-id="7572459217811882047" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MinIO ä¸å†â€œå¼€æ”¾â€ï¼ŒRustFS èƒ½å¦æˆä¸ºæ›´ä¼˜é€‰æ‹©ï¼Ÿ"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-11-15T13:29:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çš®çš®æ—551"/> <meta itemprop="url" content="https://juejin.cn/user/2447981921436084"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MinIO ä¸å†â€œå¼€æ”¾â€ï¼ŒRustFS èƒ½å¦æˆä¸ºæ›´ä¼˜é€‰æ‹©ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2447981921436084/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çš®çš®æ—551
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T13:29:08.000Z" title="Sat Nov 15 2025 13:29:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿‘å¹´æ¥ï¼ŒMinIO çš„å•†ä¸šåŒ–æ­¥ä¼ä¸æ–­åŠ é€Ÿï¼Œå…¶ä¸€ç³»åˆ—æ“ä½œ<strong>ä»ä¿®æ”¹å¼€æºåè®®åˆ°é™åˆ¶å¼€æºç‰ˆæœ¬åŠŸèƒ½</strong>Â â€”â€”è®©è®¸å¤šå¿ å®ç”¨æˆ·æ„Ÿåˆ°ä¸å®‰ã€‚æ›¾ç»é‚£ä¸ªå¼€æ”¾ã€è‡ªç”±çš„ MinIO ä¼¼ä¹æ­£æ¸è¡Œæ¸è¿œï¼Œè¿™è®©ä¸šç•Œå¼€å§‹è¿«åˆ‡å¯»æ‰¾ä¸€ä¸ªæ›´å¼€æ”¾ã€å¯¹å•†ä¸šæ›´å‹å¥½ã€æ›´çº¯ç²¹çš„å¼€æºæ›¿ä»£æ–¹æ¡ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b6698768ef14913bed354b38c6bfae3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55qu55qu5p6XNTUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763818148&amp;x-signature=OP%2FbGaUmke%2BHb18BWV3umsbtXlY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾ç‰‡</p>
<p>åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼ŒRustFS åº”è¿è€Œç”Ÿã€‚<strong>å®ƒä¸ä»…æ˜¯ä¸€ä¸ªé›„å¿ƒå‹ƒå‹ƒçš„ MinIO å¼€æºå¹³æ›¿ï¼Œæ›´ä»£è¡¨äº†ä¸€æ¡åšæŒè‡ªä¸»å¯æ§çš„æŠ€æœ¯è·¯çº¿</strong>Â ã€‚ä¸ºäº†æ›´ç›´è§‚åœ°å±•ç¤º RustFS çš„ä»·å€¼ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db247a0dd12f4d59be0337fe2adc5106~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55qu55qu5p6XNTUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763818148&amp;x-signature=rFoINCL4%2FnjwIBEz7%2BdcsciUIjs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾ç‰‡</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f87184ec965949f0bd746d59956ec046~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55qu55qu5p6XNTUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763818148&amp;x-signature=h6AvnbJo9BPpy%2BzwAeegYACMnDc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾ç‰‡</p>
<p>ä½œä¸º MinIO çš„å¼€æºå¹³æ›¿ï¼ŒRustFS å‚è€ƒäº† MinIO çš„ç®€æ´ã€è½»é‡ã€å¯æ‰©å±•ã€ä¼˜é›…çš„æ¶æ„ã€‚RustFS çš„åŸºæœ¬æ¶æ„æ˜¯åˆ†å¸ƒå¼ç½‘æ ¼ï¼Œä¸€ç§ä½¿ç”¨å¤šä¸ªèŠ‚ç‚¹æ‰§è¡Œå•ä¸ªä»»åŠ¡çš„è®¡ç®—æœºæ¶æ„ã€‚æ‘’å¼ƒäº†ä¼ ç»Ÿåˆ†å¸ƒå¼å­˜å‚¨ä¸­å¤æ‚çš„ä¸»èŠ‚ç‚¹ã€å…ƒæ•°æ®èŠ‚ç‚¹ã€æ•°æ®èŠ‚ç‚¹è§’è‰²åˆ’åˆ†ï¼ŒèŠ‚ç‚¹é€šè¿‡ç½‘ç»œç›¸äº’è¿æ¥ï¼Œè¿™ä½¿å¾—å®ƒä»¬èƒ½å¤Ÿç›¸äº’é€šä¿¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c1f09a3f4584664b5a5e59a613a86ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55qu55qu5p6XNTUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763818148&amp;x-signature=zafwKeO5FGlsEuoJDpLqgJRh5hc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å›¾ç‰‡</p>
<h4 data-id="heading-0">ç‰¹æ€§</h4>
<ul>
<li>
<p>é«˜æ€§èƒ½</p>
<p>ï¼šä½¿ç”¨ Rust æ„å»ºï¼Œç¡®ä¿é€Ÿåº¦å’Œæ•ˆç‡ã€‚</p>
</li>
<li>
<p>åˆ†å¸ƒå¼æ¶æ„</p>
<p>ï¼šå¯æ‰©å±•ä¸”å®¹é”™çš„è®¾è®¡ï¼Œé€‚ç”¨äºå¤§è§„æ¨¡éƒ¨ç½²ã€‚</p>
</li>
<li>
<p>S3 å…¼å®¹æ€§</p>
<p>ï¼šä¸ç°æœ‰ S3 å…¼å®¹åº”ç”¨ç¨‹åºæ— ç¼é›†æˆã€‚</p>
</li>
<li>
<p>æ•°æ®æ¹–æ”¯æŒ</p>
<p>ï¼šé’ˆå¯¹å¤§æ•°æ®å’Œ AI å·¥ä½œè´Ÿè½½è¿›è¡Œäº†ä¼˜åŒ–ã€‚</p>
</li>
<li>
<p>å¼€æº</p>
<p>ï¼šé‡‡ç”¨ Apache 2.0 è®¸å¯è¯ï¼Œé¼“åŠ±ç¤¾åŒºè´¡çŒ®å’Œé€æ˜åº¦ã€‚</p>
</li>
<li>
<p>ç”¨æˆ·å‹å¥½</p>
<p>ï¼šè®¾è®¡ç®€å•ï¼Œæ˜“äºéƒ¨ç½²å’Œç®¡ç†ã€‚</p>
</li>
<li>
<p><strong>å¼€æºåœ°å€****<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frustfs%2Frustfs" target="_blank" title="https://github.com/rustfs/rustfs" ref="nofollow noopener noreferrer">github.com/rustfs/rustâ€¦</a></strong></p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/460a9e8ce1b7483b8a0e70343d45336d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55qu55qu5p6XNTUx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1763818148&amp;x-signature=3%2F5OxTVXHsDOX2IrUz%2BD%2Fyq8vA0%3D" alt="å›¾ç‰‡" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¼€å‘ä¸€ä¸ªè®¡æ—¶å™¨ç»„ä»¶]]></title>    <link>https://juejin.cn/post/7572454929144872995</link>    <guid>https://juejin.cn/post/7572454929144872995</guid>    <pubDate>2025-11-15T12:51:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572454929144872995" data-draft-id="7572454929144856611" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¼€å‘ä¸€ä¸ªè®¡æ—¶å™¨ç»„ä»¶"/> <meta itemprop="keywords" content="å‰ç«¯,æµè§ˆå™¨"/> <meta itemprop="datePublished" content="2025-11-15T12:51:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å®‰æ±‰ç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2533716584308935"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¼€å‘ä¸€ä¸ªè®¡æ—¶å™¨ç»„ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2533716584308935/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å®‰æ±‰ç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T12:51:36.000Z" title="Sat Nov 15 2025 12:51:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">âœ… 1ã€è®¡æ—¶é€»è¾‘æ”¾åœ¨ Web Workerï¼Œä¸æ”¾åœ¨ä¸»çº¿ç¨‹</h2>
<ul>
<li>ç°ä»£æµè§ˆå™¨ä¸ºäº†çœç”µå’Œæ€§èƒ½ï¼Œä¼šå¯¹éå½“å‰æ˜¾ç¤ºçš„æ ‡ç­¾é¡µå®æ–½é™åˆ¶ï¼Œ<code>setTimeout / setInterval</code>å¯èƒ½å»¶è¿Ÿï¼›</li>
<li>ä¸ä¼šè¢«ä¸»çº¿ç¨‹çš„æ¸²æŸ“/JSæ‰§è¡Œé˜»å¡å½±å“ã€‚</li>
</ul>
<h2 data-id="heading-1">âœ… 2ã€é€’å½’ setTimeoutï¼Œä¸ç”¨ setInterval</h2>
<p><strong>1ã€setInterval çš„ç¼ºé™·ï¼š</strong></p>
<blockquote>
<p>setInterval(fn, 1000) çš„å«ä¹‰æ˜¯ï¼š â€œæ¯éš” 1000msï¼Œå°† fn æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—â€ï¼Œä½†ä¸ä¿è¯ fn ä½•æ—¶å¼€å§‹æ‰§è¡Œã€‚</p>
</blockquote>
<p>å¦‚æœä¸»çº¿ç¨‹ç¹å¿™ï¼ˆå¦‚æ¸²æŸ“å¡é¡¿ã€å¤§é‡è®¡ç®—ï¼‰ï¼Œfn å¯èƒ½å»¶è¿Ÿæ‰§è¡Œï¼Œè€Œä¸‹ä¸€æ¬¡å›è°ƒä»æŒ‰å›ºå®šé—´éš”æ’é˜Ÿï¼Œå¯¼è‡´ï¼šç´¯è®¡è¯¯å·®è¶Šæ¥è¶Šå¤§ï¼Œå®é™…æ‰§è¡Œé¢‘ç‡è¿œä½äºé¢„æœŸã€‚</p>
<p><strong>2ã€setTimeout é€’å½’çš„ä¼˜åŠ¿:</strong></p>
<blockquote>
<p>åŠ¨æ€è°ƒæ•´ä¸‹ä¸€æ¬¡å»¶è¿Ÿæ—¶é—´ï¼Œè¡¥å¿ä¸Šä¸€æ¬¡çš„æ‰§è¡Œè€—æ—¶ï¼ŒsetTimeout é€’å½’æ˜¯â€œæ‰§è¡Œå®Œå†çº¦ä¸‹ä¸€æ¬¡â€ï¼Œé¿å…ä»»åŠ¡å †ç§¯ã€‚</p>
</blockquote>
<pre><code class="hljs language-scss" lang="scss">functionÂ <span class="hljs-built_in">tick</span>()Â {
Â Â <span class="hljs-comment">//Â ...</span>
Â Â <span class="hljs-built_in">setTimeout</span>(tick,Â <span class="hljs-number">1000</span>);Â <span class="hljs-comment">//Â ä¸‹ä¸€æ¬¡åœ¨â€œæœ¬æ¬¡ç»“æŸåâ€å†å®‰æ’</span>
}
<span class="hljs-built_in">tick</span>();
</code></pre>
<p><strong>æ¯æ¬¡éƒ½æ˜¯â€œä¸Šä¸€æ¬¡ç»“æŸ + 1000msâ€ï¼Œä¸ä¼šå †ç§¯ï¼Œè¯¯å·®ä¸ç´¯ç§¯ï¼</strong></p>
<h2 data-id="heading-2">âœ… 3ã€å®Œæ•´ä»£ç </h2>
<p><strong>Timer.vueï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">&lt;scriptÂ setupÂ <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;
importÂ {Â onBeforeUnmount,Â refÂ }Â fromÂ 'vue'<span class="hljs-comment">;</span>
importÂ {
Â Â COMPLETE,
Â Â COUNTDOWN,
Â Â formatSeconds,
Â Â PAUSE,
Â Â RESET,
Â Â START,
Â Â UPDATE,
}Â fromÂ './timer.utils'<span class="hljs-comment">;</span>

constÂ <span class="hljs-attr">worker</span>Â =Â newÂ Worker(newÂ URL(<span class="hljs-string">'./timer.worker.ts'</span>,Â import.meta.url),Â {
Â Â type:Â 'module',
})<span class="hljs-comment">;</span>

constÂ <span class="hljs-attr">props</span>Â =Â withDefaults(
Â Â defineProps&lt;{
Â Â Â Â mode?:Â 'countdown'Â |Â 'countup'<span class="hljs-comment">;Â //Â è®¡æ—¶æ¨¡å¼:Â countdown:å€’è®¡æ—¶,Â countup:è®¡æ—¶</span>
Â Â Â Â remMinutes?:Â number<span class="hljs-comment">;Â //Â å€’è®¡æ—¶åˆå§‹åˆ†é’Ÿæ•°ï¼ˆä»…Â countdownÂ æ¨¡å¼æœ‰æ•ˆï¼‰</span>
Â Â Â Â immediate?:Â boolean<span class="hljs-comment">;Â //Â æ˜¯å¦ç«‹å³å¼€å§‹è®¡æ—¶</span>
Â Â Â Â control?:Â boolean<span class="hljs-comment">;Â //Â æ˜¯å¦æ˜¾ç¤ºæ§åˆ¶æŒ‰é’®</span>
Â Â Â Â step?:Â number<span class="hljs-comment">;Â //Â è®¡æ—¶æ­¥é•¿(å•ä½ï¼šç§’ï¼Œé™åˆ¶æ•´ç§’ï¼‰</span>
Â Â Â Â onStart?:Â ()Â =&gt;Â void<span class="hljs-comment">;</span>
Â Â Â Â onUpdate?:Â (time:Â string<span class="hljs-section">[]</span>)Â =&gt;Â void<span class="hljs-comment">;</span>
Â Â Â Â onPause?:Â (time:Â string<span class="hljs-section">[]</span>)Â =&gt;Â void<span class="hljs-comment">;</span>
Â Â Â Â onComplete?:Â ()Â =&gt;Â void<span class="hljs-comment">;</span>
Â Â Â Â onReset?:Â ()Â =&gt;Â void<span class="hljs-comment">;</span>
Â Â }&gt;(),
Â Â {
Â Â Â Â mode:Â COUNTDOWN,
Â Â Â Â immediate:Â true,
Â Â Â Â control:Â true,
Â Â Â Â step:Â 1,
Â Â }
)<span class="hljs-comment">;</span>

//Â å½“å‰è¿è¡ŒçŠ¶æ€ï¼š
//Â -Â undefinedï¼šæœªå¼€å§‹ï¼ˆåˆå§‹æˆ–é‡ç½®åï¼‰
//Â -Â trueï¼šæ­£åœ¨è¿è¡Œ
//Â -Â falseï¼šå·²æš‚åœ
constÂ <span class="hljs-attr">isStart</span>Â =Â ref&lt;boolean&gt;()<span class="hljs-comment">;</span>

//Â å½“å‰æ€»ç§’æ•°
letÂ <span class="hljs-attr">currentSeconds</span>Â =Â props.modeÂ ===Â COUNTDOWNÂ ?Â (props.remMinutesÂ ??Â <span class="hljs-number">0</span>)Â *Â <span class="hljs-number">60</span>Â :Â <span class="hljs-number">0</span><span class="hljs-comment">;</span>

//Â åˆå§‹åŒ–æ—¶é—´æ ¼å¼Â <span class="hljs-section">[HH,Â MM,Â SS]</span>
constÂ <span class="hljs-attr">initialTime</span>Â =Â formatSeconds(currentSeconds)<span class="hljs-comment">;</span>
constÂ <span class="hljs-attr">hours</span>Â =Â ref(initialTime[<span class="hljs-number">0</span>])<span class="hljs-comment">;</span>
constÂ <span class="hljs-attr">minutes</span>Â =Â ref(initialTime[<span class="hljs-number">1</span>])<span class="hljs-comment">;</span>
constÂ <span class="hljs-attr">seconds</span>Â =Â ref(initialTime[<span class="hljs-number">2</span>])<span class="hljs-comment">;</span>

listenWorkerMsg()<span class="hljs-comment">;</span>

ifÂ (props.immediate)Â {
Â Â start()<span class="hljs-comment">;</span>
}

functionÂ listenWorkerMsg()Â {
Â Â <span class="hljs-attr">worker.onmessage</span>Â =Â eventÂ =&gt;Â {
Â Â Â Â constÂ {Â time,Â type,Â rawSecondsÂ }Â =Â event.data<span class="hljs-comment">;</span>

Â Â Â Â ifÂ (<span class="hljs-attr">type</span>Â ===Â UPDATE)Â {
Â Â Â Â Â Â <span class="hljs-section">[hours.value,Â minutes.value,Â seconds.value]</span>Â =Â time<span class="hljs-comment">;</span>
Â Â Â Â Â Â <span class="hljs-attr">currentSeconds</span>Â =Â rawSeconds<span class="hljs-comment">;</span>
Â Â Â Â Â Â props.onUpdate?.(<span class="hljs-section">[hours.value,Â minutes.value,Â seconds.value]</span>Â asÂ string<span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>
Â Â Â Â }

Â Â Â Â ifÂ (<span class="hljs-attr">type</span>Â ===Â COMPLETE)Â {
Â Â Â Â Â Â <span class="hljs-attr">isStart.value</span>Â =Â undefined<span class="hljs-comment">;</span>
Â Â Â Â Â Â props.onComplete?.()<span class="hljs-comment">;</span>
Â Â Â Â }
Â Â }<span class="hljs-comment">;</span>
}

functionÂ start()Â {
Â Â ifÂ (<span class="hljs-attr">isStart.value</span>Â ===Â <span class="hljs-literal">true</span>)Â {
Â Â Â Â return<span class="hljs-comment">;</span>
Â Â }
Â Â <span class="hljs-attr">isStart.value</span>Â =Â <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
Â Â constÂ {Â mode,Â stepÂ }Â =Â props<span class="hljs-comment">;</span>
Â Â worker.postMessage({
Â Â Â Â action:Â START,
Â Â Â Â step:Â Math.max(1,Â Math.floor(step)),Â //Â ä»…æ”¯æŒç§’çº§æ›´æ–°
Â Â Â Â mode,
Â Â Â Â currentSeconds,
Â Â })<span class="hljs-comment">;</span>
Â Â props.onStart?.()<span class="hljs-comment">;</span>
}

functionÂ pause()Â {
Â Â ifÂ (isStart.valueÂ !==Â true)Â {
Â Â Â Â return<span class="hljs-comment">;</span>
Â Â }
Â Â <span class="hljs-attr">isStart.value</span>Â =Â <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
Â Â worker.postMessage({Â action:Â PAUSEÂ })<span class="hljs-comment">;</span>
Â Â props.onPause?.(<span class="hljs-section">[hours.value,Â minutes.value,Â seconds.value]</span>Â asÂ string<span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>
}

functionÂ reset()Â {
Â Â worker.postMessage({Â action:Â RESETÂ })<span class="hljs-comment">;</span>
Â Â <span class="hljs-attr">isStart.value</span>Â =Â undefined<span class="hljs-comment">;</span>
Â Â constÂ {Â mode,Â remMinutes,Â immediateÂ }Â =Â props<span class="hljs-comment">;</span>
Â Â <span class="hljs-attr">currentSeconds</span>Â =Â modeÂ ===Â COUNTDOWNÂ ?Â (remMinutesÂ ??Â <span class="hljs-number">0</span>)Â *Â <span class="hljs-number">60</span>Â :Â <span class="hljs-number">0</span><span class="hljs-comment">;</span>
Â Â ifÂ (immediate)Â {
Â Â Â Â start()<span class="hljs-comment">;</span>
Â Â }
Â Â props.onReset?.()<span class="hljs-comment">;</span>
}

onBeforeUnmount(()Â =&gt;Â {
Â Â worker.terminate()<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>

defineExpose({
Â Â start,
Â Â pause,
Â Â reset,
})<span class="hljs-comment">;</span>
&lt;/script&gt;
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"timer"</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"timer-container"</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>Â <span class="hljs-attr">:hours</span>=<span class="hljs-string">"hours"</span>Â <span class="hljs-attr">:minutes</span>=<span class="hljs-string">"minutes"</span>Â <span class="hljs-attr">:seconds</span>=<span class="hljs-string">"seconds"</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{Â hoursÂ }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"delimiter"</span>&gt;</span>:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{Â minutesÂ }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"delimiter"</span>&gt;</span>:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{Â secondsÂ }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"controls-container"</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>Â <span class="hljs-attr">name</span>=<span class="hljs-string">"controls"</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">v-if</span>=<span class="hljs-string">"control"</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"controls"</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"btn"</span>Â <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"isStartÂ ===Â true"</span>Â @<span class="hljs-attr">click</span>=<span class="hljs-string">"start"</span>&gt;</span>å¼€å§‹<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"btn"</span>Â <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"isStartÂ ===Â false"</span>Â @<span class="hljs-attr">click</span>=<span class="hljs-string">"pause"</span>&gt;</span>æš‚åœ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"btn"</span>Â @<span class="hljs-attr">click</span>=<span class="hljs-string">"reset"</span>&gt;</span>é‡ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>Â <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span>Â <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.timer-container</span>Â {
Â Â <span class="hljs-attribute">font-size</span>:Â <span class="hljs-number">20px</span>;
Â Â <span class="hljs-attribute">font-weight</span>:Â <span class="hljs-number">500</span>;
Â Â <span class="hljs-attribute">letter-spacing</span>:Â <span class="hljs-number">3px</span>;
Â Â <span class="hljs-attribute">display</span>:Â flex;
Â Â <span class="hljs-attribute">align-items</span>:Â center;
Â Â <span class="hljs-attribute">justify-content</span>:Â center;

Â Â <span class="hljs-selector-class">.delimiter</span>Â {
Â Â Â Â <span class="hljs-attribute">transform</span>:Â <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">1px</span>);
Â Â }
}

<span class="hljs-selector-class">.controls</span>Â {
Â Â <span class="hljs-attribute">margin-top</span>:Â <span class="hljs-number">8px</span>;
Â Â <span class="hljs-attribute">display</span>:Â flex;
Â Â <span class="hljs-attribute">align-items</span>:Â center;
Â Â <span class="hljs-attribute">justify-content</span>:Â center;

Â Â <span class="hljs-selector-class">.btn</span>Â {
Â Â Â Â <span class="hljs-attribute">margin</span>:Â <span class="hljs-number">0</span>Â <span class="hljs-number">4px</span>;
Â Â Â Â <span class="hljs-attribute">border-radius</span>:Â <span class="hljs-number">8px</span>;
Â Â Â Â <span class="hljs-attribute">border</span>:Â <span class="hljs-number">1px</span>Â solidÂ transparent;
Â Â Â Â <span class="hljs-attribute">padding</span>:Â <span class="hljs-number">0.6em</span>Â <span class="hljs-number">1.2em</span>;
Â Â }

Â Â <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:hover</span>Â {
Â Â Â Â <span class="hljs-attribute">border-color</span>:Â <span class="hljs-number">#646cff</span>;
Â Â }

Â Â <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:focus</span>,
Â Â <span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:focus</span>-visibleÂ {
Â Â Â Â <span class="hljs-attribute">outline</span>:Â <span class="hljs-number">4px</span>Â autoÂ -webkit-focus-ring-color;
Â Â }

Â Â &amp;<span class="hljs-selector-class">.disabled</span>Â {
Â Â Â Â <span class="hljs-selector-class">.btn</span>Â {
Â Â Â Â Â Â <span class="hljs-attribute">background</span>:Â <span class="hljs-number">#f4f4f4</span>;
Â Â Â Â Â Â <span class="hljs-attribute">cursor</span>:Â not-allowed;
Â Â Â Â }
Â Â }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p><strong>timer.worker.tsï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">/**
Â *Â webÂ workerÂ é˜²æ­¢ä¸»çº¿ç¨‹é˜»å¡ã€æµè§ˆå™¨æ ‡ç­¾é¡µæœªæ¿€æ´»æ—¶ï¼Œå½±å“è®¡æ—¶ç²¾åº¦
Â */

importÂ {
Â Â COMPLETE,
Â Â COUNTDOWN,
Â Â COUNTUP,
Â Â formatSeconds,
Â Â PAUSE,
Â Â RESET,
Â Â START,
Â Â UPDATE,
}Â fromÂ './timer.utils.ts'<span class="hljs-comment">;</span>

letÂ <span class="hljs-attr">isRunning</span>Â =Â <span class="hljs-literal">false</span><span class="hljs-comment">;Â //Â æ˜¯å¦è¿è¡Œä¸­</span>
letÂ timeoutId:Â numberÂ |Â null<span class="hljs-comment">;</span>

<span class="hljs-attr">self.onmessage</span>Â =Â eventÂ =&gt;Â {
Â Â constÂ {Â action,Â mode,Â step,Â currentSecondsÂ }Â =Â event.data<span class="hljs-comment">;</span>

Â Â //Â é‡ç½®/æš‚åœ
Â Â ifÂ (<span class="hljs-attr">action</span>Â ===Â RESETÂ ||Â actionÂ ===Â PAUSE)Â {
Â Â Â Â stopTimer()<span class="hljs-comment">;</span>
Â Â Â Â return<span class="hljs-comment">;</span>
Â Â }

Â Â //Â å¼€å§‹
Â Â ifÂ (<span class="hljs-attr">action</span>Â ===Â START)Â {
Â Â Â Â stopTimer()<span class="hljs-comment">;</span>
Â Â Â Â <span class="hljs-attr">isRunning</span>Â =Â <span class="hljs-literal">true</span><span class="hljs-comment">;</span>

Â Â Â Â ifÂ (<span class="hljs-attr">mode</span>Â ===Â COUNTDOWN)Â {
Â Â Â Â Â Â startCountdown(currentSeconds,Â step)<span class="hljs-comment">;</span>
Â Â Â Â }

Â Â Â Â ifÂ (<span class="hljs-attr">mode</span>Â ===Â COUNTUP)Â {
Â Â Â Â Â Â startCountup(currentSeconds,Â step)<span class="hljs-comment">;</span>
Â Â Â Â }
Â Â }
}<span class="hljs-comment">;</span>

functionÂ startCountdown(remaining:Â number,Â step:Â number)Â {
Â Â constÂ <span class="hljs-attr">tick</span>Â =Â ()Â =&gt;Â {
Â Â Â Â ifÂ (!isRunning)Â return<span class="hljs-comment">;</span>

Â Â Â Â //Â å‘é€å½“å‰æ—¶é—´çŠ¶æ€
Â Â Â Â self.postMessage({
Â Â Â Â Â Â type:Â UPDATE,
Â Â Â Â Â Â time:Â formatSeconds(remaining),
Â Â Â Â Â Â rawSeconds:Â remaining,
Â Â Â Â })<span class="hljs-comment">;</span>

Â Â Â Â //Â å¦‚æœå·²ç»“æŸ
Â Â Â Â ifÂ (remainingÂ &lt;=Â 0)Â {
Â Â Â Â Â Â self.postMessage({Â type:Â COMPLETEÂ })<span class="hljs-comment">;</span>
Â Â Â Â Â Â stopTimer()<span class="hljs-comment">;</span>
Â Â Â Â Â Â return<span class="hljs-comment">;</span>
Â Â Â Â }

Â Â Â Â //Â è®¡ç®—ä¸‹ä¸€æ¬¡å‰©ä½™æ—¶é—´ï¼ˆç¡®ä¿ä¸å°äºÂ 0ï¼‰
Â Â Â Â constÂ <span class="hljs-attr">nextRemaining</span>Â =Â Math.max(<span class="hljs-number">0</span>,Â remainingÂ -Â step)<span class="hljs-comment">;</span>
Â Â Â Â constÂ <span class="hljs-attr">delay</span>Â =Â (remainingÂ -Â nextRemaining)Â *Â <span class="hljs-number">1000</span><span class="hljs-comment">;Â //Â ç²¾ç¡®å»¶è¿Ÿ</span>

Â Â Â Â ifÂ (nextRemainingÂ &gt;Â 0)Â {
Â Â Â Â Â Â //Â ç»§ç»­å€’è®¡æ—¶
Â Â Â Â Â Â <span class="hljs-attr">timeoutId</span>Â =Â self.setTimeout(tick,Â delay)<span class="hljs-comment">;</span>
Â Â Â Â }Â elseÂ {
Â Â Â Â Â Â //Â æœ€åä¸€æ¬¡å½’é›¶
Â Â Â Â Â Â <span class="hljs-attr">timeoutId</span>Â =Â self.setTimeout(()Â =&gt;Â {
Â Â Â Â Â Â Â Â self.postMessage({
Â Â Â Â Â Â Â Â Â Â type:Â UPDATE,
Â Â Â Â Â Â Â Â Â Â time:Â formatSeconds(0),
Â Â Â Â Â Â Â Â Â Â rawSeconds:Â 0,
Â Â Â Â Â Â Â Â })<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â self.postMessage({Â type:Â COMPLETEÂ })<span class="hljs-comment">;</span>
Â Â Â Â Â Â Â Â stopTimer()<span class="hljs-comment">;</span>
Â Â Â Â Â Â },Â delay)<span class="hljs-comment">;</span>
Â Â Â Â }

Â Â Â Â <span class="hljs-attr">remaining</span>Â =Â nextRemaining<span class="hljs-comment">;</span>
Â Â }<span class="hljs-comment">;</span>

Â Â tick()<span class="hljs-comment">;Â //Â ç«‹å³è§¦å‘ç¬¬ä¸€æ¬¡æ›´æ–°ï¼ˆæ˜¾ç¤ºåˆå§‹å€¼ï¼‰</span>
}

functionÂ startCountup(elapsed:Â number,Â step:Â number)Â {
Â Â constÂ <span class="hljs-attr">tick</span>Â =Â ()Â =&gt;Â {
Â Â Â Â ifÂ (!isRunning)Â return<span class="hljs-comment">;</span>

Â Â Â Â self.postMessage({
Â Â Â Â Â Â type:Â UPDATE,
Â Â Â Â Â Â time:Â formatSeconds(elapsed),
Â Â Â Â Â Â rawSeconds:Â elapsed,
Â Â Â Â })<span class="hljs-comment">;</span>

Â Â Â Â elapsedÂ +=Â step<span class="hljs-comment">;</span>
Â Â Â Â <span class="hljs-attr">timeoutId</span>Â =Â self.setTimeout(tick,Â stepÂ *Â <span class="hljs-number">1000</span>)<span class="hljs-comment">;</span>
Â Â }<span class="hljs-comment">;</span>

Â Â tick()<span class="hljs-comment">;</span>
}

functionÂ stopTimer()Â {
Â Â ifÂ (timeoutId)Â {
Â Â Â Â self.clearTimeout(timeoutId)<span class="hljs-comment">;</span>
Â Â Â Â <span class="hljs-attr">timeoutId</span>Â =Â null<span class="hljs-comment">;</span>
Â Â }
Â Â <span class="hljs-attr">isRunning</span>Â =Â <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
}
</code></pre>
<p><strong>timer.utils.ts:</strong></p>
<pre><code class="hljs language-ini" lang="ini">functionÂ formatSeconds(totalSeconds:Â number)Â {
Â Â <span class="hljs-attr">totalSeconds</span>Â =Â Math.max(<span class="hljs-number">0</span>,Â totalSeconds)<span class="hljs-comment">;</span>
Â Â constÂ <span class="hljs-attr">h</span>Â =Â Math.floor(totalSecondsÂ /Â <span class="hljs-number">3600</span>)<span class="hljs-comment">;</span>
Â Â constÂ <span class="hljs-attr">m</span>Â =Â Math.floor((totalSecondsÂ %Â <span class="hljs-number">3600</span>)Â /Â <span class="hljs-number">60</span>)<span class="hljs-comment">;</span>
Â Â constÂ <span class="hljs-attr">s</span>Â =Â totalSecondsÂ %Â <span class="hljs-number">60</span><span class="hljs-comment">;</span>
Â Â returnÂ <span class="hljs-section">[h,Â m,Â s]</span>.map(<span class="hljs-attr">v</span>Â =&gt;Â String(v).padStart(<span class="hljs-number">2</span>,Â <span class="hljs-string">'0'</span>))<span class="hljs-comment">;</span>
}

constÂ <span class="hljs-attr">COUNTDOWN</span>Â =Â <span class="hljs-string">'countdown'</span><span class="hljs-comment">;</span>
constÂ <span class="hljs-attr">COUNTUP</span>Â =Â <span class="hljs-string">'countup'</span><span class="hljs-comment">;</span>

constÂ <span class="hljs-attr">START</span>Â =Â <span class="hljs-string">'start'</span><span class="hljs-comment">;</span>
constÂ <span class="hljs-attr">PAUSE</span>Â =Â <span class="hljs-string">'pause'</span><span class="hljs-comment">;</span>
constÂ <span class="hljs-attr">RESET</span>Â =Â <span class="hljs-string">'reset'</span><span class="hljs-comment">;</span>

constÂ <span class="hljs-attr">UPDATE</span>Â =Â <span class="hljs-string">'update'</span><span class="hljs-comment">;</span>
constÂ <span class="hljs-attr">COMPLETE</span>Â =Â <span class="hljs-string">'complete'</span><span class="hljs-comment">;</span>

exportÂ {
Â Â formatSeconds,
Â Â COUNTDOWN,
Â Â COUNTUP,
Â Â START,
Â Â PAUSE,
Â Â RESET,
Â Â UPDATE,
Â Â COMPLETE,
}<span class="hljs-comment">;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++ä¸­æœ‰åŒå‘æ˜ å°„æ•°æ®ç»“æ„å—ï¼ŸKeyå’ŒValueèƒ½å¦åŒå‘æŸ¥æ‰¾ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7572385850635534342</link>    <guid>https://juejin.cn/post/7572385850635534342</guid>    <pubDate>2025-11-14T10:24:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572385850635534342" data-draft-id="7572385850635501574" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++ä¸­æœ‰åŒå‘æ˜ å°„æ•°æ®ç»“æ„å—ï¼ŸKeyå’ŒValueèƒ½å¦åŒå‘æŸ¥æ‰¾ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-14T10:24:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="oioihoii"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++ä¸­æœ‰åŒå‘æ˜ å°„æ•°æ®ç»“æ„å—ï¼ŸKeyå’ŒValueèƒ½å¦åŒå‘æŸ¥æ‰¾ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    oioihoii
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-14T10:24:11.000Z" title="Fri Nov 14 2025 10:24:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-14
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ—¥å¸¸çš„C++å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„éœ€æ±‚ï¼šä¸ä»…éœ€è¦é€šè¿‡keyå¿«é€Ÿæ‰¾åˆ°valueï¼Œè¿˜éœ€è¦é€šè¿‡valueåæŸ¥keyã€‚è¿™ç§åŒå‘æ˜ å°„çš„éœ€æ±‚åœ¨å®é™…é¡¹ç›®ä¸­ååˆ†å¸¸è§ï¼Œæ¯”å¦‚ç”¨æˆ·IDä¸ç”¨æˆ·åçš„æ˜ å°„ã€é”™è¯¯ç ä¸é”™è¯¯ä¿¡æ¯çš„å¯¹åº”å…³ç³»ç­‰ã€‚é‚£ä¹ˆï¼ŒC++æ ‡å‡†åº“æ˜¯å¦æä¾›äº†è¿™æ ·çš„æ•°æ®ç»“æ„å‘¢ï¼Ÿ</p>
<h2 data-id="heading-0">C++æ ‡å‡†åº“çš„ç°çŠ¶ï¼šä»¤äººé—æ†¾çš„ç¼ºå¤±</h2>
<p>ä»¤äººé—æ†¾çš„æ˜¯ï¼ŒC++æ ‡å‡†åº“ä¸­å¹¶æ²¡æœ‰ç›´æ¥æä¾›ä¸“é—¨çš„åŒå‘æ˜ å°„æ•°æ®ç»“æ„ã€‚æˆ‘ä»¬ç†Ÿæ‚‰çš„<code>std::map</code>å’Œ<code>std::unordered_map</code>éƒ½åªèƒ½å®ç°å•å‘æŸ¥æ‰¾â€”â€”åªèƒ½é€šè¿‡keyæŸ¥æ‰¾valueï¼Œæ— æ³•é€šè¿‡valueå¿«é€Ÿæ‰¾åˆ°keyã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_map&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>

<span class="hljs-comment">// ä¼ ç»Ÿçš„unordered_mapåªèƒ½å•å‘æŸ¥æ‰¾</span>
std::unordered_map&lt;<span class="hljs-type">int</span>, std::string&gt; single_map;
single_map[<span class="hljs-number">1</span>] = <span class="hljs-string">"Alice"</span>;
single_map[<span class="hljs-number">2</span>] = <span class="hljs-string">"Bob"</span>;

<span class="hljs-comment">// å¯ä»¥é€šè¿‡keyæ‰¾åˆ°value</span>
std::string name = single_map[<span class="hljs-number">1</span>];  <span class="hljs-comment">// æ­£ç¡®ï¼šå¾—åˆ°"Alice"</span>

<span class="hljs-comment">// ä½†æ˜¯æ— æ³•ç›´æ¥é€šè¿‡valueæ‰¾åˆ°key</span>
<span class="hljs-comment">// éœ€è¦éå†æ•´ä¸ªmapï¼Œæ•ˆç‡ä½ä¸‹ï¼</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">findKeyByValue</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; value)</span> </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; pair : single_map) {
        <span class="hljs-keyword">if</span> (pair.second == value) {
            <span class="hljs-keyword">return</span> pair.first;
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// æœªæ‰¾åˆ°</span>
}
</code></pre>
<p>è¿™ç§éå†æŸ¥æ‰¾çš„æ–¹å¼æ—¶é—´å¤æ‚åº¦ä¸ºO(n)ï¼Œåœ¨æ•°æ®é‡è¾ƒå¤§æ—¶æ€§èƒ½æ˜¯æ— æ³•æ¥å—çš„ã€‚</p>
<h2 data-id="heading-1">è§£å†³æ–¹æ¡ˆï¼šè‡ªå·±åŠ¨æ‰‹ï¼Œä¸°è¡£è¶³é£Ÿ</h2>
<p>æ—¢ç„¶æ ‡å‡†åº“æ²¡æœ‰æä¾›ï¼Œæˆ‘ä»¬å°±éœ€è¦è‡ªå·±å®ç°ã€‚ä»¥ä¸‹æ˜¯å‡ ç§å¸¸è§çš„è§£å†³æ–¹æ¡ˆï¼š</p>
<h3 data-id="heading-2">æ–¹æ¡ˆä¸€ï¼šåŒunordered_mapå®ç°ï¼ˆæ¨èï¼‰</h3>
<p>è¿™æ˜¯æœ€ç›´æ¥ä¸”é«˜æ•ˆçš„æ–¹æ³•ï¼Œç»´æŠ¤ä¸¤ä¸ªå“ˆå¸Œè¡¨ï¼Œåˆ†åˆ«å­˜å‚¨key-&gt;valueå’Œvalue-&gt;keyçš„æ˜ å°„å…³ç³»ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_map&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdexcept&gt;</span></span>

<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> K, <span class="hljs-keyword">typename</span> V&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BiDirectionalMap</span> {
<span class="hljs-keyword">private</span>:
    std::unordered_map&lt;K, V&gt; key_to_value;
    std::unordered_map&lt;V, K&gt; value_to_key;

<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// æ’å…¥é”®å€¼å¯¹</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insert</span><span class="hljs-params">(<span class="hljs-type">const</span> K&amp; key, <span class="hljs-type">const</span> V&amp; value)</span> </span>{
        <span class="hljs-keyword">if</span> (key_to_value.<span class="hljs-built_in">count</span>(key) || value_to_key.<span class="hljs-built_in">count</span>(value)) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">invalid_argument</span>(<span class="hljs-string">"Key or value already exists"</span>);
        }
        key_to_value[key] = value;
        value_to_key[value] = key;
    }
    
    <span class="hljs-comment">// é€šè¿‡keyè·å–value</span>
    <span class="hljs-function">V <span class="hljs-title">getValue</span><span class="hljs-params">(<span class="hljs-type">const</span> K&amp; key)</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">auto</span> it = key_to_value.<span class="hljs-built_in">find</span>(key);
        <span class="hljs-keyword">if</span> (it == key_to_value.<span class="hljs-built_in">end</span>()) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">out_of_range</span>(<span class="hljs-string">"Key not found"</span>);
        }
        <span class="hljs-keyword">return</span> it-&gt;second;
    }
    
    <span class="hljs-comment">// é€šè¿‡valueè·å–key</span>
    <span class="hljs-function">K <span class="hljs-title">getKey</span><span class="hljs-params">(<span class="hljs-type">const</span> V&amp; value)</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">auto</span> it = value_to_key.<span class="hljs-built_in">find</span>(value);
        <span class="hljs-keyword">if</span> (it == value_to_key.<span class="hljs-built_in">end</span>()) {
            <span class="hljs-keyword">throw</span> std::<span class="hljs-built_in">out_of_range</span>(<span class="hljs-string">"Value not found"</span>);
        }
        <span class="hljs-keyword">return</span> it-&gt;second;
    }
    
    <span class="hljs-comment">// æ£€æŸ¥keyæ˜¯å¦å­˜åœ¨</span>
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">containsKey</span><span class="hljs-params">(<span class="hljs-type">const</span> K&amp; key)</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> key_to_value.<span class="hljs-built_in">find</span>(key) != key_to_value.<span class="hljs-built_in">end</span>();
    }
    
    <span class="hljs-comment">// æ£€æŸ¥valueæ˜¯å¦å­˜åœ¨</span>
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">containsValue</span><span class="hljs-params">(<span class="hljs-type">const</span> V&amp; value)</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> value_to_key.<span class="hljs-built_in">find</span>(value) != value_to_key.<span class="hljs-built_in">end</span>();
    }
    
    <span class="hljs-comment">// é€šè¿‡keyåˆ é™¤</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">eraseByKey</span><span class="hljs-params">(<span class="hljs-type">const</span> K&amp; key)</span> </span>{
        <span class="hljs-keyword">auto</span> it = key_to_value.<span class="hljs-built_in">find</span>(key);
        <span class="hljs-keyword">if</span> (it != key_to_value.<span class="hljs-built_in">end</span>()) {
            value_to_key.<span class="hljs-built_in">erase</span>(it-&gt;second);
            key_to_value.<span class="hljs-built_in">erase</span>(it);
        }
    }
    
    <span class="hljs-comment">// é€šè¿‡valueåˆ é™¤</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">eraseByValue</span><span class="hljs-params">(<span class="hljs-type">const</span> V&amp; value)</span> </span>{
        <span class="hljs-keyword">auto</span> it = value_to_key.<span class="hljs-built_in">find</span>(value);
        <span class="hljs-keyword">if</span> (it != value_to_key.<span class="hljs-built_in">end</span>()) {
            key_to_value.<span class="hljs-built_in">erase</span>(it-&gt;second);
            value_to_key.<span class="hljs-built_in">erase</span>(it);
        }
    }
    
    <span class="hljs-function"><span class="hljs-type">size_t</span> <span class="hljs-title">size</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> key_to_value.<span class="hljs-built_in">size</span>();
    }
    
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">empty</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> key_to_value.<span class="hljs-built_in">empty</span>();
    }
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    BiDirectionalMap&lt;<span class="hljs-type">int</span>, std::string&gt; id_name_map;
    
    <span class="hljs-comment">// æ’å…¥æ•°æ®</span>
    id_name_map.<span class="hljs-built_in">insert</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"Alice"</span>);
    id_name_map.<span class="hljs-built_in">insert</span>(<span class="hljs-number">2</span>, <span class="hljs-string">"Bob"</span>);
    id_name_map.<span class="hljs-built_in">insert</span>(<span class="hljs-number">3</span>, <span class="hljs-string">"Charlie"</span>);
    
    <span class="hljs-comment">// åŒå‘æŸ¥æ‰¾</span>
    std::cout &lt;&lt; <span class="hljs-string">"Name for ID 2: "</span> &lt;&lt; id_name_map.<span class="hljs-built_in">getValue</span>(<span class="hljs-number">2</span>) &lt;&lt; std::endl; <span class="hljs-comment">// Bob</span>
    std::cout &lt;&lt; <span class="hljs-string">"ID for name 'Alice': "</span> &lt;&lt; id_name_map.<span class="hljs-built_in">getKey</span>(<span class="hljs-string">"Alice"</span>) &lt;&lt; std::endl; <span class="hljs-comment">// 1</span>
    
    <span class="hljs-comment">// åˆ é™¤æ“ä½œ</span>
    id_name_map.<span class="hljs-built_in">eraseByKey</span>(<span class="hljs-number">3</span>); <span class="hljs-comment">// é€šè¿‡keyåˆ é™¤</span>
    id_name_map.<span class="hljs-built_in">eraseByValue</span>(<span class="hljs-string">"Bob"</span>); <span class="hljs-comment">// é€šè¿‡valueåˆ é™¤</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>è¿™ç§å®ç°çš„ä¼˜ç‚¹æ˜¯ï¼š</p>
<ul>
<li><strong>æŸ¥æ‰¾æ•ˆç‡é«˜</strong>ï¼šä¸¤ä¸ªæ–¹å‘éƒ½æ˜¯O(1)æ—¶é—´å¤æ‚åº¦</li>
<li><strong>å®ç°ç®€å•</strong>ï¼šä»£ç ç›´è§‚æ˜“æ‡‚</li>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šæ”¯æŒä¸åŒçš„keyå’Œvalueç±»å‹</li>
</ul>
<p>ç¼ºç‚¹æ˜¯ï¼š</p>
<ul>
<li><strong>å†…å­˜å ç”¨ç¿»å€</strong>ï¼šéœ€è¦å­˜å‚¨ä¸¤ä»½æ•°æ®</li>
<li><strong>æ•°æ®ä¸€è‡´æ€§</strong>ï¼šéœ€è¦ç¡®ä¿ä¸¤ä¸ªmapå§‹ç»ˆä¿æŒåŒæ­¥</li>
</ul>
<h3 data-id="heading-3">æ–¹æ¡ˆäºŒï¼šä½¿ç”¨Boost.Bimap</h3>
<p>å¦‚æœä½ ä¸ä»‹æ„ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼ŒBooståº“æä¾›äº†ç°æˆçš„<code>bimap</code>å®ç°ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;boost/bimap.hpp&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    boost::bimap&lt;<span class="hljs-type">int</span>, std::string&gt; bimap;
    
    <span class="hljs-comment">// æ’å…¥æ•°æ®</span>
    bimap.<span class="hljs-built_in">insert</span>({<span class="hljs-number">1</span>, <span class="hljs-string">"Alice"</span>});
    bimap.<span class="hljs-built_in">insert</span>({<span class="hljs-number">2</span>, <span class="hljs-string">"Bob"</span>});
    bimap.<span class="hljs-built_in">insert</span>({<span class="hljs-number">3</span>, <span class="hljs-string">"Charlie"</span>});
    
    <span class="hljs-comment">// å·¦è§†å›¾ï¼škey-&gt;value</span>
    <span class="hljs-keyword">auto</span> left_it = bimap.left.<span class="hljs-built_in">find</span>(<span class="hljs-number">2</span>);
    <span class="hljs-keyword">if</span> (left_it != bimap.left.<span class="hljs-built_in">end</span>()) {
        std::cout &lt;&lt; <span class="hljs-string">"Left lookup: "</span> &lt;&lt; left_it-&gt;second &lt;&lt; std::endl; <span class="hljs-comment">// Bob</span>
    }
    
    <span class="hljs-comment">// å³è§†å›¾ï¼švalue-&gt;key</span>
    <span class="hljs-keyword">auto</span> right_it = bimap.right.<span class="hljs-built_in">find</span>(<span class="hljs-string">"Alice"</span>);
    <span class="hljs-keyword">if</span> (right_it != bimap.right.<span class="hljs-built_in">end</span>()) {
        std::cout &lt;&lt; <span class="hljs-string">"Right lookup: "</span> &lt;&lt; right_it-&gt;second &lt;&lt; std::endl; <span class="hljs-comment">// 1</span>
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>Boost.Bimapçš„ä¼˜ç‚¹ï¼š</p>
<ul>
<li><strong>åŠŸèƒ½å®Œå–„</strong>ï¼šæä¾›äº†ä¸°å¯Œçš„æ¥å£å’Œé…ç½®é€‰é¡¹</li>
<li><strong>ç»è¿‡å……åˆ†æµ‹è¯•</strong>ï¼šå·¥ä¸šçº§è´¨é‡</li>
<li><strong>æ”¯æŒå¤šç§æ˜ å°„ç±»å‹</strong>ï¼šä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šç­‰</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li><strong>ä¾èµ–Booståº“</strong>ï¼šéœ€è¦é¢å¤–å®‰è£…å’Œé…ç½®</li>
<li><strong>ç¼–è¯‘æ—¶é—´å¢åŠ </strong>ï¼šæ¨¡æ¿ä»£ç è¾ƒå¤š</li>
</ul>
<h3 data-id="heading-4">æ–¹æ¡ˆä¸‰ï¼šå•ä¸€å®¹å™¨çš„å·§å¦™ç”¨æ³•</h3>
<p>åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œå¦‚æœkeyå’Œvalueçš„ç±»å‹ç›¸åŒä¸”ä¸ä¼šå†²çªï¼Œå¯ä»¥ä½¿ç”¨å•ä¸€å®¹å™¨ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_map&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SymmetricMap</span> {
<span class="hljs-keyword">private</span>:
    std::unordered_map&lt;std::string, std::string&gt; data;

<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insert</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; a, <span class="hljs-type">const</span> std::string&amp; b)</span> </span>{
        data[a] = b;
        data[b] = a;
    }
    
    <span class="hljs-function">std::string <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; key)</span> </span>{
        <span class="hljs-keyword">auto</span> it = data.<span class="hljs-built_in">find</span>(key);
        <span class="hljs-keyword">return</span> it != data.<span class="hljs-built_in">end</span>() ? it-&gt;second : <span class="hljs-string">""</span>;
    }
    
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">contains</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; key)</span> </span>{
        <span class="hljs-keyword">return</span> data.<span class="hljs-built_in">find</span>(key) != data.<span class="hljs-built_in">end</span>();
    }
};

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹ï¼šåŸŸåä¸IPæ˜ å°„ï¼ˆå‡è®¾ä¸ä¼šå†²çªï¼‰</span>
SymmetricMap domain_ip_map;
domain_ip_map.<span class="hljs-built_in">insert</span>(<span class="hljs-string">"google.com"</span>, <span class="hljs-string">"8.8.8.8"</span>);
domain_ip_map.<span class="hljs-built_in">insert</span>(<span class="hljs-string">"github.com"</span>, <span class="hljs-string">"1.1.1.1"</span>);

std::cout &lt;&lt; domain_ip_map.<span class="hljs-built_in">get</span>(<span class="hljs-string">"google.com"</span>); <span class="hljs-comment">// 8.8.8.8</span>
std::cout &lt;&lt; domain_ip_map.<span class="hljs-built_in">get</span>(<span class="hljs-string">"8.8.8.8"</span>);    <span class="hljs-comment">// google.com</span>
</code></pre>
<p>è¿™ç§æ–¹æ³•åªé€‚ç”¨äºå¾ˆæœ‰é™çš„åœºæ™¯ï¼Œä½¿ç”¨æ—¶éœ€è¦æ ¼å¤–å°å¿ƒã€‚</p>
<h2 data-id="heading-5">æ€§èƒ½è€ƒé‡ï¼šå¦‚ä½•é€‰æ‹©é€‚åˆçš„æ–¹æ¡ˆï¼Ÿ</h2>
<p>åœ¨é€‰æ‹©åŒå‘æ˜ å°„çš„å®ç°æ–¹æ¡ˆæ—¶ï¼Œéœ€è¦è€ƒè™‘ä»¥ä¸‹å› ç´ ï¼š</p>
<ol>
<li>
<p><strong>æ•°æ®è§„æ¨¡</strong></p>
<ul>
<li>å°æ•°æ®é‡ï¼šä»»ä½•æ–¹æ¡ˆéƒ½å¯ä»¥</li>
<li>å¤§æ•°æ®é‡ï¼šä¼˜å…ˆè€ƒè™‘åŒunordered_mapæˆ–Boost.Bimap</li>
</ul>
</li>
<li>
<p><strong>æ€§èƒ½è¦æ±‚</strong></p>
<ul>
<li>è¦æ±‚O(1)æŸ¥æ‰¾ï¼šé€‰æ‹©åŸºäºå“ˆå¸Œè¡¨çš„å®ç°</li>
<li>å¯ä»¥æ¥å—O(log n)ï¼šä¹Ÿå¯ä»¥è€ƒè™‘åŸºäºstd::mapçš„å®ç°</li>
</ul>
</li>
<li>
<p><strong>å¼€å‘ç¯å¢ƒ</strong></p>
<ul>
<li>å…è®¸ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ï¼šè€ƒè™‘Boost.Bimap</li>
<li>çº¯æ ‡å‡†åº“ç¯å¢ƒï¼šé€‰æ‹©åŒunordered_mapå®ç°</li>
</ul>
</li>
<li>
<p><strong>å†…å­˜é™åˆ¶</strong></p>
<ul>
<li>å†…å­˜å……è¶³ï¼šåŒunordered_map</li>
<li>å†…å­˜ç´§å¼ ï¼šå¯èƒ½éœ€è¦è€ƒè™‘å…¶ä»–ä¼˜åŒ–æ–¹æ¡ˆ</li>
</ul>
</li>
</ol>
<h2 data-id="heading-6">å®é™…åº”ç”¨åœºæ™¯</h2>
<p>åŒå‘æ˜ å°„åœ¨çœŸå®é¡¹ç›®ä¸­æœ‰ç€å¹¿æ³›çš„åº”ç”¨ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åœºæ™¯1ï¼šç”¨æˆ·ç³»ç»Ÿ</span>
BiDirectionalMap&lt;UserID, std::string&gt; user_system;
user_system.<span class="hljs-built_in">insert</span>(<span class="hljs-number">1001</span>, <span class="hljs-string">"alice@email.com"</span>);
user_system.<span class="hljs-built_in">insert</span>(<span class="hljs-number">1002</span>, <span class="hljs-string">"bob@email.com"</span>);

<span class="hljs-comment">// æ—¢å¯ä»¥é€šè¿‡IDæ‰¾é‚®ç®±ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é‚®ç®±æ‰¾ID</span>

<span class="hljs-comment">// åœºæ™¯2ï¼šé…ç½®ç³»ç»Ÿ</span>
BiDirectionalMap&lt;std::string, <span class="hljs-type">int</span>&gt; config_map;
config_map.<span class="hljs-built_in">insert</span>(<span class="hljs-string">"MAX_CONNECTIONS"</span>, <span class="hljs-number">100</span>);
config_map.<span class="hljs-built_in">insert</span>(<span class="hljs-string">"TIMEOUT_MS"</span>, <span class="hljs-number">5000</span>);

<span class="hljs-comment">// åœºæ™¯3ï¼šæšä¸¾å€¼æ˜ å°„</span>
<span class="hljs-keyword">enum class</span> <span class="hljs-title class_">ErrorCode</span> { SUCCESS, NOT_FOUND, PERMISSION_DENIED };
BiDirectionalMap&lt;ErrorCode, std::string&gt; error_messages;
error_messages.<span class="hljs-built_in">insert</span>(ErrorCode::SUCCESS, <span class="hljs-string">"Operation successful"</span>);
error_messages.<span class="hljs-built_in">insert</span>(ErrorCode::NOT_FOUND, <span class="hljs-string">"Resource not found"</span>);
</code></pre>
<h2 data-id="heading-7">æ€»ç»“ä¸å»ºè®®</h2>
<p>å›åˆ°æˆ‘ä»¬æœ€åˆçš„é—®é¢˜ï¼šC++ä¸­æœ‰åŒå‘æ˜ å°„æ•°æ®ç»“æ„å—ï¼Ÿç­”æ¡ˆæ˜¯ï¼šæ ‡å‡†åº“ä¸­æ²¡æœ‰ç›´æ¥æä¾›ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°ã€‚</p>
<p><strong>ç»™å¼€å‘è€…çš„å»ºè®®ï¼š</strong></p>
<ol>
<li>
<p><strong>å¯¹äºå¤§å¤šæ•°é¡¹ç›®</strong>ï¼Œæ¨èä½¿ç”¨åŒ<code>std::unordered_map</code>çš„å®ç°ï¼Œå®ƒç®€å•ã€é«˜æ•ˆä¸”ä¸ä¾èµ–å¤–éƒ¨åº“ã€‚</p>
</li>
<li>
<p><strong>å¯¹äºå¤æ‚é¡¹ç›®</strong>ï¼Œå¦‚æœå·²ç»åœ¨ä½¿ç”¨Booståº“ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨<code>boost::bimap</code>ã€‚</p>
</li>
<li>
<p><strong>å¯¹äºæ€§èƒ½æ•æ„Ÿçš„åœºæ™¯</strong>ï¼ŒåŠ¡å¿…è¿›è¡ŒåŸºå‡†æµ‹è¯•ï¼Œé€‰æ‹©æœ€é€‚åˆå…·ä½“ç”¨ä¾‹çš„å®ç°ã€‚</p>
</li>
<li>
<p><strong>è®°å¾—å¤„ç†å¼‚å¸¸æƒ…å†µ</strong>ï¼Œç‰¹åˆ«æ˜¯åœ¨æ’å…¥é‡å¤keyæˆ–valueæ—¶çš„å¤„ç†ç­–ç•¥ã€‚</p>
</li>
</ol>
<p>åŒå‘æ˜ å°„è™½ç„¶ä¸åœ¨C++æ ‡å‡†åº“ä¸­ï¼Œä½†é€šè¿‡åˆç†çš„å°è£…å’Œè®¾è®¡ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥æ„å»ºå‡ºé«˜æ•ˆã€æ˜“ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚è¿™æ­£ä½“ç°äº†C++çš„å“²å­¦ï¼šä¸æä¾›ä½ ä¸éœ€è¦çš„ä¸œè¥¿ï¼Œä½†ç»™ä½ æ„å»ºæ‰€éœ€ä¸€åˆ‡çš„å·¥å…·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸŒ å®æ—¶ååŒ AIGCï¼šå¤šäººåœ¨çº¿ Web åˆ›ä½œçš„æŠ€æœ¯æ¶æ„è®¾è®¡]]></title>    <link>https://juejin.cn/post/7572408522439049251</link>    <guid>https://juejin.cn/post/7572408522439049251</guid>    <pubDate>2025-11-15T11:57:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7572408522439049251" data-draft-id="7572408522439032867" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸŒ å®æ—¶ååŒ AIGCï¼šå¤šäººåœ¨çº¿ Web åˆ›ä½œçš„æŠ€æœ¯æ¶æ„è®¾è®¡"/> <meta itemprop="keywords" content="å‰ç«¯,Trae,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-15T11:57:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸŒ å®æ—¶ååŒ AIGCï¼šå¤šäººåœ¨çº¿ Web åˆ›ä½œçš„æŠ€æœ¯æ¶æ„è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-15T11:57:51.000Z" title="Sat Nov 15 2025 11:57:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-15
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§  ä¸€ã€å‰è¨€ï¼šä»å•æœºAIåˆ°ç¾¤ä½“åˆ›ä½œçš„æ¼”åŒ–</h2>
<p>ä¸€ä¸ªäººå¯¹ç€AIç”»å›¾ã€ç”Ÿæˆæ–‡æ¡ˆï¼Œåƒç‹¬è‡ªè°ˆæ‹çˆ±ã€‚<br/>
è€Œå½“ä½ å’Œ5ä¸ªä¼™ä¼´ä¸€èµ·å®æ—¶æ”¹æç¤ºè¯ã€AIåŒæ­¥ç»˜ç”»æ—¶ï¼Œé‚£å°±æ˜¯<strong>å¤šçº¿ç¨‹çš„çˆ±æƒ…æ•…äº‹</strong>ã€‚</p>
<p>å®æ—¶ååŒ AIGCï¼ˆAI Generated Contentï¼‰æ­£å¤„åœ¨ç§‘å­¦ä¸è‰ºæœ¯çš„äº¤æ±‡ç‚¹ï¼š<br/>
å®ƒè¦ä¿è¯<strong>åŒæ­¥æ€§</strong>ã€<strong>ä¸€è‡´æ€§</strong>ã€<strong>ä½å»¶è¿Ÿæ„Ÿ</strong>ï¼ŒåŒæ—¶è®©AIåƒâ€œè‰ºæœ¯åŠ©ç†â€ï¼Œåœ¨å¤šç”¨æˆ·åŒæ—¶æ“ä½œä¸‹ä¿æŒé€»è¾‘ä¼˜é›…ï¼Œè€Œéç²¾ç¥åˆ†è£‚ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ§© äºŒã€ä¼ ç»ŸAIGCåä½œçš„é—®é¢˜ï¼šAI æ€»æ…¢åŠæ‹</h2>
<p>åœ¨ç»å…¸ AIGC åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¸¸è§çš„äº¤äº’æ¨¡å¼æ˜¯ï¼š</p>
<ol>
<li>ç”¨æˆ·æäº¤æç¤ºè¯ï¼›</li>
<li>æœåŠ¡ç«¯æ‰§è¡Œæ¨ç†ï¼›</li>
<li>æ¨¡å‹ç”Ÿæˆç»“æœï¼›</li>
<li>å®¢æˆ·ç«¯æ¸²æŸ“è¾“å‡ºã€‚</li>
</ol>
<p>å¬ä¸Šå»æµç¨‹æ¸…æ™°ï¼Œä½†â€œä¸€è‡´æ€§â€å´æ˜¯è‡´å‘½ä¼¤ï¼š</p>
<ul>
<li>A æ”¹äº†æç¤ºè¯ï¼ŒB è¿˜åœ¨åŸºäºæ—§ç‰ˆæœ¬ç”Ÿæˆã€‚</li>
<li>èŠå¤©åä½œåŒºå»¶è¿ŸåŒæ­¥ï¼ŒAIå¿½ç„¶è¾“å‡ºâ€œä¸¤ç§é£æ ¼æ··åˆâ€çš„å°´å°¬ä½œå“ã€‚</li>
<li>æ–‡ä»¶ç‰ˆæœ¬å†²çªï¼Œè®©AIä¸çŸ¥å¬è°çš„å‘½ä»¤ã€‚</li>
</ul>
<p>è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦çš„ä¸æ˜¯æ›´å¿«çš„æ˜¾å¡ï¼Œè€Œæ˜¯<strong>æ›´èªæ˜çš„æ¶æ„</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸ•¸ ä¸‰ã€åº•å±‚åŸç†ï¼šè®© AI ä¸äººç±»å…±äº«â€œçŠ¶æ€å®‡å®™â€</h2>
<p>è¦è®© AIGC å®æ—¶ååŒï¼Œç³»ç»Ÿå¿…é¡»å…·å¤‡ä¸€ç§èƒ½åŠ›ï¼š</p>
<blockquote>
<p><strong>æ¯ä¸ªç”¨æˆ·ä¸AIçœ‹åˆ°çš„ä¸–ç•Œï¼Œå¿…é¡»åŒæºã€åŒæ€ã€å¯å†²çªæ¢å¤ã€‚</strong></p>
</blockquote>
<p>è¿™èƒŒåçš„æ ¸å¿ƒæ€æƒ³æ˜¯<strong>CRDTs</strong>ï¼ˆConflict-free Replicated Data Typesï¼‰æˆ–<strong>Operational Transformation (OT)</strong> ã€‚</p>
<p>é€šä¿—ç‚¹è®²ï¼Œå®ƒåƒæ˜¯ä¸€ä¸ªâ€œçŠ¶æ€å¤šå…ƒå®‡å®™â€ï¼š<br/>
æ¯ä¸ªç”¨æˆ·éƒ½èƒ½è‡ªç”±ä¿®æ”¹è‡ªå·±çš„â€œå±€éƒ¨çŠ¶æ€â€ï¼Œç³»ç»Ÿä¼šåœ¨åå°<strong>åˆå¹¶æ—¶é—´çº¿</strong>ï¼Œç¡®ä¿æœ€ç»ˆçš„ç°å®ä¸å´©æºƒã€‚</p>
<hr/>
<h2 data-id="heading-3">âš™ï¸ å››ã€æ€»ä½“æ¶æ„è®¾è®¡â€”â€”è®©AIå‚ä¸ç¼–èˆ</h2>
<p>ä¼ ç»Ÿåä½œæ–‡æ¡£æ¶æ„ä¸€èˆ¬æ˜¯ç”¨æˆ·é—´ä¿¡æ¯åŒæ­¥ï¼Œ<br/>
è€Œåœ¨<strong>ååŒAIGC</strong>ä¸­ï¼ŒAIæœ¬èº«ä¹Ÿæˆä¸ºä¸€ä¸ªâ€œè™šæ‹Ÿå‚ä¸è€…â€ï¼Œå…±äº«åä½œç©ºé—´ä¸­çš„çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[ Client User A ]</span> â†”
                     \
                      <span class="hljs-selector-attr">[ Realtime Sync Layer ]</span> â†” <span class="hljs-selector-attr">[ AI Co-Generator Engine ]</span>
                     /
<span class="hljs-selector-attr">[ Client User B ]</span> â†”
</code></pre>
<h3 data-id="heading-4">å…³é”®æ¨¡å—è§£æï¼š</h3>
<ol>
<li>
<p><strong>å‰ç«¯å®æ—¶æ„ŸçŸ¥å±‚ï¼ˆWebRTC / WebSocketï¼‰</strong></p>
<ul>
<li>ä¿è¯æ¯«ç§’çº§çŠ¶æ€åŒæ­¥ï¼›</li>
<li>ä½¿ç”¨å·®é‡çŠ¶æ€ï¼ˆdelta stateï¼‰ä¼ è¾“ä»¥å‡å°‘å¸¦å®½ï¼›</li>
</ul>
</li>
<li>
<p><strong>åä½œçŠ¶æ€å¼•æ“ï¼ˆCRDT / OTï¼‰</strong></p>
<ul>
<li>ç®¡ç†æ‰€æœ‰ç”¨æˆ·çš„æ“ä½œæ„å›¾ï¼›</li>
<li>è‡ªåŠ¨å¤„ç†å†²çªã€æ—¶åºã€ç‰ˆæœ¬ï¼›</li>
</ul>
</li>
<li>
<p><strong>AI Co-Generator Engineï¼ˆå…±åˆ›å¼•æ“ï¼‰</strong></p>
<ul>
<li>ç›‘å¬å…¨å±€çŠ¶æ€å˜åŒ–ï¼›</li>
<li>ç»“åˆä¸Šä¸‹æ–‡ã€ä¿®æ”¹å†å²ã€ç”¨æˆ·æƒé‡ä½œè¯­ä¹‰èåˆç”Ÿæˆï¼›</li>
</ul>
</li>
<li>
<p><strong>æ¸²æŸ“ä¸åé¦ˆæ¨¡å—</strong></p>
<ul>
<li>è¿”å›AIç”Ÿæˆçš„ä¸­é—´ç‰‡æ®µï¼Œå®ç°å®æ—¶å¯è§†åŒ–åé¦ˆï¼›</li>
<li>è®©AIGCä»¿ä½›åœ¨å’Œæ¯ä½ç”¨æˆ·â€œå¯¹è¯ä½œç”»â€ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-5">ğŸ”§ äº”ã€æ ¸å¿ƒé€»è¾‘ç¤ºä¾‹ (JavaScript)</h2>
<p>ä¸‹é¢ä»¥ç²¾ç®€ç‰ˆä¼ªä»£ç å±•ç¤º <strong>å¤šç”¨æˆ·å®æ—¶å…±åˆ›AIGC</strong> çš„çŠ¶æ€é€šä¿¡ä¸åŒæ­¥ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// ğŸŒ Realtime Collaborative AIGC Prototype

const <span class="hljs-attr">users</span> = new Map()<span class="hljs-comment">;</span>
const <span class="hljs-attr">sharedState</span> = { prompt: <span class="hljs-string">""</span>, version: <span class="hljs-number">0</span> }<span class="hljs-comment">;</span>
const <span class="hljs-attr">WebSocketServer</span> = require(<span class="hljs-string">"ws"</span>).Server<span class="hljs-comment">;</span>

const <span class="hljs-attr">wss</span> = new WebSocketServer({ port: <span class="hljs-number">8080</span> })<span class="hljs-comment">;</span>

// æ¨¡æ‹Ÿ AI æ¨¡å—ï¼ˆå‡è£…èªæ˜ï¼‰
function generateAIResponse(prompt) {
  const <span class="hljs-attr">responses</span> = [
    <span class="hljs-string">"AIæ„æ€æ–°çš„è§†è§‰æ„å›¾..."</span>,
    <span class="hljs-string">"æ¨¡å‹æ­£åœ¨èåˆè‰ºæœ¯å®¶Aä¸Bçš„æç¤º..."</span>,
    <span class="hljs-string">"ğŸ¨ AIè¯´ï¼šè¿™ä¸€æ¬¡æˆ‘ä»¬ç”»å‡ºçµæ„Ÿçš„æ³¢åŠ¨ã€‚"</span>
  ]<span class="hljs-comment">;</span>
  return responses<span class="hljs-section">[Math.floor(Math.random() * responses.length)]</span><span class="hljs-comment">;</span>
}

// å¹¿æ’­å‡½æ•°
function broadcast(state) {
  for (const user of users.values()) {
    user.send(JSON.stringify(state))<span class="hljs-comment">;</span>
  }
}

wss.on("connection", function connection(ws) {
  const <span class="hljs-attr">id</span> = Date.now()<span class="hljs-comment">;</span>
  users.set(id, ws)<span class="hljs-comment">;</span>

  ws.on("message", (msg) =&gt; {
    const <span class="hljs-attr">data</span> = JSON.parse(msg)<span class="hljs-comment">;</span>
    <span class="hljs-attr">sharedState.prompt</span> = data.prompt<span class="hljs-comment">;</span>
    sharedState.version++<span class="hljs-comment">;</span>

    // è°ƒç”¨AIç”Ÿæˆé€»è¾‘
    const <span class="hljs-attr">aiReply</span> = generateAIResponse(sharedState.prompt)<span class="hljs-comment">;</span>
    <span class="hljs-attr">sharedState.aiResponse</span> = aiReply<span class="hljs-comment">;</span>

    broadcast(sharedState)<span class="hljs-comment">;</span>
  })<span class="hljs-comment">;</span>

  ws.on("close", () =&gt; users.delete(id))<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>ğŸ’¡ ä¸Šè¿°æ¶æ„æ¨¡æ‹Ÿäº†ä¸€ä¸ªéå¸¸åŸå§‹çš„â€œååŒAIç”Ÿæˆç³»ç»Ÿâ€ï¼š</p>
<ul>
<li>æ‰€æœ‰äººå…±äº«ä¸€ä¸ªæç¤ºè¯çŠ¶æ€ï¼›</li>
<li>å®æ—¶å¹¿æ’­AIçš„å“åº”ï¼›</li>
<li>æ‰€æœ‰å®¢æˆ·ç«¯éƒ½ä¿æŒåŒæ­¥â€œåˆ›é€ å®‡å®™â€ã€‚</li>
</ul>
<p>çœŸå®æƒ…å†µä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ Redis + CRDT + Vector Clock ç­‰æœºåˆ¶åšæ›´ç¨³å¥çš„ç‰ˆæœ¬åˆå¹¶ã€‚</p>
<hr/>
<h2 data-id="heading-6">ğŸ’¬ å…­ã€ä¸€è‡´æ€§ â‰  åŒæ­¥ï¼Œè€Œæ˜¯â€œæ—¶é—´çš„ç¼–æ’â€</h2>
<p>å¾ˆå¤šå·¥ç¨‹å¸ˆè¯¯ä»¥ä¸º<strong>åŒæ­¥</strong>å°±ä»£è¡¨ä¸€è‡´æ€§ï¼Œ<br/>
ä½†åœ¨å®æ—¶AIGCä¸­ï¼Œä¸€è‡´æ€§æ›´åƒæ˜¯ä¸€ç§<strong>è¯­ä¹‰å…±è¯†</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·Aè¾“å…¥â€œæ·»åŠ è“è‰²ç¯å…‰â€ï¼›</li>
<li>ç”¨æˆ·Båœ¨åŒä¸€æ—¶åˆ»ä¿®æ”¹â€œèƒŒæ™¯ä¸ºå¤œç©ºâ€ï¼›</li>
<li>AIå¿…é¡»æ˜ç™½ä¸¤ä¸ªæ„å›¾ä¸æ˜¯å†²çªï¼Œè€Œæ˜¯<strong>åŒåœºè¡¨æ¼”</strong>ã€‚</li>
</ul>
<p>æ‰€ä»¥æœªæ¥çš„AIGCç³»ç»Ÿï¼Œä¸ä»…éœ€è¦è¯†åˆ«æç¤ºæ–‡æœ¬ï¼Œè¿˜è¦ç†è§£<strong>å¤šäººè¯­æ„ä¸»å¼ ä¹‹é—´çš„å’Œè°å†²çªå…³ç³»</strong>ã€‚</p>
<p>å¯ä»¥è¯´ï¼ŒAIä¸ä»…ç”Ÿæˆå›¾åƒï¼Œä¹Ÿè¦æ‡‚å¾—â€œç¤¾ä¼šååŒè¯­è¨€å­¦â€ã€‚</p>
<hr/>
<h2 data-id="heading-7">ğŸ”® ä¸ƒã€å“²å­¦å°¾å£°ï¼šAIï¼Œä¸åªæ˜¯ç”»å®¶ï¼Œæ›´æ˜¯åˆä½œè€…</h2>
<p>å½“å¤šäººåŒæ—¶åœ¨Webé¡µé¢ä¸Šä¸AIå…±åŒåˆ›ä½œæ—¶ï¼Œ<br/>
æˆ‘ä»¬å…¶å®åœ¨æ„å»ºä¸€ç§<strong>æ–°çš„é›†ä½“æ™ºèƒ½ç»“æ„</strong>ï¼š</p>
<blockquote>
<p>ç”¨æˆ·è´¡çŒ®ä¸Šä¸‹æ–‡ï¼ŒAIè´¡çŒ®æ¨¡å¼ï¼›<br/>
ç³»ç»Ÿä¸€è‡´æ¨¡å‹ç»´æŒçŠ¶æ€ï¼›<br/>
åˆ›é€ åŠ›ä¸å†æ˜¯ä¸ªä½“çš„ï¼Œè€Œæ˜¯å…±äº«çš„èµ„æºåœºã€‚</p>
</blockquote>
<p>æˆ–è®¸æœªæ¥çš„â€œç”»å¸ƒâ€ä¸æ˜¯Canvasï¼Œè€Œæ˜¯ä¸€ä¸ªæœ‰ç”Ÿå‘½çš„ã€å¯äº¤äº’çš„AIç½‘ç»œç”Ÿå‘½ä½“ã€‚<br/>
æ¯ä¸€æ¬¡æ–‡å­—è¾“å…¥ã€æ¯ä¸€ç¬”ç¬”è§¦ï¼Œä¸åªæ˜¯æ•°æ®ï¼Œè€Œæ˜¯ä¸€æ¬¡åœ¨<strong>äººæœºå…±æŒ¯</strong>ä¸‹çš„ååŒè¯—ç¯‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>