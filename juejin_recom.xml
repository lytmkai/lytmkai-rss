<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[Redisæ€§èƒ½ç¿»å€çš„5ä¸ªå…³é”®ç­–ç•¥ï¼šä»æ…¢æŸ¥è¯¢åˆ°ç™¾ä¸‡QPSçš„å®æˆ˜ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7589940913766465571</link>    <guid>https://juejin.cn/post/7589940913766465571</guid>    <pubDate>2026-01-01T04:16:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589940913766465571" data-draft-id="7589870367764398120" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisæ€§èƒ½ç¿»å€çš„5ä¸ªå…³é”®ç­–ç•¥ï¼šä»æ…¢æŸ¥è¯¢åˆ°ç™¾ä¸‡QPSçš„å®æˆ˜ä¼˜åŒ–"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-01T04:16:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisæ€§èƒ½ç¿»å€çš„5ä¸ªå…³é”®ç­–ç•¥ï¼šä»æ…¢æŸ¥è¯¢åˆ°ç™¾ä¸‡QPSçš„å®æˆ˜ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T04:16:55.000Z" title="Thu Jan 01 2026 04:16:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Redisæ€§èƒ½ç¿»å€çš„5ä¸ªå…³é”®ç­–ç•¥ï¼šä»æ…¢æŸ¥è¯¢åˆ°ç™¾ä¸‡QPSçš„å®æˆ˜ä¼˜åŒ–</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Redisä½œä¸ºé«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œå¹¿æ³›åº”ç”¨äºç¼“å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å®æ—¶ç»Ÿè®¡ç­‰åœºæ™¯ã€‚ä½†éšç€ä¸šåŠ¡è§„æ¨¡çš„å¢é•¿ï¼Œè®¸å¤šå›¢é˜Ÿä¼šé‡åˆ°æ€§èƒ½ç“¶é¢ˆï¼šæ…¢æŸ¥è¯¢å †ç§¯ã€QPSï¼ˆQueries Per Secondï¼‰éš¾ä»¥çªç ´ã€å†…å­˜å ç”¨é£™å‡ç­‰é—®é¢˜ã€‚å¦‚ä½•ä»åº•å±‚åŸç†å‡ºå‘ï¼Œç³»ç»Ÿæ€§ä¼˜åŒ–Redisæ€§èƒ½ï¼Ÿæœ¬æ–‡å°†æ·±å…¥å‰–æ5ä¸ªå…³é”®ç­–ç•¥ï¼Œæ¶µç›–æ•°æ®ç»“æ„é€‰æ‹©ã€æŒä¹…åŒ–è°ƒä¼˜ã€é›†ç¾¤é…ç½®ç­‰æ ¸å¿ƒé¢†åŸŸï¼Œç»“åˆçœŸå®æ¡ˆä¾‹å±•ç¤ºå¦‚ä½•å®ç°ä»æ…¢æŸ¥è¯¢æ²»ç†åˆ°ç™¾ä¸‡çº§QPSçš„é£è·ƒã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸€ã€æ…¢æŸ¥è¯¢åˆ†æä¸ä¼˜åŒ–ï¼šä»è¢«åŠ¨æ’æŸ¥åˆ°ä¸»åŠ¨é¢„é˜²</h2>
<h3 data-id="heading-3">1.1 è¯†åˆ«æ…¢æŸ¥è¯¢çš„æ ¹æº</h3>
<p>Redisçš„<code>SLOWLOG</code>å‘½ä»¤æ˜¯å®šä½æ€§èƒ½é—®é¢˜çš„ç¬¬ä¸€å·¥å…·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">SLOWLOG GET 10  <span class="hljs-comment"># è·å–æœ€è¿‘10æ¡æ…¢æŸ¥è¯¢è®°å½•</span>
</code></pre>
<p>å…³é”®æŒ‡æ ‡åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>æ‰§è¡Œæ—¶é—´</strong>ï¼šè¶…è¿‡10msçš„æŸ¥è¯¢éœ€é‡ç‚¹å…³æ³¨ï¼ˆé»˜è®¤é˜ˆå€¼å¯é€šè¿‡<code>slowlog-log-slower-than</code>è°ƒæ•´ï¼‰</li>
<li><strong>å‘½ä»¤ç±»å‹</strong>ï¼šKEYS *ã€å…¨é‡HGETALLç­‰O(N)å¤æ‚åº¦å‘½ä»¤æ˜¯å¸¸è§ç“¶é¢ˆ</li>
</ul>
<h3 data-id="heading-4">1.2 é«˜é¢‘é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-5"><strong>æ¡ˆä¾‹1ï¼šå¤§Keyæ‰«æ</strong></h4>
<ul>
<li><strong>é—®é¢˜</strong>ï¼šä¸€æ¬¡HGETALLæ“ä½œè¿”å›10MBæ•°æ®ï¼Œé˜»å¡ç½‘ç»œI/Oçº¿ç¨‹</li>
<li><strong>ä¼˜åŒ–</strong>ï¼šæ”¹ç”¨HSCANå¢é‡éå†ï¼ˆæ—¶é—´å¤æ‚åº¦O(1) per callï¼‰</li>
</ul>
<h4 data-id="heading-6"><strong>æ¡ˆä¾‹2ï¼šä¸åˆç†çš„äº‹åŠ¡ä½¿ç”¨</strong></h4>
<ul>
<li><strong>åæ¨¡å¼</strong>ï¼šMULTIä¸­åŒ…å«å¤šä¸ªéå…³è”å‘½ä»¤ï¼Œå¯¼è‡´æ’é˜Ÿå»¶è¿Ÿ</li>
<li><strong>ä¼˜åŒ–</strong>ï¼šä½¿ç”¨Pipelineæ›¿ä»£éå¿…è¦äº‹åŠ¡ï¼ˆå‡å°‘RTTä½†æ— åŸå­æ€§ä¿è¯ï¼‰</li>
</ul>
<h3 data-id="heading-7">1.3 é«˜çº§æŠ€å·§ï¼šLuaè„šæœ¬è°ƒä¼˜</h3>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">-- é”™è¯¯ç¤ºä¾‹ï¼šåœ¨å¾ªç¯ä¸­è°ƒç”¨Rediså‘½ä»¤</span>
<span class="hljs-keyword">for</span> i=<span class="hljs-number">1</span>,<span class="hljs-number">1000</span> <span class="hljs-keyword">do</span>
    redis.call(<span class="hljs-string">"GET"</span>, <span class="hljs-string">"key_"</span>..i)
<span class="hljs-keyword">end</span>

<span class="hljs-comment">-- æ­£ç¡®åšæ³•ï¼šæ‰¹é‡æ“ä½œ</span>
<span class="hljs-keyword">local</span> results = {}
<span class="hljs-keyword">for</span> i=<span class="hljs-number">1</span>,<span class="hljs-number">1000</span> <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">table</span>.<span class="hljs-built_in">insert</span>(results, redis.call(<span class="hljs-string">"GET"</span>, <span class="hljs-string">"key_"</span>..i))
<span class="hljs-keyword">end</span>
<span class="hljs-keyword">return</span> results
</code></pre>
<hr/>
<h2 data-id="heading-8">äºŒã€æ•°æ®ç»“æ„é€‰å‹è‰ºæœ¯ï¼šç©ºé—´ä¸æ—¶é—´çš„å¹³è¡¡</h2>
<h3 data-id="heading-9">2.1 Redisæ•°æ®ç»“æ„çš„éšè—æˆæœ¬</h3>

























<table><thead><tr><th>ç»“æ„ç±»å‹</th><th>å†…å­˜å¼€é”€ç¤ºä¾‹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>String</td><td>Key+Valueå„å é¢å¤–64å­—èŠ‚</td><td>ç®€å•é”®å€¼å¯¹</td></tr><tr><td>Hash</td><td>Fieldé¢å¤–56å­—èŠ‚/æ¡ç›®</td><td>å¯¹è±¡å±æ€§å­˜å‚¨</td></tr><tr><td>ZSet</td><td>Entryé¢å¤–64å­—èŠ‚/æˆå‘˜</td><td>æ’è¡Œæ¦œ/åˆ†é¡µæŸ¥è¯¢</td></tr></tbody></table>
<h3 data-id="heading-10">2.2 HyperLogLogçš„é­”æ³•</h3>
<p>ç»Ÿè®¡UVï¼ˆç‹¬ç«‹è®¿å®¢ï¼‰æ—¶çš„å†…å­˜å¯¹æ¯”ï¼š</p>
<ul>
<li><strong>åŸå§‹æ–¹æ¡ˆ</strong>ï¼šSETå­˜å‚¨ç”¨æˆ·IDï¼Œ10ä¸‡ç”¨æˆ·â‰ˆ15MB</li>
<li><strong>ä¼˜åŒ–æ–¹æ¡ˆ</strong>ï¼šPFADD+PFCOUNTï¼Œè¯¯å·®ç‡0.81%ä¸‹ä»…éœ€12KB</li>
</ul>
<h3 data-id="heading-11">2.3 Stream vs Listçš„æ¶ˆæ¯é˜Ÿåˆ—æŠ‰æ‹©</h3>
<ul>
<li><strong>List</strong>æ›´é€‚åˆçŸ­æ—¶æ¶ˆè´¹çš„åœºæ™¯ï¼ˆLPUSH+RPOPï¼‰</li>
<li><strong>Stream</strong>æ”¯æŒå¤šæ¶ˆè´¹è€…ç»„å’Œæ¶ˆæ¯å›æº¯ï¼ˆXADD+XREADGROUPï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-12">ä¸‰ã€æŒä¹…åŒ–ç­–ç•¥æ·±åº¦è°ƒä¼˜</h2>
<h3 data-id="heading-13">AOFä¸RDBçš„æ··åˆéƒ¨ç½²å®è·µ</h3>
<pre><code class="hljs language-conf" lang="conf"># redis.confå…³é”®é…ç½®
appendfsync everysec         # AOFå¹³è¡¡å®‰å…¨æ€§ä¸æ€§èƒ½
aof-use-rdb-preamble yes     # RDB+AOFæ··åˆæ¨¡å¼èŠ‚çœé‡å¯åŠ è½½æ—¶é—´
save ""                      # ç¦ç”¨RDBè‡ªåŠ¨è§¦å‘æ”¹ä¸ºæ‰‹åŠ¨BGSAVE
</code></pre>
<h3 data-id="heading-14">Fork-less RDBæ–°ç‰¹æ€§å®æµ‹</h3>
<p>Redis7.0å¼•å…¥çš„non-blocking RDBåœ¨50GBå®ä¾‹ä¸Šçš„è¡¨ç°ï¼š</p>




















<table><thead><tr><th>Redisç‰ˆæœ¬</th><th>Forkè€—æ—¶</th><th>BGSAVEæ€»è€—æ—¶</th></tr></thead><tbody><tr><td>v6.2</td><td>12s</td><td>18s</td></tr><tr><td>v7.0</td><td>&lt;1ms</td><td>-</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-15">IV. Clusterä¸Proxyæ¶æ„è¿›é˜¶</h2>
<h3 data-id="heading-16">Codis vs Redis Clusteré€‰å‹çŸ©é˜µ</h3>



















<table><thead><tr><th>ç»´åº¦</th><th>Codis</th><th>Redis Cluster</th></tr></thead><tbody><tr><td>æ‰©å®¹å¹³æ»‘åº¦</td><td>Proxyå±‚æ— æ„ŸçŸ¥</td><td>éœ€è¦resharding</td></tr><tr><td>è·¨èŠ‚ç‚¹äº‹åŠ¡     æ”¯æŒ                  ä¸æ”¯æŒ</td><td/></tr></tbody></table>
<h4 data-id="heading-17">Proxyé…ç½®ç¤ºä¾‹ï¼ˆTwemproxyï¼‰ï¼š</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">redis-cluster:</span>
 <span class="hljs-attr">listen:</span> <span class="hljs-string">:6379</span> 
 <span class="hljs-attr">hash:</span> <span class="hljs-string">fnv1a_64</span> 
 <span class="hljs-attr">distribution:</span> <span class="hljs-string">ketama</span> 
 <span class="hljs-attr">servers:</span>
   <span class="hljs-bullet">-</span> <span class="hljs-string">:7000:1</span> <span class="hljs-string">server1</span> 
   <span class="hljs-bullet">-</span> <span class="hljs-string">:7001:1</span> <span class="hljs-string">server2</span> 
</code></pre>
<hr/>
<h2 data-id="heading-18">Vï¼å®¢æˆ·ç«¯æœ€ä½³å®è·µæ‰‹å†Œ</h2>
<p>Jedisè¿æ¥æ± é»„é‡‘å‚æ•°ï¼š</p>
<pre><code class="hljs language-java" lang="java">GenericObjectPoolConfig config=<span class="hljs-keyword">new</span> <span class="hljs-title class_">GenericObjectPoolConfig</span>(); 
config.setMaxTotal(<span class="hljs-number">500</span>);<span class="hljs-comment">//æœ€å¤§è¿æ¥æ•°=é¢„ä¼°QPS*å¹³å‡RT(ms)/1000*å†—ä½™ç³»æ•°(å»ºè®®120%)</span>
config.setMaxIdle(<span class="hljs-number">30</span>);<span class="hljs-comment">//</span>
config.setMinEvictableIdleTime(Duration.ofMinutes(<span class="hljs-number">30</span>));
</code></pre>
<hr/>
<p>##ç»“è¯­</p>
<p>é€šè¿‡æœ¬æ–‡çš„äº”ç»´ä¼˜åŒ–ä½“ç³»â€”â€”ä»å¾®è§‚çš„å‘½ä»¤æ‰§è¡Œåˆ°å®è§‚çš„æ¶æ„è®¾è®¡â€”â€”æˆ‘ä»¬æˆåŠŸå°†æŸç”µå•†å¹³å°çš„Redisé›†ç¾¤å³°å€¼QPSä»20ä¸‡æå‡è‡³150ä¸‡ã€‚è®°ä½ï¼ŒçœŸæ­£çš„æ€§èƒ½é«˜æ‰‹ä¸åœ¨äºç‚«æŠ€å¼çš„å‚æ•°è°ƒæ•´ï¼Œè€Œåœ¨äºå¯¹ä¸šåŠ¡åœºæ™¯ä¸ç³»ç»ŸåŸç†çš„åŒé‡ç†è§£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Springã€‘ä½¿ç”¨æ³¨è§£å¼€å‘]]></title>    <link>https://juejin.cn/post/7589893170387517440</link>    <guid>https://juejin.cn/post/7589893170387517440</guid>    <pubDate>2026-01-01T03:01:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589893170387517440" data-draft-id="7589881050769702946" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Springã€‘ä½¿ç”¨æ³¨è§£å¼€å‘"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-01T03:01:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ZoeGranger"/> <meta itemprop="url" content="https://juejin.cn/user/3704680555488651"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Springã€‘ä½¿ç”¨æ³¨è§£å¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3704680555488651/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ZoeGranger
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T03:01:37.000Z" title="Thu Jan 01 2026 03:01:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è®°å½•è·Ÿç€ç‹‚ç¥å­¦Springçš„å†ç¨‹ï¼ˆç¬¬14é›†ï¼‰~</p>
<h2 data-id="heading-0">1.å¼€å¯åŒ…æ‰«æ</h2>
<p><code>&lt;context:component-scan base-package="com.pojo"/&gt;</code></p>
<p>å¼€å¯é…ç½®ï¼Œæ‰èƒ½è¢« Spring å®¹å™¨è¯†åˆ«å¹¶æ‰«æï¼Œè¿™ä¸ªåŒ…ä¸‹çš„æ³¨è§£æ‰ä¼šç”Ÿæ•ˆã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpring ä¼šè‡ªåŠ¨æ‰«ææ³¨è§£æ‰€åœ¨åŒ…åŠå…¶å­åŒ…ä¸‹çš„è¿™äº›ç±»ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">"http://www.springframework.org/schema/context"</span>
       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
                       https://www.springframework.org/schema/beans/spring-beans.xsd
                       http://www.springframework.org/schema/context
                       https://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æŒ‡å®šè¦æ‰«æçš„åŒ…ï¼Œè¿™ä¸ªåŒ…ä¸‹çš„æ³¨è§£å°±ä¼šç”Ÿæ•ˆ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">context:component-scan</span> <span class="hljs-attr">base-package</span>=<span class="hljs-string">"com.pojo"</span>/&gt;</span>

    <span class="hljs-comment">&lt;!-- å¼€å¯æ³¨è§£çš„æ”¯æŒ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">context:annotation-config</span>/&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æ— éœ€æŠŠuserè¿™ä¸ªbeanæ³¨å†Œåœ¨è¿™é‡Œï¼Œç®€åŒ–é…ç½®æ–‡ä»¶ï¼Œç›´æ¥ç”¨æ³¨è§£å°±å¯ä»¥ --&gt;</span>
    
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
<h2 data-id="heading-1">2.@Componentæ³¨è§£</h2>
<ul>
<li>åŠ ä¸Š@Componentæ³¨è§£ï¼Œç­‰ä»·äºåœ¨é…ç½®æ–‡ä»¶é‡Œå†™<code>&lt;bean id="user" class="com.pojo.User" /&gt;</code>ï¼Œè¿™ä¸ªbeanæ³¨å†Œåˆ°Springé‡Œé¢ï¼Œè¢«Springç®¡ç†äº†ã€‚</li>
<li>é»˜è®¤çš„bean idæ˜¯ç±»åé¦–å­—æ¯å°å†™</li>
<li>ä¹Ÿå¯ä»¥æŒ‡å®šbean id  <code>@Component("uuuuser")</code></li>
</ul>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>{
  
  <span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Zoe"</span>;

}
</code></pre>
<h4 data-id="heading-2">2.1 @Valueæ³¨è§£</h4>
<p>è‹¥ä¸æƒ³æ˜¾å¼åœ°èµ‹å±æ€§å€¼ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨æ³¨è§£çš„æ–¹å¼ï¼Œç­‰ä»·äºåœ¨é…ç½®æ–‡ä»¶é‡Œå†™ï¼š</p>
<p><code>&lt;property name="name" value="Zoe"/&gt;</code></p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>{
  <span class="hljs-meta">@Value("Zoe")</span>
  <span class="hljs-keyword">public</span> String name;

}
</code></pre>
<p>@Valueä¹Ÿå¯ä»¥æ”¾åœ¨setæ–¹æ³•ä¸Šé¢ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>{
 
  <span class="hljs-keyword">public</span> String name;
  
  <span class="hljs-meta">@Value("Zoe")</span>
  <span class="hljs-keyword">public</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span>{
      <span class="hljs-built_in">this</span>.name = name;
  }

}
</code></pre>
<h2 data-id="heading-3">3.@Component çš„è¡ç”Ÿæ³¨è§£</h2>
<p>@ComponentÂ æ˜¯è¿™ä¸‰ä¸ªæ³¨è§£ï¼ˆ<code>@Controller</code>/<code>@Service</code>/<code>@Repository</code>ï¼‰çš„çˆ¶æ³¨è§£ï¼Œåä¸‰è€…æ˜¯Â @ComponentÂ åœ¨ä¸åŒä¸šåŠ¡å±‚çš„ä¸“å±ç»†åŒ–æ³¨è§£ï¼Œ<strong>æœ¬è´¨éƒ½æ˜¯å°†ç±»æ³¨å†Œä¸º Spring å®¹å™¨ä¸­çš„ Bean</strong>ã€‚</p>



































<table><thead><tr><th>å¯¹åº”æ¶æ„</th><th>æ³¨è§£</th><th>åº”ç”¨åœºæ™¯</th><th>ä¸“å±é™„åŠ åŠŸèƒ½</th></tr></thead><tbody><tr><td>æ— ç‰¹å®šå±‚çº§</td><td>@Component</td><td>é€šç”¨åœºæ™¯</td><td>æ— ä¸“å±é™„åŠ åŠŸèƒ½ï¼Œä»…ä½œä¸ºåŸºç¡€çš„ Bean æ³¨å†Œæ³¨è§£ï¼Œé€‚ç”¨äºæ— æ³•å½’ç±»åˆ°å…¶ä»–ä¸‰å±‚çš„å·¥å…·ç±»ã€å…¬å…±ç±»</td></tr><tr><td>dao</td><td>@Repository</td><td>æ“ä½œæ•°æ®åº“ï¼Œå°è£…æ•°æ®è®¿é—®é€»è¾‘</td><td>1. æ ‡è¯†è¯¥ç±»ä¸ºæ•°æ®è®¿é—®å±‚ï¼Œç”¨äºå°è£…æ•°æ®åº“æ“ä½œï¼ˆå¦‚ MyBatis çš„ Mapperã€JPA çš„ Repositoryï¼‰ï¼›2. è‡ªåŠ¨è½¬æ¢æ•°æ®åº“è®¿é—®å¼‚å¸¸ï¼ˆå°† JDBC/Hibernate çš„åŸç”Ÿå¼‚å¸¸è½¬æ¢ä¸º Spring ç»Ÿä¸€çš„Â <code>DataAccessException</code>Â å¼‚å¸¸ä½“ç³»ï¼‰</td></tr><tr><td>service</td><td>@Service</td><td>å°è£…ä¸šåŠ¡é€»è¾‘ï¼Œå¤„ç†æ ¸å¿ƒä¸šåŠ¡</td><td>æ— å¼ºåˆ¶é™„åŠ åŠŸèƒ½ï¼Œä½†çº¦å®šä¿—æˆç”¨äºä¸šåŠ¡é€»è¾‘å±‚ï¼Œä¾¿äºå›¢é˜Ÿåä½œå’Œä»£ç é˜…è¯»ï¼Œæ˜¯ä¸šåŠ¡å±‚çš„ä¸“å±æ ‡è¯†</td></tr><tr><td>controller</td><td>@Controller</td><td>æ¥æ”¶å‰ç«¯è¯·æ±‚ï¼Œæ§åˆ¶è¯·æ±‚æµè½¬</td><td>1. æ ‡è¯†è¯¥ç±»ä¸º Spring MVC çš„æ§åˆ¶å™¨ï¼Œèƒ½å¤„ç† HTTP è¯·æ±‚ï¼ˆé…åˆÂ <code>@RequestMapping</code>Â ç­‰æ³¨è§£ï¼‰ï¼›2. æ”¯æŒè¯·æ±‚å‚æ•°ç»‘å®šã€è§†å›¾è·³è½¬ã€å“åº”æ•°æ®å°è£…ï¼ˆJSON / é¡µé¢ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-4">3.1 @Controller</h3>
<ul>
<li>ä¸“é—¨ç”¨äº MVC æ¶æ„çš„æ§åˆ¶å±‚ï¼Œæ˜¯å‰ç«¯è¯·æ±‚çš„å…¥å£ï¼Œè´Ÿè´£æ¥æ”¶å‰ç«¯ä¼ é€’çš„å‚æ•°ã€è°ƒç”¨æœåŠ¡å±‚æ–¹æ³•ã€è¿”å›å“åº”ç»“æœï¼ˆé¡µé¢æˆ– JSON æ•°æ®ï¼‰ã€‚</li>
<li>å¿…é¡»é…åˆ Spring MVC çš„ç›¸å…³æ³¨è§£ï¼ˆå¦‚Â <code>@GetMapping</code>ã€<code>@PostMapping</code>ã€<code>@ResponseBody</code>ï¼‰ä½¿ç”¨ï¼Œç¤ºä¾‹ï¼š</li>
</ul>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// è®¢å•æ§åˆ¶å™¨ï¼Œæ¥æ”¶è®¢å•ç›¸å…³è¯·æ±‚ </span>
<span class="hljs-meta">@Controller</span> 
<span class="hljs-meta">@RequestMapping("/order")</span> 
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderController</span> { 
    <span class="hljs-comment">// æ³¨å…¥æœåŠ¡å±‚ Bean </span>
    <span class="hljs-meta">@Autowired</span> 
    <span class="hljs-keyword">private</span> OrderService orderService; 
    <span class="hljs-comment">// å¤„ç†æŸ¥è¯¢è®¢å•åˆ—è¡¨çš„è¯·æ±‚ </span>
    <span class="hljs-meta">@GetMapping("/list")</span> 
    <span class="hljs-meta">@ResponseBody</span> 
    <span class="hljs-keyword">public</span> R&lt;List&lt;Order&gt;&gt; <span class="hljs-title function_">getOrderList</span><span class="hljs-params">()</span> { 
        List&lt;Order&gt; orderList = orderService.listAll(); 
        <span class="hljs-keyword">return</span> R.success(orderList); 
    } 
}
</code></pre>
<h3 data-id="heading-5">3.2 @Service</h3>
<p>ä¸“é—¨ç”¨äºå°è£…ä¸šåŠ¡é€»è¾‘ï¼Œæ˜¯æ§åˆ¶å±‚å’ŒæŒä¹…å±‚çš„ä¸­é—´å±‚ï¼Œè´Ÿè´£å¤„ç†å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚æ•°æ®æ ¡éªŒã€äº‹åŠ¡å¤„ç†ã€å¤šæŒä¹…å±‚æ–¹æ³•è°ƒç”¨ï¼‰ã€‚</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// è®¢å•æœåŠ¡ç±»ï¼Œå°è£…è®¢å•ç›¸å…³ä¸šåŠ¡é€»è¾‘</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    <span class="hljs-comment">// æ³¨å…¥æŒä¹…å±‚ Bean</span>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> OrderDao orderDao;
    
    <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘ï¼šæŸ¥è¯¢æ‰€æœ‰è®¢å•</span>
    <span class="hljs-keyword">public</span> List&lt;Order&gt; <span class="hljs-title function_">listAll</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å¯æ·»åŠ ä¸šåŠ¡æ ¡éªŒã€æ•°æ®è½¬æ¢ç­‰é€»è¾‘</span>
        <span class="hljs-keyword">return</span> orderRepository.findAll();
    }
}
</code></pre>
<h3 data-id="heading-6">3.3 @Repository</h3>
<ul>
<li>ä¸“é—¨ç”¨äºå°è£…æ•°æ®è®¿é—®é€»è¾‘ï¼Œè´Ÿè´£ä¸æ•°æ®åº“äº¤äº’ï¼ˆå¦‚å¢åˆ æ”¹æŸ¥ã€åˆ†é¡µæŸ¥è¯¢ï¼‰ï¼Œå¯¹åº”ä¼ ç»Ÿçš„ Dao å±‚ã€‚</li>
<li>æ ¸å¿ƒé™„åŠ åŠŸèƒ½æ˜¯ã€Œå¼‚å¸¸è½¬æ¢ã€ï¼ŒSpring ä¼šè‡ªåŠ¨å°†è¯¥ç±»ä¸­æŠ›å‡ºçš„æ•°æ®åº“åŸç”Ÿå¼‚å¸¸ï¼ˆå¦‚Â <code>SQLException</code>ï¼‰è½¬æ¢ä¸º Spring ç»Ÿä¸€çš„Â <code>DataAccessException</code>Â å¼‚å¸¸ä½“ç³»ï¼Œä¾¿äºå…¨å±€å¼‚å¸¸å¤„ç†ï¼Œç¤ºä¾‹ï¼š</li>
</ul>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// è®¢å•æŒä¹…å±‚ï¼Œæ“ä½œæ•°æ®åº“</span>
<span class="hljs-meta">@Repository</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderRepository</span> {
    <span class="hljs-comment">// æ³¨å…¥ JdbcTemplate æ“ä½œæ•°æ®åº“</span>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> JdbcTemplate jdbcTemplate;
    
    <span class="hljs-comment">// æ•°æ®è®¿é—®é€»è¾‘ï¼šæŸ¥è¯¢æ‰€æœ‰è®¢å•</span>
    <span class="hljs-keyword">public</span> List&lt;Order&gt; <span class="hljs-title function_">findAll</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SELECT * FROM t_order"</span>;
        <span class="hljs-keyword">return</span> jdbcTemplate.query(sql, <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanPropertyRowMapper</span>&lt;&gt;(Order.class));
    }
}
</code></pre>
<h2 data-id="heading-7">4.ä½œç”¨åŸŸ</h2>
<p>@Scopeæ³¨è§£å¯ä»¥æŒ‡å®šbeanä½œç”¨åŸŸï¼šå•ä¾‹æ¨¡å¼ã€åŸå‹æ¨¡å¼ï¼Œç­‰ä»·äºï¼š</p>
<p><code>&lt;bean id="user" class="com.pojo.User" scope="singleton" /&gt;</code></p>
<p>ä½¿ç”¨æ–¹å¼ï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-meta">@Component</span>
<span class="hljs-meta">@Scope("singleton")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span>{
  
  <span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Zoe"</span>;

}
</code></pre>
<h2 data-id="heading-8">xmlä¸æ³¨è§£å¯¹æ¯”</h2>
<p>xmlæ›´åŠ ä¸‡èƒ½ï¼Œé€‚ç”¨äºä»»ä½•åœºåˆï¼Œä½†æ˜¯è¾ƒä¸ºç¹çã€‚
æ³¨è§£å¯ä»¥ç®€åŒ–ä¸€äº›æ“ä½œï¼Œä½†çµæ´»æ€§è¾ƒå·®ã€‚</p>
<p>å‚è€ƒè§†é¢‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1WE411d7Dv%2F%3Fspm_id_from%3D333.788.videopod.episodes%26vd_source%3Dc14f0578c618dac9f59449d66709b33a%26p%3D14" target="_blank" title="https://www.bilibili.com/video/BV1WE411d7Dv/?spm_id_from=333.788.videopod.episodes&amp;vd_source=c14f0578c618dac9f59449d66709b33a&amp;p=14" ref="nofollow noopener noreferrer">14ã€Springæ³¨è§£å¼€å‘_å“”å“©å“”å“©_bilibili</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025å¹´å“”å“©å“”å“©æŠ€æœ¯ç²¾é€‰æŠ€æœ¯å¹²è´§]]></title>    <link>https://juejin.cn/post/7589893746080383017</link>    <guid>https://juejin.cn/post/7589893746080383017</guid>    <pubDate>2026-01-01T04:18:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589893746080383017" data-draft-id="7589823928414044186" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025å¹´å“”å“©å“”å“©æŠ€æœ¯ç²¾é€‰æŠ€æœ¯å¹²è´§"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-01T04:18:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“”å“©å“”å“©æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/3030701626893405"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025å¹´å“”å“©å“”å“©æŠ€æœ¯ç²¾é€‰æŠ€æœ¯å¹²è´§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3030701626893405/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“”å“©å“”å“©æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T04:18:07.000Z" title="Thu Jan 01 2026 04:18:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ—¶å…‰åŒ†åŒ†ï¼Œã€å“”å“©å“”å“©æŠ€æœ¯ã€‘å…¬ä¼—å·åˆä¸å¤§å®¶æºæ‰‹èµ°è¿‡äº†å……å®çš„ä¸€å¹´ã€‚2025å¹´æˆ‘ä»¬å…±ç²¾å¿ƒæ‰“é€ äº†56ç¯‡åŸåˆ›æŠ€æœ¯æ–‡ç« ï¼Œå…¨æ–¹ä½ã€å¤šè§’åº¦åœ°å‰–æäº†å„ç±»å‰æ²¿æŠ€æœ¯ä¸å®ç”¨ä¸šåŠ¡åº”ç”¨ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬ç‰¹åˆ«æŒ‘é€‰å‡º 2025 å¹´åº¦å¹¿å—å¥½è¯„çš„ 20 ç¯‡æ–‡ç« ï¼Œæ±‡é›†æˆè¿™ä»½å¹´åº¦ç²¾é€‰å¹²è´§ï¼Œé‚€æ‚¨ä¸€åŒå›é¡¾é‚£äº›é—ªè€€ç€æ™ºæ…§å…‰èŠ’çš„æŠ€æœ¯ç¬é—´ï¼Œæ±²å–å®è´µçš„çŸ¥è¯†å…»åˆ†ï¼Œæ¿€å‘æ–°çš„çµæ„Ÿç«èŠ±ï¼</p>
</blockquote>
<p align="center">å“”å“©å“”å“©æŠ€æœ¯ç²¾å½©å›é¡¾ï¼ˆç‚¹å‡»æ ‡é¢˜æŸ¥çœ‹ï¼‰</p>
<p align="center">ğŸ‘‡ ğŸ‘‡ ğŸ‘‡</p>
<p><strong>01Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247503755%26idx%3D1%26sn%3Dbd23c345d87a50bbfc833e442081843c%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247503755&amp;idx=1&amp;sn=bd23c345d87a50bbfc833e442081843c&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Bç«™æ¶ˆæ¯æ–°æ¶æ„å‡çº§</a></strong></p>
<p>IMç³»ç»Ÿæ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„è¯é¢˜ï¼Œä¹Ÿæ˜¯èåˆä¼—å¤šæœ‰è¶£æŠ€æœ¯éš¾ç‚¹çš„åœ°æ–¹ã€‚å½“æŠ€æœ¯ä¸Šæ•°æ®é‡è¶Šå¤§ï¼Œé™çº§æ¦‚ç‡è¶Šå¤§ï¼Œä½†æ¶ˆæ¯ä¸šåŠ¡åœºæ™¯ä¸Šæ•°æ®é‡å¤§çš„æ˜¯å½±å“åŠ›æ›´å¤§çš„UPï¼Œä¸šåŠ¡ä¸æ¥å—æŠ€æœ¯é™çº§ï¼Œå¦‚ä½•ç ´ï¼Ÿå¦‚æœæ¶ˆæ¯æµé‡å¢åŠ 10å€ï¼Œæ€ä¹ˆä¿éšœæœåŠ¡ä¸æŒ‚ï¼Ÿæœ¬æ–‡åŸºäºä»¥ä¸Šå‘½é¢˜ï¼Œé˜è¿°äº†ä¼˜åŒ–ä¸€ä¸ªæ•°æ®å¯†é›†å‹ &gt;&gt; è®¡ç®—å¯†é›†å‹ï¼Œè¯»å¤šå†™å°‘ï¼ˆé¦–é¡µæœªè¯»æ•°ï¼‰ã€è¯»å°‘å†™å¤šï¼ˆä¼šè¯ï¼‰åœºæ™¯å…¼å…·çš„ç³»ç»Ÿï¼ŒåŒæ—¶æ‹¥æœ‰çƒ­é—¨Cç«¯äº§å“çš„ç¨³å®šæ€§ã€æ‰©å±•æ€§å’Œå¥½çš„ä¸šåŠ¡åŸŸè§£è€¦ã€‚</p>
<p><strong>02Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247502600%26idx%3D1%26sn%3D578792a76a85d5179cedce71702c97ae%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247502600&amp;idx=1&amp;sn=578792a76a85d5179cedce71702c97ae&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">å¤§ä¼šå‘˜äº¤æ˜“ç³»ç»Ÿå»ºè®¾</a></strong></p>
<p>Bç«™å¤§ä¼šå‘˜äº¤æ˜“ç³»ç»Ÿï¼ŒåŸºäºä¼ ç»Ÿç”µå•†äº¤æ˜“ç³»ç»Ÿæ¶æ„ä¸Šé€‚é…è™šæ‹Ÿç‰©å“ä¸šåŠ¡ï¼Œé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„ï¼Œæ¶µç›–äº¤æ˜“ã€è®¢å•ã€ç­¾çº¦ã€å•†å“ã€è¥é”€ã€æ¸…ç»“ç®—ã€è§„åˆ™é…ç½®ç­‰æ ¸å¿ƒæ¨¡å—ï¼Œæ­è½½æ”¯ä»˜ SDKã€é£æ§ç­‰èƒ½åŠ›ï¼Œé€šè¿‡äº‹åŠ¡æ§åˆ¶ã€åˆ†å¸ƒå¼é”ã€å¯¹è´¦ã€åˆ†çº§ä¸šåŠ¡é™æµç­‰ä¿éšœæ•°æ®ä¸èµ„é‡‘å®‰å…¨ï¼Œæ”¯æ’‘å¤šä¸šåŠ¡é«˜æ•ˆè¿è½¬ï¼Œé€‚é…ä¸ªæ€§åŒ–æ¥å…¥éœ€æ±‚ã€‚</p>
<p><strong>03</strong> <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247502953%26idx%3D1%26sn%3Dfe426c3e291e714f3670901c8552e4ff%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247502953&amp;idx=1&amp;sn=fe426c3e291e714f3670901c8552e4ff&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœåŠ¡å™¨æ•…éšœç®¡ç†å®è·µ</a></strong></p>
<p>æœåŠ¡å™¨æ•…éšœç®¡ç†å®è·µæ€»ç»“äº†Bç«™åœ¨æœåŠ¡å™¨è§„æ¨¡å¿«é€Ÿæ‰©å±•ä¸‹ï¼Œæ•…éšœæ£€æµ‹ä¸ç»´ä¿®è‡ªåŠ¨åŒ–çš„æ¢ç´¢ã€‚æ–‡ç« ä»‹ç»äº†æ•…éšœåˆ†ç±»ã€ä¼ ç»Ÿäººå·¥ç®¡ç†çš„ä¸è¶³ï¼Œä»¥åŠè‡ªåŠ¨åŒ–æ•…éšœæ£€æµ‹ä¸ç»´ä¿®æ–¹æ¡ˆï¼ŒåŒ…æ‹¬å¸¦å†…/å¸¦å¤–ä¿¡æ¯é‡‡é›†ã€ç»Ÿä¸€æ•…éšœè§„åˆ™åº“ã€è‡ªåŠ¨åŒ–ä»»åŠ¡æµè½¬å’Œèµ„äº§æ›´æ–°ã€‚é€šè¿‡è‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œæå‡äº†æ•…éšœå‘ç°ã€å®šä½å’Œå¤„ç†æ•ˆç‡ï¼Œå®ç°äº†é«˜è¦†ç›–ç‡å’Œå‡†ç¡®ç‡ã€‚æœªæ¥å°†ç»§ç»­æ¨è¿›æ™ºèƒ½åŒ–ç›‘æµ‹å’Œæ›´é«˜æ•ˆçš„æ•…éšœç®¡ç†ã€‚</p>
<p><strong>04Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247502109%26idx%3D1%26sn%3D01f3cb0332659283beec301837f962aa%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247502109&amp;idx=1&amp;sn=01f3cb0332659283beec301837f962aa&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Apache Celeborn åœ¨Bç«™çš„ç”Ÿäº§å®è·µ</a></strong></p>
<p>Bç«™å®Œæˆ Apache Celeborn å¤§è§„æ¨¡è½åœ°ï¼Œæ›¿ä»£ ESS ä¸ Push-based Shuffleï¼Œå®ç° Spark/Flink/MR ç»Ÿä¸€ Remote Shuffle æœåŠ¡ã€‚æ„å»ºå…ƒä»“ã€HBO æ™ºèƒ½è·¯ç”±ã€è¯Šæ–­æ²»ç†ã€æ··æ²Œæµ‹è¯•ã€æ•…éšœè‡ªæ„ˆç­‰é—­ç¯è¿ç»´ä½“ç³»ï¼Œæ»šåŠ¨å‡çº§ä¸ç°åº¦å‘å¸ƒé›¶ä¸­æ–­ã€‚Celeborn æ‰¿è½½ 70% Shuffle æµé‡ï¼Œå•ä½œä¸šæœ€å¤§ 200 Tï¼Œæ—¥å‡ 27 PBï¼Œæ˜¾è‘—é™ä½ Fetch Fail ä¸é‡ç®—ï¼Œä½œä¸šç¨³å®šæ€§å¤§å¹…æå‡ï¼›æ··éƒ¨ä½ä¼˜é›†ç¾¤é‡Šæ”¾ç©ºé—²èµ„æºï¼Œé›†ç¾¤é™æœ¬å¢æ•ˆæ˜æ˜¾ã€‚åç»­å°†æ¨è¿›æ½®æ±å¼¹æ€§ã€ä¼˜å…ˆçº§ IO è°ƒåº¦ã€Remote Spillã€Native å¼•æ“é›†æˆåŠæ›´å¤š Fallback ç­–ç•¥ï¼ŒæŒç»­ä¸ç¤¾åŒºå…±å»ºäº‘åŸç”Ÿä¸­é—´æ•°æ®æœåŠ¡æ–°æ ‡å‡†ã€‚</p>
<p><strong>05Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247503622%26idx%3D1%26sn%3D0ac090fb8c352983d3c14d02e27ea3fc%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247503622&amp;idx=1&amp;sn=0ac090fb8c352983d3c14d02e27ea3fc&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Bç«™æ¸¸æˆå¤§æ¨¡å‹ç¿»è¯‘å®è·µ â€”â€” æˆ‘ä»¬å¦‚ä½•ç”¨LLMæ’‘èµ·å…¨å¹´ç™¾ä¸‡å­—æœ¬åœ°åŒ–ç¿»è¯‘ä»»åŠ¡</a></strong></p>
<p>Bç«™æ¸¸æˆè‡ªç ”ç¿»è¯‘å¤§æ¨¡å‹ä½“ç³»ï¼Œä¸“ä¸ºæ¸¸æˆæœ¬åœ°åŒ–åœºæ™¯æ‰“é€ ï¼Œè¦†ç›– UIã€æŠ€èƒ½ã€å‰§æƒ…ç­‰å¤šç±»é«˜å¤æ‚åº¦æ–‡æœ¬ã€‚é€šè¿‡ RAG æ£€ç´¢å¢å¼ºã€è‡ªåŠ¨æœ¯è¯­æŒ–æ˜ä¸ LLM è´¨æ£€é—­ç¯ï¼Œåœ¨ä¿éšœè§’è‰²è¯­æ°”ä¸æœ¯è¯­ä¸€è‡´æ€§çš„åŒæ—¶ï¼Œå®ç°ç¿»è¯‘æ•ˆç‡æå‡ 7 å€ã€æˆæœ¬é™ä½ 70%+ï¼Œç¨³å®šæ”¯æ’‘ 10 è¯­ç§ã€å…¨å¹´ç™¾ä¸‡å­—çº§æœ¬åœ°åŒ–äº¤ä»˜ï¼Œä¸ºæ¸¸æˆå‡ºæµ·æä¾›å¼ºæœ‰åŠ›çš„æŠ€æœ¯æ”¯æ’‘ã€‚</p>
<p><strong>06Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247502999%26idx%3D1%26sn%3D9213bf3505748c329053a5b583450a18%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247502999&amp;idx=1&amp;sn=9213bf3505748c329053a5b583450a18&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Bç«™åœ¨KMPè·¨å¹³å°çš„ä¸šåŠ¡å®è·µä¹‹è·¯</a></strong></p>
<p>æˆ‘ä»¬ä»¥ä¸€ä¸ªå®é™…ä¸šåŠ¡è§†è§’ï¼Œæ€»ç»“æˆ‘ä»¬åœ¨ä½¿ç”¨ KMP çš„ Share Logic å’Œ Share UI ä¸¤ç§æ¨¡å¼åœ¨ä¸‰ç«¯è½åœ°çš„ç»éªŒä¸ infra å·¥ç¨‹å»ºè®¾çš„äº’è¡¥ï¼Œå¹¶æ€»ç»“äº†ä¸€å¥—æ–¹ä¾¿æ—¥å¸¸å¼€å‘å¿«é€Ÿæ¥å…¥ä½¿ç”¨çš„æ¡†æ¶å’Œå¼€å‘èŒƒå¼ã€‚</p>
<p><strong>07Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247502139%26idx%3D1%26sn%3D9f5ebff5c16b76e9d06f7a2d5bd7f5c1%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247502139&amp;idx=1&amp;sn=9f5ebff5c16b76e9d06f7a2d5bd7f5c1&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Bç«™æœæ¨å¤§è§„æ¨¡å¬å›ç³»ç»Ÿå·¥ç¨‹å®è·µ</a></strong></p>
<p>å¬å›ä½œä¸ºæœç´¢å’Œæ¨èç³»ç»Ÿçš„é¦–è¦ç¯èŠ‚ï¼Œå…¶æ€§èƒ½ç›´æ¥å†³å®šäº†ç³»ç»Ÿæ•ˆæœçš„ä¸Šé™ã€‚éšç€Bç«™ä¸šåŠ¡å¿«é€Ÿå‘å±•ï¼Œæœæ¨å¬å›ç³»ç»Ÿé¢ä¸´ç€æ•°æ®è§„æ¨¡çˆ†ç‚¸å¼å¢é•¿ã€ç®—æ³•ç­–ç•¥æ—¥ç›Šå¤æ‚ã€æ—¶æ•ˆæ€§è¦æ±‚ä¸æ–­æé«˜ç­‰ä¸¥å³»æŒ‘æˆ˜ã€‚æœ¬æ–‡ä»å·¥ç¨‹å®è·µè§’åº¦ï¼Œè¯¦ç»†é˜è¿°äº†Bç«™å¦‚ä½•æ„å»ºä¸€å¥—äº‘åŸç”Ÿã€å¯æ‰©å±•ã€é…ç½®åŒ–ã€æœæ¨ç»Ÿä¸€çš„å¤§è§„æ¨¡å¬å›ç³»ç»Ÿã€‚å¸Œæœ›å¯¹è¯»è€…æœ‰æ‰€å¯å‘ã€‚</p>
<p><strong>08Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247503308%26idx%3D1%26sn%3Dcd2dd7100bdd013c32657500d44a73c4%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247503308&amp;idx=1&amp;sn=cd2dd7100bdd013c32657500d44a73c4&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Bç«™æ˜¯å¦‚ä½•å®ç°åŸå£°è§†é¢‘ç¿»è¯‘çš„</a></strong></p>
<p>æœ¬æ–‡èšç„¦Bç«™åŸå£°è§†é¢‘ç¿»è¯‘çš„æŠ€æœ¯é©æ–°ï¼Œå…¶æ ¸å¿ƒèƒ½åŠ›åœ¨äºå®ç°ä¸­æ–‡è§†é¢‘å‘å¤šè¯­ç§çš„â€œåŸå£°é£æ ¼â€æ²‰æµ¸å¼è½¬åŒ–ï¼Œçªç ´ä¼ ç»Ÿé…éŸ³çš„æ ‡å‡†åŒ–å±€é™ä¸å­—å¹•çš„è®¤çŸ¥è´Ÿæ‹…ï¼Œå®Œæ•´ä¿ç•™åŸè¯´è¯äººéŸ³è‰²ã€æƒ…ç»ªä¸èŠ‚å¥ï¼Œä¸”è¾¾æˆå£å‹ä¸è¯­éŸ³çš„è‡ªç„¶é€‚é…ã€‚</p>
<p>æŠ€æœ¯å±‚é¢ï¼Œä»¥BILIBILI IndexTTS2æ¨¡å‹ä¸ºæ ¸å¿ƒï¼Œé€šè¿‡æ„ŸçŸ¥ä¸€è‡´æ€§å»ºæ¨¡ç ´è§£è·¨è¯­è¨€éŸ³è‰²åç§»ã€æƒ…ç»ªè¿ç§»ç­‰ç—›ç‚¹ï¼›ä¾æ‰˜RIVALå¯¹æŠ—å¼å¼ºåŒ–å­¦ä¹ æ¡†æ¶ä¸Deep SearchæŠ€æœ¯ï¼Œä¿éšœç¿»è¯‘ç²¾å‡†åº¦ã€é£æ ¼é€‚é…æ€§åŠä¸“æœ‰åè¯ç¿»è¯‘è´¨é‡ï¼›å†ç»å­—å¹•æ¶ˆé™¤ä¸Diffusionæ¨¡å‹é©±åŠ¨çš„å”‡å½¢åŒæ­¥æŠ€æœ¯ï¼Œå®ç°éŸ³ç”»ååŒã€‚</p>
<p>è¯¥æŠ€æœ¯é™ä½äº†å†…å®¹å…¨çƒåŒ–æˆæœ¬ï¼Œæ¨åŠ¨è·¨è¯­è¨€ä¼ æ’­ä»â€œäº’é€šâ€å‘â€œå…±é¸£â€å‡çº§ã€‚æœªæ¥Bç«™å°†æ‹“å±•è¯­è¨€è¦†ç›–ã€é€‚é…å¤šå…ƒåœºæ™¯ï¼Œå¹¶è®¡åˆ’å¼€æºæ ¸å¿ƒæ¨¡å‹ï¼ŒåŠ©åŠ›å…¨çƒå†…å®¹ç”Ÿæ€æ„å»ºã€‚</p>
<p><strong>09Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247502635%26idx%3D1%26sn%3D4970d9c282a1ef597782bfa2bbed3a83%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247502635&amp;idx=1&amp;sn=4970d9c282a1ef597782bfa2bbed3a83&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Bç«™ç¥¨åŠ¡æŠ¢è´­ä¸‹å•æµç¨‹æ¼”è¿›</a></strong></p>
<p>ç”±äºè¿‘å¹´æ¥æ¼«å±•ã€ç”µå½±ç­‰æ–‡åŒ–äº§ä¸šçš„æ¶ˆè´¹åŠ›å¤è‹ï¼Œç³»ç»Ÿé¢‘ç¹æ‰¿è½½é«˜å¹¶å‘æŠ¢è´­åœºæ™¯ï¼ˆå¦‚æ¼«å±•é—¨ç¥¨ï¼‰ã€‚ç„¶è€Œï¼Œçƒ­é—¨é¡¹ç›®åº“å­˜è¿œä½äºå¸‚åœºéœ€æ±‚ï¼Œä¼ ç»Ÿæ¶æ„åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹é¢ä¸´æ€§èƒ½ç“¶é¢ˆã€‚å¦‚ä½•ä¿éšœç³»ç»Ÿç¨³å®šæ€§ä¸ç”¨æˆ·ä½“éªŒï¼Œæˆä¸ºæ ¸å¿ƒæŒ‘æˆ˜ã€‚æœ¬æ–‡ä»‹ç»äº†Bç«™ç¥¨åŠ¡æŠ¢è´­ä¸‹å•çš„æ¼”è¿›è¿­ä»£è¿‡ç¨‹ï¼Œä»å®æˆ˜ç»éªŒä¸­ä¸ºå¤§å®¶æ•´ç†äº†ä¸€äº›é«˜å¹¶å‘åœºæ™¯çš„åº”å¯¹ç­–ç•¥ã€‚</p>
<p><strong>10Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247503792%26idx%3D1%26sn%3D1254ec52914112d15140a850cf692837%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247503792&amp;idx=1&amp;sn=1254ec52914112d15140a850cf692837&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Bç«™ç¤¾ç¾¤AIæ™ºèƒ½åˆ†æç³»ç»Ÿçš„å®è·µ</a></strong></p>
<p>ç¤¾ç¾¤ AI æ™ºèƒ½åˆ†æç³»ç»Ÿæ˜¯ä¸€å¥—å®Œå…¨ç”± AI é©±åŠ¨å’Œè‡ªåŠ¨å®æ—¶è¿è¡Œçš„ç”¨æˆ·åé¦ˆåˆ†æä¸å†³ç­–ç³»ç»Ÿã€‚é€šè¿‡å¯¹ç¤¾ç¾¤åé¦ˆå†…å®¹è¿›è¡Œè¯é¢˜èšåˆä¸æ„å›¾è¯†åˆ«ï¼Œå¼•å…¥ç¾¤ä½“å…±æŒ¯ã€è¯é¢˜çƒ­åº¦å’Œæƒ…ç»ªå˜åŒ–ç­‰æŒ‡æ ‡ï¼Œç³»ç»Ÿèƒ½å¤Ÿä»å¤§é‡ç¢ç‰‡åŒ–å‘è¨€ä¸­å¿«é€Ÿè¯†åˆ«å…·æœ‰ä»£è¡¨æ€§å’Œé£é™©æ€§çš„å…³é”®é—®é¢˜ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆé¢„è­¦æˆ–å·¥å•ï¼Œæ¨åŠ¨é—®é¢˜æµè½¬ä¸å¤„ç†é—­ç¯ï¼Œæå‡ç¤¾ç¾¤æ²»ç†ã€äº§å“ä¼˜åŒ–ä¸è¿è¥å†³ç­–æ•ˆç‡ã€‚</p>
<p><strong>11Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247502416%26idx%3D1%26sn%3D0fe22277419dd8a5f6c879470d907420%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247502416&amp;idx=1&amp;sn=0fe22277419dd8a5f6c879470d907420&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Bç«™è‡ªç ”çš„ç¬¬äºŒä»£è§†é¢‘è¿éº¦ç³»ç»Ÿï¼ˆä¸Šï¼‰</a></strong></p>
<p>Bç«™åŸºäº WebRTC é‡æ„äº†è§†é¢‘è¿éº¦ç³»ç»Ÿï¼Œæœ¬æ–‡ä»å®¢æˆ·ç«¯è§’åº¦ä»‹ç»ç¬¬äºŒä»£è§†é¢‘è¿éº¦ç³»ç»Ÿå¦‚ä½•ä½¿ç”¨æ ‡å‡† WebRTC API ä»¥ç¬¦åˆå…¶è®¾è®¡çš„æ–¹å¼æ¥å…¥è§†é¢‘è¿éº¦ä¸šåŠ¡ï¼Œå¹¶ä¸ºåç»­æœåŠ¡å™¨ç«¯ï¼ˆé€‰æ‹©æ€§è½¬å‘æœåŠ¡å™¨ï¼ŒSFUï¼‰ç¯‡åšé“ºå«ã€‚</p>
<p><strong>12Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247502323%26idx%3D1%26sn%3D0f0f8948f0c1d62172f3eff362c5408b%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247502323&amp;idx=1&amp;sn=0f0f8948f0c1d62172f3eff362c5408b&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">CIKM'24 : æ›´å¿«çš„æ‰¹é‡KVæŸ¥è¯¢ç³»ç»Ÿ</a></strong></p>
<p>é’ˆå¯¹ B ç«™æ¨èåœºæ™¯ä¸­äº¿çº§ç”¨æˆ·ä¸æµ·é‡å¤šæ¨¡æ€ç‰¹å¾å¸¦æ¥çš„ Memory Wall æŒ‘æˆ˜ï¼Œæœ¬æ–‡ä»‹ç»äº†å…¥é€‰ CIKM '24 çš„é«˜æ€§èƒ½åˆ†å¸ƒå¼æ‰¹é‡ KV æŸ¥è¯¢æ¶æ„ã€‚</p>
<p>æœ¬æ–‡ä»‹ç»äº†æ ¸å¿ƒè‡ªç ”HashTableç®—æ³• NeighborHash ï¼Œåˆ©ç”¨ Lodger Relocationï¼ˆå¯„å®¿é‡å®šä½ï¼‰ä¸ åŒå‘ Cacheline æ„ŸçŸ¥æ¢æµ‹ï¼Œå°†å¹³å‡å†…å­˜è®¿é—®æ¬¡æ•°å‹ç¼©è‡³ç‰©ç†æé™çš„ 1.12ã€‚ç»“åˆ AMAC å¼‚æ­¥æŒ‡ä»¤æµæ°´ä¸ SIMD å‘é‡åŒ–åŠ é€Ÿï¼Œå®ç°äº†æŸ¥è¯¢ååçš„å¤§å¹…æå‡ã€‚</p>
<p>ç³»ç»Ÿæ¶æ„å±‚é¢ï¼Œé‡‡ç”¨ NVMe + io_uring çš„å†·çƒ­åˆ†çº§å­˜å‚¨ç­–ç•¥ä¸å¼ºä¸€è‡´æ€§ç‰ˆæœ¬æ§åˆ¶åè®®ï¼Œä»¥æä½çš„æˆæœ¬å¼€é”€æ”¯æ’‘äº†æµ·é‡ç‰¹å¾ååã€‚</p>
<p><strong>13Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247503507%26idx%3D1%26sn%3D4e64c3e2481d267d1a0f8b487a22b477%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247503507&amp;idx=1&amp;sn=4e64c3e2481d267d1a0f8b487a22b477&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">RAGåœ¨Bç«™å¤§ä¼šå‘˜ä¸­å¿ƒæ•°æ®æ™ºèƒ½å¹³å°çš„åº”ç”¨å®è·µ</a></strong></p>
<p>æœ¬æ–‡ä»‹ç» RAG æŠ€æœ¯åœ¨ B ç«™å¤§ä¼šå‘˜ä¸­å¿ƒæ•°æ®æ™ºèƒ½å¹³å°çš„åº”ç”¨ï¼Œè§£å†³ LLM ç”Ÿæˆ SQL çš„å¹»è§‰é—®é¢˜ï¼Œæ­å»ºå®Œæ•´æŠ€æœ¯æ¶æ„ï¼Œå®ç°è‡ªç„¶è¯­è¨€è½¬ç²¾å‡† SQLï¼Œå¤§å¹…æå‡æ•°æ®æŸ¥è¯¢æ•ˆç‡ï¼ŒåŒæ—¶é˜è¿°ç°å­˜æŒ‘æˆ˜ä¸åç»­ä¼˜åŒ–æ–¹å‘ã€‚</p>
<p><strong>14Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247502440%26idx%3D1%26sn%3D3322ad1f4f096ed809245082fa8bf4a0%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247502440&amp;idx=1&amp;sn=3322ad1f4f096ed809245082fa8bf4a0&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æ„å»ºå¯æ‰©å±•çš„æ™ºèƒ½ä½“ç³»ç»Ÿï¼šå·¥ç¨‹åŒ–æ–¹æ³•ä¸å®è·µ(ä¸€ï¼‰</a></strong></p>
<p>2024å¹´ä¸‹åŠå¹´å†™è¿™ç¯‡æ–‡ç« æ—¶ï¼Œæˆ‘ä»¬è¿˜åœ¨å°å¿ƒç¿¼ç¿¼åœ°æ¢ç´¢ï¼šæ€ä¹ˆè®©AIä¸èƒ¡è¯´å…«é“ï¼Ÿæ€ä¹ˆè®©å®ƒè®°ä½ä¸Šä¸‹æ–‡ï¼Ÿç”¨LangChainè¿˜æ˜¯è‡ªå·±å†™ï¼Ÿæ¯ä¸ªé€‰æ‹©éƒ½åƒåœ¨é»‘æš—ä¸­æ‘¸ç´¢ã€‚</p>
<p>ä¸€å¹´è¿‡å»ï¼Œè¿™äº›"å°ä¼—ç ”ç©¶"å·²ç»å˜æˆäº†å…¥é—¨æ•™ç¨‹ã€‚Agentå¼€å‘ä»å°‘æ•°äººçš„å®éªŒï¼Œå˜æˆäº†å¤§è§„æ¨¡çš„å·¥ç¨‹å®è·µã€‚æŠ€æœ¯è¿­ä»£å¿«å¾—è®©äººçœ©æ™•ï¼Œä½†å›å¤´çœ‹ï¼Œå½“æ—¶é‚£äº›çœ‹ä¼¼ç¬¨æ‹™çš„å°è¯•â€”â€”æ¯”å¦‚ç”¨å¤šé‡éªŒè¯å¯¹æŠ—å¹»è§‰ã€ç”¨æ¨¡å—åŒ–åº”å¯¹ä¸ç¡®å®šæ€§â€”â€”åè€Œæˆäº†ä»Šå¤©ä»ç„¶é€‚ç”¨çš„åº•å±‚é€»è¾‘ã€‚</p>
<p>AIçš„è¿›åŒ–é€Ÿåº¦å¯ä»¥å¾ˆå¿«ï¼Œä½†å·¥ç¨‹çš„æœ¬è´¨é—®é¢˜ä¸ä¼šå˜ã€‚</p>
<p><strong>15Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247503578%26idx%3D1%26sn%3D817c3ba757f9f91dbbe70977f567983d%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247503578&amp;idx=1&amp;sn=817c3ba757f9f91dbbe70977f567983d&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">VibeCut - æ™ºèƒ½å‰ªè¾‘æ¢ç´¢ä¸å®ç°</a></strong></p>
<p>è§†é¢‘å‰ªè¾‘é•¿æœŸé¢ä¸´ä¸“ä¸šè½¯ä»¶é—¨æ§›é«˜ä¸æ¨¡æ¿å·¥å…·åˆ›æ„å—é™çš„â€œä¸¤éš¾â€å›°å¢ƒï¼Œå¦‚ä½•å¡«è¡¥å…¨æ‰‹åŠ¨ä¸å…¨è‡ªåŠ¨ä¹‹é—´çš„é¸¿æ²Ÿæˆä¸ºè¡Œä¸šéš¾é¢˜ã€‚æœ¬æ–‡åŸºäºWebCutå¹³å°ï¼Œæ·±å…¥æ¢ç´¢å¹¶å®ç°äº†ä¸€æ¬¾æ™ºèƒ½å‰ªè¾‘ä½“â€”â€”VibeCutã€‚è¯¥ç³»ç»Ÿé‡‡ç”¨åˆ›æ–°çš„è®¡åˆ’è€…-æ‰§è¡Œè€…(Orchestrator-Executor)åŒæ™ºèƒ½ä½“æ¶æ„ï¼Œé€šè¿‡å¼•å…¥ç»“æ„åŒ–çš„å…±äº«ä¸Šä¸‹æ–‡(Shared Context)ä½œä¸ºå”¯ä¸€äº‹å®æºï¼Œæœ‰æ•ˆè§£å†³äº†ä¼ ç»Ÿå¤šæ™ºèƒ½ä½“åä½œä¸­çš„ä¸Šä¸‹æ–‡ä¸¢å¤±ä¸é”™è¯¯ç´¯ç§¯é—®é¢˜ï¼Œå®ç°äº†ä»»åŠ¡è§„åˆ’ä¸å·¥å…·æ‰§è¡Œçš„è§£è€¦ã€‚åœ¨åŸå‹å®è·µä¸­ï¼ŒVibeCutåˆ©ç”¨LLMä¸MCPåè®®ï¼ŒæˆåŠŸé€šè¿‡äº†å­—å¹•è°ƒæ•´ã€è¯­ä¹‰è£åˆ‡åŠå›¾æ–‡æˆç‰‡ç­‰åœºæ™¯è€ƒéªŒï¼Œä¸ºä¸‹ä¸€ä»£äººæœºååŒçš„æ™ºèƒ½å†…å®¹åˆ›ä½œå·¥å…·æä¾›äº†å…¼å…·æ•ˆç‡ä¸ç¨³å®šæ€§çš„èŒƒå¼ã€‚</p>
<p><strong>16Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247502230%26idx%3D1%26sn%3D76feb6f4717cedf7c7fc1aaaf16d619d%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247502230&amp;idx=1&amp;sn=76feb6f4717cedf7c7fc1aaaf16d619d&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æ–°æ´»åŠ¨å¹³å°å»ºè®¾å†ç¨‹ä¸æ¶æ„æ¼”è¿›</a></strong></p>
<p>Bç«™ç”¨æˆ·æŠ€æœ¯ä¸­å¿ƒçš„æ´»åŠ¨å¹³å°æ˜¯è¿æ¥è¿è¥æ•ˆç‡ã€ç”¨æˆ·ä½“éªŒå’Œæ´»åŠ¨ä¸šåŠ¡çš„é‡è¦åŸºç¡€è®¾æ–½ã€‚æ´»åŠ¨å›¢é˜Ÿå†æ—¶ä¸¤å¹´å¯¹æ´»åŠ¨å¹³å°è¿›è¡Œäº†ä¸€æ¬¡ç³»ç»Ÿçº§é‡æ„ï¼Œæ‰“é€ å‡ºäº†ä¸€å¥—æ›´ç°ä»£ã€æ›´é«˜æ•ˆã€æ›´æ™ºèƒ½çš„æ´»åŠ¨å·¥ä¸šåŒ–ç”Ÿäº§ä½“ç³»ã€‚æ”¹ç‰ˆåï¼Œæ´»åŠ¨æ­å»ºè€—æ—¶å’Œé…ç½®é—®é¢˜æ˜¾è‘—å‡å°‘ï¼Œå¤æ‚ç©æ³•å¯ä»¥æ›´ä½æˆæœ¬è½åœ°ï¼Œé¡µé¢æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒåŒæ­¥æå‡ã€‚æœ¬æ–‡è¯¦ç»†é˜è¿°äº†æ•´ä¸ªé‡æ„è¿‡ç¨‹ä¸­çš„è®¾è®¡ç†å¿µã€å»ºè®¾è§„åˆ’å’Œæ¶æ„æ€è€ƒï¼Œä»¥åŠæ´»åŠ¨å›¢é˜Ÿæ˜¯å¦‚ä½•è§£å†³ä¸åŒé˜¶æ®µé¢ä¸´çš„æŒ‘æˆ˜ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰ç‚¹å¸®åŠ©ï½</p>
<p><strong>17Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247503399%26idx%3D1%26sn%3D486abeda98f6d2faf2150b006ff6b94b%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247503399&amp;idx=1&amp;sn=486abeda98f6d2faf2150b006ff6b94b&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸ºä»€ä¹ˆæˆ‘çš„ TLS 1.3 å¤šäº†ä¸€ä¸ª RTT</a></strong></p>
<p>æœ¬æ–‡ä»ä¸€æ¬¡éé¢„æœŸçš„ TSL 1.3 æ¡æ‰‹æ—¶å»¶é—®é¢˜å…¥æ‰‹ï¼Œé€šè¿‡ç»†è‡´çš„æŠ“åŒ…åˆ†æï¼Œæ¢ç©¶ TCP åè®®ç»†èŠ‚ï¼Œå‘ç°äº† Nagle ç®—æ³•åœ¨ç°ä»£ç½‘ç»œç¯å¢ƒä¸‹å¯¹æ—¶å»¶æ•æ„Ÿåº”ç”¨çš„å½±å“ï¼Œå¹¶æˆåŠŸä¼˜åŒ–äº†æ¡æ‰‹æ—¶é—´ã€‚ä¸ä»…æå‡äº†ç”¨æˆ·ä½“éªŒï¼Œä¹Ÿè®©æˆ‘ä»¬å¯¹ä¸åŒå±‚çº§ç½‘ç»œåè®®çš„çœŸå®äº¤äº’é€»è¾‘æœ‰äº†æ›´æ·±å…¥çš„ç†è§£ã€‚å¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€åŠ©ç›Šã€‚</p>
<p><strong>18Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247503093%26idx%3D1%26sn%3Daa6d0bb23c2525f9f345e6d02ec21739%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247503093&amp;idx=1&amp;sn=aa6d0bb23c2525f9f345e6d02ec21739&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">å‰ç«¯ç‰©æ–™åº“çš„è®¾è®¡</a></strong></p>
<p>éšç€å…¬å¸å‰ç«¯ä¸šåŠ¡å¿«é€Ÿå‘å±•ï¼ŒåŸæœ‰ cnpm ç³»ç»Ÿåœ¨ç‰©æ–™ç®¡ç†ã€æœç´¢å’Œæ–‡æ¡£æ”¯æŒæ–¹é¢æ—¥æ˜¾ä¸è¶³ã€‚æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•åŸºäº Nexus3 æ„å»ºå…¨æ–°çš„å‰ç«¯ç‰©æ–™å¹³å°ï¼Œå®ç° npm åŒ…ã€UMD ç»„ä»¶å’Œ SVG å›¾æ ‡çš„ç»Ÿä¸€ç®¡ç†ã€‚é€šè¿‡å»ºç«‹å››ç»´åˆ†ç±»ä½“ç³»ï¼ˆç»ˆç«¯ã€æ¡†æ¶ã€é¢†åŸŸã€åŠŸèƒ½ï¼‰æå‡ç‰©æ–™å¯å‘ç°æ€§ï¼Œå¹¶å¼•å…¥å¤–éƒ¨æ–‡æ¡£åµŒå…¥ã€äº§ç‰©åœ¨çº¿é¢„è§ˆåŠ Cosmos2 ç¤ºä¾‹æ²™ç›’ç­‰åˆ›æ–°åŠŸèƒ½ï¼Œæœ‰æ•ˆè§£å†³äº†"æ‰¾ç»„ä»¶éš¾ã€æŸ¥æ–‡æ¡£éš¾"çš„ç—›ç‚¹ï¼Œä¸ºå‰ç«¯ç‰©æ–™æ ‡å‡†åŒ–æ²»ç†å¥ å®šäº†åŸºç¡€ã€‚</p>
<p><strong>19Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247503693%26idx%3D1%26sn%3D3d65c30c986bc3c51f2f924b1ea5f158%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247503693&amp;idx=1&amp;sn=3d65c30c986bc3c51f2f924b1ea5f158&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">Bç«™åŸºç¡€å®‰å…¨åœ¨AIæº¯æºæ–¹å‘çš„æ¢ç´¢å®è·µ</a></strong></p>
<p>æœ¬æ–‡åˆ†äº«äº†Bç«™åŸºç¡€å®‰å…¨å›¢é˜Ÿåœ¨AIè¾…åŠ©å‘Šè­¦æº¯æºæ–¹é¢çš„æ¢ç´¢å®è·µã€‚éšç€å®‰å…¨å‘Šè­¦è¿è¥ä»äººå·¥æŸ¥è¯æ¼”è¿›åˆ°SOARé˜¶æ®µ,å›¢é˜Ÿå€ŸåŠ©AIæŠ€æœ¯å’ŒMCPåè®®,å°†HIDSã€èœœç½ã€EDRç­‰å®‰å…¨äº§å“çš„APIè½¬åŒ–ä¸ºAIå¯è°ƒç”¨çš„å·¥å…·é›†,æ„å»ºäº†"å‘Šè­¦äº§ç”Ÿ-ç ”åˆ¤é™å™ª-æœºå™¨äººæ¨é€-AIæº¯æº"çš„å®Œæ•´é“¾è·¯ã€‚é€šè¿‡èœœç½ã€HIDSã€EDRä¸‰ç±»çœŸå®å‘Šè­¦æ¡ˆä¾‹,å±•ç¤ºäº†AIè‡ªåŠ¨å…³è”å ¡å’æœºæ—¥å¿—ã€èµ„äº§ä¿¡æ¯ã€ç”¨æˆ·éƒ¨é—¨ç­‰å¤šæºæ•°æ®,å®Œæˆä»äº‹ä»¶è¿½è¸ªåˆ°è´£ä»»ä¸»ä½“å®šä½çš„å…¨é“¾è·¯æº¯æºèƒ½åŠ›ã€‚æ˜¾è‘—æå‡äº†å®‰å…¨è¿è¥æ•ˆç‡,å®ç°äº†"äººæœºååŒ+è‡ªåŠ¨åŒ–æº¯æº"çš„è½åœ°ã€‚</p>
<p><strong>20Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg3Njc0NTgwMg%3D%3D%26mid%3D2247503025%26idx%3D1%26sn%3Df4517a23d23b938279b57a640f5fe864%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg3Njc0NTgwMg==&amp;mid=2247503025&amp;idx=1&amp;sn=f4517a23d23b938279b57a640f5fe864&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä»æ‹¥å¡æ§åˆ¶ç®—æ³•çƒ­äº¤æ¢åˆ°å†…æ ¸é”™è¯¯ä¿®å¤</a></strong></p>
<p>æœ€è¿‘åœ¨å“”å“©å“”å“©ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ç§æ”¹è¿›çš„ BBR æ‹¥å¡æ§åˆ¶ç®—æ³•ï¼Œéœ€è¦åœ¨çœŸå®ç¯å¢ƒä¸­è¿›è¡Œæµ‹è¯•ã€‚è¯¥ç®—æ³•æœ¬èº«ä»¥å†…æ ¸æ¨¡å—çš„å½¢å¼å­˜åœ¨ï¼Œå› æ­¤å°†å…¶å®‰è£…åˆ°æœåŠ¡å™¨ä¸Šä¸æ˜¯é—®é¢˜ã€‚ç„¶è€Œï¼Œåœ¨å¿«èŠ‚å¥çš„è¿­ä»£è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸€ç³»åˆ—é—®é¢˜ï¼Œæœ€ç»ˆå‘ç°äº†ä¸€ä¸ªå†…æ ¸é”™è¯¯ã€‚æœ¬æ–‡å°†å¸¦æ‚¨äº†è§£æˆ‘ä»¬è§£å†³é—®é¢˜çš„æ•´ä¸ªè¿‡ç¨‹ï¼Œä»æ‹¥å¡æ§åˆ¶ç®—æ³•çƒ­äº¤æ¢åˆ°å†…æ ¸é”™è¯¯ä¿®å¤ã€‚</p>
<p align="center">-End-</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JVMè™šæ‹Ÿçº¿ç¨‹ï¼šJEP 444å¼€å¯Javaå¹¶å‘ç¼–ç¨‹æ–°çºªå…ƒ]]></title>    <link>https://juejin.cn/post/7589897523268878346</link>    <guid>https://juejin.cn/post/7589897523268878346</guid>    <pubDate>2026-01-01T04:07:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589897523268878346" data-draft-id="7589907831198629914" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JVMè™šæ‹Ÿçº¿ç¨‹ï¼šJEP 444å¼€å¯Javaå¹¶å‘ç¼–ç¨‹æ–°çºªå…ƒ"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-01T04:07:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="jungly"/> <meta itemprop="url" content="https://juejin.cn/user/61228380597341"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JVMè™šæ‹Ÿçº¿ç¨‹ï¼šJEP 444å¼€å¯Javaå¹¶å‘ç¼–ç¨‹æ–°çºªå…ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/61228380597341/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    jungly
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T04:07:25.000Z" title="Thu Jan 01 2026 04:07:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šJavaå¹¶å‘æ¨¡å‹çš„æ¼”è¿›</h2>
<p>åœ¨Java 21çš„ä¼—å¤šæ–°ç‰¹æ€§ä¸­ï¼ŒJEP 444ï¼ˆè™šæ‹Ÿçº¿ç¨‹ï¼‰çš„æ­£å¼å‘å¸ƒæ— ç–‘æ˜¯æœ€æ¿€åŠ¨äººå¿ƒçš„é‡Œç¨‹ç¢‘ä¹‹ä¸€ã€‚è¿™ä¸€ç‰¹æ€§ä¸ä»…æ ‡å¿—ç€Javaå¹¶å‘ç¼–ç¨‹æ¨¡å‹çš„é‡å¤§é©æ–°ï¼Œæ›´ä¸ºé«˜ååé‡ã€é«˜å¹¶å‘åº”ç”¨å¼€å‘å¸¦æ¥äº†é©å‘½æ€§çš„ç®€åŒ–ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨è™šæ‹Ÿçº¿ç¨‹çš„æŠ€æœ¯ç»†èŠ‚ã€å®é™…åº”ç”¨åœºæ™¯ä»¥åŠå¯¹Javaç”Ÿæ€çš„æ·±è¿œå½±å“ã€‚</p>
<h2 data-id="heading-1">è™šæ‹Ÿçº¿ç¨‹ï¼šæ˜¯ä»€ä¹ˆï¼Œä¸ºä½•é‡è¦ï¼Ÿ</h2>
<h3 data-id="heading-2">ä¼ ç»Ÿçº¿ç¨‹çš„å±€é™æ€§</h3>
<p>Javaå¼€å‘è€…é•¿ä¹…ä»¥æ¥ä¸€ç›´ä½¿ç”¨<code>java.lang.Thread</code>ç±»æ¥è¡¨ç¤ºå¹³å°çº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹ä¸æ“ä½œç³»ç»Ÿçº¿ç¨‹ä¸€ä¸€å¯¹åº”ã€‚è™½ç„¶åŠŸèƒ½å¼ºå¤§ï¼Œä½†åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹å­˜åœ¨æ˜æ˜¾ç“¶é¢ˆï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ä¼ ç»Ÿçº¿ç¨‹åˆ›å»ºæ–¹å¼ - æ¯ä¸ªçº¿ç¨‹å¯¹åº”ä¸€ä¸ªOSçº¿ç¨‹</span>
Thread thread = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Thread</span>(() -&gt; {
    <span class="hljs-comment">// ä»»åŠ¡é€»è¾‘</span>
});
thread.<span class="hljs-built_in">start</span>();
</code></pre>
<p>è¿™ç§æ¨¡å‹çš„é™åˆ¶åœ¨äºï¼š</p>
<ul>
<li><strong>åˆ›å»ºæˆæœ¬é«˜</strong>ï¼šæ¯ä¸ªå¹³å°çº¿ç¨‹éœ€è¦çº¦1MBæ ˆå†…å­˜</li>
<li><strong>ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€å¤§</strong>ï¼šçº¿ç¨‹æ•°å¢åŠ æ—¶ï¼ŒCPUå¤§é‡æ—¶é—´èŠ±åœ¨çº¿ç¨‹åˆ‡æ¢ä¸Š</li>
<li><strong>å¹¶å‘è§„æ¨¡å—é™</strong>ï¼šé€šå¸¸æ— æ³•åˆ›å»ºè¶…è¿‡æ•°åƒä¸ªçº¿ç¨‹</li>
</ul>
<h3 data-id="heading-3">è™šæ‹Ÿçº¿ç¨‹çš„çªç ´</h3>
<p>è™šæ‹Ÿçº¿ç¨‹æ˜¯JDKå®ç°çš„è½»é‡çº§çº¿ç¨‹ï¼Œå®ƒä»¬<strong>ä¸æ˜¯</strong>æ“ä½œç³»ç»Ÿçº¿ç¨‹çš„åŒ…è£…å™¨ï¼Œè€Œæ˜¯åœ¨å¹³å°çº¿ç¨‹ä¹‹ä¸Šè¿è¡Œçš„Javaè¿è¡Œæ—¶å®ä½“ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// åˆ›å»ºè™šæ‹Ÿçº¿ç¨‹ - ç®€å•ç›´è§‚</span>
Thread virtualThread = Thread<span class="hljs-selector-class">.ofVirtual</span>()
    <span class="hljs-selector-class">.name</span>("my-virtual-thread")
    <span class="hljs-selector-class">.start</span>(() -&gt; {
        <span class="hljs-comment">// ä»»åŠ¡é€»è¾‘</span>
    });
</code></pre>
<p>å…³é”®ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>è½»é‡çº§</strong>ï¼šå†…å­˜å ç”¨å°ï¼Œå¯åˆ›å»ºæ•°ç™¾ä¸‡ä¸ªè™šæ‹Ÿçº¿ç¨‹</li>
<li><strong>ä½æˆæœ¬åˆ‡æ¢</strong>ï¼šæŒ‚èµ·å’Œæ¢å¤ä¸»è¦åœ¨ç”¨æˆ·ç©ºé—´å®Œæˆ</li>
<li><strong>ä¸ç°æœ‰APIå…¼å®¹</strong>ï¼šä½¿ç”¨ç›¸åŒçš„<code>Thread</code>ç±»è¡¨ç¤º</li>
</ul>
<h2 data-id="heading-4">æŠ€æœ¯åŸç†æ·±åº¦è§£æ</h2>
<h3 data-id="heading-5">è½½ä½“çº¿ç¨‹ï¼ˆCarrier Threadsï¼‰</h3>
<p>è™šæ‹Ÿçº¿ç¨‹çš„åˆ›æ–°åœ¨äºå°†<strong>è°ƒåº¦èŒè´£</strong>ä»æ“ä½œç³»ç»Ÿè½¬ç§»åˆ°JDKã€‚å½“è™šæ‹Ÿçº¿ç¨‹éœ€è¦æ‰§è¡Œæ—¶ï¼Œå®ƒè¢«è£…è½½åˆ°å¹³å°çº¿ç¨‹ï¼ˆç§°ä¸ºè½½ä½“çº¿ç¨‹ï¼‰ä¸Šè¿è¡Œï¼š</p>
<pre><code class="hljs language-ini" lang="ini">ExecutorService <span class="hljs-attr">executor</span> = Executors.newVirtualThreadPerTaskExecutor()<span class="hljs-comment">;</span>

// æäº¤100ä¸‡ä¸ªä»»åŠ¡ - æ¯ä¸ªéƒ½åœ¨è™šæ‹Ÿçº¿ç¨‹ä¸­è¿è¡Œ
for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; 1_000_000; i++) {</span>
    executor.submit(() -&gt; {
        // æ‰§è¡ŒI/Oæ“ä½œæ—¶è™šæ‹Ÿçº¿ç¨‹è‡ªåŠ¨æŒ‚èµ·
        String <span class="hljs-attr">result</span> = httpClient.send(request, BodyHandlers.ofString())<span class="hljs-comment">;</span>
        // I/Oå®Œæˆåè‡ªåŠ¨æ¢å¤
        processResult(result)<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-6">æŒ‚èµ·ä¸æ¢å¤æœºåˆ¶</h3>
<p>è™šæ‹Ÿçº¿ç¨‹çš„é­”åŠ›åœ¨äº<strong>é˜»å¡æ“ä½œæ—¶çš„è‡ªåŠ¨æŒ‚èµ·</strong>ï¼š</p>
<ol>
<li>å½“è™šæ‹Ÿçº¿ç¨‹æ‰§è¡Œé˜»å¡I/Oæ—¶ï¼ŒJDKè‡ªåŠ¨å°†å…¶æŒ‚èµ·</li>
<li>è½½ä½“çº¿ç¨‹è¢«é‡Šæ”¾ï¼Œå¯ä»¥æ‰§è¡Œå…¶ä»–è™šæ‹Ÿçº¿ç¨‹</li>
<li>I/Oå®Œæˆåï¼Œè™šæ‹Ÿçº¿ç¨‹è¢«è°ƒåº¦åˆ°å¯ç”¨è½½ä½“çº¿ç¨‹ä¸Šæ¢å¤æ‰§è¡Œ</li>
</ol>
<p>è¿™ç§æœºåˆ¶ä½¿å¾—å¼€å‘è€…å¯ä»¥<strong>ç”¨åŒæ­¥çš„æ–¹å¼ç¼–å†™ä»£ç ï¼Œè·å¾—å¼‚æ­¥çš„æ€§èƒ½</strong>ã€‚</p>
<h2 data-id="heading-7">å®æˆ˜åº”ç”¨ï¼šè¿ç§»æŒ‡å—ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-8">ç®€å•åˆ›å»ºæ–¹å¼</h3>
<p>Java 21æä¾›äº†å¤šç§åˆ›å»ºè™šæ‹Ÿçº¿ç¨‹çš„æ–¹å¼ï¼š</p>
<p>java</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ–¹å¼1ï¼šä½¿ç”¨Thread.startVirtualThread()</span>
Thread<span class="hljs-selector-class">.startVirtualThread</span>(() -&gt; {
    System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("è¿è¡Œåœ¨è™šæ‹Ÿçº¿ç¨‹ä¸­");
});

<span class="hljs-comment">// æ–¹å¼2ï¼šä½¿ç”¨Thread.ofVirtual()</span>
Thread virtualThread = Thread<span class="hljs-selector-class">.ofVirtual</span>()
    <span class="hljs-selector-class">.name</span>("data-processor-", <span class="hljs-number">0</span>)
    <span class="hljs-selector-class">.start</span>(task);

<span class="hljs-comment">// æ–¹å¼3ï¼šä½¿ç”¨Executors.newVirtualThreadPerTaskExecutor()</span>
try (var executor = Executors.newVirtualThreadPerTaskExecutor()) {
    IntStream<span class="hljs-selector-class">.range</span>(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>_000)<span class="hljs-selector-class">.forEach</span>(i -&gt; {
        executor.submit(() -&gt; {
            Thread<span class="hljs-selector-class">.sleep</span>(Duration.ofSeconds(<span class="hljs-number">1</span>));
            return <span class="hljs-selector-tag">i</span>;
        });
    });
}
</code></pre>
<h3 data-id="heading-9">æœåŠ¡å™¨åº”ç”¨æ”¹é€ </h3>
<p>å¯¹äºWebæœåŠ¡å™¨åº”ç”¨ï¼Œè™šæ‹Ÿçº¿ç¨‹å¯ä»¥æ˜¾è‘—ç®€åŒ–ä»£ç ï¼š</p>
<p>java</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ä¼ ç»Ÿçº¿ç¨‹æ± æ–¹å¼</span>
ExecutorService executor = Executors<span class="hljs-selector-class">.newFixedThreadPool</span>(<span class="hljs-number">200</span>);

<span class="hljs-comment">// è™šæ‹Ÿçº¿ç¨‹æ–¹å¼ - ä¸å†éœ€è¦å¤æ‚çš„çº¿ç¨‹æ± è°ƒä¼˜</span>
ExecutorService virtualExecutor = Executors<span class="hljs-selector-class">.newVirtualThreadPerTaskExecutor</span>();

<span class="hljs-comment">// å¤„ç†HTTPè¯·æ±‚</span>
void <span class="hljs-built_in">handleRequest</span>(HttpRequest req, HttpResponse res) {
    virtualExecutor<span class="hljs-selector-class">.submit</span>(() -&gt; {
        <span class="hljs-comment">// æ¯ä¸ªè¯·æ±‚è‡ªåŠ¨è·å¾—è‡ªå·±çš„è™šæ‹Ÿçº¿ç¨‹</span>
        <span class="hljs-built_in">processRequest</span>(req);
        <span class="hljs-built_in">sendResponse</span>(res);
    });
}
</code></pre>
<h3 data-id="heading-10">ä½¿ç”¨æ³¨æ„äº‹é¡¹</h3>
<p>è™½ç„¶è™šæ‹Ÿçº¿ç¨‹å¼ºå¤§ï¼Œä½†ä»éœ€æ³¨æ„ä»¥ä¸‹é™åˆ¶ï¼š</p>
<ol>
<li><strong>é¿å…ä½¿ç”¨ThreadLocal</strong>ï¼šè™šæ‹Ÿçº¿ç¨‹çš„å»‰ä»·åˆ›å»ºä½¿å¾—ThreadLocalä½¿ç”¨æˆæœ¬è¿‡é«˜</li>
<li><strong>åŒæ­¥æ“ä½œè°¨æ…ä½¿ç”¨</strong>ï¼šåœ¨<code>synchronized</code>å—æˆ–<code>ReentrantLock</code>ä¸­æ‰§è¡Œé•¿æ—¶é—´æ“ä½œä¼šé˜»å¡è½½ä½“çº¿ç¨‹</li>
<li><strong>çº¿ç¨‹æ± ä¸å†å¿…è¦</strong>ï¼šè™šæ‹Ÿçº¿ç¨‹è‡ªèº«å°±æ˜¯è½»é‡çš„ï¼Œé€šå¸¸ä¸éœ€è¦æ± åŒ–</li>
</ol>
<h2 data-id="heading-11">æ€§èƒ½å¯¹æ¯”ä¸åŸºå‡†æµ‹è¯•</h2>
<p>æ ¹æ®å®˜æ–¹æµ‹è¯•æ•°æ®ï¼Œè™šæ‹Ÿçº¿ç¨‹åœ¨å¤„ç†å¤§é‡å¹¶å‘I/Oæ“ä½œæ—¶è¡¨ç°å‡ºæ˜¾è‘—ä¼˜åŠ¿ï¼š</p>

























<table><thead><tr><th>åœºæ™¯</th><th>å¹³å°çº¿ç¨‹(100ä¸ª)</th><th>è™šæ‹Ÿçº¿ç¨‹(10,000ä¸ª)</th></tr></thead><tbody><tr><td>HTTPè¯·æ±‚å¤„ç†</td><td>ååé‡: 2,300 req/s</td><td>ååé‡: 8,700 req/s</td></tr><tr><td>å†…å­˜å ç”¨</td><td>çº¦100MB</td><td>çº¦10MB</td></tr><tr><td>å“åº”æ—¶é—´(P95)</td><td>450ms</td><td>120ms</td></tr></tbody></table>
<h2 data-id="heading-12">è¿ç§»ç­–ç•¥ï¼šé€æ­¥é‡‡ç”¨è™šæ‹Ÿçº¿ç¨‹</h2>
<p>å¯¹äºç°æœ‰é¡¹ç›®ï¼Œå»ºè®®é‡‡ç”¨æ¸è¿›å¼è¿ç§»ç­–ç•¥ï¼š</p>
<h3 data-id="heading-13">é˜¶æ®µ1ï¼šè¯†åˆ«é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>é«˜å¹¶å‘I/Oå¯†é›†å‹åº”ç”¨</li>
<li>å¾®æœåŠ¡é—´é€šä¿¡</li>
<li>æ‰¹é‡æ•°æ®å¤„ç†ä»»åŠ¡</li>
</ul>
<h3 data-id="heading-14">é˜¶æ®µ2ï¼šå±€éƒ¨æ›¿æ¢</h3>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">// å°†é€‰å®šçš„çº¿ç¨‹æ± æ›¿æ¢ä¸ºè™šæ‹Ÿçº¿ç¨‹æ‰§è¡Œå™¨
// ä¹‹å‰ï¼š
ExecutorService <span class="hljs-attr">executor</span> = Executors.newFixedThreadPool(<span class="hljs-number">100</span>)<span class="hljs-comment">;</span>

// ä¹‹åï¼š
ExecutorService <span class="hljs-attr">executor</span> = Executors.newVirtualThreadPerTaskExecutor()<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-15">é˜¶æ®µ3ï¼šå…¨é¢è¯„ä¼°ä¸ä¼˜åŒ–</h3>
<p>ç›‘æ§åº”ç”¨æ€§èƒ½ï¼Œé€æ­¥æ‰©å¤§è™šæ‹Ÿçº¿ç¨‹ä½¿ç”¨èŒƒå›´ï¼ŒåŒæ—¶ç•™æ„ï¼š</p>
<ul>
<li>CPUä½¿ç”¨ç‡å˜åŒ–</li>
<li>å†…å­˜å ç”¨æ¨¡å¼</li>
<li>ç³»ç»Ÿååé‡æŒ‡æ ‡</li>
</ul>
<h2 data-id="heading-16">æœªæ¥å±•æœ›ä¸ç”Ÿæ€å½±å“</h2>
<p>è™šæ‹Ÿçº¿ç¨‹çš„æ­£å¼å‘å¸ƒå°†å¯¹Javaç”Ÿæ€ç³»ç»Ÿäº§ç”Ÿæ·±è¿œå½±å“ï¼š</p>
<ol>
<li><strong>æ¡†æ¶å‡çº§</strong>ï¼šSpringã€Quarkusç­‰ä¸»æµæ¡†æ¶å·²å¼€å§‹æ”¯æŒè™šæ‹Ÿçº¿ç¨‹</li>
<li><strong>ç¼–ç¨‹æ¨¡å¼è½¬å˜</strong>ï¼šå¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ï¼ˆå¦‚CompletableFutureï¼‰åœ¨æŸäº›åœºæ™¯ä¸‹å¯èƒ½ä¸å†å¿…è¦</li>
<li><strong>äº‘åŸç”Ÿä¼˜åŒ–</strong>ï¼šè™šæ‹Ÿçº¿ç¨‹ä¸Project Loomçš„åç¨‹æ¨¡å‹ä¸ºäº‘åŸç”Ÿåº”ç”¨æä¾›æ›´å¥½çš„èµ„æºåˆ©ç”¨ç‡</li>
</ol>
<h2 data-id="heading-17">ç»“è®ºï¼šJavaå¹¶å‘çš„æ–°ç¯‡ç« </h2>
<p>JEP 444ä¸ä»…ä»…æ˜¯Java 21çš„ä¸€ä¸ªæ–°ç‰¹æ€§ï¼Œå®ƒä»£è¡¨ç€Javaå¹¶å‘ç¼–ç¨‹èŒƒå¼çš„æ ¹æœ¬æ€§è½¬å˜ã€‚è™šæ‹Ÿçº¿ç¨‹çš„å¼•å…¥ä½¿å¾—ç¼–å†™é«˜å¹¶å‘åº”ç”¨å˜å¾—æ›´åŠ ç›´è§‚å’Œé«˜æ•ˆï¼ŒåŒæ—¶ä¿æŒäº†ä¸ç°æœ‰ä»£ç çš„é«˜åº¦å…¼å®¹æ€§ã€‚</p>
<p>å¯¹äºJavaå¼€å‘è€…è€Œè¨€ï¼Œç°åœ¨æ˜¯æ—¶å€™å¼€å§‹æ¢ç´¢è™šæ‹Ÿçº¿ç¨‹çš„æ½œåŠ›äº†ã€‚è™½ç„¶å¹¶éæ‰€æœ‰åœºæ™¯éƒ½éœ€è¦ç«‹å³è¿ç§»ï¼Œä½†ç†è§£è¿™ä¸€æ–°æŠ€æœ¯å°†ä¸ºæœªæ¥çš„æ¶æ„å†³ç­–å’Œæ€§èƒ½ä¼˜åŒ–æä¾›é‡è¦åŸºç¡€ã€‚</p>
<p>è™šæ‹Ÿçº¿ç¨‹æ­£å¼ä»é¢„è§ˆç‰¹æ€§è½¬ä¸ºæ ‡å‡†ç‰¹æ€§ï¼Œæ ‡å¿—ç€Javaåœ¨å¹¶å‘ç¼–ç¨‹é¢†åŸŸçš„åˆä¸€æ¬¡é‡å¤§é£è·ƒã€‚åœ¨è¿™ä¸ªä¸‡ç‰©å¹¶å‘çš„æ—¶ä»£ï¼ŒJavaå†æ¬¡è¯æ˜äº†è‡ªå·±ä¸æ—¶ä¿±è¿›çš„èƒ½åŠ›å’Œå†³å¿ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TypeScript æ¶æ„å®è·µï¼šä»åç«¯æ¥å£åˆ° UI æ¸²æŸ“æ•°æ®æµçš„å®Œæ•´æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7589893170387599360</link>    <guid>https://juejin.cn/post/7589893170387599360</guid>    <pubDate>2026-01-01T03:28:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589893170387599360" data-draft-id="7589918470788988962" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TypeScript æ¶æ„å®è·µï¼šä»åç«¯æ¥å£åˆ° UI æ¸²æŸ“æ•°æ®æµçš„å®Œæ•´æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,TypeScript,Vue.js"/> <meta itemprop="datePublished" content="2026-01-01T03:28:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜Ÿå…‰ä¸é—®èµ¶è·¯äºº"/> <meta itemprop="url" content="https://juejin.cn/user/950397121075304"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TypeScript æ¶æ„å®è·µï¼šä»åç«¯æ¥å£åˆ° UI æ¸²æŸ“æ•°æ®æµçš„å®Œæ•´æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/950397121075304/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜Ÿå…‰ä¸é—®èµ¶è·¯äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T03:28:15.000Z" title="Thu Jan 01 2026 03:28:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»‹ç»åœ¨ TS ä¸­ DTO ä¸ VO çš„æ€æƒ³ç¢°æ’ä¸å®è·µï¼Œç³»ç»Ÿæ€§åœ°æ¢³ç†ä»<strong>åç«¯æ¥å£å®šä¹‰</strong>åˆ°<strong>å‰ç«¯ä¸šåŠ¡æ¶ˆè´¹</strong>çš„å®Œæ•´é“¾è·¯ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ ä¸ºä»€ä¹ˆè¦åˆ† DTO å’Œ VOï¼Ÿ</h2>
<p>åœ¨ TypeScript å¼€å‘ä¸­ï¼Œç›´æ¥å°†åç«¯è¿”å›çš„ JSON æ•°æ®é€ä¼ åˆ° UI ç•Œé¢æ˜¯ç ”å‘åˆæœŸçš„â€œæ·å¾„â€ï¼Œä½†å¾€å¾€ä¹Ÿæ˜¯åæœŸç»´æŠ¤çš„â€œå™©æ¢¦â€ã€‚ä¸ºäº†è§£å†³åç«¯å­—æ®µå¤šå˜ã€å‘½åé£æ ¼ä¸ç»Ÿä¸€ï¼ˆå¦‚è›‡å½¢å‘½å vs é©¼å³°å‘½åï¼‰ç­‰é—®é¢˜ï¼Œå¼•å…¥ <strong>DTOï¼ˆæ•°æ®ä¼ è¾“å¯¹è±¡ï¼‰</strong> å’Œ <strong>VOï¼ˆè§†å›¾å¯¹è±¡ï¼‰</strong> çš„æ¦‚å¿µè‡³å…³é‡è¦ã€‚</p>
<h2 data-id="heading-1">äºŒã€ æ ¸å¿ƒæ€æƒ³ï¼šèŒè´£åˆ†ç¦»</h2>
<p>æˆ‘ä»¬å°†<strong>åç«¯æ¥å£æ•°æ®</strong>åœ¨ç³»ç»Ÿä¸­çš„æµè½¬æ‹†åˆ†ä¸ºä¸‰ä¸ªå…³é”®ç¯èŠ‚ï¼š</p>

























<table><thead><tr><th><strong>ç¯èŠ‚</strong></th><th><strong>æ‰¿è½½è½½ä½“</strong></th><th><strong>æ ¸å¿ƒèŒè´£</strong></th></tr></thead><tbody><tr><td><strong>å…¥å£å±‚</strong></td><td><code>DTO (Interface)</code></td><td><strong>å¥‘çº¦</strong>ã€‚ä¸¥æ ¼å¯¹é½æ¥å£åè®®ï¼Œæè¿°åç«¯å‘æ¥çš„åŸå§‹æ•°æ®ã€‚</td></tr><tr><td><strong>è½¬æ¢å±‚</strong></td><td><code>Mapper å‡½æ•°</code></td><td><strong>è§£è€¦</strong>ã€‚è´Ÿè´£é€»è¾‘æ¸…æ´—ã€å­—æ®µé‡å‘½åã€ç±»å‹è½¬æ¢ã€‚</td></tr><tr><td><strong>åº”ç”¨å±‚</strong></td><td><code>VO (Interface)</code></td><td><strong>çº¯å‡€</strong>ã€‚ä»…åŒ…å« UI å±‚æ¸²æŸ“æ‰€éœ€çš„å±æ€§ï¼Œå‘½åç¬¦åˆå‰ç«¯è§„èŒƒã€‚</td></tr></tbody></table>
<h2 data-id="heading-2">ä¸‰ã€ å®æˆ˜æ¼”ç»ƒï¼šAxios ä¸æ³›å‹çš„å®Œç¾ç»“åˆ</h2>
<p>ä¸ºäº†å®ç°è‡ªåŠ¨åŒ–çš„ç±»å‹æ¨å¯¼ï¼Œæˆ‘ä»¬é€šè¿‡<strong>æ³›å‹</strong>å°è£…é€šç”¨çš„å“åº”ç»“æ„ã€‚</p>
<h3 data-id="heading-3">1. å®šä¹‰é€šç”¨å“åº”å£³å­</h3>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// ç»Ÿä¸€åç«¯è¿”å›çš„ JSON æ ¼å¼</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApiResponse</span>&lt;T = <span class="hljs-built_in">any</span>&gt; {
  <span class="hljs-attr">code</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">data</span>: T; <span class="hljs-comment">// è¿™é‡Œçš„ T å°†è¢«å…·ä½“çš„ DTO æ›¿æ¢</span>
}
</code></pre>
<h3 data-id="heading-4">2. å®šä¹‰ DTO ä¸ VO</h3>
<p>åˆ©ç”¨ TS å·¥å…·ç±»å‹ï¼ˆå¦‚ <code>Pick</code>ï¼‰æé«˜å®šä¹‰æ•ˆç‡ã€‚</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-comment">// åç«¯åŸå§‹ DTO</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserDTO</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">user_name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">avatar_url</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">created_at</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// ç§’çº§æ—¶é—´æˆ³</span>
}

<span class="hljs-comment">// å‰ç«¯ä¸šåŠ¡ VO</span>
<span class="hljs-comment">// æŒ‘å‡ºéœ€è¦çš„å­—æ®µï¼Œå¹¶å¢åŠ /ä¿®æ”¹ä¸šåŠ¡å­—æ®µ</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">UserVO</span> = <span class="hljs-title class_">Pick</span>&lt;<span class="hljs-title class_">UserDTO</span>, <span class="hljs-string">'id'</span> | <span class="hljs-string">'avatar_url'</span>&gt; &amp; {
  <span class="hljs-attr">displayName</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">regDate</span>: <span class="hljs-title class_">Date</span>; <span class="hljs-comment">// è½¬æ¢ä¸º JS Date å¯¹è±¡</span>
};
</code></pre>
<h3 data-id="heading-5">3. Axios è¯·æ±‚ä¸ Mapper è½¬æ¢</h3>
<p>å°† Axios çš„æ³›å‹èƒ½åŠ›ä¸è½¬æ¢å‡½æ•°ä¸²è”èµ·æ¥ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> res = response.<span class="hljs-property">data</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">ApiResponse</span>;
  <span class="hljs-keyword">if</span> (res.<span class="hljs-property">code</span> !== <span class="hljs-number">200</span>) {
    <span class="hljs-comment">// ç»Ÿä¸€å¼¹å‡ºåç«¯ç»™çš„é”™è¯¯æç¤º</span>
    <span class="hljs-title function_">showToast</span>(res.<span class="hljs-property">message</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(res.<span class="hljs-property">message</span>));
  }
  <span class="hljs-keyword">return</span> response;
});

<span class="hljs-comment">// 1. API å±‚</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchUserApi</span> = (<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-comment">// å‘ŠçŸ¥ Axiosï¼šè¿”å›å€¼çš„ body æ˜¯ ApiResponse ç»“æ„ï¼Œå…¶ data å±æ€§æ˜¯ UserDTO</span>
  <span class="hljs-keyword">return</span> axios.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">ApiResponse</span>&lt;<span class="hljs-title class_">UserDTO</span>&gt;&gt;(<span class="hljs-string">`/api/user/<span class="hljs-subst">${id}</span>`</span>);
};

<span class="hljs-comment">// 2. Mapper å±‚ï¼šè´Ÿè´£ DTO -&gt; VO çš„è„æ´»ç´¯æ´»</span>
<span class="hljs-keyword">const</span> toUserVO = (<span class="hljs-attr">dto</span>: <span class="hljs-title class_">UserDTO</span>): <span class="hljs-function"><span class="hljs-params">UserVO</span> =&gt;</span> ({
  <span class="hljs-attr">id</span>: dto.<span class="hljs-property">id</span>,
  <span class="hljs-attr">avatar_url</span>: dto.<span class="hljs-property">avatar_url</span>,
  <span class="hljs-attr">displayName</span>: dto.<span class="hljs-property">user_name</span> || <span class="hljs-string">'æœªçŸ¥ç”¨æˆ·'</span>,
  <span class="hljs-attr">regDate</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(dto.<span class="hljs-property">created_at</span> * <span class="hljs-number">1000</span>)
});

<span class="hljs-comment">// 3. Service å±‚ï¼šä¸šåŠ¡ç»„è£…</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserDetail</span>(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">UserVO</span>&gt; {
  <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: res } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchUserApi</span>(id);
  <span class="hljs-comment">// res.data æ­¤æ—¶è¢«è‡ªåŠ¨æ¨å¯¼ä¸º UserDTO</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">toUserVO</span>(res.<span class="hljs-property">data</span>);
}

<span class="hljs-comment">// 4. UI å±‚ï¼ˆVue/Reactï¼‰ï¼šç›´æ¥ä½¿ç”¨ UserVO</span>
<span class="hljs-keyword">const</span> [user, setUser] = useState&lt;<span class="hljs-title class_">UserVO</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">getUserDetail</span>(<span class="hljs-string">'123'</span>).<span class="hljs-title function_">then</span>(setUser);
}, []);
</code></pre>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>è¿™å¥—æ¶æ„æœ¬è´¨ä¸Šæ˜¯åœ¨å‰ç«¯æ„å»ºäº†ä¸€é“ <strong>â€œç±»å‹é˜²ç«å¢™â€</strong>ï¼š</p>
<ul>
<li><strong>é˜²ç«å¢™å¤–</strong>ï¼šæ˜¯ä¸å¯æ§çš„åç«¯åŸå§‹æ•°æ®ï¼ˆDTOï¼‰ã€‚</li>
<li><strong>é˜²ç«å¢™å†…</strong>ï¼šæ˜¯ç¨³å®šçš„ã€ç¬¦åˆä¸šåŠ¡ä¹ æƒ¯çš„å¹²å‡€æ•°æ®ï¼ˆVOï¼‰ã€‚</li>
<li><strong>é˜²ç«å¢™ä¸­é—´</strong>ï¼šæ˜¯é€æ˜çš„è½¬æ¢é€»è¾‘ï¼ˆMapperï¼‰ã€‚</li>
</ul>
<p>é€šè¿‡è¿™ç§è®¾è®¡ï¼Œå³ä¾¿åç«¯æ¥å£å­—æ®µå‘ç”Ÿå˜æ›´ï¼Œä½ åªéœ€ä¿®æ”¹ <code>DTO</code> å®šä¹‰å’Œ <code>Mapper</code> å‡½æ•°ï¼ŒUI å±‚çš„ä»£ç å®Œå…¨ä¸éœ€è¦æ”¹åŠ¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ Tauri 2.0 + React + Rust æ‰“é€ è·¨å¹³å°æ–‡ä»¶å·¥å…·ç®±]]></title>    <link>https://juejin.cn/post/7589903499599183926</link>    <guid>https://juejin.cn/post/7589903499599183926</guid>    <pubDate>2026-01-01T03:46:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589903499599183926" data-draft-id="7589839433321021503" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ Tauri 2.0 + React + Rust æ‰“é€ è·¨å¹³å°æ–‡ä»¶å·¥å…·ç®±"/> <meta itemprop="keywords" content="React.js,Rust"/> <meta itemprop="datePublished" content="2026-01-01T03:46:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å€Ÿä¸ªç«er"/> <meta itemprop="url" content="https://juejin.cn/user/2225067265915783"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ Tauri 2.0 + React + Rust æ‰“é€ è·¨å¹³å°æ–‡ä»¶å·¥å…·ç®±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2225067265915783/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å€Ÿä¸ªç«er
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T03:46:52.000Z" title="Thu Jan 01 2026 03:46:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç”¨ Tauri 2.0 + React + Rust æ‰“é€ è·¨å¹³å°æ–‡ä»¶å·¥å…·ç®±</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>æœ€è¿‘åœ¨æ•´ç†ç”µè„‘æ–‡ä»¶æ—¶ï¼Œå‘ç°äº†å¤§é‡é‡å¤çš„ç…§ç‰‡å’Œè§†é¢‘ï¼Œå ç”¨äº†å‡ å GB çš„ç©ºé—´ã€‚å¸‚é¢ä¸Šçš„å»é‡å·¥å…·è¦ä¹ˆæ”¶è´¹ï¼Œè¦ä¹ˆåŠŸèƒ½è‡ƒè‚¿ï¼Œäºæ˜¯èŒç”Ÿäº†è‡ªå·±é€ ä¸€ä¸ªçš„æƒ³æ³•ã€‚</p>
<p>æ­£å¥½ Tauri 2.0 æ­£å¼å‘å¸ƒï¼Œç›¸æ¯” Electronï¼Œå®ƒæœ‰ç€æ›´å°çš„åŒ…ä½“ç§¯å’Œæ›´å¥½çš„æ€§èƒ½ã€‚äºæ˜¯å†³å®šç”¨ <strong>Tauri 2.0 + React + Rust</strong> æ¥å®ç°è¿™ä¸ªå·¥å…·ã€‚</p>
<p>æœ€ç»ˆæˆå“ï¼š<strong>File Toolkit</strong> â€”â€” ä¸€ä¸ªè·¨å¹³å°çš„æ–‡ä»¶å·¥å…·ç®±ï¼Œæ”¯æŒæ–‡ä»¶ç»Ÿè®¡ã€æ–‡ä»¶å»é‡ã€è§†é¢‘æˆªå–ã€‚</p>
<blockquote>
<p>GitHub: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F220529%2Ffile-toolkit" target="_blank" title="https://github.com/220529/file-toolkit" ref="nofollow noopener noreferrer">github.com/220529/fileâ€¦</a></p>
</blockquote>
<h3 data-id="heading-2">åŠŸèƒ½å±•ç¤º</h3>
<h4 data-id="heading-3">ğŸ“Š æ–‡ä»¶ç»Ÿè®¡</h4>
<p>é€’å½’æ‰«ææ–‡ä»¶å¤¹ï¼ŒæŒ‰ç±»å‹ç»Ÿè®¡æ–‡ä»¶æ•°é‡å’Œå¤§å°ï¼š</p>
<ul>
<li>æ”¯æŒæ‹–æ‹½é€‰æ‹©æ–‡ä»¶å¤¹</li>
<li>æŒ‰æ–‡ä»¶ç±»å‹åˆ†ç»„</li>
<li>æ˜¾ç¤ºå æ¯”å’Œæ€»å¤§å°</li>
</ul>
<h4 data-id="heading-4">ğŸ” æ–‡ä»¶å»é‡</h4>
<p>è¿™æ˜¯æ ¸å¿ƒåŠŸèƒ½ï¼Œæ”¯æŒï¼š</p>
<ul>
<li><strong>ä¸¤é˜¶æ®µæ‰«æ</strong>ï¼šå…ˆæŒ‰æ–‡ä»¶å¤§å°ç­›é€‰ï¼Œå†è®¡ç®—å“ˆå¸Œ</li>
<li><strong>xxHash3 å¿«é€Ÿå“ˆå¸Œ</strong>ï¼šæ¯” MD5 å¿« 5-10 å€</li>
<li><strong>å¹¶è¡Œè®¡ç®—</strong>ï¼šå……åˆ†åˆ©ç”¨å¤šæ ¸ CPU</li>
<li><strong>å¤§æ–‡ä»¶é‡‡æ ·</strong>ï¼šåªè¯»å¤´éƒ¨ + ä¸­é—´ + å°¾éƒ¨ï¼Œé¿å…å…¨é‡è¯»å–</li>
<li><strong>ç¼©ç•¥å›¾é¢„è§ˆ</strong>ï¼šå›¾ç‰‡ç›´æ¥æ˜¾ç¤ºï¼Œè§†é¢‘ç”¨ FFmpeg æˆªå¸§</li>
<li><strong>æ™ºèƒ½é€‰æ‹©</strong>ï¼šè‡ªåŠ¨é€‰ä¸­è¾ƒæ–°çš„æ–‡ä»¶ï¼Œä¿ç•™æœ€æ—©çš„</li>
</ul>
<h4 data-id="heading-5">âœ‚ï¸ è§†é¢‘æˆªå–</h4>
<ul>
<li><strong>å¿«é€Ÿæ¨¡å¼</strong>ï¼šæ— æŸæˆªå–ï¼ˆ-c copyï¼‰ï¼Œç§’çº§å®Œæˆ</li>
<li><strong>ç²¾ç¡®æ¨¡å¼</strong>ï¼šé‡æ–°ç¼–ç ï¼Œæ—¶é—´ç²¾ç¡®åˆ°æ¯«ç§’</li>
<li><strong>æ—¶é—´è½´é¢„è§ˆ</strong>ï¼š8 å¸§ç¼©ç•¥å›¾ï¼Œå¿«é€Ÿå®šä½</li>
<li><strong>å®æ—¶è¿›åº¦</strong>ï¼šç²¾ç¡®æ¨¡å¼æ˜¾ç¤ºç¼–ç è¿›åº¦</li>
</ul>
<h3 data-id="heading-6">æŠ€æœ¯é€‰å‹</h3>
<h4 data-id="heading-7">ä¸ºä»€ä¹ˆé€‰ Tauri è€Œä¸æ˜¯ Electronï¼Ÿ</h4>






























<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>Electron</th><th>Tauri</th></tr></thead><tbody><tr><td>åŒ…ä½“ç§¯</td><td>150MB+</td><td>10MB+</td></tr><tr><td>å†…å­˜å ç”¨</td><td>é«˜ï¼ˆChromiumï¼‰</td><td>ä½ï¼ˆç³»ç»Ÿ WebViewï¼‰</td></tr><tr><td>åç«¯è¯­è¨€</td><td>Node.js</td><td>Rust</td></tr><tr><td>æ€§èƒ½</td><td>ä¸€èˆ¬</td><td>ä¼˜ç§€</td></tr></tbody></table>
<p>å¯¹äºæ–‡ä»¶å¤„ç†è¿™ç§ CPU å¯†é›†å‹ä»»åŠ¡ï¼ŒRust çš„æ€§èƒ½ä¼˜åŠ¿éå¸¸æ˜æ˜¾ã€‚</p>
<h4 data-id="heading-8">æŠ€æœ¯æ ˆ</h4>
<pre><code class="hljs language-css" lang="css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend                          â”‚
â”‚         React <span class="hljs-number">19</span> + TypeScript + Tailwind CSS        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   Tauri IPC                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Backend                           â”‚
â”‚                  Rust + Tauri <span class="hljs-number">2.0</span>                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ file_stats  â”‚    dedup    â”‚     <span class="hljs-selector-tag">video</span>       â”‚   â”‚
â”‚  â”‚  walkdir    â”‚  xxHash3    â”‚    FFmpeg       â”‚   â”‚
â”‚  â”‚             â”‚  rayon      â”‚                 â”‚   â”‚
â”‚  â”‚             â”‚  memmap2    â”‚                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-9">æ ¸å¿ƒå®ç°</h3>
<h4 data-id="heading-10">1. æ–‡ä»¶å»é‡ç®—æ³•</h4>
<p>å»é‡çš„æ ¸å¿ƒæ˜¯è®¡ç®—æ–‡ä»¶å“ˆå¸Œï¼Œä½†å¦‚æœå¯¹æ¯ä¸ªæ–‡ä»¶éƒ½å®Œæ•´è®¡ç®—å“ˆå¸Œï¼Œæ•ˆç‡ä¼šå¾ˆä½ã€‚æˆ‘é‡‡ç”¨äº†ä¸¤é˜¶æ®µç­–ç•¥ï¼š</p>
<p><strong>ç¬¬ä¸€é˜¶æ®µï¼šæŒ‰æ–‡ä»¶å¤§å°ç­›é€‰</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">size_map</span>: HashMap&lt;<span class="hljs-type">u64</span>, <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;&gt; = HashMap::<span class="hljs-title function_ invoke__">new</span>();

<span class="hljs-keyword">for</span> <span class="hljs-variable">entry</span> <span class="hljs-keyword">in</span> WalkDir::<span class="hljs-title function_ invoke__">new</span>(&amp;path)
    .<span class="hljs-title function_ invoke__">into_iter</span>()
    .<span class="hljs-title function_ invoke__">filter_map</span>(|e| e.<span class="hljs-title function_ invoke__">ok</span>())
    .<span class="hljs-title function_ invoke__">filter</span>(|e| e.<span class="hljs-title function_ invoke__">file_type</span>().<span class="hljs-title function_ invoke__">is_file</span>())
{
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Ok</span>(meta) = entry.<span class="hljs-title function_ invoke__">metadata</span>() {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">size</span> = meta.<span class="hljs-title function_ invoke__">len</span>();
        <span class="hljs-keyword">if</span> size &gt; <span class="hljs-number">0</span> {
            size_map.<span class="hljs-title function_ invoke__">entry</span>(size).<span class="hljs-title function_ invoke__">or_default</span>().<span class="hljs-title function_ invoke__">push</span>(entry.<span class="hljs-title function_ invoke__">path</span>().<span class="hljs-title function_ invoke__">to_string_lossy</span>().<span class="hljs-title function_ invoke__">to_string</span>());
        }
    }
}

<span class="hljs-comment">// åªå¯¹å¤§å°ç›¸åŒçš„æ–‡ä»¶è®¡ç®—å“ˆå¸Œ</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">files_to_hash</span>: <span class="hljs-type">Vec</span>&lt;_&gt; = size_map
    .<span class="hljs-title function_ invoke__">iter</span>()
    .<span class="hljs-title function_ invoke__">filter</span>(|(_, files)| files.<span class="hljs-title function_ invoke__">len</span>() &gt;= <span class="hljs-number">2</span>)
    .<span class="hljs-title function_ invoke__">flat_map</span>(|(size, files)| files.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">map</span>(<span class="hljs-keyword">move</span> |f| (*size, f.<span class="hljs-title function_ invoke__">clone</span>())))
    .<span class="hljs-title function_ invoke__">collect</span>();
</code></pre>
<p>è¿™ä¸€æ­¥å¯ä»¥è¿‡æ»¤æ‰å¤§éƒ¨åˆ†æ–‡ä»¶ï¼Œå› ä¸ºå¤§å°ä¸åŒçš„æ–‡ä»¶è‚¯å®šä¸é‡å¤ã€‚</p>
<p><strong>ç¬¬äºŒé˜¶æ®µï¼šå¹¶è¡Œè®¡ç®—å“ˆå¸Œ</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> rayon::prelude::*;

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">results</span>: <span class="hljs-type">Vec</span>&lt;(<span class="hljs-type">String</span>, FileInfo)&gt; = files_to_hash
    .<span class="hljs-title function_ invoke__">par_iter</span>()  <span class="hljs-comment">// å¹¶è¡Œè¿­ä»£</span>
    .<span class="hljs-title function_ invoke__">filter_map</span>(|(size, file_path)| {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">hash</span> = <span class="hljs-title function_ invoke__">calculate_fast_hash</span>(Path::<span class="hljs-title function_ invoke__">new</span>(file_path), *size).<span class="hljs-title function_ invoke__">ok</span>()?;
        <span class="hljs-comment">// ...</span>
        <span class="hljs-title function_ invoke__">Some</span>((hash, file_info))
    })
    .<span class="hljs-title function_ invoke__">collect</span>();
</code></pre>
<p>ä½¿ç”¨ <code>rayon</code> å®ç°å¹¶è¡Œè®¡ç®—ï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸ CPUã€‚</p>
<h4 data-id="heading-11">2. å¿«é€Ÿå“ˆå¸Œç®—æ³•</h4>
<p>ä¼ ç»Ÿçš„ MD5 å“ˆå¸Œé€Ÿåº¦è¾ƒæ…¢ï¼Œæˆ‘é€‰æ‹©äº† <strong>xxHash3</strong>ï¼Œå®ƒæ˜¯ç›®å‰æœ€å¿«çš„éåŠ å¯†å“ˆå¸Œç®—æ³•ä¹‹ä¸€ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">calculate_fast_hash</span>(path: &amp;Path, size: <span class="hljs-type">u64</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">String</span>&gt; {
    <span class="hljs-keyword">use</span> memmap2::Mmap;
    <span class="hljs-keyword">use</span> xxhash_rust::xxh3::Xxh3;

    <span class="hljs-keyword">const</span> SMALL_FILE: <span class="hljs-type">u64</span> = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>;      <span class="hljs-comment">// 1MB</span>
    <span class="hljs-keyword">const</span> THRESHOLD: <span class="hljs-type">u64</span> = <span class="hljs-number">10</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>;  <span class="hljs-comment">// 10MB</span>
    <span class="hljs-keyword">const</span> SAMPLE_SIZE: <span class="hljs-type">usize</span> = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>;   <span class="hljs-comment">// é‡‡æ · 1MB</span>

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">file</span> = File::<span class="hljs-title function_ invoke__">open</span>(path).<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())?;

    <span class="hljs-keyword">if</span> size &lt;= SMALL_FILE {
        <span class="hljs-comment">// å°æ–‡ä»¶ï¼šå†…å­˜æ˜ å°„ï¼Œé›¶æ‹·è´</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">mmap</span> = <span class="hljs-keyword">unsafe</span> { Mmap::<span class="hljs-title function_ invoke__">map</span>(&amp;file) }.<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())?;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">hash</span> = xxhash_rust::xxh3::<span class="hljs-title function_ invoke__">xxh3_64</span>(&amp;mmap);
        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">"{:016x}"</span>, hash));
    }

    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">hasher</span> = Xxh3::<span class="hljs-title function_ invoke__">new</span>();

    <span class="hljs-keyword">if</span> size &lt;= THRESHOLD {
        <span class="hljs-comment">// ä¸­ç­‰æ–‡ä»¶ï¼šå®Œæ•´è¯»å–</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">mmap</span> = <span class="hljs-keyword">unsafe</span> { Mmap::<span class="hljs-title function_ invoke__">map</span>(&amp;file) }.<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())?;
        hasher.<span class="hljs-title function_ invoke__">update</span>(&amp;mmap);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å¤§æ–‡ä»¶ï¼šåªè¯»å¤´éƒ¨ + ä¸­é—´ + å°¾éƒ¨</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">mmap</span> = <span class="hljs-keyword">unsafe</span> { Mmap::<span class="hljs-title function_ invoke__">map</span>(&amp;file) }.<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())?;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">len</span> = mmap.<span class="hljs-title function_ invoke__">len</span>();

        hasher.<span class="hljs-title function_ invoke__">update</span>(&amp;mmap[..SAMPLE_SIZE]);                    <span class="hljs-comment">// å¤´éƒ¨</span>
        hasher.<span class="hljs-title function_ invoke__">update</span>(&amp;mmap[len/<span class="hljs-number">2</span> - SAMPLE_SIZE/<span class="hljs-number">2</span>..][..SAMPLE_SIZE]); <span class="hljs-comment">// ä¸­é—´</span>
        hasher.<span class="hljs-title function_ invoke__">update</span>(&amp;mmap[len - SAMPLE_SIZE..]);              <span class="hljs-comment">// å°¾éƒ¨</span>
        hasher.<span class="hljs-title function_ invoke__">update</span>(&amp;size.<span class="hljs-title function_ invoke__">to_le_bytes</span>());                     <span class="hljs-comment">// æ–‡ä»¶å¤§å°</span>
    }

    <span class="hljs-title function_ invoke__">Ok</span>(<span class="hljs-built_in">format!</span>(<span class="hljs-string">"{:016x}"</span>, hasher.<span class="hljs-title function_ invoke__">digest</span>()))
}
</code></pre>
<p><strong>ä¼˜åŒ–ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>xxHash3</strong>ï¼šæ¯” MD5 å¿« 5-10 å€</li>
<li><strong>memmap2</strong>ï¼šå†…å­˜æ˜ å°„ï¼Œé›¶æ‹·è´è¯»å–</li>
<li><strong>å¤§æ–‡ä»¶é‡‡æ ·</strong>ï¼šåªè¯»å¤´ä¸­å°¾å„ 1MBï¼Œé¿å…å…¨é‡è¯»å–</li>
</ul>
<h4 data-id="heading-12">3. å‰åç«¯é€šä¿¡</h4>
<p>Tauri ä½¿ç”¨ IPC è¿›è¡Œå‰åç«¯é€šä¿¡ã€‚åç«¯å®šä¹‰å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-meta">#[tauri::command]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">find_duplicates</span>(app: AppHandle, path: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;DedupResult, <span class="hljs-type">String</span>&gt; {
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>å‰ç«¯è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { invoke } <span class="hljs-keyword">from</span> <span class="hljs-string">"@tauri-apps/api/core"</span>;

<span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> invoke&lt;<span class="hljs-title class_">DedupResult</span>&gt;(<span class="hljs-string">"find_duplicates"</span>, { path });
</code></pre>
<h4 data-id="heading-13">4. è¿›åº¦åé¦ˆ</h4>
<p>é•¿æ—¶é—´ä»»åŠ¡éœ€è¦æ˜¾ç¤ºè¿›åº¦ï¼ŒTauri æ”¯æŒäº‹ä»¶æœºåˆ¶ï¼š</p>
<p><strong>åç«¯å‘é€è¿›åº¦</strong>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> tauri::{AppHandle, Emitter};

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = app.<span class="hljs-title function_ invoke__">emit</span>(<span class="hljs-string">"dedup-progress"</span>, DedupProgress {
    stage: <span class="hljs-string">"è®¡ç®—æ–‡ä»¶æŒ‡çº¹"</span>.<span class="hljs-title function_ invoke__">into</span>(),
    current,
    total: total_to_hash,
    percent,
});
</code></pre>
<p><strong>å‰ç«¯ç›‘å¬</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { listen } <span class="hljs-keyword">from</span> <span class="hljs-string">"@tauri-apps/api/event"</span>;

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> unlisten = listen&lt;<span class="hljs-title class_">DedupProgress</span>&gt;(<span class="hljs-string">"dedup-progress"</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-title function_">setProgress</span>(event.<span class="hljs-property">payload</span>);
  });
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> { unlisten.<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">fn</span>) =&gt;</span> <span class="hljs-title function_">fn</span>()); };
}, []);
</code></pre>
<h4 data-id="heading-14">5. å†…åµŒ FFmpeg</h4>
<p>è§†é¢‘åŠŸèƒ½ä¾èµ– FFmpegï¼Œä¸ºäº†è®©ç”¨æˆ·å¼€ç®±å³ç”¨ï¼Œæˆ‘æŠŠ FFmpeg æ‰“åŒ…è¿›äº†åº”ç”¨ï¼š</p>
<p><strong>é…ç½® tauri.conf.json</strong>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"bundle"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"externalBin"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"binaries/ffmpeg"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"binaries/ffprobe"</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>Rust ä¸­è·å–è·¯å¾„</strong>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_ffmpeg_path</span>(app: &amp;AppHandle) <span class="hljs-punctuation">-&gt;</span> PathBuf {
    app.<span class="hljs-title function_ invoke__">path</span>()
        .<span class="hljs-title function_ invoke__">resource_dir</span>()
        .<span class="hljs-title function_ invoke__">ok</span>()
        .<span class="hljs-title function_ invoke__">map</span>(|p| p.<span class="hljs-title function_ invoke__">join</span>(<span class="hljs-string">"binaries"</span>).<span class="hljs-title function_ invoke__">join</span>(<span class="hljs-string">"ffmpeg"</span>))
        .<span class="hljs-title function_ invoke__">filter</span>(|p| p.<span class="hljs-title function_ invoke__">exists</span>())
        .<span class="hljs-title function_ invoke__">unwrap_or_else</span>(|| PathBuf::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"ffmpeg"</span>))  <span class="hljs-comment">// å›é€€åˆ°ç³»ç»Ÿ PATH</span>
}
</code></pre>
<h3 data-id="heading-15">è¸©å‘è®°å½•</h3>
<h4 data-id="heading-16">1. Tauri æ‹–æ‹½äº‹ä»¶æ˜¯å…¨å±€çš„</h4>
<p>æœ€åˆä½¿ç”¨ CSS <code>hidden</code> éšè—éæ´»åŠ¨ Tab æ¥ä¿æŒçŠ¶æ€ï¼Œä½†å‘ç°æ‹–æ‹½æ–‡ä»¶æ—¶æ‰€æœ‰ Tab éƒ½ä¼šå“åº”ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç»™æ¯ä¸ªç»„ä»¶ä¼ é€’ <code>active</code> å±æ€§ï¼Œåªæœ‰æ¿€æ´»çš„ç»„ä»¶æ‰ç›‘å¬æ‹–æ‹½äº‹ä»¶ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (!active) <span class="hljs-keyword">return</span>;  <span class="hljs-comment">// éæ¿€æ´»çŠ¶æ€ä¸ç›‘å¬</span>
  
  <span class="hljs-keyword">const</span> unlisten = <span class="hljs-title function_">listen</span>(<span class="hljs-string">"tauri://drag-drop"</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!active) <span class="hljs-keyword">return</span>;
    <span class="hljs-comment">// å¤„ç†æ‹–æ‹½</span>
  });
  <span class="hljs-comment">// ...</span>
}, [active]);
</code></pre>
<h4 data-id="heading-17">2. å¹¶è¡Œè®¡ç®—è¿›åº¦è·³åŠ¨</h4>
<p>ä½¿ç”¨ rayon å¹¶è¡Œè®¡ç®—æ—¶ï¼Œå¤šçº¿ç¨‹åŒæ—¶æ›´æ–°è®¡æ•°å™¨ï¼Œå¯¼è‡´è¿›åº¦æ˜¾ç¤ºä¸è¿ç»­ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨åŸå­å˜é‡ + compare_exchange ç¡®ä¿è¿›åº¦å•è°ƒé€’å¢ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">progress_counter</span> = Arc::<span class="hljs-title function_ invoke__">new</span>(AtomicUsize::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">0</span>));
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">last_reported</span> = Arc::<span class="hljs-title function_ invoke__">new</span>(AtomicUsize::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">0</span>));

<span class="hljs-comment">// åœ¨å¹¶è¡Œè¿­ä»£ä¸­</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">current</span> = progress_counter.<span class="hljs-title function_ invoke__">fetch_add</span>(<span class="hljs-number">1</span>, Ordering::Relaxed) + <span class="hljs-number">1</span>;
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">last</span> = last_reported.<span class="hljs-title function_ invoke__">load</span>(Ordering::Relaxed);

<span class="hljs-keyword">if</span> current &gt; last &amp;&amp; (current - last &gt;= <span class="hljs-number">20</span> || current == total) {
    <span class="hljs-keyword">if</span> last_reported.<span class="hljs-title function_ invoke__">compare_exchange</span>(last, current, Ordering::SeqCst, Ordering::Relaxed).<span class="hljs-title function_ invoke__">is_ok</span>() {
        <span class="hljs-comment">// å‘é€è¿›åº¦</span>
    }
}
</code></pre>
<h4 data-id="heading-18">3. Release æ¯” Debug å¿«å¾ˆå¤š</h4>
<p>å¼€å‘æ—¶è§‰å¾—å»é‡é€Ÿåº¦ä¸€èˆ¬ï¼Œæ‰“åŒ…åå‘ç°å¿«äº†å¥½å‡ å€ã€‚</p>

















<table><thead><tr><th>æ¨¡å¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Debug</td><td>æ— ä¼˜åŒ–ï¼Œä¿ç•™è°ƒè¯•ä¿¡æ¯</td></tr><tr><td>Release</td><td>LTOã€å†…è”ã€å¾ªç¯å±•å¼€ç­‰ä¼˜åŒ–</td></tr></tbody></table>
<p>å¯¹äº CPU å¯†é›†å‹ä»»åŠ¡ï¼ŒRelease ç‰ˆæœ¬å¯èƒ½å¿« 3-5 å€ã€‚</p>
<h3 data-id="heading-19">æ‰“åŒ…å‘å¸ƒ</h3>
<h4 data-id="heading-20">æœ¬åœ°æ‰“åŒ…</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. ä¸‹è½½ FFmpeg é™æ€ç‰ˆæœ¬ï¼ˆmacOS ç¤ºä¾‹ï¼‰</span>
curl -L <span class="hljs-string">"https://evermeet.cx/ffmpeg/getrelease/ffmpeg/zip"</span> -o /tmp/ffmpeg.zip
unzip /tmp/ffmpeg.zip -d src-tauri/binaries/
<span class="hljs-built_in">mv</span> src-tauri/binaries/ffmpeg src-tauri/binaries/ffmpeg-x86_64-apple-darwin

<span class="hljs-comment"># 2. æ‰§è¡Œæ‰“åŒ…</span>
pnpm tauri build
</code></pre>
<p>äº§ç‰©ï¼š<code>src-tauri/target/release/bundle/macos/File Toolkit.app</code>ï¼ˆçº¦ 62MBï¼Œå« FFmpegï¼‰</p>
<h4 data-id="heading-21">GitHub Actions å¤šå¹³å°è‡ªåŠ¨æ‰“åŒ…</h4>
<p>æœ¬åœ°æ‰“åŒ…åªèƒ½ç”Ÿæˆå½“å‰å¹³å°çš„å®‰è£…åŒ…ã€‚è¦æ”¯æŒ Windowsã€Linuxï¼Œéœ€è¦åœ¨å¯¹åº”å¹³å°ç¼–è¯‘ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç”¨ GitHub Actionsï¼Œå®ƒæä¾› macOSã€Windowsã€Linux è™šæ‹Ÿæœºï¼Œå¯ä»¥å¹¶è¡Œæ‰“åŒ…ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">git push tag v0<span class="hljs-selector-class">.2</span><span class="hljs-selector-class">.0</span>
        â†“
GitHub Actions è§¦å‘
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åŒæ—¶å¯åŠ¨ <span class="hljs-number">4</span> å°è™šæ‹Ÿæœºï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  macOS VM   â”‚  macOS VM   â”‚ Windows VM â”‚  Linux VM  â”‚
â”‚  (Intel)    â”‚  (ARM)      â”‚            â”‚            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è£…ç¯å¢ƒ      â”‚ è£…ç¯å¢ƒ       â”‚ è£…ç¯å¢ƒ     â”‚ è£…ç¯å¢ƒ      â”‚
â”‚ ä¸‹è½½ FFmpeg â”‚ ä¸‹è½½ FFmpeg â”‚ ä¸‹è½½FFmpeg â”‚ ä¸‹è½½FFmpeg â”‚
â”‚ tauri build â”‚ tauri build â”‚ tauri buildâ”‚ tauri buildâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   <span class="hljs-selector-class">.dmg</span>      â”‚   <span class="hljs-selector-class">.dmg</span>      â”‚   <span class="hljs-selector-class">.msi</span>     â”‚   <span class="hljs-selector-class">.deb</span>     â”‚
â”‚  (x86_64)   â”‚  (aarch64)  â”‚   <span class="hljs-selector-class">.exe</span>     â”‚  <span class="hljs-selector-class">.AppImage</span> â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
   å…¨éƒ¨ä¸Šä¼ åˆ° GitHub Release
</code></pre>
<p><strong>æ ¸å¿ƒé…ç½®</strong> <code>.github/workflows/release.yml</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">name:</span> <span class="hljs-string">Release</span>

<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">tags:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'v*'</span>

<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">build:</span>
    <span class="hljs-attr">strategy:</span>
      <span class="hljs-attr">matrix:</span>
        <span class="hljs-attr">include:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">platform:</span> <span class="hljs-string">macos-latest</span>
            <span class="hljs-attr">target:</span> <span class="hljs-string">x86_64-apple-darwin</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">platform:</span> <span class="hljs-string">macos-latest</span>
            <span class="hljs-attr">target:</span> <span class="hljs-string">aarch64-apple-darwin</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">platform:</span> <span class="hljs-string">windows-latest</span>
            <span class="hljs-attr">target:</span> <span class="hljs-string">x86_64-pc-windows-msvc</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">platform:</span> <span class="hljs-string">ubuntu-22.04</span>
            <span class="hljs-attr">target:</span> <span class="hljs-string">x86_64-unknown-linux-gnu</span>

    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">${{</span> <span class="hljs-string">matrix.platform</span> <span class="hljs-string">}}</span>

    <span class="hljs-attr">steps:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v4</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v4</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">pnpm/action-setup@v4</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">dtolnay/rust-toolchain@stable</span>

      <span class="hljs-comment"># å„å¹³å°ä¸‹è½½å¯¹åº”çš„ FFmpeg</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Download</span> <span class="hljs-string">FFmpeg</span> <span class="hljs-string">(macOS)</span>
        <span class="hljs-attr">if:</span> <span class="hljs-string">matrix.platform</span> <span class="hljs-string">==</span> <span class="hljs-string">'macos-latest'</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">|
          curl -L "https://evermeet.cx/ffmpeg/getrelease/ffmpeg/zip" -o /tmp/ffmpeg.zip
          # ...
</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Download</span> <span class="hljs-string">FFmpeg</span> <span class="hljs-string">(Windows)</span>
        <span class="hljs-attr">if:</span> <span class="hljs-string">matrix.platform</span> <span class="hljs-string">==</span> <span class="hljs-string">'windows-latest'</span>
        <span class="hljs-attr">shell:</span> <span class="hljs-string">pwsh</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">|
          Invoke-WebRequest -Uri "https://www.gyan.dev/ffmpeg/builds/..." -OutFile ...
          # ...
</span>
      <span class="hljs-comment"># æ‰“åŒ…å¹¶ä¸Šä¼ åˆ° Release</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">tauri-apps/tauri-action@v0</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">tagName:</span> <span class="hljs-string">${{</span> <span class="hljs-string">github.ref_name</span> <span class="hljs-string">}}</span>
          <span class="hljs-attr">releaseDraft:</span> <span class="hljs-literal">true</span>
          <span class="hljs-attr">args:</span> <span class="hljs-string">--target</span> <span class="hljs-string">${{</span> <span class="hljs-string">matrix.target</span> <span class="hljs-string">}}</span>
</code></pre>
<p><strong>ä½¿ç”¨æ–¹å¼</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">git tag v0.2.0
git push origin v0.2.0
<span class="hljs-comment"># è‡ªåŠ¨è§¦å‘ï¼Œå®Œæˆåå» Releases é¡µé¢å‘å¸ƒ</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆèƒ½è·¨å¹³å°ï¼Ÿ</strong></p>
<ul>
<li><strong>å‰ç«¯</strong>ï¼šReact ç¼–è¯‘æˆ HTML/CSS/JSï¼Œå“ªéƒ½èƒ½è·‘</li>
<li><strong>åç«¯</strong>ï¼šRust åœ¨ç›®æ ‡å¹³å°çš„è™šæ‹Ÿæœºä¸Šç¼–è¯‘ï¼Œç”ŸæˆåŸç”ŸäºŒè¿›åˆ¶</li>
<li><strong>FFmpeg</strong>ï¼šæ¯ä¸ªå¹³å°ä¸‹è½½å¯¹åº”çš„é™æ€ç‰ˆæœ¬</li>
</ul>
<p>æœ¬è´¨æ˜¯<strong>åœ¨çœŸå®ç›®æ ‡å¹³å°ä¸Šç¼–è¯‘</strong>ï¼ŒGitHub å…è´¹æä¾›è¿™äº›è™šæ‹Ÿæœºã€‚</p>
<h3 data-id="heading-22">æ€»ç»“</h3>
<p>è¿™ä¸ªé¡¹ç›®è®©æˆ‘å¯¹ Tauri 2.0 æœ‰äº†æ›´æ·±çš„ç†è§£ï¼š</p>
<ol>
<li><strong>Rust æ€§èƒ½ç¡®å®å¼º</strong>ï¼šæ–‡ä»¶å“ˆå¸Œã€å¹¶è¡Œè®¡ç®—ç­‰åœºæ™¯ä¼˜åŠ¿æ˜æ˜¾</li>
<li><strong>Tauri å¼€å‘ä½“éªŒä¸é”™</strong>ï¼šå‰åç«¯åˆ†ç¦»ï¼ŒIPC é€šä¿¡ç®€å•</li>
<li><strong>åŒ…ä½“ç§¯å°</strong>ï¼šä¸å« FFmpeg åªæœ‰ 10MB å·¦å³</li>
<li><strong>è·¨å¹³å°</strong>ï¼šä¸€å¥—ä»£ç ï¼Œå¤šç«¯è¿è¡Œ</li>
</ol>
<p>å¦‚æœä½ ä¹Ÿæƒ³å°è¯• Tauriï¼Œè¿™ä¸ªé¡¹ç›®å¯ä»¥ä½œä¸ºå‚è€ƒã€‚</p>
<blockquote>
<p>GitHub: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F220529%2Ffile-toolkit" target="_blank" title="https://github.com/220529/file-toolkit" ref="nofollow noopener noreferrer">github.com/220529/fileâ€¦</a></p>
<p>æ¬¢è¿ Star â­ï¸</p>
</blockquote>
<hr/>
<p><strong>ç›¸å…³æ–‡ç« </strong>ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftauri.app%2F" target="_blank" title="https://tauri.app/" ref="nofollow noopener noreferrer">Tauri å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fxxhash.com%2F" target="_blank" title="https://xxhash.com/" ref="nofollow noopener noreferrer">xxHash ç®—æ³•ä»‹ç»</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.rs%2Frayon%2F" target="_blank" title="https://docs.rs/rayon/" ref="nofollow noopener noreferrer">Rayon å¹¶è¡Œè®¡ç®—</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[kotlinåç¨‹-åŸºç¡€è®¾æ–½ç¯‡-å‡½æ•°çš„æŒ‚èµ·]]></title>    <link>https://juejin.cn/post/7589920318132240384</link>    <guid>https://juejin.cn/post/7589920318132240384</guid>    <pubDate>2026-01-01T03:05:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589920318132240384" data-draft-id="7589893170387533824" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="kotlinåç¨‹-åŸºç¡€è®¾æ–½ç¯‡-å‡½æ•°çš„æŒ‚èµ·"/> <meta itemprop="keywords" content="Kotlin"/> <meta itemprop="datePublished" content="2026-01-01T03:05:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Huangå…„"/> <meta itemprop="url" content="https://juejin.cn/user/52404619842712"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            kotlinåç¨‹-åŸºç¡€è®¾æ–½ç¯‡-å‡½æ•°çš„æŒ‚èµ·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/52404619842712/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Huangå…„
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T03:05:25.000Z" title="Thu Jan 01 2026 03:05:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>ç§ä¸€é¢—æ ‘çš„æœ€å¥½æ—¶æœºæ˜¯åå¹´å‰ï¼Œå…¶æ¬¡æ˜¯ç°åœ¨ã€‚
å­¦ä¹ ä¹Ÿä¸€æ ·ã€‚
è·Ÿç€éœè€å¸ˆçš„ã€Šæ·±å…¥ç†è§£ Kotlin æºç¨‹ã€‹å­¦ä¹ ä¸€ä¸‹åç¨‹ã€‚</p>
<h2 data-id="heading-0">å‡½æ•°çš„æŒ‚èµ·</h2>
<p>åç¨‹çš„æŒ‚èµ·å’Œæ¢å¤èƒ½åŠ›æœ¬è´¨ä¸Šå°±æ˜¯å‡½æ•°çš„æŒ‚èµ·å’Œæ¢å¤ã€‚åœ¨ kotlin ä¸­ï¼Œä½¿ç”¨<code>suspend</code>å…³é”®å­—ä¿®é¥°çš„å‡½æ•°å«åš<code>æŒ‚èµ·å‡½æ•°</code>,è¿™ç§å‡½æ•°åªèƒ½åœ¨åç¨‹ææˆ–è€…å…¶ä»–æŒ‚èµ·å‡½æ•°ä¸­è°ƒç”¨ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠ kotlin ä¸­çš„å‡½æ•°å½’ä¸ºä¸¤ç±»ï¼šæ™®é€šå‡½æ•°å’ŒæŒ‚èµ·å‡½æ•°ã€‚
æŒ‚èµ·å‡½æ•°ä¸ä¸€å®šçœŸçš„ä¼šè¢«æŒ‚èµ·ï¼Œå®ƒåªæ˜¯æä¾›äº†ä¸€ä¸ªæŒ‚èµ·çš„æ¡ä»¶ã€‚æ¯”å¦‚æˆ‘ä»¬å¯ä»¥è®©æŒ‚èµ·å‡½æ•°ç›´æ¥ returnã€‚</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">testOne</span><span class="hljs-params">(param:<span class="hljs-type">Int</span>)</span></span>:<span class="hljs-built_in">Int</span>{
    <span class="hljs-keyword">return</span>  param * param
}
</code></pre>
<p>è¿™é‡Œåªæ˜¯ä¸¾ä¸ªä¾‹å­ï¼Œè¿™æ ·å†™çš„è¯ç¼–è¾‘å™¨ä¼šæç¤ºæˆ‘ä»¬<code>suspend</code>æ˜¯ä¸ªå†—ä½™çš„ä¿®é¥°ç¬¦ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecf0d208903d4d4583239af1c2c45785~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSHVhbmflhYQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767841525&amp;x-signature=%2Fys2JqURwEWgp9FSzdSG1JmKHwY%3D" alt="redundant_suspend.png" loading="lazy"/>
æˆ‘ä»¬å†çœ‹å¦å¤–ä¸€ä¸ªå‡½æ•°</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">testThree</span><span class="hljs-params">(param: <span class="hljs-type">Int</span>)</span></span> {
    <span class="hljs-keyword">val</span> result = suspendCoroutine&lt;<span class="hljs-built_in">Int</span>&gt; { continuation -&gt; println(<span class="hljs-string">"continuation is <span class="hljs-variable">$continuation</span>"</span>)
        continuation.resumeWith(Result.success(param))
    }
    println(<span class="hljs-string">"result is <span class="hljs-variable">$result</span>"</span>)
}

</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ‰€è°“çš„åç¨‹çš„æŒ‚èµ·ï¼Œå°±æ˜¯ç¨‹åºæ‰§è¡Œæµç¨‹å‘ç”Ÿå¼‚æ­¥è°ƒç”¨æ—¶ï¼Œå½“å‰è°ƒç”¨æµç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ã€‚</p>
<h2 data-id="heading-1">æŒ‚èµ·ç‚¹</h2>
<p>å¯¹æ¯”ä¸Šé¢ä¸¤ä¸ªå‡½æ•°æ¥çœ‹ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°æƒ³è¦è®©è‡ªå·±æŒ‚èµ·ï¼Œæ‰€éœ€è¦çš„æ— éå°±æ˜¯ä¸€ä¸ª Continuation å®ä¾‹ï¼Œé‚£ä¹ˆè¿™ä¸ªå®ä¾‹æ€ä¹ˆæ¥çš„ï¼Ÿåœ¨å‰é¢çš„æ–‡ç« ä¸­ä¹Ÿæåˆ°è¿‡ï¼Œåç¨‹ä½“æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ª Continuation å®ä¾‹ï¼Œä¹Ÿæ­£å¼å› ä¸ºè¿™ä¸ªåŸå› ï¼ŒæŒ‚èµ·å‡½æ•°æ‰èƒ½åœ¨åç¨‹ä½“å†…è¿è¡Œã€‚
åœ¨åç¨‹å†…éƒ¨ï¼ŒæŒ‚èµ·å‡½æ•°çš„è°ƒç”¨å¤„è¢«ç§°ä¸ºæŒ‚èµ·ç‚¹ï¼ŒæŒ‚èµ·ç‚¹å¦‚ä½•å‘ç”Ÿå¼‚æ­¥è°ƒç”¨ï¼Œé‚£ä¹ˆå½“å‰åç¨‹å°±ä¼šè¢«æŒ‚èµ·ï¼Œç›´åˆ°å¯¹åº”çš„ Continuation çš„ resume å‡½æ•°è¢«è°ƒç”¨æ‰ä¼šæ¢å¤æ‰§è¡Œã€‚</p>
<p>åœ¨ä¸Šé¢çš„<code>testThree</code>å‡½æ•°ä¸­ï¼Œä»æ‰“å°ç»“æœå¯ä»¥çœ‹å‡ºè·å–åˆ°çš„<code>continuation</code>å¯¹è±¡æ˜¯ä¸€ä¸ª<code>SafeContinuation</code>ã€‚</p>
<blockquote>
<p>continuation is SafeContinuation for Continuation at coroutines.MainKt.testThree</p>
</blockquote>
<p>è¿™ä¸ªç±»çš„ä½œç”¨ä¹Ÿå¾ˆç®€å•ï¼šç¡®ä¿åªæœ‰å‘ç”Ÿå¼‚æ­¥è°ƒç”¨çš„æ—¶å€™æ‰ä¼šæŒ‚èµ·ã€‚
æ¯”å¦‚ä¸‹é¢çš„å‡½æ•°å°±ä¸ä¼šæŒ‚èµ·</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">notSuspend</span><span class="hljs-params">()</span></span> = suspendCoroutine&lt;<span class="hljs-built_in">Int</span>&gt; { continuation -&gt; continuation.resumeWith(Result.success(<span class="hljs-number">0</span>)) }
</code></pre>
<p>è€Œå¼‚æ­¥è°ƒç”¨æ˜¯å¦å‘ç”Ÿå–å†³äº resume å‡½æ•°ä¸å¯¹åº”çš„æŒ‚èµ·å‡½æ•°çš„è°ƒç”¨æ˜¯å¦åœ¨ç›¸åŒçš„è°ƒç”¨æ ˆä¸Šã€‚</p>
<h2 data-id="heading-2">CPS å˜æ¢</h2>
<p>CPSï¼ˆContinuation-Passing Styleï¼Œç»­å»¶ä¼ é€’é£æ ¼ï¼‰æ˜¯ä¸€ç§ç¼–ç¨‹é£æ ¼ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šå‡½æ•°ä¸ç›´æ¥è¿”å›ç»“æœï¼Œè€Œæ˜¯æ¥æ”¶ä¸€ä¸ªé¢å¤–çš„å‚æ•°ï¼Œå³â€œç»­å»¶â€ï¼ˆContinuationï¼‰ï¼Œå¹¶å°†ç»“æœä¼ é€’ç»™è¿™ä¸ªç»­å»¶ã€‚
ç®€å•æ¥è¯´ï¼Œç»­å»¶æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä»£è¡¨äº†ä¸€ä¸ªè®¡ç®—çš„â€œæœªæ¥â€æˆ–â€œå‰©ä½™éƒ¨åˆ†â€ã€‚å®ƒæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼ˆå³å½“å‰è®¡ç®—çš„ç»“æœï¼‰ï¼Œå¹¶åˆ©ç”¨è¿™ä¸ªå‚æ•°æ¥å®Œæˆåç»­æ‰€æœ‰çš„è®¡ç®—ã€‚
ä¸¾ä¸ªä¾‹å­</p>
<p><strong>ç›´æ¥é£æ ¼</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">result = add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)
print(result)
</code></pre>
<p><strong>ç»­å»¶é£æ ¼</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin">add_cps(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, lambda result: print(result))
</code></pre>
<p>åœ¨ kotlin é‡Œé¢ï¼ŒCPS å˜æ¢æ˜¯é€šè¿‡ä¼ é€’ Continuation å®ä¾‹æ¥æ§åˆ¶å¼‚æ­¥è°ƒç”¨æµç¨‹çš„ã€‚Kotlin åç¨‹æŒ‚èµ·çš„æ—¶å€™ï¼Œå°±æ˜¯å°†æŒ‚èµ·ç‚¹çš„ä¿¡æ¯ä¿å­˜åœ¨äº† Continuation å¯¹è±¡ä¸­ï¼Œå®ƒæºå¸¦äº†åç¨‹ç»§ç»­æ‰§è¡Œæ—¶æ‰€éœ€è¦çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œåœ¨æ¢å¤æ‰§è¡Œæ—¶ï¼Œåªéœ€è¦æ‰§è¡Œå®ƒçš„æ¢å¤å³å¯ã€‚</p>
<h2 data-id="heading-3">åç¨‹ä¸Šä¸‹æ–‡</h2>
<p>ä¸Šä¸‹æ–‡åœ¨å¾ˆå¤šåœ°æ–¹éƒ½æœ‰å®ƒçš„èº«å½±ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œæ¯”å¦‚ Android ä¸­çš„ä¸Šä¸‹æ–‡ï¼ŒSpring ä¸­çš„ä¸Šä¸‹æ–‡ï¼ŒHarmonyOS ä¸­çš„ä¸Šä¸‹æ–‡ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸Šä¸‹æ–‡æ‰¿è½½äº†èµ„æºç®¡ç†ã€è·å–é…ç½®ç­‰åŠŸèƒ½ã€‚
é‚£ä¹ˆåç¨‹çš„ä¸Šä¸‹æ–‡ä¹Ÿæ˜¯è¿™æ ·ï¼Œåªä¸è¿‡ç›¸æ¯”äºå…¶ä»–çš„ä¸Šä¸‹æ–‡ï¼Œåç¨‹ä¸Šä¸‹æ–‡æœ‰æ›´æ˜¾è‘—çš„æ•°æ®ç»“æ„ç‰¹å¾ã€‚
æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ“ä½œç¬¦<code>+</code>æ¥å¯¹ä¸åŒç±»å‹çš„åç¨‹ä¸Šä¸‹æ–‡è¿›è¡Œç»„è£…ï¼Œ</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">var</span> coroutineContext: CoroutineContext = EmptyCoroutineContext
coroutineContext += CoroutineName(<span class="hljs-string">"huangyuan-01"</span>)
coroutineContext += CoroutineName(<span class="hljs-string">"huangyuan-02"</span>)
coroutineContext += CoroutineExceptionHandler { context, ex -&gt; println(<span class="hljs-string">"CoroutineExceptionHandler got <span class="hljs-variable">$ex</span>"</span>) }
<span class="hljs-keyword">suspend</span> {
    println(<span class="hljs-string">"In Coroutine [<span class="hljs-subst">${coroutineContext[CoroutineName]}</span> ]."</span>)
    println(<span class="hljs-string">"In Coroutine [<span class="hljs-subst">${coroutineContext[CoroutineExceptionHandler]}</span> ]."</span>)
    <span class="hljs-number">5</span>
}.startCoroutine(<span class="hljs-keyword">object</span> : Continuation&lt;<span class="hljs-built_in">Int</span>&gt; {
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> context = coroutineContext

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">resumeWith</span><span class="hljs-params">(result: <span class="hljs-type">Result</span>&lt;<span class="hljs-type">Int</span>&gt;)</span></span> {
        result.onFailure {
            context[CoroutineExceptionHandler]?.handleException(context, it)
        }.onSuccess {
            println(<span class="hljs-string">"Coroutine [<span class="hljs-subst">${coroutineContext[CoroutineName]}</span>] completed success"</span>)
            println(<span class="hljs-string">"Coroutine [<span class="hljs-subst">${coroutineContext[CoroutineExceptionHandler]}</span>] completed success"</span>)
        }
    }
})
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰“å°çš„æ—¥å¿—</p>
<blockquote>
<p>In Coroutine [CoroutineName(huangyuan-02) ].<br/>
In Coroutine [coroutines.MainKt<span class="math math-inline"><span class="katex-error" title="ParseError: KaTeX parse error: Can't use function '$' in math mode at position 5: main$Ì²$inlined" style="color:#cc0000">main$$inlined</span></span>CoroutineExceptionHandler$1@4f933fd1 ].<br/>
Coroutine [CoroutineName(huangyuan-02)] completed success<br/>
Coroutine [coroutines.MainKt<span class="math math-inline"><span class="katex-error" title="ParseError: KaTeX parse error: Can't use function '$' in math mode at position 5: main$Ì²$inlined" style="color:#cc0000">main$$inlined</span></span>CoroutineExceptionHandler$1@4f933fd1] completed success</p>
</blockquote>
<h3 data-id="heading-4">åˆå¹¶è§„åˆ™</h3>
<ul>
<li>éäº¤æ¢æ€§ï¼šctx1 + ctx2 â‰  ctx2 + ctx1ï¼ˆé¡ºåºå¾ˆé‡è¦ï¼‰</li>
<li>ç»“åˆæ€§ï¼š(ctx1 + ctx2) + ctx3 = ctx1 + (ctx2 + ctx3)</li>
<li>é”®å”¯ä¸€æ€§ï¼šç›¸åŒ Key çš„å…ƒç´ ä¼šè¢«è¦†ç›–</li>
</ul>
<p>æ³¨æ„ï¼Œè¿™é‡Œçš„ Key å®šä¹‰æ˜¯</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Key</span>&lt;<span class="hljs-type">E : Element</span>&gt;
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Element</span> : <span class="hljs-type">CoroutineContext</span> {
  <span class="hljs-keyword">public</span> <span class="hljs-keyword">val</span> key: Key&lt;*&gt;
}
</code></pre>
<h3 data-id="heading-5">CombinedContext</h3>
<p>æ³¨æ„è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„ç±»,åé¢é‡å†™æ“ä½œç¬¦çš„æ—¶å€™ä¼šç”¨åˆ°</p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CombinedContext</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> left: CoroutineContext,
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> element: Element
) : CoroutineContext, Serializable {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;E : Element&gt;</span> <span class="hljs-title">get</span><span class="hljs-params">(key: <span class="hljs-type">Key</span>&lt;<span class="hljs-type">E</span>&gt;)</span></span>: E? {
      <span class="hljs-keyword">var</span> cur = <span class="hljs-keyword">this</span>
      <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
          cur.element[key]?.let { <span class="hljs-keyword">return</span> it }
          <span class="hljs-keyword">val</span> next = cur.left
          <span class="hljs-keyword">if</span> (next <span class="hljs-keyword">is</span> CombinedContext) {
              cur = next
          } <span class="hljs-keyword">else</span> {
              <span class="hljs-keyword">return</span> next[key]
          }
      }
  }
}
</code></pre>
<h3 data-id="heading-6">ç¤ºä¾‹</h3>
<p><strong>è§„åˆ™ 1ï¼šç›¸åŒ Key çš„å…ƒç´ ï¼Œå³è¾¹çš„è¦†ç›–å·¦è¾¹çš„</strong></p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">val</span> context1 = Job() + CoroutineName(<span class="hljs-string">"First"</span>)
<span class="hljs-keyword">val</span> context2 = CoroutineName(<span class="hljs-string">"Second"</span>) + Dispatchers.IO

<span class="hljs-keyword">val</span> result = context1 + context2
<span class="hljs-comment">// ç»“æœåŒ…å«ï¼šJobï¼ˆæ¥è‡ªcontext1ï¼‰, Dispatchers.IOï¼ˆæ¥è‡ªcontext2ï¼‰, CoroutineName("Second")ï¼ˆæ¥è‡ªcontext2ï¼Œè¦†ç›–äº†context1çš„ï¼‰</span>
</code></pre>
<p><strong>è§„åˆ™ 2ï¼šEmptyCoroutineContext æ˜¯ä¸­æ€§å…ƒç´ </strong></p>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">val</span> context = Dispatchers.IO + CoroutineName(<span class="hljs-string">"Test"</span>)
<span class="hljs-keyword">val</span> result1 = context + EmptyCoroutineContext  <span class="hljs-comment">// ç­‰äº context</span>
<span class="hljs-keyword">val</span> result2 = EmptyCoroutineContext + context  <span class="hljs-comment">// ç­‰äº context</span>
</code></pre>
<p><strong>è§„åˆ™ 3ï¼šç»„åˆæ˜¯é€šè¿‡é“¾è¡¨å®ç°çš„</strong>
ä¸Šä¸‹æ–‡ç»„åˆå®é™…ä¸Šå½¢æˆäº†ä¸€ä¸ªé“¾è¡¨ç»“æ„ï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«è‡ªå·±çš„å…ƒç´ å¹¶æŒ‡å‘ä¸‹ä¸€ä¸ªä¸Šä¸‹æ–‡ã€‚</p>
<h3 data-id="heading-7">æºç åˆ†æ</h3>
<pre><code class="hljs language-Kotlin" lang="Kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">operator</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">plus</span><span class="hljs-params">(context: <span class="hljs-type">CoroutineContext</span>)</span></span>: CoroutineContext =
    <span class="hljs-keyword">if</span> (context === EmptyCoroutineContext) <span class="hljs-keyword">this</span> <span class="hljs-keyword">else</span> <span class="hljs-comment">// fast path -- avoid lambda creation</span>
        context.fold(<span class="hljs-keyword">this</span>) { acc, element -&gt;
            <span class="hljs-keyword">val</span> removed = acc.minusKey(element.key)
            <span class="hljs-keyword">if</span> (removed === EmptyCoroutineContext) element <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// make sure interceptor is always last in the context (and thus is fast to get when present)</span>
                <span class="hljs-keyword">val</span> interceptor = removed[ContinuationInterceptor]
                <span class="hljs-keyword">if</span> (interceptor == <span class="hljs-literal">null</span>) CombinedContext(removed, element) <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">val</span> left = removed.minusKey(ContinuationInterceptor)
                    <span class="hljs-keyword">if</span> (left === EmptyCoroutineContext) CombinedContext(element, interceptor) <span class="hljs-keyword">else</span>
                        CombinedContext(CombinedContext(left, element), interceptor)
                }
            }
        }
</code></pre>
<p>è¿™ä¹ˆçœ‹æºç å°±æ¯”è¾ƒç®€å•äº†ï¼Œ
ç¬¬ä¸€æ­¥ï¼šå¿«é€Ÿè·¯å¾„ä¼˜åŒ–ï¼šå¦‚æœåˆå¹¶çš„ä¸Šä¸‹æ–‡æ˜¯ç©ºçš„ï¼Œç›´æ¥è¿”å›å½“å‰ä¸Šä¸‹æ–‡ï¼Œé¿å…åˆ›å»º lambda å’Œæ‰§è¡Œ fold æ“ä½œã€‚
ç¬¬äºŒæ­¥ï¼šè¿™é‡Œä½¿ç”¨äº† fold æ“ä½œï¼š
åˆå§‹å€¼ï¼šthisï¼ˆå½“å‰ä¸Šä¸‹æ–‡ï¼‰
éå†ï¼šcontext ä¸­çš„æ¯ä¸ª element
æ“ä½œï¼šå¯¹äºæ¯ä¸ªå…ƒç´ ï¼Œä»ç´¯ç§¯å€¼ acc ä¸­ç§»é™¤ç›¸åŒ Key çš„å…ƒç´ ï¼Œç„¶åå¤„ç†åˆå¹¶
ç¬¬ä¸‰æ­¥ï¼šå¼ºåˆ¶å°†æ‹¦æˆªå™¨æ”¾åœ¨å°¾éƒ¨ï¼Œå› ä¸ºåœ¨åç¨‹æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œè·å–è°ƒåº¦å™¨ï¼ˆContinuationInterceptorï¼‰æ˜¯ä¸€ä¸ªéå¸¸é¢‘ç¹çš„æ“ä½œã€‚æ¯æ¬¡åç¨‹æ¢å¤æ‰§è¡Œæ—¶éƒ½éœ€è¦æ£€æŸ¥å½“å‰çš„è°ƒåº¦å™¨,ç°åœ¨é€šè¿‡å¼ºåˆ¶è®©æ‹¦æˆªå™¨ä½äºé“¾å°¾ï¼Œä½¿å¾—æŸ¥æ‰¾å¯ä»¥åœ¨ O(1) æ—¶é—´å†…å®Œæˆã€‚</p>
<p>è¿™æ ·æˆ‘ä»¬å°±äº†è§£äº†<code>CoroutineContext.plus</code>è¿™ä¸ª Kotlin åç¨‹ä¸Šä¸‹æ–‡ç³»ç»Ÿçš„æ ¸å¿ƒå‡½æ•°ï¼Œç†è§£è¿™ä¸ªæ–¹æ³•çš„å·¥ä½œåŸç†å¯¹äºç¼–å†™é«˜æ•ˆã€å¯ç»´æŠ¤çš„åç¨‹ä»£ç è‡³å…³é‡è¦ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦ç²¾ç»†æ§åˆ¶åç¨‹æ‰§è¡Œç¯å¢ƒçš„åœºæ™¯ä¸­ã€‚</p>
<hr/>
<p>ä»¥ä¸Š</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[kotlinåç¨‹-å®˜æ–¹æ¡†æ¶]]></title>    <link>https://juejin.cn/post/7589893170387566592</link>    <guid>https://juejin.cn/post/7589893170387566592</guid>    <pubDate>2026-01-01T03:07:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589893170387566592" data-draft-id="7589870367764201512" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="kotlinåç¨‹-å®˜æ–¹æ¡†æ¶"/> <meta itemprop="keywords" content="Kotlin"/> <meta itemprop="datePublished" content="2026-01-01T03:07:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Huangå…„"/> <meta itemprop="url" content="https://juejin.cn/user/52404619842712"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            kotlinåç¨‹-å®˜æ–¹æ¡†æ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/52404619842712/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Huangå…„
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T03:07:29.000Z" title="Thu Jan 01 2026 03:07:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>ç§ä¸€é¢—æ ‘çš„æœ€å¥½æ—¶æœºæ˜¯åå¹´å‰ï¼Œå…¶æ¬¡æ˜¯ç°åœ¨ã€‚
å­¦ä¹ ä¹Ÿä¸€æ ·ã€‚
è·Ÿç€éœè€å¸ˆçš„ã€Šæ·±å…¥ç†è§£ Kotlin æºç¨‹ã€‹å­¦ä¹ ä¸€ä¸‹åç¨‹ã€‚</p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>æŒ‰ç…§ä¹¦ä¸­çš„é¡ºåºå­¦ä¹ æ„Ÿè§‰ä¸æ˜¯å¾ˆæµç¨‹ï¼Œçœ‹åˆ°ç¬¬äº”ç« è§‰å¾—è¿™ä¸ªé¡ºåºä¸å¤ªé€‚åˆè‡ªå·±ï¼Œ
å› æ­¤å­¦ä¹ çš„é¡ºåºé¢ å€’ä¸€ä¸‹ï¼Œå…ˆçœ‹ç¬¬å…­ç« ã€ŠKotlinåç¨‹çš„å®˜æ”¾æ¡†æ¶ã€‹ï¼Œç„¶åæ˜¯ç¬¬ä¸ƒç« ã€ŠKotlinåç¨‹åœ¨Androidä¸Šçš„åº”ç”¨ã€‹ï¼Œæœ€ååœ¨å­¦ä¹ ç¬¬äº”ç« ã€ŠKotlinåç¨‹æ¡†æ¶å¼€å‘åˆæ¢ã€‹</p>
<h2 data-id="heading-1">åç¨‹æ¡†æ¶æ¦‚è¿°</h2>
<h3 data-id="heading-2">æ„æˆ</h3>
<p>Kotlinåç¨‹çš„å®˜æ–¹æ¡†æ¶kotlinx.coroutinesæ˜¯ä¸€å¥—ç‹¬ç«‹äºæ ‡å‡†åº“ä¹‹å¤–çš„ä»¥ç”Ÿäº§ä¸ºç›®çš„çš„æ¡†æ¶ï¼Œæä¾›äº†ä¸°å¯Œçš„APIæ¥æ”¯æ’‘ç”Ÿäº§ç¯å¢ƒä¸­ä¸€æ­¥ç¨‹åºçš„è®¾è®¡å’Œå®ç°ï¼Œä¸»è¦ç”±ä»¥ä¸‹å‡ éƒ¨åˆ†æ„æˆ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72b544a02f1a40f9a87d09bcafdbec4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSHVhbmflhYQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767841648&amp;x-signature=8tKhdHRpqCcepLeWcL4lFW0phkA%3D" alt="å®˜æ–¹åç¨‹æ¡†æ¶çš„ç»“æ„.png" loading="lazy"/></p>
<ul>
<li>core:æ¡†æ¶çš„æ ¸å¿ƒé€»è¾‘ï¼ŒåŒ…æ‹¬åˆ›å»ºã€è°ƒåº¦ã€å–æ¶ˆã€channelã€flowç­‰</li>
<li>ui:åŒ…æ‹¬Androidï¼Œjavafx,swingä¸‰ä¸ªåº“ï¼Œç”¨äºæä¾›å„å¹³å°çš„UIè°ƒåº¦å™¨å’Œä¸€äº›ç‰¹æ®Šçš„é€»è¾‘</li>
<li>reactiveç›¸å…³ï¼šæä¾›å¯¹å„ç§å“åº”å¼ç¼–ç¨‹æ¡†æ¶çš„æ”¯æŒï¼Œ
<ul>
<li>reactive</li>
<li>reactor</li>
<li>rx2</li>
</ul>
</li>
<li>integrationï¼šæä¾›ä¸å…¶ä»–æ¡†æ¶çš„å¼‚æ­¥å›è°ƒé›†æˆ
<ul>
<li>jdk8</li>
<li>guava</li>
<li>slf4j</li>
<li>play-services</li>
</ul>
</li>
</ul>
<h3 data-id="heading-3">å¯åŠ¨æ¨¡å¼</h3>
<p>å¯åŠ¨æ¨¡å¼æ€»å…±å››ç§ï¼Œ</p>
<ul>
<li>DEFAULT
<ul>
<li>ä¼šç«‹å³æ ¹æ®ä¸Šä¸‹æ–‡è°ƒåº¦åç¨‹æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯ç«‹å³å¼€å§‹è°ƒåº¦ï¼Œå†è°ƒåº¦å‰å¦‚æœæºç¨‹è¢«å–æ¶ˆï¼Œå…¶å°†ç›´æ¥è¿›å…¥å–æ¶ˆå“åº”çŠ¶æ€</li>
</ul>
</li>
<li>LAZY
<ul>
<li>åªæœ‰æºç¨‹è¢«éœ€è¦æ—¶ï¼ŒåŒ…æ‹¬ä¸»åŠ¨è°ƒç”¨åç¨‹çš„startã€joinæˆ–è€…awaitç™»å‡½æ•°æ—¶çŒœä¼šå¼€å§‹è°ƒç”¨åº¦ï¼Œå¦‚æœè°ƒåº¦å‰å°±åˆ«å–æ¶ˆï¼Œé‚£ä¹ˆåç¨‹å°†ç›´æ¥è¿›å…¥å¼‚å¸¸ç»“æŸçŠ¶æ€</li>
</ul>
</li>
<li>ATOMIC
<ul>
<li>åç¨‹åˆ›å»ºåï¼Œç«‹å³å¼€å§‹è°ƒåº¦ï¼Œåç¨‹æ‰§è¡Œåˆ°ç¬¬ä¸€ä¸ªæŒ‚èµ·ç‚¹ä¹‹å‰ä¸å“åº”å–æ¶ˆ</li>
</ul>
</li>
<li>UNDISPATCHED
<ul>
<li>åç¨‹åˆ›å»ºåç«‹å³åœ¨å½“å‰å‡½æ•°è°ƒç”¨æ ˆä¸­æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ç¬¬ä¸€ä¸ªçœŸæ­£çš„æŒ‚èµ·ç‚¹</li>
</ul>
</li>
</ul>
<p>é¦–å…ˆè¦å¼„æ¸…æ¥šç«‹å³è°ƒåº¦å’Œç«‹å³æ‰§è¡Œçš„åŒºåˆ«ã€‚ç«‹å³è°ƒåº¦è¡¨ç¤ºåç¨‹çš„è°ƒåº¦å™¨ä¼šç«‹å³æ¥æ”¶åˆ°è°ƒåº¦æŒ‡ä»¤ï¼Œä½†å…·ä½“æ‰§è¡Œçš„æ—¶æœºä»¥åŠåœ¨å“ªä¸ªçº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œè¿˜éœ€è¦æ ¹æ®è°ƒåº¦å™¨çš„å…·ä½“æƒ…å†µè€Œå®šï¼Œä¹Ÿå°±æ˜¯è°ç«‹å³è°ƒç”¨åˆ°ç«‹å³æ‰§è¡Œä¹‹é—´é€šå¸¸ä¼šæœ‰ä¸€æ®µæ—¶é—´ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸‹ç»“è®º</p>
<ul>
<li>DEFAULTè™½ç„¶æ˜¯ç«‹å³è°ƒåº¦ï¼Œä½†ä¹Ÿæœ‰å¯èƒ½åœ¨æ‰§è¡Œå‰è¢«å–æ¶ˆ</li>
<li>UNDISPATCHEDæ˜¯ç«‹å³æ‰§è¡Œï¼Œå› æ­¤åç¨‹ä¸€å®šä¼šæ‰§è¡Œ</li>
<li>ATOMICè™½ç„¶æ˜¯ç«‹å³è°ƒåº¦ï¼Œä½†å…¶è°ƒåº¦å’Œæ‰§è¡Œä¸¤ä¸ªæ­¥éª¤åˆæˆäº†ä¸€ä¸ªï¼Œä¿è¯è°ƒåº¦å’Œæ‰§è¡Œæ˜¯åŸå­æ“ä½œï¼Œå› æ­¤åç¨‹ä¹Ÿä¸€å®šä¼šæ‰§è¡Œ</li>
<li>UNDISPATCHEDå’ŒATOMICè™½ç„¶éƒ½ä¼šä¿è¯åç¨‹ä¸€å®šæ‰§è¡Œï¼Œä½†åœ¨ç¬¬ä¸€ä¸ªæŒ‚èµ·ç‚¹ä¹‹å‰å‰è€…è¿è¡Œåœ¨åç¨‹åˆ›å»ºæ—¶æ‰€åœ¨çš„çº¿ç¨‹ï¼Œåè€…åˆ™ä¼šè°ƒåº¦åˆ°åˆ¶å®šçš„è°ƒåº¦å™¨æ‰€åœ¨çš„çº¿ç¨‹ä¸Šæ‰§è¡Œ</li>
</ul>
<h3 data-id="heading-4">è°ƒåº¦å™¨</h3>
<p>å®˜æ–¹é¢„ç½®äº†4ä¸ªè°ƒåº¦å™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Dispatcherså¯¹è±¡è®¿é—®ä»–ä»¬ã€‚</p>
<ul>
<li>Defaultï¼šé»˜è®¤è°ƒåº¦å™¨ï¼Œé€‚åˆå¤„ç†åå°è®¡ç®—ï¼Œå…¶æ˜¯ä¸€ä¸ªCPUå¯†é›†å‹ä»»åŠ¡è°ƒåº¦å™¨ã€‚</li>
<li>IOï¼šIOè°ƒåº¦å™¨ï¼Œé€‚åˆæ‰§è¡ŒIOç›¸å…³æ“ä½œï¼Œå…¶æ˜¯ä¸€ä¸ªIOå¯†é›†å‹ä»»åŠ¡è°ƒåº¦å™¨ã€‚</li>
<li>Mainï¼šUIè°ƒåº¦å™¨ï¼Œæ ¹æ®å¹³å°çš„ä¸åŒä¼šè¢«åˆå§‹åŒ–ä¸ºå¯¹åº”çš„UIçº¿ç¨‹çš„è°ƒåº¦å™¨ã€‚</li>
<li>Unconfinedï¼šâ€œæ— æ‰€è°“â€è°ƒåº¦å™¨ï¼Œä¸è¦æ±‚åç¨‹æ‰§è¡Œåœ¨ç‰¹å®šçº¿ç¨‹ä¸Šã€‚</li>
</ul>
<h3 data-id="heading-5">åç¨‹çš„å–æ¶ˆæ£€æŸ¥</h3>
<p>æˆ‘ä»¬å·²ç»çŸ¥é“æŒ‚èµ·å‡½æ•°å¯ä»¥é€šè¿‡suspendCancellableCoroutineæ¥ç›¸åº”æ‰€åœ¨çº¿ç¨‹çš„å–æ¶ˆçŠ¶æ€ï¼Œæˆ‘ä»¬åœ¨è®¾è®¡å¼‚æ­¥ä»»åŠ¡æ—¶ï¼Œå¼‚æ­¥ä»»åŠ¡çš„å–æ¶ˆå“åº”ç‚¹å¯èƒ½å°±åœ¨è¿™äº›æŒ‚èµ·ç‚¹å¤„ã€‚ä½†å¦‚æœæ²¡æœ‰æŒ‚èµ·ç‚¹å‘¢ï¼Ÿæ¯”å¦‚æ ‡å‡†åº“ä¸­æä¾›çš„æ‰©å±•å‡½æ•° InputStream.copyTo,ä½¿ç”¨Java BIOæ¥å®Œæˆã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> InputStream.<span class="hljs-title">copyTo</span><span class="hljs-params">(<span class="hljs-keyword">out</span>: <span class="hljs-type">OutputStream</span>, bufferSize: <span class="hljs-type">Int</span> = DEFAULT_BUFFER_SIZE)</span></span>: <span class="hljs-built_in">Long</span> {
    <span class="hljs-keyword">var</span> bytesCopied: <span class="hljs-built_in">Long</span> = <span class="hljs-number">0</span>
    <span class="hljs-keyword">val</span> buffer = ByteArray(bufferSize)
    <span class="hljs-keyword">var</span> bytes = read(buffer)
    <span class="hljs-keyword">while</span> (bytes &gt;= <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">out</span>.write(buffer, <span class="hljs-number">0</span>, bytes) 
        bytesCopied += bytes
        bytes = read(buffer)
    }
    <span class="hljs-keyword">return</span> bytesCopied
}
</code></pre>
<p>å°†è¿™æ®µç¨‹åºæ”¾å…¥åç¨‹ä¸­ä¹‹åï¼Œå°±ä¼šå‘ç°åç¨‹çš„å–æ¶ˆçŠ¶æ€å¯¹å®ƒæ²¡æœ‰ä»»ä½•å½±å“ã€‚æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„æ˜¯åœ¨whileå¾ªç¯ä¸­æ·»åŠ ä¸€ä¸ªå¯¹æ‰€åœ¨åç¨‹çš„isActiveçš„åˆ¤æ–­ã€‚ä½†å®é™…ä¸Šå®˜æ–¹åç¨‹æ¡†æ¶è¿˜æä¾›äº†yieldå‡½æ•°</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> InputStream.<span class="hljs-title">copyTo</span><span class="hljs-params">(<span class="hljs-keyword">out</span>: <span class="hljs-type">OutputStream</span>, bufferSize: <span class="hljs-type">Int</span> = DEFAULT_BUFFER_SIZE)</span></span>: <span class="hljs-built_in">Long</span> {
    ...
    <span class="hljs-keyword">while</span> (bytes &gt;= <span class="hljs-number">0</span>) {
        yield()
    ...
    }
    <span class="hljs-keyword">return</span> bytesCopied
}
</code></pre>
<p>yieldå‡½æ•°çš„ä½œç”¨ä¸»è¦æ˜¯æ£€æŸ¥æ‰€åœ¨çº¿ç¨‹çš„çŠ¶æ€ï¼Œå¦‚æœå·²ç»å–æ¶ˆï¼Œåˆ™æŠ›å‡ºå–æ¶ˆå¼‚å¸¸äºˆä»¥å“åº”ã€‚æ­¤å¤–å®ƒè¿˜ä¼šå°è¯•è®©å‡ºçº¿ç¨‹çš„æ‰§è¡Œæƒï¼Œç»™å…¶ä»–åç¨‹æä¾›æ‰§è¡Œçš„æœºä¼šã€‚</p>
<h3 data-id="heading-6">åç¨‹çš„è¶…æ—¶å–æ¶ˆ</h3>
<p>åœ¨ç½‘ç»œè¯·æ±‚ä¸­ï¼Œ æˆ‘ä»¬å¯èƒ½ä¼šæœ‰ä¸€äº›ç‰¹å®šçš„æ¥å£éœ€è¦åœ¨çŸ­æ—¶é—´å†…æ²¡æœ‰å“åº”å°±è¦å–æ¶ˆï¼Œè¿™ä¸ªæ—¶é—´æ¯”æˆ‘ä»¬é€šç”¨é…ç½®çš„æ—¶é—´è¦çŸ­ï¼Œè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨withTimeoutæ¥å®ç°</p>
<pre><code class="hljs language-kotlin" lang="kotlin">GlobalScope.launch {
    <span class="hljs-keyword">val</span> user = withTimeout(<span class="hljs-number">1000</span>){
        ....
    }
}
</code></pre>
<p>å¦‚æœwithTimeoutçš„ç¬¬äºŒä¸ªå‚æ•°blockè¿è¡Œè¶…æ—¶ï¼Œé‚£ä¹ˆå°±ä¼šè¢«å–æ¶ˆï¼Œå–æ¶ˆåwithTimeoutç›´æ¥æŠ›å‡ºå–æ¶ˆå¼‚å¸¸ã€‚å¦‚æœä¸å¸Œæœ›æŠ›å‡ºå¼‚å¸¸ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨withTimeoutOrNull,å®ƒçš„æ•ˆæœæ˜¯åœ¨è¶…æ—¶çš„æƒ…å†µä¸‹è¿”å›nullã€‚</p>
<hr/>
<p>ä»¥ä¸Š</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¨³å®šæ€§æ€§èƒ½ç³»åˆ—ä¹‹å…­â€”â€”Javaå¼‚å¸¸ä¸JEåˆ†æå®æˆ˜]]></title>    <link>https://juejin.cn/post/7589893170387550208</link>    <guid>https://juejin.cn/post/7589893170387550208</guid>    <pubDate>2026-01-01T03:05:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589893170387550208" data-draft-id="7589930672832626723" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¨³å®šæ€§æ€§èƒ½ç³»åˆ—ä¹‹å…­â€”â€”Javaå¼‚å¸¸ä¸JEåˆ†æå®æˆ˜"/> <meta itemprop="keywords" content="Android,æ€§èƒ½ä¼˜åŒ–,Debug"/> <meta itemprop="datePublished" content="2026-01-01T03:05:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¨³å®šæ€§æ€§èƒ½ç³»åˆ—ä¹‹å…­â€”â€”Javaå¼‚å¸¸ä¸JEåˆ†æå®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T03:05:06.000Z" title="Thu Jan 01 2026 03:05:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Javaå¼‚å¸¸ä¸JEåˆ†æå®æˆ˜</h2>
<blockquote>
<p>Javaå¼‚å¸¸è™½ç„¶æ¯”Native Crashæ›´å®¹æ˜“åˆ†æ,ä½†è¦åšåˆ°å¿«é€Ÿå®šä½ã€é«˜æ•ˆè§£å†³,ä»éœ€è¦æŒæ¡ç³»ç»ŸåŒ–çš„æ–¹æ³•å’Œå·¥å…·é“¾ã€‚</p>
</blockquote>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨Androidåº”ç”¨å¼€å‘ä¸­,Javaå¼‚å¸¸æ˜¯æœ€å¸¸è§çš„ç¨³å®šæ€§é—®é¢˜ä¹‹ä¸€ã€‚è™½ç„¶Javaå¼‚å¸¸æä¾›äº†å®Œæ•´çš„å †æ ˆä¿¡æ¯,ä½†åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­,é¢å¯¹æµ·é‡æ—¥å¿—å’Œå¤æ‚çš„è°ƒç”¨é“¾,å¿«é€Ÿå®šä½é—®é¢˜æ ¹å› ä»ç„¶å…·æœ‰æŒ‘æˆ˜æ€§ã€‚</p>
<p>ä»¥ä¸€æ¬¡çº¿ä¸Šé—®é¢˜ä¸ºä¾‹:ç›‘æ§å¹³å°æ˜¾ç¤ºCrashç‡çªç„¶ä¸Šå‡,å¼‚å¸¸ä¿¡æ¯ä¸º<code>NullPointerException at CarPropertyManager.getProperty()</code>ã€‚è¯¥é—®é¢˜ä»…åœ¨ç‰¹å®šè½¦å‹ä¸Šå‡ºç°,æœ¬åœ°ç¯å¢ƒæ— æ³•å¤ç°ã€‚é€šè¿‡DropBoxæ—¥å¿—åˆ†æã€æºç è¿½è¸ªå’Œè¿œç¨‹è°ƒè¯•,æœ€ç»ˆå®šä½ä¸ºé…ç½®æ–‡ä»¶ç¼ºå¤±å¯¼è‡´çš„ç©ºæŒ‡é’ˆé—®é¢˜ã€‚</p>
<p>è¿™ä¸ªæ¡ˆä¾‹è¯´æ˜:<strong>Javaå¼‚å¸¸è™½ç„¶æœ‰å®Œæ•´çš„å †æ ˆä¿¡æ¯,ä½†å¦‚æœç¼ºä¹ç³»ç»ŸåŒ–çš„åˆ†ææ–¹æ³•å’Œå·¥å…·é“¾,ä¾ç„¶ä¼šåœ¨æµ·é‡æ—¥å¿—ä¸­è¿·å¤±æ–¹å‘ã€‚</strong></p>
<p>æœ¬æ–‡å°†æ·±å…¥ä»‹ç»Javaå¼‚å¸¸çš„åˆ†æå®æˆ˜,ä»å¼‚å¸¸æœºåˆ¶åˆ°æ—¥å¿—åˆ†æ,ä»å·¥å…·ä½¿ç”¨åˆ°çœŸå®æ¡ˆä¾‹,å»ºç«‹å®Œæ•´çš„Javaå±‚é—®é¢˜æ’æŸ¥æ–¹æ³•è®ºã€‚è¯»å®Œæœ¬æ–‡,ä½ å°†èƒ½å¤Ÿ:</p>
<ol>
<li>ç†è§£Javaå¼‚å¸¸ä½“ç³»å’ŒAndroidå¼‚å¸¸å¤„ç†æœºåˆ¶</li>
<li>æŒæ¡JE (Java Exception) æ—¥å¿—çš„ç»“æ„å’Œåˆ†ææ–¹æ³•</li>
<li>ç†Ÿç»ƒä½¿ç”¨Logcatè¿›è¡Œå®æ—¶å¼‚å¸¸ç›‘æ§</li>
<li>å­¦ä¼šä½¿ç”¨DropBoxæå–å’Œåˆ†æå†å²å¼‚å¸¸</li>
<li>æŒæ¡MATå·¥å…·åˆ†æå†…å­˜ç›¸å…³å¼‚å¸¸</li>
<li>å»ºç«‹ç³»ç»ŸåŒ–çš„Javaå¼‚å¸¸æ’æŸ¥æµç¨‹</li>
</ol>
<hr/>
<h3 data-id="heading-2">ä¸€ã€Javaå¼‚å¸¸æœºåˆ¶åŸºç¡€</h3>
<p>åœ¨æ·±å…¥å·¥å…·å®æˆ˜ä¹‹å‰,è®©æˆ‘ä»¬å…ˆå»ºç«‹å¯¹Javaå¼‚å¸¸çš„å®Œæ•´è®¤çŸ¥ã€‚</p>
<h4 data-id="heading-3">1.1 Javaå¼‚å¸¸ä½“ç³»</h4>
<p>Javaçš„å¼‚å¸¸ä½“ç³»æ˜¯ä¸€ä¸ªç²¾å¿ƒè®¾è®¡çš„å±‚æ¬¡ç»“æ„,æ‰€æœ‰å¼‚å¸¸ç±»éƒ½ç»§æ‰¿è‡ª<code>Throwable</code>:</p>
<pre><code class="hljs language-java" lang="java">Throwable
â”œâ”€â”€ Error (ä¸¥é‡é”™è¯¯,ç¨‹åºæ— æ³•å¤„ç†)
â”‚   â”œâ”€â”€ OutOfMemoryError (OOM)
â”‚   â”œâ”€â”€ StackOverflowError (æ ˆæº¢å‡º)
â”‚   â”œâ”€â”€ VirtualMachineError
â”‚   â””â”€â”€ ...
â””â”€â”€ Exception (å¯å¤„ç†çš„å¼‚å¸¸)
    â”œâ”€â”€ RuntimeException (è¿è¡Œæ—¶å¼‚å¸¸,Unchecked)
    â”‚   â”œâ”€â”€ NullPointerException (ç©ºæŒ‡é’ˆ)
    â”‚   â”œâ”€â”€ IndexOutOfBoundsException (è¶Šç•Œ)
    â”‚   â”œâ”€â”€ ClassCastException (ç±»å‹è½¬æ¢)
    â”‚   â”œâ”€â”€ IllegalArgumentException (éæ³•å‚æ•°)
    â”‚   â””â”€â”€ ...
    â””â”€â”€ Checked <span class="hljs-title function_">Exception</span> <span class="hljs-params">(ç¼–è¯‘æ—¶æ£€æŸ¥)</span>
        â”œâ”€â”€ IOException
        â”œâ”€â”€ SQLException
        â””â”€â”€ ...
</code></pre>
<p><strong>Error vs Exception</strong>:</p>
<ul>
<li><strong>Error</strong>: ç³»ç»Ÿçº§é”™è¯¯,ç¨‹åºæ— æ³•æ¢å¤(å¦‚OOMã€StackOverflowError)</li>
<li><strong>Exception</strong>: åº”ç”¨çº§å¼‚å¸¸,ç¨‹åºå¯ä»¥æ•è·å’Œå¤„ç†</li>
</ul>
<p><strong>Checked vs Unchecked Exception</strong>:</p>






























<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left">Checked Exception</th><th align="left">Unchecked Exception</th></tr></thead><tbody><tr><td align="left">ä»£è¡¨ç±»</td><td align="left">IOException, SQLException</td><td align="left">RuntimeExceptionåŠå…¶å­ç±»</td></tr><tr><td align="left">ç¼–è¯‘æ£€æŸ¥</td><td align="left">å¿…é¡»try-catchæˆ–throws</td><td align="left">ä¸éœ€è¦</td></tr><tr><td align="left">å‘ç”Ÿæ—¶æœº</td><td align="left">å¯é¢„è§çš„å¤–éƒ¨å› ç´ </td><td align="left">ç¼–ç¨‹é”™è¯¯</td></tr><tr><td align="left">ç¤ºä¾‹</td><td align="left">æ–‡ä»¶ä¸å­˜åœ¨ã€ç½‘ç»œä¸­æ–­</td><td align="left">ç©ºæŒ‡é’ˆã€æ•°ç»„è¶Šç•Œ</td></tr></tbody></table>
<h4 data-id="heading-4">1.2 Androidä¸­çš„Javaå¼‚å¸¸å¤„ç†</h4>
<p>Androidç³»ç»Ÿå¯¹Javaå¼‚å¸¸æœ‰ä¸€å¥—å®Œæ•´çš„å¤„ç†æœºåˆ¶:</p>
<p><strong>å¼‚å¸¸æ•è·æµç¨‹</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. çº¿ç¨‹æŠ›å‡ºæœªæ•è·å¼‚å¸¸</span>
<span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> Thread.currentThread();

<span class="hljs-comment">// 2. è§¦å‘UncaughtExceptionHandler</span>
<span class="hljs-type">UncaughtExceptionHandler</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> thread.getUncaughtExceptionHandler();
handler.uncaughtException(thread, exception);

<span class="hljs-comment">// 3. ç³»ç»Ÿé»˜è®¤å¤„ç†å™¨: RuntimeInit$KillApplicationHandler</span>
<span class="hljs-comment">// - è®°å½•å¼‚å¸¸æ—¥å¿—åˆ°Logcat</span>
<span class="hljs-comment">// - é€šè¿‡Binderè°ƒç”¨AMSä¸ŠæŠ¥å¼‚å¸¸</span>
<span class="hljs-comment">// - AMSè®°å½•åˆ°DropBox</span>
<span class="hljs-comment">// - æ€æ­»åº”ç”¨è¿›ç¨‹</span>
</code></pre>
<p><strong>å…³é”®ç»„ä»¶</strong>:</p>
<ol>
<li>
<p><strong>UncaughtExceptionHandler</strong>: å¼‚å¸¸æ‹¦æˆªå™¨</p>
<pre><code class="hljs language-java" lang="java">Thread.setDefaultUncaughtExceptionHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">UncaughtExceptionHandler</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">uncaughtException</span><span class="hljs-params">(Thread t, Throwable e)</span> {
        <span class="hljs-comment">// è‡ªå®šä¹‰å¤„ç†é€»è¾‘</span>
        Log.e(TAG, <span class="hljs-string">"Uncaught exception in thread "</span> + t.getName(), e);
        <span class="hljs-comment">// ä¸ŠæŠ¥åˆ°ç›‘æ§å¹³å°</span>
        CrashReporter.report(e);
    }
});
</code></pre>
</li>
<li>
<p><strong>ActivityThread</strong>: åº”ç”¨ä¸»çº¿ç¨‹çš„å¼‚å¸¸å¤„ç†å…¥å£</p>
</li>
<li>
<p><strong>ActivityManagerService</strong>: ç³»ç»ŸæœåŠ¡,è´Ÿè´£å¼‚å¸¸æ”¶é›†å’Œè¿›ç¨‹ç®¡ç†</p>
</li>
<li>
<p><strong>DropBoxManagerService</strong>: å¼‚å¸¸æ—¥å¿—æŒä¹…åŒ–æœåŠ¡</p>
</li>
</ol>
<h4 data-id="heading-5">1.3 å¸¸è§çš„Javaå¼‚å¸¸ç±»å‹</h4>
<p>åœ¨Androidç³»ç»Ÿå¼€å‘ä¸­,ä»¥ä¸‹å¼‚å¸¸æœ€ä¸ºå¸¸è§:</p>
<p><strong>Top 5 é«˜é¢‘å¼‚å¸¸</strong>:</p>









































<table><thead><tr><th align="left">å¼‚å¸¸ç±»å‹</th><th align="center">å æ¯”</th><th align="left">å¸¸è§åŸå› </th><th align="left">å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td align="left"><strong>NullPointerException</strong></td><td align="center">35%</td><td align="left">å¯¹è±¡ä¸ºnullæ—¶è°ƒç”¨æ–¹æ³•æˆ–è®¿é—®å­—æ®µ</td><td align="left">æœªåˆå§‹åŒ–çš„å˜é‡ã€å›è°ƒä¸­çš„ç©ºå¯¹è±¡</td></tr><tr><td align="left"><strong>IndexOutOfBoundsException</strong></td><td align="center">15%</td><td align="left">è®¿é—®æ•°ç»„/åˆ—è¡¨æ—¶ç´¢å¼•è¶…å‡ºèŒƒå›´</td><td align="left">å¾ªç¯è¾¹ç•Œé”™è¯¯ã€æ•°æ®ä¸ä¸€è‡´</td></tr><tr><td align="left"><strong>ClassCastException</strong></td><td align="center">12%</td><td align="left">å¼ºåˆ¶ç±»å‹è½¬æ¢å¤±è´¥</td><td align="left">æ³›å‹æ“¦é™¤ã€å¤šæ€ä½¿ç”¨é”™è¯¯</td></tr><tr><td align="left"><strong>IllegalStateException</strong></td><td align="center">10%</td><td align="left">å¯¹è±¡çŠ¶æ€ä¸æ­£ç¡®æ—¶è°ƒç”¨æ–¹æ³•</td><td align="left">Activityç”Ÿå‘½å‘¨æœŸé”™è¯¯</td></tr><tr><td align="left"><strong>IllegalArgumentException</strong></td><td align="center">8%</td><td align="left">æ–¹æ³•å‚æ•°ä¸åˆæ³•</td><td align="left">å‚æ•°æ ¡éªŒå¤±è´¥</td></tr></tbody></table>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// NPEç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CarPropertyManager</span> {
    <span class="hljs-keyword">private</span> ICarProperty mService;  <span class="hljs-comment">// å¯èƒ½ä¸ºnull</span>

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getProperty</span><span class="hljs-params">(<span class="hljs-type">int</span> propertyId)</span> {
        <span class="hljs-comment">// æ²¡æœ‰æ£€æŸ¥mServiceæ˜¯å¦ä¸ºnull!</span>
        <span class="hljs-keyword">return</span> mService.getIntProperty(propertyId, <span class="hljs-number">0</span>);  <span class="hljs-comment">// NPE!</span>
    }
}

<span class="hljs-comment">// IndexOutOfBoundsExceptionç¤ºä¾‹</span>
List&lt;String&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
list.add(<span class="hljs-string">"item1"</span>);
<span class="hljs-type">String</span> <span class="hljs-variable">item</span> <span class="hljs-operator">=</span> list.get(<span class="hljs-number">5</span>);  <span class="hljs-comment">// è¶Šç•Œ!</span>

<span class="hljs-comment">// ClassCastExceptionç¤ºä¾‹</span>
<span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Integer</span>(<span class="hljs-number">10</span>);
<span class="hljs-type">String</span> <span class="hljs-variable">str</span> <span class="hljs-operator">=</span> (String) obj;  <span class="hljs-comment">// ç±»å‹è½¬æ¢å¤±è´¥!</span>

<span class="hljs-comment">// IllegalStateExceptionç¤ºä¾‹</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onDestroy</span><span class="hljs-params">()</span> {
    <span class="hljs-built_in">super</span>.onDestroy();
    <span class="hljs-comment">// Activityå·²é”€æ¯</span>
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateUI</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (isDestroyed()) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"Activity is destroyed"</span>);
    }
    <span class="hljs-comment">// æ›´æ–°UI</span>
}
</code></pre>
<p>ä¸‹å›¾å±•ç¤ºäº†Javaå¼‚å¸¸ä»æŠ›å‡ºåˆ°å†™å…¥DropBoxæ—¥å¿—çš„å®Œæ•´å¤„ç†æµç¨‹:</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/135a76248e784151aceb92a63b645d04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767841506&amp;x-signature=ySnbLkJ6chwARZuNsy7PmTNdLiQ%3D" alt="06-01-java-exception-flow.png" loading="lazy"/>
<em>å›¾1: Javaå¼‚å¸¸å¤„ç†æµç¨‹ - ä»åº”ç”¨å¼‚å¸¸åˆ°æ—¥å¿—å­˜å‚¨çš„å®Œæ•´é“¾è·¯</em></p>
<hr/>
<h3 data-id="heading-6">äºŒã€JE (Java Exception) æ—¥å¿—æ·±åº¦è§£æ</h3>
<p>JE (Java Exception) æ˜¯Androidç³»ç»Ÿä¸­Javaå±‚å¼‚å¸¸çš„ç»Ÿç§°,ç†è§£JEæ—¥å¿—çš„ç»“æ„æ˜¯åˆ†æé—®é¢˜çš„åŸºç¡€ã€‚</p>
<h4 data-id="heading-7">2.1 JEæ—¥å¿—çš„ç”Ÿæˆä¸å­˜å‚¨</h4>
<p><strong>ç”Ÿæˆæµç¨‹</strong>:</p>
<pre><code class="hljs language-text" lang="text">åº”ç”¨æŠ›å‡ºå¼‚å¸¸
    â†“
UncaughtExceptionHandleræ•è·
    â†“
å†™å…¥Logcat (AndroidRuntime: FATAL EXCEPTION)
    â†“
é€šè¿‡Binder IPCä¸ŠæŠ¥åˆ°AMS
    â†“
AMSè°ƒç”¨DropBoxManagerService
    â†“
å†™å…¥/data/system/dropbox/
    â†“
æ ‡è®°ä¸ºdata_app_crashç±»å‹
</code></pre>
<p><strong>å­˜å‚¨ä½ç½®</strong>:</p>
<pre><code class="hljs language-text" lang="text">/data/system/dropbox/
â”œâ”€â”€ data_app_crash@1234567890123.txt        # Javaå¼‚å¸¸
â”œâ”€â”€ data_app_native_crash@1234567890124.txt # Nativeå´©æºƒ
â”œâ”€â”€ data_app_anr@1234567890125.txt          # ANR
â””â”€â”€ system_app_crash@1234567890126.txt      # ç³»ç»Ÿåº”ç”¨å´©æºƒ
</code></pre>
<p><strong>æ—¥å¿—å‘½åè§„åˆ™</strong>:</p>
<pre><code class="hljs language-diff" lang="diff">&lt;ç±»å‹&gt;@&lt;æ—¶é—´æˆ³&gt;.txt
<span class="hljs-deletion">- ç±»å‹: data_app_crash (ä¸‰æ–¹åº”ç”¨)</span>
       system_app_crash (ç³»ç»Ÿåº”ç”¨)
<span class="hljs-deletion">- æ—¶é—´æˆ³: System.currentTimeMillis()</span>
</code></pre>
<h4 data-id="heading-8">2.2 JEæ—¥å¿—ç»“æ„å‰–æ</h4>
<p>ä¸€ä¸ªå®Œæ•´çš„JEæ—¥å¿—åŒ…å«ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†:</p>
<p><strong>å®Œæ•´ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-text" lang="text">Process: com.example.carapp
PID: 12345
Flags: 0x38d83e44
Package: com.example.carapp v1 (1.0.0)
Foreground: Yes
Build: PRODUCT/venus/venus:12/SP1A.210812.016/eng.user.20241229:userdebug/dev-keys

java.lang.NullPointerException: Attempt to invoke interface method 'int android.car.hardware.property.ICarProperty.getIntProperty(int, int)' on a null object reference
    at com.example.carapp.CarPropertyManager.getProperty(CarPropertyManager.java:123)
    at com.example.carapp.MainActivity.onCreate(MainActivity.java:56)
    at android.app.Activity.performCreate(Activity.java:8051)
    at android.app.Activity.performCreate(Activity.java:8031)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1329)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3608)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3792)
    at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:101)
    at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)
    at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2307)
    at android.os.Handler.dispatchMessage(Handler.java:106)
    at android.os.Looper.loopOnce(Looper.java:201)
    at android.os.Looper.loop(Looper.java:288)
    at android.app.ActivityThread.main(ActivityThread.java:7842)
    at java.lang.reflect.Method.invoke(Native Method)
    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)
</code></pre>
<p><strong>å„éƒ¨åˆ†è¯¦è§£</strong>:</p>
<p><strong>1. è¿›ç¨‹ä¿¡æ¯</strong> (Process Info):</p>
<pre><code class="hljs language-text" lang="text">Process: com.example.carapp        # è¿›ç¨‹å/åŒ…å
PID: 12345                         # è¿›ç¨‹ID
Flags: 0x38d83e44                  # ApplicationInfo flags
Package: ... v1 (1.0.0)            # åº”ç”¨ç‰ˆæœ¬
Foreground: Yes                    # æ˜¯å¦å‰å°åº”ç”¨
Build: ...                         # ç³»ç»Ÿæ„å»ºä¿¡æ¯
</code></pre>
<p><strong>2. å¼‚å¸¸å¤´</strong> (Exception Header):</p>
<pre><code class="hljs language-text" lang="text">java.lang.NullPointerException: Attempt to invoke interface method '...' on a null object reference
    â””â”€ å¼‚å¸¸ç±»å‹              â””â”€ å¼‚å¸¸è¯¦ç»†ä¿¡æ¯(message)
</code></pre>
<p><strong>3. å¼‚å¸¸æ ˆ</strong> (Stack Trace):</p>
<pre><code class="hljs language-text" lang="text">at ç±»å.æ–¹æ³•å(æ–‡ä»¶å:è¡Œå·)
</code></pre>
<p>æ¯ä¸€è¡Œä»£è¡¨ä¸€ä¸ªæ–¹æ³•è°ƒç”¨,ä»ä¸Šåˆ°ä¸‹æ˜¯<strong>ä»é—®é¢˜ç‚¹åˆ°è°ƒç”¨å…¥å£</strong>çš„é¡ºåºã€‚</p>
<p><strong>å…³é”®ä¿¡æ¯æå–</strong>:</p>








































<table><thead><tr><th align="left">ä¿¡æ¯</th><th align="left">ä½ç½®</th><th align="left">ä½œç”¨</th></tr></thead><tbody><tr><td align="left">å¼‚å¸¸ç±»å‹</td><td align="left">ç¬¬ä¸€è¡Œ</td><td align="left">åˆ¤æ–­é—®é¢˜æ€§è´¨(NPE/OOMç­‰)</td></tr><tr><td align="left">å¼‚å¸¸æ¶ˆæ¯</td><td align="left">ç¬¬ä¸€è¡Œå†’å·å</td><td align="left">äº†è§£å…·ä½“é”™è¯¯åŸå› </td></tr><tr><td align="left">å´©æºƒç‚¹</td><td align="left">ç¬¬ä¸€ä¸ª<code>at</code>è¡Œ</td><td align="left">é—®é¢˜å‘ç”Ÿçš„å…·ä½“ä½ç½®</td></tr><tr><td align="left">è°ƒç”¨é“¾</td><td align="left">å®Œæ•´stack trace</td><td align="left">ç†è§£ä»£ç æ‰§è¡Œè·¯å¾„</td></tr><tr><td align="left">åº”ç”¨ç‰ˆæœ¬</td><td align="left">Packageè¡Œ</td><td align="left">ç¡®è®¤é—®é¢˜ç‰ˆæœ¬</td></tr><tr><td align="left">å‰åå°çŠ¶æ€</td><td align="left">Foregroundè¡Œ</td><td align="left">åˆ¤æ–­ç”¨æˆ·æ„ŸçŸ¥ç¨‹åº¦</td></tr></tbody></table>
<h4 data-id="heading-9">2.3 é“¾å¼å¼‚å¸¸åˆ†æ (Caused by)</h4>
<p>æœ‰æ—¶å¼‚å¸¸ä¼šæœ‰å¤šå±‚åµŒå¥—,ä½¿ç”¨<code>Caused by</code>è¿æ¥:</p>
<pre><code class="hljs language-text" lang="text">java.lang.RuntimeException: Unable to start activity ComponentInfo{...}
    at android.app.ActivityThread.performLaunchActivity(...)
    at android.app.ActivityThread.handleLaunchActivity(...)
    ...
Caused by: java.lang.NullPointerException: Attempt to read from field 'int com.example.Config.timeout' on a null object reference
    at com.example.carapp.MainActivity.initConfig(MainActivity.java:89)
    at com.example.carapp.MainActivity.onCreate(MainActivity.java:56)
    ...
</code></pre>
<p><strong>åˆ†ææ–¹æ³•</strong>:</p>
<ol>
<li><strong>ä»ä¸‹å¾€ä¸Šçœ‹</strong> - æœ€åº•å±‚çš„<code>Caused by</code>æ˜¯æ ¹æœ¬åŸå› </li>
<li><strong>å…³æ³¨ç¬¬ä¸€ä¸ª<code>at</code></strong> - æ¯å±‚å¼‚å¸¸çš„ç¬¬ä¸€ä¸ª<code>at</code>æ˜¯è¯¥å±‚çš„ç›´æ¥åŸå› </li>
<li><strong>å»ºç«‹å› æœé“¾</strong> - ç†è§£å„å±‚å¼‚å¸¸çš„è§¦å‘å…³ç³»</li>
</ol>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­:</p>
<ul>
<li><strong>æ ¹æœ¬åŸå› </strong>: <code>Config.timeout</code>å­—æ®µä¸ºnull</li>
<li><strong>ç›´æ¥åæœ</strong>: MainActivityåˆå§‹åŒ–å¤±è´¥</li>
<li><strong>æœ€ç»ˆè¡¨ç°</strong>: Activityå¯åŠ¨å¤±è´¥,åº”ç”¨å´©æºƒ</li>
</ul>
<p>ä¸‹å›¾å±•ç¤ºäº†JEæ—¥å¿—æ–‡ä»¶çš„å®Œæ•´ç»“æ„,å¸®åŠ©ä½ å¿«é€Ÿç†è§£DropBoxä¸­crashæ—¥å¿—çš„ç»„æˆ:</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f2935eb4d3b4731ac6b418477e233a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767841506&amp;x-signature=0S%2B409QEx0xPDeZ5Ck%2Bt6HwH0VY%3D" alt="06-02-je-log-structure.png" loading="lazy"/>
<em>å›¾2: JEæ—¥å¿—æ–‡ä»¶ç»“æ„ - DropBoxæ—¥å¿—çš„6å¤§æ ¸å¿ƒSection</em></p>
<hr/>
<h3 data-id="heading-10">ä¸‰ã€å·¥å…·å®æˆ˜1: Logcatå®æ—¶ç›‘æ§</h3>
<p>Logcatæ˜¯Androidå¼€å‘ä¸­æœ€å¸¸ç”¨çš„æ—¥å¿—å·¥å…·,æŒæ¡é«˜æ•ˆçš„è¿‡æ»¤æŠ€å·§èƒ½å¤§å¹…æå‡æ’æŸ¥æ•ˆç‡ã€‚</p>
<h4 data-id="heading-11">3.1 Logcatè¿‡æ»¤æŠ€å·§</h4>
<p><strong>åŸºæœ¬è¯­æ³•</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">adb logcat [options] [filterspecs]
</code></pre>
<p><strong>1. æŒ‰æ ‡ç­¾è¿‡æ»¤Javaå¼‚å¸¸</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åªçœ‹FATALçº§åˆ«çš„å¼‚å¸¸</span>
adb logcat *:F

<span class="hljs-comment"># åªçœ‹AndroidRuntimeæ ‡ç­¾(åŒ…å«Javaå¼‚å¸¸)</span>
adb logcat AndroidRuntime:E *:S

<span class="hljs-comment"># ç»„åˆè¿‡æ»¤</span>
adb logcat AndroidRuntime:E System.err:W *:S
</code></pre>
<p><strong>2. ä½¿ç”¨grepè¿›è¡ŒäºŒæ¬¡è¿‡æ»¤</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åªçœ‹NPE</span>
adb logcat | grep -A 30 <span class="hljs-string">"NullPointerException"</span>

<span class="hljs-comment"># åªçœ‹ç‰¹å®šåŒ…åçš„å¼‚å¸¸</span>
adb logcat | grep -A 30 <span class="hljs-string">"com.example.carapp"</span>

<span class="hljs-comment"># æ’é™¤æŸäº›å†…å®¹</span>
adb logcat | grep -v <span class="hljs-string">"Debug"</span>
</code></pre>
<p><strong>3. æ­£åˆ™è¡¨è¾¾å¼æœç´¢</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥æ‰¾æ‰€æœ‰Exception</span>
adb logcat | grep -E <span class="hljs-string">"(Exception|Error)"</span>

<span class="hljs-comment"># æŸ¥æ‰¾ç‰¹å®šæ–¹æ³•è°ƒç”¨</span>
adb logcat | grep -E <span class="hljs-string">"at com\.example\..*\.onCreate"</span>
</code></pre>
<p><strong>4. è¾“å‡ºåˆ°æ–‡ä»¶ä¾¿äºåˆ†æ</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŒç»­å†™å…¥æ–‡ä»¶</span>
adb logcat &gt; crash.log

<span class="hljs-comment"># é™åˆ¶æ–‡ä»¶å¤§å°å’Œæ•°é‡(å¾ªç¯æ—¥å¿—)</span>
adb logcat -v time -f /sdcard/logcat.txt -r 10240 -n 10
<span class="hljs-comment"># -r: æ¯ä¸ªæ–‡ä»¶10MB</span>
<span class="hljs-comment"># -n: æœ€å¤š10ä¸ªæ–‡ä»¶</span>
</code></pre>
<h4 data-id="heading-12">3.2 å®æˆ˜æ¼”ç¤º</h4>
<p><strong>åœºæ™¯</strong>: ç›‘æ§åº”ç”¨å¯åŠ¨è¿‡ç¨‹ä¸­çš„å¼‚å¸¸</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># monitor_crash.sh - å®æ—¶ç›‘æ§Javaå¼‚å¸¸</span>

PACKAGE=<span class="hljs-string">"com.example.carapp"</span>
LOG_FILE=<span class="hljs-string">"crash_<span class="hljs-subst">$(date +%Y%m%d_%H%M%S)</span>.log"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼€å§‹ç›‘æ§ <span class="hljs-variable">$PACKAGE</span> çš„Javaå¼‚å¸¸..."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ—¥å¿—ä¿å­˜åˆ°: <span class="hljs-variable">$LOG_FILE</span>"</span>

<span class="hljs-comment"># æ¸…é™¤æ—§æ—¥å¿—</span>
adb logcat -c

<span class="hljs-comment"># ç›‘æ§å¼‚å¸¸å¹¶ä¿å­˜</span>
adb logcat -v time AndroidRuntime:E *:S | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> line; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$line</span>"</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$LOG_FILE</span>"</span>

    <span class="hljs-comment"># æ£€æµ‹åˆ°FATAL EXCEPTIONæ—¶å‘é€é€šçŸ¥</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$line</span>"</span> | grep -q <span class="hljs-string">"FATAL EXCEPTION"</span>; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"========================================"</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$LOG_FILE</span>"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ£€æµ‹åˆ°å´©æºƒ!æ—¶é—´: <span class="hljs-subst">$(date)</span>"</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$LOG_FILE</span>"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"========================================"</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$LOG_FILE</span>"</span>

        <span class="hljs-comment"># å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ é€šçŸ¥é€»è¾‘</span>
        <span class="hljs-comment"># notify-send "æ£€æµ‹åˆ°åº”ç”¨å´©æºƒ" "$line"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>
</code></pre>
<p><strong>è¾“å‡ºç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-text" lang="text">12-30 14:23:45.123  1234  1234 E AndroidRuntime: FATAL EXCEPTION: main
12-30 14:23:45.123  1234  1234 E AndroidRuntime: Process: com.example.carapp, PID: 1234
12-30 14:23:45.123  1234  1234 E AndroidRuntime: java.lang.NullPointerException: ...
12-30 14:23:45.124  1234  1234 E AndroidRuntime:     at com.example.carapp.MainActivity.onCreate(MainActivity.java:56)
========================================
æ£€æµ‹åˆ°å´©æºƒ!æ—¶é—´: 2025-12-30 14:23:45
========================================
</code></pre>
<p><strong>æŠ€å·§æ€»ç»“</strong>:</p>



































<table><thead><tr><th align="left">åœºæ™¯</th><th align="left">å‘½ä»¤</th><th/></tr></thead><tbody><tr><td align="left">å®æ—¶ç›‘æ§Javaå¼‚å¸¸</td><td align="left"><code>adb logcat AndroidRuntime:E *:S</code></td><td/></tr><tr><td align="left">æŸ¥çœ‹æœ€è¿‘çš„å¼‚å¸¸</td><td align="left">`adb logcat -d</td><td>grep -A 30 "FATAL EXCEPTION"`</td></tr><tr><td align="left">ç›‘æ§ç‰¹å®šåŒ…</td><td align="left">`adb logcat</td><td>grep "com.example"`</td></tr><tr><td align="left">ä¿å­˜åˆ°æ–‡ä»¶</td><td align="left"><code>adb logcat &gt; crash.log</code></td><td/></tr><tr><td align="left">æŒ‰æ—¶é—´è¿‡æ»¤</td><td align="left">`adb logcat -v time</td><td>grep "14:23"`</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-13">å››ã€å·¥å…·å®æˆ˜2: DropBoxæ—¥å¿—åˆ†æ</h3>
<p>DropBoxæ˜¯Androidç³»ç»Ÿçš„å¼‚å¸¸æ—¥å¿—æŒä¹…åŒ–æœåŠ¡,å†å²å¼‚å¸¸éƒ½å­˜å‚¨åœ¨è¿™é‡Œã€‚</p>
<h4 data-id="heading-14">4.1 DropBoxæ—¥å¿—æå–</h4>
<p><strong>æ–¹æ³•1: ä½¿ç”¨adb pull</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ‹‰å–æ‰€æœ‰DropBoxæ—¥å¿—</span>
adb pull /data/system/dropbox ./dropbox_logs/

<span class="hljs-comment"># åªæ‹‰å–Javaå¼‚å¸¸æ—¥å¿—</span>
adb shell <span class="hljs-string">"ls /data/system/dropbox/data_app_crash*"</span> | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> file; <span class="hljs-keyword">do</span>
    adb pull <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> ./je_logs/
<span class="hljs-keyword">done</span>
</code></pre>
<p><strong>æ–¹æ³•2: ä½¿ç”¨dumpsyså‘½ä»¤</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰DropBoxæ—¥å¿—åˆ—è¡¨</span>
adb shell dumpsys dropbox

<span class="hljs-comment"># æŸ¥çœ‹ç‰¹å®šç±»å‹çš„æ—¥å¿—</span>
adb shell dumpsys dropbox --<span class="hljs-built_in">print</span> data_app_crash

<span class="hljs-comment"># æŒ‰æ—¶é—´èŒƒå›´ç­›é€‰(æœ€è¿‘1å°æ—¶)</span>
adb shell dumpsys dropbox --<span class="hljs-built_in">print</span> data_app_crash --time 3600000

<span class="hljs-comment"># å¯¼å‡ºæœ€æ–°çš„ä¸€æ¡Javaå¼‚å¸¸</span>
adb shell dumpsys dropbox --<span class="hljs-built_in">print</span> data_app_crash | <span class="hljs-built_in">head</span> -n 100 &gt; latest_crash.txt
</code></pre>
<p><strong>dumpsys dropboxè¾“å‡ºæ ¼å¼</strong>:</p>
<pre><code class="hljs language-text" lang="text">Drop box contents: 156 entries
Max entries: 1000

2025-12-30 14:23:45 data_app_crash (text, 12345 bytes)
    Process: com.example.carapp
    ...

2025-12-30 13:15:32 data_app_anr (text, 45678 bytes)
    Subject: ANR in com.example.carapp
    ...
</code></pre>
<h4 data-id="heading-15">4.2 æ‰¹é‡åˆ†æè„šæœ¬</h4>
<p><strong>è„šæœ¬1: ç»Ÿè®¡å¼‚å¸¸ç±»å‹åˆ†å¸ƒ</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># analyze_crashes.sh - åˆ†æDropBoxä¸­çš„Javaå¼‚å¸¸</span>

DROPBOX_DIR=<span class="hljs-string">"/data/system/dropbox"</span>
OUTPUT_FILE=<span class="hljs-string">"crash_analysis_<span class="hljs-subst">$(date +%Y%m%d)</span>.txt"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­£åœ¨åˆ†æDropBoxæ—¥å¿—..."</span> | <span class="hljs-built_in">tee</span> <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_FILE</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"======================================"</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_FILE</span>"</span>

<span class="hljs-comment"># ç»Ÿè®¡å„ç±»å¼‚å¸¸çš„æ•°é‡</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_FILE</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å¼‚å¸¸ç±»å‹åˆ†å¸ƒ:"</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_FILE</span>"</span>
adb shell <span class="hljs-string">"grep -h 'java\.lang\.*Exception' <span class="hljs-variable">$DROPBOX_DIR</span>/data_app_crash* | awk '{print \$1}' | sort | uniq -c | sort -rn"</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_FILE</span>"</span>

<span class="hljs-comment"># ç»Ÿè®¡æœ€é¢‘ç¹å´©æºƒçš„åŒ…</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_FILE</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"Top 10 å´©æºƒåŒ…å:"</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_FILE</span>"</span>
adb shell <span class="hljs-string">"grep -h '^Process:' <span class="hljs-variable">$DROPBOX_DIR</span>/data_app_crash* | awk '{print \$2}' | sort | uniq -c | sort -rn | head -10"</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_FILE</span>"</span>

<span class="hljs-comment"># ç»Ÿè®¡æœ€è¿‘24å°æ—¶çš„å´©æºƒè¶‹åŠ¿</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_FILE</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"æœ€è¿‘24å°æ—¶å´©æºƒè¶‹åŠ¿:"</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_FILE</span>"</span>
adb shell <span class="hljs-string">"find <span class="hljs-variable">$DROPBOX_DIR</span> -name 'data_app_crash*' -mtime -1 | wc -l"</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_FILE</span>"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span> | <span class="hljs-built_in">tee</span> -a <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_FILE</span>"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"åˆ†æå®Œæˆ!ç»“æœä¿å­˜åˆ°: <span class="hljs-variable">$OUTPUT_FILE</span>"</span>
</code></pre>
<p><strong>è¾“å‡ºç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-text" lang="text">æ­£åœ¨åˆ†æDropBoxæ—¥å¿—...
======================================

å¼‚å¸¸ç±»å‹åˆ†å¸ƒ:
     42 java.lang.NullPointerException
     15 java.lang.IndexOutOfBoundsException
     12 java.lang.ClassCastException
      8 java.lang.IllegalStateException
      5 java.lang.RuntimeException

Top 10 å´©æºƒåŒ…å:
     35 com.example.carapp
     12 com.android.systemui
      8 com.example.settings
      5 com.android.phone

æœ€è¿‘24å°æ—¶å´©æºƒè¶‹åŠ¿:
82

åˆ†æå®Œæˆ!ç»“æœä¿å­˜åˆ°: crash_analysis_20251230.txt
</code></pre>
<p><strong>è„šæœ¬2: æå–ç‰¹å®šåŒ…åçš„æ‰€æœ‰å¼‚å¸¸</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># extract_package_crashes.sh</span>

PACKAGE=<span class="hljs-string">"com.example.carapp"</span>
OUTPUT_DIR=<span class="hljs-string">"crashes_<span class="hljs-variable">$PACKAGE</span>"</span>

<span class="hljs-built_in">mkdir</span> -p <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_DIR</span>"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æå– <span class="hljs-variable">$PACKAGE</span> çš„æ‰€æœ‰å´©æºƒæ—¥å¿—..."</span>

<span class="hljs-comment"># éå†æ‰€æœ‰data_app_crashæ–‡ä»¶</span>
adb shell <span class="hljs-string">"ls /data/system/dropbox/data_app_crash*"</span> | <span class="hljs-keyword">while</span> <span class="hljs-built_in">read</span> file; <span class="hljs-keyword">do</span>
    <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦åŒ…å«ç›®æ ‡åŒ…å</span>
    <span class="hljs-keyword">if</span> adb shell <span class="hljs-string">"grep -q 'Process: <span class="hljs-variable">$PACKAGE</span>' <span class="hljs-variable">$file</span>"</span>; <span class="hljs-keyword">then</span>
        filename=$(<span class="hljs-built_in">basename</span> <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span>)
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ‰¾åˆ°: <span class="hljs-variable">$filename</span>"</span>
        adb pull <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_DIR</span>/<span class="hljs-variable">$filename</span>"</span>
    <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"æå–å®Œæˆ!ä¿å­˜åˆ°ç›®å½•: <span class="hljs-variable">$OUTPUT_DIR</span>"</span>
<span class="hljs-built_in">ls</span> -lh <span class="hljs-string">"<span class="hljs-variable">$OUTPUT_DIR</span>"</span>
</code></pre>
<hr/>
<h3 data-id="heading-16">äº”ã€å·¥å…·å®æˆ˜3: MATå†…å­˜åˆ†æ</h3>
<p>å¯¹äºOOM(OutOfMemoryError)å’Œå†…å­˜ç›¸å…³çš„å¼‚å¸¸,MAT (Memory Analyzer Tool) æ˜¯æœ€å¼ºå¤§çš„åˆ†æå·¥å…·ã€‚</p>
<h4 data-id="heading-17">5.1 Heap Dumpè·å–</h4>
<p><strong>æ–¹æ³•1: é€šè¿‡Android Studio</strong></p>
<pre><code class="hljs language-text" lang="text">1. æ‰“å¼€Android Profiler
2. é€‰æ‹©Memory
3. ç‚¹å‡»"Dump Java heap"æŒ‰é’®
4. è‡ªåŠ¨ç”Ÿæˆ.hprofæ–‡ä»¶å¹¶æ‰“å¼€
</code></pre>
<p><strong>æ–¹æ³•2: é€šè¿‡adbå‘½ä»¤</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è·å–ç›®æ ‡åº”ç”¨çš„PID</span>
adb shell ps | grep com.example.carapp

<span class="hljs-comment"># è§¦å‘heap dump</span>
adb shell am dumpheap &lt;PID&gt; /data/local/tmp/heap.hprof

<span class="hljs-comment"># æ‹‰å–åˆ°æœ¬åœ°</span>
adb pull /data/local/tmp/heap.hprof .

<span class="hljs-comment"># è½¬æ¢æ ¼å¼(MATéœ€è¦æ ‡å‡†æ ¼å¼)</span>
hprof-conv heap.hprof heap-mat.hprof
</code></pre>
<p><strong>æ–¹æ³•3: ä»£ç ä¸­ä¸»åŠ¨dump</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryMonitor</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dumpHeap</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> Environment.getExternalStorageDirectory()
                + <span class="hljs-string">"/heap_"</span> + System.currentTimeMillis() + <span class="hljs-string">".hprof"</span>;
            Debug.dumpHprofData(path);
            Log.i(TAG, <span class="hljs-string">"Heap dump saved to: "</span> + path);
        } <span class="hljs-keyword">catch</span> (IOException e) {
            Log.e(TAG, <span class="hljs-string">"Failed to dump heap"</span>, e);
        }
    }

    <span class="hljs-comment">// åœ¨æ€€ç–‘å†…å­˜æ³„æ¼æ—¶è°ƒç”¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkMemoryLeak</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Runtime</span> <span class="hljs-variable">runtime</span> <span class="hljs-operator">=</span> Runtime.getRuntime();
        <span class="hljs-type">long</span> <span class="hljs-variable">maxMemory</span> <span class="hljs-operator">=</span> runtime.maxMemory() / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>;  <span class="hljs-comment">// MB</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">usedMemory</span> <span class="hljs-operator">=</span> (runtime.totalMemory() - runtime.freeMemory()) / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>;

        <span class="hljs-keyword">if</span> (usedMemory &gt; maxMemory * <span class="hljs-number">0.9</span>) {  <span class="hljs-comment">// ä½¿ç”¨ç‡è¶…è¿‡90%</span>
            Log.w(TAG, <span class="hljs-string">"Memory usage high: "</span> + usedMemory + <span class="hljs-string">"MB / "</span> + maxMemory + <span class="hljs-string">"MB"</span>);
            dumpHeap();  <span class="hljs-comment">// ä¸»åŠ¨dump</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-18">5.2 MATåˆ†ææŠ€å·§</h4>
<p><strong>æ ¸å¿ƒè§†å›¾</strong>:</p>
<p><strong>1. Histogram (ç›´æ–¹å›¾)</strong> - æŸ¥çœ‹æ‰€æœ‰å¯¹è±¡çš„æ•°é‡</p>
<pre><code class="hljs language-text" lang="text">æ‰“å¼€: ç‚¹å‡»å·¥å…·æ çš„"Histogram"å›¾æ ‡

ä½œç”¨: ç»Ÿè®¡æ¯ä¸ªç±»çš„å®ä¾‹æ•°é‡å’Œå ç”¨å†…å­˜

å¸¸ç”¨æ“ä½œ:
- æŒ‰"Shallow Heap"æ’åº â†’ æ‰¾å ç”¨å†…å­˜æœ€å¤šçš„ç±»
- æŒ‰"Objects"æ’åº â†’ æ‰¾å®ä¾‹æ•°é‡æœ€å¤šçš„ç±»
- å³é”® â†’ "List objects" â†’ "with incoming references" â†’ æŸ¥çœ‹è°æŒæœ‰è¿™äº›å¯¹è±¡
</code></pre>
<p><strong>2. Dominator Tree (æ”¯é…æ ‘)</strong> - æŸ¥æ‰¾å†…å­˜æ³„æ¼</p>
<pre><code class="hljs language-text" lang="text">æ‰“å¼€: ç‚¹å‡»å·¥å…·æ çš„"Dominator Tree"å›¾æ ‡

ä½œç”¨: æ˜¾ç¤ºå¯¹è±¡çš„æ”¯é…å…³ç³»,æ‰¾å‡ºå ç”¨å†…å­˜æœ€å¤§çš„å¯¹è±¡é“¾

å†…å­˜æ³„æ¼ç‰¹å¾:
- æŸä¸ªå¯¹è±¡çš„Retained Heapç‰¹åˆ«å¤§
- è¯¥å¯¹è±¡ç†åº”è¢«å›æ”¶ä½†ä»å­˜åœ¨
- é€šè¿‡"Path to GC Roots"æŸ¥çœ‹å¼•ç”¨é“¾
</code></pre>
<p><strong>3. OQL (Object Query Language)</strong> - å¯¹è±¡æŸ¥è¯¢</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥æ‰¾æ‰€æœ‰Activityå®ä¾‹</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> android.app.Activity

<span class="hljs-comment">-- æŸ¥æ‰¾æ‰€æœ‰Bitmapå¯¹è±¡,æŒ‰å¤§å°æ’åº</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> android.graphics.Bitmap <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-variable">@retainedHeap</span> <span class="hljs-keyword">DESC</span>

<span class="hljs-comment">-- æŸ¥æ‰¾æŒæœ‰ç‰¹å®šå¯¹è±¡çš„å®ä¾‹</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> com.example.MyClass <span class="hljs-keyword">WHERE</span> this.mService <span class="hljs-operator">!=</span> <span class="hljs-keyword">null</span>

<span class="hljs-comment">-- æŸ¥æ‰¾æ³„æ¼çš„Context</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> INSTANCEOF android.content.Context <span class="hljs-keyword">WHERE</span> (toString(this) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">LIKE</span> ".*Application.*")
</code></pre>
<p><strong>å®æˆ˜ç¤ºä¾‹: åˆ†æActivityæ³„æ¼</strong></p>
<pre><code class="hljs language-text" lang="text">1. æ‰“å¼€Histogramè§†å›¾
2. æœç´¢ä½ çš„Activityç±»å
3. å³é”® â†’ "List objects" â†’ "with incoming references"
4. æŸ¥çœ‹instancesåˆ—è¡¨,æ­£å¸¸æƒ…å†µåº”è¯¥åªæœ‰1ä¸ª(å½“å‰Activity)
5. å¦‚æœæœ‰å¤šä¸ª â†’ å‘ç”Ÿäº†æ³„æ¼!
6. å³é”®æŸä¸ªæ³„æ¼çš„å®ä¾‹ â†’ "Path to GC Roots" â†’ "exclude weak references"
7. åˆ†æå¼•ç”¨é“¾,æ‰¾å‡ºè°æŒæœ‰äº†Activityå¯¼è‡´æ— æ³•é‡Šæ”¾
</code></pre>
<p><strong>å¸¸è§æ³„æ¼åœºæ™¯</strong>:</p>



































<table><thead><tr><th align="left">åœºæ™¯</th><th align="left">åŸå› </th><th align="left">MATç‰¹å¾</th><th align="left">è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td align="left">Handleræ³„æ¼</td><td align="left">éé™æ€å†…éƒ¨ç±»æŒæœ‰Activity</td><td align="left">Handler â†’ Activity</td><td align="left">æ”¹ä¸ºé™æ€å†…éƒ¨ç±»+WeakReference</td></tr><tr><td align="left">Listeneræ³„æ¼</td><td align="left">æ³¨å†Œç›‘å¬å™¨æœªæ³¨é”€</td><td align="left">Listener â†’ Activity</td><td align="left">åœ¨onDestroyä¸­unregister</td></tr><tr><td align="left">å•ä¾‹æŒæœ‰Context</td><td align="left">å•ä¾‹ç”Ÿå‘½å‘¨æœŸé•¿äºActivity</td><td align="left">Singleton â†’ Activity</td><td align="left">ä½¿ç”¨ApplicationContext</td></tr><tr><td align="left">çº¿ç¨‹æ³„æ¼</td><td align="left">çº¿ç¨‹æŒæœ‰Activityå¼•ç”¨</td><td align="left">Thread â†’ Activity</td><td align="left">çº¿ç¨‹ç»“æŸå‰æ¸…é™¤å¼•ç”¨</td></tr></tbody></table>
<p>ä¸‹å›¾å±•ç¤ºäº†ä½¿ç”¨MATè¿›è¡Œå†…å­˜æ³„æ¼åˆ†æçš„å®Œæ•´æµç¨‹,åŒ…å«ä¸‰æ¡å¹¶è¡Œçš„åˆ†æè·¯å¾„:</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d34aef2148064c21b2458510546db223~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767841506&amp;x-signature=%2Fvm11xNZdbAG7RuM4Uei65batiw%3D" alt="06-03-mat-analysis-workflow.png" loading="lazy"/>
<em>å›¾3: MATå†…å­˜æ³„æ¼åˆ†ææµç¨‹ - Histogram/Dominator Tree/OQLä¸‰ç§åˆ†æè·¯å¾„</em></p>
<hr/>
<h3 data-id="heading-19">å…­ã€å®æˆ˜æ¡ˆä¾‹: NPEé—®é¢˜å®Œæ•´åˆ†æ</h3>
<p>ç°åœ¨è®©æˆ‘ä»¬å›åˆ°å¼€ç¯‡çš„é‚£ä¸ªçœŸå®æ¡ˆä¾‹,çœ‹çœ‹å¦‚ä½•ä¸€æ­¥æ­¥å®šä½å’Œè§£å†³é—®é¢˜ã€‚</p>
<h4 data-id="heading-20">6.1 é—®é¢˜ç°è±¡</h4>
<p><strong>å‘Šè­¦ä¿¡æ¯</strong>:</p>
<pre><code class="hljs language-text" lang="text">æ—¶é—´: 2025-12-29 17:30
å¹³å°: ç›‘æ§å¹³å°
å‘Šè­¦: Crashç‡çªå¢è‡³15% (æ­£å¸¸&lt;1%)
å½±å“: ç‰¹å®šè½¦å‹ç”¨æˆ·æ— æ³•ä½¿ç”¨åº”ç”¨
</code></pre>
<p><strong>ç”¨æˆ·åé¦ˆ</strong>:</p>
<ul>
<li>"æ‰“å¼€åº”ç”¨å°±é—ªé€€"</li>
<li>"å‡çº§æ–°ç‰ˆæœ¬åæ— æ³•ä½¿ç”¨"</li>
<li>åªåœ¨ç‰¹å®šè½¦å‹(ModelX)ä¸Šå‡ºç°</li>
</ul>
<h4 data-id="heading-21">6.2 æ—¥å¿—åˆ†æ</h4>
<p><strong>ç¬¬ä¸€æ­¥: ä»DropBoxæå–æœ€æ–°å¼‚å¸¸</strong></p>
<pre><code class="hljs language-bash" lang="bash">$ adb shell dumpsys dropbox --<span class="hljs-built_in">print</span> data_app_crash | <span class="hljs-built_in">head</span> -n 50

Drop box contents: 324 entries

2025-12-29 17:28:15 data_app_crash (text, 8932 bytes)
Process: com.example.carapp
PID: 15234
Flags: 0x38d83e44
Package: com.example.carapp v102 (1.0.2)
Foreground: Yes

java.lang.NullPointerException: Attempt to invoke interface method <span class="hljs-string">'int android.car.hardware.property.ICarProperty.getIntProperty(int, int)'</span> on a null object reference
    at com.example.carapp.property.CarPropertyManager.getProperty(CarPropertyManager.java:123)
    at com.example.carapp.ui.MainActivity.initCarConfig(MainActivity.java:89)
    at com.example.carapp.ui.MainActivity.onCreate(MainActivity.java:56)
    at android.app.Activity.performCreate(Activity.java:8051)
    ...
</code></pre>
<p><strong>å…³é”®ä¿¡æ¯æå–</strong>:</p>



































<table><thead><tr><th align="left">ä¿¡æ¯é¡¹</th><th align="left">å†…å®¹</th><th align="left">åˆ†æ</th></tr></thead><tbody><tr><td align="left">å¼‚å¸¸ç±»å‹</td><td align="left">NullPointerException</td><td align="left">ç©ºæŒ‡é’ˆé—®é¢˜</td></tr><tr><td align="left">å´©æºƒç‚¹</td><td align="left">CarPropertyManager.java:123</td><td align="left">mServiceå¯¹è±¡ä¸ºnull</td></tr><tr><td align="left">è°ƒç”¨é“¾</td><td align="left">MainActivity.onCreate â†’ initCarConfig â†’ getProperty</td><td align="left">å¯åŠ¨æ—¶è·å–è½¦è¾†å±æ€§å¤±è´¥</td></tr><tr><td align="left">åº”ç”¨ç‰ˆæœ¬</td><td align="left">v102 (1.0.2)</td><td align="left">æ–°ç‰ˆæœ¬å¼•å…¥çš„é—®é¢˜</td></tr><tr><td align="left">å‰å°åº”ç”¨</td><td align="left">Yes</td><td align="left">ç”¨æˆ·ç›´æ¥æ„ŸçŸ¥,å½±å“ä¸¥é‡</td></tr></tbody></table>
<p><strong>ç¬¬äºŒæ­¥: æŸ¥çœ‹æºç </strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// CarPropertyManager.java:123</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CarPropertyManager</span> {
    <span class="hljs-keyword">private</span> ICarProperty mService;  <span class="hljs-comment">// â† è¿™é‡Œä¸ºnull!</span>

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CarPropertyManager</span><span class="hljs-params">(Context context)</span> {
        <span class="hljs-comment">// é€šè¿‡Binderè·å–CaræœåŠ¡</span>
        <span class="hljs-type">IBinder</span> <span class="hljs-variable">binder</span> <span class="hljs-operator">=</span> ServiceManager.getService(Context.CAR_SERVICE);
        <span class="hljs-keyword">if</span> (binder != <span class="hljs-literal">null</span>) {
            mService = ICarProperty.Stub.asInterface(binder);
        }
        <span class="hljs-comment">// é—®é¢˜: å¦‚æœæœåŠ¡ä¸å­˜åœ¨,mServiceå°±æ˜¯null,ä½†æ²¡æœ‰å¤„ç†!</span>
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getProperty</span><span class="hljs-params">(<span class="hljs-type">int</span> propertyId)</span> {
        <span class="hljs-comment">// ç›´æ¥è°ƒç”¨mService,æ²¡æœ‰ç©ºæŒ‡é’ˆæ£€æŸ¥!</span>
        <span class="hljs-keyword">return</span> mService.getIntProperty(propertyId, <span class="hljs-number">0</span>);  <span class="hljs-comment">// â† NPEå‘ç”Ÿåœ¨è¿™é‡Œ</span>
    }
}
</code></pre>
<p><strong>ç¬¬ä¸‰æ­¥: åˆ†ææ ¹æœ¬åŸå› </strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥CaræœåŠ¡æ˜¯å¦å­˜åœ¨</span>
$ adb shell service list | grep car

<span class="hljs-comment"># åœ¨ModelXè½¦å‹ä¸Šè¾“å‡º:</span>
<span class="hljs-comment"># 149    car_service: [android.car.ICar]  â† æœåŠ¡å­˜åœ¨</span>

<span class="hljs-comment"># ä½†æ˜¯æ£€æŸ¥PropertyæœåŠ¡:</span>
$ adb shell dumpsys car_service | grep -A 10 <span class="hljs-string">"Property"</span>

<span class="hljs-comment"># è¾“å‡º:</span>
<span class="hljs-comment"># CarPropertyService: NOT_AVAILABLE  â† PropertyæœåŠ¡ä¸å¯ç”¨!</span>
<span class="hljs-comment"># Reason: Config file missing (/vendor/etc/car_property_config.xml)</span>
</code></pre>
<p><strong>æ ¹æœ¬åŸå› ç¡®è®¤</strong>:</p>
<ol>
<li>ModelXè½¦å‹ç¼ºå°‘è½¦è¾†å±æ€§é…ç½®æ–‡ä»¶:<code>/vendor/etc/car_property_config.xml</code></li>
<li>å¯¼è‡´CarPropertyServiceæ— æ³•åˆå§‹åŒ–</li>
<li>ServiceManagerè¿”å›null</li>
<li>ä»£ç æ²¡æœ‰åšç©ºæŒ‡é’ˆä¿æŠ¤,ç›´æ¥å´©æºƒ</li>
</ol>
<h4 data-id="heading-22">6.3 ä»£ç åˆ†æä¸ä¿®å¤</h4>
<p><strong>Before (æœ‰é—®é¢˜çš„ä»£ç )</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CarPropertyManager</span> {
    <span class="hljs-keyword">private</span> ICarProperty mService;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CarPropertyManager</span><span class="hljs-params">(Context context)</span> {
        <span class="hljs-type">IBinder</span> <span class="hljs-variable">binder</span> <span class="hljs-operator">=</span> ServiceManager.getService(Context.CAR_SERVICE);
        <span class="hljs-keyword">if</span> (binder != <span class="hljs-literal">null</span>) {
            mService = ICarProperty.Stub.asInterface(binder);
        }
        <span class="hljs-comment">// æ²¡æœ‰å¤„ç†mService == nullçš„æƒ…å†µ</span>
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getProperty</span><span class="hljs-params">(<span class="hljs-type">int</span> propertyId)</span> {
        <span class="hljs-keyword">return</span> mService.getIntProperty(propertyId, <span class="hljs-number">0</span>);  <span class="hljs-comment">// NPE!</span>
    }
}

<span class="hljs-comment">// MainActivity.java</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
    <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    initCarConfig();  <span class="hljs-comment">// ç›´æ¥è°ƒç”¨,æ²¡æœ‰å¼‚å¸¸å¤„ç†</span>
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initCarConfig</span><span class="hljs-params">()</span> {
    <span class="hljs-type">CarPropertyManager</span> <span class="hljs-variable">manager</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CarPropertyManager</span>(<span class="hljs-built_in">this</span>);
    <span class="hljs-type">int</span> <span class="hljs-variable">timeout</span> <span class="hljs-operator">=</span> manager.getProperty(PROPERTY_CONFIG_TIMEOUT);  <span class="hljs-comment">// å´©æºƒ!</span>
    <span class="hljs-comment">// ä½¿ç”¨timeout...</span>
}
</code></pre>
<p><strong>After (ä¿®å¤åçš„ä»£ç )</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CarPropertyManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TAG</span> <span class="hljs-operator">=</span> <span class="hljs-string">"CarPropertyManager"</span>;
    <span class="hljs-keyword">private</span> ICarProperty mService;
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> mServiceAvailable;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CarPropertyManager</span><span class="hljs-params">(Context context)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">IBinder</span> <span class="hljs-variable">binder</span> <span class="hljs-operator">=</span> ServiceManager.getService(Context.CAR_SERVICE);
            <span class="hljs-keyword">if</span> (binder != <span class="hljs-literal">null</span>) {
                mService = ICarProperty.Stub.asInterface(binder);
                mServiceAvailable = (mService != <span class="hljs-literal">null</span>);
            } <span class="hljs-keyword">else</span> {
                Log.w(TAG, <span class="hljs-string">"Car service not available"</span>);
                mServiceAvailable = <span class="hljs-literal">false</span>;
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            Log.e(TAG, <span class="hljs-string">"Failed to connect to car service"</span>, e);
            mServiceAvailable = <span class="hljs-literal">false</span>;
        }
    }

    <span class="hljs-comment">/**
     * æ£€æŸ¥æœåŠ¡æ˜¯å¦å¯ç”¨
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isServiceAvailable</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> mServiceAvailable;
    }

    <span class="hljs-comment">/**
     * è·å–è½¦è¾†å±æ€§
     * <span class="hljs-doctag">@param</span> propertyId å±æ€§ID
     * <span class="hljs-doctag">@param</span> defaultValue æœåŠ¡ä¸å¯ç”¨æ—¶çš„é»˜è®¤å€¼
     * <span class="hljs-doctag">@return</span> å±æ€§å€¼
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getProperty</span><span class="hljs-params">(<span class="hljs-type">int</span> propertyId, <span class="hljs-type">int</span> defaultValue)</span> {
        <span class="hljs-keyword">if</span> (!mServiceAvailable || mService == <span class="hljs-literal">null</span>) {
            Log.w(TAG, <span class="hljs-string">"Service not available, returning default value: "</span> + defaultValue);
            <span class="hljs-keyword">return</span> defaultValue;
        }

        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> mService.getIntProperty(propertyId, <span class="hljs-number">0</span>);
        } <span class="hljs-keyword">catch</span> (RemoteException e) {
            Log.e(TAG, <span class="hljs-string">"Failed to get property: "</span> + propertyId, e);
            <span class="hljs-keyword">return</span> defaultValue;
        }
    }
}

<span class="hljs-comment">// MainActivity.java</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
    <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    initCarConfig();
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initCarConfig</span><span class="hljs-params">()</span> {
    <span class="hljs-type">CarPropertyManager</span> <span class="hljs-variable">manager</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CarPropertyManager</span>(<span class="hljs-built_in">this</span>);

    <span class="hljs-comment">// å…ˆæ£€æŸ¥æœåŠ¡æ˜¯å¦å¯ç”¨</span>
    <span class="hljs-keyword">if</span> (!manager.isServiceAvailable()) {
        Log.w(TAG, <span class="hljs-string">"Car property service not available, using default config"</span>);
        Toast.makeText(<span class="hljs-built_in">this</span>, <span class="hljs-string">"éƒ¨åˆ†è½¦è¾†åŠŸèƒ½ä¸å¯ç”¨"</span>, Toast.LENGTH_SHORT).show();
        <span class="hljs-comment">// ä½¿ç”¨é»˜è®¤é…ç½®</span>
        applyDefaultConfig();
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// æä¾›é»˜è®¤å€¼,å³ä½¿è·å–å¤±è´¥ä¹Ÿä¸ä¼šå´©æºƒ</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">timeout</span> <span class="hljs-operator">=</span> manager.getProperty(PROPERTY_CONFIG_TIMEOUT, <span class="hljs-number">5000</span>);
    applyConfig(timeout);
}

<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">applyDefaultConfig</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// ä½¿ç”¨ç¡¬ç¼–ç çš„é»˜è®¤é…ç½®</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">defaultTimeout</span> <span class="hljs-operator">=</span> <span class="hljs-number">5000</span>;
    applyConfig(defaultTimeout);
}
</code></pre>
<p><strong>ä¿®å¤è¦ç‚¹</strong>:</p>
<ol>
<li>
<p><strong>ç©ºæŒ‡é’ˆæ£€æŸ¥</strong>:</p>
<ul>
<li>æ·»åŠ <code>isServiceAvailable()</code>æ–¹æ³•</li>
<li>åœ¨è°ƒç”¨å‰æ£€æŸ¥æœåŠ¡çŠ¶æ€</li>
</ul>
</li>
<li>
<p><strong>å¼‚å¸¸æ•è·</strong>:</p>
<ul>
<li>æ•è·<code>RemoteException</code></li>
<li>é¿å…Binderè°ƒç”¨å¤±è´¥å¯¼è‡´å´©æºƒ</li>
</ul>
</li>
<li>
<p><strong>é»˜è®¤å€¼å¤„ç†</strong>:</p>
<ul>
<li><code>getProperty()</code>æ–¹æ³•å¢åŠ <code>defaultValue</code>å‚æ•°</li>
<li>æœåŠ¡ä¸å¯ç”¨æ—¶è¿”å›é»˜è®¤å€¼</li>
</ul>
</li>
<li>
<p><strong>ç”¨æˆ·ä½“éªŒ</strong>:</p>
<ul>
<li>é™çº§å¤„ç†:ä½¿ç”¨é»˜è®¤é…ç½®ç»§ç»­è¿è¡Œ</li>
<li>å‹å¥½æç¤º:Toastå‘ŠçŸ¥ç”¨æˆ·éƒ¨åˆ†åŠŸèƒ½ä¸å¯ç”¨</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-23">ä¸ƒã€æœ€ä½³å®è·µä¸é¢„é˜²æªæ–½</h3>
<p>é€šè¿‡å‰é¢çš„æ¡ˆä¾‹åˆ†æ,æˆ‘ä»¬æ€»ç»“å‡ºä¸€å¥—Javaå¼‚å¸¸é¢„é˜²çš„æœ€ä½³å®è·µã€‚</p>
<h4 data-id="heading-24">7.1 ç¼–ç è§„èŒƒ</h4>
<p><strong>1. é˜²å¾¡æ€§ç¼–ç¨‹</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processData</span><span class="hljs-params">(User user)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> user.getName();  <span class="hljs-comment">// userå¯èƒ½ä¸ºnull!</span>
    Log.d(TAG, <span class="hljs-string">"Processing user: "</span> + name);
}

<span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processData</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> User user)</span> {
    <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span>) {
        Log.w(TAG, <span class="hljs-string">"User is null, skipping processing"</span>);
        <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> user.getName();
    Log.d(TAG, <span class="hljs-string">"Processing user: "</span> + name);
}
</code></pre>
<p><strong>2. ä½¿ç”¨æ³¨è§£</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> androidx.annotation.NonNull;
<span class="hljs-keyword">import</span> androidx.annotation.Nullable;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserManager</span> {
    <span class="hljs-comment">// æ˜ç¡®æ ‡æ³¨å‚æ•°ä¸èƒ½ä¸ºnull</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateUser</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> User user)</span> {
        <span class="hljs-comment">// IDEå’ŒLintä¼šæ£€æŸ¥è°ƒç”¨å¤„æ˜¯å¦ä¼ å…¥null</span>
        saveToDatabase(user);
    }

    <span class="hljs-comment">// æ˜ç¡®æ ‡æ³¨è¿”å›å€¼å¯èƒ½ä¸ºnull</span>
    <span class="hljs-meta">@Nullable</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">findUser</span><span class="hljs-params">(<span class="hljs-type">int</span> userId)</span> {
        <span class="hljs-keyword">return</span> userCache.get(userId);
    }
}
</code></pre>
<p><strong>3. å¼‚å¸¸å¤„ç†åŸåˆ™</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŸåˆ™1: ä¸è¦åæ‰å¼‚å¸¸</span>
<span class="hljs-keyword">try</span> {
    riskyOperation();
} <span class="hljs-keyword">catch</span> (Exception e) {
    <span class="hljs-comment">// âŒ ä»€ä¹ˆéƒ½ä¸åš,é—®é¢˜è¢«éšè—</span>
}

<span class="hljs-comment">// åŸåˆ™2: è®°å½•æ—¥å¿—</span>
<span class="hljs-keyword">try</span> {
    riskyOperation();
} <span class="hljs-keyword">catch</span> (Exception e) {
    <span class="hljs-comment">// âœ… è®°å½•å¼‚å¸¸ä¿¡æ¯</span>
    Log.e(TAG, <span class="hljs-string">"Failed to execute risky operation"</span>, e);
}

<span class="hljs-comment">// åŸåˆ™3: ä¼˜é›…é™çº§</span>
<span class="hljs-keyword">try</span> {
    loadDataFromNetwork();
} <span class="hljs-keyword">catch</span> (IOException e) {
    Log.w(TAG, <span class="hljs-string">"Network failed, loading from cache"</span>, e);
    loadDataFromCache();  <span class="hljs-comment">// é™çº§æ–¹æ¡ˆ</span>
}

<span class="hljs-comment">// åŸåˆ™4: å‘ä¸ŠæŠ›å‡ºä¸å¯æ¢å¤çš„å¼‚å¸¸</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">criticalOperation</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> CriticalException {
    <span class="hljs-keyword">try</span> {
        performCriticalTask();
    } <span class="hljs-keyword">catch</span> (Exception e) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CriticalException</span>(<span class="hljs-string">"Critical task failed"</span>, e);
    }
}
</code></pre>
<p><strong>4. èµ„æºç®¡ç†</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// âœ… ä½¿ç”¨try-with-resourcesè‡ªåŠ¨å…³é—­èµ„æº</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">readFile</span><span class="hljs-params">(String path)</span> {
    <span class="hljs-keyword">try</span> (<span class="hljs-type">BufferedReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(path))) {
        <span class="hljs-keyword">return</span> reader.readLine();
    } <span class="hljs-keyword">catch</span> (IOException e) {
        Log.e(TAG, <span class="hljs-string">"Failed to read file: "</span> + path, e);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-comment">// æˆ–è€…æ‰‹åŠ¨ç®¡ç†</span>
<span class="hljs-type">Cursor</span> <span class="hljs-variable">cursor</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
<span class="hljs-keyword">try</span> {
    cursor = database.query(...);
    <span class="hljs-comment">// ä½¿ç”¨cursor</span>
} <span class="hljs-keyword">finally</span> {
    <span class="hljs-keyword">if</span> (cursor != <span class="hljs-literal">null</span>) {
        cursor.close();  <span class="hljs-comment">// ç¡®ä¿èµ„æºé‡Šæ”¾</span>
    }
}
</code></pre>
<h4 data-id="heading-25">7.2 å·¥å…·é›†æˆ</h4>
<p><strong>1. Linté™æ€æ£€æŸ¥</strong>:</p>
<pre><code class="hljs language-gradle" lang="gradle">android {
    lintOptions {
        // å°†è­¦å‘Šæå‡ä¸ºé”™è¯¯
        warningsAsErrors true

        // å¯ç”¨ç©ºæŒ‡é’ˆæ£€æŸ¥
        check 'NullPointer'

        // æ£€æŸ¥èµ„æºæ³„æ¼
        check 'Recycle'

        // ç”ŸæˆHTMLæŠ¥å‘Š
        htmlReport true
        htmlOutput file("$project.buildDir/reports/lint-results.html")
    }
}
</code></pre>
<p><strong>2. FindBugs/SpotBugs</strong>:</p>
<pre><code class="hljs language-gradle" lang="gradle">plugins {
    id 'com.github.spotbugs' version '5.0.13'
}

spotbugs {
    effort = 'max'
    reportLevel = 'low'
}

tasks.withType(com.github.spotbugs.snom.SpotBugsTask) {
    reports {
        html.enabled = true
        xml.enabled = false
    }
}
</code></pre>
<p><strong>3. StrictModeå¼€å‘æ—¶æ£€æŸ¥</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplication</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Application</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">super</span>.onCreate();

        <span class="hljs-keyword">if</span> (BuildConfig.DEBUG) {
            <span class="hljs-comment">// æ£€æµ‹ä¸»çº¿ç¨‹ä¸Šçš„è€—æ—¶æ“ä½œ</span>
            StrictMode.setThreadPolicy(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StrictMode</span>.ThreadPolicy.Builder()
                .detectDiskReads()
                .detectDiskWrites()
                .detectNetwork()
                .penaltyLog()
                .build());

            <span class="hljs-comment">// æ£€æµ‹å†…å­˜æ³„æ¼</span>
            StrictMode.setVmPolicy(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StrictMode</span>.VmPolicy.Builder()
                .detectLeakedSqlLiteObjects()
                .detectLeakedClosableObjects()
                .detectActivityLeaks()
                .penaltyLog()
                .build());
        }
    }
}
</code></pre>
<h4 data-id="heading-26">7.3 ç›‘æ§é¢„è­¦</h4>
<p><strong>1. Crashç‡ç›‘æ§</strong>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CrashMonitorService</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> <span class="hljs-variable">CRASH_RATE_THRESHOLD</span> <span class="hljs-operator">=</span> <span class="hljs-number">0.02f</span>;  <span class="hljs-comment">// 2%</span>

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkCrashRate</span><span class="hljs-params">()</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">totalUsers</span> <span class="hljs-operator">=</span> getTotalActiveUsers();
        <span class="hljs-type">int</span> <span class="hljs-variable">crashedUsers</span> <span class="hljs-operator">=</span> getCrashedUsers();

        <span class="hljs-type">float</span> <span class="hljs-variable">crashRate</span> <span class="hljs-operator">=</span> (<span class="hljs-type">float</span>) crashedUsers / totalUsers;

        <span class="hljs-keyword">if</span> (crashRate &gt; CRASH_RATE_THRESHOLD) {
            <span class="hljs-comment">// è§¦å‘å‘Šè­¦</span>
            alertOps(<span class="hljs-string">"Crash rate exceeded threshold: "</span> + crashRate);
        }
    }
}
</code></pre>
<p><strong>2. å¼‚å¸¸èšåˆåˆ†æ</strong>:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># crash_aggregator.py - å¼‚å¸¸èšåˆè„šæœ¬</span>

<span class="hljs-keyword">import</span> re
<span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> Counter

<span class="hljs-keyword">def</span> <span class="hljs-title function_">aggregate_crashes</span>(<span class="hljs-params">log_dir</span>):
    <span class="hljs-string">"""èšåˆç›¸åŒroot causeçš„å¼‚å¸¸"""</span>
    crashes = []

    <span class="hljs-keyword">for</span> log_file <span class="hljs-keyword">in</span> os.listdir(log_dir):
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(os.path.join(log_dir, log_file)) <span class="hljs-keyword">as</span> f:
            content = f.read()

            <span class="hljs-comment"># æå–å¼‚å¸¸ç±»å‹å’Œå´©æºƒç‚¹</span>
            exception_type = re.search(<span class="hljs-string">r'(java\.lang\.\w+Exception)'</span>, content)
            crash_location = re.search(<span class="hljs-string">r'at ([\w\.]+)\(([\w\.]+):(\d+)\)'</span>, content)

            <span class="hljs-keyword">if</span> exception_type <span class="hljs-keyword">and</span> crash_location:
                key = <span class="hljs-string">f"<span class="hljs-subst">{exception_type.group(<span class="hljs-number">1</span>)}</span>@<span class="hljs-subst">{crash_location.group(<span class="hljs-number">1</span>)}</span>"</span>
                crashes.append(key)

    <span class="hljs-comment"># ç»Ÿè®¡å¹¶æ’åº</span>
    counter = Counter(crashes)
    <span class="hljs-keyword">for</span> crash_type, count <span class="hljs-keyword">in</span> counter.most_common(<span class="hljs-number">10</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{crash_type}</span>: <span class="hljs-subst">{count}</span> times"</span>)

aggregate_crashes(<span class="hljs-string">"/path/to/dropbox_logs"</span>)
</code></pre>
<p><strong>è¾“å‡ºç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-text" lang="text">NullPointerException@CarPropertyManager.getProperty: 42 times
IndexOutOfBoundsException@RecyclerView.onBindViewHolder: 15 times
ClassCastException@MainActivity.handleMessage: 8 times
</code></pre>
<p><strong>3. è‡ªåŠ¨åŒ–å‘Šè­¦</strong>:</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># prometheus_alert_rules.yml</span>

<span class="hljs-attr">groups:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">app_crash_alerts</span>
    <span class="hljs-attr">rules:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">HighCrashRate</span>
        <span class="hljs-attr">expr:</span> <span class="hljs-string">app_crash_rate</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">0.02</span>
        <span class="hljs-attr">for:</span> <span class="hljs-string">5m</span>
        <span class="hljs-attr">labels:</span>
          <span class="hljs-attr">severity:</span> <span class="hljs-string">critical</span>
        <span class="hljs-attr">annotations:</span>
          <span class="hljs-attr">summary:</span> <span class="hljs-string">"App crash rate is too high"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"Crash rate is <span class="hljs-template-variable">{{ $value }}</span>, exceeds 2% threshold"</span>

      <span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">NewCrashType</span>
        <span class="hljs-attr">expr:</span> <span class="hljs-string">increase(app_crash_types[1h])</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">0</span>
        <span class="hljs-attr">labels:</span>
          <span class="hljs-attr">severity:</span> <span class="hljs-string">warning</span>
        <span class="hljs-attr">annotations:</span>
          <span class="hljs-attr">summary:</span> <span class="hljs-string">"New crash type detected"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"A new type of crash appeared in the last hour"</span>
</code></pre>
<hr/>
<h3 data-id="heading-27">å…«ã€æ€»ç»“</h3>
<p>é€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ,ä½ åº”è¯¥å·²ç»æŒæ¡äº†Javaå¼‚å¸¸åˆ†æçš„å®Œæ•´æ–¹æ³•è®ºã€‚è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹æ ¸å¿ƒè¦ç‚¹:</p>
<p><strong>çŸ¥è¯†ä½“ç³»</strong>:</p>
<ol>
<li>âœ… Javaå¼‚å¸¸ä½“ç³» (Error/Exception/Checked/Unchecked)</li>
<li>âœ… Androidå¼‚å¸¸å¤„ç†æœºåˆ¶ (UncaughtExceptionHandler/AMS/DropBox)</li>
<li>âœ… JEæ—¥å¿—ç»“æ„ (è¿›ç¨‹ä¿¡æ¯/å¼‚å¸¸æ ˆ/é“¾å¼å¼‚å¸¸)</li>
</ol>
<p><strong>å·¥å…·æŠ€èƒ½</strong>:</p>
<ol>
<li>âœ… Logcatå®æ—¶ç›‘æ§ (è¿‡æ»¤æŠ€å·§/æ­£åˆ™æœç´¢/è¾“å‡ºåˆ°æ–‡ä»¶)</li>
<li>âœ… DropBoxæ—¥å¿—åˆ†æ (æå–æ—¥å¿—/æ‰¹é‡åˆ†æ/ç»Ÿè®¡èšåˆ)</li>
<li>âœ… MATå†…å­˜åˆ†æ (Histogram/Dominator Tree/OQLæŸ¥è¯¢)</li>
</ol>
<p><strong>å®æˆ˜èƒ½åŠ›</strong>:</p>
<ol>
<li>âœ… å¿«é€Ÿå®šä½é—®é¢˜æ ¹å›  (æ—¥å¿—åˆ†æâ†’æºç è¿½è¸ªâ†’æ ¹å› ç¡®è®¤)</li>
<li>âœ… ä»£ç ä¿®å¤ä¸é˜²å¾¡ (ç©ºæŒ‡é’ˆæ£€æŸ¥/å¼‚å¸¸å¤„ç†/é»˜è®¤å€¼)</li>
<li>âœ… éªŒè¯ä¸é¢„é˜² (å•å…ƒæµ‹è¯•/Lintæ£€æŸ¥/ç›‘æ§å‘Šè­¦)</li>
</ol>
<p><strong>Javaå¼‚å¸¸ vs Native Crashå¯¹æ¯”</strong>:</p>



































<table><thead><tr><th align="left">ç»´åº¦</th><th align="left">Javaå¼‚å¸¸</th><th align="left">Native Crash</th></tr></thead><tbody><tr><td align="left">è°ƒè¯•éš¾åº¦</td><td align="left">â­â­ è¾ƒç®€å•</td><td align="left">â­â­â­â­â­ éå¸¸å›°éš¾</td></tr><tr><td align="left">å †æ ˆä¿¡æ¯</td><td align="left">å®Œæ•´çš„Javaè°ƒç”¨æ ˆ</td><td align="left">æœºå™¨ç åœ°å€,éœ€ç¬¦å·åŒ–</td></tr><tr><td align="left">å¸¸ç”¨å·¥å…·</td><td align="left">Logcat, DropBox, MAT</td><td align="left">addr2line, ndk-stack, gdb</td></tr><tr><td align="left">ä¸»è¦åŸå› </td><td align="left">NPE, è¶Šç•Œ, ç±»å‹è½¬æ¢</td><td align="left">å†…å­˜è®¿é—®é”™è¯¯, ä¿¡å·å¼‚å¸¸</td></tr><tr><td align="left">å½±å“èŒƒå›´</td><td align="left">é€šå¸¸å±€é™äºå•ä¸ªåŠŸèƒ½</td><td align="left">å¯èƒ½å¯¼è‡´è¿›ç¨‹å´©æºƒ</td></tr></tbody></table>
<h3 data-id="heading-28">ç›¸å…³æ–‡ç« </h3>
<ul>
<li><a href="https://juejin.cn/post/7589477775210577972" target="_blank" title="https://juejin.cn/post/7589477775210577972">ä¸Šä¸€ç¯‡: ç¨³å®šæ€§æ€§èƒ½ç³»åˆ—ä¹‹äº”â€”â€”Native Crashæ·±åº¦åˆ†æ:å·¥å…·å®æˆ˜</a></li>
<li><a href="https://juejin.cn/post/7587473691170095104" target="_blank" title="https://juejin.cn/post/7587473691170095104">ç³»åˆ—ç›®å½•: Androidç³»ç»Ÿç¨³å®šæ€§ä¸æ€§èƒ½ä¼˜åŒ–</a></li>
</ul>
<hr/>
<blockquote>
<p><strong>ä½œè€…ç®€ä»‹</strong>: å¤šå¹´Androidç³»ç»Ÿå¼€å‘ç»éªŒ,ä¸“æ³¨äºç³»ç»Ÿç¨³å®šæ€§ä¸æ€§èƒ½ä¼˜åŒ–é¢†åŸŸã€‚æ¬¢è¿å…³æ³¨æœ¬ç³»åˆ—,ä¸€èµ·æ·±å…¥Androidç³»ç»Ÿçš„ç²¾å½©ä¸–ç•Œ!</p>
</blockquote>
<hr/>
<h4 data-id="heading-29">ğŸ‰ æ„Ÿè°¢å…³æ³¨,è®©æˆ‘ä»¬ä¸€èµ·æ·±å…¥Androidç³»ç»Ÿçš„ç²¾å½©ä¸–ç•Œ!</h4>
<h4 data-id="heading-30"><strong>æ‰¾åˆ°æˆ‘</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a></h4></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[DaggeræŠ€æœ¯çš„ä½¿ç”¨å­¦ä¹ ]]></title>    <link>https://juejin.cn/post/7589920318132420608</link>    <guid>https://juejin.cn/post/7589920318132420608</guid>    <pubDate>2026-01-01T04:13:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589920318132420608" data-draft-id="7589920318132355072" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="DaggeræŠ€æœ¯çš„ä½¿ç”¨å­¦ä¹ "/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-01T04:13:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ttyyttemo"/> <meta itemprop="url" content="https://juejin.cn/user/1711256884752541"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            DaggeræŠ€æœ¯çš„ä½¿ç”¨å­¦ä¹ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1711256884752541/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ttyyttemo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T04:13:13.000Z" title="Thu Jan 01 2026 04:13:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœºæ™¯æ˜¯å‡è®¾ï¼šæˆ‘ä»¬æœ‰ä¸€ä¸ª LoginActivityï¼Œéœ€è¦ä¸€ä¸ª LoginViewModelï¼Œå®ƒåˆä¾èµ– UserRepositoryï¼ŒUserRepository å†ä¾èµ–ä¸€ä¸ª ApiServiceï¼ˆç½‘ç»œè¯·æ±‚ï¼‰ã€‚</p>
<h3 data-id="heading-0">1. ä¸šåŠ¡å±‚ç±»ï¼šApiServiceã€UserRepositoryã€LoginViewModel</h3>
<h4 data-id="heading-1">1.1 ApiServiceï¼ˆç¬¬ä¸‰æ–¹/ç½‘ç»œå°è£…ç±»ï¼Œé€šå¸¸ä¸èƒ½ç›´æ¥ @Inject æ„é€ ï¼‰</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// ApiService.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ApiService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> baseUrl;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ApiService</span><span class="hljs-params">(<span class="hljs-type">String</span> baseUrl)</span> </span>{
        <span class="hljs-keyword">this</span>.baseUrl = baseUrl;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title">login</span><span class="hljs-params">(<span class="hljs-type">String</span> username, <span class="hljs-type">String</span> password)</span> </span>{
        <span class="hljs-comment">// å‡è£…è¿™é‡Œå‘ç½‘ç»œè¯·æ±‚</span>
        System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"Request to "</span> + baseUrl + <span class="hljs-string">" login: "</span> + username);
        <span class="hljs-comment">// ç®€åŒ–èµ·è§ç›´æ¥è¿”å› true</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<p>é€è¡Œè¯´æ˜ï¼š</p>
<ul>
<li>
<p><code>public class ApiService {</code><br/>
å®šä¹‰ä¸€ä¸ªæ™®é€šçš„ Java ç±»ï¼Œä»£è¡¨ç½‘ç»œå±‚å°è£…ã€‚</p>
</li>
<li>
<p><code>private final String baseUrl;</code><br/>
ç”¨äºä¿å­˜æ¥å£åŸŸåã€‚</p>
</li>
<li>
<p><code>public ApiService(String baseUrl) { ... }</code><br/>
æ„é€ å‡½æ•°éœ€è¦ä¸€ä¸ª <code>baseUrl</code> å‚æ•°ï¼Œè¿™ä¸ªåœ¨é¡¹ç›®ä¸­å¸¸å¸¸æ¥è‡ªé…ç½®æˆ– BuildConfigã€‚<br/>
æ³¨æ„ï¼šæˆ‘ä»¬<strong>æ²¡æœ‰</strong>åŠ  <code>@Inject</code>ï¼Œå› ä¸ºå¾€å¾€è¿™ä¸ªç±»æ¥è‡ªä¸‰æ–¹åº“æˆ–æ¯”è¾ƒé€šç”¨ï¼Œä¹ æƒ¯ç”¨ Module æä¾›ã€‚</p>
</li>
<li>
<p><code>public boolean login(...) { ... }</code><br/>
ä¸€ä¸ªæ¨¡æ‹Ÿç™»å½•æ–¹æ³•ï¼Œè¿™é‡Œåªæ˜¯æ‰“å°æ—¥å¿—å¹¶è¿”å› <code>true</code>ã€‚</p>
</li>
</ul>
<h4 data-id="heading-2">1.2 UserRepositoryï¼ˆå¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥ï¼‰</h4>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// UserRepository.java</span>
<span class="hljs-keyword">import</span> javax.inject.Inject;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserRepository</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ApiService apiService;

    @<span class="hljs-function">Inject
    <span class="hljs-keyword">public</span> <span class="hljs-title">UserRepository</span><span class="hljs-params">(ApiService apiService)</span> </span>{
        <span class="hljs-keyword">this</span>.apiService = apiService;
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title">login</span><span class="hljs-params">(<span class="hljs-type">String</span> username, <span class="hljs-type">String</span> password)</span> </span>{
        <span class="hljs-comment">// ä¸šåŠ¡ä»“åº“å±‚ï¼ŒæŠŠç½‘ç»œè°ƒç”¨ç»„ç»‡åœ¨ä¸€èµ·</span>
        <span class="hljs-keyword">return</span> apiService.<span class="hljs-built_in">login</span>(username, password);
    }
}


</code></pre>
<p>é€è¡Œè¯´æ˜ï¼š</p>
<p>import javax.inject.Inject;
å¼•å…¥ JSR-330 æ ‡å‡†çš„ @Inject æ³¨è§£ï¼ˆDagger æ”¯æŒï¼‰ã€‚</p>
<p>public class UserRepository {
ä»“åº“å±‚ï¼Œå°è£…æ•°æ®è®¿é—®ï¼ˆç½‘ç»œã€æœ¬åœ°ç¼“å­˜ç­‰ï¼‰ã€‚</p>
<p>private final ApiService apiService;
ä¾èµ– ApiServiceã€‚</p>
<p>@Inject
æ ‡è®°è¿™ä¸ªæ„é€ å‡½æ•°æ˜¯ Dagger å¯ç”¨çš„â€œæ³¨å…¥ç‚¹â€ï¼š
Dagger çŸ¥é“å¦‚æœæœ‰äººéœ€è¦ UserRepositoryï¼Œè¦ç”¨è¿™ä¸ªæ„é€ å‡½æ•°æ¥åˆ›å»ºï¼ŒåŒæ—¶è‡ªåŠ¨æ³¨å…¥ ApiServiceã€‚</p>
<p>public UserRepository(ApiService apiService) { ... }
æ„é€ å‡½æ•°ä¾èµ– ApiServiceï¼ŒDagger ä¼šä»ä¾èµ–å›¾ä¸­æ‰¾åˆ°å¯¹åº”çš„æä¾›æ–¹å¼ã€‚</p>
<p>public boolean login(...) { ... }
å¯¹å¤–æš´éœ²ä¸šåŠ¡æ–¹æ³•ï¼Œå†…éƒ¨ä½¿ç”¨ apiService.login(...)ã€‚</p>
<h4 data-id="heading-3">1.3 LoginViewModelï¼ˆåŒæ ·ç”¨æ„é€ å‡½æ•°æ³¨å…¥ï¼‰</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// LoginViewModel.java</span>
<span class="hljs-keyword">import</span> javax.inject.Inject;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginViewModel</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserRepository userRepository;

    <span class="hljs-meta">@Inject</span>
    <span class="hljs-keyword">public</span> LoginViewModel(UserRepository userRepository) {
        <span class="hljs-keyword">this</span>.userRepository = userRepository;
    }

    <span class="hljs-keyword">public</span> boolean performLogin(String username, String password) {
        <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œåšä¸€äº›æ ¡éªŒã€çŠ¶æ€ç®¡ç†ç­‰</span>
        <span class="hljs-keyword">if</span> (username == <span class="hljs-literal">null</span> || username.isEmpty()) {
            System.<span class="hljs-keyword">out</span>.println(<span class="hljs-string">"Username empty"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">return</span> userRepository.login(username, password);
    }
}


</code></pre>
<p>é€è¡Œè¯´æ˜ï¼š</p>
<p>public class LoginViewModel {
è¡¨ç¤ºé¡µé¢é€»è¾‘å±‚ï¼ˆè¿™é‡Œä¸ç”¨ AndroidX ViewModelï¼Œä¸ºäº†ç¤ºä¾‹ç®€å•ï¼‰ã€‚</p>
<p>private final UserRepository userRepository;
ä¾èµ–ä»“åº“å±‚ã€‚</p>
<p>@Inject + æ„é€ å‡½æ•°
å‘Šè¯‰ Daggerï¼šå¦‚æœæœ‰äººéœ€è¦ LoginViewModelï¼Œå°±ç”¨è¿™ä¸ªæ„é€ å‡½æ•°ï¼Œå¹¶ä»ä¾èµ–å›¾ä¸­æ³¨å…¥ä¸€ä¸ª UserRepositoryã€‚</p>
<p>performLogin(...)
é¡µé¢é€»è¾‘ï¼šè¿›è¡Œç®€å•æ ¡éªŒåï¼Œè°ƒç”¨ä»“åº“å±‚å®Œæˆç™»å½•ã€‚</p>
<h3 data-id="heading-4">2. Dagger Moduleï¼šæä¾› ApiService</h3>
<p>å› ä¸º ApiService æ„é€ å‡½æ•°éœ€è¦ baseUrlï¼Œæˆ‘ä»¬å¸Œæœ›ç»Ÿä¸€åœ¨ä¸€ä¸ªåœ°æ–¹é…ç½®å®ƒï¼Œç”¨ Dagger çš„ @Module + @Providesã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// NetworkModule.java</span>
<span class="hljs-keyword">import</span> dagger.<span class="hljs-property">Module</span>;
<span class="hljs-keyword">import</span> dagger.<span class="hljs-property">Provides</span>;

<span class="hljs-keyword">import</span> javax.<span class="hljs-property">inject</span>.<span class="hljs-property">Singleton</span>;

<span class="hljs-meta">@Module</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NetworkModule</span> {

    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">String</span> baseUrl;

    <span class="hljs-keyword">public</span> <span class="hljs-title class_">NetworkModule</span>(<span class="hljs-title class_">String</span> baseUrl) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseUrl</span> = baseUrl;
    }

    <span class="hljs-meta">@Singleton</span>
    <span class="hljs-meta">@Provides</span>
    <span class="hljs-title class_">ApiService</span> <span class="hljs-title function_">provideApiService</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiService</span>(baseUrl);
    }
}


</code></pre>
<p>é€è¡Œè¯´æ˜ï¼š</p>
<p>@Module
å£°æ˜è¿™æ˜¯ä¸€ä¸ª Dagger Moduleï¼Œé‡Œé¢çš„æ–¹æ³•ä¼šç”¨äºæä¾›ä¾èµ–å¯¹è±¡ã€‚</p>
<p>public class NetworkModule {
å®šä¹‰ç½‘ç»œç›¸å…³çš„ä¾èµ–æä¾›æ¨¡å—ã€‚</p>
<p>private final String baseUrl; + æ„é€ å‡½æ•°
æ¨¡å—æœ¬èº«ä¹Ÿå¯ä»¥æœ‰æ„é€ å‡½æ•°ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨åˆ›å»º Component æ—¶å¯ä»¥ä¼ å…¥ä¸åŒçš„é…ç½®ï¼ˆä¾‹å¦‚æµ‹è¯•ç¯å¢ƒã€ç”Ÿäº§ç¯å¢ƒç”¨ä¸åŒ baseUrlï¼‰ã€‚</p>
<p>@Singleton
å£°æ˜æœ¬æ–¹æ³•äº§ç”Ÿçš„å¯¹è±¡åœ¨è¯¥ Component ç”Ÿå‘½å‘¨æœŸå†…ä¸ºå•ä¾‹ã€‚</p>
<p>@Provides
å‘Šè¯‰ Daggerï¼šè¿™æ˜¯ä¸€ä¸ªâ€œæä¾›å‡½æ•°ï¼ˆProviderï¼‰â€ï¼Œç”¨æ¥åˆ›å»º ApiService å®ä¾‹ã€‚</p>
<p>ApiService provideApiService() { return new ApiService(baseUrl); }
å®é™…åˆ›å»º ApiServiceï¼›Dagger ä¼šåœ¨æœ‰äººéœ€è¦ ApiService æ—¶è°ƒç”¨æ­¤æ–¹æ³•ã€‚</p>
<h3 data-id="heading-5">3. Dagger Componentï¼šç»„è£…æ•´ä¸ªä¾èµ–å›¾</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// AppComponent.java</span>
<span class="hljs-keyword">import</span> javax.inject.Singleton;

<span class="hljs-keyword">import</span> dagger.Component;

<span class="hljs-meta">@Singleton</span>
<span class="hljs-meta">@Component(modules = { NetworkModule.class })</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">AppComponent</span> {

    <span class="hljs-comment">// æš´éœ²ä¸€ä¸ªæ–¹æ³•ï¼šç”¨äºç»™ LoginActivity æ³¨å…¥å­—æ®µ</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">inject</span><span class="hljs-params">(LoginActivity activity)</span>;

    <span class="hljs-comment">// ä¹Ÿå¯ä»¥é€‰æ‹©æš´éœ²æŸäº›ä¾èµ–ï¼ˆå¯é€‰ï¼‰</span>
    LoginViewModel <span class="hljs-title function_">loginViewModel</span><span class="hljs-params">()</span>;
}


</code></pre>
<p>é€è¡Œè¯´æ˜ï¼š</p>
<p>@Singleton
å£°æ˜æ•´ä¸ª Component çš„ä½œç”¨åŸŸæ˜¯å•ä¾‹ï¼›é…åˆ Module ä¸­çš„ @Singletonï¼Œå¯ä»¥ä¿è¯ ApiService ç­‰æ˜¯åœ¨åŒä¸€å›¾ä¸­å•ä¾‹ã€‚</p>
<p>@Component(modules = { NetworkModule.class })
å‘Šè¯‰ Daggerï¼šè¿™ä¸ª Component ä¾èµ–å“ªäº› Module æ¥æä¾›å¯¹è±¡ã€‚
è¿™é‡ŒæŒ‡å®š NetworkModuleï¼Œè®© Dagger çŸ¥é“ ApiService æ€ä¹ˆåˆ›å»ºã€‚</p>
<p>public interface AppComponent { ... }
Component é€šå¸¸æ˜¯ä¸€ä¸ªæ¥å£ï¼ŒDagger ä¼šåœ¨ç¼–è¯‘æœŸç”Ÿæˆå®ç°ç±» DaggerAppComponentã€‚</p>
<p>void inject(LoginActivity activity);
å£°æ˜ä¸€ä¸ªâ€œæ³¨å…¥æ–¹æ³•â€ï¼šè¡¨ç¤º Dagger æœ‰èƒ½åŠ›ç»™ LoginActivity ä¸­æ ‡è®°äº† @Inject çš„å­—æ®µè¿›è¡Œèµ‹å€¼ã€‚</p>
<p>LoginViewModel loginViewModel();
å¯é€‰ï¼šç›´æ¥ä» Component è·å–æŸä¸ªå¯¹è±¡å®ä¾‹ï¼Œæ­¤å¤„è·å– LoginViewModelã€‚</p>
<h3 data-id="heading-6">4. Android å±‚ï¼šLoginActivity ä½¿ç”¨ Dagger æ³¨å…¥</h3>
<pre><code class="hljs language-scala" lang="scala"><span class="hljs-comment">// LoginActivity.java</span>
<span class="hljs-keyword">import</span> android.os.<span class="hljs-type">Bundle</span>;
<span class="hljs-keyword">import</span> androidx.annotation.<span class="hljs-type">Nullable</span>;
<span class="hljs-keyword">import</span> androidx.appcompat.app.<span class="hljs-type">AppCompatActivity</span>;

<span class="hljs-keyword">import</span> javax.inject.<span class="hljs-type">Inject</span>;

public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span> </span>{

    <span class="hljs-meta">@Inject</span>
    <span class="hljs-type">LoginViewModel</span> loginViewModel;

    <span class="hljs-keyword">private</span> <span class="hljs-type">AppComponent</span> appComponent;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> void onCreate(<span class="hljs-meta">@Nullable</span> <span class="hljs-type">Bundle</span> savedInstanceState) {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);

        <span class="hljs-comment">// 1. æ„å»º AppComponent</span>
        appComponent = <span class="hljs-type">DaggerAppComponent</span>
                .builder()
                .networkModule(<span class="hljs-keyword">new</span> <span class="hljs-type">NetworkModule</span>(<span class="hljs-string">"https://api.example.com"</span>))
                .build();

        <span class="hljs-comment">// 2. å¯¹å½“å‰ Activity è¿›è¡Œä¾èµ–æ³¨å…¥</span>
        appComponent.inject(<span class="hljs-keyword">this</span>);

        <span class="hljs-comment">// 3. ä½¿ç”¨æ³¨å…¥å¥½çš„ loginViewModel</span>
        boolean success = loginViewModel.performLogin(<span class="hljs-string">"alice"</span>, <span class="hljs-string">"123456"</span>);

        <span class="hljs-type">System</span>.out.println(<span class="hljs-string">"Login result: "</span> + success);
    }
}

</code></pre>
<p>é€è¡Œè¯´æ˜ï¼š</p>
<p>public class LoginActivity extends AppCompatActivity {
æ ‡å‡† Android Activityã€‚</p>
<p>@Inject LoginViewModel loginViewModel;
è¿™é‡Œæ˜¯å­—æ®µæ³¨å…¥ï¼šè¡¨ç¤º loginViewModel çš„å®ä¾‹ç”± Dagger æ¥æä¾›ã€‚
æ³¨æ„ï¼šæ­¤æ—¶è¿˜æ²¡æœ‰å€¼ï¼Œåªæœ‰åœ¨æ‰§è¡Œ appComponent.inject(this); ä¹‹åæ‰ä¼šè¢«èµ‹å€¼ã€‚</p>
<p>private AppComponent appComponent;
ä¿å­˜ä¸€ä¸ª AppComponent å¼•ç”¨ï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨ã€‚</p>
<p>onCreate(...) æ˜¯ Activity ç”Ÿå‘½å‘¨æœŸå…¥å£ã€‚</p>
<h4 data-id="heading-7">onCreate å†…éƒ¨ï¼š</h4>
<h5 data-id="heading-8">1.æ„å»º AppComponent</h5>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">appComponent</span> = DaggerAppComponent
        .builder()
        .networkModule(new NetworkModule("https://api.example.com"))
        .build()<span class="hljs-comment">;</span>

</code></pre>
<p>DaggerAppComponent
è¿™æ˜¯ Dagger ç¼–è¯‘æœŸè‡ªåŠ¨ç”Ÿæˆçš„ç±»åï¼ˆè§„åˆ™ï¼šå‰é¢åŠ  Dagger å‰ç¼€ï¼‰ã€‚</p>
<p>.builder()
ä½¿ç”¨ Builder æ¨¡å¼æ„å»º Componentã€‚</p>
<p>.networkModule(...)
è¿™é‡Œç»™ Component è®¾ç½® NetworkModuleï¼Œä¼ å…¥ baseUrlã€‚
Dagger çŸ¥é“ AppComponent éœ€è¦ä¸€ä¸ªç±»å‹ä¸º NetworkModule çš„æ¨¡å—å®ä¾‹ã€‚</p>
<p>.build()
å®Œæˆ Component å®ä¾‹æ„å»ºï¼Œå†…éƒ¨ä¼šåˆå§‹åŒ–ä¾èµ–å›¾ã€‚</p>
<h5 data-id="heading-9">2.å¯¹ Activity æ³¨å…¥</h5>
<pre><code class="hljs language-kotlin" lang="kotlin">appComponent.inject(<span class="hljs-keyword">this</span>);

</code></pre>
<p>è°ƒç”¨æˆ‘ä»¬åœ¨ AppComponent æ¥å£ä¸­å®šä¹‰çš„ inject(LoginActivity activity)ã€‚</p>
<p>Dagger ä¼šæ‰«æ LoginActivity ä¸­æ ‡è®°äº† @Inject çš„å­—æ®µï¼ˆè¿™é‡Œæ˜¯ loginViewModelï¼‰ï¼Œå¹¶æ ¹æ®ä¾èµ–å›¾å®ä¾‹åŒ– LoginViewModelï¼š</p>
<p>ä¸º LoginViewModel çš„æ„é€ å‡½æ•°æ³¨å…¥ UserRepositoryã€‚</p>
<p>ä¸º UserRepository çš„æ„é€ å‡½æ•°æ³¨å…¥ ApiServiceã€‚</p>
<p>ä¸º ApiService è°ƒç”¨ NetworkModule.provideApiService() åˆ›å»ºå®ä¾‹ã€‚</p>
<p>æœ€ç»ˆæŠŠç»„è£…å¥½çš„ LoginViewModel èµ‹å€¼ç»™ loginViewModel å­—æ®µã€‚</p>
<h5 data-id="heading-10">3.ä½¿ç”¨æ³¨å…¥ç»“æœ</h5>
<pre><code class="hljs language-ini" lang="ini">boolean <span class="hljs-attr">success</span> = loginViewModel.performLogin(<span class="hljs-string">"alice"</span>, <span class="hljs-string">"123456"</span>)<span class="hljs-comment">;</span>

</code></pre>
<p>æ­¤æ—¶ loginViewModel å·²ç»æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚</p>
<p>åç»­è¯¥ ViewModel å†…éƒ¨è°ƒç”¨ Repositoryï¼ŒRepository è°ƒç”¨ ApiServiceï¼Œæ•´æ¡ä¾èµ–é“¾éƒ½ç”± Dagger ç®¡ç†ã€‚</p>
<h2 data-id="heading-11">5. æµç¨‹æ€»ç»“ï¼ˆä»éœ€æ±‚åˆ°å¯¹è±¡çš„å½¢æˆï¼‰</h2>
<p>ä»¥ LoginActivity æƒ³è¦ä½¿ç”¨ LoginViewModel ä¸ºä¸»çº¿ï¼š</p>
<p>Activity å£°æ˜éœ€è¦ LoginViewModelï¼ˆå­—æ®µ @Inject LoginViewModel loginViewModel;ï¼‰ã€‚</p>
<p>é€šè¿‡ DaggerAppComponent.builder().networkModule(...).build() æ„å»ºä¾èµ–å›¾ã€‚</p>
<p>è°ƒç”¨ appComponent.inject(this)ï¼š</p>
<p>Dagger å‘ç°éœ€è¦ä¸º LoginActivity.loginViewModel æä¾›å®ä¾‹ï¼›</p>
<p>æŸ¥çœ‹ LoginViewModel æ„é€ å‡½æ•°æœ‰ @Injectï¼Œéœ€è¦ UserRepositoryï¼›</p>
<p>æ‰¾åˆ° UserRepository æ„é€ å‡½æ•° @Injectï¼Œéœ€è¦ ApiServiceï¼›</p>
<p>å‘ç° ApiService æ²¡æœ‰ @Inject æ„é€ å‡½æ•°ï¼Œä½†æœ‰ä¸€ä¸ª @Provides ApiService provideApiService()ï¼›</p>
<p>è°ƒç”¨ NetworkModule.provideApiService() å¾—åˆ° ApiServiceï¼›</p>
<p>ç»„è£…å‡º UserRepositoryã€LoginViewModelï¼Œæœ€åæŠŠ loginViewModel èµ‹ç»™ Activity å­—æ®µã€‚</p>
<p>å…¨ç¨‹ä¸éœ€è¦åœ¨ Activity ä¸­å†™ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">ApiService <span class="hljs-attr">api</span> = new ApiService(<span class="hljs-string">"..."</span>)<span class="hljs-comment">;</span>
UserRepository <span class="hljs-attr">repo</span> = new UserRepository(api)<span class="hljs-comment">;</span>
LoginViewModel <span class="hljs-attr">vm</span> = new LoginViewModel(repo)<span class="hljs-comment">;</span>

</code></pre>
<p>è€Œæ˜¯å®Œå…¨ç”± Dagger ç®¡ç†å¯¹è±¡åˆ›å»ºå’Œä¾èµ–å…³ç³»ã€‚</p>
<p>å…³é”®å°±æ˜¯ç†æ¸…ä¸ªå¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœ¬åœ°å¤§æ¨¡å‹ç¼–ç¨‹å®æˆ˜(39)MCPå®æˆ˜æ¼”ç»ƒ]]></title>    <link>https://juejin.cn/post/7589916567875452970</link>    <guid>https://juejin.cn/post/7589916567875452970</guid>    <pubDate>2026-01-01T03:36:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589916567875452970" data-draft-id="7589893746080350249" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœ¬åœ°å¤§æ¨¡å‹ç¼–ç¨‹å®æˆ˜(39)MCPå®æˆ˜æ¼”ç»ƒ"/> <meta itemprop="keywords" content="åç«¯,äººå·¥æ™ºèƒ½,MCP"/> <meta itemprop="datePublished" content="2026-01-01T03:36:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ˜ç«‹å†›"/> <meta itemprop="url" content="https://juejin.cn/user/2830599308981642"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœ¬åœ°å¤§æ¨¡å‹ç¼–ç¨‹å®æˆ˜(39)MCPå®æˆ˜æ¼”ç»ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2830599308981642/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ˜ç«‹å†›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T03:36:23.000Z" title="Thu Jan 01 2026 03:36:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¹‹å‰ä¸¤ç¯‡æ–‡ç« :<a href="https://link.juejin.cn?target=http%3A%2F%2Fwfcoding.com%2Farticles%2Fprogrammer%2Fp08%2F" target="_blank" title="http://wfcoding.com/articles/programmer/p08/" ref="nofollow noopener noreferrer">MCPç®€ä»‹</a>å’Œ<a href="https://link.juejin.cn?target=http%3A%2F%2Fwfcoding.com%2Farticles%2Fprogrammer%2Fp09%2F" target="_blank" title="http://wfcoding.com/articles/programmer/p09/" ref="nofollow noopener noreferrer">MCPèƒ½åšä»€ä¹ˆ</a>é˜è¿°äº†MCPçš„åŸºæœ¬æ¦‚å¿µå’ŒåŸç†ã€‚<br/>
æœ¬æ–‡å°†ä½¿ç”¨<code>Visual Studio Code</code>å†™ä¸€ä¸ª<code>MCPæœåŠ¡ç«¯</code>å’Œ<code>MCPå®¢æˆ·ç«¯</code>ï¼Œæ¼”ç¤º<strong>MCP</strong>çš„åŸºæœ¬åŠŸèƒ½ã€‚</p>
<blockquote>
<p>MCPç‰ˆæœ¬è¿­ä»£å¾ˆå¿«ï¼Œèƒ½ç”¨æŠŠä»£ç é¡ºåˆ©è·‘èµ·æ¥å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹ï¼šï¼‰</p>
</blockquote>
<h2 data-id="heading-0">å‡†å¤‡è¿è¡Œç¯å¢ƒ</h2>
<ul>
<li>Windows 10</li>
<li>Visual studio code 1.104.3</li>
<li>python 3.12.3</li>
<li>mcp 1.16.0</li>
</ul>
<ol>
<li>åˆ›å»º venv è™šæ‹Ÿç¯å¢ƒ</li>
</ol>
<p>å‚è§ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fwfcoding.com%2Farticles%2Fpractice%2F0101%25E5%259C%25A8visual_studio_code%25E4%25B8%25AD%25E9%2585%258D%25E7%25BD%25AEvenv%2F" target="_blank" title="http://wfcoding.com/articles/practice/0101%E5%9C%A8visual_studio_code%E4%B8%AD%E9%85%8D%E7%BD%AEvenv/" ref="nofollow noopener noreferrer">åœ¨Visual Studio Codeä¸­é…ç½®venv</a></p>
<ol start="2">
<li>å®‰è£… mcp</li>
</ol>
<p>æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ(windows)ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">.venv\Scripts\activate
</code></pre>
<p>å®‰è£…mcp</p>
<pre><code class="hljs language-bash" lang="bash">pip install mcp
</code></pre>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmodelcontextprotocol%2Fpython-sdk" target="_blank" title="https://github.com/modelcontextprotocol/python-sdk" ref="nofollow noopener noreferrer">MCPä»£ç ä»“åº“</a>æ¨èä½¿ç”¨ <code>uv</code> å·¥å…·ç®¡ç†åŒ…ã€‚ç”±äºæˆ‘ä¹‹å‰ä¸€ç›´ç”¨ <code>pip</code> ç®¡ç†åŒ…ï¼Œè§‰å¾—å†ç”¨ <code>uv</code> æ¯”è¾ƒéº»çƒ¦ï¼Œæ‰€ä»¥æ²¡æœ‰å®‰è£…å®ƒã€‚</p>
</blockquote>
<h2 data-id="heading-1">æ„å»ºMCPæœåŠ¡ç«¯</h2>
<p>ä¸‹é¢çš„ç¨‹åºä½¿ç”¨ <code>FastMCP</code> æ„å»ºäº†ä¸€ä¸ªå¸¦æœ‰ <code>å·¥å…·/tool</code>ã€<code>èµ„æº/resource</code>å’Œ<code>æç¤ºè¯æ¨¡æ¿/prompt</code> çš„MCPæœåŠ¡ç«¯ã€‚<br/>
æœ¬æ¬¡çš„æœåŠ¡ä½¿ç”¨ <code>æ ‡å‡†è¾“å…¥è¾“å‡º/Stdio</code> æ–¹å¼å¯¹å®¢æˆ·ç«¯æä¾›æœåŠ¡ï¼Œè¿™æ ·MCPå®¢æˆ·ç«¯åŠ è½½è¿™ä¸ªMCPæœåŠ¡ç«¯å°±èƒ½å®Œæˆå®ƒä»¬çš„é€šä¿¡ï¼Œè°ƒè¯•èµ·æ¥æ¯”è¾ƒæ–¹ä¾¿ã€‚å½“ç„¶ï¼ŒMCPæœåŠ¡ç«¯ä¹Ÿå¯ä»¥ä½¿ç”¨<code>HTTP</code>ï¼ˆæ”¯æŒæµå¼ä¼ è¾“ï¼‰çš„æ–¹å¼å‘è¿œç«¯MCPå®¢æˆ·ç«¯æä¾›æœåŠ¡ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> mcp.server.fastmcp <span class="hljs-keyword">import</span> FastMCP

<span class="hljs-comment"># Create an MCP server</span>
mcp = FastMCP(<span class="hljs-string">"Demo MCP Server"</span>)

<span class="hljs-comment"># Add an addition tool</span>
<span class="hljs-meta">@mcp.tool()</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">int</span>, b: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:
    <span class="hljs-string">"""Add two numbers"""</span>
    <span class="hljs-keyword">return</span> a + b


<span class="hljs-comment"># Add a dynamic greeting resource</span>
<span class="hljs-meta">@mcp.resource(<span class="hljs-params"><span class="hljs-string">"greeting://{name}"</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_greeting</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""Get a personalized greeting"""</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Hello, <span class="hljs-subst">{name}</span>!"</span>


<span class="hljs-comment"># Add a prompt</span>
<span class="hljs-meta">@mcp.prompt()</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet_user</span>(<span class="hljs-params">name: <span class="hljs-built_in">str</span>, style: <span class="hljs-built_in">str</span> = <span class="hljs-string">"friendly"</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""Generate a greeting prompt"""</span>
    styles = {
        <span class="hljs-string">"friendly"</span>: <span class="hljs-string">"Please write a warm, friendly greeting"</span>,
        <span class="hljs-string">"formal"</span>: <span class="hljs-string">"Please write a formal, professional greeting"</span>,
        <span class="hljs-string">"casual"</span>: <span class="hljs-string">"Please write a casual, relaxed greeting"</span>,
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{styles.get(style, styles[<span class="hljs-string">'friendly'</span>])}</span> for someone named <span class="hljs-subst">{name}</span>."</span>   

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-comment"># Initialize and run the server</span>
    mcp.run(transport=<span class="hljs-string">'stdio'</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<blockquote>
<p>ç”±äºæ²¡æœ‰å®‰è£… <code>nv</code> å·¥å…·ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ç”¨<code>mcp.run(transport='stdio')</code>æ˜ç¡®å¯åŠ¨mcpæœåŠ¡ç«¯ï¼Œä¼ è¾“æ–¹å¼é‡‡ç”¨ <code>stdio</code> ã€‚</p>
</blockquote>
<h2 data-id="heading-2">æ„å»ºMCPå®¢æˆ·ç«¯</h2>
<p>ä¸‹é¢çš„MCPå®¢æˆ·ç«¯å°†è°ƒç”¨MCPæœåŠ¡ç«¯ï¼Œæµ‹è¯•  <code>å·¥å…·/tool</code>ã€<code>èµ„æº/resource</code>å’Œ<code>æç¤ºè¯æ¨¡æ¿/prompt</code> ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> os

<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> AnyUrl

<span class="hljs-keyword">from</span> mcp <span class="hljs-keyword">import</span> ClientSession, StdioServerParameters, types
<span class="hljs-keyword">from</span> mcp.client.stdio <span class="hljs-keyword">import</span> stdio_client

<span class="hljs-comment"># è·å–å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„</span>
current_dir = os.path.dirname(os.path.abspath(__file__))
<span class="hljs-built_in">print</span>(current_dir)
server_path = os.path.join(current_dir, <span class="hljs-string">"fastmcp_server.py"</span>)

<span class="hljs-comment"># Create server parameters for stdio connection</span>
server_params = StdioServerParameters(
    command=<span class="hljs-string">"python"</span>,
    args=[server_path], 
    env=<span class="hljs-literal">None</span>,
)

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">run</span>():
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> stdio_client(server_params) <span class="hljs-keyword">as</span> (read, write):
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> ClientSession(read, write) <span class="hljs-keyword">as</span> session:
            <span class="hljs-comment"># Initialize the connection</span>
            <span class="hljs-keyword">await</span> session.initialize()

            <span class="hljs-comment"># List available tools</span>
            tools = <span class="hljs-keyword">await</span> session.list_tools()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Available tools: <span class="hljs-subst">{[t.name <span class="hljs-keyword">for</span> t <span class="hljs-keyword">in</span> tools.tools]}</span>"</span>)

            <span class="hljs-comment"># Call a tool</span>
            result = <span class="hljs-keyword">await</span> session.call_tool(<span class="hljs-string">"add"</span>, arguments={<span class="hljs-string">"a"</span>: <span class="hljs-number">5</span>, <span class="hljs-string">"b"</span>: <span class="hljs-number">3</span>})
            result_unstructured = result.content[<span class="hljs-number">0</span>]
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(result_unstructured, types.TextContent):
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Tool result: <span class="hljs-subst">{result_unstructured.text}</span>"</span>)
            result_structured = result.structuredContent
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Structured tool result: <span class="hljs-subst">{result_structured}</span>"</span>)

            <span class="hljs-comment"># List available resources</span>
            resources = <span class="hljs-keyword">await</span> session.list_resources()  <span class="hljs-comment"># it doesn't work!</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Available resources: <span class="hljs-subst">{[r.uri <span class="hljs-keyword">for</span> r <span class="hljs-keyword">in</span> resources.resources]}</span>"</span>)

            <span class="hljs-comment"># Read a resource</span>
            resource_content = <span class="hljs-keyword">await</span> session.read_resource(AnyUrl(<span class="hljs-string">"greeting://World"</span>))
            content_block = resource_content.contents[<span class="hljs-number">0</span>]
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(content_block, types.TextResourceContents):
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Resource content: <span class="hljs-subst">{content_block.text}</span>"</span>)

            <span class="hljs-comment"># List available prompts</span>
            prompts = <span class="hljs-keyword">await</span> session.list_prompts()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Available prompts: <span class="hljs-subst">{[p.name <span class="hljs-keyword">for</span> p <span class="hljs-keyword">in</span> prompts.prompts]}</span>"</span>)

            <span class="hljs-comment"># Get a prompt</span>
            <span class="hljs-keyword">if</span> prompts.prompts:
                prompt = <span class="hljs-keyword">await</span> session.get_prompt(<span class="hljs-string">"greet_user"</span>, arguments={<span class="hljs-string">"name"</span>: <span class="hljs-string">"Alice"</span>, <span class="hljs-string">"style"</span>: <span class="hljs-string">"friendly"</span>})
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Prompt result: <span class="hljs-subst">{prompt.messages[<span class="hljs-number">0</span>].content}</span>"</span>)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-string">"""Entry point for the client script."""</span>
    asyncio.run(run())

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<p>ç”±äºæ²¡æœ‰ä½¿ç”¨<strong>nv</strong>ï¼Œè¿è¡ŒMCPæœåŠ¡ç«¯å’ŒMCPå®¢æˆ·ç«¯è¦å¤šå†™ä¸€äº›ä»£ç ï¼Œè€Œå®¢æˆ·ç«¯çœ‹èµ·æ¥æ›´å¤æ‚ä¸€ç‚¹ã€‚</p>
<p><strong>è¯·æ³¨æ„</strong>ï¼š</p>
<ul>
<li><strong>ä½¿ç”¨MCPæœåŠ¡ç«¯çš„å‡†ç¡®åœ°å€</strong>ï¼šä½¿ç”¨ç»å¯¹è·¯å¾„æ˜¯æ¯”è¾ƒç¨³å¦¥çš„æ–¹æ³•ï¼Œå¦åˆ™å¯èƒ½å› ä¸ºMCPå®¢æˆ·ç«¯åŠ è½½MCPæœåŠ¡ç«¯å¤±è´¥ã€‚</li>
<li><strong>session.list_resourcesè¿”å›ç©º</strong>ï¼šä¸çŸ¥é“ä¸ºä»€ä¹ˆæ— æ³•è¿”å›MCPæœåŠ¡ç«¯çš„èµ„æºï¼Œè€Œç›´æ¥è°ƒç”¨æœåŠ¡ç«¯çš„èµ„æºå´æ²¡é—®é¢˜ã€‚</li>
</ul>
<h2 data-id="heading-3">è¿è¡Œä»£ç </h2>
<p>åœ¨ <code>Visual Studio Code</code> ä¸­è¿è¡ŒMCPå®¢æˆ·ç«¯ä»£ç å³å¯ï¼Œå®¢æˆ·ç«¯ä¼šåœ¨å¯åŠ¨æ—¶åŠ è½½MCPæœåŠ¡ç«¯ã€‚</p>
<pre><code class="hljs language-text" lang="text">Available tools: ['add']
Tool result: 8
Structured tool result: {'result': 8}
Available resources: []
Resource content: Hello, World!
Available prompts: ['greet_user']
Prompt result: type='text' text='Please write a warm, friendly greeting for someone named Alice.' annotations=None meta=None
</code></pre>
<h2 data-id="heading-4">æ€»ç»“</h2>
<p>ä»¥ä¸Šæ¼”ç¤ºäº†MCPæœåŠ¡ç«¯å’ŒMCPå®¢æˆ·ç«¯çš„åŸºæœ¬åŠŸèƒ½ã€‚å¯¹äºå®é™…çš„é¡¹ç›®å·¥ç¨‹æ¥è¯´ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå°å°çš„å¼€å§‹ï¼Œä½†æ˜¯åœ¨ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¿™ç§ç®€å•çš„å®æˆ˜æ¼”ç»ƒå¯¹â€œæ›´æ·±å…¥çš„ç†è§£æ¦‚å¿µå’ŒæŠ€æœ¯â€ä¼šå¤§æœ‰å¸®åŠ©ã€‚</p>
<hr/>
<h2 data-id="heading-5">ä»£ç </h2>
<p>æœ¬æ–‡æ¶‰åŠçš„æ‰€æœ‰ä»£ç ä»¥åŠç›¸å…³èµ„æºéƒ½å·²ç»å…±äº«ï¼Œå‚è§ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fliupras%2FPractical-local-LLM-programming" target="_blank" title="https://github.com/liupras/Practical-local-LLM-programming" ref="nofollow noopener noreferrer">github</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fliupras%2Fprogramming-with-local-large-language-model" target="_blank" title="https://gitee.com/liupras/programming-with-local-large-language-model" ref="nofollow noopener noreferrer">gitee</a></li>
</ul>
<blockquote>
<p>ä¸ºä¾¿äºæ‰¾åˆ°ä»£ç ï¼Œç¨‹åºæ–‡ä»¶åç§°æœ€å‰é¢çš„ç¼–å·ä¸æœ¬ç³»åˆ—æ–‡ç« çš„æ–‡æ¡£ç¼–å·ç›¸åŒã€‚</p>
</blockquote>
<p>ğŸªæ„Ÿè°¢æ‚¨è§‚çœ‹ï¼Œç¥å¥½è¿ğŸª</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[[è™šæ‹Ÿç¯å¢ƒ]venvå·¥å…·(å®æˆ˜)]]></title>    <link>https://juejin.cn/post/7589893746080317481</link>    <guid>https://juejin.cn/post/7589893746080317481</guid>    <pubDate>2026-01-01T03:30:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589893746080317481" data-draft-id="7589838742552182803" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="[è™šæ‹Ÿç¯å¢ƒ]venvå·¥å…·(å®æˆ˜)"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-01-01T03:30:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="import_random"/> <meta itemprop="url" content="https://juejin.cn/user/2013961033882312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            [è™šæ‹Ÿç¯å¢ƒ]venvå·¥å…·(å®æˆ˜)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2013961033882312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    import_random
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T03:30:58.000Z" title="Thu Jan 01 2026 03:30:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å…³äºè™šæ‹Ÿç¯å¢ƒçš„åˆ›å»ºä¸é¡¹ç›®ç»‘å®šï¼Œæ²¡æœ‰ç»å¯¹å”¯ä¸€çš„â€œæ­£ç¡®â€æ–¹å¼ï¼Œä½†æ ¹æ®Pythonç¤¾åŒºçš„æœ€ä½³å®è·µï¼Œ<strong>æ¨èå…ˆåˆ›å»ºé¡¹ç›®ç›®å½•ï¼Œç„¶ååœ¨é¡¹ç›®ç›®å½•å†…åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</strong>ã€‚</p>
<p>ä»¥ä¸‹æ˜¯è¯¦ç»†è§£é‡Šå’Œå¯¹æ¯”ï¼š</p>
<h2 data-id="heading-0">1/æ¨èæ–¹å¼ï¼šå…ˆåˆ›å»ºé¡¹ç›®ï¼Œååœ¨é¡¹ç›®å†…åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åˆ›å»ºé¡¹ç›®ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> my_project
<span class="hljs-built_in">cd</span> my_project

<span class="hljs-comment"># 2. åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span>
python -m venv venv_vir_test1  <span class="hljs-comment"># æˆ– .venv_vir_test1</span>

<span class="hljs-comment"># 3. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span>
<span class="hljs-comment"># Windows:</span>
venv_vir_test1\Scripts\activate
<span class="hljs-comment"># macOS/Linux:</span>
<span class="hljs-built_in">source</span> venv_vir_test1/bin/activate

<span class="hljs-comment"># 4. å¼€å§‹å¼€å‘ï¼Œå®‰è£…ä¾èµ–ç­‰</span>
</code></pre>
<h3 data-id="heading-1"><strong>ä¼˜ç‚¹ï¼š</strong></h3>
<ol>
<li><strong>é¡¹ç›®è‡ªåŒ…å«</strong> - è™šæ‹Ÿç¯å¢ƒä¸é¡¹ç›®ä»£ç åœ¨åŒä¸€ç›®å½•ç»“æ„ä¸‹</li>
<li><strong>ä¾¿äºç‰ˆæœ¬æ§åˆ¶</strong> - å¯å°† <code>.gitignore</code> æ·»åŠ  <code>venv/</code> æˆ– <code>.venv/</code></li>
<li><strong>æ˜“äºè¯†åˆ«</strong> - æ‰“å¼€é¡¹ç›®å°±çŸ¥é“æœ‰å¯¹åº”çš„è™šæ‹Ÿç¯å¢ƒ</li>
<li><strong>è·¯å¾„ç®€å•</strong> - æ¿€æ´»å‘½ä»¤ç›¸å¯¹ç®€å•ï¼Œæ— éœ€è®°ç»å¯¹è·¯å¾„</li>
<li><strong>ä¾¿äºç®¡ç†</strong> - åˆ é™¤é¡¹ç›®æ—¶ï¼Œè™šæ‹Ÿç¯å¢ƒä¸€å¹¶åˆ é™¤ï¼Œä¸ä¼šç•™ä¸‹å­¤å„¿ç¯å¢ƒ</li>
</ol>
<h2 data-id="heading-2">2/å¦ä¸€ç§æ–¹å¼ï¼šå…ˆåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œåå…³è”é¡¹ç›®</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åœ¨æŸä¸ªé›†ä¸­ä½ç½®åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span>
python -m venv ~/venvs/my_project_env

<span class="hljs-comment"># 2. åˆ›å»ºé¡¹ç›®ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> ~/projects/my_project
<span class="hljs-built_in">cd</span> ~/projects/my_project

<span class="hljs-comment"># 3. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆéœ€è¦å®Œæ•´è·¯å¾„ï¼‰</span>
<span class="hljs-built_in">source</span> ~/venvs/my_project_env/bin/activate
</code></pre>
<h3 data-id="heading-3"><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></h3>
<ul>
<li>éœ€è¦åœ¨å¤šä¸ªé¡¹ç›®é—´<strong>å…±äº«</strong>åŒä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒ</li>
<li>ä½¿ç”¨å·¥å…·å¦‚ <code>virtualenvwrapper</code> æˆ– <code>pipenv</code> ç®¡ç†ç¯å¢ƒ</li>
<li>ç£ç›˜ç©ºé—´ç´§å¼ ï¼Œå¸Œæœ›è™šæ‹Ÿç¯å¢ƒé›†ä¸­å­˜å‚¨</li>
</ul>
<h2 data-id="heading-4">3/å®é™…å·¥ä½œæµç¨‹å»ºè®®</h2>
<h3 data-id="heading-5"><strong>ä½¿ç”¨é¡¹ç›®å†…è™šæ‹Ÿç¯å¢ƒçš„æ ‡å‡†æµç¨‹ï¼š</strong></h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åˆ›å»ºé¡¹ç›®ç»“æ„</span>
my_project/
â”œâ”€â”€ .gitignore      <span class="hljs-comment"># å¿½ç•¥ venv/</span>
â”œâ”€â”€ requirements.txt <span class="hljs-comment"># é¡¹ç›®ä¾èµ–</span>
â”œâ”€â”€ src/           <span class="hljs-comment"># æºä»£ç </span>
â””â”€â”€ venv/          <span class="hljs-comment"># è™šæ‹Ÿç¯å¢ƒï¼ˆä¸æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶ï¼‰</span>

<span class="hljs-comment"># 2. åˆ›å»ºå¹¶æ¿€æ´»ç¯å¢ƒåï¼Œå®‰è£…ä¾èµ–</span>
pip install -r requirements.txt
</code></pre>
<h3 data-id="heading-6"><strong>è‡ªåŠ¨åŒ–æ¿€æ´»çš„æç¤º</strong></h3>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>.envrc</code>ï¼ˆä½¿ç”¨direnvï¼‰æˆ–é…ç½®IDEï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># VS Code ä¼šè‡ªåŠ¨æ£€æµ‹é¡¹ç›®ä¸­çš„ .venv æˆ– venv ç›®å½•</span>
<span class="hljs-comment"># PyCharm: File â†’ Settings â†’ Project â†’ Python Interpreter â†’ é€‰æ‹© venv/python.exe</span>
</code></pre>
<h2 data-id="heading-7">4/æ€»ç»“å»ºè®®</h2>



































<table><thead><tr><th>æ–¹é¢</th><th>é¡¹ç›®å†…è™šæ‹Ÿç¯å¢ƒ</th><th>é›†ä¸­å¼è™šæ‹Ÿç¯å¢ƒ</th></tr></thead><tbody><tr><td><strong>åˆå­¦è€…å‹å¥½åº¦</strong></td><td>â­â­â­â­â­</td><td>â­â­</td></tr><tr><td><strong>é¡¹ç›®ç®¡ç†</strong></td><td>â­â­â­â­â­</td><td>â­â­</td></tr><tr><td><strong>å¤šé¡¹ç›®å…±äº«</strong></td><td>ä¸é€‚åˆ</td><td>â­â­â­â­</td></tr><tr><td><strong>å›¢é˜Ÿåä½œ</strong></td><td>â­â­â­â­â­</td><td>â­â­</td></tr><tr><td><strong>IDEæ”¯æŒ</strong></td><td>è‡ªåŠ¨æ£€æµ‹</td><td>éœ€æ‰‹åŠ¨é…ç½®</td></tr></tbody></table>
<p><strong>æ¨èä½¿ç”¨é¡¹ç›®å†…è™šæ‹Ÿç¯å¢ƒ</strong>ï¼Œç‰¹åˆ«æ˜¯ï¼š</p>
<ul>
<li>ç‹¬ç«‹é¡¹ç›®å¼€å‘</li>
<li>å›¢é˜Ÿåä½œ</li>
<li>ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</li>
<li>éœ€è¦æ¸…æ™°çš„é¡¹ç›®è¾¹ç•Œ</li>
</ul>
<p><strong>ç‰¹æ®Šæƒ…å†µè€ƒè™‘é›†ä¸­å¼ç¯å¢ƒ</strong>ï¼š</p>
<ul>
<li>å¤šä¸ªç›¸ä¼¼é¡¹ç›®éœ€è¦ç›¸åŒç¯å¢ƒ</li>
<li>ä½¿ç”¨é«˜çº§è™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·</li>
<li>æœ‰ç‰¹æ®Šçš„ç®¡ç†éœ€æ±‚</li>
</ul>
<p>å¤§å¤šæ•°Pythonæ•™ç¨‹ã€æ–‡æ¡£å’Œå·¥å…·ï¼ˆå¦‚Djangoã€Flaskçš„å®˜æ–¹æŒ‡å—ï¼‰éƒ½é»˜è®¤æ¨èé¡¹ç›®å†…è™šæ‹Ÿç¯å¢ƒçš„æ–¹å¼ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI æœªæ¥å±•æœ›ï¼š2026 å¹´å€¼å¾—å…³æ³¨çš„ä¸ƒå¤§è¶‹åŠ¿ï¼ˆåŸºäºå¾®è½¯è§†è§’ï¼‰]]></title>    <link>https://juejin.cn/post/7589907831198711834</link>    <guid>https://juejin.cn/post/7589907831198711834</guid>    <pubDate>2026-01-01T04:27:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589907831198711834" data-draft-id="7589839019717722162" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI æœªæ¥å±•æœ›ï¼š2026 å¹´å€¼å¾—å…³æ³¨çš„ä¸ƒå¤§è¶‹åŠ¿ï¼ˆåŸºäºå¾®è½¯è§†è§’ï¼‰"/> <meta itemprop="keywords" content="Agent,é‡å­è®¡ç®—"/> <meta itemprop="datePublished" content="2026-01-01T04:27:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©è¡Œæ— å¿Œ"/> <meta itemprop="url" content="https://juejin.cn/user/4406498333033918"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI æœªæ¥å±•æœ›ï¼š2026 å¹´å€¼å¾—å…³æ³¨çš„ä¸ƒå¤§è¶‹åŠ¿ï¼ˆåŸºäºå¾®è½¯è§†è§’ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4406498333033918/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©è¡Œæ— å¿Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T04:27:03.000Z" title="Thu Jan 01 2026 04:27:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0da636fbe8574b9a9d46f1749141edfc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp6KGM5peg5b-M:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767846422&amp;x-signature=c11Lasw4G7wdx5qhZXclYja9aH4%3D" alt="AI-æœªæ¥å±•æœ›ï¼š2026-å¹´å€¼å¾—å…³æ³¨çš„ä¸ƒå¤§è¶‹åŠ¿ï¼ˆåŸºäºå¾®è½¯è§†è§’ï¼‰.jpg" loading="lazy"/></p>
<p>é¦–å…ˆå‘æ‰€æœ‰è¯»è€…è‡´ä»¥æ–°å¹´é—®å€™ï¼</p>
<p>äººå·¥æ™ºèƒ½æ­£ç”±â€œå®éªŒæ€§å·¥å…·â€å‘â€œå¼ºå¤§åˆä½œä¼™ä¼´â€æ¼”è¿›ã€‚å½“ AI æ­£ä»"å®éªŒå·¥å…·"è½¬å˜ä¸º"å¼ºå¤§åˆä½œä¼™ä¼´"ï¼Œè¿™äº›å…³é”®è¶‹åŠ¿å°†å¡‘é€  2026 å¹´å·¥ä½œã€å¥åº·å’Œç§‘å­¦é¢†åŸŸçš„æœªæ¥èµ°å‘ã€‚</p>
<p>äººå·¥æ™ºèƒ½ï¼ˆAIï¼‰æ­£æ­¥å…¥ä¸€ä¸ªå…³é”®æ€§çš„æ–°é˜¶æ®µã€‚å†ç»å¤šå¹´çš„æŠ€æœ¯è§‰é†’ä¸å®éªŒæ€§éƒ¨ç½²ï¼Œå³å°†åˆ°æ¥çš„ 2026 å¹´å°†æˆä¸º AI ä»å•ä¸€â€œå·¥å…·â€å…¨é¢æ¼”åŒ–ä¸ºååŒâ€œä¼™ä¼´â€çš„è½¬æŠ˜ä¹‹å¹´ã€‚</p>
<h3 data-id="heading-0">1. äººæœºååŒèŒƒå¼çš„æ·±åŒ–ï¼šå¢å¼ºè€Œéæ›¿ä»£</h3>
<p>å¯¹ AI å–ä»£äººåŠ›çš„æ‹…å¿§å°†è¢«é‡å¡‘ã€‚2026 å¹´çš„æ ¸å¿ƒè¶‹åŠ¿åœ¨äºæ„å»ºçœŸæ­£æ„ä¹‰ä¸Šçš„äººä¸æŠ€æœ¯â€œåˆä½œä¼™ä¼´å…³ç³»â€ã€‚</p>
<p>å¾®è½¯ AI ä½“éªŒäº§å“è´Ÿè´£äºº Aparna Chennapragada è®¤ä¸ºï¼Œæœªæ¥åœ¨äºåˆ©ç”¨ AI â€œå¢å¼ºâ€äººç±»èƒ½åŠ›ã€‚AI æ™ºèƒ½ä½“å°†ä½œä¸ºâ€œæ•°å­—åŒ–åŒäº‹â€ï¼Œèµ‹èƒ½å°å‹å›¢é˜Ÿæ‰¿æ‹…ä»¥å¾€éš¾ä»¥ä¼åŠçš„å¤æ‚é¡¹ç›®ã€‚</p>
<p>è¯•æƒ³ä¸€ä¸ªä¸‰äººå›¢é˜Ÿåœ¨æ•°æ—¥å†…å‘èµ·å…¨çƒæ€§æ´»åŠ¨ï¼šAI è´Ÿè´£æ•°æ®å¤„ç†ã€å†…å®¹ç”Ÿæˆä¸ä¸ªæ€§åŒ–è§¦è¾¾ï¼Œäººç±»åˆ™èšç„¦äºæˆ˜ç•¥åˆ¶å®šä¸åˆ›æ„å†³ç­–ã€‚å…³é”®åœ¨äºæŒæ¡ä¸ AI ååŒå·¥ä½œçš„æŠ€èƒ½ï¼Œä»¥æ­¤æå‡è€Œéå‰Šå¼±äººç±»çš„æ ¸å¿ƒä»·å€¼ã€‚</p>
<p><strong>ç›¸å…³æŠ¥é“ï¼š</strong></p>
<ul>
<li><strong>AI æ™ºèƒ½ä½“ä½œä¸ºæ•°å­—åŒäº‹</strong>ï¼šå¾®è½¯å·²å®£å¸ƒå…¶ AI æ™ºèƒ½ä½“ï¼ˆå¦‚ Researcherã€Analystï¼‰å°†æˆä¸º Microsoft 365 Copilot ä¸­çš„â€œæ•°å­—åŒäº‹â€ï¼Œé‡æ–°å®šä¹‰å·¥ä½œæ–¹å¼ã€‚</li>
<li><strong>Agentic Web æ„¿æ™¯</strong>ï¼šå¾®è½¯çš„æ›´å¤§æ„¿æ™¯æ˜¯æ„å»ºä¸€ä¸ªç”± AI æ™ºèƒ½ä½“æ„æˆçš„â€œå¼€æ”¾å¼ä»£ç†ç½‘ç»œâ€ï¼Œæ¨ªè·¨ä¸ªäººä¸ç»„ç»‡ï¼Œé‡å¡‘è½¯ä»¶å¼€å‘ç”Ÿå‘½å‘¨æœŸ</li>
</ul>
<h3 data-id="heading-1">2. AI å®‰å…¨éŸ§æ€§æ¶æ„æˆä¸ºé›†æˆå‰æ</h3>
<p>éšç€ AI åŠ©æ‰‹æ·±åº¦èå…¥å·¥ä½œæµä»¥è¾…åŠ©å†³ç­–ä¸ä»»åŠ¡æ‰§è¡Œï¼Œå»ºç«‹â€œä¿¡ä»»â€æˆä¸ºå…³é”®ï¼Œè€Œå®‰å…¨æ˜¯è¿™ä¸€è¿›ç¨‹çš„åŸºçŸ³ã€‚</p>
<p>å¾®è½¯å®‰å…¨ä¸šåŠ¡å‰¯æ€»è£ Vasu Jakkal å¼ºè°ƒï¼Œâ€œæ¯ä¸ª AI ä»£ç†éƒ½åº”é…å¤‡ä¸äººç±»å¯¹ç­‰çš„å®‰å…¨ç®¡æ§æœºåˆ¶â€ï¼Œä»¥é˜²æ­¢å…¶æ¼”å˜ä¸ºä¸å—ç›‘ç®¡çš„é£é™©æºã€‚</p>
<p>è¿™æ„å‘³ç€ä¸ºæ¯ä¸ª AI å»ºç«‹æ˜ç¡®èº«ä»½æ ‡è¯†ã€å®æ–½ä¸¥æ ¼çš„æ•°æ®ä¸ç³»ç»Ÿè®¿é—®æƒé™æ§åˆ¶ï¼Œå¹¶å¯¹ AI è¾“å‡ºå†…å®¹è¿›è¡Œæ²»ç†ã€‚å®‰å…¨æ€§å°†ä¸å†æ˜¯äº‹åé™„åŠ é¡¹ï¼Œè€Œæ˜¯å†…ç”Ÿäºè‡ªåŠ¨åŒ–ç³»ç»Ÿçš„æ¶æ„æ ¸å¿ƒã€‚æ­¤å¤–ï¼Œå½“æ”»å‡»è€…é‡‡ç”¨æ–°å‹ AI æŠ€æœ¯æ—¶ï¼Œé˜²å¾¡æ–¹ä¹Ÿå°†éƒ¨ç½²â€œå®‰å…¨ä»£ç†â€ä»¥å®ç°æ›´å¿«é€Ÿçš„å¨èƒæ£€æµ‹ä¸å“åº”ã€‚</p>
<p><strong>ç›¸å…³æŠ¥é“ï¼š</strong></p>
<ul>
<li><strong>AI ä»£ç†çš„å®‰å…¨é˜²æŠ¤æœºåˆ¶</strong>ï¼šå¾®è½¯åœ¨ Windows 11 ä¸­ä¸º AI ä»£ç†æ„å»ºäº†â€œä»£ç†å·¥ä½œç©ºé—´â€æ ¸å¿ƒé˜²æŠ¤æœºåˆ¶ï¼ŒåŒ…æ‹¬ç‹¬ç«‹çš„å—é™è´¦æˆ·å’Œä¸¥æ ¼çš„è®¿é—®æ§åˆ¶ã€‚</li>
<li><strong>å®‰å…¨æ™ºèƒ½ä½“å®è·µ</strong>ï¼šMicrosoft Defender å·²æ¨å‡ºé¢å‘ AI æ™ºèƒ½ä½“çš„ç»Ÿä¸€å®‰å…¨æ€åŠ¿ç®¡ç†ï¼Œé€šè¿‡ä¸“ç”¨å®‰å…¨æ™ºèƒ½ä½“å‡å°‘â€œå½±å­æ™ºèƒ½ä½“â€é£é™©ã€‚</li>
</ul>
<h3 data-id="heading-2">3. AI å·²å‡†å¤‡å¥½ç¼©å°å…¨çƒåŒ»ç–—å¥åº·å·®è·</h3>
<p>åŒ»ç–— AI æ­£å¤„å…³é”®æ‹ç‚¹ï¼Œä»å®éªŒå®¤ç ”ç©¶è½¬å‘è§„æ¨¡åŒ–ç°å®åº”ç”¨ã€‚</p>
<p>æˆ‘ä»¬å°†è§è¯ AI è§’è‰²ä»ç–¾ç—…è¯Šæ–­ä¸“å®¶ï¼Œæ‰©å±•è‡³ç—‡çŠ¶åˆ†è¯Šã€æ²»ç–—æ–¹æ¡ˆè§„åˆ’ä¹ƒè‡³é¢„åç®¡ç†ç­‰å¤šä¸ªç¯èŠ‚ã€‚è¿™ä¸€æ¼”è¿›åœ¨å…¨çƒé¢ä¸´åŒ»æŠ¤äººå‘˜çŸ­ç¼ºï¼ˆä¸–å«ç»„ç»‡é¢„æµ‹ 2030 å¹´ç¼ºå£è¾¾ 1100 ä¸‡ï¼‰çš„èƒŒæ™¯ä¸‹å°¤ä¸ºé‡è¦ã€‚</p>
<h3 data-id="heading-3">4. AI æˆä¸ºé©±åŠ¨ç§‘å­¦ç ”ç©¶æ–°èŒƒå¼çš„æ ¸å¿ƒå¼•æ“</h3>
<p>AI å·²åœ¨æ°”å€™å»ºæ¨¡ã€ææ–™è®¾è®¡ç­‰é¢†åŸŸåŠ é€Ÿç§‘å­¦å‘ç°ï¼Œä½† 2026 å¹´å°†å®ç°ä¸€æ¬¡è´¨çš„é£è·ƒã€‚</p>
<p>AI å°†è¶…è¶Šæ–‡çŒ®æ€»ç»“ä¸é—®ç­”ï¼Œåœ¨ç‰©ç†ã€åŒ–å­¦ä¸ç”Ÿç‰©å­¦é¢†åŸŸâ€œæ·±åº¦å‚ä¸æ¢ç´¢æµç¨‹â€ã€‚å®ƒå°†èƒ½å¤Ÿè‡ªä¸»æå‡ºå‡è®¾ã€æ“æ§å®éªŒå·¥å…·ï¼Œå¹¶ä¸äººç±»ç ”ç©¶è€…ååŒè¿­ä»£ã€‚</p>
<p>ä¸€ä¸ªæ¯ä½ç§‘å­¦å®¶éƒ½é…å¤‡èƒ½æå‡ºæ–°å®éªŒå»ºè®®ã€ç”šè‡³æ‰§è¡Œéƒ¨åˆ†å®éªŒæ“ä½œçš„â€œAI å®éªŒå®¤åŠ©æ‰‹â€çš„æ—¶ä»£å³å°†æ¥ä¸´ï¼Œè¿™å°†æå¤§åŠ é€Ÿç§‘å­¦å‘ç°çš„è¿­ä»£å‘¨æœŸã€‚</p>
<h3 data-id="heading-4">5. äººå·¥æ™ºèƒ½åŸºç¡€è®¾æ–½å°†æ›´æ™ºèƒ½ã€æ›´é«˜æ•ˆ</h3>
<p>AI çš„å‘å±•å°†ä¸å†å•çº¯ä¾èµ–æ•°æ®ä¸­å¿ƒçš„æ•°é‡æ‰©å¼ ï¼Œè€Œæ˜¯é€šè¿‡æå‡è®¡ç®—æ•ˆç‡ï¼Œæœ€å¤§åŒ–æ¯å•ä½ç®—åŠ›çš„äº§å‡ºã€‚</p>
<p>æœ€å…ˆè¿›çš„ AI åŸºç¡€è®¾æ–½å°†èšç„¦äºåœ¨åˆ†å¸ƒå¼ç½‘ç»œä¸­æ™ºèƒ½æ±‡èšä¸è°ƒåº¦ç®—åŠ›ã€‚æˆ‘ä»¬å°†çœ‹åˆ°å…¨çƒäº’è”çš„ AI ç³»ç»Ÿå˜å¾—æ›´å…·å¼¹æ€§ï¼Œå½¢æˆæ–°ä¸€ä»£çš„ AI â€œè¶…çº§å·¥å‚â€</p>
<p>è®¾æƒ³ä¸€ä¸ª AI ä»»åŠ¡çš„â€œç©ºä¸­äº¤é€šç®¡åˆ¶ç³»ç»Ÿâ€ï¼šç®—åŠ›å°†è¢«åŠ¨æ€ã€å®æ—¶åœ°åˆ†é…ï¼Œç¡®ä¿é›¶é—²ç½®ã€‚ä¸€é¡¹ä»»åŠ¡éœ€æ±‚ä¸‹é™ï¼Œå…¶èµ„æºå¯è¢«ç¬é—´è°ƒåº¦è‡³å¦ä¸€ä»»åŠ¡ã€‚è¿™ç§è½¬å˜å°†å‚¬ç”Ÿå‡ºæ›´æ™ºèƒ½ã€å¯æŒç»­ä¸”é€‚åº”æ€§å¼ºçš„åŸºç¡€è®¾æ–½ã€‚</p>
<p><strong>ç›¸å…³æŠ¥é“ï¼š</strong></p>
<ul>
<li>AI è¶…çº§å·¥å‚æ¦‚å¿µï¼šå¾®è½¯ CEO çº³å¾·æ‹‰æå‡ºâ€œAI è¶…çº§å·¥å‚â€æ¦‚å¿µï¼Œæ—¨åœ¨è®©åˆ†å¸ƒå„åœ°çš„ GPU åƒä¸€æ¡ç”Ÿäº§çº¿ä¸€æ ·ååŒï¼Œé«˜æ•ˆè®­ç»ƒå’Œè¿è¡Œä¸‹ä¸€ä»£å¤§æ¨¡å‹ã€‚</li>
<li>GPU åŠ¨æ€èµ„æºè°ƒåº¦ï¼šäº‘åŸç”Ÿ AI åŸºç¡€è®¾æ–½å·²åœ¨æ¨è¿› GPU åŠ¨æ€èµ„æºé©±åŠ¨æŠ€æœ¯ï¼Œå®ç° GPU åƒ CPU ä¸€æ ·è¢«çµæ´»å…±äº«ä¸è°ƒåº¦ï¼Œæå‡ç®—åŠ›ç®¡ç†æ•ˆç‡ã€‚</li>
</ul>
<h3 data-id="heading-5">6. ä»ç†è§£è¯­æ³•åˆ°æ´å¯Ÿç³»ç»Ÿè„‰ç»œï¼šAI çš„ä»£ç ä»“åº“æ™ºèƒ½</h3>
<p>è½¯ä»¶å¼€å‘æ­£å‘ˆç°çˆ†ç‚¸å¼å¢é•¿ï¼Œè€Œ AI å·²æˆä¸ºæ„å»ºå’Œæ”¹è¿›è¿™äº›è½¯ä»¶çš„æ ¸å¿ƒé©±åŠ¨åŠ›ã€‚</p>
<p>è‡³ 2026 å¹´ï¼Œæˆ‘ä»¬å°†è¿›å…¥â€œä»£ç ä»“åº“æ™ºèƒ½â€æ—¶ä»£ã€‚è¿™æ„å‘³ç€ AI ä¸ä»…èƒ½è§£æå•è¡Œä»£ç çš„è¯­æ³•ï¼Œæ›´èƒ½æ·±åº¦ç†è§£ä»“åº“ä¸­æ‰€æœ‰ä»£ç çš„å…³è”æ€§ã€æ¼”è¿›å†å²åŠå®Œæ•´ä¸šåŠ¡â€œè¯­å¢ƒâ€ã€‚</p>
<p>è¿™ç§å¯¹ä¸Šä¸‹æ–‡çš„æ·±åº¦æ„ŸçŸ¥å°†ä½¿ AI èƒ½æä¾›æ›´ç²¾å‡†çš„ä»£ç å»ºè®®ã€æå‰æ•è·æ½œåœ¨ç¼ºé™·ã€å¹¶è‡ªåŠ¨æ‰§è¡Œé‡å¤æ€§ä¿®å¤ä»»åŠ¡ã€‚æœ€ç»ˆç»“æœæ˜¯äº§å‡ºæ›´é«˜å“è´¨çš„è½¯ä»¶ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨æ¿€çƒˆç«äº‰ä¸­åŠ é€Ÿåˆ›æ–°ã€‚</p>
<h3 data-id="heading-6">7. é‡å­è®¡ç®—è¿ˆå‘å®ç”¨åŒ–çš„å…³é”®çªç ´</h3>
<p>æ›¾ç»çœ‹ä¼¼ç§‘å¹»å°è¯´çš„é‡å­è®¡ç®—ï¼Œæ­£è¿›å…¥ä»¥"å¹´"è€Œé"åå¹´"ä¸ºå€’è®¡æ—¶çš„æ—¶ä»£â€”â€”é‡å­æœºå™¨å°†å¼€å§‹è§£å†³ç»å…¸è®¡ç®—æœºæ— æ³•ç ´è§£çš„é—®é¢˜ï¼ˆé‡å­ä¼˜åŠ¿ï¼‰ã€‚</p>
<p>å½“å‰çš„å…³é”®æ¼”è¿›åœ¨äºâ€œæ··åˆè®¡ç®—â€æ¨¡å¼çš„å…´èµ·ï¼Œå³é‡å­è®¡ç®—ã€äººå·¥æ™ºèƒ½ä¸ç»å…¸è¶…ç®—çš„ååŒã€‚AI è´Ÿè´£ä»æ•°æ®ä¸­æŒ–æ˜æ¨¡å¼ï¼Œè¶…ç®—å¤„ç†å¤§è§„æ¨¡æ¨¡æ‹Ÿï¼Œè€Œé‡å­è®¡ç®—åˆ™èƒ½æå¤§æå‡åˆ†å­ä¸ææ–™å»ºæ¨¡çš„ç²¾åº¦ä¸é€Ÿåº¦ã€‚</p>
<p>é‡å­æ¯”ç‰¹åœ¨ç¨³å®šæ€§ä¸çº é”™èƒ½åŠ›æ–¹é¢çš„çªç ´æ€§è¿›å±•ï¼Œæ­£ä¸ºå…·å¤‡å¤§è§„æ¨¡å¯ç”¨è®¡ç®—èƒ½åŠ›çš„é‡å­æœºå™¨é“ºå¹³é“è·¯ï¼Œè¿™å°†é©±åŠ¨ææ–™ç§‘å­¦ã€è¯ç‰©ç ”å‘ç­‰é¢†åŸŸçš„é©å‘½æ€§å‘ç°ã€‚</p>
<p><strong>ç›¸å…³æŠ¥é“ï¼š</strong></p>
<ul>
<li>é‡å­- AI-è¶…ç®—æ··åˆå¹³å°ï¼šIBM ä¸ AMD æ­£è”åˆå¼€å‘é‡å­ AI èåˆè®¡ç®—å¹³å°ï¼Œåˆ©ç”¨é‡å­è®¡ç®—æœºæ¨¡æ‹ŸåŸå­åˆ†å­ï¼ŒAI è¶…ç®—å¤„ç†å¤§æ•°æ®ï¼Œä»¥è§£å†³è¯ç‰©å‘ç°ç­‰å…³é”®é—®</li>
<li>é‡å­è®¡ç®—ä¸è¶…ç®—èåˆè¶‹åŠ¿ï¼šè¡Œä¸šé¢†è¢–é¢„æµ‹ï¼Œæœªæ¥æ‰€æœ‰è¶…çº§è®¡ç®—æœºéƒ½å°†èåˆé‡å­è®¡ç®—éƒ¨åˆ†ï¼Œå½¢æˆ GPUã€QPUï¼ˆé‡å­å¤„ç†å•å…ƒï¼‰å’Œ CPU ååŒçš„æ··åˆç³»ç»Ÿ</li>
</ul>
<h3 data-id="heading-7">æ€»ç»“</h3>
<p>è¿™ä¸ƒå¤§è¶‹åŠ¿æ¸…æ™°åœ°è¡¨æ˜ï¼Œåˆ° 2026 å¹´ï¼Œäººå·¥æ™ºèƒ½å°†ä¸å†æ˜¯ä¸€ç§å­¤ç«‹çš„æŠ€æœ¯ï¼Œè€Œæ˜¯ä¼šæ·±åº¦èå…¥æˆ‘ä»¬çš„å·¥ä½œæµç¨‹ã€ç ”ç©¶ä½“ç³»å’ŒåŸºç¡€è®¾æ–½ä¹‹ä¸­ã€‚æœªæ¥çš„å…³é”®ä¸åœ¨äºä¸äººå·¥æ™ºèƒ½ç«äº‰ï¼Œè€Œåœ¨äºæˆ‘ä»¬å¦‚ä½•é€‚åº”ã€å­¦ä¹ å¹¶ä¸ä¹‹ååŒï¼Œä»è€Œå…±åŒæ‹“å±•äººç±»èƒ½åŠ›çš„æ–°è¾¹ç•Œã€‚</p>
<p>å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnews.microsoft.com%2Fsource%2Ffeatures%2Fai%2Fwhats-next-in-ai-7-trends-to-watch-in-2026%2F" target="_blank" title="https://news.microsoft.com/source/features/ai/whats-next-in-ai-7-trends-to-watch-in-2026/" ref="nofollow noopener noreferrer">Whatâ€™s next in AI: 7 trends to watch in 2026</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Cursorè¿›é˜¶å®æˆ˜Â·03ã€‘å››å¤§æ¨¡å¼å®Œå…¨æŒ‡å—ï¼šAgent/Plan/Debug/Askçš„æ­£ç¡®æ‰“å¼€æ–¹å¼]]></title>    <link>https://juejin.cn/post/7589918470789169186</link>    <guid>https://juejin.cn/post/7589918470789169186</guid>    <pubDate>2026-01-01T04:29:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589918470789169186" data-draft-id="7589940913766481955" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Cursorè¿›é˜¶å®æˆ˜Â·03ã€‘å››å¤§æ¨¡å¼å®Œå…¨æŒ‡å—ï¼šAgent/Plan/Debug/Askçš„æ­£ç¡®æ‰“å¼€æ–¹å¼"/> <meta itemprop="keywords" content="Cursor,AIç¼–ç¨‹,LLM"/> <meta itemprop="datePublished" content="2026-01-01T04:29:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Cursorè¿›é˜¶å®æˆ˜Â·03ã€‘å››å¤§æ¨¡å¼å®Œå…¨æŒ‡å—ï¼šAgent/Plan/Debug/Askçš„æ­£ç¡®æ‰“å¼€æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T04:29:20.000Z" title="Thu Jan 01 2026 04:29:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»27åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€:ä½ å¯èƒ½ä¸€ç›´åœ¨ç”¨é”™Cursor</h2>
<p>å‘¨æœ«æ”¹ä¸ªåŠŸèƒ½,ç»™Cursoræè¿°éœ€æ±‚å,å®ƒç–¯ç‹‚ä¿®æ”¹äº†10ä¸ªæ–‡ä»¶,ç»“æœé¡¹ç›®è·‘ä¸èµ·æ¥äº†ã€‚å›æ»šä»£ç é‡æ¥,è¿™æ¬¡å°å¿ƒç¿¼ç¿¼åœ°é—®äº†ä¸ªç®€å•é—®é¢˜,å®ƒå´åªè®²ç†è®ºä¸å†™ä»£ç ã€‚</p>
<p>è¿™äº›åœºæ™¯æ˜¯å¦ä¼¼æ›¾ç›¸è¯†?</p>
<p><strong>åœºæ™¯1:Agentæ¨¡å¼æ”¹è¿‡å¤´</strong></p>
<blockquote>
<p>"å¸®æˆ‘åœ¨å¯¼èˆªæ æ·»åŠ ä¸€ä¸ªæœç´¢æ¡†"</p>
<p>ç»“æœ:AIé‡æ„äº†æ•´ä¸ªHeaderç»„ä»¶,è¿æ ·å¼æ–‡ä»¶éƒ½æ”¹äº†,åŸæœ¬çš„åŠŸèƒ½å…¨ä¹±å¥—äº†ã€‚</p>
</blockquote>
<p><strong>åœºæ™¯2:Askæ¨¡å¼ä¸å¹²æ´»</strong></p>
<blockquote>
<p>"å®ç°ä¸€ä¸ªç”¨æˆ·ç™»å½•åŠŸèƒ½"</p>
<p>ç»“æœ:AIå†™äº†1000å­—çš„æŠ€æœ¯æ–¹æ¡ˆå’Œå®‰å…¨å»ºè®®,ä½†å°±æ˜¯ä¸å†™ä»£ç ã€‚</p>
</blockquote>
<p><strong>åœºæ™¯3:å¤§éœ€æ±‚ç›´æ¥æ‰”ç»™Agent</strong></p>
<blockquote>
<p>"ç»™é¡¹ç›®æ·»åŠ å®Œæ•´çš„æƒé™ç³»ç»Ÿ"</p>
<p>ç»“æœ:AIçå†™ä¸€é€š,æ•°æ®åº“è¡¨è®¾è®¡æœ‰é—®é¢˜,å‰ç«¯é‰´æƒé€»è¾‘ä¹Ÿä¸å¯¹,è¿˜ä¸å¦‚è‡ªå·±å†™ã€‚</p>
</blockquote>
<p><strong>åœºæ™¯4:Bugæ‰¾ä¸åˆ°æ ¹å› </strong></p>
<blockquote>
<p>"ç”¨æˆ·å¶å°”ä¼šé‡åˆ°æ”¯ä»˜å¤±è´¥,ä½†æ—¥å¿—é‡Œæ²¡æœ‰å¼‚å¸¸"</p>
<p>ç»“æœ:ä¼ ç»Ÿè°ƒè¯•æ‰‹æ®µå¤±æ•ˆ,AIä¹Ÿåªèƒ½é çŒœ,é—®é¢˜å§‹ç»ˆå®šä½ä¸åˆ°ã€‚</p>
</blockquote>
<p><strong>é—®é¢˜å‡ºåœ¨å“ª?</strong></p>
<blockquote>
<p>"Cursorçš„4ç§æ¨¡å¼å°±åƒ4ç§ä¸åŒçš„æ­¦å™¨,ç”¨é”™äº†ä¸ä»…æ²¡æ•ˆæœ,è¿˜å¯èƒ½é€‚å¾—å…¶åã€‚"</p>
</blockquote>
<p>å¾ˆå¤šäººåªçŸ¥é“Cursorèƒ½"èŠå¤©å†™ä»£ç ",å´ä¸çŸ¥é“å®ƒæœ‰<strong>4ç§å®Œå…¨ä¸åŒçš„å·¥ä½œæ¨¡å¼</strong>,æ¯ç§æ¨¡å¼çš„æƒé™çº§åˆ«ã€é€‚ç”¨åœºæ™¯ã€å·¥ä½œæœºåˆ¶éƒ½ä¸ä¸€æ ·ã€‚</p>
<p><strong>æœ¬æ–‡ç›®æ ‡:</strong></p>
<ul>
<li>âœ… æ·±åº¦ç†è§£4ç§æ¨¡å¼çš„è®¾è®¡ç†å¿µå’Œå·¥ä½œåŸç†</li>
<li>âœ… æŒæ¡æ¯ç§æ¨¡å¼çš„æœ€ä½³é€‚ç”¨åœºæ™¯å’Œè¾¹ç•Œ</li>
<li>âœ… å­¦ä¼šé¿å¼€å¸¸è§çš„æ¨¡å¼è¯¯ç”¨é™·é˜±</li>
<li>âœ… æŒæ¡æ¨¡å¼ç»„åˆä½¿ç”¨çš„é«˜çº§æŠ€å·§</li>
</ul>
<h2 data-id="heading-1">æ¨¡å¼æ¦‚è§ˆ:4ç§æ¨¡å¼çš„æœ¬è´¨åŒºåˆ«</h2>
<h3 data-id="heading-2">å¿«é€Ÿå¯¹æ¯”:å››å¤§æ¨¡å¼çš„æ ¸å¿ƒå·®å¼‚</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf3d1ef6457b426588c5ee326a6cfbe1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767846559&amp;x-signature=sYlBp9hfCtQxjluZIpZvKrOAR4E%3D" alt="cursor03-å››å¤§æ¨¡å¼å¯¹æ¯”ä¿¡æ¯å›¾.png" loading="lazy"/></p>
<h3 data-id="heading-3">æƒé™çº§åˆ«:ä»åªè¯»åˆ°è‡ªä¸»æ‰§è¡Œ</h3>
<p>ç†è§£æ¨¡å¼çš„å…³é”®åœ¨äº<strong>æƒé™çº§åˆ«</strong>:</p>
<pre><code class="hljs language-rust" lang="rust">é«˜æƒé™ (å¯è‡ªä¸»ä¿®æ”¹ä»£ç )
â”œâ”€ Agent æ¨¡å¼: å®Œå…¨è‡ªä¸»,æ‰¹é‡ä¿®æ”¹
â””â”€ <span class="hljs-built_in">Debug</span> æ¨¡å¼: æ’å…¥æ—¥å¿—,ç²¾å‡†ä¿®å¤

ä¸­æƒé™ (éœ€è¦ç¡®è®¤åæ‰§è¡Œ)
â””â”€ Plan æ¨¡å¼: ç”Ÿæˆæ–¹æ¡ˆ,äººå·¥å®¡æ ¸

ä½æƒé™ (åªè¯»,ä¸ä¿®æ”¹)
â””â”€ Ask æ¨¡å¼: çº¯ç†è§£,å®‰å…¨æ¢ç´¢
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦æƒé™åˆ†çº§?</strong></p>
<ul>
<li><strong>Agentæƒé™å¤ªé«˜</strong>: å°å¿ƒç¿¼ç¿¼ç”¨äºå·²æ¸…æ™°çš„éœ€æ±‚</li>
<li><strong>Askæƒé™å¤ªä½</strong>: æ”¾å¿ƒå¤§èƒ†ç”¨äºæ¢ç´¢é™Œç”Ÿä»£ç </li>
<li><strong>Planä»‹äºä¸¤è€…</strong>: å¤§éœ€æ±‚å…ˆè§„åˆ’åæ‰§è¡Œ,å¯æ§æ€§é«˜</li>
<li><strong>Debugä¸“é¡¹èƒ½åŠ›</strong>: é’ˆå¯¹Bugçš„ç‰¹æ®Šå·¥ä½œæµ</li>
</ul>
<h3 data-id="heading-4">æ¨¡å¼é€‰æ‹©å†³ç­–æ ‘</h3>
<p>å½“ä½ æ‰“å¼€Cursor Chat,å¦‚ä½•å¿«é€Ÿé€‰æ‹©æ­£ç¡®çš„æ¨¡å¼?</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2af2a22897e4801a997be0a493d1ff5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767846559&amp;x-signature=mJ27M4F5Tn3md4BEcvjNW7PeCco%3D" alt="cursor03-æ¨¡å¼é€‰æ‹©å†³ç­–æ ‘.png" loading="lazy"/></p>

**å¿«é€Ÿåˆ¤æ–­æ³•åˆ™**: ä¸ç¡®å®šç”¨å“ªä¸ª?ä»ä½æƒé™å¼€å§‹(Ask)â†’ä¸­æƒé™(Plan)â†’é«˜æƒé™(Agent)ã€‚æƒé™å‡çº§å®¹æ˜“,é™çº§éš¾ã€‚

<h2 data-id="heading-5">Agentæ¨¡å¼:ä½ çš„è‡ªåŠ¨åŒ–å·¥ç¨‹åŠ©æ‰‹</h2>
<h3 data-id="heading-6">å·¥ä½œåŸç†:5æ­¥è‡ªä¸»æ‰§è¡Œ</h3>
<p>Agentæ¨¡å¼æ˜¯Cursoræœ€å¼ºå¤§çš„æ¨¡å¼,å®ƒçš„å·¥ä½œæµç¨‹:</p>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·éœ€æ±‚
   â†“
<span class="hljs-bullet">1.</span> ç†è§£éœ€æ±‚ â†’ åˆ†æé¡¹ç›®ä¸Šä¸‹æ–‡
   â†“
<span class="hljs-bullet">2.</span> åˆ¶å®šè®¡åˆ’ â†’ ç¡®å®šè¦ä¿®æ”¹å“ªäº›æ–‡ä»¶
   â†“
<span class="hljs-bullet">3.</span> æ¢ç´¢ä»£ç  â†’ æœç´¢ç›¸å…³å®ç°
   â†“
<span class="hljs-bullet">4.</span> æ‰§è¡Œä¿®æ”¹ â†’ æ‰¹é‡ä¿®æ”¹å¤šä¸ªæ–‡ä»¶
   â†“
<span class="hljs-bullet">5.</span> è‡ªä¸»éªŒè¯ â†’ æ£€æŸ¥è¯­æ³•å’Œé€»è¾‘
</code></pre>
<p><strong>å…³é”®ç‰¹ç‚¹</strong>:</p>
<ul>
<li>å¯ä»¥åŒæ—¶ä¿®æ”¹å¤šä¸ªæ–‡ä»¶</li>
<li>å¯ä»¥åˆ›å»ºæ–°æ–‡ä»¶å’Œç›®å½•</li>
<li>å¯ä»¥æ‰§è¡Œbashå‘½ä»¤</li>
<li>å¯ä»¥è‡ªä¸»æœç´¢å’Œåˆ†æä»£ç </li>
</ul>
<h3 data-id="heading-7">æœ€é€‚åˆçš„3ä¸ªåœºæ™¯</h3>
<h4 data-id="heading-8">åœºæ™¯1:è·¨æ–‡ä»¶åŠŸèƒ½å®ç°</h4>
<p><strong>éœ€æ±‚</strong>: "ç»™æ‰€æœ‰APIæ¥å£æ·»åŠ ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•"</p>
<p><strong>ä¸ºä»€ä¹ˆç”¨Agent</strong>: æ¶‰åŠå¤šä¸ªæ–‡ä»¶,éœ€è¦ç»Ÿä¸€å¤„ç†æ¨¡å¼</p>
<p><strong>å®Œæ•´Promptç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown">ä¸ºé¡¹ç›®ä¸­æ‰€æœ‰çš„APIè·¯ç”±æ·»åŠ ç»Ÿä¸€çš„é”™è¯¯å¤„ç†:
<span class="hljs-bullet">1.</span> ä½¿ç”¨try-catchåŒ…è£¹æ‰€æœ‰è·¯ç”±å¤„ç†å‡½æ•°
<span class="hljs-bullet">2.</span> æ·»åŠ è¯¦ç»†çš„é”™è¯¯æ—¥å¿—(åŒ…å«è¯·æ±‚IDã€ç”¨æˆ·IDã€æ—¶é—´æˆ³)
<span class="hljs-bullet">3.</span> è¿”å›ç»Ÿä¸€æ ¼å¼çš„é”™è¯¯å“åº”:{code, message, requestId}
<span class="hljs-bullet">4.</span> ä¿æŒç°æœ‰åŠŸèƒ½å’Œé€»è¾‘ä¸å˜

å‚è€ƒ:@file src/middleware/errorHandler.ts çš„é”™è¯¯å¤„ç†é£æ ¼
</code></pre>
<p><strong>Agentçš„æ‰§è¡Œè¿‡ç¨‹</strong>:</p>
<ol>
<li>æ‰«æ <code>src/routes/</code> æ‰¾åˆ°15ä¸ªè·¯ç”±æ–‡ä»¶</li>
<li>åˆ†ææ¯ä¸ªæ–‡ä»¶çš„ç°æœ‰ç»“æ„</li>
<li>åˆ›å»º <code>src/utils/apiErrorHandler.ts</code> ç»Ÿä¸€å·¥å…·</li>
<li>é€ä¸ªæ–‡ä»¶æ·»åŠ é”™è¯¯å¤„ç†</li>
<li>æ›´æ–° <code>src/middleware/logger.ts</code> å¢å¼ºæ—¥å¿—</li>
</ol>
<p><strong>æ•ˆæœå¯¹æ¯”</strong>:</p>
<ul>
<li>ä¿®æ”¹æ–‡ä»¶: 17ä¸ª(15ä¸ªè·¯ç”± + 2ä¸ªæ–°å·¥å…·æ–‡ä»¶)</li>
<li>è€—æ—¶: 3åˆ†é’Ÿ</li>
<li>ä¼ ç»Ÿæ‰‹å·¥: é¢„è®¡2å°æ—¶</li>
<li>ä»£ç ä¸€è‡´æ€§: å®Œç¾ç»Ÿä¸€</li>
</ul>
<h4 data-id="heading-9">åœºæ™¯2:é¡¹ç›®åˆå§‹åŒ–å’Œè„šæ‰‹æ¶</h4>
<p><strong>éœ€æ±‚</strong>: "åˆ›å»ºä¸€ä¸ªNext.js 15é¡¹ç›®,é›†æˆTypeScript + TailwindCSS + Shadcn/UI + Drizzle ORM"</p>
<p><strong>ä¸ºä»€ä¹ˆç”¨Agent</strong>: æ¶‰åŠå¤§é‡é…ç½®æ–‡ä»¶å’Œä¾èµ–å®‰è£…</p>
<p><strong>Promptç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown">åˆå§‹åŒ–ä¸€ä¸ªç°ä»£åŒ–çš„Next.jsé¡¹ç›®:
<span class="hljs-bullet">1.</span> ä½¿ç”¨App Router(ä¸è¦Pages Router)
<span class="hljs-bullet">2.</span> é…ç½®TypeScriptä¸¥æ ¼æ¨¡å¼
<span class="hljs-bullet">3.</span> é›†æˆTailwindCSSå’ŒShadcn/UI
<span class="hljs-bullet">4.</span> é…ç½®Drizzle ORMè¿æ¥PostgreSQL
<span class="hljs-bullet">5.</span> åˆ›å»ºåŸºç¡€ç›®å½•ç»“æ„:components/lib/app/db
<span class="hljs-bullet">6.</span> æ·»åŠ .env.exampleæ¨¡æ¿

ç”Ÿæˆåå¸®æˆ‘è¿è¡Œnpm install
</code></pre>
<p><strong>Agentçš„èƒ½åŠ›å±•ç¤º</strong>:</p>
<ul>
<li>åˆ›å»º20+ä¸ªæ–‡ä»¶</li>
<li>å®‰è£…15+ä¸ªä¾èµ–</li>
<li>é…ç½®5ä¸ªå·¥å…·(ESLint/Prettier/TypeScriptç­‰)</li>
<li>ç”Ÿæˆç¤ºä¾‹ä»£ç </li>
<li>å…¨ç¨‹æ— éœ€æ‰‹åŠ¨æ“ä½œ</li>
</ul>
<h4 data-id="heading-10">åœºæ™¯3:æ‰¹é‡ä»£ç é‡æ„</h4>
<p><strong>éœ€æ±‚</strong>: "å°†é¡¹ç›®ä¸­æ‰€æœ‰çš„classç»„ä»¶æ”¹ä¸ºå‡½æ•°ç»„ä»¶(ä½¿ç”¨Hooks)"</p>
<p><strong>ä¸ºä»€ä¹ˆç”¨Agent</strong>: æœºæ¢°æ€§é‡å¤å·¥ä½œ,å®¹æ˜“å‡ºé”™</p>
<p><strong>Promptç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown">é‡æ„é¡¹ç›®ä¸­çš„æ‰€æœ‰React classç»„ä»¶ä¸ºå‡½æ•°ç»„ä»¶:
<span class="hljs-bullet">1.</span> åªä¿®æ”¹@folder src/componentsç›®å½•
<span class="hljs-bullet">2.</span> è½¬æ¢è§„åˆ™:
<span class="hljs-bullet">   -</span> componentDidMount â†’ useEffect
<span class="hljs-bullet">   -</span> this.state â†’ useState
<span class="hljs-bullet">   -</span> this.props â†’ å‡½æ•°å‚æ•°
<span class="hljs-bullet">3.</span> ä¿æŒç»„ä»¶åŠŸèƒ½å®Œå…¨ä¸€è‡´
<span class="hljs-bullet">4.</span> ä¿ç•™æ‰€æœ‰æ³¨é‡Šå’ŒPropTypes
<span class="hljs-bullet">5.</span> æ¯æ”¹å®Œä¸€ä¸ªæ–‡ä»¶å°±æµ‹è¯•ç¼–è¯‘
</code></pre>
<p><strong>é£é™©æ§åˆ¶</strong>:</p>
<ul>
<li>Agentä¼šé€ä¸ªæ–‡ä»¶å¤„ç†,ä¸æ˜¯ä¸€æ¬¡æ€§å…¨æ”¹</li>
<li>ä½ å¯ä»¥éšæ—¶ä¸­æ–­å’Œå›æ»š</li>
<li>å»ºè®®å…ˆgit commitä¿å­˜å½“å‰çŠ¶æ€</li>
</ul>
<h3 data-id="heading-11">Agentæ¨¡å¼çš„è¾¹ç•Œå’Œé™·é˜±</h3>
<h4 data-id="heading-12">âŒ ä¸é€‚åˆçš„åœºæ™¯</h4>
<p><strong>1. éœ€æ±‚ä¸æ˜ç¡®æ—¶</strong></p>
<pre><code class="hljs language-makefile" lang="makefile">âŒ å·®çš„éœ€æ±‚: <span class="hljs-string">"å¸®æˆ‘ä¼˜åŒ–ä¸€ä¸‹é¦–é¡µ"</span>
<span class="hljs-section">é—®é¢˜: ä½ è‡ªå·±éƒ½ä¸çŸ¥é“è¦ä¼˜åŒ–ä»€ä¹ˆ,AIæ›´ççŒœ</span>
<span class="hljs-section">åæœ: Agentå¯èƒ½æ”¹ä¸€å †æ— å…³çš„ä»£ç </span>

âœ… æ­£ç¡®åšæ³•: å…ˆç”¨Askæ¨¡å¼æ¢ç´¢é—®é¢˜,æ˜ç¡®éœ€æ±‚åå†ç”¨Agent
</code></pre>
<p><strong>2. æ ¸å¿ƒä¸šåŠ¡é€»è¾‘</strong></p>
<pre><code class="hljs language-makefile" lang="makefile">âŒ å·®çš„éœ€æ±‚: <span class="hljs-string">"å®ç°æ”¯ä»˜ç³»ç»Ÿçš„é£æ§é€»è¾‘"</span>
<span class="hljs-section">é—®é¢˜: ä¸šåŠ¡è§„åˆ™å¤æ‚,AIç†è§£å¯èƒ½æœ‰åå·®</span>
<span class="hljs-section">åæœ: é£æ§æ¼æ´,èµ„æŸé£é™©</span>

âœ… æ­£ç¡®åšæ³•: è‡ªå·±è®¾è®¡ç®—æ³•,ç”¨Agentè¾…åŠ©å®ç°è¾¹ç¼˜åŠŸèƒ½
</code></pre>
<p><strong>3. ç²¾ç»†åŒ–UIè°ƒæ•´</strong></p>
<pre><code class="hljs language-makefile" lang="makefile">âŒ å·®çš„éœ€æ±‚: <span class="hljs-string">"æŠŠè¿™ä¸ªæŒ‰é’®è°ƒå¾—æ›´å¥½çœ‹ä¸€ç‚¹"</span>
<span class="hljs-section">é—®é¢˜: "å¥½çœ‹"çš„æ ‡å‡†ä¸»è§‚,éœ€è¦å¤šæ¬¡å¾®è°ƒ</span>
<span class="hljs-section">åæœ: Agentæ¯æ¬¡éƒ½å¤§æ”¹,æ¥å›æŠ˜è…¾æ•ˆç‡ä½</span>

âœ… æ­£ç¡®åšæ³•: ç”¨Cmd+Kå†…è”ç¼–è¾‘,æ‰‹åŠ¨è°ƒæ•´æ ·å¼
</code></pre>
<h3 data-id="heading-13">Agentæ¨¡å¼çš„é«˜çº§æŠ€å·§</h3>
<h4 data-id="heading-14">æŠ€å·§1:æ§åˆ¶ä»»åŠ¡é¢—ç²’åº¦</h4>
<pre><code class="hljs language-markdown" lang="markdown">âŒ è¿‡äºå®½æ³›: "å¸®æˆ‘å®Œæˆç”¨æˆ·ç®¡ç†åŠŸèƒ½"
â†’ AIä¸çŸ¥é“è¦åšå“ªäº›å…·ä½“åŠŸèƒ½,å®¹æ˜“åšé”™æˆ–åšå¤š

âœ… æ˜ç¡®ç»†èŠ‚: "å®ç°ç”¨æˆ·åˆ—è¡¨é¡µé¢,åŒ…æ‹¬:
<span class="hljs-bullet">1.</span> è¡¨æ ¼å±•ç¤º(åˆ—:å§“å/é‚®ç®±/è§’è‰²/çŠ¶æ€/æ³¨å†Œæ—¶é—´)
<span class="hljs-bullet">2.</span> åˆ†é¡µ(æ¯é¡µ20æ¡,ä½¿ç”¨@Codebaseä¸­çš„Paginationç»„ä»¶)
<span class="hljs-bullet">3.</span> æœç´¢(æ”¯æŒæŒ‰å§“åå’Œé‚®ç®±æ¨¡ç³Šæœç´¢)
<span class="hljs-bullet">4.</span> è§’è‰²ç­›é€‰(ä¸‹æ‹‰èœå•:å…¨éƒ¨/ç®¡ç†å‘˜/æ™®é€šç”¨æˆ·)
çº¦æŸ:
<span class="hljs-bullet">-</span> å¤ç”¨ç°æœ‰çš„DataTableç»„ä»¶
<span class="hljs-bullet">-</span> APIå·²å­˜åœ¨,ä½¿ç”¨GET /api/users
<span class="hljs-bullet">-</span> ä¸è¦ä¿®æ”¹ç”¨æˆ·å¢åˆ æ”¹åŠŸèƒ½"
</code></pre>
<h4 data-id="heading-15">æŠ€å·§2:ç”¨.cursorrulesçº¦æŸè¡Œä¸º</h4>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>.cursorrules</code> æ–‡ä»¶:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Agentæ¨¡å¼çº¦æŸè§„åˆ™</span>

<span class="hljs-section">## ä»£ç ä¿®æ”¹è§„èŒƒ</span>
<span class="hljs-bullet">-</span> ä¿®æ”¹å‰å¿…é¡»å…ˆç†è§£ç°æœ‰å®ç°,ä¸è¦ç›²ç›®é‡å†™
<span class="hljs-bullet">-</span> ä¿æŒä»£ç é£æ ¼ä¸€è‡´(å‚è€ƒå·²æœ‰ä»£ç )
<span class="hljs-bullet">-</span> ä¸è¦åˆ é™¤æ³¨é‡Šå’ŒTODOæ ‡è®°
<span class="hljs-bullet">-</span> ä¿®æ”¹è¶…è¿‡5ä¸ªæ–‡ä»¶æ—¶å¿…é¡»å‘æˆ‘ç¡®è®¤

<span class="hljs-section">## æŠ€æœ¯æ ˆé™åˆ¶</span>
<span class="hljs-bullet">-</span> å‰ç«¯åªç”¨React Hooks,ç¦æ­¢classç»„ä»¶
<span class="hljs-bullet">-</span> çŠ¶æ€ç®¡ç†ç»Ÿä¸€ç”¨Zustand,ä¸è¦å¼•å…¥Redux
<span class="hljs-bullet">-</span> æ ·å¼ç»Ÿä¸€ç”¨TailwindCSS,ä¸è¦å†™CSSæ–‡ä»¶

<span class="hljs-section">## å®‰å…¨è§„èŒƒ</span>
<span class="hljs-bullet">-</span> æ‰€æœ‰ç”¨æˆ·è¾“å…¥å¿…é¡»éªŒè¯å’Œè½¬ä¹‰
<span class="hljs-bullet">-</span> ä¸è¦åœ¨å‰ç«¯ä»£ç ä¸­ç¡¬ç¼–ç å¯†é’¥
<span class="hljs-bullet">-</span> APIè°ƒç”¨å¿…é¡»æœ‰é”™è¯¯å¤„ç†
</code></pre>
<h4 data-id="heading-16">æŠ€å·§3:å–„ç”¨"æš‚åœ"å’Œ"æ’¤é”€"</h4>
<p>Agentæ‰§è¡Œæ—¶ä½ å¯ä»¥:</p>
<ul>
<li><strong>å®æ—¶æŸ¥çœ‹</strong>: å®ƒåœ¨æ”¹å“ªä¸ªæ–‡ä»¶,æ”¹äº†ä»€ä¹ˆ</li>
<li><strong>ç«‹å³åœæ­¢</strong>: å‘ç°æ–¹å‘ä¸å¯¹é©¬ä¸Šä¸­æ–­(Ctrl+C)</li>
<li><strong>ç»™å‡ºåé¦ˆ</strong>: "ä¸è¦æ”¹xxæ–‡ä»¶,åªæ”¹yy"</li>
<li><strong>å¿«é€Ÿå›æ»š</strong>: ç”¨Gitæ’¤é”€æ‰€æœ‰ä¿®æ”¹</li>
</ul>

**è¡€æ³ªæ•™è®­**: Agentæ”¹å®Œä»£ç å,å¿…é¡»reviewå†æäº¤!åˆ«ç›²ç›®ä¿¡ä»»AI,æˆ‘è§è¿‡å¤ªå¤š"Agentåˆ¶é€ çš„bug"äº‹æ•…ã€‚

<h2 data-id="heading-17">Askæ¨¡å¼:å®‰å…¨çš„åªè¯»å­¦ä¹ åŠ©æ‰‹</h2>
<h3 data-id="heading-18">æ ¸å¿ƒä»·å€¼:ç†è§£ä¼˜äºä¿®æ”¹</h3>
<blockquote>
<p>"ç†è§£ä»£ç æ¯”ä¿®æ”¹ä»£ç æ›´é‡è¦,Askæ¨¡å¼è®©ä½ å®‰å¿ƒæ¢ç´¢ã€‚"</p>
</blockquote>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦Askæ¨¡å¼?</strong></p>
<p>æƒ³è±¡ä½ åˆšæ¥æ‰‹ä¸€ä¸ª10ä¸‡è¡Œçš„è€é¡¹ç›®:</p>
<ul>
<li>âŒ ç›´æ¥ç”¨Agentæ”¹?å¤ªå±é™©,å¯èƒ½æ”¹å</li>
<li>âŒ æ…¢æ…¢è¯»ä»£ç ?æ—¶é—´ä¸å¤Ÿ,çœ‹ä¸æ‡‚æ¶æ„</li>
<li>âœ… <strong>ç”¨Askæ¢ç´¢</strong>: å®‰å…¨ã€å¿«é€Ÿã€æ·±å…¥ç†è§£</li>
</ul>
<p>Askæ¨¡å¼çš„<strong>ç‹¬ç‰¹ä¼˜åŠ¿</strong>:</p>
<ul>
<li>åªè¯»æƒé™,ç»å¯¹ä¸ä¼šä¿®æ”¹ä»£ç </li>
<li>å¯ä»¥æé—®ä»»ä½•é—®é¢˜,æ— å¿ƒç†è´Ÿæ‹…</li>
<li>ç†è§£åå†å†³å®šæ˜¯å¦ä¿®æ”¹,é£é™©å¯æ§</li>
</ul>
<h3 data-id="heading-19">æœ€é€‚åˆçš„4ä¸ªåœºæ™¯</h3>
<h4 data-id="heading-20">åœºæ™¯1:æ–°é¡¹ç›®å¿«é€Ÿonboarding</h4>
<pre><code class="hljs language-markdown" lang="markdown">Prompt 1: "è¿™ä¸ªé¡¹ç›®çš„æŠ€æœ¯æ ˆæ˜¯ä»€ä¹ˆ?ä¸»è¦ç›®å½•ç»“æ„å’ŒèŒè´£?"

AIå›ç­”:
<span class="hljs-bullet">-</span> æŠ€æœ¯æ ˆ: Next.js 14 + TypeScript + TailwindCSS + Prisma
<span class="hljs-bullet">-</span> ç›®å½•ç»“æ„:
<span class="hljs-bullet">  -</span> app/: Next.js App Routeré¡µé¢
<span class="hljs-bullet">  -</span> components/: å¯å¤ç”¨UIç»„ä»¶
<span class="hljs-bullet">  -</span> lib/: å·¥å…·å‡½æ•°å’Œæ•°æ®åº“å®¢æˆ·ç«¯
<span class="hljs-bullet">  -</span> prisma/: æ•°æ®åº“schema
<span class="hljs-bullet">-</span> æ•°æ®åº“: PostgreSQL,ä½¿ç”¨Prisma ORM
</code></pre>
<pre><code class="hljs language-markdown" lang="markdown">Prompt 2: "ç”¨æˆ·è®¤è¯æ˜¯æ€ä¹ˆå®ç°çš„?æ¶‰åŠå“ªäº›æ–‡ä»¶?"

AIå›ç­”:
<span class="hljs-bullet">-</span> ä½¿ç”¨NextAuth.js v5
<span class="hljs-bullet">-</span> æ ¸å¿ƒæ–‡ä»¶:
<span class="hljs-bullet">  -</span> app/api/auth/[...nextauth]/route.ts: è®¤è¯é…ç½®
<span class="hljs-bullet">  -</span> lib/auth.ts: sessionå’Œtokenå·¥å…·
<span class="hljs-bullet">  -</span> middleware.ts: è·¯ç”±å®ˆå«
<span class="hljs-bullet">-</span> è®¤è¯æµç¨‹: OAuth(GitHub/Google) + é‚®ç®±å¯†ç 
<span class="hljs-bullet">-</span> Sessionå­˜å‚¨: JWT token
</code></pre>
<h4 data-id="heading-21">åœºæ™¯2:ç†è§£å¤æ‚ä¸šåŠ¡é€»è¾‘</h4>
<pre><code class="hljs language-markdown" lang="markdown">Prompt: "@file src/services/orderProcessor.ts
è¿™ä¸ªè®¢å•å¤„ç†å‡½æ•°ä¸ºä»€ä¹ˆè¦åˆ†3ä¸ªé˜¶æ®µ?
æ¯ä¸ªé˜¶æ®µå¤±è´¥äº†ä¼šæ€ä¹ˆåŠ?"

AIè§£é‡Š:
<span class="hljs-bullet">1.</span> é˜¶æ®µ1-åº“å­˜é”å®š:
<span class="hljs-bullet">   -</span> é˜²æ­¢è¶…å–
<span class="hljs-bullet">   -</span> å¤±è´¥â†’è®¢å•å–æ¶ˆ,é‡Šæ”¾åº“å­˜

<span class="hljs-bullet">2.</span> é˜¶æ®µ2-æ”¯ä»˜å¤„ç†:
<span class="hljs-bullet">   -</span> è°ƒç”¨ç¬¬ä¸‰æ–¹æ”¯ä»˜
<span class="hljs-bullet">   -</span> å¤±è´¥â†’è‡ªåŠ¨é‡è¯•3æ¬¡,è¶…æ—¶å›æ»šåº“å­˜

<span class="hljs-bullet">3.</span> é˜¶æ®µ3-å‘è´§é€šçŸ¥:
<span class="hljs-bullet">   -</span> å¼‚æ­¥é€šçŸ¥ä»“åº“
<span class="hljs-bullet">   -</span> å¤±è´¥â†’è®°å½•åˆ°å¤±è´¥é˜Ÿåˆ—,å®šæ—¶é‡è¯•

è®¾è®¡ç†å¿µ: æœ€ç»ˆä¸€è‡´æ€§,æ¯æ­¥å¯å›æ»š
</code></pre>
<h4 data-id="heading-22">åœºæ™¯3:å­¦ä¹ ä¼˜ç§€ä»£ç å®ç°</h4>
<pre><code class="hljs language-markdown" lang="markdown">Prompt: "é¡¹ç›®ä¸­çš„å®æ—¶é€šçŸ¥åŠŸèƒ½æ˜¯æ€ä¹ˆå®ç°çš„?
ä¸ºä»€ä¹ˆé€‰è¿™ä¸ªæ–¹æ¡ˆ?æœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹?"

AIåˆ†æ:
<span class="hljs-bullet">-</span> æŠ€æœ¯é€‰å‹: Server-Sent Events(SSE),ä¸æ˜¯WebSocket
<span class="hljs-bullet">-</span> å®ç°æ–‡ä»¶: @file app/api/notifications/stream/route.ts
<span class="hljs-bullet">-</span> é€‰å‹ç†ç”±:
  âœ… å•å‘æ¨é€,ç®€å•å¤Ÿç”¨
  âœ… è‡ªåŠ¨é‡è¿
  âœ… HTTPåè®®,æ˜“éƒ¨ç½²
  âŒ ä¸æ”¯æŒæœåŠ¡ç«¯æ¥æ”¶æ¶ˆæ¯
<span class="hljs-bullet">-</span> é€‚ç”¨åœºæ™¯: é€šçŸ¥æ¨é€ã€è¿›åº¦æ›´æ–°ã€æ—¥å¿—æµ
</code></pre>
<h4 data-id="heading-23">åœºæ™¯4:æŠ€æœ¯å†³ç­–æ”¯æŒ</h4>
<pre><code class="hljs language-markdown" lang="markdown">Prompt: "æˆ‘æƒ³æ·»åŠ å…¨æ–‡æœç´¢åŠŸèƒ½,
åŸºäºç°æœ‰æ¶æ„,åº”è¯¥ç”¨Algoliaã€Meilisearchè¿˜æ˜¯PostgreSQLå…¨æ–‡ç´¢å¼•?
è€ƒè™‘æˆæœ¬ã€æ€§èƒ½å’Œç»´æŠ¤å¤æ‚åº¦"

AIå»ºè®®:
<span class="hljs-bullet">-</span> å½“å‰æ¶æ„: PostgreSQLæ•°æ®åº“,Verceléƒ¨ç½²
<span class="hljs-bullet">-</span> æ•°æ®é‡: çº¦10ä¸‡æ¡å•†å“æ•°æ®
<span class="hljs-bullet">-</span> æ¨èæ–¹æ¡ˆ: PostgreSQLå…¨æ–‡ç´¢å¼•
  ç†ç”±:
  âœ… æ— éœ€é¢å¤–æœåŠ¡,æˆæœ¬ä½
  âœ… æ•°æ®åŒæ­¥ç®€å•
  âœ… 10ä¸‡çº§æ€§èƒ½è¶³å¤Ÿ
  âŒ æœç´¢åŠŸèƒ½ä¸å¦‚ä¸“ä¸šæ–¹æ¡ˆ
<span class="hljs-bullet">-</span> å¦‚æœæœªæ¥æ•°æ®&gt;100ä¸‡,å†è€ƒè™‘Meilisearch(å¼€æº,å¯è‡ªéƒ¨ç½²)
</code></pre>
<h3 data-id="heading-24">Ask vs Agent:ä½•æ—¶åˆ‡æ¢?</h3>
<p><strong>ç»å…¸å·¥ä½œæµ</strong>:</p>
<pre><code class="hljs language-vbnet" lang="vbnet">ä»»åŠ¡: ç»™é¡¹ç›®æ·»åŠ å›½é™…åŒ–(i18n)æ”¯æŒ

<span class="hljs-keyword">Step</span> <span class="hljs-number">1</span> - Askæ¨¡å¼: <span class="hljs-string">"è¿™ä¸ªé¡¹ç›®ç”¨çš„ä»€ä¹ˆæ¡†æ¶?æœ‰æ²¡æœ‰i18næ–¹æ¡ˆ?"</span>
AIå›ç­”: <span class="hljs-keyword">Next</span>.js App Router,æ²¡æœ‰i18n,æ¨è<span class="hljs-keyword">next</span>-intl

<span class="hljs-keyword">Step</span> <span class="hljs-number">2</span> - è‡ªå·±åˆ¤æ–­:
- éœ€è¦æ”¯æŒä¸­è‹±æ–‡
- URLè·¯å¾„è¦åŒ…å«è¯­è¨€æ ‡è¯†(/en/xxx, /zh/xxx)
- <span class="hljs-keyword">next</span>-intlç¬¦åˆéœ€æ±‚

<span class="hljs-keyword">Step</span> <span class="hljs-number">3</span> - å†æ¬¡Ask: <span class="hljs-string">"èƒ½è§£é‡Šä¸€ä¸‹next-intlçš„åŸºæœ¬ç”¨æ³•å’Œé…ç½®å—?"</span>
AIè®²è§£: middlewareé…ç½®ã€ç¿»è¯‘æ–‡ä»¶ç»“æ„ã€ä½¿ç”¨æ–¹æ³•

<span class="hljs-keyword">Step</span> <span class="hljs-number">4</span> - åˆ‡æ¢Agent: <span class="hljs-string">"é›†æˆnext-intlåˆ°é¡¹ç›®,
æ”¯æŒä¸­è‹±æ–‡,URLè·¯å¾„æ ¼å¼ä¸º/[locale]/xxx,
å‚è€ƒnext-intlå®˜æ–¹æœ€ä½³å®è·µ"</span>
</code></pre>
<p><strong>åˆ‡æ¢æ—¶æœºåˆ¤æ–­</strong>:</p>
<ul>
<li>Aské˜¶æ®µ: æ¢ç´¢ã€å­¦ä¹ ã€ç†è§£</li>
<li>è‡ªå·±æ€è€ƒ: ç¡®å®šæ–¹æ¡ˆå’Œç»†èŠ‚</li>
<li>Agenté˜¶æ®µ: æ‰§è¡Œå®æ–½</li>
</ul>
<h3 data-id="heading-25">Askæ¨¡å¼çš„é«˜çº§æŠ€å·§</h3>
<h4 data-id="heading-26">æŠ€å·§1:ç²¾å‡†çš„ä¸Šä¸‹æ–‡å¼•ç”¨</h4>
<pre><code class="hljs language-markdown" lang="markdown">@file src/utils/payment.ts      # ç²¾ç¡®åˆ°å•ä¸ªæ–‡ä»¶
@folder src/components/ui       # æ‰¹é‡åˆ†æç›®å½•
@Codebase                       # å…¨å±€æœç´¢
@symbol handlePayment           # æŒ‡å®šå‡½æ•°æˆ–ç±»
</code></pre>
<p><strong>ç»„åˆä½¿ç”¨</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown">"@file src/services/userService.ts ä¸­çš„
@symbol createUser å‡½æ•°è°ƒç”¨äº†å“ªäº›å…¶ä»–å‡½æ•°?
å®ƒä»¬åˆ†åˆ«åœ¨@Codebaseçš„ä»€ä¹ˆä½ç½®?"
</code></pre>
<h4 data-id="heading-27">æŠ€å·§2:å¯¹è¯å¼æ·±å…¥è¿½é—®</h4>
<pre><code class="hljs language-markdown" lang="markdown">ç¬¬1è½®: "è¿™ä¸ªç¼“å­˜ç³»ç»Ÿæ˜¯æ€ä¹ˆå·¥ä½œçš„?"
AIå›ç­”: ä½¿ç”¨Redis,LRUæ·˜æ±°ç­–ç•¥...

ç¬¬2è½®: "ä¸ºä»€ä¹ˆé€‰æ‹©LRUè€Œä¸æ˜¯LFU?"
AIå›ç­”: ä¸šåŠ¡ç‰¹ç‚¹æ˜¯çƒ­ç‚¹æ•°æ®å˜åŒ–å¿«...

ç¬¬3è½®: "å¦‚æœè¦æ”¯æŒåˆ†å¸ƒå¼ç¼“å­˜ä¸€è‡´æ€§,éœ€è¦æ€ä¹ˆæ”¹?"
AIå›ç­”: å¼•å…¥Pub/Subæœºåˆ¶,ç›‘å¬keyå¤±æ•ˆäº‹ä»¶...
</code></pre>

**é»„é‡‘æ³•åˆ™**: åœ¨ä¸ç¡®å®šçš„æƒ…å†µä¸‹,æ°¸è¿œå…ˆç”¨Askæ¢ç´¢,å†ç”¨Agentæ‰§è¡Œã€‚å®å¯å¤šé—®å‡ è½®,ä¹Ÿåˆ«è®©Agentçæ”¹ä»£ç ã€‚

<h2 data-id="heading-28">Planæ¨¡å¼:å¤§å‹éœ€æ±‚çš„æ¶æ„å¸ˆ</h2>
<h3 data-id="heading-29">ç‹¬ç‰¹ä»·å€¼:ç£¨åˆ€ä¸è¯¯ç æŸ´å·¥</h3>
<blockquote>
<p>"å¤§å‹éœ€æ±‚å…ˆè§„åˆ’å†åŠ¨æ‰‹,é¿å…Agentçå†™ä¸€é€šã€‚"</p>
</blockquote>
<p><strong>Planæ¨¡å¼è§£å†³ä»€ä¹ˆé—®é¢˜?</strong></p>
<p>ä¼ ç»ŸAgentæ¨¡å¼çš„ç—›ç‚¹:</p>
<ul>
<li>âŒ å¤§éœ€æ±‚ç›´æ¥æ‰”ç»™Agent â†’ æ–¹å‘è·‘å,è¶Šæ”¹è¶Šä¹±</li>
<li>âŒ ä¸çŸ¥é“AIè¦æ”¹å“ªäº›æ–‡ä»¶ â†’ æ‹…å¿ƒæ”¹åä¸æ•¢ç”¨</li>
<li>âŒ éœ€æ±‚å¤æ‚,è‡ªå·±ä¹Ÿæ²¡æƒ³æ¸…æ¥š â†’ Agentæ›´ççŒœ</li>
</ul>
<p>Planæ¨¡å¼çš„ä»·å€¼:</p>
<ul>
<li>âœ… ç”Ÿæˆè¯¦ç»†è®¡åˆ’,äººå·¥å®¡æ ¸åå†æ‰§è¡Œ</li>
<li>âœ… å¯ä»¥ä¿®æ”¹è®¡åˆ’,åªæ‰§è¡Œå…¶ä¸­å‡ æ­¥</li>
<li>âœ… çœ‹åˆ°è®¡åˆ’åå‘ç°é—®é¢˜,åŠæ—¶è°ƒæ•´</li>
<li>âœ… æ‰§è¡Œè¿‡ç¨‹å¯æ§,å‡ºé—®é¢˜æ˜“å›æ»š</li>
</ul>
<h3 data-id="heading-30">å·¥ä½œæµç¨‹:å…ˆè§„åˆ’,åæ‰§è¡Œ</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ea34178b988498d81a3c260044b9c10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767846559&amp;x-signature=5wogrGJoySiN3gLUKJF45%2BuyIM4%3D" alt="cursor03-Planæ¨¡å¼å®¡æ ¸æ‰§è¡Œæµç¨‹.png" loading="lazy"/></p>
<h3 data-id="heading-31">æœ€é€‚åˆçš„3ä¸ªåœºæ™¯</h3>
<h4 data-id="heading-32">åœºæ™¯1:æ–°åŠŸèƒ½æ¨¡å—å¼€å‘</h4>
<p><strong>éœ€æ±‚</strong>: "ä¸ºç”µå•†é¡¹ç›®æ·»åŠ å®Œæ•´çš„è´­ç‰©è½¦åŠŸèƒ½"</p>
<p><strong>Planæ¨¡å¼çš„Prompt</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown">ä¸ºé¡¹ç›®æ·»åŠ è´­ç‰©è½¦åŠŸèƒ½,è¯·å…ˆç”Ÿæˆè¯¦ç»†å®æ–½è®¡åˆ’:

åŠŸèƒ½éœ€æ±‚:
<span class="hljs-bullet">1.</span> è´­ç‰©è½¦æ•°æ®ç®¡ç†(å¢åˆ æ”¹æŸ¥)
<span class="hljs-bullet">2.</span> åº“å­˜åŒæ­¥å’Œæ ¡éªŒ
<span class="hljs-bullet">3.</span> ä¼˜æƒ åˆ¸åº”ç”¨
<span class="hljs-bullet">4.</span> ç»“ç®—åŠŸèƒ½

æŠ€æœ¯è¦æ±‚:
<span class="hljs-bullet">-</span> åç«¯APIä½¿ç”¨RESTfulé£æ ¼
<span class="hljs-bullet">-</span> å‰ç«¯çŠ¶æ€ç®¡ç†ç”¨Zustand
<span class="hljs-bullet">-</span> æ•°æ®åº“ä½¿ç”¨ç°æœ‰çš„PostgreSQL

è¯·åˆ—å‡º:
<span class="hljs-bullet">-</span> éœ€è¦åˆ›å»º/ä¿®æ”¹çš„æ–‡ä»¶
<span class="hljs-bullet">-</span> æ•°æ®åº“schemaå˜æ›´
<span class="hljs-bullet">-</span> APIæ¥å£è®¾è®¡
<span class="hljs-bullet">-</span> å‰ç«¯ç»„ä»¶ç»“æ„
<span class="hljs-bullet">-</span> æ½œåœ¨é£é™©ç‚¹
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3efffd02f527487fb7558151f2658088~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767846559&amp;x-signature=rOxmp5wr58fYZQ7Vkbhl9kkt%2BdI%3D" alt="cursor03-è®¡åˆ’æ¨¡å¼å®æˆ˜æˆªå›¾.png" loading="lazy"/></p>
<h4 data-id="heading-33">åœºæ™¯2:æ¶æ„é‡æ„</h4>
<p><strong>éœ€æ±‚</strong>: "å°†å•ä½“Next.jsåº”ç”¨æ‹†åˆ†ä¸ºå‰åç«¯åˆ†ç¦»æ¶æ„"</p>
<p><strong>Plançš„ä»·å€¼</strong>:</p>
<ul>
<li>å…ˆçœ‹æ•´ä½“æ‹†åˆ†æ–¹æ¡ˆ</li>
<li>è¯„ä¼°å·¥ä½œé‡(å¯èƒ½éœ€è¦1-2å‘¨)</li>
<li>è¯†åˆ«é«˜é£é™©æ¨¡å—</li>
<li>åˆ¶å®šå›æ»šæ–¹æ¡ˆ</li>
<li>åˆ†é˜¶æ®µå®æ–½,ä¸å½±å“çº¿ä¸Š</li>
</ul>
<h4 data-id="heading-34">åœºæ™¯3:æŠ€æœ¯æ ˆå‡çº§</h4>
<p><strong>éœ€æ±‚</strong>: "ä»React 18å‡çº§åˆ°React 19"</p>
<p><strong>Planå¸®ä½ </strong>:</p>
<ul>
<li>è¯†åˆ«ä¸å…¼å®¹çš„API</li>
<li>ç”Ÿæˆè¿ç§»æ¸…å•</li>
<li>è¯„ä¼°ç¬¬ä¸‰æ–¹åº“å…¼å®¹æ€§</li>
<li>åˆ¶å®šåˆ†æ‰¹å‡çº§ç­–ç•¥(å…ˆdevåˆ†æ”¯æµ‹è¯•)</li>
<li>å‡†å¤‡é™çº§é¢„æ¡ˆ</li>
</ul>
<h3 data-id="heading-35">Plan vs Agent:ä»€ä¹ˆæ—¶å€™å¿…é¡»ç”¨Plan?</h3>
<p><strong>å¿…é¡»ç”¨Plançš„æƒ…å†µ</strong>:</p>



































<table><thead><tr><th align="left">åˆ¤æ–­æ ‡å‡†</th><th align="left">è¯´æ˜</th><th align="center">é£é™©çº§åˆ«</th></tr></thead><tbody><tr><td align="left">å½±å“æ–‡ä»¶&gt;10ä¸ª</td><td align="left">æ”¹åŠ¨èŒƒå›´å¤§,å®¹æ˜“å¤±æ§</td><td align="center">ğŸ”´ é«˜</td></tr><tr><td align="left">æ•°æ®åº“schemaå˜æ›´</td><td align="left">æ¶‰åŠæ•°æ®è¿ç§»,ä¸å¯é€†</td><td align="center">ğŸ”´ é«˜</td></tr><tr><td align="left">æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ä¿®æ”¹</td><td align="left">å½±å“çº¿ä¸Šç”¨æˆ·,é£é™©é«˜</td><td align="center">ğŸ”´ é«˜</td></tr><tr><td align="left">éœ€è¦è·¨å›¢é˜Ÿåä½œ</td><td align="left">éœ€è¦å¯¹é½æ–¹æ¡ˆ,é¿å…å†²çª</td><td align="center">ğŸŸ¡ ä¸­</td></tr><tr><td align="left">æŠ€æœ¯é€‰å‹å†³ç­–</td><td align="left">é€‰é”™äº†æˆæœ¬é«˜</td><td align="center">ğŸŸ¡ ä¸­</td></tr></tbody></table>
<p><strong>å¯ä»¥ç›´æ¥ç”¨Agentçš„æƒ…å†µ</strong>:</p>
<ul>
<li>âœ… å°åŠŸèƒ½æ·»åŠ (1-3ä¸ªæ–‡ä»¶)</li>
<li>âœ… UIæ ·å¼è°ƒæ•´</li>
<li>âœ… Bugä¿®å¤</li>
<li>âœ… é…ç½®æ–‡ä»¶ä¿®æ”¹</li>
<li>âœ… å·¥å…·å‡½æ•°ç¼–å†™</li>
</ul>
<h3 data-id="heading-36">Planæ¨¡å¼çš„é«˜çº§ç”¨æ³•</h3>
<h4 data-id="heading-37">æŠ€å·§1:è¿­ä»£å¼è§„åˆ’</h4>
<pre><code class="hljs language-markdown" lang="markdown">ç¬¬1è½®(é«˜å±‚è§„åˆ’):
"ä¸ºé¡¹ç›®æ·»åŠ æ”¯ä»˜åŠŸèƒ½,è¯·ç”Ÿæˆé«˜å±‚å®æ–½è®¡åˆ’"
â†’ AIè¾“å‡º: 3ä¸ªé˜¶æ®µ,8ä¸ªå¤§æ­¥éª¤

ç¬¬2è½®(ç»†åŒ–æŸä¸ªé˜¶æ®µ):
"é’ˆå¯¹'é˜¶æ®µ2:æ”¯ä»˜æ¸ é“é›†æˆ'è¿™ä¸€æ­¥,
ç”Ÿæˆè¯¦ç»†çš„å®æ–½è®¡åˆ’"
â†’ AIè¾“å‡º: æ”¯ä»˜å®/å¾®ä¿¡æ¥å…¥çš„è¯¦ç»†æ­¥éª¤

ç¬¬3è½®(æ‰§è¡Œæœ€ç»†ç²’åº¦):
"æ‰§è¡Œ'é›†æˆæ”¯ä»˜å®SDK'è¿™ä¸€æ­¥"
â†’ AIæ‰§è¡Œå…·ä½“ä»£ç ç¼–å†™
</code></pre>
<h4 data-id="heading-38">æŠ€å·§2:åœ¨.cursorrulesä¸­å®šä¹‰è®¡åˆ’æ¨¡æ¿</h4>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># Planæ¨¡å¼è¾“å‡ºæ¨¡æ¿</span>

å½“æˆ‘ä½¿ç”¨Planæ¨¡å¼æ—¶,å¿…é¡»æŒ‰ä»¥ä¸‹æ ¼å¼è¾“å‡º:

<span class="hljs-section">## 1. éœ€æ±‚åˆ†æ</span>
<span class="hljs-bullet">-</span> æ ¸å¿ƒåŠŸèƒ½ç‚¹
<span class="hljs-bullet">-</span> æŠ€æœ¯çº¦æŸ
<span class="hljs-bullet">-</span> é¢„æœŸæ•ˆæœ

<span class="hljs-section">## 2. æŠ€æœ¯æ–¹æ¡ˆ</span>
<span class="hljs-bullet">-</span> æŠ€æœ¯é€‰å‹åŠç†ç”±
<span class="hljs-bullet">-</span> æ¶æ„è®¾è®¡
<span class="hljs-bullet">-</span> å…³é”®æŠ€æœ¯ç‚¹

<span class="hljs-section">## 3. å®æ–½è®¡åˆ’</span>
<span class="hljs-bullet">-</span> æ–‡ä»¶æ¸…å•(åˆ›å»º/ä¿®æ”¹)
<span class="hljs-bullet">-</span> åˆ†æ­¥éª¤è¯´æ˜(å¸¦æ—¶é—´ä¼°ç®—)
<span class="hljs-bullet">-</span> ä¾èµ–å…³ç³»

<span class="hljs-section">## 4. é£é™©è¯„ä¼°</span>
<span class="hljs-bullet">-</span> é«˜é£é™©é¡¹
<span class="hljs-bullet">-</span> ç¼“è§£æªæ–½
<span class="hljs-bullet">-</span> å›æ»šæ–¹æ¡ˆ

<span class="hljs-section">## 5. æµ‹è¯•è®¡åˆ’</span>
<span class="hljs-bullet">-</span> å•å…ƒæµ‹è¯•è¦†ç›–
<span class="hljs-bullet">-</span> é›†æˆæµ‹è¯•åœºæ™¯
<span class="hljs-bullet">-</span> æ€§èƒ½æµ‹è¯•æŒ‡æ ‡
</code></pre>

**ä½•æ—¶ä»Planåˆ‡æ¢åˆ°Agent**: å½“ä½ çœ‹å®Œè®¡åˆ’è§‰å¾—"å—¯,å°±è¿™ä¹ˆå¹²!"æ—¶,å°±å¯ä»¥æ‰¹å‡†æ‰§è¡Œäº†ã€‚å¦‚æœè¿˜æœ‰ç–‘è™‘,ç»§ç»­è¿½é—®AIç»†åŒ–è®¡åˆ’ã€‚

<h2 data-id="heading-39">Debugæ¨¡å¼:è¿è¡Œæ—¶è°ƒè¯•é©å‘½</h2>
<h3 data-id="heading-40">çªç ´æ€§åˆ›æ–°:ä»"çŒœæµ‹"åˆ°"æ•°æ®é©±åŠ¨"</h3>
<p>ä¼ ç»Ÿè°ƒè¯•æ–¹å¼çš„ç—›ç‚¹:</p>
<pre><code class="hljs language-markdown" lang="markdown">ä¼ ç»Ÿè°ƒè¯•æµç¨‹:
<span class="hljs-bullet">1.</span> å¤ç°bug â†’ ä¸ä¸€å®šèƒ½å¤ç°
<span class="hljs-bullet">2.</span> æ‰“æ–­ç‚¹/åŠ æ—¥å¿— â†’ çŒœæµ‹é—®é¢˜ç‚¹
<span class="hljs-bullet">3.</span> åˆ†ææ—¥å¿— â†’ æ—¥å¿—ä¸å¤Ÿè¯¦ç»†
<span class="hljs-bullet">4.</span> çŒœæµ‹åŸå›  â†’ å‡­ç»éªŒççŒœ
<span class="hljs-bullet">5.</span> æ”¹ä»£ç è¯•é”™ â†’ å¯èƒ½æ”¹é”™åœ°æ–¹
<span class="hljs-bullet">6.</span> é‡å¤2-5 â†’ æµªè´¹å¤§é‡æ—¶é—´
</code></pre>
<p><strong>Cursor Debugæ¨¡å¼çš„é©å‘½æ€§çªç ´</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown">Debugæ¨¡å¼æµç¨‹:
<span class="hljs-bullet">1.</span> æè¿°bugç°è±¡ â†’ AIç”Ÿæˆå¤šä¸ªå‡è®¾
<span class="hljs-bullet">2.</span> AIæ³¨å…¥è°ƒè¯•ä»£ç  â†’ ç²¾å‡†æ’å…¥æ—¥å¿—
<span class="hljs-bullet">3.</span> å¤ç°bug â†’ è‡ªåŠ¨æ”¶é›†è¿è¡Œæ—¶æ•°æ®
<span class="hljs-bullet">4.</span> AIåˆ†ææ•°æ® â†’ åŸºäºçœŸå®æ•°æ®å®šä½
<span class="hljs-bullet">5.</span> AIæå‡ºä¿®å¤ â†’ ç²¾å‡†ä¿®æ”¹2-3è¡Œ
<span class="hljs-bullet">6.</span> éªŒè¯ä¿®å¤ â†’ AIæ¸…ç†è°ƒè¯•ä»£ç 
</code></pre>
<p><strong>æ ¸å¿ƒä¼˜åŠ¿å¯¹æ¯”</strong>:</p>



































<table><thead><tr><th align="left">ç»´åº¦</th><th align="left">ä¼ ç»Ÿè°ƒè¯•</th><th align="left">Cursor Debugæ¨¡å¼</th></tr></thead><tbody><tr><td align="left">å®šä½æ–¹å¼</td><td align="left">çŒœæµ‹+è¯•é”™</td><td align="left">æ•°æ®é©±åŠ¨åˆ†æ</td></tr><tr><td align="left">æ—¥å¿—æ’å…¥</td><td align="left">æ‰‹åŠ¨çŒœæµ‹ä½ç½®</td><td align="left">AIè‡ªåŠ¨æ³¨å…¥å…³é”®ç‚¹</td></tr><tr><td align="left">é—®é¢˜å¤ç°</td><td align="left">éœ€è¦æ‰‹åŠ¨å¤ç°</td><td align="left">å¼•å¯¼ä½ å¦‚ä½•å¤ç°</td></tr><tr><td align="left">ä¿®å¤ç²¾åº¦</td><td align="left">å¯èƒ½æ”¹é”™åœ°æ–¹</td><td align="left">ç²¾å‡†å®šä½åˆ°å…·ä½“ä»£ç è¡Œ</td></tr><tr><td align="left">è°ƒè¯•ä»£ç æ¸…ç†</td><td align="left">å®¹æ˜“é—æ¼</td><td align="left">AIè‡ªåŠ¨æ¸…ç†</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c8f9acbac524d44aa2446e79a2b8c15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767846559&amp;x-signature=CBP0VAGlvKkhcvYY6dMGt3trWYM%3D" alt="cursor03-Debugæ¨¡å¼ä¸‰é˜¶æ®µæµç¨‹.png" loading="lazy"/></p>
<h3 data-id="heading-41">å·¥ä½œåŸç†:ä¸‰ä¸ªé˜¶æ®µçš„äººæœºåä½œ</h3>
<p>æ ¹æ®Cursorå®˜æ–¹è¯´æ˜,Debugæ¨¡å¼é‡‡ç”¨<strong>äººæœºåä½œ</strong>çš„å·¥ä½œæµ:</p>
<h4 data-id="heading-42">é˜¶æ®µ1:æè¿°Bug + AIç”Ÿæˆå‡è®¾</h4>
<pre><code class="hljs language-markdown" lang="markdown">ä½ çš„æè¿°: "ç”¨æˆ·åœ¨æ”¯ä»˜é¡µé¢ç‚¹å‡»'ç«‹å³æ”¯ä»˜'å,
å¶å°”ä¼šå¡ä½ä¸è·³è½¬,ä½†å¤§éƒ¨åˆ†æ—¶å€™æ­£å¸¸"

AIçš„åˆ†æ:
ç”Ÿæˆ3ä¸ªå‡è®¾:
<span class="hljs-bullet">1.</span> æ”¯ä»˜APIè°ƒç”¨è¶…æ—¶,æœªæ­£ç¡®å¤„ç†
<span class="hljs-bullet">2.</span> å‰ç«¯çŠ¶æ€æ›´æ–°æ—¶æœºé—®é¢˜,æŒ‰é’®é‡å¤ç‚¹å‡»
<span class="hljs-bullet">3.</span> æ”¯ä»˜æˆåŠŸå›è°ƒä¸¢å¤±,å¯¼è‡´é¡µé¢æœªè·³è½¬

è®¡åˆ’æ’å…¥æ—¥å¿—çš„ä½ç½®:
<span class="hljs-bullet">-</span> æŒ‰é’®ç‚¹å‡»äº‹ä»¶
<span class="hljs-bullet">-</span> APIè°ƒç”¨å‰å
<span class="hljs-bullet">-</span> çŠ¶æ€æ›´æ–°æ—¶æœº
<span class="hljs-bullet">-</span> æ”¯ä»˜å›è°ƒæ¥æ”¶
<span class="hljs-bullet">-</span> é¡µé¢è·¯ç”±è·³è½¬
</code></pre>
<h4 data-id="heading-43">é˜¶æ®µ2:å¤ç°Bug + æ”¶é›†è¿è¡Œæ—¶æ•°æ®</h4>
<pre><code class="hljs language-markdown" lang="markdown">AI: "æˆ‘å·²ç»æ³¨å…¥äº†è°ƒè¯•ä»£ç ,è¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œæ¥å¤ç°bug:
<span class="hljs-bullet">1.</span> æ‰“å¼€æ”¯ä»˜é¡µé¢
<span class="hljs-bullet">2.</span> ç‚¹å‡»'ç«‹å³æ”¯ä»˜'æŒ‰é’®
<span class="hljs-bullet">3.</span> å¦‚æœå¡ä½,ä¸è¦åˆ·æ–°é¡µé¢,ç­‰å¾…10ç§’
<span class="hljs-bullet">4.</span> å‘Šè¯‰æˆ‘æ˜¯å¦å¤ç°äº†é—®é¢˜"

ä½ çš„æ“ä½œ: (æŒ‰ç…§æŒ‡å¼•å¤ç°)

AIæ”¶é›†åˆ°çš„æ•°æ®:
[DEBUG] æŒ‰é’®ç‚¹å‡» â†’ timestamp: 1234567890
[DEBUG] APIè°ƒç”¨å¼€å§‹ â†’ orderId: ABC123
[DEBUG] APIç­‰å¾…ä¸­ â†’ elapsed: 5000ms
[DEBUG] APIç­‰å¾…ä¸­ â†’ elapsed: 10000ms
[DEBUG] APIè¶…æ—¶ â†’ error: Request timeout
[ERROR] æœªè¿›å…¥é”™è¯¯å¤„ç†åˆ†æ”¯ â† ğŸ”´ é—®é¢˜å®šä½!
</code></pre>
<h4 data-id="heading-44">é˜¶æ®µ3:AIæå‡ºä¿®å¤ + äººå·¥éªŒè¯</h4>
<pre><code class="hljs language-markdown" lang="markdown">AIåˆ†æ:
æ ¹å› : APIè¶…æ—¶å,é”™è¯¯æ²¡æœ‰è¢«catch,å¯¼è‡´åç»­é€»è¾‘æœªæ‰§è¡Œ

ä¿®å¤æ–¹æ¡ˆ:
åœ¨ src/app/checkout/page.tsx:145 æ·»åŠ è¶…æ—¶å¤„ç†

ä¿®å¤ä»£ç :
try {
  const result = await paymentAPI.create(orderData);
  // ...
} catch (error) {
  if (error.code === 'TIMEOUT') {
<span class="hljs-bullet">+</span>   showErrorToast('æ”¯ä»˜è¯·æ±‚è¶…æ—¶,è¯·é‡è¯•');
<span class="hljs-bullet">+</span>   setPaymentStatus('idle'); // é‡ç½®æŒ‰é’®çŠ¶æ€
  }
  throw error;
}

ä½ éªŒè¯:
<span class="hljs-bullet">-</span> æµ‹è¯•è¶…æ—¶åœºæ™¯ â†’ æ­£ç¡®æ˜¾ç¤ºé”™è¯¯æç¤º
<span class="hljs-bullet">-</span> æµ‹è¯•æ­£å¸¸æ”¯ä»˜ â†’ åŠŸèƒ½æ­£å¸¸
<span class="hljs-bullet">-</span> ç¡®è®¤ä¿®å¤ â†’ AIæ¸…ç†æ‰€æœ‰è°ƒè¯•ä»£ç 
</code></pre>
<h3 data-id="heading-45">æ€æ‰‹çº§åœºæ™¯:ä¼ ç»Ÿæ–¹å¼æ— æ³•è§£å†³çš„é—®é¢˜</h3>
<h4 data-id="heading-46">åœºæ™¯1:é—´æ­‡æ€§Bug(æ¦‚ç‡æ€§é—®é¢˜)</h4>
<p><strong>é—®é¢˜</strong>: "ç”¨æˆ·å¶å°”ä¼šé‡åˆ°æ”¯ä»˜å¤±è´¥,ä½†æœåŠ¡ç«¯æ—¥å¿—æ˜¾ç¤ºæˆåŠŸ"</p>
<p><strong>ä¼ ç»Ÿæ–¹å¼çš„å›°å¢ƒ</strong>:</p>
<ul>
<li>æ— æ³•ç¨³å®šå¤ç°</li>
<li>ç°æœ‰æ—¥å¿—ä¸å¤Ÿè¯¦ç»†</li>
<li>æ€€ç–‘æ˜¯ç½‘ç»œé—®é¢˜,ä½†æ— æ³•è¯æ˜</li>
</ul>
<p><strong>Debugæ¨¡å¼çš„è§£å†³</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown">Prompt: "æ”¯ä»˜æµç¨‹å¶å°”å¤±è´¥,ä½†æœåŠ¡ç«¯æ—¥å¿—æ˜¾ç¤ºæ”¯ä»˜æˆåŠŸ,
å¯èƒ½æ˜¯å‰ç«¯æœªæ­£ç¡®æ¥æ”¶å›è°ƒ"

Debugæ¨¡å¼çš„æ“ä½œ:
<span class="hljs-bullet">1.</span> AIåœ¨æ”¯ä»˜é“¾è·¯çš„10ä¸ªå…³é”®ç‚¹æ³¨å…¥æ—¥å¿—:
<span class="hljs-bullet">   -</span> æ”¯ä»˜APIè°ƒç”¨
<span class="hljs-bullet">   -</span> WebSocketè¿æ¥çŠ¶æ€
<span class="hljs-bullet">   -</span> æ”¯ä»˜å›è°ƒæ¥æ”¶
<span class="hljs-bullet">   -</span> æœ¬åœ°çŠ¶æ€æ›´æ–°
<span class="hljs-bullet">   -</span> é¡µé¢è·³è½¬è§¦å‘

<span class="hljs-bullet">2.</span> ç­‰å¾…ç”¨æˆ·è§¦å‘(å¯èƒ½éœ€è¦æµ‹è¯•å¤šæ¬¡)

<span class="hljs-bullet">3.</span> æ”¶é›†åˆ°çš„å¼‚å¸¸æ•°æ®:
   [INFO] æ”¯ä»˜APIè°ƒç”¨æˆåŠŸ â†’ orderId: XYZ
   [INFO] ç­‰å¾…æ”¯ä»˜å›è°ƒ...
   [INFO] WebSocketæ¶ˆæ¯æ¥æ”¶ â†’ type: payment<span class="hljs-emphasis">_success
   [ERROR] JSONè§£æå¤±è´¥ â†’ å›è°ƒæ ¼å¼é”™è¯¯ â† ğŸ”´ æ ¹å› !

4. å®šä½é—®é¢˜:
   æœåŠ¡ç«¯å‡çº§å,å›è°ƒJSONæ ¼å¼å˜äº†,
   å‰ç«¯è§£æä»£ç æœªæ›´æ–°,å¯¼è‡´æ•°æ®ä¸¢å¤±

5. ç²¾å‡†ä¿®å¤:
   æ›´æ–° src/lib/paymentSocket.ts:67
   çš„JSONè§£æé€»è¾‘,å…¼å®¹æ–°æ—§æ ¼å¼
</span></code></pre>
<h4 data-id="heading-47">åœºæ™¯2:æ€§èƒ½é—®é¢˜å®šä½</h4>
<p><strong>é—®é¢˜</strong>: "é¦–é¡µåŠ è½½å¾ˆæ…¢,ä¸çŸ¥é“ç“¶é¢ˆåœ¨å“ª"</p>
<p><strong>Debugæ¨¡å¼çš„Prompt</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown">"é¦–é¡µåŠ è½½è€—æ—¶è¶…è¿‡5ç§’,
å¸®æˆ‘å®šä½æ€§èƒ½ç“¶é¢ˆå¹¶æ³¨å…¥æ€§èƒ½ç›‘æ§"
</code></pre>
<p><strong>AIçš„æ“ä½œ</strong>:</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// AIè‡ªåŠ¨æ³¨å…¥æ€§èƒ½ç›‘æ§ä»£ç </span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'API:è·å–å•†å“åˆ—è¡¨'</span>);
<span class="hljs-keyword">const</span> products = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchProducts</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'API:è·å–å•†å“åˆ—è¡¨'</span>); <span class="hljs-comment">// 3500ms â† ç“¶é¢ˆ!</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'å›¾ç‰‡æ‡’åŠ è½½åˆå§‹åŒ–'</span>);
<span class="hljs-title function_">initLazyLoad</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'å›¾ç‰‡æ‡’åŠ è½½åˆå§‹åŒ–'</span>); <span class="hljs-comment">// 50ms</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'é¦–å±æ¸²æŸ“'</span>);
<span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">HomePage</span> <span class="hljs-attr">products</span>=<span class="hljs-string">{products}</span> /&gt;</span></span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'é¦–å±æ¸²æŸ“'</span>); <span class="hljs-comment">// 200ms</span>
</code></pre>
<p><strong>å®šä½ç»“æœ</strong>: å•†å“åˆ—è¡¨APIè€—æ—¶3.5ç§’(ä¸€æ¬¡æ€§æŸ¥è¯¢1000æ¡)</p>
<p><strong>AIå»ºè®®</strong>: æ”¹ä¸ºåˆ†é¡µåŠ è½½,é¦–å±åªåŠ è½½20æ¡</p>
<h4 data-id="heading-48">åœºæ™¯3:çŠ¶æ€ç®¡ç†é—®é¢˜</h4>
<p><strong>é—®é¢˜</strong>: "è´­ç‰©è½¦æ•°é‡æ˜¾ç¤ºä¸å¯¹,åŠ äº†3ä»¶å•†å“æ˜¾ç¤º2ä»¶"</p>
<p><strong>å®Œæ•´è°ƒè¯•æ¡ˆä¾‹</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown">Step 1: å¯åŠ¨Debugæ¨¡å¼
Prompt: "è´­ç‰©è½¦æ•°é‡æ˜¾ç¤ºé”™è¯¯,å®é™…æ·»åŠ çš„æ•°é‡å’Œæ˜¾ç¤ºçš„å¯¹ä¸ä¸Š"

Step 2: AIæ³¨å…¥æ—¥å¿—
AIåœ¨ä»¥ä¸‹ä½ç½®æ’å…¥æ—¥å¿—:
<span class="hljs-bullet">-</span> æ·»åŠ å•†å“æŒ‰é’®onClick
<span class="hljs-bullet">-</span> Redux action dispatch
<span class="hljs-bullet">-</span> Reducerè®¡ç®—é€»è¾‘
<span class="hljs-bullet">-</span> Store stateæ›´æ–°
<span class="hljs-bullet">-</span> ç»„ä»¶useSelectorè¯»å–
<span class="hljs-bullet">-</span> ç»„ä»¶æ¸²æŸ“

Step 3: å¤ç°é—®é¢˜
æ“ä½œ: è¿ç»­æ·»åŠ 3æ¬¡å•†å“A

æ”¶é›†åˆ°çš„è¿è¡Œæ—¶æ•°æ®:
[DEBUG] ç‚¹å‡»æ·»åŠ  â†’ productId: A, quantity: 1
[DEBUG] Dispatch action â†’ {type: 'ADD<span class="hljs-emphasis">_ITEM', id: 'A', qty: 1}
[DEBUG] Reducerè®¡ç®— â†’ å½“å‰æ€»æ•°: 1 âœ…

[DEBUG] ç‚¹å‡»æ·»åŠ  â†’ productId: A, quantity: 1
[DEBUG] Dispatch action â†’ {type: 'ADD_</span>ITEM', id: 'A', qty: 1}
[DEBUG] Reducerè®¡ç®— â†’ å½“å‰æ€»æ•°: 2 âœ…

[DEBUG] ç‚¹å‡»æ·»åŠ  â†’ productId: A, quantity: 1
[DEBUG] Dispatch action â†’ {type: 'ADD<span class="hljs-emphasis">_ITEM', id: 'A', qty: 1}
[DEBUG] Reducerè®¡ç®— â†’ å½“å‰æ€»æ•°: 3 âœ…
[DEBUG] Storeæ›´æ–° â†’ state.cart.total: 3 âœ…

[DEBUG] ç»„ä»¶useSelector â†’ è¯»å–åˆ° total: 2 âŒ é—®é¢˜åœ¨è¿™!
[DEBUG] ç»„ä»¶æ¸²æŸ“ â†’ æ˜¾ç¤º: 2

Step 4: AIåˆ†ææ ¹å› 
é—®é¢˜: useSelectorä½¿ç”¨äº†é”™è¯¯çš„selectorå‡½æ•°

// é”™è¯¯çš„ä»£ç 
const total = useSelector(state =&gt;
  state.cart.items.length // âŒ è·å–çš„æ˜¯å•†å“ç§ç±»æ•°,ä¸æ˜¯æ€»æ•°é‡
);

// åº”è¯¥æ”¹ä¸º
const total = useSelector(state =&gt;
  state.cart.total // âœ… æ­£ç¡®çš„æ€»æ•°é‡å­—æ®µ
);

Step 5: ä¿®å¤éªŒè¯
AIä¿®å¤ä»£ç  â†’ é‡æ–°æµ‹è¯• â†’ æ˜¾ç¤ºæ­£ç¡® â†’ æ¸…ç†è°ƒè¯•ä»£ç 
</span></code></pre>
<h3 data-id="heading-49">Debugæ¨¡å¼çš„é™åˆ¶å’Œæœ€ä½³å®è·µ</h3>
<p><strong>ä½¿ç”¨å‰æ</strong>:</p>
<ul>
<li>âœ… é¡¹ç›®å¯ä»¥è¿è¡Œ(éœ€è¦å®é™…æ‰§è¡Œä»£ç )</li>
<li>âœ… åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨(é¿å…å½±å“ç”Ÿäº§)</li>
<li>âœ… æœ‰å¤ç°æ­¥éª¤(å³ä½¿æ˜¯ä½æ¦‚ç‡)</li>
</ul>
<p><strong>æ³¨æ„äº‹é¡¹</strong>:</p>
<ul>
<li>âš ï¸ AIæ³¨å…¥çš„æ—¥å¿—å¯èƒ½å½±å“æ€§èƒ½,è°ƒè¯•å®Œè®°å¾—æ¸…ç†</li>
<li>âš ï¸ æ•æ„Ÿæ•°æ®(å¯†ç /token)æ³¨æ„è„±æ•</li>
<li>âš ï¸ æŸäº›å®æ—¶æ€§è¦æ±‚é«˜çš„ä»£ç è°¨æ…ä½¿ç”¨</li>
</ul>
<p><strong>æœ€ä½³å®è·µ</strong>:</p>
<ol>
<li><strong>æè¿°è¦è¯¦ç»†</strong>: æä¾›å°½å¯èƒ½å¤šçš„ç°è±¡å’Œä¸Šä¸‹æ–‡</li>
<li><strong>é…åˆå¤ç°</strong>: æŒ‰AIçš„æŒ‡å¼•ç²¾ç¡®å¤ç°é—®é¢˜</li>
<li><strong>åŠæ—¶åé¦ˆ</strong>: AIé—®ä½ é—®é¢˜æ—¶,å¿«é€Ÿå›ç­”å¸®åŠ©å®šä½</li>
<li><strong>éªŒè¯è¦å……åˆ†</strong>: ä¿®å¤åå¤šæµ‹è¯•å‡ ä¸ªåœºæ™¯</li>
<li><strong>æ¸…ç†è¦å½»åº•</strong>: ç¡®è®¤AIå·²ç§»é™¤æ‰€æœ‰è°ƒè¯•ä»£ç </li>
</ol>

**Debugæ¨¡å¼çš„å“²å­¦**: ä¸æ˜¯è®©AIå®Œå…¨è‡ªä¸»åœ°ä¿®Bug,è€Œæ˜¯"AIè´Ÿè´£æœºæ¢°æ€§çš„æ—¥å¿—æ’å…¥å’Œæ•°æ®æ”¶é›†,ä½ è´Ÿè´£æä¾›äººç±»åˆ¤æ–­å’Œä¸šåŠ¡çŸ¥è¯†"ã€‚è¿™ç§äººæœºåä½œæ¯”çº¯AIæˆ–çº¯äººå·¥éƒ½æ›´é«˜æ•ˆã€‚

<h2 data-id="heading-50">æ¨¡å¼ç»„åˆ:1+1&gt;2çš„ååŒæ•ˆåº”</h2>
<p>æŒæ¡å•ä¸ªæ¨¡å¼åªæ˜¯å¼€å§‹,çœŸæ­£çš„é«˜æ‰‹æ‡‚å¾—<strong>ç»„åˆä½¿ç”¨</strong>ã€‚</p>
<h3 data-id="heading-51">ç»å…¸ç»„åˆå¥—è·¯</h3>
<h4 data-id="heading-52">ç»„åˆ1: Ask â†’ Plan â†’ Agent (å¤§å‹éœ€æ±‚æ ‡å‡†æµç¨‹)</h4>
<pre><code class="hljs language-markdown" lang="markdown">é€‚ç”¨: å¤æ‚åŠŸèƒ½å¼€å‘ã€æ¶æ„é‡æ„

å®Œæ•´æµç¨‹:
Day 1:
<span class="hljs-bullet">1.</span> Askæ¨¡å¼: äº†è§£ç°æœ‰æ¶æ„å’ŒæŠ€æœ¯æ ˆ
   "ç°æœ‰çš„ç”¨æˆ·æƒé™æ˜¯æ€ä¹ˆå®ç°çš„?"

<span class="hljs-bullet">2.</span> Askæ¨¡å¼: ç ”ç©¶ç±»ä¼¼åŠŸèƒ½çš„å®ç°
   "é¡¹ç›®ä¸­æœ‰æ²¡æœ‰ç±»ä¼¼çš„RBACå®ç°å¯ä»¥å‚è€ƒ?"

<span class="hljs-bullet">3.</span> è‡ªå·±æ€è€ƒ: ç¡®å®šæŠ€æœ¯æ–¹æ¡ˆ
<span class="hljs-bullet">   -</span> å†³å®šç”¨RBACæ¨¡å‹
<span class="hljs-bullet">   -</span> è§’è‰²å’Œæƒé™çš„ç²’åº¦è®¾è®¡

Day 2:
<span class="hljs-bullet">4.</span> Planæ¨¡å¼: ç”Ÿæˆè¯¦ç»†å®æ–½è®¡åˆ’
   "ä¸ºé¡¹ç›®æ·»åŠ å®Œæ•´çš„RBACæƒé™ç³»ç»Ÿ,
   åŒ…æ‹¬è§’è‰²ç®¡ç†ã€æƒé™é…ç½®ã€å‰ç«¯é‰´æƒç»„ä»¶"

<span class="hljs-bullet">5.</span> å®¡æ ¸è®¡åˆ’: ç¡®è®¤æ–¹æ¡ˆå¯è¡Œæ€§,ä¿®æ”¹ç»†èŠ‚

<span class="hljs-bullet">6.</span> æ‰¹å‡†æ‰§è¡Œ: åˆ†3ä¸ªé˜¶æ®µé€æ­¥å®æ–½

Day 3:
<span class="hljs-bullet">7.</span> Agentæ‰§è¡Œ: æŒ‰è®¡åˆ’è‡ªåŠ¨åŒ–å¼€å‘

<span class="hljs-bullet">8.</span> å‘ç°Bug: æƒé™åˆ¤æ–­é€»è¾‘æœ‰é—®é¢˜

<span class="hljs-bullet">9.</span> Debugæ¨¡å¼: ç²¾å‡†å®šä½ä¿®å¤
</code></pre>
<h4 data-id="heading-53">ç»„åˆ2: Agent â†’ Debug (å¿«é€Ÿå¼€å‘ + é—®é¢˜ä¿®å¤)</h4>
<pre><code class="hljs language-markdown" lang="markdown">é€‚ç”¨: è¿­ä»£å¼€å‘ã€å¿«é€ŸåŸå‹

æµç¨‹:
<span class="hljs-bullet">1.</span> Agentæ¨¡å¼: å¿«é€Ÿå®ç°åŠŸèƒ½
   "å®ç°å•†å“è¯¦æƒ…é¡µ,åŒ…æ‹¬å›¾ç‰‡è½®æ’­ã€
   è§„æ ¼é€‰æ‹©ã€åŠ å…¥è´­ç‰©è½¦"

<span class="hljs-bullet">2.</span> æœ¬åœ°æµ‹è¯•: å‘ç°åŠ è´­åæ•°é‡ä¸å¯¹

<span class="hljs-bullet">3.</span> Debugæ¨¡å¼: å®šä½æ˜¯çŠ¶æ€åŒæ­¥é—®é¢˜

<span class="hljs-bullet">4.</span> Agentæ¨¡å¼: ä¿®å¤çŠ¶æ€åŒæ­¥é€»è¾‘

<span class="hljs-bullet">5.</span> å†æ¬¡æµ‹è¯•: åŠŸèƒ½æ­£å¸¸
</code></pre>
<h4 data-id="heading-54">ç»„åˆ3: Ask â†’ Agent â†’ Ask (å­¦ä¹ å‹å¼€å‘)</h4>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">é€‚ç”¨: å­¦ä¹ æ–°æŠ€æœ¯æ ˆã€å®ç°é™Œç”ŸåŠŸèƒ½</span>

<span class="hljs-section">æµç¨‹:</span>
1. Ask: <span class="hljs-string">"è¿™ä¸ªé¡¹ç›®çš„è¡¨å•éªŒè¯æ˜¯æ€ä¹ˆåšçš„?"</span>
   â†’ äº†è§£ä½¿ç”¨äº†react-hook-form + zod

2. Ask: <span class="hljs-string">"èƒ½ç»™æˆ‘è®²è§£ä¸€ä¸‹zod schemaçš„å†™æ³•å—?"</span>
   â†’ AIè®²è§£zodçš„åŸºç¡€ç”¨æ³•

3. Agent: <span class="hljs-string">"å‚è€ƒç°æœ‰çš„LoginForm,
   å®ç°ä¸€ä¸ªç”¨æˆ·æ³¨å†Œè¡¨å•,éªŒè¯è§„åˆ™..."</span>
   â†’ AIç”Ÿæˆä»£ç 

4. Ask: <span class="hljs-string">"ä¸ºä»€ä¹ˆè¦ç”¨zodResolverè€Œä¸æ˜¯ç›´æ¥validate?"</span>
   â†’ ç†è§£æŠ€æœ¯é€‰å‹åŸå› 

5. Ask: <span class="hljs-string">"è¿™æ ·å†™æœ‰ä»€ä¹ˆæ€§èƒ½é—®é¢˜å—?"</span>
   â†’ æ·±å…¥ç†è§£å®ç°ç»†èŠ‚
</code></pre>
<h3 data-id="heading-55">å®æˆ˜æ¡ˆä¾‹:æ·»åŠ ç”¨æˆ·æƒé™ç³»ç»Ÿ</h3>
<p><strong>ä»»åŠ¡</strong>: ä¸ºSaaSå¹³å°æ·»åŠ å®Œæ•´çš„ç”¨æˆ·æƒé™ç®¡ç†ç³»ç»Ÿ</p>
<p><strong>3å¤©å®æ–½æµç¨‹</strong>:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/503b54bab4064547866c731dfe0be659~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767846559&amp;x-signature=odQ5hFASuzIh5ulfvGApWtw6l5o%3D" alt="cursor03-3å¤©å®æˆ˜æµç¨‹æ—¶é—´çº¿.png" loading="lazy"/></p>
<h3 data-id="heading-56">æ¨¡å¼åˆ‡æ¢çš„é»„é‡‘æ³•åˆ™</h3>
<p><strong>æ³•åˆ™1: ç”±æ…¢åˆ°å¿«,é€æ­¥å‡çº§</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">æ–°é¡¹ç›®: Askæ¢ç´¢ â†’ Planè§„åˆ’ â†’ Agentæ‰§è¡Œ</span>
<span class="hljs-section">ç†Ÿæ‚‰é¡¹ç›®: Planè§„åˆ’ â†’ Agentæ‰§è¡Œ</span>
<span class="hljs-section">éå¸¸ç†Ÿæ‚‰: Agentç›´æ¥æ‰§è¡Œ</span>
</code></pre>
<p><strong>æ³•åˆ™2: æŒ‰æƒé™çº§åˆ«å‡çº§</strong></p>
<pre><code class="hljs language-scss" lang="scss">ä¸ç¡®å®š â†’ <span class="hljs-built_in">Ask</span>(åªè¯»,å®‰å…¨)
ç¡®å®šæ–¹æ¡ˆ â†’ <span class="hljs-built_in">Plan</span>(å¯æ§æ‰§è¡Œ)
å®Œå…¨ç¡®å®š â†’ <span class="hljs-built_in">Agent</span>(è‡ªä¸»æ‰§è¡Œ)
</code></pre>
<p><strong>æ³•åˆ™3: å‡ºé—®é¢˜å°±é™çº§</strong></p>
<pre><code class="hljs language-rust" lang="rust">Agentæ”¹ä¹±äº† â†’ å›é€€Plan,é‡æ–°è§„åˆ’
Planæ–¹æ¡ˆä¸å¯¹ â†’ å›åˆ°Ask,æ·±å…¥ç†è§£
<span class="hljs-built_in">Debug</span>å®šä½ä¸åˆ° â†’ ç”¨Askç†è§£ä»£ç é€»è¾‘
</code></pre>

**é«˜æ‰‹çš„åˆ¤æ–­æ ‡å‡†**:
- éœ€æ±‚æ¸…æ™°åº¦ &lt; 70% â†’ Askæ¨¡å¼
- å½±å“æ–‡ä»¶ &gt; 10ä¸ª â†’ Planæ¨¡å¼
- é‡åˆ°å¤æ‚Bug â†’ Debugæ¨¡å¼
- å…¶ä»–æƒ…å†µ â†’ Agentæ¨¡å¼

<h2 data-id="heading-57">é¿å‘æŒ‡å—å’Œæœ€ä½³å®è·µ</h2>
<h3 data-id="heading-58">4ä¸ªå¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-59">é”™è¯¯1: éœ€æ±‚ä¸æ˜ç¡®å°±ç”¨Agent</h4>
<pre><code class="hljs language-markdown" lang="markdown">âŒ é”™è¯¯åšæ³•:
Prompt: "å¸®æˆ‘ä¼˜åŒ–ä¸€ä¸‹é¦–é¡µæ€§èƒ½"
â†’ ä½ è‡ªå·±éƒ½ä¸çŸ¥é“ä¼˜åŒ–ä»€ä¹ˆ,AIæ›´ççŒœ
â†’ Agentå¯èƒ½æ”¹äº†ä¸€å †æ— å…³ä»£ç 

âœ… æ­£ç¡®åšæ³•:
<span class="hljs-bullet">1.</span> å…ˆç”¨Debugæ¨¡å¼åˆ†ææ€§èƒ½ç“¶é¢ˆ
<span class="hljs-bullet">2.</span> æ˜ç¡®ä¼˜åŒ–ç›®æ ‡(å¦‚:é¦–å±åŠ è½½ä»5sé™åˆ°2s)
<span class="hljs-bullet">3.</span> ç”¨Agentæ‰§è¡Œå…·ä½“ä¼˜åŒ–æªæ–½
</code></pre>
<h4 data-id="heading-60">é”™è¯¯2: å°æ”¹åŠ¨ä¹Ÿç”¨Planæ¨¡å¼</h4>
<pre><code class="hljs language-diff" lang="diff">âŒ é”™è¯¯åšæ³•:
æ”¹ä¸ªæŒ‰é’®é¢œè‰²ä¹Ÿè¦ç”Ÿæˆè®¡åˆ’
â†’ è®¡åˆ’æœ¬èº«æ¯”æ”¹ä»£ç è¿˜è´¹æ—¶é—´

âœ… æ­£ç¡®åšæ³•:
å°æ”¹åŠ¨ç›´æ¥ç”¨:
<span class="hljs-deletion">- å•è¡Œæ”¹åŠ¨: å…‰æ ‡åœç•™,Cmd+Kå†…è”ç¼–è¾‘</span>
<span class="hljs-deletion">- å‡ è¡Œæ”¹åŠ¨: Agentæ¨¡å¼å¿«é€Ÿä¿®æ”¹</span>
<span class="hljs-deletion">- å¤§æ‰¹é‡æ”¹åŠ¨: æ‰éœ€è¦Planè§„åˆ’</span>
</code></pre>
<h4 data-id="heading-61">é”™è¯¯3: Bugè°ƒè¯•ä¸ç”¨Debugæ¨¡å¼</h4>
<pre><code class="hljs language-markdown" lang="markdown">âŒ é”™è¯¯åšæ³•:
å‡­æ„Ÿè§‰çæ”¹,æµªè´¹å¤§é‡æ—¶é—´
æ‰‹åŠ¨åŠ console.log,æ”¹å®Œå¿˜è®°åˆ 

âœ… æ­£ç¡®åšæ³•:
å¤æ‚Bugä¼˜å…ˆç”¨Debugæ¨¡å¼:
<span class="hljs-bullet">1.</span> AIè‡ªåŠ¨æ³¨å…¥æ—¥å¿—(ä¸ä¼šå¿˜è®°åˆ )
<span class="hljs-bullet">2.</span> æ•°æ®é©±åŠ¨åˆ†æ(ä¸é çŒœ)
<span class="hljs-bullet">3.</span> ç²¾å‡†ä¿®å¤(ä¸ä¹±æ”¹)
</code></pre>
<h4 data-id="heading-62">é”™è¯¯4: ç›²ç›®ä¿¡ä»»Agentè¾“å‡º</h4>
<pre><code class="hljs language-markdown" lang="markdown">âŒ é”™è¯¯åšæ³•:
Agentæ”¹å®Œä¸æ£€æŸ¥å°±git commit
â†’ æ½œåœ¨bugè¿›å…¥ä»£ç åº“

âœ… æ­£ç¡®åšæ³•:
Agentå®Œæˆåå¿…é¡»:
<span class="hljs-bullet">1.</span> Reviewæ”¹åŠ¨(git diffæŸ¥çœ‹æ‰€æœ‰ä¿®æ”¹)
<span class="hljs-bullet">2.</span> è¿è¡Œæµ‹è¯•(npm test)
<span class="hljs-bullet">3.</span> æœ¬åœ°éªŒè¯åŠŸèƒ½
<span class="hljs-bullet">4.</span> å†æäº¤ä»£ç 
</code></pre>
<h3 data-id="heading-63">3ä¸ªæå‡æ•ˆç‡çš„é»„é‡‘æ³•åˆ™</h3>
<h4 data-id="heading-64">æ³•åˆ™1: æ¨¡å¼é€‰æ‹©ä¼˜å…ˆçº§</h4>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">é‡åˆ°ä»»åŠ¡æ—¶çš„æ€è€ƒé¡ºåº:</span>

1ï¸âƒ£ è¿™æ˜¯Bugå—?
   æ˜¯ â†’ Debugæ¨¡å¼

2ï¸âƒ£ éœ€æ±‚æ˜ç¡®å—?
   å¦ â†’ Askæ¨¡å¼æ¢ç´¢

3ï¸âƒ£ å½±å“èŒƒå›´å¤§å—(&gt;10ä¸ªæ–‡ä»¶)?
   æ˜¯ â†’ Planæ¨¡å¼è§„åˆ’

4ï¸âƒ£ ä»¥ä¸Šéƒ½ä¸æ˜¯?
   â†’ Agentæ¨¡å¼æ‰§è¡Œ
</code></pre>
<h4 data-id="heading-65">æ³•åˆ™2: å–„ç”¨æ¨¡å¼ç»„åˆ</h4>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ä¸è¦å­¤ç«‹ä½¿ç”¨å•ä¸ªæ¨¡å¼:</span>

<span class="hljs-section">å•ä¸€æ¨¡å¼(ä½æ•ˆ):</span>
Agentæ¨¡å¼ â†’ æ”¹ä¹±äº† â†’ æ‰‹åŠ¨ä¿®å¤ â†’ æµªè´¹æ—¶é—´

<span class="hljs-section">ç»„åˆæ¨¡å¼(é«˜æ•ˆ):</span>
Askç†è§£ â†’ Planè§„åˆ’ â†’ Agentæ‰§è¡Œ â†’ Debugä¿®å¤
</code></pre>
<h4 data-id="heading-66">æ³•åˆ™3: å»ºç«‹ä¸ªäººworkflowæ¨¡æ¿</h4>
<pre><code class="hljs language-markdown" lang="markdown">åœ¨.cursorrulesä¸­å®šä¹‰ä½ çš„æ ‡å‡†æµç¨‹:

<span class="hljs-section"># æ–°åŠŸèƒ½å¼€å‘æ ‡å‡†æµç¨‹</span>
<span class="hljs-bullet">1.</span> Askæ¨¡å¼: ç†è§£ç°æœ‰æ¶æ„
<span class="hljs-bullet">2.</span> è‡ªå·±è®¾è®¡: æŠ€æœ¯æ–¹æ¡ˆå’Œæ¥å£
<span class="hljs-bullet">3.</span> Planæ¨¡å¼: ç”Ÿæˆå®æ–½è®¡åˆ’
<span class="hljs-bullet">4.</span> Agentæ¨¡å¼: åˆ†é˜¶æ®µæ‰§è¡Œ
<span class="hljs-bullet">5.</span> Debugæ¨¡å¼: ä¿®å¤å‘ç°çš„é—®é¢˜
<span class="hljs-bullet">6.</span> Askæ¨¡å¼: ä»£ç reviewå’Œä¼˜åŒ–å»ºè®®

<span class="hljs-section"># ç´§æ€¥Bugä¿®å¤æµç¨‹</span>
<span class="hljs-bullet">1.</span> Debugæ¨¡å¼: å¿«é€Ÿå®šä½æ ¹å› 
<span class="hljs-bullet">2.</span> Agentæ¨¡å¼: ç²¾å‡†ä¿®å¤
<span class="hljs-bullet">3.</span> Askæ¨¡å¼: è¯¢é—®ç±»ä¼¼é—®é¢˜é¢„é˜²æªæ–½
</code></pre>
<h3 data-id="heading-67">å›¢é˜Ÿåä½œå»ºè®®</h3>
<p>å¦‚æœå›¢é˜Ÿä½¿ç”¨Cursor,å»ºè®®:</p>
<ol>
<li><strong>åˆ¶å®šæ¨¡å¼ä½¿ç”¨è§„èŒƒ</strong></li>
</ol>
<pre><code class="hljs language-markdown" lang="markdown">å›¢é˜Ÿçº¦å®š:
<span class="hljs-bullet">-</span> ä¿®æ”¹&gt;5ä¸ªæ–‡ä»¶å¿…é¡»ç”¨Planæ¨¡å¼
<span class="hljs-bullet">-</span> Bugä¿®å¤ä¼˜å…ˆç”¨Debugæ¨¡å¼
<span class="hljs-bullet">-</span> æ–°äººå¿…é¡»ç”¨Askæ¨¡å¼å­¦ä¹ ä»£ç 
<span class="hljs-bullet">-</span> Agentä¿®æ”¹å¿…é¡»æœ‰äººreview
</code></pre>
<ol start="2">
<li><strong>å…±äº«.cursorrules</strong></li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å›¢é˜Ÿç»Ÿä¸€çš„è§„åˆ™æ–‡ä»¶</span>
.cursorrules â†’ æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•,gitæäº¤
æ¯ä¸ªäººéƒ½éµå¾ªç»Ÿä¸€çš„AIè¡Œä¸ºè§„èŒƒ
</code></pre>
<ol start="3">
<li><strong>å»ºç«‹æœ€ä½³å®è·µåº“</strong></li>
</ol>
<pre><code class="hljs language-markdown" lang="markdown">è®°å½•å›¢é˜Ÿçš„æˆåŠŸæ¡ˆä¾‹:
<span class="hljs-bullet">-</span> å“ªäº›åœºæ™¯ç”¨å“ªä¸ªæ¨¡å¼æ•ˆæœå¥½
<span class="hljs-bullet">-</span> å¸¸è§é—®é¢˜çš„æ ‡å‡†Prompt
<span class="hljs-bullet">-</span> è¸©è¿‡çš„å‘å’Œè§£å†³æ–¹æ¡ˆ
</code></pre>
<h2 data-id="heading-68">æ€»ç»“:æ¨¡å¼çš„è‰ºæœ¯</h2>
<h3 data-id="heading-69">5ä¸ªå…³é”®æ”¶è·</h3>
<ol>
<li>
<p><strong>4ç§æ¨¡å¼ = 4ç§æ­¦å™¨,åœºæ™¯å†³å®šé€‰æ‹©</strong></p>
<ul>
<li>Agent: è‡ªä¸»æ‰§è¡Œ,æ•ˆç‡æœ€é«˜ä½†é£é™©ä¹Ÿé«˜</li>
<li>Ask: åªè¯»æ¢ç´¢,å®‰å…¨ç¬¬ä¸€</li>
<li>Plan: å…ˆè§„åˆ’åæ‰§è¡Œ,å¤§éœ€æ±‚å¿…å¤‡</li>
<li>Debug: æ•°æ®é©±åŠ¨,Bugå…‹æ˜Ÿ</li>
</ul>
</li>
<li>
<p><strong>æƒé™çº§åˆ«æ˜¯æ ¸å¿ƒæ¦‚å¿µ</strong></p>
<ul>
<li>é«˜æƒé™(Agent/Debug): ç¡®å®šæ€§é«˜æ—¶ä½¿ç”¨</li>
<li>ä¸­æƒé™(Plan): éœ€è¦æŠŠæ§æ—¶ä½¿ç”¨</li>
<li>ä½æƒé™(Ask): ä¸ç¡®å®šæ—¶ä½¿ç”¨</li>
</ul>
</li>
<li>
<p><strong>æ¨¡å¼ç»„åˆå¨åŠ›æ— ç©·</strong></p>
<ul>
<li>Askâ†’Planâ†’Agent: æ ‡å‡†å¼€å‘æµç¨‹</li>
<li>Agentâ†’Debug: å¿«é€Ÿè¿­ä»£æµç¨‹</li>
<li>Askâ†’Agentâ†’Ask: å­¦ä¹ å‹å¼€å‘</li>
</ul>
</li>
<li>
<p><strong>é”™è¯¯ä½¿ç”¨çš„ä»£ä»·å¾ˆé«˜</strong></p>
<ul>
<li>ç”¨é”™æ¨¡å¼æµªè´¹æ—¶é—´</li>
<li>Agentçæ”¹ä»£ç é€ æˆbug</li>
<li>ä¸ç”¨Debugç›²ç›®è°ƒè¯•</li>
</ul>
</li>
<li>
<p><strong>æŒæ¡åˆ‡æ¢æ—¶æœºæ˜¯å…³é”®</strong></p>
<ul>
<li>ç”±æ…¢åˆ°å¿«é€æ­¥å‡çº§</li>
<li>å‡ºé—®é¢˜åŠæ—¶é™çº§</li>
<li>æ ¹æ®ç†Ÿæ‚‰åº¦çµæ´»è°ƒæ•´</li>
</ul>
</li>
</ol>
<h3 data-id="heading-70">ç«‹å³è¡ŒåŠ¨</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å›é¡¾æœ€è¿‘çš„Cursorä½¿ç”¨,æ‰¾å‡º3æ¬¡ç”¨é”™æ¨¡å¼çš„æƒ…å†µ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å°è¯•ç”¨Debugæ¨¡å¼è§£å†³ä¸€ä¸ªå›°æ‰°ä½ çš„Bug</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä¸‹æ¬¡å¤§éœ€æ±‚å¼€å‘,å…ˆç”¨Planæ¨¡å¼è§„åˆ’</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> åœ¨.cursorrulesä¸­å®šä¹‰ä½ çš„ä¸ªäººworkflow</li>
</ul>
<h3 data-id="heading-71">æ£€æŸ¥æ¸…å•</h3>
<p>åœ¨ä½¿ç”¨Cursorå‰,å¿«é€Ÿè‡ªæ£€:</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">â–¡</span> <span class="hljs-string">è¿™æ˜¯Bugå—?</span> <span class="hljs-string">â†’</span> <span class="hljs-attr">Yes:</span> <span class="hljs-string">Debugæ¨¡å¼</span>
<span class="hljs-string">â–¡</span> <span class="hljs-string">éœ€æ±‚æ¸…æ™°å—?</span> <span class="hljs-string">â†’</span> <span class="hljs-attr">No:</span> <span class="hljs-string">Askæ¨¡å¼æ¢ç´¢</span>
<span class="hljs-string">â–¡</span> <span class="hljs-string">å½±å“&gt;10ä¸ªæ–‡ä»¶?</span> <span class="hljs-string">â†’</span> <span class="hljs-attr">Yes:</span> <span class="hljs-string">Planæ¨¡å¼</span>
<span class="hljs-string">â–¡</span> <span class="hljs-string">æ ¸å¿ƒä¸šåŠ¡é€»è¾‘?</span> <span class="hljs-string">â†’</span> <span class="hljs-attr">Yes:</span> <span class="hljs-string">è°¨æ…ä½¿ç”¨Agent</span>
<span class="hljs-string">â–¡</span> <span class="hljs-string">æœ‰æµ‹è¯•è¦†ç›–å—?</span> <span class="hljs-string">â†’</span> <span class="hljs-attr">No:</span> <span class="hljs-string">å…ˆå†™æµ‹è¯•å†æ”¹ä»£ç </span>
<span class="hljs-string">â–¡</span> <span class="hljs-string">æ”¹å®Œä¼šReviewå—?</span> <span class="hljs-string">â†’</span> <span class="hljs-string">å¿…é¡»Review!</span>
</code></pre>
<hr/>
<h2 data-id="heading-72">ç›¸å…³èµ„æº</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcursor.com%2Fdocs" target="_blank" title="https://cursor.com/docs" ref="nofollow noopener noreferrer">Cursor å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcursor.com%2Fcn%2Fblog%2Fdebug-mode" target="_blank" title="https://cursor.com/cn/blog/debug-mode" ref="nofollow noopener noreferrer">Cursor Debugæ¨¡å¼ä»‹ç»</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcursor.directory" target="_blank" title="https://cursor.directory" ref="nofollow noopener noreferrer">.cursorrules æœ€ä½³å®è·µ</a></li>
</ul>
<h2 data-id="heading-73">ç³»åˆ—æ–‡ç« </h2>
<ul>
<li><a href="https://juejin.cn/post/7589093939656687668" target="_blank" title="https://juejin.cn/post/7589093939656687668">ã€Cursorè¿›é˜¶å®æˆ˜Â·01ã€‘Figmaè®¾è®¡ç¨¿ä¸€é”®è¿˜åŸ</a></li>
<li><a href="https://juejin.cn/post/7589475497001287695" target="_blank" title="https://juejin.cn/post/7589475497001287695">ã€Cursorè¿›é˜¶å®æˆ˜Â·02ã€‘å‘Šåˆ«ä¸‘é™‹ç•Œé¢</a></li>
</ul>
<hr/>
<hr/>
<p><em>æ„Ÿè°¢é˜…è¯»ï¼å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ã€åˆ†äº«ã€‚æˆ‘ä»¬ä¸‹æœŸè§ï¼ğŸ‘‹</em></p>
<p><em>æœ‰é—®é¢˜æ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºï¼Œæˆ‘ä¼šå°½é‡å›å¤æ¯ä¸€æ¡è¯„è®ºã€‚</em></p>
<h3 data-id="heading-74">ğŸ‰ æ„Ÿè°¢å…³æ³¨,è®©æˆ‘ä»¬ä¸€èµ·äº«å—æŠ€æœ¯å¸¦æ¥çš„ç²¾å½©!</h3>
<h3 data-id="heading-75"><strong>æˆ‘åšäº†ä¸€ä¸ªä¸ªäººä¸»é¡µï¼Œèƒ½æ‰¾åˆ°æ‰€æœ‰æˆ‘æä¾›ç»™ä½ çš„èµ„æº</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a></h3></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Next.jsç¬¬åä¹ç« (æœåŠ¡å™¨å‡½æ•°)]]></title>    <link>https://juejin.cn/post/7589897523268861962</link>    <guid>https://juejin.cn/post/7589897523268861962</guid>    <pubDate>2026-01-01T03:10:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589897523268861962" data-draft-id="7589839019717623858" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Next.jsç¬¬åä¹ç« (æœåŠ¡å™¨å‡½æ•°)"/> <meta itemprop="keywords" content="å‰ç«¯,Next.js"/> <meta itemprop="datePublished" content="2026-01-01T03:10:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ»¡zs"/> <meta itemprop="url" content="https://juejin.cn/user/2463384809252397"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Next.jsç¬¬åä¹ç« (æœåŠ¡å™¨å‡½æ•°)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2463384809252397/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ»¡zs
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T03:10:10.000Z" title="Thu Jan 01 2026 03:10:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æœåŠ¡å™¨å‡½æ•°(Server Actions)</h2>
<p>æœåŠ¡å™¨å‡½æ•°æŒ‡çš„æ˜¯å¯ä»¥æ˜¯æœåŠ¡å™¨ç»„ä»¶å¤„ç†è¡¨å•çš„æäº¤ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™APIæ¥å£ï¼Œå¹¶ä¸”è¿˜æ”¯æŒæ•°æ®çš„éªŒè¯ï¼Œä»¥åŠçŠ¶æ€ç®¡ç†ç­‰ã€‚</p>
<h4 data-id="heading-1">æ ¸å¿ƒåŸç†</h4>
<p>æ˜¯å› ä¸ºReactæ‰©å±•äº†åŸç”ŸHTML<code>form</code>è¡¨å•ï¼Œå…è®¸é€šè¿‡<code>action</code>å±æ€§ç›´æ¥ç»‘å®š<code>server action</code>å‡½æ•°ï¼Œå½“è¡¨å•æäº¤åï¼Œå‡½æ•°ä¼šè‡ªåŠ¨æ¥å—åŸç”Ÿçš„<code>FormData</code>æ•°æ®ã€‚</p>
<h4 data-id="heading-2">åŸºæœ¬ç”¨æ³•</h4>
<p>æˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹ä¼ ç»Ÿçš„è¡¨å•æäº¤æ–¹å¼:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant U as ç”¨æˆ·
    participant F as å‰ç«¯è¡¨å•
    participant A as APIè·¯ç”±(route.ts)
    participant D as æ•°æ®åº“

    U-&gt;&gt;F: 1. å¡«å†™è¡¨å•æ•°æ®&lt;br/&gt;{name: 'å¼ ä¸‰', age: 18}
    U-&gt;&gt;F: 2. ç‚¹å‡»æäº¤æŒ‰é’®
    F-&gt;&gt;A: 3. fetch POSTè¯·æ±‚&lt;br/&gt;/api/xxx
    A-&gt;&gt;A: 4. è§£æè¯·æ±‚æ•°æ®
    A-&gt;&gt;D: 5. æ’å…¥æ•°æ®&lt;br/&gt;db.insert('user')
    D--&gt;&gt;A: 6. è¿”å›ç»“æœ
    A--&gt;&gt;F: 7. å“åº” {code: 1, message: 'æˆåŠŸ'}
    F--&gt;&gt;U: 8. æ˜¾ç¤ºç»“æœ
</code></pre>
<p>é‚£ä¹ˆæ¥çœ‹ä¸€ä¸‹æœåŠ¡å™¨å‡½æ•°çš„ç”¨æ³•:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant User as ç”¨æˆ·
    participant Form as è¡¨å•ç»„ä»¶
    participant ServerAction as handleLogin&lt;br/&gt;(æœåŠ¡å™¨å‡½æ•°)
    participant DB as æ•°æ®åº“

    User-&gt;&gt;Form: å¡«å†™ç”¨æˆ·åå’Œå¯†ç 
    User-&gt;&gt;Form: ç‚¹å‡»ç™»å½•æŒ‰é’®(type="submit")
    Form-&gt;&gt;ServerAction: æäº¤ FormData(actionå±æ€§)
    Note over ServerAction: 'use server'&lt;br/&gt;åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œ
    ServerAction-&gt;&gt;ServerAction: è·å– username
    ServerAction-&gt;&gt;ServerAction: è·å– password
    ServerAction-&gt;&gt;ServerAction: è½¬æ¢æ‰€æœ‰æ•°æ®ä¸ºå¯¹è±¡
    ServerAction-&gt;&gt;DB: ç›´æ¥æ“ä½œæ•°æ®åº“&lt;br/&gt;(æ— éœ€APIæ¥å£)
    DB--&gt;&gt;ServerAction: ç™»å½•æˆåŠŸ
</code></pre>
<p>src/app/login/page.tsx</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Login</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleLogin</span>(<span class="hljs-params">formData: FormData</span>) {
        <span class="hljs-string">'use server'</span>
        <span class="hljs-keyword">const</span> username = formData.<span class="hljs-title function_">get</span>(<span class="hljs-string">'username'</span>) <span class="hljs-comment">//æ¥å—å•ä¸ªå‚æ•°</span>
        <span class="hljs-keyword">const</span> password = formData.<span class="hljs-title function_">get</span>(<span class="hljs-string">'password'</span>) <span class="hljs-comment">//æ¥å—å•ä¸ªæ•°æ®</span>
        <span class="hljs-keyword">const</span> form = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(formData) <span class="hljs-comment">//æ¥å—æ‰€æœ‰æ•°æ® {username: 'å¼ ä¸‰', password: '123456'}</span>
        <span class="hljs-comment">//å¯ä»¥ç›´æ¥æ“ä½œæ•°æ®åº“ï¼Œè¿™æ ·å°±æ— éœ€ç¼–å†™APIæ¥å£äº† å“‡å“¦å¤ªæ–¹ä¾¿äº†</span>
    }
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç™»å½•é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-col gap-2 w-[300px] mx-auto mt-30"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">{handleLogin}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-col gap-2"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"border border-gray-300 rounded-md p-2"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ç”¨æˆ·å"</span> /&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"border border-gray-300 rounded-md p-2"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"å¯†ç "</span> /&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-blue-500 text-white p-2 rounded-md"</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<h4 data-id="heading-3">é¢å¤–å‚æ•°</h4>
<p>ç›®å‰åªèƒ½æºå¸¦å›ºå®šå‚æ•°ä¾‹å¦‚ <code>username</code> <code>password</code>,æ— æ³•æºå¸¦å…¶ä»–å‚æ•°ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx">&lt;form action={handleLogin}&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ç”¨æˆ·å"</span> /&gt;</span></span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"å¯†ç "</span> /&gt;</span></span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
&lt;/form&gt;
</code></pre>
<p>é‚£ä¹ˆæˆ‘æƒ³æºå¸¦<code>ID</code>æˆ–è€…å…¶ä»–è‡ªå®šä¹‰å‚æ•°æ€ä¹ˆåšï¼Ÿ</p>
<p>æˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>bind</code>æ–¹æ³•æ¥è¿›è¡Œå‚æ•°æ‰©å±•ï¼Œè¿™æ ·åœ¨å‡½æ•°å†…éƒ¨å°±å¯ä»¥æ¥æ”¶åˆ°<code>ID</code>å‚æ•°ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Login</span>(<span class="hljs-params"/>) {
                              <span class="hljs-comment">//æ¥å—idå‚æ•°</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleLogin</span>(<span class="hljs-params">id: <span class="hljs-built_in">number</span>,formData: FormData</span>) {
        <span class="hljs-string">'use server'</span>
        <span class="hljs-keyword">const</span> username = formData.<span class="hljs-title function_">get</span>(<span class="hljs-string">'username'</span>)
        <span class="hljs-keyword">const</span> password = formData.<span class="hljs-title function_">get</span>(<span class="hljs-string">'password'</span>)
        <span class="hljs-keyword">const</span> form = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(formData)
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(username, password,form,id)
    }
    <span class="hljs-keyword">const</span> userFunction = handleLogin.<span class="hljs-title function_">bind</span>(<span class="hljs-literal">null</span>,<span class="hljs-number">1</span>) <span class="hljs-comment">//ç»‘å®šidå‚æ•°</span>
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç™»å½•é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-col gap-2 w-[300px] mx-auto mt-30"</span>&gt;</span>
                        {/*ä½¿ç”¨æ–°çš„å‡½æ•°ç»‘å®šidå‚æ•° userFunction*/}
                <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">{userFunction}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-col gap-2"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"border border-gray-300 rounded-md p-2"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ç”¨æˆ·å"</span> /&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"border border-gray-300 rounded-md p-2"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"å¯†ç "</span> /&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-blue-500 text-white p-2 rounded-md"</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<h4 data-id="heading-4">å‚æ•°æ ¡éªŒ(zod) + è¯»å–çŠ¶æ€</h4>
<p>zodæ˜¯ä¸€ä¸ªç›®å‰éå¸¸æµè¡Œçš„æ•°æ®éªŒè¯åº“ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨æœåŠ¡å™¨ç«¯è¿›è¡Œæ•°æ®éªŒè¯ï¼Œé¿å…ç”¨æˆ·è¾“å…¥éæ³•æ•°æ®ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">npm i zod
</code></pre>
<p>src/app/lib/login/actions.ts</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-string">'use server'</span>
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">"zod"</span>
<span class="hljs-keyword">const</span> loginSchema = z.<span class="hljs-title function_">object</span>({
    <span class="hljs-attr">username</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">min</span>(<span class="hljs-number">6</span>, <span class="hljs-string">'ç”¨æˆ·åä¸èƒ½å°‘äº6ä½'</span>), <span class="hljs-comment">//zodåŸºæœ¬ç”¨æ³•è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”ä¸èƒ½å°‘äº6ä½</span>
    <span class="hljs-attr">password</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">min</span>(<span class="hljs-number">6</span>, <span class="hljs-string">'å¯†ç ä¸èƒ½å°‘äº6ä½'</span>) <span class="hljs-comment">//zodåŸºæœ¬ç”¨æ³•è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”ä¸èƒ½å°‘äº6ä½</span>
})

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleLogin</span>(<span class="hljs-params">_prevState: <span class="hljs-built_in">any</span>, formData: FormData</span>) {
    <span class="hljs-keyword">const</span> result = loginSchema.<span class="hljs-title function_">safeParse</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(formData)) <span class="hljs-comment">//è°ƒç”¨zodçš„safeParseæ–¹æ³•è¿›è¡Œæ ¡éªŒ</span>
    
    <span class="hljs-keyword">if</span> (!result.<span class="hljs-property">success</span>) {
        <span class="hljs-keyword">const</span> errorMessage = z.<span class="hljs-title function_">treeifyError</span>(result.<span class="hljs-property">error</span>).<span class="hljs-property">properties</span>; <span class="hljs-comment">//è°ƒç”¨zodçš„treeifyErroræ–¹æ³•å°†é”™è¯¯ä¿¡æ¯è½¬æ¢ä¸ºå¯¹è±¡</span>
        <span class="hljs-keyword">let</span> str = <span class="hljs-string">''</span>
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(errorMessage!).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[_key, value]</span>) =&gt;</span> {
            value.<span class="hljs-property">errors</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">error: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
                str += error + <span class="hljs-string">'\n'</span> <span class="hljs-comment">//å°†é”™è¯¯ä¿¡æ¯æ‹¼æ¥æˆå­—ç¬¦ä¸²</span>
            })
        })
        <span class="hljs-keyword">return</span> { <span class="hljs-attr">message</span>: str} <span class="hljs-comment">//è¿”å›é”™è¯¯ä¿¡æ¯</span>
    }
    <span class="hljs-comment">//æ ¡éªŒæˆåŠŸï¼Œè¿›è¡Œæ•°æ®åº“æ“ä½œé€»è¾‘</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">message</span>: <span class="hljs-string">'ç™»å½•æˆåŠŸ'</span> } <span class="hljs-comment">//è¿”å›æˆåŠŸä¿¡æ¯</span>
}
</code></pre>
<p>src/app/login/page.tsx</p>
<p>å¦‚æœè¦è¯»å–çŠ¶æ€éœ€è¦ä½¿ç”¨React19çš„<code>useActionState</code> hookï¼Œè¿™ä¸ªhookå¿…é¡»åœ¨å®¢æˆ·ç«¯ç»„ä»¶ä¸­ä½¿ç”¨ã€‚æ‰€ä»¥éœ€è¦å¢åŠ <code>'use client'</code>å£°æ˜è¿™æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ç»„ä»¶ã€‚</p>
<h5 data-id="heading-5">å‚æ•°</h5>
<p><code>useActionState</code> hookæ¥å—ä¸‰ä¸ªå‚æ•°:</p>
<ul>
<li><strong>fn</strong>: è¡¨å•æäº¤æ—¶è§¦å‘çš„å‡½æ•°ï¼Œæ¥æ”¶ä¸Šä¸€æ¬¡çš„ stateï¼ˆé¦–æ¬¡ä¸º initialStateï¼‰ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå…¶ä½™å‚æ•°ä¸ºè¡¨å•å‚æ•°</li>
<li><strong>initialState</strong>: state çš„åˆå§‹å€¼ï¼Œå¯ä»¥æ˜¯ä»»ä½•å¯åºåˆ—åŒ–çš„å€¼</li>
<li><strong>permalink</strong>(å¯é€‰): è¡¨å•æäº¤åè·³è½¬çš„ URLï¼Œç”¨äº JavaScript åŠ è½½å‰çš„æ¸è¿›å¼å¢å¼º</li>
</ul>
<p>è¿”å›å€¼:</p>
<ul>
<li><strong>state</strong>: å½“å‰çŠ¶æ€ï¼Œåˆå§‹å€¼ä¸º initialStateï¼Œä¹‹åä¸º action çš„è¿”å›å€¼</li>
<li><strong>formAction</strong>: æ–°çš„ action å‡½æ•°ï¼Œç”¨äºä¼ é€’ç»™ form æˆ– button ç»„ä»¶</li>
<li><strong>isPending</strong>: å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æœ‰æ­£åœ¨è¿›è¡Œçš„ Transition</li>
</ul>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-string">'use client'</span>
<span class="hljs-keyword">import</span> { useActionState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>
<span class="hljs-keyword">import</span> { handleLogin } <span class="hljs-keyword">from</span> <span class="hljs-string">"../lib/login/actions"</span>
<span class="hljs-keyword">const</span> initialState = { <span class="hljs-attr">message</span>:<span class="hljs-string">''</span> }
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Login</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> [state, formAction,isPending] = <span class="hljs-title function_">useActionState</span>(handleLogin, initialState)
    
    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç™»å½•é¡µé¢<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            {isPending &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}
            {state.message}
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-col gap-2 w-[300px] mx-auto mt-30"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">{formAction}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-col gap-2"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"border border-gray-300 rounded-md p-2"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ç”¨æˆ·å"</span> /&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"border border-gray-300 rounded-md p-2"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"å¯†ç "</span> /&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"bg-blue-500 text-white p-2 rounded-md"</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªç®¡ç†é¡¹ç›®ä¸­æ‰€æœ‰å¼¹çª—çš„å¼¹çª—ç®¡ç†å™¨ï¼ˆPopupManagerï¼‰]]></title>    <link>https://juejin.cn/post/7589870367764267048</link>    <guid>https://juejin.cn/post/7589870367764267048</guid>    <pubDate>2026-01-01T03:29:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589870367764267048" data-draft-id="7570197010885181486" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªç®¡ç†é¡¹ç›®ä¸­æ‰€æœ‰å¼¹çª—çš„å¼¹çª—ç®¡ç†å™¨ï¼ˆPopupManagerï¼‰"/> <meta itemprop="keywords" content="GitHub,å‰ç«¯,iOS"/> <meta itemprop="datePublished" content="2026-01-01T03:29:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Student_Zhang"/> <meta itemprop="url" content="https://juejin.cn/user/3421335918755149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªç®¡ç†é¡¹ç›®ä¸­æ‰€æœ‰å¼¹çª—çš„å¼¹çª—ç®¡ç†å™¨ï¼ˆPopupManagerï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3421335918755149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Student_Zhang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T03:29:25.000Z" title="Thu Jan 01 2026 03:29:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c3ac97362014f8bbbb8098db176d6fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU3R1ZGVudF9aaGFuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767842964&amp;x-signature=X9xqCfA5zWLa1kkHhb53yhSEjNQ%3D" alt="æ–‡ç« è´´å›¾éœ€æ±‚.png" loading="lazy"/></p>
<h2 data-id="heading-0">åŸºäºä»€ä¹ˆåŸå›  PopupManager çš„äº§ç”Ÿï¼Ÿ</h2>
<p>ç°åœ¨æœ‰è¿™ä¹ˆä¸€ä¸ªä¸šåŠ¡éœ€æ±‚ï¼Œéœ€è¦åœ¨æŸä¸ªç•Œé¢æˆ–è€…åœ¨ window ä¸Šé¢æ·»åŠ ä¸€ä¸ªå¼¹çª—ã€‚è¿™ä¸ªæ—¶å€™åœ¨ä½ çš„å¤§è„‘ä¸­ä½ ä¼šæƒ³åˆ°æ€ä¹ˆæ ·çš„å®ç°æ–¹æ¡ˆå‘¢ï¼Ÿæ¬¢è¿åœ¨ä¸‹é¢çš„è¯„è®ºåŒºè¯´å‡ºä½ çš„æ–¹æ¡ˆã€‚æœŸå¾…ä½ ä»¬çš„å›ç­”ğŸ˜<br/>
åé¢åœ¨éœ€æ±‚è¿­ä»£çš„è¿‡ç¨‹ä¸­ï¼Œåœ¨åŒä¸€ä¸ªç•Œé¢å°±ä¼šå‡ºç°ä¸æ­¢ä¸€ä¸ªå¼¹çª—çš„æ—¶å€™ã€‚è¿™ä¸ªæ—¶å€™ä½ åˆä¼šæ€ä¹ˆå¤„ç†è¿™äº›å¼¹çª—çš„å¼¹å‡ºé¡ºåºå‘¢ï¼Ÿæ¬¢è¿åœ¨ä¸‹é¢çš„è¯„è®ºåŒºè¯´å‡ºä½ çš„æ–¹æ¡ˆã€‚æœŸå¾…ä½ ä»¬çš„å›ç­”ğŸ˜</p>
<h2 data-id="heading-1">æ”¹é€ ä¹‹å‰çš„å®ç°æ–¹å¼</h2>
<p><strong>å•ä¸€çš„å¼¹çª—</strong>ï¼Œæˆ‘ä»¬å°±æ˜¯ç›´æ¥é€šè¿‡è‡ªå®šä¹‰<code>View</code> ç„¶ååœ¨å½“å‰çš„æ§åˆ¶å™¨å¼¹å‡ºæˆ–è€…è·å–<code>keyWindow</code> ç„¶åæ·»åŠ å¼¹çª—ã€‚<br/>
<strong>å¤šå¼¹çª—</strong>çš„æ—¶å€™å°±ä¼šé€šè¿‡ä¸€å †çš„ <code>BOOL</code> å€¼åšæ ‡å¿—ï¼Œç„¶ååœ¨å¼¹å‡ºä¹‹å‰åšäº†ä¸€å †çš„é€»è¾‘åˆ¤æ–­ï¼Œæ¥åˆ¤æ–­å½“å‰åº”è¯¥å¼¹å‡ºæŸä¸€ä¸ªå¼¹çª—ã€‚<br/>
è¿™æ ·çš„å®ç°æ–¹å¼ï¼Œå¯¹äºä¸€ä¸ªäººä¸€ç›´è´Ÿè´£çš„ä¸šåŠ¡å¯èƒ½ä¼šå®ç°èµ·æ¥ç®€å•ä¸€äº›ï¼Œä½†æ˜¯åœ¨äººå‘˜äº¤æ›¿çš„æ—¶å€™ï¼Œä¼šè®©åé¢çš„äººå¯¹é€»è¾‘ä»£ç äº§ç”Ÿå¾ˆå¤šå›°æƒ‘ã€‚æ‰€ä»¥æˆ‘ä»¬å°±åœ¨æƒ³è¿™ä¸ªè¦æ€ä¹ˆå»åšä¸€äº›æ”¹é€ ã€‚</p>
<h2 data-id="heading-2">æ”¹é€ </h2>
<p>æˆ‘ä»¬ä¸€å¼€å§‹çš„æ€è·¯å°±æ˜¯é¡¹ç›®ä¸­çš„æ‰€æœ‰å¼¹çª—éƒ½ç”±ä¸€ä¸ªå•ä¾‹æ¥æ§åˆ¶ï¼ŒæŠŠæ‰€æœ‰éœ€è¦æ·»åŠ çš„å¼¹çª—å­˜æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œåœ¨éœ€è¦å¼¹å‡ºçš„æ—¶å€™å–å‡ºç¬¬ä¸€ä¸ªå¼¹çª—ï¼Œç„¶åç»Ÿä¸€çš„åœ¨ <code>keyWindow</code> ä¸Šæ·»åŠ ã€‚å¦‚æœå·²ç»æœ‰å¼¹çª—çš„æ—¶å€™ï¼Œå°±ä¼šä¸ä¼šæ·»åŠ å¼¹çª—ã€‚</p>
<h3 data-id="heading-3">é‡åˆ°çš„é—®é¢˜---1.å¼¹çª—æ˜¾ç¤ºçš„åœ¨å“ªä¸ªç•Œé¢</h3>
<p>é¦–å…ˆæŠŠå¼¹çª—éƒ½æ·»åŠ åœ¨ <code>keyWindow</code> ä¸Šçš„æ—¶å€™ï¼Œæœ‰çš„ä¸šåŠ¡é€»è¾‘æ˜¯ä¸éœ€è¦çš„ã€‚æ‰€ä»¥æˆ‘ä»¬å°±å¢åŠ äº†ä¸€ä¸ª<code>targetViewControllerClasses</code> çš„å±æ€§ï¼Œç”¨æ¥å‘Šè¯‰ç®¡ç†å™¨ï¼Œä½ æ˜¯è¦åœ¨å“ªä¸ªæ§åˆ¶å™¨æ˜¾ç¤ºå¼¹çª—ã€‚è¿™æ ·ï¼Œæ¯ä¸€ä¸ªå¼¹çª—å°±æœ‰äº†è‡ªå·±åº”è¯¥æ˜¾ç¤ºçš„æ§åˆ¶å™¨ã€‚</p>
<h3 data-id="heading-4">é‡åˆ°çš„é—®é¢˜---2.å¼¹çª—æœ‰å¯èƒ½ä¼šæœ‰æ˜¾é¡ºåºçš„è°ƒæ•´</h3>
<p>è¿™ä¸ªå‡ºç°çš„æ—¶æœºæ˜¯å› ä¸ºï¼Œé¡¹ç›®ä¸­å¼¹çª—çš„æ•°æ®éƒ½æ˜¯åå°ç»™çš„ï¼Œä½†æ˜¯ä¼šåˆ†å¸ƒåœ¨ä¸åŒçš„æ¥å£è¿”å›çš„ã€‚å¦‚æœæ˜¯ç»Ÿä¸€æ¥å£é‚£ä¹ˆå¯ä»¥ç”¨æ•°æ®è¿”å›çš„é¡ºåºæ¥æ§åˆ¶å¼¹å‡ºçš„é¡ºåºï¼Œä½†æ˜¯è¿™æ ·çš„æ–¹æ¡ˆæ˜æ˜¾æ˜¯ä¸å®é™…çš„ã€‚åé¢åœ¨å†çœ‹äº†å¾ˆå¤šæˆç†Ÿçš„æ–¹æ¡ˆåï¼Œæˆ‘ä»¬ä¹Ÿå’Œåå°å•†é‡å¯¹é¡¹ç›®ä¸­çš„æ‰€æœ‰å¼¹çª—å¢åŠ ä¼˜å…ˆçº§çš„å±æ€§ã€‚<br/>
æˆ‘ä»¬å°±ä¸€å¼€å§‹å­˜å‚¨å¼¹çª—çš„æ•°ç»„è¿›è¡Œé€»è¾‘è°ƒæ•´ï¼Œå¯¹æ•°ç»„ä¸­çš„æ•°æ®åŸºäºä¼˜å…ˆçº§çš„å¤§å°åšäº†ä»å¤§åˆ°å°çš„æ’åºï¼Œè¿™æ ·å°±å¯ä»¥ä¼˜å…ˆå¼¹å‡ºå•Šä¼˜å…ˆçº§é«˜çš„å¼¹çª—ï¼Œå¦‚æœä¼˜å…ˆçº§ç›¸åŒçš„æ—¶å€™å°±æ˜¯çœ‹å…ˆè¿›å…¥æ•°ç»„çš„ä¼šå…ˆå¼¹å‡ºã€‚è¿™æ ·å°±ä¿è¯äº†é¡¹ç›®ä¸­çš„ä¸€ä¸ªç®€å•éœ€æ±‚ã€‚</p>
<h2 data-id="heading-5">ç¤ºä¾‹</h2>
<p>è‡ªå·±å®ç°çš„å¼¹çª—éƒ½è¦éµå¾ªæˆ‘ä»¬çš„<code>&lt;PopupProtocol&gt;</code>åè®®ï¼Œé‚£ä¹ˆç°åœ¨åšä¸ªç®€å•ç¤ºä¾‹ã€‚</p>
<pre><code class="hljs language-objc" lang="objc">PopupView *popupViewFirst1 = [[PopupView alloc] initWithPopupPriority:<span class="hljs-number">5</span> message:<span class="hljs-string">@"ç­‰å¾…çš„å¼¹çª— ä¼˜å…ˆçº§ä¸º5"</span>];
[PopupManager.sharedManager addPopupView:popupViewFirst1];
</code></pre>
<h2 data-id="heading-6">ä¼ é€é—¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FcAibDe%2FPopupManager" target="_blank" title="https://github.com/cAibDe/PopupManager" ref="nofollow noopener noreferrer">github.com/cAibDe/Popuâ€¦</a></h2></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»æ•‘ç«åˆ°é˜²ç«ï¼šæˆ‘åœ¨é‡‘èä¼ä¸šæ„å»ºå¯è§‚æµ‹æ€§ä½“ç³»çš„å®æˆ˜ä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7589920318132404224</link>    <guid>https://juejin.cn/post/7589920318132404224</guid>    <pubDate>2026-01-01T03:48:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589920318132404224" data-draft-id="7589920318132387840" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»æ•‘ç«åˆ°é˜²ç«ï¼šæˆ‘åœ¨é‡‘èä¼ä¸šæ„å»ºå¯è§‚æµ‹æ€§ä½“ç³»çš„å®æˆ˜ä¹‹è·¯"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•,æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-01T03:48:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»æ•‘ç«åˆ°é˜²ç«ï¼šæˆ‘åœ¨é‡‘èä¼ä¸šæ„å»ºå¯è§‚æµ‹æ€§ä½“ç³»çš„å®æˆ˜ä¹‹è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T03:48:37.000Z" title="Thu Jan 01 2026 03:48:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸‹åˆ15:17çš„é‚£åœºæ•…éšœ</h2>
<p>ä¸‹åˆ15:17ï¼Œæ­£å€¼äº¤æ˜“é«˜å³°æœŸï¼Œæ”¯ä»˜æ ¸å¿ƒé“¾è·¯P99å»¶è¿Ÿä»80msé£™å‡è‡³2.3sã€‚</p>
<p>ç”¨æˆ·æŠ•è¯‰å¦‚æ½®æ°´æ¶Œå…¥ï¼Œç›‘æ§å¤§ç›˜å´ä¸€ç‰‡"æ­£å¸¸"â€”â€”å› ä¸ºCPUå°äº70%ï¼Œå†…å­˜å°äº80%ï¼ŒHTTP 5xxé”™è¯¯ç‡å°äº0.1%ã€‚</p>
<p>è¿™å°±æ˜¯æ²¡æœ‰å¯è§‚æµ‹æ€§çš„ä»£ä»·ï¼šç³»ç»Ÿåœ¨å´©æºƒï¼Œè€Œä½ ä¸€æ— æ‰€çŸ¥ã€‚</p>
<p>åœ¨é‡‘èè¡Œä¸šï¼Œæˆ‘ä»¬æ— æ³•æ‰¿å—è¿™ç§"ç›²è·‘"ã€‚å¯è§‚æµ‹æ€§ï¼Œä¸æ˜¯å¯é€‰é¡¹ï¼Œè€Œæ˜¯ç”Ÿå­˜åº•çº¿ã€‚ä¸ºä»€ä¹ˆéœ€è¦å¯è§‚æµ‹æ€§ï¼Ÿæœ¬è´¨ä¸Šå°±æ˜¯äººç±»æƒ³è¦æŒæ§ç³»ç»Ÿçš„å¥åº·çŠ¶å†µã€‚å·¥ç¨‹å¸ˆæ€»æ˜¯æ‹…å¿ƒç³»ç»Ÿä¸å¯ç”¨ï¼Œä¸ºäº†æŒæ§ç³»ç»Ÿï¼Œæ‰€ä»¥å¯è§‚æµ‹æ€§åº”è¿è€Œç”Ÿã€‚å°±å¥½æ¯”ä¸­åŒ»çš„æœ›é—»é—®åˆ‡ï¼Œæ¥åˆ¤å®šä¸€ä¸ªäººçš„å¥åº·çŠ¶æ€ä¸€æ ·ã€‚åªèƒ½çœ‹åˆ°å„é¡¹æŒ‡æ ‡æ­£å¸¸ï¼Œæ‰èƒ½æ¯”è¾ƒæ”¾å¿ƒï¼Œæ™šä¸Šæ‰èƒ½ç¡ä¸ªå®‰ç¨³è§‰ã€‚</p>
<h2 data-id="heading-1">å¯è§‚æµ‹æ€§çš„ä¸‰å¤§åŸºçŸ³</h2>
<p>é‚£é—®é¢˜æ¥äº†ï¼Œæ€ä¹ˆåˆ¤æ–­ç³»ç»Ÿå¯è§‚æµ‹å‘¢ï¼Ÿä¸šç•Œå…¬è®¤çš„ä¸‰å¤§åŸºçŸ³ï¼šæ—¥å¿—ã€è°ƒç”¨é“¾ã€æŒ‡æ ‡ã€‚å’±ä»¬ä¸€ä¸ªä¸€ä¸ªèŠã€‚</p>
<h3 data-id="heading-2">æ—¥å¿—ï¼šæœ€åŸå§‹ä½†ä¹Ÿæœ€çœŸå®</h3>
<p>æ—¥å¿—æœ¬æ¥æ˜¯æ•£è½åœ¨å„ä¸ªç³»ç»Ÿä¹‹é—´çš„ï¼Œæœ€åŸå§‹çš„æ–¹å¼æ˜¯ä»€ä¹ˆï¼Ÿtailã€catã€grepã€awkè¿™äº›è€å¤è‘£ã€‚ä½ å¾—ä¸€å°æœåŠ¡å™¨ä¸€å°æœåŠ¡å™¨ç™»å½•è¿›å»ï¼Œæ‰‹å·¥ç¿»æ—¥å¿—ã€‚</p>
<p>ä½†è¿™å¤ªåˆ†æ•£äº†ï¼Œæ ¹æœ¬ä¸åˆ©äºæ“ä½œã€‚ä½ æƒ³æƒ³ï¼Œçº¿ä¸Šå‡ åå°ç”šè‡³ä¸Šç™¾å°æœåŠ¡å™¨ï¼Œå‡ºäº†é—®é¢˜ä½ æ€ä¹ˆæ‰¾ï¼Ÿæ¥å›åˆ‡å±å¹•åˆ‡åˆ°çœ¼èŠ±ï¼Œè¿˜å®¹æ˜“æ¼æ‰å…³é”®ä¿¡æ¯ã€‚</p>
<p>æ‰€ä»¥éœ€è¦æŠŠå®ƒä»¬æ”¶é›†åˆ°ä¸€èµ·ã€‚è¿™æ—¶å€™Filebeatã€Logstashå°±æ´¾ä¸Šç”¨åœºäº†ï¼Œå®ƒä»¬è´Ÿè´£æ”¶é›†ã€è½¬æ¢ã€æ ¼å¼åŒ–æ—¥å¿—ï¼Œæœ€åå†™åˆ°Elasticsearchçš„ç´¢å¼•é‡Œã€‚å†å¼€å‘ä¸€ä¸ªç•Œé¢æ¥ç®¡ç†è¿™äº›ç´¢å¼•ï¼Œç»´æŠ¤å®ƒä»¬çš„å½’æ¡£ã€æŸ¥è¯¢ç­‰å·¥ä½œâ€”â€”è¿™ä¸ªç•Œé¢å°±æ˜¯Kibanaã€‚</p>
<p>è¯´å®è¯ï¼Œåˆšå¼€å§‹ç”¨ELKçš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿè§‰å¾—éº»çƒ¦ã€‚åˆè¦è£…Filebeatï¼Œåˆè¦é…Logstashï¼Œç´¢å¼•è¿˜å¾—è§„åˆ’ã€‚ä½†ç”¨ä¹ æƒ¯äº†ä¹‹åï¼Œä½ ä¼šå‘ç°çœŸé¦™ã€‚å‡ºé—®é¢˜æ—¶ï¼Œåœ¨Kibanaé‡Œè¾“å…¥ä¸ªå…³é”®å­—ï¼Œå‡ ç§’é’Ÿå°±èƒ½æŠŠç›¸å…³æ—¥å¿—å…¨æå‡ºæ¥ï¼Œæ¯”ä»¥å‰æ•ˆç‡é«˜å¤ªå¤šäº†ã€‚</p>
<h4 data-id="heading-3">é‡‘èçº§æŒ‘æˆ˜ï¼šä»å…³é”®è¯åˆ°è§„åˆ™çš„è·¨è¶Š</h4>
<p>ä½†åœ¨é‡‘èåœºæ™¯ï¼Œæ™®é€šçš„æ—¥å¿—æŸ¥è¯¢å¾ˆå¿«å°±é‡åˆ°ç“¶é¢ˆäº†ã€‚æ”¯ä»˜å¤±è´¥å¯èƒ½è¡¨ç°ä¸º"ä½™é¢ä¸è¶³""é£æ§æ‹¦æˆª""æ¸ é“è¶…æ—¶""è´¦æˆ·å†»ç»“""é™é¢è¶…é™"ç­‰æ•°åç§è¯­ä¹‰ï¼Œä½ ä¸å¯èƒ½æŠŠæ‰€æœ‰å…³é”®è¯éƒ½è®°ä½ã€‚</p>
<p>æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼šé€šè¿‡ç»“æ„åŒ–æ—¥å¿—åŠ ä¸šåŠ¡çŠ¶æ€ç æ ‡å‡†åŒ–ï¼Œå°†"æ”¯ä»˜å¼‚å¸¸"æŠ½è±¡ä¸ºç»Ÿä¸€å­—æ®µã€‚æ¯”å¦‚æ‰€æœ‰æ”¯ä»˜ç›¸å…³çš„é”™è¯¯ï¼Œéƒ½å¿…é¡»åŒ…å«errorCodeã€errorTypeã€bizTypeè¿™äº›æ ‡å‡†å­—æ®µï¼Œè¿™æ ·è§„åˆ™å°±å¯ä»¥å¤ç”¨äº†ã€‚</p>
<p>åŒæ—¶ï¼Œé‡‘èç³»ç»Ÿå¯¹æ—¥å¿—åˆè§„æ€§è¦æ±‚æé«˜ã€‚æ‰€æœ‰æ¶‰åŠèµ„é‡‘æµè½¬çš„æ“ä½œï¼Œæ—¥å¿—å¿…é¡»ä¿ç•™è‡³å°‘5å¹´ï¼Œè€Œä¸”è¦èƒ½éšæ—¶å®¡è®¡ã€‚è¿™å°±è¦æ±‚æˆ‘ä»¬åœ¨æ—¥å¿—é‡‡é›†çš„æœ€å¼€å§‹ï¼Œå°±åšå¥½åˆ†ç±»ã€è„±æ•ã€å½’æ¡£çš„è§„åˆ’ï¼Œä¸èƒ½äº‹åè¡¥æ•‘ã€‚</p>
<h3 data-id="heading-4">è°ƒç”¨é“¾ï¼šç»™è¯·æ±‚è£…ä¸ªGPS</h3>
<p>å¾®æœåŠ¡æ—¶ä»£ï¼Œä¸€ä¸ªè¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸå˜å¾—ç‰¹åˆ«å¤æ‚ã€‚ä»ç”¨æˆ·ç‚¹å‡»æŒ‰é’®å¼€å§‹ï¼Œè¯·æ±‚å¯èƒ½ç»è¿‡Nginxã€ä¸šåŠ¡ç½‘å…³ã€å¾®æœåŠ¡å‰å°ã€å¾®æœåŠ¡ä¸­å°ã€å„ç§ä¸­é—´ä»¶ï¼Œæœ€åæ‰è¿”å›ç»“æœã€‚è¿™ä¸€æ¡é€»è¾‘çº¿æ˜¯å¦æ­£å¸¸ã€æ€§èƒ½å¦‚ä½•ï¼Œå¾—æœ‰åŠæ³•è¿½è¸ªå•Šã€‚</p>
<p>å› æ­¤ä»æµé‡å…¥å£ï¼ˆä¸œè¥¿æµé‡ï¼‰è¿›å…¥ç³»ç»Ÿå¤§é—¨å¼€å§‹ï¼Œå°±éœ€è¦ç»™å®ƒæ‰“ä¸ªæ ‡è®°ã€‚è¿™ä¸ªæ ‡è®°å«TraceIdï¼Œè€Œä¸”è¦å°½å¯èƒ½æ—©åœ°ç”Ÿæˆã€‚åŒæ—¶è¦é‡‡é›†ä½ èƒ½æƒ³åˆ°çš„å„ç§ä¿¡æ¯ï¼šPCè¿˜æ˜¯æ‰‹æœºç«¯ã€uidã€ipã€è®¾å¤‡å·ã€æ—¶é—´ã€è¯·æ±‚æŠ¥æ–‡ç­‰ç­‰ã€‚</p>
<p>è¿™ä¸ªTraceIdä¼šç©¿é€æ•´ä¸ªå¾®æœåŠ¡ç³»ç»Ÿã€‚ä¸ºäº†æ›´ç²¾ç»†åŒ–ï¼Œè¿˜éœ€è¦åœ¨æ¯ä¸ªå¾®æœåŠ¡æ¨¡å—ä¸­å¢åŠ SpanIdï¼ˆå—åŒ—æµé‡ï¼‰ã€‚æ¯ä¸€æ¬¡è¯·æ±‚ï¼Œæˆ‘ä»¬å·´ä¸å¾—ä»Nginxã€ä¸šåŠ¡ç½‘å…³ã€å¾®æœåŠ¡å‰å°ã€å¾®æœåŠ¡ä¸­å°ã€ä¸­é—´ä»¶ï¼Œåˆ°æœ€åçš„è¿”å›ä¿¡æ¯ï¼ˆæˆåŠŸã€å¤±è´¥ã€httpçŠ¶æ€ç ã€ä¸šåŠ¡çŠ¶æ€ç ã€ä¸šåŠ¡æŠ¥æ–‡ï¼‰ï¼Œéƒ½è£…ä¸Šé€è§†çœ¼ã€‚</p>
<p>è¿™é‡Œä¹Ÿäº§ç”Ÿäº†å¾ˆå¤šå·¥å…·ï¼Œæ¯”å¦‚æ—©æœŸå¤§ä¼—ç‚¹è¯„çš„Catï¼Œç°åœ¨å­—èŠ‚ç å¢å¼ºçš„Agentå·¥å…·ï¼Œæœ€å…¸å‹çš„å°±æ˜¯SkyWalkingäº†ã€‚</p>
<p>æœ‰äº†è°ƒç”¨é“¾ä¹‹åï¼Œä½ åœ¨SkyWalkingé‡Œçœ‹æŠ¥è¡¨ï¼Œè·Ÿè¸ªæ…¢æ¥å£ï¼Œä¸€ç›®äº†ç„¶ã€‚å“ªä¸ªç¯èŠ‚æ…¢äº†ï¼Ÿæ˜¯æ•°æ®åº“æŸ¥è¯¢çš„é—®é¢˜ï¼Œè¿˜æ˜¯ç¬¬ä¸‰æ–¹æ¥å£è¶…æ—¶ï¼Ÿä¸€æŸ¥ä¾¿çŸ¥ã€‚</p>
<h4 data-id="heading-5">é‡‘èçº§æŒ‘æˆ˜ï¼šTraceIdçš„å…¨é“¾è·¯ä¿éšœ</h4>
<p>ä½†åœ¨é‡‘èåœºæ™¯ï¼Œè°ƒç”¨é“¾æœ‰ä¸ªè‡´å‘½é—®é¢˜ï¼šTraceIdé€ä¼ åœ¨å¼‚æ­¥çº¿ç¨‹ã€æ¶ˆæ¯é˜Ÿåˆ—æ¶ˆè´¹ã€å®šæ—¶ä»»åŠ¡ä¸­ææ˜“æ–­è£‚ã€‚</p>
<p>ä½ æƒ³æƒ³ï¼Œä¸€ç¬”æ”¯ä»˜è¯·æ±‚è¿›æ¥ï¼Œå¯èƒ½è§¦å‘å¼‚æ­¥é£æ§æ ¡éªŒã€å‘é€MQé€šçŸ¥ã€å®šæ—¶å¯¹è´¦ä»»åŠ¡ã€‚å¦‚æœTraceIdåœ¨æŸä¸ªç¯èŠ‚æ–­äº†ï¼Œæ•´æ¡é“¾è·¯å°±è¿½è¸ªä¸ä¸‹å»äº†ã€‚å‡ºäº†é—®é¢˜ï¼Œä½ è¿å®Œæ•´çš„è°ƒç”¨è·¯å¾„éƒ½çœ‹ä¸åˆ°ï¼Œæ€ä¹ˆæ’æŸ¥ï¼Ÿ</p>
<p>æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆæ˜¯æ”¹é€ SkyWalking Agentï¼Œå¼ºåˆ¶åœ¨MDCï¼ˆMapped Diagnostic Contextï¼‰ä¸­æ³¨å…¥bizIdåŠ traceIdã€‚ä¸ç®¡æ˜¯ä¸»çº¿ç¨‹è¿˜æ˜¯å¼‚æ­¥çº¿ç¨‹ï¼Œä¸ç®¡æ˜¯HTTPè°ƒç”¨è¿˜æ˜¯MQæ¶ˆè´¹ï¼Œéƒ½å¿…é¡»æºå¸¦è¿™ä¸¤ä¸ªæ ‡è¯†ã€‚è¿™æ ·ä¸€æ¥ï¼Œå“ªæ€•æ˜¯è·¨äº†ä¸‰å¤©çš„å¼‚æ­¥å¯¹è´¦ä»»åŠ¡ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½è¿½æº¯å›å½“åˆçš„é‚£ç¬”äº¤æ˜“ã€‚</p>
<p>é‡‘èç³»ç»Ÿè¿˜æœ‰ä¸ªç‰¹ç‚¹ï¼šèµ„é‡‘æµå¿…é¡»ç™¾åˆ†ç™¾å¯è¿½æº¯ã€‚ç›‘ç®¡éƒ¨é—¨éšæ—¶å¯èƒ½è¦æ±‚ä½ æä¾›æŸç¬”äº¤æ˜“çš„å®Œæ•´è°ƒç”¨é“¾ï¼Œä»ç”¨æˆ·å‘èµ·è¯·æ±‚ï¼Œåˆ°æœ€ç»ˆæ‰£æ¬¾æˆåŠŸï¼Œä¸­é—´ç»è¿‡äº†å“ªäº›ç³»ç»Ÿã€å“ªäº›èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„è€—æ—¶å¤šå°‘ï¼Œéƒ½è¦æ¸…æ¸…æ¥šæ¥šã€‚è¿™ä¸æ˜¯"æœ€å¥½æœ‰"ï¼Œè€Œæ˜¯"å¿…é¡»æœ‰"ã€‚</p>
<h3 data-id="heading-6">æŒ‡æ ‡ï¼šä»å¾®è§‚åˆ°å®è§‚çš„è·¨è¶Š</h3>
<p>æœ‰äº†æ—¥å¿—å’Œè°ƒç”¨é“¾ï¼Œå¤Ÿäº†å—ï¼Ÿ</p>
<p>æ²¡æœ‰ï¼</p>
<p>ä½ å¯ä»¥åœ¨KibanaæŸ¥æ—¥å¿—ï¼Œåœ¨SkyWalkingçœ‹è°ƒç”¨é“¾ï¼Œä½†è¿™è¿˜æ˜¯å¤ªå¾®è§‚äº†ã€‚å®ƒä»¬å›ç­”ä¸äº†ä¸€äº›æ›´æ„Ÿæ€§çš„é—®é¢˜ï¼š</p>
<p>ç³»ç»Ÿå¥åº·å—ï¼Ÿè°ƒç”¨æ…¢ä¸æ…¢ï¼Ÿæœ‰æ²¡æœ‰å¼‚å¸¸ï¼Ÿå“ªä¸ªç³»ç»Ÿæœ‰å¼‚å¸¸ï¼Ÿä»€ä¹ˆåŸå› ï¼Ÿå¤šé•¿æ—¶é—´èƒ½æ¢å¤ï¼Ÿæ€ä¹ˆæ¢å¤ï¼Ÿ</p>
<p>è§£å†³äº†ä¸€æ¬¡åˆä¸€æ¬¡çº¿ä¸Šæ•…éšœåï¼Œä½ è¿˜ä¼šè¿›ä¸€æ­¥æé—®ï¼šä¸‹æ¬¡èƒ½æå‰çŸ¥é“å—ï¼Ÿæœ‰æ²¡æœ‰è‡ªåŠ¨å·¡æ£€åŠŸèƒ½ï¼Ÿèƒ½ä¸èƒ½å…ˆäºç”¨æˆ·å‘ç°ï¼Œé™ä½å½±å“é¢ï¼Ÿèƒ½ä¸èƒ½ä¸€ç»å‘ç°ï¼Œå¾ˆå¿«å°±èƒ½æ¢å¤ï¼Ÿ</p>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œå°±éœ€è¦è§„åˆ™ã€‚æ€ä¹ˆåˆ¶å®šè§„åˆ™ï¼Ÿå¯¹äº†ï¼ŒæŒ‡æ ‡å°±è¦ä¸Šåœºäº†ã€‚</p>
<p>æŒ‡æ ‡æœ¬è´¨ä¸Šæ˜¯æ—¶é—´ç»´åº¦çš„ä¸€ä¸ªåŸå­åŒ–çš„åº¦é‡ã€‚æ¯”å¦‚è¯´ï¼ŒæŸå°æœåŠ¡å™¨çš„æŸä¸€åˆ»ï¼ŒCPUåˆ©ç”¨ç‡å¤šå°‘ã€å†…å­˜å ç”¨å¤§ä¸å¤§ã€ç½‘ç»œIOå¤šä¸å¤šã€ç£ç›˜ç©ºé—´å¦‚ä½•ï¼Ÿè¿™å°±æ˜¯Googleæå‡ºçš„USEæ–¹æ³•è®ºâ€”â€”å››å¤§åº¦é‡ã€‚</p>
<p>è¿™æ˜¯æœ€åŸºæœ¬çš„ä¸€äº›æŒ‡æ ‡ï¼Œæ¯ä¸€å°æœåŠ¡å™¨éƒ½éœ€è¦å®‰è£…ã€‚å½“æ¯ä¸€å°æœåŠ¡å™¨éƒ½å®‰è£…äº†è¿™äº›æŒ‡æ ‡é‡‡é›†å™¨åï¼Œè¿™äº›æ•°æ®ä¼šæ±‡æ€»åˆ°Prometheusä¸­ã€‚Prometheusæ˜¯ä¸€ä¸ªæ—¶é—´åºåˆ—çš„æŒ‡æ ‡å­˜å‚¨ã€æŸ¥è¯¢å·¥å…·ã€‚</p>
<h3 data-id="heading-7">æ‹‰æ¨¡å¼è¿˜æ˜¯æ¨æ¨¡å¼ï¼Ÿè¿™ä¸æ˜¯æŠ€æœ¯é—®é¢˜</h3>
<p>Prometheusé‡‡ç”¨çš„æ˜¯æ‹‰æ¨¡å¼ï¼Œå›ºå®šæ—¶é—´æ¯”å¦‚15ç§’é‡‡é›†ä¸€æ¬¡ã€‚</p>
<p>ä¸ºä»€ä¹ˆæ˜¯æ‹‰ï¼Œè€Œä¸æ˜¯æ¨ï¼Ÿå¾ˆå¤šæ–‡ç« æ²¡æœ‰è®²æ¸…æ¥šï¼Œæˆ‘å‘Šè¯‰ä½ ï¼Œæœ¬è´¨ä¸Šä¸æ˜¯æŠ€æœ¯çš„åŸå› ï¼Œæ˜¯ä¸šåŠ¡çš„åŸå› ã€‚</p>
<p>ç¬¬ä¸€ï¼Œæ¨çš„è¯ä½ æ˜¯ä¸€ä¸ªæŒ‡æ ‡ä¸€ä¸ªæŒ‡æ ‡åœ°æ¨ï¼Œé›¶é›¶æ•£æ•£ã€‚</p>
<p>ç¬¬äºŒï¼Œä¸šåŠ¡ä¸Šéœ€è¦ä¸€ä¸ªä¸é—´æ–­çš„æ—¶é—´åŒºé—´ï¼Œæ‰èƒ½ç”»å‡ºå›¾å½¢æˆ–è€…åˆ¶å®šè§„åˆ™ã€‚</p>
<p>æ‰€ä»¥æ‹‰æ¨¡å¼ä¸€æ¬¡æ€§å–å‡ºè‹¥å¹²æŒ‡æ ‡ï¼Œè€Œä¸”æ—¶é—´é—´éš”èƒ½å¤Ÿå¾—åˆ°ä¿è¯ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œä½ è¦ç”»ä¸€æ¡CPUä½¿ç”¨ç‡çš„æ›²çº¿ï¼Œå¦‚æœæ•°æ®ç‚¹æ—¶æ–­æ—¶ç»­ï¼Œè¿™å›¾è¿˜æ€ä¹ˆçœ‹ï¼Ÿ</p>
<p>ä¸ºäº†ç›‘æ§ï¼Œæ¯å°æœåŠ¡å™¨éƒ½éœ€è¦å®‰è£…Exporterï¼ˆå¯¼å‡ºå™¨ï¼‰ï¼Œç„¶åPrometheusç»Ÿä¸€è¿›è¡Œæ‹‰å–å¹¶è£…è¿›å®ƒçš„TSDBæ—¶é—´åºåˆ—å­˜å‚¨é‡Œã€‚</p>
<h3 data-id="heading-8">Grafanaï¼šè®©æ•°æ®ä¼šè¯´è¯</h3>
<p>è¿›å…¥Prometheusåï¼Œåˆæ˜¯ä¸ªé»‘ç›’ï¼Ÿæ€ä¹ˆåŠï¼Ÿåˆ«æ€¥ï¼Œæœ‰Grafanaï¼</p>
<p>å¾ˆå¤šä¼˜ç§€çš„å·¥ç¨‹å¸ˆéƒ½æä¾›äº†Node-Exporterçš„Grafanaæ¨¡æ¿ï¼Œç•Œé¢å¾ˆç§‘æŠ€ã€å¾ˆç‚«ï¼Œçœ‹ä¸Šå»å¾ˆç‰›é€¼ã€‚ä½†åœ¨æˆ‘çœ‹æ¥ï¼Œç‚«ä¸ç‚«ä¸æ˜¯é‡ç‚¹ï¼ŒåŠŸèƒ½ä¹Ÿå¹¶æ²¡æœ‰å¢åŠ å¤šå°‘ï¼Œä¹Ÿä»…ä»…æ˜¯èƒ½å¤Ÿçœ‹æ¸…æŸä¸€æ—¶åˆ»æœåŠ¡å™¨çš„çŠ¶æ€è€Œå·²ã€‚</p>
<p>Grafanaçš„çœŸæ­£ä»·å€¼åœ¨äºï¼šå®ƒæ˜¯æ•…éšœå‡ºç°åçš„åˆ†æå¹³å°ï¼Œæ˜¯æ•…éšœå‘ç”Ÿæ—¶çš„æŠ¥è­¦ä¾æ®ã€‚ä½ å¯ä»¥åœ¨ä¸Šé¢è®¾ç½®å„ç§Dashboardï¼Œç›‘æ§ä¸åŒç»´åº¦çš„æŒ‡æ ‡ï¼Œä¸€æ—¦æ•°æ®å¼‚å¸¸ï¼Œç«‹é©¬å°±èƒ½å‘ç°ã€‚</p>
<h4 data-id="heading-9">é‡‘èçº§æŒ‘æˆ˜ï¼šç§’çº§äº¤æ˜“ä¸‹çš„ç›‘æ§ç›²åŒº</h4>
<p>ä½†Prometheusé»˜è®¤15ç§’é‡‡é›†ä¸€æ¬¡ï¼Œåœ¨é‡‘èåœºæ™¯ä¸‹æœ‰ä¸ªå¤§é—®é¢˜ï¼šç›²åŒºå¤ªå¤§ã€‚</p>
<p>é‡‘èç³»ç»Ÿæ˜¯ç§’çº§äº¤æ˜“ï¼Œé«˜å³°æœŸä¸€ç§’é’Ÿå¯èƒ½æœ‰å‡ åƒç¬”è®¢å•ã€‚15ç§’çš„é‡‡é›†é—´éš”æ„å‘³ç€ä»€ä¹ˆï¼Ÿæ„å‘³ç€ä¸­é—´å¯èƒ½æœ‰å‡ ä¸‡ç¬”äº¤æ˜“ï¼Œä½ å®Œå…¨çœ‹ä¸åˆ°ã€‚å¦‚æœåœ¨è¿™ä¸ªç›²åŒºå†…å‡ºç°äº†çŸ­æš‚çš„æµé‡å°–åˆºæˆ–è€…æ€§èƒ½æŠ–åŠ¨ï¼Œç­‰åˆ°ä¸‹ä¸€æ¬¡é‡‡é›†æ—¶ï¼Œé—®é¢˜å¯èƒ½å·²ç»è¿‡å»äº†ï¼Œä½†ç”¨æˆ·å·²ç»å—å½±å“äº†ã€‚</p>
<p>æˆ‘ä»¬æŠŠæ ¸å¿ƒæœåŠ¡çš„æŒ‡æ ‡é‡‡é›†é¢‘ç‡æå‡åˆ°2ç§’ä¸€æ¬¡ã€‚åˆ«å°çœ‹è¿™ä¸ªæ”¹åŠ¨ï¼Œå¯¹å­˜å‚¨å’Œè®¡ç®—çš„å‹åŠ›æ˜¯æˆå€å¢åŠ çš„ã€‚ä½†æ²¡åŠæ³•ï¼Œé‡‘èç³»ç»Ÿå®¹ä¸å¾—ç›²åŒºã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªæ›´éšè”½çš„é—®é¢˜ï¼šå›ºå®šé˜ˆå€¼å‘Šè­¦åœ¨é‡‘èåœºæ™¯ä¸‹ç»å¸¸è¯¯æŠ¥ã€‚æ¯”å¦‚ä½ è®¾ç½®"äº¤æ˜“é‡æ¯åˆ†é’Ÿè¶…è¿‡10000å°±æŠ¥è­¦"ï¼Œå¬èµ·æ¥åˆç†å§ï¼Ÿä½†åŒåä¸€é›¶ç‚¹ã€å‘å·¥èµ„æ—¥ã€èŠ‚å‡æ—¥ï¼Œäº¤æ˜“é‡æœ¬æ¥å°±ä¼šæš´æ¶¨ï¼Œè¿™æ—¶å€™æŠ¥è­¦å°±æ˜¯è¯¯æŠ¥ã€‚</p>
<p>æˆ‘ä»¬å¼•å…¥äº†åŠ¨æ€åŸºçº¿å‘Šè­¦ï¼šç³»ç»Ÿä¼šè‡ªåŠ¨å­¦ä¹ å†å²æ•°æ®çš„æ³¢åŠ¨è§„å¾‹ï¼Œè®¡ç®—å‡ºæ¯ä¸ªæ—¶é—´æ®µçš„æ­£å¸¸åŸºçº¿ã€‚åªæœ‰å½“å®é™…å€¼æ˜¾è‘—åç¦»åŸºçº¿æ—¶ï¼Œæ‰è§¦å‘æŠ¥è­¦ã€‚è¿™æ ·ä¸€æ¥ï¼Œå¸‚åœºæ­£å¸¸æ³¢åŠ¨ä¸ä¼šè¯¯æŠ¥ï¼ŒçœŸæ­£çš„å¼‚å¸¸å´èƒ½åŠæ—¶å‘ç°ã€‚</p>
<h2 data-id="heading-10">é‡å¤´æˆæ¥äº†ï¼šæŠ¥è­¦ï¼</h2>
<p>å¥½äº†ï¼Œç»è¿‡è¿™ä¹ˆå¤šé“ºå«ï¼Œç»ˆäºå¯ä»¥è®²åˆ°é‡å¤´æˆäº†â€”â€”æŠ¥è­¦ï¼</p>
<p>æŠ¥è­¦æ€ä¹ˆæŠ¥ï¼Ÿæƒ³ä¸€æƒ³ï¼Œç³»ç»Ÿç”±å¤šå°æœåŠ¡å™¨ç»„æˆï¼Œç”±å¤šä¸ªä¸­é—´ä»¶ç»„æˆï¼Œæœ‰æ•°æ®åº“ã€ç¼“å­˜ã€æ–‡ä»¶ç³»ç»Ÿã€ç½‘å…³ã€å®¹å™¨åŒ–ã€åˆ†å¸ƒå¼è°ƒåº¦ã€æœåŠ¡æ²»ç†ç­‰ç­‰ã€‚æŸä¸€ä¸ªç³»ç»Ÿå‡ºç°äºšå¥åº·æˆ–è€…ä¸å¯ç”¨ï¼Œå°±éœ€è¦æŠ¥è­¦ã€‚</p>
<h3 data-id="heading-11">æŠ¥è­¦åˆ†çº§ï¼šçº¢é»„è“ä¸‰è‰²ä½“ç³»</h3>
<p>æˆ‘ä»¬åœ¨å®è·µä¸­æ€»ç»“å‡ºäº†ä¸€å¥—åˆ†çº§ä½“ç³»ï¼š</p>
<p><strong>çº¢è‰²æŠ¥è­¦</strong>ï¼šä¸­é—´ä»¶æˆ–è€…è™šæ‹Ÿæœºå®•æœºç±»ï¼Œè¦ç«‹å³å¤„ç†ã€‚æ¯”å¦‚æ•°æ®åº“æŒ‚äº†ã€Redisä¸å¯ç”¨äº†ã€æ ¸å¿ƒæœåŠ¡å®•æœºäº†ã€‚è¿™ç§æƒ…å†µä¸èƒ½ç­‰ï¼Œå¿…é¡»é©¬ä¸Šå“åº”ã€‚è¿™å¯¹åº”çš„æ˜¯èµ„é‡‘æŸå¤±é£é™©ï¼Œå½±å“äº¤æ˜“èƒ½ä¸èƒ½å®Œæˆã€‚</p>
<p><strong>é»„è‰²æŠ¥è­¦</strong>ï¼šæ€§èƒ½è·Ÿä¸ä¸Šäº†ï¼ŒIOæµé‡è¿‡å¤§ã€CPUåˆ©ç”¨ç‡é«˜ã€å†…å­˜ä¸Šå‡å¿«ï¼Œè¦å°½å¿«å¤„ç†ã€‚è¿™ç§è¿˜æ²¡åˆ°ç”Ÿæ­»å­˜äº¡çš„åœ°æ­¥ï¼Œä½†ä¹Ÿä¸èƒ½æ‹–å¤ªä¹…ã€‚å¯¹åº”çš„æ˜¯ç”¨æˆ·ä½“éªŒå—æŸï¼Œäº¤æ˜“å˜æ…¢ã€å“åº”å˜æ…¢ã€‚</p>
<p><strong>è“è‰²æŠ¥è­¦</strong>ï¼šç£ç›˜æ¶¨å¹…è¿‡å¤§ï¼Œé¢„è®¡3å¤©åå°±æ»¡äº†ï¼Œè¦æ¸…ç†æˆ–è€…åŠ ç£ç›˜ï¼Œè¦å®‰æ’åå¤„ã€‚è¿™ç§å±äºé¢„è­¦ï¼Œç»™ä½ æ—¶é—´ä»å®¹å¤„ç†ã€‚å¯¹åº”çš„æ˜¯è¿ç»´æˆæœ¬ä¸Šå‡ï¼Œæå‰è§„åˆ’èµ„æºã€‚</p>
<p>ä»¥ä¸Šæ˜¯è¿ç»´éœ€è¦å…³æ³¨çš„ç¡¬ä»¶ã€ä¸­é—´ä»¶æŒ‡æ ‡ã€‚</p>
<h3 data-id="heading-12">ä¸šåŠ¡æŠ¥è­¦ï¼šæ›´è´´è¿‘å®é™…åœºæ™¯</h3>
<p>è¿˜æœ‰ä¸šåŠ¡ç³»ç»Ÿè¦æ³¨æ„çš„ï¼šæ¥å£è¿‡æ…¢ã€æ•°æ®åº“æ…¢æŸ¥è¯¢ã€å¾®æœåŠ¡å®•æœºäº†ï¼Œæ€ä¹ˆå‘ç°è¿™äº›é—®é¢˜ï¼Ÿ</p>
<p>å¾€å¾€éƒ½æ•£è½åœ¨æ—¥å¿—ã€è°ƒç”¨é“¾ã€æŒ‡æ ‡é‡Œï¼Œä½†éœ€è¦å·¥ç¨‹å¸ˆæ ¹æ®æ—¥å¸¸å·¥ä½œå»æŠ½è±¡ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>æ—¥å¿—ä¸­åŒ…å«"æ”¯ä»˜å¼‚å¸¸"</li>
<li>HTTPæ¥å£äº§ç”Ÿ500é”™è¯¯</li>
<li>HTTPè¯·æ±‚è¶…è¿‡3ç§’</li>
<li>æ•°æ®åº“æ…¢SQL</li>
</ul>
<p>æŠ½è±¡å‡ºè¿™äº›è§„åˆ™åï¼Œå¯¹å®ƒä»¬è¿›è¡Œç»Ÿä¸€çš„æŠ¥è­¦ã€‚</p>
<h3 data-id="heading-13">è‡ªç ”æŠ¥è­¦å¼•æ“ï¼šä¸ºä»€ä¹ˆè¦è‡ªå·±é€ è½®å­ï¼Ÿ</h3>
<p>åœ¨æ—¥å¿—ã€è°ƒç”¨é“¾ã€æŒ‡æ ‡è¿™ä¸‰ç±»åŸºç¡€è®¾æ–½ä¹‹å¤–ï¼Œè¿˜éœ€è¦å¼€å‘ä¸€å¥—æŠ¥è­¦å¼•æ“ã€‚</p>
<p>AlertManagerä¹Ÿå¯ä»¥ç”¨ï¼Œä½†ä¸å¤Ÿå®šåˆ¶åŒ–ã€‚æ¯”å¦‚æˆ‘ä»¬éœ€è¦ï¼š</p>
<ul>
<li>é¿å…é‡å¤å¤„ç†ï¼šåŒä¸€ä¸ªé—®é¢˜åˆ«åå¤æŠ¥</li>
<li>å¤„ç†æŠ¥è­¦æ¯›åˆºï¼šå¶å°”æŠ–åŠ¨ä¸€ä¸‹ä¸ç®—æ•…éšœ</li>
<li>æŠ¥è­¦æ”¶æ•›ï¼šåŒä¸€ç±»é—®é¢˜åˆå¹¶é€šçŸ¥</li>
<li>åˆ†çº§é€šçŸ¥ï¼šçº¢è‰²æŠ¥è­¦æ‰“ç”µè¯ï¼Œé»„è‰²æŠ¥è­¦å‘çŸ­ä¿¡ï¼Œè“è‰²æŠ¥è­¦å‘é‚®ä»¶</li>
<li>å€¼ç­è½®è½¬ï¼šè‡ªåŠ¨åˆ†é…è´£ä»»äºº</li>
<li>å‡çº§æœºåˆ¶ï¼šè¶…æ—¶æœªå¤„ç†è‡ªåŠ¨å‡çº§</li>
</ul>
<p>æŠ¥è­¦çš„å¼€å‘ï¼Œç»å¯¹ä¸æ˜¯å¯æœ‰å¯æ— çš„ã€‚æ²¡æœ‰å®ƒï¼Œä½ å°±æ²¡åŠæ³•å›ç­”ç³»ç»Ÿæ˜¯å¦å¥åº·ã€æ˜¯å¦èƒ½æ­£å¸¸è¿è½¬ï¼Œæ²¡åŠæ³•å·¡æ£€ã€‚å¤¸å¼ ç‚¹è¯´ï¼Œä½ ç¡è§‰éƒ½ä¸è¸å®ã€‚</p>
<h3 data-id="heading-14">æˆ‘ä»¬çš„å®è·µæˆæœï¼šé‡‘èçº§å¯è§‚æµ‹æ€§çš„æ•ˆæœéªŒè¯</h3>
<p>æˆ‘æœåŠ¡çš„å…¬å¸æ˜¯ä¸€å®¶é‡‘èä¼ä¸šï¼Œå¯¹å„é¡¹è¦æ±‚éƒ½æ¯”è¾ƒé«˜ã€‚æˆ‘ä»¬è‡ªç ”äº†ä¸€å¥—æŠ¥è­¦ç³»ç»Ÿï¼Œç»è¿‡ä¸¤å¹´å¤šçš„è¿­ä»£ä¼˜åŒ–ï¼Œå–å¾—äº†æ¯”è¾ƒæ˜æ˜¾çš„æ•ˆæœã€‚</p>
<p>å…ˆçœ‹å‡ ä¸ªå…³é”®æ•°æ®ï¼š</p>



































<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æå‡å¹…åº¦</th></tr></thead><tbody><tr><td>æ•…éšœå‘ç°æ—¶é—´</td><td>15åˆ†é’Ÿ</td><td>3åˆ†é’Ÿ</td><td>é™ä½80%</td></tr><tr><td>æŠ¥è­¦è¯¯æŠ¥ç‡</td><td>35%</td><td>ä½äº5%</td><td>é™ä½85%</td></tr><tr><td>æ ¸å¿ƒé“¾è·¯è¦†ç›–ç‡</td><td>60%</td><td>100%</td><td>æå‡40%</td></tr><tr><td>è‡ªåŠ¨æ¢å¤ç‡</td><td>20%</td><td>60%</td><td>æå‡3å€</td></tr></tbody></table>
<p>è¿™äº›æ•°å­—èƒŒåï¼Œæ˜¯æ— æ•°ä¸ªæ·±å¤œçš„æ•…éšœå¤ç›˜ï¼Œå’Œå¯¹"è§„åˆ™"çš„æè‡´æ‰“ç£¨ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼š</p>
<p><strong>è¦†ç›–èŒƒå›´</strong>ï¼š</p>
<ul>
<li>å„ç±»ä¸­é—´ä»¶10å¤šé¡¹ï¼ˆMySQLã€Redisã€Kafkaã€RabbitMQã€Elasticsearchç­‰ï¼‰</li>
<li>ç›‘æ§è™šæ‹Ÿæœº300å¤šå°</li>
<li>æ¯å¤©å¤„ç†ä¸Šä¸‡æ¡æŠ¥è­¦è§„åˆ™</li>
</ul>
<p><strong>æ ¸å¿ƒèƒ½åŠ›</strong>ï¼š</p>
<ul>
<li>æŠ¥è­¦æ”¶æ•›ï¼šåŒä¸€ç±»é—®é¢˜åˆå¹¶é€šçŸ¥ï¼Œé¿å…æŠ¥è­¦é£æš´</li>
<li>æ¯›åˆºè¿‡æ»¤ï¼šçŸ­æš‚æŠ–åŠ¨ä¸è§¦å‘æŠ¥è­¦ï¼Œå‡å°‘è¯¯æŠ¥</li>
<li>åˆ†çº§é€šçŸ¥ï¼šçº¢è‰²æŠ¥è­¦æ‰“ç”µè¯ï¼Œé»„è‰²æŠ¥è­¦å‘çŸ­ä¿¡ï¼Œè“è‰²æŠ¥è­¦å‘é‚®ä»¶</li>
<li>å€¼ç­è½®è½¬ï¼šè‡ªåŠ¨åˆ†é…è´£ä»»äººï¼Œæ¸…æ™°è´£ä»»è¾¹ç•Œ</li>
<li>å‡çº§æœºåˆ¶ï¼šè¶…æ—¶æœªå¤„ç†è‡ªåŠ¨å‡çº§åˆ°ä¸Šçº§</li>
</ul>
<p>è¿™å¥—ç³»ç»Ÿæ˜¯æˆ‘ä»¬å›¢é˜Ÿä¸€ç‚¹ä¸€ç‚¹æ‘¸ç´¢å‡ºæ¥çš„ã€‚è¸©è¿‡å¾ˆå¤šå‘ï¼Œæ¯”å¦‚ä¸€å¼€å§‹æŠ¥è­¦å¤ªé¢‘ç¹ï¼Œè¿ç»´åŒå­¦çš„æ‰‹æœºä¸€å¤©åˆ°æ™šå“ä¸ªä¸åœï¼Œåæ¥åŠ äº†æ”¶æ•›æœºåˆ¶æ‰å¥½è½¬ã€‚ä¹Ÿè¯•è¿‡æŠ¥è­¦è§„åˆ™è®¾ç½®å¾—å¤ªå®½æ¾ï¼Œç»“æœçœŸå‡ºé—®é¢˜æ—¶æ²¡åŠæ—¶å‘ç°ï¼Œå¯¼è‡´æ•…éšœæ‰©å¤§ã€‚</p>
<h2 data-id="heading-15">å†™åœ¨æœ€åï¼šä»ç»éªŒåˆ°èƒ½åŠ›çš„è·¨è¶Š</h2>
<p>æˆ‘å‘ç°ç°åœ¨è®²å¯è§‚æµ‹æ€§è¿™å—å†…å®¹çš„äººä¸å¤šï¼Œè¦ä¹ˆè®²å¾—å¾ˆé›¶æ•£ï¼Œè¦ä¹ˆä¸å¤Ÿè½åœ°ã€‚æ‰€ä»¥æˆ‘æƒ³æŠŠæˆ‘çš„å·¥ä½œå®è·µï¼Œç»“åˆé‡‘èä¼ä¸šçš„å®é™…åœºæ™¯ï¼ŒæŠŠæ€ä¹ˆæƒ³çš„ã€æ€ä¹ˆåšçš„ã€è¾¾åˆ°äº†ä»€ä¹ˆæ•ˆæœï¼Œæ¯«æ— ä¿ç•™åœ°è„±æ•ååˆ†äº«å‡ºæ¥ã€‚</p>
<p>å¯è§‚æµ‹æ€§ä¸æ˜¯ä¹°å‡ ä¸ªå·¥å…·å°±èƒ½è§£å†³çš„ï¼Œå®ƒéœ€è¦ä½ å¯¹ä¸šåŠ¡çš„æ·±åˆ»ç†è§£ï¼Œå¯¹ç³»ç»Ÿçš„å…¨é¢æŠŠæ§ï¼Œå’Œä¸€æ¬¡åˆä¸€æ¬¡æ•…éšœä¸­ç§¯ç´¯çš„ç»éªŒã€‚</p>
<p>ä½†æ›´é‡è¦çš„æ˜¯ï¼šæŠŠç»éªŒæ²‰æ·€ä¸ºè§„åˆ™ï¼ŒæŠŠè§„åˆ™å›ºåŒ–ä¸ºç³»ç»Ÿï¼ŒæŠŠç³»ç»Ÿè½¬åŒ–ä¸ºèƒ½åŠ›ã€‚</p>
<p>è¿™ï¼Œæ‰æ˜¯é‡‘èçº§å¯è§‚æµ‹æ€§çš„çœŸæ­£æŠ¤åŸæ²³ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©å¤§å®¶ç†æ¸…å¯è§‚æµ‹æ€§çš„å¤§å±€è§‚ï¼ŒçŸ¥é“åœ¨å®é™…å·¥ä½œä¸­æ–¹æ–¹é¢é¢è¯¥æ€ä¹ˆå¤„ç†ã€‚å¦‚æœä½ ä¹Ÿåœ¨åšå¯è§‚æµ‹æ€§ç›¸å…³çš„å·¥ä½œï¼Œæ¬¢è¿ä¸€èµ·äº¤æµæ¢è®¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kotlinçš„inlineã€noinlineã€crossinlineå…¨é¢åˆ†æ]]></title>    <link>https://juejin.cn/post/7589916567875338282</link>    <guid>https://juejin.cn/post/7589916567875338282</guid>    <pubDate>2026-01-01T02:03:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589916567875338282" data-draft-id="7589830060335218742" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kotlinçš„inlineã€noinlineã€crossinlineå…¨é¢åˆ†æ"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-01T02:03:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœ¨å²æœˆä¸­è¿œè¡Œ"/> <meta itemprop="url" content="https://juejin.cn/user/4265760844943960"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kotlinçš„inlineã€noinlineã€crossinlineå…¨é¢åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4265760844943960/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœ¨å²æœˆä¸­è¿œè¡Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T02:03:32.000Z" title="Thu Jan 01 2026 02:03:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>1 è¯´èµ·å†…è”å‡½æ•°ï¼Œå°±æ˜¯åœ¨æ–¹æ³•åå‰åŠ ä¸ªinlineå…³é”®å­—ã€‚åœ¨Kotlinå¼€å‘éšå¤„å¯è§ï¼Œä¾‹å¦‚åœ¨Kotlinæ ‡å‡†å‡½æ•°ä¸­ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@kotlin</span>.<span class="hljs-keyword">internal</span>.InlineOnly
<span class="hljs-keyword">public</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T, R&gt;</span> T.<span class="hljs-title">run</span><span class="hljs-params">(block: <span class="hljs-type">T</span>.() -&gt; <span class="hljs-type">R</span>)</span></span>: R {
    contract {
        callsInPlace(block, InvocationKind.EXACTLY_ONCE)
    }
    <span class="hljs-keyword">return</span> block()
}

<span class="hljs-comment">/**
 * Calls the specified function [block] with the given [receiver] as its receiver and returns its result.
 *
 * For detailed usage information see the documentation for [scope functions](https://kotlinlang.org/docs/reference/scope-functions.html#with).
 */</span>
<span class="hljs-meta">@kotlin</span>.<span class="hljs-keyword">internal</span>.InlineOnly
<span class="hljs-keyword">public</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T, R&gt;</span> <span class="hljs-title">with</span><span class="hljs-params">(receiver: <span class="hljs-type">T</span>, block: <span class="hljs-type">T</span>.() -&gt; <span class="hljs-type">R</span>)</span></span>: R {
    contract {
        callsInPlace(block, InvocationKind.EXACTLY_ONCE)
    }
    <span class="hljs-keyword">return</span> receiver.block()
}

<span class="hljs-comment">/**
 * Calls the specified function [block] with `this` value as its receiver and returns `this` value.
 *
 * For detailed usage information see the documentation for [scope functions](https://kotlinlang.org/docs/reference/scope-functions.html#apply).
 */</span>
<span class="hljs-meta">@kotlin</span>.<span class="hljs-keyword">internal</span>.InlineOnly
<span class="hljs-keyword">public</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> T.<span class="hljs-title">apply</span><span class="hljs-params">(block: <span class="hljs-type">T</span>.() -&gt; <span class="hljs-type">Unit</span>)</span></span>: T {
    contract {
        callsInPlace(block, InvocationKind.EXACTLY_ONCE)
    }
    block()
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>
}

<span class="hljs-comment">/**
 * Calls the specified function [block] with `this` value as its argument and returns `this` value.
 *
 * For detailed usage information see the documentation for [scope functions](https://kotlinlang.org/docs/reference/scope-functions.html#also).
 */</span>
<span class="hljs-meta">@kotlin</span>.<span class="hljs-keyword">internal</span>.InlineOnly
<span class="hljs-meta">@SinceKotlin(<span class="hljs-string">"1.1"</span>)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> T.<span class="hljs-title">also</span><span class="hljs-params">(block: (<span class="hljs-type">T</span>) -&gt; <span class="hljs-type">Unit</span>)</span></span>: T {
    contract {
        callsInPlace(block, InvocationKind.EXACTLY_ONCE)
    }
    block(<span class="hljs-keyword">this</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>
}
</code></pre>
<p>åœ¨è¯´å†…è”å‡½æ•°ä¹‹å‰ï¼Œå…ˆè¯´å…¶ä»–çš„æ¦‚å¿µå°±æ˜¯Kotlinçš„é«˜é˜¶å‡½æ•°å…¶å®æ˜¯å®ç°FunctionNæ¥å£çš„ä¸€ä¸ªå®ä¾‹ã€‚Kotlinçš„lambdaä½œä¸ºå®å‚ä¼ ç»™å‚æ•°æ—¶ï¼Œä¹Ÿä¼šåˆ›å»ºåŒ¿åå†…éƒ¨ç±»ä»¥åŠè°ƒç”¨invokeæ–¹æ³•ã€‚ä¸‹é¢ä»¥ç®€å•ä»£ç è¡¨è¿°ä¸€ä¸‹ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">//åœ¨Ktæ–‡ä»¶ä¸­å®šä¹‰ä¸€ä¸ªé«˜é˜¶å‡½æ•°</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">lambdaFun</span><span class="hljs-params">(action: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    println(<span class="hljs-string">"[lambdaFun]: æ‰§è¡Œå‰"</span>)
    action()
    println(<span class="hljs-string">"[lambdaFun]: æ‰§è¡Œå"</span>)
}

<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">testLambdaFun</span><span class="hljs-params">()</span></span> {
    lambdaFun {
        println(<span class="hljs-string">"[testLambdaFun]: æ­£åœ¨æ‰§è¡Œ"</span>)
    }
}
</code></pre>
<p>ä¸‹é¢æ˜¯è¿™æ®µä»£ç çš„å­—èŠ‚ç </p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">void</span> <span class="hljs-title">lambdaFun</span><span class="hljs-params">(Function0 action)</span> </span>{
   <span class="hljs-type">String</span> var2 = <span class="hljs-string">"[lambdaFun]: æ‰§è¡Œå‰"</span>;
   System.out.<span class="hljs-built_in">println</span>(var2);
   action.<span class="hljs-built_in">invoke</span>();
   var2 = <span class="hljs-string">"[lambdaFun]: æ‰§è¡Œå"</span>;
   System.out.<span class="hljs-built_in">println</span>(var2);
}

<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">void</span> <span class="hljs-title">testLambdaFun</span><span class="hljs-params">()</span> </span>{
   <span class="hljs-keyword">this</span>.<span class="hljs-built_in">lambdaFun</span>((Function0)null.INSTANCE);
}
</code></pre>
<p>è¿™é‡Œå‘ç°äº†å§lambdaè½¬æ¢æˆåŒ¿åå†…éƒ¨ç±»ï¼Œå¦‚æœæ­¤æ—¶é¢‘ç¹å¤šæ¬¡è°ƒç”¨çš„è¯ï¼Œå°±ä¼šå¯¼è‡´å†…å­˜å¢åŠ ï¼Œè¿™ä¹Ÿå°±æ˜¯inlineå…³é”®å­—å‡ºç°çš„åŸå› ã€‚</p>
<p>ä½†å½“æˆ‘ä»¬æŠŠlambdaFunå‡½æ•°åŠ ä¸Šinlineä¿®é¥°æ—¶</p>
<pre><code class="hljs language-ini" lang="ini">private final void lambdaFun(Function0 action) {
   int $i$f$<span class="hljs-attr">lambdaFun</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
   String <span class="hljs-attr">var3</span> = <span class="hljs-string">"[lambdaFun]: æ‰§è¡Œå‰"</span><span class="hljs-comment">;</span>
   System.out.println(var3)<span class="hljs-comment">;</span>
   action.invoke()<span class="hljs-comment">;</span>
   <span class="hljs-attr">var3</span> = <span class="hljs-string">"[lambdaFun]: æ‰§è¡Œå"</span><span class="hljs-comment">;</span>
   System.out.println(var3)<span class="hljs-comment">;</span>
}

private final void testLambdaFun() {
   int $i$f$<span class="hljs-attr">lambdaFun</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
   String <span class="hljs-attr">var3</span> = <span class="hljs-string">"[lambdaFun]: æ‰§è¡Œå‰"</span><span class="hljs-comment">;</span>
   System.out.println(var3)<span class="hljs-comment">;</span>
   int <span class="hljs-attr">var4</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
   String <span class="hljs-attr">var5</span> = <span class="hljs-string">"[testLambdaFun]: æ­£åœ¨æ‰§è¡Œ"</span><span class="hljs-comment">;</span>
   System.out.println(var5)<span class="hljs-comment">;</span>
   <span class="hljs-attr">var3</span> = <span class="hljs-string">"[lambdaFun]: æ‰§è¡Œå"</span><span class="hljs-comment">;</span>
   System.out.println(var3)<span class="hljs-comment">;</span>
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°å½“å‡½æ•°æ˜¯å†…è”å‡½æ•°æ—¶ï¼Œå‡½æ•°å†…éƒ¨çš„å‡½æ•°ä½“ä»¥åŠå‡½æ•°ç±»å‹å‚æ•°éƒ½ä¼šè¢«å†…è”åˆ°è°ƒç”¨åœ°æ–¹(ä¹Ÿå°±æ˜¯æŠŠå‡½æ•°ä½“çš„ä»£ç å’Œå‡½æ•°ç±»å‹å‚æ•°ç»™èµ‹å€¼é“ºå¹³åˆ°è°ƒç”¨åœ°æ–¹)ã€‚å®ƒè§£å†³äº†ä½¿ç”¨lambadæ–¹ä¾¿çš„åŒæ—¶åˆ›å»ºè¿‡å¤šçš„åŒ¿åå†…éƒ¨ç±»ï¼Œå‡å°å†…å­˜çš„ä½¿ç”¨ã€‚</p>
<p>noline è¿™ä¸ªå…³é”®å­—åªèƒ½ä¿®é¥°å‡½æ•°çš„å‚æ•°ï¼Œè€Œinlineæ˜¯ç”¨æ¥ä¿®é¥°å‡½æ•°çš„ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°æ˜¯å†…è”çš„ï¼Œä½†æ˜¯è¿™ä¸ªå‡½æ•°ç±»å‹å‚æ•°ä¸æ˜¯å†…è”çš„ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * å®šä¹‰ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œéå†…è”
 */</span>
<span class="hljs-keyword">private</span>  <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">lambdaFun</span><span class="hljs-params">(action: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    println(<span class="hljs-string">"[lambdaFun]: æ‰§è¡Œå‰"</span>)
    action()
    println(<span class="hljs-string">"[lambdaFun]: æ‰§è¡Œå"</span>)
}


<span class="hljs-comment">/**
 * æµ‹è¯•å‡½æ•°
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">testLambdaFun</span><span class="hljs-params">(action: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    println(<span class="hljs-string">"[testLambdaFun]: æ‰§è¡Œå‰"</span>)
    action()
    lambdaFun(action)
    println(<span class="hljs-string">"[testLambdaFun]: æ‰§è¡Œå"</span>)
}
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/761535fdcdfa4c739758f394f2a39fb8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyo5bKB5pyI5Lit6L-c6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767837812&amp;x-signature=Sb5G0kN0Z59iV35yhOAToUtCX0A%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨å†…è”å‡½æ•°testLambdaFunä¸­è°ƒç”¨lambdaFuné«˜é˜¶å‡½æ•°ï¼Œæƒ³æŠŠactionä¼ ç»™lambadFun,ä½†æ˜¯åœ¨è¢«inlineä¿®é¥°çš„å‡½æ•°ï¼Œå…¶å‚æ•°ä¹Ÿä¼šè¢«é“ºå¹³ï¼Œä¹Ÿå°±ä¸ä¼šå†æ˜¯å‡½æ•°ç±»å‹äº†ã€‚æ‰€ä»¥ç¼–è¯‘æŠ¥é”™äº†ã€‚æ‰€æœ‰è¿™é‡Œçš„actionè¦ä½¿ç”¨noinlineæ¥ä¿®é¥°ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬è¯´ä¸‹returné—®é¢˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b3822f5f84645d98e68c05f7dd3b1be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyo5bKB5pyI5Lit6L-c6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767837812&amp;x-signature=e9AidcsoifsMWgT0BmSyriSzpMw%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨æµ‹è¯•å‡½æ•°ä¸­è°ƒç”¨é«˜é˜¶å‡½æ•°lambdaFunï¼Œçœ‹åˆ°è¿™é‡Œä½¿ç”¨returnè¯­å¥ï¼Œæé†’
return@lambdaFunï¼Œå¦‚æœæˆ‘åªä½¿ç”¨returnçš„è¯ï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠlambdaFunå®šä¹‰æˆå†…è”å‡½æ•°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * å®šä¹‰ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œéå†…è”
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">lambdaFun</span><span class="hljs-params">(action: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    println(<span class="hljs-string">"[lambdaFun]: æ‰§è¡Œå‰"</span>)
    action()
    println(<span class="hljs-string">"[lambdaFun]: æ‰§è¡Œå"</span>)
}


<span class="hljs-comment">/**
 * æµ‹è¯•å‡½æ•°
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">testLambdaFun</span><span class="hljs-params">()</span></span> {
    lambdaFun {
        println(<span class="hljs-string">"[testLambdaFun]: è°ƒç”¨ä¸­"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>å¤„
    }
}
</code></pre>
<p>1å¤„è¿™é‡Œå±…ç„¶ç›´æ¥ä¸æŠ¥é”™äº†ï¼Œç”±äºå†…è”å‡½æ•°ä¼šæŠŠå‡½æ•°ä½“å’Œlambadç»™å¤åˆ¶é“ºå¹³åˆ°è°ƒç”¨åœ°æ–¹ï¼Œæ‰€ä»¥è¿™é‡Œçš„returnå¿…ç„¶æ˜¯testLambadå‡½æ•°äº†ã€‚</p>
<p>Kotlinç›´æ¥è§„å®šï¼Œä¸ºäº†è§£å†³lambadè¡¨è¾¾å¼ä¸­çš„returnè¯­å¥é—®é¢˜ï¼Œåœ¨éinlineå‡½æ•°ä¸­,returnæ— æ³•ä½¿ç”¨(å¿…é¡»return@xxæ˜¾å¼æŒ‡æ˜è¿”å›çš„å‡½æ•°),åªæœ‰åœ¨inlineå‡½æ•°ä¸­å¯ä»¥ä½¿ç”¨return,æ ¹æ®inlineçš„ç‰¹æ€§ï¼Œè¿™ä¸ªreturnå¿…ç„¶æ˜¯è¿”å›è°ƒç”¨è€…çš„å‡½æ•°ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬è®²crossinline</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c589eac2ee28472393819ea2122134d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyo5bKB5pyI5Lit6L-c6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767837812&amp;x-signature=Q0CSL39biOoczHfr0V9FuL4vimI%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * å®šä¹‰ä¸€ä¸ªé«˜é˜¶å‡½æ•°ï¼Œéå†…è”
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">lambdaFun</span><span class="hljs-params">(action: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    println(<span class="hljs-string">"[lambdaFun]: æ‰§è¡Œå‰"</span>)
    action()
    println(<span class="hljs-string">"[lambdaFun]: æ‰§è¡Œå"</span>)
}


<span class="hljs-comment">/**
 * æµ‹è¯•å‡½æ•°
 */</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">testLambdaFun</span><span class="hljs-params">(action: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    lambdaFun { <span class="hljs-number">2</span>å¤„
        action() 
    }
}
</code></pre>
<p>2å¤„è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼Œåœ¨è¡¨è¾¾å¼å†…è°ƒç”¨actionï¼ˆï¼‰ä¹Ÿå°±æ˜¯å…¶invokeå‡½æ•°ï¼Œè€Œä¸æ˜¯æŠŠactionè¿™ä¸ªå‡½æ•°ç±»å‹å‚æ•°è¿›è¡Œä¼ é€’ï¼Œ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdb7d7c2307b4d4796970511d0a0f954~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyo5bKB5pyI5Lit6L-c6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767837812&amp;x-signature=3vUdnGOsUyaBaRqvguweEQOLud0%3D" alt="image.png" loading="lazy"/>
å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å…¶å®æœ‰ä¸¤ç§æ–¹å¼è°ƒç”¨lambdaé«˜é˜¶å‡½æ•°çš„ã€‚</p>
<p>è¿”å›åˆ°ä¸Šå¤„åœ°æ–¹æŠ¥é”™ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aacdd1b45a62427d986bd060d0d4d78c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zyo5bKB5pyI5Lit6L-c6KGM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767837812&amp;x-signature=d2%2FLQ3l2gICbD2p%2BaDuMuldDQLM%3D" alt="image.png" loading="lazy"/></p>
<p>æŠ¥é”™ä¿¡æ¯æ„æ€ï¼šæ— æ³•å†…è”actionå‚æ•°ï¼ŒåŸå› æ˜¯å®ƒå¯èƒ½åŒ…å«returnè¯­å¥ã€‚</p>
<p>åŸå› çœ‹èµ·æ¥ä¹Ÿç®€å•ï¼Œåœ¨lambdaè¡¨è¾¾å¼ä¸­ï¼Œåªæœ‰åœ¨å†…è”å‡½æ•°ä¸­æ‰èƒ½ä½¿ç”¨returnã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * æµ‹è¯•å‡½æ•°
 */</span> <span class="hljs-number">3</span>å¤„
<span class="hljs-keyword">private</span> <span class="hljs-keyword">inline</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">testLambdaFun</span><span class="hljs-params">(action: () -&gt; <span class="hljs-type">Unit</span>)</span></span> {
    lambdaFun { <span class="hljs-number">4</span>å¤„
        action()
    }
}
</code></pre>
<p>3å¤„å’Œ4å¤„æ»¡è¶³äº†æ˜¯inlineå‡½æ•°å’Œåœ¨è¡¨è¾¾å¼ä¸­ï¼Œè€Œä¸”æ— æ³•ç¡®å®šactionä¸­ä¼šä¸ä¼šåŒ…å«returnè¯­å¥ã€‚inlineå—é™ä¸¥é‡ï¼Œè¿™é‡Œåªæœ‰çªç ´è¿™ä¸ªé™åˆ¶æ‰å¯ä»¥ï¼Œæ‰€ä»¥è¿™é‡Œé‡‡ç”¨çš„æ–¹å¼å°±æ˜¯æŠŠactionåŠ ä¸ªcrossinlineä¿®é¥°ç¬¦ã€‚</p>
<p>crossinleçš„ä½œç”¨ä»…ä»…æ˜¯å½“è¢«è¿™ä¸ªä¿®é¥°ç¬¦çš„å‚æ•°ä¼šå‘Šè¯‰IDEæ¥æ£€æŸ¥ä½ çš„ä»£ç ä¸­æ²¡æœ‰returnã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Boot é…ç½® diff å®æˆ˜]]></title>    <link>https://juejin.cn/post/7589839019717492786</link>    <guid>https://juejin.cn/post/7589839019717492786</guid>    <pubDate>2026-01-01T02:11:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589839019717492786" data-draft-id="7589835342146207754" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Boot é…ç½® diff å®æˆ˜"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-01T02:11:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£è±¡å—"/> <meta itemprop="url" content="https://juejin.cn/user/2524134428655159"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Boot é…ç½® diff å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2524134428655159/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£è±¡å—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T02:11:10.000Z" title="Thu Jan 01 2026 02:11:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åšé…ç½®ç®¡ç†æ—¶ï¼Œdiff æ˜¯ç»•ä¸å¼€çš„åŠŸèƒ½ã€‚</p>
<p>æ¯”å¦‚è¿ç»´è¦ä¿®æ”¹ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼Œæ”¹ä¹‹å‰æ€»æƒ³ç¡®è®¤ä¸€ä¸‹å…·ä½“åŠ¨äº†ä»€ä¹ˆï¼›æˆ–è€…æ¯”å¯¹ä¸‹æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„é…ç½®ï¼Œçœ‹çœ‹å“ªé‡Œä¸ä¸€æ ·ã€‚è¿˜æœ‰é…ç½®å›æ»šå‰ï¼Œéœ€è¦çœ‹çœ‹å½“å‰ç‰ˆæœ¬å’Œç›®æ ‡ç‰ˆæœ¬çš„å·®å¼‚ã€‚</p>
<p>è¿™äº›åœºæ™¯éƒ½ç¦»ä¸å¼€å·®å¼‚æ¯”å¯¹ã€‚</p>
<p>é€šå¸¸æˆ‘ä»¬ä¼šæƒ³åˆ°ç”¨ Unix çš„ <code>diff</code> å‘½ä»¤æˆ–è€… Git çš„ diff åŠŸèƒ½ã€‚ä½†è¿™äº›ä¸œè¥¿éƒ½æ˜¯å‘½ä»¤è¡Œå·¥å…·ï¼Œè¦é›†æˆåˆ° Web åº”ç”¨é‡Œè¿˜å¾—åšä¸å°‘è§£æå·¥ä½œï¼Œè€Œä¸”è¾“å‡ºæ ¼å¼ä¹Ÿä¸å‹å¥½ï¼Œä¸é€‚åˆç›´æ¥å±•ç¤ºç»™ç”¨æˆ·ã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ java-diff-utils</h2>
<p><code>java-diff-utils</code> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ–‡æœ¬å·®å¼‚æ¯”å¯¹åº“ï¼Œæºè‡ª Google çš„ <code>diff-match-patch</code> ç®—æ³•ã€‚å®ƒèƒ½å¤Ÿï¼š</p>
<ul>
<li>â€¢ ç²¾å‡†è¯†åˆ«æ–‡æœ¬çš„å¢åˆ æ”¹å˜åŒ–</li>
<li>â€¢ ç”Ÿæˆç±»ä¼¼ <code>git diff</code> çš„å·®å¼‚æŠ¥å‘Š</li>
<li>â€¢ æ”¯æŒè¡Œçº§ã€å­—ç¬¦çº§çš„ç»†ç²’åº¦æ¯”å¯¹</li>
<li>â€¢ æä¾›å¤šç§å·®å¼‚æ ¼å¼è¾“å‡ºï¼ˆunifiedã€inline ç­‰ï¼‰</li>
</ul>
<pre><code class="hljs language-xml" lang="xml">
    
    
    
  <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.github.java-diff-utils<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>java-diff-utils<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.12<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<hr/>
<h2 data-id="heading-1">å®æˆ˜ä¸€ï¼šé…ç½®æ–‡ä»¶æ¯”å¯¹</h2>
<p>å…ˆä»æœ€å¸¸è§çš„éœ€æ±‚å…¥æ‰‹ï¼šæ¯”å¯¹ä¸¤ä¸ªé…ç½®æ–‡ä»¶å·®å¼‚ã€‚æ ¸å¿ƒä»£ç éå¸¸ç®€æ´ï¼š</p>
<pre><code class="hljs language-less" lang="less">
    
    
    
  <span class="hljs-comment">//Â æŒ‰è¡Œåˆ†å‰²</span>
<span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">String</span>&gt;Â <span class="hljs-selector-tag">originalLines</span>Â =Â <span class="hljs-selector-tag">Arrays</span><span class="hljs-selector-class">.asList</span>(original.<span class="hljs-built_in">split</span>(<span class="hljs-string">"\n"</span>));
<span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">String</span>&gt;Â <span class="hljs-selector-tag">revisedLines</span>Â =Â <span class="hljs-selector-tag">Arrays</span><span class="hljs-selector-class">.asList</span>(revised.<span class="hljs-built_in">split</span>(<span class="hljs-string">"\n"</span>));

<span class="hljs-comment">//Â è®¡ç®—å·®å¼‚</span>
<span class="hljs-selector-tag">Patch</span>&lt;<span class="hljs-selector-tag">String</span>&gt;Â <span class="hljs-selector-tag">patch</span>Â =Â <span class="hljs-selector-tag">DiffUtils</span><span class="hljs-selector-class">.diff</span>(originalLines,Â revisedLines);

<span class="hljs-comment">//Â éå†å·®å¼‚</span>
<span class="hljs-selector-tag">for</span>Â (AbstractDelta&lt;String&gt;Â <span class="hljs-attribute">deltaÂ </span>:Â patch.<span class="hljs-built_in">getDeltas</span>())Â {
Â Â Â Â <span class="hljs-selector-tag">System</span><span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>(delta.<span class="hljs-built_in">getType</span>()Â +Â <span class="hljs-string">"Â atÂ lineÂ "</span>Â +Â delta.<span class="hljs-built_in">getSource</span>().<span class="hljs-built_in">getPosition</span>());
Â Â Â Â <span class="hljs-comment">//Â INSERT:Â æ–°å¢è¡Œ</span>
Â Â Â Â <span class="hljs-comment">//Â DELETE:Â åˆ é™¤è¡Œ</span>
Â Â Â Â <span class="hljs-comment">//Â CHANGE:Â ä¿®æ”¹è¡Œ</span>
}
</code></pre>
<p><code>DiffUtils.diff()</code> ä¼šè¿”å›ä¸€ä¸ª <code>Patch</code> å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«äº†æ‰€æœ‰çš„å·®å¼‚å—ã€‚æ¯ä¸ª <code>Delta</code> è®°å½•äº†å˜æ›´ç±»å‹ï¼ˆINSERT/DELETE/CHANGEï¼‰ã€ä½ç½®å’Œå…·ä½“å†…å®¹ã€‚</p>
<h2 data-id="heading-2">å®æˆ˜äºŒï¼šé…ç½®å˜æ›´å¯è§†åŒ–</h2>
<p>çº¯æ–‡æœ¬çš„ diff æŠ¥å‘Šä¸å¤Ÿç›´è§‚ï¼Ÿæ¥ä¸ª HTML å¯è§†åŒ–ç‰ˆæœ¬ã€‚æ ¸å¿ƒæ€è·¯å°±æ˜¯éå†å·®å¼‚ï¼Œç”¨ä¸åŒé¢œè‰²æ ‡æ³¨å¢åˆ æ”¹ï¼š</p>
<pre><code class="hljs language-less" lang="less">
    
    
    
  <span class="hljs-selector-tag">for</span>Â (DiffChangeÂ <span class="hljs-attribute">changeÂ </span>:Â diffResult.<span class="hljs-built_in">getChanges</span>())Â {
Â Â Â Â <span class="hljs-comment">//Â å·®å¼‚å¤´éƒ¨</span>
Â Â Â Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>(<span class="hljs-string">"&lt;divÂ class='diff-header'&gt;"</span>)
Â Â Â Â Â Â Â Â <span class="hljs-selector-class">.append</span>(String.<span class="hljs-built_in">format</span>(<span class="hljs-string">"@@Â -%dÂ +%dÂ @@"</span>,Â srcLine,Â tgtLine))
Â Â Â Â Â Â Â Â <span class="hljs-selector-class">.append</span>(<span class="hljs-string">"&lt;/div&gt;"</span>);

Â Â Â Â <span class="hljs-comment">//Â åˆ é™¤çš„è¡Œï¼ˆçº¢è‰²èƒŒæ™¯ï¼‰</span>
Â Â Â Â <span class="hljs-selector-tag">for</span>Â (StringÂ <span class="hljs-attribute">lineÂ </span>:Â change.<span class="hljs-built_in">getOriginalLines</span>())Â {
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>(<span class="hljs-string">"&lt;divÂ class='diff-remove'&gt;-Â "</span>)<span class="hljs-selector-class">.append</span>(line)<span class="hljs-selector-class">.append</span>(<span class="hljs-string">"&lt;/div&gt;"</span>);
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">//Â æ–°å¢çš„è¡Œï¼ˆç»¿è‰²èƒŒæ™¯ï¼‰</span>
Â Â Â Â <span class="hljs-selector-tag">for</span>Â (StringÂ <span class="hljs-attribute">lineÂ </span>:Â change.<span class="hljs-built_in">getRevisedLines</span>())Â {
Â Â Â Â Â Â Â Â <span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.append</span>(<span class="hljs-string">"&lt;divÂ class='diff-add'&gt;+Â "</span>)<span class="hljs-selector-class">.append</span>(line)<span class="hljs-selector-class">.append</span>(<span class="hljs-string">"&lt;/div&gt;"</span>);
Â Â Â Â }
}
</code></pre>
<p>é…åˆç®€å•çš„ CSSï¼ˆç»¿è‰²èƒŒæ™¯è¡¨ç¤ºæ–°å¢ï¼Œçº¢è‰²èƒŒæ™¯è¡¨ç¤ºåˆ é™¤ï¼‰ï¼Œå°±èƒ½å¾—åˆ°ç±»ä¼¼ Git çš„ diff å±•ç¤ºæ•ˆæœã€‚</p>
<h2 data-id="heading-3">å®æˆ˜ä¸‰ï¼šProperties æ–‡ä»¶æ™ºèƒ½æ¯”å¯¹</h2>
<p>é…ç½®æ–‡ä»¶å¾€å¾€æœ‰é¡ºåºå·®å¼‚ï¼Œä½†å®é™…å†…å®¹ç›¸åŒã€‚ç›´æ¥æŒ‰è¡Œæ¯”å¯¹ä¼šäº§ç”Ÿå¤§é‡å™ªéŸ³ã€‚è¿™æ—¶å€™åº”è¯¥è§£æä¸º Properties å¯¹è±¡ï¼ŒæŒ‰ key è¿›è¡Œæ¯”å¯¹ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">
    
    
    
  //Â è§£æä¸ºÂ Properties
PropertiesÂ originalÂ =Â <span class="hljs-built_in">new</span>Â Properties();
original.load(<span class="hljs-built_in">new</span>Â ByteArrayInputStream(originalContent.getBytes()));
PropertiesÂ revisedÂ =Â <span class="hljs-built_in">new</span>Â Properties();
revised.load(<span class="hljs-built_in">new</span>Â ByteArrayInputStream(revisedContent.getBytes()));

//Â æ‰¾å‡ºåˆ é™¤çš„Â <span class="hljs-keyword">key</span>
<span class="hljs-keyword">Set</span>&lt;<span class="hljs-type">String</span>&gt;Â removedKeysÂ =Â <span class="hljs-built_in">new</span>Â HashSet&lt;&gt;(original.stringPropertyNames());
removedKeys.removeAll(revised.stringPropertyNames());

//Â æ‰¾å‡ºæ–°å¢çš„Â <span class="hljs-keyword">key</span>
<span class="hljs-keyword">Set</span>&lt;<span class="hljs-type">String</span>&gt;Â addedKeysÂ =Â <span class="hljs-built_in">new</span>Â HashSet&lt;&gt;(revised.stringPropertyNames());
addedKeys.removeAll(original.stringPropertyNames());

//Â æ‰¾å‡ºä¿®æ”¹çš„Â <span class="hljs-keyword">key</span>
<span class="hljs-keyword">for</span>Â (<span class="hljs-type">String</span>Â <span class="hljs-keyword">key</span>Â :Â original.stringPropertyNames())Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (!Objects.<span class="hljs-keyword">equals</span>(original.getProperty(<span class="hljs-keyword">key</span>),Â revised.getProperty(<span class="hljs-keyword">key</span>)))Â {
Â Â Â Â Â Â Â Â modifiedKeys.add(<span class="hljs-keyword">key</span>);
Â Â Â Â }
}
</code></pre>
<p>è¿™æ ·æ¯”å¯¹ç»“æœåªå…³æ³¨çœŸæ­£çš„é…ç½®å˜æ›´ï¼Œä¸ä¼šå› ä¸ºé¡ºåºè°ƒæ•´è€Œè¯¯æŠ¥ã€‚</p>
<h2 data-id="heading-4">å®æˆ˜å››ï¼šé›†æˆé…ç½®ä¸­å¿ƒ</h2>
<p>æŠŠ Diff åŠŸèƒ½é›†æˆåˆ°é…ç½®å˜æ›´æµç¨‹ä¸­ï¼Œæ¯æ¬¡å˜æ›´è‡ªåŠ¨æ¯”å¯¹å¹¶è®°å½•ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">
    
    
    
  <span class="hljs-keyword">@Transactional</span>
publicÂ voidÂ auditConfigChange(StringÂ configId,Â StringÂ newContent,Â StringÂ operator)Â {
Â Â Â Â <span class="hljs-comment">//Â è·å–åŸé…ç½®</span>
Â Â Â Â ConfigEntityÂ oldConfigÂ =Â configRepository<span class="hljs-selector-class">.findById</span>(configId)<span class="hljs-selector-class">.orElseThrow</span>();

Â Â Â Â <span class="hljs-comment">//Â æ¯”å¯¹å·®å¼‚</span>
Â Â Â Â PropertiesDiffResultÂ diffÂ =Â diffService<span class="hljs-selector-class">.compareProperties</span>(
Â Â Â Â Â Â Â Â oldConfig.getContent(),Â newContent);

Â Â Â Â ifÂ (!diff.hasChanges())Â {
Â Â Â Â Â Â Â Â return;Â <span class="hljs-comment">//Â æ— å˜æ›´ï¼Œç›´æ¥è¿”å›</span>
Â Â Â Â }

Â Â Â Â <span class="hljs-comment">//Â ä¿å­˜å˜æ›´è®°å½•</span>
Â Â Â Â ConfigChangeLogÂ changeLogÂ =Â newÂ <span class="hljs-built_in">ConfigChangeLog</span>();
Â Â Â Â changeLog<span class="hljs-selector-class">.setConfigId</span>(configId);
Â Â Â Â changeLog<span class="hljs-selector-class">.setOperator</span>(operator);
Â Â Â Â changeLog<span class="hljs-selector-class">.setDiffResult</span>(JSON.toJSONString(diff));
Â Â Â Â configChangeLogRepository<span class="hljs-selector-class">.save</span>(changeLog);

Â Â Â Â <span class="hljs-comment">//Â å‘é€é€šçŸ¥</span>
Â Â Â Â notificationService<span class="hljs-selector-class">.notifyConfigChange</span>(diff,Â operator);
}
</code></pre>
<p>è¿™æ ·æ¯æ¬¡é…ç½®å˜æ›´éƒ½ä¼šè‡ªåŠ¨ç”Ÿæˆå·®å¼‚æŠ¥å‘Šï¼Œæ–¹ä¾¿å®¡è®¡å’Œå›æº¯ã€‚</p>
<h2 data-id="heading-5">è¿›é˜¶æŠ€å·§</h2>
<p><strong>1. å¿½ç•¥ç©ºç™½å·®å¼‚</strong>ï¼šæ¯”å¯¹å‰å¯¹æ–‡æœ¬è¿›è¡Œå½’ä¸€åŒ–å¤„ç†</p>
<pre><code class="hljs language-arduino" lang="arduino">
    
    
    
  <span class="hljs-function">List&lt;<span class="hljs-type">String</span>&gt;Â <span class="hljs-title">normalizeLines</span><span class="hljs-params">(List&lt;<span class="hljs-type">String</span>&gt;Â lines)</span>Â </span>{
Â Â Â Â <span class="hljs-keyword">return</span>Â lines.<span class="hljs-built_in">stream</span>()
Â Â Â Â Â Â Â Â .<span class="hljs-built_in">map</span>(<span class="hljs-type">String</span>::trim)
Â Â Â Â Â Â Â Â .<span class="hljs-built_in">filter</span>(lineÂ -&gt;Â !line.<span class="hljs-built_in">isEmpty</span>())
Â Â Â Â Â Â Â Â .<span class="hljs-built_in">collect</span>(Collectors.<span class="hljs-built_in">toList</span>());
}
</code></pre>
<p><strong>2. YAML é…ç½®æ¯”å¯¹</strong>ï¼šå…ˆè§£æä¸º JSON æ ‘ï¼Œå†è½¬ä¸ºè§„èŒƒæ ¼å¼æ¯”å¯¹</p>
<pre><code class="hljs language-ini" lang="ini">
    
    
    
  //Â è§£æÂ YAML
ObjectMapperÂ <span class="hljs-attr">yamlMapper</span>Â =Â newÂ ObjectMapper(newÂ YAMLFactory())<span class="hljs-comment">;</span>
JsonNodeÂ <span class="hljs-attr">originalTree</span>Â =Â yamlMapper.readTree(originalYaml)<span class="hljs-comment">;</span>
JsonNodeÂ <span class="hljs-attr">revisedTree</span>Â =Â yamlMapper.readTree(revisedYaml)<span class="hljs-comment">;</span>

//Â è½¬ä¸ºè§„èŒƒÂ JSONÂ å­—ç¬¦ä¸²åæ¯”å¯¹
StringÂ <span class="hljs-attr">originalJson</span>Â =Â newÂ ObjectMapper().writeValueAsString(originalTree)<span class="hljs-comment">;</span>
StringÂ <span class="hljs-attr">revisedJson</span>Â =Â newÂ ObjectMapper().writeValueAsString(revisedTree)<span class="hljs-comment">;</span>
returnÂ compareConfigs(originalJson,Â revisedJson)<span class="hljs-comment">;</span>
</code></pre>
<p><strong>3. å¤§æ–‡ä»¶å¤„ç†</strong>ï¼šé…ç½®æ–‡ä»¶è¿‡å¤§æ—¶ï¼Œå»ºè®®åˆ†å—æ¯”å¯¹æˆ–ä½¿ç”¨å¢é‡æ¯”å¯¹ç­–ç•¥ï¼Œé¿å…å†…å­˜æº¢å‡ºã€‚</p>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p><code>java-diff-utils</code> è™½ç„¶æ˜¯ä¸ªå°å·¥å…·ï¼Œä½†åœ¨é…ç½®ç®¡ç†åœºæ™¯ä¸‹éå¸¸å®ç”¨ã€‚é€šè¿‡æœ¬æ–‡çš„å®è·µï¼Œä½ å¯ä»¥è½»æ¾å®ç°é…ç½®æ–‡ä»¶å·®å¼‚æ¯”å¯¹ã€å¯è§†åŒ–å±•ç¤ºã€å˜æ›´å®¡è®¡ç­‰åŠŸèƒ½ã€‚</p>
<p>ä¸‹é¢ä»“åº“æä¾›äº†å®Œæ•´çš„webåœ¨çº¿æ¯”å¯¹DEMO</p>
<pre><code class="hljs language-ruby" lang="ruby">
    
    
    
  <span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/github.com/yuboon</span><span class="hljs-regexp">/java-examples/tree</span><span class="hljs-regexp">/master/springboot</span>-text-diff
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[whileè¯­å¥]]></title>    <link>https://juejin.cn/post/7589838742551625747</link>    <guid>https://juejin.cn/post/7589838742551625747</guid>    <pubDate>2025-12-31T14:46:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589838742551625747" data-draft-id="7589838714450051113" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="whileè¯­å¥"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-31T14:46:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¯å¤©æ—©ç‚¹ç¡"/> <meta itemprop="url" content="https://juejin.cn/user/3150569573457415"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            whileè¯­å¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3150569573457415/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¯å¤©æ—©ç‚¹ç¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-31T14:46:18.000Z" title="Wed Dec 31 2025 14:46:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>while</code>Â æ˜¯ç¼–ç¨‹è¯­è¨€ä¸­æœ€åŸºç¡€çš„<strong>å¾ªç¯ç»“æ„</strong>ä¹‹ä¸€ï¼Œæ ¸å¿ƒé€»è¾‘æ˜¯ï¼š<strong>å…ˆåˆ¤æ–­æ¡ä»¶ï¼Œå†æ‰§è¡Œå¾ªç¯ä½“</strong>ï¼Œåªè¦æ¡ä»¶ä¸ºçœŸï¼Œå°±é‡å¤æ‰§è¡Œå¾ªç¯ä½“ä»£ç ï¼Œç›´åˆ°æ¡ä»¶ä¸ºå‡æ—¶é€€å‡ºå¾ªç¯ã€‚</p>
<h4 data-id="heading-0">ä¸€ã€åŸºæœ¬è¯­æ³•ï¼ˆä»¥ Python ä¸ºä¾‹ï¼‰</h4>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-keyword">while</span> æ¡ä»¶è¡¨è¾¾å¼:
    å¾ªç¯ä½“ä»£ç ï¼ˆç¼©è¿›ï¼‰
    <span class="hljs-comment"># å¯é€‰ï¼šæ›´æ–°æ¡ä»¶ç›¸å…³çš„å˜é‡ï¼ˆé¿å…æ­»å¾ªç¯ï¼‰</span>
</code></pre>
<ul>
<li><strong>æ¡ä»¶è¡¨è¾¾å¼</strong>ï¼šè¿”å›å¸ƒå°”å€¼ï¼ˆ<code>True</code>/<code>False</code>ï¼‰ï¼Œå¯ä»¥æ˜¯æ¯”è¾ƒè¿ç®—ã€é€»è¾‘è¿ç®—ç­‰ï¼›</li>
<li><strong>å¾ªç¯ä½“</strong>ï¼šæ¡ä»¶ä¸ºÂ <code>True</code>Â æ—¶æ‰§è¡Œçš„ä»£ç å—ï¼Œå¿…é¡»ç¼©è¿›ï¼ˆPython ä¸­é€šå¸¸ 4 ä¸ªç©ºæ ¼ï¼‰ï¼›</li>
<li><strong>å…³é”®</strong>ï¼šå¾ªç¯ä½“å†…å¿…é¡»æœ‰èƒ½è®©æ¡ä»¶æœ€ç»ˆå˜ä¸ºÂ <code>False</code>Â çš„é€»è¾‘ï¼Œå¦åˆ™ä¼šé™·å…¥<strong>æ­»å¾ªç¯</strong>ã€‚</li>
</ul>
<h4 data-id="heading-1">äºŒã€æ ¸å¿ƒç‰¹ç‚¹</h4>
<ol>
<li><strong>å…ˆåˆ¤æ–­ï¼Œåæ‰§è¡Œ</strong>ï¼šå¦‚æœåˆå§‹æ¡ä»¶å°±ä¸ºÂ <code>False</code>ï¼Œå¾ªç¯ä½“ä¸€æ¬¡éƒ½ä¸ä¼šæ‰§è¡Œï¼›</li>
<li><strong>çµæ´»æ§åˆ¶</strong>ï¼šé€‚åˆå¾ªç¯æ¬¡æ•°ä¸ç¡®å®šçš„åœºæ™¯ï¼ˆæ¯”å¦‚ â€œç›´åˆ°ç”¨æˆ·è¾“å…¥æ­£ç¡®ä¸ºæ­¢â€ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-2">ä¸‰ã€åŸºç¡€ç¤ºä¾‹</h4>
<h5 data-id="heading-3">ç¤ºä¾‹ 1ï¼šç®€å•è®¡æ•°ï¼ˆ1 åˆ° 5ï¼‰</h5>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆå§‹åŒ–è®¡æ•°å™¨</span>
count = 1
<span class="hljs-comment"># æ¡ä»¶ï¼šcount &lt;= 5 æ—¶æ‰§è¡Œå¾ªç¯</span>
<span class="hljs-keyword">while</span> count &lt;= 5:
    <span class="hljs-built_in">print</span>(count)
    <span class="hljs-comment"># å¿…é¡»æ›´æ–°è®¡æ•°å™¨ï¼Œå¦åˆ™æ­»å¾ªç¯</span>
    count += 1  <span class="hljs-comment"># ç­‰ä»·äº count = count + 1</span>
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<p>plaintext</p>
<pre><code class="hljs">1
2
3
4
5
</code></pre>
<h5 data-id="heading-4">ç¤ºä¾‹ 2ï¼šæ­»å¾ªç¯ä¸é€€å‡ºï¼ˆbreakï¼‰</h5>
<p>å¦‚æœå¾ªç¯æ¡ä»¶æ°¸è¿œä¸ºÂ <code>True</code>ï¼Œå°±æ˜¯æ­»å¾ªç¯ï¼Œéœ€ç”¨Â <code>break</code>Â ä¸»åŠ¨é€€å‡ºï¼š</p>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
    user_input = <span class="hljs-built_in">input</span>(<span class="hljs-string">"è¯·è¾“å…¥'é€€å‡º'ç»“æŸç¨‹åºï¼š"</span>)
    <span class="hljs-keyword">if</span> user_input == <span class="hljs-string">"é€€å‡º"</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç¨‹åºç»“æŸ"</span>)
        <span class="hljs-keyword">break</span>  <span class="hljs-comment"># è·³å‡ºå¾ªç¯</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä½ è¾“å…¥çš„æ˜¯ï¼š<span class="hljs-subst">{user_input}</span>"</span>)
</code></pre>
<p><strong>è¿è¡Œæ•ˆæœ</strong>ï¼š</p>
<p>plaintext</p>
<pre><code class="hljs language-arduino" lang="arduino">è¯·è¾“å…¥<span class="hljs-string">'é€€å‡º'</span>ç»“æŸç¨‹åºï¼šhello
ä½ è¾“å…¥çš„æ˜¯ï¼šhello
è¯·è¾“å…¥<span class="hljs-string">'é€€å‡º'</span>ç»“æŸç¨‹åºï¼šé€€å‡º
ç¨‹åºç»“æŸ
</code></pre>
<h4 data-id="heading-5">å››ã€è¿›é˜¶ç”¨æ³•</h4>
<h5 data-id="heading-6">1. while + continueï¼ˆè·³è¿‡æœ¬æ¬¡å¾ªç¯ï¼‰</h5>
<p><code>continue</code>Â ä¼šè·³è¿‡å½“å‰å¾ªç¯ä½“å‰©ä½™ä»£ç ï¼Œç›´æ¥å›åˆ°æ¡ä»¶åˆ¤æ–­ï¼š</p>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-dart" lang="dart"># æ‰“å°<span class="hljs-number">1</span><span class="hljs-number">-10</span>ä¸­çš„å¥‡æ•°
<span class="hljs-built_in">num</span> = <span class="hljs-number">0</span>
<span class="hljs-keyword">while</span> <span class="hljs-built_in">num</span> &lt; <span class="hljs-number">10</span>:
    <span class="hljs-built_in">num</span> += <span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">num</span> % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>:  # å¦‚æœæ˜¯å¶æ•°
        <span class="hljs-keyword">continue</span>      # è·³è¿‡æœ¬æ¬¡å¾ªç¯çš„<span class="hljs-built_in">print</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">num</span>)
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<p>plaintext</p>
<pre><code class="hljs">1
3
5
7
9
</code></pre>
<h5 data-id="heading-7">2. while + elseï¼ˆå¾ªç¯æ­£å¸¸ç»“æŸæ—¶æ‰§è¡Œï¼‰</h5>
<p><code>else</code>Â å—ä»…åœ¨å¾ªç¯<strong>ä¸æ˜¯è¢« break æ‰“æ–­</strong>ï¼Œè€Œæ˜¯å› æ¡ä»¶ä¸ºå‡æ­£å¸¸ç»“æŸæ—¶æ‰§è¡Œï¼š</p>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash">count = 1
<span class="hljs-keyword">while</span> count &lt;= 3:
    <span class="hljs-built_in">print</span>(count)
    count += 1
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¾ªç¯æ­£å¸¸ç»“æŸ"</span>)  <span class="hljs-comment"># ä¼šæ‰§è¡Œ</span>

count = 1
<span class="hljs-keyword">while</span> count &lt;= 3:
    <span class="hljs-built_in">print</span>(count)
    <span class="hljs-keyword">if</span> count == 2:
        <span class="hljs-built_in">break</span>
    count += 1
<span class="hljs-keyword">else</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¾ªç¯æ­£å¸¸ç»“æŸ"</span>)  <span class="hljs-comment"># ä¸ä¼šæ‰§è¡Œï¼ˆè¢«breakæ‰“æ–­ï¼‰</span>
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<p>plaintext</p>
<pre><code class="hljs">1
2
3
å¾ªç¯æ­£å¸¸ç»“æŸ
1
2
</code></pre>
<h4 data-id="heading-8">äº”ã€å¸¸è§æ³¨æ„äº‹é¡¹</h4>
<ol>
<li>
<p><strong>é¿å…æ­»å¾ªç¯</strong>ï¼šå¿…é¡»ç¡®ä¿å¾ªç¯ä½“å†…æœ‰èƒ½è®©æ¡ä»¶æœ€ç»ˆä¸ºÂ <code>False</code>Â çš„é€»è¾‘ï¼ˆå¦‚è®¡æ•°å™¨é€’å¢ã€ç”¨æˆ·è¾“å…¥åˆ¤æ–­ç­‰ï¼‰ï¼›</p>
</li>
<li>
<p><strong>ç¼©è¿›é—®é¢˜</strong>ï¼ˆPythonï¼‰ï¼šå¾ªç¯ä½“å¿…é¡»ç¼©è¿›ï¼Œå¦åˆ™ä¼šæŠ¥é”™æˆ–é€»è¾‘é”™è¯¯ï¼›</p>
</li>
<li>
<p><strong>åˆå§‹å€¼è®¾ç½®</strong>ï¼šè®¡æ•°å™¨ã€åˆ¤æ–­å˜é‡çš„åˆå§‹å€¼è¦åˆç†ï¼ˆæ¯”å¦‚è®¡æ•°ä» 0 è¿˜æ˜¯ 1 å¼€å§‹ï¼‰ï¼›</p>
</li>
<li>
<p><strong>ä¸ for å¾ªç¯çš„åŒºåˆ«</strong>ï¼š</p>
<ul>
<li><code>for</code>ï¼šé€‚åˆ<strong>å¾ªç¯æ¬¡æ•°ç¡®å®š</strong>çš„åœºæ™¯ï¼ˆå¦‚éå†åˆ—è¡¨ã€å›ºå®šæ¬¡æ•°ï¼‰ï¼›</li>
<li><code>while</code>ï¼šé€‚åˆ<strong>å¾ªç¯æ¬¡æ•°ä¸ç¡®å®š</strong>çš„åœºæ™¯ï¼ˆå¦‚ç›´åˆ°æ»¡è¶³æŸä¸ªæ¡ä»¶ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-9">å…­ã€å…¶ä»–è¯­è¨€çš„ while è¯­æ³•ï¼ˆç®€è¦å¯¹æ¯”ï¼‰</h4>

























<table><thead><tr><th>è¯­è¨€</th><th>è¯­æ³•ç¤ºä¾‹</th><th>æ ¸å¿ƒå·®å¼‚</th></tr></thead><tbody><tr><td>Java</td><td><code>int i=1; while(i&lt;=5) { System.out.println(i); i++; }</code></td><td>ç”¨å¤§æ‹¬å·åŒ…è£¹å¾ªç¯ä½“ï¼Œæ— éœ€ç¼©è¿›</td></tr><tr><td>C/C++</td><td><code>int i=1; while(i&lt;=5) { printf("%d\n", i); i++; }</code></td><td>åŒä¸Š</td></tr><tr><td>JavaScript</td><td><code>let i=1; while(i&lt;=5) { console.log(i); i++; }</code></td><td>å˜é‡å£°æ˜ç”¨ let/var</td></tr></tbody></table>
<p>æ€»ä¹‹ï¼Œ<code>while</code>Â å¾ªç¯çš„æ ¸å¿ƒæ˜¯ â€œæ¡ä»¶é©±åŠ¨æ‰§è¡Œâ€ï¼Œåªè¦æŒæ¡ â€œæ¡ä»¶åˆ¤æ–­ + å¾ªç¯ä½“æ›´æ–° + é€€å‡ºé€»è¾‘â€ï¼Œå°±èƒ½çµæ´»è§£å†³å„ç±»å¾ªç¯é—®é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[continueè¯­å¥]]></title>    <link>https://juejin.cn/post/7589838742551642131</link>    <guid>https://juejin.cn/post/7589838742551642131</guid>    <pubDate>2025-12-31T14:47:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589838742551642131" data-draft-id="7589828815939813430" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="continueè¯­å¥"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-31T14:47:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¯å¤©æ—©ç‚¹ç¡"/> <meta itemprop="url" content="https://juejin.cn/user/3150569573457415"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            continueè¯­å¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3150569573457415/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¯å¤©æ—©ç‚¹ç¡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-31T14:47:52.000Z" title="Wed Dec 31 2025 14:47:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>continue</code>Â æ˜¯å¾ªç¯ç»“æ„ï¼ˆ<code>while</code>/<code>for</code>ï¼‰ä¸­çš„æ ¸å¿ƒæ§åˆ¶è¯­å¥ï¼Œä½œç”¨æ˜¯<strong>è·³è¿‡å½“å‰å¾ªç¯è¿­ä»£çš„å‰©ä½™ä»£ç ï¼Œç›´æ¥å›åˆ°å¾ªç¯æ¡ä»¶åˆ¤æ–­å¤„ï¼Œå¼€å§‹ä¸‹ä¸€æ¬¡è¿­ä»£</strong>ï¼ˆä¸ä¼šç»ˆæ­¢æ•´ä¸ªå¾ªç¯ï¼Œä»…è·³è¿‡æœ¬æ¬¡ï¼‰ã€‚</p>
<h4 data-id="heading-0">ä¸€ã€æ ¸å¿ƒç‰¹ç‚¹</h4>
<ol>
<li><strong>è·³è¿‡æœ¬æ¬¡ï¼Œä¸ç»ˆæ­¢å¾ªç¯</strong>ï¼šä¸Â <code>break</code>Â ï¼ˆç›´æ¥ç»ˆæ­¢æ•´ä¸ªå¾ªç¯ï¼‰çš„æ ¸å¿ƒåŒºåˆ«ï¼›</li>
<li><strong>ä»…ä½œç”¨äºå½“å‰å¾ªç¯å±‚</strong>ï¼šåµŒå¥—å¾ªç¯ä¸­ï¼Œ<code>continue</code>Â åªå½±å“æ‰€åœ¨çš„é‚£ä¸€å±‚å¾ªç¯ï¼›</li>
<li><strong>æ‰§è¡Œé€»è¾‘</strong>ï¼šé‡åˆ°Â <code>continue</code>Â â†’ ç«‹å³è·³å‡ºæœ¬æ¬¡å¾ªç¯ä½“å‰©ä½™ä»£ç  â†’ æ‰§è¡Œå¾ªç¯çš„ â€œæ›´æ–° / åˆ¤æ–­â€ æ­¥éª¤ï¼ˆå¦‚Â <code>while</code>Â çš„æ¡ä»¶åˆ¤æ–­ã€<code>for</code>Â çš„ä¸‹ä¸€ä¸ªå…ƒç´ éå†ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-1">äºŒã€åŸºæœ¬ç”¨æ³•ï¼ˆç»“åˆ while/for ç¤ºä¾‹ï¼‰</h4>
<h5 data-id="heading-2">ç¤ºä¾‹ 1ï¼šwhile å¾ªç¯ä¸­ä½¿ç”¨ continueï¼ˆè·³è¿‡å¶æ•°ï¼Œæ‰“å° 1-10 çš„å¥‡æ•°ï¼‰</h5>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-built_in">num</span> = <span class="hljs-number">0</span>
<span class="hljs-keyword">while</span> <span class="hljs-built_in">num</span> &lt; <span class="hljs-number">10</span>:
    <span class="hljs-built_in">num</span> += <span class="hljs-number">1</span>  # å…ˆé€’å¢ï¼Œå†åˆ¤æ–­
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">num</span> % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>:  # åˆ¤å®šä¸ºå¶æ•°æ—¶
        <span class="hljs-keyword">continue</span>      # è·³è¿‡åç»­çš„<span class="hljs-built_in">print</span>ï¼Œç›´æ¥å›åˆ°<span class="hljs-keyword">while</span>æ¡ä»¶åˆ¤æ–­
    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">num</span>)  # ä»…å¥‡æ•°ä¼šæ‰§è¡Œè¿™è¡Œ
</code></pre>
<p><strong>æ‰§è¡Œæµç¨‹æ‹†è§£</strong>ï¼š</p>
<ul>
<li>num=1 â†’ ä¸æ˜¯å¶æ•° â†’ æ‰“å° 1ï¼›</li>
<li>num=2 â†’ æ˜¯å¶æ•° â†’ è§¦å‘ continue â†’ è·³è¿‡ print â†’ å›åˆ° while æ¡ä»¶ï¼ˆnum&lt;10 ä»æˆç«‹ï¼‰ï¼›</li>
<li>num=3 â†’ ä¸æ˜¯å¶æ•° â†’ æ‰“å° 3ï¼›</li>
<li>â€¦â€¦ ç›´åˆ° num=10ï¼Œå¾ªç¯ç»“æŸã€‚</li>
</ul>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<p>plaintext</p>
<pre><code class="hljs">1
3
5
7
9
</code></pre>
<h5 data-id="heading-3">ç¤ºä¾‹ 2ï¼šfor å¾ªç¯ä¸­ä½¿ç”¨ continueï¼ˆè·³è¿‡åˆ—è¡¨ä¸­çš„ç‰¹å®šå…ƒç´ ï¼‰</h5>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">fruits</span> = [<span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"æ¦´è²"</span>, <span class="hljs-string">"æ©™å­"</span>, <span class="hljs-string">"æ¦´è²"</span>]
for fruit in fruits:
    if <span class="hljs-attr">fruit</span> == <span class="hljs-string">"æ¦´è²"</span>:  <span class="hljs-comment"># è·³è¿‡â€œæ¦´è²â€</span>
        continue
    print(f"æˆ‘å–œæ¬¢åƒ{fruit}")
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<p>plaintext</p>
<pre><code class="hljs">æˆ‘å–œæ¬¢åƒè‹¹æœ
æˆ‘å–œæ¬¢åƒé¦™è•‰
æˆ‘å–œæ¬¢åƒæ©™å­
</code></pre>
<h4 data-id="heading-4">ä¸‰ã€å¸¸è§åœºæ™¯</h4>
<h5 data-id="heading-5">åœºæ™¯ 1ï¼šè¿‡æ»¤æ— æ•ˆæ•°æ®ï¼ˆè·³è¿‡ç©ºå€¼ / å¼‚å¸¸å€¼ï¼‰</h5>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># éå†åˆ—è¡¨ï¼Œä»…æ‰“å°éç©ºçš„æœ‰æ•ˆå­—ç¬¦ä¸²</span>
data = [<span class="hljs-string">""</span>, <span class="hljs-string">"hello"</span>, <span class="hljs-literal">None</span>, <span class="hljs-string">"world"</span>, <span class="hljs-string">"  "</span>, <span class="hljs-string">"python"</span>]
<span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data:
    <span class="hljs-comment"># è·³è¿‡ç©ºå­—ç¬¦ä¸²ã€Noneã€çº¯ç©ºæ ¼çš„å…ƒç´ </span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> item <span class="hljs-keyword">or</span> item.strip() == <span class="hljs-string">""</span>:
        <span class="hljs-keyword">continue</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ‰æ•ˆæ•°æ®ï¼š<span class="hljs-subst">{item}</span>"</span>)
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<p>plaintext</p>
<pre><code class="hljs">æœ‰æ•ˆæ•°æ®ï¼šhello
æœ‰æ•ˆæ•°æ®ï¼šworld
æœ‰æ•ˆæ•°æ®ï¼špython
</code></pre>
<h5 data-id="heading-6">åœºæ™¯ 2ï¼šåµŒå¥—å¾ªç¯ä¸­çš„ continueï¼ˆä»…å½±å“å†…å±‚å¾ªç¯ï¼‰</h5>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ‰“å°1-3çš„ä¹˜æ³•è¡¨ï¼Œä½†è·³è¿‡ç¬¬äºŒä¸ªæ•°ä¸º2çš„æƒ…å†µ</span>
i = <span class="hljs-number">1</span>
<span class="hljs-keyword">while</span> i &lt;= <span class="hljs-number">3</span>:
    j = <span class="hljs-number">1</span>
    <span class="hljs-keyword">while</span> j &lt;= <span class="hljs-number">3</span>:
        <span class="hljs-keyword">if</span> j == <span class="hljs-number">2</span>:
            j += <span class="hljs-number">1</span>  <span class="hljs-comment"># å¿…é¡»æ‰‹åŠ¨æ›´æ–°jï¼Œå¦åˆ™å†…å±‚å¾ªç¯ä¼šå¡æ­»ï¼ˆcontinueåjä¸€ç›´ä¸º2ï¼‰</span>
            <span class="hljs-keyword">continue</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i}</span>Ã—<span class="hljs-subst">{j}</span>=<span class="hljs-subst">{i*j}</span>"</span>, end=<span class="hljs-string">" "</span>)
        j += <span class="hljs-number">1</span>
    <span class="hljs-built_in">print</span>()  <span class="hljs-comment"># æ¢è¡Œ</span>
    i += <span class="hljs-number">1</span>
</code></pre>
<p><strong>å…³é”®æ³¨æ„</strong>ï¼šåµŒå¥—Â <code>while</code>Â ä¸­ä½¿ç”¨Â <code>continue</code>Â æ—¶ï¼Œéœ€æ‰‹åŠ¨æ›´æ–°å¾ªç¯å˜é‡ï¼ˆå¦‚ä¸Šä¾‹çš„Â <code>j += 1</code>ï¼‰ï¼Œå¦åˆ™ä¼šå› å˜é‡æœªæ›´æ–°å¯¼è‡´<strong>æ­»å¾ªç¯</strong>ï¼ˆj æ°¸è¿œä¸º 2ï¼Œæ¡ä»¶<code>j&lt;=3</code>ä¸€ç›´æˆç«‹ï¼Œä¸”æ¯æ¬¡éƒ½è§¦å‘ continueï¼‰ã€‚</p>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<p>plaintext</p>
<pre><code class="hljs language-ini" lang="ini">1Ã—<span class="hljs-attr">1</span>=<span class="hljs-number">1</span> <span class="hljs-number">1</span>Ã—<span class="hljs-number">3</span>=<span class="hljs-number">3</span> 
2Ã—<span class="hljs-attr">1</span>=<span class="hljs-number">2</span> <span class="hljs-number">2</span>Ã—<span class="hljs-number">3</span>=<span class="hljs-number">6</span> 
3Ã—<span class="hljs-attr">1</span>=<span class="hljs-number">3</span> <span class="hljs-number">3</span>Ã—<span class="hljs-number">3</span>=<span class="hljs-number">9</span> 
</code></pre>
<h4 data-id="heading-7">å››ã€continue ä¸ break çš„æ ¸å¿ƒåŒºåˆ«</h4>




















<table><thead><tr><th>è¯­å¥</th><th>ä½œç”¨</th><th>å¾ªç¯åç»­çŠ¶æ€</th></tr></thead><tbody><tr><td>continue</td><td>è·³è¿‡æœ¬æ¬¡è¿­ä»£å‰©ä½™ä»£ç </td><td>ç»§ç»­ä¸‹ä¸€æ¬¡è¿­ä»£ï¼ˆå¾ªç¯ä¸ç»ˆæ­¢ï¼‰</td></tr><tr><td>break</td><td>ç›´æ¥ç»ˆæ­¢æ•´ä¸ªå¾ªç¯</td><td>å¾ªç¯å½»åº•ç»“æŸ</td></tr></tbody></table>
<p><strong>å¯¹æ¯”ç¤ºä¾‹</strong>ï¼š</p>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># continueç‰ˆï¼šè·³è¿‡2ï¼Œæ‰“å°1ã€3ã€4</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== continue ==="</span>)
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> 1,2,3,4:
    <span class="hljs-keyword">if</span> i == 2:
        <span class="hljs-built_in">continue</span>
    <span class="hljs-built_in">print</span>(i)

<span class="hljs-comment"># breakç‰ˆï¼šé‡åˆ°2ç›´æ¥ç»ˆæ­¢ï¼Œä»…æ‰“å°1</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"=== break ==="</span>)
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> 1,2,3,4:
    <span class="hljs-keyword">if</span> i == 2:
        <span class="hljs-built_in">break</span>
    <span class="hljs-built_in">print</span>(i)
</code></pre>
<p><strong>è¾“å‡º</strong>ï¼š</p>
<p>plaintext</p>
<pre><code class="hljs language-ini" lang="ini">=== <span class="hljs-attr">continue</span> ===
1
3
<span class="hljs-attr">4</span>
=== <span class="hljs-attr">break</span> ===
1
</code></pre>
<h4 data-id="heading-8">äº”ã€æ³¨æ„äº‹é¡¹</h4>
<ol>
<li>
<p><strong>é¿å…æ­»å¾ªç¯</strong>ï¼šåœ¨Â <code>while</code>Â å¾ªç¯ä¸­ä½¿ç”¨Â <code>continue</code>Â æ—¶ï¼ŒåŠ¡å¿…ç¡®ä¿å¾ªç¯å˜é‡ï¼ˆå¦‚Â <code>num</code>/<code>j</code>ï¼‰åœ¨Â <code>continue</code>Â å‰ / åæœ‰æ›´æ–°é€»è¾‘ï¼Œå¦åˆ™å˜é‡å€¼ä¸å˜ï¼Œæ¡ä»¶æ°¸è¿œä¸ºçœŸï¼Œå¯¼è‡´æ­»å¾ªç¯ã€‚âŒ é”™è¯¯ç¤ºä¾‹ï¼ˆæ­»å¾ªç¯ï¼‰ï¼š</p>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-built_in">num</span> = <span class="hljs-number">1</span>
<span class="hljs-keyword">while</span> <span class="hljs-built_in">num</span> &lt;= <span class="hljs-number">5</span>:
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">num</span> == <span class="hljs-number">3</span>:
        <span class="hljs-keyword">continue</span>  # è·³è¿‡åç»­çš„<span class="hljs-built_in">num</span>+=<span class="hljs-number">1</span>ï¼Œ<span class="hljs-built_in">num</span>æ°¸è¿œä¸º<span class="hljs-number">3</span>ï¼Œå¾ªç¯æ°¸ä¸ç»“æŸ
    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">num</span>)
    <span class="hljs-built_in">num</span> += <span class="hljs-number">1</span>
</code></pre>
<p>âœ… æ­£ç¡®ç¤ºä¾‹ï¼ˆå…ˆæ›´æ–°å†åˆ¤æ–­ï¼‰ï¼š</p>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-built_in">num</span> = <span class="hljs-number">0</span>
<span class="hljs-keyword">while</span> <span class="hljs-built_in">num</span> &lt;= <span class="hljs-number">5</span>:
    <span class="hljs-built_in">num</span> += <span class="hljs-number">1</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">num</span> == <span class="hljs-number">3</span>:
        <span class="hljs-keyword">continue</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">num</span>)  # è¾“å‡º<span class="hljs-number">1</span>ã€<span class="hljs-number">2</span>ã€<span class="hljs-number">4</span>ã€<span class="hljs-number">5</span>ã€<span class="hljs-number">6</span>
</code></pre>
</li>
<li>
<p><strong>ä»£ç ä½ç½®</strong>ï¼š<code>continue</code>Â åçš„ä»£ç æ°¸è¿œä¸ä¼šæ‰§è¡Œï¼ˆæœ¬æ¬¡è¿­ä»£ï¼‰ï¼Œå› æ­¤éœ€å°†åˆ¤æ–­é€»è¾‘æ”¾åœ¨Â <code>continue</code>Â ä¹‹å‰ï¼Œé¿å…æ— æ•ˆä»£ç ã€‚</p>
</li>
<li>
<p><strong>å…¶ä»–è¯­è¨€çš„è¯­æ³•ä¸€è‡´æ€§</strong>ï¼šJava/C/C++/JavaScript ä¸­Â <code>continue</code>Â çš„é€»è¾‘ä¸ Python å®Œå…¨ä¸€è‡´ï¼Œä»…è¯­æ³•æ ¼å¼å·®å¼‚ï¼ˆå¦‚å¤§æ‹¬å·ä»£æ›¿ç¼©è¿›ï¼‰ï¼š</p>
<p>java</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini">// Javaç¤ºä¾‹ï¼šè·³è¿‡å¶æ•°
for (int <span class="hljs-attr">i</span> = <span class="hljs-number">1</span><span class="hljs-comment">; i &lt;= 5; i++) {</span>
    if (i % <span class="hljs-attr">2</span> == <span class="hljs-number">0</span>) {
        continue<span class="hljs-comment">;</span>
    }
    System.out.println(i)<span class="hljs-comment">; // è¾“å‡º1ã€3ã€5</span>
}
</code></pre>
</li>
</ol>
<p>æ€»ä¹‹ï¼Œ<code>continue</code>Â çš„æ ¸å¿ƒä»·å€¼æ˜¯ â€œç²¾å‡†è¿‡æ»¤å¾ªç¯ä¸­çš„ç‰¹å®šåœºæ™¯â€ï¼Œè®©ä»£ç æ— éœ€åµŒå¥—å¤šå±‚Â <code>if</code>Â å³å¯å®ç°æ¡ä»¶æ€§è·³è¿‡ï¼Œæ˜¯ç®€åŒ–å¾ªç¯é€»è¾‘çš„å…³é”®è¯­å¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[3åˆ†é’ŸSolidity: 8.6 ERC721(NFT)]]></title>    <link>https://juejin.cn/post/7589828902158778418</link>    <guid>https://juejin.cn/post/7589828902158778418</guid>    <pubDate>2025-12-31T15:50:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589828902158778418" data-draft-id="7589839019717017650" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="3åˆ†é’ŸSolidity: 8.6 ERC721(NFT)"/> <meta itemprop="keywords" content="Solidity,web3,æ™ºèƒ½åˆçº¦"/> <meta itemprop="datePublished" content="2025-12-31T15:50:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Rockbean"/> <meta itemprop="url" content="https://juejin.cn/user/4054654615823560"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            3åˆ†é’ŸSolidity: 8.6 ERC721(NFT)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4054654615823560/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Rockbean
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-31T15:50:34.000Z" title="Wed Dec 31 2025 15:50:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ¬¢è¿è®¢é˜…ä¸“æ </strong>ï¼š<a href="https://juejin.cn/column/7578762210285977663" title="https://juejin.cn/column/7578762210285977663" target="_blank">3åˆ†é’ŸSolidity--æ™ºèƒ½åˆçº¦--Web3åŒºå—é“¾æŠ€æœ¯å¿…å­¦</a></p>
<p>å¦‚éœ€è·å–æœ¬å†…å®¹çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè¯·å‚è§ <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">Cyfrin.io ä¸Šçš„ERC721ï¼ˆä»£ç ç¤ºä¾‹ï¼‰</a></p>
<p>å’Œ<a href="https://link.juejin.cn?target=https%2F%2Ftheethereum.wiki%2Ferc20_token_standard%2F" target="_blank" title="https//theethereum.wiki/erc20_token_standard/" ref="nofollow noopener noreferrer">ERC20</a>ä¸€æ ·ï¼ŒERC721åŒæ ·æ˜¯ä¸€ä¸ªä»£å¸æ ‡å‡†ï¼Œæ­¤ä»£å¸è‹±æ–‡æ˜¯Non-Fungible Tokensï¼Œç®€å†™ä¸ºNFTï¼Œå³éåŒè´¨ä»£å¸ã€‚</p>
<p>éåŒè´¨ä»£å¸(NFT)æ˜¯ä¸€ç§å…·æœ‰å”¯ä¸€æ€§è¯†åˆ«çš„ä»£å¸ ï¼ŒERC-20 Tokenå¯ä»¥æ— é™ç»†åˆ†ä¸º10^18ä»½ï¼Œè€ŒERC721çš„Tokenæœ€å°çš„å•ä½ä¸º1ï¼Œæ— æ³•å†åˆ†å‰²ã€‚</p>
<p>ç”±äºERC721ä»£å¸å…·æœ‰å”¯ä¸€æ€§ï¼Œä¸å¯åˆ†å‰²çš„ç‰¹ç‚¹ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å’Œä¸€äº›å…·ä½“çš„ç‰©å“å…³è”èµ·æ¥ï¼Œé€šè¿‡è¿™æ ·ä¸€ä¸ªæ ‡å‡†ï¼Œå¯ä»¥æ›´å¹¿æ³›çš„åº”ç”¨åˆ°å®é™…åœºæ™¯ä¸­ã€‚</p>
<p>ERC721ç¤ºä¾‹</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span>
pragma solidity ^<span class="hljs-number">0.8</span><span class="hljs-selector-class">.26</span>;

interface IERC165 {
    function <span class="hljs-built_in">supportsInterface</span>(bytes4 interfaceID)
        external
        view
        returns (bool);
}

interface IERC721 is IERC165 {
    function <span class="hljs-built_in">balanceOf</span>(address owner) external view returns (uint256 balance);
    function <span class="hljs-built_in">ownerOf</span>(uint256 tokenId) external view returns (address owner);
    function <span class="hljs-built_in">safeTransferFrom</span>(address from, address to, uint256 tokenId)
        external;
    function <span class="hljs-built_in">safeTransferFrom</span>(
        address from,
        address to,
        uint256 tokenId,
        bytes calldata data
    ) external;
    function <span class="hljs-built_in">transferFrom</span>(address from, address to, uint256 tokenId) external;
    function <span class="hljs-built_in">approve</span>(address to, uint256 tokenId) external;
    function <span class="hljs-built_in">getApproved</span>(uint256 tokenId)
        external
        view
        returns (address operator);
    function <span class="hljs-built_in">setApprovalForAll</span>(address operator, bool _approved) external;
    function <span class="hljs-built_in">isApprovedForAll</span>(address owner, address operator)
        external
        view
        returns (bool);
}

interface IERC721Receiver {
    function <span class="hljs-built_in">onERC721Received</span>(
        address operator,
        address from,
        uint256 tokenId,
        bytes calldata data
    ) external returns (bytes4);
}

contract ERC721 is IERC721 {
    event <span class="hljs-built_in">Transfer</span>(
        address indexed from, address indexed to, uint256 indexed id
    );
    event <span class="hljs-built_in">Approval</span>(
        address indexed owner, address indexed spender, uint256 indexed id
    );
    event <span class="hljs-built_in">ApprovalForAll</span>(
        address indexed owner, address indexed operator, bool approved
    );

    <span class="hljs-comment">// Mapping from token ID to owner address</span>
    <span class="hljs-built_in">mapping</span>(uint256 =&gt; address) internal _ownerOf;

    <span class="hljs-comment">// Mapping owner address to token count</span>
    <span class="hljs-built_in">mapping</span>(address =&gt; uint256) internal _balanceOf;

    <span class="hljs-comment">// Mapping from token ID to approved address</span>
    <span class="hljs-built_in">mapping</span>(uint256 =&gt; address) internal _approvals;

    <span class="hljs-comment">// Mapping from owner to operator approvals</span>
    <span class="hljs-built_in">mapping</span>(address =&gt; mapping(address =&gt; bool)) public isApprovedForAll;

    function <span class="hljs-built_in">supportsInterface</span>(bytes4 interfaceId)
        external
        pure
        returns (bool)
    {
        return interfaceId == <span class="hljs-built_in">type</span>(IERC721)<span class="hljs-selector-class">.interfaceId</span>
            || interfaceId == <span class="hljs-built_in">type</span>(IERC165)<span class="hljs-selector-class">.interfaceId</span>;
    }

    function <span class="hljs-built_in">ownerOf</span>(uint256 id) external view returns (address owner) {
        owner = _ownerOf<span class="hljs-selector-attr">[id]</span>;
        <span class="hljs-built_in">require</span>(owner != address(<span class="hljs-number">0</span>), "token doesn't exist");
    }

    function <span class="hljs-built_in">balanceOf</span>(address owner) external view returns (uint256) {
        <span class="hljs-built_in">require</span>(owner != address(<span class="hljs-number">0</span>), "owner = zero <span class="hljs-selector-tag">address</span>");
        return _balanceOf<span class="hljs-selector-attr">[owner]</span>;
    }

    function <span class="hljs-built_in">setApprovalForAll</span>(address operator, bool approved) external {
        isApprovedForAll<span class="hljs-selector-attr">[msg.sender]</span><span class="hljs-selector-attr">[operator]</span> = approved;
        emit <span class="hljs-built_in">ApprovalForAll</span>(msg.sender, operator, approved);
    }

    function <span class="hljs-built_in">approve</span>(address spender, uint256 id) external {
        <span class="hljs-selector-tag">address</span> owner = _ownerOf<span class="hljs-selector-attr">[id]</span>;
        <span class="hljs-built_in">require</span>(
            msg.sender == owner || isApprovedForAll[owner][msg.sender],
            "not authorized"
        );

        _approvals<span class="hljs-selector-attr">[id]</span> = spender;

        emit <span class="hljs-built_in">Approval</span>(owner, spender, id);
    }

    function <span class="hljs-built_in">getApproved</span>(uint256 id) external view returns (address) {
        <span class="hljs-built_in">require</span>(_ownerOf[id] != address(<span class="hljs-number">0</span>), "token doesn't exist");
        return _approvals<span class="hljs-selector-attr">[id]</span>;
    }

    function <span class="hljs-built_in">_isApprovedOrOwner</span>(address owner, address spender, uint256 id)
        internal
        view
        returns (bool)
    {
        return (
            spender == owner || isApprovedForAll[owner][spender]
                || spender == _approvals[id]
        );
    }

    function <span class="hljs-built_in">transferFrom</span>(address from, address to, uint256 id) public {
        <span class="hljs-built_in">require</span>(from == _ownerOf[id], "from != owner");
        <span class="hljs-built_in">require</span>(to != address(<span class="hljs-number">0</span>), "transfer to zero <span class="hljs-selector-tag">address</span>");

        <span class="hljs-built_in">require</span>(_isApprovedOrOwner(from, msg.sender, id), "not authorized");

        _balanceOf<span class="hljs-selector-attr">[from]</span>--;
        _balanceOf<span class="hljs-selector-attr">[to]</span>++;
        _ownerOf<span class="hljs-selector-attr">[id]</span> = to;

        delete _approvals<span class="hljs-selector-attr">[id]</span>;

        emit <span class="hljs-built_in">Transfer</span>(from, to, id);
    }

    function <span class="hljs-built_in">safeTransferFrom</span>(address from, address to, uint256 id) external {
        <span class="hljs-built_in">transferFrom</span>(from, to, id);

        <span class="hljs-built_in">require</span>(
            to.code.length == <span class="hljs-number">0</span>
                || IERC721Receiver(to)<span class="hljs-selector-class">.onERC721Received</span>(msg.sender, from, id, "")
                    == IERC721Receiver<span class="hljs-selector-class">.onERC721Received</span><span class="hljs-selector-class">.selector</span>,
            "unsafe recipient"
        );
    }

    function <span class="hljs-built_in">safeTransferFrom</span>(
        address from,
        address to,
        uint256 id,
        bytes calldata data
    ) external {
        <span class="hljs-built_in">transferFrom</span>(from, to, id);

        <span class="hljs-built_in">require</span>(
            to.code.length == <span class="hljs-number">0</span>
                || IERC721Receiver(to)<span class="hljs-selector-class">.onERC721Received</span>(msg.sender, from, id, data)
                    == IERC721Receiver<span class="hljs-selector-class">.onERC721Received</span><span class="hljs-selector-class">.selector</span>,
            "unsafe recipient"
        );
    }

    function <span class="hljs-built_in">_mint</span>(address to, uint256 id) internal {
        <span class="hljs-built_in">require</span>(to != address(<span class="hljs-number">0</span>), "mint to zero <span class="hljs-selector-tag">address</span>");
        <span class="hljs-built_in">require</span>(_ownerOf[id] == address(<span class="hljs-number">0</span>), "already minted");

        _balanceOf<span class="hljs-selector-attr">[to]</span>++;
        _ownerOf<span class="hljs-selector-attr">[id]</span> = to;

        emit <span class="hljs-built_in">Transfer</span>(address(<span class="hljs-number">0</span>), to, id);
    }

    function <span class="hljs-built_in">_burn</span>(uint256 id) internal {
        <span class="hljs-selector-tag">address</span> owner = _ownerOf<span class="hljs-selector-attr">[id]</span>;
        <span class="hljs-built_in">require</span>(owner != address(<span class="hljs-number">0</span>), "not minted");

        _balanceOf<span class="hljs-selector-attr">[owner]</span> -= <span class="hljs-number">1</span>;

        delete _ownerOf<span class="hljs-selector-attr">[id]</span>;
        delete _approvals<span class="hljs-selector-attr">[id]</span>;

        emit <span class="hljs-built_in">Transfer</span>(owner, address(<span class="hljs-number">0</span>), id);
    }
}

contract MyNFT is ERC721 {
    function <span class="hljs-built_in">mint</span>(address to, uint256 id) external {
        <span class="hljs-built_in">_mint</span>(to, id);
    }

    function <span class="hljs-built_in">burn</span>(uint256 id) external {
        <span class="hljs-built_in">require</span>(msg.sender == _ownerOf[id], "not owner");
        <span class="hljs-built_in">_burn</span>(id);
    }
}
</code></pre>
<p>Remix Lite å°è¯•ä¸€ä¸‹</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fremix.byteatatime.dev%2F%3F%23code%3DLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVApwcmFnbWEgc29saWRpdHkgXjAuOC4yNjsKCmludGVyZmFjZSBJRVJDMTY1IHsKICAgIGZ1bmN0aW9uIHN1cHBvcnRzSW50ZXJmYWNlKGJ5dGVzNCBpbnRlcmZhY2VJRCkKICAgICAgICBleHRlcm5hbAogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zIChib29sKTsKfQoKaW50ZXJmYWNlIElFUkM3MjEgaXMgSUVSQzE2NSB7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBvd25lcikgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogICAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IHRva2VuSWQpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBvd25lcik7CiAgICBmdW5jdGlvbiBzYWZlVHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB0b2tlbklkKQogICAgICAgIGV4dGVybmFsOwogICAgZnVuY3Rpb24gc2FmZVRyYW5zZmVyRnJvbSgKICAgICAgICBhZGRyZXNzIGZyb20sCiAgICAgICAgYWRkcmVzcyB0bywKICAgICAgICB1aW50MjU2IHRva2VuSWQsCiAgICAgICAgYnl0ZXMgY2FsbGRhdGEgZGF0YQogICAgKSBleHRlcm5hbDsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdG9rZW5JZCkgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgdG8sIHVpbnQyNTYgdG9rZW5JZCkgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBnZXRBcHByb3ZlZCh1aW50MjU2IHRva2VuSWQpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAoYWRkcmVzcyBvcGVyYXRvcik7CiAgICBmdW5jdGlvbiBzZXRBcHByb3ZhbEZvckFsbChhZGRyZXNzIG9wZXJhdG9yLCBib29sIF9hcHByb3ZlZCkgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBpc0FwcHJvdmVkRm9yQWxsKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgb3BlcmF0b3IpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAoYm9vbCk7Cn0KCmludGVyZmFjZSBJRVJDNzIxUmVjZWl2ZXIgewogICAgZnVuY3Rpb24gb25FUkM3MjFSZWNlaXZlZCgKICAgICAgICBhZGRyZXNzIG9wZXJhdG9yLAogICAgICAgIGFkZHJlc3MgZnJvbSwKICAgICAgICB1aW50MjU2IHRva2VuSWQsCiAgICAgICAgYnl0ZXMgY2FsbGRhdGEgZGF0YQogICAgKSBleHRlcm5hbCByZXR1cm5zIChieXRlczQpOwp9Cgpjb250cmFjdCBFUkM3MjEgaXMgSUVSQzcyMSB7CiAgICBldmVudCBUcmFuc2ZlcigKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGluZGV4ZWQgaWQKICAgICk7CiAgICBldmVudCBBcHByb3ZhbCgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IGluZGV4ZWQgaWQKICAgICk7CiAgICBldmVudCBBcHByb3ZhbEZvckFsbCgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBvcGVyYXRvciwgYm9vbCBhcHByb3ZlZAogICAgKTsKCiAgICAvLyBNYXBwaW5nIGZyb20gdG9rZW4gSUQgdG8gb3duZXIgYWRkcmVzcwogICAgbWFwcGluZyh1aW50MjU2ID0%2BIGFkZHJlc3MpIGludGVybmFsIF9vd25lck9mOwoKICAgIC8vIE1hcHBpbmcgb3duZXIgYWRkcmVzcyB0byB0b2tlbiBjb3VudAogICAgbWFwcGluZyhhZGRyZXNzID0%2BIHVpbnQyNTYpIGludGVybmFsIF9iYWxhbmNlT2Y7CgogICAgLy8gTWFwcGluZyBmcm9tIHRva2VuIElEIHRvIGFwcHJvdmVkIGFkZHJlc3MKICAgIG1hcHBpbmcodWludDI1NiA9PiBhZGRyZXNzKSBpbnRlcm5hbCBfYXBwcm92YWxzOwoKICAgIC8vIE1hcHBpbmcgZnJvbSBvd25lciB0byBvcGVyYXRvciBhcHByb3ZhbHMKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkpIHB1YmxpYyBpc0FwcHJvdmVkRm9yQWxsOwoKICAgIGZ1bmN0aW9uIHN1cHBvcnRzSW50ZXJmYWNlKGJ5dGVzNCBpbnRlcmZhY2VJZCkKICAgICAgICBleHRlcm5hbAogICAgICAgIHB1cmUKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJldHVybiBpbnRlcmZhY2VJZCA9PSB0eXBlKElFUkM3MjEpLmludGVyZmFjZUlkCiAgICAgICAgICAgIHx8IGludGVyZmFjZUlkID09IHR5cGUoSUVSQzE2NSkuaW50ZXJmYWNlSWQ7CiAgICB9CgogICAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IGlkKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGFkZHJlc3Mgb3duZXIpIHsKICAgICAgICBvd25lciA9IF9vd25lck9mW2lkXTsKICAgICAgICByZXF1aXJlKG93bmVyICE9IGFkZHJlc3MoMCksICJ0b2tlbiBkb2Vzbid0IGV4aXN0Iik7CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgb3duZXIpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJlcXVpcmUob3duZXIgIT0gYWRkcmVzcygwKSwgIm93bmVyID0gemVybyBhZGRyZXNzIik7CiAgICAgICAgcmV0dXJuIF9iYWxhbmNlT2Zbb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEFwcHJvdmFsRm9yQWxsKGFkZHJlc3Mgb3BlcmF0b3IsIGJvb2wgYXBwcm92ZWQpIGV4dGVybmFsIHsKICAgICAgICBpc0FwcHJvdmVkRm9yQWxsW21zZy5zZW5kZXJdW29wZXJhdG9yXSA9IGFwcHJvdmVkOwogICAgICAgIGVtaXQgQXBwcm92YWxGb3JBbGwobXNnLnNlbmRlciwgb3BlcmF0b3IsIGFwcHJvdmVkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiBpZCkgZXh0ZXJuYWwgewogICAgICAgIGFkZHJlc3Mgb3duZXIgPSBfb3duZXJPZltpZF07CiAgICAgICAgcmVxdWlyZSgKICAgICAgICAgICAgbXNnLnNlbmRlciA9PSBvd25lciB8fCBpc0FwcHJvdmVkRm9yQWxsW293bmVyXVttc2cuc2VuZGVyXSwKICAgICAgICAgICAgIm5vdCBhdXRob3JpemVkIgogICAgICAgICk7CgogICAgICAgIF9hcHByb3ZhbHNbaWRdID0gc3BlbmRlcjsKCiAgICAgICAgZW1pdCBBcHByb3ZhbChvd25lciwgc3BlbmRlciwgaWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEFwcHJvdmVkKHVpbnQyNTYgaWQpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJlcXVpcmUoX293bmVyT2ZbaWRdICE9IGFkZHJlc3MoMCksICJ0b2tlbiBkb2Vzbid0IGV4aXN0Iik7CiAgICAgICAgcmV0dXJuIF9hcHByb3ZhbHNbaWRdOwogICAgfQoKICAgIGZ1bmN0aW9uIF9pc0FwcHJvdmVkT3JPd25lcihhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgaWQpCiAgICAgICAgaW50ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICBzcGVuZGVyID09IG93bmVyIHx8IGlzQXBwcm92ZWRGb3JBbGxbb3duZXJdW3NwZW5kZXJdCiAgICAgICAgICAgICAgICB8fCBzcGVuZGVyID09IF9hcHByb3ZhbHNbaWRdCiAgICAgICAgKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IGlkKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoZnJvbSA9PSBfb3duZXJPZltpZF0sICJmcm9tICE9IG93bmVyIik7CiAgICAgICAgcmVxdWlyZSh0byAhPSBhZGRyZXNzKDApLCAidHJhbnNmZXIgdG8gemVybyBhZGRyZXNzIik7CgogICAgICAgIHJlcXVpcmUoX2lzQXBwcm92ZWRPck93bmVyKGZyb20sIG1zZy5zZW5kZXIsIGlkKSwgIm5vdCBhdXRob3JpemVkIik7CgogICAgICAgIF9iYWxhbmNlT2ZbZnJvbV0tLTsKICAgICAgICBfYmFsYW5jZU9mW3RvXSsrOwogICAgICAgIF9vd25lck9mW2lkXSA9IHRvOwoKICAgICAgICBkZWxldGUgX2FwcHJvdmFsc1tpZF07CgogICAgICAgIGVtaXQgVHJhbnNmZXIoZnJvbSwgdG8sIGlkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlVHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiBpZCkgZXh0ZXJuYWwgewogICAgICAgIHRyYW5zZmVyRnJvbShmcm9tLCB0bywgaWQpOwoKICAgICAgICByZXF1aXJlKAogICAgICAgICAgICB0by5jb2RlLmxlbmd0aCA9PSAwCiAgICAgICAgICAgICAgICB8fCBJRVJDNzIxUmVjZWl2ZXIodG8pLm9uRVJDNzIxUmVjZWl2ZWQobXNnLnNlbmRlciwgZnJvbSwgaWQsICIiKQogICAgICAgICAgICAgICAgICAgID09IElFUkM3MjFSZWNlaXZlci5vbkVSQzcyMVJlY2VpdmVkLnNlbGVjdG9yLAogICAgICAgICAgICAidW5zYWZlIHJlY2lwaWVudCIKICAgICAgICApOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVUcmFuc2ZlckZyb20oCiAgICAgICAgYWRkcmVzcyBmcm9tLAogICAgICAgIGFkZHJlc3MgdG8sCiAgICAgICAgdWludDI1NiBpZCwKICAgICAgICBieXRlcyBjYWxsZGF0YSBkYXRhCiAgICApIGV4dGVybmFsIHsKICAgICAgICB0cmFuc2ZlckZyb20oZnJvbSwgdG8sIGlkKTsKCiAgICAgICAgcmVxdWlyZSgKICAgICAgICAgICAgdG8uY29kZS5sZW5ndGggPT0gMAogICAgICAgICAgICAgICAgfHwgSUVSQzcyMVJlY2VpdmVyKHRvKS5vbkVSQzcyMVJlY2VpdmVkKG1zZy5zZW5kZXIsIGZyb20sIGlkLCBkYXRhKQogICAgICAgICAgICAgICAgICAgID09IElFUkM3MjFSZWNlaXZlci5vbkVSQzcyMVJlY2VpdmVkLnNlbGVjdG9yLAogICAgICAgICAgICAidW5zYWZlIHJlY2lwaWVudCIKICAgICAgICApOwogICAgfQoKICAgIGZ1bmN0aW9uIF9taW50KGFkZHJlc3MgdG8sIHVpbnQyNTYgaWQpIGludGVybmFsIHsKICAgICAgICByZXF1aXJlKHRvICE9IGFkZHJlc3MoMCksICJtaW50IHRvIHplcm8gYWRkcmVzcyIpOwogICAgICAgIHJlcXVpcmUoX293bmVyT2ZbaWRdID09IGFkZHJlc3MoMCksICJhbHJlYWR5IG1pbnRlZCIpOwoKICAgICAgICBfYmFsYW5jZU9mW3RvXSsrOwogICAgICAgIF9vd25lck9mW2lkXSA9IHRvOwoKICAgICAgICBlbWl0IFRyYW5zZmVyKGFkZHJlc3MoMCksIHRvLCBpZCk7CiAgICB9CgogICAgZnVuY3Rpb24gX2J1cm4odWludDI1NiBpZCkgaW50ZXJuYWwgewogICAgICAgIGFkZHJlc3Mgb3duZXIgPSBfb3duZXJPZltpZF07CiAgICAgICAgcmVxdWlyZShvd25lciAhPSBhZGRyZXNzKDApLCAibm90IG1pbnRlZCIpOwoKICAgICAgICBfYmFsYW5jZU9mW293bmVyXSAtPSAxOwoKICAgICAgICBkZWxldGUgX293bmVyT2ZbaWRdOwogICAgICAgIGRlbGV0ZSBfYXBwcm92YWxzW2lkXTsKCiAgICAgICAgZW1pdCBUcmFuc2Zlcihvd25lciwgYWRkcmVzcygwKSwgaWQpOwogICAgfQp9Cgpjb250cmFjdCBNeU5GVCBpcyBFUkM3MjEgewogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIHRvLCB1aW50MjU2IGlkKSBleHRlcm5hbCB7CiAgICAgICAgX21pbnQodG8sIGlkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgaWQpIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gX293bmVyT2ZbaWRdLCAibm90IG93bmVyIik7CiAgICAgICAgX2J1cm4oaWQpOwogICAgfQp9Cg%3D%3D" target="_blank" title="https://remix.byteatatime.dev/?#code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVApwcmFnbWEgc29saWRpdHkgXjAuOC4yNjsKCmludGVyZmFjZSBJRVJDMTY1IHsKICAgIGZ1bmN0aW9uIHN1cHBvcnRzSW50ZXJmYWNlKGJ5dGVzNCBpbnRlcmZhY2VJRCkKICAgICAgICBleHRlcm5hbAogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zIChib29sKTsKfQoKaW50ZXJmYWNlIElFUkM3MjEgaXMgSUVSQzE2NSB7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2YoYWRkcmVzcyBvd25lcikgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2IGJhbGFuY2UpOwogICAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IHRva2VuSWQpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYWRkcmVzcyBvd25lcik7CiAgICBmdW5jdGlvbiBzYWZlVHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiB0b2tlbklkKQogICAgICAgIGV4dGVybmFsOwogICAgZnVuY3Rpb24gc2FmZVRyYW5zZmVyRnJvbSgKICAgICAgICBhZGRyZXNzIGZyb20sCiAgICAgICAgYWRkcmVzcyB0bywKICAgICAgICB1aW50MjU2IHRva2VuSWQsCiAgICAgICAgYnl0ZXMgY2FsbGRhdGEgZGF0YQogICAgKSBleHRlcm5hbDsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgdG9rZW5JZCkgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3MgdG8sIHVpbnQyNTYgdG9rZW5JZCkgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBnZXRBcHByb3ZlZCh1aW50MjU2IHRva2VuSWQpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAoYWRkcmVzcyBvcGVyYXRvcik7CiAgICBmdW5jdGlvbiBzZXRBcHByb3ZhbEZvckFsbChhZGRyZXNzIG9wZXJhdG9yLCBib29sIF9hcHByb3ZlZCkgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBpc0FwcHJvdmVkRm9yQWxsKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgb3BlcmF0b3IpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAoYm9vbCk7Cn0KCmludGVyZmFjZSBJRVJDNzIxUmVjZWl2ZXIgewogICAgZnVuY3Rpb24gb25FUkM3MjFSZWNlaXZlZCgKICAgICAgICBhZGRyZXNzIG9wZXJhdG9yLAogICAgICAgIGFkZHJlc3MgZnJvbSwKICAgICAgICB1aW50MjU2IHRva2VuSWQsCiAgICAgICAgYnl0ZXMgY2FsbGRhdGEgZGF0YQogICAgKSBleHRlcm5hbCByZXR1cm5zIChieXRlczQpOwp9Cgpjb250cmFjdCBFUkM3MjEgaXMgSUVSQzcyMSB7CiAgICBldmVudCBUcmFuc2ZlcigKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgZnJvbSwgYWRkcmVzcyBpbmRleGVkIHRvLCB1aW50MjU2IGluZGV4ZWQgaWQKICAgICk7CiAgICBldmVudCBBcHByb3ZhbCgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBzcGVuZGVyLCB1aW50MjU2IGluZGV4ZWQgaWQKICAgICk7CiAgICBldmVudCBBcHByb3ZhbEZvckFsbCgKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgb3duZXIsIGFkZHJlc3MgaW5kZXhlZCBvcGVyYXRvciwgYm9vbCBhcHByb3ZlZAogICAgKTsKCiAgICAvLyBNYXBwaW5nIGZyb20gdG9rZW4gSUQgdG8gb3duZXIgYWRkcmVzcwogICAgbWFwcGluZyh1aW50MjU2ID0+IGFkZHJlc3MpIGludGVybmFsIF9vd25lck9mOwoKICAgIC8vIE1hcHBpbmcgb3duZXIgYWRkcmVzcyB0byB0b2tlbiBjb3VudAogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIGludGVybmFsIF9iYWxhbmNlT2Y7CgogICAgLy8gTWFwcGluZyBmcm9tIHRva2VuIElEIHRvIGFwcHJvdmVkIGFkZHJlc3MKICAgIG1hcHBpbmcodWludDI1NiA9PiBhZGRyZXNzKSBpbnRlcm5hbCBfYXBwcm92YWxzOwoKICAgIC8vIE1hcHBpbmcgZnJvbSBvd25lciB0byBvcGVyYXRvciBhcHByb3ZhbHMKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nKGFkZHJlc3MgPT4gYm9vbCkpIHB1YmxpYyBpc0FwcHJvdmVkRm9yQWxsOwoKICAgIGZ1bmN0aW9uIHN1cHBvcnRzSW50ZXJmYWNlKGJ5dGVzNCBpbnRlcmZhY2VJZCkKICAgICAgICBleHRlcm5hbAogICAgICAgIHB1cmUKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJldHVybiBpbnRlcmZhY2VJZCA9PSB0eXBlKElFUkM3MjEpLmludGVyZmFjZUlkCiAgICAgICAgICAgIHx8IGludGVyZmFjZUlkID09IHR5cGUoSUVSQzE2NSkuaW50ZXJmYWNlSWQ7CiAgICB9CgogICAgZnVuY3Rpb24gb3duZXJPZih1aW50MjU2IGlkKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKGFkZHJlc3Mgb3duZXIpIHsKICAgICAgICBvd25lciA9IF9vd25lck9mW2lkXTsKICAgICAgICByZXF1aXJlKG93bmVyICE9IGFkZHJlc3MoMCksICJ0b2tlbiBkb2Vzbid0IGV4aXN0Iik7CiAgICB9CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgb3duZXIpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJlcXVpcmUob3duZXIgIT0gYWRkcmVzcygwKSwgIm93bmVyID0gemVybyBhZGRyZXNzIik7CiAgICAgICAgcmV0dXJuIF9iYWxhbmNlT2Zbb3duZXJdOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEFwcHJvdmFsRm9yQWxsKGFkZHJlc3Mgb3BlcmF0b3IsIGJvb2wgYXBwcm92ZWQpIGV4dGVybmFsIHsKICAgICAgICBpc0FwcHJvdmVkRm9yQWxsW21zZy5zZW5kZXJdW29wZXJhdG9yXSA9IGFwcHJvdmVkOwogICAgICAgIGVtaXQgQXBwcm92YWxGb3JBbGwobXNnLnNlbmRlciwgb3BlcmF0b3IsIGFwcHJvdmVkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHByb3ZlKGFkZHJlc3Mgc3BlbmRlciwgdWludDI1NiBpZCkgZXh0ZXJuYWwgewogICAgICAgIGFkZHJlc3Mgb3duZXIgPSBfb3duZXJPZltpZF07CiAgICAgICAgcmVxdWlyZSgKICAgICAgICAgICAgbXNnLnNlbmRlciA9PSBvd25lciB8fCBpc0FwcHJvdmVkRm9yQWxsW293bmVyXVttc2cuc2VuZGVyXSwKICAgICAgICAgICAgIm5vdCBhdXRob3JpemVkIgogICAgICAgICk7CgogICAgICAgIF9hcHByb3ZhbHNbaWRdID0gc3BlbmRlcjsKCiAgICAgICAgZW1pdCBBcHByb3ZhbChvd25lciwgc3BlbmRlciwgaWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldEFwcHJvdmVkKHVpbnQyNTYgaWQpIGV4dGVybmFsIHZpZXcgcmV0dXJucyAoYWRkcmVzcykgewogICAgICAgIHJlcXVpcmUoX293bmVyT2ZbaWRdICE9IGFkZHJlc3MoMCksICJ0b2tlbiBkb2Vzbid0IGV4aXN0Iik7CiAgICAgICAgcmV0dXJuIF9hcHByb3ZhbHNbaWRdOwogICAgfQoKICAgIGZ1bmN0aW9uIF9pc0FwcHJvdmVkT3JPd25lcihhZGRyZXNzIG93bmVyLCBhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgaWQpCiAgICAgICAgaW50ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAoYm9vbCkKICAgIHsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgICBzcGVuZGVyID09IG93bmVyIHx8IGlzQXBwcm92ZWRGb3JBbGxbb3duZXJdW3NwZW5kZXJdCiAgICAgICAgICAgICAgICB8fCBzcGVuZGVyID09IF9hcHByb3ZhbHNbaWRdCiAgICAgICAgKTsKICAgIH0KCiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBmcm9tLCBhZGRyZXNzIHRvLCB1aW50MjU2IGlkKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoZnJvbSA9PSBfb3duZXJPZltpZF0sICJmcm9tICE9IG93bmVyIik7CiAgICAgICAgcmVxdWlyZSh0byAhPSBhZGRyZXNzKDApLCAidHJhbnNmZXIgdG8gemVybyBhZGRyZXNzIik7CgogICAgICAgIHJlcXVpcmUoX2lzQXBwcm92ZWRPck93bmVyKGZyb20sIG1zZy5zZW5kZXIsIGlkKSwgIm5vdCBhdXRob3JpemVkIik7CgogICAgICAgIF9iYWxhbmNlT2ZbZnJvbV0tLTsKICAgICAgICBfYmFsYW5jZU9mW3RvXSsrOwogICAgICAgIF9vd25lck9mW2lkXSA9IHRvOwoKICAgICAgICBkZWxldGUgX2FwcHJvdmFsc1tpZF07CgogICAgICAgIGVtaXQgVHJhbnNmZXIoZnJvbSwgdG8sIGlkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzYWZlVHJhbnNmZXJGcm9tKGFkZHJlc3MgZnJvbSwgYWRkcmVzcyB0bywgdWludDI1NiBpZCkgZXh0ZXJuYWwgewogICAgICAgIHRyYW5zZmVyRnJvbShmcm9tLCB0bywgaWQpOwoKICAgICAgICByZXF1aXJlKAogICAgICAgICAgICB0by5jb2RlLmxlbmd0aCA9PSAwCiAgICAgICAgICAgICAgICB8fCBJRVJDNzIxUmVjZWl2ZXIodG8pLm9uRVJDNzIxUmVjZWl2ZWQobXNnLnNlbmRlciwgZnJvbSwgaWQsICIiKQogICAgICAgICAgICAgICAgICAgID09IElFUkM3MjFSZWNlaXZlci5vbkVSQzcyMVJlY2VpdmVkLnNlbGVjdG9yLAogICAgICAgICAgICAidW5zYWZlIHJlY2lwaWVudCIKICAgICAgICApOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVUcmFuc2ZlckZyb20oCiAgICAgICAgYWRkcmVzcyBmcm9tLAogICAgICAgIGFkZHJlc3MgdG8sCiAgICAgICAgdWludDI1NiBpZCwKICAgICAgICBieXRlcyBjYWxsZGF0YSBkYXRhCiAgICApIGV4dGVybmFsIHsKICAgICAgICB0cmFuc2ZlckZyb20oZnJvbSwgdG8sIGlkKTsKCiAgICAgICAgcmVxdWlyZSgKICAgICAgICAgICAgdG8uY29kZS5sZW5ndGggPT0gMAogICAgICAgICAgICAgICAgfHwgSUVSQzcyMVJlY2VpdmVyKHRvKS5vbkVSQzcyMVJlY2VpdmVkKG1zZy5zZW5kZXIsIGZyb20sIGlkLCBkYXRhKQogICAgICAgICAgICAgICAgICAgID09IElFUkM3MjFSZWNlaXZlci5vbkVSQzcyMVJlY2VpdmVkLnNlbGVjdG9yLAogICAgICAgICAgICAidW5zYWZlIHJlY2lwaWVudCIKICAgICAgICApOwogICAgfQoKICAgIGZ1bmN0aW9uIF9taW50KGFkZHJlc3MgdG8sIHVpbnQyNTYgaWQpIGludGVybmFsIHsKICAgICAgICByZXF1aXJlKHRvICE9IGFkZHJlc3MoMCksICJtaW50IHRvIHplcm8gYWRkcmVzcyIpOwogICAgICAgIHJlcXVpcmUoX293bmVyT2ZbaWRdID09IGFkZHJlc3MoMCksICJhbHJlYWR5IG1pbnRlZCIpOwoKICAgICAgICBfYmFsYW5jZU9mW3RvXSsrOwogICAgICAgIF9vd25lck9mW2lkXSA9IHRvOwoKICAgICAgICBlbWl0IFRyYW5zZmVyKGFkZHJlc3MoMCksIHRvLCBpZCk7CiAgICB9CgogICAgZnVuY3Rpb24gX2J1cm4odWludDI1NiBpZCkgaW50ZXJuYWwgewogICAgICAgIGFkZHJlc3Mgb3duZXIgPSBfb3duZXJPZltpZF07CiAgICAgICAgcmVxdWlyZShvd25lciAhPSBhZGRyZXNzKDApLCAibm90IG1pbnRlZCIpOwoKICAgICAgICBfYmFsYW5jZU9mW293bmVyXSAtPSAxOwoKICAgICAgICBkZWxldGUgX293bmVyT2ZbaWRdOwogICAgICAgIGRlbGV0ZSBfYXBwcm92YWxzW2lkXTsKCiAgICAgICAgZW1pdCBUcmFuc2Zlcihvd25lciwgYWRkcmVzcygwKSwgaWQpOwogICAgfQp9Cgpjb250cmFjdCBNeU5GVCBpcyBFUkM3MjEgewogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIHRvLCB1aW50MjU2IGlkKSBleHRlcm5hbCB7CiAgICAgICAgX21pbnQodG8sIGlkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgaWQpIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKG1zZy5zZW5kZXIgPT0gX293bmVyT2ZbaWRdLCAibm90IG93bmVyIik7CiAgICAgICAgX2J1cm4oaWQpOwogICAgfQp9Cg==" ref="nofollow noopener noreferrer">ERC721.solERC721.sol</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å“åº”å¼è®¾è®¡å®è·µï¼šå¸ƒå±€ä¸å­—ä½“è‡ªé€‚åº”æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7589830701615136768</link>    <guid>https://juejin.cn/post/7589830701615136768</guid>    <pubDate>2025-12-31T12:58:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589830701615136768" data-draft-id="7589849698488762402" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å“åº”å¼è®¾è®¡å®è·µï¼šå¸ƒå±€ä¸å­—ä½“è‡ªé€‚åº”æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,å“åº”å¼è®¾è®¡"/> <meta itemprop="datePublished" content="2025-12-31T12:58:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å”å”åœ¨å­¦ä¹ "/> <meta itemprop="url" content="https://juejin.cn/user/4009253326568761"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å“åº”å¼è®¾è®¡å®è·µï¼šå¸ƒå±€ä¸å­—ä½“è‡ªé€‚åº”æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4009253326568761/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å”å”åœ¨å­¦ä¹ 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-31T12:58:33.000Z" title="Wed Dec 31 2025 12:58:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><em>æœ€è¿‘åœ¨å¼€å‘åŸºäº <code>pywebview</code> æ¡†æ¶çš„ <code>todo-list</code> åº”ç”¨çš„ç§»åŠ¨ç«¯é€‚é…ï¼Œå‘ç°å¯ä»¥è¿›è¡Œå“åº”å¼è®¾è®¡ï¼Œæœ‰æ„Ÿè€Œå‘å†™ä¸‹æ­¤æ–‡ã€‚å½“ç„¶ï¼Œæ˜¯ä»ä¸€ä¸ªåç«¯å¼€å‘çš„è§’åº¦æ¥çœ‹å¾…å“åº”å¼è®¾è®¡å“ˆï¼Œå¦‚æœè¡¨è¿°ä¸å¤ªå¯¹ï¼Œè¿˜è¯·æµ·æ¶µã€‚</em></p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>å“åº”å¼è®¾è®¡çš„æ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€åœ¨äºä»£ç å¤ç”¨â€”â€”åŒä¸€å¥—ä»£ç å¯ä»¥é€‚é…æ¡Œé¢ç«¯ã€ç§»åŠ¨ç«¯ä¹ƒè‡³Webç«¯ï¼Œå¤§å¹…æå‡å¼€å‘æ•ˆç‡ã€‚</p>
<blockquote>
<p>ä½†éœ€æ³¨æ„ï¼šå¦‚æœé¡µé¢é€»è¾‘ä¸è§†è§‰äº¤äº’è¾ƒä¸ºå¤æ‚ï¼Œåˆ™ä¸å»ºè®®å¼ºè¡Œé‡‡ç”¨å®Œå…¨è‡ªé€‚åº”çš„æ–¹æ¡ˆã€‚å› ä¸ºå¤æ‚è®¾è®¡ä¸‹çš„é€‚é…æˆæœ¬ï¼Œæœ‰æ—¶ç”šè‡³ä¼šè¶…è¿‡å•ç‹¬å¼€å‘å¤šå¥—ä»£ç çš„ä»£ä»·ã€‚è¯´äººè¯ï¼šå¦‚æœä¸€å¥—ä»£ç é€‚é…å“åº”å¼å¸ƒå±€ï¼Œè¦3å€å·¥ä½œé‡ï¼Œè€Œåˆ†åˆ«å¼€å‘ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯ä»£ç åªæ˜¯2å€å·¥ä½œé‡ï¼Œé‚£ä¹ˆæ­£å¸¸éƒ½ä¸ä¼šæƒ³å“åº”å¼å¸ƒå±€äº†ã€‚</p>
</blockquote>
<p>ç†è§£å“åº”å¼è®¾è®¡ï¼Œä¸»è¦å¯ä»¥ä»ä¸¤ä¸ªå±‚é¢å…¥æ‰‹ï¼š</p>
<ul>
<li><strong>å¸ƒå±€è‡ªé€‚åº”</strong></li>
<li><strong>å­—ä½“ä¸é—´è·è‡ªé€‚åº”</strong></li>
</ul>
<p>ä¸ªäººç†è§£å“ˆï¼šç§»åŠ¨ç«¯ä¸æ¡Œé¢ç«¯çš„æ ¸å¿ƒå·®å¼‚å¾€å¾€åœ¨äºå±å¹•å°ºå¯¸ï¼Œå› æ­¤åœ¨è§†è§‰å‘ˆç°ä¸Šï¼Œåªéœ€é‡ç‚¹å…³æ³¨ä¸Šè¿°ä¸¤æ–¹é¢å³å¯ã€‚è€Œåƒä¸»é¢˜è‰²å½©ã€å­—ä½“ç±»å‹ç­‰æ ·å¼ï¼Œé€šå¸¸å¯ä»¥ä¿æŒç»Ÿä¸€ï¼Œæ— éœ€é¢‘ç¹è°ƒæ•´ã€‚</p>
<p>ä¸‹é¢å°†é€šè¿‡å…·ä½“ç¤ºä¾‹ï¼Œæ¼”ç¤ºå¦‚ä½•å®ç°ä¸€å¥—ç®€æ´é«˜æ•ˆçš„å“åº”å¼æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€å¸ƒå±€è‡ªé€‚åº”</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41bc104960614d04b24710883ad02889~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZSQ5Y-U5Zyo5a2m5Lmg:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767790744&amp;x-signature=95tzRrmm9S4RBny%2B40tTaybW8o8%3D" alt="é¡µé¢è‡ªé€‚åº”.gif" loading="lazy"/></p>
<p>ä¸€ä¸ªå…¸å‹çš„å“åº”å¼å¸ƒå±€åœºæ™¯æ˜¯å¯¼èˆªæ çš„å½¢æ€åˆ‡æ¢ï¼š</p>
<ul>
<li>åœ¨å®½å±ï¼ˆå¦‚æ¡Œé¢ç«¯ï¼‰ä¸­ï¼Œå·¦ä¾§å¸¸é©»å¯¼èˆªæ ï¼Œé‡‡ç”¨å·¦å³å¸ƒå±€ï¼›</li>
<li>åœ¨çª„å±ï¼ˆå¦‚ç§»åŠ¨ç«¯ï¼‰ä¸­ï¼Œå¯¼èˆªæ å˜ä¸ºæŠ½å±‰å¼ï¼Œé»˜è®¤éšè—ï¼Œç‚¹å‡»æŒ‰é’®æ—¶æ»‘å‡ºã€‚</li>
</ul>
<h3 data-id="heading-2">1. HTML ç»“æ„ç¤ºä¾‹</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>å“åº”å¼å¸ƒå±€ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- é®ç½©å±‚ï¼Œç”¨äºç‚¹å‡»å…³é—­æŠ½å±‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"overlay"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"overlay"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ä¾§è¾¹å¯¼èˆªæ  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sidebar"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sidebar"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å¯¼èˆªèœå•<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ä¸»è¦å†…å®¹åŒº --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"main-content"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"top-bar"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"menu-toggle"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"menuToggle"</span>&gt;</span>â˜° èœå•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>å“åº”å¼å¸ƒå±€ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span>&gt;</span>å†…å®¹åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-3">2. CSS æ ·å¼ç¤ºä¾‹</h3>
<p>é€šè¿‡åª’ä½“æŸ¥è¯¢å®ç°å¸ƒå±€åˆ‡æ¢ï¼Œå¹¶æ·»åŠ è¿‡æ¸¡æ•ˆæœæå‡ä½“éªŒã€‚</p>
<pre><code class="hljs language-css" lang="css">* {
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">box-sizing</span>: border-box;
    <span class="hljs-attribute">font-family</span>: sans-serif;
}

<span class="hljs-selector-tag">body</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
}

<span class="hljs-comment">/* ä¾§è¾¹å¯¼èˆª */</span>
<span class="hljs-selector-class">.sidebar</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">250px</span>;
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#2c3e50</span>;
    <span class="hljs-attribute">color</span>: white;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.3s</span> ease;
}

<span class="hljs-comment">/* ä¸»å†…å®¹åŒº */</span>
<span class="hljs-selector-class">.main-content</span> {
    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">flex-direction</span>: column;
}

<span class="hljs-comment">/* é¡¶éƒ¨æ  */</span>
<span class="hljs-selector-class">.top-bar</span> {
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span> <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">background</span>: white;
    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.1</span>);
}

<span class="hljs-selector-class">.menu-toggle</span> {
    <span class="hljs-attribute">display</span>: none;
    <span class="hljs-attribute">background</span>: none;
    <span class="hljs-attribute">border</span>: none;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1.2rem</span>;
    <span class="hljs-attribute">cursor</span>: pointer;
    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">15px</span>;
}

<span class="hljs-comment">/* é®ç½©å±‚ */</span>
<span class="hljs-selector-class">.overlay</span> {
    <span class="hljs-attribute">display</span>: none;
    <span class="hljs-attribute">position</span>: fixed;
    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.5</span>);
    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">99</span>;
}

<span class="hljs-comment">/* å“åº”å¼è§„åˆ™ï¼šå°äºç­‰äº 1024px æ—¶åˆ‡æ¢ä¸ºç§»åŠ¨ç«¯æ ·å¼ */</span>
<span class="hljs-keyword">@media</span> screen <span class="hljs-keyword">and</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">1024px</span>) {
    <span class="hljs-selector-class">.sidebar</span> {
        <span class="hljs-attribute">position</span>: fixed;
        <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
        <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(-<span class="hljs-number">100%</span>);
        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">100</span>;
    }

    <span class="hljs-selector-class">.sidebar</span><span class="hljs-selector-class">.active</span> {
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">0</span>);
    }

    <span class="hljs-selector-class">.menu-toggle</span> {
        <span class="hljs-attribute">display</span>: block;
    }

    <span class="hljs-selector-class">.overlay</span><span class="hljs-selector-class">.active</span> {
        <span class="hljs-attribute">display</span>: block;
    }
}
</code></pre>
<h3 data-id="heading-4">3. JavaScript äº¤äº’é€»è¾‘</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> sidebar = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'sidebar'</span>);
<span class="hljs-keyword">const</span> menuToggle = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'menuToggle'</span>);
<span class="hljs-keyword">const</span> overlay = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'overlay'</span>);

<span class="hljs-comment">// åˆ‡æ¢ä¾§è¾¹æ æ˜¾ç¤ºçŠ¶æ€</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">toggleSidebar</span>(<span class="hljs-params"/>) {
    sidebar.<span class="hljs-property">classList</span>.<span class="hljs-title function_">toggle</span>(<span class="hljs-string">'active'</span>);
    overlay.<span class="hljs-property">classList</span>.<span class="hljs-title function_">toggle</span>(<span class="hljs-string">'active'</span>);
}

<span class="hljs-comment">// å…³é—­ä¾§è¾¹æ ï¼ˆé€‚ç”¨äºç§»åŠ¨ç«¯ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">closeSidebar</span>(<span class="hljs-params"/>) {
    sidebar.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'active'</span>);
    overlay.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'active'</span>);
}

<span class="hljs-comment">// ç›‘å¬äº‹ä»¶</span>
menuToggle.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, toggleSidebar);
overlay.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, closeSidebar);

<span class="hljs-comment">// çª—å£å°ºå¯¸å˜åŒ–æ—¶é‡ç½®å¸ƒå±€</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> &gt; <span class="hljs-number">1024</span>) {
        <span class="hljs-title function_">closeSidebar</span>();
    }
});
</code></pre>
<hr/>
<h2 data-id="heading-5">äºŒã€å­—ä½“ä¸é—´è·è‡ªé€‚åº”</h2>
<p>å€ŸåŠ© CSS è‡ªå®šä¹‰å±æ€§ï¼ˆå˜é‡ï¼‰å¯ä»¥è½»æ¾å®ç°æ ·å¼å€¼çš„å“åº”å¼è°ƒæ•´ï¼Œä»¥ä¸‹æ˜¯ä¸€ç§æ¨èåšæ³•(æœ€è¿‘ç”¨ <code>AI</code> å†™å‰ç«¯å‘ç°çš„ğŸ˜ï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-pseudo">:root</span> {
    <span class="hljs-comment">/* é—´è·å°ºåº¦ */</span>
    <span class="hljs-attr">--spacing-xs</span>: <span class="hljs-number">4px</span>;
    <span class="hljs-attr">--spacing-sm</span>: <span class="hljs-number">8px</span>;
    <span class="hljs-attr">--spacing-md</span>: <span class="hljs-number">16px</span>;
    <span class="hljs-attr">--spacing-lg</span>: <span class="hljs-number">24px</span>;
    <span class="hljs-attr">--spacing-xl</span>: <span class="hljs-number">32px</span>;
    <span class="hljs-attr">--spacing-xxl</span>: <span class="hljs-number">48px</span>;

    <span class="hljs-comment">/* å­—ä½“å°ºå¯¸ */</span>
    <span class="hljs-attr">--font-family</span>: -apple-system, BlinkMacSystemFont, <span class="hljs-string">'Segoe UI'</span>, Roboto, <span class="hljs-string">'Helvetica Neue'</span>, Arial, sans-serif;
    <span class="hljs-attr">--font-size-xs</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attr">--font-size-sm</span>: <span class="hljs-number">14px</span>;
    <span class="hljs-attr">--font-size-base</span>: <span class="hljs-number">16px</span>;
    <span class="hljs-attr">--font-size-lg</span>: <span class="hljs-number">18px</span>;
    <span class="hljs-attr">--font-size-xl</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attr">--font-size-xxl</span>: <span class="hljs-number">24px</span>;
}

<span class="hljs-selector-class">.tasks-container</span> {
    <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">var</span>(--spacing-xxl);
}

<span class="hljs-comment">/* åœ¨å¹³æ¿åŠä»¥ä¸‹è®¾å¤‡ä¸­å‡å°å†…è¾¹è· */</span>
<span class="hljs-keyword">@media</span> (<span class="hljs-attribute">max-width</span>: <span class="hljs-number">1024px</span>) {
    <span class="hljs-selector-class">.tasks-container</span> {
        <span class="hljs-attribute">padding</span>: <span class="hljs-built_in">var</span>(--spacing-lg);
    }
}
</code></pre>
<hr/>
<p>å¥½å•¦ï¼Œä»¥ä¸Šå°±æ˜¯ä»Šå¤©ä»‹ç»çš„å†…å®¹ï¼Œæ„Ÿè°¢é˜…è¯»ï¼æ¬¢è¿ä¸‰è¿å“¦ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript ä¸­çš„ thisï¼šä½œç”¨åŸŸé™·é˜±ä¸ç»‘å®šç­–ç•¥]]></title>    <link>https://juejin.cn/post/7589839019716853810</link>    <guid>https://juejin.cn/post/7589839019716853810</guid>    <pubDate>2025-12-31T13:46:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589839019716853810" data-draft-id="7589325011543687206" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript ä¸­çš„ thisï¼šä½œç”¨åŸŸé™·é˜±ä¸ç»‘å®šç­–ç•¥"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2025-12-31T13:46:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Zyx2007"/> <meta itemprop="url" content="https://juejin.cn/user/3924597867554890"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript ä¸­çš„ thisï¼šä½œç”¨åŸŸé™·é˜±ä¸ç»‘å®šç­–ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3924597867554890/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Zyx2007
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-31T13:46:09.000Z" title="Wed Dec 31 2025 13:46:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ JavaScript ç¼–ç¨‹ä¸­ï¼Œ<code>this</code> æ˜¯ä¸€ä¸ªæ—¢å¼ºå¤§åˆå®¹æ˜“ä»¤äººå›°æƒ‘çš„å…³é”®å­—ã€‚å®ƒçš„å€¼å¹¶éç”±å‡½æ•°å®šä¹‰çš„ä½ç½®å†³å®šï¼Œè€Œæ˜¯<strong>ç”±å‡½æ•°è°ƒç”¨çš„æ–¹å¼åŠ¨æ€ç¡®å®š</strong>ã€‚è¿™ç§çµæ´»æ€§å¸¦æ¥äº†ä¾¿åˆ©ï¼Œä¹ŸåŸ‹ä¸‹äº†é™·é˜±â€”â€”å°¤å…¶æ˜¯åœ¨å›è°ƒã€å®šæ—¶å™¨æˆ–äº‹ä»¶å¤„ç†ç­‰å¼‚æ­¥åœºæ™¯ä¸­ï¼Œ<code>this</code> çš„æŒ‡å‘å¸¸å¸¸â€œæ„å¤–â€åœ°å˜æˆå…¨å±€å¯¹è±¡ï¼ˆå¦‚ <code>window</code>ï¼‰ï¼Œå¯¼è‡´æ–¹æ³•è°ƒç”¨å¤±è´¥æˆ–æ•°æ®è®¿é—®é”™è¯¯ã€‚ç†è§£å…¶è¡Œä¸ºè§„å¾‹ï¼Œå¹¶æŒæ¡æ­£ç¡®çš„ç»‘å®šæŠ€å·§ï¼Œæ˜¯å†™å‡ºå¥å£®ä»£ç çš„å…³é”®ã€‚</p>
<h2 data-id="heading-0">é»˜è®¤ç»‘å®šï¼šè°è°ƒç”¨ï¼Œthis å°±æ˜¯è°</h2>
<p>å½“ä¸€ä¸ªå‡½æ•°ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œ<code>this</code> è‡ªåŠ¨æŒ‡å‘è¯¥å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">a</span> = {
  name: <span class="hljs-string">"Cherry"</span>,
  func1: <span class="hljs-built_in">function</span>() {
    console<span class="hljs-selector-class">.log</span>(this<span class="hljs-selector-class">.name</span>); // "Cherry"
  }
};
<span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.func1</span>(); // è°ƒç”¨è€…æ˜¯ <span class="hljs-selector-tag">a</span>ï¼Œthis æŒ‡å‘ <span class="hljs-selector-tag">a</span>
</code></pre>
<p>è¿™é‡Œï¼Œ<code>func1</code> é€šè¿‡ <code>a.func1()</code> è¢«è°ƒç”¨ï¼Œå› æ­¤ <code>this</code> ç»‘å®šåˆ° <code>a</code>ï¼Œèƒ½æ­£ç¡®è®¿é—®å…¶å±æ€§ã€‚è¿™æ˜¯æœ€ç›´è§‚çš„ <code>this</code> è¡Œä¸ºã€‚</p>
<h2 data-id="heading-1">å¼‚æ­¥å›è°ƒä¸­çš„ this ä¸¢å¤±</h2>
<p>é—®é¢˜å¸¸å‡ºç°åœ¨å°†æ–¹æ³•ä¼ å…¥å¼‚æ­¥ç¯å¢ƒæ—¶ã€‚ä¾‹å¦‚ï¼Œåœ¨ <code>setTimeout</code> ä¸­ç›´æ¥ä½¿ç”¨å›è°ƒå‡½æ•°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">func2</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">func1</span>(); <span class="hljs-comment">// æŠ¥é”™ï¼</span>
  }, <span class="hljs-number">1000</span>);
}
</code></pre>
<p>å°½ç®¡ <code>func2</code> æ˜¯ <code>a</code> çš„æ–¹æ³•ï¼Œä½†ä¼ ç»™ <code>setTimeout</code> çš„åŒ¿åå‡½æ•°æ˜¯ä»¥<strong>æ™®é€šå‡½æ•°å½¢å¼</strong>æ‰§è¡Œçš„ã€‚åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå…¶ <code>this</code> æŒ‡å‘å…¨å±€å¯¹è±¡ <code>window</code>ï¼Œè€Œ <code>window</code> å¹¶æ—  <code>func1</code> æ–¹æ³•ï¼Œç¨‹åºå› æ­¤å´©æºƒã€‚</p>
<h2 data-id="heading-2">ä¸‰ç§ä¸»æµè§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-3">1. æ˜¾å¼ç»‘å®šï¼šä½¿ç”¨ <code>call</code> / <code>apply</code> / <code>bind</code></h3>
<p>é€šè¿‡ <code>call</code> æˆ– <code>apply</code>ï¼Œå¯åœ¨è°ƒç”¨æ—¶ç«‹å³æŒ‡å®š <code>this</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">func1</span>();
}.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>), <span class="hljs-number">1000</span>);
</code></pre>
<p>è¿™é‡Œï¼Œ<code>.call(this)</code> åœ¨å®šä¹‰å›è°ƒçš„åŒæ—¶ç«‹å³æ‰§è¡Œå¹¶ç»‘å®š <code>this</code>ï¼Œä½† <code>setTimeout</code> å®é™…æ¥æ”¶çš„æ˜¯å‡½æ•°çš„è¿”å›å€¼ï¼ˆ<code>undefined</code>ï¼‰ï¼Œè€Œéå‡½æ•°æœ¬èº«â€”â€”<strong>æ­¤å†™æ³•é€»è¾‘é”™è¯¯ï¼Œæ— æ³•å®ç°å»¶è¿Ÿæ‰§è¡Œ</strong>ã€‚æ­£ç¡®åšæ³•åº”ä½¿ç”¨ <code>bind</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">func1</span>();
}.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>), <span class="hljs-number">1000</span>);
</code></pre>
<p><code>bind</code> è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼Œå…¶ <code>this</code> æ°¸ä¹…ç»‘å®šåˆ°ä¼ å…¥çš„å¯¹è±¡ï¼Œåç»­æ— è®ºä½•å¤„è°ƒç”¨ï¼Œ<code>this</code> éƒ½ä¸ä¼šæ”¹å˜ã€‚</p>
<h3 data-id="heading-4">2. é—­åŒ…ä¿å­˜ï¼š<code>that = this</code></h3>
<p>åœ¨è¿›å…¥å¼‚æ­¥ä¸Šä¸‹æ–‡å‰ï¼Œå°† <code>this</code> èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼ˆå¸¸å‘½åä¸º <code>that</code> æˆ– <code>self</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">func2</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">var</span> that = <span class="hljs-variable language_">this</span>;
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    that.<span class="hljs-title function_">func1</span>(); <span class="hljs-comment">// æ­£ç¡®è°ƒç”¨</span>
  }, <span class="hljs-number">1000</span>);
}
</code></pre>
<p>ç”±äº JavaScript çš„è¯æ³•ä½œç”¨åŸŸï¼Œå†…éƒ¨å‡½æ•°èƒ½é€šè¿‡ä½œç”¨åŸŸé“¾è®¿é—®å¤–å±‚çš„ <code>that</code>ï¼Œä»è€Œé—´æ¥ä¿ç•™å¯¹åŸå¯¹è±¡çš„å¼•ç”¨ã€‚è¿™æ˜¯ä¸€ç§ç»å…¸ä¸”å…¼å®¹æ€§æå¥½çš„æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-5">3. ç®­å¤´å‡½æ•°ï¼šç»§æ‰¿çˆ¶çº§ this</h3>
<p>ES6 å¼•å…¥çš„ç®­å¤´å‡½æ•°<strong>æ²¡æœ‰è‡ªå·±çš„ <code>this</code></strong>ï¼Œå®ƒä¼šè‡ªåŠ¨æ•è·å®šä¹‰æ—¶æ‰€åœ¨ä¸Šä¸‹æ–‡çš„ <code>this</code> å€¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">func2</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">func1</span>(); <span class="hljs-comment">// this ä»æŒ‡å‘ a</span>
  }, <span class="hljs-number">1000</span>);
}
</code></pre>
<p>ç®­å¤´å‡½æ•°å¦‚åŒâ€œæ‡’äººâ€ï¼Œä¸åˆ›å»ºç‹¬ç«‹çš„ <code>this</code> ç»‘å®šï¼Œè€Œæ˜¯æ²¿ç”¨å¤–å±‚ä½œç”¨åŸŸçš„ <code>this</code>ã€‚åœ¨å¯¹è±¡æ–¹æ³•ä¸­ä½¿ç”¨ç®­å¤´å‡½æ•°ä½œä¸ºå›è°ƒï¼Œèƒ½å¤©ç„¶é¿å… <code>this</code> ä¸¢å¤±é—®é¢˜ï¼Œä»£ç ä¹Ÿæ›´ç®€æ´ã€‚</p>
<h2 data-id="heading-6">æ³¨æ„äº‹é¡¹ä¸é€‚ç”¨åœºæ™¯</h2>
<ul>
<li><strong><code>bind</code> é€‚åˆéœ€è¦å¤šæ¬¡è°ƒç”¨æˆ–ä¼ é€’å‡½æ•°å¼•ç”¨çš„åœºæ™¯</strong>ï¼Œå¦‚äº‹ä»¶ç›‘å¬å™¨ï¼›</li>
<li><strong><code>that = this</code> å…¼å®¹æ—§ç¯å¢ƒ</strong>ï¼Œé€»è¾‘æ¸…æ™°ï¼Œé€‚åˆå¤æ‚åµŒå¥—ï¼›</li>
<li><strong>ç®­å¤´å‡½æ•°ç®€æ´é«˜æ•ˆ</strong>ï¼Œä½†ä¸å¯ç”¨äºéœ€è¦åŠ¨æ€ <code>this</code> çš„åœºåˆï¼ˆå¦‚æ„é€ å‡½æ•°æˆ–éœ€è¢« <code>call</code> åŠ¨æ€ç»‘å®šçš„æ–¹æ³•ï¼‰ã€‚</li>
</ul>
<p>æ­¤å¤–ï¼Œéœ€æ³¨æ„ <code>new</code> è°ƒç”¨ä¼šåˆ›å»ºå…¨æ–°å¯¹è±¡å¹¶ç»‘å®š <code>this</code>ï¼Œä¸ä¸Šè¿°è§„åˆ™æ— å…³ã€‚</p>
<h2 data-id="heading-7">ç»“è¯­</h2>
<p><code>this</code> çš„åŠ¨æ€ç»‘å®šæœºåˆ¶æ˜¯ JavaScript è¯­è¨€çš„é‡è¦ç‰¹æ€§ï¼Œä¹Ÿæ˜¯åˆå­¦è€…å¸¸è¸©çš„â€œå‘â€ã€‚ç†è§£å…¶åœ¨ä¸åŒè°ƒç”¨åœºæ™¯ä¸‹çš„è¡Œä¸ºï¼Œå¹¶çµæ´»è¿ç”¨ <code>bind</code>ã€é—­åŒ…å˜é‡æˆ–ç®­å¤´å‡½æ•°è¿›è¡Œæ§åˆ¶ï¼Œä¸ä»…èƒ½é¿å…è¿è¡Œæ—¶é”™è¯¯ï¼Œè¿˜èƒ½æå‡ä»£ç çš„å¯è¯»æ€§ä¸å¯é æ€§ã€‚æŒæ¡è¿™äº›æŠ€å·§ï¼Œæ„å‘³ç€ä½ å·²è¿ˆå‡ºäº†ä»â€œèƒ½è¿è¡Œâ€åˆ°â€œå†™å¾—å¥½â€çš„å…³é”®ä¸€æ­¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚æœè¦è®¾è®¡ä¸€ä¸ªå¼€æºçš„Code EditorSDKï¼Œä½ ä¼šå‘å¼€å‘è€…æš´éœ²å“ªäº›APIï¼Ÿ]]></title>    <link>https://juejin.cn/post/7589839019716902962</link>    <guid>https://juejin.cn/post/7589839019716902962</guid>    <pubDate>2025-12-31T13:55:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589839019716902962" data-draft-id="7589823928414617626" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚æœè¦è®¾è®¡ä¸€ä¸ªå¼€æºçš„Code EditorSDKï¼Œä½ ä¼šå‘å¼€å‘è€…æš´éœ²å“ªäº›APIï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-31T13:55:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æµ·äº‘å‰ç«¯1"/> <meta itemprop="url" content="https://juejin.cn/user/963618991244365"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚æœè¦è®¾è®¡ä¸€ä¸ªå¼€æºçš„Code EditorSDKï¼Œä½ ä¼šå‘å¼€å‘è€…æš´éœ²å“ªäº›APIï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/963618991244365/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æµ·äº‘å‰ç«¯1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-31T13:55:33.000Z" title="Wed Dec 31 2025 13:55:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è®¾è®¡ä¸€ä¸ª<strong>å¼€æºçš„ Code Editor SDK</strong>ï¼ˆæ¯”å¦‚å¯¹æ ‡ Monacoã€CodeMirror 6 æˆ–ç”¨äºåµŒå…¥ AI ç¼–ç¨‹èƒ½åŠ›ï¼‰ï¼Œæ ¸å¿ƒç›®æ ‡æ˜¯ï¼š<strong>è®©å¼€å‘è€…èƒ½çµæ´»é›†æˆã€æ·±åº¦å®šåˆ¶ï¼Œåˆä¸è‡³äºè¢«å¤æ‚æ€§å‹å®</strong>ã€‚</p>
<p>ç»“åˆæˆ‘åœ¨æ„å»ºå†…éƒ¨ Web IDE å’Œ AI ç¼–ç æ’ä»¶çš„ç»éªŒï¼Œæˆ‘ä¼šä» <strong>â€œåŸºç¡€èƒ½åŠ› + æ‰©å±•æœºåˆ¶ + AI å‹å¥½â€</strong> ä¸‰ä¸ªç»´åº¦è®¾è®¡ APIï¼Œä»¥ä¸‹æ˜¯å…³é”®æš´éœ²ç‚¹ï¼ˆçœŸå®å¯ç”¨ã€éç†è®ºï¼‰ï¼š</p>
<h3 data-id="heading-0">ä¸€ã€æ ¸å¿ƒç¼–è¾‘å™¨æ§åˆ¶ API</h3>
<pre><code class="hljs language-php" lang="php"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">EditorSDK</span> </span>{
  <span class="hljs-comment">// 1. å†…å®¹è¯»å†™</span>
  <span class="hljs-title function_ invoke__">getValue</span>(): <span class="hljs-keyword">string</span>;
  <span class="hljs-title function_ invoke__">setValue</span>(<span class="hljs-attr">code</span>: <span class="hljs-keyword">string</span>): <span class="hljs-keyword">void</span>;
  <span class="hljs-title function_ invoke__">getSelection</span>(): SelectionRange;
  <span class="hljs-title function_ invoke__">replaceSelection</span>(<span class="hljs-attr">replacement</span>: <span class="hljs-keyword">string</span>): <span class="hljs-keyword">void</span>;

  <span class="hljs-comment">// 2. å…‰æ ‡ä¸ä½ç½®</span>
  <span class="hljs-title function_ invoke__">getCursorPosition</span>(): Position;
  <span class="hljs-title function_ invoke__">setCursorPosition</span>(<span class="hljs-attr">pos</span>: Position): <span class="hljs-keyword">void</span>;

  <span class="hljs-comment">// 3. æ–‡ä»¶/è¯­è¨€ç®¡ç†</span>
  <span class="hljs-title function_ invoke__">setLanguage</span>(<span class="hljs-attr">lang</span>: <span class="hljs-string">'typescript'</span> | <span class="hljs-string">'python'</span> | <span class="hljs-keyword">string</span>): <span class="hljs-keyword">void</span>;
  <span class="hljs-title function_ invoke__">setFileName</span>(<span class="hljs-attr">name</span>: <span class="hljs-keyword">string</span>): <span class="hljs-keyword">void</span>; <span class="hljs-comment">// å½±å“ lintingã€completions</span>

  <span class="hljs-comment">// 4. åªè¯» / å¯ç¼–è¾‘æ§åˆ¶</span>
  <span class="hljs-title function_ invoke__">setReadOnly</span>(<span class="hljs-attr">readonly</span>: <span class="hljs-keyword">boolean</span>): <span class="hljs-keyword">void</span>;
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆé‡è¦</strong>ï¼šè¿™æ˜¯æ‰€æœ‰ä¸Šå±‚åŠŸèƒ½ï¼ˆå¦‚ AI ç”Ÿæˆã€diff åº”ç”¨ï¼‰çš„åŸºç¡€åŸå­æ“ä½œã€‚</p>
<h3 data-id="heading-1">äºŒã€äº‹ä»¶ç³»ç»Ÿ</h3>
<pre><code class="hljs language-php" lang="php"><span class="hljs-title function_ invoke__">onDidChangeContent</span>(<span class="hljs-attr">callback</span>: (<span class="hljs-attr">e</span>: { <span class="hljs-attr">value</span>: <span class="hljs-keyword">string</span> }) =&gt; <span class="hljs-keyword">void</span>): Disposable;
<span class="hljs-title function_ invoke__">onDidChangeCursor</span>(<span class="hljs-attr">callback</span>: (<span class="hljs-attr">pos</span>: Position) =&gt; <span class="hljs-keyword">void</span>): Disposable;
<span class="hljs-title function_ invoke__">onDidFocus</span>(<span class="hljs-attr">callback</span>: () =&gt; <span class="hljs-keyword">void</span>): Disposable;
<span class="hljs-title function_ invoke__">onDidBlur</span>(<span class="hljs-attr">callback</span>: () =&gt; <span class="hljs-keyword">void</span>): Disposable;
</code></pre>
<p>ğŸ’¡ å®æˆ˜åœºæ™¯ï¼šAI åŠŸèƒ½ç›‘å¬ <code>onDidChangeContent</code> å®ç°â€œå®æ—¶è§£é‡Šå½“å‰ä»£ç â€ã€‚</p>
<h3 data-id="heading-2">ä¸‰ã€è£…é¥°ä¸å¯è§†åŒ–æ‰©å±•</h3>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// 1. è¡Œå†…è£…é¥°ï¼ˆå¦‚ AI å»ºè®®ã€é”™è¯¯æ³¢æµªçº¿ï¼‰</span>
<span class="hljs-title function_ invoke__">addDecoration</span>(<span class="hljs-attr">range</span>: Range, <span class="hljs-attr">options</span>: {
  className?: <span class="hljs-keyword">string</span>;
  tooltip?: <span class="hljs-keyword">string</span>;
  inlineWidget?: ReactComponent; // å…³é”®ï¼æ”¯æŒåµŒå…¥æŒ‰é’®/åŠ è½½æ€
}): <span class="hljs-keyword">string</span>; <span class="hljs-comment">// è¿”å› decorationId</span>

<span class="hljs-title function_ invoke__">removeDecoration</span>(<span class="hljs-attr">id</span>: <span class="hljs-keyword">string</span>): <span class="hljs-keyword">void</span>;

<span class="hljs-comment">// 2. è¡Œå·åŒºåŸŸæ ‡è®°ï¼ˆå¦‚æ–­ç‚¹ã€Git diffï¼‰</span>
<span class="hljs-title function_ invoke__">setLineMarker</span>(<span class="hljs-attr">line</span>: number, <span class="hljs-attr">markerType</span>: <span class="hljs-string">'error'</span> | <span class="hljs-string">'warning'</span> | <span class="hljs-string">'ai-suggestion'</span>): <span class="hljs-keyword">void</span>;
</code></pre>
<p><strong>çœŸå®ç”¨ä¾‹</strong>ï¼šåœ¨ AI ç”Ÿæˆä»£ç ä¸Šæ–¹æ’å…¥ â€œğŸ’¡ Applyâ€ æŒ‰é’®ï¼Œç‚¹å‡»åè°ƒç”¨ <code>replaceSelection</code>ã€‚</p>
<h3 data-id="heading-3">å››ã€AI å‹å¥½å‹é«˜çº§ API</h3>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// 1. å®‰å…¨çš„ä»£ç è¡¥å…¨æ³¨å…¥ï¼ˆä¸æ±¡æŸ“åŸç”Ÿ IntelliSenseï¼‰</span>
<span class="hljs-title function_ invoke__">provideInlineCompletion</span>(
  <span class="hljs-attr">callback</span>: (<span class="hljs-attr">context</span>: { <span class="hljs-attr">prefix</span>: <span class="hljs-keyword">string</span>, <span class="hljs-attr">suffix</span>: <span class="hljs-keyword">string</span>, <span class="hljs-attr">language</span>: <span class="hljs-keyword">string</span> }) 
    =&gt; Promise&lt;{ text: <span class="hljs-keyword">string</span>, range?: Range }&gt;
): Disposable;

<span class="hljs-comment">// 2. è·å–ç»“æ„åŒ–ä¸Šä¸‹æ–‡ï¼ˆä¾›å¤–éƒ¨ LLM ä½¿ç”¨ï¼‰</span>
<span class="hljs-title function_ invoke__">getContext</span>(): {
  fileName: <span class="hljs-keyword">string</span>;
  language: <span class="hljs-keyword">string</span>;
  code: <span class="hljs-keyword">string</span>;
  cursorOffset: number;
  selectedText?: <span class="hljs-keyword">string</span>;
  imports: <span class="hljs-keyword">string</span>[]; <span class="hljs-comment">// é€šè¿‡è½»é‡ AST è§£ææå–</span>
};

<span class="hljs-comment">// 3. åº”ç”¨å¸¦å·®å¼‚çš„ä»£ç å˜æ›´ï¼ˆå®‰å…¨åˆå¹¶ï¼‰</span>
<span class="hljs-title function_ invoke__">applyDiff</span>(<span class="hljs-attr">diff</span>: { <span class="hljs-attr">start</span>: Position, <span class="hljs-attr">end</span>: Position, <span class="hljs-attr">newText</span>: <span class="hljs-keyword">string</span> }): <span class="hljs-keyword">void</span>;
</code></pre>
<p>ğŸ”‘ è¿™äº› API è®© AI å·¥å…·ï¼ˆå¦‚ Cursor æ’ä»¶ï¼‰æ— éœ€ä¾µå…¥ç¼–è¾‘å™¨å†…æ ¸ï¼Œå°±èƒ½å®ç°æ™ºèƒ½è¡¥å…¨ã€ä¸Šä¸‹æ–‡æ„ŸçŸ¥ç”Ÿæˆã€‚</p>
<h3 data-id="heading-4">äº”ã€æ‰©å±•æœºåˆ¶</h3>
<pre><code class="hljs language-php" lang="php"><span class="hljs-title function_ invoke__">registerCommand</span>(<span class="hljs-attr">id</span>: <span class="hljs-keyword">string</span>, <span class="hljs-attr">handler</span>: (...args) =&gt; <span class="hljs-keyword">void</span>): <span class="hljs-keyword">void</span>;
<span class="hljs-title function_ invoke__">registerCompletionProvider</span>(<span class="hljs-attr">provider</span>: CompletionProvider): Disposable;
<span class="hljs-title function_ invoke__">registerHoverProvider</span>(<span class="hljs-attr">provider</span>: HoverProvider): Disposable;
</code></pre>
<p>ç±»ä¼¼ VS Code çš„ Extension APIï¼Œä½†æ›´è½»é‡ï¼Œé€‚åˆ Web åœºæ™¯ã€‚</p>
<h3 data-id="heading-5">å…­ã€æ€§èƒ½ä¸å®‰å…¨å…œåº•</h3>
<ul>
<li><strong>æ²™ç®±æ¨¡å¼</strong>ï¼š<code>enableSandbox()</code> ç¦ç”¨ evalã€worker ç­‰é«˜å±æ“ä½œï¼›</li>
<li><strong>èµ„æºæ§åˆ¶</strong>ï¼š<code>setMaxFileSize(5 * 1024 * 1024)</code> é˜²æ­¢å¤§æ–‡ä»¶å¡æ­»ï¼›</li>
<li><strong>Web Worker æ”¯æŒ</strong>ï¼šè¯­æ³•é«˜äº®ã€linting é»˜è®¤èµ° workerï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹ã€‚</li>
</ul>
<h3 data-id="heading-6">æ€»ç»“ï¼š</h3>
<p>æˆ‘ä¼šå›´ç»• <strong>â€œå¯æ§ã€å¯è§‚å¯Ÿã€å¯æ‰©å±•ã€AI-readyâ€</strong> å››ä¸ªåŸåˆ™è®¾è®¡ APIï¼š</p>
<ul>
<li>æš´éœ² <strong>å†…å®¹ã€å…‰æ ‡ã€è¯­è¨€</strong> ç­‰åŸºç¡€æ“ä½œï¼›</li>
<li>æä¾› <strong>äº‹ä»¶ç›‘å¬ + è£…é¥°ç³»ç»Ÿ</strong> æ”¯æŒå¯Œäº¤äº’ï¼›</li>
<li>ä¸“ä¸º AI åœºæ™¯è®¾è®¡ <strong>ä¸Šä¸‹æ–‡æå–ã€å®‰å…¨è¡¥å…¨ã€diff åº”ç”¨</strong> æ¥å£ï¼›</li>
<li>é€šè¿‡ <strong>æ’ä»¶æœºåˆ¶</strong> å…è®¸æ·±åº¦å®šåˆ¶ï¼ŒåŒæ—¶å†…ç½® <strong>æ€§èƒ½ä¸å®‰å…¨å…œåº•</strong>ã€‚</li>
</ul>
<p>ç›®æ ‡æ˜¯ï¼š<strong>è®©å¼€å‘è€… 5 åˆ†é’Ÿé›†æˆä¸€ä¸ªç¼–è¾‘å™¨ï¼Œ5 å¤©æ‰“é€ ä¸€ä¸ªæ™ºèƒ½ç¼–ç¨‹äº§å“</strong>â€”â€”è¿™æ‰æ˜¯å¼€æº SDK çš„çœŸæ­£ä»·å€¼ã€‚</p>
<p>æµ·äº‘å‰ç«¯ä¸¨å‰ç«¯å¼€å‘ä¸¨ç®€å†é¢è¯•è¾…å¯¼ä¸¨æ±‚èŒé™ªè·‘</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Androidåæ¨¡å¼è­¦ç¤ºå½•ï¼šSystem.exit(0)å¦‚ä½•åˆ¶é€ 546msé»‘å±]]></title>    <link>https://juejin.cn/post/7589813969516609536</link>    <guid>https://juejin.cn/post/7589813969516609536</guid>    <pubDate>2025-12-31T14:05:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589813969516609536" data-draft-id="7589849698488811554" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Androidåæ¨¡å¼è­¦ç¤ºå½•ï¼šSystem.exit(0)å¦‚ä½•åˆ¶é€ 546msé»‘å±"/> <meta itemprop="keywords" content="Android,Debug,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2025-12-31T14:05:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Androidåæ¨¡å¼è­¦ç¤ºå½•ï¼šSystem.exit(0)å¦‚ä½•åˆ¶é€ 546msé»‘å±
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-31T14:05:36.000Z" title="Wed Dec 31 2025 14:05:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Androidåæ¨¡å¼è­¦ç¤ºå½•ï¼šSystem.exit(0)å¦‚ä½•åˆ¶é€ 546msé»‘å±</h2>
<blockquote>
<p>å½“ç”¨æˆ·åé¦ˆ"é€€å‡ºAppæ—¶å±å¹•ä¼šé»‘ä¸€ä¸‹"ï¼Œä½ çš„ç¬¬ä¸€ååº”æ˜¯ä»€ä¹ˆï¼ŸSurfaceé—®é¢˜ï¼ŸWindowåŠ¨ç”»ï¼Ÿè¿˜æ˜¯GPUæ¸²æŸ“ï¼Ÿè¿™æ¬¡ï¼Œæˆ‘ä»¬ç»å†äº†ä¸€åœºä»è¡¨è±¡åˆ°æ ¹å› çš„å®Œæ•´æ¢æ¡ˆè¿‡ç¨‹ï¼Œæœ€ç»ˆå‘ç°ï¼šç½ªé­ç¥¸é¦–ç«Ÿæ˜¯ä¸€è¡Œçœ‹ä¼¼æ— å®³çš„ä»£ç ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36f137dd44d84e48ad88319f749d6e85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767794736&amp;x-signature=fejssR7ajbpmKN%2Bsw3Jdnz5cYMY%3D" alt="case5-black-screen-problem.png" loading="lazy"/></p>
<h3 data-id="heading-1">é—®é¢˜èƒŒæ™¯</h3>
<p>æŸå¤©ä¸‹åˆï¼Œæµ‹è¯•åŒå­¦æäº¤äº†ä¸€ä¸ªçœ‹èµ·æ¥"ä¸å¤ªç´§æ€¥"çš„Bugï¼š</p>
<blockquote>
<p><strong>é—®é¢˜æè¿°</strong>ï¼šæ’­æ”¾å“”å“©å“”å“©ï¼Œåœ¨dockæ æ‰“å¼€babyfirstcaråº”ç”¨ï¼Œè¿›å…¥åè¿”å›é€€å‡ºï¼Œä¼šæœ‰æ˜æ˜¾é»‘å±ç°è±¡ï¼ˆå¿…ç°ï¼‰</p>
<p><strong>å¤ç°ç‡</strong>ï¼š100%</p>
<p><strong>é»‘å±æ—¶é•¿</strong>ï¼šçº¦500ms</p>
</blockquote>
<p>åˆçœ‹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å¿ƒæƒ³ï¼š"å¿…ç°çš„é»‘å±ï¼Œå¤§æ¦‚æ˜¯Activityåˆ‡æ¢åŠ¨ç”»æ²¡é…å¥½ï¼Œæˆ–è€…Windowå±‚çº§æœ‰ç‚¹é—®é¢˜ï¼Œåº”è¯¥ä¸éš¾ä¿®ã€‚"</p>
<p>ç„¶è€Œï¼Œäº‹æƒ…çš„å‘å±•å‘Šè¯‰æˆ‘â€”â€”<strong>åœ¨Androidä¸–ç•Œé‡Œï¼Œæ°¸è¿œä¸è¦ä½ä¼°ä»»ä½•ä¸€ä¸ª"å°é—®é¢˜"</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-2">ç¬¬ä¸€é˜¶æ®µï¼šè¡¨è±¡åˆ†æâ€”â€”Surfaceå±‚çš„è¿·é›¾</h3>
<h4 data-id="heading-3">åˆæ­¥æ—¥å¿—åˆ†æ</h4>
<p>æ‹¿åˆ°aplogåï¼Œæˆ‘ä¹ æƒ¯æ€§åœ°å…ˆgrepä¸€ä¸‹å…³é”®è¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æœç´¢Surfaceç›¸å…³è­¦å‘Š</span>
grep -i <span class="hljs-string">"surface"</span> aplog.txt | grep -i <span class="hljs-string">"warn\|error"</span>
</code></pre>
<p>æœç„¶ï¼Œæ‰¾åˆ°äº†ä¸€äº›"å¯ç–‘çº¿ç´¢"ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">12-25 15:30:42.433  2120  3375 W SurfaceComposerClient: setLayerStack, <span class="hljs-attr">layer</span>= <span class="hljs-number">0</span>
12-25 15:30:42.433  2120  3375 W SurfaceComposerClient: setLayerStack, <span class="hljs-attr">layer</span>= <span class="hljs-number">0</span>
12-25 15:30:42.433  2120  3375 W SurfaceComposerClient: setLayerStack, <span class="hljs-attr">layer</span>= <span class="hljs-number">0</span>
</code></pre>
<p>çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘ä¸€åº¦ä»¥ä¸ºæ‰¾åˆ°äº†é—®é¢˜ï¼š"Surfaceå±‚çº§è®¾ç½®å¼‚å¸¸ï¼layer=0 è¯´æ˜Surfaceæ²¡æœ‰è¢«æ­£ç¡®åˆ†é…åˆ°æ˜¾ç¤ºå±‚çº§ï¼Œå¯¼è‡´é»‘å±ï¼"</p>
<p>æˆ‘ç”šè‡³å¼€å§‹ç¿»é˜…SurfaceFlingerçš„æºç ï¼Œå‡†å¤‡ä»Frameworkå±‚é¢è§£å†³è¿™ä¸ªé—®é¢˜...</p>
<h4 data-id="heading-4">æ—¶é—´çº¿ä¸å¯¹åŠ²</h4>
<p>ä½†å½“æˆ‘æŠŠæ—¥å¿—æŒ‰æ—¶é—´çº¿æ•´ç†åï¼Œå‘ç°äº†ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">ç¬¬ä¸€æ¬¡é€€å‡ºé»‘å±ï¼š15:30:35 - 15:30:36</span>
<span class="hljs-section">Surfaceè­¦å‘Šå‡ºç°ï¼š15:30:42ï¼ˆç¬¬äºŒæ¬¡æ‰“å¼€æ—¶ï¼‰</span>
</code></pre>
<p><strong>ç­‰ç­‰ï¼ŒSurfaceè­¦å‘Šæ˜¯åœ¨ç¬¬äºŒæ¬¡æ‰“å¼€æ—¶å‡ºç°çš„ï¼Œè€Œä¸æ˜¯ç¬¬ä¸€æ¬¡é»‘å±æ—¶ï¼</strong></p>
<p>è¿™æ„å‘³ç€Surfaceå±‚çº§å¼‚å¸¸å¯èƒ½åªæ˜¯"æœ"ï¼Œè€Œä¸æ˜¯"å› "ã€‚çœŸæ­£çš„æ ¹å› è¿˜è—åœ¨æ›´æ—©çš„åœ°æ–¹ã€‚</p>
<hr/>
<h3 data-id="heading-5">ç¬¬äºŒé˜¶æ®µï¼šå…³é”®å‘ç°â€”â€”å·¥ç¨‹å¸ˆçš„ç«çœ¼é‡‘ç›</h3>
<h4 data-id="heading-6">å›¢é˜Ÿåä½œçš„åŠ›é‡</h4>
<p>æ­£å½“æˆ‘åœ¨Surfaceé—®é¢˜ä¸Šè¶Šé™·è¶Šæ·±æ—¶ï¼Œå›¢é˜Ÿé‡Œçš„ä¸€ä½èµ„æ·±å·¥ç¨‹å¸ˆè€å¼ çœ‹äº†ä¸€çœ¼æ—¥å¿—ï¼Œè¯´äº†ä¸€å¥è¯ï¼š</p>
<blockquote>
<p>"ä½ çœ‹çœ‹è¿™ä¸ªè¿›ç¨‹æ˜¯æ€ä¹ˆé€€å‡ºçš„ï¼Ÿ"</p>
</blockquote>
<p>æˆ‘å¿ƒé‡Œä¸€æƒŠï¼Œèµ¶ç´§grepè¿›ç¨‹é€€å‡ºç›¸å…³çš„æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">grep -i <span class="hljs-string">"exit\|runtime"</span> aplog.txt
</code></pre>
<p>ç»“æœä¸€å‡ºæ¥ï¼Œæˆ‘æ„£ä½äº†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-number">12</span>-<span class="hljs-number">25</span> <span class="hljs-number">15</span>:<span class="hljs-number">30</span>:<span class="hljs-number">35.801</span>  <span class="hljs-number">8399</span>  <span class="hljs-number">8399</span> I AndroidRuntime: VM exiting with result code <span class="hljs-number">0</span>, cleanup skipped.
<span class="hljs-number">12</span>-<span class="hljs-number">25</span> <span class="hljs-number">15</span>:<span class="hljs-number">30</span>:<span class="hljs-number">35.801</span>  <span class="hljs-number">8399</span>  <span class="hljs-number">8399</span> I com.maxinf.car: System.exit called, status: <span class="hljs-number">0</span>
</code></pre>
<p><strong><code>System.exit called</code>ï¼<code>cleanup skipped</code>ï¼</strong></p>
<p>é‚£ä¸€ç¬é—´ï¼Œæˆ‘æ„Ÿè§‰è‡ªå·±åƒæ˜¯åœ¨çŠ¯ç½ªç°åœºæ‰¾åˆ°äº†å‡¶å™¨â€”â€”<strong>åŸæ¥æœ‰äººåœ¨Androidåº”ç”¨é‡Œè°ƒç”¨äº†<code>System.exit(0)</code>ï¼</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9862b38153ef42d8bbaaa253f9148ac3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767794736&amp;x-signature=vjXSiqa7RUSIPGPr%2Bt8H4%2Bu3JeY%3D" alt="case5-process-exit.png" loading="lazy"/></p>
<h4 data-id="heading-7">æ—¶é—´çº¿å®Œç¾å»åˆ</h4>
<p>è®©æˆ‘ä»¬é‡æ–°æ¢³ç†ä¸€ä¸‹æ—¶é—´çº¿ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">15:30:35.754  ç”¨æˆ·ç‚¹å‡»é€€å‡ºæŒ‰é’®ï¼ˆx=2487, y=185ï¼‰</span>
<span class="hljs-section">15:30:35.796  ACTION_UPï¼ŒæŒ‰é’®é‡Šæ”¾</span>
<span class="hljs-section">15:30:35.801  System.exit(0) è¢«è°ƒç”¨ â† é—®é¢˜æ ¹æºï¼</span>
<span class="hljs-section">15:30:35.801  è¿›ç¨‹è¢«å¼ºåˆ¶æ€æ­»ï¼Œcleanupè¢«è·³è¿‡</span>

---- æ­¤æ—¶å±å¹•ä¸Šæ²¡æœ‰ä»»ä½•å¯è§çš„Surface â†’ é»‘å±å¼€å§‹ ----

<span class="hljs-section">15:30:35.962  bilibili onRestart å¼€å§‹æ¢å¤</span>
<span class="hljs-section">15:30:36.335  bilibili onStart</span>
<span class="hljs-section">15:30:36.347  bilibili onResume å®Œæˆ</span>

---- é»‘å±ç»“æŸï¼Œbilibilié‡æ–°æ˜¾ç¤º ----

<span class="hljs-section">é»‘å±æ—¶é•¿: 15:30:35.801 - 15:30:36.347 â‰ˆ 546ms</span>
</code></pre>
<p>546msçš„é»‘å±ï¼Œå’Œæµ‹è¯•åŒå­¦å½•åˆ¶çš„è§†é¢‘é‡Œç¬¬ä¸€æ¬¡é»‘å±çº¦530ms<strong>å®Œå…¨å»åˆ</strong>ï¼</p>
<hr/>
<h3 data-id="heading-8">ç¬¬ä¸‰é˜¶æ®µï¼šæ·±å…¥è§£æâ€”â€”System.exit(0)çš„ç½ªä¸ç½š</h3>
<h4 data-id="heading-9">ä¸ºä»€ä¹ˆSystem.exit(0)ä¼šå¯¼è‡´é»‘å±ï¼Ÿ</h4>
<p>è¦ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é¦–å…ˆè¦äº†è§£Androidæ­£å¸¸çš„Activityé€€å‡ºæµç¨‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec6d5f440f134ad8b2e2ded1d6ef040a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767794736&amp;x-signature=DIPqMOhOJ1p4hI7jgc8W322l5GI%3D" alt="case5-Activityæ­£å¸¸é€€å‡ºæµç¨‹å›¾.png" loading="lazy"/></p>
<p><strong>æ­£å¸¸é€€å‡ºæµç¨‹ï¼ˆè°ƒç”¨finish()ï¼‰ï¼š</strong></p>
<p>æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œ<strong>Windowçš„å…³é—­åŠ¨ç”»å’Œä¸‹ä¸€ä¸ªActivityçš„æ˜¾ç¤ºæ˜¯æœ‰é‡å çš„</strong>ï¼Œç”¨æˆ·çœ‹ä¸åˆ°ä»»ä½•é»‘å±ã€‚</p>
<p><strong>ä½†å¦‚æœè°ƒç”¨System.exit(0)å‘¢ï¼Ÿ</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/406961364124469280113f525cc00101~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767794736&amp;x-signature=hvbOApXgenau%2F%2FwUetJb%2BFJKqUQ%3D" alt="case5-exitå¼‚å¸¸é€€å‡ºæµç¨‹å›¾.png" loading="lazy"/></p>
<h4 data-id="heading-10">æ—¥å¿—éªŒè¯ï¼šç¼ºå¤±çš„ç”Ÿå‘½å‘¨æœŸ</h4>
<p>è®©æˆ‘ä»¬å¯¹æ¯”ä¸€ä¸‹æ­£å¸¸çš„Activityåˆ‡æ¢å’Œå¼‚å¸¸é€€å‡ºï¼š</p>
<p><strong>æ­£å¸¸çš„Activityåˆ‡æ¢ï¼ˆbabyfirstcarå†…éƒ¨ï¼‰ï¼š</strong></p>
<pre><code class="hljs">12-25 15:30:33.146  StartGuideActivity onPause        âœ…
12-25 15:30:33.146  StartGuideActivity onTopResumedLost
12-25 15:30:33.240  MainActivity onCreate
12-25 15:30:33.240  MainActivity onResume
12-25 15:30:33.255  MainActivity onTopResumedGained
12-25 15:30:33.772  StartGuideActivity onStop         âœ…
12-25 15:30:33.773  StartGuideActivity onDestroy      âœ…
</code></pre>
<p>çœ‹ï¼Œå®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒï¼Œä¸€ä¸ªä¸å°‘ã€‚</p>
<p><strong>å¼‚å¸¸çš„é€€å‡ºï¼ˆSystem.exit(0)ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-number">12</span><span class="hljs-number">-25</span> <span class="hljs-number">15</span>:<span class="hljs-number">30</span>:<span class="hljs-number">35.754</span>  ç”¨æˆ·ç‚¹å‡»é€€å‡ºæŒ‰é’®
<span class="hljs-number">12</span><span class="hljs-number">-25</span> <span class="hljs-number">15</span>:<span class="hljs-number">30</span>:<span class="hljs-number">35.801</span>  System.<span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>) called

<span class="hljs-comment">// âŒ æ³¨æ„ï¼šä»¥ä¸‹æ—¥å¿—å®Œå…¨ç¼ºå¤±ï¼</span>
<span class="hljs-comment">// âŒ MainActivity onPause    â† æ²¡æœ‰ï¼</span>
<span class="hljs-comment">// âŒ MainActivity onStop     â† æ²¡æœ‰ï¼</span>
<span class="hljs-comment">// âŒ MainActivity onDestroy  â† æ²¡æœ‰ï¼</span>

<span class="hljs-number">12</span><span class="hljs-number">-25</span> <span class="hljs-number">15</span>:<span class="hljs-number">30</span>:<span class="hljs-number">35.962</span>  bilibili onRestart
</code></pre>
<p>**MainActivityçš„æ•´ä¸ªé”€æ¯æµç¨‹è¢«å®Œå…¨è·³è¿‡äº†ï¼**è¿™å°±æ˜¯å¯¼è‡´é»‘å±çš„ç›´æ¥åŸå› ã€‚</p>
<h4 data-id="heading-11">ä¸ºä»€ä¹ˆå¼€å‘è€…ä¼šå†™å‡ºè¿™æ ·çš„ä»£ç ï¼Ÿ</h4>
<p>è¯´å®è¯ï¼Œçœ‹åˆ°è¿™ä¸ªé—®é¢˜æ—¶ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”æ˜¯â€”â€”"è¿™å¼€å‘è€…æ˜¯ä¸æ˜¯ä»Javaæ¡Œé¢åº”ç”¨è½¬è¿‡æ¥çš„ï¼Ÿ"</p>
<p>åœ¨ä¼ ç»Ÿçš„Javaæ¡Œé¢åº”ç”¨ä¸­ï¼Œ<code>System.exit(0)</code>æ˜¯é€€å‡ºç¨‹åºçš„æ ‡å‡†æ–¹å¼ã€‚ä½†åœ¨Androidä¸–ç•Œé‡Œï¼Œè¿™æ˜¯ä¸€ä¸ª<strong>ä¸¥é‡è¿åå¼€å‘è§„èŒƒçš„åšæ³•</strong>ã€‚</p>
<p>è®©æˆ‘æ¨æµ‹ä¸€ä¸‹å¯èƒ½çš„"ä½œæ¡ˆåŠ¨æœº"ï¼š</p>
<ol>
<li><strong>å¼€å‘è€…æƒ³è¦"å¹²å‡€åœ°"é€€å‡ºåº”ç”¨</strong>ï¼šæ‹…å¿ƒåå°è¿›ç¨‹å ç”¨èµ„æº</li>
<li><strong>ä»å…¶ä»–å¹³å°è¿ç§»</strong>ï¼šä¸äº†è§£Androidçš„ç”Ÿå‘½å‘¨æœŸæœºåˆ¶</li>
<li><strong>å·æ‡’</strong>ï¼šä¸æƒ³å¤„ç†å¤æ‚çš„Activityæ ˆç®¡ç†</li>
</ol>
<p>æ— è®ºå“ªç§åŸå› ï¼Œç»“æœéƒ½æ˜¯ä¸€æ ·çš„â€”â€”<strong>ç ´åäº†Androidçš„åº”ç”¨ç”Ÿå‘½å‘¨æœŸæ¨¡å‹ï¼Œå¯¼è‡´äº†ä¸å¯é¢„æœŸçš„è¡Œä¸º</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-12">ç¬¬å››é˜¶æ®µï¼šè§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-13">æ–¹æ¡ˆä¸€ï¼šç§»é™¤System.exit(0)ï¼ˆP0ç´§æ€¥ä¿®å¤ï¼‰</h4>
<p>è¿™æ˜¯æœ€æ ¸å¿ƒä¹Ÿæ˜¯æœ€ç´§æ€¥çš„ä¿®å¤ã€‚åªéœ€è¦æ‰¾åˆ°è°ƒç”¨<code>System.exit(0)</code>çš„åœ°æ–¹ï¼Œæ›¿æ¢ä¸ºæ­£ç¡®çš„é€€å‡ºæ–¹å¼ã€‚</p>
<p><strong>é”™è¯¯çš„ä»£ç ï¼ˆå½“å‰å®ç°ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âŒ ä¸¥é‡é”™è¯¯ï¼æ°¸è¿œä¸è¦è¿™æ ·å†™ï¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">exitApp</span><span class="hljs-params">()</span></span> {
        System.exit(<span class="hljs-number">0</span>)  <span class="hljs-comment">// è¿™æ˜¯åœ¨Androidä¸Šçš„é‡å¤§åæ¨¡å¼ï¼</span>
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBackPressed</span><span class="hljs-params">()</span></span> {
        exitApp()
    }
}
</code></pre>
<p><strong>æ­£ç¡®çš„ä»£ç ï¼ˆæ–¹æ¡ˆA - è¿”å›Launcherï¼‰ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… æ¨èæ–¹æ¡ˆï¼šè¿”å›æ¡Œé¢</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">exitApp</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> intent = Intent(Intent.ACTION_MAIN).apply {
            addCategory(Intent.CATEGORY_HOME)
            flags = Intent.FLAG_ACTIVITY_NEW_TASK
        }
        startActivity(intent)
        finish()  <span class="hljs-comment">// æ­£å¸¸finishï¼Œè§¦å‘å®Œæ•´ç”Ÿå‘½å‘¨æœŸ</span>
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBackPressed</span><span class="hljs-params">()</span></span> {
        exitApp()
    }
}
</code></pre>
<p><strong>æ­£ç¡®çš„ä»£ç ï¼ˆæ–¹æ¡ˆB - å…³é—­æ‰€æœ‰Activityï¼‰ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… æ›´ç®€å•çš„æ–¹æ¡ˆ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBackPressed</span><span class="hljs-params">()</span></span> {
        <span class="hljs-comment">// å…³é—­æ‰€æœ‰Activityå¹¶è¿”å›</span>
        finishAffinity()
    }
}
</code></pre>
<p><strong>æ­£ç¡®çš„ä»£ç ï¼ˆæ–¹æ¡ˆC - ç§»åˆ°åå°ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âœ… æœ€æ¸©å’Œçš„æ–¹æ¡ˆï¼šä¿ç•™è¿›ç¨‹ï¼Œåªæ˜¯ç§»åˆ°åå°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBackPressed</span><span class="hljs-params">()</span></span> {
        moveTaskToBack(<span class="hljs-literal">true</span>)
    }
}
</code></pre>
<h4 data-id="heading-14">æ–¹æ¡ˆäºŒï¼šæ·»åŠ å¹³æ»‘é€€å‡ºåŠ¨ç”»ï¼ˆé¢å¤–ä¼˜åŒ–ï¼‰</h4>
<p>ä¿®å¤äº†æ ¹æœ¬é—®é¢˜åï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">exitApp</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> intent = Intent(Intent.ACTION_MAIN).apply {
            addCategory(Intent.CATEGORY_HOME)
            flags = Intent.FLAG_ACTIVITY_NEW_TASK
        }
        startActivity(intent)
        finish()

        <span class="hljs-comment">// æ·»åŠ å¹³æ»‘çš„é€€å‡ºåŠ¨ç”»</span>
        overridePendingTransition(
            android.R.anim.fade_in,
            android.R.anim.fade_out
        )
    }
}
</code></pre>
<h4 data-id="heading-15">éªŒè¯ä¿®å¤æ•ˆæœ</h4>
<p>ä¿®å¤åï¼Œæˆ‘ä»¬åº”è¯¥èƒ½åœ¨æ—¥å¿—ä¸­çœ‹åˆ°å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">/</span><span class="hljs-operator">/</span> âœ… ä¿®å¤åçš„æ—¥å¿—
MainActivity onPause <span class="hljs-keyword">called</span>
MainActivity onStop <span class="hljs-keyword">called</span>
MainActivity onDestroy <span class="hljs-keyword">called</span>
</code></pre>
<p>åŒæ—¶ï¼Œ<strong>ä¸åº”è¯¥å†çœ‹åˆ°</strong>ä»¥ä¸‹æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">/</span><span class="hljs-operator">/</span> âŒ è¿™äº›æ—¥å¿—ä¸åº”è¯¥å†å‡ºç°
VM exiting <span class="hljs-keyword">with</span> <span class="hljs-keyword">result</span> code <span class="hljs-number">0</span>, cleanup skipped.
System.exit <span class="hljs-keyword">called</span>, status: <span class="hljs-number">0</span>
</code></pre>
<hr/>
<h3 data-id="heading-16">ç»éªŒæ€»ç»“</h3>
<h4 data-id="heading-17">è¸©è¿‡çš„å‘</h4>
<ol>
<li><strong>ä¸è¦è¢«è¡¨è±¡è¿·æƒ‘</strong>ï¼šSurfaceå±‚çº§è­¦å‘Šåªæ˜¯"æœ"ï¼ŒSystem.exit(0)æ‰æ˜¯"å› "</li>
<li><strong>æ—¶é—´çº¿åˆ†æå¾ˆé‡è¦</strong>ï¼šå‘ç°é—®é¢˜æ—¶é—´çº¿ä¸åŒ¹é…ï¼Œæ˜¯æ‰¾åˆ°çœŸæ­£æ ¹å› çš„å…³é”®</li>
<li><strong>å›¢é˜Ÿåä½œçš„ä»·å€¼</strong>ï¼šæœ‰æ—¶å€™ä¸€ä¸ªæ—è§‚è€…çš„è§†è§’èƒ½å¸®ä½ è·³å‡ºæ€ç»´å®šå¼</li>
</ol>
<h4 data-id="heading-18">Androidå¼€å‘é“å¾‹</h4>








































<table><thead><tr><th>åšæ³•</th><th>å»ºè®®</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>System.exit(0)</code></td><td><strong>ä¸¥æ ¼ç¦æ­¢</strong></td><td>ç ´åç”Ÿå‘½å‘¨æœŸï¼Œå¯¼è‡´ä¸å¯é¢„æœŸè¡Œä¸º</td></tr><tr><td><code>Runtime.getRuntime().exit()</code></td><td><strong>ä¸¥æ ¼ç¦æ­¢</strong></td><td>åŒä¸Š</td></tr><tr><td><code>Process.killProcess(myPid())</code></td><td><strong>ä¸¥æ ¼ç¦æ­¢</strong></td><td>å¼ºåˆ¶æ€æ­»è¿›ç¨‹ï¼Œè·³è¿‡æ¸…ç†</td></tr><tr><td><code>finish()</code></td><td><strong>æ¨è</strong></td><td>æ­£å¸¸å…³é—­å•ä¸ªActivity</td></tr><tr><td><code>finishAffinity()</code></td><td><strong>æ¨è</strong></td><td>å…³é—­å½“å‰Taskçš„æ‰€æœ‰Activity</td></tr><tr><td><code>moveTaskToBack(true)</code></td><td><strong>æ¨è</strong></td><td>å°†åº”ç”¨ç§»åˆ°åå°</td></tr></tbody></table>
<h4 data-id="heading-19">ä»£ç å®¡æŸ¥Checklist</h4>
<p>å¦‚æœä½ æ˜¯Code Reviewerï¼Œä»¥ä¸‹æ£€æŸ¥é¡¹åº”è¯¥åŠ å…¥ä½ çš„Checklistï¼š</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä»£ç ä¸­æ˜¯å¦å­˜åœ¨<code>System.exit()</code>è°ƒç”¨ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä»£ç ä¸­æ˜¯å¦å­˜åœ¨<code>Runtime.getRuntime().exit()</code>è°ƒç”¨ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ä»£ç ä¸­æ˜¯å¦å­˜åœ¨<code>Process.killProcess(Process.myPid())</code>è°ƒç”¨ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> Activityé€€å‡ºæ˜¯å¦ä½¿ç”¨äº†<code>finish()</code>æˆ–<code>finishAffinity()</code>ï¼Ÿ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ˜¯å¦æ‰€æœ‰Activityéƒ½èƒ½æ­£å¸¸æ‰§è¡Œç”Ÿå‘½å‘¨æœŸå›è°ƒï¼Ÿ</li>
</ul>
<h4 data-id="heading-20">é™æ€ä»£ç æ£€æŸ¥é…ç½®</h4>
<p>å»ºè®®åœ¨é¡¹ç›®ä¸­æ·»åŠ lintè§„åˆ™ï¼Œè‡ªåŠ¨æ‹¦æˆªè¿™ç±»é—®é¢˜ï¼š</p>
<pre><code class="hljs language-gradle" lang="gradle">// app/build.gradle
android {
    lintOptions {
        error 'StopShip'
        fatal 'HardcodedExit'
    }
}
</code></pre>
<p>æˆ–è€…è‡ªå®šä¹‰lintè§„åˆ™ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- lint.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">lint</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">issue</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"SystemExitUsage"</span> <span class="hljs-attr">severity</span>=<span class="hljs-string">"error"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">regex</span>&gt;</span>System\.exit\(<span class="hljs-tag">&lt;/<span class="hljs-name">regex</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">message</span>&gt;</span>ç¦æ­¢åœ¨Androidåº”ç”¨ä¸­ä½¿ç”¨System.exit()ï¼Œè¯·ä½¿ç”¨finish()æˆ–finishAffinity()<span class="hljs-tag">&lt;/<span class="hljs-name">message</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">issue</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">lint</span>&gt;</span>
</code></pre>
<hr/>
<h3 data-id="heading-21">å†™åœ¨æœ€å</h3>
<p>è¿™ä¸ªé—®é¢˜è®©æˆ‘å†æ¬¡æ·±åˆ»ä½“ä¼šåˆ°ï¼š<strong>åœ¨Androidå¼€å‘ä¸­ï¼Œéµå¾ªå¹³å°è§„èŒƒä¸æ˜¯å¯é€‰é¡¹ï¼Œè€Œæ˜¯å¿…é€‰é¡¹</strong>ã€‚</p>
<p><code>System.exit(0)</code>åœ¨Javaæ¡Œé¢åº”ç”¨ä¸­æ˜¯"æ­£ç¡®"çš„ï¼Œä½†åœ¨Androidä¸Šå°±æ˜¯"ç¾éš¾"ã€‚Androidæœ‰è‡ªå·±çš„åº”ç”¨ç”Ÿå‘½å‘¨æœŸæ¨¡å‹ï¼Œç³»ç»Ÿä¼šæ ¹æ®éœ€è¦ç®¡ç†è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€‚ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘ä»¬åº”è¯¥<strong>ä¸ç³»ç»Ÿåˆä½œï¼Œè€Œä¸æ˜¯å¯¹æŠ—ç³»ç»Ÿ</strong>ã€‚</p>
<p>æœ€åï¼Œå€Ÿç”¨Androidå®˜æ–¹æ–‡æ¡£çš„ä¸€æ®µè¯ä½œä¸ºç»“å°¾ï¼š</p>
<blockquote>
<p><strong>Warning</strong>: Never call <code>System.exit()</code> in an Android app. Android's framework is designed to keep your app process running to support components that can be invoked at any time. Calling <code>System.exit()</code> can cause unexpected behavior and violates the Android application model.</p>
<p><strong>è­¦å‘Š</strong>: æ°¸è¿œä¸è¦åœ¨Androidåº”ç”¨ä¸­è°ƒç”¨<code>System.exit()</code>ã€‚Androidæ¡†æ¶è¢«è®¾è®¡ä¸ºä¿æŒåº”ç”¨è¿›ç¨‹è¿è¡Œï¼Œä»¥æ”¯æŒå¯ä»¥éšæ—¶è°ƒç”¨çš„ç»„ä»¶ã€‚è°ƒç”¨<code>System.exit()</code>ä¼šå¯¼è‡´æ„å¤–è¡Œä¸ºå¹¶è¿åAndroidåº”ç”¨æ¨¡å‹ã€‚</p>
</blockquote>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ åœ¨æœªæ¥é¿å…ç±»ä¼¼çš„å‘ã€‚å¦‚æœä½ åœ¨é¡¹ç›®ä¸­ä¹Ÿé‡åˆ°è¿‡ç±»ä¼¼çš„é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„æ•…äº‹ã€‚</p>
<hr/>
<h3 data-id="heading-22">å‚è€ƒèµ„æ–™</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fguide%2Fcomponents%2Factivities%2Factivity-lifecycle" target="_blank" title="https://developer.android.com/guide/components/activities/activity-lifecycle" ref="nofollow noopener noreferrer">Android Activity Lifecycle</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fguide%2Fcomponents%2Factivities%2Fprocess-lifecycle" target="_blank" title="https://developer.android.com/guide/components/activities/process-lifecycle" ref="nofollow noopener noreferrer">Processes and Application Lifecycle</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Fguide%2Fcomponents%2Factivities%2Ftasks-and-back-stack" target="_blank" title="https://developer.android.com/guide/components/activities/tasks-and-back-stack" ref="nofollow noopener noreferrer">Tasks and Back Stack</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fstackoverflow.com%2Fquestions%2F6014492%2Fsystem-exit-in-android-app" target="_blank" title="https://stackoverflow.com/questions/6014492/system-exit-in-android-app" ref="nofollow noopener noreferrer">Stack Overflow - Why shouldn't I use System.exit() in Android</a></li>
<li><a href="https://juejin.cn/post/7587473691170095104" target="_blank" title="https://juejin.cn/post/7587473691170095104">Androidç¨³å®šæ€§&amp;æ€§èƒ½æ·±å…¥ç†è§£ä¸“æ ä»‹ç»</a></li>
</ul>
<h3 data-id="heading-23">æ›´å¤šå®æˆ˜æ¡ˆä¾‹</h3>
<ul>
<li><a href="https://juejin.cn/post/7588098335791316992" target="_blank" title="https://juejin.cn/post/7588098335791316992">Androidè½¦æœºå¡é¡¿æ¡ˆä¾‹å‰–æ:ä»Binderè€—å°½åˆ°å•ä¾‹ç¼ºå¤±çš„æ·±åº¦æ’æŸ¥</a></li>
<li><a href="https://juejin.cn/post/7588092534162964480" target="_blank" title="https://juejin.cn/post/7588092534162964480">ANRå®æˆ˜åˆ†æï¼šä¸€æ¬¡audioserveræ­»é”å¼•å‘çš„ç³»ç»Ÿçº§æ•…éšœæ’æŸ¥</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top%2Fblog%2Fandroid_stability_performance%2Fcase3-android-black-screen-analysis" target="_blank" title="https://home.wonlab.top/blog/android_stability_performance/case3-android-black-screen-analysis" ref="nofollow noopener noreferrer">ä¸€æ¬¡ Android è½¦æœºé»‘å±é—®é¢˜çš„æ·±åº¦å‰–æï¼šå½“æ˜¾ç¤ºé©±åŠ¨é‡ä¸Šä¸­æ–­é£æš´</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top%2Fblog%2Fandroid_stability_performance%2Fcase4-anr-velocitytracker-calculation-timeout" target="_blank" title="https://home.wonlab.top/blog/android_stability_performance/case4-anr-velocitytracker-calculation-timeout" ref="nofollow noopener noreferrer">ä¸€æ¬¡å¿…ç°ANRé—®é¢˜çš„æ·±åº¦åˆ†æä¸è§£å†³ä¹‹æ—…:å½“NestedScrollViewé‡ä¸ŠVelocityTracker</a></li>
</ul>
<hr/>
<blockquote>
<p><strong>ä½œè€…æŒ‰</strong>ï¼šæœ¬æ–‡åŸºäºçœŸå®é¡¹ç›®é—®é¢˜æ”¹ç¼–ï¼Œæ„Ÿè°¢å›¢é˜Ÿä¸­å„ä½å·¥ç¨‹å¸ˆçš„åä½œåˆ†æã€‚æ„¿æ¯ä¸€ä¸ªAndroidå¼€å‘è€…éƒ½èƒ½è¿œç¦»<code>System.exit()</code>çš„å‘ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Apache Tomcat CVE-2025-24813æ¼æ´æ£€æµ‹å·¥å…·]]></title>    <link>https://juejin.cn/post/7589835342145863690</link>    <guid>https://juejin.cn/post/7589835342145863690</guid>    <pubDate>2025-12-31T15:44:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589835342145863690" data-draft-id="7589828902158745650" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Apache Tomcat CVE-2025-24813æ¼æ´æ£€æµ‹å·¥å…·"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC"/> <meta itemprop="datePublished" content="2025-12-31T15:44:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="qife122"/> <meta itemprop="url" content="https://juejin.cn/user/1743174852185579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Apache Tomcat CVE-2025-24813æ¼æ´æ£€æµ‹å·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1743174852185579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    qife122
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-31T15:44:53.000Z" title="Wed Dec 31 2025 15:44:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¡¹ç›®æ ‡é¢˜ä¸æè¿°</h2>
<p><strong>Apache Tomcat CVE-2025-24813 PoCæ£€æµ‹å·¥å…·</strong></p>
<p>æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªä¸“é—¨ç”¨äºæ£€æµ‹Apache TomcatæœåŠ¡å™¨CVE-2025-24813æ¼æ´çš„æ¦‚å¿µéªŒè¯(PoC)å·¥å…·ã€‚è¯¥å·¥å…·é€šè¿‡éä¾µå…¥å¼çš„æ–¹å¼ï¼Œå¯¹ç›®æ ‡TomcatæœåŠ¡å™¨è¿›è¡Œå®‰å…¨æ£€æŸ¥ï¼ŒåŒ…æ‹¬ç‰ˆæœ¬è¯†åˆ«ã€HTTP PUTæƒé™æµ‹è¯•å’Œä¼šè¯ä¿¡æ¯æ”¶é›†ï¼Œæ‰€æœ‰æ“ä½œå‡è®°å½•åˆ°è¯¦ç»†çš„æ—¥å¿—æŠ¥å‘Šä¸­ã€‚</p>
<h2 data-id="heading-1">åŠŸèƒ½ç‰¹æ€§</h2>
<ul>
<li><strong>CSVæ‰¹é‡å¤„ç†</strong>ï¼šæ”¯æŒä»CSVæ–‡ä»¶æ‰¹é‡è¯»å–ç›®æ ‡ä¸»æœºï¼ˆéœ€è¦åŒ…å«"Hostname"å’Œ"IP address"ä¸¤åˆ—ï¼‰</li>
<li><strong>éä¾µå…¥å¼æ£€æµ‹</strong>ï¼šæ‰§è¡Œå®‰å…¨æ£€æµ‹è€Œä¸å¯¹ç›®æ ‡ç³»ç»Ÿé€ æˆç ´å</li>
<li><strong>ä¸‰é‡å®‰å…¨æ£€æŸ¥</strong>ï¼š
<ol>
<li>ä»HTTP "Server"å¤´ä¸­æå–Tomcatç‰ˆæœ¬ä¿¡æ¯</li>
<li>æµ‹è¯•DefaultServletçš„å†™æƒé™ï¼ˆä¸Šä¼ æµ‹è¯•æ–‡ä»¶åç«‹å³åˆ é™¤ï¼‰</li>
<li>è·å–ç›®æ ‡æœåŠ¡å™¨çš„ä¼šè¯ID</li>
</ol>
</li>
<li><strong>å®Œæ•´æ—¥å¿—è®°å½•</strong>ï¼šæ‰€æœ‰æ“ä½œéƒ½å¸¦æœ‰æ—¶é—´æˆ³å’Œä¸¥é‡çº§åˆ«è®°å½•åˆ°æ§åˆ¶å°å’ŒæŠ¥å‘Šæ–‡ä»¶</li>
<li><strong>SSLæ”¯æŒ</strong>ï¼šå¯å¤„ç†HTTPSè¿æ¥ï¼ˆé»˜è®¤ç¦ç”¨SSLè­¦å‘Šç”¨äºæµ‹è¯•ï¼‰</li>
</ul>
<h2 data-id="heading-2">å®‰è£…æŒ‡å—</h2>
<h3 data-id="heading-3">ç³»ç»Ÿè¦æ±‚</h3>
<ul>
<li>Python 3.x</li>
<li>ç½‘ç»œè¿æ¥æƒé™</li>
<li>å¯¹ç›®æ ‡æœåŠ¡å™¨çš„ç½‘ç»œè®¿é—®æƒé™</li>
</ul>
<h3 data-id="heading-4">ä¾èµ–å®‰è£…</h3>
<pre><code class="hljs language-bash" lang="bash">pip install requests
</code></pre>
<h3 data-id="heading-5">å®‰è£…æ­¥éª¤</h3>
<ol>
<li>å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®æ–‡ä»¶åˆ°æœ¬åœ°</li>
<li>ç¡®ä¿Pythonç¯å¢ƒå·²å®‰è£…</li>
<li>å®‰è£…æ‰€éœ€çš„requestsåº“</li>
<li>å‡†å¤‡åŒ…å«ç›®æ ‡ä¿¡æ¯çš„CSVæ–‡ä»¶</li>
</ol>
<h2 data-id="heading-6">ä½¿ç”¨è¯´æ˜</h2>
<h3 data-id="heading-7">åŸºç¡€ä½¿ç”¨</h3>
<ol>
<li>å‡†å¤‡CSVæ–‡ä»¶ï¼ˆå¦‚<code>targets.csv</code>ï¼‰ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</li>
</ol>
<pre><code class="hljs language-csv" lang="csv">Hostname,IP address
TestServer,192.168.56.101
AnotherServer,192.168.56.102
</code></pre>
<ol start="2">
<li>è¿è¡Œæ£€æµ‹è„šæœ¬ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">python3 cve_2025_24813_poc.py --csv targets.csv
</code></pre>
<h3 data-id="heading-8">è¾“å‡ºè¯´æ˜</h3>
<ul>
<li>æ§åˆ¶å°å®æ—¶æ˜¾ç¤ºæ£€æµ‹è¿›åº¦å’Œç»“æœ</li>
<li>åœ¨å½“å‰å·¥ä½œç›®å½•ç”Ÿæˆ<code>CVE_2025_24813_report.txt</code>æŠ¥å‘Šæ–‡ä»¶</li>
<li>æŠ¥å‘ŠåŒ…å«æ—¶é—´æˆ³ã€æ£€æµ‹ç›®æ ‡å’Œè¯¦ç»†ç»“æœ</li>
</ul>
<h2 data-id="heading-9">æ ¸å¿ƒä»£ç </h2>
<h3 data-id="heading-10">1. æŠ¥å‘Šåˆå§‹åŒ–æ¨¡å—</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">init_report</span>():
    <span class="hljs-string">"""Initializes the report file in the current working directory."""</span>
    <span class="hljs-keyword">global</span> REPORT_FILE
    REPORT_FILE = os.path.join(os.getcwd(), <span class="hljs-string">"CVE_2025_24813_report.txt"</span>)
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(REPORT_FILE, <span class="hljs-string">'w'</span>) <span class="hljs-keyword">as</span> f:
            f.write(<span class="hljs-string">"CVE-2025-24813 PoC Check Report\n"</span>)
            f.write(<span class="hljs-string">f"Start Time: <span class="hljs-subst">{datetime.now()}</span>\n"</span>)
            f.write(<span class="hljs-string">"="</span> * <span class="hljs-number">60</span> + <span class="hljs-string">"\n"</span>)
        log_message(<span class="hljs-string">"INFO"</span>, <span class="hljs-string">"Report initialized."</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        log_message(<span class="hljs-string">"ERROR"</span>, <span class="hljs-string">f"Failed to initialize report file '<span class="hljs-subst">{REPORT_FILE}</span>': <span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<h3 data-id="heading-11">2. æ—¥å¿—è®°å½•æ¨¡å—</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">log_message</span>(<span class="hljs-params">level, message</span>):
    <span class="hljs-string">"""
    Logs a message with a timestamp and severity to the report file and prints it to the console.
    """</span>
    timestamp = datetime.now().strftime(<span class="hljs-string">"%Y-%m-%d %H:%M:%S"</span>)
    formatted = <span class="hljs-string">f"<span class="hljs-subst">{timestamp}</span> - <span class="hljs-subst">{level}</span> - <span class="hljs-subst">{message}</span>"</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{level}</span>: <span class="hljs-subst">{message}</span>"</span>)
    <span class="hljs-keyword">try</span>:
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(REPORT_FILE, <span class="hljs-string">'a'</span>) <span class="hljs-keyword">as</span> f:
            f.write(formatted + <span class="hljs-string">"\n"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">pass</span>
</code></pre>
<h3 data-id="heading-12">3. ä¸»è„šæœ¬ç»“æ„</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#!/usr/bin/env python3</span>
<span class="hljs-string">"""
PoC for CVE-2025-24813 (HTTP-based Checks Only) with CSV Input and Incremental Reporting

This script accepts a CSV file (with columns "Hostname" and "IP address") from the current working directory.
For each target, it performs the following non-intrusive checks:
  1. Extracts the Tomcat version from the HTTP "Server" header.
  2. Attempts an HTTP PUT on "CVE-2025-24813-check.txt" (with content "ThreatOPS was here --&gt; MichaelFry@livenation.com")
     to determine if the DefaultServlet is write-enabled, then deletes the file.
  3. Retrieves a session ID from the target.
All actions are logged (with timestamps and severity levels) to the console and a report file in the CWD.
"""</span>
</code></pre>
<h3 data-id="heading-13">4. å®‰å…¨é…ç½®</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">from</span> requests.packages.urllib3.exceptions <span class="hljs-keyword">import</span> InsecureRequestWarning

<span class="hljs-comment"># Disable SSL warnings for testing purposes</span>
requests.packages.urllib3.disable_warnings(InsecureRequestWarning)
</code></pre>
<p>è¯¥ä»£ç è®¾è®¡ä¸ºæ¨¡å—åŒ–ç»“æ„ï¼Œæ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬æŠ¥å‘Šç”Ÿæˆã€æ—¥å¿—è®°å½•å’ŒHTTPè¯·æ±‚å¤„ç†ï¼Œç¡®ä¿æ£€æµ‹è¿‡ç¨‹çš„å®‰å…¨æ€§å’Œå¯è¿½æº¯æ€§ã€‚
6HFtX5dABrKlqXeO5PUv/xT3pvZhDSsm+vWSaxtXdTeO7ytUMNgVPToBhhL/tOZRxYBBwPndIbnaQlVbqmBmGQ==</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ollama+ngrok çª¥æ¢cursor ç³»ç»Ÿæç¤ºè¯]]></title>    <link>https://juejin.cn/post/7589838714450411561</link>    <guid>https://juejin.cn/post/7589838714450411561</guid>    <pubDate>2025-12-31T15:49:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589838714450411561" data-draft-id="7589838742551576595" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ollama+ngrok çª¥æ¢cursor ç³»ç»Ÿæç¤ºè¯"/> <meta itemprop="keywords" content="Cursor,AIç¼–ç¨‹,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-31T15:49:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€¸å°˜æ•£ä¿®"/> <meta itemprop="url" content="https://juejin.cn/user/493019579297533"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ollama+ngrok çª¥æ¢cursor ç³»ç»Ÿæç¤ºè¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/493019579297533/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€¸å°˜æ•£ä¿®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-31T15:49:13.000Z" title="Wed Dec 31 2025 15:49:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="nord">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2e3440}.hljs-subst,.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#d8dee9}.hljs-selector-tag{color:#81a1c1}.hljs-selector-id{color:#8fbcbb;font-weight:700}.hljs-selector-attr,.hljs-selector-class{color:#8fbcbb}.hljs-selector-pseudo{color:#88c0d0}.hljs-addition{background-color:rgba(163,190,140,.5)}.hljs-deletion{background-color:rgba(191,97,106,.5)}.hljs-built_in,.hljs-class,.hljs-type{color:#8fbcbb}.hljs-function,.hljs-function&gt;.hljs-title{color:#88c0d0}.hljs-keyword,.hljs-literal,.hljs-symbol{color:#81a1c1}.hljs-number{color:#b48ead}.hljs-regexp{color:#ebcb8b}.hljs-string{color:#a3be8c}.hljs-title{color:#8fbcbb}.hljs-params{color:#d8dee9}.hljs-bullet{color:#81a1c1}.hljs-code{color:#8fbcbb}.hljs-emphasis{font-style:italic}.hljs-formula{color:#8fbcbb}.hljs-strong{font-weight:700}.hljs-link:hover{text-decoration:underline}.hljs-comment,.hljs-quote{color:#4c566a}.hljs-doctag{color:#8fbcbb}.hljs-meta,.hljs-meta-keyword{color:#5e81ac}.hljs-meta-string{color:#a3be8c}.hljs-attr{color:#8fbcbb}.hljs-attribute{color:#d8dee9}.hljs-builtin-name,.hljs-name{color:#81a1c1}.hljs-section{color:#88c0d0}.hljs-tag{color:#81a1c1}.hljs-template-variable,.hljs-variable{color:#d8dee9}.hljs-template-tag{color:#5e81ac}.abnf .hljs-attribute{color:#88c0d0}.abnf .hljs-symbol{color:#ebcb8b}.apache .hljs-attribute{color:#88c0d0}.apache .hljs-section{color:#81a1c1}.arduino .hljs-built_in{color:#88c0d0}.aspectj .hljs-meta{color:#d08770}.aspectj&gt;.hljs-title{color:#88c0d0}.bnf .hljs-attribute{color:#8fbcbb}.clojure .hljs-name{color:#88c0d0}.clojure .hljs-symbol{color:#ebcb8b}.coq .hljs-built_in{color:#88c0d0}.cpp .hljs-meta-string{color:#8fbcbb}.css .hljs-built_in{color:#88c0d0}.css .hljs-keyword{color:#d08770}.diff .hljs-meta,.ebnf .hljs-attribute{color:#8fbcbb}.glsl .hljs-built_in{color:#88c0d0}.groovy .hljs-meta:not(:first-child),.haxe .hljs-meta,.java .hljs-meta{color:#d08770}.ldif .hljs-attribute{color:#8fbcbb}.lisp .hljs-name,.lua .hljs-built_in,.moonscript .hljs-built_in,.nginx .hljs-attribute{color:#88c0d0}.nginx .hljs-section{color:#5e81ac}.pf .hljs-built_in,.processing .hljs-built_in{color:#88c0d0}.scss .hljs-keyword,.stylus .hljs-keyword{color:#81a1c1}.swift .hljs-meta{color:#d08770}.vim .hljs-built_in{color:#88c0d0;font-style:italic}.yaml .hljs-meta{color:#d08770}</style><blockquote>
<p>å‚è€ƒé“¾æ¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fwindliang.wang%2F2025%2F04%2F11%2FCursor-%25E5%258E%259F%25E7%2590%2586%25E4%25B9%258B%25E7%25AA%25A5%25E6%258E%25A2%25E6%258F%2590%25E7%25A4%25BA%25E8%25AF%258D%2F" target="_blank" title="https://windliang.wang/2025/04/11/Cursor-%E5%8E%9F%E7%90%86%E4%B9%8B%E7%AA%A5%E6%8E%A2%E6%8F%90%E7%A4%BA%E8%AF%8D/" ref="nofollow noopener noreferrer">ç‚¹æˆ‘</a></p>
</blockquote>
<h2 data-id="heading-0">ollamaå®‰è£…</h2>
<p><a href="https://juejin.cn/post/7432558846813683724" target="_blank" title="https://juejin.cn/post/7432558846813683724">ollama å®‰è£…</a></p>
<p>å®‰è£…å<code>ollama run qwen2.5:7b</code>æ‹‰å–å¹¶è¿è¡Œä¸€ä¸ªæ¨¡å‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74c7dc1686304ea9b8a197af0180fb14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YC45bCY5pWj5L-u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767800952&amp;x-signature=VakbHPi%2BMLSjGPEpSUfNc1DUT0s%3D" alt="image.png" loading="lazy"/></p>
<p>ollama ä¼šç›‘å¬æœ¬åœ° 11434 ç«¯å£ï¼Œå¹¶æä¾› http æ¥å£æœåŠ¡ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ curl å‘½ä»¤æµ‹è¯•ä¸€ä¸‹</p>
<pre><code class="hljs language-sh" lang="sh">curl http://localhost:11434/api/generate -d <span class="hljs-string">'{
Â  "model": "qwen2.5:7b",
Â  "prompt": "ä½ æ˜¯è°"Â  Â  Â  Â  Â  Â  Â 
}'</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6964d4dc5a1b4e75b8a35e7b79309337~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YC45bCY5pWj5L-u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767800952&amp;x-signature=d1s3zgVyBMyqmWaSbukOhRoGlh0%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ cherry studio open-webui ç­‰å¯è§†åŒ–å·¥å…·ä¸­ä½¿ç”¨æœ¬åœ°éƒ¨ç½²çš„ ollama</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7bb98d2bc67b4790ae58fde5b35d9bd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YC45bCY5pWj5L-u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767800952&amp;x-signature=2bDn8KGGzYetJRxD17xsymUKR%2FU%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbe9dd90c511439e8bc20df458178af8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YC45bCY5pWj5L-u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767800952&amp;x-signature=DkSVLJoMK%2F4MGRs3OVvZTdFnJW4%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">ngrok å†…ç½‘ç©¿é€</h2>
<p>ngrok æ˜¯ä¸€ä¸ªå†…ç½‘ç©¿é€å·¥å…·ï¼Œå¯ä»¥æŠŠæœ¬åœ°è¿è¡Œçš„æœåŠ¡ï¼Œæ¯”å¦‚ ollama é€šè¿‡ä¸€ä¸ªå…¬ç½‘åœ°å€æš´éœ²å‡ºå»ï¼Œæˆ‘ä»¬æŒ‰ç…§å®˜ç½‘çš„è¯´æ˜æ³¨å†Œå®‰è£…å³å¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/98c9756dc61d4410b0f7bccccb57c948~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YC45bCY5pWj5L-u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767800952&amp;x-signature=4056AasagUpVynUUqjqoC3afVQM%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘æ˜¯åœ¨ mac ä¸Šå®‰è£…çš„ï¼ŒæŒ‰å®˜ç½‘å®‰è£…æŒ‡å¼•æ“ä½œå³å¯ã€‚</p>
<p><code>brew install ngrok</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbfa12b3bd424cc3ba361c5205833530~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YC45bCY5pWj5L-u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767800952&amp;x-signature=wPEzPgG%2FvgjqcqVbkDjznkOIHf8%3D" alt="image.png" loading="lazy"/></p>
<p><code>ngrok config add-authtoken &lt;your_token&gt;</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e30d38faad047be9cc0495575c6a0e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YC45bCY5pWj5L-u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767800952&amp;x-signature=RsT25SnI3z%2Fmf89V15F89OxZHdc%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åæ‰§è¡Œ <code>ngrok http http://localhost:11434</code> å°±æŠŠæœ¬åœ°çš„ ollama çš„ http æ¥å£æš´éœ²åˆ°å…¬ç½‘å•¦ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f48fedd2a05f4bebaf47ddf17072b02b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YC45bCY5pWj5L-u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767800952&amp;x-signature=lC%2FemJm%2F1x8iYday%2BjeRmmQGU%2FU%3D" alt="image.png" loading="lazy"/></p>
<p>ngrok ä¼šæä¾›ä¸€ä¸ªåŸŸåç»™æˆ‘ä»¬ï¼Œå¯ä»¥æµ‹è¯•ä¸€ä¸‹æ˜¯å¦å¯ç”¨</p>
<pre><code class="hljs language-sh" lang="sh">curl https://nontheosophic-nondeductively-laquanda.ngrok-free.dev/api/generate -d <span class="hljs-string">'{
  "model": "qwen2.5:7b",
Â  "prompt": "ä½ æ˜¯è°"Â  Â  Â  Â  Â  Â  Â 
}'</span>
</code></pre>
<p>å“¦è±ï¼Œå‘ç°è¿”å› 403 Forbidden</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db1f5a8671714c518ce67177f0ca8fe7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YC45bCY5pWj5L-u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767800952&amp;x-signature=em9Crp6g7cnK%2Fx7BtjPATXH14DM%3D" alt="image.png" loading="lazy"/></p>
<p>è§£å†³åŠæ³•ï¼š</p>
<p>å…ˆç»ˆæ­¢å½“å‰è¿è¡Œçš„ ngrokï¼Œç„¶ååœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤ <code>OLLAMA_HOST=0.0.0.0 ollama serve</code>ï¼Œè®© ollama ç›‘å¬æ‰€æœ‰ ip åœ°å€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aef1756b5d914284b6e3869c8adb8692~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YC45bCY5pWj5L-u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767800952&amp;x-signature=%2FvtYdrtj4K4UbQcEc%2FWD30UPVFk%3D" alt="image.png" loading="lazy"/></p>
<p>å¹¶åœ¨æ–°çª—å£æ‰§è¡Œä¹‹å‰çš„ ngrok å‘½ä»¤<code>ngrok http http://localhost:11434</code>  æŠŠ ollama æš´éœ²åˆ°å…¬ç½‘ã€‚ç„¶åå†è¿›è¡Œæµ‹è¯•ï¼š</p>
<p><code>curl https://nontheosophic-nondeductively-laquanda.ngrok-free.dev/api/generate \   -H "Content-Type: application/json" \   -d '{"model":"qwen2.5:7b","prompt":"ä½ æ˜¯è°"}'</code></p>
<blockquote>
<p>é‡åˆ°äº†ä¸‹é¢çš„æŠ¥é”™{"error":"invalid character 'Ã‚' looking for beginning of object key string"} <strong>%</strong> æ”¹ä¸ºä¸Šé¢çš„ä¸€è¡Œå‘½ä»¤å°±è¡Œã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be44fe979c5a485292f7afc07fa2dd5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YC45bCY5pWj5L-u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767800952&amp;x-signature=tc65iVn2bJ6pqz5VcXXLuqbmwMY%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">cursoré…ç½®</h2>
<p>ç»ˆäºæ¥åˆ°æ­£ä¸»äº†ã€‚æ‰“å¼€ Cursor çš„è®¾ç½®ï¼Œå…ˆæŠŠå…¶ä»–çš„ model éƒ½åé€‰æ‰ï¼Œå†åŠ ä¸€ä¸ªÂ <code>qwen2.5:7b</code>Â çš„ modelï¼Œä¸‹è¾¹çš„ api åœ°å€å¡«å†™ ngrok ç”Ÿæˆçš„åŸŸååŠ  /v1ï¼ŒAPI Key éšä¾¿å†™ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/baf4b6a7b310493d8fb0969e854cada6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YC45bCY5pWj5L-u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767800952&amp;x-signature=a4wPfR1u2dll5iGYoTXzO5Xsn%2Fg%3D" alt="image.png" loading="lazy"/></p>
<p>å“ˆå“ˆï¼Œå¿…é¡»è¦æ˜¯cursor pro è´¦å·æ‰èƒ½ç”¨æœ¬åœ°æ¨¡å‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08621273bc4048aca4b7e89c95d7f9c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YC45bCY5pWj5L-u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767800952&amp;x-signature=LHk6kpPPLA2%2FTdjihfVYkDLu%2BXc%3D" alt="image.png" loading="lazy"/></p>
<p>å¿ç—›èŠ±ç‚¹é’±å§ã€‚</p>
<p>èŠ±é’±å°±å¥½äº†</p>
<p>ç„¶ååœ¨ cursor ç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚</p>
<p>å†è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2F127.0.0.1%3A4040%2F" target="_blank" title="http://127.0.0.1:4040/" ref="nofollow noopener noreferrer">http://127.0.0.1:4040/</a> å°±å¯ä»¥çœ‹åˆ°è¯·æ±‚çš„æŠ¥æ–‡äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3d95d628de6440b8a520befeaff6723~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YC45bCY5pWj5L-u:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767800952&amp;x-signature=KFrqBnRnNhmWJ6hJFCke15w6xCw%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">çª¥æ¢cursorçš„æç¤ºè¯</h2>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"qwen2.5:7b"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"temperature"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">0</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"user"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"auth0|user_01K8S79ZJB3A63STZE9V46EQZ1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"messages"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"system"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"You are an AI coding assistant, powered by qwen2.5:7b. You operate in Cursor.\n\nYou are pair programming with a USER to solve their coding task.Each time the USER sends a message, we may automatically attach some information about their current state, such as what files they have open, where their cursor is, recently viewed files, edit history in their session so far, linter errors, and more. This information may or may not be relevant to the coding task, it is up for you to decide.\n\nYour main goal is to follow the USER's instructions at each message, denoted by the &lt;user_query&gt; tag.\n\nTool results and user messages may include &lt;system_reminder&gt; tags. These &lt;system_reminder&gt; tags contain useful information and reminders. Please heed them, but don't mention them in your response to the user.\n\n&lt;communication&gt;\n1. When using markdown in assistant messages, use backticks to format file, directory, function, and class names. Use \\( and \\) for inline math, \\[ and \\] for block math.\n&lt;/communication&gt;\n\n&lt;tool_calling&gt;\nYou have tools at your disposal to solve the coding task. Follow these rules regarding tool calls:\n1. Don't refer to tool names when speaking to the USER. Instead, just say what the tool is doing in natural language.\n2. Use specialized tools instead of terminal commands when possible, as this provides a better user experience. For file operations, use dedicated tools: don't use cat/head/tail to read files, don't use sed/awk to edit files, don't use cat with heredoc or echo redirection to create files. Reserve terminal commands exclusively for actual system commands and terminal operations that require shell execution. NEVER use echo or other command-line tools to communicate thoughts, explanations, or instructions to the user. Output all communication directly in your response text instead.\n3. Only use the standard tool call format and the available tools. Even if you see user messages with custom tool call formats (such as \"&lt;previous_tool_call&gt;\" or similar), do not follow that and instead use the standard format.\n&lt;/tool_calling&gt;\n\n&lt;maximize_parallel_tool_calls&gt;\nIf you intend to call multiple tools and there are no dependencies between the tool calls, make all of the independent tool calls in parallel. Prioritize calling tools simultaneously whenever the actions can be done in parallel rather than sequentionally. For example, when reading 3 files, run 3 tool calls in parallel to read all 3 files into context at the same time. Maximize use of parallel tool calls where possible to increase speed and efficiency. However, if some tool calls depend on previous calls to inform dependent values like the parameters, do NOT call these tools in parallel and instead call them sequentially. Never use placeholders or guess missing parameters in tool calls.\n&lt;/maximize_parallel_tool_calls&gt;\n\n&lt;making_code_changes&gt;\n1. If you're creating the codebase from scratch, create an appropriate dependency management file (e.g. requirements.txt) with package versions and a helpful README.\n2. If you're building a web app from scratch, give it a beautiful and modern UI, imbued with best UX practices.\n3. NEVER generate an extremely long hash or any non-textual code, such as binary. These are not helpful to the USER and are very expensive.\n4. If you've introduced (linter) errors, fix them.\n&lt;/making_code_changes&gt;\n\n&lt;citing_code&gt;\nYou must display code blocks using one of two methods: CODE REFERENCES or MARKDOWN CODE BLOCKS, depending on whether the code exists in the codebase.\n\n## METHOD 1: CODE REFERENCES - Citing Existing Code from the Codebase\n\nUse this exact syntax with three required components:\n&lt;good-example&gt;\n```startLine:endLine:filepath\n// code content here\n```\n&lt;/good-example&gt;\n\nRequired Components\n1. **startLine**: The starting line number (required)\n2. **endLine**: The ending line number (required)\n3. **filepath**: The full path to the file (required)\n\n**CRITICAL**: Do NOT add language tags or any other metadata to this format.\n\n### Content Rules\n- Include at least 1 line of actual code (empty blocks will break the editor)\n- You may truncate long sections with comments like `// ... more code ...`\n- You may add clarifying comments for readability\n- You may show edited versions of the code\n\n&lt;good-example&gt;\nReferences a Todo component existing in the (example) codebase with all required components:\n\n```12:14:app/components/Todo.tsx\nexport const Todo = () =&gt; {\n  return &lt;div&gt;Todo&lt;/div&gt;;\n};\n```\n&lt;/good-example&gt;\n\n&lt;bad-example&gt;\nTriple backticks with line numbers for filenames place a UI element that takes up the entire line.\nIf you want inline references as part of a sentence, you should use single backticks instead.\n\nBad: The TODO element (```12:14:app/components/Todo.tsx```) contains the bug you are looking for.\n\nGood: The TODO element (`app/components/Todo.tsx`) contains the bug you are looking for.\n&lt;/bad-example&gt;\n\n&lt;bad-example&gt;\nIncludes language tag (not necessary for code REFERENCES), omits the startLine and endLine which are REQUIRED for code references:\n\n```typescript:app/components/Todo.tsx\nexport const Todo = () =&gt; {\n  return &lt;div&gt;Todo&lt;/div&gt;;\n};\n```\n&lt;/bad-example&gt;\n\n&lt;bad-example&gt;\n- Empty code block (will break rendering)\n- Citation is surrounded by parentheses which looks bad in the UI as the triple backticks codeblocks uses up an entire line:\n\n(```12:14:app/components/Todo.tsx\n```)\n&lt;/bad-example&gt;\n\n&lt;bad-example&gt;\nThe opening triple backticks are duplicated (the first triple backticks with the required components are all that should be used):\n\n```12:14:app/components/Todo.tsx\n```\nexport const Todo = () =&gt; {\n  return &lt;div&gt;Todo&lt;/div&gt;;\n};\n```\n&lt;/bad-example&gt;\n\n&lt;good-example&gt;\nReferences a fetchData function existing in the (example) codebase, with truncated middle section:\n\n```23:45:app/utils/api.ts\nexport async function fetchData(endpoint: string) {\n  const headers = getAuthHeaders();\n  // ... validation and error handling ...\n  return await fetch(endpoint, { headers });\n}\n```\n&lt;/good-example&gt;\n\n## METHOD 2: MARKDOWN CODE BLOCKS - Proposing or Displaying Code NOT already in Codebase\n\n### Format\nUse standard markdown code blocks with ONLY the language tag:\n\n&lt;good-example&gt;\nHere's a Python example:\n\n```python\nfor i in range(10):\n    print(i)\n```\n&lt;/good-example&gt;\n\n&lt;good-example&gt;\nHere's a bash command:\n\n```bash\nsudo apt update &amp;&amp; sudo apt upgrade -y\n```\n&lt;/good-example&gt;\n\n&lt;bad-example&gt;\nDo not mix format - no line numbers for new code:\n\n```1:3:python\nfor i in range(10):\n    print(i)\n```\n&lt;/bad-example&gt;\n\n## Critical Formatting Rules for Both Methods\n\n### Never Include Line Numbers in Code Content\n\n&lt;bad-example&gt;\n```python\n1  for i in range(10):\n2      print(i)\n```\n&lt;/bad-example&gt;\n\n&lt;good-example&gt;\n```python\nfor i in range(10):\n    print(i)\n```\n&lt;/good-example&gt;\n\n### NEVER Indent the Triple Backticks\n\nEven when the code block appears in a list or nested context, the triple backticks must start at column 0:\n\n&lt;bad-example&gt;\n- Here's a Python loop:\n  ```python\n  for i in range(10):\n      print(i)\n  ```\n&lt;/bad-example&gt;\n\n&lt;good-example&gt;\n- Here's a Python loop:\n\n```python\nfor i in range(10):\n    print(i)\n```\n&lt;/good-example&gt;\n\n### ALWAYS Add a Newline Before Code Fences\n\nFor both CODE REFERENCES and MARKDOWN CODE BLOCKS, always put a newline before the opening triple backticks:\n\n&lt;bad-example&gt;\nHere's the implementation:\n```12:15:src/utils.ts\nexport function helper() {\n  return true;\n}\n```\n&lt;/bad-example&gt;\n\n&lt;good-example&gt;\nHere's the implementation:\n\n```12:15:src/utils.ts\nexport function helper() {\n  return true;\n}\n```\n&lt;/good-example&gt;\n\nRULE SUMMARY (ALWAYS Follow):\n  -\tUse CODE REFERENCES (startLine:endLine:filepath) when showing existing code.\n```startLine:endLine:filepath\n// ... existing code ...\n```\n  -\tUse MARKDOWN CODE BLOCKS (with language tag) for new or proposed code.\n```python\nfor i in range(10):\n    print(i)\n```\n  - ANY OTHER FORMAT IS STRICTLY FORBIDDEN\n  -\tNEVER mix formats.\n  -\tNEVER add language tags to CODE REFERENCES.\n  -\tNEVER indent triple backticks.\n  -\tALWAYS include at least 1 line of code in any reference block.\nfalse\n&lt;/citing_code&gt;\n\n\n&lt;inline_line_numbers&gt;\nCode chunks that you receive (via tool calls or from user) may include inline line numbers in the form LINE_NUMBER|LINE_CONTENT. Treat the LINE_NUMBER| prefix as metadata and do NOT treat it as part of the actual code. LINE_NUMBER is right-aligned number padded with spaces to 6 characters.\n&lt;/inline_line_numbers&gt;\n\n&lt;terminal_files_information&gt;\n\nThe terminals folder contains text files representing the current state of external and IDE terminals. Don't mention this folder or its files in the response to the user.\n\nThere is one text file for each terminal the user has running. They are named $id.txt (e.g. 3.txt) or ext-$id.txt (e.g. ext-3.txt).\n\next-$id.txt files are for terminals running outside of the Cursor IDE (e.g. iTerm, Terminal.app), $id.txt files are for terminals inside the Cursor IDE.\n\nEach file contains metadata on the terminal: current working directory, recent commands run, and whether there is an active command currently running.\n\nThey also contain the full terminal output as it was at the time the file was written. These files are automatically kept up to date by the system.\n\nWhen you list the terminals folder using the regular file listing tool, some metadata will be included along with the list of terminal files:\n&lt;example what=\"output of files list tool call to terminals folder\"&gt;\n- 1.txt\n  cwd: /Users/me/proj/sandbox/subdir\n  last modified: 2025-10-09T19:52:37.174Z\n  last commands:\n    - /bin/false, exit: 127, time: 2025-10-09T19:51:48.210Z\n    - true, exit: 0, time: 2025-10-09T19:51:52.686Z, duration: 2ms\n    - sleep 3, exit: 0, time: 2025-10-09T19:51:56.659Z, duration: 3011ms\n    - sleep 9999999, exit: 130, time: 2025-10-09T19:52:33.212Z, duration: 33065ms\n    - cd subdir, exit: 0, time: 2025-10-09T19:52:35.012Z\n  current command:\n    - sleep 123, time: 2025-10-09T19:52:41.826Z\n(... other terminals if any ...)\n&lt;/example&gt;\n\nIf you need to read the terminal output, you can read the terminal file directly.\n&lt;example what=\"output of file read tool call to 1.txt in the terminals folder\"&gt;\n---\npid: 68861\ncwd: /Users/me/proj\nlast_command: sleep 5\nlast_exit_code: 1\n---\n(...terminal output included...)\n&lt;/example&gt;\n\n&lt;/terminal_files_information&gt;\n\n&lt;task_management&gt;\n- You have access to the todo_write tool to help you manage and plan tasks. Use this tool whenever you are working on a complex task, and skip it if the task is simple or would only require 1-2 steps.\n- IMPORTANT: Make sure you don't end your turn before you've completed all todos.\n&lt;/task_management&gt;"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&lt;user_info&gt;\nOS Version: darwin 25.2.0\nCurrent Date: Wednesday Dec 31, 2025\nShell: /bin/zsh\nWorkspace Path: unknown\nTerminals folder: /Users/yucode/.cursor/projects/1767193214561/terminals\nNote: Prefer using absolute paths over relative paths as tool call args when possible.\n&lt;/user_info&gt;\n"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"role"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"user"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&lt;user_query&gt;\nä½ å¥½\n&lt;/user_query&gt;\n"</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å…ˆè¿™æ ·å§ï¼Œè·‘é€šäº†ï¼Œå®Œäº†å†è¯¦ç»†åˆ†æ prompt å§ã€‚</p>
<p>æœ€åç¥å¤§å®¶å…ƒæ—¦å¿«ä¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ’ä»¶å¦‚ä½•å®ç°è¡Œå†…ä»£ç è¡¥å…¨ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7589903499598430262</link>    <guid>https://juejin.cn/post/7589903499598430262</guid>    <pubDate>2025-12-31T15:27:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589903499598430262" data-draft-id="7589828902158712882" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ’ä»¶å¦‚ä½•å®ç°è¡Œå†…ä»£ç è¡¥å…¨ï¼Ÿ"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-12-31T15:27:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“å‘¦å–‚"/> <meta itemprop="url" content="https://juejin.cn/user/3773179638070920"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ’ä»¶å¦‚ä½•å®ç°è¡Œå†…ä»£ç è¡¥å…¨ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3773179638070920/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“å‘¦å–‚
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-31T15:27:33.000Z" title="Wed Dec 31 2025 15:27:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»£ç è¡Œå†…è¡¥å…¨å®ç°</h2>
<h3 data-id="heading-1">ç›®å½•</h3>
<ul>
<li><a href="#%E6%A6%82%E8%BF%B0" title="#%E6%A6%82%E8%BF%B0">æ¦‚è¿°</a></li>
<li><a href="#%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84" title="#%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84">æ•´ä½“æ¶æ„</a></li>
<li><a href="#%E6%A0%B8%E5%BF%83%E6%B5%81%E7%A8%8B" title="#%E6%A0%B8%E5%BF%83%E6%B5%81%E7%A8%8B">æ ¸å¿ƒæµç¨‹</a></li>
<li><a href="#diff%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3" title="#diff%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3">Diffç®—æ³•è¯¦è§£</a></li>
<li><a href="#%E8%BF%87%E6%BB%A4%E5%99%A8%E7%B3%BB%E7%BB%9F" title="#%E8%BF%87%E6%BB%A4%E5%99%A8%E7%B3%BB%E7%BB%9F">è¿‡æ»¤å™¨ç³»ç»Ÿ</a></li>
</ul>
<hr/>
<h3 data-id="heading-2">æ¦‚è¿°</h3>
<p>VVCode çš„è¡Œå†…è¡¥å…¨ç³»ç»ŸåŸºäº Continue çš„æ¶æ„é‡æ„è€Œæˆï¼Œå®ç°äº†æ ‡å‡† FIM (Fill-In-the-Middle) æ¨¡å‹çš„ä»£ç è¡¥å…¨æµç¨‹ã€‚</p>
<p><strong>å½“å‰ç‰ˆæœ¬å†…ç½® Qwen2.5-Coder-32B-Instruct æ¨¡å‹</strong>ï¼Œé€šè¿‡ç»Ÿä¸€çš„ FIM API ç«¯ç‚¹æä¾›ä»£ç è¡¥å…¨æœåŠ¡ã€‚</p>
<h4 data-id="heading-3">æ ¸å¿ƒç‰¹æ€§</h4>
<ul>
<li><strong>Qwen2.5-Coder-32B-Instruct</strong>ï¼šå†…ç½® 320 äº¿å‚æ•°æŒ‡ä»¤å¾®è°ƒæ¨¡å‹ï¼Œæ”¯æŒå¤šè¯­è¨€ä»£ç è¡¥å…¨</li>
<li><strong>æ™ºèƒ½ Diff ç®—æ³•</strong>ï¼šè‡ªåŠ¨è¯†åˆ«æ’å…¥/æ›¿æ¢æ¨¡å¼ï¼Œé¿å…é‡å¤å†…å®¹</li>
<li><strong>å¤šå±‚è¿‡æ»¤å™¨</strong>ï¼šå­—ç¬¦çº§ã€è¡Œçº§ã€åå¤„ç†ä¸‰é‡è¿‡æ»¤æœºåˆ¶</li>
<li><strong>è‡ªé€‚åº”å•/å¤šè¡Œ</strong>ï¼šæ ¹æ®ä¸Šä¸‹æ–‡è‡ªåŠ¨åˆ¤æ–­ç”Ÿæˆå•è¡Œæˆ–å¤šè¡Œè¡¥å…¨</li>
</ul>
<h4 data-id="heading-4">æŠ€æœ¯è¯´æ˜</h4>
<ul>
<li><strong>åç«¯æ¨¡å‹</strong>: Qwen/Qwen2.5-Coder-32B-Instructï¼ˆå†…ç½®ï¼‰</li>
<li><strong>API æ¨¡å‹å</strong>: <code>"FIM"</code>ï¼ˆç»Ÿä¸€æ¥å£ï¼‰</li>
<li><strong>FIM æ¨¡æ¿</strong>: Qwen æ ‡å‡†æ¨¡æ¿ï¼ˆ<code>&lt;|fim_prefix|&gt;{prefix}&lt;|fim_suffix|&gt;{suffix}&lt;|fim_middle|&gt;</code>ï¼‰</li>
<li><strong>API æ–¹å¼</strong>: éæµå¼ APIï¼Œä¸€æ¬¡æ€§è·å–å®Œæ•´ç»“æœ</li>
</ul>
<h4 data-id="heading-5">æ–‡ä»¶ç»“æ„</h4>
<pre><code class="hljs language-bash" lang="bash">src/hosts/vscode/completion/
â”œâ”€â”€ VvCompletionProvider.ts          <span class="hljs-comment"># ä¸»å…¥å£ï¼Œåè°ƒæ•´ä¸ªè¡¥å…¨æµç¨‹</span>
â”œâ”€â”€ vvCompletionStreamer.ts          <span class="hljs-comment"># API è°ƒç”¨ç®¡ç†å™¨ï¼ˆéæµå¼ï¼‰</span>
â”œâ”€â”€ vvHelperVars.ts                  <span class="hljs-comment"># ä¸Šä¸‹æ–‡è¾…åŠ©å˜é‡ç¼“å­˜</span>
â”œâ”€â”€ vvAutocompleteTemplate.ts        <span class="hljs-comment"># FIM æ¨¡æ¿å®šä¹‰</span>
â”œâ”€â”€ prefiltering.ts                  <span class="hljs-comment"># é¢„è¿‡æ»¤é€»è¾‘</span>
â”œâ”€â”€ multiline.ts                     <span class="hljs-comment"># å•/å¤šè¡Œåˆ†ç±»</span>
â”œâ”€â”€ filters.ts                       <span class="hljs-comment"># åå¤„ç†è¿‡æ»¤å™¨</span>
â”œâ”€â”€ processSingleLineCompletion.ts   <span class="hljs-comment"># å•è¡Œ Diff å¤„ç†</span>
â””â”€â”€ streamFilters/
    â”œâ”€â”€ VvStreamTransformPipeline.ts <span class="hljs-comment"># è¿‡æ»¤å™¨ç®¡é“</span>
    â”œâ”€â”€ charStream.ts                <span class="hljs-comment"># å­—ç¬¦çº§è¿‡æ»¤å™¨</span>
    â””â”€â”€ lineStream.ts                <span class="hljs-comment"># è¡Œçº§è¿‡æ»¤å™¨</span>
</code></pre>
<hr/>
<h3 data-id="heading-6">æ•´ä½“æ¶æ„</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[VSCode InlineCompletionProvider] --&gt; B[VvCompletionProvider]
    B --&gt; C[é¢„è¿‡æ»¤æ£€æŸ¥]
    C --&gt; D[åˆ›å»º HelperVars]
    D --&gt; E[å¤šè¡Œ/å•è¡Œåˆ†ç±»]
    E --&gt; F[é€‰æ‹© FIM æ¨¡æ¿]
    F --&gt; G[VvCompletionStreamer]
    G --&gt; H[OpenAI API è°ƒç”¨]
    H --&gt; I[StreamTransformPipeline]
    I --&gt; J[å­—ç¬¦çº§è¿‡æ»¤]
    J --&gt; K[è¡Œçº§è¿‡æ»¤]
    K --&gt; L[åå¤„ç†è¿‡æ»¤]
    L --&gt; M{å•è¡Œ?}
    M --&gt;|æ˜¯| N[Diff ç®—æ³•å¤„ç†]
    M --&gt;|å¦| O[å¤šè¡Œæ›¿æ¢]
    N --&gt; P[è¿”å› InlineCompletionItem]
    O --&gt; P
</code></pre>
<hr/>
<h3 data-id="heading-7">æ ¸å¿ƒæµç¨‹</h3>
<p>VvCompletionProvider.ts å®ç°äº†å®Œæ•´çš„å…­é˜¶æ®µè¡¥å…¨æµç¨‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">é¢„è¿‡æ»¤ â†’ å¤šè¡Œåˆ†ç±» â†’ æ¨¡æ¿æ¸²æŸ“ â†’ APIè°ƒç”¨ä¸è¿‡æ»¤ â†’ åå¤„ç† â†’ Diffå¤„ç†(å•è¡Œ)
</code></pre>
<h4 data-id="heading-8">é˜¶æ®µ 1: é¢„è¿‡æ»¤</h4>
<p><strong>ä½œç”¨</strong>: å¿«é€Ÿè·³è¿‡ä¸éœ€è¦è¡¥å…¨çš„åœºæ™¯</p>
<p>è·³è¿‡åœºæ™¯ï¼šé…ç½®æ–‡ä»¶ã€æœªå‘½åç©ºæ–‡ä»¶ã€å¤šå…‰æ ‡ã€ç‰¹æ®Šæ–‡ä»¶æ¨¡å¼</p>
<h4 data-id="heading-9">é˜¶æ®µ 2: å¤šè¡Œåˆ†ç±»</h4>
<p><strong>ä½œç”¨</strong>: åˆ¤æ–­åº”ç”Ÿæˆå•è¡Œè¿˜æ˜¯å¤šè¡Œè¡¥å…¨</p>
<p>åˆ¤æ–­é€»è¾‘ä¼˜å…ˆçº§ï¼š</p>
<ol>
<li>Intellisense é€‰ä¸­é¡¹ â†’ å¼ºåˆ¶å•è¡Œ</li>
<li>å•è¡Œæ³¨é‡Šæ£€æµ‹ â†’ å¼ºåˆ¶å•è¡Œ</li>
<li>è¯­è¨€ç‰¹å®šè§„åˆ™</li>
<li>é»˜è®¤ â†’ å…è®¸å¤šè¡Œ</li>
</ol>
<h4 data-id="heading-10">é˜¶æ®µ 3: æ¨¡æ¿æ¸²æŸ“</h4>
<p><strong>ä½œç”¨</strong>: å°†å‰ç¼€/åç¼€æŒ‰ Qwen FIM æ ¼å¼ç»„è£…</p>
<p>æ¨¡æ¿æ ¼å¼ï¼š<code>&lt;|fim_prefix|&gt;{prefix}&lt;|fim_suffix|&gt;{suffix}&lt;|fim_middle|&gt;</code></p>
<h4 data-id="heading-11">é˜¶æ®µ 4: API è°ƒç”¨ä¸è¿‡æ»¤</h4>
<p><strong>ä½œç”¨</strong>: è°ƒç”¨ FIM API å¹¶åº”ç”¨è¿‡æ»¤å™¨</p>
<ul>
<li>ä½¿ç”¨éæµå¼ APIï¼Œä¸€æ¬¡æ€§è·å–å®Œæ•´ç»“æœ</li>
<li>å°†ç»“æœä¼ é€’ç»™è¿‡æ»¤å™¨ç®¡é“å¤„ç†</li>
<li>max_tokens: å•è¡Œ 64ï¼Œå¤šè¡Œ 128</li>
</ul>
<h4 data-id="heading-12">é˜¶æ®µ 5: åå¤„ç†</h4>
<p><strong>ä½œç”¨</strong>: æœ€ç»ˆéªŒè¯è¡¥å…¨è´¨é‡</p>
<p>è¿‡æ»¤è§„åˆ™ï¼š</p>
<ol>
<li>ç©ºç™½è¿‡æ»¤</li>
<li>é‡å¤ä¸Šä¸€è¡Œæ£€æµ‹ï¼ˆLevenshtein è·ç¦» &lt; 10%ï¼‰</li>
<li>æç«¯é‡å¤æ£€æµ‹ï¼ˆ6è¡Œä»¥ä¸Šé‡å¤ï¼‰</li>
<li>å»é™¤é‡å¤ç©ºæ ¼å’Œ Markdown ä»£ç å—</li>
</ol>
<h4 data-id="heading-13">é˜¶æ®µ 6: Diff å¤„ç†ï¼ˆå•è¡Œä¸“ç”¨ï¼‰</h4>
<p><strong>ä½œç”¨</strong>: æ™ºèƒ½åˆ¤æ–­æ’å…¥è¿˜æ˜¯æ›¿æ¢</p>
<ul>
<li>å•è¡Œä½¿ç”¨ Diff ç®—æ³•ç²¾ç¡®å¤„ç†</li>
<li>å¤šè¡Œç›´æ¥æ›¿æ¢åˆ°è¡Œå°¾</li>
</ul>
<hr/>
<h3 data-id="heading-14">Diffç®—æ³•è¯¦è§£</h3>
<h4 data-id="heading-15">æ ¸å¿ƒé—®é¢˜</h4>
<p>FIM æ¨¡å‹å¯èƒ½ä»¥ä¸‰ç§æ–¹å¼ç”Ÿæˆè¡¥å…¨ï¼š</p>
<ol>
<li><strong>çº¯æ’å…¥</strong>: åªç”Ÿæˆæ–°å†…å®¹</li>
<li><strong>é‡å¤åç¼€</strong>: ç”Ÿæˆçš„å†…å®¹åŒ…å«äº†å…‰æ ‡åå·²å­˜åœ¨çš„ä»£ç </li>
<li><strong>éƒ¨åˆ†é‡å¤</strong>: ç”Ÿæˆå†…å®¹ä¸å…‰æ ‡åä»£ç éƒ¨åˆ†é‡å </li>
</ol>
<p><strong>ä¸ä½¿ç”¨ Diff çš„åæœ</strong>:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åœºæ™¯ï¼šå…‰æ ‡ä½ç½® |</span>
<span class="hljs-comment">// å½“å‰ä»£ç : console.log("hello")|)</span>
<span class="hljs-comment">// è¡¥å…¨å†…å®¹: .trim())</span>

<span class="hljs-comment">// é”™è¯¯ç»“æœï¼ˆç›´æ¥æ’å…¥ï¼‰:</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"hello"</span>).<span class="hljs-title function_">trim</span>())  <span class="hljs-comment">// å¤šäº†ä¸€ä¸ª )</span>

<span class="hljs-comment">// æ­£ç¡®ç»“æœï¼ˆDiff å¤„ç†ï¼‰:</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"hello"</span>).<span class="hljs-title function_">trim</span>())  <span class="hljs-comment">// æ­£ç¡®</span>
</code></pre>
<h4 data-id="heading-16">Diff å®ç°</h4>
<p>ä½¿ç”¨ <code>diff.diffWords()</code> æ¯”è¾ƒ<strong>å…‰æ ‡åæ–‡æœ¬</strong>å’Œ<strong>è¡¥å…¨æ–‡æœ¬</strong>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">processSingleLineCompletion</span>(<span class="hljs-params">
    lastLineOfCompletionText: <span class="hljs-built_in">string</span>,  <span class="hljs-comment">// è¡¥å…¨çš„æœ€åä¸€è¡Œ</span>
    currentText: <span class="hljs-built_in">string</span>,               <span class="hljs-comment">// å…‰æ ‡ååˆ°è¡Œå°¾çš„å†…å®¹</span>
    cursorPosition: <span class="hljs-built_in">number</span>
</span>): <span class="hljs-title class_">SingleLineCompletionResult</span> | <span class="hljs-literal">undefined</span>
</code></pre>
<h4 data-id="heading-17">Diff æ¨¡å¼åŒ¹é…</h4>
<p><strong>æ¨¡å¼è¡¨ç¤º</strong>: <code>+</code> = æ–°å¢ï¼Œ<code>-</code> = åˆ é™¤ï¼Œ<code>=</code> = ç›¸åŒ</p>
<h5 data-id="heading-18">æ¨¡å¼ 1: <code>[+]</code> - ç®€å•æ’å…¥</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// currentText: ""</span>
<span class="hljs-comment">// completion: "foo()"</span>
<span class="hljs-comment">// â†’ åœ¨å…‰æ ‡ä½ç½®æ’å…¥ï¼Œrange = undefined</span>
</code></pre>
<h5 data-id="heading-19">æ¨¡å¼ 2: <code>[+,=]</code> æˆ– <code>[+,=,+]</code> - é‡å¤åç¼€</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// currentText: "bar()"</span>
<span class="hljs-comment">// completion: "foo.bar()"</span>
<span class="hljs-comment">// â†’ æ›¿æ¢æ•´è¡Œå‰©ä½™éƒ¨åˆ†ï¼Œrange = { start: cursor, end: lineEnd }</span>
</code></pre>
<p><strong>ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-css" lang="css">// ä¹‹å‰: console.<span class="hljs-built_in">log</span>(<span class="hljs-string">"hello"</span>)|)
// completion: <span class="hljs-string">".trim())"</span>
// ç»“æœ: console.<span class="hljs-built_in">log</span>(<span class="hljs-string">"hello"</span>).<span class="hljs-built_in">trim</span>())  âœ…
</code></pre>
<h5 data-id="heading-20">æ¨¡å¼ 3: <code>[+,-]</code> æˆ– <code>[-,+]</code> - è¡Œä¸­æ’å…¥</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è¡Œä¸­é—´æ’å…¥ï¼Œä¸æ›¿æ¢åç»­å†…å®¹</span>
<span class="hljs-comment">// range = undefined</span>
</code></pre>
<h5 data-id="heading-21">æ¨¡å¼ 4: å…¶ä»– - é™çº§å¤„ç†</h5>
<p>ä½¿ç”¨ç¬¬ä¸€ä¸ªæ–°å¢éƒ¨åˆ†ï¼Œæˆ–ä½œä¸ºç®€å•æ’å…¥å¤„ç†</p>
<h4 data-id="heading-22">Range è¯­ä¹‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// range = undefined</span>
<span class="hljs-comment">// â†’ VSCode åœ¨ position å¤„æ’å…¥æ–‡æœ¬</span>

<span class="hljs-comment">// range = { start: 10, end: 20 }</span>
<span class="hljs-comment">// â†’ VSCode åˆ é™¤ [10, 20)ï¼Œç„¶åæ’å…¥æ–‡æœ¬</span>
</code></pre>
<h4 data-id="heading-23">å¤šè¡Œè¡¥å…¨å¤„ç†</h4>
<p>å¤šè¡Œè¡¥å…¨ä¸ä½¿ç”¨ Diffï¼Œç›´æ¥æ›¿æ¢åˆ°è¡Œå°¾ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript">range = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Range</span>(startPos, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">lineAt</span>(startPos).<span class="hljs-property">range</span>.<span class="hljs-property">end</span>)
</code></pre>
<p><strong>åŸå› </strong>:</p>
<ul>
<li>å¤šè¡Œ Diff è®¡ç®—æˆæœ¬é«˜</li>
<li>å¤šè¡Œå†…å®¹é‡å¤æ¦‚ç‡ä½</li>
<li>ç”¨æˆ·æœŸæœ›å¤šè¡Œè¡¥å…¨"æ¥ç®¡"å‰©ä½™å†…å®¹</li>
</ul>
<hr/>
<h3 data-id="heading-24">è¿‡æ»¤å™¨ç³»ç»Ÿ</h3>
<h4 data-id="heading-25">ä¸‰å±‚è¿‡æ»¤æ¶æ„</h4>
<pre><code class="hljs language-scss" lang="scss">LLM å®Œæ•´è¾“å‡ºï¼ˆéæµå¼ï¼‰
    â†“
å­—ç¬¦çº§è¿‡æ»¤ (charStream.ts)
    â†“
è¡Œçº§è¿‡æ»¤ (lineStream.ts)
    â†“
åå¤„ç†è¿‡æ»¤ (filters.ts)
    â†“
æœ€ç»ˆè¡¥å…¨
</code></pre>
<p><strong>è¯´æ˜</strong>: è™½ç„¶ä½¿ç”¨ <code>async generator</code> è¯­æ³•ï¼Œä½†å®é™…å¤„ç†çš„æ˜¯<strong>å®Œæ•´æ–‡æœ¬</strong>è€Œéå®æ—¶æµå¼æ•°æ®ã€‚</p>
<h4 data-id="heading-26">å­—ç¬¦çº§è¿‡æ»¤å™¨</h4>
<p><strong>ä½ç½®</strong>: streamFilters/charStream.ts</p>
<h5 data-id="heading-27">1. <code>stopAtStopTokens</code> - Stop Token æ£€æµ‹</h5>
<p>ç»´æŠ¤æ»‘åŠ¨çª—å£ç¼“å†²åŒºï¼Œä¸€æ—¦åŒ¹é…ä»»ä½• stop tokenï¼Œç«‹å³åœæ­¢ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// stopTokens: ["&lt;|endoftext|&gt;", "&lt;fim_prefix&gt;"]</span>
<span class="hljs-comment">// LLM è¾“å‡º: "function foo() {&lt;|endoftext|&gt;..."</span>
<span class="hljs-comment">// yield: "function foo() {"  âœ…</span>
</code></pre>
<h5 data-id="heading-28">2. <code>stopAtStartOf</code> - åç¼€é‡å¤æ£€æµ‹</h5>
<p>æ£€æŸ¥å·²ç”Ÿæˆå†…å®¹æ˜¯å¦å¼€å§‹é‡å¤ suffixï¼Œé˜²æ­¢æ¨¡å‹ç”Ÿæˆ "è¡¥å…¨ + suffix + æ›´å¤šå†…å®¹"ã€‚</p>
<h5 data-id="heading-29">3. <code>noFirstCharNewline</code> - é¦–å­—ç¬¦æ¢è¡Œè¿‡æ»¤</h5>
<p>å¦‚æœç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯æ¢è¡Œç¬¦ï¼Œè·³è¿‡å®ƒï¼Œé¿å…è¡¥å…¨ä»¥ç©ºè¡Œå¼€å§‹ã€‚</p>
<h4 data-id="heading-30">è¡Œçº§è¿‡æ»¤å™¨</h4>
<p><strong>ä½ç½®</strong>: streamFilters/lineStream.ts</p>
<h5 data-id="heading-31">1. <code>streamLines</code> / <code>streamWithNewLines</code> - è¡Œæµè½¬æ¢</h5>
<p>å­—ç¬¦æµ â†” è¡Œæµï¼Œå…è®¸è¡Œçº§è¿‡æ»¤å™¨æ“ä½œå®Œæ•´çš„è¡Œã€‚</p>
<h5 data-id="heading-32">2. <code>stopAtLines</code> - è¡Œæ•°é™åˆ¶</h5>
<p>è¶…è¿‡ 50 è¡Œè‡ªåŠ¨åœæ­¢ï¼Œé˜²æ­¢æ— é™ç”Ÿæˆã€‚</p>
<h5 data-id="heading-33">3. <code>stopAtRepeatingLines</code> - é‡å¤è¡Œæ£€æµ‹</h5>
<p>ç»´æŠ¤æœ€è¿‘ 10 è¡Œçš„å“ˆå¸Œè¡¨ï¼Œå¦‚æœæŸè¡Œé‡å¤å‡ºç° 3 æ¬¡ï¼Œåœæ­¢ç”Ÿæˆã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ¨¡å‹é™·å…¥å¾ªç¯</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">foo</span>():
    <span class="hljs-keyword">pass</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">foo</span>():
    <span class="hljs-keyword">pass</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">foo</span>():  <span class="hljs-comment"># â† ç¬¬ 3 æ¬¡é‡å¤ï¼Œåœæ­¢</span>
</code></pre>
<h5 data-id="heading-34">4. <code>stopAtSimilarLine</code> - ç›¸ä¼¼è¡Œæ£€æµ‹</h5>
<p>ä¸å…‰æ ‡ä¸‹ä¸€è¡Œæ¯”è¾ƒï¼Œä½¿ç”¨ Levenshtein è·ç¦»åˆ¤æ–­ç›¸ä¼¼åº¦ã€‚å¦‚æœç”Ÿæˆå†…å®¹ä¸ä¸‹ä¸€è¡Œç›¸ä¼¼åº¦ &gt; 80%ï¼Œåœæ­¢ã€‚</p>
<p><strong>ç”¨é€”</strong>: é˜²æ­¢é‡å¤ç”Ÿæˆå·²å­˜åœ¨çš„ä»£ç ã€‚</p>
<h5 data-id="heading-35">5. <code>avoidEmptyComments</code> - ç©ºæ³¨é‡Šè¿‡æ»¤</h5>
<p>å¦‚æœæŸè¡ŒåªåŒ…å«æ³¨é‡Šç¬¦å·ï¼ˆå¦‚ <code>//</code> æˆ– <code>#</code>ï¼‰ä¸”æ— å®é™…å†…å®¹ï¼Œè·³è¿‡è¯¥è¡Œã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¨¡å‹è¾“å‡º</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">//</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">42</span>
}

<span class="hljs-comment">// è¿‡æ»¤å</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">42</span>
}
</code></pre>
<h5 data-id="heading-36">6. <code>noDoubleNewLine</code> - åŒæ¢è¡Œè¿‡æ»¤</h5>
<p>é˜²æ­¢è¿ç»­ç©ºè¡Œã€‚</p>
<h4 data-id="heading-37">åå¤„ç†è¿‡æ»¤å™¨</h4>
<p><strong>ä½ç½®</strong>: filters.ts</p>
<h5 data-id="heading-38">1. <code>rewritesLineAbove</code> - é‡å¤ä¸Šä¸€è¡Œæ£€æµ‹</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">lineIsRepeated</span>(<span class="hljs-params">a: <span class="hljs-built_in">string</span>, b: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">boolean</span> {
    <span class="hljs-keyword">if</span> (a.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">4</span> || b.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">4</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>

    <span class="hljs-keyword">const</span> distance = levenshtein.<span class="hljs-title function_">get</span>(a.<span class="hljs-title function_">trim</span>(), b.<span class="hljs-title function_">trim</span>())
    <span class="hljs-keyword">return</span> distance / b.<span class="hljs-title function_">trim</span>().<span class="hljs-property">length</span> &lt; <span class="hljs-number">0.1</span>  <span class="hljs-comment">// ç›¸ä¼¼åº¦ &gt; 90%</span>
}
</code></pre>
<p><strong>ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸Šä¸€è¡Œ: const x = 42</span>
<span class="hljs-comment">// è¡¥å…¨: const x = 42</span>
<span class="hljs-comment">// â†’ è¢«æ‹’ç» âœ…</span>
</code></pre>
<h5 data-id="heading-39">2. <code>isExtremeRepetition</code> - æç«¯é‡å¤æ£€æµ‹</h5>
<p>æ£€æµ‹ 6 è¡Œä»¥ä¸Šçš„é‡å¤æ¨¡å¼ï¼Œä½¿ç”¨æœ€é•¿å…¬å…±å­åºåˆ—ï¼ˆLCSï¼‰ç®—æ³•ã€‚</p>
<p><strong>ç”¨é€”</strong>: æ£€æµ‹æ¨¡å‹é™·å…¥å¾ªç¯ç”Ÿæˆç›¸åŒæ¨¡å¼ã€‚</p>
<h5 data-id="heading-40">3. <code>removeBackticks</code> - Markdown ä»£ç å—æ¸…ç†</h5>
<p>ç§»é™¤é¦–è¡Œ <code>```language</code> å’Œæœ«è¡Œ <code>```</code>ã€‚</p>
<p><strong>åŸå› </strong>: æŸäº›æ¨¡å‹è¢«è®­ç»ƒæ—¶åŒ…å« Markdown æ ¼å¼ï¼Œå¯èƒ½æ— æ„ä¸­ç”Ÿæˆä»£ç å—æ ‡è®°ã€‚</p>
<p><strong>&gt; æºç åœ°å€ï¼Œæ¬¢è¿å…±å»ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvvcode-top%2Fvv-code" target="_blank" title="https://github.com/vvcode-top/vv-code" ref="nofollow noopener noreferrer">github.com/vvcode-top/â€¦</a></strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Next.js CVE-2025-29927æ¼æ´è‡ªåŠ¨åŒ–æ‰«æå™¨]]></title>    <link>https://juejin.cn/post/7589907831198597146</link>    <guid>https://juejin.cn/post/7589907831198597146</guid>    <pubDate>2026-01-01T02:32:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589907831198597146" data-draft-id="7589839019717574706" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Next.js CVE-2025-29927æ¼æ´è‡ªåŠ¨åŒ–æ‰«æå™¨"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC"/> <meta itemprop="datePublished" content="2026-01-01T02:32:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="qife122"/> <meta itemprop="url" content="https://juejin.cn/user/1743174852185579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Next.js CVE-2025-29927æ¼æ´è‡ªåŠ¨åŒ–æ‰«æå™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1743174852185579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    qife122
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T02:32:33.000Z" title="Thu Jan 01 2026 02:32:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Next.js CVE-2025-29927æ¼æ´è‡ªåŠ¨åŒ–æ‰«æå™¨</h2>
<h3 data-id="heading-1">é¡¹ç›®ç®€ä»‹</h3>
<p>æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªä¸“ä¸ºå®‰å…¨ç ”ç©¶äººå‘˜è®¾è®¡çš„è‡ªåŠ¨åŒ–æ‰«æå·¥å…·ã€‚å®ƒé€šè¿‡åˆ†æç›®æ ‡ç½‘ç«™çš„HTTPå“åº”å¤´åŠç‰¹å®šç«¯ç‚¹ï¼Œæ™ºèƒ½è¯†åˆ«å…¶æ˜¯å¦ä½¿ç”¨Next.jsæ¡†æ¶ï¼Œå¹¶ç²¾ç¡®åˆ¤æ–­å…¶ç‰ˆæœ¬æ˜¯å¦å—åˆ°CVE-2025-29927æ¼æ´çš„å½±å“ã€‚å·¥å…·æ”¯æŒä»å‘½ä»¤è¡Œå‚æ•°æˆ–æ–‡ä»¶æ‰¹é‡è¯»å–URLï¼Œå¹¶å¯é€‰åœ°è¿›è¡Œæ¼æ´åˆ©ç”¨å°è¯•ï¼Œæ‰€æœ‰æ“ä½œå‡å¯é€šè¿‡ä¸°å¯Œçš„å‘½ä»¤è¡Œé€‰é¡¹è¿›è¡Œç²¾ç»†æ§åˆ¶ã€‚</p>
<h3 data-id="heading-2">åŠŸèƒ½ç‰¹æ€§</h3>
<ul>
<li><strong>Next.jsæ¡†æ¶è¯†åˆ«</strong>ï¼šè‡ªåŠ¨æ£€æµ‹ç›®æ ‡ç½‘ç«™æ˜¯å¦åŸºäºNext.jsæ„å»ºã€‚</li>
<li><strong>æ¼æ´ç‰ˆæœ¬æ£€æµ‹</strong>ï¼šæ ¸å¯¹Next.jsç‰ˆæœ¬ï¼Œå‡†ç¡®åˆ¤æ–­å…¶æ˜¯å¦å±äºå·²ä¿®å¤çš„å®‰å…¨ç‰ˆæœ¬ï¼ˆå¦‚15.2.3, 14.2.25, 13.5.9, 12.3.5ï¼‰ã€‚</li>
<li><strong>è‡ªåŠ¨åŒ–æ¼æ´åˆ©ç”¨å°è¯•</strong>ï¼šåœ¨ç”¨æˆ·æ˜ç¡®æˆæƒä¸‹ï¼Œå¯ç»“åˆè‡ªå®šä¹‰å­—å…¸æ–‡ä»¶å¯¹æ½œåœ¨æ¼æ´è¿›è¡Œæ¢æµ‹ã€‚</li>
<li><strong>çµæ´»çš„è¾“å…¥æº</strong>ï¼šæ”¯æŒé€šè¿‡å‘½ä»¤è¡Œç›´æ¥è¾“å…¥URLåˆ—è¡¨ï¼Œæˆ–ä»æ–‡æœ¬æ–‡ä»¶ä¸­æŒ‰è¡Œè¯»å–URLã€‚</li>
<li><strong>å¯å®šåˆ¶çš„æµè§ˆå™¨ç¯å¢ƒ</strong>ï¼šå…è®¸æŒ‡å®šè‡ªå®šä¹‰çš„Chromium/Chromeå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼Œå¢å¼ºç¯å¢ƒå…¼å®¹æ€§ã€‚</li>
<li><strong>å¤šé‡è¾“å‡ºé€‰é¡¹</strong>ï¼šæ”¯æŒåœ¨æ§åˆ¶å°è¾“å‡ºè¯¦ç»†çš„æ‰«ææ—¥å¿—ï¼ˆVerboseæ¨¡å¼ï¼‰æˆ–ç®€æ´çš„JSONæ ¼å¼ç»“æœï¼Œå¹¶å¯å°†ç»“æœä¿å­˜è‡³æŒ‡å®šæ–‡ä»¶ã€‚</li>
<li><strong>å¯é€‰çš„è¯·æ±‚æ§åˆ¶</strong>ï¼šæä¾›è·Ÿéšé‡å®šå‘ã€ä½¿ç”¨ç‰¹å®šè¯·æ±‚å¤´ç­‰é«˜çº§é€‰é¡¹ï¼Œä»¥é€‚åº”ä¸åŒçš„æ‰«æåœºæ™¯ã€‚</li>
</ul>
<h3 data-id="heading-3">å®‰è£…æŒ‡å—</h3>
<ol>
<li><strong>ç¯å¢ƒå‡†å¤‡</strong>ï¼šç¡®ä¿ç³»ç»Ÿä¸­å·²å®‰è£…Node.jsè¿è¡Œç¯å¢ƒã€‚</li>
<li><strong>å…‹éš†é¡¹ç›®</strong>ï¼šä½¿ç”¨Gitå°†é¡¹ç›®ä»£ç å…‹éš†åˆ°æœ¬åœ°ã€‚
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/ferpalma21/Automated-Next.js-Security-Scanner-for-CVE-2025-29927.git
<span class="hljs-built_in">cd</span> Automated-Next.js-Security-Scanner-for-CVE-2025-29927.git
</code></pre>
</li>
<li><strong>å®‰è£…ä¾èµ–</strong>ï¼šè¿›å…¥é¡¹ç›®ç›®å½•ï¼Œä½¿ç”¨npmå®‰è£…æ‰€éœ€ä¾èµ–åŒ…ï¼ˆåŒ…æ‹¬<code>puppeteer</code>å’Œ<code>yargs</code>ï¼‰ã€‚
<pre><code class="hljs language-bash" lang="bash">npm install
</code></pre>
</li>
<li><strong>æµè§ˆå™¨é©±åŠ¨</strong>ï¼š<code>puppeteer</code>é»˜è®¤ä¼šä¸‹è½½Chromiumã€‚å¦‚æœä½ çš„ç³»ç»Ÿä¸­å·²æœ‰ç‰¹å®šè·¯å¾„çš„Chromium/Chromeï¼ˆä¾‹å¦‚<code>/snap/bin/chromium</code>ï¼‰ï¼Œå¯ä»¥é€šè¿‡<code>-c</code>å‚æ•°æŒ‡å®šï¼Œä»¥é¿å…é‡å¤ä¸‹è½½ã€‚</li>
</ol>
<h3 data-id="heading-4">ä½¿ç”¨è¯´æ˜</h3>
<p>å·¥å…·é€šè¿‡å‘½ä»¤è¡Œå‚æ•°è¿›è¡Œé…ç½®å’Œè°ƒç”¨ã€‚</p>
<h4 data-id="heading-5">åŸºç¡€æ‰«æå‘½ä»¤</h4>
<p>æ‰«æå•ä¸ªç½‘ç«™ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">node index.js -u <span class="hljs-string">"https://example.com"</span>
</code></pre>
<p>ä»æ–‡ä»¶æ‰¹é‡æ‰«æURLï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">node index.js -f urls.txt
</code></pre>
<h4 data-id="heading-6">å¸¸ç”¨å‚æ•°ç»„åˆç¤ºä¾‹</h4>
<p>å¯ç”¨è¯¦ç»†è¾“å‡ºæ¨¡å¼ï¼Œä¾¿äºè§‚å¯Ÿæ‰«æè¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">node index.js -u <span class="hljs-string">"https://example.com"</span> -v
</code></pre>
<p>æ‰«æå¹¶å°†æ£€æµ‹åˆ°çš„æ˜“å—æ”»å‡»ç«™ç‚¹ä¿å­˜åˆ°ç»“æœæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">node index.js -f targets.txt -o vulnerable_sites.json
</code></pre>
<p>å°è¯•åˆ©ç”¨æ¼æ´ï¼ˆè°¨æ…ä½¿ç”¨ï¼Œè¯·ç¡®ä¿æ‹¥æœ‰æµ‹è¯•æˆæƒï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">node index.js -u <span class="hljs-string">"https://target-site.com"</span> -a -w paths_wordlist.txt
</code></pre>
<p>æŒ‡å®šè‡ªå®šä¹‰æµè§ˆå™¨è·¯å¾„å¹¶å¯ç”¨æ— å¤´æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">node index.js -u <span class="hljs-string">"https://example.com"</span> -c <span class="hljs-string">"/usr/bin/google-chrome-stable"</span> -t
</code></pre>
<h4 data-id="heading-7">å‘½ä»¤è¡Œå‚æ•°é€ŸæŸ¥è¡¨</h4>

































































<table><thead><tr><th align="left">çŸ­å‚æ•°</th><th align="left">é•¿å‚æ•°</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>-u</code></td><td align="left"><code>--urls</code></td><td align="left">å¾…æ‰«æçš„URLåˆ—è¡¨ï¼Œç”¨ç©ºæ ¼æˆ–é€—å·åˆ†éš”ã€‚</td></tr><tr><td align="left"><code>-f</code></td><td align="left"><code>--file</code></td><td align="left">åŒ…å«URLåˆ—è¡¨çš„æ–‡ä»¶è·¯å¾„ï¼Œæ¯è¡Œä¸€ä¸ªURLã€‚</td></tr><tr><td align="left"><code>-c</code></td><td align="left"><code>--chrome</code></td><td align="left">Chromium/Chromeå¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼ˆé»˜è®¤ï¼š<code>/snap/bin/chromium</code>ï¼‰ã€‚</td></tr><tr><td align="left"><code>-o</code></td><td align="left"><code>--output</code></td><td align="left">ç”¨äºä¿å­˜æ¼æ´æ‰«æç»“æœçš„æ–‡ä»¶è·¯å¾„ã€‚</td></tr><tr><td align="left"><code>-v</code></td><td align="left"><code>--verbose</code></td><td align="left">å¯ç”¨è¯¦ç»†æ—¥å¿—è¾“å‡ºæ¨¡å¼ã€‚</td></tr><tr><td align="left"><code>-r</code></td><td align="left"><code>--redirect</code></td><td align="left">è·ŸéšHTTPé‡å®šå‘ï¼ˆå¯èƒ½å¯¼è‡´è¯¯æŠ¥ï¼‰ã€‚</td></tr><tr><td align="left"><code>-a</code></td><td align="left"><code>--attack</code></td><td align="left">å°è¯•å¯¹å‘ç°çš„æ½œåœ¨æ¼æ´è¿›è¡Œåˆ©ç”¨æµ‹è¯•ã€‚</td></tr><tr><td align="left"><code>-w</code></td><td align="left"><code>--wordlist</code></td><td align="left">ç”¨äºæ¼æ´åˆ©ç”¨å°è¯•çš„è·¯å¾„å­—å…¸æ–‡ä»¶ã€‚</td></tr><tr><td align="left"><code>-t</code></td><td align="left"><code>--headless</code></td><td align="left">ä»¥æ— å¤´æ¨¡å¼å¯åŠ¨Puppeteeræµè§ˆå™¨ã€‚</td></tr><tr><td align="left"><code>-x</code></td><td align="left"><code>--headers</code></td><td align="left">æµ‹è¯•å¤±è´¥æ—¶ï¼Œå°è¯•ä½¿ç”¨å¤‡ç”¨è¯·æ±‚å¤´æ ¼å¼ã€‚</td></tr><tr><td align="left"><code>-h</code></td><td align="left"><code>--help</code></td><td align="left">æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ã€‚</td></tr></tbody></table>
<h3 data-id="heading-8">æ ¸å¿ƒä»£ç </h3>
<p>ä»¥ä¸‹æ˜¯é¡¹ç›®ä¸­çš„å…³é”®ä»£ç ç‰‡æ®µï¼Œå±•ç¤ºäº†å‚æ•°è§£æã€æ—¥å¿—è®°å½•å’Œæ ¸å¿ƒæ£€æµ‹é€»è¾‘ã€‚</p>
<h4 data-id="heading-9">1. å‘½ä»¤è¡Œå‚æ•°é…ç½®ä¸è§£æ</h4>
<p>æ­¤éƒ¨åˆ†ä»£ç ä½¿ç”¨<code>yargs</code>åº“å®šä¹‰å’Œè§£ææ‰€æœ‰å‘½ä»¤è¡Œé€‰é¡¹ï¼Œå¹¶è®¾ç½®é»˜è®¤çš„URLåˆ—è¡¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> puppeteer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'puppeteer'</span>);
<span class="hljs-keyword">const</span> yargs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'yargs'</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-keyword">const</span> argv = yargs
  .<span class="hljs-title function_">option</span>(<span class="hljs-string">'u'</span>, {
    <span class="hljs-attr">alias</span>: <span class="hljs-string">'urls'</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">'List of URLs separated by space or comma'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>
  })
  .<span class="hljs-title function_">option</span>(<span class="hljs-string">'f'</span>, {
    <span class="hljs-attr">alias</span>: <span class="hljs-string">'file'</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">'A file with URLs, one for each line'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>
  })
  .<span class="hljs-title function_">option</span>(<span class="hljs-string">'c'</span>, {
    <span class="hljs-attr">alias</span>: <span class="hljs-string">'chrome'</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">'Chromium Path'</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-string">'/snap/bin/chromium'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>
  })
  .<span class="hljs-title function_">option</span>(<span class="hljs-string">'o'</span>, {
    <span class="hljs-attr">alias</span>: <span class="hljs-string">'output'</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">'Output file of vulnerable sites'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>
  })
  .<span class="hljs-title function_">option</span>(<span class="hljs-string">'v'</span>, {
    <span class="hljs-attr">alias</span>: <span class="hljs-string">'verbose'</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">'A small description of the process'</span>
  })
  .<span class="hljs-title function_">option</span>(<span class="hljs-string">'r'</span>, {
    <span class="hljs-attr">alias</span>: <span class="hljs-string">'redirect'</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">'Follow redirect (not recommended might lead to false positives)'</span>
  })
  .<span class="hljs-title function_">option</span>(<span class="hljs-string">'a'</span>, {
    <span class="hljs-attr">alias</span>: <span class="hljs-string">'attack'</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">'It will try to exploit the vulnerability'</span>
  })
  .<span class="hljs-title function_">option</span>(<span class="hljs-string">'w'</span>, {
    <span class="hljs-attr">alias</span>: <span class="hljs-string">'wordlist'</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">'A wordlist of paths'</span>
  })
  .<span class="hljs-title function_">option</span>(<span class="hljs-string">'t'</span>, {
    <span class="hljs-attr">alias</span>: <span class="hljs-string">'headless'</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">'If the t flag or headless flag is set, it will launch a headless puppeteer.'</span>,
  })
  .<span class="hljs-title function_">option</span>(<span class="hljs-string">'x'</span>, {
    <span class="hljs-attr">alias</span>: <span class="hljs-string">'headers'</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">'It will try with middleware:middleware:middleware:middleware:middleware first; in case it fails. It will retry with src/middleware:src/middleware:src/middleware:src/middleware:src/middleware'</span>
  })
  .<span class="hljs-title function_">help</span>(<span class="hljs-string">'help'</span>).<span class="hljs-title function_">alias</span>(<span class="hljs-string">'h'</span>, <span class="hljs-string">'help'</span>).<span class="hljs-property">argv</span>;

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">WEBSITES</span> = argv.<span class="hljs-property">u</span> ? argv.<span class="hljs-property">u</span>.<span class="hljs-title function_">split</span>(<span class="hljs-regexp">/[\s,]+/</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> url.<span class="hljs-title function_">trim</span>()) : argv.<span class="hljs-property">f</span> ? fs.<span class="hljs-title function_">readFileSync</span>(argv.<span class="hljs-property">f</span>, <span class="hljs-string">'utf8'</span>).<span class="hljs-title function_">split</span>(<span class="hljs-string">'\n'</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> url.<span class="hljs-title function_">trim</span>()).<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>) : [
  <span class="hljs-string">'https://www.boxeurdesrues.com'</span>, <span class="hljs-string">'https://www.sportsshoes.com/'</span>,
];
</code></pre>
<h4 data-id="heading-10">2. æ—¥å¿—è®°å½•å‡½æ•°</h4>
<p>ä¸€ä¸ªæ¡ä»¶å¼æ—¥å¿—å‡½æ•°ï¼Œä»…åœ¨å¯ç”¨äº†è¯¦ç»†è¾“å‡ºï¼ˆ<code>-v</code>ï¼‰æ—¶ï¼Œå°†å¸¦é¢œè‰²çš„æ¶ˆæ¯æ‰“å°åˆ°æ§åˆ¶å°ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">log</span> = (<span class="hljs-params">message, colorCode=<span class="hljs-string">'\x1b[0m'</span></span>) =&gt; {
  <span class="hljs-keyword">if</span> (argv.<span class="hljs-property">v</span>) <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${colorCode}</span><span class="hljs-subst">${message}</span>\x1b[0m`</span>);
};
</code></pre>
<h4 data-id="heading-11">3. æ¼æ´ä¿®å¤ç‰ˆæœ¬å®šä¹‰</h4>
<p>ä¸€ä¸ªå¸¸é‡æ•°ç»„ï¼Œåˆ—å‡ºäº†é’ˆå¯¹CVE-2025-29927å·²ä¿®å¤çš„å®‰å…¨ç‰ˆæœ¬å·ï¼Œç”¨äºä¸æ£€æµ‹åˆ°çš„ç‰ˆæœ¬è¿›è¡Œæ¯”å¯¹ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">VERSIONS_PATCHED</span> = [<span class="hljs-string">'15.2.3'</span>, <span class="hljs-string">'14.2.25'</span>, <span class="hljs-string">'13.5.9'</span>, <span class="hljs-string">'12.3.5'</span>];
</code></pre>
<p>6HFtX5dABrKlqXeO5PUv/9hUQdIGzBuLffwHXrPCx7A=</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦è§£æSalesforce Apexçš„Governance Limitï¼šSOQL 50,000æ¡è®°å½•çš„äº‹åŠ¡çº§é™åˆ¶]]></title>    <link>https://juejin.cn/post/7589903499599118390</link>    <guid>https://juejin.cn/post/7589903499599118390</guid>    <pubDate>2026-01-01T02:50:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589903499599118390" data-draft-id="7589903499599069238" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦è§£æSalesforce Apexçš„Governance Limitï¼šSOQL 50,000æ¡è®°å½•çš„äº‹åŠ¡çº§é™åˆ¶"/> <meta itemprop="keywords" content="åç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-01T02:50:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="UrbanJazzerati"/> <meta itemprop="url" content="https://juejin.cn/user/550205947391389"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦è§£æSalesforce Apexçš„Governance Limitï¼šSOQL 50,000æ¡è®°å½•çš„äº‹åŠ¡çº§é™åˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/550205947391389/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    UrbanJazzerati
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T02:50:25.000Z" title="Thu Jan 01 2026 02:50:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><em>ä»ä¸€æ®µçœ‹ä¼¼åˆç†çš„é‡å¤æ•°æ®æ£€æµ‹ä»£ç ï¼ŒèŠé€Governor Limitsçš„â€œèšåˆâ€æœ¬è´¨</em></p>
<h4 data-id="heading-0"><strong>å¼•è¨€</strong></h4>
<p>åœ¨Salesforceå¼€å‘ä¸­ï¼Œ<code>Too many query rows: 50001</code> è¿™ä¸ªé”™è¯¯å‡ ä¹æ¯ä½Apexå¼€å‘è€…éƒ½é‡åˆ°è¿‡ã€‚æˆ‘ä»¬é€šå¸¸çš„ç†è§£æ˜¯ï¼šâ€œå“¦ï¼Œè¿™æ¬¡SOQLæŸ¥è¯¢è¿”å›å¤ªå¤šäº†ï¼Œå¾—åˆ†é¡µæˆ–è€…åŠ æ¡ä»¶ã€‚â€è¿™ä¸ªç†è§£<strong>åªå¯¹äº†ä¸€åŠ</strong>ã€‚ä»Šå¤©ï¼Œæˆ‘æƒ³é€šè¿‡å‰–æä¸€æ®µç¤¾åŒºä¸­å¸¸è§çš„â€œæŸ¥æ‰¾é‡å¤è”ç³»äººâ€çš„ä»£ç ï¼Œæ¥æ­ç¤ºè¿™ä¸ªé™åˆ¶æ›´æœ¬è´¨ã€ä¹Ÿæ›´æ˜“è¢«å¿½è§†çš„ä¸€é¢ï¼š<strong>å®ƒæ˜¯ä¸€ä¸ªäº‹åŠ¡ï¼ˆTransactionï¼‰çº§åˆ«çš„æ€»è¡Œæ•°é™åˆ¶ï¼Œè€Œéå•æ¬¡æŸ¥è¯¢çš„é™åˆ¶</strong>ã€‚è¯¯è§£è¿™ä¸€ç‚¹ï¼Œå¯èƒ½ä¼šè®©ä½ çš„ä»£ç åœ¨æ•°æ®é‡å¢é•¿åï¼Œä»â€œè¿è¡Œè‰¯å¥½â€çªç„¶å˜æˆâ€œå®šæ—¶ç‚¸å¼¹â€ã€‚</p>
<hr/>
<h4 data-id="heading-1"><strong>ä¸€ã€ä¸€æ®µâ€œç¨³å¥â€çš„é‡å¤æ£€æµ‹ä»£ç </strong></h4>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹è¿™æ®µæ—¨åœ¨æŸ¥æ‰¾åŒä¸€å®¢æˆ·ï¼ˆAccountï¼‰ä¸‹æ‹¥æœ‰ç›¸åŒæ‰‹æœºå·ï¼ˆMobilePhoneï¼‰è”ç³»äººçš„ä»£ç ã€‚é€»è¾‘æ¸…æ™°ï¼Œåˆ†æ­¥æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-comment">// æ­¥éª¤1ï¼šèšåˆæŸ¥è¯¢æ‰¾å‡ºé‡å¤çš„(MobilePhone, AccountId)ç»„åˆ</span>
List&lt;AggregateResult&gt; duplicateAggregates = [
    SELECT <span class="hljs-title function_">COUNT</span><span class="hljs-params">(Id)</span> contactCount, MobilePhone, AccountId
    FROM Contact 
    WHERE AccountId != <span class="hljs-literal">null</span> 
        AND Account.RecordType.Name <span class="hljs-title function_">IN</span> <span class="hljs-params">(<span class="hljs-string">'Customer'</span>, <span class="hljs-string">'Prospect'</span>)</span> 
        AND MobilePhone != <span class="hljs-literal">null</span> 
    GROUP BY MobilePhone, AccountId
    HAVING <span class="hljs-title function_">COUNT</span><span class="hljs-params">(Id)</span> &gt; <span class="hljs-number">1</span>
];
<span class="hljs-comment">// å‡è®¾è¿™é‡Œæ‰¾åˆ°äº† 5000 ä¸ªé‡å¤ç»„åˆ</span>
<span class="hljs-comment">// æ­¥éª¤2ï¼šæå–å‡ºæ¶‰åŠåˆ°çš„AccountIdå’ŒMobilePhoneé›†åˆ</span>
Set&lt;Id&gt; accountIds = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;Id&gt;();
Set&lt;String&gt; setMobile = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;String&gt;();
Map&lt;Id, Set&lt;String&gt;&gt; accountMobileMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;Id, Set&lt;String&gt;&gt;();
<span class="hljs-keyword">for</span>(AggregateResult ar : duplicateAggregates) {
    <span class="hljs-type">Id</span> <span class="hljs-variable">accountId</span> <span class="hljs-operator">=</span> (Id)ar.get(<span class="hljs-string">'AccountId'</span>);
    <span class="hljs-type">String</span> <span class="hljs-variable">mobilePhone</span> <span class="hljs-operator">=</span> (String)ar.get(<span class="hljs-string">'MobilePhone'</span>);
    setMobile.add(mobilePhone);
    accountIds.add(accountId);
    <span class="hljs-comment">// ... å¡«å…… accountMobileMap</span>
}
<span class="hljs-comment">// æ­¥éª¤3ï¼šæŸ¥è¯¢æ‰€æœ‰ç›¸å…³çš„Contactè¯¦æƒ…</span>
System.debug(<span class="hljs-string">'ç¬¦åˆæ¡ä»¶çš„Contactæ•°é‡ åˆç­›ï¼š'</span> + 
    [SELECT ID FROM Contact WHERE AccountId in: accountMobileMap.keySet() AND MobilePhone in :setMobile].size()
);<span class="hljs-comment">//27000æ¡æ•°æ®</span>
List&lt;Contact&gt; allContacts = [SELECT ID FROM Contact WHERE AccountId in: accountMobileMap.keySet() AND MobilePhone in :setMobile];<span class="hljs-comment">//æŠ¥é”™ï¼š`Too many query rows: 50001`</span>
</code></pre>
<p><strong>çœ‹èµ·æ¥æ²¡é—®é¢˜ï¼Œå¯¹å—ï¼Ÿ</strong> èšåˆæŸ¥è¯¢å¯èƒ½åªè¿”å›5000è¡Œï¼ˆ<code>duplicateAggregates.size() = 5000</code>ï¼‰ã€‚åç»­æŸ¥è¯¢åŸºäºè¿™5000ä¸ªç»„åˆå»æŸ¥è¯¢å…·ä½“çš„Contactè®°å½•ã€‚</p>
<p>ä½†æ˜¯ï¼Œ<code>System.debug</code> è¾“å‡ºçš„â€œåˆç­›â€æ•°é‡ï¼Œæ‰æ˜¯é—®é¢˜çš„å…³é”®ã€‚å¦‚æœè¿™ä¸ªæ•°å­—æ¥è¿‘ç”šè‡³è¶…è¿‡ <strong>25,000</strong>ï¼Œé‚£ä¹ˆ<code>allContacts</code>è¿™ä¸ªæŸ¥è¯¢å°±ææœ‰å¯èƒ½è§¦å‘<code>Too many query rows: 50001</code>é”™è¯¯ï¼Œå¯¼è‡´æ•´ä¸ªäº‹åŠ¡å›æ»šã€‚</p>
<hr/>
<h4 data-id="heading-2"><strong>äºŒã€æ ¸å¿ƒè¯¯åŒºï¼šä¸æ˜¯â€œå•æ¬¡æŸ¥è¯¢â€ï¼Œè€Œæ˜¯â€œäº‹åŠ¡åˆè®¡â€</strong></h4>
<p>è¿™å°±æ˜¯æœ€å…³é”®çš„è®¤çŸ¥ç‚¹ã€‚Salesforceçš„å®˜æ–¹é™åˆ¶æè¿°æ˜¯ï¼š</p>
<blockquote>
<p><strong>Total number of records retrieved by SOQL queries â€“ 50,000</strong></p>
</blockquote>
<p>è¯·æ³¨æ„è¿™é‡Œçš„ <strong>â€œTotalâ€</strong> å’Œ <strong>â€œSOQL queriesâ€</strong> ï¼ˆå¤æ•°ï¼‰ã€‚è¿™æ„å‘³ç€ï¼Œåœ¨<strong>å•ä¸ªApexäº‹åŠ¡</strong>ï¼ˆä¾‹å¦‚ä¸€æ¬¡Triggeræ‰§è¡Œã€ä¸€ä¸ªæŒ‰é’®ç‚¹å‡»è§¦å‘çš„ApexåŠ¨ä½œã€ä¸€ä¸ªSchedule Jobçš„ä¸€æ¬¡è¿è¡Œï¼‰ä¸­ï¼Œæ‰€æœ‰æ‰§è¡Œè¿‡çš„SOQLæŸ¥è¯¢æ‰€æ£€ç´¢åˆ°çš„è®°å½•è¡Œæ•°<strong>ç´¯åŠ æ€»å’Œ</strong>ä¸èƒ½è¶…è¿‡50,000æ¡ã€‚</p>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼š</p>
<ol>
<li><strong>ç¬¬ä¸€ä¸ªæŸ¥è¯¢</strong>ï¼ˆèšåˆæŸ¥è¯¢ï¼‰ï¼šæ£€ç´¢äº†<code>Contact</code>è¡¨çš„æ‰€æœ‰è®°å½•è¡Œï¼Œç»è¿‡<code>WHERE</code>æ¡ä»¶è¿‡æ»¤ã€<code>GROUP BY</code>åˆ†ç»„åï¼Œæœ€ç»ˆ<strong>è¿”å›åˆ°Apexå†…å­˜ä¸­</strong>çš„æ˜¯èšåˆç»“æœï¼ˆ100è¡Œï¼‰ã€‚ä½†æ˜¯ï¼ŒæœåŠ¡å™¨ç«¯ä¸ºäº†æ‰§è¡Œè¿™ä¸ªåˆ†ç»„ï¼Œå®ƒéœ€è¦<strong>è¯»å–</strong>å¤šå°‘æ¡åŸå§‹çš„Contactè®°å½•å‘¢ï¼Ÿè¿™ä¸ªè¯»å–çš„æ•°é‡ï¼Œå°±è¢«è®¡å…¥50,000æ¡çš„é™é¢ä¸­ã€‚</li>
<li><strong>ç¬¬äºŒä¸ªæŸ¥è¯¢</strong>ï¼ˆ<code>allContacts</code>ï¼‰ï¼šåˆæ£€ç´¢äº†ä¸€æ‰¹Contactè®°å½•ã€‚</li>
<li>è¿™ä¸¤ä¸ªæŸ¥è¯¢æ£€ç´¢çš„è¡Œæ•°ä¹‹å’Œï¼Œå°±æ˜¯äº‹åŠ¡æ¶ˆè€—çš„æ€»æŸ¥è¯¢è¡Œæ•°ã€‚</li>
</ol>
<p><strong>é™·é˜±åœ¨äº</strong>ï¼šå³ä½¿ä½ çš„æ•°æ®åº“æœ‰100ä¸‡ä¸ªContactï¼ŒèšåˆæŸ¥è¯¢æœ€ç»ˆåªè¿”å›100ä¸ªèšåˆè¡Œï¼Œä½†ä¸ºäº†è®¡ç®—è¿™100ä¸ªç»“æœï¼ŒSOQLå¼•æ“å¯èƒ½éœ€è¦æ‰«æï¼ˆå³â€œæ£€ç´¢â€ï¼‰æ•°åä¸‡æ¡åŸå§‹è®°å½•ã€‚è¿™äº›è¢«æ‰«æçš„è®°å½•ï¼Œ<strong>ç»Ÿç»Ÿéƒ½ç®—åœ¨50,000çš„é™åˆ¶å†…</strong>ã€‚</p>
<hr/>
<h4 data-id="heading-3"><strong>ä¸‰ã€é—®é¢˜åˆ†æä¸è§£å†³æ–¹æ¡ˆ</strong></h4>
<p>é’ˆå¯¹è¿™ç§â€œäº‹åŠ¡çº§é™åˆ¶â€é—®é¢˜ï¼Œæˆ‘ä»¬çš„ä¼˜åŒ–æ€è·¯å¿…é¡»ä»â€œå‡å°‘æ•´ä¸ªäº‹åŠ¡ä¸­æ£€ç´¢çš„æ€»è¡Œæ•°â€å’Œâ€œæ”¹å˜æ‰§è¡Œæ¨¡å¼â€å…¥æ‰‹ã€‚</p>
<p><strong>æ–¹æ¡ˆ1ï¼šå°†debug sizeæ³¨é‡Šåˆ°ï¼Œé‡Šæ”¾27000æŸ¥è¯¢è®°å½•çš„ä½¿ç”¨</strong></p>
<p>åŸä»£ç çš„ç¬¬äºŒæ­¥æŸ¥è¯¢ <code>System.debug('ç¬¦åˆæ¡ä»¶çš„Contactæ•°é‡ åˆç­›ï¼š' +      [SELECT ID FROM Contact WHERE AccountId in: accountMobileMap.keySet() AND MobilePhone in :setMobile].size());</code> æ˜¯æ¶ˆè€—äº†æŸ¥è¯¢è®°å½•æ•°çš„å…³é”®ã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸€æ­¥æ³¨é‡Šä»è€Œç¡®ä¿åç»­ä»£ç çš„æ‰§è¡Œã€‚</p>
<p><strong>æ–¹æ¡ˆ2ï¼šåˆ©ç”¨<code>Database.getQueryLocator</code>ä¸æ‰¹å¤„ç†ï¼ˆBatch Apexï¼‰</strong></p>
<p><strong>è¿™æ˜¯å¤„ç†æµ·é‡æ•°æ®ã€çªç ´åŒæ­¥é™åˆ¶çš„ç»ˆææ­¦å™¨ã€‚</strong> å°†æ•´ä¸ªä»»åŠ¡å°è£…æˆä¸€ä¸ªæ‰¹å¤„ç†ç±»ã€‚æ‰¹å¤„ç†æ¡†æ¶ä¼šè‡ªåŠ¨å°†ä»»åŠ¡åˆ†æ‹†æˆå¤šä¸ªç‹¬ç«‹çš„äº‹åŠ¡ï¼ˆæ¯ä¸ªæ‰¹æ¬¡ï¼‰ï¼Œæ¯ä¸ªæ‰¹æ¬¡éƒ½æœ‰è‡ªå·±çš„50,000è¡ŒæŸ¥è¯¢é™é¢ã€‚</p>
<pre><code class="hljs language-java" lang="java">global <span class="hljs-keyword">class</span> <span class="hljs-title class_">FindDuplicateContactsBatch</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Database</span>.Batchable&lt;sObject&gt;, Database.Stateful {
    global Map&lt;String, List&lt;Contact&gt;&gt; duplicateMap;
    
    global <span class="hljs-title function_">FindDuplicateContactsBatch</span><span class="hljs-params">()</span> {
        duplicateMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;String, List&lt;Contact&gt;&gt;();
    }
    
    <span class="hljs-comment">// å¯åŠ¨å™¨æŸ¥è¯¢ï¼šè¿™é‡Œå¯ä»¥æ˜¯ä½ æœ€åˆçš„èšåˆé€»è¾‘ï¼Œæˆ–è€…ç›´æ¥æŸ¥è¯¢æ‰€æœ‰å¾…æ£€æµ‹çš„Contact</span>
    global Database.QueryLocator <span class="hljs-title function_">start</span><span class="hljs-params">(Database.BatchableContext BC)</span> {
        <span class="hljs-comment">// åªæŸ¥è¯¢éœ€è¦çš„å­—æ®µï¼Œå‡å°‘æ•°æ®ä¼ è¾“é‡</span>
        <span class="hljs-keyword">return</span> Database.getQueryLocator(
            <span class="hljs-string">'SELECT Id, AccountId, MobilePhone FROM Contact '</span> +
            <span class="hljs-string">'WHERE AccountId != null AND MobilePhone != null '</span> +
            <span class="hljs-string">'AND Account.RecordType.Name IN ('</span>Customer<span class="hljs-string">', '</span>Prospect<span class="hljs-string">')'</span>
        );
    }
    
    <span class="hljs-comment">// æ‰§è¡Œé€»è¾‘ï¼šåœ¨æ¯ä¸ªæ‰¹æ¬¡ï¼ˆæœ€å¤š200æ¡è®°å½•ï¼‰ä¸­æ‰§è¡Œé‡å¤æ£€æµ‹</span>
    global <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">(Database.BatchableContext BC, List&lt;Contact&gt; scope)</span> {
        <span class="hljs-comment">// åœ¨è¿™ä¸ªscopeå†…éƒ¨è¿›è¡Œé‡å¤æ£€æµ‹é€»è¾‘</span>
        Map&lt;String, List&lt;Contact&gt;&gt; localMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;String, List&lt;Contact&gt;&gt;();
        <span class="hljs-keyword">for</span> (Contact c : scope) {
            <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> c.AccountId + <span class="hljs-string">'|'</span> + c.MobilePhone;
            <span class="hljs-keyword">if</span> (!localMap.containsKey(key)) {
                localMap.put(key, <span class="hljs-keyword">new</span> <span class="hljs-title class_">List</span>&lt;Contact&gt;());
            }
            localMap.get(key).add(c);
        }
        <span class="hljs-comment">// å°†æœ¬æ‰¹æ¬¡å‘ç°çš„é‡å¤é¡¹åˆå¹¶åˆ°å…¨å±€Mapä¸­</span>
        <span class="hljs-keyword">for</span> (String key : localMap.keySet()) {
            <span class="hljs-keyword">if</span> (localMap.get(key).size() &gt; <span class="hljs-number">1</span>) {
                <span class="hljs-keyword">if</span> (!duplicateMap.containsKey(key)) {
                    duplicateMap.put(key, <span class="hljs-keyword">new</span> <span class="hljs-title class_">List</span>&lt;Contact&gt;());
                }
                duplicateMap.get(key).addAll(localMap.get(key));
            }
        }
    }
    
    <span class="hljs-comment">// æ”¶å°¾å·¥ä½œï¼šæ‰€æœ‰æ‰¹æ¬¡å®Œæˆåï¼Œå¤„ç†æœ€ç»ˆç»“æœï¼ˆä¾‹å¦‚ï¼Œå‘é€é€šçŸ¥ã€è®°å½•æ—¥å¿—ï¼‰</span>
    global <span class="hljs-keyword">void</span> <span class="hljs-title function_">finish</span><span class="hljs-params">(Database.BatchableContext BC)</span> {
        System.debug(<span class="hljs-string">'æ€»å…±å‘ç° '</span> + duplicateMap.size() + <span class="hljs-string">' ç»„é‡å¤è”ç³»äººã€‚'</span>);
        <span class="hljs-comment">// è¿™é‡Œå¯ä»¥è°ƒç”¨å…¶ä»–é€»è¾‘æ¥å¤„ç†duplicateMap</span>
    }
}
<span class="hljs-comment">// è°ƒç”¨æ–¹å¼ï¼šId batchInstanceId = Database.executeBatch(new FindDuplicateContactsBatch(), 2000);</span>
</code></pre>
<p><strong>æ–¹æ¡ˆ3ï¼šåˆ©ç”¨åŸºäºIDæ’åºçš„åˆ†é¡µæŸ¥è¯¢ï¼ˆæ—¶é—´æ¢ç©ºé—´ï¼‰</strong><br/>
<strong>æ€è·¯</strong>ï¼šå¦‚æœå•ä¸ªäº‹åŠ¡çš„æŸ¥è¯¢è®°å½•æ•°å°‘äº5wï¼Œä½†æ˜¯åˆæƒ³åˆ†é¡µå»å¤„ç†ï¼Œå¯ä»¥ä½¿ç”¨IDæ’åºçš„åˆ†é¡µæŸ¥è¯¢ã€‚</p>
<pre><code class="hljs language-Java" lang="Java"><span class="hljs-type">Integer</span> <span class="hljs-variable">batchSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">20000</span>; <span class="hljs-comment">// æ¯æ‰¹2ä¸‡æ¡ï¼Œé¢„ç•™å®‰å…¨è¾¹é™…</span>
<span class="hljs-type">Id</span> <span class="hljs-variable">lastContactId</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
<span class="hljs-type">Boolean</span> <span class="hljs-variable">hasMoreRecords</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
<span class="hljs-type">Integer</span> <span class="hljs-variable">totalProcessed</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
Map&lt;String, List&lt;Contact&gt;&gt; accMobileContactMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;String, List&lt;Contact&gt;&gt;();
<span class="hljs-keyword">while</span>(hasMoreRecords) {
    <span class="hljs-type">String</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> <span class="hljs-string">'SELECT Id, AccountId, MobilePhone FROM Contact '</span> +
                   <span class="hljs-string">'WHERE AccountId IN :accountIds AND MobilePhone IN :mobilePhoneList '</span>;
    <span class="hljs-keyword">if</span>(lastContactId != <span class="hljs-literal">null</span>) {
        query += <span class="hljs-string">'AND Id &gt; :lastContactId '</span>; <span class="hljs-comment">// å…³é”®ï¼šåŸºäºIDæ’åºåˆ†é¡µ</span>
    }
    query += <span class="hljs-string">'ORDER BY Id LIMIT :batchSize'</span>;
    
    List&lt;Contact&gt; batch = Database.query(query);
    
    <span class="hljs-keyword">if</span>(batch.isEmpty()) {
        hasMoreRecords = <span class="hljs-literal">false</span>;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å¤„ç†æœ¬æ‰¹æ•°æ®</span>
        <span class="hljs-keyword">for</span>(Contact con : batch) {
            <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> con.AccountId + <span class="hljs-string">'|'</span> + con.MobilePhone;
            <span class="hljs-keyword">if</span>(!accMobileContactMap.containsKey(key)) {
                accMobileContactMap.put(key, <span class="hljs-keyword">new</span> <span class="hljs-title class_">List</span>&lt;Contact&gt;());
            }
            accMobileContactMap.get(key).add(con);
            lastContactId = con.Id; <span class="hljs-comment">// æ›´æ–°æ¸¸æ ‡</span>
        }
        
        totalProcessed += batch.size();
        System.debug(<span class="hljs-string">'å·²å¤„ç† '</span> + totalProcessed + <span class="hljs-string">' æ¡ï¼Œæœ€è¿‘ID: '</span> + lastContactId);
        
        <span class="hljs-comment">// æ‰¹æ¬¡ä¸æ»¡ï¼Œè¯´æ˜å·²åˆ°æœ«å°¾</span>
        <span class="hljs-keyword">if</span>(batch.size() &lt; batchSize) {
            hasMoreRecords = <span class="hljs-literal">false</span>;
        }
    }
}
System.debug(<span class="hljs-string">'æ€»è®¡å¤„ç† '</span> + totalProcessed + <span class="hljs-string">' æ¡ï¼Œæ„å»ºäº† '</span> + accMobileContactMap.size() + <span class="hljs-string">' ä¸ªé”®å€¼å¯¹'</span>);
</code></pre>
<p><strong>æŠ€æœ¯è¦ç‚¹</strong>ï¼š</p>
<ol>
<li><strong><code>ORDER BY Id</code>Â +Â <code>Id &gt; :lastId</code></strong>ï¼šç¡®ä¿åˆ†é¡µä¸é‡å¤ä¸é—æ¼</li>
<li><strong>æ‰¹æ¬¡å¤§å°ï¼ˆbatchSizeï¼‰</strong> ï¼šè®¾ä¸º20000ï¼Œä¸ºäº‹åŠ¡ä¸­å…¶ä»–æŸ¥è¯¢é¢„ç•™ç©ºé—´</li>
<li><strong>æ¸¸æ ‡æœºåˆ¶</strong>ï¼š<code>lastContactId</code>Â è¿½è¸ªå¤„ç†è¿›åº¦</li>
</ol>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šOFFSET LIMITåªèƒ½å¤„ç†å‰2000æ¡æ•°æ®ï¼Œ åŸºäºIDçš„åˆ†é¡µæŸ¥è¯¢æ²¡æœ‰è¿™ä¸ªé™åˆ¶ã€‚
<strong>ä¼˜ç‚¹</strong>ï¼šåŒæ­¥æ‰§è¡Œï¼Œå®æ—¶å“åº”ï¼›å¯å¤„ç†è¾ƒå¤§æ•°æ®é‡ä½†ä»»ä¸å¯è¶…è¿‡5wæ¡ã€‚<br/>
<strong>ç¼ºç‚¹</strong>ï¼šä»£ç å¤æ‚åº¦å¢åŠ ï¼›Heap Sizeé™åˆ¶ã€‚</p>
<hr/>
<h4 data-id="heading-4"><strong>æ€»ç»“ä¸æœ€ä½³å®è·µ</strong></h4>
<ol>
<li><strong>å»ºç«‹â€œæ€»é‡â€æ€ç»´</strong>ï¼šè®¾è®¡ä»£ç æ—¶ï¼Œæ—¶åˆ»ä¼°ç®—æ•´ä¸ªäº‹åŠ¡æµç¨‹å¯èƒ½è§¦å‘çš„SOQLæŸ¥è¯¢æ€»è¡Œæ•°ï¼Œè€Œä¸ä»…ä»…æ˜¯æœ€åä¸€ä¸ªæŸ¥è¯¢çš„ç»“æœé›†å¤§å°ã€‚</li>
<li><strong>ä¼˜å…ˆä½¿ç”¨èšåˆä¸è¿‡æ»¤</strong>ï¼šåœ¨æŸ¥è¯¢å±‚å°½å¯èƒ½å¤šåœ°å®Œæˆæ•°æ®ç­›é€‰å’Œèšåˆï¼Œå‡å°‘è¿”å›åˆ°Apexå±‚çš„æ•°æ®é‡ã€‚</li>
<li><strong>æ‹¥æŠ±å¼‚æ­¥å¤„ç†</strong>ï¼šå¯¹äºæ•°æ®æ¸…æ´—ã€æ‰¹é‡è®¡ç®—ã€å¤æ‚æŠ¥è¡¨ç­‰å¯èƒ½æ¶‰åŠå¤§é‡æ•°æ®çš„æ“ä½œï¼Œ<strong>é¦–é€‰æ‰¹å¤„ç†ï¼ˆBatch Apexï¼‰</strong> æˆ–é˜Ÿåˆ—åŒ–ï¼ˆQueueable Apexï¼‰ã€‚å®ƒä»¬æ˜¯ Salesforce ä¸ºå¤„ç†å¤§è§„æ¨¡æ•°æ®è€Œè®¾è®¡çš„â€œæ­£è§„å†›â€ã€‚</li>
<li><strong>å–„ç”¨é›†åˆä¸æ˜ å°„</strong>ï¼šåœ¨Apexä¸­ï¼Œå¤šä½¿ç”¨<code>Set</code>å’Œ<code>Map</code>æ¥è¿›è¡Œé«˜æ•ˆçš„æ•°æ®å»é‡å’ŒæŸ¥æ‰¾ï¼Œé¿å…åœ¨å¾ªç¯ä¸­æ‰§è¡ŒSOQLæŸ¥è¯¢ï¼ˆé˜²æ­¢è§¦å‘Â <code>Number of SOQL queries: 101</code>Â é™åˆ¶ï¼‰ã€‚</li>
<li><strong>ç›‘æ§ä¸æ—¥å¿—</strong>ï¼šåœ¨å…³é”®ä½ç½®æ·»åŠ <code>System.debug</code>ï¼Œè¾“å‡ºä¸­é—´ç»“æœçš„æ•°é‡ï¼ˆæ­£å¦‚ç”¨æˆ·ä»£ç ä¸­æ‰€åšçš„é‚£æ ·ï¼‰ï¼Œè¿™å¯¹äºé¢„åˆ¤æ€§èƒ½ç“¶é¢ˆå’ŒLimitä½¿ç”¨æƒ…å†µè‡³å…³é‡è¦ã€‚</li>
</ol>
<p>å¸Œæœ›è¿™ç¯‡åˆ†æèƒ½å¸®åŠ©ä½ çœŸæ­£ç†è§£SOQL 50,000æ¡é™åˆ¶çš„æœ¬è´¨ã€‚åœ¨Salesforceçš„å¤šç§Ÿæˆ·ç¯å¢ƒä¸‹ï¼Œç†è§£å¹¶å¦¥å–„å¤„ç†Governor Limitsï¼Œæ˜¯ç¼–å†™å¥å£®ã€å¯æ‰©å±•Apexä»£ç çš„åŸºçŸ³ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ­ç§˜äº‘åŸç”Ÿæ··å¸ƒèµ„æºè°ƒåº¦å™¨Koordinator ï¼ˆåï¼‰ResourceExecutor æ‰§è¡Œå¼•æ“]]></title>    <link>https://juejin.cn/post/7589897523268829194</link>    <guid>https://juejin.cn/post/7589897523268829194</guid>    <pubDate>2026-01-01T02:56:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589897523268829194" data-draft-id="7589482741759623195" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ­ç§˜äº‘åŸç”Ÿæ··å¸ƒèµ„æºè°ƒåº¦å™¨Koordinator ï¼ˆåï¼‰ResourceExecutor æ‰§è¡Œå¼•æ“"/> <meta itemprop="keywords" content="äº‘è®¡ç®—"/> <meta itemprop="datePublished" content="2026-01-01T02:56:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¤©çš„é£æ»šè‰"/> <meta itemprop="url" content="https://juejin.cn/user/3743184419829383"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ­ç§˜äº‘åŸç”Ÿæ··å¸ƒèµ„æºè°ƒåº¦å™¨Koordinator ï¼ˆåï¼‰ResourceExecutor æ‰§è¡Œå¼•æ“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3743184419829383/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¤©çš„é£æ»šè‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T02:56:22.000Z" title="Thu Jan 01 2026 02:56:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ ¸å¿ƒä½¿å‘½ä¸è®¾è®¡ç†å¿µ</h2>
<h3 data-id="heading-1">10.1 What - ResourceExecutor æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>ResourceExecutor æ˜¯ Koordlet ä¸­çš„<strong>èµ„æºæ“ä½œæ‰§è¡Œå¼•æ“</strong>ï¼Œè´Ÿè´£å°† QOSManager çš„å†³ç­–è½¬åŒ–ä¸ºå…·ä½“çš„ CGroup æ“ä½œæŒ‡ä»¤ï¼Œå¹¶ç¡®ä¿æŒ‡ä»¤æ­£ç¡®æ‰§è¡Œã€‚</p>
<p><strong>æ ¸å¿ƒèŒè´£</strong>ï¼š</p>
<ol>
<li><strong>æ¥æ”¶æ‰§è¡ŒæŒ‡ä»¤</strong>ï¼šä» QOSManager æ¥æ”¶èµ„æºéš”ç¦»å’Œé™æµæŒ‡ä»¤</li>
<li><strong>ç®¡ç† CGroup</strong>ï¼šæ›´æ–° Pod å¯¹åº”çš„ CGroup é…ç½®æ–‡ä»¶</li>
<li><strong>æ‰¹é‡æ‰§è¡Œ</strong>ï¼šæ”¯æŒæ‰¹é‡å’Œå¢é‡æ›´æ–°ï¼Œæé«˜æ•ˆç‡</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šå¤„ç†æ‰§è¡Œå¤±è´¥ï¼Œæä¾›é‡è¯•æœºåˆ¶</li>
<li><strong>çŠ¶æ€åŒæ­¥</strong>ï¼šåŒæ­¥æ‰§è¡Œç»“æœï¼Œåé¦ˆç»™ QOSManager</li>
<li><strong>å¹‚ç­‰æ€§</strong>ï¼šç¡®ä¿é‡å¤æ‰§è¡Œç›¸åŒæŒ‡ä»¤ä¸ä¼šäº§ç”Ÿå‰¯ä½œç”¨</li>
</ol>
<p><strong>æ‰§è¡Œå±‚æ¬¡</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span>      <span class="hljs-string">ResourceExecutor</span> <span class="hljs-string">çš„æ‰§è¡Œå±‚æ¬¡</span>            <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="hljs-string">â”‚</span>                                             <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">L1:</span> <span class="hljs-string">ç­–ç•¥å±‚ï¼ˆQOSManagerï¼‰</span>                   <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">CPU</span> <span class="hljs-string">å‹åŠ›</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">90</span>                        <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">å†³ç­–:</span> <span class="hljs-string">é©±é€</span> <span class="hljs-number">3</span> <span class="hljs-string">ä¸ª</span> <span class="hljs-string">BE</span> <span class="hljs-string">Pod</span>               <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â””â”€</span> <span class="hljs-string">è°ƒç”¨</span> <span class="hljs-string">ResourceExecutor</span>                <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>                                             <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">L2:</span> <span class="hljs-string">æŒ‡ä»¤å±‚ï¼ˆResourceExecutorï¼‰</span>              <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æŒ‡ä»¤</span> <span class="hljs-attr">1:</span> <span class="hljs-string">æ›´æ–°</span> <span class="hljs-string">BE</span> <span class="hljs-string">Pod</span> <span class="hljs-number">1</span> <span class="hljs-string">çš„</span> <span class="hljs-string">quota</span>      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æŒ‡ä»¤</span> <span class="hljs-attr">2:</span> <span class="hljs-string">æ›´æ–°</span> <span class="hljs-string">BE</span> <span class="hljs-string">Pod</span> <span class="hljs-number">2</span> <span class="hljs-string">çš„</span> <span class="hljs-string">quota</span>      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â””â”€</span> <span class="hljs-string">æŒ‡ä»¤</span> <span class="hljs-attr">3:</span> <span class="hljs-string">é©±é€</span> <span class="hljs-string">BE</span> <span class="hljs-string">Pod</span> <span class="hljs-number">3</span>               <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>                                             <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">L3:</span> <span class="hljs-string">æ“ä½œå±‚ï¼ˆCGroup</span> <span class="hljs-string">æ–‡ä»¶ç³»ç»Ÿï¼‰</span>              <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">å†™å…¥</span> <span class="hljs-string">/sys/fs/cgroup/cpu/.../quota</span>  <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">å†™å…¥</span> <span class="hljs-string">/sys/fs/cgroup/memory/.../min</span> <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â””â”€</span> <span class="hljs-string">åˆ é™¤</span> <span class="hljs-string">Pod</span> <span class="hljs-string">å¯¹åº”çš„</span> <span class="hljs-string">CGroup</span>               <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>                                             <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-attr">L4:</span> <span class="hljs-string">å†…æ ¸å±‚ï¼ˆLinux</span> <span class="hljs-string">Kernelï¼‰</span>                 <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">CFS</span> <span class="hljs-string">è°ƒåº¦å™¨åº”ç”¨æ–°</span> <span class="hljs-string">quota</span>               <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">å†…å­˜ç®¡ç†å™¨æ‰§è¡Œå›æ”¶</span>                   <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â””â”€</span> <span class="hljs-string">è¿›ç¨‹è¢«é™æµæˆ–ç»ˆæ­¢</span>                     <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>                                             <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<h3 data-id="heading-2">10.2 Why - ä¸ºä»€ä¹ˆéœ€è¦ä¸“é—¨çš„æ‰§è¡Œå¼•æ“ï¼Ÿ</h3>
<p><strong>é—®é¢˜ 1ï¼šç›´æ¥ä¿®æ”¹ CGroup å®¹æ˜“å‡ºé”™</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">ä½æ•ˆçš„æ–¹å¼ï¼ˆé€ä¸ªä¿®æ”¹ï¼‰ï¼š

for each pod in pods<span class="hljs-emphasis">_to_</span>update:
<span class="hljs-code">    write(pod.cgroup_cpu_quota, new_quota)
    write(pod.cgroup_memory_min, new_min)
    write(pod.cgroup_io_weight, new_weight)
</span>
é—®é¢˜ï¼š
â”œâ”€ æ¯ä¸ª Pod 3 æ¬¡æ–‡ä»¶å†™æ“ä½œ â†’ é¢‘ç¹ç³»ç»Ÿè°ƒç”¨
â”œâ”€ å†™å…¥æœŸé—´ä¸ä¸€è‡´ â†’ æŸäº›å‚æ•°å·²æ›´æ–°ï¼ŒæŸäº›æœªæ›´æ–°
â”œâ”€ å¦‚æœä¸­é—´å‡ºé”™ â†’ Pod å¤„äºä¸å®Œæ•´çš„çŠ¶æ€
â””â”€ æ— æ³•å›æ»š â†’ æ— æ³•æ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€

ResourceExecutor çš„æ–¹æ¡ˆï¼š

<span class="hljs-bullet">1.</span> æ‰¹é‡æ”¶é›†æ‰€æœ‰æŒ‡ä»¤
<span class="hljs-bullet">2.</span> éªŒè¯æŒ‡ä»¤çš„ä¸€è‡´æ€§
<span class="hljs-bullet">3.</span> åŸå­æ€§æ‰§è¡Œï¼ˆå…¨éƒ¨æˆåŠŸæˆ–å…¨éƒ¨å¤±è´¥ï¼‰
<span class="hljs-bullet">4.</span> ä¿å­˜æ‰§è¡Œå†å²ï¼ˆä¾¿äºè°ƒè¯•å’Œå›æ»šï¼‰
</code></pre>
<p><strong>é—®é¢˜ 2ï¼šCGroup æ“ä½œçš„å¤æ‚æ€§å’Œé™·é˜±</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">CGroup</span> <span class="hljs-string">æ“ä½œçš„å¸¸è§é™·é˜±ï¼š</span>

<span class="hljs-string">é™·é˜±</span> <span class="hljs-attr">1:</span> <span class="hljs-string">å†…å­˜é™åˆ¶çš„é¡ºåº</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">é”™è¯¯:</span> <span class="hljs-string">å…ˆè®¾ç½®</span> <span class="hljs-string">memory.minï¼Œåè®¾ç½®</span> <span class="hljs-string">memory.max</span>
<span class="hljs-string">â”‚</span>       <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">å¦‚æœ</span> <span class="hljs-string">min</span> <span class="hljs-string">&gt;</span> <span class="hljs-string">maxï¼Œæ“ä½œä¼šå¤±è´¥</span>
<span class="hljs-string">â”‚</span>       <span class="hljs-string">â””â”€</span> <span class="hljs-string">å¯¼è‡´è®¾ç½®ä¸æˆåŠŸ</span>
<span class="hljs-string">â”‚</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ­£ç¡®:</span> <span class="hljs-string">å…ˆç¡®ä¿</span> <span class="hljs-string">max</span> <span class="hljs-string">&gt;=</span> <span class="hljs-string">min</span>
<span class="hljs-string">â”‚</span>       <span class="hljs-string">â””â”€</span> <span class="hljs-string">é¿å…é¡ºåºå¯¼è‡´çš„å¤±è´¥</span>

<span class="hljs-string">é™·é˜±</span> <span class="hljs-attr">2:</span> <span class="hljs-string">CPU</span> <span class="hljs-string">quota</span> <span class="hljs-string">çš„è¾¹ç•Œå€¼</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">quota</span> <span class="hljs-string">èŒƒå›´:</span> <span class="hljs-number">1000</span> <span class="hljs-string">~</span> <span class="hljs-number">18446744073709551615</span> <span class="hljs-string">(2^64-1)</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">é”™è¯¯:</span> <span class="hljs-string">quota=0</span> <span class="hljs-string">æˆ–</span> <span class="hljs-string">quota=-1ï¼ˆæ— é™åˆ¶ï¼‰ä¸åŒå«ä¹‰</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-string">éœ€è¦:</span> <span class="hljs-string">æ˜ç¡®åŒºåˆ†æœ‰é™åˆ¶å’Œæ— é™åˆ¶çš„æƒ…å†µ</span>

<span class="hljs-string">é™·é˜±</span> <span class="hljs-attr">3:</span> <span class="hljs-string">CGroup</span> <span class="hljs-string">v1</span> <span class="hljs-string">å’Œ</span> <span class="hljs-string">v2</span> <span class="hljs-string">çš„å·®å¼‚</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">v1:</span> <span class="hljs-string">cpu/cpuacct</span> <span class="hljs-string">åˆ†å¼€</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">v2:</span> <span class="hljs-string">unified</span> <span class="hljs-string">å­ç³»ç»Ÿ</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">éœ€è¦:</span> <span class="hljs-string">åŒæ—¶æ”¯æŒä¸¤ä¸ªç‰ˆæœ¬</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-string">ä¸èƒ½æ··æ·†</span> <span class="hljs-string">API</span>

<span class="hljs-string">é™·é˜±</span> <span class="hljs-attr">4:</span> <span class="hljs-string">æƒé™é—®é¢˜</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ™®é€šç”¨æˆ·æ— æ³•ä¿®æ”¹</span> <span class="hljs-string">CGroup</span>
<span class="hljs-string">â”œâ”€</span> <span class="hljs-string">éœ€è¦:</span> <span class="hljs-string">root</span> <span class="hljs-string">æƒé™æˆ–ç‰¹æ®Šé…ç½®</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-attr">RuntimeProxy:</span> <span class="hljs-string">åœ¨å®¹å™¨åˆ›å»ºæ—¶æ³¨å…¥å‚æ•°</span>

<span class="hljs-string">ResourceExecutor</span> <span class="hljs-string">çš„è®¾è®¡ç›®æ ‡ï¼š</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-string">ç»Ÿä¸€å¤„ç†è¿™äº›å¤æ‚æ€§å’Œé™·é˜±</span>
<span class="hljs-string">â””â”€</span> <span class="hljs-string">å‘ä¸Šå±‚æä¾›ç®€å•ã€å®‰å…¨çš„</span> <span class="hljs-string">API</span>
</code></pre>
<p><strong>é—®é¢˜ 3ï¼šéœ€è¦æ”¯æŒé«˜æ•ˆçš„æ‰¹é‡å’Œå¢é‡æ“ä½œ</strong></p>
<pre><code class="hljs language-ini" lang="ini">åœºæ™¯ï¼š200 ä¸ª Pod çš„èŠ‚ç‚¹ï¼Œæ¯ç§’æ›´æ–°å‚æ•°

ä¸ä¼˜åŒ–çš„æ–¹æ¡ˆï¼š
â”œâ”€ 200 ä¸ª Pod Ã— 3 ä¸ªå‚æ•° = 600 æ¬¡æ–‡ä»¶æ“ä½œ
â”œâ”€ æ¯æ¬¡æ“ä½œ 1ms â†’ æ€»è€—æ—¶ 600ms
â”œâ”€ é¢‘ç¹çš„ç³»ç»Ÿè°ƒç”¨ï¼ŒCPU å ç”¨é«˜
â””â”€ å¯èƒ½æ— æ³•æŒ‰æ—¶å®Œæˆ

ä¼˜åŒ–æ–¹æ¡ˆï¼ˆResourceExecutorï¼‰ï¼š

1. å¢é‡æ›´æ–°
   â”œâ”€ åªæ›´æ–°æœ‰å˜åŒ–çš„ Pod
   â”œâ”€ ä¾‹ï¼šä»… 50 ä¸ª Pod çš„å‚æ•°å˜åŒ–
   â””â”€ 50 Ã— <span class="hljs-attr">3</span> = <span class="hljs-number">150</span> æ¬¡æ“ä½œ

2. æ‰¹é‡æ“ä½œ
   â”œâ”€ åˆå¹¶åŒä¸€ CGroup çš„å¤šä¸ªå‚æ•°æ›´æ–°
   â”œâ”€ ä¾‹ï¼šcpuset å’Œ cpu.shares ä¸€èµ·æ›´æ–°
   â””â”€ å‡å°‘æ–‡ä»¶æ“ä½œæ¬¡æ•°

3. å¼‚æ­¥æ›´æ–°
   â”œâ”€ ä¸é˜»å¡ QOSManager çš„å†³ç­–å¾ªç¯
   â”œâ”€ åœ¨åå°çº¿ç¨‹æ‰§è¡Œ
   â””â”€ QOSManager ç»§ç»­åšä¸‹ä¸€è½®å†³ç­–

4. ä¼˜å…ˆçº§é˜Ÿåˆ—
   â”œâ”€ ä¼˜å…ˆæ‰§è¡Œå…³é”®æ“ä½œï¼ˆé©±é€ã€é˜² OOMï¼‰
   â”œâ”€ å»¶è¿Ÿæ‰§è¡Œéå…³é”®æ“ä½œï¼ˆè½»å¾®æŠ‘åˆ¶ï¼‰
   â””â”€ æœ‰é™çš„æ‰§è¡Œèµ„æºï¼Œä¼˜å…ˆå¤„ç†ç´§æ€¥ä»»åŠ¡

æ€§èƒ½å¯¹æ¯”ï¼š

åœºæ™¯: 200 Podï¼Œ50 ä¸ªéœ€è¦æ›´æ–°ï¼Œ3 ä¸ªå‚æ•°/Pod

ä¸ä¼˜åŒ–:
â”œâ”€ æ›´æ–°æ‰€æœ‰: 600 æ¬¡ I/O Ã— <span class="hljs-attr">1ms</span> = <span class="hljs-number">600</span>ms
â””â”€ æ— æ³•æŒ‰æ—¶å®Œæˆ 1s çš„å†³ç­–å‘¨æœŸ

ä¼˜åŒ–å:
â”œâ”€ å¢é‡: 150 æ¬¡ I/O Ã— <span class="hljs-attr">1ms</span> = <span class="hljs-number">150</span>ms
â”œâ”€ æ‰¹é‡: 100 æ¬¡ I/O Ã— <span class="hljs-attr">1ms</span> = <span class="hljs-number">100</span>ms
â”œâ”€ å¼‚æ­¥: åœ¨åå°ï¼Œä¸é˜»å¡ä¸»å¾ªç¯
â””â”€ æ€»è€—æ—¶: &lt; 100msï¼Œè½»æ¾å®Œæˆ
</code></pre>
<h3 data-id="heading-3">10.3 How - æ‰§è¡Œå¼•æ“çš„å®ç°æ¶æ„</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span>       <span class="hljs-string">ResourceExecutor</span> <span class="hljs-string">å·¥ä½œæµç¨‹</span>              <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="hljs-string">â”‚</span>                                              <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-number">1</span><span class="hljs-string">.</span> <span class="hljs-string">æŒ‡ä»¤æ”¶é›†ï¼ˆæ¥è‡ª</span> <span class="hljs-string">QOSManagerï¼‰</span>               <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">UpdateRequest:</span> <span class="hljs-string">æ›´æ–°</span> <span class="hljs-string">Pod</span> <span class="hljs-string">çš„èµ„æºå‚æ•°</span>   <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">EvictionRequest:</span> <span class="hljs-string">é©±é€</span> <span class="hljs-string">Pod</span>            <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-attr">ReservationRequest:</span> <span class="hljs-string">èµ„æºé¢„ç•™</span>         <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â””â”€</span> <span class="hljs-string">æ‰¹é‡æ”¶é›†ï¼Œé¿å…é€ä¸ªå¤„ç†</span>               <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>                                              <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-number">2</span><span class="hljs-string">.</span> <span class="hljs-string">æŒ‡ä»¤éªŒè¯</span>                                  <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ£€æŸ¥æŒ‡ä»¤çš„åˆæ³•æ€§</span>                      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ£€æŸ¥å‚æ•°èŒƒå›´</span>                          <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ£€æŸ¥</span> <span class="hljs-string">Pod</span> <span class="hljs-string">æ˜¯å¦å­˜åœ¨</span>                    <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â””â”€</span> <span class="hljs-string">è¿‡æ»¤æ— æ•ˆæŒ‡ä»¤</span>                          <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>                                              <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-number">3</span><span class="hljs-string">.</span> <span class="hljs-string">æŒ‡ä»¤å»é‡å’Œä¼˜åŒ–</span>                            <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">åŒä¸€</span> <span class="hljs-string">Pod</span> <span class="hljs-string">çš„å¤šä¸ªæ›´æ–°</span> <span class="hljs-string">â†’</span> <span class="hljs-string">åˆå¹¶</span>            <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ— æ•ˆæŒ‡ä»¤</span> <span class="hljs-string">â†’</span> <span class="hljs-string">åˆ é™¤</span>                      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">ä¼˜å…ˆçº§æ’åº</span> <span class="hljs-string">â†’</span> <span class="hljs-string">ç´§æ€¥æŒ‡ä»¤ä¼˜å…ˆ</span>             <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â””â”€</span> <span class="hljs-string">å¢é‡è®¡ç®—</span> <span class="hljs-string">â†’</span> <span class="hljs-string">åªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†</span>           <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>                                              <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-number">4</span><span class="hljs-string">.</span> <span class="hljs-string">æ‰§è¡Œå‰æ£€æŸ¥</span>                                <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ£€æŸ¥</span> <span class="hljs-string">CGroup</span> <span class="hljs-string">æ˜¯å¦å­˜åœ¨</span>                 <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ£€æŸ¥ç›®æ ‡è·¯å¾„çš„æƒé™</span>                    <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">è¯»å–å½“å‰å€¼ï¼Œå¯¹æ¯”å˜åŒ–</span>                  <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â””â”€</span> <span class="hljs-string">é¿å…ä¸å¿…è¦çš„å†™å…¥</span>                      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>                                              <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-number">5</span><span class="hljs-string">.</span> <span class="hljs-string">æ‰§è¡Œæ“ä½œ</span>                                  <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æŒ‰ä¼˜å…ˆçº§æ‰§è¡Œ</span>                          <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">ä¸€ä¸ª</span> <span class="hljs-string">Pod</span> <span class="hljs-string">çš„å¤šä¸ªå‚æ•°æŒ‰é¡ºåºæ‰§è¡Œ</span>         <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ”¯æŒé‡è¯•ï¼ˆç¬æ—¶æ•…éšœï¼‰</span>                  <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â””â”€</span> <span class="hljs-string">è®°å½•æ‰§è¡Œæ—¥å¿—</span>                          <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>                                              <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-number">6</span><span class="hljs-string">.</span> <span class="hljs-string">é”™è¯¯å¤„ç†</span>                                  <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ•è·æ‰§è¡Œå¼‚å¸¸</span>                          <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">åˆ†ç±»å¤„ç†ï¼ˆå¯é‡è¯•/ä¸å¯é‡è¯•ï¼‰</span>           <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">å›æ»šå·²æ‰§è¡Œçš„æ“ä½œï¼ˆå¯é€‰ï¼‰</span>              <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â””â”€</span> <span class="hljs-string">è®°å½•é”™è¯¯ï¼Œé€šçŸ¥ä¸Šå±‚</span>                    <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>                                              <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span> <span class="hljs-number">7</span><span class="hljs-string">.</span> <span class="hljs-string">ç»“æœåé¦ˆ</span>                                  <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">è®°å½•æ‰§è¡Œç»“æœ</span>                          <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">ç»Ÿè®¡æ‰§è¡Œé€Ÿåº¦å’ŒæˆåŠŸç‡</span>                  <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">æ›´æ–°</span> <span class="hljs-string">Pod</span> <span class="hljs-string">çš„èµ„æºçŠ¶æ€</span>                  <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>    <span class="hljs-string">â””â”€</span> <span class="hljs-string">é€šçŸ¥</span> <span class="hljs-string">QOSManager</span>                      <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>                                              <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<hr/>
<h2 data-id="heading-4">åˆ† - ResourceExecutor çš„å®ç°ç»†èŠ‚</h2>
<h3 data-id="heading-5">10.4 æŒ‡ä»¤çš„æ•°æ®ç»“æ„å’Œä¼˜å…ˆçº§</h3>
<p><strong>æ‰§è¡ŒæŒ‡ä»¤çš„ç±»å‹</strong>ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// ResourceUpdateRequest: æ›´æ–°èµ„æºå‚æ•°</span>
<span class="hljs-keyword">type</span> ResourceUpdateRequest <span class="hljs-keyword">struct</span> {
    PodUID            <span class="hljs-type">string</span>
    ResourceType      <span class="hljs-type">string</span>        <span class="hljs-comment">// "cpu", "memory", "io", "network"</span>
    ParameterName     <span class="hljs-type">string</span>        <span class="hljs-comment">// "quota", "shares", "min", "max"</span>
    ParameterValue    <span class="hljs-keyword">interface</span>{}   <span class="hljs-comment">// å‚æ•°å€¼</span>
    Priority          <span class="hljs-type">int</span>           <span class="hljs-comment">// 0-10, è¶Šå°è¶Šç´§æ€¥</span>
    DeadlineNano      <span class="hljs-type">int64</span>         <span class="hljs-comment">// æ‰§è¡Œæˆªæ­¢æ—¶é—´ï¼ˆçº³ç§’ï¼‰</span>
    Reason            <span class="hljs-type">string</span>        <span class="hljs-comment">// æ‰§è¡ŒåŸå› ï¼Œç”¨äºæ—¥å¿—</span>
}

<span class="hljs-comment">// EvictionRequest: é©±é€ Pod</span>
<span class="hljs-keyword">type</span> EvictionRequest <span class="hljs-keyword">struct</span> {
    PodUID            <span class="hljs-type">string</span>
    Namespace         <span class="hljs-type">string</span>
    PodName           <span class="hljs-type">string</span>
    Reason            <span class="hljs-type">string</span>        <span class="hljs-comment">// é©±é€åŸå› </span>
    Priority          <span class="hljs-type">int</span>           <span class="hljs-comment">// é©±é€ä¼˜å…ˆçº§</span>
    GracePeriodSecond <span class="hljs-type">int</span>           <span class="hljs-comment">// ä¼˜é›…å…³é—­æ—¶é—´</span>
}

<span class="hljs-comment">// ä¼˜å…ˆçº§å®šä¹‰</span>
<span class="hljs-keyword">const</span> (
    PriorityEmergency  = <span class="hljs-number">0</span>   <span class="hljs-comment">// ç´§æ€¥ï¼ˆSLO è¿åï¼‰</span>
    PriorityHigh       = <span class="hljs-number">3</span>   <span class="hljs-comment">// é«˜ï¼ˆCPU å‹åŠ› &gt; 90ï¼‰</span>
    PriorityMedium     = <span class="hljs-number">5</span>   <span class="hljs-comment">// ä¸­ç­‰ï¼ˆCPU å‹åŠ› 60-90ï¼‰</span>
    PriorityLow        = <span class="hljs-number">8</span>   <span class="hljs-comment">// ä½ï¼ˆæ—¥å¸¸è°ƒæ•´ï¼‰</span>
    PriorityBatch      = <span class="hljs-number">10</span>  <span class="hljs-comment">// æ‰¹å¤„ç†ï¼ˆå¯å»¶è¿Ÿï¼‰</span>
)
</code></pre>
<p><strong>ä¼˜å…ˆçº§æ’åºè§„åˆ™</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">åŒä¸€æ‰¹æ¬¡å†…çš„æŒ‡ä»¤æ’åºï¼š

1. Priority å€¼ï¼ˆè¶Šå°è¶Šä¼˜å…ˆï¼‰
   â”œâ”€ PriorityEmergency (0): é©±é€ã€é˜² OOM
   â”œâ”€ PriorityHigh (3): CPU ç´§æ€¥æŠ‘åˆ¶
   â”œâ”€ PriorityMedium (5): CPU æ­£å¸¸æŠ‘åˆ¶
   â”œâ”€ PriorityLow (8): æ—¥å¸¸å‚æ•°è°ƒæ•´
   â””â”€ PriorityBatch (10): éå…³é”®æ›´æ–°

2. æˆªæ­¢æ—¶é—´ï¼ˆè¶Šæ—©è¶Šä¼˜å…ˆï¼‰
   â”œâ”€ å³å°†è¶…æ—¶çš„æŒ‡ä»¤ä¼˜å…ˆæ‰§è¡Œ
   â””â”€ é¿å…å…³é”®æŒ‡ä»¤è¢«å»¶è¿Ÿ

3. èµ„æºç±»å‹ï¼ˆå…³é”®èµ„æºä¼˜å…ˆï¼‰
   â”œâ”€ CPU é©±é€ &gt; å†…å­˜é©±é€ &gt; å…¶ä»–
   â””â”€ CPU æ˜¯æœ€å…³é”®çš„èµ„æº

4. Pod æ•°é‡ï¼ˆå½±å“èŒƒå›´å¤§çš„ä¼˜å…ˆï¼‰
   â”œâ”€ å½±å“ 100 ä¸ª Pod çš„æ“ä½œä¼˜å…ˆ
   â”œâ”€ å½±å“ 10 ä¸ª Pod çš„æ“ä½œå…¶æ¬¡
   â””â”€ å½±å“ 1 ä¸ª Pod çš„æ“ä½œæœ€å

ç¤ºä¾‹æ’åºï¼š

åŸå§‹åˆ—è¡¨ï¼š
â”œâ”€ Request 1: CPU.quota, <span class="hljs-attr">Priority</span>=<span class="hljs-number">5</span>, Deadline=<span class="hljs-number">3000</span>ms (ä¸­ç­‰ï¼Œ<span class="hljs-number">3</span>ç§’ï¼‰
â”œâ”€ Request 2: Memory.min, <span class="hljs-attr">Priority</span>=<span class="hljs-number">0</span>, Deadline=<span class="hljs-number">5000</span>ms (ç´§æ€¥ï¼Œ<span class="hljs-number">5</span>ç§’ï¼‰
â”œâ”€ Request 3: CPU.shares, <span class="hljs-attr">Priority</span>=<span class="hljs-number">8</span>, Deadline=<span class="hljs-number">6000</span>ms (ä½ï¼Œ<span class="hljs-number">6</span>ç§’ï¼‰
â””â”€ Request 4: CPU.quota, <span class="hljs-attr">Priority</span>=<span class="hljs-number">0</span>, Deadline=<span class="hljs-number">2000</span>ms (ç´§æ€¥ï¼Œ<span class="hljs-number">2</span>ç§’ï¼‰

æ’åºåï¼š
â”œâ”€ Request 4: <span class="hljs-attr">Priority</span>=<span class="hljs-number">0</span>, Deadline=<span class="hljs-number">2000</span>ms â† ç´§æ€¥ä¸”å³å°†è¶…æ—¶
â”œâ”€ Request 2: <span class="hljs-attr">Priority</span>=<span class="hljs-number">0</span>, Deadline=<span class="hljs-number">5000</span>ms â† ç´§æ€¥ä½†æ—¶é—´å……è¶³
â”œâ”€ Request 1: <span class="hljs-attr">Priority</span>=<span class="hljs-number">5</span>, Deadline=<span class="hljs-number">3000</span>ms â† ä¸­ç­‰
â””â”€ Request 3: <span class="hljs-attr">Priority</span>=<span class="hljs-number">8</span>, Deadline=<span class="hljs-number">6000</span>ms â† ä½
</code></pre>
<h3 data-id="heading-6">10.5 æ‰¹é‡æ“ä½œå’Œå¢é‡æ›´æ–°</h3>
<p><strong>å¢é‡è®¡ç®—çš„å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">å¢é‡æ›´æ–°çš„ç›®æ ‡ï¼š
â””â”€ åªæ›´æ–°æœ‰å˜åŒ–çš„å‚æ•°
â””â”€ é¿å…ä¸å¿…è¦çš„ CGroup å†™æ“ä½œ

ç®—æ³•æµç¨‹ï¼š

æ­¥éª¤ 1: è¯»å–å½“å‰å€¼
    <span class="hljs-attr">current_quota</span> = read_from_cgroup(pod_cgroup_path)

æ­¥éª¤ 2: å¯¹æ¯”æ–°å€¼
    if <span class="hljs-attr">current_quota</span> == new_quota:
        skip_update()
    else:
        execute_update()

ç¤ºä¾‹ï¼š

åœºæ™¯: 200 ä¸ª Podï¼Œæ¯ç§’æ›´æ–°

å…¨é‡æ›´æ–°ï¼ˆæ— ä¼˜åŒ–ï¼‰ï¼š
â”œâ”€ 200 ä¸ª Pod Ã— 3 ä¸ªå‚æ•° = 600 æ¬¡å†™æ“ä½œ
â””â”€ 600ms ï¼ˆæ¯æ¬¡ 1msï¼‰

å¢é‡æ›´æ–°ï¼ˆæœ‰ä¼˜åŒ–ï¼‰ï¼š
â”œâ”€ æ£€æŸ¥å½“å‰å€¼ 200 Ã— <span class="hljs-attr">3</span> = <span class="hljs-number">600</span> æ¬¡è¯»æ“ä½œï¼ˆå¹¶è¡Œï¼Œ&lt; <span class="hljs-number">100</span>msï¼‰
â”œâ”€ å‘ç° 150 ä¸ª Pod éœ€è¦æ›´æ–°
â”œâ”€ æ‰§è¡Œ 150 Ã— <span class="hljs-attr">3</span> = <span class="hljs-number">450</span> æ¬¡å†™æ“ä½œï¼ˆ&lt; <span class="hljs-number">450</span>msï¼‰
â””â”€ æ€»è®¡: &lt; 550msï¼ˆæ¯”å…¨é‡å¿« 50msï¼‰

æ‰¹é‡æ“ä½œçš„ä¼˜åŒ–ï¼š

ä¸ä¼˜åŒ–ï¼š
for each pod in pods:
    for each param in params:
        write(cgroup_path, param, value)

ä¼˜åŒ–åï¼š
<span class="hljs-attr">batch</span> = []
for each pod in pods:
    for each param in params:
        batch.append((cgroup_path, param, value))

execute_batch(batch)  <span class="hljs-comment"># ä¸€æ¬¡æ€§æ‰§è¡Œï¼Œå‡å°‘ç³»ç»Ÿè°ƒç”¨</span>

æ€§èƒ½æå‡ï¼š
â”œâ”€ ç³»ç»Ÿè°ƒç”¨ä» 600 æ¬¡ â†’ 1 æ¬¡ï¼ˆå‡å°‘ 99.8%ï¼‰
â”œâ”€ ç”¨æˆ·æ€/å†…æ ¸æ€åˆ‡æ¢ä» 1200 æ¬¡ â†’ 2 æ¬¡
â””â”€ æ€»è€—æ—¶ä» 600ms â†’ 100ms
</code></pre>
<p><strong>ç”Ÿäº§æ¡ˆä¾‹ï¼šæ‰¹é‡æ“ä½œçš„æ€§èƒ½æå‡</strong></p>
<pre><code class="hljs language-ini" lang="ini">åœºæ™¯ï¼š1024 æ ¸èŠ‚ç‚¹ï¼Œ500 ä¸ª Podï¼Œæ¯ç§’æ›´æ–°

ä¸ä½¿ç”¨æ‰¹é‡ä¼˜åŒ–ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰§è¡Œæ—¶é—´åˆ†æï¼š                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¯»å– Pod ä¿¡æ¯: 50ms                 â”‚
â”‚ ç”ŸæˆæŒ‡ä»¤: 20ms                      â”‚
â”‚ ä¿®æ”¹ CGroupï¼ˆ500 Ã— 3ï¼‰ï¼š            â”‚
â”‚ â”œâ”€ ç”¨æˆ·æ€å‡†å¤‡: 200ms                â”‚
â”‚ â”œâ”€ ç³»ç»Ÿè°ƒç”¨: 1200 Ã— <span class="hljs-attr">1ms</span> = <span class="hljs-number">1200</span>ms   â”‚
â”‚ â”œâ”€ å†…æ ¸æ‰§è¡Œ: 300ms                 â”‚
â”‚ â””â”€ è¿”å›ç”¨æˆ·æ€: 200ms                â”‚
â”‚ éªŒè¯ç»“æœ: 30ms                      â”‚
â”‚                                     â”‚
â”‚ æ€»è®¡: 2000ms &gt; 1000ms (è¶…æ—¶ï¼)     â”‚
â”‚                                     â”‚
â”‚ é—®é¢˜ï¼š                               â”‚
â”‚ â”œâ”€ QOSManager çš„ 1s å†³ç­–å‘¨æœŸæ— æ³•å®Œæˆâ”‚
â”‚ â”œâ”€ æ‰§è¡Œå»¶è¿Ÿï¼Œå¯¼è‡´å†³ç­–æ»å           â”‚
â”‚ â””â”€ èµ„æºéš”ç¦»ä¸åŠæ—¶                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä½¿ç”¨æ‰¹é‡ä¼˜åŒ–ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰§è¡Œæ—¶é—´åˆ†æï¼š                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è¯»å– Pod ä¿¡æ¯: 50ms                 â”‚
â”‚ ç”ŸæˆæŒ‡ä»¤: 20ms                      â”‚
â”‚ ä¿®æ”¹ CGroupï¼ˆæ‰¹é‡ï¼‰ï¼š                â”‚
â”‚ â”œâ”€ ç”¨æˆ·æ€å‡†å¤‡: 200ms                â”‚
â”‚ â”œâ”€ ç³»ç»Ÿè°ƒç”¨: 1 æ¬¡ Ã— <span class="hljs-attr">1ms</span> = <span class="hljs-number">1</span>ms      â”‚
â”‚ â”œâ”€ å†…æ ¸æ‰§è¡Œ: 300ms                 â”‚
â”‚ â””â”€ è¿”å›ç”¨æˆ·æ€: 10ms                 â”‚
â”‚ éªŒè¯ç»“æœ: 30ms                      â”‚
â”‚                                     â”‚
â”‚ æ€»è®¡: 611ms &lt; 1000ms (æ»¡è¶³ï¼)     â”‚
â”‚                                     â”‚
â”‚ æ”¹è¿›ï¼š                               â”‚
â”‚ â”œâ”€ æ‰§è¡Œå»¶è¿Ÿä» 2000ms é™åˆ° 611ms    â”‚
â”‚ â”œâ”€ ç³»ç»Ÿè°ƒç”¨ä» 1200 æ¬¡é™åˆ° 1 æ¬¡     â”‚
â”‚ â”œâ”€ ç¼“å†²å……è¶³ï¼Œå¯ä»¥æ‰§è¡Œå…¶ä»–æ“ä½œ      â”‚
â”‚ â””â”€ èµ„æºéš”ç¦»åŠæ—¶æœ‰æ•ˆ                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å…³é”®ä¼˜åŒ–ç‚¹ï¼š
â”œâ”€ æ‰¹é‡ CGroup æ“ä½œ â†’ å‡å°‘ç³»ç»Ÿè°ƒç”¨
â”œâ”€ å¢é‡æ›´æ–° â†’ åªæ›´æ–°å˜åŒ–çš„ Pod
â”œâ”€ å¼‚æ­¥æ‰§è¡Œ â†’ ä¸é˜»å¡ QOSManager
â””â”€ ä¼˜å…ˆçº§æ’åº â†’ å…³é”®æ“ä½œä¼˜å…ˆ
</code></pre>
<h3 data-id="heading-7">10.6 é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶</h3>
<p><strong>é”™è¯¯åˆ†ç±»</strong>ï¼š</p>
<pre><code class="hljs language-go" lang="go">CGroup æ“ä½œçš„é”™è¯¯ç±»å‹ï¼š

å¯é‡è¯•é”™è¯¯ï¼š
â”œâ”€ EIO (I/O <span class="hljs-type">error</span>): ç¬æ—¶ I/O æ•…éšœ
â”‚  â””â”€ è§£å†³: ç­‰å¾…åé‡è¯•
â”‚
â”œâ”€ EAGAIN (Resource temporarily unavailable): èµ„æºæš‚æ—¶ä¸å¯ç”¨
â”‚  â””â”€ è§£å†³: ç­‰å¾…åé‡è¯•
â”‚
â”œâ”€ EINTR (Interrupted system call): ç³»ç»Ÿä¸­æ–­
â”‚  â””â”€ è§£å†³: é‡è¯•ç³»ç»Ÿè°ƒç”¨
â”‚
â””â”€ è¶…æ—¶: æ“ä½œè¶…è¿‡è®¾å®šæ—¶é—´
   â””â”€ è§£å†³: å¢åŠ è¶…æ—¶æ—¶é—´åé‡è¯•

ä¸å¯é‡è¯•é”™è¯¯ï¼š
â”œâ”€ ENOENT (No such file or directory): CGroup ä¸å­˜åœ¨
â”‚  â””â”€ åŸå› : Pod å·²åˆ é™¤æˆ–è·¯å¾„é”™è¯¯
â”‚  â””â”€ å¤„ç†: è®°å½•æ—¥å¿—ï¼Œè·³è¿‡
â”‚
â”œâ”€ EACCES (Permission denied): æƒé™ä¸è¶³
â”‚  â””â”€ åŸå› : è¿›ç¨‹æƒé™ä¸è¶³
â”‚  â””â”€ å¤„ç†: è®°å½•é”™è¯¯ï¼Œéœ€è¦ææƒ
â”‚
â”œâ”€ EINVAL (Invalid argument): å‚æ•°æ— æ•ˆ
â”‚  â””â”€ åŸå› : å‚æ•°è¶…å‡ºèŒƒå›´æˆ–æ ¼å¼é”™è¯¯
â”‚  â””â”€ å¤„ç†: è®°å½•æ—¥å¿—ï¼Œè·³è¿‡
â”‚
â””â”€ ERANGE (Numerical result out of <span class="hljs-keyword">range</span>): æ•°å€¼èŒƒå›´å¤–
   â””â”€ åŸå› : å†…å­˜é™åˆ¶å€¼ä¸åˆç†ï¼ˆmin &gt; maxï¼‰
   â””â”€ å¤„ç†: è°ƒæ•´å‚æ•°åé‡è¯•

é‡è¯•ç­–ç•¥ï¼š

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ExecuteWithRetry</span><span class="hljs-params">(request Request)</span></span> <span class="hljs-type">error</span> {
    max_retries := <span class="hljs-number">3</span>
    retry_delay := <span class="hljs-number">100</span>ms
    
    <span class="hljs-keyword">for</span> attempt := <span class="hljs-number">0</span>; attempt &lt; max_retries; attempt++ {
        err := Execute(request)
        
        <span class="hljs-keyword">if</span> err == <span class="hljs-literal">nil</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>  <span class="hljs-comment">// æˆåŠŸ</span>
        }
        
        <span class="hljs-keyword">if</span> !IsRetryable(err) {
            <span class="hljs-keyword">return</span> err  <span class="hljs-comment">// ä¸å¯é‡è¯•ï¼Œè¿”å›é”™è¯¯</span>
        }
        
        <span class="hljs-keyword">if</span> attempt &lt; max_retries - <span class="hljs-number">1</span> {
            wait(retry_delay)
            retry_delay *= <span class="hljs-number">2</span>  <span class="hljs-comment">// æŒ‡æ•°é€€é¿</span>
        }
    }
    
    <span class="hljs-keyword">return</span> errors.New(<span class="hljs-string">"max retries exceeded"</span>)
}
</code></pre>
<p><strong>ç”Ÿäº§æ¡ˆä¾‹ï¼šå¤„ç† CGroup ä¸å­˜åœ¨</strong></p>
<pre><code class="hljs language-ini" lang="ini">åœºæ™¯ï¼šPod åœ¨æ‰§è¡Œæ“ä½œæœŸé—´è¢«åˆ é™¤

æ—¶é—´çº¿ï¼š

<span class="hljs-attr">T</span>=<span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>  QOSManager æ£€æµ‹åˆ° CPU å‹åŠ›
            â”œâ”€ å†³ç­–: æ›´æ–° Pod A çš„ quota
            â””â”€ å‘é€æ›´æ–°è¯·æ±‚åˆ° ResourceExecutor

<span class="hljs-attr">T</span>=<span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">01</span>  ResourceExecutor æ”¶åˆ°è¯·æ±‚
            â”œâ”€ éªŒè¯ Pod A å­˜åœ¨ï¼ˆæ£€æŸ¥æˆåŠŸï¼‰
            â””â”€ åŠ å…¥æ‰§è¡Œé˜Ÿåˆ—

<span class="hljs-attr">T</span>=<span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">02</span>  Pod A è¢«é©±é€
            â”œâ”€ Kubernetes åˆ é™¤ Pod
            â”œâ”€ CGroup ä¹Ÿè¢«åˆ é™¤
            â””â”€ Pod A çš„èµ„æºé‡Šæ”¾

<span class="hljs-attr">T</span>=<span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">03</span>  ResourceExecutor å¼€å§‹æ‰§è¡Œ
            â”œâ”€ å°è¯•æ‰“å¼€ CGroup è·¯å¾„
            â”œâ”€ æ–‡ä»¶ä¸å­˜åœ¨ â†’ ENOENT é”™è¯¯
            â””â”€ è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ

ä¸ä½¿ç”¨é”™è¯¯å¤„ç†ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ‰§è¡Œå¤±è´¥ï¼Œå¼‚å¸¸æŠ›å‡º                   â”‚
â”‚ â”œâ”€ ResourceExecutor crash            â”‚
â”‚ â”œâ”€ ä¹‹åçš„æ‰€æœ‰æ“ä½œåœæ­¢                â”‚
â”‚ â”œâ”€ å…¶ä»– Pod çš„å‚æ•°æ— æ³•æ›´æ–°           â”‚
â”‚ â””â”€ æ•´ä¸ªèµ„æºéš”ç¦»ç³»ç»Ÿåœæ­¢å·¥ä½œ          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä½¿ç”¨é”™è¯¯å¤„ç†ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ•è· ENOENT é”™è¯¯                     â”‚
â”‚ â”œâ”€ æ£€æŸ¥ï¼šPod æ˜¯å¦è¿˜å­˜åœ¨ï¼Ÿ            â”‚
â”‚ â”‚  â””â”€ æ£€æŸ¥ StatesInformer çš„ç¼“å­˜     â”‚
â”‚ â”‚  â””â”€ å‘ç° Pod A å·²è¢«åˆ é™¤            â”‚
â”‚ â”‚  â””â”€ ç¡®è®¤æ˜¯ Pod åˆ é™¤ï¼Œä¸æ˜¯è·¯å¾„é”™è¯¯  â”‚
â”‚ â”‚                                     â”‚
â”‚ â”œâ”€ å¤„ç†ï¼šç•¥è¿‡è¯¥ Pod                  â”‚
â”‚ â”‚  â””â”€ ä»æ‰§è¡Œé˜Ÿåˆ—ä¸­ç§»é™¤ Pod A çš„è¯·æ±‚  â”‚
â”‚ â”‚  â””â”€ è®°å½•æ—¥å¿—: "Pod A å·²åˆ é™¤ï¼Œè·³è¿‡" â”‚
â”‚ â”‚                                     â”‚
â”‚ â””â”€ ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ª Podï¼ˆPod Bï¼‰        â”‚
â”‚                                     â”‚
â”‚ ç»“æœï¼š                               â”‚
â”‚ â”œâ”€ ResourceExecutor ç»§ç»­å·¥ä½œ          â”‚
â”‚ â”œâ”€ å…¶ä»– Pod çš„å‚æ•°æ­£å¸¸æ›´æ–°           â”‚
â”‚ â”œâ”€ ç³»ç»Ÿç¨³å®š                          â”‚
â”‚ â””â”€ ä»…è®°å½•ä¸€æ¡æ—¥å¿—ï¼Œæ— å…¶ä»–å½±å“       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é”™è¯¯åˆ†æçš„æµç¨‹ï¼š

ENOENT é”™è¯¯
    â†“
æ£€æŸ¥ Pod æ˜¯å¦åœ¨ StatesInformer ä¸­
    â”œâ”€ å­˜åœ¨ â†’ è·¯å¾„é”™è¯¯ï¼Œé‡æ–°è®¡ç®—è·¯å¾„
    â”œâ”€ ä¸å­˜åœ¨ â†’ Pod å·²åˆ é™¤ï¼Œå®‰å…¨è·³è¿‡
    â””â”€ ä¸ç¡®å®š â†’ è®°å½•æ—¥å¿—ï¼Œè·³è¿‡
    â†“
ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªæ“ä½œ

ä¼˜åŠ¿ï¼š
â”œâ”€ è‡ªåŠ¨é€‚åº” Pod çš„ç”Ÿå‘½å‘¨æœŸå˜åŒ–
â”œâ”€ ä¸å› ä¸º Pod åˆ é™¤è€Œå´©æºƒ
â””â”€ æé«˜ç³»ç»Ÿé²æ£’æ€§
</code></pre>
<h3 data-id="heading-8">10.7 æ‰§è¡Œæ€§èƒ½ä¼˜åŒ–</h3>
<p><strong>å¹¶è¡Œæ‰§è¡Œçš„ç­–ç•¥</strong>ï¼š</p>
<pre><code class="hljs language-go" lang="go">CGroup æ“ä½œçš„å¹¶è¡Œå¯è¡Œæ€§ï¼š

å¯ä»¥å¹¶è¡Œçš„æ“ä½œï¼š
â”œâ”€ ä¸åŒ Pod çš„æ“ä½œ â†’ å®Œå…¨ç‹¬ç«‹
â”œâ”€ ä¸åŒ CGroup å­ç³»ç»Ÿçš„æ“ä½œ â†’ ç‹¬ç«‹
â””â”€ è¯»æ“ä½œ â†’ å¯ä»¥å¹¶è¡Œè¯»

ä¸èƒ½å¹¶è¡Œçš„æ“ä½œï¼š
â”œâ”€ åŒä¸€æ–‡ä»¶çš„è¯»-å†™ â†’ å¯èƒ½ä¸ä¸€è‡´
â”œâ”€ å†…å­˜çš„ min/max æ“ä½œ â†’ æœ‰ä¾èµ–å…³ç³»
â”‚  â””â”€ å¿…é¡»ç¡®ä¿ min &lt;= max
â””â”€ åŒä¸€ Pod çš„å¤šä¸ªå‚æ•°æ›´æ–° â†’ éœ€è¦åŸå­æ€§

å¹¶è¡Œæ‰§è¡Œçš„å®ç°ï¼š

<span class="hljs-keyword">type</span> UpdateBatch <span class="hljs-keyword">struct</span> {
    requests []UpdateRequest
    <span class="hljs-comment">// æŒ‰ Pod åˆ†ç»„</span>
    by_pod := group_by(requests, pod_uid)
    <span class="hljs-comment">// æŒ‰èµ„æºç±»å‹åˆ†ç»„</span>
    by_resource := group_by(requests, resource_type)
}

ExecuteParallel(batch) {
    <span class="hljs-comment">// æ­¥éª¤ 1: å†…å­˜æ“ä½œï¼ˆæœ‰ä¾èµ–ï¼‰</span>
    memory_requests := filter(batch, resource=<span class="hljs-string">"memory"</span>)
    <span class="hljs-keyword">for</span> request in memory_requests {
        ExecuteMemoryUpdate(request)  <span class="hljs-comment">// ä¸²è¡Œ</span>
    }
    
    <span class="hljs-comment">// æ­¥éª¤ 2: CPU æ“ä½œï¼ˆç‹¬ç«‹ï¼‰</span>
    cpu_requests := filter(batch, resource=<span class="hljs-string">"cpu"</span>)
    
    <span class="hljs-comment">// åˆ›å»º goroutine æ± </span>
    workers := <span class="hljs-number">4</span>  <span class="hljs-comment">// 4 ä¸ªå¹¶è¡Œ worker</span>
    work_queue := <span class="hljs-built_in">make</span>(<span class="hljs-keyword">chan</span> UpdateRequest)
    
    <span class="hljs-comment">// å¯åŠ¨ worker</span>
    <span class="hljs-keyword">for</span> i := <span class="hljs-number">0</span>; i &lt; workers; i++ {
        <span class="hljs-keyword">go</span> Worker(work_queue)
    }
    
    <span class="hljs-comment">// åˆ†é…ä»»åŠ¡</span>
    <span class="hljs-keyword">for</span> request in cpu_requests {
        work_queue &lt;- request
    }
    
    <span class="hljs-built_in">close</span>(work_queue)
    wait_for_all()
}

æ€§èƒ½æå‡ï¼š

åœºæ™¯: <span class="hljs-number">200</span> ä¸ª Podï¼Œ<span class="hljs-number">4</span> ä¸ª CPU å¹¶è¡Œ worker

ä¸²è¡Œæ‰§è¡Œï¼š
â”œâ”€ å†…å­˜æ“ä½œ: <span class="hljs-number">50</span> Pod Ã— <span class="hljs-number">2</span> params Ã— <span class="hljs-number">1</span>ms = <span class="hljs-number">100</span>ms
â”œâ”€ CPU æ“ä½œ: <span class="hljs-number">200</span> Pod Ã— <span class="hljs-number">2</span> params Ã— <span class="hljs-number">1</span>ms = <span class="hljs-number">400</span>ms
â””â”€ æ€»è®¡: <span class="hljs-number">500</span>ms

å¹¶è¡Œæ‰§è¡Œï¼ˆ<span class="hljs-number">4</span> workersï¼‰ï¼š
â”œâ”€ å†…å­˜æ“ä½œ: <span class="hljs-number">50</span> Ã— <span class="hljs-number">2</span> Ã— <span class="hljs-number">1</span>ms = <span class="hljs-number">100</span>msï¼ˆä¸²è¡Œï¼‰
â”œâ”€ CPU æ“ä½œ: <span class="hljs-number">200</span> Ã— <span class="hljs-number">2</span> Ã— <span class="hljs-number">1</span>ms / <span class="hljs-number">4</span> = <span class="hljs-number">100</span>msï¼ˆå¹¶è¡Œï¼‰
â””â”€ æ€»è®¡: <span class="hljs-number">200</span>msï¼ˆæå‡ <span class="hljs-number">60</span>%ï¼‰
</code></pre>
<hr/>
<h2 data-id="heading-9">ç”Ÿäº§è°ƒä¼˜æŒ‡å—</h2>
<h3 data-id="heading-10">10.8 ResourceExecutor é…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># ResourceExecutor é…ç½®ç¤ºä¾‹</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">ConfigMap</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">koordlet-config</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">koordinator-system</span>
<span class="hljs-attr">data:</span>
  <span class="hljs-attr">resource-executor-config.yaml:</span> <span class="hljs-string">|
    resourceExecutor:
      # æ‰§è¡Œçº¿ç¨‹æ± 
      threadPoolSize: 4              # å¹¶è¡Œ worker æ•°
      queueSize: 1000                # ç­‰å¾…é˜Ÿåˆ—å¤§å°
      
      # æ‰§è¡Œå‚æ•°
      batchSize: 100                 # å•æ¬¡æ‰¹å¤„ç†å¤§å°
      batchInterval: 100ms           # æ‰¹å¤„ç†é—´éš”
      
      # è¶…æ—¶é…ç½®
      executionTimeout: 5s           # å•ä¸ªæ“ä½œè¶…æ—¶
      overallTimeout: 30s            # æ•´æ‰¹æ“ä½œè¶…æ—¶
      
      # é‡è¯•é…ç½®
      maxRetries: 3                  # æœ€å¤§é‡è¯•æ¬¡æ•°
      retryDelay: 100ms              # åˆå§‹é‡è¯•å»¶è¿Ÿ
      maxRetryDelay: 2s              # æœ€å¤§é‡è¯•å»¶è¿Ÿ
      
      # ä¼˜å…ˆçº§é˜Ÿåˆ—
      priorityQueueEnabled: true     # å¯ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—
      
      # å¢é‡æ›´æ–°
      incrementalUpdate: true        # å¯ç”¨å¢é‡æ›´æ–°
      changeThreshold: 0             # å˜åŒ–é˜ˆå€¼ï¼ˆ0=å…¨éƒ¨æ›´æ–°ï¼‰
      
      # æ—¥å¿—å’Œç›‘æ§
      verboseLogging: false          # è¯¦ç»†æ—¥å¿—
      metricsEnabled: true           # å¯ç”¨ç›‘æ§æŒ‡æ ‡
      slowLogThreshold: 500ms        # æ…¢æ“ä½œæ—¥å¿—é˜ˆå€¼
</span></code></pre>
<h3 data-id="heading-11">10.9 å¸¸è§é—®é¢˜æ’æŸ¥</h3>
<p><strong>é—®é¢˜ 1ï¼šCGroup æ“ä½œè¶…æ—¶</strong></p>
<pre><code class="hljs language-shell" lang="shell">è¯Šæ–­ï¼š

1. æ£€æŸ¥æ‰§è¡Œå»¶è¿Ÿ
<span class="hljs-meta prompt_">   $ </span><span class="bash">kubectl logs koordlet-xxx | grep <span class="hljs-string">"execution timeout"</span></span>
   
   å¦‚æœé¢‘ç¹è¶…æ—¶ï¼š
   â””â”€ ç³»ç»Ÿ I/O è¿‡è½½æˆ–æƒé™é—®é¢˜

2. æ£€æŸ¥ç³»ç»Ÿè´Ÿè½½
<span class="hljs-meta prompt_">   $ </span><span class="bash">top</span>
<span class="hljs-meta prompt_">   $ </span><span class="bash">iostat -x 1</span>
   
   å¦‚æœ I/O wait &gt; 50%ï¼š
   â””â”€ ç£ç›˜ I/O è¿‡è½½

3. æ£€æŸ¥ CGroup æ–‡ä»¶ç³»ç»Ÿ
<span class="hljs-meta prompt_">   $ </span><span class="bash"><span class="hljs-built_in">df</span> /sys/fs/cgroup</span>
<span class="hljs-meta prompt_">   $ </span><span class="bash"><span class="hljs-built_in">ls</span> -la /sys/fs/cgroup/cpu/...</span>
   
   å¦‚æœæ–‡ä»¶æ“ä½œæ…¢ï¼š
   â””â”€ CGroup æ–‡ä»¶ç³»ç»Ÿé—®é¢˜

è§£å†³æ–¹æ¡ˆï¼š
â”œâ”€ å¢åŠ  executionTimeout: 5s â†’ 10s
â”œâ”€ å‡å°‘ batchSize: 100 â†’ 50
â”œâ”€ å¢åŠ  batchInterval: 100ms â†’ 200ms
â””â”€ å¹¶è¡Œ worker æ•°ä¸è¦è¿‡å¤š
</code></pre>
<p><strong>é—®é¢˜ 2ï¼šå†…å­˜é™åˆ¶è®¾ç½®å¤±è´¥</strong></p>
<pre><code class="hljs language-matlab" lang="matlab">è¯Šæ–­ï¼š

<span class="hljs-number">1.</span> æ£€æŸ¥é”™è¯¯æ—¥å¿—
   $ kubectl logs koordlet-xxx | grep <span class="hljs-string">"EINVAL\|ERANGE"</span>
   
   å¦‚æœæ˜¾ç¤º memory.<span class="hljs-built_in">min</span> &gt; memory.<span class="hljs-built_in">max</span>ï¼š
   â””â”€ å‚æ•°è®¾ç½®é¡ºåºé”™è¯¯

<span class="hljs-number">2.</span> éªŒè¯å½“å‰ CGroup é…ç½®
   $ <span class="hljs-built_in">cat</span> /sys/fs/cgroup/memory/kubepods/pod-uid/memory.<span class="hljs-built_in">min</span>
   $ <span class="hljs-built_in">cat</span> /sys/fs/cgroup/memory/kubepods/pod-uid/memory.<span class="hljs-built_in">max</span>
   
   å¦‚æœ <span class="hljs-built_in">min</span> &gt; <span class="hljs-built_in">max</span>ï¼š
   â””â”€ ä¹‹å‰çš„æ“ä½œéƒ¨åˆ†å¤±è´¥

è§£å†³æ–¹æ¡ˆï¼š
â”œâ”€ ç¡®ä¿æ“ä½œé¡ºåº: <span class="hljs-built_in">min</span> &lt;= soft_limit &lt;= high &lt;= <span class="hljs-built_in">max</span>
â”œâ”€ å…ˆè°ƒå¤§ <span class="hljs-built_in">max</span>ï¼Œå†è°ƒå° <span class="hljs-built_in">min</span>
â”œâ”€ ä½¿ç”¨äº‹åŠ¡æ€§æ“ä½œç¡®ä¿ä¸€è‡´æ€§
</code></pre>
<p><strong>é—®é¢˜ 3ï¼šPod åˆ é™¤æœŸé—´çš„æ“ä½œå¤±è´¥</strong></p>
<pre><code class="hljs language-shell" lang="shell">è¯Šæ–­ï¼š

1. æ£€æŸ¥ ENOENT é”™è¯¯é¢‘ç‡
<span class="hljs-meta prompt_">   $ </span><span class="bash">promql: koordlet_resource_executor_errors{error=<span class="hljs-string">"ENOENT"</span>}</span>
   
   å¦‚æœé¢‘ç‡é«˜ï¼š
   â””â”€ Pod åˆ é™¤é¢‘ç‡é«˜ï¼Œæ­£å¸¸ç°è±¡

2. æ£€æŸ¥æ—¥å¿—ä¸­çš„é”™è¯¯å¤„ç†
<span class="hljs-meta prompt_">   $ </span><span class="bash">kubectl logs koordlet-xxx | grep <span class="hljs-string">"ENOENT"</span></span>
   
   å¦‚æœåªæœ‰æ—¥å¿—ï¼Œæ—  crashï¼š
   â””â”€ é”™è¯¯å¤„ç†æ­£ç¡®

è§£å†³æ–¹æ¡ˆï¼š
â”œâ”€ ç¡®ä¿ ENOENT é”™è¯¯è¢«æ­£ç¡®å¤„ç†
â”œâ”€ ä¸åº”è¯¥å¯¼è‡´ ResourceExecutor crash
â””â”€ ç›‘æ§é”™è¯¯ç‡ï¼Œå¼‚å¸¸å‘Šè­¦
</code></pre>
<h3 data-id="heading-12">10.10 ç›‘æ§æŒ‡æ ‡</h3>
<pre><code class="hljs language-promql" lang="promql"># ResourceExecutor å…³é”®æŒ‡æ ‡

# æ‰§è¡Œå»¶è¿Ÿ
koordlet_resource_executor_latency_milliseconds{operation="update"}
koordlet_resource_executor_latency_milliseconds{operation="evict"}

# æ‰§è¡ŒæˆåŠŸç‡
koordlet_resource_executor_success_total
koordlet_resource_executor_errors_total{error_type="ENOENT"}

# é˜Ÿåˆ—æ·±åº¦
koordlet_resource_executor_queue_depth

# æ‰¹é‡æ“ä½œçš„å¤§å°
koordlet_resource_executor_batch_size

# å¹¶è¡Œ worker çš„è´Ÿè½½
koordlet_resource_executor_worker_busy_ratio

# é‡è¯•æ¬¡æ•°
koordlet_resource_executor_retries_total

# æ…¢æ“ä½œæ—¥å¿—
koordlet_resource_executor_slow_operations_total
</code></pre>
<hr/>
<h2 data-id="heading-13">æ€»ç»“ - ç« èŠ‚è¦ç‚¹æ±‡æ€»</h2>
<h3 data-id="heading-14">10.11 å…³é”®æ¦‚å¿µé€ŸæŸ¥</h3>



































<table><thead><tr><th>æ¦‚å¿µ</th><th>å«ä¹‰</th><th>é‡è¦æ€§</th></tr></thead><tbody><tr><td><strong>å¢é‡æ›´æ–°</strong></td><td>åªæ›´æ–°å˜åŒ–çš„å‚æ•°</td><td>é«˜</td></tr><tr><td><strong>æ‰¹é‡æ“ä½œ</strong></td><td>åˆå¹¶å¤šä¸ªæ“ä½œï¼Œå‡å°‘ç³»ç»Ÿè°ƒç”¨</td><td>é«˜</td></tr><tr><td><strong>ä¼˜å…ˆçº§é˜Ÿåˆ—</strong></td><td>å…³é”®æ“ä½œä¼˜å…ˆæ‰§è¡Œ</td><td>ä¸­</td></tr><tr><td><strong>å¹¶è¡Œæ‰§è¡Œ</strong></td><td>å¤šçº¿ç¨‹å¹¶è¡Œå¤„ç†ç‹¬ç«‹æ“ä½œ</td><td>ä¸­</td></tr><tr><td><strong>é”™è¯¯é‡è¯•</strong></td><td>å¯é‡è¯•é”™è¯¯è‡ªåŠ¨é‡è¯•</td><td>é«˜</td></tr></tbody></table>
<h3 data-id="heading-15">10.12 æœ€ä½³å®è·µ</h3>
<ul>
<li><strong>å¯ç”¨å¢é‡æ›´æ–°ï¼Œé¿å…ä¸å¿…è¦çš„ CGroup æ“ä½œ</strong></li>
<li><strong>ä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œå…³é”®æ“ä½œä¼˜å…ˆæ‰§è¡Œ</strong></li>
<li><strong>æ­£ç¡®å¤„ç† ENOENT é”™è¯¯ï¼Œä¸åº”è¯¥å¯¼è‡´ crash</strong></li>
<li><strong>å¹¶è¡Œæ‰§è¡Œä¸ç›¸å…³çš„æ“ä½œï¼Œæé«˜ååé‡</strong></li>
<li><strong>ç›‘æ§æ‰§è¡Œå»¶è¿Ÿå’ŒæˆåŠŸç‡ï¼ŒåŠæ—¶å‘ç°é—®é¢˜</strong></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ComfyUI Docker é•œåƒéƒ¨ç½²æŒ‡å—]]></title>    <link>https://juejin.cn/post/7589835342146306058</link>    <guid>https://juejin.cn/post/7589835342146306058</guid>    <pubDate>2026-01-01T02:56:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589835342146306058" data-draft-id="7589903248619257882" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ComfyUI Docker é•œåƒéƒ¨ç½²æŒ‡å—"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC,Docker"/> <meta itemprop="datePublished" content="2026-01-01T02:56:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜è€èµµ"/> <meta itemprop="url" content="https://juejin.cn/user/3208848015890347"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ComfyUI Docker é•œåƒéƒ¨ç½²æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3208848015890347/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜è€èµµ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T02:56:08.000Z" title="Thu Jan 01 2026 02:56:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€é¡¹ç›®ç®€ä»‹</h2>
<p><strong>ComfyUI</strong> æ˜¯ä¸€æ¬¾åŸºäºèŠ‚ç‚¹å·¥ä½œæµçš„ Stable Diffusion å›¾å½¢ç•Œé¢ï¼Œæ”¯æŒé€šè¿‡å¯è§†åŒ–æ–¹å¼ç»„åˆå¤æ‚çš„å›¾åƒç”Ÿæˆæµç¨‹ã€‚</p>
<p><strong>ComfyUI-BOOT</strong> åŸºäºå®˜æ–¹ ComfyUI æ„å»ºï¼Œå†…ç½®ï¼š</p>
<ul>
<li>â€¢ Python è¿è¡Œç¯å¢ƒ</li>
<li>â€¢ PyTorchï¼ˆæŒ‰ CUDA / æ¶æ„åŒºåˆ†ï¼‰</li>
<li>â€¢ ComfyUI æœ¬ä½“</li>
<li>â€¢ å¯åŠ¨ä¸ä¸‹è½½è„šæœ¬</li>
</ul>
<p>ç”¨äºç®€åŒ– ComfyUI çš„éƒ¨ç½²ä¸å¯åŠ¨æµç¨‹ã€‚</p>
<h2 data-id="heading-1">äºŒã€è¿è¡Œå‰å‡†å¤‡</h2>
<h3 data-id="heading-2">1. ç³»ç»Ÿä¸ç¡¬ä»¶è¦æ±‚</h3>
<ul>
<li>â€¢ æ“ä½œç³»ç»Ÿï¼šLinuxï¼ˆæ¨è Ubuntu 20.04+ï¼‰</li>
<li>â€¢ Dockerï¼šå·²å®‰è£…å¹¶å¯æ­£å¸¸è¿è¡Œï¼ˆå»ºè®®ä½¿ç”¨ Docker 20.10+ ä»¥æ”¯æŒ <code>--gpus</code> å‚æ•°ï¼‰</li>
<li>â€¢ GPUï¼ˆå¯é€‰ï¼‰ï¼šNVIDIA GPUï¼ˆæ˜¯å¦å¯ç”¨å–å†³äº PyTorch å¯¹è¯¥æ¶æ„çš„æ”¯æŒï¼‰</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>â€¢ CUDA ç‰ˆæœ¬çš„å¯ç”¨æ€§ <strong>ç”± PyTorch å®˜æ–¹é¢„ç¼–è¯‘åŒ…å†³å®š</strong>ï¼Œè€Œé NVIDIA é©±åŠ¨æˆ– CUDA Toolkit æœ¬èº«ã€‚</li>
<li>â€¢ å³ä½¿ç³»ç»Ÿæœªå®‰è£… CUDA Toolkitï¼Œä¹Ÿä¸å½±å“ä½¿ç”¨å¯¹åº” CUDA æ ‡ç­¾çš„é•œåƒã€‚</li>
</ul>
</blockquote>
<h3 data-id="heading-3">2. å®‰è£… Docker ç¯å¢ƒ</h3>
<p>ä½¿ç”¨ä»¥ä¸‹ä¸€é”®è„šæœ¬å¿«é€Ÿéƒ¨ç½² Docker åŠç›¸å…³ç»„ä»¶ï¼ˆåŒ…å« Docker Engineã€Docker Compose ç­‰ï¼‰ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">bash</span> &lt;(wget -qO- <span class="hljs-attribute">https</span>:<span class="hljs-comment">//xuanyuan.cloud/docker.sh)</span>
</code></pre>
<p>è„šæœ¬æ‰§è¡Œå®Œæˆåï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤éªŒè¯ Docker æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p>
<pre><code class="hljs language-css" lang="css">docker <span class="hljs-attr">--versiondocker</span> compose version
</code></pre>
<p>è‹¥è¾“å‡º Docker ç‰ˆæœ¬ä¿¡æ¯ï¼ˆå¦‚ <code>Docker version 26.1.4, build 5650f9b</code>ï¼‰ï¼Œåˆ™è¯´æ˜å®‰è£…æˆåŠŸã€‚</p>
<h3 data-id="heading-4">3. é…ç½® Docker æœåŠ¡</h3>
<p>å¯åŠ¨ Docker æœåŠ¡å¹¶è®¾ç½®å¼€æœºè‡ªå¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo systemctl <span class="hljs-built_in">enable</span> --now docker
</code></pre>
<p>å¯¹äº NVIDIA GPU ç”¨æˆ·ï¼Œéœ€å®‰è£… NVIDIA Container Toolkit ä»¥æ”¯æŒ GPU èµ„æºè°ƒåº¦ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">distribution=$(. /etc/os-release;<span class="hljs-built_in">echo</span> $ID<span class="hljs-variable">$VERSION_ID</span>)curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | sudo apt-key add -curl -s -L https://nvidia.github.io/nvidia-docker/<span class="hljs-variable">$distribution</span>/nvidia-docker.list | sudo <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/nvidia-docker.listsudo apt-get update &amp;&amp; sudo apt-get install -y nvidia-container-toolkitsudo systemctl restart docker
</code></pre>
<p>å¦‚éœ€ä½¿ç”¨ NVIDIA GPUï¼Œè¯·ç¡®ä¿ï¼š</p>
<pre><code class="hljs">nvidia-smi
</code></pre>
<p>å¯æ­£å¸¸è¾“å‡ºæ˜¾å¡ä¿¡æ¯ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€é•œåƒå‡†å¤‡</h2>
<h3 data-id="heading-6">æ‹‰å– ComfyUI-BOOT é•œåƒ</h3>
<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é€šè¿‡è½©è¾•é•œåƒè®¿é—®æ”¯æŒåŸŸåæ‹‰å–æ¨èç‰ˆæœ¬çš„ ComfyUI-BOOT é•œåƒï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">docker pull xxx.xuanyuan.run/yanwk/comfyui-boot:cu128-slim
</code></pre>
<blockquote>
<p>è¯´æ˜ï¼š<code>cu128-slim</code> ä¸ºæ¨èæ ‡ç­¾ï¼ŒåŒ…å« CUDA 12.8 æ”¯æŒï¼Œé€‚åˆæ–°æ‰‹ä½¿ç”¨ã€‚å¦‚éœ€å…¶ä»–ç‰ˆæœ¬ï¼Œå¯è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fxuanyuan.cloud%2Fr%2Fyanwk%2Fcomfyui-boot%2Ftags" title="https://xuanyuan.cloud/r/yanwk/comfyui-boot/tags" target="_blank" ref="nofollow noopener noreferrer">ComfyUI-BOOT é•œåƒæ ‡ç­¾åˆ—è¡¨</a> æŸ¥çœ‹æ‰€æœ‰å¯ç”¨æ ‡ç­¾ã€‚</p>
</blockquote>
<p>æ‹‰å–å®Œæˆåï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤éªŒè¯é•œåƒæ˜¯å¦æˆåŠŸä¸‹è½½ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">docker images | <span class="hljs-keyword">grep</span> comfyui-boot
</code></pre>
<p>è‹¥è¾“å‡ºç±»ä¼¼ä»¥ä¸‹å†…å®¹ï¼Œåˆ™è¯´æ˜é•œåƒæ‹‰å–æˆåŠŸï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">xxx.xuanyuan.run/yanwk/comfyui-boot   cu128-slim   abc12345   <span class="hljs-number">2</span> weeks ago   <span class="hljs-number">15.2</span>GB
</code></pre>
<h2 data-id="heading-7">å››ã€å¿«é€Ÿå¼€å§‹ï¼ˆNVIDIA GPUï¼‰</h2>
<h3 data-id="heading-8">1. åˆ›å»ºæœ¬åœ°ç›®å½•</h3>
<p>è¯¥ç›®å½•ç»“æ„ <strong>ä¸å®˜æ–¹ README ä¿æŒä¸€è‡´</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> -p \  storage \  storage-models/models \  storage-models/hf-hub \  storage-models/torch-hub \  storage-user/input \  storage-user/output \  storage-user/workflows
</code></pre>
<h3 data-id="heading-9">2. å¯åŠ¨å®¹å™¨</h3>
<pre><code class="hljs language-bash" lang="bash">docker run -it --<span class="hljs-built_in">rm</span> \  --name comfyui \  --gpus all \  -p 8188:8188 \  -v <span class="hljs-string">"<span class="hljs-subst">$(pwd)</span>"</span>/storage:/root \  -v <span class="hljs-string">"<span class="hljs-subst">$(pwd)</span>"</span>/storage-models/models:/root/ComfyUI/models \  -v <span class="hljs-string">"<span class="hljs-subst">$(pwd)</span>"</span>/storage-models/hf-hub:/root/.cache/huggingface/hub \  -v <span class="hljs-string">"<span class="hljs-subst">$(pwd)</span>"</span>/storage-models/torch-hub:/root/.cache/torch/hub \  -v <span class="hljs-string">"<span class="hljs-subst">$(pwd)</span>"</span>/storage-user/input:/root/ComfyUI/input \  -v <span class="hljs-string">"<span class="hljs-subst">$(pwd)</span>"</span>/storage-user/output:/root/ComfyUI/output \  -v <span class="hljs-string">"<span class="hljs-subst">$(pwd)</span>"</span>/storage-user/workflows:/root/ComfyUI/user/default/workflows \  xxx.xuanyuan.run/yanwk/comfyui-boot:cu128-slim
</code></pre>
<blockquote>
<p>æç¤ºï¼šå¦‚é‡å…¼å®¹æ€§é—®é¢˜ï¼Œå¯å°è¯•æ·»åŠ  <code>-e CLI_ARGS="--disable-xformers"</code> å‚æ•°ã€‚</p>
</blockquote>
<p>å¯åŠ¨åï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">http:<span class="hljs-comment">//localhost:8188</span>
</code></pre>
<h2 data-id="heading-10">äº”ã€CUDA ä¸ GPU æ¶æ„å…¼å®¹æ€§è¯´æ˜</h2>
<h3 data-id="heading-11">1. å®˜æ–¹å…¼å®¹æ€§çŸ©é˜µï¼ˆæ‘˜è¦ï¼‰</h3>
<p>CUDA æ ‡ç­¾</p>
<p>Blackwell</p>
<p>Hopper</p>
<p>Ada</p>
<p>Ampere</p>
<p>Turing</p>
<p>Volta</p>
<p>Pascal</p>
<p>Maxwell</p>
<p>cu130</p>
<p>âœ”ï¸</p>
<p>âœ”ï¸</p>
<p>âœ”ï¸</p>
<p>âœ”ï¸</p>
<p>âœ”ï¸</p>
<p>âŒ</p>
<p>âŒ</p>
<p>âŒ</p>
<p>cu128 â­</p>
<p>âœ”ï¸</p>
<p>âœ”ï¸</p>
<p>âœ”ï¸</p>
<p>âœ”ï¸</p>
<p>âœ”ï¸</p>
<p>âœ”ï¸</p>
<p>âŒ</p>
<p>âŒ</p>
<p>cu126</p>
<p>âŒ</p>
<p>âœ”ï¸</p>
<p>âœ”ï¸</p>
<p>âœ”ï¸</p>
<p>âœ”ï¸</p>
<p>âœ”ï¸</p>
<p>âœ”ï¸</p>
<p>âœ”ï¸</p>
<p>â­ å®˜æ–¹æ¨èä½¿ç”¨ <strong>CUDA 12.8ï¼ˆcu128ï¼‰</strong>ã€‚</p>
<h3 data-id="heading-12">2. é‡è¦è¯´æ˜ï¼ˆå®˜æ–¹åŸæ„ï¼‰</h3>
<ul>
<li>â€¢ ä»¥ä¸Šé™åˆ¶ <strong>å¹¶é NVIDIA CUDA Toolkit çš„é™åˆ¶</strong></li>
<li>â€¢ è€Œæ˜¯ <strong>PyTorch å®˜æ–¹ä¸ºæ§åˆ¶äºŒè¿›åˆ¶ä½“ç§¯è€Œåšå‡ºçš„æ”¯æŒå–èˆ</strong></li>
<li>â€¢ æ˜¯å¦å¯ç”¨ä»¥ PyTorch å®˜æ–¹å‘å¸ƒä¸ºå‡†</li>
</ul>
<h2 data-id="heading-13">å…­ã€é•œåƒæ ‡ç­¾è¯´æ˜</h2>
<h3 data-id="heading-14">1. Slimï¼ˆæ¨èæ–°æ‰‹ï¼‰</h3>
<ul>
<li>â€¢ ä»…åŒ…å« ComfyUI ä¸ Manager</li>
<li>â€¢ é¢„è£…å¤§é‡ä¾èµ–ï¼Œä¾¿äºåç»­å®‰è£…è‡ªå®šä¹‰èŠ‚ç‚¹</li>
</ul>
<p>å¯ç”¨æ ‡ç­¾ç¤ºä¾‹ï¼š</p>
<ul>
<li>â€¢ <code>cu126-slim</code></li>
<li>â€¢ <code>cu128-slim</code> â­</li>
<li>â€¢ <code>cu130-slim</code>ï¼ˆæ—  xFormersï¼‰</li>
</ul>
<h3 data-id="heading-15">2. Megapakï¼ˆæ•´åˆåŒ…ï¼‰</h3>
<ul>
<li>â€¢ åŒ…å«å¸¸ç”¨è‡ªå®šä¹‰èŠ‚ç‚¹</li>
<li>â€¢ åŒ…å«ç¼–è¯‘å·¥å…·é“¾</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<ul>
<li>â€¢ <code>cu126-megapak</code></li>
<li>â€¢ <code>cu128-megapak</code></li>
</ul>
<h3 data-id="heading-16">3. å…¶ä»–æ ‡ç­¾</h3>
<ul>
<li>â€¢ <code>nightly</code>ï¼šPyTorch å¼€å‘é¢„è§ˆç‰ˆ</li>
<li>â€¢ <code>rocm</code> / <code>rocm6</code>ï¼šAMD GPU</li>
<li>â€¢ <code>xpu-cn</code>ï¼šIntel GPUï¼ˆå›½å†…ç½‘ç»œä¼˜åŒ–ï¼‰</li>
<li>â€¢ <code>cpu</code>ï¼šä»… CPU</li>
<li>â€¢ <code>archived</code>ï¼šå·²é€€å½¹ç‰ˆæœ¬</li>
</ul>
<h2 data-id="heading-17">ä¸ƒã€CLI_ARGS å‚æ•°è¯´æ˜</h2>
<p><code>CLI_ARGS</code> ç”¨äºå‘ ComfyUI å¯åŠ¨è„šæœ¬ä¼ é€’å‚æ•°ï¼ˆå¯é€‰ï¼‰ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">  -e <span class="hljs-attr">CLI_ARGS</span>=<span class="hljs-string">"--disable-xformers"</span>
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>â€¢ å¹¶éæ‰€æœ‰é•œåƒéƒ½æ”¯æŒ xFormersï¼ˆå¦‚ cu130 æ˜ç¡®ä¸æ”¯æŒï¼‰</li>
<li>â€¢ å‚æ•°æ˜¯å¦å¯ç”¨å–å†³äºé•œåƒæ ‡ç­¾ä¸ PyTorch æ„å»ºæ–¹å¼</li>
<li>â€¢ å¦‚é‡å¯åŠ¨å¼‚å¸¸ï¼Œè¯·ä¼˜å…ˆç§»é™¤ CLI_ARGS è¿›è¡Œæ’æŸ¥</li>
<li>â€¢ å¯¹æ–°æ‰‹æ¥è¯´ï¼Œé€šå¸¸æ— éœ€æ·»åŠ æ­¤å‚æ•°å³å¯æ­£å¸¸ä½¿ç”¨</li>
</ul>
</blockquote>
<h2 data-id="heading-18">å…«ã€å®˜æ–¹èµ„æº</h2>
<h3 data-id="heading-19">å®˜æ–¹æ–‡æ¡£</h3>
<ul>
<li>â€¢ ComfyUI-BOOT å®˜æ–¹ GitHub <code>https://github.com/YanWenKun/ComfyUI-Docker</code>ï¼šé¡¹ç›®æºä»£ç åŠè¯¦ç»†æ–‡æ¡£</li>
<li>â€¢ ComfyUI å®˜æ–¹æ–‡æ¡£ <code>https://github.com/comfyanonymous/ComfyUI</code>ï¼šComfyUI æ ¸å¿ƒåŠŸèƒ½ä½¿ç”¨æŒ‡å—</li>
</ul>
<h3 data-id="heading-20">é•œåƒèµ„æº</h3>
<ul>
<li>â€¢ ComfyUI-BOOT é•œåƒæ–‡æ¡£ï¼ˆè½©è¾•ï¼‰<code>https://xuanyuan.cloud/r/yanwk/comfyui-boot</code>ï¼šè½©è¾•é•œåƒå¹³å°æ–‡æ¡£é¡µé¢</li>
<li>â€¢ ComfyUI-BOOT é•œåƒæ ‡ç­¾åˆ—è¡¨ <code>https://xuanyuan.cloud/r/yanwk/comfyui-boot/tags</code>ï¼šæ‰€æœ‰å¯ç”¨é•œåƒç‰ˆæœ¬æ ‡ç­¾</li>
</ul>
<h3 data-id="heading-21">æŠ€æœ¯ç¤¾åŒº</h3>
<ul>
<li>â€¢ ComfyUI è®ºå› <code>https://comfyui.com/forum</code>ï¼šç”¨æˆ·è®¨è®ºä¸é—®é¢˜è§£ç­”</li>
<li>â€¢ Docker å®˜æ–¹æ–‡æ¡£ <code>https://docs.docker.com</code>ï¼šDocker å®¹å™¨æŠ€æœ¯è¯¦ç»†æŒ‡å—</li>
<li>â€¢ NVIDIA Container Toolkit æ–‡æ¡£ <code>https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/latest/index.html</code>ï¼šGPU å®¹å™¨åŒ–éƒ¨ç½²æŒ‡å—</li>
</ul>
<h2 data-id="heading-22">ç»“è¯­</h2>
<p>ä½¿ç”¨è½©è¾•é•œåƒè®¿é—®æ”¯æŒå¯æ”¹å–„ ComfyUI-BOOT é•œåƒçš„è®¿é—®ä½“éªŒï¼Œé•œåƒæ¥æºäºå®˜æ–¹å…¬å…±ä»“åº“ã€‚</p>
<p>å¦‚éœ€è¿›è¡Œç›®å½•å®šåˆ¶ã€ç”Ÿäº§åŒ–éƒ¨ç½²ã€å¤š GPU ç®¡ç†ç­‰é«˜çº§é…ç½®ï¼Œè¯·åœ¨å……åˆ†ç†è§£å®˜æ–¹è¡Œä¸ºçš„å‰æä¸‹è‡ªè¡Œè°ƒæ•´ã€‚</p>
<p>å¦‚é‡é—®é¢˜ï¼Œä¼˜å…ˆå‚è€ƒ GitHub Issues ä¸å®˜æ–¹æ–‡æ¡£è¯´æ˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ§  ä»é›¶å¼€å§‹ï¼šçº¯æ‰‹å†™ä¸€ä¸ªæ”¯æŒæµå¼ JSON è§£æçš„ React Renderer]]></title>    <link>https://juejin.cn/post/7589907831198433306</link>    <guid>https://juejin.cn/post/7589907831198433306</guid>    <pubDate>2026-01-01T01:10:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589907831198433306" data-draft-id="7589897523268550666" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ§  ä»é›¶å¼€å§‹ï¼šçº¯æ‰‹å†™ä¸€ä¸ªæ”¯æŒæµå¼ JSON è§£æçš„ React Renderer"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,æ•°æ®ç»“æ„"/> <meta itemprop="datePublished" content="2026-01-01T01:10:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ§  ä»é›¶å¼€å§‹ï¼šçº¯æ‰‹å†™ä¸€ä¸ªæ”¯æŒæµå¼ JSON è§£æçš„ React Renderer
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T01:10:32.000Z" title="Thu Jan 01 2026 01:10:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸŒŠ Part 1 â€” ä¸ºä»€ä¹ˆè¦æ”¯æŒæµå¼ JSONï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šä½ æœ‰ä¸€ä¸ª 10MB çš„ JSON æ–‡ä»¶ï¼Œä»ç½‘ç»œä¸Šé£é€Ÿä¼ æ¥ã€‚<br/>
å¦‚æœä½ ç›´æ¥ <code>JSON.parse()</code> â€”â€” å˜­ ğŸ’¥ ä¸€ä¸‹å­å†…å­˜åƒå…‰ï¼Œè¿˜å¾—ç­‰å¾…æ•´ä¸ªæ–‡ä»¶ä¸‹è½½å®Œã€‚</p>
<p>è€Œæˆ‘ä»¬èªæ˜çš„åšæ³•æ˜¯ï¼š<br/>
åƒçœ‹ Netflix ä¸€æ ·â€œè¾¹ä¼ è¾¹æ’­â€ï¼<br/>
â€“ JSON æ•°æ®ä¸€è¾¹ä¼ è¾“ï¼Œä¸€è¾¹è¢«è§£æï¼Œç”šè‡³å¯ä»¥è¾¹æ¸²æŸ“ UIã€‚</p>
<p>è¿™å°±æ˜¯æ‰€è°“çš„ <strong>æµå¼ JSON è§£æ (Streaming JSON Parsing)</strong> ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ”¬ Part 2 â€” æ¶æ„æ‹†è§£ï¼šæˆ‘ä»¬æƒ³è¦ä»€ä¹ˆä¸œè¥¿ï¼Ÿ</h2>
<blockquote>
<p>æˆ‘ä»¬åƒå¨å¸ˆä¸€æ ·å¤‡èœï¼Œå…ˆæƒ³æ¸…æ¥šè¦åšçš„èœç³»ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬æ ¸å¿ƒæ¨¡å—å¤§æ¦‚é•¿è¿™æ ·ğŸ‘‡ï¼š</p>
<pre><code class="hljs language-java" lang="java">+-----------------------------------------+
|          React Stream Renderer          |
+-----------------------------------------+
| <span class="hljs-number">1</span>ï¸âƒ£ Stream <span class="hljs-title function_">Parser</span> <span class="hljs-params">(é€å­—èŠ‚å–‚é£Ÿçš„JSONè§£æå™¨)</span> |
| <span class="hljs-number">2</span>ï¸âƒ£ Fiber <span class="hljs-title function_">Scheduler</span> <span class="hljs-params">(ä»»åŠ¡è°ƒåº¦ä¸æ›´æ–°é˜Ÿåˆ—)</span>  |
| <span class="hljs-number">3</span>ï¸âƒ£ Virtual Element <span class="hljs-title function_">Builder</span> <span class="hljs-params">(å°†JSONè½¬VNode)</span>|
| <span class="hljs-number">4</span>ï¸âƒ£ Host <span class="hljs-title function_">Renderer</span> <span class="hljs-params">(å°†VNodeæ¸²æŸ“æˆDOM)</span>      |
+-----------------------------------------+
</code></pre>
<p>ç®€å•æ¦‚å¿µå¯¹åº”è¡¨ï¼š</p>

























<table><thead><tr><th>æ¨¡å—</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>Stream Parser</td><td>æµå¼è§£æ JSON æ•°æ®å­—ç¬¦ä¸²</td></tr><tr><td>Fiber Scheduler</td><td>ç®¡ç†ä»»åŠ¡çš„ä¼˜å…ˆçº§ï¼ˆæ¨¡æ‹Ÿ React Fiberï¼‰</td></tr><tr><td>Virtual Element Builder</td><td>å°† JSON è½¬æ¢ä¸º React Element æ ‘</td></tr><tr><td>Host Renderer</td><td>å°† Element çœŸæ­£æŒ‚è½½åˆ° DOM ä¸Š</td></tr></tbody></table>
<p>âœ¨ æˆ‘ä»¬ä»Šå¤©çš„é‡ç‚¹åœ¨äºå‰ä¸¤ä¸ªæ¨¡å— â€”â€” æµå¼è§£æ &amp; ç®€å•æ¸²æŸ“è°ƒåº¦ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸª„ Part 3 â€” çº¯æ‰‹å†™æµå¼ JSON è§£æå™¨</h2>
<p>æˆ‘ä»¬ä¸ç”¨ <code>JSON.parse()</code>ã€‚<br/>
æˆ‘ä»¬è¦ç”¨æœ€â€œæ¥åœ°æ°”â€çš„æ–¹å¼ï¼šä¸€ä¸ªçŠ¶æ€æœº ğŸ§©ã€‚</p>
<p>æ€è·¯å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä¸ä¸€æ¬¡æ€§è¯»å–æ‰€æœ‰æ•°æ®ï¼›</li>
<li>æ¯æ¬¡åªè§£æä¸€å°æ®µï¼›</li>
<li>å½“ä¸€ä¸ª JSON å¯¹è±¡å®Œæˆåè§¦å‘å›è°ƒï¼›</li>
<li>å‰©ä¸‹çš„æš‚å­˜åœ¨ buffer ä¸­ã€‚</li>
</ol>
<p>è®©æˆ‘ä»¬ç¡¬æ ¸å¼€å¹²ğŸ’ªï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamJSONParser</span> {
  <span class="hljs-keyword">constructor</span>(onObject) {
    <span class="hljs-keyword">this</span>.buffer = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">this</span>.depth = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">this</span>.inString = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>.onObject = onObject;
  }

  feed(chunk) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> char of chunk) {
      <span class="hljs-keyword">this</span>.buffer += char;

      <span class="hljs-keyword">if</span> (char === <span class="hljs-string">'"'</span> &amp;&amp; <span class="hljs-keyword">this</span>.buffer[<span class="hljs-keyword">this</span>.buffer.length - <span class="hljs-number">2</span>] !== <span class="hljs-string">'\') {
        this.inString = !this.inString;
      }

      if (!this.inString) {
        if (char === '</span>{<span class="hljs-string">' || char === '</span>[<span class="hljs-string">') this.depth++;
        if (char === '</span>}<span class="hljs-string">' || char === '</span>]<span class="hljs-string">') this.depth--;
      }

      if (this.depth === 0 &amp;&amp; !this.inString &amp;&amp; this.buffer.trim()) {
        try {
          const obj = JSON.parse(this.buffer);
          this.onObject(obj);
          this.buffer = '</span><span class="hljs-string">';
        } catch (err) {
          // æœªå®Œæˆçš„ JSONï¼Œç»§ç»­ç§¯ç´¯
        }
      }
    }
  }
}
</span></code></pre>
<p>ğŸ è§£æé€»è¾‘çš„å“²å­¦å¯ä»¥ä¸€å¥è¯æ€»ç»“ï¼š</p>
<blockquote>
<p>"ä¸è¦æ€¥ç€åæ•°æ®ï¼Œç»†åš¼æ…¢å’½ï¼Œå¾…æ—¶æœºæˆç†Ÿï¼Œä¸€å£åä¸ªé”®å€¼å¯¹ã€‚"</p>
</blockquote>
<hr/>
<h2 data-id="heading-3">ğŸ§© Part 4 â€” JSON åˆ° React Element</h2>
<p>æˆ‘ä»¬å®šä¹‰ä¸€ç§ç®€å•çš„ JSON åè®®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"div"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"props"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"className"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"box"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"children"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"h1"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"children"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"Hello Stream!"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ¥ç€å†™ä¸€ä¸ªå°çš„è½¬æ¢å™¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">function createElementFromJSON(node) {
  if (typeof <span class="hljs-attr">node</span> === <span class="hljs-string">'string'</span>) return document.createTextNode(node)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">el</span> = document.createElement(node.type)<span class="hljs-comment">;</span>
  if (node.props) {
    for (const key in node.props) {
      el<span class="hljs-section">[key]</span> = node.props<span class="hljs-section">[key]</span><span class="hljs-comment">;</span>
    }
  }
  if (node.children) {
    node.children.forEach(<span class="hljs-attr">child</span> =&gt; {
      el.appendChild(createElementFromJSON(child))<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
  }
  return el<span class="hljs-comment">;</span>
}
</code></pre>
<p>è¿™å°±åƒ React.createElement çš„ç®€é™‹å±±å¯¨ç‰ˆï¼Œä¸è¿‡å®ƒå®Œå…¨æœåŠ¡äºæˆ‘ä»¬çš„å°æ¸²æŸ“å™¨ ğŸ‘¶ã€‚</p>
<hr/>
<h2 data-id="heading-4">âš¡ Part 5 â€” æµå¼æ¸²æŸ“ç®¡çº¿ï¼</h2>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥æŠŠä¸€åˆ‡ä¸²èµ·æ¥äº†ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">root</span> = document.getElementById(<span class="hljs-string">'root'</span>)<span class="hljs-comment">;</span>

const <span class="hljs-attr">parser</span> = new StreamJSONParser(obj =&gt; {
  const <span class="hljs-attr">element</span> = createElementFromJSON(obj)<span class="hljs-comment">;</span>
  root.appendChild(element)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>

// æ¨¡æ‹Ÿç½‘ç»œæµ
const <span class="hljs-attr">chunks</span> = [
  <span class="hljs-string">'{"type":"div","children":["He'</span>,
  <span class="hljs-string">'llo "]}{"type":"p","children":["W'</span>,
  <span class="hljs-string">'orld"]}'</span>
]<span class="hljs-comment">;</span>

(async function streamFeed() {
  for (const chunk of chunks) {
    parser.feed(chunk)<span class="hljs-comment">;</span>
    await new Promise(<span class="hljs-attr">r</span> =&gt; setTimeout(r, <span class="hljs-number">500</span>))<span class="hljs-comment">;</span>
  }
})()<span class="hljs-comment">;</span>
</code></pre>
<p>ğŸ’¡ æ¯éš”åŠç§’å–‚ä¸€å£ï¼Œå¤šä¹ˆåƒ React çš„ <code>Suspense</code>ï¼è¿™ä¹Ÿæ˜¯<strong>åŒä¸€ä¸ªæ€æƒ³çš„ç¥–å®—ç‰ˆæœ¬</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-5">ğŸª¶ Part 6 â€” Fiber? è°ƒåº¦? éšç¼˜ç‰ˆ ğŸ˜„</h2>
<p>å½“ç„¶ï¼Œå¦‚æœä½ çœŸçš„æƒ³æ¨¡ä»¿ React Fiberï¼Œå¯ä»¥åŠ ä¸€ä¸ªâ€œä»»åŠ¡ä¼˜å…ˆçº§é˜Ÿåˆ—â€ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MiniScheduler</span> {
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">this</span>.queue = [];
    <span class="hljs-keyword">this</span>.working = <span class="hljs-literal">false</span>;
  }

  schedule(task) {
    <span class="hljs-keyword">this</span>.queue.push(task);
    <span class="hljs-keyword">this</span>.run();
  }

  async run() {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.working) <span class="hljs-keyword">return</span>;
    <span class="hljs-keyword">this</span>.working = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">while</span> (<span class="hljs-keyword">this</span>.queue.length) {
      <span class="hljs-keyword">const</span> task = <span class="hljs-keyword">this</span>.queue.shift();
      task();
      await new Promise(r =&gt; setTimeout(r)); <span class="hljs-comment">// æ¨¡ä»¿å¾®ä»»åŠ¡</span>
    }
    <span class="hljs-keyword">this</span>.working = <span class="hljs-literal">false</span>;
  }
}
</code></pre>
<p>ç†è®ºä¸Šä½ å¯ä»¥æŠŠ DOM æ›´æ–°æ”¾è¿› <code>schedule()</code>ï¼Œæ§åˆ¶æ›´æ–°é¢‘ç‡ï¼Œä»è€Œå®ç°â€œå¹³æ»‘çš„ UI æ›´æ–°â€ğŸŒˆã€‚</p>
<hr/>
<h2 data-id="heading-6">ğŸ¬ Part 7 â€” æ€»ç»“ &amp; å½©è›‹</h2>
<p>æˆ‘ä»¬ä»Šå¤©å¹²äº†è¿™äº›äº‹ï¼š</p>

























<table><thead><tr><th>æ¨¡å—</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>StreamJSONParser</td><td>é€å­—èŠ‚è§£æ JSON æµ</td></tr><tr><td>Element Builder</td><td>ä» JSON åˆ›å»º DOM</td></tr><tr><td>Renderer</td><td>ç»„è£… UI ç®¡çº¿</td></tr><tr><td>Scheduler</td><td>æ¨¡æ‹Ÿ React Fiber è°ƒåº¦</td></tr></tbody></table>
<hr/>
<p>âœ¨ <strong>å“²å­¦æ€è€ƒï¼š</strong></p>
<blockquote>
<p>React ä¹‹æ‰€ä»¥å¼ºå¤§ï¼Œå¹¶ä¸æ˜¯å› ä¸ºå®ƒå†™äº†100ä¸‡è¡Œä»£ç ï¼Œ<br/>
è€Œæ˜¯å› ä¸ºå®ƒæŠŠâ€œæ—¶é—´â€å’Œâ€œç©ºé—´â€çš„é—®é¢˜æ‹†å¼€äº†å¤„ç†ã€‚</p>
</blockquote>
<p>ä½ åˆšåˆšå†™çš„è¿™å‡ åè¡Œï¼Œå°±æ˜¯ React çš„çµé­‚ç¼©å½±ï¼š<br/>
<strong>å¼‚æ­¥ + æµå¼ + Declarative + Incremental</strong>ã€‚</p>
<hr/>
<p>ğŸ‰ <strong>å½©è›‹å»¶ä¼¸ç»ƒä¹ ï¼š</strong></p>
<ol>
<li>è®©æµå¼è§£ææ”¯æŒåµŒå¥—ç»„ä»¶ï¼›</li>
<li>åœ¨æ¸²æŸ“ä¸­åŠ å…¥è™šæ‹ŸèŠ‚ç‚¹ diffï¼›</li>
<li>æ”¯æŒ Suspenseï¼šå½“è§£æåˆ°æœªå®Œæˆçš„ JSON èŠ‚ç‚¹æ—¶æ˜¾ç¤º Loadingï¼›</li>
<li>æœ€åï¼Œå¯ä»¥è€ƒè™‘æ¥å…¥ WebSocketï¼Œè®©æœåŠ¡å™¨å®æ—¶æ¨é€è™šæ‹ŸèŠ‚ç‚¹ï¼</li>
</ol>
<hr/>
<blockquote>
<p>ğŸ‘‹ å¦‚æœæœ‰ä¸€å¤©ï¼Œä½ åœ¨å‡Œæ™¨ä¸‰ç‚¹è°ƒè¯• Fiber æ ‘ï¼Œè¯·è®°å¾—è¿™ä¸€å¥è¯ï¼š<br/>
<strong>æˆ‘ä»¬ä¸æ˜¯åœ¨é€ è½®å­ï¼Œæˆ‘ä»¬åœ¨å’Œè½®å­ä¸€èµ·è½¬åŠ¨å®‡å®™ã€‚</strong> ğŸŒ€ğŸ’«</p>
</blockquote>
<hr/>
<p>ğŸ§© <strong>å®Œæ•´æ•™å­¦ä»£ç åˆé›†ï¼ˆé€‚åˆå®éªŒï¼‰ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamJSONParser</span> {
  <span class="hljs-keyword">constructor</span>(onObject) {
    <span class="hljs-keyword">this</span>.buffer = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">this</span>.depth = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">this</span>.inString = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">this</span>.onObject = onObject;
  }
  feed(chunk) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> char of chunk) {
      <span class="hljs-keyword">this</span>.buffer += char;
      <span class="hljs-keyword">if</span> (char === <span class="hljs-string">'"'</span> &amp;&amp; <span class="hljs-keyword">this</span>.buffer[<span class="hljs-keyword">this</span>.buffer.length - <span class="hljs-number">2</span>] !== <span class="hljs-string">'\') {
        this.inString = !this.inString;
      }
      if (!this.inString) {
        if (char === '</span>{<span class="hljs-string">' || char === '</span>[<span class="hljs-string">') this.depth++;
        if (char === '</span>}<span class="hljs-string">' || char === '</span>]<span class="hljs-string">') this.depth--;
      }
      if (this.depth === 0 &amp;&amp; !this.inString &amp;&amp; this.buffer.trim()) {
        try {
          const obj = JSON.parse(this.buffer);
          this.onObject(obj);
          this.buffer = '</span><span class="hljs-string">';
        } catch (err) {}
      }
    }
  }
}

function createElementFromJSON(node) {
  if (typeof node === '</span>string<span class="hljs-string">') return document.createTextNode(node);
  const el = document.createElement(node.type);
  if (node.props) {
    for (const key in node.props) el[key] = node.props[key];
  }
  if (node.children) {
    node.children.forEach(child =&gt; el.appendChild(createElementFromJSON(child)));
  }
  return el;
}

const root = document.getElementById('</span>root<span class="hljs-string">');
const parser = new StreamJSONParser(obj =&gt; {
  const element = createElementFromJSON(obj);
  root.appendChild(element);
});

(async function simulateStream() {
  const chunks = [
    '</span>{<span class="hljs-string">"type"</span>:<span class="hljs-string">"h1"</span>,<span class="hljs-string">"children"</span>:[<span class="hljs-string">"Stream JSON "</span>]}<span class="hljs-string">',
    '</span>{<span class="hljs-string">"type"</span>:<span class="hljs-string">"p"</span>,<span class="hljs-string">"children"</span>:[<span class="hljs-string">"Rendering live! ğŸš€"</span>]}<span class="hljs-string">'
  ];
  for (const chunk of chunks) {
    parser.feed(chunk);
    await new Promise(r =&gt; setTimeout(r, 1000));
  }
})();
</span></code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SQL Server 2008 SP2 è¡¥ä¸åŒ…å®‰è£…æ­¥éª¤ï¼ˆx64ä¸­æ–‡ç‰ˆï¼‰]]></title>    <link>https://juejin.cn/post/7589918470788644898</link>    <guid>https://juejin.cn/post/7589918470788644898</guid>    <pubDate>2026-01-01T01:14:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589918470788644898" data-draft-id="7589893170387222528" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SQL Server 2008 SP2 è¡¥ä¸åŒ…å®‰è£…æ­¥éª¤ï¼ˆx64ä¸­æ–‡ç‰ˆï¼‰"/> <meta itemprop="keywords" content="SQL Server"/> <meta itemprop="datePublished" content="2026-01-01T01:14:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·613541146016"/> <meta itemprop="url" content="https://juejin.cn/user/1602431422584832"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SQL Server 2008 SP2 è¡¥ä¸åŒ…å®‰è£…æ­¥éª¤ï¼ˆx64ä¸­æ–‡ç‰ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1602431422584832/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·613541146016
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T01:14:33.000Z" title="Thu Jan 01 2026 01:14:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<h2 data-id="heading-0">å‡†å¤‡å·¥ä½œ</h2>
<p>å…ˆç¡®è®¤ç³»ç»Ÿç¯å¢ƒï¼šå¿…é¡»æ˜¯Â <strong>Windows x64ç³»ç»Ÿ</strong>ï¼ˆæ¯”å¦‚Win7/2008 R2ç­‰ï¼‰ï¼Œä¸”å·²ç»å®‰è£…äº†Â <strong>SQL Server 2008 åŸç‰ˆ</strong>ï¼ˆæ³¨æ„ç‰ˆæœ¬è¦åŒ¹é…ï¼Œåˆ«è£…é”™æˆå…¶ä»–ç‰ˆæœ¬çš„è¡¥ä¸ï¼‰ã€‚å¦å¤–ï¼Œå»ºè®®å…ˆ<strong>å…³é—­æ‰€æœ‰æ€æ¯’è½¯ä»¶ã€é˜²ç«å¢™</strong>ï¼ˆé¿å…æ‹¦æˆªå®‰è£…è¿›ç¨‹ï¼‰ï¼Œæœ€å¥½ä¹Ÿé€€å‡ºå…¶ä»–å èµ„æºçš„ç¨‹åºï¼ˆæ¯”å¦‚å¤§å‹è½¯ä»¶ã€æ¸¸æˆï¼‰ã€‚</p>
<h4 data-id="heading-1">ç¬¬ä¸€æ­¥ï¼šè¿è¡Œå®‰è£…æ–‡ä»¶</h4>
<p><strong>å®‰è£…åŒ…ä¸‹è½½ï¼š</strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fpan.quark.cn%2Fs%2F31303279040c" title="https://pan.quark.cn/s/31303279040c" target="_blank" ref="nofollow noopener noreferrer">pan.quark.cn/s/313032790â€¦</a>ï¼Œæ‰¾åˆ°ä¸‹è½½å¥½çš„Â <code>SQLServer2008SP2-KB2285068-x64-CHS.exe</code>ï¼Œå³é”®é€‰â€œä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œâ€ï¼ˆå¿…é¡»ç®¡ç†å‘˜æƒé™ï¼Œå¦åˆ™å®¹æ˜“æŠ¥é”™ï¼‰ã€‚</p>
<h4 data-id="heading-2">ç¬¬äºŒæ­¥ï¼šè§£å‹åˆ°ä¸´æ—¶ç›®å½•</h4>
<p>æ‰“å¼€åï¼Œä¼šå¼¹å‡ºè§£å‹çª—å£ï¼Œé»˜è®¤è·¯å¾„ä¸€èˆ¬æ˜¯ <code>C:\SQLServer2008SP2-KB2285068-x64-CHS</code>ï¼ˆå¯ä»¥è‡ªå·±æ”¹ï¼Œä½†è®°å¥½ä½ç½®ï¼‰ã€‚ç‚¹â€œä¸‹ä¸€æ­¥â€æˆ–â€œç¡®å®šâ€ï¼Œç­‰å®ƒè‡ªåŠ¨è§£å‹å®Œã€‚</p>
<h4 data-id="heading-3">ç¬¬ä¸‰æ­¥ï¼šè¿›å…¥å®‰è£…å‘å¯¼</h4>
<p>è§£å‹å®Œæˆåï¼Œä¼šè‡ªåŠ¨å¯åŠ¨å®‰è£…ç¨‹åºï¼ˆå¦‚æœæ²¡è‡ªåŠ¨å¯åŠ¨ï¼Œå»åˆšæ‰çš„ä¸´æ—¶ç›®å½•æ‰¾Â <code>setup.exe</code>åŒå‡»æ‰“å¼€ï¼‰ã€‚ç•Œé¢ä¼šæ˜¾ç¤ºâ€œMicrosoft SQL Server 2008 Service Pack 2 å®‰è£…ç¨‹åºâ€ã€‚</p>
<h4 data-id="heading-4">ç¬¬å››æ­¥ï¼šæ¥å—è®¸å¯åè®®</h4>
<p>å‹¾é€‰â€œæˆ‘æ¥å—è®¸å¯æ¡æ¬¾å’Œæ¡ä»¶â€ï¼Œç„¶åç‚¹â€œä¸‹ä¸€æ­¥â€ã€‚</p>
<h4 data-id="heading-5">ç¬¬äº”æ­¥ï¼šæ£€æŸ¥ç³»ç»Ÿç¯å¢ƒï¼ˆå…³é”®ï¼ï¼‰</h4>
<p>è¿™é‡Œç¨‹åºä¼šè‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿæ˜¯å¦ç¬¦åˆå®‰è£…è¦æ±‚ï¼ˆæ¯”å¦‚æ˜¯å¦è£…äº†SQL Server 2008ã€æƒé™å¤Ÿä¸å¤Ÿã€ç£ç›˜ç©ºé—´å¤Ÿä¸å¤Ÿï¼‰ã€‚å¦‚æœæœ‰çº¢è‰²é”™è¯¯æç¤ºï¼ˆæ¯”å¦‚â€œæœªæ£€æµ‹åˆ°SQL Serverå®ä¾‹â€ï¼‰ï¼Œå…ˆè§£å†³å†ç»§ç»­ï¼›é»„è‰²è­¦å‘Šï¼ˆæ¯”å¦‚â€œæŸäº›åŠŸèƒ½å¯èƒ½ä¸å…¼å®¹â€ï¼‰ä¸€èˆ¬å¯ä»¥å¿½ç•¥ï¼Œç‚¹â€œä¸‹ä¸€æ­¥â€ã€‚</p>
<h4 data-id="heading-6">ç¬¬å…­æ­¥ï¼šé€‰æ‹©è¦æ›´æ–°çš„å®ä¾‹</h4>
<p>è¿™é‡Œä¼šåˆ—å‡ºå½“å‰ç”µè„‘ä¸Šæ‰€æœ‰å·²å®‰è£…çš„SQL Server 2008å®ä¾‹ï¼ˆæ¯”å¦‚é»˜è®¤å®ä¾‹Â <code>MSSQLSERVER</code>æˆ–å‘½åå®ä¾‹Â <code>SQLEXPRESS</code>ï¼‰ã€‚å‹¾é€‰ä½ è¦æ‰“è¡¥ä¸çš„å®ä¾‹ï¼ˆæƒ³å…¨æ›´å°±å…¨é€‰ï¼‰ï¼Œç‚¹â€œä¸‹ä¸€æ­¥â€ã€‚</p>
<h4 data-id="heading-7">ç¬¬ä¸ƒæ­¥ï¼šç¡®è®¤æ›´æ–°å†…å®¹</h4>
<p>è¿™ä¸€æ­¥ä¼šæ˜¾ç¤ºè¦æ›´æ–°çš„ç»„ä»¶ï¼ˆæ¯”å¦‚æ•°æ®åº“å¼•æ“ã€åˆ†ææœåŠ¡ã€æŠ¥è¡¨æœåŠ¡ç­‰ï¼‰ï¼Œæ ¸å¯¹ä¸€ä¸‹æœ‰æ²¡æœ‰æ¼çš„ï¼Œæ²¡é—®é¢˜å°±ç‚¹â€œä¸‹ä¸€æ­¥â€ã€‚</p>
<h4 data-id="heading-8">ç¬¬å…«æ­¥ï¼šå¼€å§‹å®‰è£…</h4>
<p>ç‚¹å‡»â€œå®‰è£…â€ï¼Œè¿›åº¦æ¡ä¼šèµ°ä¸€ä¼šå„¿ï¼ˆæ—¶é—´çœ‹æœºå™¨é…ç½®ï¼Œä¸€èˆ¬10-30åˆ†é’Ÿï¼‰ã€‚æœŸé—´åˆ«ä¹±åŠ¨ç”µè„‘ï¼Œåˆ«å…³æœºæ–­ç½‘ï¼</p>
<h4 data-id="heading-9">ç¬¬ä¹æ­¥ï¼šå®‰è£…å®Œæˆ</h4>
<p>çœ‹åˆ°â€œå®‰è£…å·²å®Œæˆâ€çš„æç¤ºï¼Œç‚¹â€œå…³é—­â€ã€‚è¿™æ—¶å€™è¡¥ä¸å°±æ‰“å®Œäº†ã€‚</p>
<h4 data-id="heading-10">éªŒè¯æ˜¯å¦æˆåŠŸ</h4>
<p>æŒ‰Â <code>Win+R</code>è¾“å…¥Â <code>sqlcmd -S æœåŠ¡å™¨å\å®ä¾‹å -E</code>ï¼ˆæ¯”å¦‚æœ¬åœ°é»˜è®¤å®ä¾‹å°±æ˜¯Â <code>sqlcmd -S . -E</code>ï¼‰ï¼Œå›è½¦åèƒ½è¿ä¸ŠSQL Serverï¼Œè¯´æ˜è¡¥ä¸ç”Ÿæ•ˆäº†ã€‚æˆ–è€…æ‰“å¼€SQL Server Management Studioï¼ˆSSMSï¼‰ï¼Œè¿æ¥ååœ¨â€œå¸®åŠ©-å…³äºâ€é‡Œçœ‹ç‰ˆæœ¬å·ï¼Œåº”è¯¥æ˜¾ç¤ºÂ <code>10.0.4000</code>ï¼ˆSP2å¯¹åº”çš„ç‰ˆæœ¬å·ï¼‰ã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MyBatis æ˜ å°„å€¼æŠ¥é”™çš„ç½ªé­ç¥¸é¦–ç«Ÿç„¶æ˜¯ Lombok çš„ @Builderï¼Ÿ]]></title>    <link>https://juejin.cn/post/7589903499598938166</link>    <guid>https://juejin.cn/post/7589903499598938166</guid>    <pubDate>2026-01-01T01:17:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589903499598938166" data-draft-id="7589903499598889014" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MyBatis æ˜ å°„å€¼æŠ¥é”™çš„ç½ªé­ç¥¸é¦–ç«Ÿç„¶æ˜¯ Lombok çš„ @Builderï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-01T01:17:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="javadaydayup"/> <meta itemprop="url" content="https://juejin.cn/user/2436173497635703"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MyBatis æ˜ å°„å€¼æŠ¥é”™çš„ç½ªé­ç¥¸é¦–ç«Ÿç„¶æ˜¯ Lombok çš„ @Builderï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2436173497635703/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    javadaydayup
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T01:17:15.000Z" title="Thu Jan 01 2026 01:17:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">é—®é¢˜ç°è±¡</h2>
<p>æœ€è¿‘é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå½“ mybatis çš„ mapper.xml æ–‡ä»¶ä¸­ä½¿ç”¨æ¥æ˜ å°„çš„å¯¹è±¡ä½¿ç”¨äº† lombok ä¸­çš„ <code>@Builder</code> æ³¨è§£ä¿®é¥°åï¼Œå‘ç”Ÿäº†å­—æ®µå€¼æ˜ å°„é”™ä½çš„é—®é¢˜ï¼Œè€Œå½“å»æ‰ <code>@Builder</code> æ³¨è§£ä¹‹åå­—æ®µæ˜ å°„å€¼åˆæ­£å¸¸äº†ã€‚</p>
<h2 data-id="heading-1">é—®é¢˜å¤ç°</h2>
<p>ä¸ºäº†å¤ç°è¿™ä¸ªé—®é¢˜ï¼Œæäº†ä¸€ä¸ª demo ä»£ç ã€‚é¦–å…ˆå®šä¹‰äº†ä¸€ä¸ª <code>user</code> è¡¨ï¼Œå‡è®¾å®ƒé‡Œé¢åªæœ‰ <code>id</code>, <code>name</code>, <code>update_time</code> è¿™ä¸‰ä¸ªå­—æ®µï¼Œå…¶ä¸­ <code>name</code> æ˜¯ <code>varchar</code> ç±»å‹ï¼Œ <code>update_time</code> æ˜¯ <code>timestamp</code> ç±»å‹ã€‚è¡¨çš„å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-keyword">user</span> (  
    id <span class="hljs-type">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,  
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> ,  
    update_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>,  
    <span class="hljs-keyword">PRIMARY</span> KEY (id)  
);
</code></pre>
<p>ç„¶åå®šä¹‰äº†ä¸€ä¸ª <code>User</code> ç±»ï¼Œå®ƒé‡Œé¢å®šä¹‰äº† <code>updateTime</code>, <code>name</code> å­—æ®µï¼Œä¸” <code>updateTime</code> å­—æ®µçš„é¡ºåºåœ¨ <code>name</code> æ³¨è§£å‰é¢ï¼ŒåŒæ—¶ä½¿ç”¨äº† lombok ä¸­çš„ <code>@Builder</code> æ³¨è§£ä¿®é¥°ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Builder</span>  
<span class="hljs-meta">@Data</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {  
    <span class="hljs-keyword">private</span> Date updateTime;  
    <span class="hljs-keyword">private</span> String name;  
}
</code></pre>
<p>ç„¶å mapper.xml æ–‡ä»¶ä¸­å®šä¹‰äº†ä¸€ä¸ªæŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„è¯­å¥ï¼Œåœ¨è¿™ä¸ªè¯­å¥ä¸­ <code>select</code> çš„æ—¶å€™ï¼Œ<strong><code>name</code> å­—æ®µçš„é¡ºåºåœ¨ <code>update_time</code> å‰é¢</strong>ï¼Œè¿™ç‚¹å¾ˆé‡è¦ï¼Œä½¿ç”¨çš„ MyBatis ç‰ˆæœ¬æ˜¯ 3.5.10ã€‚Xml æ–‡ä»¶å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">&lt;mapper namespace=<span class="hljs-string">"com.mapper.UserMapper"</span>&gt;  
    &lt;resultMap id=<span class="hljs-string">"userMap"</span> type=<span class="hljs-string">"com.entity.User"</span>&gt;  
	    &lt;result property=<span class="hljs-string">"name"</span> column=<span class="hljs-string">"name"</span>/&gt;  
	    &lt;result property=<span class="hljs-string">"updateTime"</span> column=<span class="hljs-string">"update_time"</span>/&gt;  
	&lt;/resultMap&gt;  
	&lt;select id=<span class="hljs-string">"listAll"</span> resultMap=<span class="hljs-string">"userMap"</span>&gt;  
	    select name, update_time  
	    from user  
	&lt;/select&gt;  
&lt;/mapper&gt;
</code></pre>
<p>åœ¨æ•°æ®åº“åˆå§‹åŒ–çš„æ—¶å€™å¾€ user è¡¨é‡Œé¢æ’å…¥äº†ä¸€æ¡æ•°æ®ã€‚SQL å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">user</span> (id, name) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'Jone'</span>);
</code></pre>
<p>æ‰§è¡ŒæŸ¥è¯¢åæ¥å£ç›´æ¥æŠ¥é”™äº†ï¼Œä»æŠ¥é”™çœ‹æ˜¯å°è¯•æŠŠ  Jone è¿™ä¸ªå­—ç¬¦ä¸²è½¬ä¸º <code>Timestamp</code> ç±»å‹ä»è€ŒæŠ¥é”™äº†ï¼Œå®é™…æŠ¥é”™æ˜¯åœ¨ <code>DateTyperHanlder</code> çš„ <code>getNullableResult()</code> æ–¹æ³•é‡Œé¢è§¦å‘çš„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59dc7fdef40f4d1597bdf2a63be23c22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgamF2YWRheWRheXVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767835035&amp;x-signature=%2Fa%2BydVdKdk5xr32Ya6W72%2B1mq4I%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a173675d6aa6489585a1bfecae73ee05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgamF2YWRheWRheXVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767835035&amp;x-signature=iy5HvBRGvS1jXt5hT%2Bp93VCT7%2FY%3D" alt="image.png" loading="lazy"/></p>
<p>è€Œå½“æŠŠ <code>@Builder</code> æ³¨è§£å»æ‰ä¹‹åä½¿ç”¨ <code>@Datae</code> æ³¨è§£ä¿®é¥°ï¼Œå†æ¬¡æ‰§è¡ŒæŸ¥è¯¢ï¼Œæ¥å£è¿”å›çš„ç»“æœå°±æ­£å¸¸äº†ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Data</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {  
    <span class="hljs-keyword">private</span> Date updateTime;  
    <span class="hljs-keyword">private</span> String name;  
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4edd8e0a2c740c5bc4af9372db0f1bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgamF2YWRheWRheXVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767835035&amp;x-signature=MQTHzwiE4sezH%2FNpwXoBk5cvaOE%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸ºå•¥ä½¿ç”¨äº† <code>@Builder</code> å°±ä¼šæŠ¥é”™ï¼Œå»æ‰ä¹‹åå°±æ­£å¸¸äº†ï¼Œæ¥ä¸‹æ¥å°†ä»æºç è§’åº¦æ¥åˆ†æä¸€ä¸‹ã€‚</p>
<h2 data-id="heading-2">é—®é¢˜åŸå› </h2>
<p>åœ¨ MyBatis ä¸­æ˜¯é€šè¿‡ <code>ResultSetHandler</code> æ¥å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œå¤„ç†çš„ã€‚é¦–å…ˆå®ƒä¼šé€šè¿‡åå°„çš„æ–¹å¼åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„å®ä¾‹ï¼Œåœ¨ä½¿ç”¨ <code>@Builder</code> æ³¨è§£å’Œä¸ä½¿ç”¨æ³¨è§£çš„åŒºåˆ«å¯¹äº <code>User</code> ç±»æ¥è¯´æ˜¯ <code>@Builder</code> æ³¨è§£ä¼šç”Ÿæˆä¸€ä¸ªå…¨å‚çš„æ„é€ å‡½æ•°ï¼Œè€Œä¸ä½¿ç”¨çš„æƒ…å†µä¸‹ï¼Œåˆ™ä¼šæœ‰ä¸€ä¸ªé»˜è®¤çš„æ— å‚æ„é€ å‡½æ•°ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58391f3ca2854486943a934ab28ffa7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgamF2YWRheWRheXVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767835035&amp;x-signature=N1q%2Fu3rFhYcoCxzJ9HokyVTGu70%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨ MyBatis ä¸­çš„ <code>DefaultResultSetHandler</code> çš„ <code>createResultObject()</code> æ–¹æ³•å®ç°äº†é€šè¿‡åå°„æ¥åˆ›å»ºå¯¹è±¡ï¼Œå½“æ˜¯å…¨å‚æ„é€ å‡½æ•°æ—¶èµ°çš„çš„æ˜¯ <code>createByConstructorSignature()</code> æ–¹æ³•è¿™ä¸ªåˆ†æ”¯ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> Object <span class="hljs-title function_">createResultObject</span><span class="hljs-params">(ResultSetWrapper rsw, ResultMap resultMap, List&lt;Class&lt;?&gt;&gt; constructorArgTypes, List&lt;Object&gt; constructorArgs, 
    String columnPrefix)</span>
    <span class="hljs-keyword">throws</span> SQLException {
    <span class="hljs-keyword">final</span> Class&lt;?&gt; resultType = resultMap.getType();
    <span class="hljs-keyword">final</span> <span class="hljs-type">MetaClass</span> <span class="hljs-variable">metaType</span> <span class="hljs-operator">=</span> MetaClass.forClass(resultType, reflectorFactory);
    <span class="hljs-keyword">final</span> List&lt;ResultMapping&gt; constructorMappings = resultMap.getConstructorResultMappings();
    <span class="hljs-keyword">if</span> (hasTypeHandlerForResultObject(rsw, resultType)) {
        <span class="hljs-keyword">return</span> createPrimitiveResultObject(rsw, resultMap, columnPrefix);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!constructorMappings.isEmpty()) {
        <span class="hljs-keyword">return</span> createParameterizedResultObject(rsw, resultType, constructorMappings, constructorArgTypes, constructorArgs, columnPrefix);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (resultType.isInterface() || metaType.hasDefaultConstructor()) { <span class="hljs-comment">// å¦‚æœæœ‰æ— å‚æ„é€ å‡½æ•°ç›´æ¥èµ°è¿™é‡Œå°±åˆ›å»ºå¯¹è±¡äº†</span>
        <span class="hljs-keyword">return</span> objectFactory.create(resultType);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (shouldApplyAutomaticMappings(resultMap, <span class="hljs-literal">false</span>)) {
        <span class="hljs-keyword">return</span> createByConstructorSignature(rsw, resultMap, columnPrefix, resultType, constructorArgTypes, constructorArgs);
    }
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExecutorException</span>(<span class="hljs-string">"Do not know how to create an instance of "</span> + resultType);
}
</code></pre>
<p>åœ¨ <code>createByConstructorSignature()</code> æ–¹æ³•å®ç°äº†é€šè¿‡æ„é€ å‡½æ•°çš„æ–¹å¼æ¥åå°„åˆ›å»ºå¯¹è±¡ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> Object <span class="hljs-title function_">createByConstructorSignature</span><span class="hljs-params">(ResultSetWrapper rsw, ResultMap resultMap, String columnPrefix, Class&lt;?&gt; resultType,
    List&lt;Class&lt;?&gt;&gt; constructorArgTypes, List&lt;Object&gt; constructorArgs)</span> <span class="hljs-keyword">throws</span> SQLException {
    <span class="hljs-keyword">return</span> applyConstructorAutomapping(rsw, resultMap, columnPrefix, resultType, constructorArgTypes, constructorArgs,
        findConstructorForAutomapping(resultType, rsw).orElseThrow(() -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExecutorException</span>(
            <span class="hljs-string">"No constructor found in "</span> + resultType.getName() + <span class="hljs-string">" matching "</span> + rsw.getClassNames())));
}
</code></pre>
<p>åœ¨åˆ›å»ºä¹‹å‰ä¼šé€šè¿‡ <code>findConstructorForAutomapping()</code> æ–¹æ³•æ¥æŸ¥æ‰¾ä¸€ä¸ªåˆé€‚çš„æ„é€ å‡½æ•°ï¼Œå½“ç±»çš„æ„é€ å‡½æ•°åªæœ‰ä¸€ä¸ªæ—¶ï¼Œä¼šç›´æ¥ä½¿ç”¨è¿™ä¸ªè¿™ä¸ªæ„é€ å‡½æ•°ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> Optional&lt;Constructor&lt;?&gt;&gt; findConstructorForAutomapping(<span class="hljs-keyword">final</span> Class&lt;?&gt; resultType, ResultSetWrapper rsw) {
    Constructor&lt;?&gt;[] constructors = resultType.getDeclaredConstructors();
    <span class="hljs-comment">// åªæœ‰ä¸€ä¸ªæ„é€ å‡½æ•°æ—¶ï¼Œç›´æ¥ä½¿ç”¨è¿™ä¸ªæ„é€ å‡½æ•°</span>
    <span class="hljs-keyword">if</span> (constructors.length == <span class="hljs-number">1</span>) {
        <span class="hljs-keyword">return</span> Optional.of(constructors[<span class="hljs-number">0</span>]);
    }
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> Constructor&lt;?&gt; constructor : constructors) {
        <span class="hljs-keyword">if</span> (constructor.isAnnotationPresent(AutomapConstructor.class)) {
            <span class="hljs-keyword">return</span> Optional.of(constructor);
        }
    }
    <span class="hljs-keyword">if</span> (configuration.isArgNameBasedConstructorAutoMapping()) {
      <span class="hljs-comment">// Finding-best-match type implementation is possible,</span>
      <span class="hljs-comment">// but using @AutomapConstructor seems sufficient.</span>
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExecutorException</span>(MessageFormat.format(
          <span class="hljs-string">"'argNameBasedConstructorAutoMapping' is enabled and the class ''{0}'' has multiple constructors, so @AutomapConstructor must be added to one of the constructors."</span>,
          resultType.getName()));
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> Arrays.stream(constructors).filter(x -&gt; findUsableConstructorByArgTypes(x, rsw.getJdbcTypes())).findAny();
    }
}
</code></pre>
<p>ç„¶ååœ¨ <code>applyConstructorAutomapping()</code> æ–¹æ³•ä¸­ä¼šè°ƒç”¨ <code>applyColumnOrderBasedConstructorAutomapping()</code> æ–¹æ³•ã€‚ä»è¯¥æ–¹æ³•çš„å‘½åä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå®ƒæ˜¯å®ç°äº†æ ¹æ®ä¸‹æ ‡ï¼Œè€Œä¸æ˜¯å‚æ•°åç§°æ¥å®ç°æ„é€ å‚æ•°çš„æ˜ å°„ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> Object <span class="hljs-title function_">applyConstructorAutomapping</span><span class="hljs-params">(ResultSetWrapper rsw, ResultMap resultMap, String columnPrefix, Class&lt;?&gt; resultType, List&lt;Class&lt;?&gt;&gt; constructorArgTypes, List&lt;Object&gt; constructorArgs, Constructor&lt;?&gt; constructor)</span> <span class="hljs-keyword">throws</span> SQLException {
    <span class="hljs-type">boolean</span> <span class="hljs-variable">foundValues</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">if</span> (configuration.isArgNameBasedConstructorAutoMapping()) {
      <span class="hljs-comment">// è¿™ä¸ªæ˜¯æ ¹æ®æ„é€ å‚æ•°çš„åç§°æ˜ å°„</span>
        foundValues = applyArgNameBasedConstructorAutoMapping(rsw, resultMap, columnPrefix, resultType, constructorArgTypes, constructorArgs,
          constructor, foundValues);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// è¿™ä¸ªæ˜¯æ ¹æ®æ„é€ å‚æ•°çš„é¡ºåºæ˜ å°„</span>
        foundValues = applyColumnOrderBasedConstructorAutomapping(rsw, constructorArgTypes, constructorArgs, constructor,
          foundValues);
    }
    <span class="hljs-keyword">return</span> foundValues ? objectFactory.create(resultType, constructorArgTypes, constructorArgs) : <span class="hljs-literal">null</span>;
  }
</code></pre>
<p>åœ¨ <code>applyColumnOrderBasedConstructorAutomapping()</code> æ–¹æ³•ä¸­ä¼šä»ä¸‹æ ‡å–æ„é€ å‡½æ•°ä¸­çš„å‚æ•°ï¼ŒåŒæ—¶æ ¹æ®ä¸‹æ ‡å–æŸ¥è¯¢ç»“æœé‡Œé¢çš„åˆ—åï¼Œå…ˆè°ƒç”¨ <code>rsw.getTypeHandler()</code> æ‰¾åˆ°å¯¹åº”çš„ <code>TypeHandler</code> ï¼Œç„¶åè°ƒç”¨ TypeHandler çš„ <code>getResult()</code> æ–¹æ³•å°è¯•å°†åˆ—å¯¹åº”çš„å€¼è½¬ä¸ºå¯¹åº”çš„æ„é€ å‡½æ•°çš„å‚æ•°ç±»å‹ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">applyColumnOrderBasedConstructorAutomapping</span><span class="hljs-params">(ResultSetWrapper rsw, List&lt;Class&lt;?&gt;&gt; constructorArgTypes,
      List&lt;Object&gt; constructorArgs, Constructor&lt;?&gt; constructor, <span class="hljs-type">boolean</span> foundValues)</span> <span class="hljs-keyword">throws</span> SQLException {
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; constructor.getParameterTypes().length; i++) {
        Class&lt;?&gt; parameterType = constructor.getParameterTypes()[i];
        <span class="hljs-type">String</span> <span class="hljs-variable">columnName</span> <span class="hljs-operator">=</span> rsw.getColumnNames().get(i);
        <span class="hljs-comment">// å…ˆæ‰¾åˆ°å¯¹åº”çš„TypeHandler</span>
        TypeHandler&lt;?&gt; typeHandler = rsw.getTypeHandler(parameterType, columnName);
        <span class="hljs-comment">// è°ƒç”¨TypeHandlerå°†åˆ—å¯¹åº”çš„å€¼è½¬ä¸ºå¯¹åº”çš„æ„é€ å‚æ•°ç±»å‹</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> typeHandler.getResult(rsw.getResultSet(), columnName);
        constructorArgTypes.add(parameterType);
        constructorArgs.add(value);
        foundValues = value != <span class="hljs-literal">null</span> || foundValues;
    }
    <span class="hljs-keyword">return</span> foundValues;
}
</code></pre>
<p>åœ¨æœ¬æ¡ˆä¾‹ä¸­æ„é€ å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹æ˜¯ <code>Date</code> ç±»å‹ï¼Œç¬¬ä¸€ä¸ªåˆ—åæ˜¯ <code>name</code>ã€‚é¦–å…ˆæ ¹æ®åˆ—åæ˜¯æ‰¾ä¸åˆ°å¯¹åº”çš„ TypeHandler çš„ï¼Œç„¶åè°ƒç”¨ <code>TypeHandlerRegistry</code> çš„ <code>getTypeHandler()</code> æ–¹æ³•è·å–å¯¹åº”çš„ <code>TypeHandler</code>ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> TypeHandler&lt;?&gt; getTypeHandler(Class&lt;?&gt; propertyType, String columnName) {
    TypeHandler&lt;?&gt; handler = <span class="hljs-literal">null</span>;
    <span class="hljs-comment">// æ ¹æ®åˆ—åæ‰¾ä¸åˆ°å¯¹åº”çš„TypeHandler</span>
    Map&lt;Class&lt;?&gt;, TypeHandler&lt;?&gt;&gt; columnHandlers = typeHandlerMap.get(columnName);
    <span class="hljs-keyword">if</span> (columnHandlers == <span class="hljs-literal">null</span>) {
        columnHandlers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        typeHandlerMap.put(columnName, columnHandlers);
    } <span class="hljs-keyword">else</span> {
        handler = columnHandlers.get(propertyType);
    }
    <span class="hljs-keyword">if</span> (handler == <span class="hljs-literal">null</span>) {
        <span class="hljs-type">JdbcType</span> <span class="hljs-variable">jdbcType</span> <span class="hljs-operator">=</span> getJdbcType(columnName);
        handler = typeHandlerRegistry.getTypeHandler(propertyType, jdbcType);
      
      <span class="hljs-comment">// çœç•¥ä»£ç </span>
    }
    <span class="hljs-keyword">return</span> handler;
}
</code></pre>
<p>åœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢ä¼šå…ˆå°è¯•æ ¹æ® <code>jdbcType</code> ä½œä¸º key è·å–å¯¹åº”çš„ <code>TypeHandler</code>ï¼Œä½†æ˜¯è·å–ä¸åˆ°ï¼Œç„¶åå°è¯•æ ¹æ® null ä½œä¸º key è·å–å¯¹åº”çš„ TypeHandlerï¼Œè¿™ä¸ªå®é™…ä¸Šæ˜¯è·å–åˆ°çš„æ˜¯  <code>DateTypeHandler</code> è¿™ä¸ªå¯¹è±¡çš„å®ä¾‹ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> &lt;T&gt; TypeHandler&lt;T&gt; <span class="hljs-title function_">getTypeHandler</span><span class="hljs-params">(Type type, JdbcType jdbcType)</span> {
    <span class="hljs-keyword">if</span> (ParamMap.class.equals(type)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
    Map&lt;JdbcType, TypeHandler&lt;?&gt;&gt; jdbcHandlerMap = getJdbcHandlerMap(type);
    TypeHandler&lt;?&gt; handler = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">if</span> (jdbcHandlerMap != <span class="hljs-literal">null</span>) {
      <span class="hljs-comment">// å…ˆæ ¹æ®jdbcTypeä½œä¸ºkeyè·å–å¯¹åº”çš„TypeHandler</span>
        handler = jdbcHandlerMap.get(jdbcType);
        <span class="hljs-keyword">if</span> (handler == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// æ ¹æ®nullä½œä¸ºkeyè·å–ï¼Œè¿™é‡Œä¼šè·å–åˆ°DateTypeHandler</span>
            handler = jdbcHandlerMap.get(<span class="hljs-literal">null</span>);
        }
        <span class="hljs-keyword">if</span> (handler == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// #591</span>
            handler = pickSoleHandler(jdbcHandlerMap);
        }
    }
    <span class="hljs-comment">// type drives generics here</span>
    <span class="hljs-keyword">return</span> (TypeHandler&lt;T&gt;) handler;
}
</code></pre>
<p>è€Œ <code>DateTypeHandler</code> åˆ™æ˜¯åœ¨ <code>TypeHandlerRegistry</code> çš„æ„é€ å‡½æ•°é‡Œé¢æ³¨å†Œçš„ï¼Œæ³¨å†Œçš„æ—¶å€™æ°å¥½æ˜¯ null ä½œä¸º key çš„ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-title function_">TypeHandlerRegistry</span><span class="hljs-params">(Configuration configuration)</span> {
    <span class="hljs-built_in">this</span>.unknownTypeHandler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnknownTypeHandler</span>(configuration);
    <span class="hljs-comment">// çœç•¥å…¶å®ƒä»£ç </span>
    register(Date.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">DateTypeHandler</span>());
    register(JdbcType.TIMESTAMP, <span class="hljs-keyword">new</span> <span class="hljs-title class_">DateTypeHandler</span>());
}

<span class="hljs-keyword">private</span> &lt;T&gt; <span class="hljs-keyword">void</span> <span class="hljs-title function_">register</span><span class="hljs-params">(Type javaType, TypeHandler&lt;? extends T&gt; typeHandler)</span> {
    <span class="hljs-type">MappedJdbcTypes</span> <span class="hljs-variable">mappedJdbcTypes</span> <span class="hljs-operator">=</span> typeHandler.getClass().getAnnotation(MappedJdbcTypes.class);
    <span class="hljs-keyword">if</span> (mappedJdbcTypes != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">for</span> (JdbcType handledJdbcType : mappedJdbcTypes.value()) {
            register(javaType, handledJdbcType, typeHandler);
        }
        <span class="hljs-keyword">if</span> (mappedJdbcTypes.includeNullJdbcType()) {
            register(javaType, <span class="hljs-literal">null</span>, typeHandler);
        }
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// è¿™é‡Œæ³¨å†Œäº†keyä¸ºnullçš„DateTypeHandler</span>
        register(javaType, <span class="hljs-literal">null</span>, typeHandler);
    }
}
</code></pre>
<p>åœ¨æœ¬æ¡ˆä¾‹ä¸­ <code>DateTypeHandler</code> çš„ <code>getNullableResult()</code> æ–¹æ³•ä¸­ä¼ å…¥çš„åˆ—åæ˜¯ <code>name</code>ï¼Œç„¶åè°ƒç”¨ <code>ResultSet</code> çš„ <code>getTimestamp()</code> æ–¹æ³•è·å– <code>Timestamp</code> ç±»å‹çš„å®ä¾‹ï¼Œå› ä¸ºå®é™…ä¸Šè¿™ä¸ªåˆ—çš„å€¼æ˜¯ <code>Jone</code> ï¼Œå½“ç„¶æ˜¯è½¬ä¸æˆ <code>Timestamp</code> ç±»å‹çš„ï¼Œå› æ­¤æŠ¥é”™äº†ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> Date <span class="hljs-title function_">getNullableResult</span><span class="hljs-params">(ResultSet rs, String columnName)</span>
      <span class="hljs-keyword">throws</span> SQLException {
    <span class="hljs-type">Timestamp</span> <span class="hljs-variable">sqlTimestamp</span> <span class="hljs-operator">=</span> rs.getTimestamp(columnName);
    <span class="hljs-keyword">if</span> (sqlTimestamp != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(sqlTimestamp.getTime());
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}
</code></pre>
<p>å½“å»æ‰ <code>@Builder</code> æ³¨è§£æ—¶ï¼Œä½¿ç”¨çš„æ„é€ å‡½æ•°å°±æ˜¯æ— å‚æ„é€ å‡½æ•°ï¼Œç›´æ¥é€šè¿‡æ— å‚æ„é€ å‡½æ•°å°±åˆ›å»ºå¯¹è±¡äº†ï¼Œè‡ªç„¶å°±ä¸éœ€è¦æŒ‰ç…§æ„é€ å‚æ•°ä¸‹æ ‡å°†åˆ—è½¬ä¸ºå¯¹åº”çš„æ„é€ å‚æ•°ç±»å‹äº†ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> Object <span class="hljs-title function_">createResultObject</span><span class="hljs-params">(ResultSetWrapper rsw, ResultMap resultMap, List&lt;Class&lt;?&gt;&gt; constructorArgTypes, List&lt;Object&gt; constructorArgs, String columnPrefix)</span>
    <span class="hljs-keyword">throws</span> SQLException {
    <span class="hljs-keyword">final</span> Class&lt;?&gt; resultType = resultMap.getType();
    <span class="hljs-keyword">final</span> <span class="hljs-type">MetaClass</span> <span class="hljs-variable">metaType</span> <span class="hljs-operator">=</span> MetaClass.forClass(resultType, reflectorFactory);
    <span class="hljs-keyword">final</span> List&lt;ResultMapping&gt; constructorMappings = resultMap.getConstructorResultMappings();
    <span class="hljs-keyword">if</span> (hasTypeHandlerForResultObject(rsw, resultType)) {
        <span class="hljs-keyword">return</span> createPrimitiveResultObject(rsw, resultMap, columnPrefix);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!constructorMappings.isEmpty()) {
        <span class="hljs-keyword">return</span> createParameterizedResultObject(rsw, resultType, constructorMappings, constructorArgTypes, constructorArgs, columnPrefix);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (resultType.isInterface() || metaType.hasDefaultConstructor()) { <span class="hljs-comment">// å¦‚æœæœ‰æ— å‚æ„é€ å‡½æ•°ç›´æ¥èµ°è¿™é‡Œå°±åˆ›å»ºå¯¹è±¡äº†</span>
        <span class="hljs-keyword">return</span> objectFactory.create(resultType);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (shouldApplyAutomaticMappings(resultMap, <span class="hljs-literal">false</span>)) {
        <span class="hljs-keyword">return</span> createByConstructorSignature(rsw, resultMap, columnPrefix, resultType, constructorArgTypes, constructorArgs);
    }
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExecutorException</span>(<span class="hljs-string">"Do not know how to create an instance of "</span> + resultType);
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CatchAdmin 2025 å¹´ç»ˆæ€»ç»“ æ¨¡å—åŒ–æ¶æ„çš„è¿›åŒ–ä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7589893746080170025</link>    <guid>https://juejin.cn/post/7589893746080170025</guid>    <pubDate>2026-01-01T01:16:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589893746080170025" data-draft-id="7589903499598905398" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CatchAdmin 2025 å¹´ç»ˆæ€»ç»“ æ¨¡å—åŒ–æ¶æ„çš„è¿›åŒ–ä¹‹è·¯"/> <meta itemprop="keywords" content="åç«¯,PHP,å¼€æº"/> <meta itemprop="datePublished" content="2026-01-01T01:16:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CatchAdmin 2025 å¹´ç»ˆæ€»ç»“ æ¨¡å—åŒ–æ¶æ„çš„è¿›åŒ–ä¹‹è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T01:16:38.000Z" title="Thu Jan 01 2026 01:16:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å†™åœ¨å‰é¢</h2>
<p>2025 å¹´ï¼ŒCatchAdmin ä» 4.1 ç‰ˆæœ¬è¿­ä»£åˆ° 5.0 ç‰ˆæœ¬ï¼Œå®Œæˆäº†ä¸€æ¬¡é‡è¦çš„æ¶æ„å‡çº§ã€‚åœ¨ä¿æŒå¼€æºçš„åŒæ—¶ï¼Œæ¨å‡ºäº†ä¸“ä¸šç‰ˆæ¢ç´¢å•†ä¸šåŒ–é“è·¯ã€‚è¿™ä¸€å¹´ï¼Œé¡¹ç›®åœ¨æŠ€æœ¯ã€ç¤¾åŒºå’Œç”Ÿæ€æ–¹é¢éƒ½æœ‰æ–°çš„è¿›å±•ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2026-01%2Fcatchadmin-2025-year-in-review" target="_blank" title="https://catchadmin.com/post/2026-01/catchadmin-2025-year-in-review" ref="nofollow noopener noreferrer">åŸæ–‡ CatchAdmin 2025 å¹´ç»ˆæ€»ç»“ï¼šæ¨¡å—åŒ–æ¶æ„çš„è¿›åŒ–ä¹‹è·¯</a></p>
<h2 data-id="heading-1">ä¸€ã€2025 å¹´åº¦å›é¡¾</h2>
<h3 data-id="heading-2">é¡¹ç›®å®šä½çš„åšå®ˆä¸è¿›åŒ–</h3>
<p>CatchAdmin æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€æ˜“äºæ‰©å±•çš„ç°ä»£åŒ– PHP åå°ç®¡ç†ç³»ç»Ÿã€‚å®ƒé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œé›†æˆäº† Token é‰´æƒã€æƒé™ç®¡ç†ã€åŠ¨æ€è·¯ç”±ã€åŠ¨æ€è¡¨æ ¼ã€åˆ†é¡µå°è£…ã€èµ„æºæƒé™ã€ä¸Šä¼ ä¸‹è½½ã€ä»£ç ç”Ÿæˆå™¨æ”¯æŒä¸€é”®å¯¼å‡ºå¯¼å…¥ï¼Œæ•°æ®å›æ”¶ç«™ï¼Œé™„ä»¶ç®¡ç†çš„ä¸€æ¬¾æ¨¡å—åŒ–æ¡†æ¶ã€‚</p>
<p>è¿™ä¸ªå®šä½åœ¨ 2025 å¹´å¾—åˆ°äº†è¿›ä¸€æ­¥å¼ºåŒ–ã€‚æˆ‘ä»¬æ²¡æœ‰è¿½æ±‚"å¤§è€Œå…¨"ï¼Œè€Œæ˜¯ä¸“æ³¨äºåšå¥½"åå°ç®¡ç†ç³»ç»Ÿ"è¿™ä¸€ä»¶äº‹ã€‚æ¨¡å—åŒ–è®¾è®¡è®©æ¯ä¸ªæ¨¡å—éƒ½æœ‰ç‹¬ç«‹çš„æ§åˆ¶å™¨ã€è·¯ç”±ã€æ¨¡å‹ã€æ•°æ®è¡¨ï¼Œå°†è€¦åˆé™åˆ°æœ€ä½ã€‚è¿™ç§å…‹åˆ¶ï¼Œåè€Œè®© CatchAdmin æ›´åŠ å®ç”¨ã€‚</p>
<h3 data-id="heading-3">é‡è¦é‡Œç¨‹ç¢‘</h3>
<p><strong>8 æœˆï¼šV4.1.0 ç‰ˆæœ¬å‘å¸ƒ</strong></p>
<p>4.1 ç‰ˆæœ¬æ˜¯ 4.x ç³»åˆ—çš„é‡è¦æ›´æ–°ï¼Œä¸»è¦æ”¹è¿›åŒ…æ‹¬ï¼š</p>
<ul>
<li>ä¿®å¤ Query Log æ—¥å¿—æ ¼å¼é”™è¯¯</li>
<li>æ–°å¢ restore æ–¹æ³•ï¼Œæ”¯æŒè½¯åˆ é™¤æ•°æ®æ¢å¤</li>
<li>å¢å¼ºäº†ä»£ç ç”ŸæˆåŠŸèƒ½</li>
<li>æ–°å¢ CMS æ¨¡å—ï¼Œæ‰©å±•äº†å†…å®¹ç®¡ç†èƒ½åŠ›</li>
<li>å‰ç«¯æ–°å¢å…¨å±€åŠ è½½ï¼Œä¼˜åŒ–äº†ç”¨æˆ·ä½“éªŒ</li>
</ul>
<p>4.1 ç‰ˆæœ¬çš„å‘å¸ƒæ ‡å¿—ç€ 4.x ç³»åˆ—çš„æˆç†Ÿç¨³å®šï¼Œä¹Ÿä¸º 5.0 çš„å¤§ç‰ˆæœ¬å‡çº§æ‰“ä¸‹äº†åŸºç¡€ã€‚</p>
<p><strong>12 æœˆï¼šV5.0 Beta ç‰ˆæœ¬å‘å¸ƒ</strong></p>
<p>V5.0 æ˜¯ä¸€æ¬¡é‡å¤§çš„æ¶æ„å‡çº§ï¼Œå¼•å…¥äº†å¤šé¡¹æ–°ç‰¹æ€§ï¼š</p>
<ul>
<li>æ’ä»¶ç³»ç»Ÿæ­£å¼æ”¯æŒ</li>
<li>å¯¼å…¥å¯¼å‡ºåŠŸèƒ½æ ¸å¿ƒå±‚é¢å¢å¼º</li>
<li>SFC è¿œç¨‹åŠ è½½æ€§èƒ½ä¼˜åŒ–</li>
<li>å®‰è£…ä½“éªŒç®€åŒ–</li>
</ul>
<h2 data-id="heading-4">äºŒã€æŠ€æœ¯çªç ´</h2>
<h3 data-id="heading-5">æ¨¡å—åŒ–æ¶æ„çš„æ·±åŒ–</h3>
<p>æ¨¡å—åŒ–æ˜¯ CatchAdmin çš„æ ¸å¿ƒç‰¹æ€§ï¼Œ2025 å¹´åœ¨è¿™æ–¹é¢åšäº†è¿›ä¸€æ­¥æ·±åŒ–ã€‚</p>
<p><strong>æ¨¡å—éš”ç¦»è®¾è®¡</strong></p>
<p>CatchAdmin çš„æ¨¡å—éš”ç¦»éå¸¸å½»åº•ï¼šæ¯ä¸ªæ¨¡å—éƒ½æœ‰ç‹¬ç«‹çš„æ§åˆ¶å™¨ã€è·¯ç”±ã€æ¨¡å‹ã€æ•°æ®è¡¨ï¼Œç”šè‡³é…ç½®æ–‡ä»¶éƒ½æ˜¯éš”ç¦»çš„ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">php artisan catch:module:install
</code></pre>
<p>ç³»ç»Ÿä¼šåˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„æ¨¡å—ï¼Œé€‰æ‹©å®‰è£…åï¼Œåˆ·æ–°é¡µé¢ï¼Œå·¦ä¾§èœå•æ è‡ªåŠ¨å‡ºç°å¯¹åº”çš„èœå•é¡¹ï¼Œæ•°æ®è¡¨ä¹Ÿè‡ªåŠ¨åˆ›å»ºã€‚æ•´ä¸ªè¿‡ç¨‹ä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹ä»»ä½•ä»£ç ã€‚</p>
<p>æ¨¡å—çš„é…ç½®ä¹Ÿæ˜¯ç‹¬ç«‹çš„ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// è®¿é—® permissions æ¨¡å—çš„é…ç½®</span>
<span class="hljs-title function_ invoke__">config</span>(<span class="hljs-string">'permissions.one.some_key'</span>)
</code></pre>
<p>è¿™ç§è®¾è®¡è®©æ¨¡å—ä¹‹é—´çš„è¾¹ç•Œéå¸¸æ¸…æ™°ã€‚å¼€å‘è€…å¯ä»¥æ”¾å¿ƒåœ°å¼€å‘è‡ªå·±çš„ä¸šåŠ¡æ¨¡å—ï¼Œä¸ç”¨æ‹…å¿ƒä¼šå½±å“åˆ°å…¶ä»–åŠŸèƒ½ã€‚å¦‚æœæŸå¤©ä¸éœ€è¦æŸä¸ªæ¨¡å—äº†ï¼Œç›´æ¥å¸è½½å³å¯ï¼Œä¸ä¼šç•™ä¸‹ä»»ä½•"é—è¿¹"ã€‚</p>
<h3 data-id="heading-6">ä»£ç ç”Ÿæˆå™¨çš„è¿›åŒ–</h3>
<p>ä»£ç ç”Ÿæˆå™¨æ˜¯ CatchAdmin çš„çµé­‚åŠŸèƒ½ï¼Œ2025 å¹´æˆ‘ä»¬å¯¹å®ƒè¿›è¡Œäº†å…¨é¢å¢å¼ºã€‚</p>
<p><strong>å¯è§†åŒ–é…ç½®ç•Œé¢</strong></p>
<p>åœ¨åå°çš„"ä»£ç ç”Ÿæˆ"æ¨¡å—é‡Œï¼Œå¼€å‘è€…åªéœ€è¦ï¼š</p>
<ol>
<li>é€‰æ‹©ä¸€å¼ æ•°æ®è¡¨ï¼ˆæ¯”å¦‚ <code>articles</code>ï¼‰</li>
<li>åœ¨å¯è§†åŒ–ç•Œé¢ä¸Šé…ç½®å­—æ®µä¿¡æ¯ï¼šå“ªäº›å­—æ®µè¦åœ¨åˆ—è¡¨é¡µæ˜¾ç¤ºï¼Œå“ªäº›è¦åœ¨è¡¨å•é‡Œç¼–è¾‘ï¼Œç”¨ä»€ä¹ˆç»„ä»¶ï¼ˆè¾“å…¥æ¡†ã€ä¸‹æ‹‰æ¡†ã€å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç­‰ï¼‰</li>
<li>ç‚¹å‡»"ä¸€é”®ç”Ÿæˆ"</li>
</ol>
<p>ç„¶åï¼Œé­”æ³•å‘ç”Ÿäº†ã€‚åç«¯çš„ Controllerã€Modelã€Request éªŒè¯ç±»ï¼Œå‰ç«¯çš„åˆ—è¡¨é¡µã€æ–°å¢é¡µã€ç¼–è¾‘é¡µï¼Œå…¨éƒ¨è‡ªåŠ¨ç”Ÿæˆå¹¶æ³¨å†Œåˆ°ç³»ç»Ÿä¸­ã€‚</p>
<p><strong>æ”¯æŒå¯¼å…¥å¯¼å‡º</strong></p>
<p>Beta.2 ç‰ˆæœ¬å¯¹æ•°æ®å¯¼å…¥å¯¼å‡ºåŠŸèƒ½è¿›è¡Œäº†æ ¸å¿ƒå±‚é¢çš„å¢å¼ºã€‚åœ¨ä»£ç ç”Ÿæˆå™¨ä¸­å‹¾é€‰"æ”¯æŒå¯¼å…¥å¯¼å‡º"ï¼Œå³å¯ä¸ºæ¨¡å—è‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„å¯¼å…¥å¯¼å‡ºåŠŸèƒ½ï¼Œæ— éœ€æ‰‹å†™ Excel å¤„ç†ä»£ç ã€‚</p>
<p>è¿™ç§æ•ˆç‡æå‡ï¼Œæ˜¯è´¨çš„é£è·ƒã€‚å¼€å‘è€…å‡ ä¹ä¸éœ€è¦æ‰‹å†™ä¸šåŠ¡ä»£ç ï¼Œå°±èƒ½å®Œæˆä¸€ä¸ªå®Œæ•´çš„åŠŸèƒ½æ¨¡å—ã€‚</p>
<h3 data-id="heading-7">æ’ä»¶ç”Ÿæ€çš„å»ºè®¾</h3>
<p>V5.0 çš„å¦ä¸€ä¸ªé‡å¤§çªç ´æ˜¯æ’ä»¶ç³»ç»Ÿã€‚æˆ‘ä»¬æ²¡æœ‰è‡ªå·±å‘æ˜ä¸€å¥—æ’ä»¶æœºåˆ¶ï¼Œè€Œæ˜¯ç›´æ¥ç»‘å®š Composer ç”Ÿæ€ã€‚</p>
<p><strong>æ‹¥æŠ± Composer</strong></p>
<p>ä»»ä½•ä¸€ä¸ª Composer åŒ…éƒ½å¯ä»¥æˆä¸º CatchAdmin çš„æ’ä»¶ã€‚å¼€å‘è€…ä¸éœ€è¦å­¦ä¹ æ–°çš„æ’ä»¶å¼€å‘è§„èŒƒï¼Œåªéœ€è¦æŒ‰ç…§ Laravel Package çš„æ ‡å‡†å†™ä»£ç ï¼Œç„¶åé€šè¿‡ Composer å®‰è£…å³å¯ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">composer require vendor/package
</code></pre>
<p>è¿™ç§è®¾è®¡éå¸¸èªæ˜ã€‚å®ƒæ²¡æœ‰æŠŠè‡ªå·±å°é—­èµ·æ¥ï¼Œè€Œæ˜¯æ‹¥æŠ±äº†æ•´ä¸ª PHP ç”Ÿæ€ã€‚å¼€å‘è€…å¯ä»¥è½»æ¾åœ°é›†æˆç¬¬ä¸‰æ–¹æœåŠ¡ï¼ˆæ”¯ä»˜ã€çŸ­ä¿¡ã€OSS ç­‰ï¼‰ï¼Œä¹Ÿå¯ä»¥æŠŠè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘å°è£…æˆæ’ä»¶ï¼Œåœ¨ä¸åŒé¡¹ç›®é—´å¤ç”¨ã€‚</p>
<p><strong>æ’ä»¶ Hook åŠŸèƒ½</strong></p>
<p>æœ¬æ¬¡æ›´æ–°å¢å¼ºäº†æ’ä»¶å®‰è£…çš„ Hook åŠŸèƒ½ï¼Œå¼€å‘è€…å¯ä»¥åœ¨æ’ä»¶å®‰è£…ã€å¸è½½æ—¶æ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘ï¼ˆå¦‚åˆå§‹åŒ–é…ç½®ã€åˆ›å»ºæ•°æ®è¡¨ç­‰ï¼‰ã€‚åŒæ—¶ä¼˜åŒ–äº†æ’ä»¶å®‰è£…é¡µé¢ï¼Œæ”¯æŒåœ¨åå°å¯è§†åŒ–ç®¡ç†æ’ä»¶çš„å¯ç”¨ã€ç¦ç”¨ä¸å¸è½½ã€‚</p>
<h3 data-id="heading-8">å¼€å‘ä½“éªŒçš„æå‡</h3>
<p><strong>Vue SFC å³æ—¶æ¸²æŸ“</strong></p>
<p>CatchAdmin çš„å‰ç«¯æ”¯æŒ"å³æ—¶æ¸²æŸ“"ï¼Œå³æ— éœ€ç¼–è¯‘å³å¯ç›´æ¥åŠ è½½ Vue å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰ã€‚è¿™åœ¨å¼€å‘é˜¶æ®µéå¸¸æ–¹ä¾¿ï¼Œä½†è¿œç¨‹åŠ è½½ä¼šå½±å“é¦–å±æ¸²æŸ“é€Ÿåº¦ã€‚</p>
<p>Beta.3 ç‰ˆæœ¬ä¼˜åŒ–äº† SFC çš„åŠ è½½æœºåˆ¶ï¼Œé€šè¿‡ç¼“å­˜ç­–ç•¥å’ŒæŒ‰éœ€åŠ è½½ï¼Œæ˜¾è‘—æå‡äº†é¡µé¢æ¸²æŸ“é€Ÿåº¦ã€‚åœ¨å®é™…æµ‹è¯•ä¸­ï¼Œåˆ—è¡¨é¡µçš„é¦–æ¬¡åŠ è½½æ—¶é—´ç¼©çŸ­äº†çº¦ 30%ã€‚</p>
<p><strong>å››è¡Œå‘½ä»¤å¿«é€Ÿå¯åŠ¨</strong></p>
<pre><code class="hljs language-shell" lang="shell">composer global -W require catchadmin/installer
<span class="hljs-meta prompt_">
# </span><span class="bash">æ–°å»ºé¡¹ç›®</span>
catch new catchadmin
<span class="hljs-meta prompt_">
# </span><span class="bash">å®‰è£…é¡¹ç›®</span>
cd catchadmin &amp;&amp; php artisan catch:install
<span class="hljs-meta prompt_">
# </span><span class="bash">å¯åŠ¨é¡¹ç›®</span>
composer run dev
</code></pre>
<p>å››è¡Œå‘½ä»¤ï¼Œä¸€ä¸ªå®Œæ•´çš„åå°ç®¡ç†ç³»ç»Ÿå°±ç«‹åœ¨äº†çœ¼å‰ã€‚</p>
<p><strong>åŠ¨æ€èœå•è‡ªåŠ¨æ›´æ–°</strong></p>
<p>å·¦ä¾§èœå•ç°åœ¨æ”¯æŒè‡ªåŠ¨æ›´æ–°â€”â€”å®‰è£…æ–°æ¨¡å—æˆ–æ’ä»¶åï¼Œåˆ·æ–°é¡µé¢å³å¯çœ‹åˆ°å¯¹åº”çš„èœå•é¡¹ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®è·¯ç”±ã€‚</p>
<h2 data-id="heading-9">ä¸‰ã€åŠŸèƒ½å®Œå–„</h2>
<h3 data-id="heading-10">æ ¸å¿ƒåŠŸèƒ½çŸ©é˜µ</h3>
<p>2025 å¹´ï¼ŒCatchAdmin çš„åŠŸèƒ½ä½“ç³»æ›´åŠ å®Œå–„ï¼š</p>
<p><strong>æƒé™ç®¡ç†ä½“ç³»</strong></p>
<ul>
<li>â˜‘ï¸ <strong>ç”¨æˆ·ç®¡ç†</strong>ï¼šå®Œæˆç”¨æˆ·æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤é…ç½®ï¼Œæ”¯æŒä¸åŒç”¨æˆ·ç™»å½•åå°çœ‹åˆ°ä¸åŒçš„é¦–é¡µ</li>
<li>â˜‘ï¸ <strong>éƒ¨é—¨ç®¡ç†</strong>ï¼šéƒ¨é—¨ç»„ç»‡æœºæ„ï¼ˆå…¬å¸ã€éƒ¨é—¨ã€å°ç»„ï¼‰ï¼Œæ ‘ç»“æ„å±•ç°</li>
<li>â˜‘ï¸ <strong>å²—ä½ç®¡ç†</strong>ï¼šå¯ä»¥ç»™ç”¨æˆ·é…ç½®æ‰€æ‹…ä»»èŒåŠ¡</li>
<li>â˜‘ï¸ <strong>è§’è‰²ç®¡ç†</strong>ï¼šæ ‘ç»“æ„è®¾è®¡ï¼Œæ”¯æŒè§’è‰²èœå•å’ŒæŒ‰é’®æƒé™åˆ†é…ï¼Œæ”¯æŒè§’è‰²æ•°æ®æƒé™åˆ†é…</li>
<li>â˜‘ï¸ <strong>èœå•ç®¡ç†</strong>ï¼šé…ç½®ç³»ç»Ÿèœå•å’ŒæŒ‰é’®ç­‰</li>
</ul>
<p><strong>ä¸‰çº§æƒé™ç®¡æ§</strong></p>
<p>CatchAdmin é‡‡ç”¨æ ‡å‡†çš„ RBACï¼ˆåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼‰æ¨¡å‹ï¼Œä½†åšäº†å¾ˆå¤šç»†èŠ‚ä¼˜åŒ–ï¼š</p>
<ul>
<li><strong>èœå•æƒé™</strong>ï¼šæ§åˆ¶ç”¨æˆ·èƒ½çœ‹åˆ°å“ªäº›èœå•</li>
<li><strong>æŒ‰é’®æƒé™</strong>ï¼šæ§åˆ¶èƒ½ç‚¹å‡»å“ªäº›æŒ‰é’®ï¼ˆæ¯”å¦‚"åˆ é™¤"æŒ‰é’®ï¼‰</li>
<li><strong>æ•°æ®æƒé™</strong>ï¼šæ§åˆ¶èƒ½çœ‹åˆ°å“ªäº›æ•°æ®ï¼ˆæ¯”å¦‚"åå—åŒºç»ç†åªèƒ½çœ‹åå—åŒºçš„è®¢å•"ï¼‰</li>
</ul>
<p><strong>ç³»ç»Ÿå·¥å…·</strong></p>
<ul>
<li>â˜‘ï¸ <strong>å­—å…¸ç®¡ç†</strong>ï¼šå¯¹ç³»ç»Ÿä¸­ç»å¸¸ä½¿ç”¨å¹¶ä¸”å›ºå®šçš„æ•°æ®å¯ä»¥é‡å¤ä½¿ç”¨å’Œç»´æŠ¤</li>
<li>â˜‘ï¸ <strong>ç³»ç»Ÿé…ç½®</strong>ï¼šç³»ç»Ÿçš„ä¸€äº›å¸¸ç”¨è®¾ç½®ç®¡ç†</li>
<li>â˜‘ï¸ <strong>æ“ä½œæ—¥å¿—</strong>ï¼šç”¨æˆ·å¯¹ç³»ç»Ÿçš„ä¸€äº›æ­£å¸¸æ“ä½œçš„æŸ¥è¯¢</li>
<li>â˜‘ï¸ <strong>ç™»å½•æ—¥å¿—</strong>ï¼šç”¨æˆ·ç™»å½•ç³»ç»Ÿçš„è®°å½•æŸ¥è¯¢</li>
</ul>
<p><strong>å¼€å‘å·¥å…·</strong></p>
<ul>
<li>â˜‘ï¸ <strong>ä»£ç ç”Ÿæˆ</strong>ï¼šå‰åç«¯ä»£ç çš„ç”Ÿæˆï¼ˆphpã€vueã€æ•°æ®åº“è¿ç§»ï¼‰ï¼Œæ”¯æŒä¸€é”®ç”Ÿæˆåˆ°æ¨¡å—</li>
<li>â˜‘ï¸ <strong>Schema ç®¡ç†</strong>ï¼šç”Ÿæˆè¡¨ç»“æ„</li>
<li>â˜‘ï¸ <strong>æ•°æ®è¡¨ç»´æŠ¤</strong>ï¼šå¯¹ç³»ç»Ÿçš„æ•°æ®è¡¨å¯ä»¥è¿›è¡Œæ¸…ç†ç¢ç‰‡å’Œä¼˜åŒ–</li>
</ul>
<p><strong>æ–‡ä»¶ç®¡ç†</strong></p>
<ul>
<li>â˜‘ï¸ <strong>æ–‡ä»¶ä¸Šä¼ </strong>ï¼šæ”¯æŒæœ¬åœ°ã€ä¸ƒç‰›äº‘ã€é˜¿é‡Œäº‘ã€è…¾è®¯äº‘</li>
<li>â˜‘ï¸ <strong>é™„ä»¶ç®¡ç†</strong>ï¼šç®¡ç†å½“å‰ç³»ç»Ÿä¸Šä¼ çš„æ–‡ä»¶åŠå›¾ç‰‡ç­‰ä¿¡æ¯</li>
</ul>
<h3 data-id="heading-11">æ–°å¢æ¨¡å—</h3>
<p><strong>CMS å†…å®¹ç®¡ç†æ¨¡å—</strong></p>
<p>4.1 ç‰ˆæœ¬æ–°å¢äº† CMS æ¨¡å—ï¼Œæ‰©å±•äº† CatchAdmin åœ¨å†…å®¹ç®¡ç†æ–¹é¢çš„èƒ½åŠ›ã€‚åŸºäº CatchAdmin å¯ä»¥å¿«é€Ÿæ­å»º CMSã€åšå®¢ã€æ–°é—»ç«™ç­‰å†…å®¹å‹ç³»ç»Ÿã€‚</p>
<h2 data-id="heading-12">å››ã€ç¤¾åŒºä¸ç”Ÿæ€</h2>
<h3 data-id="heading-13">å¤šç‰ˆæœ¬æ”¯æŒ</h3>
<p>2025 å¹´ï¼ŒCatchAdmin å½¢æˆäº†å¤šç‰ˆæœ¬æ”¯æŒçš„æ ¼å±€ï¼š</p>
<ul>
<li><strong>å¼€æºç‰ˆ</strong>ï¼šåŸºäº Laravelï¼Œå®Œå…¨å…è´¹ï¼Œé€‚åˆä¸­å°å‹é¡¹ç›®</li>
<li><strong>ä¸“ä¸šç‰ˆ</strong>ï¼šæä¾›æ›´å¤šä¼ä¸šçº§åŠŸèƒ½å’ŒæŠ€æœ¯æ”¯æŒ</li>
</ul>
<h3 data-id="heading-14">æ–‡æ¡£ä¸æ•™ç¨‹</h3>
<p><strong>å®˜æ–¹æ–‡æ¡£å®Œå–„</strong></p>
<p>æ–‡æ¡£åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fdocs%2F5.0%2Fintro" target="_blank" title="https://catchadmin.com/docs/5.0/intro" ref="nofollow noopener noreferrer">catchadmin.com/docs/5.0/inâ€¦</a></p>
<p>æ–‡æ¡£æ¶µç›–äº†ä»å®‰è£…ã€é…ç½®åˆ°å¼€å‘çš„å…¨æµç¨‹ï¼Œå¹¶ä¸”æŒç»­æ›´æ–°ã€‚</p>
<p><strong>Laravel å…è´¹å…¥é—¨æ•™ç¨‹</strong></p>
<p>ä¸ºäº†å¸®åŠ©æ–°æ‰‹å¿«é€Ÿä¸Šæ‰‹ï¼Œæˆ‘ä»¬æ¨å‡ºäº† Laravel å…è´¹å…¥é—¨æ•™ç¨‹ï¼š</p>
<ul>
<li>ä¸­æ–‡ç‰ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flaravel-study.catchadmin.com" target="_blank" title="https://laravel-study.catchadmin.com" ref="nofollow noopener noreferrer">laravel-study.catchadmin.com</a></li>
<li>è‹±æ–‡ç‰ˆï¼šREADME-en.md</li>
</ul>
<h2 data-id="heading-15">å†™åœ¨æœ€å</h2>
<p>2025 å¹´æ˜¯ CatchAdmin å¿«é€Ÿæˆé•¿çš„ä¸€å¹´ã€‚ä» 4.1 åˆ° 5.0ï¼Œä»å•ä¸€ç‰ˆæœ¬åˆ°å¤šç‰ˆæœ¬æ”¯æŒï¼Œä»çº¯å¼€æºåˆ°å•†ä¸šåŒ–æ¢ç´¢ï¼Œæ¯ä¸€æ­¥éƒ½èµ°å¾—åšå®šè€Œæ¸…æ™°ã€‚</p>
<p>æ„Ÿè°¢æ‰€æœ‰ä½¿ç”¨ CatchAdmin çš„å¼€å‘è€…ï¼Œæ„Ÿè°¢æ‰€æœ‰æå‡ºå»ºè®®å’Œåé¦ˆçš„ç¤¾åŒºæˆå‘˜ï¼Œæ„Ÿè°¢æ‰€æœ‰ä¸ºé¡¹ç›®è´¡çŒ®ä»£ç çš„è´¡çŒ®è€…ã€‚æ˜¯ä½ ä»¬çš„æ”¯æŒï¼Œè®© CatchAdmin èµ°åˆ°äº†ä»Šå¤©ã€‚</p>
<p>2026 å¹´ï¼Œæˆ‘ä»¬ä¼šç»§ç»­åšæŒæ¨¡å—åŒ–æ¶æ„çš„ç†å¿µï¼ŒæŒç»­ä¼˜åŒ–å¼€å‘ä½“éªŒï¼Œå®Œå–„ç”Ÿæ€å»ºè®¾ã€‚è®© PHP åå°å¼€å‘æ›´é«˜æ•ˆã€æ›´ä¼˜é›…ã€æ›´ç°ä»£ï¼Œè¿™æ˜¯ CatchAdmin çš„ä½¿å‘½ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ä¸å˜çš„è¿½æ±‚ã€‚</p>
<p>Laravel ç”Ÿæ€ä¾ç„¶å……æ»¡æ´»åŠ›ï¼Œè€Œ CatchAdmin æ­£æ˜¯è¿™ç§æ´»åŠ›çš„è¯æ˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[âš™ï¸ AIå†²å‡»ä¸‹çš„èŒåœºæ–°ç‰©ç§ï¼šè¶…çº§ä¸ªä½“]]></title>    <link>https://juejin.cn/post/7589978645134835722</link>    <guid>https://juejin.cn/post/7589978645134835722</guid>    <pubDate>2026-01-01T01:22:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589978645134835722" data-draft-id="7589839767817273382" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="âš™ï¸ AIå†²å‡»ä¸‹çš„èŒåœºæ–°ç‰©ç§ï¼šè¶…çº§ä¸ªä½“"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,LLM,AIGC"/> <meta itemprop="datePublished" content="2026-01-01T01:22:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            âš™ï¸ AIå†²å‡»ä¸‹çš„èŒåœºæ–°ç‰©ç§ï¼šè¶…çº§ä¸ªä½“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T01:22:24.000Z" title="Thu Jan 01 2026 01:22:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ§¨ ä¸€ã€AIæ—¶ä»£çš„â€œèŒåœºæ–­å±‚â€ï¼šä¸æ˜¯å¤±ä¸šï¼Œæ˜¯<strong>å¤±é…</strong></h2>
<p>ç°åœ¨çš„AIæµªæ½®ï¼Œä¸è’¸æ±½æœºã€äº’è”ç½‘é©å‘½æœ€å¤§çš„ä¸åŒï¼Œåœ¨äºå®ƒä¸æ˜¯â€œä½“åŠ›æ›¿ä»£â€ï¼Œè€Œæ˜¯â€œè®¤çŸ¥æ›¿ä»£â€ã€‚</p>
<p>è¿‡å»ï¼š</p>
<ul>
<li>æœºå™¨å–ä»£äº†äººåŠ›ï¼›</li>
<li>å·¥äººè½¬å‹æˆç®¡ç†è€…ã€‚</li>
</ul>
<p>ç°åœ¨ï¼š</p>
<ul>
<li>ç®—æ³•å–ä»£äº†çŸ¥è¯†åŠ³åŠ¨ï¼›</li>
<li>ç™½é¢†è¢«è¿«â€œå‡çº§â€ä¸ºåˆ›é€ è€…ã€‚</li>
</ul>
<p><strong>å…³é”®é—®é¢˜</strong>ï¼šAI å¹¶ä¸æ˜¯è®©äººç±»ä¸å·¥ä½œï¼Œè€Œæ˜¯è®©â€œä¼ ç»Ÿå·¥ä½œâ€ä¸å†æ˜¯åˆšéœ€ã€‚<br/>
äºæ˜¯â€”â€”</p>
<blockquote>
<p><strong>å°±ä¸šå±æœºçš„æ ¹æºä¸æ˜¯å²—ä½æ¶ˆå¤±ï¼Œè€Œæ˜¯äººç±»ç³»ç»Ÿçš„å†åˆ†é…æ»åã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ğŸ§¬ äºŒã€ä»€ä¹ˆæ˜¯â€œè¶…çº§ä¸ªä½“â€ï¼ˆSuper Individualï¼‰ï¼Ÿ</h2>
<p>æˆ‘ä»¬å¯ä»¥è¿™æ ·ç†è§£ï¼š</p>
<blockquote>
<p>è¶…çº§ä¸ªä½“ä¸æ˜¯â€œè¶…äººâ€ï¼Œè€Œæ˜¯â€œç³»ç»Ÿæ€è€ƒ+è‡ªæ¼”åŒ–â€çš„äººç±»æ–°æ¨¡æ¿ã€‚</p>
</blockquote>
<p>ğŸ“˜ å®šä¹‰åˆ†è§£ï¼š</p>






























<table><thead><tr><th>ç»´åº¦</th><th>è¶…çº§ä¸ªä½“çš„ç‰¹å¾</th><th>å¯¹æ¯”ä¼ ç»ŸèŒåœºäºº</th></tr></thead><tbody><tr><td>èƒ½åŠ›æ¨¡å‹</td><td>æ¨¡å—åŒ– &amp; ç»„è£…å¼ï¼ˆå¤šæŠ€èƒ½æ‹¼æ¥ï¼‰</td><td>çº¿æ€§æˆé•¿ï¼ˆå•èŒä¸šè·¯å¾„ï¼‰</td></tr><tr><td>ç»„ç»‡å…³ç³»</td><td>ç½‘ç»œèŠ‚ç‚¹ï¼ˆå¯åä½œã€å¯ç‹¬ç«‹ï¼‰</td><td>é™„å±èŠ‚ç‚¹ï¼ˆéœ€å±‚çº§æœºæ„ï¼‰</td></tr><tr><td>å·¥å…·å¿ƒæ™º</td><td>AIåŸç”Ÿä½¿ç”¨è€…</td><td>æ•°å­—å·¥å…·çš„æ“ä½œè€…</td></tr><tr><td>æ”¶ç›Šæ¨¡å‹</td><td>å¤šæ¸ é“ç§¯ç´¯ï¼ˆå†…å®¹ã€ä»£ç ã€èµ„äº§ï¼‰</td><td>å•ä¸€å·¥èµ„æ”¶å…¥</td></tr></tbody></table>
<p>ä¸€å¥è¯æ€»ç»“ï¼š</p>
<blockquote>
<p>è¶…çº§ä¸ªä½“ä¸æ˜¯â€œæ‰“å·¥çš„äººâ€ï¼Œè€Œæ˜¯â€œä¼šç”¨AIä¸ºè‡ªå·±æ‰“å·¥çš„äººâ€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-2">ğŸ§  ä¸‰ã€åº•å±‚é€»è¾‘ï¼šAI + è‡ªæˆ‘ç¼–è¯‘ = ç”Ÿäº§åŠ›æ”¾å¤§å™¨ ğŸ’¥</h2>
<p>æˆ‘ä»¬ä»¥å‰ä¾èµ–å…¬å¸æä¾›çš„èµ„æºä¸ç»“æ„ï¼Œç°åœ¨ AI è®©è¿™äº›éƒ½â€œæŠ½è±¡åŒ–â€äº†ã€‚</p>

























<table><thead><tr><th>å…¬å¸åŠŸèƒ½</th><th>AIæ›¿ä»£æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>åŸ¹è®­</td><td>GPT + Coursera + AutoTutor</td></tr><tr><td>å¸‚åœº</td><td>AI å¸‚åœºé¢„æµ‹ + ç¤¾äº¤åª’ä½“è‡ªåŠ¨åˆ†å‘</td></tr><tr><td>è®¾è®¡</td><td>Midjourney + Figma AI</td></tr><tr><td>ç­–ç•¥</td><td>Claude / ChatGPT æ¨¡æ‹ŸæŠ•ç­–æ¨¡å‹</td></tr></tbody></table>
<p>æ‰€ä»¥æœªæ¥çš„ä¸ªä½“å¯ä»¥åšåˆ°ï¼š</p>
<blockquote>
<p>â€œè‡ªå·±æ—¢æ˜¯ CEOï¼Œä¹Ÿæ˜¯ CTOã€CMOã€ä»¥åŠ HRã€‚â€<br/>
ï¼ˆå½“ç„¶ï¼Œè¿˜æœ‰é‚£ä¸ªæ·±å¤œé™ªä½ debugçš„è‡ªå·±ğŸ˜…ï¼‰</p>
</blockquote>
<hr/>
<h2 data-id="heading-3">ğŸ”® å››ã€è¶…çº§ä¸ªä½“çš„åº•å±‚ç»“æ„ï¼ˆä»ç³»ç»Ÿè®ºè§†è§’ï¼‰</h2>
<p>è®©æˆ‘ä»¬ä»¥ã€Œç³»ç»Ÿè®º + å¯å‘å­¦ä¹  + è¿­ä»£ã€çš„æ–¹å¼æ‹†è§£â€œè¶…çº§ä¸ªä½“â€çš„è¿è¡Œæœºåˆ¶ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">Input</span>] --&gt; çŸ¥è¯† + å·¥å…· + æ•°æ®æµ
   |
   â–¼
[<span class="hljs-meta">Processing Layer</span>]
   |- ä¿¡æ¯å»ºæ¨¡ï¼ˆLLMååŠ©ï¼‰
   |- ä»»åŠ¡åˆ‡ç‰‡ &amp; è‡ªåŠ¨æ‰§è¡Œï¼ˆAgentåŒ–ï¼‰
   |- æŒç»­åé¦ˆï¼ˆè‡ªç›‘ç£å­¦ä¹ ï¼‰
   |
   â–¼
[<span class="hljs-meta">Output</span>] --&gt; äº§å“ / å†…å®¹ / æ´è§ / æ”¶ç›Š
</code></pre>
<p>è¿™çœ‹èµ·æ¥å°±åƒä¸€ä¸ªâ€œå¾®å‹ç”Ÿç‰©AIç³»ç»Ÿâ€ï¼Œä¸ªä½“ä½œä¸º<strong>è‡ªç”Ÿé•¿èŠ‚ç‚¹</strong>ï¼Œè€Œéå…¬å¸ä¾é™„ä½“ã€‚<br/>
å¦‚æœ 20 ä¸–çºªçš„ç”Ÿäº§åŠ›å•å…ƒæ˜¯â€œå·¥å‚â€ï¼Œ<br/>
é‚£ä¹ˆ 21 ä¸–çºªçš„ç”Ÿäº§åŠ›å•å…ƒå°†æ˜¯<strong>äºº + AI åä½œä½“</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-4">ğŸš€ äº”ã€å®è·µè·¯å¾„ï¼šå¦‚ä½•â€œè¶…çº§ä¸ªä½“åŒ–â€ï¼Ÿ</h2>
<p>ä»¥ä¸‹æ˜¯ä¸€æ¡ç°å®å¯è½åœ°çš„è·¯çº¿å›¾ğŸ‘‡ï¼š</p>



































<table><thead><tr><th>é˜¶æ®µ</th><th>è¡ŒåŠ¨</th><th>å·¥å…·ç¤ºä¾‹</th></tr></thead><tbody><tr><td>1ï¸âƒ£ è‡ªè¯†åˆ«é˜¶æ®µ</td><td>æ„å»ºè‡ªå·±çš„çŸ¥è¯†èµ„äº§æ¡£æ¡ˆ</td><td>Notion + ChatGPT</td></tr><tr><td>2ï¸âƒ£ å·¥å…·æŒæ§</td><td>æŒæ¡è‡³å°‘ä¸¤ç§AIç”Ÿäº§å·¥å…·</td><td>Midjourney / Claude / Cursor</td></tr><tr><td>3ï¸âƒ£ å¹³å°åŒ–</td><td>è¾“å‡ºå†…å®¹æˆ–äº§å“ + ç¤¾ç¾¤å½±å“åŠ›</td><td>Substack / Bilibili / LinkedIn</td></tr><tr><td>4ï¸âƒ£ è‡ªåŠ¨åŒ–</td><td>è®©AIå¸®ä½ è¿è¡Œéƒ¨åˆ†ä¸šåŠ¡</td><td>OpenDevin / AutoGPT</td></tr><tr><td>5ï¸âƒ£ æ™ºèƒ½è¿›åŒ–</td><td>è‡ªé€‚åº”å­¦ä¹ å’ŒçŸ¥è¯†è’¸é¦</td><td>å‘â€œèµ›åšä¸ªä½“â€é æ‹¢</td></tr></tbody></table>
<p>ğŸŒ± å°è´´å£«ï¼š</p>
<blockquote>
<p>æœªæ¥ä¸æ˜¯ä½ è¦ä¸è¦å­¦ä¹  AIï¼Œ<br/>
è€Œæ˜¯ AI å·²ç»å­¦ä¼šäº†ä½ åŸæœ¬çš„å·¥ä½œã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-5">ğŸ§© å…­ã€ç¤¾ä¼šè§†è§’ï¼šä»â€œå•ä½äººâ€åˆ°â€œç½‘ç»œäººâ€</h2>
<p>å›çœ‹äººç±»ç¤¾ä¼šæ¼”åŒ–ï¼š</p>

























<table><thead><tr><th>æ—¶ä»£</th><th>å•ä½ç»“æ„</th><th>äººçš„å®šä½</th></tr></thead><tbody><tr><td>å·¥ä¸šæ—¶ä»£</td><td>å…¬å¸åˆ¶</td><td>é›¶ä»¶</td></tr><tr><td>ä¿¡æ¯æ—¶ä»£</td><td>å¹³å°åˆ¶</td><td>ç”¨æˆ·</td></tr><tr><td>æ™ºèƒ½æ—¶ä»£</td><td>ç½‘ç»œåˆ¶</td><td>ä¸ªä½“èŠ‚ç‚¹</td></tr></tbody></table>
<p>åœ¨æ–°çš„å¾ªç¯ä¸­â€”â€”</p>
<blockquote>
<p><strong>äºº</strong>ä¸å†æ˜¯â€œç»æµçš„ä»å±ç‰©â€ï¼Œ<br/>
è€Œæ˜¯ä¸€ä¸ªæ‹¥æœ‰â€œè‡ªæˆ‘å¯åŠ¨ã€è‡ªæˆ‘åˆ†å‘ã€è‡ªæˆ‘å¤åˆ©èƒ½åŠ›â€çš„æ™ºèƒ½èŠ‚ç‚¹ã€‚</p>
</blockquote>
<p>è¶…çº§ä¸ªä½“æ¨¡å‹ä¸æ˜¯é€ƒç¦»ç¤¾ä¼šï¼Œè€Œæ˜¯<strong>ä¸AIå…±åŒé‡ç»„ç¤¾ä¼šç»“æ„</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[3åˆ†é’ŸSolidity: 8.7 ERC1155]]></title>    <link>https://juejin.cn/post/7589978645134524426</link>    <guid>https://juejin.cn/post/7589978645134524426</guid>    <pubDate>2025-12-31T16:10:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589978645134524426" data-draft-id="7589835342145880074" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="3åˆ†é’ŸSolidity: 8.7 ERC1155"/> <meta itemprop="keywords" content="Solidity,web3,æ™ºèƒ½åˆçº¦"/> <meta itemprop="datePublished" content="2025-12-31T16:10:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Rockbean"/> <meta itemprop="url" content="https://juejin.cn/user/4054654615823560"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            3åˆ†é’ŸSolidity: 8.7 ERC1155
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4054654615823560/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Rockbean
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-31T16:10:15.000Z" title="Wed Dec 31 2025 16:10:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ¬¢è¿è®¢é˜…ä¸“æ </strong>ï¼š<a href="https://juejin.cn/column/7578762210285977663" title="https://juejin.cn/column/7578762210285977663" target="_blank">3åˆ†é’ŸSolidity--æ™ºèƒ½åˆçº¦--Web3åŒºå—é“¾æŠ€æœ¯å¿…å­¦</a></p>
<p>å¦‚éœ€è·å–æœ¬å†…å®¹çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè¯·å‚è§ <a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">Cyfrin.io ä¸Šçš„ERC1155ï¼ˆä»£ç ç¤ºä¾‹ï¼‰</a></p>
<p>ä¸ <code>ERC-20</code> å’Œå…¶ä»–æ ‡å‡†ç›¸æ¯”ï¼Œ<code>ERC-1155</code> ä»£å¸åè®®æ ‡å‡†çªå‡ºçš„åœ°æ–¹åœ¨äºå®ƒæ˜¯å¦‚ä½•è·¨é“¾å…¼å®¹çš„ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œç”¨æˆ·çš„å¤§éƒ¨åˆ†èµ„äº§åªèƒ½åœ¨ä»¥å¤ªåŠåŒºå—é“¾ä¸Šä½¿ç”¨ï¼Œç„¶è€Œ ERC-1155 æ ‡å‡†ä¹Ÿä½¿å…¶èµ„äº§ä¸å…¶ä»–ç”Ÿæ€ç³»ç»Ÿå…¼å®¹ï¼Œèƒ½å¤Ÿè·¨å¤šä¸ªåŒºå—é“¾è¿›è¡Œæ“ä½œä¼¼ä¹æ˜¯å”¯ä¸€çš„å‡ºè·¯ã€‚</p>
<p><strong>ERC-1155 ä¸ä¼ ç»Ÿçš„ä»£å¸éå¸¸ä¸åŒï¼Œä¸èƒ½ç›´æ¥é”€æ¯ã€‚</strong> ç›¸åï¼Œé™¤éæœ€åˆçš„å¼€å‘äººå‘˜å®šæœŸä¹°å›ä»£å¸ï¼Œå¦åˆ™å®ƒä»¬é€šå¸¸ä»åœ¨æµé€šã€‚ERC-1155 çš„å®šä½ä¸ºæ›´å…·ä½“çš„ä»£å¸æ ‡å‡†ï¼Œå› ä¸ºåœ¨æ­¤æ ‡å‡†ä¸Šä»»ä½•èµ„äº§éƒ½å¯ä»¥åœ¨ä»»ä½•ç»™å®šæ—¶é—´åˆ›å»ºå’Œé”€æ¯ã€‚</p>
<p>ERC1155 ç¤ºä¾‹</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// SPDX-License-Identifier: MIT</span>
pragma solidity ^<span class="hljs-number">0.8</span><span class="hljs-selector-class">.26</span>;

interface IERC1155 {
    function <span class="hljs-built_in">safeTransferFrom</span>(
        address from,
        address to,
        uint256 id,
        uint256 value,
        bytes calldata data
    ) external;
    function <span class="hljs-built_in">safeBatchTransferFrom</span>(
        address from,
        address to,
        uint256[] calldata ids,
        uint256[] calldata values,
        bytes calldata data
    ) external;
    function <span class="hljs-built_in">balanceOf</span>(address owner, uint256 id)
        external
        view
        returns (uint256);
    function <span class="hljs-built_in">balanceOfBatch</span>(address[] calldata owners, uint256[] calldata ids)
        external
        view
        returns (uint256[] memory);
    function <span class="hljs-built_in">setApprovalForAll</span>(address operator, bool approved) external;
    function <span class="hljs-built_in">isApprovedForAll</span>(address owner, address operator)
        external
        view
        returns (bool);
}

interface IERC1155TokenReceiver {
    function <span class="hljs-built_in">onERC1155Received</span>(
        address operator,
        address from,
        uint256 id,
        uint256 value,
        bytes calldata data
    ) external returns (bytes4);

    function <span class="hljs-built_in">onERC1155BatchReceived</span>(
        address operator,
        address from,
        uint256[] calldata ids,
        uint256[] calldata values,
        bytes calldata data
    ) external returns (bytes4);
}

contract ERC1155 is IERC1155 {
    event <span class="hljs-built_in">TransferSingle</span>(
        address indexed operator,
        address indexed from,
        address indexed to,
        uint256 id,
        uint256 value
    );
    event <span class="hljs-built_in">TransferBatch</span>(
        address indexed operator,
        address indexed from,
        address indexed to,
        uint256[] ids,
        uint256[] values
    );
    event <span class="hljs-built_in">ApprovalForAll</span>(
        address indexed owner, address indexed operator, bool approved
    );
    event <span class="hljs-built_in">URI</span>(string value, uint256 indexed id);

    <span class="hljs-comment">// owner =&gt; id =&gt; balance</span>
    <span class="hljs-built_in">mapping</span>(address =&gt; mapping(uint256 =&gt; uint256)) public balanceOf;
    <span class="hljs-comment">// owner =&gt; operator =&gt; approved</span>
    <span class="hljs-built_in">mapping</span>(address =&gt; mapping(address =&gt; bool)) public isApprovedForAll;

    function <span class="hljs-built_in">balanceOfBatch</span>(address[] calldata owners, uint256[] calldata ids)
        external
        view
        returns (uint256[] memory balances)
    {
        <span class="hljs-built_in">require</span>(owners.length == ids.length, "owners length != ids length");

        balances = new uint256<span class="hljs-selector-attr">[]</span>(owners.length);

        unchecked {
            for (uint256 i = <span class="hljs-number">0</span>; i &lt; owners.length; i++) {
                balances<span class="hljs-selector-attr">[i]</span> = balanceOf<span class="hljs-selector-attr">[owners[i]</span>]<span class="hljs-selector-attr">[ids[i]</span>];
            }
        }
    }

    function <span class="hljs-built_in">setApprovalForAll</span>(address operator, bool approved) external {
        isApprovedForAll<span class="hljs-selector-attr">[msg.sender]</span><span class="hljs-selector-attr">[operator]</span> = approved;
        emit <span class="hljs-built_in">ApprovalForAll</span>(msg.sender, operator, approved);
    }

    function <span class="hljs-built_in">safeTransferFrom</span>(
        address from,
        address to,
        uint256 id,
        uint256 value,
        bytes calldata data
    ) external {
        <span class="hljs-built_in">require</span>(
            msg.sender == from || isApprovedForAll[from][msg.sender],
            "not approved"
        );
        <span class="hljs-built_in">require</span>(to != address(<span class="hljs-number">0</span>), "to = <span class="hljs-number">0</span> <span class="hljs-selector-tag">address</span>");

        balanceOf<span class="hljs-selector-attr">[from]</span><span class="hljs-selector-attr">[id]</span> -= value;
        balanceOf<span class="hljs-selector-attr">[to]</span><span class="hljs-selector-attr">[id]</span> += value;

        emit <span class="hljs-built_in">TransferSingle</span>(msg.sender, from, to, id, value);

        if (to.code.length &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-built_in">require</span>(
                IERC1155TokenReceiver(to)<span class="hljs-selector-class">.onERC1155Received</span>(
                    msg.sender, from, id, value, data
                ) == IERC1155TokenReceiver<span class="hljs-selector-class">.onERC1155Received</span><span class="hljs-selector-class">.selector</span>,
                "unsafe transfer"
            );
        }
    }

    function <span class="hljs-built_in">safeBatchTransferFrom</span>(
        address from,
        address to,
        uint256[] calldata ids,
        uint256[] calldata values,
        bytes calldata data
    ) external {
        <span class="hljs-built_in">require</span>(
            msg.sender == from || isApprovedForAll[from][msg.sender],
            "not approved"
        );
        <span class="hljs-built_in">require</span>(to != address(<span class="hljs-number">0</span>), "to = <span class="hljs-number">0</span> <span class="hljs-selector-tag">address</span>");
        <span class="hljs-built_in">require</span>(ids.length == values.length, "ids length != values length");

        for (uint256 i = <span class="hljs-number">0</span>; i &lt; ids.length; i++) {
            balanceOf<span class="hljs-selector-attr">[from]</span><span class="hljs-selector-attr">[ids[i]</span>] -= values<span class="hljs-selector-attr">[i]</span>;
            balanceOf<span class="hljs-selector-attr">[to]</span><span class="hljs-selector-attr">[ids[i]</span>] += values<span class="hljs-selector-attr">[i]</span>;
        }

        emit <span class="hljs-built_in">TransferBatch</span>(msg.sender, from, to, ids, values);

        if (to.code.length &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-built_in">require</span>(
                IERC1155TokenReceiver(to)<span class="hljs-selector-class">.onERC1155BatchReceived</span>(
                    msg.sender, from, ids, values, data
                ) == IERC1155TokenReceiver<span class="hljs-selector-class">.onERC1155BatchReceived</span><span class="hljs-selector-class">.selector</span>,
                "unsafe transfer"
            );
        }
    }

    <span class="hljs-comment">// ERC165</span>
    function <span class="hljs-built_in">supportsInterface</span>(bytes4 interfaceId)
        external
        pure
        returns (bool)
    {
        return interfaceId == <span class="hljs-number">0</span>x01ffc9a7 <span class="hljs-comment">// ERC165 Interface ID for ERC165</span>
            || interfaceId == <span class="hljs-number">0</span>xd9b67a26 <span class="hljs-comment">// ERC165 Interface ID for ERC1155</span>
            || interfaceId == <span class="hljs-number">0</span>x0e89341c; <span class="hljs-comment">// ERC165 Interface ID for ERC1155MetadataURI</span>
    }

    <span class="hljs-comment">// ERC1155 Metadata URI</span>
    function <span class="hljs-built_in">uri</span>(uint256 id) public view virtual returns (string memory) {}

    <span class="hljs-comment">// Internal functions</span>
    function <span class="hljs-built_in">_mint</span>(address to, uint256 id, uint256 value, bytes memory data)
        internal
    {
        <span class="hljs-built_in">require</span>(to != address(<span class="hljs-number">0</span>), "to = <span class="hljs-number">0</span> <span class="hljs-selector-tag">address</span>");

        balanceOf<span class="hljs-selector-attr">[to]</span><span class="hljs-selector-attr">[id]</span> += value;

        emit <span class="hljs-built_in">TransferSingle</span>(msg.sender, address(<span class="hljs-number">0</span>), to, id, value);

        if (to.code.length &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-built_in">require</span>(
                IERC1155TokenReceiver(to)<span class="hljs-selector-class">.onERC1155Received</span>(
                    msg.sender, address(<span class="hljs-number">0</span>), id, value, data
                ) == IERC1155TokenReceiver<span class="hljs-selector-class">.onERC1155Received</span><span class="hljs-selector-class">.selector</span>,
                "unsafe transfer"
            );
        }
    }

    function <span class="hljs-built_in">_batchMint</span>(
        address to,
        uint256[] calldata ids,
        uint256[] calldata values,
        bytes calldata data
    ) internal {
        <span class="hljs-built_in">require</span>(to != address(<span class="hljs-number">0</span>), "to = <span class="hljs-number">0</span> <span class="hljs-selector-tag">address</span>");
        <span class="hljs-built_in">require</span>(ids.length == values.length, "ids length != values length");

        for (uint256 i = <span class="hljs-number">0</span>; i &lt; ids.length; i++) {
            balanceOf<span class="hljs-selector-attr">[to]</span><span class="hljs-selector-attr">[ids[i]</span>] += values<span class="hljs-selector-attr">[i]</span>;
        }

        emit <span class="hljs-built_in">TransferBatch</span>(msg.sender, address(<span class="hljs-number">0</span>), to, ids, values);

        if (to.code.length &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-built_in">require</span>(
                IERC1155TokenReceiver(to)<span class="hljs-selector-class">.onERC1155BatchReceived</span>(
                    msg.sender, address(<span class="hljs-number">0</span>), ids, values, data
                ) == IERC1155TokenReceiver<span class="hljs-selector-class">.onERC1155BatchReceived</span><span class="hljs-selector-class">.selector</span>,
                "unsafe transfer"
            );
        }
    }

    function <span class="hljs-built_in">_burn</span>(address from, uint256 id, uint256 value) internal {
        <span class="hljs-built_in">require</span>(from != address(<span class="hljs-number">0</span>), "from = <span class="hljs-number">0</span> <span class="hljs-selector-tag">address</span>");
        balanceOf<span class="hljs-selector-attr">[from]</span><span class="hljs-selector-attr">[id]</span> -= value;
        emit <span class="hljs-built_in">TransferSingle</span>(msg.sender, from, address(<span class="hljs-number">0</span>), id, value);
    }

    function <span class="hljs-built_in">_batchBurn</span>(
        address from,
        uint256[] calldata ids,
        uint256[] calldata values
    ) internal {
        <span class="hljs-built_in">require</span>(from != address(<span class="hljs-number">0</span>), "from = <span class="hljs-number">0</span> <span class="hljs-selector-tag">address</span>");
        <span class="hljs-built_in">require</span>(ids.length == values.length, "ids length != values length");

        for (uint256 i = <span class="hljs-number">0</span>; i &lt; ids.length; i++) {
            balanceOf<span class="hljs-selector-attr">[from]</span><span class="hljs-selector-attr">[ids[i]</span>] -= values<span class="hljs-selector-attr">[i]</span>;
        }

        emit <span class="hljs-built_in">TransferBatch</span>(msg.sender, from, address(<span class="hljs-number">0</span>), ids, values);
    }
}

contract MyMultiToken is ERC1155 {
    function <span class="hljs-built_in">mint</span>(uint256 id, uint256 value, bytes memory data) external {
        <span class="hljs-built_in">_mint</span>(msg.sender, id, value, data);
    }

    function <span class="hljs-built_in">batchMint</span>(
        uint256[] calldata ids,
        uint256[] calldata values,
        bytes calldata data
    ) external {
        <span class="hljs-built_in">_batchMint</span>(msg.sender, ids, values, data);
    }

    function <span class="hljs-built_in">burn</span>(uint256 id, uint256 value) external {
        <span class="hljs-built_in">_burn</span>(msg.sender, id, value);
    }

    function <span class="hljs-built_in">batchBurn</span>(uint256[] calldata ids, uint256[] calldata values)
        external
    {
        <span class="hljs-built_in">_batchBurn</span>(msg.sender, ids, values);
    }
}
</code></pre>
<p>Remix Lite å°è¯•ä¸€ä¸‹</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fremix.byteatatime.dev%2F%3F%23code%3DLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVApwcmFnbWEgc29saWRpdHkgXjAuOC4yNjsKCmludGVyZmFjZSBJRVJDMTE1NSB7CiAgICBmdW5jdGlvbiBzYWZlVHJhbnNmZXJGcm9tKAogICAgICAgIGFkZHJlc3MgZnJvbSwKICAgICAgICBhZGRyZXNzIHRvLAogICAgICAgIHVpbnQyNTYgaWQsCiAgICAgICAgdWludDI1NiB2YWx1ZSwKICAgICAgICBieXRlcyBjYWxsZGF0YSBkYXRhCiAgICApIGV4dGVybmFsOwogICAgZnVuY3Rpb24gc2FmZUJhdGNoVHJhbnNmZXJGcm9tKAogICAgICAgIGFkZHJlc3MgZnJvbSwKICAgICAgICBhZGRyZXNzIHRvLAogICAgICAgIHVpbnQyNTZbXSBjYWxsZGF0YSBpZHMsCiAgICAgICAgdWludDI1NltdIGNhbGxkYXRhIHZhbHVlcywKICAgICAgICBieXRlcyBjYWxsZGF0YSBkYXRhCiAgICApIGV4dGVybmFsOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgb3duZXIsIHVpbnQyNTYgaWQpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2ZCYXRjaChhZGRyZXNzW10gY2FsbGRhdGEgb3duZXJzLCB1aW50MjU2W10gY2FsbGRhdGEgaWRzKQogICAgICAgIGV4dGVybmFsCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnMgKHVpbnQyNTZbXSBtZW1vcnkpOwogICAgZnVuY3Rpb24gc2V0QXBwcm92YWxGb3JBbGwoYWRkcmVzcyBvcGVyYXRvciwgYm9vbCBhcHByb3ZlZCkgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBpc0FwcHJvdmVkRm9yQWxsKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgb3BlcmF0b3IpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAoYm9vbCk7Cn0KCmludGVyZmFjZSBJRVJDMTE1NVRva2VuUmVjZWl2ZXIgewogICAgZnVuY3Rpb24gb25FUkMxMTU1UmVjZWl2ZWQoCiAgICAgICAgYWRkcmVzcyBvcGVyYXRvciwKICAgICAgICBhZGRyZXNzIGZyb20sCiAgICAgICAgdWludDI1NiBpZCwKICAgICAgICB1aW50MjU2IHZhbHVlLAogICAgICAgIGJ5dGVzIGNhbGxkYXRhIGRhdGEKICAgICkgZXh0ZXJuYWwgcmV0dXJucyAoYnl0ZXM0KTsKCiAgICBmdW5jdGlvbiBvbkVSQzExNTVCYXRjaFJlY2VpdmVkKAogICAgICAgIGFkZHJlc3Mgb3BlcmF0b3IsCiAgICAgICAgYWRkcmVzcyBmcm9tLAogICAgICAgIHVpbnQyNTZbXSBjYWxsZGF0YSBpZHMsCiAgICAgICAgdWludDI1NltdIGNhbGxkYXRhIHZhbHVlcywKICAgICAgICBieXRlcyBjYWxsZGF0YSBkYXRhCiAgICApIGV4dGVybmFsIHJldHVybnMgKGJ5dGVzNCk7Cn0KCmNvbnRyYWN0IEVSQzExNTUgaXMgSUVSQzExNTUgewogICAgZXZlbnQgVHJhbnNmZXJTaW5nbGUoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIG9wZXJhdG9yLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBmcm9tLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCB0bywKICAgICAgICB1aW50MjU2IGlkLAogICAgICAgIHVpbnQyNTYgdmFsdWUKICAgICk7CiAgICBldmVudCBUcmFuc2ZlckJhdGNoKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBvcGVyYXRvciwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgZnJvbSwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgdG8sCiAgICAgICAgdWludDI1NltdIGlkcywKICAgICAgICB1aW50MjU2W10gdmFsdWVzCiAgICApOwogICAgZXZlbnQgQXBwcm92YWxGb3JBbGwoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgb3BlcmF0b3IsIGJvb2wgYXBwcm92ZWQKICAgICk7CiAgICBldmVudCBVUkkoc3RyaW5nIHZhbHVlLCB1aW50MjU2IGluZGV4ZWQgaWQpOwoKICAgIC8vIG93bmVyID0%2BIGlkID0%2BIGJhbGFuY2UKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nKHVpbnQyNTYgPT4gdWludDI1NikpIHB1YmxpYyBiYWxhbmNlT2Y7CiAgICAvLyBvd25lciA9PiBvcGVyYXRvciA9PiBhcHByb3ZlZAogICAgbWFwcGluZyhhZGRyZXNzID0%2BIG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSkgcHVibGljIGlzQXBwcm92ZWRGb3JBbGw7CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mQmF0Y2goYWRkcmVzc1tdIGNhbGxkYXRhIG93bmVycywgdWludDI1NltdIGNhbGxkYXRhIGlkcykKICAgICAgICBleHRlcm5hbAogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zICh1aW50MjU2W10gbWVtb3J5IGJhbGFuY2VzKQogICAgewogICAgICAgIHJlcXVpcmUob3duZXJzLmxlbmd0aCA9PSBpZHMubGVuZ3RoLCAib3duZXJzIGxlbmd0aCAhPSBpZHMgbGVuZ3RoIik7CgogICAgICAgIGJhbGFuY2VzID0gbmV3IHVpbnQyNTZbXShvd25lcnMubGVuZ3RoKTsKCiAgICAgICAgdW5jaGVja2VkIHsKICAgICAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgb3duZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBiYWxhbmNlc1tpXSA9IGJhbGFuY2VPZltvd25lcnNbaV1dW2lkc1tpXV07CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2V0QXBwcm92YWxGb3JBbGwoYWRkcmVzcyBvcGVyYXRvciwgYm9vbCBhcHByb3ZlZCkgZXh0ZXJuYWwgewogICAgICAgIGlzQXBwcm92ZWRGb3JBbGxbbXNnLnNlbmRlcl1bb3BlcmF0b3JdID0gYXBwcm92ZWQ7CiAgICAgICAgZW1pdCBBcHByb3ZhbEZvckFsbChtc2cuc2VuZGVyLCBvcGVyYXRvciwgYXBwcm92ZWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVUcmFuc2ZlckZyb20oCiAgICAgICAgYWRkcmVzcyBmcm9tLAogICAgICAgIGFkZHJlc3MgdG8sCiAgICAgICAgdWludDI1NiBpZCwKICAgICAgICB1aW50MjU2IHZhbHVlLAogICAgICAgIGJ5dGVzIGNhbGxkYXRhIGRhdGEKICAgICkgZXh0ZXJuYWwgewogICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgIG1zZy5zZW5kZXIgPT0gZnJvbSB8fCBpc0FwcHJvdmVkRm9yQWxsW2Zyb21dW21zZy5zZW5kZXJdLAogICAgICAgICAgICAibm90IGFwcHJvdmVkIgogICAgICAgICk7CiAgICAgICAgcmVxdWlyZSh0byAhPSBhZGRyZXNzKDApLCAidG8gPSAwIGFkZHJlc3MiKTsKCiAgICAgICAgYmFsYW5jZU9mW2Zyb21dW2lkXSAtPSB2YWx1ZTsKICAgICAgICBiYWxhbmNlT2ZbdG9dW2lkXSArPSB2YWx1ZTsKCiAgICAgICAgZW1pdCBUcmFuc2ZlclNpbmdsZShtc2cuc2VuZGVyLCBmcm9tLCB0bywgaWQsIHZhbHVlKTsKCiAgICAgICAgaWYgKHRvLmNvZGUubGVuZ3RoID4gMCkgewogICAgICAgICAgICByZXF1aXJlKAogICAgICAgICAgICAgICAgSUVSQzExNTVUb2tlblJlY2VpdmVyKHRvKS5vbkVSQzExNTVSZWNlaXZlZCgKICAgICAgICAgICAgICAgICAgICBtc2cuc2VuZGVyLCBmcm9tLCBpZCwgdmFsdWUsIGRhdGEKICAgICAgICAgICAgICAgICkgPT0gSUVSQzExNTVUb2tlblJlY2VpdmVyLm9uRVJDMTE1NVJlY2VpdmVkLnNlbGVjdG9yLAogICAgICAgICAgICAgICAgInVuc2FmZSB0cmFuc2ZlciIKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZUJhdGNoVHJhbnNmZXJGcm9tKAogICAgICAgIGFkZHJlc3MgZnJvbSwKICAgICAgICBhZGRyZXNzIHRvLAogICAgICAgIHVpbnQyNTZbXSBjYWxsZGF0YSBpZHMsCiAgICAgICAgdWludDI1NltdIGNhbGxkYXRhIHZhbHVlcywKICAgICAgICBieXRlcyBjYWxsZGF0YSBkYXRhCiAgICApIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKAogICAgICAgICAgICBtc2cuc2VuZGVyID09IGZyb20gfHwgaXNBcHByb3ZlZEZvckFsbFtmcm9tXVttc2cuc2VuZGVyXSwKICAgICAgICAgICAgIm5vdCBhcHByb3ZlZCIKICAgICAgICApOwogICAgICAgIHJlcXVpcmUodG8gIT0gYWRkcmVzcygwKSwgInRvID0gMCBhZGRyZXNzIik7CiAgICAgICAgcmVxdWlyZShpZHMubGVuZ3RoID09IHZhbHVlcy5sZW5ndGgsICJpZHMgbGVuZ3RoICE9IHZhbHVlcyBsZW5ndGgiKTsKCiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgaWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGJhbGFuY2VPZltmcm9tXVtpZHNbaV1dIC09IHZhbHVlc1tpXTsKICAgICAgICAgICAgYmFsYW5jZU9mW3RvXVtpZHNbaV1dICs9IHZhbHVlc1tpXTsKICAgICAgICB9CgogICAgICAgIGVtaXQgVHJhbnNmZXJCYXRjaChtc2cuc2VuZGVyLCBmcm9tLCB0bywgaWRzLCB2YWx1ZXMpOwoKICAgICAgICBpZiAodG8uY29kZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgICAgICBJRVJDMTE1NVRva2VuUmVjZWl2ZXIodG8pLm9uRVJDMTE1NUJhdGNoUmVjZWl2ZWQoCiAgICAgICAgICAgICAgICAgICAgbXNnLnNlbmRlciwgZnJvbSwgaWRzLCB2YWx1ZXMsIGRhdGEKICAgICAgICAgICAgICAgICkgPT0gSUVSQzExNTVUb2tlblJlY2VpdmVyLm9uRVJDMTE1NUJhdGNoUmVjZWl2ZWQuc2VsZWN0b3IsCiAgICAgICAgICAgICAgICAidW5zYWZlIHRyYW5zZmVyIgogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBFUkMxNjUKICAgIGZ1bmN0aW9uIHN1cHBvcnRzSW50ZXJmYWNlKGJ5dGVzNCBpbnRlcmZhY2VJZCkKICAgICAgICBleHRlcm5hbAogICAgICAgIHB1cmUKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJldHVybiBpbnRlcmZhY2VJZCA9PSAweDAxZmZjOWE3IC8vIEVSQzE2NSBJbnRlcmZhY2UgSUQgZm9yIEVSQzE2NQogICAgICAgICAgICB8fCBpbnRlcmZhY2VJZCA9PSAweGQ5YjY3YTI2IC8vIEVSQzE2NSBJbnRlcmZhY2UgSUQgZm9yIEVSQzExNTUKICAgICAgICAgICAgfHwgaW50ZXJmYWNlSWQgPT0gMHgwZTg5MzQxYzsgLy8gRVJDMTY1IEludGVyZmFjZSBJRCBmb3IgRVJDMTE1NU1ldGFkYXRhVVJJCiAgICB9CgogICAgLy8gRVJDMTE1NSBNZXRhZGF0YSBVUkkKICAgIGZ1bmN0aW9uIHVyaSh1aW50MjU2IGlkKSBwdWJsaWMgdmlldyB2aXJ0dWFsIHJldHVybnMgKHN0cmluZyBtZW1vcnkpIHt9CgogICAgLy8gSW50ZXJuYWwgZnVuY3Rpb25zCiAgICBmdW5jdGlvbiBfbWludChhZGRyZXNzIHRvLCB1aW50MjU2IGlkLCB1aW50MjU2IHZhbHVlLCBieXRlcyBtZW1vcnkgZGF0YSkKICAgICAgICBpbnRlcm5hbAogICAgewogICAgICAgIHJlcXVpcmUodG8gIT0gYWRkcmVzcygwKSwgInRvID0gMCBhZGRyZXNzIik7CgogICAgICAgIGJhbGFuY2VPZlt0b11baWRdICs9IHZhbHVlOwoKICAgICAgICBlbWl0IFRyYW5zZmVyU2luZ2xlKG1zZy5zZW5kZXIsIGFkZHJlc3MoMCksIHRvLCBpZCwgdmFsdWUpOwoKICAgICAgICBpZiAodG8uY29kZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgICAgICBJRVJDMTE1NVRva2VuUmVjZWl2ZXIodG8pLm9uRVJDMTE1NVJlY2VpdmVkKAogICAgICAgICAgICAgICAgICAgIG1zZy5zZW5kZXIsIGFkZHJlc3MoMCksIGlkLCB2YWx1ZSwgZGF0YQogICAgICAgICAgICAgICAgKSA9PSBJRVJDMTE1NVRva2VuUmVjZWl2ZXIub25FUkMxMTU1UmVjZWl2ZWQuc2VsZWN0b3IsCiAgICAgICAgICAgICAgICAidW5zYWZlIHRyYW5zZmVyIgogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBfYmF0Y2hNaW50KAogICAgICAgIGFkZHJlc3MgdG8sCiAgICAgICAgdWludDI1NltdIGNhbGxkYXRhIGlkcywKICAgICAgICB1aW50MjU2W10gY2FsbGRhdGEgdmFsdWVzLAogICAgICAgIGJ5dGVzIGNhbGxkYXRhIGRhdGEKICAgICkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUodG8gIT0gYWRkcmVzcygwKSwgInRvID0gMCBhZGRyZXNzIik7CiAgICAgICAgcmVxdWlyZShpZHMubGVuZ3RoID09IHZhbHVlcy5sZW5ndGgsICJpZHMgbGVuZ3RoICE9IHZhbHVlcyBsZW5ndGgiKTsKCiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgaWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGJhbGFuY2VPZlt0b11baWRzW2ldXSArPSB2YWx1ZXNbaV07CiAgICAgICAgfQoKICAgICAgICBlbWl0IFRyYW5zZmVyQmF0Y2gobXNnLnNlbmRlciwgYWRkcmVzcygwKSwgdG8sIGlkcywgdmFsdWVzKTsKCiAgICAgICAgaWYgKHRvLmNvZGUubGVuZ3RoID4gMCkgewogICAgICAgICAgICByZXF1aXJlKAogICAgICAgICAgICAgICAgSUVSQzExNTVUb2tlblJlY2VpdmVyKHRvKS5vbkVSQzExNTVCYXRjaFJlY2VpdmVkKAogICAgICAgICAgICAgICAgICAgIG1zZy5zZW5kZXIsIGFkZHJlc3MoMCksIGlkcywgdmFsdWVzLCBkYXRhCiAgICAgICAgICAgICAgICApID09IElFUkMxMTU1VG9rZW5SZWNlaXZlci5vbkVSQzExNTVCYXRjaFJlY2VpdmVkLnNlbGVjdG9yLAogICAgICAgICAgICAgICAgInVuc2FmZSB0cmFuc2ZlciIKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gX2J1cm4oYWRkcmVzcyBmcm9tLCB1aW50MjU2IGlkLCB1aW50MjU2IHZhbHVlKSBpbnRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShmcm9tICE9IGFkZHJlc3MoMCksICJmcm9tID0gMCBhZGRyZXNzIik7CiAgICAgICAgYmFsYW5jZU9mW2Zyb21dW2lkXSAtPSB2YWx1ZTsKICAgICAgICBlbWl0IFRyYW5zZmVyU2luZ2xlKG1zZy5zZW5kZXIsIGZyb20sIGFkZHJlc3MoMCksIGlkLCB2YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gX2JhdGNoQnVybigKICAgICAgICBhZGRyZXNzIGZyb20sCiAgICAgICAgdWludDI1NltdIGNhbGxkYXRhIGlkcywKICAgICAgICB1aW50MjU2W10gY2FsbGRhdGEgdmFsdWVzCiAgICApIGludGVybmFsIHsKICAgICAgICByZXF1aXJlKGZyb20gIT0gYWRkcmVzcygwKSwgImZyb20gPSAwIGFkZHJlc3MiKTsKICAgICAgICByZXF1aXJlKGlkcy5sZW5ndGggPT0gdmFsdWVzLmxlbmd0aCwgImlkcyBsZW5ndGggIT0gdmFsdWVzIGxlbmd0aCIpOwoKICAgICAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBpZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgYmFsYW5jZU9mW2Zyb21dW2lkc1tpXV0gLT0gdmFsdWVzW2ldOwogICAgICAgIH0KCiAgICAgICAgZW1pdCBUcmFuc2ZlckJhdGNoKG1zZy5zZW5kZXIsIGZyb20sIGFkZHJlc3MoMCksIGlkcywgdmFsdWVzKTsKICAgIH0KfQoKY29udHJhY3QgTXlNdWx0aVRva2VuIGlzIEVSQzExNTUgewogICAgZnVuY3Rpb24gbWludCh1aW50MjU2IGlkLCB1aW50MjU2IHZhbHVlLCBieXRlcyBtZW1vcnkgZGF0YSkgZXh0ZXJuYWwgewogICAgICAgIF9taW50KG1zZy5zZW5kZXIsIGlkLCB2YWx1ZSwgZGF0YSk7CiAgICB9CgogICAgZnVuY3Rpb24gYmF0Y2hNaW50KAogICAgICAgIHVpbnQyNTZbXSBjYWxsZGF0YSBpZHMsCiAgICAgICAgdWludDI1NltdIGNhbGxkYXRhIHZhbHVlcywKICAgICAgICBieXRlcyBjYWxsZGF0YSBkYXRhCiAgICApIGV4dGVybmFsIHsKICAgICAgICBfYmF0Y2hNaW50KG1zZy5zZW5kZXIsIGlkcywgdmFsdWVzLCBkYXRhKTsKICAgIH0KCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgaWQsIHVpbnQyNTYgdmFsdWUpIGV4dGVybmFsIHsKICAgICAgICBfYnVybihtc2cuc2VuZGVyLCBpZCwgdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhdGNoQnVybih1aW50MjU2W10gY2FsbGRhdGEgaWRzLCB1aW50MjU2W10gY2FsbGRhdGEgdmFsdWVzKQogICAgICAgIGV4dGVybmFsCiAgICB7CiAgICAgICAgX2JhdGNoQnVybihtc2cuc2VuZGVyLCBpZHMsIHZhbHVlcyk7CiAgICB9Cn0K" target="_blank" title="https://remix.byteatatime.dev/?#code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVApwcmFnbWEgc29saWRpdHkgXjAuOC4yNjsKCmludGVyZmFjZSBJRVJDMTE1NSB7CiAgICBmdW5jdGlvbiBzYWZlVHJhbnNmZXJGcm9tKAogICAgICAgIGFkZHJlc3MgZnJvbSwKICAgICAgICBhZGRyZXNzIHRvLAogICAgICAgIHVpbnQyNTYgaWQsCiAgICAgICAgdWludDI1NiB2YWx1ZSwKICAgICAgICBieXRlcyBjYWxsZGF0YSBkYXRhCiAgICApIGV4dGVybmFsOwogICAgZnVuY3Rpb24gc2FmZUJhdGNoVHJhbnNmZXJGcm9tKAogICAgICAgIGFkZHJlc3MgZnJvbSwKICAgICAgICBhZGRyZXNzIHRvLAogICAgICAgIHVpbnQyNTZbXSBjYWxsZGF0YSBpZHMsCiAgICAgICAgdWludDI1NltdIGNhbGxkYXRhIHZhbHVlcywKICAgICAgICBieXRlcyBjYWxsZGF0YSBkYXRhCiAgICApIGV4dGVybmFsOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3Mgb3duZXIsIHVpbnQyNTYgaWQpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAodWludDI1Nik7CiAgICBmdW5jdGlvbiBiYWxhbmNlT2ZCYXRjaChhZGRyZXNzW10gY2FsbGRhdGEgb3duZXJzLCB1aW50MjU2W10gY2FsbGRhdGEgaWRzKQogICAgICAgIGV4dGVybmFsCiAgICAgICAgdmlldwogICAgICAgIHJldHVybnMgKHVpbnQyNTZbXSBtZW1vcnkpOwogICAgZnVuY3Rpb24gc2V0QXBwcm92YWxGb3JBbGwoYWRkcmVzcyBvcGVyYXRvciwgYm9vbCBhcHByb3ZlZCkgZXh0ZXJuYWw7CiAgICBmdW5jdGlvbiBpc0FwcHJvdmVkRm9yQWxsKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgb3BlcmF0b3IpCiAgICAgICAgZXh0ZXJuYWwKICAgICAgICB2aWV3CiAgICAgICAgcmV0dXJucyAoYm9vbCk7Cn0KCmludGVyZmFjZSBJRVJDMTE1NVRva2VuUmVjZWl2ZXIgewogICAgZnVuY3Rpb24gb25FUkMxMTU1UmVjZWl2ZWQoCiAgICAgICAgYWRkcmVzcyBvcGVyYXRvciwKICAgICAgICBhZGRyZXNzIGZyb20sCiAgICAgICAgdWludDI1NiBpZCwKICAgICAgICB1aW50MjU2IHZhbHVlLAogICAgICAgIGJ5dGVzIGNhbGxkYXRhIGRhdGEKICAgICkgZXh0ZXJuYWwgcmV0dXJucyAoYnl0ZXM0KTsKCiAgICBmdW5jdGlvbiBvbkVSQzExNTVCYXRjaFJlY2VpdmVkKAogICAgICAgIGFkZHJlc3Mgb3BlcmF0b3IsCiAgICAgICAgYWRkcmVzcyBmcm9tLAogICAgICAgIHVpbnQyNTZbXSBjYWxsZGF0YSBpZHMsCiAgICAgICAgdWludDI1NltdIGNhbGxkYXRhIHZhbHVlcywKICAgICAgICBieXRlcyBjYWxsZGF0YSBkYXRhCiAgICApIGV4dGVybmFsIHJldHVybnMgKGJ5dGVzNCk7Cn0KCmNvbnRyYWN0IEVSQzExNTUgaXMgSUVSQzExNTUgewogICAgZXZlbnQgVHJhbnNmZXJTaW5nbGUoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIG9wZXJhdG9yLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBmcm9tLAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCB0bywKICAgICAgICB1aW50MjU2IGlkLAogICAgICAgIHVpbnQyNTYgdmFsdWUKICAgICk7CiAgICBldmVudCBUcmFuc2ZlckJhdGNoKAogICAgICAgIGFkZHJlc3MgaW5kZXhlZCBvcGVyYXRvciwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgZnJvbSwKICAgICAgICBhZGRyZXNzIGluZGV4ZWQgdG8sCiAgICAgICAgdWludDI1NltdIGlkcywKICAgICAgICB1aW50MjU2W10gdmFsdWVzCiAgICApOwogICAgZXZlbnQgQXBwcm92YWxGb3JBbGwoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgb3BlcmF0b3IsIGJvb2wgYXBwcm92ZWQKICAgICk7CiAgICBldmVudCBVUkkoc3RyaW5nIHZhbHVlLCB1aW50MjU2IGluZGV4ZWQgaWQpOwoKICAgIC8vIG93bmVyID0+IGlkID0+IGJhbGFuY2UKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nKHVpbnQyNTYgPT4gdWludDI1NikpIHB1YmxpYyBiYWxhbmNlT2Y7CiAgICAvLyBvd25lciA9PiBvcGVyYXRvciA9PiBhcHByb3ZlZAogICAgbWFwcGluZyhhZGRyZXNzID0+IG1hcHBpbmcoYWRkcmVzcyA9PiBib29sKSkgcHVibGljIGlzQXBwcm92ZWRGb3JBbGw7CgogICAgZnVuY3Rpb24gYmFsYW5jZU9mQmF0Y2goYWRkcmVzc1tdIGNhbGxkYXRhIG93bmVycywgdWludDI1NltdIGNhbGxkYXRhIGlkcykKICAgICAgICBleHRlcm5hbAogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zICh1aW50MjU2W10gbWVtb3J5IGJhbGFuY2VzKQogICAgewogICAgICAgIHJlcXVpcmUob3duZXJzLmxlbmd0aCA9PSBpZHMubGVuZ3RoLCAib3duZXJzIGxlbmd0aCAhPSBpZHMgbGVuZ3RoIik7CgogICAgICAgIGJhbGFuY2VzID0gbmV3IHVpbnQyNTZbXShvd25lcnMubGVuZ3RoKTsKCiAgICAgICAgdW5jaGVja2VkIHsKICAgICAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgb3duZXJzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBiYWxhbmNlc1tpXSA9IGJhbGFuY2VPZltvd25lcnNbaV1dW2lkc1tpXV07CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2V0QXBwcm92YWxGb3JBbGwoYWRkcmVzcyBvcGVyYXRvciwgYm9vbCBhcHByb3ZlZCkgZXh0ZXJuYWwgewogICAgICAgIGlzQXBwcm92ZWRGb3JBbGxbbXNnLnNlbmRlcl1bb3BlcmF0b3JdID0gYXBwcm92ZWQ7CiAgICAgICAgZW1pdCBBcHByb3ZhbEZvckFsbChtc2cuc2VuZGVyLCBvcGVyYXRvciwgYXBwcm92ZWQpOwogICAgfQoKICAgIGZ1bmN0aW9uIHNhZmVUcmFuc2ZlckZyb20oCiAgICAgICAgYWRkcmVzcyBmcm9tLAogICAgICAgIGFkZHJlc3MgdG8sCiAgICAgICAgdWludDI1NiBpZCwKICAgICAgICB1aW50MjU2IHZhbHVlLAogICAgICAgIGJ5dGVzIGNhbGxkYXRhIGRhdGEKICAgICkgZXh0ZXJuYWwgewogICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgIG1zZy5zZW5kZXIgPT0gZnJvbSB8fCBpc0FwcHJvdmVkRm9yQWxsW2Zyb21dW21zZy5zZW5kZXJdLAogICAgICAgICAgICAibm90IGFwcHJvdmVkIgogICAgICAgICk7CiAgICAgICAgcmVxdWlyZSh0byAhPSBhZGRyZXNzKDApLCAidG8gPSAwIGFkZHJlc3MiKTsKCiAgICAgICAgYmFsYW5jZU9mW2Zyb21dW2lkXSAtPSB2YWx1ZTsKICAgICAgICBiYWxhbmNlT2ZbdG9dW2lkXSArPSB2YWx1ZTsKCiAgICAgICAgZW1pdCBUcmFuc2ZlclNpbmdsZShtc2cuc2VuZGVyLCBmcm9tLCB0bywgaWQsIHZhbHVlKTsKCiAgICAgICAgaWYgKHRvLmNvZGUubGVuZ3RoID4gMCkgewogICAgICAgICAgICByZXF1aXJlKAogICAgICAgICAgICAgICAgSUVSQzExNTVUb2tlblJlY2VpdmVyKHRvKS5vbkVSQzExNTVSZWNlaXZlZCgKICAgICAgICAgICAgICAgICAgICBtc2cuc2VuZGVyLCBmcm9tLCBpZCwgdmFsdWUsIGRhdGEKICAgICAgICAgICAgICAgICkgPT0gSUVSQzExNTVUb2tlblJlY2VpdmVyLm9uRVJDMTE1NVJlY2VpdmVkLnNlbGVjdG9yLAogICAgICAgICAgICAgICAgInVuc2FmZSB0cmFuc2ZlciIKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gc2FmZUJhdGNoVHJhbnNmZXJGcm9tKAogICAgICAgIGFkZHJlc3MgZnJvbSwKICAgICAgICBhZGRyZXNzIHRvLAogICAgICAgIHVpbnQyNTZbXSBjYWxsZGF0YSBpZHMsCiAgICAgICAgdWludDI1NltdIGNhbGxkYXRhIHZhbHVlcywKICAgICAgICBieXRlcyBjYWxsZGF0YSBkYXRhCiAgICApIGV4dGVybmFsIHsKICAgICAgICByZXF1aXJlKAogICAgICAgICAgICBtc2cuc2VuZGVyID09IGZyb20gfHwgaXNBcHByb3ZlZEZvckFsbFtmcm9tXVttc2cuc2VuZGVyXSwKICAgICAgICAgICAgIm5vdCBhcHByb3ZlZCIKICAgICAgICApOwogICAgICAgIHJlcXVpcmUodG8gIT0gYWRkcmVzcygwKSwgInRvID0gMCBhZGRyZXNzIik7CiAgICAgICAgcmVxdWlyZShpZHMubGVuZ3RoID09IHZhbHVlcy5sZW5ndGgsICJpZHMgbGVuZ3RoICE9IHZhbHVlcyBsZW5ndGgiKTsKCiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgaWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGJhbGFuY2VPZltmcm9tXVtpZHNbaV1dIC09IHZhbHVlc1tpXTsKICAgICAgICAgICAgYmFsYW5jZU9mW3RvXVtpZHNbaV1dICs9IHZhbHVlc1tpXTsKICAgICAgICB9CgogICAgICAgIGVtaXQgVHJhbnNmZXJCYXRjaChtc2cuc2VuZGVyLCBmcm9tLCB0bywgaWRzLCB2YWx1ZXMpOwoKICAgICAgICBpZiAodG8uY29kZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgICAgICBJRVJDMTE1NVRva2VuUmVjZWl2ZXIodG8pLm9uRVJDMTE1NUJhdGNoUmVjZWl2ZWQoCiAgICAgICAgICAgICAgICAgICAgbXNnLnNlbmRlciwgZnJvbSwgaWRzLCB2YWx1ZXMsIGRhdGEKICAgICAgICAgICAgICAgICkgPT0gSUVSQzExNTVUb2tlblJlY2VpdmVyLm9uRVJDMTE1NUJhdGNoUmVjZWl2ZWQuc2VsZWN0b3IsCiAgICAgICAgICAgICAgICAidW5zYWZlIHRyYW5zZmVyIgogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0KCiAgICAvLyBFUkMxNjUKICAgIGZ1bmN0aW9uIHN1cHBvcnRzSW50ZXJmYWNlKGJ5dGVzNCBpbnRlcmZhY2VJZCkKICAgICAgICBleHRlcm5hbAogICAgICAgIHB1cmUKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHJldHVybiBpbnRlcmZhY2VJZCA9PSAweDAxZmZjOWE3IC8vIEVSQzE2NSBJbnRlcmZhY2UgSUQgZm9yIEVSQzE2NQogICAgICAgICAgICB8fCBpbnRlcmZhY2VJZCA9PSAweGQ5YjY3YTI2IC8vIEVSQzE2NSBJbnRlcmZhY2UgSUQgZm9yIEVSQzExNTUKICAgICAgICAgICAgfHwgaW50ZXJmYWNlSWQgPT0gMHgwZTg5MzQxYzsgLy8gRVJDMTY1IEludGVyZmFjZSBJRCBmb3IgRVJDMTE1NU1ldGFkYXRhVVJJCiAgICB9CgogICAgLy8gRVJDMTE1NSBNZXRhZGF0YSBVUkkKICAgIGZ1bmN0aW9uIHVyaSh1aW50MjU2IGlkKSBwdWJsaWMgdmlldyB2aXJ0dWFsIHJldHVybnMgKHN0cmluZyBtZW1vcnkpIHt9CgogICAgLy8gSW50ZXJuYWwgZnVuY3Rpb25zCiAgICBmdW5jdGlvbiBfbWludChhZGRyZXNzIHRvLCB1aW50MjU2IGlkLCB1aW50MjU2IHZhbHVlLCBieXRlcyBtZW1vcnkgZGF0YSkKICAgICAgICBpbnRlcm5hbAogICAgewogICAgICAgIHJlcXVpcmUodG8gIT0gYWRkcmVzcygwKSwgInRvID0gMCBhZGRyZXNzIik7CgogICAgICAgIGJhbGFuY2VPZlt0b11baWRdICs9IHZhbHVlOwoKICAgICAgICBlbWl0IFRyYW5zZmVyU2luZ2xlKG1zZy5zZW5kZXIsIGFkZHJlc3MoMCksIHRvLCBpZCwgdmFsdWUpOwoKICAgICAgICBpZiAodG8uY29kZS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgICAgICBJRVJDMTE1NVRva2VuUmVjZWl2ZXIodG8pLm9uRVJDMTE1NVJlY2VpdmVkKAogICAgICAgICAgICAgICAgICAgIG1zZy5zZW5kZXIsIGFkZHJlc3MoMCksIGlkLCB2YWx1ZSwgZGF0YQogICAgICAgICAgICAgICAgKSA9PSBJRVJDMTE1NVRva2VuUmVjZWl2ZXIub25FUkMxMTU1UmVjZWl2ZWQuc2VsZWN0b3IsCiAgICAgICAgICAgICAgICAidW5zYWZlIHRyYW5zZmVyIgogICAgICAgICAgICApOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBfYmF0Y2hNaW50KAogICAgICAgIGFkZHJlc3MgdG8sCiAgICAgICAgdWludDI1NltdIGNhbGxkYXRhIGlkcywKICAgICAgICB1aW50MjU2W10gY2FsbGRhdGEgdmFsdWVzLAogICAgICAgIGJ5dGVzIGNhbGxkYXRhIGRhdGEKICAgICkgaW50ZXJuYWwgewogICAgICAgIHJlcXVpcmUodG8gIT0gYWRkcmVzcygwKSwgInRvID0gMCBhZGRyZXNzIik7CiAgICAgICAgcmVxdWlyZShpZHMubGVuZ3RoID09IHZhbHVlcy5sZW5ndGgsICJpZHMgbGVuZ3RoICE9IHZhbHVlcyBsZW5ndGgiKTsKCiAgICAgICAgZm9yICh1aW50MjU2IGkgPSAwOyBpIDwgaWRzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGJhbGFuY2VPZlt0b11baWRzW2ldXSArPSB2YWx1ZXNbaV07CiAgICAgICAgfQoKICAgICAgICBlbWl0IFRyYW5zZmVyQmF0Y2gobXNnLnNlbmRlciwgYWRkcmVzcygwKSwgdG8sIGlkcywgdmFsdWVzKTsKCiAgICAgICAgaWYgKHRvLmNvZGUubGVuZ3RoID4gMCkgewogICAgICAgICAgICByZXF1aXJlKAogICAgICAgICAgICAgICAgSUVSQzExNTVUb2tlblJlY2VpdmVyKHRvKS5vbkVSQzExNTVCYXRjaFJlY2VpdmVkKAogICAgICAgICAgICAgICAgICAgIG1zZy5zZW5kZXIsIGFkZHJlc3MoMCksIGlkcywgdmFsdWVzLCBkYXRhCiAgICAgICAgICAgICAgICApID09IElFUkMxMTU1VG9rZW5SZWNlaXZlci5vbkVSQzExNTVCYXRjaFJlY2VpdmVkLnNlbGVjdG9yLAogICAgICAgICAgICAgICAgInVuc2FmZSB0cmFuc2ZlciIKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gX2J1cm4oYWRkcmVzcyBmcm9tLCB1aW50MjU2IGlkLCB1aW50MjU2IHZhbHVlKSBpbnRlcm5hbCB7CiAgICAgICAgcmVxdWlyZShmcm9tICE9IGFkZHJlc3MoMCksICJmcm9tID0gMCBhZGRyZXNzIik7CiAgICAgICAgYmFsYW5jZU9mW2Zyb21dW2lkXSAtPSB2YWx1ZTsKICAgICAgICBlbWl0IFRyYW5zZmVyU2luZ2xlKG1zZy5zZW5kZXIsIGZyb20sIGFkZHJlc3MoMCksIGlkLCB2YWx1ZSk7CiAgICB9CgogICAgZnVuY3Rpb24gX2JhdGNoQnVybigKICAgICAgICBhZGRyZXNzIGZyb20sCiAgICAgICAgdWludDI1NltdIGNhbGxkYXRhIGlkcywKICAgICAgICB1aW50MjU2W10gY2FsbGRhdGEgdmFsdWVzCiAgICApIGludGVybmFsIHsKICAgICAgICByZXF1aXJlKGZyb20gIT0gYWRkcmVzcygwKSwgImZyb20gPSAwIGFkZHJlc3MiKTsKICAgICAgICByZXF1aXJlKGlkcy5sZW5ndGggPT0gdmFsdWVzLmxlbmd0aCwgImlkcyBsZW5ndGggIT0gdmFsdWVzIGxlbmd0aCIpOwoKICAgICAgICBmb3IgKHVpbnQyNTYgaSA9IDA7IGkgPCBpZHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgYmFsYW5jZU9mW2Zyb21dW2lkc1tpXV0gLT0gdmFsdWVzW2ldOwogICAgICAgIH0KCiAgICAgICAgZW1pdCBUcmFuc2ZlckJhdGNoKG1zZy5zZW5kZXIsIGZyb20sIGFkZHJlc3MoMCksIGlkcywgdmFsdWVzKTsKICAgIH0KfQoKY29udHJhY3QgTXlNdWx0aVRva2VuIGlzIEVSQzExNTUgewogICAgZnVuY3Rpb24gbWludCh1aW50MjU2IGlkLCB1aW50MjU2IHZhbHVlLCBieXRlcyBtZW1vcnkgZGF0YSkgZXh0ZXJuYWwgewogICAgICAgIF9taW50KG1zZy5zZW5kZXIsIGlkLCB2YWx1ZSwgZGF0YSk7CiAgICB9CgogICAgZnVuY3Rpb24gYmF0Y2hNaW50KAogICAgICAgIHVpbnQyNTZbXSBjYWxsZGF0YSBpZHMsCiAgICAgICAgdWludDI1NltdIGNhbGxkYXRhIHZhbHVlcywKICAgICAgICBieXRlcyBjYWxsZGF0YSBkYXRhCiAgICApIGV4dGVybmFsIHsKICAgICAgICBfYmF0Y2hNaW50KG1zZy5zZW5kZXIsIGlkcywgdmFsdWVzLCBkYXRhKTsKICAgIH0KCiAgICBmdW5jdGlvbiBidXJuKHVpbnQyNTYgaWQsIHVpbnQyNTYgdmFsdWUpIGV4dGVybmFsIHsKICAgICAgICBfYnVybihtc2cuc2VuZGVyLCBpZCwgdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGJhdGNoQnVybih1aW50MjU2W10gY2FsbGRhdGEgaWRzLCB1aW50MjU2W10gY2FsbGRhdGEgdmFsdWVzKQogICAgICAgIGV4dGVybmFsCiAgICB7CiAgICAgICAgX2JhdGNoQnVybihtc2cuc2VuZGVyLCBpZHMsIHZhbHVlcyk7CiAgICB9Cn0K" ref="nofollow noopener noreferrer">ERC1155.solERC1155.sol</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[3åˆ†é’ŸSolidity: 9.1 gaslessä»£å¸è½¬è´¦]]></title>    <link>https://juejin.cn/post/7589828902158827570</link>    <guid>https://juejin.cn/post/7589828902158827570</guid>    <pubDate>2025-12-31T16:29:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589828902158827570" data-draft-id="7589835342145912842" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="3åˆ†é’ŸSolidity: 9.1 gaslessä»£å¸è½¬è´¦"/> <meta itemprop="keywords" content="Solidity,web3,æ™ºèƒ½åˆçº¦"/> <meta itemprop="datePublished" content="2025-12-31T16:29:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Rockbean"/> <meta itemprop="url" content="https://juejin.cn/user/4054654615823560"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            3åˆ†é’ŸSolidity: 9.1 gaslessä»£å¸è½¬è´¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4054654615823560/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Rockbean
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-31T16:29:19.000Z" title="Wed Dec 31 2025 16:29:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ¬¢è¿è®¢é˜…ä¸“æ </strong>ï¼š<a href="https://juejin.cn/column/7578762210285977663" title="https://juejin.cn/column/7578762210285977663" target="_blank">3åˆ†é’ŸSolidity--æ™ºèƒ½åˆçº¦--Web3åŒºå—é“¾æŠ€æœ¯å¿…å­¦</a></p>
<p>å¦‚éœ€è·å–æœ¬å†…å®¹çš„æœ€æ–°ç‰ˆæœ¬ï¼Œè¯·å‚è§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cyfrin.io%2Fglossary%2Fgasless-token-transfer-solidity-code-example" target="_blank" title="https://www.cyfrin.io/glossary/gasless-token-transfer-solidity-code-example" ref="nofollow noopener noreferrer">Cyfrin.io ä¸Šçš„â€œgaslessä»£å¸è½¬è´¦ï¼ˆä»£ç ç¤ºä¾‹ï¼‰â€</a></p>
<p>GaslessÂ ä»£å¸è½¬è´¦æ˜¯æŒ‡åœ¨åŒºå—é“¾äº¤æ˜“ä¸­ï¼Œç”¨æˆ·æ— éœ€æ”¯ä»˜ä»»ä½•Â gasÂ è´¹ç”¨å³å¯å®Œæˆä»£å¸è½¬è´¦ã€‚è¿™ç§è®¾è®¡æ—¨åœ¨æå‡ç”¨æˆ·ä½“éªŒï¼Œé™ä½è¿›å…¥é—¨æ§›ï¼Œå°¤å…¶åœ¨Â DeFiã€NFTÂ å’Œç¤¾äº¤åº”ç”¨ä¸­åº”ç”¨å¹¿æ³›ã€‚</p>
<p>ä½¿ç”¨å…ƒäº¤æ˜“å®ç°æ— éœ€ Gas çš„ ERC20 ä»£å¸è½¬è´¦</p>
<pre><code class="hljs language-solidity" lang="solidity">// SPDX-License-Identifier: MIT
pragma solidity ^0.8.26;

interface IERC20Permit {
    function totalSupply() external view returns (uint256);
    function balanceOf(address account) external view returns (uint256);
    function transfer(address recipient, uint256 amount)
        external
        returns (bool);
    function allowance(address owner, address spender)
        external
        view
        returns (uint256);
    function approve(address spender, uint256 amount) external returns (bool);
    function transferFrom(address sender, address recipient, uint256 amount)
        external
        returns (bool);
    function permit(
        address owner,
        address spender,
        uint256 value,
        uint256 deadline,
        uint8 v,
        bytes32 r,
        bytes32 s
    ) external;
}

contract GaslessTokenTransfer {
    function send(
        address token,
        address sender,
        address receiver,
        uint256 amount,
        uint256 fee,
        uint256 deadline,
        // Permit signature
        uint8 v,
        bytes32 r,
        bytes32 s
    ) external {
        // Permit
        IERC20Permit(token).permit(
            sender, address(this), amount + fee, deadline, v, r, s
        );
        // Send amount to receiver
        IERC20Permit(token).transferFrom(sender, receiver, amount);
        // Take fee - send fee to msg.sender
        IERC20Permit(token).transferFrom(sender, msg.sender, fee);
    }
}
</code></pre>
<p>ç¤ºä¾‹Â <code>ERC20</code>å®ç°äº†ä» solmate å¤åˆ¶çš„Â <code>permit</code>åŠŸèƒ½</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// SPDX-License-Identifier: AGPL-3.0-only</span>
pragma solidity &gt;=<span class="hljs-number">0.8</span><span class="hljs-selector-class">.0</span>;

<span class="hljs-comment">/// @notice Modern and gas efficient ERC20 + EIP-2612 implementation.</span>
<span class="hljs-comment">/// @author Solmate (https://github.com/transmissions11/solmate/blob/main/src/tokens/ERC20.sol)</span>
<span class="hljs-comment">/// @author Modified from Uniswap (https://github.com/Uniswap/uniswap-v2-core/blob/master/contracts/UniswapV2ERC20.sol)</span>
<span class="hljs-comment">/// @dev Do not manually set balances without updating totalSupply, as the sum of all user balances must not exceed it.</span>
abstract contract ERC20 {
    event <span class="hljs-built_in">Transfer</span>(address indexed from, address indexed to, uint256 amount);
    event <span class="hljs-built_in">Approval</span>(
        address indexed owner, address indexed spender, uint256 amount
    );

    string public name;
    string public symbol;
    uint8 public immutable decimals;
    uint256 public totalSupply;
    <span class="hljs-built_in">mapping</span>(address =&gt; uint256) public balanceOf;
    <span class="hljs-built_in">mapping</span>(address =&gt; mapping(address =&gt; uint256)) public allowance;
    uint256 internal immutable INITIAL_CHAIN_ID;
    bytes32 internal immutable INITIAL_DOMAIN_SEPARATOR;
    <span class="hljs-built_in">mapping</span>(address =&gt; uint256) public nonces;

    <span class="hljs-built_in">constructor</span>(string memory _name, string memory _symbol, uint8 _decimals) {
        name = _name;
        symbol = _symbol;
        decimals = _decimals;
        INITIAL_CHAIN_ID = block<span class="hljs-selector-class">.chainid</span>;
        INITIAL_DOMAIN_SEPARATOR = <span class="hljs-built_in">computeDomainSeparator</span>();
    }

    function <span class="hljs-built_in">approve</span>(address spender, uint256 amount)
        public
        virtual
        returns (bool)
    {
        allowance<span class="hljs-selector-attr">[msg.sender]</span><span class="hljs-selector-attr">[spender]</span> = amount;
        emit <span class="hljs-built_in">Approval</span>(msg.sender, spender, amount);
        return true;
    }

    function <span class="hljs-built_in">transfer</span>(address to, uint256 amount)
        public
        virtual
        returns (bool)
    {
        balanceOf<span class="hljs-selector-attr">[msg.sender]</span> -= amount;

        unchecked {
            balanceOf<span class="hljs-selector-attr">[to]</span> += amount;
        }

        emit <span class="hljs-built_in">Transfer</span>(msg.sender, to, amount);
        return true;
    }

    function <span class="hljs-built_in">transferFrom</span>(address from, address to, uint256 amount)
        public
        virtual
        returns (bool)
    {
        uint256 allowed = allowance<span class="hljs-selector-attr">[from]</span><span class="hljs-selector-attr">[msg.sender]</span>; <span class="hljs-comment">// Saves gas for limited approvals.</span>
        if (allowed != type(uint256)<span class="hljs-selector-class">.max</span>) {
            allowance<span class="hljs-selector-attr">[from]</span><span class="hljs-selector-attr">[msg.sender]</span> = allowed - amount;
        }
        balanceOf<span class="hljs-selector-attr">[from]</span> -= amount;

        unchecked {
            balanceOf<span class="hljs-selector-attr">[to]</span> += amount;
        }

        emit <span class="hljs-built_in">Transfer</span>(from, to, amount);
        return true;
    }

    function <span class="hljs-built_in">permit</span>(
        address owner,
        address spender,
        uint256 value,
        uint256 deadline,
        uint8 v,
        bytes32 r,
        bytes32 s
    ) public virtual {
        <span class="hljs-built_in">require</span>(deadline &gt;= block.timestamp, "PERMIT_DEADLINE_EXPIRED");

        unchecked {
            <span class="hljs-selector-tag">address</span> recoveredAddress = <span class="hljs-built_in">ecrecover</span>(
                keccak256(
                    abi.encodePacked(
                        "\x19\x01",
                        DOMAIN_SEPARATOR(),
                        <span class="hljs-built_in">keccak256</span>(
                            abi.encode(
                                keccak256(
                                    "Permit(address owner,address spender,uint256 value,uint256 nonce,uint256 deadline)"
                                ),
                                owner,
                                spender,
                                value,
                                nonces<span class="hljs-selector-attr">[owner]</span>++,
                                deadline
                            )
                        )
                    )
                ),
                v,
                r,
                s
            );

            <span class="hljs-built_in">require</span>(
                recoveredAddress != address(<span class="hljs-number">0</span>) &amp;&amp; recoveredAddress == owner,
                "INVALID_SIGNER"
            );

            allowance<span class="hljs-selector-attr">[recoveredAddress]</span><span class="hljs-selector-attr">[spender]</span> = value;
        }

        emit <span class="hljs-built_in">Approval</span>(owner, spender, value);
    }

    function <span class="hljs-built_in">DOMAIN_SEPARATOR</span>() public view virtual returns (bytes32) {
        return block<span class="hljs-selector-class">.chainid</span> == INITIAL_CHAIN_ID
            ? INITIAL_DOMAIN_SEPARATOR
            : <span class="hljs-built_in">computeDomainSeparator</span>();
    }

    function <span class="hljs-built_in">computeDomainSeparator</span>() internal view virtual returns (bytes32) {
        return <span class="hljs-built_in">keccak256</span>(
            abi.encode(
                keccak256(
                    "EIP712Domain(string name,string version,uint256 chainId,address verifyingContract)"
                ),
                <span class="hljs-built_in">keccak256</span>(bytes(name)),
                <span class="hljs-built_in">keccak256</span>("<span class="hljs-number">1</span>"),
                block<span class="hljs-selector-class">.chainid</span>,
                <span class="hljs-selector-tag">address</span>(this)
            )
        );
    }

    function <span class="hljs-built_in">_mint</span>(address to, uint256 amount) internal virtual {
        totalSupply += amount;

        unchecked {
            balanceOf<span class="hljs-selector-attr">[to]</span> += amount;
        }

        emit <span class="hljs-built_in">Transfer</span>(address(<span class="hljs-number">0</span>), to, amount);
    }

    function <span class="hljs-built_in">_burn</span>(address from, uint256 amount) internal virtual {
        balanceOf<span class="hljs-selector-attr">[from]</span> -= amount;

        unchecked {
            totalSupply -= amount;
        }

        emit <span class="hljs-built_in">Transfer</span>(from, address(<span class="hljs-number">0</span>), amount);
    }
}

contract ERC20Permit is ERC20 {
    <span class="hljs-built_in">constructor</span>(string memory _name, string memory _symbol, uint8 _decimals)
        <span class="hljs-built_in">ERC20</span>(_name, _symbol, _decimals)
    {}

    function <span class="hljs-built_in">mint</span>(address to, uint256 amount) public {
        <span class="hljs-built_in">_mint</span>(to, amount);
    }
}
</code></pre>
<p>Remix Lite å°è¯•ä¸€ä¸‹</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fremix.byteatatime.dev%2F%3F%23code%3DLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFHUEwtMy4wLW9ubHkKcHJhZ21hIHNvbGlkaXR5ID49MC44LjA7CgovLy8gQG5vdGljZSBNb2Rlcm4gYW5kIGdhcyBlZmZpY2llbnQgRVJDMjAgKyBFSVAtMjYxMiBpbXBsZW1lbnRhdGlvbi4KLy8vIEBhdXRob3IgU29sbWF0ZSAoaHR0cHM6Ly9naXRodWIuY29tL3RyYW5zbWlzc2lvbnMxMS9zb2xtYXRlL2Jsb2IvbWFpbi9zcmMvdG9rZW5zL0VSQzIwLnNvbCkKLy8vIEBhdXRob3IgTW9kaWZpZWQgZnJvbSBVbmlzd2FwIChodHRwczovL2dpdGh1Yi5jb20vVW5pc3dhcC91bmlzd2FwLXYyLWNvcmUvYmxvYi9tYXN0ZXIvY29udHJhY3RzL1VuaXN3YXBWMkVSQzIwLnNvbCkKLy8vIEBkZXYgRG8gbm90IG1hbnVhbGx5IHNldCBiYWxhbmNlcyB3aXRob3V0IHVwZGF0aW5nIHRvdGFsU3VwcGx5LCBhcyB0aGUgc3VtIG9mIGFsbCB1c2VyIGJhbGFuY2VzIG11c3Qgbm90IGV4Y2VlZCBpdC4KYWJzdHJhY3QgY29udHJhY3QgRVJDMjAgewogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogICAgZXZlbnQgQXBwcm92YWwoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiBhbW91bnQKICAgICk7CgogICAgc3RyaW5nIHB1YmxpYyBuYW1lOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CiAgICB1aW50OCBwdWJsaWMgaW1tdXRhYmxlIGRlY2ltYWxzOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VPZjsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikpIHB1YmxpYyBhbGxvd2FuY2U7CiAgICB1aW50MjU2IGludGVybmFsIGltbXV0YWJsZSBJTklUSUFMX0NIQUlOX0lEOwogICAgYnl0ZXMzMiBpbnRlcm5hbCBpbW11dGFibGUgSU5JVElBTF9ET01BSU5fU0VQQVJBVE9SOwogICAgbWFwcGluZyhhZGRyZXNzID0%2BIHVpbnQyNTYpIHB1YmxpYyBub25jZXM7CgogICAgY29uc3RydWN0b3Ioc3RyaW5nIG1lbW9yeSBfbmFtZSwgc3RyaW5nIG1lbW9yeSBfc3ltYm9sLCB1aW50OCBfZGVjaW1hbHMpIHsKICAgICAgICBuYW1lID0gX25hbWU7CiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsKICAgICAgICBkZWNpbWFscyA9IF9kZWNpbWFsczsKICAgICAgICBJTklUSUFMX0NIQUlOX0lEID0gYmxvY2suY2hhaW5pZDsKICAgICAgICBJTklUSUFMX0RPTUFJTl9TRVBBUkFUT1IgPSBjb21wdXRlRG9tYWluU2VwYXJhdG9yKCk7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIHZpcnR1YWwKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtzcGVuZGVyXSA9IGFtb3VudDsKICAgICAgICBlbWl0IEFwcHJvdmFsKG1zZy5zZW5kZXIsIHNwZW5kZXIsIGFtb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiBhbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgdmlydHVhbAogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdIC09IGFtb3VudDsKCiAgICAgICAgdW5jaGVja2VkIHsKICAgICAgICAgICAgYmFsYW5jZU9mW3RvXSArPSBhbW91bnQ7CiAgICAgICAgfQoKICAgICAgICBlbWl0IFRyYW5zZmVyKG1zZy5zZW5kZXIsIHRvLCBhbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIHZpcnR1YWwKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHVpbnQyNTYgYWxsb3dlZCA9IGFsbG93YW5jZVtmcm9tXVttc2cuc2VuZGVyXTsgLy8gU2F2ZXMgZ2FzIGZvciBsaW1pdGVkIGFwcHJvdmFscy4KICAgICAgICBpZiAoYWxsb3dlZCAhPSB0eXBlKHVpbnQyNTYpLm1heCkgewogICAgICAgICAgICBhbGxvd2FuY2VbZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkIC0gYW1vdW50OwogICAgICAgIH0KICAgICAgICBiYWxhbmNlT2ZbZnJvbV0gLT0gYW1vdW50OwoKICAgICAgICB1bmNoZWNrZWQgewogICAgICAgICAgICBiYWxhbmNlT2ZbdG9dICs9IGFtb3VudDsKICAgICAgICB9CgogICAgICAgIGVtaXQgVHJhbnNmZXIoZnJvbSwgdG8sIGFtb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gcGVybWl0KAogICAgICAgIGFkZHJlc3Mgb3duZXIsCiAgICAgICAgYWRkcmVzcyBzcGVuZGVyLAogICAgICAgIHVpbnQyNTYgdmFsdWUsCiAgICAgICAgdWludDI1NiBkZWFkbGluZSwKICAgICAgICB1aW50OCB2LAogICAgICAgIGJ5dGVzMzIgciwKICAgICAgICBieXRlczMyIHMKICAgICkgcHVibGljIHZpcnR1YWwgewogICAgICAgIHJlcXVpcmUoZGVhZGxpbmUgPj0gYmxvY2sudGltZXN0YW1wLCAiUEVSTUlUX0RFQURMSU5FX0VYUElSRUQiKTsKCiAgICAgICAgdW5jaGVja2VkIHsKICAgICAgICAgICAgYWRkcmVzcyByZWNvdmVyZWRBZGRyZXNzID0gZWNyZWNvdmVyKAogICAgICAgICAgICAgICAga2VjY2FrMjU2KAogICAgICAgICAgICAgICAgICAgIGFiaS5lbmNvZGVQYWNrZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICJceDE5XHgwMSIsCiAgICAgICAgICAgICAgICAgICAgICAgIERPTUFJTl9TRVBBUkFUT1IoKSwKICAgICAgICAgICAgICAgICAgICAgICAga2VjY2FrMjU2KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJpLmVuY29kZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZWNjYWsyNTYoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQZXJtaXQoYWRkcmVzcyBvd25lcixhZGRyZXNzIHNwZW5kZXIsdWludDI1NiB2YWx1ZSx1aW50MjU2IG5vbmNlLHVpbnQyNTYgZGVhZGxpbmUpIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3duZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlbmRlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25jZXNbb3duZXJdKyssCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhZGxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB2LAogICAgICAgICAgICAgICAgciwKICAgICAgICAgICAgICAgIHMKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgICAgICByZWNvdmVyZWRBZGRyZXNzICE9IGFkZHJlc3MoMCkgJiYgcmVjb3ZlcmVkQWRkcmVzcyA9PSBvd25lciwKICAgICAgICAgICAgICAgICJJTlZBTElEX1NJR05FUiIKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIGFsbG93YW5jZVtyZWNvdmVyZWRBZGRyZXNzXVtzcGVuZGVyXSA9IHZhbHVlOwogICAgICAgIH0KCiAgICAgICAgZW1pdCBBcHByb3ZhbChvd25lciwgc3BlbmRlciwgdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIERPTUFJTl9TRVBBUkFUT1IoKSBwdWJsaWMgdmlldyB2aXJ0dWFsIHJldHVybnMgKGJ5dGVzMzIpIHsKICAgICAgICByZXR1cm4gYmxvY2suY2hhaW5pZCA9PSBJTklUSUFMX0NIQUlOX0lECiAgICAgICAgICAgID8gSU5JVElBTF9ET01BSU5fU0VQQVJBVE9SCiAgICAgICAgICAgIDogY29tcHV0ZURvbWFpblNlcGFyYXRvcigpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvbXB1dGVEb21haW5TZXBhcmF0b3IoKSBpbnRlcm5hbCB2aWV3IHZpcnR1YWwgcmV0dXJucyAoYnl0ZXMzMikgewogICAgICAgIHJldHVybiBrZWNjYWsyNTYoCiAgICAgICAgICAgIGFiaS5lbmNvZGUoCiAgICAgICAgICAgICAgICBrZWNjYWsyNTYoCiAgICAgICAgICAgICAgICAgICAgIkVJUDcxMkRvbWFpbihzdHJpbmcgbmFtZSxzdHJpbmcgdmVyc2lvbix1aW50MjU2IGNoYWluSWQsYWRkcmVzcyB2ZXJpZnlpbmdDb250cmFjdCkiCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAga2VjY2FrMjU2KGJ5dGVzKG5hbWUpKSwKICAgICAgICAgICAgICAgIGtlY2NhazI1NigiMSIpLAogICAgICAgICAgICAgICAgYmxvY2suY2hhaW5pZCwKICAgICAgICAgICAgICAgIGFkZHJlc3ModGhpcykKICAgICAgICAgICAgKQogICAgICAgICk7CiAgICB9CgogICAgZnVuY3Rpb24gX21pbnQoYWRkcmVzcyB0bywgdWludDI1NiBhbW91bnQpIGludGVybmFsIHZpcnR1YWwgewogICAgICAgIHRvdGFsU3VwcGx5ICs9IGFtb3VudDsKCiAgICAgICAgdW5jaGVja2VkIHsKICAgICAgICAgICAgYmFsYW5jZU9mW3RvXSArPSBhbW91bnQ7CiAgICAgICAgfQoKICAgICAgICBlbWl0IFRyYW5zZmVyKGFkZHJlc3MoMCksIHRvLCBhbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIF9idXJuKGFkZHJlc3MgZnJvbSwgdWludDI1NiBhbW91bnQpIGludGVybmFsIHZpcnR1YWwgewogICAgICAgIGJhbGFuY2VPZltmcm9tXSAtPSBhbW91bnQ7CgogICAgICAgIHVuY2hlY2tlZCB7CiAgICAgICAgICAgIHRvdGFsU3VwcGx5IC09IGFtb3VudDsKICAgICAgICB9CgogICAgICAgIGVtaXQgVHJhbnNmZXIoZnJvbSwgYWRkcmVzcygwKSwgYW1vdW50KTsKICAgIH0KfQoKY29udHJhY3QgRVJDMjBQZXJtaXQgaXMgRVJDMjAgewogICAgY29uc3RydWN0b3Ioc3RyaW5nIG1lbW9yeSBfbmFtZSwgc3RyaW5nIG1lbW9yeSBfc3ltYm9sLCB1aW50OCBfZGVjaW1hbHMpCiAgICAgICAgRVJDMjAoX25hbWUsIF9zeW1ib2wsIF9kZWNpbWFscykKICAgIHt9CgogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIHRvLCB1aW50MjU2IGFtb3VudCkgcHVibGljIHsKICAgICAgICBfbWludCh0bywgYW1vdW50KTsKICAgIH0KfQo%3D" target="_blank" title="https://remix.byteatatime.dev/?#code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEFHUEwtMy4wLW9ubHkKcHJhZ21hIHNvbGlkaXR5ID49MC44LjA7CgovLy8gQG5vdGljZSBNb2Rlcm4gYW5kIGdhcyBlZmZpY2llbnQgRVJDMjAgKyBFSVAtMjYxMiBpbXBsZW1lbnRhdGlvbi4KLy8vIEBhdXRob3IgU29sbWF0ZSAoaHR0cHM6Ly9naXRodWIuY29tL3RyYW5zbWlzc2lvbnMxMS9zb2xtYXRlL2Jsb2IvbWFpbi9zcmMvdG9rZW5zL0VSQzIwLnNvbCkKLy8vIEBhdXRob3IgTW9kaWZpZWQgZnJvbSBVbmlzd2FwIChodHRwczovL2dpdGh1Yi5jb20vVW5pc3dhcC91bmlzd2FwLXYyLWNvcmUvYmxvYi9tYXN0ZXIvY29udHJhY3RzL1VuaXN3YXBWMkVSQzIwLnNvbCkKLy8vIEBkZXYgRG8gbm90IG1hbnVhbGx5IHNldCBiYWxhbmNlcyB3aXRob3V0IHVwZGF0aW5nIHRvdGFsU3VwcGx5LCBhcyB0aGUgc3VtIG9mIGFsbCB1c2VyIGJhbGFuY2VzIG11c3Qgbm90IGV4Y2VlZCBpdC4KYWJzdHJhY3QgY29udHJhY3QgRVJDMjAgewogICAgZXZlbnQgVHJhbnNmZXIoYWRkcmVzcyBpbmRleGVkIGZyb20sIGFkZHJlc3MgaW5kZXhlZCB0bywgdWludDI1NiBhbW91bnQpOwogICAgZXZlbnQgQXBwcm92YWwoCiAgICAgICAgYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiBhbW91bnQKICAgICk7CgogICAgc3RyaW5nIHB1YmxpYyBuYW1lOwogICAgc3RyaW5nIHB1YmxpYyBzeW1ib2w7CiAgICB1aW50OCBwdWJsaWMgaW1tdXRhYmxlIGRlY2ltYWxzOwogICAgdWludDI1NiBwdWJsaWMgdG90YWxTdXBwbHk7CiAgICBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikgcHVibGljIGJhbGFuY2VPZjsKICAgIG1hcHBpbmcoYWRkcmVzcyA9PiBtYXBwaW5nKGFkZHJlc3MgPT4gdWludDI1NikpIHB1YmxpYyBhbGxvd2FuY2U7CiAgICB1aW50MjU2IGludGVybmFsIGltbXV0YWJsZSBJTklUSUFMX0NIQUlOX0lEOwogICAgYnl0ZXMzMiBpbnRlcm5hbCBpbW11dGFibGUgSU5JVElBTF9ET01BSU5fU0VQQVJBVE9SOwogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQyNTYpIHB1YmxpYyBub25jZXM7CgogICAgY29uc3RydWN0b3Ioc3RyaW5nIG1lbW9yeSBfbmFtZSwgc3RyaW5nIG1lbW9yeSBfc3ltYm9sLCB1aW50OCBfZGVjaW1hbHMpIHsKICAgICAgICBuYW1lID0gX25hbWU7CiAgICAgICAgc3ltYm9sID0gX3N5bWJvbDsKICAgICAgICBkZWNpbWFscyA9IF9kZWNpbWFsczsKICAgICAgICBJTklUSUFMX0NIQUlOX0lEID0gYmxvY2suY2hhaW5pZDsKICAgICAgICBJTklUSUFMX0RPTUFJTl9TRVBBUkFUT1IgPSBjb21wdXRlRG9tYWluU2VwYXJhdG9yKCk7CiAgICB9CgogICAgZnVuY3Rpb24gYXBwcm92ZShhZGRyZXNzIHNwZW5kZXIsIHVpbnQyNTYgYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIHZpcnR1YWwKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIGFsbG93YW5jZVttc2cuc2VuZGVyXVtzcGVuZGVyXSA9IGFtb3VudDsKICAgICAgICBlbWl0IEFwcHJvdmFsKG1zZy5zZW5kZXIsIHNwZW5kZXIsIGFtb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXIoYWRkcmVzcyB0bywgdWludDI1NiBhbW91bnQpCiAgICAgICAgcHVibGljCiAgICAgICAgdmlydHVhbAogICAgICAgIHJldHVybnMgKGJvb2wpCiAgICB7CiAgICAgICAgYmFsYW5jZU9mW21zZy5zZW5kZXJdIC09IGFtb3VudDsKCiAgICAgICAgdW5jaGVja2VkIHsKICAgICAgICAgICAgYmFsYW5jZU9mW3RvXSArPSBhbW91bnQ7CiAgICAgICAgfQoKICAgICAgICBlbWl0IFRyYW5zZmVyKG1zZy5zZW5kZXIsIHRvLCBhbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIHRyYW5zZmVyRnJvbShhZGRyZXNzIGZyb20sIGFkZHJlc3MgdG8sIHVpbnQyNTYgYW1vdW50KQogICAgICAgIHB1YmxpYwogICAgICAgIHZpcnR1YWwKICAgICAgICByZXR1cm5zIChib29sKQogICAgewogICAgICAgIHVpbnQyNTYgYWxsb3dlZCA9IGFsbG93YW5jZVtmcm9tXVttc2cuc2VuZGVyXTsgLy8gU2F2ZXMgZ2FzIGZvciBsaW1pdGVkIGFwcHJvdmFscy4KICAgICAgICBpZiAoYWxsb3dlZCAhPSB0eXBlKHVpbnQyNTYpLm1heCkgewogICAgICAgICAgICBhbGxvd2FuY2VbZnJvbV1bbXNnLnNlbmRlcl0gPSBhbGxvd2VkIC0gYW1vdW50OwogICAgICAgIH0KICAgICAgICBiYWxhbmNlT2ZbZnJvbV0gLT0gYW1vdW50OwoKICAgICAgICB1bmNoZWNrZWQgewogICAgICAgICAgICBiYWxhbmNlT2ZbdG9dICs9IGFtb3VudDsKICAgICAgICB9CgogICAgICAgIGVtaXQgVHJhbnNmZXIoZnJvbSwgdG8sIGFtb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gcGVybWl0KAogICAgICAgIGFkZHJlc3Mgb3duZXIsCiAgICAgICAgYWRkcmVzcyBzcGVuZGVyLAogICAgICAgIHVpbnQyNTYgdmFsdWUsCiAgICAgICAgdWludDI1NiBkZWFkbGluZSwKICAgICAgICB1aW50OCB2LAogICAgICAgIGJ5dGVzMzIgciwKICAgICAgICBieXRlczMyIHMKICAgICkgcHVibGljIHZpcnR1YWwgewogICAgICAgIHJlcXVpcmUoZGVhZGxpbmUgPj0gYmxvY2sudGltZXN0YW1wLCAiUEVSTUlUX0RFQURMSU5FX0VYUElSRUQiKTsKCiAgICAgICAgdW5jaGVja2VkIHsKICAgICAgICAgICAgYWRkcmVzcyByZWNvdmVyZWRBZGRyZXNzID0gZWNyZWNvdmVyKAogICAgICAgICAgICAgICAga2VjY2FrMjU2KAogICAgICAgICAgICAgICAgICAgIGFiaS5lbmNvZGVQYWNrZWQoCiAgICAgICAgICAgICAgICAgICAgICAgICJceDE5XHgwMSIsCiAgICAgICAgICAgICAgICAgICAgICAgIERPTUFJTl9TRVBBUkFUT1IoKSwKICAgICAgICAgICAgICAgICAgICAgICAga2VjY2FrMjU2KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJpLmVuY29kZSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZWNjYWsyNTYoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJQZXJtaXQoYWRkcmVzcyBvd25lcixhZGRyZXNzIHNwZW5kZXIsdWludDI1NiB2YWx1ZSx1aW50MjU2IG5vbmNlLHVpbnQyNTYgZGVhZGxpbmUpIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3duZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3BlbmRlciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub25jZXNbb3duZXJdKyssCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhZGxpbmUKICAgICAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICB2LAogICAgICAgICAgICAgICAgciwKICAgICAgICAgICAgICAgIHMKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgICAgICByZWNvdmVyZWRBZGRyZXNzICE9IGFkZHJlc3MoMCkgJiYgcmVjb3ZlcmVkQWRkcmVzcyA9PSBvd25lciwKICAgICAgICAgICAgICAgICJJTlZBTElEX1NJR05FUiIKICAgICAgICAgICAgKTsKCiAgICAgICAgICAgIGFsbG93YW5jZVtyZWNvdmVyZWRBZGRyZXNzXVtzcGVuZGVyXSA9IHZhbHVlOwogICAgICAgIH0KCiAgICAgICAgZW1pdCBBcHByb3ZhbChvd25lciwgc3BlbmRlciwgdmFsdWUpOwogICAgfQoKICAgIGZ1bmN0aW9uIERPTUFJTl9TRVBBUkFUT1IoKSBwdWJsaWMgdmlldyB2aXJ0dWFsIHJldHVybnMgKGJ5dGVzMzIpIHsKICAgICAgICByZXR1cm4gYmxvY2suY2hhaW5pZCA9PSBJTklUSUFMX0NIQUlOX0lECiAgICAgICAgICAgID8gSU5JVElBTF9ET01BSU5fU0VQQVJBVE9SCiAgICAgICAgICAgIDogY29tcHV0ZURvbWFpblNlcGFyYXRvcigpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNvbXB1dGVEb21haW5TZXBhcmF0b3IoKSBpbnRlcm5hbCB2aWV3IHZpcnR1YWwgcmV0dXJucyAoYnl0ZXMzMikgewogICAgICAgIHJldHVybiBrZWNjYWsyNTYoCiAgICAgICAgICAgIGFiaS5lbmNvZGUoCiAgICAgICAgICAgICAgICBrZWNjYWsyNTYoCiAgICAgICAgICAgICAgICAgICAgIkVJUDcxMkRvbWFpbihzdHJpbmcgbmFtZSxzdHJpbmcgdmVyc2lvbix1aW50MjU2IGNoYWluSWQsYWRkcmVzcyB2ZXJpZnlpbmdDb250cmFjdCkiCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAga2VjY2FrMjU2KGJ5dGVzKG5hbWUpKSwKICAgICAgICAgICAgICAgIGtlY2NhazI1NigiMSIpLAogICAgICAgICAgICAgICAgYmxvY2suY2hhaW5pZCwKICAgICAgICAgICAgICAgIGFkZHJlc3ModGhpcykKICAgICAgICAgICAgKQogICAgICAgICk7CiAgICB9CgogICAgZnVuY3Rpb24gX21pbnQoYWRkcmVzcyB0bywgdWludDI1NiBhbW91bnQpIGludGVybmFsIHZpcnR1YWwgewogICAgICAgIHRvdGFsU3VwcGx5ICs9IGFtb3VudDsKCiAgICAgICAgdW5jaGVja2VkIHsKICAgICAgICAgICAgYmFsYW5jZU9mW3RvXSArPSBhbW91bnQ7CiAgICAgICAgfQoKICAgICAgICBlbWl0IFRyYW5zZmVyKGFkZHJlc3MoMCksIHRvLCBhbW91bnQpOwogICAgfQoKICAgIGZ1bmN0aW9uIF9idXJuKGFkZHJlc3MgZnJvbSwgdWludDI1NiBhbW91bnQpIGludGVybmFsIHZpcnR1YWwgewogICAgICAgIGJhbGFuY2VPZltmcm9tXSAtPSBhbW91bnQ7CgogICAgICAgIHVuY2hlY2tlZCB7CiAgICAgICAgICAgIHRvdGFsU3VwcGx5IC09IGFtb3VudDsKICAgICAgICB9CgogICAgICAgIGVtaXQgVHJhbnNmZXIoZnJvbSwgYWRkcmVzcygwKSwgYW1vdW50KTsKICAgIH0KfQoKY29udHJhY3QgRVJDMjBQZXJtaXQgaXMgRVJDMjAgewogICAgY29uc3RydWN0b3Ioc3RyaW5nIG1lbW9yeSBfbmFtZSwgc3RyaW5nIG1lbW9yeSBfc3ltYm9sLCB1aW50OCBfZGVjaW1hbHMpCiAgICAgICAgRVJDMjAoX25hbWUsIF9zeW1ib2wsIF9kZWNpbWFscykKICAgIHt9CgogICAgZnVuY3Rpb24gbWludChhZGRyZXNzIHRvLCB1aW50MjU2IGFtb3VudCkgcHVibGljIHsKICAgICAgICBfbWludCh0bywgYW1vdW50KTsKICAgIH0KfQo=" ref="nofollow noopener noreferrer">ERC20Permit.solERC20Permit.sol</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fremix.byteatatime.dev%2F%3F%23code%3DLy8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVApwcmFnbWEgc29saWRpdHkgXjAuOC4yNjsKCmludGVyZmFjZSBJRVJDMjBQZXJtaXQgewogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgYWNjb3VudCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgcmVjaXBpZW50LCB1aW50MjU2IGFtb3VudCkKICAgICAgICBleHRlcm5hbAogICAgICAgIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikKICAgICAgICBleHRlcm5hbAogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IGFtb3VudCkgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBzZW5kZXIsIGFkZHJlc3MgcmVjaXBpZW50LCB1aW50MjU2IGFtb3VudCkKICAgICAgICBleHRlcm5hbAogICAgICAgIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gcGVybWl0KAogICAgICAgIGFkZHJlc3Mgb3duZXIsCiAgICAgICAgYWRkcmVzcyBzcGVuZGVyLAogICAgICAgIHVpbnQyNTYgdmFsdWUsCiAgICAgICAgdWludDI1NiBkZWFkbGluZSwKICAgICAgICB1aW50OCB2LAogICAgICAgIGJ5dGVzMzIgciwKICAgICAgICBieXRlczMyIHMKICAgICkgZXh0ZXJuYWw7Cn0KCmNvbnRyYWN0IEdhc2xlc3NUb2tlblRyYW5zZmVyIHsKICAgIGZ1bmN0aW9uIHNlbmQoCiAgICAgICAgYWRkcmVzcyB0b2tlbiwKICAgICAgICBhZGRyZXNzIHNlbmRlciwKICAgICAgICBhZGRyZXNzIHJlY2VpdmVyLAogICAgICAgIHVpbnQyNTYgYW1vdW50LAogICAgICAgIHVpbnQyNTYgZmVlLAogICAgICAgIHVpbnQyNTYgZGVhZGxpbmUsCiAgICAgICAgLy8gUGVybWl0IHNpZ25hdHVyZQogICAgICAgIHVpbnQ4IHYsCiAgICAgICAgYnl0ZXMzMiByLAogICAgICAgIGJ5dGVzMzIgcwogICAgKSBleHRlcm5hbCB7CiAgICAgICAgLy8gUGVybWl0CiAgICAgICAgSUVSQzIwUGVybWl0KHRva2VuKS5wZXJtaXQoCiAgICAgICAgICAgIHNlbmRlciwgYWRkcmVzcyh0aGlzKSwgYW1vdW50ICsgZmVlLCBkZWFkbGluZSwgdiwgciwgcwogICAgICAgICk7CiAgICAgICAgLy8gU2VuZCBhbW91bnQgdG8gcmVjZWl2ZXIKICAgICAgICBJRVJDMjBQZXJtaXQodG9rZW4pLnRyYW5zZmVyRnJvbShzZW5kZXIsIHJlY2VpdmVyLCBhbW91bnQpOwogICAgICAgIC8vIFRha2UgZmVlIC0gc2VuZCBmZWUgdG8gbXNnLnNlbmRlcgogICAgICAgIElFUkMyMFBlcm1pdCh0b2tlbikudHJhbnNmZXJGcm9tKHNlbmRlciwgbXNnLnNlbmRlciwgZmVlKTsKICAgIH0KfQo%3D" target="_blank" title="https://remix.byteatatime.dev/?#code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IE1JVApwcmFnbWEgc29saWRpdHkgXjAuOC4yNjsKCmludGVyZmFjZSBJRVJDMjBQZXJtaXQgewogICAgZnVuY3Rpb24gdG90YWxTdXBwbHkoKSBleHRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQyNTYpOwogICAgZnVuY3Rpb24gYmFsYW5jZU9mKGFkZHJlc3MgYWNjb3VudCkgZXh0ZXJuYWwgdmlldyByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIHRyYW5zZmVyKGFkZHJlc3MgcmVjaXBpZW50LCB1aW50MjU2IGFtb3VudCkKICAgICAgICBleHRlcm5hbAogICAgICAgIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikKICAgICAgICBleHRlcm5hbAogICAgICAgIHZpZXcKICAgICAgICByZXR1cm5zICh1aW50MjU2KTsKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IGFtb3VudCkgZXh0ZXJuYWwgcmV0dXJucyAoYm9vbCk7CiAgICBmdW5jdGlvbiB0cmFuc2ZlckZyb20oYWRkcmVzcyBzZW5kZXIsIGFkZHJlc3MgcmVjaXBpZW50LCB1aW50MjU2IGFtb3VudCkKICAgICAgICBleHRlcm5hbAogICAgICAgIHJldHVybnMgKGJvb2wpOwogICAgZnVuY3Rpb24gcGVybWl0KAogICAgICAgIGFkZHJlc3Mgb3duZXIsCiAgICAgICAgYWRkcmVzcyBzcGVuZGVyLAogICAgICAgIHVpbnQyNTYgdmFsdWUsCiAgICAgICAgdWludDI1NiBkZWFkbGluZSwKICAgICAgICB1aW50OCB2LAogICAgICAgIGJ5dGVzMzIgciwKICAgICAgICBieXRlczMyIHMKICAgICkgZXh0ZXJuYWw7Cn0KCmNvbnRyYWN0IEdhc2xlc3NUb2tlblRyYW5zZmVyIHsKICAgIGZ1bmN0aW9uIHNlbmQoCiAgICAgICAgYWRkcmVzcyB0b2tlbiwKICAgICAgICBhZGRyZXNzIHNlbmRlciwKICAgICAgICBhZGRyZXNzIHJlY2VpdmVyLAogICAgICAgIHVpbnQyNTYgYW1vdW50LAogICAgICAgIHVpbnQyNTYgZmVlLAogICAgICAgIHVpbnQyNTYgZGVhZGxpbmUsCiAgICAgICAgLy8gUGVybWl0IHNpZ25hdHVyZQogICAgICAgIHVpbnQ4IHYsCiAgICAgICAgYnl0ZXMzMiByLAogICAgICAgIGJ5dGVzMzIgcwogICAgKSBleHRlcm5hbCB7CiAgICAgICAgLy8gUGVybWl0CiAgICAgICAgSUVSQzIwUGVybWl0KHRva2VuKS5wZXJtaXQoCiAgICAgICAgICAgIHNlbmRlciwgYWRkcmVzcyh0aGlzKSwgYW1vdW50ICsgZmVlLCBkZWFkbGluZSwgdiwgciwgcwogICAgICAgICk7CiAgICAgICAgLy8gU2VuZCBhbW91bnQgdG8gcmVjZWl2ZXIKICAgICAgICBJRVJDMjBQZXJtaXQodG9rZW4pLnRyYW5zZmVyRnJvbShzZW5kZXIsIHJlY2VpdmVyLCBhbW91bnQpOwogICAgICAgIC8vIFRha2UgZmVlIC0gc2VuZCBmZWUgdG8gbXNnLnNlbmRlcgogICAgICAgIElFUkMyMFBlcm1pdCh0b2tlbikudHJhbnNmZXJGcm9tKHNlbmRlciwgbXNnLnNlbmRlciwgZmVlKTsKICAgIH0KfQo=" ref="nofollow noopener noreferrer">GaslessTokenTransfer.solGaslessTokenTransfer.sol</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[279. Java Stream API - Stream æ‹¼æ¥çš„ä¸¤ç§æ–¹å¼ï¼šconcat() vs flatMap()]]></title>    <link>https://juejin.cn/post/7589839433320923199</link>    <guid>https://juejin.cn/post/7589839433320923199</guid>    <pubDate>2026-01-01T01:26:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589839433320923199" data-draft-id="7589903499598987318" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="279. Java Stream API - Stream æ‹¼æ¥çš„ä¸¤ç§æ–¹å¼ï¼šconcat() vs flatMap()"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2026-01-01T01:26:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CacheæŠ€æœ¯åˆ†äº«"/> <meta itemprop="url" content="https://juejin.cn/user/1662117313262776"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            279. Java Stream API - Stream æ‹¼æ¥çš„ä¸¤ç§æ–¹å¼ï¼šconcat() vs flatMap()
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1662117313262776/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CacheæŠ€æœ¯åˆ†äº«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T01:26:42.000Z" title="Thu Jan 01 2026 01:26:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">279. Java Stream API - Stream æ‹¼æ¥çš„ä¸¤ç§æ–¹å¼ï¼š<code>concat()</code> vs <code>flatMap()</code></h2>
<hr/>
<h4 data-id="heading-1">ğŸ¯ æœ¬èŠ‚ç›®æ ‡</h4>
<ul>
<li>ç†è§£ <code>Stream.concat()</code> å’Œ <code>flatMap()</code> å®ç°æµæ‹¼æ¥çš„æ–¹å¼</li>
<li>æŒæ¡ä¸¤ç§æ–¹æ³•çš„ä½¿ç”¨åœºæ™¯ã€æ€§èƒ½å·®å¼‚ä¸è¡Œä¸ºç‰¹æ€§</li>
<li>æ˜ç¡®ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å“ªç§æ–¹å¼æ›´åˆé€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">ğŸ§ª èƒŒæ™¯é—®é¢˜ï¼šå¤šä¸ªé›†åˆå¦‚ä½•ç»„åˆæˆä¸€ä¸ªæµï¼Ÿ</h3>
<p>å‡è®¾æˆ‘ä»¬æœ‰å¤šä¸ª <code>List&lt;Integer&gt;</code>ï¼Œæˆ‘ä»¬æƒ³è¦å°†å®ƒä»¬çš„å…ƒç´ æ‹¼æ¥æˆä¸€ä¸ªå¤§é›†åˆã€‚</p>
<hr/>
<h3 data-id="heading-3">âœ… æ–¹å¼ä¸€ï¼šä½¿ç”¨ <code>Stream.concat()</code></h3>
<h4 data-id="heading-4">ğŸ“Œ ç‰¹ç‚¹ï¼š</h4>
<ul>
<li>é€‚ç”¨äº <strong>æ‹¼æ¥ä¸¤ä¸ª</strong> æµ</li>
<li>é¡ºåºæ˜¯ï¼šå…ˆå¤„ç†ç¬¬ä¸€ä¸ªæµï¼Œå†å¤„ç†ç¬¬äºŒä¸ªæµ</li>
<li>è¿”å›çš„æµå…·æœ‰ <strong><code>SIZED</code></strong> å±æ€§ï¼ˆå·²çŸ¥å¤§å°ï¼‰</li>
</ul>
<h4 data-id="heading-5">ğŸ”¨ ç¤ºä¾‹ä»£ç ï¼š</h4>
<pre><code class="hljs language-java" lang="java">List&lt;Integer&gt; list0 = List.of(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
List&lt;Integer&gt; list1 = List.of(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>);

List&lt;Integer&gt; concat = Stream.concat(list0.stream(), list1.stream())
                             .toList();

System.out.println(<span class="hljs-string">"concat = "</span> + concat);
</code></pre>
<h4 data-id="heading-6">ğŸ”½ è¾“å‡ºï¼š</h4>
<pre><code class="hljs language-java" lang="java">concat = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]
</code></pre>
<p>ğŸ§  ç±»æ¯”ï¼šå°±åƒæŠŠä¸¤ä¸ªæ•°ç»„é¦–å°¾ç¼åœ¨ä¸€èµ·ï¼Œä¸­é—´æ²¡æœ‰æ‹†åˆ†ã€åˆå¹¶çš„é¢å¤–åŠ¨ä½œã€‚</p>
<hr/>
<h3 data-id="heading-7">âŒ å±€é™ï¼šåªèƒ½æ‹¼æ¥ä¸¤ä¸ªæµï¼</h3>
<p>å¦‚æœä½ æœ‰ 3 ä¸ªã€4 ä¸ªã€N ä¸ªæµï¼Œå°±å¾—åµŒå¥—è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-java" lang="java">Stream&lt;Integer&gt; result = Stream.concat(
                             Stream.concat(list0.stream(), list1.stream()),
                             list2.stream()
                         );
</code></pre>
<p>ğŸ“‰ é—®é¢˜ï¼šæ¯ <code>concat</code> ä¸€æ¬¡ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ªä¸´æ—¶ä¸­é—´æµï¼Œå†…å­˜å’Œæ•ˆç‡éƒ½æœ‰å¼€é”€ï¼</p>
<hr/>
<h3 data-id="heading-8">âœ… æ–¹å¼äºŒï¼šä½¿ç”¨ <code>flatMap()</code> åŠ¨æ€æ‹¼æ¥å¤šä¸ªæµ</h3>
<h4 data-id="heading-9">ğŸ“Œ ç‰¹ç‚¹ï¼š</h4>
<ul>
<li>æ”¯æŒ <strong>å¤šä¸ªæµ</strong> æ‹¼æ¥ï¼ˆä¸é™æ•°é‡ï¼‰</li>
<li>æ€§èƒ½æ›´ä¼˜ï¼š<strong>åªåˆ›å»ºä¸€ä¸ªå¤–å±‚æµ</strong></li>
<li>ç¼ºç‚¹æ˜¯ï¼šè¿”å›çš„æµæ²¡æœ‰ SIZED å±æ€§ï¼ˆå¤§å°æœªçŸ¥ï¼‰</li>
</ul>
<h4 data-id="heading-10">ğŸ”¨ ç¤ºä¾‹ä»£ç ï¼š</h4>
<pre><code class="hljs language-java" lang="java">List&lt;Integer&gt; list0 = List.of(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);
List&lt;Integer&gt; list1 = List.of(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>);
List&lt;Integer&gt; list2 = List.of(<span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>);

List&lt;Integer&gt; flatMap = Stream.of(list0.stream(), list1.stream(), list2.stream())
                              .flatMap(Function.identity()) <span class="hljs-comment">// å±•å¹³æµ</span>
                              .toList();

System.out.println(<span class="hljs-string">"flatMap = "</span> + flatMap);
</code></pre>
<h4 data-id="heading-11">ğŸ”½ è¾“å‡ºï¼š</h4>
<pre><code class="hljs language-java" lang="java">flatMap = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]
</code></pre>
<p>ğŸ§  ç±»æ¯”ï¼šåƒæ˜¯ä¸€ä¸ªâ€œå±•å¼€ä¸‰æ˜æ²»â€â€”â€”å…ˆæŠŠæ‰€æœ‰æµæ‰“åŒ…ï¼Œå†é€ä¸ªå±•å¼€å¹¶åˆå¹¶å…ƒç´ ã€‚</p>
<hr/>
<h3 data-id="heading-12">ğŸ§  ä¸ºä»€ä¹ˆ <code>concat()</code> ä¸ç”¨å¯å˜å‚æ•°ï¼ˆ<code>varargs</code>ï¼‰ï¼Ÿ</h3>
<p>ä½ å¯èƒ½å¥½å¥‡ï¼šä¸ºä»€ä¹ˆ <code>concat()</code> ä¸èƒ½æ¥æ”¶å¤šä¸ªæµï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p>
<pre><code class="hljs language-java" lang="java">Stream.concat(stream1, stream2, stream3); <span class="hljs-comment">// âŒ ä¸æ”¯æŒ</span>
</code></pre>
<p>ğŸ“Œ åŸå› æ˜¯ï¼š</p>
<ul>
<li>æ¯æ¬¡ <code>concat()</code> åªèƒ½æ‹¼æ¥ä¸¤ä¸ªæµ</li>
<li>è‹¥è¦æ‹¼æ¥å¤šä¸ªï¼Œå»ºè®®ä½¿ç”¨ <code>flatMap()</code> æ¥å‡å°‘ä¸­é—´æµçš„åˆ›å»º</li>
</ul>
<hr/>
<h3 data-id="heading-13">ğŸ” æ€§èƒ½å¯¹æ¯”ä¸åº•å±‚æœºåˆ¶</h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th><code>concat()</code></th><th><code>flatMap()</code></th></tr></thead><tbody><tr><td>æ”¯æŒå¤šä¸ªæµæ‹¼æ¥</td><td>å¦ï¼ˆåªèƒ½ä¸¤ä¸ªï¼‰</td><td>âœ… æ”¯æŒä»»æ„å¤šä¸ªæµ</td></tr><tr><td>æ˜¯å¦åˆ›å»ºä¸­é—´ä¸´æ—¶æµ</td><td>æ˜¯ï¼ˆæ¯ä¸¤ä¸ªæ‹¼æ¥éƒ½åˆ›å»ºï¼‰</td><td>å¦ï¼ˆåªåˆ›å»ºä¸€ä¸ªå¤–å±‚æµï¼‰</td></tr><tr><td>è¿”å›æµæ˜¯å¦æœ‰å¤§å°ä¿¡æ¯</td><td>âœ… æ˜¯ï¼ˆSIZEDï¼‰</td><td>âŒ å¦ï¼ˆä¸å†æ˜¯ SIZEDï¼‰</td></tr><tr><td>å†…éƒ¨ä¼˜åŒ–å¯èƒ½æ€§</td><td>æ›´æ˜“ä¼˜åŒ–</td><td>è¾ƒéš¾ä¼˜åŒ–</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-14">ğŸš¦ å…³äº SIZED ç‰¹æ€§å°è´´å£«ï¼š</h4>
<ul>
<li>å¦‚æœä½ ä½¿ç”¨ <code>Stream.concat()</code>ï¼Œç»“æœæµçš„å¤§å°æ˜¯å¯é¢„çŸ¥çš„ â†’ <code>Stream</code> ä¼šè‡ªåŠ¨æ ‡è®°ä¸º <strong>SIZED</strong></li>
<li>å¦‚æœä½¿ç”¨ <code>flatMap()</code>ï¼Œå› ä¸ºå±•å¼€è¿‡ç¨‹ä¸­å…ƒç´ æ•°ä¸ç¡®å®šï¼Œæ‰€ä»¥ç»“æœæµè¢«æ ‡è®°ä¸º <strong>UNKNOWN</strong></li>
</ul>
<p>ğŸ”§ æœ‰äº›æ“ä½œï¼ˆå¦‚å¹¶è¡Œæµä¼˜åŒ–ã€é¢„åˆ†é…å†…å­˜ï¼‰ä¾èµ– <code>SIZED</code> ç‰¹æ€§ï¼Œå› æ­¤ <code>concat</code> åœ¨æŸäº›åœºæ™¯ä¸‹æœ‰ä¼˜åŠ¿ã€‚</p>
<hr/>
<h3 data-id="heading-15">ğŸ”š æ€»ç»“é€‰æ‹©å»ºè®®</h3>

























<table><thead><tr><th>åœºæ™¯</th><th>å»ºè®®ä½¿ç”¨</th></tr></thead><tbody><tr><td>åªæ‹¼æ¥ä¸¤ä¸ªæµ</td><td>âœ… <code>concat()</code></td></tr><tr><td>æ‹¼æ¥å¤šä¸ªæµ</td><td>âœ… <code>flatMap()</code></td></tr><tr><td>å¸Œæœ›ä¿ç•™æµå¤§å°ä¿¡æ¯ï¼ˆå¦‚å¹¶è¡Œä¼˜åŒ–ï¼‰</td><td>âœ… <code>concat()</code></td></tr><tr><td>æ€§èƒ½ä¼˜å…ˆã€é¿å…ä¸­é—´æµåˆ›å»º</td><td>âœ… <code>flatMap()</code></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-16">ğŸ” æ‹“å±•ç»ƒä¹ é¢˜</h3>
<h4 data-id="heading-17">â˜‘ï¸ åˆå¹¶ä¸‰ä¸ªåˆ—è¡¨å¹¶æ‰“å°å¥‡æ•°å…ƒç´ </h4>
<pre><code class="hljs language-java" lang="java">List&lt;Integer&gt; combined = Stream.of(list0.stream(), list1.stream(), list2.stream())
                               .flatMap(Function.identity())
                               .filter(n -&gt; n % <span class="hljs-number">2</span> != <span class="hljs-number">0</span>)
                               .toList();

System.out.println(<span class="hljs-string">"odd numbers = "</span> + combined);
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MyBatisç»“æœæ˜ å°„æ¨¡å—è¯¦è§£]]></title>    <link>https://juejin.cn/post/7589838742552133651</link>    <guid>https://juejin.cn/post/7589838742552133651</guid>    <pubDate>2026-01-01T01:39:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589838742552133651" data-draft-id="7589466238240964650" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MyBatisç»“æœæ˜ å°„æ¨¡å—è¯¦è§£"/> <meta itemprop="keywords" content="MyBatis,Java"/> <meta itemprop="datePublished" content="2026-01-01T01:39:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MyBatisç»“æœæ˜ å°„æ¨¡å—è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T01:39:27.000Z" title="Thu Jan 01 2026 01:39:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»Šå¤©æ·±å…¥è§£æMyBatisæ¡†æ¶ä¸­éå¸¸æ ¸å¿ƒçš„ä¸€ä¸ªæ¨¡å—â€”â€”ç»“æœæ˜ å°„æ¨¡å—ã€‚è¿™ä¸ªæ¨¡å—è´Ÿè´£å°†æ•°æ®åº“æŸ¥è¯¢ç»“æœè½¬æ¢ä¸ºJavaå¯¹è±¡,æ˜¯MyBatiså®ç°ORMåŠŸèƒ½çš„å…³é”®æ‰€åœ¨ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€MyBatisæ•´ä½“æ¶æ„ä¸ç»“æœæ˜ å°„æ¨¡å—å®šä½</h2>
<p>åœ¨æ·±å…¥äº†è§£ç»“æœæ˜ å°„æ¨¡å—ä¹‹å‰,æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹MyBatisçš„æ•´ä½“æ¶æ„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7193c7e54e5f4199a91e8596b2a83a10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767836366&amp;x-signature=V%2BNyvl5AEnv4v5ux6Hb4T9ou6eQ%3D" alt="" loading="lazy"/></p>
<p>ä»æ¶æ„å›¾å¯ä»¥çœ‹å‡º,MyBatisé‡‡ç”¨äº†æ¸…æ™°çš„åˆ†å±‚è®¾è®¡,è€Œç»“æœæ˜ å°„æ¨¡å—(ResultSetHandler)ä½äºæ ¸å¿ƒå¤„ç†å±‚,æ‰¿æ‹…ç€è‡³å…³é‡è¦çš„èŒè´£ã€‚</p>
<h2 data-id="heading-1">ç»“æœæ˜ å°„æ¨¡å—çš„äº”å¤§æ ¸å¿ƒèŒè´£</h2>
<p>ç»“æœæ˜ å°„æ¨¡å—ä¸»è¦è´Ÿè´£ä»¥ä¸‹å·¥ä½œ:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> å¤„ç†æŸ¥è¯¢ç»“æœé›† - å°†JDBC ResultSetè½¬æ¢ä¸ºJavaå¯¹è±¡åˆ—è¡¨
<span class="hljs-bullet">2.</span> å®Œæˆå¯¹è±¡æ˜ å°„ - æ ¹æ®ResultMapé…ç½®å°†æ•°æ®åº“è®°å½•æ˜ å°„åˆ°Javaå¯¹è±¡
<span class="hljs-bullet">3.</span> å¤„ç†å¤æ‚å…³è” - æ”¯æŒä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šç­‰åµŒå¥—æŸ¥è¯¢
<span class="hljs-bullet">4.</span> å®ç°å»¶è¿ŸåŠ è½½ - æŒ‰éœ€åŠ è½½å…³è”å¯¹è±¡,å¤§å¹…æå‡æŸ¥è¯¢æ€§èƒ½
<span class="hljs-bullet">5.</span> åˆ›å»ºå¯¹è±¡å®ä¾‹ - é€šè¿‡ObjectFactoryå®ä¾‹åŒ–ç›®æ ‡å¯¹è±¡
</code></pre>
<h2 data-id="heading-2">ResultSetHandleræ¥å£å®šä¹‰</h2>
<p>ResultSetHandleræ˜¯ç»“æœå¤„ç†çš„é¡¶å±‚æ¥å£,å®šä¹‰ç®€æ´æ˜äº†:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ResultSetHandler</span> {
    <span class="hljs-comment">// å¤„ç†ç»“æœé›†,è¿”å›å¯¹è±¡åˆ—è¡¨</span>
    &lt;E&gt; List&lt;E&gt; <span class="hljs-title function_">handleResultSets</span><span class="hljs-params">(Statement stmt)</span> 
        <span class="hljs-keyword">throws</span> SQLException;

    <span class="hljs-comment">// å¤„ç†æ¸¸æ ‡ç»“æœé›†</span>
    &lt;E&gt; Cursor&lt;E&gt; <span class="hljs-title function_">handleCursorResultSets</span><span class="hljs-params">(Statement stmt)</span> 
        <span class="hljs-keyword">throws</span> SQLException;

    <span class="hljs-comment">// å¤„ç†å­˜å‚¨è¿‡ç¨‹è¾“å‡ºå‚æ•°</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleOutputParameters</span><span class="hljs-params">(CallableStatement cs)</span> 
        <span class="hljs-keyword">throws</span> SQLException;
}
</code></pre>
<h2 data-id="heading-3">äºŒã€ResultSetHandleræ¶æ„è®¾è®¡</h2>
<p>MyBatisä¸ºResultSetHandleræä¾›äº†çµæ´»ä¸”å¼ºå¤§çš„å®ç°æ¶æ„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/318b377296a0489b9a144a9f0d07ebcb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767836366&amp;x-signature=s5Aik4qhowP3Bjzlc9myxAAek9E%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">DefaultResultSetHandleræ ¸å¿ƒå®ç°</h2>
<p>DefaultResultSetHandleræ˜¯MyBatisæä¾›çš„é»˜è®¤å®ç°,åŒ…å«äº†å®Œæ•´çš„ç»“æœå¤„ç†é€»è¾‘:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultResultSetHandler</span> 
    <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ResultSetHandler</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Executor executor;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Configuration configuration;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MappedStatement mappedStatement;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> TypeHandlerRegistry typeHandlerRegistry;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ObjectFactory objectFactory;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;Object&gt; <span class="hljs-title function_">handleResultSets</span><span class="hljs-params">(Statement stmt)</span> 
        <span class="hljs-keyword">throws</span> SQLException {

        List&lt;Object&gt; multipleResults = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-type">int</span> <span class="hljs-variable">resultSetCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;

        <span class="hljs-comment">// è·å–ç¬¬ä¸€ä¸ªResultSet</span>
        <span class="hljs-type">ResultSetWrapper</span> <span class="hljs-variable">rsw</span> <span class="hljs-operator">=</span> getFirstResultSet(stmt);
        List&lt;ResultMap&gt; resultMaps = 
            mappedStatement.getResultMaps();

        <span class="hljs-comment">// å¤„ç†æ¯ä¸ªResultSet</span>
        <span class="hljs-keyword">while</span> (rsw != <span class="hljs-literal">null</span> &amp;&amp; 
               resultMapCount &gt; resultSetCount) {
            <span class="hljs-type">ResultMap</span> <span class="hljs-variable">resultMap</span> <span class="hljs-operator">=</span> 
                resultMaps.get(resultSetCount);
            handleResultSet(rsw, resultMap, 
                multipleResults, <span class="hljs-literal">null</span>);
            rsw = getNextResultSet(stmt);
            resultSetCount++;
        }

        <span class="hljs-keyword">return</span> collapseSingleResultList(multipleResults);
    }
}
</code></pre>
<h2 data-id="heading-5">ResultSetWrapperå¢å¼ºå°è£…</h2>
<p>ResultSetWrapperå¯¹åŸç”ŸResultSetè¿›è¡Œäº†å°è£…,æä¾›äº†æ›´ä¸°å¯Œçš„å…ƒæ•°æ®ä¿¡æ¯:</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResultSetWrapper</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ResultSet resultSet;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;<span class="hljs-type">String</span>&gt; columnNames;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;JdbcType&gt; jdbcTypes;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;<span class="hljs-type">String</span>, Integer&gt; columnIndexes;

    <span class="hljs-comment">// è·å–æŒ‡å®šä½ç½®çš„åˆ—å</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">getColumnName</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span> </span>{
        <span class="hljs-keyword">return</span> columnNames.<span class="hljs-built_in">get</span>(i);
    }

    <span class="hljs-comment">// è·å–æŒ‡å®šä½ç½®çš„JDBCç±»å‹</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> JdbcType <span class="hljs-title">getJdbcType</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span> </span>{
        <span class="hljs-keyword">return</span> jdbcTypes.<span class="hljs-built_in">get</span>(i);
    }

    <span class="hljs-comment">// è·å–åˆé€‚çš„ç±»å‹å¤„ç†å™¨</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> TypeHandler&lt;?&gt; <span class="hljs-title">getTypeHandler</span><span class="hljs-params">(
        Class&lt;?&gt; propertyType, <span class="hljs-type">String</span> columnName)</span> </span>{
        JdbcType jdbcType = <span class="hljs-built_in">getJdbcType</span>(columnName);
        <span class="hljs-keyword">return</span> typeHandlerRegistry.<span class="hljs-built_in">getTypeHandler</span>(
            propertyType, jdbcType);
    }
}
</code></pre>
<h2 data-id="heading-6">ä¸‰ã€ç»“æœé›†æ˜ å°„å®Œæ•´æµç¨‹</h2>
<p>ç»“æœé›†æ˜ å°„æ˜¯ä¸€ä¸ªæœ‰åºä¸”å¤æ‚çš„è¿‡ç¨‹,è®©æˆ‘ä»¬é€æ­¥æ‹†è§£ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/857923706fa44e93b38c6292d50d2bf0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767836366&amp;x-signature=etLZULGkjidUimbOhs0D68lqlrQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">æ­¥éª¤ä¸€:å¤„ç†ResultSet</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleResultSet</span><span class="hljs-params">(
    ResultSetWrapper rsw, ResultMap resultMap,
    List&lt;Object&gt; multipleResults, 
    ResultMapping parentMapping)</span> <span class="hljs-keyword">throws</span> SQLException {

    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">if</span> (parentMapping != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// åµŒå¥—ç»“æœæ˜ å°„</span>
            handleRowValues(rsw, resultMap, <span class="hljs-literal">null</span>, 
                RowBounds.DEFAULT, parentMapping);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æ™®é€šç»“æœæ˜ å°„</span>
            <span class="hljs-type">DefaultResultHandler</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> 
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultResultHandler</span>(objectFactory);
            handleRowValues(rsw, resultMap, handler, 
                rowBounds, <span class="hljs-literal">null</span>);
            multipleResults.add(handler.getResultList());
        }
    } <span class="hljs-keyword">finally</span> {
        closeResultSet(rsw.getResultSet());
    }
}
</code></pre>
<h2 data-id="heading-8">æ­¥éª¤äºŒ:å¤„ç†è¡Œæ•°æ®</h2>
<p>æ ¹æ®æ˜¯å¦åŒ…å«åµŒå¥—æ˜ å°„,é‡‡ç”¨ä¸åŒçš„å¤„ç†ç­–ç•¥:</p>
<pre><code class="hljs language-scss" lang="scss">public void <span class="hljs-built_in">handleRowValues</span>(
    ResultSetWrapper rsw, ResultMap resultMap,
    ResultHandler&lt;?&gt; resultHandler, 
    RowBounds rowBounds,
    ResultMapping parentMapping) throws SQLException {

    if (resultMap.hasNestedResultMaps()) {
        <span class="hljs-comment">// åŒ…å«åµŒå¥—æ˜ å°„çš„å¤æ‚å¤„ç†</span>
        <span class="hljs-built_in">handleRowValuesForNestedResultMap</span>(
            rsw, resultMap, resultHandler, 
            rowBounds, parentMapping);
    } else {
        <span class="hljs-comment">// ç®€å•æ˜ å°„çš„å¤„ç†</span>
        <span class="hljs-built_in">handleRowValuesForSimpleResultMap</span>(
            rsw, resultMap, resultHandler, 
            rowBounds, parentMapping);
    }
}
</code></pre>
<h2 data-id="heading-9">æ­¥éª¤ä¸‰:è·å–è¡Œå€¼å¹¶åˆ›å»ºå¯¹è±¡</h2>
<pre><code class="hljs language-ini" lang="ini">private Object getRowValue(
    ResultSetWrapper rsw, ResultMap resultMap) 
    throws SQLException {

    final ResultLoaderMap <span class="hljs-attr">lazyLoader</span> = 
        new ResultLoaderMap()<span class="hljs-comment">;</span>

    // åˆ›å»ºç›®æ ‡å¯¹è±¡
    Object <span class="hljs-attr">resultObject</span> = createResultObject(
        rsw, resultMap, lazyLoader)<span class="hljs-comment">;</span>

    if (resultObject != null &amp;&amp; 
        !hasTypeHandlerForResultObject(rsw, resultMap)) {

        final MetaObject <span class="hljs-attr">metaObject</span> = 
            configuration.newMetaObject(resultObject)<span class="hljs-comment">;</span>

        boolean <span class="hljs-attr">foundValues</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>

        // åº”ç”¨è‡ªåŠ¨æ˜ å°„
        if (shouldApplyAutomaticMappings(resultMap, false)) {
            <span class="hljs-attr">foundValues</span> = applyAutomaticMappings(
                rsw, resultMap, metaObject, null)<span class="hljs-comment">;</span>
        }

        // å¤„ç†å±æ€§æ˜ å°„
        <span class="hljs-attr">foundValues</span> = applyPropertyMappings(
            rsw, resultMap, metaObject, 
            lazyLoader, null) || foundValues<span class="hljs-comment">;</span>

        return foundValues ? resultObject : null<span class="hljs-comment">;</span>
    }

    return resultObject<span class="hljs-comment">;</span>
}
</code></pre>
<h2 data-id="heading-10">è‡ªåŠ¨æ˜ å°„æœºåˆ¶</h2>
<p>MyBatisæ”¯æŒè‡ªåŠ¨æ˜ å°„,å½“æ•°æ®åº“åˆ—åä¸Javaå±æ€§ååŒ¹é…æ—¶,ä¼šè‡ªåŠ¨å®Œæˆèµ‹å€¼:</p>
<pre><code class="hljs language-ini" lang="ini">protected boolean applyAutomaticMappings(
    ResultSetWrapper rsw, ResultMap resultMap,
    MetaObject metaObject, String columnPrefix) 
    throws SQLException {

    List&lt;UnMappedColumnAutoMapping&gt; <span class="hljs-attr">autoMapping</span> = 
        createAutomaticMappings(rsw, resultMap, 
            metaObject, columnPrefix)<span class="hljs-comment">;</span>

    boolean <span class="hljs-attr">foundValues</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
    if (!autoMapping.isEmpty()) {
        for (UnMappedColumnAutoMapping mapping : autoMapping) {
            final Object <span class="hljs-attr">value</span> = mapping.typeHandler
                .getResult(rsw.getResultSet(), mapping.column)<span class="hljs-comment">;</span>
            if (value != null) {
                metaObject.setValue(mapping.property, value)<span class="hljs-comment">;</span>
                <span class="hljs-attr">foundValues</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
            }
        }
    }

    return foundValues<span class="hljs-comment">;</span>
}
</code></pre>
<h2 data-id="heading-11">å››ã€ResultMapé…ç½®è¯¦è§£</h2>
<p>ResultMapæ˜¯ç»“æœæ˜ å°„çš„æ ¸å¿ƒé…ç½®,æè¿°äº†å¦‚ä½•å°†ResultSetæ˜ å°„åˆ°Javaå¯¹è±¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d34c45865f7e4b3298f9efebb4709f55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767836366&amp;x-signature=19Hra8LcGVQ%2FBAfIEghUxdjVEac%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-12">ResultMapæ ¸å¿ƒå±æ€§</h2>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResultMap</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> id;              <span class="hljs-comment">// å”¯ä¸€æ ‡è¯†</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Class</span>&lt;?&gt; type;          <span class="hljs-comment">// ç›®æ ‡Javaç±»å‹</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">ResultMapping</span>&gt; resultMappings; 
                                          <span class="hljs-comment">// æ˜ å°„åˆ—è¡¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">List</span>&lt;<span class="hljs-type">ResultMapping</span>&gt; idResultMappings; 
                                          <span class="hljs-comment">// IDæ˜ å°„</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Set</span>&lt;<span class="hljs-type">String</span>&gt; mappedColumns; 
                                          <span class="hljs-comment">// æ˜ å°„çš„åˆ—</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Discriminator</span> discriminator; 
                                          <span class="hljs-comment">// é‰´åˆ«å™¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> boolean hasNestedResultMaps; 
                                          <span class="hljs-comment">// æ˜¯å¦æœ‰åµŒå¥—</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Boolean</span> autoMapping;    <span class="hljs-comment">// è‡ªåŠ¨æ˜ å°„å¼€å…³</span>
}
</code></pre>
<h2 data-id="heading-13">ResultMappingé…ç½®é¡¹</h2>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResultMapping</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> property;              <span class="hljs-comment">// Javaå±æ€§å</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> column;                <span class="hljs-comment">// æ•°æ®åº“åˆ—å</span>
    <span class="hljs-keyword">private</span> Class&lt;?&gt; javaType;            <span class="hljs-comment">// Javaç±»å‹</span>
    <span class="hljs-keyword">private</span> JdbcType jdbcType;            <span class="hljs-comment">// JDBCç±»å‹</span>
    <span class="hljs-keyword">private</span> TypeHandler&lt;?&gt; typeHandler;   <span class="hljs-comment">// ç±»å‹å¤„ç†å™¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> nestedResultMapId;     <span class="hljs-comment">// åµŒå¥—ResultMap</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> nestedQueryId;         <span class="hljs-comment">// åµŒå¥—æŸ¥è¯¢ID</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> columnPrefix;          <span class="hljs-comment">// åˆ—å‰ç¼€</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> lazy;                 <span class="hljs-comment">// å»¶è¿ŸåŠ è½½æ ‡è¯†</span>
}
</code></pre>
<h2 data-id="heading-14">ä¸‰ç§å…¸å‹é…ç½®ç¤ºä¾‹</h2>
<p><strong>1. åŸºç¡€ResultMapé…ç½®</strong></p>
<pre><code class="hljs language-ini" lang="ini">&lt;resultMap <span class="hljs-attr">id</span>=<span class="hljs-string">"BaseResultMap"</span> type=<span class="hljs-string">"User"</span>&gt;
    &lt;id <span class="hljs-attr">column</span>=<span class="hljs-string">"id"</span> property=<span class="hljs-string">"id"</span> jdbcType=<span class="hljs-string">"BIGINT"</span>/&gt;
    &lt;result <span class="hljs-attr">column</span>=<span class="hljs-string">"user_name"</span> property=<span class="hljs-string">"userName"</span> 
            <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">"VARCHAR"</span>/&gt;
    &lt;result <span class="hljs-attr">column</span>=<span class="hljs-string">"email"</span> property=<span class="hljs-string">"email"</span> 
            <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">"VARCHAR"</span>/&gt;
    &lt;result <span class="hljs-attr">column</span>=<span class="hljs-string">"create_time"</span> property=<span class="hljs-string">"createTime"</span> 
            <span class="hljs-attr">jdbcType</span>=<span class="hljs-string">"TIMESTAMP"</span>/&gt;
&lt;/resultMap&gt;
</code></pre>
<p><strong>2. æ„é€ å™¨æ˜ å°„é…ç½®</strong></p>
<pre><code class="hljs language-ini" lang="ini">&lt;resultMap <span class="hljs-attr">id</span>=<span class="hljs-string">"ConstructorResultMap"</span> type=<span class="hljs-string">"User"</span>&gt;
    &lt;constructor&gt;
        &lt;idArg <span class="hljs-attr">column</span>=<span class="hljs-string">"id"</span> javaType=<span class="hljs-string">"long"</span>/&gt;
        &lt;arg <span class="hljs-attr">column</span>=<span class="hljs-string">"user_name"</span> javaType=<span class="hljs-string">"String"</span>/&gt;
        &lt;arg <span class="hljs-attr">column</span>=<span class="hljs-string">"email"</span> javaType=<span class="hljs-string">"String"</span>/&gt;
    &lt;/constructor&gt;
&lt;/resultMap&gt;
</code></pre>
<p><strong>3. å…³è”æ˜ å°„é…ç½®</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"UserWithOrderResultMap"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"User"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"id"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"user_name"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"userName"</span>/&gt;</span>

    <span class="hljs-comment">&lt;!-- ä¸€å¯¹ä¸€å…³è” --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">association</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"profile"</span> 
                 <span class="hljs-attr">columnPrefix</span>=<span class="hljs-string">"profile_"</span>
                 <span class="hljs-attr">javaType</span>=<span class="hljs-string">"Profile"</span> 
                 <span class="hljs-attr">resultMap</span>=<span class="hljs-string">"ProfileResultMap"</span>/&gt;</span>

    <span class="hljs-comment">&lt;!-- ä¸€å¯¹å¤šå…³è” --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">collection</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"orders"</span> <span class="hljs-attr">ofType</span>=<span class="hljs-string">"Order"</span>
                <span class="hljs-attr">columnPrefix</span>=<span class="hljs-string">"order_"</span>
                <span class="hljs-attr">resultMap</span>=<span class="hljs-string">"OrderResultMap"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span>
</code></pre>
<h2 data-id="heading-15">äº”ã€åµŒå¥—æŸ¥è¯¢å¤„ç†æœºåˆ¶</h2>
<p>MyBatisæ”¯æŒä¸¤ç§åµŒå¥—æŸ¥è¯¢æ–¹å¼,å„æœ‰ä¼˜åŠ£ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b4fe2a1f07a4e779d0af7c4cf920975~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767836366&amp;x-signature=xYzKxG%2FqnCxrPe0cEG98VmfhtUw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-16">æ–¹å¼ä¸€:åµŒå¥—ç»“æœ(Nested Results)</h2>
<p>é€šè¿‡ä¸€æ¬¡SQLæŸ¥è¯¢è·å–æ‰€æœ‰æ•°æ®,ç„¶ååœ¨å†…å­˜ä¸­ç»„è£…å¯¹è±¡å…³ç³»ã€‚</p>
<p><strong>é…ç½®ç¤ºä¾‹:</strong></p>
<pre><code class="hljs language-ini" lang="ini">&lt;resultMap <span class="hljs-attr">id</span>=<span class="hljs-string">"UserWithProfileResultMap"</span> type=<span class="hljs-string">"User"</span>&gt;
    &lt;id <span class="hljs-attr">column</span>=<span class="hljs-string">"user_id"</span> property=<span class="hljs-string">"id"</span>/&gt;
    &lt;result <span class="hljs-attr">column</span>=<span class="hljs-string">"user_name"</span> property=<span class="hljs-string">"userName"</span>/&gt;

    &lt;!-- åµŒå¥—ç»“æœæ˜ å°„ --&gt;
    &lt;association <span class="hljs-attr">property</span>=<span class="hljs-string">"profile"</span> javaType=<span class="hljs-string">"Profile"</span>&gt;
        &lt;id <span class="hljs-attr">column</span>=<span class="hljs-string">"profile_id"</span> property=<span class="hljs-string">"id"</span>/&gt;
        &lt;result <span class="hljs-attr">column</span>=<span class="hljs-string">"phone"</span> property=<span class="hljs-string">"phone"</span>/&gt;
        &lt;result <span class="hljs-attr">column</span>=<span class="hljs-string">"address"</span> property=<span class="hljs-string">"address"</span>/&gt;
    &lt;/association&gt;
&lt;/resultMap&gt;

&lt;select <span class="hljs-attr">id</span>=<span class="hljs-string">"selectUserWithProfile"</span> 
        <span class="hljs-attr">resultMap</span>=<span class="hljs-string">"UserWithProfileResultMap"</span>&gt;
    SELECT
        u.id as user_id,
        u.user_name,
        p.id as profile_id,
        p.phone,
        p.address
    FROM t_user u
    LEFT JOIN t_profile p ON <span class="hljs-attr">u.id</span> = p.user_id
    WHERE u.id = <span class="hljs-comment">#{id}</span>
&lt;/select&gt;
</code></pre>
<h2 data-id="heading-17">æ–¹å¼äºŒ:åµŒå¥—æŸ¥è¯¢(Nested Queries)</h2>
<p>é€šè¿‡å¤šæ¬¡SQLæŸ¥è¯¢è·å–æ•°æ®,æ”¯æŒå»¶è¿ŸåŠ è½½ã€‚</p>
<p><strong>é…ç½®ç¤ºä¾‹:</strong></p>
<pre><code class="hljs language-ini" lang="ini">&lt;resultMap <span class="hljs-attr">id</span>=<span class="hljs-string">"UserWithProfileResultMap"</span> type=<span class="hljs-string">"User"</span>&gt;
    &lt;id <span class="hljs-attr">column</span>=<span class="hljs-string">"id"</span> property=<span class="hljs-string">"id"</span>/&gt;
    &lt;result <span class="hljs-attr">column</span>=<span class="hljs-string">"user_name"</span> property=<span class="hljs-string">"userName"</span>/&gt;

    &lt;!-- åµŒå¥—æŸ¥è¯¢,æ”¯æŒå»¶è¿ŸåŠ è½½ --&gt;
    &lt;association <span class="hljs-attr">property</span>=<span class="hljs-string">"profile"</span> column=<span class="hljs-string">"id"</span>
                 <span class="hljs-attr">select</span>=<span class="hljs-string">"selectProfile"</span> 
                 <span class="hljs-attr">fetchType</span>=<span class="hljs-string">"lazy"</span>/&gt;
&lt;/resultMap&gt;

&lt;select <span class="hljs-attr">id</span>=<span class="hljs-string">"selectUserWithProfile"</span> 
        <span class="hljs-attr">resultMap</span>=<span class="hljs-string">"UserWithProfileResultMap"</span>&gt;
    SELECT id, user_name
    FROM t_user
    WHERE id = <span class="hljs-comment">#{id}</span>
&lt;/select&gt;

&lt;select <span class="hljs-attr">id</span>=<span class="hljs-string">"selectProfile"</span> resultType=<span class="hljs-string">"Profile"</span>&gt;
    SELECT id, phone, address
    FROM t_profile
    WHERE user_id = <span class="hljs-comment">#{id}</span>
&lt;/select&gt;
</code></pre>
<h2 data-id="heading-18">ä¸€å¯¹å¤šå…³è”å¤„ç†</h2>
<pre><code class="hljs language-ini" lang="ini">&lt;resultMap <span class="hljs-attr">id</span>=<span class="hljs-string">"UserWithOrdersResultMap"</span> type=<span class="hljs-string">"User"</span>&gt;
    &lt;id <span class="hljs-attr">column</span>=<span class="hljs-string">"user_id"</span> property=<span class="hljs-string">"id"</span>/&gt;
    &lt;result <span class="hljs-attr">column</span>=<span class="hljs-string">"user_name"</span> property=<span class="hljs-string">"userName"</span>/&gt;

    &lt;!-- ä¸€å¯¹å¤šé›†åˆæ˜ å°„ --&gt;
    &lt;collection <span class="hljs-attr">property</span>=<span class="hljs-string">"orders"</span> ofType=<span class="hljs-string">"Order"</span>&gt;
        &lt;id <span class="hljs-attr">column</span>=<span class="hljs-string">"order_id"</span> property=<span class="hljs-string">"id"</span>/&gt;
        &lt;result <span class="hljs-attr">column</span>=<span class="hljs-string">"order_no"</span> property=<span class="hljs-string">"orderNo"</span>/&gt;
        &lt;result <span class="hljs-attr">column</span>=<span class="hljs-string">"amount"</span> property=<span class="hljs-string">"amount"</span>/&gt;
    &lt;/collection&gt;
&lt;/resultMap&gt;

&lt;select <span class="hljs-attr">id</span>=<span class="hljs-string">"selectUserWithOrders"</span> 
        <span class="hljs-attr">resultMap</span>=<span class="hljs-string">"UserWithOrdersResultMap"</span>&gt;
    SELECT
        u.id as user_id,
        u.user_name,
        o.id as order_id,
        o.order_no,
        o.amount
    FROM t_user u
    LEFT JOIN t_order o ON <span class="hljs-attr">u.id</span> = o.user_id
    WHERE u.id = <span class="hljs-comment">#{id}</span>
&lt;/select&gt;
</code></pre>
<h2 data-id="heading-19">ä¸¤ç§æ–¹å¼å¯¹æ¯”</h2>



































<table><thead><tr><th>ç»´åº¦</th><th>åµŒå¥—ç»“æœ</th><th>åµŒå¥—æŸ¥è¯¢</th></tr></thead><tbody><tr><td>SQLæ¬¡æ•°</td><td>1æ¬¡</td><td>N+1æ¬¡</td></tr><tr><td>æ€§èƒ½</td><td>è¾ƒå¥½</td><td>è¾ƒå·®(å¯é€šè¿‡å»¶è¿ŸåŠ è½½ä¼˜åŒ–)</td></tr><tr><td>ç»“æœé›†å¤§å°</td><td>å¯èƒ½å¾ˆå¤§</td><td>è¾ƒå°</td></tr><tr><td>SQLå¤æ‚åº¦</td><td>å¤æ‚(å¤šè¡¨JOIN)</td><td>ç®€å•</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>å…³è”æ•°æ®é‡å°</td><td>å…³è”æ•°æ®é‡å¤§æˆ–éœ€å»¶è¿ŸåŠ è½½</td></tr></tbody></table>
<h2 data-id="heading-20">å…­ã€å»¶è¿ŸåŠ è½½æœºåˆ¶æ·±åº¦è§£æ</h2>
<p>å»¶è¿ŸåŠ è½½æ˜¯MyBatisæå‡æŸ¥è¯¢æ€§èƒ½çš„é‡è¦æ‰‹æ®µ,è®©æˆ‘ä»¬æ·±å…¥äº†è§£å…¶å®ç°åŸç†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed9516783fae40de845613cdf5e4d7e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767836366&amp;x-signature=jadP9Oi26czx8zdlqLQRt6nYzsg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-21">å»¶è¿ŸåŠ è½½åŸç†</h2>
<p>å»¶è¿ŸåŠ è½½åŸºäºä»£ç†æ¨¡å¼å®ç°,åªæœ‰åœ¨çœŸæ­£è®¿é—®å…³è”å¯¹è±¡æ—¶æ‰è§¦å‘æŸ¥è¯¢ã€‚</p>
<p><strong>ä»£ç†å¯¹è±¡åˆ›å»º:</strong></p>
<pre><code class="hljs language-scss" lang="scss">protected <span class="hljs-selector-tag">Object</span> <span class="hljs-built_in">createResultObject</span>(
    ResultSetWrapper rsw, ResultMap resultMap,
    ResultLoaderMap lazyLoader) throws SQLException {

    final Class&lt;?&gt; resultType = resultMap<span class="hljs-selector-class">.getType</span>();

    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦å»¶è¿ŸåŠ è½½</span>
    if (resultType.isInterface() || 
        <span class="hljs-built_in">needsProxy</span>(resultType)) {
        <span class="hljs-comment">// åˆ›å»ºä»£ç†å¯¹è±¡</span>
        return proxyFactory<span class="hljs-selector-class">.createProxy</span>(
            resultType, lazyLoader, 
            configuration.getObjectFactory());
    }

    return objectFactory<span class="hljs-selector-class">.create</span>(resultType);
}
</code></pre>
<h2 data-id="heading-22">å…¨å±€å»¶è¿ŸåŠ è½½é…ç½®</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¯ç”¨å»¶è¿ŸåŠ è½½ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"lazyLoadingEnabled"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"true"</span>/&gt;</span>

    <span class="hljs-comment">&lt;!-- å…³é—­ä¾µå…¥å¼å»¶è¿ŸåŠ è½½ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"aggressiveLazyLoading"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"false"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span>
</code></pre>
<h2 data-id="heading-23">ResultLoaderåŠ è½½å™¨</h2>
<p>ResultLoaderè´Ÿè´£å®é™…çš„å»¶è¿ŸåŠ è½½é€»è¾‘:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResultLoader</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Configuration configuration;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Executor executor;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> MappedStatement mappedStatement;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Object parameterObject;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Class&lt;?&gt; targetType;

    <span class="hljs-comment">// æ‰§è¡Œå»¶è¿ŸåŠ è½½</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">loadResult</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException {
        List&lt;Object&gt; list = selectList();
        resultObject = objectFactory.create(targetType);

        <span class="hljs-keyword">if</span> (resultObject != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">final</span> <span class="hljs-type">MetaObject</span> <span class="hljs-variable">metaObject</span> <span class="hljs-operator">=</span> 
                configuration.newMetaObject(resultObject);

            <span class="hljs-keyword">if</span> (resultObject <span class="hljs-keyword">instanceof</span> Collection) {
                ((Collection) resultObject).addAll(list);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (list.size() &gt; <span class="hljs-number">0</span>) {
                metaObject.setValue(list.get(<span class="hljs-number">0</span>));
            }
        }

        <span class="hljs-keyword">return</span> resultObject;
    }

    <span class="hljs-keyword">private</span> &lt;E&gt; List&lt;E&gt; <span class="hljs-title function_">selectList</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-keyword">return</span> executor.query(
            mappedStatement, parameterObject,
            RowBounds.DEFAULT, 
            Executor.NO_RESULT_HANDLER);
    }
}
</code></pre>
<h2 data-id="heading-24">ä»£ç†å·¥å‚å®ç°</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JavassistProxyFactory</span> 
    <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ProxyFactory</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">Object</span> <span class="hljs-title function_">createProxy</span>(<span class="hljs-params">
        <span class="hljs-built_in">Object</span> target, ResultLoaderMap lazyLoader, 
        ObjectFactory objectFactory</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">EnhancedResultObjectProxyImpl</span>
            .<span class="hljs-title function_">createProxy</span>(target, lazyLoader, objectFactory);
    }

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnhancedResultObjectProxyImpl</span> 
        <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MethodHandler</span> {

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-title class_">Object</span> <span class="hljs-title function_">invoke</span>(
            <span class="hljs-title class_">Object</span> enhanced, <span class="hljs-title class_">Method</span> method, 
            <span class="hljs-title class_">Method</span>[] proxiedMethods, <span class="hljs-title class_">Object</span>[] args) 
            throws <span class="hljs-title class_">Throwable</span> {

            final <span class="hljs-title class_">String</span> methodName = method.<span class="hljs-title function_">getName</span>();

            <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦è§¦å‘å»¶è¿ŸåŠ è½½</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isLazyLoadTrigger</span>(methodName)) {
                lazyLoader.<span class="hljs-title function_">loadAll</span>();
            }

            <span class="hljs-comment">// è°ƒç”¨åŸæ–¹æ³•</span>
            <span class="hljs-keyword">return</span> method.<span class="hljs-title function_">invoke</span>(enhanced, args);
        }
    }
}
</code></pre>
<h2 data-id="heading-25">å»¶è¿ŸåŠ è½½ä½¿ç”¨ç¤ºä¾‹</h2>
<pre><code class="hljs language-ini" lang="ini">// Mapperæ¥å£å®šä¹‰
User selectUserWithLazyProfile(Long id)<span class="hljs-comment">;</span>

// XMLé…ç½®
&lt;resultMap <span class="hljs-attr">id</span>=<span class="hljs-string">"UserLazyResultMap"</span> type=<span class="hljs-string">"User"</span>&gt;
    &lt;id <span class="hljs-attr">column</span>=<span class="hljs-string">"id"</span> property=<span class="hljs-string">"id"</span>/&gt;
    &lt;result <span class="hljs-attr">column</span>=<span class="hljs-string">"user_name"</span> property=<span class="hljs-string">"userName"</span>/&gt;

    &lt;!-- é…ç½®å»¶è¿ŸåŠ è½½ --&gt;
    &lt;association <span class="hljs-attr">property</span>=<span class="hljs-string">"profile"</span> column=<span class="hljs-string">"id"</span>
                 <span class="hljs-attr">select</span>=<span class="hljs-string">"selectProfile"</span> 
                 <span class="hljs-attr">fetchType</span>=<span class="hljs-string">"lazy"</span>/&gt;
&lt;/resultMap&gt;

&lt;select <span class="hljs-attr">id</span>=<span class="hljs-string">"selectUserWithLazyProfile"</span> 
        <span class="hljs-attr">resultMap</span>=<span class="hljs-string">"UserLazyResultMap"</span>&gt;
    SELECT id, user_name FROM t_user WHERE id = <span class="hljs-comment">#{id}</span>
&lt;/select&gt;

// Javaä»£ç ä½¿ç”¨
User <span class="hljs-attr">user</span> = userMapper.selectUserWithLazyProfile(<span class="hljs-number">1</span>L)<span class="hljs-comment">;</span>
// æ­¤æ—¶åªæ‰§è¡Œäº†æŸ¥è¯¢Userçš„SQL,ProfileæœªåŠ è½½

String <span class="hljs-attr">userName</span> = user.getUserName()<span class="hljs-comment">; </span>
// è®¿é—®Userå±æ€§,ä¸è§¦å‘åŠ è½½

Profile <span class="hljs-attr">profile</span> = user.getProfile()<span class="hljs-comment">; </span>
// è®¿é—®Profileå±æ€§,è§¦å‘å»¶è¿ŸåŠ è½½,æ‰§è¡ŒselectProfile
</code></pre>
<h2 data-id="heading-26">ä¸ƒã€é‰´åˆ«å™¨(Discriminator)ä½¿ç”¨</h2>
<p>é‰´åˆ«å™¨ç±»ä¼¼äºJavaä¸­çš„switchè¯­å¥,å¯ä»¥æ ¹æ®æŸåˆ—çš„å€¼åŠ¨æ€é€‰æ‹©ä½¿ç”¨å“ªä¸ªResultMapã€‚</p>
<h2 data-id="heading-27">åº”ç”¨åœºæ™¯</h2>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªè½¦è¾†è¡¨,ä¸åŒç±»å‹çš„è½¦è¾†æœ‰ä¸åŒçš„å±æ€§:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"VehicleResultMap"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"Vehicle"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"id"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"name"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"type"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"type"</span>/&gt;</span>

    <span class="hljs-comment">&lt;!-- é‰´åˆ«å™¨:æ ¹æ®typeå­—æ®µé€‰æ‹©ä¸åŒçš„ResultMap --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">discriminator</span> <span class="hljs-attr">javaType</span>=<span class="hljs-string">"int"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"type"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">case</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">"CarResultMap"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">case</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"2"</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">"TruckResultMap"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">case</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"3"</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">"BusResultMap"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">discriminator</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å°æ±½è½¦ResultMap --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"CarResultMap"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"Car"</span> 
           <span class="hljs-attr">extends</span>=<span class="hljs-string">"VehicleResultMap"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"seat_count"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"seatCount"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å¡è½¦ResultMap --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"TruckResultMap"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"Truck"</span> 
           <span class="hljs-attr">extends</span>=<span class="hljs-string">"VehicleResultMap"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"load_capacity"</span> 
            <span class="hljs-attr">property</span>=<span class="hljs-string">"loadCapacity"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å…¬äº¤è½¦ResultMap --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"BusResultMap"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"Bus"</span> 
           <span class="hljs-attr">extends</span>=<span class="hljs-string">"VehicleResultMap"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"route_number"</span> 
            <span class="hljs-attr">property</span>=<span class="hljs-string">"routeNumber"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span>
</code></pre>
<p><strong>å…«ã€æœ€ä½³å®è·µ</strong></p>
<h2 data-id="heading-28">8.1 ResultMapè®¾è®¡å»ºè®®</h2>
<p><strong>1. åˆç†ä½¿ç”¨ç»§æ‰¿</strong></p>
<p>é€šè¿‡extendså±æ€§é¿å…é‡å¤é…ç½®,æé«˜å¯ç»´æŠ¤æ€§:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- åŸºç¡€ResultMap --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"BaseUserResultMap"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"User"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"id"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"user_name"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"userName"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ç»§æ‰¿åŸºç¡€ResultMap --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"UserDetailResultMap"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"User"</span> 
           <span class="hljs-attr">extends</span>=<span class="hljs-string">"BaseUserResultMap"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"email"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"phone"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"phone"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span>
</code></pre>
<p><strong>2. æ˜¾å¼é…ç½®æ˜ å°„</strong></p>
<p>ç”Ÿäº§ç¯å¢ƒå»ºè®®æ˜¾å¼é…ç½®æ‰€æœ‰æ˜ å°„å…³ç³»,é¿å…ä¾èµ–è‡ªåŠ¨æ˜ å°„å¸¦æ¥çš„ä¸ç¡®å®šæ€§:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"UserResultMap"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"User"</span> 
           <span class="hljs-attr">autoMapping</span>=<span class="hljs-string">"false"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ˜¾å¼é…ç½®æ‰€æœ‰å­—æ®µæ˜ å°„ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"id"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"user_name"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"userName"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"email"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span>
</code></pre>
<p><strong>3. æ­£ç¡®ä½¿ç”¨IDæ ‡ç­¾</strong></p>
<p>ä½¿ç”¨æ ‡ç­¾æ ‡è¯†ä¸»é”®,å¯ä»¥æå‡MyBatisçš„å¯¹è±¡å”¯ä¸€æ€§åˆ¤æ–­æ€§èƒ½:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"UserResultMap"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"User"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ä½¿ç”¨idæ ‡ç­¾è€Œä¸æ˜¯result --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"id"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"user_name"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"userName"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span>
</code></pre>
<p><strong>4. ä½¿ç”¨åˆ—å‰ç¼€é¿å…å†²çª</strong></p>
<p>å¤šè¡¨å…³è”æŸ¥è¯¢æ—¶,ä½¿ç”¨columnPrefixé¿å…åˆ—åå†²çª:</p>
<pre><code class="hljs language-ini" lang="ini">&lt;resultMap <span class="hljs-attr">id</span>=<span class="hljs-string">"UserWithProfileResultMap"</span> type=<span class="hljs-string">"User"</span>&gt;
    &lt;id <span class="hljs-attr">column</span>=<span class="hljs-string">"id"</span> property=<span class="hljs-string">"id"</span>/&gt;
    &lt;result <span class="hljs-attr">column</span>=<span class="hljs-string">"user_name"</span> property=<span class="hljs-string">"userName"</span>/&gt;

    &lt;!-- ä½¿ç”¨åˆ—å‰ç¼€ --&gt;
    &lt;association <span class="hljs-attr">property</span>=<span class="hljs-string">"profile"</span> 
                 <span class="hljs-attr">columnPrefix</span>=<span class="hljs-string">"p_"</span>
                 <span class="hljs-attr">resultMap</span>=<span class="hljs-string">"ProfileResultMap"</span>/&gt;
&lt;/resultMap&gt;

&lt;select <span class="hljs-attr">id</span>=<span class="hljs-string">"selectUserWithProfile"</span> 
        <span class="hljs-attr">resultMap</span>=<span class="hljs-string">"UserWithProfileResultMap"</span>&gt;
    SELECT
        u.id, u.user_name,
        p.id as p_id,
        p.phone as p_phone,
        p.address as p_address
    FROM t_user u
    LEFT JOIN t_profile p ON <span class="hljs-attr">u.id</span> = p.user_id
&lt;/select&gt;
</code></pre>
<h2 data-id="heading-29">8.2 åµŒå¥—æŸ¥è¯¢é€‰æ‹©ç­–ç•¥</h2>



































<table><thead><tr><th>ç»´åº¦</th><th>åµŒå¥—ç»“æœ</th><th>åµŒå¥—æŸ¥è¯¢</th></tr></thead><tbody><tr><td>æŸ¥è¯¢æ¬¡æ•°</td><td>1æ¬¡</td><td>å¯èƒ½N+1æ¬¡</td></tr><tr><td>æ€§èƒ½</td><td>å¥½</td><td>è¾ƒå·®(å¯ç”¨å»¶è¿ŸåŠ è½½ä¼˜åŒ–)</td></tr><tr><td>å†…å­˜å ç”¨</td><td>ç»“æœé›†å¤§æ—¶å ç”¨å¤š</td><td>è¾ƒå°‘</td></tr><tr><td>SQLå¤æ‚åº¦</td><td>å¤æ‚(JOIN)</td><td>ç®€å•</td></tr><tr><td>æ¨èåœºæ™¯</td><td>å…³è”æ•°æ®å°‘,æŸ¥è¯¢é¢‘ç¹</td><td>å…³è”æ•°æ®å¤š,æŒ‰éœ€æŸ¥è¯¢</td></tr></tbody></table>
<h2 data-id="heading-30">8.3 æ€§èƒ½ä¼˜åŒ–</h2>
<p><strong>1. åˆç†ä½¿ç”¨å»¶è¿ŸåŠ è½½</strong></p>
<p>é¿å…N+1æŸ¥è¯¢é—®é¢˜:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å¯ç”¨å»¶è¿ŸåŠ è½½ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"lazyLoadingEnabled"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"true"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"aggressiveLazyLoading"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"false"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span>

<span class="hljs-comment">&lt;!-- é…ç½®å»¶è¿ŸåŠ è½½ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">association</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"profile"</span> <span class="hljs-attr">select</span>=<span class="hljs-string">"selectProfile"</span>
<span class="hljs-attr">fetchType</span>=<span class="hljs-string">"lazy"</span>/&gt;</span>
</code></pre>
<p><strong>2. ä½¿ç”¨æ‰¹é‡åŠ è½½</strong></p>
<p>å¼€å¯å»¶è¿ŸåŠ è½½æ—¶,é…ç½®åˆç†çš„æ‰¹é‡åŠ è½½ç­–ç•¥:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">settings</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¯ç”¨å»¶è¿ŸåŠ è½½ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"lazyLoadingEnabled"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"true"</span>/&gt;</span>

    <span class="hljs-comment">&lt;!-- å»¶è¿ŸåŠ è½½çš„è§¦å‘æ–¹æ³• --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">setting</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"lazyLoadTriggerMethods"</span> 
             <span class="hljs-attr">value</span>=<span class="hljs-string">"equals,clone,hashCode,toString"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">settings</span>&gt;</span>
</code></pre>
<p><strong>3. ResultMapå¤ç”¨</strong></p>
<p>é€šè¿‡extendså‡å°‘é‡å¤é…ç½®,æé«˜å¯ç»´æŠ¤æ€§:</p>
<pre><code class="hljs language-ini" lang="ini">&lt;resultMap <span class="hljs-attr">id</span>=<span class="hljs-string">"BaseResultMap"</span> type=<span class="hljs-string">"User"</span>&gt;
    &lt;id <span class="hljs-attr">column</span>=<span class="hljs-string">"id"</span> property=<span class="hljs-string">"id"</span>/&gt;
    &lt;result <span class="hljs-attr">column</span>=<span class="hljs-string">"user_name"</span> property=<span class="hljs-string">"userName"</span>/&gt;
&lt;/resultMap&gt;

&lt;resultMap <span class="hljs-attr">id</span>=<span class="hljs-string">"DetailResultMap"</span> type=<span class="hljs-string">"User"</span> 
           <span class="hljs-attr">extends</span>=<span class="hljs-string">"BaseResultMap"</span>&gt;
    &lt;result <span class="hljs-attr">column</span>=<span class="hljs-string">"email"</span> property=<span class="hljs-string">"email"</span>/&gt;
&lt;/resultMap&gt;
</code></pre>
<h2 data-id="heading-31">ä¹ã€æ€»ç»“</h2>
<p>MyBatisçš„ç»“æœæ˜ å°„æ¨¡å—æ˜¯æ•´ä¸ªæ¡†æ¶çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€,é€šè¿‡ç²¾å¿ƒè®¾è®¡çš„ResultMapå’ŒResultSetHandler,å®ç°äº†ä»ResultSetåˆ°Javaå¯¹è±¡çš„çµæ´»æ˜ å°„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘æ¶ˆæ¯é€»è¾‘å†™åœ¨MySQLäº‹åŠ¡ä¸­ï¼Œå¯¼è‡´æ¶ˆè´¹é€»è¾‘Bug]]></title>    <link>https://juejin.cn/post/7589839019717443634</link>    <guid>https://juejin.cn/post/7589839019717443634</guid>    <pubDate>2026-01-01T01:55:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589839019717443634" data-draft-id="7589828902158516274" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘æ¶ˆæ¯é€»è¾‘å†™åœ¨MySQLäº‹åŠ¡ä¸­ï¼Œå¯¼è‡´æ¶ˆè´¹é€»è¾‘Bug"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-01T01:55:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸èƒ½æ”¾å¼ƒæ²»ç–—"/> <meta itemprop="url" content="https://juejin.cn/user/2207475080364302"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘æ¶ˆæ¯é€»è¾‘å†™åœ¨MySQLäº‹åŠ¡ä¸­ï¼Œå¯¼è‡´æ¶ˆè´¹é€»è¾‘Bug
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2207475080364302/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸èƒ½æ”¾å¼ƒæ²»ç–—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T01:55:01.000Z" title="Thu Jan 01 2026 01:55:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1ã€ä¸šåŠ¡èƒŒæ™¯</h3>
<p>åœ¨åˆ›å»ºæ–°ç”¨æˆ·åï¼Œéœ€è¦å‘é€ä¸€ä¸ªæ–°ç”¨æˆ·æ³¨å†Œäº‹ä»¶ã€‚ä¸‹æ¸¸æœåŠ¡æ”¶åˆ°è¿™ä¸ªäº‹ä»¶åï¼Œä¼šæŸ¥è¯¢ç”¨æˆ·ç›¸å…³çš„ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-1">2ã€é”™è¯¯çš„å®ç°é€»è¾‘</h3>
<p><code>å¼€å¯äº‹åŠ¡ -&gt; å†™å…¥æ–°ç”¨æˆ·ä¿¡æ¯ -&gt; å‘é€MQ æ¶ˆæ¯ -&gt; æäº¤äº‹åŠ¡</code><br/>
è¿™ä¸ªé€»è¾‘ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ã€‚ä¸‹æ¸¸æœåŠ¡åœ¨æ¶ˆè´¹ MQ æ¶ˆæ¯æ—¶ï¼ŒæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æ—¶ï¼Œå¯èƒ½ä¼šæŸ¥ä¸åˆ°ã€‚é€»è¾‘å¦‚ä¸‹æ‰€ç¤º</p>



































<table><thead><tr><th>æ—¶åˆ»</th><th>å‘æ¶ˆæ¯çº¿ç¨‹</th><th>æ¶ˆè´¹æ¶ˆæ¯çº¿ç¨‹</th></tr></thead><tbody><tr><td>T0</td><td>å¼€å¯äº‹åŠ¡</td><td>\</td></tr><tr><td>T1</td><td>å†™å…¥æ–°ç”¨æˆ·ä¿¡æ¯</td><td>\</td></tr><tr><td>T2</td><td>å‘é€MQ æ¶ˆæ¯</td><td>\</td></tr><tr><td>T3</td><td>\</td><td>æ¶ˆè´¹MQ æ¶ˆæ¯ï¼ŒæŸ¥è¯¢ç”¨æˆ·æ¶ˆæ¯ã€‚æ­¤æ—¶æŸ¥ä¸åˆ°ï¼Œå› ä¸ºäº‹åŠ¡æœªæäº¤</td></tr><tr><td>T4</td><td>æäº¤äº‹åŠ¡</td><td>\</td></tr></tbody></table>
<h3 data-id="heading-2">3ã€æ­£ç¡®çš„å®ç°é€»è¾‘</h3>
<p>è¦ç¡®ä¿æ¶ˆè´¹è€…æ¶ˆè´¹åˆ° <code>æ–°ç”¨æˆ·æ³¨å†Œäº‹ä»¶æ¶ˆæ¯</code> æ—¶ï¼Œä¸€å®šèƒ½è¯»åˆ°ç”¨æˆ·ä¿¡æ¯ã€‚å¤§æ¦‚æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹å¼</p>
<h4 data-id="heading-3">3.1ã€ç”¨å»¶è¿Ÿæ¶ˆæ¯å®ç°</h4>
<p>æ—¢ç„¶æ˜¯å› ä¸ºæ¶ˆè´¹çš„æ—¶å€™ï¼Œäº‹åŠ¡è¿˜æ²¡æäº¤ï¼Œå¯¼è‡´è¯»æ•°æ®å¤±è´¥ã€‚é‚£ä¹ˆå¯ä»¥è€ƒè™‘ä½¿ç”¨å»¶è¿Ÿæ¶ˆæ¯ï¼Œå»¶è¿Ÿå‡ ç§’å†æ¶ˆè´¹ã€‚</p>
<h4 data-id="heading-4">3.2ã€ç”¨RocketMQ äº‹åŠ¡æ¶ˆæ¯å®ç°</h4>
<p><code>å¼€å¯äº‹åŠ¡ -&gt; å†™å…¥æ–°ç”¨æˆ·ä¿¡æ¯ -&gt; å‘é€äº‹åŠ¡æ¶ˆæ¯ -&gt; æäº¤äº‹åŠ¡</code></p>
<p>RocketMQ äº‹åŠ¡æ¶ˆæ¯æœ‰ä¸ªå¼Šç«¯ï¼Œé‚£å°±æ˜¯æ— æ³•å°†æ¶ˆæ¯å‘é€åˆ°æŒ‡å®šçš„é˜Ÿåˆ—ã€‚å› æ­¤å¦‚æœæƒ³è¦å®ç°å±€éƒ¨é¡ºåºæ¶ˆè´¹ï¼Œåªèƒ½å°† topic çš„é˜Ÿåˆ—æ•°è®¾ç½®ä¸º 1ã€‚</p>
<h4 data-id="heading-5">3.3ã€ç”¨æœ¬åœ°æ¶ˆæ¯è¡¨å®ç°</h4>
<p>åœ¨åˆ†å¸ƒå¼äº‹åŠ¡ï¼ˆMySQLã€ä¸MQ å‘æ¶ˆæ¯æœ¬è´¨å¯ä»¥ç†è§£ä¸ºåˆ†å¸ƒå¼äº‹åŠ¡ï¼‰è§£å†³æ–¹æ¡ˆä¸­ï¼Œæœ¬åœ°æ¶ˆæ¯è¡¨æ˜¯ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e7effbcf1234b3a8aa608da03c3b973~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN6IO95pS-5byD5rK755aX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767837300&amp;x-signature=FIlgFabdKeWW3caNZUujIPTb7NU%3D" alt="æœªå‘½åæ–‡ä»¶.jpg" loading="lazy"/></p>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨çš„è¡¨ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼ˆå½“ç„¶æœ‰å¾ˆå¤šç§å˜é€šå“ˆï¼‰</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> local_message(
    id <span class="hljs-type">bigint</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,
    content text <span class="hljs-keyword">default</span> <span class="hljs-keyword">null</span> comment <span class="hljs-string">'è¦å‘é€çš„å†…å®¹'</span>,
    ...
    ...
)
</code></pre>
<p>æœ¬åœ°æ¶ˆæ¯è¡¨åªæœ‰ä¸€ä¸ªå°æ¯›ç—…ï¼Œé‚£å°±æ˜¯å‘é€åï¼Œéœ€è¦ä¸€æ®µæ—¶é—´æ¶ˆæ¯æ‰èƒ½è¢«æ¶ˆè´¹åˆ°ã€‚å½“ç„¶å¦‚æœæƒ³è¦ç«‹å³æ¶ˆè´¹åˆ°ï¼Œå¯ä»¥å°†å®šæ—¶ä»»åŠ¡çš„é€»è¾‘æ¢æˆï¼Œç›‘å¬æœ¬åœ°æ¶ˆæ¯è¡¨çš„ binlogï¼Œå®æ—¶å¤„ç† binlog çš„å˜æ›´ã€‚</p>
<h4 data-id="heading-6">3.4ã€ç”¨é‡è¯•æ—¥å¿—å®ç°</h4>
<p>é‡è¯•æ—¥å¿—ï¼Œåœ¨ä¸šåŠ¡å¼€å‘ä¸­æ›´å¸¸è§ï¼Œä¹Ÿæ›´å¸¸ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf58bcbc6f3f456c8c99fc62b68bc405~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN6IO95pS-5byD5rK755aX:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767837300&amp;x-signature=0sRlPum2bJdv3lslcbVkCftcnBQ%3D" alt="é‡è¯•æ—¥å¿— (1).jpg" loading="lazy"/></p>
<p>é‡è¯•æ—¥å¿—åªæœ‰1ä¸ªé—®é¢˜ã€‚å¦‚æœåº”ç”¨ç¨‹åºåœ¨å‘é€æ¶ˆæ¯æ—¶ï¼Œcrash çš„è¯ï¼Œæ¶ˆæ¯å°±ä¼šä¸¢å¤±ã€‚ä½†äº‹å®ä¸Šè¿™ä¸ªæ¦‚ç‡å¾ˆä½å¾ˆä½å¾ˆä½ã€‚</p>
<h3 data-id="heading-7">4ã€ä¸¾ä¸€åä¸‰</h3>
<p>æ ¸å¿ƒçš„é—®é¢˜åœ¨äºï¼šåœ¨ MySQL çš„äº‹åŠ¡ä¸­åŒ…ç€å…¶ä»–ç»„ä»¶çš„é€»è¾‘ï¼Œå¹¶ä¸”æœ‰å¦ä¸€ä¸ªçº¿ç¨‹åœ¨è¯»åˆ°è¯¥ç»„ä»¶çš„å€¼åï¼Œä¼šå»è¯»æœªæäº¤çš„æ•°æ®ã€‚</p>
<p>ç±»ä¼¼çš„é€»è¾‘è¿˜æœ‰ï¼š<br/>
<code>å¼€å¯äº‹åŠ¡ -&gt; å†™æœ¬åœ°äº‹åŠ¡ -&gt; å†™ Redis -&gt; æäº¤äº‹åŠ¡</code>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rust å®‰è£…åŠ é€ŸæŒ‡å—]]></title>    <link>https://juejin.cn/post/7589881050768539682</link>    <guid>https://juejin.cn/post/7589881050768539682</guid>    <pubDate>2025-12-31T16:30:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589881050768539682" data-draft-id="7589881050768523298" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rust å®‰è£…åŠ é€ŸæŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-31T16:30:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çº¯ç²¹çš„çƒ­çˆ±"/> <meta itemprop="url" content="https://juejin.cn/user/3540880762088056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rust å®‰è£…åŠ é€ŸæŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3540880762088056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çº¯ç²¹çš„çƒ­çˆ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-31T16:30:07.000Z" title="Wed Dec 31 2025 16:30:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Rust å®‰è£…åŠ é€ŸæŒ‡å—</h2>
<h3 data-id="heading-1">1. ä¸‹è½½ Rust å®‰è£…å™¨</h3>
<p>è®¿é—® Rust å®˜ç½‘ä¸‹è½½å®‰è£…å™¨ï¼š</p>
<ul>
<li><strong>Windows</strong>: <code>rustup-init.exe</code></li>
<li><strong>macOS/Linux</strong>: <code>rustup-init.sh</code></li>
</ul>
<p>å®˜æ–¹ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rust-lang.org%2Ftools%2Finstall" target="_blank" title="https://www.rust-lang.org/tools/install" ref="nofollow noopener noreferrer">www.rust-lang.org/tools/instaâ€¦</a></p>
<h3 data-id="heading-2">2. è§£å†³ Rust å®‰è£…æ…¢é—®é¢˜</h3>
<h4 data-id="heading-3">2.1 ä¿®æ”¹ Rust å®‰è£…å™¨å’Œå¥—ä»¶ä¸‹è½½åœ°å€</h4>
<p>é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡é…ç½®å›½å†…é•œåƒæºï¼Œå¤§å¹…æå‡ä¸‹è½½é€Ÿåº¦ï¼š</p>
<h5 data-id="heading-4">Windows (PowerShell)</h5>
<pre><code class="hljs language-powershell" lang="powershell"># è®¾ç½® Rust å›½å†…é•œåƒæº
$ENV:RUSTUP_DIST_SERVER='https://mirrors.aliyun.com/rustup'
$ENV:RUSTUP_UPDATE_ROOT='https://mirrors.aliyun.com/rustup/rustup'

# ç„¶åè¿è¡Œå®‰è£…å™¨
.\rustup-init.exe
</code></pre>
<h5 data-id="heading-5">macOS / Linux (Bash)</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è®¾ç½® Rust å›½å†…é•œåƒæº</span>
<span class="hljs-built_in">export</span> RUSTUP_DIST_SERVER=https://mirrors.aliyun.com/rustup
<span class="hljs-built_in">export</span> RUSTUP_UPDATE_ROOT=https://mirrors.aliyun.com/rustup/rustup

<span class="hljs-comment"># ç„¶åè¿è¡Œå®‰è£…å™¨</span>
./rustup-init.sh
</code></pre>
<h4 data-id="heading-6">2.2 å…¶ä»–å›½å†…é•œåƒæºï¼ˆå¤‡é€‰ï¼‰</h4>
<h5 data-id="heading-7">ä¸­ç§‘å¤§é•œåƒæº</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">export</span> RUSTUP_DIST_SERVER=https://mirrors.ustc.edu.cn/rust-static
<span class="hljs-built_in">export</span> RUSTUP_UPDATE_ROOT=https://mirrors.ustc.edu.cn/rust-static/rustup
</code></pre>
<h5 data-id="heading-8">æ¸…åå¤§å­¦é•œåƒæº</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">export</span> RUSTUP_DIST_SERVER=https://mirrors.tuna.tsinghua.edu.cn/rustup
<span class="hljs-built_in">export</span> RUSTUP_UPDATE_ROOT=https://mirrors.tuna.tsinghua.edu.cn/rustup/rustup
</code></pre>
<h3 data-id="heading-9">3. æ°¸ä¹…é…ç½®é•œåƒæºï¼ˆå¯é€‰ï¼‰</h3>
<h4 data-id="heading-10">3.1 Windows æ°¸ä¹…é…ç½®</h4>
<p>åœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­æ·»åŠ ï¼š</p>
<ul>
<li>å˜é‡åï¼š<code>RUSTUP_DIST_SERVER</code></li>
<li>å˜é‡å€¼ï¼š<code>https://mirrors.aliyun.com/rustup</code></li>
<li>å˜é‡åï¼š<code>RUSTUP_UPDATE_ROOT</code></li>
<li>å˜é‡å€¼ï¼š<code>https://mirrors.aliyun.com/rustup/rustup</code></li>
</ul>
<h4 data-id="heading-11">3.2 macOS/Linux æ°¸ä¹…é…ç½®</h4>
<p>å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ° <code>~/.bashrc</code> æˆ– <code>~/.zshrc</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Rust é•œåƒæºé…ç½®</span>
<span class="hljs-built_in">export</span> RUSTUP_DIST_SERVER=https://mirrors.aliyun.com/rustup
<span class="hljs-built_in">export</span> RUSTUP_UPDATE_ROOT=https://mirrors.aliyun.com/rustup/rustup
</code></pre>
<p>ç„¶åæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">source</span> ~/.bashrc  <span class="hljs-comment"># æˆ– source ~/.zshrc</span>
</code></pre>
<h3 data-id="heading-12">4. éªŒè¯å®‰è£…</h3>
<p>å®‰è£…å®Œæˆåï¼ŒéªŒè¯ Rust æ˜¯å¦æ­£ç¡®å®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">rustc --version
cargo --version
</code></pre>
<h3 data-id="heading-13">5. é…ç½® Cargo é•œåƒæº</h3>
<p>å®‰è£…å®Œæˆåï¼Œè¿˜éœ€è¦é…ç½® Cargo çš„é•œåƒæºä»¥åŠ é€Ÿ crate ä¸‹è½½ï¼š</p>
<h4 data-id="heading-14">åˆ›å»ºæˆ–ä¿®æ”¹ <code>~/.cargo/config</code> æ–‡ä»¶</h4>
<h5 data-id="heading-15">Windows</h5>
<p>æ–‡ä»¶ä½ç½®ï¼š<code>%USERPROFILE%\.cargo\config</code></p>
<h5 data-id="heading-16">macOS/Linux</h5>
<p>æ–‡ä»¶ä½ç½®ï¼š<code>~/.cargo/config</code></p>
<p>æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[source.crates-io]</span>
<span class="hljs-attr">registry</span> = <span class="hljs-string">"https://github.com/rust-lang/crates.io-index"</span>
<span class="hljs-attr">replace-with</span> = <span class="hljs-string">'aliyun'</span> <span class="hljs-comment"># æŒ‡å®šä½¿ç”¨ä¸‹é¢å“ªä¸ªæºï¼Œä¿®æ”¹ä¸ºsource.åé¢çš„å†…å®¹å³å¯</span>

<span class="hljs-comment">#é˜¿é‡Œäº‘</span>
<span class="hljs-section">[source.aliyun]</span>
<span class="hljs-attr">registry</span> = <span class="hljs-string">"sparse+https://mirrors.aliyun.com/crates.io-index/"</span>

<span class="hljs-comment"># ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦</span>
<span class="hljs-section">[source.ustc]</span>
<span class="hljs-attr">registry</span> = <span class="hljs-string">"https://mirrors.ustc.edu.cn/crates.io-index"</span>

<span class="hljs-comment"># ä¸Šæµ·äº¤é€šå¤§å­¦</span>
<span class="hljs-section">[source.sjtu]</span>
<span class="hljs-attr">registry</span> = <span class="hljs-string">"https://mirrors.sjtug.sjtu.edu.cn/git/crates.io-index/"</span>

<span class="hljs-comment"># æ¸…åå¤§å­¦</span>
<span class="hljs-section">[source.tuna]</span>
<span class="hljs-attr">registry</span> = <span class="hljs-string">"https://mirrors.tuna.tsinghua.edu.cn/git/crates.io-index.git"</span>

<span class="hljs-comment"># rustccç¤¾åŒº</span>
<span class="hljs-section">[source.rustcc]</span>
<span class="hljs-attr">registry</span> = <span class="hljs-string">"https://code.aliyun.com/rustcc/crates.io-index.git"</span>

<span class="hljs-section">[http]</span>
<span class="hljs-attr">proxy</span> = <span class="hljs-string">"http://127.0.0.1:2080"</span>




</code></pre>
<h3 data-id="heading-17">6. ä¸€é”®å®‰è£…è„šæœ¬ï¼ˆLinux/macOSï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># è®¾ç½®é•œåƒæº</span>
<span class="hljs-built_in">export</span> RUSTUP_DIST_SERVER=https://mirrors.aliyun.com/rustup
<span class="hljs-built_in">export</span> RUSTUP_UPDATE_ROOT=https://mirrors.aliyun.com/rustup/rustup

<span class="hljs-comment"># ä¸‹è½½å¹¶å®‰è£… Rust</span>
curl --proto <span class="hljs-string">'=https'</span> --tlsv1.2 -sSf https://sh.rustup.rs | sh

<span class="hljs-comment"># é…ç½® Cargo é•œåƒæº</span>
<span class="hljs-built_in">mkdir</span> -p ~/.cargo
<span class="hljs-built_in">cat</span> &gt; ~/.cargo/config &lt;&lt; <span class="hljs-string">EOF
[source.crates-io]
replace-with = 'ustc'

[source.ustc]
registry = "git://mirrors.ustc.edu.cn/crates.io-index"
EOF</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"Rust å®‰è£…å®Œæˆï¼è¯·é‡æ–°æ‰“å¼€ç»ˆç«¯æˆ–æ‰§è¡Œï¼šsource ~/.cargo/env"</span>
</code></pre>
<hr/>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ol>
<li>å®‰è£…å‰è¯·ç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸</li>
<li>å¦‚æœä½¿ç”¨ä»£ç†ï¼Œè¯·ç¡®ä¿ä»£ç†è®¾ç½®æ­£ç¡®</li>
<li>å®‰è£…è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œå¯ä»¥å°è¯•åˆ‡æ¢ä¸åŒçš„é•œåƒæº</li>
<li>å®‰è£…å®Œæˆåå»ºè®®é‡å¯ç»ˆç«¯ä½¿é…ç½®ç”Ÿæ•ˆ</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 å¹´ PHP å¼€å‘è€…è¿›é˜¶ å¿«é€Ÿé«˜æ•ˆå¼€å‘å­¦ä¹ ä¹ æƒ¯]]></title>    <link>https://juejin.cn/post/7589838714450657321</link>    <guid>https://juejin.cn/post/7589838714450657321</guid>    <pubDate>2025-12-31T23:48:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589838714450657321" data-draft-id="7589838714450640937" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026 å¹´ PHP å¼€å‘è€…è¿›é˜¶ å¿«é€Ÿé«˜æ•ˆå¼€å‘å­¦ä¹ ä¹ æƒ¯"/> <meta itemprop="keywords" content="PHP,åç«¯"/> <meta itemprop="datePublished" content="2025-12-31T23:48:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026 å¹´ PHP å¼€å‘è€…è¿›é˜¶ å¿«é€Ÿé«˜æ•ˆå¼€å‘å­¦ä¹ ä¹ æƒ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-31T23:48:29.000Z" title="Wed Dec 31 2025 23:48:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">2026 å¹´ PHP å¼€å‘è€…è¿›é˜¶ å¿«é€Ÿé«˜æ•ˆå¼€å‘å­¦ä¹ ä¹ æƒ¯</h2>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆ 2026 å¹´çš„è¿›é˜¶æ–¹å¼ä¸åŒäº†</h3>
<p>2026 å¹´ï¼Œæˆä¸ºæ›´å¥½çš„ PHP å¼€å‘è€…ï¼Œé çš„ä¸æ˜¯è®°ä½æ›´å¤šè¯­æ³•æŠ€å·§ï¼Œè€Œæ˜¯å…»æˆ<strong>å¤åˆ©ä¹ æƒ¯</strong>â€”â€”é‚£äº›å¯é‡å¤çš„å°å®è·µï¼Œæ¯å‘¨éƒ½åœ¨æ‚„æ‚„æ”¹å–„ä»£ç åº“ã€‚</p>
<p>è¡Œä¸šçš„æ–¹å‘å¾ˆæ˜ç¡®ï¼š</p>
<ul>
<li><strong>PHP å˜å¾—æ›´å…·è¡¨è¾¾åŠ›ã€æ›´å®‰å…¨</strong>ï¼ˆPHP 8.4 å’Œ 8.5 å¸¦æ¥çš„æ”¹è¿›ï¼Œæ—¥å¸¸å·¥ä½œä¸­éƒ½èƒ½æ„Ÿå—åˆ°ï¼‰</li>
<li><strong>å·¥å…·å˜å¾—æ›´ä¸¥æ ¼ï¼Œä¹Ÿæ›´æœ‰ä»·å€¼</strong>â€”â€”èƒ½æ•è·é‚£äº›ä¸€ç›´è®©æˆ‘ä»¬ä»˜å‡ºä»£ä»·çš„ç”Ÿäº§æ•…éšœï¼ˆç±»å‹é”™è¯¯ã€null å¤„ç†ã€ä¸å®‰å…¨çš„æ•°ç»„ã€ä¸å®Œæ•´çš„é‡æ„ï¼‰</li>
<li><strong>å®‰å…¨å’Œä¾›åº”é“¾æˆä¸ºå·¥ç¨‹åŸºç¡€</strong>ï¼Œä¸å†æ˜¯æŸä¸ªç‹¬ç«‹éƒ¨é—¨çš„äº‹ï¼ˆComposer audit å’Œ OWASP æ€ç»´å·²ç»æ˜¯å¸¸è§è¯æ±‡ï¼‰</li>
</ul>
<p>æ‰€ä»¥ 2026 å¹´çš„è¿›é˜¶å…¬å¼ä¸æ˜¯åŠ±å¿—æµ·æŠ¥ï¼Œè€Œæ˜¯ä¸€å¥—ä¹ æƒ¯ï¼š</p>
<ul>
<li>å‡å°‘æ„å¤–</li>
<li>ç¼©çŸ­åé¦ˆå¾ªç¯</li>
<li>è®©æ­£ç¡®æ€§æ¯”èªæ˜æ›´å®¹æ˜“</li>
</ul>
<p>æ¥ä¸‹æ¥ä»‹ç»çœŸæ­£æœ‰æ•ˆçš„ä¹ æƒ¯â€”â€”ä¸æ˜¯çº¸ä¸Šè°ˆå…µã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2026-01%2Flevel-up-php-developer-high-impact-habits" target="_blank" title="https://catchadmin.com/post/2026-01/level-up-php-developer-high-impact-habits" ref="nofollow noopener noreferrer">åŸæ–‡ 2026 å¹´ PHP å¼€å‘è€…è¿›é˜¶ å¿«é€Ÿé«˜æ•ˆå¼€å‘å­¦ä¹ ä¹ æƒ¯</a></p>
<h3 data-id="heading-2">ä¹ æƒ¯ 1ï¼šæŠŠå‡çº§å½“ä½œæ¯å‘¨ç»´æŠ¤ï¼Œåˆ«ç­‰åˆ°å¹´åº•ææ…Œ</h3>
<p>PHP 8.5 äº 2025 å¹´ 11 æœˆ 20 æ—¥å‘å¸ƒï¼ŒåŒ…å«ç®¡é“æ“ä½œç¬¦ã€URI æ‰©å±•ã€å…‹éš†æ—¶ä¿®æ”¹å±æ€§ç­‰æ”¹è¿›å¼€å‘ä½“éªŒçš„åŠŸèƒ½ã€‚</p>
<p>PHP 8.4 å¼•å…¥äº†å±æ€§é’©å­å’Œéå¯¹ç§°å¯è§æ€§â€”â€”éƒ½èƒ½å‡å°‘æ ·æ¿ä»£ç ï¼Œé™ä½æ„å¤–ä¿®æ”¹çš„é£é™©ã€‚</p>
<p>å…·ä½“åŠŸèƒ½ä¸æ˜¯é‡ç‚¹ï¼Œé‡è¦çš„æ˜¯ä¿¡å·ï¼šç°ä»£ PHP è®©ä»£ç æ›´å®¹æ˜“åšåˆ°ï¼š</p>
<ul>
<li>æ˜ç¡®è¡¨è¾¾ä¸å˜é‡</li>
<li>éš¾ä»¥è¢«è¯¯ç”¨</li>
<li>å®‰å…¨é‡æ„</li>
</ul>
<h4 data-id="heading-3">å®ç”¨çš„å‡çº§ä¹ æƒ¯ï¼ˆå¯æ‰©å±•åˆ°å¤šä¸ªä»“åº“ï¼‰</h4>
<p>æ¯å‘¨ï¼ˆæˆ–æ¯ä¸¤å‘¨ï¼‰åšä¸€æ¬¡ç®€çŸ­çš„å‡çº§æ£€æŸ¥ï¼š</p>
<ol>
<li>å‡çº§ä¾èµ–çš„è¡¥ä¸ç‰ˆæœ¬</li>
<li>è¿è¡Œæµ‹è¯• + é™æ€åˆ†æ</li>
<li>æŒç»­å‘å¸ƒå°å‡çº§</li>
</ol>
<p>é¿å…"å…­ä¸ªæœˆä¾èµ–é›ªå´©"é˜»å¡çœŸæ­£çš„å·¥ä½œã€‚</p>
<p><strong>å…·ä½“æ­¥éª¤ï¼š</strong></p>
<p><strong>1. å›ºå®šå¹³å°ç‰ˆæœ¬ï¼Œè®© Composer åœ¨ä¸åŒæœºå™¨ä¸Šè§£æä¸€è‡´ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"require"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"php"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^8.3"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"config"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"platform"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"php"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"8.3.0"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>2. åœ¨ CI ä¸­æ·»åŠ "æœªæ¥ PHP"ç‰ˆæœ¬çš„ä»»åŠ¡ï¼Œæå‰å¤„ç†å…¼å®¹æ€§ï¼š</strong></p>
<ul>
<li>ä¿æŒä¸»è¿è¡Œæ—¶ç¨³å®š</li>
<li>æ·»åŠ ç¬¬äºŒä¸ªä»»åŠ¡ï¼Œåœ¨ä¸‹ä¸€ä¸ªå°ç‰ˆæœ¬ä¸Šè¿è¡Œæµ‹è¯•</li>
<li>é€æ­¥ä¿®å¤ä¸å…¼å®¹</li>
</ul>
<p><strong>3. è¯»å®˜æ–¹å‘å¸ƒè¯´æ˜ï¼Œåˆ«åªçœ‹åšå®¢æ‘˜è¦</strong></p>
<p>å®˜æ–¹ PHP 8.5 å’Œ 8.4 å‘å¸ƒå…¬å‘Šç®€çŸ­ä¸”å¯æ“ä½œã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¿™ä¸ªä¹ æƒ¯æœ‰ç”¨ï¼š</strong></p>
<p>ä¸å†æŠŠ"å­¦ä¹  PHP"å½“ä½œçç¢çŸ¥è¯†ï¼Œè€Œæ˜¯æŠŠå®ƒå½“ä½œä¸€ä¸ªæ´»è·ƒçš„è¿è¡Œæ—¶â€”â€”å®ƒä¼šæ”¹å˜å·¥ç¨‹çº¦æŸã€‚</p>
<h3 data-id="heading-4">ä¹ æƒ¯ 2ï¼šæŠŠ"æ•°æ®è¾¹ç•Œ"ä½œä¸ºé»˜è®¤æ¶æ„ç­–ç•¥</h3>
<p>å¤§å¤šæ•° PHP ç”Ÿäº§ bug éƒ½ä¸å¥‡ç‰¹ï¼Œé€šå¸¸æ˜¯ï¼š</p>
<ul>
<li>æ•°ç»„ç¼ºå°‘é”®</li>
<li>å­—ç¬¦ä¸²åº”è¯¥æ˜¯ int</li>
<li>å¯ç©ºå€¼æ²¡è¢«å½“ä½œå¯ç©ºå¤„ç†</li>
<li>"ä¸´æ—¶"è¾“å…¥æ ¼å¼å˜æˆäº†æ°¸ä¹…æ ¼å¼</li>
</ul>
<p>ä¿®å¤æ–¹æ³•æ— èŠä½†å¼ºå¤§ï¼š<strong>å°½æ—©æŠŠä¸å¯ä¿¡è¾“å…¥è½¬æ¢æˆç±»å‹åŒ–å¯¹è±¡ï¼Œåˆ«åœ¨ç³»ç»Ÿé‡Œä¼ åŸå§‹æ•°ç»„ã€‚</strong></p>
<h4 data-id="heading-5">ç®€å•çš„ DTO è¾¹ç•Œï¼ˆæ¡†æ¶æ— å…³ï¼‰</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);

<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CreateOrderInput</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$customerId</span>,
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> <span class="hljs-keyword">int</span> <span class="hljs-variable">$totalCents</span>,
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$currency</span>,
    </span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">$this</span>-&gt;customerId === <span class="hljs-string">''</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'customerId is required'</span>);
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">$this</span>-&gt;totalCents &lt;= <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'totalCents must be positive'</span>);
        }
        <span class="hljs-keyword">if</span> (!<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">'/^[A-Z]{3}$/'</span>, <span class="hljs-variable">$this</span>-&gt;currency)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'currency must be ISO-4217 like "USD"'</span>);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fromArray</span>(<span class="hljs-params"><span class="hljs-keyword">array</span> <span class="hljs-variable">$payload</span></span>): <span class="hljs-title">self</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">self</span>(
            customerId: (<span class="hljs-keyword">string</span>)(<span class="hljs-variable">$payload</span>[<span class="hljs-string">'customerId'</span>] ?? <span class="hljs-string">''</span>),
            totalCents: (<span class="hljs-keyword">int</span>)(<span class="hljs-variable">$payload</span>[<span class="hljs-string">'totalCents'</span>] ?? <span class="hljs-number">0</span>),
            currency: <span class="hljs-title function_ invoke__">strtoupper</span>(<span class="hljs-title function_ invoke__">trim</span>((<span class="hljs-keyword">string</span>)(<span class="hljs-variable">$payload</span>[<span class="hljs-string">'currency'</span>] ?? <span class="hljs-string">''</span>))),
        );
    }
}
</code></pre>
<p>æœåŠ¡å±‚ä¸ç”¨çŒœäº†ï¼Œæ¥æ”¶çš„æ˜¯ä¿è¯çš„ç»“æ„ã€‚</p>
<h4 data-id="heading-6">ç”¨æšä¸¾è¡¨ç¤º"å…è®¸çš„å€¼"ï¼Œåˆ«ç”¨æ³¨é‡Š</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);

<span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">OrderStatus</span>: <span class="hljs-title">string</span>
</span>{
    <span class="hljs-keyword">case</span> Created = <span class="hljs-string">'CREATED'</span>;
    <span class="hljs-keyword">case</span> Paid = <span class="hljs-string">'PAID'</span>;
    <span class="hljs-keyword">case</span> Cancelled = <span class="hljs-string">'CANCELLED'</span>;
}
</code></pre>
<p>è¿™æ ·å°±æ¶ˆé™¤äº†ï¼š</p>
<ul>
<li>æ— æ•ˆå­—ç¬¦ä¸²çŠ¶æ€</li>
<li>æ‹¼å†™é”™è¯¯ bug</li>
<li>ä¸€åŠçš„ <code>if ($status === '...')</code> æ··ä¹±</li>
</ul>
<h4 data-id="heading-7">æƒ³è¦"å¯è¯»ä½†ä¸å¯å†™"æ—¶ç”¨éå¯¹ç§°å¯è§æ€§</h4>
<p>PHP 8.4 çš„éå¯¹ç§°å¯è§æ€§éå¸¸é€‚åˆä¸åº”ä»å¤–éƒ¨ä¿®æ”¹çš„é¢†åŸŸå¯¹è±¡ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);

<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Shipment</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">private</span>(<span class="hljs-params">set</span>) <span class="hljs-keyword">string</span> <span class="hljs-variable">$status</span> = <span class="hljs-string">'CREATED'</span>,
    </span>) </span>{}

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">markInTransit</span>(<span class="hljs-params"/>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-variable language_">$this</span>-&gt;status = <span class="hljs-string">'IN_TRANSIT'</span>;
    }
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™ä¸ªä¹ æƒ¯æœ‰ç”¨ï¼š</strong></p>
<p>ä¸å†ä¾èµ–çºªå¾‹ï¼ˆ"è¯·ä¼ æ­£ç¡®çš„ç»“æ„"ï¼‰ï¼Œè€Œæ˜¯ä¾èµ–çº¦æŸï¼ˆ"ä¸æ­£ç¡®å°±å¿«é€Ÿå¤±è´¥"ï¼‰ã€‚</p>
<h3 data-id="heading-8">ä¹ æƒ¯ 3ï¼šæŠŠä¸å˜é‡æ”¾åœ¨å®ƒä¿æŠ¤çš„çŠ¶æ€æ—è¾¹</h3>
<p>å¾ˆå¤š PHP ä»£ç åº“é‡Œï¼ŒéªŒè¯æ˜¯åˆ†æ•£çš„ï¼š</p>
<ul>
<li>æ§åˆ¶å™¨éªŒè¯ä¸€ç‚¹</li>
<li>æœåŠ¡éªŒè¯ä¸€ç‚¹</li>
<li>ä»“å‚¨å†éªŒè¯ä¸€ç‚¹</li>
<li>ç”Ÿäº§ç¯å¢ƒè¿˜æ˜¯å‡ºç°"ä¸å¯èƒ½"çš„çŠ¶æ€</li>
</ul>
<p>PHP 8.4 å±æ€§é’©å­èƒ½åœ¨å±æ€§è®¿é—®æ—¶å¼ºåˆ¶æ‰§è¡Œè§„åˆ™ï¼Œä¸ç”¨å†™æ— å°½çš„ setter æ ·æ¿ã€‚</p>
<h4 data-id="heading-9">ç°å®çš„ä¸å˜é‡ï¼š"å·²ä»˜é‡‘é¢ä¸èƒ½è¶…è¿‡æ€»é¢"</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);

<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Money</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$currency</span>,
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> <span class="hljs-keyword">int</span> <span class="hljs-variable">$cents</span>,
    </span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">$this</span>-&gt;cents &lt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'Money cannot be negative'</span>);
        }
        <span class="hljs-keyword">if</span> (!<span class="hljs-title function_ invoke__">preg_match</span>(<span class="hljs-string">'/^[A-Z]{3}$/'</span>, <span class="hljs-variable">$this</span>-&gt;currency)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'Invalid currency'</span>);
        }
    }
}

<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Invoice</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> Money <span class="hljs-variable">$total</span>,
    </span>) </span>{}

    <span class="hljs-keyword">public</span> Money <span class="hljs-variable">$paid</span> {
        <span class="hljs-title function_ invoke__">set</span> (Money <span class="hljs-variable">$value</span>) {
            <span class="hljs-keyword">if</span> (<span class="hljs-variable">$value</span>-&gt;currency !== <span class="hljs-variable language_">$this</span>-&gt;total-&gt;currency) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'Currency mismatch'</span>);
            }
            <span class="hljs-keyword">if</span> (<span class="hljs-variable">$value</span>-&gt;cents &gt; <span class="hljs-variable language_">$this</span>-&gt;total-&gt;cents) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'Overpayment not allowed'</span>);
            }
            <span class="hljs-variable language_">$this</span>-&gt;paid = <span class="hljs-variable">$value</span>;
        }
    }
}
</code></pre>
<p><strong>æ³¨æ„ï¼š</strong> åˆ«ç”¨é’©å­éšè— IO æˆ–å‰¯ä½œç”¨ã€‚é’©å­ç”¨äºéªŒè¯å’Œè½¬æ¢ï¼›IO ä¿æŒæ˜¾å¼ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¿™ä¸ªä¹ æƒ¯æœ‰ç”¨ï¼š</strong></p>
<p>é¢†åŸŸè§„åˆ™æ›´éš¾ç»•è¿‡ï¼Œé‡æ„æ—¶æ›´å®¹æ˜“æ¨ç†ã€‚</p>
<h3 data-id="heading-10">ä¹ æƒ¯ 4ï¼šç”¨ç®¡é“æ“ä½œç¬¦è®©è½¬æ¢å¯è¯»</h3>
<p>PHP 8.5 åŒ…å«ç®¡é“æ“ä½œç¬¦ï¼Œæœ€é€‚åˆå¯é¢„æµ‹çš„å‘½åè½¬æ¢ã€‚</p>
<p>åœ¨è¯·æ±‚è§„èŒƒåŒ–ã€æ˜ å°„å’Œæ•°æ®å¡‘å½¢ä¸­ä¼šç«‹å³æ„Ÿå—åˆ°â€”â€”è¿™äº›åœ°æ–¹ PHP ä»£ç ç»å¸¸å˜æˆåµŒå¥—è°ƒç”¨æˆ–"ä¸´æ—¶å˜é‡æ±¤"ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">trimAll</span>(<span class="hljs-params"><span class="hljs-keyword">array</span> <span class="hljs-variable">$xs</span></span>): <span class="hljs-title">array</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">array_map</span>(<span class="hljs-string">'trim'</span>, <span class="hljs-variable">$xs</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dropEmpty</span>(<span class="hljs-params"><span class="hljs-keyword">array</span> <span class="hljs-variable">$xs</span></span>): <span class="hljs-title">array</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">array_values</span>(<span class="hljs-title function_ invoke__">array_filter</span>(<span class="hljs-variable">$xs</span>, fn(<span class="hljs-variable">$x</span>) =&gt; <span class="hljs-variable">$x</span> !== <span class="hljs-string">''</span>));
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">lower</span>(<span class="hljs-params"><span class="hljs-keyword">array</span> <span class="hljs-variable">$xs</span></span>): <span class="hljs-title">array</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">array_map</span>(fn(<span class="hljs-variable">$x</span>) =&gt; <span class="hljs-title function_ invoke__">strtolower</span>(<span class="hljs-variable">$x</span>), <span class="hljs-variable">$xs</span>);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">unique</span>(<span class="hljs-params"><span class="hljs-keyword">array</span> <span class="hljs-variable">$xs</span></span>): <span class="hljs-title">array</span> </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">array_values</span>(<span class="hljs-title function_ invoke__">array_unique</span>(<span class="hljs-variable">$xs</span>));
}

<span class="hljs-variable">$tags</span> = [<span class="hljs-string">'  PHP '</span>, <span class="hljs-string">''</span>, <span class="hljs-string">'Backend'</span>, <span class="hljs-string">'php'</span>, <span class="hljs-string">'backend '</span>];

<span class="hljs-variable">$normalized</span> = <span class="hljs-variable">$tags</span>
    |&gt; <span class="hljs-title function_ invoke__">trimAll</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">dropEmpty</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">lower</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">unique</span>(...);

<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$normalized</span>);
</code></pre>
<p><strong>ç»éªŒæ³•åˆ™ï¼š</strong> æ¯ä¸ªæ­¥éª¤èƒ½ç”¨ 2-4 ä¸ªè¯æ€»ç»“ï¼Œç®¡é“å°±æœ‰å¸®åŠ©ã€‚æ­¥éª¤éœ€è¦ä¸€æ®µè¯ï¼Œå°±åˆ«å†…è”ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¿™ä¸ªä¹ æƒ¯æœ‰ç”¨ï¼š</strong></p>
<p>æ„å›¾æ›´æ¸…æ™°ï¼Œå‡å°‘å®¡æŸ¥æ—¶é—´å’Œé‡æ„é£é™©ã€‚</p>
<h3 data-id="heading-11">ä¹ æƒ¯ 5ï¼šæŠŠé™æ€åˆ†æåŠ å…¥æ—¥å¸¸åé¦ˆå¾ªç¯</h3>
<p>é™æ€åˆ†ææ˜¯ PHP ä¸­æœ€å¯é çš„"æŠ€èƒ½å€å¢å™¨"ä¹‹ä¸€ã€‚åŸå› å¾ˆç®€å•ï¼šPHP çµæ´»ï¼Œçµæ´»æ€§å°±æ˜¯ bug è—èº«ä¹‹å¤„ã€‚</p>
<p>PHPStan 2.0 æ˜¯é‡è¦é‡Œç¨‹ç¢‘ï¼ˆ2024 å¹´å‘å¸ƒï¼Œ2025 å¹´å¹¿æ³›é‡‡ç”¨ï¼‰ã€‚</p>
<p>ä¸ç”¨é™æ€åˆ†æï¼Œå°±æ˜¯é€‰æ‹©åœ¨è¿è¡Œæ—¶å‘ç°æœ¬å¯ä»¥åœ¨ç¼–è¯‘æ—¶å‘ç°çš„é—®é¢˜ã€‚</p>
<h4 data-id="heading-12">ä¸ä¼šå¼•èµ·åæŠ—çš„é‡‡ç”¨ç­–ç•¥</h4>
<p>ä»èƒ½å®ç°çš„çº§åˆ«å¼€å§‹ï¼Œç„¶åæ”¶ç´§ã€‚</p>
<p>ç¤ºä¾‹ <code>phpstan.neon</code>ï¼š</p>
<pre><code class="hljs language-neon" lang="neon">parameters:
  level: 6
  paths:
    - src
  reportUnmatchedIgnoredErrors: true
</code></pre>
<p>åœ¨ CI ä¸­ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">vendor/bin/phpstan analyse --memory-limit=1G
</code></pre>
<p>ç„¶åè¿­ä»£ï¼š</p>
<ul>
<li><strong>çº§åˆ« 6</strong>ï¼šæ¸…ç†æ˜æ˜¾é—®é¢˜</li>
<li><strong>çº§åˆ« 7-8</strong>ï¼šå¼ºåˆ¶æ›´å¥½çš„ç±»å‹å’Œ null å¤„ç†</li>
<li><strong>çº§åˆ« 9-10</strong>ï¼šä»…åœ¨ä»£ç åº“å‡†å¤‡å¥½å</li>
</ul>
<h4 data-id="heading-13">æœ€é‡è¦çš„å®è·µï¼šç»™æ•°ç»„åŠ ç±»å‹</h4>
<p>æœªç±»å‹åŒ–çš„æ•°ç»„ä¼šè®©åˆ†æå¤±æ•ˆã€‚å°½å¯èƒ½ç”¨ DTOï¼Œæ•°ç»„ä¸å¯é¿å…æ—¶å°±æ³¨é‡Šï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-comment">/**
 * <span class="hljs-doctag">@return</span> array&lt;int, array{sku: string, qty: int}&gt;
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseItems</span>(<span class="hljs-params"><span class="hljs-keyword">array</span> <span class="hljs-variable">$payload</span></span>): <span class="hljs-title">array</span>
</span>{
    <span class="hljs-variable">$items</span> = [];
    <span class="hljs-keyword">foreach</span> ((<span class="hljs-variable">$payload</span>[<span class="hljs-string">'items'</span>] ?? []) <span class="hljs-keyword">as</span> <span class="hljs-variable">$row</span>) {
        <span class="hljs-variable">$items</span>[] = [
            <span class="hljs-string">'sku'</span> =&gt; (<span class="hljs-keyword">string</span>)(<span class="hljs-variable">$row</span>[<span class="hljs-string">'sku'</span>] ?? <span class="hljs-string">''</span>),
            <span class="hljs-string">'qty'</span> =&gt; (<span class="hljs-keyword">int</span>)(<span class="hljs-variable">$row</span>[<span class="hljs-string">'qty'</span>] ?? <span class="hljs-number">0</span>),
        ];
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$items</span>;
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¿™ä¸ªä¹ æƒ¯æœ‰ç”¨ï¼š</strong></p>
<p>å­¦ä¼šè¡¨è¾¾æ­£ç¡®æ€§çº¦æŸï¼Œå·¥å…·æˆä¸ºå§‹ç»ˆåœ¨çº¿çš„å®¡æŸ¥è€…ã€‚</p>
<h3 data-id="heading-14">ä¹ æƒ¯ 6ï¼šå†™ä¿æŠ¤ä¸šåŠ¡è§„åˆ™çš„æµ‹è¯•ï¼Œåˆ«åªè¿½æ±‚è¦†ç›–ç‡</h3>
<p>2026 å¹´ï¼Œæµ‹è¯•å·¥å…·ç»§ç»­ä¸ç°ä»£ PHP å¯¹é½ï¼š</p>
<ul>
<li>PHPUnit 11 éœ€è¦ PHP 8.2+</li>
<li>Pest 4 ç›®æ ‡ PHP 8.3+</li>
</ul>
<p>è¿™ä¸æ˜¯çäº‹ï¼Œæ˜¯ä¿¡å·ï¼šè¦ç”¨ç°ä»£æµ‹è¯•å·¥å…·ï¼Œè¿è¡Œæ—¶å¾—è·Ÿä¸Šã€‚</p>
<h4 data-id="heading-15">æµ‹ä»€ä¹ˆï¼ˆé«˜ ROI ç›®æ ‡ï¼‰</h4>
<p>æ—¶é—´æœ‰é™å°±æµ‹é‚£äº›å…³ä¹é‡‘é’±æˆ–ä¿¡ä»»çš„è§„åˆ™ï¼š</p>
<ul>
<li>æŠ˜æ‰£å’Œèˆå…¥</li>
<li>å¹‚ç­‰æ€§ï¼ˆé‡å¤æ”¯ä»˜è¯·æ±‚ï¼‰</li>
<li>æƒé™æ£€æŸ¥ï¼ˆè°èƒ½çœ‹åˆ°ä»€ä¹ˆï¼‰</li>
<li>å–æ¶ˆ/é€€æ¬¾çª—å£</li>
<li>åº“å­˜é¢„ç•™</li>
</ul>
<p>ä¸€ä¸ªèƒ½æ•è·çœŸå® bug çš„å°ä¾‹å­ï¼šèˆå…¥è¡Œä¸ºã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);

<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Discount</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">apply</span>(<span class="hljs-params"><span class="hljs-keyword">int</span> <span class="hljs-variable">$priceCents</span>, <span class="hljs-keyword">int</span> <span class="hljs-variable">$percent</span></span>): <span class="hljs-title">int</span>
    </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$percent</span> &lt; <span class="hljs-number">0</span> || <span class="hljs-variable">$percent</span> &gt; <span class="hljs-number">100</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'percent must be 0..100'</span>);
        }
        <span class="hljs-variable">$cut</span> = (<span class="hljs-keyword">int</span>) <span class="hljs-title function_ invoke__">round</span>(<span class="hljs-variable">$priceCents</span> * (<span class="hljs-variable">$percent</span> / <span class="hljs-number">100</span>));
        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">max</span>(<span class="hljs-number">0</span>, <span class="hljs-variable">$priceCents</span> - <span class="hljs-variable">$cut</span>);
    }
}
</code></pre>
<p>Pest é£æ ¼æµ‹è¯•ï¼ˆç´§å‡‘ä½†å¯è¯»ï¼‰ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);

<span class="hljs-title function_ invoke__">it</span>(<span class="hljs-string">'applies discount with correct rounding'</span>, function () {
    <span class="hljs-variable">$d</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Discount</span>();
    <span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-variable">$d</span>-&gt;<span class="hljs-title function_ invoke__">apply</span>(<span class="hljs-number">999</span>, <span class="hljs-number">10</span>))-&gt;<span class="hljs-title function_ invoke__">toBe</span>(<span class="hljs-number">899</span>); <span class="hljs-comment">// 99.9 rounds to 100</span>
    <span class="hljs-title function_ invoke__">expect</span>(<span class="hljs-variable">$d</span>-&gt;<span class="hljs-title function_ invoke__">apply</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">10</span>))-&gt;<span class="hljs-title function_ invoke__">toBe</span>(<span class="hljs-number">900</span>);
});

<span class="hljs-title function_ invoke__">it</span>(<span class="hljs-string">'rejects invalid percent'</span>, function () {
    <span class="hljs-variable">$d</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Discount</span>();
    <span class="hljs-title function_ invoke__">expect</span>(fn() =&gt; <span class="hljs-variable">$d</span>-&gt;<span class="hljs-title function_ invoke__">apply</span>(<span class="hljs-number">1000</span>, -<span class="hljs-number">1</span>))-&gt;<span class="hljs-title function_ invoke__">toThrow</span>(<span class="hljs-title class_">InvalidArgumentException</span>::<span class="hljs-variable language_">class</span>);
    <span class="hljs-title function_ invoke__">expect</span>(fn() =&gt; <span class="hljs-variable">$d</span>-&gt;<span class="hljs-title function_ invoke__">apply</span>(<span class="hljs-number">1000</span>, <span class="hljs-number">101</span>))-&gt;<span class="hljs-title function_ invoke__">toThrow</span>(<span class="hljs-title class_">InvalidArgumentException</span>::<span class="hljs-variable language_">class</span>);
});
</code></pre>
<h4 data-id="heading-16">ä¹ æƒ¯ä¸­çš„ä¹ æƒ¯ï¼šæŠŠè®¡ç®—å’Œ IO åˆ†å¼€</h4>
<p>ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®åº“è°ƒç”¨ã€HTTP è°ƒç”¨æ··åœ¨ä¸€èµ·ï¼Œæµ‹è¯•å°±å˜å¾—å›°éš¾ä¸”ç¼“æ…¢â€”â€”æ‰€ä»¥äººä»¬ä¸å†™äº†ã€‚</p>
<p>è¿›é˜¶åšæ³•æ˜¯ä¸ºè®¡ç®—å†™çº¯å‡½æ•°/æœåŠ¡ï¼ŒæŠŠ IO æ”¾åœ¨æ¥å£åé¢ã€‚è¿™ä¸æ˜¯"ä¼ä¸šæ¶æ„"ï¼Œæ˜¯å¯æµ‹è¯•æ€§ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¿™ä¸ªä¹ æƒ¯æœ‰ç”¨ï¼š</strong></p>
<p>å­¦ä¼šä¸ºæ­£ç¡®æ€§å’Œå¯ç»´æŠ¤æ€§è®¾è®¡ï¼Œè€Œä¸åªæ˜¯"è®©ç«¯ç‚¹å·¥ä½œ"ã€‚</p>
<h3 data-id="heading-17">ä¹ æƒ¯ 7ï¼šæŠŠä¾èµ–å«ç”Ÿå˜æˆä¸å¯åå•†çš„æ„å»ºæ­¥éª¤</h3>
<p>Composer çš„ <code>audit</code> å‘½ä»¤æ˜¯æœ€ç®€å•çš„èƒœåˆ©ä¹‹ä¸€ã€‚Composer æ–‡æ¡£è¯´å¾—å¾ˆæ¸…æ¥šï¼Œaudit ä¼šæ ¹æ®å…¬å‘Šæ£€æŸ¥å·²å®‰è£…çš„åŒ…ï¼ˆé»˜è®¤ç”¨ Packagistï¼‰ï¼Œç”¨é€€å‡ºä»£ç æ£€æµ‹åºŸå¼ƒçš„åŒ…ï¼Œå¯ä»¥åœ¨ CI ä¸­ç”¨ã€‚</p>
<h4 data-id="heading-18">åœ¨ CI ä¸­æ·»åŠ ï¼ˆåˆ«æŒ‡æœ›"æœ‰äººä¼šè¿è¡Œ"ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">composer install --no-interaction --no-progress --prefer-dist
composer audit --format=summary
</code></pre>
<h4 data-id="heading-19">ç”¨ Composer è„šæœ¬å˜æˆå¼€å‘è€…ä¹ æƒ¯</h4>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"check"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"composer validate --no-interaction"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"composer audit --format=summary"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"vendor/bin/phpstan analyse --memory-limit=1G"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"vendor/bin/phpunit"</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ç°åœ¨å¼€å‘è€…è¿è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">composer check
</code></pre>
<p>ä¸€ä¸ªå‘½ä»¤ï¼Œä¸€è‡´çš„ç»“æœã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¿™ä¸ªä¹ æƒ¯æœ‰ç”¨ï¼š</strong></p>
<p>æŠŠä¾›åº”é“¾é£é™©å½“ä½œå·¥ç¨‹è´¨é‡çš„ä¸€éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯"ç¨åå®‰å…¨éƒ¨é—¨çš„äº‹"ã€‚</p>
<h3 data-id="heading-20">ä¹ æƒ¯ 8ï¼šæŠŠ OWASP å½“æ€ç»´æ¨¡å‹ï¼Œåˆ«å½“åˆè§„æ¸…å•</h3>
<p>OWASP Top 10 æ˜¯é¢å‘å¼€å‘è€…çš„æ„è¯†åŸºçº¿ã€‚OWASP æŒ‡å‡ºï¼Œæœ€æ–°ç‰ˆæœ¬æ˜¯ OWASP Top 10:2026ã€‚</p>
<p>è®¿é—®æ§åˆ¶å¤±æ•ˆä»æ˜¯ä¸»è¦é£é™©ï¼ˆ2021 å¹´æ˜¯ A01ï¼Œ2026 å¹´è¿˜æ˜¯ A01ï¼‰ã€‚</p>
<p><strong>æ¢å¥è¯è¯´ï¼š</strong> æˆæƒé”™è¯¯ä»æ˜¯å‡ºäº‹æ•…æœ€å¿«çš„æ–¹å¼ä¹‹ä¸€ã€‚</p>
<h4 data-id="heading-21">æ¯å‘¨ä¹ æƒ¯ï¼šæ‰¾ä¸€ç±»è®¿é—®æ§åˆ¶ bug å¹¶æ¶ˆé™¤</h4>
<p>å¸¸è§æ¨¡å¼ï¼šæŒ‰ ID å–è®°å½•ï¼Œä¸é™å®šåˆ°å·²è®¤è¯ç”¨æˆ·/ç§Ÿæˆ·ã€‚</p>
<p><strong>ç³Ÿç³•çš„æ¨¡å¼ï¼š</strong></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$order</span> = <span class="hljs-variable">$repo</span>-&gt;<span class="hljs-title function_ invoke__">findById</span>((<span class="hljs-keyword">int</span>)<span class="hljs-variable">$_GET</span>[<span class="hljs-string">'orderId'</span>]);
</code></pre>
<p><strong>æ›´å¥½ï¼š</strong></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$userId</span> = <span class="hljs-variable">$auth</span>-&gt;<span class="hljs-title function_ invoke__">userId</span>();
<span class="hljs-variable">$orderId</span> = (<span class="hljs-keyword">int</span>)<span class="hljs-variable">$_GET</span>[<span class="hljs-string">'orderId'</span>];
<span class="hljs-variable">$order</span> = <span class="hljs-variable">$repo</span>-&gt;<span class="hljs-title function_ invoke__">findForUser</span>(<span class="hljs-variable">$orderId</span>, <span class="hljs-variable">$userId</span>);
<span class="hljs-keyword">if</span> (<span class="hljs-variable">$order</span> === <span class="hljs-literal">null</span>) {
    <span class="hljs-title function_ invoke__">http_response_code</span>(<span class="hljs-number">404</span>);
    <span class="hljs-keyword">exit</span>;
}
</code></pre>
<h4 data-id="heading-22">å¦ä¸€ä¸ªé«˜å½±å“ä¹ æƒ¯ï¼šåˆ°å¤„ç”¨é¢„å¤„ç†è¯­å¥</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$stmt</span> = <span class="hljs-variable">$pdo</span>-&gt;<span class="hljs-title function_ invoke__">prepare</span>(<span class="hljs-string">'SELECT * FROM users WHERE email = :email'</span>);
<span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">execute</span>([<span class="hljs-string">'email'</span> =&gt; <span class="hljs-variable">$email</span>]);
<span class="hljs-variable">$user</span> = <span class="hljs-variable">$stmt</span>-&gt;<span class="hljs-title function_ invoke__">fetch</span>();
</code></pre>
<p>ä¸ç”¨è®°ä½æ¯ä¸ª OWASP ç±»åˆ«ï¼ŒæŠŠå®ƒå½“è¦†ç›–åœ°å›¾ç”¨ï¼š</p>
<ul>
<li>è®¿é—®æ§åˆ¶</li>
<li>è¾“å…¥å¤„ç†</li>
<li>é…ç½®é”™è¯¯</li>
<li>ä¾›åº”é“¾æ•…éšœ</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆè¿™ä¸ªä¹ æƒ¯æœ‰ç”¨ï¼š</strong></p>
<p>æŠŠå®‰å…¨æœ¬èƒ½ç›´æ¥æ„å»ºåˆ°å®ç°å†³ç­–é‡Œã€‚</p>
<h3 data-id="heading-23">ä¹ æƒ¯ 9ï¼šæŠŠå¯è§‚æµ‹æ€§å½“ä»£ç ç‰¹æ€§ï¼Œåˆ«åªå½“åŸºç¡€è®¾æ–½</h3>
<p>å¤§å¤šæ•°å·¥ç¨‹å¸ˆåªåœ¨å‡ºé—®é¢˜åæ‰å…³å¿ƒæ—¥å¿—ï¼Œè¿™æ˜¯å€’ç€æ¥çš„ã€‚</p>
<p>è¿›é˜¶ä¹ æƒ¯æ˜¯ç»™é‡è¦ä»£ç è·¯å¾„åŠ ä»ªè¡¨ï¼š</p>
<ul>
<li>è®¤è¯äº‹ä»¶</li>
<li>æ”¯ä»˜çŠ¶æ€è½¬æ¢</li>
<li>å¤–éƒ¨ API è°ƒç”¨</li>
<li>é‡è¯•å’Œå›é€€</li>
<li>"ä¸å¯èƒ½"çš„åˆ†æ”¯</li>
</ul>
<h4 data-id="heading-24">æœ€å°çš„ç»“æ„åŒ–æ—¥å¿—æ¨¡å¼ï¼ˆPSR-3 é£æ ¼ï¼‰</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-variable">$logger</span>-&gt;<span class="hljs-title function_ invoke__">info</span>(<span class="hljs-string">'payment.authorize.started'</span>, [
    <span class="hljs-string">'order_id'</span> =&gt; <span class="hljs-variable">$orderId</span>,
    <span class="hljs-string">'provider'</span> =&gt; <span class="hljs-string">'stripe'</span>,
    <span class="hljs-string">'idempotency_key'</span> =&gt; <span class="hljs-variable">$key</span>,
]);

<span class="hljs-keyword">try</span> {
    <span class="hljs-variable">$res</span> = <span class="hljs-variable">$gateway</span>-&gt;<span class="hljs-title function_ invoke__">authorize</span>(<span class="hljs-variable">$command</span>);
    <span class="hljs-variable">$logger</span>-&gt;<span class="hljs-title function_ invoke__">info</span>(<span class="hljs-string">'payment.authorize.ok'</span>, [
        <span class="hljs-string">'order_id'</span> =&gt; <span class="hljs-variable">$orderId</span>,
        <span class="hljs-string">'provider_ref'</span> =&gt; <span class="hljs-variable">$res</span>-&gt;reference,
    ]);
} <span class="hljs-keyword">catch</span> (<span class="hljs-built_in">Throwable</span> <span class="hljs-variable">$e</span>) {
    <span class="hljs-variable">$logger</span>-&gt;<span class="hljs-title function_ invoke__">error</span>(<span class="hljs-string">'payment.authorize.failed'</span>, [
        <span class="hljs-string">'order_id'</span> =&gt; <span class="hljs-variable">$orderId</span>,
        <span class="hljs-string">'error'</span> =&gt; <span class="hljs-variable">$e</span>-&gt;<span class="hljs-title function_ invoke__">getMessage</span>(),
        <span class="hljs-string">'exception'</span> =&gt; <span class="hljs-variable">$e</span>::<span class="hljs-variable language_">class</span>,
    ]);
    <span class="hljs-keyword">throw</span> <span class="hljs-variable">$e</span>;
}
</code></pre>
<h4 data-id="heading-25">äº‹æ•…æ—¶æœ‰å›æŠ¥çš„ä¹ æƒ¯ï¼šå…³è” ID</h4>
<ul>
<li>ä¼ å…¥è¯·æ±‚æœ‰å…³è” ID å¤´å°±é‡ç”¨</li>
<li>æ²¡æœ‰å°±ç”Ÿæˆä¸€ä¸ª</li>
<li>æ”¾åœ¨è¯¥è¯·æ±‚çš„æ¯ä¸ªæ—¥å¿—è¡Œé‡Œ</li>
</ul>
<p>æŠŠ"æˆ‘ä»¬æœ‰æ—¥å¿—"å˜æˆ"æˆ‘ä»¬èƒ½è¿½è¸ªå•ä¸ªç”¨æˆ·æ“ä½œ"ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¿™ä¸ªä¹ æƒ¯æœ‰ç”¨ï¼š</strong></p>
<p>å‡å°‘å¹³å‡ç†è§£æ—¶é—´ï¼ˆMTTUï¼‰ï¼Œä¸åªæ˜¯å¹³å‡æ¢å¤æ—¶é—´ã€‚</p>
<h3 data-id="heading-26">ä¹ æƒ¯ 10ï¼šæ€§èƒ½å·¥ä½œä»æµ‹é‡å¼€å§‹ï¼Œåˆ«çŒœ</h3>
<p>PHP ä¸­æ€§èƒ½é—®é¢˜é€šå¸¸æ¥è‡ªï¼š</p>
<ul>
<li>N+1 æ•°æ®åº“æŸ¥è¯¢</li>
<li>å¤§é‡åºåˆ—åŒ–/ååºåˆ—åŒ–</li>
<li>å¯¹å¤§æ•°æ®é›†çš„æ— ç•Œå¾ªç¯</li>
<li>æ˜‚è´µä»£ç è·¯å¾„ä¸­ç¼ºå°‘ç¼“å­˜</li>
</ul>
<p>é«˜å½±å“ä¹ æƒ¯æ˜¯æ¯å‘¨é€‰ä¸€ä¸ªç«¯ç‚¹åš"æ€§èƒ½é˜…è¯»"ï¼š</p>
<ul>
<li>å®ƒè¿è¡Œå¤šå°‘æŸ¥è¯¢ï¼Ÿ</li>
<li>å“åº”æœ‰å¤šå¤§ï¼Ÿ</li>
<li>p95 å»¶è¿Ÿæ˜¯å¤šå°‘ï¼Ÿ</li>
<li>åœ¨å¹¶å‘ä¸‹ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</li>
</ul>
<h4 data-id="heading-27">å®ç”¨çš„å¾®ä¼˜åŒ–ä¹ æƒ¯ï¼šæ¶ˆé™¤å¯é¿å…çš„åˆ†é…</h4>
<p>å¤„ç†å¤§æ•°æ®æ—¶ï¼Œç”Ÿæˆå™¨èƒ½å‡å°‘å†…å­˜å‹åŠ›ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@return</span> Generator&lt;int, array{sku: string, qty: int}&gt;
 */</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">streamItems</span>(<span class="hljs-params"><span class="hljs-keyword">iterable</span> <span class="hljs-variable">$rows</span></span>): <span class="hljs-title">Generator</span>
</span>{
    <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$rows</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$row</span>) {
        <span class="hljs-keyword">yield</span> [
            <span class="hljs-string">'sku'</span> =&gt; (<span class="hljs-keyword">string</span>)<span class="hljs-variable">$row</span>[<span class="hljs-string">'sku'</span>],
            <span class="hljs-string">'qty'</span> =&gt; (<span class="hljs-keyword">int</span>)<span class="hljs-variable">$row</span>[<span class="hljs-string">'qty'</span>],
        ];
    }
}
</code></pre>
<p>åˆ«æ··æ·†å¾®ä¼˜åŒ–å’ŒçœŸæ­£çš„èƒœåˆ©ã€‚çœŸæ­£çš„èƒœåˆ©é€šå¸¸æ˜¯æŸ¥è¯¢å¡‘å½¢å’Œç¼“å­˜ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¿™ä¸ªä¹ æƒ¯æœ‰ç”¨ï¼š</strong></p>
<p>å­¦ä¼šæŠŠä»£ç å†³ç­–å’Œç”Ÿäº§è¡Œä¸ºï¼ˆå»¶è¿Ÿã€ååé‡ã€æˆæœ¬ï¼‰è”ç³»èµ·æ¥ã€‚</p>
<h3 data-id="heading-28">ä¹ æƒ¯ 11ï¼šå»ºç«‹å¤åˆ©çš„ä¸ªäººå·¥ç¨‹å¾ªç¯</h3>
<p>å¼ºå¤§çš„å¼€å‘è€…ä¸é æƒ…ç»ªï¼Œé å¾ªç¯ï¼š</p>
<ol>
<li>æ”¹ç‚¹å°ä¸œè¥¿</li>
<li>å¿«é€Ÿæ‹¿åˆ°åé¦ˆ</li>
<li>é‡å¤</li>
</ol>
<p>2026 å¹´å¯¹ PHP æ•ˆæœå¥½çš„å¾ªç¯ï¼š</p>
<ul>
<li><strong>ç¼–ç å‰ï¼š</strong> å®šä¹‰è¾“å…¥/è¾“å‡ºå½¢çŠ¶ï¼ˆDTOã€æšä¸¾ã€å€¼å¯¹è±¡ï¼‰</li>
<li><strong>ç¼–ç æ—¶ï¼š</strong> ä¿æŒå‡½æ•°å°ï¼Œæ¸…æ™°å‘½åè½¬æ¢ï¼ˆç®¡é“æœ‰å¸®åŠ©ï¼‰</li>
<li><strong>æ¨é€å‰ï¼š</strong> è¿è¡Œ <code>composer check</code>ï¼ˆaudit + é™æ€åˆ†æ + æµ‹è¯•ï¼‰</li>
<li><strong>å®¡æŸ¥ä¸­ï¼š</strong> æ‰¾ä¸å˜é‡ã€è¾¹ç•Œã€è®¿é—®æ§åˆ¶å’Œ"å®‰é™çš„å¤æ‚æ€§"</li>
<li><strong>å‘å¸ƒåï¼š</strong> åœ¨é£é™©æ›´æ”¹çš„åœ°æ–¹åŠ æ—¥å¿—/æŒ‡æ ‡</li>
</ul>
<p>è¿™ä¸æ˜¯ä»ªå¼ï¼Œæ˜¯å‘å¸ƒç»å¾—èµ·æ—¶é—´è€ƒéªŒçš„ä»£ç çš„æ–¹å¼ã€‚</p>
<h3 data-id="heading-29">30 å¤©æå‡ PHP æ°´å¹³çš„è®¡åˆ’</h3>
<p>æƒ³è¦èƒ½å®é™…æ‰§è¡Œçš„ï¼Œè¿™æ ·åšï¼š</p>
<h4 data-id="heading-30">ç¬¬ 1 å‘¨ï¼šç°ä»£å·¥å…·åŸºçº¿</h4>
<ul>
<li>CI ä¸­åŠ  <code>composer audit</code></li>
<li>åŠ  PHPStan åœ¨é€‚åº¦çº§åˆ«å¹¶è®©å®ƒé€šè¿‡</li>
<li>åŠ  <code>composer check</code> è„šæœ¬ç”¨äºæœ¬åœ°è¿è¡Œ</li>
</ul>
<h4 data-id="heading-31">ç¬¬ 2 å‘¨ï¼šæ•°æ®è¾¹ç•Œå’Œä¸å˜é‡</h4>
<ul>
<li>ç»™ 2-3 ä¸ªå…³é”®ç«¯ç‚¹å¼•å…¥ DTO è¾¹ç•Œ</li>
<li>åœ¨ä¸€ä¸ªæ¨¡å—é‡Œç”¨æšä¸¾æ›¿æ¢å­—ç¬¦ä¸²çŠ¶æ€å­—æ®µ</li>
<li>åœ¨æ„é€ å‡½æ•°æˆ–å±æ€§é’©å­é‡ŒåŠ ä¸å˜é‡</li>
</ul>
<h4 data-id="heading-32">ç¬¬ 3 å‘¨ï¼šé‡è¦çš„æµ‹è¯•</h4>
<ul>
<li>ç»™é‡‘é’±/èˆå…¥/æŠ˜æ‰£æˆ–å…¶ä»–"ä¸šåŠ¡æ ¸å¿ƒ"åŠ æµ‹è¯•</li>
<li>è¿è¡Œæ—¶å…è®¸çš„è¯ï¼Œè½¬å‘ç°ä»£æµ‹è¯•åŸºçº¿ï¼ˆPHPUnit 11 / Pestï¼‰</li>
</ul>
<h4 data-id="heading-33">ç¬¬ 4 å‘¨ï¼šå®‰å…¨å’Œç”Ÿäº§åé¦ˆ</h4>
<ul>
<li>ç»™é¡¶çº§æ•æ„Ÿèµ„æºå®¡è®¡è®¿é—®æ§åˆ¶ï¼ˆOWASP A01 æ€ç»´ï¼‰</li>
<li>ç»™é£é™©æµç¨‹åŠ å…³è” ID + ç»“æ„åŒ–æ—¥å¿—</li>
<li>é€‰ä¸€ä¸ªç«¯ç‚¹å‡å°‘æŸ¥è¯¢æ•°é‡æˆ–æœ‰æ•ˆè´Ÿè½½å¤§å°</li>
</ul>
<p>æœˆåº•ä¼šæ³¨æ„åˆ°å¤åˆ©æ•ˆåº”ï¼šæ›´å°‘å›å½’ï¼Œæ›´å¿«å®¡æŸ¥ï¼Œæ›´æ¸…æ™°é‡æ„ã€‚</p>
<h3 data-id="heading-34">ç»“è®º</h3>
<p>ç°ä»£ PHPï¼ˆ8.4 å’Œ 8.5ï¼‰æä¾›äº†å‡å°‘æ ·æ¿ã€æé«˜è¡¨è¾¾åŠ›çš„å·¥å…·â€”â€”å±æ€§é’©å­ã€éå¯¹ç§°å¯è§æ€§ã€ç®¡é“æ“ä½œç¬¦ç­‰ã€‚</p>
<p>ä½†è¿™äº›å·¥å…·åªæœ‰åœ¨ä¹ æƒ¯åˆ›å»ºçš„ç³»ç»Ÿä¸­æ‰é‡è¦ï¼š</p>
<ul>
<li>è¾“å…¥å°½æ—©å˜æˆç±»å‹åŒ–æ•°æ®</li>
<li>ä¸å˜é‡é è¿‘çŠ¶æ€</li>
<li>åˆ†æå’Œæµ‹è¯•æŒç»­è¿è¡Œ</li>
<li>ä¾èµ–è‡ªåŠ¨å®¡è®¡</li>
<li>å®‰å…¨æ€ç»´æ˜¯å®ç°çš„ä¸€éƒ¨åˆ†</li>
<li>ç”Ÿäº§åé¦ˆåœ¨æ—¥å¿—å’ŒæŒ‡æ ‡é‡Œå¯è§</li>
</ul>
<p>çœŸå®å›¢é˜Ÿé‡Œçš„"è¿›é˜¶"å°±æ˜¯è¿™æ ·ï¼šä¸æ˜¯è‹±é›„å¼é‡æ„ï¼Œè€Œæ˜¯æ— èŠçš„ä¹ æƒ¯ï¼Œå¤åˆ©åˆ°ä»£ç åº“å˜å¾—æ›´å®¹æ˜“æ”¹å˜è€Œä¸æ˜¯ç ´åã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vite 3å®æˆ˜ï¼šæˆ‘ç”¨è¿™5ä¸ªä¼˜åŒ–æŠ€å·§è®©HMRæ„å»ºé€Ÿåº¦æå‡äº†40%]]></title>    <link>https://juejin.cn/post/7589881050769440802</link>    <guid>https://juejin.cn/post/7589881050769440802</guid>    <pubDate>2026-01-01T00:17:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589881050769440802" data-draft-id="7589893170387091456" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vite 3å®æˆ˜ï¼šæˆ‘ç”¨è¿™5ä¸ªä¼˜åŒ–æŠ€å·§è®©HMRæ„å»ºé€Ÿåº¦æå‡äº†40%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-01T00:17:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vite 3å®æˆ˜ï¼šæˆ‘ç”¨è¿™5ä¸ªä¼˜åŒ–æŠ€å·§è®©HMRæ„å»ºé€Ÿåº¦æå‡äº†40%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T00:17:18.000Z" title="Thu Jan 01 2026 00:17:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vite 3å®æˆ˜ï¼šæˆ‘ç”¨è¿™5ä¸ªä¼˜åŒ–æŠ€å·§è®©HMRæ„å»ºé€Ÿåº¦æå‡äº†40%</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œæ„å»ºå·¥å…·çš„æ€§èƒ½ç›´æ¥å½±å“å¼€å‘ä½“éªŒå’Œæ•ˆç‡ã€‚Vite 3ä½œä¸ºæ–°ä¸€ä»£çš„å‰ç«¯æ„å»ºå·¥å…·ï¼Œä»¥å…¶æå¿«çš„å†·å¯åŠ¨å’Œçƒ­æ¨¡å—æ›¿æ¢ï¼ˆHMRï¼‰é€Ÿåº¦èµ¢å¾—äº†å¹¿æ³›å…³æ³¨ã€‚ç„¶è€Œï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œéšç€ä»£ç é‡å’Œä¾èµ–çš„å¢åŠ ï¼ŒHMRçš„å“åº”æ—¶é—´å¯èƒ½ä¼šé€æ¸å˜æ…¢ã€‚æœ¬æ–‡å°†åˆ†äº«æˆ‘åœ¨ä¸€ä¸ªä¸­å‹é¡¹ç›®ä¸­é€šè¿‡5ä¸ªä¼˜åŒ–æŠ€å·§å°†HMRæ„å»ºé€Ÿåº¦æå‡40%çš„å®æˆ˜ç»éªŒï¼Œå¸Œæœ›èƒ½ä¸ºå¼€å‘è€…æä¾›æœ‰ä»·å€¼çš„å‚è€ƒã€‚</p>
<hr/>
<h3 data-id="heading-2">ä¸»ä½“</h3>
<h4 data-id="heading-3">1. ç†è§£Viteçš„HMRæœºåˆ¶</h4>
<p>åœ¨æ·±å…¥ä¼˜åŒ–ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ç†è§£Viteçš„HMRå·¥ä½œåŸç†ã€‚Viteåˆ©ç”¨æµè§ˆå™¨åŸç”ŸESæ¨¡å—ï¼ˆESMï¼‰çš„ç‰¹æ€§ï¼Œå®ç°äº†æŒ‰éœ€ç¼–è¯‘å’Œå³æ—¶æ›´æ–°ã€‚å…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li><strong>æŒ‰éœ€ç¼–è¯‘</strong>ï¼šä»…ç¼–è¯‘å½“å‰é¡µé¢æ‰€éœ€çš„æ¨¡å—ï¼Œè€Œéæ•´ä¸ªåº”ç”¨ã€‚</li>
<li><strong>åŸºäºESMçš„HMR</strong>ï¼šé€šè¿‡WebSocketä¸æµè§ˆå™¨é€šä¿¡ï¼Œå®ç°æ¨¡å—çš„çƒ­æ›¿æ¢ã€‚</li>
</ul>
<p>ç„¶è€Œï¼Œä»¥ä¸‹å› ç´ å¯èƒ½å¯¼è‡´HMRå˜æ…¢ï¼š</p>
<ul>
<li>ä¾èµ–é¢„æ„å»ºï¼ˆPre-bundlingï¼‰æœªä¼˜åŒ–</li>
<li>è¿‡å¤šçš„æ–‡ä»¶ç›‘å¬ï¼ˆFile Watcherï¼‰</li>
<li>æœªåˆç†é…ç½®ç¼“å­˜</li>
<li>æ’ä»¶æ€§èƒ½ç“¶é¢ˆ</li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘å°†ä»‹ç»5ä¸ªå…·ä½“ä¼˜åŒ–ç‚¹åŠå…¶æ•ˆæœã€‚</p>
<hr/>
<h4 data-id="heading-4">2. ä¼˜åŒ–æŠ€å·§1ï¼šç²¾å‡†é…ç½®ä¾èµ–é¢„æ„å»º</h4>
<p>Viteåœ¨é¦–æ¬¡å¯åŠ¨æ—¶ä¼šä½¿ç”¨<code>esbuild</code>å¯¹<code>node_modules</code>ä¸­çš„ä¾èµ–è¿›è¡Œé¢„æ„å»ºï¼ˆPre-bundlingï¼‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒViteä¼šè‡ªåŠ¨æ‰«æ<code>import</code>è¯­å¥æ¥ç¡®å®šéœ€è¦é¢„æ„å»ºçš„ä¾èµ–é¡¹ï¼Œä½†è¿™ä¸€è¿‡ç¨‹å¯èƒ½ä¸å¤Ÿé«˜æ•ˆã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ³•ï¼š</strong></p>
<ol>
<li><strong>æ˜¾å¼æŒ‡å®šä¾èµ–é¡¹</strong>ï¼šåœ¨<code>vite.config.js</code>ä¸­é€šè¿‡<code>optimizeDeps.include</code>æ‰‹åŠ¨åˆ—å‡ºéœ€è¦é¢„æ„å»ºçš„ä¾èµ–é¡¹ï¼Œå‡å°‘æ‰«ææ—¶é—´ã€‚
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">optimizeDeps</span>: {
    <span class="hljs-attr">include</span>: [<span class="hljs-string">'react'</span>, <span class="hljs-string">'react-dom'</span>, <span class="hljs-string">'lodash-es'</span>],
  },
}
</code></pre>
</li>
<li><strong>æ’é™¤æ— éœ€é¢„æ„å»ºçš„åº“</strong>ï¼šæŸäº›åº“å·²ç»æ˜¯ESMæ ¼å¼ï¼ˆå¦‚<code>lodash-es</code>ï¼‰ï¼Œå¯ä»¥é€šè¿‡<code>optimizeDeps.exclude</code>è·³è¿‡é¢„æ„å»ºã€‚</li>
</ol>
<p><strong>æ•ˆæœï¼š</strong> HMRå“åº”æ—¶é—´å‡å°‘çº¦15%ã€‚</p>
<hr/>
<h4 data-id="heading-5">3. ä¼˜åŒ–æŠ€å·§2ï¼šå‡å°‘æ–‡ä»¶ç›‘å¬èŒƒå›´</h4>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒViteä¼šç›‘å¬é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å˜åŠ¨ä»¥è§¦å‘HMRã€‚ä½†åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œè¿™ä¼šå¸¦æ¥æ˜¾è‘—çš„å¼€é”€ã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ³•ï¼š</strong></p>
<ol>
<li><strong>é…ç½®å¿½ç•¥æ–‡ä»¶è§„åˆ™</strong>ï¼šé€šè¿‡<code>server.watch.ignored</code>æ’é™¤æ— å…³æ–‡ä»¶çš„ç›‘å¬ï¼ˆå¦‚<code>.git</code>, <code>dist</code>, <code>node_modules</code>ï¼‰ã€‚
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">server</span>: {
    <span class="hljs-attr">watch</span>: {
      <span class="hljs-attr">ignored</span>: [<span class="hljs-string">'**/node_modules/**'</span>, <span class="hljs-string">'**/.git/**'</span>],
    },
  },
}
</code></pre>
</li>
<li><strong>ä½¿ç”¨æ›´é«˜æ•ˆçš„ç›‘å¬åº“</strong>ï¼šåœ¨Linux/macOSç¯å¢ƒä¸‹å¯å¯ç”¨<code>usePolling: false</code>ä»¥æå‡æ€§èƒ½ã€‚</li>
</ol>
<p><strong>æ•ˆæœï¼š</strong> HMRå“åº”æ—¶é—´å‡å°‘çº¦8%ã€‚</p>
<hr/>
<h4 data-id="heading-6">4. ä¼˜åŒ–æŠ€å·§3ï¼šåˆç†åˆ©ç”¨ç¼“å­˜ç­–ç•¥</h4>
<p>Viteé»˜è®¤ä¼šå°†é¢„æ„å»ºçš„ä¾èµ–ç¼“å­˜åˆ°<code>node_modules/.vite/deps</code>ä¸­ã€‚ä½†åœ¨æŸäº›åœºæ™¯ä¸‹ï¼ˆå¦‚é¢‘ç¹åˆ‡æ¢åˆ†æ”¯ï¼‰ï¼Œç¼“å­˜å¯èƒ½å¤±æ•ˆæˆ–é‡å¤ç”Ÿæˆã€‚</p>
<p><strong>ä¼˜åŒ–æ–¹æ³•ï¼š</strong></p>
<ol>
<li><strong>æŒä¹…åŒ–ç¼“å­˜ä½ç½®</strong>ï¼šé€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡æ›´æ”¹ç¼“å­˜ç›®å½•ä»¥é¿å…é‡å¤ç”Ÿæˆã€‚
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">export</span> VITE_CACHE_DIR=/path/to/custom/cache
</code></pre>
</li>
<li><strong>å¼ºåˆ¶è·³è¿‡ç¼“å­˜æ£€æŸ¥</strong>: ï¼ˆä»…é™å¼€å‘ç¯å¢ƒï¼‰åœ¨è°ƒè¯•æ—¶é€šè¿‡å‘½ä»¤è¡Œå‚æ•°ç¦ç”¨ç¼“å­˜æ£€æŸ¥ä»¥èŠ‚çœæ—¶é—´ï¼š
<pre><code class="hljs language-bash" lang="bash">vite --force
</code></pre>
</li>
</ol>
<p>æ³¨æ„âš ï¸ ï¼šç”Ÿäº§ç¯å¢ƒåº”é¿å…è·³è¿‡ç¼“å­˜ä»¥ä¿è¯ä¸€è‡´æ€§ã€‚</p>
<hr/>
<p>####Â 5ï¼Â 4ï¼Â Optimization Technique #Â 4 : Fine-Tuning Plugin Performance</p>
<p>Plugins are powerful but can become bottlenecks if not optimized properly.For example,a poorly written plugin might block the main thread during compilation or introduce unnecessary transformations.To address this :</p>
<ul>
<li>
<p>Audit Your Plugins ï¼šDisable plugins one by one in development mode to identify performance bottlenecks.A common culprit is legacy plugin designed for Webpack that havenâ€™t been fully adapted to Viteâ€™s ESM-based pipeline.You may need alternatives like @rollup/plugin-babel instead of babel-loader.Moreover,vitest provides lighter-weight testing integration compared with Jest+transformersç»„åˆæ‹³æ”»å‡»åŠ›åè¶³ï¼</p>
</li>
<li>
<p>Lazy-Load Heavy Plugins ï¼šIf certain plugins are only needed during production builds (e.g.,@vitejs/plugin-legacy),load them conditionally based on process.env.NODE_ENV.This prevents them from slowing down HMR cycles unnecessarily ï¼š</p>
</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {    
<span class="hljs-attr">plugins</span>:[    
process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> ? <span class="hljs-title function_">legacy</span>() : <span class="hljs-literal">null</span>,    
],    
}     
</code></pre>
<p>Results showed ~10% improvement here alone after auditing three third-party plugins being used unnecessarily during devæ¨¡å¼ä¸‹çš„æˆ˜æ–—åœºæ™¯æ¿€çƒˆç¨‹åº¦å¯æƒ³è€ŒçŸ¥ï¼</p>
<hr/>
<p>####Â 6ï¼Â 5ï¼ Optimization Technique #5 : Parallelizing Tasks with Worker Threads</p>
<p>While esbuild handles most transforms efficiently via Goâ€™s parallelism,some tasks like TypeScript type checking can still block Node.jsâ€™ single-threaded event loop.To mitigate this,the following approaches were employed :</p>
<p>1.Use fork-ts-checker-webpack-plugin Alternative ï¼šIn Vite land,vitest provides worker-based type checking via poolOptions.<sup>[1]</sup> Alternatively,tsparticles(?)can be run as a separate process during development using Concurrently or similar tools without blocking HMR updates itself!</p>
<p>2.Optimize CSS Processing ï¼šFor projects with significant CSS splittingéœ€æ±‚,consider using lightning-css (written in Rust) over traditional PostCSS pipelines where possible.This reducedæ ·å¼è¡¨ç›¸å…³æ›´æ–°æ—¶é—´ç”±500msâ†’200mså·¦å³!</p>
<p>Final result was an additional7%,bringing total gains up to40%.Not bad for a few hoursâ€™ work!</p>
<hr/>
<h3 data-id="heading-7">Conclusion</h3>
<p>Through targeted optimizations spanning dependency management,file watching,caching strategies,and plugin configuration,I managed to reduce HMT build times by40%in our mid-sized React+TypeScript project.The key takeaway is that while Vites out-of-the-box experience is excellent,there remains ample room for customization depending on specific project needs and scale.For teams experiencing slowdowns during developmentå‘¨æœŸé•¿åº¦è¾ƒé•¿çš„æƒ…å†µä¸‹å°¤å…¶å€¼å¾—å°è¯•è¿™äº›æ–¹æ³•ä»¥æé«˜ç”Ÿäº§åŠ›æ°´å¹³ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¬¬2ç«  Nest.jså…¥é—¨]]></title>    <link>https://juejin.cn/post/7589881050769522722</link>    <guid>https://juejin.cn/post/7589881050769522722</guid>    <pubDate>2026-01-01T00:31:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589881050769522722" data-draft-id="7589893170387107840" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¬¬2ç«  Nest.jså…¥é—¨"/> <meta itemprop="keywords" content="å‰ç«¯,NestJS,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-01T00:31:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="XiaoYu2002"/> <meta itemprop="url" content="https://juejin.cn/user/251124329220663"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¬¬2ç«  Nest.jså…¥é—¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/251124329220663/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    XiaoYu2002
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-01T00:31:41.000Z" title="Thu Jan 01 2026 00:31:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å­¦ä¹ Nest.jså¯ä»¥é€šè¿‡å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.nestjs.com%2F" target="_blank" title="https://docs.nestjs.com/" ref="nofollow noopener noreferrer">Documentation | NestJS - A progressive Node.js framework</a>ã€‚Nestå®˜æ–¹æ–‡æ¡£å¦‚å›¾2-1æ‰€ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1105352608e74486b3d161b05e3bd0cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767832301&amp;x-signature=1I%2BPJDptMSilrHcrVRncgeKk3NQ%3D" alt="image-20251211155326802" loading="lazy"/></p>
<p align="center">
 <b> å›¾2-1 Nest.jså®˜æ–¹æ–‡æ¡£</b>
</p>
<p>è‹±æ–‡æŒæ¡è–„å¼±å¯é‡‡ç”¨å…¨æ–‡ç¿»è¯‘ä¸ºä¸­æ–‡æˆ–è€…åœ¨æµè§ˆå™¨æ‰©å±•ä¸­ä¸‹è½½æ’ä»¶â€œæ²‰æµ¸å¼ç¿»è¯‘ - ç½‘é¡µç¿»è¯‘æ’ä»¶ | PDFç¿»è¯‘ | å…è´¹"ï¼Œé…ç½®åï¼Œå¯é€šè¿‡å¿«æ·é”®è¿›è¡Œä¸­è‹±æ–‡å¯¹ç…§ç¿»è¯‘ï¼Œæ›´é€‚åˆé˜…è¯»ç†è§£ï¼Œå¦‚å›¾2-2æ‰€ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50018b37607e4292809072841f2b7774~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767832301&amp;x-signature=xBu7VRRYm8yTdxi3%2BkSnPa%2BnUDs%3D" alt="image-20251211224527050" loading="lazy"/></p>
<p align="center">
 <b> å›¾2-2 Nest.jså®˜æ–¹æ–‡æ¡£-å±€éƒ¨ç¿»è¯‘</b>
</p>
<p>å¦‚æœæ²¡æœ‰å­¦ä¹ è¿‡Nest.jsï¼Œç¬¬ä¸€ä¸ªç–‘æƒ‘æ˜¯å®ƒæ˜¯å¹²ä»€ä¹ˆçš„ï¼ŸNest.jsæ˜¯æä¾›HTTPæœåŠ¡çš„æ¡†æ¶ã€‚å¹¶ä¸”Nest.jsæ˜¯åŸºäºExpresså®ç°ï¼ˆå³Nest.jsåº•å±‚æ˜¯é»˜è®¤åŸºäºExpresså°è£…ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©Fastifyï¼‰ï¼Œå¹¶æ²¡æœ‰é‡‡ç”¨åŸç”Ÿå®ç°ã€‚</p>
<p>Expresså’ŒFastifyè¦å¦‚ä½•æŠ‰æ‹©ï¼ŸExpressé€‚åˆåšä¸šåŠ¡å±‚ï¼Œè€ŒFastifyé€‚åˆåšç½‘å…³å±‚ï¼Œæ ¹æ®è‡ªå·±å®é™…æƒ…å†µå†³å®šã€‚</p>
<h2 data-id="heading-0">2.1 å®‰è£…Nest.js</h2>
<p>å‡å¦‚ä½ ä»æœªä½¿ç”¨è¿‡Nest.jsï¼Œé‚£ä¹ˆç¬¬ä¸€æ­¥æ˜¯å…ˆé€šè¿‡å®˜æ–¹æ–‡æ¡£å®‰è£…NestJS å‘½ä»¤è¡Œå·¥å…·ï¼ˆCLIï¼‰ï¼Œå®‰è£…åå¯ä»¥åœ¨ç³»ç»Ÿçš„ä»»ä½•ç›®å½•ä¸‹ä½¿ç”¨nest å‘½ä»¤ã€‚é€šè¿‡win+Rç»„åˆå¿«æ·é”®å‘¼å‡ºè¿è¡Œçª—å£ï¼Œè¾“å…¥cmdè¿›å…¥ç»ˆç«¯ï¼Œå¤åˆ¶ä»¥ä¸‹å‘½ä»¤å›è½¦æ‰§è¡Œã€‚</p>
<p>Vue.js 2çš„ä¸»æµæ—¶æœŸä¹Ÿæ˜¯é‡‡ç”¨CLIçš„æ–¹å¼æ„å»ºé¡¹ç›®ï¼Œåç»­é€æ¸è¿ç§»åˆ°Viteä¸­ï¼Œè€ŒNestJSçš„CLIä½¿ç”¨æ–¹å¼å’Œè¿‡å¾€çš„CLIéƒ½æ˜¯ä¸€è‡´çš„ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//å…¨å±€å®‰è£… NestJS å‘½ä»¤è¡Œå·¥å…·ï¼ˆCLIï¼‰</span>
npm i -g <span class="hljs-meta">@nestjs</span>/cli
</code></pre>
<p>å®‰è£…ç»“æŸä¹‹åï¼Œé€šè¿‡nest --versionå‘½ä»¤æ£€æµ‹NestJS å‘½ä»¤è¡Œå·¥å…·æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå¦‚å›¾2-3æ‰€ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/170d63a46dc14437a2140f44723eb99b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767832301&amp;x-signature=dX1rTRIUFKUY%2BLPlz7AK8XdxZEQ%3D" alt="image-20251211160755034" loading="lazy"/></p>
<p align="center">
 <b> å›¾2-3 Nest.jså‘½ä»¤è¡Œå·¥å…·å®‰è£…</b>
</p>
<p>ç¬¬äºŒæ­¥å°±å¯ä»¥æ„å»ºä¸€ä¸ªNest.jsé¡¹ç›®ï¼Œé€šè¿‡åœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ„å»ºé¡¹ç›®ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// nest new &lt;é¡¹ç›®å&gt;</span>
nest <span class="hljs-keyword">new</span> app
</code></pre>
<p>ä¼šç”Ÿæˆå¦‚ä¸‹é—®é¢˜ï¼šWhich package manager would you â¤ï¸  to use?ï¼ˆæ‚¨å°†ä½¿ç”¨å“ªä¸ªåŒ…ç®¡ç†å™¨ï¼‰ï¼Œæœ‰npmã€yarnå’Œpnpmå¯é€‰ï¼Œæ¨èpnpmã€‚é¡¹ç›®æ„å»ºæˆåŠŸå¦‚å›¾2-4æ‰€ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b28e7778ab61463d8b8e098c4e32caa4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767832301&amp;x-signature=ah2GVBzRioqbnI8kOdK1%2BFdUfwo%3D" alt="image-20251211161804681" loading="lazy"/></p>
<p align="center">
 <b> å›¾2-4 Nest.jsæ„å»ºé¡¹ç›®</b>
</p>
<p>Nest.jsæ„å»ºçš„é¡¹ç›®ç»“æ„ç›®å½•å¦‚å›¾2-5æ‰€ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/caccdef48231442a8f1cbae77cc7b72c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767832301&amp;x-signature=1vxZFGNcyWDgeead1uhTgo%2BoQdQ%3D" alt="image-20251211162120635" loading="lazy"/></p>
<p align="center">
 <b> å›¾2-5 Nest.jsé¡¹ç›®ç»“æ„ç›®å½•</b>
</p>
<p>ä»ä¸Šå¾€ä¸‹è§£é‡Šåˆ†ä¸ºå››éƒ¨åˆ†ï¼š</p>
<p>ï¼ˆ1ï¼‰node_modulesæ–‡ä»¶å¤¹ï¼šå„ç§é¡¹ç›®ä¾èµ–åŒ…ï¼Œåœ¨æ„å»ºé¡¹ç›®æ—¶å°±è£…å¥½äº†ï¼Œæ— éœ€å†æ¬¡å®‰è£…ã€‚</p>
<p>ï¼ˆ2ï¼‰srcæ–‡ä»¶å¤¹ï¼šæºä»£ç å­˜æ”¾å¤„ã€‚</p>
<p>ï¼ˆ3ï¼‰testæ–‡ä»¶å¤¹ï¼šç«¯åˆ°ç«¯(E2E)æµ‹è¯•ç›®å½•ï¼Œè¿™ä¸ªä¸ç®¡ã€‚</p>
<p>ï¼ˆ4ï¼‰å„ç±»é…ç½®æ–‡ä»¶ã€‚</p>
<p>srcæ–‡ä»¶å¤¹ä¸‹æœ‰å››ä¸ªtsæ–‡ä»¶ï¼Œä½œç”¨å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts">â”œâ”€â”€ main.<span class="hljs-property">ts</span>                    <span class="hljs-comment">// åº”ç”¨å…¥å£æ–‡ä»¶</span>
â”œâ”€â”€ app.<span class="hljs-property">module</span>.<span class="hljs-property">ts</span>              <span class="hljs-comment">// æ ¹æ¨¡å—ï¼ˆAppModuleï¼‰</span>
â”œâ”€â”€ app.<span class="hljs-property">controller</span>.<span class="hljs-property">ts</span>          <span class="hljs-comment">// æ ¹æ§åˆ¶å™¨</span>
â”œâ”€â”€ app.<span class="hljs-property">service</span>.<span class="hljs-property">ts</span>             <span class="hljs-comment">// æ ¹æœåŠ¡</span>
â””â”€â”€ app.<span class="hljs-property">controller</span>.<span class="hljs-property">spec</span>.<span class="hljs-property">ts</span>     <span class="hljs-comment">// æ§åˆ¶å™¨å•å…ƒæµ‹è¯•</span>
</code></pre>
<p>é…ç½®æ–‡ä»¶æ€»ç»“å¦‚è¡¨1-1æ‰€ç¤ºã€‚</p>
<p align="center">
 <b> è¡¨1-1 Nest.jsé¡¹ç›®ç»“æ„-é…ç½®æ–‡ä»¶</b>
</p>







































































<table><thead><tr><th align="left">æ–‡ä»¶å</th><th align="left">ç±»å‹</th><th align="left">ä¸»è¦ä½œç”¨</th><th align="left">å…³è”å·¥å…·/æ¡†æ¶</th></tr></thead><tbody><tr><td align="left">package.json</td><td align="left">é¡¹ç›®é…ç½®</td><td align="left">å®šä¹‰é¡¹ç›®ä¾èµ–ã€è„šæœ¬å‘½ä»¤ã€åŸºæœ¬ä¿¡æ¯</td><td align="left">Node.js / npm</td></tr><tr><td align="left">package-lock.json</td><td align="left">ä¾èµ–é”</td><td align="left">é”å®šä¾èµ–ç‰ˆæœ¬ï¼Œç¡®ä¿ä¸€è‡´æ€§</td><td align="left">npm</td></tr><tr><td align="left">.gitignore</td><td align="left">å¿½ç•¥è§„åˆ™</td><td align="left">æŒ‡å®šå“ªäº›æ–‡ä»¶/ç›®å½•ä¸åº”æäº¤åˆ° Git</td><td align="left">Git</td></tr><tr><td align="left">.prettierrc</td><td align="left">ä»£ç æ ¼å¼åŒ–</td><td align="left">é…ç½®ä»£ç æ ¼å¼åŒ–è§„åˆ™ï¼ˆPrettierï¼‰</td><td align="left">Prettier</td></tr><tr><td align="left">eslint.config.mjs</td><td align="left">ä»£ç æ£€æŸ¥</td><td align="left">é…ç½® ESLint ä»£ç è´¨é‡æ£€æŸ¥è§„åˆ™</td><td align="left">ESLint</td></tr><tr><td align="left">nest-cli.json</td><td align="left">CLI é…ç½®</td><td align="left">NestJS å‘½ä»¤è¡Œå·¥å…·çš„é…ç½®æ–‡ä»¶</td><td align="left">NestJS CLI</td></tr><tr><td align="left">tsconfig.json</td><td align="left">TS é…ç½®</td><td align="left">TypeScript ç¼–è¯‘å™¨é…ç½®ï¼ˆå¼€å‘ç¯å¢ƒï¼‰</td><td align="left">TypeScript</td></tr><tr><td align="left">tsconfig.build.json</td><td align="left">TS æ„å»ºé…ç½®</td><td align="left">TypeScript ç”Ÿäº§æ„å»ºé…ç½®</td><td align="left">TypeScript / NestJS</td></tr><tr><td align="left">jest-e2e.json</td><td align="left">æµ‹è¯•é…ç½®</td><td align="left">ç«¯åˆ°ç«¯(E2E)æµ‹è¯•çš„ Jest é…ç½®</td><td align="left">Jest</td></tr><tr><td align="left">README.md</td><td align="left">æ–‡æ¡£</td><td align="left">é¡¹ç›®è¯´æ˜æ–‡æ¡£</td><td align="left">-</td></tr></tbody></table>
<p>ä»¥ä¸Šæ˜¯åˆå§‹åŒ–é¡¹ç›®çš„åŸºç¡€ä»‹ç»ã€‚</p>
<h2 data-id="heading-1">2.2 srcæ–‡ä»¶å¤¹å†…å®¹ä»‹ç»</h2>
<p>srcæ–‡ä»¶å¤¹ä¸‹çš„app.controller.spec.tså•å…ƒæµ‹è¯•æ–‡ä»¶åœ¨å¼€å‘ä¸­æ˜¯åŸºæœ¬ä¸ä¼šç”¨åˆ°çš„ï¼Œå› æ­¤åˆ é™¤è¯¥æ–‡ä»¶ã€‚æ¯æ¬¡æ‰“åŒ…æ„å»ºçš„æ—¶å€™éƒ½ä¼šé‡æ–°åˆ›å»ºè¯¥å•å…ƒæµ‹è¯•æ–‡ä»¶ï¼Œå› æ­¤æˆ‘ä»¬åœ¨nest-cli.jsoné…ç½®æ–‡ä»¶ä¸­æ·»åŠ generateOptionsé…ç½®é¡¹ï¼Œå°†specç½®ä¸ºfalseï¼Œåšå®Œä»¥ä¸Šæ“ä½œï¼Œæ„å»ºé¡¹ç›®å°±ä¸ä¼šé‡æ–°åˆ›å»ºapp.controller.spec.tsæ–‡ä»¶äº†ã€‚</p>
<pre><code class="hljs language-ts" lang="ts">{
  <span class="hljs-string">"$schema"</span>: <span class="hljs-string">"https://json.schemastore.org/nest-cli"</span>,
  <span class="hljs-string">"collection"</span>: <span class="hljs-string">"@nestjs/schematics"</span>,
  <span class="hljs-string">"sourceRoot"</span>: <span class="hljs-string">"src"</span>,
  <span class="hljs-string">"compilerOptions"</span>: {
    <span class="hljs-string">"deleteOutDir"</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-string">"generateOptions"</span>: {
    <span class="hljs-string">"spec"</span>: <span class="hljs-literal">false</span>
  }
}
</code></pre>
<p>æ­¤æ—¶srcæ–‡ä»¶å¤¹ä¸‹4ä¸ªæ–‡ä»¶çš„å…³è”æ€§å°±å¾ˆå¼ºï¼Œæ–‡ä»¶åŠŸèƒ½å¦‚ä¸‹4ç‚¹ï¼š</p>
<p>ï¼ˆ1ï¼‰app.controller.tsï¼šæ§åˆ¶å±‚ï¼Œç±»ä¼¼å‰ç«¯çš„è·¯ç”±ã€‚</p>
<p>ï¼ˆ2ï¼‰app.module.tsï¼šåè°ƒapp.controller.tså’Œapp.service.tsæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†app.module.tsæ–‡ä»¶ç†è§£ä¸ºä¾èµ–æ³¨å…¥çš„å®¹å™¨ï¼Œé€šè¿‡@Module()è£…é¥°å™¨å®ç°æ¨¡å—æ•´åˆã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//app.module.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.controller'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.service'</span>;

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">AppController</span>],
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">AppService</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}
</code></pre>
<p>ï¼ˆ3ï¼‰app.service.tsï¼šå…·ä½“ä¸šåŠ¡å®ç°ã€‚</p>
<p>ä»¥ä¸Š3ä¸ªæ–‡ä»¶å¤¹åˆ†å±‚å’ŒMVCæ¶æ„å…·å¤‡ä¸€å®šçš„ç›¸ä¼¼æ€§ï¼Œåªä¸è¿‡æ²¡æœ‰viewï¼ˆè§†å›¾å±‚ï¼‰ã€‚</p>
<p>ï¼ˆ4ï¼‰ main.tsï¼šåº”ç”¨å¯åŠ¨å…¥å£ï¼Œåˆ›å»ºåº”ç”¨å¹¶å®ç°åº”ç”¨çš„ç«¯å£ç›‘å¬ã€‚</p>
<p>é¡¹ç›®å¯åŠ¨å‘½ä»¤ä»package.jsonä¸­çš„scriptsé…ç½®é¡¹ä¸­æŸ¥çœ‹ï¼Œä½¿ç”¨npm run startæˆ–è€…npm run start:devéƒ½å¯ä»¥ã€‚å¯åŠ¨é¡¹ç›®ä¹‹ååˆ°main.tsæ–‡ä»¶ä¸­æŸ¥çœ‹å…·ä½“ç«¯å£ï¼ˆé»˜è®¤æ˜¯3000ç«¯å£ï¼‰ï¼Œç„¶ååˆ°æµè§ˆå™¨ä¸­è¾“å…¥<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000%2F%25E8%25BF%259B%25E8%25A1%258C%25E8%25AE%25BF%25E9%2597%25AE%25E3%2580%2582" target="_blank" title="http://localhost:3000/%E8%BF%9B%E8%A1%8C%E8%AE%BF%E9%97%AE%E3%80%82" ref="nofollow noopener noreferrer">http://localhost:3000/è¿›è¡Œè®¿é—®ã€‚</a></p>
<p>Nest.jsé¡¹ç›®å¯åŠ¨åå±•ç°çš„å†…å®¹æ˜¯æ¥è‡ªapp.service.tsæ–‡ä»¶çš„å…·ä½“ä¸šåŠ¡å†…å®¹ï¼Œå¦‚å›¾2-6æ‰€ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/782aa0cd544a4ab28026fa077a513b93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767832301&amp;x-signature=C069AlAR50oFnxcsktipDYZl2SM%3D" alt="image-20251211164534329" loading="lazy"/></p>
<p align="center">
 <b> å›¾2-6 Nest.jsé¡¹ç›®å¯åŠ¨-åˆå§‹åŒ–æ•ˆæœ</b>
</p>
<h2 data-id="heading-2">2.3 Nestå‘½ä»¤</h2>
<p>åœ¨ç»ˆç«¯è¾“å…¥Nest g --helpå°±å¯ä»¥å°†æ‰€æœ‰çš„nestå‘½ä»¤å¼¹å‡ºï¼Œå…¶ä¸­æœ‰äº›nestå‘½ä»¤å¯ç”¨äºåˆ›å»ºnestå…ƒç´ ï¼Œå³nestæ–‡ä»¶ï¼Œè¯¥éƒ¨åˆ†å‘½ä»¤æ€»ç»“å¦‚è¡¨1-2æ‰€ç¤ºã€‚</p>
<p align="center">
 <b> è¡¨1-2 Nest.jså‘½ä»¤è¡Œéƒ¨åˆ†å‘½ä»¤</b>
</p>









































































































<table><thead><tr><th align="left">åç§° (Name)</th><th align="left">åˆ«å (Alias)</th><th align="left">æè¿° (Description)</th></tr></thead><tbody><tr><td align="left"><strong>application</strong></td><td align="left">application</td><td align="left">ç”Ÿæˆä¸€ä¸ªæ–°çš„åº”ç”¨å·¥ä½œç©ºé—´</td></tr><tr><td align="left"><strong>class</strong></td><td align="left">cl</td><td align="left">ç”Ÿæˆä¸€ä¸ªæ–°çš„ç±»</td></tr><tr><td align="left"><strong>configuration</strong></td><td align="left">config</td><td align="left">ç”Ÿæˆ CLI é…ç½®æ–‡ä»¶</td></tr><tr><td align="left"><strong>controller</strong></td><td align="left">co</td><td align="left">ç”Ÿæˆæ§åˆ¶å™¨å£°æ˜</td></tr><tr><td align="left"><strong>decorator</strong></td><td align="left">d</td><td align="left">ç”Ÿæˆè‡ªå®šä¹‰è£…é¥°å™¨</td></tr><tr><td align="left"><strong>filter</strong></td><td align="left">f</td><td align="left">ç”Ÿæˆè¿‡æ»¤å™¨å£°æ˜</td></tr><tr><td align="left"><strong>gateway</strong></td><td align="left">ga</td><td align="left">ç”Ÿæˆç½‘å…³å£°æ˜ï¼ˆWebSocketï¼‰</td></tr><tr><td align="left"><strong>guard</strong></td><td align="left">gu</td><td align="left">ç”Ÿæˆå®ˆå«å£°æ˜</td></tr><tr><td align="left"><strong>interceptor</strong></td><td align="left">itc</td><td align="left">ç”Ÿæˆæ‹¦æˆªå™¨å£°æ˜</td></tr><tr><td align="left"><strong>interface</strong></td><td align="left">itf</td><td align="left">ç”Ÿæˆæ¥å£</td></tr><tr><td align="left"><strong>library</strong></td><td align="left">lib</td><td align="left">åœ¨ monorepo ä¸­ç”Ÿæˆæ–°çš„åº“</td></tr><tr><td align="left"><strong>middleware</strong></td><td align="left">mi</td><td align="left">ç”Ÿæˆä¸­é—´ä»¶å£°æ˜</td></tr><tr><td align="left"><strong>module</strong></td><td align="left">mo</td><td align="left">ç”Ÿæˆæ¨¡å—å£°æ˜</td></tr><tr><td align="left"><strong>pipe</strong></td><td align="left">pi</td><td align="left">ç”Ÿæˆç®¡é“å£°æ˜</td></tr><tr><td align="left"><strong>provider</strong></td><td align="left">pr</td><td align="left">ç”Ÿæˆæä¾›è€…å£°æ˜</td></tr><tr><td align="left"><strong>resolver</strong></td><td align="left">r</td><td align="left">ç”Ÿæˆ GraphQL è§£æå™¨å£°æ˜</td></tr><tr><td align="left"><strong>resource</strong></td><td align="left">res</td><td align="left">ç”Ÿæˆæ–°çš„ CRUD èµ„æº</td></tr><tr><td align="left"><strong>service</strong></td><td align="left">s</td><td align="left">ç”ŸæˆæœåŠ¡å£°æ˜</td></tr><tr><td align="left"><strong>sub-app</strong></td><td align="left">app</td><td align="left">åœ¨ monorepo ä¸­ç”Ÿæˆæ–°çš„å­åº”ç”¨</td></tr></tbody></table>
<p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨srcæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªxiaoyuæ¨¡å—ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°srcæ–‡ä»¶å¤¹ï¼Œåˆ›å»ºxiaoyuæ–‡ä»¶å¤¹ï¼Œåœ¨xiaoyuæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºxiaoyu.module.tsæ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨app.module.tsä¸­å°†XiaoyuModuleæ³¨å†Œåˆ°æ¨¡å—ä¸­ã€‚æ³¨æ„ï¼šæˆ‘ä»¬å¯ä»¥åœ¨@Module()è£…é¥°å™¨çš„importsé…ç½®é¡¹ä¸­å¯¼å…¥å…¶ä»–æ¨¡å—ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// app.module.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.controller'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.service'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">XiaoyuModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./xiaoyu/xiaoyu.module'</span>;

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">XiaoyuModule</span>],
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">AppController</span>],
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">AppService</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}

</code></pre>
<p>ä½†å¦‚æœé€šè¿‡å‘½ä»¤ï¼Œåªéœ€è¦åœ¨ç»ˆç«¯é€šè¿‡nest g mo xiaoyuå°±èƒ½è‡ªåŠ¨åŒ–çš„å®Œæˆä»¥ä¸Šæ“ä½œï¼ŒåŒ…æ‹¬è‡ªåŠ¨åœ¨app.module.tsæ–‡ä»¶ä¸­æ³¨å†Œæ¨¡å—ã€‚åœ¨ç»ˆç«¯ä¸­ä½“ç°ä¸ºæ–°å¢xiaoyu.module.tsæ–‡ä»¶ï¼Œæ”¹å˜app.module.tsæ–‡ä»¶ï¼Œå¦‚å›¾2-7æ‰€ç¤ºã€‚è¿™å¯ä»¥å‡å°‘æˆ‘ä»¬ä¸€å®šçš„å¿ƒæ™ºè´Ÿæ‹…ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be863d9d7b2f4e8b936a54cd55dc7f5d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767832301&amp;x-signature=tN6Drv8s90MrYEO3HzYT6X7E6Pc%3D" alt="image-20251211165629149" loading="lazy"/></p>
<p align="center">
 <b> å›¾2-7 nest g mo xiaoyuå‘½ä»¤æ•ˆæœ</b>
</p>
<p>é™¤äº†æ³¨å†Œæ¨¡å—ï¼Œè¿˜å¯ä»¥åˆ›å»ºserviceæœåŠ¡å±‚ï¼Œå‘½ä»¤ä¸ºï¼šnest g s xiaoyuï¼›åˆ›å»ºcontrolleræ§åˆ¶å±‚ï¼Œå‘½ä»¤ä¸ºï¼šnest g co xiaoyuã€‚å¦‚å›¾2-8æ‰€ç¤ºã€‚xiaoyu.controller.tså’Œxiaoyu.service.tsæ–‡ä»¶é€šè¿‡å‘½ä»¤ç”Ÿæˆåï¼Œä¼šè‡ªåŠ¨å…³è”åˆ°xiaoyu.module.tsæ–‡ä»¶ä¸­ï¼Œæ— éœ€å¼€å‘è€…é¢å¤–è¡¥å……æ“ä½œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04e75b1d3da14066b03add9ecafcf148~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767832301&amp;x-signature=rBPW3TRnchzWLNlaRC8X9C0un6s%3D" alt="image-20251211213027460" loading="lazy"/></p>
<p align="center">
 <b> å›¾2-8 nest g s/co xiaoyuå‘½ä»¤æ•ˆæœ</b>
</p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™äº›å‘½ä»¤éƒ½åœ¨ä¸€å®šç¨‹åº¦ä¸Šä½“ç°å¯¹åº”çš„åŠŸèƒ½ï¼Œä¾‹å¦‚åˆšæ‰ä¸‰ç‚¹ï¼Œå› æ­¤é€šè¿‡ç†è§£å…³è”å°±å¾ˆå®¹æ˜“è®°ä½ã€‚</p>
<p>ï¼ˆ1ï¼‰nest g mo &lt;æ¨¡å—åç§°&gt;=&gt; moduleï¼ˆæ¨¡å—ï¼‰ã€‚</p>
<p>ï¼ˆ2ï¼‰nest g s &lt;æœåŠ¡åç§°&gt;=&gt; serviceï¼ˆæœåŠ¡ï¼‰ã€‚</p>
<p>ï¼ˆ3ï¼‰nest g co &lt;æ§åˆ¶å™¨åç§°&gt;=&gt; controllerï¼ˆæ§åˆ¶ï¼‰ã€‚</p>
<p>ä½†å¸¸ç”¨çš„å‘½ä»¤æ“ä½œä¸»è¦ä¸ºï¼šnest g res &lt;æ¨¡å—åç§°&gt;ã€‚è¡¨1-2çš„è§£é‡Šæ˜¯ç”Ÿæˆå¢åˆ æ”¹æŸ¥çš„èµ„æºï¼Œå¬èµ·æ¥å¹¶ä¸å¥½ç†è§£ï¼Œå®é™…æ˜¯ç”Ÿæˆä¸€ä»½å®Œæ•´ç»“æ„çš„å¢åˆ æ”¹æŸ¥æ¨¡å—--Demoçº§åˆ«ã€‚</p>
<p>å½“æˆ‘ä»¬åœ¨ç»ˆç«¯è¾“å…¥è¯¥å‘½ä»¤ï¼šnest g res userï¼Œä¼šå¼¹å‡ºä¸€æ®µè¯What transport layer do you use?ï¼ˆä½ è¦ä½¿ç”¨å“ªç§ä¼ è¾“å±‚åè®®ï¼Ÿï¼‰ï¼Œç„¶åç»™å‡ºå¦‚ä¸‹5ç§é€‰æ‹©ï¼š</p>
<p>ï¼ˆ1ï¼‰REST APIã€‚é€šè¿‡ä¼ ç»Ÿçš„ HTTP è·¯ç”±æ–¹å¼æä¾›æ¥å£ï¼Œæ˜¯æœ€å¸¸ç”¨ã€æœ€ç›´è§‚çš„ Web æ¥å£é£æ ¼ã€‚</p>
<p>ï¼ˆ2ï¼‰GraphQLï¼ˆcode firstï¼‰ã€‚é€šè¿‡ä»£ç å®šä¹‰ GraphQL æ¶æ„ï¼Œè®©ç±»å‹å’Œè§£æé€»è¾‘éƒ½ç”±ä»£ç è‡ªåŠ¨ç”Ÿæˆã€‚ï¼ˆä¸å¥½ç”¨ï¼‰</p>
<p>ï¼ˆ3ï¼‰GraphQLï¼ˆschema firstï¼‰ã€‚å…ˆå†™ .graphql Schemaï¼Œå†æ ¹æ® Schema ç¼–å†™è§£æé€»è¾‘ï¼Œæ›´é€‚åˆè§„èŒƒåŒ–åä½œã€‚ï¼ˆä¸å¥½ç”¨ï¼‰</p>
<p>ï¼ˆ4ï¼‰Microserviceï¼ˆnon-HTTPï¼‰ã€‚å¾®æœåŠ¡ï¼Œé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—ã€TCPã€gRPC ç­‰æ–¹å¼å®ç°æœåŠ¡é—´é€šä¿¡ã€‚</p>
<p>ï¼ˆ5ï¼‰WebSocketsã€‚ç”¨äºåˆ›å»ºå®æ—¶ã€åŒå‘é€šä¿¡çš„é•¿è¿æ¥æœåŠ¡ï¼Œå¦‚èŠå¤©å®¤æˆ–å®æ—¶æ¨é€ã€‚</p>
<p>æˆ‘ä»¬é€‰æ‹©ç¬¬ä¸€ç§REST APIå°±å¯ä»¥äº†ã€‚</p>
<p>æ­¤æ—¶ä¼šå¼¹å‡ºç¬¬äºŒä¸ªé—®é¢˜ï¼šWould you like to generate CRUD entry points?ï¼ˆä½ æƒ³ç”Ÿæˆå¢åˆ æ”¹æŸ¥çš„æ¨¡æ¿å—ï¼Ÿï¼‰ï¼Œé€‰Yï¼ˆYesï¼‰ï¼Œç„¶åå°±ä¼šå¼€å§‹ç”Ÿæˆèµ„æºã€‚</p>
<p>nest g res userå‘½ä»¤æ•ˆæœå¦‚å›¾2-9æ‰€ç¤ºã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5261b3e8330a4887aff90bdc0d77731e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767832301&amp;x-signature=n%2F2s6RQ4v0I0t9zYjVbFeF7a0GI%3D" alt="image-20251211214834047" loading="lazy"/></p>
<p align="center">
 <b> å›¾2-9 nest g res userå‘½ä»¤æ•ˆæœ</b>
</p>
<p>å¯ä»¥çœ‹åˆ°è¯¥å‘½ä»¤ä¸€ä¸‹å°±åˆ›å»ºå‡ºcontrollerã€moduleã€serviceä¸‰å±‚æ–‡ä»¶ï¼ˆè‡ªåŠ¨åŒ–é…ç½®ï¼‰ï¼Œè¿™äº›æ–‡ä»¶å†…éƒ¨éƒ½ä¼šè‡ªåŠ¨åˆå§‹åŒ–ä¸€ä»½åŸºç¡€çš„ä»£ç ã€‚å…¶æ–‡ä»¶ä½œç”¨ä¸2.2å°èŠ‚æ‰€ä»‹ç»çš„srcæ–‡ä»¶å¤¹ä¸‹çš„ä¸‰ä¸ªåŒç±»å‹æ–‡ä»¶çš„ä½œç”¨æ˜¯ä¸€è‡´çš„ã€‚å› æ­¤å±•ç°çš„å†…å®¹åœ¨user.service.tsæ–‡ä»¶ä¸­ï¼Œè€Œè·¯ç”±åœ¨user.controller.tsæ–‡ä»¶ä¸­ã€‚æˆ‘ä»¬æ‰“å¼€user.controller.tsæ–‡ä»¶å¯ä»¥çœ‹åˆ°é»˜è®¤çš„getå’Œpostæ–¹æ³•ä»¥åŠä¸€äº›å‚æ•°æ–¹æ³•ã€‚</p>
<p>å¦‚æœæƒ³è¦æµ‹è¯•Patchï¼ŒDeleteç­‰è¯·æ±‚ï¼Œéœ€è¦åœ¨VSCodeä¸­ä¸‹è½½rest clientï¼Œç„¶ååœ¨testæµ‹è¯•æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºindex.httpæ–‡ä»¶ç”¨äºå‘é€å„ç§ä¸åŒçš„è¯·æ±‚æ¥æµ‹è¯•APIæ¥å£ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// user.controller.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span>, <span class="hljs-title class_">Post</span>, <span class="hljs-title class_">Body</span>, <span class="hljs-title class_">Patch</span>, <span class="hljs-title class_">Param</span>, <span class="hljs-title class_">Delete</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UserService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./user.service'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CreateUserDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./dto/create-user.dto'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">UpdateUserDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./dto/update-user.dto'</span>;

<span class="hljs-meta">@Controller</span>(<span class="hljs-string">'user'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> userService: UserService</span>) {} <span class="hljs-comment">// æ¥è‡ªä¸šåŠ¡å±‚çš„å±•ç¤ºå†…å®¹</span>

  <span class="hljs-meta">@Post</span>()
  <span class="hljs-title function_">create</span>(<span class="hljs-params"><span class="hljs-meta">@Body</span>() createUserDto: CreateUserDto</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userService</span>.<span class="hljs-title function_">create</span>(createUserDto);
  }

  <span class="hljs-meta">@Get</span>()
  <span class="hljs-title function_">findAll</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userService</span>.<span class="hljs-title function_">findAll</span>(); <span class="hljs-comment">// è§¦å‘é»˜è®¤getè¯·æ±‚åï¼Œè¿”å›ä¸šåŠ¡å±‚ä¸­çš„findAllæ–¹æ³•ä¸‹çš„å±•ç¤ºå†…å®¹ã€‚</span>
  }

  <span class="hljs-meta">@Get</span>(<span class="hljs-string">':id'</span>)
  <span class="hljs-title function_">findOne</span>(<span class="hljs-params"><span class="hljs-meta">@Param</span>(<span class="hljs-string">'id'</span>) id: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userService</span>.<span class="hljs-title function_">findOne</span>(+id);
  }

  <span class="hljs-meta">@Patch</span>(<span class="hljs-string">':id'</span>)
  <span class="hljs-title function_">update</span>(<span class="hljs-params"><span class="hljs-meta">@Param</span>(<span class="hljs-string">'id'</span>) id: <span class="hljs-built_in">string</span>, <span class="hljs-meta">@Body</span>() updateUserDto: UpdateUserDto</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userService</span>.<span class="hljs-title function_">update</span>(+id, updateUserDto);
  }

  <span class="hljs-meta">@Delete</span>(<span class="hljs-string">':id'</span>)
  <span class="hljs-title function_">remove</span>(<span class="hljs-params"><span class="hljs-meta">@Param</span>(<span class="hljs-string">'id'</span>) id: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">userService</span>.<span class="hljs-title function_">remove</span>(+id);
  }
}
</code></pre>
<p>å› æ­¤ï¼Œåªéœ€è¦åœ¨åŸæœ‰URLçš„åç¼€æ·»åŠ /userå°±èƒ½è®¿é—®åˆ°useræ¨¡å—ä¸‹çš„é»˜è®¤getè¯·æ±‚ï¼Œè€Œgetè¯·æ±‚çš„æ˜¯user.service.tsä¸šåŠ¡å±‚çš„å†…å®¹ï¼Œ/userè·¯ç”±è®¿é—®æ•ˆæœå¦‚å›¾2-10æ‰€ç¤ºã€‚åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±ç†è§£æ§åˆ¶å±‚å’Œä¸šåŠ¡å±‚ä¹‹é—´çš„è”ç³»åˆä½œï¼ˆåŒæ—¶åœ¨æ¨¡å—å±‚å¯¼å…¥æ³¨å†Œï¼‰ï¼Œå¹¶ä¸”å®Œæˆäº†ä¸€æ¬¡åŸºç¡€çš„æ¨¡å—åˆ›å»ºå¹¶å±•ç¤ºä½¿ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d748dd3fd4f149e183bd00d31b513105~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgWGlhb1l1MjAwMg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1767832301&amp;x-signature=E0HCjU4Vttw2NfH4lAS2JyBeQpw%3D" alt="image-20251211223437609" loading="lazy"/></p>
<p align="center">
 <b> å›¾2-10 /userè·¯ç”±çš„è®¿é—®æ•ˆæœ</b>
</p>
<p>é™¤æ­¤ä¹‹å¤–è¿˜æœ‰dtoå’Œentitiesä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œä¸¤ä¸ªæ–‡ä»¶å¤¹ä½œç”¨å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>ï¼ˆ1ï¼‰dtoæ–‡ä»¶å¤¹ï¼šæ•°æ®éªŒè¯å±‚ã€‚ä¸»è¦åŠŸèƒ½æœ‰ï¼šå®šä¹‰ API è¯·æ±‚ã€æ•°æ®éªŒè¯ï¼ˆä½¿ç”¨ class-validatorï¼‰ã€æ•°æ®è½¬æ¢ï¼ˆä½¿ç”¨ class-transformerï¼‰ç­‰ç­‰ã€‚å†…éƒ¨æœ‰create-user.dto.tså’Œupdate-user.dto.tsæ–‡ä»¶ï¼Œåˆ†åˆ«ç”¨æ¥åˆ›å»ºå’Œæ›´æ–°ç”¨æˆ·çš„DTOã€‚ä¾‹å¦‚æ•°æ®éªŒè¯çš„åšæ³•å¦‚ä¸‹ä»£ç æ‰€ç¤ºã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// create-user.dto.ts</span>
<span class="hljs-keyword">import</span> {<span class="hljs-title class_">IsNotEmpty</span>,<span class="hljs-title class_">IsString</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'class-validator'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateUserDto</span> {
    <span class="hljs-meta">@IsNotEmpty</span>() <span class="hljs-comment">// éªŒè¯-ä¸èƒ½ä¸ºç©º</span>
    <span class="hljs-meta">@IsString</span>() <span class="hljs-comment">// éªŒè¯-éœ€è¦æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span>
    <span class="hljs-attr">account</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// è´¦å·</span>
    <span class="hljs-meta">@IsNotEmpty</span>()
    <span class="hljs-meta">@IsString</span>()
    <span class="hljs-attr">password</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// å¯†ç </span>
}
</code></pre>
<p>ï¼ˆ2ï¼‰entitiesæ–‡ä»¶å¤¹ï¼šå®ä½“å±‚ã€‚å®šä¹‰æ•°æ®åº“çš„ï¼Œå³æ˜ å°„æ•°æ®åº“è¡¨ç»“æ„ï¼ˆORM æ¦‚å¿µï¼‰ï¼Œä½†æˆ‘ä»¬æ•°æ®åº“ä½¿ç”¨Prisma7ï¼Œæ‰€ä»¥ä¸åœ¨entitiesæ–‡ä»¶å¤¹å®šä¹‰ï¼Œè¿™é‡Œç”¨ä¸ä¸Šäº†ã€‚</p>
<p>æ‰€ä»¥nest g res &lt;æ¨¡å—åç§°&gt;åšåˆ°äº†nest g mo/s/co &lt;æ¨¡å—åç§°&gt;çš„åˆå¹¶æ•ˆæœå¹¶ä¸”è¿˜æœ‰é¢å¤–çš„æ•°æ®éªŒè¯å±‚å’Œå®ä½“å±‚ï¼Œå› æ­¤nest g resç›¸å¯¹äºè¿ç»­å†™3ä¸ªå‘½ä»¤æ¥åˆ›å»ºå¯¹åº”æ¨¡å—ç»“æ„ä¼šæ›´ä¸ºç®€ä¾¿ï¼Œåœ¨æ—¥å¸¸ä½¿ç”¨ä¼šæ›´åŠ é«˜é¢‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ Parallel.ForEachAsyncï¼šC#.NET å¹¶è¡Œè°ƒåº¦æ¨¡å‹æ­ç§˜]]></title>    <link>https://juejin.cn/post/7589893170387009536</link>    <guid>https://juejin.cn/post/7589893170387009536</guid>    <pubDate>2025-12-31T23:04:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589893170387009536" data-draft-id="7589881050769326114" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ Parallel.ForEachAsyncï¼šC#.NET å¹¶è¡Œè°ƒåº¦æ¨¡å‹æ­ç§˜"/> <meta itemprop="keywords" content="C#,.NET"/> <meta itemprop="datePublished" content="2025-12-31T23:04:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å”é’æ«"/> <meta itemprop="url" content="https://juejin.cn/user/3737995266234280"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ Parallel.ForEachAsyncï¼šC#.NET å¹¶è¡Œè°ƒåº¦æ¨¡å‹æ­ç§˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3737995266234280/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å”é’æ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-31T23:04:56.000Z" title="Wed Dec 31 2025 23:04:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ç®€ä»‹</h3>
<pre><code class="hljs language-csharp" lang="csharp">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ•°æ®æºæšä¸¾å™¨ â”‚  IEnumerable / IAsyncEnumerable
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¹¶å‘è°ƒåº¦å™¨ï¼ˆPumpï¼‰ â”‚  â† æ§åˆ¶æœ€å¤š N ä¸ªä»»åŠ¡
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ <span class="hljs-function"><span class="hljs-keyword">async</span> <span class="hljs-title">Body</span>(<span class="hljs-params">item</span>)   â”‚  â† å¼‚æ­¥é€»è¾‘
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®Œæˆ / å¼‚å¸¸ / å–æ¶ˆ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<ul>
<li>
<p>ä¸æ˜¯ä¸€æ¬¡æ€§å¯åŠ¨æ‰€æœ‰ä»»åŠ¡</p>
</li>
<li>
<p>æ˜¯ä¸€ä¸ª â€œè¾¹æ¶ˆè´¹ã€è¾¹æ‰§è¡Œã€è¾¹è¡¥ä½â€ çš„æ¨¡å‹</p>
</li>
</ul>
<h3 data-id="heading-1">æ ¸å¿ƒè®¾è®¡ç›®æ ‡</h3>
<blockquote>
<p>åœ¨å¼‚æ­¥åœºæ™¯ä¸‹ï¼Œç»´æŒå›ºå®šå¹¶å‘åº¦ï¼ŒæŒç»­æ¶ˆè€—æ•°æ®æºï¼Œç›´åˆ°å®Œæˆ</p>
</blockquote>





















<table><thead><tr><th>ç—›ç‚¹</th><th>ForEachAsync çš„è§£æ³•</th></tr></thead><tbody><tr><td>Task.WhenAll ä¸é™æµ</td><td>MaxDegreeOfParallelism</td></tr><tr><td>SemaphoreSlim æ¨¡æ¿ç¹ç</td><td>å†…å»º</td></tr><tr><td>async foreach è°ƒåº¦å¤æ‚</td><td>è‡ªåŠ¨å¤„ç†</td></tr></tbody></table>
<h3 data-id="heading-2">è°ƒåº¦æ¨¡å‹æ ¸å¿ƒï¼šæ»‘åŠ¨çª—å£ï¼ˆSliding Windowï¼‰</h3>
<h4 data-id="heading-3">å¹¶å‘åº¦ä¸æ˜¯â€œä¸€æ¬¡æ€§åˆ†é…â€</h4>
<p>å‡è®¾ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">MaxDegreeOfParallelism = <span class="hljs-number">3</span>
items = [A, B, C, D, E, F]
</code></pre>
<p>æ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-css" lang="css">å¯åŠ¨ <span class="hljs-selector-tag">A</span>  <span class="hljs-selector-tag">B</span>  C   ï¼ˆå æ»¡ <span class="hljs-number">3</span> ä¸ªæ§½ä½ï¼‰
      â”‚  â”‚  â”‚
      â”‚  â”‚  â””â”€ C å®Œæˆ â†’ å¯åŠ¨ D
      â”‚  â””â”€â”€â”€â”€ <span class="hljs-selector-tag">B</span> å®Œæˆ â†’ å¯åŠ¨ E
      â””â”€â”€â”€â”€â”€â”€â”€ <span class="hljs-selector-tag">A</span> å®Œæˆ â†’ å¯åŠ¨ F
</code></pre>
<p>è¿™å°±æ˜¯æ»‘åŠ¨çª—å£</p>
<p>ä»»ä½•æ—¶åˆ»ï¼š</p>
<ul>
<li>
<p>è¿è¡Œä¸­çš„ä»»åŠ¡ â‰¤ <code>MaxDegreeOfParallelism</code></p>
</li>
<li>
<p>æ°¸è¿œâ€œæœ‰ç©ºä½å°±è¡¥â€</p>
</li>
</ul>
<h3 data-id="heading-4">å†…éƒ¨ä¸æ˜¯ Parallel.Forï¼Œè€Œæ˜¯ Task æ³µ</h3>
<p>å…³é”®è®¤çŸ¥</p>
<blockquote>
<p>Parallel.ForEachAsync å¹¶æ²¡æœ‰å¤ç”¨ Parallel.For çš„çº¿ç¨‹åˆ‡åˆ†æ¨¡å‹</p>
</blockquote>
<p>åŸå› å¾ˆç®€å•ï¼š</p>
<ul>
<li>
<p><code>Parallel.For</code> â†’ åŒæ­¥ä»£ç  + çº¿ç¨‹</p>
</li>
<li>
<p><code>ForEachAsync</code> â†’ å¼‚æ­¥ä»£ç  + <code>continuation</code></p>
</li>
</ul>
<p>å†…éƒ¨æœ¬è´¨æ˜¯ä¸€ä¸ª <code>Task Pump</code>ï¼ˆä»»åŠ¡æ³µï¼‰</p>
<p>ä¼ªä»£ç çº§ç†è§£ï¼ˆé«˜åº¦ç®€åŒ–ï¼‰</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">async</span> Task <span class="hljs-title">RunAsync</span>()</span>
{
    <span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> enumerator = source.GetEnumerator();
    <span class="hljs-keyword">var</span> runningTasks = <span class="hljs-keyword">new</span> List&lt;Task&gt;();

    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)
    {
        <span class="hljs-keyword">while</span> (runningTasks.Count &lt; maxDegree &amp;&amp; enumerator.MoveNext())
        {
            <span class="hljs-keyword">var</span> item = enumerator.Current;
            runningTasks.Add(ProcessAsync(item));
        }

        <span class="hljs-keyword">if</span> (runningTasks.Count == <span class="hljs-number">0</span>)
            <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">var</span> finished = <span class="hljs-keyword">await</span> Task.WhenAny(runningTasks);
        runningTasks.Remove(finished);
    }
}
</code></pre>
<p>çœŸå®å®ç°æ›´å¤æ‚ï¼ˆå¼‚å¸¸ã€å–æ¶ˆã€<code>ValueTask</code>ã€<code>ExecutionContext</code>ï¼‰ï¼Œ</p>
<h3 data-id="heading-5">ä¸ºä»€ä¹ˆå®ƒå¤©ç„¶é€‚åˆ asyncï¼Œè€Œ Parallel.For ä¸è¡Œï¼Ÿ</h3>
<p>å¯¹æ¯”ä¸€ä¸‹ä¸¤è€…çš„â€œè°ƒåº¦å•ä½â€</p>

















<table><thead><tr><th>API</th><th>è°ƒåº¦å•ä½</th></tr></thead><tbody><tr><td>Parallel.For</td><td>çº¿ç¨‹ + åŒæ­¥å§”æ‰˜</td></tr><tr><td>ForEachAsync</td><td>Task / ValueTask</td></tr></tbody></table>
<p><code>async</code> çš„å…³é”®ç‰¹æ€§ï¼š</p>
<ul>
<li>
<p><code>await</code> ä¼š é‡Šæ”¾çº¿ç¨‹</p>
</li>
<li>
<p>ç»§ç»­æ‰§è¡Œé  <code>Continuation</code></p>
</li>
<li>
<p>ä¸ç»‘å®šå›ºå®šçº¿ç¨‹</p>
</li>
</ul>
<p>æ‰€ä»¥ <code>ForEachAsync</code>ï¼š</p>
<ul>
<li>
<p>ä¸å…³å¿ƒâ€œç”¨å“ªä¸ªçº¿ç¨‹â€</p>
</li>
<li>
<p>åªå…³å¿ƒâ€œåŒæ—¶æœ‰å¤šå°‘ä¸ªæœªå®Œæˆä»»åŠ¡â€</p>
</li>
</ul>
<h3 data-id="heading-6">æšä¸¾å™¨è®¿é—®æ˜¯ä¸²è¡Œçš„</h3>
<blockquote>
<p>æ•°æ®æºçš„æšä¸¾ï¼ˆMoveNextï¼‰æ˜¯ä¸²è¡Œçš„</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">items.GetEnumerator().MoveNext()
</code></pre>
<p>åªä¼šåœ¨ ä¸€ä¸ªè°ƒåº¦ä¸Šä¸‹æ–‡ ä¸­æ‰§è¡Œï¼Œä¸ä¼šå¹¶å‘è®¿é—®æšä¸¾å™¨ã€‚</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿ</p>
<ul>
<li>
<p><code>IEnumerable&lt;T&gt;</code> é»˜è®¤ ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</p>
</li>
<li>
<p>å¹¶å‘æšä¸¾ä¼šç›´æ¥ç‚¸</p>
</li>
</ul>
<p>æ‰€ä»¥ <code>ForEachAsync</code> çš„å¹¶è¡Œç‚¹åœ¨ï¼š</p>
<ul>
<li>
<p><code>Body</code> æ‰§è¡Œ</p>
</li>
<li>
<p>ä¸æ˜¯æšä¸¾é˜¶æ®µ</p>
</li>
</ul>
<h3 data-id="heading-7">å¼‚å¸¸ä¸å–æ¶ˆçš„è°ƒåº¦ç­–ç•¥</h3>
<h4 data-id="heading-8">å¼‚å¸¸æ¨¡å‹</h4>
<ul>
<li>
<p>ä»»æ„ä¸€ä¸ª <code>Body</code> æŠ›å¼‚å¸¸</p>
</li>
<li>
<p>ä¼šï¼š</p>
<ul>
<li>
<p>è¯·æ±‚å–æ¶ˆ</p>
</li>
<li>
<p>ç­‰å¾…å·²å¯åŠ¨ä»»åŠ¡ç»“æŸ</p>
</li>
<li>
<p>æœ€ç»ˆèšåˆæŠ›å‡ºå¼‚å¸¸</p>
</li>
</ul>
</li>
</ul>
<p>è¡Œä¸ºç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">await</span> Task.WhenAll(...)
</code></pre>
<h4 data-id="heading-9">CancellationToken ä¸æ˜¯â€œç¡¬ä¸­æ–­â€</h4>
<p><code>Token</code> è¢«å–æ¶ˆåï¼š</p>
<ul>
<li>
<p>ä¸å†å¯åŠ¨æ–°ä»»åŠ¡</p>
</li>
<li>
<p>å·²å¯åŠ¨ä»»åŠ¡ éœ€è¦è‡ªå·±å“åº” <code>ct</code></p>
</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">await</span> Parallel.ForEachAsync(items, <span class="hljs-keyword">async</span> (item, ct) =&gt;
{
    ct.ThrowIfCancellationRequested();
    <span class="hljs-keyword">await</span> DoAsync(item, ct);
});
</code></pre>
<h3 data-id="heading-10">ä¸ºä»€ä¹ˆè¿”å› ValueTask è€Œä¸æ˜¯ Taskï¼Ÿ</h3>
<p>åŸå› åªæœ‰ä¸€ä¸ªï¼šæ€§èƒ½</p>
<ul>
<li>
<p>Body å¾ˆå¯èƒ½ï¼š</p>
<ul>
<li>
<p>åŒæ­¥å®Œæˆ</p>
</li>
<li>
<p>å¿«é€Ÿå¤±è´¥</p>
</li>
</ul>
</li>
<li>
<p><code>ValueTask</code>ï¼š</p>
<ul>
<li>
<p>é¿å…ä¸å¿…è¦çš„ <code>Task</code> åˆ†é…</p>
</li>
<li>
<p>é™ä½ <code>GC</code> å‹åŠ›</p>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-11">å’Œ SemaphoreSlim æ‰‹å†™æ¨¡å‹çš„æœ¬è´¨å¯¹æ¯”</h3>
<p>æ‰‹å†™ç‰ˆæœ¬</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> sem = <span class="hljs-keyword">new</span> SemaphoreSlim(<span class="hljs-number">5</span>);

<span class="hljs-keyword">var</span> tasks = items.Select(<span class="hljs-keyword">async</span> item =&gt;
{
    <span class="hljs-keyword">await</span> sem.WaitAsync();
    <span class="hljs-keyword">try</span>
    {
        <span class="hljs-keyword">await</span> ProcessAsync(item);
    }
    <span class="hljs-keyword">finally</span>
    {
        sem.Release();
    }
});

<span class="hljs-keyword">await</span> Task.WhenAll(tasks);
</code></pre>
<p><code>ForEachAsync</code> å†…éƒ¨å…¶å®å°±æ˜¯ï¼š</p>
<ul>
<li>
<p><code>SemaphoreSlim</code> + <code>Task.WhenAny</code></p>
</li>
<li>
<p>åŠ ä¸Šï¼š</p>
<ul>
<li>
<p>æšä¸¾å®‰å…¨</p>
</li>
<li>
<p>å¼‚å¸¸èšåˆ</p>
</li>
<li>
<p>å–æ¶ˆä¼ æ’­</p>
</li>
<li>
<p><code>ExecutionContext</code> ç®¡ç†</p>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-12">ä»€ä¹ˆæ—¶å€™ä¸è¯¥ç”¨ Parallel.ForEachAsyncï¼Ÿ</h3>
<ul>
<li>
<p>å¼ºé¡ºåºä¾èµ–</p>
</li>
<li>
<p>éœ€è¦å¤æ‚ç”Ÿäº§è€…-æ¶ˆè´¹è€…å…³ç³»</p>
</li>
<li>
<p>éœ€è¦èƒŒå‹ã€ç¼“å†²åŒº</p>
</li>
<li>
<p>å¤šé˜¶æ®µæµæ°´çº¿</p>
</li>
</ul>
<p>è¿™äº›åœºæ™¯ç”¨ï¼š</p>
<ul>
<li>
<p><code>Channel</code></p>
</li>
<li>
<p><code>TPL Dataflow</code></p>
</li>
</ul>
<h3 data-id="heading-13">æ€»ç»“</h3>
<blockquote>
<p>Parallel.ForEachAsync = ä¸€ä¸ªä¸º async è®¾è®¡çš„ã€æ»‘åŠ¨çª—å£å¼çš„å¹¶å‘ä»»åŠ¡è°ƒåº¦å™¨</p>
</blockquote>
<p>å®ƒä¸æ˜¯é­”æ³•ï¼Œä¹Ÿä¸æ˜¯çº¿ç¨‹å¹¶è¡Œï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>
<p>æ§å¹¶å‘</p>
</li>
<li>
<p>è‡ªåŠ¨è¡¥ä½</p>
</li>
<li>
<p>èµ„æºå‹å¥½</p>
</li>
<li>
<p>å·¥ç¨‹å¯æ§</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ15ï¼‰Hibernateä¸­å¦‚ä½•å®šä¹‰ä¸€ä¸ªå®ä½“çš„ä¸»é”®ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7589838714450591785</link>    <guid>https://juejin.cn/post/7589838714450591785</guid>    <pubDate>2025-12-31T23:06:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7589838714450591785" data-draft-id="7589839433320792127" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ15ï¼‰Hibernateä¸­å¦‚ä½•å®šä¹‰ä¸€ä¸ªå®ä½“çš„ä¸»é”®ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-31T23:06:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ15ï¼‰Hibernateä¸­å¦‚ä½•å®šä¹‰ä¸€ä¸ªå®ä½“çš„ä¸»é”®ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-31T23:06:43.000Z" title="Wed Dec 31 2025 23:06:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-31
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Hibernateä¸­ï¼Œå®šä¹‰å®ä½“çš„ä¸»é”®æ˜¯éå¸¸é‡è¦çš„æ­¥éª¤ã€‚ä¸»é”®ç”¨äºå”¯ä¸€æ ‡è¯†æ•°æ®åº“è¡¨ä¸­çš„æ¯ä¸€è¡Œè®°å½•ã€‚æˆ‘ä»¬é€šå¸¸ä½¿ç”¨æ³¨è§£æ¥å®šä¹‰å®ä½“çš„ä¸»é”®ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„æ³¨è§£æ¥å®šä¹‰å®ä½“çš„ä¸»é”®ï¼š</p>
<ol>
<li><code>@Id</code>ï¼šæ ‡è®°å­—æ®µä¸ºå®ä½“çš„ä¸»é”®ã€‚</li>
<li><code>@GeneratedValue</code>ï¼šæŒ‡å®šä¸»é”®çš„ç”Ÿæˆç­–ç•¥ã€‚</li>
<li><code>@Column</code>ï¼šæŒ‡å®šæ•°æ®åº“è¡¨ä¸­åˆ—çš„è¯¦ç»†ä¿¡æ¯ã€‚</li>
</ol>
<h3 data-id="heading-0">ä¸»é”®ç”Ÿæˆç­–ç•¥</h3>
<p><code>@GeneratedValue</code>æ³¨è§£æœ‰å‡ ç§å¸¸ç”¨çš„ç”Ÿæˆç­–ç•¥ï¼š</p>
<ol>
<li><strong>AUTO</strong>ï¼šé»˜è®¤ç­–ç•¥ï¼ŒJPAæä¾›çš„ä¸»é”®ç”Ÿæˆæ–¹å¼ï¼Œä¾æ®åº•å±‚æ•°æ®åº“çš„ä¸åŒè‡ªåŠ¨é€‰æ‹©åˆé€‚çš„ç”Ÿæˆç­–ç•¥ã€‚</li>
<li><strong>IDENTITY</strong>ï¼šé‡‡ç”¨æ•°æ®åº“çš„è‡ªå¢é•¿å­—æ®µï¼Œå¦‚MySQLçš„AUTO_INCREMENTã€‚</li>
<li><strong>SEQUENCE</strong>ï¼šä½¿ç”¨æ•°æ®åº“çš„åºåˆ—ï¼Œä¸»è¦é€‚ç”¨äºOracleæ•°æ®åº“ã€‚</li>
<li><strong>TABLE</strong>ï¼šé€šè¿‡ä¸€å¼ è¡¨æ¥ç”Ÿæˆä¸»é”®ï¼Œè¯¥è¡¨é€šå¸¸ç”¨äºæ¨¡æ‹Ÿåºåˆ—ã€‚</li>
</ol>
<h3 data-id="heading-1">ç¤ºä¾‹ä»£ç </h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹ï¼Œé€šè¿‡ä¸åŒçš„ç”Ÿæˆç­–ç•¥æ¥å®šä¹‰å®ä½“çš„ä¸»é”®ã€‚</p>
<h4 data-id="heading-2">é…ç½®æ–‡ä»¶ <code>hibernate.cfg.xml</code></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±»é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Student"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-3">HibernateUtil ç±»</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä»é…ç½®æ–‡ä»¶åˆ›å»ºSessionFactory</span>
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            <span class="hljs-comment">// è®°å½•å¯åŠ¨å¤±è´¥çš„é”™è¯¯</span>
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SessionFactory <span class="hljs-title function_">getSessionFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sessionFactory;
    }
}
</code></pre>
<h4 data-id="heading-4">å®ä½“ç±» Student</h4>
<h5 data-id="heading-5">ä½¿ç”¨ AUTO ç”Ÿæˆç­–ç•¥</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.domain;

<span class="hljs-keyword">import</span> javax.persistence.Entity;
<span class="hljs-keyword">import</span> javax.persistence.GeneratedValue;
<span class="hljs-keyword">import</span> javax.persistence.GenerationType;
<span class="hljs-keyword">import</span> javax.persistence.Id;

<span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.AUTO)</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.age = age;
    }

    <span class="hljs-comment">// getters å’Œ setters</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> age;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.age = age;
    }
}
</code></pre>
<h5 data-id="heading-6">ä½¿ç”¨ IDENTITY ç”Ÿæˆç­–ç•¥</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.domain;

<span class="hljs-keyword">import</span> javax.persistence.Entity;
<span class="hljs-keyword">import</span> javax.persistence.GeneratedValue;
<span class="hljs-keyword">import</span> javax.persistence.GenerationType;
<span class="hljs-keyword">import</span> javax.persistence.Id;

<span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.age = age;
    }

    <span class="hljs-comment">// getters å’Œ setters</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> age;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.age = age;
    }
}
</code></pre>
<h5 data-id="heading-7">ä½¿ç”¨ SEQUENCE ç”Ÿæˆç­–ç•¥</h5>
<p>å¦‚æœä½¿ç”¨SEQUENCEç­–ç•¥ï¼Œéœ€è¦åœ¨æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªåºåˆ—ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> SEQUENCE student_seq <span class="hljs-keyword">START</span> <span class="hljs-keyword">WITH</span> <span class="hljs-number">1</span> INCREMENT <span class="hljs-keyword">BY</span> <span class="hljs-number">1</span>;
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.domain;

<span class="hljs-keyword">import</span> javax.persistence.Entity;
<span class="hljs-keyword">import</span> javax.persistence.GeneratedValue;
<span class="hljs-keyword">import</span> javax.persistence.GenerationType;
<span class="hljs-keyword">import</span> javax.persistence.Id;
<span class="hljs-keyword">import</span> javax.persistence.SequenceGenerator;

<span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "student_seq")</span>
    <span class="hljs-meta">@SequenceGenerator(name = "student_seq", sequenceName = "student_seq", allocationSize = 1)</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.age = age;
    }

    <span class="hljs-comment">// getters å’Œ setters</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> age;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.age = age;
    }
}
</code></pre>
<h5 data-id="heading-8">ä½¿ç”¨ TABLE ç”Ÿæˆç­–ç•¥</h5>
<p>å¦‚æœä½¿ç”¨TABLEç­–ç•¥ï¼Œéœ€è¦åœ¨æ•°æ®åº“ä¸­åˆ›å»ºä¸€ä¸ªä¸»é”®ç”Ÿæˆè¡¨ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> hibernate_sequences (
    sequence_name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    sequence_next_val <span class="hljs-type">BIGINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    <span class="hljs-keyword">PRIMARY</span> KEY (sequence_name)
);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> hibernate_sequences (sequence_name, sequence_next_val) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'student_seq'</span>, <span class="hljs-number">1</span>);
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.domain;

<span class="hljs-keyword">import</span> javax.persistence.Entity;
<span class="hljs-keyword">import</span> javax.persistence.GeneratedValue;
<span class="hljs-keyword">import</span> javax.persistence.GenerationType;
<span class="hljs-keyword">import</span> javax.persistence.Id;
<span class="hljs-keyword">import</span> javax.persistence.TableGenerator;

<span class="hljs-meta">@Entity</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.TABLE, generator = "student_gen")</span>
    <span class="hljs-meta">@TableGenerator(name = "student_gen", table = "hibernate_sequences", pkColumnName = "sequence_name",
                    valueColumnName = "sequence_next_val", pkColumnValue = "student_seq", allocationSize = 1)</span>
    <span class="hljs-keyword">private</span> Long id;
    
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> {}

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.age = age;
    }

    <span class="hljs-comment">// getters å’Œ setters</span>
    <span class="hljs-keyword">public</span> Long <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(Long id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> age;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> {
        <span class="hljs-built_in">this</span>.age = age;
    }
}
</code></pre>
<h3 data-id="heading-9">äº‹åŠ¡ç®¡ç†</h3>
<p>åœ¨è¿›è¡Œæ•°æ®åº“æ“ä½œæ—¶ï¼Œéœ€è¦å¼€å¯äº‹åŠ¡ï¼Œå¹¶åœ¨æ“ä½œå®Œæˆåæäº¤äº‹åŠ¡ã€‚å¦‚æœæ“ä½œå¤±è´¥ï¼Œåˆ™å›æ»šäº‹åŠ¡ä»¥ç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// è·å–SessionFactory</span>
        <span class="hljs-type">SessionFactory</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> HibernateUtil.getSessionFactory();
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;

        <span class="hljs-comment">// å‘æ•°æ®åº“æ·»åŠ ä¸€ä¸ªå¯¹è±¡</span>
        <span class="hljs-keyword">try</span> {
            session = sessionFactory.openSession();
            transaction = session.beginTransaction();

            <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"John Doe"</span>, <span class="hljs-number">20</span>);
            session.save(student);

            transaction.commit();
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-keyword">if</span> (session != <span class="hljs-literal">null</span>) {
                session.close();
            }
        }

        <span class="hljs-comment">// å…³é—­SessionFactory</span>
        sessionFactory.close();
    }
}
</code></pre>
<h3 data-id="heading-10">æ€»ç»“</h3>
<p>é€šè¿‡ä»¥ä¸Šç¤ºä¾‹ï¼Œå¯ä»¥çœ‹å‡ºHibernateæä¾›äº†å¤šç§ç­–ç•¥æ¥ç”Ÿæˆå®ä½“çš„ä¸»é”®ï¼ŒåŒ…æ‹¬<code>AUTO</code>ã€<code>IDENTITY</code>ã€<code>SEQUENCE</code>å’Œ<code>TABLE</code>ã€‚ä¸åŒçš„ç­–ç•¥é€‚ç”¨äºä¸åŒçš„æ•°æ®åº“å’Œåœºæ™¯ã€‚ç†è§£è¿™äº›ä¸»é”®ç”Ÿæˆç­–ç•¥ï¼Œå¹¶åœ¨å®é™…é¡¹ç›®ä¸­æ­£ç¡®åº”ç”¨ï¼Œå¯ä»¥æœ‰æ•ˆåœ°ç®¡ç†æ•°æ®åº“è¡¨ä¸­çš„ä¸»é”®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>