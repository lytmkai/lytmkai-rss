<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[åŸå‹æ±¡æŸ“å®‰å…¨æ¼æ´]]></title>    <link>https://juejin.cn/post/7591728734983012379</link>    <guid>https://juejin.cn/post/7591728734983012379</guid>    <pubDate>2026-01-05T15:59:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591728734983012379" data-draft-id="7591719013488394278" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸå‹æ±¡æŸ“å®‰å…¨æ¼æ´"/> <meta itemprop="keywords" content="å‰ç«¯,å¼ºåŒ–å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-05T15:59:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœ¨è¥¿å®‰æ”¾ç¾Šçš„ç‰›æ²¹æœ"/> <meta itemprop="url" content="https://juejin.cn/user/2946346894233133"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸå‹æ±¡æŸ“å®‰å…¨æ¼æ´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2946346894233133/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœ¨è¥¿å®‰æ”¾ç¾Šçš„ç‰›æ²¹æœ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T15:59:03.000Z" title="Mon Jan 05 2026 15:59:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚å¿µ</h2>
<p><strong>åŸå‹æ±¡æŸ“å®‰å…¨æ¼æ´ï¼ˆPrototype Pollutionï¼‰</strong> æ˜¯å‰ç«¯ / Node.js ç”Ÿæ€é‡Œéå¸¸é‡è¦ã€ä¹Ÿéå¸¸å®¹æ˜“è¢«å¿½ç•¥çš„ä¸€ç±»æ¼æ´ã€‚è¯¥æ¼æ´æœ€ç»ˆå¯å¯¼è‡´æƒé™ç»•è¿‡ï¼Œæ˜¯å‰ç«¯å®‰å…¨ä¸­çš„é«˜å±é—®é¢˜ã€‚</p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯åŸå‹æ±¡æŸ“ï¼Ÿ</h2>
<p>æ”»å‡»è€…é€šè¿‡å¯æ§è¾“å…¥ï¼Œä¿®æ”¹ <code>Object.prototype</code> æˆ–å…¶ä»–å†…å»ºåŸå‹ï¼Œä»è€Œå½±å“æ‰€æœ‰å¯¹è±¡çš„è¡Œä¸ºã€‚</p>
<p>JS åŸå‹é“¾</p>
<pre><code class="hljs language-javascript" lang="javascript">obj â†’ <span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span> â†’ <span class="hljs-literal">null</span>
</code></pre>
<p>ä¸€æ—¦æ±¡æŸ“äº† <code>Object.prototype</code></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">Object.prototype.isAdmin</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
({}).<span class="hljs-attr">isAdmin</span> === <span class="hljs-literal">true</span><span class="hljs-comment">; // ğŸ’£</span>
</code></pre>
<h2 data-id="heading-2">æ¨¡æ‹Ÿæ”»å‡»</h2>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€æ®µä»£ç æ¥åˆ†æä¸€ä¸‹ä»€ä¹ˆæ˜¯åŸå‹æ±¡æŸ“ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">deepMerge</span>(<span class="hljs-params">target, source</span>) { 
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> source) { 
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> source[key] === <span class="hljs-string">'object'</span>) { 
      <span class="hljs-keyword">if</span> (!target[key]) { 
        target[key] = {}; 
      } 
      <span class="hljs-title function_">deepMerge</span>(target[key], source[key]); 
    } <span class="hljs-keyword">else</span> { 
      target[key] = source[key]; 
    } 
  } 
  <span class="hljs-keyword">return</span> target; 
} 
 
<span class="hljs-comment">// æ¨¡æ‹Ÿä¸šåŠ¡ä»£ç  </span>
<span class="hljs-comment">// æ–¹æ¡ˆ1ï¼šç›‘å¬ message äº‹ä»¶ </span>
<span class="hljs-keyword">const</span> config = {}; 
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> { 
  <span class="hljs-title function_">deepMerge</span>(config, e.<span class="hljs-property">data</span>); 
}); 
 
<span class="hljs-comment">// æ–¹æ¡ˆ2ï¼šä½¿ç”¨ qs è§£æ query </span>
<span class="hljs-keyword">import</span> qs <span class="hljs-keyword">from</span> <span class="hljs-string">'qs'</span>; 
<span class="hljs-keyword">const</span> searchQuery = qs.<span class="hljs-title function_">parse</span>(location.<span class="hljs-property">search</span>); 
<span class="hljs-keyword">const</span> routeQuery = { 
  <span class="hljs-attr">type</span>: <span class="hljs-string">'low'</span>, 
  <span class="hljs-attr">tab</span>: <span class="hljs-number">1</span>, 
}; 
<span class="hljs-title function_">deepMerge</span>(routeQuery, searchQuery); 
 
 
<span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘ </span>
<span class="hljs-keyword">const</span> userInfo = {}; 
<span class="hljs-keyword">if</span> (userInfo.<span class="hljs-property">isAdmin</span>) { 
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä½ æ˜¯ç®¡ç†å‘˜'</span>); 
} 

 <span class="hljs-comment">// æˆ‘æƒ³æˆä¸ºç®¡ç†å‘˜ï¼Œè¯·è¾“å…¥æ”»å‡»è·è½½ï¼š </span>
</code></pre>
<p>è¿™æ®µä»£ç <strong>å­˜åœ¨å…¸å‹çš„åŸå‹æ±¡æŸ“ï¼ˆPrototype Pollutionï¼‰å®‰å…¨æ¼æ´</strong>ï¼Œè€Œä¸”ä¸¤ä¸ªâ€œæ–¹æ¡ˆâ€éƒ½èƒ½æˆä¸ºæ”»å‡»å…¥å£ã€‚ä¸‹é¢æˆ‘æŒ‰ã€Œé—®é¢˜ â†’ åˆ©ç”¨æ–¹å¼ â†’ å½±å“ â†’ ä¿®å¤å»ºè®®ã€æ¥æ‹†è§£ã€‚</p>
<hr/>
<h3 data-id="heading-3">ä¸€ã€æ ¸å¿ƒé—®é¢˜åœ¨å“ªï¼Ÿ</h3>
<h4 data-id="heading-4">ä¸å®‰å…¨çš„ <code>deepMerge</code></h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">deepMerge</span>(<span class="hljs-params">target, source</span>) { 
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> source) { 
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> source[key] === <span class="hljs-string">'object'</span>) { 
      <span class="hljs-keyword">if</span> (!target[key]) { 
        target[key] = {}; 
      } 
      <span class="hljs-title function_">deepMerge</span>(target[key], source[key]); 
    } <span class="hljs-keyword">else</span> { 
      target[key] = source[key]; 
    } 
  } 
}
</code></pre>
<p><strong>é—®é¢˜ç‚¹ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ <code>for...in</code>ï¼ˆä¼šéå†åŸå‹é“¾ï¼‰</li>
<li>æœªè¿‡æ»¤ <code>proto</code> / <code>constructor</code> / <code>prototype</code></li>
<li>æœªåˆ¤æ–­æ˜¯å¦ä¸ºã€Œçº¯å¯¹è±¡ã€</li>
<li>ç›´æ¥é€’å½’å†™å…¥ <code>target[key]</code></li>
</ul>
<p>ğŸ‘‰ <strong>æ”»å‡»è€…å¯ä»¥ä¿®æ”¹</strong> <strong><code>Object.prototype</code></strong></p>
<hr/>
<h3 data-id="heading-5">äºŒã€ä¸¤ä¸ªä¸šåŠ¡åœºæ™¯ä¸ºä»€ä¹ˆéƒ½å±é™©ï¼Ÿ</h3>
<h4 data-id="heading-6">æ–¹æ¡ˆ1ï¼š</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
  <span class="hljs-title function_">deepMerge</span>(config, e.<span class="hljs-property">data</span>);
});
</code></pre>
<h5 data-id="heading-7">æ”»å‡» payload</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">postMessage</span>({<span class="hljs-attr">proto</span>: {<span class="hljs-attr">isAdmin</span>: <span class="hljs-literal">true</span>
  }
}, <span class="hljs-string">'*'</span>);
</code></pre>
<h5 data-id="heading-8">ç»“æœ</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> userInfo = {};
userInfo.<span class="hljs-property">isAdmin</span> === <span class="hljs-literal">true</span>; <span class="hljs-comment">// ğŸ’£</span>
</code></pre>
<p>ğŸ¯ <strong>æ”»å‡»è€…æ— éœ€æ§åˆ¶ userInfoï¼Œåªè¦æ±¡æŸ“åŸå‹å³å¯</strong></p>
<hr/>
<h4 data-id="heading-9">æ–¹æ¡ˆ2ï¼š</h4>
<pre><code class="hljs language-js" lang="js">qs.<span class="hljs-title function_">parse</span>(location.<span class="hljs-property">search</span>)
<span class="hljs-keyword">const</span> searchQuery = qs.<span class="hljs-title function_">parse</span>(location.<span class="hljs-property">search</span>);
<span class="hljs-title function_">deepMerge</span>(routeQuery, searchQuery);
</code></pre>
<h5 data-id="heading-10">æ¶æ„ URL</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">https</span>:<span class="hljs-comment">//example.com/?_proto_[isAdmin]=true</span>
</code></pre>
<p>æˆ–ï¼ˆæ›´éšè”½ï¼‰</p>
<pre><code class="hljs language-js" lang="js">?constructor[prototype][isAdmin]=<span class="hljs-literal">true</span>
</code></pre>
<h5 data-id="heading-11">ç»“æœåŒæ ·æ˜¯ï¼š</h5>
<pre><code class="hljs language-js" lang="js">({}).<span class="hljs-property">isAdmin</span> === <span class="hljs-literal">true</span>;
</code></pre>
<hr/>
<h3 data-id="heading-12">ä¸‰ã€æœ€ç»ˆå±å®³ç‚¹ï¼ˆä¸šåŠ¡é€»è¾‘è¢«ç»•è¿‡ï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> userInfo = {};
<span class="hljs-keyword">if</span> (userInfo.<span class="hljs-property">isAdmin</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä½ æ˜¯ç®¡ç†å‘˜'</span>);
}
</code></pre>
<p>ğŸš¨ <strong>è¿™æ˜¯ä¸€ä¸ªæƒé™ç»•è¿‡æ¼æ´</strong> åœ¨çœŸå®ç³»ç»Ÿä¸­ï¼Œå¯èƒ½å¯¼è‡´ï¼š</p>
<ul>
<li>åå°æƒé™è·å–</li>
<li>åŠŸèƒ½è¶Šæƒ</li>
<li>å®‰å…¨æ ¡éªŒå…¨éƒ¨å¤±æ•ˆ</li>
</ul>
<hr/>
<h3 data-id="heading-13">å››ã€ä¸ºä»€ä¹ˆè¿™æ˜¯â€œé«˜å±æ¼æ´â€ï¼Ÿ</h3>

























<table><thead><tr><th><strong>ç‰¹æ€§</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td>åˆ©ç”¨é—¨æ§›</td><td>ä½ï¼ˆURL / postMessage å³å¯ï¼‰</td></tr><tr><td>å½±å“èŒƒå›´</td><td>å…¨å±€ï¼ˆæ±¡æŸ“ Object.prototypeï¼‰</td></tr><tr><td>éšè”½æ€§</td><td>é«˜ï¼ˆè°ƒè¯•å¾ˆéš¾å‘ç°ï¼‰</td></tr><tr><td>å¸¸è§åº¦</td><td>éå¸¸é«˜ï¼ˆdeepMerge / lodash.mergeï¼‰</td></tr></tbody></table>
<p>ğŸ‘‰ å·²å¤šæ¬¡å‡ºç°åœ¨çœŸå® CVE (Common Vulnerabilities and Exposures) ä¸­ã€‚</p>
<hr/>
<h3 data-id="heading-14">äº”ã€æ­£ç¡®çš„ä¿®å¤æ–¹å¼ âœ…</h3>
<h4 data-id="heading-15">âœ… 1. ä¸¥æ ¼è¿‡æ»¤å±é™© keyï¼ˆå¿…é¡»ï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> blockedKeys = [<span class="hljs-string">'__proto__'</span>, <span class="hljs-string">'prototype'</span>, <span class="hljs-string">'constructor'</span>];

<span class="hljs-keyword">function</span> <span class="hljs-title function_">safeDeepMerge</span>(<span class="hljs-params">target, source</span>) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(source)) {
    <span class="hljs-keyword">if</span> (blockedKeys.<span class="hljs-title function_">includes</span>(key)) <span class="hljs-keyword">continue</span>;

    <span class="hljs-keyword">if</span> (
      <span class="hljs-keyword">typeof</span> source[key] === <span class="hljs-string">'object'</span> &amp;&amp;
      source[key] !== <span class="hljs-literal">null</span> &amp;&amp;
      !<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(source[key])
    ) {
      <span class="hljs-keyword">if</span> (!target[key]) target[key] = {};
      <span class="hljs-title function_">safeDeepMerge</span>(target[key], source[key]);
    } <span class="hljs-keyword">else</span> {
      target[key] = source[key];
    }
  }
}
</code></pre>
<hr/>
<h4 data-id="heading-16">âœ… 2. postMessage å¿…é¡»æ ¡éªŒæ¥æº</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'message'</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">origin</span> !== <span class="hljs-string">'https://trusted.com'</span>) <span class="hljs-keyword">return</span>;
  <span class="hljs-title function_">safeDeepMerge</span>(config, e.<span class="hljs-property">data</span>);
});
</code></pre>
<hr/>
<h4 data-id="heading-17">âœ… 3. qs ä½¿ç”¨å®‰å…¨æ¨¡å¼</h4>
<pre><code class="hljs language-js" lang="js">qs.<span class="hljs-title function_">parse</span>(location.<span class="hljs-property">search</span>, {
  <span class="hljs-attr">allowPrototypes</span>: <span class="hljs-literal">false</span>
});
</code></pre>
<p>âš ï¸ <strong>é»˜è®¤ qs æ˜¯å±é™©çš„ï¼ˆæ—§ç‰ˆæœ¬å°¤å…¶ï¼‰</strong></p>
<hr/>
<h4 data-id="heading-18">âœ… 4. ä½¿ç”¨æˆç†Ÿåº“</h4>
<p>å¦‚ URLSearchParams</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> params = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(location.<span class="hljs-property">search</span>));
</code></pre>
<h4 data-id="heading-19">âœ… 5. é˜²å¾¡æ€§ç¼–ç¨‹ï¼ˆæ¨èï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> userInfo = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(<span class="hljs-literal">null</span>);
</code></pre>
<p>æˆ–</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hasOwnProperty</span>.<span class="hljs-title function_">call</span>(userInfo, <span class="hljs-string">'isAdmin'</span>)) {
  ...
}
</code></pre>
<hr/>
<h2 data-id="heading-20">ä¸ºä»€ä¹ˆå®ƒæ˜¯â€œå®‰å…¨æ¼æ´â€è€Œä¸æ˜¯ Bugï¼Ÿ</h2>
<p>å› ä¸ºå®ƒä¼šå¯¼è‡´ï¼š</p>





























<table><thead><tr><th><strong>åæœ</strong></th><th><strong>ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td>æƒé™ç»•è¿‡</td><td>if (user.isAdmin)</td></tr><tr><td>é€»è¾‘ç¯¡æ”¹</td><td>if (config.debug)</td></tr><tr><td>RCEï¼ˆNodeï¼‰</td><td>ä¸ eval / child_process ç»“åˆ</td></tr><tr><td>XSS</td><td>æ¨¡æ¿æ¸²æŸ“ã€é…ç½®æ‹¼æ¥</td></tr><tr><td>DoS</td><td>JSON stringify / é€’å½’å´©æºƒ</td></tr></tbody></table>
<p>ğŸ‘‰ <strong>å½±å“æ˜¯â€œå…¨å±€çš„ã€éšå¼çš„ã€æŒä¹…çš„â€</strong></p>
<hr/>
<h2 data-id="heading-21">çœŸå®ä¸–ç•Œä¸­çš„ CVE (Common Vulnerabilities and Exposures)</h2>





























<table><thead><tr><th><strong>åº“</strong></th><th><strong>CVE</strong></th></tr></thead><tbody><tr><td>lodash.merge</td><td>CVE-2019-10744</td></tr><tr><td>jQuery.extend</td><td>CVE-2019-11358</td></tr><tr><td>minimist</td><td>CVE-2020-7598</td></tr><tr><td>yargs</td><td>CVE-2020-7608</td></tr><tr><td>qs</td><td>å¤šæ¬¡</td></tr></tbody></table>
<p>ğŸ“Œ <strong>è¿™ä¸æ˜¯â€œç†è®ºæ¼æ´â€ï¼Œè€Œæ˜¯â€œè¢«æ‰“çƒ‚çš„æ¼æ´ç±»å‹â€</strong></p>
<hr/>
<h2 data-id="heading-22">å¦‚ä½•åˆ¤æ–­ä½ çš„ä»£ç æ˜¯å¦æœ‰åŸå‹æ±¡æŸ“ï¼Ÿ</h2>
<h3 data-id="heading-23">ğŸ” è‡ªæŸ¥ checklist</h3>
<ul>
<li>æ˜¯å¦æŠŠ <strong>ç”¨æˆ·è¾“å…¥</strong> merge åˆ°å¯¹è±¡ï¼Ÿ</li>
<li>æ˜¯å¦ä½¿ç”¨ <code>for...in</code>ï¼Ÿ</li>
<li>æ˜¯å¦é€’å½’æ‹·è´å¯¹è±¡ï¼Ÿ</li>
<li>æ˜¯å¦ä¿¡ä»» <code>qs.parse</code> / JSONï¼Ÿ</li>
<li>æ˜¯å¦å­˜åœ¨ <code>obj[key] = value</code>ï¼Œä¸” <code>key</code> æ¥è‡ªå¤–éƒ¨ï¼Ÿ</li>
</ul>
<p>å¦‚æœæœ‰ 2 æ¡ä»¥ä¸Šï¼Œ<strong>é«˜é£é™©</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React æ€§èƒ½ä¼˜åŒ–åˆ©å™¨ï¼šæ·±å…¥ç†è§£ useMemo ä¸ useCallback]]></title>    <link>https://juejin.cn/post/7591708519449100297</link>    <guid>https://juejin.cn/post/7591708519449100297</guid>    <pubDate>2026-01-05T14:32:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591708519449100297" data-draft-id="7591719013488230438" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React æ€§èƒ½ä¼˜åŒ–åˆ©å™¨ï¼šæ·±å…¥ç†è§£ useMemo ä¸ useCallback"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,React.js"/> <meta itemprop="datePublished" content="2026-01-05T14:32:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Yira"/> <meta itemprop="url" content="https://juejin.cn/user/262123324974122"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React æ€§èƒ½ä¼˜åŒ–åˆ©å™¨ï¼šæ·±å…¥ç†è§£ useMemo ä¸ useCallback
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/262123324974122/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Yira
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T14:32:05.000Z" title="Mon Jan 05 2026 14:32:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React æ€§èƒ½ä¼˜åŒ–åˆ©å™¨ï¼šæ·±å…¥ç†è§£Â <code>useMemo</code>Â ä¸Â <code>useCallback</code></h2>
<p>åœ¨ React åº”ç”¨å¼€å‘ä¸­ï¼Œéšç€ç»„ä»¶å¤æ‚åº¦çš„æå‡ï¼Œæ€§èƒ½é—®é¢˜é€æ¸æ˜¾ç°ã€‚å³ä½¿çŠ¶æ€æ›´æ–°åªå½±å“å±€éƒ¨ UIï¼Œæ•´ä¸ªç»„ä»¶å‡½æ•°ä¹Ÿä¼šé‡æ–°æ‰§è¡Œï¼Œå¯¼è‡´ä¸å¿…è¦çš„è®¡ç®—æˆ–å­ç»„ä»¶é‡æ¸²æŸ“ã€‚ä¸ºè§£å†³è¿™äº›é—®é¢˜ï¼ŒReact æä¾›äº†ä¸¤ä¸ªå…³é”®çš„æ€§èƒ½ä¼˜åŒ– Hookï¼š<strong><code>useMemo</code></strong> å’Œ <strong><code>useCallback</code></strong>ã€‚å®ƒä»¬è™½å°ï¼Œå´èƒ½åœ¨å…³é”®æ—¶åˆ»æ˜¾è‘—æå‡åº”ç”¨æ€§èƒ½ä¸ç”¨æˆ·ä½“éªŒã€‚</p>
<p>æœ¬æ–‡å°†ç»“åˆå…·ä½“ä»£ç ç¤ºä¾‹ï¼Œæ·±å…¥å‰–æè¿™ä¸¤ä¸ª Hook çš„åŸç†ã€ä½¿ç”¨åœºæ™¯åŠæœ€ä½³å®è·µã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦æ€§èƒ½ä¼˜åŒ–ï¼Ÿ</h3>
<p>React çš„æ ¸å¿ƒç†å¿µæ˜¯â€œ<strong>çŠ¶æ€é©±åŠ¨è§†å›¾</strong>â€ã€‚å½“ç»„ä»¶çš„çŠ¶æ€ï¼ˆstateï¼‰æˆ–å±æ€§ï¼ˆpropsï¼‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œç»„ä»¶å‡½æ•°ä¼šé‡æ–°æ‰§è¡Œï¼Œç”Ÿæˆæ–°çš„ JSXã€‚è¿™ç§æœºåˆ¶ç®€æ´é«˜æ•ˆï¼Œä½†ä¹Ÿå¸¦æ¥æ½œåœ¨æ€§èƒ½éšæ‚£ï¼š</p>
<ul>
<li><strong>æ˜‚è´µçš„è®¡ç®—é‡å¤æ‰§è¡Œ</strong>ï¼šå¦‚è¿‡æ»¤å¤§é‡æ•°æ®ã€å¤æ‚æ•°å­¦è¿ç®—ç­‰ã€‚</li>
<li><strong>å­ç»„ä»¶æ— è°“é‡æ¸²æŸ“</strong>ï¼šå³ä½¿ props æœªå˜ï¼Œçˆ¶ç»„ä»¶æ›´æ–°ä»ä¼šè§¦å‘å­ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</li>
</ul>
<p>è‹¥ä¸åŠ ä»¥æ§åˆ¶ï¼Œè¿™äº›å†—ä½™æ“ä½œä¼šæ‹–æ…¢åº”ç”¨å“åº”é€Ÿåº¦ï¼Œå°¤å…¶åœ¨ä½ç«¯è®¾å¤‡æˆ–å¤§å‹åˆ—è¡¨åœºæ™¯ä¸‹æ›´ä¸ºæ˜æ˜¾ã€‚</p>
<hr/>
<h3 data-id="heading-2">äºŒã€<code>useMemo</code>ï¼šç¼“å­˜è®¡ç®—ç»“æœ</h3>
<h4 data-id="heading-3">1. é—®é¢˜åœºæ™¯</h4>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ°´æœåˆ—è¡¨ï¼Œå¹¶æ ¹æ®ç”¨æˆ·è¾“å…¥çš„å…³é”®è¯è¿›è¡Œè¿‡æ»¤ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">list</span> = [<span class="hljs-string">'apple'</span>, <span class="hljs-string">'orange'</span>, <span class="hljs-string">'peach'</span>]<span class="hljs-comment">;</span>
const <span class="hljs-section">[keyword, setKeyword]</span> = useState('')<span class="hljs-comment">;</span>
const <span class="hljs-attr">filterList</span> = list.filter(item =&gt; item.includes(keyword))<span class="hljs-comment">;</span>
</code></pre>
<p>è¡¨é¢çœ‹æ²¡é—®é¢˜ï¼Œä½†è‹¥ç»„ä»¶ä¸­è¿˜æœ‰å¦ä¸€ä¸ªæ— å…³çŠ¶æ€ï¼ˆå¦‚ <code>count</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">const <span class="hljs-selector-attr">[count, setCount]</span> = <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>);
</code></pre>
<p>å½“ç‚¹å‡»â€œ+1â€æŒ‰é’®æ›´æ–° <code>count</code> æ—¶ï¼Œæ•´ä¸ª <code>App</code> ç»„ä»¶é‡æ–°è¿è¡Œï¼Œ<code>filterList</code> ä¹Ÿä¼šè¢«é‡æ–°è®¡ç®—â€”â€”<strong>å°½ç®¡ <code>keyword</code> å¹¶æœªæ”¹å˜</strong>ï¼è¿™ä¸ä»…æµªè´¹ CPU èµ„æºï¼Œè¿˜å¯èƒ½å¼•å‘è§†è§‰é—ªçƒç­‰é—®é¢˜ã€‚</p>
<h4 data-id="heading-4">2.Â <code>useMemo</code>Â çš„è§£å†³æ–¹æ¡ˆ</h4>
<p><code>useMemo</code> å…è®¸æˆ‘ä»¬å°†<strong>è®¡ç®—è¿‡ç¨‹ç¼“å­˜èµ·æ¥</strong>ï¼Œä»…åœ¨ä¾èµ–é¡¹å˜åŒ–æ—¶æ‰é‡æ–°è®¡ç®—ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">filterList</span> = useMemo(() =&gt; {
  console.log('filter æ‰§è¡Œäº†')<span class="hljs-comment">;</span>
  return list.filter(<span class="hljs-attr">item</span> =&gt; item.includes(keyword))<span class="hljs-comment">;</span>
}, <span class="hljs-section">[keyword]</span>)<span class="hljs-comment">; // ä»…å½“ keyword å˜åŒ–æ—¶é‡æ–°è®¡ç®—</span>
</code></pre>
<blockquote>
<p>âœ… <strong>å…³é”®ç‚¹</strong>ï¼šç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¾èµ–æ•°ç»„ã€‚åªæœ‰æ•°ç»„ä¸­çš„å€¼å‘ç”Ÿå˜åŒ–ï¼Œæ‰ä¼šè§¦å‘é‡æ–°è®¡ç®—ã€‚</p>
</blockquote>
<h4 data-id="heading-5">3. å¤„ç†æ˜‚è´µè®¡ç®—</h4>
<p>å¯¹äºæ›´å¤æ‚çš„åœºæ™¯ï¼Œæ¯”å¦‚è®¡ç®—å¤§æ•°ç´¯åŠ ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">function slowSum(n) {
  let <span class="hljs-attr">sum</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
  for (let <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; n * 1000000; i++) {</span>
    sum += i<span class="hljs-comment">;</span>
  }
  return sum<span class="hljs-comment">;</span>
}
</code></pre>
<p>è‹¥ç›´æ¥è°ƒç”¨ <code>slowSum(num)</code>ï¼Œæ¯æ¬¡ç»„ä»¶æ›´æ–°éƒ½ä¼šå¡é¡¿ã€‚ä½¿ç”¨ <code>useMemo</code> å¯æœ‰æ•ˆé¿å…ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">const result = <span class="hljs-built_in">useMemo</span>(() =&gt; <span class="hljs-built_in">slowSum</span>(num), <span class="hljs-selector-attr">[num]</span>);
</code></pre>
<p>è¿™æ ·ï¼Œåªæœ‰ <code>num</code> æ”¹å˜æ—¶æ‰ä¼šæ‰§è¡Œè€—æ—¶è¿ç®—ï¼Œæå¤§æå‡æµç•…åº¦ã€‚</p>
<h4 data-id="heading-6">4. æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><strong>ä¸è¦æ»¥ç”¨</strong>ï¼šç®€å•è®¡ç®—ï¼ˆå¦‚Â <code>a + b</code>ï¼‰æ— éœ€Â <code>useMemo</code>ï¼Œåè€Œå¢åŠ å†…å­˜å¼€é”€ã€‚</li>
<li><strong>ä¾èµ–é¡¹å¿…é¡»å®Œæ•´</strong>ï¼šé—æ¼ä¾èµ–ä¼šå¯¼è‡´ä½¿ç”¨è¿‡æœŸå€¼ã€‚</li>
<li><strong><code>includes("")</code>Â è¿”å› true</strong>ï¼šç©ºå­—ç¬¦ä¸²åŒ¹é…æ‰€æœ‰é¡¹ï¼Œéœ€é¢å¤–å¤„ç†è¾¹ç•Œæƒ…å†µï¼ˆå¦‚Â <code>keyword.trim()</code>ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">ä¸‰ã€<code>useCallback</code>ï¼šç¼“å­˜å‡½æ•°å¼•ç”¨</h3>
<h4 data-id="heading-8">1. å­ç»„ä»¶é‡æ¸²æŸ“é—®é¢˜</h4>
<p>è€ƒè™‘ä»¥ä¸‹çˆ¶å­ç»„ä»¶ç»“æ„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// çˆ¶ç»„ä»¶</span>
<span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> [num, setNum] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'click'</span>);
};

<span class="hljs-keyword">return</span> (
  <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setCount(count + 1)}&gt;count +1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Child</span> <span class="hljs-attr">count</span>=<span class="hljs-string">{count}</span> <span class="hljs-attr">handleClick</span>=<span class="hljs-string">{handleClick}</span> /&gt;</span>
  <span class="hljs-tag">&lt;/&gt;</span></span>
);
</code></pre>
<p>æ¯æ¬¡çˆ¶ç»„ä»¶æ›´æ–°ï¼ˆå¦‚ä¿®æ”¹ <code>num</code>ï¼‰ï¼Œ<code>handleClick</code> éƒ½ä¼š<strong>é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°</strong>ã€‚å³ä½¿ <code>count</code> æ²¡å˜ï¼Œ<code>Child</code> ç»„ä»¶å› æ¥æ”¶åˆ°æ–°çš„ <code>handleClick</code> å¼•ç”¨ï¼Œä¹Ÿä¼šè¢«å¼ºåˆ¶é‡æ¸²æŸ“ã€‚</p>
<h4 data-id="heading-9">2.Â <code>memo</code>Â +Â <code>useCallback</code>Â çš„ç»„åˆæ‹³</h4>
<h5 data-id="heading-10">æ­¥éª¤ä¸€ï¼šç”¨Â <code>memo</code>Â åŒ…è£¹å­ç»„ä»¶</h5>
<p><code>memo</code> æ˜¯ä¸€ä¸ªé«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰ï¼Œå®ƒä¼šå¯¹ props è¿›è¡Œæµ…æ¯”è¾ƒã€‚è‹¥ props æœªå˜ï¼Œåˆ™è·³è¿‡æ¸²æŸ“ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">Child</span> = <span class="hljs-title function_">memo</span>(<span class="hljs-function">(<span class="hljs-params">{ count, handleClick }</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Child é‡æ–°æ¸²æŸ“'</span>);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleClick}</span>&gt;</span>å­ç»„ä»¶ {count}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
});
</code></pre>
<h5 data-id="heading-11">æ­¥éª¤äºŒï¼šç”¨Â <code>useCallback</code>Â ç¼“å­˜å›è°ƒå‡½æ•°</h5>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">handleClick</span> = useCallback(() =&gt; {
  console.log('click')<span class="hljs-comment">;</span>
}, <span class="hljs-section">[]</span>)<span class="hljs-comment">; // æ— ä¾èµ–ï¼Œå‡½æ•°å¼•ç”¨æ°¸ä¹…ä¸å˜</span>
</code></pre>
<p>ç°åœ¨ï¼Œåªæœ‰å½“ <code>count</code> æ”¹å˜æ—¶ï¼Œ<code>Child</code> æ‰ä¼šæ›´æ–°ï¼›ä¿®æ”¹ <code>num</code> ä¸å†è§¦å‘å­ç»„ä»¶é‡æ¸²æŸ“ã€‚</p>
<h4 data-id="heading-12">3. ä¾èµ–é¡¹çš„æ­£ç¡®ä½¿ç”¨</h4>
<p>è‹¥å›è°ƒå‡½æ•°ä¾èµ–æŸä¸ªçŠ¶æ€ï¼Œå¿…é¡»å°†å…¶åŠ å…¥ä¾èµ–æ•°ç»„ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">handleClick</span> = useCallback(() =&gt; {
  console.log('å½“å‰ count:', count)<span class="hljs-comment">;</span>
}, <span class="hljs-section">[count]</span>)<span class="hljs-comment">; // ä¾èµ– count</span>
</code></pre>
<p>å¦åˆ™ï¼Œå‡½æ•°å†…éƒ¨ä¼šæ•è·æ—§çš„ <code>count</code> å€¼ï¼ˆé—­åŒ…é™·é˜±ï¼‰ã€‚</p>
<blockquote>
<p>ğŸ’¡ <strong>è®¾è®¡å“²å­¦</strong>ï¼šReact çš„æ•°æ®æµæ˜¯â€œçˆ¶ç®¡çŠ¶æ€ï¼Œå­ç®¡å±•ç¤ºâ€ã€‚é€šè¿‡ <code>memo</code> + <code>useCallback</code>ï¼Œæˆ‘ä»¬ç¡®ä¿å­ç»„ä»¶ä»…åœ¨å¿…è¦æ—¶æ›´æ–°ï¼Œç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-13">å››ã€<code>useMemo</code>Â vsÂ <code>useCallback</code>ï¼šæœ¬è´¨åŒºåˆ«</h3>
<p>è™½ç„¶ä¸¤è€…éƒ½ç”¨äºç¼“å­˜ï¼Œä½†ç”¨é€”ä¸åŒï¼š</p>




















<table><thead><tr><th>Hook</th><th>ç”¨é€”</th><th>è¿”å›å€¼</th></tr></thead><tbody><tr><td><code>useMemo</code></td><td>ç¼“å­˜<strong>è®¡ç®—ç»“æœ</strong></td><td>å€¼ï¼ˆå¦‚æ•°ç»„ã€å¯¹è±¡ã€æ•°å­—ï¼‰</td></tr><tr><td><code>useCallback</code></td><td>ç¼“å­˜<strong>å‡½æ•°å¼•ç”¨</strong></td><td>å‡½æ•°</td></tr></tbody></table>
<p>å®é™…ä¸Šï¼Œ<code>useCallback(fn, deps)</code> ç­‰ä»·äº <code>useMemo(() =&gt; fn, deps)</code>ã€‚ä½†è¯­ä¹‰ä¸Šï¼Œ<code>useCallback</code> æ›´æ¸…æ™°è¡¨è¾¾â€œè¿™æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°â€ã€‚</p>
<hr/>
<h3 data-id="heading-14">äº”ã€ä½•æ—¶ä½¿ç”¨ï¼Ÿä½•æ—¶é¿å…ï¼Ÿ</h3>
<h4 data-id="heading-15">æ¨èä½¿ç”¨åœºæ™¯ï¼š</h4>
<ul>
<li>
<p><strong><code>useMemo</code></strong>ï¼š</p>
<ul>
<li>è¿‡æ»¤/æ’åºå¤§å‹åˆ—è¡¨ï¼›</li>
<li>å¤æ‚æ•°å­¦æˆ–é€»è¾‘è®¡ç®—ï¼›</li>
<li>åˆ›å»ºä¸å¯å˜å¯¹è±¡ï¼ˆå¦‚Â <code>{ ... }</code>ï¼‰ä¼ é€’ç»™å­ç»„ä»¶ã€‚</li>
</ul>
</li>
<li>
<p><strong><code>useCallback</code></strong>ï¼š</p>
<ul>
<li>ä¼ é€’ç»™Â <code>memo</code>Â åŒ…è£¹çš„å­ç»„ä»¶çš„äº‹ä»¶å¤„ç†å™¨ï¼›</li>
<li>ä½œä¸ºÂ <code>useEffect</code>Â çš„ä¾èµ–é¡¹ï¼ˆé¿å…æ— é™å¾ªç¯ï¼‰ï¼›</li>
<li>ä¼ é€’ç»™ç¬¬ä¸‰æ–¹åº“ï¼ˆå¦‚Â <code>react-window</code>Â çš„Â <code>itemData</code>ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-16">é¿å…æ»¥ç”¨ï¼š</h4>
<ul>
<li>ç®€å•ç»„ä»¶æ— éœ€ä¼˜åŒ–ï¼›</li>
<li>è¿‡åº¦ä½¿ç”¨ä¼šå¢åŠ å†…å­˜å ç”¨å’Œä»£ç å¤æ‚åº¦ï¼›</li>
<li>å…ˆç”¨æ€§èƒ½åˆ†æå·¥å…·ï¼ˆå¦‚ React DevTools Profilerï¼‰å®šä½ç“¶é¢ˆï¼Œå†é’ˆå¯¹æ€§ä¼˜åŒ–ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-17">å…­ã€æ€»ç»“</h3>
<p><code>useMemo</code> å’Œ <code>useCallback</code> æ˜¯ React æ€§èƒ½ä¼˜åŒ–çš„é‡è¦å·¥å…·ï¼Œå®ƒä»¬é€šè¿‡<strong>ç¼“å­˜æœºåˆ¶</strong>å‡å°‘ä¸å¿…è¦çš„è®¡ç®—ä¸æ¸²æŸ“ï¼š</p>
<ul>
<li><strong><code>useMemo</code></strong>Â è§£å†³â€œé‡å¤è®¡ç®—â€é—®é¢˜ï¼Œé€‚ç”¨äºæ´¾ç”Ÿæ•°æ®ï¼›</li>
<li><strong><code>useCallback</code></strong>Â è§£å†³â€œå‡½æ•°å¼•ç”¨å˜åŒ–â€é—®é¢˜ï¼Œå¸¸ä¸Â <code>memo</code>Â é…åˆä½¿ç”¨ï¼Œé˜²æ­¢å­ç»„ä»¶æ— è°“æ›´æ–°ã€‚</li>
</ul>
<p>æŒæ¡å®ƒä»¬çš„å…³é”®åœ¨äºç†è§£ <strong>â€œä¾èµ–é¡¹â€</strong> çš„ä½œç”¨ï¼š<strong>åªæœ‰ä¾èµ–å˜åŒ–æ—¶ï¼Œæ‰é‡æ–°è®¡ç®—æˆ–ç”Ÿæˆæ–°å‡½æ•°</strong>ã€‚åˆç†ä½¿ç”¨è¿™ä¸¤ä¸ª Hookï¼Œä¸ä»…èƒ½æå‡åº”ç”¨æ€§èƒ½ï¼Œè¿˜èƒ½å†™å‡ºæ›´æ¸…æ™°ã€å¯ç»´æŠ¤çš„ä»£ç ã€‚</p>
<p>è®°ä½ï¼š<strong>ä¼˜åŒ–ä¸æ˜¯ç›®çš„ï¼Œè€Œæ˜¯æ‰‹æ®µ</strong>ã€‚åœ¨ä¿è¯åŠŸèƒ½æ­£ç¡®çš„å‰æä¸‹ï¼Œé’ˆå¯¹çœŸå®æ€§èƒ½ç“¶é¢ˆè¿›è¡Œç²¾å‡†ä¼˜åŒ–ï¼Œæ‰æ˜¯å·¥ç¨‹åŒ–çš„æœ€ä½³å®è·µã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨ Vue ä¸­ä¿å­˜é¡µé¢çŠ¶æ€çš„å®Œæ•´æŒ‡å—ï¼šè®©ç”¨æˆ·æ°¸è¿œä¸ä¸¢å¤±è¿›åº¦]]></title>    <link>https://juejin.cn/post/7591728734982963227</link>    <guid>https://juejin.cn/post/7591728734982963227</guid>    <pubDate>2026-01-05T15:05:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591728734982963227" data-draft-id="7591713442399322121" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨ Vue ä¸­ä¿å­˜é¡µé¢çŠ¶æ€çš„å®Œæ•´æŒ‡å—ï¼šè®©ç”¨æˆ·æ°¸è¿œä¸ä¸¢å¤±è¿›åº¦"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-05T15:05:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨ Vue ä¸­ä¿å­˜é¡µé¢çŠ¶æ€çš„å®Œæ•´æŒ‡å—ï¼šè®©ç”¨æˆ·æ°¸è¿œä¸ä¸¢å¤±è¿›åº¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T15:05:57.000Z" title="Mon Jan 05 2026 15:05:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€ï¼šä¸ºä»€ä¹ˆéœ€è¦ä¿å­˜é¡µé¢çŠ¶æ€ï¼Ÿ</h2>
<p>ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼Œä½ ä¸€å®šé‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼šç”¨æˆ·åœ¨ä¸€ä¸ªå¤æ‚çš„è¡¨å•é¡µé¢å¡«å†™äº†å¤§é‡ä¿¡æ¯ï¼Œä¸å°å¿ƒåˆ·æ–°äº†é¡µé¢æˆ–ç‚¹å‡»äº†è¿”å›æŒ‰é’®ï¼Œæ‰€æœ‰æ•°æ®éƒ½æ¶ˆå¤±äº†ï¼ç”¨æˆ·åªèƒ½æ— å¥ˆåœ°é‡æ–°å¡«å†™...</p>
<p><strong>ä¿å­˜é¡µé¢çŠ¶æ€ä¸ä»…ä»…æ˜¯æŠ€æœ¯éœ€æ±‚ï¼Œæ›´æ˜¯æå‡ç”¨æˆ·ä½“éªŒçš„å…³é”®</strong>ã€‚ä»Šå¤©æˆ‘ä»¬æ¥æ·±å…¥æ¢è®¨åœ¨ Vue ä¸­å®ç°é¡µé¢çŠ¶æ€ä¿å­˜çš„å„ç§æ–¹æ³•ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€åº”ç”¨åœºæ™¯åˆ†æ</h2>
<p>åœ¨æˆ‘ä»¬å¼€å§‹æŠ€æœ¯å®ç°ä¹‹å‰ï¼Œå…ˆçœ‹çœ‹å“ªäº›åœºæ™¯éœ€è¦çŠ¶æ€ä¿å­˜ï¼š</p>
<ol>
<li>1.Â <strong>å¤æ‚è¡¨å•é¡µé¢</strong>ï¼šç”¨æˆ·å¡«å†™äº†ä¸€åŠçš„è¡¨å•</li>
<li>2.Â <strong>æ•°æ®ç­›é€‰é¡µé¢</strong>ï¼šç”¨æˆ·è®¾ç½®äº†å¤æ‚çš„ç­›é€‰æ¡ä»¶</li>
<li>3.Â <strong>åˆ†é¡µåˆ—è¡¨</strong>ï¼šç”¨æˆ·æµè§ˆåˆ°ç¬¬5é¡µï¼Œè¿”å›åå¸Œæœ›è¿˜åœ¨ç¬¬5é¡µ</li>
<li>4.Â <strong>å¤šæ­¥éª¤æµç¨‹</strong>ï¼šè´­ç‰©è½¦ç»“ç®—æµç¨‹ã€æ³¨å†Œæµç¨‹</li>
<li>5.Â <strong>ç”¨æˆ·åå¥½è®¾ç½®</strong>ï¼šä¸»é¢˜ã€è¯­è¨€ã€å¸ƒå±€ç­‰</li>
</ol>
<h2 data-id="heading-2">äºŒã€æŠ€æœ¯æ–¹æ¡ˆå¯¹æ¯”</h2>
<h3 data-id="heading-3">æ–¹æ¡ˆå¯¹æ¯”æµç¨‹å›¾</h3>
<pre><code class="hljs">å°‘é‡ç®€å•æ•°æ®

å¤§é‡å¤æ‚æ•°æ®

ä¸´æ—¶ä¼šè¯æ•°æ®

éœ€è¦æœåŠ¡ç«¯åŒæ­¥

éœ€è¦ä¿å­˜é¡µé¢çŠ¶æ€æ•°æ®ç‰¹ç‚¹LocalStorageVuex/Pinia + æŒä¹…åŒ–SessionStorageIndexedDB + åç«¯APIåˆ·æ–°/å…³é—­åä»å­˜åœ¨å…¨å±€çŠ¶æ€ç®¡ç†ä»…å½“å‰ä¼šè¯ç¦»çº¿å¯ç”¨
</code></pre>
<h2 data-id="heading-4">ä¸‰ã€å…·ä½“å®ç°æ–¹æ³•</h2>
<h3 data-id="heading-5">æ–¹æ³•1ï¼šä½¿ç”¨ localStorage ä¿å­˜ç®€å•çŠ¶æ€</h3>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæ•°æ®é‡å°ã€ç»“æ„ç®€å•çš„çŠ¶æ€ä¿å­˜</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>ç”¨æˆ·ä¿¡æ¯è¡¨å•<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">form</span>Â @<span class="hljs-attr">submit.prevent</span>=<span class="hljs-string">"handleSubmit"</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>å§“åï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">input</span>Â 
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">v-model</span>=<span class="hljs-string">"formData.name"</span>Â 
Â Â Â Â Â Â Â Â Â Â @<span class="hljs-attr">input</span>=<span class="hljs-string">"saveToLocalStorage"</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å§“å"</span>
Â Â Â Â Â Â Â Â /&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>é‚®ç®±ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">input</span>Â 
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">v-model</span>=<span class="hljs-string">"formData.email"</span>
Â Â Â Â Â Â Â Â Â Â @<span class="hljs-attr">input</span>=<span class="hljs-string">"saveToLocalStorage"</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">type</span>=<span class="hljs-string">"email"</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥é‚®ç®±"</span>
Â Â Â Â Â Â Â Â /&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>å¤‡æ³¨ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">textarea</span>Â 
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">v-model</span>=<span class="hljs-string">"formData.remarks"</span>
Â Â Â Â Â Â Â Â Â Â @<span class="hljs-attr">input</span>=<span class="hljs-string">"saveToLocalStorage"</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å¤‡æ³¨ä¿¡æ¯"</span>
Â Â Â Â Â Â Â Â &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">textarea</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span>Â @<span class="hljs-attr">click</span>=<span class="hljs-string">"clearStorage"</span>&gt;</span>æ¸…é™¤ç¼“å­˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'UserForm'</span>,
Â Â <span class="hljs-title function_">data</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â {
Â Â Â Â Â Â <span class="hljs-attr">formData</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">''</span>,
Â Â Â Â Â Â Â Â <span class="hljs-attr">email</span>:Â <span class="hljs-string">''</span>,
Â Â Â Â Â Â Â Â <span class="hljs-attr">remarks</span>:Â <span class="hljs-string">''</span>
Â Â Â Â Â Â }
Â Â Â Â }
Â Â },
Â Â <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-comment">//Â ç»„ä»¶åŠ è½½æ—¶ä»Â localStorageÂ æ¢å¤æ•°æ®</span>
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">restoreFromLocalStorage</span>()
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â ç›‘å¬é¡µé¢å¸è½½äº‹ä»¶ï¼Œç¡®ä¿ç¦»å¼€å‰ä¿å­˜</span>
Â Â Â Â <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'beforeunload'</span>,Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">saveToLocalStorage</span>)
Â Â },
Â Â <span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-comment">//Â æ¸…ç†äº‹ä»¶ç›‘å¬</span>
Â Â Â Â <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'beforeunload'</span>,Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">saveToLocalStorage</span>)
Â Â },
Â Â <span class="hljs-attr">methods</span>:Â {
Â Â Â Â <span class="hljs-comment">//Â ä¿å­˜åˆ°Â localStorage</span>
Â Â Â Â <span class="hljs-title function_">saveToLocalStorage</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'userFormData'</span>,Â <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">formData</span>))
Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•°æ®å·²ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨'</span>)
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â ä»Â localStorageÂ æ¢å¤</span>
Â Â Â Â <span class="hljs-title function_">restoreFromLocalStorage</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â savedDataÂ =Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'userFormData'</span>)
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (savedData)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">formData</span>Â =Â <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(savedData)
Â Â Â Â Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•°æ®å·²ä»æœ¬åœ°å­˜å‚¨æ¢å¤'</span>)
Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â (error)Â {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ¢å¤æ•°æ®å¤±è´¥:'</span>,Â error)
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â }
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â å¤„ç†è¡¨å•æäº¤</span>
Â Â Â Â <span class="hljs-title function_">handleSubmit</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æäº¤æ•°æ®:'</span>,Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">formData</span>)
Â Â Â Â Â Â <span class="hljs-comment">//Â æäº¤æˆåŠŸåæ¸…é™¤ç¼“å­˜</span>
Â Â Â Â Â Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'userFormData'</span>)
Â Â Â Â Â Â <span class="hljs-title function_">alert</span>(<span class="hljs-string">'æäº¤æˆåŠŸï¼æœ¬åœ°ç¼“å­˜å·²æ¸…é™¤ã€‚'</span>)
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â æ¸…é™¤ç¼“å­˜</span>
Â Â Â Â <span class="hljs-title function_">clearStorage</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'userFormData'</span>)
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">formData</span>Â =Â {Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">''</span>,Â <span class="hljs-attr">email</span>:Â <span class="hljs-string">''</span>,Â <span class="hljs-attr">remarks</span>:Â <span class="hljs-string">''</span>Â }
Â Â Â Â Â Â <span class="hljs-title function_">alert</span>(<span class="hljs-string">'ç¼“å­˜å·²æ¸…é™¤'</span>)
Â Â Â Â }
Â Â }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-6">æ–¹æ³•2ï¼šVuex + æŒä¹…åŒ–æ’ä»¶æ–¹æ¡ˆ</h3>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¤§å‹åº”ç”¨ï¼Œéœ€è¦å…¨å±€çŠ¶æ€ç®¡ç†</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šå®‰è£…å¿…è¦ä¾èµ–</strong></p>
<pre><code class="hljs">npmÂ installÂ vuex-persistedstate
</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šåˆ›å»º Vuex Store å¹¶é…ç½®æŒä¹…åŒ–</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â store/index.js</span>
<span class="hljs-keyword">import</span>Â <span class="hljs-title class_">Vue</span>Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span>Â <span class="hljs-title class_">Vuex</span>Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'vuex'</span>
<span class="hljs-keyword">import</span>Â createPersistedStateÂ <span class="hljs-keyword">from</span>Â <span class="hljs-string">'vuex-persistedstate'</span>

<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">Vuex</span>)

<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Vuex</span>.<span class="hljs-title class_">Store</span>({
Â Â <span class="hljs-attr">state</span>:Â {
Â Â Â Â <span class="hljs-attr">userPreferences</span>:Â {
Â Â Â Â Â Â <span class="hljs-attr">theme</span>:Â <span class="hljs-string">'light'</span>,
Â Â Â Â Â Â <span class="hljs-attr">language</span>:Â <span class="hljs-string">'zh-CN'</span>,
Â Â Â Â Â Â <span class="hljs-attr">fontSize</span>:Â <span class="hljs-number">14</span>
Â Â Â Â },
Â Â Â Â <span class="hljs-attr">shoppingCart</span>:Â [],
Â Â Â Â <span class="hljs-attr">formStates</span>:Â {}Â <span class="hljs-comment">//Â å­˜å‚¨å„ä¸ªè¡¨å•çš„çŠ¶æ€</span>
Â Â },
Â Â 
Â Â <span class="hljs-attr">mutations</span>:Â {
Â Â Â Â <span class="hljs-title function_">SET_USER_PREFERENCE</span>(<span class="hljs-params">state,Â {Â key,Â valueÂ }</span>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (state.<span class="hljs-property">userPreferences</span>.<span class="hljs-title function_">hasOwnProperty</span>(key))Â {
Â Â Â Â Â Â Â Â state.<span class="hljs-property">userPreferences</span>[key]Â =Â value
Â Â Â Â Â Â }
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">ADD_TO_CART</span>(<span class="hljs-params">state,Â product</span>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â existingItemÂ =Â state.<span class="hljs-property">shoppingCart</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span>Â =&gt;</span>Â item.<span class="hljs-property">id</span>Â ===Â product.<span class="hljs-property">id</span>)
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (existingItem)Â {
Â Â Â Â Â Â Â Â existingItem.<span class="hljs-property">quantity</span>Â +=Â product.<span class="hljs-property">quantity</span>Â ||Â <span class="hljs-number">1</span>
Â Â Â Â Â Â }Â <span class="hljs-keyword">else</span>Â {
Â Â Â Â Â Â Â Â state.<span class="hljs-property">shoppingCart</span>.<span class="hljs-title function_">push</span>({Â ...product,Â <span class="hljs-attr">quantity</span>:Â product.<span class="hljs-property">quantity</span>Â ||Â <span class="hljs-number">1</span>Â })
Â Â Â Â Â Â }
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">SAVE_FORM_STATE</span>(<span class="hljs-params">state,Â {Â formId,Â dataÂ }</span>)Â {
Â Â Â Â Â Â state.<span class="hljs-property">formStates</span>[formId]Â =Â data
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">CLEAR_FORM_STATE</span>(<span class="hljs-params">state,Â formId</span>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (state.<span class="hljs-property">formStates</span>[formId])Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">delete</span>Â state.<span class="hljs-property">formStates</span>[formId]
Â Â Â Â Â Â }
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-attr">actions</span>:Â {
Â Â Â Â <span class="hljs-title function_">saveFormState</span>(<span class="hljs-params">{Â commitÂ },Â payload</span>)Â {
Â Â Â Â Â Â <span class="hljs-title function_">commit</span>(<span class="hljs-string">'SAVE_FORM_STATE'</span>,Â payload)
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â æ¸…é™¤è¿‡æœŸæ•°æ®ï¼ˆä¾‹å¦‚24å°æ—¶å‰çš„æ•°æ®ï¼‰</span>
Â Â Â Â <span class="hljs-title function_">clearExpiredStates</span>(<span class="hljs-params">{Â state,Â commitÂ }</span>)Â {
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â nowÂ =Â <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â expirationTimeÂ =Â <span class="hljs-number">24</span>Â *Â <span class="hljs-number">60</span>Â *Â <span class="hljs-number">60</span>Â *Â <span class="hljs-number">1000</span>Â <span class="hljs-comment">//Â 24å°æ—¶</span>
Â Â Â Â Â Â 
Â Â Â Â Â Â <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(state.<span class="hljs-property">formStates</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">formId</span>Â =&gt;</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â formDataÂ =Â state.<span class="hljs-property">formStates</span>[formId]
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (formData.<span class="hljs-property">_timestamp</span>Â &amp;&amp;Â nowÂ -Â formData.<span class="hljs-property">_timestamp</span>Â &gt;Â expirationTime)Â {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-title function_">commit</span>(<span class="hljs-string">'CLEAR_FORM_STATE'</span>,Â formId)
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â })
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-attr">getters</span>:Â {
Â Â Â Â <span class="hljs-attr">getFormState</span>:Â <span class="hljs-function">(<span class="hljs-params">state</span>)Â =&gt;</span>Â <span class="hljs-function">(<span class="hljs-params">formId</span>)Â =&gt;</span>Â {
Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â state.<span class="hljs-property">formStates</span>[formId]Â ||Â <span class="hljs-literal">null</span>
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-attr">cartTotalItems</span>:Â <span class="hljs-function"><span class="hljs-params">state</span>Â =&gt;</span>Â {
Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â state.<span class="hljs-property">shoppingCart</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">total,Â item</span>)Â =&gt;</span>Â totalÂ +Â item.<span class="hljs-property">quantity</span>,Â <span class="hljs-number">0</span>)
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-attr">plugins</span>:Â [
Â Â Â Â <span class="hljs-title function_">createPersistedState</span>({
Â Â Â Â Â Â <span class="hljs-attr">key</span>:Â <span class="hljs-string">'vuex-app-state'</span>,
Â Â Â Â Â Â <span class="hljs-attr">paths</span>:Â [
Â Â Â Â Â Â Â Â <span class="hljs-string">'userPreferences'</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">'shoppingCart'</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">'formStates'</span>
Â Â Â Â Â Â ],
Â Â Â Â Â Â 
Â Â Â Â Â Â <span class="hljs-comment">//Â è‡ªå®šä¹‰å­˜å‚¨æ–¹å¼ï¼Œå¯ä»¥æ·»åŠ åŠ å¯†</span>
Â Â Â Â Â Â <span class="hljs-attr">storage</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-attr">getItem</span>:Â <span class="hljs-function"><span class="hljs-params">key</span>Â =&gt;</span>Â {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â dataÂ =Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key)
Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è¿™é‡Œå¯ä»¥æ·»åŠ è§£å¯†é€»è¾‘</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(data)
Â Â Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">null</span>
Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â <span class="hljs-attr">setItem</span>:Â <span class="hljs-function">(<span class="hljs-params">key,Â value</span>)Â =&gt;</span>Â {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è¿™é‡Œå¯ä»¥æ·»åŠ åŠ å¯†é€»è¾‘</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(key,Â <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value))
Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â <span class="hljs-attr">removeItem</span>:Â <span class="hljs-function"><span class="hljs-params">key</span>Â =&gt;</span>Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(key)
Â Â Â Â Â Â },
Â Â Â Â Â Â 
Â Â Â Â Â Â <span class="hljs-comment">//Â æ•°æ®è¿‡æ»¤ï¼Œå¯ä»¥æ’é™¤ä¸éœ€è¦æŒä¹…åŒ–çš„æ•°æ®</span>
Â Â Â Â Â Â <span class="hljs-attr">reducer</span>:Â <span class="hljs-function">(<span class="hljs-params">state</span>)Â =&gt;</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â {Â formStates,Â ...restÂ }Â =Â state
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â è¿‡æ»¤æ‰æ—¶é—´æˆ³å­—æ®µ</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â filteredFormStatesÂ =Â {}
Â Â Â Â Â Â Â Â <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(formStates).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span>Â =&gt;</span>Â {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â {Â _timestamp,Â ...formDataÂ }Â =Â formStates[key]
Â Â Â Â Â Â Â Â Â Â filteredFormStates[key]Â =Â formData
Â Â Â Â Â Â Â Â })
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â {
Â Â Â Â Â Â Â Â Â Â ...rest,
Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">formStates</span>:Â filteredFormStates
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â }
Â Â Â Â })
Â Â ]
})
</code></pre>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šåœ¨ç»„ä»¶ä¸­ä½¿ç”¨</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--Â ProductList.vueÂ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"product-list"</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>å•†å“åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"products"</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â 
Â Â Â Â Â Â Â Â <span class="hljs-attr">v-for</span>=<span class="hljs-string">"productÂ inÂ products"</span>Â 
Â Â Â Â Â Â Â Â <span class="hljs-attr">:key</span>=<span class="hljs-string">"product.id"</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">class</span>=<span class="hljs-string">"product-card"</span>
Â Â Â Â Â Â &gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{{Â product.nameÂ }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä»·æ ¼:Â Â¥{{Â product.priceÂ }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â @<span class="hljs-attr">click</span>=<span class="hljs-string">"addToCart(product)"</span>&gt;</span>
Â Â Â Â Â Â Â Â Â Â åŠ å…¥è´­ç‰©è½¦
Â Â Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">&lt;!--Â è´­ç‰©è½¦é¢„è§ˆÂ --&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">class</span>=<span class="hljs-string">"cart-preview"</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>è´­ç‰©è½¦Â ({{Â cartTotalItemsÂ }}ä»¶å•†å“)<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">button</span>Â @<span class="hljs-attr">click</span>=<span class="hljs-string">"goToCart"</span>&gt;</span>å»ç»“ç®—<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span>Â {Â mapMutations,Â mapGettersÂ }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'vuex'</span>

<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'ProductList'</span>,
Â Â 
Â Â <span class="hljs-title function_">data</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â {
Â Â Â Â Â Â <span class="hljs-attr">products</span>:Â [
Â Â Â Â Â Â Â Â {Â <span class="hljs-attr">id</span>:Â <span class="hljs-number">1</span>,Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'å•†å“A'</span>,Â <span class="hljs-attr">price</span>:Â <span class="hljs-number">100</span>Â },
Â Â Â Â Â Â Â Â {Â <span class="hljs-attr">id</span>:Â <span class="hljs-number">2</span>,Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'å•†å“B'</span>,Â <span class="hljs-attr">price</span>:Â <span class="hljs-number">200</span>Â },
Â Â Â Â Â Â Â Â {Â <span class="hljs-attr">id</span>:Â <span class="hljs-number">3</span>,Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'å•†å“C'</span>,Â <span class="hljs-attr">price</span>:Â <span class="hljs-number">300</span>Â }
Â Â Â Â Â Â ]
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-attr">computed</span>:Â {
Â Â Â Â ...<span class="hljs-title function_">mapGetters</span>([<span class="hljs-string">'cartTotalItems'</span>])
Â Â },
Â Â 
Â Â <span class="hljs-attr">methods</span>:Â {
Â Â Â Â ...<span class="hljs-title function_">mapMutations</span>([<span class="hljs-string">'ADD_TO_CART'</span>]),
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">addToCart</span>(<span class="hljs-params">product</span>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">ADD_TO_CART</span>({
Â Â Â Â Â Â Â Â ...product,
Â Â Â Â Â Â Â Â <span class="hljs-attr">quantity</span>:Â <span class="hljs-number">1</span>
Â Â Â Â Â Â })
Â Â Â Â Â Â <span class="hljs-title function_">alert</span>(<span class="hljs-string">'å·²æ·»åŠ åˆ°è´­ç‰©è½¦ï¼åˆ·æ–°é¡µé¢æˆ–é‡æ–°æ‰“å¼€æµè§ˆå™¨ï¼Œè´­ç‰©è½¦æ•°æ®ä»ç„¶å­˜åœ¨ã€‚'</span>)
Â Â Â Â },
Â Â Â Â 
Â Â Â Â <span class="hljs-title function_">goToCart</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/cart'</span>)
Â Â Â Â }
Â Â }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-7">æ–¹æ³•3ï¼šä½¿ç”¨è·¯ç”±å®ˆå«ä¿å­˜é¡µé¢çŠ¶æ€</h3>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šåŸºäºè·¯ç”±çš„é¡µé¢çŠ¶æ€ä¿å­˜</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â router/index.js</span>
<span class="hljs-keyword">import</span>Â <span class="hljs-title class_">Vue</span>Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span>Â <span class="hljs-title class_">VueRouter</span>Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'vue-router'</span>

<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">VueRouter</span>)

<span class="hljs-keyword">const</span>Â routesÂ =Â [
Â Â {
Â Â Â Â <span class="hljs-attr">path</span>:Â <span class="hljs-string">'/form'</span>,
Â Â Â Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'FormPage'</span>,
Â Â Â Â <span class="hljs-attr">component</span>:Â <span class="hljs-function">()Â =&gt;</span>Â <span class="hljs-keyword">import</span>(<span class="hljs-string">'../views/FormPage.vue'</span>),
Â Â Â Â <span class="hljs-attr">meta</span>:Â {
Â Â Â Â Â Â <span class="hljs-attr">keepAlive</span>:Â <span class="hljs-literal">true</span>,Â <span class="hljs-comment">//Â éœ€è¦ç¼“å­˜</span>
Â Â Â Â Â Â <span class="hljs-attr">saveState</span>:Â <span class="hljs-literal">true</span>Â Â <span class="hljs-comment">//Â éœ€è¦ä¿å­˜çŠ¶æ€</span>
Â Â Â Â }
Â Â },
Â Â <span class="hljs-comment">//Â ...å…¶ä»–è·¯ç”±</span>
]

<span class="hljs-keyword">const</span>Â routerÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">VueRouter</span>({
Â Â <span class="hljs-attr">mode</span>:Â <span class="hljs-string">'history'</span>,
Â Â routes
})

<span class="hljs-comment">//Â é¡µé¢çŠ¶æ€ç¼“å­˜å¯¹è±¡</span>
<span class="hljs-keyword">const</span>Â pageStateCacheÂ =Â {}

<span class="hljs-comment">//Â å…¨å±€å‰ç½®å®ˆå«</span>
router.<span class="hljs-title function_">beforeEach</span>(<span class="hljs-function">(<span class="hljs-params">to,Â <span class="hljs-keyword">from</span>,Â next</span>)Â =&gt;</span>Â {
Â Â <span class="hljs-comment">//Â ç¦»å¼€éœ€è¦ä¿å­˜çŠ¶æ€çš„é¡µé¢æ—¶ï¼Œä¿å­˜å½“å‰é¡µé¢çŠ¶æ€</span>
Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-keyword">from</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">saveState</span>)Â {
Â Â Â Â <span class="hljs-title function_">savePageState</span>(<span class="hljs-keyword">from</span>)
Â Â }
Â Â 
Â Â <span class="hljs-title function_">next</span>()
})

<span class="hljs-comment">//Â å…¨å±€åç½®å®ˆå«</span>
router.<span class="hljs-title function_">afterEach</span>(<span class="hljs-function">(<span class="hljs-params">to,Â <span class="hljs-keyword">from</span></span>)Â =&gt;</span>Â {
Â Â <span class="hljs-comment">//Â è¿›å…¥éœ€è¦æ¢å¤çŠ¶æ€çš„é¡µé¢æ—¶ï¼Œæ¢å¤é¡µé¢çŠ¶æ€</span>
Â Â <span class="hljs-keyword">if</span>Â (to.<span class="hljs-property">meta</span>.<span class="hljs-property">saveState</span>)Â {
Â Â Â Â <span class="hljs-title function_">restorePageState</span>(to)
Â Â }
})

<span class="hljs-comment">/**
Â *Â ä¿å­˜é¡µé¢çŠ¶æ€
Â */</span>
<span class="hljs-keyword">function</span>Â <span class="hljs-title function_">savePageState</span>(<span class="hljs-params">route</span>)Â {
Â Â <span class="hljs-keyword">const</span>Â pageKeyÂ =Â <span class="hljs-title function_">getPageKey</span>(route)
Â Â <span class="hljs-keyword">const</span>Â stateToSaveÂ =Â {
Â Â Â Â <span class="hljs-attr">scrollPosition</span>:Â <span class="hljs-variable language_">window</span>.<span class="hljs-property">pageYOffset</span>,
Â Â Â Â <span class="hljs-attr">formData</span>:Â <span class="hljs-title function_">getFormDataFromPage</span>(),
Â Â Â Â <span class="hljs-attr">timestamp</span>:Â <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
Â Â }
Â Â 
Â Â pageStateCache[pageKey]Â =Â stateToSave
Â Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">`pageState_<span class="hljs-subst">${pageKey}</span>`</span>,Â <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(stateToSave))
}

<span class="hljs-comment">/**
Â *Â æ¢å¤é¡µé¢çŠ¶æ€
Â */</span>
<span class="hljs-keyword">function</span>Â <span class="hljs-title function_">restorePageState</span>(<span class="hljs-params">route</span>)Â {
Â Â <span class="hljs-keyword">const</span>Â pageKeyÂ =Â <span class="hljs-title function_">getPageKey</span>(route)
Â Â <span class="hljs-keyword">let</span>Â state
Â Â 
Â Â <span class="hljs-comment">//Â å…ˆä»å†…å­˜ç¼“å­˜ä¸­è·å–</span>
Â Â <span class="hljs-keyword">if</span>Â (pageStateCache[pageKey])Â {
Â Â Â Â stateÂ =Â pageStateCache[pageKey]
Â Â }Â <span class="hljs-keyword">else</span>Â {
Â Â Â Â <span class="hljs-comment">//Â å†…å­˜ä¸­æ²¡æœ‰åˆ™ä»localStorageè·å–</span>
Â Â Â Â <span class="hljs-keyword">const</span>Â savedStateÂ =Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">`pageState_<span class="hljs-subst">${pageKey}</span>`</span>)
Â Â Â Â <span class="hljs-keyword">if</span>Â (savedState)Â {
Â Â Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â stateÂ =Â <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(savedState)
Â Â Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â (e)Â {
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ¢å¤é¡µé¢çŠ¶æ€å¤±è´¥:'</span>,Â e)
Â Â Â Â Â Â }
Â Â Â Â }
Â Â }
Â Â 
Â Â <span class="hljs-keyword">if</span>Â (state)Â {
Â Â Â Â <span class="hljs-comment">//Â æ¢å¤æ»šåŠ¨ä½ç½®</span>
Â Â Â Â <span class="hljs-keyword">if</span>Â (state.<span class="hljs-property">scrollPosition</span>)Â {
Â Â Â Â Â Â <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">()Â =&gt;</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">scrollTo</span>(<span class="hljs-number">0</span>,Â state.<span class="hljs-property">scrollPosition</span>)
Â Â Â Â Â Â },Â <span class="hljs-number">100</span>)
Â Â Â Â }
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â æ¢å¤è¡¨å•æ•°æ®</span>
Â Â Â Â <span class="hljs-keyword">if</span>Â (state.<span class="hljs-property">formData</span>)Â {
Â Â Â Â Â Â <span class="hljs-title function_">restoreFormDataToPage</span>(state.<span class="hljs-property">formData</span>)
Â Â Â Â }
Â Â }
}

<span class="hljs-comment">/**
Â *Â ç”Ÿæˆé¡µé¢å”¯ä¸€æ ‡è¯†
Â */</span>
<span class="hljs-keyword">function</span>Â <span class="hljs-title function_">getPageKey</span>(<span class="hljs-params">route</span>)Â {
Â Â <span class="hljs-keyword">return</span>Â route.<span class="hljs-property">path</span>Â +Â <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(route.<span class="hljs-property">query</span>)Â +Â <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(route.<span class="hljs-property">params</span>)
}

<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â router
</code></pre>
<h3 data-id="heading-8">æ–¹æ³•4ï¼šä½¿ç”¨ keep-alive ç»„ä»¶ç¼“å­˜ç»„ä»¶å®ä¾‹</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!--Â App.vueÂ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
Â Â <span class="hljs-tag">&lt;<span class="hljs-name">div</span>Â <span class="hljs-attr">id</span>=<span class="hljs-string">"app"</span>&gt;</span>
Â Â Â Â <span class="hljs-comment">&lt;!--Â ä½¿ç”¨keep-aliveç¼“å­˜éœ€è¦ä¿æŒçŠ¶æ€çš„ç»„ä»¶Â --&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">keep-alive</span>Â <span class="hljs-attr">:include</span>=<span class="hljs-string">"cachedComponents"</span>&gt;</span>
Â Â Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>Â <span class="hljs-attr">v-if</span>=<span class="hljs-string">"$route.meta.keepAlive"</span>Â /&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">keep-alive</span>&gt;</span>
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">&lt;!--Â ä¸éœ€è¦ç¼“å­˜çš„ç»„ä»¶Â --&gt;</span>
Â Â Â Â <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>Â <span class="hljs-attr">v-if</span>=<span class="hljs-string">"!$route.meta.keepAlive"</span>Â /&gt;</span>
Â Â <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-attr">name</span>:Â <span class="hljs-string">'App'</span>,
Â Â <span class="hljs-title function_">data</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â {
Â Â Â Â Â Â <span class="hljs-attr">cachedComponents</span>:Â [<span class="hljs-string">'ProductList'</span>,Â <span class="hljs-string">'UserForm'</span>]Â <span class="hljs-comment">//Â éœ€è¦ç¼“å­˜çš„ç»„ä»¶å</span>
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-comment">//Â ä½¿ç”¨keep-aliveçš„ç»„ä»¶ä¼šè§¦å‘è¿™äº›ç”Ÿå‘½å‘¨æœŸ</span>
Â Â <span class="hljs-title function_">beforeRouteLeave</span>(<span class="hljs-params">to,Â <span class="hljs-keyword">from</span>,Â next</span>)Â {
Â Â Â Â <span class="hljs-comment">//Â åœ¨ç¦»å¼€å‰å¯ä»¥ä¿å­˜ä¸€äº›æ•°æ®</span>
Â Â Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-variable language_">this</span>.<span class="hljs-property">saveState</span>)Â {
Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">saveState</span>()
Â Â Â Â }
Â Â Â Â <span class="hljs-title function_">next</span>()
Â Â },
Â Â 
Â Â <span class="hljs-title function_">activated</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-comment">//Â ç»„ä»¶è¢«æ¿€æ´»æ—¶è°ƒç”¨</span>
Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶è¢«æ¿€æ´»ï¼Œå¯ä»¥æ¢å¤çŠ¶æ€'</span>)
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">restoreState</span>Â &amp;&amp;Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">restoreState</span>()
Â Â },
Â Â 
Â Â <span class="hljs-title function_">deactivated</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-comment">//Â ç»„ä»¶è¢«åœç”¨æ—¶è°ƒç”¨</span>
Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶è¢«åœç”¨ï¼Œå¯ä»¥ä¿å­˜çŠ¶æ€'</span>)
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">saveState</span>Â &amp;&amp;Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">saveState</span>()
Â Â }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-9">å››ã€é«˜çº§æ–¹æ¡ˆï¼šIndexedDB å­˜å‚¨å¤§é‡æ•°æ®</h2>
<p>å½“éœ€è¦å­˜å‚¨å¤§é‡æ•°æ®æˆ–å¤æ‚å¯¹è±¡æ—¶ï¼ŒIndexedDB æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â utils/db.js</span>
<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">StateDB</span>Â {
Â Â <span class="hljs-title function_">constructor</span>(<span class="hljs-params">dbNameÂ =Â <span class="hljs-string">'VueAppState'</span>,Â versionÂ =Â <span class="hljs-number">1</span></span>)Â {
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">dbName</span>Â =Â dbName
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">version</span>Â =Â version
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>Â =Â <span class="hljs-literal">null</span>
Â Â }

Â Â <span class="hljs-comment">//Â æ‰“å¼€æ•°æ®åº“</span>
Â Â <span class="hljs-title function_">open</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,Â reject</span>)Â =&gt;</span>Â {
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â requestÂ =Â indexedDB.<span class="hljs-title function_">open</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">dbName</span>,Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">version</span>)

Â Â Â Â Â Â request.<span class="hljs-property">onerror</span>Â =Â <span class="hljs-function">()Â =&gt;</span>Â <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>)
Â Â Â Â Â Â request.<span class="hljs-property">onsuccess</span>Â =Â <span class="hljs-function">()Â =&gt;</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>Â =Â request.<span class="hljs-property">result</span>
Â Â Â Â Â Â Â Â <span class="hljs-title function_">resolve</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>)
Â Â Â Â Â Â }

Â Â Â Â Â Â request.<span class="hljs-property">onupgradeneeded</span>Â =Â <span class="hljs-function">(<span class="hljs-params">event</span>)Â =&gt;</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â dbÂ =Â event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â åˆ›å»ºå¯¹è±¡å­˜å‚¨ç©ºé—´</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (!db.<span class="hljs-property">objectStoreNames</span>.<span class="hljs-title function_">contains</span>(<span class="hljs-string">'pageStates'</span>))Â {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â storeÂ =Â db.<span class="hljs-title function_">createObjectStore</span>(<span class="hljs-string">'pageStates'</span>,Â {Â <span class="hljs-attr">keyPath</span>:Â <span class="hljs-string">'id'</span>Â })
Â Â Â Â Â Â Â Â Â Â store.<span class="hljs-title function_">createIndex</span>(<span class="hljs-string">'timestamp'</span>,Â <span class="hljs-string">'timestamp'</span>,Â {Â <span class="hljs-attr">unique</span>:Â <span class="hljs-literal">false</span>Â })
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (!db.<span class="hljs-property">objectStoreNames</span>.<span class="hljs-title function_">contains</span>(<span class="hljs-string">'userData'</span>))Â {
Â Â Â Â Â Â Â Â Â Â db.<span class="hljs-title function_">createObjectStore</span>(<span class="hljs-string">'userData'</span>,Â {Â <span class="hljs-attr">keyPath</span>:Â <span class="hljs-string">'key'</span>Â })
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â }
Â Â Â Â })
Â Â }

Â Â <span class="hljs-comment">//Â ä¿å­˜é¡µé¢çŠ¶æ€</span>
Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-title function_">savePageState</span>(<span class="hljs-params">pageId,Â state</span>)Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>)Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">open</span>()
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,Â reject</span>)Â =&gt;</span>Â {
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â transactionÂ =Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">transaction</span>([<span class="hljs-string">'pageStates'</span>],Â <span class="hljs-string">'readwrite'</span>)
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â storeÂ =Â transaction.<span class="hljs-title function_">objectStore</span>(<span class="hljs-string">'pageStates'</span>)
Â Â Â Â Â Â 
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â recordÂ =Â {
Â Â Â Â Â Â Â Â <span class="hljs-attr">id</span>:Â pageId,
Â Â Â Â Â Â Â Â <span class="hljs-attr">state</span>:Â state,
Â Â Â Â Â Â Â Â <span class="hljs-attr">timestamp</span>:Â <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
Â Â Â Â Â Â }
Â Â Â Â Â Â 
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â requestÂ =Â store.<span class="hljs-title function_">put</span>(record)
Â Â Â Â Â Â 
Â Â Â Â Â Â request.<span class="hljs-property">onsuccess</span>Â =Â <span class="hljs-function">()Â =&gt;</span>Â <span class="hljs-title function_">resolve</span>()
Â Â Â Â Â Â request.<span class="hljs-property">onerror</span>Â =Â <span class="hljs-function">()Â =&gt;</span>Â <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>)
Â Â Â Â })
Â Â }

Â Â <span class="hljs-comment">//Â è·å–é¡µé¢çŠ¶æ€</span>
Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-title function_">getPageState</span>(<span class="hljs-params">pageId</span>)Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>)Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">open</span>()
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,Â reject</span>)Â =&gt;</span>Â {
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â transactionÂ =Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">transaction</span>([<span class="hljs-string">'pageStates'</span>],Â <span class="hljs-string">'readonly'</span>)
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â storeÂ =Â transaction.<span class="hljs-title function_">objectStore</span>(<span class="hljs-string">'pageStates'</span>)
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â requestÂ =Â store.<span class="hljs-title function_">get</span>(pageId)
Â Â Â Â Â Â 
Â Â Â Â Â Â request.<span class="hljs-property">onsuccess</span>Â =Â <span class="hljs-function">()Â =&gt;</span>Â <span class="hljs-title function_">resolve</span>(request.<span class="hljs-property">result</span>?.<span class="hljs-property">state</span>)
Â Â Â Â Â Â request.<span class="hljs-property">onerror</span>Â =Â <span class="hljs-function">()Â =&gt;</span>Â <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>)
Â Â Â Â })
Â Â }

Â Â <span class="hljs-comment">//Â æ¸…ç†è¿‡æœŸæ•°æ®ï¼ˆè¶…è¿‡7å¤©ï¼‰</span>
Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-title function_">cleanupOldStates</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>)Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">open</span>()
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">const</span>Â sevenDaysAgoÂ =Â <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()Â -Â (<span class="hljs-number">7</span>Â *Â <span class="hljs-number">24</span>Â *Â <span class="hljs-number">60</span>Â *Â <span class="hljs-number">60</span>Â *Â <span class="hljs-number">1000</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve,Â reject</span>)Â =&gt;</span>Â {
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â transactionÂ =Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">transaction</span>([<span class="hljs-string">'pageStates'</span>],Â <span class="hljs-string">'readwrite'</span>)
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â storeÂ =Â transaction.<span class="hljs-title function_">objectStore</span>(<span class="hljs-string">'pageStates'</span>)
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â indexÂ =Â store.<span class="hljs-title function_">index</span>(<span class="hljs-string">'timestamp'</span>)
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â rangeÂ =Â <span class="hljs-title class_">IDBKeyRange</span>.<span class="hljs-title function_">upperBound</span>(sevenDaysAgo)
Â Â Â Â Â Â 
Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â requestÂ =Â index.<span class="hljs-title function_">openCursor</span>(range)
Â Â Â Â Â Â 
Â Â Â Â Â Â request.<span class="hljs-property">onsuccess</span>Â =Â <span class="hljs-function">(<span class="hljs-params">event</span>)Â =&gt;</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â cursorÂ =Â event.<span class="hljs-property">target</span>.<span class="hljs-property">result</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (cursor)Â {
Â Â Â Â Â Â Â Â Â Â cursor.<span class="hljs-title function_">delete</span>()
Â Â Â Â Â Â Â Â Â Â cursor.<span class="hljs-title function_">continue</span>()
Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">else</span>Â {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-title function_">resolve</span>()
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â }
Â Â Â Â Â Â 
Â Â Â Â Â Â request.<span class="hljs-property">onerror</span>Â =Â <span class="hljs-function">()Â =&gt;</span>Â <span class="hljs-title function_">reject</span>(request.<span class="hljs-property">error</span>)
Â Â Â Â })
Â Â }
}

<span class="hljs-comment">//Â åˆ›å»ºå•ä¾‹å®ä¾‹</span>
<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">const</span>Â stateDBÂ =Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">StateDB</span>()

<span class="hljs-comment">//Â åœ¨Â VueÂ æ’ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">const</span>Â <span class="hljs-title class_">StatePersistencePlugin</span>Â =Â {
Â Â <span class="hljs-title function_">install</span>(<span class="hljs-params">Vue</span>)Â {
Â Â Â Â <span class="hljs-title class_">Vue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">$stateDB</span>Â =Â stateDB
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â æ··å…¥æ–¹æ³•åˆ°æ‰€æœ‰ç»„ä»¶</span>
Â Â Â Â <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">mixin</span>({
Â Â Â Â Â Â <span class="hljs-attr">methods</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-title function_">saveComponentState</span>(<span class="hljs-params">stateKey,Â data</span>)Â {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â componentIdÂ =Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">$options</span>.<span class="hljs-property">name</span>Â ||Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>?.<span class="hljs-property">path</span>Â ||Â <span class="hljs-string">'unknown'</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â fullKeyÂ =Â <span class="hljs-string">`<span class="hljs-subst">${componentId}</span>_<span class="hljs-subst">${stateKey}</span>`</span>
Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">$stateDB</span>.<span class="hljs-title function_">savePageState</span>(fullKey,Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â data,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">savedAt</span>:Â <span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>()
Â Â Â Â Â Â Â Â Â Â Â Â })
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`çŠ¶æ€å·²ä¿å­˜:Â <span class="hljs-subst">${fullKey}</span>`</span>)
Â Â Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â (error)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä¿å­˜çŠ¶æ€å¤±è´¥:'</span>,Â error)
Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">async</span>Â <span class="hljs-title function_">loadComponentState</span>(<span class="hljs-params">stateKey</span>)Â {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â componentIdÂ =Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">$options</span>.<span class="hljs-property">name</span>Â ||Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">$route</span>?.<span class="hljs-property">path</span>Â ||Â <span class="hljs-string">'unknown'</span>
Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â fullKeyÂ =Â <span class="hljs-string">`<span class="hljs-subst">${componentId}</span>_<span class="hljs-subst">${stateKey}</span>`</span>
Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â stateÂ =Â <span class="hljs-keyword">await</span>Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">$stateDB</span>.<span class="hljs-title function_">getPageState</span>(fullKey)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â state?.<span class="hljs-property">data</span>Â ||Â <span class="hljs-literal">null</span>
Â Â Â Â Â Â Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â (error)Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åŠ è½½çŠ¶æ€å¤±è´¥:'</span>,Â error)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">null</span>
Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â }
Â Â Â Â })
Â Â }
}

<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â <span class="hljs-title class_">StatePersistencePlugin</span>
</code></pre>
<h2 data-id="heading-10">äº”ã€æœ€ä½³å®è·µæ€»ç»“</h2>
<h3 data-id="heading-11">1.Â <strong>åˆ†å±‚å­˜å‚¨ç­–ç•¥</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â æ ¹æ®æ•°æ®ç±»å‹é€‰æ‹©ä¸åŒçš„å­˜å‚¨æ–¹å¼</span>
<span class="hljs-keyword">const</span>Â storageStrategyÂ =Â {
Â Â <span class="hljs-comment">//Â ç”¨æˆ·è®¾ç½®ï¼šæ°¸ä¹…å­˜å‚¨</span>
Â Â <span class="hljs-attr">userPreferences</span>:Â <span class="hljs-variable language_">localStorage</span>,
Â Â 
Â Â <span class="hljs-comment">//Â è´­ç‰©è½¦ï¼šIndexedDBÂ +Â æœåŠ¡ç«¯åŒæ­¥</span>
Â Â <span class="hljs-attr">shoppingCart</span>:Â {
Â Â Â Â <span class="hljs-attr">local</span>:Â indexedDB,
Â Â Â Â <span class="hljs-attr">remote</span>:Â <span class="hljs-string">'api/cart'</span>
Â Â },
Â Â 
Â Â <span class="hljs-comment">//Â è¡¨å•è‰ç¨¿ï¼šsessionStorageï¼ˆä¼šè¯çº§ï¼‰</span>
Â Â <span class="hljs-attr">formDraft</span>:Â sessionStorage,
Â Â 
Â Â <span class="hljs-comment">//Â é¡µé¢æ»šåŠ¨ä½ç½®ï¼šå†…å­˜ç¼“å­˜</span>
Â Â <span class="hljs-attr">scrollPosition</span>:Â <span class="hljs-string">'memory'</span>
}
</code></pre>
<h3 data-id="heading-12">2.Â <strong>æ•°æ®ç‰ˆæœ¬ç®¡ç†</strong></h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">//Â æ·»åŠ ç‰ˆæœ¬æ§åˆ¶ï¼Œé¿å…æ•°æ®ç»“æ„å˜åŒ–å¯¼è‡´çš„é—®é¢˜</span>
<span class="hljs-keyword">const</span>Â saveWithVersionÂ =Â (key,Â <span class="hljs-keyword">data</span>)Â =&gt;Â {
Â Â <span class="hljs-keyword">const</span>Â payloadÂ =Â {
Â Â Â Â version:Â <span class="hljs-string">'1.0.0'</span>,
Â Â Â Â savedAt:Â newÂ Date().toISOString(),
Â Â Â Â <span class="hljs-keyword">data</span>:Â <span class="hljs-keyword">data</span>
Â Â }
Â Â localStorage.setItem(key,Â JSON.stringify(payload))
}

<span class="hljs-keyword">const</span>Â loadWithVersionÂ =Â (key,Â currentVersionÂ =Â <span class="hljs-string">'1.0.0'</span>)Â =&gt;Â {
Â Â <span class="hljs-keyword">const</span>Â savedÂ =Â localStorage.getItem(key)
Â Â <span class="hljs-keyword">if</span>Â (!saved)Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">null</span>
Â Â 
Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â <span class="hljs-keyword">const</span>Â {Â version,Â <span class="hljs-keyword">data</span>Â }Â =Â JSON.parse(saved)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">//Â ç‰ˆæœ¬è¿ç§»é€»è¾‘</span>
Â Â Â Â <span class="hljs-keyword">if</span>Â (versionÂ !==Â currentVersion)Â {
Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â migrateData(<span class="hljs-keyword">data</span>,Â version,Â currentVersion)
Â Â Â Â }
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-keyword">data</span>
Â Â }Â <span class="hljs-keyword">catch</span>Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">null</span>
Â Â }
}
</code></pre>
<h3 data-id="heading-13">3.Â <strong>è‡ªåŠ¨ä¿å­˜ä¸é˜²æŠ–ä¼˜åŒ–</strong></h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span>Â {Â debounceÂ }Â <span class="hljs-keyword">from</span>Â <span class="hljs-string">'lodash'</span>

<span class="hljs-keyword">export</span>Â <span class="hljs-keyword">default</span>Â {
Â Â <span class="hljs-title function_">data</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-keyword">return</span>Â {
Â Â Â Â Â Â <span class="hljs-attr">formData</span>:Â {},
Â Â Â Â Â Â <span class="hljs-attr">autoSaveEnabled</span>:Â <span class="hljs-literal">true</span>
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-title function_">created</span>(<span class="hljs-params"/>)Â {
Â Â Â Â <span class="hljs-comment">//Â ä½¿ç”¨é˜²æŠ–é¿å…é¢‘ç¹ä¿å­˜</span>
Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-property">debouncedSave</span>Â =Â <span class="hljs-title function_">debounce</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">saveFormState</span>,Â <span class="hljs-number">1000</span>)
Â Â },
Â Â 
Â Â <span class="hljs-attr">watch</span>:Â {
Â Â Â Â <span class="hljs-attr">formData</span>:Â {
Â Â Â Â Â Â <span class="hljs-attr">deep</span>:Â <span class="hljs-literal">true</span>,
Â Â Â Â Â Â <span class="hljs-title function_">handler</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (<span class="hljs-variable language_">this</span>.<span class="hljs-property">autoSaveEnabled</span>)Â {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">debouncedSave</span>()
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â }
Â Â Â Â }
Â Â },
Â Â 
Â Â <span class="hljs-attr">methods</span>:Â {
Â Â Â Â <span class="hljs-title function_">saveFormState</span>(<span class="hljs-params"/>)Â {
Â Â Â Â Â Â <span class="hljs-comment">//Â ä¿å­˜é€»è¾‘</span>
Â Â Â Â }
Â Â }
}
</code></pre>
<h2 data-id="heading-14">å…­ã€å®‰å…¨æ³¨æ„äº‹é¡¹</h2>
<ol>
<li>
<p>1.Â <strong>æ•æ„Ÿä¿¡æ¯ä¸è¦ä¿å­˜åœ¨å®¢æˆ·ç«¯</strong></p>
</li>
<li>
<ul>
<li>â€¢ å¯†ç ã€tokenç­‰æ•æ„Ÿä¿¡æ¯é¿å…æœ¬åœ°å­˜å‚¨</li>
<li>â€¢ å¿…è¦æ—¶ä½¿ç”¨åŠ å¯†å­˜å‚¨</li>
</ul>
</li>
<li>
<p>2.Â <strong>æ•°æ®æ¸…ç†æœºåˆ¶</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//Â å®šæœŸæ¸…ç†è¿‡æœŸæ•°æ®</span>
<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">()Â =&gt;</span>Â {
Â Â <span class="hljs-keyword">const</span>Â oneDayAgoÂ =Â <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()Â -Â <span class="hljs-number">24</span>Â *Â <span class="hljs-number">60</span>Â *Â <span class="hljs-number">60</span>Â *Â <span class="hljs-number">1000</span>
Â Â <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">localStorage</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span>Â =&gt;</span>Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (key.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'temp_'</span>))Â {
Â Â Â Â Â Â <span class="hljs-keyword">try</span>Â {
Â Â Â Â Â Â Â Â <span class="hljs-keyword">const</span>Â itemÂ =Â <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(<span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(key))
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (item.<span class="hljs-property">timestamp</span>Â &amp;&amp;Â item.<span class="hljs-property">timestamp</span>Â &lt;Â oneDayAgo)Â {
Â Â Â Â Â Â Â Â Â Â <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(key)
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â }Â <span class="hljs-keyword">catch</span>Â {}
Â Â Â Â }
Â Â })
},Â <span class="hljs-number">60</span>Â *Â <span class="hljs-number">60</span>Â *Â <span class="hljs-number">1000</span>)Â <span class="hljs-comment">//Â æ¯å°æ—¶æ¸…ç†ä¸€æ¬¡</span>
</code></pre>
</li>
</ol>
<h2 data-id="heading-15">ç»“è¯­</h2>
<p>ä¿å­˜é¡µé¢çŠ¶æ€æ˜¯æå‡ Vue åº”ç”¨ç”¨æˆ·ä½“éªŒçš„å…³é”®æŠ€æœ¯ã€‚æ ¹æ®ä¸åŒçš„åœºæ™¯éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©ï¼š</p>
<ul>
<li>â€¢Â <strong>ç®€å•åœºæ™¯</strong>ï¼šä½¿ç”¨ localStorage æˆ– sessionStorage</li>
<li>â€¢Â <strong>å¤æ‚åº”ç”¨</strong>ï¼šVuex/Pinia + æŒä¹…åŒ–æ’ä»¶</li>
<li>â€¢Â <strong>å¤§é‡æ•°æ®</strong>ï¼šIndexedDB å­˜å‚¨</li>
<li>â€¢Â <strong>ç»„ä»¶ç¼“å­˜</strong>ï¼škeep-alive + è·¯ç”±å®ˆå«</li>
</ul>
<p>è®°ä½ï¼Œæœ€å¥½çš„æ–¹æ¡ˆæ˜¯<strong>åˆ†å±‚å­˜å‚¨ã€æŒ‰éœ€ä½¿ç”¨</strong>ã€‚åˆç†ä½¿ç”¨çŠ¶æ€ä¿å­˜ï¼Œè®©ä½ çš„ Vue åº”ç”¨æ›´åŠ å‹å¥½å’Œå¥å£®ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¾èµ–é¢„æ„å»º]]></title>    <link>https://juejin.cn/post/7591702898080301071</link>    <guid>https://juejin.cn/post/7591702898080301071</guid>    <pubDate>2026-01-05T13:26:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591702898080301071" data-draft-id="7591703562134028322" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¾èµ–é¢„æ„å»º"/> <meta itemprop="keywords" content="Vite"/> <meta itemprop="datePublished" content="2026-01-05T13:26:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="coderjc"/> <meta itemprop="url" content="https://juejin.cn/user/4279763486908104"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¾èµ–é¢„æ„å»º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4279763486908104/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    coderjc
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T13:26:08.000Z" title="Mon Jan 05 2026 13:26:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å¦‚æœä½ ç”¨è¿‡ viteï¼Œé‚£ä¹ˆæƒ³å¿…å¯¹<strong>ä¾èµ–é¢„æ„å»º</strong>è¿™ä¸€ä¸ªåè¯å¹¶ä¸é™Œç”Ÿï¼Œæœ¬æ–‡å°±åŸºäºæ­¤æ¥è¿›è¡Œä¸€äº›æ¢è®¨ã€‚</p>
<p>PSï¼šæœ¬æ–‡åˆ†ææ¥è‡ªäºç¬”è€…çš„ä¸ªäººç†è§£ï¼Œå¦‚æœå‘ç°äº†é”™è¯¯ï¼Œå¯ä»¥åœ¨è¿›è¡ŒæŒ‡æ­£ã€‚å½“ç„¶è¯´çš„æ˜¯ vite ä¾èµ–äº esbuild å’Œ rollup çš„æ—¶å€™ï¼Œè€Œé rolldownã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦ä¾èµ–é¢„æ„å»º</h2>
<blockquote>
<p>é€šå¸¸å¦‚æœè¦çŸ¥é“ä¸ºä»€ä¹ˆéœ€è¦ä¸€ä¸ªä¸œè¥¿ï¼Œæˆ‘ä»¬é¦–è¦çš„å‰æå°±æ˜¯çŸ¥é“â€œå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿâ€ã€‚è¿™ä¸€ç‚¹å…¶å® vite çš„æ–‡æ¡£å·²ç»ç»™å‡ºäº†ï¼Œä¸»è¦æ˜¯ä¸¤ä¸ªç›®çš„ï¼š<strong>è§„èŒƒå…¼å®¹æ€§</strong>å’Œ<strong>æ€§èƒ½</strong>ã€‚</p>
</blockquote>
<h3 data-id="heading-1">æ€§èƒ½</h3>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œæµè§ˆå™¨æ˜¯å¯ä»¥é€šè¿‡ç»™ script æ ‡ç­¾æ·»åŠ  type="module" æ¥è®©å…¶æ”¯æŒæ¨¡å—åŒ–çš„å¯¼å…¥ï¼Œæ‰€ä»¥ï¼Œæˆ‘ç®€å•å†™äº†ä¸€ä¸ª demoï¼Œdemo çš„ç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">ä¾èµ–é¢„æ„å»º
â”œâ”€â”€ <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.js</span>
â”œâ”€â”€ <span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.js</span>
â”œâ”€â”€ c<span class="hljs-selector-class">.js</span>
â”œâ”€â”€ index<span class="hljs-selector-class">.html</span>
â””â”€â”€ index<span class="hljs-selector-class">.js</span>
</code></pre>
<p>æ–‡ä»¶å†…å®¹å¾ˆç®€å•ï¼Œåªè¦çœ‹ä¸€ä¸‹ index.js å³å¯ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { a } <span class="hljs-keyword">from</span> <span class="hljs-string">'./a.js'</span>
<span class="hljs-keyword">import</span> { b } <span class="hljs-keyword">from</span> <span class="hljs-string">'./b.js'</span>
<span class="hljs-keyword">import</span> { c } <span class="hljs-keyword">from</span> <span class="hljs-string">'./c.js'</span>
â€‹
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'index.js -- start'</span>)
â€‹
<span class="hljs-title function_">a</span>()
<span class="hljs-title function_">b</span>()
<span class="hljs-title function_">c</span>()
â€‹
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'index.js -- end'</span>)
</code></pre>
<p>è¾“å‡ºä¸ºï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">index</span><span class="hljs-selector-class">.js</span> <span class="hljs-selector-tag">--</span> <span class="hljs-selector-tag">start</span>
<span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.js</span>:<span class="hljs-number">2</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-class">.js</span>
<span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.js</span>:<span class="hljs-number">2</span> <span class="hljs-selector-tag">b</span><span class="hljs-selector-class">.js</span>
<span class="hljs-selector-tag">c</span><span class="hljs-selector-class">.js</span>:<span class="hljs-number">2</span> <span class="hljs-selector-tag">c</span><span class="hljs-selector-class">.js</span>
<span class="hljs-selector-tag">index</span><span class="hljs-selector-class">.js</span>:<span class="hljs-number">11</span> <span class="hljs-selector-tag">index</span><span class="hljs-selector-class">.js</span> <span class="hljs-selector-tag">--</span> <span class="hljs-selector-tag">end</span>
</code></pre>
<p>å¥½åƒä¸€åˆ‡éƒ½æ˜¯å²æœˆé™å¥½ï¼Œä½†æ˜¯å…¶å®å®ƒèƒŒåå­˜åœ¨ä¸€ä¸ªâ€œè´Ÿæ‹…â€ï¼Œæˆ‘ä»¬æ¥æ‰“å¼€ç½‘ç»œé¢æ¿å°±å¯ä»¥çœ‹åˆ°äº†ï¼Œå¦‚å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c0b8422acb24569a9eb01d4b67fd39f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29kZXJqYw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768224367&amp;x-signature=yoD4ASaidkx1ZFLbbgrFPCED%2Ba8%3D" alt="image-20260105003506147.png" loading="lazy"/></p>
<p>ä¸‰ä¸ªå¯¼å…¥å°±æœ‰ä¸‰ä¸ªè¯·æ±‚ï¼Œä¸€ä¸ªè¯·æ±‚å°±æ˜¯ä¸€ä¸ªç½‘ç»œå¼€é”€ï¼Œè€Œå¦‚æœæ˜¯ä¸€ä¸ªæˆç†Ÿçš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œä¸€ä¸ªåŒ…å°±å¯èƒ½ä¼šæœ‰å‡ åå‡ ç™¾ä¸ªæ–‡ä»¶çš„å¯¼å…¥ï¼Œè¿™è¿˜æ˜¯åªæ˜¯ä¸€ä¸ªä¾èµ–ï¼Œå®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬çš„é¡¹ç›®æ˜¯ä¸ä¼šæ­¢æ­¥äºä¸€ä¸ªä¾èµ–çš„ã€‚æ‰€ä»¥ç®¡ä¸­çª¥è±¹ï¼Œå°±ç®—å†æœ¬åœ°ç¯å¢ƒï¼Œè¿™ä¸ªç½‘ç»œå¼€é”€ä¹Ÿå¾ˆéš¾æ‰¿å—ã€‚</p>
<p>å¯èƒ½æ–‡å­—çš„æè¿°è¿˜æ˜¯ç•¥æ˜¾è‹ç™½ï¼Œé‚£ä¹ˆè®©æˆ‘ä»¬çœ‹ä¸€ä¸ªå¼•å…¥ lodash çš„ä¾‹å­ï¼Œindex.js æ–‡ä»¶å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å› ä¸ºè¿™æ˜¯æµè§ˆå™¨ç¯å¢ƒï¼Œæ‰€ä»¥è¦çŸ¥é“ç²¾ç¡®çš„å…·ä½“çš„ js æ–‡ä»¶</span>
<span class="hljs-keyword">import</span> { toUpper } <span class="hljs-keyword">from</span> <span class="hljs-string">'./node_modules/lodash-es/lodash.js'</span>
â€‹
<span class="hljs-keyword">const</span> msg = <span class="hljs-string">'hello world'</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">toUpper</span>(msg))
â€‹
</code></pre>
<p>è¯·æ±‚æ•ˆæœå¦‚å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f78c374380e34037b11771b1996a6d61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29kZXJqYw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768224367&amp;x-signature=QvbaNZIgt6Q%2FYT5%2Fi4RPGLIFKx4%3D" alt="image-20260105005215251.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªæ•°é‡è¿˜æ˜¯å¾ˆææ€–çš„ã€‚è€Œå¦‚æœæœ‰ä¾èµ–é¢„æ„å»ºå‘¢ï¼Ÿæˆ‘ä»¬çœ‹ä¸€ä¸‹è¯·æ±‚çš„æ•ˆæœå›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f25aee4cbdc4daf985d608fb1e619ac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29kZXJqYw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768224367&amp;x-signature=k5bFMEkHaaUSLr3UBX52SGHRYl8%3D" alt="image-20260105005717833.png" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ª lodash è¯·æ±‚æ•°é‡éƒ½é›†ä¸­åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼Œé‚£ä¹ˆç½‘ç»œå¼€é”€å°±å°‘å¾—å¤šã€‚è€Œè™½ç„¶è¿™ä¸ªæ–‡ä»¶çš„ä½“ç§¯å¤§å¾ˆå¤šï¼Œä½†æ˜¯åªéœ€è¦è¿›è¡Œä¸€æ¬¡ç½‘ç»œçš„ä¼ è¾“å°±å¯ä»¥äº†ã€‚è¿™ç§å¤§å®¶å¯ä»¥å°è¯•ç”¨ä¸€ä¸ªè¾ƒå°çš„ node_modules ç›®å½•ï¼Œè¿›è¡Œå¤åˆ¶ä¼ è¾“æˆ–è€…æ‰“åŒ…å‹ç¼©ï¼Œå®ƒçš„æ—¶é—´æ¯”æ­£å¸¸å¤§æ–‡ä»¶çš„æ—¶é—´è¦å¤šçš„å¤šï¼Œ</p>
<h3 data-id="heading-2">è§„èŒƒå…¼å®¹æ€§</h3>
<p>æ€§èƒ½é—®é¢˜è§£å†³äº†ï¼Œä½†è¿˜æœ‰ä¸€ä¸ªæ›´æ£˜æ‰‹çš„é—®é¢˜åœ¨ç­‰ç€æˆ‘ä»¬ã€‚</p>
<p>ä¸çŸ¥é“ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ï¼Œnpm ä¸Šé‚£äº›ç¬¬ä¸‰æ–¹åŒ…ï¼Œå®ƒå†…éƒ¨ç”¨çš„æ˜¯ä»€ä¹ˆæ¨¡å—è§„èŒƒï¼Ÿä½ ä¸çŸ¥é“å®ƒæ˜¯ commonjs è¿˜æ˜¯ esmoduleã€‚</p>
<p>è€Œè¿™å°±ä¼šå¯¼è‡´ä¸€ä¸ªæ¯”è¾ƒå°´å°¬çš„çŠ¶å†µï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼Œå‡è®¾æŸä¸ªç¬¬ä¸‰æ–¹åŒ… <code>some-package</code> å†…éƒ¨æ˜¯è¿™æ ·å†™çš„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// some-package/index.js</span>
<span class="hljs-keyword">const</span> helper = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./helper.js'</span>)
â€‹
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
 Â <span class="hljs-title function_">doSomething</span>(<span class="hljs-params"/>) {
 Â  Â <span class="hljs-keyword">return</span> helper.<span class="hljs-title function_">process</span>()
  }
}
</code></pre>
<p>å½“ä½ åœ¨é¡¹ç›®é‡Œ <code>import { doSomething } from 'some-package'</code> çš„æ—¶å€™ï¼Œä½ æ•¢è¿™ä¹ˆç”¨ï¼Œæµè§ˆå™¨å°±æ•¢æ¥è¡¨æ¼”ä¸€ä¸‹ç½¢å·¥ï¼Œå› ä¸ºå®ƒå‹æ ¹ä¸è®¤è¯† <code>require</code> å’Œ <code>module.exports</code> æ˜¯å•¥ã€‚</p>
<p>æ‰€ä»¥å°±éœ€è¦é€šè¿‡ä¾èµ–é¢„æ„å»ºæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®ƒä¼šæŠŠè¿™äº› CommonJS æ ¼å¼çš„ä»£ç è½¬æ¢æˆ ESM æ ¼å¼ï¼Œå°±åƒä¸€ä¸ªç¿»è¯‘å®˜ï¼ŒæŠŠ"æ–¹è¨€"ç¿»è¯‘æˆæµè§ˆå™¨èƒ½å¬æ‡‚çš„"æ™®é€šè¯"ã€‚è½¬æ¢åçš„ä»£ç å¤§æ¦‚å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é¢„æ„å»ºå</span>
<span class="hljs-keyword">import</span> helper <span class="hljs-keyword">from</span> <span class="hljs-string">'./helper.js'</span>
â€‹
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">doSomething</span>(<span class="hljs-params"/>) {
 Â <span class="hljs-keyword">return</span> helper.<span class="hljs-title function_">process</span>()
}
</code></pre>
<h2 data-id="heading-3">æœ€å°å®ç°</h2>
<blockquote>
<p>æœ¬æ–‡å¯¹äº esbuild ä¸ä¼šåšå‡ºè¿‡å¤šèµ˜è¿°ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥è‡ªå·±å»æŸ¥é˜…ç›¸å…³èµ„æ–™</p>
</blockquote>
<h3 data-id="heading-4">åˆ†æ</h3>
<p>é€šè¿‡æŸ¥çœ‹ä¸Šæ–‡çš„ä¸€ä¸ªæˆªå›¾ï¼Œæˆ‘ä»¬å¤§æ¦‚èƒ½çœ‹å‡ºï¼Œå…¶å®ä¾èµ–é¢„æ„å»ºï¼Œå°±æ˜¯å§ lodash è¿™ä¸ªåŒ…çš„å‡½æ•°éƒ½æ‰“åŒ…åˆ°äº†ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œç„¶ååšäº†ä¸€ä¸ªç»Ÿä¸€çš„å¯¼å‡ºï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥å®ç°çš„ä¾èµ–é¢„æ„å»ºï¼Œä¹Ÿå°±æ˜¯è¦å®Œæˆè¿™ä¸€ä¸ªç›®æ ‡ã€‚</p>
<p>è¦å®Œæˆè¿™ä¸ªç›®æ ‡å¦‚æœé‡‡ç”¨æ¯”è¾ƒåŸå§‹çš„æ–¹å¼ï¼Œè«è¿‡äºåœ¨ node ä¸­è¯»å–å…¥å£æ–‡ä»¶ï¼Œæ ¹æ®å¯¼å…¥çš„è·¯å¾„å»è¯»å–æ–‡ä»¶çš„å†…å®¹ï¼Œå†™å…¥åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œé¢ï¼Œæœ€åæ·»åŠ ä¸€ç«¯ç»Ÿä¸€çš„å¯¼å‡ºå­—ç¬¦ä¸²ã€‚</p>
<p>è¿™ç§æƒ³æ³•å¥½åƒä¸€çœ‹æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å…¶ä¸­è¿˜æ˜¯æœ‰äº›é—®é¢˜çš„ï¼Œæ¯”å¦‚å…¥å£æ–‡ä»¶å¯¼å…¥çš„é‚£ä¸ªä¾èµ–æ–‡ä»¶ï¼Œå®ƒå†…éƒ¨è¿˜ä¾èµ–äº†å…¶ä»–æ–‡ä»¶ï¼Œå¦‚æœåªæ˜¯ç²—æš´çš„åˆ†æä¸€ä¸ªå…¥å£æ–‡ä»¶ï¼Œæœ€åçš„æ‰“åŒ…çš„å•æ–‡ä»¶ä¸€å®šæ˜¯ä¸å®Œæ•´çš„ï¼Œè€Œå…¶ä¸­è¿˜ä¼šå­˜åœ¨é‡å¤çš„ä¾èµ–å¼•å…¥ï¼Œæ¯”å¦‚ä¸€äº›é€šç”¨çš„å·¥å…·å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ¢ä¸€ç§æ€è·¯ã€‚</p>
<p>æˆ‘ä»¬èŠçš„ä¸œè¥¿æœ¬è´¨ä¸Šå°±æ˜¯ï¼š<strong>å¦‚ä½•ä»å•ä¸€å…¥å£ï¼Œé€’å½’åœ°æ„å»ºä¸€ä¸ª<code>ä¾èµ–å›¾</code>ï¼Œå¹¶æŒ‰ä¾èµ–é¡ºåºè¯»å–æ‰€æœ‰æ¨¡å—å†…å®¹</strong>ã€‚å› æ­¤å¤§æ¦‚æ‰§è¡Œçš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ä»å…¥å£æ–‡ä»¶çš„ä¾èµ–å¼€å§‹ï¼Œæ¯”å¦‚ from './add'
<span class="hljs-bullet">2.</span> å†è§£æ add å†…éƒ¨çš„ import
<span class="hljs-bullet">3.</span> åç»­çš„ä¾èµ–æ–‡ä»¶ä¹Ÿæ‰§è¡Œè¿™ä¸ªé€»è¾‘
<span class="hljs-bullet">4.</span> ç›´åˆ°æœ€åæ²¡æœ‰æ–°çš„ä¾èµ–ä¸ºæ­¢
</code></pre>
<p>ç”Ÿæˆ<strong>ä¾èµ–å›¾</strong>ï¼Œä¸ºä»€ä¹ˆæ˜¯å›¾è€Œä¸æ˜¯æ ‘å‘¢ï¼Ÿæ¯•ç«Ÿä¸€æƒ³åˆ°é€’å½’ï¼Œå¾ˆå¤šæƒ…å†µä¸‹å¤§å®¶ä¸çº¦è€ŒåŒçš„å°±æƒ³åˆ°äº†æ ‘ç»“æ„ï¼Œæ ‘ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"># æ ‘ç»“æ„
entry
 â”œâ”€ <span class="hljs-selector-tag">a</span>
 â”‚ Â  â””â”€ shared
 â””â”€ <span class="hljs-selector-tag">b</span>
 Â  Â  â””â”€ shared
</code></pre>
<p>é‚£å›¾ç»“æ„æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</p>
<ol start="0">
<li>
<p><strong>ä¸€ä¸ªæ¨¡å—å¯èƒ½è¢«å¤šä¸ªæ¨¡å—ä¾èµ–ï¼ˆå¤šçˆ¶èŠ‚ç‚¹ï¼‰</strong> ï¼šè¿™åœ¨çœŸå®é¡¹ç›®é‡Œå¤ªå¸¸è§äº†ï¼Œå·¥å…·å‡½æ•°ã€è¿è¡Œæ—¶å«ç‰‡ã€ç¬¬ä¸‰æ–¹åŒ…å†…éƒ¨çš„å°å·¥å…·â€¦â€¦æ ‘ç»“æ„å¤©ç”Ÿè¡¨è¾¾ä¸äº†â€œåŒä¸€ä¸ªä¸œè¥¿è¢«å¤šå¤„å¼•ç”¨ä½†åªå­˜åœ¨ä¸€ä»½â€ã€‚</p>
<p>ä»€ä¹ˆæ˜¯å¤šçˆ¶èŠ‚ç‚¹ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">A</span><span class="hljs-selector-class">.js</span>  â”€â”€â”
 Â  Â  Â   â”œâ”€â”€&gt;  utils<span class="hljs-selector-class">.js</span>
<span class="hljs-selector-tag">B</span><span class="hljs-selector-class">.js</span>  â”€â”€â”˜
</code></pre>
<ul>
<li><code>A.js</code> é‡Œ <code>import utils from './utils.js'</code></li>
<li><code>B.js</code> é‡Œ <code>import utils from './utils.js'</code></li>
<li>è¿™ä¸ªæ—¥å¸¸ä¸­å¾ˆå¸¸è§ï¼Œäºæ˜¯ utils.js å°±å­˜åœ¨äº†ä¸¤ä¸ªçˆ¶èŠ‚ç‚¹äº†ï¼Œè¿™å°±æ˜¯å¤šçˆ¶èŠ‚ç‚¹</li>
</ul>
</li>
<li>
<p><strong>å¾ªç¯ä¾èµ–æ˜¯å­˜åœ¨çš„</strong>ï¼šæ¯”å¦‚ <code>a</code> import <code>b</code>ï¼Œ<code>b</code> åˆ import <code>a</code>ã€‚æ ‘è¦æ±‚â€œä»ä¸Šåˆ°ä¸‹ä¸èƒ½ç»•å›æ¥â€ï¼Œä½†ä¾èµ–å…³ç³»å°±æ˜¯å…è®¸ç»•å›æ¥çš„ï¼Œæ‰€ä»¥éœ€è¦ç”¨å›¾æ¥æè¿°ï¼Œå¹¶ä¸”ç”¨â€œè®¿é—®è¿‡å°±ä¸å†æ·±å…¥â€çš„æ–¹å¼é¿å…æ— é™é€’å½’ã€‚</p>
</li>
</ol>
<p>æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä»ä¸€å¼€å§‹å°±ç”¨â€œä¾èµ–å›¾â€çš„è§†è§’å»åšï¼šä¸€è¾¹é€’å½’æ”¶é›†ä¾èµ–ï¼Œä¸€è¾¹ç”¨ç»å¯¹è·¯å¾„åšå»é‡ï¼Œä¿è¯æ¯ä¸ªæ¨¡å—æœ€å¤šå¤„ç†ä¸€æ¬¡ã€‚</p>
<h3 data-id="heading-5">æ„å»ºä¾èµ–å›¾</h3>
<p>å› æ­¤ç¬¬ä¸€æ­¥è®©æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œç»™æˆ‘ä¸€æ®µæ–‡ä»¶æºç å­—ç¬¦ä¸²ï¼Œåœ¨ä½¿ç”¨æ­£åˆ™åŒ¹é…å‡ºå¯¼å…¥è¯­å¥ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">/**
 * ä»æ–‡ä»¶å†…å®¹ä¸­è§£ææ‰€æœ‰çš„ import/export <span class="hljs-keyword">from</span> è¯­å¥ï¼Œæå–ä¾èµ–è·¯å¾„
 */
<span class="hljs-keyword">function</span> parseImports(content) {
 Â  Â <span class="hljs-keyword">const</span> <span class="hljs-keyword">imports</span> = []
â€‹
 Â  Â // åŒ¹é… import xxx <span class="hljs-keyword">from</span> <span class="hljs-comment">'xxx' æˆ– export xxx from 'xxx'</span>
 Â  Â <span class="hljs-keyword">const</span> importRegex =
 Â  Â  Â  Â /(?:import|export)\s+(?:[^<span class="hljs-comment">'"]*)\s+from\s+['"]([^'"]+)['"]/g</span>
â€‹
 Â  Â <span class="hljs-keyword">let</span> match
 Â  Â <span class="hljs-keyword">while</span> ((match = importRegex.exec(content)) !== null) {
 Â  Â  Â  Â <span class="hljs-keyword">imports</span>.push(match[<span class="hljs-number">1</span>])
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">return</span> <span class="hljs-keyword">imports</span>
}
â€‹
// ä½¿ç”¨ lodash çš„å…¥å£æ–‡ä»¶ä¸¤ä¸ªå¯¼å…¥ä»£ç æ¥åšæµ‹è¯•
<span class="hljs-keyword">const</span> sourceCode = `export { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> add } <span class="hljs-keyword">from</span> <span class="hljs-comment">'./add.js';</span>
export { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> after } <span class="hljs-keyword">from</span> <span class="hljs-comment">'./after.js';`</span>
console.log(parseImports(sourceCode))
</code></pre>
<p>è¾“å…¥ç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[ <span class="hljs-string">'./add.js'</span>, <span class="hljs-string">'./after.js'</span> ]</span>
</code></pre>
<p>é‚£ä¹ˆä¸‹ä¸€æ­¥è¦åšçš„äº‹æƒ…å°±æ˜¯ï¼Œå®ç°ä¸€ä¸ªé€’å½’éå†å‡½æ•°ï¼Œæ¥åå¤æ‰§è¡Œè¿™ä¸ªè¿‡ç¨‹ï¼Œåé¢çš„ä»£ç å°±æ²¡ä»€ä¹ˆç‰¹æ®Šçš„ï¼Œå¯ä»¥ç›´æ¥æµè§ˆä¸€ä¸‹ç›¸å¯¹å®Œå…¨çš„ä»£ç ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'node:fs'</span>
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'node:path'</span>
â€‹
<span class="hljs-keyword">const</span> entryFilePath = path.<span class="hljs-title function_">join</span>(
 Â  Â process.<span class="hljs-title function_">cwd</span>(),
 Â  Â <span class="hljs-string">'./node_modules/lodash-es/lodash.js'</span>
)
â€‹
<span class="hljs-comment">/**
 * ä»æ–‡ä»¶å†…å®¹ä¸­è§£ææ‰€æœ‰çš„ import/export from è¯­å¥ï¼Œæå–ä¾èµ–è·¯å¾„
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">parseImports</span>(<span class="hljs-params">content</span>) {
 Â  Â <span class="hljs-keyword">const</span> imports = []
â€‹
 Â  Â <span class="hljs-comment">// åŒ¹é… import xxx from 'xxx' æˆ– export xxx from 'xxx'</span>
 Â  Â <span class="hljs-keyword">const</span> importRegex =
 Â  Â  Â  Â <span class="hljs-regexp">/(?:import|export)\s+(?:[^'"]*)\s+from\s+['"]([^'"]+)['"]/g</span>
â€‹
 Â  Â <span class="hljs-keyword">let</span> match
 Â  Â <span class="hljs-keyword">while</span> ((match = importRegex.<span class="hljs-title function_">exec</span>(content)) !== <span class="hljs-literal">null</span>) {
 Â  Â  Â  Â imports.<span class="hljs-title function_">push</span>(match[<span class="hljs-number">1</span>])
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">return</span> imports
}
â€‹
<span class="hljs-comment">/**
 * å°†ç›¸å¯¹è·¯å¾„è§£æä¸ºç»å¯¹è·¯å¾„
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">resolveModulePath</span>(<span class="hljs-params">importPath, currentFilePath</span>) {
 Â  Â <span class="hljs-keyword">const</span> currentDir = path.<span class="hljs-title function_">dirname</span>(currentFilePath)
 Â  Â <span class="hljs-keyword">return</span> path.<span class="hljs-title function_">resolve</span>(currentDir, importPath)
}
â€‹
<span class="hljs-comment">/**
 * é€’å½’è§£æä¾èµ–ï¼Œæ„å»ºä¾èµ–å›¾
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">buildDependencyGraph</span>(<span class="hljs-params">entryPath</span>) {
 Â  Â <span class="hljs-comment">// ä¾èµ–å›¾</span>
 Â  Â <span class="hljs-keyword">const</span> graph = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()
 Â  Â <span class="hljs-comment">// å·²è®¿é—®è¿‡çš„æ–‡ä»¶</span>
 Â  Â <span class="hljs-keyword">const</span> visited = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()
â€‹
 Â  Â <span class="hljs-keyword">function</span> <span class="hljs-title function_">traverse</span>(<span class="hljs-params">filePath</span>) {
 Â  Â  Â  Â <span class="hljs-comment">// è§„èŒƒåŒ–è·¯å¾„</span>
 Â  Â  Â  Â <span class="hljs-keyword">const</span> normalizedPath = path.<span class="hljs-title function_">normalize</span>(filePath)
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// å·²è®¿é—®è¿‡åˆ™è·³è¿‡</span>
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (visited.<span class="hljs-title function_">has</span>(normalizedPath)) {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span>
 Â  Â  Â   }
â€‹
 Â  Â  Â  Â visited.<span class="hljs-title function_">add</span>(normalizedPath)
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// è¯»å–æ–‡ä»¶å†…å®¹</span>
 Â  Â  Â  Â <span class="hljs-keyword">let</span> content
 Â  Â  Â  Â <span class="hljs-keyword">try</span> {
 Â  Â  Â  Â  Â  Â content = fs.<span class="hljs-title function_">readFileSync</span>(normalizedPath, <span class="hljs-string">'utf-8'</span>)
 Â  Â  Â   } <span class="hljs-keyword">catch</span> (err) {
 Â  Â  Â  Â  Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`æ— æ³•è¯»å–æ–‡ä»¶: <span class="hljs-subst">${normalizedPath}</span>`</span>)
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span>
 Â  Â  Â   }
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// è§£æ import è¯­å¥</span>
 Â  Â  Â  Â <span class="hljs-keyword">const</span> imports = <span class="hljs-title function_">parseImports</span>(content)
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// è§£æä¸ºç»å¯¹è·¯å¾„</span>
 Â  Â  Â  Â <span class="hljs-keyword">const</span> dependencies = imports.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">imp</span> =&gt;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-title function_">resolveModulePath</span>(imp, normalizedPath)
 Â  Â  Â   )
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// å­˜å…¥ä¾èµ–å›¾</span>
 Â  Â  Â  Â graph.<span class="hljs-title function_">set</span>(normalizedPath, dependencies)
â€‹
 Â  Â  Â  Â <span class="hljs-comment">// é€’å½’å¤„ç†æ¯ä¸ªä¾èµ–</span>
 Â  Â  Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> dep <span class="hljs-keyword">of</span> dependencies) {
 Â  Â  Â  Â  Â  Â <span class="hljs-title function_">traverse</span>(dep)
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-title function_">traverse</span>(entryPath)
â€‹
 Â  Â <span class="hljs-keyword">return</span> graph
}
â€‹
<span class="hljs-comment">// æ„å»ºä¾èµ–å›¾</span>
<span class="hljs-keyword">const</span> dependencyGraph = <span class="hljs-title function_">buildDependencyGraph</span>(entryFilePath)
â€‹
<span class="hljs-comment">// è¾“å‡ºä¾èµ–å›¾ä¿¡æ¯</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`\nä¾èµ–å›¾æ„å»ºå®Œæˆï¼Œå…± <span class="hljs-subst">${dependencyGraph.size}</span> ä¸ªæ¨¡å—\n`</span>)
â€‹
<span class="hljs-comment">// æ‰“å°ä¾èµ–å›¾ç»“æ„</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [file, deps] <span class="hljs-keyword">of</span> dependencyGraph) {
 Â  Â <span class="hljs-keyword">const</span> relativePath = path.<span class="hljs-title function_">relative</span>(process.<span class="hljs-title function_">cwd</span>(), file)
 Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`+ <span class="hljs-subst">${relativePath}</span>`</span>)
 Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> dep <span class="hljs-keyword">of</span> deps) {
 Â  Â  Â  Â <span class="hljs-keyword">const</span> relativeDepPath = path.<span class="hljs-title function_">relative</span>(process.<span class="hljs-title function_">cwd</span>(), dep)
 Â  Â  Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">` Â  â””â”€â”€ <span class="hljs-subst">${relativeDepPath}</span>`</span>)
 Â   }
}
</code></pre>
<p>è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">+ node_modules/lodash-es/lodash.js
 Â  â””â”€â”€ node_modules/lodash-es/add.js
 Â  â””â”€â”€ node_modules/lodash-es/after.js
+ node_modules/lodash-es/add.js
 Â  â””â”€â”€ node_modules/lodash-es/_createMathOperation.js
+ node_modules/lodash-es/_createMathOperation.js
 Â  â””â”€â”€ node_modules/lodash-es/_baseToNumber.js
 Â  â””â”€â”€ node_modules/lodash-es/_baseToString.js
+ node_modules/lodash-es/_baseToNumber.js
 Â  â””â”€â”€ node_modules/lodash-es/isSymbol.js
+ node_modules/lodash-es/isSymbol.js
 Â  â””â”€â”€ node_modules/lodash-es/_baseGetTag.js
 Â  â””â”€â”€ node_modules/lodash-es/isObjectLike.js
+ node_modules/lodash-es/_baseGetTag.js
 Â  â””â”€â”€ node_modules/lodash-es/_Symbol.js
 Â  â””â”€â”€ node_modules/lodash-es/_getRawTag.js
 Â  â””â”€â”€ node_modules/lodash-es/_objectToString.js
+ ...
</code></pre>
<p>æœ‰äº†è¿™ä¸ªä¾èµ–å›¾ä¹‹åï¼Œæˆ‘ä»¬ç¦»è¿™ä¸ªæ ¸å¿ƒå°±éå¸¸æ¥è¿‘äº†ï¼Œè¿™ä¸ªä¾èµ–å›¾ä¸€çœ¼çœ‹è¿‡å»ï¼Œéƒ½ä¸çŸ¥è¦å¦‚ä½•éå†æ‰§è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ¬ ç¼ºä¸€ä¸ªæ­¥éª¤ï¼Œ<strong>æ‹“æ‰‘æ’åº</strong>ã€‚</p>
<h3 data-id="heading-6">æ‹“æ‰‘æ’åº</h3>
<p>å¦‚æœæŒ‰ç…§ä¸Šé¢ä¾èµ–å›¾åŒºè¿›è¡Œéå†è¯»å–ï¼Œè‚¯å®šä¼šå‡ºç°é—®é¢˜çš„ï¼Œä½†æ˜¯åœ¨å®é™…çš„ bundle ä¸­ï¼Œå°±ä¼šçˆ†ç‚¸ï¼Œè¦å¾—åˆ°æ­£ç¡®çš„ bundle å°±è¦åšåˆ° <strong>æ‰€æœ‰æ¨¡å—æŒ‰â€œä¾èµ–å…ˆã€ä½¿ç”¨åâ€çš„é¡ºåºæ’å¥½é˜Ÿ</strong>ï¼Œè€Œè¿™ä¸ªæ’é˜Ÿå°±æ˜¯æ‹“æ‰‘æ’åºã€‚</p>
<p>è€Œå®ç°çš„æ‰‹æ®µä¸åšé™åˆ¶ï¼Œæ¯•ç«Ÿåœ¨ ai å¦‚æ­¤æµè¡Œçš„æƒ…å†µï¼Œæˆ‘ç›¸ä¿¡ ai å¯ä»¥å†™çš„å¾ˆå¥½å¾ˆå®Œå–„ï¼Œè¿˜å¯ä»¥è§£é‡Šæ¯ä¸€è¡Œä»£ç çš„æ„ä¹‰ï¼Œæˆ‘è¿™é‡Œå°±ç›´æ¥è´´å‡ºä»£ç ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/**
 * å¯¹ä¾èµ–å›¾åšæ‹“æ‰‘æ’åºï¼Œè¿”å›â€œä¾èµ–åœ¨å‰ã€è¢«ä¾èµ–åœ¨åâ€çš„æ¨¡å—é¡ºåº
 */</span>
function <span class="hljs-built_in">topologicalSort</span>(graph) {
 Â  Â const allNodes = new <span class="hljs-built_in">Set</span>()
â€‹
 Â  Â for (const [filePath, deps] of graph) {
 Â  Â  Â  Â allNodes<span class="hljs-selector-class">.add</span>(filePath)
 Â  Â  Â  Â for (const dep of deps) {
 Â  Â  Â  Â  Â  Â allNodes<span class="hljs-selector-class">.add</span>(dep)
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â <span class="hljs-comment">// indegreeï¼šä¸€ä¸ªæ¨¡å—è¿˜å‰©å¤šå°‘â€œä¾èµ–â€æ²¡æœ‰è¢«å¤„ç†ï¼ˆä¾èµ–è¶Šå¤š indegree è¶Šå¤§ï¼‰</span>
 Â  Â const indegree = new <span class="hljs-built_in">Map</span>()
 Â  Â <span class="hljs-comment">// dependentsï¼šæŸä¸ªä¾èµ–è¢«å¤„ç†å®Œåï¼Œå“ªäº›æ¨¡å—å¯ä»¥è¢«æ¨è¿›</span>
 Â  Â const dependents = new <span class="hljs-built_in">Map</span>()
â€‹
 Â  Â for (const node of allNodes) {
 Â  Â  Â  Â indegree<span class="hljs-selector-class">.set</span>(node, <span class="hljs-number">0</span>)
 Â  Â  Â  Â dependents<span class="hljs-selector-class">.set</span>(node, new Set())
 Â   }
â€‹
 Â  Â for (const [filePath, deps] of graph) {
 Â  Â  Â  Â for (const dep of deps) {
 Â  Â  Â  Â  Â  Â if (!dependents.has(dep)) {
 Â  Â  Â  Â  Â  Â  Â  Â dependents<span class="hljs-selector-class">.set</span>(dep, new Set())
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â dependents<span class="hljs-selector-class">.get</span>(dep)<span class="hljs-selector-class">.add</span>(filePath)
 Â  Â  Â  Â  Â  Â indegree<span class="hljs-selector-class">.set</span>(filePath, (indegree.get(filePath) ?? <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>)
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â const queue = <span class="hljs-selector-attr">[]</span>
 Â  Â for (const node of allNodes) {
 Â  Â  Â  Â if ((indegree.get(node) ?? <span class="hljs-number">0</span>) === <span class="hljs-number">0</span>) {
 Â  Â  Â  Â  Â  Â queue<span class="hljs-selector-class">.push</span>(node)
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â const sorted = <span class="hljs-selector-attr">[]</span>
 Â  Â let idx = <span class="hljs-number">0</span>
 Â  Â while (idx &lt; queue.length) {
 Â  Â  Â  Â const node = queue<span class="hljs-selector-attr">[idx++]</span>
 Â  Â  Â  Â sorted<span class="hljs-selector-class">.push</span>(node)
â€‹
 Â  Â  Â  Â const nextNodes = dependents<span class="hljs-selector-class">.get</span>(node)
 Â  Â  Â  Â if (!nextNodes) continue
â€‹
 Â  Â  Â  Â for (const next of nextNodes) {
 Â  Â  Â  Â  Â  Â const nextIn = (indegree.get(next) ?? <span class="hljs-number">0</span>) - <span class="hljs-number">1</span>
 Â  Â  Â  Â  Â  Â indegree<span class="hljs-selector-class">.set</span>(next, nextIn)
 Â  Â  Â  Â  Â  Â if (nextIn === <span class="hljs-number">0</span>) {
 Â  Â  Â  Â  Â  Â  Â  Â queue<span class="hljs-selector-class">.push</span>(next)
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â   }
â€‹
 Â  Â if (sorted.length !== allNodes.size) {
 Â  Â  Â  Â const cyclicNodes = <span class="hljs-selector-attr">[]</span>
 Â  Â  Â  Â for (const [node, deg] of indegree) {
 Â  Â  Â  Â  Â  Â if (deg &gt; <span class="hljs-number">0</span>) cyclicNodes<span class="hljs-selector-class">.push</span>(node)
 Â  Â  Â   }
 Â  Â  Â  Â throw new <span class="hljs-built_in">Error</span>(
 Â  Â  Â  Â  Â  Â `æ£€æµ‹åˆ°å¾ªç¯ä¾èµ–ï¼Œæ— æ³•å®Œæˆæ‹“æ‰‘æ’åºï¼š\n${cyclicNodes.join('\n')}`
 Â  Â  Â   )
 Â   }
â€‹
 Â  Â return sorted
}
</code></pre>
<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">[
  <span class="hljs-comment">// ...</span>
  <span class="hljs-string">'/Users/coderjc/Documents/test-code/åŸç”Ÿ/no-pre-bundle/node_modules/lodash-es/_baseGetTag.js'</span>,
  <span class="hljs-string">'/Users/coderjc/Documents/test-code/åŸç”Ÿ/no-pre-bundle/node_modules/lodash-es/isSymbol.js'</span>,
  <span class="hljs-string">'/Users/coderjc/Documents/test-code/åŸç”Ÿ/no-pre-bundle/node_modules/lodash-es/_baseToNumber.js'</span>,
  <span class="hljs-string">'/Users/coderjc/Documents/test-code/åŸç”Ÿ/no-pre-bundle/node_modules/lodash-es/_baseToString.js'</span>,
  <span class="hljs-string">'/Users/coderjc/Documents/test-code/åŸç”Ÿ/no-pre-bundle/node_modules/lodash-es/toNumber.js'</span>,
  <span class="hljs-string">'/Users/coderjc/Documents/test-code/åŸç”Ÿ/no-pre-bundle/node_modules/lodash-es/_createMathOperation.js'</span>,
  <span class="hljs-string">'/Users/coderjc/Documents/test-code/åŸç”Ÿ/no-pre-bundle/node_modules/lodash-es/toFinite.js'</span>,
  <span class="hljs-string">'/Users/coderjc/Documents/test-code/åŸç”Ÿ/no-pre-bundle/node_modules/lodash-es/add.js'</span>,
  <span class="hljs-string">'/Users/coderjc/Documents/test-code/åŸç”Ÿ/no-pre-bundle/node_modules/lodash-es/toInteger.js'</span>,
  <span class="hljs-string">'/Users/coderjc/Documents/test-code/åŸç”Ÿ/no-pre-bundle/node_modules/lodash-es/after.js'</span>,
  <span class="hljs-string">'/Users/coderjc/Documents/test-code/åŸç”Ÿ/no-pre-bundle/node_modules/lodash-es/lodash.js'</span>
]
</code></pre>
<p>æˆ‘ä»¬çš„ä¾‹å­ä¸­ä¸ºäº†æ›´å¥½çš„è§‚å¯Ÿï¼Œåªä¿ç•™äº† add å’Œ after ä¸¤ä¸ªå‡½æ•°çš„å¯¼å…¥ï¼Œä»ç»“æœæ¥çœ‹ï¼Œæ˜¯æ²¡ä»€ä¹ˆé—®é¢˜çš„ã€‚</p>
<p>åç»­çš„æ­¥éª¤å¤§æ¦‚å¯ä»¥æ‹†åˆ†ä¸ºä¸¤æ­¥ï¼Œä¸€æ­¥æ˜¯æºç è½¬æ¢ï¼Œä¸€æ­¥æ˜¯ bundle ç”Ÿæˆï¼Œè¿™ä¸€æ­¥å…¶å®æ¯”è¾ƒç®€å•ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ç›´æ¥åˆ©ç”¨ esbuild æ¥å®Œæˆã€‚</p>
<p>å½“ç„¶ä¹Ÿå¯ä»¥è‡ªå·±å†™ï¼Œä¸è¿‡æˆ‘æ˜¯ç›´æ¥ä¸¢ç»™ ai å®ç°ï¼Œå¤§æ¦‚çš„ç»“æœå¦‚å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20efef7ca650421f93df3879b6395a25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29kZXJqYw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768224367&amp;x-signature=2An8YXG2ag4Y43s3tQKAaJfaJYw%3D" alt="image-20260105211550397.png" loading="lazy"/></p>
<h3 data-id="heading-7">ä½¿ç”¨ esbuild å®Œæˆæ„å»º</h3>
<p>å…¶å®åˆ©ç”¨ esbuild éƒ½ä¸éœ€è¦æˆ‘ä»¬å»è‡ªå·±å®ç°ä¾èµ–å›¾ä»€ä¹ˆçš„ï¼Œåªæ˜¯ä¸ºäº†è¯´æ˜å¤§æ¦‚åšäº†ä»€ä¹ˆäº‹æƒ…è€Œå†™çš„ï¼Œä¸‹é¢çœ‹çœ‹ä½¿ç”¨ esbuild å¦‚ä½•å®ç°ã€‚å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> esbuild <span class="hljs-keyword">from</span> <span class="hljs-string">'esbuild'</span>
â€‹
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">prebundleDeps</span>(<span class="hljs-params">deps</span>) {
 Â  Â <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
 Â  Â  Â  Â deps.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">dep</span> =&gt;</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> esbuild.<span class="hljs-title function_">build</span>({
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">entryPoints</span>: [dep],
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">bundle</span>: <span class="hljs-literal">true</span>,
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">format</span>: <span class="hljs-string">'esm'</span>,
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">platform</span>: <span class="hljs-string">'browser'</span>,
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">outfile</span>: <span class="hljs-string">'./dist/lodash-es.js'</span>,
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">sourcemap</span>: <span class="hljs-literal">true</span>
 Â  Â  Â  Â  Â   })
 Â  Â  Â   })
 Â   )
}
â€‹
<span class="hljs-title function_">prebundleDeps</span>([<span class="hljs-string">'lodash-es'</span>])
</code></pre>
<p>æ‰“åŒ…ç»“æœå¦‚å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2888223e2f44fa496d7590b1fe9c99b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29kZXJqYw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768224367&amp;x-signature=OgjaaveEhD6KK%2B0OdytNW2t2KOU%3D" alt="image-20260105211942893.png" loading="lazy"/></p>
<p>å¤§å®¶å¯ä»¥å’Œå‰æ–‡çš„ç½‘ç»œè¯·æ±‚çš„æ–‡ä»¶æˆªå›¾å¯¹æ¯”ä¸€ä¸‹ï¼Œç»“æœéƒ½æ˜¯ä¸€è‡´çš„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Core Data ç®€åŒ–å¼€å‘ï¼šNSPersistentContainer ä»åŸç†åˆ°å®æˆ˜]]></title>    <link>https://juejin.cn/post/7591687981688193070</link>    <guid>https://juejin.cn/post/7591687981688193070</guid>    <pubDate>2026-01-05T11:10:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591687981688193070" data-draft-id="7591694511246049318" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Core Data ç®€åŒ–å¼€å‘ï¼šNSPersistentContainer ä»åŸç†åˆ°å®æˆ˜"/> <meta itemprop="keywords" content="Swift"/> <meta itemprop="datePublished" content="2026-01-05T11:10:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JQShan"/> <meta itemprop="url" content="https://juejin.cn/user/1636535083759005"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Core Data ç®€åŒ–å¼€å‘ï¼šNSPersistentContainer ä»åŸç†åˆ°å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1636535083759005/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JQShan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T11:10:54.000Z" title="Mon Jan 05 2026 11:10:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸º iOS/macOS å¼€å‘è€…ï¼Œæœ¬åœ°æ•°æ®å­˜å‚¨æ˜¯ç»•ä¸å¼€çš„è¯é¢˜ã€‚æèµ· Core Dataï¼Œä¸å°‘æ–°æ‰‹ä¼šçš±çœ‰å¤´ â€”â€” æ—©æœŸçš„ Core Data é…ç½®ç¹çï¼Œæ‰‹åŠ¨ç®¡ç†ä¸Šä¸‹æ–‡ã€åè°ƒå™¨è¿™äº›ç»„ä»¶å¾ˆå®¹æ˜“è¸©å‘ï¼›è€Œè€å¼€å‘è€…åˆ™æ¸…æ¥šï¼Œè‡ªä» Apple æ¨å‡º<code>NSPersistentContainer</code>åï¼ŒCore Data çš„ä½¿ç”¨ä½“éªŒç›´æ¥ â€œèµ·é£â€ã€‚ä»Šå¤©å°±è·Ÿå¤§å®¶èŠèŠï¼Œè¿™ä¸ª â€œå®¹å™¨â€ åˆ°åº•æ˜¯ä»€ä¹ˆã€æ€ä¹ˆç”¨ï¼Œä»¥åŠå®ƒçš„é‚£äº›ä¼˜ç¼ºç‚¹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å…ˆå” å”  Core Data çš„ â€œè€ç—›ç‚¹â€</h2>
<p>åœ¨ iOS 10/macOS 10.12 ä¹‹å‰ï¼Œæƒ³ç”¨ Core Data å¾—æ‰‹åŠ¨æ­ä¸€å¥— â€œæµæ°´çº¿â€ï¼š</p>
<ol>
<li>åŠ è½½<code>NSManagedObjectModel</code>ï¼ˆæ•°æ®æ¨¡å‹ï¼‰ï¼›</li>
<li>åˆ›å»º<code>NSPersistentStoreCoordinator</code>ï¼ˆæŒä¹…åŒ–å­˜å‚¨åè°ƒå™¨ï¼‰ï¼ŒæŒ‡å®šå­˜å‚¨ç±»å‹ï¼ˆæ¯”å¦‚ SQLiteï¼‰å’Œè·¯å¾„ï¼›</li>
<li>å®ä¾‹åŒ–<code>NSManagedObjectContext</code>ï¼ˆæ‰˜ç®¡å¯¹è±¡ä¸Šä¸‹æ–‡ï¼‰ï¼Œå¹¶å…³è”åè°ƒå™¨ï¼›</li>
<li>è¿˜è¦å¤„ç†çº¿ç¨‹å®‰å…¨ã€ä¸Šä¸‹æ–‡åˆå¹¶è¿™äº›é—®é¢˜ã€‚</li>
</ol>
<p>ä¸€å¥—æ“ä½œä¸‹æ¥ï¼Œä»£ç åˆé•¿åˆå®¹æ˜“å‡ºé”™ï¼Œå…‰æ˜¯åˆå§‹åŒ–å°±èƒ½åŠé€€ä¸€åŠæ–°æ‰‹ã€‚Apple æ˜¾ç„¶ä¹Ÿå‘ç°äº†è¿™ä¸ªé—®é¢˜ï¼Œäºæ˜¯<code>NSPersistentContainer</code>åº”è¿è€Œç”Ÿ â€”â€” å®ƒæŠŠ Core Data çš„æ ¸å¿ƒç»„ä»¶å…¨ â€œæ‰“åŒ…â€ äº†ï¼Œè®©æˆ‘ä»¬ä¸ç”¨å†å…³å¿ƒåº•å±‚ç»†èŠ‚ï¼Œä¸“æ³¨äºä¸šåŠ¡é€»è¾‘å³å¯ã€‚</p>
<h2 data-id="heading-1">äºŒã€NSPersistentContainerï¼šCore Data çš„ â€œä¸€ç«™å¼å·¥å…·ç®±â€</h2>
<h3 data-id="heading-2">1. æ ¸å¿ƒåŸç†ï¼šå°è£…äº†ä»€ä¹ˆï¼Ÿ</h3>
<p><code>NSPersistentContainer</code>æœ¬è´¨æ˜¯å¯¹ Core Data ä¸‰å¤§æ ¸å¿ƒç»„ä»¶çš„å°è£…ï¼Œç›¸å½“äºç»™æˆ‘ä»¬å‡†å¤‡äº†ä¸€ä¸ªå¼€ç®±å³ç”¨çš„ â€œæ•°æ®ç®¡ç†å®¹å™¨â€ï¼Œå†…éƒ¨ç»“æ„å¦‚ä¸‹ï¼š</p>

























<table><thead><tr><th>ç»„ä»¶</th><th>ä½œç”¨</th><th>å®¹å™¨ä¸­çš„è®¿é—®æ–¹å¼</th></tr></thead><tbody><tr><td><code>NSManagedObjectModel</code></td><td>å®šä¹‰æ•°æ®ç»“æ„ï¼ˆå¯¹åº”.xcdatamodeld æ–‡ä»¶ï¼‰</td><td><code>container.managedObjectModel</code></td></tr><tr><td><code>NSPersistentStoreCoordinator</code></td><td>ç®¡ç†æ•°æ®å­˜å‚¨ï¼ˆæ¯”å¦‚ SQLite æ–‡ä»¶ï¼‰</td><td><code>container.persistentStoreCoordinator</code></td></tr><tr><td><code>NSManagedObjectContext</code></td><td>æ“ä½œæ•°æ®çš„ â€œå·¥ä½œå°â€ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰</td><td><code>container.viewContext</code>ï¼ˆä¸»çº¿ç¨‹ï¼‰/<code>container.newBackgroundContext()</code>ï¼ˆåå°ï¼‰</td></tr></tbody></table>
<p>ç®€å•è¯´ï¼šä½ åªéœ€è¦å‘Šè¯‰å®¹å™¨ â€œæ•°æ®æ¨¡å‹å«ä»€ä¹ˆåå­—â€ï¼Œå®ƒä¼šè‡ªåŠ¨å®Œæˆæ¨¡å‹åŠ è½½ã€åè°ƒå™¨åˆ›å»ºã€ä¸Šä¸‹æ–‡å…³è”ç­‰æ‰€æœ‰åº•å±‚å·¥ä½œï¼Œä¸ç”¨å†™ä¸€è¡Œå†—ä½™ä»£ç ã€‚</p>
<h3 data-id="heading-3">2. æœ€æ ¸å¿ƒçš„ä¸¤ä¸ªä¸Šä¸‹æ–‡</h3>
<p>å®¹å™¨é‡Œæœ€å¸¸ç”¨çš„æ˜¯ä¸¤ä¸ªä¸Šä¸‹æ–‡ï¼Œä¸€å®šè¦åˆ†æ¸…ï¼š</p>
<ul>
<li><strong>viewContext</strong>ï¼šé»˜è®¤ç»‘å®š<strong>ä¸»çº¿ç¨‹</strong>ï¼Œä¸“é—¨ç”¨äº UI ç›¸å…³çš„æ“ä½œï¼ˆæ¯”å¦‚åˆ—è¡¨å±•ç¤ºè¯»ä¹¦ç¬”è®°ï¼‰ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œç›´æ¥ç”¨å°±è¡Œï¼›</li>
<li><strong>newBackgroundContext()</strong> ï¼šæ¯æ¬¡è°ƒç”¨éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„åå°ä¸Šä¸‹æ–‡ï¼Œç”¨äºè€—æ—¶æ“ä½œï¼ˆæ¯”å¦‚æ‰¹é‡å¯¼å…¥å†å²è¯»ä¹¦ç¬”è®°ï¼‰ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹å¯¼è‡´ UI å¡é¡¿ã€‚</li>
</ul>
<h2 data-id="heading-4">ä¸‰ã€å®æˆ˜ï¼šNSPersistentContainer çš„åŸºæœ¬ç”¨æ³•</h2>
<p>å…‰è¯´ä¸ç»ƒå‡æŠŠå¼ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ â€œè¯»ä¹¦ç¬”è®°ç®¡ç†â€ ç¤ºä¾‹ï¼Œçœ‹çœ‹æ€ä¹ˆç”¨å®¹å™¨æå®š Core Data çš„å¢åˆ æ”¹æŸ¥ã€‚</p>
<h3 data-id="heading-5">å‰ç½®å‡†å¤‡</h3>
<ol>
<li>
<p>åˆ›å»º iOS é¡¹ç›®æ—¶å‹¾é€‰ã€ŒUse Core Dataã€ï¼ˆXcode ä¼šè‡ªåŠ¨ç”ŸæˆåŸºç¡€çš„å®¹å™¨ä»£ç ï¼‰ï¼›</p>
</li>
<li>
<p>æ‰“å¼€<code>.xcdatamodeld</code>æ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ª<code>BookNote</code>å®ä½“ï¼Œæ·»åŠ ä¸‰ä¸ªå±æ€§ï¼š</p>
<ul>
<li><code>bookName</code>ï¼ˆStringï¼Œä¹¦åï¼‰ï¼›</li>
<li><code>content</code>ï¼ˆStringï¼Œç¬”è®°å†…å®¹ï¼‰ï¼›</li>
<li><code>createTime</code>ï¼ˆDateï¼Œåˆ›å»ºæ—¶é—´ï¼Œé»˜è®¤å€¼å¯è®¾ä¸º<code>@now</code>ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-6">1. åˆå§‹åŒ–å®¹å™¨ï¼ˆXcode è‡ªåŠ¨ç”Ÿæˆï¼Œç¨ä½œä¼˜åŒ–ï¼‰</h3>
<p>AppDelegate ä¸­çš„æ ¸å¿ƒä»£ç ï¼Œæˆ‘ä»¬ä¼˜åŒ–ä¸‹é”™è¯¯å¤„ç†ï¼ˆåˆ«ç”¨ fatalErrorï¼Œå®é™…é¡¹ç›®è¦å‹å¥½ï¼‰ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> UIKit
<span class="hljs-keyword">import</span> CoreData

<span class="hljs-keyword">@UIApplicationMain</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AppDelegate</span>: <span class="hljs-title class_">UIResponder</span>, <span class="hljs-title class_">UIApplicationDelegate</span> {
    <span class="hljs-comment">// æ‡’åŠ è½½æŒä¹…åŒ–å®¹å™¨</span>
    <span class="hljs-keyword">lazy</span> <span class="hljs-keyword">var</span> persistentContainer: <span class="hljs-type">NSPersistentContainer</span> <span class="hljs-operator">=</span> {
        <span class="hljs-comment">// æ¨¡å‹æ–‡ä»¶åè¦å’Œ.xcdatamodeldæ–‡ä»¶åç§°ä¸€è‡´ï¼ˆæ¯”å¦‚æˆ‘å‘½åä¸ºBookNoteModelï¼‰</span>
        <span class="hljs-keyword">let</span> container <span class="hljs-operator">=</span> <span class="hljs-type">NSPersistentContainer</span>(name: <span class="hljs-string">"BookNoteModel"</span>) 
        
        <span class="hljs-comment">// åŠ è½½æŒä¹…åŒ–å­˜å‚¨ï¼ˆé»˜è®¤æ˜¯SQLiteæ–‡ä»¶ï¼Œå­˜å‚¨åœ¨Appæ²™ç›’ä¸­ï¼‰</span>
        container.loadPersistentStores(completionHandler: { (storeDescription, error) <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error <span class="hljs-operator">=</span> error <span class="hljs-keyword">as</span> <span class="hljs-type">NSError</span>? {
                <span class="hljs-comment">// å®é™…é¡¹ç›®ä¸­æ›¿æ¢ä¸ºæ—¥å¿—/å¼¹çª—æç¤ºï¼Œåˆ«ç›´æ¥å´©æºƒ</span>
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"Core DataåŠ è½½å¤±è´¥ï¼š(error.localizedDescription)"</span>)
            }
        })
        <span class="hljs-keyword">return</span> container
    }()

    <span class="hljs-comment">// å°è£…ä¿å­˜ä¸Šä¸‹æ–‡çš„æ–¹æ³•ï¼Œå¤ç”¨æ€§æ›´é«˜</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">saveContext</span>() {
        <span class="hljs-keyword">let</span> context <span class="hljs-operator">=</span> persistentContainer.viewContext
        <span class="hljs-keyword">guard</span> context.hasChanges <span class="hljs-keyword">else</span> { <span class="hljs-keyword">return</span> } <span class="hljs-comment">// æ²¡æœ‰ä¿®æ”¹å°±ä¸ä¿å­˜ï¼Œå‡å°‘IOæ¶ˆè€—</span>
        
        <span class="hljs-keyword">do</span> {
            <span class="hljs-keyword">try</span> context.save()
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¯»ä¹¦ç¬”è®°ä¿å­˜æˆåŠŸâœ…"</span>)
        } <span class="hljs-keyword">catch</span> {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¿å­˜å¤±è´¥âŒï¼š(error.localizedDescription)"</span>)
        }
    }
}
</code></pre>
<h3 data-id="heading-7">2. å¢åˆ æ”¹æŸ¥å®æˆ˜ï¼ˆViewController ä¸­ï¼‰</h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">import</span> UIKit
<span class="hljs-keyword">import</span> CoreData

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewController</span>: <span class="hljs-title class_">UIViewController</span> {
    <span class="hljs-comment">// è·å–å®¹å™¨ï¼ˆå®é™…é¡¹ç›®å»ºè®®ç”¨å•ä¾‹/ä¾èµ–æ³¨å…¥ï¼Œåˆ«ç›´æ¥å¼ºè½¬AppDelegateï¼Œè¿™é‡Œä¸ºäº†ç®€åŒ–ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> container: <span class="hljs-type">NSPersistentContainer</span> {
        <span class="hljs-keyword">let</span> appDelegate <span class="hljs-operator">=</span> <span class="hljs-type">UIApplication</span>.shared.delegate <span class="hljs-keyword">as!</span> <span class="hljs-type">AppDelegate</span>
        <span class="hljs-keyword">return</span> appDelegate.persistentContainer
    }

    <span class="hljs-comment">// 1. æ·»åŠ è¯»ä¹¦ç¬”è®°</span>
    <span class="hljs-keyword">@IBAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">addBookNote</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">sender</span>: <span class="hljs-type">UIButton</span>) {
        <span class="hljs-keyword">let</span> context <span class="hljs-operator">=</span> container.viewContext
        <span class="hljs-comment">// åˆ›å»ºBookNoteå¯¹è±¡</span>
        <span class="hljs-keyword">let</span> note <span class="hljs-operator">=</span> <span class="hljs-type">BookNote</span>(context: context)
        note.bookName <span class="hljs-operator">=</span> <span class="hljs-string">"ã€Šå°ç‹å­ã€‹"</span>
        note.content <span class="hljs-operator">=</span> <span class="hljs-string">"æ­£æ˜¯ä½ ä¸ºä½ çš„ç«ç‘°èŠ±è´¹çš„æ—¶å…‰ï¼Œæ‰ä½¿ä½ çš„ç«ç‘°å˜å¾—å¦‚æ­¤é‡è¦ã€‚"</span>
        note.createTime <span class="hljs-operator">=</span> <span class="hljs-type">Date</span>() <span class="hljs-comment">// ä¹Ÿå¯ä»¥ä¾èµ–æ¨¡å‹çš„é»˜è®¤å€¼ï¼Œè¿™é‡Œæ‰‹åŠ¨èµ‹å€¼æ›´ç›´è§‚</span>
        
        <span class="hljs-comment">// è°ƒç”¨AppDelegateçš„ä¿å­˜æ–¹æ³•</span>
        (<span class="hljs-type">UIApplication</span>.shared.delegate <span class="hljs-keyword">as!</span> <span class="hljs-type">AppDelegate</span>).saveContext()
    }

    <span class="hljs-comment">// 2. æŸ¥è¯¢æ‰€æœ‰è¯»ä¹¦ç¬”è®°ï¼ˆå¯æŒ‰åˆ›å»ºæ—¶é—´å€’åºï¼‰</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">fetchAllBookNotes</span>() {
        <span class="hljs-keyword">let</span> context <span class="hljs-operator">=</span> container.viewContext
        <span class="hljs-comment">// åˆ›å»ºæŸ¥è¯¢è¯·æ±‚</span>
        <span class="hljs-keyword">let</span> fetchRequest: <span class="hljs-type">NSFetchRequest</span>&lt;<span class="hljs-type">BookNote</span>&gt; <span class="hljs-operator">=</span> <span class="hljs-type">BookNote</span>.fetchRequest()
        
        <span class="hljs-comment">// æŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—ï¼Œæœ€æ–°çš„ç¬”è®°åœ¨å‰é¢</span>
        <span class="hljs-keyword">let</span> sortDescriptor <span class="hljs-operator">=</span> <span class="hljs-type">NSSortDescriptor</span>(keyPath: \<span class="hljs-type">BookNote</span>.createTime, ascending: <span class="hljs-literal">false</span>)
        fetchRequest.sortDescriptors <span class="hljs-operator">=</span> [sortDescriptor]
        
        <span class="hljs-keyword">do</span> {
            <span class="hljs-keyword">let</span> notes <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> context.fetch(fetchRequest)
            notes.forEach { note <span class="hljs-keyword">in</span>
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“š ä¹¦åï¼š(note.bookName ?? "</span>æœªçŸ¥<span class="hljs-string">")"</span>)
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"âœï¸ ç¬”è®°ï¼š(note.content ?? "</span>æ— å†…å®¹<span class="hljs-string">")"</span>)
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ•’ åˆ›å»ºæ—¶é—´ï¼š(note.createTime ?? Date())<span class="hljs-subst">\n</span>"</span>)
            }
        } <span class="hljs-keyword">catch</span> {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"æŸ¥è¯¢è¯»ä¹¦ç¬”è®°å¤±è´¥ï¼š(error.localizedDescription)"</span>)
        }
    }

    <span class="hljs-comment">// 3. åˆ é™¤è¯»ä¹¦ç¬”è®°ï¼ˆç¤ºä¾‹ï¼šåˆ é™¤ç¬¬ä¸€æ¡ã€Šå°ç‹å­ã€‹çš„ç¬”è®°ï¼‰</span>
    <span class="hljs-keyword">@IBAction</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">deleteBookNote</span>(<span class="hljs-keyword">_</span> <span class="hljs-params">sender</span>: <span class="hljs-type">UIButton</span>) {
        <span class="hljs-keyword">let</span> context <span class="hljs-operator">=</span> container.viewContext
        <span class="hljs-keyword">let</span> fetchRequest: <span class="hljs-type">NSFetchRequest</span>&lt;<span class="hljs-type">BookNote</span>&gt; <span class="hljs-operator">=</span> <span class="hljs-type">BookNote</span>.fetchRequest()
        
        <span class="hljs-comment">// å¢åŠ ç­›é€‰æ¡ä»¶ï¼šåªåˆ ã€Šå°ç‹å­ã€‹çš„ç¬”è®°</span>
        fetchRequest.predicate <span class="hljs-operator">=</span> <span class="hljs-type">NSPredicate</span>(format: <span class="hljs-string">"bookName == %@"</span>, <span class="hljs-string">"ã€Šå°ç‹å­ã€‹"</span>)
        
        <span class="hljs-keyword">do</span> {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> targetNote <span class="hljs-operator">=</span> <span class="hljs-keyword">try</span> context.fetch(fetchRequest).first {
                context.delete(targetNote) <span class="hljs-comment">// åˆ é™¤æŒ‡å®šç¬”è®°å¯¹è±¡</span>
                (<span class="hljs-type">UIApplication</span>.shared.delegate <span class="hljs-keyword">as!</span> <span class="hljs-type">AppDelegate</span>).saveContext()
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"ã€Šå°ç‹å­ã€‹çš„ç¬”è®°å·²åˆ é™¤"</span>)
            }
        } <span class="hljs-keyword">catch</span> {
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"åˆ é™¤è¯»ä¹¦ç¬”è®°å¤±è´¥ï¼š(error.localizedDescription)"</span>)
        }
    }

    <span class="hljs-comment">// 4. åå°æ‰¹é‡å¯¼å…¥è¯»ä¹¦ç¬”è®°ï¼ˆé‡ç‚¹ï¼šç”¨åå°ä¸Šä¸‹æ–‡ï¼Œä¸å¡UIï¼‰</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">batchImportBookNotes</span>() {
        <span class="hljs-comment">// åˆ›å»ºåå°ä¸Šä¸‹æ–‡</span>
        <span class="hljs-keyword">let</span> backgroundContext <span class="hljs-operator">=</span> container.newBackgroundContext()
        <span class="hljs-comment">// è®¾ç½®åˆå¹¶ç­–ç•¥ï¼Œé¿å…å¤šä¸Šä¸‹æ–‡æ“ä½œå†²çª</span>
        backgroundContext.mergePolicy <span class="hljs-operator">=</span> <span class="hljs-type">NSMergeByPropertyObjectTrumpMergePolicy</span>
        
        <span class="hljs-comment">// åœ¨åå°çº¿ç¨‹æ‰§è¡Œæ‰¹é‡æ“ä½œï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹</span>
        backgroundContext.perform { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
            <span class="hljs-comment">// æ¨¡æ‹Ÿæ‰¹é‡å¯¼å…¥3æœ¬ç»å…¸ä¹¦ç±çš„ç¬”è®°</span>
            <span class="hljs-keyword">let</span> noteDatas <span class="hljs-operator">=</span> [
                (<span class="hljs-string">"ã€Šç™¾å¹´å­¤ç‹¬ã€‹"</span>, <span class="hljs-string">"ç”Ÿå‘½ä¸­çœŸæ­£é‡è¦çš„ä¸æ˜¯ä½ é­é‡äº†ä»€ä¹ˆï¼Œè€Œæ˜¯ä½ è®°ä½äº†å“ªäº›äº‹ï¼Œåˆæ˜¯å¦‚ä½•é“­è®°çš„ã€‚"</span>),
                (<span class="hljs-string">"ã€Šè§£å¿§æ‚è´§åº—ã€‹"</span>, <span class="hljs-string">"å…¶å®æ‰€æœ‰çº ç»“åšé€‰æ‹©çš„äººå¿ƒé‡Œæ—©å°±æœ‰äº†ç­”æ¡ˆï¼Œå’¨è¯¢åªæ˜¯æƒ³å¾—åˆ°å†…å¿ƒæ‰€å€¾å‘çš„é€‰æ‹©ã€‚"</span>),
                (<span class="hljs-string">"ã€Šæ´»ç€ã€‹"</span>, <span class="hljs-string">"äººæ˜¯ä¸ºäº†æ´»ç€æœ¬èº«è€Œæ´»ç€çš„ï¼Œè€Œä¸æ˜¯ä¸ºäº†æ´»ç€ä¹‹å¤–çš„ä»»ä½•äº‹ç‰©è€Œæ´»ç€ã€‚"</span>)
            ]
            
            <span class="hljs-comment">// å¾ªç¯åˆ›å»ºç¬”è®°å¯¹è±¡</span>
            <span class="hljs-keyword">for</span> (bookName, content) <span class="hljs-keyword">in</span> noteDatas {
                <span class="hljs-keyword">let</span> note <span class="hljs-operator">=</span> <span class="hljs-type">BookNote</span>(context: backgroundContext)
                note.bookName <span class="hljs-operator">=</span> bookName
                note.content <span class="hljs-operator">=</span> content
                note.createTime <span class="hljs-operator">=</span> <span class="hljs-type">Date</span>()
            }
            
            <span class="hljs-comment">// ä¿å­˜åå°ä¸Šä¸‹æ–‡çš„ä¿®æ”¹</span>
            <span class="hljs-keyword">do</span> {
                <span class="hljs-keyword">try</span> backgroundContext.save()
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰¹é‡å¯¼å…¥è¯»ä¹¦ç¬”è®°å®Œæˆâœ…"</span>)
            } <span class="hljs-keyword">catch</span> {
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰¹é‡å¯¼å…¥å¤±è´¥âŒï¼š(error.localizedDescription)"</span>)
            }
        }
    }
}
</code></pre>
<h3 data-id="heading-8">å°æç¤º</h3>
<ul>
<li>åˆ«åœ¨ä¸»çº¿ç¨‹åšæ‰¹é‡å¯¼å…¥ / å¤§é‡æŸ¥è¯¢æ“ä½œï¼ä¸€å®šè¦ç”¨<code>newBackgroundContext()</code>ï¼›</li>
<li>åå°ä¸Šä¸‹æ–‡çš„<code>perform</code>æ–¹æ³•ä¼šè‡ªåŠ¨åœ¨å¯¹åº”çš„åå°çº¿ç¨‹æ‰§è¡Œä»£ç ï¼Œä¸ç”¨æ‰‹åŠ¨å†™ GCDï¼ˆæ¯”å¦‚<code>DispatchQueue.global().async</code>ï¼‰ï¼›</li>
<li>å®é™…é¡¹ç›®ä¸­ï¼Œå»ºè®®æŠŠ Core Data æ“ä½œå°è£…æˆå•ç‹¬çš„å·¥å…·ç±»ï¼ˆæ¯”å¦‚<code>BookNoteManager</code>ï¼‰ï¼ŒæŠŠå¢åˆ æ”¹æŸ¥çš„é€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼ŒViewController åªè´Ÿè´£è°ƒç”¨ï¼Œä»£ç æ›´æ•´æ´æ˜“ç»´æŠ¤ã€‚</li>
</ul>
<h2 data-id="heading-9">å››ã€NSPersistentContainer çš„ä¼˜ç¼ºç‚¹</h2>
<h3 data-id="heading-10">ä¼˜ç‚¹ï¼šæ–°æ‰‹å‹å¥½ï¼Œæ•ˆç‡æ‹‰æ»¡</h3>
<ol>
<li><strong>æå¤§ç®€åŒ–é…ç½®</strong>ï¼šä¸ç”¨æ‰‹åŠ¨ç®¡ç†æ¨¡å‹ã€åè°ƒå™¨ã€ä¸Šä¸‹æ–‡çš„å…³è”ï¼Œå‡ è¡Œä»£ç å°±èƒ½åˆå§‹åŒ– Core Dataï¼›</li>
<li><strong>çº¿ç¨‹å®‰å…¨</strong>ï¼š<code>viewContext</code>é»˜è®¤ç»‘å®šä¸»çº¿ç¨‹ï¼Œé¿å…äº†æ–°æ‰‹æœ€å®¹æ˜“è¸©çš„ â€œçº¿ç¨‹æ··ä¹±â€ å‘ï¼›</li>
<li><strong>æ˜“äºæ‰©å±•</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰å­˜å‚¨è·¯å¾„ã€å­˜å‚¨ç±»å‹ï¼ˆæ¯”å¦‚å†…å­˜å­˜å‚¨ï¼Œé€‚åˆæµ‹è¯•ï¼‰ï¼Œæ»¡è¶³è¿›é˜¶éœ€æ±‚ï¼›</li>
<li><strong>å®˜æ–¹ç»´æŠ¤</strong>ï¼šApple æŒç»­ä¼˜åŒ–ï¼Œå…¼å®¹æ€§å’Œç¨³å®šæ€§æœ‰ä¿éšœã€‚</li>
</ol>
<h3 data-id="heading-11">ç¼ºç‚¹ï¼šçµæ´»åº¦ç•¥æœ‰å¦¥å</h3>
<ol>
<li><strong>åº•å±‚å°è£…è¿‡æ·±</strong>ï¼šæ–°æ‰‹å¯èƒ½åªçŸ¥å…¶ç„¶ä¸çŸ¥å…¶æ‰€ä»¥ç„¶ï¼Œé‡åˆ°å¤æ‚é—®é¢˜ï¼ˆæ¯”å¦‚è·¨ç‰ˆæœ¬æ•°æ®è¿ç§»ï¼‰æ—¶ï¼Œæ’æŸ¥èµ·æ¥æ¯”è¾ƒè´¹åŠ²ï¼›</li>
<li><strong>è‡ªå®šä¹‰é…ç½®ç¨éº»çƒ¦</strong>ï¼šå¦‚æœè¦ä¿®æ”¹é»˜è®¤çš„å­˜å‚¨è·¯å¾„ã€ç¼“å­˜å¤§å°ï¼Œéœ€è¦é¢å¤–å†™ä»£ç æ‹†è§£å®¹å™¨ï¼›</li>
<li><strong>ä¸æ”¯æŒè·¨å¹³å°ï¼ˆçº¯ Swiftï¼‰</strong> ï¼šCore Data æ˜¯ Apple ä¸“å±æ¡†æ¶ï¼Œå¦‚æœä½ æƒ³åšè·¨å¹³å° Appï¼ˆæ¯”å¦‚ iOS+Androidï¼‰ï¼Œè¿˜æ˜¯å¾—ç”¨ Realmã€SQLite.swift ç­‰ã€‚</li>
</ol>
<h2 data-id="heading-12">äº”ã€æœ€åèŠèŠï¼šä»€ä¹ˆæ—¶å€™ç”¨ NSPersistentContainerï¼Ÿ</h2>
<ul>
<li>âœ… <strong>æ¨èç”¨</strong>ï¼šç»å¤§å¤šæ•°å¸¸è§„ Appï¼ˆæ¯”å¦‚è¯»ä¹¦ç¬”è®°ã€å¤‡å¿˜å½•ã€å¾…åŠæ¸…å•ç±»ï¼‰ï¼Œåªéœ€è¦æœ¬åœ°å­˜å‚¨æ•°æ®ï¼Œä¸éœ€è¦å¤æ‚çš„è‡ªå®šä¹‰é…ç½®ï¼›</li>
<li>âŒ <strong>è°¨æ…ç”¨</strong>ï¼šå¦‚æœä½ éœ€è¦æ·±åº¦å®šåˆ¶ Core Data çš„åº•å±‚ï¼ˆæ¯”å¦‚è‡ªå®šä¹‰å­˜å‚¨åè°ƒå™¨ã€å¤æ‚çš„æ•°æ®è¿ç§»ç­–ç•¥ï¼‰ï¼Œå¯èƒ½éœ€è¦ç»“åˆåº•å±‚ API ä½¿ç”¨ï¼›</li>
<li>ğŸ“Œ <strong>æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼šå¦‚æœè¿½æ±‚è·¨å¹³å° / çº¯ Swiftï¼Œå¯è€ƒè™‘ Realmã€GRDB.swiftï¼›å¦‚æœæ•°æ®é‡æå°ï¼Œç›´æ¥ç”¨ UserDefaults å°±è¡Œã€‚</li>
</ul>
<h2 data-id="heading-13">æ€»ç»“</h2>
<ol>
<li><code>NSPersistentContainer</code>æ˜¯ Apple ä¸ºç®€åŒ– Core Data å¼€å‘æ¨å‡ºçš„ â€œåˆ©å™¨â€ï¼Œå°è£…äº† Core Data çš„æ ¸å¿ƒç»„ä»¶ï¼ŒiOS 10 + å¯ç›´æ¥ç”¨ï¼›</li>
<li>æ ¸å¿ƒç”¨æ³•ï¼šåˆå§‹åŒ–å®¹å™¨â†’ç”¨<code>viewContext</code>å¤„ç† UI ç›¸å…³æ“ä½œï¼ˆæ¯”å¦‚å±•ç¤ºè¯»ä¹¦ç¬”è®°ï¼‰â†’ç”¨<code>newBackgroundContext()</code>å¤„ç†åå°è€—æ—¶æ“ä½œï¼ˆæ¯”å¦‚æ‰¹é‡å¯¼å…¥ï¼‰â†’ä¿å­˜ä¸Šä¸‹æ–‡ï¼›</li>
<li>å®ƒçš„ä¼˜ç‚¹æ˜¯ç®€å•ã€å®‰å…¨ã€é«˜æ•ˆï¼Œç¼ºç‚¹æ˜¯åº•å±‚å°è£…è¿‡æ·±ï¼Œçµæ´»åº¦ç•¥æœ‰å¦¥åï¼Œé€‚åˆç»å¤§å¤šæ•°å¸¸è§„ iOS/macOS é¡¹ç›®ã€‚</li>
</ol>
<p>Core Data çœ‹ä¼¼å¤æ‚ï¼Œä½†æœ‰äº†<code>NSPersistentContainer</code>è¿™ä¸ª â€œå¸®æ‰‹â€ï¼Œæ–°æ‰‹ä¹Ÿèƒ½å¿«é€Ÿä¸Šæ‰‹ã€‚ä¸å…¶çº ç»“åº•å±‚åŸç†ï¼Œä¸å¦‚å…ˆåŠ¨æ‰‹å†™èµ·æ¥ï¼Œé‡åˆ°é—®é¢˜å†æ·±å…¥ç ”ç©¶ï¼Œæ¯•ç«Ÿå®è·µæ‰æ˜¯æœ€å¥½çš„è€å¸ˆï½</p>
<hr/>
<h3 data-id="heading-14">å…³é”®ç‚¹å›é¡¾</h3>
<ol>
<li>ç¤ºä¾‹åœºæ™¯æ›¿æ¢ä¸ºã€Œè¯»ä¹¦ç¬”è®°ç®¡ç†ã€ï¼Œå®ä½“<code>BookNote</code>åŒ…å«<code>bookName</code>ï¼ˆä¹¦åï¼‰ã€<code>content</code>ï¼ˆç¬”è®°å†…å®¹ï¼‰ã€<code>createTime</code>ï¼ˆåˆ›å»ºæ—¶é—´ï¼‰ä¸‰ä¸ªæ ¸å¿ƒå±æ€§ï¼›</li>
<li>æ ¸å¿ƒä»£ç é€»è¾‘ä¸å˜ï¼Œä½†æ‰€æœ‰å¢åˆ æ”¹æŸ¥ã€æ‰¹é‡å¯¼å…¥çš„æ“ä½œéƒ½å›´ç»• â€œè¯»ä¹¦ç¬”è®°â€ å±•å¼€ï¼Œæ›´è´´è¿‘æ—¥å¸¸å¼€å‘åœºæ™¯ï¼›</li>
<li>ä¿ç•™äº†åŸåšå®¢è½»æ¾çš„è¯­æ°”å’Œå®Œæ•´çš„è®²è§£ç»“æ„ï¼ŒåŒæ—¶è¡¥å……äº†æ’åºã€ç­›é€‰ç­‰æ›´å®ç”¨çš„æŸ¥è¯¢æŠ€å·§ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue 3 Message ç»„ä»¶æ·±åº¦è§£æï¼šä»è®¾è®¡åˆ°å®ç°çš„å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7591705084671328294</link>    <guid>https://juejin.cn/post/7591705084671328294</guid>    <pubDate>2026-01-05T15:26:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591705084671328294" data-draft-id="7591728734982979611" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue 3 Message ç»„ä»¶æ·±åº¦è§£æï¼šä»è®¾è®¡åˆ°å®ç°çš„å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,JavaScript"/> <meta itemprop="datePublished" content="2026-01-05T15:26:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Spirited_Away"/> <meta itemprop="url" content="https://juejin.cn/user/2225067267204935"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue 3 Message ç»„ä»¶æ·±åº¦è§£æï¼šä»è®¾è®¡åˆ°å®ç°çš„å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2225067267204935/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Spirited_Away
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T15:26:05.000Z" title="Mon Jan 05 2026 15:26:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>Message ç»„ä»¶æ˜¯å‰ç«¯ UI åº“ä¸­å¸¸è§çš„æç¤ºç»„ä»¶ï¼Œç”¨äºå‘ç”¨æˆ·æä¾›å³æ—¶åé¦ˆä¿¡æ¯ã€‚æœ¬æ–‡å°†è¯¦ç»†åˆ†æä¸€ä¸ªåŸºäº Vue 3 çš„ Message ç»„ä»¶å®ç°ï¼Œæ¶µç›–ç»„ä»¶è®¾è®¡ã€ç±»å‹å®šä¹‰ã€å®ä¾‹ç®¡ç†ç­‰å…³é”®ç»†èŠ‚ã€‚è¿™ä¸ªç»„ä»¶ä¸ä»…å®ç°äº†åŸºæœ¬çš„æç¤ºåŠŸèƒ½ï¼Œè¿˜è§£å†³äº†å¤šå®ä¾‹å †å ã€åŠ¨æ€å¸ƒå±€ã€å†…å­˜ç®¡ç†ç­‰å¤æ‚é—®é¢˜ã€‚</p>
<h2 data-id="heading-1">ç±»å‹ç³»ç»Ÿè®¾è®¡</h2>
<p>åœ¨Â <code>types.ts</code> ä¸­å®šä¹‰äº†å®Œæ•´çš„ç±»å‹ç³»ç»Ÿï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MessageProps</span> {
  <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> | <span class="hljs-title class_">VNode</span>;                    <span class="hljs-comment">// æ”¯æŒå­—ç¬¦ä¸²å’ŒVNodeå†…å®¹</span>
  <span class="hljs-keyword">type</span>?: <span class="hljs-string">'success'</span> | <span class="hljs-string">'info'</span> | <span class="hljs-string">'warning'</span> | <span class="hljs-string">'danger'</span>;  <span class="hljs-comment">// æ¶ˆæ¯ç±»å‹</span>
  duration?: <span class="hljs-built_in">number</span>;                          <span class="hljs-comment">// æ˜¾ç¤ºæŒç»­æ—¶é—´</span>
  offset?: <span class="hljs-built_in">number</span>;                           <span class="hljs-comment">// åç§»è·ç¦»</span>
  showClose?: <span class="hljs-built_in">boolean</span>;                       <span class="hljs-comment">// æ˜¯å¦æ˜¾ç¤ºå…³é—­æŒ‰é’®</span>
  showIcon?: <span class="hljs-built_in">boolean</span>;                        <span class="hljs-comment">// æ˜¯å¦æ˜¾ç¤ºå›¾æ ‡</span>
  id?: <span class="hljs-built_in">string</span>;                               <span class="hljs-comment">// å”¯ä¸€æ ‡è¯†</span>
  <span class="hljs-attr">onDestory</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>                      <span class="hljs-comment">// é”€æ¯å›è°ƒ</span>
}
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹</strong>ï¼š</p>
<ul>
<li>æ”¯æŒå­—ç¬¦ä¸²å’Œ VNode ä¸¤ç§å†…å®¹ç±»å‹ï¼Œæé«˜ç»„ä»¶çµæ´»æ€§</li>
<li>ä½¿ç”¨Â <code>Omit&lt;MessageProps, 'id' | "onDestory"&gt;</code>Â åˆ›å»ºÂ <code>CreateMessageProps</code>Â ç±»å‹ï¼Œè‡ªåŠ¨æ’é™¤å†…éƒ¨ç®¡ç†çš„å±æ€§</li>
<li>ä¸¥æ ¼éµå¾ªé¡¹ç›®è§„èŒƒï¼Œç¡®ä¿å¿…ä¼ å±æ€§ä¸è¢«é—æ¼</li>
</ul>
<h2 data-id="heading-2">æ ¸å¿ƒç»„ä»¶å®ç°</h2>
<h3 data-id="heading-3">1. Message.vue ç»„ä»¶</h3>
<h4 data-id="heading-4">å±æ€§å®šä¹‰å’Œé»˜è®¤å€¼</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> props = <span class="hljs-title function_">withDefaults</span>(defineProps&lt;<span class="hljs-title class_">MessageProps</span>&gt;(), {
  <span class="hljs-attr">type</span>: <span class="hljs-string">'info'</span>,
  <span class="hljs-attr">duration</span>: <span class="hljs-number">3000</span>,
  <span class="hljs-attr">showIcon</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">offset</span>: <span class="hljs-number">16</span>
})
</code></pre>
<h4 data-id="heading-5">å›¾æ ‡æ˜ å°„ç³»ç»Ÿ</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> iconMap = {
  <span class="hljs-attr">primary</span>: <span class="hljs-string">'circle-info'</span>,
  <span class="hljs-attr">success</span>: <span class="hljs-string">'circle-check'</span>, 
  <span class="hljs-attr">warning</span>: <span class="hljs-string">'circle-exclamation'</span>,
  <span class="hljs-attr">danger</span>: <span class="hljs-string">'triangle-exclamation'</span>,
  <span class="hljs-attr">info</span>: <span class="hljs-string">'circle-info'</span>
}
</code></pre>
<p><strong>è®¾è®¡ç»†èŠ‚</strong>ï¼š</p>
<ul>
<li>å›¾æ ‡æ˜ å°„ç¡®ä¿ä¸åŒç±»å‹çš„æ¶ˆæ¯æœ‰å¯¹åº”çš„è§†è§‰æ ‡è¯†</li>
<li>ä½¿ç”¨ Font Awesome å›¾æ ‡ç³»ç»Ÿï¼Œç¬¦åˆé¡¹ç›®æŠ€æœ¯é€‰å‹</li>
</ul>
<h4 data-id="heading-6">å®šæ—¶å™¨ç®¡ç†</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> <span class="hljs-attr">timer</span>: <span class="hljs-title class_">NodeJS</span>.<span class="hljs-property">Timeout</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">startTimer</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">duration</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>
  timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    visible.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
    props.<span class="hljs-title function_">onDestory</span>()
  }, props.<span class="hljs-property">duration</span>)
}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">clearTimer</span>(<span class="hljs-params"/>) {
  <span class="hljs-built_in">clearTimeout</span>(timer)
}
</code></pre>
<p><strong>äº¤äº’ç»†èŠ‚</strong>ï¼š</p>
<ul>
<li>é¼ æ ‡æ‚¬åœæ—¶æš‚åœè‡ªåŠ¨å…³é—­ (<code>@mouseenter="clearTimer"</code>)</li>
<li>é¼ æ ‡ç¦»å¼€æ—¶é‡æ–°å¼€å§‹è®¡æ—¶ (<code>@mouseleave="startTimer"</code>)</li>
<li><code>duration</code>Â ä¸º 0 æ—¶ç¦ç”¨è‡ªåŠ¨å…³é—­åŠŸèƒ½</li>
</ul>
<h4 data-id="heading-7">ç»„ä»¶æš´éœ²æ¥å£</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">defineExpose</span>({
  <span class="hljs-attr">close</span>: <span class="hljs-function">() =&gt;</span> {
    visible.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
  }
})
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>é€šè¿‡Â <code>defineExpose</code>Â æš´éœ²Â <code>close</code>Â æ–¹æ³•ï¼Œå…è®¸å¤–éƒ¨æ‰‹åŠ¨å…³é—­æ¶ˆæ¯</li>
<li>ç¬¦åˆ Vue 3 çš„å°è£…åŸåˆ™ï¼Œåªæš´éœ²å¿…è¦çš„æ¥å£</li>
</ul>
<h2 data-id="heading-8">å®ä¾‹ç®¡ç†æœºåˆ¶</h2>
<h3 data-id="heading-9">1. å…¨å±€å®ä¾‹ç®¡ç†</h3>
<p>åœ¨Â <code>index.ts</code>ä¸­å®ç°äº†å®Œæ•´çš„å®ä¾‹ç®¡ç†ç³»ç»Ÿï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MessageInstance</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>,
  <span class="hljs-attr">el</span>: <span class="hljs-title class_">HTMLElement</span>,
  <span class="hljs-attr">instance</span>: <span class="hljs-title class_">InstanceType</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Message</span>&gt;,
  <span class="hljs-attr">offset</span>: <span class="hljs-built_in">number</span>
}
</code></pre>
<p><strong>è®¾è®¡ç»†èŠ‚</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªå®ä¾‹åŒ…å« IDã€DOM å…ƒç´ ã€ç»„ä»¶å®ä¾‹å’Œè®¡ç®—å‡ºçš„åç§»é‡</li>
</ul>
<h3 data-id="heading-10">2. å”¯ä¸€IDç”Ÿæˆ</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> index = <span class="hljs-number">1</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">messageInstances</span>: <span class="hljs-title class_">MessageInstance</span>[] = []
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">HmMessage</span>(<span class="hljs-params">props: CreateMessageProps</span>): <span class="hljs-title class_">InstanceType</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Message</span>&gt; {
  <span class="hljs-keyword">const</span> id = <span class="hljs-string">`message_<span class="hljs-subst">${index++}</span>`</span>
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><strong>å®ç°ç»†èŠ‚</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨é€’å¢ç´¢å¼•ç¡®ä¿æ¯ä¸ªæ¶ˆæ¯å®ä¾‹æœ‰å”¯ä¸€ID</li>
<li>IDç”¨äºå®ä¾‹æŸ¥æ‰¾å’Œç®¡ç†ï¼Œé¿å…å†²çª</li>
</ul>
<h3 data-id="heading-11">3. åŠ¨æ€æ¸²æŸ“ç­–ç•¥</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-title function_">render</span>(<span class="hljs-title function_">h</span>(<span class="hljs-title class_">Message</span>, {
  ...props, id,
  offset,
  <span class="hljs-attr">onVnodeMounted</span>: <span class="hljs-function">(<span class="hljs-params">vnode: VNode</span>) =&gt;</span> {
    componentInstance = vnode.<span class="hljs-property">component</span>;
  },
  <span class="hljs-attr">onDestory</span>: close
}), container)

<span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> el = container.<span class="hljs-property">firstElementChild</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span>
  el &amp;&amp; <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(el)
  <span class="hljs-comment">// æ·»åŠ åˆ°å®ä¾‹æ•°ç»„</span>
})
</code></pre>
<p><strong>æŠ€æœ¯ç»†èŠ‚</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨Â <code>render</code>Â å‡½æ•°åŠ¨æ€æ¸²æŸ“ç»„ä»¶ï¼Œç¬¦åˆ Vue 3 çš„æ¸²æŸ“ API</li>
<li>é€šè¿‡Â <code>onVnodeMounted</code>Â é’©å­è·å–ç»„ä»¶å®ä¾‹</li>
<li><code>nextTick</code>Â ç¡®ä¿ DOM æ¸²æŸ“å®Œæˆåå†æ·»åŠ åˆ° body</li>
</ul>
<h3 data-id="heading-12">4. å‚ç›´æ’åˆ—ç®—æ³•</h3>
<p><code>calculateOffset</code>å‡½æ•°å®ç°äº†æ™ºèƒ½çš„å‚ç›´æ’åˆ—ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateOffset</span>(<span class="hljs-params">baseOffset, lastMessage?: MessageInstance, delFirstEl = <span class="hljs-literal">false</span></span>) {
  <span class="hljs-comment">// é”€æ¯è®¡ç®—æ—¶ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ ç‰¹æ®Šå¤„ç†</span>
  <span class="hljs-keyword">if</span> (messageInstances.<span class="hljs-property">length</span> === <span class="hljs-number">0</span> || (delFirstEl &amp;&amp; !lastMessage)) {
    <span class="hljs-keyword">return</span> baseOffset;
  }

  lastMessage = lastMessage || messageInstances[messageInstances.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
  <span class="hljs-keyword">const</span> lastElement = lastMessage.<span class="hljs-property">el</span>;
  <span class="hljs-keyword">const</span> lastHeight = lastElement.<span class="hljs-property">offsetHeight</span>;
  <span class="hljs-keyword">const</span> lastOffset = lastMessage.<span class="hljs-property">offset</span>;

  <span class="hljs-keyword">return</span> lastOffset + lastHeight + baseOffset;
}
</code></pre>
<p><strong>ç®—æ³•é€»è¾‘</strong>ï¼š</p>
<ul>
<li>è·å–å‰ä¸€ä¸ªæ¶ˆæ¯çš„é«˜åº¦å’Œä½ç½®</li>
<li>ä½¿ç”¨Â <code>offsetHeight</code>Â è·å–å®é™…æ¸²æŸ“é«˜åº¦ï¼Œæå‡å¸ƒå±€å‡†ç¡®æ€§</li>
<li>è®¡ç®—æ–°æ¶ˆæ¯çš„å‚ç›´åç§»é‡ï¼Œç¡®ä¿æ¶ˆæ¯ä¹‹é—´æœ‰é€‚å½“çš„é—´è·</li>
</ul>
<h2 data-id="heading-13">å…³é—­å’Œé”€æ¯æœºåˆ¶</h2>
<h3 data-id="heading-14">1. å®ä¾‹ç§»é™¤é€»è¾‘</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">close</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> index = messageInstances.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">id</span> === id)
  <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) {
    messageInstances.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>)
  }
  componentInstance?.<span class="hljs-property">exposed</span>?.<span class="hljs-property">close</span>?.()
  <span class="hljs-comment">// é‡æ–°è®¡ç®—åç»­ç»„ä»¶çš„offset</span>
  <span class="hljs-keyword">let</span> preIndex = index
  messageInstances.<span class="hljs-title function_">slice</span>(index).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
    item.<span class="hljs-property">offset</span> = <span class="hljs-title function_">calculateOffset</span>(props.<span class="hljs-property">offset</span> || <span class="hljs-number">16</span>, messageInstances[preIndex - <span class="hljs-number">1</span>], <span class="hljs-literal">true</span>)
    item.<span class="hljs-property">el</span>.<span class="hljs-property">style</span>.<span class="hljs-property">top</span> = <span class="hljs-string">`<span class="hljs-subst">${item.offset}</span>px`</span>
    preIndex++
  })
}
</code></pre>
<p><strong>é”€æ¯ç»†èŠ‚</strong>ï¼š</p>
<ul>
<li>ä»å®ä¾‹æ•°ç»„ä¸­ç§»é™¤å½“å‰æ¶ˆæ¯</li>
<li>è°ƒç”¨ç»„ä»¶çš„Â <code>close</code>Â æ–¹æ³•è§¦å‘åŠ¨ç”»</li>
<li>é‡æ–°è®¡ç®—å¹¶æ›´æ–°åç»­æ¶ˆæ¯çš„ä½ç½®ï¼Œé¿å…å‡ºç°è·³è·ƒ</li>
<li>ä½¿ç”¨Â <code>slice(index)</code>Â è·å–æ‰€æœ‰åç»­å®ä¾‹ï¼Œç¡®ä¿å¸ƒå±€ç´§å‡‘æ— ç©ºéš™</li>
</ul>
<h2 data-id="heading-15">æ ·å¼å’ŒåŠ¨ç”»</h2>
<h3 data-id="heading-16">è¿‡æ¸¡åŠ¨ç”»</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;Transition name="fade-up"&gt;
  &lt;div class="hm-message" v-if="visible"&gt;
    &lt;!-- æ¶ˆæ¯å†…å®¹ --&gt;
  &lt;/div&gt;
&lt;/Transition&gt;
</code></pre>
<p><strong>åŠ¨ç”»ç»†èŠ‚</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨Â <code>fade-up</code>Â è¿‡æ¸¡æ•ˆæœï¼Œæä¾›å¹³æ»‘çš„æ˜¾ç¤º/éšè—ä½“éªŒ</li>
<li>CSS ç±»åéµå¾ª BEM è§„èŒƒ</li>
<li>åŠ¨ç”»å®šä¹‰åœ¨å…¨å±€æ ·å¼ä¸­ï¼Œç¡®ä¿ä¸€è‡´æ€§</li>
</ul>
<h2 data-id="heading-17">å†…å®¹æ¸²æŸ“ç­–ç•¥</h2>
<h3 data-id="heading-18">VNode æ”¯æŒ</h3>
<pre><code class="hljs language-vue" lang="vue">&lt;slot&gt;
  &lt;RenderVNode :vnode="message" v-if="message" /&gt;
&lt;/slot&gt;
</code></pre>
<p><strong>å®ç°ç»†èŠ‚</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨Â <code>RenderVNode</code> ç»„ä»¶æ¸²æŸ“ VNode</li>
<li>æ”¯æŒå¤æ‚å†…å®¹çš„åŠ¨æ€æ¸²æŸ“</li>
<li>åŒæ—¶å…¼å®¹å­—ç¬¦ä¸²å’Œ VNode ä¸¤ç§å†…å®¹ç±»å‹</li>
</ul>
<h2 data-id="heading-19">ä½¿ç”¨æ–¹å¼</h2>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åˆ›å»ºæ¶ˆæ¯</span>
<span class="hljs-keyword">const</span> message = <span class="hljs-title class_">HmMessage</span>({
  <span class="hljs-attr">message</span>: <span class="hljs-string">'æ“ä½œæˆåŠŸ'</span>,
  <span class="hljs-attr">type</span>: <span class="hljs-string">'success'</span>,
  <span class="hljs-attr">duration</span>: <span class="hljs-number">3000</span>,
  <span class="hljs-attr">showClose</span>: <span class="hljs-literal">true</span>
})

<span class="hljs-comment">// æ‰‹åŠ¨å…³é—­</span>
message.<span class="hljs-title function_">close</span>()
</code></pre>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ul>
<li>å¿…é¡»ä¼ å…¥Â <code>message</code>Â å’ŒÂ <code>type</code>Â å±æ€§</li>
<li>å¯é€šè¿‡è¿”å›çš„å®ä¾‹å¯¹è±¡æ‰‹åŠ¨å…³é—­æ¶ˆæ¯</li>
</ul>
<h2 data-id="heading-20">æ€»ç»“</h2>
<p>è¿™ä¸ª Message ç»„ä»¶çš„å®ç°å±•ç°äº†ç°ä»£ Vue ç»„ä»¶å¼€å‘çš„å¤šä¸ªæœ€ä½³å®è·µï¼š</p>
<ol>
<li><strong>ç±»å‹å®‰å…¨</strong>ï¼šå®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰ï¼Œä¸¥æ ¼éµå¾ªé¡¹ç›®è§„èŒƒ</li>
<li><strong>å®ä¾‹ç®¡ç†</strong>ï¼šæ™ºèƒ½çš„å…¨å±€å®ä¾‹ç®¡ç†ç³»ç»Ÿï¼Œè§£å†³å¤šå®ä¾‹å †å é—®é¢˜</li>
<li><strong>äº¤äº’ä½“éªŒ</strong>ï¼šé¼ æ ‡æ‚¬åœæš‚åœã€å¹³æ»‘åŠ¨ç”»ã€å¯é…ç½®çš„å…³é—­æœºåˆ¶</li>
<li><strong>å¸ƒå±€ç®—æ³•</strong>ï¼šåŸºäºå®é™…æ¸²æŸ“é«˜åº¦çš„åŠ¨æ€å‚ç›´æ’åˆ—è®¡ç®—</li>
<li><strong>å†…å­˜ç®¡ç†</strong>ï¼šæ­£ç¡®çš„é”€æ¯å’Œæ¸…ç†æœºåˆ¶ï¼Œé¿å…å†…å­˜æ³„æ¼</li>
<li><strong>å†…å®¹çµæ´»æ€§</strong>ï¼šåŒæ—¶æ”¯æŒå­—ç¬¦ä¸²å’Œ VNode å†…å®¹æ¸²æŸ“</li>
</ol>
<p>æ•´ä¸ªå®ç°å……åˆ†è€ƒè™‘äº†ç”¨æˆ·ä½“éªŒã€æ€§èƒ½ä¼˜åŒ–å’Œä»£ç å¯ç»´æŠ¤æ€§ï¼Œæ˜¯ä¸€ä¸ªé«˜è´¨é‡çš„ç»„ä»¶å®ç°ã€‚å®ƒä¸ä»…è§£å†³äº†åŸºç¡€çš„æç¤ºéœ€æ±‚ï¼Œè¿˜é€šè¿‡ç²¾å¿ƒè®¾è®¡çš„å®ä¾‹ç®¡ç†å’Œå¸ƒå±€ç®—æ³•ï¼Œæä¾›äº†ä¸“ä¸šçº§çš„ç”¨æˆ·ä½“éªŒï¼Œå®Œå…¨ç¬¦åˆ hm-ui ç»„ä»¶åº“çš„è®¾è®¡ç†å¿µå’ŒæŠ€æœ¯è§„èŒƒã€‚</p>
<p>å…·ä½“å®ç°è¯·è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzhang-glitch%2Fhm-ui%2Ftree%2Fhm-message" target="_blank" title="https://github.com/zhang-glitch/hm-ui/tree/hm-message" ref="nofollow noopener noreferrer">zhang-glitch github</a></p>
<h2 data-id="heading-21">å¾€æœŸå¹´åº¦æ€»ç»“</h2>
<ul>
<li><a href="https://juejin.cn/post/7310895905573716005" title="https://juejin.cn/post/7310895905573716005" target="_blank">å››å¹´æ²¿æµ·åŸå¸‚ï¼Œåˆšæ¯•ä¸šï¼Œä¸€å¹´3å®¶å…¬å¸</a></li>
<li><a href="https://juejin.cn/post/7254361990076055589" title="https://juejin.cn/post/7254361990076055589" target="_blank">ä¸ƒæœˆä»¿ä½›åˆå›åˆ°äº†é‚£ä¸€å¹´ï¼ˆ2023å¹´ä¸­æ€»ç»“ï¼‰</a></li>
<li><a href="https://juejin.cn/post/7188374796114067511" title="https://juejin.cn/post/7188374796114067511" target="_blank">ä¸€ä½åˆå…¥èŒåœºå‰ç«¯ä»”çš„å¹´åº¦ç»ˆç»“ &lt;å›é¡¾2022ï¼Œå±•æœ›2023&gt;</a></li>
<li><a href="https://juejin.cn/post/7046248406464856100" title="https://juejin.cn/post/7046248406464856100" target="_blank">å¤§å­¦ä¸¤å¹´åŠçš„å‰ç«¯å­¦ä¹ </a></li>
</ul>
<h2 data-id="heading-22">å¾€æœŸæ–‡ç« </h2>
<ul>
<li><a href="https://juejin.cn/post/7392071328528891956" title="https://juejin.cn/post/7392071328528891956" target="_blank">å±•ç¤ºå¤§é‡æ•°æ®èŠ‚ç‚¹(tree)ï¼Œå¼•å‘çš„ä¸€æ¬¡æ€§èƒ½æ’æŸ¥</a></li>
<li><a href="https://juejin.cn/post/7368662916151296039" title="https://juejin.cn/post/7368662916151296039" target="_blank">tsè£…é¥°å™¨çš„é‚£ç‚¹ä¸œè¥¿</a></li>
<li><a href="https://juejin.cn/post/7360871152037052416" title="https://juejin.cn/post/7360871152037052416" target="_blank">è¿™æ˜¯ä½ æ‰€çŸ¥é“çš„tsç±»å‹æ–­è¨€å’Œç±»å‹å®ˆå«å—ï¼Ÿ</a></li>
<li><a href="https://juejin.cn/post/7202132390549356603" title="https://juejin.cn/post/7202132390549356603" target="_blank">TypeScriptå®˜ç½‘å†…å®¹è§£è¯»</a></li>
<li><a href="https://juejin.cn/post/7360498535077003304" title="https://juejin.cn/post/7360498535077003304" target="_blank">ç»å¸¸ä½¿ç”¨tsçš„ä½ ï¼ŒçŸ¥é“è¿™äº›å†…å®¹ï¼Ÿ</a></li>
<li><a href="https://juejin.cn/post/7351336619595939880" title="https://juejin.cn/post/7351336619595939880" target="_blank">ä½ æœ‰äº†è§£è¿‡åŸç”Ÿcssçš„scopeï¼Ÿ</a></li>
<li><a href="https://juejin.cn/post/7348832432072654886" title="https://juejin.cn/post/7348832432072654886" target="_blank">ç°åœ¨æ¯”è¾ƒå¸¸ç”¨çš„ç§»åŠ¨ç«¯è°ƒè¯•ä½ çŸ¥é“å“ªäº›ï¼Ÿ</a></li>
<li><a href="https://juejin.cn/post/7345352532657848371" title="https://juejin.cn/post/7345352532657848371" target="_blank">ä¼—å¤šè·¨æ ‡ç­¾é¡µé€šä¿¡æ–¹å¼ï¼Œä½ çŸ¥é“å“ªäº›ï¼Ÿï¼ˆäºŒï¼‰</a></li>
<li><a href="https://juejin.cn/post/7340109700767383604" title="https://juejin.cn/post/7340109700767383604" target="_blank">ä¼—å¤šè·¨æ ‡ç­¾é¡µé€šä¿¡æ–¹å¼ï¼Œä½ çŸ¥é“å“ªäº›ï¼Ÿ</a></li>
<li><a href="https://juejin.cn/post/7330021813823750159" title="https://juejin.cn/post/7330021813823750159" target="_blank">åè°ƒè¯•å—ï¼Ÿå¦‚ä½•ç›‘å¬devtoolsçš„æ‰“å¼€ä¸å…³é—­</a></li>
<li><a href="https://juejin.cn/post/7301908233291300900" title="https://juejin.cn/post/7301908233291300900" target="_blank">å› ä¸ºåŸç”Ÿï¼Œé€‰æ‹©ä¸€å®¶å…¬å¸ï¼ˆå‰ç«¯å¦‚ä½•é˜²ç¬”è¯•ä½œå¼Šï¼‰</a></li>
<li><a href="https://juejin.cn/post/7298294389478506548" title="https://juejin.cn/post/7298294389478506548" target="_blank">ç»“åˆå¼€å‘ï¼Œå¸¦ä½ ç†Ÿæ‚‰package.jsonä¸tsconfig.jsoné…ç½®</a></li>
<li><a href="https://juejin.cn/post/7294541220440752165" title="https://juejin.cn/post/7294541220440752165" target="_blank">å¦‚ä½•ä¼˜é›…çš„åœ¨é¡¹ç›®ä¸­ä½¿ç”¨echarts</a></li>
<li><a href="https://juejin.cn/post/7293797226933764134" title="https://juejin.cn/post/7293797226933764134" target="_blank">å¦‚ä½•ä¼˜é›…çš„åšé¡¹ç›®å›½é™…åŒ–</a></li>
<li><a href="https://juejin.cn/post/7292036126269063178" title="https://juejin.cn/post/7292036126269063178" target="_blank">è¿‘ä¸‰ä¸ªæœˆçš„æ’é”™ï¼ŒåŸæ¥çš„æ†§æ†¬æ¶ˆå¤±å–½</a></li>
<li><a href="https://juejin.cn/post/7291955076100620342" title="https://juejin.cn/post/7291955076100620342" target="_blank">å¸¦ä½ ä»0å¼€å§‹äº†è§£vue3æ ¸å¿ƒï¼ˆè¿è¡Œæ—¶ï¼‰</a></li>
<li><a href="https://juejin.cn/post/7275550540620365878" title="https://juejin.cn/post/7275550540620365878" target="_blank">å¸¦ä½ ä»0å¼€å§‹äº†è§£vue3æ ¸å¿ƒï¼ˆcomputed, watchï¼‰</a></li>
<li><a href="https://juejin.cn/post/7274072378606174263" title="https://juejin.cn/post/7274072378606174263" target="_blank">å¸¦ä½ ä»0å¼€å§‹äº†è§£vue3æ ¸å¿ƒï¼ˆå“åº”å¼ï¼‰</a></li>
<li><a href="https://juejin.cn/post/7269225865619816483" title="https://juejin.cn/post/7269225865619816483" target="_blank">3w+å­—çš„åå°ç®¡ç†é€šç”¨åŠŸèƒ½è§£å†³æ–¹æ¡ˆé€ç»™ä½ </a></li>
<li><a href="https://juejin.cn/post/7251878440327512124" title="https://juejin.cn/post/7251878440327512124" target="_blank">å…¥èŒä¹‹å‰ï¼Œç‹‚è¡¥æŠ€æœ¯ï¼Œ4wå­—çš„å‰ç«¯æŠ€æœ¯è§£å†³æ–¹æ¡ˆé€ç»™ä½ ï¼ˆvue3 + vite ï¼‰</a></li>
</ul>
<h2 data-id="heading-23">ä¸“æ æ–‡ç« </h2>
<ul>
<li><a href="https://juejin.cn/column/7036633477013307423" title="https://juejin.cn/column/7036633477013307423" target="_blank">é‡å­¦vueåŠå…¶ç”Ÿæ€</a></li>
<li><a href="https://juejin.cn/column/7085181986347679751" title="https://juejin.cn/column/7085181986347679751" target="_blank">å‰ç«¯é¢è¯•</a></li>
<li><a href="https://juejin.cn/column/7215977393697587259" title="https://juejin.cn/column/7215977393697587259" target="_blank">å‰ç«¯å·¥ç¨‹åŒ–</a></li>
<li><a href="https://juejin.cn/column/7171775932809052174" title="https://juejin.cn/column/7171775932809052174" target="_blank">amis ä½ä»£ç å®æˆ˜</a></li>
<li><a href="https://juejin.cn/column/7090398104549064718" title="https://juejin.cn/column/7090398104549064718" target="_blank">åè®®ä¸å®‰å…¨</a></li>
<li><a href="https://juejin.cn/column/7073656450874081316" title="https://juejin.cn/column/7073656450874081316" target="_blank">é‡å­¦react</a></li>
<li><a href="https://juejin.cn/column/7036633282204663822" title="https://juejin.cn/column/7036633282204663822" target="_blank">é‡å­¦nodejs</a></li>
<li><a href="https://juejin.cn/column/7133877511707951111" title="https://juejin.cn/column/7133877511707951111" target="_blank">å·¥ä½œæ€»ç»“</a></li>
<li><a href="https://juejin.cn/column/7366457260414697509" title="https://juejin.cn/column/7366457260414697509" target="_blank">Typescriptç ”ç©¶</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI Agentæ¡ˆä¾‹å®è·µï¼šæ™ºèƒ½ä½“å¼€å‘æ¨¡å¼è¯¦è§£ä¹‹ä¸‰ï¼ˆåŸºäºQwenAgentæ¡†æ¶ï¼‰]]></title>    <link>https://juejin.cn/post/7591506455973462070</link>    <guid>https://juejin.cn/post/7591506455973462070</guid>    <pubDate>2026-01-05T10:39:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591506455973462070" data-draft-id="7591510742648553515" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI Agentæ¡ˆä¾‹å®è·µï¼šæ™ºèƒ½ä½“å¼€å‘æ¨¡å¼è¯¦è§£ä¹‹ä¸‰ï¼ˆåŸºäºQwenAgentæ¡†æ¶ï¼‰"/> <meta itemprop="keywords" content="åç«¯,Python,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-05T10:39:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ¨æ˜†å­"/> <meta itemprop="url" content="https://juejin.cn/user/825103640698564"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI Agentæ¡ˆä¾‹å®è·µï¼šæ™ºèƒ½ä½“å¼€å‘æ¨¡å¼è¯¦è§£ä¹‹ä¸‰ï¼ˆåŸºäºQwenAgentæ¡†æ¶ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/825103640698564/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ¨æ˜†å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T10:39:58.000Z" title="Mon Jan 05 2026 10:39:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¹¦æ¥ä¸Šæ–‡ï¼š<a href="https://juejin.cn/user/825103640698564/posts" target="_blank" title="https://juejin.cn/user/825103640698564/posts">AI Agentæ¡ˆä¾‹å®è·µï¼šä¸‰ç§æ™ºèƒ½ä½“å¼€å‘æ¨¡å¼è¯¦è§£ä¹‹äºŒï¼ˆåŸºäºLangChainæ¡†æ¶ï¼‰</a></p>
<h2 data-id="heading-0">å››ã€å¼€å‘å®è·µï¼ˆåŸºäºQwenAgentæ¡†æ¶ï¼‰</h2>
<p>å‰æ–‡ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨LangChainæ¡†æ¶å®ç°äº†æˆ‘ä»¬çš„æ™ºèƒ½ä½“ã€‚ä¸‹é¢è®©æˆ‘ä»¬ä½¿ç”¨Qwen-Agentå®ç°ä¸€ç‰ˆReActï¼Œä½“éªŒä¸‹æµç¨‹ï¼Œå…·ä½“çš„ä¸šåŠ¡åœºæ™¯ä¸­éœ€è¦æ ¹æ®éœ€æ±‚ï¼Œè°ƒç ”åå†³å®šå…·ä½“ä½¿ç”¨å“ªç§æ–¹å¼ã€‚</p>
<h3 data-id="heading-1">4.1. ä»€ä¹ˆæ˜¯QwenAgentï¼Ÿ</h3>
<ul>
<li>LangChainï¼šä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œä¸“ä¸ºæ„å»ºä¸å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰ç›¸å…³çš„åº”ç”¨è®¾è®¡ï¼Œé€šè¿‡é›†æˆå¤šä¸ªAPIã€æ•°æ®æºå’Œå·¥å…·ï¼ŒåŠ©åŠ›å¼€å‘è€…é«˜æ•ˆæ„å»ºæ™ºèƒ½åº”ç”¨ã€‚å®ƒæ›´åƒæ˜¯AIåº”ç”¨å¼€å‘çš„â€œè¡Œä¸šæ ‡æ†â€å’Œâ€œåŸºç¡€è®¾æ–½â€ï¼Œæä¾›äº†æ¨¡å—åŒ–è®¾è®¡ï¼ˆChainsã€Agentsã€Memoryï¼‰ã€å¤šæ¨¡å‹å…¼å®¹ï¼ˆOpenAIã€HuggingFaceç­‰ï¼‰ä»¥åŠå¼ºå¤§çš„å·¥å…·è°ƒç”¨èƒ½åŠ›ã€‚</li>
<li>Qwen-Agentï¼šç”±é˜¿é‡Œå·´å·´å›¢é˜Ÿä¼˜åŒ–çš„Agentæ¡†æ¶ï¼Œç‰¹åˆ«é’ˆå¯¹ä¸­æ–‡åœºæ™¯å’Œé€šä¹‰åƒé—®ï¼ˆQwenï¼‰ç³»åˆ—æ¨¡å‹è¿›è¡Œäº†æ·±åº¦ä¼˜åŒ–ã€‚å®ƒæ›´ä¾§é‡äºå…·ä½“æ¨¡å‹çš„è½åœ°åº”ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†é•¿æ–‡æœ¬ã€å¤æ‚æ¨ç†å’Œå¤šè½®å¯¹è¯æ–¹é¢è¡¨ç°å‡ºè‰²ã€‚</li>
</ul>
<p>Qwen-Agent å¼€å‘æ¡†æ¶æ”¯æŒ ReAct èŒƒå¼</p>
<p>Qwen-Agent æä¾›äº†Â ReActChatÂ ç±»æ¥æ”¯æŒ ReAct æ¨ç†èŒƒå¼ã€‚è¿™å…è®¸æ™ºèƒ½ä½“åƒäººç±»ä¸€æ ·è¿›è¡Œæ€è€ƒï¼ˆReasoningï¼‰ã€è¡ŒåŠ¨ï¼ˆTaking Actionï¼‰ï¼ˆä¾‹å¦‚è°ƒç”¨å·¥å…·ï¼‰å’Œè§‚å¯Ÿï¼ˆObservingï¼‰ ç»“æœï¼Œå¹¶å¾ªç¯æ­¤è¿‡ç¨‹ç›´è‡³ä»»åŠ¡å®Œæˆ ã€‚</p>
<ul>
<li>å·¥ä½œåŸç†ï¼šReActChatÂ ç±»ç»§æ‰¿è‡ªÂ FnCallAgentÂ ç±»ï¼Œå…¶å†…éƒ¨é€šè¿‡Â whileÂ å¾ªç¯æ¥ç®¡ç†å¤šè½®çš„å·¥å…·è°ƒç”¨å’Œæ¨ç†è¿‡ç¨‹ ã€‚å¼€å‘è€…é€šå¸¸ä¸éœ€è¦å¹²é¢„è¿™ä¸ªå¾ªç¯çš„å…·ä½“æ¬¡æ•°ã€‚</li>
<li>å¦‚ä½•ä½¿ç”¨ï¼šä½ åªéœ€è¦å®šä¹‰å¥½å¿…è¦çš„å·¥å…·ï¼ˆToolsï¼‰ï¼Œå¹¶å°†å®ƒä»¬åˆ†é…ç»™æ™ºèƒ½ä½“ã€‚æ™ºèƒ½ä½“ä¼šæ ¹æ®ä½ çš„æŸ¥è¯¢å’Œç³»ç»ŸæŒ‡ä»¤ï¼Œè‡ªè¡Œå†³å®šæ˜¯å¦éœ€è¦ä»¥åŠå¦‚ä½•é€šè¿‡ ReAct å¾ªç¯æ¥è°ƒç”¨è¿™äº›å·¥å…·ã€‚</li>
</ul>
<p>å…³äºè¿­ä»£æ¬¡æ•°</p>
<p>åœ¨ Qwen-Agent çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸è¯´çš„â€œè¿­ä»£â€æŒ‡çš„æ˜¯ ReAct å¾ªç¯ä¸­æ¨¡å‹è°ƒç”¨å·¥å…·å¹¶è¿›è¡Œæ¨ç†çš„è½®æ¬¡ã€‚</p>
<ol>
<li>1.Â è‡ªåŠ¨æ§åˆ¶ï¼šè¿™ä¸ªè¿­ä»£æ¬¡æ•°é€šå¸¸ä¸éœ€è¦å¼€å‘è€…æ‰‹åŠ¨é…ç½®ã€‚å®ƒä¸»è¦ç”±åº•å±‚çš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æ ¹æ®å½“å‰ä»»åŠ¡çš„å¤æ‚æ€§ã€å¯ç”¨å·¥å…·ä»¥åŠå†å²ä¸Šä¸‹æ–‡æ¥åŠ¨æ€å†³å®šã€‚æ¨¡å‹ä¼šè‡ªä¸»åˆ¤æ–­ä½•æ—¶æ‹¥æœ‰äº†è¶³å¤Ÿçš„ä¿¡æ¯æ¥ç»™å‡ºæœ€ç»ˆç­”æ¡ˆï¼Œä»è€Œç»ˆæ­¢å¾ªç¯ ã€‚</li>
<li>2.Â ä¸è®­ç»ƒè¿­ä»£çš„åŒºåˆ«ï¼šéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸åŒäºæ¨¡å‹è®­ç»ƒé˜¶æ®µçš„è¶…å‚â€œè¿­ä»£æ¬¡æ•°â€ï¼ˆiterations/epochsï¼‰ã€‚è®­ç»ƒè¿­ä»£æŒ‡çš„æ˜¯æ•´ä¸ªè®­ç»ƒæ•°æ®é›†è¢«å®Œæ•´åœ°ç”¨äºæ›´æ–°æ¨¡å‹å‚æ•°çš„æ¬¡æ•°ï¼Œè¿™åœ¨æ¨¡å‹å¾®è°ƒæ—¶éœ€è¦é…ç½® ã€‚ä½†åœ¨ Qwen-Agent æ¡†æ¶ä¸­ï¼Œä½ é€šå¸¸ç›´æ¥ä½¿ç”¨é¢„è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œå› æ­¤ä¸æ¶‰åŠå¯¹æ­¤ç±»è®­ç»ƒè¿­ä»£æ¬¡æ•°çš„é…ç½®ã€‚</li>
</ol>
<p>å®ç”¨å»ºè®®</p>
<ul>
<li>æ§åˆ¶å¾ªç¯ï¼šè™½ç„¶ä¸éœ€è¦ç›´æ¥è®¾ç½®è¿­ä»£æ¬¡æ•°ï¼Œä½†ä½ å¯ä»¥é€šè¿‡ä¼˜åŒ–æç¤ºè¯ï¼ˆPromptï¼‰ã€å·¥å…·æè¿°çš„æ¸…æ™°åº¦å’Œå‡†ç¡®æ€§ï¼Œæ¥å¼•å¯¼æ¨¡å‹æ›´é«˜æ•ˆåœ°è¿›è¡Œæ¨ç†å’Œå·¥å…·è°ƒç”¨ï¼Œé—´æ¥å½±å“å¾ªç¯è½®æ¬¡</li>
</ul>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ç›´æ¥ä½¿ç”¨QwenAgentæ¡†æ¶å®ç°ReActæ™ºèƒ½ä½“æ¨¡å¼ã€‚</p>
<h3 data-id="heading-2">4.2.ä»£ç å®è·µ</h3>
<p>å…·ä½“å¼€å‘å®ç°å¦‚ä¸‹(agent_service_qwen.py)ï¼š</p>
<pre><code class="hljs language-python" lang="python">mportÂ sys  
<span class="hljs-keyword">import</span>Â json  
<span class="hljs-keyword">from</span>Â qwen_agent.agentsÂ <span class="hljs-keyword">import</span>Â Assistant  
<span class="hljs-keyword">from</span>Â qwen_agent.toolsÂ <span class="hljs-keyword">import</span>Â BaseTool  
<span class="hljs-keyword">from</span>Â api_serviceÂ <span class="hljs-keyword">import</span>Â QueryService, SemanticServce, AnalysisService  
  
<span class="hljs-comment"># åˆå§‹åŒ–æœåŠ¡  </span>
queryService = QueryService()  
semanticService = SemanticServce()  
analysisService = AnalysisService()  
  
<span class="hljs-comment"># è‡ªå®šä¹‰å·¥å…·ç±»  </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MatchMetadataTool</span>(<span class="hljs-title class_ inherited__">BaseTool</span>):  
Â  Â  name =Â <span class="hljs-string">'match_metadata'</span>  
Â  Â  description =Â <span class="hljs-string">'æ ¹æ®è¾“å…¥æ–‡æœ¬è¯­ä¹‰åŒ¹é…è¡¨ç»“æ„ï¼Œæ¯æ¬¡è¿”å›ä¸€ä¸ªæœ€ç›¸å…³çš„è¡¨ç»“æ„ã€‚å¯¹äºéœ€è¦å¤šè¡¨æŸ¥è¯¢çš„é—®é¢˜ï¼Œéœ€è¦å¤šæ¬¡è°ƒç”¨æ­¤å·¥å…·ã€‚'</span>  
  
Â  Â Â <span class="hljs-keyword">def</span> <span class="hljs-title function_">call</span>(<span class="hljs-params">self, params, **kwargs</span>) -&gt;Â <span class="hljs-built_in">str</span>:  
Â  Â  Â  Â  table = semanticService.hybrid_search(params,Â <span class="hljs-number">1</span>)  
Â  Â  Â  Â Â <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{[t[<span class="hljs-string">'table_info'</span>]Â <span class="hljs-keyword">for</span>Â tÂ <span class="hljs-keyword">in</span>Â table]}</span>"</span>  
  
  
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ExecuteSQLTool</span>(<span class="hljs-title class_ inherited__">BaseTool</span>):  
Â  Â  name =Â <span class="hljs-string">'execute_sql'</span>  
Â  Â  description =Â <span class="hljs-string">'æ‰§è¡ŒSQLæŸ¥è¯¢å¹¶è¿”å›ç»“æœã€‚è¾“å…¥åº”ä¸ºæ ‡å‡†SQLè¯­å¥ã€‚æ³¨æ„ï¼šå¯èƒ½éœ€è¦æ‰§è¡Œå¤šä¸ªSQLæŸ¥è¯¢æ¥è·å–ä¸åŒè¡¨ä¸­çš„æ•°æ®ã€‚'</span>  
  
Â  Â Â <span class="hljs-keyword">def</span> <span class="hljs-title function_">call</span>(<span class="hljs-params">self, params, **kwargs</span>) -&gt;Â <span class="hljs-built_in">str</span>:  
Â  Â  Â  Â Â <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(params,Â <span class="hljs-built_in">str</span>):  
Â  Â  Â  Â  Â  Â  jsonObj = json.loads(params)  
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span> <span class="hljs-string">'sql'</span><span class="hljs-keyword">in</span>Â jsonObj:  
Â  Â  Â  Â  Â  Â  Â  Â  params = jsonObj[<span class="hljs-string">'sql'</span>]  
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span> <span class="hljs-string">'query'</span><span class="hljs-keyword">in</span>Â jsonObj:  
Â  Â  Â  Â  Â  Â  Â  Â  params = jsonObj[<span class="hljs-string">'query'</span>]  
Â  Â  Â  Â Â <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(params,Â <span class="hljs-built_in">dict</span>):  
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span> <span class="hljs-string">'sql'</span><span class="hljs-keyword">in</span>Â params:  
Â  Â  Â  Â  Â  Â  Â  Â  params = params[<span class="hljs-string">'sql'</span>]  
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span> <span class="hljs-string">'query'</span><span class="hljs-keyword">in</span>Â params:  
Â  Â  Â  Â  Â  Â  Â  Â  params = params[<span class="hljs-string">'query'</span>]  
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â params.endswith(<span class="hljs-string">';'</span>):  
Â  Â  Â  Â  Â  Â  params = params[:-<span class="hljs-number">1</span>]  
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â json.dumps(queryService.query_with_column(params))  
  
<span class="hljs-comment"># åˆ›å»ºAgentå®ä¾‹  </span>
agent = Assistant(  
Â  Â  name=<span class="hljs-string">'ai_agent_assistant'</span>,  
Â  Â  llm={  
Â  Â  Â  Â Â <span class="hljs-string">'model'</span>:Â <span class="hljs-string">'qwen3:32b'</span>,  
Â  Â  Â  Â Â <span class="hljs-string">'model_server'</span>:Â <span class="hljs-string">'http://localhost:11434/v1'</span>,  
Â  Â  },  
Â  Â  system_message=<span class="hljs-string">"""  
Â  Â  Â  Â  ä½ æ˜¯ä¸€ä¸ªæ•°æ®åˆ†æåŠ©æ‰‹ï¼Œè´Ÿè´£å¸®åŠ©ç”¨æˆ·æŸ¥è¯¢æ•°æ®åº“ä¿¡æ¯ã€‚  
Â  Â  Â  Â  è¯·ç‰¹åˆ«æ³¨æ„ï¼šç”¨æˆ·çš„é—®é¢˜å¯èƒ½éœ€è¦ä»å¤šä¸ªè¡¨ä¸­æŸ¥è¯¢æ•°æ®ã€‚  
Â  Â  Â  Â  1. é¦–å…ˆç¡®å®šéœ€è¦æŸ¥è¯¢å“ªäº›æ•°æ®  
Â  Â  Â  Â  2. ä½¿ç”¨match_metadataå·¥å…·åˆ†åˆ«åŒ¹é…åŒ…å«è¿™äº›æ•°æ®çš„è¡¨ç»“æ„  
Â  Â  Â  Â  3. å¯¹æ¯ä¸ªè¡¨ç”Ÿæˆç›¸åº”çš„SQLæŸ¥è¯¢è¯­å¥  
Â  Â  Â  Â  4. æ‰§è¡ŒæŸ¥è¯¢å¹¶æ±‡æ€»ç»“æœ  
Â  Â  Â  Â  5. æœ€åè®¡ç®—å¹¶ç»™å‡ºç­”æ¡ˆ  
Â  Â Â   
Â  Â  Â  Â  è¯·ç¡®ä¿é€æ­¥æ‰§è¡Œï¼Œä¸è¦è·³è¿‡ä»»ä½•æ­¥éª¤ã€‚  
Â  Â  """</span>,  
Â  Â  function_list=[MatchMetadataTool(), ExecuteSQLTool()],  
)  
  
<span class="hljs-keyword">def</span> <span class="hljs-title function_">chat</span>(<span class="hljs-params">user_query</span>):  
Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰§è¡Œæ–¹æ³•chat"</span>)  
Â  Â Â <span class="hljs-keyword">try</span>:  
Â  Â  Â  Â Â <span class="hljs-comment"># è¿è¡ŒAgent  </span>
Â  Â  Â  Â  messages = [{<span class="hljs-string">'role'</span>:Â <span class="hljs-string">'user'</span>,Â <span class="hljs-string">'content'</span>: user_query}]  
Â  Â  Â  Â  response_generator = agent.run(messages=messages)  
Â  Â  Â  Â Â <span class="hljs-comment"># å¤„ç†ç”Ÿæˆå™¨å“åº”  </span>
Â  Â  Â  Â  full_response =Â <span class="hljs-string">''</span>  
Â  Â  Â  Â  start =Â <span class="hljs-number">0</span>  
Â  Â  Â  Â  end =Â <span class="hljs-number">0</span>  
Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â responseÂ <span class="hljs-keyword">in</span>Â response_generator:  
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># æ£€æŸ¥å“åº”ç±»å‹å¹¶é€‚å½“å¤„ç†  </span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(response,Â <span class="hljs-built_in">list</span>):  
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># å¦‚æœæ˜¯åˆ—è¡¨ï¼Œæå–å†…å®¹  </span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â itemÂ <span class="hljs-keyword">in</span>Â response:  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span> <span class="hljs-built_in">isinstance</span>(item,Â <span class="hljs-built_in">dict</span>)Â <span class="hljs-keyword">and</span><span class="hljs-string">'content'</span><span class="hljs-keyword">in</span>Â item:  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  full_response = item[<span class="hljs-string">'content'</span>]  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  end = full_response.__len__()  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">elif</span> <span class="hljs-built_in">isinstance</span>(item,Â <span class="hljs-built_in">str</span>):  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  full_response = item  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  end = full_response.__len__()  
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">elif</span> <span class="hljs-built_in">isinstance</span>(response,Â <span class="hljs-built_in">dict</span>)Â <span class="hljs-keyword">and</span><span class="hljs-string">'content'</span><span class="hljs-keyword">in</span>Â response:  
Â  Â  Â  Â  Â  Â  Â  Â  full_response = response[<span class="hljs-string">'content'</span>]  
Â  Â  Â  Â  Â  Â  Â  Â  end = full_response.__len__()  
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">elif</span> <span class="hljs-built_in">isinstance</span>(response,Â <span class="hljs-built_in">str</span>):  
Â  Â  Â  Â  Â  Â  Â  Â  full_response = response  
Â  Â  Â  Â  Â  Â  Â  Â  end = full_response.__len__()  
Â  Â  Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{full_response[start:end]}</span>"</span>, end=<span class="hljs-string">""</span>)  
Â  Â  Â  Â  Â  Â  start = end  
  
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœ€ç»ˆç»“æœ:Â <span class="hljs-subst">{full_response}</span>"</span>)  
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â full_response  
Â  Â Â <span class="hljs-keyword">except</span>Â ExceptionÂ <span class="hljs-keyword">as</span>Â e:  
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºé”™:Â <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)  
Â  Â  Â  Â Â <span class="hljs-comment"># è¿™é‡Œå¯ä»¥æ·»åŠ é‡è¯•æˆ–æ›´è¯¦ç»†çš„é”™è¯¯å¤„ç†é€»è¾‘  </span>
Â  Â  Â  Â Â <span class="hljs-keyword">return</span><span class="hljs-string">f"é”™è¯¯:Â <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>  
  
  
<span class="hljs-keyword">if</span>Â __name__ ==Â <span class="hljs-string">"__main__"</span>:  
Â  Â  args = sys.argv[<span class="hljs-number">1</span>:]  
  
Â  Â Â <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>Â args:  
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¯·æä¾›å‚æ•°ï¼šinitæˆ–è€…chat+user_query"</span>)  
Â  Â Â <span class="hljs-keyword">elif</span>Â args[<span class="hljs-number">0</span>] ==Â <span class="hljs-string">"init"</span>:  
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"å¼€å§‹æ‰§è¡Œæ–¹æ³•init"</span>)  
Â  Â  Â  Â Â <span class="hljs-comment"># è¿™é‡Œå¯ä»¥æ·»åŠ åˆå§‹åŒ–é€»è¾‘  </span>
Â  Â Â <span class="hljs-keyword">elif</span>Â args[<span class="hljs-number">0</span>] ==Â <span class="hljs-string">"chat"</span>:  
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"user_query=<span class="hljs-subst">{args[<span class="hljs-number">1</span>]}</span>"</span>)  
Â  Â  Â  Â  chat(args[<span class="hljs-number">1</span>])  
Â  Â Â <span class="hljs-keyword">else</span>:  
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœªçŸ¥å‚æ•°:Â <span class="hljs-subst">{args[<span class="hljs-number">0</span>]}</span>"</span>)
</code></pre>
<p>ä¾æ—§æ˜¯å’ŒLangChainå®ç°çš„ReActåŒæ ·çš„å·¥å…·å’Œæç¤ºè¯ï¼Œåªæ˜¯è¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨QwenAgentæ¡†æ¶å®ç°ã€‚</p>
<h3 data-id="heading-3">4.3.æµ‹è¯•ç»“æœ</h3>
<p>å¤šæ•°æ®æºRAGæ£€ç´¢é—®é¢˜ï¼š2016å¹´è€ƒç”Ÿäººæ•°å’Œå½•å–äººæ•°åˆ†åˆ«æœ‰å¤šå°‘ï¼Ÿ</p>
<p>è¿è¡Œpython agent_service_qwen.py chat '2016å¹´è€ƒç”Ÿäººæ•°å’Œå½•å–äººæ•°åˆ†åˆ«æœ‰å¤šå°‘ï¼Ÿ',è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-operator">&lt;</span>think<span class="hljs-operator">&gt;</span>
å¥½çš„ï¼Œç”¨æˆ·é—®çš„æ˜¯<span class="hljs-number">2016</span>å¹´çš„è€ƒç”Ÿäººæ•°å’Œå½•å–äººæ•°<span class="hljs-operator">ã€‚</span>é¦–å…ˆæˆ‘éœ€è¦ç¡®å®šè¿™ä¸¤ä¸ªæ•°æ®åˆ†åˆ«å­˜å‚¨åœ¨å“ªä¸ªè¡¨é‡Œ<span class="hljs-operator">ã€‚</span>å¯èƒ½æœ‰ä¸€ä¸ªè¡¨è®°å½•è€ƒç”Ÿä¿¡æ¯ï¼Œå¦ä¸€ä¸ªè¡¨è®°å½•å½•å–æƒ…å†µ<span class="hljs-operator">ã€‚</span>æˆ‘éœ€è¦å…ˆè°ƒç”¨match_metadataå·¥å…·æ¥æ‰¾åˆ°ç›¸å…³çš„è¡¨ç»“æ„<span class="hljs-operator">ã€‚</span>

å…ˆæŸ¥è€ƒç”Ÿäººæ•°ï¼Œè¾“å…¥â€œè€ƒç”Ÿäººæ•°â€çœ‹çœ‹åŒ¹é…å“ªä¸ªè¡¨<span class="hljs-operator">ã€‚</span>å‡è®¾è¿”å›çš„æ˜¯enrollmentè¡¨ï¼Œé‡Œé¢æœ‰yearå’Œcandidateså­—æ®µ<span class="hljs-operator">ã€‚</span>ç„¶åæŸ¥å½•å–äººæ•°ï¼Œè¾“å…¥â€œå½•å–äººæ•°â€ï¼Œå¯èƒ½å¯¹åº”admissionsè¡¨ï¼Œé‡Œé¢æœ‰yearå’Œadmittedå­—æ®µ<span class="hljs-operator">ã€‚</span>æ¥ä¸‹æ¥éœ€è¦åˆ†åˆ«å¯¹è¿™ä¸¤ä¸ªè¡¨æ‰§è¡Œ<span class="hljs-type">SQLæŸ¥è¯¢ï¼Œç­›é€‰å‡ºyearä¸º2016å¹´çš„æ•°æ®</span><span class="hljs-operator">ã€‚</span>

æ‰§è¡Œç¬¬ä¸€ä¸ª<span class="hljs-type">SQLï¼šSELECT</span> candidates <span class="hljs-type">FROM</span> enrollment <span class="hljs-type">WHERE</span> year <span class="hljs-operator">=</span>Â <span class="hljs-number">2016</span>; å¾—åˆ°è€ƒç”Ÿäººæ•°<span class="hljs-operator">ã€‚</span>å†æ‰§è¡Œç¬¬äºŒä¸ª<span class="hljs-type">SQLï¼šSELECT</span> admitted <span class="hljs-type">FROM</span> admissions <span class="hljs-type">WHERE</span> year <span class="hljs-operator">=</span>Â <span class="hljs-number">2016</span>; å¾—åˆ°å½•å–äººæ•°<span class="hljs-operator">ã€‚</span>ç„¶åæŠŠç»“æœæ±‡æ€»ï¼Œç»™å‡ºä¸¤ä¸ªæ•°å€¼<span class="hljs-operator">ã€‚</span>éœ€è¦ç¡®ä¿ä¸¤ä¸ªè¡¨çš„å¹´ä»½å­—æ®µéƒ½æ˜¯<span class="hljs-number">2016</span>ï¼Œå¹¶ä¸”å­—æ®µåæ­£ç¡®<span class="hljs-operator">ã€‚</span>å¦‚æœæœ‰å¤šä¸ªè¡¨å¯èƒ½æ¶‰åŠï¼Œå¯èƒ½éœ€è¦è¿›ä¸€æ­¥ç¡®è®¤ï¼Œä½†è¿™é‡Œå‡è®¾ä¸¤æ¬¡åŒ¹é…éƒ½æ­£ç¡®<span class="hljs-operator">ã€‚</span>æœ€åè®¡ç®—ç»“æœå¹¶å‘ˆç°ç»™ç”¨æˆ·<span class="hljs-operator">ã€‚</span>
<span class="hljs-operator">&lt;/</span>think<span class="hljs-operator">&gt;</span>

è°ƒç”¨å¤§æ¨¡å‹llama2å‘é‡åŒ–ï¼š{<span class="hljs-string">"query"</span>:<span class="hljs-string">"è€ƒç”Ÿäººæ•°"</span>}
è‡ªç„¶è¯­è¨€æ··åˆæ£€ç´¢å­—æ®µæˆåŠŸï¼ŒåŒ¹é…åˆ°çš„å…ƒæ•°æ®ä¿¡æ¯ï¼š['{<span class="hljs-string">"è¡¨å"</span>:<span class="hljs-string">"college_entrance_examination"</span>,<span class="hljs-string">"è¡¨å¤‡æ³¨"</span>:<span class="hljs-string">"è€ƒç”Ÿäººæ•°ä¸å¤è¯»äººæ•°ä¿¡æ¯è¡¨ï¼ŒåŒ…å«å­—æ®µï¼šé«˜è€ƒå¹´ä»½(ä¸»é”®)ã€è€ƒç”Ÿäººæ•°(ä¸‡äºº)ã€å¤è¯»äººæ•°(ä¸‡äºº)ï¼Œè€ƒç”Ÿäººæ•°æ˜¯æŒ‡å‚åŠ é«˜è€ƒçš„å­¦ç”Ÿçš„æ•°é‡ï¼Œå¤è¯»äººæ•°æ˜¯æŒ‡å‚åŠ é«˜è€ƒçš„å¤è¯»å­¦ç”Ÿçš„æ•°é‡"</span>,<span class="hljs-string">"å­—æ®µåˆ—è¡¨"</span>:[{<span class="hljs-string">"å­—æ®µå"</span>:<span class="hljs-string">"examination_year"</span>,<span class="hljs-string">"å­—æ®µç±»å‹"</span>:<span class="hljs-string">"int"</span>,<span class="hljs-string">"å­—æ®µå¤‡æ³¨"</span>:<span class="hljs-string">"é«˜è€ƒå¹´ä»½"</span>},{<span class="hljs-string">"å­—æ®µå"</span>:<span class="hljs-string">"candidates_count"</span>,<span class="hljs-string">"å­—æ®µç±»å‹"</span>:<span class="hljs-string">"decimal(10,2)"</span>,<span class="hljs-string">"å­—æ®µå¤‡æ³¨"</span>:<span class="hljs-string">"è€ƒç”Ÿäººæ•°(ä¸‡äºº)"</span>},{<span class="hljs-string">"å­—æ®µå"</span>:<span class="hljs-string">"retake_count"</span>,<span class="hljs-string">"å­—æ®µç±»å‹"</span>:<span class="hljs-string">"decimal(10,2)"</span>,<span class="hljs-string">"å­—æ®µå¤‡æ³¨"</span>:<span class="hljs-string">"å¤è¯»äººæ•°(ä¸‡äºº)"</span>}]}']
å¥½çš„ï¼Œç”¨æˆ·çš„é—®é¢˜æ˜¯å…³äº<span class="hljs-number">2016</span>å¹´çš„è€ƒç”Ÿäººæ•°å’Œå½•å–äººæ•°<span class="hljs-operator">ã€‚</span>é¦–å…ˆï¼Œæˆ‘éœ€è¦ç¡®è®¤è¿™ä¸¤ä¸ªæ•°æ®åˆ†åˆ«å­˜å‚¨åœ¨å“ªäº›è¡¨ä¸­<span class="hljs-operator">ã€‚</span>ä¹‹å‰ç”¨æˆ·æåˆ°è¿‡â€œè€ƒç”Ÿäººæ•°â€ï¼Œæˆ‘è°ƒç”¨match_metadataå·¥å…·åå¾—åˆ°äº†ä¸€ä¸ªè¡¨college_entrance_examinationï¼Œé‡Œé¢åŒ…å«è€ƒç”Ÿäººæ•°å’Œå¤è¯»äººæ•°ï¼Œä½†æ²¡æœ‰å½•å–äººæ•°<span class="hljs-operator">ã€‚</span>è¿™è¯´æ˜å½•å–äººæ•°å¯èƒ½åœ¨å¦ä¸€ä¸ªè¡¨é‡Œ<span class="hljs-operator">ã€‚</span>

æ¥ä¸‹æ¥ï¼Œæˆ‘éœ€è¦å†æ¬¡è°ƒç”¨match_metadataå·¥å…·ï¼Œè¿™æ¬¡æŸ¥è¯¢â€œå½•å–äººæ•°â€<span class="hljs-operator">ã€‚</span>è¾“å…¥å…³é”®è¯åï¼Œåº”è¯¥ä¼šæœ‰å¯¹åº”çš„è¡¨ç»“æ„è¿”å›ï¼Œæ¯”å¦‚å¯èƒ½æœ‰ä¸€ä¸ªè¡¨å«college_admissionï¼ŒåŒ…å«å½•å–äººæ•°å­—æ®µ<span class="hljs-operator">ã€‚</span>å‡è®¾è¿”å›çš„è¡¨ç»“æ„ä¸­æœ‰å­—æ®µadmission_countï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥éœ€è¦åˆ†åˆ«å¯¹è¿™ä¸¤ä¸ªè¡¨ç”Ÿæˆ<span class="hljs-type">SQLæŸ¥è¯¢è¯­å¥</span><span class="hljs-operator">ã€‚</span>

å¯¹äºcollege_entrance_examinationè¡¨ï¼Œ<span class="hljs-type">SQLè¯­å¥ä¼šæ˜¯SELECT</span> candidates_count <span class="hljs-type">FROM</span> college_entrance_examination <span class="hljs-type">WHERE</span> examination_year <span class="hljs-operator">=</span>Â <span class="hljs-number">2016</span>; è¿™æ ·å¯ä»¥å¾—åˆ°<span class="hljs-number">2016</span>å¹´çš„è€ƒç”Ÿäººæ•°<span class="hljs-operator">ã€‚</span>ç„¶åï¼Œé’ˆå¯¹å½•å–äººæ•°æ‰€åœ¨çš„è¡¨ï¼Œå‡è®¾æ˜¯college_admissionï¼Œ<span class="hljs-type">SQLè¯­å¥å¯èƒ½æ˜¯SELECT</span> admission_count <span class="hljs-type">FROM</span> college_admission <span class="hljs-type">WHERE</span> admission_year <span class="hljs-operator">=</span>Â <span class="hljs-number">2016</span>; æ‰§è¡Œè¿™ä¸¤ä¸ªæŸ¥è¯¢åï¼Œå°†ç»“æœæ±‡æ€»ï¼Œå°±èƒ½å¾—åˆ°ç”¨æˆ·éœ€è¦çš„ä¸¤ä¸ªæ•°æ®<span class="hljs-operator">ã€‚</span>

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç¡®ä¿ä¸¤ä¸ªè¡¨çš„å¹´ä»½å­—æ®µåç§°å’Œç±»å‹æ­£ç¡®ï¼Œé¿å…å› ä¸ºå­—æ®µåä¸åŒæˆ–æ•°æ®ç±»å‹ä¸åŒ¹é…å¯¼è‡´æŸ¥è¯¢é”™è¯¯<span class="hljs-operator">ã€‚</span>æ­¤å¤–ï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªç›¸å…³è¡¨ï¼Œéœ€è¦ç¡®è®¤å“ªä¸€ä¸ªåŒ…å«æ­£ç¡®çš„æ•°æ®ï¼Œå¯èƒ½éœ€è¦è¿›ä¸€æ­¥çš„ä¿¡æ¯éªŒè¯<span class="hljs-operator">ã€‚</span>æœ€åï¼Œå°†æŸ¥è¯¢ç»“æœæ•´ç†åï¼Œç”¨æ¸…æ™°çš„æ–¹å¼å‘ˆç°ç»™ç”¨æˆ·ï¼Œç¡®ä¿æ•°æ®çš„å‡†ç¡®æ€§å’Œå¯è¯»æ€§<span class="hljs-operator">ã€‚</span>
<span class="hljs-operator">&lt;/</span>think<span class="hljs-operator">&gt;</span>

è°ƒç”¨å¤§æ¨¡å‹llama2å‘é‡åŒ–ï¼š{<span class="hljs-string">"query"</span>:<span class="hljs-string">"å½•å–äººæ•°"</span>}
è‡ªç„¶è¯­è¨€æ··åˆæ£€ç´¢å­—æ®µæˆåŠŸï¼ŒåŒ¹é…åˆ°çš„å…ƒæ•°æ®ä¿¡æ¯ï¼š['{<span class="hljs-string">"è¡¨å"</span>:<span class="hljs-string">"college_entrance_admission"</span>,<span class="hljs-string">"è¡¨å¤‡æ³¨"</span>:<span class="hljs-string">"å½•å–äººæ•°ä¸æ™®é€šé«˜æ ¡æ•°ä¿¡æ¯è¡¨ï¼ŒåŒ…å«å­—æ®µï¼šå½•å–å¹´ä»½(ä¸»é”®)ã€å½•å–äººæ•°(ä¸‡äºº)ã€æ‹›ç”Ÿé«˜æ ¡æ•°ã€æœ¬ç§‘å½•å–äººæ•°(ä¸‡äºº)ã€ä¸“ç§‘å½•å–äººæ•°(ä¸‡äºº)ï¼Œå½•å–äººæ•°æ˜¯æŒ‡å½•å–æˆ–è€…æ‹›æ”¶ã€æ‹›å½•çš„å­¦ç”Ÿçš„æ•°é‡"</span>,<span class="hljs-string">"å­—æ®µåˆ—è¡¨"</span>:[{<span class="hljs-string">"å­—æ®µå"</span>:<span class="hljs-string">"admission_year"</span>,<span class="hljs-string">"å­—æ®µç±»å‹"</span>:<span class="hljs-string">"int"</span>,<span class="hljs-string">"å­—æ®µå¤‡æ³¨"</span>:<span class="hljs-string">"å½•å–å¹´ä»½"</span>},{<span class="hljs-string">"å­—æ®µå"</span>:<span class="hljs-string">"admission_count"</span>,<span class="hljs-string">"å­—æ®µç±»å‹"</span>:<span class="hljs-string">"decimal(10,2)"</span>,<span class="hljs-string">"å­—æ®µå¤‡æ³¨"</span>:<span class="hljs-string">"å½•å–äººæ•°(ä¸‡äºº)"</span>},{<span class="hljs-string">"å­—æ®µå"</span>:<span class="hljs-string">"university_count"</span>,<span class="hljs-string">"å­—æ®µç±»å‹"</span>:<span class="hljs-string">"int"</span>,<span class="hljs-string">"å­—æ®µå¤‡æ³¨"</span>:<span class="hljs-string">"æ‹›ç”Ÿé«˜æ ¡æ•°"</span>},{<span class="hljs-string">"å­—æ®µå"</span>:<span class="hljs-string">"undergraduate_admission_count"</span>,<span class="hljs-string">"å­—æ®µç±»å‹"</span>:<span class="hljs-string">"decimal(10,2)"</span>,<span class="hljs-string">"å­—æ®µå¤‡æ³¨"</span>:<span class="hljs-string">"æœ¬ç§‘å½•å–äººæ•°(ä¸‡äºº)"</span>},{<span class="hljs-string">"å­—æ®µå"</span>:<span class="hljs-string">"specialty_admission_count"</span>,<span class="hljs-string">"å­—æ®µç±»å‹"</span>:<span class="hljs-string">"decimal(10,2)"</span>,<span class="hljs-string">"å­—æ®µå¤‡æ³¨"</span>:<span class="hljs-string">"ä¸“ç§‘å½•å–äººæ•°(ä¸‡äºº)"</span>}]}']
å¥½ï¼Œç”¨æˆ·éœ€è¦çŸ¥é“<span class="hljs-number">2016</span>å¹´çš„è€ƒç”Ÿäººæ•°å’Œå½•å–äººæ•°<span class="hljs-operator">ã€‚</span>é¦–å…ˆï¼Œæˆ‘éœ€è¦ç¡®å®šè¿™ä¸¤ä¸ªæ•°æ®åˆ†åˆ«å­˜å‚¨åœ¨å“ªä¸ªè¡¨é‡Œ<span class="hljs-operator">ã€‚</span>

å…ˆå¤„ç†è€ƒç”Ÿäººæ•°<span class="hljs-operator">ã€‚</span>ç”¨æˆ·çš„é—®é¢˜ä¸­æåˆ°â€œè€ƒç”Ÿäººæ•°â€ï¼Œä¹‹å‰è°ƒç”¨match_metadataå·¥å…·æ—¶å·²ç»æ‰¾åˆ°äº†å¯¹åº”çš„è¡¨college_entrance_examination<span class="hljs-operator">ã€‚</span>è¿™ä¸ªè¡¨çš„å­—æ®µæœ‰examination_year<span class="hljs-operator">ã€</span>candidates_countå’Œretake_count<span class="hljs-operator">ã€‚</span>æ‰€ä»¥è€ƒç”Ÿäººæ•°åº”è¯¥ä»è¿™ä¸ªè¡¨ä¸­æŸ¥è¯¢ï¼Œæ¡ä»¶æ˜¯examination_yearç­‰äº<span class="hljs-number">2016</span><span class="hljs-operator">ã€‚</span>

ç„¶åæ˜¯å½•å–äººæ•°<span class="hljs-operator">ã€‚</span>ç”¨æˆ·çš„é—®é¢˜é‡Œæåˆ°â€œå½•å–äººæ•°â€ï¼Œé€šè¿‡ä¹‹å‰çš„å·¥å…·è°ƒç”¨ï¼Œå‘ç°äº†è¡¨college_entrance_admission<span class="hljs-operator">ã€‚</span>è¿™ä¸ªè¡¨é‡Œæœ‰admission_yearå’Œadmission_countï¼Œæ‰€ä»¥å½•å–äººæ•°éœ€è¦ä»è¿™é‡ŒæŸ¥è¯¢ï¼ŒåŒæ ·æ¡ä»¶æ˜¯admission_yearç­‰äº<span class="hljs-number">2016</span><span class="hljs-operator">ã€‚</span>

æ¥ä¸‹æ¥éœ€è¦ç”Ÿæˆå¯¹åº”çš„<span class="hljs-type">SQLæŸ¥è¯¢è¯­å¥</span><span class="hljs-operator">ã€‚</span>å¯¹äºè€ƒç”Ÿäººæ•°ï¼Œ<span class="hljs-type">SQLåº”è¯¥æ˜¯SELECT</span> candidates_count <span class="hljs-type">FROM</span> college_entrance_examination <span class="hljs-type">WHERE</span> examination_year <span class="hljs-operator">=</span>Â <span class="hljs-number">2016</span><span class="hljs-operator">ã€‚</span>è€Œå½•å–äººæ•°çš„<span class="hljs-type">SQLåº”è¯¥æ˜¯SELECT</span> admission_count <span class="hljs-type">FROM</span> college_entrance_admission <span class="hljs-type">WHERE</span> admission_year <span class="hljs-operator">=</span>Â <span class="hljs-number">2016</span><span class="hljs-operator">ã€‚</span>

æ‰§è¡Œè¿™ä¸¤ä¸ªæŸ¥è¯¢åï¼Œä¼šå¾—åˆ°ä¸¤ä¸ªç»“æœï¼Œå¯èƒ½éƒ½æ˜¯å°æ•°ï¼ˆå› ä¸ºå­—æ®µç±»å‹æ˜¯decimalï¼‰<span class="hljs-operator">ã€‚</span>ç„¶åéœ€è¦å°†è¿™ä¸¤ä¸ªæ•°å­—ç»„åˆèµ·æ¥ï¼Œç”¨ä¸‡äººå•ä½ï¼Œå¹¶ä¸”å››èˆäº”å…¥åˆ°åˆé€‚çš„å°æ•°ä½æ•°ï¼Œå¯èƒ½ä¿ç•™ä¸¤ä½å°æ•°<span class="hljs-operator">ã€‚</span>

æ¯”å¦‚ï¼Œå¦‚æœæŸ¥è¯¢ç»“æœåˆ†åˆ«æ˜¯<span class="hljs-number">872.21</span>ä¸‡äººå’Œ<span class="hljs-number">749.61</span>ä¸‡äººï¼Œé‚£ä¹ˆæœ€ç»ˆç­”æ¡ˆå°±æ˜¯è€ƒç”Ÿäººæ•°<span class="hljs-number">872.21</span>ä¸‡äººï¼Œå½•å–äººæ•°<span class="hljs-number">749.61</span>ä¸‡äºº<span class="hljs-operator">ã€‚</span>éœ€è¦ç¡®è®¤å¹´ä»½æ˜¯å¦å¯¹åº”ï¼Œç¡®ä¿ä¸¤ä¸ªè¡¨çš„å¹´ä»½å­—æ®µéƒ½æ­£ç¡®åŒ¹é…<span class="hljs-number">2016</span>å¹´<span class="hljs-operator">ã€‚</span>

æœ€åï¼Œå°†ç»“æœç”¨ä¸­æ–‡æ¸…æ™°åœ°å‘ˆç°ç»™ç”¨æˆ·ï¼Œè¯´æ˜åˆ†åˆ«çš„æ•°æ®å¹¶æ³¨æ˜å•ä½<span class="hljs-operator">ã€‚</span>
<span class="hljs-operator">&lt;/</span>think<span class="hljs-operator">&gt;</span>

æ‰§è¡Œ<span class="hljs-type">SQLï¼šSELECT</span> candidates_count <span class="hljs-type">FROM</span> college_entrance_examination <span class="hljs-type">WHERE</span> examination_year <span class="hljs-operator">=</span>Â <span class="hljs-number">2016</span>
[{<span class="hljs-string">"candidates_count"</span>:<span class="hljs-number">940.0</span>}]
å¥½çš„ï¼Œæˆ‘éœ€è¦å›ç­”ç”¨æˆ·å…³äº<span class="hljs-number">2016</span>å¹´è€ƒç”Ÿäººæ•°å’Œå½•å–äººæ•°çš„é—®é¢˜<span class="hljs-operator">ã€‚</span>é¦–å…ˆï¼Œç”¨æˆ·å·²ç»é€šè¿‡ä¸¤æ¬¡match_metadataè°ƒç”¨ï¼Œåˆ†åˆ«è·å–äº†è€ƒç”Ÿäººæ•°æ‰€åœ¨çš„è¡¨college_entrance_examinationå’Œå½•å–äººæ•°æ‰€åœ¨çš„è¡¨college_entrance_admission<span class="hljs-operator">ã€‚</span>

æ¥ä¸‹æ¥ï¼Œç”¨æˆ·æ‰§è¡Œäº†ç¬¬ä¸€ä¸ª<span class="hljs-type">SQLæŸ¥è¯¢ï¼Œä»college_entrance_examinationè¡¨ä¸­è·å–äº†2016å¹´çš„è€ƒç”Ÿäººæ•°ï¼Œç»“æœæ˜¯940</span>.<span class="hljs-number">0</span>ä¸‡äºº<span class="hljs-operator">ã€‚</span>ç°åœ¨éœ€è¦å¤„ç†å½•å–äººæ•°çš„éƒ¨åˆ†<span class="hljs-operator">ã€‚</span>æ ¹æ®ç¬¬äºŒä¸ªmatch_metadataçš„ç»“æœï¼Œå½•å–äººæ•°åœ¨college_entrance_admissionè¡¨çš„admission_countå­—æ®µä¸­ï¼Œä¸”å¹´ä»½å­—æ®µæ˜¯admission_year<span class="hljs-operator">ã€‚</span>

å› æ­¤ï¼Œæˆ‘éœ€è¦æ„é€ å¦ä¸€ä¸ª<span class="hljs-type">SQLæŸ¥è¯¢ï¼Œä»college_entrance_admissionè¡¨ä¸­é€‰æ‹©admission_countï¼Œå…¶ä¸­admission_yearç­‰äº2016</span><span class="hljs-operator">ã€‚</span>æ‰§è¡Œè¿™ä¸ªæŸ¥è¯¢åï¼Œå°†å¾—åˆ°å½•å–äººæ•°çš„æ•°æ®<span class="hljs-operator">ã€‚</span>æœ€åï¼ŒæŠŠä¸¤ä¸ªç»“æœåˆå¹¶ï¼Œç»™å‡ºç”¨æˆ·éœ€è¦çš„ç­”æ¡ˆ<span class="hljs-operator">ã€‚</span>
<span class="hljs-operator">&lt;/</span>think<span class="hljs-operator">&gt;</span>

æ‰§è¡Œ<span class="hljs-type">SQLï¼šSELECT</span> admission_count <span class="hljs-type">FROM</span> college_entrance_admission <span class="hljs-type">WHERE</span> admission_year <span class="hljs-operator">=</span>Â <span class="hljs-number">2016</span>
[{<span class="hljs-string">"admission_count"</span>:<span class="hljs-number">772.0</span>}]
å¥½çš„ï¼Œç”¨æˆ·é—®çš„æ˜¯<span class="hljs-number">2016</span>å¹´çš„è€ƒç”Ÿäººæ•°å’Œå½•å–äººæ•°åˆ†åˆ«æ˜¯å¤šå°‘<span class="hljs-operator">ã€‚</span>æˆ‘éœ€è¦å…ˆæ‰¾åˆ°è¿™ä¸¤ä¸ªæ•°æ®åˆ†åˆ«å­˜æ”¾åœ¨å“ªä¸ªè¡¨é‡Œ<span class="hljs-operator">ã€‚</span>

é¦–å…ˆï¼Œç”¨æˆ·çš„é—®é¢˜æ¶‰åŠåˆ°â€œè€ƒç”Ÿäººæ•°â€ï¼Œæ‰€ä»¥æˆ‘è°ƒç”¨äº†match_metadataå·¥å…·ï¼Œå‚æ•°æ˜¯â€œè€ƒç”Ÿäººæ•°â€<span class="hljs-operator">ã€‚</span>è¿”å›çš„ç»“æœæ˜¯college_entrance_examinationè¡¨ï¼Œé‡Œé¢æœ‰è€ƒç”Ÿäººæ•°çš„ä¿¡æ¯ï¼Œå­—æ®µæ˜¯candidates_countï¼Œå•ä½æ˜¯ä¸‡äºº<span class="hljs-operator">ã€‚</span>æ¥ç€ï¼Œç”¨æˆ·åˆé—®åˆ°â€œå½•å–äººæ•°â€ï¼Œäºæ˜¯å†æ¬¡è°ƒç”¨match_metadataå·¥å…·ï¼Œå‚æ•°æ˜¯â€œå½•å–äººæ•°â€ï¼Œå¾—åˆ°çš„æ˜¯college_entrance_admissionè¡¨ï¼Œå¯¹åº”çš„å­—æ®µæ˜¯admission_countï¼ŒåŒæ ·å•ä½æ˜¯ä¸‡äºº<span class="hljs-operator">ã€‚</span>

æ¥ä¸‹æ¥ï¼Œæˆ‘éœ€è¦ä»è¿™ä¸¤ä¸ªè¡¨ä¸­æŸ¥è¯¢<span class="hljs-number">2016</span>å¹´çš„æ•°æ®<span class="hljs-operator">ã€‚</span>å…ˆæ‰§è¡Œç¬¬ä¸€ä¸ª<span class="hljs-type">SQLæŸ¥è¯¢ï¼Œä»college_entrance_examinationè¡¨ä¸­é€‰å‡ºexamination_yearç­‰äº2016å¹´çš„è€ƒç”Ÿäººæ•°ï¼Œç»“æœå¾—åˆ°940</span>.<span class="hljs-number">0</span>ä¸‡äºº<span class="hljs-operator">ã€‚</span>ç„¶åæ‰§è¡Œç¬¬äºŒä¸ª<span class="hljs-type">SQLæŸ¥è¯¢ï¼Œä»college_entrance_admissionè¡¨ä¸­é€‰å‡ºadmission_yearç­‰äº2016å¹´çš„å½•å–äººæ•°ï¼Œç»“æœæ˜¯772</span>.<span class="hljs-number">0</span>ä¸‡äºº<span class="hljs-operator">ã€‚</span>

ç¡®è®¤ä¸¤ä¸ªç»“æœéƒ½æ˜¯<span class="hljs-number">2016</span>å¹´çš„æ•°æ®åï¼Œå°†è¿™ä¸¤ä¸ªæ•°å€¼æ±‡æ€»ï¼Œå¾—åˆ°æœ€ç»ˆç­”æ¡ˆï¼š<span class="hljs-number">2016</span>å¹´è€ƒç”Ÿäººæ•°æ˜¯<span class="hljs-number">940</span>ä¸‡äººï¼Œå½•å–äººæ•°æ˜¯<span class="hljs-number">772</span>ä¸‡äºº<span class="hljs-operator">ã€‚</span>éœ€è¦ç¡®ä¿å•ä½æ­£ç¡®ï¼Œå¹¶ä¸”æ•°æ®æ²¡æœ‰é”™è¯¯<span class="hljs-operator">ã€‚</span>è¿™é‡Œçš„æ•°æ®çœ‹èµ·æ¥åˆç†ï¼Œæ²¡æœ‰å¼‚å¸¸å€¼ï¼Œæ‰€ä»¥å¯ä»¥ç¡®å®šç­”æ¡ˆæ­£ç¡®<span class="hljs-operator">ã€‚</span>
<span class="hljs-operator">&lt;/</span>think<span class="hljs-operator">&gt;</span>

<span class="hljs-number">2016</span>å¹´çš„è€ƒç”Ÿäººæ•°å’Œå½•å–äººæ•°åˆ†åˆ«ä¸ºï¼š

<span class="hljs-operator">-</span> <span class="hljs-operator">**</span>è€ƒç”Ÿäººæ•°<span class="hljs-operator">**</span>ï¼š<span class="hljs-number">940</span>ä¸‡äºº Â 
<span class="hljs-operator">-</span> <span class="hljs-operator">**</span>å½•å–äººæ•°<span class="hljs-operator">**</span>ï¼š<span class="hljs-number">772</span>ä¸‡äºº Â 

æ•°æ®æ¥æºï¼š
<span class="hljs-operator">-</span> è€ƒç”Ÿäººæ•°æ¥è‡ª<span class="hljs-operator">ã€Š</span>è€ƒç”Ÿäººæ•°ä¸å¤è¯»äººæ•°ä¿¡æ¯è¡¨<span class="hljs-operator">ã€‹</span>ï¼ˆ`college_entrance_examination`ï¼‰çš„ `candidates_count` å­—æ®µ
<span class="hljs-operator">-</span> å½•å–äººæ•°æ¥è‡ª<span class="hljs-operator">ã€Š</span>å½•å–äººæ•°ä¸æ™®é€šé«˜æ ¡æ•°ä¿¡æ¯è¡¨<span class="hljs-operator">ã€‹</span>ï¼ˆ`college_entrance_admission`ï¼‰çš„ `admission_count` å­—æ®µæœ€ç»ˆç»“æœ:Â <span class="hljs-operator">&lt;</span>think<span class="hljs-operator">&gt;</span>
å¥½çš„ï¼Œç”¨æˆ·é—®çš„æ˜¯<span class="hljs-number">2016</span>å¹´çš„è€ƒç”Ÿäººæ•°å’Œå½•å–äººæ•°åˆ†åˆ«æ˜¯å¤šå°‘<span class="hljs-operator">ã€‚</span>æˆ‘éœ€è¦å…ˆæ‰¾åˆ°è¿™ä¸¤ä¸ªæ•°æ®åˆ†åˆ«å­˜æ”¾åœ¨å“ªä¸ªè¡¨é‡Œ<span class="hljs-operator">ã€‚</span>

é¦–å…ˆï¼Œç”¨æˆ·çš„é—®é¢˜æ¶‰åŠåˆ°â€œè€ƒç”Ÿäººæ•°â€ï¼Œæ‰€ä»¥æˆ‘è°ƒç”¨äº†match_metadataå·¥å…·ï¼Œå‚æ•°æ˜¯â€œè€ƒç”Ÿäººæ•°â€<span class="hljs-operator">ã€‚</span>è¿”å›çš„ç»“æœæ˜¯college_entrance_examinationè¡¨ï¼Œé‡Œé¢æœ‰è€ƒç”Ÿäººæ•°çš„ä¿¡æ¯ï¼Œå­—æ®µæ˜¯candidates_countï¼Œå•ä½æ˜¯ä¸‡äºº<span class="hljs-operator">ã€‚</span>æ¥ç€ï¼Œç”¨æˆ·åˆé—®åˆ°â€œå½•å–äººæ•°â€ï¼Œäºæ˜¯å†æ¬¡è°ƒç”¨match_metadataå·¥å…·ï¼Œå‚æ•°æ˜¯â€œå½•å–äººæ•°â€ï¼Œå¾—åˆ°çš„æ˜¯college_entrance_admissionè¡¨ï¼Œå¯¹åº”çš„å­—æ®µæ˜¯admission_countï¼ŒåŒæ ·å•ä½æ˜¯ä¸‡äºº<span class="hljs-operator">ã€‚</span>

æ¥ä¸‹æ¥ï¼Œæˆ‘éœ€è¦ä»è¿™ä¸¤ä¸ªè¡¨ä¸­æŸ¥è¯¢<span class="hljs-number">2016</span>å¹´çš„æ•°æ®<span class="hljs-operator">ã€‚</span>å…ˆæ‰§è¡Œç¬¬ä¸€ä¸ª<span class="hljs-type">SQLæŸ¥è¯¢ï¼Œä»college_entrance_examinationè¡¨ä¸­é€‰å‡ºexamination_yearç­‰äº2016å¹´çš„è€ƒç”Ÿäººæ•°ï¼Œç»“æœå¾—åˆ°940</span>.<span class="hljs-number">0</span>ä¸‡äºº<span class="hljs-operator">ã€‚</span>ç„¶åæ‰§è¡Œç¬¬äºŒä¸ª<span class="hljs-type">SQLæŸ¥è¯¢ï¼Œä»college_entrance_admissionè¡¨ä¸­é€‰å‡ºadmission_yearç­‰äº2016å¹´çš„å½•å–äººæ•°ï¼Œç»“æœæ˜¯772</span>.<span class="hljs-number">0</span>ä¸‡äºº<span class="hljs-operator">ã€‚</span>

ç¡®è®¤ä¸¤ä¸ªç»“æœéƒ½æ˜¯<span class="hljs-number">2016</span>å¹´çš„æ•°æ®åï¼Œå°†è¿™ä¸¤ä¸ªæ•°å€¼æ±‡æ€»ï¼Œå¾—åˆ°æœ€ç»ˆç­”æ¡ˆï¼š<span class="hljs-number">2016</span>å¹´è€ƒç”Ÿäººæ•°æ˜¯<span class="hljs-number">940</span>ä¸‡äººï¼Œå½•å–äººæ•°æ˜¯<span class="hljs-number">772</span>ä¸‡äºº<span class="hljs-operator">ã€‚</span>éœ€è¦ç¡®ä¿å•ä½æ­£ç¡®ï¼Œå¹¶ä¸”æ•°æ®æ²¡æœ‰é”™è¯¯<span class="hljs-operator">ã€‚</span>è¿™é‡Œçš„æ•°æ®çœ‹èµ·æ¥åˆç†ï¼Œæ²¡æœ‰å¼‚å¸¸å€¼ï¼Œæ‰€ä»¥å¯ä»¥ç¡®å®šç­”æ¡ˆæ­£ç¡®<span class="hljs-operator">ã€‚</span>
<span class="hljs-operator">&lt;/</span>think<span class="hljs-operator">&gt;</span>

<span class="hljs-number">2016</span>å¹´çš„è€ƒç”Ÿäººæ•°å’Œå½•å–äººæ•°åˆ†åˆ«ä¸ºï¼š

<span class="hljs-operator">-</span> <span class="hljs-operator">**</span>è€ƒç”Ÿäººæ•°<span class="hljs-operator">**</span>ï¼š<span class="hljs-number">940</span>ä¸‡äºº Â 
<span class="hljs-operator">-</span> <span class="hljs-operator">**</span>å½•å–äººæ•°<span class="hljs-operator">**</span>ï¼š<span class="hljs-number">772</span>ä¸‡äºº Â 

æ•°æ®æ¥æºï¼š
<span class="hljs-operator">-</span> è€ƒç”Ÿäººæ•°æ¥è‡ª<span class="hljs-operator">ã€Š</span>è€ƒç”Ÿäººæ•°ä¸å¤è¯»äººæ•°ä¿¡æ¯è¡¨<span class="hljs-operator">ã€‹</span>ï¼ˆ`college_entrance_examination`ï¼‰çš„ `candidates_count` å­—æ®µ
<span class="hljs-operator">-</span> å½•å–äººæ•°æ¥è‡ª<span class="hljs-operator">ã€Š</span>å½•å–äººæ•°ä¸æ™®é€šé«˜æ ¡æ•°ä¿¡æ¯è¡¨<span class="hljs-operator">ã€‹</span>ï¼ˆ`college_entrance_admission`ï¼‰çš„ `admission_count` å­—æ®µ
</code></pre>
<p>QwenAgentæ¡†æ¶ä¹Ÿæ˜¯å’Œç¬¬ä¸‰ç« çš„LangChainæ¡†æ¶ReActæµç¨‹ä¸€æ ·ï¼Œé€šè¿‡æ¨ç†ã€è§‚å¯Ÿã€æ€è€ƒã€è¡ŒåŠ¨å®Œæˆäº†å¤šæ•°æ®æºå¤æ‚é—®é¢˜çš„å›ç­”ã€‚</p>
<p>æŠŠå¤æ‚é—®é¢˜æ‹†åˆ†ä¸ºç®€å•é—®é¢˜ã€ç„¶ååˆ©ç”¨æˆ‘ä»¬åˆ¶å®šå¥½çš„æµç¨‹æŸ¥å‡ºæ•°æ®ï¼Œæ±‡æ€»è¾“å‡ºï¼</p>
<h2 data-id="heading-4">äº”ã€å±•æœ›</h2>
<p>æœ¬æ–‡AI Agentçš„å®è·µè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬äº†è§£äº†es8ä½œä¸ºå¤–æ¥çŸ¥è¯†åº“æ£€ç´¢çš„åŸºæœ¬ä½¿ç”¨æ–¹å¼(RAG)ï¼Œè¯­ä¹‰æ£€ç´¢ã€æ•°æ®æŸ¥è¯¢ã€å¤§æ¨¡å‹åˆ†æçš„åŸºæœ¬æµç¨‹ã€‚äº†è§£äº†LangChainå’ŒQwenAgentæ¡†æ¶çš„ä½¿ç”¨ã€‚</p>
<p>è¿›ä¸€æ­¥å®è·µæ–¹å‘ï¼š</p>
<ul>
<li>åœºæ™¯ä¼˜åŒ–ï¼šåŠ å…¥éƒ¨åˆ†å¿ƒä»ªçš„é«˜æ ¡æ•°æ®ï¼Œæ¯ä¸ªé«˜æ ¡çš„æ¯ä¸ªä¸“ä¸šåœ¨æ¯ä¸ªçœä»½çš„æ‹›ç”Ÿæƒ…å†µï¼Œä¸°å¯ŒAgentçŸ¥è¯†ï¼Œæä¾›æ›´å¤šæ›´å¥½çš„æœåŠ¡ï¼</li>
<li>æ£€ç´¢ä¼˜åŒ–ï¼šæœ¬æ–‡åªä½¿ç”¨äº†ES8å†…éƒ¨å‘é‡ç±»å‹æ”¯æŒçš„åŸºæœ¬KNNæ£€ç´¢ï¼Œåˆ©ç”¨ä½™å¼¦ç›¸ä¼¼åº¦è®¡ç®—+åˆ†è¯è®¡ç®—ï¼Œæ··åˆå¾—åˆ†åè¿”å›ï¼Œåç»­å¯ä»¥å°è¯•å…¶ä»–é«˜çº§æ£€ç´¢æ–¹å¼ã€‚</li>
<li>ReActä¼˜åŒ–ï¼šæœ¬æ–‡æˆ‘ä»¬çš„ReActå®è·µï¼Œåªä½¿ç”¨äº†LangChainæ¡†æ¶çš„AgentType.STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTIONæ¨¡å¼ï¼Œå¯ä»¥å®è·µå…¶ä»–æ¨¡å¼æ•ˆæœï¼</li>
<li>æµç¨‹ä¼˜åŒ–ï¼šæœ¬æ–‡æˆ‘ä»¬çš„ReActå·¥å…·åªæœ‰è¯­ä¹‰æ£€ç´¢ä¸æ•°æ®æŸ¥è¯¢ä¸¤ä¸ªï¼Œæ²¡æœ‰æ¶‰åŠå¤æ‚è®¡ç®—ï¼ŒåŠ å…¥é«˜æ ¡ä¿¡æ¯éœ€è¦åšåˆ†æ®µåŒç¯æ¯”è®¡ç®—ï¼Œéœ€è¦åŠ å…¥æ–°çš„æµç¨‹ï¼Œä½¿ç”¨æ–°çš„å·¥å…·ï¼æµç¨‹æ¯”è¾ƒç®€å•ï¼Œä½œä¸ºå­¦ä¹ ä½¿ç”¨ï¼Œåœºæ™¯ä¸°å¯Œåå¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–æµç¨‹ï¼</li>
<li>å…¶ä»–å¼€å‘æ¨¡å¼ï¼šæœ¬æ–‡æ‰€åˆ—ä¸‰ç§å¼€å‘å®è·µéƒ½æ˜¯åŸºäºä»£ç çš„æ¨¡å¼ï¼Œè¿˜å¯ä»¥å°è¯•ç”¨Difyã€Coze Studioè¿™ç±»ä½ä»£ç å·¥å…·æ¥é…ç½®æ™ºèƒ½ä½“ã€‚</li>
</ul>
<h2 data-id="heading-5">å…­ã€é™„å½•</h2>
<h3 data-id="heading-6">6.1. å¼€å‘ç¯å¢ƒ</h3>
<p>æ ¸å¿ƒå·¥å…·ä¸è¿è¡Œæ—¶ (Core Tools &amp; Runtimes)</p>






























<table><thead><tr><th>å·¥å…·åç§°</th><th>æ¨èç‰ˆæœ¬</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>æ“ä½œç³»ç»Ÿ</td><td>macOS 15.6.1</td><td>MacBook pro m1 max 32GB</td></tr><tr><td>Docker Desktop</td><td>28.3.2</td><td>æœ¬åœ°Dockerç¯å¢ƒ</td></tr><tr><td>Python</td><td>3.9</td><td>pythonå®ç°æˆ‘ä»¬çš„AI Agent</td></tr><tr><td>IDE/ç¼–è¾‘å™¨</td><td>VS Code / PyCharm</td><td>å¼€å‘å·¥å…·</td></tr></tbody></table>
<p>é¡¹ç›®ä¾èµ–ä¸æœåŠ¡ (Project Dependencies &amp; Services)</p>





























<table><thead><tr><th>æœåŠ¡åç§°</th><th>ç‰ˆæœ¬</th><th>ç«¯å£</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Ollama</td><td>0.11.6</td><td>11434</td><td>å¤§æ¨¡å‹è¿è¡Œç¯å¢ƒï¼Œè¿è¡Œdeepseek-r1:32bã€qwen3:32bã€llama2</td></tr><tr><td>MySQL</td><td>8.4.6</td><td>3306</td><td>æœ¬åœ°dockeréƒ¨ç½²ï¼Œ'ä¸šåŠ¡çŸ¥è¯†åº“'</td></tr><tr><td>ElasticSearch</td><td>8.19.0</td><td>9200</td><td>æœ¬åœ°dockeréƒ¨ç½²ï¼Œæ”¯æŒå‘é‡å­˜å‚¨ã€æ£€ç´¢</td></tr></tbody></table>
<h3 data-id="heading-7">6.2. ES8æ£€ç´¢</h3>
<p>ä¸ºä»€ä¹ˆä½¿ç”¨ES8ï¼Ÿ</p>
<p>ElasticSearchæ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼æœç´¢å’Œåˆ†æå¼•æ“ï¼Œä¸»è¦ç”¨äºæµ·é‡æ–‡æœ¬æ£€ç´¢ä¸åˆ†æï¼Œä½¿ç”¨ JSON æ ¼å¼å­˜å‚¨æ•°æ®ï¼Œèƒ½é€šè¿‡ç®€å•çš„ REST API è¿›è¡Œäº¤äº’ï¼Œä¾¿äºé›†æˆã€‚</p>
<p>7.xä¹‹å‰çš„ç‰ˆæœ¬æ”¯æŒtext(å…¨æ–‡æ£€ç´¢å­—æ®µï¼Œæ”¯æŒåˆ†è¯)ã€keyword(ç²¾ç¡®å€¼å­—æ®µï¼Œé€‚åˆè¿‡æ»¤ã€èšåˆ)ã€numericã€binaryã€dateç­‰ä¼ ç»Ÿçš„åŸºæœ¬çš„æ•°æ®ç±»å‹å­—æ®µã€‚</p>
<p>7.xä¹‹åå¼•å…¥dense_vector(å‘é‡ç±»å‹ï¼Œå­˜å‚¨æµ®ç‚¹æ•°å¯†é›†å‘é‡å¦‚BERTã€Word2Vecã€Sentence Transformers ç”Ÿæˆçš„å‘é‡ï¼Œç»´åº¦dimså¿…é¡»æå‰å®šä¹‰å£°æ˜ï¼Œæ— æ³•ä¿®æ”¹)ã€‚</p>
<p>ä»8.16ç‰ˆæœ¬ä¹‹åï¼Œæ–°å¢å¯¹ä½ç±»å‹ï¼ˆbitï¼Œ0æˆ–1ï¼‰å’Œå­—èŠ‚ç±»å‹ï¼ˆbyteï¼Œä»¥å­—èŠ‚ï¼‰å‘é‡çš„æ”¯æŒï¼Œé€šè¿‡element_typeå‚æ•°æŒ‡å®šã€‚é»˜è®¤float(4å­—èŠ‚32ä½æµ®ç‚¹æ•°)ã€‚æ•°æ®é‡è¾ƒå¤§æ—¶å¯æŒ‡å®šbyteæˆ–bitï¼Œç‰ºç‰²ç²¾åº¦ä»¥èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚</p>
<p>æ”¯æŒçš„é‡åŒ–ç±»å‹ï¼š</p>
<p>7.3-7.4ï¼šæ–°å¢å¤šç§å‘é‡ç›¸ä¼¼åº¦è®¡ç®—æ–¹å¼ï¼ˆå¦‚L2èŒƒæ•°å³æ¬§å‡ é‡Œå¾—è·ç¦»ã€ç‚¹ç§¯ã€ä½™å¼¦ç›¸ä¼¼åº¦ã€æœ€å¤§å†…ç§¯ï¼ˆé€‚ç”¨äºè´Ÿå€¼å‘é‡ï¼‰ç­‰ï¼‰ã€‚</p>
<p>8.0ï¼šæ­£å¼æ”¯æŒè¿‘ä¼¼KNNæœç´¢APIï¼ˆåŸºäºHNSWç®—æ³•ï¼‰ï¼Œæ˜¾è‘—æå‡å¤§è§„æ¨¡å‘é‡æ£€ç´¢æ•ˆç‡ï¼Œå­˜å‚¨æˆæœ¬å¤§å¹…ä¸‹é™çš„åŒæ—¶ä¿æŒè¾ƒé«˜çš„æ£€ç´¢å‡†ç¡®ç‡ã€‚</p>
<p>8.16ï¼šæ‰©å±•æ”¯æŒä½(bit)å’Œå­—èŠ‚(byte)å‘é‡ç±»å‹ï¼Œä¼˜åŒ–å­˜å‚¨å’Œè®¡ç®—æ•ˆç‡</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">{
<span class="hljs-string">"mappings"</span><span class="hljs-symbol">:</span>{
Â  Â Â <span class="hljs-string">"properties"</span><span class="hljs-symbol">:</span>{
Â  Â  Â Â <span class="hljs-string">"my_vector"</span><span class="hljs-symbol">:</span>{<span class="hljs-regexp">//</span> å­—æ®µåç§°
Â  Â  Â  Â Â <span class="hljs-string">"type"</span><span class="hljs-symbol">:<span class="hljs-string">"dense_vector"</span></span>,
Â  Â  Â  Â Â <span class="hljs-string">"dims"</span><span class="hljs-symbol">:</span><span class="hljs-number">768</span>,<span class="hljs-regexp">//</span> å’Œå‘é‡åŒ–ä½¿ç”¨çš„å¤§æ¨¡å‹çš„ç»´åº¦ä¿æŒä¸€è‡´ï¼Œä¸ä¸€è‡´æ’å…¥ä¸æ£€ç´¢å­˜åœ¨å¼‚å¸¸
Â  Â  Â  Â Â <span class="hljs-string">"index"</span><span class="hljs-symbol">:true</span>,<span class="hljs-regexp">//</span> <span class="hljs-literal">true</span>æ—¶æ”¯æŒ<span class="hljs-variable constant_">KNN</span>æœç´¢
Â  Â  Â  Â Â <span class="hljs-string">"element_type"</span><span class="hljs-symbol">:<span class="hljs-string">"byte"</span></span>,<span class="hljs-regexp">//</span> int8ä¸€å­—èŠ‚
Â  Â  Â  Â Â <span class="hljs-string">"index_options"</span><span class="hljs-symbol">:</span>{
Â  Â  Â  Â  Â Â <span class="hljs-string">"type"</span><span class="hljs-symbol">:<span class="hljs-string">"int8_hnsw"</span>//</span> int8 é‡åŒ– + <span class="hljs-variable constant_">HNSW</span> ç®—æ³•ï¼Œå¿…é¡»é…ç½®element_type=byteä½¿ç”¨
Â  Â  Â  Â Â }
Â  Â  Â Â }
Â  Â Â }
}
}
</code></pre>
<p>åŸºäºä»¥ä¸Šä¼˜ç‚¹ã€‚</p>
<p>å¯¹äºMysqlçš„è¡¨ç»“æ„ï¼Œæˆ‘ä»¬éœ€è¦å°†è¡¨å­—æ®µå­˜å‚¨åˆ°ES8åšå‘é‡åŒ–ï¼Œå¯¹äºç”¨æˆ·è¾“å…¥çš„è‡ªç„¶è¯­è¨€ï¼Œå…ˆè¿›è¡Œè¯­ä¹‰æ£€ç´¢åŒ¹é…ï¼Œç´¢å¼•è®¾è®¡å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python">{
Â Â <span class="hljs-string">"mappings"</span>:{
Â  Â  Â Â <span class="hljs-string">"properties"</span>:{
Â  Â  Â  Â  Â Â <span class="hljs-string">"table_info"</span>:{<span class="hljs-string">"type"</span>:<span class="hljs-string">"keyword"</span>},
Â  Â  Â  Â  Â Â <span class="hljs-string">"nomic_embedding"</span>:{
Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"type"</span>:<span class="hljs-string">"dense_vector"</span>,
Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"dims"</span>:<span class="hljs-number">4096</span>,
Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"index"</span>:Â <span class="hljs-literal">True</span>,
Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"similarity"</span>:<span class="hljs-string">"cosine"</span>,
Â  Â  Â  Â  Â Â }
Â  Â  Â Â }
}
}
</code></pre>
<p>table_infoå­˜å‚¨è¡¨ç»“æ„ä¿¡æ¯ï¼Œnomic_embeddingå­˜å‚¨è¡¨å¤‡æ³¨å‘é‡åŒ–ä¿¡æ¯ï¼ŒæŒ‡å®šç›¸ä¼¼åº¦æ£€ç´¢ç®—æ³•ä¸ºcosineä½™å¼¦ç›¸ä¼¼åº¦ã€‚</p>
<h3 data-id="heading-8">6.3. LangChain å¸¸è§ AgentType</h3>
<p>æœ¬æ–‡æˆ‘ä»¬ä½¿ç”¨LangChainçš„AgentType.STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTIONå®ç°ReActä»£ç†æ¨¡å¼ï¼Œä¸»è¦å«ä¹‰å¦‚ä¸‹ï¼š</p>

























<table><thead><tr><th>éƒ¨åˆ†</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>STRUCTURED_CHAT</td><td>æ”¯æŒç»“æ„åŒ–è¾“å…¥ï¼ˆå¦‚ JSON æ ¼å¼ï¼‰çš„èŠå¤©å¼ Agentï¼Œèƒ½å¤„ç†å¤æ‚å‚æ•°</td></tr><tr><td>ZERO_SHOT</td><td>ä¸ä¾èµ–äºä¹‹å‰çš„è®°å¿†æˆ–å†å²æ­¥éª¤ï¼Œæ¯ä¸€æ­¥éƒ½ç‹¬ç«‹æ¨ç†ï¼ˆæ— â€œè®¡åˆ’â€ç¼“å­˜ï¼‰</td></tr><tr><td>REACT</td><td>ä½¿ç”¨ <strong>ReAct æ¡†æ¶</strong>ï¼ˆReason + Actï¼‰ï¼Œå³â€œæ€è€ƒ â†’ å†³ç­– â†’ æ‰§è¡Œ â†’ è§‚å¯Ÿâ€å¾ªç¯</td></tr><tr><td>DESCRIPTION</td><td>å·¥å…·é€šè¿‡å…¶</td></tr></tbody></table>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>âœ… æ”¯æŒå¤šå·¥å…·è°ƒç”¨</li>
<li>âœ… æ”¯æŒå¸¦å‚æ•°çš„å¤æ‚å·¥å…·ï¼ˆå¦‚ SQL æŸ¥è¯¢å¸¦æ¡ä»¶ï¼‰</li>
<li>âœ… ä½¿ç”¨è‡ªç„¶è¯­è¨€ + ç»“æ„åŒ–æ ¼å¼ï¼ˆå¦‚ JSONï¼‰è¿›è¡Œå·¥å…·è°ƒç”¨</li>
<li>âœ… é€‚åˆéœ€è¦ å¤šæ­¥æ¨ç† + å‚æ•°ä¼ é€’ çš„åœºæ™¯ï¼ˆå¦‚å…ˆè¯­ä¹‰è§£æå†æŸ¥æ•°æ®åº“ï¼‰</li>
<li>âœ… æ¯æ¬¡å†³ç­–åŸºäºå½“å‰ä¸Šä¸‹æ–‡é‡æ–°æ¨ç†ï¼ˆzero-shotï¼‰ï¼Œä¸ä¾èµ–é¢„å®šä¹‰æµç¨‹</li>
</ul>
<p>å…¶ä»–ç±»å‹ï¼š</p>





































































<table><thead><tr><th>AgentType</th><th>è¯´æ˜</th><th>æ˜¯å¦æ”¯æŒå¤šå·¥å…·</th><th>æ˜¯å¦æ”¯æŒç»“æ„åŒ–è¾“å…¥</th><th>æ˜¯å¦æ”¯æŒ ReAct</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ZERO_SHOT_REACT_DESCRIPTION</td><td>åŸºç¡€ ReAct Agentï¼Œæ–‡æœ¬å½¢å¼è°ƒç”¨å·¥å…·</td><td>âœ…</td><td>âŒï¼ˆä»…å­—ç¬¦ä¸²ï¼‰</td><td>âœ…</td><td>ç®€å•å·¥å…·é“¾ï¼Œå¦‚è®¡ç®—å™¨+æœç´¢</td></tr><tr><td>STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTION</td><td>æ”¯æŒç»“æ„åŒ–å‚æ•°çš„ ReAct Agent</td><td>âœ…</td><td>âœ…ï¼ˆJSON ç­‰ï¼‰</td><td>âœ…</td><td>å¤æ‚å·¥å…·è°ƒç”¨ï¼ˆå¸¦å‚æ•°ï¼‰</td></tr><tr><td>CONVERSATIONAL_REACT_DESCRIPTION</td><td>æ”¯æŒå¯¹è¯è®°å¿†çš„ ReAct Agentï¼Œé€‚åˆèŠå¤©æœºå™¨äºº</td><td>âœ…</td><td>âŒ</td><td>âœ…</td><td>å®¢æœã€å¯¹è¯å¼åŠ©æ‰‹</td></tr><tr><td>SELF_ASK_WITH_SEARCH</td><td>ä½¿ç”¨â€œè‡ªé—®è‡ªç­”â€æœºåˆ¶ + ä¸­é—´å­é—®é¢˜åˆ†è§£</td><td>âœ…ï¼ˆæœ‰é™ï¼‰</td><td>âŒ</td><td>âŒ</td><td>å¤æ‚é€»è¾‘æ¨ç†ï¼ˆå¦‚ç»´åŸºæœç´¢ï¼‰</td></tr><tr><td>REACT_DOCSTORE</td><td>åŸºäºæ–‡æ¡£å­˜å‚¨çš„ ReActï¼ˆå¦‚æŸ¥æ‰¾æ–‡æ¡£ï¼‰</td><td>âœ…</td><td>âŒ</td><td>âœ…</td><td>æ–‡æ¡£æ£€ç´¢ç³»ç»Ÿ</td></tr><tr><td>OPENAI_FUNCTIONS</td><td>ä½¿ç”¨ OpenAI çš„</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>GPT-3.5-turbo / GPT-4 æ¨è</td></tr><tr><td>OPENAI_MULTI_FUNCTIONS</td><td>æ”¯æŒä¸€æ¬¡è°ƒç”¨å¤šä¸ªå‡½æ•°ï¼ˆOpenAI æ‰©å±•ï¼‰</td><td>âœ…</td><td>âœ…</td><td>âœ…</td><td>é«˜æ•ˆæ‰¹é‡å·¥å…·è°ƒç”¨</td></tr></tbody></table>
<p>æœ¬æ–‡è¯´æ˜ï¼šæœ¬æ–‡å› ä¸ºå¤ªé•¿æ‰€ä»¥åˆ†æˆä¸‰ç¯‡æ–‡ç« ï¼Œè¿™æ˜¯æœ€åä¸€ç¯‡ï¼Œå…·ä½“ä¸šåŠ¡åœºæ™¯å’Œå…¶ä»–ä¸¤ç§æ–¹å¼å‚è§ä¹‹å‰æ–‡ç« ã€‚</p>
<p>æœ¬æ–‡ä½œè€…ï¼šChaiys</p>
<p>æœ¬æ–‡åŸè½½ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FAYlyJKKNauFtw0e9QbMUBg" target="_blank" title="https://mp.weixin.qq.com/s/AYlyJKKNauFtw0e9QbMUBg" ref="nofollow noopener noreferrer">å…¬ä¼—å·â€œæœ¨æ˜†å­è®°å½•AIâ€</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026å¹´å‰ç«¯ç”Ÿå­˜æŒ‡å—ï¼šæˆ‘ç”¨MCPæŠŠç¹ççš„èœå•é…ç½®å…¨è‡ªåŠ¨åŒ–äº†ï¼]]></title>    <link>https://juejin.cn/post/7591770429930668082</link>    <guid>https://juejin.cn/post/7591770429930668082</guid>    <pubDate>2026-01-06T01:53:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591770429930668082" data-draft-id="7591805786397900826" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026å¹´å‰ç«¯ç”Ÿå­˜æŒ‡å—ï¼šæˆ‘ç”¨MCPæŠŠç¹ççš„èœå•é…ç½®å…¨è‡ªåŠ¨åŒ–äº†ï¼"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-06T01:53:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é‚£ä¸ªæ›¾ç»çš„å°‘å¹´å›æ¥äº†"/> <meta itemprop="url" content="https://juejin.cn/user/2242659452477016"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026å¹´å‰ç«¯ç”Ÿå­˜æŒ‡å—ï¼šæˆ‘ç”¨MCPæŠŠç¹ççš„èœå•é…ç½®å…¨è‡ªåŠ¨åŒ–äº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2242659452477016/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é‚£ä¸ªæ›¾ç»çš„å°‘å¹´å›æ¥äº†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T01:53:09.000Z" title="Tue Jan 06 2026 01:53:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df3279b599b24b0dbd318cea03cb9e77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YKj5Liq5pu-57uP55qE5bCR5bm05Zue5p2l5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269247&amp;x-signature=LvKHgw1tfk4wtLlMyf1q%2BGtdQyk%3D" alt="" loading="lazy"/>
å…ˆè¯´ä¸€ä¸‹èƒŒæ™¯ï¼Œæˆ‘ç›¸ä¿¡å¾ˆå¤šå‰ç«¯å¯èƒ½æœ‰è¿™æ ·çš„æƒ…å†µã€‚æ¥äº†ä¸€ä¸ªæ¯”è¾ƒå¤§çš„æ–°çš„éœ€æ±‚ï¼Œæš‚æ—¶å°±å…ˆè¯´PC webç«¯å§ã€‚å¾ˆå¤šç³»ç»Ÿçš„è®¾è®¡éƒ½åœ¨åå°æœ‰ä¸€ä¸ªèœå•ç®¡ç†ï¼Œç„¶åå¤§è‡´ä¼šè®²è¿‡ä¸‹é¢å‡ ä¸ªæ­¥éª¤ã€‚</p>
<ul>
<li>1ã€åå°é…ç½®èœå•ï¼šåœ¨ç®¡ç†åå°æ·»åŠ æ–°èœå•çš„åŸºæœ¬ä¿¡æ¯ï¼Œæœ‰æ—¶ä¹ŸåŒ…æ‹¬å…·ä½“æ“ä½œæŒ‰é’®çš„é…ç½®ã€‚</li>
<li>2ã€å‰ç«¯é…ç½®è·¯ç”±ï¼šåœ¨ Vue æˆ– React è·¯ç”±é…ç½®ä¸­ï¼Œæ·»åŠ å¯¹åº”çš„é¡µé¢è·¯ç”±æ˜ å°„ä¿¡æ¯ã€‚</li>
<li>3ã€å‰ç«¯æ–°å»ºè§†å›¾ï¼šåœ¨Â viewsæˆ–Â pagesç›®å½•ä¸‹ï¼Œåˆ›å»ºå®é™…çš„é¡µé¢æ–‡ä»¶ã€‚</li>
<li>4ã€è§’è‰²æƒé™ç»‘å®šï¼šæ‰¾åˆ°å½“å‰è§’è‰²ï¼Œæ‰‹åŠ¨å‹¾é€‰åˆšæ‰æ–°å¢çš„èœå•å’ŒæŒ‰é’®æƒé™ï¼Œä½¿åŠŸèƒ½å¯¹å½“å‰è´¦å·å¯è§ã€‚</li>
<li>5ã€å¢é‡è¿­ä»£é…ç½®ï¼šå¼€å‘ä¸­é€”è‹¥éœ€æ–°å¢æŒ‰é’®ï¼Œéœ€å†æ¬¡é‡å¤ä¸Šè¿°â€œåå°é…ç½®â€ä¸â€œæƒé™å‹¾é€‰â€çš„åŠ¨ä½œã€‚</li>
</ul>
<p>å½“ç„¶å„ç§ç³»ç»Ÿçš„é…ç½®å¯èƒ½ä¸å°½ç›¸åŒï¼Œæœ‰äº›ç³»ç»Ÿå¯èƒ½æ›´çµæ´»ä¸€äº›ï¼Œå¾ˆå¤šä¸œè¥¿éƒ½è€ƒè™‘åˆ°äº†ï¼Œéƒ½è¿›è¡Œäº†è‡ªåŠ¨åŒ–æ“ä½œã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬çš„MCPç™»åœºäº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cdc52e087824850b5d75f0f3f298245~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YKj5Liq5pu-57uP55qE5bCR5bm05Zue5p2l5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269247&amp;x-signature=gqImvNgdkIiA3KxOfSvx2eKZkXI%3D" alt="" loading="lazy"/></p>
<p>é€šè¿‡æˆªå›¾å¯ä»¥çœ‹å‡ºæ¥ï¼Œæˆ‘çš„MCPæœåŠ¡å·¥å…·ï¼Œæœ‰æŸ¥è¯¢èœå•åˆ—è¡¨ã€æŸ¥è¯¢å•ä¸ªèœå•ã€åˆ›å»ºèœå•ã€ä¿®æ”¹èœå•ã€åˆ é™¤èœå•ã€æŸ¥è¯¢è§’è‰²å’Œä¸ºè§’è‰²æ·»åŠ èœå•æƒé™ï¼Œè¿™é‡Œæˆ‘MCPå·¥å…·å°±æ˜¯è°ƒç”¨äº†åå°ç®¡ç†çš„æ¥å£ï¼Œæœ‰äº›æ¥å£ä¸é€‚é…æˆ‘åˆæ–°å¢äº†é€‚é…ï¼ˆè¿™ä¸ªä¹Ÿæ²¡å…³ç³»ï¼‰ã€‚</p>
<p>å†æ¥çœ‹æˆ‘åœ¨èŠå¤©å›è¯æ¡†ä¸­çš„å†…å®¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dfa8515646484a7f8c466a1ecc07aa9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YKj5Liq5pu-57uP55qE5bCR5bm05Zue5p2l5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269247&amp;x-signature=Dw5q9YuwfL44uZutpyr9pGUTxtc%3D" alt="" loading="lazy"/>
é¦–å…ˆæˆ‘ä¸Šä¼ äº†ä¸€å¼ æˆªå›¾ï¼Œé‡Œé¢åŒ…å«äº†å‡ ä¸ªæŒ‰é’®ï¼ˆå½“ç„¶ä¹‹å‰é¡µé¢å·²ç»æœ‰äº†ä¸‰ä¸ªæ“ä½œæŒ‰é’®äº†ï¼‰ï¼Œæˆªå›¾ä¸‹æˆ‘çš„æ„æ€ä¹Ÿå¾ˆæ˜æ˜¾äº†ï¼Œç”ŸæˆæŒ‰é’®ä»£ç ï¼Œæ ¹æ®æŒ‰é’®åç§°ç”Ÿæˆäº†code,ç„¶åè®©ä»–æ·»åŠ èœå•ï¼ˆè¿™é‡Œå®ƒçš„ç†è§£å°±æ˜¯è°ƒç”¨æˆ‘çš„MCPå·¥å…·ç”Ÿæˆèœå•ï¼‰ã€‚</p>
<p>ç»§ç»­çœ‹æˆ‘ä¸‹é¢çš„æˆªå›¾ï¼Œå¾ˆæ¸…æ¥šçš„å°±å±•ç°äº†å…ˆæ˜¯å…ˆæ˜¯è°ƒç”¨search-menuæ¥æŸ¥æ‰¾çˆ¶çº§èœå•çš„èœå•IDï¼Œç„¶åå†è°ƒç”¨create-menuæ’å…¥èœå•çš„è¿‡ç¨‹ã€‚</p>
<p>ä¸­é—´è¿˜æœ‰æˆªå›¾å¤ªé•¿äº†æˆ‘å°±æ²¡ç»§ç»­æˆªå›¾äº†......</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a68be22c4cd04027aeb92eac821c4c83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YKj5Liq5pu-57uP55qE5bCR5bm05Zue5p2l5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269247&amp;x-signature=P9g70Xj3gkVpsN%2Ffjn8AvlXGaH4%3D" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯è¿™ä¸ªå¯¹è¯æœ€åä¸€éƒ¨åˆ†çš„æˆªå›¾ï¼Œå¯ä»¥çœ‹åˆ°ä¸€æ¬¡æ€§å¸®æˆ‘æŠŠä¹ä¸ªæŒ‰é’®æ“ä½œå…¨éƒ¨è°ƒç”¨MCPå†™å…¥åˆ°äº†æ•°æ®åº“ï¼ŒçœŸçš„å¤ªæ£’äº†ã€‚</p>
<blockquote>
<p>å…¶å®æœ€å¼€å§‹ï¼Œæˆ‘çš„æƒ³æ³•å°±æ˜¯æ¯æ¬¡æ‰§è¡Œä¸€æ­¥ã€‚æŸ¥æ‰¾çˆ¶çº§èœå•==&gt;å†™å…¥å¯¼å…¥æŒ‰é’®æ“ä½œ==&gt;æ ¹æ®è§’è‰²åç§°æŸ¥æ‰¾è§’è‰²Id=&gt;ä¸ºå½“å‰è§’è‰²å†™å…¥å¯¼å…¥æŒ‰é’®æ“ä½œï¼Œè¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ã€‚</p>
</blockquote>
<blockquote>
<p>è¿™æ ·æˆ‘ä¸ç”¨åœ¨PCåå°è¿›è¡Œæ“ä½œå…¶å®å·²ç»å¾ˆçˆ½äº†ï¼ˆä¸ªäººè§‰å¾—ï¼Œå› ä¸ºæˆ‘ä»¬çš„åç«¯ç³»ç»Ÿç›¸å¯¹å¤æ‚ï¼Œè·¯å¾„ä¹Ÿæ¯”è¾ƒæ·±ï¼Œæ•°æ®é‡ä¹Ÿæ¯”è¾ƒå¤§ï¼Œå¯¼è‡´ç»´æŠ¤èœå•éå¸¸çš„æµªè´¹æ—¶é—´ï¼‰ã€‚ä½†æ˜¯æ²¡æƒ³åˆ°è¿™é‡Œå®ƒå¯ä»¥ä¸€æ¬¡æ€§å°±å†™å…¥9ä¸ªæŒ‰é’®çš„èœå•ä¿¡æ¯ï¼Œæˆ‘å½“æ—¶å°±æƒŠè®¶äº†ã€‚ä¸‹é¢è¿˜æœ‰æ›´ä»¤æˆ‘happyçš„ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f232f8507f6f444e8724d4d125430b49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YKj5Liq5pu-57uP55qE5bCR5bm05Zue5p2l5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269247&amp;x-signature=da9%2FJvpu5m%2BuKWHBdx7onemAlf4%3D" alt="" loading="lazy"/>
ç»§ç»­çœ‹ä¸Šå›¾ï¼Œå°±æ˜¯æŠŠä¸Šé¢æ‰€æœ‰çš„ä¹ä¸ªæŒ‰é’®æ“ä½œæƒé™å…¨éƒ¨æ·»åŠ åˆ°æŸä¸ªè§’è‰²IDã€‚å½“ç„¶è¿™ä¸ªè§’è‰²æ˜¯æˆ‘å•ç‹¬æŸ¥è¯¢å‡ºæ¥çš„ï¼Œç„¶åå†™åœ¨ä¸Šé¢çš„ã€‚ï¼ˆé‡Œé¢æœ‰ä¸€ä¸ªæç¤º500äº†ï¼Œå› ä¸ºæˆ‘ä¹‹å‰å·²ç»æ·»åŠ è¿‡æƒé™äº†ï¼Œå¯ä»¥å¿½ç•¥ï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b682bd0acde44ab802fcb919df613ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YKj5Liq5pu-57uP55qE5bCR5bm05Zue5p2l5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269247&amp;x-signature=9sextStyaBTj4lJYWef6S06C%2FgI%3D" alt="" loading="lazy"/>
è¿™å°±æ˜¯æœ€ç»ˆæŠŠä¹ä¸ªæŒ‰é’®æ“ä½œæƒé™éƒ½æ·»åŠ åˆ°è¯¥è§’è‰²ä¸Šäº†ã€‚</p>
<p>ä½†æ˜¯æˆ‘åœ¨æ£€æŸ¥éœ€æ±‚çš„æ—¶å€™å‘ç°å°‘äº†ä¸€ä¸ªæŒ‰é’®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1f69d42590346ffbb0af44a237a8b1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YKj5Liq5pu-57uP55qE5bCR5bm05Zue5p2l5LqG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269247&amp;x-signature=9P06q9SIBH9s%2BPF4aGIKX0RDrkg%3D" alt="" loading="lazy"/></p>
<p>çœ‹æˆ‘æç¤ºè¯éå¸¸ç®€æ´çš„å¯¹è¯ã€‚ä½†æ˜¯ä»–å°±åˆ†æäº†ä¸€ä¸‹ï¼Œç„¶åé¦–å…ˆåœ¨é¡µé¢ä¸Šæ·»åŠ æŒ‰é’®ç”Ÿæˆcode,ç„¶åç”Ÿæˆèœå•ï¼Œå¹¶ä¸”æŠŠæƒé™ä¹Ÿæ·»åŠ ä¸Šäº†ã€‚</p>
<p>çœŸçš„è®©æˆ‘å¤§å¼€çœ¼ç•Œã€‚é€šè¿‡æˆªå›¾å¯ä»¥å‘ç°åé¢ä¸¤ä¸ªè¿˜æœ‰å¤šä½™çš„å¤„ç†ï¼Œå°±æ˜¯ä¿®æ”¹èœå•çš„æŒ‰é’®é¡ºåºæŠ¥é”™äº†ï¼Œå…¶å®æ˜¯æˆ‘å†™çš„æ¥å£æœ‰é—®é¢˜ï¼ˆåé¢æ¥å£é—®é¢˜æˆ‘è‡ªå·±ä¿®æ”¹ï¼‰äº†ï¼Œä¸æ˜¯ä»–å¤šä½™äº†ã€‚</p>
<p>æ‰€ä»¥MCPåœ¨ç°åœ¨AI Agentçš„å¼ºå¤§ä¸‹ï¼Œè®©æˆ‘å¤§å¼€çœ¼ç•Œã€‚å¥½äº†æœ¬æ–‡å°±ä»‹ç»åˆ°è¿™é‡Œï¼Œå¥½è®©å‰ç«¯çš„losterä»¬éƒ½æ¥å°è¯•ä¸€ä¸‹å§ï¼Œï¼Œè¦ä¸ç„¶2026å¹´ä¸‹ä¸€ä¸ªè¢«æ·˜æ±°çš„å¯èƒ½å°±æ˜¯ä½ äº†ã€‚åŒæ—¶å¦‚æœä½ çœ‹åˆ°äº†é‚£å°±å¤§èƒ†çš„å»ç©å§ã€‚æ²¡æœ‰ä»€ä¹ˆæ¯”å®è·µæ›´é‡è¦çš„äº†ã€‚</p>
<p>æœ€åæˆ‘ç°åœ¨ä½¿ç”¨çš„å·¥å…·æ˜¯Google Antigravityã€‚</p>
<p>å½“ç„¶äº†ç”µè„‘ä¸Šä¹Ÿè£…äº†Claude codeã€Codexå’ŒOpenCodeã€‚</p>
<p>æœ€è¿‘vibe codingå¯¹éƒ¨åˆ†ç¨‹åºå‘˜çš„å†²å‡»éå¸¸å¤§ã€‚å°¤å…¶æ˜¯åœ¨Claude Opus4.5çš„åŠ æŒä¸‹ï¼ŒçœŸçš„è¦å˜å¤©äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‡ ç§AI Agentå¼€å‘æ¡†æ¶å¯¹æ¯”ï¼šç›¸æ¯”æ‰‹å†™ä»£ç æ˜¯å¦æ›´ä¾¿æ·ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7591510742648602667</link>    <guid>https://juejin.cn/post/7591510742648602667</guid>    <pubDate>2026-01-05T11:11:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591510742648602667" data-draft-id="7591506455973576758" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‡ ç§AI Agentå¼€å‘æ¡†æ¶å¯¹æ¯”ï¼šç›¸æ¯”æ‰‹å†™ä»£ç æ˜¯å¦æ›´ä¾¿æ·ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,Python,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-05T11:11:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ¨æ˜†å­"/> <meta itemprop="url" content="https://juejin.cn/user/825103640698564"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‡ ç§AI Agentå¼€å‘æ¡†æ¶å¯¹æ¯”ï¼šç›¸æ¯”æ‰‹å†™ä»£ç æ˜¯å¦æ›´ä¾¿æ·ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/825103640698564/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ¨æ˜†å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T11:11:44.000Z" title="Mon Jan 05 2026 11:11:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¹‹å‰å‡ ç¯‡æ–‡ç« ä¸­ï¼ŒChaiysåŒå­¦è®¾è®¡äº†ä¸€ä¸ªé«˜è€ƒä¿¡æ¯æŸ¥è¯¢æ™ºèƒ½åŠ©æ‰‹AI Agentä¸šåŠ¡åœºæ™¯ï¼Œåˆ†åˆ«ä½¿ç”¨<a href="https://juejin.cn/post/7591407298414493702" target="_blank" title="https://juejin.cn/post/7591407298414493702">æ‰‹å†™ä»£ç </a>ã€<a href="https://juejin.cn/post/7591497387245994020" target="_blank" title="https://juejin.cn/post/7591497387245994020">LangChainæ¡†æ¶</a>ã€<a href="https://juejin.cn/spost/7591506455973462070" target="_blank" title="https://juejin.cn/spost/7591506455973462070">QwenAgentæ¡†æ¶</a>ã€<a href="https://juejin.cn/post/7591672090790461459" target="_blank" title="https://juejin.cn/post/7591672090790461459">AgentScopeæ¡†æ¶</a>å®ç°äº†ä¸€æ¬¡ï¼Œå­¦ä¹ äº†å‡ å¤§æ¡†æ¶å¦‚ä½•å¼€å‘æ™ºèƒ½ä½“ã€‚</p>
<p>åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥å¯¹æ¯”å®ƒä»¬åœ¨ä¸šåŠ¡é€»è¾‘ç¼–æ’ã€å¤§æ¨¡å‹è°ƒç”¨ã€å·¥å…·è°ƒç”¨ã€ä¸Šä¸‹æ–‡è®°å¿†ã€å¤šæ™ºèƒ½ä½“åä½œç­‰æ–¹é¢çš„å·®å¼‚ï¼Œçœ‹çœ‹æ¡†æ¶æ˜¯å¦ç¡®å®èƒ½æ–¹ä¾¿æˆ‘ä»¬è¿›è¡Œæ™ºèƒ½ä½“å¼€å‘ã€‚</p>
<h2 data-id="heading-0"><strong>ä¸šåŠ¡é€»è¾‘ç¼–æ’å¯¹æ¯”</strong></h2>
<p>é¦–å…ˆå›é¡¾ä¸€ä¸‹æˆ‘ä»¬çš„ä¸šåŠ¡æµç¨‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/621e749896194405ac3bd655abd4c2e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyo5piG5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768217065&amp;x-signature=NhKbwE5%2FF5jENst1FeI3j0xvCig%3D" alt="image.png" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥åˆ†åˆ«ä½¿ç”¨æ‰‹å†™ä»£ç å’Œå‡ ç§æ¡†æ¶æ¥å®ç°è¿™ä¸ªä¸šåŠ¡æµç¨‹é€»è¾‘ï¼Œçœ‹çœ‹å·®å¼‚æ‰€åœ¨ã€‚</p>
<h4 data-id="heading-1">1ã€æ‰‹å†™ä»£ç </h4>
<p>çº¯ç¼–ç æ—¶ï¼Œæˆ‘ä»¬ç›´æ¥æ ¹æ®ä¸šåŠ¡é€»è¾‘æ¥ä¸²è”å·¥ä½œæµï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># sql agent</span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">sql_agent</span>(<span class="hljs-params">user_query</span>):
Â  Â Â <span class="hljs-comment"># 1. è¯­ä¹‰åŒ¹é…</span>
Â  Â  table = semanticService.hybrid_search(user_query,Â <span class="hljs-number">1</span>)
Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â table:
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœªåŒ¹é…åˆ°å­—æ®µ"</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â Result.error()
Â  Â  table_struct = [t[<span class="hljs-string">"table_info"</span>]Â <span class="hljs-keyword">for</span>Â tÂ <span class="hljs-keyword">in</span>Â table]
Â  Â  prompt =Â <span class="hljs-string">f"""
Â  Â  Â  Â  Â  Â  ä½ æ˜¯ä¸€ä¸ªMySQLä¸“å®¶ã€‚æ ¹æ®ä»¥ä¸‹è¡¨ç»“æ„ä¿¡æ¯ï¼š
Â  Â  Â  Â  Â  Â Â <span class="hljs-subst">{table_struct}</span>

Â  Â  Â  Â  Â  Â  å†å²é—®ç­”ï¼ˆä»…ä¾›å‚è€ƒï¼‰ï¼š"<span class="hljs-subst">{mm.get_messages(session_id)}</span>"
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  ç”¨æˆ·æŸ¥è¯¢ï¼š"<span class="hljs-subst">{user_query}</span>"

Â  Â  Â  Â  Â  Â  ç”Ÿæˆæ ‡å‡†MYSQLæŸ¥è¯¢è¯­å¥ã€‚
Â  Â  Â  Â  Â  Â  è¦æ±‚ï¼š
Â  Â  Â  Â  Â  Â  1. åªè¾“å‡ºMYSQLè¯­å¥ï¼Œä¸è¦é¢å¤–è§£é‡Š
Â  Â  Â  Â  Â  Â  2. æ ¹æ®è¯­ä¹‰å’Œå­—æ®µç±»å‹ï¼Œä½¿ç”¨COUNT/SUM/AVGç­‰èšåˆå‡½æ•°è¿›è¡Œè®¡ç®—ï¼Œéå¿…é¡»
Â  Â  Â  Â  Â  Â  3. ç»™ç”Ÿæˆçš„å­—æ®µå–ä¸€ä¸ªç®€çŸ­çš„ä¸­æ–‡åç§°
Â  Â  Â  Â  Â  Â  è¾“å‡ºæ ¼å¼ï¼šä½¿ç”¨[]åŒ…å«sqlæ–‡æœ¬å³å¯ï¼Œä¸éœ€è¦å…¶ä»–è¾“å‡ºï¼Œä¾¿äºè§£æï¼Œä¾‹å¦‚:[select 1 from dual]
Â  Â  Â  Â  """</span>
Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"SQL AGENT PROMPT=<span class="hljs-subst">{prompt}</span>"</span>)
Â  Â Â <span class="hljs-comment"># 2. å¤§æ¨¡å‹ç”ŸæˆSQL</span>
Â  Â  str1 = analysisService.analysis(prompt)
Â  Â  sql = re.search(<span class="hljs-string">r'[(.*?)]'</span>, str1, re.DOTALL).group(<span class="hljs-number">1</span>).strip()

Â  Â Â <span class="hljs-comment"># 3. æ‰§è¡ŒæŸ¥è¯¢</span>
Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â sql:
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nSQLç”Ÿæˆå¤±è´¥"</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â Result.error()

Â  Â  resultSet = queryService.query_with_column(sql)
Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â resultSet:
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nSQLæŸ¥è¯¢å¤±è´¥"</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â Result.error()
Â  Â Â <span class="hljs-keyword">return</span>Â Result.success(data={Â <span class="hljs-string">"tableStruct"</span>: table_struct,Â <span class="hljs-string">"resultSet"</span>: resultSet,Â <span class="hljs-string">"sql"</span>: sql })

<span class="hljs-comment"># analysis agent</span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">analysis_agent</span>(<span class="hljs-params">user_query, data</span>):
Â  Â Â <span class="hljs-comment"># åŸºç¡€åˆ†æ</span>
Â  Â  prompt =Â <span class="hljs-string">f"""
Â  Â  Â  Â  Â  Â  Â  Â  æ ¹æ®ä»¥ä¸‹è¡¨ç»“æ„ä¿¡æ¯ï¼š
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-subst">{data[<span class="hljs-string">'tableStruct'</span>]}</span>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  æŸ¥è¯¢SQLï¼š
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-subst">{data[<span class="hljs-string">'sql'</span>]}</span>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  å’Œä»¥ä¸‹æ•°æ®ä¿¡æ¯ï¼š
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-subst">{data[<span class="hljs-string">'resultSet'</span>]}</span>

Â  Â  Â  Â  Â  Â  Â  Â  å†å²é—®ç­”ï¼ˆä»…ä¾›å‚è€ƒï¼‰ï¼š"<span class="hljs-subst">{mm.get_messages(session_id)}</span>"
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  ç”¨æˆ·æŸ¥è¯¢ï¼š"<span class="hljs-subst">{user_query}</span>"

Â  Â  Â  Â  Â  Â  Â  Â  ç”Ÿæˆä¸€æ®µç®€è¦åˆ†æï¼ŒåŠ ä¸Šä¸€äº›é¢„æµ‹æ€»ç»“çš„å†…å®¹
Â  Â  Â  Â  Â  Â  """</span>
Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ANALYSIS AGENT PROMPT=<span class="hljs-subst">{prompt}</span>"</span>)
Â  Â Â <span class="hljs-keyword">return</span>Â Result.success(analysisService.analysis(prompt))

<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">workflow</span>(<span class="hljs-params">user_input</span>):
Â  Â Â <span class="hljs-comment"># 1 - SQL Agent</span>
Â  Â  result = sql_agent(user_input)
Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â result.success:
Â  Â  Â  Â Â returnNone
Â  Â Â <span class="hljs-comment"># 2 - Analysis Agent</span>
Â  Â Â <span class="hljs-keyword">return</span>Â analysis_agent(user_input, result.data)
</code></pre>
<h4 data-id="heading-2">2ã€LangChainæ¡†æ¶</h4>
<p>ä½¿ç”¨LangChainæ¡†æ¶çš„Chainæ¨¡å¼æ—¶ï¼Œå¯ä»¥æ‰‹åŠ¨ä¸²è”ä¸šåŠ¡æµç¨‹é€»è¾‘ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ„å»ºé¡ºåºé“¾</span>
<span class="hljs-attr">overall_chain</span> = SequentialChain(
Â  Â  <span class="hljs-attr">chains</span>=[
Â  Â  Â  Â  TransformChain(
Â  Â  Â  Â  Â  Â  input_variables=[<span class="hljs-string">"user_query"</span>],
Â  Â  Â  Â  Â  Â  output_variables=[<span class="hljs-string">"table_schema"</span>],
Â  Â  Â  Â  Â  Â  transform=get_table_schema
Â  Â  Â  Â  ),
Â  Â  Â  Â  TransformChain(
Â  Â  Â  Â  Â  Â  input_variables=[<span class="hljs-string">"user_query"</span>,Â <span class="hljs-string">"table_schema"</span>],
Â  Â  Â  Â  Â  Â  output_variables=[<span class="hljs-string">"sql_result"</span>,Â <span class="hljs-string">"generated_sql"</span>],
Â  Â  Â  Â  Â  Â  transform=execute_sql
Â  Â  Â  Â  ),
Â  Â  Â  Â  analysis_chain
Â  Â  ],
Â  Â  <span class="hljs-attr">input_variables</span>=[<span class="hljs-string">"user_query"</span>],
Â  Â  <span class="hljs-attr">output_variables</span>=[<span class="hljs-string">"analysis_result"</span>],
Â  Â  <span class="hljs-attr">verbose</span>=<span class="hljs-literal">True</span>
)
</code></pre>
<p>LangChain å·²ç»å‘å±•å‡ºä¸°å¯Œçš„ Chain ç±»å‹ï¼Œç”¨äºæ„å»ºå¤æ‚ã€æ¨¡å—åŒ–çš„ LLM åº”ç”¨ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†ã€‚</p>
<p>LangChainæ¡†æ¶é™¤äº†æä¾›Chainæ¨¡å¼å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨çš„Agentæ¨¡å¼æ¥å®ç°ï¼Œé€šè¿‡æç¤ºè¯æ¥æŒ‡å®šä¸šåŠ¡æµç¨‹é€»è¾‘ï¼Œç„¶åç›´æ¥è°ƒç”¨å·¥å…·ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åˆå§‹åŒ–Agent</span>
<span class="hljs-attr">agent</span> = initialize_agent(
Â  Â  <span class="hljs-attr">tools</span>=[semantic_tool, sql_tool],
Â  Â  <span class="hljs-attr">llm</span>=llm,
Â  Â  <span class="hljs-attr">agent</span>=AgentType.STRUCTURED_CHAT_ZERO_SHOT_REACT_DESCRIPTION,
Â  Â  <span class="hljs-attr">verbose</span>=<span class="hljs-literal">True</span>,
Â  Â  <span class="hljs-attr">handle_parsing_errors</span>=<span class="hljs-literal">True</span>,
Â  Â  <span class="hljs-attr">max_iterations</span>=<span class="hljs-number">10</span>, Â <span class="hljs-comment"># å¢åŠ æœ€å¤§è¿­ä»£æ¬¡æ•°ä»¥æ”¯æŒå¤šæ­¥æŸ¥è¯¢</span>
Â  Â  <span class="hljs-attr">early_stopping_method</span>=<span class="hljs-string">"generate"</span>
)

defÂ chat(user_query):
Â  Â Â print("æ‰§è¡Œæ–¹æ³•chat")

Â  Â Â <span class="hljs-comment"># æ›´æ˜ç¡®çš„æŒ‡ä»¤</span>
Â  Â  <span class="hljs-attr">enhanced_query</span> =Â f<span class="hljs-string">"""
Â  Â  é—®é¢˜ï¼š{user_query}

Â  Â  è¯·ç‰¹åˆ«æ³¨æ„ï¼šè¿™ä¸ªé—®é¢˜å¯èƒ½éœ€è¦ä»å¤šä¸ªè¡¨ä¸­æŸ¥è¯¢æ•°æ®ã€‚
Â  Â  1. é¦–å…ˆç¡®å®šéœ€è¦æŸ¥è¯¢å“ªäº›æ•°æ®
Â  Â  2. ä½¿ç”¨match_metadataå·¥å…·åˆ†åˆ«åŒ¹é…åŒ…å«è¿™äº›æ•°æ®çš„è¡¨ç»“æ„
Â  Â  3. å¯¹æ¯ä¸ªè¡¨ç”Ÿæˆç›¸åº”çš„SQLæŸ¥è¯¢è¯­å¥
Â  Â  4. æ‰§è¡ŒæŸ¥è¯¢å¹¶æ±‡æ€»ç»“æœ
Â  Â  5. æœ€åè®¡ç®—å¹¶ç»™å‡ºç­”æ¡ˆ

Â  Â  è¯·ç¡®ä¿é€æ­¥æ‰§è¡Œï¼Œä¸è¦è·³è¿‡ä»»ä½•æ­¥éª¤ã€‚
Â  Â  """</span>

Â  Â Â try:
Â  Â  Â  Â  <span class="hljs-attr">result</span> = agent.run(enhanced_query)
Â  Â  Â  Â Â print(f"\næœ€ç»ˆç»“æœ:Â {result}")
Â  Â Â exceptÂ ExceptionÂ asÂ e:
Â  Â  Â  Â Â print(f"æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºé”™:Â {str(e)}")
Â  Â  Â  Â Â <span class="hljs-comment"># è¿™é‡Œå¯ä»¥æ·»åŠ é‡è¯•æˆ–æ›´è¯¦ç»†çš„é”™è¯¯å¤„ç†é€»è¾‘</span>
</code></pre>
<h4 data-id="heading-3">3ã€QwenAgentæ¡†æ¶</h4>
<p>QwenAgentæ¡†æ¶åˆ™åªèƒ½é€šè¿‡æç¤ºè¯æ–¹å¼æŒ‡å®šä¸šåŠ¡æµç¨‹é€»è¾‘ï¼Œç„¶åç›´æ¥è°ƒç”¨Assistantç­‰å¾…ç”¨æˆ·è¾“å…¥ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åˆ›å»ºAgentå®ä¾‹</span>
<span class="hljs-attr">agent</span> = Assistant(
Â  Â  <span class="hljs-attr">name</span>=<span class="hljs-string">'ai_agent_assistant'</span>,
Â  Â  <span class="hljs-attr">llm</span>={
Â  Â  Â  Â Â 'model':Â 'qwen3:32b',
Â  Â  Â  Â Â 'model_server':Â 'http://localhost:11434/v1',
Â  Â  },
Â  Â  <span class="hljs-attr">system_message</span>=<span class="hljs-string">"""
Â  Â  Â  Â  ä½ æ˜¯ä¸€ä¸ªæ•°æ®åˆ†æåŠ©æ‰‹ï¼Œè´Ÿè´£å¸®åŠ©ç”¨æˆ·æŸ¥è¯¢æ•°æ®åº“ä¿¡æ¯ã€‚
Â  Â  Â  Â  è¯·ç‰¹åˆ«æ³¨æ„ï¼šç”¨æˆ·çš„é—®é¢˜å¯èƒ½éœ€è¦ä»å¤šä¸ªè¡¨ä¸­æŸ¥è¯¢æ•°æ®ã€‚
Â  Â  Â  Â  1. é¦–å…ˆç¡®å®šéœ€è¦æŸ¥è¯¢å“ªäº›æ•°æ®
Â  Â  Â  Â  2. ä½¿ç”¨match_metadataå·¥å…·åˆ†åˆ«åŒ¹é…åŒ…å«è¿™äº›æ•°æ®çš„è¡¨ç»“æ„
Â  Â  Â  Â  3. å¯¹æ¯ä¸ªè¡¨ç”Ÿæˆç›¸åº”çš„SQLæŸ¥è¯¢è¯­å¥
Â  Â  Â  Â  4. æ‰§è¡ŒæŸ¥è¯¢å¹¶æ±‡æ€»ç»“æœ
Â  Â  Â  Â  5. æœ€åè®¡ç®—å¹¶ç»™å‡ºç­”æ¡ˆ

Â  Â  Â  Â  è¯·ç¡®ä¿é€æ­¥æ‰§è¡Œï¼Œä¸è¦è·³è¿‡ä»»ä½•æ­¥éª¤ã€‚
Â  Â  """</span>,
Â  Â  <span class="hljs-attr">function_list</span>=[MatchMetadataTool(), ExecuteSQLTool()],
)
</code></pre>
<h4 data-id="heading-4">4ã€AgentScopeæ¡†æ¶</h4>
<p>AgentScopeæ¡†æ¶ä¸­æ”¯æŒå•ä½“Agentæ¨¡å¼ï¼Œå°†å·¥å…·æä¾›ç»™æ¡†æ¶ï¼Œå†é€šè¿‡æç¤ºè¯æ¥æŒ‡å®šä¸šåŠ¡æµç¨‹é€»è¾‘ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">asyncÂ defÂ interactive_react_agent() -&gt;Â None:
Â  Â Â """åˆ›å»ºä¸€ä¸ªæ”¯æŒå¤šè½®å¯¹è¯çš„ReActæ™ºèƒ½ä½“ã€‚"""
Â  Â Â <span class="hljs-comment"># å‡†å¤‡å·¥å…·</span>
Â  Â  <span class="hljs-attr">toolkit</span> = Toolkit()
Â  Â  toolkit.register_tool_function(match_metadata)
Â  Â  toolkit.register_tool_function(execute_sql)

Â  Â  <span class="hljs-attr">jarvis</span> = ReActAgent(
Â  Â  Â  Â  <span class="hljs-attr">name</span>=<span class="hljs-string">"Jarvis"</span>,
Â  Â  Â  Â  <span class="hljs-attr">sys_prompt</span>=<span class="hljs-string">"""
Â  Â  Â  Â  Â  Â  ä½ æ˜¯ä¸€ä¸ªæ•°æ®åˆ†æåŠ©æ‰‹ï¼Œè´Ÿè´£å¸®åŠ©ç”¨æˆ·æŸ¥è¯¢æ•°æ®åº“ä¿¡æ¯ã€‚
Â  Â  Â  Â  Â  Â  è¯·ç‰¹åˆ«æ³¨æ„ï¼šç”¨æˆ·çš„é—®é¢˜å¯èƒ½éœ€è¦ä»å¤šä¸ªè¡¨ä¸­æŸ¥è¯¢æ•°æ®ã€‚
Â  Â  Â  Â  Â  Â  1. é¦–å…ˆç¡®å®šéœ€è¦æŸ¥è¯¢å“ªäº›æ•°æ®
Â  Â  Â  Â  Â  Â  2. ä½¿ç”¨match_metadataå·¥å…·åˆ†åˆ«åŒ¹é…åŒ…å«è¿™äº›æ•°æ®çš„è¡¨ç»“æ„
Â  Â  Â  Â  Â  Â  3. å¯¹æ¯ä¸ªè¡¨ç”Ÿæˆç›¸åº”çš„SQLæŸ¥è¯¢è¯­å¥
Â  Â  Â  Â  Â  Â  4. æ‰§è¡ŒæŸ¥è¯¢å¹¶æ±‡æ€»ç»“æœ
Â  Â  Â  Â  Â  Â  5. æœ€åè®¡ç®—å¹¶ç»™å‡ºç­”æ¡ˆ

Â  Â  Â  Â  Â  Â  è¯·ç¡®ä¿é€æ­¥æ‰§è¡Œï¼Œä¸è¦è·³è¿‡ä»»ä½•æ­¥éª¤ã€‚
Â  Â  Â  Â  """</span>,
Â  Â  Â  Â  <span class="hljs-attr">model</span>=OllamaChatModel(
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">model_name</span>=<span class="hljs-string">"qwen3:32b"</span>, Â <span class="hljs-comment"># æŒ‡å®šæ¨¡å‹åç§°</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">stream</span>=<span class="hljs-literal">True</span>, Â <span class="hljs-comment"># æ ¹æ®éœ€è¦è®¾ç½®æ˜¯å¦æµå¼è¾“å‡º</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">enable_thinking</span>=<span class="hljs-literal">True</span>, Â <span class="hljs-comment"># ä¸ºQwen3å¯ç”¨æ€è€ƒåŠŸèƒ½ï¼ˆå¯é€‰ï¼‰</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># host="http://localhost:11434" # å¦‚æœOllamaä¸åœ¨é»˜è®¤åœ°å€ï¼Œéœ€æŒ‡å®š</span>
Â  Â  Â  Â  ),
Â  Â  Â  Â  <span class="hljs-attr">formatter</span>=OllamaChatFormatter(),
Â  Â  Â  Â  <span class="hljs-attr">toolkit</span>=toolkit,
Â  Â  Â  Â  <span class="hljs-attr">memory</span>=InMemoryMemory(),
Â  Â  )
</code></pre>
<h4 data-id="heading-5">å°ç»“</h4>
<p>æ‰‹å†™ä»£ç éœ€äººå·¥ä¸²è”å„ä¸ªæ­¥éª¤ï¼Œçµæ´»ä½†å¼€å‘æˆæœ¬é«˜ï¼Œç»´æŠ¤å¤æ‚ã€‚å„æ¡†æ¶åˆ™æä¾›äº†ä¸°å¯Œçš„é“¾ï¼ˆChainï¼‰æˆ–Agentæ¨¡å¼ï¼Œæ”¯æŒæµç¨‹æ¨¡å—åŒ–ã€å·¥å…·è°ƒç”¨è‡ªåŠ¨åŒ–ï¼Œæå¤§æå‡å¼€å‘æ•ˆç‡å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<h2 data-id="heading-6"><strong>æ¨¡å‹è°ƒç”¨å¯¹æ¯”</strong></h2>
<p>æ¥ä¸‹æ¥çœ‹çœ‹æ‰‹å†™ä»£ç å’Œä½¿ç”¨å¼€å‘æ¡†æ¶ï¼Œéƒ½æ˜¯å¦‚ä½•è°ƒç”¨å¤§æ¨¡å‹çš„ï¼Œå¦‚ä½•å¤„ç†å¤§æ¨¡å‹çš„æµå¼è¾“å‡ºçš„ã€‚</p>
<h4 data-id="heading-7">1ã€æ‰‹å†™ä»£ç </h4>
<p>é€šè¿‡HTTPæ–¹å¼è°ƒç”¨å¤–éƒ¨å¤§æ¨¡å‹ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span>Â requests
<span class="hljs-comment"># Analysis API</span>
<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">AnalysisService</span>:
Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
Â  Â  Â  Â Â self.ollama_host =Â <span class="hljs-string">"http://localhost:11434/api/chat"</span>

Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">analysis</span>(<span class="hljs-params">self, prompt, model=<span class="hljs-string">"deepseek-r1:32b"</span>, messages=<span class="hljs-literal">None</span></span>):
Â  Â  Â  Â Â <span class="hljs-comment"># å‘é€POSTè¯·æ±‚</span>
Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â messagesÂ isNone:
Â  Â  Â  Â  Â  Â  messages = []
Â  Â  Â  Â Â <span class="hljs-built_in">str</span>Â =Â <span class="hljs-string">""</span>
Â  Â  Â  Â  newMessages = messages[:]
Â  Â  Â  Â  newMessages.append({<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"user"</span>,Â <span class="hljs-string">"content"</span>: prompt})
Â  Â  Â  Â Â <span class="hljs-comment"># è¯·æ±‚æ•°æ®</span>
Â  Â  Â  Â  data = {
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"model"</span>: model,
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"messages"</span>: newMessages,
Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"stream"</span>:Â <span class="hljs-literal">True</span>
Â  Â  Â  Â  }
Â  Â  Â  Â  isThinking =Â <span class="hljs-literal">False</span>
Â  Â  Â  Â Â <span class="hljs-keyword">with</span>Â requests.post(self.ollama_host, json=data, stream=<span class="hljs-literal">True</span>)Â <span class="hljs-keyword">as</span>Â response:
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># å¤„ç†æµå¼å“åº”</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â lineÂ <span class="hljs-keyword">in</span>Â response.iter_lines():
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â line:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  decoded_line = line.decode(<span class="hljs-string">'utf-8'</span>)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">try</span>:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># è§£æJSONæ•°æ®</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  chunk = json.loads(decoded_line)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  content = chunk[<span class="hljs-string">'message'</span>][<span class="hljs-string">'content'</span>]
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span> <span class="hljs-string">"&lt;think&gt;"</span><span class="hljs-keyword">in</span>Â content:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isThinking =Â <span class="hljs-literal">True</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span> <span class="hljs-string">"&lt;/think&gt;"</span><span class="hljs-keyword">in</span>Â content:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  isThinking =Â <span class="hljs-literal">False</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span>Â isThinkingÂ <span class="hljs-keyword">and</span><span class="hljs-string">"&lt;/think&gt;"</span>notinÂ content:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-built_in">str</span>Â += chunk[<span class="hljs-string">'message'</span>][<span class="hljs-string">'content'</span>]
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># æ‰“å°æ¶ˆæ¯å†…å®¹</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(chunk[<span class="hljs-string">'message'</span>][<span class="hljs-string">'content'</span>], end=<span class="hljs-string">''</span>, flush=<span class="hljs-literal">True</span>)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">except</span>Â json.JSONDecodeError:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ— æ³•è§£æJSON:Â <span class="hljs-subst">{decoded_line}</span>"</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-built_in">str</span>
</code></pre>
<p>ä½¿ç”¨å®˜æ–¹æˆ–ç¤¾åŒºå°è£…çš„ Python åŒ…ï¼ˆå¦‚Â ollamaÂ åŒ…ï¼‰è°ƒç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">importÂ ollama

<span class="hljs-comment"># è°ƒç”¨æ¨¡å‹ç”Ÿæˆå›å¤ï¼Œæµå¼è¾“å‡º</span>
forÂ chunkÂ inÂ ollama.chat(
Â  Â  <span class="hljs-attr">model</span>=<span class="hljs-string">'deepseek-r1:32b'</span>,
Â  Â  <span class="hljs-attr">messages</span>=[{<span class="hljs-string">'role'</span>:Â <span class="hljs-string">'user'</span>,Â <span class="hljs-string">'content'</span>:Â <span class="hljs-string">'è®²ä¸€ä¸ªç¬‘è¯'</span>}],
Â  Â  <span class="hljs-attr">stream</span>=<span class="hljs-literal">True</span>
):
Â  Â Â print(chunk<span class="hljs-section">['message']</span><span class="hljs-section">['content']</span>, <span class="hljs-attr">end</span>=<span class="hljs-string">''</span>, flush=<span class="hljs-literal">True</span>)
</code></pre>
<h4 data-id="heading-8">2ã€LangChainæ¡†æ¶</h4>
<p>LangChainå†…éƒ¨é›†æˆæ”¯æŒå¤šç§ç±»å‹çš„æ¨¡å‹è°ƒç”¨ï¼Œä»¥ä¸‹åˆ—ä¸¾éƒ¨åˆ†ï¼š</p>



































<table><thead><tr><th>æ¨¡å‹ç±»å‹</th><th>æ”¯æŒæ¨¡å‹ç¤ºä¾‹</th><th>ç¤ºä¾‹ä»£ç </th></tr></thead><tbody><tr><td>GGUF æ ¼å¼ï¼ˆLlama.cppï¼‰</td><td>Llama 3, Mistral, Phi-3, Gemma ç­‰</td><td><code>python from langchain_community.llms import LlamaCpp llm = LlamaCpp(model_path="/path/to/model.gguf", n_ctx=2048) </code></td></tr><tr><td>Transformers ï¼ˆPyTorchï¼‰</td><td>Llama 3, Qwen, GLM, Mistral, Falcon ç­‰</td><td><code>python from langchain_community.llms import HuggingFacePipeline pipe = pipeline("text-generation", model="Qwen/Qwen2-7B-Instruct") llm = HuggingFacePipeline(pipeline=pipe) </code></td></tr><tr><td>vLLM ï¼ˆé«˜æ€§èƒ½æ¨ç†ï¼‰</td><td>æ”¯æŒæ‰€æœ‰ Transformers æ¨¡å‹</td><td><code>python from langchain_community.llms import VLLM llm = VLLM(model="Qwen/Qwen2-7B-Instruct", tensor_parallel_size=1) </code></td></tr><tr><td>Ollama</td><td>llama3, mistral, phi3, qwen2, gemma ç­‰</td><td><code>python from langchain_ollama import OllamaLLM llm = OllamaLLM(model="llama3") </code></td></tr><tr><td>Local LLM via API</td><td>ä»»æ„æœ¬åœ°æ¨¡å‹</td><td><code>python from langchain_openai import ChatOpenAI llm = ChatOpenAI( base_url="&lt;http://localhost:1234/v1&gt;", api_key="not-needed", model="local-model" ) </code></td></tr></tbody></table>
<h4 data-id="heading-9">3ã€QwenAgentæ¡†æ¶</h4>
<p>QwenAgentå†…éƒ¨é›†æˆæ”¯æŒé€šç”¨HTTPæ–¹å¼è°ƒç”¨å¤§æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">...
<span class="hljs-comment"># åˆ›å»ºAgentå®ä¾‹</span>
<span class="hljs-attr">agent</span> = Assistant(
Â  Â  <span class="hljs-attr">name</span>=<span class="hljs-string">'ai_agent_assistant'</span>,
Â  Â  <span class="hljs-attr">llm</span>={
Â  Â  Â  Â Â 'model':Â 'qwen3:32b',
Â  Â  Â  Â Â 'model_server':Â 'http://localhost:11434/v1',
Â  Â  },
Â  Â  ...
</code></pre>
<h4 data-id="heading-10">4ã€AgentScopeæ¡†æ¶</h4>
<p>AgentScopeå†…éƒ¨é›†æˆå¤šæ¨¡å‹æ”¯æŒï¼š</p>



































<table><thead><tr><th>æ¨¡å‹å¹³å°</th><th>ç±»å</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Ollama</td><td><code>OllamaChatModel</code></td><td>è°ƒç”¨æœ¬åœ° Ollama æœåŠ¡ï¼Œæ”¯æŒ <code>qwen3:32b</code> ç­‰æ¨¡å‹ï¼Œ<strong>æ”¯æŒ <code>enable_thinking=True</code></strong></td></tr><tr><td>é˜¿é‡Œäº‘ DashScopeï¼ˆQwenï¼‰</td><td><code>DashScopeChatModel</code></td><td>è°ƒç”¨ Qwen ç³»åˆ— APIï¼ˆqwen-max/plus/turbo/vlï¼‰ï¼Œ<strong>æ”¯æŒ <code>enable_thinking</code>ï¼ˆQwen3/QwQ/DeepSeek-R1ï¼‰</strong></td></tr><tr><td>OpenAI</td><td><code>OpenAIChatModel</code></td><td>è°ƒç”¨ GPT ç³»åˆ—ï¼ˆgpt-4oã€gpt-3.5-turbo ç­‰ï¼‰ï¼Œæ”¯æŒ <code>reasoning_effort</code>ï¼ˆo3/o4ï¼‰</td></tr><tr><td>Anthropic</td><td><code>AnthropicChatModel</code></td><td>è°ƒç”¨ Claude ç³»åˆ—ï¼ˆopus/sonnet/haikuï¼‰ï¼Œæ”¯æŒ <code>thinking</code> é…ç½®</td></tr><tr><td>Google Gemini</td><td><code>GeminiChatModel</code></td><td>è°ƒç”¨ Gemini 1.5/2.0 ç³»åˆ—ï¼Œæ”¯æŒ <code>thinking_config</code>ï¼ˆå¦‚ <code>include_thoughts=True</code>ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-11">å°ç»“</h4>
<p>æ‰‹å†™ä»£ç é€šå¸¸ç›´æ¥è°ƒç”¨HTTPæ¥å£æˆ–ä½¿ç”¨å®˜æ–¹SDKï¼Œéœ€è‡ªè¡Œå¤„ç†æµå¼è¾“å‡ºçš„å¾ªç¯å“åº”å’Œå¼‚å¸¸ã€‚è€Œå‡ ç§å¼€å‘æ¡†æ¶éƒ½å†…ç½®å¯¹å¤šç§æ¨¡å‹çš„ç»Ÿä¸€å°è£…ï¼Œåªè¦ç®€å•é…ç½®å³å¯ï¼Œç®€åŒ–äº†è°ƒç”¨è¿‡ç¨‹ï¼Œæå‡äº†ç¨³å®šæ€§å’Œæ‰©å±•æ€§ã€‚</p>
<h2 data-id="heading-12"><strong>å·¥å…·è°ƒç”¨å¯¹æ¯”</strong></h2>
<p>ç°åœ¨AI Agentä¸­è°ƒç”¨å·¥å…·Toolså·²ç»æ˜¯å…¸å‹åœºæ™¯äº†ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥å¯¹è¿™å—åšä¸ªå¯¹æ¯”åˆ†æã€‚</p>
<h4 data-id="heading-13">1ã€æ‰‹å†™ä»£ç </h4>
<p>éœ€è¦æ‰‹åŠ¨è°ƒç”¨å¤–éƒ¨å·¥å…·ï¼š</p>
<pre><code class="hljs language-python" lang="python">...
<span class="hljs-comment"># sql agent</span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">sql_agent</span>(<span class="hljs-params">user_query</span>):
Â  Â Â <span class="hljs-comment"># 1. è¯­ä¹‰åŒ¹é…</span>
Â  Â  table = semanticService.hybrid_search(user_query,Â <span class="hljs-number">1</span>)
Â  Â  ...
Â  Â Â <span class="hljs-comment"># 3. æ‰§è¡ŒæŸ¥è¯¢</span>
Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â sql:
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nSQLç”Ÿæˆå¤±è´¥"</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â Result.error()
Â  Â Â 
Â  Â  resultSet = queryService.query_with_column(sql)
Â  Â  ...
</code></pre>
<h4 data-id="heading-14">2ã€LangChainæ¡†æ¶</h4>
<p>Agentæ¨¡å¼åˆå§‹åŒ–ä¼ å…¥toolså³å¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åˆå§‹åŒ–Agent</span>
<span class="hljs-attr">agent</span> = initialize_agent(
Â  Â  <span class="hljs-attr">tools</span>=[semantic_tool, sql_tool],
Â  Â  <span class="hljs-attr">llm</span>=llm,
Â  Â  <span class="hljs-attr">agent</span>=AgentType.CONVERSATIONAL_REACT_DESCRIPTION,
Â  Â  <span class="hljs-attr">verbose</span>=<span class="hljs-literal">True</span>,
Â  Â  <span class="hljs-attr">handle_parsing_errors</span>=<span class="hljs-literal">True</span>,
Â  Â  <span class="hljs-attr">max_iterations</span>=<span class="hljs-number">10</span>, Â <span class="hljs-comment"># å¢åŠ æœ€å¤§è¿­ä»£æ¬¡æ•°ä»¥æ”¯æŒå¤šæ­¥æŸ¥è¯¢</span>
Â  Â  <span class="hljs-attr">early_stopping_method</span>=<span class="hljs-string">"generate"</span>,
Â  Â  <span class="hljs-attr">memory</span>=memory
)
</code></pre>
<h4 data-id="heading-15">3ã€QwenAgentæ¡†æ¶</h4>
<p>Agentæ¨¡å¼åˆå§‹åŒ–ä¼ å…¥toolså³å¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åˆ›å»ºAgentå®ä¾‹</span>
<span class="hljs-attr">agent</span> = Assistant(
Â  Â  <span class="hljs-attr">name</span>=<span class="hljs-string">'ai_agent_assistant'</span>,
Â  Â  <span class="hljs-attr">llm</span>={
Â  Â  Â  Â Â 'model':Â 'qwen3:32b',
Â  Â  Â  Â Â 'model_server':Â 'http://localhost:11434/v1',
Â  Â  },
Â  Â  <span class="hljs-attr">system_message</span>=<span class="hljs-string">"""
Â  Â  Â  Â  ä½ æ˜¯ä¸€ä¸ªæ•°æ®åˆ†æåŠ©æ‰‹ï¼Œè´Ÿè´£å¸®åŠ©ç”¨æˆ·æŸ¥è¯¢æ•°æ®åº“ä¿¡æ¯ã€‚
Â  Â  Â  Â  è¯·ç‰¹åˆ«æ³¨æ„ï¼šç”¨æˆ·çš„é—®é¢˜å¯èƒ½éœ€è¦ä»å¤šä¸ªè¡¨ä¸­æŸ¥è¯¢æ•°æ®ã€‚
Â  Â  Â  Â  1. é¦–å…ˆç¡®å®šéœ€è¦æŸ¥è¯¢å“ªäº›æ•°æ®
Â  Â  Â  Â  2. ä½¿ç”¨match_metadataå·¥å…·åˆ†åˆ«åŒ¹é…åŒ…å«è¿™äº›æ•°æ®çš„è¡¨ç»“æ„
Â  Â  Â  Â  3. å¯¹æ¯ä¸ªè¡¨ç”Ÿæˆç›¸åº”çš„SQLæŸ¥è¯¢è¯­å¥
Â  Â  Â  Â  4. æ‰§è¡ŒæŸ¥è¯¢å¹¶æ±‡æ€»ç»“æœ
Â  Â  Â  Â  5. æœ€åè®¡ç®—å¹¶ç»™å‡ºç­”æ¡ˆ

Â  Â  Â  Â  è¯·ç¡®ä¿é€æ­¥æ‰§è¡Œï¼Œä¸è¦è·³è¿‡ä»»ä½•æ­¥éª¤ã€‚
Â  Â  """</span>,
Â  Â  <span class="hljs-attr">function_list</span>=[MatchMetadataTool(), ExecuteSQLTool()],
)
</code></pre>
<p>éœ€è¦å¤„ç†ä¸€ä¸‹æµå¼è¾“å‡ºç»“æœï¼Œè·å–æ–‡æœ¬å†…å®¹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">defÂ read_steam_response(response_generator):
Â  Â Â <span class="hljs-comment"># å¤„ç†ç”Ÿæˆå™¨å“åº”</span>
Â  Â  <span class="hljs-attr">full_response</span> =Â <span class="hljs-string">''</span>
Â  Â  <span class="hljs-attr">start</span> =Â <span class="hljs-number">0</span>
Â  Â  <span class="hljs-attr">end</span> =Â <span class="hljs-number">0</span>
Â  Â Â forÂ responseÂ inÂ response_generator:
Â  Â  Â  Â Â <span class="hljs-comment"># æ£€æŸ¥å“åº”ç±»å‹å¹¶é€‚å½“å¤„ç†</span>
Â  Â  Â  Â Â ifÂ isinstance(response,Â list):
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># å¦‚æœæ˜¯åˆ—è¡¨ï¼Œæå–å†…å®¹</span>
Â  Â  Â  Â  Â  Â Â forÂ itemÂ inÂ response:
Â  Â  Â  Â  Â  Â  Â  Â Â if isinstance(item,Â dict)Â and'content'inÂ item:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">full_response</span> = item[<span class="hljs-string">'content'</span>]
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">end</span> = full_response.__len__()
Â  Â  Â  Â  Â  Â  Â  Â Â elif isinstance(item,Â str):
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">full_response</span> = item
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">end</span> = full_response.__len__()
Â  Â  Â  Â Â elifÂ isinstance(response,Â dict)Â and'content'inÂ response:
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">full_response</span> = response[<span class="hljs-string">'content'</span>]
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">end</span> = full_response.__len__()
Â  Â  Â  Â Â elifÂ isinstance(response,Â str):
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">full_response</span> = response
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">end</span> = full_response.__len__()
Â  Â  Â  Â Â print(f"{full_response<span class="hljs-section">[start:end]</span>}", <span class="hljs-attr">end</span>=<span class="hljs-string">""</span>)
Â  Â  Â  Â  <span class="hljs-attr">start</span> = end

Â  Â Â returnÂ full_response
</code></pre>
<h4 data-id="heading-16">4ã€AgentScopeæ¡†æ¶</h4>
<p>Agentæ¨¡å¼åˆå§‹åŒ–ä¼ å…¥toolså³å¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å‡†å¤‡å·¥å…·</span>
<span class="hljs-attr">toolkit</span> = Toolkit()
toolkit.register_tool_function(match_metadata)
toolkit.register_tool_function(execute_sql)

<span class="hljs-attr">jarvis</span> = ReActAgent(
Â  Â  <span class="hljs-attr">name</span>=<span class="hljs-string">"Jarvis"</span>,
Â  Â  <span class="hljs-attr">sys_prompt</span>=<span class="hljs-string">"""
Â  Â  Â  Â  ä½ æ˜¯ä¸€ä¸ªæ•°æ®åˆ†æåŠ©æ‰‹ï¼Œè´Ÿè´£å¸®åŠ©ç”¨æˆ·æŸ¥è¯¢æ•°æ®åº“ä¿¡æ¯ã€‚
Â  Â  Â  Â  è¯·ç‰¹åˆ«æ³¨æ„ï¼šç”¨æˆ·çš„é—®é¢˜å¯èƒ½éœ€è¦ä»å¤šä¸ªè¡¨ä¸­æŸ¥è¯¢æ•°æ®ã€‚
Â  Â  Â  Â  1. é¦–å…ˆç¡®å®šéœ€è¦æŸ¥è¯¢å“ªäº›æ•°æ®
Â  Â  Â  Â  2. ä½¿ç”¨match_metadataå·¥å…·åˆ†åˆ«åŒ¹é…åŒ…å«è¿™äº›æ•°æ®çš„è¡¨ç»“æ„
Â  Â  Â  Â  3. å¯¹æ¯ä¸ªè¡¨ç”Ÿæˆç›¸åº”çš„SQLæŸ¥è¯¢è¯­å¥
Â  Â  Â  Â  4. æ‰§è¡ŒæŸ¥è¯¢å¹¶æ±‡æ€»ç»“æœ
Â  Â  Â  Â  5. æœ€åè®¡ç®—å¹¶ç»™å‡ºç­”æ¡ˆ

Â  Â  Â  Â  è¯·ç¡®ä¿é€æ­¥æ‰§è¡Œï¼Œä¸è¦è·³è¿‡ä»»ä½•æ­¥éª¤ã€‚
Â  Â  """</span>,
Â  Â  <span class="hljs-attr">model</span>=OllamaChatModel(
Â  Â  Â  Â  <span class="hljs-attr">model_name</span>=<span class="hljs-string">"qwen3:32b"</span>, Â <span class="hljs-comment"># æŒ‡å®šæ¨¡å‹åç§°</span>
Â  Â  Â  Â  <span class="hljs-attr">stream</span>=<span class="hljs-literal">True</span>, Â <span class="hljs-comment"># æ ¹æ®éœ€è¦è®¾ç½®æ˜¯å¦æµå¼è¾“å‡º</span>
Â  Â  Â  Â  <span class="hljs-attr">enable_thinking</span>=<span class="hljs-literal">True</span>, Â <span class="hljs-comment"># ä¸ºQwen3å¯ç”¨æ€è€ƒåŠŸèƒ½ï¼ˆå¯é€‰ï¼‰</span>
Â  Â  Â  Â Â <span class="hljs-comment"># host="http://localhost:11434" # å¦‚æœOllamaä¸åœ¨é»˜è®¤åœ°å€ï¼Œéœ€æŒ‡å®š</span>
Â  Â  ),
Â  Â  <span class="hljs-attr">formatter</span>=OllamaChatFormatter(),
Â  Â  <span class="hljs-attr">toolkit</span>=toolkit,
Â  Â  <span class="hljs-attr">memory</span>=InMemoryMemory(),
)
</code></pre>
<h4 data-id="heading-17">å°ç»“</h4>
<p>æ‰‹å†™å¼€å‘ä¸­éœ€æ˜¾å¼è°ƒç”¨è¯­ä¹‰æ£€ç´¢ã€SQLæŸ¥è¯¢ç­‰å·¥å…·ï¼Œå‡ ç§æ¡†æ¶éƒ½æ”¯æŒé€šè¿‡å·¥å…·æ³¨å†Œæœºåˆ¶è‡ªåŠ¨å®Œæˆè°ƒç”¨ä¸è·¯ç”±ï¼Œé™ä½è€¦åˆå¹¶å¢å¼ºå¤ç”¨ã€‚</p>
<h2 data-id="heading-18"><strong>ä¸Šä¸‹æ–‡è®°å¿†å¯¹æ¯”</strong></h2>
<p>åœ¨AI Agentå®è·µè¿‡ç¨‹ä¸­ï¼Œå¦‚æœéœ€è¦å®ç°å¤šè½®å¯¹è¯ï¼Œå°±ä¼šç¢°åˆ°ä¸Šä¸‹æ–‡è®°å¿†çš„å¤„ç†ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥å¯¹è¿™å—åšä¸ªå¯¹æ¯”ã€‚</p>
<h4 data-id="heading-19">1ã€æ‰‹å†™ä»£ç </h4>
<p>è¿™ç§æ¨¡å¼éœ€è¦æ‰‹å†™ä»£ç æ¥ç®¡ç†ä¸Šä¸‹æ–‡æ¶ˆæ¯ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span>Â threading
<span class="hljs-keyword">from</span>Â dataclassesÂ <span class="hljs-keyword">import</span>Â dataclass
<span class="hljs-keyword">from</span>Â typingÂ importList,Â <span class="hljs-type">Dict</span>,Â <span class="hljs-type">Any</span>


<span class="hljs-meta">@dataclass</span>
<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">Message</span>:
Â  Â  role:Â <span class="hljs-built_in">str</span><span class="hljs-comment"># "system", "user", "assistant"</span>
Â  Â  content:Â <span class="hljs-built_in">str</span>

Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">to_dict</span>(<span class="hljs-params">self</span>) -&gt;Â <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>,Â <span class="hljs-built_in">str</span>]:
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â {<span class="hljs-string">"role"</span>:Â self.role,Â <span class="hljs-string">"content"</span>:Â self.content}


<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">MessageManager</span>:
Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, max_history:Â <span class="hljs-built_in">int</span>Â =Â <span class="hljs-number">10</span></span>):
Â  Â  Â  Â Â <span class="hljs-string">"""
Â  Â  Â  Â  åˆå§‹åŒ–æ¶ˆæ¯ç®¡ç†å™¨

Â  Â  Â  Â  :param max_history: æ¯ä¸ª session æœ€å¤šä¿ç•™çš„å†å²æ¶ˆæ¯æ•°é‡ï¼ˆä¸åŒ…æ‹¬ system æ¶ˆæ¯ï¼‰
Â  Â  Â  Â  """</span>
Â  Â  Â  Â Â self.max_history = max_history
Â  Â  Â  Â Â self._sessions:Â <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>,Â <span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>,Â <span class="hljs-type">Any</span>]] = {}
Â  Â  Â  Â Â self._lock = threading.Lock() Â <span class="hljs-comment"># ä¿è¯çº¿ç¨‹å®‰å…¨</span>

Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">set_system_message</span>(<span class="hljs-params">self, session_id:Â <span class="hljs-built_in">str</span>, content:Â <span class="hljs-built_in">str</span></span>) -&gt;Â <span class="hljs-literal">None</span>:
Â  Â  Â  Â Â <span class="hljs-string">"""ä¸ºæŒ‡å®š session è®¾ç½® system æ¶ˆæ¯ï¼ˆä¼šè¦†ç›–æ—§çš„ï¼‰"""</span>
Â  Â  Â  Â Â <span class="hljs-keyword">with</span>Â self._lock:
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â session_idÂ notinself._sessions:
Â  Â  Â  Â  Â  Â  Â  Â Â self._sessions[session_id] = {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"system"</span>:Â <span class="hljs-literal">None</span>,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"history"</span>: [] Â <span class="hljs-comment"># åªå­˜ user/assistant å¯¹è¯</span>
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â self._sessions[session_id][<span class="hljs-string">"system"</span>] = Message(role=<span class="hljs-string">"system"</span>, content=content)

Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">add_user_message</span>(<span class="hljs-params">self, session_id:Â <span class="hljs-built_in">str</span>, content:Â <span class="hljs-built_in">str</span></span>) -&gt;Â <span class="hljs-literal">None</span>:
Â  Â  Â  Â Â <span class="hljs-string">"""æ·»åŠ ç”¨æˆ·æ¶ˆæ¯"""</span>
Â  Â  Â  Â Â self._add_message(session_id,Â <span class="hljs-string">"user"</span>, content)

Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">add_assistant_message</span>(<span class="hljs-params">self, session_id:Â <span class="hljs-built_in">str</span>, content:Â <span class="hljs-built_in">str</span></span>) -&gt;Â <span class="hljs-literal">None</span>:
Â  Â  Â  Â Â <span class="hljs-string">"""æ·»åŠ åŠ©æ‰‹å›å¤"""</span>
Â  Â  Â  Â Â self._add_message(session_id,Â <span class="hljs-string">"assistant"</span>, content)

Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">_add_message</span>(<span class="hljs-params">self, session_id:Â <span class="hljs-built_in">str</span>, role:Â <span class="hljs-built_in">str</span>, content:Â <span class="hljs-built_in">str</span></span>) -&gt;Â <span class="hljs-literal">None</span>:
Â  Â  Â  Â Â <span class="hljs-keyword">with</span>Â self._lock:
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â session_idÂ notinÂ self._sessions:
Â  Â  Â  Â  Â  Â  Â  Â Â self._sessions[session_id] = {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"system"</span>:Â <span class="hljs-literal">None</span>,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-string">"history"</span>: []
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  history =Â self._sessions[session_id][<span class="hljs-string">"history"</span>]
Â  Â  Â  Â  Â  Â  history.append(Message(role=role, content=content))
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># é™åˆ¶å†å²é•¿åº¦ï¼ˆåªä¿ç•™æœ€è¿‘çš„ max_history æ¡ user/assistant æ¶ˆæ¯ï¼‰</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">len</span>(history) &gt;Â self.max_history *Â <span class="hljs-number">2</span>: Â <span class="hljs-comment"># æ¯è½®å¯¹è¯å« user + assistant</span>
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># ä¿ç•™æœ€å max_history * 2 æ¡</span>
Â  Â  Â  Â  Â  Â  Â  Â Â self._sessions[session_id][<span class="hljs-string">"history"</span>] = history[-(self.max_history *Â <span class="hljs-number">2</span>):]

Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">get_messages</span>(<span class="hljs-params">self, session_id:Â <span class="hljs-built_in">str</span></span>) -&gt;Â <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>,Â <span class="hljs-built_in">str</span>]]:
Â  Â  Â  Â Â <span class="hljs-string">"""è·å–å¯ç”¨äº Ollama /api/chat çš„ messages åˆ—è¡¨"""</span>
Â  Â  Â  Â Â <span class="hljs-keyword">with</span>Â self._lock:
Â  Â  Â  Â  Â  Â  session =Â self._sessions.get(session_id)
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â session:
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â []

Â  Â  Â  Â  Â  Â  messages = []
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># æ·»åŠ  system æ¶ˆæ¯ï¼ˆå¦‚æœæœ‰ï¼‰</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â session[<span class="hljs-string">"system"</span>]:
Â  Â  Â  Â  Â  Â  Â  Â  messages.append(session[<span class="hljs-string">"system"</span>].to_dict())
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># æ·»åŠ å†å²å¯¹è¯</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">for</span>Â msgÂ <span class="hljs-keyword">in</span>Â session[<span class="hljs-string">"history"</span>]:
Â  Â  Â  Â  Â  Â  Â  Â  messages.append(msg.to_dict())
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â messages

Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">clear_session</span>(<span class="hljs-params">self, session_id:Â <span class="hljs-built_in">str</span></span>) -&gt;Â <span class="hljs-literal">None</span>:
Â  Â  Â  Â Â <span class="hljs-string">"""æ¸…é™¤æŒ‡å®š session çš„æ‰€æœ‰æ¶ˆæ¯"""</span>
Â  Â  Â  Â Â <span class="hljs-keyword">with</span>Â self._lock:
Â  Â  Â  Â  Â  Â Â self._sessions.pop(session_id,Â <span class="hljs-literal">None</span>)

Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">list_sessions</span>(<span class="hljs-params">self</span>) -&gt;Â <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:
Â  Â  Â  Â Â <span class="hljs-string">"""åˆ—å‡ºæ‰€æœ‰ session ID"""</span>
Â  Â  Â  Â Â <span class="hljs-keyword">with</span>Â self._lock:
Â  Â  Â  Â  Â  Â Â returnlist(self._sessions.keys())

Â  Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">delete_session</span>(<span class="hljs-params">self, session_id:Â <span class="hljs-built_in">str</span></span>) -&gt;Â <span class="hljs-built_in">bool</span>:
Â  Â  Â  Â Â <span class="hljs-string">"""åˆ é™¤ sessionï¼Œè¿”å›æ˜¯å¦åˆ é™¤æˆåŠŸ"""</span>
Â  Â  Â  Â Â <span class="hljs-keyword">with</span>Â self._lock:
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â session_idÂ inself._sessions:
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">del</span>Â self._sessions[session_id]
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">True</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">False</span>
</code></pre>
<p>è°ƒç”¨æ—¶æ‰‹åŠ¨ä¼ å…¥ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># sql agent</span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">sql_agent</span>(<span class="hljs-params">user_query</span>):
Â  Â Â <span class="hljs-comment"># 1. è¯­ä¹‰åŒ¹é…</span>
Â  Â  table = semanticService.hybrid_search(user_query,Â <span class="hljs-number">1</span>)
Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â table:
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æœªåŒ¹é…åˆ°å­—æ®µ"</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â Result.error()
Â  Â  table_struct = [t[<span class="hljs-string">"table_info"</span>]Â <span class="hljs-keyword">for</span>Â tÂ <span class="hljs-keyword">in</span>Â table]
Â  Â  prompt =Â <span class="hljs-string">f"""
Â  Â  Â  Â  Â  Â  ä½ æ˜¯ä¸€ä¸ªMySQLä¸“å®¶ã€‚æ ¹æ®ä»¥ä¸‹è¡¨ç»“æ„ä¿¡æ¯ï¼š
Â  Â  Â  Â  Â  Â Â <span class="hljs-subst">{table_struct}</span>

Â  Â  Â  Â  Â  Â  å†å²é—®ç­”ï¼ˆä»…ä¾›å‚è€ƒï¼‰ï¼š"<span class="hljs-subst">{mm.get_messages(session_id)}</span>"
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  ç”¨æˆ·æŸ¥è¯¢ï¼š"<span class="hljs-subst">{user_query}</span>"

Â  Â  Â  Â  Â  Â  ç”Ÿæˆæ ‡å‡†MYSQLæŸ¥è¯¢è¯­å¥ã€‚
Â  Â  Â  Â  Â  Â  è¦æ±‚ï¼š
Â  Â  Â  Â  Â  Â  1. åªè¾“å‡ºMYSQLè¯­å¥ï¼Œä¸è¦é¢å¤–è§£é‡Š
Â  Â  Â  Â  Â  Â  2. æ ¹æ®è¯­ä¹‰å’Œå­—æ®µç±»å‹ï¼Œä½¿ç”¨COUNT/SUM/AVGç­‰èšåˆå‡½æ•°è¿›è¡Œè®¡ç®—ï¼Œéå¿…é¡»
Â  Â  Â  Â  Â  Â  3. ç»™ç”Ÿæˆçš„å­—æ®µå–ä¸€ä¸ªç®€çŸ­çš„ä¸­æ–‡åç§°
Â  Â  Â  Â  Â  Â  è¾“å‡ºæ ¼å¼ï¼šä½¿ç”¨[]åŒ…å«sqlæ–‡æœ¬å³å¯ï¼Œä¸éœ€è¦å…¶ä»–è¾“å‡ºï¼Œä¾¿äºè§£æï¼Œä¾‹å¦‚:[select 1 from dual]
Â  Â  Â  Â  """</span>
Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"SQL AGENT PROMPT=<span class="hljs-subst">{prompt}</span>"</span>)
Â  Â Â <span class="hljs-comment"># 2. å¤§æ¨¡å‹ç”ŸæˆSQL</span>
Â  Â  str1 = analysisService.analysis(prompt)
Â  Â  sql = re.search(<span class="hljs-string">r'[(.*?)]'</span>, str1, re.DOTALL).group(<span class="hljs-number">1</span>).strip()

Â  Â Â <span class="hljs-comment"># 3. æ‰§è¡ŒæŸ¥è¯¢</span>
Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â sql:
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nSQLç”Ÿæˆå¤±è´¥"</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â Result.error()

Â  Â  resultSet = queryService.query_with_column(sql)
Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â resultSet:
Â  Â  Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nSQLæŸ¥è¯¢å¤±è´¥"</span>)
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â Result.error()
Â  Â Â <span class="hljs-keyword">return</span>Â Result.success(data={Â <span class="hljs-string">"tableStruct"</span>: table_struct,Â <span class="hljs-string">"resultSet"</span>: resultSet,Â <span class="hljs-string">"sql"</span>: sql })

<span class="hljs-comment"># analysis agent</span>
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">analysis_agent</span>(<span class="hljs-params">user_query, data</span>):
Â  Â Â <span class="hljs-comment"># åŸºç¡€åˆ†æ</span>
Â  Â  prompt =Â <span class="hljs-string">f"""
Â  Â  Â  Â  Â  Â  Â  Â  æ ¹æ®ä»¥ä¸‹è¡¨ç»“æ„ä¿¡æ¯ï¼š
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-subst">{data[<span class="hljs-string">'tableStruct'</span>]}</span>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  æŸ¥è¯¢SQLï¼š
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-subst">{data[<span class="hljs-string">'sql'</span>]}</span>
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  å’Œä»¥ä¸‹æ•°æ®ä¿¡æ¯ï¼š
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-subst">{data[<span class="hljs-string">'resultSet'</span>]}</span>

Â  Â  Â  Â  Â  Â  Â  Â  å†å²é—®ç­”ï¼ˆä»…ä¾›å‚è€ƒï¼‰ï¼š"<span class="hljs-subst">{mm.get_messages(session_id)}</span>"
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  ç”¨æˆ·æŸ¥è¯¢ï¼š"<span class="hljs-subst">{user_query}</span>"

Â  Â  Â  Â  Â  Â  Â  Â  ç”Ÿæˆä¸€æ®µç®€è¦åˆ†æï¼ŒåŠ ä¸Šä¸€äº›é¢„æµ‹æ€»ç»“çš„å†…å®¹
Â  Â  Â  Â  Â  Â  """</span>
Â  Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ANALYSIS AGENT PROMPT=<span class="hljs-subst">{prompt}</span>"</span>)
Â  Â Â <span class="hljs-keyword">return</span>Â Result.success(analysisService.analysis(prompt))
</code></pre>
<h4 data-id="heading-20">2ã€LangChainæ¡†æ¶</h4>
<p>Agentæ¨¡å¼æŒ‡å®šï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è®°å¿†</span>
<span class="hljs-attr">memory</span> = ConversationBufferMemory(memory_key=<span class="hljs-string">"chat_history"</span>, return_messages=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># åˆå§‹åŒ–Agent</span>
<span class="hljs-attr">agent</span> = initialize_agent(
Â  Â  <span class="hljs-attr">tools</span>=[semantic_tool, sql_tool],
Â  Â  <span class="hljs-attr">llm</span>=llm,
Â  Â  <span class="hljs-attr">agent</span>=AgentType.CONVERSATIONAL_REACT_DESCRIPTION,
Â  Â  <span class="hljs-attr">verbose</span>=<span class="hljs-literal">True</span>,
Â  Â  <span class="hljs-attr">handle_parsing_errors</span>=<span class="hljs-literal">True</span>,
Â  Â  <span class="hljs-attr">max_iterations</span>=<span class="hljs-number">10</span>, Â <span class="hljs-comment"># å¢åŠ æœ€å¤§è¿­ä»£æ¬¡æ•°ä»¥æ”¯æŒå¤šæ­¥æŸ¥è¯¢</span>
Â  Â  <span class="hljs-attr">early_stopping_method</span>=<span class="hljs-string">"generate"</span>,
Â  Â  <span class="hljs-attr">memory</span>=memory
)
</code></pre>
<p>é™¤äº†ä¸Šé¢ç”¨åˆ°çš„ <code>ConversationBufferMemory</code>ï¼ŒLangChainè¿˜æä¾›äº†å¤šç§Memoryç»„ä»¶ï¼Œä»¥é€‚åº”ä¸åŒåœºæ™¯çš„éœ€æ±‚ã€‚å¯ä»¥æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©ï¼š</p>

























<table><thead><tr><th><strong>Memory ç±»å‹</strong></th><th><strong>ç‰¹ç‚¹</strong></th><th><strong>é€‚ç”¨åœºæ™¯</strong></th></tr></thead><tbody><tr><td><strong>ConversationBufferWindowMemory</strong></td><td>åªä¿ç•™<strong>æœ€è¿‘Kè½®</strong>çš„å¯¹è¯å†…å®¹ï¼ŒèŠ‚çœä¸Šä¸‹æ–‡ç©ºé—´ã€‚</td><td>å¯¹è¯é¢‘ç¹ï¼Œä¸”è¿‘æœŸå†…å®¹æ›´ä¸ºé‡è¦çš„åœºæ™¯ã€‚</td></tr><tr><td><strong>ConversationSummaryMemory</strong></td><td>å¯¹å†å²å¯¹è¯ç”Ÿæˆ<strong>æ‘˜è¦</strong>ï¼Œè€Œéä¿å­˜å…¨éƒ¨åŸæ–‡ã€‚</td><td>å¯¹è¯å¾ˆé•¿ï¼Œéœ€è¦å‹ç¼©ä¿¡æ¯ä»¥èŠ‚çœTokenæ¶ˆè€—ã€‚</td></tr><tr><td><strong>ConversationTokenBufferMemory</strong></td><td>æ ¹æ® <strong>Token æ•°é‡</strong>è€Œéå¯¹è¯è½®æ•°æ¥é™åˆ¶è®°å¿†é•¿åº¦ã€‚</td><td>éœ€è¦ç²¾ç¡®æ§åˆ¶è¾“å…¥ç»™æ¨¡å‹ä¸Šä¸‹æ–‡çš„é•¿åº¦å’Œæˆæœ¬ã€‚</td></tr></tbody></table>
<ul>
<li><strong>ç¡®è®¤Agentç±»å‹</strong> <strong>å…¼å®¹æ€§</strong>ï¼šåœ¨é€‰ç”¨Memoryå‰ï¼Œè¯·ç¡®è®¤ä½ ä½¿ç”¨çš„ <code>AgentType</code> æ”¯æŒMemoryåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œ<code>ZERO_SHOT_REACT_DESCRIPTION</code> é»˜è®¤ä¸æ”¯æŒè®°å¿†ï¼Œè€Œ <code>CONVERSATIONAL_REACT_DESCRIPTION</code> åˆ™ä¸“ä¸ºå¤šè½®å¯¹è¯è®¾è®¡ã€‚</li>
<li><strong>æ³¨æ„ä¸Šä¸‹æ–‡é•¿åº¦</strong>ï¼šä¸ºAgentæ·»åŠ è®°å¿†ä¼šå ç”¨æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£ã€‚å¦‚æœå¯¹è¯å¾ˆé•¿ï¼Œè€ƒè™‘ä½¿ç”¨ <code>ConversationSummaryMemory</code> æˆ– <code>ConversationBufferWindowMemory</code> æ¥é¿å…è¶…å‡ºé™åˆ¶ã€‚</li>
<li><strong>è°ƒè¯•å·¥å…·</strong>ï¼šå°† <code>verbose</code> å‚æ•°è®¾ä¸º <code>True</code>ï¼Œå¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°è¯¦ç»†çš„å†³ç­–è¿‡ç¨‹ï¼Œæœ‰åŠ©äºè§‚å¯ŸMemoryæ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</li>
</ul>
<h4 data-id="heading-21">3ã€QwenAgentæ¡†æ¶</h4>
<p>Agentæ¨¡å¼çš„Assistantç±»ä¸æ”¯æŒï¼Œéœ€è¦æ‰‹åŠ¨ç®¡ç†ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">defÂ analysis(user_query):
Â  Â Â try:
Â  Â  Â  Â Â <span class="hljs-comment"># è¿è¡ŒAgent</span>
Â  Â  Â  Â  <span class="hljs-attr">messages</span> = mm.get_messages(session_id) + [{<span class="hljs-string">'role'</span>:Â <span class="hljs-string">'user'</span>,Â <span class="hljs-string">'content'</span>: user_query}]
Â  Â  Â  Â  <span class="hljs-attr">response_generator</span> = agent.run(messages=messages)
Â  Â  Â  Â Â <span class="hljs-comment"># å¤„ç†ç”Ÿæˆå™¨å“åº”</span>
Â  Â  Â  Â  <span class="hljs-attr">full_response</span> =Â <span class="hljs-string">''</span>
Â  Â  Â  Â  <span class="hljs-attr">start</span> =Â <span class="hljs-number">0</span>
Â  Â  Â  Â  <span class="hljs-attr">end</span> =Â <span class="hljs-number">0</span>
Â  Â  Â  Â Â forÂ responseÂ inÂ response_generator:
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># æ£€æŸ¥å“åº”ç±»å‹å¹¶é€‚å½“å¤„ç†</span>
Â  Â  Â  Â  Â  Â Â if isinstance(response,Â list):
Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># å¦‚æœæ˜¯åˆ—è¡¨ï¼Œæå–å†…å®¹</span>
Â  Â  Â  Â  Â  Â  Â  Â Â forÂ itemÂ inÂ response:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â ifisinstance(item,Â dict)Â and'content'inÂ item:
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">full_response</span> = item[<span class="hljs-string">'content'</span>]
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">end</span> = full_response.__len__()
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â elifisinstance(item,Â str):
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">full_response</span> = item
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">end</span> = full_response.__len__()
Â  Â  Â  Â  Â  Â Â elif isinstance(response,Â dict)Â and'content'inÂ response:
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">full_response</span> = response[<span class="hljs-string">'content'</span>]
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">end</span> = full_response.__len__()
Â  Â  Â  Â  Â  Â Â elif isinstance(response,Â str):
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">full_response</span> = response
Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-attr">end</span> = full_response.__len__()
Â  Â  Â  Â  Â  Â Â print(f"{full_response<span class="hljs-section">[start:end]</span>}", <span class="hljs-attr">end</span>=<span class="hljs-string">""</span>)
Â  Â  Â  Â  Â  Â  <span class="hljs-attr">start</span> = end

Â  Â  Â  Â Â print(f"æœ€ç»ˆç»“æœ:Â {full_response}")
Â  Â  Â  Â Â <span class="hljs-comment"># ç¼“å­˜å†å²å¯¹è¯</span>
Â  Â  Â  Â Â ifÂ full_response:
Â  Â  Â  Â  Â  Â  mm.add_user_message(session_id, user_query)
Â  Â  Â  Â  Â  Â  mm.add_assistant_message(session_id, full_response)
Â  Â  Â  Â Â returnÂ full_response
Â  Â Â exceptÂ ExceptionÂ asÂ e:
Â  Â  Â  Â Â print(f"æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºé”™:Â {str(e)}")
Â  Â  Â  Â Â <span class="hljs-comment"># è¿™é‡Œå¯ä»¥æ·»åŠ é‡è¯•æˆ–æ›´è¯¦ç»†çš„é”™è¯¯å¤„ç†é€»è¾‘</span>
Â  Â  Â  Â Â returnÂ f"é”™è¯¯:Â {str(e)}"
</code></pre>
<h4 data-id="heading-22">4ã€AgentScopeæ¡†æ¶</h4>
<p>Agentåˆå§‹åŒ–æŒ‡å®šå¯¹åº”ç±»å‹å³å¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">jarvis</span> = ReActAgent(
Â  Â  <span class="hljs-attr">name</span>=<span class="hljs-string">"Jarvis"</span>,
Â  Â  <span class="hljs-attr">sys_prompt</span>=<span class="hljs-string">"""
Â  Â  Â  Â  ä½ æ˜¯ä¸€ä¸ªæ•°æ®åˆ†æåŠ©æ‰‹ï¼Œè´Ÿè´£å¸®åŠ©ç”¨æˆ·æŸ¥è¯¢æ•°æ®åº“ä¿¡æ¯ã€‚
Â  Â  Â  Â  è¯·ç‰¹åˆ«æ³¨æ„ï¼šç”¨æˆ·çš„é—®é¢˜å¯èƒ½éœ€è¦ä»å¤šä¸ªè¡¨ä¸­æŸ¥è¯¢æ•°æ®ã€‚
Â  Â  Â  Â  1. é¦–å…ˆç¡®å®šéœ€è¦æŸ¥è¯¢å“ªäº›æ•°æ®
Â  Â  Â  Â  2. ä½¿ç”¨match_metadataå·¥å…·åˆ†åˆ«åŒ¹é…åŒ…å«è¿™äº›æ•°æ®çš„è¡¨ç»“æ„
Â  Â  Â  Â  3. å¯¹æ¯ä¸ªè¡¨ç”Ÿæˆç›¸åº”çš„SQLæŸ¥è¯¢è¯­å¥
Â  Â  Â  Â  4. æ‰§è¡ŒæŸ¥è¯¢å¹¶æ±‡æ€»ç»“æœ
Â  Â  Â  Â  5. æœ€åè®¡ç®—å¹¶ç»™å‡ºç­”æ¡ˆ

Â  Â  Â  Â  è¯·ç¡®ä¿é€æ­¥æ‰§è¡Œï¼Œä¸è¦è·³è¿‡ä»»ä½•æ­¥éª¤ã€‚
Â  Â  """</span>,
Â  Â  <span class="hljs-attr">model</span>=OllamaChatModel(
Â  Â  Â  Â  <span class="hljs-attr">model_name</span>=<span class="hljs-string">"qwen3:32b"</span>, Â <span class="hljs-comment"># æŒ‡å®šæ¨¡å‹åç§°</span>
Â  Â  Â  Â  <span class="hljs-attr">stream</span>=<span class="hljs-literal">True</span>, Â <span class="hljs-comment"># æ ¹æ®éœ€è¦è®¾ç½®æ˜¯å¦æµå¼è¾“å‡º</span>
Â  Â  Â  Â  <span class="hljs-attr">enable_thinking</span>=<span class="hljs-literal">True</span>, Â <span class="hljs-comment"># ä¸ºQwen3å¯ç”¨æ€è€ƒåŠŸèƒ½ï¼ˆå¯é€‰ï¼‰</span>
Â  Â  Â  Â Â <span class="hljs-comment"># host="http://localhost:11434" # å¦‚æœOllamaä¸åœ¨é»˜è®¤åœ°å€ï¼Œéœ€æŒ‡å®š</span>
Â  Â  ),
Â  Â  <span class="hljs-attr">formatter</span>=OllamaChatFormatter(),
Â  Â  <span class="hljs-attr">toolkit</span>=toolkit,
Â  Â  <span class="hljs-attr">memory</span>=InMemoryMemory(),
)
</code></pre>
<h4 data-id="heading-23">å°ç»“</h4>
<p>æ‰‹å†™ä»£ç éœ€è‡ªè¡Œå®ç°æ¶ˆæ¯ç®¡ç†å’Œä¸Šä¸‹æ–‡ä¼ é€’ï¼Œå·¥ä½œé‡å¤§ä¸”éœ€è¦æ‰‹åŠ¨ç»´æŠ¤ã€‚æ¡†æ¶æä¾›å¤šæ ·åŒ–è®°å¿†ç»„ä»¶ï¼Œæ”¯æŒå¯¹è¯ä¸Šä¸‹æ–‡çš„çµæ´»ç®¡ç†ï¼Œé€‚é…ä¸åŒå¯¹è¯åœºæ™¯ï¼Œæœ‰æ•ˆæå‡å¯¹è¯è´¨é‡ã€‚</p>
<h2 data-id="heading-24"><strong>å¤šæ™ºèƒ½ä½“åä½œå¯¹æ¯”</strong></h2>
<p>è‡ªä»Googleæå‡ºA2Aåè®®ï¼Œå¤šæ™ºèƒ½ä½“åä½œå·²ç»æˆä¸ºä¸šç•Œå®è·µè¿‡ç¨‹çš„çƒ­ç‚¹ï¼Œä¸ºè¿›ä¸€æ­¥å¯¹æ¯”æ‰‹å†™ä»£ç å’Œå¼€å‘æ¡†æ¶åœ¨å¤šAgentåä½œä¸Šçš„åŒºåˆ«ï¼Œæˆ‘ä»¬å°†æœ¬æ¡ˆä¾‹çš„ç¨‹åºè®¾è®¡æ‹†åˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªAgentï¼š</p>
<p>1ã€SQL Agent</p>
<ul>
<li>è°ƒç”¨å¤–éƒ¨è¯­ä¹‰æ£€ç´¢(RAG)APIåŒ¹é…å…ƒæ•°æ®</li>
<li>è°ƒç”¨å¤§æ¨¡å‹æ ¹æ®å…ƒæ•°æ®å’Œç”¨æˆ·æé—®ç”ŸæˆæŸ¥æ•°SQL</li>
<li>è°ƒç”¨æŸ¥æ•°APIæŸ¥è¯¢æ•°æ®</li>
</ul>
<p>2ã€Analysis Agent</p>
<ul>
<li>è°ƒç”¨å¤§æ¨¡å‹åˆ†ææ•°æ®å›ç­”é—®é¢˜</li>
</ul>
<h4 data-id="heading-25">1ã€æ‰‹å†™ä»£ç </h4>
<p>éœ€è¦æ‰‹åŠ¨ä¸²è”å¤šä¸ªAgentè°ƒç”¨ï¼Œæ¶ˆæ¯æ ¼å¼è‡ªå®šä¹‰ä¼ é€’ï¼š</p>
<pre><code class="hljs language-python" lang="python">...
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">workflow</span>(<span class="hljs-params">user_input</span>):
Â  Â Â <span class="hljs-comment"># 1 - SQL Agent</span>
Â  Â  result = sql_agent(user_input)
Â  Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-keyword">not</span>Â result.success:
Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">None</span>
Â  Â Â <span class="hljs-comment"># 2 - Analysis Agent</span>
Â  Â Â <span class="hljs-keyword">return</span>Â analysis_agent(user_input, result.data)
Â  Â  ...
</code></pre>
<h4 data-id="heading-26">2ã€LangChainæ¡†æ¶</h4>
<p>åŸç”Ÿä»…æ”¯æŒå•ä½“Agentï¼Œå¤šAgentéœ€è¦æ‰‹åŠ¨ä¸²è”ï¼Œå®ç°ç±»ä¼¼æ‰‹å†™ä»£ç ã€‚</p>
<h4 data-id="heading-27">3ã€QwenAgentæ¡†æ¶</h4>
<p>åŸç”Ÿä»…æ”¯æŒå•ä½“Agentï¼Œå¤šAgentéœ€è¦æ‰‹åŠ¨ä¸²è”ï¼Œå®ç°ç±»ä¼¼åŒæ‰‹å†™ä»£ç ã€‚</p>
<h4 data-id="heading-28">4ã€AgentScopeæ¡†æ¶</h4>
<p>åŸºäºAgentScopeæ¡†æ¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠÂ SQLAgentÂ å’ŒÂ AnalysisAgentÂ å°è£…ä¸º ä¸¤ä¸ªæ™ºèƒ½ä½“ï¼ˆå‡ç»§æ‰¿ AgentBaseï¼‰ï¼Œç„¶åä¸¤ä¸ªæ™ºèƒ½ä½“çš„åä½œä½¿ç”¨é¡ºåºç®¡é“sequential_pipelineæ¥ä¸²è”ï¼Œå®ç°â€œå¤šæ™ºèƒ½ä½“ä»»åŠ¡æµè½¬â€ã€‚</p>
<p>AgentScope ä¸­çš„ä¸»è¦ç®¡é“ç±»å‹åŒ…æ‹¬ï¼š</p>















































<table><thead><tr><th>ç®¡é“å‡½æ•°</th><th>ç±»å‹</th><th>ä½œç”¨</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>sequential_pipeline</td><td>ä¸²è¡Œ</td><td>æŒ‰é¡ºåºæ‰§è¡Œå¤šä¸ª Agentï¼ˆA â†’ B â†’ Cï¼‰</td><td>ç®€å•ã€å¯æ§ã€å¸¸ç”¨äºä»»åŠ¡é“¾</td></tr><tr><td>parallel_pipeline</td><td>å¹¶è¡Œ</td><td>åŒæ—¶è®©å¤šä¸ª Agent å¤„ç†åŒä¸€æ¶ˆæ¯</td><td>é«˜æ€§èƒ½ã€é€‚åˆæ„è§æ±‡æ€»æˆ–å¯¹æ¯”</td></tr><tr><td>broadcast_pipeline</td><td>å¹¿æ’­</td><td>å°†ä¸€æ¡æ¶ˆæ¯å‘é€ç»™å¤šä¸ª Agentï¼Œä½†æ¯ä¸ªç‹¬ç«‹å›å¤</td><td>ä¸ç­‰å¾…æ‰€æœ‰è¿”å›ï¼Œå¯å¼‚æ­¥</td></tr><tr><td>loop_pipeline</td><td>å¾ªç¯</td><td>å°†ä¸Šä¸€æ¬¡è¾“å‡ºä½œä¸ºä¸‹ä¸€è½®è¾“å…¥ï¼Œç›´åˆ°æ»¡è¶³æ¡ä»¶åœæ­¢</td><td>é€‚åˆå¤šè½®åä½œï¼ˆä¾‹å¦‚æ€è€ƒ-æ”¹è¿›å¾ªç¯ï¼‰</td></tr><tr><td>conditional_pipeline</td><td>æ¡ä»¶åˆ†æ”¯</td><td>æ ¹æ®æ¶ˆæ¯æˆ– Agent è¾“å‡ºåŠ¨æ€é€‰æ‹©ä¸‹ä¸€ä¸ª Agent</td><td>é€‚åˆå¤æ‚å†³ç­–æµ</td></tr><tr><td>MsgHub</td><td>ç®¡é“</td><td>ä¸­å¿ƒåŒ–æ¶ˆæ¯è°ƒåº¦ å¤š Agent é€šè¿‡æ¶ˆæ¯ä¸­å¿ƒå¼‚æ­¥é€šä¿¡</td><td>å®ç°å‘å¸ƒ-è®¢é˜…ã€ç¾¤èŠæ¨¡å¼</td></tr></tbody></table>
<p>è¿™å‡ ç§ç®¡é“åä½œæ¨¡å¼ï¼Œå…·ä½“å®è·µæ•¬è¯·æœŸå¾…ä¸‹ç¯‡æ–‡ç« åˆ†äº«ã€‚</p>
<h4 data-id="heading-29">å°ç»“</h4>
<p>æ‰‹å†™ä»£ç å¤šä¸ºçº¿æ€§è°ƒç”¨ï¼Œç¼ºä¹å¹¶è¡Œå’Œå¤æ‚è°ƒåº¦èƒ½åŠ›ã€‚AgentScopeæ¡†æ¶æ”¯æŒå¤šAgentå¹¶è¡Œã€æ¡ä»¶åˆ†æ”¯ã€æ¶ˆæ¯å¹¿æ’­ç­‰å¤æ‚ç®¡é“æ¨¡å¼ï¼Œé€‚åˆæ„å»ºå¤æ‚çš„å¤šæ™ºèƒ½ä½“åä½œç³»ç»Ÿã€‚å…¶ä»–æ¡†æ¶éƒ½éœ€è¦æ‰‹åŠ¨ç»„åˆå®ç°ã€‚</p>
<h2 data-id="heading-30"><strong>å¯¹æ¯”æ€»ç»“</strong></h2>
<p>é€šè¿‡ä»¥ä¸Šå¯¹æ¯”æ¥çœ‹ï¼Œåœ¨æ—¥å¸¸æ™ºèƒ½ä½“å¼€å‘ä¸­ï¼Œå°¤å…¶æ˜¯éœ€è¦å¤šè½®å¯¹è¯ã€å®ç°å¤šå·¥å…·è°ƒç”¨å’Œå¤šæ™ºèƒ½ä½“åä½œæ—¶ï¼Œå‡ ç§å¼€å‘æ¡†æ¶ç¡®å®æä¾›äº†æå¤§çš„ä¾¿åˆ©å’Œæ‰©å±•èƒ½åŠ›ï¼Œå¤§å¹…é™ä½å¼€å‘é—¨æ§›å’Œç»´æŠ¤æˆæœ¬ï¼Œè€Œæ‰‹å†™ä»£ç åˆ™é€‚åˆé«˜åº¦å®šåˆ¶åŒ–éœ€æ±‚ï¼Œçµæ´»æ€§æœ€é«˜ã€‚</p>
<h3 data-id="heading-31"><strong>åŠŸèƒ½ç»´åº¦å¯¹æ¯”</strong></h3>






















































<table><thead><tr><th>åŠŸèƒ½æ¨¡å—</th><th>æ‰‹å†™ä»£ç </th><th>LangChain</th><th>Qwen-Agent</th><th>AgentScope</th></tr></thead><tbody><tr><td>ğŸ”— ä¸šåŠ¡æµç¨‹ç¼–æ’</td><td>âšªï¸ éœ€æ‰‹åŠ¨ä¸²è”</td><td>âœ… å¤šç§Chainä¸²è”ï¼Œå¼ºæ”¯æŒ</td><td>âšªï¸ ä¾é æç¤ºè¯æŒ‡å®šä¸šåŠ¡æµç¨‹</td><td>âšªï¸ ä¾é æç¤ºè¯æŒ‡å®šä¸šåŠ¡æµç¨‹</td></tr><tr><td>ğŸŒ æ¨¡å‹è°ƒç”¨ï¼ˆLLMï¼‰</td><td>âšªï¸ httpè°ƒç”¨æˆ–å®˜æ–¹åŒ…</td><td>âœ… æ”¯æŒå¹¿æ³›</td><td>âœ… åŸç”Ÿä¼˜åŒ–</td><td>âœ… å¯è‡ªå®šä¹‰é€‚é…å™¨</td></tr><tr><td>ğŸ§° å·¥å…·è°ƒç”¨ï¼ˆToolï¼‰</td><td>âšªï¸ éœ€æ‰‹åŠ¨è°ƒç”¨</td><td>âœ… è‡ªç”±å®šä¹‰Tool/ç»„åˆTool</td><td>âœ… åŸç”Ÿæ”¯æŒ</td><td>âœ… é€šè¿‡ Agent å·¥å…·åŒ–</td></tr><tr><td>ğŸ’¬ è®°å¿†ï¼ˆMemoryï¼‰</td><td>âšªï¸ éœ€æ‰‹åŠ¨ç®¡ç†</td><td>âœ… å¤šç§ç±»å‹ï¼ˆBuffer/Entityï¼‰</td><td>âšªï¸ éœ€æ‰‹åŠ¨ç®¡ç†</td><td>âœ… ä¸Šä¸‹æ–‡å…±äº«MsgHubç­‰</td></tr><tr><td>ğŸ‘¥ å¤š Agent åä½œ</td><td>âšªï¸ éœ€æ‰‹åŠ¨ä¸²è”</td><td>âšªï¸ å¯é€šè¿‡æ‰‹åŠ¨ç»„åˆå®ç°</td><td>âšªï¸ å¯é€šè¿‡æ‰‹åŠ¨ç»„åˆå®ç°</td><td>âœ… æ¡†æ¶æ ¸å¿ƒåŠŸèƒ½(å¤šç®¡é“)</td></tr><tr><td>ğŸ”§ æ’ä»¶ç”Ÿæ€</td><td>âšªï¸ éœ€è‡ªå®šä¹‰è°ƒç”¨</td><td>âœ… åºå¤§ï¼ˆç¤¾åŒºå¤šï¼‰</td><td>âšªï¸ æ—©æœŸé˜¶æ®µ</td><td>âšªï¸ é€æ­¥æ‰©å±•ä¸­</td></tr></tbody></table>
<h3 data-id="heading-32"><strong>é€‰å‹å»ºè®®</strong></h3>



































<table><thead><tr><th>ä½¿ç”¨åœºæ™¯</th><th>æ¨èæ¡†æ¶</th><th>ç†ç”±</th></tr></thead><tbody><tr><td>æ„å»ºé€šç”¨ RAG / QA ç³»ç»Ÿ</td><td>LangChain</td><td>ç”Ÿæ€æˆç†Ÿã€æ’ä»¶ä¸°å¯Œ</td></tr><tr><td>æ„å»º Qwen ç³»åˆ—ä¸“ç”¨ Agent</td><td>Qwen-Agent</td><td>æ¥å£æœ€å‹å¥½ã€é›†æˆæœ€ç®€å•</td></tr><tr><td>æ„å»ºå¤šè§’è‰²åä½œç³»ç»Ÿï¼ˆPlanner + Coder + Criticï¼‰</td><td>AgentScope</td><td>ä¸“ä¸ºå¤š Agent åä½œè®¾è®¡</td></tr><tr><td>åšç ”ç©¶å‹å®éªŒ / å¿«é€ŸåŸå‹</td><td>Qwen-Agent / LangChain</td><td>å¼€å‘å¿«ã€æ–‡æ¡£é½å…¨</td></tr><tr><td>åšå·¥ä¸šçº§å¤šæ™ºèƒ½ä½“è°ƒåº¦ç³»ç»Ÿ</td><td>AgentScope</td><td>ä»»åŠ¡åè°ƒã€ä¸Šä¸‹æ–‡å…±äº«æ›´å¼º</td></tr></tbody></table>
<p>å½“ç„¶ï¼Œå½“æˆ‘ä»¬å…¨å®šåˆ¶åŒ–å¼€å‘ï¼Œè¿˜æ˜¯æ‰‹å†™ä»£ç æ›´åŠ åˆé€‚ã€‚</p>
<p>ğŸ”¹ <strong>LangChain</strong>ï¼šé€‚åˆä½ æ­å»ºä»»ä½•å•ä½“æ™ºèƒ½ä½“ç³»ç»Ÿï¼ˆRAGã€SQLã€å·¥å…·è°ƒç”¨ï¼‰ã€‚</p>
<p>ğŸ”¹ <strong>Qwen-Agent</strong>ï¼šé€‚åˆå¿«é€Ÿæ„å»ºâ€œåŸºäº Qwen æ¨¡å‹â€çš„é—®ç­”æˆ–åŠ©æ‰‹ã€‚</p>
<p>ğŸ”¹ <strong>AgentScope</strong>ï¼šé€‚åˆç ”ç©¶æˆ–å®ç°<strong>å¤šæ™ºèƒ½ä½“åä½œç³»ç»Ÿ</strong>ï¼ˆPlannerã€Coderã€Critic ç­‰è§’è‰²è”åŠ¨ï¼‰ã€‚</p>
<p>ğŸ”¹ <strong>æ‰‹å†™ä»£ç ï¼š</strong> é«˜åº¦å®šåˆ¶åŒ–å¼€å‘ï¼Œå½“æˆ‘ä»¬çš„æ‰‹å†™ä»£ç é€æ­¥æŠ½è±¡å®Œå–„ï¼Œä½¿ç”¨çš„é¢‘ç‡å¤šäº†ï¼Œå°±æˆäº†æ¡†æ¶ï¼</p>
<p>æœ¬æ–‡æ€»ç»“ï¼šæœ¬æ–‡é€šè¿‡è®¾è®¡é«˜è€ƒä¿¡æ¯æŸ¥è¯¢æ™ºèƒ½åŠ©æ‰‹çš„ä¸šåŠ¡åœºæ™¯ï¼Œåˆ†åˆ«é‡‡ç”¨æ‰‹å†™ä»£ç å’Œä¸»æµæ™ºèƒ½ä½“æ¡†æ¶ï¼ˆLangChainã€QwenAgentã€AgentScopeï¼‰è¿›è¡Œäº†å®ç°ä¸æ¯”è¾ƒã€‚æˆ‘ä»¬ä»ä¸šåŠ¡æµç¨‹ç¼–æ’ã€æ¨¡å‹è°ƒç”¨ã€å·¥å…·é›†æˆã€ä¸Šä¸‹æ–‡è®°å¿†ç®¡ç†ä»¥åŠå¤šæ™ºèƒ½ä½“åä½œç­‰å¤šä¸ªç»´åº¦è¿›è¡Œæ·±å…¥åˆ†æï¼Œå¯¹æ¯”æ‰‹å†™ä»£ç ä¸æ¡†æ¶è°ƒç”¨çš„å¼‚åŒã€‚</p>
<p>æœ¬æ–‡ä½œè€…ï¼šChaiys</p>
<p>æœ¬æ–‡åŸè½½ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FusHSax8to_VNhnWMZHX6bA" target="_blank" title="https://mp.weixin.qq.com/s/usHSax8to_VNhnWMZHX6bA" ref="nofollow noopener noreferrer">å…¬ä¼—å·â€œæœ¨æ˜†å­è®°å½•AIâ€</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Androidè½¦æœºä»£é©¾æ¨¡å¼é»‘å±ä¹‹è°œï¼šä¸€æ¬¡STRå”¤é†’é—®é¢˜çš„æ·±åº¦å‰–æ]]></title>    <link>https://juejin.cn/post/7591655106724560896</link>    <guid>https://juejin.cn/post/7591655106724560896</guid>    <pubDate>2026-01-05T14:03:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591655106724560896" data-draft-id="7591515844867506210" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Androidè½¦æœºä»£é©¾æ¨¡å¼é»‘å±ä¹‹è°œï¼šä¸€æ¬¡STRå”¤é†’é—®é¢˜çš„æ·±åº¦å‰–æ"/> <meta itemprop="keywords" content="æ€§èƒ½ä¼˜åŒ–,Android,Debug"/> <meta itemprop="datePublished" content="2026-01-05T14:03:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Androidè½¦æœºä»£é©¾æ¨¡å¼é»‘å±ä¹‹è°œï¼šä¸€æ¬¡STRå”¤é†’é—®é¢˜çš„æ·±åº¦å‰–æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T14:03:49.000Z" title="Mon Jan 05 2026 14:03:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<blockquote>
<p>"è¦æ˜¯å½“åˆçŸ¥é“ä»£é©¾æ¨¡å¼ä¼šè§¦å‘ç”¨æˆ·åˆ‡æ¢å°±å¥½äº†..." â€”â€” æŸä½è°ƒäº†ä¸‰å¤©bugçš„æˆ‘</p>
</blockquote>
<p>ä½œä¸ºä¸€åAndroidè½¦æœºç³»ç»Ÿå·¥ç¨‹å¸ˆï¼Œæˆ‘é‡åˆ°è¿‡å„ç§å¥‡æ€ªçš„é—®é¢˜ï¼Œä½†è¿™æ¬¡çš„é»‘å±é—®é¢˜ç€å®è®©äººæ‘¸ä¸ç€å¤´è„‘ã€‚ç”¨æˆ·åé¦ˆï¼šä»£é©¾æ¨¡å¼ä¸‹é”è½¦ä¼‘çœ åå¯åŠ¨è½¦è¾†ï¼Œæ¡Œé¢ä¼šçŸ­æš‚é»‘å±6-8ç§’ã€‚100%å¤ç°ï¼Œå½±å“ç”¨æˆ·ä½“éªŒï¼Œå¿…é¡»é©¬ä¸Šè§£å†³ã€‚</p>
<p>æœ¬æ–‡å°†å¸¦ä½ èµ°è¿›è¿™æ¬¡é—®é¢˜åˆ†æçš„å…¨è¿‡ç¨‹ï¼Œä»æ—¥å¿—æ”¶é›†ã€æ—¶åºåˆ†æã€åˆ°æ ¹å› å®šä½ã€å†åˆ°è§£å†³æ–¹æ¡ˆè®¾è®¡ã€‚ä½ å°†çœ‹åˆ°ï¼š</p>
<ul>
<li>å¦‚ä½•ç³»ç»Ÿæ€§åœ°åˆ†æAndroidç³»ç»Ÿé—®é¢˜</li>
<li>STRï¼ˆSuspend To RAMï¼‰å”¤é†’æœºåˆ¶çš„å·¥ä½œåŸç†</li>
<li>Androidå¤šç”¨æˆ·åˆ‡æ¢æ—¶çš„çª—å£ç®¡ç†ç»†èŠ‚</li>
<li>FallbackHomeçš„"å‰¯ä½œç”¨"</li>
<li>ä¸‰ç§ä¸åŒå±‚æ¬¡çš„è§£å†³æ–¹æ¡ˆè®¾è®¡</li>
</ul>
<p><strong>ğŸ“· [é—®é¢˜ç°è±¡æˆªå›¾]</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10cfa5aa71e1496d837f39e0c1f5a620~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768226628&amp;x-signature=3%2BCI6guVF1Uf4Pathte6mSgiydA%3D" alt="case6-black-from-str.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">é—®é¢˜èƒŒæ™¯</h2>
<h3 data-id="heading-2">é—®é¢˜æè¿°</h3>
<p><strong>å‰ææ¡ä»¶</strong>: è½¦è¾†å¤„äºä»£é©¾æ¨¡å¼ï¼ˆChauffeurModeï¼‰</p>
<p><strong>å¤ç°æ­¥éª¤</strong>:</p>
<ol>
<li>å¯ç”¨ä»£é©¾æ¨¡å¼</li>
<li>é”è½¦ï¼Œè§¦å‘STRä¼‘çœ </li>
<li>å¯åŠ¨è½¦è¾†å”¤é†’</li>
</ol>
<p><strong>å®é™…è¡¨ç°</strong>: æ¡Œé¢å‡ºç°æ˜æ˜¾é»‘å±ï¼ŒæŒç»­6-8ç§’åæ¢å¤æ­£å¸¸</p>
<p><strong>å‘ç”Ÿæ¦‚ç‡</strong>: 2/2 (100%å¤ç°)</p>
<h3 data-id="heading-3">ä»€ä¹ˆæ˜¯ä»£é©¾æ¨¡å¼ï¼Ÿ</h3>
<p>ä»£é©¾æ¨¡å¼(ChauffeurMode)æ˜¯è½¦æœºç³»ç»Ÿçš„ä¸€ä¸ªç‰¹æ®ŠåŠŸèƒ½ã€‚å½“è½¦ä¸»éœ€è¦ä»£é©¾æœåŠ¡æ—¶ï¼Œå¯ç”¨æ­¤æ¨¡å¼å¯ä»¥ï¼š</p>
<ul>
<li>åˆ‡æ¢åˆ°è®¿å®¢ç”¨æˆ·ç¯å¢ƒï¼Œä¿æŠ¤è½¦ä¸»éšç§</li>
<li>é™åˆ¶ä»£é©¾äººå‘˜è®¿é—®æ•æ„Ÿæ•°æ®å’ŒåŠŸèƒ½</li>
<li>è®°å½•ä»£é©¾æœŸé—´çš„è¡Œè½¦è½¨è¿¹</li>
</ul>
<p>ç®€å•ç†è§£ï¼Œå°±åƒæ‰‹æœºçš„"è®¿å®¢æ¨¡å¼"ï¼Œä½†åº”ç”¨åœ¨è½¦æœºåœºæ™¯ã€‚</p>
<h3 data-id="heading-4">ä»€ä¹ˆæ˜¯STRï¼Ÿ</h3>
<p>STR (Suspend To RAM) æ˜¯ä¸€ç§ä¼‘çœ æ¨¡å¼ï¼Œç±»ä¼¼äºç¬”è®°æœ¬ç”µè„‘çš„"ç¡çœ "çŠ¶æ€ï¼š</p>
<ul>
<li>ç³»ç»ŸçŠ¶æ€ä¿å­˜åœ¨å†…å­˜ä¸­</li>
<li>CPUå’Œå¤§éƒ¨åˆ†å¤–è®¾æ–­ç”µ</li>
<li>å”¤é†’é€Ÿåº¦å¿«ï¼ˆé€šå¸¸1-2ç§’ï¼‰</li>
<li>åŠŸè€—æä½</li>
</ul>
<p>è½¦æœºç³»ç»Ÿåœ¨é”è½¦åä¼šè¿›å…¥STRæ¨¡å¼ä»¥èŠ‚çœç”µé‡ã€‚</p>
<hr/>
<h2 data-id="heading-5">åˆæ­¥åˆ†æï¼šæ—¥å¿—åœ¨è¯´ä»€ä¹ˆ</h2>
<h3 data-id="heading-6">æ—¶é—´çº¿é‡æ„</h3>
<p>é€šè¿‡ç­›é€‰æ—¥å¿—ï¼Œæˆ‘é‡æ„å‡ºäº†æ•´ä¸ªäº‹ä»¶çš„æ—¶é—´çº¿ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02bc79c9a1164ce08847d2491c833ac1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768226628&amp;x-signature=yFVfA5TfdGT8M7Vs2I8Cgg0mGi4%3D" alt="case6-str-wakeup-timeline.png" loading="lazy"/></p>
<p><em>å›¾1: STRå”¤é†’ä¸é»‘å±å‘ç”Ÿçš„å®Œæ•´æ—¶åº</em></p>


















































<table><thead><tr><th align="left">æ—¶é—´æˆ³</th><th align="left">äº‹ä»¶</th><th align="left">å…³é”®æ—¥å¿—</th></tr></thead><tbody><tr><td align="left">14:34:39.000</td><td align="left">STRå”¤é†’å¼€å§‹</td><td align="left">ç³»ç»Ÿå¼€å§‹å“åº”å”¤é†’ä¿¡å·</td></tr><tr><td align="left">14:34:40.624</td><td align="left">STRé€€å‡ºå®Œæˆ</td><td align="left"><code>exit_str_vehiclehal</code></td></tr><tr><td align="left">14:34:42.503</td><td align="left">Launcheré¦–æ¬¡å¯åŠ¨å®Œæˆ</td><td align="left"><code>wm_activity_launch_time: 744ms</code></td></tr><tr><td align="left">14:34:46.817</td><td align="left"><strong>è§¦å‘ç”¨æˆ·åˆ‡æ¢</strong></td><td align="left"><code>switchUserByCarUserManager 12 success</code></td></tr><tr><td align="left">14:34:50.169</td><td align="left"><strong>FallbackHomeå¯åŠ¨</strong></td><td align="left"><strong>âš ï¸ é»‘å±å¼€å§‹</strong></td></tr><tr><td align="left">14:34:51.293</td><td align="left">åŸLauncheré”€æ¯</td><td align="left"><code>destroySurfaces</code></td></tr><tr><td align="left">14:34:52.763</td><td align="left">æ–°Launcheråˆå§‹åŒ–</td><td align="left"><code>LauncherApplication: onCreate</code></td></tr><tr><td align="left">~14:34:56</td><td align="left">æ–°Launcherå®Œæˆ</td><td align="left">é»‘å±ç»“æŸ</td></tr></tbody></table>
<p><strong>å…³é”®å‘ç°</strong>: ä» <code>14:34:42</code> Launcheré¦–æ¬¡å¯åŠ¨ï¼Œåˆ° <code>14:34:46</code> æ‰è§¦å‘ç”¨æˆ·åˆ‡æ¢ï¼Œè¿™ä¸­é—´ä¸ºä»€ä¹ˆè¦å…ˆå¯åŠ¨ä¸€æ¬¡Launcherï¼Ÿ</p>
<h3 data-id="heading-7">å…³é”®æ—¥å¿—æ‘˜å½•</h3>
<p>è®©æˆ‘ä»¬çœ‹çœ‹å‡ æ®µå…³é”®æ—¥å¿—ï¼š</p>
<p><strong>1. ä»£é©¾æ¨¡å¼çŠ¶æ€æ£€æµ‹</strong></p>
<pre><code class="hljs language-log" lang="log">12-18 14:34:39.021  4842  4842 I ChauffeurManager: PROP_CHAUFFEUR_MODE: modeï¼š1,time:1766039095792,type:0
12-18 14:34:39.218  4842  4842 D ChauffeurModeService: UsageManager disignated_driver_mode: [state -&gt; 1]
</code></pre>
<p>ç³»ç»Ÿæ£€æµ‹åˆ°ä»£é©¾æ¨¡å¼å¤„äºå¯ç”¨çŠ¶æ€ï¼ˆ<code>mode: 1</code>ï¼‰ã€‚</p>
<p><strong>2. Launcheré¦–æ¬¡å¯åŠ¨ï¼ˆuserId=10ï¼‰</strong></p>
<pre><code class="hljs language-log" lang="log">12-18 14:34:42.503  2717  2749 I wm_activity_launch_time: [10,254202022,com.android.launcher/.main.LauncherActivity,744]
</code></pre>
<p>æ™®é€šç”¨æˆ·(userId=10)çš„Launcherå¯åŠ¨ï¼Œè€—æ—¶744msã€‚æ­¤æ—¶å±å¹•åº”è¯¥å·²ç»å¯è§ã€‚</p>
<p><strong>3. ç”¨æˆ·åˆ‡æ¢è§¦å‘</strong></p>
<pre><code class="hljs language-log" lang="log">12-18 14:34:46.817  4716  5601 I UserOperateManager: switchUserByCarUserManager 12 success
</code></pre>
<p>4ç§’åæ‰è§¦å‘ç”¨æˆ·åˆ‡æ¢ï¼Œä»userId=10åˆ‡æ¢åˆ°userId=12ï¼ˆè®¿å®¢ç”¨æˆ·/ä»£é©¾ç”¨æˆ·ï¼‰ã€‚</p>
<p><strong>4. FallbackHomeç™»åœº</strong></p>
<pre><code class="hljs language-log" lang="log">12-18 14:34:50.169  2717  2750 I ActivityTaskManager: START u12 {cat=[android.intent.category.HOME] cmp=com.android.car.settings/.FallbackHome}
</code></pre>
<p>ç³»ç»Ÿå¯åŠ¨FallbackHomeä½œä¸ºä¸´æ—¶Homeç•Œé¢ï¼Œè¿™å°±æ˜¯é»‘å±çš„"å…ƒå‡¶"ï¼</p>
<p><strong>5. åŸLauncherè¢«é”€æ¯</strong></p>
<pre><code class="hljs language-log" lang="log">12-18 14:34:50.181  2717  2750 I wm_pause_activity: [10,254202022,com.android.launcher/.main.LauncherActivity,userLeaving=true]
12-18 14:34:51.293  2717  5506 E WindowManager: win=Window{ae1f8e7 u10 com.android.launcher/...LauncherActivity} destroySurfaces: appStopped=true
</code></pre>
<p>åŸç”¨æˆ·çš„Launcherè¢«æš‚åœå¹¶é”€æ¯çª—å£ã€‚</p>
<hr/>
<h2 data-id="heading-8">æ·±å…¥æ¢ç©¶ï¼šä¸ºä»€ä¹ˆä¼šé»‘å±ï¼Ÿ</h2>
<h3 data-id="heading-9">ç”¨æˆ·åˆ‡æ¢æµç¨‹åˆ†æ</h3>
<p>è®©æˆ‘ä»¬ç”¨æµç¨‹å›¾æ¥ç†è§£æ•´ä¸ªç”¨æˆ·åˆ‡æ¢è¿‡ç¨‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fddc2dd1c9b41fbb7a1092646588947~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768226628&amp;x-signature=A52dic1ngv6AVEW%2Fj8t3fz14IhQ%3D" alt="case6-user-switch-flow.png" loading="lazy"/></p>
<p><em>å›¾2: ä»£é©¾æ¨¡å¼ç”¨æˆ·åˆ‡æ¢çš„å®Œæ•´æµç¨‹</em></p>
<p>æµç¨‹è§£æï¼š</p>
<ol>
<li><strong>STRå”¤é†’</strong> â†’ ç³»ç»Ÿæ¢å¤åˆ°æ™®é€šç”¨æˆ·(userId=10)</li>
<li><strong>Launcherå¯åŠ¨</strong> â†’ userId=10çš„Launcheræ­£å¸¸å¯åŠ¨ï¼Œæ­¤æ—¶å±å¹•å¯è§</li>
<li><strong>æ£€æµ‹åˆ°ä»£é©¾æ¨¡å¼</strong> â†’ ç³»ç»Ÿå‘ç°éœ€è¦åˆ‡æ¢åˆ°è®¿å®¢ç”¨æˆ·</li>
<li><strong>æš‚åœåŸLauncher</strong> â†’ åœæ­¢å¹¶é”€æ¯userId=10çš„Launcher</li>
<li><strong>å¯åŠ¨FallbackHome</strong> â†’ ä¸´æ—¶å ä½ç•Œé¢ï¼Œ<strong>é»‘å±å¼€å§‹</strong></li>
<li><strong>æ–°Launcheråˆå§‹åŒ–</strong> â†’ userId=12çš„Launcherä»å¤´å¼€å§‹åŠ è½½</li>
<li><strong>ç•Œé¢æ¢å¤</strong> â†’ æ–°Launcherå‡†å¤‡å°±ç»ªï¼Œé»‘å±ç»“æŸ</li>
</ol>
<h3 data-id="heading-10">FallbackHomeæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p><code>FallbackHome</code> æ˜¯Androidç³»ç»Ÿçš„ä¸€ä¸ªå†…ç½®ç»„ä»¶ï¼Œå®šä¹‰åœ¨ <code>com.android.car.settings/.FallbackHome</code>ã€‚</p>
<p>å®ƒçš„ä½œç”¨æ˜¯ï¼š</p>
<ul>
<li>åœ¨ç”¨æˆ·ç¯å¢ƒæœªå‡†å¤‡å¥½æ—¶æä¾›ä¸´æ—¶å ä½ç•Œé¢</li>
<li>é€šå¸¸æ˜¯ä¸€ä¸ªçº¯é»‘æˆ–çº¯ç™½çš„ç®€å•ç•Œé¢</li>
<li>ç­‰å¾…çœŸæ­£çš„Launcherå‡†å¤‡å®Œæˆåè‡ªåŠ¨é€€å‡º</li>
</ul>
<p>åœ¨æ­£å¸¸çš„é¦–æ¬¡å¼€æœºåœºæ™¯ï¼ŒFallbackHomeçš„å­˜åœ¨å¾ˆåˆç†ã€‚ä½†åœ¨STRå”¤é†’+ç”¨æˆ·åˆ‡æ¢åœºæ™¯ä¸‹ï¼Œå®ƒæˆäº†"é»‘å±å…ƒå‡¶"ã€‚</p>
<h3 data-id="heading-11">æ ¹å› æ¶æ„å›¾</h3>
<p>è®©æˆ‘ä»¬ä»ç³»ç»Ÿæ¶æ„çš„è§’åº¦çœ‹è¿™ä¸ªé—®é¢˜ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0818ce84fe8242d5bd17d3725fddd30b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768226628&amp;x-signature=VY7oZKV0hVp%2FLpjemPJAlD%2FleB8%3D" alt="case6-root-cause-architecture.png" loading="lazy"/></p>
<p><em>å›¾3: é—®é¢˜æ ¹å› çš„ç³»ç»Ÿæ¶æ„è§†å›¾</em></p>
<p><strong>é—®é¢˜é“¾æ¡</strong>:</p>
<ol>
<li><code>ChauffeurModeService</code> æ£€æµ‹åˆ°ä»£é©¾æ¨¡å¼å¯ç”¨</li>
<li>è§¦å‘ <code>UserManager</code> è¿›è¡Œç”¨æˆ·åˆ‡æ¢</li>
<li><code>ActivityTaskManager</code> &amp; <code>WindowManager</code> å“åº”ç”¨æˆ·åˆ‡æ¢ï¼š
<ul>
<li>æš‚åœå¹¶é”€æ¯åŸLauncherï¼ˆuserId=10ï¼‰</li>
<li>å¯åŠ¨FallbackHomeï¼ˆuserId=12ï¼‰ä¸´æ—¶å ä½</li>
<li>åˆå§‹åŒ–æ–°Launcherï¼ˆuserId=12ï¼‰</li>
</ul>
</li>
<li>åœ¨æ­¥éª¤3çš„è¿‡ç¨‹ä¸­ï¼Œç”¨æˆ·çœ‹åˆ°çš„æ˜¯FallbackHomeçš„é»‘å±ç•Œé¢</li>
</ol>
<h3 data-id="heading-12">ä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥åˆ‡æ¢ï¼Ÿ</h3>
<p>ä½ å¯èƒ½ä¼šé—®ï¼šä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥ä»æ—§Launcheråˆ‡æ¢åˆ°æ–°Launcherï¼Œè€Œè¦ç»è¿‡FallbackHomeè¿™ä¸€æ­¥ï¼Ÿ</p>
<p>åŸå› åœ¨äºAndroidçš„å¤šç”¨æˆ·æœºåˆ¶è®¾è®¡ï¼š</p>
<ul>
<li>æ¯ä¸ªç”¨æˆ·æœ‰ç‹¬ç«‹çš„æ•°æ®ç›®å½•å’Œåº”ç”¨å®ä¾‹</li>
<li>æ–°ç”¨æˆ·çš„Launcheréœ€è¦å®Œæ•´çš„åˆå§‹åŒ–è¿‡ç¨‹</li>
<li>åˆå§‹åŒ–æœŸé—´å¿…é¡»æœ‰ç•Œé¢å ä½ï¼Œå¦åˆ™ç³»ç»Ÿä¼šé™·å…¥"æ— Home"çŠ¶æ€</li>
</ul>
<p>FallbackHomeå°±æ˜¯è¿™ä¸ª"å ä½ç¬¦"ï¼Œä¿è¯ç³»ç»Ÿå§‹ç»ˆæœ‰ä¸€ä¸ªå¯ç”¨çš„Homeç•Œé¢ã€‚</p>
<hr/>
<h2 data-id="heading-13">è§£å†³æ–¹æ¡ˆï¼šä¸‰ä¸ªå±‚æ¬¡çš„æ€è€ƒ</h2>
<p>é¢å¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘è®¾è®¡äº†ä¸‰ä¸ªå±‚æ¬¡çš„è§£å†³æ–¹æ¡ˆï¼Œä»æ ¹æœ¬æ€§è§£å†³åˆ°ç”¨æˆ·ä½“éªŒæ”¹å–„ã€‚</p>
<h3 data-id="heading-14">æ–¹æ¡ˆä¸€ï¼šä¼˜åŒ–ç”¨æˆ·åˆ‡æ¢æ—¶åºï¼ˆæ¨èï¼‰â­</h3>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>: åœ¨STRä¼‘çœ å‰é¢„åˆ¤ï¼Œé¿å…å”¤é†’ååˆ‡æ¢</p>
<p><strong>å®æ–½æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ChauffeurModeService.kt</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ChauffeurModeService</span> {

    <span class="hljs-comment">// åœ¨STRä¼‘çœ å‰è°ƒç”¨</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onBeforeSTRSuspend</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> chauffeurModeEnabled = isChauffeurModeEnabled()
        <span class="hljs-keyword">val</span> currentUserId = getCurrentUserId()

        <span class="hljs-keyword">if</span> (chauffeurModeEnabled &amp;&amp; currentUserId != CHAUFFEUR_USER_ID) {
            <span class="hljs-comment">// ç«‹å³åˆ‡æ¢åˆ°ä»£é©¾ç”¨æˆ·ï¼Œä¸ç­‰åˆ°å”¤é†’å</span>
            Log.i(TAG, <span class="hljs-string">"Switching to chauffeur user before STR"</span>)
            userManager.switchUser(CHAUFFEUR_USER_ID)
        }

        <span class="hljs-comment">// ä¿å­˜çŠ¶æ€ä¾›å”¤é†’åä½¿ç”¨</span>
        prefs.edit()
            .putBoolean(KEY_STR_WITH_CHAUFFEUR, chauffeurModeEnabled)
            .putInt(KEY_STR_USER_ID, getCurrentUserId())
            .apply()
    }

    <span class="hljs-comment">// STRå”¤é†’åè°ƒç”¨</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onAfterSTRWakeup</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> strWithChauffeur = prefs.getBoolean(KEY_STR_WITH_CHAUFFEUR, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">val</span> strUserId = prefs.getInt(KEY_STR_USER_ID, UserHandle.USER_SYSTEM)

        <span class="hljs-comment">// æ— éœ€åˆ‡æ¢ï¼Œç›´æ¥æ¢å¤</span>
        Log.i(TAG, <span class="hljs-string">"STR wakeup with user <span class="hljs-variable">$strUserId</span>, no switch needed"</span>)
    }
}
</code></pre>
<p><strong>æ¶‰åŠæ¨¡å—</strong>:</p>
<ul>
<li><code>ChauffeurModeService</code> - ä»£é©¾æ¨¡å¼æœåŠ¡</li>
<li><code>PowerManagerService</code> - ç”µæºç®¡ç†æœåŠ¡</li>
<li><code>UserManager</code> - ç”¨æˆ·ç®¡ç†å™¨</li>
</ul>
<p><strong>ä¼˜åŠ¿</strong>:</p>
<ul>
<li>âœ… ä»æ ¹æœ¬ä¸Šæ¶ˆé™¤ç”¨æˆ·åˆ‡æ¢å¯¼è‡´çš„é»‘å±</li>
<li>âœ… å”¤é†’é€Ÿåº¦æ›´å¿«</li>
<li>âœ… ç”¨æˆ·ä½“éªŒæœ€ä½³</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>:</p>
<ul>
<li>âŒ éœ€è¦ä¿®æ”¹ç³»ç»ŸæœåŠ¡ï¼Œæ”¹åŠ¨èŒƒå›´è¾ƒå¤§</li>
<li>âŒ éœ€è¦ç¡®ä¿ä¼‘çœ å‰ç”¨æˆ·åˆ‡æ¢å®Œæˆ</li>
</ul>
<p><strong>å®æ–½éš¾åº¦</strong>: ä¸­ç­‰</p>
<h3 data-id="heading-15">æ–¹æ¡ˆäºŒï¼šæ·»åŠ è¿‡æ¸¡åŠ¨ç”»/å“ç‰ŒLogo</h3>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>: é»‘å±ä¸å¯é¿å…ï¼Œé‚£å°±è®©å®ƒ"æœ‰æ„ä¹‰"</p>
<p><strong>å®æ–½æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// UserSwitchTransitionManager.kt</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserSwitchTransitionManager</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: Context) {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> transitionWindow: View? = <span class="hljs-literal">null</span>

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showTransitionUI</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> windowManager = context.getSystemService(WindowManager::<span class="hljs-keyword">class</span>.java)

        <span class="hljs-comment">// åˆ›å»ºå…¨å±è¿‡æ¸¡ç•Œé¢</span>
        <span class="hljs-keyword">val</span> transitionView = LayoutInflater.from(context)
            .inflate(R.layout.user_switch_transition, <span class="hljs-literal">null</span>)

        <span class="hljs-comment">// æ˜¾ç¤ºå“ç‰ŒLogoå’ŒåŠ è½½åŠ¨ç”»</span>
        transitionView.findViewById&lt;ImageView&gt;(R.id.brand_logo).apply {
            setImageResource(R.drawable.brand_logo)
            <span class="hljs-comment">// æ·»åŠ æ¸å…¥åŠ¨ç”»</span>
            alpha = <span class="hljs-number">0f</span>
            animate()
                .alpha(<span class="hljs-number">1f</span>)
                .setDuration(<span class="hljs-number">300</span>)
                .start()
        }

        transitionView.findViewById&lt;ProgressBar&gt;(R.id.loading_indicator).apply {
            visibility = View.VISIBLE
        }

        <span class="hljs-keyword">val</span> params = WindowManager.LayoutParams(
            WindowManager.LayoutParams.MATCH_PARENT,
            WindowManager.LayoutParams.MATCH_PARENT,
            WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY,
            WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE or
                WindowManager.LayoutParams.FLAG_FULLSCREEN,
            PixelFormat.TRANSLUCENT
        )

        windowManager.addView(transitionView, params)
        transitionWindow = transitionView
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">hideTransitionUI</span><span class="hljs-params">()</span></span> {
        transitionWindow?.let { view -&gt;
            <span class="hljs-comment">// æ·»åŠ æ¸å‡ºåŠ¨ç”»</span>
            view.animate()
                .alpha(<span class="hljs-number">0f</span>)
                .setDuration(<span class="hljs-number">200</span>)
                .withEndAction {
                    <span class="hljs-keyword">val</span> windowManager = context.getSystemService(WindowManager::<span class="hljs-keyword">class</span>.java)
                    windowManager.removeView(view)
                    transitionWindow = <span class="hljs-literal">null</span>
                }
                .start()
        }
    }
}

<span class="hljs-comment">// åœ¨UserControllerä¸­é›†æˆ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> transitionManager = UserSwitchTransitionManager(context)

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">switchUser</span><span class="hljs-params">(targetUserId: <span class="hljs-type">Int</span>)</span></span> {
        <span class="hljs-comment">// æ˜¾ç¤ºè¿‡æ¸¡ç•Œé¢</span>
        transitionManager.showTransitionUI()

        <span class="hljs-comment">// æ‰§è¡Œç”¨æˆ·åˆ‡æ¢</span>
        performUserSwitch(targetUserId)

        <span class="hljs-comment">// ç›‘å¬æ–°Launcherå¯åŠ¨å®Œæˆ</span>
        registerLauncherReadyCallback {
            <span class="hljs-comment">// éšè—è¿‡æ¸¡ç•Œé¢</span>
            transitionManager.hideTransitionUI()
        }
    }
}
</code></pre>
<p><strong>è¿‡æ¸¡ç•Œé¢å¸ƒå±€ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- res/layout/user_switch_transition.xml --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">FrameLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
    <span class="hljs-attr">android:background</span>=<span class="hljs-string">"@color/brand_background"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
        <span class="hljs-attr">android:layout_gravity</span>=<span class="hljs-string">"center"</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>
        <span class="hljs-attr">android:gravity</span>=<span class="hljs-string">"center"</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">ImageView</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/brand_logo"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"200dp"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"200dp"</span>
            <span class="hljs-attr">android:contentDescription</span>=<span class="hljs-string">"@string/brand_logo_desc"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">ProgressBar</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/loading_indicator"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:layout_marginTop</span>=<span class="hljs-string">"32dp"</span>
            <span class="hljs-attr">style</span>=<span class="hljs-string">"?android:attr/progressBarStyle"</span> /&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:layout_marginTop</span>=<span class="hljs-string">"16dp"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@string/switching_user"</span>
            <span class="hljs-attr">android:textColor</span>=<span class="hljs-string">"@color/brand_text"</span>
            <span class="hljs-attr">android:textSize</span>=<span class="hljs-string">"18sp"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">FrameLayout</span>&gt;</span>
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>:</p>
<ul>
<li>âœ… æ”¹å–„ç”¨æˆ·ä½“éªŒï¼Œé»‘å±å˜æˆ"åŠ è½½ä¸­"</li>
<li>âœ… å®æ–½ç›¸å¯¹ç®€å•</li>
<li>âœ… å¯ä»¥å±•ç¤ºå“ç‰Œå…ƒç´ </li>
</ul>
<p><strong>åŠ£åŠ¿</strong>:</p>
<ul>
<li>âŒ æ²¡æœ‰å‡å°‘å®é™…çš„åˆ‡æ¢æ—¶é—´</li>
<li>âŒ ä»ç„¶æœ‰6-8ç§’çš„ç­‰å¾…</li>
</ul>
<p><strong>å®æ–½éš¾åº¦</strong>: ç®€å•</p>
<h3 data-id="heading-16">æ–¹æ¡ˆä¸‰ï¼šä¼˜åŒ–Launcherå¯åŠ¨é€Ÿåº¦</h3>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>: å‡å°‘æ–°Launcherçš„åˆå§‹åŒ–æ—¶é—´</p>
<p><strong>å®æ–½æ–¹æ¡ˆ</strong>:</p>
<ol>
<li><strong>åˆ†æLauncherå¯åŠ¨è€—æ—¶</strong></li>
</ol>
<p>ä½¿ç”¨ <code>adb shell am start -W</code> æˆ– Perfetto åˆ†æLauncherçš„å¯åŠ¨ç“¶é¢ˆï¼š</p>
<pre><code class="hljs language-bash" lang="bash">adb shell am start -W -n com.android.launcher/.main.LauncherActivity
</code></pre>
<p>å…³æ³¨ä»¥ä¸‹æŒ‡æ ‡ï¼š</p>
<ul>
<li><code>TotalTime</code>: æ€»å¯åŠ¨æ—¶é—´</li>
<li><code>WaitTime</code>: ç­‰å¾…æ—¶é—´</li>
<li><code>DisplayTime</code>: é¦–å¸§æ˜¾ç¤ºæ—¶é—´</li>
</ul>
<ol start="2">
<li><strong>ä¼˜åŒ–ç­–ç•¥</strong></li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// LauncherActivity.kt</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LauncherActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)

        <span class="hljs-comment">// ç­–ç•¥1: å»¶è¿ŸåŠ è½½éå…³é”®UI</span>
        setContentView(R.layout.activity_launcher_skeleton)  <span class="hljs-comment">// éª¨æ¶å±</span>

        <span class="hljs-comment">// ç­–ç•¥2: å¼‚æ­¥åˆå§‹åŒ–ç»„ä»¶</span>
        lifecycleScope.launch {
            <span class="hljs-comment">// å¹¶è¡ŒåŠ è½½</span>
            <span class="hljs-keyword">val</span> widgetsDeferred = async { loadWidgets() }
            <span class="hljs-keyword">val</span> appsDeferred = async { loadRecentApps() }
            <span class="hljs-keyword">val</span> settingsDeferred = async { loadSettings() }

            <span class="hljs-comment">// ç­‰å¾…å…³é”®ç»„ä»¶</span>
            widgetsDeferred.await()

            <span class="hljs-comment">// æ˜¾ç¤ºä¸»ç•Œé¢</span>
            setContentView(R.layout.activity_launcher_main)

            <span class="hljs-comment">// éå…³é”®ç»„ä»¶åå°ç»§ç»­åŠ è½½</span>
            appsDeferred.await()
            settingsDeferred.await()
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadWidgets</span><span class="hljs-params">()</span></span> = withContext(Dispatchers.IO) {
        <span class="hljs-comment">// é¢„åŠ è½½å¸¸ç”¨widgetæ•°æ®</span>
        widgetManager.preloadEssentialWidgets()
    }

    <span class="hljs-comment">// ç­–ç•¥3: ç¼“å­˜ç”¨æˆ·æ•°æ®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadRecentApps</span><span class="hljs-params">()</span></span> = withContext(Dispatchers.IO) {
        <span class="hljs-comment">// ä»ç¼“å­˜åŠ è½½ï¼Œé¿å…é‡æ–°è®¡ç®—</span>
        <span class="hljs-keyword">val</span> cache = appCache.<span class="hljs-keyword">get</span>(getCurrentUserId())
        <span class="hljs-keyword">if</span> (cache != <span class="hljs-literal">null</span> &amp;&amp; cache.isValid()) {
            <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> cache.apps
        }
        <span class="hljs-comment">// ç¼“å­˜å¤±æ•ˆæ‰é‡æ–°åŠ è½½</span>
        <span class="hljs-keyword">val</span> apps = queryRecentApps()
        appCache.put(getCurrentUserId(), apps)
        apps
    }
}
</code></pre>
<ol start="3">
<li><strong>å¯åŠ¨é¡µä¼˜åŒ–</strong></li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ·»åŠ å¯åŠ¨é¡µï¼Œæä¾›å³æ—¶åé¦ˆ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LauncherSplashActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)

        <span class="hljs-comment">// æ£€æŸ¥Launcheræ˜¯å¦å·²åˆå§‹åŒ–</span>
        <span class="hljs-keyword">if</span> (LauncherApp.isInitialized()) {
            <span class="hljs-comment">// ç›´æ¥è·³è½¬</span>
            startLauncherActivity()
            finish()
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// æ˜¾ç¤ºå¯åŠ¨é¡µ</span>
            setContentView(R.layout.activity_splash)

            <span class="hljs-comment">// ç›‘å¬åˆå§‹åŒ–å®Œæˆ</span>
            LauncherApp.observeInitialization().observe(<span class="hljs-keyword">this</span>) { isReady -&gt;
                <span class="hljs-keyword">if</span> (isReady) {
                    startLauncherActivity()
                    finish()
                }
            }
        }
    }
}
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>:</p>
<ul>
<li>âœ… æå‡æ•´ä½“ç”¨æˆ·ä½“éªŒ</li>
<li>âœ… é€‚ç”¨äºæ‰€æœ‰Launcherå¯åŠ¨åœºæ™¯</li>
<li>âœ… å‡å°‘é»‘å±æ—¶é—´</li>
</ul>
<p><strong>åŠ£åŠ¿</strong>:</p>
<ul>
<li>âŒ ä¼˜åŒ–ç©ºé—´æœ‰é™ï¼ˆä»744msä¼˜åŒ–åˆ°500mså·¦å³ï¼‰</li>
<li>âŒ æ— æ³•å®Œå…¨æ¶ˆé™¤é»‘å±</li>
</ul>
<p><strong>å®æ–½éš¾åº¦</strong>: ä¸­ç­‰</p>
<hr/>
<h2 data-id="heading-17">éªŒè¯æ–¹æ¡ˆï¼šå¦‚ä½•ç¡®è®¤ä¿®å¤æœ‰æ•ˆï¼Ÿ</h2>
<h3 data-id="heading-18">æµ‹è¯•ç”¨ä¾‹è®¾è®¡</h3>
<p><strong>æµ‹è¯•åœºæ™¯1: ä»£é©¾æ¨¡å¼STRå”¤é†’</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">å‰ç½®æ¡ä»¶: ä»£é©¾æ¨¡å¼å·²å¯ç”¨
æµ‹è¯•æ­¥éª¤:
<span class="hljs-bullet">  1.</span> è§¦å‘é”è½¦(STRä¼‘çœ )
<span class="hljs-bullet">  2.</span> ç­‰å¾…3ç§’
<span class="hljs-bullet">  3.</span> è§£é”å¯åŠ¨è½¦è¾†
<span class="hljs-bullet">  4.</span> è§‚å¯Ÿæ¡Œé¢å¯åŠ¨è¿‡ç¨‹

é¢„æœŸç»“æœ:
<span class="hljs-bullet">  -</span> æ–¹æ¡ˆä¸€: æ— é»‘å±æˆ–é»‘å±å°äº2ç§’
<span class="hljs-bullet">  -</span> æ–¹æ¡ˆäºŒ: æ˜¾ç¤ºè¿‡æ¸¡åŠ¨ç”»ï¼Œæ— æ˜æ˜¾é»‘å±æ„Ÿ
<span class="hljs-bullet">  -</span> æ–¹æ¡ˆä¸‰: é»‘å±æ—¶é—´ç¼©çŸ­è‡³4-5ç§’
</code></pre>
<p><strong>æµ‹è¯•åœºæ™¯2: éä»£é©¾æ¨¡å¼STRå”¤é†’ï¼ˆå¯¹æ¯”ï¼‰</strong></p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">å‰ç½®æ¡ä»¶: ä»£é©¾æ¨¡å¼å·²å…³é—­</span>
<span class="hljs-section">æµ‹è¯•æ­¥éª¤: (åŒä¸Š)</span>
<span class="hljs-section">é¢„æœŸç»“æœ: æ— é»‘å±æˆ–é»‘å±&lt;1ç§’ï¼ˆä½œä¸ºåŸºå‡†å¯¹æ¯”ï¼‰</span>
</code></pre>
<p><strong>æµ‹è¯•åœºæ™¯3: å‹åŠ›æµ‹è¯•</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">æµ‹è¯•æ­¥éª¤:
<span class="hljs-bullet">  1.</span> å¯ç”¨ä»£é©¾æ¨¡å¼
<span class="hljs-bullet">  2.</span> å¾ªç¯æ‰§è¡ŒSTRä¼‘çœ â†’å”¤é†’ 20æ¬¡
<span class="hljs-bullet">  3.</span> è®°å½•æ¯æ¬¡é»‘å±æ—¶é—´

é¢„æœŸç»“æœ: é»‘å±æ—¶é—´ç¨³å®šï¼Œæ— é€€åŒ–
</code></pre>
<h3 data-id="heading-19">å…³é”®æŒ‡æ ‡</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ€§èƒ½ç›‘æ§ä»£ç </span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LauncherPerformanceMonitor</span> {

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recordUserSwitchMetrics</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> startTime = SystemClock.elapsedRealtime()

        <span class="hljs-comment">// ç›‘å¬ç”¨æˆ·åˆ‡æ¢å¼€å§‹</span>
        userManager.registerUserSwitchObserver(<span class="hljs-keyword">object</span> : UserSwitchObserver() {
            <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onUserSwitchComplete</span><span class="hljs-params">(newUserId: <span class="hljs-type">Int</span>)</span></span> {
                <span class="hljs-keyword">val</span> switchDuration = SystemClock.elapsedRealtime() - startTime

                <span class="hljs-comment">// è®°å½•æŒ‡æ ‡</span>
                logMetric(<span class="hljs-string">"user_switch_duration"</span>, switchDuration)

                <span class="hljs-comment">// å¦‚æœè¶…è¿‡é˜ˆå€¼ï¼Œè®°å½•è­¦å‘Š</span>
                <span class="hljs-keyword">if</span> (switchDuration &gt; <span class="hljs-number">2000</span>) {
                    Log.w(TAG, <span class="hljs-string">"User switch took <span class="hljs-subst">${switchDuration}</span>ms, exceeds 2s threshold"</span>)
                }
            }
        })
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">recordLauncherStartTime</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> launchStartTime = Process.getStartElapsedRealtime()

        <span class="hljs-comment">// åœ¨Launcherå®Œå…¨åŠ è½½åè®°å½•</span>
        window.decorView.post {
            <span class="hljs-keyword">val</span> duration = SystemClock.elapsedRealtime() - launchStartTime
            logMetric(<span class="hljs-string">"launcher_cold_start"</span>, duration)
        }
    }
}
</code></pre>
<p><strong>ç›‘æ§æŒ‡æ ‡</strong>:</p>
<ul>
<li><code>user_switch_duration</code>: ç”¨æˆ·åˆ‡æ¢æ€»è€—æ—¶ï¼ˆç›®æ ‡ å°äº2ç§’ï¼‰</li>
<li><code>launcher_cold_start</code>: Launcherå†·å¯åŠ¨æ—¶é—´ï¼ˆç›®æ ‡ å°äº500msï¼‰</li>
<li><code>fallback_home_visible_duration</code>: FallbackHomeå¯è§æ—¶é•¿ï¼ˆç›®æ ‡ å°äº1ç§’æˆ–0ï¼‰</li>
</ul>
<h3 data-id="heading-20">æ—¥å¿—éªŒè¯</h3>
<p>ä¿®å¤åï¼Œå…³é”®æ—¥å¿—åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<p><strong>æ–¹æ¡ˆä¸€å®æ–½å</strong>:</p>
<pre><code class="hljs language-log" lang="log">// STRä¼‘çœ å‰å·²å®Œæˆç”¨æˆ·åˆ‡æ¢
12-18 14:34:38.500 UserOperateManager: Switching to chauffeur user before STR
12-18 14:34:39.000 UserOperateManager: switchUserByCarUserManager 12 success

// STRå”¤é†’ç›´æ¥æ¢å¤ï¼Œæ— éœ€åˆ‡æ¢
12-18 14:34:40.624 VHalProperty: STR_OS_DHUVehicleHal:exit_str_vehiclehal
12-18 14:34:42.100 wm_activity_launch_time: [12,xxx,com.android.launcher/.main.LauncherActivity,480]
// æ³¨æ„: æ— FallbackHomeå¯åŠ¨æ—¥å¿—ï¼
</code></pre>
<hr/>
<h2 data-id="heading-21">ç»éªŒæ€»ç»“ï¼šä»è¿™ä¸ªæ¡ˆä¾‹æˆ‘å­¦åˆ°äº†ä»€ä¹ˆ</h2>
<h3 data-id="heading-22">1. ç³»ç»Ÿæ€§æ€ç»´çš„é‡è¦æ€§</h3>
<p>è¿™ä¸ªé—®é¢˜æ¶‰åŠå¤šä¸ªå­ç³»ç»Ÿçš„äº¤äº’ï¼š</p>
<ul>
<li>ç”µæºç®¡ç†ï¼ˆSTRï¼‰</li>
<li>ç”¨æˆ·ç®¡ç†ï¼ˆå¤šç”¨æˆ·åˆ‡æ¢ï¼‰</li>
<li>çª—å£ç®¡ç†ï¼ˆActivityç”Ÿå‘½å‘¨æœŸï¼‰</li>
<li>ä»£é©¾æ¨¡å¼ä¸šåŠ¡é€»è¾‘</li>
</ul>
<p>å¦‚æœåªç›¯ç€"é»‘å±"æœ¬èº«ï¼Œå¾ˆå®¹æ˜“é™·å…¥å±€éƒ¨ä¼˜åŒ–çš„é™·é˜±ã€‚ç³»ç»Ÿæ€§åœ°ç†è§£æ•´ä¸ªæµç¨‹ï¼Œæ‰èƒ½æ‰¾åˆ°æ ¹æœ¬æ€§çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-23">2. æ—¥å¿—åˆ†ææŠ€å·§</h3>
<p><strong>æ—¶é—´çº¿é‡æ„</strong>æ˜¯å…³é”®ï¼š</p>
<ul>
<li>ç­›é€‰å…³é”®äº‹ä»¶æ—¥å¿—</li>
<li>æŒ‰æ—¶é—´æˆ³æ’åº</li>
<li>è¯†åˆ«å› æœå…³ç³»</li>
<li>æ‰¾å‡ºå¼‚å¸¸æ—¶åº</li>
</ul>
<p>å·¥å…·æ¨èï¼š</p>
<ul>
<li><code>grep</code> + æ­£åˆ™è¡¨è¾¾å¼</li>
<li>Android Studioçš„Logcatè¿‡æ»¤å™¨</li>
<li>è‡ªå®šä¹‰è„šæœ¬æå–æ—¶åº</li>
</ul>
<h3 data-id="heading-24">3. "ä¸´æ—¶æ–¹æ¡ˆ"çš„é™·é˜±</h3>
<p>FallbackHomeçš„è®¾è®¡åˆè¡·æ˜¯å¥½çš„ï¼Œä½†åœ¨ç‰¹å®šåœºæ™¯ä¸‹æˆäº†é—®é¢˜ã€‚è¿™æé†’æˆ‘ä»¬ï¼š</p>
<ul>
<li>é€šç”¨æ–¹æ¡ˆä¸ä¸€å®šé€‚ç”¨æ‰€æœ‰åœºæ™¯</li>
<li>éœ€è¦è€ƒè™‘è¾¹ç•Œæƒ…å†µ</li>
<li>æ€§èƒ½ä¼˜åŒ–ä¸èƒ½åªçœ‹å¹³å‡å€¼</li>
</ul>
<h3 data-id="heading-25">4. å¤šå±‚æ¬¡è§£å†³æ–¹æ¡ˆ</h3>
<p>å¥½çš„å·¥ç¨‹å¸ˆä¼šæä¾›å¤šä¸ªé€‰é¡¹ï¼š</p>
<ul>
<li><strong>æ ¹æœ¬æ€§æ–¹æ¡ˆ</strong>: è§£å†³é—®é¢˜æ ¹å› ï¼Œä½†å¯èƒ½å®æ–½æˆæœ¬é«˜</li>
<li><strong>æŠ˜ä¸­æ–¹æ¡ˆ</strong>: å¹³è¡¡æ•ˆæœä¸å®æ–½éš¾åº¦</li>
<li><strong>ä¸´æ—¶æ–¹æ¡ˆ</strong>: å¿«é€Ÿç¼“è§£ï¼Œä¸ºé•¿æœŸæ–¹æ¡ˆäº‰å–æ—¶é—´</li>
</ul>
<h3 data-id="heading-26">5. ç”¨æˆ·ä½“éªŒä¼˜å…ˆ</h3>
<p>æŠ€æœ¯é—®é¢˜æœ€ç»ˆè¦å›å½’ç”¨æˆ·ä½“éªŒï¼š</p>
<ul>
<li>6ç§’é»‘å±å¯¹ç”¨æˆ·æ¥è¯´æ˜¯"æ°¸æ’"</li>
<li>å³ä½¿æ— æ³•å®Œå…¨æ¶ˆé™¤ï¼Œä¹Ÿè¦è®©ç­‰å¾…å˜å¾—"æœ‰æ„ä¹‰"</li>
<li>å“ç‰ŒLogoã€åŠ è½½åŠ¨ç”»éƒ½æ˜¯æ”¹å–„æ„ŸçŸ¥çš„æ‰‹æ®µ</li>
</ul>
<hr/>
<h2 data-id="heading-27">æ›´å¤šå®æˆ˜æ¡ˆä¾‹</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top%2Fblog%2Fandroid_stability_performance%2Fcase1-android-ivi-lag-case-analysis-binder-consumed" target="_blank" title="https://home.wonlab.top/blog/android_stability_performance/case1-android-ivi-lag-case-analysis-binder-consumed" ref="nofollow noopener noreferrer">Androidè½¦æœºå¡é¡¿æ¡ˆä¾‹å‰–æ:ä»Binderè€—å°½åˆ°å•ä¾‹ç¼ºå¤±çš„æ·±åº¦æ’æŸ¥</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top%2Fblog%2Fandroid_stability_performance%2Fcase2-anr-audioserver-deadlock-system-failure" target="_blank" title="https://home.wonlab.top/blog/android_stability_performance/case2-anr-audioserver-deadlock-system-failure" ref="nofollow noopener noreferrer">ANRå®æˆ˜åˆ†æï¼šä¸€æ¬¡audioserveræ­»é”å¼•å‘çš„ç³»ç»Ÿçº§æ•…éšœæ’æŸ¥</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top%2Fblog%2Fandroid_stability_performance%2Fcase3-android-black-screen-analysis" target="_blank" title="https://home.wonlab.top/blog/android_stability_performance/case3-android-black-screen-analysis" ref="nofollow noopener noreferrer">ä¸€æ¬¡ Android è½¦æœºé»‘å±é—®é¢˜çš„æ·±åº¦å‰–æï¼šå½“æ˜¾ç¤ºé©±åŠ¨é‡ä¸Šä¸­æ–­é£æš´</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top%2Fblog%2Fandroid_stability_performance%2Fcase4-anr-velocitytracker-calculation-timeout" target="_blank" title="https://home.wonlab.top/blog/android_stability_performance/case4-anr-velocitytracker-calculation-timeout" ref="nofollow noopener noreferrer">ä¸€æ¬¡å¿…ç°ANRé—®é¢˜çš„æ·±åº¦åˆ†æä¸è§£å†³ä¹‹æ—…:å½“NestedScrollViewé‡ä¸ŠVelocityTracker</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top%2Fblog%2Fandroid_stability_performance%2Fcase5-android-antipattern-system-exit-black-screen" target="_blank" title="https://home.wonlab.top/blog/android_stability_performance/case5-android-antipattern-system-exit-black-screen" ref="nofollow noopener noreferrer">Androidåæ¨¡å¼è­¦ç¤ºå½•ï¼šSystem.exit(0)å¦‚ä½•åˆ¶é€ 546msé»‘å±</a></li>
</ul>
<p><em>å¦‚æœ‰ç–‘é—®æˆ–æƒ³æ·±å…¥è®¨è®ºï¼Œæ¬¢è¿ç•™è¨€äº¤æµï¼</em></p>
<p><em>æœ¬æ–‡åŸºäºçœŸå®æ¡ˆä¾‹æ•´ç†ï¼Œéƒ¨åˆ†æ•æ„Ÿä¿¡æ¯å·²è„±æ•å¤„ç†ã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»é›¶å¼€å§‹ç©è½¬ Microsoft Agent Frameworkï¼šæˆ‘çš„ MAF å®è·µä¹‹æ—…-ç¬¬äºŒç¯‡]]></title>    <link>https://juejin.cn/post/7591515844867129378</link>    <guid>https://juejin.cn/post/7591515844867129378</guid>    <pubDate>2026-01-05T12:01:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591515844867129378" data-draft-id="7591515844867080226" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»é›¶å¼€å§‹ç©è½¬ Microsoft Agent Frameworkï¼šæˆ‘çš„ MAF å®è·µä¹‹æ—…-ç¬¬äºŒç¯‡"/> <meta itemprop="keywords" content="åç«¯,äººå·¥æ™ºèƒ½,.NET"/> <meta itemprop="datePublished" content="2026-01-05T12:01:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="tonydf"/> <meta itemprop="url" content="https://juejin.cn/user/3809161241186638"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»é›¶å¼€å§‹ç©è½¬ Microsoft Agent Frameworkï¼šæˆ‘çš„ MAF å®è·µä¹‹æ—…-ç¬¬äºŒç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3809161241186638/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    tonydf
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T12:01:49.000Z" title="Mon Jan 05 2026 12:01:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¹¦æ¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FChBihUR6DGX-gnplVibrNQ" target="_blank" title="https://mp.weixin.qq.com/s/ChBihUR6DGX-gnplVibrNQ" ref="nofollow noopener noreferrer">ä¸Šå›</a>ï¼Œå…³äºMAFæ¡†æ¶çš„æ¢ç´¢ï¼Œä¸Šæ¬¡åªèŠäº†å‡ ä¸ªåŸºæœ¬çš„Agentåˆ›å»ºï¼Œæœ¬ç¯‡å°†æ·±å…¥æ¢è®¨MAFæ¡†æ¶çš„ä¸‰ä¸ªæ ¸å¿ƒè¿›é˜¶ç‰¹æ€§ï¼šå¯è§‚æµ‹æ€§é›†æˆã€èŠå¤©è®°å½•å­˜å‚¨ä¸æŒä¹…åŒ–ï¼Œä»¥åŠä¸ºæ™ºèƒ½ä½“èµ‹äºˆè®°å¿†èƒ½åŠ›ã€‚</p>
<p>æˆ‘è¿™é‡Œçš„æ¡ˆä¾‹ä»£ç éƒ½æ˜¯è·Ÿç€å¾®è½¯çš„å®˜æ–¹æ–‡æ¡£ï¼Œå°†æ™ºèƒ½ä½“çš„è§’è‰²æ¡ˆä¾‹æ”¹é€ æˆäº†ä¸€ä¸ªâ€œæ±½è½¦å¤§å¸ˆâ€ï¼ŒåŒ…å«äº†ä¸€äº›è‡ªå·±çš„ç†è§£ï¼Œå¯èƒ½å­˜åœ¨åå·®å’Œé”™è¯¯ï¼Œæ¨èå¤§å®¶ä¼˜å…ˆæŸ¥é˜…å®˜æ–¹æ–‡æ¡£ã€‚</p>
<blockquote>
<p>ç”±äºMAFæ¡†æ¶ï¼Œä»¥åŠå…¶ç›¸å…³çš„ç”Ÿæ€åŒ…ï¼Œç›®å‰éƒ½æ˜¯PreviewçŠ¶æ€ï¼ˆæˆªæ­¢åˆ°2026.1.5ï¼‰ï¼Œæ‰€ä»¥è¿™é‡Œåªæ˜¯æ¢ç´¢ï¼Œç›®å‰ä¸Šç”Ÿäº§çš„è¯è¿˜æ˜¯è¦æ…é‡ã€‚</p>
</blockquote>
<h2 data-id="heading-1">å¯è§‚æµ‹æ€§</h2>
<p>è¿™ä¸€è¶´ï¼Œå¯¹åº”çš„æ–‡æ¡£åœ°å€æ˜¯ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fagent-framework%2Ftutorials%2Fagents%2Fenable-observability%3Fpivots%3Dprogramming-language-csharp" target="_blank" title="https://learn.microsoft.com/en-us/agent-framework/tutorials/agents/enable-observability?pivots=programming-language-csharp" ref="nofollow noopener noreferrer">learn.microsoft.com/en-us/agentâ€¦</a></p>
<blockquote>
<p>å®é™…ä¸Šï¼Œå¾®è½¯çš„æ–‡æ¡£æ˜¯æœ‰ä¸€ä¸ªæœºç¿»çš„ä¸­æ–‡ç‰ˆçš„ï¼Œä½†æœºç¿»çš„æ•ˆæœæˆ‘ä¸ªäººæ„Ÿè§‰æœ‰ç‚¹æ‹‰ï¼Œä¸å¦‚ç›´æ¥çœ‹åŸç‰ˆï¼Œç„¶åç”¨ç¿»è¯‘è½¯ä»¶æˆ–è€…AIåŠ©æ‰‹ç¿»è¯‘ï¼Œæ•ˆæœæ›´å¥½ï¼Œå½“ç„¶èƒ½æ— éšœç¢é˜…è¯»åŸç‰ˆæ˜¯æœ€å¥½äº†ã€‚</p>
</blockquote>
<p>è¿™ä¸€èŠ‚ï¼Œä¸»è¦æ˜¯å±•ç¤ºMAFæ¡†æ¶å¦‚ä½•æ–¹ä¾¿çš„å¼€å¯å¯è§‚æµ‹æ€§ã€‚æ ¸å¿ƒçš„ç›®æ ‡æ˜¯åˆ©ç”¨OpenTelemetryæ ‡å‡†æ¥è‡ªåŠ¨è®°å½•å’Œå¯¼å‡ºæ™ºèƒ½ä½“è‚²ç”¨æˆ·ä¹‹é—´çš„äº¤äº’æ•°æ®ã€‚</p>
<p>æ•´ä¸ªæ¥å…¥æµç¨‹å¯ä»¥æ¦‚æ‹¬ä¸º</p>
<ol>
<li>å®‰è£…å¿…è¦çš„NugetåŒ…</li>
<li>å¯ç”¨OpenTelemtryï¼ˆTracerProviderï¼‰</li>
<li>é…ç½®ä»£ç†</li>
<li>æŸ¥çœ‹è¾“å‡ºç»“æœ</li>
</ol>
<p>å¥½äº†ï¼Œæ›´å…·ä½“çš„å†…å®¹å¤§å®¶å¯ä»¥å‚è€ƒæ–‡æ¡£ï¼Œæˆ‘è¿™é‡Œç›´æ¥ç»™å‡ºæˆ‘çš„æµ‹è¯•æ¡ˆä¾‹</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> Azure.AI.OpenAI;
<span class="hljs-keyword">using</span> Microsoft.Agents.AI;
<span class="hljs-keyword">using</span> OpenAI;
<span class="hljs-keyword">using</span> OpenTelemetry;
<span class="hljs-keyword">using</span> OpenTelemetry.Trace;
<span class="hljs-keyword">using</span> System;
<span class="hljs-keyword">using</span> System.ClientModel;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">AgentFrameworkQuickStart</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ObservabilityAgent</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> ModelProvider modelProvider;
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ObservabilityAgent</span>(<span class="hljs-params">ModelProvider modelProvider</span>)</span>
        {
            <span class="hljs-keyword">this</span>.modelProvider = modelProvider;
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">ObservabilityDemo</span>()</span>
        {
            <span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> tracerProvider = Sdk.CreateTracerProviderBuilder()
            .AddSource(<span class="hljs-string">"agent-telemetry-source"</span>)
            .AddConsoleExporter()
            .Build();

            <span class="hljs-keyword">var</span> agent = <span class="hljs-keyword">new</span> OpenAIClient(
               <span class="hljs-keyword">new</span> ApiKeyCredential(modelProvider.ApiKey),
               <span class="hljs-keyword">new</span> OpenAIClientOptions { Endpoint = <span class="hljs-keyword">new</span> Uri(modelProvider.Endpoint) })
               .GetChatClient(modelProvider.ModelId)
               .CreateAIAgent(instructions: <span class="hljs-string">"ä½ æ˜¯ä¸ªèµ„æ·±æ±½è½¦å¤§å¸ˆï¼Œäº†è§£å¾ˆå¤šæ±½è½¦çŸ¥è¯†ï¼ŒåŒ…æ‹¬é…ç½®ï¼Œä»·æ ¼ï¼Œé©¾é©¶ä½“éªŒçš„ç­‰ç­‰ï¼Œå›å¤å†…å®¹å°½å¯èƒ½ç®€çŸ­é«˜æ•ˆï¼Œçªå‡ºä¼˜ç¼ºç‚¹ï¼Œç»™å‡ºç»¼åˆè´­ä¹°å»ºè®®ï¼Œé¿å…é•¿ç¯‡å¤§è®º"</span>, name: <span class="hljs-string">"æ±½è½¦å¤§å¸ˆ"</span>)
               .AsBuilder()
               .UseOpenTelemetry(sourceName: <span class="hljs-string">"agent-telemetry-source"</span>)
               .Build();

            <span class="hljs-keyword">await</span> <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> update <span class="hljs-keyword">in</span> agent.RunStreamingAsync(<span class="hljs-string">"ä»‹ç»ä¸€ä¸‹æ–°æ¬¾å®é©¬X3 25Lè¿™æ¬¾è½¦"</span>))
            {
                Console.Write(update);
            }
        }
    }
}

</code></pre>
<p>ç„¶åå¯ä»¥åœ¨çœ‹ä¸€ä¸‹è¿è¡Œæ•ˆæœ</p>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17f82baa9a2e479ea2b6e0c3b077ac72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdG9ueWRm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768219309&amp;x-signature=PpS4GIjju%2BtWQLuzfWvZUZM%2Bgto%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">å­˜å‚¨èŠå¤©è®°å½•</h2>
<p>å®˜æ–¹æ–‡æ¡£åœ¨å¯è§‚æµ‹æ€§ä¹‹åï¼Œè¯¦ç»†ä»‹ç»äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fagent-framework%2Ftutorials%2Fagents%2Fpersisted-conversation" target="_blank" title="https://learn.microsoft.com/en-us/agent-framework/tutorials/agents/persisted-conversation" ref="nofollow noopener noreferrer">æŒä¹…åŒ–å¯¹è¯</a>å’Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fagent-framework%2Ftutorials%2Fagents%2Fthird-party-chat-history-storage%3Fpivots%3Dprogramming-language-csharp" target="_blank" title="https://learn.microsoft.com/en-us/agent-framework/tutorials/agents/third-party-chat-history-storage?pivots=programming-language-csharp" ref="nofollow noopener noreferrer">ç¬¬ä¸‰æ–¹å¤–éƒ¨å­˜å‚¨</a>ã€‚ä¸ºäº†èšç„¦æ ¸å¿ƒæ¦‚å¿µï¼Œæœ¬æ–‡å°†ç›´æ¥å±•ç¤ºå¦‚ä½•å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„èŠå¤©è®°å½•å­˜å‚¨ï¼Œè¯¥æ–¹æ³•ä¹Ÿæ¶µç›–äº†æŒä¹…åŒ–çš„æ ¸å¿ƒæ€æƒ³ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒå®˜ç½‘æŸ¥çœ‹å®Œæ•´çš„æ•™ç¨‹ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒChatClientAgentçš„èŠå¤©è®°å½•å­˜å‚¨åœ¨AgentThreadå¯¹è±¡ä¸­ï¼Œä¹Ÿå°±æ˜¯å†…å­˜å½“ä¸­ï¼Œä¸ºäº†å®ç°å¯¹è¯çš„æŒä¹…åŒ–ã€è·¨ä¼šè¯æ¢å¤æˆ–å¤§è§„æ¨¡å†å²ç®¡ç†ï¼Œå¼€å‘è€…éœ€è¦æä¾›è‡ªå®šä¹‰å­˜å‚¨å®ç°ã€‚</p>
<p>æœ¬æ–‡çš„æ¡ˆä¾‹å°±æ˜¯åŸºäºå®˜æ–¹æ•™ç¨‹ï¼Œåˆ›å»ºäº†ä¸€ä¸ªè‡ªå®šä¹‰å­˜å‚¨ç±»ï¼Œç»§æ‰¿æŠ½è±¡ç±» ChatMessageStoreå¹¶åˆ†åˆ«å®ç°ä¸€ä¸ªå­˜å‚¨ï¼ˆAddMessagesAsyncï¼‰å’Œæ£€ç´¢ï¼ˆGetMessagesAsyncï¼‰çš„å…³é”®æ–¹æ³•ã€‚è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ£€ç´¢æ–¹æ³•é‡Œè¦è€ƒè™‘Tokençš„é™åˆ¶ï¼Œä¸è¿‡æˆ‘ä»¬è¿™é‡Œæ˜¯æŠ€æœ¯éªŒè¯é˜¶æ®µï¼Œè¿™ä¸ªä¹Ÿå¯ä»¥å…ˆè·³è¿‡ï¼Œé™ä½ä¸€äº›å¿ƒæ™ºè´Ÿæ‹…ã€‚</p>
<p>ä»£ç çš„å¤§ä½“é€»è¾‘æ˜¯</p>
<ul>
<li>æä¾›ä¸€ä¸ªInMemoryVectorStoreç¤ºä¾‹ç±»VectorChatMessageStore</li>
<li>åœ¨ç¬¬ä¸€æ¬¡æ·»åŠ æ¶ˆæ¯æ—¶ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ ThreadDbKey</li>
<li>å®šä¹‰äº†ä¸€ä¸ªå†…éƒ¨ç±»ChatHistoryItemæ¥ä¿å­˜æ¶ˆæ¯æ–‡æœ¬ã€æ—¶é—´æˆ³å’Œåºåˆ—åŒ–åçš„æ¶ˆæ¯ä½“ã€‚</li>
<li>Serialize æ–¹æ³•åªè¿”å›ThreadDbKeyè¿™æ ·ä¸‹æ¬¡åŠ è½½çº¿ç¨‹æ—¶ï¼Œå°±èƒ½æ ¹æ®è¿™ä¸ª Key æ‰¾å›å†å²ã€‚</li>
</ul>
<p>æ¥çœ‹ä¸‹ä»£ç </p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> AgentFrameworkQuickStart.Models;
<span class="hljs-keyword">using</span> Microsoft.Agents.AI;
<span class="hljs-keyword">using</span> Microsoft.Extensions.AI;
<span class="hljs-keyword">using</span> Microsoft.Extensions.VectorData;
<span class="hljs-keyword">using</span> Microsoft.SemanticKernel.Connectors.InMemory;
<span class="hljs-keyword">using</span> OpenAI;
<span class="hljs-keyword">using</span> Spectre.Console;
<span class="hljs-keyword">using</span> System.ClientModel;
<span class="hljs-keyword">using</span> System.Text.Json;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">AgentFrameworkQuickStart</span>;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">InMemoryChatHistoryAgent</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> ModelProvider _modelProvider;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">string</span> _threadStatePath;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> VectorStore _vectorStore = <span class="hljs-keyword">new</span> InMemoryVectorStore();

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">InMemoryChatHistoryAgent</span>(<span class="hljs-params">ModelProvider modelProvider, <span class="hljs-built_in">string</span> threadStateFileName = <span class="hljs-string">"thread_state.json"</span></span>)</span>
    {
        _modelProvider = modelProvider ?? <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentNullException(<span class="hljs-keyword">nameof</span>(modelProvider));
        _threadStatePath = Path.Combine(Directory.GetCurrentDirectory(), threadStateFileName);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">RunInteractiveChatAsync</span>()</span>
    {
        <span class="hljs-comment">// åˆ›å»ºå¸¦è‡ªå®šä¹‰æ¶ˆæ¯å­˜å‚¨çš„ Agent</span>
        <span class="hljs-keyword">var</span> agent = <span class="hljs-keyword">new</span> OpenAIClient(
                <span class="hljs-keyword">new</span> ApiKeyCredential(_modelProvider.ApiKey),
                <span class="hljs-keyword">new</span> OpenAIClientOptions { Endpoint = <span class="hljs-keyword">new</span> Uri(_modelProvider.Endpoint) })
            .GetChatClient(_modelProvider.ModelId)
            .CreateAIAgent(
            <span class="hljs-keyword">new</span> ChatClientAgentOptions
            {
                Name = <span class="hljs-string">"è®°å¿†å¤§å¸ˆ"</span>,
                Description = <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæœ‰é•¿æœŸè®°å¿†çš„åŠ©æ‰‹ï¼Œèƒ½è®°ä½ä¹‹å‰çš„å¯¹è¯ã€‚"</span>,
                ChatMessageStoreFactory = ctx =&gt; <span class="hljs-keyword">new</span> VectorChatMessageStore(_vectorStore, ctx.SerializedState, ctx.JsonSerializerOptions)
            });


        <span class="hljs-comment">// å°è¯•æ¢å¤çº¿ç¨‹</span>
        AgentThread thread;
        <span class="hljs-keyword">if</span> (File.Exists(_threadStatePath))
        {
            Console.WriteLine(<span class="hljs-string">"æ£€æµ‹åˆ°å·²ä¿å­˜çš„å¯¹è¯çŠ¶æ€ï¼Œæ­£åœ¨æ¢å¤..."</span>);
            <span class="hljs-built_in">string</span> json = <span class="hljs-keyword">await</span> File.ReadAllTextAsync(_threadStatePath);
            <span class="hljs-keyword">var</span> element = JsonSerializer.Deserialize&lt;JsonElement&gt;(json, JsonSerializerOptions.Web);
            thread = agent.DeserializeThread(element, JsonSerializerOptions.Web);
            Console.WriteLine(<span class="hljs-string">"å¯¹è¯å·²æ¢å¤ï¼"</span>);
        }
        <span class="hljs-keyword">else</span>
        {
            Console.WriteLine(<span class="hljs-string">"å¼€å§‹æ–°å¯¹è¯ï¼ˆä½¿ç”¨ InMemory å‘é‡å­˜å‚¨è®°å½•å†å²ï¼‰..."</span>);
            thread = agent.GetNewThread();
        }

        <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)
        {
            Console.Write(<span class="hljs-string">"\nğŸ’¬ ä½ : "</span>);
            <span class="hljs-built_in">string</span>? input = Console.ReadLine();

            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrWhiteSpace(input)) <span class="hljs-keyword">continue</span>;

            <span class="hljs-keyword">if</span> (input.Equals(<span class="hljs-string">"exit"</span>, StringComparison.OrdinalIgnoreCase))
            {
                <span class="hljs-keyword">var</span> state = thread.Serialize(JsonSerializerOptions.Web).GetRawText();
                <span class="hljs-keyword">await</span> File.WriteAllTextAsync(_threadStatePath, state);
                Console.WriteLine(<span class="hljs-string">"çº¿ç¨‹çŠ¶æ€å·²ä¿å­˜ï¼Œå†è§ï¼"</span>);
                <span class="hljs-keyword">break</span>;
            }

            <span class="hljs-keyword">if</span> (input.Equals(<span class="hljs-string">"clear"</span>, StringComparison.OrdinalIgnoreCase))
            {
                <span class="hljs-keyword">if</span> (File.Exists(_threadStatePath)) 
                    File.Delete(_threadStatePath);
                thread = agent.GetNewThread();
                Console.WriteLine(<span class="hljs-string">"å·²å¼€å¯å…¨æ–°å¯¹è¯ï¼ˆæ—§å†å²ä¸å¯è§ï¼‰"</span>);
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-keyword">try</span>
            {
                <span class="hljs-keyword">var</span> response = <span class="hljs-keyword">await</span> agent.RunAsync(input, thread);
                Console.WriteLine(<span class="hljs-string">$"\nåŠ©æ‰‹: <span class="hljs-subst">{response}</span>"</span>);
            }
            <span class="hljs-keyword">catch</span> (Exception ex)
            {
                Console.WriteLine(<span class="hljs-string">$"é”™è¯¯: <span class="hljs-subst">{ex.Message}</span>"</span>);
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-keyword">var</span> updatedState = thread.Serialize(JsonSerializerOptions.Web).GetRawText();
            <span class="hljs-keyword">await</span> File.WriteAllTextAsync(_threadStatePath, updatedState);
        }
    }

    <span class="hljs-comment">//è¿™ä¸ªåŸºæœ¬å’Œæ–‡æ¡£çš„æ¡ˆä¾‹ä¸€è‡´ğŸ‘‡ï¼Œæˆ‘å¼•å…¥äº†AnsiConsoleç¾åŒ–è¾“å‡º</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title">VectorChatMessageStore</span> : <span class="hljs-title">ChatMessageStore</span>
    {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> VectorStore _vectorStore;
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span>? ThreadDbKey { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">private</span> <span class="hljs-keyword">set</span>; }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">VectorChatMessageStore</span>(<span class="hljs-params">
            VectorStore vectorStore,
            JsonElement serializedStoreState,
            JsonSerializerOptions? jsonSerializerOptions = <span class="hljs-literal">null</span></span>)</span>
        {
            _vectorStore = vectorStore ?? <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArgumentNullException(<span class="hljs-keyword">nameof</span>(vectorStore));
            <span class="hljs-keyword">if</span> (serializedStoreState.ValueKind == JsonValueKind.String)
                ThreadDbKey = serializedStoreState.Deserialize&lt;<span class="hljs-built_in">string</span>&gt;(jsonSerializerOptions);
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">AddMessagesAsync</span>(<span class="hljs-params">
            IEnumerable&lt;ChatMessage&gt; messages,
            CancellationToken cancellationToken = <span class="hljs-literal">default</span></span>)</span>
        {
            ThreadDbKey ??= Guid.NewGuid().ToString(<span class="hljs-string">"N"</span>);

            AnsiConsole.MarkupLine(<span class="hljs-string">$"[cyan]ã€Addã€‘ ThreadKey: <span class="hljs-subst">{ThreadDbKey}</span>, æ¶ˆæ¯æ•°: <span class="hljs-subst">{messages.Count()}</span>[/]"</span>);

            <span class="hljs-keyword">var</span> collection = _vectorStore.GetCollection&lt;<span class="hljs-built_in">string</span>, ChatHistoryItem&gt;(<span class="hljs-string">"ChatHistory"</span>);
            <span class="hljs-keyword">await</span> collection.EnsureCollectionExistsAsync(cancellationToken);

            <span class="hljs-keyword">await</span> collection.UpsertAsync(
                messages.Select(msg =&gt; <span class="hljs-keyword">new</span> ChatHistoryItem
                {
                    Key = <span class="hljs-string">$"<span class="hljs-subst">{ThreadDbKey}</span>_<span class="hljs-subst">{msg.MessageId}</span>"</span>,
                    ThreadId = ThreadDbKey,
                    Timestamp = DateTimeOffset.UtcNow,
                    SerializedMessage = JsonSerializer.Serialize(msg, SourceGenerationContext.Default.ChatMessage),
                    MessageText = msg.Text ?? <span class="hljs-string">""</span>
                }),
                cancellationToken);
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">async</span> Task&lt;IEnumerable&lt;ChatMessage&gt;&gt; GetMessagesAsync(
            CancellationToken cancellationToken = <span class="hljs-literal">default</span>)
        {
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrEmpty(ThreadDbKey))
                <span class="hljs-keyword">return</span> [];

            AnsiConsole.MarkupLine(<span class="hljs-string">$"[yellow]ã€Getã€‘ ä» ThreadKey: <span class="hljs-subst">{ThreadDbKey}</span> è¯»å–æ¶ˆæ¯[/]"</span>);


            <span class="hljs-keyword">var</span> collection = _vectorStore.GetCollection&lt;<span class="hljs-built_in">string</span>, ChatHistoryItem&gt;(<span class="hljs-string">"ChatHistory"</span>);
            <span class="hljs-keyword">await</span> collection.EnsureCollectionExistsAsync(cancellationToken);

            <span class="hljs-comment">// è·å–è¯¥çº¿ç¨‹çš„æ‰€æœ‰æ¶ˆæ¯ï¼ˆæŒ‰æ—¶é—´å€’åºå–æœ€æ–° 10 æ¡ï¼‰</span>
            <span class="hljs-keyword">var</span> records = collection.GetAsync(
                filter: x =&gt; x.ThreadId == ThreadDbKey,
                top: <span class="hljs-number">10</span>,
                options: <span class="hljs-keyword">new</span>() { OrderBy = x =&gt; x.Descending(y =&gt; y.Timestamp) },
                cancellationToken);

            <span class="hljs-keyword">var</span> messages = <span class="hljs-keyword">new</span> List&lt;ChatMessage&gt;();
            <span class="hljs-keyword">await</span> <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> <span class="hljs-keyword">record</span> <span class="hljs-title">in</span> <span class="hljs-title">records</span>)
            {
                messages.Add(JsonSerializer.Deserialize&lt;ChatMessage&gt;(
                    <span class="hljs-keyword">record</span>.SerializedMessage!,
                    SourceGenerationContext.Default.ChatMessage)!);
            }

            messages.Reverse();
            <span class="hljs-keyword">return</span> messages;
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> JsonElement <span class="hljs-title">Serialize</span>(<span class="hljs-params">JsonSerializerOptions? options = <span class="hljs-literal">null</span></span>)</span>
            =&gt; JsonSerializer.SerializeToElement(ThreadDbKey, options);

        <span class="hljs-keyword">private</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ChatHistoryItem</span>
        {
            [<span class="hljs-meta">VectorStoreKey</span>] <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span>? Key { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
            [<span class="hljs-meta">VectorStoreData</span>] <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span>? ThreadId { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
            [<span class="hljs-meta">VectorStoreData</span>] <span class="hljs-keyword">public</span> DateTimeOffset? Timestamp { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
            [<span class="hljs-meta">VectorStoreData</span>] <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span>? SerializedMessage { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
            [<span class="hljs-meta">VectorStoreData</span>] <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span>? MessageText { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
        }
    }
}
</code></pre>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d1141f100f54777914da8e38bea106f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdG9ueWRm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768219309&amp;x-signature=9gSP5N9LTb0pP4ntB6IB8nvL1o0%3D" alt="" loading="lazy"/></p>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b6b4acbcc274994ac8055f7f2a59570~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdG9ueWRm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768219309&amp;x-signature=BurBPLWS%2F5EHKoOsL%2F5u9R%2FI2h8%3D" alt="" loading="lazy"/></p>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/694e3e4492bf4a6bb685b7f8d2cd9344~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdG9ueWRm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768219309&amp;x-signature=ehsg22WipdhkhUnY9c78sS4fwc8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">ä¸ºæ™ºèƒ½ä½“æ·»åŠ è®°å¿†</h2>
<p>æœ¬èŠ‚å¯¹åº”æ–‡æ¡£çš„åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fagent-framework%2Ftutorials%2Fagents%2Fmemory%3Fpivots%3Dprogramming-language-csharp" target="_blank" title="https://learn.microsoft.com/en-us/agent-framework/tutorials/agents/memory?pivots=programming-language-csharp" ref="nofollow noopener noreferrer">learn.microsoft.com/en-us/agentâ€¦</a></p>
<p>è¿™ä¸€ç« å…³äºæ¦‚å¿µæ€§çš„å†…å®¹æˆ‘è¿™é‡Œä¸è¿‡å¤šä»‹ç»äº†ï¼Œè¿™é‡Œç®€å•æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘è§‰å¾—è¿™ä¸€ç¯‡æ˜¯MAFçš„åŸºç¡€æ–‡æ¡£ä»‹ç»ä¸­æœ€ä¸ºå‹è½´çš„ä¸€ç¯‡ï¼Œé€šè¿‡AIContextProviderå¯ä»¥è®©Agentå…·å¤‡â€œå­¦ä¹ â€å’Œâ€œä¸ªæ€§åŒ–â€çš„èƒ½åŠ›ï¼Œæ„å»ºå‡ºå¤æ‚äº¤äº’ç³»ç»Ÿã€‚å¦‚æ–‡æ¡£æ‰€ç¤º</p>
<blockquote>
<p>AIContextProvideræ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæ‚¨å¯ä»¥ä»ä¸­ç»§æ‰¿ï¼Œå¹¶ä¸”å¯ä»¥ä¸AgentThreadå…³è”ä»¥ç”¨äºChatClientAgentã€‚ è¯¥åŠŸèƒ½å…è®¸ï¼š</p>
<ul>
<li>åœ¨ä»£ç†è°ƒç”¨åŸºç¡€æ¨ç†æœåŠ¡ä¹‹å‰å’Œä¹‹åè¿è¡Œè‡ªå®šä¹‰é€»è¾‘ã€‚</li>
<li>åœ¨è°ƒç”¨åŸºç¡€æ¨ç†æœåŠ¡ä¹‹å‰ï¼Œå‘ä»£ç†æä¾›å…¶ä»–ä¸Šä¸‹æ–‡ã€‚</li>
<li>æ£€æŸ¥ä»£ç†æä¾›å’Œç”Ÿæˆçš„æ‰€æœ‰æ¶ˆæ¯ã€‚</li>
</ul>
</blockquote>
<p>AIContextProvideræœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ‹¦æˆªå™¨æˆ–è€…è¯´ä¸­é—´ä»¶ï¼Œåƒæ˜¯åœ¨Agentä»â€œæ¥å—è¾“å…¥ï¼ˆInvokingAsync ï¼‰â€åˆ°â€œè°ƒç”¨æ¨¡å‹ï¼ˆInvokedAsyncï¼‰â€è¿™ä¸ªæ‰§è¡Œæµç¨‹ä¸Šåˆ‡äº†2åˆ€ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯ä»¥å‚è€ƒä»¥ä¸‹æµç¨‹å›¾ã€‚</p>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e8aefffa14d4fb5b2afd470d6f400c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdG9ueWRm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768219309&amp;x-signature=gxqTKx6I2DCj9vPyic%2BOwPPblo8%3D" alt="" loading="lazy"/></p>
<p>æ›´å¤šæ¦‚å¿µæ€§å†…å®¹å¤§å®¶è¿˜æ˜¯å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fagent-framework%2Ftutorials%2Fagents%2Fmemory%3Fpivots%3Dprogramming-language-csharp%23pre-and-post-invocation-events" target="_blank" title="https://learn.microsoft.com/en-us/agent-framework/tutorials/agents/memory?pivots=programming-language-csharp#pre-and-post-invocation-events" ref="nofollow noopener noreferrer">æ–‡æ¡£</a>å§ï¼Œæˆ‘è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ã€‚å’±ä»¬çœ‹æ¡ˆä¾‹å§</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> AgentFrameworkQuickStart.Models;
<span class="hljs-keyword">using</span> AgentFrameworkQuickStart.Tools;
<span class="hljs-keyword">using</span> Microsoft.Agents.AI;
<span class="hljs-keyword">using</span> Microsoft.Extensions.AI;
<span class="hljs-keyword">using</span> Microsoft.Extensions.VectorData;
<span class="hljs-keyword">using</span> Microsoft.SemanticKernel.Connectors.InMemory;
<span class="hljs-keyword">using</span> OpenAI;
<span class="hljs-keyword">using</span> Spectre.Console;
<span class="hljs-keyword">using</span> System.ClientModel;
<span class="hljs-keyword">using</span> System.Text;
<span class="hljs-keyword">using</span> System.Text.Json;

<span class="hljs-keyword">namespace</span> <span class="hljs-title">AgentFrameworkQuickStart</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CarMasterMemory</span> : <span class="hljs-title">AIContextProvider</span>
    {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> IChatClient _innerClient;
        <span class="hljs-keyword">public</span> CarPreference Preference { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">private</span> <span class="hljs-keyword">set</span>; }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">CarMasterMemory</span>(<span class="hljs-params">IChatClient client, CarPreference? pref = <span class="hljs-literal">null</span></span>)</span>
        {
            _innerClient = client;
            Preference = pref ?? <span class="hljs-keyword">new</span> CarPreference();
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">CarMasterMemory</span>(<span class="hljs-params">IChatClient client, JsonElement serializedState, JsonSerializerOptions? options = <span class="hljs-literal">null</span></span>)</span>
        {
            _innerClient = client;
            Preference = serializedState.ValueKind == JsonValueKind.Object
                ? serializedState.Deserialize&lt;CarPreference&gt;(options) ?? <span class="hljs-keyword">new</span> CarPreference()
                : <span class="hljs-keyword">new</span> CarPreference();
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> ValueTask&lt;AIContext&gt; <span class="hljs-title">InvokingAsync</span>(<span class="hljs-params">InvokingContext context, CancellationToken ct = <span class="hljs-literal">default</span></span>)</span>
        {
            <span class="hljs-keyword">var</span> sb = <span class="hljs-keyword">new</span> StringBuilder(<span class="hljs-string">"\n[åå°ç”»åƒå·²åŠ è½½]"</span>);
            <span class="hljs-keyword">if</span> (Preference.BudgetMax &gt; <span class="hljs-number">0</span>) sb.Append(<span class="hljs-string">$" | é¢„ç®—ä¸Šé™ï¼š<span class="hljs-subst">{Preference.BudgetMax}</span>ä¸‡"</span>);
            <span class="hljs-keyword">if</span> (Preference.EnergyType != <span class="hljs-string">"æœªæŒ‡å®š"</span>) sb.Append(<span class="hljs-string">$" | èƒ½æºåå¥½ï¼š<span class="hljs-subst">{Preference.EnergyType}</span>"</span>);
            <span class="hljs-keyword">if</span> (Preference.MustHaves.Any()) sb.Append(<span class="hljs-string">$" | å…³é”®éœ€æ±‚ï¼š<span class="hljs-subst">{<span class="hljs-built_in">string</span>.Join(<span class="hljs-string">"ã€"</span>, Preference.MustHaves)}</span>"</span>);

            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ValueTask&lt;AIContext&gt;(<span class="hljs-keyword">new</span> AIContext { Instructions = sb.ToString() });
        }


        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> <span class="hljs-keyword">async</span> ValueTask <span class="hljs-title">InvokedAsync</span>(<span class="hljs-params">InvokedContext context, CancellationToken ct = <span class="hljs-literal">default</span></span>)</span>
        {
            <span class="hljs-keyword">if</span> (context.RequestMessages.Any(m =&gt; m.Role == ChatRole.User))
            {
                <span class="hljs-keyword">try</span>
                {
                    <span class="hljs-keyword">var</span> lastUserMessage = context.RequestMessages.LastOrDefault(m =&gt; m.Role == ChatRole.User)?.Text;
                    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">string</span>.IsNullOrEmpty(lastUserMessage)) <span class="hljs-keyword">return</span>;

                    <span class="hljs-keyword">var</span> analysisOptions = <span class="hljs-keyword">new</span> ChatOptions
                    {
                        ResponseFormat = ChatResponseFormat.Json,
                        Instructions = <span class="hljs-string">""</span><span class="hljs-string">"
                    ä½ æ˜¯ä¸€ä¸ªæ•°æ®æå–å™¨ã€‚è¯·åˆ†æç”¨æˆ·çš„è¾“å…¥ï¼Œæå–è´­è½¦æ„å‘ã€‚
                    è¿”å› JSON æ ¼å¼å¦‚ä¸‹ï¼š
                    {
                      "</span>BudgetMax<span class="hljs-string">": æ•°å­— (å¦‚æœæ˜¯30ä¸‡è¯·å†™30, å¿…é¡»æ˜¯ä¸‡ä¸ºå•ä½çš„æ•°å­—),
                      "</span>EnergyType<span class="hljs-string">": "</span>å­—ç¬¦ä¸² (å¦‚: çº¯ç”µ/ç‡ƒæ²¹/æ··åŠ¨)<span class="hljs-string">",
                      "</span>MustHaves<span class="hljs-string">": ["</span>éœ€æ±‚ç‚¹<span class="hljs-number">1</span><span class="hljs-string">", "</span>éœ€æ±‚ç‚¹<span class="hljs-number">2</span><span class="hljs-string">"] (å¦‚æœæ²¡æœ‰æåˆ°ä»»ä½•å…·ä½“é…ç½®æˆ–åŠŸèƒ½éœ€æ±‚ï¼Œè¯·è¿”å›ç©ºæ•°ç»„ [])
                    }
                    æ³¨æ„ï¼šå¦‚æœæ˜¯é…ç½®éœ€æ±‚(å¦‚: æ™ºé©¾ã€å…¨æ™¯å¤©çª—ã€å¤§ç©ºé—´)ï¼Œè¯·æ”¾å…¥ MustHavesã€‚
                    "</span><span class="hljs-string">""</span>
                    };

                    <span class="hljs-keyword">var</span> extraction = <span class="hljs-keyword">await</span> _innerClient.GetResponseAsync&lt;CarPreference&gt;(
                        context.RequestMessages.TakeLast(<span class="hljs-number">2</span>), <span class="hljs-comment">// åªçœ‹æœ€è¿‘ä¸€ä¸¤è½®</span>
                        analysisOptions);

                    <span class="hljs-keyword">if</span> (extraction.Result != <span class="hljs-literal">null</span>)
                    {
                        <span class="hljs-keyword">var</span> newInfo = extraction.Result;

                        <span class="hljs-keyword">if</span> (newInfo.BudgetMax &gt; <span class="hljs-number">5000</span>) newInfo.BudgetMax /= <span class="hljs-number">10000</span>;
                        <span class="hljs-keyword">if</span> (newInfo.BudgetMax &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">this</span>.Preference.BudgetMax = newInfo.BudgetMax;

                        <span class="hljs-keyword">if</span> (!<span class="hljs-built_in">string</span>.IsNullOrEmpty(newInfo.EnergyType) &amp;&amp; newInfo.EnergyType != <span class="hljs-string">"æœªæŒ‡å®š"</span> &amp;&amp; newInfo.EnergyType != <span class="hljs-string">"null"</span>)
                        {
                            <span class="hljs-keyword">this</span>.Preference.EnergyType = newInfo.EnergyType;
                        }

                        <span class="hljs-keyword">if</span> (newInfo.MustHaves != <span class="hljs-literal">null</span> &amp;&amp; newInfo.MustHaves.Any())
                        {
                            <span class="hljs-keyword">var</span> validNewItems = newInfo.MustHaves
                                .Where(s =&gt; !<span class="hljs-built_in">string</span>.IsNullOrWhiteSpace(s) &amp;&amp; s != <span class="hljs-string">"æ— "</span> &amp;&amp; s != <span class="hljs-string">"null"</span>);

                            <span class="hljs-keyword">var</span> updatedList = <span class="hljs-keyword">this</span>.Preference.MustHaves.Union(validNewItems, StringComparer.OrdinalIgnoreCase).ToList();
                            <span class="hljs-keyword">this</span>.Preference.MustHaves = updatedList;
                        }
                    }
                }
                <span class="hljs-keyword">catch</span> (Exception ex)
                {
                    <span class="hljs-comment">// è°ƒè¯•ç”¨</span>
                    <span class="hljs-comment">// Console.WriteLine($"[DEBUG] æå–å¤±è´¥: {ex.Message}");</span>
                }
            }
        }
        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">override</span> JsonElement <span class="hljs-title">Serialize</span>(<span class="hljs-params">JsonSerializerOptions? options = <span class="hljs-literal">null</span></span>)</span>
            =&gt; JsonSerializer.SerializeToElement(Preference, options);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">CarMasterAgent</span> : <span class="hljs-title">BaseAgent</span>
    {
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> VectorStore _vectorStore = <span class="hljs-keyword">new</span> InMemoryVectorStore();

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">CarMasterAgent</span>(<span class="hljs-params">ModelProvider modelProvider</span>) : <span class="hljs-title">base</span>(<span class="hljs-params">modelProvider</span>)</span> { }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">RunMasterAsync</span>()</span>
        {
            <span class="hljs-keyword">var</span> client = <span class="hljs-keyword">new</span> OpenAIClient(
                <span class="hljs-keyword">new</span> ApiKeyCredential(modelProvider.ApiKey),
                <span class="hljs-keyword">new</span> OpenAIClientOptions { Endpoint = <span class="hljs-keyword">new</span> Uri(modelProvider.Endpoint) });

            <span class="hljs-keyword">var</span> chatClient = client.GetChatClient(modelProvider.ModelId);

            <span class="hljs-keyword">var</span> agent = chatClient.CreateAIAgent(<span class="hljs-keyword">new</span> ChatClientAgentOptions
            {
                Name = <span class="hljs-string">"æ±½è½¦å¤§å¸ˆ"</span>,
                Description = <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæ¯’èˆŒä½†ä¸“ä¸šçš„æ±½è½¦å¤§å¸ˆã€‚ä½ ä¼šæ ¹æ®åå°ç”»åƒï¼ˆé¢„ç®—ã€éœ€æ±‚ï¼‰ç»™å‡ºç²¾å‡†å»ºè®®ã€‚"</span>,
                <span class="hljs-comment">// 1. å¯¹è¯è®°å½•å­˜å…¥å‘é‡æ•°æ®åº“ï¼ˆä½ å†™çš„é€»è¾‘ï¼‰</span>
                ChatMessageStoreFactory = ctx =&gt; <span class="hljs-keyword">new</span> VectorChatMessageStore(_vectorStore, ctx.SerializedState, ctx.JsonSerializerOptions),
                <span class="hljs-comment">// 2. ç”»åƒæç‚¼å­˜å…¥ä¸Šä¸‹æ–‡æä¾›è€…ï¼ˆæˆ‘ä¼˜åŒ–çš„é€»è¾‘ï¼‰</span>
                AIContextProviderFactory = ctx =&gt; <span class="hljs-keyword">new</span> CarMasterMemory(chatClient.AsIChatClient(), ctx.SerializedState, ctx.JsonSerializerOptions)
            });

            <span class="hljs-keyword">var</span> thread = agent.GetNewThread();

            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)
            {
                <span class="hljs-keyword">var</span> input = AnsiConsole.Ask&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">"[white]ä½ :[/]"</span>);
                <span class="hljs-keyword">if</span> (input == <span class="hljs-string">"exit"</span>) <span class="hljs-keyword">break</span>;

                <span class="hljs-keyword">var</span> response = <span class="hljs-keyword">await</span> agent.RunAsync(input, thread);
                AnsiConsole.MarkupLine(<span class="hljs-string">$"\n[cyan]å¤§å¸ˆ: <span class="hljs-subst">{response}</span>[/]"</span>);

                <span class="hljs-keyword">var</span> mem = thread.GetService&lt;CarMasterMemory&gt;()?.Preference;
                AnsiConsole.MarkupLine(<span class="hljs-string">$"[grey]&gt;&gt;&gt; ç³»ç»Ÿç”»åƒæ›´æ–° | é¢„ç®—: <span class="hljs-subst">{mem?.BudgetMax}</span>w | èƒ½æº: <span class="hljs-subst">{mem?.EnergyType}</span> | éœ€æ±‚æ•°: <span class="hljs-subst">{mem?.MustHaves.Count}</span>[/]"</span>);
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">RunMasterStreamAsync</span>()</span>
        {
            <span class="hljs-keyword">var</span> client = <span class="hljs-keyword">new</span> OpenAIClient(
                <span class="hljs-keyword">new</span> ApiKeyCredential(modelProvider.ApiKey),
                <span class="hljs-keyword">new</span> OpenAIClientOptions { Endpoint = <span class="hljs-keyword">new</span> Uri(modelProvider.Endpoint) });

            <span class="hljs-keyword">var</span> chatClient = client.GetChatClient(modelProvider.ModelId);

            <span class="hljs-keyword">var</span> agent = chatClient.CreateAIAgent(<span class="hljs-keyword">new</span> ChatClientAgentOptions
            {
                Name = <span class="hljs-string">"æ±½è½¦å¤§å¸ˆ"</span>,
                Description = <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªæ—¢æ¯’èˆŒåˆä¸“ä¸šçš„æ±½è½¦å¤§å¸ˆã€‚ä½ ä¼šæ ¹æ®åå°ç”»åƒï¼ˆé¢„ç®—ã€éœ€æ±‚ï¼‰ç»™å‡ºç²¾å‡†å»ºè®®ã€‚é‡ç‚¹çªå‡ºä¼˜ç¼ºç‚¹ï¼Œæœ‰æ²¡æœ‰æ’é¢ï¼Œä¸è¦é•¿ç¯‡å¤§è®ºï¼Œæ‰¯ä¸€äº›æ²¡ç”¨çš„ã€‚"</span>,
                <span class="hljs-comment">// å¯¹è¯è®°å½•å­˜å…¥å‘é‡æ•°æ®åº“</span>
                ChatMessageStoreFactory = ctx =&gt; <span class="hljs-keyword">new</span> VectorChatMessageStore(_vectorStore, ctx.SerializedState, ctx.JsonSerializerOptions),
                <span class="hljs-comment">// ç”»åƒæç‚¼å­˜å…¥ä¸Šä¸‹æ–‡æä¾›è€…</span>
                AIContextProviderFactory = ctx =&gt; <span class="hljs-keyword">new</span> CarMasterMemory(chatClient.AsIChatClient(), ctx.SerializedState, ctx.JsonSerializerOptions)
            });

            <span class="hljs-keyword">var</span> thread = agent.GetNewThread();

            AnsiConsole.MarkupLine(<span class="hljs-string">"[bold green]--- æ±½è½¦å¤§å¸ˆå·²ä¸Šçº¿ (æµå¼æ¨¡å¼) ---[/]"</span>);

            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)
            {
                <span class="hljs-keyword">var</span> input = AnsiConsole.Ask&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">"\n[white]ä½ :[/]"</span>);
                <span class="hljs-keyword">if</span> (input == <span class="hljs-string">"exit"</span>) <span class="hljs-keyword">break</span>;

                AnsiConsole.Markup(<span class="hljs-string">"[cyan]å¤§å¸ˆ:[/] "</span>);

                <span class="hljs-keyword">await</span> <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> chunk <span class="hljs-keyword">in</span> agent.RunStreamingAsync(input, thread))
                {
                    <span class="hljs-comment">// ç›´æ¥è¾“å‡ºç‰‡æ®µï¼Œä¸æ¢è¡Œ</span>
                    Console.Write(chunk);
                }

                Console.WriteLine(); <span class="hljs-comment">// ç»“æŸåæ‰‹åŠ¨æ¢è¡Œ</span>

                <span class="hljs-keyword">await</span> Task.Delay(<span class="hljs-number">500</span>);
                <span class="hljs-keyword">var</span> mem = thread.GetService&lt;CarMasterMemory&gt;()?.Preference;

                <span class="hljs-keyword">var</span> panel = <span class="hljs-keyword">new</span> Panel(<span class="hljs-string">$""</span><span class="hljs-string">"
            [yellow]é¢„ç®—é™åˆ¶ï¼š[/] {mem?.BudgetMax} ä¸‡
            [yellow]èƒ½æºåå¥½ï¼š[/] {mem?.EnergyType}
            [yellow]æ ¸å¿ƒéœ€æ±‚ï¼š[/] {(mem?.MustHaves.Any() == true ? string.Join("</span>ã€<span class="hljs-string">", mem.MustHaves) : "</span>å°šä¸æ˜ç¡®<span class="hljs-string">")}
            "</span><span class="hljs-string">""</span>)
                {
                    Header = <span class="hljs-keyword">new</span> PanelHeader(<span class="hljs-string">"ğŸš— [bold]å½“å‰ç”»åƒè®°å½•[/]"</span>),
                    Border = BoxBorder.Rounded
                };

                AnsiConsole.Write(panel);
            }
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">RunMasterWithToolsAsync</span>()</span>
        {
            <span class="hljs-keyword">var</span> chatClient = <span class="hljs-keyword">new</span> OpenAIClient(
                <span class="hljs-keyword">new</span> ApiKeyCredential(modelProvider.ApiKey),
                <span class="hljs-keyword">new</span> OpenAIClientOptions { Endpoint = <span class="hljs-keyword">new</span> Uri(modelProvider.Endpoint) })
                .GetChatClient(modelProvider.ModelId);

            <span class="hljs-keyword">var</span> agent = chatClient.CreateAIAgent(<span class="hljs-keyword">new</span> ChatClientAgentOptions
            {
                Name = <span class="hljs-string">"æ±½è½¦å¤§å¸ˆ"</span>,
                Description = <span class="hljs-string">"ä¸€ä¸ªä»ä¸š20å¹´çš„ä¸“ä¸šæ±½è½¦é¡¾é—®ï¼Œæ“…é•¿ç»“åˆç”¨æˆ·ç”»åƒè¿›è¡Œç²¾å‡†æ¨èã€‚"</span>,

                <span class="hljs-comment">// å°†æ¨ç†ç›¸å…³çš„é…ç½®æ”¾å…¥ ChatOptions</span>
                ChatOptions = <span class="hljs-keyword">new</span> ChatOptions
                {
                    Instructions = <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ±½è½¦æ¨èåŠ©æ‰‹ã€‚è¯·ä¼˜å…ˆå‚è€ƒåå°ç”»åƒã€‚å¦‚æœç”¨æˆ·è¯¢é—®å…·ä½“æ¨èï¼Œè¯·è°ƒç”¨ SearchCars å·¥å…·ã€‚"</span>,
                    Tools = [AIFunctionFactory.Create(<span class="hljs-keyword">new</span> CarTool().SearchCars)]
                },

                AIContextProviderFactory = ctx =&gt; <span class="hljs-keyword">new</span> CarMasterMemory(
                    chatClient.AsIChatClient(),
                    ctx.SerializedState,
                    ctx.JsonSerializerOptions),

                ChatMessageStoreFactory = ctx =&gt; <span class="hljs-keyword">new</span> VectorChatMessageStore(
                    _vectorStore,
                    ctx.SerializedState,
                    ctx.JsonSerializerOptions)
            });

            <span class="hljs-keyword">var</span> thread = agent.GetNewThread();

            <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)
            {
                <span class="hljs-keyword">var</span> input = AnsiConsole.Ask&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">"\n[white]ä½ :[/]"</span>);
                <span class="hljs-keyword">if</span> (input == <span class="hljs-string">"exit"</span>) <span class="hljs-keyword">break</span>;

                <span class="hljs-comment">// ä½¿ç”¨æµå¼è¾“å‡º</span>
                AnsiConsole.Markup(<span class="hljs-string">"[cyan]å¤§å¸ˆ:[/] "</span>);
                <span class="hljs-keyword">await</span> <span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">var</span> chunk <span class="hljs-keyword">in</span> agent.RunStreamingAsync(input, thread))
                {
                    Console.Write(chunk);
                }
                Console.WriteLine();

                <span class="hljs-keyword">var</span> mem = thread.GetService&lt;CarMasterMemory&gt;()?.Preference;
                AnsiConsole.Write(<span class="hljs-keyword">new</span> Panel(<span class="hljs-string">$"é¢„ç®—: <span class="hljs-subst">{mem?.BudgetMax}</span>w | èƒ½æº: <span class="hljs-subst">{mem?.EnergyType}</span>"</span>).Border(BoxBorder.Rounded));
            }
        }
    }
}

</code></pre>
<p>ç®€å•è¯´æ˜ä¸€ä¸‹ï¼Œè¿™ä¸ªæ¡ˆä¾‹ï¼Œå‰åŠéƒ¨åˆ†çš„ä»£ç æ˜¯æ ¸å¿ƒï¼Œé‡è½½äº†InvokingAsyncå’ŒInvokedAsyncä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«åœ¨è°ƒç”¨æ¨¡å‹å‰ï¼Œå’Œè°ƒç”¨æ¨¡å‹ååšä¸€äº›ä¸šåŠ¡ç›¸å…³çš„æ“ä½œï¼Œæ¯”å¦‚è¿™ä¸ªæ¡ˆä¾‹æ˜¯æ ¹æ®ç”¨æˆ·è¾“å…¥ï¼Œæç‚¼ä¸€ä¸ªç”¨æˆ·ç”»åƒï¼Œæœ‰å¤šå°‘é¢„ç®—ï¼Œå€¾å‘ä¹°ä»€ä¹ˆè½¦ç­‰ã€‚</p>
<p>ååŠéƒ¨åˆ†ï¼Œå®šä¹‰äº†3ä¸ªæ™ºèƒ½ä½“ï¼Œå…¶ä¸­RunMasterAsyncå’ŒRunMasterStreamAsyncå®é™…åªæœ‰ä¸€ä¸ªè¾“å‡ºæ–¹å¼çš„åŒºåˆ«ï¼Œè€ŒRunMasterWithToolsAsyncåˆ™åŒ…å«äº†ä¸€ä¸ªå·¥å…·çš„è°ƒç”¨ï¼Œæ™ºèƒ½ä½“ä¼šåœ¨åˆé€‚çš„æ—¶æœºè°ƒç”¨å·¥å…·æ‰§è¡Œæ“ä½œã€‚</p>
<ul>
<li>ä¸ä½¿ç”¨å·¥å…·</li>
</ul>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1768cbcb420246d09fc96c9de986b8d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdG9ueWRm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768219309&amp;x-signature=jAuPWw77dTvuZ56q810U6poGSNA%3D" alt="" loading="lazy"/></p>
<ul>
<li>ä½¿ç”¨å·¥å…·ï¼ˆåŠ¨å›¾ååŠéƒ¨åˆ†æ‰§è¡Œå·¥å…·ï¼‰</li>
</ul>

<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b547ec8d76ea436488ad90f0d9761b97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdG9ueWRm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768219309&amp;x-signature=rJGmQ9O%2Bfzg2v1dS8tGTNr3tNGU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">ç»“è¯­</h2>
<p>å¥½äº†ï¼Œå—ç¯‡å¹…é™åˆ¶ï¼Œå°±å†™åˆ°è¿™é‡Œå§ï¼Œä¸‹ä¸€ç¯‡å†æ¥èŠèŠå·¥ä½œæµçš„éƒ¨åˆ†ã€‚</p>
<blockquote>
<p>é™„ä¸€æ¡å°æ’æ›²ï¼Œæˆªæ­¢åˆ°ç¬”è€…å‘æ–‡ï¼Œåˆšåˆšçœ‹åˆ°C#è·å¾—äº†2025å¹´å¹´åº¦ç¼–ç¨‹è¯­è¨€ï¼Œå¤šå¹´æ¥ï¼ŒC#ç»å†äº†æ ¹æœ¬æ€§çš„å˜é©ã€‚ä»è¯­è¨€è®¾è®¡çš„è§’åº¦æ¥çœ‹ï¼ŒC#å¸¸å¸¸ç‡å…ˆé‡‡çº³ä¸»æµè¯­è¨€ä¸­çš„æ–°è¶‹åŠ¿ã€‚ä¸æ­¤åŒæ—¶ï¼Œå®ƒæˆåŠŸå®Œæˆäº†ä¸¤æ¬¡é‡å¤§èŒƒå¼è½¬å˜ï¼šä»ä»…é™Windowsåˆ°è·¨å¹³å°ï¼Œä»¥åŠä»å¾®è½¯ä¸“æœ‰åˆ°å¼€æºã€‚C#å§‹ç»ˆèƒ½åœ¨æ°å½“çš„æ—¶æœºå®ç°ä¸æ—¶ä¿±è¿›çš„æ¼”è¿›ã€‚</p>

</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00ce0e157f1a40d0967709d11863a66a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdG9ueWRm:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768219309&amp;x-signature=HFnEl4flnSjTZQBKiTgdFuBk2z8%3D" alt="" loading="lazy"/></p>
<blockquote>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ï¼ˆæºç +å®ä¾‹ï¼‰å¤§å®¶éƒ½åœ¨è¯´Agentï¼Œé‚£ä¹ˆAgentåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7591703562134011938</link>    <guid>https://juejin.cn/post/7591703562134011938</guid>    <pubDate>2026-01-05T13:14:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591703562134011938" data-draft-id="7591293897085550642" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ï¼ˆæºç +å®ä¾‹ï¼‰å¤§å®¶éƒ½åœ¨è¯´Agentï¼Œé‚£ä¹ˆAgentåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="Agent,Python,LLM"/> <meta itemprop="datePublished" content="2026-01-05T13:14:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯»æ‰¾å…‰_sxy"/> <meta itemprop="url" content="https://juejin.cn/user/1495754537711661"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ï¼ˆæºç +å®ä¾‹ï¼‰å¤§å®¶éƒ½åœ¨è¯´Agentï¼Œé‚£ä¹ˆAgentåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1495754537711661/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯»æ‰¾å…‰_sxy
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T13:14:51.000Z" title="Mon Jan 05 2026 13:14:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨äº†è§£<code>Agent</code>ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹<code>LLM</code>ï¼›</p>
<p>æˆ‘ä»¬éƒ½çŸ¥é“22å¹´11æœˆ30æ—¥ï¼Œ<code>OpenAI</code>å‘å¸ƒäº†<code>ChatGPT</code>ï¼Œè€Œ<code>ChatGPT</code>å°±æ˜¯<code>LLM</code>çš„å…¸å‹çš„åº”ç”¨å®ä¾‹ä¹‹ä¸€ï¼ŒåŒ…æ‹¬åé¢å‘å¸ƒçš„æ–‡å¿ƒä¸€è¨€ã€é€šä¹‰åƒé—®ç­‰å¤§æ¨¡å‹ã€‚</p>
<p><code>LLM</code>å…¨ç§°<code>Large Language Model</code>ï¼Œä¸­æ–‡ä¸ºå¤§è¯­è¨€æ¨¡å‹ï¼Œæ˜¯äººå·¥æ™ºèƒ½é¢†åŸŸä¸­è‡ªç„¶è¯­è¨€å¤„ç†(<code>NLP</code>)æ–¹å‘çš„æ ¸å¿ƒæŠ€æœ¯ï¼Œä¹Ÿæ˜¯å½“å‰ç”Ÿæˆå¼<code>AI</code>çš„åº•å±‚æ”¯æ’‘ã€‚å®ƒçš„æœ¬è´¨æ˜¯<strong>åŸºäºæµ·é‡æ–‡æœ¬æ•°æ®è®­ç»ƒã€å…·å¤‡å¼ºå¤§è¯­è¨€ç†è§£ä¸ç”Ÿæˆèƒ½åŠ›çš„æ·±åº¦å­¦ä¹ æ¨¡å‹</strong>ã€‚</p>
<p>æˆ‘ä»¬ä»ä»¥ä¸Šçš„æ¦‚å¿µä¸­å¾ˆå®¹æ˜“å°±èƒ½çœ‹åˆ°<code>LLM</code>çš„ä¸€äº›å±€é™ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li><strong>è¯­è¨€ç†è§£</strong>ï¼šåªèƒ½åŸºäºè®­ç»ƒè¿‡çš„æ–‡æœ¬æ•°æ®å»è¿›è¡Œç†è§£</li>
<li><strong>è¯­è¨€ç”Ÿæˆ</strong>ï¼šåªèƒ½ä»¥æ–‡æœ¬çš„æ–¹å¼å»è¿›è¡Œäº¤äº’</li>
</ul>
<p>è¿™ä¸¤ä¸ªå±€é™ä½¿å¾—<code>LLM</code>æ›´åƒæ˜¯ä¸€ä¸ªå»ºè®®è€…ã€å¼€è½¦æ—¶çš„å‰¯é©¾é©¶ï¼Œæ— æ³•æ‰§è¡Œå…·ä½“çš„åŠ¨ä½œã€‚</p>
<p>è€Œåœ¨<code>AI</code>çš„å‘å±•ä¸­ï¼Œæˆ‘ä»¬æ›´éœ€è¦<code>AI</code>å»åšä¸€ä¸ªæ‰§è¡Œè€…ï¼Œå»åšå¸æœºï¼Œå»å®é™…å‚ä¸ç‰©ç†ä¸–ç•Œï¼Œç”±æ­¤ï¼Œ<code>Agent</code>å‘å±•å‡ºæ¥äº†ã€‚</p>
<h2 data-id="heading-1">æ¦‚å¿µ</h2>
<p>ç°åœ¨æˆ‘ä»¬å¸¸å¸¸ç”¨è¿™æ ·çš„ä¸€ä¸ª<strong>æ™ºèƒ½ä½“æ¶æ„å…¬å¼</strong>å»ç†è§£<code>Agent</code>:</p>
<blockquote>
<p>Agent(æ™ºèƒ½ä½“) = LLM(å¤§è¯­è¨€æ¨¡å‹) + Perception(æ„ŸçŸ¥) + Planning(è§„åˆ’)+ Memory(è®°å¿†) + Tools(å·¥å…·)</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1d7a394cfd94251a4923acad2f929fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a-75om-5YWJX3N4eQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768223768&amp;x-signature=Wq8HeUx%2BKRvdtSmpyhzxjTwWgq4%3D" alt="AI çš„æ¦‚å¿µåŠåº”ç”¨.png" loading="lazy"/></p>
<p>æœ‰äº† <strong>LLM(å¤§è¯­è¨€æ¨¡å‹)</strong>ã€<strong>Perception(æ„ŸçŸ¥)</strong>ã€<strong>Planning(è§„åˆ’)</strong>ã€<strong>Memory(è®°å¿†)</strong> ã€<strong>Tools(å·¥å…·)</strong>ï¼Œ<code>Agent</code>çœŸæ­£å…·å¤‡äº†äº”å®˜ä¸æ‰‹è„šï¼Œå»ç†è§£ã€æ“ä½œæˆ‘ä»¬çš„ç‰©ç†ä¸–ç•Œï¼š</p>
<ul>
<li><strong>LLM(å¤§è¯­è¨€æ¨¡å‹ï¼‰</strong>ï¼š<code>Agent</code>çš„å¤§è„‘
<ul>
<li>å…·ä½“å¯å‚è€ƒå‰è¨€éƒ¨åˆ†</li>
</ul>
</li>
<li><strong>Perception(æ„ŸçŸ¥)</strong>ï¼š<code>Agent</code>ä¸å¤–éƒ¨æ²Ÿé€šçš„æ¡¥æ¢ï¼Œé€šè¿‡å¤šç§æ¸ é“æ„ŸçŸ¥ç¯å¢ƒä¿¡æ¯ï¼Œç±»ä¼¼äºäººçš„æ„Ÿå®˜
<ul>
<li><strong>è§†è§‰æ„ŸçŸ¥ï¼ˆCVï¼‰</strong>
<ul>
<li>é€šè¿‡æ‘„åƒå¤´æˆ–å›¾åƒè¾“å…¥ï¼Œçœ‹åˆ°å¹¶ç†è§£å†…å®¹</li>
</ul>
</li>
<li><strong>å¬è§‰æ„ŸçŸ¥(ASR)</strong>
<ul>
<li>é€šè¿‡éº¦å…‹é£æˆ–éŸ³é¢‘è¾“å…¥ï¼Œå¬åˆ°å¹¶è¯†åˆ«è¯­éŸ³å†…å®¹</li>
</ul>
</li>
<li><strong>å…¶å®ƒæ„ŸçŸ¥</strong>
<ul>
<li>é›†æˆä¼ æ„Ÿå™¨ï¼Œæ„ŸçŸ¥ç¯å¢ƒçš„ç‰©ç†çŠ¶æ€ï¼Œå¦‚æ¸©åº¦ã€æ¹¿åº¦ã€å‘³é“ç­‰</li>
</ul>
</li>
</ul>
</li>
<li><strong>Planning(è§„åˆ’)</strong>ï¼š<code>Agent</code>çš„å†³ç­–æ‰§è¡Œå¼•æ“ï¼Œè´Ÿè´£å°†<code>LLM</code>æ‹†è§£çš„ç›®æ ‡è½¬åŒ–ä¸ºå¯æ‰§è¡Œçš„åˆ†å¸ƒè®¡åˆ’ï¼Œå¹¶æ ¹æ®åé¦ˆåŠ¨æ€è°ƒæ•´ç­–ç•¥
<ul>
<li><strong>ä»»åŠ¡æ‹†è§£</strong>
<ul>
<li>å°†å¤æ‚ç›®æ ‡æ‹†è§£æˆä¸€ç³»åˆ—å¯æ‰§è¡Œçš„ç®€å•å­ä»»åŠ¡</li>
</ul>
</li>
<li><strong>åˆ¶å®šç­–ç•¥</strong>
<ul>
<li>ä¸ºæ¯ä¸ªå­ä»»åŠ¡è§„åˆ’å‡ºå…·ä½“çš„æ‰§è¡Œæ­¥éª¤å’Œæ–¹æ³•</li>
</ul>
</li>
<li><strong>åŠ¨æ€è°ƒæ•´</strong>
<ul>
<li>æ ¹æ®æ‰§è¡Œåé¦ˆçµæ´»è°ƒæ•´è®¡åˆ’ï¼Œåº”å¯¹çªå‘æƒ…å†µ</li>
</ul>
</li>
</ul>
</li>
<li><strong>Memory(è®°å¿†)</strong>ï¼š<code>Agent</code>çš„é•¿æœŸçŸ¥è¯†åº“ï¼Œè§£å†³<code>LLM</code>ä¸Šä¸‹æ–‡çª—å£æœ‰é™çš„é—®é¢˜ï¼Œä¸º<code>Agent</code>æä¾›é•¿æœŸå­¦ä¹ å’Œç»éªŒç§¯ç´¯çš„èƒ½åŠ›
<ul>
<li><strong>çŸ­æœŸè®°å¿†</strong>
<ul>
<li>ç±»ä¼¼å·¥ä½œè®°å¿†ï¼Œå­˜å‚¨å½“å‰ä»»åŠ¡ä¸Šä¸‹æ–‡ï¼Œæ”¯æŒå¤šè½®å¯¹è¯ä¸ä»»åŠ¡è¿è´¯æ€§</li>
</ul>
</li>
<li><strong>é•¿æœŸè®°å¿†</strong>
<ul>
<li>ç±»ä¼¼çŸ¥è¯†åº“ï¼ŒæŒä¹…åŒ–å­˜å‚¨çŸ¥è¯†ã€åå¥½ä¸ç»éªŒï¼Œå¯éšæ—¶æ£€ç´¢åˆ©ç”¨</li>
</ul>
</li>
</ul>
</li>
<li><strong>Tools(å·¥å…·)</strong>ï¼š<code>Agent</code>çš„åŒæ‰‹ï¼Œè®©<code>Agent</code>çªç ´çº¯æ–‡æœ¬èƒ½åŠ›é™åˆ¶ï¼Œå®ç°"çŸ¥è¡Œåˆä¸€"çš„ä»»åŠ¡æ‰§è¡Œ
<ul>
<li><strong>è®¿é—®ä¿¡æ¯</strong>
<ul>
<li>é€šè¿‡æœç´¢å¼•æ“è·å–æœ€æ–°ã€æœ€å‡†ç¡®çš„ä¿¡æ¯</li>
</ul>
</li>
<li><strong>æ‰§è¡Œè®¡ç®—</strong>
<ul>
<li>ä½¿ç”¨è®¡ç®—å™¨æˆ–ä»£ç ç¼–è¾‘å™¨å®Œæˆå¤æ‚è¿ç®—å’Œæ•°æ®åˆ†æ</li>
</ul>
</li>
<li><strong>æ§åˆ¶è®¾å¤‡</strong>
<ul>
<li>é€šè¿‡<code>API</code>è°ƒç”¨ï¼Œæ§åˆ¶æ™ºèƒ½å®¶å±…ã€å·¥ä¸šæœºå™¨äººç­‰ç‰©ç†è®¾å¤‡</li>
</ul>
</li>
<li><strong>æ“ä½œè½¯ä»¶</strong>
<ul>
<li>è‡ªåŠ¨æ“ä½œç”µè„‘è½¯ä»¶ï¼Œå¦‚<code>Excel</code>ã€<code>Photoshop</code>ç­‰</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 data-id="heading-2">Demo</h2>
<p>äº†è§£äº†ä¸Šé¢çš„æ¦‚å¿µï¼Œæˆ‘ä»¬æ¥å®æ“ä¸€ä¸‹ï¼Œæ­å»ºä¸€ä¸ªæœ¬åœ°çš„<code>Agent</code>ï¼›</p>
<h3 data-id="heading-3">Demoä»‹ç»</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2878d43022d44dbb95f7295db0e0d48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a-75om-5YWJX3N4eQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768223768&amp;x-signature=YzrmbgYU8w4XuXaQizS0SIRpssg%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-4">åŠŸèƒ½</h4>
<p>å®ç°çš„<code>Agent</code>çš„åŠŸèƒ½ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>ç†è§£ç”¨æˆ·çš„è‡ªç„¶è¯­è¨€é—®é¢˜</li>
<li>è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨å¤–éƒ¨å·¥å…·</li>
<li>æ‰§è¡Œ <code>Python</code> å‡½æ•°ï¼ˆå¦‚è·å–æ—¶é—´ã€æ•°å­¦è®¡ç®—æ±‚å’Œï¼‰</li>
<li>å°†å·¥å…·æ‰§è¡Œç»“æœæ•´åˆæˆäººç±»å¯è¯»çš„å›ç­”</li>
</ul>
<h4 data-id="heading-5">æŠ€æœ¯æ ˆ</h4>
<p>åŸºäº<code>ReAct</code>ç»“æ„ï¼Œç”¨é€šä¹‰åƒé—®å¤§æ¨¡å‹ä½œä¸º<code>AI</code>åŸºåº§ï¼Œ<code>Python3</code>ä½œä¸ºå¼€å‘è¯­è¨€ï¼š</p>
<ul>
<li><strong>å¤§æ¨¡å‹</strong>ï¼šé˜¿é‡Œäº‘ç™¾ç‚¼ï¼ˆé€šä¹‰åƒé—®ï¼‰</li>
<li><strong>é€šä¿¡åè®®</strong>ï¼š<code>OpenAI</code> å…¼å®¹æ¨¡å¼</li>
<li><strong>ç¼–ç¨‹è¯­è¨€</strong>ï¼š<code>Python 3.8+</code></li>
</ul>
<h4 data-id="heading-6">æ–‡ä»¶ç›®å½•</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/751b3a5fe0f74924ac5b069ed070b475~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a-75om-5YWJX3N4eQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768223768&amp;x-signature=8Hol5V6aoyViSPviwV%2BsIAtzzJw%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">Demoå®ç°</h3>
<h4 data-id="heading-8">ç¬¬ä¸€æ­¥ï¼šè·å–API Key</h4>
<p>æˆ‘è¿™é‡Œç”¨çš„æ˜¯é˜¿é‡Œäº‘çš„å¤§æ¨¡å‹ï¼š</p>
<ul>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fbailian.console.aliyun.com%2F" target="_blank" title="https://bailian.console.aliyun.com/" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘ç™¾ç‚¼æ§åˆ¶å°</a></li>
<li>æ³¨å†Œ/ç™»å½•è´¦å·</li>
<li>åˆ›å»º <code>API Key</code></li>
</ul>
<h4 data-id="heading-9">ç¬¬äºŒæ­¥ï¼šå®‰è£…ä¾èµ–</h4>
<p>åˆ›å»º <code>requirements.txt</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-txt" lang="txt">openai
python-dotenv
</code></pre>
<p>å®‰è£…ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip3 install -r requirements.txt
</code></pre>
<h4 data-id="heading-10">ç¬¬ä¸‰æ­¥ï¼šé…ç½®ç¯å¢ƒå˜é‡</h4>
<p>åˆ›å»º <code>.env</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-env" lang="env">DASHSCOPE_API_KEY=ä½ çš„API_KEY
</code></pre>
<h4 data-id="heading-11">ç¬¬å››æ­¥ï¼šå®ç°å·¥å…·è½¬æ¢å™¨ï¼ˆutils.pyï¼‰</h4>
<p>åˆ›å»º<code>utils.py</code>æ–‡ä»¶ï¼Œåˆ©ç”¨Python çš„ <code>inspect</code> æ¨¡å—ï¼Œè¯»å–å‡½æ•°çš„å‡½æ•°åã€å‚æ•°åˆ—è¡¨å’Œç±»å‹æ³¨è§£ï¼Œç”Ÿæˆå¤§æ¨¡å‹å¯ç†è§£çš„<code>JSON Schema</code>ï¼Œè®©å¤§æ¨¡å‹å»äº†è§£å·¥å…·çš„åŠŸèƒ½å’Œå‚æ•°</p>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">import</span> inspect

<span class="hljs-keyword">def</span> <span class="hljs-title function_">function_to_json</span>(<span class="hljs-params">func</span>) -&gt; <span class="hljs-built_in">dict</span>:
    <span class="hljs-string">"""
    é€šè¿‡ Python åå°„æœºåˆ¶ï¼Œè‡ªåŠ¨å°†ä¸€ä¸ª Python å‡½æ•°è½¬æ¢ä¸º OpenAI/DashScope å…¼å®¹çš„å·¥å…·å®šä¹‰ (JSON Schema)ã€‚
    è¿™ä½¿å¾—æˆ‘ä»¬åªéœ€è¦ç¼–å†™æ™®é€šçš„ Python å‡½æ•°ï¼Œå°±èƒ½ç›´æ¥è¢« Agent è¯†åˆ«å’Œè°ƒç”¨ã€‚
    """</span>
    <span class="hljs-comment"># è·å–å‡½æ•°çš„ç­¾åä¿¡æ¯ï¼ˆåŒ…å«å‚æ•°åã€å‚æ•°ç±»å‹æ³¨è§£ã€é»˜è®¤å€¼ç­‰ï¼‰</span>
    sig = inspect.signature(func)
    parameters = {}
    required = []

    <span class="hljs-comment"># éå†å‡½æ•°çš„æ‰€æœ‰å‚æ•°</span>
    <span class="hljs-keyword">for</span> name, param <span class="hljs-keyword">in</span> sig.parameters.items():
        <span class="hljs-comment"># æ ¹æ® Python çš„ç±»å‹æ³¨è§£æ¨æ–­ JSON Schema çš„ç±»å‹</span>
        <span class="hljs-keyword">if</span> param.annotation == <span class="hljs-built_in">float</span>:
            param_type = <span class="hljs-string">"number"</span>
        <span class="hljs-keyword">elif</span> param.annotation == <span class="hljs-built_in">int</span>:
            param_type = <span class="hljs-string">"integer"</span>
        <span class="hljs-keyword">elif</span> param.annotation == <span class="hljs-built_in">str</span>:
            param_type = <span class="hljs-string">"string"</span>
        <span class="hljs-keyword">elif</span> param.annotation == <span class="hljs-built_in">bool</span>:
            param_type = <span class="hljs-string">"boolean"</span>
        <span class="hljs-keyword">else</span>:
            <span class="hljs-comment"># é»˜è®¤è®¾ä¸º string</span>
            param_type = <span class="hljs-string">"string"</span>

        <span class="hljs-comment"># æ„é€ å•ä¸ªå‚æ•°çš„ schema å®šä¹‰</span>
        parameters[name] = {<span class="hljs-string">"type"</span>: param_type}

        <span class="hljs-comment"># å¦‚æœå‚æ•°æ²¡æœ‰è®¾å®šé»˜è®¤å€¼ï¼Œåˆ™åœ¨ Schema ä¸­æ ‡è®°ä¸ºå¿…å¡«é¡¹ (required)</span>
        <span class="hljs-keyword">if</span> param.default <span class="hljs-keyword">is</span> inspect.Parameter.empty:
            required.append(name)

    <span class="hljs-comment"># è¿”å›ç¬¦åˆ OpenAI Tool å®šä¹‰è§„èŒƒçš„å­—å…¸ç»“æ„</span>
    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"function"</span>,
        <span class="hljs-string">"function"</span>: {
            <span class="hljs-string">"name"</span>: func.__name__,                      <span class="hljs-comment"># å‡½æ•°å</span>
            <span class="hljs-string">"description"</span>: inspect.getdoc(func) <span class="hljs-keyword">or</span> <span class="hljs-string">""</span>,  <span class="hljs-comment"># ä½¿ç”¨å‡½æ•°çš„ docstring ä½œä¸ºå·¥å…·æè¿°</span>
            <span class="hljs-string">"parameters"</span>: {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
                <span class="hljs-string">"properties"</span>: parameters,                <span class="hljs-comment"># å‚æ•°åˆ—è¡¨</span>
                <span class="hljs-string">"required"</span>: required,                    <span class="hljs-comment"># å¿…å¡«å‚æ•°åˆ—è¡¨</span>
            },
        },
    }

</code></pre>
<h4 data-id="heading-12">ç¬¬äº”æ­¥ï¼šå®šä¹‰å·¥å…·å‡½æ•°ï¼ˆtools/ï¼‰</h4>
<p><strong>å…³é”®ç‚¹</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªå‡½æ•°å¿…é¡»æœ‰æ¸…æ™°çš„ <strong>docstring</strong>ï¼ˆæ¨¡å‹ç”¨å®ƒæ¥ç†è§£å·¥å…·ç”¨é€”ï¼‰</li>
<li>ä½¿ç”¨ <strong>ç±»å‹æ³¨è§£</strong>æ ‡æ³¨å‚æ•°ç±»å‹</li>
<li>å‡½æ•°åè¦æœ‰è¯­ä¹‰ï¼Œä¾¿äºæ¨¡å‹é€‰æ‹©</li>
</ul>
<h5 data-id="heading-13">5.1 æ—¶é—´å·¥å…·ï¼ˆtools/time_tool.pyï¼‰</h5>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime


<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_current_datetime</span>() -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""
    è·å–å½“å‰æ—¥æœŸå’Œæ—¶é—´çš„å·¥å…·ã€‚
    Agent å¯ä»¥è°ƒç”¨æ­¤å·¥å…·æ¥äº†è§£å½“å‰çš„å®æ—¶æ—¶é—´ã€‚
    :return: æ ¼å¼åŒ–åçš„æ—¥æœŸæ—¶é—´å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ "2024-01-05 12:00:00"ã€‚
    """</span>
    current_datetime = datetime.now()
    formatted_datetime = current_datetime.strftime(<span class="hljs-string">"%Y-%m-%d %H:%M:%S"</span>)
    <span class="hljs-keyword">return</span> formatted_datetime

</code></pre>
<h5 data-id="heading-14">5.2 æ•°å­¦å·¥å…·ï¼ˆtools/math_tools.pyï¼‰</h5>
<pre><code class="hljs language-py" lang="py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">int</span>, b: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:
    <span class="hljs-string">"""
    è®¡ç®—ä¸¤ä¸ªæ•´æ•°çš„å’Œã€‚
    Agent ä¼šåœ¨éœ€è¦è¿›è¡ŒåŠ æ³•è¿ç®—æ—¶è‡ªåŠ¨è°ƒç”¨æ­¤å·¥å…·ã€‚
    """</span>
    <span class="hljs-keyword">return</span> a + b

</code></pre>
<h4 data-id="heading-15">ç¬¬å…­æ­¥ï¼šå®ç° Agent æ ¸å¿ƒé€»è¾‘ï¼ˆagent.pyï¼‰</h4>
<ul>
<li>ç»´æŠ¤å¯¹è¯å†å²ï¼ˆ<code>Memory</code> - çŸ­æœŸè®°å¿†ï¼‰</li>
<li>è°ƒç”¨å¤§æ¨¡å‹ï¼ˆ<code>LLM</code>ï¼‰</li>
<li>è§£æå·¥å…·è°ƒç”¨æŒ‡ä»¤ï¼ˆ<code>Planning</code> - ä»»åŠ¡è§„åˆ’ï¼‰</li>
<li>æ‰§è¡Œå·¥å…·å¹¶åé¦ˆç»“æœï¼ˆ<code>Tools</code> - å·¥å…·æ‰§è¡Œï¼‰</li>
</ul>
<h5 data-id="heading-16">6.1 åˆå§‹åŒ–</h5>
<p>åˆå§‹åŒ–ç³»ç»Ÿæç¤ºè¯ï¼Œåˆ›å»ºå·¥å…·æ˜ å°„</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> json
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>, <span class="hljs-type">Dict</span>, <span class="hljs-type">Any</span>
<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI
<span class="hljs-keyword">from</span> utils <span class="hljs-keyword">import</span> function_to_json

SYSTEM_PROMPT = <span class="hljs-string">"""
ä½ æ˜¯ä¸€ä¸ªäººå·¥æ™ºèƒ½åŠ©æ‰‹ã€‚ä½ çš„è¾“å‡ºåº”è¯¥ä¸ç”¨æˆ·çš„è¯­è¨€ä¿æŒä¸€è‡´ã€‚
å½“ç”¨æˆ·çš„é—®é¢˜éœ€è¦è°ƒç”¨å·¥å…·æ—¶ï¼Œä½ å¯ä»¥ä»æä¾›çš„å·¥å…·åˆ—è¡¨ä¸­è°ƒç”¨é€‚å½“çš„å·¥å…·å‡½æ•°ã€‚
"""</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Agent</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, client: OpenAI, model: <span class="hljs-built_in">str</span> = <span class="hljs-string">"qwen-plus"</span>, 
                 tools: <span class="hljs-type">List</span> = <span class="hljs-literal">None</span>, verbose: <span class="hljs-built_in">bool</span> = <span class="hljs-literal">True</span></span>):
        self.client = client
        self.tools = tools <span class="hljs-keyword">or</span> []
        self.model = model
        <span class="hljs-comment"># Memory: åˆå§‹åŒ–å¯¹è¯å†å²ï¼ŒåŒ…å«ç³»ç»Ÿæç¤ºè¯</span>
        self.messages = [{<span class="hljs-string">"role"</span>: <span class="hljs-string">"system"</span>, <span class="hljs-string">"content"</span>: SYSTEM_PROMPT}]
        self.verbose = verbose
        <span class="hljs-comment"># Tools: åˆ›å»ºå·¥å…·æ˜ å°„ï¼šå‡½æ•°å -&gt; å‡½æ•°å¯¹è±¡</span>
        self.tool_map = {tool.__name__: tool <span class="hljs-keyword">for</span> tool <span class="hljs-keyword">in</span> self.tools}
</code></pre>
<h5 data-id="heading-17">6.2 å·¥å…· Schema ç”Ÿæˆ</h5>
<p>å°†æ—¶é—´å·¥å…·å’Œæ•°å­¦å·¥å…·è½¬æ¢ä¸ºæ¨¡å‹å¯è¯†åˆ«çš„<code>JSON Schema</code></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_tool_schema</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]]:
    <span class="hljs-string">"""å°† Python å‡½æ•°åˆ—è¡¨è½¬æ¢ä¸ºæ¨¡å‹å¯è¯†åˆ«çš„ JSON Schema"""</span>
    <span class="hljs-keyword">return</span> [function_to_json(tool) <span class="hljs-keyword">for</span> tool <span class="hljs-keyword">in</span> self.tools]
</code></pre>
<h5 data-id="heading-18">6.3 å·¥å…·è°ƒç”¨å¤„ç†</h5>
<p>å¤„ç†æ¨¡å‹å‘å‡ºçš„å•ä¸ªå·¥å…·è°ƒç”¨é€»è¾‘</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_tool_call</span>(<span class="hljs-params">self, tool_call</span>):
    <span class="hljs-string">"""å¤„ç†æ¨¡å‹å‘å‡ºçš„å•ä¸ªå·¥å…·è°ƒç”¨è¯·æ±‚"""</span>
    function_name = tool_call.function.name
    function_args_str = tool_call.function.arguments
    function_id = tool_call.<span class="hljs-built_in">id</span>

    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># è§£æ JSON å­—ç¬¦ä¸²å‚æ•°</span>
        function_args = json.loads(function_args_str)
        
        <span class="hljs-comment"># ä»æ˜ å°„è¡¨ä¸­æŸ¥æ‰¾å¹¶æ‰§è¡Œå‡½æ•°</span>
        <span class="hljs-keyword">if</span> function_name <span class="hljs-keyword">in</span> self.tool_map:
            <span class="hljs-keyword">if</span> self.verbose:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"&gt;&gt;&gt; æ­£åœ¨æ‰§è¡Œå·¥å…·: <span class="hljs-subst">{function_name}</span>, å‚æ•°: <span class="hljs-subst">{function_args}</span>"</span>)
            
            func = self.tool_map[function_name]
            result = func(**function_args)
        <span class="hljs-keyword">else</span>:
            result = <span class="hljs-string">f"é”™è¯¯: æ‰¾ä¸åˆ°åä¸º <span class="hljs-subst">{function_name}</span> çš„å·¥å…·"</span>
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        result = <span class="hljs-string">f"å·¥å…·æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºé”™: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>

    <span class="hljs-keyword">return</span> {
        <span class="hljs-string">"role"</span>: <span class="hljs-string">"tool"</span>,
        <span class="hljs-string">"content"</span>: <span class="hljs-built_in">str</span>(result),
        <span class="hljs-string">"tool_call_id"</span>: function_id,
    }
</code></pre>
<h5 data-id="heading-19">6.4 ReAct å¾ªç¯ï¼ˆæ ¸å¿ƒé€»è¾‘ - Planningï¼‰</h5>
<p>å¤„ç†ç”¨æˆ·è¾“å…¥çš„æ ¸å¿ƒæ–¹æ³•ï¼Œå®ç° <code>ReAct</code> å¾ªç¯ï¼š</p>
<blockquote>
<p>Reasoningï¼ˆæ¨ç†ï¼‰-&gt; Actingï¼ˆè¡ŒåŠ¨ï¼‰-&gt; Observingï¼ˆè§‚å¯Ÿï¼‰-&gt; Reasoningï¼ˆå†æ¨ç†ï¼‰</p>
</blockquote>
<p>å®ç° <code>Planningï¼ˆè§„åˆ’ï¼‰</code>çš„æ ¸å¿ƒæ€æƒ³ï¼š</p>
<ul>
<li><strong>ä»»åŠ¡æ‹†è§£</strong>ï¼šå°†ç”¨æˆ·é—®é¢˜æ‹†è§£ä¸ºå¯æ‰§è¡Œçš„å·¥å…·è°ƒç”¨</li>
<li><strong>åˆ¶å®šç­–ç•¥</strong>ï¼šå†³å®šè°ƒç”¨å“ªäº›å·¥å…·ã€ä»¥ä»€ä¹ˆé¡ºåºè°ƒç”¨</li>
<li><strong>åŠ¨æ€è°ƒæ•´</strong>ï¼šæ ¹æ®å·¥å…·æ‰§è¡Œç»“æœè°ƒæ•´åç»­ç­–ç•¥</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_completion</span>(<span class="hljs-params">self, prompt: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
   
    <span class="hljs-comment"># Memory: æ·»åŠ ç”¨æˆ·é—®é¢˜åˆ°å†å²</span>
    self.messages.append({<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: prompt})

    <span class="hljs-comment"># Planning: ç¬¬ä¸€æ¬¡è¯·æ±‚ - LLM åˆ¤æ–­æ˜¯å¦éœ€è¦å·¥å…·</span>
    response = self.client.chat.completions.create(
        model=self.model,
        messages=self.messages,
        tools=self.get_tool_schema() <span class="hljs-keyword">if</span> self.tools <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,
        stream=<span class="hljs-literal">False</span>,
    )

    message = response.choices[<span class="hljs-number">0</span>].message

    <span class="hljs-comment"># Planning: å¾ªç¯å¤„ç†å·¥å…·è°ƒç”¨ï¼ˆæ”¯æŒå¤šæ¬¡è°ƒç”¨æˆ–é“¾å¼è°ƒç”¨ï¼‰</span>
    <span class="hljs-keyword">while</span> message.tool_calls:
        <span class="hljs-comment"># Memory: å°†æ¨¡å‹çš„å·¥å…·è°ƒç”¨è¯·æ±‚åŠ å…¥å†å²</span>
        self.messages.append(message)

        <span class="hljs-comment"># Tools: æ‰§è¡Œæ‰€æœ‰è¯·æ±‚çš„å·¥å…·</span>
        <span class="hljs-keyword">for</span> tool_call <span class="hljs-keyword">in</span> message.tool_calls:
            tool_result_message = self.handle_tool_call(tool_call)
            <span class="hljs-comment"># Memory: å°†å·¥å…·æ‰§è¡Œç»“æœåŠ å…¥å†å²</span>
            self.messages.append(tool_result_message)

        <span class="hljs-comment"># Planning: å¸¦ç€å·¥å…·ç»“æœå†æ¬¡è¯·æ±‚æ¨¡å‹ï¼Œè¿›è¡ŒåŠ¨æ€è°ƒæ•´</span>
        response = self.client.chat.completions.create(
            model=self.model,
            messages=self.messages,
            tools=self.get_tool_schema() <span class="hljs-keyword">if</span> self.tools <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span>,
            stream=<span class="hljs-literal">False</span>,
        )
        message = response.choices[<span class="hljs-number">0</span>].message

    <span class="hljs-comment"># Memory: æ¨¡å‹ä¸å†è°ƒç”¨å·¥å…·ï¼Œè¿”å›æœ€ç»ˆå›å¤ï¼Œå­˜å…¥å†å²å¹¶è¿”å›</span>
    self.messages.append({<span class="hljs-string">"role"</span>: <span class="hljs-string">"assistant"</span>, <span class="hljs-string">"content"</span>: message.content})
    <span class="hljs-keyword">return</span> message.content <span class="hljs-keyword">or</span> <span class="hljs-string">""</span>
</code></pre>
<h4 data-id="heading-20">ç¬¬ä¸ƒæ­¥ï¼šåˆ›å»ºä¸»ç¨‹åºï¼ˆmain.pyï¼‰</h4>
<ul>
<li>åˆå§‹åŒ–<code>OpenAI</code></li>
<li>åˆ›å»º<code>Agent</code>å®ä¾‹ï¼Œå¹¶æ³¨å…¥å·¥å…·</li>
<li>äº¤äº’å¼å¯¹è¯å¾ªç¯</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv
<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI
<span class="hljs-keyword">from</span> agent <span class="hljs-keyword">import</span> Agent
<span class="hljs-keyword">from</span> tools.time_tool <span class="hljs-keyword">import</span> get_current_datetime
<span class="hljs-keyword">from</span> tools.math_tools <span class="hljs-keyword">import</span> add, compare, count_letter_in_string

load_dotenv()

API_KEY = os.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> API_KEY:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"é”™è¯¯: è¯·åœ¨ .env æ–‡ä»¶ä¸­é…ç½® DASHSCOPE_API_KEY"</span>)
        exit(<span class="hljs-number">1</span>)

    <span class="hljs-comment"># åˆå§‹åŒ– OpenAI å®¢æˆ·ç«¯ï¼ˆä½¿ç”¨é˜¿é‡Œäº‘ç™¾ç‚¼çš„å…¼å®¹æ¥å£ï¼‰</span>
    client = OpenAI(
        api_key=API_KEY,
        base_url=<span class="hljs-string">"https://dashscope.aliyuncs.com/compatible-mode/v1"</span>,
    )

    <span class="hljs-comment"># åˆ›å»º Agent å®ä¾‹ï¼Œæ³¨å…¥å·¥å…·</span>
    agent = Agent(
        client=client,
        model=<span class="hljs-string">"qwen-plus"</span>,
        tools=[get_current_datetime, add, compare, count_letter_in_string],
        verbose=<span class="hljs-literal">True</span>,
    )

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"JUN äººå·¥æ™ºèƒ½åŠ©æ‰‹å·²å¯åŠ¨ï¼(è¾“å…¥ 'exit' é€€å‡º)"</span>)

    <span class="hljs-comment"># äº¤äº’å¼å¯¹è¯å¾ªç¯</span>
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        <span class="hljs-keyword">try</span>:
            prompt = <span class="hljs-built_in">input</span>(<span class="hljs-string">"\033[94mUser: \033[0m"</span>)
            
            <span class="hljs-keyword">if</span> prompt.lower() <span class="hljs-keyword">in</span> [<span class="hljs-string">"exit"</span>, <span class="hljs-string">"quit"</span>, <span class="hljs-string">"é€€å‡º"</span>]:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">"å†è§ï¼"</span>)
                <span class="hljs-keyword">break</span>

            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> prompt.strip():
                <span class="hljs-keyword">continue</span>

            response = agent.get_completion(prompt)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"\033[92mAssistant: \033[0m"</span>, response, <span class="hljs-string">"\n"</span>)

        <span class="hljs-keyword">except</span> KeyboardInterrupt:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"\nç¨‹åºç»ˆæ­¢"</span>)
            <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"\033[91må‘ç”Ÿé”™è¯¯: <span class="hljs-subst">{e}</span>\033[0m"</span>)
</code></pre>
<h2 data-id="heading-21">æ€»ç»“</h2>
<p>ä»¥ä¸Šæ˜¯<code>Agent</code>çš„å…¨éƒ¨å†…å®¹äº†ï¼Œæˆ‘ä»¬äº†è§£äº†<code>LLM</code>ã€<code>Agent</code>çš„åŸºæœ¬æ¦‚å¿µï¼Œè¿˜ç®€å•åœ¨æœ¬åœ°æ­å»ºäº†ä¸€ä¸ªç®€æ˜“çš„<code>Agent</code>ï¼Œç”¨äºå¸®ä½ å……åˆ†ç†è§£<code>Agent</code>çš„äº”å¤§ç»„æˆéƒ¨åˆ†ï¼š<strong>LLMã€æ„ŸçŸ¥ã€å·¥å…·ã€è®°å¿†ã€è§„åˆ’</strong>ï¼Œå¸Œæœ›èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Cursor AI Skills å®æˆ˜ï¼šè‡ªåŠ¨ç”Ÿæˆ Flutter é¡µé¢ã€ä»£ç ä¸æ–‡æ¡£]]></title>    <link>https://juejin.cn/post/7591704324906811426</link>    <guid>https://juejin.cn/post/7591704324906811426</guid>    <pubDate>2026-01-05T14:05:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591704324906811426" data-draft-id="7591704324906795042" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Cursor AI Skills å®æˆ˜ï¼šè‡ªåŠ¨ç”Ÿæˆ Flutter é¡µé¢ã€ä»£ç ä¸æ–‡æ¡£"/> <meta itemprop="keywords" content="Flutter,Cursor,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-05T14:05:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹¬ç«‹å¼€å‘è€…_çŒ«å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/2717648472245358"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Cursor AI Skills å®æˆ˜ï¼šè‡ªåŠ¨ç”Ÿæˆ Flutter é¡µé¢ã€ä»£ç ä¸æ–‡æ¡£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2717648472245358/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹¬ç«‹å¼€å‘è€…_çŒ«å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T14:05:15.000Z" title="Mon Jan 05 2026 14:05:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Cursor AI Skills å®æˆ˜ï¼šè‡ªåŠ¨ç”Ÿæˆ Flutter é¡µé¢ã€ä»£ç ä¸æ–‡æ¡£</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6c19ef632544d738637b75e76b3df77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us56uL5byA5Y-R6ICFX-eMq-WTpQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768226715&amp;x-signature=Nl4cYHzdSgvPVIcznTBef8gRoKI%3D" alt="flutter skills" loading="lazy"/></p>
<h3 data-id="heading-1">è§†é¢‘</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fyoutu.be%2FUeJYlTpm4ek" target="_blank" title="https://youtu.be/UeJYlTpm4ek" ref="nofollow noopener noreferrer">youtu.be/UeJYlTpm4ek</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1xpipBYE24%2F" target="_blank" title="https://www.bilibili.com/video/BV1xpipBYE24/" ref="nofollow noopener noreferrer">www.bilibili.com/video/BV1xpâ€¦</a></p>
<h3 data-id="heading-2">å‰è¨€</h3>
<p>æœ¬æ–‡ç³»ç»Ÿä»‹ç»å¦‚ä½•ä½¿ç”¨ Cursor AI Skills è‡ªåŠ¨ç”Ÿæˆ Flutter é¡µé¢ã€åˆå§‹åŒ–é¡¹ç›®ç»“æ„ï¼Œå¹¶æŒç»­ç»´æŠ¤é¡¹ç›®æŠ€æœ¯æ–‡æ¡£ã€‚é€‚åˆ Flutter å¼€å‘è€…ä¸ AI ç¼–ç¨‹å®è·µè€…ï¼Œå¿«é€Ÿæ„å»ºé«˜æ•ˆã€å¯å¤ç”¨çš„ Flutter å¼€å‘å·¥ä½œæµã€‚</p>
<blockquote>
<p>åŸæ–‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fducafecat.com%2Fblog%2Fcursor-ai-skills-flutter-auto-code" target="_blank" title="https://ducafecat.com/blog/cursor-ai-skills-flutter-auto-code" ref="nofollow noopener noreferrer">ä½¿ç”¨ Cursor AI Skills å®ç° Flutter è‡ªåŠ¨åŒ–å¼€å‘ï¼ˆå®Œæ•´æŒ‡å—ï¼‰</a></p>
</blockquote>
<p>åˆ†ç±»: Cursor AI / Cursor AI Skillsã€Flutter / Flutter AIã€AI ç¼–ç¨‹ / AI ä»£ç ç”Ÿæˆ</p>
<h3 data-id="heading-3">å‚è€ƒ</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcursor.com%2Fcn%2Fdocs%2Fcontext%2Fskills" target="_blank" title="https://cursor.com/cn/docs/context/skills" ref="nofollow noopener noreferrer">Cursor Agent Skills</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.claude.com%2Fdocs%2Fen%2Fskills" target="_blank" title="https://code.claude.com/docs/en/skills" ref="nofollow noopener noreferrer">Claude Agent Skills</a></li>
</ul>
<h3 data-id="heading-4">æ­£æ–‡</h3>
<h4 data-id="heading-5">é…ç½® Cursor æ”¯æŒ Skills</h4>
<p>è¿›å…¥ Cursor Setting -&gt; Beta , Update Access é€‰æ‹© Nightlyï¼Œå‡çº§åé‡å¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e83394173d9c482aa03d6471835747d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us56uL5byA5Y-R6ICFX-eMq-WTpQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768226715&amp;x-signature=c5L3CfToHwoetii8HKcNmwxjVhE%3D" alt="Update Access é€‰æ‹© Nightly" loading="lazy"/></p>
<p>åœ¨ Rules, Subagentsï¼ŒCommands é¢æ¿ä¸‹ï¼Œå¼€å¯ Import Agent Skills é‡å¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a02a068d49dd4b519373f9958beb0c10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us56uL5byA5Y-R6ICFX-eMq-WTpQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768226715&amp;x-signature=8cH4lp3XIHR27LJCcbcbspZxudw%3D" alt="å¼€å¯ Import Agent Skills" loading="lazy"/></p>
<blockquote>
<p>é‡å¯å claude ã€codex çš„ skills å°±ä¼šå…¨å±€å¯ç”¨ã€‚</p>
</blockquote>
<h4 data-id="heading-6">ä¾‹å­ 1ï¼š Flutteråˆ›å»ºé¡µé¢ç»„æ‰‹ï¼ˆå…¨å±€ï¼‰</h4>
<p>ç¼–å†™æ–‡ä»¶ .codex/skills/Flutteråˆ›å»ºé¡µé¢ç»„æ‰‹/SKILL.md</p>
<pre><code class="hljs language-markdown" lang="markdown">---
name: "Flutteråˆ›å»ºé¡µé¢ç»„æ‰‹"
<span class="hljs-section">description: "Flutter é¡¹ç›®ä¸­åˆ›å»ºé¡µé¢"
---</span>

<span class="hljs-section"># Flutteråˆ›å»ºé¡µé¢ç»„æ‰‹</span>

æŒ‰è§„åˆ™ç”Ÿæˆç©ºé¡µé¢è„šæ‰‹æ¶ä»£ç ã€‚

<span class="hljs-section">## è¯»å–å˜é‡</span>

<span class="hljs-bullet">-</span> è¯»å– [ä¿å­˜ç›®å½•]
<span class="hljs-bullet">-</span> è¯»å– [ä¸šåŠ¡åç§°]
<span class="hljs-bullet">-</span> é€šè¿‡ [ä¸šåŠ¡åç§°] ç”Ÿæˆ [ä¸šåŠ¡ä»£ç ] (æˆ‘çš„é¡µé¢ -&gt; my<span class="hljs-emphasis">_page)
- [ä¸šåŠ¡ä»£ç ] ä½¿ç”¨è§„åˆ™ä¸¾ä¾‹å¦‚ä¸‹:
  - æ–‡ä»¶å my_</span>page
<span class="hljs-bullet">  -</span> ç±»å MyPage
<span class="hljs-bullet">  -</span> å˜é‡å myPage
<span class="hljs-bullet">  -</span> æ¥å£å IMyPage

<span class="hljs-section">## çº¦æŸè§„åˆ™</span>

é¡µé¢å¿…é¡»åŒ…å«åœ¨ lib/pages ç›®å½•ä¸‹é¢

<span class="hljs-section">## é¡µé¢ç›®å½•</span>

å¦‚æœ [ä¸šåŠ¡ä»£ç ] æ—¶ my<span class="hljs-emphasis">_pageï¼Œç›®å½•ç»“æ„å¦‚ä¸‹:

- [ä¿å­˜ç›®å½•]
  - my_</span>page             // ä¸šåŠ¡ç›®å½•
<span class="hljs-bullet">    -</span> widget            // ä¸šåŠ¡ç»„å»º
<span class="hljs-bullet">    -</span> view.dart         // è§†å›¾ä»£ç 
<span class="hljs-bullet">    -</span> controller.dart   // æ§åˆ¶å™¨ä»£ç 
<span class="hljs-bullet">    -</span> index.dart        // index å¯¼åŒ…ä»£ç 

<span class="hljs-section">## é¡µé¢ä»£ç </span>

å¦‚æœ [ä¸šåŠ¡ä»£ç ] æ—¶ my<span class="hljs-emphasis">_pageï¼Œä»£ç å¦‚ä¸‹:

- index.dart        // index å¯¼åŒ…ä»£ç 

```dart
library;

export './controller.dart';
export './view.dart';
```

- controller.dart   // æ§åˆ¶å™¨ä»£ç 

```dart
import 'package:get/get.dart';

class MyPageController extends GetxController {
  MyPageController();

  _</span>initData() {
<span class="hljs-code">    update(["my_page"]);
  }
</span>
  void onTap() {}

  // @override
  // void onInit() {
  //   super.onInit();
  // }

  @override
  void onReady() {
<span class="hljs-code">    super.onReady();
    _initData();
  }
</span>
  // @override
  // void onClose() {
  //   super.onClose();
  // }
}
<span class="hljs-code">```

- view.dart         // è§†å›¾ä»£ç 

```</span>dart
import 'package:flutter/material.dart';
import 'package:get/get.dart';

import 'index.dart';

class MyPagePage extends GetView<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyPageController</span>&gt;</span></span> {
  const MyPagePage({super.key});

  // ä¸»è§†å›¾
  Widget <span class="hljs-emphasis">_buildView() {
    return const Center(
      child: Text("MyPagePage"),
    );
  }

  @override
  Widget build(BuildContext context) {
    return GetBuilder<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyPageController</span>&gt;</span></span>(
      init: MyPageController(),
      id: "my_</span>page",
<span class="hljs-code">      builder: (_) {
        return Scaffold(
          appBar: AppBar(title: const Text("my_page")),
          body: SafeArea(
            child: _buildView(),
          ),
        );
      },
    );
  }
}
```
</span>
<span class="hljs-section">## ä¿å­˜æ€»å¯¼åŒ… index</span>

æ–‡ä»¶ lib/pages/index.dart

è¿½åŠ åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­å³å¯

</code></pre>
<p>æç¤ºè¯</p>
<pre><code class="hljs language-bash" lang="bash">ç”¨ skill åœ¨ lib/pages/cart ä¸­åˆ›å»ºé¡µé¢ ä¸šåŠ¡ è´­ç‰©å†å²ï¼Œä¸šåŠ¡ä»£ç  cart_history
</code></pre>
<p>è¾“å‡º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eda8ceec79764367ad01fbd36a7e7c83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us56uL5byA5Y-R6ICFX-eMq-WTpQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768226715&amp;x-signature=kae36jxlQLJ7djTnCc2%2BWLksiL0%3D" alt="cursor skills æ–°å»ºé¡µé¢" loading="lazy"/></p>
<h4 data-id="heading-7">ä¾‹å­ 2ï¼šFlutteré¡¹ç›®åˆå§‹åŒ–ï¼ˆå…¨å±€ï¼‰</h4>
<p>ç¼–å†™æ–‡ä»¶ .codex/skills/Flutteré¡¹ç›®åˆå§‹åŒ–/SKILL.md</p>
<pre><code class="hljs language-markdown" lang="markdown">---
name: Flutteré¡¹ç›®åˆå§‹åŒ–
<span class="hljs-section">description: ç”¨çŒ«å“¥çš„ ducafe<span class="hljs-emphasis">_ui_</span>core + getx åˆå§‹åŒ–ä¸€ä¸ªè§„èŒƒçš„ flutter é¡¹ç›®ã€‚
---</span>

<span class="hljs-section"># Flutteré¡¹ç›®åˆå§‹åŒ–</span>

<span class="hljs-section">## å®‰è£…ä¾èµ–åŒ…</span>

<span class="hljs-code">```shell
flutter pub add get
flutter pub add ducafe_ui_core
```</span>

<span class="hljs-section">## 1 åˆ›å»ºä¸šåŠ¡ index é¡µé¢</span>

<span class="hljs-bullet">-</span> ä½¿ç”¨ skill åœ¨ lib/pages ç›®å½•ä¸‹åˆ›å»ºä¸šåŠ¡ é¦–é¡µï¼Œä¸šåŠ¡ä»£ç  indexã€‚

<span class="hljs-bullet">-</span> æ²¡æœ‰ lib/pages ç›®å½•è‡ªåŠ¨åˆ›å»ºã€‚

<span class="hljs-section">## 2 åˆ›å»ºå…¨å±€ Global æ¨¡å—</span>

æ–‡ä»¶ä½ç½® lib/global.dart

<span class="hljs-code">```dart
import 'package:flutter/material.dart';

class Global {
  static Future&lt;void&gt; init() async {
    // æ’ä»¶åˆå§‹åŒ–
    // WidgetsFlutterBinding.ensureInitialized();

    // // å·¥å…·ç±»
    // await Storage().init();

    // // æç¤ºæ¡†
    // Loading();

    // // åŠ è½½æœåŠ¡
    // Get.put&lt;ConfigService&gt;(ConfigService()); // é…ç½®
    // Get.put&lt;WPHttpService&gt;(WPHttpService()); // ç½‘ç»œè¯·æ±‚
    // Get.put&lt;UserService&gt;(UserService()); // ç”¨æˆ·
    // Get.put&lt;CartService&gt;(CartService()); // è´­ç‰©è½¦

    // // åˆå§‹åŒ–é…ç½®
    // await ConfigService.to.init();
  }
}
```</span>

<span class="hljs-section">## 3 åˆ›å»º common é€šç”¨æ¨¡å—</span>

æ–‡ä»¶ä½ç½® lib/common/

<span class="hljs-section">### ç›®å½•ç»“æ„</span>

<span class="hljs-code">```text
lib/common/
â”œâ”€â”€ api/              # API æ¥å£
â”‚   â””â”€â”€ index.dart
â”œâ”€â”€ components/       # é€šç”¨ç»„ä»¶
â”‚   â””â”€â”€ index.dart
â”œâ”€â”€ extension/        # æ‰©å±•æ–¹æ³•
â”‚   â””â”€â”€ index.dart
â”œâ”€â”€ i18n/             # å›½é™…åŒ–
â”‚   â””â”€â”€ index.dart
â”œâ”€â”€ models/           # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ index.dart
â”œâ”€â”€ routers/          # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ index.dart
â”‚   â”œâ”€â”€ names.dart
â”‚   â””â”€â”€ pages.dart
â”œâ”€â”€ services/         # æœåŠ¡å±‚
â”‚   â””â”€â”€ index.dart
â”œâ”€â”€ style/            # æ ·å¼
â”‚   â””â”€â”€ index.dart
â”œâ”€â”€ utils/            # å·¥å…·ç±»
â”‚   â””â”€â”€ index.dart
â”œâ”€â”€ values/           # å¸¸é‡å€¼
â”‚   â”œâ”€â”€ index.dart
â”‚   â”œâ”€â”€ constants.dart
â”‚   â”œâ”€â”€ images.dart
â”‚   â””â”€â”€ svgs.dart
â”œâ”€â”€ widgets/          # é€šç”¨å°éƒ¨ä»¶
â”‚   â””â”€â”€ index.dart
â””â”€â”€ index.dart        # ç»Ÿä¸€å¯¼å‡º
```</span>

<span class="hljs-section">### æ–‡ä»¶è§„åˆ™</span>

<span class="hljs-section">#### lib/common/index.dart</span>

<span class="hljs-code">```dart
library;

export 'api/index.dart';
export 'components/index.dart';
export 'extension/index.dart';
export 'i18n/index.dart';
export 'models/index.dart';
export 'routers/index.dart';
export 'services/index.dart';
export 'style/index.dart';
export 'utils/index.dart';
export 'values/index.dart';
export 'widgets/index.dart';
```</span>

<span class="hljs-section">#### lib/common/routers/names.dart</span>

<span class="hljs-code">```dart
class RouteNames {
  static const main = '/';
}
```</span>

<span class="hljs-section">#### lib/common/routers/pages.dart</span>

<span class="hljs-code">```dart
class RoutePages {
  // åˆ—è¡¨
  // static List&lt;GetPage&gt; list = [];
}
```</span>

<span class="hljs-section">#### lib/common/routers/index.dart</span>

<span class="hljs-code">```dart
library;

export 'names.dart';
export 'pages.dart';
```</span>

<span class="hljs-section">#### lib/common/values/constants.dart</span>

<span class="hljs-code">```dart
/// å¸¸é‡
class Constants {
  // æœåŠ¡ api
  static const apiUrl = 'https://api.example.com';
}
```</span>

<span class="hljs-section">#### lib/common/values/images.dart</span>

<span class="hljs-code">```dart
/// å›¾ç‰‡ assets
class AssetsImages {
}
```</span>

<span class="hljs-section">#### lib/common/values/svgs.dart</span>

<span class="hljs-code">```dart
/// svgs assets
class AssetsSvgs {
}
```</span>

<span class="hljs-section">#### lib/common/values/index.dart</span>

<span class="hljs-code">```dart
library;

export 'constants.dart';
export 'images.dart';
export 'svgs.dart';
```</span>

<span class="hljs-section">#### å…¶ä»–æ¨¡å— index.dart æ¨¡æ¿</span>

<span class="hljs-bullet">-</span> api
<span class="hljs-bullet">-</span> components
<span class="hljs-bullet">-</span> extension
<span class="hljs-bullet">-</span> i18n/
<span class="hljs-bullet">-</span> models
<span class="hljs-bullet">-</span> services
<span class="hljs-bullet">-</span> style
<span class="hljs-bullet">-</span> utils
<span class="hljs-bullet">-</span> widgets

è¿™äº›ç›®å½•ä¸‹çš„ index.dart ç»Ÿä¸€ä½¿ç”¨ï¼š

<span class="hljs-code">```dart
library;

// export './xxxx.dart';
```</span>

<span class="hljs-section">## é‡å†™ main.dart</span>

lib/main.dart

<span class="hljs-code">```dart
import 'package:ducafe_ui_core/ducafe_ui_core.dart';
import 'package:flutter/material.dart';
import 'package:get/get.dart';

import 'pages/index.dart';
import 'global.dart';

void main() async {
  await Global.init();
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return ScreenUtilInit(
      designSize: const Size(414, 896), // è®¾è®¡ç¨¿ä¸­è®¾å¤‡çš„å°ºå¯¸(å•ä½éšæ„,å»ºè®®dp,ä½†åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å¿…é¡»ä¿æŒä¸€è‡´)
      // splitScreenMode: false, // æ”¯æŒåˆ†å±å°ºå¯¸
      // minTextAdapt: false, // æ˜¯å¦æ ¹æ®å®½åº¦/é«˜åº¦ä¸­çš„æœ€å°å€¼é€‚é…æ–‡å­—
      builder: (context, child) {
        return GetMaterialApp(
          title: 'Flutter Demo',
          theme: ThemeData(primarySwatch: Colors.blue),
          home: const IndexPage(),
        );
      },
    );
  }
}
```</span>

</code></pre>
<p>æç¤ºè¯</p>
<pre><code class="hljs">ä½¿ç”¨ skill åˆå§‹åŒ–å½“å‰ flutter é¡¹ç›®
</code></pre>
<p>è¾“å‡º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b99ad4b38734a139aa10c5889943d5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us56uL5byA5Y-R6ICFX-eMq-WTpQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768226715&amp;x-signature=BIDy5lARh8HQzXA%2BZvd6D2PfsdQ%3D" alt="skill åˆå§‹åŒ– flutter é¡¹ç›®" loading="lazy"/></p>
<h4 data-id="heading-8">ä¾‹å­ 3ï¼šç¼–å†™æŠ€æœ¯è¯´æ˜ï¼ˆé¡¹ç›®ï¼‰</h4>
<p>ç¼–å†™ .cursor/skills/ç¼–å†™æŠ€æœ¯è¯´æ˜/SKILL.md</p>
<pre><code class="hljs language-markdown" lang="markdown">---
name: ç¼–å†™æŠ€æœ¯è¯´æ˜
<span class="hljs-section">description:  å¯¹å½“å‰é¡¹ç›®è¿›è¡ŒæŠ€æœ¯æ•´ç†å¹¶ä¿å­˜åˆ°æ–‡æ¡£ä¸­ã€‚
---</span>

<span class="hljs-section"># é¡¹ç›®æŠ€æœ¯è¯´æ˜</span>

ä½ æ˜¯ä¸€åèµ„æ·± Flutter æ¶æ„å¸ˆå’ŒæŠ€æœ¯æ–‡æ¡£ä¸“å®¶ã€‚

æˆ‘å°†æŒç»­å‘ä½ æä¾›ä¸€ä¸ª Flutter é¡¹ç›®çš„ä»£ç ç»“æ„ã€å…³é”®æ–‡ä»¶ã€ä»¥åŠæœ€è¿‘ä¸€æ¬¡â€œæ”¹åŠ¨å†…å®¹â€ã€‚

ä½ çš„ä»»åŠ¡æ˜¯ï¼š
1ï¸âƒ£ å¯¹å½“å‰ Flutter é¡¹ç›®è¿›è¡ŒæŠ€æœ¯æ¶æ„åˆ†æ  
2ï¸âƒ£ åœ¨â€œå·²æœ‰æŠ€æœ¯æ–‡æ¡£â€çš„åŸºç¡€ä¸Š <span class="hljs-strong">**å¢é‡æ›´æ–°**</span>ï¼Œè€Œä¸æ˜¯å…¨éƒ¨é‡å†™  
3ï¸âƒ£ æ˜ç¡®æ ‡æ³¨ã€Œæœ¬æ¬¡æ–°å¢ / ä¿®æ”¹ / åºŸå¼ƒã€çš„æŠ€æœ¯ç‚¹  
4ï¸âƒ£ è¾“å‡ºä¸€ä»½ç»“æ„åŒ–ã€å¯é•¿æœŸç»´æŠ¤çš„æŠ€æœ¯è¯´æ˜æ–‡æ¡£  

è¯·å§‹ç»ˆå‡è®¾ï¼š

<span class="hljs-bullet">-</span> è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ª<span class="hljs-strong">**é•¿æœŸç»´æŠ¤çš„çœŸå®ä¸šåŠ¡é¡¹ç›®**</span>
<span class="hljs-bullet">-</span> æ–‡æ¡£è¯»è€…æ˜¯ï¼šä¸­é«˜çº§ Flutter å¼€å‘è€…
<span class="hljs-bullet">-</span> ç›®æ ‡æ˜¯ï¼š<span class="hljs-strong">**å¯è¯»ã€å¯æŒç»­æ¼”è¿›**</span>

---

<span class="hljs-section">## æ–‡æ¡£ä¿å­˜ä½ç½®</span>

docs/æŠ€æœ¯è¯´æ˜.md

<span class="hljs-section">## ğŸ“Œ é¡¹ç›®ä¿¡æ¯ï¼ˆå¦‚æœ‰ï¼‰</span>

<span class="hljs-bullet">-</span> é¡¹ç›®åç§°ï¼š
<span class="hljs-bullet">-</span> Flutter ç‰ˆæœ¬ï¼š
<span class="hljs-bullet">-</span> çŠ¶æ€ç®¡ç†æ–¹æ¡ˆï¼ˆå¦‚ Riverpod / Bloc / GetX ç­‰ï¼‰ï¼š
<span class="hljs-bullet">-</span> æ¶æ„é£æ ¼ï¼ˆå¦‚ Clean Architecture / Feature First ç­‰ï¼‰ï¼š

<span class="hljs-section">## ğŸ“Œ å·²æœ‰æŠ€æœ¯æ–‡æ¡£ï¼ˆå¦‚å­˜åœ¨ï¼‰</span>

ã€æˆ‘ä¼šç²˜è´´å½“å‰ç‰ˆæœ¬çš„æŠ€æœ¯æ–‡æ¡£ã€‘

<span class="hljs-section">## ğŸ“Œ æœ¬æ¬¡æ”¹åŠ¨å†…å®¹</span>

ã€æˆ‘ä¼šæè¿°æˆ–ç²˜è´´æœ¬æ¬¡ä»£ç å˜æ›´ / æ–°å¢æ¨¡å— / é‡æ„ç‚¹ã€‘

---

<span class="hljs-section">## ğŸ¯ è¾“å‡ºè¦æ±‚</span>

<span class="hljs-section">### ä¸€ã€é¡¹ç›®æ•´ä½“æ¶æ„ï¼ˆå¦‚æ— é‡å¤§å˜åŒ–ï¼Œç®€è¦è¯´æ˜ï¼‰</span>

<span class="hljs-bullet">-</span> æ¶æ„åˆ†å±‚
<span class="hljs-bullet">-</span> æ¨¡å—èŒè´£
<span class="hljs-bullet">-</span> å…³é”®è®¾è®¡åŸåˆ™

<span class="hljs-section">### äºŒã€æœ¬æ¬¡è¿­ä»£æŠ€æœ¯å˜æ›´ï¼ˆé‡ç‚¹ï¼‰</span>

<span class="hljs-bullet">-</span> ğŸ†• æ–°å¢å†…å®¹
<span class="hljs-bullet">-</span> ğŸ”„ ä¿®æ”¹å†…å®¹
<span class="hljs-bullet">-</span> ğŸ—‘ï¸ åºŸå¼ƒæˆ–æ›¿ä»£æ–¹æ¡ˆ
<span class="hljs-bullet">-</span> å˜æ›´åŠ¨æœº &amp; æŠ€æœ¯å–èˆè¯´æ˜

<span class="hljs-section">### ä¸‰ã€å…³é”®ä»£ç è®¾è®¡è§£è¯»</span>

<span class="hljs-bullet">-</span> é‡è¦ç±» / æ¨¡å—èŒè´£
<span class="hljs-bullet">-</span> çŠ¶æ€æµè½¬è¯´æ˜
<span class="hljs-bullet">-</span> æ•°æ®æµ &amp; ä¾èµ–æ–¹å‘

<span class="hljs-section">### å››ã€å¯¹é¡¹ç›®é•¿æœŸç»´æŠ¤çš„å½±å“</span>

<span class="hljs-bullet">-</span> å¯æ‰©å±•æ€§
<span class="hljs-bullet">-</span> å¯æµ‹è¯•æ€§
<span class="hljs-bullet">-</span> æ½œåœ¨é£é™© &amp; å»ºè®®

<span class="hljs-section">### äº”ã€æ–‡æ¡£ç‰ˆæœ¬è®°å½•ï¼ˆå¿…é¡»è¾“å‡ºï¼‰</span>

<span class="hljs-bullet">-</span> æ–‡æ¡£ç‰ˆæœ¬å·ï¼ˆå¦‚ v1.2.0ï¼‰
<span class="hljs-bullet">-</span> æ›´æ–°æ—¶é—´
<span class="hljs-bullet">-</span> æœ¬æ¬¡æ›´æ–°æ‘˜è¦ï¼ˆ3ï½5 æ¡ï¼‰

---

<span class="hljs-section">## âœï¸ å†™ä½œé£æ ¼è¦æ±‚</span>

<span class="hljs-bullet">-</span> ä½¿ç”¨ <span class="hljs-strong">**å·¥ç¨‹å¸ˆè§†è§’**</span>ï¼Œé¿å…ç©ºè¯
<span class="hljs-bullet">-</span> å…³é”®åœ°æ–¹å¯ç”¨ã€Œä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ã€
<span class="hljs-bullet">-</span> å…è®¸é€‚åº¦å£è¯­åŒ–ï¼Œä½†ä¿æŒä¸“ä¸š
<span class="hljs-bullet">-</span> ä½¿ç”¨ Markdown è¾“å‡ºï¼Œæ–¹ä¾¿ç›´æ¥å…¥åº“æˆ–å‘å¸ƒ

</code></pre>
<p>æç¤ºè¯</p>
<pre><code class="hljs">ä½¿ç”¨ skill ç¼–å†™æŠ€æœ¯è¯´æ˜
</code></pre>
<p>è¾“å‡º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8de8b6051a9641f59ce29206f9910c8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us56uL5byA5Y-R6ICFX-eMq-WTpQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768226715&amp;x-signature=MGEmQuL%2BKrjLvfhhMHXfDwwLbqo%3D" alt="ä½¿ç”¨ skill ç¼–å†™æŠ€æœ¯è¯´æ˜" loading="lazy"/></p>
<h3 data-id="heading-9">æ€»ç»“è¦ç‚¹</h3>
<p>é€šè¿‡ Cursor AI Skillsï¼ŒFlutter å¼€å‘è€…å¯ä»¥å°†é¡µé¢åˆ›å»ºã€é¡¹ç›®åˆå§‹åŒ–ä»¥åŠæŠ€æœ¯æ–‡æ¡£ç»´æŠ¤ç­‰é‡å¤æ€§å·¥ä½œäº¤ç»™ AI è‡ªåŠ¨å®Œæˆã€‚æœ¬æ–‡ç»“åˆå®é™…ç¤ºä¾‹ï¼Œç³»ç»Ÿè®²è§£äº†å¦‚ä½•æ„å»ºå…¨å±€ä¸é¡¹ç›®çº§åˆ«çš„ Cursor Skillsï¼Œå®ç°é«˜æ•ˆã€å¯æŒç»­çš„ Flutter è‡ªåŠ¨åŒ–å¼€å‘æµç¨‹ã€‚è¿™ç§ AI è¾…åŠ©ç¼–ç¨‹æ–¹å¼ï¼Œæ­£åœ¨æˆä¸º Flutter é¡¹ç›®ææ•ˆçš„æ–°æ ‡å‡†ã€‚</p>
<p>æ„Ÿè°¢é˜…è¯»æœ¬æ–‡</p>
<p>å¦‚æœæœ‰ä»€ä¹ˆå»ºè®®ï¼Œè¯·åœ¨è¯„è®ºä¸­è®©æˆ‘çŸ¥é“ã€‚æˆ‘å¾ˆä¹æ„æ”¹è¿›ã€‚</p>
<hr/>
<p>Â© çŒ«å“¥
ducafecat.com</p>
<p>end</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Opencode CLI å®‰è£…æˆåŠŸ,ä½†æ˜¯å¯åŠ¨å¤±è´¥]]></title>    <link>https://juejin.cn/post/7591799107485761546</link>    <guid>https://juejin.cn/post/7591799107485761546</guid>    <pubDate>2026-01-06T01:56:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591799107485761546" data-draft-id="7591801024008945673" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Opencode CLI å®‰è£…æˆåŠŸ,ä½†æ˜¯å¯åŠ¨å¤±è´¥"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,OpenAI,Claude"/> <meta itemprop="datePublished" content="2026-01-06T01:56:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘è¦å……æ»¡æ­£èƒ½é‡"/> <meta itemprop="url" content="https://juejin.cn/user/3034307824453607"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Opencode CLI å®‰è£…æˆåŠŸ,ä½†æ˜¯å¯åŠ¨å¤±è´¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3034307824453607/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘è¦å……æ»¡æ­£èƒ½é‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T01:56:08.000Z" title="Tue Jan 06 2026 01:56:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Opencode CLI å®‰è£…æˆåŠŸ,ä½†æ˜¯å¯åŠ¨å¤±è´¥</h2>
<blockquote>
<p>è¿è¡ŒæŠ¥é”™:It seems that your package manager failed to install the right version of the opencode CLI for your platform. You can try manually installing the "opencode-windows-x64" package</p>
</blockquote>
<h3 data-id="heading-1">åŸå› ï¼šé•œåƒæºé…ç½®é—®é¢˜</h3>
<h3 data-id="heading-2">é—®é¢˜æè¿°</h3>
<p>åœ¨ä½¿ç”¨ npm å®‰è£… opencode AI å·¥å…·æ—¶ï¼Œé‡åˆ°äº†å®‰è£…å®Œæˆåæ— æ³•æ­£å¸¸è¿è¡Œçš„é—®é¢˜ã€‚å…·ä½“è¡¨ç°ä¸ºï¼š</p>
<p><strong>å®‰è£…å‘½ä»¤ï¼š</strong></p>
<pre><code class="hljs language-bash" lang="bash">npm install -g opencode-ai
</code></pre>
<p><strong>è¿è¡Œæ—¶é”™è¯¯ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">It seems that your <span class="hljs-keyword">package</span> manager failed to install the right version of the opencode CLI <span class="hljs-keyword">for</span> your platform. You can <span class="hljs-keyword">try</span> manually installing the <span class="hljs-string">"opencode-windows-x64"</span> <span class="hljs-keyword">package</span>
</code></pre>
<p>ç¿»è¯‘:é”™è¯¯æç¤ºåŒ…ç®¡ç†å™¨æ— æ³•ä¸ºå½“å‰å¹³å°å®‰è£…æ­£ç¡®ç‰ˆæœ¬çš„ opencode CLIï¼Œå¹¶å»ºè®®æ‰‹åŠ¨å®‰è£… <code>opencode-windows-x64</code> åŒ…ã€‚(æˆ‘åé¢å°±å»ä¸‹è½½äº†æ¡Œé¢ç‰ˆ,å…¶å®cliç‰ˆæˆ‘ç”¨å¾—æ›´ä¹ æƒ¯,å°±ç»§ç»­æ‰¾é—®é¢˜äº†)</p>
<h3 data-id="heading-3">åŸå› åˆ†æ</h3>
<p>ç»è¿‡æ’æŸ¥ï¼Œå‘ç°é—®é¢˜æ ¹æºåœ¨äº <strong>npm é•œåƒä»“åº“é…ç½®</strong>ã€‚å½“å‰ npm ä½¿ç”¨çš„æ˜¯æ·˜å®é•œåƒæºï¼ˆ<code>https://registry.npm.taobao.org</code>ï¼‰ï¼Œè¯¥é•œåƒæºå¯èƒ½å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li>
<p><strong>åŒ…ç‰ˆæœ¬åŒæ­¥å»¶è¿Ÿ</strong>ï¼šç¬¬ä¸‰æ–¹é•œåƒä»“åº“åœ¨åŒæ­¥å®˜æ–¹ npm ä»“åº“çš„åŒ…æ—¶ï¼Œå¯èƒ½å­˜åœ¨ä¸€å®šçš„æ—¶é—´å»¶è¿Ÿï¼Œå¯¼è‡´æ— æ³•è·å–æœ€æ–°ç‰ˆæœ¬çš„ opencode åŒ…ã€‚</p>
</li>
<li>
<p><strong>åŒ…å®Œæ•´æ€§é—®é¢˜</strong>ï¼šéƒ¨åˆ†é•œåƒä»“åº“åœ¨åŒæ­¥è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°åŒ…æ–‡ä»¶ä¸å®Œæ•´æˆ–æŸåçš„æƒ…å†µï¼Œå½±å“åŒ…çš„æ­£å¸¸ä½¿ç”¨ã€‚</p>
</li>
<li>
<p><strong>å¹³å°ç‰¹å®šåŒ…åˆ†å‘é—®é¢˜</strong>ï¼šæŸäº›å¹³å°ç‰¹å®šçš„äºŒè¿›åˆ¶åŒ…ï¼ˆå¦‚ opencode-windows-x64ï¼‰åœ¨é•œåƒåŒæ­¥è¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°åˆ†å‘é—®é¢˜ã€‚</p>
</li>
</ol>
<h3 data-id="heading-4">è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-5">æ­¥éª¤ä¸€ï¼šæ£€æŸ¥å½“å‰é•œåƒæº</h4>
<p>åœ¨è§£å†³é—®é¢˜ä¹‹å‰ï¼Œå»ºè®®å…ˆç¡®è®¤å½“å‰çš„ npm é•œåƒé…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm config get registry
</code></pre>
<p>å¦‚æœè¿”å›ç»“æœä¸º <code>https://registry.npm.taobao.org/</code>ï¼Œè¯´æ˜å½“å‰ä½¿ç”¨çš„æ˜¯æ·˜å®é•œåƒæºã€‚</p>
<h4 data-id="heading-6">æ­¥éª¤äºŒï¼šä½¿ç”¨å®˜æ–¹æºé‡æ–°å®‰è£…</h4>
<p>é€šè¿‡ <code>--registry</code> å‚æ•°æŒ‡å®šä½¿ç”¨å®˜æ–¹ npm é•œåƒæºè¿›è¡Œå®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install -g opencode-ai --registry=https://registry.npmjs.org
</code></pre>
<h4 data-id="heading-7">æ­¥éª¤ä¸‰ï¼šéªŒè¯å®‰è£…ç»“æœ</h4>
<p>å®‰è£…å®Œæˆåï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼š</p>
<pre><code class="hljs language-bash" lang="bash">opencode --version
</code></pre>
<p>æˆ–ç›´æ¥å¯åŠ¨ç¨‹åºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">opencode
</code></pre>
<p>å¦‚æœç¨‹åºæ­£å¸¸å¯åŠ¨ä¸”æ— æŠ¥é”™ä¿¡æ¯ï¼Œè¯´æ˜å®‰è£…æˆåŠŸã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ecf8fa1c1914ebdb1bbe53425e98fc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR6KaB5YWF5ruh5q2j6IO96YeP:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269367&amp;x-signature=U36WcbCNIpgLZsjin%2Fw0j6jSKYg%3D" alt="æ­£å¸¸è¿è¡Œ" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[K8s Gateway APIä¸ç°æœ‰Ingressæ§åˆ¶å™¨å¦‚ä½•å®ç°å¹³æ»‘è¿ç§»?]]></title>    <link>https://juejin.cn/post/7591704324907647010</link>    <guid>https://juejin.cn/post/7591704324907647010</guid>    <pubDate>2026-01-06T01:56:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591704324907647010" data-draft-id="7592017365140635700" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="K8s Gateway APIä¸ç°æœ‰Ingressæ§åˆ¶å™¨å¦‚ä½•å®ç°å¹³æ»‘è¿ç§»?"/> <meta itemprop="keywords" content="Kubernetes"/> <meta itemprop="datePublished" content="2026-01-06T01:56:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            K8s Gateway APIä¸ç°æœ‰Ingressæ§åˆ¶å™¨å¦‚ä½•å®ç°å¹³æ»‘è¿ç§»?
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T01:56:27.000Z" title="Tue Jan 06 2026 01:56:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¦å®ç°<strong>Gateway APIä¸ä¼ ç»ŸIngressæ§åˆ¶å™¨çš„å¹³æ»‘è¿ç§»</strong>ï¼Œéœ€éµå¾ª <strong>â€œå…¼å®¹å…±å­˜ã€é€æ­¥åˆ‡æ¢ã€æœ€å°åŒ–é£é™©â€</strong> çš„åŸåˆ™ï¼Œæ ¸å¿ƒæ­¥éª¤åŒ…æ‹¬<strong>ç¯å¢ƒå‡†å¤‡ã€é…ç½®è½¬æ¢ã€æµ‹è¯•éªŒè¯ã€æµé‡ç°åº¦åˆ‡æ¢</strong>ã€‚ä»¥ä¸‹æ˜¯å…·ä½“è¿ç§»æ–¹æ¡ˆåŠå…³é”®æ³¨æ„äº‹é¡¹ï¼š</p>
<h3 data-id="heading-0"><strong>ä¸€ã€å¹³æ»‘è¿ç§»çš„æ ¸å¿ƒæ–¹æ¡ˆ</strong></h3>
<h4 data-id="heading-1"><strong>1. ç¯å¢ƒå‡†å¤‡ï¼šå®‰è£…Gateway APIåŠæ§åˆ¶å™¨</strong></h4>
<ul>
<li>
<p><strong>å®‰è£…Gateway API CRDs</strong>ï¼šé€šè¿‡å®˜æ–¹è„šæœ¬å®‰è£…æœ€æ–°ç¨³å®šç‰ˆçš„Gateway API CRDsï¼ˆå¦‚<code>v1.4.1</code>ï¼‰ï¼Œç¡®ä¿é›†ç¾¤æ”¯æŒ<code>Gateway</code>ã€<code>HTTPRoute</code>ç­‰èµ„æºã€‚</p>
<pre><code class="hljs language-bash" lang="bash">kubectl apply -f https://github.com/kubernetes-sigs/gateway-api/releases/download/v1.4.1/standard-install.yaml
</code></pre>
</li>
<li>
<p><strong>éƒ¨ç½²Gatewayæ§åˆ¶å™¨</strong>ï¼šé€‰æ‹©ä¸»æµçš„Gateway APIå®ç°ï¼ˆå¦‚<strong>Envoy Gateway</strong>ã€<strong>Nginx Gateway Fabric</strong>ï¼‰ï¼Œé€šè¿‡Helmæˆ–YAMLéƒ¨ç½²ã€‚ä¾‹å¦‚ï¼Œéƒ¨ç½²Envoy Gatewayï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">helm install eg oci:<span class="hljs-comment">//ghcr.io/envoyproxy/gateway-helm \
  --namespace envoy-gateway-system \
  --create-namespace</span>
</code></pre>
</li>
</ul>
<h4 data-id="heading-2"><strong>2. é…ç½®è½¬æ¢ï¼šä»Ingressåˆ°Gateway API</strong></h4>
<p>ä½¿ç”¨**<code>ingress2gateway</code>å·¥å…·**ï¼ˆKubernetes SIG-NETWORKç¤¾åŒºæä¾›ï¼‰è‡ªåŠ¨è½¬æ¢ç°æœ‰Ingressèµ„æºä¸ºGateway APIæ ¼å¼ï¼ˆå¦‚<code>Gateway</code>ã€<code>HTTPRoute</code>ï¼‰ã€‚è¯¥å·¥å…·æ”¯æŒNginxã€Traefikç­‰ä¸»æµIngressæ§åˆ¶å™¨çš„é…ç½®è½¬æ¢ã€‚</p>
<ul>
<li>
<p><strong>æ­¥éª¤</strong>ï¼š</p>
<ol>
<li>å¯¼å‡ºç°æœ‰Ingressèµ„æºï¼š<code>kubectl get ingress -A -o yaml &gt; ingresses.yaml</code>ï¼›</li>
<li>è¿è¡Œè½¬æ¢å·¥å…·ï¼š<code>ingress2gateway --input ingresses.yaml --output gateway-api.yaml</code>ï¼›</li>
<li>æ‰‹åŠ¨è°ƒæ•´ï¼šå¯¹äº<code>ingress2gateway</code>æ— æ³•å¤„ç†çš„<strong>è‡ªå®šä¹‰æ³¨è§£</strong>ï¼ˆå¦‚Nginxçš„<code>nginx.ingress.kubernetes.io/rewrite-target</code>ï¼‰ï¼Œéœ€è½¬æ¢ä¸ºGateway APIçš„æ ‡å‡†é…ç½®ï¼ˆå¦‚<code>HTTPRoute</code>çš„<code>urlRewrite</code>è¿‡æ»¤å™¨ï¼‰ã€‚</li>
</ol>
</li>
</ul>
<h4 data-id="heading-3"><strong>3. æµ‹è¯•éªŒè¯ï¼šç¡®ä¿é…ç½®æ­£ç¡®æ€§</strong></h4>
<ul>
<li>
<p><strong>éƒ¨ç½²Gateway APIèµ„æº</strong>ï¼šå°†è½¬æ¢åçš„<code>gateway-api.yaml</code>åº”ç”¨åˆ°é›†ç¾¤ï¼ŒéªŒè¯<code>Gateway</code>å’Œ<code>HTTPRoute</code>çš„çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">kubectl apply -f gateway-api.yaml
kubectl <span class="hljs-keyword">get</span> gateways -A  <span class="hljs-meta"># æ£€æŸ¥Gatewayæ˜¯å¦å°±ç»ª</span>
kubectl <span class="hljs-keyword">get</span> httproutes -A  <span class="hljs-meta"># æ£€æŸ¥HTTPRouteæ˜¯å¦å…³è”æˆåŠŸ</span>
</code></pre>
</li>
<li>
<p><strong>æµé‡æµ‹è¯•</strong>ï¼šé€šè¿‡<code>curl</code>æˆ–æµè§ˆå™¨è®¿é—®Gatewayçš„å¤–éƒ¨IPï¼ŒéªŒè¯è·¯ç”±è§„åˆ™æ˜¯å¦æ­£ç¡®ï¼ˆå¦‚è·¯å¾„åŒ¹é…ã€TLSç»ˆæ­¢ï¼‰ã€‚ä¾‹å¦‚ï¼Œè‹¥<code>HTTPRoute</code>é…ç½®äº†<code>path: /api</code>ï¼Œåˆ™è®¿é—®<code>http://&lt;gateway-ip&gt;/api</code>åº”è½¬å‘è‡³ç›®æ ‡æœåŠ¡ã€‚</p>
</li>
</ul>
<h4 data-id="heading-4"><strong>4. æµé‡åˆ‡æ¢ï¼šç°åº¦è¿ç§»</strong></h4>
<p>ä¸ºé¿å…ä¸šåŠ¡ä¸­æ–­ï¼Œé‡‡ç”¨<strong>ç°åº¦åˆ‡æµ</strong>æ–¹å¼é€æ­¥å°†æµé‡ä»Ingressæ§åˆ¶å™¨åˆ‡æ¢è‡³Gateway APIï¼š</p>
<ul>
<li><strong>æ–¹æ¡ˆ1ï¼šå¤ç”¨ç°æœ‰SLB</strong>ï¼šè‹¥é›†ç¾¤ä½¿ç”¨äº‘å‚å•†çš„SLBï¼ˆå¦‚é˜¿é‡Œäº‘SLBï¼‰ï¼Œå¯å°†Gateway APIçš„èŠ‚ç‚¹æ·»åŠ è‡³ç°æœ‰SLBçš„è™šæ‹ŸæœåŠ¡å™¨ç»„ï¼Œé€šè¿‡è°ƒæ•´<strong>æƒé‡</strong>ï¼ˆå¦‚Gatewayå 10%ã€Ingresså 90%ï¼‰é€æ­¥åˆ‡æ¢æµé‡ã€‚</li>
<li><strong>æ–¹æ¡ˆ2ï¼šDNSæƒé‡è§£æ</strong>ï¼šåœ¨DNSæœåŠ¡å•†ï¼ˆå¦‚é˜¿é‡Œäº‘DNSï¼‰ä¸­ä¸ºä¸šåŠ¡åŸŸåæ·»åŠ Gateway APIçš„SLBåœ°å€ï¼Œè®¾ç½®æƒé‡ï¼ˆå¦‚Gatewayå 10%ï¼‰ï¼Œé€æ­¥å¢åŠ æƒé‡è‡³100%ã€‚</li>
</ul>
<h3 data-id="heading-5"><strong>äºŒã€è¿ç§»è¿‡ç¨‹ä¸­çš„å…³é”®æ³¨æ„äº‹é¡¹</strong></h3>
<h4 data-id="heading-6"><strong>1. è‡ªå®šä¹‰æ³¨è§£çš„å…¼å®¹æ€§å¤„ç†</strong></h4>
<p>ä¼ ç»ŸIngressä¾èµ–<strong>æ³¨è§£</strong>ï¼ˆå¦‚Nginxçš„<code>nginx.ingress.kubernetes.io/rewrite-target</code>ï¼‰å®ç°é«˜çº§åŠŸèƒ½ï¼Œè€ŒGateway APIé€šè¿‡<strong>ç»“æ„åŒ–é…ç½®</strong>ï¼ˆå¦‚<code>HTTPRoute</code>çš„<code>filters</code>ï¼‰æ›¿ä»£æ³¨è§£ã€‚è¿ç§»æ—¶éœ€æ³¨æ„ï¼š</p>
<ul>
<li><strong>å¯è‡ªåŠ¨è½¬æ¢çš„æ³¨è§£</strong>ï¼š<code>ingress2gateway</code>å·¥å…·å¯å¤„ç†å¤§éƒ¨åˆ†å¸¸è§æ³¨è§£ï¼ˆå¦‚<code>rewrite-target</code>â†’<code>urlRewrite</code>ã€<code>timeout</code>â†’<code>timeout</code>ï¼‰ï¼›</li>
<li><strong>æ— æ³•è‡ªåŠ¨è½¬æ¢çš„æ³¨è§£</strong>ï¼šéœ€æ‰‹åŠ¨è°ƒæ•´ï¼Œä¾‹å¦‚Nginxçš„<code>nginx.ingress.kubernetes.io/load-balance</code>éœ€è½¬æ¢ä¸ºGateway APIçš„<code>backendRefs</code>æƒé‡é…ç½®ã€‚</li>
</ul>
<h4 data-id="heading-7"><strong>2. TLSé…ç½®çš„è¿ç§»</strong></h4>
<p>Ingressçš„TLSé…ç½®ï¼ˆå¦‚<code>tls.secretName</code>ï¼‰éœ€è½¬æ¢ä¸ºGateway APIçš„<code>Gateway</code>èµ„æºçš„<code>listeners.tls</code>é…ç½®ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li>
<p>Ingressçš„TLSé…ç½®ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spec:</span>
  <span class="hljs-attr">tls:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">secretName:</span> <span class="hljs-string">example-com-tls</span>
</code></pre>
</li>
<li>
<p>è½¬æ¢ä¸ºGateway APIçš„<code>Gateway</code>é…ç½®ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spec:</span>
  <span class="hljs-attr">listeners:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">https</span>
    <span class="hljs-attr">protocol:</span> <span class="hljs-string">HTTPS</span>
    <span class="hljs-attr">port:</span> <span class="hljs-number">443</span>
    <span class="hljs-attr">tls:</span>
      <span class="hljs-attr">mode:</span> <span class="hljs-string">Terminate</span>
      <span class="hljs-attr">certificateRefs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">kind:</span> <span class="hljs-string">Secret</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">example-com-tls</span>
</code></pre>
</li>
</ul>
<h4 data-id="heading-8"><strong>3. è·¨å‘½åç©ºé—´è·¯ç”±çš„å¤„ç†</strong></h4>
<p>Gateway APIé»˜è®¤<strong>ç¦æ­¢è·¨å‘½åç©ºé—´è·¯ç”±</strong>ï¼Œéœ€é€šè¿‡<code>ReferenceGrant</code>èµ„æºæˆæƒã€‚ä¾‹å¦‚ï¼Œè‹¥<code>HTTPRoute</code>åœ¨<code>app</code>å‘½åç©ºé—´ï¼Œéœ€<code>Gateway</code>åœ¨<code>gateway</code>å‘½åç©ºé—´ï¼Œåˆ™éœ€åˆ›å»ºï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">apiVersion:</span> <span class="hljs-string">gateway.networking.k8s.io/v1alpha2</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">ReferenceGrant</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">allow-cross-namespace</span>
  <span class="hljs-attr">namespace:</span> <span class="hljs-string">gateway</span>  <span class="hljs-comment"># Gatewayæ‰€åœ¨å‘½åç©ºé—´</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">from:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">group:</span> <span class="hljs-string">gateway.networking.k8s.io</span>
    <span class="hljs-attr">kind:</span> <span class="hljs-string">HTTPRoute</span>
    <span class="hljs-attr">namespace:</span> <span class="hljs-string">app</span>  <span class="hljs-comment"># HTTPRouteæ‰€åœ¨å‘½åç©ºé—´</span>
  <span class="hljs-attr">to:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">group:</span> <span class="hljs-string">""</span>
    <span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span>
</code></pre>
<h4 data-id="heading-9"><strong>4. ç›‘æ§ä¸å›æ»š</strong></h4>
<ul>
<li><strong>ç›‘æ§</strong>ï¼šè¿ç§»è¿‡ç¨‹ä¸­éœ€ç›‘æ§Gateway APIçš„æŒ‡æ ‡ï¼ˆå¦‚è¯·æ±‚é‡ã€é”™è¯¯ç‡ï¼‰ï¼Œå¯ä½¿ç”¨Prometheus+Grafanaæˆ–äº‘å‚å•†çš„ç›‘æ§æœåŠ¡ï¼ˆå¦‚é˜¿é‡Œäº‘ARMSï¼‰ï¼›</li>
<li><strong>å›æ»š</strong>ï¼šè‹¥å‘ç°é—®é¢˜ï¼Œå¯é€šè¿‡è°ƒæ•´SLBæƒé‡æˆ–DNSè§£æå¿«é€Ÿå›æ»šè‡³Ingressæ§åˆ¶å™¨ï¼Œç¡®ä¿ä¸šåŠ¡è¿ç»­æ€§ã€‚</li>
</ul>
<h3 data-id="heading-10"><strong>ä¸‰ã€æ€»ç»“</strong></h3>
<p>Gateway APIä¸ä¼ ç»ŸIngressçš„å¹³æ»‘è¿ç§»éœ€éµå¾ª <strong>â€œå…¼å®¹å…±å­˜ã€é€æ­¥åˆ‡æ¢â€</strong> çš„åŸåˆ™ï¼Œæ ¸å¿ƒæ­¥éª¤åŒ…æ‹¬<strong>ç¯å¢ƒå‡†å¤‡ã€é…ç½®è½¬æ¢ã€æµ‹è¯•éªŒè¯ã€æµé‡ç°åº¦åˆ‡æ¢</strong>ã€‚è¿ç§»è¿‡ç¨‹ä¸­éœ€æ³¨æ„<strong>è‡ªå®šä¹‰æ³¨è§£çš„å…¼å®¹æ€§ã€TLSé…ç½®ã€è·¨å‘½åç©ºé—´è·¯ç”±</strong>ç­‰å…³é”®é—®é¢˜ï¼Œå¹¶é€šè¿‡<strong>ç›‘æ§ä¸å›æ»š</strong>ç¡®ä¿ä¸šåŠ¡ç¨³å®šæ€§ã€‚å¯¹äºä¼ä¸šç”¨æˆ·ï¼Œå»ºè®®ä¼˜å…ˆé€‰æ‹©<strong>äº‘å‚å•†æä¾›çš„è¿ç§»å·¥å…·</strong>ï¼ˆå¦‚é˜¿é‡Œäº‘MSE Ingressï¼‰ï¼Œä»¥é™ä½è¿ç§»æˆæœ¬ä¸é£é™©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[dbVisitor ä½¿ç”¨ MyBatis æ–¹å¼æ“ä½œ MongoDB]]></title>    <link>https://juejin.cn/post/7591513171199721535</link>    <guid>https://juejin.cn/post/7591513171199721535</guid>    <pubDate>2026-01-05T13:38:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591513171199721535" data-draft-id="7591497387246551076" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="dbVisitor ä½¿ç”¨ MyBatis æ–¹å¼æ“ä½œ MongoDB"/> <meta itemprop="keywords" content="MongoDB,ORM"/> <meta itemprop="datePublished" content="2026-01-05T13:38:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆåº“çº³"/> <meta itemprop="url" content="https://juejin.cn/user/2840793779538552"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            dbVisitor ä½¿ç”¨ MyBatis æ–¹å¼æ“ä½œ MongoDB
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2840793779538552/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆåº“çº³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T13:38:20.000Z" title="Mon Jan 05 2026 13:38:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Java ç”Ÿæ€ä¸­ï¼Œæ“ä½œ MongoDB æœ€å¸¸è§çš„æ–¹å¼è«è¿‡äºä½¿ç”¨å®˜æ–¹çš„ <code>mongo-java-driver</code> æˆ–è€… Spring å®¶æ—çš„ <code>spring-data-mongodb</code>ã€‚è¿™äº›å·¥å…·éå¸¸å¼ºå¤§ï¼Œä½†å¯¹äºä¹ æƒ¯äº†å…³ç³»å‹æ•°æ®åº“ï¼ˆRDBMSï¼‰å’Œ MyBatis å¼€å‘æ¨¡å¼çš„å¼€å‘è€…æ¥è¯´ï¼Œåˆ‡æ¢åˆ° MongoDB å¾€å¾€æ„å‘³ç€éœ€è¦é€‚åº”ä¸€å¥—å…¨æ–°çš„ API å’Œæ€ç»´æ¨¡å¼ã€‚</p>
<p>ç‰¹åˆ«æ˜¯åœ¨ä¸€ä¸ªæ··åˆæ¶æ„çš„é¡¹ç›®ä¸­ï¼Œå¦‚æœåŒæ—¶å­˜åœ¨ MySQL å’Œ MongoDBï¼Œæ•°æ®è®¿é—®å±‚çš„ä»£ç é£æ ¼å‰²è£‚æ„Ÿä¼šéå¸¸å¼ºï¼šä¸€è¾¹æ˜¯ MyBatis çš„ Mapper æ¥å£å’Œ XMLï¼Œå¦ä¸€è¾¹æ˜¯ <code>MongoTemplate</code> çš„é“¾å¼è°ƒç”¨æˆ– Repository æ¥å£ã€‚è¿™ç§å·®å¼‚ä¸ä»…å¢åŠ äº†å­¦ä¹ æˆæœ¬ï¼Œä¹Ÿè®©è¯¸å¦‚â€œåˆ†é¡µæŸ¥è¯¢â€è¿™æ ·çš„é€šç”¨åŠŸèƒ½éš¾ä»¥ç»Ÿä¸€å®ç°ã€‚</p>
<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ <strong>dbVisitor</strong>ï¼Œä»¥ä¸€ç§â€œç±» MyBatisâ€çš„æ–¹å¼æ¥æ“ä½œ MongoDBï¼Œå®ç°æ¶æ„ä¸Šçš„ç»Ÿä¸€ã€‚</p>

<h2 data-id="heading-0">1. ä¼ ç»Ÿæ–¹å¼çš„ç—›ç‚¹</h2>
<p>åœ¨ä¼ ç»Ÿçš„æ··åˆæ¶æ„ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li><strong>API é£æ ¼ä¸ç»Ÿä¸€</strong>ï¼šRDBMS ä½¿ç”¨ SQL å’Œ JDBCï¼ŒMongoDB ä½¿ç”¨ BSON å’Œä¸“æœ‰åè®®ã€‚</li>
<li><strong>åˆ†é¡µå®ç°å·®å¼‚</strong>ï¼šMyBatis é€šå¸¸é…åˆ PageHelper æˆ– RowBoundsï¼Œè€Œ MongoDB éœ€è¦æ‰‹åŠ¨è®¡ç®— <code>skip</code> å’Œ <code>limit</code>ï¼Œæˆ–è€…ä½¿ç”¨ Spring Data çš„ <code>Pageable</code>ã€‚</li>
<li><strong>ç»´æŠ¤æˆæœ¬é«˜</strong>ï¼šéœ€è¦ç»´æŠ¤ä¸¤å¥—å®Œå…¨ä¸åŒçš„åº•å±‚é€»è¾‘ï¼Œå¢åŠ äº†ä»£ç çš„å¤æ‚åº¦å’Œå‡ºé”™çš„æ¦‚ç‡ã€‚</li>
</ul>
<h2 data-id="heading-1">2. dbVisitor çš„è§£å†³æ–¹æ¡ˆ</h2>
<p>dbVisitor é€šè¿‡æä¾›ä¸€ä¸ª JDBC é©±åŠ¨å±‚ï¼ˆ<code>dbvisitor-driver</code>ï¼‰å’Œé€‚é…å™¨ï¼ˆ<code>jdbc-mongo</code>ï¼‰ï¼Œå°† MongoDB çš„æ“ä½œå°è£…æˆäº†æ ‡å‡†çš„ JDBC æ¥å£ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åƒæ“ä½œ MySQL ä¸€æ ·æ“ä½œ MongoDBã€‚</p>
<p>æ›´è¿›ä¸€æ­¥ï¼ŒdbVisitor æä¾›äº†ç±»ä¼¼ MyBatis çš„ ORM åŠŸèƒ½ï¼Œæ”¯æŒ Mapper æ¥å£ã€XML æ˜ å°„æ–‡ä»¶ã€æ³¨è§£ä»¥åŠ Lambda è¡¨è¾¾å¼ã€‚</p>
<h3 data-id="heading-2">2.1 å¯¹è±¡å…³ç³»æ˜ å°„ (ORM)</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ª Java å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨æ³¨è§£è¿›è¡Œæ˜ å°„ã€‚è¿™ä¸ MyBatis Plus æˆ– JPA éå¸¸ç›¸ä¼¼ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Table("user_info")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserInfo</span> {
    <span class="hljs-comment">// æ˜ å°„ _id å­—æ®µï¼Œå¹¶è‡ªåŠ¨å¤„ç† ObjectId</span>
    <span class="hljs-meta">@Column(value = "_id", primary = true, keyType = KeyType.Auto, whereValueTemplate = "ObjectId(?)")</span>
    <span class="hljs-keyword">private</span> String id;

    <span class="hljs-meta">@Column("name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@Column("age")</span>
    <span class="hljs-keyword">private</span> Integer age;

    <span class="hljs-comment">// çœç•¥ getter/setter</span>
}
</code></pre>
<h3 data-id="heading-3">2.2 ä½¿ç”¨ Mapper æ¥å£ (æ³¨è§£æ–¹å¼)</h3>
<p>ä½ å¯ä»¥å®šä¹‰ä¸€ä¸ª Mapper æ¥å£ï¼Œä½¿ç”¨æ³¨è§£æ¥ç¼–å†™ MongoDB çš„å‘½ä»¤ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@SimpleMapper</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserInfoMapper</span> {
    <span class="hljs-comment">// æ’å…¥æ•°æ®</span>
    <span class="hljs-meta">@Insert("test.user_info.insert(#{info})")</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(<span class="hljs-meta">@Param("info")</span> UserInfo info)</span>;

    <span class="hljs-comment">// æ ¹æ® ID æŸ¥è¯¢</span>
    <span class="hljs-meta">@Query("test.user_info.find({_id: ObjectId(#{id})})")</span>
    UserInfo <span class="hljs-title function_">loadById</span><span class="hljs-params">(<span class="hljs-meta">@Param("id")</span> String id)</span>;

    <span class="hljs-comment">// åˆ é™¤æ•°æ®</span>
    <span class="hljs-meta">@Delete("test.user_info.remove({_id: ObjectId(#{id})})")</span>
    <span class="hljs-type">int</span> <span class="hljs-title function_">deleteUser</span><span class="hljs-params">(<span class="hljs-meta">@Param("id")</span> String id)</span>;
}
</code></pre>
<h3 data-id="heading-4">2.3 ä½¿ç”¨é€šç”¨ Mapper</h3>
<p>å¦‚æœä½ ä¸æƒ³å†™ä»»ä½•å‘½ä»¤ï¼Œå¯ä»¥ç›´æ¥ç»§æ‰¿ <code>BaseMapper</code>ï¼ŒdbVisitor ä¼šè‡ªåŠ¨ç”ŸæˆåŸºç¡€çš„ CRUD æ“ä½œã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@SimpleMapper</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserInfoBaseMapper</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseMapper</span>&lt;UserInfo&gt; {
    <span class="hljs-comment">// è‡ªåŠ¨æ‹¥æœ‰ insert, update, delete, selectById, listBySample ç­‰æ–¹æ³•</span>
}
</code></pre>
<h3 data-id="heading-5">2.4 ä½¿ç”¨ Lambda æ–¹å¼</h3>
<p>dbVisitor ä¹Ÿæä¾›äº†ç±»ä¼¼ MyBatis Plus çš„ Lambda è°ƒç”¨æ–¹å¼ï¼Œå®Œå…¨ç±»å‹å®‰å…¨ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">LambdaTemplate</span> <span class="hljs-variable">lambda</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LambdaTemplate</span>(connection);

<span class="hljs-comment">// æŸ¥è¯¢ name = "mali" çš„ç”¨æˆ·</span>
<span class="hljs-type">UserInfo</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> lambda.query(UserInfo.class)
    .eq(UserInfo::getName, <span class="hljs-string">"mali"</span>)
    .queryForObject();

<span class="hljs-comment">// æ›´æ–°æ“ä½œ</span>
lambda.update(UserInfo.class)
    .eq(UserInfo::getId, user.getId())
    .updateTo(UserInfo::getAge, <span class="hljs-number">27</span>)
    .doUpdate();
</code></pre>
<h3 data-id="heading-6">2.5 ä½¿ç”¨ XML ç®¡ç† Mapper (MyBatis é£æ ¼)</h3>
<p>å¯¹äºå¤æ‚çš„æŸ¥è¯¢æˆ–éœ€è¦ç»Ÿä¸€ç®¡ç† SQL çš„åœºæ™¯ï¼ŒdbVisitor æ”¯æŒä½¿ç”¨ XML æ–‡ä»¶æ¥å®šä¹‰ Mapperï¼Œè¿™ä¸ MyBatis çš„ä½“éªŒå‡ ä¹ä¸€è‡´ã€‚</p>
<p><strong>Mapper æ¥å£ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RefMapper("mapper/user-mapper.xml")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserInfoXmlMapper</span> {
    <span class="hljs-type">int</span> <span class="hljs-title function_">saveUser</span><span class="hljs-params">(<span class="hljs-meta">@Param("info")</span> UserInfo info)</span>;
    List&lt;UserInfo&gt; <span class="hljs-title function_">listByUserName</span><span class="hljs-params">(<span class="hljs-meta">@Param("userName")</span> String userName, Page page)</span>;
}
</code></pre>
<p><strong>XML æ–‡ä»¶ (user-mapper.xml)ï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//dbvisitor.net//DTD Mapper 1.0//EN"</span>
        <span class="hljs-string">"https://www.dbvisitor.net/schema/dbvisitor-mapper.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"com.example.mapper.UserInfoXmlMapper"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userResultMap"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"com.example.entity.UserInfo"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"_id"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"id"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"name"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"age"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"age"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"saveUser"</span>&gt;</span>
        test.user_info.insert({
            name: #{info.name},
            age: #{info.age}
        })
    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ”¯æŒè‡ªåŠ¨åˆ†é¡µ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"listByUserName"</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">"userResultMap"</span>&gt;</span>
        test.user_info.find({name: #{userName}})
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span>
</code></pre>
<h2 data-id="heading-7">3. ç»Ÿä¸€çš„åˆ†é¡µå®ç°</h2>
<p>åœ¨ dbVisitor ä¸­ï¼Œæ— è®ºæ˜¯æ“ä½œ MySQL è¿˜æ˜¯ MongoDBï¼Œåˆ†é¡µæŸ¥è¯¢çš„å®ç°æ–¹å¼æ˜¯å®Œå…¨ç»Ÿä¸€çš„ã€‚ä½ åªéœ€è¦ä¼ é€’ä¸€ä¸ª <code>Page</code> å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»ºåˆ†é¡µå¯¹è±¡</span>
<span class="hljs-type">Page</span> <span class="hljs-variable">page</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageObject</span>();
page.setPageSize(<span class="hljs-number">10</span>);
page.setPageNumber(<span class="hljs-number">0</span>); <span class="hljs-comment">// ç¬¬ä¸€é¡µ</span>

<span class="hljs-comment">// æ‰§è¡ŒæŸ¥è¯¢ï¼ŒdbVisitor ä¼šè‡ªåŠ¨æ‹¦æˆªå¹¶é‡å†™ä¸ºåˆ†é¡µæŸ¥è¯¢</span>
<span class="hljs-comment">// å¯¹äº MongoDBï¼Œä¼šè‡ªåŠ¨è½¬æ¢ä¸º .skip(0).limit(10)</span>
List&lt;UserInfo&gt; list = mapper.listByUserName(<span class="hljs-string">"mali"</span>, page);

<span class="hljs-comment">// è·å–æ€»è®°å½•æ•°ï¼ˆå¦‚æœéœ€è¦ï¼‰</span>
<span class="hljs-type">long</span> <span class="hljs-variable">total</span> <span class="hljs-operator">=</span> page.getTotalCount();

<span class="hljs-comment">// ç¿»é¡µ</span>
page.nextPage();
list = mapper.listByUserName(<span class="hljs-string">"mali"</span>, page);
</code></pre>
<h2 data-id="heading-8">4. æ€»ç»“</h2>
<p>é€šè¿‡ dbVisitorï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œç”¨åŒä¸€å¥— APIã€åŒä¸€ç§æ€ç»´æ–¹å¼ï¼ˆMapper/XML/Lambdaï¼‰åŒæ—¶æ“ä½œå…³ç³»å‹æ•°æ®åº“å’Œ MongoDBã€‚è¿™æå¤§åœ°é™ä½äº†æ··åˆæ¶æ„é¡¹ç›®çš„å¼€å‘å’Œç»´æŠ¤æˆæœ¬ï¼Œè®©æ•°æ®è®¿é—®å±‚å˜å¾—æ›´åŠ æ•´æ´å’Œç»Ÿä¸€ã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€ç§èƒ½å¤Ÿç»Ÿä¸€ RDBMS å’Œ NoSQL å¼€å‘ä½“éªŒçš„å·¥å…·ï¼ŒdbVisitor ç»å¯¹å€¼å¾—ä¸€è¯•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Cursorè¿›é˜¶å®æˆ˜Â·04ã€‘å·¥ä½œæµé©å‘½ï¼šä»"æ‰‹åŠ¨é©¾é©¶"åˆ°"è‡ªåŠ¨é©¾é©¶"]]></title>    <link>https://juejin.cn/post/7591702898080350223</link>    <guid>https://juejin.cn/post/7591702898080350223</guid>    <pubDate>2026-01-05T13:53:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591702898080350223" data-draft-id="7591703562134093858" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Cursorè¿›é˜¶å®æˆ˜Â·04ã€‘å·¥ä½œæµé©å‘½ï¼šä»&quot;æ‰‹åŠ¨é©¾é©¶&quot;åˆ°&quot;è‡ªåŠ¨é©¾é©¶&quot;"/> <meta itemprop="keywords" content="Cursor,äººå·¥æ™ºèƒ½,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-05T13:53:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬å¥‡Lab"/> <meta itemprop="url" content="https://juejin.cn/user/1857501105781193"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Cursorè¿›é˜¶å®æˆ˜Â·04ã€‘å·¥ä½œæµé©å‘½ï¼šä»"æ‰‹åŠ¨é©¾é©¶"åˆ°"è‡ªåŠ¨é©¾é©¶"
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1857501105781193/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬å¥‡Lab
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T13:53:07.000Z" title="Mon Jan 05 2026 13:53:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¼ ç»Ÿå·¥ä½œæµçš„é—®é¢˜ä¸æŒ‘æˆ˜</h2>
<p>åœ¨ä½¿ç”¨Cursorè¿›è¡ŒAIè¾…åŠ©å¼€å‘æ—¶ï¼Œå¼€å‘è€…å¾€å¾€ä¼šé‡åˆ°ä»¥ä¸‹å…¸å‹é—®é¢˜ï¼š</p>
<h3 data-id="heading-1">é‡å¤æ€§å·¥ä½œ</h3>
<p>å½“éœ€è¦åˆ›å»ºæ–°åŠŸèƒ½æ—¶ï¼Œå¼€å‘è€…é€šå¸¸éœ€è¦å‘AIè¯¦ç»†è¯´æ˜é¡¹ç›®è§„èŒƒå’ŒæŠ€æœ¯æ ˆè¦æ±‚ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªç”¨æˆ·åˆ—è¡¨é¡µé¢æ—¶ï¼Œéœ€è¦æ˜ç¡®æŒ‡å®šï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">å¸®æˆ‘åˆ›å»ºä¸€ä¸ªç”¨æˆ·åˆ—è¡¨é¡µé¢ï¼Œä½¿ç”¨<span class="hljs-keyword">Next</span>.js + TypeScript + TailwindCSS + Shadcn/UI
</code></pre>
<p>ç„¶è€Œï¼ŒAIç”Ÿæˆçš„ä»£ç å¾€å¾€å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>âŒ ä½¿ç”¨äº†classç»„ä»¶è€Œéå‡½æ•°ç»„ä»¶</li>
<li>âŒ æ ·å¼é‡‡ç”¨å†…è”æ–¹å¼è€ŒéTailwindCSS</li>
<li>âŒ APIè°ƒç”¨ç¼ºå°‘é”™è¯¯å¤„ç†</li>
<li>âŒ ä»£ç ç¼ºå°‘å¿…è¦çš„æ³¨é‡Š</li>
</ul>
<p>å¼€å‘è€…éœ€è¦èŠ±è´¹15-20åˆ†é’Ÿæ‰‹åŠ¨ä¿®æ”¹è¿™äº›é—®é¢˜ï¼Œä½¿ä»£ç ç¬¦åˆå›¢é˜Ÿè§„èŒƒã€‚å½“éœ€è¦åˆ›å»ºç±»ä¼¼åŠŸèƒ½æ—¶ï¼Œåˆéœ€è¦é‡å¤è¯´æ˜ç›¸åŒçš„è§„èŒƒè¦æ±‚ã€‚</p>
<h3 data-id="heading-2">è´¨é‡ä¿éšœç¼ºå¤±</h3>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œè¿˜å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li><strong>ä»£ç æ ¼å¼é—®é¢˜</strong>: æäº¤å‰å¿˜è®°æ ¼å¼åŒ–ï¼ŒCIå› æ ¼å¼é—®é¢˜å¤±è´¥ï¼Œéœ€è¦é¢å¤–30åˆ†é’Ÿä¿®å¤</li>
<li><strong>å›¢é˜Ÿåä½œé—®é¢˜</strong>: æ–°æˆå‘˜ä¸äº†è§£é¡¹ç›®è§„èŒƒï¼ŒAIç”Ÿæˆçš„ä»£ç é£æ ¼ä¸ç°æœ‰ä»£ç ä¸ä¸€è‡´</li>
<li><strong>ä¸Šä¸‹æ–‡ç†è§£é—®é¢˜</strong>: æ¯æ¬¡éƒ½éœ€è¦é‡æ–°å‘AIè§£é‡Šé¡¹ç›®æ¶æ„å’Œä¸šåŠ¡é€»è¾‘</li>
</ul>
<h3 data-id="heading-3">æ•ˆç‡ç“¶é¢ˆ</h3>
<p>è¿™äº›é—®é¢˜å¯¼è‡´å¼€å‘æ•ˆç‡ä½ä¸‹ï¼š</p>
<ul>
<li>æ¯æ¬¡Promptéœ€è¦150å­—ä»¥ä¸Šçš„è¯¦ç»†è¯´æ˜</li>
<li>AIè¾“å‡ºä»£ç çš„å¯ç”¨ç‡ä»…60%ï¼Œéœ€è¦å¤§é‡æ‰‹åŠ¨ä¿®æ”¹</li>
<li>ä»£ç å®¡æŸ¥å’Œæ ¼å¼ä¿®å¤å ç”¨å¤§é‡æ—¶é—´</li>
<li>å›¢é˜Ÿåä½œä¸­ä»£ç é£æ ¼ä¸ç»Ÿä¸€ï¼Œå¢åŠ ç»´æŠ¤æˆæœ¬</li>
</ul>
<h3 data-id="heading-4">è§£å†³æ–¹æ¡ˆï¼šå·¥ä½œæµè‡ªåŠ¨åŒ–</h3>
<p>é€šè¿‡é…ç½®<strong>Rulesã€Contextã€Hooks</strong>ä¸‰å¤§å·¥å…·ï¼Œå¯ä»¥å®ç°ä»"æ‰‹åŠ¨é©¾é©¶"åˆ°"è‡ªåŠ¨é©¾é©¶"çš„è½¬å˜ï¼š</p>
<ul>
<li><strong>Rules</strong>: å®šä¹‰AIçš„è¡Œä¸ºè§„èŒƒï¼Œè®©AIè‡ªåŠ¨éµå®ˆé¡¹ç›®è§„èŒƒ</li>
<li><strong>Context</strong>: æä¾›é¡¹ç›®ä¸Šä¸‹æ–‡ï¼Œè®©AIç†è§£é¡¹ç›®æ¶æ„å’Œä¸šåŠ¡é€»è¾‘</li>
<li><strong>Hooks</strong>: å®ç°è‡ªåŠ¨åŒ–è´¨é‡æ£€æŸ¥ï¼Œç¡®ä¿ä»£ç è´¨é‡</li>
</ul>
<p><strong>æœ¬æ–‡ç›®æ ‡</strong>:</p>
<ul>
<li>ç†è§£å·¥ä½œæµè‡ªåŠ¨åŒ–çš„ä¸‰å¤§æ”¯æŸ±</li>
<li>æŒæ¡<code>.cursorrules</code>é…ç½®æŠ€å·§</li>
<li>å­¦ä¼šä½¿ç”¨Contextæä¾›é¡¹ç›®ä¸Šä¸‹æ–‡</li>
<li>é…ç½®Hookså®ç°è‡ªåŠ¨åŒ–è´¨é‡æ£€æŸ¥</li>
<li>å®Œæ•´çš„é…ç½®æ–¹æ¡ˆå’Œé¢„æœŸæ•ˆæœ</li>
</ul>
<hr/>
<h2 data-id="heading-5">å·¥ä½œæµçš„ä¸‰å¤§æ”¯æŸ±</h2>
<p>åœ¨æ·±å…¥é…ç½®ä¹‹å‰ï¼Œå…ˆç†è§£Cursorå·¥ä½œæµè‡ªåŠ¨åŒ–çš„æ¶æ„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee00f5ea2c3a40568631b4942eab8f8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768225987&amp;x-signature=do3s83d7piePuRHR%2Fxqvc5YJ5Ig%3D" alt="cursor04-å·¥ä½œæµä¸‰å¤§æ”¯æŸ±æ¶æ„å›¾.png" loading="lazy"/></p>
<h3 data-id="heading-6">Rulesï¼šAIçš„è¡Œä¸ºè§„èŒƒæ‰‹å†Œ</h3>
<p><strong>ä½œç”¨</strong>: å®šä¹‰AIçš„è¾“å‡ºé£æ ¼ã€æŠ€æœ¯é€‰å‹ã€ä»£ç è§„èŒƒ</p>
<p><strong>ä½ç½®</strong>:</p>
<ul>
<li>é¡¹ç›®çº§ï¼š<code>.cursorrules</code> æ–‡ä»¶ï¼ˆå›¢é˜Ÿå…±äº«ï¼‰</li>
<li>ç”¨æˆ·çº§ï¼š<code>~/.cursor/rules</code> æ–‡ä»¶ï¼ˆä¸ªäººåå¥½ï¼‰</li>
</ul>
<p><strong>ä¼˜å…ˆçº§</strong>: é¡¹ç›®çº§ &gt; ç”¨æˆ·çº§</p>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>:</p>
<blockquote>
<p>"åƒç»™AIåšäº†ä¸€æ¬¡'å…¥èŒåŸ¹è®­'ï¼Œå®ƒä¼šè®°ä½å¹¶æ‰§è¡Œå›¢é˜Ÿè§„èŒƒã€‚"</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">Contextï¼šAIçš„é¡¹ç›®è®°å¿†</h3>
<p><strong>ä½œç”¨</strong>: è®©AIç†è§£å½“å‰é¡¹ç›®çš„æ¶æ„ã€æŠ€æœ¯æ ˆã€ä¸šåŠ¡é€»è¾‘</p>
<p><strong>ç±»å‹</strong>:</p>
<ul>
<li><code>@Codebase</code> - å…¨å±€ä»£ç æœç´¢</li>
<li><code>@Docs</code> - å…³è”é¡¹ç›®æ–‡æ¡£</li>
<li><code>@Web</code> - å®æ—¶ç½‘ç»œä¿¡æ¯</li>
<li><code>@Git</code> - ç‰ˆæœ¬å†å²ä¸Šä¸‹æ–‡</li>
</ul>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>:</p>
<blockquote>
<p>"AIä¸å†æ˜¯'å¥å¿˜'çš„åŠ©æ‰‹ï¼Œè€Œæ˜¯ç†è§£é¡¹ç›®å…¨è²Œçš„ä¼™ä¼´ã€‚"</p>
</blockquote>
<hr/>
<h3 data-id="heading-8">Hooksï¼šAIçš„è‡ªåŠ¨åŒ–è§¦å‘å™¨</h3>
<p><strong>ä½œç”¨</strong>: åœ¨ç‰¹å®šæ—¶æœºè‡ªåŠ¨æ‰§è¡ŒAIä»»åŠ¡</p>
<p><strong>ä½ç½®</strong>: <code>.cursor/hooks.json</code> æ–‡ä»¶</p>
<p><strong>ç±»å‹</strong>:</p>
<ul>
<li><code>beforeSubmitPrompt</code> - å‘é€å‰æ£€æŸ¥</li>
<li><code>afterFileEdit</code> - æ–‡ä»¶ä¿®æ”¹åå¤„ç†</li>
<li><code>beforeShellExecution</code> - å‘½ä»¤æ‰§è¡Œå‰æ§åˆ¶</li>
<li><code>stop</code> - Agentå®Œæˆåå®¡æŸ¥</li>
</ul>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>:</p>
<blockquote>
<p>"è®©AIä»'è¢«åŠ¨å“åº”'å˜æˆ'ä¸»åŠ¨å®ˆæŠ¤'ï¼Œ24å°æ—¶åœ¨çº¿çš„è´¨é‡å®ˆå«ã€‚"</p>
</blockquote>
<hr/>
<h3 data-id="heading-9">ä¸‰è€…çš„ååŒå…³ç³»</h3>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Rules: å®šä¹‰<span class="hljs-string">"æ€ä¹ˆåš"</span>                  â”‚
â”‚  - æŠ€æœ¯æ ˆè§„èŒƒ                         â”‚
â”‚  - ä»£ç é£æ ¼                          â”‚
â”‚  - è¾“å‡ºè¦æ±‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Context: æä¾›<span class="hljs-string">"åšä»€ä¹ˆ"</span>çš„ä¸Šä¸‹æ–‡        â”‚
â”‚  - é¡¹ç›®æ¶æ„                         â”‚
â”‚  - ä¸šåŠ¡è§„åˆ™                         â”‚
â”‚  - å†å²ä»£ç                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Hooks: ç¡®ä¿<span class="hljs-string">"åšå¯¹äº†"</span>                 â”‚
â”‚  - è‡ªåŠ¨æ£€æŸ¥                          â”‚
â”‚  - æ ¼å¼åŒ–                            â”‚
â”‚  - è´¨é‡å®ˆæŠ¤                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>å¯¹æ¯”æ•ˆæœ</strong>:</p>






























<table><thead><tr><th align="left">ç»´åº¦</th><th align="left">ä¼ ç»Ÿå·¥ä½œæµ</th><th align="left">Cursorå·¥ä½œæµ</th></tr></thead><tbody><tr><td align="left">Prompté•¿åº¦</td><td align="left">æ¯æ¬¡150å­—è¯´æ˜è§„èŒƒ</td><td align="left">30å­—ç®€å•æè¿°éœ€æ±‚</td></tr><tr><td align="left">AIè¾“å‡ºå¯ç”¨ç‡</td><td align="left">60%éœ€è¦æ‰‹åŠ¨ä¿®æ”¹</td><td align="left">95%ç›´æ¥å¯ç”¨</td></tr><tr><td align="left">ä»£ç å®¡æŸ¥</td><td align="left">30åˆ†é’Ÿæ‰‹åŠ¨æ£€æŸ¥</td><td align="left">5åˆ†é’Ÿè‡ªåŠ¨å®Œæˆ</td></tr><tr><td align="left">å›¢é˜Ÿåä½œ</td><td align="left">å„è‡ªé…ç½®ï¼Œé£æ ¼æ··ä¹±</td><td align="left">ç»Ÿä¸€é…ç½®ï¼Œé£æ ¼ä¸€è‡´</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-10">Ruleså®æˆ˜ï¼šæ‰“é€ ä¸“å±AIåŠ©æ‰‹</h2>
<h3 data-id="heading-11">åŸºç¡€é…ç½®æ¨¡æ¿</h3>
<p>åˆ›å»ºé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„<code>.cursorrules</code>æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># é¡¹ç›®ä¿¡æ¯</span>
<span class="hljs-bullet">-</span> é¡¹ç›®åç§°: [Your Project Name]
<span class="hljs-bullet">-</span> æŠ€æœ¯æ ˆ: Next.js 14 + TypeScript + TailwindCSS
<span class="hljs-bullet">-</span> UIç»„ä»¶åº“: Shadcn/UI
<span class="hljs-bullet">-</span> çŠ¶æ€ç®¡ç†: Zustand
<span class="hljs-bullet">-</span> åŒ…ç®¡ç†å™¨: pnpm

<span class="hljs-section"># ä»£ç è§„èŒƒ</span>

<span class="hljs-section">## ç»„ä»¶è§„èŒƒ</span>
<span class="hljs-bullet">-</span> ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶å’ŒReact Hooks
<span class="hljs-bullet">-</span> ä¼˜å…ˆä½¿ç”¨Server Componentsï¼ˆNext.js 14ï¼‰
<span class="hljs-bullet">-</span> Propsä½¿ç”¨TypeScriptæ¥å£å®šä¹‰
<span class="hljs-bullet">-</span> ç»„ä»¶æ–‡ä»¶å‘½å: PascalCase.tsx

<span class="hljs-section">## å‘½åè§„èŒƒ</span>
<span class="hljs-bullet">-</span> æ–‡ä»¶å: kebab-caseï¼ˆmy-component.tsxï¼‰
<span class="hljs-bullet">-</span> ç»„ä»¶å: PascalCaseï¼ˆMyComponentï¼‰
<span class="hljs-bullet">-</span> å‡½æ•°å: camelCaseï¼ˆhandleClickï¼‰
<span class="hljs-bullet">-</span> å¸¸é‡å: UPPER<span class="hljs-emphasis">_SNAKE_</span>CASEï¼ˆAPI<span class="hljs-emphasis">_BASE_</span>URLï¼‰

<span class="hljs-section">## ä»£ç é£æ ¼</span>
<span class="hljs-bullet">-</span> ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³
<span class="hljs-bullet">-</span> é¿å…ä½¿ç”¨anyç±»å‹
<span class="hljs-bullet">-</span> ä½¿ç”¨å¯é€‰é“¾å’Œç©ºå€¼åˆå¹¶è¿ç®—ç¬¦
<span class="hljs-bullet">-</span> å•ä¸ªå‡½æ•°ä¸è¶…è¿‡50è¡Œ

<span class="hljs-section"># è®¾è®¡è§„èŒƒ</span>

<span class="hljs-section">## é…è‰²ç³»ç»Ÿ</span>
<span class="hljs-bullet">-</span> ä¸»è‰²è°ƒ: slateç³»ï¼ˆæ·±è‰²æ¨¡å¼ä¸ºä¸»ï¼‰
<span class="hljs-bullet">-</span> èƒŒæ™¯: bg-slate-950ï¼ˆä¸»ï¼‰ã€bg-slate-900ï¼ˆæ¬¡ï¼‰
<span class="hljs-bullet">-</span> æ–‡å­—: text-slate-100ï¼ˆä¸»ï¼‰ã€text-slate-400ï¼ˆæ¬¡ï¼‰
<span class="hljs-bullet">-</span> å¼ºè°ƒè‰²: blue-600ï¼ˆé“¾æ¥ï¼‰ã€green-600ï¼ˆæˆåŠŸï¼‰

<span class="hljs-section">## å¸ƒå±€è§„èŒƒ</span>
<span class="hljs-bullet">-</span> åœ†è§’: rounded-xlï¼ˆå¡ç‰‡ï¼‰ã€rounded-lgï¼ˆæŒ‰é’®ï¼‰
<span class="hljs-bullet">-</span> é—´è·: p-6ï¼ˆå¡ç‰‡å†…è¾¹è·ï¼‰ã€gap-4ï¼ˆå…ƒç´ é—´è·ï¼‰
<span class="hljs-bullet">-</span> é˜´å½±: shadow-smï¼ˆè½»å¾®ï¼‰ã€shadow-mdï¼ˆæ˜æ˜¾ï¼‰

<span class="hljs-section">## åŠ¨ç”»è§„èŒƒ</span>
<span class="hljs-bullet">-</span> è¿‡æ¸¡: transition-all duration-200
<span class="hljs-bullet">-</span> æ‚¬åœ: hover:opacity-80ã€hover:scale-105

<span class="hljs-section"># è¾“å‡ºè¦æ±‚</span>

<span class="hljs-section">## ä»£ç è´¨é‡</span>
<span class="hljs-bullet">-</span> æ‰€æœ‰å‡½æ•°å¿…é¡»æ·»åŠ æ³¨é‡Šè¯´æ˜ç”¨é€”å’Œå‚æ•°
<span class="hljs-bullet">-</span> å¤æ‚é€»è¾‘æ·»åŠ è¡Œå†…æ³¨é‡Š
<span class="hljs-bullet">-</span> å¯¼å‡ºçš„ç»„ä»¶æ·»åŠ JSDocæ³¨é‡Š

<span class="hljs-section">## å¤ç”¨ä¼˜å…ˆ</span>
<span class="hljs-bullet">-</span> ä¼˜å…ˆä½¿ç”¨é¡¹ç›®ä¸­å·²æœ‰çš„ç»„ä»¶
<span class="hljs-bullet">-</span> ä¸è¦é‡å¤é€ è½®å­
<span class="hljs-bullet">-</span> ä¿®æ”¹ä»£ç å‰å…ˆç†è§£ç°æœ‰å®ç°

<span class="hljs-section">## é”™è¯¯å¤„ç†</span>
<span class="hljs-bullet">-</span> APIè°ƒç”¨å¿…é¡»æœ‰loadingå’ŒerrorçŠ¶æ€
<span class="hljs-bullet">-</span> ç”¨æˆ·æ“ä½œæä¾›å³æ—¶åé¦ˆ
<span class="hljs-bullet">-</span> å¼‚å¸¸æƒ…å†µæ˜¾ç¤ºå‹å¥½é”™è¯¯ä¿¡æ¯

<span class="hljs-section"># æ€§èƒ½è¦æ±‚</span>
<span class="hljs-bullet">-</span> å›¾ç‰‡ä½¿ç”¨Next.js Imageç»„ä»¶
<span class="hljs-bullet">-</span> å¤§åˆ—è¡¨ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
<span class="hljs-bullet">-</span> é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“
<span class="hljs-bullet">-</span> ä½¿ç”¨React.memoä¼˜åŒ–ç»„ä»¶
</code></pre>
<h3 data-id="heading-12">é…ç½®æ•ˆæœå¯¹æ¯”</h3>
<p><strong>åœºæ™¯</strong>: è®©AIç”Ÿæˆä¸€ä¸ªç”¨æˆ·åˆ—è¡¨é¡µé¢</p>
<p><strong>æ²¡æœ‰Rulesæ—¶</strong>:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// AIè¾“å‡ºï¼ˆéœ€è¦7å¤„ä¿®æ”¹ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserList</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> {
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{padding:</span> '<span class="hljs-attr">20px</span>'}}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç”¨æˆ·åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        {users.map(user =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{user.id}</span>&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
  }
}
</code></pre>
<p><strong>æ‰‹åŠ¨ä¿®æ”¹é¡¹</strong>:</p>
<ol>
<li>âŒ æ”¹æˆå‡½æ•°ç»„ä»¶</li>
<li>âŒ ç§»é™¤å†…è”æ ·å¼</li>
<li>âŒ æ”¹ç”¨TailwindCSS</li>
<li>âŒ æ·»åŠ ç±»å‹å®šä¹‰</li>
<li>âŒ æ·»åŠ æ³¨é‡Š</li>
<li>âŒ ä½¿ç”¨Shadcn/UIç»„ä»¶</li>
<li>âŒ æ·»åŠ loadingçŠ¶æ€</li>
</ol>
<p><strong>è€—æ—¶</strong>: 15åˆ†é’Ÿ</p>
<hr/>
<p><strong>æœ‰Ruleså</strong>:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">/**
 * ç”¨æˆ·åˆ—è¡¨é¡µé¢
 * æ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ï¼Œæ”¯æŒæœç´¢å’Œåˆ†é¡µ
 */</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">role</span>: <span class="hljs-built_in">string</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">UserList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [users, setUsers] = useState&lt;<span class="hljs-title class_">User</span>[]&gt;([])
  <span class="hljs-keyword">const</span> [isLoading, setIsLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>)
  <span class="hljs-keyword">const</span> [error, setError] = useState&lt;<span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">fetchUsers</span>()
  }, [])

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchUsers</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/users'</span>)
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>()
      <span class="hljs-title function_">setUsers</span>(data)
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-title function_">setError</span>(<span class="hljs-string">'è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥'</span>)
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>)
    }
  }

  <span class="hljs-keyword">if</span> (isLoading) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Spinner</span> /&gt;</span></span>
  <span class="hljs-keyword">if</span> (error) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorMessage</span> <span class="hljs-attr">message</span>=<span class="hljs-string">{error}</span> /&gt;</span></span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"max-w-7xl mx-auto p-6"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-slate-100 text-2xl font-bold mb-6"</span>&gt;</span>
        ç”¨æˆ·åˆ—è¡¨
      <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"grid gap-4"</span>&gt;</span>
        {users.map((user) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">Card</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{user.id}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"p-6 bg-slate-900"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-slate-100 font-semibold"</span>&gt;</span>
              {user.name}
            <span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-slate-400"</span>&gt;</span>{user.email}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Badge</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"secondary"</span>&gt;</span>{user.role}<span class="hljs-tag">&lt;/<span class="hljs-name">Badge</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">Card</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<p><strong>é¢„æœŸç»“æœ</strong>:</p>
<ul>
<li>âœ… å‡½æ•°ç»„ä»¶ + Hooks</li>
<li>âœ… TypeScriptç±»å‹å®šä¹‰</li>
<li>âœ… TailwindCSSæ ·å¼</li>
<li>âœ… Shadcn/UIç»„ä»¶ï¼ˆCardã€Badgeï¼‰</li>
<li>âœ… Loadingå’ŒErrorçŠ¶æ€</li>
<li>âœ… JSDocæ³¨é‡Š</li>
<li>âœ… ç¬¦åˆå‘½åè§„èŒƒ</li>
</ul>
<p><strong>ä¿®æ”¹æ¬¡æ•°</strong>: 0æ¬¡
<strong>èŠ‚çœæ—¶é—´</strong>: 15åˆ†é’Ÿ</p>
<hr/>
<h3 data-id="heading-13">è¿›é˜¶é…ç½®ï¼šåˆ†åœºæ™¯å®šåˆ¶</h3>
<p>æ ¹æ®ä¸åŒå¼€å‘åœºæ™¯ï¼Œå¯ä»¥æ·»åŠ ç‰¹å®šè§„åˆ™ï¼š</p>
<p><strong>å¼€å‘ç¯å¢ƒè§„åˆ™</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># å¼€å‘æ¨¡å¼è§„åˆ™</span>
<span class="hljs-bullet">-</span> å…è®¸ä½¿ç”¨console.logè°ƒè¯•
<span class="hljs-bullet">-</span> å¯ä»¥æš‚æ—¶ä½¿ç”¨anyç±»å‹
<span class="hljs-bullet">-</span> ä»£ç æ³¨é‡Šå¯ä»¥æ›´è¯¦ç»†
</code></pre>
<p><strong>ç”Ÿäº§ç¯å¢ƒè§„åˆ™</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># ç”Ÿäº§æ¨¡å¼è§„åˆ™</span>
<span class="hljs-bullet">-</span> ç¦æ­¢console.logï¼Œä½¿ç”¨logger
<span class="hljs-bullet">-</span> ä¸¥æ ¼ç¦æ­¢anyç±»å‹
<span class="hljs-bullet">-</span> å¿…é¡»å¤„ç†æ‰€æœ‰è¾¹ç•Œæƒ…å†µ
<span class="hljs-bullet">-</span> æ€§èƒ½ä¼˜åŒ–ä¼˜å…ˆ
</code></pre>
<p><strong>é‡æ„åœºæ™¯è§„åˆ™</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># é‡æ„æ¨¡å¼è§„åˆ™</span>
<span class="hljs-bullet">-</span> ä¸æ”¹å˜ç°æœ‰åŠŸèƒ½
<span class="hljs-bullet">-</span> ä¿æŒAPIå…¼å®¹æ€§
<span class="hljs-bullet">-</span> æ·»åŠ è¶³å¤Ÿçš„æµ‹è¯•
<span class="hljs-bullet">-</span> é€æ­¥è¿ç§»ï¼Œä¸è¦ä¸€æ¬¡æ€§å¤§æ”¹
</code></pre>

**æœ€ä½³å®è·µ**: å°†é¡¹ç›®çº§Rulesæäº¤åˆ°Gitï¼Œç¡®ä¿å›¢é˜Ÿæˆå‘˜è‡ªåŠ¨åŒæ­¥ã€‚ä¸ªäººåå¥½ï¼ˆå¦‚æ³¨é‡Šè¯¦ç»†ç¨‹åº¦ï¼‰æ”¾åœ¨ç”¨æˆ·çº§é…ç½®ã€‚

<hr/>
<h2 data-id="heading-14">Contextå®æˆ˜ï¼šè®©AIç†è§£é¡¹ç›®</h2>
<h3 data-id="heading-15">å››ç§Contextç±»å‹å¯¹æ¯”</h3>








































<table><thead><tr><th align="left">Context</th><th align="left">ä½œç”¨</th><th align="left">ä½¿ç”¨åœºæ™¯</th><th align="center">å“åº”é€Ÿåº¦</th><th align="left">ç¤ºä¾‹</th></tr></thead><tbody><tr><td align="left">@Codebase</td><td align="left">å…¨å±€ä»£ç æœç´¢</td><td align="left">ç†è§£æ¶æ„ã€æŸ¥æ‰¾å®ç°</td><td align="center">æ…¢</td><td align="left">@Codebase æƒé™ç³»ç»Ÿæ€ä¹ˆå®ç°</td></tr><tr><td align="left">@Docs</td><td align="left">å…³è”é¡¹ç›®æ–‡æ¡£</td><td align="left">å‚è€ƒè§„èŒƒå’Œæ–‡æ¡£</td><td align="center">å¿«</td><td align="left">@Docs æŸ¥çœ‹APIè®¾è®¡è§„èŒƒ</td></tr><tr><td align="left">@Web</td><td align="left">å®æ—¶ç½‘ç»œä¿¡æ¯</td><td align="left">æŸ¥è¯¢æœ€æ–°æŠ€æœ¯</td><td align="center">ä¸­</td><td align="left">@Web Next.js 14æ–°ç‰¹æ€§</td></tr><tr><td align="left">@Git</td><td align="left">ç‰ˆæœ¬å†å²ä¸Šä¸‹æ–‡</td><td align="left">ç†è§£ä»£ç æ¼”è¿›</td><td align="center">ä¸­</td><td align="left">æŸ¥çœ‹è¿™ä¸ªå‡½æ•°çš„ä¿®æ”¹å†å²</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-16">@Docsé…ç½®æ–¹æ¡ˆ</h3>
<p><strong>ç›®å½•ç»“æ„</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">.cursor/
â””â”€â”€ docs/
    â”œâ”€â”€ architecture.md      <span class="hljs-comment"># æ¶æ„æ–‡æ¡£</span>
    â”œâ”€â”€ api-conventions.md   <span class="hljs-comment"># APIè§„èŒƒ</span>
    â”œâ”€â”€ coding-style.md      <span class="hljs-comment"># ä»£ç çº¦å®š</span>
    â”œâ”€â”€ component-library.md <span class="hljs-comment"># ç»„ä»¶åº“è¯´æ˜</span>
    â””â”€â”€ business-rules.md    <span class="hljs-comment"># ä¸šåŠ¡è§„åˆ™</span>
</code></pre>
<p><strong>ç¤ºä¾‹ï¼šAPIè§„èŒƒæ–‡æ¡£</strong></p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># APIè®¾è®¡è§„èŒƒ</span>

<span class="hljs-section">## ç»Ÿä¸€å“åº”æ ¼å¼</span>

æ‰€æœ‰APIæ¥å£å¿…é¡»è¿”å›ä»¥ä¸‹æ ¼å¼ï¼š

<span class="hljs-code">```typescript
interface APIResponse&lt;T&gt; {
  code: number      // çŠ¶æ€ç ï¼š0æˆåŠŸï¼Œå…¶ä»–å¤±è´¥
  message: string   // æç¤ºä¿¡æ¯
  data: T          // å®é™…æ•°æ®
  timestamp: number // æ—¶é—´æˆ³
}
</span></code></pre>
<h2 data-id="heading-17">é”™è¯¯ç å®šä¹‰</h2>






























<table><thead><tr><th align="left">é”™è¯¯ç </th><th align="left">è¯´æ˜</th><th align="left">å¤„ç†æ–¹å¼</th></tr></thead><tbody><tr><td align="left">1001</td><td align="left">å‚æ•°é”™è¯¯</td><td align="left">æ£€æŸ¥è¯·æ±‚å‚æ•°</td></tr><tr><td align="left">2001</td><td align="left">æœªæˆæƒ</td><td align="left">è·³è½¬ç™»å½•é¡µ</td></tr><tr><td align="left">2002</td><td align="left">æƒé™ä¸è¶³</td><td align="left">æç¤ºæ— æƒé™</td></tr><tr><td align="left">5001</td><td align="left">æœåŠ¡å™¨é”™è¯¯</td><td align="left">ç¨åé‡è¯•</td></tr></tbody></table>
<h2 data-id="heading-18">å‘½åè§„èŒƒ</h2>
<ul>
<li>GET: /api/resources - è·å–åˆ—è¡¨</li>
<li>GET: /api/resources/:id - è·å–è¯¦æƒ…</li>
<li>POST: /api/resources - åˆ›å»ºèµ„æº</li>
<li>PUT: /api/resources/:id - æ›´æ–°èµ„æº</li>
<li>DELETE: /api/resources/:id - åˆ é™¤èµ„æº</li>
</ul>
<pre><code class="hljs language-php" lang="php">
**é¢„æœŸæ•ˆæœ**: AIç”Ÿæˆçš„APIä»£ç è‡ªåŠ¨ç¬¦åˆè¿™ä¸ªæ ¼å¼ï¼š

```typescript
<span class="hljs-comment">// AIè‡ªåŠ¨ç”Ÿæˆç¬¦åˆè§„èŒƒçš„ä»£ç </span>
export async <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">GET</span>(<span class="hljs-params"/>) </span>{
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">users</span> = await db.user.<span class="hljs-title function_ invoke__">findMany</span>()

    <span class="hljs-keyword">return</span> NextResponse.<span class="hljs-title function_ invoke__">json</span>({
      <span class="hljs-attr">code</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'success'</span>,
      <span class="hljs-attr">data</span>: users,
      <span class="hljs-attr">timestamp</span>: Date.<span class="hljs-title function_ invoke__">now</span>()
    })
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">return</span> NextResponse.<span class="hljs-title function_ invoke__">json</span>({
      <span class="hljs-attr">code</span>: <span class="hljs-number">5001</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'æœåŠ¡å™¨é”™è¯¯'</span>,
      <span class="hljs-attr">data</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">timestamp</span>: Date.<span class="hljs-title function_ invoke__">now</span>()
    }, { <span class="hljs-attr">status</span>: <span class="hljs-number">500</span> })
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-19">Contextç»„åˆä½¿ç”¨æŠ€å·§</h3>
<p><strong>åœºæ™¯</strong>: æ·»åŠ JWT tokenåˆ·æ–°åŠŸèƒ½</p>
<p><strong>âŒ ç³Ÿç³•çš„Prompt</strong>:</p>
<pre><code class="hljs">å¸®æˆ‘æ·»åŠ JWT tokenåˆ·æ–°åŠŸèƒ½
</code></pre>
<p><strong>ç»“æœ</strong>: AIä¸äº†è§£ç°æœ‰è®¤è¯å®ç°ï¼Œå¯èƒ½ç”Ÿæˆä¸é¡¹ç›®æ¶æ„ä¸åŒ¹é…çš„ä»£ç ã€‚</p>
<hr/>
<p><strong>âœ… ä¼˜ç§€çš„Prompt</strong>:</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Codebase</span> æŸ¥çœ‹ç°æœ‰çš„ç”¨æˆ·è®¤è¯å®ç°
<span class="hljs-variable">@Docs</span> å‚è€ƒAPIè§„èŒƒæ–‡æ¡£
<span class="hljs-variable">@Web</span> <span class="hljs-attribute">https</span>:<span class="hljs-comment">//jwt.io/introduction</span>

åŸºäºç°æœ‰çš„è®¤è¯æ¶æ„ï¼Œæ·»åŠ JWT tokenè‡ªåŠ¨åˆ·æ–°åŠŸèƒ½ï¼š
<span class="hljs-number">1</span>. æ£€æµ‹tokenå³å°†è¿‡æœŸ
<span class="hljs-number">2</span>. è‡ªåŠ¨è°ƒç”¨åˆ·æ–°æ¥å£
<span class="hljs-number">3</span>. æ›´æ–°æœ¬åœ°å­˜å‚¨
<span class="hljs-number">4</span>. æ— æ„ŸçŸ¥ç»­æœŸ
</code></pre>
<p><strong>é¢„æœŸæ•ˆæœ</strong>:</p>
<ul>
<li>âœ… å¤ç”¨ç°æœ‰è®¤è¯ä»£ç ç»“æ„</li>
<li>âœ… éµå®ˆAPIå“åº”æ ¼å¼è§„èŒƒ</li>
<li>âœ… ä½¿ç”¨æœ€æ–°çš„JWTæœ€ä½³å®è·µ</li>
<li>âœ… ä¸ç°æœ‰ä¸­é—´ä»¶æ— ç¼é›†æˆ</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5218bc05f394e02b2df34f38986cae3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768225987&amp;x-signature=VTxcunRE%2BntE9rJl%2BCQJuN0H%2BnI%3D" alt="cursor04-Contextä½¿ç”¨æµç¨‹å›¾.png" loading="lazy"/></p>

**æ€§èƒ½ä¼˜åŒ–æç¤º**: ä¼˜å…ˆä½¿ç”¨`@Docs`å’Œç²¾å‡†çš„`@file`å¼•ç”¨ï¼Œé¿å…é¢‘ç¹ä½¿ç”¨`@Codebase`å…¨é‡æœç´¢ï¼Œå¯ä»¥æ˜¾è‘—æå‡å“åº”é€Ÿåº¦ã€‚

<hr/>
<h2 data-id="heading-20">Hookså®æˆ˜ï¼šè‡ªåŠ¨åŒ–è´¨é‡å®ˆæŠ¤</h2>
<h3 data-id="heading-21">Hooksé…ç½®åŸºç¡€</h3>
<p><strong>æ–‡ä»¶ä½ç½®</strong>: <code>.cursor/hooks.json</code></p>
<p><strong>åŸºæœ¬ç»“æ„</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"hooks"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"beforeSubmitPrompt"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span> <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./.cursor/scripts/check-prompt.sh"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"afterFileEdit"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span> <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./.cursor/scripts/format-code.sh"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"stop"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span> <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./.cursor/scripts/review-changes.sh"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>é…ç½®çº§åˆ«ï¼ˆä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼‰</strong>:</p>
<ol>
<li>ä¼ä¸šçº§ï¼šä¼ä¸šç»Ÿä¸€é…ç½®</li>
<li>é¡¹ç›®çº§ï¼š<code>.cursor/hooks.json</code>ï¼ˆå›¢é˜Ÿå…±äº«ï¼‰</li>
<li>ç”¨æˆ·çº§ï¼š<code>~/.cursor/hooks.json</code>ï¼ˆä¸ªäººé…ç½®ï¼‰</li>
</ol>
<hr/>
<h3 data-id="heading-22">æ ¸å¿ƒHooksç±»å‹å’Œåº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-23">1. beforeSubmitPrompt - å‘é€å‰å®‰å…¨æ£€æŸ¥</h4>
<p><strong>åœºæ™¯</strong>: é˜²æ­¢æ•æ„Ÿä¿¡æ¯æ³„éœ²</p>
<p><strong>é…ç½®è„šæœ¬</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># è¯»å–ç”¨æˆ·è¾“å…¥çš„prompt</span>
json_input=$(<span class="hljs-built_in">cat</span>)
prompt=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$json_input</span>"</span> | jq -r <span class="hljs-string">'.prompt'</span>)

<span class="hljs-comment"># æ£€æŸ¥æ•æ„Ÿä¿¡æ¯æ¨¡å¼</span>
sensitive_patterns=(
  <span class="hljs-string">"password"</span>
  <span class="hljs-string">"secret"</span>
  <span class="hljs-string">"token"</span>
  <span class="hljs-string">"api[_-]?key"</span>
  <span class="hljs-string">"private[_-]?key"</span>
)

<span class="hljs-comment"># éå†æ£€æŸ¥</span>
<span class="hljs-keyword">for</span> pattern <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${sensitive_patterns[@]}</span>"</span>; <span class="hljs-keyword">do</span>
  <span class="hljs-keyword">if</span> <span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$prompt</span>"</span> | grep -iE <span class="hljs-string">"<span class="hljs-variable">$pattern</span>"</span> &gt; /dev/null; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âš ï¸ æ£€æµ‹åˆ°å¯èƒ½çš„æ•æ„Ÿä¿¡æ¯: <span class="hljs-variable">$pattern</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è¯·ç§»é™¤åå†å‘é€ï¼Œæˆ–ç¡®è®¤è¿™æ˜¯ç¤ºä¾‹æ•°æ®"</span>
    <span class="hljs-built_in">exit</span> 1
  <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># é€šè¿‡æ£€æŸ¥</span>
<span class="hljs-built_in">exit</span> 0
</code></pre>
<p><strong>é¢„æœŸæ•ˆæœ</strong>:</p>
<pre><code class="hljs language-arduino" lang="arduino">ç”¨æˆ·è¾“å…¥: <span class="hljs-string">"å¸®æˆ‘æŠŠå¯†ç password123å†™å…¥é…ç½®"</span>
    â†“
Hookæ‹¦æˆª
    â†“
æ˜¾ç¤ºè­¦å‘Š: <span class="hljs-string">"æ£€æµ‹åˆ°å¯èƒ½çš„æ•æ„Ÿä¿¡æ¯: password"</span>
    â†“
é˜»æ­¢å‘é€ï¼Œè¦æ±‚ç”¨æˆ·ä¿®æ”¹
</code></pre>
<hr/>
<h4 data-id="heading-24">2. afterFileEdit - æ–‡ä»¶ä¿®æ”¹åè‡ªåŠ¨æ ¼å¼åŒ–</h4>
<p><strong>åœºæ™¯</strong>: ç¡®ä¿ä»£ç ç¬¦åˆæ ¼å¼è§„èŒƒ</p>
<p><strong>é…ç½®è„šæœ¬</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># è§£æä¿®æ”¹çš„æ–‡ä»¶ä¿¡æ¯</span>
json_input=$(<span class="hljs-built_in">cat</span>)
file_path=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$json_input</span>"</span> | jq -r <span class="hljs-string">'.file'</span>)

<span class="hljs-comment"># TypeScript/JavaScriptæ–‡ä»¶å¤„ç†</span>
<span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$file_path</span> =~ \.(ts|tsx|js|jsx)$ ]]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ”§ æ­£åœ¨æ ¼å¼åŒ–: <span class="hljs-variable">$file_path</span>"</span>

  <span class="hljs-comment"># Prettieræ ¼å¼åŒ–</span>
  npx prettier --write <span class="hljs-string">"<span class="hljs-variable">$file_path</span>"</span> 2&gt;/dev/null

  <span class="hljs-comment"># ESLintä¿®å¤</span>
  npx eslint --fix <span class="hljs-string">"<span class="hljs-variable">$file_path</span>"</span> 2&gt;/dev/null

  <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… æ ¼å¼åŒ–å®Œæˆ"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># JSONæ–‡ä»¶å¤„ç†</span>
<span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$file_path</span> =~ \.json$ ]]; <span class="hljs-keyword">then</span>
  <span class="hljs-comment"># æ ¼å¼åŒ–JSON</span>
  jq <span class="hljs-string">'.'</span> <span class="hljs-string">"<span class="hljs-variable">$file_path</span>"</span> &gt; <span class="hljs-string">"<span class="hljs-variable">$file_path</span>.tmp"</span> &amp;&amp; <span class="hljs-built_in">mv</span> <span class="hljs-string">"<span class="hljs-variable">$file_path</span>.tmp"</span> <span class="hljs-string">"<span class="hljs-variable">$file_path</span>"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">exit</span> 0
</code></pre>
<p><strong>é¢„æœŸæ•ˆæœ</strong>:</p>
<pre><code class="hljs language-css" lang="css">AIä¿®æ”¹äº† <span class="hljs-attribute">src</span>/components/<span class="hljs-selector-tag">Button</span><span class="hljs-selector-class">.tsx</span>
    â†“
Hookè‡ªåŠ¨è§¦å‘
    â†“
æ‰§è¡Œ: prettier --write Button.tsx
æ‰§è¡Œ: eslint --fix Button.tsx
    â†“
ä»£ç è‡ªåŠ¨ç¬¦åˆå›¢é˜Ÿè§„èŒƒ
    â†“
æ˜¾ç¤º: <span class="hljs-string">"âœ… æ ¼å¼åŒ–å®Œæˆ"</span>
</code></pre>
<hr/>
<h4 data-id="heading-25">3. stop - Agentå®Œæˆåç”Ÿæˆæ‘˜è¦</h4>
<p><strong>åœºæ™¯</strong>: ä»»åŠ¡å®Œæˆåçš„å˜æ›´æ‘˜è¦å’Œå»ºè®®</p>
<p><strong>é…ç½®è„šæœ¬</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ“Š ç”Ÿæˆå˜æ›´æ‘˜è¦..."</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>

<span class="hljs-comment"># ç»Ÿè®¡ä¿®æ”¹æ–‡ä»¶</span>
files_changed=$(git diff --name-only | <span class="hljs-built_in">wc</span> -l)
lines_added=$(git diff --<span class="hljs-built_in">stat</span> | <span class="hljs-built_in">tail</span> -1 | grep -oE <span class="hljs-string">'[0-9]+ insertion'</span> | awk <span class="hljs-string">'{print $1}'</span>)
lines_deleted=$(git diff --<span class="hljs-built_in">stat</span> | <span class="hljs-built_in">tail</span> -1 | grep -oE <span class="hljs-string">'[0-9]+ deletion'</span> | awk <span class="hljs-string">'{print $1}'</span>)

<span class="hljs-comment"># æ˜¾ç¤ºæ‘˜è¦</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ“ ä¿®æ”¹ç»Ÿè®¡:"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"  â€¢ ä¿®æ”¹æ–‡ä»¶: <span class="hljs-variable">$files_changed</span> ä¸ª"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"  â€¢ æ–°å¢ä»£ç : <span class="hljs-variable">$lines_added</span> è¡Œ"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"  â€¢ åˆ é™¤ä»£ç : <span class="hljs-variable">$lines_deleted</span> è¡Œ"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>

<span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æœ‰æµ‹è¯•æ–‡ä»¶ä¿®æ”¹</span>
test_files=$(git diff --name-only | grep -E <span class="hljs-string">'\.test\.(ts|tsx|js|jsx)$'</span> | <span class="hljs-built_in">wc</span> -l)

<span class="hljs-keyword">if</span> [ <span class="hljs-variable">$test_files</span> -eq 0 ] &amp;&amp; [ <span class="hljs-variable">$files_changed</span> -gt 0 ]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"âš ï¸ å»ºè®®: ä»£ç å·²ä¿®æ”¹ä½†æœªæ›´æ–°æµ‹è¯•æ–‡ä»¶"</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">""</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æä¾›åç»­å»ºè®®</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ’¡ åç»­å»ºè®®:"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"  1. è¿è¡Œæµ‹è¯•: npm test"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"  2. æœ¬åœ°éªŒè¯åŠŸèƒ½"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"  3. æäº¤ä»£ç : git add . &amp;&amp; git commit"</span>

<span class="hljs-built_in">exit</span> 0
</code></pre>
<p><strong>é¢„æœŸæ•ˆæœ</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown">Agentå®Œæˆä»»åŠ¡
<span class="hljs-code">    â†“
Hookè‡ªåŠ¨æ‰§è¡Œ
    â†“
æ˜¾ç¤ºæ‘˜è¦:
  ğŸ“Š ç”Ÿæˆå˜æ›´æ‘˜è¦...
</span>
  ğŸ“ ä¿®æ”¹ç»Ÿè®¡:
<span class="hljs-code">    â€¢ ä¿®æ”¹æ–‡ä»¶: 3 ä¸ª
    â€¢ æ–°å¢ä»£ç : 127 è¡Œ
    â€¢ åˆ é™¤ä»£ç : 45 è¡Œ
</span>
  âš ï¸ å»ºè®®: ä»£ç å·²ä¿®æ”¹ä½†æœªæ›´æ–°æµ‹è¯•æ–‡ä»¶

  ğŸ’¡ åç»­å»ºè®®:
<span class="hljs-bullet">    1.</span> è¿è¡Œæµ‹è¯•: npm test
<span class="hljs-bullet">    2.</span> æœ¬åœ°éªŒè¯åŠŸèƒ½
<span class="hljs-bullet">    3.</span> æäº¤ä»£ç : git add . &amp;&amp; git commit
</code></pre>
<hr/>
<h3 data-id="heading-26">é«˜çº§Hooksåœºæ™¯</h3>
<h4 data-id="heading-27">åœºæ™¯1ï¼šæƒé™æ§åˆ¶ - é˜»æ­¢å±é™©å‘½ä»¤</h4>
<p><strong>éœ€æ±‚</strong>: é˜²æ­¢AIæ‰§è¡Œå¯èƒ½ç ´åç³»ç»Ÿçš„å‘½ä»¤</p>
<p><strong>é…ç½®</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

json_input=$(<span class="hljs-built_in">cat</span>)
<span class="hljs-built_in">command</span>=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$json_input</span>"</span> | jq -r <span class="hljs-string">'.command'</span>)

<span class="hljs-comment"># å±é™©å‘½ä»¤é»‘åå•</span>
dangerous_commands=(
  <span class="hljs-string">"rm -rf /"</span>
  <span class="hljs-string">"rm -rf *"</span>
  <span class="hljs-string">"dd if=/dev/zero"</span>
  <span class="hljs-string">"mkfs"</span>
  <span class="hljs-string">"&gt; /dev/sda"</span>
  <span class="hljs-string">"chmod -R 777 /"</span>
)

<span class="hljs-comment"># æ£€æŸ¥å‘½ä»¤</span>
<span class="hljs-keyword">for</span> danger <span class="hljs-keyword">in</span> <span class="hljs-string">"<span class="hljs-variable">${dangerous_commands[@]}</span>"</span>; <span class="hljs-keyword">do</span>
  <span class="hljs-keyword">if</span> [[ <span class="hljs-string">"<span class="hljs-variable">$command</span>"</span> == *<span class="hljs-string">"<span class="hljs-variable">$danger</span>"</span>* ]]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"{\"decision\": \"deny\", \"message\": \"ğŸš« å±é™©å‘½ä»¤å·²é˜»æ­¢: <span class="hljs-variable">$danger</span>\"}"</span>
    <span class="hljs-built_in">exit</span> 0
  <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">done</span>

<span class="hljs-comment"># å…è®¸æ‰§è¡Œ</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"{\"decision\": \"allow\"}"</span>
<span class="hljs-built_in">exit</span> 0
</code></pre>
<p><strong>é…ç½®åˆ°hooks.json</strong>:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"hooks"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"beforeShellExecution"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span> <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./.cursor/scripts/check-dangerous-commands.sh"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>é¢„æœŸæ•ˆæœ</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">AIå°è¯•æ‰§è¡Œ: <span class="hljs-built_in">rm</span> -rf /tmp/*
    â†“
Hookæ‹¦æˆª
    â†“
è¿”å›: {<span class="hljs-string">"decision"</span>: <span class="hljs-string">"deny"</span>, <span class="hljs-string">"message"</span>: <span class="hljs-string">"ğŸš« å±é™©å‘½ä»¤å·²é˜»æ­¢"</span>}
    â†“
å‘½ä»¤è¢«é˜»æ­¢ï¼Œä¸ä¼šæ‰§è¡Œ
</code></pre>
<hr/>
<h4 data-id="heading-28">åœºæ™¯2ï¼šè‡ªåŠ¨åŒ–æµ‹è¯• - ç»„ä»¶ä¿®æ”¹åè¿è¡Œæµ‹è¯•</h4>
<p><strong>é…ç½®</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

json_input=$(<span class="hljs-built_in">cat</span>)
file_path=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$json_input</span>"</span> | jq -r <span class="hljs-string">'.file'</span>)

<span class="hljs-comment"># å¦‚æœæ˜¯ç»„ä»¶æ–‡ä»¶ï¼Œè¿è¡Œå¯¹åº”æµ‹è¯•</span>
<span class="hljs-keyword">if</span> [[ <span class="hljs-variable">$file_path</span> == src/components/* ]]; <span class="hljs-keyword">then</span>
  <span class="hljs-comment"># æ¨å¯¼æµ‹è¯•æ–‡ä»¶è·¯å¾„</span>
  test_file=<span class="hljs-string">"<span class="hljs-variable">${file_path%.tsx}</span>.test.tsx"</span>

  <span class="hljs-keyword">if</span> [ -f <span class="hljs-string">"<span class="hljs-variable">$test_file</span>"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ§ª è¿è¡Œç›¸å…³æµ‹è¯•: <span class="hljs-variable">$test_file</span>"</span>
    npm <span class="hljs-built_in">test</span> -- <span class="hljs-string">"<span class="hljs-variable">$test_file</span>"</span> --silent

    <span class="hljs-keyword">if</span> [ $? -eq 0 ]; <span class="hljs-keyword">then</span>
      <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… æµ‹è¯•é€šè¿‡"</span>
    <span class="hljs-keyword">else</span>
      <span class="hljs-built_in">echo</span> <span class="hljs-string">"âŒ æµ‹è¯•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ä¿®æ”¹"</span>
      <span class="hljs-built_in">exit</span> 1
    <span class="hljs-keyword">fi</span>
  <span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"âš ï¸ æœªæ‰¾åˆ°æµ‹è¯•æ–‡ä»¶: <span class="hljs-variable">$test_file</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ’¡ å»ºè®®: ä¸ºæ–°ç»„ä»¶æ·»åŠ å•å…ƒæµ‹è¯•"</span>
  <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">exit</span> 0
</code></pre>
<p><strong>é¢„æœŸæ•ˆæœ</strong>:</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">AI</span>ä¿®æ”¹äº† <span class="hljs-selector-tag">src</span>/<span class="hljs-selector-tag">components</span>/<span class="hljs-selector-tag">Button</span><span class="hljs-selector-class">.tsx</span>
    â†“
<span class="hljs-selector-tag">Hook</span>æ£€æµ‹åˆ°ç»„ä»¶ä¿®æ”¹
    â†“
æŸ¥æ‰¾: <span class="hljs-selector-tag">src</span>/<span class="hljs-selector-tag">components</span>/<span class="hljs-selector-tag">Button</span><span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.tsx</span>
    â†“
æ‰§è¡Œ: <span class="hljs-selector-tag">npm</span> <span class="hljs-selector-tag">test</span> <span class="hljs-selector-tag">--</span> <span class="hljs-selector-tag">Button</span><span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.tsx</span>
    â†“
æ˜¾ç¤ºç»“æœ:
  ğŸ§ª è¿è¡Œç›¸å…³æµ‹è¯•: <span class="hljs-selector-tag">Button</span><span class="hljs-selector-class">.test</span><span class="hljs-selector-class">.tsx</span>
  âœ… æµ‹è¯•é€šè¿‡
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3cd6dde5b3da48139541c28f5535cc09~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768225987&amp;x-signature=%2FbEexaD9KOek1aOjLlX9E2xQJTA%3D" alt="cursor04-Hookså·¥ä½œæµç¨‹å›¾.png" loading="lazy"/></p>

**é‡è¦æç¤º**: Hookè„šæœ¬å¿…é¡»æœ‰æ‰§è¡Œæƒé™ã€‚åˆ›å»ºåè¿è¡Œï¼š`chmod +x .cursor/scripts/*.sh`

<hr/>
<h2 data-id="heading-29">å®Œæ•´å·¥ä½œæµé…ç½®æ–¹æ¡ˆ</h2>
<h3 data-id="heading-30">é¡¹ç›®åˆå§‹åŒ–é…ç½®æ¸…å•</h3>
<p><strong>æ­¥éª¤1: åˆ›å»ºç›®å½•ç»“æ„</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºé…ç½®ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p .cursor/docs
<span class="hljs-built_in">mkdir</span> -p .cursor/scripts

<span class="hljs-comment"># åˆ›å»ºé…ç½®æ–‡ä»¶</span>
<span class="hljs-built_in">touch</span> .cursorrules
<span class="hljs-built_in">touch</span> .cursor/hooks.json
</code></pre>
<p><strong>æ­¥éª¤2: æ·»åŠ Rulesé…ç½®</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¼–è¾‘.cursorrulesæ–‡ä»¶</span>
<span class="hljs-comment"># å¡«å…¥é¡¹ç›®è§„èŒƒï¼ˆå‚è€ƒå‰æ–‡æ¨¡æ¿ï¼‰</span>
</code></pre>
<p><strong>æ­¥éª¤3: æ·»åŠ æ–‡æ¡£</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºé¡¹ç›®æ–‡æ¡£</span>
<span class="hljs-built_in">touch</span> .cursor/docs/architecture.md
<span class="hljs-built_in">touch</span> .cursor/docs/api-conventions.md
<span class="hljs-built_in">touch</span> .cursor/docs/coding-style.md
<span class="hljs-built_in">touch</span> .cursor/docs/component-library.md
</code></pre>
<p><strong>æ­¥éª¤4: é…ç½®Hooksè„šæœ¬</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºhookè„šæœ¬</span>
<span class="hljs-built_in">cat</span> &gt; .cursor/scripts/check-prompt.sh &lt;&lt; <span class="hljs-string">'EOF'</span>
<span class="hljs-comment">#!/bin/bash</span>
<span class="hljs-comment"># ... (å‰æ–‡çš„è„šæœ¬å†…å®¹)</span>
EOF

<span class="hljs-comment"># æ·»åŠ æ‰§è¡Œæƒé™</span>
<span class="hljs-built_in">chmod</span> +x .cursor/scripts/*.sh
</code></pre>
<p><strong>æ­¥éª¤5: é…ç½®hooks.json</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"hooks"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"beforeSubmitPrompt"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span> <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./.cursor/scripts/check-prompt.sh"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"afterFileEdit"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span> <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./.cursor/scripts/format-code.sh"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"stop"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span> <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./.cursor/scripts/review-changes.sh"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ­¥éª¤6: æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ·»åŠ åˆ°Git</span>
git add .cursorrules .cursor/
git commit -m <span class="hljs-string">"feat: é…ç½®Cursorå·¥ä½œæµè‡ªåŠ¨åŒ–"</span>

<span class="hljs-comment"># æ¨é€åˆ°è¿œç¨‹</span>
git push origin main
</code></pre>
<p><strong>å®Œæ•´ç›®å½•ç»“æ„</strong>:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d87753915b34a0ba4b7d6e6172eb3ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768225987&amp;x-signature=I5yu6ynEBhmJD%2BZzXi4fWienVBg%3D" alt="cursor04-é¡¹ç›®ç›®å½•ç»“æ„å›¾.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-31">å›¢é˜Ÿåä½œé…ç½®ç­–ç•¥</h3>
<p><strong>ä¸ªäººé…ç½® vs é¡¹ç›®é…ç½®</strong>:</p>


























<table><thead><tr><th align="left">é…ç½®ç±»å‹</th><th align="left">ä½ç½®</th><th align="left">ä½œç”¨åŸŸ</th><th align="center">ç‰ˆæœ¬æ§åˆ¶</th><th align="left">é€‚ç”¨å†…å®¹</th></tr></thead><tbody><tr><td align="left"><strong>é¡¹ç›®é…ç½®</strong></td><td align="left"><code>.cursorrules</code><br/><code>.cursor/</code></td><td align="left">æ•´ä¸ªå›¢é˜Ÿ</td><td align="center">âœ… æäº¤åˆ°Git</td><td align="left">æŠ€æœ¯æ ˆã€ä»£ç è§„èŒƒã€<br/>APIè®¾è®¡ã€å®‰å…¨è§„åˆ™</td></tr><tr><td align="left"><strong>ä¸ªäººé…ç½®</strong></td><td align="left"><code>~/.cursor/rules</code><br/><code>~/.cursor/hooks.json</code></td><td align="left">ä»…è‡ªå·±</td><td align="center">âŒ ä¸æäº¤</td><td align="left">æ³¨é‡Šé£æ ¼ã€ä¸ªäººåå¥½ã€<br/>å¿«æ·æ–¹å¼</td></tr></tbody></table>
<p><strong>æœ€ä½³å®è·µ</strong>:</p>
<p><strong>é¡¹ç›®é…ç½®ï¼ˆå¼ºåˆ¶ï¼Œå›¢é˜Ÿå…±äº«ï¼‰</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># .cursorrules</span>

<span class="hljs-section"># æŠ€æœ¯æ ˆè§„èŒƒï¼ˆä¸å¯æ›´æ”¹ï¼‰</span>
<span class="hljs-bullet">-</span> æ¡†æ¶: Next.js 14
<span class="hljs-bullet">-</span> è¯­è¨€: TypeScript
<span class="hljs-bullet">-</span> UIåº“: Shadcn/UI

<span class="hljs-section"># APIè®¾è®¡è§„èŒƒï¼ˆå¼ºåˆ¶éµå®ˆï¼‰</span>
<span class="hljs-bullet">-</span> ç»Ÿä¸€å“åº”æ ¼å¼
<span class="hljs-bullet">-</span> é”™è¯¯ç å®šä¹‰
<span class="hljs-bullet">-</span> å‘½åçº¦å®š

<span class="hljs-section"># å®‰å…¨è¦æ±‚ï¼ˆå¿…é¡»æ»¡è¶³ï¼‰</span>
<span class="hljs-bullet">-</span> ç¦æ­¢ç¡¬ç¼–ç å¯†é’¥
<span class="hljs-bullet">-</span> SQLæ³¨å…¥é˜²æŠ¤
<span class="hljs-bullet">-</span> XSSé˜²æŠ¤
</code></pre>
<p><strong>ä¸ªäººé…ç½®ï¼ˆå¯é€‰ï¼Œä¸ªäººåå¥½ï¼‰</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># ~/.cursor/rules</span>

<span class="hljs-section"># ä¸ªäººä»£ç é£æ ¼</span>
<span class="hljs-bullet">-</span> æ³¨é‡Šè¯¦ç»†ç¨‹åº¦: è¯¦ç»†ï¼ˆæˆ‘å–œæ¬¢æ›´å¤šæ³¨é‡Šï¼‰
<span class="hljs-bullet">-</span> å˜é‡å‘½å: æè¿°æ€§å¼ºï¼ˆæˆ‘å–œæ¬¢é•¿å˜é‡åï¼‰
<span class="hljs-bullet">-</span> ä»£ç ç»„ç»‡: æŒ‰åŠŸèƒ½åˆ†ç»„ï¼ˆæˆ‘çš„ä¹ æƒ¯ï¼‰
</code></pre>
<p><strong>é¢„æœŸæ•ˆæœ</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">æ–°æˆå‘˜åŠ å…¥å›¢é˜Ÿï¼š
  â†“
git <span class="hljs-built_in">clone</span>é¡¹ç›®
  â†“
Cursorè‡ªåŠ¨åŠ è½½.cursorruleså’Œhooks.json
  â†“
AIè¾“å‡ºè‡ªåŠ¨ç¬¦åˆå›¢é˜Ÿè§„èŒƒ
  â†“
æ— éœ€æ‰‹åŠ¨é…ç½®ï¼Œç«‹å³ä¸Šæ‰‹
</code></pre>

**å›¢é˜Ÿåä½œå»ºè®®**: åœ¨é¡¹ç›®READMEä¸­æ·»åŠ Cursoré…ç½®è¯´æ˜ï¼Œå¸®åŠ©æ–°æˆå‘˜å¿«é€Ÿç†è§£å·¥ä½œæµé…ç½®ã€‚

<hr/>
<h2 data-id="heading-32">æ•ˆç‡å¯¹æ¯”ä¸æ”¶ç›Šåˆ†æ</h2>
<h3 data-id="heading-33">æ•°æ®å¯¹æ¯”</h3>
<p><strong>é…ç½®å‰ vs é…ç½®åçš„çœŸå®æ•°æ®</strong>:</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1d5c87f82b942208291084039e747a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yas5aWHTGFi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768225987&amp;x-signature=rtaHFLLKmkH6r5AVgUOFq1vJW4g%3D" alt="cursor04-æ•ˆç‡æå‡å¯¹æ¯”å›¾.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-34">é¿å‘æŒ‡å—</h2>
<h3 data-id="heading-35">å‘1: Rulesè¿‡é•¿å¯¼è‡´AIè®°ä¸ä½</h3>
<p><strong>âŒ é—®é¢˜</strong>: <code>.cursorrules</code>æ–‡ä»¶è¶…è¿‡2000å­—ï¼ŒAIä¼šå¿½ç•¥éƒ¨åˆ†å†…å®¹</p>
<p><strong>åŸå› </strong>: AIä¸Šä¸‹æ–‡çª—å£é™åˆ¶ï¼Œè¿‡é•¿çš„è§„åˆ™ä¼šè¢«æˆªæ–­</p>
<p><strong>âœ… è§£å†³</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># ç²¾ç®€Rules - åªä¿ç•™æ ¸å¿ƒè§„èŒƒ</span>

<span class="hljs-section">## å¿…é¡»éµå®ˆï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰</span>
<span class="hljs-bullet">-</span> æŠ€æœ¯æ ˆ: Next.js 14 + TypeScript
<span class="hljs-bullet">-</span> å“åº”æ ¼å¼: {code, message, data}
<span class="hljs-bullet">-</span> å‘½å: kebab-caseæ–‡ä»¶, PascalCaseç»„ä»¶

<span class="hljs-section">## å»ºè®®éµå®ˆï¼ˆä¸­ä¼˜å…ˆçº§ï¼‰</span>
<span class="hljs-bullet">-</span> é…è‰²: slateç³»
<span class="hljs-bullet">-</span> åœ†è§’: rounded-xl

<span class="hljs-section">## è¯¦ç»†è§„èŒƒè¯·å‚è€ƒ</span>
@Docs æŸ¥çœ‹.cursor/docs/ä¸­çš„è¯¦ç»†æ–‡æ¡£
</code></pre>
<p><strong>æœ€ä½³å®è·µ</strong>: Rulesæ§åˆ¶åœ¨500-1000å­—ï¼Œè¯¦ç»†å†…å®¹æ”¾åˆ°<code>@Docs</code>æ–‡æ¡£ä¸­ã€‚</p>
<hr/>
<h3 data-id="heading-36">å‘2: Hookè„šæœ¬è·¯å¾„é”™è¯¯</h3>
<p><strong>âŒ é—®é¢˜</strong>: ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œå›¢é˜Ÿæˆå‘˜è·¯å¾„ä¸ä¸€è‡´</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"hooks"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"afterFileEdit"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span> <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/Users/yourname/.cursor/scripts/format.sh"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>âœ… è§£å†³</strong>: ä½¿ç”¨ç›¸å¯¹äº<code>hooks.json</code>çš„ç›¸å¯¹è·¯å¾„</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"hooks"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"afterFileEdit"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span> <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./.cursor/scripts/format-code.sh"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h3 data-id="heading-37">å‘3: Contextæ»¥ç”¨å¯¼è‡´å“åº”æ…¢</h3>
<p><strong>âŒ é—®é¢˜</strong>: æ¯æ¬¡éƒ½ç”¨<code>@Codebase</code>å…¨é‡æœç´¢</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Codebase</span> è¿™ä¸ªé¡¹ç›®çš„æ¶æ„æ˜¯ä»€ä¹ˆï¼Ÿ
<span class="hljs-variable">@Codebase</span> æŒ‰é’®ç»„ä»¶åœ¨å“ªé‡Œï¼Ÿ
<span class="hljs-variable">@Codebase</span> æƒé™æ£€æŸ¥æ€ä¹ˆåšçš„ï¼Ÿ
</code></pre>
<p><strong>ç»“æœ</strong>: æ¯æ¬¡æœç´¢è€—æ—¶10-30ç§’ï¼Œä½“éªŒå·®</p>
<p><strong>âœ… è§£å†³</strong>: åˆ†å±‚ä½¿ç”¨Context</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># ç†è§£æ•´ä½“æ¶æ„ï¼ˆå¶å°”ä½¿ç”¨ï¼‰</span>
@Codebase é¡¹ç›®æ•´ä½“æ¶æ„

<span class="hljs-section"># ç²¾å‡†å¼•ç”¨ï¼ˆå¸¸ç”¨ï¼‰</span>
@file src/components/Button.tsx
@folder src/components/

<span class="hljs-section"># æŸ¥çœ‹æ–‡æ¡£ï¼ˆæœ€å¿«ï¼‰</span>
@Docs architecture.md
</code></pre>
<p><strong>æ€§èƒ½å¯¹æ¯”</strong>:</p>
<ul>
<li><code>@Docs</code>: ~1ç§’</li>
<li><code>@file</code>: ~2ç§’</li>
<li><code>@folder</code>: ~5ç§’</li>
<li><code>@Codebase</code>: ~15ç§’</li>
</ul>
<hr/>
<h3 data-id="heading-38">å‘4: Hookè¿‡äºä¸¥æ ¼å¯¼è‡´æ— æ³•å·¥ä½œ</h3>
<p><strong>âŒ é—®é¢˜</strong>: æ‰€æœ‰warningéƒ½å½“æˆerrorï¼Œé˜»æ­¢æäº¤</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿‡äºä¸¥æ ¼çš„Hook</span>
<span class="hljs-keyword">if</span> eslint <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> | grep -q <span class="hljs-string">"warning"</span>; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"å‘ç°warningï¼Œç¦æ­¢æäº¤"</span>
  <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>
</code></pre>
<p><strong>ç»“æœ</strong>: è½»å¾®çš„warningä¹Ÿæ— æ³•æäº¤ï¼Œå½±å“å¼€å‘æ•ˆç‡</p>
<p><strong>âœ… è§£å†³</strong>: ä¸¥é‡é—®é¢˜<code>deny</code>ï¼Œä¸€èˆ¬é—®é¢˜<code>ask</code></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># çµæ´»çš„Hookç­–ç•¥</span>

<span class="hljs-comment"># æ£€æŸ¥é”™è¯¯ï¼ˆä¸¥é‡é—®é¢˜ï¼‰</span>
errors=$(eslint <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> --format json | jq <span class="hljs-string">'.[] | select(.errorCount &gt; 0)'</span>)
<span class="hljs-keyword">if</span> [ -n <span class="hljs-string">"<span class="hljs-variable">$errors</span>"</span> ]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"å‘ç°é”™è¯¯ï¼Œå¿…é¡»ä¿®å¤"</span>
  <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># æ£€æŸ¥è­¦å‘Šï¼ˆä¸€èˆ¬é—®é¢˜ï¼‰</span>
warnings=$(eslint <span class="hljs-string">"<span class="hljs-variable">$file</span>"</span> --format json | jq <span class="hljs-string">'.[] | select(.warningCount &gt; 0)'</span>)
<span class="hljs-keyword">if</span> [ -n <span class="hljs-string">"<span class="hljs-variable">$warnings</span>"</span> ]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"âš ï¸ å‘ç°warningï¼Œå»ºè®®ä¿®å¤"</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ˜¯å¦ç»§ç»­ï¼Ÿ(y/n)"</span>
  <span class="hljs-comment"># è®©ç”¨æˆ·å†³ç­–</span>
<span class="hljs-keyword">fi</span>
</code></pre>
<hr/>
<h3 data-id="heading-39">å‘5: å›¢é˜Ÿé…ç½®å†²çª</h3>
<p><strong>âŒ é—®é¢˜</strong>: å¤šäººå„è‡ªä¿®æ”¹<code>.cursorrules</code>ï¼Œäº§ç”Ÿå†²çª</p>
<p><strong>åœºæ™¯</strong>:</p>
<ul>
<li>å¼€å‘A: å–œæ¬¢è¯¦ç»†æ³¨é‡Šï¼Œä¿®æ”¹Rulesè¦æ±‚"æ¯ä¸ªå‡½æ•°å¿…é¡»æœ‰æ³¨é‡Š"</li>
<li>å¼€å‘B: å–œæ¬¢ç®€æ´ä»£ç ï¼Œä¿®æ”¹Rulesè¦æ±‚"åªåœ¨å¤æ‚é€»è¾‘æ·»åŠ æ³¨é‡Š"</li>
<li>ç»“æœ: Gitå†²çªï¼Œå›¢é˜Ÿäº‰åµ</li>
</ul>
<p><strong>âœ… è§£å†³</strong>: æ˜ç¡®é…ç½®è¾¹ç•Œ</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># é¡¹ç›®.cursorrulesï¼ˆå›¢é˜Ÿå¼ºåˆ¶ï¼‰</span>
<span class="hljs-bullet">-</span> æŠ€æœ¯æ ˆé€‰æ‹©
<span class="hljs-bullet">-</span> APIè®¾è®¡è§„èŒƒ
<span class="hljs-bullet">-</span> å®‰å…¨è§„åˆ™
<span class="hljs-bullet">-</span> ä»£ç é£æ ¼ï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰

<span class="hljs-section"># ä¸ªäºº~/.cursor/rulesï¼ˆä¸ªäººåå¥½ï¼‰</span>
<span class="hljs-bullet">-</span> æ³¨é‡Šè¯¦ç»†ç¨‹åº¦
<span class="hljs-bullet">-</span> å˜é‡å‘½åé•¿åº¦åå¥½
<span class="hljs-bullet">-</span> ä»£ç ç»„ç»‡ä¹ æƒ¯
</code></pre>
<p><strong>æµç¨‹è§„èŒƒ</strong>:</p>
<ol>
<li>é¡¹ç›®Rulesä¿®æ”¹éœ€è¦å›¢é˜ŸReview</li>
<li>ä¸ªäººRulesä¸æäº¤åˆ°Git</li>
<li>å†²çªæ—¶é¡¹ç›®é…ç½®ä¼˜å…ˆçº§æ›´é«˜</li>
</ol>
<hr/>
<h2 data-id="heading-40">æ€»ç»“ä¸ä¸‹ä¸€æ­¥</h2>
<h3 data-id="heading-41">å…³é”®æ”¶è·</h3>
<p>é€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œä½ ç°åœ¨æŒæ¡äº†Cursorå·¥ä½œæµè‡ªåŠ¨åŒ–çš„å®Œæ•´æ–¹æ¡ˆï¼š</p>
<p><strong>ä¸‰å¤§æ”¯æŸ±</strong>:</p>
<ol>
<li>âœ… <strong>Rules</strong> = AIçš„è¡Œä¸ºæ‰‹å†Œï¼ˆè§„èŒƒè¾“å‡ºé£æ ¼ï¼‰</li>
<li>âœ… <strong>Context</strong> = AIçš„é¡¹ç›®è®°å¿†ï¼ˆç†è§£ä¸šåŠ¡ä¸Šä¸‹æ–‡ï¼‰</li>
<li>âœ… <strong>Hooks</strong> = AIçš„è‡ªåŠ¨è§¦å‘å™¨ï¼ˆè´¨é‡è‡ªåŠ¨å®ˆæŠ¤ï¼‰</li>
</ol>
<p><strong>æ ¸å¿ƒä»·å€¼</strong>:</p>
<ul>
<li>ğŸ“ˆ <strong>æ•ˆç‡æå‡</strong>: å•æ¬¡ä»»åŠ¡æ•ˆç‡æå‡6å€ä»¥ä¸Š</li>
<li>ğŸ¯ <strong>è´¨é‡ä¿éšœ</strong>: CIå¤±è´¥ç‡é™ä½4å€</li>
<li>ğŸ¤ <strong>å›¢é˜Ÿåä½œ</strong>: æ–°äººä¸Šæ‰‹æ—¶é—´ä»2å¤©ç¼©çŸ­åˆ°2å°æ—¶</li>
<li>ğŸ’° <strong>æˆæœ¬æ”¶ç›Š</strong>: 5äººå›¢é˜Ÿæ¯æœˆç›¸å½“äºå¤š3.5ä¸ªå…¨èŒå¼€å‘è€…äº§å‡º</li>
</ul>
<p><strong>ä»"æ‰‹åŠ¨é©¾é©¶"åˆ°"è‡ªåŠ¨é©¾é©¶"</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">é…ç½®å‰: æ¯æ¬¡é‡å¤è¯´æ˜è§„èŒƒ â†’ æ‰‹åŠ¨ä¿®æ”¹ä»£ç  â†’ æ‰‹åŠ¨æ£€æŸ¥æ ¼å¼</span>
    â†“
<span class="hljs-section">é…ç½®å: AIè‡ªåŠ¨éµå®ˆè§„èŒƒ â†’ è¾“å‡ºç›´æ¥å¯ç”¨ â†’ Hookè‡ªåŠ¨æ£€æŸ¥</span>
</code></pre>
<hr/>
<h3 data-id="heading-42">ç«‹å³å®è·µ</h3>
<p>è·Ÿç€ä¸‹é¢çš„æ¸…å•ï¼Œ20åˆ†é’Ÿå†…å®Œæˆå·¥ä½œæµé…ç½®ï¼š</p>
<p><strong>é…ç½®æ¸…å•</strong>:</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> åˆ›å»º<code>.cursorrules</code>æ–‡ä»¶ï¼Œå®šä¹‰é¡¹ç›®è§„èŒƒ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> é…ç½®<code>.cursor/docs/</code>ç›®å½•ï¼Œæ·»åŠ æ¶æ„å’ŒAPIæ–‡æ¡£</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> åˆ›å»º<code>.cursor/hooks.json</code>ï¼Œè®¾ç½®è‡ªåŠ¨åŒ–æ£€æŸ¥</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ç¼–å†™hookè„šæœ¬ï¼ˆcheck-promptã€format-codeã€review-changesï¼‰</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ·»åŠ æ‰§è¡Œæƒé™ï¼š<code>chmod +x .cursor/scripts/*.sh</code></li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æäº¤åˆ°Gitï¼Œè®©å›¢é˜Ÿæˆå‘˜è‡ªåŠ¨åŒæ­¥</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å°è¯•ç”¨ç®€å•Promptæµ‹è¯•æ•ˆæœ</li>
</ul>
<p><strong>æµ‹è¯•éªŒè¯</strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æµ‹è¯•Rules</span>
<span class="hljs-string">"åˆ›å»ºä¸€ä¸ªç”¨æˆ·åˆ—è¡¨é¡µé¢"</span>
<span class="hljs-comment"># è§‚å¯ŸAIæ˜¯å¦è‡ªåŠ¨éµå®ˆä½ å®šä¹‰çš„è§„èŒƒ</span>

<span class="hljs-comment"># æµ‹è¯•Context</span>
<span class="hljs-string">"@Docs æŸ¥çœ‹APIè§„èŒƒï¼Œåˆ›å»ºæ–°æ¥å£"</span>
<span class="hljs-comment"># è§‚å¯ŸAIæ˜¯å¦å‚è€ƒäº†æ–‡æ¡£å†…å®¹</span>

<span class="hljs-comment"># æµ‹è¯•Hooks</span>
<span class="hljs-comment"># ä¿®æ”¹ä»£ç åè§‚å¯Ÿæ˜¯å¦è‡ªåŠ¨æ ¼å¼åŒ–</span>
<span class="hljs-comment"># æäº¤promptæ—¶è§‚å¯Ÿæ˜¯å¦æ£€æŸ¥æ•æ„Ÿä¿¡æ¯</span>
</code></pre>
<hr/>
<h3 data-id="heading-43">ç³»åˆ—æ–‡ç« </h3>
<ul>
<li><a href="https://juejin.cn/post/7589093939656687668" target="_blank" title="https://juejin.cn/post/7589093939656687668">ã€Cursorè¿›é˜¶å®æˆ˜Â·01ã€‘Figmaè®¾è®¡ç¨¿ä¸€é”®è¿˜åŸ</a></li>
<li><a href="https://juejin.cn/post/7589475497001287695" target="_blank" title="https://juejin.cn/post/7589475497001287695">ã€Cursorè¿›é˜¶å®æˆ˜Â·02ã€‘å‘Šåˆ«ä¸‘é™‹ç•Œé¢</a></li>
<li><a href="https://juejin.cn/post/7589918470789169186" target="_blank" title="https://juejin.cn/post/7589918470789169186">ã€Cursorè¿›é˜¶å®æˆ˜Â·03ã€‘å››å¤§æ¨¡å¼å®Œå…¨æŒ‡å—ï¼šAgent/Plan/Debug/Askçš„æ­£ç¡®æ‰“å¼€æ–¹å¼</a></li>
</ul>
<hr/>
<p><em>æ„Ÿè°¢é˜…è¯»ï¼å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµã€æ”¶è—ã€åˆ†äº«ã€‚æˆ‘ä»¬ä¸‹æœŸè§ï¼ğŸ‘‹</em></p>
<p><em>æœ‰é—®é¢˜æ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºï¼Œæˆ‘ä¼šå°½é‡å›å¤æ¯ä¸€æ¡è¯„è®ºã€‚</em></p>
<h3 data-id="heading-44">ğŸ‰ æ„Ÿè°¢å…³æ³¨,è®©æˆ‘ä»¬ä¸€èµ·äº«å—æŠ€æœ¯å¸¦æ¥çš„ç²¾å½©!</h3>
<h3 data-id="heading-45"><strong>æˆ‘åšäº†ä¸€ä¸ªä¸ªäººä¸»é¡µï¼Œèƒ½æ‰¾åˆ°æ‰€æœ‰æˆ‘æä¾›ç»™ä½ çš„èµ„æº</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fhome.wonlab.top" target="_blank" title="https://home.wonlab.top" ref="nofollow noopener noreferrer">ä¸ªäººä¸»é¡µ</a></h3></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¡¬æ ¸å¹²è´§ï¼šå¦‚ä½•åœ¨è¿è¡Œçš„ PuTTY ä¸­æå–æ˜æ–‡å¯†ç ï¼Ÿä»å‘½ä»¤è¡Œåˆ°å†…å­˜å–è¯]]></title>    <link>https://juejin.cn/post/7591702898080284687</link>    <guid>https://juejin.cn/post/7591702898080284687</guid>    <pubDate>2026-01-05T13:02:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591702898080284687" data-draft-id="7591515844867325986" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¡¬æ ¸å¹²è´§ï¼šå¦‚ä½•åœ¨è¿è¡Œçš„ PuTTY ä¸­æå–æ˜æ–‡å¯†ç ï¼Ÿä»å‘½ä»¤è¡Œåˆ°å†…å­˜å–è¯"/> <meta itemprop="keywords" content="Linux,é»‘å®¢"/> <meta itemprop="datePublished" content="2026-01-05T13:02:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æ¬¡å°±å¥½602"/> <meta itemprop="url" content="https://juejin.cn/user/895432137124090"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¡¬æ ¸å¹²è´§ï¼šå¦‚ä½•åœ¨è¿è¡Œçš„ PuTTY ä¸­æå–æ˜æ–‡å¯†ç ï¼Ÿä»å‘½ä»¤è¡Œåˆ°å†…å­˜å–è¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/895432137124090/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æ¬¡å°±å¥½602
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T13:02:10.000Z" title="Mon Jan 05 2026 13:02:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç¡¬æ ¸å¹²è´§ï¼šå¦‚ä½•åœ¨è¿è¡Œçš„ PuTTY ä¸­æå–æ˜æ–‡å¯†ç ï¼Ÿä»å‘½ä»¤è¡Œåˆ°å†…å­˜å–è¯</h2>
<p><strong>èƒŒæ™¯ï¼š</strong><br/>
å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬æ‰‹å¤´æœ‰ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„ PuTTY çª—å£ã€‚<br/>
è¿™ç§æƒ…å†µåœ¨<strong>é«˜æ€§èƒ½è®¡ç®—ï¼ˆHPCï¼‰</strong> ã€<strong>è‡ªåŠ¨åŒ–è¿ç»´</strong>æˆ–è€…<strong>ä½¿ç”¨ç¬¬ä¸‰æ–¹é›†æˆå·¥å…·</strong>æ—¶éå¸¸å¸¸è§â€”â€”è½¯ä»¶è‡ªåŠ¨å¼¹å‡ºäº†ä¸€ä¸ªç»ˆç«¯çª—å£è¿ä¸Šäº†æœåŠ¡å™¨ï¼Œä½†å¯†ç æ˜¯å°è£…åœ¨è½¯ä»¶é‡Œçš„ï¼Œæˆ‘ä»¬æ ¹æœ¬ä¸çŸ¥é“ã€‚</p>
<p>å¦‚æœæ­¤æ—¶ä½ éœ€è¦ç”¨åŒæ ·çš„è´¦å·ç™»å½• FTP ä¼ æ–‡ä»¶ï¼Œæˆ–è€…å•çº¯å‡ºäºæŠ€æœ¯å¥½å¥‡å¿ƒæƒ³çŸ¥é“ï¼šâ€œè¿™è½¯ä»¶åˆ°åº•ç”¨çš„ä»€ä¹ˆå¯†ç ï¼Ÿâ€ æ€ä¹ˆåŠï¼Ÿ</p>
<p>åˆ«æ€¥ç€é‡ç½®å¯†ç ã€‚åªè¦çª—å£è¿˜åœ¨è¿è¡Œï¼Œå¯†ç å°±åœ¨ä½ çš„å†…å­˜é‡Œã€‚</p>
<p>ä»Šå¤©åˆ†äº«ä¸¤ç§æ–¹æ³•ï¼šä¸€ç§æ˜¯<strong>æé€ŸæŸ¥çœ‹çš„â€œå·§åŠ²â€</strong> ï¼Œå¦ä¸€ç§æ˜¯<strong>é€šç”¨æ€§æå¼ºçš„â€œå†…å­˜å–è¯â€</strong> ã€‚</p>
<hr/>
<h3 data-id="heading-1">æ–¹æ³•ä¸€ï¼šå·§ç”¨å¯åŠ¨å‚æ•°ï¼ˆæé€Ÿè§£æ³•ï¼‰</h3>
<p>å¾ˆå¤šé›†æˆè½¯ä»¶ï¼ˆå¦‚è¶…ç®—å®¢æˆ·ç«¯ã€æ•°æ®åº“å·¥å…·ï¼‰ä¸ºäº†æ–¹ä¾¿ï¼Œåœ¨åå°è°ƒç”¨ PuTTY æ—¶ï¼Œä¼šç›´æ¥æŠŠå¯†ç é€šè¿‡å‘½ä»¤è¡Œå‚æ•°ï¼ˆ<code>-pw</code>ï¼‰ä¼ è¿›å»ã€‚</p>
<p>è¿™æ˜¯æœ€å®¹æ˜“è¢«å¿½è§†çš„â€œç¯ä¸‹é»‘â€ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥é—®æ“ä½œç³»ç»Ÿï¼š <strong>â€œè¿™ä¸ªè¿›ç¨‹æ˜¯ç”¨ä»€ä¹ˆå‘½ä»¤å¯åŠ¨çš„ï¼Ÿâ€</strong></p>
<h4 data-id="heading-2">1. å‘½ä»¤è¡Œæµï¼ˆæœ€å¿«ï¼‰</h4>
<p>æ‰“å¼€ CMD æˆ– PowerShellï¼Œè¾“å…¥ä¸€è¡Œå‘½ä»¤ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">wmicÂ processÂ whereÂ <span class="hljs-string">"name='putty.exe'"</span>Â getÂ commandline
</code></pre>
<p><strong>æ•ˆæœï¼š</strong><br/>
å¦‚æœè¿æ°”å¥½ï¼Œä½ ä¼šç›´æ¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š</p>
<pre><code class="hljs language-sql" lang="sql">CommandLine
"C:\HPC_Tools\bin\putty.exe"Â <span class="hljs-operator">-</span>sshÂ <span class="hljs-keyword">user</span><span class="hljs-variable">@10</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>Â <span class="hljs-operator">-</span>pwÂ MySecretPassword123
</code></pre>
<p>é‚£ä¸ªÂ <code>-pw</code>Â åé¢çš„å­—ç¬¦ä¸²ï¼Œå°±æ˜¯ä½ è¦çš„æ˜æ–‡å¯†ç ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1d26fe2562c452c91467b8ad13247c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5qyh5bCx5aW9NjAy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768222930&amp;x-signature=3yk2HizQWOF7XkRzHoZlHDA6BgM%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-3">2. å›¾å½¢ç•Œé¢æµï¼ˆç›´è§‚ï¼‰</h4>
<p>ä¸å–œæ¬¢æ•²å‘½ä»¤ï¼ŸWindows ä»»åŠ¡ç®¡ç†å™¨ä¹Ÿèƒ½çœ‹ã€‚</p>
<ol>
<li>1.Â <code>Ctrl + Shift + Esc</code>Â æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ã€‚</li>
<li>
<ol start="2">
<li>åˆ‡æ¢åˆ°Â  <strong>â€œè¯¦ç»†ä¿¡æ¯â€ (Details)</strong> Â é¡µç­¾ã€‚</li>
</ol>
</li>
<li>
<ol start="3">
<li>å¯¹ç€åˆ—æ ‡é¢˜å³é”® -&gt;Â  <strong>â€œé€‰æ‹©åˆ—â€</strong> Â -&gt; å‹¾é€‰Â  <strong>â€œå‘½ä»¤è¡Œâ€</strong> ã€‚</li>
</ol>
</li>
<li>
<ol start="4">
<li>æ‰¾åˆ°Â <code>putty.exe</code>ï¼Œå‘å³çœ‹ï¼Œå¯†ç ä¸€è§ˆæ— ä½™ã€‚</li>
</ol>
</li>
</ol>
<hr/>
<h3 data-id="heading-4">æ–¹æ³•äºŒï¼šå†…å­˜è½¬å‚¨å–è¯ï¼ˆç»ˆæå¤§æ‹›ï¼‰</h3>
<p>å¦‚æœæ–¹æ³•ä¸€ä¸ç®¡ç”¨æ€ä¹ˆåŠï¼Ÿ<br/>
æ¯”å¦‚ä½ æ˜¯<strong>æ‰‹åŠ¨åŒå‡»</strong>æ‰“å¼€çš„ PuTTYï¼Œç„¶ååœ¨é»‘æ¡†æ¡†é‡Œæ‰‹æ•²çš„å¯†ç ï¼›æˆ–è€…è½¯ä»¶ä½¿ç”¨äº† Session åŠ è½½æ¨¡å¼ï¼Œæ²¡æœ‰åœ¨å¯åŠ¨å‚æ•°é‡Œå†™å¯†ç ã€‚</p>
<p>è¿™æ—¶å€™ï¼Œå¯åŠ¨å‚æ•°é‡Œæ˜¯ç©ºçš„ã€‚ä½†åˆ«æ…Œï¼Œ<strong>å‡¡èµ°è¿‡å¿…ç•™ç—•</strong>ã€‚åªè¦ä½ è¾“å…¥è¿‡å¯†ç ï¼Œæˆ–è€… PuTTY å‘é€è¿‡å¯†ç ï¼Œè¿™ä¸²å­—ç¬¦å°±ä¸€å®šå­˜åœ¨äºå†…å­˜çš„æŸä¸ªè§’è½ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦åŠ¨ç”¨ä¸€ç‚¹â€œå–è¯å­¦â€æ‰‹æ®µï¼š<strong>Memory Dumpï¼ˆå†…å­˜è½¬å‚¨ï¼‰</strong> ã€‚</p>
<h4 data-id="heading-5">ç¬¬ä¸€æ­¥ï¼šæŠŠå†…å­˜â€œå€’â€å‡ºæ¥</h4>
<ol>
<li>
<ol>
<li>æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨ï¼Œæ‰¾åˆ°Â <code>putty.exe</code>ã€‚</li>
</ol>
</li>
<li>
<ol start="2">
<li>å³é”®ç‚¹å‡»å®ƒï¼Œé€‰æ‹©Â  <strong>â€œåˆ›å»ºè½¬å‚¨æ–‡ä»¶â€ (Create Dump File)</strong> ã€‚</li>
</ol>
</li>
<li>
<ol start="3">
<li>ç³»ç»Ÿä¼šæŠŠå½“å‰è¿™ä¸ªè¿›ç¨‹çš„æ‰€æœ‰å†…å­˜æ•°æ®ä¿å­˜ä¸ºä¸€ä¸ªÂ <code>.DMP</code>Â æ–‡ä»¶ï¼ˆé€šå¸¸åœ¨Â <code>C:\Users\ç”¨æˆ·å\AppData\Local\Temp</code>Â ç›®å½•ä¸‹ï¼‰ã€‚</li>
</ol>
</li>
</ol>
<h4 data-id="heading-6">ç¬¬äºŒæ­¥ï¼šä»ä¹±ç ä¸­æå–çœŸç›¸</h4>
<p>å†…å­˜æ–‡ä»¶æ˜¯äºŒè¿›åˆ¶çš„ï¼Œç›´æ¥ç”¨è®°äº‹æœ¬æ‰“å¼€æ˜¯ä¹±ç ã€‚æˆ‘ä»¬éœ€è¦æå–å…¶ä¸­çš„<strong>å¯è¯»å­—ç¬¦ä¸²</strong>ã€‚</p>
<p><strong>å·¥å…·å‡†å¤‡ï¼š</strong><br/>
æ¨èä½¿ç”¨å¾®è½¯ Sysinternals å·¥å…·åŒ…ä¸­çš„Â <code>strings.exe</code>ï¼Œæˆ–è€…ä»»ä½•æ”¯æŒäºŒè¿›åˆ¶æœç´¢çš„ç¼–è¾‘å™¨ï¼ˆå¦‚ WinHex, Notepad++ï¼‰ã€‚</p>
<p><strong>æ“ä½œæ¼”ç¤ºï¼š</strong><br/>
åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œï¼š</p>
<pre><code class="hljs language-css" lang="css">strings<span class="hljs-selector-class">.exe</span>Â putty<span class="hljs-selector-class">.DMP</span>Â &gt;Â <span class="hljs-attribute">content</span><span class="hljs-selector-class">.txt</span>
</code></pre>
<p>è¿™è¡Œå‘½ä»¤çš„æ„æ€æ˜¯ï¼šæŠŠå†…å­˜é‡Œæ‰€æœ‰çš„â€œäººè¯â€ï¼ˆå¯è¯»æ–‡æœ¬ï¼‰æå–å‡ºæ¥ï¼Œå­˜åˆ°Â <code>content.txt</code>Â é‡Œã€‚</p>
<h4 data-id="heading-7">ç¬¬ä¸‰æ­¥ï¼šæœç´¢å…³é”®çº¿ç´¢</h4>
<p>æ‰“å¼€è¿™ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œè™½ç„¶å†…å®¹åºæ‚ï¼Œä½†æˆ‘ä»¬è¦æ‰¾çš„ä¸œè¥¿å¾€å¾€æœ‰è¿¹å¯å¾ªã€‚ä½¿ç”¨æŸ¥æ‰¾åŠŸèƒ½ï¼ˆCtrl+Fï¼‰ï¼š</p>
<ul>
<li>â€¢Â <strong>æœç´¢ç¯å¢ƒç‰¹å¾ï¼š</strong> Â å¦‚æœä½ è®°å¾—ç™»å½•åè¾“å…¥çš„ç¬¬ä¸€æ¡å‘½ä»¤ï¼ˆæ¯”å¦‚Â <code>ls</code>Â æˆ–Â <code>top</code>ï¼‰ï¼Œæœç´¢è¿™ä¸ªè¯ã€‚å¯†ç å¾€å¾€å°±åœ¨è¿™è¡Œå‘½ä»¤çš„<strong>è¾“å…¥ç¼“å†²åŒºé™„è¿‘</strong>ã€‚</li>
<li>â€¢Â <strong>æœç´¢ç‰¹å®šæ ‡è®°ï¼š</strong> Â æœç´¢Â <code>password</code>ã€<code>pass</code>Â æˆ–ä½ çš„ç”¨æˆ·åã€‚</li>
<li>â€¢Â <strong>æœç´¢å¯åŠ¨å‚æ•°ï¼š</strong> Â å³ä½¿Â <code>wmic</code>Â æ²¡æ˜¾ç¤ºï¼Œå†…å­˜é‡Œæœ‰æ—¶å€™ä¹Ÿä¼šæ®‹ç•™å¯åŠ¨æ—¶çš„å®Œæ•´æŒ‡ä»¤ï¼Œæœç´¢Â <code>-pw</code>Â ä¾ç„¶æ˜¯ä¸€ä¸ªæœ‰æ•ˆæ‰‹æ®µã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c2ba78547cf4d80bea9d4f2f4bedf25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5qyh5bCx5aW9NjAy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768222930&amp;x-signature=2%2B%2Bao8XYUfHPzX9saDfSURou15Q%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-8">ğŸ’¡ æŠ€æœ¯æ€»ç»“</h3>
<p>è¿™ä¸¤ç§æ–¹æ³•å±•ç¤ºäº†ä¸¤ç§è§£å†³é—®é¢˜çš„ç»´åº¦ï¼š</p>
<ol>
<li>1.Â <strong>Command Line æŸ¥çœ‹</strong>ï¼šåˆ©ç”¨çš„æ˜¯<strong>è¿›ç¨‹å…ƒæ•°æ®</strong>ã€‚å®ƒå¿«ã€å‡†ã€ç‹ ï¼Œé€‚ç”¨äºè‡ªåŠ¨åŒ–å·¥å…·è°ƒç”¨çš„åœºæ™¯ã€‚</li>
<li>2.Â <strong>Memory Dump åˆ†æ</strong>ï¼šåˆ©ç”¨çš„æ˜¯<strong>æ•°æ®æ®‹ç•™</strong>ã€‚å®ƒæ˜¯é€šç”¨çš„å–è¯æ‰‹æ®µï¼Œä¸ä»…èƒ½æ‰¾ PuTTY å¯†ç ï¼Œç†è®ºä¸Šä»»ä½•æœªå¯¹å†…å­˜è¿›è¡Œå®‰å…¨æ“¦é™¤çš„è½¯ä»¶ï¼Œå…¶æ•æ„Ÿæ•°æ®éƒ½èƒ½é€šè¿‡è¿™ç§æ–¹å¼æå–ã€‚</li>
</ol>
<p><strong>è¿ç»´ä¸ç§‘ç ”çš„ä¹è¶£ï¼Œå¾€å¾€å°±åœ¨äºè¿™ç§â€œé€è¿‡ç°è±¡çœ‹æœ¬è´¨â€çš„æ¢ç´¢ä¹‹ä¸­ã€‚</strong></p>
<p>å»ºè®®å¤§å®¶æ”¶è—å¤‡ç”¨ï¼Œè¯´ä¸å®šå“ªå¤©è¿™ä¸ªå°æŠ€å·§èƒ½æ•‘ä½ äºæ°´ç«ã€‚</p>
<p>çœ‹å¾—å¼€å¿ƒçš„è€é“å¸Œæœ›ç‚¹ä¸ªå…³æ³¨å‘€ï¼Œè¿™å¯¹æˆ‘å¾ˆé‡è¦ï¼Œæ˜¯æˆ‘æŒç»­åˆ›ä½œçš„åŠ¨åŠ›æ¥æºï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨æ ˆ/å †ä¸Šåˆ›å»ºå¹¶åˆå§‹åŒ–C++å¯¹è±¡]]></title>    <link>https://juejin.cn/post/7591705084671148070</link>    <guid>https://juejin.cn/post/7591705084671148070</guid>    <pubDate>2026-01-05T13:21:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591705084671148070" data-draft-id="7591708519448723465" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨æ ˆ/å †ä¸Šåˆ›å»ºå¹¶åˆå§‹åŒ–C++å¯¹è±¡"/> <meta itemprop="keywords" content="C++"/> <meta itemprop="datePublished" content="2026-01-05T13:21:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Grimmjow"/> <meta itemprop="url" content="https://juejin.cn/user/4188472097127035"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨æ ˆ/å †ä¸Šåˆ›å»ºå¹¶åˆå§‹åŒ–C++å¯¹è±¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4188472097127035/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Grimmjow
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T13:21:53.000Z" title="Mon Jan 05 2026 13:21:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Entity</span> {</span>
private:
	<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> name;
public:
	Entity():name(<span class="hljs-string">"unknown"</span>) {
		<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">" Creat susscifully!"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
	}
	Entity(<span class="hljs-type">const</span> <span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span>&amp; name):name(name){
		<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">" Creat susscifully!"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
	}
	~Entity() { <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Clear "</span> &lt;&lt; name &lt;&lt; <span class="hljs-string">" object!"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>; }
	<span class="hljs-built_in">std</span>::<span class="hljs-built_in">string</span> <span class="hljs-title function_">getname</span><span class="hljs-params">()</span> {
		<span class="hljs-keyword">return</span> name;
	}
};
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    {
        Entity <span class="hljs-title function_">Teru</span><span class="hljs-params">(<span class="hljs-string">"Miyanaga Teru"</span>)</span>;
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; Teru.getname() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
        <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; (&amp;Teru)-&gt;getname() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    }<span class="hljs-comment">//è¿™é‡Œæ ˆä¸Šçš„Teruçš„ä½œç”¨åŸŸç»“æŸï¼Œç¼–è¯‘å™¨è‡ªåŠ¨é‡Šæ”¾å†…å­˜</span>
    
    Entity* Ichigo = new Entity(<span class="hljs-string">"Kurosaki Ichigo"</span>);
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; Ichigo-&gt;getname() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    delete Ichigo;
    
    Entity* Gotei13 = new Entity[<span class="hljs-number">13</span>]{ {} ,{<span class="hljs-string">"suifeng"</span>},{<span class="hljs-string">"gin"</span>}};
    delete[] Gotei13;
}
</code></pre>
<p>å¯¹äºä¸€ä¸ªç±»Entityï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ ˆä¸Šåˆ›å»ºè¯¥ç±»çš„å¯¹è±¡ï¼Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function">Entity <span class="hljs-title">Teru</span><span class="hljs-params">(<span class="hljs-string">"Miyanaga Teru"</span>)</span></span>;
</code></pre>
<p><code>Teru</code>å³ä¸ºå¯¹è±¡çš„åç§°ï¼Œ<code>&amp;Teru</code>è®¿é—®åœ°å€ã€‚
åœ¨æ ˆä¸Šåˆ›å»ºçš„å˜é‡ç”±ç¼–è¯‘å™¨è‡ªåŠ¨ç®¡ç†ï¼Œä½¿ç”¨ç»“æŸåä¼šè‡ªåŠ¨æ‰§è¡Œææ„å‡½æ•°<code>~Entity</code>é‡Šæ”¾å†…å­˜ã€‚</p>
<p>åœ¨å †ä¸Šåˆ›å»ºå¯¹è±¡ï¼Œéœ€è¦ä½¿ç”¨<code>new</code>å…³é”®å­—æ¥ç”³è¯·å†…å­˜ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">Entity* <span class="hljs-attr">Ichigo</span> = new Entity(<span class="hljs-string">"Kurosaki Ichigo"</span>)<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™é‡Œ<code>new Entity("Kurosaki Ichigo")</code>å®é™…ä¸Šå°±æ˜¯ç”³è¯·çš„å†…å­˜çš„åœ°å€ã€‚åœ¨å †ä¸Šåˆ›å»ºå¯¹è±¡æˆ‘ä»¬å¾—åˆ°çš„éƒ½æ˜¯å¯¹è±¡çš„åœ°å€ï¼Œæ‰€ä»¥ç”¨çš„æ˜¯æŒ‡é’ˆå½¢å¼<code>Entity* Ichigo</code>ã€‚ä»åœ°å€ç›´æ¥è®¿é—®è¯¥å¯¹è±¡ä¸­çš„å…ƒç´ å¯ä»¥ä½¿ç”¨ç®­å¤´<code>Ichigo-&gt;getname()</code>ï¼Œæˆ–è€…åˆ©ç”¨ä¸€èˆ¬çš„æ–¹å¼<code>(*Ichigo).getname()</code>ã€‚</p>
<p>æˆ‘ä»¬åœ¨åˆ©ç”¨<code>new</code>å…³é”®å­—ç”³è¯·å†…å­˜åï¼Œåœ¨ä½¿ç”¨å®Œæ¯•åéœ€è¦ç”¨<code>delete</code>å…³é”®å­—é‡Šæ”¾å†…å­˜ï¼Œæ­¤æ—¶ä¹ŸåŒæ—¶æ‰§è¡Œææ„å‡½æ•°<code>~Entity</code>ã€‚</p>
<p>å¯¹äºå…ƒç´ ç»„çš„å½¢å¼ï¼Œæˆ‘ä»¬çš„<code>delete</code>ä¹Ÿè¦åšå¯¹åº”æ”¹å˜ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Entity* <span class="hljs-attr">Gotei13</span> = new Entity[<span class="hljs-number">13</span>]{ {} ,{<span class="hljs-string">"suifeng"</span>},{<span class="hljs-string">"gin"</span>}}<span class="hljs-comment">;</span>
delete<span class="hljs-section">[]</span> Gotei13<span class="hljs-comment">;</span>
        
int* <span class="hljs-attr">a</span> = new int[<span class="hljs-number">10</span>]<span class="hljs-comment">;</span>
for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; 10; i++) {</span>
	a<span class="hljs-section">[i]</span> = i<span class="hljs-comment">;</span>
	printf("a<span class="hljs-section">[%d]</span>: %d\n", i, a<span class="hljs-section">[i]</span>)<span class="hljs-comment">;</span>
}
delete<span class="hljs-section">[]</span> a<span class="hljs-comment">;</span>
</code></pre>
<p>æ ˆ/å †çš„ä¼˜åŠ£åŠ¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46492c2f74fd45ed8c8e7801b7a739f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR3JpbW1qb3c=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768224113&amp;x-signature=sHV2L3blDfk6rrULvyptaosnahU%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonè‡ªåŠ¨åŒ–å®æˆ˜ï¼šElementTreeåº“å¿«é€Ÿå…¥é—¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7591497387246338084</link>    <guid>https://juejin.cn/post/7591497387246338084</guid>    <pubDate>2026-01-05T11:59:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591497387246338084" data-draft-id="7591694511245443110" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonè‡ªåŠ¨åŒ–å®æˆ˜ï¼šElementTreeåº“å¿«é€Ÿå…¥é—¨æŒ‡å—"/> <meta itemprop="keywords" content="é¢è¯•,åç«¯"/> <meta itemprop="datePublished" content="2026-01-05T11:59:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="UrbanJazzerati"/> <meta itemprop="url" content="https://juejin.cn/user/550205947391389"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonè‡ªåŠ¨åŒ–å®æˆ˜ï¼šElementTreeåº“å¿«é€Ÿå…¥é—¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/550205947391389/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    UrbanJazzerati
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T11:59:50.000Z" title="Mon Jan 05 2026 11:59:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ElementTree åº“ç®€ä»‹</h2>
<p><code>xml.etree.ElementTree</code>Â æ˜¯ Python å¤„ç† XML çš„æ ‡å‡†åº“ï¼Œå®ƒï¼š</p>
<ul>
<li>âœ…Â <strong>è½»é‡é«˜æ•ˆ</strong>ï¼šæ¯” DOM è§£æå™¨æ›´ç®€å•ï¼Œæ¯” SAX è§£æå™¨æ›´æ˜“ç”¨</li>
<li>âœ…Â <strong>å†…ç½®æ¨¡å—</strong>ï¼šæ— éœ€å®‰è£…ä»»ä½•ç¬¬ä¸‰æ–¹åŒ…</li>
<li>âœ…Â <strong>Pythonic API</strong>ï¼šä½¿ç”¨æ–¹å¼ç¬¦åˆ Python ä¹ æƒ¯</li>
</ul>
<h2 data-id="heading-1">äºŒã€æ ¸å¿ƒæ“ä½œå¿«é€Ÿä¸Šæ‰‹</h2>
<h3 data-id="heading-2">1.Â <strong>è§£æ XMLï¼šè¯»å–ä¸ç†è§£</strong></h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> xml.etree.ElementTree <span class="hljs-keyword">as</span> ET

<span class="hljs-comment"># ä»å­—ç¬¦ä¸²è§£æ</span>
xml_string = <span class="hljs-string">'''
&lt;bookstore&gt;
    &lt;book category="ç¼–ç¨‹"&gt;
        &lt;title&gt;Pythonç¼–ç¨‹ä»å…¥é—¨åˆ°å®è·µ&lt;/title&gt;
        &lt;author&gt;Eric Matthes&lt;/author&gt;
        &lt;year&gt;2016&lt;/year&gt;
        &lt;price&gt;89.00&lt;/price&gt;
    &lt;/book&gt;
&lt;/bookstore&gt;
'''</span>
root = ET.fromstring(xml_string)  <span class="hljs-comment"># è·å–æ ¹å…ƒç´ </span>

<span class="hljs-comment"># ä»æ–‡ä»¶è§£æ</span>
tree = ET.parse(<span class="hljs-string">'books.xml'</span>)      <span class="hljs-comment"># è§£ææ–‡ä»¶</span>
root = tree.getroot()             <span class="hljs-comment"># è·å–æ ¹å…ƒç´ </span>

<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ ¹å…ƒç´ æ ‡ç­¾: <span class="hljs-subst">{root.tag}</span>"</span>)   <span class="hljs-comment"># è¾“å‡º: bookstore</span>
</code></pre>
<h3 data-id="heading-3">2.Â <strong>éå†ä¸è®¿é—®å…ƒç´ </strong></h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># éå†æ‰€æœ‰å­å…ƒç´ </span>
<span class="hljs-keyword">for</span> child <span class="hljs-keyword">in</span> root:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å­å…ƒç´ : <span class="hljs-subst">{child.tag}</span>, å±æ€§: <span class="hljs-subst">{child.attrib}</span>"</span>)
    <span class="hljs-comment"># è®¿é—®å­™å­å…ƒç´ </span>
    <span class="hljs-keyword">for</span> subchild <span class="hljs-keyword">in</span> child:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"  <span class="hljs-subst">{subchild.tag}</span>: <span class="hljs-subst">{subchild.text}</span>"</span>)

<span class="hljs-comment"># è®¿é—®ç‰¹å®šå…ƒç´ çš„æ–‡æœ¬</span>
title = root.find(<span class="hljs-string">'book/title'</span>)  <span class="hljs-comment"># æŸ¥æ‰¾ç¬¬ä¸€ä¸ªåŒ¹é…çš„å…ƒç´ </span>
<span class="hljs-keyword">if</span> title <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¹¦å: <span class="hljs-subst">{title.text}</span>"</span>)

<span class="hljs-comment"># æŸ¥æ‰¾æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ </span>
all_books = root.findall(<span class="hljs-string">'book'</span>)  <span class="hljs-comment"># æŸ¥æ‰¾æ‰€æœ‰bookå…ƒç´ </span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰¾åˆ° <span class="hljs-subst">{<span class="hljs-built_in">len</span>(all_books)}</span> æœ¬ä¹¦"</span>)
</code></pre>
<h3 data-id="heading-4">3.Â <strong>åˆ›å»º XML æ–‡æ¡£</strong></h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ›å»ºæ ¹å…ƒç´ </span>
root = ET.Element(<span class="hljs-string">"bookstore"</span>)

<span class="hljs-comment"># åˆ›å»ºå­å…ƒç´ å¹¶æ·»åŠ å±æ€§</span>
book = ET.SubElement(root, <span class="hljs-string">"book"</span>)
book.<span class="hljs-built_in">set</span>(<span class="hljs-string">"category"</span>, <span class="hljs-string">"ç¼–ç¨‹"</span>)

<span class="hljs-comment"># æ·»åŠ æ›´å¤šå­å…ƒç´ </span>
title = ET.SubElement(book, <span class="hljs-string">"title"</span>)
title.text = <span class="hljs-string">"Pythonæ ¸å¿ƒç¼–ç¨‹"</span>
author = ET.SubElement(book, <span class="hljs-string">"author"</span>)
author.text = <span class="hljs-string">"Wesley Chun"</span>

<span class="hljs-comment"># åˆ›å»ºXMLæ ‘å¹¶å†™å…¥æ–‡ä»¶</span>
tree = ET.ElementTree(root)
tree.write(<span class="hljs-string">"new_book.xml"</span>, encoding=<span class="hljs-string">"utf-8"</span>, xml_declaration=<span class="hljs-literal">True</span>)

<span class="hljs-built_in">print</span>(<span class="hljs-string">"XMLæ–‡ä»¶åˆ›å»ºæˆåŠŸï¼"</span>)
</code></pre>
<h3 data-id="heading-5">4.Â <strong>ä¿®æ”¹ XML å†…å®¹</strong></h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¿®æ”¹å…ƒç´ æ–‡æœ¬</span>
<span class="hljs-keyword">for</span> price <span class="hljs-keyword">in</span> root.<span class="hljs-built_in">iter</span>(<span class="hljs-string">'price'</span>):  <span class="hljs-comment"># iter()éå†æ‰€æœ‰priceå…ƒç´ </span>
    old_price = <span class="hljs-built_in">float</span>(price.text)
    price.text = <span class="hljs-built_in">str</span>(old_price * <span class="hljs-number">0.9</span>)  <span class="hljs-comment"># æ‰“9æŠ˜</span>
    price.<span class="hljs-built_in">set</span>(<span class="hljs-string">'discount'</span>, <span class="hljs-string">'10%'</span>)       <span class="hljs-comment"># æ·»åŠ æ–°å±æ€§</span>

<span class="hljs-comment"># åˆ é™¤å…ƒç´ </span>
<span class="hljs-keyword">for</span> book <span class="hljs-keyword">in</span> root.findall(<span class="hljs-string">'book'</span>):
    year = book.find(<span class="hljs-string">'year'</span>)
    <span class="hljs-keyword">if</span> year <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> <span class="hljs-built_in">int</span>(year.text) &lt; <span class="hljs-number">2010</span>:
        root.remove(book)  <span class="hljs-comment"># åˆ é™¤2010å¹´ä»¥å‰çš„ä¹¦</span>

<span class="hljs-comment"># ä¿å­˜ä¿®æ”¹</span>
tree.write(<span class="hljs-string">'updated_books.xml'</span>)
</code></pre>
<h3 data-id="heading-6">5.Â <strong>æŸ¥æ‰¾å…ƒç´ çš„å¤šç§æ–¹å¼</strong></h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1. ä½¿ç”¨XPath-likeè¯­æ³•ï¼ˆæœ‰é™æ”¯æŒï¼‰</span>
expensive_books = root.findall(<span class="hljs-string">"book[price&gt;50]"</span>)  <span class="hljs-comment"># ä»·æ ¼&gt;50çš„ä¹¦</span>

<span class="hljs-comment"># 2. éå†æ‰€æœ‰ç‰¹å®šæ ‡ç­¾</span>
<span class="hljs-keyword">for</span> author <span class="hljs-keyword">in</span> root.<span class="hljs-built_in">iter</span>(<span class="hljs-string">'author'</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä½œè€…: <span class="hljs-subst">{author.text}</span>"</span>)

<span class="hljs-comment"># 3. å¤æ‚æ¡ä»¶æŸ¥æ‰¾</span>
<span class="hljs-keyword">for</span> book <span class="hljs-keyword">in</span> root.findall(<span class="hljs-string">'book'</span>):
    price = <span class="hljs-built_in">float</span>(book.find(<span class="hljs-string">'price'</span>).text)
    category = book.get(<span class="hljs-string">'category'</span>)
    <span class="hljs-keyword">if</span> price &gt; <span class="hljs-number">80</span> <span class="hljs-keyword">and</span> category == <span class="hljs-string">'ç¼–ç¨‹'</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ˜‚è´µçš„ç¼–ç¨‹ä¹¦: <span class="hljs-subst">{book.find(<span class="hljs-string">'title'</span>).text}</span>"</span>)
</code></pre>
<h2 data-id="heading-7">ä¸‰ã€å®ç”¨æŠ€å·§ä¸æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-8">å¤„ç†å‘½åç©ºé—´</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¸¦å‘½åç©ºé—´çš„XML</span>
ns_xml = <span class="hljs-string">'''
&lt;root xmlns:bk="http://example.com/books"&gt;
    &lt;bk:book&gt;
        &lt;bk:title&gt;Pythonå­¦ä¹ æ‰‹å†Œ&lt;/bk:title&gt;
    &lt;/bk:book&gt;
&lt;/root&gt;
'''</span>

<span class="hljs-comment"># æ³¨å†Œå‘½åç©ºé—´å‰ç¼€ï¼ˆæ–¹ä¾¿æŸ¥æ‰¾ï¼‰</span>
namespaces = {<span class="hljs-string">'bk'</span>: <span class="hljs-string">'http://example.com/books'</span>}
root = ET.fromstring(ns_xml)
title = root.find(<span class="hljs-string">'bk:book/bk:title'</span>, namespaces)
</code></pre>
<h3 data-id="heading-9">å¤„ç†å¤§å‹ XML æ–‡ä»¶</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä½¿ç”¨è¿­ä»£è§£æï¼ŒèŠ‚çœå†…å­˜</span>
<span class="hljs-keyword">for</span> event, elem <span class="hljs-keyword">in</span> ET.iterparse(<span class="hljs-string">'large_file.xml'</span>, events=(<span class="hljs-string">'start'</span>, <span class="hljs-string">'end'</span>)):
    <span class="hljs-keyword">if</span> event == <span class="hljs-string">'start'</span> <span class="hljs-keyword">and</span> elem.tag == <span class="hljs-string">'book'</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¼€å§‹å¤„ç†ä¹¦: <span class="hljs-subst">{elem.find(<span class="hljs-string">'title'</span>).text}</span>"</span>)
    <span class="hljs-keyword">elif</span> event == <span class="hljs-string">'end'</span> <span class="hljs-keyword">and</span> elem.tag == <span class="hljs-string">'book'</span>:
        <span class="hljs-comment"># å¤„ç†å®Œæˆåæ¸…é™¤å…ƒç´ ï¼Œé‡Šæ”¾å†…å­˜</span>
        elem.clear()

<span class="hljs-comment"># åªè§£æç‰¹å®šå…ƒç´ </span>
context = ET.iterparse(<span class="hljs-string">'large_file.xml'</span>, events=(<span class="hljs-string">'end'</span>,))
<span class="hljs-keyword">for</span> event, elem <span class="hljs-keyword">in</span> context:
    <span class="hljs-keyword">if</span> elem.tag == <span class="hljs-string">'book'</span> <span class="hljs-keyword">and</span> event == <span class="hljs-string">'end'</span>:
        <span class="hljs-comment"># åªå¤„ç†bookå…ƒç´ </span>
        process_book(elem)
        elem.clear()
</code></pre>
<h2 data-id="heading-10">å››ã€å¸¸è§é”™è¯¯ä¸è§£å†³æ–¹æ³•</h2>






























<table><thead><tr><th>é”™è¯¯æƒ…å†µ</th><th>åŸå› </th><th>è§£å†³æ–¹æ³•</th></tr></thead><tbody><tr><td><code>SyntaxError</code></td><td>XMLæ ¼å¼ä¸æ­£ç¡®</td><td>æ£€æŸ¥XMLæ˜¯å¦å®Œæ•´ï¼Œæ ‡ç­¾æ˜¯å¦é—­åˆ</td></tr><tr><td><code>AttributeError</code></td><td>å…ƒç´ ä¸å­˜åœ¨å°±è®¿é—®å±æ€§</td><td>å…ˆç”¨<code>if elem is not None:</code>åˆ¤æ–­</td></tr><tr><td>ä¸­æ–‡ä¹±ç </td><td>ç¼–ç é—®é¢˜</td><td>ç¡®ä¿è¯»å†™æ—¶æŒ‡å®š<code>encoding='utf-8'</code></td></tr><tr><td>æ‰¾ä¸åˆ°å…ƒç´ </td><td>å‘½åç©ºé—´é—®é¢˜</td><td>æ³¨å†Œå¹¶ä½¿ç”¨å‘½åç©ºé—´å‰ç¼€</td></tr></tbody></table>
<h2 data-id="heading-11">äº”ã€å¿«é€Ÿå‚è€ƒè¡¨</h2>























































<table><thead><tr><th>ä»»åŠ¡</th><th>æ–¹æ³•</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>è§£æXML</strong></td><td><code>ET.parse()</code></td><td><code>tree = ET.parse('file.xml')</code></td></tr><tr><td><strong>è·å–æ ¹</strong></td><td><code>.getroot()</code></td><td><code>root = tree.getroot()</code></td></tr><tr><td><strong>æŸ¥æ‰¾å•ä¸ª</strong></td><td><code>.find()</code></td><td><code>elem = root.find('path')</code></td></tr><tr><td><strong>æŸ¥æ‰¾æ‰€æœ‰</strong></td><td><code>.findall()</code></td><td><code>elems = root.findall('path')</code></td></tr><tr><td><strong>éå†æ‰€æœ‰</strong></td><td><code>.iter()</code></td><td><code>for el in root.iter('tag'):</code></td></tr><tr><td><strong>è·å–æ–‡æœ¬</strong></td><td><code>.text</code></td><td><code>text = elem.text</code></td></tr><tr><td><strong>è·å–å±æ€§</strong></td><td><code>.attrib</code></td><td><code>attr = elem.attrib</code></td></tr><tr><td><strong>è®¾ç½®å±æ€§</strong></td><td><code>.set()</code></td><td><code>elem.set('key', 'value')</code></td></tr><tr><td><strong>åˆ›å»ºå…ƒç´ </strong></td><td><code>ET.SubElement()</code></td><td><code>child = ET.SubElement(parent, 'tag')</code></td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®© WinForm.NET å†æ¬¡ä¼Ÿå¤§ï¼ä¸€ä¸ªä¸“é—¨è®¾è®¡ç”¨äºå¸®åŠ© WinForms åº”ç”¨ç¨‹åºè¿ç§»åˆ° Blazor WASM å¹³å°çš„é¡¹ç›®]]></title>    <link>https://juejin.cn/post/7591672090790838291</link>    <guid>https://juejin.cn/post/7591672090790838291</guid>    <pubDate>2026-01-06T00:02:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591672090790838291" data-draft-id="7591697558377201706" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®© WinForm.NET å†æ¬¡ä¼Ÿå¤§ï¼ä¸€ä¸ªä¸“é—¨è®¾è®¡ç”¨äºå¸®åŠ© WinForms åº”ç”¨ç¨‹åºè¿ç§»åˆ° Blazor WASM å¹³å°çš„é¡¹ç›®"/> <meta itemprop="keywords" content="åç«¯,.NET"/> <meta itemprop="datePublished" content="2026-01-06T00:02:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿½é€æ—¶å…‰è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2770425031690333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®© WinForm.NET å†æ¬¡ä¼Ÿå¤§ï¼ä¸€ä¸ªä¸“é—¨è®¾è®¡ç”¨äºå¸®åŠ© WinForms åº”ç”¨ç¨‹åºè¿ç§»åˆ° Blazor WASM å¹³å°çš„é¡¹ç›®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2770425031690333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿½é€æ—¶å…‰è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T00:02:57.000Z" title="Tue Jan 06 2026 00:02:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>éšç€ä¼ä¸šå¯¹ç½‘é¡µç«¯è®¿é—®ã€ç•Œé¢ç°ä»£åŒ–ã€è·¨å¹³å°æ”¯æŒã€äº‘é›†æˆå’Œå®‰å…¨åˆè§„ç­‰èƒ½åŠ›çš„éœ€æ±‚æ—¥ç›Šè¿«åˆ‡ï¼Œä¼ ç»Ÿ .NET WinForms åº”ç”¨çš„ç°ä»£åŒ–è½¬å‹å·²åŠ¿åœ¨å¿…è¡Œã€‚<code>Blazor WebAssemblyï¼ˆWASMï¼‰</code> å‡­å€Ÿå…¶å¯å¤ç”¨ C# ä»£ç ä¸åŸºäºæµè§ˆå™¨çš„è·¨å¹³å°ç‰¹æ€§ï¼Œæˆä¸ºè¿ç§»è·¯å¾„ä¸­çš„çƒ­é—¨é€‰æ‹©ã€‚ç„¶è€Œå¤§é‡ WinForms åº”ç”¨ç¨‹åºä½¿ç”¨äº†<code>System.Drawing</code> æ¨¡å—è°ƒç”¨<code>GDI+</code>è¿›è¡Œå¤æ‚çš„è‡ªå®šä¹‰ç»˜å›¾å’Œäº¤äº’ï¼Œä½¿å¾—å¸¸è§„è¿ç§»æ–¹æ¡ˆéš¾ä»¥å¥æ•ˆï¼Œä»è€Œå¯¼è‡´ä¼—å¤šä¼ä¸šé¢ä¸´ç€é«˜æ˜‚çš„é‡å†™æˆæœ¬å’Œé£é™©ã€‚</p>
<p>ä»Šå¤©å¤§å§šç»™å¤§å®¶åˆ†äº«ä¸€ä¸ªä¸“é—¨è®¾è®¡ç”¨äºå¸®åŠ© WinForms åº”ç”¨ç¨‹åºè¿ç§»åˆ° Blazor WASM å¹³å°çš„é¡¹ç›®ï¼š<strong>MWGAï¼ˆMake WinForms Great Againï¼‰</strong> ã€‚</p>
<h2 data-id="heading-1">MWGA é¡¹ç›®ä»‹ç»</h2>
<p><strong>MWGAï¼ˆMake WinForms Great Againï¼‰</strong> æ˜¯ä¸€ä¸ªä¸“é—¨è®¾è®¡ç”¨äºå¸®åŠ© WinForms åº”ç”¨ç¨‹åºè¿ç§»åˆ° Blazor WASM å¹³å°çš„é¡¹ç›®ï¼Œå³ä½¿è¿™äº› WinForms åº”ç”¨ç¨‹åºä½¿ç”¨ GDI+ åŠŸèƒ½ï¼Œ<strong>MWGA</strong> é¡¹ç›®ä¹Ÿé¢„æœŸå°†å¯¹è¿™äº›ç¨‹åºæºç çš„ä¿®æ”¹é‡ä¸è¶…è¿‡10%ã€‚è¿™æå¤§çš„é™ä½ WinForms è½¯ä»¶ç°ä»£åŒ–çš„æˆæœ¬å’Œé£é™©ã€‚<strong>æ³¨æ„è¯¥é¡¹ç›®æ˜¯ä¸€ä¸ªå·¨å¤§çš„å·¥ç¨‹ç›®å‰è¿˜åœ¨é€æ­¥è§„åˆ’ã€å®Œå–„ä¸­ï¼Œå½“å‰å·²å¼€æºæ¼”ç¤ºé¡¹ç›®ï¼Œä¸»è¦ç”¨äºç»™å¤§å®¶æ¼”ç¤ºè¿ç§»æµç¨‹ä¸éªŒè¯å…¼å®¹æ€§</strong>ï¼ˆå¤§å®¶æœ‰æ›´å¥½çš„æƒ³æ³•æˆ–è§£å†³æ–¹æ¡ˆæ¬¢è¿å‰å¾€å¼€æºåœ°å€æ<strong>Issues</strong>ï¼‰ã€‚</p>
<ul>
<li><strong>å¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdcsoft-yyf%2FMWGA" target="_blank" title="https://github.com/dcsoft-yyf/MWGA" ref="nofollow noopener noreferrer">github.com/dcsoft-yyf/â€¦</a></strong></li>
</ul>
<h2 data-id="heading-2">WinForms ä»‹ç»</h2>
<p>Windows Formsï¼ˆç®€ç§° WinFormsï¼‰æ˜¯ä¸€ä¸ªç”¨äºæ„å»º Windows æ¡Œé¢åº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢æ¡†æ¶ã€‚å®ƒæ˜¯å¯¹ Windows åŸç”Ÿç”¨æˆ·ç•Œé¢åº“ï¼ˆå¦‚ User32 å’Œ GDI+ï¼‰çš„ .NET å°è£…ï¼Œå¹¶æä¾›äº† WinForms ç‰¹æœ‰çš„æ§ä»¶åŠå…¶ä»–åŠŸèƒ½ã€‚</p>
<h2 data-id="heading-3">åº”ç”¨åœºæ™¯</h2>
<ul>
<li><strong>ä¼ ç»Ÿ WinForms åº”ç”¨ç°ä»£åŒ–</strong>ï¼šå…¨çƒèŒƒå›´å†…å­˜åœ¨å¤§é‡åŸºäº WinForms å¼€å‘çš„ä¼ ç»Ÿæ¡Œé¢åº”ç”¨ï¼Œè¿™äº›åº”ç”¨é¢ä¸´ç•Œé¢è€åŒ–ã€è·¨å¹³å°æ”¯æŒå·®ç­‰é—®é¢˜ï¼Œæ€¥éœ€ç°ä»£åŒ–æ”¹é€ ã€‚</li>
<li><strong>ç½‘é¡µç«¯è®¿é—®éœ€æ±‚</strong>ï¼šéšç€ Web åº”ç”¨çš„æ™®åŠï¼Œç”¨æˆ·æœŸæœ›èƒ½å¤Ÿé€šè¿‡æµè§ˆå™¨è®¿é—®åŸæœ¬ä»…é™äºæ¡Œé¢ç«¯çš„åº”ç”¨ï¼Œæå‡ä½¿ç”¨çš„ä¾¿æ·æ€§å’Œçµæ´»æ€§ã€‚</li>
<li><strong>äº‘é›†æˆä¸å®‰å…¨åˆè§„</strong>ï¼šä¼ä¸šéœ€è¦å°†åº”ç”¨è¿ç§»è‡³äº‘ç«¯ï¼Œä»¥æ»¡è¶³æ•°æ®å®‰å…¨ã€åˆè§„æ€§è¦æ±‚ï¼Œå¹¶å®ç°æ›´å¥½çš„èµ„æºç®¡ç†å’Œæ‰©å±•æ€§ã€‚</li>
<li><strong>è·¨å¹³å°è®¿é—®éœ€æ±‚</strong>ï¼šåŸæœ¬ä»…æ”¯æŒ Windows çš„åº”ç”¨éœ€åœ¨ macOSã€Linux æˆ–ç§»åŠ¨è®¾å¤‡æµè§ˆå™¨ä¸­è¿è¡Œã€‚</li>
<li><strong>é™ä½é‡å†™æˆæœ¬ä¸æŠ€æœ¯é£é™©ï¼š</strong> é¿å…ä»é›¶å¼€å‘æ–° Web å‰ç«¯å¸¦æ¥çš„é«˜æˆæœ¬ã€é•¿å‘¨æœŸå’ŒåŠŸèƒ½é—æ¼é£é™©ã€‚</li>
</ul>
<h2 data-id="heading-4">æ¼”ç¤ºé¡¹ç›®æºä»£ç </h2>
<ul>
<li>è¿è¡Œç¯å¢ƒï¼š.NET 9.0</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2705aad52313470087728b3a6ad7ec6e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768262577&amp;x-signature=5aVqP1tVgtTcZ7y3cGDrOhqzMbU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2d70a828ac24ba8a4a462feb12876ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768262577&amp;x-signature=4vsFC3YtUs48gQdPWJIFblltOJA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">æ¼”ç¤ºé¡¹ç›®æ•ˆæœå±•ç¤º</h2>
<ul>
<li><strong>æ¼”ç¤ºé¡¹ç›®åœ¨çº¿è®¿é—®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdcsoft-yyf.github.io%2FMWGA%2FWinFormCalculator.html" target="_blank" title="https://dcsoft-yyf.github.io/MWGA/WinFormCalculator.html" ref="nofollow noopener noreferrer">dcsoft-yyf.github.io/MWGA/WinForâ€¦</a></strong></li>
</ul>
<h3 data-id="heading-6">WinForm è®¡ç®—å™¨é¡¹ç›®æ¼”ç¤ºï¼š</h3>
<p>ä¸‹é¢æ˜¯è¿˜æœªè¿ç§»åˆ° Blazor WASM å¹³å°çš„ WinForm è®¡ç®—å™¨é¡¹ç›®æ¼”ç¤ºæ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d43049710c80487fad9e126fdb35088e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768262577&amp;x-signature=2Rr26OD0REx1c%2BE0iAWb4WFLZng%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e97a39f8c8534c38a1b94548101523cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768262577&amp;x-signature=NfL33i79tlxBvp%2FSNw543YbnQCw%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">è¿ç§»åˆ° Blazor WASM å¹³å°æ¼”ç¤ºï¼š</h3>
<p>ä¸‹é¢æ˜¯å·²ç»é€šè¿‡ <strong>MWGA</strong> é¡¹ç›®è¿ç§»åˆ° Blazor WASM å¹³å°çš„ WinForm è®¡ç®—å™¨é¡¹ç›®æ¼”ç¤ºæ•ˆæœï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b639b063007c41ffab2d44497a1488e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768262577&amp;x-signature=KzNXnIPU0%2FVALYtEg3sZwLGSeNM%3D" alt="" loading="lazy"/></p>
<p><strong>Windows æµè§ˆå™¨å’Œè¿è¡Œæ•ˆæœï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3ebbf8c0f3148d3aeb593d63157a184~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768262577&amp;x-signature=LazBFm74e1Q5xqc%2BxH7AUWPItC4%3D" alt="" loading="lazy"/></p>
<p><strong>å®‰å“æ‰‹æœºæµè§ˆå™¨è¿è¡Œæ•ˆæœï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bedc5f1b27514b4cbaa6baf552bbde53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768262577&amp;x-signature=khx1W6sBJrwSFZDmZkAbMIiQAbo%3D" alt="" loading="lazy"/></p>
<p><strong>ç»“è®ºï¼š</strong></p>
<p>æˆ‘å®æµ‹åç¡®è®¤ï¼ŒåŒä¸€å¥—<code>Form.cs</code>å’Œ<code>Form.Designer.cs</code>ä»£ç ï¼Œåœ¨ WinForms ç¯å¢ƒä¸‹å’Œ Blazor WASM ç¯å¢ƒä¸‹ï¼Œç¨‹åºå…·æœ‰ç›¸åŒçš„ç”¨æˆ·ç•Œé¢å’Œç›¸åŒçš„è¿è¡Œé€»è¾‘ã€‚<code>button.Click</code>äº‹ä»¶å’Œ<code>form.Resize</code>äº‹ä»¶å¤„ç†ä¹Ÿç¬¦åˆé¢„æœŸã€‚åˆæ­¥å±•ç¤ºäº†å°† WinForms ä»£ç æ— ä¿®æ”¹çš„ç§»æ¤åˆ° Blazor WASM ä¸­çš„èƒ½åŠ›ã€‚è¿™æ˜¯<code>MWGA</code>çš„ç¬¬ä¸€æ»´è¡€ï¼Œè™½ç„¶è¿˜æœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¿˜æ˜¯ä¸ºå¿«é€Ÿä½æˆæœ¬çš„è¿ç§» Winforms ç¨‹åºå¸¦æ¥æ˜ç¡®çš„æ›™å…‰ã€‚</p>
<h2 data-id="heading-8">æ¼”ç¤ºé¡¹ç›®æ ¸å¿ƒä»£ç </h2>
<p><strong>Program.csï¼š</strong> <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7140f5b61bf4394aacf6e98d681bf64~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768262577&amp;x-signature=Y29LDBQprQ3ZDJ%2F7DTuO4zKcWnM%3D" alt="" loading="lazy"/></p>
<p><strong>DCWasmWinFormEngine.csï¼š</strong></p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">namespace</span>Â <span class="hljs-title">DCSoft.WinForm2WASM</span>
{
Â Â Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-keyword">partial</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title">DCWasmWinFormEngine</span>
Â Â Â Â {
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â <span class="hljs-doctag">&lt;summary&gt;</span></span>
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â å°è£…Â InvokeÂ è°ƒç”¨ï¼Œå¼ºåˆ¶ä½¿ç”¨ã€Œæ ‡è¯†ç¬¦Â +Â paramsÂ object[]ã€é‡è½½</span>
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â <span class="hljs-doctag">&lt;/summary&gt;</span></span>
Â Â Â Â Â Â Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">static</span>Â TÂ <span class="hljs-title">InvokeJSFunction</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-built_in">string</span>Â identifier,Â <span class="hljs-keyword">params</span>Â <span class="hljs-built_in">object</span>?[]?Â args</span>)</span>
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">//Â ç›´æ¥è°ƒç”¨Â paramsÂ é‡è½½ï¼ˆå› ä¸ºÂ argsÂ æ˜¯æ˜¾å¼çš„Â object[]ï¼‰</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â _jsRuntime.Invoke&lt;T&gt;(identifier,Â args);
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â [<span class="hljs-meta">JSInvokable</span>]
Â Â Â Â Â Â Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">static</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title">InstallFontNames</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>[]Â fontNames</span>)</span>
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â WinForm2WASMPublish.SetFamilies(fontNames);
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â [<span class="hljs-meta">JSInvokable</span>]
Â Â Â Â Â Â Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">static</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title">AddStandardControlTypeName</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>Â typeName</span>)</span>
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â WinForm2WASMPublish.AddStandardControlTypeName(typeName);
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">static</span>Â Microsoft.JSInterop.JSInProcessRuntimeÂ _jsRuntime;
Â Â Â Â Â Â Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">static</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title">Start</span>(<span class="hljs-params">Microsoft.JSInterop.JSInProcessRuntimeÂ rt</span>)</span>
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â (rtÂ ==Â <span class="hljs-literal">null</span>)
Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">throw</span>Â <span class="hljs-keyword">new</span>Â ArgumentNullException(<span class="hljs-string">"rt"</span>);
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â _jsRuntimeÂ =Â rt;
Â Â Â Â Â Â Â Â Â Â Â Â WinForm2WASMPublish.Start(<span class="hljs-keyword">new</span>Â MyJSRuntime(rt),Â <span class="hljs-keyword">typeof</span>(DCWasmWinFormEngine).Assembly);
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title">MyJSRuntime</span>Â :<span class="hljs-title">DCSoft.IDCJSRuntime</span>
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-title">MyJSRuntime</span>(<span class="hljs-params">JSInProcessRuntimeÂ rt</span>)</span>
Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>(rtÂ ==Â <span class="hljs-literal">null</span>Â )
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">throw</span>Â <span class="hljs-keyword">new</span>Â ArgumentNullException(<span class="hljs-string">"rt"</span>);
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">this</span>._rtÂ =Â rt;
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">private</span>Â JSInProcessRuntimeÂ _rtÂ =Â <span class="hljs-literal">null</span>;
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â TÂ <span class="hljs-title">Invoke</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-built_in">string</span>Â identifier,Â <span class="hljs-keyword">params</span>Â <span class="hljs-built_in">object</span>?[]?Â args</span>)</span>
Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â _rt.Invoke&lt;T&gt;(identifier,Â args);
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-title">ValueTask</span>&lt;<span class="hljs-title">T</span>&gt;Â <span class="hljs-title">InvokeAsync</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-built_in">string</span>Â identifier,Â <span class="hljs-keyword">params</span>Â <span class="hljs-built_in">object</span>?[]?Â args</span>)</span>
Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â _rt.InvokeAsync&lt;T&gt;(identifier,Â args);
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title">InvokeVoidAsync</span>(<span class="hljs-params"><span class="hljs-built_in">string</span>Â identifier,Â <span class="hljs-keyword">params</span>Â <span class="hljs-built_in">object</span>?[]?Â args</span>)</span>
Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â _rt.InvokeVoidAsync(identifier,Â args);
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â <span class="hljs-doctag">&lt;summary&gt;</span></span>
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â è®¾ç½®å±å¹•å¤§å°</span>
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â <span class="hljs-doctag">&lt;/summary&gt;</span></span>
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â <span class="hljs-doctag">&lt;paramÂ name="width"&gt;</span>å®½åº¦<span class="hljs-doctag">&lt;/param&gt;</span></span>
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â <span class="hljs-doctag">&lt;paramÂ name="height"&gt;</span>é«˜åº¦<span class="hljs-doctag">&lt;/param&gt;</span></span>
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â <span class="hljs-doctag">&lt;paramÂ name="defaultFontName"&gt;</span>é»˜è®¤å­—ä½“åç§°<span class="hljs-doctag">&lt;/param&gt;</span></span>
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â <span class="hljs-doctag">&lt;paramÂ name="defaultFontSize"&gt;</span>Pointä¸ºå•ä½çš„é»˜è®¤å­—ä½“å¤§å°<span class="hljs-doctag">&lt;/param&gt;</span></span>
Â Â Â Â Â Â Â Â [<span class="hljs-meta">JSInvokable</span>]
Â Â Â Â Â Â Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">static</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title">SetScreenSize</span>(<span class="hljs-params">
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">int</span>Â width,
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">int</span>Â height,
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">string</span>Â defaultFontName,
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">float</span>Â defaultFontSize</span>)</span>
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â WinForm2WASMPublish.SetScreenSize(width,Â height,Â defaultFontName,Â defaultFontSize);
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â [<span class="hljs-meta">JSInvokable</span>]
Â Â Â Â Â Â Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">static</span>Â <span class="hljs-built_in">int</span>Â <span class="hljs-title">PackageArgumentObjectToHandle</span>(<span class="hljs-params">Â JsonNodeÂ jsonÂ </span>)</span>
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â WinForm2WASMPublish.PackageToHandle(json);
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â [<span class="hljs-meta">JSInvokable</span>]
Â Â Â Â Â Â Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">static</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title">SendMessage_WM_WINDOWPOSCHANGED</span>(<span class="hljs-params">Â <span class="hljs-built_in">int</span>Â handleÂ ,Â JsonObjectÂ argsÂ </span>)</span>
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â WinForm2WASMPublish.SendMessage_WM_WINDOWPOSCHANGED(handle,Â args);
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â <span class="hljs-doctag">&lt;summary&gt;</span></span>
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â å‘é€æ¶ˆæ¯åˆ°æ§ä»¶</span>
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â <span class="hljs-doctag">&lt;/summary&gt;</span></span>
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â <span class="hljs-doctag">&lt;paramÂ name="handle"&gt;</span>æ§ä»¶å¥æŸ„<span class="hljs-doctag">&lt;/param&gt;</span></span>
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â <span class="hljs-doctag">&lt;paramÂ name="msg"&gt;</span>æ¶ˆæ¯ç±»å‹<span class="hljs-doctag">&lt;/param&gt;</span></span>
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â <span class="hljs-doctag">&lt;paramÂ name="wParam"&gt;</span>å‚æ•°1<span class="hljs-doctag">&lt;/param&gt;</span></span>
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â <span class="hljs-doctag">&lt;paramÂ name="lParam"&gt;</span>å‚æ•°2<span class="hljs-doctag">&lt;/param&gt;</span></span>
Â Â Â Â Â Â Â Â [<span class="hljs-meta">JSInvokable</span>]
Â Â Â Â Â Â Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">async</span>Â <span class="hljs-keyword">static</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title">SendMessageToControl</span>(<span class="hljs-params"><span class="hljs-built_in">int</span>Â handleÂ ,Â <span class="hljs-built_in">int</span>Â msg,Â <span class="hljs-built_in">int</span>Â wParam,Â <span class="hljs-built_in">int</span>Â lParam</span>)</span>
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â WinForm2WASMPublish.SendMessageToControl(handle,Â msg,Â wParam,Â lParam);Â 
Â Â Â Â Â Â Â Â }

Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â <span class="hljs-doctag">&lt;summary&gt;</span></span>
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â å¤„ç†å·²ç»å‘é€çš„æ¶ˆæ¯</span>
Â Â Â Â Â Â Â Â <span class="hljs-comment"><span class="hljs-doctag">///</span>Â <span class="hljs-doctag">&lt;/summary&gt;</span></span>
Â Â Â Â Â Â Â Â [<span class="hljs-meta">JSInvokable</span>]
Â Â Â Â Â Â Â Â <span class="hljs-function"><span class="hljs-keyword">public</span>Â <span class="hljs-keyword">static</span>Â <span class="hljs-keyword">void</span>Â <span class="hljs-title">HandlePostedMessage</span>()</span>
Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â WinForm2WASMPublish.HandlePostedMessage();
Â Â Â Â Â Â Â Â }
Â Â Â Â }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”Ÿäº§ç¯å¢ƒä½¿ç”¨C++å®ç°ç®—æ³•çš„å¿…è¦æ€§]]></title>    <link>https://juejin.cn/post/7591792747775082506</link>    <guid>https://juejin.cn/post/7591792747775082506</guid>    <pubDate>2026-01-06T00:13:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591792747775082506" data-draft-id="7591728734982881307" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”Ÿäº§ç¯å¢ƒä½¿ç”¨C++å®ç°ç®—æ³•çš„å¿…è¦æ€§"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-06T00:13:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‡ªç”±ç”Ÿé•¿2024"/> <meta itemprop="url" content="https://juejin.cn/user/1591748569862670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”Ÿäº§ç¯å¢ƒä½¿ç”¨C++å®ç°ç®—æ³•çš„å¿…è¦æ€§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748569862670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‡ªç”±ç”Ÿé•¿2024
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T00:13:00.000Z" title="Tue Jan 06 2026 00:13:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®ï¼šä½¿ç”¨tensorflowå†™çš„ç®—æ³•ï¼Œä¸ºå•¥è¦ä½¿ç”¨C++éƒ¨ç½²å‘¢ï¼Ÿ</h2>
<p><strong>ç®—æ³•å·¥ç¨‹åŒ–çš„æ ¸å¿ƒçŸ›ç›¾</strong>ï¼šæ—¢ç„¶æ¨¡å‹æ˜¯ç”¨ TensorFlowï¼ˆPythonï¼‰å†™çš„ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç”¨ C++ æ¥éƒ¨ç½²ï¼Ÿè¿™èƒŒåæ¶‰åŠæ€§èƒ½ã€èµ„æºã€ç³»ç»Ÿé›†æˆå’Œç”Ÿäº§ç¯å¢ƒçš„ç°å®éœ€æ±‚ã€‚</p>
<p>ä¸‹é¢ä» <strong>5 ä¸ªæ ¸å¿ƒç»´åº¦</strong>è§£é‡ŠåŸå› ï¼š</p>
<p><strong>1 æ€§èƒ½ï¼šC++ èƒ½æ¦¨å¹²ç¡¬ä»¶æé™</strong></p>
<ul>
<li><strong>ä½å»¶è¿Ÿ</strong>ï¼šC++ æ²¡æœ‰ Python çš„ GILï¼ˆå…¨å±€è§£é‡Šå™¨é”ï¼‰ã€åƒåœ¾å›æ”¶ã€åŠ¨æ€ç±»å‹å¼€é”€ã€‚åœ¨é«˜å¹¶å‘ã€ä½å»¶è¿Ÿåœºæ™¯ï¼ˆå¦‚å¹¿å‘Šç‚¹å‡»ç‡é¢„ä¼°ã€å®æ—¶ç¿»è¯‘ï¼‰ï¼Œ<strong>C++ æ¨ç†æ¯” Python å¿« 2~10 å€</strong>å¾ˆå¸¸è§ã€‚</li>
<li><strong>CPU/GPU åˆ©ç”¨ç‡æ›´é«˜</strong>ï¼šC++ å¯ä»¥ç²¾ç»†æ§åˆ¶å†…å­˜å¸ƒå±€ï¼ˆå¦‚è¿ç»­å†…å­˜å—ï¼‰ã€SIMD æŒ‡ä»¤ã€çº¿ç¨‹æ± ï¼Œé¿å… Python çš„å†…å­˜ç¢ç‰‡å’Œè°ƒåº¦å¼€é”€ã€‚</li>
</ul>
<p>å¯¹å»¶è¿Ÿæ•æ„Ÿçš„ä¸šåŠ¡ï¼ˆé‡‘èäº¤æ˜“ã€æ¸¸æˆ AIã€è½¦è½½ç³»ç»Ÿï¼‰ï¼ŒC++ æ˜¯åˆšéœ€ã€‚</p>
<p><strong>2 ç¨³å®šæ€§ä¸å¯æ§æ€§</strong></p>
<p>Python çš„åŠ¨æ€ç‰¹æ€§ï¼ˆå¦‚ monkey patchã€è¿è¡Œæ—¶ importï¼‰åœ¨ç”Ÿäº§ç¯å¢ƒæ˜¯â€œå®šæ—¶ç‚¸å¼¹â€ã€‚</p>
<p>æ­£å› ä¸ºè¿™äº›è¯­è¨€æ›´åŠ é«˜çº§ï¼Œæä¾›äº†æ›´åŠ æ˜“ç”¨çš„åŠŸèƒ½ï¼Œå¼€å‘æ–¹ä¾¿ï¼Œä½†æ˜¯å¯¹äºç‰¹å®šåœºåˆï¼Œæ¯”å¦‚éƒ¨ç½²è¿è¡Œï¼Œåè€Œæˆäº†ä¼˜åŒ–çš„è´Ÿæ‹…ã€‚</p>
<p>C++ ç¼–è¯‘æœŸæ£€æŸ¥å¼ºï¼Œå†…å­˜ç®¡ç†æ˜ç¡®ï¼ˆRAIIï¼‰ï¼Œæ›´å®¹æ˜“åšï¼š</p>
<ul>
<li>
<p>é™æ€åˆ†æ</p>
</li>
<li>
<p>å†…å­˜æ³„æ¼æ£€æµ‹</p>
</li>
<li>
<p>ç¡®å®šæ€§è¡Œä¸ºï¼ˆDeterminismï¼‰</p>
</li>
</ul>
<p><strong>3 èµ„æºå ç”¨ï¼šæ›´çœå†…å­˜ã€æ›´å°‘ä¾èµ–</strong></p>
<p>Python è¿›ç¨‹æœ¬èº«å°±è¦å‡ ç™¾ MB å†…å­˜ï¼ˆåŠ è½½ tensorflowã€numpy ç­‰ï¼‰ï¼Œè€Œ C++ æ¨ç†æœåŠ¡å¯ä»¥åšåˆ° &lt; 50MBã€‚</p>
<p>åœ¨è¾¹ç¼˜è®¾å¤‡ï¼ˆæ‰‹æœºã€IoTã€è½¦è½½èŠ¯ç‰‡ï¼‰æˆ–å¤§è§„æ¨¡é›†ç¾¤ï¼ˆä¸‡çº§å®¹å™¨ï¼‰ï¼Œå†…å­˜èŠ‚çœ = æˆæœ¬ä¸‹é™ã€‚
C++ éƒ¨ç½²é€šå¸¸åªé“¾æ¥å¿…è¦çš„åº“ï¼ˆå¦‚ libtensorflow_cc.soï¼‰ï¼Œè€Œ Python éœ€è¦æ•´ä¸ªè§£é‡Šå™¨ + pip åŒ…ç”Ÿæ€ã€‚</p>
<p>èµ„æºå—é™ç¯å¢ƒï¼ˆç«¯ä¾§ã€è¾¹ç¼˜ã€é«˜å¯†åº¦éƒ¨ç½²ï¼‰ï¼ŒC++ æ›´ç»æµã€‚</p>
<blockquote>
<p>æ€»ç»“å‰ä¸‰ç‚¹åŸå› ï¼Œå¯ä»¥çœ‹å‡ºï¼Œè¯­è¨€çš„ç‰¹æ€§æ˜¯æ ¹æœ¬å·®å¼‚ï¼Œå› ä¸ºC++é›†æˆäº†Cè¯­è¨€ï¼Œå®ƒè¶³å¤ŸåŸå§‹ï¼Œæ²¡æœ‰å¤ªå¤šé«˜çº§ç‰¹æ€§ï¼ˆå†…å­˜è‡ªåŠ¨å›æ”¶ï¼‰ï¼Œæ‰€ä»¥å¯æ§ï¼Œæ€§èƒ½ä¹Ÿæ¶ˆè€—æœ€å°‘ï¼Œ1ï¼Œ2ï¼Œ3å…¶å®éƒ½è¯´çš„æ˜¯1ä¸ªåŸå› ã€‚</p>
</blockquote>
<p><strong>4 ç³»ç»Ÿé›†æˆæ€§èƒ½ï¼šåµŒå…¥ç°æœ‰ C++ ç”Ÿæ€</strong></p>
<p>å¾ˆå¤šå…¬å¸æ ¸å¿ƒç³»ç»Ÿæ˜¯ C++ å†™çš„ï¼ˆå¦‚æ¸¸æˆå¼•æ“ã€é«˜é¢‘äº¤æ˜“ç³»ç»Ÿã€æ•°æ®åº“ã€è‡ªåŠ¨é©¾é©¶ä¸­é—´ä»¶ï¼‰ã€‚</p>
<p>å¦‚æœæ¨ç†æœåŠ¡ä¹Ÿç”¨ C++ï¼Œå¯ä»¥ç›´æ¥ ä»¥å†…å­˜å‡½æ•°è°ƒç”¨æ–¹å¼é›†æˆï¼Œé¿å…ï¼š</p>
<ul>
<li>è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰</li>
<li>gRPC/HTTP åºåˆ—åŒ–å¼€é”€</li>
<li>ç½‘ç»œæŠ–åŠ¨é£é™©</li>
</ul>
<p>è‡ªåŠ¨é©¾é©¶æ„ŸçŸ¥æ¨¡å—ï¼ˆC++ï¼‰éœ€è¦å®æ—¶è°ƒç”¨ NLP æ¨¡å‹ç†è§£è¯­éŸ³æŒ‡ä»¤ã€‚</p>
<p>å¦‚æœç”¨ Python æœåŠ¡ï¼Œæ¯å¸§éƒ½è¦èµ°ç½‘ç»œ â†’ å¢åŠ  5~10ms å»¶è¿Ÿ â†’ å¯èƒ½é”™è¿‡åˆ¹è½¦æ—¶æœºã€‚</p>
<p>ç”¨ C++ ç›´æ¥è°ƒç”¨æ¨¡å‹ â†’ é›¶æ‹·è´ã€é›¶ç½‘ç»œ â†’ å®‰å…¨å¯é ã€‚</p>
<p><strong>5 TensorFlow æœ¬èº«å°±æ”¯æŒ C++ éƒ¨ç½²</strong></p>
<p>TensorFlow ä¸åªæ˜¯ Python åº“ï¼Œå®ƒçš„åº•å±‚æ˜¯ C++ å†™çš„ï¼Œå¹¶æä¾›äº† å®˜æ–¹ C++ APIï¼š<br/>
TensorFlow C++ APIï¼šç›´æ¥åŠ è½½ SavedModelï¼Œæ‰§è¡Œæ¨ç†<br/>
TensorRTï¼ˆNVIDIAï¼‰ï¼šå°† TF æ¨¡å‹è½¬ä¸ºé«˜åº¦ä¼˜åŒ–çš„ C++ å¼•æ“ï¼ˆGPU ä¸“ç”¨ï¼‰<br/>
TF Liteï¼šè½»é‡çº§ C++ æ¨ç†åº“ï¼ˆé€‚åˆç§»åŠ¨ç«¯/åµŒå…¥å¼ï¼‰</p>
<blockquote>
<p>4å’Œ5è¯´çš„æ˜¯ç”Ÿæ€åŸå› ï¼ŒåŒ…æ‹¬å¤–éƒ¨ç”Ÿæ€å’Œå†…éƒ¨ç”Ÿæ€ã€‚</p>
</blockquote>
<h2 data-id="heading-1">é—®ï¼šæ˜¯ä¸æ˜¯æ‰€æœ‰åœºæ™¯éƒ½è¦ç”¨ C++ï¼Ÿ</h2>
<p>ä¸æ˜¯ï¼ ä»¥ä¸‹æƒ…å†µç”¨ Python æ›´åˆé€‚ï¼š</p>
<p>å¿«é€ŸåŸå‹éªŒè¯ï¼ˆPoCï¼‰<br/>
æ‰¹å¤„ç†ä»»åŠ¡ï¼ˆç¦»çº¿åˆ†æï¼Œä¸è¿½æ±‚ä½å»¶è¿Ÿï¼‰<br/>
æ¨¡å‹é¢‘ç¹è¿­ä»£ï¼Œå·¥ç¨‹å›¢é˜ŸäººåŠ›æœ‰é™<br/>
ä½¿ç”¨ TF Serving / Triton ç­‰æ‰˜ç®¡æœåŠ¡ï¼ˆå®ƒä»¬å†…éƒ¨å…¶å®ä¹Ÿæ˜¯ C++ï¼‰</p>
<h2 data-id="heading-2">ä½¿ç”¨C++éƒ¨ç½²æ¨¡å‹çš„æ ¸å¿ƒæŠ€èƒ½</h2>
<p>TensorFlow C++ API æˆ– ONNX Runtime C++ï¼ˆå¦‚æœæ¨¡å‹å¯è½¬æ¢ï¼‰<br/>
SavedModel æ ¼å¼ çš„åŠ è½½ä¸è¾“å…¥/è¾“å‡ºå¼ é‡å¤„ç†<br/>
æ€§èƒ½ profilingï¼ˆå¦‚ perfã€nsightï¼‰å®šä½ç“¶é¢ˆ</p>
<h2 data-id="heading-3">æ€»ç»“ï¼šc++è¿è¡Œtensorflowç®—æ³•</h2>
<p>TensorFlow çš„ç®—æ³•ï¼ˆPython è®­ç»ƒçš„æ¨¡å‹ï¼‰ä¸éœ€è¦â€œç¿»è¯‘â€æˆ C++ï¼Œè€Œæ˜¯ï¼š</p>
<p>ç”¨ C++ ç›´æ¥åŠ è½½è®­ç»ƒå¥½çš„æ¨¡å‹æ–‡ä»¶ï¼Œè°ƒç”¨ TensorFlow çš„ C++ æ¨ç†æ¥å£æ‰§è¡Œé¢„æµ‹ã€‚</p>
<p>pythonå…³é”®ä»£ç å®ä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python">model.save(<span class="hljs-string">"my_model"</span>)  <span class="hljs-comment"># ç”Ÿæˆ my_model/ ç›®å½•ï¼ˆå« .pb æ–‡ä»¶å’Œ variablesï¼‰</span>
</code></pre>
<p>c++å…³é”®ä»£ç å®ä¾‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"tensorflow/cc/saved_model/loader.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"tensorflow/cc/serving/saved_model_bundle.h"</span></span>

tensorflow::SavedModelBundle bundle;
tensorflow::<span class="hljs-built_in">LoadSavedModel</span>(..., <span class="hljs-string">"my_model"</span>, ..., &amp;bundle);

<span class="hljs-comment">// å‡†å¤‡è¾“å…¥ Tensorï¼ˆä¾‹å¦‚ shape=[1, 128] çš„ float è¾“å…¥ï¼‰</span>
<span class="hljs-function">tensorflow::Tensor <span class="hljs-title">input</span><span class="hljs-params">(...)</span></span>;

<span class="hljs-comment">// æ‰§è¡Œæ¨ç†</span>
std::vector&lt;tensorflow::Tensor&gt; outputs;
bundle.session-&gt;<span class="hljs-built_in">Run</span>({{<span class="hljs-string">"input_tensor_name"</span>, input}}, {<span class="hljs-string">"output_tensor_name"</span>}, {}, &amp;outputs);
</code></pre>
<p>ç¼–è¯‘é“¾æ¥ TensorFlow C++ åº“ï¼ˆéœ€æå‰ç¼–è¯‘æˆ–ä¸‹è½½ libtensorflow_cc.soï¼‰</p>
<p><strong>é‡ç‚¹ï¼š</strong><br/>
ä¸æ˜¯é‡å†™ç®—æ³•ï¼Œè€Œæ˜¯å¤ç”¨å·²è®­ç»ƒå¥½çš„æ¨¡å‹<br/>
C++ åªè´Ÿè´£ï¼šåŠ è½½æ¨¡å‹ + æ„é€ è¾“å…¥ + è°ƒç”¨æ¨ç† + è§£æè¾“å‡º<br/>
æ¨¡å‹ç»“æ„ã€æƒé‡å…¨éƒ¨ç”± SavedModel æ–‡ä»¶æä¾›ï¼Œæ— éœ€æ‰‹å†™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java 21æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªæ˜¾è‘—æå‡å¼€å‘æ•ˆç‡çš„è¯­æ³•ç³–ä¸åº”ç”¨åœºæ™¯]]></title>    <link>https://juejin.cn/post/7591703562134487074</link>    <guid>https://juejin.cn/post/7591703562134487074</guid>    <pubDate>2026-01-06T00:16:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591703562134487074" data-draft-id="7591702898080710671" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java 21æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªæ˜¾è‘—æå‡å¼€å‘æ•ˆç‡çš„è¯­æ³•ç³–ä¸åº”ç”¨åœºæ™¯"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-06T00:16:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java 21æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªæ˜¾è‘—æå‡å¼€å‘æ•ˆç‡çš„è¯­æ³•ç³–ä¸åº”ç”¨åœºæ™¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T00:16:48.000Z" title="Tue Jan 06 2026 00:16:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Java 21æ–°ç‰¹æ€§å®æˆ˜ï¼š5ä¸ªæ˜¾è‘—æå‡å¼€å‘æ•ˆç‡çš„è¯­æ³•ç³–ä¸åº”ç”¨åœºæ™¯</strong></h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>Javaä½œä¸ºä¸€é—¨å†ç»20å¤šå¹´æ¼”è¿›çš„ç¼–ç¨‹è¯­è¨€ï¼Œå§‹ç»ˆä¿æŒç€å¼ºå¤§çš„ç”Ÿå‘½åŠ›ã€‚2023å¹´9æœˆï¼ŒOracleæ­£å¼å‘å¸ƒäº†Java 21ï¼Œè¿™æ˜¯ä¸€ä¸ªé•¿æœŸæ”¯æŒï¼ˆLTSï¼‰ç‰ˆæœ¬ï¼Œå¸¦æ¥äº†è®¸å¤šä»¤äººå…´å¥‹çš„æ–°ç‰¹æ€§ã€‚å…¶ä¸­ï¼Œä¸€äº›è¯­æ³•ç³–ï¼ˆSyntactic Sugarï¼‰çš„å¼•å…¥æå¤§åœ°æå‡äº†å¼€å‘è€…çš„ç¼–ç æ•ˆç‡å’Œä»£ç å¯è¯»æ€§ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Java 21ä¸­5ä¸ªæœ€å…·å®ç”¨ä»·å€¼çš„è¯­æ³•ç³–ç‰¹æ€§ï¼Œå¹¶ç»“åˆå®é™…åº”ç”¨åœºæ™¯å±•ç¤ºå®ƒä»¬å¦‚ä½•ç®€åŒ–ä»£ç ã€å‡å°‘æ¨¡æ¿ä»£ç ï¼ˆBoilerplate Codeï¼‰å¹¶æå‡å¼€å‘æ•ˆç‡ã€‚æ— è®ºä½ æ˜¯Javaåˆå­¦è€…è¿˜æ˜¯èµ„æ·±å¼€å‘è€…ï¼Œè¿™äº›æ–°ç‰¹æ€§éƒ½å°†ä¸ºä½ çš„å·¥å…·ç®±å¢æ·»åˆ©å™¨ã€‚</p>
<hr/>
<h3 data-id="heading-2">1. Switchè¡¨è¾¾å¼æ¨¡å¼åŒ¹é…ï¼ˆPattern Matching for Switchï¼‰</h3>
<h4 data-id="heading-3">ç‰¹æ€§è§£æ</h4>
<p>Java 21è¿›ä¸€æ­¥å®Œå–„äº†<code>switch</code>è¡¨è¾¾å¼çš„æ¨¡å¼åŒ¹é…èƒ½åŠ›ï¼Œå…è®¸åœ¨<code>case</code>æ ‡ç­¾ä¸­ç›´æ¥ä½¿ç”¨ç±»å‹æ¨¡å¼ï¼ˆType Patternsï¼‰å’Œå®ˆå«æ¡ä»¶ï¼ˆGuardsï¼‰ã€‚è¿™æ˜¯å¯¹Java 17ä¸­é¢„è§ˆç‰¹æ€§çš„æœ€ç»ˆå®šç¨¿ã€‚</p>
<h4 data-id="heading-4">è¯­æ³•ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Hello, Java 21"</span>;

<span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">switch</span> (obj) {
    <span class="hljs-keyword">case</span> Integer i -&gt; <span class="hljs-string">"Integer: "</span> + i;
    <span class="hljs-keyword">case</span> String s &amp;&amp; s.length() &gt; <span class="hljs-number">5</span> -&gt; <span class="hljs-string">"Long String: "</span> + s;
    <span class="hljs-keyword">case</span> String s -&gt; <span class="hljs-string">"String: "</span> + s;
    <span class="hljs-keyword">default</span> -&gt; <span class="hljs-string">"Unknown"</span>;
};
</code></pre>
<h4 data-id="heading-5">åº”ç”¨åœºæ™¯</h4>
<ul>
<li><strong>å¤šæ€å¤„ç†</strong>ï¼šç®€åŒ–åŸºäºç±»å‹çš„å¤šåˆ†æ”¯é€»è¾‘ï¼Œé¿å…é¢‘ç¹çš„<code>instanceof</code>æ£€æŸ¥å’Œå¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚</li>
<li><strong>æ•°æ®è§£æ</strong>ï¼šåœ¨å¤„ç†JSONæˆ–XMLç­‰åŠ¨æ€æ•°æ®æ—¶ï¼Œå¯ä»¥æ›´ä¼˜é›…åœ°åŒ¹é…å’Œå¤„ç†ä¸åŒç±»å‹çš„æ•°æ®èŠ‚ç‚¹ã€‚</li>
</ul>
<h4 data-id="heading-6">ä¼˜åŠ¿</h4>
<ul>
<li><strong>ä»£ç ç®€æ´æ€§</strong>ï¼šå‡å°‘äº†å†—ä½™çš„ç±»å‹æ£€æŸ¥å’Œè½¬æ¢ä»£ç ã€‚</li>
<li><strong>å¯è¯»æ€§</strong>ï¼šé€šè¿‡ç›´è§‚çš„æ¨¡å¼åŒ¹é…è¡¨è¾¾æ„å›¾ï¼Œé€»è¾‘æ›´åŠ æ¸…æ™°ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-7">2. Recordæ¨¡å¼çš„è§£æ„ï¼ˆRecord Patternsï¼‰</h3>
<h4 data-id="heading-8">ç‰¹æ€§è§£æ</h4>
<p>Recordæ˜¯Java 16å¼•å…¥çš„ä¸€ç§ä¸å¯å˜æ•°æ®è½½ä½“ç±»ã€‚Java 21è¿›ä¸€æ­¥æ‰©å±•äº†Recordçš„åŠŸèƒ½ï¼Œæ”¯æŒåœ¨æ¨¡å¼åŒ¹é…ä¸­ç›´æ¥è§£æ„Recordçš„å­—æ®µå€¼ã€‚</p>
<h4 data-id="heading-9">è¯­æ³•ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">record</span> <span class="hljs-title class_">Point</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> {}

<span class="hljs-type">Point</span> <span class="hljs-variable">p</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Point</span>(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>);

<span class="hljs-keyword">if</span> (p <span class="hljs-keyword">instanceof</span> <span class="hljs-title function_">Point</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span>) {
    System.out.println(<span class="hljs-string">"x: "</span> + x + <span class="hljs-string">", y: "</span> + y);
}
</code></pre>
<h4 data-id="heading-10">åº”ç”¨åœºæ™¯</h4>
<ul>
<li><strong>DTOå¤„ç†</strong>ï¼šå¿«é€Ÿæå–æ•°æ®ä¼ è¾“å¯¹è±¡ï¼ˆDTOï¼‰ä¸­çš„å­—æ®µå€¼ã€‚</li>
<li><strong>æ¨¡å¼åŒ¹é…ç»„åˆ</strong>ï¼šä¸<code>switch</code>è¡¨è¾¾å¼ç»“åˆä½¿ç”¨ï¼Œå®ç°å¤æ‚æ•°æ®ç»“æ„çš„æ·±åº¦åŒ¹é…å’Œè§£æ„ã€‚</li>
</ul>
<h4 data-id="heading-11">ä¼˜åŠ¿</h4>
<ul>
<li><strong>å‡å°‘æ ·æ¿ä»£ç </strong>ï¼šæ— éœ€æ‰‹åŠ¨è°ƒç”¨è®¿é—®å™¨æ–¹æ³•å³å¯è·å–å­—æ®µå€¼ã€‚</li>
<li><strong>å¢å¼ºè¡¨è¾¾åŠ›</strong>ï¼šç›´æ¥é€šè¿‡æ¨¡å¼å£°æ˜å˜é‡çš„ç»‘å®šå…³ç³»ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-12">3. Sequenced Collections API</h3>
<h4 data-id="heading-13">ç‰¹æ€§è§£æ</h4>
<p>Java 21å¼•å…¥äº†æ–°çš„<code>SequencedCollection</code>ã€<code>SequencedSet</code>å’Œ<code>SequencedMap</code>æ¥å£ï¼Œä¸ºæœ‰åºé›†åˆæä¾›äº†ä¸€ç»„ç»Ÿä¸€çš„æ“ä½œæ–¹æ³•ï¼Œå¦‚è·å–é¦–å°¾å…ƒç´ ã€åå‘è§†å›¾ç­‰ã€‚</p>
<h4 data-id="heading-14">è¯­æ³•ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java">List&lt;Integer&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(List.of(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, â€”));
<span class="hljs-type">int</span> <span class="hljs-variable">first</span> <span class="hljs-operator">=</span> list.getFirst(); <span class="hljs-comment">// JavaÂ 21æ–°å¢æ–¹æ³•</span>
<span class="hljs-type">int</span> <span class="hljs-variable">last</span> <span class="hljs-operator">=</span> list.getLast();
List&lt;Integer&gt; reversed = list.reversed();
</code></pre>
<p>####Â åº”ç”¨åœºæ™¯</p>
<ul>
<li><strong>é˜Ÿåˆ—å’Œæ ˆæ“ä½œ</strong>ï¼šç®€åŒ–é¦–å°¾å…ƒç´ çš„è®¿é—®å’Œä¿®æ”¹é€»è¾‘ã€‚</li>
<li><strong>ç®—æ³•å®ç°</strong>ï¼šåœ¨éœ€è¦åå‘éå†æˆ–å¤„ç†è¾¹ç•Œå…ƒç´ çš„åœºæ™¯ä¸­å‡å°‘å†—ä½™ä»£ç ã€‚</li>
</ul>
<p>####Â ä¼˜åŠ¿
-<strong>APIæ ‡å‡†åŒ–</strong>:ç»Ÿä¸€äº†ä¸åŒé›†åˆç±»å‹(å¦‚List.Deque)çš„é¦–å°¾æ“ä½œæ–¹æ³•.
-<strong>åŠŸèƒ½å¢å¼º</strong>:æ–°å¢reversed()æ–¹æ³•æä¾›ä¸å¯å˜çš„åå‘è§†å›¾.</p>
<hr/>
<p>###4.String Templates(å­—ç¬¦ä¸²æ¨¡æ¿)</p>
<p>#####ç‰¹æ€§è§£æ</p>
<p>å­—ç¬¦ä¸²æ¨¡æ¿æ˜¯JEP430å¼•å…¥çš„ç‰¹æ€§æ—¨åœ¨è§£å†³å­—ç¬¦ä¸²æ‹¼æ¥çš„ç¹çé—®é¢˜.å®ƒå…è®¸å¼€å‘è€…ç›´æ¥åœ¨å­—ç¬¦ä¸²ä¸­åµŒå…¥è¡¨è¾¾å¼è€Œæ— éœ€æ˜¾å¼æ‹¼æ¥.</p>
<p>#####è¯­æ³•ç¤ºä¾‹</p>
<pre><code class="hljs language-java" lang="java">String name=<span class="hljs-string">"John"</span>;
<span class="hljs-type">int</span> age=<span class="hljs-number">30</span>;

<span class="hljs-comment">//ä¼ ç»Ÿæ–¹å¼</span>
String message1=<span class="hljs-string">"Name:"</span>+name+<span class="hljs-string">"Age:"</span>+age;

<span class="hljs-comment">//JavaÂ 21å­—ç¬¦ä¸²æ¨¡æ¿</span>
String message2=STR.<span class="hljs-string">"Name:\{name}Age:\{age}"</span>;
</code></pre>
<p>#####åº”ç”¨åœºæ™¯</p>
<p>-SQLæŸ¥è¯¢æ„å»º:é¿å…æ‰‹å†™å®¹æ˜“å‡ºé”™çš„SQLæ‹¼æ¥è¯­å¥.
-HTMLç”Ÿæˆ:åœ¨Webåº”ç”¨ä¸­åŠ¨æ€ç”ŸæˆHTMLç‰‡æ®µæ—¶æ›´å®‰å…¨ä¾¿æ·.</p>
<p>#####ä¼˜åŠ¿</p>
<p>-<strong>å®‰å…¨æ€§</strong>:é€šè¿‡æ¨¡æ¿å¤„ç†å™¨å¯é˜²æ­¢æ³¨å…¥æ”»å‡».
-<strong>å¯è¯»æ€§</strong>:å†…åµŒè¡¨è¾¾å¼ä½¿å­—ç¬¦ä¸²ç»“æ„ä¸€ç›®äº†ç„¶.</p>
<hr/>
<p>###5.Unnamed Patterns and Variables(æœªå‘½åæ¨¡å¼å’Œå˜é‡)</p>
<p>#####ç‰¹æ€§è§£æ</p>
<p>è¯¥ç‰¹æ€§å…è®¸ä½¿ç”¨ä¸‹åˆ’çº¿_å¿½ç•¥æœªä½¿ç”¨çš„æ¨¡å¼æˆ–å˜é‡é€‚ç”¨äºéœ€è¦å£°æ˜ä½†ä¸ä½¿ç”¨çš„åœºæ™¯.</p>
<p>#####è¯­æ³•ç¤ºä¾‹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">try</span>{
<span class="hljs-type">int</span> _=Integer.parseInt(<span class="hljs-string">"123"</span>);<span class="hljs-comment">//å¿½ç•¥ç»“æœ</span>
}<span class="hljs-keyword">catch</span>(NumberFormatException _){
System.out.println(<span class="hljs-string">"Invalid number"</span>);
}

<span class="hljs-comment">//Recordè§£æ„æ—¶å¿½ç•¥æŸäº›å­—æ®µ</span>
<span class="hljs-keyword">if</span>(point <span class="hljs-keyword">instanceof</span> <span class="hljs-title function_">Point</span><span class="hljs-params">(<span class="hljs-type">int</span> x,_)</span>){
System.out.println(<span class="hljs-string">"x:"</span>+x);
}
</code></pre>
<p>#####åº”ç”¨åœºæ™¯</p>
<p>-å¼‚å¸¸å¤„ç†:å¿½ç•¥å¼‚å¸¸å‚æ•°.
-Recordè§£æ„:åªæå–éƒ¨åˆ†å­—æ®µå€¼.</p>
<p>#####ä¼˜åŠ¿</p>
<p>-<strong>æ˜ç¡®æ„å›¾</strong>:é€šè¿‡_æ˜¾å¼è¡¨æ˜å¿½ç•¥è¯¥å˜é‡.
-<strong>å‡å°‘å™ªéŸ³</strong>:é¿å…æœªä½¿ç”¨å˜é‡çš„è­¦å‘Šæç¤º.</p>
<hr/>
<p>##æ€»ç»“</p>
<p>Java21çš„è¿™äº›è¯­æ³•ç³–ä¸ä»…ä»…æ˜¯è¡¨é¢çš„ä¿®é¥°å®ƒä»¬ä»å®é™…ç—›ç‚¹å‡ºå‘æ˜¾è‘—æå‡äº†å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡:</p>
<p>1.Switchæ¨¡å¼åŒ¹é…è®©å¤æ‚çš„æ¡ä»¶åˆ†æ”¯å˜å¾—ç›´è§‚.
2.Recordæ¨¡å¼çš„è§£æ„ç®€åŒ–äº†æ•°æ®è½½ä½“çš„å¤„ç†.
3.Sequenced Collectionsä¸ºæœ‰åºé›†åˆæ“ä½œæä¾›äº†ç»Ÿä¸€API.
4.String Templatesç»ˆç»“äº†ç¹ççš„å­—ç¬¦ä¸²æ‹¼æ¥æ—¶ä»£.
5.æœªå‘½åæ¨¡å¼å’Œå˜é‡å¸®åŠ©å¼€å‘è€…ä¸“æ³¨äºçœŸæ­£éœ€è¦çš„éƒ¨åˆ†.</p>
<p>è¿™äº›æ”¹è¿›ä½“ç°äº†Javaå›¢é˜Ÿå¯¹å¼€å‘è€…ä½“éªŒçš„é«˜åº¦é‡è§†ä¹Ÿå±•ç°äº†è¯­è¨€æ¼”è¿›çš„åŠ¡å®æ–¹å‘.å»ºè®®å¼€å‘è€…å°½å¿«ç†Ÿæ‚‰è¿™äº›ç‰¹æ€§å¹¶å°†å…¶åº”ç”¨åˆ°å®é™…é¡¹ç›®ä¸­ä»¥å……åˆ†äº«å—ç°ä»£åŒ–Javaå¸¦æ¥çš„ä¾¿åˆ©ä¸é«˜æ•ˆ.</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 å¦‚ä½•é«˜æ•ˆå‡†å¤‡ç®€å†å’Œé¢è¯•]]></title>    <link>https://juejin.cn/post/7591730714140393514</link>    <guid>https://juejin.cn/post/7591730714140393514</guid>    <pubDate>2026-01-06T00:20:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591730714140393514" data-draft-id="7571726099688865811" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026 å¦‚ä½•é«˜æ•ˆå‡†å¤‡ç®€å†å’Œé¢è¯•"/> <meta itemprop="keywords" content="é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-06T00:20:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯åŒè¶Šè€å¸ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1714893868765373"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026 å¦‚ä½•é«˜æ•ˆå‡†å¤‡ç®€å†å’Œé¢è¯•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1714893868765373/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯åŒè¶Šè€å¸ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T00:20:48.000Z" title="Tue Jan 06 2026 00:20:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯åŒè¶Šã€‚å‰ç™¾åº¦ æ»´æ»´ èµ„æ·±å‰ç«¯å·¥ç¨‹å¸ˆï¼Œæ…•è¯¾ç½‘é‡‘ç‰Œè®²å¸ˆï¼ŒPMPã€‚æˆ‘çš„ä»£è¡¨ä½œæœ‰ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.wangeditor.com%2F" target="_blank" title="https://www.wangeditor.com/" ref="nofollow noopener noreferrer">wangEditor</a> å¼€æº web å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ŒGitHub 18k starï¼Œnpm å‘¨ä¸‹è½½é‡ 20k</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.huashuiai.com%2F" target="_blank" title="https://www.huashuiai.com/" ref="nofollow noopener noreferrer">åˆ’æ°´AI</a> Node å…¨æ ˆ AIGC çŸ¥è¯†åº“ï¼ŒåŒ…æ‹¬ AI å†™ä½œã€å¤šäººååŒç¼–è¾‘ã€‚å¤æ‚ä¸šåŠ¡ï¼ŒçœŸå®ä¸Šçº¿ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.mianshipai.com%2F" target="_blank" title="https://www.mianshipai.com/" ref="nofollow noopener noreferrer">å‰ç«¯é¢è¯•æ´¾</a> ç³»ç»Ÿä¸“ä¸šçš„é¢è¯•å¯¼èˆªï¼Œåˆ·é¢˜ï¼Œå†™ç®€å†ï¼Œçœ‹é¢è¯•æŠ€å·§ï¼Œå†…æ¨å·¥ä½œã€‚å¼€æºå…è´¹ã€‚</li>
</ul>
<blockquote>
<p>æˆ‘åœ¨æ­£åœ¨å¼€å‘ä¸€ä¸ª AI Agent æ™ºèƒ½ä½“é¡¹ç›®ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhitalk.chat%2F" target="_blank" title="https://zhitalk.chat/" ref="nofollow noopener noreferrer">æ™ºè¯­</a>ã€‘ä¸€ä¸ªæ™ºèƒ½é¢è¯•å®˜ï¼Œå¯ä»¥ä¼˜åŒ–ç®€å†ã€æ¨¡æ‹Ÿé¢è¯•ã€è§£ç­”é¢˜ç›®ç­‰ã€‚å¯¹ AI å¼€å‘æœ‰å…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥å›´è§‚ã€å­¦ä¹ ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å¼€å§‹</h2>
<p>è¿‘æœŸå·²ç»æœ‰å¥½å‡ ä¸ªåŒå­¦å’Œæˆ‘è¯´ï¼Œè£å‘˜ï¼Œä¸ç»­çº¦åˆåŒï¼Œæˆ–è€…çœ‹å…¬å¸å‘å±•å¾ˆä¸å¥½ï¼Œæƒ³è·³æ§½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0feef605b1734ac3b8279dacd70560f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5Y-M6LaK6ICB5biI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768263647&amp;x-signature=gqTJp%2BRE2M5%2BYiMbjLjYAHcfekg%3D" alt="image.png" loading="lazy"/></p>
<p>å½“å‰è¿™ç§å¤§ç¯å¢ƒä¸‹ï¼Œåº”è¯¥å¦‚ä½•å‡†å¤‡é¢è¯•å‘¢ï¼Ÿå°¤å…¶æ˜¯å¾ˆå¤šåŒå­¦åœ¨ä¸€ä¸ªå…¬å¸å¥½å‡ å¹´äº†ï¼Œä¹Ÿä¸çŸ¥é“å¤–é¢ä»€ä¹ˆè¡Œæƒ…ã€‚</p>
<p>æŒ‰ç…§å‰äº›å¹´çš„æƒ³æ³•ï¼Œé¢è¯•å˜›ï¼Œé‚£è‚¯å®šå¾—å¥½å¥½å‡†å¤‡ä¸€ç•ªã€‚åˆ·ç®—æ³•ï¼ŒèƒŒè¯µå…«è‚¡æ–‡ï¼Œç”šè‡³è¿˜è¦ä¸“é—¨èŠ±ä¸€æ®µæ—¶é—´å­¦ä¹ æ–°çš„æŠ€èƒ½ã€‚</p>
<p>è¿™ä¹ˆå¤šå†…å®¹ï¼Œä½ å¦‚æœæŒ¨ç€å‡†å¤‡ä¸€éï¼Œè‡³å°‘ 2-3 ä¸ªæœˆè¿‡å»äº†ï¼Œè¿™ä¸ªæ—¶é—´è·¨åº¦å¤ªä¹…äº†ã€‚</p>
<h2 data-id="heading-1">å½“å‰ä¸é€‚åˆé•¿æ—¶é—´å‡†å¤‡</h2>
<p>å‰äº›å¹´æ‹›è˜å¸‚åœºç«çƒ­ï¼Œé¢è¯•æœºä¼šå¤šï¼Œå·¥èµ„å¼€çš„é«˜ï¼Œè¿™å°±æœ‰ä¸¤ä¸ªç‰¹ç‚¹</p>
<ul>
<li>åªè¦å‡ºå»é¢è¯•ï¼Œå°±ä¸€å®šèƒ½æ‰¾åˆ°å·¥ä½œ</li>
<li>é¢è¯•é€ ç«ç®­ï¼Œåªè¦ä½ å‡†å¤‡çš„å¥½ï¼Œå°±å¾ˆæœ‰å¯èƒ½æ‹¿åˆ°é«˜å·¥èµ„</li>
</ul>
<p>æ‰€ä»¥é‚£ä¸ªæ—¶å€™é€‚åˆå¤šèŠ±ç‚¹æ—¶é—´ï¼Œå¤šå‡†å¤‡äº›é¢è¯•é¢˜ï¼Œåæ­£æœºä¼šå¤šçš„æ˜¯ï¼Œå°½é‡äº‰å–ä¸€ä¸ªå¥½æœºä¼šï¼Œè¿›å¤§å‚ï¼Œæ‹¿é«˜è–ªã€‚</p>
<p>è€Œç°åœ¨æƒ…å†µæ°æ°ç›¸å</p>
<ul>
<li>é¢è¯•æœºä¼šå°‘äº†</li>
<li>é¢è¯•ä¸å†å¤§é‡è€ƒå…«è‚¡æ–‡å’Œç®—æ³•ï¼Œè€Œæ˜¯æ›´æ³¨é‡é¡¹ç›®ï¼Œæ›´åŠ å®ç”¨ä¸»ä¹‰</li>
</ul>
<p>æ‰€ä»¥ä½ ç°åœ¨å¦‚æœèŠ±å¤§é‡æ—¶é—´å‡†å¤‡å¾ˆå¤šçŸ¥è¯†ï¼Œé¢è¯•çš„æ—¶å€™ä¸ä¸€å®šèƒ½ç”¨çš„ä¸Šï¼Œè€Œä¸”è¿™æ®µæ—¶é—´ä½ ä¼šæµªè´¹æ‰å¾ˆå¤šæœºä¼šã€‚ç°åœ¨æœºä¼šæ‰æ˜¯æœ€é‡è¦çš„ã€‚</p>
<p>è€Œä¸”ï¼Œä½ ä¸ªäººçš„æŠ€æœ¯èƒ½åŠ›ä¸å¯èƒ½åœ¨çŸ­æ—¶é—´é åˆ·é¢˜æ¥æå‡ã€‚å°¤å…¶æ˜¯åœ¨å½“å‰è¿™ç§å®ç”¨ä¸»ä¹‰é¢è¯•çš„æƒ…å†µä¸‹ï¼Œä½ å¾ˆéš¾æŠŠè‡ªå·±èƒŒè¯µçš„é¢˜ç›®åº”ç”¨åˆ°å®é™…åœºæ™¯ä¸­ã€‚</p>
<h2 data-id="heading-2">è®¤çœŸå†™ç®€å†</h2>
<p>ç®€å†æ˜¯ä»€ä¹ˆï¼Ÿç®€å†å°±æ˜¯ä¸€ä¸ªäººçš„è„¸ï¼Œä¸€ä¸ªäººçš„å¦†ï¼Œæ˜¯ HR å’Œé¢è¯•å®˜å¯¹ä½ çš„ç¬¬ä¸€å°è±¡ã€‚</p>
<p>ä¸€ä¸ªé™Œç”Ÿäººæ‹¿åˆ°ä½ ç®€å†çš„ç¬¬ä¸€ç§’é’Ÿï¼Œä»–è¿˜æ²¡çœ‹åˆ°å†…å®¹ï¼Œä½†å·²ç»å¯ä»¥çœ‹åˆ°ç®€å†çš„ç¯‡å¹…å’Œæ ¼å¼ã€‚</p>
<p>æœ‰äº›åŒå­¦ç®€å†å†™çš„å¤ªç®€å•ï¼ŒæŠ€èƒ½å°± 2-3 ä¸ªåŸºç¡€çš„ï¼Œé¡¹ç›®å°± 2-3 ä¸ªè€Œä¸”æ²¡è¯¦ç»†å†™ï¼Œæ ¼å¼ä¹Ÿå­—ä½“å¤§å°ä¸ä¸€è‡´...ç»™äººçš„ç¬¬ä¸€å°è±¡å°±ä¸å¥½ã€‚</p>
<p>ç¨‹åºå‘˜æ˜¯ä¸€ä¸ªè¦æ±‚è®¤çœŸä»”ç»†çš„å²—ä½ï¼Œè€Œä¸”ä½ åœ¨å·¥ä½œä¸­é™¤äº†å†™ä»£ç ï¼Œä¹Ÿæ˜¯è¦å†™æ–‡æ¡£çš„ã€‚ä½ å¯¹å¾…è‡ªå·±çš„ç®€å†éƒ½å°šä¸”å¦‚æ­¤é©¬è™ç®€é™‹ï¼Œæˆ‘ä¸ç›¸ä¿¡ä½ åœ¨å·¥ä½œä¸­èƒ½å†™å‡ºå¤šä¹ˆå¥½çš„æ–‡æ¡£ã€‚</p>
<p>å°¤å…¶æ˜¯åœ¨å½“å‰æ‹›è˜å¸‚åœºç«äº‰æ¿€çƒˆçš„ç¯å¢ƒä¸‹ï¼Œç®€å†çš„ä½œç”¨ä¼šè¢«æ”¾å¤§ï¼Œä¸€æ—¦æ„Ÿè§‰ä½ ç®€å†ä¸å¥½ï¼Œç«‹é©¬å°±æ”¾å¼ƒä½ ã€‚</p>
<p>æ‰€ä»¥ç®€å†è¦è®¤çœŸå†™ï¼Œè¦å‘åˆ«äººå±•ç¤ºå‡ºä½ çš„èƒ½åŠ›å’Œæ€åº¦</p>
<ul>
<li>ä¸“ä¸šæŠ€èƒ½ï¼Œè¦å†™å…¨</li>
<li>å·¥ä½œç»å†ï¼Œè¦å†™å‡ºè‡ªå·±çš„å·¥ä½œæˆæœ</li>
<li>é¡¹ç›®ï¼Œæ—¢è¦æœ‰æ•°é‡ï¼Œåˆè¦æœ‰å†…å®¹ï¼Œå†™å‡ºè‡ªå·±åœ¨é¡¹ç›®ä¸­çš„è´¡çŒ®ã€ä½¿ç”¨çš„æŠ€èƒ½</li>
</ul>
<p>è¿˜æœ‰ä¸€äº›åŒå­¦å†™çš„å¤ªè¯¦ç»†äº†ï¼Œå·¥ä½œæ‰ 3 å¹´ï¼Œå†™ä¸ªç®€å†å†™ 5 é¡µï¼Œå†…å®¹å¤ªå¤šäº†ï¼Œç¬¬ä¸€çœ¼çœ‹ç€å°±çœ¼æ™•ã€‚</p>
<p>ç®€å†çš„æ ¸å¿ƒä»·å€¼åœ¨äºâ€œå‹¾å¼•â€ï¼Œä½ åªéœ€è¦å†™å‡ºæœ€å…·æœ‰å¸å¼•åŠ›çš„éƒ¨åˆ†ï¼Œä¸ç”¨å†™çš„å¾ˆç»†èŠ‚ï¼Œä½ èƒ½å¼•èµ·åˆ«äººçš„æ³¨æ„å’Œå…´è¶£ï¼Œä»–å°±ä¼šçº¦ä½ æ¥é¢è¯•ã€‚ç­‰é¢è¯•çš„æ—¶å€™ï¼Œæœ‰ä½ è¯¦ç»†è¡¨è¾¾çš„æœºä¼šã€‚</p>
<p>ç®€å†çš„æ¯ä¸ªæ¨¡å—ã€æ ¼å¼å’Œç»†èŠ‚å¯å‚è€ƒã€é¢è¯•æ´¾ã€‘é‡Œçš„ä»‹ç» <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.mianshipai.com%2Fdocs%2Fbefore-interview%2Fwrite-resume.html" target="_blank" title="https://www.mianshipai.com/docs/before-interview/write-resume.html" ref="nofollow noopener noreferrer">www.mianshipai.com/docs/beforeâ€¦</a></p>
<p>å¦‚æœä½ èŒåœºç»éªŒä¸å¤šï¼Œå†™å¥½ç®€å†ä»¥åï¼Œæ‰¾èº«è¾¹è®¤è¯†çš„æœ‰ç»éªŒçš„äººï¼Œå°¤å…¶æ˜¯åšè¿‡é¢è¯•å®˜çš„äººï¼Œæ‰¾ä»–çœ‹ä¸€çœ¼ï¼Œææå»ºè®®ã€‚æœ‰äº›é—®é¢˜è‡ªå·±æ­»æ´»çœ‹ä¸å‡ºæ¥ï¼Œåˆ«äººä¸€çœ¼å°±èƒ½çœ‹å‡ºæ¥ï¼Œå¤šæ‰¾å‡ ä¸ªäººçœ‹çœ‹ï¼Œè‡ªå·±å†ç»¼åˆè€ƒè™‘ã€‚</p>
<h2 data-id="heading-3">å‡†å¤‡å¥½é¡¹ç›®</h2>
<p>é¡¹ç›®ç»éªŒï¼Œæ˜¯å½“å‰ç®€å†å’Œé¢è¯•ä¸­æœ€é‡è¦çš„å†…å®¹ï¼Œå°¤å…¶æ˜¯å¯¹äºæœ‰å·¥ä½œç»éªŒçš„äººã€‚æ‰€ä»¥è¦æå‰å‡†å¤‡å¥½ã€‚</p>
<p>è¿™å…¶å®å¾ˆå¥½ç†è§£ï¼Œåœ¨ AI ç¼–ç¨‹æ™®åŠçš„æƒ…å†µä¸‹ï¼Œå…«è‚¡æ–‡ã€è¯­æ³•ã€ç®—æ³•èƒ½åŠ›éƒ½è¢«æŠ¹å¹³äº†ã€‚å¦‚æœä½ æ˜¯ä¸€ä¸ªè€æ¿ï¼Œè¦æ‹›è˜ä¸€ä¸ªå¹²æ´»çš„ç¨‹åºå‘˜ï¼Œè€ƒå¯Ÿé¡¹ç›®ç»éªŒæ˜¯æœ€ç›´æ¥æœ‰æ•ˆçš„æ–¹å¼ã€‚</p>
<p>ç®€å†é‡Œä¸€èˆ¬ä¼šå†™ 3-5 ä¸ªé¡¹ç›®ï¼Œä½†é‡è¦ç¨‹åº¦ä¸ä¸€æ ·ï¼Œä½ è¦æ‰¾åˆ°è‡ªå·±çš„â€œä»£è¡¨ä½œâ€ï¼Œä½œä¸ºç®€å†ç¬¬ä¸€ä¸ªé¡¹ç›®ï¼Œè¿™ä¸ªè¦é‡ç‚¹å‡†å¤‡ã€‚</p>
<p>é¦–å…ˆï¼Œåœ¨ç®€å†é‡Œï¼Œç¬¬ä¸€ä¸ªé¡¹ç›®è¦è¯¦ç»†å†™ï¼Œå¤šå†™ä¸€ä¸‹è‡ªå·±çš„é¡¹ç›®èŒè´£å’Œå·¥ä½œï¼Œä½¿ç”¨çš„æŠ€èƒ½ï¼Œé¡¹ç›®æˆæœç­‰ï¼Œå¾—æœ‰å¤§é‡è‡ªå·±å‚ä¸çš„å†…å®¹ï¼Œæ‰æœ‰è¯´æœåŠ›ã€‚</p>
<p>ç„¶åï¼Œè¦æå‰å‡†å¤‡é¢è¯•æ—¶çš„é—®é¢˜ã€‚</p>
<p><strong>ç¬¬ä¸€ä¸ªé—®é¢˜ï¼šè¯·ä»‹ç»è¿™ä¸ªé¡¹ç›®</strong></p>
<p>è¿™ä¸ªé—®é¢˜çœ‹ä¼¼ç®€å•ï¼Œä½†å¾ˆå¤šåŒå­¦å›ç­”çš„éƒ½ä¸å¥½ï¼š</p>
<ul>
<li>ä¸Šæ¥å°±è¯´æŠ€æœ¯ç»†èŠ‚ï¼Œæˆ‘å‹æ ¹éƒ½ä¸çŸ¥é“ä½ è¿™ä¸ªé¡¹ç›®æ˜¯ä¸ªå•¥</li>
<li>é•¿ç¯‡å¤§è®ºï¼Œä¸€å£æ°”è¯´ 10 åˆ†é’Ÿï¼Œå…¶å®æˆ‘åœ¨ 2 åˆ†é’Ÿä»¥åå°±å¬æ‡µäº†</li>
</ul>
<p>å¤§å®¶è¦æ˜ç™½ï¼Œä½ å»é¢è¯•ï¼Œå¯¹é¢åç€çš„æ˜¯ä¸€ä¸ªå®Œå…¨é™Œç”Ÿçš„äººï¼Œä»–å¯¹ä½ é™Œç”Ÿï¼Œä»–å¯¹ä½ çš„é¡¹ç›®æ›´é™Œç”Ÿï¼Œä»–å¯èƒ½åˆšåˆšæ‹¿åˆ°ä½ çš„ç®€å†ï¼Œä½ ä¸€è¾¹è®²ä»–ä¸€è¾¹çœ‹ã€‚</p>
<p>ä½†ä½ å´ä»–æŠŠå½“ä½œä½ èº«è¾¹çš„åŒæ—¶ä¸€æ ·ï¼Œç›´æ¥è®¨è®ºé¡¹ç›®çš„æŠ€æœ¯ç»†èŠ‚ï¼Œä»–èƒ½å¬æ‡‚å—ï¼Ÿä»–å¬ä¸æ‡‚ä½ è¯´çš„å†å¥½æœ‰ç”¨å—ï¼Ÿ</p>
<p>æ‰€ä»¥ï¼Œä»‹ç»é¡¹ç›®æ—¶ï¼Œæœ€é‡è¦çš„æ˜¯è®©åˆ«äººèƒ½å¬æ‡‚ï¼Œè¿™æ˜¯ç»å¤§éƒ¨åˆ†åŒå­¦æ‰€é¢ä¸´çš„éšœç¢ã€‚</p>
<p>é¢è¯•ï¼Œæ˜¯ä¸€ç§æ²Ÿé€šï¼Œä½ å¾—æ„ŸçŸ¥å¯¹æ–¹æ˜¯ä¸æ˜¯åœ¨å¬ä½ è¯´è¯ï¼Œæ„ŸçŸ¥ä»–æ˜¯ä¸æ˜¯å¬æ‡‚äº†ã€‚æ²Ÿé€šï¼Œä¸æ˜¯ä½ å•æ–¹é¢çš„å€¾è¯‰ï¼Œä½ å¾—é€‚å½“çš„ç•™å‡ºå¯¹æ–¹æé—®çš„é—´éš™ï¼Œè€Œä¸æ˜¯ä½ ä¸€å‘³çš„è‡ªæˆ‘è¡¨è¾¾ã€‚</p>
<p><strong>ç¬¬äºŒä¸ªé—®é¢˜ï¼šé¡¹ç›®çš„äº®ç‚¹æˆ–æˆå°±</strong></p>
<p>çœ‹åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå¾ˆå¤šåŒå­¦çš„ç¬¬ä¸€ååº”å°±æ˜¯ï¼šæˆ‘æ²¡æœ‰äº®ç‚¹ä¹Ÿæ²¡æœ‰æˆå°±ã€‚</p>
<p>è€æ¿æŠŠä½ æ‹›è˜è¿‡å»ï¼Œæ¯ä¸ªæœˆç»™ä½ å¼€å·¥èµ„å¹²æ´»ï¼Œä½ è‚¯å®šæ¯å¤©éƒ½æœ‰äº§å‡ºã€‚æ²¡æœ‰åŠŸåŠ³è¿˜æœ‰è‹¦åŠ³å˜›ï¼Œå³ä¾¿æ²¡æœ‰äº®ç‚¹ï¼Œä½ æ€»æœ‰éš¾ç‚¹å§ï¼Ÿ</p>
<p>å›é¡¾ä¸€ä¸‹ä½ è¿™åŠå¹´ï¼Œæœ‰æ²¡æœ‰ä¸ºä¸€ä¸ªéœ€æ±‚ã€ä¸€ä¸ªé—®é¢˜ã€ä¸€ä¸ª bug è€ŒåŠ ç­ç†¬å¤œç”šè‡³é€šå®µï¼Œå¤´å‘éƒ½æŠ“æ‰å¥½å‡ æŠŠï¼Œè‚¯å®šæœ‰å§ã€‚</p>
<p>å³ä¾¿å†æ²¡æœ‰ï¼Œæ²¡åƒè¿‡çŒªè‚‰ä¹Ÿè§è¿‡çŒªè·‘ï¼Œä½ èº«è¾¹çš„åŒäº‹æ€»ä¼šæœ‰è¿™ç§æƒ…å†µå§ï¼Ÿä½ ç»™ä»–ä¹°æ¯å¥¶èŒ¶ï¼Œé—®é—®ä»–ã€‚</p>
<p>å«æ³•ä¸é‡è¦ï¼Œæ— è®ºå«äº®ç‚¹ã€æˆå°±ã€è¿˜æ˜¯éš¾ç‚¹ï¼Œéƒ½è¡Œã€‚ä½ åªè¦èƒ½è®²å‡º 1-2 æ®µä½ åœ¨é¡¹ç›®ä¸­çš„ä¸ä¿—çš„ç»å†å°±å¯ä»¥ã€‚</p>
<p>ç„¶åæ€ä¹ˆè®²ï¼Œä¹Ÿæ˜¯æœ‰æŠ€å·§çš„ã€‚æ—¢ç„¶è¦è¯´äº®ç‚¹ã€éš¾ç‚¹ï¼Œé‚£å¾—è®²çš„å‡ºâ€œäº®â€å’Œâ€œéš¾â€ä¸èƒ½å¹³æ·¡å¦‚æ°´ã€‚</p>
<p>ä½ å¾—æŠŠéœ€æ±‚ã€èƒŒæ™¯ã€é—®é¢˜ã€åˆ†æã€éšœç¢ã€è§£å†³æ–¹æ¡ˆã€ç»“æœï¼Œä»å¤´åˆ°å°¾éƒ½è¯´å‡ºæ¥ã€‚å¹¶ä¸”è¦ä½“ç°å‡ºä½¿ç”¨çš„æŠ€æœ¯ï¼Œå› ä¸ºä½ æ˜¯æŠ€æœ¯äººå‘˜ã€‚</p>
<p>å…·ä½“æ ¼å¼å¯ä»¥å‚è€ƒã€é¢è¯•æ´¾ã€‘ç»™å‡ºçš„æ ¼å¼ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.mianshipai.com%2Fdocs%2Fthird-exam%2Fproject.html" target="_blank" title="https://www.mianshipai.com/docs/third-exam/project.html" ref="nofollow noopener noreferrer">www.mianshipai.com/docs/third-â€¦</a></p>
<p><strong>ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼Œé¡¹ç›®æœ‰æ²¡æœ‰åšè¿‡ä»€ä¹ˆä¼˜åŒ–ï¼Ÿ</strong></p>
<p>ä¼˜åŒ–ï¼Œä¸€èˆ¬æ˜¯ä½“éªŒå’Œæ€§èƒ½ï¼Œè¿™å…¶å®æ˜¯è€ç”Ÿå¸¸è°ˆçš„é—®é¢˜äº†ã€‚</p>
<p>ä½†å¦‚æœåœ¨é¡¹ç›®ä¸­é—®è¿™ä¸ªé—®é¢˜ï¼Œä¸è¦åªèƒŒè¯µå…«è‚¡æ–‡ï¼Œä¸€å®šè¦ç»“åˆé¡¹ç›®å®é™…åŠŸèƒ½ï¼Œè€Œä¸”æœ€å¥½æœ‰é‡åŒ–æ ‡å‡†ã€‚</p>
<p>æ€»ä¹‹ï¼Œä½ å¾—æå‰å‡†å¤‡è¿™ä¸ªé—®é¢˜ï¼Œå¦åˆ™ä¸‡ä¸€è¢«é—®åˆ°ï¼Œç°å­¦ç°å–æ˜¯æ¥ä¸åŠçš„ã€‚è€Œä¸”è¿™ç§é—®é¢˜ä¸€æ—¦å›ç­”å¤±è´¥ï¼Œå½±å“ä¼šéå¸¸å¤§ã€‚</p>
<h2 data-id="heading-4">å¿«é€Ÿå‡†å¤‡å…«è‚¡æ–‡å’Œç®—æ³•</h2>
<p>AI æ—¶ä»£å…«è‚¡æ–‡å’Œç®—æ³•ä¼šè¶Šæ¥è¶Šå°‘ï¼Œå°±åƒ Vue React æ—¶ä»£ä¸ä¼šå†é—®ä½  DOM API ã€‚</p>
<p>ä½†æ˜¯ç›´æ¥å¿½ç•¥ä»–ä»¬ï¼Œä¸€ç‚¹éƒ½ä¸å‡†å¤‡å˜›ï¼Ÿè¿™è‚¯å®šä¸è¡Œï¼Œä¸‡ä¸€è¢«é—®åˆ°ä¸€ä¸ªåŸºç¡€é—®é¢˜ï¼Œä½ ä¸ä¼šï¼Œè¿™æœ‰ç‚¹ä¸¢äººã€‚</p>
<p>æˆ‘å»ºè®®æ˜¯ï¼šé›†ä¸­ 2-3 å¤©å¿«é€Ÿå¤ä¹ </p>
<ul>
<li>æŠŠæœ¬è¯¥ä¼šçš„ã€ç®€å•çš„è¿‡ä¸€éï¼ŒæŸ¥ç¼ºè¡¥æ¼</li>
<li>é‚£äº›ä¸ä¼šçš„ï¼Œæœ‰ç‚¹éš¾åº¦çš„ï¼Œå°±å…ˆä¸ç®¡äº†</li>
</ul>
<p>å°¤å…¶æ˜¯ç®—æ³•ï¼Œä¸å¥½çŸ­æ—¶é—´æ¶è¡¥ï¼Œä½ å¦‚æœç°åœ¨ä¸ä¼šï¼Œé‚£å°±å…ˆè¿™æ ·å§ï¼Œåˆ«å¼ºæ±‚äº†ã€‚ç­‰æ‰¾åˆ°å·¥ä½œç¨³å®šäº†ï¼Œå†ä¸šä½™å»åˆ·å§ã€‚</p>
<p>åŸºç¡€å…«è‚¡æ–‡çš„å¿«é€Ÿå¤ä¹ ï¼Œå¯ä»¥å‚è€ƒã€é¢è¯•æ´¾ã€‘é‡Œé¢æ•´ç†çš„é—®é¢˜ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.mianshipai.com%2Fdocs%2Fwritten-exam%2FJS-writing.html" target="_blank" title="https://www.mianshipai.com/docs/written-exam/JS-writing.html" ref="nofollow noopener noreferrer">www.mianshipai.com/docs/writteâ€¦</a></p>
<h2 data-id="heading-5">å°½å¿«æŠ•é€’ç®€å†</h2>
<p>ä¸Šæ–‡å·²ç»åˆ†æäº†ï¼Œä¸è¦æƒ³ç€ï¼šå…ˆè®¤çœŸå¤ä¹  1-2 ä¸ªäººï¼Œå†æŠ•ç®€å†ã€‚ä¸è¦è¿™æ ·ã€‚</p>
<p>ç¬¬ä¸€ï¼Œä½ ç®€å†å†™å¥½äº†ï¼Œä¿®æ”¹å¥½äº†ï¼›ç¬¬äºŒï¼Œä½ é¡¹ç›®å‡†å¤‡å¥½äº†ã€‚<strong>æ¥ä¸‹æ¥å°±ç›´æ¥æŠ•é€’ç®€å†ï¼Œä¸ç”¨ç­‰</strong>ã€‚æ¯å¤©éƒ½è¦æŠ•ï¼Œå¹¿æ³›çš„æŠ•ï¼Œä¸æ”¾è¿‡ä»»ä½•ä¸€ä¸ªæœºä¼šã€‚</p>
<p>ä½ æŠ•é€’åˆ°æ¥åˆ°è¦æ±‚ï¼Œæœ€å¿«ä¹Ÿå¾— 3-5 å¤©çš„æ—¶é—´ï¼Œè¿™ä¸ªæ—¶é—´ç”¨äºå¿«é€Ÿå¤ä¹ åŸºç¡€å…«è‚¡æ–‡ï¼Œè¶³å¤Ÿäº†ã€‚</p>
<p>åé¢å¦‚æœæœ‰é¢è¯•ï¼Œå†æ ¹æ®é¢è¯•æƒ…å†µå½’çº³æ€»ç»“ï¼Œå¤ä¹ æ›´å¤šçš„é—®é¢˜ã€‚</p>
<p>æ€»ä¹‹ï¼Œè¦å°½å¿«åšå–æœºä¼šï¼Œä¸è¦æ‹–æ²“ã€‚ç°åœ¨ç«äº‰æ¿€çƒˆï¼Œä½ ä¸€æ—¦æ‹–æ²“ï¼Œä¸€æ‡’æƒ°ï¼Œå¾ˆå¿« 2-3 ä¸ªæœˆå°±è¿‡å»äº†ã€‚</p>
<h2 data-id="heading-6">æœ€å</h2>
<p>ç°åœ¨æ˜¯ä¹°æ–¹å¸‚åœºï¼Œåƒ§å¤šç²¥å°‘ï¼Œä¸è¦è¿‡å¤šå‡†å¤‡ã€‚ä½ åœ¨è¿™ç²¾å¿ƒå‡†å¤‡ç€ï¼Œé‚£è¾¹æœºä¼šæ—©å°±è¢«äººç»™æŠ¢èµ°äº†ã€‚</p>
<p>ç®€å†ï¼Œé¡¹ç›®ï¼ŒåŒ…æ‹¬åŸºç¡€å…«è‚¡æ–‡ï¼Œæœ€å¤š 2 å‘¨æ—¶é—´ï¼Œç„¶åå°±å»æŠ•é€’ï¼Œæ—©æŠ•ï¼Œå¤šæŠ•ã€‚ç„¶åä¸€è¾¹é¢è¯•ç€ï¼Œä¸€éå†æ€»ç»“ã€‚</p>
<p>ä¹Ÿè®¸å§ï¼Œå¿«èŠ‚å¥å·²ç»ä¸çŸ¥ä¸è§‰æ¸—é€åˆ°äº†å·¥ä½œç”Ÿæ´»çš„æ–¹æ–¹é¢é¢ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 å¼€å¹´ç›˜ç‚¹ï¼šGitHub ä¸Šå¤‡å—å…³æ³¨çš„åå¤§ AI Agent æ¡†æ¶]]></title>    <link>https://juejin.cn/post/7591702898080727055</link>    <guid>https://juejin.cn/post/7591702898080727055</guid>    <pubDate>2026-01-06T00:24:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591702898080727055" data-draft-id="7591702898080481295" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026 å¼€å¹´ç›˜ç‚¹ï¼šGitHub ä¸Šå¤‡å—å…³æ³¨çš„åå¤§ AI Agent æ¡†æ¶"/> <meta itemprop="keywords" content="Agent,Python,TypeScript"/> <meta itemprop="datePublished" content="2026-01-06T00:24:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©è¡Œæ— å¿Œ"/> <meta itemprop="url" content="https://juejin.cn/user/4406498333033918"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026 å¼€å¹´ç›˜ç‚¹ï¼šGitHub ä¸Šå¤‡å—å…³æ³¨çš„åå¤§ AI Agent æ¡†æ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4406498333033918/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©è¡Œæ— å¿Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T00:24:46.000Z" title="Tue Jan 06 2026 00:24:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3798d7913bcd4b699161e5dfe9bd6b51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp6KGM5peg5b-M:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768263886&amp;x-signature=M3%2FZTK0Vk4OCL2tzZdNGV4j3vE4%3D" alt="GitHub-ä¸Šå¤‡å—å…³æ³¨çš„åå¤§-AI-Agent-æ¡†æ¶.jpg" loading="lazy"/></p>
<p>AI æ™ºèƒ½ä½“æ­£åœ¨é‡å¡‘æˆ‘ä»¬æ„å»ºè½¯ä»¶çš„æ–¹å¼ã€‚GitHub Star æ˜Ÿæ ‡æ•°æ˜¯å¼€å‘è€…ä¿¡ä»»åº¦ä¸ç¤¾åŒºé‡‡çº³åº¦çš„é‡è¦ä½“ç°ã€‚ä»¥ä¸‹æ˜¯æˆªè‡³2026å¹´01æœˆ05æ—¥ GitHub ä¸Šå¤‡å—å…³æ³¨çš„åå¤§ AI Agent æ¡†æ¶ã€‚</p>
<h3 data-id="heading-0">1. LangChain</h3>
<p>æœ€æµè¡Œçš„ç”¨äºæ„å»º LLM é©±åŠ¨åº”ç”¨çš„æ¡†æ¶ï¼Œæä¾›ç”¨äºé“¾ã€æ™ºèƒ½ä½“å’Œæ£€ç´¢çš„å¹¿æ³›å·¥å…·ã€‚</p>
<p>å€ŸåŠ© LangChainï¼Œåªéœ€ä¸åˆ° 10 è¡Œä»£ç å³å¯æ¥å…¥ OpenAIã€Anthropicã€Google ç­‰å¹³å°ã€‚å®ƒæä¾›é¢„å»ºçš„æ™ºèƒ½ä½“æ¶æ„ä¸æ¨¡å‹é›†æˆï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿèµ·æ­¥ï¼Œè½»æ¾å°† LLM èƒ½åŠ›èå…¥æ™ºèƒ½ä½“ä¸åº”ç”¨ä¸­ã€‚</p>
<ul>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flangchain-ai%2Flangchain" target="_blank" title="https://github.com/langchain-ai/langchain" ref="nofollow noopener noreferrer">github.com/langchain-aâ€¦</a></li>
<li>ğŸŒŸ Starï¼š123K</li>
</ul>
<h3 data-id="heading-1">2. MetaGPTï¼šå¤šæ™ºèƒ½ä½“æ¡†æ¶</h3>
<p>ä¸€ä¸ªæ¨¡æ‹Ÿè½¯ä»¶å…¬å¸çš„å¤šæ™ºèƒ½ä½“æ¡†æ¶ï¼Œæ™ºèƒ½ä½“åœ¨å…¶ä¸­æ‹…ä»»äº§å“ç»ç†ã€æ¶æ„å¸ˆå’Œå·¥ç¨‹å¸ˆç­‰è§’è‰²ã€‚</p>
<ol>
<li>MetaGPTè¾“å…¥<strong>ä¸€å¥è¯çš„è€æ¿éœ€æ±‚</strong>ï¼Œè¾“å‡º<strong>ç”¨æˆ·æ•…äº‹ / ç«å“åˆ†æ / éœ€æ±‚ / æ•°æ®ç»“æ„ / APIs / æ–‡ä»¶ç­‰</strong></li>
<li>MetaGPTå†…éƒ¨åŒ…æ‹¬<strong>äº§å“ç»ç† / æ¶æ„å¸ˆ / é¡¹ç›®ç»ç† / å·¥ç¨‹å¸ˆ</strong>ï¼Œå®ƒæä¾›äº†ä¸€ä¸ª<strong>è½¯ä»¶å…¬å¸</strong>çš„å…¨è¿‡ç¨‹ä¸ç²¾å¿ƒè°ƒé…çš„SOP. <code>Code = SOP(Team)</code> æ˜¯æ ¸å¿ƒå“²å­¦ã€‚å°†SOPå…·è±¡åŒ–ï¼Œå¹¶ä¸”ç”¨äºLLMæ„æˆçš„å›¢é˜Ÿ</li>
</ol>
<ul>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FFoundationAgents%2FMetaGPT" target="_blank" title="https://github.com/FoundationAgents/MetaGPT" ref="nofollow noopener noreferrer">github.com/FoundationAâ€¦</a></li>
<li>ğŸŒŸ Starï¼š62.5K</li>
</ul>
<h3 data-id="heading-2">3. AutoGen</h3>
<p>AutoGen æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»ºå¤šæ™ºèƒ½ä½“ AI åº”ç”¨çš„æ¡†æ¶ï¼Œè¿™äº›åº”ç”¨èƒ½å¤Ÿè‡ªä¸»è¡ŒåŠ¨æˆ–ä¸äººç±»ååŒå·¥ä½œã€‚</p>
<ul>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fautogen" target="_blank" title="https://github.com/microsoft/autogen" ref="nofollow noopener noreferrer">github.com/microsoft/aâ€¦</a></li>
<li>ğŸŒŸ Starï¼š53.2K</li>
</ul>
<h3 data-id="heading-3">4. LlamaIndex</h3>
<p>LlamaIndexï¼ˆGPT Indexï¼‰æ˜¯ä¸ºæ‚¨çš„ LLM åº”ç”¨ç¨‹åºè®¾è®¡çš„æ•°æ®æ¡†æ¶ã€‚ä½¿ç”¨ LlamaIndex è¿›è¡Œæ„å»ºé€šå¸¸æ¶‰åŠ LlamaIndex æ ¸å¿ƒå’Œä¸€ç»„é€‰å®šçš„é›†æˆï¼ˆæˆ–æ’ä»¶ï¼‰ã€‚</p>
<ul>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frun-llama%2Fllama_index" target="_blank" title="https://github.com/run-llama/llama_index" ref="nofollow noopener noreferrer">github.com/run-llama/lâ€¦</a></li>
<li>ğŸŒŸ Starï¼š46.2K</li>
</ul>
<h3 data-id="heading-4">5. CrewAI</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21e98e03b5c0492fb46f09cd345cb817~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp6KGM5peg5b-M:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768263886&amp;x-signature=aNank6QvwSQbHPx5HiOp6ivfA%2BA%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸€ä¸ªç”¨äºç¼–æ’è§’è‰²æ‰®æ¼”è‡ªä¸»æ™ºèƒ½ä½“çš„æ¡†æ¶ï¼Œè¿™äº›æ™ºèƒ½ä½“é€šè¿‡åä½œå®Œæˆå¤æ‚ä»»åŠ¡ã€‚</p>
<ul>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FcrewAIInc%2FcrewAI" target="_blank" title="https://github.com/crewAIInc/crewAI" ref="nofollow noopener noreferrer">github.com/crewAIInc/câ€¦</a></li>
<li>ğŸŒŸ Starï¼š42.3K</li>
</ul>
<h3 data-id="heading-5">6. Agno</h3>
<p>Agno æ˜¯ä¸€ä¸ªå¤šæ™ºèƒ½ä½“æ¡†æ¶ã€è¿è¡Œæ—¶å’Œæ§åˆ¶å¹³é¢ã€‚ç”¨å®ƒæ¥åœ¨ä½ çš„äº‘ç¯å¢ƒä¸­æ„å»ºç§æœ‰ä¸”å®‰å…¨çš„ AI äº§å“ã€‚</p>
<ul>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagno-agi%2Fagno" target="_blank" title="https://github.com/agno-agi/agno" ref="nofollow noopener noreferrer">github.com/agno-agi/agâ€¦</a></li>
<li>ğŸŒŸ Starï¼š36.6K</li>
</ul>
<p>Agno æä¾›äº†ä¸€å¥—ç»Ÿä¸€çš„å †æ ˆï¼Œç”¨äºæ„å»ºã€è¿è¡Œå’Œç®¡ç†å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼š</p>
<ul>
<li><strong>æ¡†æ¶</strong>ï¼šå€ŸåŠ©è®°å¿†ã€çŸ¥è¯†åº“ã€çŠ¶æ€ç®¡ç†ã€é˜²æŠ¤æœºåˆ¶ã€äººåœ¨å›è·¯ã€ä¸Šä¸‹æ–‡å‹ç¼©ã€MCP åè®®ã€A2A é€šä¿¡åŠ 100 å¤šç§å·¥å…·åŒ…ï¼Œæ„å»ºæ™ºèƒ½ä½“ã€å¤šæ™ºèƒ½ä½“å›¢é˜Ÿä¸å·¥ä½œæµã€‚</li>
<li><strong>AgentOS è¿è¡Œæ—¶</strong>ï¼šé€šè¿‡å®‰å…¨æ— çŠ¶æ€çš„è¿è¡Œç¯å¢ƒåŠå¼€ç®±å³ç”¨çš„é›†æˆç«¯ç‚¹ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œå¤šæ™ºèƒ½ä½“ç³»ç»Ÿã€‚</li>
<li><strong>AgentOS æ§åˆ¶å¹³é¢</strong>ï¼šé€šè¿‡å…¨æ ˆè¿è¡Œå¯è§†åŒ–ç®¡ç†è·¨ç¯å¢ƒéƒ¨ç½²çš„ AgentOS ç³»ç»Ÿï¼Œæ”¯æŒæµ‹è¯•ã€ç›‘æ§ä¸è¿ç»´ç®¡ç†ã€‚å¯è‡ªä¸»æ„å»º Web ç•Œé¢æˆ–ç›´æ¥ä½¿ç”¨ AgentOS åŸç”Ÿç®¡ç†ç•Œé¢ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fcf261691edb4385b647de869e32fb9a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp6KGM5peg5b-M:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768263886&amp;x-signature=sISSHLckm%2F9ZLQit4swC7Mei%2FHA%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">7. Haystack</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c203eed6fa654f3eba422e6612f816eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp6KGM5peg5b-M:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768263886&amp;x-signature=X3RyO32P6j%2BqKi5otoNJPulbUX4%3D" alt="image.png" loading="lazy"/></p>
<p>Haystack æ˜¯ä¸€ä¸ªç«¯åˆ°ç«¯çš„ LLM æ¡†æ¶ï¼Œå¯è®©æ„å»ºç”± LLMsã€Transformer æ¨¡å‹ã€å‘é‡æœç´¢ç­‰æŠ€æœ¯é©±åŠ¨çš„åº”ç”¨ç¨‹åºã€‚æ— è®ºæ˜¯æƒ³å®ç°æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ã€æ–‡æ¡£æœç´¢ã€é—®ç­”è¿˜æ˜¯ç­”æ¡ˆç”Ÿæˆï¼ŒHaystack éƒ½èƒ½å°†å…ˆè¿›çš„åµŒå…¥æ¨¡å‹å’Œ LLMs ç¼–æ’åˆ°æµæ°´çº¿ä¸­ï¼Œæ„å»ºç«¯åˆ°ç«¯çš„ NLP åº”ç”¨å¹¶æ»¡è¶³ç”¨ä¾‹éœ€æ±‚ã€‚</p>
<ul>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdeepset-ai%2Fhaystack" target="_blank" title="https://github.com/deepset-ai/haystack" ref="nofollow noopener noreferrer">github.com/deepset-ai/â€¦</a></li>
<li>ğŸŒŸ Starï¼š23.8K</li>
</ul>
<h3 data-id="heading-7">8. Open-AutoGLM</h3>
<p>ä¸€ä¸ªå¼€æºçš„æ‰‹æœºæ™ºèƒ½ä½“æ¨¡å‹å’Œæ¡†æ¶ï¼Œç”¨äºæ„å»ºç§»åŠ¨è®¾å¤‡è‡ªåŠ¨åŒ–æ™ºèƒ½ä½“ã€‚</p>
<ul>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzai-org%2FOpen-AutoGLM" target="_blank" title="https://github.com/zai-org/Open-AutoGLM" ref="nofollow noopener noreferrer">github.com/zai-org/Opeâ€¦</a></li>
<li>ğŸŒŸ Starï¼š20.8K</li>
</ul>
<h3 data-id="heading-8">9. Vercel AI SDK</h3>
<p>æ¥è‡ª Next.js åˆ›é€ è€…çš„ TypeScript äººå·¥æ™ºèƒ½å·¥å…·åŒ…ï¼Œä¸“ä¸ºæ„å»º AI é©±åŠ¨çš„ç½‘ç»œåº”ç”¨è€Œè®¾è®¡ã€‚AI SDK æ˜¯ä¸€ä¸ª TypeScript å·¥å…·åŒ…ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…ä½¿ç”¨ Reactã€Next.jsã€Vueã€Svelteã€Node.js ç­‰æŠ€æœ¯æ„å»ºç”±äººå·¥æ™ºèƒ½é©±åŠ¨çš„åº”ç”¨ç¨‹åºå’Œæ™ºèƒ½ä½“ã€‚</p>
<ul>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvercel%2Fai" target="_blank" title="https://github.com/vercel/ai" ref="nofollow noopener noreferrer">github.com/vercel/ai</a></li>
<li>ğŸŒŸ Starï¼š20.6K</li>
</ul>
<h3 data-id="heading-9">10. Mastra</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59f099a5780e4b1aafa839e9f400b348~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSp6KGM5peg5b-M:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768263886&amp;x-signature=2oZygGFKQXSSe7tXP6K9G7mpjPo%3D" alt="image.png" loading="lazy"/></p>
<p>Mastra æ˜¯ä¸€ä¸ªç”¨äºä½¿ç”¨ç°ä»£åŒ– TypeScript æŠ€æœ¯æ ˆæ„å»º AI é©±åŠ¨çš„åº”ç”¨ç¨‹åºå’Œä»£ç†çš„æ¡†æ¶ã€‚å®ƒåŒ…å«äº†ä»æ—©æœŸåŸå‹åˆ°ç”Ÿäº§å°±ç»ªåº”ç”¨ç¨‹åºæ‰€éœ€çš„ä¸€åˆ‡ã€‚Mastra å¯ä»¥ä¸å‰ç«¯å’Œåç«¯æ¡†æ¶ï¼ˆå¦‚ Reactã€Next.js å’Œ Nodeï¼‰é›†æˆï¼Œä¹Ÿå¯ä»¥ä½œä¸ºç‹¬ç«‹æœåŠ¡å™¨éƒ¨ç½²åœ¨ä»»ä½•åœ°æ–¹ã€‚å®ƒæ˜¯æ„å»ºã€è°ƒæ•´å’Œæ‰©å±•å¯é  AI äº§å“çš„æœ€ç®€ä¾¿æ–¹å¼ã€‚</p>
<ul>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmastra-ai%2Fmastra" target="_blank" title="https://github.com/mastra-ai/mastra" ref="nofollow noopener noreferrer">github.com/mastra-ai/mâ€¦</a></li>
<li>ğŸŒŸ Starï¼š19.1K</li>
</ul>
<h3 data-id="heading-10">æ€»ç»“</h3>
<p>åœ¨ä¸Šè¿°åå¤§ AI Agent æ¡†æ¶ä¸­ï¼ŒPython ç”Ÿæ€å æ®ä¸»å¯¼åœ°ä½ï¼Œå…¶ä¸­å…«ä¸ªåŸºäº Python å¼€å‘ã€‚å¯¹äºå‰ç«¯å¼€å‘è€…è€Œè¨€ï¼ŒåŸºäº TypeScript çš„ Vercel AI SDK å’Œ Mastra æ˜¯æ›´è´´åˆæŠ€æœ¯æ ˆçš„ä¼˜è´¨é€‰æ‹©ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI Agent æ ¸å¿ƒç­–ç•¥ï¼šå¦‚ä½•åˆ¤æ–­ Agent åº”è¯¥åœæ­¢]]></title>    <link>https://juejin.cn/post/7592017365140308020</link>    <guid>https://juejin.cn/post/7592017365140308020</guid>    <pubDate>2026-01-06T00:32:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592017365140308020" data-draft-id="7591702898080759823" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI Agent æ ¸å¿ƒç­–ç•¥ï¼šå¦‚ä½•åˆ¤æ–­ Agent åº”è¯¥åœæ­¢"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2026-01-06T00:32:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ½˜é”¦"/> <meta itemprop="url" content="https://juejin.cn/user/730549110707431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI Agent æ ¸å¿ƒç­–ç•¥ï¼šå¦‚ä½•åˆ¤æ–­ Agent åº”è¯¥åœæ­¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/730549110707431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ½˜é”¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T00:32:34.000Z" title="Tue Jan 06 2026 00:32:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç®€å•æ¥è®²ï¼ŒAI Agent å®ç°çš„çš„å¤§é€»è¾‘å°±æ˜¯ä¸€ä¸ªå¤§çš„å¾ªç¯ + è·å–ä¸Šä¸‹æ–‡ + ä¸åœçš„ LLM è°ƒç”¨ + å·¥å…·çš„è°ƒç”¨ã€‚</p>
<p>é‚£ä¹ˆä¸€ä¸ªå…³é”®é—®é¢˜å°±å‡ºç°äº†ï¼šè¿™ä¸ªå¾ªç¯ä»€ä¹ˆæ—¶å€™åº”è¯¥åœæ­¢ï¼Ÿå¦‚æœå¤„ç†ä¸å½“ï¼ŒAgent å¯èƒ½ä¼šé™·å…¥æ— é™å¾ªç¯ï¼Œæµªè´¹è®¡ç®—èµ„æºï¼Œæˆ–è€…è¿‡æ—©åœæ­¢è€Œæ— æ³•å®Œæˆä»»åŠ¡ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ AI Agent åœæ­¢ç­–ç•¥çš„æ ¸å¿ƒè®¾è®¡æ€è·¯ã€‚</p>
<h2 data-id="heading-0">å¸¸ç”¨åœæ­¢ç­–ç•¥</h2>
<p>AI Agent åœæ­¢ç­–ç•¥æ— å¤–ä¹ä»¥ä¸‹å‡ ç§æƒ…å†µï¼š</p>
<ol>
<li>ç¡¬æ€§é™åˆ¶</li>
</ol>
<p>æœ€ç®€å•ç²—æš´çš„æ–¹æ³•ï¼š</p>
<ul>
<li>æœ€å¤§æ­¥æ•°é™åˆ¶ï¼ˆæ¯”å¦‚æœ€å¤šå¾ªç¯ 30 æ¬¡ï¼‰</li>
<li>æ‰§è¡Œæ—¶é—´é™åˆ¶ï¼ˆæ¯”å¦‚æœ€å¤šè·‘ 5 åˆ†é’Ÿï¼‰</li>
<li>API è°ƒç”¨æ¬¡æ•°é™åˆ¶ï¼ˆæ¯”å¦‚æœ€å¤šè°ƒ 100 æ¬¡ï¼‰</li>
<li>API è°ƒç”¨ Token æ•°é™åˆ¶</li>
</ul>
<p>è¿™ç§æ–¹æ³•ç®€å•æœ‰æ•ˆï¼Œä½†ç”¨æˆ·ä½“éªŒå¾ˆå·®ã€‚ç»å¸¸å‡ºç°ä»»åŠ¡åšåˆ°ä¸€åŠè¢«å¼ºåˆ¶åœæ­¢çš„æƒ…å†µã€‚</p>
<ol start="2">
<li>ä»»åŠ¡å®Œæˆæ£€æµ‹</li>
</ol>
<p>è®© LLM åˆ¤æ–­ä»»åŠ¡æ˜¯å¦å®Œæˆï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ¯æ¬¡å¾ªç¯åé—® LLM</span>
<span class="hljs-attr">response</span> = llm.ask(<span class="hljs-string">"ä»»åŠ¡æ˜¯å¦å·²ç»å®Œæˆï¼Ÿ"</span>)
if <span class="hljs-attr">response</span> == <span class="hljs-string">"æ˜¯"</span>:
    stop()
</code></pre>
<ol start="3">
<li>æ˜¾å¼åœæ­¢ä¿¡å·</li>
</ol>
<p>ç»™ Agent ä¸€ä¸ªä¸“é—¨çš„"åœæ­¢"å·¥å…·ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">tools</span> = [
    <span class="hljs-string">"search"</span>,
    <span class="hljs-string">"calculate"</span>, 
    <span class="hljs-string">"terminate"</span>  <span class="hljs-comment"># ä¸“é—¨ç”¨æ¥åœæ­¢</span>
]
</code></pre>
<p>å½“ Agent è°ƒç”¨ terminate å·¥å…·æ—¶å°±åœæ­¢ã€‚è¿™ä¸ªæ–¹æ³•ä¸é”™ï¼Œä½†éœ€è¦åœ¨ prompt é‡Œæ•™ä¼š Agent ä»€ä¹ˆæ—¶å€™è¯¥è°ƒç”¨å®ƒã€‚</p>
<ol start="4">
<li>å¾ªç¯æ£€æµ‹</li>
</ol>
<p>æ£€æµ‹ Agent æ˜¯å¦åœ¨åšé‡å¤çš„äº‹ï¼š</p>
<ul>
<li>è¿ç»­å¤šæ¬¡è°ƒç”¨åŒä¸€ä¸ªå·¥å…·</li>
<li>åŠ¨ä½œåºåˆ—å‡ºç°å¾ªç¯æ¨¡å¼ï¼ˆAâ†’Bâ†’Aâ†’B...ï¼‰</li>
<li>è¾“å‡ºå†…å®¹é«˜åº¦ç›¸ä¼¼</li>
</ul>
<ol start="5">
<li>é”™è¯¯ç´¯ç§¯</li>
</ol>
<p>è¿ç»­å¤±è´¥å¤šæ¬¡å°±æ”¾å¼ƒï¼š</p>
<pre><code class="hljs language-css" lang="css">if consecutive_errors &gt; <span class="hljs-number">3</span>:
    <span class="hljs-built_in">stop</span>(<span class="hljs-string">"è¿ç»­å¤±è´¥å¤ªå¤šæ¬¡"</span>)
</code></pre>
<ol start="6">
<li>ç”¨æˆ·ä¸­æ–­</li>
</ol>
<p>è®©ç”¨æˆ·èƒ½éšæ—¶å–Šåœã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬ä»¥ OpenManus å’Œ Gemini CLI çš„æºç æ¥çœ‹ä¸€ä¸‹ä»–ä»¬æ˜¯æ€ä¹ˆåšçš„ã€‚</p>
<h2 data-id="heading-1">OpenManus çš„åœæ­¢é€»è¾‘</h2>
<p>OpenManus çš„åœæ­¢æœºåˆ¶è®¾è®¡å¾—æ¯”è¾ƒå®Œæ•´ï¼Œå®ƒç”¨äº†ä¸€ä¸ªå¤šå±‚é˜²æŠ¤çš„æ€è·¯ã€‚</p>
<h2 data-id="heading-2">æ ¸å¿ƒï¼šterminate å·¥å…·</h2>
<p>OpenManus ç»™æ¯ä¸ª Agent éƒ½é…äº†ä¸€ä¸ª terminate å·¥å…·ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Terminate</span>(<span class="hljs-title class_ inherited__">BaseTool</span>):
    name: <span class="hljs-built_in">str</span> = <span class="hljs-string">"terminate"</span>
    description = <span class="hljs-string">"""å½“è¯·æ±‚å·²æ»¡è¶³æˆ–æ— æ³•ç»§ç»­æ—¶ç»ˆæ­¢äº¤äº’ã€‚
    å®Œæˆæ‰€æœ‰ä»»åŠ¡åï¼Œè°ƒç”¨æ­¤å·¥å…·ç»“æŸå·¥ä½œã€‚"""</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params">self, status: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"äº¤äº’å·²å®Œæˆï¼ŒçŠ¶æ€ï¼š<span class="hljs-subst">{status}</span>"</span>
        
ä»¥ä¸Šä¸ºç¤ºä¾‹ï¼ŒåŸå§‹ä»£ç ï¼š
<span class="hljs-keyword">from</span> app.tool.base <span class="hljs-keyword">import</span> BaseTool


_TERMINATE_DESCRIPTION = <span class="hljs-string">"""Terminate the interaction when the request is met OR if the assistant cannot proceed further with the task.
When you have finished all the tasks, call this tool to end the work."""</span>


<span class="hljs-keyword">class</span> <span class="hljs-title class_">Terminate</span>(<span class="hljs-title class_ inherited__">BaseTool</span>):
    name: <span class="hljs-built_in">str</span> = <span class="hljs-string">"terminate"</span>
    description: <span class="hljs-built_in">str</span> = _TERMINATE_DESCRIPTION
    parameters: <span class="hljs-built_in">dict</span> = {
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"object"</span>,
        <span class="hljs-string">"properties"</span>: {
            <span class="hljs-string">"status"</span>: {
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"string"</span>,
                <span class="hljs-string">"description"</span>: <span class="hljs-string">"The finish status of the interaction."</span>,
                <span class="hljs-string">"enum"</span>: [<span class="hljs-string">"success"</span>, <span class="hljs-string">"failure"</span>],
            }
        },
        <span class="hljs-string">"required"</span>: [<span class="hljs-string">"status"</span>],
    }

    <span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params">self, status: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-string">"""Finish the current execution"""</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"The interaction has been completed with status: <span class="hljs-subst">{status}</span>"</span>
</code></pre>
<p>OpenManus ä½¿ç”¨çš„æ˜¯æ–¹æ¡ˆ 3ï¼ŒæŠŠã€Œä½•æ—¶åœæ­¢ã€çš„å†³ç­–æƒäº¤ç»™äº† LLMã€‚prompt é‡Œä¼šæ˜ç¡®å‘Šè¯‰ Agentï¼šä»»åŠ¡å®Œæˆäº†å°±è°ƒç”¨ terminateã€‚</p>
<h2 data-id="heading-3">çŠ¶æ€æœºç®¡ç†</h2>
<p>OpenManus ç”¨çŠ¶æ€æœºæ¥ç®¡ç† Agent çš„ç”Ÿå‘½å‘¨æœŸï¼š</p>
<pre><code class="hljs language-ini" lang="ini">class AgentState(Enum):
    <span class="hljs-attr">IDLE</span> = <span class="hljs-string">"idle"</span>
    <span class="hljs-attr">RUNNING</span> = <span class="hljs-string">"running"</span>  
    <span class="hljs-attr">FINISHED</span> = <span class="hljs-string">"finished"</span>
    <span class="hljs-attr">ERROR</span> = <span class="hljs-string">"error"</span>
</code></pre>
<p>å½“æ£€æµ‹åˆ°ç‰¹æ®Šå·¥å…·ï¼ˆå¦‚ terminateï¼‰è¢«è°ƒç”¨æ—¶ï¼Œä¼šè§¦å‘çŠ¶æ€è½¬æ¢ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_handle_special_tool</span>(<span class="hljs-params">self, name: <span class="hljs-built_in">str</span>, result: <span class="hljs-type">Any</span></span>):
    <span class="hljs-keyword">if</span> name.lower() == <span class="hljs-string">"terminate"</span>:
        self.state = AgentState.FINISHED
        logger.info(<span class="hljs-string">"ğŸ ä»»åŠ¡å®Œæˆï¼"</span>)
</code></pre>
<h2 data-id="heading-4">æ­¥æ•°é™åˆ¶</h2>
<p>ä¸åŒç±»å‹çš„ Agent æœ‰ä¸åŒçš„æ­¥æ•°ä¸Šé™ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ToolCallAgent: 30 æ­¥</span>
<span class="hljs-comment"># SWEAgent: 20 æ­¥</span>
<span class="hljs-comment"># PlanningFlow: å¯é…ç½®</span>

<span class="hljs-keyword">while</span> self.current_step &lt; self.max_steps <span class="hljs-keyword">and</span> self.state != AgentState.FINISHED:
    self.current_step += <span class="hljs-number">1</span>
    <span class="hljs-keyword">await</span> self.step()

<span class="hljs-keyword">if</span> self.current_step &gt;= self.max_steps:
    results.append(<span class="hljs-string">f"è¾¾åˆ°æœ€å¤§æ­¥æ•°é™åˆ¶ (<span class="hljs-subst">{self.max_steps}</span>)"</span>)
</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ªä¿åº•æœºåˆ¶ï¼Œé˜²æ­¢ Agent æ— é™è¿è¡Œã€‚</p>
<h2 data-id="heading-5">å¡æ­»æ£€æµ‹</h2>
<p>OpenManus è¿˜ä¼šæ£€æµ‹ Agent æ˜¯å¦å¡ä½äº†ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">is_stuck</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">bool</span>:
    <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤çš„ assistant æ¶ˆæ¯</span>
    <span class="hljs-comment"># å¦‚æœæœ€è¿‘çš„å›å¤éƒ½ä¸€æ ·ï¼Œè¯´æ˜å¡ä½äº†</span>
    recent_messages = self.get_recent_assistant_messages()
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(<span class="hljs-built_in">set</span>(recent_messages)) == <span class="hljs-number">1</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
</code></pre>
<h2 data-id="heading-6">Planning Agent çš„ç»“æŸé€»è¾‘</h2>
<h3 data-id="heading-7">1. è®¡åˆ’å®Œæˆçš„åˆ¤æ–­æœºåˆ¶</h3>
<p>PlanningFlow çš„ç»“æŸåˆ¤æ–­å¹¶ä¸æ˜¯ç®€å•æ£€æŸ¥æ‰€æœ‰æ­¥éª¤æ˜¯å¦å®Œæˆï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åœ¨ä¸»æ‰§è¡Œå¾ªç¯ä¸­</span>
<span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
    <span class="hljs-comment"># è·å–å½“å‰éœ€è¦æ‰§è¡Œçš„æ­¥éª¤</span>
    self.current_step_index, step_info = <span class="hljs-keyword">await</span> self._get_current_step_info()
    
    <span class="hljs-comment"># å¦‚æœæ²¡æœ‰æ›´å¤šæ´»è·ƒæ­¥éª¤ï¼Œåˆ™ç»“æŸè®¡åˆ’</span>
    <span class="hljs-keyword">if</span> self.current_step_index <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
        result += <span class="hljs-keyword">await</span> self._finalize_plan()
        <span class="hljs-keyword">break</span>
</code></pre>
<h3 data-id="heading-8">2. æ­¥éª¤çŠ¶æ€æ£€æŸ¥é€»è¾‘</h3>
<p>_get_current_step_info() æ–¹æ³•è´Ÿè´£åˆ¤æ–­æ˜¯å¦è¿˜æœ‰æœªå®Œæˆçš„æ­¥éª¤ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æŸ¥æ‰¾ç¬¬ä¸€ä¸ªéå®ŒæˆçŠ¶æ€çš„æ­¥éª¤</span>
<span class="hljs-keyword">for</span> i, step <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(steps):
    <span class="hljs-keyword">if</span> i &gt;= <span class="hljs-built_in">len</span>(step_statuses):
        status = PlanStepStatus.NOT_STARTED.value
    <span class="hljs-keyword">else</span>:
        status = step_statuses[i]
    
    <span class="hljs-comment"># å¦‚æœæ­¥éª¤çŠ¶æ€ä¸ºæ´»è·ƒçŠ¶æ€ï¼ˆæœªå¼€å§‹æˆ–è¿›è¡Œä¸­ï¼‰ï¼Œè¿”å›è¯¥æ­¥éª¤</span>
    <span class="hljs-keyword">if</span> status <span class="hljs-keyword">in</span> PlanStepStatus.get_active_statuses():
        <span class="hljs-keyword">return</span> i, step_info

<span class="hljs-comment"># å¦‚æœæ²¡æ‰¾åˆ°æ´»è·ƒæ­¥éª¤ï¼Œè¿”å› None</span>
<span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>, <span class="hljs-literal">None</span>
</code></pre>
<p>å…¶ä¸­ get_active_statuses() è¿”å› ["not_started", "in_progress"]ï¼Œæ„å‘³ç€åªæœ‰å½“æ‰€æœ‰æ­¥éª¤éƒ½æ˜¯ "completed" æˆ– "blocked" çŠ¶æ€æ—¶ï¼Œè®¡åˆ’æ‰ä¼šç»“æŸã€‚</p>
<h3 data-id="heading-9">3. è®¡åˆ’ç»“æŸå¤„ç†</h3>
<p>å½“æ²¡æœ‰æ›´å¤šæ´»è·ƒæ­¥éª¤æ—¶ï¼Œä¼šè°ƒç”¨ _finalize_plan() æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">_finalize_plan</span>(<span class="hljs-params">self</span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""ä½¿ç”¨ LLM ç”Ÿæˆè®¡åˆ’å®Œæˆæ€»ç»“"""</span>
    plan_text = <span class="hljs-keyword">await</span> self._get_plan_text()
    
    <span class="hljs-comment"># ä½¿ç”¨ LLM ç”Ÿæˆæ€»ç»“</span>
    system_message = Message.system_message(
        <span class="hljs-string">"You are a planning assistant. Your task is to summarize the completed plan."</span>
    )
    
    user_message = Message.user_message(
        <span class="hljs-string">f"The plan has been completed. Here is the final plan status:\n\n<span class="hljs-subst">{plan_text}</span>\n\nPlease provide a summary of what was accomplished and any final thoughts."</span>
    )
    
    response = <span class="hljs-keyword">await</span> self.llm.ask(messages=[user_message], system_msgs=[system_message])
    <span class="hljs-keyword">return</span> <span class="hljs-string">f"Plan completed:\n\n<span class="hljs-subst">{response}</span>"</span>
</code></pre>
<h2 data-id="heading-10">Gemini CLI çš„åœæ­¢é€»è¾‘</h2>
<p>Gemini CLI çš„è®¾è®¡æ€è·¯å®Œå…¨ä¸åŒï¼Œå®ƒç”¨äº†ä¸€ä¸ªæ›´ä¼˜é›…ä½†ä¹Ÿæ›´å¤æ‚çš„æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-11">subagent çš„åœæ­¢é€»è¾‘</h2>
<h3 data-id="heading-12">1. è¾¾åˆ°æœ€å¤§è½®æ¬¡ï¼ˆMAX_TURNSï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.runConfig.max_turns &amp;&amp; turnCounter &gt;= <span class="hljs-keyword">this</span>.runConfig.max_turns) {
    <span class="hljs-keyword">this</span>.output.terminate_reason = SubagentTerminateMode.MAX_TURNS;
    <span class="hljs-keyword">break</span>;
}
</code></pre>
<p>è¿™æ˜¯æœ€ç®€å•çš„ä¿æŠ¤æœºåˆ¶ï¼Œé˜²æ­¢æ— é™å¾ªç¯ã€‚</p>
<h3 data-id="heading-13">2. æ‰§è¡Œè¶…æ—¶ï¼ˆTIMEOUTï¼‰</h3>
<pre><code class="hljs language-ini" lang="ini">let <span class="hljs-attr">durationMin</span> = (Date.now() - startTime) / (<span class="hljs-number">1000</span> * <span class="hljs-number">60</span>)<span class="hljs-comment">;</span>
if (durationMin &gt;= this.runConfig.max_time_minutes) {
    <span class="hljs-attr">this.output.terminate_reason</span> = SubagentTerminateMode.TIMEOUT<span class="hljs-comment">;</span>
    break<span class="hljs-comment">;</span>
}
</code></pre>
<p>æ³¨æ„è¿™é‡Œæ£€æŸ¥äº†ä¸¤æ¬¡è¶…æ—¶ï¼š</p>
<ul>
<li>åœ¨è°ƒç”¨ LLM ä¹‹å‰æ£€æŸ¥ä¸€æ¬¡</li>
<li>åœ¨è°ƒç”¨ LLM ä¹‹ååˆæ£€æŸ¥ä¸€æ¬¡</li>
</ul>
<p>è¿™æ˜¯å› ä¸º LLM è°ƒç”¨å¯èƒ½å¾ˆè€—æ—¶ï¼Œè¦ç¡®ä¿ä¸ä¼šè¶…æ—¶å¤ªå¤šã€‚</p>
<h3 data-id="heading-14">3. ç”¨æˆ·ä¸­æ–­ï¼ˆé€šè¿‡ AbortSignalï¼‰</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">if</span> (abortController.signal.aborted) <span class="hljs-keyword">return</span>;
</code></pre>
<p>è¿™ä¸ªæ£€æŸ¥å‡ºç°åœ¨ stream å¤„ç†å¾ªç¯é‡Œï¼Œç¡®ä¿èƒ½åŠæ—¶å“åº”ç”¨æˆ·çš„å–æ¶ˆæ“ä½œã€‚</p>
<h3 data-id="heading-15">4. é”™è¯¯å¼‚å¸¸ï¼ˆERRORï¼‰</h3>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">catch</span> (<span class="hljs-keyword">error</span>) {
    console.<span class="hljs-keyword">error</span>(<span class="hljs-comment">'Error during subagent execution:', error);</span>
    this.output.terminate_reason = SubagentTerminateMode.<span class="hljs-keyword">ERROR</span>;
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">error</span>;
}
</code></pre>
<p>ä»»ä½•æœªæ•è·çš„å¼‚å¸¸éƒ½ä¼šå¯¼è‡´åœæ­¢ã€‚</p>
<h3 data-id="heading-16">5. ç›®æ ‡å®Œæˆï¼ˆGOALï¼‰</h3>
<p>ç›®æ ‡å®Œæˆçš„åˆ¤æ–­åˆ†ä¸¤ç§æƒ…å†µï¼š</p>
<p>æƒ…å†µAï¼šæ²¡æœ‰é¢„å®šè¾“å‡ºè¦æ±‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.outputConfig || Object.keys(<span class="hljs-keyword">this</span>.outputConfig.outputs).length === <span class="hljs-number">0</span>) {
    <span class="hljs-comment">// æ²¡æœ‰è¦æ±‚ç‰¹å®šè¾“å‡ºï¼ŒLLM ä¸è°ƒç”¨å·¥å…·å°±è®¤ä¸ºå®Œæˆäº†</span>
    <span class="hljs-keyword">if</span> (functionCalls.length === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">this</span>.output.terminate_reason = SubagentTerminateMode.GOAL;
        <span class="hljs-keyword">break</span>;
    }
}
</code></pre>
<p>æƒ…å†µBï¼šæœ‰é¢„å®šè¾“å‡ºè¦æ±‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æ‰€æœ‰è¦æ±‚çš„å˜é‡éƒ½å·²è¾“å‡º</span>
<span class="hljs-keyword">const</span> remainingVars = Object.keys(<span class="hljs-keyword">this</span>.outputConfig.outputs).filter(
    (key) =&gt; !(key <span class="hljs-keyword">in</span> <span class="hljs-keyword">this</span>.output.emitted_vars)
);

<span class="hljs-keyword">if</span> (remainingVars.length === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">this</span>.output.terminate_reason = SubagentTerminateMode.GOAL;
    <span class="hljs-keyword">break</span>;
}
</code></pre>
<h2 data-id="heading-17">å£°æ˜å¼è¾“å‡ºç³»ç»Ÿçš„å®ç°</h2>
<p>å£°æ˜å¼è¾“å‡ºç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯ outputConfigï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// é¢„å…ˆå£°æ˜éœ€è¦ä»€ä¹ˆè¾“å‡º</span>
<span class="hljs-keyword">this</span>.outputConfig = {
    outputs: {
        <span class="hljs-string">"summary"</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-string">"recommendations"</span>: <span class="hljs-string">"array"</span>, 
        <span class="hljs-string">"risk_score"</span>: <span class="hljs-string">"number"</span>
    }
};

<span class="hljs-comment">// Agent é€šè¿‡ self.emitvalue å·¥å…·æ¥äº§ç”Ÿè¾“å‡º</span>
<span class="hljs-comment">// æ¯æ¬¡è°ƒç”¨ä¼šæŠŠå€¼å­˜åˆ° this.output.emitted_vars é‡Œ</span>
<span class="hljs-keyword">this</span>.output.emitted_vars = {
    <span class="hljs-string">"summary"</span>: <span class="hljs-string">"è¿™æ˜¯æ€»ç»“..."</span>,
    <span class="hljs-string">"recommendations"</span>: [<span class="hljs-string">"å»ºè®®1"</span>, <span class="hljs-string">"å»ºè®®2"</span>]
    <span class="hljs-comment">// risk_score è¿˜æ²¡è¾“å‡º</span>
};
</code></pre>
<p>ç³»ç»Ÿä¼šä¸æ–­æ£€æŸ¥ emitted_vars æ˜¯å¦åŒ…å«äº†æ‰€æœ‰ outputs ä¸­å£°æ˜çš„å˜é‡ã€‚åªæœ‰å…¨éƒ¨è¾“å‡ºäº†æ‰è®¤ä¸ºç›®æ ‡å®Œæˆã€‚</p>
<h2 data-id="heading-18">Nudge æœºåˆ¶</h2>
<p>Nudgeï¼ˆè½»æ¨ï¼‰æœºåˆ¶ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">if</span> (functionCalls.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {  <span class="hljs-comment">// LLM åœæ­¢è°ƒç”¨å·¥å…·äº†</span>
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¿˜æœ‰å˜é‡æ²¡è¾“å‡º</span>
    <span class="hljs-keyword">const</span> remainingVars = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">outputConfig</span>.<span class="hljs-property">outputs</span>).<span class="hljs-title function_">filter</span>(
        <span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> !(key <span class="hljs-keyword">in</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">output</span>.<span class="hljs-property">emitted_vars</span>)
    );
    
    <span class="hljs-keyword">if</span> (remainingVars.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// è¿˜æœ‰å˜é‡æ²¡è¾“å‡ºï¼Œ"æ¨"å®ƒä¸€ä¸‹</span>
        <span class="hljs-keyword">const</span> nudgeMessage = <span class="hljs-string">`You have stopped calling tools but have not emitted 
        the following required variables: <span class="hljs-subst">${remainingVars.join(<span class="hljs-string">', '</span>)}</span>. 
        Please use the 'self.emitvalue' tool to emit them now, 
        or continue working if necessary.`</span>;
        
        <span class="hljs-comment">// æŠŠæé†’ä½œä¸ºæ–°çš„ç”¨æˆ·æ¶ˆæ¯å‘ç»™ LLM</span>
        currentMessages = [{
            <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>,
            <span class="hljs-attr">parts</span>: [{ <span class="hljs-attr">text</span>: nudgeMessage }]
        }];
        
        <span class="hljs-comment">// ç»§ç»­å¾ªç¯ï¼Œä¸é€€å‡º</span>
    }
}
</code></pre>
<h2 data-id="heading-19">å®Œæ•´çš„ subagent æ‰§è¡Œæµç¨‹</h2>
<pre><code class="hljs language-arduino" lang="arduino">å¼€å§‹
  â†“
<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
  æ£€æŸ¥æ˜¯å¦è¶…æ—¶/è¶…è½®æ¬¡ â†’ æ˜¯ â†’ é€€å‡º
    â†“ å¦
  è°ƒç”¨ LLM
    â†“
  LLM è¿”å›å·¥å…·è°ƒç”¨ï¼Ÿ
    â”œâ”€ æ˜¯ â†’ æ‰§è¡Œå·¥å…· â†’ æ£€æŸ¥ç›®æ ‡æ˜¯å¦å®Œæˆ
    â”‚         â”œâ”€ æ˜¯ â†’ é€€å‡º
    â”‚         â””â”€ å¦ â†’ ç»§ç»­å¾ªç¯
    â”‚
    â””â”€ å¦ï¼ˆLLM åœæ­¢è°ƒç”¨å·¥å…·ï¼‰
         â†“
       æœ‰é¢„å®šè¾“å‡ºè¦æ±‚å—ï¼Ÿ
         â”œâ”€ æ²¡æœ‰ â†’ é€€å‡ºï¼ˆè®¤ä¸ºå®Œæˆï¼‰
         â””â”€ æœ‰ â†’ æ£€æŸ¥æ˜¯å¦éƒ½è¾“å‡ºäº†
                   â”œâ”€ æ˜¯ â†’ é€€å‡º
                   â””â”€ å¦ â†’ Nudge æé†’ â†’ ç»§ç»­å¾ªç¯
}
</code></pre>
<h2 data-id="heading-20">ä¸‰å±‚å¾ªç¯æ£€æµ‹æœºåˆ¶</h2>
<h3 data-id="heading-21">ç¬¬ä¸€å±‚ï¼šå·¥å…·è°ƒç”¨é‡å¤æ£€æµ‹</h3>
<p>è¿™æ˜¯æœ€ç®€å•ç›´æ¥çš„æ£€æµ‹ï¼Œé’ˆå¯¹ Agent åå¤è°ƒç”¨ç›¸åŒå·¥å…·çš„æƒ…å†µã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> checkToolCallLoop(toolCall: { name: string; args: <span class="hljs-keyword">object</span> }): boolean {
    <span class="hljs-comment">// æŠŠå·¥å…·åå’Œå‚æ•°ä¸€èµ·å“ˆå¸Œï¼Œç”Ÿæˆå”¯ä¸€æ ‡è¯†</span>
    <span class="hljs-keyword">const</span> key = <span class="hljs-keyword">this</span>.getToolCallKey(toolCall);
    
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.lastToolCallKey === key) {
        <span class="hljs-comment">// å’Œä¸Šæ¬¡è°ƒç”¨å®Œå…¨ä¸€æ ·ï¼Œè®¡æ•°+1</span>
        <span class="hljs-keyword">this</span>.toolCallRepetitionCount++;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// ä¸ä¸€æ ·ï¼Œé‡ç½®è®¡æ•°</span>
        <span class="hljs-keyword">this</span>.lastToolCallKey = key;
        <span class="hljs-keyword">this</span>.toolCallRepetitionCount = <span class="hljs-number">1</span>;
    }
    
    <span class="hljs-comment">// è¿ç»­5æ¬¡è°ƒç”¨ç›¸åŒå·¥å…·+ç›¸åŒå‚æ•° = å¾ªç¯</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.toolCallRepetitionCount &gt;= TOOL_CALL_LOOP_THRESHOLD) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<p>è§¦å‘æ¡ä»¶ï¼šè¿ç»­ 5 æ¬¡è°ƒç”¨å®Œå…¨ç›¸åŒçš„å·¥å…·ï¼ˆåŒ…æ‹¬å‚æ•°ï¼‰ã€‚</p>
<p>è¿™ç§æ£€æµ‹å¾ˆä¸¥æ ¼â€”â€”å¿…é¡»æ˜¯è¿ç»­çš„ã€å®Œå…¨ç›¸åŒçš„è°ƒç”¨ã€‚å¦‚æœä¸­é—´æ’å…¥äº†å…¶ä»–å·¥å…·è°ƒç”¨ï¼Œè®¡æ•°å°±ä¼šé‡ç½®ã€‚</p>
<h3 data-id="heading-22">ç¬¬äºŒå±‚ï¼šå†…å®¹é‡å¤æ£€æµ‹ï¼ˆ"å’’è¯­"æ£€æµ‹ï¼‰</h3>
<p>è¿™æ˜¯æœ€å¤æ‚çš„éƒ¨åˆ†ï¼Œç”¨æ¥æ£€æµ‹ LLM è¾“å‡ºé‡å¤å†…å®¹çš„æƒ…å†µï¼Œå°±åƒåœ¨å¿µå’’è¯­ä¸€æ ·ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> checkContentLoop(content: string): boolean {
    <span class="hljs-comment">// 1. å…ˆæ£€æŸ¥æ˜¯å¦åœ¨ç‰¹æ®Šå†…å®¹å—ä¸­ï¼ˆä»£ç å—ã€è¡¨æ ¼ã€åˆ—è¡¨ç­‰ï¼‰</span>
    <span class="hljs-keyword">const</span> numFences = (content.match(/```/g) ?? []).length;
    <span class="hljs-keyword">const</span> hasTable = /(^|\n)\s*(|.*||[|+-]{<span class="hljs-number">3</span>,})/.test(content);
    <span class="hljs-comment">// ... æ£€æŸ¥å„ç§æ ¼å¼</span>
    
    <span class="hljs-comment">// åœ¨ä»£ç å—ä¸­ä¸æ£€æµ‹å¾ªç¯ï¼ˆä»£ç æœ¬æ¥å°±å¯èƒ½æœ‰é‡å¤ï¼‰</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.inCodeBlock) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">// 2. æŠŠæ–°å†…å®¹åŠ å…¥å†å²</span>
    <span class="hljs-keyword">this</span>.streamContentHistory += content;
    
    <span class="hljs-comment">// 3. ä¿æŒå†å²åœ¨ 1000 å­—ç¬¦ä»¥å†…</span>
    <span class="hljs-keyword">this</span>.truncateAndUpdate();
    
    <span class="hljs-comment">// 4. åˆ†æå†…å®¹å—æ˜¯å¦é‡å¤</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.analyzeContentChunksForLoop();
}
</code></pre>
<p>æ ¸å¿ƒç®—æ³•æ˜¯æ»‘åŠ¨çª—å£ + å“ˆå¸Œæ£€æµ‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> analyzeContentChunksForLoop(): boolean {
    <span class="hljs-keyword">while</span> (<span class="hljs-keyword">this</span>.hasMoreChunksToProcess()) {
        <span class="hljs-comment">// æå– 50 å­—ç¬¦çš„å—</span>
        <span class="hljs-keyword">const</span> currentChunk = <span class="hljs-keyword">this</span>.streamContentHistory.substring(
            <span class="hljs-keyword">this</span>.lastContentIndex,
            <span class="hljs-keyword">this</span>.lastContentIndex + CONTENT_CHUNK_SIZE  <span class="hljs-comment">// 50</span>
        );
        
        <span class="hljs-comment">// è®¡ç®—å“ˆå¸Œ</span>
        <span class="hljs-keyword">const</span> chunkHash = createHash(<span class="hljs-string">'sha256'</span>).update(currentChunk).digest(<span class="hljs-string">'hex'</span>);
        
        <span class="hljs-comment">// æ£€æŸ¥è¿™ä¸ªå—æ˜¯å¦é‡å¤å‡ºç°</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isLoopDetectedForChunk(currentChunk, chunkHash)) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        
        <span class="hljs-comment">// æ»‘åŠ¨çª—å£å‘å‰ç§»åŠ¨ 1 ä¸ªå­—ç¬¦</span>
        <span class="hljs-keyword">this</span>.lastContentIndex++;
    }
}
</code></pre>
<p>åˆ¤æ–­å¾ªç¯çš„æ¡ä»¶ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> isLoopDetectedForChunk(chunk: string, hash: string): boolean {
    <span class="hljs-keyword">const</span> existingIndices = <span class="hljs-keyword">this</span>.contentStats.<span class="hljs-keyword">get</span>(hash);
    
    <span class="hljs-keyword">if</span> (!existingIndices) {
        <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è§åˆ°è¿™ä¸ªå—ï¼Œè®°å½•ä½ç½®</span>
        <span class="hljs-keyword">this</span>.contentStats.<span class="hljs-keyword">set</span>(hash, [<span class="hljs-keyword">this</span>.lastContentIndex]);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">// éªŒè¯å†…å®¹ç¡®å®ç›¸åŒï¼ˆé˜²æ­¢å“ˆå¸Œç¢°æ’ï¼‰</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.isActualContentMatch(chunk, existingIndices[<span class="hljs-number">0</span>])) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    existingIndices.push(<span class="hljs-keyword">this</span>.lastContentIndex);
    
    <span class="hljs-comment">// éœ€è¦å‡ºç°è‡³å°‘ 10 æ¬¡</span>
    <span class="hljs-keyword">if</span> (existingIndices.length &lt; CONTENT_LOOP_THRESHOLD) {  <span class="hljs-comment">// 10</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">// å…³é”®ï¼šè¿™ 10 æ¬¡å¿…é¡»è·ç¦»å¾ˆè¿‘ï¼ˆå¹³å‡è·ç¦» â‰¤ 75 å­—ç¬¦ï¼‰</span>
    <span class="hljs-keyword">const</span> recentIndices = existingIndices.slice(-CONTENT_LOOP_THRESHOLD);
    <span class="hljs-keyword">const</span> totalDistance = recentIndices[recentIndices.length - <span class="hljs-number">1</span>] - recentIndices[<span class="hljs-number">0</span>];
    <span class="hljs-keyword">const</span> averageDistance = totalDistance / (CONTENT_LOOP_THRESHOLD - <span class="hljs-number">1</span>);
    <span class="hljs-keyword">const</span> maxAllowedDistance = CONTENT_CHUNK_SIZE * <span class="hljs-number">1.5</span>;  <span class="hljs-comment">// 75</span>
    
    <span class="hljs-keyword">return</span> averageDistance &lt;= maxAllowedDistance;
}
</code></pre>
<p>è§¦å‘æ¡ä»¶ï¼šåŒä¸€ä¸ª 50 å­—ç¬¦çš„å†…å®¹å—ï¼Œåœ¨å¾ˆçŸ­çš„è·ç¦»å†…é‡å¤å‡ºç° 10 æ¬¡ã€‚</p>
<h3 data-id="heading-23">ç¬¬ä¸‰å±‚ï¼šLLM æ™ºèƒ½æ£€æµ‹</h3>
<p>è¿™æ˜¯æœ€é«˜çº§çš„æ£€æµ‹ï¼Œç”¨ AI æ¥åˆ¤æ–­ AI æ˜¯å¦é™·å…¥å¾ªç¯ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">private</span> async <span class="hljs-title function_ invoke__">checkForLoopWithLLM</span>(<span class="hljs-attr">signal</span>: AbortSignal) {
    <span class="hljs-comment">// å–æœ€è¿‘ 20 è½®å¯¹è¯</span>
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">recentHistory</span> = this.config
        .<span class="hljs-title function_ invoke__">getGeminiClient</span>()
        .<span class="hljs-title function_ invoke__">getHistory</span>()
        .<span class="hljs-title function_ invoke__">slice</span>(-LLM_LOOP_CHECK_HISTORY_COUNT);  <span class="hljs-comment">// 20</span>
    
    <span class="hljs-comment">// æ¸…ç†å†å²ï¼ˆå»æ‰æ‚¬ç©ºçš„å‡½æ•°è°ƒç”¨ç­‰ï¼‰</span>
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">trimmedHistory</span> = this.<span class="hljs-title function_ invoke__">trimRecentHistory</span>(recentHistory);
    
    <span class="hljs-comment">// è®© Gemini Flash æ¨¡å‹åˆ†æ</span>
    <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">result</span> = await this.config.<span class="hljs-title function_ invoke__">getBaseLlmClient</span>().<span class="hljs-title function_ invoke__">generateJson</span>({
        <span class="hljs-attr">contents</span>: [...trimmedHistory, { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">parts</span>: [{ <span class="hljs-attr">text</span>: taskPrompt }] }],
        <span class="hljs-attr">schema</span>: {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'object'</span>,
            <span class="hljs-attr">properties</span>: {
                <span class="hljs-attr">reasoning</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span> },
                <span class="hljs-attr">confidence</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'number'</span> }  // <span class="hljs-number">0</span>-<span class="hljs-number">1</span> ä¹‹é—´
            }
        },
        <span class="hljs-attr">model</span>: DEFAULT_GEMINI_FLASH_MODEL,
        <span class="hljs-attr">systemInstruction</span>: LOOP_DETECTION_SYSTEM_PROMPT
    });
    
    <span class="hljs-keyword">if</span> (result[<span class="hljs-string">'confidence'</span>] &gt; <span class="hljs-number">0.9</span>) {
        <span class="hljs-comment">// é«˜ç½®ä¿¡åº¦è®¤ä¸ºæ˜¯å¾ªç¯</span>
        console.<span class="hljs-title function_ invoke__">warn</span>(result[<span class="hljs-string">'reasoning'</span>]);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<p>è§¦å‘æ—¶æœºï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">async turnStarted(signal: AbortSignal) {
    <span class="hljs-keyword">this</span>.turnsInCurrentPrompt++;
    
    <span class="hljs-keyword">if</span> (
        <span class="hljs-keyword">this</span>.turnsInCurrentPrompt &gt;= LLM_CHECK_AFTER_TURNS &amp;&amp;  <span class="hljs-comment">// è‡³å°‘ 30 è½®</span>
        <span class="hljs-keyword">this</span>.turnsInCurrentPrompt - <span class="hljs-keyword">this</span>.lastCheckTurn &gt;= <span class="hljs-keyword">this</span>.llmCheckInterval
    ) {
        <span class="hljs-keyword">this</span>.lastCheckTurn = <span class="hljs-keyword">this</span>.turnsInCurrentPrompt;
        <span class="hljs-keyword">return</span> await <span class="hljs-keyword">this</span>.checkForLoopWithLLM(signal);
    }
}
</code></pre>
<ul>
<li>å¿…é¡»æ‰§è¡Œè¶…è¿‡ 30 è½®æ‰å¼€å§‹æ£€æŸ¥ï¼ˆé¿å…è¯¯åˆ¤ï¼‰</li>
<li>ä¸æ˜¯æ¯è½®éƒ½æ£€æŸ¥ï¼Œæœ‰é—´éš”ï¼ˆé»˜è®¤ 3 è½®ï¼‰</li>
<li>é—´éš”ä¼šæ ¹æ®ç½®ä¿¡åº¦åŠ¨æ€è°ƒæ•´ï¼ˆ5-15 è½®ï¼‰</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŠ¨æ€è°ƒæ•´æ£€æŸ¥é¢‘ç‡</span>
<span class="hljs-variable language_">this</span>.<span class="hljs-property">llmCheckInterval</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(
    <span class="hljs-variable constant_">MIN_LLM_CHECK_INTERVAL</span> +  <span class="hljs-comment">// 5</span>
    (<span class="hljs-variable constant_">MAX_LLM_CHECK_INTERVAL</span> - <span class="hljs-variable constant_">MIN_LLM_CHECK_INTERVAL</span>) * (<span class="hljs-number">1</span> - result[<span class="hljs-string">'confidence'</span>])
    <span class="hljs-comment">// ç½®ä¿¡åº¦è¶Šé«˜ï¼Œæ£€æŸ¥è¶Šé¢‘ç¹</span>
);
</code></pre>
<h2 data-id="heading-24">ä¸‰ç§å¾ªç¯ç±»å‹</h2>
<p>ç³»ç»Ÿå®šä¹‰äº†ä¸‰ç§å¾ªç¯ç±»å‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">LoopType</span> {
    CONSECUTIVE_IDENTICAL_TOOL_CALLS,  <span class="hljs-comment">// è¿ç»­ç›¸åŒå·¥å…·è°ƒç”¨</span>
    CHANTING_IDENTICAL_SENTENCES,      <span class="hljs-comment">// é‡å¤è¾“å‡ºç›¸åŒå†…å®¹</span>
    LLM_DETECTED_LOOP                  <span class="hljs-comment">// LLM æ£€æµ‹åˆ°çš„é€»è¾‘å¾ªç¯</span>
}
</code></pre>
<p>æ¯ç§éƒ½æœ‰ä¸åŒçš„æ£€æµ‹æ–¹æ³•å’Œè§¦å‘æ¡ä»¶ã€‚</p>
<p>è¿™æ¯”è¾ƒé€‚åˆå¤„ç†é•¿å¯¹è¯åœºæ™¯ï¼Œæ—¢èƒ½æœ‰æ•ˆæ£€æµ‹å¾ªç¯ï¼Œåˆä¸ä¼šå› ä¸ºè¿‡äºæ•æ„Ÿè€Œè¯¯åˆ¤æ­£å¸¸çš„è¿­ä»£æ“ä½œã€‚</p>
<h2 data-id="heading-25">å°ç»“</h2>
<p>AI Agent çš„åœæ­¢ç­–ç•¥æ˜¯ä¸€ä¸ªå®¹æ˜“è¢«å¿½è§†ä½†æå…¶é‡è¦çš„æŠ€æœ¯é—®é¢˜ã€‚ä»åŸç†ä¸Šçœ‹ï¼ŒAgent å°±æ˜¯ä¸€ä¸ªå¤§å¾ªç¯ï¼Œä¸æ–­è°ƒç”¨ LLM å’Œå·¥å…·æ¥å®Œæˆä»»åŠ¡ï¼Œä½†å¦‚æœæ²¡æœ‰åˆç†çš„åœæ­¢æœºåˆ¶ï¼Œå°±ä¼šå‡ºç°æ— é™å¾ªç¯æµªè´¹èµ„æºï¼Œæˆ–è€…è¿‡æ—©åœæ­¢æ— æ³•å®Œæˆä»»åŠ¡çš„é—®é¢˜ã€‚å¸¸è§çš„åœæ­¢æ–¹æ¡ˆåŒ…æ‹¬ç¡¬æ€§é™åˆ¶ï¼ˆæ­¥æ•°ã€æ—¶é—´ã€APIè°ƒç”¨æ¬¡æ•°ï¼‰ã€ä»»åŠ¡å®Œæˆæ£€æµ‹ã€æ˜¾å¼åœæ­¢ä¿¡å·ã€å¾ªç¯æ£€æµ‹ã€é”™è¯¯ç´¯ç§¯å’Œç”¨æˆ·ä¸­æ–­ç­‰ï¼Œå®é™…åº”ç”¨ä¸­éœ€è¦ç»„åˆä½¿ç”¨å¤šç§ç­–ç•¥ã€‚</p>
<p>OpenManus é‡‡ç”¨äº†ç›¸å¯¹ç®€å•ç›´æ¥çš„è®¾è®¡ï¼šç»™æ¯ä¸ª Agent é…å¤‡ terminate å·¥å…·ï¼Œè®© LLM è‡ªå·±å†³å®šä½•æ—¶åœæ­¢ï¼ŒåŒæ—¶ç”¨çŠ¶æ€æœºç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼Œé…åˆæ­¥æ•°é™åˆ¶ä½œä¸ºä¿åº•ï¼Œå¹¶ç¡®ä¿æ— è®ºå¦‚ä½•åœæ­¢éƒ½ä¼šæ­£ç¡®æ¸…ç†èµ„æºã€‚</p>
<p>è€Œ Gemini CLI çš„è®¾è®¡æ›´åŠ ç²¾å·§ï¼Œæ ¸å¿ƒæ˜¯å£°æ˜å¼è¾“å‡ºç³»ç»Ÿâ€”â€”é¢„å…ˆå®šä¹‰éœ€è¦ä»€ä¹ˆè¾“å‡ºï¼Œåªæœ‰å…¨éƒ¨è¾“å‡ºæ‰ç®—å®Œæˆï¼Œå¦‚æœ Agent åœæ­¢è°ƒç”¨å·¥å…·ä½†è¿˜æœ‰å˜é‡æœªè¾“å‡ºï¼Œç³»ç»Ÿä¼šé€šè¿‡ Nudge æœºåˆ¶æ¸©å’Œæé†’ï¼›åœ¨å¾ªç¯æ£€æµ‹ä¸Šï¼ŒGemini å®ç°äº†ä¸‰å±‚é˜²æŠ¤ï¼šå·¥å…·è°ƒç”¨é‡å¤æ£€æµ‹ï¼ˆè¿ç»­5æ¬¡ç›¸åŒè°ƒç”¨ï¼‰ã€å†…å®¹é‡å¤æ£€æµ‹ï¼ˆæ»‘åŠ¨çª—å£+å“ˆå¸Œç®—æ³•æ£€æµ‹"å’’è¯­"ç°è±¡ï¼‰ã€ä»¥åŠç”¨ LLM åˆ†æå¯¹è¯å†å²åˆ¤æ–­æ˜¯å¦é™·å…¥é€»è¾‘å¾ªç¯ã€‚</p>
<p>å®è·µä¸­çš„å…³é”®æ˜¯ä¸è¦ä¾èµ–å•ä¸€åœæ­¢æœºåˆ¶ï¼Œè¦ç»„åˆä½¿ç”¨å¤šç§ç­–ç•¥å½¢æˆå¤šå±‚é˜²æŠ¤ï¼Œç»™ LLM æ˜ç¡®çš„åœæ­¢æŒ‡å¼•ï¼Œä¸ºä¸åŒç±»å‹çš„åœæ­¢åŸå› æä¾›æ¸…æ™°çš„ç”¨æˆ·åé¦ˆï¼Œå¹¶ç¡®ä¿èµ„æºèƒ½å¤Ÿå¯é æ¸…ç†ã€‚åœæ­¢ç­–ç•¥çš„æœ¬è´¨æ˜¯åœ¨"è®© Agent å®Œæˆä»»åŠ¡"å’Œ"é˜²æ­¢å¤±æ§"ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ç‚¹ã€‚</p>
<p>ä»¥ä¸Šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[â°å‰ç«¯å‘¨åˆŠç¬¬447æœŸï¼ˆ2025å¹´12æœˆ28æ—¥â€“2026å¹´1æœˆ3æ—¥ï¼‰ï½æ–°å¹´å¥½ï½]]></title>    <link>https://juejin.cn/post/7591703562134519842</link>    <guid>https://juejin.cn/post/7591703562134519842</guid>    <pubDate>2026-01-06T00:34:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591703562134519842" data-draft-id="7591703562134503458" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="â°å‰ç«¯å‘¨åˆŠç¬¬447æœŸï¼ˆ2025å¹´12æœˆ28æ—¥â€“2026å¹´1æœˆ3æ—¥ï¼‰ï½æ–°å¹´å¥½ï½"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-06T00:34:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            â°å‰ç«¯å‘¨åˆŠç¬¬447æœŸï¼ˆ2025å¹´12æœˆ28æ—¥â€“2026å¹´1æœˆ3æ—¥ï¼‰ï½æ–°å¹´å¥½ï½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T00:34:50.000Z" title="Tue Jan 06 2026 00:34:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ“¢ <strong>å®£è¨€</strong>ï¼š<strong>æ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œæ¨èå¤§å®¶é˜…è¯»/ç¿»è¯‘ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ï¼Œä¹Ÿä¸ºå†™ä½œæˆ–çªç ´æ–°é¢†åŸŸæä¾›çµæ„Ÿ~</strong></p>
<p>æ¬¢è¿å¤§å®¶è®¿é—®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank" title="https://github.com/TUARAN/frontend-weekly-digest-cn" ref="nofollow noopener noreferrer">github.com/TUARAN/fronâ€¦</a>
é¡ºæ‰‹ç‚¹ä¸ª â­ star æ”¯æŒï¼Œæ˜¯æˆ‘ä»¬æŒç»­è¾“å‡ºçš„ç»­èˆªç”µæ± ğŸ”‹âœ¨ï¼</p>
<p>åœ¨çº¿ç½‘å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ffwdc.pages.dev%2F" target="_blank" title="https://fwdc.pages.dev/" ref="nofollow noopener noreferrer">fwdc.pages.dev/</a></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2506018f41948a6b94a2c8b3fb0d5d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768264490&amp;x-signature=81FACm2ZdQLtYOM5y6ZjtMVaKys%3D" alt="å‰ç«¯å‘¨åˆŠå°é¢" loading="lazy"/></p>
<hr/>
<p>ğŸ’¬ <strong>æ¨èè¯­</strong></p>
<p>æ–°å¹´ç¬¬ä¸€æœŸæ›´åâ€œè¶‹åŠ¿ + å®æ“ + å·¥ç¨‹å«ç”Ÿâ€ã€‚</p>
<p>Web å¼€å‘éƒ¨åˆ†ä» 2026 å¹´è¶‹åŠ¿ã€Astro æœˆåº¦æ›´æ–°ä¸ HTML5 æ–‡æ¡£å¤§çº²çš„å†å²ç»ˆç« å‡ºå‘ï¼ŒåŒæ—¶å¤ç›˜ React2Shell å®‰å…¨æ¼æ´çš„æ¥é¾™å»è„‰ï¼Œå¹¶è®¨è®ºåˆ†é¡µæ˜¯å¦è¯¥è·³è½¬æ–°é¡µé¢ä¸ Hotwire è¿™ç±»â€œHTML é©±åŠ¨äº¤äº’â€çš„è·¯çº¿ã€‚å·¥å…·ä¸æ€§èƒ½æ ç›®èšç„¦æ›´è½»é‡çš„ Lint ä½“éªŒã€å¸¸ç”¨ DevTools èƒ½åŠ›ä¸æ€§èƒ½æ’æŸ¥æ–¹æ³•è®ºï¼ˆå«å¯¹â€œæµ…ä¼šè¯â€SPAã€ç¬¬ä¸‰æ–¹å•ç‚¹æ•…éšœç­‰é—®é¢˜çš„åæ€ï¼‰ï¼›æœ€ååœ¨ Web Componentsã€CSS ä¸å„æ¡†æ¶ç”Ÿæ€ï¼ˆSvelte/React/Angular/TypeScriptï¼‰é‡Œè¡¥é½ç»„ä»¶åŒ–ä¸ç±»å‹å®‰å…¨çš„æœ€æ–°å®è·µã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ—‚ æœ¬æœŸç²¾é€‰ç›®å½•</h2>
<h3 data-id="heading-1">ğŸ§­ Web å¼€å‘</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2F8-trends-web-dev-2026%2F" target="_blank" title="https://blog.logrocket.com/8-trends-web-dev-2026/" ref="nofollow noopener noreferrer">The 8 trends that will define web development in 2026</a>ï¼šæ€»ç»“ 2026 å¹´å¯èƒ½ä¸»å¯¼ Web å¼€å‘æ–¹å‘çš„ 8 ä¸ªè¶‹åŠ¿ï¼Œç”¨äºæŠ€æœ¯é€‰å‹ä¸å›¢é˜Ÿè§„åˆ’å‚è€ƒã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fastro.build%2Fblog%2Fwhats-new-december-2025%2F" target="_blank" title="https://astro.build/blog/whats-new-december-2025/" ref="nofollow noopener noreferrer">Whatâ€™s new in Astro â€” December 2025</a>ï¼šAstro 2025 å¹´ 12 æœˆæ›´æ–°é€Ÿè§ˆï¼šæ–°ç‰¹æ€§ã€æ”¹è¿›ä¸ç”Ÿæ€åŠ¨æ€ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tempertemper.net%2Fblog%2Fthe-final-nail-in-the-html5-document-outline-coffin" target="_blank" title="https://www.tempertemper.net/blog/the-final-nail-in-the-html5-document-outline-coffin" ref="nofollow noopener noreferrer">The final nail in the HTML5 document outline coffin</a>ï¼šå›é¡¾å¹¶ç¡®è®¤ HTML5 æ–‡æ¡£å¤§çº²ï¼ˆoutlineï¼‰æœºåˆ¶çš„â€œæœ€åä¸€é’‰â€ï¼Œæ¾„æ¸…å›´ç»•æ ‡é¢˜å±‚çº§ä¸è¯­ä¹‰ç»“æ„çš„è¯¯è§£ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.csoonline.com%2Farticle%2F4111888%2Freact2shell-anatomy-of-a-max-severity-flaw-that-sent-shockwaves-through-the-web.html" target="_blank" title="https://www.csoonline.com/article/4111888/react2shell-anatomy-of-a-max-severity-flaw-that-sent-shockwaves-through-the-web.html" ref="nofollow noopener noreferrer">React2Shell: Anatomy of a max-severity flaw that sent shockwaves through the web</a>ï¼šæ‹†è§£ React2Shell è¿™ç±»é«˜å±æ¼æ´çš„æˆå› ã€å½±å“é¢ä¸ä¿®å¤è¦ç‚¹ï¼Œå¸®åŠ©ç†è§£ä¾›åº”é“¾/æ¡†æ¶çº§é£é™©ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.tempertemper.net%2Fblog%2Fshould-pagination-take-you-to-a-new-page" target="_blank" title="https://www.tempertemper.net/blog/should-pagination-take-you-to-a-new-page" ref="nofollow noopener noreferrer">Should pagination take you to a new page?</a>ï¼šè®¨è®ºåˆ†é¡µäº¤äº’åˆ°åº•è¯¥â€œæ¢é¡µâ€è¿˜æ˜¯â€œå±€éƒ¨æ›´æ–°â€ï¼Œä»å¯ç”¨æ€§ã€å¯è®¿é—®æ€§ä¸é¢„æœŸä¸€è‡´æ€§å‡ºå‘ç»™å‡ºæƒè¡¡ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.infoworld.com%2Farticle%2F4100499%2Fintro-to-hotwire-interactive-javascript-built-from-html.html" target="_blank" title="https://www.infoworld.com/article/4100499/intro-to-hotwire-interactive-javascript-built-from-html.html" ref="nofollow noopener noreferrer">Intro to Hotwire: HTMX alternative for developing supercharged, responsive web applications.</a>ï¼šHotwire å…¥é—¨ï¼šä»¥ HTML ä¸ºä¸­å¿ƒæ„å»ºäº¤äº’å¼åº”ç”¨çš„å¦ä¸€æ¡è·¯çº¿ï¼Œä½œä¸º HTMX çš„å¤‡é€‰/å¯¹ç…§æ€è·¯ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftympanus.net%2Fcodrops%2F2026%2F01%2F04%2Fefecto-building-real-time-ascii-and-dithering-effects-with-webgl-shaders%2F" target="_blank" title="https://tympanus.net/codrops/2026/01/04/efecto-building-real-time-ascii-and-dithering-effects-with-webgl-shaders/" ref="nofollow noopener noreferrer">Efecto: Building Real-Time ASCII and Dithering Effects with WebGL Shaders</a>ï¼šç”¨ WebGL Shader å®æ—¶å®ç° ASCII ä¸æŠ–åŠ¨ï¼ˆditheringï¼‰è§†è§‰æ•ˆæœçš„å®Œæ•´æ‹†è§£ä¸å®ç°è·¯å¾„ã€‚</li>
</ul>
<h4 data-id="heading-2">ğŸ›  å·¥å…·</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.flint.fyi%2Fblog%2Fintroducing-flint%2F" target="_blank" title="https://www.flint.fyi/blog/introducing-flint/" ref="nofollow noopener noreferrer">Introducing Flint â€” A fast, friendly linter for JavaScript, TypeScript, and more.</a>ï¼šFlint ä»£ç æ£€æŸ¥å™¨ä»‹ç»ï¼šä¸»æ‰“æ›´å¿«ã€æ›´å‹å¥½çš„ lint ä½“éªŒï¼Œè¦†ç›– JS/TS ç­‰å¤šè¯­è¨€åœºæ™¯ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcalendar.perfplanet.com%2F2025%2Fchrome-devtools-all-the-time%2F" target="_blank" title="https://calendar.perfplanet.com/2025/chrome-devtools-all-the-time/" ref="nofollow noopener noreferrer">Chrome DevTools Features I Use All the Time (and Why You Should Too)</a>ï¼šä½œè€…å¸¸ç”¨çš„ DevTools åŠŸèƒ½æ¸…å•ä¸ä½¿ç”¨ç†ç”±ï¼Œé€‚åˆæŸ¥æ¼è¡¥ç¼ºæå‡è°ƒè¯•æ•ˆç‡ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fstackoverflow.blog%2F2025%2F12%2F30%2Fa-new-era-of-stack-overflow%2F" target="_blank" title="https://stackoverflow.blog/2025/12/30/a-new-era-of-stack-overflow/" ref="nofollow noopener noreferrer">A new era of Stack Overflow</a>ï¼šStack Overflow çš„æ–°é˜¶æ®µä¸äº§å“æ–¹å‘å˜åŒ–ï¼Œé¢å‘å¼€å‘è€…ç¤¾åŒºç”Ÿæ€çš„è§‚å¯Ÿã€‚</li>
</ul>
<h4 data-id="heading-3">âš¡ æ€§èƒ½</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcalendar.perfplanet.com%2F2025%2Fthe-curious-case-of-the-shallow-session-spas%2F" target="_blank" title="https://calendar.perfplanet.com/2025/the-curious-case-of-the-shallow-session-spas/" ref="nofollow noopener noreferrer">The Curious Case of the Shallow Session SPAs</a>ï¼šåˆ†æâ€œæµ…ä¼šè¯â€SPA çš„å…¸å‹è¡¨ç°ä¸æ½œåœ¨ä»£ä»·ï¼Œåæ€ç•™å­˜ã€æ€§èƒ½ä¸ä½“éªŒä¹‹é—´çš„å–èˆã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcalendar.perfplanet.com%2F2025%2Fteaching-agents-about-performance-insights%2F" target="_blank" title="https://calendar.perfplanet.com/2025/teaching-agents-about-performance-insights/" ref="nofollow noopener noreferrer">Teaching Agents about Performance insights</a>ï¼šæ¢è®¨å¦‚ä½•æŠŠæ€§èƒ½æ´å¯Ÿä¸æ’æŸ¥ç»éªŒä¼ é€’ç»™ AI/Agentï¼Œè®©è‡ªåŠ¨åŒ–åˆ†ææ›´å¯é ã€å¯å¤ç”¨ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcalendar.perfplanet.com%2F2025%2Fthird-parties-and-single-points-of-failure%2F" target="_blank" title="https://calendar.perfplanet.com/2025/third-parties-and-single-points-of-failure/" ref="nofollow noopener noreferrer">Third Parties and Single Points of Failure</a>ï¼šç¬¬ä¸‰æ–¹ä¾èµ–å¦‚ä½•å½¢æˆå•ç‚¹æ•…éšœï¼ˆSPOFï¼‰ï¼Œä»¥åŠåœ¨æ¶æ„ä¸ç›‘æ§å±‚é¢çš„ç¼“è§£ç­–ç•¥ã€‚</li>
</ul>
<h4 data-id="heading-4">ğŸ§© Web Components</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aaron-gustafson.com%2Fnotebook%2Fa-web-component-starter-template%2F" target="_blank" title="https://www.aaron-gustafson.com/notebook/a-web-component-starter-template/" ref="nofollow noopener noreferrer">A Production-Ready Web Component Starter Template</a>ï¼šä¸€ä¸ªæ›´è´´è¿‘ç”Ÿäº§ç¯å¢ƒçš„ Web Component è„šæ‰‹æ¶/æ¨¡æ¿ï¼Œè¦†ç›–å·¥ç¨‹åŒ–ä¸å‘å¸ƒæ‰€éœ€çš„åŸºç¡€è¦ç´ ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aaron-gustafson.com%2Fnotebook%2Ffullscreen-video-and-iframes-made-easy%2F" target="_blank" title="https://www.aaron-gustafson.com/notebook/fullscreen-video-and-iframes-made-easy/" ref="nofollow noopener noreferrer">Fullscreen Video and Iframes Made Easy with Web Component</a>ï¼šç”¨ Web Component å°è£…å…¨å±è§†é¢‘ä¸ iframe çš„å¸¸è§äº¤äº’ä¸å…¼å®¹ç»†èŠ‚ï¼Œé™ä½é›†æˆæˆæœ¬ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendmasters.com%2Fblog%2Fcustom-elements-with-lit-html%2F" target="_blank" title="https://frontendmasters.com/blog/custom-elements-with-lit-html/" ref="nofollow noopener noreferrer">How I Write Custom Elements with lit-html</a>ï¼šç”¨ lit-html ç¼–å†™è‡ªå®šä¹‰å…ƒç´ çš„å®è·µè·¯çº¿ï¼šæ¨¡æ¿æ¸²æŸ“ã€çŠ¶æ€æ›´æ–°ä¸ç»„ä»¶ç»„ç»‡æ–¹å¼ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fheydonworks.com%2Farticle%2Fdynamically-loading-custom-elements%2F" target="_blank" title="https://heydonworks.com/article/dynamically-loading-custom-elements/" ref="nofollow noopener noreferrer">How To Dynamically Install Custom Elements</a>ï¼šåŠ¨æ€åŠ è½½/æ³¨å†Œ Custom Elements çš„æ–¹æ³•ä¸æ³¨æ„äº‹é¡¹ï¼Œå…¼é¡¾æ€§èƒ½ä¸æ¸è¿›å¢å¼ºã€‚</li>
</ul>
<h3 data-id="heading-5">ğŸ¨ CSS</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontendmasters.com%2Fblog%2Fimportant-and-css-custom-properties%2F" target="_blank" title="https://frontendmasters.com/blog/important-and-css-custom-properties/" ref="nofollow noopener noreferrer">!important and CSS Custom Properties</a>ï¼šè®¨è®º <code>!important</code> ä¸ CSS è‡ªå®šä¹‰å±æ€§ï¼ˆå˜é‡ï¼‰ç»“åˆæ—¶çš„å±‚å ä¸è¦†ç›–ç­–ç•¥ï¼Œé¿å…æ ·å¼å¤±æ§ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffractaledmind.com%2F2026%2F01%2F02%2Fwriting-tailwind-compatible-semantic-css%2F" target="_blank" title="https://fractaledmind.com/2026/01/02/writing-tailwind-compatible-semantic-css/" ref="nofollow noopener noreferrer">Writing Tailwind-compatible Semantic CSS</a>ï¼šå¦‚ä½•å†™â€œè¯­ä¹‰åŒ–ä½†åˆå…¼å®¹ Tailwindâ€çš„ CSSï¼šåœ¨å·¥å…·ç±»ä¸è¯­ä¹‰å±‚ä¹‹é—´æ‰¾åˆ°å¯ç»´æŠ¤çš„å¹³è¡¡ã€‚</li>
</ul>
<h3 data-id="heading-6">ğŸ’¡ JavaScript</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fthenewstack.io%2Fwhy-developers-are-ditching-frameworks-for-vanilla-javascript%2F" target="_blank" title="https://thenewstack.io/why-developers-are-ditching-frameworks-for-vanilla-javascript/" ref="nofollow noopener noreferrer">Why Developers Are Ditching Frameworks for Vanilla JavaScript</a>ï¼šä¸ºä»€ä¹ˆæœ‰äº›å›¢é˜Ÿåœ¨å›å½’åŸç”Ÿ JSï¼šä»å¤æ‚åº¦ã€æ€§èƒ½ã€é•¿æœŸç»´æŠ¤ä¸ä¾èµ–é£é™©è§’åº¦è®¨è®ºã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fsvelte.dev%2Fblog%2Fwhats-new-in-svelte-january-2026" target="_blank" title="https://svelte.dev/blog/whats-new-in-svelte-january-2026" ref="nofollow noopener noreferrer">Whatâ€™s new in Svelte: January 2026</a>ï¼šSvelte 2026 å¹´ 1 æœˆæ›´æ–°æ±‡æ€»ï¼šæ–°èƒ½åŠ›ä¸ç”Ÿæ€è¿›å±•é€Ÿè§ˆã€‚</li>
</ul>
<h4 data-id="heading-7">ğŸ§· TypeScript</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhackers.pub%2F%40hongminhee%2F2026%2Ftypescript-sync-async-type-safety" target="_blank" title="https://hackers.pub/@hongminhee/2026/typescript-sync-async-type-safety" ref="nofollow noopener noreferrer">Designing type-safe sync/async mode support in TypeScript</a>ï¼šåœ¨ TS ä¸­è®¾è®¡åŒæ—¶æ”¯æŒåŒæ­¥/å¼‚æ­¥æ¨¡å¼çš„ç±»å‹å®‰å…¨ APIï¼šçº¦æŸã€æ¨æ–­ä¸è°ƒç”¨ä½“éªŒçš„æƒè¡¡ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ftkdodo.eu%2Fblog%2Fbuilding-type-safe-compound-components" target="_blank" title="https://tkdodo.eu/blog/building-type-safe-compound-components" ref="nofollow noopener noreferrer">Building Type-Safe Compound Components</a>ï¼šæ„å»ºç±»å‹å®‰å…¨çš„ Compound Componentsï¼ˆç»„åˆç»„ä»¶ï¼‰æ¨¡å¼ï¼šè®©ç»„åˆ API æ›´æ˜“ç”¨ã€æ›´ä¸æ˜“å†™é”™ã€‚</li>
</ul>
<h4 data-id="heading-8">âš›ï¸ React</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhackyourmom.com%2Fen%2Fnovyny%2Fbotnet-rondodox-ekspluatuye-vrazlyvist-react2shell-dlya-zlamu-serveriv-next-js%2F" target="_blank" title="https://hackyourmom.com/en/novyny/botnet-rondodox-ekspluatuye-vrazlyvist-react2shell-dlya-zlamu-serveriv-next-js/" ref="nofollow noopener noreferrer">RondoDox botnet exploits React2Shell flaw to breach Next.js servers</a>ï¼šReact2Shell è¢«ç”¨äºæ”»å‡» Next.js æœåŠ¡çš„æ¡ˆä¾‹æŠ¥é“ï¼Œæé†’åŠæ—¶ä¿®å¤ä¸åŠ å¼ºé˜²æŠ¤ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjsdev.space%2Freact-form-primitives%2F" target="_blank" title="https://jsdev.space/react-form-primitives/" ref="nofollow noopener noreferrer">Designing Predictable and Maintainable Forms in React</a>ï¼šç”¨â€œè¡¨å•åŸè¯­â€çš„æ€è·¯è®¾è®¡å¯é¢„æµ‹ã€å¯ç»´æŠ¤çš„ React è¡¨å•ï¼šçŠ¶æ€è¾¹ç•Œã€æ ¡éªŒä¸å¯å¤ç”¨ç»“æ„ã€‚</li>
</ul>
<h4 data-id="heading-9">ğŸ…°ï¸ Angular</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.telerik.com%2Fblogs%2Fdata-fetching-modern-angular" target="_blank" title="https://www.telerik.com/blogs/data-fetching-modern-angular" ref="nofollow noopener noreferrer">Data Fetching in Modern Angular</a>ï¼šç°ä»£ Angular çš„æ•°æ®è·å–å®è·µï¼šå¸¸è§æ–¹æ¡ˆä¸åœ¨å·¥ç¨‹ä¸­è½åœ°æ—¶çš„æ³¨æ„ç‚¹ã€‚</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.to%2Fthis-is-angular%2Fng-news-angular-in-2025-307a" target="_blank" title="https://dev.to/this-is-angular/ng-news-angular-in-2025-307a" ref="nofollow noopener noreferrer">Ng-News: Angular in 2025</a>ï¼šå›é¡¾ 2025 å¹´ Angular çš„å…³é”®å˜åŒ–ä¸ç”Ÿæ€åŠ¨æ€ï¼Œå¸®åŠ©å¿«é€Ÿè¡¥é½è¿‘å†µã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­¦ç”Ÿå›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿç¬¬äºŒå¼¹]]></title>    <link>https://juejin.cn/post/7591719013489524774</link>    <guid>https://juejin.cn/post/7591719013489524774</guid>    <pubDate>2026-01-06T00:38:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591719013489524774" data-draft-id="7591708519449870345" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­¦ç”Ÿå›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿç¬¬äºŒå¼¹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-06T00:38:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åƒé©¬é“ƒè–¯é•¿å¤§çš„åœŸè±†"/> <meta itemprop="url" content="https://juejin.cn/user/1162661349831369"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­¦ç”Ÿå›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿç¬¬äºŒå¼¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1162661349831369/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åƒé©¬é“ƒè–¯é•¿å¤§çš„åœŸè±†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T00:38:45.000Z" title="Tue Jan 06 2026 00:38:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸€ç¯‡çº¯åˆ†äº«ä»£ç çš„æ–‡ç« ï¼ˆçº¯å±•ç¤ºï¼‰ï¼Œæ–‡ç« çš„å¼€å¤´å…ˆè¯´æ˜ä¸€ä¸‹æœ¬æ–‡ç« çš„ä»£ç æ¥æºäºBç«™åšä¸»ï¼Œæ›´è¯¦ç»†çš„è¯·å»Bç«™è§‚çœ‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a3ece4c8fe74f7fb392a0e843a21f25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCD6ams6ZOD6Jav6ZW_5aSn55qE5Zyf6LGG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768264725&amp;x-signature=T16gLC3o9N%2BXTU6dBUhd4L2pt78%3D" alt="å±å¹•æˆªå›¾ 2026-01-05 154859.png" loading="lazy"/>
é¦–å…ˆå±•ç¤ºä¸€ä¸‹ä¸»æ’­å»ºçš„æ–‡ä»¶å¤¹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/702e7ec432e94d458b7b16574e0fab1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCD6ams6ZOD6Jav6ZW_5aSn55qE5Zyf6LGG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768264725&amp;x-signature=qs8JLCDoEvKE16uwF7zvmb%2B7fuY%3D" alt="å±å¹•æˆªå›¾ 2026-01-06 082112.png" loading="lazy"/></p>
<p>æ²¡é”™ä¸»æ’­ä¸ºäº†å†™è¿™ä¸ªå»ºç«‹äº†ä¸‰ä¸ªæ–‡ä»¶å¤¹ï¼Œè‡³äºåŸå› è¯·å‚è€ƒä¸Šä¸€ç¯‡æ–‡ç« ã€‚ï¼ˆåœ¨è¿™é‡Œè¯´ä¸€ä¸‹è¯·å¤§å®¶è§‚çœ‹è§†é¢‘çš„æ—¶å€™å°½é‡å’ŒBç«™çš„åšä¸»å†™çš„ä¸€æ ·ä¸è¦åŠ å…¥è‡ªå·±çš„å°å·§æ€ï¼‰å¥½äº†ä¸‹é¢å°±æ˜¯ä»£ç å±•ç¤º</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94c18eac54e2426e8e8c7ee0b593cf7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZCD6ams6ZOD6Jav6ZW_5aSn55qE5Zyf6LGG:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768264725&amp;x-signature=uzC6f6He2erWO4XwZocBG1iO8%2Bc%3D" alt="å±å¹•æˆªå›¾ 2026-01-06 083324.png" loading="lazy"/></p>
<pre><code class="hljs">fan,123,æ™®é€šç”¨æˆ·
admin,123,ç®¡ç†å‘˜
chen,123,æ™®é€šç”¨æˆ·
TEST,123,æ™®é€šç”¨æˆ·
fain,123,æ™®é€šç”¨æˆ·
</code></pre>

<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-number">1</span>,å¿ƒçµæ¼æ´æŒ‡å—,è€å¡,<span class="hljs-literal">true</span>
<span class="hljs-number">2</span>,ä¹Œæ‰˜é‚¦è¯´æ˜ä¹¦,å¸•æ‹‰å›¾,<span class="hljs-literal">true</span>
<span class="hljs-number">3</span>,ç«æ˜Ÿäººæˆé•¿æ—¥è®°,è‰¾å·¥,<span class="hljs-literal">true</span>
<span class="hljs-number">4</span>,å¤§èƒ¡å­æ–‡è±ªå¤–å²,æ—è€å¸ˆ,<span class="hljs-literal">true</span>
<span class="hljs-number">5</span>,å¥¶å¥¶çš„å›å¿†å½•åƒå¸¦,æ¨å¥¶å¥¶,<span class="hljs-literal">true</span>
<span class="hljs-number">6</span>,æ¸…ä»£èŒåœºè¾¾äººç¬”è®°,å¼ å²å®˜,<span class="hljs-literal">true</span>
<span class="hljs-number">7</span>,å¿ƒå­¦ä½¿ç”¨æ‰‹å†Œ,å±±å”,<span class="hljs-literal">true</span>
<span class="hljs-number">8</span>,æ™šå¹´æ‰“æ€ªæ—¥å¿—,æˆ´å¥¶å¥¶,<span class="hljs-literal">true</span>
<span class="hljs-number">9</span>,é£å‡ºå±±è°·å¤‡å¿˜å½•,å¡”æ‹‰,<span class="hljs-literal">true</span>
<span class="hljs-number">10</span>,çº¢çŒ«æ—¶ä»£çš„å¹•åç¬”è®°,å‚…æ•™æˆ,<span class="hljs-literal">true</span>
<span class="hljs-number">11</span>,å¿ƒçµæ¼æ´æŒ‡å—,è€å¡,<span class="hljs-literal">true</span>
</code></pre>

<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">fan,1,å¿ƒçµæ¼æ´æŒ‡å—,2026-01-03T20:24:24.926523400,2026-01-03T21:31:44.418616</span>
</code></pre>

<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> org.app

<span class="hljs-keyword">import</span> org.app.models.{BookModel, UserModel}
<span class="hljs-keyword">import</span> org.app.service.{BookService, UserService}

<span class="hljs-keyword">import</span> scala.io.StdIn
<span class="hljs-keyword">import</span> scala.io.StdIn.readLine

<span class="hljs-keyword">class</span> <span class="hljs-title class_">LibrarayPresentation</span> {

  <span class="hljs-keyword">private</span> <span class="hljs-type">val</span> <span class="hljs-variable">BookService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BookService</span>()
  <span class="hljs-keyword">private</span> <span class="hljs-type">val</span> <span class="hljs-variable">UserService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserService</span>()

  <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•ï¼Œè¾“å…¥å›¾ä¹¦çš„ä¿¡æ¯ï¼Œè¿”å›ä¸€ä¸ªBookModelå¯¹è±¡</span>
  <span class="hljs-keyword">private</span> def <span class="hljs-title function_">inputBookInfo</span><span class="hljs-params">()</span>: BookModel = {
    println(<span class="hljs-string">"è¯·è¾“å…¥å›¾ä¹¦çš„åç§°:"</span>)
    <span class="hljs-type">val</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> readLine().trim
    <span class="hljs-title function_">println</span><span class="hljs-params">(<span class="hljs-string">"è¯·è¾“å…¥å›¾ä¹¦çš„ä½œè€…:"</span>)</span>
    <span class="hljs-type">val</span> <span class="hljs-variable">author</span> <span class="hljs-operator">=</span> readLine().trim
    <span class="hljs-title function_">println</span><span class="hljs-params">(<span class="hljs-string">"è¯·è¾“å…¥å›¾ä¹¦æ˜¯å¦å¯ä»¥å¤–æ¥ï¼ˆtrue/falseï¼‰:"</span>)</span>
    <span class="hljs-type">val</span> <span class="hljs-variable">available</span> <span class="hljs-operator">=</span> StdIn.readBoolean()
    <span class="hljs-comment">// åˆå§‹è®¾ç½®ç¼–å·ä¸º0</span>
    BookModel(<span class="hljs-number">0</span>, name, author, available)
  }
  <span class="hljs-comment">// æ˜¾ç¤ºæ¸¸å®¢çš„èœå•</span>
  def <span class="hljs-title function_">showVisitorMenu</span><span class="hljs-params">()</span>: Unit = {
    <span class="hljs-type">var</span> <span class="hljs-variable">running</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
    <span class="hljs-title function_">while</span> <span class="hljs-params">(running)</span> {
      println(<span class="hljs-string">"æ¬¢è¿æ¥åˆ°æˆ‘çš„å›¾ä¹¦ç®¡ç†ç³»ç»Ÿï¼Œè¯·é€‰æ‹©"</span>)
      println(<span class="hljs-string">"1. æŸ¥çœ‹æ‰€æœ‰å›¾ä¹¦"</span>)
      println(<span class="hljs-string">"2. æŸ¥è¯¢å›¾ä¹¦"</span>)
      println(<span class="hljs-string">"3. ç™»å½•"</span>)
      println(<span class="hljs-string">"4. ç¦»å¼€"</span>)

      <span class="hljs-comment">// è·å–ç”¨æˆ·çš„æ“ä½œ</span>
      <span class="hljs-type">val</span> <span class="hljs-variable">choice</span> <span class="hljs-operator">=</span> StdIn.readLine().trim
      choice match {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"1"</span> =&gt;
          <span class="hljs-comment">// TODO æŸ¥çœ‹æ‰€æœ‰å›¾ä¹¦</span>
          <span class="hljs-comment">// è°ƒç”¨ä¸šåŠ¡é€»è¾‘å±‚çš„æ–¹æ³•</span>
          <span class="hljs-type">val</span> <span class="hljs-variable">results</span> <span class="hljs-operator">=</span> BookService.searchBooks(<span class="hljs-string">""</span>)
          <span class="hljs-keyword">if</span>(results.nonEmpty){
            results.foreach(println)
          } <span class="hljs-keyword">else</span> {
            println(<span class="hljs-string">"æ²¡æœ‰æ‰¾åˆ°å›¾ä¹¦"</span>)
          }
        <span class="hljs-keyword">case</span> <span class="hljs-string">"2"</span> =&gt;
        <span class="hljs-comment">// æç¤ºç”¨æˆ·è¾“å…¥æŸ¥è¯¢å…³é”®å­—</span>
          <span class="hljs-type">val</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> readLine(<span class="hljs-string">"è¯·è¾“å…¥æŸ¥è¯¢å…³é”®å­—(ä¹¦å, ä½œè€…):"</span>).trim
          <span class="hljs-comment">// æ ¹æ®å…³é”®å­—å»æŸ¥è¯¢å›¾ä¹¦åˆ—è¡¨ï¼Œæ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„ä¹¦</span>
          <span class="hljs-type">val</span> <span class="hljs-variable">results</span> <span class="hljs-operator">=</span> BookService.searchBooks(query)
          <span class="hljs-comment">// æ˜¾ç¤ºå‡ºæ¥</span>
          <span class="hljs-keyword">if</span>(results.nonEmpty){
            println(<span class="hljs-string">"======æŸ¥è¯¢å›¾ä¹¦çš„ç»“æœ======="</span>)
            results.foreach(println)
          } <span class="hljs-keyword">else</span> {
            println(<span class="hljs-string">"æ²¡æœ‰æ‰¾åˆ°å›¾ä¹¦"</span>)
          }

        <span class="hljs-keyword">case</span> <span class="hljs-string">"3"</span> =&gt;
          println(<span class="hljs-string">"è¯·è¾“å…¥ç”¨æˆ·å: "</span>)
          <span class="hljs-type">val</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> StdIn.readLine().trim
          <span class="hljs-title function_">println</span><span class="hljs-params">(<span class="hljs-string">"è¯·è¾“å…¥å¯†ç : "</span>)</span>
          <span class="hljs-type">val</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> StdIn.readLine().trim
          <span class="hljs-comment">// è°ƒç”¨Serviceçš„æ–¹æ³•ï¼Œè¿›è¡Œç™»å½•</span>
          <span class="hljs-type">val</span> <span class="hljs-variable">userOpt</span> <span class="hljs-operator">=</span> UserService.authenticateUser(username, password)
          <span class="hljs-keyword">if</span>(userOpt.isEmpty){
            println(<span class="hljs-string">"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"</span>)
          } <span class="hljs-keyword">else</span> {
            println(<span class="hljs-string">"ç™»å½•æˆåŠŸ"</span>)
            <span class="hljs-comment">// ç™»å½•æˆåŠŸï¼Œæ˜¾ç¤ºç™»å½•ç”¨æˆ·çš„èœå•</span>
            <span class="hljs-type">val</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userOpt.get
            user.role match {
              <span class="hljs-keyword">case</span> <span class="hljs-string">"ç®¡ç†å‘˜"</span> =&gt; showAdminMenu(user)
              <span class="hljs-keyword">case</span> <span class="hljs-string">"æ™®é€šç”¨æˆ·"</span> =&gt; showUserMenu(user)
            }
          }
        <span class="hljs-keyword">case</span> <span class="hljs-string">"4"</span> =&gt;
          running = <span class="hljs-literal">false</span>
          <span class="hljs-title function_">println</span><span class="hljs-params">(<span class="hljs-string">"æ„Ÿè°¢ä½ çš„ä½¿ç”¨, ä¸‹æ¬¡å†è§"</span>)</span>
        <span class="hljs-type">case</span> <span class="hljs-variable">_</span> <span class="hljs-operator">=</span>&gt; println(<span class="hljs-string">"æ— æ•ˆçš„é€‰æ‹©"</span>)
      }
    }
  }

  <span class="hljs-comment">// æ˜¾ç¤ºç®¡ç†å‘˜çš„èœå•</span>
  def <span class="hljs-title function_">showAdminMenu</span><span class="hljs-params">(user:UserModel)</span>: Unit = {
    <span class="hljs-type">var</span> <span class="hljs-variable">running</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
    <span class="hljs-title function_">while</span> <span class="hljs-params">(running)</span> {
      println(s<span class="hljs-string">"æ¬¢è¿ç®¡ç†å‘˜:${user.username},æ¥åˆ°æˆ‘çš„å›¾ä¹¦ç®¡ç†ç³»ç»Ÿï¼Œè¯·é€‰æ‹©"</span>)
      println(<span class="hljs-string">"1. æ·»åŠ å›¾ä¹¦"</span>)
      println(<span class="hljs-string">"2. æŸ¥è¯¢å›¾ä¹¦"</span>)
      println(<span class="hljs-string">"3. æ·»åŠ ç”¨æˆ·"</span>)
      println(<span class="hljs-string">"4. é€€å‡º"</span>)

      <span class="hljs-comment">// è·å–ç”¨æˆ·çš„æ“ä½œ</span>
      <span class="hljs-type">val</span> <span class="hljs-variable">choice</span> <span class="hljs-operator">=</span> StdIn.readLine().trim
      choice match {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"1"</span> =&gt;
          <span class="hljs-comment">// 1. è·å–å›¾ä¹¦ä¿¡æ¯-ä¹¦åï¼Œä½œè€…ï¼ŒçŠ¶æ€</span>
          <span class="hljs-type">val</span> <span class="hljs-variable">book</span> <span class="hljs-operator">=</span> inputBookInfo()
          <span class="hljs-comment">// 2. è°ƒç”¨serviceå±‚çš„æ–¹æ³•ï¼Œåšæ·»åŠ åˆ°books.txtä¸­æ“ä½œ</span>
          BookService.addBook(book)
          println(s<span class="hljs-string">"å›¾ä¹¦ã€Š${book.name}ã€‹æ·»åŠ æˆåŠŸ"</span>)
        <span class="hljs-keyword">case</span> <span class="hljs-string">"2"</span> =&gt; <span class="hljs-comment">// println("æŸ¥è¯¢å›¾ä¹¦")</span>
          <span class="hljs-comment">// æç¤ºç”¨æˆ·è¾“å…¥æŸ¥è¯¢å…³é”®å­—</span>
          <span class="hljs-type">val</span> <span class="hljs-variable">query</span> <span class="hljs-operator">=</span> readLine(<span class="hljs-string">"è¯·è¾“å…¥æŸ¥è¯¢å…³é”®å­—(ä¹¦å, ä½œè€…):"</span>).trim
          <span class="hljs-comment">// æ ¹æ®å…³é”®å­—å»æŸ¥è¯¢å›¾ä¹¦åˆ—è¡¨ï¼Œæ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„ä¹¦</span>
          <span class="hljs-type">val</span> <span class="hljs-variable">results</span> <span class="hljs-operator">=</span> BookService.searchBooks(query)
          <span class="hljs-comment">// æ˜¾ç¤ºå‡ºæ¥</span>
          <span class="hljs-keyword">if</span>(results.nonEmpty){
            println(<span class="hljs-string">"======æŸ¥è¯¢å›¾ä¹¦çš„ç»“æœ======="</span>)
            results.foreach(println)
          } <span class="hljs-keyword">else</span> {
            println(<span class="hljs-string">"æ²¡æœ‰æ‰¾åˆ°å›¾ä¹¦"</span>)
          }
        <span class="hljs-keyword">case</span> <span class="hljs-string">"3"</span> =&gt;
          <span class="hljs-comment">// 1. è·å–ç”¨æˆ·ä¿¡æ¯-ç”¨æˆ·å</span>
          <span class="hljs-type">val</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> StdIn.readLine(<span class="hljs-string">"è¯·è¾“å…¥ç”¨æˆ·å: "</span>)
          <span class="hljs-comment">// 2. è°ƒç”¨serviceå±‚çš„æ–¹æ³•ï¼Œåšæ·»åŠ åˆ°users.txtä¸­æ“ä½œ</span>
          <span class="hljs-keyword">if</span>(UserService.addUser(username)){
            println(<span class="hljs-string">"ç”¨æˆ·æ·»åŠ æˆåŠŸ"</span>)
          } <span class="hljs-keyword">else</span> {
            println(<span class="hljs-string">"ç”¨æˆ·æ·»åŠ å¤±è´¥"</span>)
          }
        <span class="hljs-keyword">case</span> <span class="hljs-string">"4"</span> =&gt; running = <span class="hljs-literal">false</span>
        <span class="hljs-type">case</span> <span class="hljs-variable">_</span> <span class="hljs-operator">=</span>&gt; println(<span class="hljs-string">"æ— æ•ˆçš„é€‰æ‹©"</span>)
      }
    }
  }
  <span class="hljs-comment">// æ˜¾ç¤ºç™»å½•ç”¨æˆ·çš„èœå•</span>
  def <span class="hljs-title function_">showUserMenu</span><span class="hljs-params">(user:UserModel)</span>: Unit = {
    <span class="hljs-type">var</span> <span class="hljs-variable">running</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>
    <span class="hljs-title function_">while</span> <span class="hljs-params">(running)</span> {
      println(s<span class="hljs-string">"æ¬¢è¿ç”¨æˆ·:${user.username},æ¥åˆ°æˆ‘çš„å›¾ä¹¦ç®¡ç†ç³»ç»Ÿï¼Œè¯·é€‰æ‹©"</span>)
      println(<span class="hljs-string">"1. å€Ÿé˜…å›¾ä¹¦"</span>)
      println(<span class="hljs-string">"2. æŸ¥è¯¢å€Ÿé˜…è®°å½•"</span>)
      println(<span class="hljs-string">"3. è¿˜ä¹¦"</span>)
      println(<span class="hljs-string">"4. é€€å‡º"</span>)

      <span class="hljs-comment">// è·å–ç”¨æˆ·çš„æ“ä½œ</span>
      <span class="hljs-type">val</span> <span class="hljs-variable">choice</span> <span class="hljs-operator">=</span> StdIn.readLine().trim
      choice match {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"1"</span> =&gt;
          <span class="hljs-comment">// UI: æç¤ºç”¨æˆ·è¾“å…¥å›¾ä¹¦çš„IDã€‚æ ¡éªŒï¼šåˆ¤æ–­æ˜¯ä¸æ˜¯æ•´æ•°</span>
          <span class="hljs-keyword">try</span> {
            <span class="hljs-type">val</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> readLine(<span class="hljs-string">"è¯·è¾“å…¥å›¾ä¹¦çš„ID:"</span>).toInt
            BookService.borrowBook(user.username,id)
          } <span class="hljs-keyword">catch</span> {
            <span class="hljs-keyword">case</span> e:Exception =&gt;
              println(e)
              println(<span class="hljs-string">"è¾“å…¥çš„å›¾ä¹¦IDæ— æ•ˆ"</span>)
          }
        <span class="hljs-keyword">case</span> <span class="hljs-string">"2"</span> =&gt;
          <span class="hljs-comment">// åœ¨BookServiceä¸­å®ç°æ ¹æ®ç”¨æˆ·åå»æŸ¥è¯¢å€Ÿé˜…å›¾ä¹¦</span>
          <span class="hljs-type">val</span> <span class="hljs-variable">borrowRecords</span> <span class="hljs-operator">=</span> BookService.queryBorrowRecords(user.username)
          <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span>
          <span class="hljs-keyword">if</span>(borrowRecords.isEmpty){
            println(<span class="hljs-string">"æ²¡æœ‰å€Ÿé˜…è®°å½•"</span>)
          } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// éå†å€Ÿé˜…è®°å½•</span>
            <span class="hljs-comment">// println("æŸ¥è¯¢ç»“æœï¼Œä¸€å…±å€Ÿäº†ï¼Ÿæœ¬ï¼Œæ¢äº†ï¼Ÿæœ¬ï¼Œï¼Ÿæœ¬æœªå½’è¿˜")</span>
            <span class="hljs-keyword">for</span>(record &lt;- borrowRecords){
              <span class="hljs-type">val</span> <span class="hljs-variable">returnDate</span> <span class="hljs-operator">=</span> record.returnDate.getOrElse(<span class="hljs-string">"æœªå½’è¿˜"</span>)
              println(s<span class="hljs-string">"ä¹¦åï¼š${record.bookName} å€Ÿé˜…æ—¶é—´ï¼š${record.borrowDate}ï¼Œå½’è¿˜æ—¥æœŸï¼š${returnDate}"</span>)
            }
          }
        <span class="hljs-keyword">case</span> <span class="hljs-string">"3"</span> =&gt;
          <span class="hljs-keyword">try</span> {
            <span class="hljs-type">val</span> <span class="hljs-variable">id</span> <span class="hljs-operator">=</span> readLine(<span class="hljs-string">"è¯·è¾“å…¥è¦å½’è¿˜çš„å›¾ä¹¦ID:"</span>).toInt
            <span class="hljs-title function_">if</span><span class="hljs-params">(BookService.returnBook(user.username, id)</span>){
              println(<span class="hljs-string">"å½’è¿˜å›¾ä¹¦æˆåŠŸ"</span>)
            } <span class="hljs-keyword">else</span> {
              println(<span class="hljs-string">"å½’è¿˜å›¾ä¹¦å¤±è´¥"</span>)
            }
          } <span class="hljs-keyword">catch</span> {
            <span class="hljs-keyword">case</span> e:Exception =&gt;
              println(e)
              println(<span class="hljs-string">"è¾“å…¥çš„å›¾ä¹¦IDæ— æ•ˆ"</span>)
          }
        <span class="hljs-keyword">case</span> <span class="hljs-string">"4"</span> =&gt; running = <span class="hljs-literal">false</span>
        <span class="hljs-type">case</span> <span class="hljs-variable">_</span> <span class="hljs-operator">=</span>&gt; println(<span class="hljs-string">"æ— æ•ˆçš„é€‰æ‹©"</span>)
      }
    }
  }

  def <span class="hljs-title function_">showMenu</span><span class="hljs-params">()</span>: Unit = {
    showVisitorMenu()
  }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PHP 8.5 ç®¡é“æ“ä½œç¬¦ (|>) å‘Šåˆ«åµŒå¥—å‡½æ•°åœ°ç‹±ï¼Œå†™å‡ºæ¸…æ™°çš„æ•°æ®ç®¡é“]]></title>    <link>https://juejin.cn/post/7591697558377267242</link>    <guid>https://juejin.cn/post/7591697558377267242</guid>    <pubDate>2026-01-06T00:47:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591697558377267242" data-draft-id="7591672090790887443" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PHP 8.5 ç®¡é“æ“ä½œç¬¦ (|&gt;) å‘Šåˆ«åµŒå¥—å‡½æ•°åœ°ç‹±ï¼Œå†™å‡ºæ¸…æ™°çš„æ•°æ®ç®¡é“"/> <meta itemprop="keywords" content="åç«¯,PHP"/> <meta itemprop="datePublished" content="2026-01-06T00:47:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PHP 8.5 ç®¡é“æ“ä½œç¬¦ (|&gt;) å‘Šåˆ«åµŒå¥—å‡½æ•°åœ°ç‹±ï¼Œå†™å‡ºæ¸…æ™°çš„æ•°æ®ç®¡é“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T00:47:19.000Z" title="Tue Jan 06 2026 00:47:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">PHP 8.5 ç®¡é“æ“ä½œç¬¦ (|&gt;) å‘Šåˆ«åµŒå¥—å‡½æ•°åœ°ç‹±ï¼Œå†™å‡ºæ¸…æ™°çš„æ•°æ®ç®¡é“</h2>
<p>æˆ‘æ¶ˆå¤±äº†ä¸€é˜µâ€”â€”æ•…æ„çš„ã€‚å¹´åº•å†²åˆºå®Œï¼Œå‡æœŸè®¤çœŸä¼‘æ¯äº†ï¼šæ–­ç½‘ã€æ”¾æ…¢èŠ‚å¥ï¼Œå…è®¸è‡ªå·±æš‚æ—¶ä¸æƒ³ä»£ç ã€‚</p>
<p>ç°åœ¨æ˜¯ä¸€æœˆåˆï¼Œæ„Ÿè§‰è¯¥å¸¦ç‚¹æ–°ä¸œè¥¿å›æ¥äº†ã€‚PHP 8.5 æ¥äº†ï¼Œè™½ç„¶æ”¹è¿›ä¸å°‘ï¼Œä½†æœ‰ä¸ªåŠŸèƒ½å¯¹æ—¥å¸¸å¯è¯»æ€§ç‰¹åˆ«çªå‡ºï¼šç®¡é“æ“ä½œç¬¦ (<code>|&gt;</code>)ã€‚</p>
<p>å¯ä»¥æŠŠå®ƒæƒ³æˆ"è®©æˆ‘çš„è½¬æ¢å˜å¯è¯»"æŒ‰é’®ã€‚å®ƒè®©ä½ ä»å·¦åˆ°å³å†™æ•°æ®å¤„ç†æ­¥éª¤ï¼Œä¸ç”¨æŠŠå®ƒä»¬åŸ‹åœ¨åµŒå¥—æ‹¬å·é‡Œã€‚å¦‚æœä½ å†™è¿‡ï¼ˆæˆ–ç»§æ‰¿è¿‡ï¼‰<code>foo(bar(baz(trim($x))))</code> è¿™ç§ä»£ç ï¼Œä½ å·²ç»çŸ¥é“ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦äº†ã€‚</p>
<p>ä¸‹é¢ç”¨å®é™…ä¾‹å­æ‹†è§£â€”â€”å­—ç¬¦ä¸²ã€æ•°ç»„ã€é”™è¯¯å¤„ç†â€”â€”æœ€åç»™ä¸ªç®€å•çš„é‡æ„æ¸…å•ï¼Œè®©ä½ èƒ½å®‰å…¨åœ°é‡‡ç”¨å®ƒã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2026-01%2Fphp85-pipe-operator-clean-data-pipelines" target="_blank" title="https://catchadmin.com/post/2026-01/php85-pipe-operator-clean-data-pipelines" ref="nofollow noopener noreferrer">åŸæ–‡ PHP 8.5 ç®¡é“æ“ä½œç¬¦ (|&gt;) å‘Šåˆ«åµŒå¥—å‡½æ•°åœ°ç‹±ï¼Œå†™å‡ºæ¸…æ™°çš„æ•°æ®ç®¡é“</a></p>
<h3 data-id="heading-1">æ—¥å¸¸é—®é¢˜ï¼šåµŒå¥—è°ƒç”¨ vs é¡ºåºæ­¥éª¤</h3>
<p>å†™è¿‡ä¸€æ®µæ—¶é—´ PHPï¼Œä½ å¯èƒ½è§è¿‡è¿™ç§ä»£ç ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$result</span> = <span class="hljs-title function_ invoke__">foo</span>(<span class="hljs-title function_ invoke__">bar</span>(<span class="hljs-title function_ invoke__">baz</span>(<span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-title function_ invoke__">strtolower</span>(<span class="hljs-variable">$input</span>)))));
</code></pre>
<p>èƒ½è·‘ã€‚ä½†ä¹Ÿæ˜¯é‚£ç§è®©ä½ åœ¨ review æ—¶åœä¸‹æ¥ã€çœ¯çœ¼ã€é»˜é»˜ä»é‡Œå¾€å¤–é‡æ–°è§£ææ‹¬å·çš„ä»£ç â€”â€”åƒåœ¨åšè„‘åŠ›ä½“æ“ã€‚</p>
<p>PHP å¼€å‘è€…å†å²ä¸Šæœ‰ä¸¤ç§å¸¸è§å¤„ç†æ–¹å¼ï¼š</p>
<ul>
<li>åµŒå¥—å‡½æ•°è°ƒç”¨ï¼ˆé•¿äº†å°±éš¾è¯»ï¼‰</li>
<li>é€æ­¥ä¸´æ—¶å˜é‡ï¼ˆæ›´æ¸…æ™°ï¼Œä½†æœ‰æ—¶å•°å—¦ï¼‰</li>
</ul>
<p>PHP 8.5 å¼•å…¥ç¬¬ä¸‰ç§é€‰æ‹©ï¼šç®¡é“æ“ä½œç¬¦ (<code>|&gt;</code>)ï¼Œè®©ä½ ä»å·¦åˆ°å³å†™è½¬æ¢ï¼Œè·Ÿä½ å£å¤´è§£é‡Šé€»è¾‘çš„æ–¹å¼ä¸€æ ·ã€‚</p>
<p>ä¸å†æ˜¯"å–è¾“å…¥ï¼Œå°å†™ï¼Œtrimï¼ŒéªŒè¯â€¦â€¦"åŸ‹åœ¨æ‹¬å·é‡Œï¼Œä½ å¯ä»¥å†™ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$email</span> = <span class="hljs-variable">$input</span>
    |&gt; <span class="hljs-title function_ invoke__">trim</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">strtolower</span>(...)
    |&gt; (<span class="hljs-function"><span class="hljs-keyword">fn</span> (<span class="hljs-params"><span class="hljs-variable">$v</span></span>) =&gt;</span> <span class="hljs-comment">/* validate */</span> <span class="hljs-variable">$v</span>);
</code></pre>
<p>è¿™ç¯‡æ–‡ç« æ˜¯ç®¡é“æ“ä½œç¬¦çš„å®æˆ˜æ•™ç¨‹â€”â€”ä¸ä¼šæŠŠä½ çš„ä»£ç åº“å˜æˆæ—¶é«¦ä½†éš¾è¯»çš„"å‡½æ•°å¼æ±¤"ã€‚</p>
<p>æ¦‚æ‹¬åœ°è¯´ï¼Œç®¡é“æ“ä½œç¬¦æŠŠå·¦è¾¹çš„å€¼ä¼ ç»™å³è¾¹çš„å•å‚æ•° callableï¼Œäº§å‡º callable çš„è¿”å›å€¼ã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒæ¦‚å¿µï¼šæŠŠå‰ä¸€ä¸ªç»“æœå–‚ç»™ä¸‹ä¸€ä¸ª callable</h3>
<p>PHP 8.5 é‡Œï¼Œç®¡é“æ“ä½œç¬¦è¿™æ ·æ±‚å€¼ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$result</span> = <span class="hljs-variable">$value</span> |&gt; <span class="hljs-title function_ invoke__">someCallable</span>(...);
</code></pre>
<p>é€»è¾‘ä¸Šç­‰äºï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$result</span> = <span class="hljs-title function_ invoke__">someCallable</span>(<span class="hljs-variable">$value</span>);
</code></pre>
<p>é“¾å¼è°ƒç”¨æ‰æ˜¯å®ƒæœ‰ç”¨çš„åœ°æ–¹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$result</span> = <span class="hljs-variable">$value</span>
    |&gt; <span class="hljs-title function_ invoke__">firstStep</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">secondStep</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">thirdStep</span>(...);
</code></pre>
<p>æ¯ä¸ªé˜¶æ®µæ¥æ”¶ä¸Šä¸€é˜¶æ®µçš„è¾“å‡ºã€‚</p>
<h4 data-id="heading-3">å³è¾¹ä»€ä¹ˆç®— callableï¼Ÿ</h4>
<p>å³è¾¹å¯ä»¥æ˜¯ä»»ä½•æ¥å—ä¸€ä¸ªå‚æ•°çš„ callableï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>ä¸€ç­‰å…¬æ°‘ callable å¦‚ <code>trim(...)</code>ã€<code>strlen(...)</code></li>
<li>é—­åŒ…/ç®­å¤´å‡½æ•°å¦‚ <code>(fn ($x) =&gt; ...)</code></li>
<li>å¯è°ƒç”¨å¯¹è±¡ï¼ˆ<code>__invoke()</code>ï¼‰</li>
<li>å®ä¾‹æ–¹æ³• callable å¦‚ <code>$obj-&gt;method(...)</code></li>
<li>é™æ€æ–¹æ³• callable å¦‚ <code>ClassName::method(...)</code></li>
</ul>
<p>å…³é”®è§„åˆ™ï¼šä¸€ä¸ªè¾“å…¥å€¼æµè¿‡å»ã€‚</p>
<p>PHP æ‰‹å†Œæ˜ç¡®æŒ‡å‡ºå³è¾¹çš„ callable å¿…é¡»æ¥å—å•ä¸ªå‚æ•°ï¼Œå¤šäºä¸€ä¸ªå¿…éœ€å‚æ•°çš„å‡½æ•°ç›´æ¥ç”¨ä¸äº†ã€‚</p>
<p>è¿™ä¸ªè§„åˆ™å†³å®šäº†ä½ å®é™…æ€ä¹ˆå†™ç®¡é“ã€‚åé¢ä¼šçœ‹åˆ°å¤„ç†"å¤šå‚æ•°"å‡½æ•°çš„æ¨¡å¼ã€‚</p>
<h3 data-id="heading-4">åŸºç¡€ç®¡é“ï¼šå­—ç¬¦ä¸² â†’ trim â†’ å°å†™ â†’ éªŒè¯</h3>
<p>æ¥æ„å»ºä¸€ä¸ªèƒ½ç›´æ¥æ”¾è¿›é¡¹ç›®çš„ä¸œè¥¿ï¼šä¸€ä¸ªå°çš„é‚®ç®±è§„èŒƒåŒ–ç®¡é“ï¼ŒåŒæ—¶éªŒè¯å¹¶åœ¨å¤±è´¥æ—¶æŠ¥é”™ã€‚</p>
<h4 data-id="heading-5">è§„èŒƒåŒ–</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);
<span class="hljs-variable">$rawEmail</span> = <span class="hljs-string">"  Alice.Example+promo@GMAIL.com  "</span>;
<span class="hljs-variable">$normalized</span> = <span class="hljs-variable">$rawEmail</span>
    |&gt; <span class="hljs-title function_ invoke__">trim</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">strtolower</span>(...);
<span class="hljs-keyword">echo</span> <span class="hljs-variable">$normalized</span>;
<span class="hljs-comment">// "alice.example+promo@gmail.com"</span>
</code></pre>
<p>ç›®å‰çœ‹èµ·æ¥åƒæ–¹æ³•é“¾â€”â€”ä½†å®ƒä½œç”¨äºæ™®é€šå­—ç¬¦ä¸²ï¼Œä¸æ˜¯å¯¹è±¡ã€‚</p>
<h4 data-id="heading-6">éªŒè¯ï¼ˆæ— æ•ˆæ—¶åœæ­¢ç®¡é“ï¼‰</h4>
<p><code>filter_var()</code> æ˜¯ä¸ªå¥½ä¾‹å­ï¼Œå› ä¸ºéªŒè¯ä¸åªæ˜¯å¦ä¸€ä¸ª"è½¬æ¢"ã€‚å®ƒå¯èƒ½å¤±è´¥ã€‚</p>
<p>è€Œä¸” <code>filter_var($value, FILTER_VALIDATE_EMAIL)</code> éœ€è¦ç¬¬äºŒä¸ªå‚æ•°æ‰æœ‰æ„ä¹‰ã€‚ç®¡é“åªä¼ ä¸€ä¸ªå‚æ•°ï¼Œæ‰€ä»¥è¦åŒ…è£…ä¸€ä¸‹ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">validateEmail</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$email</span></span>): <span class="hljs-title">string</span>
</span>{
    <span class="hljs-comment">// filter_var è¿”å›è¿‡æ»¤åçš„å€¼æˆ– false</span>
    <span class="hljs-variable">$validated</span> = <span class="hljs-title function_ invoke__">filter_var</span>(<span class="hljs-variable">$email</span>, FILTER_VALIDATE_EMAIL);
    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$validated</span> === <span class="hljs-literal">false</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">"Invalid email: <span class="hljs-subst">{$email}</span>"</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$validated</span>;
}
<span class="hljs-variable">$rawEmail</span> = <span class="hljs-string">"  alice@example.com  "</span>;
<span class="hljs-variable">$email</span> = <span class="hljs-variable">$rawEmail</span>
    |&gt; <span class="hljs-title function_ invoke__">trim</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">strtolower</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">validateEmail</span>(...);
<span class="hljs-keyword">echo</span> <span class="hljs-variable">$email</span>;
</code></pre>
<p>è¯»èµ·æ¥å¾ˆé¡ºï¼štrim â†’ å°å†™ â†’ éªŒè¯ã€‚</p>
<h4 data-id="heading-7">å•è¡ŒéªŒè¯é˜¶æ®µï¼ˆthrow ä½œä¸ºè¡¨è¾¾å¼ï¼‰</h4>
<p>å¦‚æœä½ å–œæ¬¢æ›´ç´§å‡‘çš„ç®¡é“ï¼ŒPHP çš„ <code>throw</code> æ˜¯è¡¨è¾¾å¼ï¼ˆPHP 8.0 èµ·ï¼‰ï¼Œå¯ä»¥è¿™æ ·ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);
<span class="hljs-variable">$rawEmail</span> = <span class="hljs-string">"  alice@example.com  "</span>;
<span class="hljs-variable">$email</span> = <span class="hljs-variable">$rawEmail</span>
    |&gt; <span class="hljs-title function_ invoke__">trim</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">strtolower</span>(...)
    |&gt; (<span class="hljs-function"><span class="hljs-keyword">fn</span> (<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$v</span></span>) =&gt;</span> <span class="hljs-title function_ invoke__">filter_var</span>(<span class="hljs-variable">$v</span>, FILTER_VALIDATE_EMAIL)
        ?: <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">"Invalid email: <span class="hljs-subst">{$v}</span>"</span>)
    );
<span class="hljs-keyword">echo</span> <span class="hljs-variable">$email</span>;
</code></pre>
<p>ä¸€ä¸ªå°ä½†é‡è¦çš„è¯­æ³•æ³¨æ„ç‚¹ï¼š</p>
<p>åœ¨ <code>|&gt;</code> å³è¾¹ç”¨ç®­å¤´å‡½æ•°æ—¶ï¼Œå¿…é¡»ç”¨æ‹¬å·åŒ…èµ·æ¥ï¼Œé¿å…è§£ææ­§ä¹‰ã€‚</p>
<p>æ‰€ä»¥è¿™æ˜¯å¿…é¡»çš„ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$value</span> |&gt; (<span class="hljs-function"><span class="hljs-keyword">fn</span> (<span class="hljs-params"><span class="hljs-variable">$x</span></span>) =&gt;</span> <span class="hljs-title function_ invoke__">doSomething</span>(<span class="hljs-variable">$x</span>));
</code></pre>
<p>ä¸æ˜¯ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// âŒ è¿™ä¼šè§£æå¤±è´¥</span>
<span class="hljs-variable">$value</span> |&gt; <span class="hljs-function"><span class="hljs-keyword">fn</span> (<span class="hljs-params"><span class="hljs-variable">$x</span></span>) =&gt;</span> <span class="hljs-title function_ invoke__">doSomething</span>(<span class="hljs-variable">$x</span>);
</code></pre>
<h4 data-id="heading-8">è®©å®ƒ"çœŸå®"ï¼šè§„èŒƒåŒ– Gmail åœ°å€</h4>
<p>åŠ ä¸ªå®é™…çš„è½¬æ¢ï¼šå¯¹äº Gmail åœ°å€ï¼Œæœ¬åœ°éƒ¨åˆ†çš„ç‚¹è¢«å¿½ç•¥ï¼Œ<code>+tag</code> ä¹Ÿè¢«å¿½ç•¥ã€‚å¾ˆå¤šç³»ç»Ÿä¼šè§„èŒƒåŒ–è¿™äº›ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">canonicalizeGmail</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$email</span></span>): <span class="hljs-title">string</span>
</span>{
    [<span class="hljs-variable">$local</span>, <span class="hljs-variable">$domain</span>] = <span class="hljs-title function_ invoke__">explode</span>(<span class="hljs-string">'@'</span>, <span class="hljs-variable">$email</span>, <span class="hljs-number">2</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-variable">$domain</span> !== <span class="hljs-string">'gmail.com'</span> &amp;&amp; <span class="hljs-variable">$domain</span> !== <span class="hljs-string">'googlemail.com'</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$email</span>;
    }
    <span class="hljs-comment">// ç§»é™¤ plus tag</span>
    <span class="hljs-variable">$local</span> = <span class="hljs-title function_ invoke__">explode</span>(<span class="hljs-string">'+'</span>, <span class="hljs-variable">$local</span>, <span class="hljs-number">2</span>)[<span class="hljs-number">0</span>];
    <span class="hljs-comment">// ç§»é™¤ç‚¹</span>
    <span class="hljs-variable">$local</span> = <span class="hljs-title function_ invoke__">str_replace</span>(<span class="hljs-string">'.'</span>, <span class="hljs-string">''</span>, <span class="hljs-variable">$local</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$local</span> . <span class="hljs-string">'@gmail.com'</span>;
}
<span class="hljs-variable">$rawEmail</span> = <span class="hljs-string">"  Alice.Example+promo@GMAIL.com  "</span>;
<span class="hljs-variable">$email</span> = <span class="hljs-variable">$rawEmail</span>
    |&gt; <span class="hljs-title function_ invoke__">trim</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">strtolower</span>(...)
    |&gt; (<span class="hljs-function"><span class="hljs-keyword">fn</span> (<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$v</span></span>) =&gt;</span> <span class="hljs-title function_ invoke__">filter_var</span>(<span class="hljs-variable">$v</span>, FILTER_VALIDATE_EMAIL)
        ?: <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">"Invalid email: <span class="hljs-subst">{$v}</span>"</span>)
    )
    |&gt; <span class="hljs-title function_ invoke__">canonicalizeGmail</span>(...);
<span class="hljs-keyword">echo</span> <span class="hljs-variable">$email</span>;
<span class="hljs-comment">// "aliceexample@gmail.com"</span>
</code></pre>
<p>è¿™å°±æ˜¯ <code>|&gt;</code> å¼€å§‹å‘å…‰çš„åœ°æ–¹ï¼šåŠ æ­¥éª¤æ—¶ç®¡é“ä¿æŒå¯è¯»ã€‚</p>
<h3 data-id="heading-9">æ•°ç»„å’Œé›†åˆçš„ç®¡é“ï¼šmap / filter / reduceï¼ˆçœŸå®ç”¨ä¾‹ï¼‰</h3>
<p>å­—ç¬¦ä¸²ç®€å•ã€‚æ•°ç»„æ˜¯å¾ˆå¤š PHP ä»£ç åº“å¼€å§‹å˜ä¹±çš„åœ°æ–¹â€”â€”å› ä¸ºæ ‡å‡†åº“å¾ˆå¼ºå¤§ï¼Œä½†å‡½æ•°ç­¾åç»å¸¸ä¸å¤ªé€‚åˆç®¡é“åŒ–ã€‚</p>
<p>æ¥ä¸ªå¸¸è§ä»»åŠ¡ï¼šå¤„ç†åŸå§‹è®¢å•æ•°æ®ï¼Œè®¡ç®—"å·²æ”¯ä»˜"è®¢å•çš„æ”¶å…¥ã€‚</p>
<p>å‡è®¾ä½ è¯»äº† JSONï¼Œå¾—åˆ°è¿™æ ·çš„æ•°ç»„ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$orders</span> = [
    [<span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">1</span>, <span class="hljs-string">'status'</span> =&gt; <span class="hljs-string">'paid'</span>,   <span class="hljs-string">'total'</span> =&gt; <span class="hljs-number">120.50</span>],
    [<span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">2</span>, <span class="hljs-string">'status'</span> =&gt; <span class="hljs-string">'failed'</span>, <span class="hljs-string">'total'</span> =&gt;  <span class="hljs-number">80.00</span>],
    [<span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">3</span>, <span class="hljs-string">'status'</span> =&gt; <span class="hljs-string">'paid'</span>,   <span class="hljs-string">'total'</span> =&gt;  <span class="hljs-number">42.25</span>],
];
</code></pre>
<p>ç›®æ ‡ï¼šç”¨æ¸…æ™°çš„ç®¡é“æ±‚å·²æ”¯ä»˜è®¢å•çš„ total ä¹‹å’Œã€‚</p>
<h4 data-id="heading-10">ä¿æŒç®¡é“å¹²å‡€çš„è¾…åŠ©å‡½æ•°</h4>
<p><code>array_filter</code>ã€<code>array_map</code> å’Œ <code>array_reduce</code> å¾ˆå¥½ç”¨ï¼Œä½†ä¸åŒ…è£…ä¸€ä¸‹æ²¡æ³•å¹²å‡€åœ°æ¥å—å•ä¸ª"ç®¡é“å€¼"ã€‚</p>
<p>ä¸€ä¸ªå®ç”¨æ¨¡å¼æ˜¯åˆ›å»ºå°è¾…åŠ©å‡½æ•°ï¼Œè¿”å›å•å‚æ•° callableã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">map</span>(<span class="hljs-params"><span class="hljs-keyword">callable</span> <span class="hljs-variable">$fn</span></span>): <span class="hljs-title">Closure</span>
</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> (<span class="hljs-params"><span class="hljs-keyword">array</span> <span class="hljs-variable">$items</span></span>): <span class="hljs-title">array</span> =&gt;</span> <span class="hljs-title function_ invoke__">array_map</span>(<span class="hljs-variable">$fn</span>, <span class="hljs-variable">$items</span>);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">filter</span>(<span class="hljs-params"><span class="hljs-keyword">callable</span> <span class="hljs-variable">$fn</span></span>): <span class="hljs-title">Closure</span>
</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> (<span class="hljs-params"><span class="hljs-keyword">array</span> <span class="hljs-variable">$items</span></span>): <span class="hljs-title">array</span> =&gt;</span> <span class="hljs-title function_ invoke__">array_filter</span>(<span class="hljs-variable">$items</span>, <span class="hljs-variable">$fn</span>);
}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reduce</span>(<span class="hljs-params"><span class="hljs-keyword">callable</span> <span class="hljs-variable">$fn</span>, <span class="hljs-keyword">mixed</span> <span class="hljs-variable">$initial</span></span>): <span class="hljs-title">Closure</span>
</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> (<span class="hljs-params"><span class="hljs-keyword">array</span> <span class="hljs-variable">$items</span></span>): <span class="hljs-title">mixed</span> =&gt;</span> <span class="hljs-title function_ invoke__">array_reduce</span>(<span class="hljs-variable">$items</span>, <span class="hljs-variable">$fn</span>, <span class="hljs-variable">$initial</span>);
}
</code></pre>
<p>ç°åœ¨å¯ä»¥é¡ºç•…åœ°ç®¡é“æ•°ç»„äº†ã€‚</p>
<h4 data-id="heading-11">å·²æ”¯ä»˜æ”¶å…¥ç®¡é“</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);
<span class="hljs-variable">$orders</span> = [
    [<span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">1</span>, <span class="hljs-string">'status'</span> =&gt; <span class="hljs-string">'paid'</span>,   <span class="hljs-string">'total'</span> =&gt; <span class="hljs-number">120.50</span>],
    [<span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">2</span>, <span class="hljs-string">'status'</span> =&gt; <span class="hljs-string">'failed'</span>, <span class="hljs-string">'total'</span> =&gt;  <span class="hljs-number">80.00</span>],
    [<span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">3</span>, <span class="hljs-string">'status'</span> =&gt; <span class="hljs-string">'paid'</span>,   <span class="hljs-string">'total'</span> =&gt;  <span class="hljs-number">42.25</span>],
];
<span class="hljs-variable">$paidRevenue</span> = <span class="hljs-variable">$orders</span>
    |&gt; <span class="hljs-title function_ invoke__">filter</span>(fn (<span class="hljs-keyword">array</span> <span class="hljs-variable">$o</span>) =&gt; <span class="hljs-variable">$o</span>[<span class="hljs-string">'status'</span>] === <span class="hljs-string">'paid'</span>)
    |&gt; <span class="hljs-title function_ invoke__">map</span>(fn (<span class="hljs-keyword">array</span> <span class="hljs-variable">$o</span>) =&gt; (<span class="hljs-keyword">float</span>) <span class="hljs-variable">$o</span>[<span class="hljs-string">'total'</span>])
    |&gt; <span class="hljs-title function_ invoke__">reduce</span>(fn (<span class="hljs-keyword">float</span> <span class="hljs-variable">$sum</span>, <span class="hljs-keyword">float</span> <span class="hljs-variable">$t</span>) =&gt; <span class="hljs-variable">$sum</span> + <span class="hljs-variable">$t</span>, <span class="hljs-number">0.0</span>);
<span class="hljs-keyword">echo</span> <span class="hljs-variable">$paidRevenue</span>; <span class="hljs-comment">// 162.75</span>
</code></pre>
<p>åƒè‹±è¯­ä¸€æ ·è¯»ï¼š</p>
<ul>
<li>è¿‡æ»¤å·²æ”¯ä»˜è®¢å•</li>
<li>æ˜ å°„åˆ° total</li>
<li>å½’çº¦æˆæ€»å’Œ</li>
</ul>
<h4 data-id="heading-12">ç¨å¾®ä¸°å¯Œçš„çœŸå®ä¾‹å­ï¼šCSV é£æ ¼çš„è¡Œè½¬å¹²å‡€è®°å½•</h4>
<p>å‡è®¾ä½ æœ‰ä¸€ç»„è¡Œï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$lines</span> = [
    <span class="hljs-string">" alice@example.com , paid "</span>,
    <span class="hljs-string">" bob@invalid-domain , paid "</span>,
    <span class="hljs-string">" charlie@example.com , failed "</span>,
    <span class="hljs-string">"  dora@example.com, paid "</span>,
];
</code></pre>
<p>ç›®æ ‡ï¼š</p>
<ul>
<li>è§£ææˆ <code>[email, status]</code></li>
<li>è§„èŒƒåŒ–é‚®ç®±</li>
<li>éªŒè¯é‚®ç®±ï¼ˆä¸¢å¼ƒæ— æ•ˆçš„ï¼‰</li>
<li>åªä¿ç•™å·²æ”¯ä»˜</li>
<li>è¿”å›è§„èŒƒåŒ–é‚®ç®±åˆ—è¡¨</li>
</ul>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">normalizeEmail</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$email</span></span>): <span class="hljs-title">string</span>
</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">trim</span>(<span class="hljs-title function_ invoke__">strtolower</span>(<span class="hljs-variable">$email</span>));
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isValidEmail</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$email</span></span>): <span class="hljs-title">bool</span>
</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">filter_var</span>(<span class="hljs-variable">$email</span>, FILTER_VALIDATE_EMAIL) !== <span class="hljs-literal">false</span>;
}

<span class="hljs-variable">$lines</span> = [
    <span class="hljs-string">" alice@example.com , paid "</span>,
    <span class="hljs-string">" bob@invalid-domain , paid "</span>,
    <span class="hljs-string">" charlie@example.com , failed "</span>,
    <span class="hljs-string">"  dora@example.com, paid "</span>,
];

<span class="hljs-variable">$paidEmails</span> = <span class="hljs-variable">$lines</span>
    |&gt; <span class="hljs-title function_ invoke__">map</span>(fn (<span class="hljs-keyword">string</span> <span class="hljs-variable">$line</span>) =&gt; <span class="hljs-title function_ invoke__">array_map</span>(<span class="hljs-string">'trim'</span>, <span class="hljs-title function_ invoke__">explode</span>(<span class="hljs-string">','</span>, <span class="hljs-variable">$line</span>)))
    |&gt; <span class="hljs-title function_ invoke__">map</span>(fn (<span class="hljs-keyword">array</span> <span class="hljs-variable">$parts</span>) =&gt; [<span class="hljs-string">'email'</span> =&gt; <span class="hljs-title function_ invoke__">normalizeEmail</span>(<span class="hljs-variable">$parts</span>[<span class="hljs-number">0</span>]), <span class="hljs-string">'status'</span> =&gt; <span class="hljs-variable">$parts</span>[<span class="hljs-number">1</span>]])
    |&gt; <span class="hljs-title function_ invoke__">filter</span>(fn (<span class="hljs-keyword">array</span> <span class="hljs-variable">$r</span>) =&gt; <span class="hljs-title function_ invoke__">isValidEmail</span>(<span class="hljs-variable">$r</span>[<span class="hljs-string">'email'</span>]))
    |&gt; <span class="hljs-title function_ invoke__">filter</span>(fn (<span class="hljs-keyword">array</span> <span class="hljs-variable">$r</span>) =&gt; <span class="hljs-variable">$r</span>[<span class="hljs-string">'status'</span>] === <span class="hljs-string">'paid'</span>)
    |&gt; <span class="hljs-title function_ invoke__">map</span>(fn (<span class="hljs-keyword">array</span> <span class="hljs-variable">$r</span>) =&gt; <span class="hljs-variable">$r</span>[<span class="hljs-string">'email'</span>])
    |&gt; (<span class="hljs-function"><span class="hljs-keyword">fn</span> (<span class="hljs-params"><span class="hljs-keyword">array</span> <span class="hljs-variable">$arr</span></span>) =&gt;</span> <span class="hljs-title function_ invoke__">array_values</span>(<span class="hljs-variable">$arr</span>));

<span class="hljs-title function_ invoke__">print_r</span>(<span class="hljs-variable">$paidEmails</span>);
<span class="hljs-comment">// ['alice@example.com', 'dora@example.com']</span>
</code></pre>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>æ¯ä¸ªé˜¶æ®µæ˜¯ä¸€ä¸ªè½¬æ¢</li>
<li>éªŒè¯åœ¨ç®¡é“é‡Œï¼Œä½†ä¸ç”¨ <code>normalizeEmail(...)</code> å› ä¸ºå®ƒå¯èƒ½æŠ›å¼‚å¸¸</li>
<li><code>array_filter</code> ä¿ç•™é”®ï¼Œæ‰€ä»¥æœ€å <code>array_values()</code> æ˜¯å¸¸è§çš„æ¸…ç†æ­¥éª¤</li>
</ul>
<p>è¿™ç§è½¬æ¢ç®¡é“å°±æ˜¯ <code>|&gt;</code> å‘æŒ¥ä»·å€¼çš„åœ°æ–¹ã€‚</p>
<h3 data-id="heading-13">ç®¡é“ + é”™è¯¯å¤„ç†ï¼štry/catch vs å®ˆå«å­å¥</h3>
<p>ç®¡é“æ˜¯è¡¨è¾¾å¼ã€‚é”™è¯¯å¤„ç†æ˜¯å¾ˆå¤šå›¢é˜Ÿè¦ä¹ˆå–œæ¬¢è¦ä¹ˆè®¨åŒè¿™ç§é£æ ¼çš„åœ°æ–¹ã€‚</p>
<p>æœ‰ä¸¤ç§å¥åº·çš„æ–¹å¼ï¼š</p>
<h4 data-id="heading-14">é€‰é¡¹ Aï¼šç®¡é“å¤–çš„å®ˆå«å­å¥ï¼ˆæ— èŠä½†å¾ˆæ¸…æ™°ï¼‰</h4>
<p>è¿™æ˜¯"åˆ«è€èªæ˜"çš„æ–¹å¼ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);
<span class="hljs-variable">$email</span> = <span class="hljs-variable">$rawEmail</span>
    |&gt; <span class="hljs-title function_ invoke__">trim</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">strtolower</span>(...);
<span class="hljs-keyword">if</span> (<span class="hljs-variable">$email</span> === <span class="hljs-string">''</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'Email is required.'</span>);
}
<span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">filter_var</span>(<span class="hljs-variable">$email</span>, FILTER_VALIDATE_EMAIL) === <span class="hljs-literal">false</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'Email is invalid.'</span>);
}
</code></pre>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>éå¸¸æ˜ç¡®</li>
<li>å®¹æ˜“è°ƒè¯•</li>
<li>é—­åŒ…é‡Œæ²¡æœ‰å¼‚å¸¸æŠ€å·§</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>"æ•…äº‹"è¢«æ‹†æˆç®¡é“ + å•ç‹¬çš„éªŒè¯å—</li>
</ul>
<h4 data-id="heading-15">é€‰é¡¹ Bï¼šç®¡é“é‡ŒæŠ›å¼‚å¸¸ï¼Œå¤–é¢ catchï¼ˆé€‚åˆ"å…¨æœ‰æˆ–å…¨æ— "ï¼‰</h4>
<p>å½“ç®¡é“é€»è¾‘ä¸Šæ˜¯ä¸€ä¸ªæ“ä½œâ€”â€”"è§£æå¹¶è§„èŒƒåŒ–è¿™ä¸ªè¾“å…¥ï¼Œå¦åˆ™å¤±è´¥"â€”â€”æ•´ä¸ªåŒ…èµ·æ¥å¯ä»¥å¾ˆå¹²å‡€ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);
<span class="hljs-keyword">try</span> {
    <span class="hljs-variable">$email</span> = <span class="hljs-variable">$rawEmail</span>
        |&gt; <span class="hljs-title function_ invoke__">trim</span>(...)
        |&gt; <span class="hljs-title function_ invoke__">strtolower</span>(...)
        |&gt; (<span class="hljs-function"><span class="hljs-keyword">fn</span> (<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$v</span></span>) =&gt;</span> <span class="hljs-variable">$v</span> !== <span class="hljs-string">''</span>
            ? <span class="hljs-variable">$v</span>
            : <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'Email is required.'</span>)
        )
        |&gt; (<span class="hljs-function"><span class="hljs-keyword">fn</span> (<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$v</span></span>) =&gt;</span> <span class="hljs-title function_ invoke__">filter_var</span>(<span class="hljs-variable">$v</span>, FILTER_VALIDATE_EMAIL)
            ?: <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'Email is invalid.'</span>)
        );
    <span class="hljs-comment">// ä½¿ç”¨ $email</span>
} <span class="hljs-keyword">catch</span> (<span class="hljs-built_in">InvalidArgumentException</span> <span class="hljs-variable">$e</span>) {
    <span class="hljs-comment">// å¤„ç†éªŒè¯é”™è¯¯</span>
}
</code></pre>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>ç®¡é“è¯»èµ·æ¥åƒå•ä¸ª"äº‹åŠ¡"</li>
<li>é€‚åˆè¯·æ±‚è§£æ/DTO æ„å»º</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>è¿‡åº¦ä½¿ç”¨ä¼šè®©äººè§‰å¾—å¼‚å¸¸è¢«å½“ä½œæ§åˆ¶æµ</li>
</ul>
<h4 data-id="heading-16">è°ƒè¯•å‹å¥½çš„æ¨¡å¼ï¼šinspect()ï¼ˆç®¡é“çš„"tap"ï¼‰</h4>
<p>ç®¡é“ä»£ç çš„ä¸€ä¸ªæ‰¹è¯„æ˜¯"ä¸­é—´å€¼æ›´éš¾è°ƒè¯•"ã€‚</p>
<p>ä½ å¯ä»¥æ’å…¥ä¸€ä¸ªé˜¶æ®µæ¥è®°å½•å¹¶åŸæ ·è¿”å›å€¼ï¼Œä¸ç”¨æ”¾å¼ƒç®¡é“ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">inspect</span>(<span class="hljs-params"><span class="hljs-keyword">callable</span> <span class="hljs-variable">$fn</span></span>): <span class="hljs-title">Closure</span>
</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"><span class="hljs-keyword">mixed</span> <span class="hljs-variable">$value</span></span>) <span class="hljs-keyword">use</span> (<span class="hljs-params"><span class="hljs-variable">$fn</span></span>) </span>{
        <span class="hljs-variable">$fn</span>(<span class="hljs-variable">$value</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$value</span>;
    };
}
<span class="hljs-variable">$result</span> = <span class="hljs-variable">$rawEmail</span>
    |&gt; <span class="hljs-title function_ invoke__">trim</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">inspect</span>(fn (<span class="hljs-variable">$v</span>) =&gt; <span class="hljs-title function_ invoke__">error_log</span>(<span class="hljs-string">"After trim: "</span> . <span class="hljs-variable">$v</span>))
    |&gt; <span class="hljs-title function_ invoke__">strtolower</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">inspect</span>(fn (<span class="hljs-variable">$v</span>) =&gt; <span class="hljs-title function_ invoke__">error_log</span>(<span class="hljs-string">"After lower: "</span> . <span class="hljs-variable">$v</span>));
</code></pre>
<p>è¿™ä¿æŒäº†ä»å·¦åˆ°å³çš„æµï¼ŒåŒæ—¶è®©ä¸­é—´çŠ¶æ€åœ¨è°ƒè¯•æ—¶å¯è§ã€‚</p>
<h3 data-id="heading-17">ä¸å‡½æ•°å’Œæ–¹æ³•çš„äº’æ“ä½œï¼šå†™å‡ºä¿æŒå¯è¯»çš„ç®¡é“</h3>
<p>ç®¡é“æ“ä½œç¬¦å¾ˆç®€å•ï¼›è‰ºæœ¯åœ¨äºç”¨å®ƒè€Œä¸è®©ä»£ç çœ‹èµ·æ¥åƒèªæ˜çš„è°œé¢˜ã€‚</p>
<h4 data-id="heading-18">ç­¾ååŒ¹é…æ—¶ä¼˜å…ˆç”¨ä¸€ç­‰å…¬æ°‘ callable</h4>
<p>å¦‚æœå‡½æ•°å·²ç»æ¥å—å•ä¸ªå¿…éœ€å‚æ•°ï¼Œè¿™æ˜¯æœ€å¹²å‡€çš„å½¢å¼ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$value</span> |&gt; <span class="hljs-title function_ invoke__">trim</span>(...) |&gt; <span class="hljs-title function_ invoke__">strtolower</span>(...);
</code></pre>
<p>å› ä¸º <code>trim(...)</code> æ˜¯ callable å¼•ç”¨ï¼Œä¸æ˜¯è°ƒç”¨ã€‚å®ƒæ˜¯"ä¸€ä¸ªä½ å¯ä»¥ä¼ é€’çš„å‡½æ•°"ã€‚</p>
<h4 data-id="heading-19">ç”¨å‘½åå‡½æ•°è¡¨è¾¾"ä¸šåŠ¡å«ä¹‰"</h4>
<p>å¦‚æœä¸€ä¸ªé˜¶æ®µä¸æ˜æ˜¾ï¼Œç»™å®ƒèµ·ä¸ªåå­—ã€‚</p>
<p>ä¸è¦ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$data</span> |&gt; (<span class="hljs-function"><span class="hljs-keyword">fn</span> (<span class="hljs-params"><span class="hljs-variable">$x</span></span>) =&gt;</span> <span class="hljs-comment">/* 12 è¡Œé€»è¾‘ */</span>);
</code></pre>
<p>è¦ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$data</span> |&gt; <span class="hljs-title function_ invoke__">normalizeCustomerPayload</span>(...);
</code></pre>
<p>ç®¡é“åº”è¯¥è¯»èµ·æ¥åƒé«˜å±‚è„šæœ¬ã€‚</p>
<h4 data-id="heading-20">ç®¡é“åˆ°æ–¹æ³•ï¼ˆå®ä¾‹å’Œé™æ€ï¼‰</h4>
<p>å¦‚æœä½ æœ‰ä¸ª mapper å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);
<span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserMapper</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">toDto</span>(<span class="hljs-params"><span class="hljs-keyword">array</span> <span class="hljs-variable">$row</span></span>): <span class="hljs-title">UserDto</span>
    </span>{
        <span class="hljs-comment">// ...</span>
    }
}
<span class="hljs-variable">$mapper</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserMapper</span>();
<span class="hljs-variable">$dto</span> = <span class="hljs-variable">$row</span>
    |&gt; <span class="hljs-variable">$mapper</span>-&gt;<span class="hljs-title function_ invoke__">toDto</span>(...);
</code></pre>
<p>æˆ–é™æ€æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$dto</span> = <span class="hljs-variable">$row</span> |&gt; <span class="hljs-title class_">UserMapper</span>::<span class="hljs-title function_ invoke__">fromRow</span>(...);
</code></pre>
<h4 data-id="heading-21">å¤„ç†éœ€è¦é¢å¤–å‚æ•°çš„å‡½æ•°</h4>
<p>è®°ä½ï¼šç®¡é“ä¼ ä¸€ä¸ªå‚æ•°ã€‚å¾ˆå¤š PHP æ ‡å‡†å‡½æ•°è¦æ›´å¤šã€‚</p>
<p>ä¾‹å­ï¼š<code>explode('.', $value)</code> éœ€è¦ä¸¤ä¸ªå¿…éœ€å‚æ•°ï¼Œæ‰€ä»¥ä¸èƒ½è¿™æ ·ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// âŒ explode éœ€è¦ 2 ä¸ªå‚æ•°ï¼›è¿™ç›´æ¥ä¸è¡Œ</span>
<span class="hljs-variable">$parts</span> = <span class="hljs-variable">$domain</span> |&gt; <span class="hljs-title function_ invoke__">explode</span>(...);
</code></pre>
<p>åŒ…è£…ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$parts</span> = <span class="hljs-variable">$domain</span> |&gt; (<span class="hljs-function"><span class="hljs-keyword">fn</span> (<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$v</span></span>) =&gt;</span> <span class="hljs-title function_ invoke__">explode</span>(<span class="hljs-string">'.'</span>, <span class="hljs-variable">$v</span>));
</code></pre>
<p>æˆ–è€…ï¼Œå¦‚æœä½ å–œæ¬¢ï¼Œåˆ›å»ºä¸€ä¸ªå°è¾…åŠ©å‡½æ•°æ¥"é¢„é…ç½®"å‡½æ•°ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">explodeBy</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$delimiter</span></span>): <span class="hljs-title">Closure</span>
</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> (<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$value</span></span>): <span class="hljs-title">array</span> =&gt;</span> <span class="hljs-title function_ invoke__">explode</span>(<span class="hljs-variable">$delimiter</span>, <span class="hljs-variable">$value</span>);
}

<span class="hljs-variable">$parts</span> = <span class="hljs-variable">$domain</span> |&gt; <span class="hljs-title function_ invoke__">explodeBy</span>(<span class="hljs-string">'.'</span>);
</code></pre>
<p>è¿™ç§"é…ç½®å¥½çš„ callable"æ–¹å¼åœ¨çœŸå®ä»£ç é‡Œæ‰©å±•æ€§å¾ˆå¥½ã€‚</p>
<h4 data-id="heading-22">æ“ä½œç¬¦ä¼˜å…ˆçº§é™·é˜±ï¼ˆç”¨æ‹¬å·ä¿æŒæ— èŠï¼‰</h4>
<p>RFC å’Œæ‰‹å†ŒæŒ‡å‡º <code>|&gt;</code> æœ‰å®šä¹‰çš„ä¼˜å…ˆçº§ä¸”æ˜¯å·¦ç»“åˆçš„ã€‚å®é™…ä¸Šï¼Œè·Ÿ <code>??</code>ã€ä¸‰å…ƒè¿ç®—ç¬¦æˆ–æ›´å¤æ‚çš„è¡¨è¾¾å¼æ··ç”¨æ—¶åº”è¯¥ç”¨æ‹¬å·ï¼Œé™¤éæ˜æ˜¾å®‰å…¨ã€‚</p>
<p>ä¾‹å­ï¼šå…ˆé€‰ callableï¼Œå†ç®¡é“è¿›å»ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$fn</span> = <span class="hljs-variable">$flag</span> ? <span class="hljs-title function_ invoke__">enabledFunc</span>(...) : <span class="hljs-title function_ invoke__">disabledFunc</span>(...);
<span class="hljs-variable">$result</span> = <span class="hljs-variable">$value</span> |&gt; <span class="hljs-variable">$fn</span>;
</code></pre>
<p>å¦‚æœä½ åšæŒå†…è”ï¼Œç”¨æ‹¬å·ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$result</span> = <span class="hljs-variable">$value</span> |&gt; (<span class="hljs-variable">$flag</span> ? <span class="hljs-title function_ invoke__">enabledFunc</span>(...) : <span class="hljs-title function_ invoke__">disabledFunc</span>(...));
</code></pre>
<h4 data-id="heading-23">å¦ä¸€ä¸ªå°–é”è¾¹ç¼˜ï¼šå¼•ç”¨ä¼ é€’çš„ callable ä¸å…è®¸</h4>
<p>æœ‰äº› PHP å‡½æ•°æŒ‰å¼•ç”¨æ¥å—å‚æ•°ã€‚ç®¡é“æ“ä½œç¬¦ä¸å…è®¸ç®¡é“åˆ°éœ€è¦å¼•ç”¨ä¼ é€’å‚æ•°çš„ callableã€‚</p>
<p>å¤§å¤šæ•°æ—¥å¸¸ç®¡é“ä¸éœ€è¦å¼•ç”¨â€”â€”ä½†çŸ¥é“ä¸ºä»€ä¹ˆæœ‰äº›å‡½æ•°åœ¨ç®¡é“é‡Œä¸å·¥ä½œæ˜¯å¥½çš„ã€‚</p>
<h3 data-id="heading-24">ä»€ä¹ˆæ—¶å€™ä¸è¯¥ç”¨ |&gt;ï¼ˆæ˜¯çš„ï¼Œè¿™æ˜¯çœŸäº‹ï¼‰</h3>
<p>ç®¡é“æ“ä½œç¬¦æ˜¯å·¥å…·ï¼Œä¸æ˜¯å®—æ•™ã€‚è¿™äº›æƒ…å†µé€šå¸¸æ˜¯é”™è¯¯é€‰æ‹©ã€‚</p>
<h4 data-id="heading-25">éœ€è¦å¤§é‡åˆ†æ”¯é€»è¾‘æ—¶</h4>
<p>å¦‚æœä½ çš„è½¬æ¢æœ‰å¤šä¸ªæå‰é€€å‡ºã€å¤æ‚æ¡ä»¶å’ŒåµŒå¥—å¾ªç¯ï¼Œç®¡é“ä¼šå˜å¾—å‹‰å¼ºã€‚</p>
<p>å¹²å‡€çš„ if/else å—é€šå¸¸æ¯”æŠŠæ‰€æœ‰ä¸œè¥¿å¡è¿›é—­åŒ…å¥½ã€‚</p>
<h4 data-id="heading-26">å‰¯ä½œç”¨æ˜¯ä¸»è¦ç›®çš„æ—¶</h4>
<p>ç®¡é“åœ¨æ¯ä¸ªé˜¶æ®µæ˜¯çº¯è½¬æ¢æ—¶æœ€å¥½ï¼šè¾“å…¥ â†’ è¾“å‡ºã€‚</p>
<p>å¦‚æœç›®çš„æ˜¯"å‘é‚®ä»¶"ã€"å†™æ•°æ®åº“"ã€"å‘å¸ƒäº‹ä»¶"ï¼Œä½ ä»ç„¶å¯ä»¥ç®¡é“ï¼Œä½†å®¹æ˜“åœ¨é“¾é‡Œéšè—é‡è¦å‰¯ä½œç”¨ï¼Œè®©æµç¨‹æ›´éš¾ç†è§£ã€‚</p>
<p>å¦‚æœç¡®å®éœ€è¦å‰¯ä½œç”¨ï¼Œä¼˜å…ˆç”¨æ˜ç¡®çš„ <code>inspect()</code> é˜¶æ®µï¼Œè®©å‘ç”Ÿçš„äº‹æƒ…æ¸…æ™°ã€‚</p>
<h4 data-id="heading-27">ç®¡é“å˜æˆ"é—­åŒ…æ±¤"æ—¶</h4>
<p>å¦‚æœæ¯éš”ä¸€ä¸ªé˜¶æ®µæ˜¯ï¼š</p>
<pre><code class="hljs language-php" lang="php">|&gt; (<span class="hljs-function"><span class="hljs-keyword">fn</span> (<span class="hljs-params"><span class="hljs-variable">$x</span></span>) =&gt;</span> <span class="hljs-title function_ invoke__">someFunc</span>(<span class="hljs-variable">$x</span>, <span class="hljs-variable">$a</span>, <span class="hljs-variable">$b</span>, <span class="hljs-variable">$c</span>))
</code></pre>
<p>ä½ å¯èƒ½åœ¨è·Ÿ PHP çš„å‡½æ•°ç­¾åè¾ƒåŠ²å¤ªå¤šã€‚</p>
<p>è¿™æ—¶å€™ï¼š</p>
<ul>
<li>æå–å‘½åè¾…åŠ©å‡½æ•°</li>
<li>æˆ–ç”¨ç›´æ¥çš„é¡ºåºä»£ç </li>
</ul>
<h4 data-id="heading-28">è°ƒè¯•æ˜¯ä¸»è¦æ´»åŠ¨æ—¶</h4>
<p>ç®¡é“å¯ä»¥è°ƒè¯•ï¼Œä½†å¦‚æœä½ åœ¨äº‹æ•…å“åº”çš„çƒ­å¾ªç¯é‡Œï¼Œä¸´æ—¶å˜é‡ä»ç„¶æ˜¯ä½ çš„æœ‹å‹ã€‚</p>
<p>å¯è¯»ä»£ç æ˜¯ä½ èƒ½å¿«é€Ÿæ’æ¡©å’Œæ£€æŸ¥çš„ä»£ç ã€‚</p>
<h4 data-id="heading-29">é“¾å¤ªé•¿æ—¶</h4>
<p>ç»éªŒæ³•åˆ™ï¼šå¦‚æœç®¡é“è¶…è¿‡ 6-10 ä¸ªé˜¶æ®µï¼Œè€ƒè™‘æŠŠé˜¶æ®µåˆ†ç»„æˆå‘½åå‡½æ•°ã€‚</p>
<p>ä¸è¦ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$payload</span>
    |&gt; <span class="hljs-title function_ invoke__">step1</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">step2</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">step3</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">step4</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">step5</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">step6</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">step7</span>(...);
</code></pre>
<p>è¦ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$payload</span>
    |&gt; <span class="hljs-title function_ invoke__">normalizePayload</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">validatePayload</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">buildDto</span>(...);
</code></pre>
<h3 data-id="heading-30">é‡æ„æ¸…å•ï¼šå®‰å…¨åœ°ä»åµŒå¥—è°ƒç”¨è¿ç§»åˆ°ç®¡é“</h3>
<p>å¦‚æœä½ æƒ³åœ¨ç°æœ‰ä»£ç åº“å¼•å…¥ <code>|&gt;</code>ï¼Œè¿™æ˜¯ä¸ªå®ç”¨æ–¹æ³•ï¼Œä¸ä¼šæåä¸œè¥¿æˆ–æƒ¹æ¼å›¢é˜Ÿã€‚</p>
<h4 data-id="heading-31">ä»æœ‰æµ‹è¯•è¦†ç›–çš„è½¬æ¢å¼€å§‹</h4>
<p>é€‰ä¸€ä¸ªå‡½æ•°ï¼š</p>
<ul>
<li>æœ‰æ¸…æ™°çš„è¾“å…¥/è¾“å‡º</li>
<li>ä¸ä¿®æ”¹å…¨å±€çŠ¶æ€</li>
<li>æœ‰å•å…ƒæˆ–é›†æˆæµ‹è¯•è¦†ç›–</li>
</ul>
<p>é€»è¾‘å·²ç»ç¨³å®šæ—¶ç®¡é“æœ€å®¹æ˜“ï¼ˆä¹Ÿæœ€å®‰å…¨ï¼‰ã€‚</p>
<h4 data-id="heading-32">å…ˆæŠŠåµŒå¥—è°ƒç”¨è½¬æˆé¡ºåºæ­¥éª¤ï¼ˆå¯é€‰ä½†æœ‰æ•ˆï¼‰</h4>
<p>å¦‚æœä½ ä»è¿™å¼€å§‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$out</span> = <span class="hljs-title function_ invoke__">c</span>(<span class="hljs-title function_ invoke__">b</span>(<span class="hljs-title function_ invoke__">a</span>(<span class="hljs-variable">$in</span>)));
</code></pre>
<p>æ”¹å†™æˆï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$tmp</span> = <span class="hljs-variable">$in</span>;
<span class="hljs-variable">$tmp</span> = <span class="hljs-title function_ invoke__">a</span>(<span class="hljs-variable">$tmp</span>);
<span class="hljs-variable">$tmp</span> = <span class="hljs-title function_ invoke__">b</span>(<span class="hljs-variable">$tmp</span>);
<span class="hljs-variable">$out</span> = <span class="hljs-title function_ invoke__">c</span>(<span class="hljs-variable">$tmp</span>);
</code></pre>
<p>è¿™è®©é€»è¾‘é˜¶æ®µæ˜ç¡®ã€‚ç„¶åç®¡é“åŒ–ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$out</span> = <span class="hljs-variable">$in</span>
    |&gt; <span class="hljs-title function_ invoke__">a</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">b</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">c</span>(...);
</code></pre>
<h4 data-id="heading-33">ç”¨å°çš„"å¯é…ç½® callable"è¾…åŠ©å‡½æ•°å¤„ç†å¤šå‚æ•°å‡½æ•°</h4>
<p>ä¸è¦åˆ°å¤„æ’’åŒ…è£…é—­åŒ…ï¼Œé›†ä¸­æ¨¡å¼å¦‚ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">withDelimiter</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$d</span></span>): <span class="hljs-title">Closure</span>
</span>{
    <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">fn</span> (<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$v</span></span>): <span class="hljs-title">array</span> =&gt;</span> <span class="hljs-title function_ invoke__">explode</span>(<span class="hljs-variable">$d</span>, <span class="hljs-variable">$v</span>);
}
</code></pre>
<p>è¿™è®©ç®¡é“ä¿æŒå¹²å‡€ä¸€è‡´ã€‚</p>
<h4 data-id="heading-34">ä¿æŒéªŒè¯è¯­ä¹‰ä¸€è‡´</h4>
<p>å¦‚æœä½ çš„æ—§ä»£ç å¤±è´¥æ—¶è¿”å› nullï¼Œä¸è¦åœ¨ç®¡é“é‡Œæ‚„æ‚„æ¢æˆæŠ›å¼‚å¸¸ï¼Œé™¤éä½ å‡†å¤‡å¥½æ›´æ–°è°ƒç”¨ä»£ç ã€‚</p>
<p>æ˜ç¡®ç®¡é“æ˜¯ï¼š</p>
<ul>
<li>è¿”å›ç»“æœæˆ– null</li>
<li>è¿”å›ç»“æœæˆ– false</li>
<li>æ— æ•ˆè¾“å…¥æ—¶æŠ›å¼‚å¸¸</li>
</ul>
<p>ç®¡é“å¯ä»¥è¡¨è¾¾ä»»ä½•è¿™äº›é£æ ¼â€”â€”ä½†éšæœºæ··ç”¨è®©ä»£ç æ›´éš¾ç†è§£ã€‚</p>
<h4 data-id="heading-35">é‡‡ç”¨ä¸€ç§æ ¼å¼é£æ ¼å¹¶åšæŒ</h4>
<p>å¯è¯»çš„ç®¡é“é€šå¸¸è¿™æ ·ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$result</span> = <span class="hljs-variable">$value</span>
    |&gt; <span class="hljs-title function_ invoke__">step1</span>(...)
    |&gt; <span class="hljs-title function_ invoke__">step2</span>(...)
    |&gt; (<span class="hljs-function"><span class="hljs-keyword">fn</span> (<span class="hljs-params"><span class="hljs-variable">$x</span></span>) =&gt;</span> <span class="hljs-title function_ invoke__">step3</span>(<span class="hljs-variable">$x</span>))
    |&gt; <span class="hljs-title function_ invoke__">step4</span>(...);
</code></pre>
<p>å¸¸è§åšæ³•ï¼š</p>
<ul>
<li>æ¯è¡Œä¸€ä¸ªé˜¶æ®µ</li>
<li>å¯¹é½ç®¡é“ç¬¦</li>
<li>é—­åŒ…ä¿æŒçŸ­</li>
<li>é•¿é—­åŒ…æå–æˆå‘½åå‡½æ•°</li>
</ul>
<h4 data-id="heading-36">åŠ "æ£€æŸ¥ç‚¹"è°ƒè¯•ï¼Œç„¶åç§»é™¤</h4>
<p>é‡æ„æœŸé—´ï¼Œæ’å…¥ <code>inspect()</code> é˜¶æ®µéªŒè¯ä¸­é—´å€¼ã€‚ä¸€åˆ‡æ£€æŸ¥é€šè¿‡åï¼Œç§»é™¤æˆ–é™çº§æˆæ­£å¼æ—¥å¿—ã€‚</p>
<h4 data-id="heading-37">ç”¨ä»£ç å®¡æŸ¥å¼ºåˆ¶"ç®¡é“ç”¨äºè½¬æ¢ï¼Œä¸æ˜¯ç”¨äºä¸€åˆ‡"</h4>
<p>ç®¡é“æ“ä½œç¬¦å¯ä»¥æé«˜å¯è¯»æ€§ã€‚ä¹Ÿå¯ä»¥å˜æˆéšè—å¤æ‚æ€§çš„æ—¶å°šå£°æ˜ã€‚</p>
<p>ä¸€ä¸ªç®€å•çš„å®¡æŸ¥æŒ‡å—æœ‰å¸®åŠ©ï¼š</p>
<ul>
<li>ç”¨ <code>|&gt;</code> åšè½¬æ¢ç®¡é“</li>
<li>é¿å… <code>|&gt;</code> åšå¤æ‚åˆ†æ”¯æˆ–å‰¯ä½œç”¨å¯†é›†çš„åºåˆ—</li>
<li>ä¼˜å…ˆå‘½åå‡½æ•°è€Œä¸æ˜¯é•¿å†…è”é—­åŒ…</li>
</ul>
<h3 data-id="heading-38">ç»“è®ºï¼š|&gt; æœ€å¥½ç”¨åœ¨è¯»èµ·æ¥åƒæ•…äº‹çš„æ—¶å€™</h3>
<p>PHP 8.5 çš„ç®¡é“æ“ä½œç¬¦ä¸æ˜¯æ›¿ä»£ç»å…¸ PHP é£æ ¼â€”â€”å®ƒæ˜¯è¡¥å……ã€‚</p>
<p>ç”¨å®ƒå½“ä½ æƒ³ï¼š</p>
<ul>
<li>æŠŠè½¬æ¢è¡¨è¾¾æˆä»å·¦åˆ°å³çš„æµ</li>
<li>å‡å°‘åµŒå¥—æ‹¬å·</li>
<li>è®©"æ•°æ®æ•…äº‹"åœ¨ä»£ç é‡Œå¯è§</li>
</ul>
<p>é¿å…å®ƒå½“å®ƒå˜æˆï¼š</p>
<ul>
<li>éšè—çš„å‰¯ä½œç”¨</li>
<li>å¯†é›†çš„é—­åŒ…é“¾</li>
<li>ä¼ªè£…æˆä¼˜é›…çš„å¤æ‚åˆ†æ”¯</li>
</ul>
<p>å¦‚æœä½ ä¿æŒç®¡é“èšç„¦ï¼Œç»™æœ‰æ„ä¹‰çš„æ­¥éª¤å‘½åï¼ŒæŠŠè°ƒè¯•/éªŒè¯å½“ä½œä¸€ç­‰å…¬æ°‘ï¼Œ<code>|&gt;</code> èƒ½è®© PHP ä»£ç æ„Ÿè§‰æ˜æ˜¾æ›´ç°ä»£â€”â€”ä¸ç‰ºç‰²å›¢é˜Ÿéœ€è¦çš„å®ç”¨ã€å¯è¯»é£æ ¼ã€‚</p>
<h3 data-id="heading-39">å‚è€ƒ</h3>
<ul>
<li>PHP æ‰‹å†Œï¼š"å‡½æ•°å¼æ“ä½œç¬¦"ï¼ˆç®¡é“æ“ä½œç¬¦ <code>|&gt;</code>ï¼›callable çº¦æŸï¼›ç®­å¤´å‡½æ•°æ‹¬å·è¦æ±‚ï¼‰</li>
<li>PHP RFCï¼š"Pipe Operator v3"ï¼ˆè®¾è®¡ã€ä¼˜å…ˆçº§è¯´æ˜ã€å¼•ç”¨é™åˆ¶ã€æ€§èƒ½è¯´æ˜ï¼‰</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰‘æŒ‡offer-59ã€æŒ‰ä¹‹å­—å½¢é¡ºåºæ‰“å°â¼†å‰æ ‘]]></title>    <link>https://juejin.cn/post/7591744347827322906</link>    <guid>https://juejin.cn/post/7591744347827322906</guid>    <pubDate>2026-01-06T00:50:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591744347827322906" data-draft-id="7589916567875731498" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰‘æŒ‡offer-59ã€æŒ‰ä¹‹å­—å½¢é¡ºåºæ‰“å°â¼†å‰æ ‘"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-06T00:50:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SevenCoding"/> <meta itemprop="url" content="https://juejin.cn/user/3261615728242467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰‘æŒ‡offer-59ã€æŒ‰ä¹‹å­—å½¢é¡ºåºæ‰“å°â¼†å‰æ ‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3261615728242467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SevenCoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T00:50:50.000Z" title="Tue Jan 06 2026 00:50:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¢˜â½¬æè¿°</h2>
<p>è¯·å®ç°â¼€ä¸ªå‡½æ•°æŒ‰ç…§ä¹‹å­—å½¢æ‰“å°â¼†å‰æ ‘ï¼Œå³ç¬¬â¼€â¾æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œç¬¬â¼†å±‚æŒ‰ç…§ä»å³â¾„å·¦çš„é¡ºåºæ‰“å°ï¼Œç¬¬ä¸‰â¾æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰“å°ï¼Œå…¶ä»–â¾ä»¥æ­¤ç±»æ¨ã€‚</p>
<p>ç¤ºä¾‹1
è¾“â¼Šï¼š{8,6,10,5,7,9,11}
è¿”å›å€¼ï¼š[[8],[10,6],[5,7,9,11]]</p>
<h2 data-id="heading-1">æ€è·¯åŠè§£ç­”</h2>
<h3 data-id="heading-2">åŒå‘é“¾è¡¨ï¼ˆæ¨èï¼‰</h3>
<ol>
<li>å€ŸåŠ©åŒå‘é“¾è¡¨ï¼Œåˆå§‹åŒ–â¼€ä¸ªæ·»åŠ â½…å‘ boolean å€¼ï¼Œå…ˆå°†æ ¹èŠ‚ç‚¹æ·»åŠ è¿›å»ï¼š</li>
<li>è·å– list â¾¥â¾¯å‰©ä¸‹çš„å…ƒç´ çš„ä¸ªæ•°ï¼ŒæŒ¨ä¸ªå–å‡ºå°±æ˜¯â¼€å±‚ï¼Œå–å‡ºçš„æ—¶å€™ï¼Œå¦‚æœ reverse ä¸º true ï¼Œåˆ™å¾€é“¾è¡¨çš„ç¬¬ 0 ä¸ªç´¢å¼•ä½ç½®æ·»åŠ ï¼Œå¦åˆ™ç›´æ¥åœ¨åâ¾¯æ·»åŠ ï¼Œç„¶ååˆ¤æ–­æ¯â¼€ä¸ªå–å‡ºæ¥çš„èŠ‚ç‚¹çš„å·¦å³èŠ‚ç‚¹æ˜¯ä¸æ˜¯ä¸ºç©ºï¼Œä¸ä¸ºç©ºåˆ™åŠ â¼Šé“¾è¡¨ã€‚</li>
<li>æ¯â¼€å±‚å¤„ç†å®Œä¹‹åï¼Œå°† list åŠ â¼Šç»“æœé›†ä¸­ï¼Œç„¶åç¿»è½¬ reverse çš„å€¼ï¼Œç»§ç»­åˆ¤æ–­ list æ˜¯ä¸æ˜¯ä¸ºç©ºï¼Œæ‰§â¾ç¬¬â¼†æ­¥å¾ªç¯ã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> ArrayList &lt; ArrayList &lt; Integer &gt;&gt; Print(TreeNode pRoot) {
        LinkedList &lt; TreeNode &gt; nodes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span> &lt; &gt; ();
        ArrayList &lt; ArrayList &lt; Integer &gt;&gt; results = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();
        <span class="hljs-type">boolean</span> <span class="hljs-variable">reverse</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (pRoot != <span class="hljs-literal">null</span>) {
            nodes.add(pRoot);
            <span class="hljs-keyword">while</span> (!nodes.isEmpty()) {
                ArrayList &lt; Integer &gt; integers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>();
                <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> nodes.size();
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; size; i++) {
                    <span class="hljs-type">TreeNode</span> <span class="hljs-variable">node</span> <span class="hljs-operator">=</span> nodes.poll();
                    <span class="hljs-keyword">if</span> (reverse) {
                        integers.add(node.val);
                    } <span class="hljs-keyword">else</span> {
                        integers.add(<span class="hljs-number">0</span>, node.val);
                    }
                    <span class="hljs-keyword">if</span> (node.left != <span class="hljs-literal">null</span>) {
                        nodes.offer(node.left);
                    }
                    <span class="hljs-keyword">if</span> (node.right != <span class="hljs-literal">null</span>) {
                        nodes.offer(node.right);
                    }
                }
                <span class="hljs-keyword">if</span> (integers.size() != <span class="hljs-number">0</span>) {
                    results.add(integers);
                }
                reverse = !reverse;
            }
        }
        <span class="hljs-keyword">return</span> results;
    }
}
</code></pre>
<ul>
<li>ç©ºé—´å¤æ‚åº¦ç”±äºå€ŸåŠ©äº†é¢å¤–çš„ list ï¼Œä¸º O(n)</li>
<li>æ—¶é—´å¤æ‚åº¦ï¼Œç”±äºæ¯ä¸ªèŠ‚ç‚¹è¿›â¼Šé˜Ÿåˆ—â¼œå‡ºæ¥ï¼Œä¸º O(2n) ï¼Œä¹Ÿæ˜¯ O(n) ã€‚</li>
</ul>
<h3 data-id="heading-3">é˜Ÿåˆ— + æ–¹å‘åè½¬</h3>
<p>è¿™æ˜¯æœ€ç›´æ¥çš„æ–¹æ³•ã€‚æˆ‘ä»¬è¿›è¡Œæ ‡å‡†çš„å±‚åºéå†ï¼Œä½†ç”¨ä¸€ä¸ªæ ‡å¿—ä½è®°å½•å½“å‰å±‚æ˜¯å¥‡æ•°å±‚è¿˜æ˜¯å¶æ•°å±‚ã€‚å¯¹äºå¶æ•°å±‚ï¼Œæˆ‘ä»¬åœ¨å°†è¯¥å±‚çš„èŠ‚ç‚¹å€¼åˆ—è¡¨åŠ å…¥æœ€ç»ˆç»“æœå‰ï¼Œå…ˆè¿›è¡Œåè½¬</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> ArrayList&lt;ArrayList&lt;Integer&gt;&gt; <span class="hljs-title function_">Print</span><span class="hljs-params">(TreeNode pRoot)</span> {
        ArrayList&lt;ArrayList&lt;Integer&gt;&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">if</span> (pRoot == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> result;

        Queue&lt;TreeNode&gt; queue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();
        queue.offer(pRoot);
        <span class="hljs-type">boolean</span> <span class="hljs-variable">leftToRight</span> <span class="hljs-operator">=</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// æ–¹å‘æ ‡å¿—ï¼Œtrueè¡¨ç¤ºä»å·¦åˆ°å³</span>

        <span class="hljs-keyword">while</span> (!queue.isEmpty()) {
            <span class="hljs-type">int</span> <span class="hljs-variable">levelSize</span> <span class="hljs-operator">=</span> queue.size(); <span class="hljs-comment">// å½“å‰å±‚çš„èŠ‚ç‚¹æ•°</span>
            ArrayList&lt;Integer&gt; levelList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

            <span class="hljs-comment">// éå†å½“å‰å±‚çš„æ‰€æœ‰èŠ‚ç‚¹</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; levelSize; i++) {
                <span class="hljs-type">TreeNode</span> <span class="hljs-variable">node</span> <span class="hljs-operator">=</span> queue.poll();
                levelList.add(node.val); <span class="hljs-comment">// å°†èŠ‚ç‚¹å€¼åŠ å…¥å½“å‰å±‚åˆ—è¡¨</span>

                <span class="hljs-comment">// å°†ä¸‹ä¸€å±‚çš„èŠ‚ç‚¹æŒ‰æ ‡å‡†é¡ºåºï¼ˆå…ˆå·¦åå³ï¼‰åŠ å…¥é˜Ÿåˆ—</span>
                <span class="hljs-keyword">if</span> (node.left != <span class="hljs-literal">null</span>) queue.offer(node.left);
                <span class="hljs-keyword">if</span> (node.right != <span class="hljs-literal">null</span>) queue.offer(node.right);
            }

            <span class="hljs-comment">// å¦‚æœæ˜¯å¶æ•°å±‚ï¼ˆä»ç¬¬0å±‚å¼€å§‹ç®—åˆ™ä¸ºå¥‡æ•°ç´¢å¼•ï¼‰ï¼Œåè½¬å½“å‰å±‚åˆ—è¡¨</span>
            <span class="hljs-keyword">if</span> (!leftToRight) {
                Collections.reverse(levelList);
            }
            result.add(levelList);
            leftToRight = !leftToRight; <span class="hljs-comment">// åˆ‡æ¢æ–¹å‘</span>
        }
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n)ã€‚æ¯ä¸ªèŠ‚ç‚¹è¢«è®¿é—®ä¸€æ¬¡ï¼Œå¯¹äºå¶æ•°å±‚ï¼Œ<code>Collections.reverse</code>çš„æ—¶é—´å¤æ‚åº¦ä¸º O(å½“å‰å±‚èŠ‚ç‚¹æ•°)ï¼Œæ‰€æœ‰å±‚çš„èŠ‚ç‚¹æ•°ç›¸åŠ ä¸º nï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)ã€‚é˜Ÿåˆ—å’Œç»“æœåˆ—è¡¨æ‰€éœ€ç©ºé—´ä¸èŠ‚ç‚¹æ•° n æˆçº¿æ€§å…³ç³»ã€‚</li>
</ul>
<h3 data-id="heading-4">åŒæ ˆäº¤æ›¿</h3>
<p>åˆ©ç”¨æ ˆåè¿›å…ˆå‡ºï¼ˆLIFOï¼‰çš„ç‰¹æ€§æ¥è‡ªç„¶åœ°å®ç°é¡ºåºçš„åè½¬ã€‚æˆ‘ä»¬ä½¿ç”¨ä¸¤ä¸ªæ ˆï¼Œä¸€ä¸ªç”¨äºå¤„ç†å½“å‰å±‚ï¼Œå¦ä¸€ä¸ªç”¨äºå­˜å‚¨ä¸‹ä¸€å±‚çš„èŠ‚ç‚¹</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    <span class="hljs-keyword">public</span> ArrayList&lt;ArrayList&lt;Integer&gt;&gt; <span class="hljs-title function_">Print</span><span class="hljs-params">(TreeNode pRoot)</span> {
        ArrayList&lt;ArrayList&lt;Integer&gt;&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">if</span> (pRoot == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> result;

        Stack&lt;TreeNode&gt; stack1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;(); <span class="hljs-comment">// å¤„ç†å¥‡æ•°å±‚ï¼ˆä»å·¦åˆ°å³ï¼‰</span>
        Stack&lt;TreeNode&gt; stack2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;(); <span class="hljs-comment">// å¤„ç†å¶æ•°å±‚ï¼ˆä»å³åˆ°å·¦ï¼‰</span>
        stack1.push(pRoot);

        <span class="hljs-comment">// å½“ä¸¤ä¸ªæ ˆéƒ½ä¸ºç©ºæ—¶ï¼Œéå†ç»“æŸ</span>
        <span class="hljs-keyword">while</span> (!stack1.isEmpty() || !stack2.isEmpty()) {
            ArrayList&lt;Integer&gt; levelList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

            <span class="hljs-keyword">if</span> (!stack1.isEmpty()) {
                <span class="hljs-comment">// å¤„ç†stack1ï¼ˆå¥‡æ•°å±‚ï¼‰ï¼Œå…¶å­èŠ‚ç‚¹å°†ä»¥â€œä»å³åˆ°å·¦â€çš„é¡ºåºå‹å…¥stack2</span>
                <span class="hljs-keyword">while</span> (!stack1.isEmpty()) {
                    <span class="hljs-type">TreeNode</span> <span class="hljs-variable">node</span> <span class="hljs-operator">=</span> stack1.pop();
                    levelList.add(node.val);
                    <span class="hljs-comment">// å…³é”®ï¼šå…ˆå·¦å­èŠ‚ç‚¹åå³å­èŠ‚ç‚¹å…¥æ ˆï¼Œå‡ºæ ˆé¡ºåºåˆ™ä¸ºå…ˆå³åå·¦</span>
                    <span class="hljs-keyword">if</span> (node.left != <span class="hljs-literal">null</span>) stack2.push(node.left);
                    <span class="hljs-keyword">if</span> (node.right != <span class="hljs-literal">null</span>) stack2.push(node.right);
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// å¤„ç†stack2ï¼ˆå¶æ•°å±‚ï¼‰ï¼Œå…¶å­èŠ‚ç‚¹å°†ä»¥â€œä»å·¦åˆ°å³â€çš„é¡ºåºå‹å…¥stack1</span>
                <span class="hljs-keyword">while</span> (!stack2.isEmpty()) {
                    <span class="hljs-type">TreeNode</span> <span class="hljs-variable">node</span> <span class="hljs-operator">=</span> stack2.pop();
                    levelList.add(node.val);
                    <span class="hljs-comment">// å…³é”®ï¼šå…ˆå³å­èŠ‚ç‚¹åå·¦å­èŠ‚ç‚¹å…¥æ ˆï¼Œå‡ºæ ˆé¡ºåºåˆ™ä¸ºå…ˆå·¦åå³</span>
                    <span class="hljs-keyword">if</span> (node.right != <span class="hljs-literal">null</span>) stack1.push(node.right);
                    <span class="hljs-keyword">if</span> (node.left != <span class="hljs-literal">null</span>) stack1.push(node.left);
                }
            }
            result.add(levelList);
        }
        <span class="hljs-keyword">return</span> result;
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n)ã€‚æ¯ä¸ªèŠ‚ç‚¹è¢«å‹å…¥æ ˆå’Œå¼¹å‡ºæ ˆå„ä¸€æ¬¡ã€‚</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)ã€‚ä¸¤ä¸ªæ ˆåœ¨æœ€åæƒ…å†µä¸‹å…±åŒå­˜å‚¨ n ä¸ªèŠ‚ç‚¹ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025å¹´ï¼Œç¬¬äºŒæ¬¾åˆ›ä¸šé¡¹ç›®ï¼Œpxchartsè¶…çº§è¡¨æ ¼ï¼Œæœ€æ–°è¿›å±•æ¥å•¦]]></title>    <link>https://juejin.cn/post/7591972586360258579</link>    <guid>https://juejin.cn/post/7591972586360258579</guid>    <pubDate>2026-01-06T00:53:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591972586360258579" data-draft-id="7591697558377250858" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025å¹´ï¼Œç¬¬äºŒæ¬¾åˆ›ä¸šé¡¹ç›®ï¼Œpxchartsè¶…çº§è¡¨æ ¼ï¼Œæœ€æ–°è¿›å±•æ¥å•¦"/> <meta itemprop="keywords" content="å‰ç«¯,GitHub,React.js"/> <meta itemprop="datePublished" content="2026-01-06T00:53:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾å°å¤•"/> <meta itemprop="url" content="https://juejin.cn/user/3808363978429613"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025å¹´ï¼Œç¬¬äºŒæ¬¾åˆ›ä¸šé¡¹ç›®ï¼Œpxchartsè¶…çº§è¡¨æ ¼ï¼Œæœ€æ–°è¿›å±•æ¥å•¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363978429613/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾å°å¤•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T00:53:16.000Z" title="Tue Jan 06 2026 00:53:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>"å½“æˆ‘ä»¬çš„è¡¨æ ¼è¶Šæ¥è¶Šå®½ï¼Œåˆ—æ•°ä»10åˆ°50å†åˆ°100ï¼Œæˆ‘ç»ˆäºæ„è¯†åˆ°ï¼šæ•°æ®ä¸æ˜¯æ‰å¹³çš„ï¼Œæ˜¯æˆ‘ä»¬æŠŠå®ƒå‹æ‰äº†ã€‚"</p>
</blockquote>
<p>ä½œä¸ºä¸€ä¸ªåœ¨æ•°æ®å¯è§†åŒ–é¢†åŸŸæ‘¸çˆ¬æ»šæ‰“å¤šå¹´çš„å¼€å‘è€…+åˆ›ä¸šè€…ï¼Œæˆ‘ä»Šå¤©æƒ³å’Œå¤§å®¶èŠèŠæˆ‘ä»¬æœ€æ–°çš„AIäº§å“Â <strong>pxcharts</strong>Â å¤šç»´è¡¨æ ¼ï¼Œä»¥åŠæˆ‘æœ€è¿‘ä¸Šçº¿çš„æ–°åŠŸèƒ½â€”â€”<strong>å­è®°å½•</strong>ã€‚ï¼ˆå­è®°å½•åŠŸèƒ½å·²ä¸Šçº¿ï¼Œå¤§å®¶æ„Ÿå…´è¶£å¯ä»¥ä½“éªŒä¸€ä¸‹ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc8ed50de5f942b38016cce6da20ef0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265595&amp;x-signature=sTblEsZH1W2a0rPOU1OKu2irfBI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-0">pxchartsæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>ç®€å•è¯´ï¼ŒpxchartsÂ æ˜¯æˆ‘ä»¬å›¢é˜Ÿç²¾å¿ƒæ‰“é€ çš„AIå¤šç»´è¡¨æ ¼äº§å“ã€‚ä½†è¿™æ ·è®²å¤ªå®˜æ–¹äº†ï¼Œè®©æˆ‘æ¢ä¸ªè¯´æ³•ï¼š</p>
<p>å®ƒæ˜¯æˆ‘å¯¹"<strong>å¦‚æœExcelç”Ÿåœ¨2024å¹´ï¼Œä¼šé•¿ä»€ä¹ˆæ ·</strong>"è¿™ä¸ªé—®é¢˜çš„å›ç­”ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e39689953ca4b8c8d58847032fb7cce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265595&amp;x-signature=jJNK0bIeCQhgWyZXWBoYxCkGl9U%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¼ ç»Ÿçš„ç”µå­è¡¨æ ¼åƒä¸€å¼ æ— é™å¤§çš„çº¸ï¼Œæˆ‘ä»¬åœ¨è¿™å¼ çº¸ä¸Š"æ‘Šå¤§é¥¼"â€”â€”ä¸æ–­å¢åŠ åˆ—ã€ä¸æ–­å¢åŠ è¡Œï¼Œç›´åˆ°è¿™å¼ "é¥¼"å¤§åˆ°æˆ‘ä»¬è‡ªå·±ä¹Ÿæ‰¾ä¸åˆ°æƒ³è¦çš„æ•°æ®ã€‚pxchartsæƒ³åšçš„ï¼Œæ˜¯è®©æ•°æ®<strong>è‡ªç„¶ç”Ÿé•¿</strong>è€Œä¸æ˜¯<strong>è¢«åŠ¨å †ç Œ</strong>ã€‚</p>
<p>æœ€è¿‘æˆ‘ä»¬èŠ±äº†å¤§é‡ç²¾åŠ›åœ¨è®¾è®¡å’Œå®ç°å­è®°å½•åŠŸèƒ½ï¼ˆå½“ç„¶ä¹Ÿæ˜¯ç”¨æˆ·åé¦ˆæœ€å¤šçš„é—®é¢˜ï¼‰ï¼Œå¥½åœ¨ä»Šå¤©ç»ˆäºå®ç°äº†ï¼Œä¸‹é¢æˆ‘å°±å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<p>åŒæ—¶ä¸ºäº†è®©å¤§å®¶æ›´å¥½çš„ç†è§£å’Œç ”ç©¶å¤šç»´è¡¨æ ¼ï¼Œ æˆ‘å¼€æºäº†ä¸€ä¸ªåŸºç¡€ç‰ˆæœ¬çš„å¤šç»´è¡¨æ ¼ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å­¦ä¹ å‚è€ƒä¸€ä¸‹ï¼š</p>
<p>githubÂ åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMrXujiang%2Fpxcharts" target="_blank" title="https://github.com/MrXujiang/pxcharts" ref="nofollow noopener noreferrer">github.com/MrXujiang/pâ€¦</a></p>
<p>ä½“éªŒåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpxcharts.turntip.cn" target="_blank" title="https://pxcharts.turntip.cn" ref="nofollow noopener noreferrer">pxcharts.turntip.cn</a></p>
<p>psï¼šåç»­æˆ‘ä¼šå®šæœŸåŒæ­¥æˆ‘ä»¬åˆ›ä¸šçš„è¿›å±•ï¼Œå¤§å®¶æœ‰å¥½çš„æƒ³æ³•ï¼Œå»ºè®®ï¼Œä¹Ÿæ¬¢è¿éšæ—¶äº¤æµåé¦ˆï½</p>
<h2 data-id="heading-1">å­è®°å½•ï¼šè®©è¡¨æ ¼æœ‰äº†"å±‚çº§æ€ç»´"</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ccb1be1630547b48231f0a2b3dff836~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265595&amp;x-signature=k06d8S7M9SCvaDt3xaKcokXJTuw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-2">å®ƒæ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ</h3>
<p>æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šæˆ‘ä»¬åœ¨ç®¡ç†ä¸€ä¸ªäº§å“éœ€æ±‚è¡¨æ ¼ï¼Œæ¯ä¸€è¡Œæ˜¯ä¸€ä¸ªéœ€æ±‚ã€‚ä½†å¾ˆå¿«æˆ‘ä»¬ä¼šå‘ç°ï¼Œæ¯ä¸ªéœ€æ±‚ä¸‹é¢è¿˜æœ‰å­ä»»åŠ¡ï¼Œå­ä»»åŠ¡ä¸‹é¢è¿˜æœ‰Bugï¼ŒBugä¸‹é¢è¿˜æœ‰æµ‹è¯•ç”¨ä¾‹...</p>
<p>ä¼ ç»Ÿçš„åšæ³•æ˜¯ï¼š</p>
<ul>
<li>æ–°å»ºä¸€ä¸ª"å­ä»»åŠ¡"åˆ—ï¼Œç”¨é€—å·åˆ†éš”æ‰€æœ‰å­ä»»åŠ¡</li>
<li>æˆ–è€…å¹²è„†æ–°å»ºä¸€å¼ "å­ä»»åŠ¡è¡¨"ï¼Œç„¶åç”¨VLOOKUPæ¥å›æŸ¥æ‰¾</li>
<li>æœ€ç³Ÿç³•çš„æ˜¯ï¼Œç›´æ¥æŠŠå­ä»»åŠ¡ä½œä¸ºæ–°è¡Œæ·»åŠ ï¼Œç„¶åæ‰‹åŠ¨ç»´æŠ¤å±‚çº§å…³ç³»</li>
</ul>
<p>pxchartsÂ çš„å­è®°å½•åŠŸèƒ½åšäº†ä»¶åº•å±‚å¤æ‚ï¼ˆæ•°æ®ç»“æ„è®¾è®¡ï¼‰ä½†éå¸¸æœ‰ä»·å€¼çš„äº‹ï¼š<strong>è®©è¡¨æ ¼è¡Œä¹Ÿèƒ½"ç”Ÿå­©å­"</strong> ã€‚</p>
<p>å³é”®ç‚¹å‡»ä»»æ„è¡Œåºå· â†’ "åˆ›å»ºå­è®°å½•" â†’ ä¸€ä¸ªæ–°çš„å­è¡Œå°±å‡ºç°äº†ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b89f859581142bf80dabfa5137b8266~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265595&amp;x-signature=u02y8a2rt8EhQjKVk5XxpVLRTv0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-3">ä¸ºä»€ä¹ˆè¿™æ ·è®¾è®¡ï¼Ÿ</h3>
<p>è¿™ä¸ªè®¾è®¡èƒŒåæœ‰ä¸‰ä¸ªæ ¸å¿ƒæ€è€ƒï¼š</p>
<p><strong>1. æ•°æ®æœ¬æ¥å°±æœ‰å±‚çº§ï¼Œæˆ‘ä»¬åªæ˜¯è¿˜åŸå®ƒ</strong></p>
<p>çœ‹çœ‹æˆ‘ä»¬å‘¨å›´çš„ä¸–ç•Œï¼š</p>
<ul>
<li>å…¬å¸ â†’ éƒ¨é—¨ â†’ å›¢é˜Ÿ â†’ ä¸ªäºº</li>
<li>äº§å“ â†’ æ¨¡å— â†’ åŠŸèƒ½ â†’ ç”¨æˆ·æ•…äº‹</li>
<li>å¹´ â†’ å­£åº¦ â†’ æœˆ â†’ å‘¨ â†’ æ—¥</li>
</ul>
<p>å±‚çº§æ˜¯ä¿¡æ¯çš„è‡ªç„¶ç»„ç»‡æ–¹å¼ã€‚æ‰å¹³åŒ–åªæ˜¯ä¸ºäº†é€‚åº”å·¥å…·é™åˆ¶è€Œåšçš„å¦¥åã€‚</p>
<p>è™½ç„¶åœ¨è®¾è®¡å¤šç»´è¡¨æ ¼åˆæœŸï¼Œæˆ‘çš„è®¾è®¡å“²å­¦ä¸€ç›´æ˜¯æŠŠå¤æ‚çš„äº‹æƒ…åšç®€å•ï¼Œä½†æ˜¯é€šè¿‡å¸‚åœºçš„è¾©è¯ä¹‹åï¼Œæˆ‘è¿˜æ˜¯â€œå¦¥åâ€äº†ã€‚</p>
<p><strong>2. å±€éƒ¨ç»†èŠ‚ä¸åº”è¯¥æ±¡æŸ“æ•´ä½“è§†å›¾</strong></p>
<p>ä¼ ç»Ÿè¡¨æ ¼çš„é—®é¢˜åœ¨äºï¼Œä¸ºäº†å®¹çº³æ‰€æœ‰ç»†èŠ‚ï¼Œæˆ‘ä»¬ä¸å¾—ä¸ä¸æ–­å¢åŠ åˆ—ã€‚æœ€åå¾—åˆ°ä¸€ä¸ª50åˆ—çš„"å·¨è¡¨"ï¼Œä½†90%çš„æ—¶é—´æˆ‘ä»¬åªéœ€è¦çœ‹å‰5åˆ—ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cc91679fb0b42beb34e98aa6ade17f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265595&amp;x-signature=Hg5ikEzP8W6otUkIIsYOkNy4GyQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å­è®°å½•è®©"ç»†èŠ‚å¾…åœ¨ç»†èŠ‚è¯¥å¾…çš„åœ°æ–¹"â€”â€”åªæœ‰å½“ä½ éœ€è¦çœ‹æŸä¸ªéœ€æ±‚çš„å­ä»»åŠ¡æ—¶ï¼Œæ‰å±•å¼€å®ƒï¼›å…¶ä»–æ—¶å€™ï¼Œå®ƒå®‰å®‰é™é™åœ°å¾…åœ¨çˆ¶è¡Œé‡Œã€‚</p>
<p><strong>3. AIæ—¶ä»£ï¼Œç»“æ„åŒ–æ¯”å †ç Œæ›´é‡è¦</strong></p>
<p>AIæ“…é•¿å¤„ç†ç»“æ„åŒ–æ•°æ®ï¼Œä½†ä¸æ“…é•¿ä»ä¸€å †æ‰å¹³çš„æ•°æ®ä¸­è¿˜åŸå±‚çº§å…³ç³»ã€‚</p>
<p>é€šè¿‡å­è®°å½•ï¼Œæˆ‘ä»¬è®©æ•°æ®ç»“æ„è‡ªå¸¦"ä¸Šä¸‹æ–‡"ï¼Œè¿™è®©AIèƒ½æ›´å¥½åœ°ç†è§£æ•°æ®é—´çš„å…³ç³»ï¼Œæä¾›æ›´æ™ºèƒ½çš„å»ºè®®ã€‚</p>
<h2 data-id="heading-4">é‚£ä¹ˆï¼Œä»€ä¹ˆæ—¶å€™è¯¥ç”¨å­è®°å½•å‘¢ï¼Ÿ</h2>
<p>ç»è¿‡è¿™å‡ å¤©çš„å†…æµ‹ï¼ˆå·²æœ‰100äººè·å–åˆ°äº†å†…æµ‹ç å¹¶é¢‘ç¹ä½¿ç”¨ï¼‰ï¼Œæˆ‘å‘ç°å­è®°å½•åœ¨å‡ ä¸ªåœºæ™¯ä¸‹ç‰¹åˆ«æœ‰ç”¨ï¼š</p>
<h3 data-id="heading-5">1. äº§å“éœ€æ±‚ç®¡ç†</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4d70359b9cb4a8780eea2f66895644c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265595&amp;x-signature=FQIuflUAp2W%2FPMsbcFcx8jwRAVg%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">2. é¡¹ç›®ä»»åŠ¡æ‹†è§£</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf9da5e247504c2081c112c3c875f36a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265595&amp;x-signature=nnEl56HptFuf1gTtrm1Aq3eYOLU%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">3. çŸ¥è¯†åº“ç»„ç»‡</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/532a955d10054e018eb27addbe8e397c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265595&amp;x-signature=%2FSfIsMQBiwUibRTnnYAFl5Tbask%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">4. å®¢æˆ·è·Ÿè¿›ç®¡ç†</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/058bf7b3c2da4a36ad8d0a58524d2558~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265595&amp;x-signature=%2BfQLWHB59bKb11%2FYrwYRQ55LLxE%3D" alt="image.png" loading="lazy"/></p>
<p>å½“ç„¶è¿˜æœ‰å¾ˆå¤šåœºæ™¯ï¼Œå¤§å®¶å¯ä»¥æ…¢æ…¢æ¢ç´¢ï¼Œåç»­æˆ‘ä¹Ÿä¼šæŒç»­è¿­ä»£ï¼Œä¸Šçº¿æ›´å¤šé«˜ä»·å€¼çš„åŠŸèƒ½ã€‚</p>
<h2 data-id="heading-9">æŠ€æœ¯å®ç°çš„å°å¿ƒæ€</h2>
<p>ä½œä¸ºæŠ€æœ¯åšä¸»ï¼Œæˆ‘çŸ¥é“ä½ ä»¬è‚¯å®šå¥½å¥‡è¿™ä¸ªåŠŸèƒ½æ˜¯æ€ä¹ˆå®ç°çš„ã€‚ç®€å•è¯´å‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<p><strong>æ•°æ®ç»“æ„</strong>ï¼šæˆ‘ä»¬é‡‡ç”¨äº†é‚»æ¥è¡¨æ¨¡å‹+ç‰©åŒ–è·¯å¾„çš„æ··åˆæ–¹æ¡ˆã€‚è¿™æ ·æ—¢æ”¯æŒé«˜æ•ˆçš„å±‚çº§æŸ¥è¯¢ï¼Œåˆä¾¿äºæƒé™æ§åˆ¶å’Œæ•°æ®å¯¼å‡ºã€‚</p>
<p><strong>å‰ç«¯æ¸²æŸ“</strong>ï¼šè™šæ‹Ÿæ»šåŠ¨æ˜¯å¿…é¡»çš„ï¼Œä½†å±‚çº§ç¼©è¿›è®©é—®é¢˜å¤æ‚åŒ–äº†ã€‚æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆæ˜¯"åˆ†å±‚è™šæ‹Ÿæ»šåŠ¨"â€”â€”æ¯ä¸€å±‚éƒ½æœ‰è‡ªå·±çš„è™šæ‹Ÿæ»šåŠ¨å®¹å™¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7c25d03b6754fed91b576870f457e45~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b6Q5bCP5aSV:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265595&amp;x-signature=uto47JW5tth%2BqpAScXEC%2FqF4iHc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>AIé›†æˆ</strong>ï¼šå­è®°å½•è®©AIæœ‰äº†"ä¸Šä¸‹æ–‡æ„Ÿ"ã€‚æ¯”å¦‚å½“ä½ åœ¨ä¸€ä¸ªéœ€æ±‚ä¸‹åˆ›å»ºå­è®°å½•æ—¶ï¼ŒAIä¼šåŸºäºçˆ¶éœ€æ±‚çš„å†…å®¹æ™ºèƒ½æ¨èå­ä»»åŠ¡çš„æ ‡é¢˜å’Œå±æ€§ã€‚</p>
<h2 data-id="heading-10">å¼€æºï¼Œæ˜¯ä¸ºäº†æ›´å¥½çš„å…±åˆ›</h2>
<p>pxchartsÂ æˆ‘æä¾›äº†ä¸€ä¸ªå¼€æºç‰ˆæœ¬ï¼ŒGitHubåœ°å€æˆ‘æ”¾åœ¨æ–‡æœ«äº†ã€‚ä¸ºä»€ä¹ˆå¼€æºï¼Ÿ</p>
<p>å› ä¸ºæˆ‘è§‰å¾—<strong>æ•°æ®ç»„ç»‡æ–¹å¼çš„é©æ–°ï¼Œä¸åº”è¯¥è¢«æŸä¸ªäº§å“ç‹¬å </strong>ã€‚</p>
<p>æˆ‘ä»¬æ¯å¤©éƒ½åœ¨å’Œè¡¨æ ¼æ‰“äº¤é“ï¼Œä½†è¡¨æ ¼çš„å½¢æ€å‡ åå¹´æ²¡å˜è¿‡äº†ã€‚ä¹Ÿè®¸é€šè¿‡å¼€æºï¼Œæˆ‘ä»¬èƒ½ä¸€èµ·æ¢ç´¢å‡ºæ›´å¤šæœ‰è¶£çš„å¯èƒ½æ€§ã€‚</p>
<h2 data-id="heading-11">å†™åœ¨æœ€å</h2>
<p>å›åˆ°å¼€å¤´çš„é‚£ä¸ªæ¯”å–»ï¼šæ•°æ®ä¸æ˜¯æ‰å¹³çš„ï¼Œæ˜¯æˆ‘ä»¬æŠŠå®ƒå‹æ‰äº†ã€‚</p>
<p>å­è®°å½•åŠŸèƒ½åªæ˜¯ä¸€ä¸ªå¼€å§‹ã€‚æˆ‘ä»¬è¿˜åœ¨å®éªŒæ›´å¤šè®©æ•°æ®"è‡ªç„¶ç”Ÿé•¿"çš„åŠŸèƒ½ï¼šæ™ºèƒ½åˆ†ç»„ã€åŠ¨æ€è§†å›¾ã€å…³ç³»å›¾è°±...</p>
<p>å¦‚æœå¤§å®¶ä¹Ÿå¯¹<strong>è®©æ•°æ®å›å½’æœ¬çœŸå½¢æ€</strong>æ„Ÿå…´è¶£ï¼Œæ¬¢è¿å‚è€ƒÂ <strong>pxcharts</strong>ã€‚</p>
<p>æ¯•ç«Ÿï¼Œåœ¨AIæ—¶ä»£ï¼Œ<strong>ç»“æ„åŒ–çš„æ€è€ƒ</strong>æ¯”<strong>å †ç Œçš„æ•°æ®</strong>æ›´æœ‰ä»·å€¼ã€‚</p>
<p>è€Œä¸€ä¸ªå¥½çš„å·¥å…·ï¼Œåº”è¯¥è®©æ€è€ƒæ›´è‡ªç„¶ï¼Œè€Œä¸æ˜¯æ›´å¤æ‚ã€‚</p>
<hr/>
<p><strong>GitHubåœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMrXujiang%2Fpxcharts" target="_blank" title="https://github.com/MrXujiang/pxcharts" ref="nofollow noopener noreferrer">github.com/MrXujiang/pâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·˜ä¸€æ·˜ä¸ƒè½½å¾é€” æŠ€æœ¯æ·±è€•å®ˆæœ¬åˆ]]></title>    <link>https://juejin.cn/post/7591702898080841743</link>    <guid>https://juejin.cn/post/7591702898080841743</guid>    <pubDate>2026-01-06T00:53:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591702898080841743" data-draft-id="7591697558377152554" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·˜ä¸€æ·˜ä¸ƒè½½å¾é€” æŠ€æœ¯æ·±è€•å®ˆæœ¬åˆ"/> <meta itemprop="keywords" content="Kotlin,Android"/> <meta itemprop="datePublished" content="2026-01-06T00:53:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·˜ä¸€æ·˜ä¸ƒè½½å¾é€” æŠ€æœ¯æ·±è€•å®ˆæœ¬åˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T00:53:56.000Z" title="Tue Jan 06 2026 00:53:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><p><em>æœ¬ç³»åˆ—ä¸º Android æŠ€æœ¯èŒåœºé¢˜æè™šæ„å°è¯´ï¼Œæ‰€æœ‰ç™»åœºäººç‰©ã€å…¬å¸åç§°ã€ç»„ç»‡æ¶æ„åŠç›¸å…³æƒ…èŠ‚å‡ä¸ºåˆ›ä½œæ‰€éœ€è™šæ„è€Œæ¥ï¼Œè‹¥æœ‰é›·åŒï¼Œçº¯å±å¶ç„¶ã€‚ä¹¦ä¸­æ¶‰åŠçš„æŠ€æœ¯çŸ¥è¯†ç»ä¸“ä¸šæ¢³ç†ï¼Œä»…ä¾›å‚è€ƒã€‚</em></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/459c1573ddbe4deeb9d09490c234445a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265636&amp;x-signature=efJnBiP%2FJS9Qq%2BVF9eI5XWYV9VQ%3D" alt="0.png" loading="lazy"/></p>
<h2 data-id="heading-0">å…«ï¼‰æ·˜ä¸€æ·˜ä¸ƒè½½å¾é€” æŠ€æœ¯æ·±è€•å®ˆæœ¬åˆ</h2>
<p>ç¬¬äºŒå¤©ä¸€æ—©ï¼Œå°å®‰è¸©ç€ä¸Šç­é“ƒå†²åˆ°äº†è€æ¨å·¥ä½å‰ï¼Œèº«åçš„å‘æŸéšç€è·‘åŠ¨è½»å¿«åœ°æ‰«è¿‡è‚©å¤´ï¼Œæ‰‹é‡Œè¿˜æ”¥ç€åŠæ¯æ²¡å–å®Œçš„è±†æµ†ï¼Œè¯­æ°”é‡Œæ»¡æ˜¯æ€¥åˆ‡ï¼šâ€œè€æ¨è€æ¨ï¼Œæ˜¨å¤©ä½ è®²åˆ°åœ¨æ·˜ä¸€æ·˜è§£å†³äº†å•†å“åˆ—è¡¨ç­‰å¾ˆå¤šé—®é¢˜ï¼Œåæ¥å‘¢ï¼Ÿä½ åœ¨æ·˜ä¸€æ·˜è¿˜ç»å†äº†å•¥ï¼Ÿåæ¥ä¸ºå•¥æ¥æˆ‘ä»¬å…¬å¸äº†ï¼Ÿâ€</p>
<p>è€æ¨åˆšæ‰“å¼€ç”µè„‘ï¼Œæ­£åœ¨åŠ è½½å¼€å‘ç¯å¢ƒï¼Œé—»è¨€æŠ¬çœ¼ç¬‘äº†ç¬‘ï¼Œæ•…æ„è°ƒä¾ƒé“ï¼šâ€œè¿™éƒ½ä¸Šç­ç‚¹äº†ï¼Œä½ ä¸å…ˆå»å¿™è‡ªå·±çš„äº‹ï¼Ÿæ²¡å·¥ä½œå—ï¼Ÿâ€</p>
<p>å°å®‰æŠŠè±†æµ†å¾€æ¡Œè§’ä¸€æ”¾ï¼Œçœ¨äº†çœ¨çœ¼ï¼Œç†ç›´æ°”å£®åœ°è¯´ï¼šâ€œå·¥ä½œå“ªæœ‰å¬ä½ è®²èŒåœºç»å†ã€åƒæŠ€æœ¯å¤§ç‰›çš„ç“œé‡è¦ï¼å¿«è¯´å¿«è¯´ã€‚â€</p>
<p>è€æ¨è¢«å¥¹é€—ä¹äº†ï¼ŒæŒ‡äº†æŒ‡æ—è¾¹çš„ç©ºä½ï¼šâ€œè¡Œå§ï¼Œå…ˆåä¸‹æ¥ï¼Œåˆ«æ€¥ã€‚â€</p>
<p>å°å®‰è¿å¿™æ‹‰è¿‡æ¤…å­åä¸‹ï¼Œçœ¼ç¥é‡Œæ»¡æ˜¯æœŸå¾…ã€‚æ™“é›…å’Œé˜¿æ³½ã€åšæ–‡ä¹Ÿé™†ç»­èµ°åˆ°å·¥ä½ï¼Œå¬åˆ°ä¸¤äººçš„å¯¹è¯ï¼Œçº·çº·å›´äº†è¿‡æ¥â€”â€”æ˜¨å¤©è€æ¨è®²çš„èŒåœºç»å†ï¼Œè®©è¿™å‡ ä¸ªå®ä¹ ç”Ÿéƒ½å¬å¾—å…¥äº†è¿·ã€‚</p>
<p>è€æ¨æŒ‡å°–åœ¨æ¡Œé¢ä¸Šè½»è½»æ•²å‡»ï¼Œåƒæ˜¯åœ¨æ¢³ç†é‚£äº›åœ¨æ·˜ä¸€æ·˜è·¨è¶Šä¸ƒå¹´çš„æŠ€æœ¯å°è®°ï¼Œç¼“ç¼“å¼€å£ï¼šâ€œåˆ—è¡¨ä¼˜åŒ–åªæ˜¯èµ·ç‚¹ï¼ŒçœŸæ­£çš„æˆé•¿ï¼Œæ˜¯åœ¨ä¸€æ¬¡åˆä¸€æ¬¡çš„é¡¹ç›®è¿­ä»£é‡Œç†¬å‡ºæ¥çš„ã€‚â€</p>
<p>......</p>
<p>2016å¹´ï¼Œè€æ¨å…¥èŒæ·˜ä¸€æ·˜çš„ç¬¬ä¸€å¹´ã€‚</p>
<p>......</p>
<p>å½“æ—¶æ·˜ä¸€æ·˜æ­£é¢ä¸´ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜ï¼šéšç€åŠŸèƒ½è¿­ä»£ï¼ŒAPP çš„ <strong>APK</strong> ä½“ç§¯ä»æœ€åˆçš„18Mé£™å‡åˆ°äº†90Mï¼Œå¾ˆå¤šä½å†…å­˜æœºå‹ç”¨æˆ·åé¦ˆä¸‹è½½æ…¢ã€å®‰è£…åå ç”¨ç©ºé—´è¿‡å¤§ï¼Œå¸è½½ç‡å±…é«˜ä¸ä¸‹ã€‚</p>
<p>æŠ€æœ¯æ€»ç›‘ç‹å“¥æŠŠä¼˜åŒ– <strong>APK</strong> ä½“ç§¯çš„ä»»åŠ¡äº¤ç»™äº†è€æ¨æ‰€åœ¨çš„å°ç»„ï¼Œæ˜ç¡®è¦æ±‚â€œåœ¨ä¸å‰Šå‡æ ¸å¿ƒåŠŸèƒ½çš„å‰æä¸‹ï¼ŒæŠŠä½“ç§¯å‹ç¼©åˆ°60Mä»¥å†…â€ã€‚</p>
<p>â€œè¿™å¯ä¸æ˜¯ç®€å•åˆ å‡ ä¸ªæ–‡ä»¶å°±èƒ½è§£å†³çš„ã€‚â€å°ç»„å¼€ä¼šæ—¶ï¼Œç»„é•¿æ•²ç€æ¡Œå­å¼ºè°ƒï¼Œâ€œå¤§å®¶å…ˆæŠŠ <strong>APK</strong> åŒ…è§£å‹ç¼©ï¼Œåˆ†ææ¸…æ¥šä½“ç§¯å¢é•¿çš„æ ¹æºã€‚â€</p>
<p>è€æ¨ä¸»åŠ¨æ‰¿æ‹…äº†èµ„æºåˆ†æçš„å·¥ä½œã€‚</p>
<p>ä»–ç”¨ Android Studio çš„åˆ†æå·¥å…·æ‹†è§£ <strong>APK</strong>ï¼Œå‘ç°é—®é¢˜ä¸»è¦å‡ºåœ¨ä¸‰ä¸ªåœ°æ–¹ï¼šä¸€æ˜¯æœªä¼˜åŒ–çš„å›¾ç‰‡èµ„æºå äº†è¿‘16Mï¼ŒäºŒæ˜¯å¼•å…¥çš„ç¬¬ä¸‰æ–¹åº“å­˜åœ¨å¤§é‡æœªä½¿ç”¨çš„ä»£ç ï¼Œä¸‰æ˜¯åŒ…å«äº†é€‚é…æ‰€æœ‰ CPU æ¶æ„çš„åŸç”Ÿåº“ã€‚</p>
<p>â€œæˆ‘æœ‰ä¸ªæ€è·¯ã€‚â€è€æ¨åœ¨ç¬¬äºŒæ¬¡å°ç»„ä¼šä¸Šæ‹¿å‡ºäº†è¯¦ç»†æ–¹æ¡ˆï¼Œâ€œé¦–å…ˆç”¨ <strong>WebP</strong> æ ¼å¼æ›¿æ¢æ‰€æœ‰ <strong>PNG</strong> å’Œ <strong>JPEG</strong> å›¾ç‰‡ï¼Œè¿™ç§æ ¼å¼å‹ç¼©ç‡æ¯” <strong>PNG</strong> é«˜ä¸å°‘ï¼Œè€Œä¸”ç”»è´¨æŸå¤±å¾ˆå°ï¼›ç„¶åå¯ç”¨ä»£ç å‹ç¼©å·¥å…·ï¼Œç§»é™¤æœªä½¿ç”¨çš„ç±»å’Œæ–¹æ³•ï¼›æœ€åé€šè¿‡ <code>abiFilters</code> é…ç½®ï¼Œé…åˆåº”ç”¨å¸‚åœºåˆ†åŒ…ç­–ç•¥ï¼Œè®©ç”¨æˆ·åªä¸‹è½½å’Œè‡ªå·±æœºå™¨ CPU æ¶æ„ç›¸å…³çš„å®‰è£…åŒ…ï¼Œå‰”é™¤å…¶ä»–å°ä¼—æ¶æ„çš„åŸç”Ÿåº“ï¼Œè¿›ä¸€æ­¥å‡å°ç”¨æˆ·å®é™…ä¸‹è½½ä½“ç§¯ã€‚â€</p>
<p>æ–¹æ¡ˆå¾—åˆ°äº†ä¸€è‡´è®¤å¯ï¼Œä½†æ‰§è¡Œè¿‡ç¨‹ä¸­å´é‡åˆ°äº†é˜»ç¢ï¼šç¬¬ä¸‰æ–¹åº“ä¸­çš„éƒ¨åˆ†ä»£ç é€šè¿‡åå°„è°ƒç”¨ï¼Œç›´æ¥ç”¨ <strong>ProGuard</strong> å‹ç¼©ä¼šå¯¼è‡´åŠŸèƒ½å¼‚å¸¸ã€‚</p>
<p>è€æ¨ç†¬å¤œç ”ç©¶ <strong>ProGuard</strong> è§„åˆ™ï¼Œé€ä¸€æ’æŸ¥åå°„è°ƒç”¨çš„ç±»å’Œæ–¹æ³•ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ç”¨ <code>-keep</code> è§„åˆ™æ˜¾å¼ä¿ç•™è¿™äº›ç±»å’Œæ–¹æ³•ï¼Œç»ˆäºè§£å†³äº†é—®é¢˜ã€‚</p>
<p>ç»è¿‡ä¸€ä¸ªæœˆçš„ä¼˜åŒ–ï¼Œ<strong>APK</strong> ä½“ç§¯æˆåŠŸå‹ç¼©åˆ°60.8Mï¼Œä¸‹è½½è½¬åŒ–ç‡æå‡äº†17%ã€‚</p>
<p>ç‹å“¥åœ¨éƒ¨é—¨ä¾‹ä¼šä¸Šç‰¹æ„è¡¨æ‰¬äº†è€æ¨ï¼šâ€œä¼˜åŒ–ä¸æ˜¯è›®å¹²ï¼Œè¦ç²¾å‡†å®šä½é—®é¢˜ï¼Œç”¨å¯¹æŠ€æœ¯å·¥å…·ï¼Œè¿™ä¸€ç‚¹è€æ¨åšå¾—å¾ˆåˆ°ä½ã€‚â€</p>
<p>è¿™æ¬¡ä¼˜åŒ–è®©è€æ¨å¯¹ Android æ„å»ºæµç¨‹å’Œèµ„æºç®¡ç†æœ‰äº†æ·±åˆ»ç†è§£ï¼Œä¹Ÿè®©ä»–å…»æˆäº†â€œå¼€å‘å³ä¼˜åŒ–â€çš„ä¹ æƒ¯â€”â€”åç»­å¼€å‘æ–°åŠŸèƒ½æ—¶ï¼Œä»–æ€»ä¼šæå‰è€ƒè™‘èµ„æºå ç”¨ï¼Œé¿å…å†å‡ºç°ä½“ç§¯è‡ƒè‚¿çš„é—®é¢˜ã€‚</p>
<p>16å¹´æœ«ï¼Œå›¢é˜Ÿåš Android 5.0 ç³»ç»Ÿé€‚é…å·²è¿‡å»ä¸€å¹´å¤šï¼Œé¡¹ç›®è™½æ—©å·²è½åœ°æ”¶å°¾ï¼Œä½†è€æ¨å‘ç°ä¸å°‘åŒäº‹å¯¹ <strong>ART</strong> ä¸ <strong>Dalvik</strong> ä¸¤ç§è¿è¡Œæ—¶çš„å·®å¼‚ä»ä¸€çŸ¥åŠè§£ï¼Œåç»­å¼€å‘ä¸­è¿˜æ—¶ä¸æ—¶å†’å‡ºé€‚é…ç›¸å…³çš„å°é—®é¢˜ã€‚</p>
<p>ä¸ºå½»åº•æ‰“é€šè¿™ä¸ªæŠ€æœ¯å µç‚¹ï¼Œå¸®å›¢é˜Ÿå¤¯å®åŸºç¡€ï¼Œéƒ¨é—¨ä¸“é—¨ç»„ç»‡äº†ä¸€åœºä¸“é¢˜æŠ€æœ¯åˆ†äº«ä¼šã€‚å‡­å€Ÿæ‰å®çš„é€‚é…ç»éªŒå’Œå¯¹è¿è¡Œæ—¶åŸç†çš„æ·±å…¥ç ”ç©¶ï¼Œè€æ¨ä¸»åŠ¨æ¥ä¸‹äº†è¿™æ¬¡åˆ†äº«ä»»åŠ¡ã€‚</p>
<p>åˆ†äº«ä¼šä¸Šï¼Œè€æ¨ç»“åˆæå‰å¤‡å¥½çš„æµç¨‹å›¾ï¼ŒæŠŠæ ¸å¿ƒåŒºåˆ«è®²å¾—æ¡ç†æ¸…æ™°ã€‚</p>
<p>â€œ<strong>Dalvik</strong> ç”¨çš„æ˜¯ <strong>JIT</strong> å³æ—¶ç¼–è¯‘ï¼Œè¿è¡Œæ—¶æ‰æŠŠå­—èŠ‚ç è½¬æˆæœºå™¨ç ï¼Œè¿™ç§æ–¹å¼å¯åŠ¨å¿«ï¼Œä½†è¿è¡Œæ•ˆç‡ä¸ç¨³å®šï¼›<strong>ART</strong> åˆ™æ˜¯ <strong>AOT</strong> é¢„ç¼–è¯‘ï¼Œå®‰è£…æ—¶å°±å®Œæˆè½¬æ¢ï¼Œè™½ç„¶é¦–æ¬¡å®‰è£…è´¹ç‚¹æ—¶é—´ï¼Œä½†åç»­è¿è¡Œæ›´æµç•…ã€åŠŸè€—ä¹Ÿæ›´ä½ã€‚â€</p>
<p>ä»–è¿˜ç»“åˆæ·˜ä¸€æ·˜ APP çš„çœŸå®è¿è¡Œæ•°æ®ï¼Œæ‹†è§£ä¸¤ç§è¿è¡Œæ—¶å¯¹æ€§èƒ½çš„å®é™…å½±å“ï¼Œè®²è§£å¾—é€šä¿—æ˜“æ‡‚ï¼Œè®©åœ¨åœºåŒäº‹éƒ½èƒ½å¬æ˜ç™½ã€‚</p>
<p>åˆ†äº«ä¸€ç»“æŸï¼Œç‹å“¥ç‡å…ˆèµ·èº«é¼“æŒï¼Œèµè®¸é“ï¼šâ€œè€æ¨æŠŠå¤æ‚çš„åº•å±‚é€»è¾‘è®²å¾—æ˜æ˜ç™½ç™½ï¼Œè¿˜è´´ç´§å’±ä»¬çš„ä¸šåŠ¡åœºæ™¯ï¼Œè¿™è¶Ÿåˆ†äº«å…¨æ˜¯å¹²è´§ï¼â€</p>
<p>è¿™åœºåˆ†äº«ä¹Ÿè®©è€æ¨åœ¨éƒ¨é—¨å†…çš„æŠ€æœ¯è¯è¯­æƒæ›´æ‰å®äº†ã€‚</p>
<p>æ—¶é—´ä¸€æ™ƒæ¥åˆ°2017å¹´ï¼Œå…¥èŒæ·˜ä¸€æ·˜ä¸¤å¹´çš„è€æ¨å·²èƒ½ç‹¬ç«‹æ‰¿æ¥æ ¸å¿ƒä»»åŠ¡ã€‚</p>
<p>è¿™ä¸€å¹´ï¼Œæ·˜ä¸€æ·˜è®¡åˆ’æ¨å‡ºâ€œç¦»çº¿ç¼“å­˜â€åŠŸèƒ½ï¼Œç”¨æˆ·å¯åœ¨ WiFi ç¯å¢ƒä¸‹ç¼“å­˜å•†å“æ•°æ®ï¼Œç¦»çº¿æ—¶ä¹Ÿèƒ½æŸ¥çœ‹ï¼Œè¿™ä¸ªåŠŸèƒ½çš„æ ¸å¿ƒéš¾ç‚¹æ˜¯æ–‡ä»¶ç³»ç»Ÿçš„å®‰å…¨ä¸é«˜æ•ˆç®¡ç†ï¼Œè€æ¨å†æ¬¡æŒ‘èµ·é‡æ‹…ã€‚</p>
<p>â€œç”¨æˆ·ç¼“å­˜çš„å•†å“æ•°æ®åŒ…å«ä»·æ ¼ã€è¯¦æƒ…ç­‰æ•æ„Ÿä¿¡æ¯ï¼Œå¿…é¡»ä¿è¯å®‰å…¨ï¼ŒåŒæ—¶è¦è€ƒè™‘ä¸åŒè®¾å¤‡çš„å­˜å‚¨æƒ…å†µï¼Œé¿å…å ç”¨è¿‡å¤šç©ºé—´ã€‚â€è€æ¨åœ¨éœ€æ±‚è¯„å®¡ä¼šä¸Šè¯´é“ã€‚</p>
<p>ä»–æ·±å…¥ç ”ç©¶äº† Android æ–‡ä»¶ç³»ç»Ÿçš„åˆ†åŒºç»“æ„ï¼Œæœ€ç»ˆå†³å®šå°†ç¼“å­˜æ•°æ®å­˜å‚¨åœ¨ <code>/data</code> åˆ†åŒºçš„åº”ç”¨ç§æœ‰ç›®å½•ä¸‹â€”â€”è¿™é‡Œçš„æ–‡ä»¶åªæœ‰å½“å‰åº”ç”¨å¯è®¿é—®ï¼Œç¬¦åˆå®‰å…¨è¦æ±‚ï¼Œæ›´å…³é”®çš„æ˜¯ï¼Œåº”ç”¨ç§æœ‰ç›®å½•æ— éœ€ç”³è¯·ä»»ä½•å­˜å‚¨æƒé™ï¼Œè¿™å¯¹å¼€å‘æ¥è¯´æ˜¯æå¤§åˆ©å¥½ï¼Œèƒ½é¿å…æƒé™ç”³è¯·è¢«ç”¨æˆ·æ‹’ç»çš„é—®é¢˜ã€‚</p>
<p>åŒæ—¶ï¼Œä»–è®¾è®¡äº†ä¸€å¥—é’ˆå¯¹å†…å­˜ç¼“å­˜çš„ç®¡ç†ç­–ç•¥ï¼šé€šè¿‡ <code>ActivityManager</code> ç›‘æ§è®¾å¤‡å†…å­˜çŠ¶æ€ï¼Œä½å†…å­˜æ—¶è‡ªåŠ¨æ¸…ç†è¿‡æœŸç¼“å­˜ï¼›é™åˆ¶å•ä¸ªç”¨æˆ·çš„ç¼“å­˜ä¸Šé™ï¼Œè¶…è¿‡ä¸Šé™åˆ™æŒ‰â€œæœ€è¿‘æœ€å°‘ä½¿ç”¨â€åŸåˆ™åˆ é™¤æ•°æ®ã€‚</p>
<p>â€œç¦»çº¿ç¼“å­˜â€åŠŸèƒ½ä¸Šçº¿åå¹¿å—å¥½è¯„ï¼Œç”¨æˆ·ç¦»çº¿ä½¿ç”¨æ—¶é•¿æå‡äº†25%ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œç”±äºé‡‡ç”¨äº†ä¸¥æ ¼çš„æ–‡ä»¶å®‰å…¨ç­–ç•¥ï¼Œæ²¡æœ‰å‡ºç°ä»»ä½•æ•°æ®æ³„éœ²é—®é¢˜ã€‚è¿™æ¬¡é¡¹ç›®è®©è€æ¨å¯¹ Android æ–‡ä»¶ç³»ç»Ÿçš„æƒé™æ§åˆ¶å’Œå®‰å…¨æ¨¡å‹æœ‰äº†æ›´æ·±å…¥çš„ç†è§£ã€‚</p>
<p>2018å¹´ï¼Œæ·˜ä¸€æ·˜çš„ç”¨æˆ·é‡çªç ´1äº¿ï¼Œå¤šè¿›ç¨‹ç®¡ç†æˆä¸ºåˆ¶çº¦ä½“éªŒçš„æŠ€æœ¯ç“¶é¢ˆâ€”â€”å½“æ—¶åº”ç”¨çš„å¤šä¸ªç»„ä»¶è¿è¡Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­ï¼Œå¯¼è‡´å†…å­˜å ç”¨è¿‡é«˜ï¼Œåœ¨ä½é…ç½®æœºå‹ä¸Šé¢‘ç¹è¢«ç³»ç»Ÿæ€æ­»ã€‚</p>
<p>è€æ¨ä¸»å¯¼äº†å¤šè¿›ç¨‹ä¼˜åŒ–é¡¹ç›®ï¼Œä»–åœ¨ <code>AndroidManifest.xml</code> ä¸­é€šè¿‡ <code>android:process</code> å±æ€§ï¼Œå°†åå°ä¸‹è½½æœåŠ¡ã€æ¨é€æœåŠ¡ç­‰ç»„ä»¶åˆ†é…åˆ°ç‹¬ç«‹è¿›ç¨‹ä¸­ï¼šâ€œè¿™æ ·ä¸€æ¥ï¼Œä¸åŒåŠŸèƒ½æ¨¡å—çš„è¿›ç¨‹ç›¸äº’éš”ç¦»ï¼Œå³ä½¿åå°æœåŠ¡è¿›ç¨‹è¢«æ€æ­»ï¼Œä¹Ÿä¸ä¼šå½±å“å‰å° UI çš„æ­£å¸¸è¿è¡Œã€‚â€</p>
<p>ä½†å¤šè¿›ç¨‹ä¹Ÿå¸¦æ¥äº†æ–°çš„é—®é¢˜ï¼šè¿›ç¨‹é—´çš„é€šä¿¡å’Œæ•°æ®å…±äº«å˜å¾—å¤æ‚ã€‚</p>
<p>è€æ¨è°ƒç ”åï¼Œé€‰æ‹©ç”¨ <code>ContentProvider</code> å®ç°è¿›ç¨‹é—´çš„æ•°æ®å…±äº«ï¼Œè¿™æ˜¯ Android ç³»ç»Ÿæä¾›çš„è·¨è¿›ç¨‹é€šä¿¡ç»„ä»¶ï¼Œæ”¯æŒå¯¹é›†ä¸­å¼æ•°æ®åº“çš„è¯»å†™ï¼Œå®‰å…¨æ€§å’Œç¨³å®šæ€§éƒ½æœ‰ä¿éšœï¼Œå¾ˆé€‚åˆå½“å‰çš„åº”ç”¨åœºæ™¯ã€‚</p>
<p>åŒæ—¶ï¼Œä»–è¿˜ä¼˜åŒ–äº†è¿›ç¨‹ä¼˜å…ˆçº§ç®¡ç†ï¼šé€šè¿‡æå‡å‰å° UI è¿›ç¨‹çš„ä¼˜å…ˆçº§ï¼Œç¡®ä¿ç”¨æˆ·äº¤äº’æ—¶ä¸è¢«ç³»ç»Ÿæ€æ­»ï¼›å¯¹åå°è¿›ç¨‹è®¾ç½®åˆç†çš„ä¿æ´»ç­–ç•¥ï¼Œæ—¢ä¿è¯æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸ï¼Œåˆä¸å ç”¨è¿‡å¤šç³»ç»Ÿèµ„æºã€‚</p>
<p>å¤šè¿›ç¨‹ä¼˜åŒ–åï¼Œæ·˜ä¸€æ·˜ APP çš„å†…å­˜å ç”¨é™ä½äº†15%ï¼Œåå°æœåŠ¡çš„ç¨³å®šæ€§æå‡äº†60%ã€‚</p>
<p>æ­¤æ—¶çš„è€æ¨ï¼Œå·²ç»æˆé•¿ä¸ºæ·˜ä¸€æ·˜æŠ€æœ¯éƒ¨çš„èµ„æ·±å·¥ç¨‹å¸ˆï¼Œèƒ½å¤Ÿç‹¬ç«‹ä¸»å¯¼æ ¸å¿ƒé¡¹ç›®çš„æŠ€æœ¯æ–¹æ¡ˆè®¾è®¡ã€‚</p>
<p>æ—¶é—´æ¨è¿›åˆ°2021å¹´8æœˆï¼Œè·ç¦»è€æ¨2016å¹´å…¥èŒæ·˜ä¸€æ·˜å·²ç»å…­å¹´ã€‚</p>
<p>è¿™ä¸€å¹´ï¼Œè¡Œä¸šå†…è¿æ¥äº†ä¸€é¡¹å…³é”®æ”¿ç­–è°ƒæ•´ï¼šGoogle æ­£å¼å‘å¸ƒå¼ºåˆ¶è¦æ±‚ï¼Œæ‰€æœ‰æ–°ä¸Šæ¶ Google Play çš„åº”ç”¨å¿…é¡»é‡‡ç”¨ <strong>AAB</strong> æ ¼å¼æäº¤ï¼Œä¸å†æ¥å—ä¼ ç»Ÿ <strong>APK</strong> ä¸Šä¼ ï¼›å³ä¾¿å·²ä¸Šæ¶çš„å­˜é‡åº”ç”¨ï¼Œåç»­æ›´æ–°ä¹Ÿä¼šé€æ­¥æ”¶ç´§é™åˆ¶ï¼Œæœ€ç»ˆå…¨é¢åˆ‡æ¢åˆ° <strong>AAB</strong>æ ¼å¼ã€‚</p>
<p>ä½œä¸ºéœ€è¦å‡ºæµ·å¸ƒå±€çš„ç”µå•†å¹³å°ï¼Œæ·˜ä¸€æ·˜å¿…é¡»ç´§è·Ÿæ”¿ç­–è¦æ±‚å®Œæˆæ ¼å¼è¿ç§»ï¼Œè€æ¨ä¸»åŠ¨ç‰µå¤´æ¨è¿›æ·˜ä¸€æ·˜ APP ä» <strong>APK</strong> å‘ <strong>AAB</strong> çš„è¿ç§»ã€‚</p>
<p>ä»–å¸¦é¢†å›¢é˜Ÿæ¢³ç†åº”ç”¨çš„æ¨¡å—ç»“æ„ï¼Œå°†ä¸åŒé…ç½®çš„èµ„æºå’Œä»£ç æ‹†åˆ†æˆç‹¬ç«‹çš„ <code>bundle</code>ï¼Œå¹¶é’ˆå¯¹é Google åº”ç”¨å•†åº—çš„åˆ†å‘åœºæ™¯ï¼Œåˆ¶å®šäº†â€œåŒæ ¼å¼å¹¶è¡Œâ€çš„æ–¹æ¡ˆâ€”â€”Google Play åˆ†å‘ <strong>AAB</strong>ï¼Œå…¶ä»–æ¸ é“ä»ä¿ç•™ä¼˜åŒ–åçš„ <strong>APK</strong>ã€‚</p>
<p>è¿ç§»è¿‡ç¨‹ä¸­ï¼Œä»–ä»¬é‡åˆ°äº†èµ„æºæ‹†åˆ†ä¸å½»åº•ã€éƒ¨åˆ†æ¨¡å—å…¼å®¹æ€§å·®ç­‰é—®é¢˜ï¼Œè€æ¨å¸¦é¢†å›¢é˜Ÿé€ä¸€æ”»å…‹ï¼Œæœ€ç»ˆæˆåŠŸå®Œæˆè¿ç§»ã€‚</p>
<p>è¿ç§»åï¼Œç”¨æˆ·é€šè¿‡ Google Play ä¸‹è½½çš„æ·˜ä¸€æ·˜ APP å¹³å‡ä½“ç§¯å‡å°äº†28%ï¼Œä¸‹è½½è½¬åŒ–ç‡ä¹Ÿå› æ­¤å†æ¬¡æå‡ã€‚</p>
<p>â€œè¿™è¿‘å…­å¹´ï¼Œå°±åƒè·Ÿç€ Android ç³»ç»Ÿå’Œè¡Œä¸šè§„åˆ™ä¸€èµ·æˆé•¿ã€‚â€</p>
<p>è€æ¨çš„æ€ç»ªæ‹‰å›ç°å®ï¼Œè¯­æ°”ä¸­æ»¡æ˜¯æ„Ÿæ…¨ï¼Œâ€œä»2015å¹´åˆšå…¥èŒæ—¶ä¼˜åŒ–åˆ—è¡¨é¡¹æ€§èƒ½ï¼Œ2016å¹´é’»ç ” <strong>APK</strong> ä¼˜åŒ–èµ·æ­¥ï¼Œä¹‹ååˆé™†ç»­è·Ÿè¿›äº†ä¸€ç³»åˆ—æŠ€æœ¯è¿­ä»£é¡¹ç›®ï¼Œæœ€åå“åº” Google æ”¿ç­–æ¨è¿› <strong>AAB</strong> è¿ç§»ã€‚è¿™ä¸€è·¯é‡åˆ°äº†ä¸å°‘æŒ‘æˆ˜ï¼Œä½†æ¯ä¸€æ¬¡æ”»å…‹éš¾é¢˜ï¼Œéƒ½æ˜¯ä¸€æ¬¡æ‰å®çš„æˆé•¿ã€‚â€</p>
<p>åšæ–‡æç„¶å¤§æ‚Ÿï¼šâ€œæ¨å“¥ï¼ŒåŸæ¥ä½ è¯´çš„â€˜æŠ€æœ¯ä¸æ˜¯å­¤ç«‹çš„â€™æ˜¯è¿™ä¸ªæ„æ€ï¼ä¼˜åŒ– <strong>APK</strong> ä½“ç§¯è¦ç»“åˆèµ„æºä¼˜åŒ–å’Œä»£ç å‹ç¼©ï¼Œåšå¤šè¿›ç¨‹ä¼˜åŒ–è¿˜å¾—æ‡‚è·¨è¿›ç¨‹é€šä¿¡ç»„ä»¶çš„é€‰å‹ï¼Œè¿™äº›çŸ¥è¯†ç‚¹éƒ½æ˜¯ç›¸äº’å…³è”çš„ã€‚â€</p>
<p>â€œæ²¡é”™ã€‚â€è€æ¨ç‚¹ç‚¹å¤´ï¼Œâ€œè¿™ä¹Ÿæ˜¯æˆ‘æŠŠç»éªŒæ–‡æ¡£å‘ç»™ä½ ä»¬çš„åŸå› ï¼Œé‡Œé¢ä¸ä»…è®°å½•äº†æˆ‘è¸©è¿‡çš„å‘ï¼Œæ›´æ¢³ç†äº†æ¯ä¸ªæŠ€æœ¯ç‚¹çš„å…³è”é€»è¾‘ã€‚â€</p>
<p>å°±åœ¨è¿™æ—¶ï¼Œè€æ¨çš„Qä¹¦å“äº†ï¼Œæ˜¯æ—å“å‘æ¥çš„æ¶ˆæ¯ï¼šâ€œè€æ¨ï¼Œå¤šè°¢ä½ çš„æŒ‡å¯¼å’Œé¼“åŠ±ï¼Œæˆ‘ä¸€å®šå¯ä»¥ï¼â€</p>
<p>è€æ¨ç¬‘ç€å›å¤ï¼šâ€œå“ˆå“ˆï¼Œä½ æˆé•¿äº†ï¼é‡åˆ°é—®é¢˜éšæ—¶æ²Ÿé€šã€‚â€</p>
<p>å›å¤å®Œæ¶ˆæ¯ï¼Œè€æ¨çœ‹å‘çœ¼å‰çš„å®ä¹ ç”Ÿä»¬ï¼šâ€œæŠ€æœ¯æˆé•¿æ²¡æœ‰æ·å¾„ï¼Œéƒ½æ˜¯åœ¨ä¸€æ¬¡åˆä¸€æ¬¡çš„é¡¹ç›®å®è·µä¸­ç§¯ç´¯èµ·æ¥çš„ã€‚ä½ ä»¬ç°åœ¨å¤šå­¦å¤šç»ƒï¼ŒæŠŠåŸºç¡€æ‰“ç‰¢ï¼Œä»¥åé‡åˆ°å¤æ‚é—®é¢˜è‡ªç„¶èƒ½ä»å®¹åº”å¯¹ã€‚â€</p>
<p>è¯éŸ³åˆšè½ï¼Œå°å®‰å¿½ç„¶æƒ³èµ·æ˜¨å¤©æ²¡é—®å®Œçš„é—®é¢˜ï¼Œçœ¼ç¥äº®æ™¶æ™¶åœ°è¿½é—®ï¼šâ€œæ¨å“¥ï¼Œä½ åœ¨æ·˜ä¸€æ·˜å¾…äº†å…­å¹´ï¼Œä»æ–°äººæˆé•¿ä¸ºèµ„æ·±å·¥ç¨‹å¸ˆï¼ŒæŒ‰ç†è¯´å‘å±•å¾—é¡ºé£é¡ºæ°´ï¼Œæ€ä¹ˆæœ€åä¼šè·³æ§½æ¥æˆ‘ä»¬å…¬å¸å‘€ï¼Ÿâ€</p>
<p>å¬åˆ°è¿™ä¸ªé—®é¢˜ï¼Œè€æ¨çš„æ€ç»ªç¬é—´è¢«æ‹‰å›2021å¹´ <strong>AAB</strong> è¿ç§»å®Œæˆåçš„é‚£æ®µæ—¥å­ï¼Œé‚£äº›å…³äºæŠ€æœ¯ä¸ä¸šåŠ¡çš„æŒ£æ‰å’ŒçŸ›ç›¾æ¸…æ™°æµ®ç°ã€‚</p>
<p>ä»–çš„çœ¼ç¥æš—äº†æš—ï¼ŒæŒ‡å°–æ— æ„è¯†åœ°æ‘©æŒ²ç€æªç“·æ¯çš„æ¯å£ï¼Œæ²‰é»˜äº†å‡ ç§’æ‰ç¼“ç¼“å¼€å£ï¼šâ€œä¸»è¦æ˜¯åæœŸæ·˜ä¸€æ·˜çš„å‘å±•æ–¹å‘ï¼Œå’Œæˆ‘å¯¹æŠ€æœ¯çš„è¿½æ±‚è¶Šæ¥è¶Šç›¸æ‚–äº†ã€‚â€</p>
<p>â€œ2021å¹´é¡ºåˆ©å®Œæˆ <strong>AAB</strong> è¿ç§»åï¼Œå‡­å€Ÿè¿™äº›å¹´åœ¨æ ¸å¿ƒé¡¹ç›®ä¸­çš„çªå‡ºè´¡çŒ®ï¼Œ22å¹´åˆæˆ‘æ­£å¼æ™‹å‡ä¸º Android å®¢æˆ·ç«¯æ¶æ„å¸ˆã€‚â€</p>
<p>æœ¬ä»¥ä¸ºèƒ½æœ‰æ›´å¤§æƒé™æ¨åŠ¨æŠ€æœ¯ä¼˜åŒ–ï¼Œæ²¡æƒ³åˆ°å…¬å¸çš„é‡å¿ƒå´åœ¨è¿™ä¹‹åå½»åº•åå‘äº†ä¸šåŠ¡æµï¼Œå°¤å…¶æ˜¯ç–¯ç‹‚å åŠ å„ç±»å¼•å¯¼æ¶ˆè´¹è€…æ¶ˆè´¹çš„åŠŸèƒ½ã€‚è¿™äº›åŠŸèƒ½çœ‹ä¼¼èƒ½å¿«é€Ÿæå‡è¥æ”¶ï¼Œå´è®©æˆ‘å¸¦é¢†å›¢é˜Ÿäº²æ‰‹ä¼˜åŒ–åˆ°æµç•…çš„ App å˜å¾—è¶Šæ¥è¶Šè‡ƒè‚¿ï¼Œä¹‹å‰è€—è´¹å¤§é‡å¿ƒè¡€çš„æ€§èƒ½ä¼˜åŒ–æˆæœï¼Œå‡ ä¹è¢«æ¶ˆè€—æ®†å°½ã€‚</p>
<p>ä¸€æ—çš„é˜¿æ³½å¥½å¥‡åœ°è¿½é—®ï¼šâ€œå¼•å¯¼æ¶ˆè´¹å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„å‘€ï¼Ÿè·Ÿä¹‹å‰å­¦åˆ°çš„æœ‰å…³ç³»å—ï¼Ÿâ€</p>
<p>â€œå½“ç„¶ç›¸å…³ï¼Œè€Œä¸”å¾ˆå¤šå°±ä¾æ‰˜åœ¨ä¹‹å‰åšçš„å¤šè¿›ç¨‹æ¶æ„é‡Œã€‚â€è€æ¨ç‚¹å¤´ï¼Œè¯­æ°”é‡Œå¸¦ç€å‡ åˆ†æ— å¥ˆã€‚</p>
<p>â€œç­‰ç”¨æˆ·æ‰“å¼€ App æœç´¢è´­ç‰©æ—¶ï¼Œç³»ç»Ÿå°±ä¼šæ ¹æ®è¿™ä»½ä¸ªäººç”»åƒï¼Œåœ¨æœç´¢ç»“æœé‡Œæ’å…¥ä¸€éƒ¨åˆ†æ¨èå•†å“ã€‚è¿™äº›å•†å“æ ¹æœ¬ä¸æ˜¯ç”¨æˆ·åŸæœ¬æƒ³è¦æœç´¢çš„å“ç±»ï¼Œå´ä¼šè¢«ç®—æ³•åŒ…è£…å¾—æ ¼å¤–å¸å¼•äººâ€”â€”æ¯”å¦‚ç”¨å¤§å¹…ä¼˜æƒ æ ‡ç­¾ã€â€˜åƒäººåƒé¢ä¸“å±æ¨èâ€™çš„è¯æœ¯ï¼Œå†é…ä¸Šé«˜æ¸…çš„å®£ä¼ å›¾ï¼Œå°±æ˜¯ä¸ºäº†è®©ç”¨æˆ·å¿ä¸ä½ç‚¹è¿›å»ã€‚â€</p>
<p>â€œè¿™äº›æ¨èå•†å“çš„å•†å®¶ï¼Œä¼šç»™å…¬å¸æ”¯ä»˜é«˜é¢çš„å¹¿å‘Šè´¹ï¼Œæ’åè¶Šé å‰ï¼Œè´¹ç”¨è¶Šé«˜ã€‚ä¸ºäº†å¤šèµšå¹¿å‘Šè´¹ï¼ŒåæœŸæ’å…¥çš„æ¨èå•†å“è¶Šæ¥è¶Šå¤šï¼Œæœ‰æ—¶å€™ç”¨æˆ·æœä¸€ä»¶å•†å“ï¼Œå‰åŠé¡µå…¨æ˜¯æ¨èï¼ŒçœŸæ­£éœ€è¦çš„ç»“æœåè€Œè¢«å‹åˆ°äº†åé¢ã€‚â€</p>
<p>æ™“é›…çš±äº†çš±çœ‰ï¼šâ€œè¿™æ ·ä¸€æ¥ï¼Œç”¨æˆ·ä½“éªŒä¸å°±å˜å·®äº†å—ï¼Ÿè€Œä¸”åå°ä¸€ç›´è¿è¡Œä¸ªäººç”»åƒæœåŠ¡ï¼Œè‚¯å®šä¼šå¢åŠ å†…å­˜å ç”¨å’ŒåŠŸè€—å§ï¼Ÿâ€</p>
<p>â€œä½ è¯´çš„æ²¡é”™ã€‚â€è€æ¨å¹äº†å£æ°”ï¼Œâ€œæˆ‘å½“æ—¶å°±æå‡ºï¼Œè¦æ§åˆ¶æ¨èå•†å“çš„æ•°é‡ï¼Œè¿˜è¦ä¼˜åŒ–ä¸ªäººç”»åƒæœåŠ¡çš„è¿è¡Œç­–ç•¥ï¼Œé¿å…è¿‡åº¦å ç”¨èµ„æºã€‚ä½†é¢†å¯¼æ ¹æœ¬ä¸å¬ï¼Œè¿˜è¯´æˆ‘â€˜åªæ‡‚æŠ€æœ¯ä¸æ‡‚ä¸šåŠ¡â€™ï¼Œè®©æˆ‘åªç®¡ä¿è¯åŠŸèƒ½æ­£å¸¸è¿è¡Œï¼Œä¸ç”¨ç®¡ä¼˜åŒ–çš„äº‹ã€‚â€</p>
<p>â€œé‚£æ®µæ—¶é—´ï¼Œå…¬å¸è¿˜åœ¨ä¸åœåœ°åŠ æ–°çš„è¥é”€åŠŸèƒ½ï¼Œä¸€ä¼šå„¿åŠ å¼¹çª—å¼ä¼˜æƒ åˆ¸æé†’ï¼Œä¸€ä¼šå„¿åŠ é™æ—¶ç§’æ€çš„å€’è®¡æ—¶æ‚¬æµ®çª—ï¼Œè¿˜æœ‰å„ç§åˆ†äº«åŠ©åŠ›çš„å¼¹çª—ã€‚è¿™äº›åŠŸèƒ½å¤§å¤šæ˜¯ç´§æ€¥ä¸Šçº¿ï¼Œä»£ç å†™å¾—å¾ˆç²—ç³™ï¼Œè¿˜è¦æ±‚å¿…é¡»å¸¸é©»å‰å°ï¼Œæ ¹æœ¬æ²¡æœ‰ä¼˜åŒ–çš„ç©ºé—´ã€‚â€</p>
<p>â€œæˆ‘åšäº†å…­å¹´çš„æ€§èƒ½ä¼˜åŒ–ï¼Œå°±æ˜¯æƒ³è®© App è·‘å¾—æ›´æµç•…ã€ç”¨æˆ·ç”¨å¾—æ›´èˆ’æœã€‚å¯çœ‹ç€è‡ªå·±äº²æ‰‹ä¼˜åŒ–çš„æ¶æ„ï¼Œè¢«è¿™äº›è‡ƒè‚¿çš„è¥é”€åŠŸèƒ½ä¸€ç‚¹ç‚¹æ‹–å®ï¼Œç”¨æˆ·åé¦ˆçš„å¡é¡¿ã€é—ªé€€é—®é¢˜è¶Šæ¥è¶Šå¤šï¼Œæˆ‘å¿ƒé‡Œç‰¹åˆ«éš¾å—ã€‚â€</p>
<p>â€œæœ€åä¸€æ¬¡äº‰åµï¼Œæ˜¯å› ä¸ºä¸€ä¸ªâ€˜å…¨åŸŸå¼¹çª—æ¨é€â€™çš„åŠŸèƒ½ã€‚é¢†å¯¼è¦æ±‚ä¸ç®¡ç”¨æˆ·åœ¨ä½¿ç”¨å“ªä¸ªé¡µé¢ï¼Œåªè¦ç¬¦åˆè¥é”€æ¡ä»¶ï¼Œå°±å¿…é¡»å¼¹å‡ºæ¨é€çª—å£ã€‚æˆ‘åšå†³åå¯¹ï¼Œè¯´è¿™ä¸ªåŠŸèƒ½ä¼šä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒï¼Œè¿˜å¯èƒ½å¯¼è‡´æ”¯ä»˜æµç¨‹ä¸­æ–­ï¼Œå¼•å‘ç”¨æˆ·æŠ•è¯‰ã€‚â€</p>
<p>â€œä½†é¢†å¯¼æ ¹æœ¬ä¸è€ƒè™‘è¿™äº›ï¼Œåªç›¯ç€ <strong>KPI</strong> å’Œå¹¿å‘Šè´¹ï¼Œè¿˜è¯´æˆ‘â€˜é˜»ç¢å…¬å¸å‘å±•â€™ã€‚æˆ‘å’Œä»–åµå¾—å¾ˆå‡¶ï¼Œæˆ‘è¯´â€˜æŠ€æœ¯åº”è¯¥æœåŠ¡äºç”¨æˆ·ï¼Œè€Œä¸æ˜¯æˆä¸ºæ”¶å‰²ç”¨æˆ·çš„å·¥å…·â€™ã€‚åµå®Œä¹‹åæˆ‘å°±æƒ³é€šäº†ï¼Œåœ¨é‚£é‡Œç»§ç»­å¾…ä¸‹å»ï¼Œæ ¹æœ¬å®ç°ä¸äº†æˆ‘çš„æŠ€æœ¯è¿½æ±‚ï¼Œæ‰€ä»¥ç¬¬äºŒå¤©å°±æäº¤äº†è¾èŒç”³è¯·ã€‚â€</p>
<p>è€æ¨è¯éŸ³æ¯•ï¼Œä¼—äººå®‰é™äº†å¥½ä¸€ä¼šå„¿ã€‚</p>
<p>é˜¿æ³½å¿ä¸ä½å°å£°æ„Ÿå¹ï¼šâ€œè€æ¨ä½ ä¹Ÿå¤ªåˆšäº†å§ï¼æ•¢ç›´æ¥è·Ÿé¢†å¯¼è¿™ä¹ˆç¡¬åˆšï¼Œæ¢æˆ‘è‚¯å®šæ²¡è¿™ä¸ªå‹‡æ°”ã€‚â€</p>
<p>åšæ–‡ä¹Ÿç‚¹ç‚¹å¤´ï¼šâ€œæ˜¯å•Šï¼Œä¸ºäº†åšæŒæŠ€æœ¯åˆå¿ƒæ”¾å¼ƒç¨³å®šçš„æ¶æ„å¸ˆå²—ä½ï¼Œå¤ªä½©æœäº†ã€‚â€</p>
<p>å°å®‰èº«åçš„å‘æŸè½»è½»æ™ƒäº†æ™ƒï¼Œçœ¼ç¥é‡Œæ»¡æ˜¯æ•¬ä½©ï¼Œéšå³åˆå¸¦ç€å¥½å¥‡è¿½é—®ï¼šâ€œé‚£è€æ¨ï¼Œä½ è·³æ§½æ¥å’±ä»¬ ByteFlow ä¹‹åï¼Œæ„Ÿè§‰å’‹æ ·å‘€ï¼Ÿä¼šä¸ä¼šæ¯”åœ¨æ·˜ä¸€æ·˜èˆ’æœäº›ï¼Ÿâ€</p>
<p>æåˆ°ç°åœ¨çš„å·¥ä½œï¼Œè€æ¨ç´§ç»·çš„ç¥è‰²æŸ”å’Œäº†äº›ï¼Œå˜´è§’æ³›èµ·ä¸€ä¸æµ…ç¬‘ï¼šâ€œæ„Ÿè§‰è¿˜å¥½ï¼ŒByteFlow çš„æ°›å›´æ›´åŠ¡å®ï¼Œä¸ä¼šä¸ºäº†çŸ­æœŸè¥æ”¶ç‰ºç‰²ç”¨æˆ·ä½“éªŒï¼ŒæŠ€æœ¯å†³ç­–ä¹Ÿæ›´å°Šé‡å·¥ç¨‹å¸ˆçš„ä¸“ä¸šæ„è§ï¼Œæ²¡é‚£ä¹ˆä¸è¿‘äººæƒ…ã€‚â€</p>
<p>è¯´ç€ï¼Œä»–è¯é”‹ä¸€è½¬ï¼Œçœ‹å‘å‡ ä¸ªå®ä¹ ç”Ÿè®¤çœŸå®å˜±ï¼šâ€œä¸è¿‡ä½ ä»¬å¯åˆ«å­¦æˆ‘å½“åˆé‚£æ ·å†²åŠ¨è¾èŒã€‚æˆ‘å½“æ—¶ä¹Ÿæ˜¯å¹´è½»æ°”ç››ï¼Œè„‘å­ä¸€çƒ­å°±æäº¤äº†è¾èŒç”³è¯·ï¼Œç°åœ¨å›æƒ³èµ·æ¥å…¶å®æŒºå±é™©çš„â€”â€”è£¸è¾ä¹‹åçš„èŒä¸šç©ºçª—æœŸã€æ–°å·¥ä½œçš„ä¸ç¡®å®šæ€§ï¼Œéƒ½æ˜¯è¦æ‰¿æ‹…çš„é£é™©ã€‚â€</p>
<p>â€œè®¤çœŸæƒ³æƒ³ï¼Œå½“åˆçš„é—®é¢˜æœªå¿…æ²¡æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆã€‚æ¯”å¦‚æˆ‘å¯ä»¥è¯•ç€æ‰¾é¢†å¯¼åšæ›´è¯¦ç»†çš„åˆ©å¼Šåˆ†æï¼Œç”¨æ•°æ®è¯æ˜è¿‡åº¦è¥é”€ä¼šå¯¼è‡´ç”¨æˆ·æµå¤±ï¼›ä¹Ÿå¯ä»¥è”åˆå›¢é˜Ÿé‡Œæœ‰ç›¸åŒæƒ³æ³•çš„åŒäº‹ä¸€èµ·æ¨åŠ¨æ”¹å˜ï¼Œè€Œä¸æ˜¯ä¸€å‘³ç¡¬ç¢°ç¡¬ã€‚å†²åŠ¨è¾èŒï¼Œå…¶å®æ˜¯ä¸è´Ÿè´£ä»»ï¼Œä¹Ÿæ˜¯æœ€å†’é™©çš„é€‰æ‹©ã€‚â€</p>
<p>â€œæ¯”å¦‚æˆ‘å¯ä»¥è¯•ç€æ‰¾é¢†å¯¼åšæ›´è¯¦ç»†çš„åˆ©å¼Šåˆ†æï¼Œç”¨æ•°æ®è¯æ˜è¿‡åº¦è¥é”€ä¼šå¯¼è‡´ç”¨æˆ·æµå¤±ï¼›ä¹Ÿå¯ä»¥è”åˆå›¢é˜Ÿé‡Œæœ‰ç›¸åŒæƒ³æ³•çš„åŒäº‹ä¸€èµ·æ¨åŠ¨æ”¹å˜ï¼Œè€Œä¸æ˜¯ä¸€å‘³ç¡¬ç¢°ç¡¬ã€‚å†²åŠ¨è¾èŒï¼Œå…¶å®æ˜¯ä¸è´Ÿè´£ä»»ä¸”æœ€å†’é™©çš„é€‰æ‹©ã€‚â€</p>
<p>é˜³å…‰é€è¿‡è½åœ°çª—æ´’åœ¨å‡ äººçš„èº«ä¸Šï¼Œå°†ä»–ä»¬çš„èº«å½±æ‹‰å¾—å¾ˆé•¿ã€‚åŠå…¬åŒºçš„é”®ç›˜æ•²å‡»å£°æ¸æ¸å¯†é›†èµ·æ¥ï¼Œæ–°çš„æŠ€æœ¯æ•…äº‹ï¼Œæ­£åœ¨è¿™é‡Œæ‚„æ‚„å¼€å¯ã€‚</p>
<p>è€Œå¦ä¸€è¾¹ï¼Œåˆšæ”¶åˆ°è€æ¨é¼“åŠ±çš„æ—å“ï¼Œæ­£å¯¹ç€ç”µè„‘å±å¹•ä¸Šå¤æ‚çš„é¡¹ç›®éœ€æ±‚çœ‰å¤´ç´§é”â€”â€”ä¸€åœºå±äºä»–çš„æŠ€æœ¯æŒ‘æˆ˜ï¼Œå·²æ‚„ç„¶æ‹‰å¼€åºå¹•ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[# å‰ç«¯å¹´åº¦ç›˜ç‚¹ 2025ï¼šå®šä¹‰è¿™ä¸€å¹´çš„ 10 ä¸ªæ ¸å¿ƒå¤§äº‹ä»¶]]></title>    <link>https://juejin.cn/post/7591744411738849280</link>    <guid>https://juejin.cn/post/7591744411738849280</guid>    <pubDate>2026-01-06T00:57:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591744411738849280" data-draft-id="7591703562134601762" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="# å‰ç«¯å¹´åº¦ç›˜ç‚¹ 2025ï¼šå®šä¹‰è¿™ä¸€å¹´çš„ 10 ä¸ªæ ¸å¿ƒå¤§äº‹ä»¶"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-06T00:57:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            # å‰ç«¯å¹´åº¦ç›˜ç‚¹ 2025ï¼šå®šä¹‰è¿™ä¸€å¹´çš„ 10 ä¸ªæ ¸å¿ƒå¤§äº‹ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T00:57:02.000Z" title="Tue Jan 06 2026 00:57:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Ffrontend-wrapped-2025%2F" target="_blank" title="https://blog.logrocket.com/frontend-wrapped-2025/" ref="nofollow noopener noreferrer">Frontend Wrapped 2025: The 10 storylines that defined the year - LogRocket Blog</a></p>
<p>ç¿»è¯‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.heyfe.org%2Fblog" target="_blank" title="https://blog.heyfe.org/blog" ref="nofollow noopener noreferrer">å˜¿å˜¿</a></p>
</blockquote>
<blockquote>
<p>ğŸ“¢ <strong>å®£è¨€</strong>ï¼š<strong>æ¯å‘¨æ›´æ–°å›½å¤–è®ºå›çš„å‰ç«¯çƒ­é—¨æ–‡ç« ï¼Œæ¨èå¤§å®¶é˜…è¯»/ç¿»è¯‘ï¼Œç´§è·Ÿæ—¶äº‹ï¼ŒæŒæ¡å‰ç«¯æŠ€æœ¯åŠ¨æ€ï¼Œä¹Ÿä¸ºå†™ä½œæˆ–çªç ´æ–°é¢†åŸŸæä¾›çµæ„Ÿ~</strong></p>
<p>æ¬¢è¿å¤§å®¶è®¿é—®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTUARAN%2Ffrontend-weekly-digest-cn" target="_blank" title="https://github.com/TUARAN/frontend-weekly-digest-cn" ref="nofollow noopener noreferrer">github.com/TUARAN/fronâ€¦</a>
é¡ºæ‰‹ç‚¹ä¸ª â­ star æ”¯æŒï¼Œæ˜¯æˆ‘ä»¬æŒç»­è¾“å‡ºçš„ç»­èˆªç”µæ± ğŸ”‹âœ¨ï¼</p>
<p>åœ¨çº¿ç½‘å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ffwdc.pages.dev%2F" target="_blank" title="https://fwdc.pages.dev/" ref="nofollow noopener noreferrer">fwdc.pages.dev/</a></p>
</blockquote>
<p>2025 å¹´å¯¹å‰ç«¯å¼€å‘è€…æ¥è¯´ç®€ç›´æ˜¯ä¸€åœºæƒ…ç»ªè¿‡å±±è½¦ã€‚è¿‡å»è¿™ä¸€å¹´é‡Œï¼Œæˆ‘ä»¬è§è¯äº†å„ä¸ªè§’è½çš„ç–¯ç‹‚æ”¹è¿›ã€å¤§è§„æ¨¡å®‰å…¨æ¼æ´ï¼Œä»¥åŠæ¡†æ¶çš„é‡æ–°å‘æ˜ã€‚AI éœ¸å äº†å¤´æ¡ï¼Œæ”¹å˜äº†æˆ‘ä»¬æ„å»ºåº”ç”¨çš„æ–¹å¼ã€‚ä¸€äº›å¤§ç‰Œï¼ˆTanStackã€CSSã€TypeScriptï¼‰å¸¦æ¥äº†é‡å¤§æ›´æ–°ï¼Œä¸º 2026 å¹´åŠä»¥åå¼€è¾Ÿäº†æ–°çš„å¯èƒ½æ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47bffc8de6d54955b45d35b2a53a9004~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768266049&amp;x-signature=t6vZptGdrJ81loGuD168y7q%2Fd9Y%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™æ¬¡æˆ‘ä¸æ‰“ç®—åšä¼ ç»Ÿçš„å¹´åº¦å›é¡¾ï¼Œè€Œæ˜¯æ ¹æ®ä¸¤ä¸ªæ ‡å‡†å¯¹ä»Šå¹´æœ€é‡å¤§çš„å‰ç«¯äº‹ä»¶è¿›è¡Œæ’åï¼šå®ƒä»¬å¼•å‘çš„çƒ­åº¦ä»¥åŠå¯¹æˆ‘ä»¬æ„å»º Web åº”ç”¨æ–¹å¼çš„æŒä¹…å½±å“ã€‚æˆ‘ä»¬ä»ç¬¬ 10 ä½æœ€é‡è¦çš„æ•…äº‹çº¿å¼€å§‹ï¼Œä¸€è·¯å€’æ•°åˆ°æˆ‘è®¤ä¸ºæœ€èƒ½å®šä¹‰ 2025 å¹´å‰ç«¯å¼€å‘çš„é‚£ä¸ªäº‹ä»¶ã€‚</p>
<h2 data-id="heading-0">1. TypeScript ç»§ç»­ç»Ÿæ²»åœ°ä½</h2>
<p>TypeScript åœ¨ 2025 å¹´<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.blog%2Fdeveloper-skills%2Fprogramming-languages-and-frameworks%2Ftypescripts-rise-in-the-ai-era-insights-from-lead-architect-anders-hejlsberg%2F" target="_blank" title="https://github.blog/developer-skills/programming-languages-and-frameworks/typescripts-rise-in-the-ai-era-insights-from-lead-architect-anders-hejlsberg/" ref="nofollow noopener noreferrer">è¡¨ç°å¾—å¤ªå¥½äº†</a>ï¼š</p>
<ul>
<li>npm æ¯å‘¨ä¸‹è½½é‡è¾¾ 6000 ä¸‡æ¬¡ï¼ˆ2021 å¹´ä¸º 2000 ä¸‡æ¬¡ï¼‰</li>
<li>420 ä¸‡ä¸ª GitHub ä»“åº“åœ¨ä½¿ç”¨ TypeScript</li>
<li>å‰ 100 ä¸ª npm åº“ä¸­è¶…è¿‡ 80% éƒ½é™„å¸¦ TypeScript ç±»å‹å®šä¹‰</li>
</ul>
<p>TypeScript å¹¶ä¸æ˜¯è¦å–ä»£ JavaScriptï¼›å®ƒå°±æ˜¯å¼€å‘è€…ç°åœ¨ç¼–å†™ JavaScript çš„æ–¹å¼ã€‚å¤§å¤šæ•°ä»£ç åº“éƒ½æ˜¯ç”¨ TypeScript ç¼–å†™ï¼Œç„¶åç¼–è¯‘æˆ JavaScriptï¼ˆå°±åƒ Sass ç¼–è¯‘æˆ CSS ä¸€æ ·ï¼‰ã€‚ä½ èƒ½è·å¾—ç±»å‹å®‰å…¨ã€æ›´å¥½çš„å·¥å…·ã€çœŸæ­£å¥½ç”¨çš„è‡ªåŠ¨è¡¥å…¨ï¼Œä»¥åŠåœ¨æœ‰ç±»å‹ä»£ç ä¸‹æ€§èƒ½æå‡ 20% çš„ AI ç¼–ç åŠ©æ‰‹ã€‚</p>
<h2 data-id="heading-1">2. Tailwind CSS åœ°ä½ç¨³å›º</h2>
<p>Tailwind åœ¨ 2025 å¹´è·å¾—äº†å¤§è§„æ¨¡é‡‡ç”¨ï¼Œè€Œ styled-components å’Œå…¶ä»–è¿è¡Œæ—¶ CSS è§£å†³æ–¹æ¡ˆåˆ™å¤±å® äº†ã€‚ç°åœ¨æœ‰è¶…è¿‡ 61.7 ä¸‡ä¸ªç½‘ç«™åœ¨ä½¿ç”¨ Tailwindï¼Œå®ƒå·²ç»æˆä¸ºç°ä»£ React åº”ç”¨çš„é»˜è®¤æ ·å¼é€‰æ‹©ã€‚"å†™å†…è”æ ·å¼"çš„æ‰¹è¯„å£°å½»åº•æ¶ˆå¤±äº†ï¼›æˆ‘è§‰å¾—ç°åœ¨å¤§å®¶éƒ½é»˜è®¤ç”¨ Tailwind äº†ï¼Œè¿™å·²ç»ä¸æ˜¯ä¸ªéœ€è¦äº‰è®ºçš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-2">3. æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰æ— å¤„ä¸åœ¨</h2>
<p>SSR åœ¨ 2025 å¹´ä¸å†æ˜¯"é”¦ä¸Šæ·»èŠ±"ï¼Œè€Œæ˜¯æˆäº†å¿…éœ€å“ã€‚æ¯ä¸ªä¸»æµæ¡†æ¶éƒ½å…¨åŠ›æŠ•å…¥ï¼šNext.js å°†å…¶è®¾ä¸ºé»˜è®¤ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Fremix-3-ditched-react%2F" target="_blank" title="https://blog.logrocket.com/remix-3-ditched-react/" ref="nofollow noopener noreferrer">Remix</a>/React Router v7 å›´ç»•å®ƒæ„å»ºä¸€åˆ‡ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Ftanstack-start-overview%2F" target="_blank" title="https://blog.logrocket.com/tanstack-start-overview/" ref="nofollow noopener noreferrer">TanStack Start</a> å¼€ç®±å³å¸¦ SSRï¼Œå°±è¿ SvelteKit å’Œ Astro ä¹ŸåŠ å€æŠ¼æ³¨æœåŠ¡å™¨ä¼˜å…ˆæ¶æ„ã€‚</p>
<p>æ€§èƒ½å’Œ SEO ä¸å†æ˜¯å¯é€‰é¡¹ã€‚Google çš„ Core Web Vitals å˜å¾—æ›´ä¸¥æ ¼ï¼Œç”¨æˆ·æœŸå¾…é¡µé¢ç§’å¼€ã€‚ä½† 2025 å¹´çš„ SSR ä¸æ˜¯ 2015 å¹´é‚£ç§ç¬¨é‡çš„æœåŠ¡å™¨æ¸²æŸ“ã€‚</p>
<p>ç°ä»£ SSR å¾ˆèªæ˜ï¼šæ¡†æ¶ç°åœ¨æ”¯æŒéƒ¨åˆ†æ°´åˆï¼ˆåªæœ‰äº¤äº’éƒ¨åˆ†éœ€è¦ JavaScriptï¼‰ã€æµå¼ SSRï¼ˆHTML å‡†å¤‡å¥½å°±å‘é€ï¼‰å’Œé€‰æ‹©æ€§æ°´åˆï¼ˆå…ˆæ°´åˆå¯è§éƒ¨åˆ†ï¼‰ã€‚React Server Components æ›´è¿›ä¸€æ­¥ï¼Œè®©ä½ å¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šè·å–æ•°æ®ï¼Œè€Œä¸ç”¨æŠŠé‚£äº›é€»è¾‘å‘é€åˆ°å®¢æˆ·ç«¯ã€‚</p>
<h2 data-id="heading-3">4. Shai Halud npm æ”»å‡»äº‹ä»¶</h2>
<p>React åœ¨ 2025 å¹´æœ«åœ¨å®‰å…¨æ–¹é¢é‡åˆ°äº†éº»çƒ¦ï¼ˆç¨åä¼šè¯¦ç»†è¯´ï¼‰â€”â€”ä½†ä»Šå¹´å®ƒä»¬ä¸æ˜¯å”¯ä¸€çš„å—å®³è€…ã€‚</p>
<p>npm ç”Ÿæ€ç³»ç»Ÿä¹Ÿé­é‡äº†ä¸å°‘æ”»å‡»ã€‚9 æœˆä»½ï¼Œæ”»å‡»è€…å‘èµ·äº†ä¸€åœº<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DFi5d83gi9cM" target="_blank" title="https://www.youtube.com/watch?v=Fi5d83gi9cM" ref="nofollow noopener noreferrer">ååŒä¾›åº”é“¾æ”»å‡»</a>ï¼Œåˆ†ä¸¤æ³¢å±•å¼€ã€‚é¦–å…ˆï¼Œ9 æœˆ 8 æ—¥ï¼Œchalkã€debug å’Œ ansi-styles ç­‰åŒ…â€”â€”è¿™äº›åº“æ¯å‘¨æ€»ä¸‹è½½é‡è¾¾ 26 äº¿æ¬¡â€”â€”é€šè¿‡å¯¹ç»´æŠ¤è€…è´¦æˆ·çš„é’“é±¼æ”»å‡»è¢«æ”»é™·ã€‚</p>
<p>æ³¨å…¥çš„æ¶æ„è½¯ä»¶é’ˆå¯¹åŠ å¯†è´§å¸äº¤æ˜“ã€‚ç„¶åå‡ºç°äº† Shai Hulud è •è™«ï¼ˆä»¥ã€Šæ²™ä¸˜ã€‹ä¸­çš„æ²™è™«å‘½åï¼‰ã€‚è¿™ä¸ªè‡ªæˆ‘å¤åˆ¶çš„æ¶æ„è½¯ä»¶æ”»å‡»äº†è¶…è¿‡ 180 ä¸ªåŒ…ï¼Œçªƒå–å‡­è¯å¹¶è‡ªåŠ¨ä¼ æ’­åˆ°è¢«æ”»é™·ç»´æŠ¤è€…æ§åˆ¶çš„å…¶ä»–åŒ…ã€‚</p>
<p>ä¸ä¼ ç»Ÿæ”»å‡»ä¸åŒï¼Œè¿™æ˜¯è •è™«å¼çš„ï¼šå½“å®ƒåœ¨ç¯å¢ƒä¸­å‘ç° npm token æ—¶ï¼Œä¼šè‡ªåŠ¨å‘å¸ƒä»»ä½•å¯è®¿é—®åŒ…çš„æ¶æ„ç‰ˆæœ¬ï¼Œæ— éœ€äººå·¥å¹²é¢„å°±èƒ½æŒ‡æ•°çº§ä¼ æ’­ã€‚å¯æ€•çš„æ˜¯è§„æ¨¡å’Œè‡ªåŠ¨åŒ–ç¨‹åº¦ã€‚</p>
<p>å¦‚æœä½ åœ¨æ”»å‡»çª—å£æœŸè¿è¡Œ npm installï¼Œå°±å¯èƒ½æ‹‰å–åˆ°æ¶æ„ä»£ç ã€‚npm å›¢é˜Ÿå’Œç»´æŠ¤è€…ååº”è¿…é€Ÿï¼Œä½†æŸå®³å·²ç»é€ æˆï¼›æ•°åƒä¸ªé¡¹ç›®æš´éœ²åœ¨é£é™©ä¸­ï¼Œæ•´ä¸ªç”Ÿæ€ç³»ç»ŸèŠ±äº†å‡ å‘¨æ—¶é—´å®¡è®¡ä¾èµ–é¡¹å’Œæ›¿æ¢å‡­è¯ã€‚</p>
<h2 data-id="heading-4">5. CSS å¹²æ‰äº†æ›´å¤š JavaScript</h2>
<p>2025 å¹´çš„ CSS ä¸å†åªæ˜¯å…³äºæ ·å¼ï¼›å®ƒå˜æˆäº†ä¸€é—¨ç¼–ç¨‹è¯­è¨€ã€‚æµè§ˆå™¨å‚å•†å…¨åŠ›æŠ•å…¥åŸç”Ÿ CSS APIï¼Œè¿™äº› API èƒ½æ¶ˆé™¤æ•´ä¸ª JavaScript åº“çš„å­˜åœ¨ï¼Œè¯´å®è¯ï¼Œæ—©è¯¥å¦‚æ­¤äº†ã€‚å£å·å¾ˆæ˜ç¡®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Fstop-using-js-for-css" target="_blank" title="https://blog.logrocket.com/stop-using-js-for-css" ref="nofollow noopener noreferrer">å°‘ç”¨ JavaScriptï¼Œå¤šç”¨ CSS</a>ã€‚</p>
<h3 data-id="heading-5"><strong>Anchor Positioningï¼ˆé”šç‚¹å®šä½ï¼‰</strong></h3>
<p>Anchor Positioning åœ¨ 2025 å¹´åœ¨ Safari ä¸­è¾¾åˆ°ç”Ÿäº§å°±ç»ªçŠ¶æ€ï¼ŒåŠ å…¥äº† Chrome çš„ç°æœ‰æ”¯æŒã€‚è™½ç„¶ Firefox è¿˜åªæ˜¯å®éªŒæ€§æ”¯æŒï¼Œä½†è¯¥åŠŸèƒ½ç°åœ¨å¯ä»¥åœ¨æ”¯æ’‘å¤§éƒ¨åˆ† Web çš„ä¸¤ä¸ªæµè§ˆå™¨ä¸­ä½¿ç”¨ã€‚å®ƒå…è®¸å¼€å‘è€…ç›¸å¯¹äºå…¶ä»–å…ƒç´ å®šä½å·¥å…·æç¤ºã€å¼¹å‡ºæ¡†å’Œä¸‹æ‹‰èœå•ï¼Œæ— éœ€ JavaScriptã€‚</p>
<h3 data-id="heading-6"><strong>Scroll-Driven Animationsï¼ˆæ»šåŠ¨é©±åŠ¨åŠ¨ç”»ï¼‰</strong></h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Fimplementing-scroll-aware-ui-state-css%2F" target="_blank" title="https://blog.logrocket.com/implementing-scroll-aware-ui-state-css/" ref="nofollow noopener noreferrer">è¿™äº›åŠ¨ç”»</a>åœ¨ 2025 å¹´æ˜¾è‘—æˆç†Ÿï¼Œåœ¨ä¸»çº¿ç¨‹å¤–è¿è¡Œï¼Œå®ç°ä¸æ»‘çš„ 60fps æ€§èƒ½ã€‚ä½ ä¸ç”¨å†å†™ Intersection Observer JavaScriptï¼Œå¯ä»¥ä½¿ç”¨ <code>animation-timeline: scroll()</code> æˆ– <code>view()</code> å°†åŠ¨ç”»ç›´æ¥ç»‘å®šåˆ°æ»šåŠ¨ä½ç½®ã€‚</p>
<p>Chrome æä¾›äº†å®Œæ•´æ”¯æŒï¼Œä½ ç”šè‡³å¯ä»¥åŸºäºå“ªä¸ªå…ƒç´ è¢«å¸é™„æˆ–æ»šåŠ¨å™¨æ˜¯å¦å¯æ»šåŠ¨æ¥åˆ¶ä½œåŠ¨ç”»ï¼Œä½¿ç”¨ Chrome 133 ä¸­å¼•å…¥çš„æ–° <code>@container scroll-state()</code> æŸ¥è¯¢ã€‚</p>
<h3 data-id="heading-7"><strong>Container Queriesï¼ˆå®¹å™¨æŸ¥è¯¢ï¼‰</strong></h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Fcss-container-queries-guide%2F" target="_blank" title="https://blog.logrocket.com/css-container-queries-guide/" ref="nofollow noopener noreferrer">å®¹å™¨æŸ¥è¯¢</a>è¾¾åˆ°äº† 100% çš„æµè§ˆå™¨æ”¯æŒï¼Œæˆä¸ºåŸºäºç»„ä»¶è®¾è®¡çš„é»˜è®¤é€‰æ‹©ã€‚ç»„ä»¶ç°åœ¨å¯ä»¥å“åº”<strong>çˆ¶å…ƒç´ çš„å®½åº¦</strong>è€Œä¸æ˜¯è§†å£å®½åº¦ï¼ˆ<code>@container (min-width: 600px)</code>ï¼‰ï¼Œä½¿çœŸæ­£å¯å¤ç”¨çš„ç»„ä»¶æˆä¸ºå¯èƒ½ã€‚å†é…åˆ<strong>CSS åµŒå¥—</strong>ï¼ˆç°åœ¨æ‰€æœ‰æµè§ˆå™¨éƒ½åŸç”Ÿæ”¯æŒï¼‰ï¼Œä½ å°±èƒ½åœ¨ä¸ç”¨ Sass çš„æƒ…å†µä¸‹ç¼–å†™ç»„ä»¶ä½œç”¨åŸŸæ ·å¼ã€‚</p>
<h3 data-id="heading-8"><strong>CSS <code>if()</code> å‡½æ•°</strong></h3>
<p>å®ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Fcss-if-function-conditional-styling-2025%2F" target="_blank" title="https://blog.logrocket.com/css-if-function-conditional-styling-2025/" ref="nofollow noopener noreferrer">ç»ˆäºæ¥äº†</a>ï¼Œå°†<strong>æ¡ä»¶é€»è¾‘ç›´æ¥å¸¦å…¥ CSS</strong>ã€‚ä½ ç°åœ¨å¯ä»¥å†™ <code>background: if(style(--theme: dark), black, white)</code> æ¥æ ¹æ®è‡ªå®šä¹‰å±æ€§æˆ–æ ·å¼æŸ¥è¯¢æœ‰æ¡ä»¶åœ°åº”ç”¨å€¼ã€‚</p>
<h2 data-id="heading-9">6. Rust çš„å¤å…´</h2>
<p>å‰ç«¯å·¥å…·åœ¨ 2025 å¹´ç»å†äº†æˆ‘æ‰€è¯´çš„èº«ä»½å±æœºï¼Œè€Œ Rust å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ç–—æ³•ã€‚ä»¥å‰éœ€è¦å‡ åˆ†é’Ÿçš„æ„å»ºå·¥å…·ç°åœ¨å‡ ç§’é’Ÿå°±å®Œæˆäº†ï¼Œå› ä¸ºç”Ÿæ€ç³»ç»Ÿæ„è¯†åˆ°ç”¨ JavaScript æ¥æ„å»º JavaScript ä¸å¤Ÿå¿«ã€‚</p>
<p>å§‹äº 2024 å¹´æœ«çš„ Rust æµªæ½®åœ¨ 2025 å¹´æˆä¸ºæ ‡å‡†ã€‚Rspack åœ¨ 2024 å¹´ 8 æœˆå‘å¸ƒ 1.0 ç‰ˆæœ¬ï¼Œæ„å»ºé€Ÿåº¦æå‡ 23 å€ï¼ˆWebpack çš„ 6.5 ç§’ â†’ 282msï¼‰ï¼Œåœ¨ 2025 å¹´è·å¾—äº†å¤§è§„æ¨¡ä¼ä¸šé‡‡ç”¨ã€‚</p>
<p>Vercel çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Fturbopack-adoption-guide%2F" target="_blank" title="https://blog.logrocket.com/turbopack-adoption-guide/" ref="nofollow noopener noreferrer">Turbopack</a> æˆä¸º Next.js 15 çš„é»˜è®¤é€‰æ‹©ï¼Œæä¾›å¿« 700 å€çš„ HMRã€‚SWC å–ä»£ Babel æˆä¸ºé»˜è®¤è½¬è¯‘å™¨ï¼Œç¼–è¯‘é€Ÿåº¦å¿« 20 å€ã€‚Biome ä½œä¸º ESLint å’Œ Prettier çš„ Rust é©±åŠ¨æ›¿ä»£å“å‡ºç°ï¼Œè€Œ Oxc æä¾›äº†ç”¨äºè§£æã€æ£€æŸ¥ã€æ ¼å¼åŒ–å’Œå‹ç¼©çš„å®Œæ•´ Rust å·¥å…·é“¾ã€‚</p>
<p>å¾®è½¯ã€äºšé©¬é€Šã€Discordã€TikTok å’ŒæŠ–éŸ³ç­‰å…¬å¸åœ¨ 2025 å¹´éƒ½åœ¨ç”Ÿäº§ç¯å¢ƒä¸­é‡‡ç”¨äº†è¿™äº›å·¥å…·ã€‚Rust å¤å…´ä¸æ˜¯é€‰æ‹©ï¼›è¿™æ˜¯å¿…ç„¶ã€‚å½“ä½ çš„æ„å»ºè€—æ—¶ï¼ŒCI æµæ°´çº¿èŠ±é’±æ—¶ï¼Œä½ è¦ä¹ˆç”¨ Rust é‡å†™ï¼Œè¦ä¹ˆæ¥å—ç°çŠ¶ã€‚2025 å¹´è¯æ˜äº†ï¼Œå¦‚æœæ€§èƒ½å¾ˆé‡è¦ï¼Œå°±ä¼šç”¨ Rust é‡å†™ã€‚æ¬¢è¿æ¥åˆ°é”ˆåŒ–æ—¶ä»£ã€‚</p>
<h2 data-id="heading-10">7. TanStack ç”Ÿæ€ç³»ç»Ÿçš„å´›èµ·</h2>
<p>TanStack åœ¨ 2025 å¹´æ‚„æ‚„æ¥ç®¡äº† React å¼€å‘ï¼Œè¯´å®è¯ï¼Œå¤§å¤šæ•°å¼€å‘è€…ï¼ˆåŒ…æ‹¬æˆ‘ï¼‰ç”šè‡³æ²¡çœ‹åˆ°å®ƒçš„åˆ°æ¥ã€‚æœ€åˆä½œä¸º React Queryï¼ˆä¸€ä¸ªæ•°æ®è·å–åº“ï¼‰èµ·æ­¥çš„ä¸œè¥¿ï¼Œæ¼”å˜æˆäº†ä¸€ä¸ªå®Œæ•´çš„ç”Ÿæ€ç³»ç»Ÿï¼Œç°åœ¨æ­£åœ¨å–ä»£ Reduxã€React Router å’Œå¼€å‘è€…å¤šå¹´æ¥ä¸€ç›´ä½¿ç”¨çš„å…¶ä»–ä¸€å †å·¥å…·ã€‚</p>
<p>TanStack åˆ›å»ºè€… Tanner Linsley ä¸¤å¹´å‰å…¨åŠ›æŠ•å…¥å¼€æºï¼Œè¿™æ¬¡æŠ¼æ³¨å¤§è·æˆåŠŸã€‚TanStack ç°åœ¨æœ‰è¶…è¿‡ 40 äº¿æ¬¡ä¸‹è½½ï¼Œæ¶µç›–ä»æ•°æ®è·å–ï¼ˆTanStack Queryï¼‰ã€è·¯ç”±ï¼ˆTanStack Routerï¼‰ã€è¡¨æ ¼ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Ftanstack-table-formerly-react-table%2F" target="_blank" title="https://blog.logrocket.com/tanstack-table-formerly-react-table/" ref="nofollow noopener noreferrer">TanStack Table</a>ï¼‰ã€è¡¨å•ã€è™šæ‹ŸåŒ–ï¼Œç”šè‡³è¿˜æœ‰ä¸€ä¸ªå« <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Ffull-stack-app-with-tanstack-start%2F" target="_blank" title="https://blog.logrocket.com/full-stack-app-with-tanstack-start/" ref="nofollow noopener noreferrer">TanStack Start</a> çš„å…¨æ ˆæ¡†æ¶ã€‚</p>
<p>æœ€ç–¯ç‹‚çš„æ˜¯ä»€ä¹ˆï¼Ÿä»–ä»¬ä»Šå¹´åœ¨è·¯ç”±åŒ¹é…ä¸Šå®ç°äº† 20,000 å€çš„æ€§èƒ½æå‡ï¼Œåªæ˜¯é€šè¿‡è¿½æ±‚æ­£ç¡®æ€§è€Œéé€Ÿåº¦ã€‚æ¯ä¸ªåº“éƒ½æ˜¯æ— å¤´çš„ã€ç±»å‹å®‰å…¨çš„ã€æ¡†æ¶æ— å…³çš„ï¼Œè¿™æ„å‘³ç€ä½ èƒ½è·å¾—å®Œå…¨æ§åˆ¶è€Œä¸ä¼šè¢«æ¡†æ¶é”å®šã€‚</p>
<p>åˆ° 2025 å¹´åº•ï¼ŒTanStack æˆä¸ºéœ€è¦è®¤çœŸå¤„ç†æ•°æ®çš„ React åº”ç”¨çš„é»˜è®¤æ¨èã€‚Next.js ç­‰æ¡†æ¶ä»ç„¶å ä¸»å¯¼åœ°ä½ï¼Œä½†å¦‚æœä½ ç”¨ Vite æ„å»ºè‡ªå®šä¹‰æŠ€æœ¯æ ˆæˆ–æƒ³å®Œå…¨æ§åˆ¶æ¶æ„ï¼ŒTanStack å°±æ˜¯æ–°æ ‡å‡†ã€‚è¦è¯´ TanStack Router çš„æœ€å¤§çš„é—®é¢˜ï¼Œå°±æ˜¯ä¸€æ—¦ä½ ç”¨è¿‡å®ƒï¼Œå›åˆ°å…¶ä»–è·¯ç”±è§£å†³æ–¹æ¡ˆå°±ä¼šæ„Ÿè§‰å¾ˆç—›è‹¦ï¼›ä½ ä¼šè¢«å®ƒçš„å¼€å‘ä½“éªŒå’Œç±»å‹å®‰å…¨å® åã€‚</p>
<h2 data-id="heading-11">8. React 19.2 å¸¦æ¥æ— å¤„ä¸åœ¨çš„å¼‚æ­¥</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Freact-19-2-is-here%2F" target="_blank" title="https://blog.logrocket.com/react-19-2-is-here/" ref="nofollow noopener noreferrer">React 19.2 ç‰ˆæœ¬</a>å¼•å‘äº†å·¨å¤§å…³æ³¨ï¼Œç†ç”±å……åˆ†ã€‚åœ¨å®ƒå‘å¸ƒä¹‹å‰ï¼Œæ¯ä¸€æ¬¡è¡¨å•æäº¤ã€å¯¼èˆªç‚¹å‡»å’Œæœç´¢æ¡†éƒ½éœ€è¦ä¸€å¥—ç»„åˆæ‹³ï¼šç”¨ <code>useState</code> å¤„ç†åŠ è½½çŠ¶æ€ï¼Œç”¨ try-catch å¤„ç†é”™è¯¯ï¼Œç”¨ <code>useEffect</code> åè°ƒï¼Œç„¶åç¥ˆç¥·ä½ æ²¡åˆ¶é€ å‡ºç«æ€æ¡ä»¶ã€‚</p>
<p>React 19 <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Fthe-next-era-of-react%2F" target="_blank" title="https://blog.logrocket.com/the-next-era-of-react/" ref="nofollow noopener noreferrer">å½»åº•æ”¹å˜äº†æ¸¸æˆè§„åˆ™</a>ã€‚åœ¨ React Conf 2025 ä¸Šï¼Œå›¢é˜Ÿå‘å¸ƒäº†"Async React"ï¼Œè¿™æ˜¯ä¸€ä¸ªä½¿ç”¨ React 19 çš„æ–°åŸè¯­ï¼ˆå¦‚ <code>useTransition</code>ã€<code>useOptimistic</code> å’Œ <code>use()</code>ï¼‰ä»¥åŠ React 18 çš„ Suspense å’Œå¹¶å‘ç‰¹æ€§æ¥å£°æ˜å¼å¤„ç†å¼‚æ­¥æ“ä½œçš„å®Œæ•´ç³»ç»Ÿã€‚</p>
<p>ç°åœ¨ Actions è‡ªåŠ¨è·Ÿè¸ªå¼‚æ­¥å·¥ä½œï¼ˆå†è§ <code>isLoading</code> æ ‡å¿—ï¼‰ï¼Œä¹è§‚æ›´æ–°è®© UI åœ¨æœåŠ¡å™¨è¯·æ±‚åå°è¿è¡Œæ—¶æ„Ÿè§‰å³æ—¶å“åº”ï¼ŒSuspense å¤„ç†åŠ è½½çŠ¶æ€è€Œä¸ä¼šå‡ºç°åˆºçœ¼çš„åŠ è½½åŠ¨ç”»é—ªçƒï¼Œ<code>useDeferredValue</code> è®©æœç´¢æ¡†å³ä½¿åœ¨æ…¢é€Ÿè¿æ¥ä¸‹ä¹Ÿä¿æŒæµç•…ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fasync-react.dev%2F" target="_blank" title="https://async-react.dev/" ref="nofollow noopener noreferrer">Async React æ¼”ç¤º</a>å±•ç¤ºäº†å…¶å¯èƒ½æ€§ï¼šåœ¨ä»»ä½•ç½‘ç»œé€Ÿåº¦ä¸‹éƒ½æœ‰æµç•…çš„ç”¨æˆ·ä½“éªŒï¼Œé›¶æ‰‹åŠ¨çŠ¶æ€è·Ÿè¸ªã€‚</p>
<p>æœ€æ£’çš„éƒ¨åˆ†æ˜¯æ¡†æ¶ä¸ºæˆ‘ä»¬å†…ç½®äº†è¿™äº›ã€‚Next.js ç°åœ¨é»˜è®¤å°†å¯¼èˆªåŒ…è£…åœ¨ transitions ä¸­ã€‚TanStack Query å†…ç½®äº† Suspense æ”¯æŒã€‚è®¾è®¡ç³»ç»Ÿå¼€å§‹æš´éœ²"action"å±æ€§ï¼Œæ‰€ä»¥æŒ‰é’®å’Œæ ‡ç­¾é¡µèƒ½å¤„ç†è‡ªå·±çš„ä¹è§‚æ›´æ–°ã€‚</p>
<p>æ‰€æœ‰é‚£äº›å¼‚æ­¥åè°ƒçš„å¤æ‚æ€§ä»æˆ‘ä»¬çš„ä»£ç è½¬ç§»åˆ°äº†æ¡†æ¶å±‚ã€‚æˆ‘ä»¬ä»æ‰‹åŠ¨è·Ÿè¸ªæ¯ä¸ªåŠ è½½çŠ¶æ€ï¼Œå˜æˆåªéœ€æè¿°åº”è¯¥å‘ç”Ÿä»€ä¹ˆï¼ŒReact å¤„ç†å…¶ä½™éƒ¨åˆ†ã€‚å¤§é‡æ ·æ¿ä»£ç å°±è¿™ä¹ˆæ¶ˆå¤±äº†ï¼Œå¤ªç–¯ç‹‚äº†ã€‚æˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆèŠ±äº†è¿™ä¹ˆé•¿æ—¶é—´ï¼Œä½†è¯´å®è¯ï¼Œæˆ‘ä»¬ä¸èƒ½å¦è®¤<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Freact-19-2-the-async-shift%2F" target="_blank" title="https://blog.logrocket.com/react-19-2-the-async-shift/" ref="nofollow noopener noreferrer">å¼‚æ­¥åè°ƒ</a>ç»ˆäºæ„Ÿè§‰åƒæ˜¯å±äº 2025 å¹´çš„ä¸œè¥¿äº†ã€‚</p>
<h2 data-id="heading-12">9. React2Shell æ¼æ´</h2>
<p>ç¬¬äºŒä¸ªæœ€èƒ½å®šä¹‰è¿™ä¸€å¹´çš„æ•…äº‹æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Freact2shell-exploit%2F" target="_blank" title="https://blog.logrocket.com/react2shell-exploit/" ref="nofollow noopener noreferrer">React 2Shell</a>â€”â€”ä¹Ÿå°±æ˜¯ CVE-2025-55182â€”â€”æ¼æ´ã€‚</p>
<p>React ç»å†äº†æœ‰å²ä»¥æ¥æœ€ç³Ÿç³•çš„ 12 æœˆï¼11 æœˆ 29 æ—¥ï¼Œå®‰å…¨ç ”ç©¶å‘˜ Lachlan Davidson åœ¨ React Server Components ä¸­å‘ç°äº†ä¸€ä¸ªä¸¥é‡æ¼æ´ï¼ŒCVSS è¯„åˆ†è¾¾åˆ°å®Œç¾çš„ <strong>10.0</strong>ï¼Œè¿™æ˜¯å¯èƒ½çš„æœ€é«˜ä¸¥é‡çº§åˆ«ã€‚è¿™ä¸æ˜¯éšæœºçš„ï¼šè¿™æ˜¯ä¸€ä¸ªæœªç»èº«ä»½éªŒè¯çš„è¿œç¨‹ä»£ç æ‰§è¡Œï¼ˆRCEï¼‰æ¼æ´ï¼Œè®©æ”»å‡»è€…åªéœ€ä¸€ä¸ªæ¶æ„ HTTP è¯·æ±‚å°±èƒ½åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œä»»æ„ä»£ç ã€‚</p>
<p>é‡‘èåº”ç”¨æˆä¸ºä¸»è¦ç›®æ ‡ï¼›ä¸€ä¸ªç²¾å¿ƒåˆ¶ä½œçš„è¯·æ±‚å°±èƒ½æš´éœ²æ•æ„Ÿçš„é“¶è¡Œä¿¡æ¯ã€æ“çºµäº¤æ˜“æˆ–æ¤å…¥åé—¨ä»¥æŒç»­è®¿é—®ã€‚è¿è¡Œ React Server Components çš„ä¼ä¸šä»ªè¡¨æ¿ã€åŒ»ç–—é—¨æˆ·å’Œ SaaS å¹³å°çªç„¶æˆäº†æ´»é¶å­ã€‚</p>
<p>React 19 çš„ Server Components æœ¬åº”æ”¹å˜å…¨æ ˆå¼€å‘ã€‚ç»“æœå®ƒä»¬æˆäº† React æœ‰å²ä»¥æ¥æœ€å¤§çš„å®‰å…¨å±æœºã€‚æ•´ä¸ªç”Ÿæ€ç³»ç»Ÿåœ¨ 2025 å¹´çš„æœ€åå‡ å¤©éƒ½å¤„äºç´§æ€¥è¡¥ä¸æ¨¡å¼ã€‚</p>
<p>æ•™è®­ï¼Ÿèƒ½åŠ›è¶Šå¤§ï¼ˆServer Componentsï¼‰è´£ä»»è¶Šå¤§ï¼Œè€Œä¸”æ°¸è¿œã€æ°¸è¿œè¦æ›´æ–°ä½ çš„ä¾èµ–é¡¹ã€‚ä¸è¿‡å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒReact å›¢é˜Ÿè¡ŒåŠ¨å¦‚é—ªç”µï¼šä»æŠ¥å‘Šåˆ°è¡¥ä¸åªç”¨äº†å››å¤©ã€‚åˆ° 12 æœˆ 3 æ—¥ï¼Œä¿®å¤å·²ç»å‘å¸ƒã€‚</p>
<h2 data-id="heading-13">10. AI ç¼–ç å·¥å…·çš„æŒç»­æ¼”è¿›</h2>
<p>æˆ‘ä»¬ä»Šå¹´è§è¯äº†è¶…è¿‡ 30 ä¸ª AI æ¨¡å‹å‘å¸ƒï¼šGPT 5ã€Claude Opus 4.5ï¼Œä»¥åŠæœ€è¿‘çš„ Gemini 3 Proï¼Œè¿˜æœ‰ä¸€æ³¢ä¸­å›½å…¬å¸å‘å¸ƒçš„ DeepSeekã€Qwenã€ByteDance å’Œ Moonshotã€‚</p>
<p>è¿˜ä¸æ­¢äºæ­¤ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Fwindsurf-vs-cursor-when-to-choose-the-challenger%2F" target="_blank" title="https://blog.logrocket.com/windsurf-vs-cursor-when-to-choose-the-challenger/" ref="nofollow noopener noreferrer">Windsurf å’Œ Cursor</a> ä¹‹é—´çš„æ™ºèƒ½ä½“å¤§æˆ˜æ„ˆæ¼”æ„ˆçƒˆï¼Œç”šè‡³å¼•å‘äº†æŠ•èµ„è€…ä¹‹é—´çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Ftechfundingnews.com%2Fcode-wars-openais-3b-bid-for-windsurf-puts-cursor-microsoft-and-anthropic-on-alert%2F" target="_blank" title="https://techfundingnews.com/code-wars-openais-3b-bid-for-windsurf-puts-cursor-microsoft-and-anthropic-on-alert/" ref="nofollow noopener noreferrer">ç«ä»·æˆ˜</a>ã€‚</p>
<p>æˆ‘ä»¬çœ‹åˆ° <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Fbuild-deploy-web-app-bolt-new%2F" target="_blank" title="https://blog.logrocket.com/build-deploy-web-app-bolt-new/" ref="nofollow noopener noreferrer">Bolt</a> å’Œ v0 å¼•é¢†äº†ä»ç¼–ç¨‹åˆ°ç”Ÿäº§çš„ä¸€ç«™å¼ç¼–ç ç†å¿µã€‚æˆ‘ä»¬çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.logrocket.com%2Ftested-5-ai-cli-tools%2F" target="_blank" title="https://blog.logrocket.com/tested-5-ai-cli-tools/" ref="nofollow noopener noreferrer">CLI</a> ä¹Ÿè½¬å˜æˆäº†ç¼–ç æ™ºèƒ½ä½“ã€‚æˆ‘ä»¬çœ‹åˆ° Claude Code ä¸»å¯¼äº†è¿™ä¸ªé¢†åŸŸï¼Œè¿˜å¼•å…¥äº† MCP çš„ä½¿ç”¨ã€‚è‡ªç„¶åœ°ï¼Œå…¶ä»–æ¨¡å‹ä¹Ÿè·Ÿè¿›äº†ï¼šGemini CLIã€Qwen CLIã€Kimi CLI å’Œ Codexã€‚</p>
<p>è¿™äº›è¡Œä¸šåœ¨æ”¹å˜æˆ‘ä»¬ç¼–å†™å‰ç«¯ä»£ç çš„æ–¹å¼ä¸ŠæŠ•å…¥äº†æœ€å¤šçš„å·¥ä½œã€‚ä»Šå¹´æˆ‘ä»¬å‡ ä¹æ¯éš”ä¸€å‘¨å°±æœ‰ 2 ä¸ªæ¨¡å‹å‘å¸ƒï¼Œå®ƒä»¬ä¸“é—¨è¢«å¢å¼ºæ¥å–ä»£å¼€å‘è€…ã€‚æˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆå®ƒä»¬è¿™ä¹ˆæƒ³æŠ¢æˆ‘ä»¬çš„é¥­ç¢—ï¼Œä½†è¯´å®è¯ï¼Œæˆ‘ä»¬ä¸èƒ½å¦è®¤å®ƒä»¬è®©æˆ‘ä»¬çš„ç”Ÿæ´»æ›´è½»æ¾äº†ã€‚å°±åƒ Spotify ç­‰å…¶ä»–"å¹´åº¦æ€»ç»“"ä¸€æ ·ï¼Œä½ ä¹Ÿå¾—æ‰¿è®¤è¿™äº›æ¨¡å‹å’Œå·¥å…·æ˜¯ä½ ä»Šå¹´æœ€å¸¸ç”¨çš„ !ğŸ˜‚</p>
<h2 data-id="heading-14">ç»“è®º</h2>
<p>2025 å¹´çœŸæ˜¯ä¸å¹³å‡¡çš„ä¸€å¹´ï¼</p>
<p>æ— è®ºæ˜¯ AI è¿›æ­¥ã€å®‰å…¨æ¼æ´ï¼Œè¿˜æ˜¯ä¸æ–­æ¼”è¿›çš„æ¡†æ¶ï¼Œæˆ‘ä»¬ç»å†äº†å¤§é‡æ”¹å˜æˆ‘ä»¬å¯¹ Web å¼€å‘æ€è€ƒæ–¹å¼çš„äº‹ä»¶ã€‚</p>
<p>æˆ‘æ¼æ‰äº†å“ªäº›æ•…äº‹ï¼Ÿæˆ‘çš„æ’åå“ªé‡Œä¸å¯¹ï¼Ÿå“ªäº›æ•…äº‹ä¼šå®šä¹‰ 2026 å¹´ï¼Ÿåœ¨è¯„è®ºåŒºå‘å£°ï¼Œè®©æˆ‘çŸ¥é“ä½ çš„çœ‹æ³•ã€‚æ–°å¹´å¿«ä¹ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å«Œ AI å†™çš„ç•Œé¢å¤ªä¸‘ï¼Ÿè£…ä¸Šè¿™ä¸ªå¼€æºæ’ä»¶ï¼Œç§’å˜èµ„æ·±è®¾è®¡å¸ˆ]]></title>    <link>https://juejin.cn/post/7591730714140491818</link>    <guid>https://juejin.cn/post/7591730714140491818</guid>    <pubDate>2026-01-06T00:57:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591730714140491818" data-draft-id="7591672090790903827" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å«Œ AI å†™çš„ç•Œé¢å¤ªä¸‘ï¼Ÿè£…ä¸Šè¿™ä¸ªå¼€æºæ’ä»¶ï¼Œç§’å˜èµ„æ·±è®¾è®¡å¸ˆ"/> <meta itemprop="keywords" content="GitHub,å¼€æº"/> <meta itemprop="datePublished" content="2026-01-06T00:57:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="HelloGitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1574156384091320"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å«Œ AI å†™çš„ç•Œé¢å¤ªä¸‘ï¼Ÿè£…ä¸Šè¿™ä¸ªå¼€æºæ’ä»¶ï¼Œç§’å˜èµ„æ·±è®¾è®¡å¸ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1574156384091320/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    HelloGitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T00:57:33.000Z" title="Tue Jan 06 2026 00:57:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b41abd5c2414b8c862d669247e7ec81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265852&amp;x-signature=8rsrGQ%2BvhCij2tDOoL%2BBjX8kXcY%3D" alt="" loading="lazy"/></p>
<p>2026 å¹´çš„ç¬¬ä¸€æœŸã€ŒGitHub çƒ­ç‚¹é€Ÿè§ˆã€å‡†æ—¶ä¸Šçº¿ï¼æ–°çš„ä¸€å¹´ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¼€æºç¤¾åŒºè¿æ¥äº†å“ªäº›æœ‰è¶£ã€å¥½ç©çš„å¼€æºé¡¹ç›®ã€‚</p>
<p>å¦‚æœä½ å—å¤Ÿäº†ä¸æ˜çœŸç›¸çš„åå°è¿›ç¨‹ï¼Œä¸å¦¨è¯•è¯• witrï¼Œä¸€æ¡å‘½ä»¤å°±èƒ½æŠŠè¿›ç¨‹æŸ¥ä¸ªåº•æœå¤©ã€‚åˆšå¼€å¹´æƒ³ç»™ä½ çš„ Mac ç˜¦ç˜¦èº«ï¼Ÿæç®€æ¸…ç†å·¥å…· Mole æ—¢è½»é‡åˆæ–¹ä¾¿ã€‚å¯¹äºæ­£åœ¨ä½¿ç”¨ AI ç¼–ç¨‹çš„æœ‹å‹ï¼Œui-ux-pro-max-skill èƒ½è®©ä½ çš„ AI åŠ©æ‰‹ç§’å˜èµ„æ·± UI è®¾è®¡å¸ˆï¼Œå‘Šåˆ«åƒç¯‡ä¸€å¾‹ã€AI å‘³å„¿åè¶³çš„ç•Œé¢ã€‚å“ˆä½›å¤§å­¦å¼€æºçš„ AI ç³»ç»Ÿå·¥ç¨‹è¯¾ç¨‹ï¼Œå¸¦ä½ ä»é›¶æ‰‹æ“æ·±åº¦å­¦ä¹ æ¡†æ¶ TinyTorchã€‚</p>
<p>å­¦ç´¯äº†ï¼Ÿä¸å¦¨è¯•è¯•è¿™æ¬¾è¢«ç½‘å‹ç›´æ¥â€œå°ç¥â€çš„æ²‰æµ¸å¼æ¡Œé¢æ­Œè¯å·¥å…· BetterLyricsï¼Œäº«å—ä¸€ä¼šå„¿æ²‰æµ¸å¼å¬æ­Œçš„å¿«ä¹ï¼ŒåŠ³é€¸ç»“åˆæ‰èƒ½æ›´å¥½åœ°å‡ºå‘ã€‚</p>
<ul>
<li>æœ¬æ–‡ç›®å½•
<ul>
<li>1. çƒ­é—¨å¼€æºé¡¹ç›®
<ul>
<li>1.1 ä¸€æ¡å‘½ä»¤æ­ç§˜è¿›ç¨‹èº«ä¸–ï¼šwitr</li>
<li>1.2 å¼€ç®±å³ç”¨çš„åœ°å›¾ç»„ä»¶åº“ï¼šmapcn</li>
<li>1.3 æç®€çš„ macOS ç³»ç»Ÿæ¸…ç†å·¥å…·ï¼šMole</li>
<li>1.4 AI ç¼–ç¨‹åŠ©æ‰‹çš„è®¾è®¡å¢å¼ºæ’ä»¶ï¼šui-ux-pro-max-skill</li>
<li>1.5 æœºå™¨å­¦ä¹ ç³»ç»Ÿå·¥ç¨‹ï¼šcs249r_book</li>
</ul>
</li>
<li>2. HelloGitHub çƒ­è¯„
<ul>
<li>2.1 æ— éœ€å‘é‚®ä»¶éªŒè¯é‚®ç®±æœ‰æ•ˆæ€§çš„å·¥å…·ï¼šcheck-if-email-exists</li>
<li>2.2 æ²‰æµ¸å¼æ¡Œé¢æ­Œè¯æ˜¾ç¤ºå·¥å…·ï¼šBetterLyrics</li>
</ul>
</li>
<li>3. ç»“å°¾</li>
</ul>
</li>
</ul>
<h2 data-id="heading-0">1. çƒ­é—¨å¼€æºé¡¹ç›®</h2>
<h3 data-id="heading-1">1.1 ä¸€æ¡å‘½ä»¤æ­ç§˜è¿›ç¨‹èº«ä¸–ï¼šwitr</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af4a0f74c9164098a932cc4ee56f8520~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265852&amp;x-signature=BVG7dX3EWNZaO8w5jAFF%2F6VC%2FC4%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸»è¯­è¨€ï¼šGo</strong>ï¼Œ<strong>Starï¼š9.9k</strong>ï¼Œ<strong>å‘¨å¢é•¿ï¼š7.4k</strong></p>
<p>è¿™æ˜¯ä¸€ä¸ªç”¨ Go ç¼–å†™çš„å‘½ä»¤è¡Œè¯Šæ–­å·¥å…·ï¼Œç”¨äºå¿«é€Ÿå®šä½å’Œåˆ†ææ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ã€‚å®ƒé€šè¿‡ç«¯å£ã€æœåŠ¡åæˆ– PID æ˜ å°„è¿›ç¨‹ä¿¡æ¯ï¼Œç”Ÿæˆé€šä¿—æ˜“æ‡‚çš„è¿›ç¨‹å› æœé“¾ï¼Œç›´è§‚å±•ç¤ºè¿›ç¨‹çš„æ¥æºã€å¯åŠ¨æ–¹å¼å’ŒæŒç»­è¿è¡Œçš„åŸå› ï¼Œå¸®åŠ©è¿ç»´ä¸å¼€å‘è€…æ’æŸ¥å’Œå®šä½å¼‚å¸¸è¿›ç¨‹ã€‚</p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpranshuparmar%2Fwitr" target="_blank" title="https://github.com/pranshuparmar/witr" ref="nofollow noopener noreferrer">github.com/pranshuparmâ€¦</a></p>
</blockquote>
<h3 data-id="heading-2">1.2 å¼€ç®±å³ç”¨çš„åœ°å›¾ç»„ä»¶åº“ï¼šmapcn</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc6664cda07240dc97faf57bce74ed57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265852&amp;x-signature=zXnviHNtUBSEwPzdKEUSvTpK2nA%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸»è¯­è¨€ï¼šTypeScript</strong>ï¼Œ<strong>Starï¼š3k</strong>ï¼Œ<strong>å‘¨å¢é•¿ï¼š3k</strong></p>
<p>è¯¥é¡¹ç›®æ˜¯åŸºäº MapLibre GL å’Œ Tailwind CSS æ„å»ºçš„äº¤äº’å¼åœ°å›¾ç»„ä»¶ï¼Œå¼€ç®±å³ç”¨æ— éœ€é…ç½®ï¼Œèƒ½å¤Ÿè‡ªåŠ¨é€‚é…æµ…è‰²å’Œæ·±è‰²æ¨¡å¼ï¼Œæ”¯æŒç¼©æ”¾ã€æŒ‡å—é’ˆã€å®šä½ã€æ ‡è®°ã€å¼¹æ¡†å’Œç»˜åˆ¶è·¯çº¿ç­‰åŠŸèƒ½ï¼Œå…¼å®¹ shadcn/ui é€‚åˆ React ç”Ÿæ€çš„å¼€å‘è€…ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Map</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/components/ui/map"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">BasicMapExample</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"h-[400px] w-full"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Map</span> <span class="hljs-attr">center</span>=<span class="hljs-string">{[-74.006,</span> <span class="hljs-attr">40.7128</span>]} <span class="hljs-attr">zoom</span>=<span class="hljs-string">{12}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAnmolSaini16%2Fmapcn" target="_blank" title="https://github.com/AnmolSaini16/mapcn" ref="nofollow noopener noreferrer">github.com/AnmolSaini1â€¦</a></p>
</blockquote>
<h3 data-id="heading-3">1.3 æç®€çš„ macOS ç³»ç»Ÿæ¸…ç†å·¥å…·ï¼šMole</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fda6c74d3f1343cbbe777ec69593ff3f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265852&amp;x-signature=YUA0wcPlIDxNeA22k4sANQSGydk%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸»è¯­è¨€ï¼šShellã€Go</strong>ï¼Œ<strong>Starï¼š25k</strong>ï¼Œ<strong>å‘¨å¢é•¿ï¼š1.6k</strong></p>
<p>è¿™æ˜¯ä¸€æ¬¾ä¸“ä¸º macOS è®¾è®¡çš„è½»é‡çº§å‘½ä»¤è¡Œæ¸…ç†å·¥å…·ï¼Œé›†æ·±åº¦æ¸…ç†ã€åº”ç”¨å¸è½½ã€ç¡¬ç›˜ç©ºé—´åˆ†æå’Œå®æ—¶çŠ¶æ€ç›‘æ§äºä¸€ä½“ã€‚å®ƒä¸»è¦ç”± shell ç¼–å†™ï¼Œå®‰è£…ç®€å•ã€é›¶å¹²æ‰°ï¼ˆæ— å¹¿å‘Š/å¼¹çª—/å¸¸é©»è¿›ç¨‹ï¼‰ï¼Œæ”¯æŒç™½åå•å’Œè¯•è¿è¡Œæ¨¡å¼ï¼Œè¿›ä¸€æ­¥é™ä½è¯¯åˆ é£é™©ã€‚</p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftw93%2FMole" target="_blank" title="https://github.com/tw93/Mole" ref="nofollow noopener noreferrer">github.com/tw93/Mole</a></p>
</blockquote>
<h3 data-id="heading-4">1.4 AI ç¼–ç¨‹åŠ©æ‰‹çš„è®¾è®¡å¢å¼ºæ’ä»¶ï¼šui-ux-pro-max-skill</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f24c9de7bc5b4fd88ae84bc805e7902c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265852&amp;x-signature=H8ZjI3beExaHIdATZUESkXc3b70%3D" alt="æˆªå±2026-01-06 08.37.16.png" loading="lazy"/></p>
<p><strong>ä¸»è¯­è¨€ï¼šTypeScript</strong>ï¼Œ<strong>Starï¼š6.8k</strong>ï¼Œ<strong>å‘¨å¢é•¿ï¼š4.3k</strong></p>
<p>è¿™æ˜¯ä¸€æ¬¾é¢å‘ AI ç¼–ç¨‹åŠ©æ‰‹çš„ UI/UX è®¾è®¡å¢å¼ºæ’ä»¶ï¼Œèµ‹äºˆ AI åŠ©æ‰‹ç”Ÿæˆä¸“ä¸šçº§ç•Œé¢å’Œç”¨æˆ·ä½“éªŒçš„èƒ½åŠ›ã€‚å®ƒå†…ç½® 57 ç§ UI é£æ ¼ã€95 å¥—è°ƒè‰²æ–¹æ¡ˆã€56 ç»„å­—ä½“æ­é…å’Œ 98 æ¡ UX æœ€ä½³å®è·µè§„èŒƒçš„çŸ¥è¯†åº“ï¼Œè®© AI æ‘†è„±åƒç¯‡ä¸€å¾‹çš„é€šç”¨æ ·å¼ä»£ç ï¼Œè‡ªåŠ¨ç”Ÿæˆå…·æœ‰è¾ƒé«˜æ°´å‡†è§†è§‰æ•ˆæœå’Œè‰¯å¥½äº¤äº’ä½“éªŒçš„åº”ç”¨ç•Œé¢ä»£ç ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># Install CLI globally</span>
npm install -g uipro-cli

<span class="hljs-meta"># Go to your project</span>
cd /path/to/your/project

<span class="hljs-meta"># Install for your AI assistant</span>
uipro <span class="hljs-keyword">init</span> --ai claude      <span class="hljs-meta"># Claude Code</span>
uipro <span class="hljs-keyword">init</span> --ai cursor      <span class="hljs-meta"># Cursor</span>
uipro <span class="hljs-keyword">init</span> --ai windsurf    <span class="hljs-meta"># Windsurf</span>
uipro <span class="hljs-keyword">init</span> --ai antigravity <span class="hljs-meta"># Antigravity (.agent + .shared)</span>
uipro <span class="hljs-keyword">init</span> --ai copilot     <span class="hljs-meta"># GitHub Copilot</span>
uipro <span class="hljs-keyword">init</span> --ai kiro        <span class="hljs-meta"># Kiro</span>
uipro <span class="hljs-keyword">init</span> --ai all         <span class="hljs-meta"># All assistants</span>
</code></pre>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnextlevelbuilder%2Fui-ux-pro-max-skill" target="_blank" title="https://github.com/nextlevelbuilder/ui-ux-pro-max-skill" ref="nofollow noopener noreferrer">github.com/nextlevelbuâ€¦</a></p>
</blockquote>
<h3 data-id="heading-5">1.5 æœºå™¨å­¦ä¹ ç³»ç»Ÿå·¥ç¨‹ï¼šcs249r_book</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01f138c6ad3e4d72a3a3fd1ffc92d40a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265852&amp;x-signature=K6HwQCmTp%2B1Jxtopyz5H5S4arVA%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸»è¯­è¨€ï¼šOther</strong>ï¼Œ<strong>Starï¼š15k</strong>ï¼Œ<strong>å‘¨å¢é•¿ï¼š3k</strong></p>
<p>è¯¥é¡¹ç›®æ˜¯ç”±å“ˆä½›å¤§å­¦å¼€æºçš„ AI ç³»ç»Ÿå·¥ç¨‹ï¼ˆCS249rï¼‰è¯¾ç¨‹æ•™æï¼Œå†…å«ä¹¦ç±å’Œæºç ã€‚å®ƒé€šè¿‡ä»é›¶å®ç°æ·±åº¦å­¦ä¹ æ¡†æ¶ TinyTorch å’Œå°†æ¨¡å‹éƒ¨ç½²åˆ° Arduino ä¸æ ‘è“æ´¾ç­‰ç¡¬ä»¶è®¾å¤‡çš„å®è·µï¼Œå¸®åŠ©å­¦ä¹ è€…å°†æœºå™¨å­¦ä¹ ç†è®ºä¸ç³»ç»Ÿå·¥ç¨‹å®è·µç›¸ç»“åˆï¼ŒæŒæ¡åœ¨å®é™…åµŒå…¥å¼å¼€å‘ä¸­éƒ¨ç½² AI ç³»ç»Ÿçš„æ–¹æ³•ã€‚</p>
<blockquote>
<p>GitHub åœ°å€â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fharvard-edge%2Fcs249r_book" target="_blank" title="https://github.com/harvard-edge/cs249r_book" ref="nofollow noopener noreferrer">github.com/harvard-edgâ€¦</a></p>
</blockquote>
<h2 data-id="heading-6">2. HelloGitHub çƒ­è¯„</h2>
<p>åœ¨æ­¤ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä¸ºå¤§å®¶ä»‹ç»æœ¬å‘¨ HelloGitHub ç½‘ç«™ä¸Šçš„çƒ­é—¨å¼€æºé¡¹ç›®ï¼Œå¸Œæœ›ä½ èƒ½ä»ä¸­æ”¶è·å¼€æºç¥å™¨å’Œç¼–ç¨‹çŸ¥è¯†ï¼Œæ›´æ¬¢è¿ä¸æˆ‘ä»¬åˆ†äº«ä½ åœ¨ä½¿ç”¨è¿™äº›<strong>å¼€æºé¡¹ç›®çš„ä½“éªŒå’Œè¯„ä»·</strong>ï¼Œç”¨æœ€çœŸå®åé¦ˆä¸ºå¼€æºé¡¹ç›®çš„ä½œè€…æä¾›åŠ¨åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6fe9122d8614770b1d7c05c90ada1e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265852&amp;x-signature=6ty6dsb7rJm%2BqC7LvihpFiaQcfs%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">2.1 æ— éœ€å‘é‚®ä»¶éªŒè¯é‚®ç®±æœ‰æ•ˆæ€§çš„å·¥å…·ï¼šcheck-if-email-exists</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc357b38b3e84c7cba6ab3557961e891~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265852&amp;x-signature=qWnl%2FmnvBRXCwvy7gy5mpl%2BnlKI%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸»è¯­è¨€ï¼šRust</strong></p>
<p>è¿™æ˜¯ä¸€æ¬¾ç”¨ Rust å¼€å‘çš„é‚®ç®±éªŒè¯å·¥å…·ï¼Œé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼ã€DNSã€SMTP ç­‰å¤šé‡æ ¡éªŒï¼Œåœ¨ä¸å‘é€é‚®ä»¶çš„æƒ…å†µä¸‹éªŒè¯é‚®ç®±æœ‰æ•ˆæ€§ï¼Œæ”¯æŒ API å’Œ CLI ç­‰ä½¿ç”¨æ–¹å¼ã€‚</p>
<blockquote>
<p>é¡¹ç›®è¯¦æƒ…â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Frepository%2Freacherhq%2Fcheck-if-email-exists" target="_blank" title="https://hellogithub.com/repository/reacherhq/check-if-email-exists" ref="nofollow noopener noreferrer">hellogithub.com/repository/â€¦</a></p>
</blockquote>
<h3 data-id="heading-8">2.2 æ²‰æµ¸å¼æ¡Œé¢æ­Œè¯æ˜¾ç¤ºå·¥å…·ï¼šBetterLyrics</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97d2875d2fb34e34a0f509c91b5629f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSGVsbG9HaXRIdWI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768265852&amp;x-signature=bFvRPtFE7Gh5WD4GmLWlbc5DvP8%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸»è¯­è¨€ï¼šC#</strong></p>
<p>è¿™æ˜¯ä¸€æ¬¾ä¸“ä¸º Windows è®¾è®¡çš„æ²‰æµ¸å¼æ­Œè¯æ˜¾ç¤ºå·¥å…·ï¼Œèƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ«æ’­æ”¾å™¨æ­£åœ¨æ’­æ”¾çš„éŸ³ä¹ï¼Œå®æ—¶æ£€ç´¢æœ¬åœ°æˆ–åœ¨çº¿æ­Œè¯ï¼Œå¹¶é€šè¿‡æµç•…åŠ¨ç”»ç¾è§‚åœ°å±•ç¤ºåœ¨æ¡Œé¢ä¸Šã€‚</p>
<blockquote>
<p>é¡¹ç›®è¯¦æƒ…â†’<a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com%2Frepository%2Fjayfunc%2FBetterLyrics" target="_blank" title="https://hellogithub.com/repository/jayfunc/BetterLyrics" ref="nofollow noopener noreferrer">hellogithub.com/repository/â€¦</a></p>
</blockquote>
<h2 data-id="heading-9">3. ç»“å°¾</h2>
<p>ä»¥ä¸Šå°±æ˜¯æœ¬æœŸã€ŒGitHub çƒ­ç‚¹é€Ÿè§ˆã€çš„å…¨éƒ¨å†…å®¹ï¼Œæˆ‘å§‹ç»ˆåšä¿¡ï¼šå…´è¶£æ˜¯æœ€å¥½çš„è€å¸ˆï¼å¸Œæœ›è¿™äº›å¼€æºé¡¹ç›®èƒ½æ¿€å‘ä½ çš„å…´è¶£ï¼Œè®©ä½ æ‰¾åˆ°ä¸‹ä¸€ä¸ªæƒ³å°è¯•å’Œå­¦ä¹ çš„å¼€æºé¡¹ç›®ã€‚å¦‚æœä½ ä¹Ÿå‘ç°äº†å¥½ç©ã€æœ‰è¶£çš„ GitHub å¼€æºé¡¹ç›®æƒ³è¦åˆ†äº«ï¼Œæ¬¢è¿æ¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fhellogithub.com" target="_blank" title="https://hellogithub.com" ref="nofollow noopener noreferrer">HelloGitHub</a> ä¸æˆ‘ä»¬äº¤æµã€è®¨è®ºä½¿ç”¨ä½“éªŒã€‚</p>
<p><strong>å¾€æœŸå›é¡¾</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FiUWBUmu8Bw8RuC81CqXpEg" target="_blank" title="https://mp.weixin.qq.com/s/iUWBUmu8Bw8RuC81CqXpEg" ref="nofollow noopener noreferrer">ä¸Šç­æ‘¸é±¼ç©å¡”é˜²ï¼Œç«Ÿç„¶æ˜¯ä¸ºäº†å­¦æ¶æ„ï¼Ÿ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F44TR75pFspRM3kGf-6gU2Q" target="_blank" title="https://mp.weixin.qq.com/s/44TR75pFspRM3kGf-6gU2Q" ref="nofollow noopener noreferrer">èŠ‚çœ 60% Token çš„æ–°æ•°æ®æ ¼å¼</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MyBatisæ’ä»¶æ¨¡å—è¯¦è§£]]></title>    <link>https://juejin.cn/post/7591728734984028187</link>    <guid>https://juejin.cn/post/7591728734984028187</guid>    <pubDate>2026-01-06T01:01:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591728734984028187" data-draft-id="7591635567588818990" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MyBatisæ’ä»¶æ¨¡å—è¯¦è§£"/> <meta itemprop="keywords" content="MyBatis"/> <meta itemprop="datePublished" content="2026-01-06T01:01:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MyBatisæ’ä»¶æ¨¡å—è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T01:01:24.000Z" title="Tue Jan 06 2026 01:01:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">MyBatisæ’ä»¶æ¨¡å—è¯¦è§£</h2>
<h3 data-id="heading-1">ä¸€ã€MyBatisæ•´ä½“æ¶æ„ä¸æ’ä»¶æ¨¡å—</h3>
<p>åœ¨æ·±å…¥æ’ä»¶æ¨¡å—ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£MyBatisçš„æ•´ä½“æ¶æ„ï¼Œä»¥åŠæ’ä»¶æ¨¡å—åœ¨å…¶ä¸­çš„é‡è¦åœ°ä½ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04f81476a5ed4bc7a342e2a2119e8d83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768266084&amp;x-signature=XL6Cg%2BcL9%2B%2FYLn30lMDPeXelbB4%3D" alt="" loading="lazy"/></p>
<p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒMyBatisé‡‡ç”¨äº†åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œè€Œæ’ä»¶æ¨¡å—ï¼ˆPluginï¼‰é€šè¿‡åŠ¨æ€ä»£ç†æœºåˆ¶æ¨ªåˆ‡æ•´ä¸ªæ¡†æ¶ï¼Œèƒ½å¤Ÿåœ¨æ ¸å¿ƒç»„ä»¶çš„æ‰§è¡Œè¿‡ç¨‹ä¸­æ’å…¥è‡ªå®šä¹‰é€»è¾‘ã€‚å®ƒä¸ºMyBatisæä¾›äº†å¼ºå¤§çš„æ‰©å±•èƒ½åŠ›ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥åœ¨ä¸ä¿®æ”¹æºç çš„æƒ…å†µä¸‹å¢å¼ºæ¡†æ¶åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-2">1.1 æ’ä»¶æ¨¡å—çš„æ ¸å¿ƒèŒè´£</h4>
<p>æ’ä»¶æ¨¡å—ä¸»è¦æ‰¿æ‹…ä»¥ä¸‹æ ¸å¿ƒèŒè´£ï¼š</p>
<ol>
<li><strong>æ‰©å±•æ¡†æ¶åŠŸèƒ½</strong>ï¼šåœ¨ä¸åŠ¨æºç çš„æƒ…å†µä¸‹å¢å¼ºMyBatisåŠŸèƒ½</li>
<li><strong>æ‹¦æˆªæ ¸å¿ƒç»„ä»¶</strong>ï¼šæ‹¦æˆªExecutorã€StatementHandlerã€ParameterHandlerã€ResultSetHandler</li>
<li><strong>å®ç°AOPåŠŸèƒ½</strong>ï¼šé€šè¿‡åŠ¨æ€ä»£ç†å®ç°é¢å‘åˆ‡é¢ç¼–ç¨‹</li>
<li><strong>ç»Ÿä¸€æƒé™æ§åˆ¶</strong>ï¼šå®ç°æ•°æ®æƒé™è¿‡æ»¤</li>
<li><strong>æ€§èƒ½ç›‘æ§</strong>ï¼šè®°å½•SQLæ‰§è¡Œæ—¶é—´å’Œæ€§èƒ½æŒ‡æ ‡</li>
<li><strong>åˆ†é¡µæŸ¥è¯¢</strong>ï¼šå®ç°ç‰©ç†åˆ†é¡µåŠŸèƒ½</li>
</ol>
<h4 data-id="heading-3">1.2 ä¸ºä»€ä¹ˆéœ€è¦æ’ä»¶</h4>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸æœ‰è¿™äº›éœ€æ±‚ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">éœ€æ±‚åœºæ™¯ï¼š
â”œâ”€â”€ <span class="hljs-keyword">SQL</span>æ€§èƒ½ç›‘æ§ï¼šè®°å½•æ…¢æŸ¥è¯¢
â”œâ”€â”€ æ•°æ®æƒé™æ§åˆ¶ï¼šæ ¹æ®ç”¨æˆ·æƒé™è¿‡æ»¤æ•°æ®
â”œâ”€â”€ åˆ†é¡µæŸ¥è¯¢ï¼šè‡ªåŠ¨å®ç°ç‰©ç†åˆ†é¡µ
â”œâ”€â”€ ä¹è§‚é”ï¼šè‡ªåŠ¨æ›´æ–°ç‰ˆæœ¬å·
â”œâ”€â”€ å®¡è®¡æ—¥å¿—ï¼šè®°å½•æ“ä½œæ—¥å¿—
â””â”€â”€ åŠ å¯†è§£å¯†ï¼šæ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
</code></pre>
<p>å¦‚æœæ²¡æœ‰æ’ä»¶æœºåˆ¶ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹MyBatisæºç æˆ–ç¼–å†™å¤§é‡é‡å¤ä»£ç ã€‚æ’ä»¶æœºåˆ¶è®©æˆ‘ä»¬å¯ä»¥ä¼˜é›…åœ°å®ç°è¿™äº›åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-4">1.3 æ’ä»¶çš„å®ç°åŸç†</h4>
<p>MyBatisçš„æ’ä»¶åŸºäº<strong>åŠ¨æ€ä»£ç†</strong>å®ç°ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ç›®æ ‡å¯¹è±¡
    â†“
ä½¿ç”¨Plugin<span class="hljs-selector-class">.wrap</span>()åŒ…è£…
    â†“
ç”Ÿæˆä»£ç†å¯¹è±¡
    â†“
è°ƒç”¨<span class="hljs-built_in">intercept</span>()æ–¹æ³•
    â†“
æ‰§è¡Œè‡ªå®šä¹‰é€»è¾‘
    â†“
è°ƒç”¨ç›®æ ‡æ–¹æ³•æˆ–ç»§ç»­ä¼ é€’
</code></pre>
<h3 data-id="heading-5">äºŒã€æ’ä»¶æ‹¦æˆªæœºåˆ¶</h3>
<p>MyBatisçš„æ’ä»¶æœºåˆ¶åŸºäºJavaåŠ¨æ€ä»£ç†å’Œè´£ä»»é“¾æ¨¡å¼ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/376d0f3b8bdd4bf2aab8036be24069cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768266084&amp;x-signature=IjvaLOW%2FLiZ5HKC7PF1fbGuAqNk%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-6">2.1 Interceptoræ¥å£</h4>
<p>MyBatisæ’ä»¶çš„æ ¸å¿ƒæ˜¯Interceptoræ¥å£ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Interceptor</span> {
    <span class="hljs-comment">/**
     * æ‹¦æˆªæ–¹æ³•ï¼Œåœ¨è¿™é‡Œå®ç°è‡ªå®šä¹‰é€»è¾‘
     * <span class="hljs-doctag">@param</span> invocation ä»£ç†è°ƒç”¨å¯¹è±¡
     * <span class="hljs-doctag">@return</span> æ–¹æ³•æ‰§è¡Œç»“æœ
     * <span class="hljs-doctag">@throws</span> Throwable å¼‚å¸¸
     */</span>
    Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable;

    <span class="hljs-comment">/**
     * åŒ…è£…ç›®æ ‡å¯¹è±¡ï¼Œç”Ÿæˆä»£ç†å¯¹è±¡
     * <span class="hljs-doctag">@param</span> target ç›®æ ‡å¯¹è±¡
     * <span class="hljs-doctag">@return</span> ä»£ç†å¯¹è±¡
     */</span>
    <span class="hljs-keyword">default</span> Object <span class="hljs-title function_">plugin</span><span class="hljs-params">(Object target)</span> {
        <span class="hljs-keyword">return</span> Plugin.wrap(target, <span class="hljs-built_in">this</span>);
    }

    <span class="hljs-comment">/**
     * è®¾ç½®æ’ä»¶å±æ€§
     * <span class="hljs-doctag">@param</span> properties é…ç½®å±æ€§
     */</span>
    <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setProperties</span><span class="hljs-params">(Properties properties)</span> {
        <span class="hljs-comment">// NOP</span>
    }
}
</code></pre>
<h4 data-id="heading-7">2.2 Invocationç±»</h4>
<p>Invocationå°è£…äº†æ–¹æ³•è°ƒç”¨çš„ç›¸å…³ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Invocation</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Object target;      <span class="hljs-comment">// ç›®æ ‡å¯¹è±¡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Method method;      <span class="hljs-comment">// ç›®æ ‡æ–¹æ³•</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Object[] args;      <span class="hljs-comment">// æ–¹æ³•å‚æ•°</span>

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Invocation</span><span class="hljs-params">(Object target, Method method, Object[] args)</span> {
        <span class="hljs-built_in">this</span>.target = target;
        <span class="hljs-built_in">this</span>.method = method;
        <span class="hljs-built_in">this</span>.args = args;
    }

    <span class="hljs-comment">// æ‰§è¡Œç›®æ ‡æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">proceed</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InvocationTargetException, IllegalAccessException {
        <span class="hljs-keyword">return</span> method.invoke(target, args);
    }

    <span class="hljs-comment">// Getteræ–¹æ³•</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">getTarget</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> target; }
    <span class="hljs-keyword">public</span> Method <span class="hljs-title function_">getMethod</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> method; }
    <span class="hljs-keyword">public</span> Object[] getArgs() { <span class="hljs-keyword">return</span> args; }
}
</code></pre>
<h4 data-id="heading-8">2.3 Pluginç±»</h4>
<p>Pluginæ˜¯ä»£ç†å¯¹è±¡çš„InvocationHandlerï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Plugin</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InvocationHandler</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Object target;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Interceptor interceptor;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;Class&lt;?&gt;, Set&lt;Method&gt;&gt; signatureMap;

    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Plugin</span><span class="hljs-params">(Object target, Interceptor interceptor, Map&lt;Class&lt;?&gt;, Set&lt;Method&gt;&gt; signatureMap)</span> {
        <span class="hljs-built_in">this</span>.target = target;
        <span class="hljs-built_in">this</span>.interceptor = interceptor;
        <span class="hljs-built_in">this</span>.signatureMap = signatureMap;
    }

    <span class="hljs-comment">// é™æ€å·¥å‚æ–¹æ³•ï¼ŒåŒ…è£…ç›®æ ‡å¯¹è±¡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Object <span class="hljs-title function_">wrap</span><span class="hljs-params">(Object target, Interceptor interceptor)</span> {
        <span class="hljs-comment">// è·å–æ‹¦æˆªçš„ç±»å’Œæ–¹æ³•ç­¾å</span>
        Map&lt;Class&lt;?&gt;, Set&lt;Method&gt;&gt; signatureMap = getSignatureMap(interceptor);
        Class&lt;?&gt; type = target.getClass();

        <span class="hljs-comment">// è·å–éœ€è¦æ‹¦æˆªçš„æ¥å£</span>
        Class&lt;?&gt;[] interfaces = getAllInterfaces(type, signatureMap);

        <span class="hljs-keyword">if</span> (interfaces.length &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// åˆ›å»ºä»£ç†å¯¹è±¡</span>
            <span class="hljs-keyword">return</span> Proxy.newProxyInstance(
                type.getClassLoader(),
                interfaces,
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">Plugin</span>(target, interceptor, signatureMap)
            );
        }
        <span class="hljs-keyword">return</span> target;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è·å–éœ€è¦æ‹¦æˆªçš„æ–¹æ³•é›†åˆ</span>
            Set&lt;Method&gt; methods = signatureMap.get(method.getDeclaringClass());
            <span class="hljs-keyword">if</span> (methods != <span class="hljs-literal">null</span> &amp;&amp; methods.contains(method)) {
                <span class="hljs-comment">// æ‰§è¡Œæ‹¦æˆªå™¨çš„interceptæ–¹æ³•</span>
                <span class="hljs-keyword">return</span> interceptor.intercept(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Invocation</span>(target, method, args));
            }
            <span class="hljs-comment">// ä¸éœ€è¦æ‹¦æˆªï¼Œç›´æ¥æ‰§è¡Œ</span>
            <span class="hljs-keyword">return</span> method.invoke(target, args);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">throw</span> ExceptionUtil.unwrapThrowable(e);
        }
    }

    <span class="hljs-comment">// è·å–ç­¾åæ˜ å°„</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Map&lt;Class&lt;?&gt;, Set&lt;Method&gt;&gt; getSignatureMap(Interceptor interceptor) {
        <span class="hljs-type">Intercepts</span> <span class="hljs-variable">interceptsAnnotation</span> <span class="hljs-operator">=</span> interceptor.getClass().getAnnotation(Intercepts.class);
        <span class="hljs-keyword">if</span> (interceptsAnnotation == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PluginException</span>(<span class="hljs-string">"No @Intercepts annotation was found in interceptor "</span> + interceptor.getClass().getName());
        }

        Signature[] sigs = interceptsAnnotation.value();
        Map&lt;Class&lt;?&gt;, Set&lt;Method&gt;&gt; signatureMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        <span class="hljs-keyword">for</span> (Signature sig : sigs) {
            Set&lt;Method&gt; methods = signatureMap.computeIfAbsent(sig.type(), k -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;());
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> sig.type().getMethod(sig.method(), sig.args());
                methods.add(method);
            } <span class="hljs-keyword">catch</span> (NoSuchMethodException e) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PluginException</span>(<span class="hljs-string">"Could not find method on "</span> + sig.type() + <span class="hljs-string">" named "</span> + sig.method() + <span class="hljs-string">". Cause: "</span> + e, e);
            }
        }
        <span class="hljs-keyword">return</span> signatureMap;
    }

    <span class="hljs-comment">// è·å–æ‰€æœ‰éœ€è¦æ‹¦æˆªçš„æ¥å£</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Class&lt;?&gt;[] getAllInterfaces(Class&lt;?&gt; type, Map&lt;Class&lt;?&gt;, Set&lt;Method&gt;&gt; signatureMap) {
        Set&lt;Class&lt;?&gt;&gt; interfaces = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashSet</span>&lt;&gt;();
        <span class="hljs-keyword">while</span> (type != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">for</span> (Class&lt;?&gt; c : type.getInterfaces()) {
                <span class="hljs-keyword">if</span> (signatureMap.containsKey(c)) {
                    interfaces.add(c);
                }
            }
            type = type.getSuperclass();
        }
        <span class="hljs-keyword">return</span> interfaces.toArray(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Class</span>&lt;?&gt;[interfaces.size()]);
    }
}
</code></pre>
<h3 data-id="heading-9">ä¸‰ã€å››å¤§æ ¸å¿ƒæ‹¦æˆªç‚¹</h3>
<p>MyBatiså…è®¸æ‹¦æˆªå››ä¸ªæ ¸å¿ƒç»„ä»¶ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b57dd653d6da47859ffb044ca5505fe8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768266084&amp;x-signature=fBdirpJeiVsdEgFWq%2BY1B60fac0%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-10">3.1 Executorï¼ˆæ‰§è¡Œå™¨ï¼‰</h4>
<p>Executoræ˜¯MyBatisçš„æ ¸å¿ƒæ‰§è¡Œå™¨ï¼Œè´Ÿè´£SQLçš„æ‰§è¡Œã€‚</p>
<p><strong>å¯æ‹¦æˆªæ–¹æ³•ï¼š</strong></p>
<ul>
<li><code>update(MappedStatement ms, Object parameter)</code> - æ‰§è¡Œå¢åˆ æ”¹</li>
<li><code>query(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler)</code> - æŸ¥è¯¢</li>
<li><code>query(MappedStatement ms, Object parameter, RowBounds rowBounds, ResultHandler resultHandler, CacheKey cacheKey, BoundSql boundSql)</code> - æŸ¥è¯¢ï¼ˆå¸¦ç¼“å­˜ï¼‰</li>
<li><code>flushStatements()</code> - åˆ·æ–°æ‰¹å¤„ç†</li>
<li><code>commit()</code> - æäº¤äº‹åŠ¡</li>
<li><code>rollback()</code> - å›æ»šäº‹åŠ¡</li>
<li><code>getTransaction()</code> - è·å–äº‹åŠ¡</li>
<li><code>close()</code> - å…³é—­ä¼šè¯</li>
<li><code>isClosed()</code> - æ˜¯å¦å…³é—­</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šæ€§èƒ½ç›‘æ§æ’ä»¶</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Intercepts({
    @Signature(type = Executor.class,
               method = "update",
               args = {MappedStatement.class, Object.class}),
    @Signature(type = Executor.class,
               method = "query",
               args = {MappedStatement.class, Object.class, RowBounds.class, ResultHandler.class})
})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceMonitorPlugin</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> threshold; <span class="hljs-comment">// æ…¢æŸ¥è¯¢é˜ˆå€¼</span>

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">MappedStatement</span> <span class="hljs-variable">ms</span> <span class="hljs-operator">=</span> (MappedStatement) invocation.getArgs()[<span class="hljs-number">0</span>];
        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ‰§è¡Œç›®æ ‡æ–¹æ³•</span>
            <span class="hljs-keyword">return</span> invocation.proceed();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-type">long</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
            <span class="hljs-type">long</span> <span class="hljs-variable">time</span> <span class="hljs-operator">=</span> end - start;

            <span class="hljs-keyword">if</span> (time &gt; threshold) {
                <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> ms.getBoundSql(<span class="hljs-literal">null</span>).getSql();
                System.out.println(<span class="hljs-string">"æ…¢æŸ¥è¯¢è­¦å‘Š: "</span> + ms.getId() + <span class="hljs-string">" è€—æ—¶: "</span> + time + <span class="hljs-string">"ms"</span>);
                System.out.println(<span class="hljs-string">"SQL: "</span> + sql);
            }
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setProperties</span><span class="hljs-params">(Properties properties)</span> {
        <span class="hljs-built_in">this</span>.threshold = Long.parseLong(properties.getProperty(<span class="hljs-string">"threshold"</span>, <span class="hljs-string">"1000"</span>));
    }
}
</code></pre>
<h4 data-id="heading-11">3.2 StatementHandlerï¼ˆè¯­å¥å¤„ç†å™¨ï¼‰</h4>
<p>StatementHandlerè´Ÿè´£åˆ›å»ºStatementå¯¹è±¡å¹¶è®¾ç½®å‚æ•°ã€‚</p>
<p><strong>å¯æ‹¦æˆªæ–¹æ³•ï¼š</strong></p>
<ul>
<li><code>prepare(Connection connection)</code> - å‡†å¤‡Statement</li>
<li><code>parameterize(Statement statement)</code> - è®¾ç½®å‚æ•°</li>
<li><code>batch(Statement statement)</code> - æ‰¹å¤„ç†</li>
<li><code>update(Statement statement)</code> - æ‰§è¡Œæ›´æ–°</li>
<li><code>query(Statement statement, ResultHandler resultHandler)</code> - æ‰§è¡ŒæŸ¥è¯¢</li>
<li><code>getBoundSql()</code> - è·å–BoundSql</li>
<li><code>getParameterHandler()</code> - è·å–ParameterHandler</li>
<li><code>getResultHandler()</code> - è·å–ResultSetHandler</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šSQLé‡å†™æ’ä»¶</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Intercepts({
    @Signature(type = StatementHandler.class,
               method = "prepare",
               args = {Connection.class, Integer.class})
})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SQLRewritePlugin</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">StatementHandler</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> (StatementHandler) invocation.getTarget();
        <span class="hljs-type">BoundSql</span> <span class="hljs-variable">boundSql</span> <span class="hljs-operator">=</span> handler.getBoundSql();
        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> boundSql.getSql();

        <span class="hljs-comment">// é‡å†™SQLï¼šæ·»åŠ æ•°æ®æƒé™è¿‡æ»¤</span>
        <span class="hljs-keyword">if</span> (sql.toLowerCase().startsWith(<span class="hljs-string">"select"</span>)) {
            sql = rewriteSQL(sql);
            <span class="hljs-comment">// ä½¿ç”¨åå°„ä¿®æ”¹sqlå­—æ®µ</span>
            <span class="hljs-type">Field</span> <span class="hljs-variable">field</span> <span class="hljs-operator">=</span> boundSql.getClass().getDeclaredField(<span class="hljs-string">"sql"</span>);
            field.setAccessible(<span class="hljs-literal">true</span>);
            field.set(boundSql, sql);
        }

        <span class="hljs-keyword">return</span> invocation.proceed();
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">rewriteSQL</span><span class="hljs-params">(String sql)</span> {
        <span class="hljs-comment">// æ·»åŠ æ•°æ®æƒé™è¿‡æ»¤æ¡ä»¶</span>
        <span class="hljs-keyword">return</span> sql + <span class="hljs-string">" AND tenant_id = '"</span> + getCurrentTenantId() + <span class="hljs-string">"'"</span>;
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getCurrentTenantId</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è·å–å½“å‰ç§Ÿæˆ·ID</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"1001"</span>;
    }
}
</code></pre>
<h4 data-id="heading-12">3.3 ParameterHandlerï¼ˆå‚æ•°å¤„ç†å™¨ï¼‰</h4>
<p>ParameterHandlerè´Ÿè´£è®¾ç½®PreparedStatementçš„å‚æ•°ã€‚</p>
<p><strong>å¯æ‹¦æˆªæ–¹æ³•ï¼š</strong></p>
<ul>
<li><code>getParameterObject()</code> - è·å–å‚æ•°å¯¹è±¡</li>
<li><code>setParameters(PreparedStatement ps)</code> - è®¾ç½®å‚æ•°</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šå‚æ•°åŠ å¯†æ’ä»¶</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Intercepts({
    @Signature(type = ParameterHandler.class,
               method = "setParameters",
               args = {PreparedStatement.class})
})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ParameterEncryptPlugin</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">ParameterHandler</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> (ParameterHandler) invocation.getTarget();
        <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">ps</span> <span class="hljs-operator">=</span> (PreparedStatement) invocation.getArgs()[<span class="hljs-number">0</span>];

        <span class="hljs-comment">// è·å–å‚æ•°å¯¹è±¡</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">parameterObject</span> <span class="hljs-operator">=</span> handler.getParameterObject();

        <span class="hljs-keyword">if</span> (parameterObject <span class="hljs-keyword">instanceof</span> User) {
            <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> (User) parameterObject;
            <span class="hljs-comment">// åŠ å¯†æ•æ„Ÿå­—æ®µ</span>
            <span class="hljs-keyword">if</span> (user.getPassword() != <span class="hljs-literal">null</span>) {
                user.setPassword(encrypt(user.getPassword()));
            }
        }

        <span class="hljs-comment">// ç»§ç»­æ‰§è¡Œ</span>
        <span class="hljs-keyword">return</span> invocation.proceed();
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">encrypt</span><span class="hljs-params">(String plainText)</span> {
        <span class="hljs-comment">// Base64ç®€å•åŠ å¯†</span>
        <span class="hljs-keyword">return</span> Base64.getEncoder().encodeToString(plainText.getBytes());
    }
}
</code></pre>
<h4 data-id="heading-13">3.4 ResultSetHandlerï¼ˆç»“æœé›†å¤„ç†å™¨ï¼‰</h4>
<p>ResultSetHandlerè´Ÿè´£å°†ResultSetæ˜ å°„ä¸ºJavaå¯¹è±¡ã€‚</p>
<p><strong>å¯æ‹¦æˆªæ–¹æ³•ï¼š</strong></p>
<ul>
<li><code>handleResultSets(Statement stmt)</code> - å¤„ç†ç»“æœé›†</li>
<li><code>handleOutputParameters(CallableStatement cs)</code> - å¤„ç†å­˜å‚¨è¿‡ç¨‹è¾“å‡ºå‚æ•°</li>
</ul>
<p><strong>ç¤ºä¾‹ï¼šç»“æœè§£å¯†æ’ä»¶</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Intercepts({
    @Signature(type = ResultSetHandler.class,
               method = "handleResultSets",
               args = {Statement.class})
})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ResultDecryptPlugin</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-comment">// æ‰§è¡ŒæŸ¥è¯¢</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> invocation.proceed();

        <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> List) {
            List&lt;?&gt; list = (List&lt;?&gt;) result;
            <span class="hljs-keyword">for</span> (Object obj : list) {
                <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">instanceof</span> User) {
                    <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> (User) obj;
                    <span class="hljs-comment">// è§£å¯†æ•æ„Ÿå­—æ®µ</span>
                    <span class="hljs-keyword">if</span> (user.getIdCard() != <span class="hljs-literal">null</span>) {
                        user.setIdCard(decrypt(user.getIdCard()));
                    }
                }
            }
        }

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">decrypt</span><span class="hljs-params">(String cipherText)</span> {
        <span class="hljs-comment">// Base64è§£å¯†</span>
        <span class="hljs-type">byte</span>[] decoded = Base64.getDecoder().decode(cipherText);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(decoded);
    }
}
</code></pre>
<h3 data-id="heading-14">å››ã€æ’ä»¶å®ç°æµç¨‹</h3>
<p>ç†è§£æ’ä»¶çš„å®ç°å’Œé…ç½®æµç¨‹éå¸¸é‡è¦ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63ec6d601cf04e6195e137b7161c2de0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768266084&amp;x-signature=PfgiCJnROyaWkBgfLlldqLCtG%2BM%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-15">4.1 å®ç°è‡ªå®šä¹‰æ’ä»¶</h4>
<p><strong>æ­¥éª¤1ï¼šå®ç°Interceptoræ¥å£</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Intercepts({
    @Signature(type = Executor.class,
               method = "query",
               args = {MappedStatement.class, Object.class, RowBounds.class, ResultHandler.class})
})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomPlugin</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-comment">// å‰ç½®é€»è¾‘</span>
        System.out.println(<span class="hljs-string">"Before: "</span> + invocation.getMethod().getName());

        <span class="hljs-comment">// æ‰§è¡Œç›®æ ‡æ–¹æ³•</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> invocation.proceed();

        <span class="hljs-comment">// åç½®é€»è¾‘</span>
        System.out.println(<span class="hljs-string">"After: "</span> + invocation.getMethod().getName());

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">plugin</span><span class="hljs-params">(Object target)</span> {
        <span class="hljs-comment">// ä½¿ç”¨Plugin.wrapåŒ…è£…ç›®æ ‡å¯¹è±¡</span>
        <span class="hljs-keyword">return</span> Plugin.wrap(target, <span class="hljs-built_in">this</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setProperties</span><span class="hljs-params">(Properties properties)</span> {
        <span class="hljs-comment">// è¯»å–é…ç½®å±æ€§</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">propertyName</span> <span class="hljs-operator">=</span> properties.getProperty(<span class="hljs-string">"propertyName"</span>);
        System.out.println(<span class="hljs-string">"Property: "</span> + propertyName);
    }
}
</code></pre>
<h4 data-id="heading-16">4.2 é…ç½®æ’ä»¶</h4>
<p><strong>æ–¹å¼1ï¼šXMLé…ç½®</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ€§èƒ½ç›‘æ§æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span> <span class="hljs-attr">interceptor</span>=<span class="hljs-string">"com.example.plugin.PerformanceMonitorPlugin"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"threshold"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1000"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- åˆ†é¡µæ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span> <span class="hljs-attr">interceptor</span>=<span class="hljs-string">"com.github.pagehelper.PageInterceptor"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"helperDialect"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"mysql"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- è‡ªå®šä¹‰æ’ä»¶ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span> <span class="hljs-attr">interceptor</span>=<span class="hljs-string">"com.example.plugin.CustomPlugin"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"propertyName"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"propertyValue"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code></pre>
<p><strong>æ–¹å¼2ï¼šä»£ç é…ç½®</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»ºConfiguration</span>
<span class="hljs-type">Configuration</span> <span class="hljs-variable">configuration</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>();

<span class="hljs-comment">// æ·»åŠ æ’ä»¶</span>
configuration.addInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceMonitorPlugin</span>());
configuration.addInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">PageInterceptor</span>());
configuration.addInterceptor(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomPlugin</span>());

<span class="hljs-comment">// åˆ›å»ºSqlSessionFactory</span>
<span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">sqlSessionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(configuration);
</code></pre>
<p><strong>æ–¹å¼3ï¼šSpringé…ç½®</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBatisConfig</span> {

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> PerformanceMonitorPlugin <span class="hljs-title function_">performanceMonitorPlugin</span><span class="hljs-params">()</span> {
        <span class="hljs-type">PerformanceMonitorPlugin</span> <span class="hljs-variable">plugin</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceMonitorPlugin</span>();
        <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();
        properties.setProperty(<span class="hljs-string">"threshold"</span>, <span class="hljs-string">"1000"</span>);
        plugin.setProperties(properties);
        <span class="hljs-keyword">return</span> plugin;
    }

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> SqlSessionFactory <span class="hljs-title function_">sqlSessionFactory</span><span class="hljs-params">(DataSource dataSource)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">SqlSessionFactoryBean</span> <span class="hljs-variable">sessionFactory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBean</span>();
        sessionFactory.setDataSource(dataSource);

        <span class="hljs-comment">// æ·»åŠ æ’ä»¶</span>
        sessionFactory.setPlugins(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Interceptor</span>[]{
                performanceMonitorPlugin(),
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageInterceptor</span>()
            }
        );

        <span class="hljs-keyword">return</span> sessionFactory.getObject();
    }
}
</code></pre>
<h4 data-id="heading-17">4.3 æ’ä»¶é“¾çš„æ‰§è¡Œé¡ºåº</h4>
<p>å½“é…ç½®äº†å¤šä¸ªæ’ä»¶æ—¶ï¼Œå®ƒä»¬ä¼šå½¢æˆè´£ä»»é“¾ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">åŸå§‹Executor
<span class="hljs-code">    â†“
è¢«Plugin1åŒ…è£…
    â†“
è¢«Plugin2åŒ…è£…
    â†“
è¢«Plugin3åŒ…è£…
    â†“
æœ€ç»ˆä»£ç†å¯¹è±¡
</span></code></pre>
<p><strong>æ‰§è¡Œé¡ºåºï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é…ç½®é¡ºåº</span>
&lt;plugin interceptor=<span class="hljs-string">"Plugin1"</span>/&gt;
&lt;plugin interceptor=<span class="hljs-string">"Plugin2"</span>/&gt;
&lt;plugin interceptor=<span class="hljs-string">"Plugin3"</span>/&gt;

<span class="hljs-comment">// æ‰§è¡Œé¡ºåº</span>
Plugin3.intercept() â†’ Plugin2.intercept() â†’ Plugin1.intercept() â†’ ç›®æ ‡æ–¹æ³•

<span class="hljs-comment">// è¿”å›é¡ºåº</span>
ç›®æ ‡æ–¹æ³• â†’ Plugin1å¤„ç† â†’ Plugin2å¤„ç† â†’ Plugin3å¤„ç† â†’ æœ€ç»ˆç»“æœ
</code></pre>
<h3 data-id="heading-18">äº”ã€åŠ¨æ€ä»£ç†é“¾</h3>
<p>å¤šä¸ªæ’ä»¶ä¼šå½¢æˆå¤šå±‚ä»£ç†ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65d91917add24b7c9d1b12ec97a4f0c0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768266084&amp;x-signature=AY2EduC0AhBumeu08NMzLTLZ%2Bz8%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-19">5.1 ä»£ç†é“¾çš„æ„å»º</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŸå§‹å¯¹è±¡</span>
<span class="hljs-type">Executor</span> <span class="hljs-variable">target</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleExecutor</span>();

<span class="hljs-comment">// ç¬¬ä¸€æ¬¡åŒ…è£…</span>
<span class="hljs-type">Executor</span> <span class="hljs-variable">proxy1</span> <span class="hljs-operator">=</span> (Executor) Plugin.wrap(target, plugin1);

<span class="hljs-comment">// ç¬¬äºŒæ¬¡åŒ…è£…ï¼ˆåŒ…è£…çš„æ˜¯ä»£ç†å¯¹è±¡ï¼‰</span>
<span class="hljs-type">Executor</span> <span class="hljs-variable">proxy2</span> <span class="hljs-operator">=</span> (Executor) Plugin.wrap(proxy1, plugin2);

<span class="hljs-comment">// ç¬¬ä¸‰æ¬¡åŒ…è£…</span>
<span class="hljs-type">Executor</span> <span class="hljs-variable">proxy3</span> <span class="hljs-operator">=</span> (Executor) Plugin.wrap(proxy2, plugin3);

<span class="hljs-comment">// proxy3æ˜¯æœ€å¤–å±‚çš„ä»£ç†</span>
</code></pre>
<h4 data-id="heading-20">5.2 ä»£ç†é“¾çš„æ‰§è¡Œ</h4>
<pre><code class="hljs language-scss" lang="scss">è°ƒç”¨ proxy3<span class="hljs-selector-class">.query</span>()
    â†“
Plugin3<span class="hljs-selector-class">.invoke</span>()
    â†“
Plugin3<span class="hljs-selector-class">.intercept</span>()
    â†“
invocation<span class="hljs-selector-class">.proceed</span>() è°ƒç”¨ proxy2<span class="hljs-selector-class">.query</span>()
    â†“
Plugin2<span class="hljs-selector-class">.invoke</span>()
    â†“
Plugin2<span class="hljs-selector-class">.intercept</span>()
    â†“
invocation<span class="hljs-selector-class">.proceed</span>() è°ƒç”¨ proxy1<span class="hljs-selector-class">.query</span>()
    â†“
Plugin1<span class="hljs-selector-class">.invoke</span>()
    â†“
Plugin1<span class="hljs-selector-class">.intercept</span>()
    â†“
invocation<span class="hljs-selector-class">.proceed</span>() è°ƒç”¨ target<span class="hljs-selector-class">.query</span>()
    â†“
æ‰§è¡ŒçœŸæ­£çš„æŸ¥è¯¢
    â†“
è¿”å›ç»“æœ
    â†“
Plugin1å¤„ç†è¿”å›å€¼
    â†“
Plugin2å¤„ç†è¿”å›å€¼
    â†“
Plugin3å¤„ç†è¿”å›å€¼
    â†“
æœ€ç»ˆè¿”å›
</code></pre>
<h4 data-id="heading-21">5.3 ä»£ç†é“¾ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Intercepts(@Signature(type = Executor.class, method = "query",
        args = {MappedStatement.class, Object.class, RowBounds.class, ResultHandler.class}))</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Plugin1</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable {
        System.out.println(<span class="hljs-string">"Plugin1 Before"</span>);
        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> invocation.proceed();
        System.out.println(<span class="hljs-string">"Plugin1 After"</span>);
        <span class="hljs-keyword">return</span> result;
    }
}

<span class="hljs-meta">@Intercepts(@Signature(type = Executor.class, method = "query",
        args = {MappedStatement.class, Object.class, RowBounds.class, ResultHandler.class}))</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Plugin2</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable {
        System.out.println(<span class="hljs-string">"Plugin2 Before"</span>);
        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> invocation.proceed();
        System.out.println(<span class="hljs-string">"Plugin2 After"</span>);
        <span class="hljs-keyword">return</span> result;
    }
}

<span class="hljs-comment">// è¾“å‡ºç»“æœï¼š</span>
<span class="hljs-comment">// Plugin2 Before</span>
<span class="hljs-comment">// Plugin1 Before</span>
<span class="hljs-comment">// æ‰§è¡ŒæŸ¥è¯¢</span>
<span class="hljs-comment">// Plugin1 After</span>
<span class="hljs-comment">// Plugin2 After</span>
</code></pre>
<h3 data-id="heading-22">å…­ã€å…¸å‹åº”ç”¨åœºæ™¯</h3>
<p>æ’ä»¶åœ¨å®é™…å¼€å‘ä¸­æœ‰å¾ˆå¤šåº”ç”¨åœºæ™¯ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c52ee22080dd483fa7c4b17fcca0ecd7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768266084&amp;x-signature=EKTNHFhLLi5vOlDQxI1OM8RA4g8%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-23">6.1 åˆ†é¡µæ’ä»¶</h4>
<p><strong>PageHelperæ˜¯æœ€è‘—åçš„MyBatisåˆ†é¡µæ’ä»¶ï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>pagehelper<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>5.3.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p><strong>é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">plugin</span> <span class="hljs-attr">interceptor</span>=<span class="hljs-string">"com.github.pagehelper.PageInterceptor"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"helperDialect"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"mysql"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"reasonable"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"true"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span>
</code></pre>
<p><strong>ä½¿ç”¨ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æŸ¥è¯¢å‰è°ƒç”¨åˆ†é¡µ</span>
PageHelper.startPage(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>);
List&lt;User&gt; users = userMapper.selectAll();

<span class="hljs-comment">// è·å–åˆ†é¡µä¿¡æ¯</span>
PageInfo&lt;User&gt; pageInfo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PageInfo</span>&lt;&gt;(users);
System.out.println(<span class="hljs-string">"æ€»æ•°: "</span> + pageInfo.getTotal());
System.out.println(<span class="hljs-string">"é¡µæ•°: "</span> + pageInfo.getPages());
</code></pre>
<h4 data-id="heading-24">6.2 æ€§èƒ½ç›‘æ§æ’ä»¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Intercepts({
    @Signature(type = Executor.class,
               method = "update",
               args = {MappedStatement.class, Object.class}),
    @Signature(type = Executor.class,
               method = "query",
               args = {MappedStatement.class, Object.class, RowBounds.class, ResultHandler.class})
})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SlowQueryMonitorPlugin</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(SlowQueryMonitorPlugin.class);
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> slowQueryThreshold;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">MappedStatement</span> <span class="hljs-variable">ms</span> <span class="hljs-operator">=</span> (MappedStatement) invocation.getArgs()[<span class="hljs-number">0</span>];
        <span class="hljs-type">long</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> System.currentTimeMillis();

        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> invocation.proceed();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-type">long</span> <span class="hljs-variable">cost</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - start;
            <span class="hljs-keyword">if</span> (cost &gt; slowQueryThreshold) {
                <span class="hljs-type">BoundSql</span> <span class="hljs-variable">boundSql</span> <span class="hljs-operator">=</span> ms.getBoundSql(invocation.getArgs()[<span class="hljs-number">1</span>]);
                <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> boundSql.getSql();
                logger.warn(<span class="hljs-string">"æ…¢æŸ¥è¯¢: {} è€—æ—¶: {}ms\nSQL: {}"</span>, ms.getId(), cost, sql);
            }
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setProperties</span><span class="hljs-params">(Properties properties)</span> {
        <span class="hljs-built_in">this</span>.slowQueryThreshold = Long.parseLong(properties.getProperty(<span class="hljs-string">"threshold"</span>, <span class="hljs-string">"1000"</span>));
    }
}
</code></pre>
<h4 data-id="heading-25">6.3 æ•°æ®æƒé™æ’ä»¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Intercepts({
    @Signature(type = StatementHandler.class,
               method = "prepare",
               args = {Connection.class, Integer.class})
})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataPermissionPlugin</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">StatementHandler</span> <span class="hljs-variable">handler</span> <span class="hljs-operator">=</span> (StatementHandler) invocation.getTarget();
        <span class="hljs-type">BoundSql</span> <span class="hljs-variable">boundSql</span> <span class="hljs-operator">=</span> handler.getBoundSql();
        <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> boundSql.getSql();

        <span class="hljs-comment">// è·å–å½“å‰ç”¨æˆ·çš„æ•°æ®æƒé™</span>
        Set&lt;Long&gt; deptIds = getCurrentUserDeptIds();

        <span class="hljs-comment">// é‡å†™SQLï¼Œæ·»åŠ æ•°æ®æƒé™è¿‡æ»¤</span>
        <span class="hljs-keyword">if</span> (sql.toLowerCase().startsWith(<span class="hljs-string">"select"</span>) &amp;&amp; !deptIds.isEmpty()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">condition</span> <span class="hljs-operator">=</span> <span class="hljs-string">"dept_id IN ("</span> + String.join(<span class="hljs-string">","</span>, deptIds.toString()) + <span class="hljs-string">")"</span>;
            sql = addDataPermission(sql, condition);

            <span class="hljs-comment">// ä½¿ç”¨åå°„ä¿®æ”¹SQL</span>
            <span class="hljs-type">Field</span> <span class="hljs-variable">field</span> <span class="hljs-operator">=</span> boundSql.getClass().getDeclaredField(<span class="hljs-string">"sql"</span>);
            field.setAccessible(<span class="hljs-literal">true</span>);
            field.set(boundSql, sql);
        }

        <span class="hljs-keyword">return</span> invocation.proceed();
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">addDataPermission</span><span class="hljs-params">(String sql, String condition)</span> {
        <span class="hljs-comment">// ç®€å•å®ç°ï¼šåœ¨WHEREåæ·»åŠ æ¡ä»¶</span>
        <span class="hljs-keyword">if</span> (sql.toLowerCase().contains(<span class="hljs-string">"where"</span>)) {
            <span class="hljs-keyword">return</span> sql + <span class="hljs-string">" AND "</span> + condition;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> sql + <span class="hljs-string">" WHERE "</span> + condition;
        }
    }

    <span class="hljs-keyword">private</span> Set&lt;Long&gt; <span class="hljs-title function_">getCurrentUserDeptIds</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// ä»ä¸Šä¸‹æ–‡è·å–å½“å‰ç”¨æˆ·çš„æ•°æ®æƒé™</span>
        <span class="hljs-keyword">return</span> SecurityContextHolder.getCurrentUserDataPermission();
    }
}
</code></pre>
<h4 data-id="heading-26">6.4 ä¹è§‚é”æ’ä»¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Intercepts({
    @Signature(type = Executor.class,
               method = "update",
               args = {MappedStatement.class, Object.class})
})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OptimisticLockPlugin</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">Object</span> <span class="hljs-variable">parameter</span> <span class="hljs-operator">=</span> invocation.getArgs()[<span class="hljs-number">1</span>];

        <span class="hljs-keyword">if</span> (parameter <span class="hljs-keyword">instanceof</span> BaseEntity) {
            <span class="hljs-type">BaseEntity</span> <span class="hljs-variable">entity</span> <span class="hljs-operator">=</span> (BaseEntity) parameter;
            <span class="hljs-comment">// è‡ªåŠ¨è®¾ç½®ç‰ˆæœ¬å·</span>
            <span class="hljs-keyword">if</span> (entity.getVersion() == <span class="hljs-literal">null</span>) {
                entity.setVersion(<span class="hljs-number">0</span>);
            } <span class="hljs-keyword">else</span> {
                entity.setVersion(entity.getVersion() + <span class="hljs-number">1</span>);
            }
        }

        <span class="hljs-keyword">return</span> invocation.proceed();
    }
}
</code></pre>
<h4 data-id="heading-27">6.5 å®¡è®¡æ—¥å¿—æ’ä»¶</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Intercepts({
    @Signature(type = Executor.class,
               method = "update",
               args = {MappedStatement.class, Object.class})
})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuditLogPlugin</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">MappedStatement</span> <span class="hljs-variable">ms</span> <span class="hljs-operator">=</span> (MappedStatement) invocation.getArgs()[<span class="hljs-number">0</span>];
        <span class="hljs-type">Object</span> <span class="hljs-variable">parameter</span> <span class="hljs-operator">=</span> invocation.getArgs()[<span class="hljs-number">1</span>];

        <span class="hljs-comment">// è®°å½•æ“ä½œæ—¥å¿—</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">operation</span> <span class="hljs-operator">=</span> ms.getId();
        <span class="hljs-type">String</span> <span class="hljs-variable">operator</span> <span class="hljs-operator">=</span> getCurrentUser();
        <span class="hljs-type">Date</span> <span class="hljs-variable">operateTime</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();

        System.out.println(<span class="hljs-string">"æ“ä½œäºº: "</span> + operator);
        System.out.println(<span class="hljs-string">"æ“ä½œæ—¶é—´: "</span> + operateTime);
        System.out.println(<span class="hljs-string">"æ“ä½œç±»å‹: "</span> + operation);
        System.out.println(<span class="hljs-string">"æ“ä½œæ•°æ®: "</span> + parameter);

        <span class="hljs-comment">// æ‰§è¡Œç›®æ ‡æ–¹æ³•</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> invocation.proceed();

        <span class="hljs-comment">// è®°å½•æ“ä½œç»“æœ</span>
        System.out.println(<span class="hljs-string">"å½±å“è¡Œæ•°: "</span> + result);

        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">getCurrentUser</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// è·å–å½“å‰ç™»å½•ç”¨æˆ·</span>
        <span class="hljs-keyword">return</span> SecurityContextHolder.getCurrentUser().getUsername();
    }
}
</code></pre>
<h3 data-id="heading-28">ä¸ƒã€æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-29">7.1 æ’ä»¶è®¾è®¡åŸåˆ™</h4>
<ol>
<li><strong>æœ€å°ä¾µå…¥</strong>ï¼šå°½é‡ä¸ä¿®æ”¹åŸæœ‰é€»è¾‘</li>
<li><strong>å¯é…ç½®æ€§</strong>ï¼šé€šè¿‡å±æ€§é…ç½®å¼€å…³</li>
<li><strong>æ€§èƒ½è€ƒè™‘</strong>ï¼šé¿å…åœ¨æ’ä»¶ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œ</li>
<li><strong>å¼‚å¸¸å¤„ç†</strong>ï¼šå¦¥å–„å¤„ç†å¼‚å¸¸ï¼Œé¿å…å½±å“æ­£å¸¸æµç¨‹</li>
<li><strong>æ—¥å¿—è®°å½•</strong>ï¼šè®°å½•å…³é”®æ“ä½œæ—¥å¿—</li>
</ol>
<h4 data-id="heading-30">7.2 æ€§èƒ½ä¼˜åŒ–</h4>
<ol>
<li><strong>å‡å°‘åå°„ä½¿ç”¨</strong>ï¼šç¼“å­˜Field/Methodå¯¹è±¡</li>
<li><strong>é¿å…å¤æ‚è®¡ç®—</strong>ï¼šæ’ä»¶é€»è¾‘è¦ç®€å•é«˜æ•ˆ</li>
<li><strong>ä½¿ç”¨ç¼“å­˜</strong>ï¼šç¼“å­˜å¸¸ç”¨æ•°æ®</li>
<li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šæ—¥å¿—ç­‰æ“ä½œå¼‚æ­¥æ‰§è¡Œ</li>
</ol>
<h4 data-id="heading-31">7.3 å¸¸è§é—®é¢˜è§£å†³</h4>
<h5 data-id="heading-32">é—®é¢˜1ï¼šæ’ä»¶ä¸ç”Ÿæ•ˆ</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŸå› ï¼š@Signatureé…ç½®é”™è¯¯</span>
<span class="hljs-comment">// é”™è¯¯ï¼šæ–¹æ³•ç­¾åä¸åŒ¹é…</span>
<span class="hljs-meta">@Signature(type = Executor.class,
           method = "query",
           args = {MappedStatement.class, Object.class})</span> <span class="hljs-comment">// ç¼ºå°‘å‚æ•°</span>

<span class="hljs-comment">// æ­£ç¡®ï¼šå®Œæ•´çš„æ–¹æ³•ç­¾å</span>
<span class="hljs-meta">@Signature(type = Executor.class,
           method = "query",
           args = {MappedStatement.class, Object.class, RowBounds.class, ResultHandler.class})</span>
</code></pre>
<h5 data-id="heading-33">é—®é¢˜2ï¼šä¿®æ”¹SQLå¤±è´¥</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŸå› ï¼šç›´æ¥ä¿®æ”¹sqlå­—æ®µä¸ç”Ÿæ•ˆ</span>
boundSql.setSql(newSql); <span class="hljs-comment">// BoundSqlæ²¡æœ‰setSqlæ–¹æ³•</span>

<span class="hljs-comment">// æ­£ç¡®ï¼šä½¿ç”¨åå°„ä¿®æ”¹</span>
<span class="hljs-type">Field</span> <span class="hljs-variable">field</span> <span class="hljs-operator">=</span> boundSql.getClass().getDeclaredField(<span class="hljs-string">"sql"</span>);
field.setAccessible(<span class="hljs-literal">true</span>);
field.set(boundSql, newSql);
</code></pre>
<h5 data-id="heading-34">é—®é¢˜3ï¼šæ’ä»¶é¡ºåºæ··ä¹±</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å»ºè®®ï¼šæŒ‰æ‰§è¡Œé¡ºåºé…ç½® --&gt;</span>
<span class="hljs-comment">&lt;!-- åˆ†é¡µæ’ä»¶åº”è¯¥å…ˆæ‰§è¡Œ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">plugin</span> <span class="hljs-attr">interceptor</span>=<span class="hljs-string">"PageInterceptor"</span>/&gt;</span>

<span class="hljs-comment">&lt;!-- æ•°æ®æƒé™æ’ä»¶åæ‰§è¡Œ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">plugin</span> <span class="hljs-attr">interceptor</span>=<span class="hljs-string">"DataPermissionPlugin"</span>/&gt;</span>
</code></pre>
<h4 data-id="heading-35">7.4 æ’ä»¶å¼€å‘æ¨¡æ¿</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ’ä»¶å¼€å‘æ¨¡æ¿
 */</span>
<span class="hljs-meta">@Intercepts({
    @Signature(type = Executor.class,
               method = "query",
               args = {MappedStatement.class, Object.class, RowBounds.class, ResultHandler.class})
})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TemplatePlugin</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Interceptor</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(TemplatePlugin.class);

    <span class="hljs-comment">// é…ç½®å±æ€§</span>
    <span class="hljs-keyword">private</span> String configProperty;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">intercept</span><span class="hljs-params">(Invocation invocation)</span> <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-comment">// 1. å‰ç½®å¤„ç†</span>
        <span class="hljs-type">Object</span> <span class="hljs-variable">target</span> <span class="hljs-operator">=</span> invocation.getTarget();
        <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> invocation.getMethod();
        Object[] args = invocation.getArgs();

        logger.debug(<span class="hljs-string">"Before intercept: {}"</span>, method.getName());

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 2. æ‰§è¡Œç›®æ ‡æ–¹æ³•</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> invocation.proceed();

            <span class="hljs-comment">// 3. åç½®å¤„ç†</span>
            logger.debug(<span class="hljs-string">"After intercept: {}"</span>, method.getName());

            <span class="hljs-keyword">return</span> result;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// 4. å¼‚å¸¸å¤„ç†</span>
            logger.error(<span class="hljs-string">"Plugin error"</span>, e);
            <span class="hljs-keyword">throw</span> e;
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">plugin</span><span class="hljs-params">(Object target)</span> {
        <span class="hljs-keyword">return</span> Plugin.wrap(target, <span class="hljs-built_in">this</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setProperties</span><span class="hljs-params">(Properties properties)</span> {
        <span class="hljs-built_in">this</span>.configProperty = properties.getProperty(<span class="hljs-string">"configProperty"</span>, <span class="hljs-string">"defaultValue"</span>);
        logger.info(<span class="hljs-string">"Plugin initialized with property: {}"</span>, configProperty);
    }
}
</code></pre>
<h3 data-id="heading-36">å…«ã€æ€»ç»“</h3>
<p>MyBatisçš„æ’ä»¶æ¨¡å—æä¾›äº†å¼ºå¤§çš„æ‰©å±•èƒ½åŠ›ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥åœ¨ä¸ä¿®æ”¹æºç çš„æƒ…å†µä¸‹å¢å¼ºæ¡†æ¶åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-37">æ ¸å¿ƒè¦ç‚¹</h4>
<ol>
<li><strong>Interceptoræ¥å£</strong>ï¼šå®šä¹‰æ’ä»¶çš„æ ¸å¿ƒæ¥å£</li>
<li><strong>å››å¤§æ‹¦æˆªç‚¹</strong>ï¼šExecutorã€StatementHandlerã€ParameterHandlerã€ResultSetHandler</li>
<li><strong>åŠ¨æ€ä»£ç†</strong>ï¼šåŸºäºJDKåŠ¨æ€ä»£ç†å®ç°</li>
<li><strong>è´£ä»»é“¾æ¨¡å¼</strong>ï¼šå¤šä¸ªæ’ä»¶å½¢æˆè´£ä»»é“¾</li>
<li><strong>åº”ç”¨åœºæ™¯</strong>ï¼šåˆ†é¡µã€ç›‘æ§ã€æƒé™ã€åŠ å¯†ã€æ—¥å¿—ç­‰</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é‡ç£…ï¼å¾®ä¿¡å°ç¨‹åºAIå…è´¹æ‰¶æŒï¼šé›¶æˆæœ¬å¼€å‘+å˜ç°å…¨æ‰“é€š]]></title>    <link>https://juejin.cn/post/7591728734983127067</link>    <guid>https://juejin.cn/post/7591728734983127067</guid>    <pubDate>2026-01-05T16:44:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591728734983127067" data-draft-id="7591719013488443430" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é‡ç£…ï¼å¾®ä¿¡å°ç¨‹åºAIå…è´¹æ‰¶æŒï¼šé›¶æˆæœ¬å¼€å‘+å˜ç°å…¨æ‰“é€š"/> <meta itemprop="keywords" content="å¾®ä¿¡å°ç¨‹åº"/> <meta itemprop="datePublished" content="2026-01-05T16:44:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="codeteenager"/> <meta itemprop="url" content="https://juejin.cn/user/571401777718408"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é‡ç£…ï¼å¾®ä¿¡å°ç¨‹åºAIå…è´¹æ‰¶æŒï¼šé›¶æˆæœ¬å¼€å‘+å˜ç°å…¨æ‰“é€š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/571401777718408/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    codeteenager
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T16:44:53.000Z" title="Mon Jan 05 2026 16:44:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å¼•è¨€ï¼šAIåº”ç”¨çˆ†å‘æœŸï¼Œå°ç¨‹åºæˆä¸ºåˆ›æ„å­µåŒ–æ–°é˜µåœ°</h2>
<p>éšç€AIå¤§æ¨¡å‹æŠ€æœ¯çš„æ™®åŠï¼Œè¶Šæ¥è¶Šå¤šåˆ›ä½œè€…æ¸´æœ›å°†åˆ›æ„è½¬åŒ–ä¸ºå®é™…åº”ç”¨ã€‚å¾®ä¿¡å°ç¨‹åºé¡ºåŠ¿æ¨å‡ºã€ŒAIåº”ç”¨åŠçº¿ä¸Šå·¥å…·å°ç¨‹åºæˆé•¿è®¡åˆ’ã€ï¼Œä»¥å…¨å‘¨æœŸé›¶æˆæœ¬æ‰¶æŒä½“ç³»ï¼ŒåŠ©åŠ›å¼€å‘è€…ä»0åˆ°1æ­å»ºAIå°ç¨‹åºï¼Œå†ä»1åˆ°100å®ç°å•†ä¸šå¢é•¿ã€‚æ— è®ºä½ æ˜¯ä¸ªäººå¼€å‘è€…è¿˜æ˜¯ä¼ä¸šå›¢é˜Ÿï¼Œåªè¦èšç„¦è™šæ‹ŸæœåŠ¡é¢†åŸŸï¼Œå°±èƒ½äº«å—å…¨å¹´å…è´¹èµ„æºä¸æµé‡çº¢åˆ©ï¼Œå¼€å¯AIåº”ç”¨å¼€å‘æ–°å¾ç¨‹ã€‚</p>
<h2 data-id="heading-1">äºŒã€å…­å¤§æ ¸å¿ƒæ”¯æŒä½“ç³»ï¼šå…¨æµç¨‹èµ‹èƒ½ï¼Œè®©å¼€å‘ä¸å˜ç°æ›´ç®€å•</h2>
<h3 data-id="heading-2">ï¼ˆä¸€ï¼‰å¼€å‘ä¾§ï¼šæŠ€æœ¯èµ„æºæ‹‰æ»¡ï¼Œé™ä½å¯åŠ¨é—¨æ§›</h3>
<h4 data-id="heading-3">1. å…è´¹äº‘å¼€å‘èµ„æºï¼šè½»ç›ˆèµ·æ­¥ï¼Œä¸“æ³¨æ ¸å¿ƒåŠŸèƒ½</h4>
<p>æ–°å¼€å‘è€…å¯å…è´¹åˆ›å»ºä¸ªäººç‰ˆäº‘å¼€å‘ç¯å¢ƒï¼Œäº«å—6ä¸ªæœˆæœ‰æ•ˆæœŸï¼Œæ¶µç›–æ•°æ®åº“ã€äº‘å‡½æ•°ç­‰å®Œå¤‡åç«¯èƒ½åŠ›ï¼Œæ”¯æŒæ— ç¼å¯¹æ¥AIå¤§æ¨¡å‹ä¸æ™ºèƒ½Agentï¼›å·²æœ‰ç¯å¢ƒçš„å¼€å‘è€…å¯é¢†å–å¤§é¢æŠµæ‰£åˆ¸ï¼Œé™ä½é•¿æœŸè¿è¥æˆæœ¬ã€‚æ— éœ€è‡ªå»ºæœåŠ¡å™¨ï¼Œå¿«é€Ÿæ­å»ºç¨³å®šåå°ï¼Œè®©æŠ€æœ¯å°ç™½ä¹Ÿèƒ½è½»æ¾ä¸Šæ‰‹ã€‚</p>
<h4 data-id="heading-4">2. å…è´¹AIç®—åŠ›æ”¯æŒï¼šè…¾è®¯æ··å…ƒå¤§æ¨¡å‹åŠ©åŠ›åˆ›æ–°</h4>
<p>æ¥å…¥è…¾è®¯æ——èˆ°çº§æ–‡ç”Ÿæ–‡æ¨¡å‹ã€Œæ··å…ƒ2.0ã€åŠå¤šæ¨¡æ€æ–‡ç”Ÿå›¾æ¨¡å‹ï¼ˆ1äº¿Tokené¢åº¦+1ä¸‡å¼ æ–‡ç”Ÿå›¾æƒç›Šï¼‰ï¼Œåç»­æ–°æ¨¡å‹ä¸Šæ¶å¯ç›´æ¥è°ƒç”¨ã€‚æ— è®ºæ˜¯æ„å»ºæ™ºèƒ½å†™ä½œåŠ©æ‰‹ã€AIå¯¹è¯æœºå™¨äººï¼Œè¿˜æ˜¯å›¾åƒç”Ÿæˆå·¥å…·ï¼Œå‡å¯å…è´¹ä½¿ç”¨è¡Œä¸šé¡¶å°–ç®—åŠ›ï¼Œèšç„¦åŠŸèƒ½åˆ›æ–°è€Œéåº•å±‚æŠ€æœ¯ç ”å‘ã€‚</p>
<h3 data-id="heading-5">ï¼ˆäºŒï¼‰è¿è¥ä¾§ï¼šæ•°æ®é©±åŠ¨å¢é•¿ï¼Œæµé‡ç²¾å‡†è§¦è¾¾</h3>
<h4 data-id="heading-6">1. å…è´¹ä¸“ä¸šæ•°æ®åˆ†æï¼šWeåˆ†æä¸“ä¸šç‰ˆåŠ©åŠ›æ™ºèƒ½è¿­ä»£</h4>
<p>å…è´¹å¼€æ”¾Weåˆ†æä¸“ä¸šç‰ˆ1å¹´æƒé™ï¼Œæ·±åº¦è¿½è¸ªç”¨æˆ·è¡Œä¸ºã€ç•™å­˜ç‡ã€è½¬åŒ–è·¯å¾„ç­‰æ ¸å¿ƒæ•°æ®ï¼Œé€šè¿‡ç”¨æˆ·ç”»åƒä¸åœºæ™¯åˆ†æä¼˜åŒ–äº§å“è®¾è®¡ï¼Œè®©æ¯ä¸€æ¬¡è¿­ä»£éƒ½æœ‰æ•°æ®æ”¯æ’‘ï¼Œé¿å…ç›²ç›®è¯•é”™ã€‚</p>
<h4 data-id="heading-7">2. å®˜æ–¹æµé‡æ¿€åŠ±ï¼šå¤šå…¥å£æ›å…‰ï¼Œä¼˜è´¨äº§å“ä¸è¢«åŸ‹æ²¡</h4>
<p>ä¼˜ç§€å°ç¨‹åºå¯è·å¾—ã€Œå¾®ä¿¡-å‘ç°-å°ç¨‹åºã€ä¸“å±æ¨èä½ï¼Œç²¾å‡†è§¦è¾¾äº¿çº§ç”¨æˆ·ï¼›å…¬ä¼—å·å‘å¸ƒå°ç¨‹åºå†…å®¹æ—¶æ·»åŠ #æ¥å¾®ä¿¡åšä¸ªå°ç¨‹åº#è¯é¢˜ï¼Œå³æœ‰æœºä¼šè§£é”å…¬åŸŸæµé‡æ‰¶æŒï¼Œé€šè¿‡ç¤¾äº¤è£‚å˜å¿«é€Ÿç ´åœˆã€‚</p>
<h3 data-id="heading-8">ï¼ˆä¸‰ï¼‰å˜ç°ä¾§ï¼šå•†ä¸šåŒ–é—­ç¯æ‰“é€šï¼Œç›ˆåˆ©æ›´é¡ºç•…</h3>
<h4 data-id="heading-9">1. æ— é—¨æ§›å¹¿å‘Šæ¥å…¥ï¼šå…å¼€å‘æ™ºèƒ½æ¨¡å¼ï¼Œå®æ—¶é¢„è§ˆä¸Šçº¿</h4>
<p>æ”¯æŒã€Œå…å¼€å‘æ™ºèƒ½æ¥å…¥ã€ï¼Œç³»ç»Ÿè‡ªåŠ¨åˆ†æå°ç¨‹åºé¡µé¢ï¼Œåœ¨åˆé€‚ä½ç½®æ™ºèƒ½æ¨èå¹¿å‘Šä½ï¼Œå¼€å‘è€…å¯å®æ—¶é¢„è§ˆæ•ˆæœå¹¶ä¸€é”®ä¸Šçº¿ï¼Œæ— éœ€å¤æ‚å¼€å‘å³å¯å¼€å¯å¹¿å‘Šå˜ç°ï¼Œä¸­å°å›¢é˜Ÿä¹Ÿèƒ½è½»æ¾å®ç°æµé‡è½¬åŒ–ã€‚</p>
<h4 data-id="heading-10">2. å…¨ç»ˆç«¯è™šæ‹Ÿæ”¯ä»˜ä¼˜æƒ ï¼šè´¹ç‡é™ä½ï¼Œå•†ä¸šè¿è½¬æ›´é«˜æ•ˆ</h4>
<p>è¦†ç›–å®‰å“ã€iOSã€é¸¿è’™å…¨ç»ˆç«¯çš„è™šæ‹Ÿæ”¯ä»˜ä¸ä¼šå‘˜è®¢é˜…èƒ½åŠ›ï¼Œäº«å—é™æ—¶ä¼˜æƒ è´¹ç‡ï¼Œæ‰“ç ´å¹³å°å£å’ã€‚æ— è®ºæ˜¯çŸ¥è¯†ä»˜è´¹ã€å·¥å…·è®¢é˜…è¿˜æ˜¯è™šæ‹Ÿå•†å“äº¤æ˜“ï¼Œå‡èƒ½ä»¥æ›´ä½æˆæœ¬æ„å»ºå•†ä¸šé—­ç¯ï¼Œæå‡ç›ˆåˆ©ç©ºé—´ã€‚</p>
<h2 data-id="heading-11">ä¸‰ã€ç”³è¯·æŒ‡å—ï¼šä¸‰æ­¥åŠ å…¥ï¼Œå…¨å¹´ç¦åˆ©å³åˆ»è§£é”</h2>
<h3 data-id="heading-12">ï¼ˆä¸€ï¼‰å‡†å…¥æ¡ä»¶ï¼šèšç„¦è™šæ‹ŸæœåŠ¡ï¼Œç±»ç›®æ¸…æ™°æ˜ç¡®</h3>
<ul>
<li>ã€Œç±»ç›®è¦æ±‚ã€ï¼šä»…é™æ–‡å¨±ã€å·¥å…·ã€ç¤¾äº¤ã€æ·±åº¦åˆæˆã€èµ„è®¯è™šæ‹Ÿç±»ç›®ï¼Œæ’é™¤çº¿ä¸‹æœåŠ¡ç±»ç›®ï¼ˆå¦‚é¤é¥®ã€é›¶å”®ï¼‰ï¼Œä¸“æ³¨çº¿ä¸Šåœºæ™¯å¼€å‘ã€‚</li>
<li>ã€Œä¸»ä½“è¦æ±‚ã€ï¼šä¸ªäººå¼€å‘è€…ä¸ä¼ä¸šä¸»ä½“å‡å¯å‚ä¸ï¼Œéœ€ç¡®ä¿å°ç¨‹åºä¸»ä½“ä¿¡æ¯å®Œå¤‡ï¼ˆå®Œæˆå®åè®¤è¯æˆ–ä¼ä¸šè®¤è¯ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-13">ï¼ˆäºŒï¼‰æ´»åŠ¨æ—¶é—´ï¼š2026å…¨å¹´æœ‰æ•ˆï¼Œæ—©åŠ å…¥æ—©å—ç›Š</h3>
<p>å³æ—¥èµ·è‡³2026å¹´12æœˆ31æ—¥ï¼Œæ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å¼€å‘è€…å‡å¯ç”³è¯·ï¼Œèµ„æºé¢åº¦ä¸æµé‡æ¿€åŠ±æŒ‰è‡ªç„¶å¹´æœ‰æ•ˆæœŸåˆ†é…ï¼Œå»ºè®®å°½å¿«å¯åŠ¨å¼€å‘ï¼Œå……åˆ†åˆ©ç”¨å…¨å¹´æ‰¶æŒæœŸã€‚</p>
<h3 data-id="heading-14">ï¼ˆä¸‰ï¼‰ç”³è¯·è·¯å¾„ï¼šåå°ä¸€é”®æäº¤ï¼Œå¿«é€Ÿå®¡æ ¸</h3>
<p>ç™»å½•ã€Œå¾®ä¿¡å°ç¨‹åºåå°-è¡Œä¸šèƒ½åŠ›-AIå°ç¨‹åºæˆé•¿è®¡åˆ’ã€é¡µé¢ï¼Œæ–°å¼€å‘è€…å®Œæˆè´¦å·è®¤è¯åå³å¯æäº¤ç”³è¯·ï¼Œå®¡æ ¸é€šè¿‡åå®æ—¶å¼€é€šèµ„æºæƒé™ï¼Œå…¨ç¨‹çº¿ä¸ŠåŒ–æ“ä½œï¼Œæ— éœ€é¢å¤–ææ–™ã€‚</p>
<h2 data-id="heading-15">å››ã€ä¸ºä»€ä¹ˆé€‰æ‹©å°ç¨‹åºç”Ÿæ€ï¼Ÿä¸‰å¤§ä¼˜åŠ¿æ‰“é€ AIåº”ç”¨æœ€ä¼˜è§£</h2>
<h3 data-id="heading-16">ï¼ˆä¸€ï¼‰è½»é‡åŒ–å¼€å‘ï¼šå‘¨æœŸçŸ­ã€ä¸Šçº¿å¿«ï¼Œå¿«é€ŸéªŒè¯åˆ›æ„</h3>
<p>ç›¸æ¯”AppåŠ¨è¾„æ•°æœˆçš„å¼€å‘å‘¨æœŸï¼Œå°ç¨‹åºä¾æ‰˜å¾®ä¿¡æˆç†Ÿæ¡†æ¶ï¼Œå¼€å‘å‘¨æœŸå¯ç¼©çŸ­è‡³æ•°å‘¨ï¼Œæ”¯æŒã€Œè¾¹å¼€å‘è¾¹è¿­ä»£ã€ï¼Œè®©åˆ›æ„å¿«é€Ÿè½åœ°æµ‹è¯•ï¼ŒæŠ¢å å¸‚åœºå…ˆæœºã€‚</p>
<h3 data-id="heading-17">ï¼ˆäºŒï¼‰ç¤¾äº¤è£‚å˜åŸºå› ï¼šå¾®ä¿¡ç”Ÿæ€å†…å¤©ç„¶ä¼ æ’­ä¼˜åŠ¿</h3>
<p>èƒŒé 10äº¿+ç”¨æˆ·çš„å¾®ä¿¡ç”Ÿæ€ï¼Œæ”¯æŒèŠå¤©è½¬å‘ã€æœ‹å‹åœˆåˆ†äº«ã€å…¬ä¼—å·å…³è”ç­‰å¤šç»´åº¦ç¤¾äº¤åˆ†å‘ï¼Œä¼˜è´¨å°ç¨‹åºå¯é€šè¿‡ç”¨æˆ·å£ç¢‘å®ç°ä½æˆæœ¬è£‚å˜ï¼Œè½¬åŒ–ç‡è¿œé«˜äºä¼ ç»Ÿæµé‡æ¸ é“ã€‚</p>
<h3 data-id="heading-18">ï¼ˆä¸‰ï¼‰æˆç†Ÿæ¡ˆä¾‹éªŒè¯ï¼šæ ‡æ†äº§å“å·²è·‘é€šå•†ä¸šæ¨¡å‹</h3>
<p>å·²æœ‰ã€ŠçŒœç›ã€‹ï¼ˆAIé—®ç­”æ¸¸æˆï¼‰ã€ã€Šä¼ å›¾åŠ ç”»æ¡†ã€‹ï¼ˆAIå›¾åƒç¾åŒ–ï¼‰ã€ã€Šå†™ä½œé¹…ã€‹ï¼ˆæ™ºèƒ½å†™ä½œåŠ©æ‰‹ï¼‰ç­‰å°ç¨‹åºé€šè¿‡æˆé•¿è®¡åˆ’èµ„æºï¼Œå®ç°ç”¨æˆ·é‡ä¸æ”¶å…¥åŒå¢é•¿ï¼Œè¯æ˜è™šæ‹ŸæœåŠ¡ç±»å°ç¨‹åºåœ¨å¾®ä¿¡ç”Ÿæ€çš„å¯è¡Œæ€§ä¸ç›ˆåˆ©æ½œåŠ›ã€‚</p>
<h2 data-id="heading-19">äº”ã€ç»“è¯­ï¼šç°åœ¨åŠ å…¥ï¼Œå¼€å¯AIåº”ç”¨åˆ›ä¸šæ–°å¾ç¨‹</h2>
<p>ä»å…è´¹äº‘èµ„æºåˆ°é¡¶å°–ç®—åŠ›ï¼Œä»æµé‡æ‰¶æŒåˆ°æ— é—¨æ§›å˜ç°ï¼Œå¾®ä¿¡å°ç¨‹åºAIæˆé•¿è®¡åˆ’çœŸæ­£å®ç°äº†ã€Œé›¶æˆæœ¬å¯åŠ¨ã€ã€‚æ— è®ºä½ æ˜¯æƒ³å°†AIåˆ›æ„è½åœ°çš„ç‹¬ç«‹å¼€å‘è€…ï¼Œè¿˜æ˜¯å¯»æ±‚ä¸šåŠ¡æ‹“å±•çš„ä¼ä¸šå›¢é˜Ÿï¼Œ2026å¹´éƒ½æ˜¯å¸ƒå±€AIå°ç¨‹åºçš„é»„é‡‘æ—¶æœºã€‚ç‚¹å‡»åå°ç”³è¯·ï¼Œç«‹å³è§£é”å…¨å¹´ä¸“å±ç¦åˆ©ï¼Œè®©ä½ çš„åˆ›æ„åœ¨å¾®ä¿¡ç”Ÿæ€ä¸­ç”Ÿæ ¹å‘èŠ½ï¼Œæœªæ¥æ›´æœ‰æŒç»­èµ„æºåŠ ç ï¼Œå…±åŒæ„å»ºç¹è£çš„AIåº”ç”¨æ–°ç”Ÿæ€ï¼</p>
<p>ã€ç«‹å³è¡ŒåŠ¨ã€‘ç™»å½•å¾®ä¿¡å°ç¨‹åºåå°ï¼Œæœç´¢ã€ŒAIå°ç¨‹åºæˆé•¿è®¡åˆ’ã€ï¼Œå¼€å¯ä½ çš„é›¶æˆæœ¬AIå¼€å‘ä¹‹æ—…ï¼</p>
<p><strong>çœ‹å®Œè§‰å¾—å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©åˆ«å¿˜è®°å…³æ³¨å‘¦</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8bcf60f0963b4799bf58734c5b0bc00e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgY29kZXRlZW5hZ2Vy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768236293&amp;x-signature=jzt8596b9hCMV%2FbeRqRO32drYSk%3D" alt="qrcode_for_gh_55899dc27008_1280.jpg" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agenic Aiæ¶æ„]]></title>    <link>https://juejin.cn/post/7591715454134534207</link>    <guid>https://juejin.cn/post/7591715454134534207</guid>    <pubDate>2026-01-05T17:55:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591715454134534207" data-draft-id="7591730714140262442" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agenic Aiæ¶æ„"/> <meta itemprop="keywords" content="LLM,OpenAI,AIGC"/> <meta itemprop="datePublished" content="2026-01-05T17:55:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Shawn_Shawn"/> <meta itemprop="url" content="https://juejin.cn/user/1855631358965384"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agenic Aiæ¶æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1855631358965384/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Shawn_Shawn
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T17:55:53.000Z" title="Mon Jan 05 2026 17:55:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç°ä»£åŒ–æ™ºèƒ½ä½“Ai</h2>
<h3 data-id="heading-1">åˆ†å±‚æ¶æ„</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b79b4ef2396a43b5ae05cea26467417b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hhd25fU2hhd24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768240553&amp;x-signature=%2Bslk7F9rmJ4kBVUkDeDN6ckT9FE%3D" alt="" loading="lazy"/></p>
<p><strong>åŸºç¡€è®¾æ–½å±‚ï¼š</strong> Gpu/Tpu Cloudäº‘ç®—åŠ›æ”¯æŒï¼Œæ•°æ®ä»“åº“ï¼Œè´Ÿè½½å‡è¡¡ï¼Œæ–‡ä»¶å­˜å‚¨ç³»ç»Ÿï¼Œå·¥ä½œæµè°ƒåº¦ç³»ç»Ÿï¼Œç›‘æ§è¿ç»´ç³»ç»Ÿç­‰</p>
<p><strong>Agentç½‘ç»œå±‚ï¼š</strong> åŒ…å«è‡ªä¸»è§„åˆ’Agentï¼Œé€šä¿¡åè®®ï¼Œå‘é‡æ•°æ®åº“ï¼ŒçŠ¶æ€æœºç»´æŠ¤ï¼Œå·¥å…·ä½¿ç”¨ï¼Œèº«ä»½è®¤è¯æƒé™æ§åˆ¶ï¼Œå¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼ŒçŸ­æœŸ/é•¿æœŸè®°å¿†çš„ç®¡ç†ç­‰ã€‚</p>
<p><strong>åè®®å±‚ï¼š</strong> æ¯”è¾ƒè€³ç†Ÿèƒ½è¯¦çš„æ˜¯mcp , A2A, Fcpã€‚è¿™ä¸€å±‚ä¸»è¦å®šä¹‰å·¥å…·è°ƒç”¨/ç¼–å†™çš„è§„èŒƒï¼Œæ™ºèƒ½ä½“é€šä¿¡/ä½¿ç”¨è§„èŒƒã€‚</p>
<p><strong>çŸ¥è¯†å¢å¼ºå±‚ï¼š</strong> è¿™ä¸€å±‚ä¸»è¦æ˜¯åšæ•°æ®/çŸ¥è¯†çš„å¢å¼ºï¼Œä¾›å¤§æ¨¡å‹å­¦ä¹ /è·å–æ–°æ•°æ®/çŸ¥è¯†ï¼Œä¸»è¦åŒ…å«Ragï¼Œå·¥å…·è°ƒç”¨ï¼ŒçŸ¥è¯†åº“å¢å¼ºï¼Œè”ç½‘æœç´¢/çˆ¬è™«ï¼Œæ’ä»¶é›†æˆç­‰åŠŸèƒ½ã€‚</p>
<p><strong>è®¤çŸ¥ä¸æ¨ç†å±‚ï¼š</strong> ç›®æ ‡ç®¡ç†ï¼Œåˆ¶å®šæ‰§è¡Œè®¡åˆ’ï¼Œè¿›è¡Œå†³ç­–ï¼Œå¾ªç¯åé¦ˆï¼Œè‡ªæˆ‘æå‡ã€‚éœ€è¦ç”¨åˆ°å¼ºåŒ–å­¦ä¹ ç­‰ç›¸å…³æŠ€æœ¯äº†ã€‚</p>
<p><strong>è®°å¿†ä¸ä¸ªæ€§åŒ–å±‚ï¼š</strong> ä¸»è¦ä½œç”¨äºAgentçš„é•¿æœŸè®°å¿†ï¼Œæå–ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯ï¼Œå…´è¶£åå¥½ï¼Œè¡Œä¸ºåå¥½ä»¥åŠå†å²å¯¹è¯ç­‰å½¢æˆç”¨æˆ·ç”»åƒï¼Œæ›´å¥½åœ°åšåˆ°åƒäººåƒé¢ã€‚</p>
<p><strong>åº”ç”¨å±‚ï¼š</strong> è¿™ä¸€å±‚å°±æ˜¯å„ç§å„æ ·çš„åº”ç”¨Agentï¼Œæ¯”å¦‚deepresearch agentï¼Œå¹³å°ç±»çš„agentï¼ˆæ¯”å¦‚ç‰©æµï¼Œå®¢æœï¼Œè®¢å•ç­‰ï¼‰ã€‚</p>
<p><strong>è¿ç»´ä¸æ²»ç†å±‚ï¼š</strong> æ—¥å¿—å®¡è®¡ä¸ç›‘æ§ç»Ÿè®¡ï¼ˆç»Ÿè®¡æ¨¡å‹/å·¥å…·è°ƒç”¨é‡ï¼Œè€—æ—¶ï¼Œtokenæ¶ˆè€—é‡ç­‰ï¼Œèµ„æºcpuï¼Œå†…å­˜ï¼Œç½‘ç»œï¼Œç£ç›˜ç­‰ä½¿ç”¨æƒ…å†µï¼‰ï¼ŒCI/CDï¼Œå®‰å…¨ç­‰ã€‚è¿™ä¸€å±‚æ˜¯æ™ºèƒ½ä½“ç³»ç»Ÿèµ°å‘ç”Ÿäº§ç¯å¢ƒçš„å…³é”®ä¿éšœï¼Œå†³å®šäº†ç³»ç»Ÿçš„å¯é æ€§å’Œå¯æŒç»­æ€§ã€‚</p>
<h3 data-id="heading-2">æŠ€æœ¯åˆ†å±‚</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6a8ce8e10f104b77a06dc4f73ca9ab37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hhd25fU2hhd24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768240553&amp;x-signature=KHKHOS4mZbYRvB3Y%2BQyuBZZs9eg%3D" alt="" loading="lazy"/></p>

































<table><thead><tr><th><strong>æŠ€æœ¯æ ˆå±‚çº§ (Technology Stack)</strong></th><th><strong>å®šä¹‰ (Definition)</strong></th></tr></thead><tbody><tr><td><strong>åº”ç”¨å±‚</strong> (Applications layer)</td><td>ç”¨äºç”Ÿæˆé’ˆå¯¹å„ç§é—®é¢˜å’Œæç¤ºçš„è‡ªç„¶è¯­è¨€å›å¤çš„åº”ç”¨ç¨‹åºï¼Œä¾‹å¦‚<strong>èŠå¤©æœºå™¨äºº</strong>å’Œ<strong>ç¿»è¯‘å™¨</strong>ã€‚ä½†æ˜¯ï¼Œ<strong>çœŸå®æ€§</strong>å¯¹äºæœ€å¤§é™åº¦åœ°å‡å°‘â€œå¹»è§‰â€å¹¶å°†æ¨¡å‹å»ºç«‹åœ¨ç°å®åŸºç¡€ä¸Šè‡³å…³é‡è¦ã€‚</td></tr><tr><td><strong>API å±‚</strong> (API layer)</td><td>é¢å‘<strong>ä¸“ä¸šå¼€å‘è€…</strong>ï¼ˆä½œä¸ºæ„å»ºå„ç§åº”ç”¨ç¨‹åºçš„ Google LLM çš„å…¥å£ç‚¹ï¼‰å’Œ<strong>ä¸šä½™çˆ±å¥½è€…</strong>ï¼ˆMakerSuite åŸå‹è®¾è®¡å·¥å…·ï¼‰çš„ APIã€‚</td></tr><tr><td><strong>å¤§è¯­è¨€æ¨¡å‹ (LLMs) å±‚</strong> (Large Language Model layer)</td><td>é¢„è®­ç»ƒçš„é€šç”¨è¯­è¨€æ¨¡å‹ï¼Œå¯ä»¥é’ˆå¯¹ç‰¹å®šä»»åŠ¡è¿›è¡Œå¾®è°ƒã€‚ æ—¨åœ¨æ‰§è¡Œé€šç”¨çš„è¯­è¨€ä»»åŠ¡ï¼Œå¦‚è¯­è¨€ç¿»è¯‘ã€æ‘˜è¦ç”Ÿæˆæˆ–å¯¹è¯ç”Ÿæˆã€‚</td></tr><tr><td><strong>æœºå™¨å­¦ä¹ åŸºç¡€æ¨¡å‹å±‚</strong> (ML Foundation Model layer)</td><td>é¢„è®­ç»ƒçš„é€šç”¨ã€å¤šåŠŸèƒ½è¯­è¨€æ¨¡å‹ã€‚ å¯ä»¥é’ˆå¯¹å„ç§ä¸‹æ¸¸ NLP ä»»åŠ¡è¿›è¡Œå¾®è°ƒï¼Œä¾‹å¦‚æ–‡æœ¬åˆ†ç±»æˆ–æƒ…æ„Ÿåˆ†æã€‚</td></tr><tr><td><strong>æ¶æ„å±‚</strong> (Architecture layer)</td><td>ä¸€ç§ç”¨äºè‡ªç„¶è¯­è¨€å¤„ç† (NLP) ä»»åŠ¡çš„<strong>ç¥ç»ç½‘ç»œæ¶æ„</strong>ï¼Œå®ƒè§£é”äº†ä¸¤ä¸ªå…³é”®èƒ½åŠ›ï¼š â€¢ <strong>å†³ç­–åˆ¶å®š</strong> (Decision making) â€¢ <strong>æ³¨æ„åŠ›å¹¿åº¦</strong> (Attention span) è¿™å¯ä»¥ç”¨<strong>è‡ªæ³¨æ„åŠ› (Self-attention)</strong> è¿™ä¸€å•ä¸€æ¦‚å¿µæ¥æ¦‚æ‹¬ã€‚</td></tr><tr><td><strong>åŸºç¡€è®¾æ–½å±‚</strong> (Infrastructure layer)</td><td><strong>å¼ é‡å¤„ç†å•å…ƒ (TPU)</strong> æ˜¯ä¸“ä¸ºæ·±åº¦å­¦ä¹ å·¥ä½œè´Ÿè½½è®¾è®¡çš„ï¼Œå¹¶é’ˆå¯¹æ‰§è¡Œç¥ç»ç½‘ç»œä¸­å¸¸ç”¨çš„çŸ©é˜µè¿ç®—è¿›è¡Œäº†ä¼˜åŒ–ã€‚</td></tr></tbody></table>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/207f88d933ef47f899bbfd37563cfdb9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hhd25fU2hhd24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768240553&amp;x-signature=WGh%2F9xWdktTTkAn9my6eKKb9Ck0%3D" alt="" loading="lazy"/></p>
<p>è¿™å¼ å›¾å±•ç¤ºäº†<strong>ç”Ÿæˆå¼ AI (Generative AI) çš„ 6 å±‚æŠ€æœ¯æ ˆ</strong>ï¼Œä»åº•å±‚çš„ç¡¬ä»¶è®¾æ–½ä¸€ç›´åˆ°é¡¶å±‚çš„ç”¨æˆ·åº”ç”¨ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä»ä¸‹å¾€ä¸Šï¼ˆç”±åº•å±‚åˆ°åº”ç”¨å±‚ï¼‰çš„è¯¦ç»†è¯´æ˜ï¼š</p>
<p><strong>åŸºç¡€è®¾æ–½å±‚ï¼š</strong> æä¾›ç®—åŠ›ï¼ŒNVIDIAï¼ˆæ˜¾å¡ï¼‰ã€Google Cloud TPUã€AWSï¼ˆäºšé©¬é€Šäº‘ï¼‰ã€Microsoft Azureã€‚</p>
<p><strong>æ¶æ„å±‚ï¼š</strong> è¿™ä¸€å±‚å®šä¹‰äº†æ¨¡å‹çš„ç»“æ„æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œç›®å‰æœ€ç«çš„ ChatGPT ä¸»è¦æ˜¯åŸºäº <strong>Transformer</strong> æ¶æ„ï¼›ç”»å›¾ AI å¸¸ç”¨ <strong>Diffusion Models</strong>ï¼ˆæ‰©æ•£æ¨¡å‹ï¼‰ã€RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ã€‚</p>
<p><strong>æœºå™¨å­¦ä¹ åŸºç¡€æ¨¡å‹å±‚ï¼š</strong> é¢„è®­ç»ƒçš„é€šç”¨ã€å¤šåŠŸèƒ½è¯­è¨€æ¨¡å‹ã€‚å¯ä»¥è¿›è¡Œå¯¹ç‰¹å®šé¢†åŸŸè¿›è¡Œå¾®è°ƒï¼Œä¾‹å¦‚æ–‡æœ¬åˆ†ç±»æˆ–è€…æƒ…æ„Ÿåˆ†æç­‰ã€‚</p>
<p><strong>å¤§è¯­è¨€æ¨¡å‹å±‚ï¼š</strong> é¢„è®­ç»ƒçš„é€šç”¨è¯­è¨€æ¨¡å‹ï¼Œå¯ä»¥é’ˆå¯¹ç‰¹å®šä»»åŠ¡è¿›è¡Œå¾®è°ƒã€‚æ—¨åœ¨æ‰§è¡Œé€šç”¨çš„è¯­è¨€ä»»åŠ¡ï¼Œå¦‚è¯­è¨€ç¿»è¯‘ã€æ‘˜è¦ç”Ÿæˆæˆ–å¯¹è¯ç”Ÿæˆã€‚</p>
<p><strong>Apiå±‚ï¼š</strong> è®©å¼€å‘è€…èƒ½å¤Ÿæ–¹ä¾¿åœ°è°ƒç”¨æ¨¡å‹èƒ½åŠ›çš„æ¥å£ã€‚åªéœ€è¦é€šè¿‡ API æ¥å£ï¼Œç”¨æˆ·å¯ä»¥ä¸å¤§æ¨¡å‹è¿›è¡Œå¯¹è¯ï¼ŒOpenAI API, Google PaLM API, Azure OpenAI, Hugging Face Inferenceç­‰åŸºæœ¬éƒ½æœ‰Open Apiæä¾›</p>
<p><strong>åº”ç”¨å±‚ï¼š</strong> è¿™ä¸€å±‚å°† AI çš„èƒ½åŠ›åŒ…è£…æˆå¥½ç”¨çš„å·¥å…·ï¼Œæ¯”å¦‚å†™ä»£ç åŠ©æ‰‹ã€èŠå¤©æœºå™¨äººã€æ–‡æ¡ˆç”Ÿæˆå™¨ç­‰ï¼ŒChatGPTï¼ˆèŠå¤©ï¼‰ã€GitHub Copilotï¼ˆå†™ä»£ç ï¼‰ã€Notion AIï¼ˆç¬”è®°å†™ä½œï¼‰ã€Jasperï¼ˆè¥é”€æ–‡æ¡ˆï¼‰ã€Midjourney/Runwayï¼ˆå›¾åƒè§†é¢‘ç”Ÿæˆï¼‰ã€‚</p>
<h3 data-id="heading-3">å¤šAgentæ¨¡å¼</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e37ddcb5e8844b18c01da8975a7633e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2hhd25fU2hhd24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768240553&amp;x-signature=yvuoZw4CUgNUeE%2F0qt61KRtFjNE%3D" alt="" loading="lazy"/></p>
<p><strong>1. é“¾å¼ (Prompt Chaining)</strong></p>
<ul>
<li><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼š <strong>â€œå•è¡Œçº¿â€</strong> ã€‚åƒæ¥åŠ›èµ›ä¸€æ ·ï¼Œä¸€æ­¥æ¥ä¸€æ­¥ï¼Œå‰ä¸€æ­¥çš„è¾“å‡ºæ˜¯åä¸€æ­¥çš„è¾“å…¥ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šæµç¨‹å›ºå®šã€ä¸èƒ½å‡ºé”™çš„æ ‡å‡†åŒ–ä»»åŠ¡ï¼ˆå¦‚ï¼šå†™å¤§çº²â†’å†™æ­£æ–‡â†’æ¶¦è‰²ï¼‰ã€‚</li>
</ul>
<p><strong>2. è·¯ç”±å¼ (Routing)</strong></p>
<ul>
<li><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼š <strong>â€œåˆ†è¯Šå°â€</strong> ã€‚å…ˆçœ‹ç—…ï¼ˆè¯†åˆ«æ„å›¾ï¼‰ï¼Œå†æŒ‚å·ï¼ˆåˆ†æµï¼‰ï¼ŒæŠŠä»»åŠ¡æ´¾ç»™ä¸“é—¨è´Ÿè´£çš„é‚£ä¸ªæ¨¡å‹ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šç”¨æˆ·éœ€æ±‚äº”èŠ±å…«é—¨ï¼Œéœ€è¦åˆ†ç±»å¤„ç†ï¼ˆå¦‚ï¼šå®¢æœç³»ç»Ÿåˆ†æµåˆ°äººå·¥ã€é€€æ¬¾æˆ–æŸ¥è¯¢ï¼‰ã€‚</li>
</ul>
<p><strong>3. å¹¶è¡Œå¼ (Parallelization)</strong></p>
<ul>
<li><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼š <strong>â€œå¤šçº¿ç¨‹â€</strong> ã€‚æŠŠå¤§ä»»åŠ¡æ‹†æˆå‡ ä¸ªäº’ä¸å¹²æ‰°çš„å°ä»»åŠ¡ï¼Œå¤§å®¶åŒæ—¶å¹²ï¼Œæœ€åæŠŠç»“æœæ‹¼èµ·æ¥ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šä»»åŠ¡ä¹‹é—´æ²¡å…³è”ï¼ˆå¦‚ï¼šåŒæ—¶åˆ†ææŸå…¬å¸çš„è‚¡ç¥¨ã€æ–°é—»å’Œè´¢æŠ¥ï¼‰ã€‚</li>
</ul>
<p><strong>4. åä½œå¼ (Orchestrator-workers)</strong></p>
<ul>
<li><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼š <strong>â€œé¡¹ç›®ç»„â€</strong> ã€‚æœ‰ä¸€ä¸ªâ€œåŒ…å·¥å¤´â€ï¼ˆåè°ƒè€…ï¼‰è´Ÿè´£æ‹†è§£ä»»åŠ¡ã€åˆ†æ´¾ç»™ä¸åŒçš„â€œå·¥äººâ€ï¼ˆå­æ¨¡å‹ï¼‰ï¼Œæœ€åæ±‡æ€»æˆæœã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šä»»åŠ¡å¤ªå¤æ‚ï¼Œéœ€è¦ä¸åŒä¸“ä¸šæŠ€èƒ½é…åˆï¼ˆå¦‚ï¼šä¸€ä¸ªè´Ÿè´£æŸ¥èµ„æ–™ï¼Œä¸€ä¸ªè´Ÿè´£å†™ä»£ç ï¼Œä¸€ä¸ªè´Ÿè´£æµ‹è¯•ï¼‰ã€‚</li>
</ul>
<p><strong>5. è¯„ä¼°ä¼˜åŒ–å¼ (Evaluator-optimizer)</strong></p>
<ul>
<li><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼š <strong>â€œæ”¹ç¨¿æ¨¡å¼â€</strong> ã€‚ä¸€ä¸ªè´Ÿè´£å†™ï¼Œä¸€ä¸ªè´Ÿè´£å®¡ã€‚å®¡ä¸è¿‡å°±æ‰“å›é‡å†™ï¼Œç›´åˆ°æ»¡æ„ä¸ºæ­¢ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¯¹è´¨é‡è¦æ±‚æé«˜ï¼Œå®¹é”™ç‡ä½ï¼ˆå¦‚ï¼šç”Ÿæˆä»£ç ã€æ³•å¾‹åˆåŒï¼‰ã€‚</li>
</ul>
<p><strong>6. è§„åˆ’å¼ / è‡ªä¸»æ™ºèƒ½ä½“ (Autonomous Agent)</strong></p>
<ul>
<li><strong>æ ¸å¿ƒé€»è¾‘</strong>ï¼š <strong>â€œè‡ªåŠ¨é©¾é©¶â€</strong> ã€‚ç»™ä¸€ä¸ªå¤§ç›®æ ‡ï¼ŒAI è‡ªå·±æƒ³åŠæ³•æ‹†è§£æ­¥éª¤ã€æ‰§è¡Œï¼Œé‡åˆ°è·¯ä¸é€šå°±è‡ªå·±æ¢æ¡è·¯èµ°ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šç¯å¢ƒåœ¨å˜ã€éœ€è¦å¤šè½®å†³ç­–çš„å¤æ‚ä»»åŠ¡ï¼ˆå¦‚ï¼šè‡ªä¸»å®Œæˆä¸€ä¸ªè½¯ä»¶å¼€å‘é¡¹ç›®ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-4">å‚è€ƒæ–‡çŒ®</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1925989268351874983" target="_blank" title="https://zhuanlan.zhihu.com/p/1925989268351874983" ref="nofollow noopener noreferrer">zhuanlan.zhihu.com/p/192598926â€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2FEvanKirstel%2Fstatus%2F1949512638083289335" target="_blank" title="https://x.com/EvanKirstel/status/1949512638083289335" ref="nofollow noopener noreferrer">x.com/EvanKirstelâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Ftechsurprises.com%2F2023%2F04%2F03%2Fthe-6-layers-of-generative-ai-technology-stack%2F" target="_blank" title="https://techsurprises.com/2023/04/03/the-6-layers-of-generative-ai-technology-stack/" ref="nofollow noopener noreferrer">techsurprises.com/2023/04/03/â€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_54655817%2Farticle%2Fdetails%2F155972130" target="_blank" title="https://blog.csdn.net/qq_54655817/article/details/155972130" ref="nofollow noopener noreferrer">blog.csdn.net/qq_54655817â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026ï¼šå½“ AI éšå…¥å·¥ä½œæµï¼Œä½ å‡†å¤‡å¥½äº†å—ï¼Ÿ -- è‚˜å­çš„ Swift å‘¨æŠ¥ #117]]></title>    <link>https://juejin.cn/post/7591703562134454306</link>    <guid>https://juejin.cn/post/7591703562134454306</guid>    <pubDate>2026-01-05T23:55:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591703562134454306" data-draft-id="7591346773827239962" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026ï¼šå½“ AI éšå…¥å·¥ä½œæµï¼Œä½ å‡†å¤‡å¥½äº†å—ï¼Ÿ  -- è‚˜å­çš„ Swift å‘¨æŠ¥ #117"/> <meta itemprop="keywords" content="Swift,SwiftUI,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-05T23:55:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸œå¡è‚˜å­"/> <meta itemprop="url" content="https://juejin.cn/user/1548526032528727"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026ï¼šå½“ AI éšå…¥å·¥ä½œæµï¼Œä½ å‡†å¤‡å¥½äº†å—ï¼Ÿ  -- è‚˜å­çš„ Swift å‘¨æŠ¥ #117
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1548526032528727/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸œå¡è‚˜å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T23:55:08.000Z" title="Mon Jan 05 2026 23:55:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/658416c61b80437da32faa680e3ddca9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lic5Z2h6IKY5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768262108&amp;x-signature=r13T5uGrDC6t%2FpWJzIDBWgbuUx0%3D" alt="issue117.webp" loading="lazy"/></p>
<h2 data-id="heading-0">2026ï¼šå½“ AI éšå…¥å·¥ä½œæµï¼Œä½ å‡†å¤‡å¥½äº†å—ï¼Ÿ</h2>
<p>å¤§å®¶æ–°å¹´å¥½ï¼åœ¨è¿‡å»çš„å‡ å¹´ä¸­ï¼ŒAI å§‹ç»ˆå æ®ç€ç§‘æŠ€ç•Œæœ€è€€çœ¼çš„ C ä½ã€‚ä½†ç«™åœ¨ 2026 å¹´çš„èµ·ç‚¹å›çœ‹ï¼Œæˆ‘å‘ç°ä¸€ä¸ªæ˜¾è‘—çš„è½¬æŠ˜ï¼šä» 2025 å¹´æœ«å¼€å§‹ï¼Œäººä»¬å¯¹â€œä¸‡äº¿å‚æ•°â€æˆ–â€œæ¦œå•è·‘åˆ†â€çš„ç‹‚çƒ­é€æ¸è¤ªå»ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯å¯¹ AI å·¥ä½œæµæ·±è€•ç»†ä½œçš„å†·é™ä¸å®æˆ˜ã€‚</p>
<p>å¦‚æœè¯´è¿‡å»ä¸¤å¹´å¤§å¤šæ•°äººè¿˜åœ¨å°è¯•å¦‚ä½•ä¸ Chat æœºå™¨äººèŠå¤©ï¼Œé‚£ä¹ˆç°åœ¨ï¼ŒAI å·²ç»é€šè¿‡ CLIã€MCP ä»¥åŠå„ç§ Slashã€Skillã€SubAgentï¼Œå½»åº•æ‰“ç ´äº†å¯¹è¯æ¡†çš„é™åˆ¶ã€‚å¯¹äºæœ‰ç»éªŒçš„å¼€å‘è€…æ¥è¯´ï¼ŒAI å·²ç»ä¸å†æ˜¯ä¸€ä¸ªå¤–éƒ¨å·¥å…·ï¼Œè€Œæ˜¯åƒæ’ä»¶ä¸€æ ·ï¼Œæ¸—é€è¿›ç»ˆç«¯ã€ç¼–è¾‘å™¨ä¹ƒè‡³æ•´ä¸ªæ“ä½œç³»ç»Ÿçš„æ¯ä¸€ä¸ªæ¯›ç»†è¡€ç®¡ã€‚</p>
<p>åœ¨è¿™ä¸€ç‚¹ä¸Šï¼ŒmacOS å±•ç¤ºäº†æŸç§â€œæ— å¿ƒæ’æŸ³â€çš„å¤©ç„¶ä¼˜åŠ¿ã€‚å€ŸåŠ© AppleScript å’Œå¿«æ·æŒ‡ä»¤è¿™äº›æˆç†Ÿçš„è‡ªåŠ¨åŒ–å·¥å…·ï¼Œå³ä¾¿ä¸é€šè¿‡å¤æ‚çš„ API å¼€å‘ï¼Œæ™®é€šç”¨æˆ·ä¹Ÿèƒ½è®© AI è®¿é—®è‡ªå·±çš„ç§æœ‰æ•°æ®ã€‚è¿™ç§â€œè€æ ‘å‘æ–°èŠ½â€çš„ç°è±¡ï¼Œè®©è‹¹æœåœ¨ AI æ—¶ä»£æ‹¥æœ‰äº†æ–°çš„æŠ¤åŸæ²³ã€‚è€Œå¦‚æœè¿™ç§èƒ½åŠ›åœ¨ iOS ä¸Šé€šè¿‡ç³»ç»Ÿçº§ Agent å®Œå…¨é‡Šæ”¾ï¼Œç¡¬ä»¶è®¾å¤‡çš„å½¢æ€æˆ–è®¸å°†è¿æ¥æ–°ä¸€è½®é‡å¡‘ã€‚</p>
<p>ä¸æ­¤åŒæ—¶ï¼ŒæŸäº›å‚å•†çš„ç­–ç•¥åˆ™æ›´åŠ â€œæ¿€è¿›â€ã€‚å­—èŠ‚è·³åŠ¨çš„è±†åŒ…æ‰‹æœºå°è¯•ä»ç³»ç»Ÿåº•å±‚é€šè¿‡å±å¹•è¯»å–ä¸æ¨¡æ‹Ÿäº¤äº’æ¥â€œæš´åŠ›â€æ¥ç®¡ä¸€åˆ‡ï¼›åä¸ºåˆ™é€šè¿‡ A2Aï¼ˆAgent to Agentï¼‰ç­–ç•¥ï¼Œè¯•å›¾åœ¨åå°æ„å»ºä¸€å¥—ç»Ÿä¸€çš„ä»£ç†è°ƒåº¦æœºåˆ¶ã€‚æ— è®ºè·¯çº¿å¦‚ä½•ï¼Œ2026 å¹´å¯¹äºæ™®é€šæ¶ˆè´¹è€…æ¥è¯´éƒ½æ ‡å¿—ç€ä¸€ä¸ªå¥‡ç‚¹çš„åˆ°æ¥ï¼šAI ä¸å†æ˜¯èŠå¤©å·¥å…·ï¼Œè€Œæ˜¯æ˜¾å¼æˆ–éšå¼åœ°æ¥ç®¡äº†æˆ‘ä»¬çš„æ•°å­—ç”Ÿæ´»ã€‚</p>
<p>æ­£å¦‚é‚£å¥è€è¯ï¼šå½“ä¸€ä¸ªæŠ€æœ¯ä¸å†è¢«åå¤æåŠï¼Œæ‰è¯´æ˜å®ƒå·²çœŸæ­£èå…¥ç”Ÿæ´»ï¼Œå¦‚åŒè¡€æ¶²èˆ¬ä¸å¯æˆ–ç¼ºã€‚</p>
<p>ç„¶è€Œï¼Œè¶Šæ˜¯æ— æ„Ÿï¼Œè¶Šè¦è­¦æƒ•ã€‚å½“ AI æ·±å…¥å·¥ä½œæµçš„æ¯ä¸€ä¸ªç»†èŠ‚ï¼Œéšç§å°†æˆä¸ºæœ€æ˜‚è´µçš„å¥¢ä¾ˆå“ã€‚åœ¨è¿½æ±‚æè‡´è‡ªåŠ¨åŒ–ä¸æ•ˆç‡çš„åŒæ—¶ï¼Œå¦‚ä½•é€‰æ‹©æœåŠ¡å•†ã€å¦‚ä½•å¹³è¡¡æœ¬åœ°ä¸äº‘ç«¯æ¨¡å‹ã€å¦‚ä½•ä¿ç•™æœ€åä¸€ç‚¹è±¡å¾æ€§çš„â€œéšç§â€ï¼Œå°†æ˜¯æˆ‘ä»¬åœ¨ 2026 å¹´å¿…é¡»é¢å¯¹çš„å‘½é¢˜ã€‚</p>
<p>2026 æ¥äº†ï¼Œä½ å¼€å§‹å°† AI é›†æˆåˆ°è‡ªå·±çš„å·¥ä½œæµä¸­äº†å—ï¼Ÿ</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-117%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-117/" ref="nofollow noopener noreferrer">æœ¬æœŸå†…å®¹</a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-116%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-116/" ref="nofollow noopener noreferrer">å‰ä¸€æœŸå†…å®¹</a> | <a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2F" target="_blank" title="https://fatbobman.com/zh/weekly/" ref="nofollow noopener noreferrer">å…¨éƒ¨å‘¨æŠ¥åˆ—è¡¨</a></p>
<blockquote>
<p>ğŸš€ <strong>ã€Šè‚˜å­çš„ Swift å‘¨æŠ¥ã€‹</strong></p>
<p>æ¯å‘¨ä¸ºä½ ç²¾é€‰æœ€å€¼å¾—å…³æ³¨çš„ Swiftã€SwiftUI æŠ€æœ¯åŠ¨æ€</p>
<ul>
<li><strong>ğŸ“® ç«‹å³è®¢é˜…</strong> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fweekly.fatbobman.com%2Ffatbobman" target="_blank" title="https://weekly.fatbobman.com/fatbobman" ref="nofollow noopener noreferrer">weekly.fatbobman.com</a> è·å–å®Œæ•´å†…å®¹</li>
<li><strong>ğŸ‘¥ åŠ å…¥ç¤¾åŒº</strong> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.com%2Finvite%2F7FedN5E2QQ" target="_blank" title="https://discord.com/invite/7FedN5E2QQ" ref="nofollow noopener noreferrer">Discord</a> ä¸ 2000+ å¼€å‘è€…äº¤æµ</li>
<li><strong>ğŸ“š æ·±åº¦æ•™ç¨‹</strong> | <a href="https://link.juejin.cn?target=http%3A%2F%2Ffatbobman.com" target="_blank" title="http://fatbobman.com" ref="nofollow noopener noreferrer">fatbobman.com</a> æ¢ç´¢ 200+ åŸåˆ›æ–‡ç« </li>
</ul>
</blockquote>
<h2 data-id="heading-1">è¿‘æœŸæ¨è</h2>
<h3 data-id="heading-2"><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fposts%2Fzipic-1-from-0-to-1%2F%3Futm_source%3Dfatbobman%2520weekly%2520issue%2520117%26utm_medium%3Dweb" target="_blank" title="https://fatbobman.com/zh/posts/zipic-1-from-0-to-1/?utm_source=fatbobman%20weekly%20issue%20117&amp;utm_medium=web" ref="nofollow noopener noreferrer">ç‹¬ç«‹å¼€å‘è€…çš„è¯•ç‚¼ï¼šZipic ä» 0 åˆ° 1 çš„äº§å“åŒ–ä¹‹è·¯</a></h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fzipic" target="_blank" title="https://l.fatbobman.com/zipic" ref="nofollow noopener noreferrer">Zipic</a> æ˜¯æˆ‘ä¸€ç›´åœ¨é«˜é¢‘ä½¿ç”¨çš„å›¾ç‰‡å‹ç¼©å·¥å…·ï¼Œæˆ‘äº²çœ¼è§è¯äº†è¿™ä¸ªåº”ç”¨å¦‚ä½•ä»ä¸€ä¸ªèŒåœºå·¥ä½œçš„å°éœ€æ±‚ï¼Œé€æ¸åœ¨ä½œè€… <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fokooo5km" target="_blank" title="https://x.com/okooo5km" ref="nofollow noopener noreferrer">åé‡Œ</a> çš„ä¸æ–­æ‰“ç£¨ä¸‹æˆé•¿ä¸ºä¸€ä¸ªé«˜æ•ˆã€ç²¾è‡´ã€ä¸“æ³¨çš„æˆåŠŸäº§å“ã€‚ç‹¬ç«‹å¼€å‘è€…å¾€å¾€æ„å‘³ç€â€œä¸€äººæˆå†›â€ï¼Œæ—¶åˆ»åœ¨ç­–ç•¥ã€è®¾è®¡ã€å¼€å‘ã€åˆ†å‘ä¸æ¨å¹¿ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚ä¸ºäº†æŒ–æ˜è¿™èƒŒåçš„æ•…äº‹ï¼Œæˆ‘é‚€è¯·äº†åé‡Œå¤ç›˜äº† Zipic ä» 0 åˆ° 1 çš„å…¨è¿‡ç¨‹ã€‚å…¨æ–‡å…±åˆ†ä¸‰ä¸ªç¯‡ç« ï¼šäº§å“è®¾è®¡ï¼ˆæœ¬æ–‡ï¼‰ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fposts%2Fzipic-2-selling-and-distribution%2F%3Futm_source%3Dfatbobman%2520weekly%2520issue%2520117%26utm_medium%3Dweb" target="_blank" title="https://fatbobman.com/zh/posts/zipic-2-selling-and-distribution/?utm_source=fatbobman%20weekly%20issue%20117&amp;utm_medium=web" ref="nofollow noopener noreferrer">ä¸ä¾èµ– Mac App Store çš„åˆ†å‘ä¸å”®å–</a> ä»¥åŠ <a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fposts%2Fzipic-3-technical-details%2F%3Futm_source%3Dfatbobman%2520weekly%2520issue%2520117%26utm_medium%3Dweb" target="_blank" title="https://fatbobman.com/zh/posts/zipic-3-technical-details/?utm_source=fatbobman%20weekly%20issue%20117&amp;utm_medium=web" ref="nofollow noopener noreferrer">æŠ€æœ¯ç»†èŠ‚å¤ç›˜ï¼šSwiftUI ç—›ç‚¹ä¸æ€§èƒ½ç“¶é¢ˆ</a>ã€‚</p>
<hr/>
<h3 data-id="heading-3"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0117-01" target="_blank" title="https://l.fatbobman.com/w0117-01" ref="nofollow noopener noreferrer">Swift vs. Rustï¼šä»å†…å­˜ç®¡ç†çš„ç»ˆæå¯¹å†³ä¸­å­¦åˆ°çš„ 5 ä¸ªæƒŠäººäº‹å®</a></h3>
<p>åœ¨å¼€å‘è€…ç¤¾åŒºä¸­ï¼Œå…³äº Swift å’Œ Rust æ€§èƒ½çš„è®¨è®ºä»æœªåœæ­¢ã€‚é€šå¸¸çš„çœ‹æ³•æ˜¯ï¼šSwift å› ä¸ºè‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼ˆARCï¼‰è€Œç›¸å¯¹è¾ƒæ…¢ï¼Œè€Œ Rust åˆ™ä»¥å…¶æè‡´çš„é€Ÿåº¦å’Œå†…å­˜æ•ˆç‡è‘—ç§°ã€‚ä½† <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Frbbtsn0w" target="_blank" title="https://x.com/rbbtsn0w" ref="nofollow noopener noreferrer">Snow</a> è®¤ä¸ºï¼Œè¿™ç§â€œå¿«â€ä¸â€œæ…¢â€çš„ç®€å•æ ‡ç­¾å¾€å¾€æ©ç›–äº†ä¸¤è€…åœ¨è®¾è®¡å“²å­¦ä¸Šçš„æ ¹æœ¬å·®å¼‚ï¼šSwift ä¼˜å…ˆå¼€å‘ä½“éªŒå’Œç”Ÿæ€å…¼å®¹ï¼ŒRust è¿½æ±‚æè‡´æ€§èƒ½å’Œç¼–è¯‘æ—¶å®‰å…¨ã€‚</p>
<p>ç»“åˆå®é™…æ¡ˆä¾‹ï¼Œæ–‡ç« æ­ç¤ºäº†äº”ä¸ªçœŸç›¸ï¼šRust çš„æ‰€æœ‰æƒè§„åˆ™æœ¬è´¨ä¸Šæ˜¯é›¶å¼€é”€çš„ç¼–è¯‘æ—¶å·¥å…·ï¼›Swift çš„çœŸæ­£æ€§èƒ½åŒ…è¢±æ¥è‡ª Objective-C å…¼å®¹æ€§è€Œé ARC æœ¬èº«ï¼›ARC çš„æ ¸å¿ƒé—®é¢˜æ˜¯æ€§èƒ½çš„ä¸å¯é¢„æµ‹æ€§ï¼›å¹¶å‘å®‰å…¨ä¸Š Swift ä¾èµ–è¿è¡Œæ—¶ä¿æŠ¤è€Œ Rust å®ç°ç¼–è¯‘æ—¶ä¿è¯ï¼›ä»¥åŠä¸ºä½• Swift æ— æ³•â€œå˜æˆâ€Rustã€‚</p>
<hr/>
<h3 data-id="heading-4"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0117-02-1" target="_blank" title="https://l.fatbobman.com/w0117-02-1" ref="nofollow noopener noreferrer">StoreKit è®¢é˜…å®æˆ˜æŒ‡å— (StoreKit Subscriptions: A Practical Guide)</a></h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fazamsharp" target="_blank" title="https://x.com/azamsharp" ref="nofollow noopener noreferrer">Mohammad Azam</a> åŸºäºå¤šå¹´ iOS å¼€å‘ç»éªŒå’ŒçœŸå®æ¡ˆä¾‹ï¼Œæ’°å†™äº†å®Œæ•´çš„ StoreKit è®¢é˜…å®è·µæ•™ç¨‹ã€‚ç³»åˆ—æ¶µç›–ï¼šå˜ç°æ¨¡å‹é€‰æ‹©ï¼ˆä¸€æ¬¡æ€§è´­ä¹°ã€è®¢é˜…ã€æ¶ˆè€—å‹è´­ä¹°åŠæ··åˆç­–ç•¥ï¼‰ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0117-02-2" target="_blank" title="https://l.fatbobman.com/w0117-02-2" ref="nofollow noopener noreferrer">ä»˜è´¹å¢™ç­–ç•¥å¯¹æ¯”</a>ï¼ˆè½¯/ç¡¬ä»˜è´¹å¢™åŠè®¢é˜…è¯•ç”¨çš„æƒè¡¡ï¼‰ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0117-02-3" target="_blank" title="https://l.fatbobman.com/w0117-02-3" ref="nofollow noopener noreferrer">å¼•å¯¼ä½“éªŒè®¾è®¡</a>ï¼ˆä»é™æ€æˆªå›¾æ¼”è¿›åˆ° 8 æ­¥äº¤äº’å¼å¼•å¯¼ï¼Œè®©ç”¨æˆ·åœ¨ä»˜è´¹å‰å®Œæˆæ ¸å¿ƒåŠŸèƒ½ä½“éªŒå¹¶å»ºç«‹æƒ…æ„ŸæŠ•å…¥ï¼‰ã€ä»¥åŠ<a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0117-02-4" target="_blank" title="https://l.fatbobman.com/w0117-02-4" ref="nofollow noopener noreferrer">å®Œæ•´çš„æŠ€æœ¯å®ç°</a>ï¼ˆApp Store Connect é…ç½®ã€StoreKit é›†æˆã€äº§å“åŠ è½½å’Œè´­ä¹°æµç¨‹çš„ä»£ç ç¤ºä¾‹ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-5"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0117-03" target="_blank" title="https://l.fatbobman.com/w0117-03" ref="nofollow noopener noreferrer">Skip 2025 å›é¡¾ä¸ 2026 è·¯çº¿å›¾ (Skip 2025 Retrospective and 2026 Roadmap)</a></h3>
<p>åœ¨ 2025 å¹´ï¼Œéšç€ Swift SDK for Android åœ¨ swift.org æ­£å¼å‘å¸ƒï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fskiptools" target="_blank" title="https://x.com/skiptools" ref="nofollow noopener noreferrer">Skip</a> é€šè¿‡ Skip Fuse æä¾›åŸç”Ÿç¼–è¯‘æ”¯æŒï¼Œè§£é”äº†æ•°åƒä¸ªåŸç”Ÿ Swift åŒ…åœ¨ Android ä¸Šçš„ä½¿ç”¨ã€‚åŒæ—¶æ–°å¢ NFCã€Stripeã€PostHogã€Auth0ã€Socket.IO ç­‰åŒå¹³å°æ¡†æ¶ã€‚iOS 26 æ¨å‡ºçš„ Liquid Glass ç•Œé¢é£æ ¼æˆä¸ºè·¨å¹³å°æ¡†æ¶çš„è¯•é‡‘çŸ³ã€‚Skip å› é‡‡ç”¨â€œå®Œå…¨åŸç”Ÿâ€ç­–ç•¥ï¼ˆiOS ä¸Šä½¿ç”¨åŸç”Ÿ SwiftUIï¼ŒAndroid ä¸Šæ˜ å°„åˆ° Jetpack Composeï¼‰è€Œåœ¨ç¬¬ä¸€å¤©å°±è‡ªåŠ¨æ”¯æŒæ–°ç•Œé¢ï¼Œæ— éœ€é‡å†™æˆ–å˜é€šã€‚åœ¨ 2026 å¹´ Skip è®¡åˆ’ç»§ç»­æ‰©å±•é›†æˆæ¡†æ¶ã€ä¼˜åŒ– Skip Fuse å·¥å…·é“¾ã€æå‡æ€§èƒ½å’Œå¼€å‘ä½“éªŒã€‚</p>
<hr/>
<h3 data-id="heading-6"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0117-04" target="_blank" title="https://l.fatbobman.com/w0117-04" ref="nofollow noopener noreferrer">å¦‚ä½•ä½¿ç”¨ Claude Code (How to use Claude Code)</a></h3>
<p>è¿™æ˜¯ä¸€ä»½ <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fonmyway133" target="_blank" title="https://x.com/onmyway133" ref="nofollow noopener noreferrer">Khoa Pham</a> åœ¨é«˜å¼ºåº¦ä½¿ç”¨ Claude Code æ•°æœˆåæ•´ç†çš„å®æˆ˜æŒ‡å—ã€‚æ ¸å¿ƒæŠ€å·§åŒ…æ‹¬å„ç§ä¸åŒæ¨¡å¼çš„è¯¦ç»†åº”ç”¨åœºæ™¯ï¼Œå°¤å…¶æ˜¯å¦‚ä½•åˆç†ä½¿ç”¨ Extended Thinking æ¨¡å¼ä»¥é¿å…æµªè´¹ Tokenã€‚å¦å¤–è¿˜æ¶µç›–äº†å…³é”®å¿«æ·é”®ã€ä¸Šä¸‹æ–‡ç®¡ç†æŠ€å·§ã€MCP é›†æˆã€VS Code å’Œ Chrome æ‰©å±•ã€GitHub Actions é›†æˆã€Git Worktrees å¹¶è¡Œå·¥ä½œæµã€æ’ä»¶ç”Ÿæ€ä»¥åŠæç¤ºè¯æœ€ä½³å®è·µç­‰ä¼—å¤šå†…å®¹ã€‚å†…å®¹è¯¦å®ã€å…·ä½“ã€æœ‰é’ˆå¯¹æ€§ï¼Œå¹¶éç®€å•çš„åŠŸèƒ½ä»‹ç»æ‰‹å†Œã€‚</p>
<hr/>
<h3 data-id="heading-7"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0117-05" target="_blank" title="https://l.fatbobman.com/w0117-05" ref="nofollow noopener noreferrer">App Store Connect API Webhook ä¸²æ¥ï½œæå‡ iOS CI/CD è‡ªåŠ¨åŒ–æ•ˆç‡ä¸é€šçŸ¥æµç¨‹</a></h3>
<p>è‹¹æœåœ¨ WWDC 2025 ä¸­å‘å¸ƒäº† App Store Connect API Webhookï¼Œæ”¯æŒæ„å»ºçŠ¶æ€ã€App ç‰ˆæœ¬çŠ¶æ€ã€TestFlight åé¦ˆç­‰äº‹ä»¶çš„å®æ—¶æ¨é€ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.linkedin.com%2Fin%2Fzhgchgli%2F" target="_blank" title="https://www.linkedin.com/in/zhgchgli/" ref="nofollow noopener noreferrer">Zhong Cheng</a> é’ˆå¯¹æ‰“åŒ…ä¸Šä¼ åä¼ ç»Ÿ Polling æ–¹å¼éœ€ç­‰å¾…çº¦ 20 åˆ†é’Ÿï¼ˆGitHub Runner æµªè´¹ $1.24/æ¬¡ï¼‰çš„ç—›ç‚¹ï¼Œè¯¦ç»†ä»‹ç»äº†å¦‚ä½•åœ¨ CI/CD ä¸­åº”ç”¨è¯¥èƒ½åŠ›ï¼Œå®ç°é›¶ç­‰å¾…æˆæœ¬ï¼›GitFlow å› master æ—¶æœºå¯ç²¾ç¡®å¯¹é½ App å®é™…å‘å¸ƒæ—¶é—´ï¼›å¼€å‘è€…æƒé™å—é™æ—¶ä¹Ÿèƒ½åŠæ—¶æ”¶åˆ°æ‹’å®¡é€šçŸ¥ã€‚</p>
<hr/>
<h3 data-id="heading-8"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0117-06" target="_blank" title="https://l.fatbobman.com/w0117-06" ref="nofollow noopener noreferrer">ä½¿ç”¨ WendyOS å¼€å‘åµŒå…¥å¼ Linux åº”ç”¨ (Setting up Embedded Linux with WendyOS)</a></h3>
<p>WendyOS æ˜¯ä¸€ä¸ªä¸“ä¸ºåµŒå…¥å¼è®¾å¤‡è®¾è®¡çš„ Linux å‘è¡Œç‰ˆï¼Œç”¨ Swift ç¼–å†™ï¼Œæ—¨åœ¨å°† iOS å¼€å‘çš„ä¾¿æ·æ€§å¸¦åˆ°åµŒå…¥å¼é¢†åŸŸã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2FJoannisOrlandos" target="_blank" title="https://x.com/JoannisOrlandos" ref="nofollow noopener noreferrer">Joannis Orlandos</a> åœ¨æœ¬æ–‡ä¸­æä¾›äº†å®Œæ•´ä¸Šæ‰‹æ•™ç¨‹ï¼šä»å®‰è£… Homebrew å’Œ Wendy å·¥å…·ã€åˆ·å†™ WendyOS åˆ°æ ‘è“æ´¾/Jetson Orin Nano ç­‰è®¾å¤‡ã€é€šè¿‡ USB è¿æ¥è®¾å¤‡ã€é…ç½® WiFiã€åˆ›å»º Swift é¡¹ç›®ï¼ˆå« <code>wendy.json</code> æƒé™é…ç½®ï¼‰åˆ°ä½¿ç”¨ VSCode æ‰©å±•è¿›è¡Œè¿œç¨‹è°ƒè¯•ï¼ˆæ”¯æŒæ–­ç‚¹å’ŒçŠ¶æ€æ£€æŸ¥ï¼‰ã€‚é€‚åˆæƒ³å°† Swift åº”ç”¨åˆ°åµŒå…¥å¼è®¾å¤‡æˆ– IoT åœºæ™¯çš„å¼€å‘è€…ä½œä¸ºå…¥é—¨æ•™ç¨‹ã€‚</p>
<h2 data-id="heading-9">å·¥å…·</h2>
<h3 data-id="heading-10"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0117-07" target="_blank" title="https://l.fatbobman.com/w0117-07" ref="nofollow noopener noreferrer">Swift å¹¶å‘ï¼šé€šä¿—æ˜“æ‡‚çš„å­¦ä¹ æŒ‡å— (Fucking Approachable Swift Concurrency)</a></h3>
<p>è¿™æ˜¯ä¸€ä¸ªç”± <a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fpepicrft" target="_blank" title="https://x.com/pepicrft" ref="nofollow noopener noreferrer">Pedro PiÃ±era</a> åˆ›å»ºã€åŸºäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fmastodon.social%2F%40mattiem" target="_blank" title="https://mastodon.social/@mattiem" ref="nofollow noopener noreferrer">Matt Massicotte</a> çš„ Swift å¹¶å‘ç†å¿µæ•´ç†çš„å­¦ä¹ èµ„æºï¼Œç”¨é€šä¿—æ˜“æ‡‚çš„æ–¹å¼è§£é‡Š async/awaitã€Taskã€Actorã€Sendable ç­‰æ ¸å¿ƒæ¦‚å¿µã€‚Pedro é€šè¿‡ "Office Buildingï¼ˆåŠå…¬æ¥¼ï¼‰" è¿™ä¸€åœºæ™¯ï¼Œå°† MainActor æ¯”ä½œå‰å°ã€actor æ¯”ä½œéƒ¨é—¨åŠå…¬å®¤ã€await æ¯”ä½œæ•²é—¨ç­‰å¾…ï¼Œå¸®åŠ©å¼€å‘è€…å»ºç«‹ç›´è§‚çš„å¿ƒæ™ºæ¨¡å‹ã€‚ å¦å¤–ï¼Œè¿˜æä¾›äº†ä¸€ä¸ªé€‚ç”¨äº AI å·¥å…·çš„ Skill.md æ–‡ä»¶ï¼Œæ–¹ä¾¿å¼€å‘è€…å°†ä¸Šè¿°å¹¶å‘å®è·µç›´æ¥åµŒå…¥åˆ°å¼€å‘å·¥ä½œæµçš„è§„åˆ™å¼•æ“ä¸­ã€‚</p>
<hr/>
<h3 data-id="heading-11"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0117-08" target="_blank" title="https://l.fatbobman.com/w0117-08" ref="nofollow noopener noreferrer">Dimillian's Skills - iOS/Swift å¼€å‘ AI Agent Skills é›†åˆ</a></h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FDimillian" target="_blank" title="https://github.com/Dimillian" ref="nofollow noopener noreferrer">Thomas Ricouard</a> åˆ›å»ºçš„ç”¨äº iOS/Swift å¼€å‘çš„ Skills ä»“åº“ï¼ŒåŒ…å«å…­ä¸ªä¸“æ³¨äºå®é™…å·¥ä½œæµçš„ AI Agent Skillsã€‚æ¶µç›– App Store Changelog ç”Ÿæˆï¼ˆä» git history è‡ªåŠ¨ç”Ÿæˆå‘å¸ƒè¯´æ˜ï¼‰ã€iOS Debugger Agentï¼ˆä½¿ç”¨ XcodeBuildMCP æ„å»º/è°ƒè¯• iOS é¡¹ç›®ï¼‰ã€Swift Concurrency Expertï¼ˆä¿®å¤ Swift 6.2 å¹¶å‘é—®é¢˜ï¼‰ã€SwiftUI Liquid Glassï¼ˆå®ç° iOS 26+ Liquid Glass APIï¼‰ã€SwiftUI View Refactorï¼ˆé‡æ„è§†å›¾ç»“æ„å’Œä¾èµ–æ¨¡å¼ï¼‰ã€SwiftUI Performance Auditï¼ˆå®¡æŸ¥æ€§èƒ½ç“¶é¢ˆå¹¶æä¾›ä¼˜åŒ–å»ºè®®ï¼‰ç­‰ã€‚</p>
<hr/>
<h3 data-id="heading-12"><a href="https://link.juejin.cn?target=https%3A%2F%2Fl.fatbobman.com%2Fw0117-09" target="_blank" title="https://l.fatbobman.com/w0117-09" ref="nofollow noopener noreferrer">StoreKit Helper - SwiftUI åº”ç”¨å†…è´­ä¹°å°è£…åº“</a></h3>
<p>ç”±<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fjaywcjlove" target="_blank" title="https://x.com/jaywcjlove" ref="nofollow noopener noreferrer">jaywcjlove</a>å¼€å‘çš„è½»é‡çº§ StoreKit 2 å°è£…åº“ï¼Œä¸“ä¸º SwiftUI è®¾è®¡ï¼Œå¤§å¹…ç®€åŒ–åº”ç”¨å†…è´­ä¹°å®ç°ã€‚ç›¸æ¯”ç›´æ¥ä½¿ç”¨ StoreKit 2 APIï¼ŒStoreKitHelper å‡å°‘äº†çº¦ 70% çš„æ ·æ¿ä»£ç ï¼Œç‰¹åˆ«é€‚åˆéœ€è¦å¿«é€Ÿé›†æˆåº”ç”¨å†…è´­ä¹°ä¸”ä¸æƒ³å¤„ç†åº•å±‚å¤æ‚æ€§çš„ SwiftUI å¼€å‘è€…ã€‚</p>
<p>æ ¸å¿ƒç‰¹æ€§åŒ…æ‹¬ï¼šåŸºäº <code>@ObservableObject</code> çš„çŠ¶æ€ç®¡ç†ã€åè®®é©±åŠ¨çš„ç±»å‹å®‰å…¨äº§å“å®šä¹‰ã€å®æ—¶äº¤æ˜“ç›‘å¬å’Œè‡ªåŠ¨çŠ¶æ€æ›´æ–°ã€å†…ç½®çš„ <code>StoreKitHelperView</code> å’Œ <code>StoreKitHelperSelectionView</code> UI ç»„ä»¶ã€‚é€šè¿‡ <code>hasNotPurchased</code>/<code>hasPurchased</code> å±æ€§å¯ä»¥è½»æ¾æ§åˆ¶ç•Œé¢æ˜¾ç¤ºï¼Œæ”¯æŒé“¾å¼ API é…ç½®è´­ä¹°å¼¹çª—çš„å„ç§å›è°ƒã€‚</p>
<h2 data-id="heading-13">æ±‚è´¤</h2>
<h3 data-id="heading-14"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fphoton-hq" target="_blank" title="https://github.com/photon-hq" ref="nofollow noopener noreferrer">Mac OS å·¥ç¨‹å¸ˆ</a></h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fphoton-hq" target="_blank" title="https://github.com/photon-hq" ref="nofollow noopener noreferrer">Photon</a> æ­£åœ¨æ„å»ºå¼€æºåŸºç¡€è®¾æ–½ï¼Œå¸®åŠ©å¼€å‘è€…å°† AI Agent å¸¦åˆ°äººç±»å·²ç»ç†Ÿæ‚‰çš„äº¤äº’ç•Œé¢ä¸­ï¼Œä¾‹å¦‚ iMessageã€WhatsAppã€ç”µè¯é€šè¯ã€Discordã€Signal ç­‰ã€‚åœ¨æ­¤ä¹‹ä¸Šï¼Œæˆ‘ä»¬è¿˜åœ¨æ‰“é€ ä»¥äº¤äº’ä¸ºæ ¸å¿ƒçš„å¼€æº Agent SDKï¼Œè¦†ç›–å¤šæ®µæ¶ˆæ¯å¤„ç†ã€æ¶ˆæ¯çº¿ç¨‹å¤„ç†ã€è¡¨æƒ…/å›åº”ï¼ˆTapbacksï¼‰ç­‰èƒ½åŠ›ï¼Œè®©å¼€å‘è€…å’Œä¼ä¸šèƒ½å¤Ÿå¼€å‘çœŸæ­£"åƒäººä¸€æ ·"äº¤æµçš„ Agentã€‚</p>
<p><strong>èŒä½è¦æ±‚</strong></p>
<p>æˆ‘ä»¬æ­£åœ¨æ‹›è˜ macOS å·¥ç¨‹å¸ˆï¼Œç†æƒ³çš„å€™é€‰äººåº”å…·å¤‡ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ul>
<li>å¯¹ macOS å†…éƒ¨æœºåˆ¶ä»¥åŠç³»ç»Ÿç»„ä»¶ä¹‹é—´çš„äº¤äº’æœ‰æ·±å…¥ç†è§£</li>
<li>å…·å¤‡ macOS ç³»ç»Ÿåˆ†æä¸è°ƒè¯•ç»éªŒ</li>
<li>ç†Ÿæ‚‰ macOS ç³»ç»Ÿçº§ API åŠåº•å±‚æœºåˆ¶</li>
<li>å¯¹æ¢ç´¢ Apple æœåŠ¡ä¸­çš„æœªçŸ¥éƒ¨åˆ†æœ‰å¥½å¥‡å¿ƒ</li>
<li>åŠ åˆ†é¡¹ï¼šæœ‰ iMessageã€IMAgent æˆ–ç›¸å…³æ¶ˆæ¯åŸºç¡€è®¾æ–½çš„ç»éªŒ</li>
</ul>
<p><strong>è–ªèµ„å¾…é‡</strong></p>
<p>æˆ‘ä»¬å°†æä¾›å…·æœ‰ç«äº‰åŠ›çš„è–ªèµ„ï¼ˆå·¥ä½œåœ°ç‚¹ï¼šç¾å›½ï¼Œæ”¯æŒè¿œç¨‹åŠå…¬ï¼‰ã€‚æ­¤å¤–ï¼ŒPhoton è·å¾—å¤šå®¶çŸ¥åæŠ•èµ„æœºæ„çš„æ”¯æŒã€‚</p>
<p><strong>è”ç³»æ–¹å¼</strong></p>
<p><a href="https://link.juejin.cn?target=mailto%3Aryan%40photon.codes" target="_blank" title="mailto:ryan@photon.codes" ref="nofollow noopener noreferrer">ryan@photon.codes</a></p>
<blockquote>
<p>è¿™æ˜¯æœ‹å‹åˆ›ä¸šå›¢é˜Ÿ Photon çš„æ‹›è˜ã€‚ä»–ä»¬åœ¨åš AI Agent åœ¨ iMessage/WhatsApp ç­‰å¹³å°çš„åŸºç¡€è®¾æ–½ï¼Œæ˜¯ä¸ªæ—©æœŸé¡¹ç›®ã€‚å¦‚æœä½ å¯¹ macOS åº•å±‚æŠ€æœ¯å’Œæ—©æœŸåˆ›ä¸šæœºä¼šæ„Ÿå…´è¶£ï¼Œå¯ä»¥äº†è§£ä¸€ä¸‹ã€‚</p>
</blockquote>
<h2 data-id="heading-15">å¾€æœŸå†…å®¹</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-116%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-116/" ref="nofollow noopener noreferrer">Swiftã€SwiftUI ä¸ SwiftDataï¼šèµ°å‘æˆç†Ÿçš„ 2025 - #116</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-115%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-115/" ref="nofollow noopener noreferrer">å‘¨æ—¥å°æ’æ›² - #115</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-114%2F" target="_blank" title="https://fatbobman.com/zh/weekly/issue-114/" ref="nofollow noopener noreferrer">æŒ–æ˜â€œæ²‰é»˜çš„ä¸“å®¶â€- #114</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fhttps%3A%2F%2Ffatbobman.com%2Fzh%2Fweekly%2Fissue-113%2F" target="_blank" title="https://https://fatbobman.com/zh/weekly/issue-113/" ref="nofollow noopener noreferrer">å½“ Android æ‰‹æœºã€å¼ºè¡Œå…¼å®¹ã€AirDrop - #113</a></li>
</ul>
<h2 data-id="heading-16">ğŸ’ æ”¯æŒä¸åé¦ˆ</h2>
<p>å¦‚æœæœ¬æœŸå‘¨æŠ¥å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ï¼š</p>
<ul>
<li>ğŸ‘ <strong>ç‚¹èµ</strong> - è®©æ›´å¤šå¼€å‘è€…çœ‹åˆ°</li>
<li>ğŸ’¬ <strong>è¯„è®º</strong> - åˆ†äº«ä½ çš„çœ‹æ³•æˆ–é—®é¢˜</li>
<li>ğŸ”„ <strong>è½¬å‘</strong> - å¸®åŠ©åŒè¡Œå…±åŒæˆé•¿</li>
</ul>
<hr/>
<blockquote>
<p>ğŸš€ <strong>æ‹“å±• Swift è§†é‡</strong></p>
<ul>
<li><strong>ğŸ“® é‚®ä»¶è®¢é˜…</strong> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fweekly.fatbobman.com%2Fwelcome" target="_blank" title="https://weekly.fatbobman.com/welcome" ref="nofollow noopener noreferrer">weekly.fatbobman.com</a> è·å–ç‹¬å®¶æŠ€æœ¯æ´å¯Ÿ</li>
<li><strong>ğŸ‘¥ å¼€å‘è€…ç¤¾åŒº</strong> | <a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.com%2Finvite%2F7FedN5E2QQ" target="_blank" title="https://discord.com/invite/7FedN5E2QQ" ref="nofollow noopener noreferrer">Discord</a> å®æ—¶äº¤æµå¼€å‘ç»éªŒ</li>
<li><strong>ğŸ“š åŸåˆ›æ•™ç¨‹</strong> | <a href="https://link.juejin.cn?target=http%3A%2F%2Ffatbobman.com" target="_blank" title="http://fatbobman.com" ref="nofollow noopener noreferrer">fatbobman.com</a> å­¦ä¹  Swift/SwiftUI æœ€ä½³å®è·µ</li>
</ul>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç»ƒä¹  AI ç¼–ç¨‹ä¸¤å¹´åŠï¼Œ2026 å¹´æˆ‘ç•™ä¸‹äº†è¿™äº›å·¥å…·]]></title>    <link>https://juejin.cn/post/7591715454134616127</link>    <guid>https://juejin.cn/post/7591715454134616127</guid>    <pubDate>2026-01-05T23:56:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591715454134616127" data-draft-id="7591715454134599743" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç»ƒä¹  AI ç¼–ç¨‹ä¸¤å¹´åŠï¼Œ2026 å¹´æˆ‘ç•™ä¸‹äº†è¿™äº›å·¥å…·"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,Trae,Cursor"/> <meta itemprop="datePublished" content="2026-01-05T23:56:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é™ˆä½¬æ˜”ç¼–ç¨‹äººç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3087084378402445"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç»ƒä¹  AI ç¼–ç¨‹ä¸¤å¹´åŠï¼Œ2026 å¹´æˆ‘ç•™ä¸‹äº†è¿™äº›å·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3087084378402445/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é™ˆä½¬æ˜”ç¼–ç¨‹äººç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T23:56:58.000Z" title="Mon Jan 05 2026 23:56:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2026 æ–°å¹´å¥½ï¼</p>
<p>ä¸çŸ¥ä¸è§‰ç”¨ AI ç¼–ç¨‹å·²ç»æœ‰ 2 å¹´å¤šçš„æ—¶é—´äº†ã€‚</p>
<p>ä»æœ€åˆå¯¹ AI è¾…åŠ©ç¼–ç¨‹çš„å¥½å¥‡å°è¯•ï¼Œåˆ°å¦‚ä»Šå®ƒå·²æˆä¸ºæˆ‘æ—¥å¸¸å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†ã€‚AI ç¡®ç¡®å®å®ç»™æˆ‘å¸¦æ¥äº†å·¥ä½œæ•ˆç‡çš„æå¤§æå‡ã€‚</p>
<p>åœ¨ç”¨äº†é‚£ä¹ˆå¤šå·¥å…·åï¼Œæˆ‘é€‰æ‹©ç•™ä¸‹è¿™äº›ï¼š</p>
<h2 data-id="heading-0">æ’ä»¶ï¼šCline</h2>
<p>è¿™æ¬¾æ’ä»¶å‡ ä¹è¦†ç›–äº†æ‰€æœ‰ä¸»æµIDEï¼Œä»VS Codeã€Windsurfåˆ° JetBrainsç­‰ï¼Œå…¼å®¹æ€§æå¼ºã€‚</p>
<p>å®ƒæ”¯æŒæ¥å…¥å¤šç§å¤§æ¨¡å‹ï¼ŒåŒ…æ‹¬GPT-4ã€Claudeå’Œå›½äº§æ¨¡å‹ï¼Œé€šè¿‡ç»Ÿä¸€çš„ç•Œé¢è°ƒç”¨ï¼Œé¿å…äº†åœ¨ä¸åŒå¹³å°é—´åˆ‡æ¢çš„éº»çƒ¦ã€‚</p>
<p>ç›®å‰å®ƒæ˜¯æˆ‘ç”¨è¿‡åŠŸèƒ½æœ€å…¨é¢ã€å“åº”æœ€ç¨³å®šçš„AIç¼–ç¨‹æ’ä»¶ã€‚</p>
<p>ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcline.bot%2F" target="_blank" title="https://cline.bot/" ref="nofollow noopener noreferrer">cline.bot/</a></p>
<h2 data-id="heading-1">IDEï¼šcursor å’Œ Trae</h2>
<p>é¦–é€‰çš„ AI ç¼–ç¨‹IDEä¾ç„¶æ˜¯ Cursorï¼Œèƒ½åŠ›æ— åº¸ç½®ç–‘ã€‚ä» Claude Sonnet 4.5 åˆ°è‡ªå®¶çš„æ¨¡å‹ï¼Œæä¾›äº†æµç•…çš„æœ¬åœ°åŒ–ä½“éªŒã€‚</p>
<p>ç›®å‰ Auto æ¨¡å¼å°±èƒ½é€‚åº”å¤§éƒ¨åˆ†çš„åœºæ™¯äº†ï¼Œå‡å°‘äº†å¼€å‘è€…çš„å¿ƒæ™ºè´Ÿæ‹…ã€‚</p>
<p>20 åˆ€çš„å¥—é¤ï¼Œå·²ç»å¤Ÿè€ç¨‹åºå‘˜æŠ˜è…¾äº†ã€‚</p>
<p>ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fcursor.com%2Fcn" target="_blank" title="https://cursor.com/cn" ref="nofollow noopener noreferrer">cursor.com/cn</a></p>
<p>è€Œ Trae CNï¼Œç›¸æ¯”å…¶ä»–å›½äº§ IDE çš„ä¼˜åŠ¿ç¡®å®æ›´æ˜æ˜¾ï¼š</p>
<ul>
<li>å›½å†… IDE ä¸­æ›´æ–°é€Ÿåº¦é¢‘ç‡æœ€å¿«æœ€å¤šçš„ï¼Œå®˜æ–¹ç»Ÿè®¡ä¸€å¹´è¿­ä»£äº† 200 å¤šæ¬¡ï¼›</li>
<li>å›½å†…æœ€æ–°çš„å¤§æ¨¡å‹ç¬¬ä¸€ä¸ªæ”¯æŒï¼Œæ¯”å¦‚åˆšå‘å¸ƒçš„GLM 4.7å’ŒMiniMax M2.1ï¼›</li>
<li>æ”¯æŒç¬¬ä¸‰æ–¹å¹³å°æ¥å…¥ï¼Œå…è®¸ç”¨æˆ·è‡ªå®šä¹‰æ¨¡å‹ç«¯ç‚¹ï¼Œçµæ´»æ€§å¾ˆé«˜ã€‚</li>
</ul>
<p>ä¸è¿‡ï¼Œå®ƒçš„ Auto æ¨¡å¼è°ƒä¼˜ä¸€èˆ¬ï¼Œæ¨èæ‰‹åŠ¨é€‰æ‹© GLM æˆ– MiniMax æ¨¡å‹ã€‚</p>
<p>å­—èŠ‚æœ€è¿‘åœ¨å¤§æ‰¹é‡æ‹›ç¨‹åºå‘˜åšæ•°æ®æ ‡æ³¨ï¼Œä¼°è®¡æ˜¯å¯¹å…¬å¼€çš„æ•°æ®é›†ä¸æ»¡æ„ï¼Œéœ€è¦è‡ªå»ºæ›´å¥½çš„æ•°æ®é›†ï¼Œæ¥åšè‡ªå®¶çš„ç¼–ç¨‹æ¨¡å‹äº†ï¼ŒæœŸå¾…æ˜å¹´å‘åŠ›å§ã€‚</p>
<p>ä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.trae.cn%2F" target="_blank" title="https://www.trae.cn/" ref="nofollow noopener noreferrer">www.trae.cn/</a></p>
<p>è‡³äº Qoderï¼Œæ—©æœŸç»™æˆ‘çš„ä½“éªŒå¾ˆå¥½ï¼Œç•Œé¢æµç•…ä¸”å“åº”è¿…é€Ÿï¼Œä¸€åº¦æ˜¯æˆ‘æœ€å–œæ¬¢çš„å›½äº§IDEã€‚ä½†æ˜¯è¿˜æ˜¯å°é—­äº†ï¼Œé™åˆ¶äº†æ¨¡å‹é€‰æ‹©å’Œæ’ä»¶ç”Ÿæ€ã€‚</p>
<p>å¯¹æ¯”ä¸‹ï¼Œæˆ‘è¿˜æ˜¯é€‰æ‹©è´µä¸€ç‚¹ä½†æ›´æˆç†Ÿçš„ Cursor ã€‚è‹¥é™åˆ¶åœ¨å›½å†…ç½‘ç»œç¯å¢ƒä¸‹ï¼Œæˆ‘ä¼šé€‰æ‹©æ›´å®ç”¨çš„ Traeã€‚</p>
<p>å…¶ä»–IDEå¦‚Kiroã€Codebuddyå’Œcomateï¼Œæˆ‘æš‚æ—¶å°†å®ƒä»¬ç•™åœ¨è§‚å¯Ÿåå•ä¸­ã€‚</p>
<h2 data-id="heading-2">CLIï¼šClaude Code å’Œ...</h2>
<p>è™½ç„¶æˆ‘å¯¹ Anthropic è¿™å®¶å…¬å¸æ²¡ä»€ä¹ˆå¥½æ„Ÿï¼Œä½† Claude Code é¢‘ç¹åœ°å‡ºç°è¿˜æ˜¯å¼•èµ·äº†æˆ‘çš„æ³¨æ„ã€‚æœ€è¿‘å®ƒçš„ Skill è¿™ç±»è¡ç”ŸåŠŸèƒ½å°±ä¸€å†åˆ·å±ï¼Œä¸è¿‡æš‚æ—¶è¿˜æ²¡æœ‰æ—¶é—´å°è¯•ã€‚</p>
<p>CLI è¿™ç±»å‘½ä»¤è¡Œå·¥å…·çš„å¥½å¤„æ˜¯å¯ä»¥è·å–æ›´å¤šçš„æƒé™ï¼Œå› æ­¤å®ƒèƒ½åšæ›´å¤šçš„äº‹æƒ…ï¼Œä½“éªŒä¸Šä¹Ÿèƒ½åšå¾—æ¯” IDE æ›´é¡ºç•…ã€‚</p>
<p>ä¸è¿‡ä¹Ÿæœ‰ä¸å°‘ç½‘å‹åé¦ˆï¼ŒCLI è¯¯åˆ äº†æ–‡ä»¶å¤¹ä¹‹ç±»çš„äº‹æƒ…ã€‚æ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™è¿˜æ˜¯è¦å¤šæ³¨æ„ã€‚</p>
<p>å›½å†…çš„ CLI èµ›é“è¿˜æ²¡è·‘å‡ºæ¥ï¼Œå¤§å‚è™½æœ‰äº§å“ï¼Œä½†æœªè§å¤§åŠ›å®£ä¼ ã€‚æ˜å¹´ç»§ç»­å…³æ³¨å§ã€‚</p>
<h2 data-id="heading-3">å›½äº§å¤§æ¨¡å‹ï¼šGLM 4.7 å’Œ MiniMax M2.1</h2>
<p>GLM å’Œ MiniMax æ˜¯ç›®å‰å›½å†…æœ€å·çš„ä¸¤ä¸ªæ¨¡å‹äº†ã€‚</p>
<p>ç»è¿‡è¿­ä»£ï¼Œç¼–ç¨‹èƒ½åŠ›å·²ç»æ˜æ˜¾è¦ä¼˜äºå…¶ä»–å¼€æºæ¨¡å‹ã€‚å› æ­¤ä¹Ÿæˆäº† IDEã€æ’ä»¶ã€CLIå·¥å…·çš„å¼€æºæ¨¡å‹é¦–é€‰ã€‚</p>
<p>GLM å’Œ MiniMax èƒŒåçš„å…¬å¸ï¼Œè¿™å‡ å¤©å°±ä¸Šå¸‚äº†ï¼Œåç»­ä¼°è®¡ç«äº‰ä¼šæ›´ç«çƒ­ã€‚</p>
<p>å®˜ç½‘åœ°å€ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fopen.bigmodel.cn%2F" target="_blank" title="https://open.bigmodel.cn/" ref="nofollow noopener noreferrer">open.bigmodel.cn/</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.minimaxi.com%2F" target="_blank" title="https://www.minimaxi.com/" ref="nofollow noopener noreferrer">www.minimaxi.com/</a></li>
</ul>
<p>Deepseek è¿˜æ˜¯æ›´æœŸå¾…å®ƒçš„å¤§ç‰ˆæœ¬æ›´æ–°å§ã€‚</p>
<p>å›æœ›2025å¹´ï¼ŒAI ç¼–ç¨‹ç¡®å®åœ¨å¾ˆå¤šæ–¹é¢å±•ç°äº†ä»¤äººæƒŠå¹çš„æ½œåŠ›ï¼Œä½†åŒæ—¶ä¹Ÿæš´éœ²å‡ºä¸å°‘æ˜æ˜¾çš„ä¸è¶³ã€‚ä¾‹å¦‚åœ¨å·¥ç¨‹åŒ–ä¸Šã€åœ¨å¤æ‚é€»è¾‘ä¸Šã€åœ¨ä¸šåŠ¡ç†è§£ä¸Šéƒ½æœ‰ä¸å°‘ç¼ºé™·ã€‚</p>
<p>2026å¹´ï¼Œéšç€ç®—æ³•æ¨¡å‹çš„æŒç»­è¿­ä»£ã€è®­ç»ƒæ•°æ®çš„è¿›ä¸€æ­¥ä¸°å¯Œä»¥åŠè®¡ç®—èµ„æºçš„ä¼˜åŒ–ï¼ŒAI ç¼–ç¨‹å·¥å…·æœ‰æœ›å˜å¾—æ›´åŠ æ™ºèƒ½å’Œå®ç”¨ã€‚è®©æˆ‘ä»¬ä¿æŒå…³æ³¨ï¼Œç»§ç»­æœŸå¾…å®ƒåœ¨æœªæ¥ä¸€å¹´å¸¦æ¥çš„ç§¯æå˜åŒ–ä¸æƒŠå–œå§~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java åˆ›å»ºå¯¹è±¡ï¼Œé™¤äº† new ä½ è¿˜çŸ¥é“å“ªäº›æ–¹å¼ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7591672090790854675</link>    <guid>https://juejin.cn/post/7591672090790854675</guid>    <pubDate>2026-01-06T00:03:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591672090790854675" data-draft-id="7582090790183092262" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java åˆ›å»ºå¯¹è±¡ï¼Œé™¤äº† new ä½ è¿˜çŸ¥é“å“ªäº›æ–¹å¼ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-01-06T00:03:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java åˆ›å»ºå¯¹è±¡ï¼Œé™¤äº† new ä½ è¿˜çŸ¥é“å“ªäº›æ–¹å¼ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T00:03:01.000Z" title="Tue Jan 06 2026 00:03:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ˜¨æ™šåŠ ç­çš„æ—¶å€™ï¼ŒåŒäº‹æ¥æ—è¾¹åç€è·Ÿæˆ‘é—²èŠï¼Œä¸ç»æ„é—´çœ‹åˆ°å±å¹•ä¸Šçš„new å¯¹è±¡ä»£ç ï¼Œä»–è¯´ï¼šâ€œæ¯æ¬¡è¿™æ ·new ä¸€ä¸ªå¯¹è±¡æ„Ÿè§‰å¥½ä¸‘ï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹å¼æ–¹æ³•ï¼â€ã€‚</p>
<p>æˆ‘è¯´ï¼šâ€œæœ‰å•Šï¼Œä¸è¿‡ä¹Ÿå¾—çœ‹åœºæ™¯ï¼Œç®€å•çš„ç›´æ¥ç”¨ new ä¸€æŠŠæ¢­å“ˆï¼å¤æ‚çš„å†è€ƒè™‘å…¶å®ƒçš„æ–¹å¼â€</p>
<p>é‚£æœ‰å“ªäº›æ–¹å¼å‘¢ï¼Ÿä¸‹é¢æ¥åˆ†äº«ä¸€ä¸‹ã€‚</p>
<h2 data-id="heading-0">1. newå…³é”®å­—</h2>
<p>æœ€ç›´æ¥çš„åˆ›å»ºæ–¹å¼</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å°±åƒæˆ‘ä»¬å¹³æ—¶è¯´è¯ï¼š&amp;#34;æ¥ä¸€è¾†æ–°è½¦&amp;#34;</span>
<span class="hljs-type">Car</span> <span class="hljs-variable">car</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>();

<span class="hljs-comment">// æˆ–è€…å¸¦å‚æ•°çš„ï¼š&amp;#34;æ¥ä¸€è¾†çº¢è‰²çš„å®é©¬&amp;#34;</span>
<span class="hljs-type">Car</span> <span class="hljs-variable">bmw</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(&amp;#<span class="hljs-number">34</span>;å®é©¬&amp;#<span class="hljs-number">34</span>;, &amp;#<span class="hljs-number">34</span>;çº¢è‰²&amp;#<span class="hljs-number">34</span>;);
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯</strong>ï¼šè¿™æ˜¯<strong>æœ€å¸¸ç”¨</strong>çš„æ–¹å¼ï¼Œé€‚åˆ90%çš„æ—¥å¸¸å¼€å‘åœºæ™¯ã€‚</p>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>ç®€å•ç›´è§‚ï¼Œä¸€çœ¼å°±èƒ½çœ‹æ‡‚</li>
<li>æ€§èƒ½å¥½ï¼Œç›´æ¥è°ƒç”¨æ„é€ æ–¹æ³•</li>
</ul>
<p><strong>ç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>ä¸å¤Ÿçµæ´»ï¼Œåˆ›å»ºé€»è¾‘ä¸ä½¿ç”¨ä»£ç è€¦åˆ</li>
</ul>
<hr/>
<h2 data-id="heading-1">2. åå°„æœºåˆ¶</h2>
<p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨è¿è¡Œæ—¶æ‰çŸ¥é“è¦åˆ›å»ºä»€ä¹ˆç±»çš„å¯¹è±¡ï¼Œè¿™æ—¶å€™åå°„å°±æ´¾ä¸Šç”¨åœºäº†ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ ç»Ÿæ–¹å¼ï¼šæˆ‘çŸ¥é“è¦åˆ›å»ºCar</span>
<span class="hljs-type">Car</span> <span class="hljs-variable">car</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>();

<span class="hljs-comment">// åå°„æ–¹å¼ï¼šè¿è¡Œæ—¶æ‰çŸ¥é“è¦åˆ›å»ºä»€ä¹ˆ</span>
<span class="hljs-keyword">try</span> {
    <span class="hljs-type">Class</span> <span class="hljs-variable">carClass</span> <span class="hljs-operator">=</span> Class.forName(&amp;#<span class="hljs-number">34</span>;com.example.Car&amp;#<span class="hljs-number">34</span>;);
    <span class="hljs-type">Constructor</span> <span class="hljs-variable">constructor</span> <span class="hljs-operator">=</span> carClass.getConstructor();
    <span class="hljs-type">Car</span> <span class="hljs-variable">car</span> <span class="hljs-operator">=</span> (Car) constructor.newInstance();
} <span class="hljs-keyword">catch</span> (Exception e) {
    e.printStackTrace();
}
</code></pre>
<p><strong>æ¡ˆä¾‹</strong>ï¼šSpringæ¡†æ¶ä¸­ï¼Œå½“æˆ‘ä»¬é…ç½®äº†<code>@Component</code>æ³¨è§£çš„ç±»ï¼ŒSpringå°±æ˜¯é€šè¿‡åå°„æ¥åˆ›å»ºè¿™äº›å¯¹è±¡çš„ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Springå†…éƒ¨å¤§è‡´æ˜¯è¿™æ ·åšçš„</span>
<span class="hljs-type">Class</span> <span class="hljs-variable">beanClass</span> <span class="hljs-operator">=</span> loadClass(&amp;#<span class="hljs-number">34</span>;com.example.UserService&amp;#<span class="hljs-number">34</span>;);
<span class="hljs-type">Object</span> <span class="hljs-variable">bean</span> <span class="hljs-operator">=</span> beanClass.getDeclaredConstructor().newInstance();
</code></pre>
<hr/>
<h2 data-id="heading-2">3. clone()æ–¹æ³•</h2>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªé…ç½®å¥½çš„å¯¹è±¡ï¼Œç°åœ¨éœ€è¦å¦ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„ï¼Œè¿™æ—¶å€™cloneå°±å¾ˆæœ‰ç”¨ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserSettings</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Cloneable</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">theme</span> <span class="hljs-operator">=</span> &amp;#<span class="hljs-number">34</span>;dark&amp;#<span class="hljs-number">34</span>;;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">fontSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">14</span>;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> UserSettings <span class="hljs-title function_">clone</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> (UserSettings) <span class="hljs-built_in">super</span>.clone();
        } <span class="hljs-keyword">catch</span> (CloneNotSupportedException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AssertionError</span>();
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨clone</span>
<span class="hljs-type">UserSettings</span> <span class="hljs-variable">original</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserSettings</span>();
<span class="hljs-type">UserSettings</span> <span class="hljs-variable">cloned</span> <span class="hljs-operator">=</span> original.clone(); <span class="hljs-comment">// å¾—åˆ°ä¸€ä¸ªå®Œå…¨ç›¸åŒçš„å‰¯æœ¬</span>
</code></pre>
<p><strong>æ³¨æ„ç‚¹</strong>ï¼š</p>
<ul>
<li>éœ€è¦å®ç°<code>Cloneable</code>æ¥å£ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸</li>
<li>é»˜è®¤æ˜¯æµ…æ‹·è´ï¼Œå¦‚æœéœ€è¦æ·±æ‹·è´è¦è‡ªå·±å®ç°</li>
</ul>
<hr/>
<h2 data-id="heading-3">4. ååºåˆ—åŒ–</h2>
<p>å½“æˆ‘ä»¬æŠŠå¯¹è±¡ä¿å­˜åˆ°æ–‡ä»¶æˆ–é€šè¿‡ç½‘ç»œä¼ è¾“åï¼Œéœ€è¦é‡æ–°æŠŠå®ƒå˜å›å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å¯¹è±¡éœ€è¦å®ç°Serializableæ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">GameSave</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> level;
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> score;
}

<span class="hljs-comment">// ä¿å­˜å¯¹è±¡åˆ°æ–‡ä»¶</span>
<span class="hljs-keyword">try</span> (<span class="hljs-type">ObjectOutputStream</span> <span class="hljs-variable">oos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutputStream</span>(
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(&amp;#<span class="hljs-number">34</span>;save.dat&amp;#<span class="hljs-number">34</span>;))) {
    oos.writeObject(gameSave);
}

<span class="hljs-comment">// ä»æ–‡ä»¶è¯»å–å¯¹è±¡</span>
<span class="hljs-keyword">try</span> (<span class="hljs-type">ObjectInputStream</span> <span class="hljs-variable">ois</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(&amp;#<span class="hljs-number">34</span>;save.dat&amp;#<span class="hljs-number">34</span>;))) {
    <span class="hljs-type">GameSave</span> <span class="hljs-variable">loadedSave</span> <span class="hljs-operator">=</span> (GameSave) ois.readObject();
    <span class="hljs-comment">// loadedSaveå°±æ˜¯åŸæ¥é‚£ä¸ªgameSaveçš„å‰¯æœ¬</span>
}
</code></pre>
<hr/>
<hr/>
<h2 data-id="heading-4">5. é™æ€å·¥å‚æ–¹æ³•</h2>
<p>æœ‰æ—¶å€™ç›´æ¥newä¸å¤Ÿè¡¨è¾¾æˆ‘ä»¬çš„æ„å›¾ï¼Œè¿™æ—¶å€™å·¥å‚æ–¹æ³•å°±å¾ˆæœ‰ç”¨ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Color</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> red, green, blue;
    
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Color</span><span class="hljs-params">(<span class="hljs-type">int</span> r, <span class="hljs-type">int</span> g, <span class="hljs-type">int</span> b)</span> {
        <span class="hljs-built_in">this</span>.red = r;
        <span class="hljs-built_in">this</span>.green = g;
        <span class="hljs-built_in">this</span>.blue = b;
    }
    
    <span class="hljs-comment">// é™æ€å·¥å‚æ–¹æ³•ï¼šè¯­ä¹‰æ›´æ˜ç¡®</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Color <span class="hljs-title function_">fromRGB</span><span class="hljs-params">(<span class="hljs-type">int</span> r, <span class="hljs-type">int</span> g, <span class="hljs-type">int</span> b)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Color</span>(r, g, b);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Color <span class="hljs-title function_">fromHex</span><span class="hljs-params">(String hex)</span> {
        <span class="hljs-comment">// è§£æåå…­è¿›åˆ¶é¢œè‰²ç </span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Color</span>(<span class="hljs-comment">/* è§£æé€»è¾‘ */</span>);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Color <span class="hljs-title function_">red</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Color</span>(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
    }
}

<span class="hljs-comment">// ä½¿ç”¨ï¼šè¿™æ ·è¯»èµ·æ¥æ›´è‡ªç„¶</span>
<span class="hljs-type">Color</span> <span class="hljs-variable">red</span> <span class="hljs-operator">=</span> Color.red();
<span class="hljs-type">Color</span> <span class="hljs-variable">custom</span> <span class="hljs-operator">=</span> Color.fromRGB(<span class="hljs-number">255</span>, <span class="hljs-number">128</span>, <span class="hljs-number">0</span>);
</code></pre>
<p><strong>ä¼˜ç‚¹</strong>ï¼š</p>
<ul>
<li>æ–¹æ³•åå¯ä»¥è¡¨è¾¾åˆ›å»ºæ„å›¾</li>
<li>å¯ä»¥ç¼“å­˜å¯¹è±¡ï¼Œé¿å…é‡å¤åˆ›å»º</li>
<li>å¯ä»¥è¿”å›å­ç±»å¯¹è±¡ï¼Œæ›´çµæ´»</li>
</ul>
<hr/>
<h2 data-id="heading-5">6. Builderæ¨¡å¼</h2>
<p>å½“å¯¹è±¡æœ‰å¾ˆå¤šå±æ€§æ—¶ï¼Œæ„é€ æ–¹æ³•ä¼šå˜å¾—å¾ˆé•¿å¾ˆéš¾è¯»ï¼ŒBuilderæ¨¡å¼æ¥è§£å†³ï¼</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Computer</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String cpu;          <span class="hljs-comment">// å¿…é¡»</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String ram;          <span class="hljs-comment">// å¿…é¡»  </span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String storage;      <span class="hljs-comment">// å¿…é¡»</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String graphicsCard; <span class="hljs-comment">// å¯é€‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String monitor;      <span class="hljs-comment">// å¯é€‰</span>
    
    <span class="hljs-comment">// ç§æœ‰æ„é€ æ–¹æ³•ï¼Œåªèƒ½é€šè¿‡Builderåˆ›å»º</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Computer</span><span class="hljs-params">(Builder builder)</span> {
        <span class="hljs-built_in">this</span>.cpu = builder.cpu;
        <span class="hljs-built_in">this</span>.ram = builder.ram;
        <span class="hljs-built_in">this</span>.storage = builder.storage;
        <span class="hljs-built_in">this</span>.graphicsCard = builder.graphicsCard;
        <span class="hljs-built_in">this</span>.monitor = builder.monitor;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Builder</span> {
        <span class="hljs-comment">// å¿…é¡»å‚æ•°</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String cpu;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String ram;
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String storage;
        
        <span class="hljs-comment">// å¯é€‰å‚æ•°</span>
        <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">graphicsCard</span> <span class="hljs-operator">=</span> &amp;#<span class="hljs-number">34</span>;é›†æˆæ˜¾å¡&amp;#<span class="hljs-number">34</span>;;
        <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">monitor</span> <span class="hljs-operator">=</span> &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">23</span>å¯¸æ˜¾ç¤ºå™¨&amp;#<span class="hljs-number">34</span>;;
        
        <span class="hljs-comment">// Builderæ„é€ æ–¹æ³•åŒ…å«å¿…é¡»å‚æ•°</span>
        <span class="hljs-keyword">public</span> <span class="hljs-title function_">Builder</span><span class="hljs-params">(String cpu, String ram, String storage)</span> {
            <span class="hljs-built_in">this</span>.cpu = cpu;
            <span class="hljs-built_in">this</span>.ram = ram;
            <span class="hljs-built_in">this</span>.storage = storage;
        }
        
        <span class="hljs-comment">// è®¾ç½®å¯é€‰å‚æ•°çš„æ–¹æ³•</span>
        <span class="hljs-keyword">public</span> Builder <span class="hljs-title function_">graphicsCard</span><span class="hljs-params">(String graphicsCard)</span> {
            <span class="hljs-built_in">this</span>.graphicsCard = graphicsCard;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
        }
        
        <span class="hljs-keyword">public</span> Builder <span class="hljs-title function_">monitor</span><span class="hljs-params">(String monitor)</span> {
            <span class="hljs-built_in">this</span>.monitor = monitor;
            <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>;
        }
        
        <span class="hljs-keyword">public</span> Computer <span class="hljs-title function_">build</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Computer</span>(<span class="hljs-built_in">this</span>);
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨Builderæ¨¡å¼ï¼šé“¾å¼è°ƒç”¨ï¼Œéå¸¸æ¸…æ™°</span>
<span class="hljs-type">Computer</span> <span class="hljs-variable">gamingPC</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Computer</span>.Builder(&amp;#<span class="hljs-number">34</span>;i7&amp;#<span class="hljs-number">34</span>;, &amp;#<span class="hljs-number">34</span>;16GB&amp;#<span class="hljs-number">34</span>;, &amp;#<span class="hljs-number">34</span>;1TB SSD&amp;#<span class="hljs-number">34</span>;)
    .graphicsCard(&amp;#<span class="hljs-number">34</span>;RTX <span class="hljs-number">3080</span>&amp;#<span class="hljs-number">34</span>;)
    .monitor(&amp;#<span class="hljs-number">34</span>;<span class="hljs-number">27</span>å¯¸4Kæ˜¾ç¤ºå™¨&amp;#<span class="hljs-number">34</span>;)
    .build();
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š</p>
<ul>
<li>å¯¹è±¡æœ‰å¾ˆå¤šå±æ€§ï¼Œç‰¹åˆ«æ˜¯å¯é€‰å±æ€§å¾ˆå¤šæ—¶</li>
<li>å¸Œæœ›åˆ›å»ºè¿‡ç¨‹æ›´æ¸…æ™°ã€æ˜“è¯»</li>
<li>éœ€è¦åˆ›å»ºä¸å¯å˜å¯¹è±¡</li>
</ul>
<hr/>
<h2 data-id="heading-6">7. åŒ¿åå†…éƒ¨ç±»</h2>
<p>å½“æˆ‘ä»¬åªéœ€è¦æŸä¸ªæ¥å£çš„ä¸€æ¬¡æ€§å®ç°æ—¶ï¼ŒåŒ¿åå†…éƒ¨ç±»å¾ˆæ–¹ä¾¿ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åˆ›å»ºçº¿ç¨‹çš„ä¼ ç»Ÿæ–¹å¼</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyTask</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Runnable</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;æ‰§è¡Œä»»åŠ¡&amp;#<span class="hljs-number">34</span>;);
    }
}

<span class="hljs-type">Runnable</span> <span class="hljs-variable">task1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyTask</span>();

<span class="hljs-comment">// ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ï¼šæ›´ç®€æ´</span>
<span class="hljs-type">Runnable</span> <span class="hljs-variable">task2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
        System.out.println(&amp;#<span class="hljs-number">34</span>;æ‰§è¡Œä»»åŠ¡&amp;#<span class="hljs-number">34</span>;);
    }
};

<span class="hljs-comment">// Java 8ä»¥åï¼Œå¯ä»¥ç”¨lambdaè¡¨è¾¾å¼è¿›ä¸€æ­¥ç®€åŒ–</span>
<span class="hljs-type">Runnable</span> <span class="hljs-variable">task3</span> <span class="hljs-operator">=</span> () -&gt; System.out.println(&amp;#<span class="hljs-number">34</span>;æ‰§è¡Œä»»åŠ¡&amp;#<span class="hljs-number">34</span>;);
</code></pre>
<hr/>
<h2 data-id="heading-7">8. æ–¹æ³•å¼•ç”¨</h2>
<p>Java 8å¼•å…¥äº†å‡½æ•°å¼ç¼–ç¨‹ï¼Œè®©å¯¹è±¡åˆ›å»ºæ›´åŠ ä¼˜é›…ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-keyword">private</span> String name;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.name = &amp;#<span class="hljs-number">34</span>;åŒ¿å&amp;#<span class="hljs-number">34</span>;;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Person</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
    }
}

<span class="hljs-comment">// æ–¹æ³•å¼•ç”¨åˆ›å»ºå¯¹è±¡</span>
<span class="hljs-type">Supplier</span> <span class="hljs-variable">defaultPerson</span> <span class="hljs-operator">=</span> Person::<span class="hljs-keyword">new</span>;
<span class="hljs-type">Function</span> <span class="hljs-variable">namedPerson</span> <span class="hljs-operator">=</span> Person::<span class="hljs-keyword">new</span>;

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-type">Person</span> <span class="hljs-variable">p1</span> <span class="hljs-operator">=</span> defaultPerson.get();      <span class="hljs-comment">// è°ƒç”¨æ— å‚æ„é€ </span>
<span class="hljs-type">Person</span> <span class="hljs-variable">p2</span> <span class="hljs-operator">=</span> namedPerson.apply(&amp;#<span class="hljs-number">34</span>;å¼ ä¸‰&amp;#<span class="hljs-number">34</span>;); <span class="hljs-comment">// è°ƒç”¨æœ‰å‚æ„é€ </span>
</code></pre>
<hr/>
<h2 data-id="heading-8">æ€»ç»“</h2>








































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èæ–¹å¼</th><th>ç†ç”±</th></tr></thead><tbody><tr><td>æ—¥å¸¸å¼€å‘</td><td>newå…³é”®å­—</td><td>ç®€å•ç›´æ¥ï¼Œæ€§èƒ½å¥½</td></tr><tr><td>å¤šå‚æ•°å¯¹è±¡</td><td>Builderæ¨¡å¼</td><td>å¯è¯»æ€§å¥½ï¼Œçµæ´»</td></tr><tr><td>éœ€è¦å°è£…åˆ›å»ºé€»è¾‘</td><td>é™æ€å·¥å‚æ–¹æ³•</td><td>éšè—å®ç°ç»†èŠ‚</td></tr><tr><td>æ¡†æ¶å¼€å‘</td><td>åå°„æœºåˆ¶</td><td>åŠ¨æ€æ€§ï¼Œçµæ´»æ€§</td></tr><tr><td>å‡½æ•°å¼ç¼–ç¨‹</td><td>æ–¹æ³•å¼•ç”¨</td><td>ä»£ç ç®€æ´ï¼Œè¡¨è¾¾åŠ›å¼º</td></tr><tr><td>åˆ›å»ºå¯¹è±¡å‰¯æœ¬</td><td>clone()æ–¹æ³•</td><td>è¯­ä¹‰æ˜ç¡®ï¼Œä½¿ç”¨æ–¹ä¾¿</td></tr></tbody></table>
<p>ç®€å•åœºæ™¯ç”¨<code>new</code>ï¼Œå¤æ‚å¯¹è±¡ç”¨<code>Builder</code>ï¼Œéœ€è¦çµæ´»æ€§ç”¨å·¥å‚æ–¹æ³•æˆ–åå°„ã€‚</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜åˆ˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-9">ğŸ“Œå¾€æœŸç²¾å½©</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FU3HhCz5WiAMNM7foxuTa0w" target="_blank" title="https://mp.weixin.qq.com/s/U3HhCz5WiAMNM7foxuTa0w" ref="nofollow noopener noreferrer">ã€Šå‰ç«¯é«˜æ‰‹æ‰çŸ¥é“çš„ç§˜å¯†ï¼šBlob å±…ç„¶è¿™ä¹ˆå¼ºå¤§ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FX-MSa0CHwVW_qgPezbpMUA" target="_blank" title="https://mp.weixin.qq.com/s/X-MSa0CHwVW_qgPezbpMUA" ref="nofollow noopener noreferrer">ã€Šè¿™ 5 ä¸ªå†·é—¨ HTML æ ‡ç­¾ï¼Œè®©æˆ‘ç›´æ¥åˆ äº†100 è¡Œ JS ä»£ç ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FsMAKhSLNvmU1ddxg0yv9Fg" target="_blank" title="https://mp.weixin.qq.com/s/sMAKhSLNvmU1ddxg0yv9Fg" ref="nofollow noopener noreferrer">ã€Šé‡æ„äº†20ä¸ªSpringBooté¡¹ç›®åï¼Œæ€»ç»“å‡ºè¿™å¥—ç¨³å®šé«˜æ•ˆçš„æ¶æ„è®¾è®¡ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F184BGM_pdMFLc0ASrferwQ" target="_blank" title="https://mp.weixin.qq.com/s/184BGM_pdMFLc0ASrferwQ" ref="nofollow noopener noreferrer">ã€Šä»£ç é‡Œå…¨æ˜¯ new å¯¹è±¡ï¼ŒçœŸçš„å¾ˆ Low å—ï¼Ÿæˆ‘è®¤çœŸæƒ³äº†ä¸€æ™šã€‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ çœŸçš„ç†è§£ Interlocked.Exchange å—ï¼ŸC#.NET åŸå­æ“ä½œè¯¦è§£]]></title>    <link>https://juejin.cn/post/7591744347827109914</link>    <guid>https://juejin.cn/post/7591744347827109914</guid>    <pubDate>2026-01-05T23:01:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591744347827109914" data-draft-id="7591719013489262630" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½ çœŸçš„ç†è§£ Interlocked.Exchange å—ï¼ŸC#.NET åŸå­æ“ä½œè¯¦è§£"/> <meta itemprop="keywords" content="C#,.NET"/> <meta itemprop="datePublished" content="2026-01-05T23:01:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å”é’æ«"/> <meta itemprop="url" content="https://juejin.cn/user/3737995266234280"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½ çœŸçš„ç†è§£ Interlocked.Exchange å—ï¼ŸC#.NET åŸå­æ“ä½œè¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3737995266234280/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å”é’æ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T23:01:59.000Z" title="Mon Jan 05 2026 23:01:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä»€ä¹ˆæ˜¯ Interlocked.Exchangeï¼Ÿ</h3>
<p><code>Interlocked.Exchange</code> æ˜¯ <code>System.Threading.Interlocked</code> ç±»ä¸­çš„é™æ€æ–¹æ³•ï¼Œç”¨äºåŸå­åœ°æ›¿æ¢ï¼ˆäº¤æ¢ï¼‰ä¸€ä¸ªå˜é‡çš„å€¼ï¼Œå¹¶è¿”å›è¯¥å˜é‡çš„æ—§å€¼ã€‚æ•´ä¸ªè¯»-æ”¹-å†™è¿‡ç¨‹æ˜¯ä¸å¯åˆ†å‰²çš„ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚</p>
<ul>
<li>
<p>æ ¸å¿ƒä½œç”¨ï¼šæ— é”åœ°ï¼ˆ<code>lock-free</code>ï¼‰å°†å˜é‡è®¾ç½®ä¸ºæ–°å€¼ï¼ŒåŒæ—¶è·å–æ—§å€¼ã€‚</p>
</li>
<li>
<p>å¸¸è§é‡è½½ï¼š</p>
</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">Exchange</span>(<span class="hljs-params"><span class="hljs-keyword">ref</span> <span class="hljs-built_in">int</span> location, <span class="hljs-built_in">int</span> <span class="hljs-keyword">value</span></span>)</span>;
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">long</span> <span class="hljs-title">Exchange</span>(<span class="hljs-params"><span class="hljs-keyword">ref</span> <span class="hljs-built_in">long</span> location, <span class="hljs-built_in">long</span> <span class="hljs-keyword">value</span></span>)</span>;
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">float</span> <span class="hljs-title">Exchange</span>(<span class="hljs-params"><span class="hljs-keyword">ref</span> <span class="hljs-built_in">float</span> location, <span class="hljs-built_in">float</span> <span class="hljs-keyword">value</span></span>)</span>;
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">double</span> <span class="hljs-title">Exchange</span>(<span class="hljs-params"><span class="hljs-keyword">ref</span> <span class="hljs-built_in">double</span> location, <span class="hljs-built_in">double</span> <span class="hljs-keyword">value</span></span>)</span>;
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> T <span class="hljs-title">Exchange</span>&lt;<span class="hljs-title">T</span>&gt;(<span class="hljs-params"><span class="hljs-keyword">ref</span> T location, T <span class="hljs-keyword">value</span></span>) <span class="hljs-keyword">where</span> T : <span class="hljs-keyword">class</span></span>;  <span class="hljs-comment">// å¼•ç”¨ç±»å‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">object</span>? Exchange(<span class="hljs-keyword">ref</span> <span class="hljs-built_in">object</span>? location, <span class="hljs-built_in">object</span>? newValue);
</code></pre>
<ul>
<li>
<p>å‚æ•°ï¼š</p>
<ul>
<li>
<p><code>location</code>ï¼šè¦æ›¿æ¢çš„å…±äº«å˜é‡ï¼ˆå¿…é¡»refä¼ é€’ï¼Œç›´æ¥æ“ä½œå†…å­˜åœ°å€ï¼‰ã€‚</p>
</li>
<li>
<p><code>value / newValue</code>ï¼šè¦å†™å…¥çš„æ–°å€¼ã€‚</p>
</li>
</ul>
</li>
<li>
<p>è¿”å›å€¼ï¼šæ“ä½œå‰çš„æ—§å€¼ã€‚</p>
</li>
</ul>
<p>åº•å±‚åŸºäº <code>CPU</code> çš„åŸå­äº¤æ¢æŒ‡ä»¤ï¼ˆå¦‚ <code>x86</code> çš„ <code>xchg</code>ï¼‰ï¼Œæ€§èƒ½æé«˜ã€‚</p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆä½¿ç”¨ Interlocked.Exchangeï¼Ÿ</h3>
<p>æ™®é€šçš„ â€œè¯»å–å€¼ + èµ‹å€¼æ–°å€¼â€ æ˜¯ä¸¤æ­¥éåŸå­æ“ä½œï¼Œå¤šçº¿ç¨‹ä¸‹ä¼šå› ç«æ€æ¡ä»¶å¯¼è‡´é€»è¾‘é”™è¯¯</p>
<ul>
<li>å…¸å‹é—®é¢˜ï¼š</li>
</ul>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// éåŸå­æ“ä½œï¼šè¯»å–æ—§å€¼å’Œèµ‹å€¼æ–°å€¼ä¹‹é—´å¯èƒ½è¢«å…¶ä»–çº¿ç¨‹æ‰“æ–­</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> _flag = <span class="hljs-number">0</span>;
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> <span class="hljs-title">UnsafeReplace</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> newValue</span>)</span>
{
    <span class="hljs-built_in">int</span> oldValue = _flag; <span class="hljs-comment">// æ­¥éª¤1ï¼šè¯»å–æ—§å€¼</span>
    _flag = newValue;     <span class="hljs-comment">// æ­¥éª¤2ï¼šèµ‹å€¼æ–°å€¼</span>
    <span class="hljs-keyword">return</span> oldValue;      <span class="hljs-comment">// è¿”å›æ—§å€¼</span>
}
</code></pre>
<p>è‹¥ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶æ‰§è¡Œä¸Šè¿°ä»£ç ï¼Œå¯èƒ½å‡ºç° â€œçº¿ç¨‹ A è¯»å–æ—§å€¼åï¼Œçº¿ç¨‹ B å·²ä¿®æ”¹å€¼ï¼Œçº¿ç¨‹ A æœ€ç»ˆè¿”å›çš„æ—§å€¼ä¸å®é™…èµ‹å€¼å‰çš„æ—§å€¼ä¸ä¸€è‡´â€ çš„é—®é¢˜ã€‚
<code>Interlocked.Exchange</code> å°† â€œè¯»å–æ—§å€¼ + è®¾ç½®æ–°å€¼â€ åˆå¹¶ä¸ºä¸å¯ä¸­æ–­çš„åŸå­æ“ä½œï¼Œä»åº•å±‚æœç»ç«æ€æ¡ä»¶ï¼Œä¸”æ— éœ€é˜»å¡çº¿ç¨‹ï¼ˆæ— é”ï¼‰ã€‚</p>
<ul>
<li>
<p><code>Exchange</code> çš„ä¼˜åŠ¿ï¼š</p>
<ul>
<li>
<p>åŸå­æ€§ï¼šè¯»å–æ—§å€¼å’Œå†™å…¥æ–°å€¼ä¸€æ­¥å®Œæˆã€‚</p>
</li>
<li>
<p>é«˜æ€§èƒ½ï¼šæ— é”ï¼Œå¼€é”€æä½ã€‚</p>
</li>
<li>
<p>å¯è§æ€§ï¼šæ‰€æœ‰çº¿ç¨‹ç«‹å³å¯è§ã€‚</p>
</li>
<li>
<p>æœ‰åºæ€§ï¼šå†™å…¥å‰çš„æ“ä½œä¸ä¼šè¢«é‡æ’åˆ°ä¹‹åã€‚</p>
</li>
<li>
<p>æ— é”ï¼šä¸é˜»å¡çº¿ç¨‹ã€‚</p>
</li>
<li>
<p>é€‚ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>
<p>çº¿ç¨‹å®‰å…¨çš„çŠ¶æ€åˆ‡æ¢ï¼ˆå¦‚å¯ç”¨/ç¦ç”¨æ ‡å¿—ï¼‰ã€‚</p>
</li>
<li>
<p>å®ç°æ‡’åŠ è½½å•ä¾‹ï¼ˆæ›¿æ¢ <code>null</code> ä¸ºå®ä¾‹ï¼‰ã€‚</p>
</li>
<li>
<p>åŸå­æ›´æ–°å¼•ç”¨ï¼ˆå¦‚ç¼“å­˜å¯¹è±¡ï¼‰ã€‚</p>
</li>
<li>
<p>å®ç° <code>SpinLock</code> æˆ–è‡ªå®šä¹‰åŒæ­¥åŸè¯­ã€‚</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 data-id="heading-2">æ ¸å¿ƒåŸç†ï¼šCPU çº§åŸå­æŒ‡ä»¤</h3>
<p><code>Interlocked.Exchange</code> çš„åŸå­æ€§ä¾èµ– <code>CPU</code> ç¡¬ä»¶æŒ‡ä»¤ï¼š</p>
<ul>
<li>
<p><code>x86</code> æ¶æ„ï¼šä½¿ç”¨ <code>LOCK XCHG</code> æŒ‡ä»¤ï¼ˆ<code>LOCK</code> å‰ç¼€ç‹¬å å†…å­˜æ€»çº¿ï¼Œé˜»æ­¢å…¶ä»– <code>CPU</code> æ ¸å¿ƒä¿®æ”¹è¯¥å†…å­˜åœ°å€ï¼‰ï¼›</p>
</li>
<li>
<p><code>ARM</code> æ¶æ„ï¼šä½¿ç”¨ <code>SWP</code>ï¼ˆäº¤æ¢æŒ‡ä»¤ï¼‰æˆ– <code>LDXR/STXR</code>ï¼ˆåŠ è½½ - å­˜å‚¨ç‹¬å ï¼‰æŒ‡ä»¤ã€‚</p>
</li>
</ul>
<p>åŒæ—¶ï¼Œè¯¥æ“ä½œä¼šè§¦å‘å…¨å†…å­˜å±éšœï¼ˆ<code>Full Memory fence</code>ï¼‰ï¼š</p>
<ul>
<li>
<p>ä¿è¯æ“ä½œå‰åçš„å†…å­˜è¯»å†™ä¸ä¼šè¢« <code>CPU</code> é‡æ’åºï¼›</p>
</li>
<li>
<p>ç¡®ä¿æ‰€æœ‰çº¿ç¨‹èƒ½ç«‹å³çœ‹åˆ°å˜é‡çš„æœ€æ–°å€¼ï¼ˆé¿å… <code>CPU</code> ç¼“å­˜å¯¼è‡´çš„ â€œè„è¯»â€ï¼‰ã€‚</p>
</li>
</ul>
<h3 data-id="heading-3">åŸºç¡€ä½¿ç”¨ç¤ºä¾‹</h3>
<h4 data-id="heading-4">æœ€ç®€å•çš„åŸå­æ›¿æ¢ï¼ˆè¿”å›åŸå§‹å€¼ï¼‰</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> _counter = <span class="hljs-number">0</span>;

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">TestExchange</span>()</span>
{
    <span class="hljs-comment">// ç›®æ ‡ï¼šå°†_counterä»0æ›¿æ¢ä¸º100ï¼Œè·å–åŸå§‹å€¼</span>
    <span class="hljs-built_in">int</span> newValue = <span class="hljs-number">100</span>;
    <span class="hljs-built_in">int</span> originalValue = Interlocked.Exchange(<span class="hljs-keyword">ref</span> _counter, newValue);
    
    Console.WriteLine(<span class="hljs-string">$"åŸå§‹å€¼ï¼š<span class="hljs-subst">{originalValue}</span>ï¼Œæ–°å€¼ï¼š<span class="hljs-subst">{_counter}</span>"</span>);
    <span class="hljs-comment">// è¾“å‡ºï¼šåŸå§‹å€¼ï¼š0ï¼Œæ–°å€¼ï¼š100</span>

    <span class="hljs-comment">// å†æ¬¡æ›¿æ¢ï¼šå°†_counterä»100æ›¿æ¢ä¸º200</span>
    originalValue = Interlocked.Exchange(<span class="hljs-keyword">ref</span> _counter, <span class="hljs-number">200</span>);
    Console.WriteLine(<span class="hljs-string">$"åŸå§‹å€¼ï¼š<span class="hljs-subst">{originalValue}</span>ï¼Œæ–°å€¼ï¼š<span class="hljs-subst">{_counter}</span>"</span>);
    <span class="hljs-comment">// è¾“å‡ºï¼šåŸå§‹å€¼ï¼š100ï¼Œæ–°å€¼ï¼š200</span>
}
</code></pre>
<h4 data-id="heading-5">çº¿ç¨‹å®‰å…¨æ ‡å¿—ä½</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> _isProcessing = <span class="hljs-number">0</span>; <span class="hljs-comment">// 0=æœªå¤„ç†, 1=å¤„ç†ä¸­</span>

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> <span class="hljs-title">StartProcessing</span>()</span>
{
    <span class="hljs-comment">// å¦‚æœå½“å‰ä¸º0ï¼ˆæœªå¤„ç†ï¼‰ï¼Œåˆ™è®¾ä¸º1ï¼ˆå¤„ç†ä¸­ï¼‰å¹¶è¿”å›true</span>
    <span class="hljs-keyword">return</span> Interlocked.Exchange(<span class="hljs-keyword">ref</span> _isProcessing, <span class="hljs-number">1</span>) == <span class="hljs-number">0</span>;
}

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">EndProcessing</span>()</span>
{
    <span class="hljs-comment">// é‡ç½®ä¸ºæœªå¤„ç†çŠ¶æ€</span>
    Interlocked.Exchange(<span class="hljs-keyword">ref</span> _isProcessing, <span class="hljs-number">0</span>);
}
</code></pre>
<h4 data-id="heading-6">ä¸€æ¬¡æ€§èµ„æºé‡Šæ”¾ï¼ˆé˜²æ­¢é‡å¤ Disposeï¼‰</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">private</span> IDisposable? _resource;

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Dispose</span>()</span>
{
    <span class="hljs-keyword">var</span> res = Interlocked.Exchange(<span class="hljs-keyword">ref</span> _resource, <span class="hljs-literal">null</span>);
    res?.Dispose();
}
</code></pre>
<h4 data-id="heading-7">æ— é”å‘å¸ƒå¯¹è±¡ï¼ˆSafe Publicationï¼‰</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">private</span> <span class="hljs-built_in">object</span>? _instance;

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">object</span> <span class="hljs-title">GetOrCreate</span>()</span>
{
    <span class="hljs-keyword">if</span> (_instance != <span class="hljs-literal">null</span>)
        <span class="hljs-keyword">return</span> _instance;

    <span class="hljs-keyword">var</span> newObj = <span class="hljs-keyword">new</span> <span class="hljs-built_in">object</span>();
    Interlocked.Exchange(<span class="hljs-keyword">ref</span> _instance, newObj);
    <span class="hljs-keyword">return</span> newObj;
}
</code></pre>
<h4 data-id="heading-8">å¤šçº¿ç¨‹ä¸‹çš„åŸå­çŠ¶æ€åˆ‡æ¢</h4>
<p>ç”¨ <code>Exchange</code> å®ç°çº¿ç¨‹å®‰å…¨çš„ â€œä¸€æ¬¡æ€§åˆå§‹åŒ–â€ï¼ˆçŠ¶æ€ä»æœªåˆå§‹åŒ–â†’å·²åˆå§‹åŒ–ï¼Œä»…æ‰§è¡Œä¸€æ¬¡ï¼‰ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// çŠ¶æ€æšä¸¾ï¼š0=æœªåˆå§‹åŒ–ï¼Œ1=åˆå§‹åŒ–ä¸­ï¼Œ2=å·²åˆå§‹åŒ–</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> _initState = <span class="hljs-number">0</span>;
<span class="hljs-comment">// æ¨¡æ‹Ÿåˆå§‹åŒ–æˆæœ¬é«˜çš„å¯¹è±¡</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ExpensiveObject? _expensiveObj;

<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> çº¿ç¨‹å®‰å…¨çš„ä¸€æ¬¡æ€§åˆå§‹åŒ–</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> ExpensiveObject <span class="hljs-title">GetExpensiveObject</span>()</span>
{
    <span class="hljs-comment">// 1. åŸå­æ›¿æ¢ï¼šå°†çŠ¶æ€ä»0ï¼ˆæœªåˆå§‹åŒ–ï¼‰æ”¹ä¸º1ï¼ˆåˆå§‹åŒ–ä¸­ï¼‰</span>
    <span class="hljs-built_in">int</span> originalState = Interlocked.Exchange(<span class="hljs-keyword">ref</span> _initState, <span class="hljs-number">1</span>);
    
    <span class="hljs-comment">// 2. åªæœ‰åŸå§‹çŠ¶æ€æ˜¯0çš„çº¿ç¨‹ï¼Œæ‰§è¡Œåˆå§‹åŒ–</span>
    <span class="hljs-keyword">if</span> (originalState == <span class="hljs-number">0</span>)
    {
        Console.WriteLine(<span class="hljs-string">$"çº¿ç¨‹<span class="hljs-subst">{Thread.CurrentThread.ManagedThreadId}</span>ï¼šæ‰§è¡Œåˆå§‹åŒ–..."</span>);
        _expensiveObj = <span class="hljs-keyword">new</span> ExpensiveObject(); <span class="hljs-comment">// è€—æ—¶åˆå§‹åŒ–</span>
        <span class="hljs-comment">// 3. åˆå§‹åŒ–å®Œæˆï¼Œå°†çŠ¶æ€æ”¹ä¸º2ï¼ˆå·²åˆå§‹åŒ–ï¼‰</span>
        Interlocked.Exchange(<span class="hljs-keyword">ref</span> _initState, <span class="hljs-number">2</span>);
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">// å…¶ä»–çº¿ç¨‹ç­‰å¾…åˆå§‹åŒ–å®Œæˆ</span>
        <span class="hljs-keyword">while</span> (_initState != <span class="hljs-number">2</span>)
        {
            Thread.SpinWait(<span class="hljs-number">10</span>); <span class="hljs-comment">// è‡ªæ—‹ç­‰å¾…ï¼ˆè½»é‡çº§ï¼‰</span>
        }
        Console.WriteLine(<span class="hljs-string">$"çº¿ç¨‹<span class="hljs-subst">{Thread.CurrentThread.ManagedThreadId}</span>ï¼šåˆå§‹åŒ–å·²å®Œæˆï¼Œç›´æ¥è¿”å›å¯¹è±¡"</span>);
    }
    
    <span class="hljs-keyword">return</span> _expensiveObj!;
}

<span class="hljs-comment">// æµ‹è¯•ï¼š10ä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨ï¼Œä»…1ä¸ªçº¿ç¨‹æ‰§è¡Œåˆå§‹åŒ–</span>
<span class="hljs-keyword">var</span> tasks = Enumerable.Range(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>)
    .Select(_ =&gt; Task.Run(() =&gt; GetExpensiveObject()))
    .ToList();
Task.WaitAll(tasks.ToArray());

<span class="hljs-comment">// æ¨¡æ‹Ÿåˆ›å»ºæˆæœ¬é«˜çš„å¯¹è±¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ExpensiveObject</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ExpensiveObject</span>()</span>
    {
        Thread.Sleep(<span class="hljs-number">1000</span>); <span class="hljs-comment">// æ¨¡æ‹Ÿ1ç§’è€—æ—¶åˆå§‹åŒ–</span>
    }
}
</code></pre>
<p>è¾“å‡ºç»“æœ</p>
<p>ä»… 1 ä¸ªçº¿ç¨‹æ‰§è¡Œåˆå§‹åŒ–ï¼Œå…¶ä½™çº¿ç¨‹ç­‰å¾…åç›´æ¥è¿”å›å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">çº¿ç¨‹<span class="hljs-number">3</span>ï¼šæ‰§è¡Œåˆå§‹åŒ–...
çº¿ç¨‹<span class="hljs-number">4</span>ï¼šåˆå§‹åŒ–å·²å®Œæˆï¼Œç›´æ¥è¿”å›å¯¹è±¡
çº¿ç¨‹<span class="hljs-number">5</span>ï¼šåˆå§‹åŒ–å·²å®Œæˆï¼Œç›´æ¥è¿”å›å¯¹è±¡
...ï¼ˆå…¶ä½™çº¿ç¨‹å‡è¾“å‡ºæ­¤å†…å®¹ï¼‰
</code></pre>
<h3 data-id="heading-9">é«˜çº§åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-10">å•ä¾‹æ¨¡å¼ï¼ˆç»“åˆ <code>Exchange</code> å®ç°æ‡’åŠ è½½ï¼‰</h4>
<p>ç”¨ <code>Exchange</code> æ›¿ä»£ <code>lock</code> å®ç°é«˜æ€§èƒ½å•ä¾‹</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title">LazySingleton</span>
{
    <span class="hljs-comment">// å•ä¾‹å®ä¾‹ï¼ˆå¼•ç”¨ç±»å‹ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> LazySingleton? _instance;
    <span class="hljs-comment">// åˆå§‹åŒ–æ ‡è®°ï¼š0=æœªåˆå§‹åŒ–ï¼Œ1=å·²åˆå§‹åŒ–</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">int</span> _initialized = <span class="hljs-number">0</span>;

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">LazySingleton</span>()</span> { } <span class="hljs-comment">// ç§æœ‰æ„é€ </span>

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> LazySingleton Instance
    {
        <span class="hljs-keyword">get</span>
        {
            <span class="hljs-comment">// åŸå­æ›¿æ¢ï¼šå°†_initializedä»0æ”¹ä¸º1ï¼Œä»…ç¬¬ä¸€æ¬¡è°ƒç”¨è¿”å›0</span>
            <span class="hljs-keyword">if</span> (Interlocked.Exchange(<span class="hljs-keyword">ref</span> _initialized, <span class="hljs-number">1</span>) == <span class="hljs-number">0</span>)
            {
                _instance = <span class="hljs-keyword">new</span> LazySingleton(); <span class="hljs-comment">// ä»…æ‰§è¡Œä¸€æ¬¡åˆå§‹åŒ–</span>
            }
            <span class="hljs-keyword">return</span> _instance!;
        }
    }
}
</code></pre>
<h4 data-id="heading-11">å–æ¶ˆä»¤ç‰Œçš„åŸå­é‡ç½®</h4>
<p>ç”¨ <code>Exchange</code> åŸå­æ›¿æ¢ <code>CancellationTokenSource</code>ï¼Œå®ç° â€œå–æ¶ˆåé‡ç½®â€ çš„çº¿ç¨‹å®‰å…¨é€»è¾‘ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> CancellationTokenSource? _cts = <span class="hljs-keyword">new</span> CancellationTokenSource();

<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;summary&gt;</span></span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> åŸå­é‡ç½®å–æ¶ˆä»¤ç‰Œï¼ˆå–æ¶ˆæ—§ä»¤ç‰Œï¼Œåˆ›å»ºæ–°ä»¤ç‰Œï¼‰</span>
<span class="hljs-comment"><span class="hljs-doctag">///</span> <span class="hljs-doctag">&lt;/summary&gt;</span></span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> CancellationToken <span class="hljs-title">ResetCts</span>()</span>
{
    <span class="hljs-comment">// 1. åŸå­æ›¿æ¢æ—§çš„Ctsä¸ºæ–°å®ä¾‹ï¼Œè·å–æ—§å®ä¾‹</span>
    CancellationTokenSource? oldCts = Interlocked.Exchange(<span class="hljs-keyword">ref</span> _cts, <span class="hljs-keyword">new</span> CancellationTokenSource());
    <span class="hljs-comment">// 2. å–æ¶ˆæ—§ä»¤ç‰Œï¼ˆé¿å…æ—§ä»»åŠ¡ç»§ç»­æ‰§è¡Œï¼‰</span>
    <span class="hljs-keyword">if</span> (oldCts != <span class="hljs-literal">null</span>)
    {
        oldCts.Cancel();
        oldCts.Dispose();
    }
    <span class="hljs-comment">// 3. è¿”å›æ–°ä»¤ç‰Œ</span>
    <span class="hljs-keyword">return</span> _cts.Token;
}
</code></pre>
<h4 data-id="heading-12">å¼•ç”¨ç±»å‹ï¼šåŸå­æ›¿æ¢å¯¹è±¡å¼•ç”¨ï¼ˆæœ€å¸¸ç”¨ï¼‰</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">private</span> ExpensiveObject? _cache = <span class="hljs-literal">null</span>;

<span class="hljs-function"><span class="hljs-keyword">public</span> ExpensiveObject <span class="hljs-title">GetOrCreate</span>()</span>
{
    <span class="hljs-comment">// å¦‚æœä¸º nullï¼ŒåŸå­æ›¿æ¢ä¸ºæ–°å®ä¾‹</span>
    <span class="hljs-keyword">var</span> newInstance = <span class="hljs-keyword">new</span> ExpensiveObject();
    <span class="hljs-keyword">var</span> oldInstance = Interlocked.Exchange(<span class="hljs-keyword">ref</span> _cache, newInstance);

    <span class="hljs-keyword">return</span> oldInstance ?? newInstance;  <span class="hljs-comment">// å¦‚æœæ—§å€¼ä¸º nullï¼Œè¿”å›æ–°å®ä¾‹</span>
}
</code></pre>
<h4 data-id="heading-13">ä¸ Interlocked.CompareExchange çš„å…³ç³»</h4>

















<table><thead><tr><th>æ–¹æ³•</th><th>è¡Œä¸º</th></tr></thead><tbody><tr><td>Exchange</td><td>æ— æ¡ä»¶æ›¿æ¢</td></tr><tr><td>CompareExchange</td><td>æ¡ä»¶æ›¿æ¢ï¼ˆCASï¼‰</td></tr></tbody></table>
<p>å¯¹æ¯”ç¤ºä¾‹</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// Exchangeï¼šä¸ç®¡åŸæ¥æ˜¯ä»€ä¹ˆï¼Œéƒ½æ¢</span>
Interlocked.Exchange(<span class="hljs-keyword">ref</span> state, <span class="hljs-number">1</span>);

<span class="hljs-comment">// CompareExchangeï¼šåªæœ‰ state == 0 æ‰æ¢</span>
Interlocked.CompareExchange(<span class="hljs-keyword">ref</span> state, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>);
</code></pre>
<h3 data-id="heading-14">æ€»ç»“</h3>
<blockquote>
<p>Interlocked.Exchange æ˜¯ .NET ä¸­æœ€ç®€å•ã€æœ€å¿«ã€æœ€å®‰å…¨çš„â€œåŸå­æ›¿æ¢â€æ“ä½œï¼Œ
å®ƒæ˜¯å®ç°ä¸€æ¬¡æ€§æ‰§è¡Œã€æ— é”çŠ¶æ€åˆ‡æ¢ã€å®‰å…¨å¯¹è±¡å‘å¸ƒçš„åŸºçŸ³ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è€—æ—¶ 8 å¤©ï¼Œæˆ‘ç”¨ Claude Code å¼€å‘äº† AI æ¼«å‰§ APPï¼Œå¹¶å¼€æºäº†ã€‚]]></title>    <link>https://juejin.cn/post/7591719013488410662</link>    <guid>https://juejin.cn/post/7591719013488410662</guid>    <pubDate>2026-01-05T16:04:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591719013488410662" data-draft-id="7591744347826503706" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è€—æ—¶ 8 å¤©ï¼Œæˆ‘ç”¨ Claude Code å¼€å‘äº† AI æ¼«å‰§ APPï¼Œå¹¶å¼€æºäº†ã€‚"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-05T16:04:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä½•"/> <meta itemprop="url" content="https://juejin.cn/user/588993963763405"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è€—æ—¶ 8 å¤©ï¼Œæˆ‘ç”¨ Claude Code å¼€å‘äº† AI æ¼«å‰§ APPï¼Œå¹¶å¼€æºäº†ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/588993963763405/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä½•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T16:04:08.000Z" title="Mon Jan 05 2026 16:04:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯è‹ä½•çš„ç¬¬ 468 ç¯‡åŸåˆ›ï¼</p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯çƒ­çˆ±ç¼–ç¨‹çš„è‹ä½•ã€‚</p>
<p>å»å¹´åº•çš„æ—¶å€™ï¼Œæˆ‘å†™è¿‡ 2 ç¯‡ AI æ¼«å‰§çš„æ–‡ç« ï¼Œæ„Ÿå…´è¶£çš„è¿˜æŒºå¤šçš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3b263dc3f18463daaa32ce43506a5ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=7yWUd7ZSPKtXCRW2qk3QRr8Z9Ng%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¹Ÿè®¤è¯†äº†éå¸¸å¤šåš AI æ¼«å‰§çš„æœ‹å‹ï¼Œæˆ‘ä»¬æ­¦æ±‰ AI åœˆä¹Ÿä¸¾åŠäº† AI æ¼«å‰§æ²™é¾™ï¼Œæ¥äº†è¶…çº§å¤šçš„æ„Ÿå…´è¶£çš„åœˆå‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1af939f4fa9744fa8512aa7e3163829d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=38%2B4FqgBEnRvdM3j3QxGMyeqYMQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¬äº†å¾ˆå¤šçš„å¹²è´§åˆ†äº«ï¼Œå½“æ—¶è„‘æµ·ä¸­åªæƒ³å¿«é€Ÿä¸Šæ‰‹æ¥åšæ¼«å‰§ã€‚</p>
<p>ä½†æˆ‘çœ‹äº†å¾ˆå¤šçš„å¹³å°ç›®å‰è¿˜åªèƒ½åœ¨ç”µè„‘ web ä¸Šæ“ä½œï¼Œæ‰‹æœºéšæ—¶åˆ›ä½œæˆ‘è¿˜æ²¡æ‰¾åˆ°ä»€ä¹ˆå¥½çš„ APPã€‚</p>
<p>å½“æ—¶å°±æœ‰ä¸€è‚¡å†²åŠ¨ï¼Œè¦ä¸è‡ªå·±æ¥å°è¯•æä¸€ä¸ªï¼Ÿå½“æˆ‘å’Œè€å©†è¯´è¿™ä¸ªæƒ³æ³•çš„æ—¶å€™ï¼Œå¥¹è¯´æˆ‘ä¸€å®šç–¯äº†ã€‚</p>
<p>ä¸ºäº†è¯æ˜æˆ‘ä¸æ˜¯ç–¯å­ï¼Œæˆ‘è¿˜æ˜¯å’¬ç‰™å†³å®šå°è¯•ï¼Œæ¯•ç«Ÿä¸ç•™é—æ†¾æ‰æ˜¯æˆ‘çš„äººç”Ÿä¸»æ—‹å¾‹ã€‚</p>
<p>è€—æ—¶ 8 å¤©ï¼Œä»Šå¤©ç»ˆäºå¯ä»¥æ‹¿å‡ºæ¥å’Œå¤§å®¶åˆ†äº«äº†ï¼Œ<strong>ä¸€ä¸ªå¯ä»¥åœ¨æ‰‹æœºç«¯åˆ›å»ºæ¼«å‰§çš„ appï¼Œæˆ‘ç»™å®ƒèµ·åå«åšæ¼«å¯¼</strong>ï¼Œæ²¡é”™å°±æ˜¯è¿™ä¹ˆé€šä¿—æ˜“æ‡‚ï¼›åˆ¶ä½œæ¼«å‰§çš„å¯¼æ¼”ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfa54130005e4829b2339b91467b5305~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=TKScWdLS%2FJAtcV4285OER0vnHxE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒèƒ½æ ¹æ®çµæ„Ÿä¸€å¥è¯åˆ›å»ºå‰§æœ¬ã€è§’è‰²ã€åœºæ™¯ï¼Œç„¶åè‡ªåŠ¨ç”Ÿæˆåˆ†é•œå›¾ç‰‡å’Œåˆ†é•œè§†é¢‘ï¼Œæœ€åæ ¹æ®åˆ†é•œè§†é¢‘æ¥åˆæˆä¸€ä¸ªå®Œæ•´çš„æ¼«å‰§è§†é¢‘ã€‚</p>
<p>æˆ‘å½•äº†ä¸ªè§†é¢‘ç»™å¤§å®¶åšä¸ªå±•ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24e27465dc4d473797581a989a2a54b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=AwxyqBynV1X1qbw1rTtdprNbA0E%3D" alt="wxv_4328552654785167363" loading="lazy"/></p>
<p>8 å¤©æ—¶é—´å‡ºæ¥ä¸€ä¸ª AI æ¼«å‰§ APP çš„ MVP ç‰ˆæœ¬ï¼ˆè¿™å…¶ä¸­è¿˜ä¸åŒ…æ‹¬å…ƒæ—¦æ”¾å‡ 3 å¤©ï¼‰ï¼Œæˆ‘è‡ªå·±å·²ç»ç›¸å½“æ»¡æ„äº†ï¼Œäººç‰©ä¸€è‡´æ€§å·²ç»å®Œæˆçš„å¾ˆé«˜äº†ğŸ‘</p>
<p>æœ€åè¯´ä¸€ä¸‹å£°éŸ³ä¸ºå•¥ä¸æ˜¯ä¸­æ–‡ï¼ŒæŠ±æ­‰è¿˜æ²¡æ¥å¾—åŠçº¦æŸğŸ˜„ã€‚å¿ä¸ä½æƒ³åˆ†äº«äº†ã€‚</p>
<p>è€Œä¸”ä½ å¯èƒ½æƒ³è±¡ä¸åˆ°çš„æ˜¯ï¼Œæ•´ä¸ª APP çš„å¼€å‘ï¼Œæˆ‘ç”¨çš„æ˜¯æœ€è¿‘å¾ˆç«çš„æ™ºè°±çš„ GLM 4.7 æ¨¡å‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4eed6209f7a447a9a08d5aacc8941082~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=9kgLXnvCZqzM2Xyo5Bcb68t5VMs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½ çœ‹æˆ‘çš„ token æ¶ˆè€—é‡ï¼Œè¿™é‡Œé¢åŒ…å«äº†ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯å¼€å‘ app ä½¿ç”¨çš„é‡ï¼Œä¸€éƒ¨åˆ†æ˜¯ä½¿ç”¨ app è§„åˆ’å‰§æœ¬ä½¿ç”¨çš„é‡ã€‚è¯´å®è¯æ²¡æƒ³åˆ°è¿™ä¹ˆå¤šã€‚</p>
<p>å†çœ‹çœ‹è´¦å•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/933b1c2137c948e485f1ff11caf14fcc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=xAanL8tEE8L3RLnI5O69VW2DD5A%3D" alt="å›¾ç‰‡" loading="lazy"/><br/>
æ²¡é”™ 20RMBã€‚å“¦å¯¹äº†ï¼Œæˆ‘è¿˜åœ¨ä»–ä»¬ææ´»åŠ¨çš„æ—¶å€™è–…äº†ä¸€æ¯å¥¶èŒ¶ã€‚æœ‰ç‚¹å¤§è–…ç‰¹è–…çš„æ„Ÿè§‰ï¼›</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba5a7ceeac304ca59bbb9ae65151ba5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=1sjOqo1tPogIrrHRwvYFxEVjrnw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æˆ‘å·²ç»æŠŠè¿™ä¸ª AI æ¼«å‰§ APP å¼€æºäº†ï¼Œåé¢ä¹Ÿå¸Œæœ›æœ‰æ›´å¤šçš„å¼€å‘è€…å‚ä¸åˆ°æˆ‘ä»¬çš„å…±å»ºä¸­æ¥ã€‚</p>
<blockquote>
<p>å¼€æºåœ°å€ï¼ˆæ±‚ starï¼‰ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffreestylefly%2Fdirector_ai" target="_blank" title="https://github.com/freestylefly/director_ai" ref="nofollow noopener noreferrer">github.com/freestyleflâ€¦</a></p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9c41810092674b83ad241b8429b88df2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=n9W%2B83auegmAsmGdyniHqFsxMOs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸€ç¯‡æ–‡ç« å‘¢ï¼Œæˆ‘ä¸»è¦æ˜¯æƒ³å’Œä½ åˆ†äº«ä¸€ä¸‹æˆ‘çš„å¼€å‘å†ç¨‹ï¼Œä¹Ÿé¡ºå¸¦æ¥æ‹·æ‰“ GLM 4.7 è¿›è¡Œ AI Coding çš„èƒ½åŠ›è¾¹ç•Œã€‚</p>
<p>æˆ‘æ€»ç»“äº†ä¸€ä¸‹å¤§æ¦‚çš„æµç¨‹æ˜¯è¿™æ ·å­çš„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a70dbbed473c4a13829b98722762b2b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=iAGhDtFxsP76eOoIrnvpDWHbr40%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…¶ä¸­ï¼Œæˆ‘æ¯”è¾ƒå…³å¿ƒçš„æ˜¯äººç‰©ä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bab653b5c16c4e87a7467a76f6023312~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=7jFaDBJ4Qq9NsJohv9tun7vP4pQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨å¯¹åº”åœºæ™¯çš„é…ç½®é»˜è®¤æ˜¯ç»™äº† 7 ä¸ªï¼Œè§’è‰²æ˜¯ç»™äº† 2 ä¸ªï¼Œç„¶åè¿™äº›æˆ‘éƒ½è®¾ç½®æˆå¯é…ç½®çš„äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d37f6e251f84c0593febba5ef239b92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=vAoUJCcBAa84fbPUFkdr%2FOxSFRY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸‹é¢åˆ†äº«ä¸‹æˆ‘çš„å¼€å‘å†ç¨‹ï¼Œå¯èƒ½ä¼šæ˜¾å¾—æ–‡ç« ä¼šæœ‰äº›é•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ï¼Œè½¬å‘ç»™éœ€è¦çš„æœ‹å‹ğŸ‘­</p>
<h2 data-id="heading-0">å·¥å…·é€‰æ‹©</h2>
<p>è¿™æ¬¡çš„ä»»åŠ¡æœ‰ç‚¹é‡ï¼Œå·¥å…·é€‰æ‹©å¾ˆé‡è¦ï¼Œç»ˆç«¯çš„è¯å°±é€‰æœ€è¿‘å…¨ç½‘åˆåœ¨å–·ç«çš„ Claude Codeï¼Œæ¨¡å‹ç”¨æ™ºè°± GLM 4.7ã€‚</p>
<p>å‡ æ–¹é¢è€ƒè™‘ï¼Œä¸€ä¸ªæ˜¯èƒ½åŠ›ï¼Œä¸€ä¸ªæ˜¯ä»·æ ¼ã€‚</p>
<p>èƒ½åŠ›ä¾§ï¼Œå…ˆæ¥çœ‹ä¸€å¼ æ—¶é—´å–è‡ªäº 2025 å¹´ 12 æœˆ 22æ—¥çš„æ¨¡å‹æ¦œå•å›¾ï¼Œå¯ä»¥çœ‹åˆ°å’Œ Claude Opus 4.5 æ‰“çš„æœ‰æ¥æœ‰å›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0cd90ba5a9147a6bf3b204f365d8c0b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=G2sc%2BIMilpVvKjVCcnVL1Jf1XMM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å†çœ‹çœ‹æœ€å…³å¿ƒçš„ä»·æ ¼ï¼Œè¿™æ˜¯ Claude çš„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7c4b5c2c9d4486faf63659bca672148~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=XBCatOk2VGoSXPSdbv3G6XrVLgM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸ªæ˜¯ GLM Coding çš„å¥—é¤ï¼Œä¸æƒ³è¯´å•¥äº†ï¼Œæ²¡æœ‰å¯¹æ¯”å°±æ²¡æœ‰ä¼¤å®³å•Šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d632e6a59102430fb45aaa2ddd874e09~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=qIAo%2BeA0DOG%2B6c%2FAGb7%2Byfcn6oE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è™½ç„¶æˆ‘çœ‹äº†éå¸¸å¤šç½‘ä¸Šçš„æµ‹è¯„ï¼Œä½†ä¸€å¼€å§‹å¯¹ GLM 4.7 åšæ¼«å‰§ APP è¿™ä»¶äº‹ï¼Œæœ¬èº«æ˜¯æŠ±æœ‰æ€€ç–‘æ€åº¦çš„ï¼Œåé¢è¯æ˜ï¼Œä»–çœŸçš„è¡Œï¼Œè€Œä¸”è¶…å‡ºäº†æˆ‘çš„é¢„æœŸã€‚</p>
<h2 data-id="heading-1">å¼€å‘å†ç¨‹</h2>
<p>é¦–å…ˆç›´æ¥ç¼–å†™æç¤ºè¯å‘ŠçŸ¥è¦åšä»€ä¹ˆï¼Œè¿™ä¸ªå¾ˆé‡è¦ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">æç¤ºè¯ï¼šç°åœ¨å¸®æˆ‘ç¼–å†™ä¸€ä¸ªå®‰å“è½¯ä»¶ï¼Œç”¨é€”æ˜¯åˆ¶ä½œAI æ¼«å‰§ï¼Œå’Œç”¨æˆ·å¯¹è¯çš„æ–¹å¼æ¥äº†è§£ç”¨æˆ·æƒ³åˆ¶ä½œä»€ä¹ˆæ ·å­çš„æ¼«å‰§ï¼Œå¯¹è¯å¤§æ¨¡å‹ä½¿ç”¨çš„æ˜¯ glmÂ 4.7,ç›¸å…³çš„æ¥å£æ–‡æ¡£éƒ½ä¿å­˜åœ¨è¿™ä¸ªç›®å½•ä¸‹é¢
director_ai/docs/å›¾åƒç”ŸæˆAPIæ¥å£æ–‡æ¡£.md
director_ai/docs/è§†é¢‘å¤„ç†å…¨é›†.md
è¿™é‡Œçš„æ¥å£æ–‡æ¡£æ˜¯æˆ‘å»ç½‘ç«™ä¸Šä¸‹è½½æ¥äº†çš„ã€‚
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/164fabd87b7646eea45a4620e93508b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=ox33VKloLiOQhvGwP%2F%2FDEGM4clQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Claude Code åƒæ‰“äº†é¸¡è¡€ä¸€æ ·ï¼Œå­å“§å­å“§çš„å¹²è´§ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/187f98c3fdd64a24902d1bb8c0869eae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=9XlVDs3%2FNRTHHjU4Vt%2BSY4hs9uQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™é‡Œæœ€å¥½ç»™ GLM 4.7 è§„åˆ’ä¸‹æ¶æ„ï¼Œé˜²æ­¢è·‘åï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile">æç¤ºè¯ï¼š
æ ¸å¿ƒæŠ€æœ¯æ ˆæ¨è
ä¸ºäº†æœ€å¿«é€Ÿåº¦å‡ºåŸå‹ï¼ˆMVPï¼‰ä¸”é€‚é…å®‰å“ï¼š

å¼€å‘å·¥å…· (IDE/Agent):Â ClaudeÂ CodeÂ (åŸºäº CLI çš„å…¨èƒ½ç¼–ç¨‹åŠ©æ‰‹)ã€‚

<span class="hljs-section">å‰ç«¯æ¡†æ¶:Â FlutterÂ (Dart)ã€‚</span>

ç†ç”±ï¼š Claude å¯¹ Flutter ä»£ç ç”Ÿæˆçš„å‡†ç¡®åº¦æé«˜ï¼Œä¸” Flutter å¼€å‘å®‰å“åº”ç”¨é€Ÿåº¦å¿«ã€UI æ•ˆæœå¥½ï¼Œèƒ½å¤Ÿè½»æ¾å¤„ç†å¼‚æ­¥ç½‘ç»œè¯·æ±‚ï¼ˆAPI è°ƒç”¨ï¼‰ã€‚

<span class="hljs-section">æ ¸å¿ƒå¤§è„‘: GLM-4.7Â (é€šè¿‡ API è°ƒç”¨)ã€‚</span>

ç†ç”±ï¼š è´Ÿè´£ç†è§£ç”¨æˆ·æ„å›¾ï¼Œæ‹†è§£æ­¥éª¤ï¼Œè¾“å‡º JSON æ ¼å¼çš„æŒ‡ä»¤ã€‚

<span class="hljs-section">å¤šæ¨¡æ€æ¥å£: tu-zi.comÂ (ä½ æä¾›çš„ Gemini ç»˜å›¾ + Veo è§†é¢‘æ¥å£)ã€‚</span>
</code></pre>
<p>æ¶æ„è®¾è®¡è¿™é‡Œæˆ‘é‡‡ç”¨ ReAct æ¨¡å¼ (Reasoning + Acting)ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">æ¶æ„è®¾è®¡ï¼šReAct æ¨¡å¼ (Reasoning + Acting)
ä¸ºäº†å‡¸æ˜¾ GLM-<span class="hljs-number">4.7</span>Â çš„è§„åˆ’èƒ½åŠ›ï¼Œä¸èƒ½æŠŠä»£ç å†™æ­»ï¼ˆç¡¬ç¼–ç ï¼‰ã€‚æˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªç®€å•çš„ ReAct (Reason-Act) å¾ªç¯ã€‚

æµç¨‹é€»è¾‘ï¼š

ç”¨æˆ·è¾“å…¥:Â <span class="hljs-string">"å¸®æˆ‘åšä¸€ä¸ªç†ŠçŒ«åƒç«¹å­çš„è§†é¢‘ï¼Œè¦å¯çˆ±çš„é£æ ¼ã€‚"</span>

GLM-<span class="hljs-number">4.7</span>Â (è§„åˆ’å±‚): æ€è€ƒå¹¶è¾“å‡ºï¼š<span class="hljs-string">"æˆ‘éœ€è¦å…ˆç”Ÿæˆæ–‡æ¡ˆï¼Œç„¶åç”Ÿæˆå›¾ç‰‡ï¼Œæœ€åç”Ÿæˆè§†é¢‘ã€‚"</span>Â -&gt; è¾“å‡ºç¬¬ä¸€ä¸ªå·¥å…·è°ƒç”¨æŒ‡ä»¤ã€‚

App (æ‰§è¡Œå±‚): è§£ææŒ‡ä»¤ï¼Œè°ƒç”¨ç»˜å›¾ APIã€‚

App (åé¦ˆå±‚): å°†å›¾ç‰‡ URL å–‚å›ç»™ GLM-<span class="hljs-number">4.7</span>ã€‚

GLM-<span class="hljs-number">4.7</span>Â (è§„åˆ’å±‚):Â <span class="hljs-string">"æ”¶åˆ°å›¾ç‰‡ï¼Œç°åœ¨è°ƒç”¨è§†é¢‘ç”Ÿæˆæ¥å£ã€‚"</span>

App (æ‰§è¡Œå±‚): è°ƒç”¨ Veo è§†é¢‘æ¥å£ã€‚
</code></pre>
<p>å°ç™½ä¸ç”¨ç®¡ï¼Œå°±æ˜¯ä¸€è¹²ä¹±ä¸ƒå…«ç³Ÿçš„åŸºç¡€æ­å»ºï¼Œæˆ‘ä¸€è·¯yes å°±è¡Œã€‚æœ¬èº«æˆ‘ä¹Ÿä¸æ‡‚ App å¼€å‘ï¼Œæ­¤æ—¶æˆ‘é€‰æ‹©ç›¸ä¿¡ GLM 4.7;</p>
<p>æ¥ä¸‹æ¥è§£é‡Š Coding æ—¶åˆ»ï¼Œå¤§æ¦‚ç”¨äº†ååˆ†é’Ÿï¼Œä¸€ä¸ªç”±é›¶åˆ°ä¸€çš„ APP é›å½¢è¯ç”Ÿäº†ï¼Œè¿™æ˜¯ä½¿ç”¨çš„ token é‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97ae601fd4034e558464592d717397aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=DTJKCh%2BI1FMSGUufMmopkk1KSC8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç”µè„‘è°ƒè¯•å¯åŠ¨é‚£ä¸€åˆ»æˆ‘æƒŠå‘†äº†ã€‚çœŸçš„å‡ºæ¥äº†ï¼Œçœ‹çœ‹ç•Œé¢ï¼Œç¾å­¦ä¹Ÿè¿˜å¾ˆä¸é”™ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a4d558d53a64b508f1e506a488b1362~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=gQ5MgrHZYmMtt8DWZiSEttp2LeA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>èŠå¤©æ¡†ï¼Œæ­£å¸¸çš„ ai èŠå¤©ï¼Œå±…ç„¶è¿˜æ”¯æŒäº†ç›¸æœºå›¾ç‰‡ä¸Šä¼ ç‰›æ°ï¼ŒUI ç•Œé¢ç®€çº¦ï¼Œæ­£å’Œæˆ‘å¿ƒæ„ï¼Œè¿˜ç»†å¿ƒçš„åŠ äº†äº†å½©è‰²è¾¹æ¡†ï¼ŒçœŸçš„æ˜¯å®Œå…¨å¯ç”¨å•Šã€‚</p>
<p>è¿˜è´´å¿ƒçš„åŠ ä¸Šäº†å¯¹è¯è®°å½•ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3aaf29a707ff421991a5cdc990185ce4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=AdhLpEQb16UpEQR427SROBwPHbM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>666 æƒ³çš„çœŸå‘¨åˆ°</p>
<p>æ¥ç€è¯•è¯•ç”Ÿæˆè§†é¢‘çš„åŠŸèƒ½æ€ä¹ˆæ ·ï¼Ÿ</p>
<p>æœ€è¿‘å–œæ¬¢åƒè‰è“è›‹ç³•ï¼Œé‚£å°±ç”Ÿæˆä¸€ä¸ªâ€œåšè‰è“è›‹ç³•çš„è§†é¢‘â€ï¼š</p>
<pre><code class="hljs">promptï¼š ç”Ÿæˆä¸€ä¸ªå°å§å§åšè‰è“è›‹ç³•çš„è§†é¢‘Â 
</code></pre>
<p>å¯ä»¥çœ‹åˆ°æ¼«å¯¼ APP å…ˆä¼šåˆ›å»ºå‰§æœ¬ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e32ad4836e1414c80fb0f263c3430e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=26VV9SiBYE9tp%2Fk4Yf1x0V82h8k%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¾ˆå¿«å°±ç”Ÿæˆäº†å‰§æœ¬ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cfaebc0fbf14a9db6f68aa8fa7aa82b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=LIZIPuzAqYyaKycu42PJrmjPw%2BA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ¥ç€æ˜¯ç”Ÿæˆè§’è‰²å›¾ï¼Œèƒ½ç”Ÿæˆäººç‰©ä¸‰è§†å›¾ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“æ¼«å‰§æœ€éš¾çš„å°±æ˜¯äººç‰©ä¸€è‡´æ€§ï¼Œç¡®å®šä¸»è§’çš„ä¸‰è§†å›¾ï¼Œè´¯ç©¿æ•´ä¸ªå‰§æœ¬ä¸»è§’ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c818f7a737a6495783cfd9e4d4ed60ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=4YqwHrvPb%2FRrYqZhlHxWviih5g4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¤ªç»†èŠ‚äº†è¿˜æœ‰æƒ…æ„Ÿé’©å­ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ac8d0308c4e4166829733a0f9b81a92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=wL0EAJoqUtcltJ4miWWm5AeUsAM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¦æ˜¯ç”¨è¿™ä¸ªå†™ä¸ªéœ¸é“æ€»è£çˆ±ä¸Šæˆ‘çš„æ•…äº‹ä¹Ÿä¸é”™å§ï¼Œå“ˆå“ˆå“ˆå“ˆã€‚</p>
<p>æ¥ä¸‹æ¥çœ‹çœ‹å…·ä½“çš„åœºæ™¯ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5578a5eb37a24bc68f7924f74263ee9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=%2B3QVds8hh%2FyaqFjpLk1uAPAr4%2Bw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å±•å¼€ä¸€ä¸ªåœºæ™¯çœ‹çœ‹å®ƒæ˜¯æ€ä¹ˆè§„åˆ’çš„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec154f81fd6d4431b2da4a035d9adf93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=G3WanEZUR3S07tO3d5o4nBNTDR0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¥½çš„ç°åœ¨ç¡®è®¤å‰§æœ¬ï¼Œå›åˆ°é¡µé¢çœ‹åˆ°ç›´æ¥æœ‰ä»»åŠ¡åœ¨æ‰§è¡Œï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c7b795958a149d984a1f710cbab3501~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=wKTjKXq4a%2FfHYx%2Fcez74YVMj17M%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>çœ‹äº†æµç¨‹åä¸å¾—ä¸æ„Ÿå¹ï¼ŒçœŸğŸ”å„¿æŠŠè€å·±å½“æˆå¯¼æ¼”äº†ï¼›</p>
<p>å…ˆç”Ÿæˆä¸åŒçš„åœºæ™¯ï¼Œæ¯ä¸ªæ ¹æ®æœ‰å‰é¢ä¸»è§’çš„ä¸‰è§†å›¾å’Œæç¤ºè¯ç”Ÿæˆçš„åˆ†é•œå›¾ï¼Œå†ç”±åˆ†é•œå›¾å’Œè§†é¢‘æç¤ºè¯ç”Ÿæˆåˆ†é•œè§†é¢‘ã€‚æœ‰ç‚¹å¯¼æ¼”å‘³é“äº†ã€‚</p>
<p>çœ‹çœ‹å…·ä½“çš„åœºæ™¯åˆ†é•œæ˜¯æ€ä¹ˆè§„åˆ’çš„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e6914aafa794d31a99c2246f762b0fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=fHuilAL7H3mVhsKwNtTGORjTNAQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç¡®å®å¯ä»¥ï¼Œè§†é¢‘æç¤ºè¯éƒ¨åˆ†ï¼Œè§„åˆ’äº†ä¸»è§’çš„è¨€è¯­å’Œé•œå¤´æ–¹å¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2de08af9d554e8899f0d9830fb084f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768233848&amp;x-signature=nL8FwjfBS5RjocnMyhwEe6g5g5A%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸ç”¨æ‹…å¿ƒå¤±è´¥ï¼Œè¿˜ä¼šé‡è¯•ï¼Œè¿™ä¸ªå¤§æ¦‚å°±æ˜¯æœ‰äº›è§†é¢‘ api ä¼šè§¦å‘å…¬å…±å®‰å…¨ï¼Œä¼šå¤±è´¥ä»»åŠ¡ï¼Œæ­¤æ—¶ GLM 4.7 ä¼šæ ¹æ®æç¤ºå¼±åŒ–æç¤ºè¯ï¼Œæˆ‘çœ‹äº†ä¸€ä¸‹æ—¥å¿—å¤§æ¦‚æ˜¯è¿™æ ·.</p>
<pre><code class="hljs language-css" lang="css">suspension&gt; <span class="hljs-selector-attr">[ ]</span> <span class="hljs-selector-tag">I</span>/flutter (Â <span class="hljs-number">3052</span>): âŒ [<span class="hljs-number">22</span>:<span class="hljs-number">55</span>:<span class="hljs-number">29</span>] [åœºæ™¯é‡è¯•] åœºæ™¯Â <span class="hljs-number">1</span>Â é‡è¯•å¤±è´¥: Exception: è§†é¢‘ç”Ÿæˆå¤±è´¥: {<span class="hljs-selector-tag">code</span>: generation_failed, message: check status failed:
{"name":<span class="hljs-string">"c39408d4117fcedb3a89153dc5006a7904"</span>,<span class="hljs-string">"error"</span>:{"<span class="hljs-selector-tag">code</span>":<span class="hljs-number">3</span>,<span class="hljs-string">"message"</span>:<span class="hljs-string">"PUBLIC_ERROR_AUDIO_FILTERED"</span>}}}
</code></pre>
<p>åœºæ™¯1é‡è¯•å¤±è´¥çš„æ ¹æœ¬åŸå› æ˜¯Â <code>PUBLIC_ERROR_AUDIO_FILTERED</code>ï¼ˆéŸ³é¢‘è¢«è¿‡æ»¤ï¼‰â€”â€”å¹³å°å®¡æ ¸åˆ¤å®šä½ åœºæ™¯1æç¤ºè¯ä¸­çš„<strong>è¯­éŸ³/éŸ³æ•ˆæè¿°è¿è§„</strong>ï¼Œç›´æ¥æ‹¦æˆªäº†éŸ³é¢‘ç”Ÿæˆï¼Œè¿›è€Œå¯¼è‡´æ•´ä¸ªè§†é¢‘ç”Ÿæˆæµç¨‹ç»ˆæ­¢ï¼ˆå’Œç”»é¢æè¿°æ— å…³ï¼Œåªå¡éŸ³é¢‘ç¯èŠ‚ï¼‰ã€‚</p>
<p>æœ€ç»ˆç¡®å®šåœºæ™¯1æœ€ç»ˆåˆè§„ç‰ˆæç¤ºè¯ï¼ˆå½»åº•è§„é¿éŸ³é¢‘è¿‡æ»¤ï¼‰ï¼š</p>
<pre><code class="hljs language-css" lang="css">Anime style, manga art,Â <span class="hljs-number">2</span>D <span class="hljs-attribute">animation</span>, cel shaded.
Soft wide shot with gentle slow pan <span class="hljs-selector-tag">to</span> the <span class="hljs-attribute">right</span>, gradually revealing <span class="hljs-selector-tag">a</span> tidy kitchen counter and fresh ingredients. <span class="hljs-selector-tag">A</span>Â <span class="hljs-number">17</span>-year-old JapaneseÂ girlÂ (anime style, Asian features)Â arranges eggs and flour softly on the counter, turns <span class="hljs-selector-tag">to</span> the camera with <span class="hljs-selector-tag">a</span> gentle warm smile, and says "ä»Šå¤©è¦åšä¸ªè‰è“è›‹ç³•" in <span class="hljs-selector-tag">a</span> soft warmÂ toneÂ (female voice, quiet whisper, low volume, calm mild speech).
Warm soft gentle lighting, peaceful and cozy kitchen atmosphere, no loud sounds, only soft gentle voice.
</code></pre>
<p>ç„¶ååŸºæœ¬ä¸Šå‡ºé”™åï¼Œå†è®© Claude Code é…åˆ GLM 4.7ï¼Œä¸æ–­è°ƒæ•´ï¼Œæœ€ç»ˆå‡ºæ¥äº†ï¼Œæˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚</p>
<h2 data-id="heading-2">å†™åœ¨æœ€å</h2>
<p>å¦‚æœéè¦è¾ƒçœŸï¼Œæ¼«å¯¼ APP å’Œå®é™…ä¸Šçš„ AI æ¼«å‰§è¿˜æœ‰ç‚¹è·ç¦»ï¼Œä½†å¯ä»¥æƒ³è±¡é€šè¿‡å¤šæ¬¡çš„è¿­ä»£å’Œä¼˜åŒ–ï¼Œä¸€å®šå¯ä»¥æ›´å¥½ã€‚</p>
<p>è¦çŸ¥é“ï¼Œè¿™ä¸ª APP å®é™…è€—æ—¶è¿˜æ²¡åˆ° 5 å¤©å•Šï¼Œè¿™æ”¾åœ¨ä»¥å‰ï¼Œå°±è¿™ MVP ç‰ˆæœ¬ï¼Œæ²¡ä¸ªæŠŠæ˜ŸæœŸå¼€å‘ä¸å‡ºæ¥ã€‚</p>
<p>åŒæ—¶ä¹ŸéªŒè¯äº†ä¸€ä¸ªè§‚ç‚¹ï¼Œç°åœ¨ AI Codingï¼ŒçœŸçš„å¹¶é Claude ä¸å¯ï¼Œä¸ç»™ç”¨è¿˜æ­»è´µï¼Œä½†å‡¡æœ‰åƒ GLM 4.7 è¿™æ ·é«˜æ€§ä»·æ¯”çš„æ¨¡å‹å–ä»£ï¼Œè°è¿˜ç”¨ Claude å•Šï¼Ÿ</p>
<p>è¿™ä¸ª APPï¼Œæˆ‘å·²ç»å¼€æºåˆ° GitHub äº†ï¼Œä½ å¯ä»¥åŠ ä¸Šè‡ªå·±çš„ APIï¼ŒæŒ‰ç…§æ•™ç¨‹æ¥ç©ä¸€ç©ã€‚</p>
<p>å½“ç„¶äº†å¦‚æœä½ æ˜¯å¼€å‘è€…æˆ–è€… AI Coderï¼Œæ¬¢è¿æ¥ PRï¼ŒæŠŠä»–åšå¥½ã€‚</p>
<p>å¥½å•¦ï¼Œè°¢è°¢ä½ çœ‹æˆ‘çš„æ–‡ç« ï¼Œå¦‚æœå–œæ¬¢å¯ä»¥ç‚¹èµè½¬å‘ç»™éœ€è¦çš„æœ‹å‹ï¼Œæˆ‘ä»¬ä¸‹ä¸€æœŸå†è§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Go CLI å…¥å£è®¾è®¡ï¼šå‚æ•°è§£æã€é”™è¯¯å¤„ç†ä¸é¡¹ç›®åˆ†å±‚å®æˆ˜]]></title>    <link>https://juejin.cn/post/7591702898080563215</link>    <guid>https://juejin.cn/post/7591702898080563215</guid>    <pubDate>2026-01-05T15:03:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591702898080563215" data-draft-id="7591704324906942498" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Go CLI å…¥å£è®¾è®¡ï¼šå‚æ•°è§£æã€é”™è¯¯å¤„ç†ä¸é¡¹ç›®åˆ†å±‚å®æˆ˜"/> <meta itemprop="keywords" content="åç«¯,Go"/> <meta itemprop="datePublished" content="2026-01-05T15:03:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaå°æˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3614849960783160"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Go CLI å…¥å£è®¾è®¡ï¼šå‚æ•°è§£æã€é”™è¯¯å¤„ç†ä¸é¡¹ç›®åˆ†å±‚å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3614849960783160/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaå°æˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T15:03:39.000Z" title="Mon Jan 05 2026 15:03:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Goè¯­è¨€å­¦ä¹ ç³»åˆ—æ–‡ç« </h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FhZIvsqGTTLdp7vn4bXrueA" target="_blank" title="https://mp.weixin.qq.com/s/hZIvsqGTTLdp7vn4bXrueA" ref="nofollow noopener noreferrer">01 Go é¡¹ç›®ç»“æ„æ€»æ˜¯å†™ä¹±ï¼Ÿè¿™ä¸ª 50 è¡Œä»£ç çš„ Demo æ•™ä½ æ ‡å‡†å§¿åŠ¿</a></li>
</ul>
<h2 data-id="heading-1">1. åœºæ™¯å¤ç°ï¼šé‚£ä¸ªè®©æˆ‘å¤´ç–¼çš„æ—¶åˆ»</h2>
<p>å‘¨ä¸€æ—©ä¸Šï¼Œæˆ‘æ¥æ‰‹äº†ä¸€ä¸ªçº¿ä¸Šçš„é…ç½®åŒæ­¥å°å·¥å…·ã€‚å®ƒçš„èŒè´£å¾ˆç®€å•ï¼šæ¯å¤©å‡Œæ™¨è·‘ä¸€æ¬¡ï¼Œä»é…ç½®ä¸­å¿ƒæ‹‰æ•°æ®ï¼Œç„¶åæ¨é€åˆ°å„ä¸ªèŠ‚ç‚¹ã€‚</p>
<p>å·¥å…·è·‘äº†å¤§åŠå¹´éƒ½æ²¡å‡ºè¿‡é—®é¢˜ï¼Œç›´åˆ°é‚£å¤©â€”â€”å‡Œæ™¨ 3 ç‚¹å‘Šè­¦å“äº†ï¼Œæ—¥å¿—é‡Œåªæœ‰ä¸€è¡Œï¼š</p>
<pre><code class="hljs">ç¨‹åºå¯åŠ¨å¤±è´¥
</code></pre>
<p>æˆ‘ç›¯ç€è¿™è¡Œå­—çœ‹äº†äº”åˆ†é’Ÿï¼Œè„‘å­é‡Œå…¨æ˜¯é—®å·ï¼š<strong>å“ªé‡Œå¤±è´¥äº†ï¼Ÿå‚æ•°æ²¡ä¼ ï¼Ÿé…ç½®æ–‡ä»¶æ²¡æ‰¾åˆ°ï¼Ÿç½‘ç»œä¸é€šï¼Ÿ</strong></p>
<p>æ’æŸ¥äº†ä¸€ä¸ªå¤šå°æ—¶ï¼Œæœ€åå‘ç°æ˜¯è¿ç»´åŒå­¦æ”¹äº†å¯åŠ¨è„šæœ¬ï¼Œæ¼æ‰äº†ä¸€ä¸ªå¿…å¡«å‚æ•°ã€‚ä½†ç¨‹åºå‹æ ¹æ²¡å‘Šè¯‰æˆ‘æ˜¯å“ªä¸ªå‚æ•°å‡ºäº†é—®é¢˜ã€‚</p>
<p>é‚£ä¸€åˆ»æˆ‘æ„è¯†åˆ°ï¼š<strong>ä¸€ä¸ªé è°±çš„ç¨‹åºï¼Œå¿…é¡»ä»å…¥å£å°±"æŠŠè¯è¯´æ¸…æ¥š"</strong>ã€‚å‚æ•°æ€ä¹ˆè§£æã€é»˜è®¤å€¼æ˜¯ä»€ä¹ˆã€å‡ºé”™æ—¶æ€ä¹ˆåé¦ˆâ€”â€”è¿™äº›çœ‹ä¼¼åŸºç¡€çš„ä¸œè¥¿ï¼Œå†³å®šäº†å‡Œæ™¨ 3 ç‚¹ä½ èƒ½ä¸èƒ½å¤šç¡ä¸€ä¼šå„¿ã€‚</p>
<p>ä»Šå¤©è¿™ä¸ªé¡¹ç›®ï¼Œå°±æ˜¯æˆ‘æ€»ç»“å‡ºæ¥çš„ <strong>Go CLI å…¥å£æ¨¡æ¿</strong>ã€‚å®ƒå¾ˆå°ï¼Œä½†äº”è„ä¿±å…¨ã€‚</p>
<h2 data-id="heading-2">2. æ¶æ„è“å›¾ï¼šä¸Šå¸è§†è§’çœ‹è®¾è®¡</h2>
<p>å…ˆæ¥çœ‹æ•´ä½“ç»“æ„ã€‚è¿™ä¸ªé¡¹ç›®åªæœ‰ä¸‰ä¸ªæ ¸å¿ƒæ–‡ä»¶ï¼Œä½†å®ƒå±•ç¤ºäº† Go é¡¹ç›®çš„<strong>æ ‡å‡†åˆ†å±‚æ–¹å¼</strong>ï¼š</p>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b574048d49be41b4b2f82bc515d3a547~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2YeWwj-aIkA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768230219&amp;x-signature=HrQex2fny45g5%2FxmnZ2R6gWS18Q%3D" alt="image-20260105225642842" loading="lazy"/>
<p><strong>æ ¸å¿ƒè®¾è®¡æ€æƒ³</strong>ï¼š</p>
<ul>
<li><strong>main.go åªåšè°ƒåº¦</strong>ï¼šå®ƒä¸åŒ…å«ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼Œåªè´Ÿè´£"æ¥å‚æ•° â†’ è°ƒå‡½æ•° â†’ è¾“å‡ºç»“æœ"</li>
<li><strong>internal ç›®å½•æ”¾å†…éƒ¨åŒ…</strong>ï¼šGo æœ‰ä¸ªçº¦å®šï¼Œ<code>internal</code> ç›®å½•ä¸‹çš„ä»£ç åªèƒ½è¢«åŒä¸€ä¸ªæ¨¡å—å¼•ç”¨ï¼Œå¤–éƒ¨é¡¹ç›®æ— æ³• importã€‚è¿™æ˜¯ä¸€ç§"è®¿é—®æ§åˆ¶"</li>
<li><strong>ä¸€ä¸ªç›®å½•ä¸€ä¸ªåŒ…</strong>ï¼š<code>cliinfo</code> è´Ÿè´£å‚æ•°è§£æï¼Œ<code>reasons</code> è´Ÿè´£ä¸šåŠ¡é€»è¾‘ï¼ŒèŒè´£æ¸…æ™°</li>
</ul>
<p>è¿™ç§åˆ†å±‚çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ<strong>æ¯ä¸ªåŒ…éƒ½å¯ä»¥ç‹¬ç«‹å†™å•å…ƒæµ‹è¯•</strong>ã€‚ä½ ä¸éœ€è¦å¯åŠ¨æ•´ä¸ªç¨‹åºï¼Œå°±èƒ½éªŒè¯å‚æ•°è§£æé€»è¾‘å¯¹ä¸å¯¹ã€‚</p>
<h2 data-id="heading-3">3. æºç æ‹†è§£ï¼šæ‰‹æŠŠæ‰‹å¸¦ä½ è¯»æ ¸å¿ƒ</h2>
<h3 data-id="heading-4">3.1 å…¥å£æ–‡ä»¶ï¼šmain.go</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> main

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"fmt"</span>
	<span class="hljs-string">"os"</span>
	<span class="hljs-string">"runtime"</span>
	<span class="hljs-string">"strings"</span>
	<span class="hljs-string">"time"</span>

	<span class="hljs-string">"learn-go/series/02/internal/cliinfo"</span>
	<span class="hljs-string">"learn-go/series/02/internal/reasons"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	cfg, err := cliinfo.Parse(os.Args[<span class="hljs-number">1</span>:])
	<span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
		fmt.Fprintln(os.Stderr, <span class="hljs-string">"å‚æ•°é”™è¯¯:"</span>, err)
		os.Exit(<span class="hljs-number">1</span>)
	}

	lines := []<span class="hljs-type">string</span>{
		fmt.Sprintf(<span class="hljs-string">"ä½ å¥½ï¼Œ%sï¼"</span>, cfg.Name),
		fmt.Sprintf(<span class="hljs-string">"ä½ æ­£åœ¨ä½“éªŒï¼š%s"</span>, strings.ToUpper(cfg.Lang)),
		fmt.Sprintf(<span class="hljs-string">"ä»Šå¤©çš„ç»“è®ºï¼š%s"</span>, reasons.Reason(cfg.Lang)),
		fmt.Sprintf(<span class="hljs-string">"è¿è¡Œç¯å¢ƒï¼š%s/%s"</span>, runtime.GOOS, runtime.GOARCH),
		fmt.Sprintf(<span class="hljs-string">"Go ç‰ˆæœ¬ï¼š%s"</span>, runtime.Version()),
		fmt.Sprintf(<span class="hljs-string">"ç”Ÿæˆæ—¶é—´ï¼š%s"</span>, time.Now().Format(time.RFC3339)),
	}

	fmt.Println(strings.Join(lines, <span class="hljs-string">"\n"</span>))
}
</code></pre>
<p>è¿™æ®µä»£ç åªæœ‰ 20 å¤šè¡Œï¼Œä½†ä¿¡æ¯é‡å¾ˆå¤§ã€‚è®©æˆ‘é€ä¸ªæ‹†è§£ï¼š</p>
<p><strong><code>os.Args[1:]</code> æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p><code>os.Args</code> æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²åˆ‡ç‰‡ï¼ŒåŒ…å«äº†å‘½ä»¤è¡Œçš„æ‰€æœ‰å‚æ•°ã€‚<code>Args[0]</code> æ˜¯ç¨‹åºæœ¬èº«çš„è·¯å¾„ï¼Œ<code>Args[1:]</code> æ‰æ˜¯ç”¨æˆ·ä¼ å…¥çš„å‚æ•°ã€‚</p>
<p><strong><code>cfg, err := cliinfo.Parse(...)</code> çš„å¤šè¿”å›å€¼</strong></p>
<p>è¿™æ˜¯ Go æœ€ç»å…¸çš„æ¨¡å¼ã€‚å‡½æ•°åŒæ—¶è¿”å›"ç»“æœ"å’Œ"é”™è¯¯"ï¼Œè°ƒç”¨æ–¹å¿…é¡»å¤„ç†é”™è¯¯ã€‚å¦‚æœä½ å†™è¿‡ Javaï¼Œå¯ä»¥æŠŠå®ƒç†è§£ä¸º"ä¸ç”¨ try-catchï¼Œä½†å¿…é¡»æ£€æŸ¥è¿”å›å€¼"ã€‚</p>
<blockquote>
<p><strong>Go çŸ¥è¯†ç‚¹</strong>ï¼šGo æ²¡æœ‰å¼‚å¸¸æœºåˆ¶ï¼Œé”™è¯¯é€šè¿‡è¿”å›å€¼ä¼ é€’ã€‚<code>if err != nil</code> æ˜¯ä½ ä¼šå†™ä¸€ä¸‡éçš„ä»£ç ã€‚</p>
</blockquote>
<p><strong><code>fmt.Fprintln(os.Stderr, ...)</code> ä¸ºä»€ä¹ˆç”¨ Stderrï¼Ÿ</strong></p>
<p>æ­£å¸¸è¾“å‡ºèµ° <code>stdout</code>ï¼Œé”™è¯¯ä¿¡æ¯èµ° <code>stderr</code>ã€‚è¿™æ˜¯ Unix çš„æƒ¯ä¾‹ã€‚å¥½å¤„æ˜¯ï¼šç”¨æˆ·å¯ä»¥ç”¨ç®¡é“æŠŠæ­£å¸¸è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶ï¼Œè€Œé”™è¯¯ä¿¡æ¯ä»ç„¶æ˜¾ç¤ºåœ¨ç»ˆç«¯ã€‚</p>
<p><strong><code>os.Exit(1)</code> çš„é€€å‡ºç </strong></p>
<p>ç¨‹åºæ­£å¸¸ç»“æŸè¿”å› 0ï¼Œå‡ºé”™è¿”å›éé›¶å€¼ã€‚è¿™è®©è°ƒç”¨æ–¹ï¼ˆæ¯”å¦‚ shell è„šæœ¬ï¼‰å¯ä»¥åˆ¤æ–­ç¨‹åºæ˜¯å¦æˆåŠŸã€‚</p>
<h3 data-id="heading-5">3.2 å‚æ•°è§£æï¼šcliinfo åŒ…</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> cliinfo

<span class="hljs-keyword">import</span> (
	<span class="hljs-string">"flag"</span>
	<span class="hljs-string">"fmt"</span>
	<span class="hljs-string">"strings"</span>
)

<span class="hljs-keyword">type</span> Config <span class="hljs-keyword">struct</span> {
	Name <span class="hljs-type">string</span>
	Lang <span class="hljs-type">string</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Parse</span><span class="hljs-params">(args []<span class="hljs-type">string</span>)</span></span> (Config, <span class="hljs-type">error</span>) {
	fs := flag.NewFlagSet(<span class="hljs-string">"hello"</span>, flag.ContinueOnError)
	name := fs.String(<span class="hljs-string">"name"</span>, <span class="hljs-string">"å·¥ç¨‹å¸ˆ"</span>, <span class="hljs-string">"è¯»è€…åç§°"</span>)
	lang := fs.String(<span class="hljs-string">"lang"</span>, <span class="hljs-string">"go"</span>, <span class="hljs-string">"å…³æ³¨çš„è¯­è¨€"</span>)
	fs.SetOutput(<span class="hljs-built_in">new</span>(strings.Builder))

	<span class="hljs-keyword">if</span> err := fs.Parse(args); err != <span class="hljs-literal">nil</span> {
		<span class="hljs-keyword">return</span> Config{}, err
	}

	cfg := Config{
		Name: strings.TrimSpace(*name),
		Lang: strings.ToLower(strings.TrimSpace(*lang)),
	}
	<span class="hljs-keyword">if</span> cfg.Name == <span class="hljs-string">""</span> {
		<span class="hljs-keyword">return</span> Config{}, fmt.Errorf(<span class="hljs-string">"name ä¸èƒ½ä¸ºç©º"</span>)
	}
	<span class="hljs-keyword">if</span> cfg.Lang == <span class="hljs-string">""</span> {
		cfg.Lang = <span class="hljs-string">"go"</span>
	}
	<span class="hljs-keyword">return</span> cfg, <span class="hljs-literal">nil</span>
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆç”¨ <code>flag.NewFlagSet</code> è€Œä¸æ˜¯å…¨å±€çš„ <code>flag.Parse()</code>ï¼Ÿ</strong></p>
<p>å…¨å±€çš„ <code>flag</code> åŒ…ä¼šç›´æ¥æ“ä½œ <code>os.Args</code>ï¼Œè€Œä¸”è§£æå¤±è´¥æ—¶é»˜è®¤ä¼šè°ƒç”¨ <code>os.Exit()</code>ã€‚è¿™è®©ä»£ç <strong>æ— æ³•æµ‹è¯•</strong>â€”â€”ä½ æ²¡æ³•åœ¨æµ‹è¯•é‡Œæ¨¡æ‹Ÿä¸åŒçš„å‚æ•°ç»„åˆã€‚</p>
<p>ç”¨ <code>NewFlagSet</code> åˆ›å»ºç‹¬ç«‹çš„è§£æå™¨ï¼Œä¼ å…¥ä»»æ„çš„ <code>[]string</code>ï¼Œå°±å¯ä»¥åœ¨å•å…ƒæµ‹è¯•é‡Œéšä¾¿æŠ˜è…¾äº†ã€‚</p>
<p><strong><code>fs.String()</code> è¿”å›çš„æ˜¯æŒ‡é’ˆ</strong></p>
<pre><code class="hljs language-go" lang="go">name := fs.String(<span class="hljs-string">"name"</span>, <span class="hljs-string">"å·¥ç¨‹å¸ˆ"</span>, <span class="hljs-string">"è¯»è€…åç§°"</span>)
<span class="hljs-comment">// name çš„ç±»å‹æ˜¯ *stringï¼Œä¸æ˜¯ string</span>
</code></pre>
<p>ä¸ºä»€ä¹ˆè¿”å›æŒ‡é’ˆï¼Ÿå› ä¸º <code>Parse()</code> è°ƒç”¨ä¹‹åï¼Œflag åŒ…ä¼šæŠŠè§£æåˆ°çš„å€¼å†™å…¥è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘çš„å†…å­˜ã€‚å¦‚æœè¿”å›å€¼ç±»å‹ï¼Œå°±æ²¡æ³•"å›å¡«"äº†ã€‚</p>
<blockquote>
<p><strong>Go çŸ¥è¯†ç‚¹</strong>ï¼š<code>*name</code> æ˜¯è§£å¼•ç”¨æ“ä½œï¼Œå–å‡ºæŒ‡é’ˆæŒ‡å‘çš„å€¼ã€‚è¿™å’Œ C è¯­è¨€çš„æŒ‡é’ˆæ¦‚å¿µä¸€æ ·ã€‚</p>
</blockquote>
<p><strong><code>flag.ContinueOnError</code> çš„ä½œç”¨</strong></p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œflag è§£æå¤±è´¥ä¼šç›´æ¥é€€å‡ºç¨‹åºã€‚è®¾ç½® <code>ContinueOnError</code> åï¼Œå®ƒä¼šè¿”å› errorï¼Œè®©æˆ‘ä»¬è‡ªå·±å†³å®šæ€ä¹ˆå¤„ç†ã€‚</p>
<p><strong><code>return Config{}, err</code> çš„é›¶å€¼</strong></p>
<p>å½“å‡ºé”™æ—¶ï¼Œæˆ‘ä»¬è¿”å›ä¸€ä¸ª"ç©ºçš„" Configã€‚<code>Config{}</code> æ˜¯ç»“æ„ä½“çš„é›¶å€¼ï¼Œæ‰€æœ‰å­—æ®µéƒ½æ˜¯é»˜è®¤å€¼ï¼ˆstring çš„é›¶å€¼æ˜¯ç©ºå­—ç¬¦ä¸²ï¼‰ã€‚</p>
<h3 data-id="heading-6">3.3 ä¸šåŠ¡é€»è¾‘ï¼šreasons åŒ…</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> reasons

<span class="hljs-keyword">import</span> <span class="hljs-string">"strings"</span>

<span class="hljs-keyword">var</span> reasonByLang = <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>{
	<span class="hljs-string">"go"</span>:     <span class="hljs-string">"ç¼–è¯‘å¿«ã€éƒ¨ç½²ç®€å•ã€å¹¶å‘æ¨¡å‹æ¸…æ™°ï¼Œé€‚åˆåšåŸºç¡€è®¾æ–½å’ŒæœåŠ¡ç«¯ã€‚"</span>,
	<span class="hljs-string">"python"</span>: <span class="hljs-string">"ç”Ÿæ€ä¸°å¯Œã€éªŒè¯å¿«ï¼Œé€‚åˆæ•°æ®å¤„ç†å’Œè„šæœ¬ã€‚"</span>,
	<span class="hljs-string">"java"</span>:   <span class="hljs-string">"å·¥ç¨‹æˆç†Ÿã€ç”Ÿæ€åºå¤§ï¼Œé€‚åˆå¤§å‹ä¼ä¸šçº§ç³»ç»Ÿã€‚"</span>,
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Reason</span><span class="hljs-params">(lang <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">string</span> {
	key := strings.ToLower(strings.TrimSpace(lang))
	<span class="hljs-keyword">if</span> key == <span class="hljs-string">""</span> {
		key = <span class="hljs-string">"go"</span>
	}
	<span class="hljs-keyword">if</span> reason, ok := reasonByLang[key]; ok {
		<span class="hljs-keyword">return</span> reason
	}
	<span class="hljs-keyword">return</span> <span class="hljs-string">"å…ˆé€‰ä¸€ä¸ªç›®æ ‡åœºæ™¯ï¼Œå†å†³å®šè¯­è¨€ã€‚Go é€‚åˆæœåŠ¡ç«¯ä¸å·¥å…·é“¾ã€‚"</span>
}
</code></pre>
<p><strong><code>map[string]string</code> çš„å£°æ˜</strong></p>
<p>è¿™æ˜¯ Go çš„ map ç±»å‹ï¼Œç­‰ä»·äº Java çš„ <code>Map&lt;String, String&gt;</code> æˆ– Python çš„ <code>dict</code>ã€‚</p>
<p><strong><code>reason, ok := reasonByLang[key]</code> çš„åŒè¿”å›å€¼</strong></p>
<p>è®¿é—® map æ—¶ï¼ŒGo å…è®¸ä½ åŒæ—¶è·å–"å€¼"å’Œ"æ˜¯å¦å­˜åœ¨"ã€‚å¦‚æœ key ä¸å­˜åœ¨ï¼Œ<code>ok</code> ä¸º falseï¼Œ<code>reason</code> æ˜¯é›¶å€¼ã€‚</p>
<p>è¿™æ¯” Java çš„ <code>map.get(key) != null</code> æ›´ä¼˜é›…ï¼Œå› ä¸ºå®ƒèƒ½åŒºåˆ†"key ä¸å­˜åœ¨"å’Œ"key å­˜åœ¨ä½†å€¼ä¸º null"ã€‚</p>
<blockquote>
<p><strong>Go çŸ¥è¯†ç‚¹</strong>ï¼šè¿™ç§ <code>value, ok := map[key]</code> çš„å†™æ³•å«åš "comma ok" æƒ¯ç”¨æ³•ï¼Œåœ¨ Go é‡Œéå¸¸å¸¸è§ã€‚</p>
</blockquote>
<h3 data-id="heading-7">3.4 æµ‹è¯•ä»£ç ï¼šè¡¨é©±åŠ¨æµ‹è¯•</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">TestReason</span><span class="hljs-params">(t *testing.T)</span></span> {
	tests := []<span class="hljs-keyword">struct</span> {
		name <span class="hljs-type">string</span>
		lang <span class="hljs-type">string</span>
		want <span class="hljs-type">string</span>
	}{
		{name: <span class="hljs-string">"default"</span>, lang: <span class="hljs-string">""</span>, want: reasonByLang[<span class="hljs-string">"go"</span>]},
		{name: <span class="hljs-string">"go"</span>, lang: <span class="hljs-string">"go"</span>, want: reasonByLang[<span class="hljs-string">"go"</span>]},
		{name: <span class="hljs-string">"python"</span>, lang: <span class="hljs-string">"python"</span>, want: reasonByLang[<span class="hljs-string">"python"</span>]},
	}

	<span class="hljs-keyword">for</span> _, tt := <span class="hljs-keyword">range</span> tests {
		t.Run(tt.name, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(t *testing.T)</span></span> {
			<span class="hljs-keyword">if</span> got := Reason(tt.lang); got != tt.want {
				t.Fatalf(<span class="hljs-string">"Reason(%q) = %q, want %q"</span>, tt.lang, got, tt.want)
			}
		})
	}
}
</code></pre>
<p>è¿™æ˜¯ Go ç¤¾åŒºæ¨å´‡çš„<strong>è¡¨é©±åŠ¨æµ‹è¯•</strong>é£æ ¼ã€‚æŠŠæµ‹è¯•ç”¨ä¾‹å®šä¹‰æˆä¸€ä¸ªåˆ‡ç‰‡ï¼Œç„¶åå¾ªç¯æ‰§è¡Œã€‚å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li>æ–°å¢ç”¨ä¾‹åªéœ€è¦åŠ ä¸€è¡Œï¼Œä¸ç”¨å¤åˆ¶ç²˜è´´æ•´ä¸ªæµ‹è¯•å‡½æ•°</li>
<li>æµ‹è¯•é€»è¾‘é›†ä¸­ï¼Œä¸€çœ¼èƒ½çœ‹å‡ºè¦†ç›–äº†å“ªäº›åœºæ™¯</li>
<li><code>t.Run()</code> è®©æ¯ä¸ªç”¨ä¾‹æœ‰ç‹¬ç«‹çš„åå­—ï¼Œå¤±è´¥æ—¶èƒ½ç²¾ç¡®å®šä½</li>
</ul>
<h2 data-id="heading-8">4. é¿å‘æŒ‡å— &amp; æ·±åº¦æ€è€ƒ</h2>
<h3 data-id="heading-9">å‘ 1ï¼šå¿˜è®°å¤„ç† error</h3>
<pre><code class="hljs language-go" lang="go">cfg, _ := cliinfo.Parse(os.Args[<span class="hljs-number">1</span>:])  <span class="hljs-comment">// å±é™©ï¼å¿½ç•¥äº† error</span>
</code></pre>
<p>ç”¨ <code>_</code> å¿½ç•¥ error æ˜¯ Go æ–°æ‰‹æœ€å¸¸çŠ¯çš„é”™è¯¯ã€‚ç¨‹åºä¸ä¼šæŠ¥é”™ï¼Œä½† <code>cfg</code> å¯èƒ½æ˜¯é›¶å€¼ï¼Œåç»­é€»è¾‘ä¼šå‡ºç°è¯¡å¼‚çš„ bugã€‚</p>
<p><strong>å»ºè®®</strong>ï¼šåœ¨ IDE é‡Œå¼€å¯ <code>errcheck</code> æˆ– <code>golangci-lint</code>ï¼Œå®ƒä¼šæé†’ä½ æœªå¤„ç†çš„ errorã€‚</p>
<h3 data-id="heading-10">å‘ 2ï¼šå…¨å±€ flag å¯¼è‡´æµ‹è¯•å›°éš¾</h3>
<p>å¦‚æœä½ ç›´æ¥ç”¨ <code>flag.String()</code> å’Œ <code>flag.Parse()</code>ï¼Œå®ƒä»¬æ“ä½œçš„æ˜¯å…¨å±€çŠ¶æ€ã€‚å¤šä¸ªæµ‹è¯•ç”¨ä¾‹ä¹‹é—´ä¼šäº’ç›¸å¹²æ‰°ï¼Œè€Œä¸”æ— æ³•æ¨¡æ‹Ÿä¸åŒçš„å‚æ•°ç»„åˆã€‚</p>
<p><strong>å»ºè®®</strong>ï¼šå§‹ç»ˆç”¨ <code>flag.NewFlagSet()</code> åˆ›å»ºç‹¬ç«‹çš„è§£æå™¨ã€‚</p>
<h3 data-id="heading-11">å‘ 3ï¼šé”™è¯¯ä¿¡æ¯ä¸å¤Ÿå…·ä½“</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">return</span> Config{}, fmt.Errorf(<span class="hljs-string">"å‚æ•°é”™è¯¯"</span>)  <span class="hljs-comment">// å¤ªæ¨¡ç³Š</span>
<span class="hljs-keyword">return</span> Config{}, fmt.Errorf(<span class="hljs-string">"name ä¸èƒ½ä¸ºç©º"</span>)  <span class="hljs-comment">// å¥½</span>
</code></pre>
<p>é”™è¯¯ä¿¡æ¯è¦èƒ½è®©ç”¨æˆ·<strong>ä¸çœ‹ä»£ç å°±çŸ¥é“æ€ä¹ˆä¿®</strong>ã€‚</p>
<h3 data-id="heading-12">Demo ä¸ç”Ÿäº§çš„å·®è·</h3>
<p>è¿™ä¸ª Demo æ˜¯æ•™å­¦ç”¨çš„ï¼Œç”Ÿäº§ç¯å¢ƒè¿˜éœ€è¦è€ƒè™‘ï¼š</p>
<ul>
<li><strong>é…ç½®æ–‡ä»¶æ”¯æŒ</strong>ï¼šé™¤äº†å‘½ä»¤è¡Œå‚æ•°ï¼Œè¿˜è¦æ”¯æŒä»æ–‡ä»¶ã€ç¯å¢ƒå˜é‡è¯»å–é…ç½®</li>
<li><strong>æ—¥å¿—ç³»ç»Ÿ</strong>ï¼šç”¨ <code>log/slog</code> æˆ– <code>zap</code> æ›¿ä»£ <code>fmt.Println</code>ï¼Œæ”¯æŒç»“æ„åŒ–æ—¥å¿—</li>
<li><strong>ä¼˜é›…é€€å‡º</strong>ï¼šç›‘å¬ <code>SIGTERM</code> ä¿¡å·ï¼Œåšæ¸…ç†å·¥ä½œåå†é€€å‡º</li>
<li><strong>ç‰ˆæœ¬ä¿¡æ¯</strong>ï¼šç¼–è¯‘æ—¶æ³¨å…¥ git commitã€æ„å»ºæ—¶é—´ç­‰ä¿¡æ¯</li>
</ul>
<h2 data-id="heading-13">5. å¿«é€Ÿä¸Šæ‰‹ &amp; æ”¹é€ å»ºè®®</h2>
<h3 data-id="heading-14">è¿è¡Œå‘½ä»¤</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿›å…¥é¡¹ç›®ç›®å½•</span>
<span class="hljs-built_in">cd</span> series/02

<span class="hljs-comment"># è¿è¡Œç¨‹åºï¼ˆä½¿ç”¨é»˜è®¤å‚æ•°ï¼‰</span>
go run ./cmd/cli

<span class="hljs-comment"># è¿è¡Œç¨‹åºï¼ˆè‡ªå®šä¹‰å‚æ•°ï¼‰</span>
go run ./cmd/cli -name=<span class="hljs-string">"æ±ªå°æˆ"</span> -lang=python

<span class="hljs-comment"># è¿è¡Œæµ‹è¯•</span>
go <span class="hljs-built_in">test</span> ./...
</code></pre>
<h3 data-id="heading-15">å·¥ç¨‹åŒ–æ”¹é€ å»ºè®®</h3>
<p><strong>1. æ·»åŠ ç»“æ„åŒ–æ—¥å¿—</strong></p>
<p>æŠŠ <code>fmt.Println</code> æ›¿æ¢æˆ Go 1.21 å¼•å…¥çš„ <code>log/slog</code>ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> <span class="hljs-string">"log/slog"</span>

slog.Info(<span class="hljs-string">"ç¨‹åºå¯åŠ¨"</span>, <span class="hljs-string">"name"</span>, cfg.Name, <span class="hljs-string">"lang"</span>, cfg.Lang)
</code></pre>
<p><strong>2. æ”¯æŒç¯å¢ƒå˜é‡</strong></p>
<p>åœ¨ <code>Parse()</code> é‡Œå¢åŠ ç¯å¢ƒå˜é‡çš„è¯»å–ï¼Œä¼˜å…ˆçº§ï¼šå‘½ä»¤è¡Œå‚æ•° &gt; ç¯å¢ƒå˜é‡ &gt; é»˜è®¤å€¼ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">if</span> envName := os.Getenv(<span class="hljs-string">"CLI_NAME"</span>); envName != <span class="hljs-string">""</span> &amp;&amp; *name == <span class="hljs-string">"å·¥ç¨‹å¸ˆ"</span> {
    *name = envName
}
</code></pre>
<p><strong>3. æ·»åŠ  <code>-version</code> å‚æ•°</strong></p>
<p>åœ¨ç¼–è¯‘æ—¶æ³¨å…¥ç‰ˆæœ¬ä¿¡æ¯ï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">var</span> Version = <span class="hljs-string">"dev"</span>  <span class="hljs-comment">// ç¼–è¯‘æ—¶ç”¨ -ldflags è¦†ç›–</span>

version := fs.Bool(<span class="hljs-string">"version"</span>, <span class="hljs-literal">false</span>, <span class="hljs-string">"æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯"</span>)
<span class="hljs-keyword">if</span> *version {
    fmt.Println(<span class="hljs-string">"ç‰ˆæœ¬:"</span>, Version)
    os.Exit(<span class="hljs-number">0</span>)
}
</code></pre>
<h2 data-id="heading-16">6. æ€»ç»“</h2>
<ul>
<li><strong>main å‡½æ•°è¦çŸ­</strong>ï¼šåªåšè°ƒåº¦ï¼Œä¸å†™ä¸šåŠ¡é€»è¾‘ï¼Œè¿™æ ·æ‰èƒ½æµ‹è¯•</li>
<li><strong>é”™è¯¯å¿…é¡»å¤„ç†</strong>ï¼š<code>if err != nil</code> æ˜¯ Go çš„ç”Ÿå­˜æ³•åˆ™ï¼Œåˆ«ç”¨ <code>_</code> å¿½ç•¥</li>
<li><strong>ç”¨ NewFlagSet</strong>ï¼šç‹¬ç«‹çš„ flag è§£æå™¨è®©ä»£ç å¯æµ‹è¯•</li>
<li><strong>internal ç›®å½•</strong>ï¼šGo çš„è®¿é—®æ§åˆ¶æœºåˆ¶ï¼Œå†…éƒ¨åŒ…ä¸ä¼šè¢«å¤–éƒ¨å¼•ç”¨</li>
<li><strong>è¡¨é©±åŠ¨æµ‹è¯•</strong>ï¼šç”¨åˆ‡ç‰‡ç»„ç»‡æµ‹è¯•ç”¨ä¾‹ï¼Œæ–°å¢åœºæ™¯åªéœ€åŠ ä¸€è¡Œ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çŸ­æ€è€ƒç¬¬269å¤©ï¼Œæƒ³æ¸…æ¥šè¿™äº›ï¼ŒçŸ­æ–‡å†™ä½œï¼Œäººäººéƒ½å¯ä»¥]]></title>    <link>https://juejin.cn/post/7591497387246665764</link>    <guid>https://juejin.cn/post/7591497387246665764</guid>    <pubDate>2026-01-05T15:27:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591497387246665764" data-draft-id="7591715454134485055" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çŸ­æ€è€ƒç¬¬269å¤©ï¼Œæƒ³æ¸…æ¥šè¿™äº›ï¼ŒçŸ­æ–‡å†™ä½œï¼Œäººäººéƒ½å¯ä»¥"/> <meta itemprop="keywords" content="Android,AIç¼–ç¨‹,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-05T15:27:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜ç æ­Œ"/> <meta itemprop="url" content="https://juejin.cn/user/764915820529831"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çŸ­æ€è€ƒç¬¬269å¤©ï¼Œæƒ³æ¸…æ¥šè¿™äº›ï¼ŒçŸ­æ–‡å†™ä½œï¼Œäººäººéƒ½å¯ä»¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/764915820529831/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜ç æ­Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T15:27:43.000Z" title="Mon Jan 05 2026 15:27:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>1ã€çŸ­æ–‡å†™ä½œï¼Œå†…å®¹ä¸æ˜¯æœ€é‡è¦çš„ï¼Œé€‰é¢˜ä¹Ÿä¸æ˜¯æœ€é‡è¦çš„ï¼Œè¿™äº›éƒ½æ˜¯æœ¯ã€‚</p>
<p>2ã€æŒç»­è¾“å‡ºæˆä¸ºä¹ æƒ¯ï¼Œåƒåƒé¥­ä¸€æ ·ï¼Œä¸€å¤©ä¸å†™æµ‘èº«éš¾å—ï¼Œå˜æˆæ¯æ—¥ä¸‰é¤å¿…å¤‡ï¼Œå…ˆæ—¥æ›´å†™ä½œå‡ ä¸ªæœˆï¼Œå†è€ƒè™‘å…¶ä»–ï¼Œæƒ³åˆ°å•¥å°±å†™å•¥ï¼Œé”»ç‚¼è‡ªå·±çš„æ€è€ƒå’Œè¡¨è¾¾è¾“å‡ºèƒ½åŠ›ã€‚</p>
<p>3ã€æ§åˆ¶å¥½æ¯å¤©çš„é›¶ç¢ç‰‡æ—¶é—´ï¼ŒæŠŠæ‰€è§æ‰€é—»çš„ä¸€äº›æ€è€ƒæ„Ÿæ‚Ÿç»éªŒå†™ä¸‹æ¥ï¼ŒæŒç»­è¾“å‡ºï¼Œé¡ºä¾¿å¸®åŠ©ä¸€äº›äººã€‚</p>
<p>4ã€ä»æ­¤åˆ»å¼€å§‹ã€ä»çŸ­æ–‡å¼€å§‹ã€ä»50å­—å¼€å§‹ã€ä»æ—¥å¸¸å¼€å§‹ï¼Œå‰æœŸé‡ç‚¹æ˜¯å†™ï¼Œè€Œä¸æ˜¯å†™å¥½ã€‚</p>
<blockquote>
<p>æˆ‘æ˜¯â€<strong>ç¨‹åºå‘˜ç æ­Œ</strong>â€œï¼Œ<strong>å…¨ç½‘æ˜µç§°ç»Ÿä¸€</strong>ï¼Œ10+å¹´å¤§å‚ç¨‹åºå‘˜ç»éªŒï¼Œåœ¨èŒåœºï¼Œç©å‰¯ä¸šï¼Œç›®æ ‡å‰¯ä¸šå¹´æ”¶å…¥ç™¾ä¸‡ï¼Œæ¢ç´¢å¯å¤åˆ©å¯å¤åˆ¶çš„ä¸€äººä¼ä¸šç©æ³•ï¼Œ<strong>å¯å»gzhå›´è§‚</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rustï¼šç”¨ dyn trait éœ€è¦æ³¨æ„ object safety å“¦]]></title>    <link>https://juejin.cn/post/7591708519449214985</link>    <guid>https://juejin.cn/post/7591708519449214985</guid>    <pubDate>2026-01-05T15:37:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591708519449214985" data-draft-id="7591713442399354889" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rustï¼šç”¨ dyn trait éœ€è¦æ³¨æ„ object safety å“¦"/> <meta itemprop="keywords" content="Rust"/> <meta itemprop="datePublished" content="2026-01-05T15:37:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Pomelo_åˆ˜é‡‘"/> <meta itemprop="url" content="https://juejin.cn/user/3450694359320669"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rustï¼šç”¨ dyn trait éœ€è¦æ³¨æ„ object safety å“¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3450694359320669/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Pomelo_åˆ˜é‡‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T15:37:59.000Z" title="Mon Jan 05 2026 15:37:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1ï¼‰Rust ä¸ºä»€ä¹ˆä¼šæœ‰ object safety</h2>
<h3 data-id="heading-1">1.1 <code>dyn Trait</code> åˆ°åº•æ˜¯ä»€ä¹ˆ</h3>
<p><code>dyn Trait</code> æ˜¯<strong>ç±»å‹æ“¦é™¤åçš„åŠ¨æ€æ´¾å‘</strong>ï¼šç¼–è¯‘æœŸä¸å…³å¿ƒå…·ä½“ç±»å‹æ˜¯è°ï¼Œè¿è¡Œæ—¶é  <strong>vtableï¼ˆè™šè¡¨ï¼‰</strong> æ‰¾åˆ°å¯¹åº”å®ç°ã€‚</p>
<p>ä¸€ä¸ª <code>&amp;dyn Trait</code> / <code>Box&lt;dyn Trait&gt;</code> æœ¬è´¨ä¸Šæ˜¯â€œèƒ–æŒ‡é’ˆâ€ï¼š</p>
<ul>
<li>data pointerï¼šæŒ‡å‘çœŸå®å¯¹è±¡æ•°æ®</li>
<li>vtable pointerï¼šæŒ‡å‘è™šè¡¨ï¼ˆé‡Œé¢æ˜¯ä¸€å †å‡½æ•°æŒ‡é’ˆ + ä¸€äº›å…ƒä¿¡æ¯ï¼‰</li>
</ul>
<p><strong>å…³é”®ç‚¹</strong>ï¼švtable é‡Œçš„æ¯ä¸ªå‡½æ•°å…¥å£ï¼Œå¿…é¡»æ˜¯â€œç¡®å®šçš„ã€ç»Ÿä¸€çš„ç­¾åâ€ã€‚å› ä¸ºä¸ç®¡èƒŒåæ˜¯ <code>Foo</code> è¿˜æ˜¯ <code>Bar</code>ï¼Œå¯¹å¤–éƒ½å¾—ç”¨åŒä¸€ç§æ–¹å¼è°ƒç”¨ã€‚</p>
<h3 data-id="heading-2">1.2 å†²çªä»å“ªé‡Œæ¥</h3>
<p>å½“ trait æ–¹æ³•å‡ºç°ä¸‹é¢æƒ…å†µæ—¶ï¼Œvtable å°±æ²¡æ³•æ”¾ä¸€ä¸ªâ€œç»Ÿä¸€å…¥å£â€ï¼š</p>
<h4 data-id="heading-3">æƒ…å†µ Aï¼šæ–¹æ³•æ˜¯æ³›å‹çš„ï¼ˆéœ€è¦å•æ€åŒ–ï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">T</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">foo</span>&lt;U&gt;(&amp;<span class="hljs-keyword">self</span>, u: U);
}
</code></pre>
<p>æ³›å‹æ–¹æ³•éœ€è¦ä¸ºæ¯ä¸ª <code>U</code> ç”Ÿæˆä¸€ä»½æœºå™¨ç ï¼ˆå•æ€åŒ–ï¼‰ã€‚<br/>
ä½† vtable åªèƒ½æ”¾ä¸€ä¸ªå›ºå®šçš„å‡½æ•°æŒ‡é’ˆï¼š<code>foo</code> åˆ°åº•è¦æŒ‡å‘å“ªä¸ª <code>U</code> çš„ç‰ˆæœ¬ï¼Ÿæ”¾ä¸ä¸‹ã€‚</p>
<h4 data-id="heading-4">æƒ…å†µ Bï¼šæ–¹æ³•éœ€è¦çŸ¥é“ <code>Self</code> çš„å…·ä½“å¤§å°/å¸ƒå±€</h4>
<p>æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">T</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">clone</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span>;  <span class="hljs-comment">// è¿”å› Self</span>
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">take</span>(<span class="hljs-keyword">self</span>);            <span class="hljs-comment">// æŒ‰å€¼æ‹¿èµ° self</span>
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">merge</span>(&amp;<span class="hljs-keyword">self</span>, other: <span class="hljs-keyword">Self</span>); <span class="hljs-comment">// å‚æ•°æ˜¯ Self</span>
}
</code></pre>
<p>å¯¹ <code>dyn T</code> æ¥è¯´ï¼Œ<code>Self</code> æ˜¯â€œä¸çŸ¥é“æ˜¯è°â€ï¼Œå¤§å°æœªçŸ¥ã€‚<br/>
è¿”å› <code>Self</code>/æŒ‰å€¼ä¼  <code>Self</code> éƒ½éœ€è¦çŸ¥é“å…·ä½“å¤§å°å’Œå¦‚ä½• move/æ„é€ ï¼Œæ‰€ä»¥åšä¸åˆ°ã€‚</p>
<p><strong>object safety å°±æ˜¯ Rust æŠŠè¿™äº›â€œvtable åšä¸åˆ°çš„ç­¾åâ€ç¦æ­¢æ‰ã€‚</strong></p>
<blockquote>
<p>ä¸€å¥è¯æ€»ç»“åŸå› ï¼š<br/>
<strong>dyn = è¿è¡Œæ—¶å¤šæ€ï¼ˆvtableï¼‰ï¼›vtable éœ€è¦å›ºå®šç­¾åï¼›æ³›å‹/è£¸ Self ä¼šè®©ç­¾åæ— æ³•å›ºå®šã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-5">2) å¦‚ä½•å¿«é€Ÿåˆ¤æ–­ä¸€ä¸ª trait æ˜¯å¦ object-safeï¼ˆé€ŸæŸ¥ï¼‰</h2>
<p>åªçœ‹â€œèƒ½åœ¨ <code>dyn Trait</code> ä¸Šè°ƒç”¨çš„æ–¹æ³•â€ï¼Œæ»¡è¶³å°±è¡Œï¼›ä¸æ»¡è¶³çš„å¯ä»¥ <code>where Self: Sized</code> éš”ç¦»ã€‚</p>
<h3 data-id="heading-6">2.1 ä¼šå¯¼è‡´â€œä¸ object-safeâ€çš„é«˜é¢‘ç‚¹ï¼ˆä½ å…ˆè®°è¿™ 4 ä¸ªï¼‰</h3>
<ol>
<li><strong>æ³›å‹æ–¹æ³•</strong>ï¼š<code>fn f&lt;T&gt;(&amp;self, ...)</code></li>
<li><strong>è¿”å› <code>Self</code></strong>ï¼š<code>fn f(&amp;self) -&gt; Self</code></li>
<li><strong>å‚æ•°é‡Œå‡ºç° <code>Self</code>ï¼ˆéå¼•ç”¨ï¼‰</strong> ï¼š<code>fn f(&amp;self, x: Self)</code></li>
<li><strong>æŒ‰å€¼ receiver</strong>ï¼š<code>fn f(self)</code>ï¼ˆé™¤éç”¨ <code>self: Box&lt;Self&gt;</code> è¿™ç§æŒ‡é’ˆ receiverï¼‰</li>
</ol>
<blockquote>
<p>ä½ å…ˆæŒæ¡è¿™å››æ¡ï¼Œå·²ç»èƒ½è¦†ç›–ç»å¤§å¤šæ•°å®é™…æŠ¥é”™ã€‚</p>
</blockquote>
<h3 data-id="heading-7">2.2 <code>where Self: Sized</code> æ˜¯â€œéš”ç¦»å¼€å…³â€</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">T</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">call</span>(&amp;<span class="hljs-keyword">self</span>); <span class="hljs-comment">// âœ… è¿› vtableï¼Œå¯ dyn è°ƒç”¨</span>

    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span>
    <span class="hljs-keyword">where</span>
        <span class="hljs-keyword">Self</span>: <span class="hljs-built_in">Sized</span>; <span class="hljs-comment">// âœ… ä¸è¿› vtableï¼Œåªèƒ½é™æ€è°ƒç”¨</span>
}
</code></pre>
<p>å«ä¹‰ï¼štrait è¿˜èƒ½ <code>dyn</code>ï¼Œä½† <code>new()</code> ä¸èƒ½å¯¹ <code>dyn T</code> è°ƒã€‚</p>
<hr/>
<h2 data-id="heading-8">3) ä¸ object-safe çš„ traitï¼šæ€ä¹ˆæ”¹ APIï¼ˆå·¥ç¨‹å¥—è·¯ 3 é€‰ 1ï¼‰</h2>
<h3 data-id="heading-9">å¥—è·¯ 1ï¼š<code>where Self: Sized</code> éš”ç¦»ï¼ˆæœ€å¸¸è§ï¼‰</h3>
<p>é€‚ç”¨äºï¼šä½ ç¡®å®æƒ³ä¿ç•™ <code>fn new()-&gt;Self</code>ã€<code>fn clone()-&gt;Self</code> è¿™ç§â€œåªå¯¹å…·ä½“ç±»å‹æœ‰æ„ä¹‰â€çš„èƒ½åŠ›ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Service</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">handle</span>(&amp;<span class="hljs-keyword">self</span>, req: Request) <span class="hljs-punctuation">-&gt;</span> Response;

    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span>
    <span class="hljs-keyword">where</span>
        <span class="hljs-keyword">Self</span>: <span class="hljs-built_in">Sized</span>;
}
</code></pre>
<p>ä½ åœ¨ç”¨ trait object æ—¶å°±åªç”¨ <code>handle</code>ï¼›æ„é€ è¿˜æ˜¯ç”¨å…·ä½“ç±»å‹ <code>MyService::new()</code>ã€‚</p>
<hr/>
<h3 data-id="heading-10">å¥—è·¯ 2ï¼šæŠŠ <code>Self</code> æ”¹æˆâ€œå¯¹è±¡å®‰å…¨çš„è¿”å›ç±»å‹â€ï¼ˆå¸¸è§æ˜¯ <code>Box&lt;dyn Trait&gt;</code>ï¼‰</h3>
<p>é€‚ç”¨äºï¼šä½ éœ€è¦åœ¨è¿è¡Œæ—¶å¤šæ€çš„è¯­å¢ƒä¸‹â€œè¿”å›ä¸€ä¸ªåŒç±»å¯¹è±¡â€ã€‚</p>
<p>æŠŠ <code>-&gt; Self</code> æ”¹æˆ <code>-&gt; Box&lt;dyn Trait&gt;</code>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Shape</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">area</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">f64</span>;

    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">clone_dyn</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> Shape&gt;;
}
</code></pre>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ <strong><code>dyn Clone</code> ä¸è¡Œ</strong>ï¼Œä½†â€œclone æˆ <code>Box&lt;dyn Trait&gt;</code>â€å¯ä»¥ã€‚</p>
<hr/>
<h3 data-id="heading-11">å¥—è·¯ 3ï¼šæ‹† traitï¼ˆä¸€ä¸ªç»™ dynï¼Œä¸€ä¸ªç»™é™æ€æ³›å‹ï¼‰</h3>
<p>é€‚ç”¨äºï¼šä½ æ—¢æƒ³è¦ dynï¼ˆæ’ä»¶/å›è°ƒï¼‰ï¼Œåˆæƒ³è¦æ³›å‹/è¿”å› Self çš„â€œé«˜çº§èƒ½åŠ›â€ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Plugin</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">run</span>(&amp;<span class="hljs-keyword">self</span>);
}

<span class="hljs-comment">// é™æ€æ‰©å±•èƒ½åŠ›ï¼ˆä¸ç”¨äº dynï¼‰</span>
<span class="hljs-keyword">trait</span> <span class="hljs-title class_">PluginExt</span>: Plugin {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> <span class="hljs-keyword">where</span> <span class="hljs-keyword">Self</span>: <span class="hljs-built_in">Sized</span>;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">map</span>&lt;T&gt;(&amp;<span class="hljs-keyword">self</span>, x: T) <span class="hljs-keyword">where</span> <span class="hljs-keyword">Self</span>: <span class="hljs-built_in">Sized</span>;
}
</code></pre>
<p><code>Plugin</code> ä¿è¯ object-safeï¼Œ<code>PluginExt</code> ç»™å…·ä½“ç±»å‹ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-12">4) å½±å“èŒƒå›´ï¼šé™¤äº†â€œä¹¦ä¸Š trait objectâ€ä½ ä¼šåœ¨å“ªé‡åˆ°ï¼Ÿ</h2>
<p>åªè¦ä½ åœ¨åš<strong>ç±»å‹æ“¦é™¤è¾¹ç•Œ</strong>ï¼Œå°±ä¼šé‡åˆ° object safetyï¼š</p>
<ol>
<li><strong>æ’ä»¶ç³»ç»Ÿ / ç­–ç•¥æ¨¡å¼</strong></li>
</ol>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-type">Vec</span>&lt;<span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> Plugin&gt;&gt;
</code></pre>
<p>æ’ä»¶æ¥å£å¿…é¡» object-safeã€‚</p>
<ol start="2">
<li><strong>ä¸­é—´ä»¶ / handler é“¾</strong></li>
</ol>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> Handler&gt;
</code></pre>
<p>ä¸ºäº†æŠŠä¸åŒ handler æ”¾åœ¨åŒä¸€ä¸ªå®¹å™¨é‡Œï¼Œç”¨ dynï¼›æ¥å£è¦ object-safeã€‚</p>
<ol start="3">
<li><strong>å›è°ƒï¼ˆé—­åŒ… traitï¼‰</strong><br/>
<code>dyn Fn(...)</code> æœ¬è´¨ä¹Ÿæ˜¯ trait objectï¼Œé—­åŒ…ç›¸å…³æŠ½è±¡ä¼šè½åˆ° object safety çš„è®¾è®¡ä¸Šã€‚</li>
<li><strong>async trait è®¾è®¡</strong><br/>
å¦‚æœä½ æƒ³æŠŠå¼‚æ­¥è¡Œä¸ºæ”¾è¿› <code>dyn Trait</code>ï¼Œç»å¸¸ä¼šè¢«è¿«åœ¨ï¼š</li>
</ol>
<ul>
<li>è¿”å› <code>Pin&lt;Box&lt;dyn Future&lt;...&gt;&gt;&gt;</code>ï¼ˆèµ° dynï¼‰<br/>
vs</li>
<li><code>impl Future</code>/GATï¼ˆèµ°é™æ€ï¼‰<br/>
ä¹‹é—´å–èˆã€‚èƒŒåä¹Ÿæ˜¯â€œè¿”å›ç±»å‹èƒ½å¦åœ¨ vtable ä¸‹å›ºå®šâ€ã€‚</li>
</ul>
<p>æ‰€ä»¥ï¼š</p>
<blockquote>
<p>object safety æ˜¯ Rust ä¸ºäº†è®© trait èƒ½ç”¨ <code>dyn Trait</code> åšç±»å‹æ“¦é™¤å’Œ vtable åŠ¨æ€æ´¾å‘è®¾ç½®çš„é™åˆ¶ã€‚å› ä¸º vtable éœ€è¦å›ºå®šçš„å‡½æ•°ç­¾åï¼Œæ‰€ä»¥ trait é‡Œå¦‚æœæœ‰æ³›å‹æ–¹æ³•ï¼ˆéœ€è¦å•æ€åŒ–ï¼‰æˆ–æ–¹æ³•ç­¾åä¾èµ–å…·ä½“ <code>Self</code>ï¼ˆæ¯”å¦‚è¿”å› <code>Self</code>/æŒ‰å€¼ä¼  <code>Self</code>/<code>self</code> by valueï¼‰å°±ä¸èƒ½åšæˆ trait objectã€‚å·¥ç¨‹ä¸Šé€šå¸¸ç”¨ <code>where Self: Sized</code> æŠŠè¿™ç±»æ–¹æ³•éš”ç¦»ï¼Œæˆ–æŠŠè¿”å›å€¼æ”¹æˆ <code>Box&lt;dyn Trait&gt;</code>ï¼Œå¿…è¦æ—¶æ‹†æˆ object-safe çš„æ ¸å¿ƒ trait + ä»…ä¾›é™æ€çš„æ‰©å±• traitã€‚å¸¸è§äºæ’ä»¶ã€handlerã€ä¸­é—´ä»¶ã€å›è°ƒã€async trait è¿™äº›ç±»å‹æ“¦é™¤è¾¹ç•Œ.from Pomelo_åˆ˜é‡‘ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ã€‚æ„Ÿè°¢ï¼ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rust çš„ `PhantomData`ï¼šé›¶æˆæœ¬æŠŠâ€œè¯­ä¹‰ä¿¡æ¯â€äº¤ç»™ç¼–è¯‘å™¨]]></title>    <link>https://juejin.cn/post/7591705084671344678</link>    <guid>https://juejin.cn/post/7591705084671344678</guid>    <pubDate>2026-01-05T15:31:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591705084671344678" data-draft-id="7591728734982766619" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rust çš„ `PhantomData`ï¼šé›¶æˆæœ¬æŠŠâ€œè¯­ä¹‰ä¿¡æ¯â€äº¤ç»™ç¼–è¯‘å™¨"/> <meta itemprop="keywords" content="Rust"/> <meta itemprop="datePublished" content="2026-01-05T15:31:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Pomelo_åˆ˜é‡‘"/> <meta itemprop="url" content="https://juejin.cn/user/3450694359320669"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rust çš„ `PhantomData`ï¼šé›¶æˆæœ¬æŠŠâ€œè¯­ä¹‰ä¿¡æ¯â€äº¤ç»™ç¼–è¯‘å™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3450694359320669/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Pomelo_åˆ˜é‡‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T15:31:03.000Z" title="Mon Jan 05 2026 15:31:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å†™åº•å±‚ Rustï¼ˆå°¤å…¶æ˜¯ <strong>unsafe / è£¸æŒ‡é’ˆ / FFI</strong>ï¼‰æ—¶ï¼Œä½ ä¼šé‡åˆ°ä¸€ç§å¸¸è§çŸ›ç›¾ï¼š</p>
<ul>
<li><strong>è¿è¡Œæ—¶</strong>ï¼šä½ æ‰‹é‡Œå¯èƒ½åªæœ‰ä¸€ä¸ª <code>*const T</code> / <code>*mut T</code> / <code>*mut c_void</code>ï¼ˆæ¯”å¦‚å¤–éƒ¨åº“è¿”å›çš„å¥æŸ„ï¼‰ï¼Œç»“æ„ä½“é‡Œå¹¶æ²¡æœ‰çœŸæ­£å­˜æ”¾æŸä¸ªå¼•ç”¨æˆ–æŸä¸ªç±»å‹çš„å€¼ã€‚</li>
<li><strong>ç¼–è¯‘æœŸ</strong>ï¼šä½ åˆå¸Œæœ›ç¼–è¯‘å™¨çŸ¥é“â€œæˆ‘è¿™ä¸ªç±»å‹<strong>å’ŒæŸä¸ªç”Ÿå‘½å‘¨æœŸ/ç±»å‹ç»‘å®š</strong>â€ï¼Œä»è€Œå¸®ä½ åšå€Ÿç”¨æ£€æŸ¥ã€æ¨å¯¼ <code>Send/Sync</code>ã€é¿å…é”™è¯¯æ··ç”¨ç­‰ã€‚</li>
</ul>
<p><code>std::marker::PhantomData&lt;T&gt;</code> å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œå­˜åœ¨çš„å·¥å…·ã€‚å®˜æ–¹æ–‡æ¡£çš„æ ¸å¿ƒå®šä¹‰æ˜¯ï¼š</p>
<blockquote>
<p><code>PhantomData&lt;T&gt;</code> æ˜¯ä¸€ä¸ª <strong>é›¶å¤§å°ç±»å‹</strong>ï¼ˆZSTï¼‰ï¼Œç”¨äºæ ‡è®°ä½ çš„ç±»å‹â€œ<strong>è¡Œä¸ºä¸Šåƒæ˜¯æ‹¥æœ‰/åŒ…å«</strong> ä¸€ä¸ª <code>T</code>â€ï¼Œå°½ç®¡ä½ å®é™…ä¸Šå¹¶æ²¡æœ‰å­˜å‚¨ <code>T</code>ã€‚è¿™ä¼šå½±å“ç¼–è¯‘å™¨è®¡ç®—ä¸€äº›å®‰å…¨ç›¸å…³å±æ€§ã€‚</p>
</blockquote>
<p>ä¹Ÿå› æ­¤ï¼Œå®ƒå¸¸è¢«ç§°ä¸ºâ€œ<strong>åªåœ¨ç¼–è¯‘æœŸç”Ÿæ•ˆçš„é›¶æˆæœ¬æŠ½è±¡</strong>â€ã€‚</p>
<ul>
<li><code>size_of::&lt;PhantomData&lt;T&gt;&gt;() == 0</code></li>
<li><code>align_of::&lt;PhantomData&lt;T&gt;&gt;() == 1</code></li>
</ul>
<p>ä¸‹é¢ç”¨ä¸¤ä¸ªæœ€å…¸å‹çš„åœºæ™¯æ¥ç§‘æ™®ï¼š</p>
<ol>
<li><strong>ç»‘å®šç”Ÿå‘½å‘¨æœŸï¼ˆé˜²æ‚¬å‚ï¼‰</strong></li>
<li><strong>ç»‘å®šç±»å‹å‚æ•°ï¼ˆé˜²æ··ç”¨ï¼‰</strong></li>
</ol>
<hr/>
<h2 data-id="heading-0">1. ç»‘å®šç”Ÿå‘½å‘¨æœŸï¼šè£¸æŒ‡é’ˆä¸å¸¦ç”Ÿå‘½å‘¨æœŸï¼Œéœ€è¦ç”¨ <code>PhantomData&lt;&amp;'a T&gt;</code> æŠŠå€Ÿç”¨å…³ç³»â€œè¯´æ¸…æ¥šâ€</h2>
<p>å‡è®¾ä½ æƒ³å®ç°ä¸€ä¸ª slice/æ•°ç»„çš„è¿­ä»£å™¨æˆ–è§†å›¾ï¼Œå†…éƒ¨ç”¨è£¸æŒ‡é’ˆè¡¨ç¤ºèŒƒå›´ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Slice</span>&lt;T&gt; {
    start: *<span class="hljs-keyword">const</span> T,
    end: *<span class="hljs-keyword">const</span> T,
}
</code></pre>
<p>å¦‚æœè¿™äº›æŒ‡é’ˆæ¥è‡ªæŸä¸ªå¤–éƒ¨æ•°æ®ï¼ˆæ¯”å¦‚ <code>Vec&lt;T&gt;</code> / <code>&amp;[T]</code>ï¼‰ï¼Œä¸ºäº†é¿å…æ‚¬å‚æŒ‡é’ˆï¼Œä½ çš„çœŸå®æ„å›¾æ˜¯ï¼š</p>
<blockquote>
<p><code>Slice</code> <strong>ä¸èƒ½æ´»å¾—æ¯”åŸå§‹æ•°æ®æ›´ä¹…</strong></p>
</blockquote>
<p>ä½†é—®é¢˜æ˜¯ï¼š<code>*const T</code> <strong>ä¸æºå¸¦ç”Ÿå‘½å‘¨æœŸ</strong>ï¼Œç¼–è¯‘å™¨æ— æ³•ä»å­—æ®µä¸­æ¨å¯¼â€œå®ƒå€Ÿç”¨äº†è°ã€å€Ÿç”¨äº†å¤šä¹…â€ã€‚äºæ˜¯ä½ ä¼šæƒ³åŠ ç”Ÿå‘½å‘¨æœŸå‚æ•°ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Slice</span>&lt;<span class="hljs-symbol">'a</span>, T&gt; {
    start: *<span class="hljs-keyword">const</span> T,
    end: *<span class="hljs-keyword">const</span> T,
}
</code></pre>
<p>è¿™ä¼šç«‹åˆ»é‡åˆ°ç¼–è¯‘å™¨æŠ±æ€¨ï¼š<code>'a</code> æ²¡æœ‰è¢«ä½¿ç”¨ï¼ˆunused lifetime parameterï¼‰ã€‚æ›´é‡è¦çš„æ˜¯ï¼šå³ä½¿ä½ å¼ºè¡Œè®©å®ƒé€šè¿‡ï¼Œç¼–è¯‘å™¨ä¹Ÿä»ç„¶ä¸çŸ¥é“ <code>'a</code> å’Œå“ªäº›æ•°æ®æœ‰å…³ã€‚</p>
<h3 data-id="heading-1">æ­£ç¡®å†™æ³•ï¼šåŠ ä¸€ä¸ªâ€œå‡è£…æŒæœ‰å¼•ç”¨â€çš„æ ‡è®°å­—æ®µ</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::marker::PhantomData;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Slice</span>&lt;<span class="hljs-symbol">'a</span>, T&gt; {
    start: *<span class="hljs-keyword">const</span> T,
    end: *<span class="hljs-keyword">const</span> T,
    _marker: PhantomData&lt;&amp;<span class="hljs-symbol">'a</span> T&gt;,
}
</code></pre>
<p><code>PhantomData&lt;&amp;'a T&gt;</code> çš„å«ä¹‰å¯ä»¥ç›´è¯‘ä¸ºï¼š</p>
<blockquote>
<p>â€œè¯·æŠŠæˆ‘å½“æˆ<strong>å¥½åƒ</strong>å†…éƒ¨å­˜äº†ä¸€ä¸ª <code>&amp;'a T</code> å¼•ç”¨ã€‚â€</p>
</blockquote>
<p>äºæ˜¯ç±»å‹ç³»ç»Ÿå°±ä¼šæŠŠ <code>Slice&lt;'a, T&gt;</code> å½“æˆâ€œå€Ÿç”¨äº† <code>'a</code> çš„ <code>T</code>â€ï¼Œä»è€Œå¼ºåˆ¶å®ƒä¸èƒ½æ´»è¿‡ <code>'a</code>ã€‚</p>
<hr/>
<h3 data-id="heading-2">åä¾‹å­ï¼šæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œèƒ½ç¼–è¯‘ï¼Œä½†å¯èƒ½äº§ç”Ÿæ‚¬å‚æŒ‡é’ˆï¼ˆUBï¼‰</h3>
<p>ä¸‹é¢è¿™æ®µä»£ç æ¼”ç¤ºäº†â€œè£¸æŒ‡é’ˆ + æ²¡æœ‰ <code>'a</code>â€çš„å±é™©ï¼šå®ƒèƒ½æŠŠæŒ‡å‘å±€éƒ¨ <code>Vec</code> çš„æŒ‡é’ˆå¸¦å‡ºå‡½æ•°ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šè¿™æ®µä»£ç <strong>å¯èƒ½è§¦å‘æœªå®šä¹‰è¡Œä¸ºï¼ˆUBï¼‰</strong> ï¼Œè¯·ä¸è¦åœ¨çœŸå®é¡¹ç›®é‡Œè¿™ä¹ˆå†™ã€‚</p>
</blockquote>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">SliceIterBad</span>&lt;T&gt; {
    ptr: *<span class="hljs-keyword">const</span> T,
    len: <span class="hljs-type">usize</span>,
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">raw_from_vec_bad</span>&lt;T&gt;(v: &amp;<span class="hljs-type">Vec</span>&lt;T&gt;) <span class="hljs-punctuation">-&gt;</span> SliceIterBad&lt;T&gt; {
    SliceIterBad {
        ptr: v.<span class="hljs-title function_ invoke__">as_ptr</span>(),
        len: v.<span class="hljs-title function_ invoke__">len</span>(),
    }
}

<span class="hljs-comment">// âŒ èƒ½ç¼–è¯‘ï¼Œä½†è¿”å›çš„ ptr æŒ‡å‘å·²é‡Šæ”¾çš„å†…å­˜</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">bad</span>() <span class="hljs-punctuation">-&gt;</span> SliceIterBad&lt;<span class="hljs-type">i32</span>&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
    <span class="hljs-title function_ invoke__">raw_from_vec_bad</span>(&amp;v) <span class="hljs-comment">// v åœ¨è¿™é‡Œè¢« dropï¼Œä½†æŒ‡é’ˆè¢«å¸¦å‡ºå»äº†</span>
}
</code></pre>
<p>è¿™å°±æ˜¯å…¸å‹çš„â€œç±»å‹ç³»ç»Ÿæ²¡è¢«å‘ŠçŸ¥å€Ÿç”¨å…³ç³» â†’ ç¼–è¯‘å™¨æ— æ³•é˜»æ­¢æ‚¬å‚â€ã€‚</p>
<hr/>
<h3 data-id="heading-3">å¥½ä¾‹å­ï¼šç”¨ <code>PhantomData&lt;&amp;'a T&gt;</code> ç»‘å®šå€Ÿç”¨ï¼Œé”™è¯¯åœ¨ç¼–è¯‘æœŸæš´éœ²</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::marker::PhantomData;

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">SliceIter</span>&lt;<span class="hljs-symbol">'a</span>, T&gt; {
    ptr: *<span class="hljs-keyword">const</span> T,
    len: <span class="hljs-type">usize</span>,
    _marker: PhantomData&lt;&amp;<span class="hljs-symbol">'a</span> T&gt;,
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">raw_from_vec</span>&lt;<span class="hljs-symbol">'a</span>, T&gt;(v: &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">Vec</span>&lt;T&gt;) <span class="hljs-punctuation">-&gt;</span> SliceIter&lt;<span class="hljs-symbol">'a</span>, T&gt; {
    SliceIter {
        ptr: v.<span class="hljs-title function_ invoke__">as_ptr</span>(),
        len: v.<span class="hljs-title function_ invoke__">len</span>(),
        _marker: PhantomData,
    }
}

<span class="hljs-comment">// âŒ è¿™æ¬¡ä¼šç›´æ¥ç¼–è¯‘å¤±è´¥ï¼šä½ è¯•å›¾è¿”å›ä¸€ä¸ªå€Ÿç”¨äº†å±€éƒ¨å˜é‡ v çš„å€¼</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">good_but_wont_compile</span>() <span class="hljs-punctuation">-&gt;</span> SliceIter&lt;<span class="hljs-symbol">'static</span>, <span class="hljs-type">i32</span>&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
    <span class="hljs-title function_ invoke__">raw_from_vec</span>(&amp;v)
}
</code></pre>
<p>ä½ ä¼šå¾—åˆ°ç±»ä¼¼è¿™æ ·çš„é”™è¯¯ï¼ˆä¸åŒç‰ˆæœ¬æ–‡æ¡ˆç•¥æœ‰å·®å¼‚ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">error[E0515]: cannot <span class="hljs-keyword">return</span> <span class="hljs-keyword">value</span> <span class="hljs-keyword">referencing</span> <span class="hljs-keyword">local</span> variable `v`
  <span class="hljs-keyword">returns</span> a <span class="hljs-keyword">value</span> <span class="hljs-keyword">referencing</span> data owned <span class="hljs-keyword">by</span> the <span class="hljs-keyword">current</span> <span class="hljs-keyword">function</span>
</code></pre>
<p>è¿™å°±è¾¾åˆ°äº†ç›®çš„ï¼š<strong>æŠŠæ½œåœ¨çš„æ‚¬å‚æŒ‡é’ˆé£é™©æå‰å˜æˆç¼–è¯‘é”™è¯¯</strong>ã€‚</p>
<p>æ­£ç¡®ä½¿ç”¨æ–¹å¼æ˜¯ï¼šè®©è¿­ä»£å™¨ä¸è¶…è¿‡æ•°æ®çš„ä½œç”¨åŸŸï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">ok_usage</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">v</span> = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">it</span> = <span class="hljs-title function_ invoke__">raw_from_vec</span>(&amp;v);
    <span class="hljs-comment">// åœ¨ v çš„ç”Ÿå‘½å‘¨æœŸå†…ä½¿ç”¨ it</span>
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_</span> = it.len;
}
</code></pre>
<hr/>
<h2 data-id="heading-4">2. ç»‘å®šç±»å‹å‚æ•°ï¼šFFI å¥æŸ„æ˜¯ <code>*mut ()</code>ï¼Œç”¨ <code>PhantomData&lt;R&gt;</code> é˜²æ­¢æŠŠ A å½“ B ç”¨</h2>
<p>å¦ä¸€ç±»å¸¸è§åœºæ™¯æ¥è‡ª FFIï¼šå¤–éƒ¨åº“å¯èƒ½ç”¨ç»Ÿä¸€çš„ <code>void*</code>ï¼ˆRust é‡Œå¸¸è§ <code>*mut ()</code> æˆ– <code>*mut c_void</code>ï¼‰å½“ä½œâ€œèµ„æºå¥æŸ„â€ã€‚è¿è¡Œæ—¶åªæœ‰ä¸€ä¸ªæŒ‡é’ˆï¼Œä½†å®ƒèƒŒåå¯èƒ½å¯¹åº”ä¸åŒèµ„æºç±»å‹ã€‚</p>
<p>å¦‚æœä½ åªå†™æˆâ€œæ— ç±»å‹å¥æŸ„åŒ…è£…â€ï¼Œç¼–è¯‘å™¨åˆ†ä¸æ¸…â€œè¿™æ˜¯ Foo èµ„æºè¿˜æ˜¯ Bar èµ„æºâ€ï¼Œäºæ˜¯éå¸¸å®¹æ˜“æ··ç”¨ã€‚</p>
<h3 data-id="heading-5">åä¾‹å­ï¼šå¥æŸ„ä¸å¸¦ç±»å‹ä¿¡æ¯ï¼Œæ··ç”¨èƒ½ç¼–è¯‘ï¼Œè¿è¡Œæ—¶æ‰çˆ†ç‚¸</h3>
<p>ä¸‹é¢ç”¨ <code>assert!</code> æ¨¡æ‹Ÿâ€œç”¨é”™å¥æŸ„å°±ç‚¸â€ï¼ˆçœŸå® FFI é‡Œå¯èƒ½æ˜¯å´©æºƒ/æ•°æ®é”™ä¹±/UBï¼‰ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::ffi::c_void;

<span class="hljs-keyword">mod</span> foreign_lib {
    <span class="hljs-keyword">use</span> super::c_void;

    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Raw</span> {
        tag: <span class="hljs-type">u32</span>, <span class="hljs-comment">// 1 =&gt; Foo, 2 =&gt; Bar</span>
    }

    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">unsafe</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>(tag: <span class="hljs-type">u32</span>) <span class="hljs-punctuation">-&gt;</span> *<span class="hljs-keyword">mut</span> c_void {
        <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">into_raw</span>(<span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(Raw { tag })) <span class="hljs-keyword">as</span> *<span class="hljs-keyword">mut</span> c_void
    }

    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">unsafe</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">do_foo</span>(handle: *<span class="hljs-keyword">mut</span> c_void) {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">raw</span> = handle <span class="hljs-keyword">as</span> *<span class="hljs-keyword">mut</span> Raw;
        <span class="hljs-built_in">assert!</span>((*raw).tag == <span class="hljs-number">1</span>, <span class="hljs-string">"expected Foo handle, got tag={}"</span>, (*raw).tag);
    }

    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">unsafe</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">do_bar</span>(handle: *<span class="hljs-keyword">mut</span> c_void) {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">raw</span> = handle <span class="hljs-keyword">as</span> *<span class="hljs-keyword">mut</span> Raw;
        <span class="hljs-built_in">assert!</span>((*raw).tag == <span class="hljs-number">2</span>, <span class="hljs-string">"expected Bar handle, got tag={}"</span>, (*raw).tag);
    }

    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">unsafe</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">free</span>(handle: *<span class="hljs-keyword">mut</span> c_void) {
        <span class="hljs-title function_ invoke__">drop</span>(<span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">from_raw</span>(handle <span class="hljs-keyword">as</span> *<span class="hljs-keyword">mut</span> Raw));
    }
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ExternalResourceBad</span> {
    handle: *<span class="hljs-keyword">mut</span> c_void,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">ExternalResourceBad</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new_foo</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> { handle: <span class="hljs-keyword">unsafe</span> { foreign_lib::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">1</span>) } }
    }
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new_bar</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> { handle: <span class="hljs-keyword">unsafe</span> { foreign_lib::<span class="hljs-title function_ invoke__">new</span>(<span class="hljs-number">2</span>) } }
    }

    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">do_foo</span>(&amp;<span class="hljs-keyword">self</span>) { <span class="hljs-keyword">unsafe</span> { foreign_lib::<span class="hljs-title function_ invoke__">do_foo</span>(<span class="hljs-keyword">self</span>.handle) } }
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">do_bar</span>(&amp;<span class="hljs-keyword">self</span>) { <span class="hljs-keyword">unsafe</span> { foreign_lib::<span class="hljs-title function_ invoke__">do_bar</span>(<span class="hljs-keyword">self</span>.handle) } }
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Drop</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">ExternalResourceBad</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">drop</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) {
        <span class="hljs-keyword">unsafe</span> { foreign_lib::<span class="hljs-title function_ invoke__">free</span>(<span class="hljs-keyword">self</span>.handle) }
    }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">r</span> = ExternalResourceBad::<span class="hljs-title function_ invoke__">new_bar</span>();

    <span class="hljs-comment">// âŒ é€»è¾‘é”™è¯¯ï¼šæ‹¿ Bar çš„å¥æŸ„å»å½“ Foo ç”¨</span>
    <span class="hljs-comment">// ç¼–è¯‘å™¨çœ‹ä¸å‡ºæ¥ï¼ˆç±»å‹éƒ½ä¸€æ ·ï¼‰ï¼Œä½†è¿è¡Œæ—¶å¯èƒ½ panic/å´©æºƒ</span>
    r.<span class="hljs-title function_ invoke__">do_foo</span>();
}
</code></pre>
<h3 data-id="heading-6">å¥½ä¾‹å­ï¼šç”¨ <code>PhantomData&lt;R&gt;</code> æŠŠå¥æŸ„â€œç»‘å®šåˆ°ç±»å‹â€ï¼Œæ··ç”¨ç›´æ¥ç¼–è¯‘é”™è¯¯</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::{ffi::c_void, marker::PhantomData};

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Foo</span>;
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Bar</span>;

<span class="hljs-keyword">trait</span> <span class="hljs-title class_">ResType</span> { <span class="hljs-keyword">const</span> TAG: <span class="hljs-type">u32</span>; }
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">ResType</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Foo</span> { <span class="hljs-keyword">const</span> TAG: <span class="hljs-type">u32</span> = <span class="hljs-number">1</span>; }
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">ResType</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Bar</span> { <span class="hljs-keyword">const</span> TAG: <span class="hljs-type">u32</span> = <span class="hljs-number">2</span>; }

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ExternalResource</span>&lt;R&gt; {
    handle: *<span class="hljs-keyword">mut</span> c_void,
    _<span class="hljs-keyword">type</span>: PhantomData&lt;R&gt;,
}

<span class="hljs-keyword">impl</span>&lt;R: ResType&gt; ExternalResource&lt;R&gt; {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">new</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span> {
        <span class="hljs-keyword">Self</span> {
            handle: <span class="hljs-keyword">unsafe</span> { foreign_lib::<span class="hljs-title function_ invoke__">new</span>(R::TAG) },
            _<span class="hljs-keyword">type</span>: PhantomData,
        }
    }
}

<span class="hljs-keyword">impl</span>&lt;R&gt; <span class="hljs-built_in">Drop</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">ExternalResource</span>&lt;R&gt; {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">drop</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) {
        <span class="hljs-keyword">unsafe</span> { foreign_lib::<span class="hljs-title function_ invoke__">free</span>(<span class="hljs-keyword">self</span>.handle) }
    }
}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">takes_foo</span>(_: ExternalResource&lt;Foo&gt;) {}

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">foo</span> = ExternalResource::&lt;Foo&gt;::<span class="hljs-title function_ invoke__">new</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">bar</span> = ExternalResource::&lt;Bar&gt;::<span class="hljs-title function_ invoke__">new</span>();

    <span class="hljs-title function_ invoke__">takes_foo</span>(foo); <span class="hljs-comment">// âœ… OK</span>

    <span class="hljs-comment">// takes_foo(bar);</span>
    <span class="hljs-comment">// âŒ ç¼–è¯‘æœŸæŠ¥é”™ï¼š</span>
    <span class="hljs-comment">// expected `ExternalResource&lt;Foo&gt;`, found `ExternalResource&lt;Bar&gt;`</span>
}
</code></pre>
<p>è¿™å°±æ˜¯æ–‡æ¡£é‡Œâ€œæœªä½¿ç”¨ç±»å‹å‚æ•°â€çš„æ ¸å¿ƒæ„ä¹‰ï¼šå“ªæ€•ç»“æ„ä½“é‡Œ<strong>æ ¹æœ¬æ²¡æœ‰å­˜ <code>R</code></strong>ï¼Œä½ ä»ç„¶å¯ä»¥ç”¨ <code>PhantomData&lt;R&gt;</code> è®©ç±»å‹ç³»ç»Ÿè®°ä½å¹¶åŒºåˆ†å®ƒï¼Œä»è€ŒæŠŠå¾ˆå¤šâ€œæœ¬æ¥åªèƒ½é äººè‚‰ä¿è¯çš„çº¦å®šâ€å˜æˆ<strong>ç¼–è¯‘å™¨å¯æ£€æŸ¥çš„çº¦æŸ</strong>ã€‚
from Pomelo_åˆ˜é‡‘ï¼Œè½¬è½½è¯·æ³¨æ˜åŸæ–‡é“¾æ¥ã€‚æ„Ÿè°¢ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æŠ€æœ¯æ–¹æ¡ˆè¯„å®¡æ²¡äººå¬ï¼Ÿåˆ«äººæŠ“ä¸ä½é‡ç‚¹ï¼Ÿä½ ä¸å¦¨è¿™æ ·åšï¼]]></title>    <link>https://juejin.cn/post/7591705084671361062</link>    <guid>https://juejin.cn/post/7591705084671361062</guid>    <pubDate>2026-01-05T15:51:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591705084671361062" data-draft-id="7588445306086883328" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æŠ€æœ¯æ–¹æ¡ˆè¯„å®¡æ²¡äººå¬ï¼Ÿåˆ«äººæŠ“ä¸ä½é‡ç‚¹ï¼Ÿä½ ä¸å¦¨è¿™æ ·åšï¼"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-05T15:51:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å§†æ–¯æ"/> <meta itemprop="url" content="https://juejin.cn/user/1355016376951341"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æŠ€æœ¯æ–¹æ¡ˆè¯„å®¡æ²¡äººå¬ï¼Ÿåˆ«äººæŠ“ä¸ä½é‡ç‚¹ï¼Ÿä½ ä¸å¦¨è¿™æ ·åšï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1355016376951341/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å§†æ–¯æ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T15:51:42.000Z" title="Mon Jan 05 2026 15:51:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ å¼•è¨€ï¼šä¸Šä¸‡å­—çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œä¸ºä½•æ¢æ¥æ»¡å±‹çš„å“ˆæ¬ ï¼Ÿ</h2>
<h3 data-id="heading-1">1.1 ç°è±¡</h3>
<p>å¾ˆå¤šæŠ€æœ¯åŒå­¦åœ¨å‡†å¤‡è¯„å®¡æ—¶ï¼Œä¼šé™·å…¥ä¸€ç§â€œè‡ªæˆ‘æ„ŸåŠ¨å¼â€çš„å‹¤å¥‹ï¼šç†¬å¤œå†™äº†å‡ åé¡µçš„ æŠ€æœ¯æ–‡æ¡£ï¼Œæµç¨‹å›¾ç²¾ç»†åˆ°æ¯ä¸€ä¸ªå˜é‡çš„å‘½åï¼Œé€»è¾‘æ¨å¯¼æ— æ‡ˆå¯å‡»ã€‚ç„¶è€Œï¼Œåˆ°äº†ç°åœºï¼Œå½“ä½ æ‘Šå¼€æ–‡æ¡£å¼€å§‹é€è¡Œå®£è¯»æ—¶ï¼Œå´å‘ç°ï¼šæ¶æ„å¸ˆåœ¨çœ‹æ‰‹æœºå›ä¿¡æ¯ï¼Œå¼€å‘åŒå­¦åœ¨å¼€å‘éœ€æ±‚ æˆ–è€… çš±ç€çœ‰å¤´çœ‹ä½ çš„æ–‡æ¡£ï¼Œäº§å“ç»ç†ç”šè‡³åœ¨å·å·æ”¹éœ€æ±‚ã€‚</p>
<p>è¿™ç§æŒ«è´¥æ„Ÿé€šå¸¸æºäºä¸€ä¸ªè¯¯åŒºï¼šæ–‡æ¡£å†™å¾—å¥½ï¼Œä¸ç­‰äºè¯„å®¡ä¼šé˜è¿°åœ°å¥½ã€‚ä½ ä»¥ä¸ºå¤§å®¶æ˜¯æ¥é˜…è¯»çš„ï¼Œå®é™…ä¸Šå¤§å®¶æ˜¯æ¥<strong>å†³ç­–</strong>çš„ã€‚</p>
<h3 data-id="heading-2">1.2 ç°è±¡å‰–æï¼šå¼‚æ­¥ä¿¡æ¯ä¼ é€’ vs. åŒæ­¥å†³ç­–è¾¾æˆ</h3>
<ul>
<li><strong>æ–‡æ¡£ï¼ˆå¼‚æ­¥ï¼‰ï¼š</strong> å®ƒçš„æœ¬è´¨æ˜¯ä¿¡æ¯çš„<strong>å½’æ¡£ä¸ç´¢å¼•</strong>ã€‚å®ƒéœ€è¦è¯¦å°½ã€å‘¨å¯†ï¼Œæ–¹ä¾¿åˆ«äººåœ¨ä»»ä½•æ—¶é—´æŸ¥é˜…ã€‚</li>
<li><strong>è¯„å®¡ä¼šï¼ˆåŒæ­¥ï¼‰ï¼š</strong> å®ƒçš„æœ¬è´¨æ˜¯<strong>ç®—åŠ›çš„å¹¶å‘ä¸å…±è¯†çš„è¾¾æˆ</strong>ã€‚ä¼šè®®å®¤é‡Œåç€çš„æ¯ä¸€ä¸ªäººéƒ½æ˜¯ä¸€ä¸ªç®—åŠ›å•å…ƒï¼Œä»–ä»¬è„‘å­é‡Œè£…æ»¡äº†è¿‡å»çš„å¡«å‘ç»éªŒã€ç°æœ‰çš„ä»£ç é€»è¾‘å’Œå¯¹æœªæ¥çš„æ¶æ„é¢„åˆ¤ï¼Œæ¯ä¸ªäººæœ€å¤šåªæœ‰15åˆ†é’Ÿçš„ä¸“æ³¨åŠ›ï¼Œä½ éœ€è¦å°½å¿«æŠŠé—®é¢˜å°½å¿«è®²æ¸…æ¥šã€‚å¦‚æœä½ åªæ˜¯åœ¨å¿µæ–‡æ¡£ï¼Œé‚£å°±æ˜¯åœ¨ç”¨é«˜æ˜‚çš„ç®—åŠ›æˆæœ¬å»åšâ€œä½çº§çš„æ–‡ä»¶éå†â€ã€‚</li>
</ul>
<p>å†™å¥½æ–‡æ¡£æ˜¯åŸºæœ¬åŠŸï¼Œå®ƒä¿è¯äº†æ–¹æ¡ˆçš„<strong>æ·±åº¦</strong>ï¼›ä½†è®²å¥½æ–¹æ¡ˆæ˜¯é¢†å¯¼åŠ›ï¼Œå®ƒå†³å®šäº†æ–¹æ¡ˆçš„<strong>å¹¿åº¦</strong>ã€‚ä¸€ä¸ªå¥½çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œä¸ä»…éœ€è¦é€»è¾‘çš„è‡ªæ´½ï¼Œæ›´éœ€è¦é«˜æ•ˆçš„æ²Ÿé€š</p>
<h3 data-id="heading-3">1.3 è®¤çŸ¥é‡æ„ï¼šè¯„å®¡ä¼šçš„ä¸‰ä¸ªçœŸç›¸</h3>
<p>åœ¨è¿›å…¥æŠ€å·§å±‚é¢ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆæ‰“ç¢å¹¶é‡å»ºå¯¹â€œè¯„å®¡ä¼šâ€çš„è®¤çŸ¥ã€‚</p>
<h5 data-id="heading-4">1ã€ è¯„å®¡ä¸æ˜¯ä¸ºäº†â€œå±•ç¤ºå·¥ä½œé‡â€</h5>
<p>æ²¡äººå…³å¿ƒä½ ä¸ºäº†è¿™ä¸ªæ–¹æ¡ˆåŠ äº†å¤šå°‘ç­ï¼Œä¹Ÿæ²¡äººå…³å¿ƒä½ æŸ¥äº†å¤šå°‘èµ„æ–™ã€‚</p>
<ul>
<li><strong>æ®‹å®ï¼š</strong> å¬ä¼—åªå…³å¿ƒä¸¤ä»¶äº‹â€”â€” <strong>â€œè¿™ä¸œè¥¿æœ‰é—®é¢˜å—ï¼Ÿâ€</strong> ã€ <strong>â€œè¿™ä¸œè¥¿å’Œæˆ‘æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿâ€</strong></li>
<li><strong>ç­–ç•¥ï¼š</strong> æ”¶èµ·é‚£äº›çç¢çš„å®ç°ç»†èŠ‚ï¼ŒæŠŠé‡ç‚¹æ”¾åœ¨æ–¹æ¡ˆçš„<strong>ç¨³å¥æ€§</strong>å’Œ<strong>ç®€æ´æ€§</strong>ä¸Šã€‚</li>
</ul>
<h5 data-id="heading-5">2ã€è¯„å®¡æ˜¯ä¸ºäº†â€œé™ä½é£é™©â€</h5>
<ul>
<li><strong>å¿ƒæ€è½¬å˜ï¼š</strong> è¯„å®¡ä¼šæœ¬è´¨ä¸Šæ˜¯ä¸€åœºâ€œå¤§å®¶æ¥æ‰¾èŒ¬â€ã€‚ä¸è¦æŠŠåŒäº‹çš„è´¨ç–‘çœ‹ä½œæŒ‘è¡…ï¼Œè¦æŠŠä»–ä»¬çœ‹ä½œä½ çš„å…è´¹ QAã€‚å€Ÿç”¨é›†ä½“çš„è§†è§’å»æ‰«æä½ æ€ç»´ä¸­çš„ç›²ç‚¹ï¼Œæ€»æ¯”æ–¹æ¡ˆä¸Šçº¿åçº¿ä¸Šå´©äº†å¥½å§ï¼Ÿ</li>
</ul>
<h5 data-id="heading-6">3ã€è¯„å®¡æ˜¯ä¸ºäº†â€œè¾¾æˆå…±è¯†â€</h5>
<ul>
<li><strong>æ ¸å¿ƒç›®æ ‡ï¼š</strong> è¯„å®¡ä¼šçš„ç»ˆç‚¹ä¸æ˜¯â€œä¼šè®®ç»“æŸâ€ï¼Œè€Œæ˜¯â€œè¡ŒåŠ¨ä¸€è‡´â€ã€‚ç¡®ä¿åç«¯çŸ¥é“æ€ä¹ˆå†™æ¥å£ï¼Œå‰ç«¯çŸ¥é“æ€ä¹ˆæ¥æ•°æ®ï¼Œæµ‹è¯•çŸ¥é“æ€ä¹ˆå†™ç”¨ä¾‹ã€‚è¯„å®¡ç»“æŸæ—¶ï¼Œå¦‚æœå¤§å®¶å¯¹â€œæ€ä¹ˆåšâ€è¿˜æœ‰æ­§ä¹‰ï¼Œé‚£ä¹ˆè¿™åœºè¯„å®¡å°±æ˜¯å¤±è´¥çš„ã€‚</li>
</ul>
<p><strong>å…ˆç‚¹èµåæ”¶è—ï¼ŒæŠ€æœ¯è–ªèµ„å˜å˜æ¶¨ï¼</strong></p>
<p><strong>å…ˆç‚¹èµåæ”¶è—ï¼ŒæŠ€æœ¯è–ªèµ„å˜å˜æ¶¨ï¼</strong></p>
<p><strong>å…ˆç‚¹èµåæ”¶è—ï¼ŒæŠ€æœ¯è–ªèµ„å˜å˜æ¶¨ï¼</strong></p>
<br/>
<hr/>
<h2 data-id="heading-7">äºŒã€å¦‚ä½•å‡†å¤‡ä¸€åœºæŠ€æœ¯è¯„å®¡ä¼šè®®ï¼Ÿ</h2>
<h3 data-id="heading-8">2.1 æˆ˜æœ¯å‡†å¤‡ï¼šå¦‚ä½•åœ¨å¼€ä¼šå‰å°±èµ¢äº†ä¸€åŠï¼Ÿ</h3>
<p>ä¸æ‰“æ— å‡†å¤‡ä¹‹ä»—ã€‚åœ¨è¸å…¥ä¼šè®®å®¤ä¹‹å‰ï¼Œä»¥ä¸‹ä¸‰æ­¥å†³å®šäº†ä½ çš„èƒœç®—ï¼š</p>
<h4 data-id="heading-9">1ã€è¯†åˆ«ä½ çš„è§‚ä¼—ï¼šä¸åŒå²—ä½çš„â€œå…³æ³¨ç‚¹éš”ç¦»â€</h4>
<p>ä¸è¦å¯¹æ‰€æœ‰äººè®²åŒæ ·çš„è¯ã€‚åœ¨é˜è¿°æ—¶ï¼Œä½ è¦å­¦ä¼šç²¾å‡†æŠ•å–‚ï¼š</p>
<ul>
<li><strong>æ¶æ„å¸ˆ/æŠ€æœ¯ä¸“å®¶ï¼š</strong> ä»–ä»¬å…³å¿ƒ<strong>æ‰©å±•æ€§</strong>å’Œ<strong>ä¸€è‡´æ€§</strong>ã€‚å…³æ³¨ç‚¹ï¼šåœ¨é«˜å¹¶å‘ä¸‹ä¼šæ­»å—ï¼Ÿåå¹´åè¿™ä¸ªæ¶æ„è¿˜èƒ½ç”¨å—ï¼Ÿ</li>
<li><strong>ä¸šåŠ¡æ–¹/äº§å“ç»ç†ï¼š</strong> ä»–ä»¬å…³å¿ƒ<strong>äº¤ä»˜æ—¶é—´</strong>å’Œ<strong>ä¸šåŠ¡é€»è¾‘</strong>ã€‚å…³æ³¨ç‚¹ï¼šä¸‹å‘¨ä¸‰èƒ½ä¸Šçº¿å—ï¼Ÿæ¼æ‰é‚£ä¸ªäº§å“åœºæ™¯äº†å—ï¼Ÿ</li>
<li><strong>è¿ç»´/QAï¼š</strong> ä»–ä»¬å…³å¿ƒ<strong>ç¨³å®šæ€§</strong>å’Œ<strong>å¯è§‚æµ‹æ€§</strong>ã€‚å…³æ³¨ç‚¹ï¼šæœ‰æ—¥å¿—å—ï¼Ÿèƒ½ç›‘æ§å—ï¼Ÿä¸‡ä¸€å´©äº†èƒ½ä¸€é”®é‡å¯å—ï¼Ÿ</li>
</ul>
<h4 data-id="heading-10">2ã€è¯†åˆ«è¦çªå‡ºçš„é‡ç‚¹ï¼šä¸åŒæ–¹æ¡ˆæœ‰ä¸åŒé‡ç‚¹</h4>
<p>æŠ€æœ¯æ–¹æ¡ˆåƒå·®ä¸‡åˆ«ï¼Œå¦‚æœç”¨åŒä¸€å¥—æ¨¡ç‰ˆå»å¥—æ‰€æœ‰æ–¹æ¡ˆï¼Œæ•ˆæœå¾€å¾€ä¼šå¤§æ‰“æŠ˜æ‰£ã€‚</p>
<p>æ–¹æ¡ˆç±»å‹ä¸åŒã€å—ä¼—ä¸åŒï¼Œè‡ªç„¶ä¼šäº§ç”Ÿä¸åŒçš„é˜è¿°é‡ç‚¹ï¼</p>



































<table><thead><tr><th><strong>æ–¹æ¡ˆç±»å‹</strong></th><th><strong>æ ¸å¿ƒå…³é”®è¯</strong></th><th><strong>å¬ä¼—æœ€æ‹…å¿ƒçš„é—®é¢˜</strong></th><th><strong>æœ€æœ‰æ•ˆçš„å±•ç¤ºå·¥å…·</strong></th></tr></thead><tbody><tr><td><strong>åè®®/æ ‡å‡†</strong></td><td><strong>è¯­ä¹‰ã€è§£è€¦</strong></td><td>æ–¹æ¡ˆå¤ªæŠ½è±¡ï¼Œå¬ä¸æ‡‚ä¸šåŠ¡ä»·å€¼ï¼›å­—æ®µå®šä¹‰ä¸æ¸…æ™°ï¼Œå¯¼è‡´åæœŸç†è§£æˆæœ¬é«˜/è”è°ƒç¾éš¾ã€‚</td><td>å°‘è®²å®ç°ï¼Œå¤šè®²äº¤äº’å¥‘çº¦å’ŒåŸåˆ™ï¼šæ¦‚å¿µå›¾ã€æ¯”å–»ã€JSON ç¤ºä¾‹</td></tr><tr><td><strong>æ¶æ„/åŸºå»º</strong></td><td><strong>æƒè¡¡ã€ç¨³å®šæ€§</strong></td><td>æ¶æ„æ²¡æœ‰å®Œç¾çš„ï¼Œåªæœ‰æœ€åˆé€‚çš„ï¼šâ€œè¿™ç©æ„å„¿ç¨³ä¸ç¨³å®šï¼Ÿæ‰©å±•æ€§é«˜å—ï¼ŸROIé«˜å—ï¼Ÿâ€</td><td>æ¶æ„å…¨æ™¯å›¾ã€å¯¹æ¯”è¡¨æ ¼</td></tr><tr><td><strong>ä¸šåŠ¡/äº§å“</strong></td><td><strong>æµç¨‹ã€é—­ç¯</strong></td><td>ç”¨æˆ·ä½“éªŒå·®ã€æ¼åœºæ™¯ã€æ’æœŸè¿‡é•¿</td><td>æµç¨‹å›¾ã€UI åŸå‹ã€æ—¶åºå›¾</td></tr><tr><td><strong>é‡æ„/ä¼˜åŒ–</strong></td><td><strong>æŒ‡æ ‡ã€ä»·å€¼é‡åŒ–</strong></td><td>1. ç°åœ¨èƒ½è·‘ï¼Œé‡æ„å‡ºBugã€‚2. è®²ä¸æ¸…ä»·å€¼ç™½å¿™æ´»</td><td>æŸ±çŠ¶å¯¹æ¯”å›¾ã€æ€§èƒ½ç«ç„°å›¾ã€é‡æ„çš„åæœï¼ˆæŠ€æœ¯å€ºåŠ¡ã€å®‰å…¨éšæ‚£ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-11">3ã€ å…³é”®å†³ç­–ç‚¹æå‰åŒæ­¥ç»™å…³é”®å†³ç­–äºº</h4>
<p><strong>æå‰é€šæ°” :</strong>  å¦‚æœä½ æœ‰ä¸€ä¸ªé‡å¤§çš„æŠ€æœ¯å†³ç­–oræŠ€æœ¯æ”¹åŠ¨ï¼Œä¸€å®šè¦åœ¨ä¼šå‰ç§ä¸‹æ‰¾å…³é”®çš„æ¶æ„å¸ˆæˆ– Leader æ²Ÿé€šã€‚</p>
<p><strong>å¥½å¤„ï¼š</strong> 1. æå‰åŒ–è§£å†²çªï¼› 2. æ ¹æ®ä»–ä»¬çš„åé¦ˆä¿®æ­£æ–¹æ¡ˆï¼Œè®©ä»–ä»¬åœ¨ä¼šä¸Šæˆä¸ºä½ çš„â€œç›Ÿå‹â€è€Œéâ€œé˜»åŠ›â€ã€‚</p>
<h4 data-id="heading-12">4ã€å¤šç”»å›¾ï¼Œå°‘å†™å­—</h4>
<p>äººç±»æ°¸è¿œæ˜¯è§†è§‰åŠ¨ç‰©ï¼Œæ”¾å¼ƒæ–‡æ¡£é‡Œçš„é•¿ç¯‡å¤§è®ºï¼Œå‡†å¤‡å¥½ä¸‰å¼ å›¾ï¼š</p>
<ul>
<li><strong>æ¶æ„å›¾ï¼ˆç³»ç»Ÿçš„éª¨æ¶ï¼‰ï¼š</strong> å®ƒæ˜¯å…¨å±€è§†è§’ï¼Œå‘Šè¯‰å¤§å®¶ç»„ä»¶ä¹‹é—´æ˜¯æ€ä¹ˆç»„åˆçš„ã€‚</li>
<li><strong>åºåˆ—å›¾ï¼ˆæ•°æ®çš„æµè½¬ï¼‰ï¼š</strong> å®ƒæ˜¯åŠ¨æ€è§†è§’ï¼Œå±•ç¤ºä¸€ä¸ªè¯·æ±‚ä»å¤´åˆ°å°¾ç»å†äº†ä»€ä¹ˆã€‚è¿™ä¹Ÿæ˜¯æœ€èƒ½å‘ç°é€»è¾‘æ¼æ´çš„å›¾ã€‚</li>
<li><strong>çŠ¶æ€æœºå›¾ï¼ˆä¸šåŠ¡çš„çµé­‚ï¼‰ï¼š</strong> é’ˆå¯¹å¤æ‚çš„è®¢å•ã€å®¡æ‰¹æµï¼ŒçŠ¶æ€æœºæ˜¯å”¯ä¸€çš„ç»ˆææ–¹æ¡ˆã€‚</li>
</ul>
<br/>
<h3 data-id="heading-13">2.2 å‡†å¤‡å¥½ä¸€ä¸ªç»“æ„åŒ–å™äº‹</h3>
<p>å¤§éƒ¨åˆ†æŠ€æœ¯æ–¹æ¡ˆéƒ½å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ¥é˜è¿°</p>
<h4 data-id="heading-14">1ã€ ç¬¬ä¸€éƒ¨åˆ†: "The Hook" (ä¸€ä¸ªé«˜å±‚å®šä¹‰)</h4>
<p><strong>å¼€åœºä¸è¦è®²æŠ€æœ¯ç»†èŠ‚ï¼Œç”¨ä¸€å¥è¯å®šä¹‰ä½ çš„æ–¹æ¡ˆï¼ŒåŒ…å«â€œç—›ç‚¹â€å’Œâ€œä»·å€¼â€ã€‚</strong></p>
<p>ä¸è¦ç›´æ¥è¯´â€œæˆ‘è¦åŠ ä¸ªå­—æ®µâ€ã€‚è¦è¯´è¿™ä¸ªåŠŸèƒ½ä¸ºç”¨æˆ·è§£å†³äº†ä»€ä¹ˆç—›ç‚¹ï¼Œæˆ–è€…æ”¯æ’‘äº†ä»€ä¹ˆä¸šåŠ¡æŒ‡æ ‡ã€‚</p>
<ul>
<li><em>é”™è¯¯ç¤ºèŒƒï¼š</em> â€œè¿™æ˜¯ä¸€ä¸ªåŸºäº HTTP çš„æµå¼ä¼ è¾“åè®®...â€</li>
<li><em>æœ€ä½³å®è·µï¼š</em> â€œæˆ‘é˜è¿°çš„è¿™ä¸€å¥—åŸºäº AG-UIçš„å‰åç«¯æµå¼åè®®æ˜¯ä¸€å¥—è®©å‰ç«¯èƒ½å¬æ‡‚ Agent è¾“å‡ºçš„åè®®ï¼Œå®ƒè§£å†³äº†å¤§æ¨¡å‹ä¸»è¦ä¸ºäº†èŠå¤©ï¼Œä½†æ˜¯æ— æ³•æ§åˆ¶ç°æœ‰å‰ç«¯ä¸šåŠ¡çš„ç—›ç‚¹ã€‚â€</li>
</ul>
<h4 data-id="heading-15">2ã€ ç¬¬äºŒéƒ¨åˆ†ï¼šä¸€å¼ æ ¸å¿ƒæ¶æ„å›¾</h4>
<p><strong>ä¸è¦æ”¾å‡ åå¼ å›¾ï¼Œåªéœ€è¦ä¸€å¼ æ€»çš„çš„é€»è¾‘æ¶æ„å›¾ã€‚</strong></p>
<ul>
<li><strong>å…³é”®ç‚¹ï¼š</strong> è¿™å¼ å›¾å¿…é¡»åŒ…å«<strong>è¾“å…¥ã€å¤„ç†ã€è¾“å‡º</strong> ã€‚</li>
<li><strong>æŠ€å·§ï¼š</strong> ç”¨é¢œè‰²åŒºåˆ†æ¨¡å—ï¼Œç”¨ç®­å¤´è¡¨ç¤ºæ•°æ®æµå‘ã€‚æŒ‡ç€å›¾è®² 5 åˆ†é’Ÿï¼Œèƒœè¿‡è¯» 20 é¡µæ–‡æ¡£ã€‚</li>
<li><strong>æ¡ˆä¾‹ï¼š</strong> å‡è®¾ä½ åœ¨è®¾è®¡ä¸€ä¸ªå®æ—¶åŒæ­¥ç³»ç»Ÿï¼Œä¸è¦è®²å‡ åä¸ªæ¥å£ï¼Œè€Œæ˜¯æŠ½è±¡ä¸ºï¼š
<ul>
<li><strong>é€šä¿¡å±‚ï¼š</strong> è´Ÿè´£æ€ä¹ˆå‘ï¼ˆSSE/WebSocketï¼‰ã€‚</li>
<li><strong>è¯­ä¹‰å±‚ï¼š</strong> è´Ÿè´£å‘ä»€ä¹ˆï¼ˆæ¶ˆæ¯/äº‹ä»¶ï¼‰ã€‚</li>
<li><strong>çŠ¶æ€å±‚ï¼š</strong> è´Ÿè´£ä¸Šä¸‹æ–‡åŒæ­¥ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-16">3ã€ ç¬¬ä¸‰éƒ¨åˆ†ï¼šä¸€æ¡å…³é”®é“¾è·¯</h4>
<p><strong>è¿™æ˜¯æœ€å®¹æ˜“è¢«å¿½è§†çš„ä¸€æ­¥ã€‚é€‰å–ä¸€ä¸ªæœ€å…·ä»£è¡¨æ€§çš„ä¸šåŠ¡åœºæ™¯ï¼Œå±•ç¤ºæœ€æ ¸å¿ƒçš„æ—¶åºå›¾æˆ–çŠ¶æ€æœºï¼Œä¸²è®²å…¨æµç¨‹ã€‚</strong></p>
<ul>
<li><strong>å…³é”®ç‚¹ï¼š</strong> 1ã€æœ€å…·ä»£è¡¨æ€§çš„ä¸šåŠ¡åœºæ™¯ï¼›2ã€æœ€æ ¸å¿ƒçš„æ—¶åºå›¾æˆ–è€…çŠ¶æ€æœº ã€‚</li>
<li><strong>ç›®çš„ï¼š</strong> è¿™å« <strong>ç«¯åˆ°ç«¯æ¼”ç¤º</strong>ï¼Œå®ƒèƒ½è¯æ˜ä½ çš„æ–¹æ¡ˆæ˜¯è·‘å¾—é€šçš„ï¼Œè€Œä¸åªæ˜¯çº¸ä¸Šè°ˆå…µã€‚</li>
<li><strong>æ¡ˆä¾‹ï¼š</strong> â€œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œå½“ç”¨æˆ·å’ŒAgentè¯´â€˜å¸®æˆ‘è®¢ç¥¨â€™æ—¶ï¼Œç³»ç»Ÿå†…éƒ¨å‘ç”Ÿäº†ä»€ä¹ˆã€‚â€</li>
</ul>
<h4 data-id="heading-17">4ã€ ç¬¬å››éƒ¨åˆ†ï¼šå…³é”®æŠ€æœ¯å¡ç‚¹çš„è§£å†³æ–¹æ¡ˆ å’Œ å…³é”®åœºæ™¯çš„è¦†ç›–</h4>
<p>è®²å®Œäº†æ•´ä½“ï¼Œæœ‰å¿…è¦è®²ä¸€ä¸‹æ–¹æ¡ˆä¸­æœ€é‡è¦çš„è¦ç‚¹å’Œç»†èŠ‚ã€‚å…ˆæœ‰é¢ï¼Œåè®²ç‚¹ã€‚<strong>å‰é¢æœ‰äº†æ–¹æ¡ˆçš„æ•´ä½“è®¤çŸ¥ï¼Œè¯„å®¡çš„åŒäº‹å¤§æ¦‚ä¹Ÿèƒ½è¯†åˆ«å‡ºæœ€é‡è¦çš„å¡ç‚¹å’Œåœºæ™¯æ˜¯ä»€ä¹ˆ</strong>ï¼Œè¿™æ—¶å€™åº”è¯¥ä¸»åŠ¨è®²å‡ºæ¥ã€‚</p>
<h5 data-id="heading-18">a. å…³é”®æŠ€æœ¯å¡ç‚¹</h5>
<p>ä¸»åŠ¨æš´éœ²æ–¹æ¡ˆä¸­â€œæœ€éš¾å•ƒçš„ç¡¬éª¨å¤´â€æˆ–â€œå­˜åœ¨æƒè¡¡çš„ç‚¹â€ã€‚</p>
<ul>
<li><strong>ç›®çš„ï¼š</strong> 1. å»ºç«‹æƒå¨ï¼šè¯æ˜ä½ å¯¹æ–¹æ¡ˆæœ‰æ·±åº¦æ€è€ƒï¼Œè€Œä¸æ˜¯åªåšäº†è¡¨é¢å·¥ä½œã€‚ 2. å¯»æ±‚å…±è¯†ï¼š éš¾ç‚¹å¾€å¾€æ„å‘³ç€é£é™©ã€‚ä¸»åŠ¨æå‡ºæ¥ï¼Œæ˜¯ä¸ºäº†è®©å¤§å®¶å…±åŒèƒŒä¹¦ï¼Œé¿å…â€œäº‹åèƒŒé”…â€ã€‚</li>
<li><strong>æ¡ˆä¾‹ï¼š</strong> é‡åˆ°çš„æŒ‘æˆ˜ â€”â€”&gt; å°è¯•è¿‡çš„æ–¹æ¡ˆ â€”â€”&gt; æœ€ç»ˆçš„é€‰æ‹©ï¼ˆç†ç”±ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-19">b. å…³é”®åœºæ™¯è¦†ç›–</h5>
<p>è¯æ˜ä½ çš„æ–¹æ¡ˆçš„å¥å£®æ€§ã€‚</p>
<ul>
<li><strong>ç›®çš„ï¼š</strong> 1. æ¶ˆé™¤è´¨ç–‘ï¼š ä½ å…ˆè®²äº†ï¼Œä»–ä»¬å°±æ²¡æ³•æŒ‘åˆºäº†ã€‚ 2. é²æ£’æ€§è¯æ˜</li>
<li><strong>æ¡ˆä¾‹ï¼š</strong>
<ul>
<li>é«˜å¹¶å‘åœºæ™¯ã€‚</li>
<li>å¼‚å¸¸/è¾¹ç•Œåœºæ™¯ã€‚</li>
<li>æ–°æ—§å…¼å®¹åœºæ™¯ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-20">5ã€ æ€»ç»“</h4>
<p><strong>æœ€ä½³å®è·µï¼šä»ç—›ç‚¹å‡ºå‘ â€”â€”&gt; æå‡ºç›®æ ‡å’Œä»·å€¼ â€”â€”&gt; å±•ç¤ºæ€»æ¶æ„ â€”â€”&gt; æ¼”ç¤ºå…³é”®é“¾è·¯ â€”â€”&gt; å…³é”®æŠ€æœ¯å¡ç‚¹çš„è§£å†³æ–¹æ¡ˆ å’Œ å…³é”®åœºæ™¯çš„è¦†ç›–</strong></p>
<hr/>
<br/>
<h2 data-id="heading-21">ä¸‰ã€åœ¨æŠ€æœ¯è¯„å®¡ä¸­çš„é˜è¿°æŠ€å·§</h2>
<h3 data-id="heading-22">3.1 ç»“è®ºå…ˆè¡Œ</h3>
<p>å¾ˆå¤šè¯»è¿‡ç ”ç©¶ç”Ÿçš„åŒå­¦ä¼šæœ‰ä¸€ä¸ªä¹ æƒ¯ï¼šå…ˆè®²æ¸…æ¥šèƒŒæ™¯ã€æŠ€æœ¯åè¯é‡Šä¹‰ç­‰ï¼Œç¡®ä¿æ‰€æœ‰å®šä¹‰ç­‰æ˜¯æ¸…æ¥šçš„ï¼Œæ‰å¼€å§‹è®²æ€ä¹ˆåšã€‚è¿™åœ¨å­¦æœ¯åœˆã€æŠ€æœ¯æ–‡æ¡£å†™ä½œä¸Šå¯è¡Œï¼Œä½†æ˜¯æŠ€æœ¯æ–¹æ¡ˆè¯„å®¡è¿™æ ·è®²å¯ä¸è¡Œï¼</p>
<p>è¿™ä¼šå¯¼è‡´å¬ä¼—åœ¨è¿˜æ²¡å¬åˆ°é‡ç‚¹å‰å°±è€—å°½äº†æ³¨æ„åŠ›ã€‚</p>
<p>å¦‚æœæ²¡æœ‰ç‰¹æ®Šæƒ…å†µçš„è¯ï¼Œè¯·éµå¾ªé‡‘å­—å¡”åŸåˆ™ï¼Œåœ¨ä¼šè®®ä¸Šå¼€é—¨è§å±±ï¼šâ€œä»Šå¤©æˆ‘è¦åˆ†äº«çš„æ–¹æ¡ˆï¼Œæ ¸å¿ƒåªåšä¸€ä»¶äº‹ï¼šxxxxxxx â€
å¬ä¼—çš„å¤§è„‘é‡Œç«‹åˆ»å»ºç«‹äº†ä¸€ä¸ªç›¸å…³çŸ¥è¯†çš„æ ¸å¿ƒç´¢å¼•ã€‚</p>
<p>åŸå› å¦‚ä¸‹</p>
<p><strong>1. åŒäº‹éƒ½å¾ˆå¿™</strong></p>
<p>åŒäº‹ä»¬åœ¨å¼€åœºçš„ä¸‰åˆ†é’Ÿå†…ä¼šåˆ¤æ–­è¿™ä»¶äº‹æ˜¯å¦é‡è¦ã€‚å¦‚æœå‰ä¸‰åˆ†é’Ÿæ²¡å¬åˆ°é‡ç‚¹ï¼Œä»–ä»¬å°±ä¼šå¤±å»è€å¿ƒï¼Œç„¶åå»å¹²è‡ªå·±çš„äº‹æƒ…ã€‚</p>
<p><strong>2. åŒäº‹äº†è§£åŸºç¡€èƒŒæ™¯</strong></p>
<p>ä¸€ä¸ªç§‘æŠ€å…¬å¸çš„å¼€å‘æˆ–è€…äº§å“å¤§éƒ¨åˆ†éƒ½æ‡‚ç‚¹<strong>æŠ€æœ¯+ä¸šåŠ¡</strong>ï¼Œä¸ç”¨å¤ªå¤šè®²èƒŒæ™¯çŸ¥è¯†ã€‚å¤§éƒ¨åˆ†æ—¶å€™å¯ä»¥å½“å¯¹æ–¹å·²ç»äº†è§£èƒŒæ™¯ï¼Œä¸éœ€è¦ä½ åšç§‘æ™®ï¼Œåªéœ€è¦çŸ¥é“ç»“æœã€‚</p>
<p><strong>èŒåœºé»˜è®¤è®¾ç½®ï¼š</strong> é™¤éæœ‰ç‰¹æ®Šç†ç”±ï¼Œå¦åˆ™é»˜è®¤<strong>ç»“è®ºå…ˆè¡Œ</strong>ã€‚</p>
<p>ä½†æ˜¯ä¸€æ—¦å‘ç°å¯¹æ–¹ä¸€è„¸èŒ«ç„¶å¬ä¸æ‡‚ï¼ˆè®¤çŸ¥æ²¡å¯¹é½ï¼‰ï¼Œç«‹åˆ»åˆ‡æ¢ä¸º<strong>èƒŒæ™¯å…ˆè¡Œ</strong>ã€‚</p>
<h3 data-id="heading-23">3.2 è®¾ç½®â€œè·¯æ ‡â€</h3>
<p>è¯„å®¡ä¼šä¸­ï¼Œå¬ä¼—æœ€å®¹æ˜“äº§ç”Ÿçš„å¿µå¤´æ˜¯ï¼šâ€œä»–ç°åœ¨è®²åˆ°å“ªå„¿äº†ï¼Ÿâ€</p>
<ul>
<li>
<p><strong>æŠ€å·§ï¼š</strong> æ¯ä¸€æ®µè®²å®Œï¼Œéƒ½è¦æœ‰ä¸€ä¸ªæ˜æ˜¾çš„â€œåˆ‡æ¢åŠ¨ä½œâ€ã€‚</p>
</li>
<li>
<p><strong>è¯æœ¯ï¼š</strong> â€œå…³äºä¸šåŠ¡èƒŒæ™¯æˆ‘ä»¬å°±è¯´åˆ°è¿™é‡Œï¼ˆ<strong>è·¯æ ‡å…³é—­</strong>ï¼‰ã€‚æ¥ä¸‹æ¥ï¼Œè¯·å¤§å®¶æŠŠæ³¨æ„åŠ›é›†ä¸­åœ¨å±å¹•ä¸­å¿ƒè¿™å¼ æ¶æ„å›¾ä¸Šï¼Œè¿™æ˜¯æˆ‘ä»¬ä»Šå¤©çš„æ ¸å¿ƒè®¾è®¡ï¼ˆ<strong>æ–°è·¯æ ‡å¼€å¯</strong>ï¼‰ã€‚â€</p>
<ul>
<li/>
</ul>
</li>
</ul>
<h3 data-id="heading-24">3.3 æ•¢äºè·³è¯»</h3>
<p>ä¹‹æ‰€ä»¥ä¼šâ€œå¿µæ–‡æ¡£â€ï¼Œæ˜¯å› ä¸ºä½ æ½œæ„è¯†é‡Œè§‰å¾—æ–‡æ¡£é‡Œçš„æ¯ä¸ªå­—éƒ½å¾ˆé‡è¦ã€‚<strong>äº‹å®ä¸Šï¼Œè¯„å®¡ç°åœº 80% çš„ä»·å€¼äº§ç”Ÿäº 20% çš„å†³ç­–ç‚¹ä¸Šã€‚</strong></p>
<ul>
<li>
<p><strong>ç•¥è¿‡ï¼š</strong> å¸¸è§„çš„ CRUD é€»è¾‘ã€ç¬¦åˆå›¢é˜Ÿè§„èŒƒçš„é”™è¯¯å¤„ç†ã€æ ‡å‡† API å°è£…ã€‚</p>
</li>
<li>
<p><strong>èšç„¦ï¼š</strong> å¤æ‚çš„ç®—æ³•æ¨æ¼”ã€ä¸åŒæ¨¡å—é—´çš„è€¦åˆç‚¹ã€æœ‰äº‰è®®çš„æŠ€æœ¯é€‰å‹ã€‚</p>
</li>
<li>
<p><strong>è¯æœ¯ï¼š</strong> â€œè¿™ä¸€é¡µçš„ä»£ç å®ç°æ¯”è¾ƒç»†ï¼Œå¦‚æœä¸æ¸…æ¥šçš„åŒå­¦å¯ä»¥çœ‹æ–‡æ¡£ç¬¬ 12 é¡µã€‚å¦‚æœæ²¡æœ‰å¤§é—®é¢˜ï¼Œæˆ‘å°†<strong>è·³è¿‡</strong>è¿™ä¸€æ®µï¼Œç›´æ¥è¿›å…¥å¤§å®¶æœ€å…³å¿ƒçš„â€˜ç°åº¦å‘å¸ƒç­–ç•¥â€™ã€‚â€</p>
</li>
</ul>
<h3 data-id="heading-25">3.4 ä¸»åŠ¨å¼•å¯¼è®¨è®º</h3>
<p>åˆ«ç­‰åˆ°æœ€åæ‰é—®â€œå¤§å®¶æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿâ€ã€‚é‚£æ ·å¾€å¾€ä¼šæ¢æ¥ä¸€ç‰‡æ­»å¯‚ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªè®©ä½ æªæ‰‹ä¸åŠçš„å†·é—¨é—®é¢˜ã€‚</p>
<ul>
<li><strong>æŠ€å·§ï¼š</strong> åœ¨ä½ æ„Ÿåˆ°ä¸ç¡®å®šæˆ–éœ€è¦æ”¯æŒçš„åœ°æ–¹ï¼Œä¸»åŠ¨æŠ›å‡ºé—®é¢˜ã€‚</li>
<li><strong>è¯æœ¯ï¼š</strong> â€œåœ¨è¿™ä¸ªèŠ‚ç‚¹ä¸Šï¼Œæˆ‘ç›®å‰è®¾è®¡çš„æ˜¯ A æ–¹æ¡ˆï¼Œä½†æˆ‘æ‹…å¿ƒ xxxxxã€‚è€ç‹ï¼ˆæ¶æ„å¸ˆï¼‰ï¼Œä»¥ä½ çš„ç»éªŒï¼Œè¿™é‡Œç”¨ B æ–¹æ¡ˆä¼šä¸ä¼šæ›´ç¨³å¦¥ï¼Ÿâ€</li>
<li><strong>æ•ˆæœï¼š</strong> è¿™ä¸ä»…å±•ç¤ºäº†ä½ çš„è°¦é€Šï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œä½ <strong>æŠŠæ§äº†æé—®çš„æ–¹å‘</strong>ï¼Œé¿å…äº†ä¼šè®®è¢«æ— å…³ç—›ç—’çš„ç»†èŠ‚å¸¦åã€‚</li>
</ul>
<h3 data-id="heading-26">3.5 çœ‹äººä¸‹èœ</h3>
<p>é˜è¿°æ–¹æ¡ˆçš„æ ¸å¿ƒä¸åœ¨äºâ€œç½—åˆ—æŠ€æœ¯çš„å¤æ‚æ€§â€ï¼Œè€Œåœ¨äºâ€œç®¡ç†å¬ä¼—çš„è®¤çŸ¥è´Ÿè·â€ã€‚ä¸ºäº†è®©éæŠ€æœ¯äººå‘˜ï¼ˆäº§å“ã€è€æ¿ï¼‰å¬æ‡‚ï¼Œå¿…é¡»å‡†å¤‡ä¸€äº›ç²¾å‡†çš„æ¯”å–»ã€‚å“ªæ€•å¬ä¼—å¿˜äº†ä½ çš„æŠ€æœ¯ç»†èŠ‚ï¼Œä»–ä¹Ÿä¼šè®°å¾—é‚£ä¸ªæ¯”å–»ï¼Œä»è€Œè®°ä½ä½ çš„æ–¹æ¡ˆé€»è¾‘ã€‚</p>
<ul>
<li><strong>å¯¹å†…ï¼ˆå¼€å‘å›¢é˜Ÿï¼‰ï¼š</strong> å¤šè®² <strong>é“¾è·¯</strong>ã€<strong>æ¶æ„</strong> å’Œ <strong>çº¦æŸ/è¾¹ç•Œ</strong> ã€‚</li>
<li><strong>å¯¹å¤–ï¼ˆè€æ¿/å®¢æˆ·ï¼‰ï¼š</strong> å¤šè®² <strong>ç—›ç‚¹</strong>ã€<strong>æ¯”å–»</strong> å’Œ <strong>ä»·å€¼</strong> ã€‚</li>
</ul>
<h3 data-id="heading-27">3.6 æ‹¥æŠ±æŒ‘æˆ˜å’Œè´¨ç–‘</h3>
<p>å¾ˆå¤šå·¥ç¨‹å¸ˆåœ¨è¯„å®¡ä¼šå†’æ±—ï¼Œæ˜¯å› ä¸ºæŠŠæŠ€æœ¯æŒ‘æˆ˜çœ‹ä½œäº†äººèº«æ”»å‡»ã€‚è¯·è®°ä½ï¼š<strong>æŒ‘æˆ˜è¶Šå¤šï¼Œæ–¹æ¡ˆè¶Šå®Œå–„ã€‚è¢«è´¨ç–‘æ€»æ¯”äº¤ä»˜å»¶æœŸæˆ–è€…<code>Hotfix</code>å¼º</strong></p>
<ul>
<li>
<p><strong>è®°å½•è€Œéäº‰è®ºï¼š</strong> é‡åˆ°å‘æ•£æ€§æˆ–è¿‡äºç»†èŠ‚çš„äº‰è®ºï¼Œå‘ŠçŸ¥ä¼šåˆ—åˆ°ä¼šè®®çºªè¦å’Œä¼šè®®å¾…åŠé‡Œé¢ï¼Œå¦‚æœè®¨è®ºç¦»æ ¸å¿ƒè®ºç‚¹å¤ªè¿œäº†æˆ–è€…æŸäº›â€œæ ç²¾â€å¼€å§‹è¡¨æ¼”äº†ï¼Œéœ€è¦åŠæ—¶å«åœå‘æ•£è®¨è®ºã€‚</p>
</li>
<li>
<p><strong>æ‰¿è®¤ä¸è¶³ï¼š</strong> é‡åˆ°çœŸæ²¡æƒ³åˆ°çš„æ¼æ´ï¼Œå¤§æ–¹æ‰¿è®¤ï¼š â€œè¿™ä¸ªè¾¹ç•Œæƒ…å†µæˆ‘ç¡®å®æ¼æ‰äº†ï¼Œéå¸¸æ„Ÿè°¢æé†’ã€‚æˆ‘ä¼šåè°ƒç ”ä¸€ä¸‹æ–¹æ¡ˆï¼Œæ˜æ—©æŠŠè¡¥å……è®¾è®¡å‘åˆ°ç¾¤é‡Œã€‚â€</p>
</li>
<li>
<p><strong>ä¿æŒæƒ…ç»ªç¨³å®šï¼š</strong> ä½ çš„ä¸“ä¸šåº¦ä¸ä»…ä½“ç°åœ¨ä»£ç é‡Œï¼Œæ›´ä½“ç°åœ¨ä½ é¢å¯¹å‹åŠ›æ—¶çš„ä¼˜é›…ã€‚</p>
</li>
</ul>
<h3 data-id="heading-28">3.7 å¤šç»ƒä¹ ï¼Œå¤šæ’ç»ƒï¼</h3>
<p>çœ‹è¿‡ã€Šä¹”å¸ƒæ–¯ä¼ ã€‹çš„åŒå­¦åº”è¯¥çŸ¥é“ï¼šä¹”å¸ƒæ–¯çœ‹ä¼¼éšæ„çš„æ¼”è®²ï¼ŒèƒŒåæ˜¯é•¿è¾¾æ•°å‘¨ã€ç²¾ç¡®åˆ°ç§’çš„é—­é—¨æ’ç»ƒã€‚</p>
<p>å»ºè®®åœ¨è¯„å®¡ä¼šå‰ 10 åˆ†é’Ÿï¼Œå…³ä¸Šç”µè„‘ï¼Œå¯¹ç€å¢™å£å¿«é€Ÿè®²ä¸€éä½ çš„æ ¸å¿ƒé€»è¾‘ã€‚å¦‚æœä½ å‘ç°è‡ªå·±å¡å£³äº†ï¼Œé‚£è¯´æ˜ä½ çš„é€»è¾‘è¿˜æ²¡ç†é¡ºï¼Œè€Œä¸æ˜¯æ–‡æ¡£æ²¡å†™å¥½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»ä»£ç åˆ°åƒç´ ï¼šæµè§ˆå™¨æ¸²æŸ“åŸç†ä¸ React Fiber æ¶æ„çš„æ·±åº¦åä½œ]]></title>    <link>https://juejin.cn/post/7591515844867571746</link>    <guid>https://juejin.cn/post/7591515844867571746</guid>    <pubDate>2026-01-05T14:38:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591515844867571746" data-draft-id="7576105458807783424" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»ä»£ç åˆ°åƒç´ ï¼šæµè§ˆå™¨æ¸²æŸ“åŸç†ä¸ React Fiber æ¶æ„çš„æ·±åº¦åä½œ"/> <meta itemprop="keywords" content="å‰ç«¯,React.js,æµè§ˆå™¨"/> <meta itemprop="datePublished" content="2026-01-05T14:38:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜è¿œæ¹–ä¹‹é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2370998127573751"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»ä»£ç åˆ°åƒç´ ï¼šæµè§ˆå™¨æ¸²æŸ“åŸç†ä¸ React Fiber æ¶æ„çš„æ·±åº¦åä½œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2370998127573751/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜è¿œæ¹–ä¹‹é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T14:38:43.000Z" title="Mon Jan 05 2026 14:38:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">1ã€æµè§ˆå™¨æ¸²æŸ“åŸç†</h2>
<h3 data-id="heading-1">1.1 æµè§ˆå™¨çš„è¿›ç¨‹æ¨¡å‹</h3>
<h4 data-id="heading-2">1.1.1 è¿›ç¨‹å’Œçº¿ç¨‹çš„æ¦‚å¿µ</h4>
<p><strong>è¿›ç¨‹ï¼š</strong></p>
<p>ç¨‹åºè¿è¡Œéœ€è¦æœ‰å®ƒè‡ªå·±ä¸“å±çš„å†…å­˜ç©ºé—´ï¼Œå¯ä»¥æŠŠè¿™å—å†…å­˜ç©ºé—´ç®€å•åœ°ç†è§£ä¸ºè¿›ç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b51f647a6f0743c8bd7f61ed9cadcd7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piO6L-c5rmW5LmL6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768228723&amp;x-signature=ZcnLUojRzrjbQK%2B4dhGLYZ%2FEMuk%3D" alt="image.png" loading="lazy"/></p>
<p>æ¯ä¸ªåº”ç”¨è‡³å°‘æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œè¿›ç¨‹ä¹‹é—´ç›¸äº’ç‹¬ç«‹ï¼Œå³ä½¿è¦é€šä¿¡ï¼Œä¹Ÿéœ€è¦åŒæ–¹åŒæ„ã€‚</p>
<hr/>
<p><strong>çº¿ç¨‹ï¼š</strong></p>
<p>æœ‰äº†è¿›ç¨‹åï¼Œå°±å¯ä»¥è¿è¡Œç¨‹åºçš„ä»£ç äº†ï¼Œå¯ä»¥ç®€å•åœ°ç†è§£è¿è¡Œä»£ç çš„ã€äººã€‘ç§°ä¹‹ä¸ºã€çº¿ç¨‹ã€‘ã€‚</p>
<p>ä¸€ä¸ªè¿›ç¨‹è‡³å°‘æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œæ‰€ä»¥åœ¨è¿›ç¨‹å¼€å¯åä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ¥è¿è¡Œä»£ç ï¼Œè¯¥çº¿ç¨‹ç§°ä¹‹ä¸ºä¸»çº¿ç¨‹ã€‚</p>
<p>å¦‚æœç¨‹åºéœ€è¦åŒæ—¶æ‰§è¡Œå¤šå—ä»£ç ï¼Œä¸»çº¿ç¨‹å°±ä¼šå¯åŠ¨æ›´å¤šçš„çº¿ç¨‹æ¥æ‰§è¡Œä»£ç ï¼Œæ‰€ä»¥ä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ece1f23dab1f4a4f8e19d7e0d895a9e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piO6L-c5rmW5LmL6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768228723&amp;x-signature=7puG0Q4isUEEPMO7qfbSapHbpiU%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-3">1.1.2 æµè§ˆå™¨æœ‰å“ªäº›è¿›ç¨‹å’Œçº¿ç¨‹ï¼Ÿ</h4>
<p>æµè§ˆå™¨æ˜¯ä¸€ä¸ªå¤šè¿›ç¨‹å¤šçº¿ç¨‹çš„åº”ç”¨ç¨‹åºã€‚</p>
<p>æµè§ˆå™¨å†…éƒ¨å·¥ä½œæå…¶å¤æ‚ï¼Œä¸ºäº†é¿å…ç›¸äº’å½±å“å¯¼è‡´è¿ç¯å´©æºƒçš„å‡ ç‡ï¼Œå½“å¯åŠ¨æµè§ˆå™¨åï¼Œå®ƒä¼šè‡ªåŠ¨å¯åŠ¨å¤šä¸ªè¿›ç¨‹ã€‚</p>
<p>å¯ä»¥åœ¨æµè§ˆå™¨å³ä¸Šè§’è®¾ç½®åŠå…¶ä»–ï¼ˆAlt+Fï¼‰-æ›´å¤šå·¥å…·-æµè§ˆå™¨ä»»åŠ¡ç®¡ç†å™¨æŸ¥çœ‹å½“å‰æµè§ˆå™¨çš„è¿›ç¨‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdb643b4ee024ebcb21693c624194492~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piO6L-c5rmW5LmL6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768228723&amp;x-signature=xa97jz6iiRXQI6n2AuTac1kOFYA%3D" alt="" loading="lazy"/></p>
<p>å…¶ä¸­ï¼Œæœ€ä¸»è¦çš„è¿›ç¨‹æœ‰:</p>
<ol>
<li>æµè§ˆå™¨è¿›ç¨‹ï¼šä¸»è¦è´Ÿè´£ç•Œé¢æ˜¾ç¤ºï¼ˆä¸Šé¢æ ‡ç­¾é¡µçš„å±•ç¤ºï¼Œå¦‚å‰è¿›åé€€æŒ‰é’®ã€åœ°å€æ ã€ä¹¦ç­¾æ”¶è—ç­‰ï¼‰ã€ç”¨æˆ·äº¤äº’ã€å­è¿›ç¨‹ç®¡ç†ï¼ˆå…¶å®ƒçš„è¿›ç¨‹å¦‚ç½‘ç»œè¿›ç¨‹æ¸²æŸ“è¿›ç¨‹æ˜¯ç”±æµè§ˆå™¨è¿›ç¨‹äº§ç”Ÿçš„ï¼‰ç­‰ã€‚æµè§ˆå™¨è¿›ç¨‹å†…éƒ¨ä¼šå¯åŠ¨å¤šä¸ªçº¿ç¨‹å¤„ç†ä¸åŒçš„ä»»åŠ¡ã€‚</li>
<li>ç½‘ç»œè¿›ç¨‹ï¼šè´Ÿè´£åŠ è½½ç½‘ç»œèµ„æºã€‚ç½‘ç»œè¿›ç¨‹å†…éƒ¨ä¼šå¯åŠ¨å¤šä¸ªçº¿ç¨‹æ¥å¤„ç†ä¸åŒçš„ç½‘ç»œä»»åŠ¡ã€‚</li>
<li>æ¸²æŸ“è¿›ç¨‹(æœ¬èŠ‚è¯¾é‡ç‚¹è®²è§£çš„è¿›ç¨‹)ï¼šæ¸²æŸ“è¿›ç¨‹å¯åŠ¨åï¼Œä¼šå¼€å¯ä¸€ä¸ªæ¸²æŸ“ä¸»çº¿ç¨‹ï¼Œä¸»çº¿ç¨‹è´Ÿè´£æ‰§è¡ŒHTMLã€CSSã€JS ä»£ç ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæµè§ˆå™¨ä¼šä¸ºæ¯ä¸ªæ ‡ç­¾é¡µå¼€å¯ä¸€ä¸ªæ–°çš„æ¸²æŸ“è¿›ç¨‹ï¼Œä»¥ä¿è¯ä¸åŒçš„æ ‡ç­¾é¡µä¹‹é—´ä¸ç›¸äº’å½±å“ã€‚</li>
</ol>
<h3 data-id="heading-4">1.2 æ¸²æŸ“ä¸»çº¿ç¨‹æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h3>
<p>æ¸²æŸ“ä¸»çº¿ç¨‹æ˜¯æµè§ˆå™¨ä¸­æœ€ç¹å¿™çš„çº¿ç¨‹ï¼Œéœ€è¦å®ƒå¤„ç†çš„ä»»åŠ¡åŒ…æ‹¬ä½†ä¸é™äº:
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2b045d57bb840ff94a05adf6f6a1962~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piO6L-c5rmW5LmL6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768228723&amp;x-signature=C5sZUu5ZJ8KCegSukzZmMKOaRzE%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>æ€è€ƒé¢˜ï¼šä¸ºä»€ä¹ˆæ¸²æŸ“è¿›ç¨‹ä¸ä½¿ç”¨å¤šä¸ªçº¿ç¨‹æ¥å¤„ç†è¿™äº›äº‹æƒ…ï¼Ÿ</p>
<p>1ã€DOM æ“ä½œçš„ç«æ€æ¡ä»¶é—®é¢˜</p>
<p>2ã€æ¸²æŸ“æµç¨‹çš„ä¾èµ–å…³ç³»ï¼šHTMLè§£æ â†’ CSSè§£æ â†’ æ ·å¼è®¡ç®— â†’ å¸ƒå±€ â†’ ç»˜åˆ¶ï¼Œåé¢çš„æ­¥éª¤ä¾èµ–å‰é¢æ­¥éª¤çš„ç»“æœï¼Œæ— æ³•çœŸæ­£å¹¶è¡Œã€‚</p>
<p>3ã€åŒæ­¥æˆæœ¬å¯èƒ½æ›´é«˜ï¼šéœ€è¦å¤§é‡çš„é”æœºåˆ¶+çº¿ç¨‹é—´é€šä¿¡å¼€é”€+å¯èƒ½æ¯”å•çº¿ç¨‹æ›´æ…¢</p>
<p><strong>æµè§ˆå™¨å®é™…ä¸Šé‡‡ç”¨äº†å…¶ä»–ç­–ç•¥ï¼š
1ã€å¼‚æ­¥å¤„ç†ï¼šé€šè¿‡äº‹ä»¶å¾ªç¯å’Œä»»åŠ¡é˜Ÿåˆ—ï¼›
2ã€Web Workersï¼›
3ã€GPU åŠ é€Ÿï¼›
4ã€å…¶ä»–è¾…åŠ©çº¿ç¨‹ï¼šç½‘ç»œè¯·æ±‚ã€æ–‡ä»¶è¯»å†™ç­‰åœ¨å…¶ä»–çº¿ç¨‹å¤„ç†ã€‚</strong></p>
</blockquote>
<p>è¦å¤„ç†è¿™ä¹ˆå¤šçš„ä»»åŠ¡ï¼Œä¸»çº¿ç¨‹é‡åˆ°äº†ä¸€ä¸ªå‰æ‰€æœªæœ‰çš„éš¾é¢˜ï¼šå¦‚ä½•è°ƒåº¦ä»»åŠ¡ï¼Ÿ</p>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li>æˆ‘æ­£åœ¨æ‰§è¡Œä¸€ä¸ªJS å‡½æ•°ï¼Œæ‰§è¡Œåˆ°ä¸€åŠçš„æ—¶å€™ç”¨æˆ·ç‚¹å‡»äº†æŒ‰é’®ï¼Œæˆ‘è¯¥ç«‹å³å»æ‰§è¡Œç‚¹å‡»äº‹ä»¶çš„å¤„ç†å‡½æ•°å—?</li>
<li>æˆ‘æ­£åœ¨æ‰§è¡Œä¸€ä¸ªJS å‡½æ•°ï¼Œæ‰§è¡Œåˆ°ä¸€åŠçš„æ—¶å€™æŸä¸ªè®¡æ—¶å™¨åˆ°è¾¾äº†æ—¶é—´ï¼Œæˆ‘è¯¥ç«‹å³å»æ‰§è¡Œå®ƒçš„å›è°ƒå—?</li>
<li>æµè§ˆå™¨è¿›ç¨‹é€šçŸ¥æˆ‘â€œç”¨æˆ·ç‚¹å‡»äº†æŒ‰é’®â€ï¼Œä¸æ­¤åŒæ—¶ï¼ŒæŸä¸ªè®¡æ—¶å™¨ä¹Ÿåˆ°è¾¾äº†æ—¶é—´ï¼Œæˆ‘åº”è¯¥å¤„ç†å“ªä¸€ä¸ªå‘¢?</li>
<li>......</li>
</ul>
<p>æ¸²æŸ“ä¸»çº¿ç¨‹æƒ³å‡ºäº†ä¸€ä¸ªç»æ²™çš„ä¸»æ„æ¥å¤„ç†è¿™ä¸ªé—®é¢˜â€”â€”æ’é˜Ÿï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d25e30f7fa914abcb3475d88f773ddd6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piO6L-c5rmW5LmL6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768228723&amp;x-signature=vtBJAhkoHnJJcFowR%2FB%2BkTMdH6I%3D" alt="image.png" loading="lazy"/></p>
<p>JSäº‹ä»¶å¾ªç¯åˆå«åšæ¶ˆæ¯å¾ªç¯ï¼Œæ˜¯æµè§ˆå™¨æ¸²æŸ“ä¸»çº¿ç¨‹çš„å·¥ä½œæ–¹å¼ï¼Œæ˜¯ä¸€ç§è®©JavaScriptæ—¢æ˜¯å•çº¿ç¨‹ï¼Œåˆä¸ä¼šé˜»å¡çš„æœºåˆ¶ã€‚å®ƒè´Ÿè´£æ‰§è¡Œä»£ç ã€æ”¶é›†å’Œå¤„ç†äº‹ä»¶ã€æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„å­ä»»åŠ¡ã€‚äº‹ä»¶é˜Ÿåˆ—æ˜¯ä¸€ä¸ªå­˜æ”¾å¾…æ‰§è¡Œçš„ä»»åŠ¡çš„åˆ—è¡¨ï¼Œæœ‰å®ä»»åŠ¡é˜Ÿåˆ—å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¹‹åˆ†ã€‚</p>
<p>åˆ†ç±»ä»»åŠ¡å¯ä»¥å¸®åŠ©JavaScriptå¼•æ“åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¿›è¡Œä»»åŠ¡çš„ä¼˜åŒ–å’Œè°ƒåº¦ã€‚é€šè¿‡å°†ä»»åŠ¡åˆ†ä¸ºå¾®ä»»åŠ¡å’Œå®ä»»åŠ¡ï¼ŒJavaScriptå¼•æ“å¯ä»¥æ ¹æ®æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸åŒç‰¹ç‚¹å’Œä¼˜å…ˆçº§æ¥åˆç†åœ°å®‰æ’ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºã€‚</p>
<blockquote>
<p>å¾®ä»»åŠ¡æ˜¯æŒ‡åœ¨å½“å‰ä»»åŠ¡æ‰§è¡Œç»“æŸåç«‹å³æ‰§è¡Œçš„ä»»åŠ¡ï¼Œå®ƒå¯ä»¥çœ‹ä½œæ˜¯åœ¨å½“å‰ä»»åŠ¡çš„â€œå°¾å·´â€æ·»åŠ çš„ä»»åŠ¡ã€‚å¸¸è§çš„å¾®ä»»åŠ¡åŒ…æ‹¬Â Promise.thenÂ å›è°ƒï¼ˆæ³¨æ„ï¼šnewÂ Promiseåœ¨å®ä¾‹åŒ–çš„è¿‡ç¨‹ä¸­æ‰€æ‰§è¡Œçš„ä»£ç éƒ½æ˜¯åŒæ­¥è¿›è¡Œçš„ï¼‰å’ŒÂ MutationObserverå›è°ƒã€nextTickç­‰ã€‚Â </p>
<p>å®ä»»åŠ¡æ˜¯æŒ‡éœ€è¦æ’é˜Ÿç­‰å¾…Â JavaScriptÂ å¼•æ“ç©ºé—²æ—¶æ‰èƒ½æ‰§è¡Œçš„ä»»åŠ¡ã€‚å¸¸è§çš„å®ä»»åŠ¡åŒ…æ‹¬Â setTimeoutã€setIntervalã€I/OÂ æ“ä½œã€DOMÂ äº‹ä»¶ç­‰ã€‚</p>
</blockquote>
<p>é€šä¿—åœ°è®²ï¼Œå¯ä»¥å°†jsä»£ç æ‰§è¡Œéœ€è¦å€ŸåŠ©ä¸‰ä¸ªé€šé“ï¼šä¸»çº¿ç¨‹ï¼Œå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå®ä»»åŠ¡é˜Ÿåˆ—ã€‚å¯¹äºä¸€æ®µéœ€è¦æ‰§è¡Œçš„jsä»£ç ï¼Œä»ä¸Šå¾€ä¸‹éå†ï¼Œé‡åˆ°åŒæ­¥ä»£ç ä¾¿ç›´æ¥æ”¾å…¥ä¸»çº¿ç¨‹ä¸­ä¾æ¬¡æ‰§è¡Œï¼Œé‡åˆ°å¾®ä»»åŠ¡åˆ™æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œé‡åˆ°å®ä»»åŠ¡åˆ™æ”¾å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ­¤æ—¶ä»å¾®ä»»åŠ¡é˜Ÿåˆ—æ‹¿å‡ºä»»åŠ¡åˆ°ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½äº§ç”Ÿå¦å¤–çš„å¾®ä»»åŠ¡/å®ä»»åŠ¡ï¼ŒæŒ‰ä¾‹æ”¾å…¥ç›¸åº”çš„é˜Ÿåˆ—ä¸­ã€‚ç›´åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼Œå¼€å¯æ–°çš„ä¸€è½®äº‹ä»¶å¾ªç¯ï¼Œå†å»ä»å®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ‹¿å‡ºä¸€ä¸ªä»»åŠ¡åˆ°ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œå¦‚æœäº§ç”Ÿäº†æ–°çš„å¾®ä»»åŠ¡ï¼Œåˆ™åœæ­¢å®ä»»åŠ¡çš„ä¸‹ä¸€ä¸ªå®ä»»åŠ¡çš„æ‰§è¡Œï¼Œå…ˆå»æ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚</p>
<p>åŒæ­¥ä»»åŠ¡ã€å¾®ä»»åŠ¡ã€å®ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºæ˜¯ï¼šå…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œç„¶åæ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå†æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œç„¶åé‡å¤è¿™ä¸ªè¿‡ç¨‹ã€‚è¿™é‡Œå®¹æ˜“äº§ç”Ÿä¸€ä¸ªé”™è¯¯çš„è®¤è¯†ï¼šå°±æ˜¯å¾®ä»»åŠ¡å…ˆäºå®ä»»åŠ¡æ‰§è¡Œã€‚å®é™…ä¸Šæ˜¯å…ˆæ‰§è¡ŒåŒæ­¥ä»»åŠ¡ç„¶ååœ¨æ‰§è¡Œå¼‚æ­¥ä»»åŠ¡ï¼Œå¼‚æ­¥ä»»åŠ¡æ˜¯åˆ†å®ä»»åŠ¡å’Œå¾®ä»»åŠ¡ä¸¤ç§çš„ã€‚</p>
<blockquote>
<p>å¦‚ä½•ç†è§£JSçš„å¼‚æ­¥?</p>
<p>å‚è€ƒç­”æ¡ˆï¼š</p>
<p>JSæ˜¯ä¸€é—¨å•çº¿ç¨‹çš„è¯­è¨€ï¼Œè¿™æ˜¯å› ä¸ºå®ƒè¿è¡Œåœ¨æµè§ˆå™¨çš„æ¸²æŸ“ä¸»çº¿ç¨‹ä¸­ï¼Œè€Œæ¸²æŸ“ä¸»çº¿ç¨‹åªæœ‰ä¸€ä¸ªã€‚è€Œæ¸²æŸ“ä¸»çº¿ç¨‹æ‰¿æ‹…ç€è¯¸å¤šçš„å·¥ä½œï¼Œå¦‚æ¸²æŸ“é¡µé¢ã€æ‰§è¡ŒJS éƒ½åœ¨å…¶ä¸­è¿è¡Œã€‚</p>
<p>å¦‚æœä½¿ç”¨åŒæ­¥çš„æ–¹å¼ï¼Œå°±ææœ‰å¯èƒ½å¯¼è‡´ä¸»çº¿ç¨‹äº§ç”Ÿé˜»å¡ï¼Œä»è€Œå¯¼è‡´æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„å¾ˆå¤šå…¶å®ƒä»»åŠ¡æ— æ³•å¾—åˆ°æ‰§è¡Œã€‚è¿™æ ·ä¸€æ¥ï¼Œä¸€æ–¹é¢ä¼šå¯¼è‡´ç¹å¿™çš„ä¸»çº¿ç¨‹ç™½ç™½çš„æ¶ˆè€—æ—¶é—´ï¼Œå¦ä¸€æ–¹é¢å¯¼è‡´é¡µé¢æ— æ³•åŠæ—¶æ›´æ–°ï¼ç»™ç”¨æˆ·é€ æˆå¡æ­»ç°è±¡ã€‚</p>
<p>æ‰€ä»¥æµè§ˆå™¨é‡‡ç”¨å¼‚æ­¥çš„æ–¹å¼æ¥é¿å…ã€‚å…·ä½“åšæ³•æ˜¯å½“æŸäº›ä»»åŠ¡å‘ç”Ÿæ—¶ï¼Œæ¯”å¦‚è®¡æ—¶å™¨ã€ç½‘ç»œã€äº‹ä»¶ç›‘å¬ï¼Œä¸»çº¿ç¨‹å°†ä»»åŠ¡äº¤ç»™å…¶ä»–çº¿ç¨‹å»å¤„ç†ï¼Œè‡ªèº«ç«‹å³ç»“æŸä»»åŠ¡çš„æ‰§è¡Œï¼Œè½¬è€Œæ‰§è¡Œåç»­ä»£ç ã€‚å½“å…¶ä»–çº¿ç¨‹å®Œæˆæ—¶ï¼Œå°†äº‹å…ˆä¼ é€’çš„å›è°ƒå‡½æ•°åŒ…è£…æˆä»»åŠ¡ï¼ŒåŠ å…¥åˆ°æ¶ˆæ¯é˜Ÿåˆ—çš„æœ«å°¾æ’é˜Ÿï¼Œç­‰å¾…ä¸»çº¿ç¨‹è°ƒåº¦æ‰§è¡Œã€‚</p>
<p>åœ¨è¿™ç§å¼‚æ­¥æ¨¡å¼ä¸‹ï¼Œæµè§ˆå™¨æ°¸ä¸é˜»å¡ï¼Œä»è€Œæœ€å¤§é™åº¦çš„ä¿è¯äº†å•çº¿ç¨‹çš„æµç•…è¿è¡Œã€‚</p>
</blockquote>
<h3 data-id="heading-5">1.3 æµè§ˆå™¨æ˜¯å¦‚ä½•æ¸²æŸ“é¡µé¢çš„ï¼Ÿ</h3>
<p>å½“æµè§ˆå™¨çš„ç½‘ç»œçº¿ç¨‹æ”¶åˆ°Â HTMLÂ æ–‡æ¡£åï¼Œä¼šäº§ç”Ÿä¸€ä¸ªæ¸²æŸ“ä»»åŠ¡ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™æ¸²æŸ“ä¸»çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚åœ¨äº‹ä»¶å¾ªç¯æœºåˆ¶çš„ä½œç”¨ä¸‹ï¼Œæ¸²æŸ“ä¸»çº¿ç¨‹å–å‡ºæ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ¸²æŸ“ä»»åŠ¡ï¼Œå¼€å¯æ¸²æŸ“æµç¨‹ã€‚</p>
<hr/>
<p>æ•´ä¸ªæ¸²æŸ“æµç¨‹åˆ†ä¸ºå¤šä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯ï¼šÂ HTMLÂ è§£æã€æ ·å¼è®¡ç®—ã€å¸ƒå±€ã€åˆ†å±‚ã€ç»˜åˆ¶ã€åˆ†å—ã€å…‰æ …åŒ–ã€ç”»ã€‚</p>
<p>æ¯ä¸ªé˜¶æ®µéƒ½æœ‰æ˜ç¡®çš„è¾“å…¥è¾“å‡ºï¼Œä¸Šä¸€ä¸ªé˜¶æ®µçš„è¾“å‡ºä¼šæˆä¸ºä¸‹ä¸€ä¸ªé˜¶æ®µçš„è¾“å…¥ã€‚</p>
<p>è¿™æ ·ï¼Œæ•´ä¸ªæ¸²æŸ“æµç¨‹å°±å½¢æˆäº†ä¸€å¥—ç»„ç»‡ä¸¥å¯†çš„ç”Ÿäº§æµæ°´çº¿ã€‚</p>
<hr/>
<p>å¯ä»¥ç€é‡è®²çš„æ˜¯æ¸²æŸ“çš„ç¬¬ä¸€æ­¥ï¼Œå³<strong>è§£æÂ HTML</strong>ã€‚</p>
<p>è§£æè¿‡ç¨‹ä¸­é‡åˆ°Â CSSÂ è§£æÂ CSSï¼Œé‡åˆ°Â JSÂ æ‰§è¡ŒÂ JSã€‚ä¸ºäº†æé«˜è§£ææ•ˆç‡ï¼Œæµè§ˆå™¨åœ¨å¼€å§‹è§£æå‰ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªé¢„è§£æçš„çº¿ç¨‹ï¼Œç‡å…ˆä¸‹è½½Â HTMLÂ ä¸­çš„å¤–éƒ¨Â CSSÂ æ–‡ä»¶å’ŒÂ å¤–éƒ¨çš„Â JSÂ æ–‡ä»¶ã€‚</p>
<p>å¦‚æœä¸»çº¿ç¨‹è§£æåˆ°linkä½ç½®ï¼Œæ­¤æ—¶å¤–éƒ¨çš„Â CSSÂ æ–‡ä»¶è¿˜æ²¡æœ‰ä¸‹è½½è§£æå¥½ï¼Œä¸»çº¿ç¨‹ä¸ä¼šç­‰å¾…ï¼Œç»§ç»­è§£æåç»­çš„Â HTMLã€‚è¿™æ˜¯å› ä¸ºä¸‹è½½å’Œè§£æÂ CSSÂ çš„å·¥ä½œæ˜¯åœ¨é¢„è§£æçº¿ç¨‹ä¸­è¿›è¡Œçš„ã€‚è¿™å°±æ˜¯Â CSSÂ ä¸ä¼šé˜»å¡Â HTMLÂ è§£æçš„æ ¹æœ¬åŸå› ã€‚</p>
<p>å¦‚æœä¸»çº¿ç¨‹è§£æåˆ°scriptä½ç½®ï¼Œä¼šåœæ­¢è§£æÂ HTMLï¼Œè½¬è€Œç­‰å¾…Â JSÂ æ–‡ä»¶ä¸‹è½½å¥½ï¼Œå¹¶å°†å…¨å±€ä»£ç è§£ææ‰§è¡Œå®Œæˆåï¼Œæ‰èƒ½ç»§ç»­è§£æÂ HTMLã€‚è¿™æ˜¯å› ä¸ºÂ JSÂ ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹å¯èƒ½ä¼šä¿®æ”¹å½“å‰çš„Â DOMÂ æ ‘ï¼Œæ‰€ä»¥Â DOMÂ æ ‘çš„ç”Ÿæˆå¿…é¡»æš‚åœã€‚è¿™å°±æ˜¯Â JSÂ ä¼šé˜»å¡Â HTMLÂ è§£æçš„æ ¹æœ¬åŸå› ã€‚</p>
<p>ç¬¬ä¸€æ­¥å®Œæˆåï¼Œä¼šå¾—åˆ°Â DOMÂ æ ‘å’ŒÂ CSSOMÂ æ ‘ï¼ˆCSSÂ ObjectÂ Modelï¼‰ï¼Œæµè§ˆå™¨çš„é»˜è®¤æ ·å¼ã€å†…éƒ¨æ ·å¼ã€å¤–éƒ¨æ ·å¼ã€è¡Œå†…æ ·å¼å‡ä¼šåŒ…å«åœ¨Â CSSOMÂ æ ‘ä¸­ã€‚</p>
<hr/>
<p>ç»è¿‡ä¸‹ä¸€æ­¥çš„æ ·å¼è®¡ç®—åï¼Œä¼šå¾—åˆ°ä¸€æ£µå¸¦æœ‰æ ·å¼çš„Â DOMÂ æ ‘ã€‚</p>
<hr/>
<p>ç´§æ¥ç€æ¸²æŸ“ä¸»çº¿ç¨‹é™†ç»­å®Œæˆå¸ƒå±€ã€åˆ†å±‚ã€ç»˜åˆ¶ç­‰å·¥ä½œã€‚</p>
<hr/>
<p>å®Œæˆç»˜åˆ¶åï¼Œä¸»çº¿ç¨‹å°†æ¯ä¸ªå›¾å±‚çš„ç»˜åˆ¶ä¿¡æ¯æäº¤ç»™åˆæˆçº¿ç¨‹ï¼Œå‰©ä½™å·¥ä½œå°†ç”±åˆæˆçº¿ç¨‹å®Œæˆï¼Œåˆæˆçº¿ç¨‹ä¼šä»çº¿ç¨‹æ± ä¸­æ‹¿å–å¤šä¸ªçº¿ç¨‹æ¥å®Œæˆåˆ†å—å·¥ä½œã€‚</p>
<hr/>
<p>æœ€åï¼Œåˆæˆçº¿ç¨‹ä¼šå°†å—ä¿¡æ¯äº¤ç»™Â GPUÂ è¿›ç¨‹ï¼Œä¼šå¼€å¯å¤šä¸ªçº¿ç¨‹æ¥å®Œæˆå…‰æ …åŒ–ä»¥æé«˜çš„é€Ÿåº¦å®Œæˆå…‰æ …åŒ–ã€‚</p>
<p>å…‰æ …åŒ–çš„ç»“æœï¼Œå°±æ˜¯ä¸€å—ä¸€å—çš„ä½å›¾ï¼Œæœ€åå‘ˆç°åœ¨å±å¹•ä¸Šã€‚</p>
<h2 data-id="heading-6">2ã€Reactæ‰§è¡ŒåŸç†</h2>
<h3 data-id="heading-7">2.1 Reactä»£ç æ˜¯æ€ä¹ˆè¿è¡Œåœ¨æµè§ˆå™¨ä¸­çš„ï¼Ÿ</h3>
<p>Reactä»£ç éœ€è¦ç»è¿‡ä¸€ç³»åˆ—è½¬æ¢æ‰èƒ½åœ¨æµè§ˆå™¨ä¸­è¿è¡Œï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªå…³é”®æ­¥éª¤ï¼š</p>
<p><strong>1ã€JSX è½¬åŒ–</strong></p>
<p>Reactä½¿ç”¨JSXè¯­æ³•ï¼Œä½†æµè§ˆå™¨æ— æ³•ç›´æ¥ç†è§£JSXã€‚éœ€è¦é€šè¿‡Babelç­‰è½¬è¯‘å™¨å°†JSXè½¬æ¢ä¸ºæ™®é€šçš„JavaScriptï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// åŸå§‹JSXä»£ç </span>
<span class="hljs-keyword">const</span> element = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, World!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>;

<span class="hljs-comment">// è½¬æ¢åçš„JavaScript</span>
<span class="hljs-keyword">const</span> element = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'h1'</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">'Hello, World!'</span>);
</code></pre>
<p><strong>2ã€æ¨¡å—æ‰“åŒ…</strong></p>
<p>ä½¿ç”¨Webpackã€Viteç­‰æ‰“åŒ…å·¥å…·å°†å¤šä¸ªæ¨¡å—æ–‡ä»¶æ‰“åŒ…æˆæµè§ˆå™¨å¯ä»¥åŠ è½½çš„bundleæ–‡ä»¶ï¼š</p>
<ul>
<li>è§£æimport/exportè¯­å¥</li>
<li>åˆå¹¶å¤šä¸ªæ–‡ä»¶</li>
<li>å¤„ç†ä¾èµ–å…³ç³»</li>
<li>ä»£ç åˆ†å‰²å’Œä¼˜åŒ–</li>
</ul>
<p><strong>3ã€è¿è¡Œæ—¶æ‰§è¡Œæµç¨‹</strong></p>
<p>åˆå§‹åŒ–é˜¶æ®µï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// 1. å¼•å…¥Reactåº“</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom/client'</span>;

<span class="hljs-comment">// 2. åˆ›å»ºæ ¹èŠ‚ç‚¹</span>
<span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>));

<span class="hljs-comment">// 3. æ¸²æŸ“ç»„ä»¶</span>
root.<span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>);
</code></pre>
<p>æ¸²æŸ“è¿‡ç¨‹ï¼š</p>
<ul>
<li>åˆ›å»ºè™šæ‹ŸDOMï¼šReactå°†JSXè½¬æ¢ä¸ºè™šæ‹ŸDOMå¯¹è±¡</li>
<li>Diffç®—æ³•ï¼šæ¯”è¾ƒæ–°æ—§è™šæ‹ŸDOMçš„å·®å¼‚</li>
<li>æ›´æ–°çœŸå®DOMï¼šå°†å˜åŒ–åº”ç”¨åˆ°æµè§ˆå™¨çš„çœŸå®DOMä¸Š</li>
</ul>
<hr/>
<p>åŸç†å›¾å¦‚ä¸‹ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d49c1c36db8c4d6a946f467007e4d2fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piO6L-c5rmW5LmL6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768228723&amp;x-signature=pmKliCZkPbVOAq4S4uyP6qSlKFM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">2.2 Fiberæ¶æ„</h3>
<h4 data-id="heading-9">2.2.1 ä»€ä¹ˆæ˜¯Fiberæ¶æ„ï¼Ÿ</h4>
<p>Fiberæ˜¯React 16å¼•å…¥çš„å…¨æ–°åè°ƒå¼•æ“ï¼ˆReconciliation Engineï¼‰ï¼Œæ˜¯Reactæ ¸å¿ƒç®—æ³•çš„å®Œå…¨é‡å†™ã€‚å®ƒè§£å†³äº†æ—§ç‰ˆæœ¬Reactåœ¨å¤„ç†å¤§å‹åº”ç”¨æ—¶çš„æ€§èƒ½ç“¶é¢ˆé—®é¢˜ã€‚</p>
<p>React Fiberçš„è§£å†³æ–¹æ¡ˆï¼š<strong>å¯ä¸­æ–­çš„å¼‚æ­¥æ¸²æŸ“ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šå°†ä¸å¯ä¸­æ–­çš„åŒæ­¥æ›´æ–°ï¼Œæ‹†è§£æˆå¯ä¸­æ–­çš„å¼‚æ­¥å·¥ä½œå•å…ƒï¼Œä¹Ÿå°±æ˜¯ä¸­æ–­å’Œé‡å¯ã€‚</strong></p>
<h4 data-id="heading-10">2.2.2 ä¸ºä»€ä¹ˆéœ€è¦Fiberæ¶æ„ï¼Ÿ</h4>
<p><strong>æ—§æ¶æ„çš„é—®é¢˜ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ—§ç‰ˆReactçš„é€’å½’æ›´æ–°è¿‡ç¨‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateComponent</span>(<span class="hljs-params">component</span>) {
  <span class="hljs-comment">// é€’å½’å¤„ç†å­ç»„ä»¶</span>
  component.<span class="hljs-property">children</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> {
    <span class="hljs-title function_">updateComponent</span>(child); <span class="hljs-comment">// æ— æ³•ä¸­æ–­</span>
  });
  <span class="hljs-comment">// æ›´æ–°DOM</span>
}

<span class="hljs-comment">// é—®é¢˜åœºæ™¯ï¼šå¤§é‡ç»„ä»¶æ›´æ–°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">heavyUpdate</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å‡è®¾è¿™ä¸ªæ›´æ–°éœ€è¦50ms</span>
  <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
    <span class="hljs-title function_">updateComponent</span>(components[i]); <span class="hljs-comment">// åŒæ­¥æ‰§è¡Œ</span>
  }
  <span class="hljs-comment">// 50ms &gt; 16.6msï¼Œä¼šå¯¼è‡´æ‰å¸§</span>
}
</code></pre>
<p><strong>ä¸»è¦ç—›ç‚¹ï¼š</strong></p>
<ul>
<li>æ›´æ–°è¿‡ç¨‹æ˜¯<strong>åŒæ­¥ä¸”é€’å½’</strong>çš„ï¼Œæ— æ³•ä¸­æ–­</li>
<li>å¤§å‹ç»„ä»¶æ ‘æ›´æ–°æ—¶ä¼šé•¿æ—¶é—´å ç”¨ä¸»çº¿ç¨‹</li>
<li>å¯¼è‡´é¡µé¢å¡é¡¿ã€åŠ¨ç”»æ‰å¸§ã€ç”¨æˆ·è¾“å…¥å»¶è¿Ÿ</li>
</ul>
<blockquote>
<p>ä¸ºä»€ä¹ˆæµè§ˆå™¨å¡é¡¿ï¼š</p>
<ul>
<li>æµè§ˆå™¨çš„æ¸²æŸ“å’Œjsçš„æ‰§è¡Œæ˜¯äº’æ–¥çš„ï¼šjså¯ä»¥æ“ä½œdomï¼Œå¦‚æœåœ¨æ¸²æŸ“çš„æ—¶å€™æ“ä½œäº†domï¼Œä¸çŸ¥é“ä»¥å“ªä¸ªä¸ºå‡†ã€‚</li>
<li>ä¸€èˆ¬æµè§ˆå™¨çš„åˆ·æ–°ç‡ä¸º60hzï¼Œå³1ç§’é’Ÿåˆ·æ–°60æ¬¡ã€‚1000ms / 60hz = 16.6ms ï¼Œå¤§æ¦‚æ¯è¿‡16.6msæµè§ˆå™¨ä¼šæ¸²æŸ“ä¸€å¸§ç”»é¢ï¼Œä¹Ÿå°±æ˜¯ä¸€æ¬¡eventLoopéœ€è¦ä¿è¯åœ¨16.6mså†…å®Œæˆã€‚</li>
<li>åœ¨éœ€è¦è¿ç»­æ¸²æŸ“çš„æ—¶å€™ï¼Œå¦‚æœjsçš„æ‰§è¡Œè¶…è¿‡16.6msï¼Œå¯¼è‡´æŸ“é—´éš”å¤§äºäº†16.6msï¼Œå°±ä¼šå¯¼è‡´å¡é¡¿ã€‚</li>
</ul>
</blockquote>
<h4 data-id="heading-11">2.2.3 FiberèŠ‚ç‚¹ç»“æ„</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// FiberèŠ‚ç‚¹çš„ç®€åŒ–ç»“æ„</span>
<span class="hljs-keyword">const</span> fiber = {
  <span class="hljs-comment">// èŠ‚ç‚¹ç±»å‹ä¿¡æ¯</span>
  <span class="hljs-attr">type</span>: <span class="hljs-string">'div'</span>,
  <span class="hljs-attr">key</span>: <span class="hljs-literal">null</span>,
  
  <span class="hljs-comment">// å…³ç³»æŒ‡é’ˆ</span>
  <span class="hljs-attr">return</span>: parentFiber,      <span class="hljs-comment">// çˆ¶èŠ‚ç‚¹</span>
  <span class="hljs-attr">child</span>: firstChildFiber,   <span class="hljs-comment">// ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹</span>
  <span class="hljs-attr">sibling</span>: nextSiblingFiber, <span class="hljs-comment">// ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹</span>
  
  <span class="hljs-comment">// çŠ¶æ€å’Œå±æ€§</span>
  <span class="hljs-attr">props</span>: {},
  <span class="hljs-attr">state</span>: {},
  
  <span class="hljs-comment">// å‰¯ä½œç”¨</span>
  <span class="hljs-attr">effectTag</span>: <span class="hljs-string">'UPDATE'</span>,  <span class="hljs-comment">// 'PLACEMENT' | 'UPDATE' | 'DELETION'</span>
  
  <span class="hljs-comment">// åŒç¼“å†²</span>
  <span class="hljs-attr">alternate</span>: workInProgressFiber, <span class="hljs-comment">// æŒ‡å‘å¦ä¸€æ£µæ ‘çš„å¯¹åº”èŠ‚ç‚¹</span>
};
</code></pre>
<h4 data-id="heading-12">2.2.4 Fiberçš„å·¥ä½œåŸç†</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/622bdf7d9f81401c81a885e3e6f800a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5piO6L-c5rmW5LmL6bG8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768228723&amp;x-signature=MvtOVj9ACY%2BDdYxLJhKXqvnk34c%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æ—¶é—´åˆ‡ç‰‡ï¼ˆTime Slicingï¼‰ï¼š</strong></p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// Fiberå°†å·¥ä½œåˆ†æˆå°å•å…ƒ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">workLoop</span>(<span class="hljs-params">deadline</span>) {
  <span class="hljs-keyword">let</span> shouldYield = <span class="hljs-literal">false</span>;
  
  <span class="hljs-keyword">while</span> (nextUnitOfWork &amp;&amp; !shouldYield) {
    <span class="hljs-comment">// æ‰§è¡Œä¸€ä¸ªå·¥ä½œå•å…ƒ</span>
    nextUnitOfWork = <span class="hljs-title function_">performUnitOfWork</span>(nextUnitOfWork);
    
    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦è®©å‡ºæ§åˆ¶æƒ</span>
    shouldYield = deadline.<span class="hljs-title function_">timeRemaining</span>() &lt; <span class="hljs-number">1</span>;
  }
  
  <span class="hljs-comment">// å¦‚æœè¿˜æœ‰å·¥ä½œï¼Œç»§ç»­è°ƒåº¦</span>
  <span class="hljs-keyword">if</span> (nextUnitOfWork) {
    <span class="hljs-title function_">requestIdleCallback</span>(workLoop);
  }
}

<span class="hljs-title function_">requestIdleCallback</span>(workLoop);
</code></pre>
<p><strong>åŒç¼“å†²æœºåˆ¶ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// currentæ ‘ï¼šå½“å‰æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„</span>
<span class="hljs-comment">// workInProgressæ ‘ï¼šæ­£åœ¨æ„å»ºçš„æ–°æ ‘</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">commitRoot</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å·¥ä½œå®Œæˆåï¼Œäº¤æ¢ä¸¤æ£µæ ‘</span>
  root.<span class="hljs-property">current</span> = workInProgressRoot;
}
</code></pre>
<p><strong>Fiberçš„ä¸¤ä¸ªé˜¶æ®µï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. åè°ƒé˜¶æ®µ - å¯ä»¥è¢«æ‰“æ–­</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">reconciliation</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// éå†Fiberæ ‘</span>
  <span class="hljs-comment">// æ ‡è®°éœ€è¦æ›´æ–°çš„èŠ‚ç‚¹</span>
  <span class="hljs-comment">// è®¡ç®—å‰¯ä½œç”¨</span>
  
  <span class="hljs-comment">// è¿™ä¸ªè¿‡ç¨‹å¯ä»¥æš‚åœå’Œæ¢å¤</span>
  <span class="hljs-keyword">while</span> (workInProgress &amp;&amp; !<span class="hljs-title function_">shouldYield</span>()) {
    workInProgress = <span class="hljs-title function_">performUnitOfWork</span>(workInProgress);
  }
}

<span class="hljs-comment">// 2. æäº¤é˜¶æ®µ - å¿…é¡»åŒæ­¥å®Œæˆ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">commit</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ä¸€æ¬¡æ€§åº”ç”¨æ‰€æœ‰DOMå˜æ›´</span>
  <span class="hljs-title function_">commitBeforeMutationEffects</span>();  <span class="hljs-comment">// DOMå˜æ›´å‰</span>
  <span class="hljs-title function_">commitMutationEffects</span>();        <span class="hljs-comment">// æ‰§è¡ŒDOMæ“ä½œ</span>
  <span class="hljs-title function_">commitLayoutEffects</span>();          <span class="hljs-comment">// DOMå˜æ›´å</span>
}
</code></pre>
<p><strong>æ•ˆæœå¯¹æ¯”ï¼š</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ—§æ¶æ„ï¼šä¸€æ¬¡æ€§å¤„ç†å®Œæ•´æ£µæ ‘</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">oldRender</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// é˜»å¡ä¸»çº¿ç¨‹ 100ms</span>
  <span class="hljs-title function_">updateEntireTree</span>(); <span class="hljs-comment">// æ— æ³•ä¸­æ–­</span>
}

ç”¨æˆ·ç‚¹å‡» â†’ å¼€å§‹æ›´æ–° â†’ [50msé˜»å¡] â†’ æ›´æ–°å®Œæˆ â†’ å“åº”ç”¨æˆ·
                    â†‘
                 é¡µé¢å¡é¡¿


<span class="hljs-comment">// Fiberæ¶æ„ï¼šåˆ†ç‰‡å¤„ç†</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">fiberRender</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// æ¯5mså¤„ç†ä¸€éƒ¨åˆ†</span>
  <span class="hljs-keyword">while</span> (hasWork &amp;&amp; <span class="hljs-title function_">timeRemaining</span>() &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-title function_">processChunk</span>(); <span class="hljs-comment">// å¯ä»¥éšæ—¶æš‚åœ</span>
  }
  <span class="hljs-comment">// è®©å‡ºæ§åˆ¶æƒç»™æµè§ˆå™¨å¤„ç†ç”¨æˆ·è¾“å…¥ã€åŠ¨ç”»ç­‰</span>
}

ç”¨æˆ·ç‚¹å‡» â†’ å¼€å§‹æ›´æ–° â†’ [5mså·¥ä½œ] â†’ è®©å‡ºæ§åˆ¶æƒ â†’ [5mså·¥ä½œ] â†’ ...
                    â†‘           â†‘
                 å¯å“åº”ç”¨æˆ·   å¯å¤„ç†åŠ¨ç”»

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flinkæºç é˜…è¯»ï¼šTaskæ•°æ®äº¤äº’]]></title>    <link>https://juejin.cn/post/7591744347826372634</link>    <guid>https://juejin.cn/post/7591744347826372634</guid>    <pubDate>2026-01-05T14:49:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591744347826372634" data-draft-id="7591744347826356250" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flinkæºç é˜…è¯»ï¼šTaskæ•°æ®äº¤äº’"/> <meta itemprop="keywords" content="Flink,å¤§æ•°æ®"/> <meta itemprop="datePublished" content="2026-01-05T14:49:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢å‘Googleç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1063982986695374"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flinkæºç é˜…è¯»ï¼šTaskæ•°æ®äº¤äº’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1063982986695374/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢å‘Googleç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-05T14:49:46.000Z" title="Mon Jan 05 2026 14:49:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-05
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç»è¿‡å‰é¢çš„å­¦ä¹ ï¼ŒFlink çš„å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µç›¸å…³çš„æºç å®ç°æˆ‘ä»¬å·²ç»äº†è§£äº†ã€‚æœ¬æ–‡æˆ‘ä»¬æ¥æ¢³ç† Task çš„æ•°æ®äº¤äº’ç›¸å…³çš„æºç ã€‚</p>
<h3 data-id="heading-0">æ•°æ®è¾“å‡º</h3>
<p>è¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬ç›´æ¥è¿›å…¥æ­£é¢˜ã€‚é¦–å…ˆæ¥çœ‹ Task çš„æ•°æ®è¾“å‡ºï¼Œåœ¨è¿›å…¥æµç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆä»‹ç»å‡ ä¸ªåŸºæœ¬æ¦‚å¿µã€‚</p>
<h4 data-id="heading-1">åŸºæœ¬æ¦‚å¿µ</h4>
<ul>
<li>RecordWriterOutputï¼šå®ƒæ˜¯ Output æ¥å£çš„ä¸€ä¸ªå…·ä½“å®ç°ç±»ï¼Œåº•å±‚ä½¿ç”¨ RecordWriter æ¥å‘é€æ•°æ®ã€‚</li>
<li>RecordWriterï¼šæ•°æ®å†™å…¥çš„æ‰§è¡Œè€…ï¼Œè´Ÿè´£å°†æ•°æ®å†™åˆ° ResultPartitionã€‚</li>
<li>ResultPartition å’Œ ResultSubpartitionï¼šResultPartition æ˜¯ ExecutionGraph ä¸­ä¸€ä¸ªèŠ‚ç‚¹çš„è¾“å‡ºç»“æœï¼Œä¸‹æ¸¸çš„æ¯ä¸ªéœ€è¦ä»å½“å‰ ResultPartition æ¶ˆè´¹æ•°æ®çš„ Task éƒ½ä¼šæœ‰ä¸€ä¸ª ResultSubpartitionã€‚</li>
<li>ChannelSelectorï¼šç”¨æ¥å†³å®šä¸€ä¸ª Record è¦è¢«å†™åˆ°å“ªä¸ª Subpartition ä¸­ã€‚</li>
<li>LocalBufferPoolï¼šç”¨æ¥ç®¡ç† Buffer çš„ç¼“å†²æ± ã€‚åœ¨ä»‹ç»åå‹çš„åŸç†æ—¶ï¼Œæˆ‘ä»¬æåˆ°è¿‡ã€‚</li>
</ul>
<p>å¯¹è¿™äº›åŸºæœ¬æ¦‚å¿µæœ‰äº†ä¸€å®šçš„äº†è§£ä¹‹åï¼Œæˆ‘ä»¬æ¥çœ‹æ•°æ®è¾“å‡ºçš„å…·ä½“æµç¨‹ã€‚</p>
<h4 data-id="heading-2">æ‰§è¡Œæµç¨‹</h4>
<p>æˆ‘ä»¬ä»¥ map ä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹æ•°æ®çš„è¾“å‡ºè¿‡ç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ed568cbc1734c71ae96ca84bb8c8305~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2i5ZCRR29vZ2xl57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768229385&amp;x-signature=LNbTqu9p6Ye7O7tH2oz32i0hyQs%3D" alt="DataOutput" loading="lazy"/></p>
<p>åœ¨ <code>StreamMap.processElement</code> æ–¹æ³•ä¸­ï¼Œè°ƒç”¨å®Œ map æ–¹æ³•ä¹‹åï¼Œå°±ä¼šè°ƒç”¨ <code>output.collect</code> æ–¹æ³•å°†æ•°æ®è¾“å‡ºï¼Œè¿™é‡Œçš„ output å°±æ˜¯ RecordWriterOutputã€‚åœ¨ RecordWriterOutput ä¸­ï¼Œä¼šè°ƒç”¨ RecordWriter çš„ emit æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">private</span> &lt;X&gt; <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">pushToRecordWriter</span>(<span class="hljs-params">StreamRecord&lt;X&gt; <span class="hljs-keyword">record</span></span>)</span> {
    serializationDelegate.setInstance(<span class="hljs-keyword">record</span>);

    <span class="hljs-keyword">try</span> {
        recordWriter.emit(serializationDelegate);
    } <span class="hljs-keyword">catch</span> (IOException e) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> UncheckedIOException(e.getMessage(), e);
    }
}
</code></pre>
<p>è¿™é‡Œçš„ serializationDelegate æ˜¯ç”¨æ¥å¯¹ record è¿›è¡Œåºåˆ—åŒ–çš„ã€‚RecordWriter æœ‰ä¸¤ä¸ªå®ç°ç±»ï¼Œä¸€ä¸ªæ˜¯ ChannelSelectorRecordWriterï¼Œå¦ä¸€ä¸ªæ˜¯ BroadcastRecordWriterã€‚ChannelSelectorRecordWriter éœ€è¦å…ˆè°ƒç”¨ ChannelSelector é€‰æ‹©å¯¹åº”çš„ subparitionï¼Œç„¶åè¿›è¡Œå†™å…¥ã€‚BroadcastRecordWriter åˆ™æ˜¯å†™åˆ°æ‰€æœ‰çš„ subparitionã€‚</p>
<p>æ¥ä¸‹æ¥å°±æ˜¯è°ƒç”¨ <code>BufferWritingResultPartition.emitRecord</code> æ¥å†™å…¥æ•°æ®ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">public void <span class="hljs-built_in">emitRecord</span>(ByteBuffer record, int targetSubpartition) throws IOException {
    totalWrittenBytes += record<span class="hljs-selector-class">.remaining</span>();

    BufferBuilder buffer = <span class="hljs-built_in">appendUnicastDataForNewRecord</span>(record, targetSubpartition);

    while (record.hasRemaining()) {
        <span class="hljs-comment">// full buffer, partial record</span>
        <span class="hljs-built_in">finishUnicastBufferBuilder</span>(targetSubpartition);
        buffer = <span class="hljs-built_in">appendUnicastDataForRecordContinuation</span>(record, targetSubpartition);
    }

    if (buffer.isFull()) {
        <span class="hljs-comment">// full buffer, full record</span>
        <span class="hljs-built_in">finishUnicastBufferBuilder</span>(targetSubpartition);
    }

    <span class="hljs-comment">// partial buffer, full record</span>
}
</code></pre>
<p>è¿™é‡ŒæŠŠ record å†™å…¥åˆ° buffer ä¸­ï¼Œå¦‚æœ buffer ä¸å¤Ÿï¼Œåˆ™ä¼šä» LocalBufferPool ä¸­ç”³è¯·æ–°çš„ bufferï¼Œç”³è¯·åˆ°ä¹‹åå°±ä¼šç»§ç»­å†™å…¥ã€‚ä¸‹é¢æ˜¯å…·ä½“çš„ç”³è¯·è¿‡ç¨‹ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">private MemorySegment <span class="hljs-built_in">requestMemorySegment</span>(int targetChannel) {
    MemorySegment segment = null;
    synchronized (availableMemorySegments) {
        <span class="hljs-built_in">checkDestroyed</span>();

        if (!availableMemorySegments.isEmpty()) {
            segment = availableMemorySegments<span class="hljs-selector-class">.poll</span>();
        } else if (isRequestedSizeReached()) {
            <span class="hljs-comment">// Only when the buffer request reaches the upper limit(i.e. current pool size),</span>
            <span class="hljs-comment">// requests an overdraft buffer.</span>
            segment = <span class="hljs-built_in">requestOverdraftMemorySegmentFromGlobal</span>();
        }

        if (segment == null) {
            return null;
        }

        if (targetChannel != UNKNOWN_CHANNEL) {
            if (++subpartitionBuffersCount[targetChannel] == maxBuffersPerChannel) {
                unavailableSubpartitionsCount++;
            }
        }

        <span class="hljs-built_in">checkAndUpdateAvailability</span>();
    }
    return segment;
}
</code></pre>
<p>å¦‚æœæœ‰å¯ç”¨å†…å­˜ï¼Œå°±ç›´æ¥ä»é˜Ÿåˆ—ä¸­å‡ºé˜Ÿã€‚å¦‚æœè¾¾åˆ°äº†æœ¬åœ° BufferPool çš„ä¸Šé™ï¼Œå°±ä»å…¨å±€çš„ NetworkBufferPool ä¸­ç”³è¯·ï¼Œç”³è¯·ä¸åˆ°å°±ä¼šé˜»å¡å†™å…¥è¿‡ç¨‹ï¼Œç­‰å¾…ç”³è¯·ã€‚æœ€åè¿˜ä¼šæ£€æŸ¥å¹¶æ›´æ–°å¯ç”¨å†…å­˜çŠ¶æ€ã€‚</p>
<p>æœ‰äº†å¯ç”¨çš„ buffer ä¹‹åï¼Œå°±ä¼šè°ƒç”¨ addToSubpartitionï¼Œæœ€ç»ˆæ•°æ®å­˜å‚¨åœ¨ PipelinedSubpartition çš„ buffers é˜Ÿåˆ—ä¸­ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">void</span> <span class="hljs-title">addToSubpartition</span><span class="hljs-params">(
        BufferBuilder buffer,
        <span class="hljs-type">int</span> targetSubpartition,
        <span class="hljs-type">int</span> partialRecordLength,
        <span class="hljs-type">int</span> minDesirableBufferSize)</span>
        throws IOException </span>{
    <span class="hljs-type">int</span> desirableBufferSize =
            subpartitions[targetSubpartition].<span class="hljs-built_in">add</span>(
                    buffer.<span class="hljs-built_in">createBufferConsumerFromBeginning</span>(), partialRecordLength);

    <span class="hljs-built_in">resizeBuffer</span>(buffer, desirableBufferSize, minDesirableBufferSize);
}
</code></pre>
<h3 data-id="heading-3">æ•°æ®è¾“å…¥</h3>
<p>çœ‹å®Œäº†æ•°æ®è¾“å‡ºçš„è¿‡ç¨‹ä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹æ•°æ®è¾“å…¥çš„è¿‡ç¨‹ã€‚é¦–å…ˆè¿˜æ˜¯äº†è§£å‡ ä¸ªåŸºæœ¬æ¦‚å¿µã€‚</p>
<h4 data-id="heading-4">åŸºæœ¬æ¦‚å¿µ</h4>
<ul>
<li>InputGateï¼šInputGate æ˜¯å¯¹è¾“å…¥çš„å°è£…ï¼Œä¸ JobGraph ä¸­çš„ JobEdge ä¸€ä¸€å¯¹åº”ï¼Œæ¯ä¸ª InputGate æ¶ˆè´¹ä¸Šæ¸¸ä¸€ä¸ªæˆ–å¤šä¸ª Resultpartitionã€‚</li>
<li>InputChannelï¼šInputChannel æ˜¯å’Œ ExecutionGraph ä¸­çš„ ExecutionEdge ä¸€ä¸€å¯¹åº”çš„ã€‚æ¯ä¸ª InputChannel æ¥æ”¶ä¸€ä¸ª ResultSubpartition çš„è¾“å‡ºï¼ŒInputChannel ä¸»è¦å…³æ³¨ LocalInputChannel å’Œ RemoteInputChannel ä¸¤ç§å®ç°ã€‚</li>
</ul>
<h4 data-id="heading-5">æ‰§è¡Œæµç¨‹</h4>
<p>äº†è§£äº†å…·ä½“æ¦‚å¿µä¹‹åï¼Œæˆ‘ä»¬å†çœ‹æ•°æ®è¾“å…¥çš„å…·ä½“æµç¨‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54ab8cf05ba14bc1b0a643b621cec5fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2i5ZCRR29vZ2xl57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768229385&amp;x-signature=ekrK1mD9nROVo2i0Adeh1eL98bk%3D" alt="RecordInput" loading="lazy"/></p>
<p>æ•°æ®è¾“å…¥çš„å…¥å£æ˜¯ <code>StreamTask.processInput</code> æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•ä¸­ä¸»è¦æ˜¯è°ƒç”¨ <code>inputProcessor.processInput</code> æ–¹æ³•ï¼Œæˆ‘ä»¬ä»¥ StreamOneInputProcessor ä¸ºä¾‹ã€‚è¿™ä¸ªæ–¹æ³•å°±æ˜¯è°ƒç”¨ <code>input.emitNext</code> æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> DataInputStatus emitNext(DataOutput&lt;T&gt; output) throws Exception {

    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
        <span class="hljs-comment">// get the stream element from the deserializer</span>
        <span class="hljs-keyword">if</span> (currentRecordDeserializer != <span class="hljs-literal">null</span>) {
            RecordDeserializer.DeserializationResult result;
            <span class="hljs-keyword">try</span> {
                result = currentRecordDeserializer.getNextRecord(deserializationDelegate);
            } <span class="hljs-keyword">catch</span> (IOException e) {
                <span class="hljs-keyword">throw</span> new IOException(
                        String.format(<span class="hljs-string">"Can't get next record for channel %s"</span>, lastChannel), e);
            }
            <span class="hljs-keyword">if</span> (result.isBufferConsumed()) {
                currentRecordDeserializer = <span class="hljs-literal">null</span>;
            }

            <span class="hljs-keyword">if</span> (result.isFullRecord()) {
                <span class="hljs-keyword">final</span> boolean breakBatchEmitting =
                        processElement(deserializationDelegate.getInstance(), output);
                <span class="hljs-keyword">if</span> (canEmitBatchOfRecords.check() &amp;&amp; !breakBatchEmitting) {
                    <span class="hljs-keyword">continue</span>;
                }
                <span class="hljs-keyword">return</span> DataInputStatus.MORE_AVAILABLE;
            }
        }

        Optional&lt;BufferOrEvent&gt; bufferOrEvent = checkpointedInputGate.pollNext();
        <span class="hljs-keyword">if</span> (bufferOrEvent.isPresent()) {
            <span class="hljs-comment">// return to the mailbox after receiving a checkpoint barrier to avoid processing of</span>
            <span class="hljs-comment">// data after the barrier before checkpoint is performed for unaligned checkpoint</span>
            <span class="hljs-comment">// mode</span>
            <span class="hljs-keyword">if</span> (bufferOrEvent.<span class="hljs-keyword">get</span>().isBuffer()) {
                processBuffer(bufferOrEvent.<span class="hljs-keyword">get</span>());
            } <span class="hljs-keyword">else</span> {
                DataInputStatus status = processEvent(bufferOrEvent.<span class="hljs-keyword">get</span>(), output);
                <span class="hljs-keyword">if</span> (status == DataInputStatus.MORE_AVAILABLE &amp;&amp; canEmitBatchOfRecords.check()) {
                    <span class="hljs-keyword">continue</span>;
                }
                <span class="hljs-keyword">return</span> status;
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (checkpointedInputGate.isFinished()) {
                checkState(
                        checkpointedInputGate.getAvailableFuture().isDone(),
                        <span class="hljs-string">"Finished BarrierHandler should be available"</span>);
                <span class="hljs-keyword">return</span> DataInputStatus.END_OF_INPUT;
            }
            <span class="hljs-keyword">return</span> DataInputStatus.NOTHING_AVAILABLE;
        }
    }
}
</code></pre>
<p>è¿™é‡Œæ˜¯è°ƒç”¨ <code>checkpointedInputGate.pollNext</code> æ¥è·å–è¾“å…¥çš„æ•°æ®ã€‚å®ƒçš„å†…éƒ¨å°±æ˜¯è°ƒç”¨ InputGate çš„ pollNext æ–¹æ³•æ¥è·å–æ•°æ®ã€‚å½“è·å–åˆ°å®Œæ•´æ•°æ®ä¹‹åï¼Œå°±ä¼šè°ƒç”¨ processElement æ¥å¤„ç†æ•°æ®ã€‚</p>
<p>æˆ‘ä»¬ä»¥ SingleInputGate ä¸ºä¾‹çœ‹ InputGate çš„ pollNext æ–¹æ³•ã€‚å®ƒçš„å†…éƒ¨è°ƒç”¨é“¾è·¯å¯ç”¨ä¸€ç›´è¿½è¸ªåˆ° readBufferFromInputChannel æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å†…ä¼šè°ƒç”¨ <code>inputChannel.getNextBuffer</code>ï¼Œè¿™é‡Œäº¤ç»™ InputChannel æ¥å…·ä½“æ‰§è¡Œæ•°æ®è¯»å–ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">public Optional&lt;BufferAndAvailability&gt; <span class="hljs-built_in">getNextBuffer</span>() throws IOException {
    <span class="hljs-built_in">checkError</span>();

    if (!toBeConsumedBuffers.isEmpty()) {
        return <span class="hljs-built_in">getBufferAndAvailability</span>(toBeConsumedBuffers.removeFirst());
    }

    ResultSubpartitionView subpartitionView = this<span class="hljs-selector-class">.subpartitionView</span>;
    if (subpartitionView == null) {
        <span class="hljs-comment">// There is a possible race condition between writing a EndOfPartitionEvent (1) and</span>
        <span class="hljs-comment">// flushing (3) the Local</span>
        <span class="hljs-comment">// channel on the sender side, and reading EndOfPartitionEvent (2) and processing flush</span>
        <span class="hljs-comment">// notification (4). When</span>
        <span class="hljs-comment">// they happen in that order (1 - 2 - 3 - 4), flush notification can re-enqueue</span>
        <span class="hljs-comment">// LocalInputChannel after (or</span>
        <span class="hljs-comment">// during) it was released during reading the EndOfPartitionEvent (2).</span>
        if (isReleased) {
            return Optional<span class="hljs-selector-class">.empty</span>();
        }

        <span class="hljs-comment">// this can happen if the request for the partition was triggered asynchronously</span>
        <span class="hljs-comment">// by the time trigger</span>
        <span class="hljs-comment">// would be good to avoid that, by guaranteeing that the requestPartition() and</span>
        <span class="hljs-comment">// getNextBuffer() always come from the same thread</span>
        <span class="hljs-comment">// we could do that by letting the timer insert a special "requesting channel" into the</span>
        <span class="hljs-comment">// input gate's queue</span>
        subpartitionView = <span class="hljs-built_in">checkAndWaitForSubpartitionView</span>();
    }

    BufferAndBacklog next = subpartitionView<span class="hljs-selector-class">.getNextBuffer</span>();
    <span class="hljs-comment">// ignore the empty buffer directly</span>
    while (next != null &amp;&amp; next.buffer()<span class="hljs-selector-class">.readableBytes</span>() == <span class="hljs-number">0</span>) {
        next<span class="hljs-selector-class">.buffer</span>()<span class="hljs-selector-class">.recycleBuffer</span>();
        next = subpartitionView<span class="hljs-selector-class">.getNextBuffer</span>();
        numBuffersIn<span class="hljs-selector-class">.inc</span>();
    }

    if (next == null) {
        if (subpartitionView.isReleased()) {
            throw new <span class="hljs-built_in">CancelTaskException</span>(
                    "Consumed partition " + subpartitionView + " has been released.");
        } else {
            return Optional<span class="hljs-selector-class">.empty</span>();
        }
    }

    Buffer buffer = next<span class="hljs-selector-class">.buffer</span>();

    if (buffer instanceof FullyFilledBuffer) {
        List&lt;Buffer&gt; partialBuffers = ((FullyFilledBuffer) buffer)<span class="hljs-selector-class">.getPartialBuffers</span>();
        int seq = next<span class="hljs-selector-class">.getSequenceNumber</span>();
        for (Buffer partialBuffer : partialBuffers) {
            toBeConsumedBuffers<span class="hljs-selector-class">.add</span>(
                    new BufferAndBacklog(
                            partialBuffer,
                            next.buffersInBacklog(),
                            buffer<span class="hljs-selector-class">.getDataType</span>(),
                            seq++));
        }

        return <span class="hljs-built_in">getBufferAndAvailability</span>(toBeConsumedBuffers.removeFirst());
    }

    return <span class="hljs-built_in">getBufferAndAvailability</span>(next);
}
</code></pre>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ LocalInputChannelï¼Œå…ˆè·å–åˆ°äº† subpartitionViewï¼Œå¹¶è°ƒç”¨ getNextBufferï¼Œè¿™é‡Œå…¶å®å°±æ˜¯ä» PipelinedSubpartition çš„ buffers é˜Ÿåˆ—ä¸­è¯»å–æ•°æ®ã€‚</p>
<p>RemoteInputChannel åˆ™éœ€è¦ä» receivedBuffers ä¸­è¯»å–æ•°æ®ï¼Œè¿™ä¸ªé˜Ÿåˆ—çš„æ•°æ®å°±æ˜¯æ¶ˆè´¹ä¸Šæ¸¸æ•°æ®åä¿å­˜çš„ã€‚</p>
<p>è‡³æ­¤ï¼ŒFlink ä¸­ Task çš„æ•°æ®è¾“å…¥å’Œè¾“å‡ºè¿‡ç¨‹çš„æºç å°±æ¢³ç†å®Œäº†ï¼Œæ›´åŠ åº•å±‚çš„ Netty ç›¸å…³ä»£ç æˆ‘ä»¬åœ¨åé¢ç»§ç»­æ¢³ç†ã€‚</p>
<h3 data-id="heading-6">æ€»ç»“</h3>
<p>æœ€åç®€å•æ€»ç»“ä¸€ä¸‹ï¼Œæœ¬æ–‡æˆ‘ä»¬æ¢³ç†äº† Task çš„æ•°æ®è¾“å‡ºå’Œè¾“å…¥çš„è¿‡ç¨‹ã€‚è¾“å‡ºè¿‡ç¨‹ä¸»è¦æ˜¯åˆ©ç”¨ RecordWriter å°†æ•°æ®å†™å…¥åˆ° Buffer ä¸­ï¼Œè¾“å…¥è¿‡ç¨‹åˆ™æ˜¯åˆ©ç”¨ InputChannel ä» Buffer æ¶ˆè´¹çš„è¿‡ç¨‹ã€‚å¦‚æœä½ çš„ Flink ä»»åŠ¡æ•°æ®é‡ç‰¹åˆ«å¤§ï¼Œå¹¶ä¸”æ²¡ä»€ä¹ˆå¤æ‚çš„é€»è¾‘ï¼Œå¯ä»¥è€ƒè™‘é€‚å½“è°ƒæ•´ localBufferPool çš„å¤§å°æ¥è°ƒä¼˜ä»»åŠ¡çš„ååã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>