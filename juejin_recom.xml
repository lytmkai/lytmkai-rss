<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ä¸ä»…å…è´¹ï¼Œè¿˜å¼€æºï¼Ÿè¿™ä¸ª AI Mock ç¥å™¨æˆ‘å¿…é¡»æ›å…‰å®ƒ]]></title>    <link>https://juejin.cn/post/7578793960627486746</link>    <guid>https://juejin.cn/post/7578793960627486746</guid>    <pubDate>2025-12-02T05:55:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578793960627486746" data-draft-id="7577683422879055906" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ä»…å…è´¹ï¼Œè¿˜å¼€æºï¼Ÿè¿™ä¸ª AI Mock ç¥å™¨æˆ‘å¿…é¡»æ›å…‰å®ƒ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æµè§ˆå™¨"/> <meta itemprop="datePublished" content="2025-12-02T05:55:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ä¸€æ ·çš„å°‘å¹´_"/> <meta itemprop="url" content="https://juejin.cn/user/3035079961218551"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ä»…å…è´¹ï¼Œè¿˜å¼€æºï¼Ÿè¿™ä¸ª AI Mock ç¥å™¨æˆ‘å¿…é¡»æ›å…‰å®ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3035079961218551/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ä¸€æ ·çš„å°‘å¹´_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T05:55:49.000Z" title="Tue Dec 02 2025 05:55:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    47
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å‰ä¸¤å‘¨æˆ‘åšäº†ä¸€ä¸ªé›¶ä¾µå…¥çš„æ¥å£ Mock  æ’ä»¶ã€‚è¿˜å†™äº†ç¯‡æ˜é‡‘æ–‡ç« è®°å½•äº†ä¸€ä¸‹ï¼š<a href="https://juejin.cn/post/7570984257666056238" target="_blank" title="https://juejin.cn/post/7570984257666056238">juejin.cn/post/757098â€¦</a></p>
<p>æ­¤å‰ç”¨ Popup å¼¹çª—åšè”è°ƒï¼Œçª—å°ã€æ˜“è¯¯å…³ã€æ“ä½œç¹çï¼›</p>
<p>äºæ˜¯æˆ‘é‡æ„ä¸º Sidebar å¸¸é©»ä¾§æ ï¼šè§„åˆ™éšæ—¶å¯è§ï¼Œåˆ·æ–°ä¹Ÿä¸ä¸¢ã€‚</p>
<ul>
<li>
<p><strong>æ¢æˆ Sidebar ä¾§è¾¹æ </strong>ï¼šé’‰åœ¨é¡µé¢å³è¾¹ï¼Œæƒ³å¼€å°±å¼€ï¼Œæ•°æ®éƒ½å­˜ç€ï¼Œå†ä¹Ÿä¸æ€•æ‰‹æŠ–å…³æ‰ã€‚å³ä½¿åˆ·æ–°é¡µé¢ï¼Œè§„åˆ™ä¹Ÿä¸ä¼šä¸¢ï¼Œé‡æ–°æ‰“å¼€å°±èƒ½ç»§ç»­ç”¨</p>
</li>
<li>
<p><strong>æ¥å…¥ AI è‡ªåŠ¨ç”Ÿæˆ</strong>ï¼šæè¿°ä½ æƒ³è¦çš„æ•°æ®ï¼Œæˆ–è€…ç›´æ¥è´´æ¥å£çš„ TypeScript ç±»å‹ï¼ŒAI ç§’å‡ºç»“æ„åŒ–æ•°æ®ã€‚æ‰‹å†™ï¼Ÿä¸å­˜åœ¨çš„</p>
</li>
<li>
<p><strong>æ”¯æŒå»¶æ—¶å’ŒçŠ¶æ€ç </strong>ï¼šå¯ä»¥æ¨¡æ‹Ÿæ…¢æ¥å£ï¼ˆå»¶æ—¶ 3 ç§’ï¼‰ã€æ¥å£æŠ¥é”™ï¼ˆè¿”å› 500ï¼‰ç­‰çœŸå®åœºæ™¯</p>
</li>
</ul>
<p>ç°åœ¨ç”¨èµ·æ¥çˆ½å¤šäº†ï¼Œå‰ç«¯å¼€å‘ä¸ç”¨å¹²ç­‰åç«¯ï¼Œè‡ªå·±å°±èƒ½æŠŠé¡µé¢è·‘èµ·æ¥ã€‚</p>
<p><strong>ä¸‹æ–‡é™„å®‰è£…ä¸ä½¿ç”¨æŒ‡å—ï¼Œæ¬¢è¿è¯•ç”¨ä¸åé¦ˆ</strong>ã€‚</p>
<p>å¦‚æœä½ ç°åœ¨è¿˜åœ¨ç”¨ Popup å¼¹çª—åš Mockï¼Œæˆ–è€…è¿˜åœ¨ä¸€ä¸ªå­—ä¸€ä¸ªå­—æ•² JSONï¼Œ çœŸå¿ƒå»ºè®®è¯•è¯• Sidebar + AI è¿™å¥—ï¼Œç”¨å®Œä½ å°±çŸ¥é“ä»€ä¹ˆå«"çœŸé¦™"ã€‚</p>
</blockquote>
<h2 data-id="heading-0">æ¼”ç¤ºæ•ˆæœ</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b8ca4cefce64d1dbe6dd0b6479bf06d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261107&amp;x-signature=UsVkNA4XKI92D6ffqMvU7pWcjHk%3D" alt="mockæ’ä»¶æ¼”ç¤º.gif" loading="lazy"/></p>
<h2 data-id="heading-1">æ’ä»¶åŠŸèƒ½é¢„è§ˆ</h2>
<ul>
<li>æ‹¦æˆªèƒ½åŠ›ï¼šè¦†ç›– fetch ä¸ XMLHttpRequest ï¼Œè§„åˆ™å®æ—¶ç”Ÿæ•ˆï¼Œé›¶ä¾µå…¥</li>
<li>åŒ¹é…è§„åˆ™ï¼šæ”¯æŒæ¨¡ç³ŠåŒ¹é…å’Œå®Œå…¨åŒ¹é…ã€æ­£åˆ™è¡¨è¾¾å¼</li>
<li>å“åº”æ§åˆ¶ï¼šæ”¯æŒæŒ‰ HTTP æ–¹æ³•è¿‡æ»¤ï¼ˆGET/POST/PUT/DELETEï¼‰</li>
<li>å¼‚å¸¸æ¨¡æ‹Ÿï¼šæ”¯æŒæ¨¡æ‹Ÿ200/400/401/403/500ç­‰çŠ¶æ€ç </li>
<li>AI ç”Ÿæˆï¼šè¾“å…¥æè¿°æˆ–è´´ TS ç±»å‹ï¼Œç§’å‡ºç»“æ„åŒ–æ•°æ®ï¼Œæ”¯æŒæ¨¡æ¿ä¸ä¸€é”®è¦†å†™</li>
<li><code>æŒç»­ä¼˜åŒ–ä¸­,æ¬¢è¿åé¦ˆä¸å»ºè®®</code></li>
<li><code>å»ºè®¾ä¸­</code>: è°ƒè¯•ä¸ç®¡ç†ï¼šå¯¼å…¥å¯¼å‡ºã€è§„åˆ™åˆ†ç»„ã€Network é¢æ¿æ ‡è¯†ç­‰ï¼›æ€§èƒ½ä¸åŒ¹é…ä½“éªŒæŒç»­ä¼˜åŒ–ï¼Œæ¬¢è¿åé¦ˆ</li>
</ul>
<h2 data-id="heading-2">ä»€ä¹ˆæ—¶å€™ä½ ä¼šéœ€è¦å®ƒï¼Ÿ</h2>
<ul>
<li><strong>åç«¯è¿˜åœ¨å†™æ¥å£</strong>ï¼šä½ ä¸ç”¨å¹²ç­‰ï¼ŒMock ä¸€ä¸‹å…ˆæŠŠå‰ç«¯é¡µé¢æ’¸å‡ºæ¥</li>
<li><strong>æµ‹è¯•åŠ è½½çŠ¶æ€</strong>ï¼šè®¾ç½®å»¶æ—¶ 2 ç§’ï¼Œçœ‹çœ‹ä½ çš„ Loading åŠ¨ç”»ã€éª¨æ¶å±æ˜¯ä¸æ˜¯çœŸçš„åœ¨è½¬</li>
<li><strong>æµ‹è¯•å¼‚å¸¸å¤„ç†</strong>ï¼šä¸€é”®åˆ‡æ¢ 200/400/401/403/500ï¼Œçœ‹çœ‹ä½ çš„é”™è¯¯æç¤ºæ˜¯å¦å‹å¥½</li>
<li><strong>æµ‹è¯•é˜²é‡å¤æäº¤</strong>ï¼šå»¶æ—¶ 3 ç§’ + è¿”å›å¤±è´¥ï¼Œçœ‹çœ‹ç”¨æˆ·ä¼šä¸ä¼šç–¯ç‹‚ç‚¹å‡»</li>
<li><strong>ç»™è€æ¿/å®¢æˆ·æ¼”ç¤º</strong>ï¼šä¸ç”¨æ­ç¯å¢ƒã€ä¸ç”¨è¿æœåŠ¡å™¨ï¼Œæ‰“å¼€æµè§ˆå™¨å°±èƒ½æ¼”ç¤º</li>
</ul>
<p><code>æ³¨ï¼šæ”¯æŒæ‹¦æˆªajaxå’Œfetchè¯·æ±‚</code></p>
<hr/>
<h2 data-id="heading-3">ğŸš€ å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-4">è·å–ä»£ç </h3>
<ul>
<li><strong>GitHub</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTeernage%2FAI-Mock" target="_blank" title="https://github.com/Teernage/AI-Mock" ref="nofollow noopener noreferrer">github.com/Teernage/AIâ€¦</a> â­ å¦‚æœå¯¹æ‚¨æœ‰å¸®åŠ©æ¬¢è¿Star</li>
<li><strong>Gitee</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fxuzhenxin110%2FAI-Mock" target="_blank" title="https://gitee.com/xuzhenxin110/AI-Mock" ref="nofollow noopener noreferrer">gitee.com/xuzhenxin11â€¦</a></li>
</ul>
<p>æ‰“å¼€ä»£ç ä»“åº“ï¼ŒæŒ‰ä»¥ä¸‹æ–¹æ“ä½œä¸‹è½½æ’ä»¶åŒ…ã€‚å®‰è£…åŒ…ä¸º zipï¼Œè¯·å…ˆè§£å‹ã€‚</p>
<p><strong>ä¸‹è½½ä¸è§£å‹</strong></p>
<ul>
<li>åœ¨ä»“åº“çš„ Releases æˆ–æ‰“åŒ…å…¥å£ä¸‹è½½æ’ä»¶åŒ…ï¼ˆzipï¼‰ã€‚</li>
<li>å°† zip è§£å‹åˆ°ä»»æ„ç›®å½•ï¼Œå¾—åˆ° AI-Mock-v1.0.0 æ–‡ä»¶å¤¹ã€‚</li>
</ul>
<p><strong>å‚è€ƒç¤ºæ„å›¾ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28fddc75094349fca1a061281ca612b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261107&amp;x-signature=yZbS02yyAXOfbOiHnbP5yJR%2BC0E%3D" alt="ä¸‹è½½å®‰è£…åŒ….gif" loading="lazy"/></p>
<h3 data-id="heading-5">ä¸€é”®å®‰è£…</h3>
<ol start="2">
<li>æ‰“å¼€Chromeæµè§ˆå™¨
3..  åœ°å€æ è¾“å…¥ï¼š<code>chrome://extensions/</code></li>
<li>æ‰“å¼€å³ä¸Šè§’"å¼€å‘è€…æ¨¡å¼"</li>
<li>ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"</li>
<li>é€‰æ‹©åˆšåˆšè§£å‹çš„AI-Mock-v1.0.0æ–‡ä»¶å¤¹</li>
<li>æå®šï¼æ‰©å±•å®‰è£…å®Œæˆï¼</li>
</ol>
<p><strong>å‚è€ƒç¤ºæ„å›¾ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0de60559bf94963b003f59bc9a7146e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261107&amp;x-signature=7YL4Y9RyU21uwhQJ2fqeySPOa74%3D" alt="å®‰è£…ai-mock.gif" loading="lazy"/></p>
<p>gitee ä»“åº“é“¾æ¥çš„åŒç†ï¼Œåœ¨ä»“åº“é¡µç‚¹å‡»â€œå‘è¡Œç‰ˆï¼ˆReleaseï¼‰â€, è¿›å…¥æœ€æ–°ç‰ˆæœ¬é¡µé¢ï¼Œä¸‹è½½æ’ä»¶åŒ…å³å¯</p>
<p><strong>AI å‰ç½®å‡†å¤‡</strong></p>
<ul>
<li>ä½¿ç”¨ AI ç”Ÿæˆå‰éœ€é…ç½® DeepSeek API Keyã€‚ä¸ºä¾¿äºä½“éªŒï¼Œæä¾›ä¸€ä¸ªé™é¢è¯•ç”¨ Keyï¼›é¢åº¦ç”¨å°½æˆ–å¤±æ•ˆåï¼Œè¯·å‰å¾€ DeepSeek å®˜ç½‘ç”³è¯·ä¸ªäºº Key å¹¶åœ¨ä¾§æ æ›¿æ¢</li>
<li>è¯•ç”¨ Keyï¼ˆä»…ç”¨äºä½“éªŒï¼Œéšæ—¶å¯èƒ½å¤±æ•ˆï¼‰ï¼š <code>sk-9fa67c84581d4f67b61039ff8b199baa</code></li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d0f80f238a14bda9266f7c5e3cdcace~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261107&amp;x-signature=OBDpl4Rxte4ItaYTefnMy5%2B4eWg%3D" alt="é…ç½®key.gif" loading="lazy"/></p>
<p>DeepSeek å®˜ç½‘ç”³è¯·keyç¤ºä¾‹:</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2cdc607666b54e1eac842ecaa7d78d30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261107&amp;x-signature=OQm3vJUzHfSWSoIzfkrGGq8jOkI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">è®¾è®¡ä¸å®ç°</h2>
<h3 data-id="heading-7">1. Sidebar ä¾§è¾¹æ  vs popupå¼¹çª—</h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th>Popup</th><th>Sidebar</th></tr></thead><tbody><tr><td>æ˜¾ç¤ºç©ºé—´</td><td>å°ï¼ˆ~400x600pxï¼‰</td><td>å¤§ï¼ˆå¯è°ƒæ•´å®½åº¦ï¼‰</td></tr><tr><td>æ“ä½œä¾¿æ·æ€§</td><td>ç‚¹å‡»å¤–éƒ¨å°±å…³é—­</td><td>å›ºå®šæ˜¾ç¤ºï¼Œä¸æ€•è¯¯è§¦</td></tr><tr><td>ä¸é¡µé¢äº¤äº’</td><td>äº’æ–¥</td><td>å¯åŒæ—¶æ˜¾ç¤º</td></tr><tr><td>æ•°æ®æŒä¹…åŒ–</td><td>å…³é—­å³ä¸¢å¤±</td><td>åˆ·æ–°é¡µé¢ä¹Ÿä¿ç•™</td></tr></tbody></table>
<h3 data-id="heading-8">2. AI ç”Ÿæˆ Mock æ•°æ®</h3>
<p>è¿™å—å°±ä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li>ä½ ç»™ä¸€ä¸ª URLï¼Œæˆ‘æŠŠå®ƒè½¬æˆæ­£åˆ™ï¼Œç”¨æ¥æ‹¦æˆªè¿™ä¸ªæ¥å£</li>
<li>ä½ ç»™æ•°æ®ç±»å‹æˆ–è€…ä¸€å¥è¯æè¿°ï¼ŒAI ç›´æ¥æŠŠ Mock æ•°æ®â€œç°åšç°ç»™â€</li>
</ul>
<h4 data-id="heading-9">1. æ ¹æ®æè¿°è¾“å‡º Mock æ•°æ®</h4>
<ul>
<li>åªè¦ä¸€å¥è¯å°±å¤Ÿï¼š
<ul>
<li>è¾“å…¥ï¼šç”¨æˆ·åˆ—è¡¨ï¼ŒåŒ…å«å§“åã€å¹´é¾„ã€é‚®ç®±ï¼Œæ¥ 10 æ¡</li>
</ul>
</li>
</ul>
<p><strong>æ•ˆæœå›¾ï¼š</strong><br/>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1be757a4b85741e08c5843ecb0af04fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261107&amp;x-signature=DzzYcfaP1JCCNiCrUF4jFQZlMt8%3D" alt="æ ¹æ®æè¿°è¾“å‡º Mock æ•°æ®.gif" loading="lazy"/></p>
<h4 data-id="heading-10">2. æ ¹æ®ç±»å‹è¾“å‡º Mock æ•°æ®</h4>
<ul>
<li>æˆ–è€…ç›´æ¥è´´ æ•°æ®çš„ç±»å‹ï¼š</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>;
}
</code></pre>
<p><strong>æ•ˆæœå›¾ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4e8a604d22c47b59ed1a6e0d220580f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261107&amp;x-signature=sJE8i306zEN9oNlnWyU4%2BgabS5w%3D" alt="æ ¹æ®ç±»å‹è¾“å‡º Mock æ•°æ®.gif" loading="lazy"/></p>
<h4 data-id="heading-11">3. æ ¹æ®è¾“å…¥çš„åœ°å€ç”Ÿæˆæ­£åˆ™è¡¨è¾¾å¼</h4>
<p><code>ç›®çš„ï¼šæŠŠå¸¦å ä½ç¬¦çš„è·¯å¾„ï¼Œè½¬æˆæ›´ç¨³çš„æ­£åˆ™ï¼Œæ–¹ä¾¿åœ¨å¼€å‘æ€æ‹¦æˆªè¯·æ±‚</code></p>
<p><strong>å¸¸ç”¨ç¤ºä¾‹ï¼š</strong></p>
<ul>
<li>è¾“å…¥ï¼š /api/users/:id</li>
<li>æ­£åˆ™ï¼š ^/api/users/[^/]+/?$</li>
<li>å¯æ‹¦æˆªï¼š /api/users/1 ã€ /api/users/abc</li>
</ul>
<p><strong>æ•ˆæœå›¾ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4075626ca2124648a3901af9b9631373~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261107&amp;x-signature=peR4oQO0ybOHOtr6eIgNNMQvx%2BU%3D" alt="aiç”Ÿæˆæ­£åˆ™è¡¨è¾¾å¼.gif" loading="lazy"/></p>
<h3 data-id="heading-12">ä¿®æ”¹ Mock æ•°æ®</h3>
<ul>
<li>
<p>è¿™å—å¾ˆç›´è§‚ï¼Œç»™ä½ ä¸‰ç§ç¼–è¾‘å…¥å£ï¼Œæ”¹å®Œå°±æ˜¯ç”Ÿæ•ˆï¼š</p>
<ul>
<li>è§„åˆ™ç¼–è¾‘é‡Œæ”¹ï¼šæ‰“å¼€â€œç¼–è¾‘è§„åˆ™â€ï¼Œåœ¨ Mock æ•°æ® (JSON) æ–‡æœ¬æ¡†é‡Œç›´æ¥æ”¹ï¼Œæ”¯æŒâ€œæ ¼å¼åŒ–/éªŒè¯/å¤åˆ¶/æ¸…ç©ºâ€ï¼Œç‚¹â€œä¿å­˜â€åç«‹å³åº”ç”¨</li>
</ul>
</li>
<li>
<p>æ”¾å¤§å¼¹çª—æ”¹ï¼šç‚¹å‡»â€œæ”¾å¤§â€ï¼Œå…¨å± JSON ç¼–è¾‘å™¨æ›´é€‚åˆæ”¹å¤§ç»“æ„æˆ–æ·±å±‚åµŒå¥—ï¼Œæ”¹å®Œâ€œéªŒè¯â€ä¸€ä¸‹å†â€œä¿å­˜â€</p>
</li>
<li>
<p>å¡ç‰‡å†…è”æ”¹ï¼šåœ¨è§„åˆ™å¡ç‰‡ä¸‹æ–¹çš„â€œMock å“åº”â€æ ‘è§†å›¾ï¼Œé¼ æ ‡åŒå‡»æŸä¸ªå€¼å°±èƒ½ç›´æ¥ç¼–è¾‘ï¼Œç¼–è¾‘å®Œè¿›è¡Œå›è½¦ä¿å­˜ã€‚è¿™ä¸ªé€‚åˆæ”¹å°å­—æ®µï¼ˆæ¯”å¦‚æŠŠ data.hits.total ä» 1 æ”¹æˆ 20 ï¼‰</p>
</li>
</ul>
<p><strong>æ•ˆæœå›¾ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5a6147cda3b44b6beeae493f518b3a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261107&amp;x-signature=ruDfe6kG5TGTmPgqdKuYOze81eA%3D" alt="jsonæ•°æ®ä¿®æ”¹æ–¹å¼.gif" loading="lazy"/></p>
<h4 data-id="heading-13">åŒæ­¥è§„åˆ™</h4>
<ul>
<li>ä¸‰ä¸ªåœ°æ–¹æ”¹çš„éƒ½æ˜¯åŒä¸€ä»½æ•°æ®ï¼Œä»»æ„å…¥å£ä¿å­˜åï¼Œå…¶ä»–å…¥å£ä¼šæ˜¾ç¤ºæœ€æ–°å€¼</li>
<li>ä¿®æ”¹ä»…ä½œç”¨äºâ€œå½“å‰è¿™æ¡è§„åˆ™â€ï¼Œä¸ä¼šå½±å“å…¶ä»–è§„åˆ™æˆ–æ¥å£</li>
</ul>
<h4 data-id="heading-14">æ¨èä½¿ç”¨åœºæ™¯</h4>
<ul>
<li>å°æ”¹åŠ¨ï¼ˆå•å­—æ®µ/å°‘é‡æ•°å€¼ï¼‰ï¼šç”¨â€œå¡ç‰‡å†…è”â€æœ€å¿«</li>
<li>ä¸­ç­‰æ”¹åŠ¨ï¼ˆå‡ ä¸ªå­—æ®µ/ä¸€å±‚ç»“æ„ï¼‰ï¼šåœ¨â€œç¼–è¾‘è§„åˆ™â€é‡Œæ”¹ï¼Œé…åˆâ€œæ ¼å¼åŒ–/éªŒè¯â€</li>
<li>å¤§æ”¹åŠ¨ï¼ˆæ•°ç»„é•¿åº¦ã€å±‚çº§ç»“æ„ã€æ‰¹é‡æ›¿æ¢ï¼‰ï¼šç”¨â€œæ”¾å¤§å¼¹çª—â€ç¼–è¾‘ JSONï¼Œæ›´æ¸…æ™°ã€æ›´ä¸å®¹æ˜“æ¼</li>
</ul>
<h4 data-id="heading-15">æ“ä½œå»ºè®®</h4>
<ul>
<li>å…ˆâ€œéªŒè¯â€å†â€œä¿å­˜â€ï¼šèƒ½å¿«é€Ÿæç¤º JSON è¯­æ³•ã€å­—æ®µç±»å‹ä¸åŒ¹é…ç­‰é—®é¢˜</li>
<li>ç”¨â€œæ ¼å¼åŒ–â€æå‡å¯è¯»æ€§ï¼Œé¿å…ç¼©è¿›é”™ä¹±</li>
<li>éœ€è¦å›åˆ°åˆå§‹æˆ–é‡ç½®æ—¶ï¼Œç”¨â€œæ¸…ç©ºâ€æˆ–ç‚¹å‡»â€œç”Ÿæˆâ€é‡æ–°å‡ºä¸€ç‰ˆæ•°æ®</li>
<li>è¦åˆ†äº«æˆ–å¤‡ä»½å½“å‰æ•°æ®ï¼Œç”¨â€œå¤åˆ¶â€ä¸€é”®æ‹·è´</li>
</ul>
<h3 data-id="heading-16">4. å»¶æ—¶è¯·æ±‚ - æµ‹è¯•åŠ è½½çŠ¶æ€</h3>
<p>è®¾ç½®å»¶æ—¶ 3 ç§’ï¼Œæ¨¡æ‹Ÿæ…¢æ¥å£ï¼š</p>
<ul>
<li>æµ‹è¯• Loading åŠ¨ç”»æ˜¯å¦æ­£å¸¸</li>
<li>æµ‹è¯•éª¨æ¶å±æ•ˆæœ</li>
<li>æµ‹è¯•ç”¨æˆ·ä¼šä¸ä¼šé‡å¤ç‚¹å‡»</li>
<li>æµ‹è¯•è¶…æ—¶é€»è¾‘</li>
</ul>
<p>æ¼”ç¤ºæ•ˆæœå›¾:</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df1b39dde0d84a3b8f93ef33f1e3f4cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261107&amp;x-signature=HUfTLRdHQ1EaMOf1x%2Bf2mUMmSgw%3D" alt="å»¶è¿Ÿæ•ˆæœ.gif" loading="lazy"/></p>
<h3 data-id="heading-17">4. çŠ¶æ€ç  - æµ‹è¯•å¼‚å¸¸åœºæ™¯</h3>
<p>ä¸€é”®åˆ‡æ¢ä¸åŒçŠ¶æ€ç ï¼š</p>
<ul>
<li><strong>200</strong>ï¼šæµ‹è¯•æˆåŠŸæµç¨‹</li>
<li><strong>400</strong>ï¼šæµ‹è¯•å‚æ•°æ ¡éªŒ</li>
<li><strong>401</strong>ï¼šæµ‹è¯•ç™»å½•è·³è½¬</li>
<li><strong>403</strong>ï¼šæµ‹è¯•æƒé™æç¤º</li>
<li><strong>500</strong>ï¼šæµ‹è¯•é”™è¯¯å…œåº•</li>
</ul>
<p><strong>æ•ˆæœå›¾:</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7929c1a7827742df82f934e6de9584b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5LiA5qC355qE5bCR5bm0Xw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261107&amp;x-signature=rLscOpMXzfkKf6u1FOk9%2F8zJtKQ%3D" alt="çŠ¶æ€ç ä¿®æ”¹.gif" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-18">æ ¸å¿ƒå®ç°</h2>
<h3 data-id="heading-19">1. Manifest V3ï¼šä» Popup åˆ° Sidebar</h3>
<p><strong>é…ç½®æ–‡ä»¶ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"manifest_version"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"AI Mock"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"side_panel"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"default_path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"sidepanel.html"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"permissions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"sidePanel"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"storage"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"scripting"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"host_permissions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"&lt;all_urls&gt;"</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æ‰“å¼€ä¾§è¾¹æ ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// background.ts</span>
chrome.<span class="hljs-property">action</span>.<span class="hljs-property">onClicked</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-keyword">async</span> (tab) =&gt; {
  <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">sidePanel</span>.<span class="hljs-title function_">open</span>({ <span class="hljs-attr">windowId</span>: tab.<span class="hljs-property">windowId</span> });
});
</code></pre>
<p><strong>å…³é”®åŒºåˆ«ï¼š</strong></p>
<ul>
<li>Popupï¼šçª—å£å°ã€ç‚¹å‡»å¤–éƒ¨å°±å…³é—­ã€å…³é—­å³é”€æ¯</li>
<li>Sidebarï¼šç©ºé—´å¤§ã€å¯å›ºå®šæ˜¾ç¤ºã€æ•°æ®æŒä¹…åŒ–</li>
</ul>
<hr/>
<h3 data-id="heading-20">2. æ‹¦æˆª fetch / XHRï¼ˆæ”¯æŒå»¶æ—¶å’ŒçŠ¶æ€ç ï¼‰</h3>
<p>åŠ«æŒå®ç°åŸç†å‚è€ƒæˆ‘ä¸Šç¯‡æ–‡ç« ï¼š<a href="https://juejin.cn/post/7570984257666056238" target="_blank" title="https://juejin.cn/post/7570984257666056238">ã€å‰ç«¯æ•ˆç‡å·¥å…·ã€‘å†ä¹Ÿä¸ç”¨ APIfox è”è°ƒï¼é›¶ä¾µå…¥ Mockï¼Œå…¨ç¨‹ä¸æ”¹ä»£ç ã€ä¸å¼€ä»£ç†</a><a href="https://juejin.cn/post/7570984257666056238" target="_blank" title="https://juejin.cn/post/7570984257666056238">juejin.cn/post/757098â€¦</a></p>
<p><strong>æ ¸å¿ƒä»£ç ï¼š</strong></p>
<p><code>injected.ts</code></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> originalFetch = <span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span>;

<span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span> = <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">input, init</span>) {
  <span class="hljs-keyword">const</span> url = <span class="hljs-keyword">typeof</span> input === <span class="hljs-string">'string'</span> ? input : input.<span class="hljs-property">url</span>;
  <span class="hljs-keyword">const</span> method = init?.<span class="hljs-property">method</span> || <span class="hljs-string">'GET'</span>;
  
  <span class="hljs-comment">// æŸ¥æ‰¾åŒ¹é…çš„è§„åˆ™</span>
  <span class="hljs-keyword">const</span> rule = <span class="hljs-keyword">await</span> <span class="hljs-title function_">findMatchedRule</span>(url, method);
  
  <span class="hljs-keyword">if</span> (rule) { 
    <span class="hljs-comment">//  å»¶æ—¶å¤„ç†</span>
    <span class="hljs-keyword">if</span> (rule.<span class="hljs-property">delay</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, rule.<span class="hljs-property">delay</span>));
    }
    
    <span class="hljs-comment">// è¿”å›æŒ‡å®šçŠ¶æ€ç </span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(
      <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(rule.<span class="hljs-property">data</span>),
      {
        <span class="hljs-attr">status</span>: rule.<span class="hljs-property">statusCode</span> || <span class="hljs-number">200</span>,
        <span class="hljs-attr">statusText</span>: <span class="hljs-title function_">getStatusText</span>(rule.<span class="hljs-property">statusCode</span>),
        <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> }
      }
    );
  }
  
  <span class="hljs-comment">// ä¸æ‹¦æˆªï¼Œè°ƒç”¨åŸå§‹ fetch</span>
  <span class="hljs-keyword">return</span> originalFetch.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>);
};

<span class="hljs-comment">// çŠ¶æ€ç æ–‡æœ¬æ˜ å°„</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getStatusText</span>(<span class="hljs-params">code: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-attr">statusTexts</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">number</span>, <span class="hljs-built_in">string</span>&gt; = {
    <span class="hljs-number">200</span>: <span class="hljs-string">'OK'</span>,
    <span class="hljs-number">400</span>: <span class="hljs-string">'Bad Request'</span>,
    <span class="hljs-number">401</span>: <span class="hljs-string">'Unauthorized'</span>,
    <span class="hljs-number">403</span>: <span class="hljs-string">'Forbidden'</span>,
    <span class="hljs-number">404</span>: <span class="hljs-string">'Not Found'</span>,
    <span class="hljs-number">500</span>: <span class="hljs-string">'Internal Server Error'</span>,
    <span class="hljs-number">502</span>: <span class="hljs-string">'Bad Gateway'</span>,
    <span class="hljs-number">503</span>: <span class="hljs-string">'Service Unavailable'</span>,
    <span class="hljs-number">504</span>: <span class="hljs-string">'Gateway Timeout'</span>
  };
  <span class="hljs-keyword">return</span> statusTexts[code] || <span class="hljs-string">'Unknown'</span>;
}
</code></pre>
<p><strong>åŒ¹é…è§„åˆ™ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">findMatchedRule</span>(<span class="hljs-params">url: <span class="hljs-built_in">string</span>, method: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-comment">// ä» storage è·å–è§„åˆ™</span>
  <span class="hljs-keyword">const</span> { rules } = <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">storage</span>.<span class="hljs-property">local</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'rules'</span>);
  
  <span class="hljs-keyword">return</span> rules.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">rule: Rule</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!rule.<span class="hljs-property">enabled</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    
    <span class="hljs-comment">// æ–¹æ³•åŒ¹é…</span>
    <span class="hljs-keyword">if</span> (rule.<span class="hljs-property">method</span> !== <span class="hljs-string">'ALL'</span> &amp;&amp; rule.<span class="hljs-property">method</span> !== method) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
    
    <span class="hljs-comment">// URL åŒ¹é…</span>
    <span class="hljs-keyword">if</span> (rule.<span class="hljs-property">matchMode</span> === <span class="hljs-string">'contains'</span>) {
      <span class="hljs-keyword">return</span> url.<span class="hljs-title function_">includes</span>(rule.<span class="hljs-property">url</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (rule.<span class="hljs-property">matchMode</span> === <span class="hljs-string">'exact'</span>) {
      <span class="hljs-keyword">return</span> url === rule.<span class="hljs-property">url</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (rule.<span class="hljs-property">matchMode</span> === <span class="hljs-string">'regex'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(rule.<span class="hljs-property">url</span>).<span class="hljs-title function_">test</span>(url);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  });
}
</code></pre>
<p><strong>æ”¯æŒçš„åŒ¹é…æ¨¡å¼ï¼š</strong></p>
<ul>
<li><strong>åŒ…å«åŒ¹é…</strong>ï¼š<code>/api/user</code> å¯ä»¥åŒ¹é… <code>/api/user/list</code>ã€<code>/api/user/detail</code></li>
<li><strong>å®Œæ•´åŒ¹é…</strong>ï¼šå¿…é¡»å®Œå…¨ä¸€è‡´</li>
<li><strong>æ­£åˆ™åŒ¹é…</strong>ï¼š<code>/api/user/\d+</code> å¯ä»¥åŒ¹é… <code>/api/user/123</code></li>
</ul>
<hr/>
<h3 data-id="heading-21">3. AI ç”Ÿæˆ Mock æ•°æ®</h3>
<p><strong>Prompt è®¾è®¡ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">buildPrompt</span> = (<span class="hljs-params">userInput: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ Mock æ•°æ®ç”ŸæˆåŠ©æ‰‹ã€‚

ç”¨æˆ·éœ€æ±‚ï¼š<span class="hljs-subst">${userInput}</span>

è¯·ç”Ÿæˆç¬¦åˆä»¥ä¸‹è§„èŒƒçš„ JSON æ•°æ®ï¼š
1. å¿…é¡»æ˜¯æœ‰æ•ˆçš„ JSON æ ¼å¼
2. åŒ…å«å¸¸è§çš„å“åº”ç»“æ„ï¼ˆcode, msg, dataï¼‰
3. æ•°æ®è¦çœŸå®åˆç†ï¼ˆä¸­æ–‡å§“åã€çœŸå®é‚®ç®±æ ¼å¼ç­‰ï¼‰
4. å¦‚æœæ˜¯åˆ—è¡¨ï¼Œç”Ÿæˆ 2-3 æ¡ç¤ºä¾‹æ•°æ®

åªè¿”å› JSONï¼Œä¸è¦æœ‰å…¶ä»–è¯´æ˜æ–‡å­—ã€‚
  `</span>.<span class="hljs-title function_">trim</span>();
};
</code></pre>
<p><strong>ç”Ÿæˆé€»è¾‘ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">generateMockData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!aiPrompt.<span class="hljs-property">value</span>) {
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">warning</span>(<span class="hljs-string">'è¯·è¾“å…¥æ•°æ®æè¿°'</span>);
    <span class="hljs-keyword">return</span>;
  }

  generating.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'YOUR_AI_API_ENDPOINT'</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
      },
      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
        <span class="hljs-attr">prompt</span>: <span class="hljs-title function_">buildPrompt</span>(aiPrompt.<span class="hljs-property">value</span>),
        <span class="hljs-attr">model</span>: <span class="hljs-string">'gpt-3.5-turbo'</span>
      })
    });

    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
    
    <span class="hljs-comment">// è§£æ AI è¿”å›çš„ JSON</span>
    <span class="hljs-keyword">const</span> mockData = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(data.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>].<span class="hljs-property">message</span>.<span class="hljs-property">content</span>);
    
    <span class="hljs-comment">// å¡«å……åˆ°ç¼–è¾‘å™¨</span>
    form.<span class="hljs-property">data</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(mockData, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>);
    
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">'âœ¨ AI ç”ŸæˆæˆåŠŸ'</span>);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç”Ÿæˆå¤±è´¥ï¼š'</span> + error.<span class="hljs-property">message</span>);
  } <span class="hljs-keyword">finally</span> {
    generating.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  }
};
</code></pre>
<hr/>
<h3 data-id="heading-22">4. è§„åˆ™æ•°æ®ç»“æ„</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Rule</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">remark</span>: <span class="hljs-built_in">string</span>;              <span class="hljs-comment">// è§„åˆ™åç§°</span>
  <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>;                 <span class="hljs-comment">// URL åŒ¹é…</span>
  <span class="hljs-attr">matchMode</span>: <span class="hljs-string">'contains'</span> | <span class="hljs-string">'exact'</span> | <span class="hljs-string">'regex'</span>;
  <span class="hljs-attr">method</span>: <span class="hljs-string">'ALL'</span> | <span class="hljs-string">'GET'</span> | <span class="hljs-string">'POST'</span> | <span class="hljs-string">'PUT'</span> | <span class="hljs-string">'DELETE'</span>;
  <span class="hljs-attr">statusCode</span>: <span class="hljs-built_in">number</span>;          <span class="hljs-comment">// ğŸ†• çŠ¶æ€ç ï¼ˆé»˜è®¤ 200ï¼‰</span>
  <span class="hljs-attr">delay</span>: <span class="hljs-built_in">number</span>;               <span class="hljs-comment">// ğŸ†• å»¶æ—¶ï¼ˆæ¯«ç§’ï¼Œé»˜è®¤ 0ï¼‰</span>
  <span class="hljs-attr">data</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;;   <span class="hljs-comment">// Mock æ•°æ®</span>
  <span class="hljs-attr">enabled</span>: <span class="hljs-built_in">boolean</span>;            <span class="hljs-comment">// æ˜¯å¦å¯ç”¨</span>
  <span class="hljs-attr">createdAt</span>: <span class="hljs-built_in">number</span>;           <span class="hljs-comment">// åˆ›å»ºæ—¶é—´</span>
}
</code></pre>
<p><strong>å­˜å‚¨å’Œè¯»å–ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¿å­˜è§„åˆ™</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">saveRules</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">storage</span>.<span class="hljs-property">local</span>.<span class="hljs-title function_">set</span>({ <span class="hljs-attr">rules</span>: rules.<span class="hljs-property">value</span> });
};

<span class="hljs-comment">// åŠ è½½è§„åˆ™</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">loadRules</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> chrome.<span class="hljs-property">storage</span>.<span class="hljs-property">local</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'rules'</span>);
  rules.<span class="hljs-property">value</span> = result.<span class="hljs-property">rules</span> || [];
};

<span class="hljs-comment">// ç›‘å¬å˜åŒ–</span>
chrome.<span class="hljs-property">storage</span>.<span class="hljs-property">onChanged</span>.<span class="hljs-title function_">addListener</span>(<span class="hljs-function">(<span class="hljs-params">changes, areaName</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (areaName === <span class="hljs-string">'local'</span> &amp;&amp; changes.<span class="hljs-property">rules</span>) {
    rules.<span class="hljs-property">value</span> = changes.<span class="hljs-property">rules</span>.<span class="hljs-property">newValue</span>;
  }
});
</code></pre>
<hr/>
<h2 data-id="heading-23">æ€»ç»“</h2>
<p>è¿™æ¬¡é‡æ„ä¸»è¦åšäº†å››ä»¶äº‹ï¼š</p>
<ol>
<li><strong>Sidebar æ›¿ä»£ Popup</strong>ï¼šæ›´å¤§çš„ç©ºé—´ã€æ›´å¥½çš„ä½“éªŒ</li>
<li><strong>AI è‡ªåŠ¨ç”Ÿæˆ</strong>ï¼šä¸€å¥è¯æè¿°å³å¯ç”Ÿæˆ Mock æ•°æ®</li>
<li><strong>å»¶æ—¶è¯·æ±‚</strong>ï¼šæµ‹è¯• Loadingã€éª¨æ¶å±ã€è¶…æ—¶é€»è¾‘</li>
<li><strong>è‡ªå®šä¹‰çŠ¶æ€ç </strong>ï¼šæµ‹è¯•å„ç§å¼‚å¸¸åœºæ™¯</li>
</ol>
<p>è¿™å››ä¸ªåŠŸèƒ½ç»„åˆèµ·æ¥ï¼ŒåŸºæœ¬è¦†ç›–äº†å‰ç«¯å¼€å‘ä¸­ 90% çš„ Mock éœ€æ±‚ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿåœ¨ç­‰åç«¯æ¥å£ï¼Œæˆ–è€…è¢« Popup å°çª—å£æŠ˜ç£¨è¿‡ï¼Œ
çœŸçš„å¯ä»¥è¯•è¯•è¿™ä¸ªæ’ä»¶ï¼Œä¿è¯ä½ ç”¨äº†å°±å›ä¸å»äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[kotlin åç¨‹ï¼š GlobalScope å’Œ Application Scope é€‰æ‹©å’Œä½¿ç”¨ â€”â€” æ–°æ‰‹æŒ‡å—]]></title>    <link>https://juejin.cn/post/7578793960627617818</link>    <guid>https://juejin.cn/post/7578793960627617818</guid>    <pubDate>2025-12-02T06:08:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578793960627617818" data-draft-id="7578793960627552282" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="kotlin åç¨‹ï¼š GlobalScope å’Œ Application Scope é€‰æ‹©å’Œä½¿ç”¨ â€”â€” æ–°æ‰‹æŒ‡å—"/> <meta itemprop="keywords" content="Kotlin,Android Jetpack,Android"/> <meta itemprop="datePublished" content="2025-12-02T06:08:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="QING618"/> <meta itemprop="url" content="https://juejin.cn/user/339115460529117"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            kotlin åç¨‹ï¼š GlobalScope å’Œ Application Scope é€‰æ‹©å’Œä½¿ç”¨ â€”â€” æ–°æ‰‹æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/339115460529117/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    QING618
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T06:08:51.000Z" title="Tue Dec 02 2025 06:08:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åœ¨ Kotlin åç¨‹ä¸­ï¼Œé€‰æ‹©æ­£ç¡®çš„ Scope éå¸¸é‡è¦ã€‚æœ¬æ–‡å°†è¯¦ç»†è§£é‡ŠÂ <code>GlobalScope</code>Â å’Œ Application Scopeï¼ˆé€šå¸¸æŒ‡Â <code>CoroutineScope</code>ï¼‰çš„åŒºåˆ«å’Œä½¿ç”¨åœºæ™¯ã€‚</h2>
<h2 data-id="heading-1">ğŸ“Œ 1.Â GlobalScope</h2>
<h3 data-id="heading-2">ç‰¹ç‚¹ï¼š</h3>
<ul>
<li><strong>å…¨å±€ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šè·Ÿéšæ•´ä¸ªåº”ç”¨è¿›ç¨‹</li>
<li><strong>ä¸ä¼šè‡ªåŠ¨å–æ¶ˆ</strong>ï¼šé™¤éåº”ç”¨è¿›ç¨‹ç»“æŸ</li>
<li><strong>è°¨æ…ä½¿ç”¨</strong>ï¼šå®¹æ˜“é€ æˆå†…å­˜æ³„æ¼</li>
</ul>
<h3 data-id="heading-3">ä½¿ç”¨ç¤ºä¾‹ï¼š</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// âš ï¸ ä¸æ¨è - å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">riskyMethod</span><span class="hljs-params">()</span></span> {
    GlobalScope.launch {
        <span class="hljs-comment">// é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡</span>
        delay(<span class="hljs-number">5000</span>)
        updateUI() <span class="hljs-comment">// å¯èƒ½å·²ç»é”€æ¯çš„ Activity ä¸­è°ƒç”¨</span>
    }
}

<span class="hljs-comment">// éœ€è¦æ‰‹åŠ¨ç®¡ç†</span>
<span class="hljs-keyword">var</span> job: Job? = <span class="hljs-literal">null</span>

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startTask</span><span class="hljs-params">()</span></span> {
    job = GlobalScope.launch {
        <span class="hljs-comment">// æ‰§è¡Œä»»åŠ¡</span>
    }
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">stopTask</span><span class="hljs-params">()</span></span> {
    job?.cancel()
}
</code></pre>
<h2 data-id="heading-4">ğŸ“Œ 2.Â Application Scopeï¼ˆæ¨èï¼‰</h2>
<h3 data-id="heading-5">åˆ›å»ºæ–¹å¼ï¼š</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ–¹å¼1ï¼šè‡ªå®šä¹‰ Application Scope</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplication</span> : <span class="hljs-type">Application</span>() {
    <span class="hljs-comment">// è‡ªå®šä¹‰ Application Scope</span>
    <span class="hljs-keyword">val</span> applicationScope = CoroutineScope(SupervisorJob() + Dispatchers.Default)
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onCreate()
        <span class="hljs-comment">// åˆå§‹åŒ–</span>
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onTerminate</span><span class="hljs-params">()</span></span> {
        applicationScope.cancel()
        <span class="hljs-keyword">super</span>.onTerminate()
    }
}

<span class="hljs-comment">// æ–¹å¼2ï¼šä½¿ç”¨ AndroidX çš„ Lifecycle</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApplication</span> : <span class="hljs-type">Application</span>() {
    <span class="hljs-keyword">val</span> applicationScope = CoroutineScope(SupervisorJob() + Dispatchers.Main.immediate)
}
</code></pre>
<h2 data-id="heading-6">ğŸ“Œ 3.Â ViewModel Scope</h2>
<p>åœ¨ Android ä¸­æ›´æ¨èä½¿ç”¨ ViewModel çš„ scopeï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyViewModel</span> : <span class="hljs-type">ViewModel</span>() {
    
    <span class="hljs-comment">// ViewModel è‡ªå¸¦ viewModelScope</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchData</span><span class="hljs-params">()</span></span> {
        viewModelScope.launch {
            <span class="hljs-comment">// è‡ªåŠ¨è·Ÿéš ViewModel ç”Ÿå‘½å‘¨æœŸ</span>
            <span class="hljs-keyword">val</span> <span class="hljs-keyword">data</span> = repository.getData()
            _uiState.value = <span class="hljs-keyword">data</span>
        }
    }
    
    <span class="hljs-comment">// æˆ–è€…åˆ›å»ºè‡ªå®šä¹‰ scope</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> customScope = CoroutineScope(
        SupervisorJob() + Dispatchers.IO
    )
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCleared</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onCleared()
        customScope.cancel()
    }
}
</code></pre>
<h2 data-id="heading-7">ğŸ“Œ 4.Â Lifecycle Scope</h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        
        <span class="hljs-comment">// lifecycleScope è‡ªåŠ¨è·Ÿéšç”Ÿå‘½å‘¨æœŸ</span>
        lifecycleScope.launch {
            repeatOnLifecycle(Lifecycle.State.STARTED) {
                <span class="hljs-comment">// åªåœ¨ STARTED çŠ¶æ€æ‰§è¡Œ</span>
                collectData()
            }
        }
        
        <span class="hljs-comment">// æˆ–è€…ä½¿ç”¨ launchWhenStarted</span>
        lifecycleScope.launchWhenStarted {
            <span class="hljs-comment">// å½“ Activity è¿›å…¥ STARTED çŠ¶æ€æ—¶æ¢å¤</span>
        }
    }
}
</code></pre>
<h2 data-id="heading-8">ğŸ“Œ 5.Â å¯¹æ¯”è¡¨æ ¼</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th>GlobalScope</th><th>Application Scope</th><th>ViewModel Scope</th><th>Lifecycle Scope</th></tr></thead><tbody><tr><td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td><td>åº”ç”¨è¿›ç¨‹</td><td>è‡ªå®šä¹‰æ§åˆ¶</td><td>ViewModel ç”Ÿå‘½å‘¨æœŸ</td><td>Activity/Fragment ç”Ÿå‘½å‘¨æœŸ</td></tr><tr><td><strong>è‡ªåŠ¨å–æ¶ˆ</strong></td><td>âŒ å¦</td><td>âœ… å¯è‡ªå®šä¹‰</td><td>âœ… æ˜¯</td><td>âœ… æ˜¯</td></tr><tr><td><strong>æ¨èä½¿ç”¨</strong></td><td>âŒ å¾ˆå°‘</td><td>âœ… åå°ä»»åŠ¡</td><td>âœ… ViewModel ä¸­</td><td>âœ… UI ç›¸å…³</td></tr><tr><td><strong>å†…å­˜å®‰å…¨</strong></td><td>âŒ å±é™©</td><td>âœ… å¯æ§</td><td>âœ… å®‰å…¨</td><td>âœ… å®‰å…¨</td></tr></tbody></table>
<h2 data-id="heading-9">ğŸ“Œ 6.Â æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-10">âœ… æ¨èåšæ³•ï¼š</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. åœ¨ Application ä¸­åˆ›å»ºå…¨å±€ scope</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyApp</span> : <span class="hljs-type">Application</span>() {
    <span class="hljs-keyword">val</span> appScope = CoroutineScope(SupervisorJob() + Dispatchers.IO)
    
    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> {
        <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> instance: MyApp
            <span class="hljs-keyword">private</span> <span class="hljs-keyword">set</span>
    }
    
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onCreate()
        instance = <span class="hljs-keyword">this</span>
    }
}

<span class="hljs-comment">// 2. ä½¿ç”¨ ViewModel scopeï¼ˆé¦–é€‰ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserViewModel</span>(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> userRepository: UserRepository
) : ViewModel() {
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadUser</span><span class="hljs-params">(userId: <span class="hljs-type">String</span>)</span></span> {
        viewModelScope.launch {
            _loading.value = <span class="hljs-literal">true</span>
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">val</span> user = userRepository.getUser(userId)
                _user.value = user
            } <span class="hljs-keyword">catch</span> (e: Exception) {
                _error.value = e.message
            } <span class="hljs-keyword">finally</span> {
                _loading.value = <span class="hljs-literal">false</span>
            }
        }
    }
}

<span class="hljs-comment">// 3. éœ€è¦å…¨å±€åå°ä»»åŠ¡æ—¶</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AnalyticsService</span>(context: Context) {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> scope = CoroutineScope(SupervisorJob() + Dispatchers.IO)
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">logEvent</span><span class="hljs-params">(event: <span class="hljs-type">String</span>)</span></span> {
        scope.launch {
            <span class="hljs-comment">// å‘é€åˆ†æäº‹ä»¶åˆ°æœåŠ¡å™¨</span>
            sendToServer(event)
        }
    }
    
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">cleanup</span><span class="hljs-params">()</span></span> {
        scope.cancel()
    }
}
</code></pre>
<h2 data-id="heading-11">ğŸ“Œ 7.Â æ€»ç»“å»ºè®®</h2>
<h4 data-id="heading-12">1). å‡ ä¹ä¸è¦ä½¿ç”¨Â <code>GlobalScope</code>ï¼Œé™¤éï¼š</h4>
<ul>
<li>ç¼–å†™æµ‹è¯•ä»£ç </li>
<li>ç¼–å†™ä¸€æ¬¡æ€§è„šæœ¬</li>
<li>æ˜ç¡®çŸ¥é“ä»»åŠ¡éœ€è¦ä¸€ç›´è¿è¡Œåˆ°åº”ç”¨ç»“æŸ</li>
</ul>
<h4 data-id="heading-13">2). æŒ‰å±‚æ¬¡é€‰æ‹© Scope:</h4>
<ul>
<li><strong>UI æ›´æ–°</strong> â†’ lifecycleScope æˆ– viewModelScope</li>
<li><strong>ä¸šåŠ¡é€»è¾‘</strong> â†’ viewModelScope</li>
<li><strong>å…¨å±€åå°ä»»åŠ¡</strong> â†’ Application Scope</li>
<li><strong>æ•°æ®åº“/ç½‘ç»œ</strong> â†’ IO Dispatcher + åˆé€‚çš„ Scope</li>
</ul>
<h4 data-id="heading-14">3).éµå¾ªåŸåˆ™ï¼š</h4>
<ul>
<li><strong>ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥</strong>ï¼šåç¨‹åº”è¯¥èƒ½è¢«æ­£ç¡®å–æ¶ˆ</li>
<li><strong>ç»“æ„åŒ–å¹¶å‘</strong>ï¼šä½¿ç”¨çˆ¶-å­åç¨‹å…³ç³»</li>
<li><strong>å¼‚å¸¸å¤„ç†</strong>ï¼šä½¿ç”¨Â <code>SupervisorJob</code>Â é˜²æ­¢ä¸€ä¸ªåç¨‹å¤±è´¥å½±å“å…¶ä»–</li>
</ul>
<p><strong>åç¨‹åˆ›å»ºçš„æˆæœ¬å¾ˆä½ï¼Œä½†å†…å­˜æ³„æ¼çš„æˆæœ¬å¾ˆé«˜</strong>ã€‚é€‰æ‹©åˆé€‚çš„ Scope æ˜¯ç¼–å†™å¥å£®åç¨‹ä»£ç çš„å…³é”®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å–ä»£Navicatï¼å…¨æ–°ä¸€ä»£æ•°æ®åº“ç®¡ç†å·¥å…·æ¥äº†ï¼Œè¶…çº§æ™ºèƒ½ï¼]]></title>    <link>https://juejin.cn/post/7578781397118418990</link>    <guid>https://juejin.cn/post/7578781397118418990</guid>    <pubDate>2025-12-02T06:12:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578781397118418990" data-draft-id="7578803751609909298" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å–ä»£Navicatï¼å…¨æ–°ä¸€ä»£æ•°æ®åº“ç®¡ç†å·¥å…·æ¥äº†ï¼Œè¶…çº§æ™ºèƒ½ï¼"/> <meta itemprop="keywords" content="åç«¯,Java,MySQL"/> <meta itemprop="datePublished" content="2025-12-02T06:12:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MacroZheng"/> <meta itemprop="url" content="https://juejin.cn/user/958429871749192"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å–ä»£Navicatï¼å…¨æ–°ä¸€ä»£æ•°æ®åº“ç®¡ç†å·¥å…·æ¥äº†ï¼Œè¶…çº§æ™ºèƒ½ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/958429871749192/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MacroZheng
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T06:12:49.000Z" title="Tue Dec 02 2025 06:12:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä½œä¸ºåç«¯å¼€å‘ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦ä½¿ç”¨æ•°æ®åº“ç®¡ç†å·¥å…·æ¥æ“ä½œæ•°æ®åº“ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æœ‰Navicatã€‚ä»Šå¤©ç»™å¤§å®¶åˆ†äº«ä¸€æ¬¾æ¯”å®ƒç•Œé¢æ›´ç°ä»£åŒ–ï¼Œæç¤ºæ›´æ™ºèƒ½çš„æ•°æ®åº“ç®¡ç†å·¥å…·SQLarkï¼Œé›†æˆAIåŠŸèƒ½å¯ä»¥å®ç°æŠ¥é”™åˆ†æï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï¼</p>
</blockquote>
<h2 data-id="heading-0">SQLarkç®€ä»‹</h2>
<p>SQLarkæ˜¯ä¸€æ¬¾é¢å‘ä¿¡åˆ›åº”ç”¨å¼€å‘è€…çš„æ•°æ®åº“ç®¡ç†å·¥å…·ï¼Œæ”¯æŒOracleã€MySQLã€PostgreSQLã€è¾¾æ¢¦ç­‰æ•°æ®åº“ã€‚</p>
<p>SQLarkçš„ä¸»è¦åŠŸèƒ½å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ™ºèƒ½çš„SQLè¡¥å…¨ï¼šæ”¯æŒå¯¹SQLä¸­å…³é”®è¯ã€è¡¨åã€å­—æ®µåç­‰çš„æ™ºèƒ½è¡¥å…¨ï¼Œèƒ½ä¸€é”®å®ŒæˆINSERTè¯­å¥ä¸­æ‰€æœ‰å­—æ®µçš„è¾“å…¥ã€‚</li>
<li>å…¨é¢çš„æ•°æ®æŸ¥çœ‹åŠŸèƒ½ï¼šæ”¯æŒè¡¨/è§†å›¾/ç‰©åŒ–è§†å›¾æ•°æ®çš„è¡¨æ ¼å½¢å¼æŸ¥çœ‹ï¼Œå¯¹<code>JSON/XML/å¤§å­—æ®µ</code>æ•°æ®èƒ½è¿›è¡Œä¼˜åŒ–å±•ç¤ºã€‚</li>
<li>æ–¹ä¾¿çš„æ•°æ®ç”ŸæˆåŠŸèƒ½ï¼šæ”¯æŒå¿«é€Ÿç”Ÿæˆåƒä¸‡çº§è¡¨æ•°æ®ï¼Œèƒ½è‡ªåŠ¨åŒ¹é…æ•°æ®è§„åˆ™ã€‚</li>
<li>å¤šç§æ ¼å¼çš„å¯¼å…¥å¯¼å‡ºï¼šæ”¯æŒå¯¹<code>xlsx/xls/csv/txt/json/xml</code>æ ¼å¼æ–‡ä»¶çš„æ•°æ®è¿›è¡Œå¯¼å…¥å¯¼å‡ºæ“ä½œã€‚</li>
<li>å°ç™¾çµAIåŠŸèƒ½ï¼šèƒ½æä¾›ä»£ç è§£é‡Šã€æŠ¥é”™åˆ†æã€ä»£ç ç”Ÿæˆã€SQLä¼˜åŒ–ã€è¾¾æ¢¦çŸ¥è¯†æ£€ç´¢ç­‰åŠŸèƒ½ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯SQLarkä½¿ç”¨è¿‡ç¨‹ä¸­çš„æ•ˆæœå›¾ï¼Œç•Œé¢è¿˜æ˜¯æŒºç‚«é…·çš„ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aae945cff6dd4ac1a394bd2dfdc0af1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=kxQ90CvV7DmXS2t2O4qZiHM%2FXco%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">å®‰è£…</h2>
<blockquote>
<p>SQLarkå…·æœ‰å¤šç§å®¢æˆ·ç«¯ï¼Œæ”¯æŒWindowsã€macOSã€Linuxç¯å¢ƒï¼Œå¤§å®¶å¯ä»¥é€‰æ‹©åˆé€‚çš„å®¢æˆ·ç«¯è¿›è¡Œä¸‹è½½ã€‚</p>
</blockquote>
<ul>
<li>æˆ‘ä»¬å¯ä»¥ä»SQLarkçš„å®˜ç½‘ä¸‹è½½å®‰è£…åŒ…ï¼Œè¿™é‡Œä»¥Windowsç¯å¢ƒä¸ºä¾‹ï¼Œä¸‹è½½åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.sqlark.com" target="_blank" title="https://www.sqlark.com" ref="nofollow noopener noreferrer">www.sqlark.com</a></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c77844e21924ef994cab919aed252e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=3Q6wOJss393fPS7vaciH0eJRV58%3D" alt="" loading="lazy"/></p>
<ul>
<li>ä¸‹è½½å®Œæˆåè¿›è¡Œè§£å‹ï¼Œè§£å‹å®ŒæˆååŒå‡»<code>SQLarkLaunch.exe</code>å³å¯ä½¿ç”¨ï¼Œæ‰“å¼€åç•Œé¢å¦‚ä¸‹ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ab0d7084a31e4b0ea09347eb65482dc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=HOyX6YBcRzMCdn7Dvai1TV7I%2BeE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">ä½¿ç”¨</h2>
<h3 data-id="heading-3">SQLç¼–è¾‘å™¨</h3>
<ul>
<li>SQLarkçš„æç¤ºéå¸¸æ™ºèƒ½ï¼Œæ”¯æŒå¯¹å…³é”®è¯ã€æ¨¡å¼åã€è¡¨åã€è¡¨åˆ«åã€å­—æ®µåç­‰å¯¹è±¡åçš„è¡¥å…¨ï¼›</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b74ff73a718c4be881218115c7de4d56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=Icdevpt3JScajvVoK3vDX9EbGXI%3D" alt="" loading="lazy"/></p>
<ul>
<li>åœ¨ç¼–å†™INSERTè¯­å¥æ—¶ï¼Œè¾“å…¥<code>()</code>ä¼šæç¤ºæ‰€æœ‰å­—æ®µï¼Œé€‰æ‹©åå¯ä»¥ä¸€é”®å®Œæˆæ‰€æœ‰å­—æ®µåçš„è¾“å…¥ï¼›</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/717703079b2a424d811b3237286e8bb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=OQ5A5O3%2FZ1Jab06hE0OfyJfpDzQ%3D" alt="" loading="lazy"/></p>
<ul>
<li>åœ¨<code>é…ç½®-&gt;é¦–é€‰é¡¹-&gt;å¸¸ç”¨ä»£ç æ®µ</code>åŠŸèƒ½ä¸­ï¼Œå¯ä»¥è‡ªå®šä¹‰ä»£ç æ¨¡ç‰ˆï¼Œä¾‹å¦‚è¿™é‡Œé…ç½®çš„è¾“å…¥<code>upd</code>å¯ä»¥ç›´æ¥ç”ŸæˆUPDATEè¯­å¥ï¼›</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9df65d5ee8a0448b9bf723238aeb298b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=8Sg%2F4w42D22GyVoxJ48LqxRUkNs%3D" alt="" loading="lazy"/></p>
<ul>
<li>åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å¯ä»¥ä½¿ç”¨<code>Tab</code>é”®æ¥è·³è·ƒåˆ°ä¸‹ä¸€ä¸ªè¾“å…¥ç‚¹ï¼Œæœ‰ç‚¹ç±»ä¼¼IDEAé‡Œçš„æ“ä½œï¼›</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ac726d249c845a080cc826257f36f4a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=Bh3kw5JbHZoSbXm%2Bq6u90E4Wf8A%3D" alt="" loading="lazy"/></p>
<ul>
<li>é€šè¿‡<code>Ctrl+é¼ æ ‡å·¦é”®</code>å¯ä»¥è·³è½¬è‡³è¡¨ç»“æ„è®¾è®¡çª—å£ï¼›</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/364125ce9e45475ea38942282318ac57~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=KDGVVLUnjojHnOYBDQlPUmVsl6M%3D" alt="" loading="lazy"/></p>
<ul>
<li>é€‰æ‹©è¡¨ååï¼Œé€šè¿‡<code>F4é”®</code>å¯è·³è½¬è‡³è¡¨æ•°æ®æµè§ˆçª—å£ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea1da741340647cfa08dba0788386c17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=e0HifVkhhMpz4xvfUeid4K7%2FDVQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">æ•°æ®æŸ¥çœ‹</h3>
<ul>
<li>SQLarkçš„æ•°æ®å±•ç¤ºåŠŸèƒ½éå¸¸å…¨é¢ï¼Œä¸€äº›æ•°æ®æ¯”è¾ƒå¤šçš„åˆ—ï¼Œå¯ä»¥é€šè¿‡<code>æŸ¥çœ‹</code>åŠŸèƒ½åœ¨å³ä¾§çª—å£ä¸­æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼›</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c55767e75b2f4ea189144f5fd6bb59c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=JzXZhmKozZoBSdeyFgw8YJO2bVE%3D" alt="" loading="lazy"/></p>
<ul>
<li>æ”¯æŒåœ¨æ•°æ®è¡¨çš„è¡¨å¤´ä¸­æ˜¾ç¤ºå­—æ®µç±»å‹å’Œæ³¨é‡Šï¼›</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14269771ee86451ebeb8a86284eb391f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=WJo3OH4NjwcM1R3m%2FG2TXUNW%2FnA%3D" alt="" loading="lazy"/></p>
<ul>
<li>å¯ä»¥è‡ªåŠ¨è¯†åˆ«JSONæˆ–XMLæ ¼å¼æ•°æ®å¹¶è¿›è¡Œæ ¼å¼åŒ–å±•ç¤ºï¼›</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17a923f6a3444136a678e1585f7ec870~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=aoAYXPFAX6pxCNWFCByHGUpmGZQ%3D" alt="" loading="lazy"/></p>
<ul>
<li>å¯¹äº<code>BLOB/CLOB</code>å¤§å­—æ®µç±»å‹æ•°æ®ï¼Œå¯é€šè¿‡åŒå‡»å•å…ƒæ ¼æŸ¥çœ‹å®Œæ•´å†…å®¹ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bcf18644f8d5476cbb788abeac7c647c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=CWWJtrh7P%2F1wwla4I9RtyClZ3p8%3D" alt="" loading="lazy"/></p>
<ul>
<li>æ”¯æŒé€šè¿‡æ¡ä»¶å¯¹æ•°æ®è¿›è¡Œç­›é€‰ï¼Œå¹¶å¯ä»¥ç”ŸæˆSQLé¢„è§ˆï¼›</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ad51494a3fc4b3eac370176547ac84c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=Pg3ecEGlkWjjA2Z4phQ1hnUYSAs%3D" alt="" loading="lazy"/></p>
<ul>
<li>æ”¯æŒé€šè¿‡æ¡ä»¶å¯¹æ•°æ®è¿›è¡Œæ’åºã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e7588bef9914ec3bb9832633d2289c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=GGz6fg909rYaonwLu11bXoUT15Y%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">æ•°æ®ç”Ÿæˆ</h3>
<ul>
<li>é€šè¿‡SQLarkèƒ½å¿«é€Ÿç”Ÿæˆä»¿çœŸè¡¨æ•°æ®ï¼Œåº”ç”¨åœ¨å¼€å‘æµ‹è¯•ç¯èŠ‚ä¸­ï¼Œç‚¹å‡»é¡¶éƒ¨<code>æ•°æ®ç”Ÿæˆ</code>æŒ‰é’®ï¼Œç„¶åé€‰æ‹©å¥½è¡¨å³å¯ç”Ÿæˆï¼›</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bab2f9bc84b74c78bd204e94d70c1aa4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=pMQd%2BFfU495Nz1X8m%2BevsNwyURk%3D" alt="" loading="lazy"/></p>
<ul>
<li>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°SQLarkèƒ½åŸºäºåˆ—åã€åˆ—æ³¨é‡Šç­‰ä¿¡æ¯ï¼Œè‡ªåŠ¨åŒ¹é…æ•°æ®ç”Ÿæˆè§„åˆ™ï¼Œå¯¹äºè‡ªåŠ¨ç”Ÿæˆä¸å¤ªç¬¦åˆçš„è§„åˆ™ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªè¡Œå®šä¹‰ï¼ŒSQLarkä¸­å†…ç½®äº†å¤šç§è§„åˆ™å¯ä¾›é€‰æ‹©ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03591d72a37b4e59ae7732612678516c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=bDVB9pcpSfYGcFSDHK008v3fYGk%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">å¯¼å…¥å¯¼å‡º</h3>
<ul>
<li>ç‚¹å‡»<code>å¯¼å‡º</code>æŒ‰é’®ï¼Œå¯ä»¥å°†æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®å¯¼å‡ºåˆ°å¤–éƒ¨æ–‡ä»¶ä¸­ï¼Œæ”¯æŒå¤šç§æ ¼å¼çš„æ–‡ä»¶ï¼›</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd6ea0685f9e4a3f983502472e8db1c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=L1gs7Hzvjk0zSfMKpdklzDxMHtQ%3D" alt="" loading="lazy"/></p>
<ul>
<li>ç‚¹å‡»<code>å¯¼å…¥</code>æŒ‰é’®ï¼Œå¯ä»¥å°†å¤–éƒ¨æ•°æ®æ–‡ä»¶å¯¼å…¥åˆ°æ•°æ®åº“ä¸­ï¼Œä¹Ÿæ”¯æŒå¤šç§æ ¼å¼çš„æ–‡ä»¶ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78c47fa636bb4b1eb8c4c4c6c200071a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=m3KhhIHpKkIPSFgkjXzCoCPd9Bs%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">å°ç™¾çµAI</h3>
<ul>
<li>ç‚¹å‡»å³ä¸Šè§’<code>å°ç™¾çµAI</code>æŒ‰é’®å¯ä»¥æ‰“å¼€AIåŠ©æ‰‹ï¼Œå†…ç½®äº†Qwen3å’ŒDeepSeekå¤§æ¨¡å‹ï¼Œå¯æŒ‰éœ€çµæ´»åˆ‡æ¢ï¼›</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3472990ef218460a9525c393adc33744~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=fb4ns8%2B%2BJhPCNF9xyMc9V5oKamo%3D" alt="" loading="lazy"/></p>
<ul>
<li>å¯¹äºå¤æ‚SQLï¼Œæˆ‘ä»¬é€‰ä¸­ä»£ç åï¼Œå³é”®é€‰æ‹©<code>é—®AI</code>ï¼Œå°ç™¾çµAIå°±ä¼šä¸ºæˆ‘ä»¬è§£é‡Šä»£ç çš„æ„ä¹‰äº†ï¼›</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f4879d5250d42f99509faf934c9481e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=dVqlyLYw9KheHUwX%2FFgLalPNDwk%3D" alt="" loading="lazy"/></p>
<ul>
<li>å½“æˆ‘ä»¬è¿è¡ŒSQLå‡ºé”™æ—¶ï¼Œé€‰æ‹©é”™è¯¯ä¿¡æ¯å³ä¾§çš„<code>é—®AI</code>ï¼Œå³å¯è®©å°ç™¾çµAIä¸ºæˆ‘ä»¬æä¾›è§£å†³æ–¹æ¡ˆäº†ï¼Œè¿˜æ˜¯æŒºæ–¹ä¾¿çš„ï¼</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/481926e08fa045cc9df450abf966e15d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFjcm9aaGVuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260768&amp;x-signature=BAgYLR89W7eqwXf7bgBZ05Dsq%2FI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>ä»Šå¤©ç»™å¤§å®¶åˆ†äº«äº†ä¸€æ¬¾ç°ä»£åŒ–çš„æ•°æ®åº“ç®¡ç†å·¥å…·SQLarkï¼Œå®ƒçš„SQLç¼–è¾‘å™¨æç¤ºéå¸¸å…¨é¢ï¼Œæ•°æ®å±•ç¤ºåŠŸèƒ½ä¹Ÿå¾ˆä¼˜ç§€ï¼Œå°ç™¾çµAIçš„ä»£ç è§£é‡Šå’Œé”™è¯¯åˆ†æåŠŸèƒ½ç”¨èµ·æ¥ä¹ŸæŒºæ–¹ä¾¿ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥å°è¯•ä¸‹å®ƒï¼</p>
<h2 data-id="heading-9">ä¸‹è½½åœ°å€</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.sqlark.com" target="_blank" title="https://www.sqlark.com" ref="nofollow noopener noreferrer">www.sqlark.com</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯ä¸‹åˆèŒ¶ï¼çœ‹çœ‹ç‚«é…·çš„åŠ¨ç”»ï¼Œè½»æ¾ä¸€ä¸‹ï¼]]></title>    <link>https://juejin.cn/post/7578917474658189363</link>    <guid>https://juejin.cn/post/7578917474658189363</guid>    <pubDate>2025-12-02T06:28:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578917474658189363" data-draft-id="7578803751609991218" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯ä¸‹åˆèŒ¶ï¼çœ‹çœ‹ç‚«é…·çš„åŠ¨ç”»ï¼Œè½»æ¾ä¸€ä¸‹ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,åŠ¨æ•ˆ"/> <meta itemprop="datePublished" content="2025-12-02T06:28:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿç¥¥_æˆéƒ½"/> <meta itemprop="url" content="https://juejin.cn/user/96412752684744"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯ä¸‹åˆèŒ¶ï¼çœ‹çœ‹ç‚«é…·çš„åŠ¨ç”»ï¼Œè½»æ¾ä¸€ä¸‹ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/96412752684744/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿç¥¥_æˆéƒ½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T06:28:01.000Z" title="Tue Dec 02 2025 06:28:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¹‹å‰è¯´äº†ä¼šæ›´æ–° gsap åŠ¨ç”»æ•™ç¨‹ï¼Œæˆ‘ä»¬å…ˆæ¥ä¸ªå¼€èƒƒèœï¼Œçœ‹çœ‹æœ€è¿‘ç»ƒä¹ çš„ demo æ˜¯å¦æœ‰åŒå­¦æ„¿æ„ä¸€èµ·å­¦ä¹ å’Œäº¤æµã€‚</p>
<p>æ—¢ç„¶ä½ éƒ½ç‚¹è¿›æ¥çœ‹å¸–å­äº†ï¼Œæ¥éƒ½æ¥äº†ï¼Œç•™ä¸‹æ¥å–ä¸ªå°èŒ¶ï¼Œçœ‹ä¸ªå°åŠ¨ç”»å†èµ°å‘—ï¼</p>
<h2 data-id="heading-1">è§†é¢‘æ»šåŠ¨åŠ¨ç”»</h2>
<p>è§†é¢‘è¢«åˆ‡ä¸ºäº†åŠ¨ç”»å¸§ï¼Œéšç€æ»šåŠ¨é¼ æ ‡æ»šåŠ¨æˆ–è€…è§¦æ§æ¿æ»‘åŠ¨è€Œä¸æ–­æ’­æ”¾è§†é¢‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/711ac59d28a0477db368a498d4e23b9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261680&amp;x-signature=Tvvu1V2r4d4gJKvV%2Fd%2BvuIIY8Jk%3D" alt="video1.gif" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2Fanimation%2Fgsap%2Fexample%2Fvideo%2Fexample1" target="_blank" title="https://www.frontlight.tech/animation/gsap/example/video/example1" ref="nofollow noopener noreferrer">ä»¥ä¸Šæ•ˆæœåœ¨çº¿åœ°å€ - å›½å†…</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui%2Ftree%2Fmain%2Fapps%2Freact-pc-website%2Fapp%2Fanimation%2Fgsap%2Fexample%2Fvideo%2Fexample1" target="_blank" title="https://github.com/lio-mengxiang/t-ui/tree/main/apps/react-pc-website/app/animation/gsap/example/video/example1" ref="nofollow noopener noreferrer">github æºç åœ°å€ï¼ˆæ„Ÿè°¢ç»™ä¸ª starï¼‰</a></p>
<h2 data-id="heading-2">å›¾ç‰‡æ»šåŠ¨åŠ¨ç”»</h2>
<p>å›¾ç‰‡éšç€æ»šåŠ¨é¼ æ ‡æ»šåŠ¨æˆ–è€…è§¦æ§æ¿æ»‘åŠ¨è€Œä¸æ–­å˜åŒ–ï¼Œç¬¬äºŒå±ä¼šæœ‰ä¸€å®šçš„è§†å·®æ»šåŠ¨çš„æ•ˆæœã€‚</p>
<p>ä¸»è¦æ¶‰åŠ clip-path å±æ€§çš„å˜åŒ–ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88f88152c7a74dbca13ac5434bebfc0e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261680&amp;x-signature=qmtVkT8Mr94sNlag8GJ0oL9Hh4U%3D" alt="clip-path1.gif" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2Fanimation%2Fgsap%2Fexample%2Fclip-path%2Fexample1" target="_blank" title="https://www.frontlight.tech/animation/gsap/example/clip-path/example1" ref="nofollow noopener noreferrer">ä»¥ä¸Šæ•ˆæœåœ¨çº¿åœ°å€ - å›½å†…</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui%2Ftree%2Fmain%2Fapps%2Freact-pc-website%2Fapp%2Fanimation%2Fgsap%2Fexample%2Fclip-path%2Fexample1" target="_blank" title="https://github.com/lio-mengxiang/t-ui/tree/main/apps/react-pc-website/app/animation/gsap/example/clip-path/example1" ref="nofollow noopener noreferrer">github æºç åœ°å€ï¼ˆæ„Ÿè°¢ç»™ä¸ª starï¼‰</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/37f241159bbd4c3189e14cd977a58317~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261680&amp;x-signature=ZoP%2FSnX%2FDZ54alN4le9pToSCm3w%3D" alt="clip-path2.gif" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2Fanimation%2Fgsap%2Fexample%2Fclip-path%2Fexample2" target="_blank" title="https://www.frontlight.tech/animation/gsap/example/clip-path/example2" ref="nofollow noopener noreferrer">ä»¥ä¸Šæ•ˆæœåœ¨çº¿åœ°å€ - å›½å†…</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui%2Ftree%2Fmain%2Fapps%2Freact-pc-website%2Fapp%2Fanimation%2Fgsap%2Fexample%2Fclip-path%2Fexample2" target="_blank" title="https://github.com/lio-mengxiang/t-ui/tree/main/apps/react-pc-website/app/animation/gsap/example/clip-path/example2" ref="nofollow noopener noreferrer">github æºç åœ°å€ï¼ˆæ„Ÿè°¢ç»™ä¸ª starï¼‰</a></p>
<h2 data-id="heading-3">transform åŠ¨ç”»</h2>
<p>å›¾ç‰‡éšç€æ»šåŠ¨é¼ æ ‡æ»šåŠ¨æˆ–è€…è§¦æ§æ¿æ»‘åŠ¨è€Œä¸æ–­å˜åŒ–ï¼Œä¸»è¦æ˜¯ transform å±æ€§ä¸Šçš„å˜åŒ–ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dee9adeb63194650a2a8504e3559a16d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261680&amp;x-signature=fw0Rqg23dQwiPMxoZ%2FdrU6qA75I%3D" alt="transform1.gif" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2Fanimation%2Fgsap%2Fexample%2Ftransform%2Fexample1" target="_blank" title="https://www.frontlight.tech/animation/gsap/example/transform/example1" ref="nofollow noopener noreferrer">ä»¥ä¸Šæ•ˆæœåœ¨çº¿åœ°å€ - å›½å†…</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui%2Ftree%2Fmain%2Fapps%2Freact-pc-website%2Fapp%2Fanimation%2Fgsap%2Fexample%2Ftransform%2Fexample1" target="_blank" title="https://github.com/lio-mengxiang/t-ui/tree/main/apps/react-pc-website/app/animation/gsap/example/transform/example1" ref="nofollow noopener noreferrer">github æºç åœ°å€ï¼ˆæ„Ÿè°¢ç»™ä¸ª starï¼‰</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9395b4e5134d48de8fe6bbdc44384b2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5a2f56WlX-aIkOmDvQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261680&amp;x-signature=l7He6BXfAFw86CBv1ARVzkLZ8I8%3D" alt="transform2.gif" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2Fanimation%2Fgsap%2Fexample%2Ftransform%2Fexample3" target="_blank" title="https://www.frontlight.tech/animation/gsap/example/transform/example3" ref="nofollow noopener noreferrer">ä»¥ä¸Šæ•ˆæœåœ¨çº¿åœ°å€ - å›½å†…</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui%2Ftree%2Fmain%2Fapps%2Freact-pc-website%2Fapp%2Fanimation%2Fgsap%2Fexample%2Ftransform%2Fexample3" target="_blank" title="https://github.com/lio-mengxiang/t-ui/tree/main/apps/react-pc-website/app/animation/gsap/example/transform/example3" ref="nofollow noopener noreferrer">github æºç åœ°å€ï¼ˆæ„Ÿè°¢ç»™ä¸ª starï¼‰</a></p>
<h2 data-id="heading-4">æ¬¢è¿åŠ å…¥äº¤æµç¾¤</h2>
<p>æ¬¢è¿åŠ å…¥äº¤æµç¾¤ä¸€èµ·è¿›æ­¥ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Prometheus + Grafana ç›‘æ§ç³»ç»Ÿæ­å»ºå®æˆ˜ï¼šä»é›¶åˆ°ç”Ÿäº§å¯ç”¨]]></title>    <link>https://juejin.cn/post/7578820376999952435</link>    <guid>https://juejin.cn/post/7578820376999952435</guid>    <pubDate>2025-12-02T06:35:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578820376999952435" data-draft-id="7578820376999919667" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Prometheus + Grafana ç›‘æ§ç³»ç»Ÿæ­å»ºå®æˆ˜ï¼šä»é›¶åˆ°ç”Ÿäº§å¯ç”¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T06:35:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å˜»å“ˆbaby"/> <meta itemprop="url" content="https://juejin.cn/user/485305583405066"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Prometheus + Grafana ç›‘æ§ç³»ç»Ÿæ­å»ºå®æˆ˜ï¼šä»é›¶åˆ°ç”Ÿäº§å¯ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/485305583405066/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å˜»å“ˆbaby
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T06:35:19.000Z" title="Tue Dec 02 2025 06:35:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¸Šä¸ªæœˆå…¬å¸æœåŠ¡å™¨åŠå¤œæŒ‚äº†ï¼Œç¬¬äºŒå¤©æ—©ä¸Šæ‰å‘ç°ã€‚è€æ¿é—®ï¼šä¸ºä»€ä¹ˆæ²¡æœ‰ç›‘æ§ï¼Ÿ</p>
<p>å¥½å§ï¼Œæ˜¯æ—¶å€™æä¸€å¥—ç›‘æ§ç³»ç»Ÿäº†ã€‚</p>
<p>è°ƒç ”äº†ä¸€åœˆï¼Œæœ€ç»ˆé€‰äº† <strong>Prometheus + Grafana</strong> è¿™å¥—ç»„åˆï¼š</p>
<ul>
<li>Prometheusï¼šè´Ÿè´£é‡‡é›†å’Œå­˜å‚¨æŒ‡æ ‡æ•°æ®</li>
<li>Grafanaï¼šè´Ÿè´£å¯è§†åŒ–å±•ç¤º</li>
<li>å¼€æºå…è´¹ï¼Œç¤¾åŒºæ´»è·ƒ</li>
<li>äº‘åŸç”Ÿæ ‡é…ï¼ŒK8såŸç”Ÿæ”¯æŒ</li>
</ul>
<p>è¿™ç¯‡æ–‡ç« è®°å½•å®Œæ•´çš„æ­å»ºè¿‡ç¨‹ï¼ŒåŒ…æ‹¬è¸©è¿‡çš„å‘ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€æ¶æ„è®¾è®¡</h2>
<p>å…ˆçœ‹æ•´ä½“æ¶æ„ï¼š</p>
<pre><code class="hljs"/></pre>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç›‘æ§ç³»ç»Ÿæ¶æ„                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚  æœåŠ¡å™¨A  â”‚    â”‚  æœåŠ¡å™¨B  â”‚    â”‚  æœåŠ¡å™¨C  â”‚              â”‚
â”‚  â”‚  Node    â”‚    â”‚  Node    â”‚    â”‚  Node    â”‚              â”‚
â”‚  â”‚ Exporter â”‚    â”‚ Exporter â”‚    â”‚ Exporter â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜              â”‚
â”‚       â”‚               â”‚               â”‚                     â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                       â”‚                                     â”‚
â”‚                       â–¼                                     â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚              â”‚   Prometheus   â”‚â—„â”€â”€â”€ æ‹‰å–æŒ‡æ ‡ï¼ˆPullæ¨¡å¼ï¼‰      â”‚
â”‚              â”‚   (æ—¶åºæ•°æ®åº“)  â”‚                             â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                      â”‚                                      â”‚
â”‚                      â–¼                                      â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚              â”‚    Grafana     â”‚â—„â”€â”€â”€ å¯è§†åŒ–å±•ç¤º               â”‚
â”‚              â”‚   (ä»ªè¡¨ç›˜)      â”‚                             â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                      â”‚                                      â”‚
â”‚                      â–¼                                      â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚              â”‚  Alertmanager  â”‚â—„â”€â”€â”€ å‘Šè­¦æ¨é€                 â”‚
â”‚              â”‚   (å‘Šè­¦ç®¡ç†)    â”‚     (é‚®ä»¶/é’‰é’‰/ä¼å¾®)         â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">**æ ¸å¿ƒç»„ä»¶ï¼š**</span>

<span class="hljs-string">|</span> <span class="hljs-string">ç»„ä»¶</span> <span class="hljs-string">|</span> <span class="hljs-string">ä½œç”¨</span> <span class="hljs-string">|</span> <span class="hljs-string">ç«¯å£</span> <span class="hljs-string">|</span>
<span class="hljs-string">|------|------|------|</span>
<span class="hljs-string">|</span> <span class="hljs-string">Prometheus</span> <span class="hljs-string">|</span> <span class="hljs-string">æŒ‡æ ‡é‡‡é›†ã€å­˜å‚¨ã€æŸ¥è¯¢</span> <span class="hljs-string">|</span> <span class="hljs-number">9090</span> <span class="hljs-string">|</span>
<span class="hljs-string">|</span> <span class="hljs-string">Grafana</span> <span class="hljs-string">|</span> <span class="hljs-string">å¯è§†åŒ–ä»ªè¡¨ç›˜</span> <span class="hljs-string">|</span> <span class="hljs-number">3000</span> <span class="hljs-string">|</span>
<span class="hljs-string">|</span> <span class="hljs-string">Node</span> <span class="hljs-string">Exporter</span> <span class="hljs-string">|</span> <span class="hljs-string">é‡‡é›†æœåŠ¡å™¨æŒ‡æ ‡ï¼ˆCPU/å†…å­˜/ç£ç›˜ï¼‰</span> <span class="hljs-string">|</span> <span class="hljs-number">9100</span> <span class="hljs-string">|</span>
<span class="hljs-string">|</span> <span class="hljs-string">Alertmanager</span> <span class="hljs-string">|</span> <span class="hljs-string">å‘Šè­¦ç®¡ç†å’Œæ¨é€</span> <span class="hljs-string">|</span> <span class="hljs-number">9093</span> <span class="hljs-string">|</span>

<span class="hljs-meta">---
</span>
<span class="hljs-comment">## äºŒã€ç¯å¢ƒå‡†å¤‡</span>

<span class="hljs-string">**æœåŠ¡å™¨é…ç½®ï¼š**</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">ç›‘æ§æœåŠ¡å™¨ï¼š2æ ¸4GBï¼ˆè·‘Prometheus+Grafanaï¼‰</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">è¢«ç›‘æ§æœåŠ¡å™¨ï¼šè‹¥å¹²å°</span>

<span class="hljs-string">**ç³»ç»Ÿç¯å¢ƒï¼š**</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">Ubuntu</span> <span class="hljs-number">22.04</span> <span class="hljs-string">/</span> <span class="hljs-string">CentOS</span> <span class="hljs-number">7</span><span class="hljs-string">+</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">Docker</span> <span class="hljs-number">20.10</span><span class="hljs-string">+ï¼ˆæ¨èç”¨Dockeréƒ¨ç½²ï¼‰</span>

<span class="hljs-meta">---
</span>
<span class="hljs-comment">## ä¸‰ã€éƒ¨ç½² Prometheus</span>

<span class="hljs-comment">### 3.1 Docker Compose éƒ¨ç½²</span>

<span class="hljs-string">åˆ›å»ºç›®å½•å’Œé…ç½®æ–‡ä»¶ï¼š</span>

<span class="hljs-string">```bash</span>
<span class="hljs-string">mkdir</span> <span class="hljs-string">-p</span> <span class="hljs-string">/opt/monitoring/{prometheus,grafana,alertmanager}</span>
<span class="hljs-string">cd</span> <span class="hljs-string">/opt/monitoring</span>
</code></pre>
<p>åˆ›å»º <code>docker-compose.yml</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3.8'</span>

<span class="hljs-attr">services:</span>
  <span class="hljs-attr">prometheus:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">prom/prometheus:v2.47.0</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">prometheus</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"9090:9090"</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./prometheus/rules:/etc/prometheus/rules</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">prometheus_data:/prometheus</span>
    <span class="hljs-attr">command:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'--config.file=/etc/prometheus/prometheus.yml'</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'--storage.tsdb.path=/prometheus'</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'--storage.tsdb.retention.time=30d'</span>  <span class="hljs-comment"># æ•°æ®ä¿ç•™30å¤©</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">'--web.enable-lifecycle'</span>  <span class="hljs-comment"># æ”¯æŒçƒ­é‡è½½</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">monitoring</span>

  <span class="hljs-attr">grafana:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">grafana/grafana:10.1.0</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">grafana</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"3000:3000"</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">grafana_data:/var/lib/grafana</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">GF_SECURITY_ADMIN_PASSWORD=your_password</span>  <span class="hljs-comment"># æ”¹æˆä½ çš„å¯†ç </span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">GF_USERS_ALLOW_SIGN_UP=false</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">monitoring</span>

  <span class="hljs-attr">alertmanager:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">prom/alertmanager:v0.26.0</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">alertmanager</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"9093:9093"</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./alertmanager/alertmanager.yml:/etc/alertmanager/alertmanager.yml</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">monitoring</span>

<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">prometheus_data:</span>
  <span class="hljs-attr">grafana_data:</span>

<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">monitoring:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
</code></pre>
<h3 data-id="heading-2">3.2 é…ç½® Prometheus</h3>
<p>åˆ›å»º <code>prometheus/prometheus.yml</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">global:</span>
  <span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">15s</span>      <span class="hljs-comment"># é‡‡é›†é—´éš”</span>
  <span class="hljs-attr">evaluation_interval:</span> <span class="hljs-string">15s</span>  <span class="hljs-comment"># è§„åˆ™è¯„ä¼°é—´éš”</span>

<span class="hljs-attr">alerting:</span>
  <span class="hljs-attr">alertmanagers:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">static_configs:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span>
          <span class="hljs-bullet">-</span> <span class="hljs-string">alertmanager:9093</span>

<span class="hljs-attr">rule_files:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">/etc/prometheus/rules/*.yml</span>

<span class="hljs-attr">scrape_configs:</span>
  <span class="hljs-comment"># ç›‘æ§Prometheusè‡ªèº«</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'prometheus'</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'localhost:9090'</span>]

  <span class="hljs-comment"># ç›‘æ§æœåŠ¡å™¨ï¼ˆNode Exporterï¼‰</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'nodes'</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">'192.168.1.10:9100'</span>  <span class="hljs-comment"># æœåŠ¡å™¨A</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">'192.168.1.11:9100'</span>  <span class="hljs-comment"># æœåŠ¡å™¨B</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">'192.168.1.12:9100'</span>  <span class="hljs-comment"># æœåŠ¡å™¨C</span>
    <span class="hljs-attr">relabel_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">source_labels:</span> [<span class="hljs-string">__address__</span>]
        <span class="hljs-attr">regex:</span> <span class="hljs-string">'([^:]+):.*'</span>
        <span class="hljs-attr">target_label:</span> <span class="hljs-string">instance</span>
        <span class="hljs-attr">replacement:</span> <span class="hljs-string">'${1}'</span>
</code></pre>
<h3 data-id="heading-3">3.3 é…ç½®å‘Šè­¦è§„åˆ™</h3>
<p>åˆ›å»º <code>prometheus/rules/node_alerts.yml</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">groups:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">node_alerts</span>
    <span class="hljs-attr">rules:</span>
      <span class="hljs-comment"># CPUä½¿ç”¨ç‡è¿‡é«˜</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">HighCpuUsage</span>
        <span class="hljs-attr">expr:</span> <span class="hljs-number">100</span> <span class="hljs-bullet">-</span> <span class="hljs-string">(avg</span> <span class="hljs-string">by(instance)</span> <span class="hljs-string">(irate(node_cpu_seconds_total{mode="idle"}[5m]))</span> <span class="hljs-string">*</span> <span class="hljs-number">100</span><span class="hljs-string">)</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">80</span>
        <span class="hljs-attr">for:</span> <span class="hljs-string">5m</span>
        <span class="hljs-attr">labels:</span>
          <span class="hljs-attr">severity:</span> <span class="hljs-string">warning</span>
        <span class="hljs-attr">annotations:</span>
          <span class="hljs-attr">summary:</span> <span class="hljs-string">"CPUä½¿ç”¨ç‡è¿‡é«˜"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"æœåŠ¡å™¨ <span class="hljs-template-variable">{{ $labels.instance }}</span> CPUä½¿ç”¨ç‡è¶…è¿‡80%ï¼Œå½“å‰å€¼ï¼š<span class="hljs-template-variable">{{ $value | printf \"%.1f\" }}</span>%"</span>

      <span class="hljs-comment"># å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">HighMemoryUsage</span>
        <span class="hljs-attr">expr:</span> <span class="hljs-string">(1</span> <span class="hljs-bullet">-</span> <span class="hljs-string">node_memory_MemAvailable_bytes</span> <span class="hljs-string">/</span> <span class="hljs-string">node_memory_MemTotal_bytes)</span> <span class="hljs-string">*</span> <span class="hljs-number">100</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">85</span>
        <span class="hljs-attr">for:</span> <span class="hljs-string">5m</span>
        <span class="hljs-attr">labels:</span>
          <span class="hljs-attr">severity:</span> <span class="hljs-string">warning</span>
        <span class="hljs-attr">annotations:</span>
          <span class="hljs-attr">summary:</span> <span class="hljs-string">"å†…å­˜ä½¿ç”¨ç‡è¿‡é«˜"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"æœåŠ¡å™¨ <span class="hljs-template-variable">{{ $labels.instance }}</span> å†…å­˜ä½¿ç”¨ç‡è¶…è¿‡85%ï¼Œå½“å‰å€¼ï¼š<span class="hljs-template-variable">{{ $value | printf \"%.1f\" }}</span>%"</span>

      <span class="hljs-comment"># ç£ç›˜ä½¿ç”¨ç‡è¿‡é«˜</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">HighDiskUsage</span>
        <span class="hljs-attr">expr:</span> <span class="hljs-string">(1</span> <span class="hljs-bullet">-</span> <span class="hljs-string">node_filesystem_avail_bytes{fstype!~"tmpfs|overlay"}</span> <span class="hljs-string">/</span> <span class="hljs-string">node_filesystem_size_bytes)</span> <span class="hljs-string">*</span> <span class="hljs-number">100</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">85</span>
        <span class="hljs-attr">for:</span> <span class="hljs-string">5m</span>
        <span class="hljs-attr">labels:</span>
          <span class="hljs-attr">severity:</span> <span class="hljs-string">warning</span>
        <span class="hljs-attr">annotations:</span>
          <span class="hljs-attr">summary:</span> <span class="hljs-string">"ç£ç›˜ä½¿ç”¨ç‡è¿‡é«˜"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"æœåŠ¡å™¨ <span class="hljs-template-variable">{{ $labels.instance }}</span> ç£ç›˜ <span class="hljs-template-variable">{{ $labels.mountpoint }}</span> ä½¿ç”¨ç‡è¶…è¿‡85%"</span>

      <span class="hljs-comment"># æœåŠ¡å™¨å®•æœº</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">InstanceDown</span>
        <span class="hljs-attr">expr:</span> <span class="hljs-string">up</span> <span class="hljs-string">==</span> <span class="hljs-number">0</span>
        <span class="hljs-attr">for:</span> <span class="hljs-string">1m</span>
        <span class="hljs-attr">labels:</span>
          <span class="hljs-attr">severity:</span> <span class="hljs-string">critical</span>
        <span class="hljs-attr">annotations:</span>
          <span class="hljs-attr">summary:</span> <span class="hljs-string">"æœåŠ¡å™¨å®•æœº"</span>
          <span class="hljs-attr">description:</span> <span class="hljs-string">"æœåŠ¡å™¨ <span class="hljs-template-variable">{{ $labels.instance }}</span> å·²ç»å®•æœºè¶…è¿‡1åˆ†é’Ÿ"</span>
</code></pre>
<h3 data-id="heading-4">3.4 é…ç½® Alertmanagerï¼ˆé’‰é’‰å‘Šè­¦ï¼‰</h3>
<p>åˆ›å»º <code>alertmanager/alertmanager.yml</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">global:</span>
  <span class="hljs-attr">resolve_timeout:</span> <span class="hljs-string">5m</span>

<span class="hljs-attr">route:</span>
  <span class="hljs-attr">group_by:</span> [<span class="hljs-string">'alertname'</span>, <span class="hljs-string">'instance'</span>]
  <span class="hljs-attr">group_wait:</span> <span class="hljs-string">30s</span>
  <span class="hljs-attr">group_interval:</span> <span class="hljs-string">5m</span>
  <span class="hljs-attr">repeat_interval:</span> <span class="hljs-string">4h</span>
  <span class="hljs-attr">receiver:</span> <span class="hljs-string">'dingtalk'</span>

<span class="hljs-attr">receivers:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'dingtalk'</span>
    <span class="hljs-attr">webhook_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">'http://dingtalk-webhook:8060/dingtalk/webhook1/send'</span>
        <span class="hljs-attr">send_resolved:</span> <span class="hljs-literal">true</span>
</code></pre>
<p><strong>é’‰é’‰Webhookéœ€è¦å•ç‹¬éƒ¨ç½²ä¸€ä¸ªè½¬å‘æœåŠ¡ï¼Œè¿™é‡Œç”¨ <code>prometheus-webhook-dingtalk</code>ï¼š</strong></p>
<p>åœ¨ <code>docker-compose.yml</code> ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">dingtalk:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">timonwong/prometheus-webhook-dingtalk:v2.1.0</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">dingtalk-webhook</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8060:8060"</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./dingtalk/config.yml:/etc/prometheus-webhook-dingtalk/config.yml</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">monitoring</span>
</code></pre>
<p>åˆ›å»º <code>dingtalk/config.yml</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">targets:</span>
  <span class="hljs-attr">webhook1:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">https://oapi.dingtalk.com/robot/send?access_token=ä½ çš„é’‰é’‰æœºå™¨äººToken</span>
    <span class="hljs-attr">secret:</span> <span class="hljs-string">ä½ çš„é’‰é’‰æœºå™¨äººåŠ ç­¾å¯†é’¥</span>
</code></pre>
<h3 data-id="heading-5">3.5 å¯åŠ¨æœåŠ¡</h3>
<pre><code class="hljs language-bash" lang="bash">docker-compose up -d

<span class="hljs-comment"># æ£€æŸ¥çŠ¶æ€</span>
docker-compose ps

<span class="hljs-comment"># æŸ¥çœ‹æ—¥å¿—</span>
docker-compose logs -f prometheus
</code></pre>
<p>è®¿é—® <code>http://æœåŠ¡å™¨IP:9090</code> éªŒè¯Prometheusæ˜¯å¦æ­£å¸¸ã€‚</p>
<hr/>
<h2 data-id="heading-6">å››ã€éƒ¨ç½² Node Exporter</h2>
<p>åœ¨<strong>æ¯å°è¢«ç›‘æ§çš„æœåŠ¡å™¨</strong>ä¸Šéƒ¨ç½² Node Exporterã€‚</p>
<h3 data-id="heading-7">4.1 Docker éƒ¨ç½²</h3>
<pre><code class="hljs language-bash" lang="bash">docker run -d \
  --name node_exporter \
  --restart always \
  --net host \
  --pid host \
  -v <span class="hljs-string">"/:/host:ro,rslave"</span> \
  prom/node-exporter:v1.6.1 \
  --path.rootfs=/host
</code></pre>
<h3 data-id="heading-8">4.2 äºŒè¿›åˆ¶éƒ¨ç½²ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸‹è½½</span>
wget https://github.com/prometheus/node_exporter/releases/download/v1.6.1/node_exporter-1.6.1.linux-amd64.tar.gz

<span class="hljs-comment"># è§£å‹</span>
tar xvf node_exporter-1.6.1.linux-amd64.tar.gz
<span class="hljs-built_in">mv</span> node_exporter-1.6.1.linux-amd64/node_exporter /usr/local/bin/

<span class="hljs-comment"># åˆ›å»ºsystemdæœåŠ¡</span>
<span class="hljs-built_in">cat</span> &gt; /etc/systemd/system/node_exporter.service &lt;&lt; <span class="hljs-string">'EOF'</span>
[Unit]
Description=Node Exporter
After=network.target

[Service]
Type=simple
ExecStart=/usr/local/bin/node_exporter
Restart=on-failure

[Install]
WantedBy=multi-user.target
EOF

<span class="hljs-comment"># å¯åŠ¨</span>
systemctl daemon-reload
systemctl <span class="hljs-built_in">enable</span> node_exporter
systemctl start node_exporter

<span class="hljs-comment"># éªŒè¯</span>
curl localhost:9100/metrics
</code></pre>
<h3 data-id="heading-9">4.3 éªŒè¯æ•°æ®é‡‡é›†</h3>
<p>å›åˆ°Prometheusçš„Webç•Œé¢ï¼š</p>
<ol>
<li>è®¿é—® <code>http://PrometheusæœåŠ¡å™¨:9090/targets</code></li>
<li>ç¡®è®¤æ‰€æœ‰Node ExporterçŠ¶æ€ä¸º <code>UP</code></li>
</ol>
<p>å¦‚æœçŠ¶æ€æ˜¯ <code>DOWN</code>ï¼Œæ£€æŸ¥ï¼š</p>
<ul>
<li>Node Exporteræ˜¯å¦å¯åŠ¨</li>
<li>é˜²ç«å¢™æ˜¯å¦å¼€æ”¾9100ç«¯å£</li>
<li>ç½‘ç»œæ˜¯å¦è¿é€š</li>
</ul>
<hr/>
<h2 data-id="heading-10">äº”ã€é…ç½® Grafana ä»ªè¡¨ç›˜</h2>
<h3 data-id="heading-11">5.1 ç™»å½• Grafana</h3>
<p>è®¿é—® <code>http://æœåŠ¡å™¨IP:3000</code></p>
<ul>
<li>ç”¨æˆ·åï¼šadmin</li>
<li>å¯†ç ï¼šdocker-compose.yml ä¸­è®¾ç½®çš„å¯†ç </li>
</ul>
<h3 data-id="heading-12">5.2 æ·»åŠ æ•°æ®æº</h3>
<ol>
<li>å·¦ä¾§èœå• â†’ Configuration â†’ Data Sources</li>
<li>ç‚¹å‡» "Add data source"</li>
<li>é€‰æ‹© "Prometheus"</li>
<li>URLå¡«å†™ï¼š<code>http://prometheus:9090</code>ï¼ˆDockerç½‘ç»œå†…éƒ¨åœ°å€ï¼‰</li>
<li>ç‚¹å‡» "Save &amp; Test"</li>
</ol>
<h3 data-id="heading-13">5.3 å¯¼å…¥ä»ªè¡¨ç›˜</h3>
<p>ä¸ç”¨ä»é›¶å¼€å§‹åšä»ªè¡¨ç›˜ï¼Œç›´æ¥å¯¼å…¥ç¤¾åŒºæ¨¡æ¿ï¼š</p>
<ol>
<li>
<p>å·¦ä¾§èœå• â†’ Dashboards â†’ Import</p>
</li>
<li>
<p>è¾“å…¥ä»ªè¡¨ç›˜IDï¼š</p>
<ul>
<li><strong>Node Exporter Full</strong>ï¼š1860ï¼ˆæœ€å…¨é¢çš„æœåŠ¡å™¨ç›‘æ§ï¼‰</li>
<li><strong>Dockerç›‘æ§</strong>ï¼š893</li>
<li><strong>Prometheus Stats</strong>ï¼š2</li>
</ul>
</li>
<li>
<p>é€‰æ‹©Prometheusæ•°æ®æº</p>
</li>
<li>
<p>ç‚¹å‡»Import</p>
</li>
</ol>
<p><strong>å¯¼å…¥1860å·ä»ªè¡¨ç›˜åï¼Œä½ ä¼šçœ‹åˆ°ï¼š</strong></p>
<ul>
<li>CPUä½¿ç”¨ç‡æ›²çº¿</li>
<li>å†…å­˜ä½¿ç”¨æƒ…å†µ</li>
<li>ç£ç›˜IO</li>
<li>ç½‘ç»œæµé‡</li>
<li>ç³»ç»Ÿè´Ÿè½½</li>
<li>...</li>
</ul>
<p>éå¸¸å…¨é¢ï¼ŒåŸºæœ¬ä¸ç”¨è‡ªå·±é…ç½®ã€‚</p>
<h3 data-id="heading-14">5.4 è‡ªå®šä¹‰ä»ªè¡¨ç›˜ï¼ˆè¿›é˜¶ï¼‰</h3>
<p>å¦‚æœæƒ³è‡ªå®šä¹‰ï¼Œäº†è§£å‡ ä¸ªå¸¸ç”¨çš„PromQLæŸ¥è¯¢ï¼š</p>
<p><strong>CPUä½¿ç”¨ç‡ï¼š</strong></p>
<pre><code class="hljs language-promql" lang="promql">100 - (avg by(instance) (irate(node_cpu_seconds_total{mode="idle"}[5m])) * 100)
</code></pre>
<p><strong>å†…å­˜ä½¿ç”¨ç‡ï¼š</strong></p>
<pre><code class="hljs language-promql" lang="promql">(1 - node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes) * 100
</code></pre>
<p><strong>ç£ç›˜ä½¿ç”¨ç‡ï¼š</strong></p>
<pre><code class="hljs language-promql" lang="promql">(1 - node_filesystem_avail_bytes{fstype!~"tmpfs|overlay"} / node_filesystem_size_bytes) * 100
</code></pre>
<p><strong>ç½‘ç»œæ¥æ”¶æµé‡ï¼ˆMB/sï¼‰ï¼š</strong></p>
<pre><code class="hljs language-promql" lang="promql">irate(node_network_receive_bytes_total{device!~"lo|veth.*"}[5m]) / 1024 / 1024
</code></pre>
<p><strong>ç³»ç»Ÿè´Ÿè½½ï¼š</strong></p>
<pre><code class="hljs language-promql" lang="promql">node_load1  # 1åˆ†é’Ÿè´Ÿè½½
node_load5  # 5åˆ†é’Ÿè´Ÿè½½
node_load15 # 15åˆ†é’Ÿè´Ÿè½½
</code></pre>
<hr/>
<h2 data-id="heading-15">å…­ã€ç›‘æ§æ›´å¤šæœåŠ¡</h2>
<h3 data-id="heading-16">6.1 ç›‘æ§ MySQL</h3>
<p>éƒ¨ç½² <code>mysqld_exporter</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker run -d \
  --name mysqld_exporter \
  --restart always \
  -p 9104:9104 \
  -e DATA_SOURCE_NAME=<span class="hljs-string">"exporter:å¯†ç @(mysqlæœåŠ¡å™¨:3306)/"</span> \
  prom/mysqld-exporter
</code></pre>
<p>åœ¨Prometheusé…ç½®ä¸­æ·»åŠ ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'mysql'</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'mysqld_exporter:9104'</span>]
</code></pre>
<p>Grafanaä»ªè¡¨ç›˜IDï¼š7362</p>
<h3 data-id="heading-17">6.2 ç›‘æ§ Redis</h3>
<p>éƒ¨ç½² <code>redis_exporter</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker run -d \
  --name redis_exporter \
  --restart always \
  -p 9121:9121 \
  oliver006/redis_exporter \
  --redis.addr=redis://RedisæœåŠ¡å™¨:6379
</code></pre>
<p>Prometheusé…ç½®ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'redis'</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'redis_exporter:9121'</span>]
</code></pre>
<p>Grafanaä»ªè¡¨ç›˜IDï¼š763</p>
<h3 data-id="heading-18">6.3 ç›‘æ§ Nginx</h3>
<p>éœ€è¦å…ˆå¼€å¯Nginxçš„stub_statusæ¨¡å—ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx">server {
    listen 8080;
    location /nginx_status {
        stub_status;
        allow 127.0.0.1;
        deny all;
    }
}
</code></pre>
<p>éƒ¨ç½² <code>nginx-prometheus-exporter</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker run -d \
  --name nginx_exporter \
  --restart always \
  -p 9113:9113 \
  nginx/nginx-prometheus-exporter \
  -nginx.scrape-uri=http://NginxæœåŠ¡å™¨:8080/nginx_status
</code></pre>
<p>Grafanaä»ªè¡¨ç›˜IDï¼š12708</p>
<h3 data-id="heading-19">6.4 ç›‘æ§ Docker å®¹å™¨</h3>
<p>éƒ¨ç½² <code>cAdvisor</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker run -d \
  --name cadvisor \
  --restart always \
  -p 8080:8080 \
  -v /:/rootfs:ro \
  -v /var/run:/var/run:ro \
  -v /sys:/sys:ro \
  -v /var/lib/docker/:/var/lib/docker:ro \
  gcr.io/cadvisor/cadvisor:v0.47.0
</code></pre>
<p>Prometheusé…ç½®ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'cadvisor'</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'cadvisor:8080'</span>]
</code></pre>
<p>Grafanaä»ªè¡¨ç›˜IDï¼š893</p>
<hr/>
<h2 data-id="heading-20">ä¸ƒã€å‘Šè­¦é…ç½®å®æˆ˜</h2>
<h3 data-id="heading-21">7.1 å‘Šè­¦è§¦å‘æµç¨‹</h3>
<pre><code class="hljs">Prometheusé‡‡é›†æŒ‡æ ‡ â†’ åŒ¹é…å‘Šè­¦è§„åˆ™ â†’ è§¦å‘å‘Šè­¦ â†’ å‘é€åˆ°Alertmanager â†’ æ¨é€åˆ°é’‰é’‰/é‚®ä»¶
</code></pre>
<h3 data-id="heading-22">7.2 å‘Šè­¦è§„åˆ™è¯¦è§£</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-bullet">-</span> <span class="hljs-attr">alert:</span> <span class="hljs-string">HighCpuUsage</span>
  <span class="hljs-attr">expr:</span> <span class="hljs-number">100</span> <span class="hljs-bullet">-</span> <span class="hljs-string">(avg</span> <span class="hljs-string">by(instance)</span> <span class="hljs-string">(irate(node_cpu_seconds_total{mode="idle"}[5m]))</span> <span class="hljs-string">*</span> <span class="hljs-number">100</span><span class="hljs-string">)</span> <span class="hljs-string">&gt;</span> <span class="hljs-number">80</span>
  <span class="hljs-attr">for:</span> <span class="hljs-string">5m</span>  <span class="hljs-comment"># æŒç»­5åˆ†é’Ÿæ‰å‘Šè­¦ï¼Œé¿å…ç¬æ—¶æ³¢åŠ¨è¯¯æŠ¥</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">severity:</span> <span class="hljs-string">warning</span>  <span class="hljs-comment"># å‘Šè­¦çº§åˆ«</span>
  <span class="hljs-attr">annotations:</span>
    <span class="hljs-attr">summary:</span> <span class="hljs-string">"CPUä½¿ç”¨ç‡è¿‡é«˜"</span>
    <span class="hljs-attr">description:</span> <span class="hljs-string">"æœåŠ¡å™¨ <span class="hljs-template-variable">{{ $labels.instance }}</span> CPUä½¿ç”¨ç‡è¶…è¿‡80%"</span>
</code></pre>
<p><strong>å…³é”®å‚æ•°ï¼š</strong></p>
<ul>
<li><code>expr</code>ï¼šPromQLè¡¨è¾¾å¼ï¼Œæ»¡è¶³æ¡ä»¶åˆ™è§¦å‘</li>
<li><code>for</code>ï¼šæŒç»­æ—¶é—´ï¼Œé˜²æ­¢æŠ–åŠ¨</li>
<li><code>labels</code>ï¼šæ ‡ç­¾ï¼Œç”¨äºå‘Šè­¦åˆ†ç»„å’Œè·¯ç”±</li>
<li><code>annotations</code>ï¼šå‘Šè­¦å†…å®¹æè¿°</li>
</ul>
<h3 data-id="heading-23">7.3 å‘Šè­¦åˆ†çº§è·¯ç”±</h3>
<p>åœ¨Alertmanagerä¸­é…ç½®ä¸åŒçº§åˆ«å‘Šè­¦å‘é€åˆ°ä¸åŒæ¸ é“ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">route:</span>
  <span class="hljs-attr">receiver:</span> <span class="hljs-string">'default'</span>
  <span class="hljs-attr">routes:</span>
    <span class="hljs-comment"># ä¸¥é‡å‘Šè­¦å‘åˆ°è¿ç»´ç¾¤</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">match:</span>
        <span class="hljs-attr">severity:</span> <span class="hljs-string">critical</span>
      <span class="hljs-attr">receiver:</span> <span class="hljs-string">'ops-team'</span>
      <span class="hljs-attr">repeat_interval:</span> <span class="hljs-string">1h</span>
    
    <span class="hljs-comment"># è­¦å‘Šçº§åˆ«å‘åˆ°å¼€å‘ç¾¤</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">match:</span>
        <span class="hljs-attr">severity:</span> <span class="hljs-string">warning</span>
      <span class="hljs-attr">receiver:</span> <span class="hljs-string">'dev-team'</span>
      <span class="hljs-attr">repeat_interval:</span> <span class="hljs-string">4h</span>

<span class="hljs-attr">receivers:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'default'</span>
    <span class="hljs-attr">webhook_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">'http://dingtalk:8060/dingtalk/default/send'</span>
  
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'ops-team'</span>
    <span class="hljs-attr">webhook_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">'http://dingtalk:8060/dingtalk/ops/send'</span>
  
  <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">'dev-team'</span>
    <span class="hljs-attr">webhook_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">url:</span> <span class="hljs-string">'http://dingtalk:8060/dingtalk/dev/send'</span>
</code></pre>
<h3 data-id="heading-24">7.4 å‘Šè­¦é™é»˜</h3>
<p>åŠå¤œå‘ç‰ˆä¸æƒ³æ”¶åˆ°å‘Šè­¦ï¼Ÿå¯ä»¥è®¾ç½®é™é»˜ï¼š</p>
<ol>
<li>è®¿é—® Alertmanagerï¼š<code>http://æœåŠ¡å™¨IP:9093</code></li>
<li>ç‚¹å‡» "Silences" â†’ "New Silence"</li>
<li>è®¾ç½®åŒ¹é…æ¡ä»¶å’Œé™é»˜æ—¶é—´</li>
</ol>
<hr/>
<h2 data-id="heading-25">å…«ã€è¿œç¨‹ç›‘æ§æ–¹æ¡ˆ</h2>
<p>å¦‚æœä½ çš„æœåŠ¡å™¨åˆ†å¸ƒåœ¨ä¸åŒåœ°æ–¹ï¼ˆå…¬å¸ã€å®¶é‡Œã€äº‘ä¸Šï¼‰ï¼Œæ€ä¹ˆç»Ÿä¸€ç›‘æ§ï¼Ÿ</p>
<h3 data-id="heading-26">8.1 æ–¹æ¡ˆä¸€ï¼šå…¬ç½‘æš´éœ²ï¼ˆä¸æ¨èï¼‰</h3>
<p>æŠŠPrometheusçš„9090ç«¯å£æš´éœ²åˆ°å…¬ç½‘ï¼Œä¸å®‰å…¨ã€‚</p>
<h3 data-id="heading-27">8.2 æ–¹æ¡ˆäºŒï¼šVPNï¼ˆä¼ ç»Ÿæ–¹æ¡ˆï¼‰</h3>
<p>é…ç½®å¤æ‚ï¼Œç»´æŠ¤æˆæœ¬é«˜ã€‚</p>
<h3 data-id="heading-28">8.3 æ–¹æ¡ˆä¸‰ï¼šç»„ç½‘å·¥å…·ï¼ˆæ¨èï¼‰</h3>
<p>æˆ‘ç”¨çš„æ˜¯<strong>æ˜Ÿç©ºç»„ç½‘</strong>ï¼ŒæŠŠåˆ†å¸ƒåœ¨ä¸åŒåœ°æ–¹çš„æœåŠ¡å™¨ç»„æˆä¸€ä¸ªè™šæ‹Ÿå±€åŸŸç½‘ï¼š</p>
<ol>
<li>æ¯å°æœåŠ¡å™¨è£…æ˜Ÿç©ºç»„ç½‘å®¢æˆ·ç«¯</li>
<li>ç™»å½•åŒä¸€è´¦å·ï¼ŒåŠ å…¥åŒä¸€ç½‘ç»œ</li>
<li>æœåŠ¡å™¨äº’ç›¸ä¹‹é—´å¯ä»¥ç”¨è™šæ‹ŸIPè®¿é—®</li>
</ol>
<p><strong>é…ç½®Prometheusç›‘æ§è¿œç¨‹æœåŠ¡å™¨ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">scrape_configs:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'nodes'</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">'10.26.1.10:9100'</span>  <span class="hljs-comment"># å…¬å¸æœåŠ¡å™¨ï¼ˆè™šæ‹ŸIPï¼‰</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">'10.26.1.20:9100'</span>  <span class="hljs-comment"># å®¶é‡ŒNASï¼ˆè™šæ‹ŸIPï¼‰</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">'10.26.1.30:9100'</span>  <span class="hljs-comment"># äº‘æœåŠ¡å™¨ï¼ˆè™šæ‹ŸIPï¼‰</span>
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>ä¸ç”¨æš´éœ²ç«¯å£åˆ°å…¬ç½‘</li>
<li>é…ç½®ç®€å•ï¼Œ5åˆ†é’Ÿæå®š</li>
<li>P2Pç›´è¿ï¼Œå»¶è¿Ÿä½</li>
<li>å…è´¹ç‰ˆ3è®¾å¤‡å¤Ÿä¸ªäººç”¨</li>
</ul>
<p>è¿™æ ·åœ¨å®¶ä¹Ÿèƒ½çœ‹åˆ°å…¬å¸æœåŠ¡å™¨çš„ç›‘æ§æ•°æ®ï¼Œå‡ºå·®æ—¶ä¹Ÿèƒ½éšæ—¶æŸ¥çœ‹ã€‚</p>
<hr/>
<h2 data-id="heading-29">ä¹ã€æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-30">9.1 Prometheus å­˜å‚¨ä¼˜åŒ–</h3>
<p>é»˜è®¤é…ç½®ä¸‹ï¼ŒPrometheusä¼šæŠŠæ‰€æœ‰æ•°æ®å­˜æœ¬åœ°ã€‚æ•°æ®é‡å¤§äº†ä¼šæœ‰é—®é¢˜ã€‚</p>
<p><strong>ä¼˜åŒ–å‚æ•°ï¼š</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># docker-compose.yml çš„ command éƒ¨åˆ†</span>
<span class="hljs-attr">command:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">'--storage.tsdb.retention.time=15d'</span>  <span class="hljs-comment"># å‡å°‘ä¿ç•™æ—¶é—´</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">'--storage.tsdb.retention.size=10GB'</span>  <span class="hljs-comment"># é™åˆ¶å­˜å‚¨å¤§å°</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">'--storage.tsdb.wal-compression'</span>      <span class="hljs-comment"># å¼€å¯WALå‹ç¼©</span>
</code></pre>
<h3 data-id="heading-31">9.2 é‡‡é›†é¢‘ç‡ä¼˜åŒ–</h3>
<p>ä¸æ˜¯æ‰€æœ‰æŒ‡æ ‡éƒ½éœ€è¦15ç§’é‡‡é›†ä¸€æ¬¡ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">scrape_configs:</span>
  <span class="hljs-comment"># æ ¸å¿ƒæœåŠ¡ï¼Œ15ç§’é‡‡é›†</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'critical-nodes'</span>
    <span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">15s</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'æ ¸å¿ƒæœåŠ¡å™¨:9100'</span>]

  <span class="hljs-comment"># éæ ¸å¿ƒæœåŠ¡ï¼Œ1åˆ†é’Ÿé‡‡é›†</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">job_name:</span> <span class="hljs-string">'normal-nodes'</span>
    <span class="hljs-attr">scrape_interval:</span> <span class="hljs-string">60s</span>
    <span class="hljs-attr">static_configs:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">targets:</span> [<span class="hljs-string">'æ™®é€šæœåŠ¡å™¨:9100'</span>]
</code></pre>
<h3 data-id="heading-32">9.3 Grafana æŸ¥è¯¢ä¼˜åŒ–</h3>
<p>ä»ªè¡¨ç›˜å¡é¡¿ï¼Ÿå¯èƒ½æ˜¯æŸ¥è¯¢å¤ªé‡ï¼š</p>
<ol>
<li>å‡å°‘æ—¶é—´èŒƒå›´ï¼ˆä»7å¤©æ”¹æˆ1å¤©ï¼‰</li>
<li>å¢åŠ æŸ¥è¯¢æ­¥é•¿ï¼ˆStepï¼‰</li>
<li>ä½¿ç”¨ <code>rate()</code> ä»£æ›¿ <code>irate()</code>ï¼ˆæ›´å¹³æ»‘ï¼Œè®¡ç®—é‡å°ï¼‰</li>
</ol>
<hr/>
<h2 data-id="heading-33">åã€è¸©è¿‡çš„å‘</h2>
<h3 data-id="heading-34">å‘1ï¼šæ—¶é—´ä¸åŒæ­¥å¯¼è‡´æ•°æ®æ–­å±‚</h3>
<p><strong>ç°è±¡ï¼š</strong> Grafanaå›¾è¡¨æœ‰æ–­å±‚ï¼ŒPrometheusæ˜¾ç¤º"target is 5m in the future"</p>
<p><strong>åŸå› ï¼š</strong> è¢«ç›‘æ§æœåŠ¡å™¨æ—¶é—´æ¯”Prometheuså¿«äº†5åˆ†é’Ÿ</p>
<p><strong>è§£å†³ï¼š</strong> æ‰€æœ‰æœåŠ¡å™¨é…ç½®NTPåŒæ­¥</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Ubuntu</span>
apt install chrony
systemctl <span class="hljs-built_in">enable</span> chrony

<span class="hljs-comment"># å¼ºåˆ¶åŒæ­¥</span>
chronyc makestep
</code></pre>
<h3 data-id="heading-35">å‘2ï¼šDockerç½‘ç»œå†…è®¿é—®ä¸é€š</h3>
<p><strong>ç°è±¡ï¼š</strong> Prometheusé‡‡é›†ä¸åˆ°å®¹å™¨å†…çš„Exporter</p>
<p><strong>åŸå› ï¼š</strong> ç½‘ç»œæ¨¡å¼é—®é¢˜</p>
<p><strong>è§£å†³ï¼š</strong> ç¡®ä¿æ‰€æœ‰å®¹å™¨åœ¨åŒä¸€ä¸ªDockerç½‘ç»œï¼ˆmonitoringï¼‰</p>
<h3 data-id="heading-36">å‘3ï¼šGrafanaä»ªè¡¨ç›˜ä¸æ˜¾ç¤ºæ•°æ®</h3>
<p><strong>ç°è±¡ï¼š</strong> å¯¼å…¥ä»ªè¡¨ç›˜åä¸€ç‰‡ç©ºç™½</p>
<p><strong>åŸå› ï¼š</strong> æ•°æ®æºåç§°ä¸åŒ¹é…</p>
<p><strong>è§£å†³ï¼š</strong> ä»ªè¡¨ç›˜è®¾ç½®é‡ŒæŠŠæ•°æ®æºæ”¹æˆä½ åˆ›å»ºçš„åç§°</p>
<h3 data-id="heading-37">å‘4ï¼šç£ç›˜ç›‘æ§æŒ‡æ ‡ä¸ºç©º</h3>
<p><strong>ç°è±¡ï¼š</strong> <code>node_filesystem_*</code> æŒ‡æ ‡æ²¡æœ‰æ•°æ®</p>
<p><strong>åŸå› ï¼š</strong> Node Exporteræ²¡æœ‰æŒ‚è½½å®¿ä¸»æœºæ–‡ä»¶ç³»ç»Ÿ</p>
<p><strong>è§£å†³ï¼š</strong> ç”¨ <code>--path.rootfs=/host</code> å‚æ•°å¹¶æŒ‚è½½ <code>/:/host:ro</code></p>
<hr/>
<h2 data-id="heading-38">åä¸€ã€ç”Ÿäº§ç¯å¢ƒ Checklist</h2>
<p>éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒå‰ï¼Œæ£€æŸ¥è¿™äº›ï¼š</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> Prometheusæ•°æ®æŒä¹…åŒ–åˆ°å®¿ä¸»æœºç›®å½•</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> Grafanaå¯†ç å·²ä¿®æ”¹</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å‘Šè­¦è§„åˆ™é…ç½®å®Œæˆ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å‘Šè­¦é€šçŸ¥æ¸ é“å·²æµ‹è¯•</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ‰€æœ‰æœåŠ¡å™¨æ—¶é—´å·²åŒæ­¥</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ç›‘æ§ç³»ç»Ÿæœ¬èº«ä¹Ÿåœ¨è¢«ç›‘æ§</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å®šæœŸå¤‡ä»½Grafanaé…ç½®</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> é˜²ç«å¢™åªå¼€æ”¾å¿…è¦ç«¯å£</li>
</ul>
<hr/>
<h2 data-id="heading-39">åäºŒã€æ€»ç»“</h2>
<p>Prometheus + Grafana è¿™å¥—ç»„åˆï¼ŒåŸºæœ¬æ˜¯ç°åœ¨ç›‘æ§çš„äº‹å®æ ‡å‡†ã€‚</p>
<p><strong>æ ¸å¿ƒè¦ç‚¹ï¼š</strong></p>
<ol>
<li><strong>æ¶æ„</strong>ï¼šPrometheusé‡‡é›† + Grafanaå±•ç¤º + Alertmanagerå‘Šè­¦</li>
<li><strong>éƒ¨ç½²</strong>ï¼šæ¨èDocker Composeï¼Œæ–¹ä¾¿ç®¡ç†</li>
<li><strong>ä»ªè¡¨ç›˜</strong>ï¼šç›´æ¥å¯¼å…¥ç¤¾åŒºæ¨¡æ¿ï¼Œçœæ—¶çœåŠ›</li>
<li><strong>å‘Šè­¦</strong>ï¼šè§„åˆ™è¦åˆç†ï¼Œé¿å…å‘Šè­¦é£æš´</li>
<li><strong>è¿œç¨‹ç›‘æ§</strong>ï¼šç”¨ç»„ç½‘å·¥å…·æ‰“é€šä¸åŒåœ°ç‚¹çš„æœåŠ¡å™¨</li>
</ol>
<p><strong>ä¸‹ä¸€æ­¥å¯ä»¥åšçš„ï¼š</strong></p>
<ul>
<li>æ¥å…¥æ›´å¤šæœåŠ¡ç›‘æ§ï¼ˆMySQLã€Redisã€åº”ç”¨æŒ‡æ ‡ï¼‰</li>
<li>é…ç½®æ›´å®Œå–„çš„å‘Šè­¦è§„åˆ™</li>
<li>æ­å»ºé«˜å¯ç”¨é›†ç¾¤ï¼ˆThanos/Cortexï¼‰</li>
</ul>
<p>æœ‰é—®é¢˜è¯„è®ºåŒºè®¨è®ºï¼Œæˆ‘å°½é‡å›å¤ã€‚</p>
<hr/>
<p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p>
<ul>
<li>Prometheuså®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fprometheus.io%2Fdocs%2F" target="_blank" title="https://prometheus.io/docs/" ref="nofollow noopener noreferrer">prometheus.io/docs/</a></li>
<li>Grafanaå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgrafana.com%2Fdocs%2F" target="_blank" title="https://grafana.com/docs/" ref="nofollow noopener noreferrer">grafana.com/docs/</a></li>
<li>Node Exporter GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fprometheus%2Fnode_exporter" target="_blank" title="https://github.com/prometheus/node_exporter" ref="nofollow noopener noreferrer">github.com/prometheus/â€¦</a></li>
</ul>
<pre><code class="hljs"/></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQL - ä¸€æ–‡ç†æ¸…å­˜å‚¨å¼•æ“ï¼šInnoDB vs MyISAM æ ¸å¿ƒå·®å¼‚]]></title>    <link>https://juejin.cn/post/7578901433970327552</link>    <guid>https://juejin.cn/post/7578901433970327552</guid>    <pubDate>2025-12-02T06:37:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578901433970327552" data-draft-id="7578820431040397352" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQL - ä¸€æ–‡ç†æ¸…å­˜å‚¨å¼•æ“ï¼šInnoDB vs MyISAM æ ¸å¿ƒå·®å¼‚"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T06:37:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaæ°´è§£"/> <meta itemprop="url" content="https://juejin.cn/user/2441349519143037"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQL - ä¸€æ–‡ç†æ¸…å­˜å‚¨å¼•æ“ï¼šInnoDB vs MyISAM æ ¸å¿ƒå·®å¼‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2441349519143037/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaæ°´è§£
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T06:37:44.000Z" title="Tue Dec 02 2025 06:37:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">MySQLÂ - ä¸€æ–‡ç†æ¸…å­˜å‚¨å¼•æ“ï¼šInnoDB vs MyISAM æ ¸å¿ƒå·®å¼‚ ğŸ§ </h2>
<p>åœ¨ä½¿ç”¨ MySQL æ•°æ®åº“æ—¶ï¼Œæˆ‘ä»¬å¸¸å¸¸ä¼šé‡åˆ°ä¸€ä¸ªåŸºç¡€ä½†è‡³å…³é‡è¦çš„é€‰æ‹©ï¼š<strong>ä½¿ç”¨å“ªç§å­˜å‚¨å¼•æ“ï¼Ÿ</strong> Â è™½ç„¶ MySQL æ”¯æŒå¤šç§å­˜å‚¨å¼•æ“ï¼ˆå¦‚ MEMORYã€CSVã€ARCHIVE ç­‰ï¼‰ï¼Œä½†åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæœ€å¸¸è¢«æ‹¿æ¥æ¯”è¾ƒå’Œä½¿ç”¨çš„æ— ç–‘æ˜¯Â <strong>InnoDB</strong>Â å’ŒÂ <strong>MyISAM</strong>ã€‚è¿™ä¸¤ç§å¼•æ“ä¸ä»…å†å²æ‚ ä¹…ï¼Œè€Œä¸”å„è‡ªä»£è¡¨äº†ä¸åŒçš„è®¾è®¡å“²å­¦ä¸åº”ç”¨åœºæ™¯ã€‚</p>
<p>æœ¬æ–‡å°†ä»å¤šä¸ªç»´åº¦æ·±å…¥å‰–æ InnoDB ä¸ MyISAM çš„æ ¸å¿ƒå·®å¼‚ï¼Œæ¶µç›–äº‹åŠ¡æ”¯æŒã€é”æœºåˆ¶ã€å´©æºƒæ¢å¤ã€ç´¢å¼•ç»“æ„ã€æ€§èƒ½è¡¨ç°ã€é€‚ç”¨åœºæ™¯ç­‰ï¼Œå¹¶è¾…ä»¥Â JavaÂ ç¤ºä¾‹ä»£ç ã€Mermaid å›¾è¡¨ä»¥åŠæƒå¨å¤–éƒ¨å‚è€ƒèµ„æ–™ï¼Œå¸®åŠ©ä½ å½»åº•ç†æ¸…ä¸¤è€…çš„åŒºåˆ«ï¼Œåšå‡ºæ›´åˆç†çš„æŠ€æœ¯é€‰å‹å†³ç­–ã€‚ğŸ’¡</p>
<hr/>
<h3 data-id="heading-1"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å­˜å‚¨å¼•æ“æ˜¯ä»€ä¹ˆï¼ŸğŸ§±</h3>
<p>åœ¨ MySQL ä¸­ï¼Œ<strong>å­˜å‚¨å¼•æ“</strong>ï¼ˆStorage Engineï¼‰è´Ÿè´£æ•°æ®çš„ç‰©ç†å­˜å‚¨ã€æ£€ç´¢å’Œç®¡ç†ã€‚ä½ å¯ä»¥æŠŠ MySQL æƒ³è±¡æˆä¸€ä¸ªâ€œæ“ä½œç³»ç»Ÿâ€ï¼Œè€Œå­˜å‚¨å¼•æ“åˆ™æ˜¯å…¶åº•å±‚çš„â€œæ–‡ä»¶ç³»ç»Ÿâ€ã€‚ä¸åŒçš„å­˜å‚¨å¼•æ“æä¾›äº†ä¸åŒçš„åŠŸèƒ½ç‰¹æ€§ï¼Œæ¯”å¦‚æ˜¯å¦æ”¯æŒäº‹åŠ¡ã€æ˜¯å¦æ”¯æŒå¤–é”®ã€å¦‚ä½•å¤„ç†å¹¶å‘è¯»å†™ç­‰ã€‚</p>
<p>MySQL é»˜è®¤ä½¿ç”¨Â <strong>InnoDB</strong>Â ä½œä¸ºå…¶é»˜è®¤å­˜å‚¨å¼•æ“ï¼ˆè‡ª MySQL 5.5 èµ·ï¼‰ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œé»˜è®¤æ˜¯Â <strong>MyISAM</strong>ã€‚è¿™ä¸€è½¬å˜æœ¬èº«å°±è¯´æ˜äº†è¡Œä¸šå¯¹æ•°æ®ä¸€è‡´æ€§ã€å¯é æ€§å’Œå¹¶å‘å¤„ç†èƒ½åŠ›éœ€æ±‚çš„æå‡ã€‚</p>
<blockquote>
<p>âœ…Â <strong>å°çŸ¥è¯†</strong>ï¼šä½ å¯ä»¥é€šè¿‡Â <code>SHOW ENGINES;</code>Â æŸ¥çœ‹å½“å‰ MySQL å®ä¾‹æ”¯æŒçš„æ‰€æœ‰å­˜å‚¨å¼•æ“åŠå…¶çŠ¶æ€ã€‚</p>
</blockquote>
<pre><code class="hljs language-sql" lang="sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">SHOW</span> ENGINES;
<span class="hljs-operator">+</span><span class="hljs-comment">--------------------+---------+----------------------------------------------------------------+</span>
<span class="hljs-operator">|</span> Engine             <span class="hljs-operator">|</span> Support <span class="hljs-operator">|</span> Comment                                                        <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">--------------------+---------+----------------------------------------------------------------+</span>
<span class="hljs-operator">|</span> InnoDB             <span class="hljs-operator">|</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-operator">|</span> Supports transactions, <span class="hljs-type">row</span><span class="hljs-operator">-</span>level locking, <span class="hljs-keyword">and</span> <span class="hljs-keyword">foreign</span> keys     <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> MyISAM             <span class="hljs-operator">|</span> YES     <span class="hljs-operator">|</span> MyISAM storage engine                                          <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> MEMORY             <span class="hljs-operator">|</span> YES     <span class="hljs-operator">|</span> Hash based, stored <span class="hljs-keyword">in</span> memory, useful <span class="hljs-keyword">for</span> temporary tables      <span class="hljs-operator">|</span>
...

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">12345678</span>
</code></pre>
<hr/>
<h3 data-id="heading-2"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1. äº‹åŠ¡æ”¯æŒï¼šACID vs æ— äº‹åŠ¡ âš–ï¸</h3>
<h4 data-id="heading-3"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>InnoDBï¼šæ”¯æŒå®Œæ•´ ACID äº‹åŠ¡</h4>
<p>InnoDB æ˜¯Â <strong>äº‹åŠ¡å®‰å…¨</strong>ï¼ˆtransaction-safeï¼‰çš„å­˜å‚¨å¼•æ“ï¼Œå®Œå…¨æ”¯æŒÂ <strong>ACID</strong>Â å››å¤§ç‰¹æ€§ï¼š</p>
<ul>
<li><strong>Atomicityï¼ˆåŸå­æ€§ï¼‰</strong> ï¼šäº‹åŠ¡ä¸­çš„æ‰€æœ‰æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å›æ»šã€‚</li>
<li><strong>Consistencyï¼ˆä¸€è‡´æ€§ï¼‰</strong> ï¼šäº‹åŠ¡æ‰§è¡Œå‰åï¼Œæ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´çŠ¶æ€è½¬ç§»åˆ°å¦ä¸€ä¸ªä¸€è‡´çŠ¶æ€ã€‚</li>
<li><strong>Isolationï¼ˆéš”ç¦»æ€§ï¼‰</strong> ï¼šå¤šä¸ªäº‹åŠ¡å¹¶å‘æ‰§è¡Œæ—¶äº’ä¸å¹²æ‰°ã€‚</li>
<li><strong>Durabilityï¼ˆæŒä¹…æ€§ï¼‰</strong> ï¼šä¸€æ—¦äº‹åŠ¡æäº¤ï¼Œå…¶ç»“æœæ°¸ä¹…ä¿å­˜ï¼Œå³ä½¿ç³»ç»Ÿå´©æºƒä¹Ÿä¸ä¼šä¸¢å¤±ã€‚</li>
</ul>
<p>è¿™ä½¿å¾— InnoDB æˆä¸ºé‡‘èã€ç”µå•†ã€è®¢å•ç³»ç»Ÿç­‰å¯¹æ•°æ®ä¸€è‡´æ€§è¦æ±‚æé«˜çš„åœºæ™¯çš„é¦–é€‰ã€‚</p>
<h4 data-id="heading-4"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>MyISAMï¼šä¸æ”¯æŒäº‹åŠ¡</h4>
<p>MyISAMÂ <strong>å®Œå…¨ä¸æ”¯æŒäº‹åŠ¡</strong>ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>æ— æ³•å›æ»šï¼ˆROLLBACKï¼‰ï¼›</li>
<li>æ— æ³•ä¿è¯å¤šä¸ªæ“ä½œçš„åŸå­æ€§ï¼›</li>
<li>åœ¨å†™å…¥è¿‡ç¨‹ä¸­è‹¥å‘ç”Ÿå´©æºƒï¼Œå¯èƒ½å¯¼è‡´æ•°æ®æŸåæˆ–ä¸ä¸€è‡´ã€‚</li>
</ul>
<p>è™½ç„¶ MyISAM åœ¨æŸäº›åªè¯»æˆ–è½»é‡çº§å†™å…¥åœºæ™¯ä¸‹æ€§èƒ½ä¼˜å¼‚ï¼Œä½†ç¼ºä¹äº‹åŠ¡æ”¯æŒä½¿å…¶éš¾ä»¥èƒœä»»ç°ä»£åº”ç”¨çš„æ ¸å¿ƒæ•°æ®å­˜å‚¨ã€‚</p>
<h4 data-id="heading-5"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>Java ç¤ºä¾‹ï¼šäº‹åŠ¡å›æ»šå¯¹æ¯”</h4>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç”¨æˆ·ä½™é¢è½¬è´¦çš„åœºæ™¯ï¼š</p>
<h5 data-id="heading-6"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä½¿ç”¨ InnoDBï¼ˆæ”¯æŒäº‹åŠ¡ï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.sql.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">InnoDBTransactionExample</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-string">"jdbc:mysql://localhost:3306/testdb?useSSL=false&amp;serverTimezone=UTC"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-string">"root"</span>;
        <span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> <span class="hljs-string">"password"</span>;

        <span class="hljs-keyword">try</span> (<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, user, password)) {
            conn.setAutoCommit(<span class="hljs-literal">false</span>); <span class="hljs-comment">// å…³é—­è‡ªåŠ¨æäº¤</span>

            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// æ‰£å‡ A ç”¨æˆ·ä½™é¢</span>
                <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">ps1</span> <span class="hljs-operator">=</span> conn.prepareStatement(<span class="hljs-string">"UPDATE accounts SET balance = balance - 100 WHERE user_id = ?"</span>);
                ps1.setInt(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
                ps1.executeUpdate();

                <span class="hljs-comment">// å¢åŠ  B ç”¨æˆ·ä½™é¢</span>
                <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">ps2</span> <span class="hljs-operator">=</span> conn.prepareStatement(<span class="hljs-string">"UPDATE accounts SET balance = balance + 100 WHERE user_id = ?"</span>);
                ps2.setInt(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);
                ps2.executeUpdate();

                <span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚å¸¸ï¼šäººä¸ºæŠ›å‡ºå¼‚å¸¸è§¦å‘å›æ»š</span>
                <span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ¨¡æ‹Ÿè½¬è´¦å¤±è´¥ï¼"</span>);

                conn.commit(); <span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
                System.out.println(<span class="hljs-string">"è½¬è´¦æˆåŠŸï¼"</span>);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                conn.rollback(); <span class="hljs-comment">// å›æ»šäº‹åŠ¡</span>
                System.out.println(<span class="hljs-string">"è½¬è´¦å¤±è´¥ï¼Œå·²å›æ»šï¼š"</span> + e.getMessage());
            }
        } <span class="hljs-keyword">catch</span> (SQLException e) {
            e.printStackTrace();
        }
    }
}

AIå†™ä»£ç java
è¿è¡Œ
<span class="hljs-number">123456789101112131415161718192021222324252627282930313233343536</span>
</code></pre>
<blockquote>
<p>âœ… å¦‚æœÂ <code>accounts</code>Â è¡¨ä½¿ç”¨çš„æ˜¯ InnoDB å¼•æ“ï¼Œä¸Šè¿°ä»£ç èƒ½ç¡®ä¿å³ä½¿ç¬¬äºŒæ­¥å¤±è´¥ï¼Œç¬¬ä¸€æ­¥çš„æ‰£æ¬¾ä¹Ÿä¼šè¢«å›æ»šï¼Œä¿æŒæ•°æ®ä¸€è‡´æ€§ã€‚</p>
</blockquote>
<h5 data-id="heading-7"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ä½¿ç”¨ MyISAMï¼ˆæ— äº‹åŠ¡ï¼‰</h5>
<p>å¦‚æœÂ <code>accounts</code>Â è¡¨ä½¿ç”¨çš„æ˜¯ MyISAM å¼•æ“ï¼Œå³ä½¿ä½ åœ¨ Java ä¸­è°ƒç”¨Â <code>conn.rollback()</code>ï¼Œ<strong>MySQL ä¹Ÿä¸ä¼šçœŸæ­£å›æ»š</strong>ï¼å› ä¸º MyISAM ä¸æ”¯æŒäº‹åŠ¡ã€‚ç»“æœå¯èƒ½æ˜¯ï¼šA ç”¨æˆ·çš„é’±è¢«æ‰£äº†ï¼Œä½† B ç”¨æˆ·æ²¡æ”¶åˆ°ï¼Œé€ æˆèµ„é‡‘æŸå¤± ğŸ’¸ã€‚</p>
<blockquote>
<p>ğŸš«Â <strong>ç»“è®º</strong>ï¼šæ¶‰åŠèµ„é‡‘ã€åº“å­˜ã€çŠ¶æ€å˜æ›´ç­‰å…³é”®ä¸šåŠ¡ï¼Œå¿…é¡»ä½¿ç”¨ InnoDBã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-8"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2. é”æœºåˆ¶ï¼šè¡Œé” vs è¡¨é” ğŸ”’</h3>
<p>é”æœºåˆ¶ç›´æ¥å½±å“æ•°æ®åº“çš„å¹¶å‘æ€§èƒ½ã€‚</p>
<h4 data-id="heading-9"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>InnoDBï¼šæ”¯æŒè¡Œçº§é”ï¼ˆRow-Level Lockingï¼‰</h4>
<p>InnoDB åœ¨æ‰§è¡Œ DMLï¼ˆINSERT/UPDATE/DELETEï¼‰æ“ä½œæ—¶ï¼Œé»˜è®¤ä½¿ç”¨Â <strong>è¡Œçº§é”</strong>ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>å¤šä¸ªäº‹åŠ¡å¯ä»¥åŒæ—¶ä¿®æ”¹ä¸åŒè¡Œçš„æ•°æ®ï¼Œäº’ä¸é˜»å¡ï¼›</li>
<li>å¹¶å‘å†™å…¥èƒ½åŠ›å¼ºï¼Œé€‚åˆé«˜å¹¶å‘ OLTPï¼ˆåœ¨çº¿äº‹åŠ¡å¤„ç†ï¼‰ç³»ç»Ÿã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- äº‹åŠ¡A</span>
<span class="hljs-keyword">UPDATE</span> users <span class="hljs-keyword">SET</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'Alice'</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">-- äº‹åŠ¡B</span>
<span class="hljs-keyword">UPDATE</span> users <span class="hljs-keyword">SET</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'Bob'</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">12345</span>
</code></pre>
<p>åœ¨ InnoDB ä¸­ï¼Œè¿™ä¸¤ä¸ª UPDATE å¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œå› ä¸ºå®ƒä»¬é”å®šçš„æ˜¯ä¸åŒè¡Œã€‚</p>
<h4 data-id="heading-10"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>MyISAMï¼šä»…æ”¯æŒè¡¨çº§é”ï¼ˆTable-Level Lockingï¼‰</h4>
<p>MyISAM åœ¨æ‰§è¡Œä»»ä½•å†™æ“ä½œï¼ˆINSERT/UPDATE/DELETEï¼‰æ—¶ï¼Œéƒ½ä¼šå¯¹æ•´ä¸ªè¡¨åŠ é”ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªå†™æ“ä½œï¼›</li>
<li>è¯»æ“ä½œå¯ä»¥å¹¶å‘ï¼Œä½†å†™æ“ä½œä¼šé˜»å¡æ‰€æœ‰å…¶ä»–è¯»å†™æ“ä½œï¼›</li>
<li>åœ¨é«˜å¹¶å‘å†™å…¥åœºæ™¯ä¸‹ï¼Œæ€§èƒ½æ€¥å‰§ä¸‹é™ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- äº‹åŠ¡Aï¼ˆå†™ï¼‰</span>
<span class="hljs-keyword">UPDATE</span> users <span class="hljs-keyword">SET</span> name <span class="hljs-operator">=</span> <span class="hljs-string">'Alice'</span> <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

<span class="hljs-comment">-- äº‹åŠ¡Bï¼ˆè¯»ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">12345</span>
</code></pre>
<p>åœ¨ MyISAM ä¸­ï¼Œäº‹åŠ¡Bä¼šè¢«é˜»å¡ï¼Œç›´åˆ°äº‹åŠ¡Aå®Œæˆå†™å…¥å¹¶é‡Šæ”¾è¡¨é”ã€‚</p>
<h4 data-id="heading-11"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>å¹¶å‘æ€§èƒ½å¯¹æ¯”å›¾ï¼ˆMermaidï¼‰</h4>
<pre><code class="hljs language-css" lang="css">graph LR
    <span class="hljs-selector-tag">A</span><span class="hljs-selector-attr">[é«˜å¹¶å‘å†™å…¥åœºæ™¯]</span> --&gt; <span class="hljs-selector-tag">B</span>{å­˜å‚¨å¼•æ“}
    <span class="hljs-selector-tag">B</span> --&gt;|InnoDB| C<span class="hljs-selector-attr">[è¡Œçº§é”&lt;br/&gt;å¤šäº‹åŠ¡å¹¶è¡Œä¿®æ”¹ä¸åŒè¡Œ&lt;br/&gt;âœ… é«˜å¹¶å‘]</span>
    <span class="hljs-selector-tag">B</span> --&gt;|MyISAM| D<span class="hljs-selector-attr">[è¡¨çº§é”&lt;br/&gt;å†™æ“ä½œé˜»å¡å…¨è¡¨&lt;br/&gt;âŒ ä½å¹¶å‘]</span>

AIå†™ä»£ç mermaid
<span class="hljs-number">1234</span>
</code></pre>
<blockquote>
<p>ğŸ“ŒÂ <strong>æç¤º</strong>ï¼šå³ä½¿ MyISAM çš„ SELECT å¾ˆå¿«ï¼Œä½†ä¸€æ—¦æœ‰å†™å…¥ï¼Œæ‰€æœ‰æŸ¥è¯¢éƒ½å¯èƒ½æ’é˜Ÿç­‰å¾…ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-12"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3. å´©æºƒæ¢å¤ä¸æ•°æ®å®‰å…¨æ€§ ğŸ›¡ï¸</h3>
<h4 data-id="heading-13"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>InnoDBï¼šå…·å¤‡å´©æºƒæ¢å¤èƒ½åŠ›ï¼ˆCrash Recoveryï¼‰</h4>
<p>InnoDB ä½¿ç”¨Â <strong>é‡åšæ—¥å¿—</strong>ï¼ˆRedoÂ Logï¼‰å’ŒÂ <strong>å›æ»šæ®µ</strong>ï¼ˆUndo Logï¼‰æ¥å®ç°å´©æºƒæ¢å¤ï¼š</p>
<ul>
<li>Redo Log è®°å½•å·²æäº¤äº‹åŠ¡çš„ç‰©ç†ä¿®æ”¹ï¼Œç”¨äºåœ¨å´©æºƒåé‡æ”¾ï¼Œç¡®ä¿æŒä¹…æ€§ï¼›</li>
<li>Undo Log ç”¨äºå›æ»šæœªæäº¤äº‹åŠ¡ï¼Œå¹¶æ”¯æŒ MVCCï¼ˆå¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼‰ã€‚</li>
</ul>
<p>å³ä½¿ MySQL æœåŠ¡æ„å¤–å®•æœºï¼ŒInnoDB ä¹Ÿèƒ½åœ¨é‡å¯æ—¶è‡ªåŠ¨æ¢å¤åˆ°ä¸€è‡´çŠ¶æ€ï¼Œ<strong>æå¤§é™ä½æ•°æ®ä¸¢å¤±é£é™©</strong>ã€‚</p>
<h4 data-id="heading-14"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>MyISAMï¼šæ— å´©æºƒæ¢å¤æœºåˆ¶</h4>
<p>MyISAM æ²¡æœ‰äº‹åŠ¡æ—¥å¿—ï¼Œæ•°æ®ç›´æ¥å†™å…¥ç£ç›˜æ–‡ä»¶ï¼ˆ<code>.MYD</code>Â æ•°æ®æ–‡ä»¶ +Â <code>.MYI</code>Â ç´¢å¼•æ–‡ä»¶ï¼‰ã€‚å¦‚æœåœ¨å†™å…¥è¿‡ç¨‹ä¸­å‘ç”Ÿæ–­ç”µæˆ–å´©æºƒï¼š</p>
<ul>
<li>å¯èƒ½å¯¼è‡´è¡¨æŸåï¼ˆcorruptionï¼‰ï¼›</li>
<li>éœ€è¦æ‰‹åŠ¨è¿è¡ŒÂ <code>REPAIR TABLE</code>Â æˆ–Â <code>myisamchk</code>Â å·¥å…·ä¿®å¤ï¼›</li>
<li>ä¿®å¤è¿‡ç¨‹è€—æ—¶ä¸”å¯èƒ½ä¸¢å¤±æ•°æ®ã€‚</li>
</ul>
<blockquote>
<p>ğŸ“š å®˜æ–¹æ–‡æ¡£æŒ‡å‡ºï¼šMyISAM è¡¨åœ¨å´©æºƒåâ€œå¯èƒ½éœ€è¦ä¿®å¤â€ï¼Œè€Œ InnoDB åˆ™â€œè‡ªåŠ¨æ¢å¤â€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-15"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>4. å¤–é”®æ”¯æŒï¼šå…³ç³»å®Œæ•´æ€§ä¿éšœ ğŸ¤</h3>
<h4 data-id="heading-16"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>InnoDBï¼šæ”¯æŒå¤–é”®çº¦æŸï¼ˆForeign Keyï¼‰</h4>
<p>InnoDB æ”¯æŒåœ¨è¡¨ä¹‹é—´å®šä¹‰å¤–é”®ï¼Œå¼ºåˆ¶ç»´æŠ¤<strong>å¼•ç”¨å®Œæ•´æ€§</strong>ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> orders (
    id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY,
    user_id <span class="hljs-type">INT</span>,
    amount <span class="hljs-type">DECIMAL</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>),
    <span class="hljs-keyword">FOREIGN</span> KEY (user_id) <span class="hljs-keyword">REFERENCES</span> users(id)
) ENGINE<span class="hljs-operator">=</span>InnoDB;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">123456</span>
</code></pre>
<p>è¿™æ ·ï¼Œå½“ä½ å°è¯•æ’å…¥ä¸€ä¸ªä¸å­˜åœ¨çš„Â <code>user_id</code>Â æ—¶ï¼ŒMySQL ä¼šæ‹’ç»è¯¥æ“ä½œï¼Œé˜²æ­¢â€œå­¤å„¿è®¢å•â€ã€‚</p>
<p>æ­¤å¤–ï¼Œå¤–é”®è¿˜æ”¯æŒçº§è”æ“ä½œï¼ˆCASCADEï¼‰ï¼š</p>
<ul>
<li><code>ON DELETE CASCADE</code>ï¼šåˆ é™¤ç”¨æˆ·æ—¶è‡ªåŠ¨åˆ é™¤å…¶æ‰€æœ‰è®¢å•ï¼›</li>
<li><code>ON UPDATE CASCADE</code>ï¼šæ›´æ–°ç”¨æˆ· ID æ—¶åŒæ­¥æ›´æ–°è®¢å•ä¸­çš„ user_idã€‚</li>
</ul>
<h4 data-id="heading-17"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>MyISAMï¼šä¸æ”¯æŒå¤–é”®</h4>
<p>MyISAMÂ <strong>å®Œå…¨å¿½ç•¥</strong>Â <code>FOREIGN KEY</code>Â è¯­æ³•ï¼ˆå³ä½¿ä½ å†™äº†ï¼ŒMySQL ä¹Ÿä¼šé™é»˜å¿½ç•¥ï¼‰ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>æ— æ³•é€šè¿‡æ•°æ®åº“å±‚é¢ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼›</li>
<li>å¿…é¡»åœ¨åº”ç”¨å±‚æ‰‹åŠ¨æ ¡éªŒå…³è”å…³ç³»ï¼Œå¢åŠ å¼€å‘å¤æ‚åº¦å’Œå‡ºé”™æ¦‚ç‡ã€‚</li>
</ul>
<blockquote>
<p>ğŸ’¡Â <strong>å»ºè®®</strong>ï¼šå¦‚æœä½ çš„åº”ç”¨ä¾èµ–è¡¨é—´å…³ç³»ï¼ˆå¦‚ç”¨æˆ·-è®¢å•ã€æ–‡ç« -è¯„è®ºï¼‰ï¼Œè¯·åŠ¡å¿…ä½¿ç”¨ InnoDBã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-18"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>5. ç´¢å¼•ç»“æ„ï¼šB+Tree vs å…¨è¡¨æ‰«æä¼˜åŒ– ğŸ“š</h3>
<p>è™½ç„¶ InnoDB å’Œ MyISAM éƒ½ä½¿ç”¨Â <strong>B+Tree</strong>Â ä½œä¸ºç´¢å¼•ç»“æ„ï¼Œä½†å®ç°æ–¹å¼æœ‰æœ¬è´¨åŒºåˆ«ã€‚</p>
<h4 data-id="heading-19"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>InnoDBï¼šèšç°‡ç´¢å¼•ï¼ˆClustered Indexï¼‰</h4>
<ul>
<li><strong>ä¸»é”®ç´¢å¼•å³æ•°æ®æœ¬èº«</strong>ï¼šInnoDB å°†è¡¨æ•°æ®æŒ‰ä¸»é”®é¡ºåºç‰©ç†å­˜å‚¨ï¼Œä¸»é”®ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ç›´æ¥åŒ…å«è¡Œæ•°æ®ã€‚</li>
<li><strong>äºŒçº§ç´¢å¼•åŒ…å«ä¸»é”®å€¼</strong>ï¼šéä¸»é”®ç´¢å¼•ï¼ˆSecondary Indexï¼‰çš„å¶å­èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯ä¸»é”®å€¼ï¼ŒæŸ¥è¯¢æ—¶éœ€â€œå›è¡¨â€æŸ¥æ‰¾å®Œæ•´æ•°æ®ã€‚</li>
</ul>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>ä¸»é”®æŸ¥è¯¢æå¿«ï¼ˆæ— éœ€é¢å¤– I/Oï¼‰ï¼›</li>
<li>èŒƒå›´æŸ¥è¯¢é«˜æ•ˆï¼ˆæ•°æ®ç‰©ç†æœ‰åºï¼‰ã€‚</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>æ’å…¥æ€§èƒ½å—ä¸»é”®é¡ºåºå½±å“ï¼ˆæœ€å¥½ä½¿ç”¨è‡ªå¢ IDï¼‰ï¼›</li>
<li>äºŒçº§ç´¢å¼•æŸ¥è¯¢éœ€ä¸¤æ¬¡æŸ¥æ‰¾ï¼ˆå…ˆæŸ¥ç´¢å¼•ï¼Œå†æŸ¥ä¸»é”®ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-20"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>MyISAMï¼šéèšç°‡ç´¢å¼•ï¼ˆNon-Clustered Indexï¼‰</h4>
<ul>
<li><strong>ç´¢å¼•ä¸æ•°æ®åˆ†ç¦»</strong>ï¼š<code>.MYI</code>Â æ–‡ä»¶å­˜ç´¢å¼•ï¼Œ<code>.MYD</code>Â æ–‡ä»¶å­˜æ•°æ®ï¼›</li>
<li>æ‰€æœ‰ç´¢å¼•ï¼ˆåŒ…æ‹¬ä¸»é”®ï¼‰çš„å¶å­èŠ‚ç‚¹éƒ½å­˜å‚¨æŒ‡å‘æ•°æ®è¡Œçš„<strong>ç‰©ç†åœ°å€</strong>ï¼ˆæŒ‡é’ˆï¼‰ã€‚</li>
</ul>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>ç´¢å¼•ç»“æ„ç®€å•ï¼›</li>
<li>COUNT(*) æŸ¥è¯¢æå¿«ï¼ˆç›´æ¥è¯»å–è¡¨å…ƒæ•°æ®ä¸­çš„è¡Œæ•°ç¼“å­˜ï¼‰ã€‚</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>ä¸»é”®æŸ¥è¯¢éœ€ä¸¤æ¬¡ I/Oï¼ˆå…ˆæŸ¥ç´¢å¼•æŒ‡é’ˆï¼Œå†è¯»æ•°æ®ï¼‰ï¼›</li>
<li>æ•°æ®æ— åºå­˜å‚¨ï¼ŒèŒƒå›´æŸ¥è¯¢æ•ˆç‡è¾ƒä½ã€‚</li>
</ul>
<h4 data-id="heading-21"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>COUNT(*) æ€§èƒ½å·®å¼‚</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- MyISAMï¼šO(1) æ—¶é—´å¤æ‚åº¦ï¼ˆç›´æ¥è¿”å›ç¼“å­˜çš„è¡Œæ•°ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> myisam_table;

<span class="hljs-comment">-- InnoDBï¼šO(n) æ—¶é—´å¤æ‚åº¦ï¼ˆéœ€æ‰«æèšç°‡ç´¢å¼•ï¼‰</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> innodb_table;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">12345</span>
</code></pre>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šInnoDB çš„Â <code>COUNT(*)</code>Â åœ¨æ—  WHERE æ¡ä»¶æ—¶è¾ƒæ…¢ï¼Œä½†å¯é€šè¿‡æ·»åŠ è¦†ç›–ç´¢å¼•ä¼˜åŒ–ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-22"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>6. å…¨æ–‡ç´¢å¼•ï¼ˆFull-Text Searchï¼‰ğŸ”</h3>
<p>å†å²ä¸Šï¼ŒMyISAM æ˜¯å”¯ä¸€æ”¯æŒå…¨æ–‡ç´¢å¼•çš„å¼•æ“ã€‚ä½†ä»Â <strong>MySQL 5.6 å¼€å§‹ï¼ŒInnoDB ä¹Ÿæ”¯æŒå…¨æ–‡ç´¢å¼•</strong>ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- InnoDB å…¨æ–‡ç´¢å¼•ï¼ˆMySQL 5.6+ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> articles (
    id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY,
    title <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">200</span>),
    content TEXT,
    FULLTEXT(title, content)
) ENGINE<span class="hljs-operator">=</span>InnoDB;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">1234567</span>
</code></pre>
<p>å› æ­¤ï¼Œ<strong>å…¨æ–‡æœç´¢ä¸å†æ˜¯ MyISAM çš„ä¸“å±ä¼˜åŠ¿</strong>ã€‚é™¤éä½ ä½¿ç”¨çš„æ˜¯éå¸¸è€çš„ MySQL ç‰ˆæœ¬ï¼ˆ&lt;5.6ï¼‰ï¼Œå¦åˆ™æ— éœ€ä¸ºæ­¤é€‰æ‹© MyISAMã€‚</p>
<hr/>
<h3 data-id="heading-23"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>7. å­˜å‚¨ç©ºé—´ä¸å‹ç¼© ğŸ’¾</h3>
<h4 data-id="heading-24"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>InnoDB</h4>
<ul>
<li>å ç”¨æ›´å¤šç£ç›˜ç©ºé—´ï¼ˆå› éœ€å­˜å‚¨äº‹åŠ¡æ—¥å¿—ã€å›æ»šä¿¡æ¯ã€åŒå†™ç¼“å†²ç­‰ï¼‰ï¼›</li>
<li>æ”¯æŒè¡¨å‹ç¼©ï¼ˆéœ€å¼€å¯Â <code>innodb_file_per_table</code>Â å’Œå‹ç¼©ç®—æ³•ï¼‰ï¼›</li>
<li>è¡Œæ ¼å¼å¯é…ç½®ï¼ˆCOMPACTã€DYNAMICã€REDUNDANTï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-25"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>MyISAM</h4>
<ul>
<li>å­˜å‚¨æ›´ç´§å‡‘ï¼›</li>
<li>æ”¯æŒè¡¨çº§å‹ç¼©ï¼ˆä½¿ç”¨Â <code>myisampack</code>Â å·¥å…·ï¼‰ï¼Œä½†å‹ç¼©åè¡¨å˜ä¸ºåªè¯»ã€‚</li>
</ul>
<blockquote>
<p>ğŸ“Š ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒInnoDB è¡¨æ¯” MyISAM è¡¨å¤§çº¦å¤§ 20%~30%ï¼Œä½†æ¢æ¥çš„æ˜¯äº‹åŠ¡ã€å´©æºƒæ¢å¤ç­‰å…³é”®èƒ½åŠ›ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-26"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>8. ç¼“å­˜æœºåˆ¶ï¼šBuffer Pool vs Key Buffer ğŸ§ </h3>
<h4 data-id="heading-27"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>InnoDBï¼šä½¿ç”¨ Buffer Pool</h4>
<ul>
<li>ç¼“å­˜<strong>æ•°æ®é¡µ + ç´¢å¼•é¡µ</strong>ï¼›</li>
<li>é€šè¿‡ LRU ç®—æ³•ç®¡ç†å†…å­˜ï¼›</li>
<li>å¯é…ç½®å¤§å°ï¼ˆ<code>innodb_buffer_pool_size</code>ï¼‰ï¼Œé€šå¸¸è®¾ä¸ºç‰©ç†å†…å­˜çš„ 50%~75%ã€‚</li>
</ul>
<h4 data-id="heading-28"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>MyISAMï¼šä½¿ç”¨ Key Buffer</h4>
<ul>
<li>ä»…ç¼“å­˜<strong>ç´¢å¼•å—</strong>ï¼›</li>
<li>æ•°æ®ç¼“å­˜ä¾èµ–æ“ä½œç³»ç»Ÿæ–‡ä»¶ç¼“å­˜ï¼›</li>
<li>é…ç½®å‚æ•°ä¸ºÂ <code>key_buffer_size</code>ã€‚</li>
</ul>
<blockquote>
<p>ğŸ“Œ å¯¹äºé¢‘ç¹è®¿é—®çš„æ•°æ®ï¼ŒInnoDB çš„ Buffer Pool èƒ½æ˜¾è‘—å‡å°‘ç£ç›˜ I/Oï¼Œæå‡æ•´ä½“æ€§èƒ½ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-29"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>9. é€‚ç”¨åœºæ™¯æ€»ç»“ ğŸ¯</h3>








































<table><thead><tr><th>åœºæ™¯</th><th>æ¨èå¼•æ“</th><th>ç†ç”±</th></tr></thead><tbody><tr><td>ç”µå•†ã€é‡‘èã€è®¢å•ç³»ç»Ÿ</td><td>âœ… InnoDB</td><td>éœ€è¦äº‹åŠ¡ã€å¤–é”®ã€é«˜å¹¶å‘å†™å…¥</td></tr><tr><td>æ—¥å¿—è®°å½•ã€åªè¯»æŠ¥è¡¨</td><td>âš ï¸ MyISAMï¼ˆæˆ–è€ƒè™‘ Archiveï¼‰</td><td>å†™å…¥å°‘ã€è¯»å¤šã€æ— éœ€äº‹åŠ¡</td></tr><tr><td>é«˜é¢‘ COUNT(*) ç»Ÿè®¡</td><td>âš ï¸ MyISAM</td><td>O(1) è¿”å›è¡Œæ•°</td></tr><tr><td>å…¨æ–‡æœç´¢ï¼ˆMySQL â‰¥5.6ï¼‰</td><td>âœ… InnoDB</td><td>å·²æ”¯æŒå…¨æ–‡ç´¢å¼•</td></tr><tr><td>é«˜å¹¶å‘ OLTP åº”ç”¨</td><td>âœ… InnoDB</td><td>è¡Œé” + MVCC æ”¯æŒé«˜å¹¶å‘</td></tr><tr><td>ä¸´æ—¶æ•°æ®åˆ†æè¡¨</td><td>âš ï¸ MyISAM / MEMORY</td><td>å¿«é€Ÿåˆ›å»ºã€æ— éœ€æŒä¹…åŒ–</td></tr></tbody></table>
<blockquote>
<p>â—Â <strong>é‡è¦æé†’</strong>ï¼šéšç€ç¡¬ä»¶æˆæœ¬ä¸‹é™å’Œ MySQL ä¼˜åŒ–è¿›æ­¥ï¼Œ<strong>MyISAM çš„ä¼˜åŠ¿åœºæ™¯è¶Šæ¥è¶Šå°‘</strong>ã€‚é™¤éä½ æœ‰éå¸¸æ˜ç¡®çš„åªè¯»ã€é«˜é€Ÿ COUNT éœ€æ±‚ï¼Œå¦åˆ™é»˜è®¤é€‰æ‹© InnoDB æ›´å®‰å…¨ã€æ›´é€šç”¨ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-30"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>10. Java åº”ç”¨ä¸­çš„æœ€ä½³å®è·µ ğŸ› ï¸</h3>
<h4 data-id="heading-31"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>1. æ˜¾å¼æŒ‡å®šå­˜å‚¨å¼•æ“ï¼ˆå»ºè¡¨æ—¶ï¼‰</h4>
<pre><code class="hljs language-ini" lang="ini">String <span class="hljs-attr">createTableSQL</span> = <span class="hljs-string">"""
    CREATE TABLE products (
        id BIGINT AUTO_INCREMENT PRIMARY KEY,
        name VARCHAR(255) NOT NULL,
        price DECIMAL(10,2),
        INDEX idx_name (name)
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
    """</span><span class="hljs-comment">;</span>

AIå†™ä»£ç java
è¿è¡Œ
12345678
</code></pre>
<h4 data-id="heading-32"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>2. ä½¿ç”¨è¿æ¥æ±  + äº‹åŠ¡ç®¡ç†ï¼ˆSpring Boot ç¤ºä¾‹ï¼‰</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Service</span>
<span class="hljs-variable">@Transactional</span> <span class="hljs-comment">// Spring è‡ªåŠ¨ç®¡ç† InnoDB äº‹åŠ¡</span>
public class OrderService {

    <span class="hljs-variable">@Autowired</span>
    private JdbcTemplate jdbcTemplate;

    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">transfer</span>(Long fromUserId, Long toUserId, BigDecimal amount) {
        <span class="hljs-selector-tag">jdbcTemplate</span><span class="hljs-selector-class">.update</span>(<span class="hljs-string">"UPDATE accounts SET balance = balance - ? WHERE user_id = ?"</span>, amount, fromUserId);
        <span class="hljs-selector-tag">jdbcTemplate</span><span class="hljs-selector-class">.update</span>(<span class="hljs-string">"UPDATE accounts SET balance = balance + ? WHERE user_id = ?"</span>, amount, toUserId);
        <span class="hljs-comment">// è‹¥å¼‚å¸¸ï¼ŒSpring è‡ªåŠ¨å›æ»š</span>
    }
}

<span class="hljs-selector-tag">AI</span>å†™ä»£ç <span class="hljs-selector-tag">java</span>
è¿è¡Œ
<span class="hljs-number">12345678910111213</span>
</code></pre>
<h4 data-id="heading-33"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>3. é¿å…åœ¨ MyISAM è¡¨ä¸Šä½¿ç”¨äº‹åŠ¡æ³¨è§£</h4>
<p>å¦‚æœä½ ä¸å°å¿ƒåœ¨ MyISAM è¡¨ä¸Šä½¿ç”¨äº†Â <code>@Transactional</code>ï¼ŒSpring ä¸ä¼šæŠ¥é”™ï¼Œä½†<strong>äº‹åŠ¡ä¸ä¼šç”Ÿæ•ˆ</strong>ï¼åŠ¡å¿…ç¡®è®¤è¡¨å¼•æ“ã€‚</p>
<hr/>
<h3 data-id="heading-34"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>11. å¦‚ä½•æŸ¥çœ‹å’Œè½¬æ¢å­˜å‚¨å¼•æ“ï¼ŸğŸ”§</h3>
<h4 data-id="heading-35"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>æŸ¥çœ‹è¡¨å¼•æ“</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SHOW</span> <span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> users;
<span class="hljs-comment">-- æˆ–</span>
<span class="hljs-keyword">SELECT</span> ENGINE <span class="hljs-keyword">FROM</span> information_schema.TABLES 
<span class="hljs-keyword">WHERE</span> TABLE_SCHEMA <span class="hljs-operator">=</span> <span class="hljs-string">'your_db'</span> <span class="hljs-keyword">AND</span> TABLE_NAME <span class="hljs-operator">=</span> <span class="hljs-string">'users'</span>;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">1234</span>
</code></pre>
<h4 data-id="heading-36"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>è½¬æ¢å¼•æ“ï¼ˆè°¨æ…æ“ä½œï¼ï¼‰</h4>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å°† MyISAM è¡¨è½¬ä¸º InnoDB</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> your_table ENGINE<span class="hljs-operator">=</span>InnoDB;

AIå†™ä»£ç <span class="hljs-keyword">sql</span>
<span class="hljs-number">12</span>
</code></pre>
<blockquote>
<p>âš ï¸ è½¬æ¢è¿‡ç¨‹ä¼šé‡å»ºæ•´å¼ è¡¨ï¼Œå¤§è¡¨æ“ä½œéœ€åœ¨ä½å³°æœŸè¿›è¡Œï¼Œå¹¶é¢„ç•™è¶³å¤Ÿç£ç›˜ç©ºé—´ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-37"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>12. å¸¸è§è¯¯åŒºæ¾„æ¸… âŒ</h3>
<h4 data-id="heading-38"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>è¯¯åŒº1ï¼šâ€œMyISAM æ¯” InnoDB å¿«â€</h4>
<ul>
<li><strong>éƒ¨åˆ†æ­£ç¡®</strong>ï¼šåœ¨çº¯è¯»ã€æ— å¹¶å‘å†™ã€ç®€å• COUNT åœºæ™¯ä¸‹ï¼ŒMyISAM å¯èƒ½æ›´å¿«ï¼›</li>
<li><strong>ä½†ç°å®åº”ç”¨ä¸­</strong>ï¼šInnoDB çš„ Buffer Poolã€è¡Œé”ã€MVCC ç­‰æœºåˆ¶ä½¿å…¶åœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹ç»¼åˆæ€§èƒ½æ›´ä¼˜ã€‚</li>
</ul>
<h4 data-id="heading-39"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>è¯¯åŒº2ï¼šâ€œInnoDB å ç”¨å¤ªå¤šå†…å­˜â€</h4>
<ul>
<li>æ˜¯çš„ï¼ŒInnoDB éœ€è¦é…ç½®Â <code>innodb_buffer_pool_size</code>ï¼›</li>
<li>ä½†è¿™æ˜¯<strong>å€¼å¾—çš„æŠ•èµ„</strong>ï¼Œåˆç†çš„å†…å­˜é…ç½®èƒ½æå¤§æå‡æ€§èƒ½ã€‚</li>
</ul>
<h4 data-id="heading-40"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>è¯¯åŒº3ï¼šâ€œMyISAM é€‚åˆå¤§æ•°æ®é‡â€</h4>
<ul>
<li>é”™ï¼MyISAM è¡¨è¶Šå¤§ï¼Œå´©æºƒåä¿®å¤æ—¶é—´è¶Šé•¿ï¼›</li>
<li>InnoDB çš„åˆ†åŒºã€å‹ç¼©ã€å¹¶è¡ŒæŸ¥è¯¢æ›´é€‚åˆå¤§æ•°æ®åœºæ™¯ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-41"><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer"/>ç»“è¯­ï¼šé€‰æ‹© InnoDBï¼Œæ‹¥æŠ±æœªæ¥ ğŸŒŸ</h3>
<p>InnoDB å’Œ MyISAM çš„å·®å¼‚ï¼Œæœ¬è´¨ä¸Šæ˜¯Â  <strong>â€œå¯é æ€§ä¼˜å…ˆâ€ vs â€œç®€å•å¿«é€Ÿâ€</strong> Â çš„è®¾è®¡å“²å­¦ä¹‹äº‰ã€‚åœ¨å½“ä»Šåˆ†å¸ƒå¼ã€é«˜å¹¶å‘ã€å¼ºä¸€è‡´æ€§çš„åº”ç”¨æ¶æ„ä¸‹ï¼Œ<strong>InnoDB å‡ ä¹æ˜¯å”¯ä¸€åˆç†çš„é€‰æ‹©</strong>ã€‚</p>
<p>MyISAM å¹¶æœªæ¶ˆå¤±ï¼Œå®ƒä»æœ‰å…¶ niche åœºæ™¯ï¼ˆå¦‚åªè¯»ç»´è¡¨ã€å†å²å½’æ¡£ï¼‰ï¼Œä½†ä½œä¸ºæ–°é¡¹ç›®çš„é»˜è®¤é€‰é¡¹ï¼Œ<strong>InnoDB æ˜¯æ›´å®‰å…¨ã€æ›´å¼ºå¤§ã€æ›´é¢å‘æœªæ¥çš„é€‰æ‹©</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨æˆ·å¯†ç å®‰å…¨å­˜å‚¨ï¼šGo å®ç° SM3 å“ˆå¸ŒåŠ ç›]]></title>    <link>https://juejin.cn/post/7578797337868550178</link>    <guid>https://juejin.cn/post/7578797337868550178</guid>    <pubDate>2025-12-02T06:37:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578797337868550178" data-draft-id="7578853751530127375" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨æˆ·å¯†ç å®‰å…¨å­˜å‚¨ï¼šGo å®ç° SM3 å“ˆå¸ŒåŠ ç›"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T06:37:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»Šå¤©ä¹Ÿå¾ˆå›°"/> <meta itemprop="url" content="https://juejin.cn/user/1286850568007976"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨æˆ·å¯†ç å®‰å…¨å­˜å‚¨ï¼šGo å®ç° SM3 å“ˆå¸ŒåŠ ç›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1286850568007976/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»Šå¤©ä¹Ÿå¾ˆå›°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T06:37:21.000Z" title="Tue Dec 02 2025 06:37:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>å‰è¨€</strong></h2>
<p>åœ¨ç°ä»£ Web ç³»ç»Ÿä¸­ï¼Œ<strong>ç”¨æˆ·å¯†ç å®‰å…¨å­˜å‚¨</strong>æ˜¯éå¸¸å…³é”®çš„ä¸€ç¯ã€‚<br/>
ä¼ ç»Ÿåšæ³•ç”¨ç®€å•å“ˆå¸Œï¼Œå®¹æ˜“å—åˆ°å½©è™¹è¡¨æ”»å‡»ã€‚</p>
<p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ <strong>SM3 å“ˆå¸Œç®—æ³• + éšæœºç› (salt)</strong> æ¥åŠ å¯†ç”¨æˆ·å¯†ç ï¼Œå¹¶æä¾› Go è¯­è¨€å®ç°ç¤ºä¾‹ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>ä¸€ã€ä¸ºä»€ä¹ˆè¦åŠ ç› (Salt)</strong></h2>
<p>ç›´æ¥å“ˆå¸Œå¯†ç å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li>
<p><strong>å½©è™¹è¡¨æ”»å‡»</strong></p>
<ul>
<li>æ”»å‡»è€…å¯ä»¥é€šè¿‡é¢„å…ˆè®¡ç®—çš„å“ˆå¸Œè¡¨å¿«é€Ÿç ´è§£å¸¸ç”¨å¯†ç ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç›¸åŒå¯†ç å“ˆå¸Œå€¼ç›¸åŒ</strong></p>
<ul>
<li>ç”¨æˆ· A å’Œç”¨æˆ· B ä½¿ç”¨ç›¸åŒå¯†ç ï¼Œä¼šç”Ÿæˆç›¸åŒå“ˆå¸Œå€¼ï¼Œå¢åŠ æ³„éœ²é£é™©ã€‚</li>
</ul>
</li>
</ol>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š<br/>
åœ¨å¯†ç å“ˆå¸Œå‰å¢åŠ éšæœºç› (Salt)ï¼Œæ¯ä¸ªç”¨æˆ·çš„å¯†ç å“ˆå¸Œå€¼éƒ½ä¸åŒï¼Œå³ä½¿å¯†ç ç›¸åŒä¹Ÿä¸ä¼šé‡å¤ã€‚</p>
<hr/>
<h2 data-id="heading-2"><strong>äºŒã€SM3 å“ˆå¸Œç®—æ³•</strong></h2>
<p>SM3 æ˜¯ä¸­å›½å›½å®¶æ ‡å‡†çš„å“ˆå¸Œç®—æ³•ï¼ˆå›½å¯†ç®—æ³•ï¼‰ï¼Œå…·æœ‰ï¼š</p>
<ul>
<li>è¾“å‡ºé•¿åº¦ 256 ä½</li>
<li>å®‰å…¨æ€§é«˜ï¼Œé€‚ç”¨äºå¯†ç å­˜å‚¨</li>
<li>å¹¿æ³›åº”ç”¨äºé‡‘èå’Œå®‰å…¨ç³»ç»Ÿ</li>
</ul>
<p>åœ¨ Go ä¸­å¯ä»¥ä½¿ç”¨ <code>github.com/tjfoc/gmsm/sm3</code> æ¥å®ç° SM3 å“ˆå¸Œã€‚</p>
<hr/>
<h2 data-id="heading-3"><strong>ä¸‰ã€Go å®ç°ç”¨æˆ·å¯†ç åŠ å¯†</strong></h2>
<p>ä¸‹é¢æ˜¯ä¸€å¥—å®Œæ•´çš„ SM3 å¯†ç åŠ å¯†æ–¹æ¡ˆï¼š</p>
<h3 data-id="heading-4"><strong>1. ç”Ÿæˆéšæœºç›</strong></h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">generateSalt</span><span class="hljs-params">()</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
    b := <span class="hljs-built_in">make</span>([]<span class="hljs-type">byte</span>, <span class="hljs-number">16</span>) <span class="hljs-comment">// 16å­—èŠ‚éšæœºç›</span>
    <span class="hljs-keyword">if</span> _, err := rand.Read(b); err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, err
    }
    <span class="hljs-keyword">return</span> hex.EncodeToString(b), <span class="hljs-literal">nil</span>
}
</code></pre>
<ul>
<li>ä½¿ç”¨ <code>crypto/rand</code> ç”Ÿæˆå®‰å…¨éšæœºæ•°</li>
<li>è½¬ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²å­˜å‚¨</li>
</ul>
<hr/>
<h3 data-id="heading-5"><strong>2. SM3 å“ˆå¸Œå‡½æ•°</strong></h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">sm3Hash</span><span class="hljs-params">(password, salt <span class="hljs-type">string</span>)</span></span> <span class="hljs-type">string</span> {
    h := sm3.New()
    h.Write([]<span class="hljs-type">byte</span>(password + salt))
    <span class="hljs-keyword">return</span> hex.EncodeToString(h.Sum(<span class="hljs-literal">nil</span>))
}
</code></pre>
<ul>
<li>å°†å¯†ç å’Œç›æ‹¼æ¥åè¿›è¡Œ SM3 å“ˆå¸Œ</li>
<li>è¿”å›åå…­è¿›åˆ¶å­—ç¬¦ä¸²</li>
</ul>
<hr/>
<h3 data-id="heading-6"><strong>3. ç”Ÿæˆå“ˆå¸Œå¯†ç </strong></h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">HashPassword</span><span class="hljs-params">(password <span class="hljs-type">string</span>)</span></span> (<span class="hljs-type">string</span>, <span class="hljs-type">error</span>) {
    salt, err := generateSalt()
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>, err
    }
    hash := sm3Hash(password, salt)
    <span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"sm3$v1$%s$%s"</span>, salt, hash), <span class="hljs-literal">nil</span>
}
</code></pre>
<ul>
<li>å­˜å‚¨æ ¼å¼ä¸ºï¼š<code>sm3$v1$&lt;salt_hex&gt;$&lt;hash_hex&gt;</code></li>
<li>åŒ…å«ç®—æ³•æ ‡è¯†ã€ç‰ˆæœ¬ã€ç›å’Œå“ˆå¸Œå€¼ï¼Œä¾¿äºç‰ˆæœ¬å‡çº§å’Œå…¼å®¹ä¸åŒç®—æ³•</li>
</ul>
<hr/>
<h3 data-id="heading-7"><strong>4. éªŒè¯å¯†ç </strong></h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">CheckPassword</span><span class="hljs-params">(dbPassword, inputPassword <span class="hljs-type">string</span>)</span></span> (<span class="hljs-type">bool</span>, <span class="hljs-type">error</span>) {
    parts := strings.Split(dbPassword, <span class="hljs-string">"$"</span>)
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(parts) != <span class="hljs-number">4</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>, errors.New(<span class="hljs-string">"hash æ ¼å¼ä¸æ­£ç¡®"</span>)
    }
    _, version, salt, hash := parts[<span class="hljs-number">0</span>], parts[<span class="hljs-number">1</span>], parts[<span class="hljs-number">2</span>], parts[<span class="hljs-number">3</span>]
    <span class="hljs-keyword">if</span> version != <span class="hljs-string">"v1"</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>, errors.New(<span class="hljs-string">"ä¸æ”¯æŒçš„ç‰ˆæœ¬"</span>)
    }
    calculatedHash := sm3Hash(inputPassword, salt)
    <span class="hljs-keyword">return</span> calculatedHash == hash, <span class="hljs-literal">nil</span>
}
</code></pre>
<ul>
<li>ä»æ•°æ®åº“ä¸­å–å‡ºå­˜å‚¨çš„å“ˆå¸Œ</li>
<li>æå–ç›å’Œç‰ˆæœ¬ä¿¡æ¯</li>
<li>å¯¹è¾“å…¥å¯†ç è¿›è¡ŒåŒæ ·å“ˆå¸Œå¹¶å¯¹æ¯”</li>
</ul>
<hr/>
<h3 data-id="heading-8"><strong>5. å¯æ‰©å±•æ”¯æŒå¤šç§ç®—æ³•</strong></h3>
<p>ä»£ç ä¸­è¿˜å¯ä»¥æ”¯æŒ <code>bcrypt</code> æˆ–å…¶ä»–å“ˆå¸Œç®—æ³•ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">CheckPassword</span><span class="hljs-params">(dbPassword, inputPassword, hashAlgo <span class="hljs-type">string</span>)</span></span> (<span class="hljs-type">bool</span>, <span class="hljs-type">error</span>) {
    <span class="hljs-keyword">switch</span> hashAlgo {
    <span class="hljs-keyword">case</span> <span class="hljs-string">"bcrypt"</span>:
        <span class="hljs-keyword">return</span> bcrypt.CompareHashAndPassword([]<span class="hljs-type">byte</span>(dbPassword), []<span class="hljs-type">byte</span>(inputPassword)) == <span class="hljs-literal">nil</span>, <span class="hljs-literal">nil</span>
    <span class="hljs-keyword">case</span> <span class="hljs-string">"sm3"</span>:
        <span class="hljs-keyword">return</span> CheckPassword(dbPassword, inputPassword)
    <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>, errors.New(<span class="hljs-string">"æœªçŸ¥ hash ç®—æ³•"</span>)
    }
}
</code></pre>
<ul>
<li>æ–¹ä¾¿æœªæ¥ç³»ç»Ÿè¿ç§»æˆ–æ··åˆä½¿ç”¨å¤šç§å“ˆå¸Œæ–¹æ¡ˆ</li>
</ul>
<hr/>
<h2 data-id="heading-9"><strong>å››ã€å®Œæ•´ç¤ºä¾‹</strong></h2>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    password := <span class="hljs-string">"123456"</span>
    
    hash, _ := HashPassword(password)
    fmt.Println(<span class="hljs-string">"å­˜å‚¨å¯†ç :"</span>, hash)
    
    ok, _ := CheckPassword(hash, password)
    fmt.Println(<span class="hljs-string">"éªŒè¯å¯†ç :"</span>, ok)
}
</code></pre>
<p>è¾“å‡ºç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby">å­˜å‚¨å¯†ç : sm3<span class="hljs-variable">$v</span>1<span class="hljs-variable">$e2a3f4</span>...<span class="hljs-variable">$9f8d7c</span>...
éªŒè¯å¯†ç : <span class="hljs-literal">true</span>
</code></pre>
<hr/>
<h2 data-id="heading-10"><strong>äº”ã€å°ç»“</strong></h2>
<ul>
<li><strong>ä½¿ç”¨ SM3 + éšæœºç›</strong>ï¼Œå¯ä»¥å®‰å…¨å­˜å‚¨ç”¨æˆ·å¯†ç </li>
<li><strong>å­˜å‚¨æ ¼å¼å»ºè®®åŒ…å«ç®—æ³•å’Œç‰ˆæœ¬å·</strong>ï¼Œä¾¿äºå‡çº§</li>
<li><strong>å¯†ç éªŒè¯æ—¶åªéœ€ä»æ•°æ®åº“å–å‡ºç›å’Œå“ˆå¸Œå€¼</strong>å³å¯</li>
<li>ç»“åˆ Go çš„æ ‡å‡†åº“å’Œ <code>gmsm/sm3</code>ï¼Œå¯ä»¥å¿«é€Ÿè½åœ°</li>
</ul>
<blockquote>
<p>ä½¿ç”¨ SM3 å“ˆå¸Œå’Œç›çš„æ–¹å¼ï¼Œèƒ½æœ‰æ•ˆæŠµå¾¡å½©è™¹è¡¨æ”»å‡»å’Œå¯†ç é‡å¤æ³„éœ²é£é™©ï¼Œæ˜¯ä¼ä¸šçº§ç³»ç»Ÿå¯†ç å®‰å…¨å­˜å‚¨çš„å¯é æ–¹æ¡ˆã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vitest ä¸€ä¸ªåŸºäº Vite çš„å¿«é€Ÿå•å…ƒæµ‹è¯•æ¡†æ¶]]></title>    <link>https://juejin.cn/post/7578811288819908651</link>    <guid>https://juejin.cn/post/7578811288819908651</guid>    <pubDate>2025-12-02T06:16:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578811288819908651" data-draft-id="7578787344613146660" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vitest ä¸€ä¸ªåŸºäº Vite çš„å¿«é€Ÿå•å…ƒæµ‹è¯•æ¡†æ¶"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-02T06:16:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Bacon"/> <meta itemprop="url" content="https://juejin.cn/user/589804532932286"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vitest ä¸€ä¸ªåŸºäº Vite çš„å¿«é€Ÿå•å…ƒæµ‹è¯•æ¡†æ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/589804532932286/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Bacon
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T06:16:13.000Z" title="Tue Dec 02 2025 06:16:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€Vitest æ˜¯ä»€ä¹ˆï¼Ÿä¸€å¥è¯æ¦‚æ‹¬</h3>
<p><strong>Vitest æ˜¯ä¸€ä¸ªåŸºäº Vite çš„å¿«é€Ÿå•å…ƒæµ‹è¯•æ¡†æ¶ã€‚</strong></p>
<p>ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºÂ  <strong>â€œæµ‹è¯•ç•Œçš„ Viteâ€</strong> â€‹ ã€‚å®ƒç»§æ‰¿äº† Vite çš„æ‰€æœ‰ä¼˜ç‚¹ï¼šæå¿«çš„å¯åŠ¨é€Ÿåº¦ã€çƒ­æ›´æ–°ï¼ˆHMRï¼‰ç­‰ï¼Œå¹¶å°†å…¶åº”ç”¨åˆ°äº†æµ‹è¯•é¢†åŸŸã€‚</p>
<hr/>
<h3 data-id="heading-1">äºŒã€æ ¸å¿ƒä¼˜åŠ¿ï¼šä¸ºä»€ä¹ˆé€‰æ‹© Vitestï¼Ÿ</h3>
<p>ä¸ºäº†è®©ä½ æ›´ç›´è§‚åœ°ç†è§£ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€å¼ æ ¸å¿ƒä¼˜åŠ¿å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/abd37fa9bfbe48958eb7699f151dc80e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFjb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260973&amp;x-signature=b6Aehjpeu0U92zfDEbcZC2YO1MY%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥è¯¦ç»†è§£é‡Šè¿™äº›ä¼˜åŠ¿ï¼š</p>
<ol>
<li>
<p><strong>âš¡ï¸ æè‡´çš„é€Ÿåº¦</strong></p>
<ul>
<li><strong>åŸç†</strong>ï¼šå’Œ Vite ä¸€æ ·ï¼ŒVitest ä½¿ç”¨Â <code>esbuild</code>æ¥ç¼–è¯‘ TypeScript/JSXï¼Œè¿™æ¯” Jest ä½¿ç”¨çš„Â <code>tsc</code>æˆ–Â <code>babel</code>è¦å¿«å¾—å¤šã€‚</li>
<li><strong>æ•ˆæœ</strong>ï¼šæ— è®ºæ˜¯å¯åŠ¨æµ‹è¯•ã€è¿˜æ˜¯è¿è¡Œæµ‹è¯•ï¼Œé€Ÿåº¦éƒ½éå¸¸å¿«ã€‚</li>
</ul>
</li>
<li>
<p><strong>ğŸ”— ä¸ Vite é¡¹ç›®æ— ç¼é›†æˆ</strong></p>
<ul>
<li><strong>é…ç½®å…±äº«</strong>ï¼šä½ çš„Â <code>vite.config.ts</code>ä¸­çš„æ’ä»¶ã€è§£æå™¨åˆ«åï¼ˆaliasï¼‰ã€ç¯å¢ƒå˜é‡ç­‰é…ç½®ï¼ŒVitest éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚æ— éœ€ä¸ºæµ‹è¯•ç¯å¢ƒå†å†™ä¸€å¥—å¤æ‚çš„é…ç½®ã€‚</li>
<li><strong>ä¸€è‡´æ€§</strong>ï¼šä¿è¯äº†ä½ çš„ä»£ç åœ¨å¼€å‘ã€æ„å»ºã€æµ‹è¯•ä¸‰ä¸ªç¯èŠ‚çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´ã€‚</li>
</ul>
</li>
<li>
<p><strong>ğŸ‘¨â€ğŸ’» å‡ºè‰²çš„å¼€å‘è€…ä½“éªŒï¼ˆDXï¼‰</strong></p>
<ul>
<li><strong>æ™ºèƒ½ç›‘è§†æ¨¡å¼</strong>ï¼šè¿™æ˜¯æœ€å¤§çš„äº®ç‚¹ï¼å½“ä½ ä¿®æ”¹ä»£ç åï¼ŒVitest ä¼šæ™ºèƒ½åœ°<strong>åªé‡æ–°è¿è¡Œä¸ä¹‹ç›¸å…³çš„æµ‹è¯•</strong>ï¼Œè€Œä¸æ˜¯æ•´ä¸ªæµ‹è¯•å¥—ä»¶ï¼Œå°±åƒæµ‹è¯•çš„â€œçƒ­é‡è½½â€ã€‚</li>
<li><strong>å†…ç½®æ”¯æŒ</strong>ï¼šå¼€ç®±å³ç”¨æ”¯æŒ TypeScriptã€JSXã€ESMï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚</li>
</ul>
</li>
<li>
<p><strong>ğŸ”„ é«˜åº¦å…¼å®¹ Jest ç”Ÿæ€</strong></p>
<ul>
<li><strong>API å…¼å®¹</strong>ï¼šå¦‚æœä½ ç†Ÿæ‚‰ Jestï¼Œé‚£ä¹ˆä¸Šæ‰‹ Vitest å‡ ä¹é›¶æˆæœ¬ã€‚å®ƒæ”¯æŒÂ <code>describe</code>,Â <code>test</code>,Â <code>expect</code>,Â <code>jest.fn()</code>ç­‰è¯­æ³•ã€‚</li>
<li><strong>ç”Ÿæ€å…¼å®¹</strong>ï¼šæ”¯æŒ Jest çš„å¿«ç…§æµ‹è¯•ï¼ˆSnapshot Testingï¼‰å’Œå¤§å¤šæ•° Jest çš„åŒ¹é…å™¨ï¼ˆMatchersï¼‰ã€‚</li>
<li><strong>æ˜“äºè¿ç§»</strong>ï¼šä» Jest è¿ç§»åˆ° Vitest éå¸¸ç®€å•ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-2">ä¸‰ã€å¿«é€Ÿä¸Šæ‰‹ï¼š4æ­¥æ­å»ºä½ çš„ç¬¬ä¸€ä¸ªæµ‹è¯•</h3>
<p>å‡è®¾ä½ å·²æœ‰ä¸€ä¸ª Vite é¡¹ç›®ï¼ˆå¦‚ Vueã€React æˆ–çº¯ JavaScript/TypeScript é¡¹ç›®ï¼‰ã€‚</p>
<h4 data-id="heading-3">æ­¥éª¤ 1: å®‰è£… Vitest</h4>
<p>åœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">npm install -D vitest
<span class="hljs-meta"># æˆ–</span>
yarn <span class="hljs-keyword">add</span> -D vitest
<span class="hljs-meta"># æˆ–</span>
pnpm <span class="hljs-keyword">add</span> -D vitest
</code></pre>
<h4 data-id="heading-4">æ­¥éª¤ 2: é…ç½® Vitest</h4>
<p>åˆ›å»ºÂ <code>vitest.config.ts</code>æ–‡ä»¶ï¼Œæˆ–è€…ç›´æ¥åœ¨å·²æœ‰çš„Â <code>vite.config.ts</code>ä¸­é…ç½®ï¼š</p>
<p><strong>æ–¹å¼ä¸€ï¼šç‹¬ç«‹çš„Â <code>vitest.config.ts</code></strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vitest.config.ts</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vitest/config'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">test</span>: {
    <span class="hljs-comment">// æŒ‡å®šæµ‹è¯•æ–‡ä»¶çš„åŒ¹é…æ¨¡å¼</span>
    <span class="hljs-attr">include</span>: [<span class="hljs-string">'**/*.{test,spec}.{js,mjs,cjs,ts,mts,cts,jsx,tsx}'</span>],
  },
})
</code></pre>
<p><strong>æ–¹å¼äºŒï¼šåœ¨Â <code>vite.config.ts</code>ä¸­åˆå¹¶é…ç½®ï¼ˆæ¨èï¼Œä¿æŒä¸€è‡´æ€§ï¼‰</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.ts</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>

<span class="hljs-comment">// https://vitejs.dev/config/</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">vue</span>()],
  <span class="hljs-attr">test</span>: { <span class="hljs-comment">// &lt;-- åœ¨è¿™é‡Œæ·»åŠ  test é…ç½®é¡¹</span>
    <span class="hljs-attr">globals</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// è®© describeã€itã€expect ç­‰APIå…¨å±€å¯ç”¨ï¼Œæ— éœ€å¯¼å…¥</span>
  },
})
</code></pre>
<h4 data-id="heading-5">æ­¥éª¤ 3: ç¼–å†™ä¸€ä¸ªç®€å•çš„å‡½æ•°å’Œæµ‹è¯•ç”¨ä¾‹</h4>
<p>åˆ›å»ºä¸€ä¸ªæ•°å­¦å‡½æ•°Â <code>math.ts</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/math.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">return</span> a + b;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">multiply</span>(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-keyword">return</span> a * b;
}
</code></pre>
<p>ä¸ºå®ƒåˆ›å»ºæµ‹è¯•æ–‡ä»¶Â <code>math.test.ts</code>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// src/math.test.ts</span>
import { describe, it, expect } from 'vitest'; <span class="hljs-comment">// å¦‚æœé…ç½®äº† globals: trueï¼Œåˆ™å¯çœç•¥å¯¼å…¥</span>
import { add, multiply } from './math';

<span class="hljs-built_in">describe</span>('æ•°å­¦å‡½æ•°æµ‹è¯•', () =&gt; {
  <span class="hljs-built_in">it</span>('åº”è¯¥æ­£ç¡®ç›¸åŠ ä¸¤ä¸ªæ•°å­—', () =&gt; {
    <span class="hljs-built_in">expect</span>(add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>))<span class="hljs-selector-class">.toBe</span>(<span class="hljs-number">3</span>);
    <span class="hljs-built_in">expect</span>(add(-<span class="hljs-number">1</span>, <span class="hljs-number">5</span>))<span class="hljs-selector-class">.toBe</span>(<span class="hljs-number">4</span>);
  });

  <span class="hljs-built_in">it</span>('åº”è¯¥æ­£ç¡®ç›¸ä¹˜ä¸¤ä¸ªæ•°å­—', () =&gt; {
    <span class="hljs-built_in">expect</span>(multiply(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>))<span class="hljs-selector-class">.toBe</span>(<span class="hljs-number">12</span>);
    <span class="hljs-built_in">expect</span>(multiply(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>))<span class="hljs-selector-class">.toBe</span>(<span class="hljs-number">0</span>);
  });

  <span class="hljs-built_in">it</span>('å¿«ç…§æµ‹è¯•ï¼šç¡®ä¿å‡½æ•°è¾“å‡ºç¨³å®š', () =&gt; {
    <span class="hljs-built_in">expect</span>(add(<span class="hljs-number">10</span>, <span class="hljs-number">20</span>))<span class="hljs-selector-class">.toMatchSnapshot</span>(); <span class="hljs-comment">// ç¬¬ä¸€æ¬¡è¿è¡Œä¼šç”Ÿæˆä¸€ä¸ªå¿«ç…§æ–‡ä»¶</span>
  });
});
</code></pre>
<h4 data-id="heading-6">æ­¥éª¤ 4: è¿è¡Œæµ‹è¯•</h4>
<p>åœ¨Â <code>package.json</code>ä¸­æ·»åŠ ä¸€ä¸ªæµ‹è¯•è„šæœ¬ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitest"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"test:run"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vitest run"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li>
<p><strong>å¯åŠ¨ç›‘è§†æ¨¡å¼</strong>ï¼šè¿è¡ŒÂ <code>npm test</code>ã€‚è¿™ä¼šå¯åŠ¨ Vitest çš„ç›‘è§†æ¨¡å¼ï¼Œå½“ä½ ä¿®æ”¹ä»£ç æˆ–æµ‹è¯•æ–‡ä»¶æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨é‡æ–°è¿è¡Œç›¸å…³çš„æµ‹è¯•ã€‚</p>
<p><em>(ç¤ºæ„å›¾ï¼šVitest ç»ˆç«¯è¾“å‡ºï¼Œç»¿è‰²ä»£è¡¨é€šè¿‡)</em></p>
</li>
<li>
<p><strong>å•æ¬¡è¿è¡Œ</strong>ï¼šè¿è¡ŒÂ <code>npm run test:run</code>ã€‚è¿™ä¼šåœ¨ä¸å¯åŠ¨ç›‘è§†æ¨¡å¼çš„æƒ…å†µä¸‹è¿è¡Œä¸€æ¬¡æ‰€æœ‰æµ‹è¯•ï¼Œå¸¸ç”¨äº CI/CD ç¯å¢ƒã€‚</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-7">å››ã€æ ¸å¿ƒæ¦‚å¿µä¸é«˜çº§ç‰¹æ€§</h3>
<ol>
<li>
<p><strong>æµ‹è¯•å¥—ä»¶å’Œç”¨ä¾‹</strong></p>
<ul>
<li><code>describe</code>ï¼šç”¨äºå°†å¤šä¸ªç›¸å…³çš„æµ‹è¯•ç»„åˆåœ¨ä¸€èµ·ã€‚</li>
<li><code>it</code>æˆ–Â <code>test</code>ï¼šå®šä¹‰å•ä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ–­è¨€ï¼ˆAssertionsï¼‰</strong></p>
<ul>
<li>ä½¿ç”¨Â <code>expect</code>æ¥å¯¹å€¼è¿›è¡Œæ–­è¨€ã€‚Vitest æ”¯æŒå¤§é‡ Jest é£æ ¼çš„åŒ¹é…å™¨ï¼Œå¦‚Â <code>.toBe()</code>,Â <code>.toEqual()</code>,Â <code>.toBeTruthy()</code>,Â <code>.toContain()</code>ç­‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ¨¡æ‹Ÿï¼ˆMockingï¼‰</strong></p>
<ul>
<li>Vitest æä¾›äº†å¼ºå¤§çš„æ¨¡æ‹ŸåŠŸèƒ½ã€‚</li>
</ul>

<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { vi } <span class="hljs-keyword">from</span> <span class="hljs-string">'vitest'</span>;

<span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ªå‡½æ•°</span>
<span class="hljs-keyword">const</span> mockFn = vi.<span class="hljs-title function_">fn</span>();
<span class="hljs-title function_">mockFn</span>(<span class="hljs-string">'hello'</span>);
<span class="hljs-title function_">expect</span>(mockFn).<span class="hljs-title function_">toHaveBeenCalledWith</span>(<span class="hljs-string">'hello'</span>);

<span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ªæ¨¡å—</span>
vi.<span class="hljs-title function_">mock</span>(<span class="hljs-string">'./path/to/module'</span>, <span class="hljs-function">() =&gt;</span> ({
  <span class="hljs-attr">someExport</span>: vi.<span class="hljs-title function_">fn</span>(),
}));
</code></pre>
</li>
<li>
<p><strong>æµ‹è¯•è¦†ç›–ç‡</strong></p>
<ul>
<li>
<p>ä½¿ç”¨Â <code>@vitest/coverage</code>åŒ…å¯ä»¥è½»æ¾ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Šã€‚</p>
</li>
<li>
<p>å®‰è£…ï¼š<code>npm i -D @vitest/coverage</code></p>
</li>
<li>
<p>é…ç½®Â <code>vitest.config.ts</code>ï¼š</p>
<pre><code class="hljs language-php" lang="php">export <span class="hljs-keyword">default</span> <span class="hljs-title function_ invoke__">defineConfig</span>({
  <span class="hljs-attr">test</span>: {
    <span class="hljs-attr">coverage</span>: {
      <span class="hljs-attr">provider</span>: <span class="hljs-string">'istanbul'</span> // æˆ– <span class="hljs-string">'c8'</span>
    }
  }
})
</code></pre>
</li>
<li>
<p>è¿è¡Œï¼š<code>vitest --coverage</code></p>
</li>
</ul>
</li>
</ol>
<h3 data-id="heading-8">æ€»ç»“ï¼šä¸€å¼ å›¾æŒæ¡ Vitest å·¥ä½œæµ</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a247b87f66e43189df2a19a2131fdfb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQmFjb24=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765260973&amp;x-signature=oTmqgj4SBN7gMTgb70f08suO290%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AES-GCM è§£å¯†å¤±è´¥è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7578830345870606377</link>    <guid>https://juejin.cn/post/7578830345870606377</guid>    <pubDate>2025-12-02T06:33:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578830345870606377" data-draft-id="7578811288819941419" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AES-GCM è§£å¯†å¤±è´¥è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-02T06:33:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­¦ä¸åŠ¨å­¦ä¸æ˜ç™½"/> <meta itemprop="url" content="https://juejin.cn/user/3879514419244103"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AES-GCM è§£å¯†å¤±è´¥è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3879514419244103/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­¦ä¸åŠ¨å­¦ä¸æ˜ç™½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T06:33:22.000Z" title="Tue Dec 02 2025 06:33:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>ä½¿ç”¨<code>uniapp</code>å¼€å‘å¾®ä¿¡å°ç¨‹åºï¼Œå› ä¸ºåç«¯è¿”å›å‚æ•°æœ‰åŠ å¯†æ•°æ®ä½¿ç”¨çš„æ˜¯<code>AES_GCM</code>åŠ å¯†ç®—æ³•ï¼Œå› æ­¤ä½¿ç”¨<code>asmcrypto.js</code>ç”¨äºè§£å¯†ï¼Œå¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­ï¼Œä»£ç æ­£å¸¸ï¼Œä½†æ˜¯éƒ¨ç½²ä¸Šçº¿åå‡ºç°<code>atob</code>ã€<code>Buffer</code> æˆ– <code>TextDecoder</code>ä¸º<code>undefind</code>æƒ…å†µ</p>
<h2 data-id="heading-1">é—®é¢˜ä»£ç </h2>
<ul>
<li>å°ç¨‹åºä¸­ä¸æ”¯æŒ <code>atob</code></li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è§£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">base64ToBytes</span>(<span class="hljs-params">base64</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Uint8Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-title function_">atob</span>(base64), <span class="hljs-function"><span class="hljs-params">c</span> =&gt;</span> c.<span class="hljs-title function_">charCodeAt</span>(<span class="hljs-number">0</span>));
}
</code></pre>
<ul>
<li>å°ç¨‹åºä¸­ä¸æ”¯æŒ <code>TextDecoder</code></li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">decrypt</span>(<span class="hljs-params">key, info</span>) {

    <span class="hljs-comment">// Â·Â·Â·Â·Â·Â·Â·Â·Â·</span>
    <span class="hljs-comment">// Â·Â·Â·Â·Â·Â·Â·Â·Â·</span>
    <span class="hljs-comment">// 5. è½¬ UTF-8 å­—ç¬¦ä¸²</span>
    <span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>(<span class="hljs-string">"utf-8"</span>);
    <span class="hljs-comment">// Â·Â·Â·Â·Â·Â·Â·Â·Â·</span>
    <span class="hljs-comment">// Â·Â·Â·Â·Â·Â·Â·Â·Â·</span>
}
</code></pre>
<h2 data-id="heading-2">å¤„ç†</h2>
<ul>
<li>å°ç¨‹åºä¸­ä¸æ”¯æŒ <code>atob</code>ï¼Œæ›¿æ¢æ–¹æ³•</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">base64ToBytes</span>(<span class="hljs-params">base64</span>) {
  <span class="hljs-keyword">const</span> arrayBuffer = uni.<span class="hljs-title function_">base64ToArrayBuffer</span>(base64);
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(arrayBuffer);
}
</code></pre>
<ul>
<li>å°ç¨‹åºä¸­ä¸æ”¯æŒ <code>TextDecoder</code>, æ›¿æ¢æ–¹æ³•</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">// Uint8Array è½¬ UTF-8 å­—ç¬¦ä¸²
function utf8BytesToString(bytes) {
  let <span class="hljs-attr">str</span> = <span class="hljs-string">''</span><span class="hljs-comment">;</span>
  let <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
  while (i &lt; bytes.length) {
    const <span class="hljs-attr">b1</span> = bytes[i++]<span class="hljs-comment">;</span>
    if (b1 &lt; 0x80) {
      str += String.fromCharCode(b1)<span class="hljs-comment">;</span>
    } else if (b1 &lt; 0xE0) {
      const <span class="hljs-attr">b2</span> = bytes[i++]<span class="hljs-comment">;</span>
      str += String.fromCharCode(((b1 &amp; 0x1F) &lt;&lt; 6) | (b2 &amp; 0x3F))<span class="hljs-comment">;</span>
    } else if (b1 &lt; 0xF0) {
      const <span class="hljs-attr">b2</span> = bytes[i++]<span class="hljs-comment">;</span>
      const <span class="hljs-attr">b3</span> = bytes[i++]<span class="hljs-comment">;</span>
      str += String.fromCharCode(
        ((b1 &amp; 0x0F) &lt;&lt; 12) |
        ((b2 &amp; 0x3F) &lt;&lt; 6) |
        (b3 &amp; 0x3F)
      )<span class="hljs-comment">;</span>
    } else {
      const <span class="hljs-attr">b2</span> = bytes[i++]<span class="hljs-comment">;</span>
      const <span class="hljs-attr">b3</span> = bytes[i++]<span class="hljs-comment">;</span>
      const <span class="hljs-attr">b4</span> = bytes[i++]<span class="hljs-comment">;</span>
      let <span class="hljs-attr">codepoint</span> =
        ((b1 &amp; 0x07) &lt;&lt; 18) |
        ((b2 &amp; 0x3F) &lt;&lt; 12) |
        ((b3 &amp; 0x3F) &lt;&lt; 6) |
        (b4 &amp; 0x3F)<span class="hljs-comment">;</span>
      codepoint <span class="hljs-attr">-</span>= <span class="hljs-number">0</span>x10000<span class="hljs-comment">;</span>
      str += String.fromCharCode(
        0xD800 + (codepoint &gt;&gt; 10),
        0xDC00 + (codepoint &amp; 0x3FF)
      )<span class="hljs-comment">;</span>
    }
  }
  return str<span class="hljs-comment">;</span>
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[electron è‡ªåŠ¨æ›´æ–°]]></title>    <link>https://juejin.cn/post/7578777952727564322</link>    <guid>https://juejin.cn/post/7578777952727564322</guid>    <pubDate>2025-12-02T05:52:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578777952727564322" data-draft-id="7578777952727531554" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="electron è‡ªåŠ¨æ›´æ–°"/> <meta itemprop="keywords" content="Electron"/> <meta itemprop="datePublished" content="2025-12-02T05:52:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="hky301"/> <meta itemprop="url" content="https://juejin.cn/user/4406498334361022"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            electron è‡ªåŠ¨æ›´æ–°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4406498334361022/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    hky301
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T05:52:25.000Z" title="Tue Dec 02 2025 05:52:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é¡¹ç›®ä½¿ç”¨electron-forge æ‰“åŒ…å·¥å…·ï¼Œä½†æ˜¯ä¸èƒ½å®ç°æ–°ç‰ˆæœ¬å®‰è£…ä¹‹åè‡ªåŠ¨æ‰“å¼€è½¯ä»¶ã€‚
éœ€è¦ä½¿ç”¨electron-builderã€‚</p>
<p>åœ¨é¡¹ç›®åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€ä¸‹ä»£ç ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1ffe2378f884d3084bfd3ecf0d255e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaGt5MzAx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259545&amp;x-signature=KS8gW4%2F4FqvLMfmUzhhL7n5CaUA%3D" alt="image.png" loading="lazy"/></p>
<p>åˆ›å»ºbuild-direct.js</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// scripts/build-direct.js</span>
<span class="hljs-keyword">const</span> { spawn } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'child_process'</span>)
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>)
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>)

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">WEBPACK_DIR</span> = path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'..'</span>, <span class="hljs-string">'.webpack'</span>, <span class="hljs-string">'x64'</span>)
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAIN_FILE</span> = path.<span class="hljs-title function_">join</span>(<span class="hljs-variable constant_">WEBPACK_DIR</span>, <span class="hljs-string">'main'</span>)
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">RENDERER_DIR</span> = path.<span class="hljs-title function_">join</span>(<span class="hljs-variable constant_">WEBPACK_DIR</span>, <span class="hljs-string">'renderer'</span>, <span class="hljs-string">'main_window'</span>)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸš€ å¼€å§‹æ„å»ºï¼šForge â†’ electron-builder (ç›´æ¥ä½¿ç”¨ .webpack)'</span>)

<span class="hljs-comment">// å¯åŠ¨ Forge packageï¼Œä½†ä¸å› å®ƒå¤±è´¥è€Œä¸­æ–­</span>
<span class="hljs-keyword">const</span> forge = <span class="hljs-title function_">spawn</span>(<span class="hljs-string">'npm'</span>, [<span class="hljs-string">'run'</span>, <span class="hljs-string">'package:produce'</span>], {
  <span class="hljs-attr">stdio</span>: <span class="hljs-string">'inherit'</span>,
  <span class="hljs-attr">shell</span>: <span class="hljs-literal">true</span>
})

<span class="hljs-keyword">let</span> forgeExited = <span class="hljs-literal">false</span>
<span class="hljs-comment">// let forgeSuccess = false</span>

forge.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">(<span class="hljs-params">code</span>) =&gt;</span> {
  forgeExited = <span class="hljs-literal">true</span>
  <span class="hljs-comment">// forgeSuccess = code === 0</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ“¦ Forge è¿›ç¨‹é€€å‡ºï¼Œcode=<span class="hljs-subst">${code}</span>`</span>)
  <span class="hljs-title function_">checkAndBuild</span>()
})

<span class="hljs-comment">// ç­‰å¾…æœ€å¤š 90 ç§’ï¼Œåªè¦æ–‡ä»¶å­˜åœ¨å°±ç»§ç»­</span>
<span class="hljs-keyword">const</span> maxWait = <span class="hljs-number">90000</span>
<span class="hljs-keyword">const</span> startTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()

<span class="hljs-keyword">function</span> <span class="hljs-title function_">checkAndBuild</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> elapsed = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - startTime
  <span class="hljs-keyword">if</span> (!forgeExited &amp;&amp; elapsed &lt; maxWait) {
    <span class="hljs-comment">// è¿˜æ²¡è¶…æ—¶ï¼Œç¨åé‡è¯•</span>
    <span class="hljs-built_in">setTimeout</span>(checkAndBuild, <span class="hljs-number">2000</span>)
    <span class="hljs-keyword">return</span>
  }

  <span class="hljs-comment">// æ£€æŸ¥ .webpack æ˜¯å¦å®Œæ•´</span>
  <span class="hljs-keyword">const</span> ready =
    fs.<span class="hljs-title function_">existsSync</span>(<span class="hljs-variable constant_">MAIN_FILE</span>) &amp;&amp;
    fs.<span class="hljs-title function_">existsSync</span>(path.<span class="hljs-title function_">join</span>(<span class="hljs-variable constant_">RENDERER_DIR</span>, <span class="hljs-string">'index.html'</span>)) &amp;&amp;
    fs.<span class="hljs-title function_">existsSync</span>(path.<span class="hljs-title function_">join</span>(<span class="hljs-variable constant_">RENDERER_DIR</span>, <span class="hljs-string">'preload.js'</span>))

  <span class="hljs-keyword">if</span> (ready) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'âœ… .webpack/x64/ å·²å°±ç»ªï¼Œç»§ç»­æ‰§è¡Œ electron-builder...'</span>)
    <span class="hljs-title function_">runElectronBuilder</span>()
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'âŒ .webpack/x64/ æœªç”Ÿæˆæˆ–ä¸å®Œæ•´ï¼Œæ— æ³•ç»§ç»­'</span>)
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>)
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">runElectronBuilder</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { execSync } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'child_process'</span>)
  <span class="hljs-keyword">try</span> {
    <span class="hljs-title function_">execSync</span>(<span class="hljs-string">'npx electron-builder --win --x64'</span>, {
      <span class="hljs-attr">stdio</span>: <span class="hljs-string">'inherit'</span>,
      <span class="hljs-attr">cwd</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'..'</span>)
    })
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\nğŸ‰ æ„å»ºæˆåŠŸï¼'</span>)
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ğŸ’¥ electron-builder å¤±è´¥'</span>, err)
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>)
  }
}
</code></pre>
<p>electron å…¥å£æ–‡ä»¶</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { app, <span class="hljs-title class_">BrowserWindow</span>, globalShortcut, ipcMain, <span class="hljs-title class_">Menu</span>, session } <span class="hljs-keyword">from</span> <span class="hljs-string">'electron'</span>
<span class="hljs-keyword">import</span> { autoUpdater } <span class="hljs-keyword">from</span> <span class="hljs-string">'electron-updater'</span>
<span class="hljs-keyword">import</span> os <span class="hljs-keyword">from</span> <span class="hljs-string">'os'</span>
<span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>
<span class="hljs-keyword">import</span> winston <span class="hljs-keyword">from</span> <span class="hljs-string">'winston'</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">'winston-daily-rotate-file'</span>)
<span class="hljs-comment">// This allows TypeScript to pick up the magic constants that's auto-generated by Forge's Webpack</span>
<span class="hljs-comment">// plugin that tells the Electron app where to look for the Webpack-bundled app code (depending on</span>
<span class="hljs-comment">// whether you're running in development or production).</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">MAIN_WINDOW_WEBPACK_ENTRY</span>: <span class="hljs-built_in">string</span>
<span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">MAIN_WINDOW_PRELOAD_WEBPACK_ENTRY</span>: <span class="hljs-built_in">string</span>

<span class="hljs-comment">// ========================================================================</span>
<span class="hljs-comment">// æ ¸å¿ƒï¼šè‡ªå®šä¹‰æ ¼å¼åŒ–å·¥å…·ï¼Œç”¨äºè§£æå †æ ˆå¹¶æ·»åŠ ä»£ç ä½ç½®</span>
<span class="hljs-comment">// ========================================================================</span>
<span class="hljs-comment">// const addSourceLocation = winston.format((info) =&gt; {</span>
<span class="hljs-comment">//   const stack = new Error().stack.split('\n')</span>

<span class="hljs-comment">//   // ä»å †æ ˆä¿¡æ¯ä¸­æ‰¾åˆ°è°ƒç”¨loggerçš„é‚£ä¸€è¡Œä»£ç </span>
<span class="hljs-comment">//   // æˆ‘ä»¬éœ€è¦è·³è¿‡winstonå†…éƒ¨çš„è°ƒç”¨å †æ ˆ</span>
<span class="hljs-comment">//   let callerInfo = ''</span>
<span class="hljs-comment">//   for (let i = 1; i &lt; stack.length; i++) {</span>
<span class="hljs-comment">//     // è¿‡æ»¤æ‰winstonæ¨¡å—è‡ªèº«å’ŒNode.jså†…éƒ¨æ¨¡å—çš„å †æ ˆä¿¡æ¯</span>
<span class="hljs-comment">//     if (!stack[i].includes('node_modules/winston') &amp;&amp; !stack[i].includes('node:internal')) {</span>
<span class="hljs-comment">//       callerInfo = stack[i].trim()</span>
<span class="hljs-comment">//       break</span>
<span class="hljs-comment">//     }</span>
<span class="hljs-comment">//   }</span>

<span class="hljs-comment">//   // ä»å †æ ˆè¡Œä¸­æå–æ–‡ä»¶åå’Œè¡Œå· (ä¾‹å¦‚: /path/to/your/file.js:123:45)</span>
<span class="hljs-comment">//   const match = /\((.*):(\d+):\d+\)$/.exec(callerInfo) || /at (.*):(\d+):\d+$/.exec(callerInfo)</span>
<span class="hljs-comment">//   if (match) {</span>
<span class="hljs-comment">//     const [, filePath, line] = match</span>
<span class="hljs-comment">//     // æˆ‘ä»¬åªå–æ–‡ä»¶åï¼Œè€Œä¸æ˜¯å®Œæ•´çš„ç»å¯¹è·¯å¾„ï¼Œè®©æ—¥å¿—æ›´æ•´æ´</span>
<span class="hljs-comment">//     info.location = `${path.basename(filePath)}:${line}`</span>
<span class="hljs-comment">//   }</span>

<span class="hljs-comment">//   return info</span>
<span class="hljs-comment">// })</span>

<span class="hljs-keyword">const</span> logDir = path.<span class="hljs-title function_">join</span>(app.<span class="hljs-title function_">getPath</span>(<span class="hljs-string">'userData'</span>), <span class="hljs-string">'logs'</span>)

<span class="hljs-keyword">const</span> dailyRotateFileTransport = <span class="hljs-keyword">new</span> winston.<span class="hljs-property">transports</span>.<span class="hljs-title class_">DailyRotateFile</span>({
  <span class="hljs-attr">level</span>: <span class="hljs-string">'info'</span>,
  <span class="hljs-attr">filename</span>: path.<span class="hljs-title function_">join</span>(logDir, <span class="hljs-string">'%DATE%-app.log'</span>), <span class="hljs-comment">// %DATE% ä¼šè¢«æ›¿æ¢ä¸ºæ—¥æœŸ</span>
  <span class="hljs-attr">datePattern</span>: <span class="hljs-string">'YYYY-MM-DD'</span>, <span class="hljs-comment">// æ—¥æœŸæ ¼å¼</span>
  <span class="hljs-attr">zippedArchive</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å½’æ¡£æ—§æ—¥å¿—æ—¶è¿›è¡Œå‹ç¼©</span>
  <span class="hljs-attr">maxSize</span>: <span class="hljs-string">'20m'</span>, <span class="hljs-comment">// å•ä¸ªæ—¥å¿—æ–‡ä»¶æœ€å¤§å°ºå¯¸</span>
  <span class="hljs-attr">maxFiles</span>: <span class="hljs-string">'14d'</span> <span class="hljs-comment">// æœ€å¤šä¿ç•™14å¤©çš„æ—¥å¿—æ–‡ä»¶</span>
})

<span class="hljs-comment">// æ—¥å¿—æ ¼å¼è§„èŒƒ æ–‡ä»¶å:è¡Œå·|å‡½æ•°å|[æ¥å£åœ°å€]|æ•°æ®</span>
<span class="hljs-comment">// demo: log.info(`index:88|reportStatus|${JSON.stringify({'navigator.onLine': false,networkStatus: true})}`)</span>
<span class="hljs-keyword">const</span> logger = winston.<span class="hljs-title function_">createLogger</span>({
  <span class="hljs-attr">format</span>: winston.<span class="hljs-property">format</span>.<span class="hljs-title function_">combine</span>(
    <span class="hljs-comment">// winston.format.colorize(),</span>
    winston.<span class="hljs-property">format</span>.<span class="hljs-title function_">timestamp</span>({
      <span class="hljs-attr">format</span>: <span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span>
    }),
    <span class="hljs-comment">// addSourceLocation(), // åº”ç”¨æˆ‘ä»¬è‡ªå®šä¹‰çš„å·¥å…·</span>
    <span class="hljs-comment">// winston.format.printf((info) =&gt; `-&gt;${info.timestamp}|${info.level}|${info.location}|${info.message}`)</span>
    winston.<span class="hljs-property">format</span>.<span class="hljs-title function_">printf</span>(<span class="hljs-function">(<span class="hljs-params">info</span>) =&gt;</span> <span class="hljs-string">`-&gt;<span class="hljs-subst">${info.timestamp}</span>|<span class="hljs-subst">${info.level}</span>|<span class="hljs-subst">${info.message}</span>`</span>)
  ),
  <span class="hljs-attr">transports</span>: [<span class="hljs-keyword">new</span> winston.<span class="hljs-property">transports</span>.<span class="hljs-title class_">Console</span>(), dailyRotateFileTransport]
})

<span class="hljs-comment">// Handle creating/removing shortcuts on Windows when installing/uninstalling.</span>
<span class="hljs-keyword">if</span> (<span class="hljs-built_in">require</span>(<span class="hljs-string">'electron-squirrel-startup'</span>)) {
  app.<span class="hljs-title function_">quit</span>()
}

<span class="hljs-comment">// è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">setAutoLaunch</span> = (<span class="hljs-params"/>) =&gt; {
  app.<span class="hljs-title function_">setLoginItemSettings</span>({
    <span class="hljs-attr">openAtLogin</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯ç”¨å¼€æœºè‡ªå¯åŠ¨</span>
    <span class="hljs-attr">path</span>: process.<span class="hljs-property">execPath</span>, <span class="hljs-comment">// åº”ç”¨ç¨‹åºçš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„</span>
    <span class="hljs-comment">// args: ['--autostart'],     // å¯åŠ¨æ—¶çš„å‘½ä»¤è¡Œå‚æ•°</span>
    <span class="hljs-comment">// enabled: true,             // å¯ç”¨æ­¤ç™»å½•é¡¹</span>
    <span class="hljs-attr">name</span>: <span class="hljs-string">'ä¸‰è¿ªæ™ºèƒ½mes'</span> <span class="hljs-comment">// åº”ç”¨åç§°</span>
    <span class="hljs-comment">// openAsHidden: true,        // å¯åŠ¨æ—¶éšè—çª—å£</span>
  })
}

<span class="hljs-comment">// ========================</span>
<span class="hljs-comment">// è‡ªåŠ¨æ›´æ–° - å®šæ—¶æ£€æŸ¥é€»è¾‘</span>
<span class="hljs-comment">// ========================</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">updateCheckInterval</span>: <span class="hljs-title class_">NodeJS</span>.<span class="hljs-property">Timeout</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>

<span class="hljs-keyword">let</span> <span class="hljs-attr">mainWindow</span>: <span class="hljs-title class_">BrowserWindow</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>

<span class="hljs-keyword">const</span> createWindow = (): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
  session.<span class="hljs-property">defaultSession</span>.<span class="hljs-property">webRequest</span>.<span class="hljs-title function_">onHeadersReceived</span>(<span class="hljs-function">(<span class="hljs-params">details, callback</span>) =&gt;</span> {
    <span class="hljs-title function_">callback</span>({
      <span class="hljs-attr">responseHeaders</span>: {
        ...details.<span class="hljs-property">responseHeaders</span>,
        <span class="hljs-string">'Content-Security-Policy'</span>: [
          <span class="hljs-string">"default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; connect-src *; style-src 'self' 'unsafe-inline'; img-src 'self' data:"</span>
        ]
      }
    })
  })

  <span class="hljs-comment">// è®¾ç½®å¼€æœºè‡ªå¯åŠ¨</span>
  <span class="hljs-title function_">setAutoLaunch</span>()

  ipcMain.<span class="hljs-title function_">handle</span>(<span class="hljs-string">'get-local-ip'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> networkInterfaces = os.<span class="hljs-title function_">networkInterfaces</span>()
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> name <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(networkInterfaces)) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> net <span class="hljs-keyword">of</span> networkInterfaces[name]!) {
        <span class="hljs-comment">// Skip over non-IPv4 and internal (i.e. 127.0.0.1) addresses</span>
        <span class="hljs-keyword">if</span> (net.<span class="hljs-property">family</span> === <span class="hljs-string">'IPv4'</span> &amp;&amp; !net.<span class="hljs-property">internal</span>) {
          <span class="hljs-keyword">return</span> net.<span class="hljs-property">address</span> <span class="hljs-comment">// æ‰¾åˆ°å¹¶è¿”å›ç¬¬ä¸€ä¸ª IPv4 åœ°å€</span>
        }
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">'127.0.0.1'</span> <span class="hljs-comment">// å¦‚æœæ²¡æ‰¾åˆ°ï¼Œè¿”å›é»˜è®¤åœ°å€</span>
  })

  <span class="hljs-comment">// ç›‘å¬æ¥è‡ªæ¸²æŸ“è¿›ç¨‹çš„'log'äº‹ä»¶</span>
  ipcMain.<span class="hljs-title function_">on</span>(<span class="hljs-string">'log'</span>, <span class="hljs-function">(<span class="hljs-params">event, { level, message }</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (logger[level]) {
      logger[level](message)
    } <span class="hljs-keyword">else</span> {
      logger.<span class="hljs-title function_">info</span>(message) <span class="hljs-comment">// å¦‚æœçº§åˆ«ä¸å­˜åœ¨ï¼Œé»˜è®¤ä¸ºinfo</span>
    }
  })

  <span class="hljs-comment">// ipcMain.handle('get-workstation-type', () =&gt; {</span>
  <span class="hljs-comment">//   return process.env.WORKSTATION_TYPE;</span>
  <span class="hljs-comment">// })</span>

  <span class="hljs-comment">// Create the browser window.</span>
  mainWindow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BrowserWindow</span>({
    <span class="hljs-attr">title</span>: <span class="hljs-string">'MESæ‰«ç ç³»ç»Ÿ'</span>,
    <span class="hljs-attr">width</span>: <span class="hljs-number">1600</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">700</span>,
    <span class="hljs-attr">alwaysOnTop</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// æ·»åŠ è¿™ä¸€è¡Œæ¥è®¾ç½®çª—å£å§‹ç»ˆç½®é¡¶</span>
    <span class="hljs-attr">fullscreen</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// &lt;-- å…³é”®è®¾ç½®ï¼šå¯åŠ¨æ—¶å³å…¨å±</span>
    <span class="hljs-attr">frame</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// æ— è¾¹æ¡†</span>
    <span class="hljs-attr">webPreferences</span>: {
      <span class="hljs-attr">contextIsolation</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯ç”¨ä¸Šä¸‹æ–‡éš”ç¦»,éš”ç¦»é¢„åŠ è½½è„šæœ¬å’Œå‰ç«¯é¡µé¢ï¼Œå»ºç«‹å®‰å…¨æ¡¥æ¢</span>
      <span class="hljs-attr">nodeIntegration</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// å†³å®šäº†æ¸²æŸ“è¿›ç¨‹èƒ½å¦ç›´æ¥ä½¿ç”¨ Node.js çš„åŠŸèƒ½</span>
      <span class="hljs-attr">preload</span>: <span class="hljs-variable constant_">MAIN_WINDOW_PRELOAD_WEBPACK_ENTRY</span>
    }
  })

  <span class="hljs-comment">// ---------------------&gt; å¼€å§‹æ·»åŠ è‡ªå®šä¹‰å¿«æ·é”® &lt;---------------------</span>

  <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªå¿«æ·é”®ï¼Œ'CommandOrControl' ä¼šåœ¨ macOS ä¸Šæ˜ å°„ä¸º Commandï¼Œåœ¨ Windows/Linux ä¸Šæ˜ å°„ä¸º Control</span>
  <span class="hljs-keyword">const</span> customShortcut = <span class="hljs-string">'CommandOrControl+F12'</span>

  <span class="hljs-comment">// æ³¨å†Œå…¨å±€å¿«æ·é”®</span>
  <span class="hljs-keyword">const</span> ret = globalShortcut.<span class="hljs-title function_">register</span>(customShortcut, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¿«æ·é”® "<span class="hljs-subst">${customShortcut}</span>" è¢«æŒ‰ä¸‹`</span>)

    <span class="hljs-comment">// æ£€æŸ¥çª—å£æ˜¯å¦å­˜åœ¨ä¸”å¯è§</span>
    <span class="hljs-keyword">if</span> (mainWindow) {
      <span class="hljs-comment">// ä½¿ç”¨ toggleDevTools() æ¥æ‰“å¼€æˆ–å…³é—­å¼€å‘è€…å·¥å…·</span>
      mainWindow.<span class="hljs-property">webContents</span>.<span class="hljs-title function_">toggleDevTools</span>()
    }
  })

  <span class="hljs-keyword">if</span> (!ret) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¿«æ·é”®æ³¨å†Œå¤±è´¥'</span>)
  }

  <span class="hljs-comment">// æ£€æŸ¥å¿«æ·é”®æ˜¯å¦æ³¨å†ŒæˆåŠŸ</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¿«æ·é”® "<span class="hljs-subst">${customShortcut}</span>" æ˜¯å¦æ³¨å†ŒæˆåŠŸ: <span class="hljs-subst">${globalShortcut.isRegistered(customShortcut)}</span>`</span>)

  <span class="hljs-comment">// ---------------------&gt; è‡ªå®šä¹‰å¿«æ·é”®æ·»åŠ ç»“æŸ &lt;---------------------</span>

  <span class="hljs-comment">// ç›‘å¬æ¥è‡ªæ¸²æŸ“å™¨è¿›ç¨‹çš„ æœ€å°åŒ–çª—å£</span>
  ipcMain.<span class="hljs-title function_">on</span>(<span class="hljs-string">'minimize-window'</span>, <span class="hljs-function">() =&gt;</span> {
    mainWindow.<span class="hljs-title function_">minimize</span>()
  })

  <span class="hljs-comment">// ç›‘å¬æ¥è‡ªæ¸²æŸ“å™¨è¿›ç¨‹çš„ 'close-app' æ¶ˆæ¯</span>
  ipcMain.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close-app'</span>, <span class="hljs-function">() =&gt;</span> {
    app.<span class="hljs-title function_">quit</span>()
  })

  <span class="hljs-keyword">const</span> menu = <span class="hljs-title class_">Menu</span>.<span class="hljs-title function_">buildFromTemplate</span>([])
  <span class="hljs-title class_">Menu</span>.<span class="hljs-title function_">setApplicationMenu</span>(menu)

  <span class="hljs-comment">// and load the index.html of the app.</span>
  mainWindow.<span class="hljs-title function_">loadURL</span>(<span class="hljs-variable constant_">MAIN_WINDOW_WEBPACK_ENTRY</span>)

  <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'development'</span>) {
    <span class="hljs-comment">// Open the DevTools.</span>
    mainWindow.<span class="hljs-property">webContents</span>.<span class="hljs-title function_">openDevTools</span>()
  }

  ipcMain.<span class="hljs-title function_">on</span>(<span class="hljs-string">'quit-and-install'</span>, <span class="hljs-function">() =&gt;</span> {
    autoUpdater.<span class="hljs-title function_">quitAndInstall</span>(<span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>) <span class="hljs-comment">// ç«‹å³é€€å‡ºå¹¶å®‰è£…</span>
  })
}

<span class="hljs-comment">// ===== è‡ªåŠ¨æ›´æ–°é€»è¾‘ï¼ˆSquirrel.Windows ä¸“ç”¨ï¼‰ =====</span>
<span class="hljs-keyword">if</span> (app.<span class="hljs-property">isPackaged</span>) {
  <span class="hljs-keyword">const</span> server = <span class="hljs-string">'http://192.168.2.74'</span> <span class="hljs-comment">// å†…ç½‘æ›´æ–°æœåŠ¡å™¨</span>
  <span class="hljs-keyword">const</span> url = <span class="hljs-string">`<span class="hljs-subst">${server}</span>/updates`</span> <span class="hljs-comment">// å¿…é¡»ä»¥ /updates ç»“å°¾</span>

  <span class="hljs-comment">// è®¾ç½®æ›´æ–°åœ°å€ï¼ˆSquirrel è¦æ±‚æ ¼å¼ä¸º RELEASES æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼‰</span>
  autoUpdater.<span class="hljs-title function_">setFeedURL</span>(url)
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">startAutoUpdateCheck</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// é¿å…é‡å¤å¯åŠ¨</span>
  <span class="hljs-keyword">if</span> (updateCheckInterval) {
    <span class="hljs-keyword">return</span>
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">checkForUpdatesSilently</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (!app.<span class="hljs-property">isPackaged</span>) {
      <span class="hljs-keyword">return</span>
    } <span class="hljs-comment">// å¼€å‘æ¨¡å¼ä¸æ£€æŸ¥</span>

    logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">'å¼€å§‹å®šæ—¶æ£€æŸ¥æ›´æ–°...'</span>)
    autoUpdater.<span class="hljs-title function_">checkForUpdatesAndNotify</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">`è‡ªåŠ¨æ›´æ–°æ£€æŸ¥å¤±è´¥: <span class="hljs-subst">${err.message}</span>`</span>)
    })
  }

  <span class="hljs-comment">// ç«‹å³æ£€æŸ¥ä¸€æ¬¡</span>
  <span class="hljs-title function_">checkForUpdatesSilently</span>()

  <span class="hljs-comment">// æ¯ 30 åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ï¼ˆ30 * 60 * 1000 = 1,800,000 msï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">INTERVAL_MS</span> = <span class="hljs-number">10</span> * <span class="hljs-number">1000</span>
  updateCheckInterval = <span class="hljs-built_in">setInterval</span>(checkForUpdatesSilently, <span class="hljs-variable constant_">INTERVAL_MS</span>)
}

<span class="hljs-comment">// ===== Squirrel æ›´æ–°äº‹ä»¶ç›‘å¬ =====</span>
autoUpdater.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'[Update] Error:'</span>, error.<span class="hljs-property">message</span>)
})

autoUpdater.<span class="hljs-title function_">on</span>(<span class="hljs-string">'checking-for-update'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Update] Checking for update...'</span>)
})

autoUpdater.<span class="hljs-title function_">on</span>(<span class="hljs-string">'update-available'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Update] Update available.'</span>)
  <span class="hljs-comment">// å¯é€šè¿‡ IPC é€šçŸ¥æ¸²æŸ“è¿›ç¨‹</span>
  mainWindow?.<span class="hljs-property">webContents</span>.<span class="hljs-title function_">send</span>(<span class="hljs-string">'update-available'</span>)
})

autoUpdater.<span class="hljs-title function_">on</span>(<span class="hljs-string">'update-not-available'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Update] Update not available.'</span>)
  mainWindow?.<span class="hljs-property">webContents</span>.<span class="hljs-title function_">send</span>(<span class="hljs-string">'update-not-available'</span>)
})

autoUpdater.<span class="hljs-title function_">on</span>(<span class="hljs-string">'update-downloaded'</span>, <span class="hljs-function">(<span class="hljs-params">info</span>) =&gt;</span> {
  logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">`[AutoUpdate] æ–°ç‰ˆæœ¬å·²ä¸‹è½½å®Œæˆ: <span class="hljs-subst">${info.version}</span>ï¼Œå³å°†è‡ªåŠ¨é‡å¯å®‰è£…...`</span>)

  <span class="hljs-comment">// å…³é”®ï¼šé™é»˜å®‰è£…å¹¶è‡ªåŠ¨é‡å¯</span>
  <span class="hljs-title function_">setImmediate</span>(<span class="hljs-function">() =&gt;</span> {
    autoUpdater.<span class="hljs-title function_">quitAndInstall</span>(<span class="hljs-literal">true</span>, <span class="hljs-literal">true</span>)
  })
})

<span class="hljs-comment">// This method will be called when Electron has finished</span>
<span class="hljs-comment">// initialization and is ready to create browser windows.</span>
<span class="hljs-comment">// Some APIs can only be used after this event occurs.</span>
app.<span class="hljs-title function_">on</span>(<span class="hljs-string">'ready'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">createWindow</span>()
  <span class="hljs-comment">// å¯åŠ¨è‡ªåŠ¨æ›´æ–°æ£€æŸ¥ï¼ˆä¼ å…¥ mainWindow å¯é€‰ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸éœ€è¦ï¼‰</span>
  <span class="hljs-title function_">startAutoUpdateCheck</span>()
})

<span class="hljs-comment">// åœ¨åº”ç”¨é€€å‡ºå‰ï¼Œæ³¨é”€æ‰€æœ‰å¿«æ·é”®ï¼Œè¿™æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯</span>
app.<span class="hljs-title function_">on</span>(<span class="hljs-string">'will-quit'</span>, <span class="hljs-function">() =&gt;</span> {
  globalShortcut.<span class="hljs-title function_">unregisterAll</span>()
})

<span class="hljs-comment">// Quit when all windows are closed, except on macOS. There, it's common</span>
<span class="hljs-comment">// for applications and their menu bar to stay active until the user quits</span>
<span class="hljs-comment">// explicitly with Cmd + Q.</span>
app.<span class="hljs-title function_">on</span>(<span class="hljs-string">'window-all-closed'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (process.<span class="hljs-property">platform</span> !== <span class="hljs-string">'darwin'</span>) {
    app.<span class="hljs-title function_">quit</span>()
  }
})

app.<span class="hljs-title function_">on</span>(<span class="hljs-string">'activate'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// On OS X it's common to re-create a window in the app when the</span>
  <span class="hljs-comment">// dock icon is clicked and there are no other windows open.</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">BrowserWindow</span>.<span class="hljs-title function_">getAllWindows</span>().<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-title function_">createWindow</span>()
  }
})

<span class="hljs-comment">// In this file you can include the rest of your app's specific main process</span>
<span class="hljs-comment">// code. You can also put them in separate files and import them here.</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[éœ¸æ¦œ GitHub çš„ TrendRadar èƒ½ç”¨å—ï¼Ÿå®æµ‹ä¸‰å¤©æœåŠ¡å™¨å´©äº†ï¼Œé™„ä¿®å¤ä»£ç ]]></title>    <link>https://juejin.cn/post/7578780780027740169</link>    <guid>https://juejin.cn/post/7578780780027740169</guid>    <pubDate>2025-12-02T05:57:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578780780027740169" data-draft-id="7578803751609204786" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="éœ¸æ¦œ GitHub çš„ TrendRadar èƒ½ç”¨å—ï¼Ÿå®æµ‹ä¸‰å¤©æœåŠ¡å™¨å´©äº†ï¼Œé™„ä¿®å¤ä»£ç "/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-12-02T05:57:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸ƒç‰›äº‘è¡Œä¸šåº”ç”¨"/> <meta itemprop="url" content="https://juejin.cn/user/3722267698664140"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            éœ¸æ¦œ GitHub çš„ TrendRadar èƒ½ç”¨å—ï¼Ÿå®æµ‹ä¸‰å¤©æœåŠ¡å™¨å´©äº†ï¼Œé™„ä¿®å¤ä»£ç 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3722267698664140/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸ƒç‰›äº‘è¡Œä¸šåº”ç”¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T05:57:11.000Z" title="Tue Dec 02 2025 05:57:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å¼•è¨€ï¼šGitHub æ¦œé¦–é¡¹ç›®çš„â€œç”Ÿäº§ç¯å¢ƒé™·é˜±â€</strong>
å¯¹äº Python å¼€å‘è€…è€Œè¨€ï¼Œæœ¬å‘¨æœ€ç«çš„é¡¹ç›®è«è¿‡äº <strong>TrendRadar</strong>ã€‚å®ƒç»“åˆäº† Playwright çˆ¬è™«å’Œ LLMï¼ˆå¤§æ¨¡å‹ï¼‰ï¼Œèƒ½è‡ªåŠ¨èšåˆæŠ–éŸ³ã€çŸ¥ä¹ã€å¾®åšç­‰ 35+ ä¸ªå¹³å°çš„çƒ­ç‚¹ï¼Œå¹¶ç”Ÿæˆ AI ç®€æŠ¥ã€‚
ä½œä¸ºä¸€åçƒ­è¡·äºè‡ªåŠ¨åŒ–å·¥å…·çš„æ¶æ„å¸ˆï¼Œæˆ‘ç¬¬ä¸€æ—¶é—´åœ¨æœåŠ¡å™¨ä¸Š Pull äº†ä»£ç å¹¶è·‘äº†èµ·æ¥ã€‚å‰ä¸¤å¤©ä½“éªŒæä½³ï¼Œé£ä¹¦ç¾¤é‡Œçš„æƒ…æŠ¥æ¨é€æºæºä¸æ–­ã€‚</p>
<p><strong>ç„¶è€Œï¼Œç¬¬ä¸‰å¤©æ—©ä¸Šï¼ŒæœåŠ¡å…¨æŒ‚äº†ã€‚</strong></p>
<p>æŸ¥çœ‹ Docker æ—¥å¿—ï¼Œå±å¹•ä¸Šèµ«ç„¶ä¸€è¡Œçº¢å­—ï¼š
OSError: [Errno 28] No space left on device
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63d62a9446b443d68e70c1211190f8e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiD54mb5LqR6KGM5Lia5bqU55So:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259831&amp;x-signature=J5W4YMIwjBvlWA6HklZz9gmNnww%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¿™å°±æ˜¯å¼€æº Demo ä¸å·¥ä¸šçº§åº”ç”¨çš„å·®è·ï¼š<strong>å¦‚æœä¸è§£å†³å­˜å‚¨æ¶æ„é—®é¢˜ï¼ŒTrendRadar å°±æ˜¯ä¸€ä¸ªâ€œç¡¬ç›˜ç²‰ç¢æœºâ€ã€‚</strong></p>
<p><strong>ä¸€ã€ äº‹æ•…å¤ç›˜ï¼šå¦‚ä½•ç¡®è®¤æ˜¯ Inode çˆ†æ‰ï¼Ÿ</strong></p>
<p>åœ¨æŠ¥é”™ç°åœºï¼Œæˆ‘é¦–å…ˆæ‰§è¡Œäº† df -hï¼Œç»“æœæ˜¾ç¤ºç£ç›˜ç©ºé—´ä»…ä½¿ç”¨äº† 45%ã€‚è¿™å°±éå¸¸è¯¡å¼‚ï¼š<strong>æ˜æ˜è¿˜æœ‰å‡ å G ç©ºé—´ï¼Œä¸ºä»€ä¹ˆæç¤ºç©ºé—´ä¸è¶³ï¼Ÿ</strong>
è¿™æ—¶å€™ï¼Œè€è¿ç»´éƒ½çŸ¥é“è¦æŸ¥ä¸€ä¸‹ <strong>Inodeï¼ˆç´¢å¼•èŠ‚ç‚¹ï¼‰</strong>ã€‚</p>
<p><strong>1. æ’æŸ¥ Inode ä½¿ç”¨ç‡</strong></p>
<p>æ‰§è¡Œå‘½ä»¤ï¼š
code Bash</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">df</span> -i
</code></pre>
<p><strong>ç»“æœæ˜¾ç¤ºï¼šIUse% è¾¾åˆ°äº† 100%</strong>ã€‚</p>
<p>è¿™æ„å‘³ç€è™½ç„¶ç£ç›˜è¿˜æœ‰ç©ºé—´ï¼Œä½†æ–‡ä»¶ç³»ç»Ÿçš„â€œæˆ·å£æœ¬â€å·²ç»å‘å®Œäº†ã€‚TrendRadar ä¸ºäº†ç•™å­˜èˆ†æƒ…è¯æ®ï¼Œä¼šä¸ºæ¯ä¸€æ¡çƒ­ç‚¹ä¿å­˜é«˜æ¸…æˆªå›¾å’Œ HTML å¿«ç…§ï¼ŒçŸ­çŸ­ 72 å°æ—¶ç”Ÿæˆäº†æ•°ä¸‡ä¸ªå°æ–‡ä»¶ï¼Œç›´æ¥åƒå…‰äº† Inodeã€‚</p>
<p><strong>2. å®šä½â€œå…ƒå‡¶â€ç›®å½•</strong></p>
<p>ä¸ºäº†ç¡®è®¤æ˜¯å“ªä¸ªç›®å½•åœ¨æé¬¼ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç»„åˆå‘½ä»¤å¿«é€Ÿç»Ÿè®¡å„ç›®å½•æ–‡ä»¶æ•°ï¼š
code Bash</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> /*; <span class="hljs-keyword">do</span> <span class="hljs-built_in">echo</span> <span class="hljs-variable">$i</span>; find <span class="hljs-variable">$i</span> | <span class="hljs-built_in">wc</span> -l; <span class="hljs-keyword">done</span>
</code></pre>
<p>å¾ˆå¿«æˆ‘ä»¬å®šä½åˆ°äº†ç½ªé­ç¥¸é¦–ï¼šTrendRadar/data/snapshots/ã€‚</p>
<p><strong>ç»“è®º</strong>ï¼š åœ¨çˆ¬è™«ç±»åº”ç”¨ä¸­ï¼Œæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼ˆå°¤å…¶æ˜¯ Ext4ï¼‰å¹¶ä¸é€‚åˆå­˜å‚¨æµ·é‡å°æ–‡ä»¶ã€‚æˆ‘ä»¬éœ€è¦æ¶æ„çº§çš„æ”¹é€ ã€‚</p>
<p><strong>äºŒã€ æ¶æ„æŠ‰æ‹©ï¼šä¸ºä»€ä¹ˆçˆ¬è™«å¿…é¡»â€œå­˜ç®—åˆ†ç¦»â€ï¼Ÿ</strong></p>
<p>é¢å¯¹æµ·é‡éç»“æ„åŒ–æ•°æ®ï¼ˆå›¾ç‰‡/æ—¥å¿—ï¼‰ï¼Œæˆ‘ä»¬å¯¹æ¯”äº†ä¸¤ç§å¸¸è§çš„æ‰©å®¹æ–¹æ¡ˆã€‚è¿™æ¬¡æˆ‘ä»¬ä¸ä»…çœ‹åŠŸèƒ½ï¼Œæ›´çœ‹<strong>é‡åŒ–æŒ‡æ ‡</strong>ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6726d733ff64abe9fa45e1a4336f846~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiD54mb5LqR6KGM5Lia5bqU55So:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259831&amp;x-signature=9md863UF%2B0tHzIGBQ3Wy1f2wAO8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>æ¶æ„å†³ç­–ï¼š</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b5dd576179e4f84bc401ef9e21fe1d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiD54mb5LqR6KGM5Lia5bqU55So:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259831&amp;x-signature=wxWzG4tdqYAeFsvJSbIqz0XcYS4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¸ºäº†ä¿è¯ Crawlerï¼ˆè®¡ç®—å±‚ï¼‰çš„æ— çŠ¶æ€ï¼Œå¿…é¡»å®æ–½<strong>å­˜ç®—åˆ†ç¦»</strong>ã€‚å°†æ‰€æœ‰æŒä¹…åŒ–æ•°æ®â€œå¤–åŒ…â€ç»™ä¸“ä¸šçš„ä¸ƒç‰›äº‘ Kodoã€‚</p>
<p><strong>ä¸‰ã€ æºç äºŒå¼€å®æˆ˜ï¼šä» Local Save åˆ° Cloud Stream</strong></p>
<p>TrendRadar æ˜¯åŸºäº Python + Playwright ç¼–å†™çš„ã€‚æ”¹é€ çš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼š<strong>åˆ©ç”¨ Playwright åŸç”Ÿèƒ½åŠ›æˆªè·å†…å­˜ Bufferï¼Œç›´æ¥æ¨é€åˆ°äº‘ç«¯</strong>ã€‚</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡</strong></p>
<p>å®‰è£…ä¸ƒç‰›äº‘ Python SDKï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install qiniu

</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šå°è£…â€œäº‘å­˜å‚¨ç®¡ç†å™¨â€</strong></p>
<p>æˆ‘ä»¬åœ¨ utils ç›®å½•ä¸‹æ–°å»º oss_manager.pyï¼Œå°è£…ç»Ÿä¸€çš„ä¸Šä¼ æ¥å£ã€‚
code Python</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># utils/oss_manager.py</span>
<span class="hljs-keyword">from</span> qiniu <span class="hljs-keyword">import</span> Auth, put_data
<span class="hljs-keyword">import</span> os

<span class="hljs-comment"># å»ºè®®ä»ç¯å¢ƒå˜é‡è¯»å–ï¼Œé€‚é… Docker/K8s éƒ¨ç½²</span>
ACCESS_KEY = os.getenv(<span class="hljs-string">'QINIU_AK'</span>)
SECRET_KEY = os.getenv(<span class="hljs-string">'QINIU_SK'</span>)
BUCKET_NAME = os.getenv(<span class="hljs-string">'QINIU_BUCKET'</span>)
CDN_DOMAIN = os.getenv(<span class="hljs-string">'QINIU_DOMAIN'</span>)

q = Auth(ACCESS_KEY, SECRET_KEY)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">upload_bytes_stream</span>(<span class="hljs-params">data_bytes, file_key</span>):
    <span class="hljs-string">"""
    å†…å­˜ç›´ä¼ ï¼šç›´æ¥å°†äºŒè¿›åˆ¶æµä¸Šä¼ åˆ°ä¸ƒç‰›äº‘ï¼Œå®Œå…¨ä¸å ç”¨æœ¬åœ°ç£ç›˜
    """</span>
    token = q.upload_token(BUCKET_NAME, file_key, <span class="hljs-number">3600</span>)
    ret, info = put_data(token, file_key, data_bytes)
    
    <span class="hljs-keyword">if</span> info.status_code == <span class="hljs-number">200</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"<span class="hljs-subst">{CDN_DOMAIN}</span>/<span class="hljs-subst">{file_key}</span>"</span>
    <span class="hljs-keyword">else</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

</code></pre>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šé­”æ”¹æˆªå›¾é€»è¾‘ (Core Refactoring)</strong></p>
<p>Playwright çš„ page.screenshot() æ–¹æ³•å¦‚æœä¸ä¼  path å‚æ•°ï¼Œ<strong>é»˜è®¤å°±ä¼šè¿”å› bytes (äºŒè¿›åˆ¶æµ)</strong>ã€‚è¿™æ˜¯ä¸€ä¸ªå®˜æ–¹æ”¯æŒçš„é«˜æ•ˆè·¯å¾„ï¼Œä¹Ÿæ˜¯ç¤¾åŒºä¸­å°† Playwright å¯¹æ¥ S3 çš„æ ‡å‡†åšæ³•ã€‚</p>
<p>æˆ‘ä»¬æ‰¾åˆ° TrendRadar çš„æˆªå›¾ä»£ç ï¼Œè¿›è¡Œå¦‚ä¸‹ä¿®æ”¹ï¼š</p>
<p><strong>ä¿®æ”¹å (Cloud Native)</strong>ï¼š</p>
<p>code Python</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> utils.oss_manager <span class="hljs-keyword">import</span> upload_bytes_stream
<span class="hljs-keyword">import</span> time

<span class="hljs-keyword">def</span> <span class="hljs-title function_">capture_snapshot</span>(<span class="hljs-params">page, filename</span>):
    <span class="hljs-comment"># 1. è·å–æˆªå›¾çš„äºŒè¿›åˆ¶ Buffer (ä¸è½ç›˜)</span>
    <span class="hljs-comment"># è¿™ä¸ä¸Šä¼  S3 çš„å¥—è·¯ä¸€è‡´ï¼Œä½†ä¸ƒç‰›äº‘åœ¨å›½å†…çš„è¿æ¥ç¨³å®šæ€§æ›´ä½³</span>
    screenshot_bytes = page.screenshot() 
    
    <span class="hljs-comment"># 2. æ„é€ äº‘ç«¯å­˜å‚¨è·¯å¾„ï¼ˆæŒ‰æ—¥æœŸåˆ†å±‚ï¼‰</span>
    date_str = time.strftime(<span class="hljs-string">"%Y/%m/%d"</span>)
    cloud_key = <span class="hljs-string">f"snapshots/<span class="hljs-subst">{date_str}</span>/<span class="hljs-subst">{filename}</span>"</span>
    
    <span class="hljs-comment"># 3. å†…å­˜ç›´ä¼ ä¸ƒç‰›äº‘</span>
    url = upload_bytes_stream(screenshot_bytes, cloud_key)
    
    <span class="hljs-keyword">if</span> url:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[Success] Snapshot uploaded: <span class="hljs-subst">{url}</span>"</span>)
        <span class="hljs-keyword">return</span> url
    <span class="hljs-keyword">else</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"[Error] Upload failed"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

</code></pre>
<p><strong>ç¬¬å››æ­¥ï¼šæ‰“é€šé£ä¹¦/ä¼å¾®é€šçŸ¥</strong></p>
<p>ä¿®æ”¹å®Œå­˜å‚¨åï¼Œæœ€å…³é”®çš„ä¸€æ­¥æ˜¯å°†è¿”å›çš„ url å†™å…¥åˆ°é€šçŸ¥æ¨¡ç‰ˆä¸­ã€‚è¿™æ ·ï¼Œå½“é£ä¹¦æœºå™¨äººæ¨é€çƒ­ç‚¹ç®€æŠ¥æ—¶ï¼Œç”¨æˆ·ç‚¹å‡»å›¾ç‰‡é“¾æ¥ï¼Œç›´æ¥è®¿é—®çš„æ˜¯ä¸ƒç‰›äº‘ CDN åŠ é€Ÿåçš„é«˜æ¸…å›¾ï¼Œæ—¢éªŒè¯äº†é›†æˆæˆåŠŸï¼Œåˆæå‡äº†åŠ è½½ä½“éªŒã€‚</p>
<p><strong>å››ã€ éƒ¨ç½²å»ºè®®ä¸ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong></p>
<p><strong>1. åƒç®¡ç† Secrets ä¸€æ ·ç®¡ç†å¯†é’¥</strong></p>
<p>ä¸ºäº†ä¿æŒ TrendRadar å®˜æ–¹ Docker éƒ¨ç½²çš„ä¼˜é›…ä½“éªŒï¼Œä¸è¦æŠŠ AK/SK ç¡¬ç¼–ç åœ¨ä»£ç é‡Œã€‚å»ºè®®åœ¨ docker-compose.yml ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼Œä¸ç°æœ‰çš„ FEISHU_WEBHOOK_URL ä¿æŒä¸€è‡´ï¼š
code Yaml</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">environment:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">QINIU_AK=your_access_key</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">QINIU_SK=your_secret_key</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">QINIU_BUCKET=trend-radar-assets</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">QINIU_DOMAIN=http://assets.example.com</span>

</code></pre>
<p><strong>2. ç”¨â€œç”Ÿå‘½å‘¨æœŸâ€æ¦¨å¹²æ¯ä¸€åˆ†æˆæœ¬</strong></p>
<p>èˆ†æƒ…æ•°æ®çš„æ—¶æ•ˆæ€§æå¼ºã€‚é’ˆå¯¹è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨<strong>äº‘å¯¹è±¡å­˜å‚¨çš„æ ‡å‡†èƒ½åŠ›â€”â€”ç”Ÿå‘½å‘¨æœŸç®¡ç† (Lifecycle)</strong>ã€‚
åœ¨ä¸ƒç‰›äº‘ Kodo åå°ï¼Œåªéœ€é…ç½®ä¸€æ¡ç®€å•çš„è§„åˆ™ï¼š</p>
<p><strong>â—å‰ç¼€åŒ¹é…</strong>ï¼š snapshots/</p>
<p><strong>â—è½¬ä½é¢‘</strong>ï¼š ä¸Šä¼  <strong>30å¤©</strong> å -&gt; è½¬ä¸º <strong>ä½é¢‘å­˜å‚¨</strong> (Standard-IA)ï¼Œæˆæœ¬é™ä½çº¦ 50%ã€‚</p>
<p><strong>â—è¿‡æœŸåˆ é™¤</strong>ï¼š ä¸Šä¼  <strong>90å¤©</strong> å -&gt; <strong>è‡ªåŠ¨åˆ é™¤</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e481f021dc2b47309f222a672151b9d1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiD54mb5LqR6KGM5Lia5bqU55So:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259831&amp;x-signature=yZ81Nvsd86WAdnAQQSQ%2FEwSoFRI%3D" alt="ä¼ä¸šå¾®ä¿¡æˆªå›¾_a7ac3fd3-4aca-47b3-b6dd-8bb8af4f729b.png" loading="lazy"/></p>
<p>è¿™å¥—ç­–ç•¥æ˜¯äº‘å­˜å‚¨çš„é€šç”¨æ ‡å‡†ï¼Œæ—¢ä¿ç•™äº†è¿‘æœŸçš„çƒ­ç‚¹è¯æ®ï¼Œåˆå°†é•¿æœŸå­˜å‚¨æˆæœ¬å‹åˆ°äº†æœ€ä½ï¼Œå®Œå…¨ä¸éœ€è¦å†™ Crontab è„šæœ¬å»ç»´æŠ¤ã€‚
äº”ã€ æ€»ç»“ä¸æ›¿ä»£æ–¹æ¡ˆå¯¹æ¯”
å½“ç„¶ï¼Œè§£å†³ Inode è€—å°½è¿˜æœ‰å…¶ä»–â€œåœŸåŠæ³•â€ï¼Œæ¯”å¦‚ï¼š</p>
<p><strong>1.é‡æ–°æ ¼å¼åŒ–ç£ç›˜</strong>ï¼š ä½¿ç”¨ mkfs.ext4 -N è°ƒå¤§ Inode æ•°ã€‚ï¼ˆç¼ºç‚¹ï¼šéœ€è¦åœæœºï¼Œæ•°æ®å…¨ä¸¢ï¼Œæ²»æ ‡ä¸æ²»æœ¬ï¼‰</p>
<p><strong>2.æ›´æ·±çš„ç›®å½•åˆ†å±‚</strong>ï¼š ç¼“è§£ç›®å½•ç´¢å¼•å‹åŠ›ã€‚ï¼ˆç¼ºç‚¹ï¼šé€»è¾‘å¤æ‚ï¼Œæ— æ³•è§£å†³æ€»å®¹é‡é™åˆ¶ï¼‰</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œâ€œ<strong>å¯¹è±¡å­˜å‚¨ + ä»£ç æ”¹é€ </strong>â€ æ˜¯ä¸€æ¡ä¸€åŠ³æ°¸é€¸çš„äº‘åŸç”Ÿè·¯å¾„ã€‚å®ƒä¸ä»…è§£å†³äº†çœ¼å‰çš„å´©æºƒé—®é¢˜ï¼Œæ›´ä¸º TrendRadar èµ‹äºˆäº†æ— é™çš„æ‰©å±•èƒ½åŠ›ã€‚</p>
<p><strong>è®©ç®—åŠ›å½’ç®—åŠ›ï¼ˆDockerï¼‰ï¼Œè®©å­˜å‚¨å½’å­˜å‚¨ï¼ˆä¸ƒç‰›äº‘ï¼‰ï¼Œè¿™æ‰æ˜¯ AI Agent æ—¶ä»£è¯¥æœ‰çš„æ¶æ„ç´ å…»ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[pythonå…ƒç»„å’Œå­—å…¸]]></title>    <link>https://juejin.cn/post/7578830345870589993</link>    <guid>https://juejin.cn/post/7578830345870589993</guid>    <pubDate>2025-12-02T06:26:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578830345870589993" data-draft-id="7578832575503794218" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="pythonå…ƒç»„å’Œå­—å…¸"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-12-02T06:26:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="dTTb"/> <meta itemprop="url" content="https://juejin.cn/user/1320982225094746"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            pythonå…ƒç»„å’Œå­—å…¸
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1320982225094746/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    dTTb
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T06:26:58.000Z" title="Tue Dec 02 2025 06:26:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€å…ƒç»„ï¼ˆtupleï¼‰</h3>
<p>å…ƒç»„æ˜¯ Python ä¸­<strong>æœ‰åºã€ä¸å¯ä¿®æ”¹</strong>çš„åºåˆ—ï¼Œå¸¸ç”¨äºå­˜å‚¨ä¸ä¼šå˜åŒ–çš„æ•°æ®ï¼ˆæ¯”å¦‚å›ºå®šçš„é…ç½®ä¿¡æ¯ã€åæ ‡ç­‰ï¼‰ã€‚</p>
<h4 data-id="heading-1">1. å…ƒç»„çš„åˆ›å»º</h4>
<p>å…ƒç»„ç”¨Â <code>()</code>Â åŒ…è£¹å…ƒç´ ï¼Œå…ƒç´ ä¹‹é—´ç”¨é€—å·åˆ†éš”ï¼Œè¯­æ³•éå¸¸ç®€å•ï¼š</p>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># 1. ç›´æ¥ç”¨ () åˆ›å»ºï¼ˆæ¨èï¼‰</span>
<span class="hljs-attr">tuple1</span> = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-string">"Python"</span>, <span class="hljs-literal">True</span>)  <span class="hljs-comment"># å…ƒç´ å¯ä»¥æ˜¯ä¸åŒç±»å‹ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ç­‰ï¼‰</span>
<span class="hljs-attr">tuple2</span> = (<span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"æ©™å­"</span>)     <span class="hljs-comment"># åŒç±»å‹å…ƒç´ çš„å…ƒç»„</span>

<span class="hljs-comment"># 2. çœç•¥ () åˆ›å»ºï¼ˆç®€å†™å½¢å¼ï¼‰</span>
<span class="hljs-attr">tuple3</span> = <span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>  <span class="hljs-comment"># ç­‰ä»·äº (10, 20, 30)ï¼Œæ³¨æ„å¿…é¡»æœ‰é€—å·</span>

<span class="hljs-comment"># 3. å•ä¸ªå…ƒç´ çš„å…ƒç»„ï¼ˆå¿…é¡»åŠ é€—å·ï¼Œå¦åˆ™ä¼šè¢«å½“æˆæ™®é€šå˜é‡ï¼‰</span>
<span class="hljs-attr">tuple4</span> = (<span class="hljs-number">5</span>,)  <span class="hljs-comment"># æ­£ç¡®ï¼šå…ƒç»„ç±»å‹</span>
<span class="hljs-attr">tuple5</span> = (<span class="hljs-number">5</span>)   <span class="hljs-comment"># é”™è¯¯ï¼šintç±»å‹ï¼ˆä¸æ˜¯å…ƒç»„ï¼‰</span>

<span class="hljs-comment"># 4. ç©ºå…ƒç»„</span>
<span class="hljs-attr">empty_tuple</span> = ()
</code></pre>
<h4 data-id="heading-2">2. å…ƒç»„çš„æ ¸å¿ƒç‰¹æ€§</h4>
<ul>
<li><strong>æœ‰åº</strong>ï¼šå…ƒç´ çš„å­˜å‚¨é¡ºåºå’Œåˆ›å»ºæ—¶ä¸€è‡´ï¼Œæ”¯æŒé€šè¿‡ç´¢å¼•è®¿é—®ï¼ˆç´¢å¼•ä» 0 å¼€å§‹ï¼‰ã€‚</li>
<li><strong>ä¸å¯ä¿®æ”¹</strong>ï¼šåˆ›å»ºåä¸èƒ½æ·»åŠ ã€åˆ é™¤æˆ–ä¿®æ”¹å…ƒç´ ï¼ˆè¿™æ˜¯å…ƒç»„å’Œåˆ—è¡¨æœ€æ ¸å¿ƒçš„åŒºåˆ«ï¼‰ã€‚</li>
</ul>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">tuple1</span> = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)
print(tuple1<span class="hljs-section">[0]</span>)  <span class="hljs-comment"># è¾“å‡ºï¼š1ï¼ˆé€šè¿‡ç´¢å¼•è®¿é—®ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰</span>
print(tuple1<span class="hljs-section">[-1]</span>) <span class="hljs-comment"># è¾“å‡ºï¼š3ï¼ˆé€šè¿‡è´Ÿç´¢å¼•è®¿é—®æœ€åä¸€ä¸ªå…ƒç´ ï¼‰</span>

<span class="hljs-comment"># ä»¥ä¸‹æ“ä½œä¼šæŠ¥é”™ï¼ˆå…ƒç»„ä¸å¯ä¿®æ”¹ï¼‰</span>
tuple1<span class="hljs-section">[0]</span> = 100  <span class="hljs-comment"># é”™è¯¯ï¼šä¸èƒ½ä¿®æ”¹å…ƒç´ </span>
tuple1.append(4) <span class="hljs-comment"># é”™è¯¯ï¼šæ²¡æœ‰appendæ–¹æ³•ï¼ˆæ— æ³•æ·»åŠ å…ƒç´ ï¼‰</span>
del tuple1<span class="hljs-section">[1]</span>    <span class="hljs-comment"># é”™è¯¯ï¼šä¸èƒ½åˆ é™¤å…ƒç´ </span>
</code></pre>
<h4 data-id="heading-3">3. å…ƒç»„çš„å¸¸ç”¨æ“ä½œ</h4>
<p>è™½ç„¶å…ƒç»„ä¸å¯ä¿®æ”¹ï¼Œä½†æœ‰ä¸€äº›å®ç”¨çš„å†…ç½®æ“ä½œï¼š</p>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-python" lang="python">tuple2 = (<span class="hljs-string">"è‹¹æœ"</span>, <span class="hljs-string">"é¦™è•‰"</span>, <span class="hljs-string">"æ©™å­"</span>)

<span class="hljs-comment"># 1. è®¡ç®—é•¿åº¦ï¼ˆå…ƒç´ ä¸ªæ•°ï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(tuple2))  <span class="hljs-comment"># è¾“å‡ºï¼š3</span>

<span class="hljs-comment"># 2. æŸ¥æ‰¾å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼ˆin/not inï¼‰</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"é¦™è•‰"</span> <span class="hljs-keyword">in</span> tuple2)  <span class="hljs-comment"># è¾“å‡ºï¼šTrue</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"è‘¡è„"</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> tuple2)  <span class="hljs-comment"># è¾“å‡ºï¼šTrue</span>

<span class="hljs-comment"># 3. ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°</span>
tuple3 = (<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>)
<span class="hljs-built_in">print</span>(tuple3.count(<span class="hljs-number">2</span>))  <span class="hljs-comment"># è¾“å‡ºï¼š3</span>

<span class="hljs-comment"># 4. æŸ¥æ‰¾å…ƒç´ çš„ç´¢å¼•ï¼ˆæ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ï¼‰</span>
<span class="hljs-built_in">print</span>(tuple3.index(<span class="hljs-number">3</span>))  <span class="hljs-comment"># è¾“å‡ºï¼š3ï¼ˆ3åœ¨ç´¢å¼•3çš„ä½ç½®ï¼‰</span>

<span class="hljs-comment"># 5. å…ƒç»„æ‹¼æ¥ï¼ˆç”Ÿæˆæ–°å…ƒç»„ï¼ŒåŸå…ƒç»„ä¸å˜ï¼‰</span>
tuple4 = (<span class="hljs-number">4</span>, <span class="hljs-number">5</span>)
new_tuple = tuple3 + tuple4
<span class="hljs-built_in">print</span>(new_tuple)  <span class="hljs-comment"># è¾“å‡ºï¼š(1, 2, 2, 3, 2, 4, 5)</span>
</code></pre>
<h3 data-id="heading-4">äºŒã€å­—å…¸ï¼ˆdictionaryï¼‰</h3>
<p>å­—å…¸æ˜¯ Python ä¸­<strong>æ— åºï¼ˆPython 3.7 + åå®é™…æœ‰åºï¼‰ã€é”®å€¼å¯¹ï¼ˆkey-valueï¼‰</strong> Â ç±»å‹çš„æ•°æ®ç»“æ„ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯é€šè¿‡ â€œé”®â€ å¿«é€ŸæŸ¥æ‰¾ â€œå€¼â€ï¼ˆæ¯”å¦‚å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼šå§“åâ†’å°æ˜ï¼Œå¹´é¾„â†’20ï¼‰ã€‚</p>
<h4 data-id="heading-5">1. å­—å…¸çš„åˆ›å»º</h4>
<p>å­—å…¸ç”¨Â <code>{}</code>Â åŒ…è£¹ï¼Œæ¯ä¸ªå…ƒç´ æ˜¯Â <code>key: value</code>Â çš„å½¢å¼ï¼Œé”®å€¼å¯¹ä¹‹é—´ç”¨é€—å·åˆ†éš”ï¼š</p>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment"># 1. ç›´æ¥ç”¨ {} åˆ›å»ºï¼ˆæ¨èï¼‰</span>
user = {
    <span class="hljs-string">"name"</span>: <span class="hljs-string">"å°æ˜"</span>,    <span class="hljs-comment"># key: "name"ï¼Œvalue: "å°æ˜"</span>
    <span class="hljs-string">"age"</span>: 20,        <span class="hljs-comment"># key: "age"ï¼Œvalue: 20</span>
    <span class="hljs-string">"gender"</span>: <span class="hljs-string">"ç”·"</span>,
    <span class="hljs-string">"hobbies"</span>: [<span class="hljs-string">"ç¯®çƒ"</span>, <span class="hljs-string">"æ¸¸æˆ"</span>]  <span class="hljs-comment"># valueå¯ä»¥æ˜¯åˆ—è¡¨ã€å…ƒç»„ç­‰å¤æ‚ç±»å‹</span>
}

<span class="hljs-comment"># 2. ç”¨ dict() å‡½æ•°åˆ›å»º</span>
student = dict(name=<span class="hljs-string">"å°çº¢"</span>, age=18, score=95)  <span class="hljs-comment"># é”®ä¸éœ€è¦åŠ å¼•å·</span>
empty_dict = dict()  <span class="hljs-comment"># ç©ºå­—å…¸</span>

<span class="hljs-comment"># 3. ç©ºå­—å…¸çš„ç®€å†™</span>
empty_dict2 = {}
</code></pre>
<h4 data-id="heading-6">2. å­—å…¸çš„æ ¸å¿ƒè§„åˆ™</h4>
<ul>
<li><strong>keyï¼ˆé”®ï¼‰çš„è¦æ±‚</strong>ï¼šå¿…é¡»æ˜¯<strong>ä¸å¯å˜ç±»å‹</strong>ï¼ˆå­—ç¬¦ä¸²ã€æ•°å­—ã€å…ƒç»„ï¼‰ï¼Œä¸”<strong>ä¸èƒ½é‡å¤</strong>ï¼ˆé‡å¤çš„é”®ä¼šè¦†ç›–å‰é¢çš„å€¼ï¼‰ã€‚</li>
<li><strong>valueï¼ˆå€¼ï¼‰çš„è¦æ±‚</strong>ï¼šå¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼ˆæ•°å­—ã€å­—ç¬¦ä¸²ã€åˆ—è¡¨ã€å­—å…¸ç­‰ï¼‰ï¼Œå¯ä»¥é‡å¤ã€‚</li>
</ul>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># é”™è¯¯çš„keyç¤ºä¾‹ï¼ˆä»¥ä¸‹ä¼šæŠ¥é”™ï¼‰</span>
<span class="hljs-attr">dict1</span> = {[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]: <span class="hljs-string">"é”™è¯¯"</span>}  <span class="hljs-comment"># åˆ—è¡¨æ˜¯å¯å˜ç±»å‹ï¼Œä¸èƒ½ä½œä¸ºkey</span>
<span class="hljs-attr">dict2</span> = {<span class="hljs-string">"name"</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"name"</span>: <span class="hljs-string">"æå››"</span>}  <span class="hljs-comment"># é‡å¤keyï¼Œæœ€ç»ˆå­˜å‚¨"name": "æå››"ï¼ˆè¦†ç›–ï¼‰</span>

<span class="hljs-comment"># æ­£ç¡®çš„keyç¤ºä¾‹</span>
<span class="hljs-attr">dict3</span> = {(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>): <span class="hljs-string">"åæ ‡"</span>, <span class="hljs-string">"score"</span>: <span class="hljs-number">90</span>, <span class="hljs-number">100</span>: <span class="hljs-string">"æ»¡åˆ†"</span>}  <span class="hljs-comment"># å…ƒç»„ã€å­—ç¬¦ä¸²ã€æ•°å­—éƒ½å¯ä»¥ä½œä¸ºkey</span>
</code></pre>
<h4 data-id="heading-7">3. å­—å…¸çš„å¸¸ç”¨æ“ä½œï¼ˆé‡ç‚¹ï¼‰</h4>
<p>å­—å…¸çš„æ ¸å¿ƒæ“ä½œå›´ç»• â€œå¢åˆ æ”¹æŸ¥â€ å±•å¼€ï¼Œéƒ½æ˜¯é€šè¿‡ key å®ç°çš„ï¼š</p>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-scss" lang="scss">user = {"name": <span class="hljs-string">"å°æ˜"</span>, <span class="hljs-string">"age"</span>: <span class="hljs-number">20</span>, <span class="hljs-string">"gender"</span>: <span class="hljs-string">"ç”·"</span>}

# <span class="hljs-number">1</span>. æŸ¥ï¼šé€šè¿‡keyè·å–valueï¼ˆæœ€å¸¸ç”¨ï¼‰
<span class="hljs-built_in">print</span>(user["name"])  # è¾“å‡ºï¼šå°æ˜ï¼ˆç›´æ¥ç”¨<span class="hljs-selector-attr">[key]</span>è®¿é—®ï¼‰
<span class="hljs-built_in">print</span>(user.get("age"))  # è¾“å‡ºï¼š<span class="hljs-number">20</span>ï¼ˆç”¨<span class="hljs-built_in">get</span>()æ–¹æ³•è®¿é—®ï¼Œæ¨èï¼‰

# æ³¨æ„ï¼škeyä¸å­˜åœ¨æ—¶çš„åŒºåˆ«
# <span class="hljs-built_in">print</span>(user["height"])  # æŠ¥é”™ï¼šKeyErrorï¼ˆkeyä¸å­˜åœ¨ï¼‰
<span class="hljs-built_in">print</span>(user.get("height", <span class="hljs-number">175</span>))  # è¾“å‡ºï¼š<span class="hljs-number">175</span>ï¼ˆkeyä¸å­˜åœ¨æ—¶è¿”å›é»˜è®¤å€¼ï¼Œä¸ä¼šæŠ¥é”™ï¼‰

# <span class="hljs-number">2</span>. å¢ï¼šæ·»åŠ æ–°çš„é”®å€¼å¯¹
user<span class="hljs-selector-attr">[<span class="hljs-string">"height"</span>]</span> = <span class="hljs-number">175</span>  # æ–°å¢key: <span class="hljs-string">"height"</span>ï¼Œvalue: <span class="hljs-number">175</span>
user[<span class="hljs-string">"hobbies"</span>] = [<span class="hljs-string">"ç¯®çƒ"</span>, <span class="hljs-string">"æ¸¸æˆ"</span>]
<span class="hljs-built_in">print</span>(user)  # è¾“å‡ºï¼š{'name': <span class="hljs-string">'å°æ˜'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">20</span>, <span class="hljs-string">'gender'</span>: <span class="hljs-string">'ç”·'</span>, <span class="hljs-string">'height'</span>: <span class="hljs-number">175</span>, <span class="hljs-string">'hobbies'</span>: [<span class="hljs-string">'ç¯®çƒ'</span>, <span class="hljs-string">'æ¸¸æˆ'</span>]}

# <span class="hljs-number">3</span>. æ”¹ï¼šä¿®æ”¹å·²æœ‰keyçš„value
user<span class="hljs-selector-attr">[<span class="hljs-string">"age"</span>]</span> = <span class="hljs-number">21</span>  # keyå·²å­˜åœ¨ï¼Œç›´æ¥è¦†ç›–value
<span class="hljs-built_in">print</span>(user["age"])  # è¾“å‡ºï¼š<span class="hljs-number">21</span>

# <span class="hljs-number">4</span>. åˆ ï¼šåˆ é™¤é”®å€¼å¯¹
<span class="hljs-selector-tag">del</span> user<span class="hljs-selector-attr">[<span class="hljs-string">"gender"</span>]</span>  # é€šè¿‡keyåˆ é™¤
<span class="hljs-built_in">print</span>(user)  # è¾“å‡ºï¼š{'name': <span class="hljs-string">'å°æ˜'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">21</span>, <span class="hljs-string">'height'</span>: <span class="hljs-number">175</span>, <span class="hljs-string">'hobbies'</span>: [<span class="hljs-string">'ç¯®çƒ'</span>, <span class="hljs-string">'æ¸¸æˆ'</span>]}

user<span class="hljs-selector-class">.pop</span>("height")  # ç”¨<span class="hljs-built_in">pop</span>()åˆ é™¤ï¼Œè¿”å›å¯¹åº”çš„value
<span class="hljs-built_in">print</span>(user)  # è¾“å‡ºï¼š{'name': <span class="hljs-string">'å°æ˜'</span>, <span class="hljs-string">'age'</span>: <span class="hljs-number">21</span>, <span class="hljs-string">'hobbies'</span>: [<span class="hljs-string">'ç¯®çƒ'</span>, <span class="hljs-string">'æ¸¸æˆ'</span>]}

# <span class="hljs-number">5</span>. å…¶ä»–å¸¸ç”¨æ“ä½œ
<span class="hljs-built_in">print</span>(len(user))  # è¾“å‡ºï¼š<span class="hljs-number">3</span>ï¼ˆç»Ÿè®¡é”®å€¼å¯¹ä¸ªæ•°ï¼‰
<span class="hljs-built_in">print</span>(user.keys())  # è¾“å‡ºï¼š<span class="hljs-built_in">dict_keys</span>(['name', 'age', 'hobbies'])ï¼ˆè·å–æ‰€æœ‰keyï¼‰
<span class="hljs-built_in">print</span>(user.values())  # è¾“å‡ºï¼š<span class="hljs-built_in">dict_values</span>(['å°æ˜', <span class="hljs-number">21</span>, ['ç¯®çƒ', 'æ¸¸æˆ']])ï¼ˆè·å–æ‰€æœ‰valueï¼‰
<span class="hljs-built_in">print</span>(user.items())  # è¾“å‡ºï¼š<span class="hljs-built_in">dict_items</span>([('name', 'å°æ˜'), ('age', <span class="hljs-number">21</span>), ('hobbies', ['ç¯®çƒ', 'æ¸¸æˆ'])])ï¼ˆè·å–æ‰€æœ‰é”®å€¼å¯¹ï¼‰

# <span class="hljs-number">6</span>. éå†å­—å…¸ï¼ˆå¸¸ç”¨ï¼‰
for key in user:
    <span class="hljs-built_in">print</span>(f<span class="hljs-string">"{key}: {user[key]}"</span>)  # éå†keyï¼Œé€šè¿‡keyè·å–value
</code></pre>
<h3 data-id="heading-8">ä¸‰ã€å…ƒç»„å’Œå­—å…¸çš„æ ¸å¿ƒåŒºåˆ«</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>å…ƒç»„ï¼ˆtupleï¼‰</th><th>å­—å…¸ï¼ˆdictionaryï¼‰</th></tr></thead><tbody><tr><td>å­˜å‚¨å½¢å¼</td><td>æœ‰åºåºåˆ—ï¼ˆå•ä¸ªå…ƒç´ ï¼‰</td><td>æ— åºé”®å€¼å¯¹ï¼ˆkey-valueï¼‰</td></tr><tr><td>æ˜¯å¦å¯ä¿®æ”¹</td><td>ä¸å¯ä¿®æ”¹ï¼ˆåªè¯»ï¼‰</td><td>å¯ä¿®æ”¹ï¼ˆå¢åˆ æ”¹é”®å€¼å¯¹ï¼‰</td></tr><tr><td>è®¿é—®æ–¹å¼</td><td>é€šè¿‡ç´¢å¼•ï¼ˆå¦‚ tuple [0]ï¼‰</td><td>é€šè¿‡ keyï¼ˆå¦‚ dict ["name"]ï¼‰</td></tr><tr><td>å…ƒç´ è¦æ±‚</td><td>å…ƒç´ å¯ä»¥æ˜¯ä»»æ„ç±»å‹</td><td>key å¿…é¡»æ˜¯ä¸å¯å˜ç±»å‹ï¼Œvalue ä»»æ„</td></tr><tr><td>æ ¸å¿ƒç”¨é€”</td><td>å­˜å‚¨å›ºå®šä¸å˜çš„æ•°æ®</td><td>å­˜å‚¨éœ€è¦å¿«é€ŸæŸ¥æ‰¾ã€æ˜ å°„çš„æ•°æ®</td></tr></tbody></table>
<h3 data-id="heading-9">æ€»ç»“</h3>
<ol>
<li><strong>å…ƒç»„</strong>ï¼šç”¨Â <code>()</code>Â åˆ›å»ºï¼Œæœ‰åºä¸å¯ä¿®æ”¹ï¼Œé€šè¿‡ç´¢å¼•è®¿é—®ï¼Œé€‚åˆå­˜å‚¨å›ºå®šæ•°æ®ï¼ˆå¦‚åæ ‡ã€é…ç½®é¡¹ï¼‰ã€‚</li>
<li><strong>å­—å…¸</strong>ï¼šç”¨Â <code>{}</code>Â åˆ›å»ºï¼Œé”®å€¼å¯¹ç»“æ„ï¼Œé€šè¿‡ key å¿«é€Ÿè®¿é—® valueï¼Œæ”¯æŒå¢åˆ æ”¹ï¼Œé€‚åˆå­˜å‚¨éœ€è¦æ˜ å°„å…³ç³»çš„æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ã€é…ç½®è¡¨ï¼‰ã€‚</li>
<li>å…³é”®è®°ä½ï¼šå…ƒç»„çš„æ ¸å¿ƒæ˜¯ â€œä¸å¯å˜â€ï¼Œå­—å…¸çš„æ ¸å¿ƒæ˜¯ â€œé”®å€¼å¯¹ + å¿«é€ŸæŸ¥æ‰¾â€ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£å†³æµè§ˆå™¨åå°å®šæ—¶å™¨é™é¢‘é—®é¢˜ï¼šç”¨ Worker å®ç°é«˜ç²¾åº¦ setInterval]]></title>    <link>https://juejin.cn/post/7578797337868599330</link>    <guid>https://juejin.cn/post/7578797337868599330</guid>    <pubDate>2025-12-02T06:44:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578797337868599330" data-draft-id="7578892205289816104" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£å†³æµè§ˆå™¨åå°å®šæ—¶å™¨é™é¢‘é—®é¢˜ï¼šç”¨ Worker å®ç°é«˜ç²¾åº¦ setInterval"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-02T06:44:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»Šå¤©ä¹Ÿå¾ˆå›°"/> <meta itemprop="url" content="https://juejin.cn/user/1286850568007976"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£å†³æµè§ˆå™¨åå°å®šæ—¶å™¨é™é¢‘é—®é¢˜ï¼šç”¨ Worker å®ç°é«˜ç²¾åº¦ setInterval
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1286850568007976/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»Šå¤©ä¹Ÿå¾ˆå›°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T06:44:22.000Z" title="Tue Dec 02 2025 06:44:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>å‰è¨€</strong></h2>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨ <code>setTimeout</code> å’Œ <code>setInterval</code> æ¥å¤„ç†å®šæ—¶ä»»åŠ¡ï¼Œä¾‹å¦‚è½®è¯¢æ¥å£ã€åŠ¨ç”»å¸§ã€å€’è®¡æ—¶ç­‰ã€‚</p>
<p>ä½†æ˜¯ï¼Œæœ‰ä¸€ä¸ªå¸¸è§é—®é¢˜ï¼š</p>
<blockquote>
<p><strong>å½“æµè§ˆå™¨çª—å£éæ¿€æ´»çŠ¶æ€æ—¶ï¼ˆåå°æ ‡ç­¾é¡µï¼‰</strong> ï¼Œæµè§ˆå™¨ä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œä¼šé™åˆ¶ <code>setTimeout</code> å’Œ <code>setInterval</code> çš„æ‰§è¡Œé¢‘ç‡ã€‚<br/>
è¿™æ„å‘³ç€ä½ çš„å®šæ—¶ä»»åŠ¡å¯èƒ½è¢«å»¶è¿Ÿï¼Œç”šè‡³åœæ­¢æ‰§è¡Œã€‚</p>
</blockquote>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <strong>Web Worker</strong> æ¥å®ç° <strong>ä¸å—é¡µé¢æ¿€æ´»çŠ¶æ€å½±å“çš„å®šæ—¶å™¨</strong>ã€‚</p>
<p>æœ¬æ–‡ä»¥ <code>workerTimer.setInterval</code> ä¸ºä¾‹ï¼Œè¯¦ç»†ä»‹ç»å®ç°åŸç†å’Œä½¿ç”¨æ–¹å¼ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>ä¸€ã€ä¸ºä»€ä¹ˆè¦ç”¨ Worker</strong></h2>
<p>æµè§ˆå™¨å¯¹éæ¿€æ´»æ ‡ç­¾é¡µåšäº†æ€§èƒ½ä¼˜åŒ–ï¼š</p>
<ul>
<li>Chrome ä¼šå°† <code>setInterval</code> çš„æœ€å°é—´éš”é™åˆ¶åˆ° <strong>1000ms</strong>ï¼ˆç”šè‡³æ›´å¤§ï¼‰</li>
<li>Safariã€Firefox ä¹Ÿæœ‰ç±»ä¼¼ç­–ç•¥</li>
</ul>
<p><strong>åæœ</strong>ï¼š</p>
<ul>
<li>ç²¾ç¡®è®¡æ—¶ä»»åŠ¡ä¸å†å‡†ç¡®</li>
<li>è½®è¯¢æ¥å£å¯èƒ½è¢«å»¶è¿Ÿ</li>
<li>åŠ¨ç”»æˆ–å€’è®¡æ—¶å‡ºç°å¡é¡¿</li>
</ul>
<p><strong>è§£å†³æ€è·¯</strong>ï¼š</p>
<ul>
<li><strong>Web Worker</strong> ç‹¬ç«‹äºä¸»çº¿ç¨‹</li>
<li>å®šæ—¶å™¨åœ¨ Worker å†…éƒ¨è¿è¡Œï¼Œä¸å—é¡µé¢æ¿€æ´»çŠ¶æ€å½±å“</li>
<li>ä¸»çº¿ç¨‹é€šè¿‡æ¶ˆæ¯å›è°ƒè·å–ç»“æœ</li>
</ul>
<hr/>
<h2 data-id="heading-2"><strong>äºŒã€workerTimer.setInterval åŸç†</strong></h2>
<p><code>workerTimer</code> å°è£…äº† Workerï¼Œå®ç°äº† <code>setInterval</code> å’Œ <code>setTimeout</code> çš„é«˜ç²¾åº¦æ›¿ä»£æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-3"><strong>1. Worker å†…éƒ¨é€»è¾‘</strong></h3>
<ul>
<li>Worker ç”¨ <code>setInterval</code>/<code>setTimeout</code> æ¥è§¦å‘å®šæ—¶å™¨</li>
<li>å°†å®šæ—¶äº‹ä»¶é€šè¿‡ <code>postMessage</code> å‘å›ä¸»çº¿ç¨‹</li>
<li>Worker å†…ç»´æŠ¤è‡ªå·±çš„ <code>intervalIds</code>ï¼Œå¯éšæ—¶æ¸…ç†</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> intervalId = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">postMessage</span>({
    <span class="hljs-attr">message</span>: <span class="hljs-string">'interval:tick'</span>,
    <span class="hljs-attr">id</span>: data.<span class="hljs-property">id</span>
  })
}, data.<span class="hljs-property">interval</span>)
</code></pre>
<ul>
<li>æ¯ä¸ªå®šæ—¶å™¨é€šè¿‡ <code>id</code> æ ‡è¯†</li>
<li>ä¸»çº¿ç¨‹æ”¶åˆ°æ¶ˆæ¯åï¼Œæ‰§è¡Œå¯¹åº”å›è°ƒ</li>
</ul>
<hr/>
<h3 data-id="heading-4"><strong>2. workerTimer.setInterval æ¥å£</strong></h3>
<pre><code class="hljs language-typescript" lang="typescript">workerTimer.<span class="hljs-built_in">setInterval</span>(<span class="hljs-attr">cb</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>, <span class="hljs-attr">interval</span>: <span class="hljs-built_in">number</span>, context?: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">number</span>
</code></pre>
<p><strong>å‚æ•°è¯´æ˜</strong>ï¼š</p>

























<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>cb</td><td>function</td><td>å®šæ—¶å™¨å›è°ƒå‡½æ•°</td></tr><tr><td>interval</td><td>number</td><td>æ—¶é—´é—´éš”ï¼ˆæ¯«ç§’ï¼‰</td></tr><tr><td>context</td><td>any</td><td>å›è°ƒå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆå¯é€‰ï¼‰</td></tr></tbody></table>
<p><strong>è¿”å›å€¼</strong>ï¼š</p>
<ul>
<li>è¿”å›ä¸€ä¸ªå”¯ä¸€ <code>id</code>ï¼Œç”¨äºæ¸…ç†å®šæ—¶å™¨</li>
</ul>
<p><strong>å†…éƒ¨å®ç°</strong>ï¼š</p>
<ol>
<li><code>workerTimer</code> è‡ªå¢ <code>id</code></li>
<li>å°†å›è°ƒå’Œä¸Šä¸‹æ–‡ä¿å­˜åˆ° <code>callbacks</code></li>
<li>é€šè¿‡ <code>worker.postMessage</code> å¯åŠ¨ Worker å†…çš„ <code>setInterval</code></li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">this</span>.id++
<span class="hljs-keyword">const</span> id = <span class="hljs-keyword">this</span>.id
<span class="hljs-keyword">this</span>.callbacks[id] = { fn: cb, context }
worker.postMessage({
  command: <span class="hljs-string">'interval:start'</span>,
  interval,
  id
})
<span class="hljs-keyword">return</span> id
</code></pre>
<hr/>
<h3 data-id="heading-5"><strong>3. å›è°ƒå¤„ç†</strong></h3>
<p>Worker æ¯æ¬¡è§¦å‘å®šæ—¶å™¨ï¼Œå‘é€æ¶ˆæ¯åˆ°ä¸»çº¿ç¨‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-title function_ invoke__">postMessage</span>({
  <span class="hljs-attr">message</span>: <span class="hljs-string">'interval:tick'</span>,
  <span class="hljs-attr">id</span>: data.id
})
</code></pre>
<p>ä¸»çº¿ç¨‹æ¥æ”¶æ¶ˆæ¯åï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">const</span> callbackItem = <span class="hljs-keyword">this</span>.callbacks[id]
<span class="hljs-keyword">if</span> (callbackItem?.fn) callbackItem.fn.call(callbackItem.context)
</code></pre>
<ul>
<li>æ‰¾åˆ°å¯¹åº”çš„å›è°ƒ</li>
<li>ç”¨ä¿å­˜çš„ä¸Šä¸‹æ–‡æ‰§è¡Œå‡½æ•°</li>
<li>ä¿è¯äº†å®šæ—¶å™¨é€»è¾‘ä¸åŸç”Ÿ <code>setInterval</code> ä¸€è‡´</li>
</ul>
<hr/>
<h3 data-id="heading-6"><strong>4. æ¸…ç†å®šæ—¶å™¨</strong></h3>
<pre><code class="hljs language-bash" lang="bash">workerTimer.clearInterval(<span class="hljs-built_in">id</span>)
</code></pre>
<ul>
<li>å‘é€æ¶ˆæ¯åˆ° Worker</li>
<li>Worker å†…éƒ¨è°ƒç”¨ <code>clearInterval</code></li>
<li>åˆ é™¤ <code>callbacks</code> ä¸­å¯¹åº”æ¡ç›®</li>
<li>é¿å…å†…å­˜æ³„æ¼</li>
</ul>
<hr/>
<h2 data-id="heading-7"><strong>ä¸‰ã€ä½¿ç”¨ç¤ºä¾‹</strong></h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> workerTimer <span class="hljs-keyword">from</span> <span class="hljs-string">'./workerTimer'</span>

<span class="hljs-comment">// æ¯ç§’æ‰“å°ä¸€æ¬¡</span>
<span class="hljs-keyword">const</span> timerId = workerTimer.<span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'tick'</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>())
}, <span class="hljs-number">1000</span>)

<span class="hljs-comment">// 5ç§’ååœæ­¢</span>
workerTimer.<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  workerTimer.<span class="hljs-built_in">clearInterval</span>(timerId)
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'interval cleared'</span>)
}, <span class="hljs-number">5000</span>)
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>åœ¨åå°æ ‡ç­¾é¡µä¹Ÿèƒ½ä¿æŒé«˜ç²¾åº¦</li>
<li>å›è°ƒå‡½æ•°å¯ç»‘å®šè‡ªå®šä¹‰ä¸Šä¸‹æ–‡</li>
<li>æ”¯æŒåŒæ—¶ç®¡ç†å¤šä¸ªå®šæ—¶å™¨</li>
</ul>
<hr/>
<h2 data-id="heading-8"><strong>å››ã€æ€»ç»“</strong></h2>
<ul>
<li>æµè§ˆå™¨åå°æ ‡ç­¾é¡µä¼šé™ä½åŸç”Ÿå®šæ—¶å™¨ç²¾åº¦</li>
<li>ä½¿ç”¨ Worker å¯ä»¥å®ç° <strong>é«˜ç²¾åº¦ã€ç‹¬ç«‹äºé¡µé¢çŠ¶æ€çš„å®šæ—¶å™¨</strong></li>
<li><code>workerTimer.setInterval</code> å°è£…äº† Worker å†…éƒ¨é€»è¾‘ï¼Œæä¾›ä¸åŸç”Ÿ API æ¥è¿‘çš„æ¥å£</li>
<li>å¯é…åˆ <code>workerTimer.setTimeout</code> å®ç°å®Œæ•´å®šæ—¶å™¨åŠŸèƒ½</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// å®šä¹‰Workeræ¶ˆæ¯ç±»å‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">WorkerMessage</span> {
  <span class="hljs-attr">command</span>: <span class="hljs-built_in">string</span>
  interval?: <span class="hljs-built_in">number</span>
  timeout?: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">WorkerResponse</span> {
  <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>
}

<span class="hljs-comment">// åˆ›å»ºWeb Worker</span>
<span class="hljs-keyword">const</span> blobURL = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>(
    [
      <span class="hljs-string">'('</span>,

      <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> <span class="hljs-attr">intervalIds</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">number</span>, <span class="hljs-built_in">number</span>&gt; = {}

        self.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span> <span class="hljs-title function_">onMsgFunc</span>(<span class="hljs-params">e: MessageEvent</span>) {
          <span class="hljs-keyword">const</span> data = e.<span class="hljs-property">data</span>
          <span class="hljs-keyword">switch</span> (data.<span class="hljs-property">command</span>) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">'interval:start'</span>: {
              <span class="hljs-keyword">const</span> intervalId = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
                <span class="hljs-title function_">postMessage</span>({
                  <span class="hljs-attr">message</span>: <span class="hljs-string">'interval:tick'</span>,
                  <span class="hljs-attr">id</span>: data.<span class="hljs-property">id</span>
                })
              }, data.<span class="hljs-property">interval</span>)

              <span class="hljs-title function_">postMessage</span>({
                <span class="hljs-attr">message</span>: <span class="hljs-string">'interval:started'</span>,
                <span class="hljs-attr">id</span>: data.<span class="hljs-property">id</span>
              })

              intervalIds[data.<span class="hljs-property">id</span>] = intervalId <span class="hljs-keyword">as</span> <span class="hljs-built_in">unknown</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>
              <span class="hljs-keyword">break</span>
            }
            <span class="hljs-keyword">case</span> <span class="hljs-string">'interval:clear'</span>: {
              <span class="hljs-built_in">clearInterval</span>(intervalIds[data.<span class="hljs-property">id</span>])
              <span class="hljs-title function_">postMessage</span>({
                <span class="hljs-attr">message</span>: <span class="hljs-string">'interval:cleared'</span>,
                <span class="hljs-attr">id</span>: data.<span class="hljs-property">id</span>
              })
              <span class="hljs-keyword">delete</span> intervalIds[data.<span class="hljs-property">id</span>]
              <span class="hljs-keyword">break</span>
            }
            <span class="hljs-keyword">case</span> <span class="hljs-string">'timeout:start'</span>: {
              <span class="hljs-keyword">const</span> timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
                <span class="hljs-title function_">postMessage</span>({
                  <span class="hljs-attr">message</span>: <span class="hljs-string">'timeout:tick'</span>,
                  <span class="hljs-attr">id</span>: data.<span class="hljs-property">id</span>
                })
                <span class="hljs-title function_">postMessage</span>({
                  <span class="hljs-attr">message</span>: <span class="hljs-string">'timeout:cleared'</span>,
                  <span class="hljs-attr">id</span>: data.<span class="hljs-property">id</span>
                })
                <span class="hljs-keyword">delete</span> intervalIds[data.<span class="hljs-property">id</span>]
              }, data.<span class="hljs-property">timeout</span>)

              intervalIds[data.<span class="hljs-property">id</span>] = timeoutId <span class="hljs-keyword">as</span> <span class="hljs-built_in">unknown</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>
              <span class="hljs-keyword">break</span>
            }
            <span class="hljs-keyword">case</span> <span class="hljs-string">'timeout:clear'</span>: {
              <span class="hljs-built_in">clearTimeout</span>(intervalIds[data.<span class="hljs-property">id</span>])
              <span class="hljs-title function_">postMessage</span>({
                <span class="hljs-attr">message</span>: <span class="hljs-string">'timeout:cleared'</span>,
                <span class="hljs-attr">id</span>: data.<span class="hljs-property">id</span>
              })
              <span class="hljs-keyword">delete</span> intervalIds[data.<span class="hljs-property">id</span>]
              <span class="hljs-keyword">break</span>
            }
          }
        }
      }.<span class="hljs-title function_">toString</span>(),

      <span class="hljs-string">')()'</span>
    ],
    { <span class="hljs-attr">type</span>: <span class="hljs-string">'application/javascript'</span> }
  )
)

<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(blobURL)
<span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(blobURL)

<span class="hljs-keyword">type</span> <span class="hljs-title class_">CallbackItem</span> = {
  <span class="hljs-attr">fn</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>
    context?: <span class="hljs-built_in">any</span>
}

<span class="hljs-keyword">const</span> workerTimer = {
    <span class="hljs-attr">id</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">callbacks</span>: {} <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">number</span>, <span class="hljs-title class_">CallbackItem</span>&gt;,

  <span class="hljs-built_in">setInterval</span>(<span class="hljs-attr">cb</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>, <span class="hljs-attr">interval</span>: <span class="hljs-built_in">number</span>, context?: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>++
  <span class="hljs-keyword">const</span> id = <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>[id] = { <span class="hljs-attr">fn</span>: cb, context }
  worker.<span class="hljs-title function_">postMessage</span>({
    <span class="hljs-attr">command</span>: <span class="hljs-string">'interval:start'</span>,
    interval,
    id
  })
  <span class="hljs-keyword">return</span> id
},

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-attr">cb</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>, <span class="hljs-attr">timeout</span>: <span class="hljs-built_in">number</span>, context?: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">number</span> {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>++
  <span class="hljs-keyword">const</span> id = <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>[id] = { <span class="hljs-attr">fn</span>: cb, context }
  worker.<span class="hljs-title function_">postMessage</span>({
    <span class="hljs-attr">command</span>: <span class="hljs-string">'timeout:start'</span>,
    timeout,
    id
  })
  <span class="hljs-keyword">return</span> id
},

<span class="hljs-title function_">onMessage</span>(<span class="hljs-params">e: MessageEvent&lt;WorkerResponse&gt;</span>) {
  <span class="hljs-keyword">const</span> { message, id } = e.<span class="hljs-property">data</span>
  <span class="hljs-keyword">switch</span> (message) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'interval:tick'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'timeout:tick'</span>: {
      <span class="hljs-keyword">const</span> callbackItem = <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>[id]
      <span class="hljs-keyword">if</span> (callbackItem?.<span class="hljs-property">fn</span>) callbackItem.<span class="hljs-property">fn</span>.<span class="hljs-title function_">call</span>(callbackItem.<span class="hljs-property">context</span>)
      <span class="hljs-keyword">break</span>
    }

    <span class="hljs-keyword">case</span> <span class="hljs-string">'interval:cleared'</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-string">'timeout:cleared'</span>:
      <span class="hljs-keyword">delete</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>[id]
      <span class="hljs-keyword">break</span>
  }
},

<span class="hljs-title function_">clearInterval</span>(<span class="hljs-params">id: <span class="hljs-built_in">number</span></span>) {
  worker.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">command</span>: <span class="hljs-string">'interval:clear'</span>, id })
},

<span class="hljs-title function_">clearTimeout</span>(<span class="hljs-params">id: <span class="hljs-built_in">number</span></span>) {
  worker.<span class="hljs-title function_">postMessage</span>({ <span class="hljs-attr">command</span>: <span class="hljs-string">'timeout:clear'</span>, id })
}
}

worker.<span class="hljs-property">onmessage</span> = workerTimer.<span class="hljs-property">onMessage</span>.<span class="hljs-title function_">bind</span>(workerTimer)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> workerTimer
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Cè¯­è¨€å¾ªç¯åµŒå¥—]]></title>    <link>https://juejin.cn/post/7578797337868533794</link>    <guid>https://juejin.cn/post/7578797337868533794</guid>    <pubDate>2025-12-02T06:30:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578797337868533794" data-draft-id="7576914798056554548" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Cè¯­è¨€å¾ªç¯åµŒå¥—"/> <meta itemprop="keywords" content="Cè¯­è¨€"/> <meta itemprop="datePublished" content="2025-12-02T06:30:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Andys"/> <meta itemprop="url" content="https://juejin.cn/user/4276469480849276"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Cè¯­è¨€å¾ªç¯åµŒå¥—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4276469480849276/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Andys
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T06:30:55.000Z" title="Tue Dec 02 2025 06:30:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¾ªç¯åµŒå¥—</h2>
<pre><code class="hljs language-C" lang="C"><span class="hljs-keyword">for</span>(åˆå§‹åŒ–è¡¨è¾¾å¼;å¾ªç¯æ¡ä»¶;æ“ä½œè¡¨è¾¾å¼){
    <span class="hljs-keyword">for</span>(åˆå§‹åŒ–è¡¨è¾¾å¼<span class="hljs-number">1</span>;å¾ªç¯æ¡ä»¶<span class="hljs-number">1</span>;æ“ä½œè¡¨è¾¾å¼<span class="hljs-number">1</span>){
        æ‰§è¡Œè¯­å¥
    }

}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/609a8359ee0d46c5a87f1901005e2aaa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5keXM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261854&amp;x-signature=NDhUh2mLsy7v4Lz9k5PuJzwnmpA%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-C" lang="C"><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">10</span>;i++){
		
		<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d\n"</span>, i);
		
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=<span class="hljs-number">10</span>;j++){
			<span class="hljs-built_in">printf</span>(<span class="hljs-string">"j=%d\n"</span>, j);
			
			<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> k=<span class="hljs-number">1</span>;k&lt;=<span class="hljs-number">10</span>;k++){
				<span class="hljs-built_in">printf</span>(<span class="hljs-string">"i=%d, j=%d, k=%d\n"</span>, i, j, k);
			}
		}
	}
	


</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a99e4bf3b67f4a019e8616acd15ac0c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5keXM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261854&amp;x-signature=ezjjqyYrpMq1WPVh%2FCGRQYh6Ch8%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚å›¾æ‰€ç¤ºï¼Œå›¾ä¸­ä»£ç å¯ä»¥ç”¨æ¥æ‰“ç½‘ä¸Šå¾ˆç«çš„åœ£è¯æ ‘ä»£ç ï¼Œä¹Ÿæ˜¯
è¿ç”¨äº†å¾ªç¯åµŒå¥—ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e86d8e107d0b4d01a79504800e991046~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5keXM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261854&amp;x-signature=lmrSR8cF3JF8KDyzMvwcv6a5%2BPs%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-C" lang="C"> <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">5</span>;i++){
		
		<span class="hljs-comment">//printf("%d\n", i);</span>
		
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">5</span>;j&gt;=i;j--){
			<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d"</span>, i);
			
		}<span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);
	
	}
	
	

</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7edf4f44c6654b49aba21a8c155d6edc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5keXM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261854&amp;x-signature=Pn1w%2F2WxcmZW%2FeRZWkt8Pk4vQsE%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸‹æ–¹æ˜¯æ­£ç€æ‰“çš„ä»£ç </p>
<pre><code class="hljs language-C" lang="C">	
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">1</span>;i&lt;=<span class="hljs-number">5</span>;i++){
		
		<span class="hljs-comment">//printf("%d\n", i);</span>
		
		<span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j=<span class="hljs-number">1</span>;j&lt;=i;j++){
			<span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d"</span>, i);
			
		}<span class="hljs-built_in">printf</span>(<span class="hljs-string">"\n"</span>);
	
	}
	

</code></pre>
<p>è¿è¡Œåå¯ä»¥å¾—åˆ°ä»¥ä¸‹ç»“æœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52f229f0f1e44d779c3122cbe5f9c813~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQW5keXM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765261854&amp;x-signature=t7h%2FTVP0M%2Fo5Ky8xyx%2B9aXYjUo0%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é‡æ–°å­¦ä¹  Gitï¼šä»ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿè¯´èµ·]]></title>    <link>https://juejin.cn/post/7578781397118500910</link>    <guid>https://juejin.cn/post/7578781397118500910</guid>    <pubDate>2025-12-02T06:17:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578781397118500910" data-draft-id="7578793960627634202" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é‡æ–°å­¦ä¹  Gitï¼šä»ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿè¯´èµ·"/> <meta itemprop="keywords" content="Git"/> <meta itemprop="datePublished" content="2025-12-02T06:17:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç³»å¤æ™®"/> <meta itemprop="url" content="https://juejin.cn/user/895462143964748"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é‡æ–°å­¦ä¹  Gitï¼šä»ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿè¯´èµ·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/895462143964748/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç³»å¤æ™®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T06:17:56.000Z" title="Tue Dec 02 2025 06:17:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‡†å¤‡é‡æ–°å­¦ä¹ ä¸€égitï¼ŒæŸ¥æ¼è¡¥ç¼ºï¼Œä¸€èµ·å­¦ä¹ è¿›æ­¥ã€‚</p>
<h2 data-id="heading-0">1. ä»€ä¹ˆæ˜¯ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆVCSï¼‰ï¼Ÿ</h2>
<p><strong>ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿ</strong>ï¼ˆVersion Control System, VCSï¼‰æ˜¯ä¸€ç§ç”¨äºè¿½è¸ªæ–‡ä»¶å˜æ›´ã€ç®¡ç†å†å²ç‰ˆæœ¬ã€æ”¯æŒå¤šäººåä½œå¼€å‘çš„å·¥å…·ã€‚å®ƒçš„æ ¸å¿ƒä»·å€¼åœ¨äºè§£å†³ä¸‰å¤§ç—›ç‚¹ï¼š</p>
<ul>
<li><strong>æ–‡ä»¶ä¿®æ”¹æ··ä¹±</strong>ï¼ˆæ”¹æ¥æ”¹å»ä¸çŸ¥é“å“ªä¸ªæ˜¯æœ€æ–°/æœ€å¥½çš„ï¼‰</li>
<li><strong>å†å²è®°å½•ä¸¢å¤±</strong>ï¼ˆåˆ äº†é‡è¦å†…å®¹å´æ— æ³•æ‰¾å›ï¼‰</li>
<li><strong>å¤šäººåä½œå†²çª</strong>ï¼ˆåŒäº‹è¦†ç›–äº†ä½ çš„ä»£ç ï¼Œä½ è¦†ç›–äº†ä»–çš„è®¾è®¡ï¼‰</li>
</ul>
<p>ç®€è€Œè¨€ä¹‹ï¼Œä½ å¯ä»¥æŠŠ VCS æƒ³è±¡æˆä¸€ä¸ª<strong>è‡ªåŠ¨å­˜æ¡£ + æ—¶å…‰æœº</strong>ã€‚</p>
<h3 data-id="heading-1">ä¸¾ä¸ªä¾‹å­ï¼š</h3>
<p>ä½ æ­£åœ¨å†™ä¸€ç¯‡ä½œæ–‡æˆ–è€…æ–‡ç« ã€‚å¦‚æœæ²¡æœ‰ VCSï¼Œä½ å¯èƒ½ä¼šè¿™æ ·æ“ä½œï¼š</p>
<ul>
<li>â€œä½œæ–‡-åˆç¨¿.docâ€</li>
<li>â€œä½œæ–‡-ä¿®æ”¹1.docâ€</li>
<li>â€œä½œæ–‡-ä¿®æ”¹2-åŠ ç»“å°¾ç‰ˆ.docâ€</li>
<li>â€œä½œæ–‡-æœ€ç»ˆç‰ˆ-çœŸçš„æœ€ç»ˆç‰ˆ.docâ€</li>
</ul>
<p>æœ€åä½ é¢å¯¹ä¸€å †æ–‡ä»¶ï¼Œæ ¹æœ¬åˆ†ä¸æ¸…å“ªä¸€ç‰ˆæœ€å¥½ï¼Œè¿˜å®¹æ˜“è¯¯åˆ ã€‚</p>
<p>è€Œæœ‰äº†ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œå®ƒä¼šè‡ªåŠ¨å¸®ä½ ï¼š</p>
<ul>
<li>è®°å½•æ¯ä¸€æ¬¡ä¿®æ”¹çš„å†…å®¹å’Œæ—¶é—´</li>
<li>æ ‡æ³¨æ˜¯è°åšäº†è¿™æ¬¡æ›´æ”¹</li>
<li>å…è®¸ä½ ä¸€é”®å›é€€åˆ°ä»»æ„å†å²ç‰ˆæœ¬</li>
<li>åœ¨å¤šäººåä½œæ—¶æ™ºèƒ½åˆå¹¶ä¸åŒäººçš„ä¿®æ”¹ï¼Œé¿å…äº’ç›¸è¦†ç›–</li>
</ul>
<blockquote>
<p><strong>æ€»ç»“ä¸€å¥è¯</strong>ï¼šVCS è®©ä½ <strong>å®‰å…¨åœ°è®°å½•å˜åŒ–ï¼Œæ–¹ä¾¿å›æº¯å’Œåä½œ</strong>ã€‚</p>
</blockquote>
<p>è™½ç„¶ç¨‹åºå‘˜æœ€å¸¸ç”¨å®ƒç®¡ç†ä»£ç ï¼Œä½†å…¶å®<strong>ä»»ä½•æ–‡ä»¶</strong>ï¼ˆæ–‡æ¡£ã€è®¾è®¡ç¨¿ã€è®ºæ–‡ã€é…ç½®æ–‡ä»¶ç­‰ï¼‰éƒ½å¯ä»¥ç”¨ VCS ç®¡ç†ã€‚</p>
<hr/>
<h2 data-id="heading-2">2. é›†ä¸­å¼ vs åˆ†å¸ƒå¼ï¼šä¸¤ç§ VCS æ¶æ„</h2>
<p>ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼š<strong>é›†ä¸­å¼</strong>ï¼ˆCentralizedï¼‰ å’Œ <strong>åˆ†å¸ƒå¼</strong>ï¼ˆDistributedï¼‰ã€‚å®ƒä»¬æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼š<strong>å†å²è®°å½•å­˜åœ¨å“ªé‡Œï¼Ÿèƒ½ä¸èƒ½åœ¨æ²¡ç½‘çš„æ—¶å€™å·¥ä½œï¼Ÿ</strong></p>
<hr/>
<h3 data-id="heading-3">é›†ä¸­å¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆCVCSï¼‰</h3>
<p><strong>ä»£è¡¨å·¥å…·</strong>ï¼šSVNï¼ˆSubversionï¼‰</p>
<h4 data-id="heading-4">ç±»æ¯”ï¼šå›¾ä¹¦é¦†å€Ÿä¹¦</h4>
<ul>
<li>æ‰€æœ‰ä¹¦ç±ï¼ˆä»£ç  + å®Œæ•´å†å²ï¼‰éƒ½å­˜æ”¾åœ¨<strong>ä¸­å¤®æœåŠ¡å™¨</strong>ï¼ˆå›¾ä¹¦é¦†ï¼‰ã€‚</li>
<li>ä½ è¦çœ‹ä¹¦ï¼Œå¿…é¡»è”ç½‘å»â€œå€Ÿâ€æœ€æ–°ç‰ˆæœ¬ã€‚</li>
<li>çœ‹å®Œè¦â€œè¿˜â€å›å»ï¼Œæ‰èƒ½è®©åˆ«äººçœ‹åˆ°ä½ çš„ä¿®æ”¹ã€‚</li>
<li>å¦‚æœå›¾ä¹¦é¦†å…³é—¨äº†ï¼ˆæœåŠ¡å™¨å®•æœºï¼‰æˆ–è·¯ä¸Šå°è·¯äº†ï¼ˆæ–­ç½‘ï¼‰ï¼Œä½ å°±<strong>æ—¢ä¸èƒ½å€Ÿä¹¦ï¼Œä¹Ÿä¸èƒ½è¿˜ä¹¦</strong>ã€‚</li>
</ul>
<h4 data-id="heading-5">ç‰¹ç‚¹ï¼š</h4>
<ul>
<li>âœ… ç»“æ„ç®€å•ï¼Œæƒé™ç®¡ç†é›†ä¸­</li>
<li>âŒ <strong>ä¸¥é‡ä¾èµ–ç½‘ç»œ</strong></li>
<li>âŒ <strong>å•ç‚¹æ•…éšœé£é™©é«˜</strong>ï¼ˆæœåŠ¡å™¨ä¸€å´©ï¼Œå…¨å‘˜åœå·¥ï¼‰</li>
<li>âŒ æœ¬åœ°é€šå¸¸åªæœ‰å½“å‰ç‰ˆæœ¬ï¼Œ<strong>çœ‹ä¸åˆ°å®Œæ•´å†å²</strong></li>
</ul>
<blockquote>
<p>å°±åƒç­çº§ç¾¤é‡Œå…±äº«ä¸€ä¸ªåœ¨çº¿æ–‡æ¡£â€”â€”æ‰€æœ‰äººå›´ç€åŒä¸€ä¸ªæ–‡ä»¶æ“ä½œï¼Œç¨ä¸æ³¨æ„å°±è¦†ç›–åˆ«äººçš„å†…å®¹ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆDVCSï¼‰</h3>
<p><strong>ä»£è¡¨å·¥å…·</strong>ï¼š<strong>Git</strong></p>
<p>å½“ä½ å‚ä¸ä¸€ä¸ª Git é¡¹ç›®æ—¶ï¼Œä½ ä¼šé€šè¿‡ <code>git clone</code> å‘½ä»¤<strong>å®Œæ•´å¤åˆ¶æ•´ä¸ªä»“åº“åˆ°æœ¬åœ°</strong>ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>å½“å‰æ‰€æœ‰æ–‡ä»¶</li>
<li>å…¨éƒ¨å†å²ç‰ˆæœ¬</li>
<li>æ¯æ¬¡æäº¤çš„ä½œè€…ã€æ—¶é—´ã€ä¿®æ”¹å†…å®¹</li>
</ul>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>
<p>âœ… <strong>æ— éœ€ç½‘ç»œä¹Ÿèƒ½å·¥ä½œ</strong>ï¼šä½ å¯ä»¥åœ¨æ— ç½‘ç¯å¢ƒé‡Œåå¤æäº¤ã€åˆ›å»ºåˆ†æ”¯ã€å¯¹æ¯”ç‰ˆæœ¬ã€‚</p>
<ul>
<li>å°æ•…äº‹ï¼šç°åœ¨å›½å†…ä¿¡å·è¦†ç›–å¹¿ï¼Œå¾ˆå°‘å‡ºç°è¿™ç§æ–­ç½‘æƒ…å†µï¼Œæ²¡ç½‘çš„ç¯å¢ƒè¿˜å·¥ä½œå˜›ï¼Ÿç¡®å®æœ‰äº›ä¿å¯†ä¼ä¸šä¸èƒ½è”ç½‘ï¼Œè¿˜è®°å¾—åˆšæ¯•ä¸šç¬¬ä¸€ä»½å·¥ä½œï¼Œç¬¬ä¸€ä¸ªæœˆå»å®¢æˆ·æ‹‰å•æ™¶ç¡…è½¦é—´ï¼Œå°±è¦ä¸Šäº¤æ‰‹æœºï¼Œç”µè„‘æ–­ç½‘ï¼Œç”µæ°”åŒäº‹å‘æ—¥è‘µè¢«banï¼Œæ‡‚çš„éƒ½æ‡‚(<em>ï¾Ÿâˆ€ï¾Ÿ</em>)ã€‚</li>
</ul>
</li>
<li>
<p>âœ… <strong>å®Œæ•´å¤‡ä»½</strong>ï¼šæ¯ä¸ªåä½œè€…çš„ç”µè„‘éƒ½æ˜¯ä¸€ä»½å®Œæ•´å¤‡ä»½ï¼Œä¸æ€•æœåŠ¡å™¨ä¸¢å¤±æ•°æ®</p>
</li>
<li>
<p>âœ… <strong>çµæ´»åä½œ</strong>ï¼šæ”¹å¥½äº†å†è”ç½‘ï¼Œç”¨ <code>git push</code>æŠŠä½ çš„æˆæœåŒæ­¥åˆ°è¿œç¨‹ä»“åº“ï¼ˆå¦‚ GitHubã€GitLabï¼‰</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¡uniappé—®é¢˜æ’æŸ¥]]></title>    <link>https://juejin.cn/post/7578797337868615714</link>    <guid>https://juejin.cn/post/7578797337868615714</guid>    <pubDate>2025-12-02T06:47:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578797337868615714" data-draft-id="7578901433970458624" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¡uniappé—®é¢˜æ’æŸ¥"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-12-02T06:47:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åªä¸æ˜æœˆå¬"/> <meta itemprop="url" content="https://juejin.cn/user/386661153249102"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¡uniappé—®é¢˜æ’æŸ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/386661153249102/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åªä¸æ˜æœˆå¬
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T06:47:45.000Z" title="Tue Dec 02 2025 06:47:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘åœ¨å¼€å‘uniappï¼Œè™½ç„¶ç¬¬ä¸€æ¬¡å†™ï¼Œä½†æ˜¯æœ‰vueå¼€å‘ç»éªŒï¼Œä¹Ÿæ²¡è§‰å¾—æœ‰å•¥ä¸ä¸€æ ·çš„ï¼Œä¸Šæ‰‹è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä½†æ˜¯æ˜æ˜¾æˆ‘è¿˜æ˜¯ä½ä¼°äº†uniappçš„å¤æ‚åº¦ï¼Œè¿™ä¸œè¥¿éš¾ç‚¹ä¸åœ¨äºä¸šåŠ¡å¼€å‘ï¼Œè€Œæ˜¯å„ä¸ªä¸åŒæœºå‹çš„é€‚é…ï¼Œç›¸æ¯”äºä¼ ç»Ÿçš„webå¼€å‘ï¼Œè¿˜æ˜¯ç¹çäº†å¾ˆå¤šã€‚</p>
<p>ä¸šåŠ¡å¼€å‘ä¸­é‡åˆ°äº†ä¸€ä¸ªè›®æœ‰è¶£çš„é—®é¢˜ï¼Œè¿™é‡Œæ€»ç»“ä¸‹ã€‚</p>
<h5 data-id="heading-0">èƒŒæ™¯ä¸ç¯å¢ƒ</h5>
<p>é¦–å…ˆç®€å•çš„æè¿°ä¸‹èƒŒæ™¯ï¼šå°±æ˜¯åœ¨appç™»å‡ºçš„æ—¶å€™ï¼Œå‘ç°äº†è‹¹æœ6Plusåœ¨é€€å‡ºç™»å½•æ—¶è¡¨ç°ä¸ä¸€æ ·çš„åœ°æ–¹ï¼ŒH5å’Œå®‰å“ä»¥åŠè‹¹æœ16ã€ipadéƒ½è¡¨ç°æ­£å¸¸ï¼Œå°±æ˜¯ç‚¹å‡»é€€å‡ºç™»å½•æŒ‰é’®ï¼Œå¼¹å‡ºä¸€ä¸ªå¼¹çª—ï¼Œç‚¹å‡»é€€å‡ºç™»å½•ï¼Œè·³è½¬åˆ°åˆ°ç™»å½•é¡µï¼Œå¾ˆå¸¸è§„çš„ä¸€ä¸ªæ“ä½œäº†ï¼Œä½†æ˜¯åœ¨è‹¹æœ6Plusæœºå‹ä¸Šï¼Œå‡ºç°äº†å¼‚å¸¸ï¼Œå¼¹çª—ç‚¹å‡»ä¸åŠ¨ï¼Œé¡µé¢å‡ºç°äº†å¡æ­»ï¼Œåªèƒ½æ€æ­»åº”ç”¨é‡æ–°è¿›å…¥ã€‚</p>
<p>è¿™é‡Œè´´ä¸‹ç›¸å…³ä»£ç ï¼š</p>
<pre><code class="hljs language-php" lang="php">message.<span class="hljs-title function_ invoke__">comform</span>({
 Â  <span class="hljs-attr">Â msg</span>:<span class="hljs-string">"ç¡®å®šé€€å‡ºç™»å½•å˜›"</span>,
 Â  <span class="hljs-attr">Â title</span>:<span class="hljs-string">"é€€å‡ºç™»å½•"</span>
}).<span class="hljs-title function_ invoke__">then</span>(res =&gt; {
 Â  Â await userStore.<span class="hljs-title function_ invoke__">logout</span>()
 Â  Â uni.<span class="hljs-title function_ invoke__">redirectTo</span>({
 Â  Â  Â  <span class="hljs-attr">Â url</span>:<span class="hljs-string">'/pages/login/index'</span>
 Â   })
})
</code></pre>
<p>è¿™é‡Œå°±æ˜¯æ¸…é™¤ä¸‹<code>userStore</code>ä¸­çš„çŠ¶æ€ï¼Œç„¶åå°±è·³è½¬è·¯ç”±åˆ°ç™»å½•é¡µã€‚</p>
<blockquote>
<p>è¿™é‡Œæ€»ç»“ä¸‹uniappè·¯ç”±è·³è½¬çš„æ–¹å¼</p>
<ol start="0">
<li>uni.navigateTo ä¿ç•™å½“æä½ é¡µé¢ï¼Œè·³è½¬åˆ°æŸä¸ªåº”ç”¨å†…çš„é¡µé¢</li>
</ol>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// å¸¦å‚æ•°è·³è½¬</span>
uni.<span class="hljs-title function_ invoke__">navigateTo</span>({
 <span class="hljs-attr">Â url</span>: <span class="hljs-string">'/pages/detail/detail?id=123&amp;name=test'</span>
})
â€‹
<span class="hljs-comment">// å¯¹è±¡å‚æ•°ï¼ˆéœ€è¦ç¼–ç ï¼‰</span>
uni.<span class="hljs-title function_ invoke__">navigateTo</span>({
 <span class="hljs-attr">Â url</span>: <span class="hljs-string">'/pages/detail/detail?data='</span> + <span class="hljs-title function_ invoke__">encodeURIComponent</span>(JSON.<span class="hljs-title function_ invoke__">stringify</span>({
 Â  <span class="hljs-attr">Â id</span>: <span class="hljs-number">123</span>,
 Â  <span class="hljs-attr">Â name</span>: <span class="hljs-string">'test'</span>
  }))
})
</code></pre>
<ol start="2">
<li>uni.redirectTo å…³é—­å½“å‰é¡µé¢ è·³è½¬åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢</li>
</ol>
<pre><code class="hljs language-css" lang="css">uni<span class="hljs-selector-class">.redirectTo</span>({
 Â url: <span class="hljs-string">'/pages/home/home'</span>
})
</code></pre>
<ol start="3">
<li>uni.reLaunch å…³é—­æ‰€æœ‰é¡µé¢ï¼Œæ‰“å¼€åˆ°åº”ç”¨å†…çš„æŸä¸ªé¡µé¢</li>
</ol>
<pre><code class="hljs language-css" lang="css">uni<span class="hljs-selector-class">.reLaunch</span>({
 Â url: <span class="hljs-string">'/pages/index/index'</span>
})
</code></pre>
<ol start="4">
<li>uni.switchTab è·³è½¬åˆ°tabBaré¡µé¢ï¼Œå¹¶å…³é—­å…¶ä»–æ‰€æœ‰étabBaré¡µé¢</li>
</ol>
<pre><code class="hljs language-css" lang="css">uni<span class="hljs-selector-class">.switchTab</span>({
 Â url: <span class="hljs-string">'/pages/home/home'</span>
})
</code></pre>
<ol start="5">
<li>uni.navigateBack è¿”å›ä¸Šä¸€çº§æˆ–è€…å¤šçº§é¡µé¢</li>
</ol>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// è¿”å›ä¸Šä¸€é¡µ</span>
uni<span class="hljs-selector-class">.navigateBack</span>()
â€‹
<span class="hljs-comment">// è¿”å›å¤šçº§é¡µé¢</span>
uni<span class="hljs-selector-class">.navigateBack</span>({
 Â delta: <span class="hljs-number">2</span> Â // è¿”å›<span class="hljs-number">2</span>çº§
})
</code></pre>
</blockquote>
<p>å…¶ä¸­<code>logout</code>ä¹Ÿæ˜¯æ¯”è¾ƒç®€å•äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">const layout = async () =&gt; { 
 Â  Â <span class="hljs-built_in">removeToken</span>()
 Â  Â <span class="hljs-built_in">resetState</span>()
}
</code></pre>
<p>ä¹Ÿå°±æ˜¯ç™»å½•å‰ç§»é™¤tokenå’Œstoreä¸­çš„ä¸€äº›çŠ¶æ€ï¼Œçœ‹ä»£ç æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œä½†æ˜¯å°±æ˜¯åœ¨è‹¹æœ6Plusä¸­å‡ºç°å¡é¡¿ï¼Œå¾ˆè´¹è§£ï¼Œå…‰çœ‹ä»£ç çœ‹ä¸å‡ºä»»ä½•é—®é¢˜ï¼Œå°±å¸¦ç€é—®é¢˜é—®äº†ä¸‹gptï¼ŒçŸ¥é“äº†<code>WKWebView å¯¼èˆªé˜Ÿåˆ—é”</code>è¿™ä¸ªä¸œè¥¿ã€‚</p>
<h5 data-id="heading-1">WKWebView å¯¼èˆªé˜Ÿåˆ—é”</h5>
<p><code>WKWebView</code> å¯¼èˆªé˜Ÿåˆ—é”å®šæ˜¯ WebKit å†…æ ¸ä¸­çš„ä¸€ä¸ª<strong>çº¿ç¨‹å®‰å…¨æœºåˆ¶</strong>ï¼Œæ—¨åœ¨é˜²æ­¢åœ¨é¡µé¢åŠ è½½è¿‡ç¨‹ä¸­çš„ç«æ€æ¡ä»¶ã€‚ä½†åœ¨è€ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸ªæœºåˆ¶å®ç°å¾—è¿‡äºä¿å®ˆï¼Œå¯¼è‡´å¹¶å‘å¯¼èˆªæ“ä½œå®¹æ˜“è¢«é˜»å¡ã€‚</p>
<p>ä¸»è¦æœ‰è¿™ä¹ˆå‡ ä¸ªåœºæ™¯ä¼šè§¦å‘</p>
<ol start="0">
<li>
<p>å¿«é€Ÿè¿ç»­å¯¼èˆªè°ƒç”¨</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¾®è§‚æ—¶åºé—®é¢˜ - å¯¼èˆªç«äº‰</span>
<span class="hljs-keyword">const</span> startTime = performance.<span class="hljs-title function_">now</span>();
â€‹
<span class="hljs-comment">// å¯¼èˆªè¯·æ±‚1 - ç¬¬0ms</span>
uni.<span class="hljs-title function_">navigateTo</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">'/pageA'</span> });
â€‹
<span class="hljs-comment">// åœ¨å¯¼èˆª1è¿˜æœªå®ŒæˆçŠ¶æ€è½¬æ¢æ—¶...</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
 Â  Â <span class="hljs-comment">// å¯¼èˆªè¯·æ±‚2 - ç¬¬5ms (æ­¤æ—¶å¯¼èˆª1å¯èƒ½è¿˜åœ¨ WKNavigationStateScheduled)</span>
 Â  Â uni.<span class="hljs-title function_">navigateTo</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">'/pageB'</span> });
}, <span class="hljs-number">5</span>);
</code></pre>
</li>
<li>
<p>èµ„æºåŠ è½½ä¸å¯¼èˆªç«äº‰</p>
<pre><code class="hljs language-objectivec" lang="objectivec"><span class="hljs-comment">// WebKit å†…éƒ¨èµ„æºåŠ è½½æ—¶åº</span>
- (<span class="hljs-type">void</span>)startNavigation:(<span class="hljs-built_in">WKNavigation</span> *)navigation {
 Â   [<span class="hljs-keyword">self</span> acquireNavigationLock]; <span class="hljs-comment">// è·å–å¯¼èˆªé”</span>
 Â  Â 
 Â   <span class="hljs-comment">// å¼€å§‹åŠ è½½ä¸»æ–‡æ¡£</span>
 Â   [<span class="hljs-keyword">self</span> loadMainDocument];
 Â  Â 
 Â   <span class="hljs-comment">// æ­¤æ—¶å¦‚æœä¸»æ–‡æ¡£ä¸­æœ‰åŒæ­¥èµ„æºè¯·æ±‚</span>
 Â   <span class="hljs-comment">// &lt;script src="sync-script.js"&gt;&lt;/script&gt;</span>
 Â   <span class="hljs-comment">// èµ„æºåŠ è½½ä¼šé˜»å¡å¯¼èˆªé”é‡Šæ”¾</span>
 Â  Â 
 Â   [<span class="hljs-keyword">self</span> releaseNavigationLock]; <span class="hljs-comment">// å»¶è¿Ÿé‡Šæ”¾ï¼</span>
}
</code></pre>
</li>
<li>
<p>jsæ¡¥æ¥ä¸å¯¼èˆªäº¤äº’</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// uni-app æ¡†æ¶å±‚å¯èƒ½çš„é—®é¢˜</span>
<span class="hljs-comment">// 1. é¡µé¢ç”Ÿå‘½å‘¨æœŸé’©å­ä¸å¯¼èˆªç«äº‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
 Â  Â <span class="hljs-title function_">onLoad</span>(<span class="hljs-params"/>) {
 Â  Â  Â  Â <span class="hljs-comment">// åœ¨ onLoad ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œ</span>
 Â  Â  Â  Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadHeavyData</span>(); <span class="hljs-comment">// é˜»å¡å¯¼èˆªå®Œæˆ</span>
 Â   },
 Â  Â 
 Â  Â <span class="hljs-title function_">onShow</span>(<span class="hljs-params"/>) {
 Â  Â  Â  Â <span class="hljs-comment">// è§¦å‘ UI æ›´æ–°ï¼Œéœ€è¦æ¸²æŸ“é”</span>
 Â  Â  Â  Â <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startAnimation</span>(); 
 Â   }
}
â€‹
</code></pre>
<p>è¿™ä¸ªå®ä¾‹ä¸­ï¼ŒonLoadçš„è§¦å‘æ—¶æœºæ˜¯é¡µé¢é¦–æ¬¡åˆ›å»ºæ—¶ ï¼Œ onShowè§¦å‘æ˜¯é¡µé¢æ˜¾ç¤ºçš„æ—¶å€™ä¼šè§¦å‘ï¼Œå½“onLoadä¸­æ‰§è¡ŒloadHeavyDataè€—æ—¶æ“ä½œæ—¶ï¼Œç­‰é¡µé¢æ˜¾ç¤ºæ‰§è¡ŒonShowä¸­çš„startAnimationå°±ä¼šå¯¼è‡´ç«äº‰èµ„æºï¼Œå°±ä¼šè§¦å‘é˜Ÿåˆ—é”ï¼Œå¯¼è‡´é¡µé¢å¡æ­»ï¼Œæ¯”è¾ƒå¥½çš„æ–¹æ³•å°±æ˜¯è®©ä»–ä»¬å†ä¸€ä¸ªæ–¹æ³•ä¸­æ‰§è¡Œï¼Œç„¶åå°†ä»–ä»¬çš„æ­¥éª¤æ‹†åˆ†ä¸‹ï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">onLoad() {
    <span class="hljs-comment">// é˜¶æ®µ1: ç«‹å³æ‰§è¡Œ (å¯¼èˆªé”æŒæœ‰æœŸé—´)</span>
    <span class="hljs-keyword">this</span>.initUIState();
â€‹
    <span class="hljs-comment">// é˜¶æ®µ2: å»¶è¿Ÿæ‰§è¡Œ (å¯¼èˆªé”é‡Šæ”¾å)</span>
    <span class="hljs-keyword">this</span>.deferHeavyTask();
â€‹
    <span class="hljs-comment">// é˜¶æ®µ3: ç©ºé—²æ—¶æ‰§è¡Œ</span>
    <span class="hljs-keyword">this</span>.idleNonCriticalTask();
},
</code></pre>
</li>
<li>
<p>cssã€jsåŠ¨ç”»ä¸jså†²çª</p>
<pre><code class="hljs language-ini" lang="ini">function startAnimation() {
 Â  Â const <span class="hljs-attr">element</span> = document.querySelector(<span class="hljs-string">'.animated'</span>)<span class="hljs-comment">;</span>
 Â  Â <span class="hljs-attr">element.style.transform</span> = <span class="hljs-string">'translateX(0)'</span><span class="hljs-comment">;</span>
 Â  Â 
 Â  Â // è§¦å‘ CSS åŠ¨ç”»
 Â  Â requestAnimationFrame(() =&gt; {
 Â  Â  Â  Â <span class="hljs-attr">element.style.transform</span> = <span class="hljs-string">'translateX(100px)'</span><span class="hljs-comment">;</span>
 Â  Â  Â  Â 
 Â  Â  Â  Â // åœ¨åŒä¸€å¸§å†…è§¦å‘å¯¼èˆª
 Â  Â  Â  Â uni.navigateTo({ url: '/next' })<span class="hljs-comment">; // å±é™©ï¼</span>
 Â   })<span class="hljs-comment">;</span>
}
</code></pre>
</li>
</ol>
<p>ç„¶åå›åˆ°é¡¹ç›®ç›¸å…³ä»£ç ï¼Œä¼¼ä¹ä¹Ÿæ²¡æœ‰å¾ˆå¤§çš„è®¡ç®—é‡å¯¼è‡´èµ„æºç«äº‰ï¼Œè§¦å‘é˜Ÿåˆ—é”ï¼Œçœ‹ä¸‹gpt5ä¼˜åŒ–åçš„ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> clicking = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogout</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span>(clicking.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>
    click.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
    <span class="hljs-keyword">await</span> message.<span class="hljs-title function_">confirm</span>({<span class="hljs-attr">msg</span>:<span class="hljs-string">'ç¡®å®šé€€å‡ºç™»å½•ï¼Ÿ'</span>,<span class="hljs-attr">title</span>:<span class="hljs-string">'é€€å‡ºç™»å½•'</span>})
    useStore.<span class="hljs-title function_">logOut</span>()
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> clicking.<span class="hljs-property">value</span>=<span class="hljs-literal">false</span>,<span class="hljs-number">300</span>)
}
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">delay</span> = ms =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(r,ms))
<span class="hljs-keyword">const</span> loggingOut = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> <span class="hljs-title function_">LogOut</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
 Â  Â <span class="hljs-keyword">if</span>(loggingOut.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>
 Â  Â loggingOut.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
 Â  Â <span class="hljs-title function_">removeToken</span>()
 Â  Â <span class="hljs-title function_">resetState</span>()
 Â  Â uni.<span class="hljs-property">$emit</span>?.(<span class="hljs-string">'router:unlock'</span>)
 Â  Â uni.<span class="hljs-property">$emit</span>?.(<span class="hljs-string">'ui:closs-popups'</span>)
 Â  Â 
 Â  Â <span class="hljs-keyword">await</span> <span class="hljs-title function_">delay</span>(<span class="hljs-number">220</span>)
 Â  Â 
 Â  Â <span class="hljs-keyword">try</span> {uni.<span class="hljs-title function_">reLaunch</span>({<span class="hljs-attr">url</span>:<span class="hljs-string">'/pages/login/index'</span>}) } <span class="hljs-keyword">catch</span> {}
 Â  Â <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">try</span>{uni.<span class="hljs-title function_">relaunch</span>({<span class="hljs-attr">url</span>:<span class="hljs-string">'/pages/login/index'</span>}) <span class="hljs-keyword">catch</span> {}, <span class="hljs-number">700</span>)
 Â  Â 
 Â  Â loggingOut.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
}
</code></pre>
<p>çœ‹äº†ä¸‹ä»£ç ï¼Œä¼¼ä¹ä¹Ÿæ²¡æœ‰å•¥å˜æ›´ï¼Œåªæ˜¯éƒ½åŠ äº†ä¸ªå¼€å…³ï¼Œç„¶ååŠ äº†ä¸ªå»¶æ—¶æ“ä½œï¼Œä½†æ˜¯é—®é¢˜ç¡®å®è§£å†³äº†ã€‚ç¡®å®éå¸¸å¥‡æ€ªçš„é—®é¢˜ã€‚</p>
<h5 data-id="heading-2"/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆäº‹åŠ¡æ³¨è§£ä¼šå¤±æ•ˆï¼Ÿä¸€æ–‡ææ‡‚ AOP ä»£ç†åŸç†ä¸è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7578762210287550527</link>    <guid>https://juejin.cn/post/7578762210287550527</guid>    <pubDate>2025-12-02T03:45:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578762210287550527" data-draft-id="7578811288819335211" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆäº‹åŠ¡æ³¨è§£ä¼šå¤±æ•ˆï¼Ÿä¸€æ–‡ææ‡‚ AOP ä»£ç†åŸç†ä¸è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-02T03:45:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="5h0wer"/> <meta itemprop="url" content="https://juejin.cn/user/2015829577707083"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆäº‹åŠ¡æ³¨è§£ä¼šå¤±æ•ˆï¼Ÿä¸€æ–‡ææ‡‚ AOP ä»£ç†åŸç†ä¸è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2015829577707083/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    5h0wer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:45:07.000Z" title="Tue Dec 02 2025 03:45:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€é—®é¢˜çš„é‡ç°ï¼šäº‹åŠ¡å¤±æ•ˆçš„è¯¡å¼‚ç°è±¡</h2>
<p>åœ¨å‰æ®µæ—¶é—´çš„é¡¹ç›®å­¦ä¹ ä¸­ï¼Œæˆ‘é‡è§äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å½“æˆ‘åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­è°ƒç”¨ä¸€ä¸ªæœ‰äº‹åŠ¡æ³¨è§£çš„æ–¹æ³•æ—¶ï¼Œideaæç¤ºäº‹åŠ¡ä¼šå¤±æ•ˆã€‚å¦‚ä¸‹å›¾ï¼Œæˆ‘å¯¹ä¸€ä¸ªå•ä¸ªåˆ›å»ºçš„æ–¹æ³•åŠ äº†å›æ»šçš„äº‹åŠ¡ï¼Œè€Œåç»­æ‰¹é‡æ’å…¥è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³•ï¼Œæ­¤æ—¶å‡ºç°äº†è¿™ä¸ªæç¤ºã€‚</p>
<p><strong>@Transactional è‡ªè°ƒç”¨(å®é™…ä¸Šæ˜¯ç›®æ ‡å¯¹è±¡å†…)çš„æ–¹æ³•è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„å¦ä¸€ä¸ªæ–¹æ³•/åœ¨è¿è¡Œæ—¶ä¸ä¼šå¯¼è‡´å®é™…çš„äº‹åŠ¡</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5b7822e022140f8b9aae9481c539bd3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgNWgwd2Vy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765251907&amp;x-signature=yy3cQGQ%2BBYnj3FpT8OeRfSfIJqo%3D" alt="" loading="lazy"/></p>
<p>èµ·åˆæˆ‘å¹¶æ²¡æœ‰æ·±ç©¶ï¼Œç›´åˆ°è¿‘æœŸçš„é¢è¯•ä¸­ï¼Œé¢è¯•å®˜é—®äº†æˆ‘ä¸€ä¸ªé—®é¢˜ï¼Œå½“ä¸¤ä¸ªserviceAå’ŒserviceBæ–¹æ³•ä½äºåŒä¸€ä¸ªServiceç±»ä¸­ï¼ŒserviceBå®šä¹‰äº†åˆ‡é¢ï¼Œç„¶åserviceAè°ƒç”¨serviceBï¼Œåˆ‡é¢ä¼šç”Ÿæ•ˆå—ï¼Ÿæˆ‘å½“æ—¶å›ç­”ä¸ä¼šï¼Œå› ä¸ºæ— æ³•åˆ›å»ºä»£ç†å¯¹è±¡ã€‚</p>
<p>æ˜¯çš„ï¼Œ@Transaction æ³¨è§£å°±æ˜¯é€šè¿‡AOPå®ç°çš„ï¼Œäº‹åæˆ‘æç„¶å¤§æ‚Ÿï¼ŒåŸæ¥æ˜¯AOPæçš„é¬¼ï¼</p>
<h2 data-id="heading-1">äºŒã€AOPï¼šSpringæ¡†æ¶çš„éšå½¢åŠŸè‡£</h2>
<p>é‚£ä»€ä¹ˆæ˜¯AOPå‘¢ï¼ŸAOPä½œä¸ºSpringçš„æ ¸å¿ƒæ€æƒ³ï¼Œä¸IoCå’ŒDIå…±åŒå®ç°äº†Springçš„é«˜å†…èšã€ä½è€¦åˆã€è½»é‡çš„ç‰¹æ€§ï¼Œæ˜¯Springæ•´ä¸ªç”Ÿæ€ä¸å¯æˆ–ç¼ºçš„åŸºçŸ³ã€‚AOPï¼ˆAspect-Oriented Programmingï¼‰æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œæ—¨åœ¨è§£å†³æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆcross-cutting concernsï¼‰çš„æ¨¡å—åŒ–é—®é¢˜ã€‚å®ƒå…è®¸å¼€å‘è€…å°†å½±å“å¤šä¸ªç±»çš„å…¬å…±è¡Œä¸ºï¼ˆå¦‚æ—¥å¿—ã€äº‹åŠ¡ã€å®‰å…¨ç­‰ï¼‰ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥ã€‚å…·æœ‰ä»¥ä¸‹çš„æ ¸å¿ƒæ€æƒ³ï¼š</p>
<ul>
<li><strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼šå°†ç³»ç»Ÿåˆ†ä¸ºæ ¸å¿ƒå…³æ³¨ç‚¹ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰å’Œæ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆé€šç”¨åŠŸèƒ½ï¼‰</li>
<li><strong>å¢å¼ºè€Œéä¿®æ”¹</strong>ï¼šé€šè¿‡åŠ¨æ€ç»‡å…¥æ–¹å¼ä¸ºç°æœ‰ä»£ç æ·»åŠ åŠŸèƒ½ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹æºä»£ç </li>
</ul>
<p>å¯¹äºä¸€ä¸ªåˆ‡é¢ï¼Œæˆ‘ä»¬ä¼šé€šè¿‡@Beforeã€@Afterã€@Aroundç­‰æ³¨è§£å®šä¹‰åˆ‡é¢ç»‡å…¥çš„ä½ç½®ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€æ·±å…¥ç†è§£ï¼šAOPçš„å®ç°åŸç†â€”â€”ä»£ç†æ¨¡å¼</h2>
<p>è¦çœŸæ­£ç†è§£ä¸ºä»€ä¹ˆäº‹åŠ¡æ³¨è§£ä¼šå¤±æ•ˆï¼Œæˆ‘ä»¬éœ€è¦æ·±å…¥AOPçš„å®ç°æœºåˆ¶ã€‚Spring AOPçš„æ ¸å¿ƒå°±æ˜¯<strong>ä»£ç†æ¨¡å¼</strong>ã€‚Springä¸ä¼šç›´æ¥è°ƒç”¨æˆ‘ä»¬çš„ä¸šåŠ¡å¯¹è±¡ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œé€šè¿‡è¿™ä¸ªä»£ç†å¯¹è±¡æ¥é—´æ¥è°ƒç”¨ã€‚</p>
<h3 data-id="heading-3">ä»£ç†å¯¹è±¡çš„å·¥ä½œæœºåˆ¶</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åŸå§‹ä¸šåŠ¡å¯¹è±¡</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">batchCreateUsers</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// è¿™é‡Œç›´æ¥è°ƒç”¨createUser() - é—®é¢˜æ‰€åœ¨ï¼</span>
        <span class="hljs-keyword">for</span> (int i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
            <span class="hljs-title function_">createUser</span>(); <span class="hljs-comment">// âŒ äº‹åŠ¡ä¸ä¼šç”Ÿæ•ˆï¼Œå› ä¸ºä¸æ˜¯ä»£ç†å¯¹è±¡è°ƒç”¨ï¼Œæ²¡æœ‰å®ç°åˆ‡é¢çš„ç»‡å…¥ï¼</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-4">Spring AOPçš„ä¸¤ç§åŠ¨æ€ä»£ç†æ–¹å¼</h3>
<p>Spring AOPä¸»è¦ä½¿ç”¨ä¸¤ç§åŠ¨æ€ä»£ç†æŠ€æœ¯ï¼šJDKåŠ¨æ€ä»£ç†å’ŒCGLIBåŠ¨æ€ä»£ç†ã€‚</p>
<h4 data-id="heading-5">1. JDKåŠ¨æ€ä»£ç†</h4>
<p><strong>åŸç†</strong>ï¼šåŸºäºæ¥å£å®ç°ï¼Œä½¿ç”¨Javaåå°„æœºåˆ¶</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šJDKåŠ¨æ€ä»£ç†çš„å®ç°åŸç†</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdkDynamicProxyDemo</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-comment">// ç›®æ ‡å¯¹è±¡</span>
        <span class="hljs-title class_">UserService</span> target = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserServiceImpl</span>();
        
        <span class="hljs-comment">// åˆ›å»ºä»£ç†å¯¹è±¡</span>
        <span class="hljs-title class_">UserService</span> proxy = (<span class="hljs-title class_">UserService</span>) <span class="hljs-title class_">Proxy</span>.<span class="hljs-title function_">newProxyInstance</span>(
            target.<span class="hljs-title function_">getClass</span>().<span class="hljs-title function_">getClassLoader</span>(),
            target.<span class="hljs-title function_">getClass</span>().<span class="hljs-title function_">getInterfaces</span>(),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">InvocationHandler</span>() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-title class_">Object</span> <span class="hljs-title function_">invoke</span>(<span class="hljs-title class_">Object</span> proxy, <span class="hljs-title class_">Method</span> method, <span class="hljs-title class_">Object</span>[] args) 
                    throws <span class="hljs-title class_">Throwable</span> {
                    
                    <span class="hljs-comment">// å‰ç½®å¢å¼ºï¼šå¼€å¯äº‹åŠ¡</span>
                    <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å¼€å¯äº‹åŠ¡..."</span>);
                    
                    <span class="hljs-comment">// è°ƒç”¨ç›®æ ‡æ–¹æ³•</span>
                    <span class="hljs-title class_">Object</span> result = method.<span class="hljs-title function_">invoke</span>(target, args);
                    
                    <span class="hljs-comment">// åç½®å¢å¼ºï¼šæäº¤äº‹åŠ¡</span>
                    <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"æäº¤äº‹åŠ¡..."</span>);
                    
                    <span class="hljs-keyword">return</span> result;
                }
            }
        );
        
        <span class="hljs-comment">// é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•</span>
        proxy.<span class="hljs-title function_">createUser</span>(); <span class="hljs-comment">// âœ… äº‹åŠ¡ç”Ÿæ•ˆï¼Œä»£ç†å¯¹è±¡ç»‡å…¥äº†åˆ‡é¢çš„é€»è¾‘</span>
    }
}
</code></pre>
<p><strong>JDKåŠ¨æ€ä»£ç†çš„ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>åªèƒ½ä¸ºæ¥å£åˆ›å»ºä»£ç†</li>
<li>è¦æ±‚ç›®æ ‡ç±»è‡³å°‘å®ç°ä¸€ä¸ªæ¥å£</li>
<li>ä½¿ç”¨<code>java.lang.reflect.Proxy</code>ç±»</li>
<li>æ€§èƒ½ç›¸å¯¹è¾ƒå¥½ï¼ˆJava 8+ä¼˜åŒ–åï¼‰</li>
</ul>
<h4 data-id="heading-6">2. CGLIBåŠ¨æ€ä»£ç†</h4>
<p><strong>åŸç†</strong>ï¼šåŸºäºç±»ç»§æ‰¿ï¼Œä½¿ç”¨å­—èŠ‚ç ç”ŸæˆæŠ€æœ¯</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç¤ºä¾‹ï¼šCGLIBåŠ¨æ€ä»£ç†çš„å®ç°åŸç†</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CglibProxyDemo</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-comment">// åˆ›å»ºEnhancerå¯¹è±¡</span>
        <span class="hljs-title class_">Enhancer</span> enhancer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Enhancer</span>();
        
        <span class="hljs-comment">// è®¾ç½®çˆ¶ç±»ï¼ˆç›®æ ‡ç±»ï¼‰</span>
        enhancer.<span class="hljs-title function_">setSuperclass</span>(<span class="hljs-title class_">UserServiceImpl</span>.<span class="hljs-property">class</span>);
        
        <span class="hljs-comment">// è®¾ç½®å›è°ƒ</span>
        enhancer.<span class="hljs-title function_">setCallback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MethodInterceptor</span>() {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-keyword">public</span> <span class="hljs-title class_">Object</span> <span class="hljs-title function_">intercept</span>(<span class="hljs-title class_">Object</span> obj, <span class="hljs-title class_">Method</span> method, 
                                    <span class="hljs-title class_">Object</span>[] args, <span class="hljs-title class_">MethodProxy</span> proxy) 
                throws <span class="hljs-title class_">Throwable</span> {
                
                <span class="hljs-comment">// å‰ç½®å¢å¼ºï¼šå¼€å¯äº‹åŠ¡</span>
                <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"CGLIBä»£ç†ï¼šå¼€å¯äº‹åŠ¡..."</span>);
                
                <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»æ–¹æ³•</span>
                <span class="hljs-title class_">Object</span> result = proxy.<span class="hljs-title function_">invokeSuper</span>(obj, args);
                
                <span class="hljs-comment">// åç½®å¢å¼ºï¼šæäº¤äº‹åŠ¡</span>
                <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"CGLIBä»£ç†ï¼šæäº¤äº‹åŠ¡..."</span>);
                
                <span class="hljs-keyword">return</span> result;
            }
        });
        
        <span class="hljs-comment">// åˆ›å»ºä»£ç†å¯¹è±¡</span>
        <span class="hljs-title class_">UserService</span> proxy = (<span class="hljs-title class_">UserService</span>) enhancer.<span class="hljs-title function_">create</span>();
        
        <span class="hljs-comment">// é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨æ–¹æ³•</span>
        proxy.<span class="hljs-title function_">createUser</span>(); <span class="hljs-comment">// âœ… äº‹åŠ¡ç”Ÿæ•ˆï¼Œä»£ç†å¯¹è±¡ç»‡å…¥äº†åˆ‡é¢çš„é€»è¾‘</span>
    }
}
</code></pre>
<p><strong>CGLIBåŠ¨æ€ä»£ç†çš„ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å¯ä»¥ä¸ºç±»åˆ›å»ºä»£ç†ï¼ˆä¸éœ€è¦æ¥å£ï¼‰</li>
<li>é€šè¿‡ç»§æ‰¿ç›®æ ‡ç±»å®ç°ä»£ç†</li>
<li>ä½¿ç”¨ASMå­—èŠ‚ç æ“ä½œæ¡†æ¶</li>
<li>ä¸èƒ½ä»£ç†finalç±»å’Œæ–¹æ³•ï¼ˆæ— æ³•ç»§æ‰¿æˆ–é‡å†™ï¼‰</li>
<li>æ€§èƒ½ç•¥ä½äºJDKåŠ¨æ€ä»£ç†ï¼ˆä½†å·®è·ä¸å¤§ï¼‰</li>
</ul>
<h2 data-id="heading-7">å››ã€æ­å¼€è°œåº•ï¼šä¸ºä»€ä¹ˆäº‹åŠ¡æ³¨è§£ä¼šå¤±æ•ˆï¼Ÿ</h2>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å›ç­”å¼€å¤´çš„é—®é¢˜äº†ã€‚äº‹åŠ¡å¤±æ•ˆçš„æ ¹æœ¬åŸå› åœ¨äº<strong>ä»£ç†å¯¹è±¡çš„è°ƒç”¨æœºåˆ¶</strong>ã€‚</p>
<h3 data-id="heading-8">é—®é¢˜é‡ç°åˆ†æ</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>) {
        <span class="hljs-comment">// æ•°æ®åº“æ’å…¥æ“ä½œ</span>
        userDao.<span class="hljs-title function_">insert</span>(user);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">batchCreateUsers</span>(<span class="hljs-params">List&lt;User&gt; users</span>) {
        <span class="hljs-keyword">for</span> (<span class="hljs-title class_">User</span> user : users) {
            <span class="hljs-comment">// é—®é¢˜ï¼šè¿™é‡Œè°ƒç”¨çš„æ˜¯this.createUser()ï¼Œè€Œä¸æ˜¯ä»£ç†å¯¹è±¡çš„createUser()</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createUser</span>(user);
            <span class="hljs-comment">// æ­£ç¡®åšæ³•ï¼šåº”è¯¥è°ƒç”¨ä»£ç†å¯¹è±¡çš„createUser()æ–¹æ³•</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-9">å›¾è§£è°ƒç”¨æµç¨‹</h3>
<pre><code class="hljs language-scss" lang="scss">é”™è¯¯è°ƒç”¨æµç¨‹ï¼š
<span class="hljs-built_in">batchCreateUsers</span>() â†’ this<span class="hljs-selector-class">.createUser</span>() â†’ åŸå§‹å¯¹è±¡çš„<span class="hljs-built_in">createUser</span>()
                            â†“
                     âŒ åˆ‡é¢æ²¡æœ‰ç»‡å…¥ï¼Œæ²¡æœ‰äº‹åŠ¡æ§åˆ¶ï¼

æ­£ç¡®è°ƒç”¨æµç¨‹ï¼š
<span class="hljs-built_in">batchCreateUsers</span>() â†’ ä»£ç†å¯¹è±¡<span class="hljs-selector-class">.createUser</span>() â†’ åŸå§‹å¯¹è±¡çš„<span class="hljs-built_in">createUser</span>()
                            â†“
                    âœ… åˆ‡é¢ç»‡å…¥ï¼Œæœ‰äº‹åŠ¡æ§åˆ¶ï¼ˆå‰ç½®ï¼šå¼€å¯äº‹åŠ¡ï¼Œåç½®ï¼šæäº¤äº‹åŠ¡ï¼‰
</code></pre>
<h3 data-id="heading-10">Springçš„é€‰æ‹©ï¼šé»˜è®¤ä½¿ç”¨å“ªç§ä»£ç†ï¼Ÿ</h3>
<p>Spring AOPæ ¹æ®ä»¥ä¸‹è§„åˆ™é€‰æ‹©ä»£ç†æ–¹å¼ï¼š</p>
<ol>
<li>å¦‚æœç›®æ ‡å¯¹è±¡å®ç°äº†æ¥å£ â†’ é»˜è®¤ä½¿ç”¨JDKåŠ¨æ€ä»£ç†</li>
<li>å¦‚æœç›®æ ‡å¯¹è±¡æ²¡æœ‰å®ç°æ¥å£ â†’ ä½¿ç”¨CGLIBåŠ¨æ€ä»£ç†</li>
<li>å¯ä»¥é€šè¿‡é…ç½®å¼ºåˆ¶ä½¿ç”¨CGLIBï¼š<code>spring.aop.proxy-target-class=true</code></li>
</ol>
<h2 data-id="heading-11">äº”ã€è§£å†³æ–¹æ¡ˆï¼šå¦‚ä½•é¿å…äº‹åŠ¡å¤±æ•ˆ</h2>
<h3 data-id="heading-12">æ–¹æ¡ˆ1ï¼šè‡ªæˆ‘æ³¨å…¥ï¼ˆæ¨èï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {

    <span class="hljs-comment">//SpringBoot 2.x + é»˜è®¤å¼€å¯å¾ªç¯ä¾èµ–æ”¯æŒï¼Œè‡ªæˆ‘æ³¨å…¥ä¸ä¼šæœ‰é—®é¢˜ï¼›</span>
    <span class="hljs-comment">//è‹¥å…³é—­å¾ªç¯ä¾èµ–ï¼ˆspring.main.allow-circular-references=falseï¼‰ï¼Œåˆ™æ­¤æ–¹æ¡ˆå¤±æ•ˆ</span>
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">UserService</span> self; <span class="hljs-comment">// æ³¨å…¥è‡ªå·±</span>
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>) {
        userDao.<span class="hljs-title function_">insert</span>(user);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">batchCreateUsers</span>(<span class="hljs-params">List&lt;User&gt; users</span>) {
        <span class="hljs-keyword">for</span> (<span class="hljs-title class_">User</span> user : users) {
            self.<span class="hljs-title function_">createUser</span>(user); <span class="hljs-comment">// é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-13">æ–¹æ¡ˆ2ï¼šä»ApplicationContextè·å–ä»£ç†å¯¹è±¡</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ApplicationContextAware</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">ApplicationContext</span> applicationContext;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setApplicationContext</span>(<span class="hljs-params">ApplicationContext applicationContext</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">applicationContext</span> = applicationContext;
    }
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>) {
        userDao.<span class="hljs-title function_">insert</span>(user);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">batchCreateUsers</span>(<span class="hljs-params">List&lt;User&gt; users</span>) {
        <span class="hljs-title class_">UserService</span> proxy = applicationContext.<span class="hljs-title function_">getBean</span>(<span class="hljs-title class_">UserService</span>.<span class="hljs-property">class</span>);
        <span class="hljs-keyword">for</span> (<span class="hljs-title class_">User</span> user : users) {
            proxy.<span class="hljs-title function_">createUser</span>(user);
        }
    }
}
</code></pre>
<h3 data-id="heading-14">æ–¹æ¡ˆ3ï¼šä½¿ç”¨AopContextè·å–å½“å‰ä»£ç†å¯¹è±¡</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>) {
        userDao.<span class="hljs-title function_">insert</span>(user);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">batchCreateUsers</span>(<span class="hljs-params">List&lt;User&gt; users</span>) {
        <span class="hljs-comment">// å¯ç”¨æš´éœ²ä»£ç†ï¼ˆä»¥ä¸‹ä¸‰ç§æ–¹æ³•ï¼‰</span>
        <span class="hljs-comment">// åœ¨é…ç½®ä¸­è®¾ç½®ï¼šexpose-proxy=true</span>
        <span class="hljs-comment">// æ³¨è§£æ–¹å¼ï¼š@EnableAspectJAutoProxy(exposeProxy = true)</span>
        <span class="hljs-comment">// é…ç½®æ–‡ä»¶æ–¹å¼ï¼ˆSpringBootï¼‰ï¼šspring.aop.expose-proxy=true</span>
        <span class="hljs-title class_">UserService</span> proxy = (<span class="hljs-title class_">UserService</span>) <span class="hljs-title class_">AopContext</span>.<span class="hljs-title function_">currentProxy</span>();
        <span class="hljs-keyword">for</span> (<span class="hljs-title class_">User</span> user : users) {
            proxy.<span class="hljs-title function_">createUser</span>(user);
        }
    }
}
</code></pre>
<h3 data-id="heading-15">æ–¹æ¡ˆ4ï¼šé‡æ„ä»£ç ç»“æ„</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å°†äº‹åŠ¡æ–¹æ³•æ‹†åˆ†åˆ°ç‹¬ç«‹çš„Serviceä¸­</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserTransactionService</span> {
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>) {
        userDao.<span class="hljs-title function_">insert</span>(user);
    }
}

<span class="hljs-meta">@Service</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">UserTransactionService</span> userTransactionService;
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">batchCreateUsers</span>(<span class="hljs-params">List&lt;User&gt; users</span>) {
        <span class="hljs-keyword">for</span> (<span class="hljs-title class_">User</span> user : users) {
            userTransactionService.<span class="hljs-title function_">createUser</span>(user);
        }
    }
}
</code></pre>
<h2 data-id="heading-16">å…­ã€é¢è¯•å›ç­”æŒ‡å—</h2>
<p>é’ˆå¯¹é¢è¯•å®˜çš„é—®é¢˜ï¼š"å½“ä¸¤ä¸ªserviceAå’ŒserviceBæ–¹æ³•ä½äºåŒä¸€ä¸ªServiceç±»ä¸­ï¼ŒserviceBå®šä¹‰äº†åˆ‡é¢ï¼Œç„¶åserviceAè°ƒç”¨serviceBï¼Œåˆ‡é¢ä¼šç”Ÿæ•ˆå—ï¼Ÿ"</p>
<p><strong>æ ‡å‡†å›ç­”ï¼š</strong></p>
<p>"ä¸ä¼šç”Ÿæ•ˆã€‚è¿™æ˜¯å› ä¸ºSpring AOPæ˜¯åŸºäºä»£ç†å®ç°çš„ã€‚å½“serviceAè°ƒç”¨serviceBæ—¶ï¼Œå®é™…ä¸Šæ˜¯é€šè¿‡<code>this.serviceB()</code>è¿™ç§æ–¹å¼ç›´æ¥è°ƒç”¨ï¼Œç»•è¿‡äº†ä»£ç†å¯¹è±¡ã€‚ä»£ç†å¯¹è±¡åªæ‹¦æˆªå¤–éƒ¨è°ƒç”¨ï¼Œå¯¹äºåŒä¸€ä¸ªç±»å†…éƒ¨çš„ç›¸äº’è°ƒç”¨ï¼ŒSpringæ— æ³•é€šè¿‡ä»£ç†è¿›è¡Œå¢å¼ºã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥é€šè¿‡è‡ªæˆ‘æ³¨å…¥ã€ä»ApplicationContextè·å–ä»£ç†å¯¹è±¡ã€æˆ–è€…é‡æ„ä»£ç ç»“æ„ç­‰æ–¹å¼æ¥ç¡®ä¿é€šè¿‡ä»£ç†å¯¹è±¡è¿›è¡Œè°ƒç”¨ã€‚"</p>
<h2 data-id="heading-17">ä¸ƒã€æ€»ç»“</h2>
<p>é€šè¿‡æœ¬æ–‡çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š</p>
<ol>
<li><strong>äº‹åŠ¡å¤±æ•ˆçš„æœ¬è´¨</strong>ï¼šAOPä»£ç†æœºåˆ¶å¯¼è‡´çš„å†…éƒ¨è°ƒç”¨ç»•è¿‡ä»£ç†å¯¹è±¡</li>
<li><strong>Spring AOPçš„å®ç°</strong>ï¼šåŸºäºJDKåŠ¨æ€ä»£ç†ï¼ˆæ¥å£ï¼‰å’ŒCGLIBåŠ¨æ€ä»£ç†ï¼ˆç±»ç»§æ‰¿ï¼‰</li>
<li><strong>ä»£ç†å¯¹è±¡çš„ä½œç”¨</strong>ï¼šåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰åæ’å…¥å¢å¼ºé€»è¾‘ï¼ˆå¦‚äº‹åŠ¡æ§åˆ¶ï¼‰</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šç¡®ä¿é€šè¿‡ä»£ç†å¯¹è±¡è°ƒç”¨æœ‰åˆ‡é¢çš„æ–¹æ³•</li>
</ol>
<p>ç†è§£AOPçš„ä»£ç†æœºåˆ¶ä¸ä»…æœ‰åŠ©äºè§£å†³äº‹åŠ¡å¤±æ•ˆçš„é—®é¢˜ï¼Œè¿˜èƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°è®¾è®¡ç³»ç»Ÿæ¶æ„ï¼Œåˆç†ä½¿ç”¨AOPçš„å„ç§ç‰¹æ€§ã€‚è®°ä½ï¼š<strong>åœ¨Springçš„ä¸–ç•Œé‡Œï¼Œæœ‰äº›æ—¶å€™"ç»•è¿‡è‡ªå·±"ï¼ˆé€šè¿‡ä»£ç†è°ƒç”¨ï¼‰æ‰èƒ½æ›´å¥½åœ°å®Œæˆå·¥ä½œï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ ç»ˆææŒ‡å—ï¼šMac M4 ç¼–è¯‘ Rust è‡³ Linux (AMD64)]]></title>    <link>https://juejin.cn/post/7578803491821944859</link>    <guid>https://juejin.cn/post/7578803491821944859</guid>    <pubDate>2025-12-02T03:47:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578803491821944859" data-draft-id="7578780780027052041" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ ç»ˆææŒ‡å—ï¼šMac M4 ç¼–è¯‘ Rust è‡³ Linux (AMD64)"/> <meta itemprop="keywords" content="åç«¯,Rust"/> <meta itemprop="datePublished" content="2025-12-02T03:47:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¹²é¥­æ¯”èµ›ç¬¬ä¸€åè·å¾—è€…"/> <meta itemprop="url" content="https://juejin.cn/user/3368559355902248"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ ç»ˆææŒ‡å—ï¼šMac M4 ç¼–è¯‘ Rust è‡³ Linux (AMD64)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3368559355902248/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¹²é¥­æ¯”èµ›ç¬¬ä¸€åè·å¾—è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:47:40.000Z" title="Tue Dec 02 2025 03:47:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ çš„ Mac æ˜¯ <strong>ARM</strong> æ¶æ„ï¼ŒæœåŠ¡å™¨æ˜¯ <strong>x86/AMD</strong> æ¶æ„ã€‚</p>
<p>æ™®é€šç¼–è¯‘å‡ºæ¥çš„ç¨‹åºï¼ŒæœåŠ¡å™¨çœ‹ä¸æ‡‚ã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªâ€œç¿»è¯‘å®˜â€æŠŠä»£ç ç¿»è¯‘æˆæœåŠ¡å™¨èƒ½æ‡‚çš„æ ¼å¼ã€‚</p>
<ul>
<li><strong>Zig</strong>ï¼šå°±æ˜¯é‚£ä¸ªå¼ºå¤§çš„åº•å±‚ç¿»è¯‘å®˜ï¼ˆé“¾æ¥å™¨ï¼‰ã€‚</li>
</ul>

<ul>
<li><strong>cargo-zigbuild</strong>ï¼šæ˜¯ Rust çš„æŒ‡æŒ¥å®˜ï¼Œå®ƒæŒ‡æŒ¥ Zig å»å¹²æ´»ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-0">ç¬¬ä¸€æ­¥ï¼šå®‰è£…å¿…è¦çš„å·¥å…·</h3>
<p>æ‰“å¼€ç»ˆç«¯ï¼ˆTerminalï¼‰ï¼Œä¾æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<ol>
<li><strong>å®‰è£… Zig</strong> (ç¿»è¯‘å®˜)</li>
</ol>
<pre><code class="hljs">brew install zig
</code></pre>
<p>Bash</p>
<ol start="2">
<li><strong>å®‰è£… cargo-zigbuild</strong> (æŒ‡æŒ¥å®˜)</li>
</ol>
<pre><code class="hljs">cargo install cargo-zigbuild
</code></pre>
<p>Bash</p>
<ol start="3">
<li><strong>æ·»åŠ ç›®æ ‡æ¶æ„æ”¯æŒ</strong>å‘Šè¯‰ Rust æˆ‘ä»¬é€šè¿‡èƒ½å¤Ÿç”Ÿæˆ x86_64 çš„ä»£ç ï¼š</li>
</ol>
<pre><code class="hljs language-sql" lang="sql">rustup target <span class="hljs-keyword">add</span> x86_64<span class="hljs-operator">-</span><span class="hljs-literal">unknown</span><span class="hljs-operator">-</span>linux<span class="hljs-operator">-</span>gnu
</code></pre>
<p>Bash</p>
<hr/>
<h3 data-id="heading-1">ç¬¬äºŒæ­¥ï¼šä¿®æ”¹ Cargo.toml (æœ€å…³é”®çš„ä¸€æ­¥ï¼)</h3>
<p><strong>é—®é¢˜æ‰€åœ¨</strong>ï¼šLinux ä¸Šçš„ OpenSSL åº“å’Œ Mac ä¸Šçš„ä¸ä¸€æ ·ã€‚å¦‚æœç›´æ¥ç¼–è¯‘ï¼Œç¼–è¯‘å™¨ä¼šåœ¨ Mac ä¸Šæ‰¾ Linux ç‰ˆçš„ OpenSSL åº“ï¼Œæ‰¾ä¸åˆ°å°±ä¼šæŠ¥é”™ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šæœ‰ä¸¤ç§æ–¹æ³•ï¼Œ<strong>æ¨èæ–¹æ³• A</strong>ã€‚</p>
<h4 data-id="heading-2">æ–¹æ³• Aï¼šä½¿ç”¨ Â Â Â vendoredÂ  æ¨¡å¼ï¼ˆæ¨èï¼Œæœ€ç¨³å¦¥ï¼‰</h4>
<p>è®© Rust ç¼–è¯‘å™¨è‡ªåŠ¨ä¸‹è½½ä¸€ä»½ OpenSSL çš„æºç ï¼Œå¹¶æŠŠå®ƒ<strong>é™æ€ç¼–è¯‘</strong>è¿›ä½ çš„ç¨‹åºé‡Œã€‚è¿™æ ·ä½ çš„ç¨‹åºåˆ°äº†æœåŠ¡å™¨ä¸Šï¼Œä¸éœ€è¦ä¾èµ–æœåŠ¡å™¨çš„ OpenSSL ç‰ˆæœ¬ï¼Œç›´æ¥å°±èƒ½è·‘ã€‚</p>
<p>æ‰“å¼€é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ Â Â Â Cargo.tomlÂ ï¼Œæ‰¾åˆ° Â Â Â [dependencies]Â  åŒºåŸŸï¼š</p>
<p><strong>å¦‚æœä½ ç›´æ¥ä¾èµ–äº†</strong> <strong>openssl</strong>Â  <strong>ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># ä¿®æ”¹å‰å¯èƒ½æ˜¯ï¼šopenssl = "0.10"</span>
<span class="hljs-comment"># ä¿®æ”¹åï¼š</span>
<span class="hljs-attr">openssl</span> = { version = <span class="hljs-string">"0.10"</span>, features = [<span class="hljs-string">"vendored"</span>] }
</code></pre>
<p>toml</p>
<p><strong>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯</strong> <strong>axum</strong>Â <strong>é…åˆ</strong> <strong>reqwest</strong>Â <strong>æˆ–</strong> <strong>sqlx</strong>Â <strong>(é€šå¸¸æ˜¯è¿™ç§æƒ…å†µ)ï¼š</strong> ä½ éœ€è¦æ£€æŸ¥ Â reqwestÂ  æˆ– Â sqlxÂ  çš„é…ç½®ï¼Œç¡®ä¿å®ƒä»¬å¯ç”¨ Â native-tls-vendoredÂ  æˆ–è€…å¹²è„†åˆ‡æ¢åˆ° Â rustlsÂ ã€‚</p>
<ul>
<li><strong>åœºæ™¯ 1 (Axum + Reqwest)ï¼š</strong></li>
</ul>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># å¼ºåˆ¶è®© reqwest è‡ªå¸¦ openssl æºç </span>
<span class="hljs-attr">reqwest</span> = { version = <span class="hljs-string">"0.11"</span>, features = [<span class="hljs-string">"json"</span>, <span class="hljs-string">"native-tls-vendored"</span>] }
</code></pre>
<p>toml</p>
<ul>
<li><strong>åœºæ™¯ 2 (Axum + Sqlx)ï¼š</strong></li>
</ul>
<pre><code class="hljs language-arduino" lang="arduino">sqlx = { version = <span class="hljs-string">"0.7"</span>, features = [<span class="hljs-string">"runtime-tokio-native-tls"</span>, <span class="hljs-string">"postgres"</span>] } 
# å¦‚æœç¼–è¯‘æŠ¥é”™ï¼Œå°è¯•æ”¹ç”¨ <span class="hljs-built_in">rustls</span> (æ— éœ€ OpenSSLï¼Œæ›´ç®€å•)ï¼š
<span class="hljs-meta"># sqlx = { version = <span class="hljs-string">"0.7"</span>, features = [<span class="hljs-string">"runtime-tokio-rustls"</span>, <span class="hljs-string">"postgres"</span>] }</span>
</code></pre>
<p>toml</p>
<h4 data-id="heading-3">æ–¹æ³• Bï¼šå®Œå…¨æŠ›å¼ƒ OpenSSLï¼Œä½¿ç”¨ Rustls</h4>
<p>è¿™æ˜¯ Rust ç¤¾åŒºæ›´æ¨èçš„åšæ³•ã€‚Â Â Â rustlsÂ  æ˜¯çº¯ Rust å†™çš„åŠ å¯†åº“ï¼Œä¸éœ€è¦ C è¯­è¨€çš„ OpenSSLï¼Œ<strong>å®Œå…¨æ²¡æœ‰äº¤å‰ç¼–è¯‘çš„çƒ¦æ¼</strong>ã€‚</p>
<ul>
<li>åœ¨ Â Â Â Cargo.tomlÂ  ä¸­ï¼ŒæŠŠæ‰€æœ‰æ¶‰åŠ Â Â Â native-tlsÂ  çš„ç‰¹æ€§æ”¹æˆ Â Â Â rustlsÂ ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-4">ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œç¼–è¯‘</h3>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œæ‰“åŒ…å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-css" lang="css">cargo zigbuild <span class="hljs-attr">--target</span> x86_64-unknown-linux-gnu <span class="hljs-attr">--release</span>
</code></pre>
<p>Bash</p>
<ul>
<li>Â Â Â --target x86_64-unknown-linux-gnuÂ ï¼šæŒ‡å®šç›®æ ‡æ˜¯ Linux AMD64ã€‚</li>
</ul>

<ul>
<li>Â Â Â --releaseÂ ï¼šç”Ÿæˆä¼˜åŒ–åçš„ç”Ÿäº§ç¯å¢ƒç‰ˆæœ¬ï¼ˆæ–‡ä»¶æ›´å°ï¼Œé€Ÿåº¦æ›´å¿«ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-5">ç¬¬å››æ­¥ï¼šè·å–ç»“æœä¸éªŒè¯</h3>
<ol>
<li><strong>æ‰¾åˆ°æ–‡ä»¶</strong>ï¼š</li>
</ol>
<p>ç¼–è¯‘æˆåŠŸåï¼Œå¯æ‰§è¡Œæ–‡ä»¶ä½äºï¼š</p>
<p>Â Â Â target/x86_64-unknown-linux-gnu/release/ä½ çš„é¡¹ç›®åÂ </p>
<ol start="2">
<li><strong>éªŒè¯æ–‡ä»¶ç±»å‹</strong>ï¼ˆå¯é€‰ï¼‰ï¼š</li>
</ol>
<p>åœ¨ç»ˆç«¯è¾“å…¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">file target/x86_64-unknown-linux-gnu/release/ä½ çš„é¡¹ç›®å
</code></pre>
<p>Bash</p>
<p>ä½ åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼šÂ Â Â ELF 64-bit LSB pie executable, x86-64, ...Â (åªè¦çœ‹åˆ° <strong>ELF</strong> å’Œ <strong>x86-64</strong>ï¼Œå°±è¯´æ˜ç¼–è¯‘æˆåŠŸäº†)</p>
<hr/>
<h3 data-id="heading-6">ç¬¬äº”æ­¥ï¼šä¸Šä¼ åˆ°æœåŠ¡å™¨å¹¶è¿è¡Œ</h3>
<ol>
<li><strong>ä¸Šä¼ </strong>ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">scp target/x86_64-unknown-linux-gnu/release/ä½ çš„é¡¹ç›®å root@ä½ çš„æœåŠ¡å™¨IP:/root/
</code></pre>
<p>Bash</p>
<ol start="2">
<li><strong>è¿è¡Œ</strong>ï¼š</li>
</ol>
<p>ç™»å½•æœåŠ¡å™¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">chmod</span> +x ./ä½ çš„é¡¹ç›®å  <span class="hljs-comment"># èµ‹äºˆæ‰§è¡Œæƒé™</span>
./ä½ çš„é¡¹ç›®å           <span class="hljs-comment"># è¿è¡Œ</span>
</code></pre>
<p>Bash</p>
<hr/>
<h3 data-id="heading-7">âš¡ï¸ æŸ¥æ¼è¡¥ç¼ºæ€»ç»“</h3>
<ol>
<li><strong>OpenSSL æ˜¯æœ€å¤§çš„å‘</strong>ï¼šä»…ä»…æ·»åŠ  Â Â Â opensslÂ  ä¾èµ–æ˜¯ä¸å¤Ÿçš„ï¼Œå¿…é¡»å¼€å¯ Â Â Â features = ["vendored"]Â ï¼Œå¦åˆ™ç¼–è¯‘æ—¶ä¼šæŠ¥ linker errorã€‚</li>
</ol>

<ol start="2">
<li><strong>glibc ç‰ˆæœ¬é—®é¢˜</strong>ï¼šÂ Â Â cargo-zigbuildÂ  é»˜è®¤ä¼šå…¼å®¹è¾ƒè€çš„ glibc ç‰ˆæœ¬ï¼Œè¿™é€šå¸¸æ²¡é—®é¢˜ã€‚å¦‚æœä½ çš„æœåŠ¡å™¨ç³»ç»Ÿç‰¹åˆ«è€ï¼ˆæ¯”å¦‚ CentOS 7ï¼‰ï¼Œå¯èƒ½éœ€è¦æŒ‡å®š glibc ç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼šÂ Â Â --target x86_64-unknown-linux-gnu.2.17Â ï¼ˆä¸€èˆ¬æƒ…å†µä¸éœ€è¦è¿™æ­¥ï¼‰ã€‚</li>
</ol>

<ol start="3">
<li><strong>Docker æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼šå¦‚æœä¸Šè¿°æ­¥éª¤ä¾ç„¶æŠ¥é”™ï¼ˆé€šå¸¸æ˜¯å› ä¸ºè¿˜æœ‰å…¶ä»– C è¯­è¨€ä¾èµ–åº“ï¼‰ï¼Œæœ€ç®€å•çš„å¤‡é€‰æ–¹æ¡ˆæ˜¯ä½¿ç”¨ Docker åœ¨æœ¬åœ°æ¨¡æ‹Ÿ Linux ç¯å¢ƒç¼–è¯‘ï¼Œä½†å¯¹äºå°ç™½æ¥è¯´ï¼ŒÂ Â Â cargo-zigbuildÂ  æ˜¯é…ç½®æˆæœ¬æœ€ä½çš„ã€‚</li>
</ol>
<p><strong>æŒ‰ç…§ä¸Šè¿°â€œæ¨èæ–¹æ³• Aâ€ä¿®æ”¹ Cargo.tomlï¼Œç„¶åè¿è¡Œå‘½ä»¤ï¼Œ99% çš„æƒ…å†µéƒ½èƒ½æˆåŠŸï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[dict.fromkeys()å’ŒOrderedDictå…·ä½“æ˜¯å¦‚ä½•å®ç°å»é‡çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7578832575503401002</link>    <guid>https://juejin.cn/post/7578832575503401002</guid>    <pubDate>2025-12-02T03:48:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578832575503401002" data-draft-id="7578760249949585462" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="dict.fromkeys()å’ŒOrderedDictå…·ä½“æ˜¯å¦‚ä½•å®ç°å»é‡çš„ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T03:48:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·34584828505"/> <meta itemprop="url" content="https://juejin.cn/user/3710177917545754"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            dict.fromkeys()å’ŒOrderedDictå…·ä½“æ˜¯å¦‚ä½•å®ç°å»é‡çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3710177917545754/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·34584828505
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:48:41.000Z" title="Tue Dec 02 2025 03:48:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Python ä¸­ï¼Œ<code>dict.fromkeys()</code>Â å’ŒÂ <code>OrderedDict.fromkeys()</code>Â çš„å»é‡é€»è¾‘<strong>æ ¸å¿ƒä¾èµ– â€œå­—å…¸çš„é”®ï¼ˆkeyï¼‰å¿…é¡»å”¯ä¸€â€ è¿™ä¸€ç‰¹æ€§</strong>ï¼Œæœ¬è´¨æ˜¯ â€œç”¨é”®çš„å”¯ä¸€æ€§è¿‡æ»¤é‡å¤å…ƒç´ â€ï¼Œä»…åœ¨ â€œæ˜¯å¦ä¿ç•™æ’å…¥é¡ºåºâ€ ä¸Šæœ‰å·®å¼‚ï¼ˆPython 3.7+ åå·®å¼‚å·²æå°ï¼‰ã€‚ä»¥ä¸‹ä»ã€ŒåŸç†æ‹†è§£ã€åº•å±‚å®ç°ã€å»é‡æ­¥éª¤ã€ä¸‰æ–¹é¢è¯¦ç»†è¯´æ˜ï¼š</p>
<h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒå‰æï¼šå­—å…¸çš„é”®ï¼ˆkeyï¼‰ç‰¹æ€§</h2>
<p>æ— è®ºæ˜¯æ™®é€šÂ <code>dict</code>Â è¿˜æ˜¯Â <code>OrderedDict</code>ï¼Œéƒ½éµå¾ªä¸¤ä¸ªå…³é”®è§„åˆ™ï¼š</p>
<ol>
<li>
<p><strong>é”®çš„å”¯ä¸€æ€§</strong>ï¼šå­—å…¸ä¸­ä¸èƒ½å­˜åœ¨é‡å¤çš„ keyï¼Œè‹¥é‡å¤èµ‹å€¼ï¼ˆå¦‚Â <code>d = {1: None, 1: None}</code>ï¼‰ï¼Œåå®šä¹‰çš„ key ä¼šè¦†ç›–å‰ä¸€ä¸ªï¼ˆæœ€ç»ˆä»…ä¿ç•™ 1 ä¸ªï¼‰ï¼›</p>
</li>
<li>
<p><strong>æ’å…¥é¡ºåºä¿ç•™</strong>ï¼ˆPython 3.7+ï¼‰ï¼š</p>
<ul>
<li>æ™®é€šÂ <code>dict</code>Â ä» Python 3.7 å¼€å§‹ï¼Œå®˜æ–¹ä¿è¯<strong>ä¿ç•™é”®çš„æ’å…¥é¡ºåº</strong>ï¼ˆåº•å±‚å®ç°ä¼˜åŒ–ï¼‰ï¼›</li>
<li><code>OrderedDict</code>Â æ˜¯ Python 2.7+ å°±å­˜åœ¨çš„æœ‰åºå­—å…¸ï¼Œä¸“é—¨è®¾è®¡ç”¨äº â€œä¸¥æ ¼ä¿ç•™æ’å…¥é¡ºåºâ€ï¼ˆPython 3.7+ åä¸æ™®é€šÂ <code>dict</code>Â çš„é¡ºåºç‰¹æ€§ä¸€è‡´ï¼Œä½†ä»æœ‰é¢å¤–åŠŸèƒ½å¦‚Â <code>move_to_end()</code>ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<p>è¿™ä¸¤ä¸ªè§„åˆ™æ˜¯ â€œå»é‡å¹¶ä¿ç•™é¡ºåºâ€ çš„æ ¸å¿ƒåŸºç¡€ã€‚</p>
<h2 data-id="heading-1">äºŒã€<code>dict.fromkeys()</code>Â çš„å»é‡åŸç†ä¸å®ç°</h2>
<h3 data-id="heading-2">1. å‡½æ•°åŠŸèƒ½ä¸è¯­æ³•</h3>
<p><code>dict.fromkeys(iterable, value=None)</code>Â æ˜¯å­—å…¸çš„ç±»æ–¹æ³•ï¼Œä½œç”¨æ˜¯ï¼š</p>
<ul>
<li>æ¥æ”¶ä¸€ä¸ª<strong>å¯è¿­ä»£å¯¹è±¡</strong>ï¼ˆå¦‚åˆ—è¡¨ã€å…ƒç»„ï¼‰ï¼Œå°†å…¶æ¯ä¸ªå…ƒç´ ä½œä¸ºå­—å…¸çš„Â <code>key</code>ï¼›</li>
<li>æ‰€æœ‰ key å¯¹åº”çš„Â <code>value</code>Â é»˜è®¤ä¸ºÂ <code>None</code>ï¼ˆå¯é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šç»Ÿä¸€å€¼ï¼‰ï¼›</li>
<li>è¿”å›ä¸€ä¸ªæ–°å­—å…¸ã€‚</li>
</ul>
<p>è¯­æ³•ç¤ºä¾‹ï¼š</p>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">lst</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>, <span class="hljs-number">3</span>]
<span class="hljs-attr">d</span> = dict.fromkeys(lst)
print(d)  <span class="hljs-comment"># è¾“å‡ºï¼š{1: None, 2: None, 3: None}ï¼ˆå»é‡ä¸”ä¿ç•™æ’å…¥é¡ºåºï¼‰</span>
</code></pre>
<h3 data-id="heading-3">2. å»é‡çš„åº•å±‚å®ç°æ­¥éª¤</h3>
<p><code>dict.fromkeys()</code>Â æœ¬è´¨æ˜¯ â€œéå†å¯è¿­ä»£å¯¹è±¡ï¼Œé€ä¸ªå¾€å­—å…¸ä¸­æ·»åŠ  keyâ€ï¼Œå»é‡é€»è¾‘éšå«åœ¨éå†è¿‡ç¨‹ä¸­ï¼Œå…·ä½“æ­¥éª¤ï¼š</p>
<ol>
<li>
<p><strong>åˆå§‹åŒ–ç©ºå­—å…¸</strong>ï¼šåˆ›å»ºä¸€ä¸ªç©ºçš„å“ˆå¸Œè¡¨ï¼ˆå­—å…¸åº•å±‚æ•°æ®ç»“æ„ï¼‰ï¼Œç”¨äºå­˜å‚¨ key-value å¯¹ï¼›</p>
</li>
<li>
<p><strong>éå†å¯è¿­ä»£å¯¹è±¡</strong>ï¼šæŒ‰é¡ºåºå–å‡ºÂ <code>iterable</code>Â ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼ˆå¦‚åˆ—è¡¨Â <code>[1,2,2,3]</code>Â ä¾æ¬¡å– 1ã€2ã€2ã€3ï¼‰ï¼›</p>
</li>
<li>
<p><strong>åˆ¤æ–­ key æ˜¯å¦å·²å­˜åœ¨</strong>ï¼š</p>
<ul>
<li>å¯¹æ¯ä¸ªå…ƒç´ ï¼Œè®¡ç®—å…¶å“ˆå¸Œå€¼ï¼ˆ<code>hash(key)</code>ï¼‰ï¼Œé€šè¿‡å“ˆå¸Œè¡¨å¿«é€ŸæŸ¥æ‰¾æ˜¯å¦å·²å­˜åœ¨è¯¥ keyï¼ˆæŸ¥æ‰¾æ•ˆç‡ O (1)ï¼‰ï¼›</li>
<li>è‹¥ key ä¸å­˜åœ¨ï¼šå°†å…¶æ’å…¥å­—å…¸ï¼ˆä¿ç•™å½“å‰é¡ºåºï¼‰ï¼Œvalue è®¾ä¸ºé»˜è®¤å€¼Â <code>None</code>ï¼›</li>
<li>è‹¥ key å·²å­˜åœ¨ï¼š<strong>ç›´æ¥è·³è¿‡ï¼Œä¸é‡å¤æ’å…¥</strong>ï¼ˆè¿™å°±æ˜¯å»é‡çš„æ ¸å¿ƒï¼‰ï¼›</li>
</ul>
</li>
<li>
<p><strong>è¿”å›å­—å…¸</strong>ï¼šéå†ç»“æŸåï¼Œå­—å…¸ä¸­çš„ key å°±æ˜¯ â€œå»é‡åä¸”ä¿ç•™åŸæ’å…¥é¡ºåºâ€ çš„ç»“æœã€‚</p>
</li>
</ol>
<h3 data-id="heading-4">3. å»é‡ç¤ºä¾‹æ‹†è§£ï¼ˆå¯¹åº”æ–¹å¼ 1 çš„ä»£ç ï¼‰</h3>
<p>æ–¹å¼ 1 ä¸­Â <code>filtered = [1,4,6,7,7]</code>ï¼ˆç­›é€‰åæœªå»é‡çš„åˆ—è¡¨ï¼‰ï¼Œæ‰§è¡ŒÂ <code>dict.fromkeys(filtered)</code>ï¼š</p>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">filtered</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">7</span>]
<span class="hljs-attr">d</span> = dict.fromkeys(filtered)
</code></pre>
<ul>
<li>éå†ç¬¬ 1 ä¸ªå…ƒç´ Â <code>1</code>ï¼šå“ˆå¸Œè¡¨ä¸­æ— Â <code>1</code>ï¼Œæ’å…¥ â†’ å­—å…¸ï¼š<code>{1: None}</code>ï¼›</li>
<li>éå†ç¬¬ 2 ä¸ªå…ƒç´ Â <code>4</code>ï¼šå“ˆå¸Œè¡¨ä¸­æ— Â <code>4</code>ï¼Œæ’å…¥ â†’ å­—å…¸ï¼š<code>{1: None, 4: None}</code>ï¼›</li>
<li>éå†ç¬¬ 3 ä¸ªå…ƒç´ Â <code>6</code>ï¼šå“ˆå¸Œè¡¨ä¸­æ— Â <code>6</code>ï¼Œæ’å…¥ â†’ å­—å…¸ï¼š<code>{1: None, 4: None, 6: None}</code>ï¼›</li>
<li>éå†ç¬¬ 4 ä¸ªå…ƒç´ Â <code>7</code>ï¼šå“ˆå¸Œè¡¨ä¸­æ— Â <code>7</code>ï¼Œæ’å…¥ â†’ å­—å…¸ï¼š<code>{1: None, 4: None, 6: None, 7: None}</code>ï¼›</li>
<li>éå†ç¬¬ 5 ä¸ªå…ƒç´ Â <code>7</code>ï¼šå“ˆå¸Œè¡¨ä¸­å·²å­˜åœ¨Â <code>7</code>ï¼Œè·³è¿‡ â†’ å­—å…¸æ— å˜åŒ–ï¼›</li>
<li>æœ€ç»ˆå­—å…¸çš„ key ä¸ºÂ <code>[1,4,6,7]</code>ï¼Œè½¬åˆ—è¡¨åå°±æ˜¯å»é‡ç»“æœã€‚</li>
</ul>
<h3 data-id="heading-5">4. å…³é”®ç‰¹ç‚¹</h3>
<ul>
<li>å»é‡é€»è¾‘ï¼šä¾èµ– â€œkey å”¯ä¸€â€ï¼Œé‡å¤å…ƒç´ ç›´æ¥è·³è¿‡ï¼Œæ— æ˜¾å¼æ¯”è¾ƒï¼ˆæ•ˆç‡é«˜ï¼‰ï¼›</li>
<li>é¡ºåºä¿ç•™ï¼šPython 3.7+ ä¿è¯æ’å…¥é¡ºåºï¼Œä¸åŸåˆ—è¡¨é¡ºåºä¸€è‡´ï¼›</li>
<li>æ•ˆç‡ï¼šéå† + å“ˆå¸ŒæŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦ O (m)ï¼ˆm ä¸ºÂ <code>filtered</code>Â åˆ—è¡¨é•¿åº¦ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-6">ä¸‰ã€<code>OrderedDict.fromkeys()</code>Â çš„å»é‡åŸç†ä¸å®ç°</h2>
<h3 data-id="heading-7">1. ä¸æ™®é€šÂ <code>dict.fromkeys()</code>Â çš„åŒºåˆ«</h3>
<p><code>OrderedDict</code>Â æ˜¯Â <code>collections</code>Â æ¨¡å—ä¸­çš„æœ‰åºå­—å…¸ï¼Œå…¶Â <code>fromkeys()</code>Â æ–¹æ³•<strong>åŠŸèƒ½ã€è¯­æ³•ã€å»é‡é€»è¾‘ä¸æ™®é€šÂ <code>dict.fromkeys()</code>Â å®Œå…¨ä¸€è‡´</strong>ï¼Œå”¯ä¸€å·®å¼‚æ˜¯ï¼š</p>
<ul>
<li><strong>é¡ºåºä¿è¯çš„å…¼å®¹æ€§</strong>ï¼šPython 3.7 ä¹‹å‰ï¼Œæ™®é€šÂ <code>dict</code>Â ä¸ä¿è¯æ’å…¥é¡ºåºï¼Œè€ŒÂ <code>OrderedDict</code>Â ä»è¯ç”Ÿèµ·å°±ä¸¥æ ¼ä¿ç•™æ’å…¥é¡ºåºï¼›</li>
<li><strong>é¢å¤–åŠŸèƒ½</strong>ï¼š<code>OrderedDict</code>Â æä¾›Â <code>move_to_end()</code>ã€<code>popitem(last=True/False)</code>Â ç­‰é¡ºåºç›¸å…³æ–¹æ³•ï¼ˆå»é‡åœºæ™¯ç”¨ä¸åˆ°ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-8">2. å»é‡å®ç°æ­¥éª¤</h3>
<p>ä¸æ™®é€šÂ <code>dict.fromkeys()</code>Â å®Œå…¨ç›¸åŒï¼Œä»…åº•å±‚å­˜å‚¨ç»“æ„ç•¥æœ‰å·®å¼‚ï¼ˆ<code>OrderedDict</code>Â å†…éƒ¨ç”¨ â€œåŒå‘é“¾è¡¨â€ è®°å½•æ’å…¥é¡ºåºï¼Œè€Œ Python 3.7+ æ™®é€šÂ <code>dict</code>Â ç”¨ â€œæ’å…¥é¡ºåºæ•°ç»„â€ è®°å½•ï¼‰ï¼Œä½†å¯¹ç”¨æˆ·è€Œè¨€ï¼Œå»é‡æ•ˆæœä¸€è‡´ï¼š</p>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-scss" lang="scss">from collections import OrderedDict

filtered = <span class="hljs-selector-attr">[1,4,6,7,7]</span>
od = OrderedDict<span class="hljs-selector-class">.fromkeys</span>(filtered)
<span class="hljs-built_in">print</span>(od)  # è¾“å‡ºï¼š<span class="hljs-built_in">OrderedDict</span>([(<span class="hljs-number">1</span>, None), (<span class="hljs-number">4</span>, None), (<span class="hljs-number">6</span>, None), (<span class="hljs-number">7</span>, None)])
<span class="hljs-built_in">print</span>(list(od.keys()))  # è¾“å‡ºï¼š<span class="hljs-selector-attr">[1,4,6,7]</span>ï¼ˆå»é‡ä¸”ä¿ç•™é¡ºåºï¼‰
</code></pre>
<h3 data-id="heading-9">3. é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>Python 3.6 åŠä»¥ä¸‹ç‰ˆæœ¬ï¼šéœ€ â€œå»é‡ + ä¿ç•™é¡ºåºâ€ æ—¶ï¼Œå¿…é¡»ç”¨Â <code>OrderedDict.fromkeys()</code>ï¼ˆæ™®é€šÂ <code>dict</code>Â æ— åºï¼‰ï¼›</li>
<li>Python 3.7 åŠä»¥ä¸Šç‰ˆæœ¬ï¼šæ™®é€šÂ <code>dict.fromkeys()</code>Â å·²èƒ½æ»¡è¶³ â€œå»é‡ + ä¿ç•™é¡ºåºâ€ï¼Œæ— éœ€å†ç”¨Â <code>OrderedDict</code>ï¼ˆé™¤ééœ€è¦å…¶é¢å¤–çš„é¡ºåºæ“ä½œæ–¹æ³•ï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-10">å››ã€ä¸¤è€…å¯¹æ¯”ä¸æ€»ç»“</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th><code>dict.fromkeys()</code></th><th><code>OrderedDict.fromkeys()</code></th></tr></thead><tbody><tr><td>å»é‡åŸç†</td><td>ä¾èµ– key å”¯ä¸€æ€§ï¼Œé‡å¤ key è·³è¿‡</td><td>ä¾èµ– key å”¯ä¸€æ€§ï¼Œé‡å¤ key è·³è¿‡</td></tr><tr><td>é¡ºåºä¿ç•™ï¼ˆPython 3.7+ï¼‰</td><td>æ˜¯</td><td>æ˜¯</td></tr><tr><td>é¡ºåºä¿ç•™ï¼ˆPython &lt;3.7ï¼‰</td><td>å¦</td><td>æ˜¯</td></tr><tr><td>åº•å±‚æ•ˆç‡</td><td>ç•¥é«˜ï¼ˆç»“æ„æ›´ç®€å•ï¼‰</td><td>ç•¥ä½ï¼ˆåŒå‘é“¾è¡¨é¢å¤–å¼€é”€ï¼‰</td></tr><tr><td>ä¾èµ–</td><td>æ— ï¼ˆå†…ç½® dictï¼‰</td><td>éœ€å¯¼å…¥Â <code>collections.OrderedDict</code></td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>Python 3.7+ æ—¥å¸¸å»é‡ + ä¿åº</td><td>Python &lt;3.7 æˆ–éœ€é¢å¤–é¡ºåºæ“ä½œçš„åœºæ™¯</td></tr></tbody></table>
<h2 data-id="heading-11">äº”ã€å…³é”®è¡¥å……ï¼šä¸ºä»€ä¹ˆä¸ç”¨Â <code>set</code>Â å»é‡ï¼Ÿ</h2>
<p>å¯èƒ½æœ‰ç–‘é—®ï¼šâ€œæ—¢ç„¶Â <code>set</code>Â ä¹Ÿèƒ½å»é‡ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ç”¨Â <code>dict.fromkeys()</code>ï¼Ÿâ€â€”â€” æ ¸å¿ƒå·®å¼‚æ˜¯ã€Œæ˜¯å¦ä¿ç•™é¡ºåºã€ï¼š</p>
<ul>
<li><code>set</code>Â æ˜¯æ— åºç»“æ„ï¼Œå»é‡åä¼šæ‰“ä¹±åŸåˆ—è¡¨é¡ºåºï¼ˆå¦‚Â <code>list(set([1,4,6,7,7]))</code>Â å¯èƒ½è¾“å‡ºÂ <code>[1,6,4,7]</code>ï¼‰ï¼›</li>
<li><code>dict.fromkeys()</code>Â å’ŒÂ <code>OrderedDict.fromkeys()</code>Â å»é‡å<strong>ä¸¥æ ¼ä¿ç•™åŸåˆ—è¡¨çš„æ’å…¥é¡ºåº</strong>ï¼ˆè¿™æ˜¯æ–¹å¼ 1 çš„æ ¸å¿ƒéœ€æ±‚ï¼‰ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<p>python</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">filtered</span> = <span class="hljs-selector-attr">[4,1,6,7,7]</span>  # åŸé¡ºåºæ˜¯ <span class="hljs-number">4</span>â†’<span class="hljs-number">1</span>â†’<span class="hljs-number">6</span>â†’<span class="hljs-number">7</span>
<span class="hljs-selector-tag">print</span>(<span class="hljs-built_in">list</span>(<span class="hljs-built_in">set</span>(filtered)))  # è¾“å‡ºï¼š<span class="hljs-selector-attr">[1,4,6,7]</span>ï¼ˆé¡ºåºæ‰“ä¹±ï¼‰
<span class="hljs-selector-tag">print</span>(<span class="hljs-built_in">list</span>(dict.<span class="hljs-built_in">fromkeys</span>(filtered).<span class="hljs-built_in">keys</span>()))  # è¾“å‡ºï¼š<span class="hljs-selector-attr">[4,1,6,7]</span>ï¼ˆé¡ºåºä¿ç•™ï¼‰
</code></pre>
<h2 data-id="heading-12">æœ€ç»ˆæ€»ç»“</h2>
<p><code>dict.fromkeys()</code>Â å’ŒÂ <code>OrderedDict.fromkeys()</code>Â çš„å»é‡é€»è¾‘æœ¬è´¨æ˜¯ï¼š</p>
<ol>
<li>åˆ©ç”¨ â€œå­—å…¸ key ä¸å¯é‡å¤â€ çš„ç‰¹æ€§ï¼Œéå†å…ƒç´ æ—¶è·³è¿‡å·²å­˜åœ¨çš„ keyï¼›</li>
<li>ä¿ç•™å…ƒç´ çš„ â€œé¦–æ¬¡æ’å…¥é¡ºåºâ€ï¼ˆPython 3.7+ æ™®é€š dict ä¹Ÿæ”¯æŒï¼‰ï¼›</li>
<li>å»é‡æ•ˆç‡é«˜ï¼ˆO (m)ï¼‰ï¼Œä¸”èƒ½å…¼é¡¾é¡ºåºï¼Œæ˜¯ â€œå»é‡ + ä¿åºâ€ çš„æœ€ä¼˜æ–¹æ¡ˆä¹‹ä¸€ã€‚</li>
</ol>
<p>æ–¹å¼ 1 ä¸­ç”¨Â <code>dict.fromkeys()</code>ï¼Œæ­£æ˜¯å› ä¸ºå®ƒèƒ½é«˜æ•ˆå®Œæˆ â€œç­›é€‰ååˆ—è¡¨çš„å»é‡ + ä¿åºâ€ï¼Œä¸”è¯­æ³•ç®€æ´ã€æ— éœ€é¢å¤–ä¾èµ–</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Cloudå®æˆ˜æ€»ç»“ï¼š90%å¼€å‘è€…è¸©è¿‡çš„å‘ï¼Œè¿™ç¯‡ä¸€æ¬¡æ€§å¸®ä½ å¡«å¹³ï¼]]></title>    <link>https://juejin.cn/post/7578797337868156962</link>    <guid>https://juejin.cn/post/7578797337868156962</guid>    <pubDate>2025-12-02T05:25:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578797337868156962" data-draft-id="7578777952727433250" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Cloudå®æˆ˜æ€»ç»“ï¼š90%å¼€å‘è€…è¸©è¿‡çš„å‘ï¼Œè¿™ç¯‡ä¸€æ¬¡æ€§å¸®ä½ å¡«å¹³ï¼"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-12-02T05:25:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜è¥¿è¥¿"/> <meta itemprop="url" content="https://juejin.cn/user/326976944214804"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Cloudå®æˆ˜æ€»ç»“ï¼š90%å¼€å‘è€…è¸©è¿‡çš„å‘ï¼Œè¿™ç¯‡ä¸€æ¬¡æ€§å¸®ä½ å¡«å¹³ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/326976944214804/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜è¥¿è¥¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T05:25:35.000Z" title="Tue Dec 02 2025 05:25:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä½ æœ‰æ²¡æœ‰è¿‡è¿™æ ·çš„ç»å†ï¼Ÿæ˜æ˜è·Ÿç€æ•™ç¨‹æ­å»º Spring Cloud é¡¹ç›®ï¼Œå´å¡åœ¨æ³¨å†Œä¸­å¿ƒé›†ç¾¤éƒ¨ç½²ï¼›å¥½ä¸å®¹æ˜“ä¸Šçº¿ï¼Œçªç„¶é­é‡æœåŠ¡ç†”æ–­å¤±æ•ˆå¯¼è‡´çš„é›ªå´©ï¼›æƒ³ä¼˜åŒ–é…ç½®ä¸­å¿ƒï¼Œå´å¯¹ç€ä¸€å † yaml æ–‡ä»¶æ— ä»ä¸‹æ‰‹ï¼Ÿ</p>
<p>ä½œä¸ºå¸¸å¹´è·Ÿå¾®æœåŠ¡æ‰“äº¤é“çš„å¼€å‘ï¼Œæˆ‘å¤ªæ‡‚è¿™ç§ç—›äº†ï¼Spring Cloud ä½œä¸ºå¾®æœåŠ¡æ¶æ„çš„ â€œæ‰›æŠŠå­â€ï¼Œç»„ä»¶å¤šã€é…ç½®æ‚ã€ç‰ˆæœ¬å…¼å®¹é—®é¢˜çªå‡ºï¼Œå“ªæ€•æ˜¯æœ‰ç»éªŒçš„å¼€å‘è€…ï¼Œä¹Ÿéš¾å…åœ¨å®æˆ˜ä¸­è¸©å‘ã€‚æœ€è¿‘åå°æ”¶åˆ°å¥½å¤šç²‰ä¸ç§ä¿¡ï¼Œè¯´æƒ³è¦ä¸€ä»½ â€œä¸ç»•å¼¯ã€èƒ½ç›´æ¥ç”¨â€ çš„ Spring Cloud æ€»ç»“ â€”â€” ä»Šå¤©è¿™ç¯‡ï¼Œå°±ä¸“é—¨è§£å†³ä½ çš„ç—›ç‚¹ï¼</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆ Spring Cloud æˆä¸ºå¾®æœåŠ¡æ ‡é…ï¼Œå´è®©äººåˆçˆ±åˆæ¨ï¼Ÿ</h2>
<p>å…ˆè·Ÿå¤§å®¶èŠèŠï¼Œä¸ºå•¥å’±ä»¬å¼€å‘åœˆç¦»ä¸å¼€ Spring Cloudï¼Ÿéšç€ä¸šåŠ¡å¤æ‚åº¦æå‡ï¼Œå•ä½“æ¶æ„çš„ç“¶é¢ˆè¶Šæ¥è¶Šæ˜æ˜¾ï¼šä»£ç è‡ƒè‚¿ã€éƒ¨ç½²å›°éš¾ã€æ‰©å®¹å—é™ï¼Œè€Œå¾®æœåŠ¡æ¶æ„é€šè¿‡ â€œæ‹†åˆ†æœåŠ¡ã€ç‹¬ç«‹éƒ¨ç½²ã€å¼¹æ€§ä¼¸ç¼©â€ï¼Œå®Œç¾è§£å†³äº†è¿™äº›é—®é¢˜ã€‚</p>
<p>è€Œ Spring Cloud ä½œä¸º Spring ç”Ÿæ€çš„æ ¸å¿ƒç»„ä»¶ï¼Œå‡­å€Ÿ â€œå¼€ç®±å³ç”¨ã€ç»„ä»¶ä¸°å¯Œã€ä¸ Spring Boot æ— ç¼é›†æˆâ€ çš„ä¼˜åŠ¿ï¼Œæˆä¸º 80% äº’è”ç½‘å…¬å¸çš„å¾®æœåŠ¡é¦–é€‰æ¡†æ¶ã€‚å®ƒæ¶µç›–äº†æœåŠ¡æ³¨å†Œå‘ç°ï¼ˆEureka/Nacosï¼‰ã€é…ç½®ä¸­å¿ƒï¼ˆConfig/Nacos Configï¼‰ã€æœåŠ¡ç†”æ–­é™çº§ï¼ˆHystrix/Sentinelï¼‰ã€ç½‘å…³ï¼ˆGatewayï¼‰ç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œç›¸å½“äºç»™å¾®æœåŠ¡æ¶æ„æ­å¥½äº† â€œéª¨æ¶â€ã€‚</p>
<p>ä½†ç—›ç‚¹ä¹Ÿå¾ˆçªå‡ºï¼šä¸€æ˜¯ç»„ä»¶ç‰ˆæœ¬å…¼å®¹æ€§å¤æ‚ï¼ˆæ¯”å¦‚ Spring Cloud ä¸ Spring Boot ç‰ˆæœ¬å¿…é¡»åŒ¹é…ï¼Œé€‰é”™å°±æŠ¥é”™ï¼‰ï¼›äºŒæ˜¯éƒ¨åˆ†ç»„ä»¶æ–‡æ¡£é›¶æ•£ï¼Œå®æˆ˜ç»†èŠ‚ç¼ºå¤±ï¼›ä¸‰æ˜¯ä¸åŒåœºæ™¯ä¸‹çš„é€‰å‹å›°æƒ‘ï¼ˆæ¯”å¦‚æ³¨å†Œä¸­å¿ƒé€‰ Eureka è¿˜æ˜¯ Nacosï¼Ÿç†”æ–­ç”¨ Hystrix è¿˜æ˜¯ Sentinelï¼Ÿï¼‰ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤šå¼€å‘è€…è§‰å¾— Spring Cloud â€œéš¾ç”¨â€ çš„æ ¸å¿ƒåŸå› ã€‚</p>
<h2 data-id="heading-2">Spring Cloud æ ¸å¿ƒç»„ä»¶å®æˆ˜æ€»ç»“ï¼Œç›´æ¥æŠ„ä½œä¸šï¼</h2>
<p>ä¸‹é¢æˆ‘æŠŠå®æˆ˜ä¸­æœ€å¸¸ç”¨çš„ 5 ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œä» â€œé€‰å‹å»ºè®® + é…ç½®è¦ç‚¹ + é¿å‘æŠ€å·§â€ ä¸‰ä¸ªç»´åº¦ï¼Œç»™å¤§å®¶åšä¸€ä»½è¶…è¯¦ç»†æ€»ç»“ï¼Œéƒ½æ˜¯èƒ½ç›´æ¥è½åœ°çš„å¹²è´§ï¼š</p>
<h2 data-id="heading-3">1. æœåŠ¡æ³¨å†Œå‘ç°ï¼šNacosï¼ˆé¦–é€‰ï¼‰vs Eurekaï¼ˆé€æ­¥æ·˜æ±°ï¼‰</h2>
<ul>
<li><strong>é€‰å‹å»ºè®®</strong>ï¼šæ–°é¡¹ç›®ç›´æ¥é€‰ Nacosï¼æ”¯æŒæœåŠ¡æ³¨å†Œå‘ç° + é…ç½®ä¸­å¿ƒäºŒåˆä¸€ï¼Œé›†ç¾¤éƒ¨ç½²ç®€å•ï¼Œè¿˜èƒ½å…¼å®¹ Eureka å®¢æˆ·ç«¯ï¼Œè€é¡¹ç›®è¿ç§»æˆæœ¬ä½ï¼›Eureka å·²åœæ­¢æ›´æ–°ï¼Œä»…å»ºè®®ç»´æŠ¤è€é¡¹ç›®æ—¶ä½¿ç”¨ã€‚</li>
<li><strong>æ ¸å¿ƒé…ç½®è¦ç‚¹</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Nacoså®¢æˆ·ç«¯é…ç½®ï¼ˆapplication.ymlï¼‰</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">nacos:</span>
      <span class="hljs-attr">discovery:</span>
        <span class="hljs-attr">server-addr:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span><span class="hljs-string">:8848</span> <span class="hljs-comment"># Nacosé›†ç¾¤åœ°å€ï¼Œç”¨é€—å·åˆ†éš”</span>
        <span class="hljs-attr">namespace:</span> <span class="hljs-string">dev</span> <span class="hljs-comment"># ç¯å¢ƒéš”ç¦»ï¼Œé¿å…ä¸åŒç¯å¢ƒæœåŠ¡äº’ç›¸è°ƒç”¨</span>
        <span class="hljs-attr">group:</span> <span class="hljs-string">DEFAULT_GROUP</span> <span class="hljs-comment"># æœåŠ¡åˆ†ç»„ï¼ŒæŒ‰ä¸šåŠ¡æ¨¡å—åˆ’åˆ†</span>
</code></pre>
<p><strong>é¿å‘æŠ€å·§</strong>ï¼šé›†ç¾¤éƒ¨ç½²æ—¶å¿…é¡»é…ç½® â€œnamespaceâ€ éš”ç¦»ç¯å¢ƒï¼Œå¦åˆ™æµ‹è¯•ç¯å¢ƒæœåŠ¡å¯èƒ½è°ƒç”¨åˆ°ç”Ÿäº§ç¯å¢ƒï¼›Nacos é»˜è®¤å¿ƒè·³æ—¶é—´ 5 ç§’ï¼ŒæœåŠ¡å¼‚å¸¸æ—¶æœ€å¿« 15 ç§’å‰”é™¤ï¼Œé«˜å¯ç”¨åœºæ™¯å¯è°ƒæ•´ä¸º 2 ç§’å¿ƒè·³ã€6 ç§’å‰”é™¤ã€‚</p>
<h2 data-id="heading-4">2. é…ç½®ä¸­å¿ƒï¼šNacos Configï¼ˆæ›¿ä»£ Spring Cloud Configï¼‰</h2>
<ul>
<li><strong>é€‰å‹å»ºè®®</strong>ï¼šæ”¾å¼ƒ Spring Cloud Config+Git çš„å¤æ‚ç»„åˆï¼Nacos Config æ”¯æŒåŠ¨æ€åˆ·æ–°é…ç½®ã€ç°åº¦å‘å¸ƒã€é…ç½®åŠ å¯†ï¼Œæ“ä½œæ›´ç®€å•ï¼Œè¿˜èƒ½å‡å°‘ä¾èµ–ç»„ä»¶ã€‚</li>
<li><strong>æ ¸å¿ƒé…ç½®è¦ç‚¹</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment">#  bootstrap.ymlï¼ˆä¼˜å…ˆäºapplication.ymlåŠ è½½ï¼‰</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">nacos:</span>
      <span class="hljs-attr">config:</span>
        <span class="hljs-attr">server-addr:</span> <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.100</span><span class="hljs-string">:8848</span>
        <span class="hljs-attr">file-extension:</span> <span class="hljs-string">yaml</span> <span class="hljs-comment"># é…ç½®æ–‡ä»¶æ ¼å¼ï¼ˆyaml/json/propertiesï¼‰</span>
        <span class="hljs-attr">shared-configs:</span> <span class="hljs-comment"># å…±äº«é…ç½®ï¼ˆæ¯”å¦‚æ•°æ®åº“è¿æ¥ã€æ—¥å¿—é…ç½®ï¼‰</span>
          <span class="hljs-bullet">-</span> <span class="hljs-attr">data-id:</span> <span class="hljs-string">common-config.yaml</span>
            <span class="hljs-attr">group:</span> <span class="hljs-string">DEFAULT_GROUP</span>
            <span class="hljs-attr">refresh:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># æ”¯æŒåŠ¨æ€åˆ·æ–°</span>
</code></pre>
<p><strong>é¿å‘æŠ€å·§</strong>ï¼šé…ç½®æ–‡ä»¶å¿…é¡»æ”¾åœ¨ â€œbootstrap.ymlâ€ ä¸­ï¼Œå¦åˆ™æ— æ³•ä¼˜å…ˆåŠ è½½ï¼›åŠ¨æ€åˆ·æ–°é…ç½®æ—¶ï¼Œéœ€è¦åœ¨ç±»ä¸Šæ·»åŠ @RefreshScopeæ³¨è§£ï¼Œå¦åˆ™é…ç½®æ›´æ–°åä¸ä¼šç”Ÿæ•ˆã€‚</p>
<h2 data-id="heading-5">3. æœåŠ¡ç†”æ–­é™çº§ï¼šSentinelï¼ˆæ›¿ä»£ Hystrixï¼‰</h2>
<ul>
<li><strong>é€‰å‹å»ºè®®</strong>ï¼šHystrix å·²åœæ­¢æ›´æ–°ï¼ŒSentinel åŠŸèƒ½æ›´å¼ºå¤§ï¼ˆæ”¯æŒæµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ã€ç³»ç»Ÿä¿æŠ¤ï¼‰ï¼Œè¿˜æä¾›å¯è§†åŒ–æ§åˆ¶å°ï¼Œä¸Šæ‰‹æˆæœ¬ä½ï¼Œå¼ºçƒˆæ¨èï¼</li>
<li><strong>æ ¸å¿ƒé…ç½®è¦ç‚¹</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç†”æ–­é™çº§é…ç½®ï¼ˆæ³¨è§£æ–¹å¼ï¼‰</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderService</span> {
    <span class="hljs-comment">// é™æµé…ç½®ï¼šQPSé˜ˆå€¼10ï¼Œè¶…å‡ºåˆ™è§¦å‘é™çº§</span>
    <span class="hljs-meta">@SentinelResource</span>(value = <span class="hljs-string">"createOrder"</span>, blockHandler = <span class="hljs-string">"blockHandler"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">createOrder</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"è®¢å•åˆ›å»ºæˆåŠŸ"</span>;
    }
    <span class="hljs-comment">// é™çº§å¤„ç†æ–¹æ³•ï¼ˆå‚æ•°å’Œè¿”å›å€¼éœ€ä¸åŸæ–¹æ³•ä¸€è‡´ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">blockHandler</span>(<span class="hljs-params">BlockException e</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"å½“å‰è¯·æ±‚è¿‡å¤šï¼Œè¯·ç¨åé‡è¯•"</span>;
    }
}
</code></pre>
<p><strong>é¿å‘æŠ€å·§</strong>ï¼šSentinel æ§åˆ¶å°é»˜è®¤ä¸æŒä¹…åŒ–è§„åˆ™ï¼Œç”Ÿäº§ç¯å¢ƒéœ€é…ç½® â€œè§„åˆ™æŒä¹…åŒ–åˆ° Nacosâ€ï¼Œå¦åˆ™é‡å¯åè§„åˆ™ä¸¢å¤±ï¼›ç†”æ–­é™çº§çš„ â€œæ¢å¤æ—¶é—´çª—å£â€ å»ºè®®è®¾ç½®ä¸º 5 ç§’ï¼Œé¿å…é¢‘ç¹åˆ‡æ¢å½±å“æœåŠ¡ç¨³å®šæ€§ã€‚</p>
<h2 data-id="heading-6">4. æœåŠ¡ç½‘å…³ï¼šSpring Cloud Gatewayï¼ˆæ›¿ä»£ Zuulï¼‰</h2>
<ul>
<li><strong>é€‰å‹å»ºè®®</strong>ï¼šZuul åŸºäº Servlet é˜»å¡ IOï¼Œæ€§èƒ½è¾ƒå·®ï¼›Gateway åŸºäº Netty éé˜»å¡ IOï¼Œæ”¯æŒåŠ¨æ€è·¯ç”±ã€è´Ÿè½½å‡è¡¡ã€é™æµç†”æ–­ï¼Œæ˜¯ç›®å‰çš„æœ€ä¼˜é€‰æ‹©ã€‚</li>
<li><strong>æ ¸å¿ƒé…ç½®è¦ç‚¹</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">cloud:</span>
    <span class="hljs-attr">gateway:</span>
      <span class="hljs-attr">routes:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">id:</span> <span class="hljs-string">order-service</span> <span class="hljs-comment"># è·¯ç”±IDï¼Œå”¯ä¸€</span>
          <span class="hljs-attr">uri:</span> <span class="hljs-string">lb://order-service</span> <span class="hljs-comment"># ç›®æ ‡æœåŠ¡åç§°ï¼ˆNacosæ³¨å†Œçš„æœåŠ¡åï¼‰</span>
          <span class="hljs-attr">predicates:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">Path=/order/**</span> <span class="hljs-comment"># è·¯ç”±åŒ¹é…è§„åˆ™</span>
          <span class="hljs-attr">filters:</span>
            <span class="hljs-bullet">-</span> <span class="hljs-string">StripPrefix=1</span> <span class="hljs-comment"># å»æ‰è·¯å¾„å‰ç¼€ï¼ˆ/order/xxx -&gt; /xxxï¼‰</span>
            <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Sentinel</span> <span class="hljs-comment"># é›†æˆSentinelé™æµ</span>
              <span class="hljs-attr">args:</span>
                <span class="hljs-attr">resource:</span> <span class="hljs-string">order-service</span>
                <span class="hljs-attr">blockHandler:</span> <span class="hljs-string">com.example.gateway.GatewayBlockHandler</span>
</code></pre>
<p><strong>é¿å‘æŠ€å·§</strong>ï¼šGateway ä¸æ”¯æŒ Spring MVC æ³¨è§£ï¼ˆå¦‚ @RestControllerï¼‰ï¼Œå¦‚æœéœ€è¦è‡ªå®šä¹‰è¿‡æ»¤å™¨ï¼Œéœ€å®ç°GlobalFilteræ¥å£ï¼›è·¯ç”±åŒ¹é…è§„åˆ™æŒ‰é…ç½®é¡ºåºæ‰§è¡Œï¼Œä¼˜å…ˆçº§é«˜çš„è·¯ç”±è¦æ”¾åœ¨å‰é¢ã€‚</p>
<h2 data-id="heading-7">5. æœåŠ¡è°ƒç”¨ï¼šOpenFeignï¼ˆæ›¿ä»£ Ribbonï¼‰</h2>
<ul>
<li><strong>é€‰å‹å»ºè®®</strong>ï¼šOpenFeign æ˜¯ Ribbon çš„å¢å¼ºç‰ˆï¼Œæ”¯æŒå£°æ˜å¼è°ƒç”¨ã€è¯·æ±‚é‡è¯•ã€ç†”æ–­é›†æˆï¼Œä»£ç æ›´ç®€æ´ï¼Œæ— éœ€æ‰‹åŠ¨æ‹¼æ¥ URLã€‚</li>
<li><strong>æ ¸å¿ƒé…ç½®è¦ç‚¹</strong>ï¼š</li>
</ul>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// å£°æ˜å¼è°ƒç”¨æ¥å£</span>
<span class="hljs-variable">@FeignClient</span>(value = <span class="hljs-string">"user-service"</span>, fallback = UserServiceFallback.class)
public interface UserServiceClient {
    <span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/user/{id}"</span>)
    UserDTO <span class="hljs-built_in">getUserById</span>(<span class="hljs-variable">@PathVariable</span>(<span class="hljs-string">"id"</span>) Long id);
}
<span class="hljs-comment">// é™çº§ fallback ç±»</span>
<span class="hljs-variable">@Component</span>
public class UserServiceFallback implements UserServiceClient {
    <span class="hljs-variable">@Override</span>
    public UserDTO <span class="hljs-built_in">getUserById</span>(Long id) {
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">UserDTO</span>(-<span class="hljs-number">1</span>L, <span class="hljs-string">"é»˜è®¤ç”¨æˆ·"</span>, <span class="hljs-string">"æœåŠ¡æš‚æ—¶ä¸å¯ç”¨"</span>);
    }
}
</code></pre>
<p><strong>é¿å‘æŠ€å·§</strong>ï¼šOpenFeign é»˜è®¤è¶…æ—¶æ—¶é—´ 1 ç§’ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è°ƒæ•´ä¸º 3 ç§’ï¼ˆribbon.ReadTimeout=3000ï¼‰ï¼›é›†æˆ Sentinel æ—¶ï¼Œéœ€åœ¨application.ymlä¸­é…ç½®feign.sentinel.enabled=trueï¼Œå¦åˆ™ç†”æ–­ä¸ç”Ÿæ•ˆã€‚</p>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>ä»¥ä¸Šå°±æ˜¯ Spring Cloud æœ€æ ¸å¿ƒçš„ 5 ä¸ªç»„ä»¶æ€»ç»“ï¼Œæ¶µç›–äº†é€‰å‹ã€é…ç½®ã€é¿å‘ä¸‰ä¸ªå…³é”®ç»´åº¦ï¼Œéƒ½æ˜¯æˆ‘åœ¨å¤šä¸ªç”Ÿäº§é¡¹ç›®ä¸­è¸©å‘æ€»ç»“çš„å®æˆ˜ç»éªŒã€‚å…¶å® Spring Cloud ä¸éš¾ï¼Œå…³é”®æ˜¯æ‰¾å¯¹æ–¹æ³• â€”â€” å…ˆæ˜ç¡®ä¸šåŠ¡åœºæ™¯ï¼Œå†é€‰æ‹©åˆé€‚çš„ç»„ä»¶ï¼Œæœ€åæŒæ¡æ ¸å¿ƒé…ç½®å’Œé¿å‘æŠ€å·§ï¼Œå°±èƒ½è½»æ¾ä¸Šæ‰‹ã€‚</p>
<p>å¦‚æœè¿™ç¯‡æ€»ç»“å¯¹ä½ æœ‰å¸®åŠ©ï¼Œåˆ«å¿˜äº†<strong>ç‚¹èµ + æ”¶è— + è½¬å‘</strong>ç»™èº«è¾¹çš„å¼€å‘åŒäº‹ï¼å¦å¤–ï¼Œä½ åœ¨ä½¿ç”¨ Spring Cloud æ—¶è¿˜é‡åˆ°è¿‡å“ªäº›é—®é¢˜ï¼Ÿæ¯”å¦‚åˆ†å¸ƒå¼äº‹åŠ¡ã€é“¾è·¯è¿½è¸ªç­‰åœºæ™¯çš„è§£å†³æ–¹æ¡ˆï¼Œæˆ–è€…æƒ³äº†è§£æŸç»„ä»¶çš„è¿›é˜¶ç”¨æ³•ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€å‘Šè¯‰æˆ‘ï½ ä¸‹æœŸå†…å®¹ï¼Œå’±ä»¬é’ˆå¯¹æ€§è§£å†³ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆ react-grab å¯ä»¥åœ¨ Vue é¡¹ç›®ä¸­ä½¿ç”¨ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7578830345870327849</link>    <guid>https://juejin.cn/post/7578830345870327849</guid>    <pubDate>2025-12-02T05:35:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578830345870327849" data-draft-id="7578811288819662891" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆ react-grab å¯ä»¥åœ¨ Vue é¡¹ç›®ä¸­ä½¿ç”¨ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-02T05:35:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆ react-grab å¯ä»¥åœ¨ Vue é¡¹ç›®ä¸­ä½¿ç”¨ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T05:35:46.000Z" title="Tue Dec 02 2025 05:35:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è¿™æ˜¯ä¸€ä¸ª"æœ¬æƒ³æŠ„ä½œä¸šï¼Œç»“æœå‘ç°å¯ä»¥ç›´æ¥æŠ„å·å­"çš„æ•…äº‹ã€‚</p>
</blockquote>
<h2 data-id="heading-0">æœ¬æƒ³é€ ä¸ª Vue ç‰ˆçš„è½®å­</h2>
<p>å‰æ®µæ—¶é—´åœ¨ React é¡¹ç›®é‡Œç”¨äº† <code>react-grab</code> è¿™ä¸ªåº“ï¼Œä½“éªŒé‚£æ˜¯ç›¸å½“ä¸æ»‘ï¼šé¼ æ ‡æŒ‡å“ªæ‰“å“ªï¼Œå…ƒç´ ä¿¡æ¯ä¸€é”®å¤åˆ¶ï¼Œè°ƒè¯•æ ·å¼ç®€ç›´æ˜¯ç¥å™¨ã€‚</p>
<p>æ­£å¥½æˆ‘ç»´æŠ¤çš„æœ‰ä¸ª Vue çš„é¡¹ç›®ï¼Œå†™ CSS çš„æ—¶å€™ä¹ æƒ¯æ€§æƒ³ç”¨å®ƒï¼Œç»“æœçªç„¶ååº”è¿‡æ¥ï¼š"åäº†ï¼Œè¿™ç©æ„å„¿å« <strong>React</strong> Grabï¼ŒVue é¡¹ç›®è‚¯å®šæ²¡æˆã€‚"</p>
<p>å½“æ—¶æˆ‘å°±æƒ³ï¼Œæ—¢ç„¶ç”¨ä¸äº†ï¼Œé‚£æˆ‘å°±è‡ªå·±æ¨¡ä»¿å®ƒçš„åŸç†å†™ä¸€ä¸ª <code>vue-grab</code> å‘—ï¼åæ­£æ ¸å¿ƒé€»è¾‘æ— éå°±æ˜¯ç›‘å¬é¼ æ ‡ã€è·å– DOM å±æ€§è¿™äº›ï¼Œåº”è¯¥ä¸éš¾ã€‚</p>
<p>äºæ˜¯æˆ‘æ’¸èµ·è¢–å­ï¼Œæ‰“å¼€å®ƒçš„æºç å‡†å¤‡"å‚è€ƒå‚è€ƒ"ï¼ˆå…¶å®å°±æ˜¯å‡†å¤‡æŠ„ä½œä¸šï¼‰ã€‚</p>
<p>ç»“æœå½“æˆ‘æ‰’å¼€ä»£ç ä¸€çœ‹ï¼Œæ•´ä¸ªäººéƒ½æ„£ä½äº†â€”â€”<strong>è¿™è´§è·Ÿ React ä¸èƒ½è¯´å®Œå…¨æ— å…³ï¼Œåªèƒ½è¯´æ¯«ä¸æ²¾è¾¹ï¼</strong></p>
<p>æœ¬æ¥å‡†å¤‡å¤§å¹²ä¸€åœºé€ ä¸ªè½®å­ï¼Œç»“æœå‘ç°è½®å­å°±åœ¨è„šåº•ä¸‹ï¼Œè¿˜æ˜¯é€šç”¨çš„ã€‚ä»Šå¤©å°±æ¥èŠèŠè¿™ä¸ªæœ‰æ„æ€çš„ç°è±¡ã€‚</p>
<h2 data-id="heading-1">æ‰’å¼€æºç çœ‹çœŸç›¸</h2>
<p><code>react-grab</code> åˆ°åº•å¹²äº†å•¥ï¼Ÿå…¶å®å®ƒçš„é€»è¾‘ç‰¹åˆ«ç®€å•ï¼Œæ€»ç»“ä¸‹æ¥å°±è¿™ä¸€æ¡çº¿ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ç›‘å¬é¼ æ ‡] --&gt; B[é«˜äº®å…ƒç´ ] --&gt; C[è§£æDOM] --&gt; D[å¤åˆ¶ä¿¡æ¯]
</code></pre>
<p>ä»”ç»†çœ‹çœ‹è¿™å››ä¸ªæ­¥éª¤ï¼š</p>
<ol start="0">
<li><strong>ç›‘å¬é¼ æ ‡</strong>ï¼šç”¨çš„æ˜¯ <code>mousemove</code>ã€<code>click</code>ï¼Œè¿™æ˜¯æµè§ˆå™¨çš„åŸç”Ÿäº‹ä»¶ã€‚</li>
<li><strong>é«˜äº®å…ƒç´ </strong>ï¼šå¾€é¡µé¢ä¸Šæ’ä¸ª <code>div</code> åšé®ç½©ï¼Œè¿™æ˜¯åŸç”Ÿ DOM æ“ä½œã€‚</li>
<li><strong>è§£æ DOM</strong>ï¼šè¯»ä¸€ä¸‹ <code>node.style</code> å’Œ <code>attributes</code>ï¼Œè¿™ä¹Ÿæ˜¯åŸç”Ÿ APIã€‚</li>
<li><strong>å¤åˆ¶ä¿¡æ¯</strong>ï¼šè°ƒç”¨çš„ <code>navigator.clipboard</code>ï¼Œè¿˜æ˜¯åŸç”Ÿ APIã€‚</li>
</ol>
<p>å‘ç°æ²¡ï¼Ÿ<strong>è¿™ä¸€å¥—æµç¨‹èµ°ä¸‹æ¥ï¼Œæ ¹æœ¬ä¸éœ€è¦ React çš„è¿è¡Œæ—¶å‚ä¸</strong>ã€‚å®ƒæ²¡ç”¨ <code>useState</code>ï¼Œä¹Ÿæ²¡ç”¨ <code>Virtual DOM</code>ï¼Œå®Œå…¨å°±æ˜¯çº¯çº¯çš„ JavaScriptã€‚</p>
<h3 data-id="heading-2">é“è¯å¦‚å±±</h3>
<p>å£è¯´æ— å‡­ï¼Œå’±ä»¬çœ‹è¯æ®ã€‚</p>
<p><strong>è¯æ®ä¸€ï¼šçœ‹ä¾èµ–</strong></p>
<p>æ‰“å¼€å®ƒçš„ <code>package.json</code>ï¼Œçœ‹çœ‹ <code>dependencies</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
 Â <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
 Â  Â <span class="hljs-comment">// åªæœ‰ä¸€äº›å·¥å…·åº“ï¼Œå®Œå…¨æ²¡æœ‰ react æˆ– react-domï¼</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
 Â <span class="hljs-attr">"peerDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
 Â  Â <span class="hljs-comment">// è¿™é‡Œä¹Ÿæ²¡æœ‰å¼ºåˆ¶è¦æ±‚ react</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>è¯æ®äºŒï¼šçœ‹ç”¨æ³•</strong></p>
<p>å†çœ‹å®ƒçš„å…¥å£æ–‡ä»¶ï¼Œæ ¹æœ¬ä¸éœ€è¦ä»€ä¹ˆ <code>&lt;Provider&gt;</code> åŒ…è£¹ï¼Œä¹Ÿä¸ç”¨ <code>useGrab</code> è¿™ç§ Hookï¼Œç›´æ¥è°ƒç”¨ä¸ªå‡½æ•°å°±å®Œäº‹äº†ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// src/main.ts</span>
<span class="hljs-comment">// ä¸ç®¡ä½ æ˜¯ Vueã€React è¿˜æ˜¯åŸç”Ÿ JSï¼Œç”¨æ³•éƒ½ä¸€æ ·ï¼š</span>
â€‹
import { <span class="hljs-keyword">init</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-grab'</span>;
â€‹
<span class="hljs-keyword">init</span>({
 Â theme: <span class="hljs-string">'dark'</span>,
 Â color: <span class="hljs-string">'#3b82f6'</span>,
});
</code></pre>
<p>æˆ‘åœ¨ Vue é¡¹ç›®çš„ <code>main.ts</code> é‡Œè¯•äº†ä¸€ä¸‹ï¼Œå®Œç¾è¿è¡Œã€‚è¿™æ—¶å€™æˆ‘æ‰æ„è¯†åˆ°ï¼š<strong>è¿™å“ªé‡Œæ˜¯ react-grabï¼Œè¿™åˆ†æ˜æ˜¯ any-grab å•Šï¼</strong></p>
<h2 data-id="heading-3">ä¸ºä»€ä¹ˆä½œè€…è¦"æ’’è°"ï¼Ÿ</h2>
<p>æ—¢ç„¶è·Ÿ React æ²¡å¼ºä¾èµ–ï¼Œä½œè€…ä¸ºå•¥éå¾—å« <code>react-grab</code>ï¼Ÿæˆ‘çŒœå¤§æ¦‚ç‡æ˜¯è¿™å‡ ä¸ªåŸå› ï¼š</p>
<ol start="0">
<li><strong>ä½œè€…ä¹ æƒ¯</strong>ï¼šä½œè€…å¹³æ—¶å¯èƒ½åªå†™ Reactï¼Œæœ€åˆå°±æ˜¯ä¸ºäº†åœ¨ React é¡¹ç›®é‡Œç”¨ï¼Œé¡ºæ‰‹å°±èµ·äº†è¿™ä¸ªåã€‚</li>
<li><strong>ç”Ÿæ€è¹­çƒ­åº¦</strong>ï¼šä¸å¾—ä¸æ‰¿è®¤ï¼ŒReact çš„ç”Ÿæ€åœˆå¤ªå¤§äº†ã€‚å« <code>js-grab</code> å¯èƒ½æ²¡äººæœï¼Œå« <code>react-grab</code> ä¸€ä¸‹å­æ›å…‰ç‡å°±ä¸Šæ¥äº†ã€‚</li>
<li><strong>æ€ç»´å®šåŠ¿</strong>ï¼šå¾ˆå¤šå‰ç«¯å¼€å‘è€…ç°åœ¨ç¦»äº†æ¡†æ¶å°±ä¸ä¼šå†™ä»£ç äº†ï¼Œæ½œæ„è¯†é‡Œè§‰å¾— UI åº“å°±è¯¥è·Ÿæ¡†æ¶ç»‘å®šã€‚</li>
</ol>
<p>å…¶å®è¿™ç§"æŒ‚ç¾Šå¤´å–ç‹—è‚‰"çš„åº“è¿˜ä¸å°‘ã€‚æ¯”å¦‚ <code>react-hot-toast</code>ï¼Œå…¶å®å®ƒä¹Ÿæœ‰é React çš„ç‰ˆæœ¬ï¼›è¿˜æœ‰å¾ˆå¤šä»¥ <code>vue-</code> å¼€å¤´çš„æ‡’åŠ è½½åº“ï¼Œæ ¸å¿ƒå…¶å®å°±æ˜¯ä¸ª <code>IntersectionObserver</code>ï¼Œæ ¹æœ¬ä¸æŒ‘æ¡†æ¶ã€‚</p>
<h2 data-id="heading-4">æ€ä¹ˆç»ƒå°±"ç«çœ¼é‡‘ç›"ï¼Ÿ</h2>
<p>è¿™æ¬¡ç»å†ç»™æˆ‘æäº†ä¸ªé†’ï¼š<strong>æ‰¾è½®å­çš„æ—¶å€™ï¼Œåƒä¸‡åˆ«è¢«åå­—é™åˆ¶äº†æƒ³è±¡åŠ›</strong>ã€‚</p>
<p>ä¸‹æ¬¡å†çœ‹åˆ°è¿™ç§å¸¦æ¡†æ¶å‰ç¼€çš„åº“ï¼Œåˆ«æ€¥ç€åˆ’èµ°ï¼ŒæŒ‰è¿™ä¸‰æ­¥èµ°ï¼Œåªéœ€ 30 ç§’å°±èƒ½çœ‹ç©¿å®ƒçš„çœŸé¢ç›®ï¼š</p>
<ol start="0">
<li><strong>æŸ¥æˆ·å£ (çœ‹ <code>package.json</code>)</strong> ç”¨ <code>npm info &lt;åŒ…å&gt; peerDependencies</code> æ‰«ä¸€çœ¼ã€‚å¦‚æœ <code>react</code> æˆ– <code>vue</code> æ˜¯ <code>peerDependencies</code> ç”šè‡³å®Œå…¨æ²¡æœ‰ï¼Œå¤§æ¦‚ç‡æ˜¯é€šç”¨çš„ã€‚</li>
<li><strong>çœ‹é—¨è„¸ (çœ‹åˆå§‹åŒ–ä»£ç )</strong> å¦‚æœæ–‡æ¡£é‡Œè®©ä½ ç”¨ <code>&lt;Provider&gt;</code> åŒ…ç€ï¼Œæˆ–è€…å¿…é¡» <code>app.use()</code>ï¼Œé‚£æ˜¯çœŸç»‘æ­»äº†ã€‚ä½†å¦‚æœåªæ˜¯ import ä¸€ä¸ªå‡½æ•° <code>init()</code> ä¸€ä¸‹ï¼Œé‚£å®ƒåŸºæœ¬å°±æ˜¯ä¸ªåŸç”Ÿ JS åº“ã€‚</li>
<li><strong>çœ‹æ ¸å¿ƒ (çœ‹å®ƒæ“ä½œä»€ä¹ˆ)</strong> å¦‚æœæ˜¯æ“ä½œ DOM (åƒæ‹–æ‹½ã€é«˜äº®ã€æˆªå›¾)ã€å¤„ç†æ•°æ® (åƒæ—¥æœŸæ ¼å¼åŒ–ã€è¯·æ±‚åº“)ï¼Œè¿™äº›å¤©ç„¶å°±æ˜¯æ¡†æ¶æ— å…³çš„ã€‚</li>
</ol>
<h2 data-id="heading-5">é¡ºä¾¿ä»‹ç»ä¸‹</h2>
<p>åˆšæ‰æåˆ°çš„é‚£ä¸ª Vue é¡¹ç›®ï¼Œå…¶å®æ˜¯æˆ‘æœ€è¿‘å¼€æºçš„ <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fchat_edit" target="_blank" title="https://github.com/tt-a1i/chat_edit" ref="nofollow noopener noreferrer">Chat &amp; Edit</a></strong>ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªåŸºäº <strong>Vue 3.5 + TypeScript</strong> æ„å»ºçš„ AI è¾…åŠ©å†™ä½œå·¥å…·ï¼Œæ•´åˆäº† Chat å¯¹è¯ä¸ AI ç¼–è¾‘å™¨åŒé‡æ¨¡å¼ã€‚</p>
<p>é™¤äº†å¸¸è§„çš„æµå¼ Markdown æ¸²æŸ“ï¼Œå®ƒæœ€å¤§çš„ç‰¹ç‚¹æ˜¯<strong>å·¥ç¨‹åŒ–å®è·µ</strong>ï¼š</p>
<ul>
<li>ğŸ›  <strong>è°ƒè¯•é»‘ç§‘æŠ€</strong>ï¼šæ”¯æŒä½¿ç”¨ Chrome DevTools MCP è¿›è¡Œè°ƒè¯•ã€‚</li>
<li>ğŸ§ª <strong>æµ‹è¯•å®Œå¤‡</strong>ï¼šé›†æˆäº† Vitest (å•å…ƒæµ‹è¯•) å’Œ Playwright (E2E æµ‹è¯•)ã€‚</li>
<li>ğŸ— <strong>ç°ä»£æ¶æ„</strong>ï¼šé‡‡ç”¨ Pinia çŠ¶æ€ç®¡ç†ï¼Œé…ç½®äº†å®Œæ•´çš„ ESLint + Husky å·¥ä½œæµã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1159e37f8e84967bd2b87ae47e1c5ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lmf5peg6aOO6Zuo5Lmf6Zu-5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765258546&amp;x-signature=koaDWRXraMzFYQiEdgWjTM%2FXj0A%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df306235bf6e4b4197deb468449d9c6c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lmf5peg6aOO6Zuo5Lmf6Zu-5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765258546&amp;x-signature=sCfGlC1LxbG%2FzFzxo34%2FO7AX6aM%3D" alt="image.png" loading="lazy"/>
å¦‚æœä½ å¯¹ <strong>AI åº”ç”¨æ¶æ„</strong> æˆ–è€… é¡¹ç›®å†…å®¹ æ„Ÿå…´è¶£ï¼Œæ¬¢è¿æ¥ç‚¹ä¸ª Star â­ï¸ï¼Œä¸€èµ·äº¤æµï¼</p>
<h2 data-id="heading-6">å†™åœ¨æœ€å</h2>
<p>è¿™ä»¶äº‹è®©æˆ‘æ˜ç™½äº†ä¸€ä¸ªé“ç†ï¼š<strong>ä»£ç ä¸ä¼šéª—äººï¼Œä½†åå­—ä¼šã€‚</strong></p>
<p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬è¢«æ¡†æ¶çš„å›´å¢™å›°ä½äº†ï¼Œè§‰å¾— React çš„ä¸œè¥¿ Vue ä¸èƒ½ç”¨ï¼ŒVue çš„ä¸œè¥¿ Angular ä¸èƒ½ç”¨ã€‚å…¶å®è·³å‡ºæ¥ä¸€çœ‹ï¼Œå¤§å®¶åº•åº§éƒ½æ˜¯æµè§ˆå™¨ï¼Œéƒ½æ˜¯ DOMï¼Œéƒ½æ˜¯ JavaScriptã€‚</p>
<p>ä¸‹æ¬¡çœ‹åˆ°å¥½ç”¨çš„å·¥å…·ï¼Œå“ªæ€•å®ƒå« <code>react-xxx</code>ï¼Œèƒ†å­å¤§ä¸€ç‚¹ï¼Œæ‰’å¼€æºç çœ‹çœ‹ï¼Œè¯´ä¸å®šå°±èƒ½ç™½å«–åˆ°ä½ çš„ Vue é¡¹ç›®é‡Œã€‚æ¯•ç«Ÿï¼Œ<strong>å¥½å·¥å…·æ˜¯ä¸åˆ†é—¨æˆ·çš„</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»¥ä¸ºæ˜¯ MyBatis Plus é“¾å¼è°ƒç”¨çš„â€œä¼˜é›…â€å†™æ³•ï¼Œç»“æœåæ‰‹ç»™æˆ‘æŠ¥äº†ä¸ª NPEï¼Ÿ]]></title>    <link>https://juejin.cn/post/7578794217962045480</link>    <guid>https://juejin.cn/post/7578794217962045480</guid>    <pubDate>2025-12-02T05:35:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578794217962045480" data-draft-id="7578198815729451008" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»¥ä¸ºæ˜¯ MyBatis Plus é“¾å¼è°ƒç”¨çš„â€œä¼˜é›…â€å†™æ³•ï¼Œç»“æœåæ‰‹ç»™æˆ‘æŠ¥äº†ä¸ª NPEï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T05:35:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éª‘ç€bugçš„coder"/> <meta itemprop="url" content="https://juejin.cn/user/1922418579089566"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»¥ä¸ºæ˜¯ MyBatis Plus é“¾å¼è°ƒç”¨çš„â€œä¼˜é›…â€å†™æ³•ï¼Œç»“æœåæ‰‹ç»™æˆ‘æŠ¥äº†ä¸ª NPEï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1922418579089566/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éª‘ç€bugçš„coder
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T05:35:08.000Z" title="Tue Dec 02 2025 05:35:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. é—®é¢˜èƒŒæ™¯</h2>
<p>æœ€è¿‘åœ¨å¯¹çº¿ç´¢æœåŠ¡è¿›è¡Œä»£ç é‡æ„ã€‚ä¸šåŠ¡åœºæ™¯æ˜¯ä¸€ä¸ªæ ‡å‡†çš„åå°ç®¡ç†æŸ¥è¯¢æ¥å£ï¼š<code>DCCçº¿ç´¢æ¿€æ´»åˆ—è¡¨æŸ¥è¯¢</code>ã€‚</p>
<p>è¿™ä¸ªæ¥å£çš„æŸ¥è¯¢å‚æ•°æ¯”è¾ƒå¤šï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>èŒƒå›´æŸ¥è¯¢ï¼š<code>defeatTimeStart</code> / <code>defeatTimeEnd</code> (æˆ˜è´¥æ—¶é—´èŒƒå›´)</li>
</ul>
<p>åŸæ¥çš„ä»£ç ä½¿ç”¨äº†å¤§é‡çš„ <code>Optional.ofNullable(...).ifPresent(...)</code> æ¥åˆ¤ç©ºå’Œç»„è£…æŸ¥è¯¢æ¡ä»¶ã€‚è™½ç„¶é€»è¾‘æ²¡é—®é¢˜ï¼Œä½†æ»¡å±çš„ <code>Optional</code> çœ‹èµ·æ¥ç¡®å®æ˜¾å¾—æ¯”è¾ƒè‡ƒè‚¿ï¼Œä¸å¤Ÿæ¸…çˆ½ã€‚</p>
<h2 data-id="heading-1">2. ä¼˜åŒ–åŠ¨æœº</h2>
<p>æˆ‘æƒ³ç€ï¼ŒMyBatis Plusï¼ˆMPï¼‰åŸç”Ÿæ”¯æŒçš„ <strong>Conditional Queryï¼ˆæ¡ä»¶æ„é€ å™¨ï¼‰</strong> æ—©å°±å¾ˆæˆç†Ÿäº†ã€‚åˆ©ç”¨å®ƒçš„ <code>condition</code> å‚æ•°ï¼Œå¯ä»¥å°†åŸæœ¬ 3-4 è¡Œçš„ <code>if</code> é€»è¾‘å‹ç¼©æˆä¸€è¡Œé“¾å¼è°ƒç”¨ã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘æ»¡æ€€ä¿¡å¿ƒåœ°è¿›è¡Œäº†ä¸€æ³¢â€œä¼˜é›…â€çš„ä»£ç é‡æ„ï¼š</p>
<p><strong>ç›®æ ‡</strong>ï¼šç§»é™¤å†—ä½™çš„ <code>if</code> å’Œ <code>Optional</code>ï¼Œè®©ä»£ç çœ‹èµ·æ¥æ›´æ•´æ´ã€æ›´ç¬¦åˆç°ä»£ Java é£æ ¼ã€‚</p>
<p><strong>é‡æ„å‰ï¼ˆä¼ªä»£ç ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">Optional.ofNullable(<span class="hljs-built_in">this</span>.defeatTimeEnd)
                .ifPresent(time -&gt; queryWrapper.lt(SacClueInfoDlr::getLastReviewTime, time.plusDays(<span class="hljs-number">1</span>)));
</code></pre>
<p><strong>é‡æ„åï¼ˆæˆ‘ä»¥ä¸ºçš„ä¼˜é›…å†™æ³•ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ğŸ‘‡ çœ‹ç€æ˜¯ä¸æ˜¯å¾ˆçˆ½ï¼Ÿä¸€è¡Œæå®šï¼</span>
queryWrapper.lt(<span class="hljs-built_in">this</span>.defeatTimeEnd != <span class="hljs-literal">null</span>, SacClueInfoDlr::getLastReviewTime, <span class="hljs-built_in">this</span>.defeatTimeEnd.plusDays(<span class="hljs-number">1</span>));
</code></pre>
<p>çœ‹ç€è¿™æ•´é½åˆ’ä¸€çš„é“¾å¼è°ƒç”¨ï¼Œæˆ‘è¿˜åœ¨æ²¾æ²¾è‡ªå–œï¼šè¿™ä»£ç é‡æ„å¾—ï¼Œèµå¿ƒæ‚¦ç›®ï¼</p>
<h2 data-id="heading-2">3. è¸©å‘ç°åœº</h2>
<p>ä»£ç ä¸Šæ‰‹ä¸€æµ‹ï¼Œç›´æ¥ä¸€ä¸ª <strong>NPE (NullPointerException)</strong>ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp">java.lang.NullPointerException:<span class="hljs-literal">null</span>
</code></pre>
<p>æˆ‘å½“æ—¶ç¬¬ä¸€ååº”æ˜¯æ‡µçš„ï¼š
<strong>â€œä¸å¯¹å•Šï¼æˆ‘åœ¨ç¬¬ä¸€ä¸ªå‚æ•°é‡Œæ˜æ˜åŠ äº† <code>this.defeatTimeEnd != null</code> çš„åˆ¤æ–­å•Šï¼MyBatis Plus ä¸æ˜¯åº”è¯¥æ ¹æ®è¿™ä¸ªå¸ƒå°”å€¼æ¥å†³å®šæ˜¯å¦æ‰§è¡Œåé¢çš„é€»è¾‘å—ï¼Ÿâ€</strong></p>
<p>éš¾é“ MP çš„ <code>condition</code> æœºåˆ¶å¤±æ•ˆäº†ï¼Ÿ</p>
<h2 data-id="heading-3">4. åŸç†æ·±åº¦å¤ç›˜ï¼šJVM çš„æ±‚å€¼é™·é˜±</h2>
<p>å†·é™ä¸‹æ¥ Debug äº†ä¸€ä¸‹ï¼Œæˆ‘å‘ç°è‡ªå·±é”™æ€ªäº† MyBatis Plusï¼Œæˆ‘å‘ç°è‡ªå·±çŠ¯äº†ä¸€ä¸ª<strong>ä½çº§ä½†ç»å…¸çš„ Java åŸºç¡€é”™è¯¯ï¼šä¸¥é‡æ··æ·†äº†ã€ŒSQL çš„æ¡ä»¶æ„å»ºã€å’Œã€ŒJava çš„å‚æ•°æ±‚å€¼ã€æœºåˆ¶ï¼</strong></p>
<p>è®©æˆ‘ä»¬é‡æ–°å®¡è§†è¿™è¡Œä»£ç ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">java
.lt(<span class="hljs-keyword">condition</span>, <span class="hljs-keyword">column</span>, <span class="hljs-keyword">value</span>)
</code></pre>
<p>åœ¨æˆ‘çš„æ½œæ„è¯†é‡Œï¼Œæˆ‘æœŸæœ›çš„æ‰§è¡Œæµç¨‹æ˜¯ï¼ˆ<strong>æƒ°æ€§æ±‚å€¼</strong>ï¼‰ï¼š</p>
<ol>
<li>MP æ£€æŸ¥Â <code>condition</code>Â (<code>defeatTimeEnd != null</code>)ã€‚</li>
<li>å¦‚æœÂ <code>condition</code>Â ä¸ºÂ <code>false</code>ï¼Œç›´æ¥çŸ­è·¯ï¼Œ<strong>ä¸è®¡ç®—åé¢çš„å‚æ•°</strong>ã€‚</li>
<li>å¦‚æœÂ <code>true</code>ï¼Œæ‰å»è®¡ç®—Â <code>value</code>ã€‚</li>
</ol>
<p><strong>ä½†åœ¨ JVM çœ¼é‡Œï¼ŒçœŸå®ä¸–ç•Œçš„ Java æ˜¯è¿™æ ·æ‰§è¡Œçš„ï¼ˆåŠæ—©æ±‚å€¼ / Eager Evaluationï¼‰ï¼š</strong></p>
<p>åœ¨è°ƒç”¨Â <code>.lt()</code>Â æ–¹æ³•ä¹‹å‰ï¼ŒJavaÂ <strong>å¿…é¡»å…ˆæŠŠæ‰€æœ‰å‚æ•°çš„å€¼è®¡ç®—å‡ºæ¥</strong>ï¼Œç„¶åæ‰èƒ½å…¥æ ˆè°ƒç”¨æ–¹æ³•ã€‚</p>
<p>ä¸ºäº†è®²æ¸…æ¥šè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªæœ€ç®€å•çš„åŸç”Ÿ Java æ–¹æ³•æ¥æ¨¡æ‹Ÿï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ªç®€å•çš„æ¡ä»¶æ‰§è¡Œæ–¹æ³•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">(<span class="hljs-type">boolean</span> condition, String value)</span> {
    <span class="hljs-comment">// å³ä½¿è¿™é‡Œæœ‰åˆ¤æ–­ï¼Œä¹Ÿæ‹¦ä¸ä½å¤–é¢çš„ NPE</span>
    <span class="hljs-keyword">if</span> (condition) {
        System.out.println(value);
    }
}

<span class="hljs-comment">// è°ƒç”¨åœºæ™¯ï¼š</span>
<span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
<span class="hljs-comment">// âŒ è¿™é‡Œç›´æ¥å´©äº†ï¼æ ¹æœ¬è¿›ä¸åˆ° test æ–¹æ³•é‡Œï¼</span>
test(s != <span class="hljs-literal">null</span>, s.toString()); 
</code></pre>
<p>åœ¨è°ƒç”¨ä»»ä½•æ–¹æ³•ï¼ˆåŒ…æ‹¬ MP çš„ <code>.lt()</code>ï¼‰ä¹‹å‰ï¼ŒJava <strong>å¿…é¡»å…ˆæŠŠæ‰€æœ‰å‚æ•°çš„å€¼è®¡ç®—å‡ºæ¥</strong>ï¼Œç„¶åæ‰èƒ½å…¥æ ˆè°ƒç”¨æ–¹æ³•ã€‚</p>
<p>å¯¹äºæˆ‘çš„é‚£è¡ŒæŠ¥é”™ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java">.lt(defeatTimeEnd != <span class="hljs-literal">null</span>, ..., defeatTimeEnd.plusDays(<span class="hljs-number">1</span>))
</code></pre>
<ol>
<li><strong>å‚æ•° 1 æ±‚å€¼</strong>ï¼š<code>defeatTimeEnd != null</code> -&gt; ç»“æœ <code>false</code>ã€‚</li>
<li><strong>å‚æ•° 2 æ±‚å€¼</strong>ï¼š<code>SacClueInfoDlr::getLastReviewTime</code> -&gt; ç»“æœ <code>Function</code> å¯¹è±¡ã€‚</li>
<li><strong>å‚æ•° 3 æ±‚å€¼</strong>ï¼š<code>defeatTimeEnd.plusDays(1)</code> -&gt; <strong>ğŸ’¥ ç‚¸äº†ï¼</strong></li>
</ol>
<p><strong>çœŸç›¸å¤§ç™½</strong>ï¼š
å› ä¸º <code>defeatTimeEnd</code> æœ¬èº«æ˜¯ <code>null</code>ï¼Œä½†åœ¨ä¼ å…¥å‚æ•°æ—¶ï¼Œæˆ‘å¼ºè¡Œè°ƒç”¨äº†å®ƒçš„ <code>.plusDays()</code> æ–¹æ³•ã€‚<strong>ä¸ç®¡ä½ çš„ condition æ˜¯ true è¿˜æ˜¯ falseï¼Œè¿™ä¸ª <code>.plusDays()</code> æ–¹æ³•åœ¨ JVM å‡†å¤‡å‚æ•°é˜¶æ®µå°±å·²ç»è¢«æ‰§è¡Œäº†ï¼</strong> è¿™æ—¶å€™è¿ MyBatis Plus çš„ä»£ç å¤§é—¨éƒ½è¿˜æ²¡è¿›å»å‘¢ã€‚</p>
<h2 data-id="heading-4">5. æœ€ç»ˆæ–¹æ¡ˆï¼šå›å½’æœ´å®</h2>
<p>æ—¢ç„¶æ˜ç™½äº†åŸç†ï¼Œé‚£äº›çœ‹ä¼¼ä¼˜é›…çš„é“¾å¼è°ƒç”¨åœ¨æ¶‰åŠåˆ°<strong>æ–¹æ³•è°ƒç”¨ï¼ˆMethod Callï¼‰<strong>æˆ–</strong>å¤æ‚è®¡ç®—</strong>æ—¶ï¼Œä¸ä»…ä¸ä¼˜é›…ï¼Œåè€Œæ˜¯ä¸ªå·¨å¤§çš„éšæ‚£ã€‚</p>
<p>ä¸ºäº†ç³»ç»Ÿçš„ç¨³å¥æ€§ï¼Œæˆ‘æœæ–­å›æ»šäº†è¿™éƒ¨åˆ†é€»è¾‘ï¼Œå›å½’åˆ°äº†æœ€æœ´å®æ— åçš„ <code>if</code> åˆ¤æ–­ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åªæœ‰å½“å¯¹è±¡éç©ºæ—¶ï¼Œæ‰è¿›å…¥ä»£ç å—æ‰§è¡Œæ–¹æ³•è°ƒç”¨</span>
<span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.defeatTimeEnd != <span class="hljs-literal">null</span>) {
    queryWrapper.lt(SacClueInfoDlr::getLastReviewTime, <span class="hljs-built_in">this</span>.defeatTimeEnd.plusDays(<span class="hljs-number">1</span>));
}

<span class="hljs-keyword">if</span> (StringUtils.isNotBlank(<span class="hljs-built_in">this</span>.dlrCodeIn)) {
    queryWrapper.in(SacClueInfoDlr::getDlrCode, Arrays.asList(<span class="hljs-built_in">this</span>.dlrCodeIn.split(<span class="hljs-string">","</span>)));
}
</code></pre>
<h2 data-id="heading-5">6. é¿å‘æŒ‡å— (Takeaway)</h2>
<p>å…„å¼Ÿä»¬ï¼Œä¸‹æ¬¡åœ¨ä½¿ç”¨ MyBatis Plus çš„é“¾å¼è°ƒç”¨ï¼ˆConditional Queryï¼‰æ—¶ï¼Œä¸€å®šè¦è°¨è®°è¿™ä¸ªåŸåˆ™ï¼š</p>
<ol>
<li><strong>çº¯å˜é‡/å¼•ç”¨ä¼ é€’</strong>ï¼šæ”¾å¿ƒç”¨é“¾å¼ï¼Œä»£ç ç®€æ´ã€‚
<ul>
<li>âœ… <code>.eq(name != null, User::getName, name)</code></li>
</ul>
</li>
<li><strong>æ¶‰åŠæ–¹æ³•è°ƒç”¨/è®¡ç®—</strong>ï¼š<strong>å¿…é¡»ç”¨ <code>if</code> å—ï¼</strong>
<ul>
<li>âŒ <code>.eq(obj != null, User::getVal, obj.getValue())</code> â€”â€” <strong>NPE é¢„è­¦ï¼</strong></li>
<li>âŒ <code>.in(str != null, User::getIds, str.split(","))</code> â€”â€” <strong>é€»è¾‘é”™è¯¯/NPE é¢„è­¦ï¼</strong></li>
</ul>
</li>
</ol>
<p><strong>æ€»ç»“ï¼šåˆ«ä¸ºäº†çœé‚£ä¸¤è¡Œ <code>if</code>ï¼Œè®© JVM æ•™ä½ åšäººã€‚ä»£ç çš„â€œä¼˜é›…â€æ°¸è¿œå»ºç«‹åœ¨â€œæ­£ç¡®â€å’Œâ€œå®‰å…¨â€ä¹‹ä¸Šã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç†è§£ CSS backface-visibilityï¼šå¡ç‰‡ç¿»è½¬æ•ˆæœèƒŒåçš„å±æ€§]]></title>    <link>https://juejin.cn/post/7578780780027559945</link>    <guid>https://juejin.cn/post/7578780780027559945</guid>    <pubDate>2025-12-02T05:16:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578780780027559945" data-draft-id="7578780780027543561" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç†è§£ CSS backface-visibilityï¼šå¡ç‰‡ç¿»è½¬æ•ˆæœèƒŒåçš„å±æ€§"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2025-12-02T05:16:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="paradeå²æœˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3773179639113831"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç†è§£ CSS backface-visibilityï¼šå¡ç‰‡ç¿»è½¬æ•ˆæœèƒŒåçš„å±æ€§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3773179639113831/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    paradeå²æœˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T05:16:55.000Z" title="Tue Dec 02 2025 05:16:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰æ®µæ—¶é—´åœ¨åšä¸€ä¸ªäº§å“å±•ç¤ºé¡µï¼Œéœ€è¦å®ç°å¡ç‰‡ç¿»è½¬æ•ˆæœã€‚æœ¬ä»¥ä¸ºå¾ˆç®€å•ï¼Œç»“æœç¿»è½¬çš„æ—¶å€™æ€»æ˜¯"ç©¿å¸®"â€”â€”æ­£é¢å’ŒèƒŒé¢åŒæ—¶æ˜¾ç¤ºï¼Œæˆ–è€…èƒŒé¢çš„æ–‡å­—æ˜¯é•œåƒçš„ã€‚æŠ˜è…¾äº†åŠå¤©æ‰å‘ç°ï¼ŒåŸæ¥æ˜¯ <code>backface-visibility</code> è¿™ä¸ªå±æ€§æ²¡ææ˜ç™½ã€‚</p>
<p>ä»Šå¤©å°±æ¥èŠèŠè¿™ä¸ª CSS å±æ€§ã€‚</p>
<blockquote>
<p>ğŸ® <strong>åœ¨çº¿æ¼”ç¤º</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontend-learning.pages.dev%2Fanimation%2Fdemos%2Fbackface-visibility" target="_blank" title="https://frontend-learning.pages.dev/animation/demos/backface-visibility" ref="nofollow noopener noreferrer">frontend-learning.pages.dev/animation/dâ€¦</a></p>
<p>å»ºè®®è¾¹çœ‹æ–‡ç« è¾¹æ‰“å¼€æ¼”ç¤ºé¡µé¢ï¼Œæ‰€æœ‰æ•ˆæœéƒ½å¯ä»¥ç›´æ¥äº¤äº’ä½“éªŒã€‚</p>
</blockquote>
<h2 data-id="heading-0">å…ˆè¯´ç»“è®º</h2>
<p><code>backface-visibility</code> æ§åˆ¶çš„æ˜¯ï¼š<strong>å½“ä¸€ä¸ªå…ƒç´ çš„èƒŒé¢æœå‘ä½ æ—¶ï¼Œè¿™ä¸ªèƒŒé¢æ˜¯å¦å¯è§</strong>ã€‚</p>
<p>å¬èµ·æ¥æœ‰ç‚¹ç»•ï¼Ÿæ²¡å…³ç³»ï¼Œæˆ‘ä»¬æ…¢æ…¢æ¥ã€‚</p>
<h2 data-id="heading-1">ç†è§£"èƒŒé¢"è¿™ä¸ªæ¦‚å¿µ</h2>
<p>è¿™æ˜¯ç†è§£æ•´ä¸ªå±æ€§çš„å…³é”®ã€‚å¾ˆå¤šäººï¼ˆåŒ…æ‹¬æˆ‘ï¼‰ä¸€å¼€å§‹éƒ½æ²¡ææ¸…æ¥šè¿™ä¸ª"èƒŒé¢"åˆ°åº•æ˜¯ä»€ä¹ˆã€‚</p>
<p><strong>å…³é”®ç†è§£</strong>ï¼šæ¯ä¸ª HTML å…ƒç´ å°±åƒä¸€å¼ çº¸ï¼Œå¤©ç”Ÿå°±æœ‰æ­£é¢å’ŒèƒŒé¢ã€‚å½“ä½ ç”¨ <code>rotateY(180deg)</code> ç¿»è½¬å®ƒæ—¶ï¼Œä½ çœ‹åˆ°çš„æ˜¯å®ƒçš„<strong>èƒŒé¢</strong>ï¼ˆå°±åƒçº¸ç¿»è¿‡æ¥ï¼Œæ–‡å­—æ˜¯é•œåƒçš„ï¼‰ã€‚</p>
<p>æ¥çœ‹ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
  <span class="hljs-attr">style</span>=<span class="hljs-string">"
  background: linear-gradient(135deg, #10b981, #059669);
  color: white;
  padding: 40px;
  transform: rotateY(180deg);
"</span>
&gt;</span>
  HELLO
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>ä½ ä¼šçœ‹åˆ°ä»€ä¹ˆï¼Ÿ<strong>é•œåƒçš„ HELLO</strong>ã€‚è¿™å°±æ˜¯å…ƒç´ çš„èƒŒé¢ã€‚</p>
<p><code>backface-visibility: hidden</code> çš„ä½œç”¨å°±æ˜¯ï¼š<strong>å½“èƒŒé¢æœå‘ä½ æ—¶ï¼Œè®©å®ƒå˜é€æ˜</strong>ã€‚</p>
<h2 data-id="heading-2">å››ä¸ªåœºæ™¯ï¼Œé€æ­¥ç†è§£</h2>
<p>æˆ‘åšäº†å››ä¸ªå¯¹æ¯”æ¼”ç¤ºï¼Œå¸®ä½ ç†è§£è¿™ä¸ªå±æ€§æ˜¯æ€ä¹ˆå·¥ä½œçš„ã€‚</p>
<h3 data-id="heading-3">åœºæ™¯ 1ï¼šæ­£å¸¸å åŠ </h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"position: relative;"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"front"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"position: absolute;"</span>&gt;</span>FRONT<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"back"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"position: absolute;"</span>&gt;</span>BACK<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><strong>ç»“æœ</strong>ï¼šåªçœ‹åˆ° BACK
<strong>åŸå› </strong>ï¼šä¸¤ä¸ªéƒ½æ˜¯ <code>absolute</code>ï¼ŒBACK åœ¨ä¸Šå±‚è¦†ç›–äº† FRONT</p>
<p>è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯æ™®é€šçš„ DOM å±‚å ã€‚</p>
<h3 data-id="heading-4">åœºæ™¯ 2ï¼šBACK ç¿»è½¬ 180Â°</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.back</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">180deg</span>);
}
</code></pre>
<p><strong>ç»“æœ</strong>ï¼šçœ‹åˆ°é•œåƒçš„ BACK
<strong>åŸå› </strong>ï¼šBACK ç¿»è½¬åï¼Œä½ çœ‹åˆ°çš„æ˜¯å®ƒçš„<strong>èƒŒé¢</strong>ï¼ˆæ–‡å­—é•œåƒï¼‰</p>
<p>è¿™é‡Œå°±å‡ºç°é—®é¢˜äº†ï¼è™½ç„¶ BACK ç¿»è½¬äº†ï¼Œä½†ä½ çœ‹åˆ°çš„æ˜¯å®ƒçš„èƒŒé¢ï¼Œæ–‡å­—æ˜¯åçš„ã€‚</p>
<h3 data-id="heading-5">åœºæ™¯ 3ï¼šéšè— BACK çš„èƒŒé¢</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.back</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">180deg</span>);
  <span class="hljs-attribute">backface-visibility</span>: hidden; <span class="hljs-comment">/* å…³é”®ï¼*/</span>
}
</code></pre>
<p><strong>ç»“æœ</strong>ï¼šâœ… åªçœ‹åˆ° FRONT
<strong>åŸå› </strong>ï¼šBACK çš„èƒŒé¢è¢«éšè—ï¼Œéœ²å‡ºä¸‹é¢çš„ FRONT</p>
<p>ç°åœ¨å¥½äº†ï¼BACK çš„èƒŒé¢ä¸å¯è§äº†ï¼Œæ‰€ä»¥ä½ èƒ½çœ‹åˆ°ä¸‹é¢çš„ FRONTã€‚</p>
<h3 data-id="heading-6">åœºæ™¯ 4ï¼šå®Œç¾ç¿»è½¬</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.front</span>,
<span class="hljs-selector-class">.back</span> {
  <span class="hljs-attribute">backface-visibility</span>: hidden; <span class="hljs-comment">/* ä¸¤é¢éƒ½éšè—èƒŒé¢ */</span>
}
<span class="hljs-selector-class">.back</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">180deg</span>);
}

<span class="hljs-comment">/* æ‚¬åœæ—¶ç¿»è½¬çˆ¶å®¹å™¨ */</span>
<span class="hljs-selector-class">.card-container</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">180deg</span>);
}
</code></pre>
<p><strong>ç»“æœ</strong>ï¼šâœ… æ‚¬åœå®Œç¾ç¿»è½¬
<strong>åŸç†</strong>ï¼š</p>
<ul>
<li>åˆå§‹çŠ¶æ€ï¼šFRONT æ­£é¢æœå‘ä½ ï¼ˆæ˜¾ç¤ºï¼‰ï¼ŒBACK èƒŒé¢æœå‘ä½ ï¼ˆéšè—ï¼‰</li>
<li>ç¿»è½¬åï¼šFRONT èƒŒé¢æœå‘ä½ ï¼ˆéšè—ï¼‰ï¼ŒBACK æ­£é¢æœå‘ä½ ï¼ˆæ˜¾ç¤ºï¼‰</li>
</ul>
<p>è¿™å°±æ˜¯å®Œç¾çš„å¡ç‰‡ç¿»è½¬æ•ˆæœï¼</p>
<h2 data-id="heading-7">è¯­æ³•å¾ˆç®€å•</h2>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.element</span> {
  <span class="hljs-attribute">backface-visibility</span>: visible | hidden;
}
</code></pre>
<ul>
<li><code>visible</code>ï¼šé»˜è®¤å€¼ï¼ŒèƒŒé¢å¯è§</li>
<li><code>hidden</code>ï¼šèƒŒé¢ä¸å¯è§</li>
</ul>
<p>å°±è¿™ä¸¤ä¸ªå€¼ï¼Œæ²¡åˆ«çš„äº†ã€‚</p>
<h2 data-id="heading-8">ä¸€ä¸ªå¸¸è§è¯¯åŒºï¼šä¸ºä»€ä¹ˆä¸èƒ½åˆ†åˆ«æ—‹è½¬å­å…ƒç´ ï¼Ÿ</h2>
<p>è¿™æ˜¯æˆ‘å½“æ—¶æœ€å›°æƒ‘çš„åœ°æ–¹ã€‚æ—¢ç„¶ç¿»è½¬åæ­£é¢å’ŒèƒŒé¢éƒ½æ—‹è½¬äº† 180Â°ï¼Œä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥è¿™æ ·å†™ï¼Ÿ</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* âŒ é”™è¯¯å†™æ³• */</span>
<span class="hljs-selector-class">.card-container</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.front</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">180deg</span>);
}
<span class="hljs-selector-class">.card-container</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.back</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">180deg</span>);
}
</code></pre>
<p>çœ‹èµ·æ¥å¾ˆåˆç†å¯¹å§ï¼Ÿä½†å®é™…ä¸Š<strong>å®Œå…¨ä¸è¡Œ</strong>ã€‚</p>
<h3 data-id="heading-9">é—®é¢˜åœ¨å“ªï¼Ÿ</h3>
<p>å…³é”®åœ¨äºï¼š<strong>CSS çš„ <code>transform</code> å±æ€§ä¼šè¢«å®Œå…¨è¦†ç›–ï¼Œè€Œä¸æ˜¯ç´¯åŠ </strong>ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åˆå§‹çŠ¶æ€ */</span>
<span class="hljs-selector-class">.front</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">0deg</span>);
}
<span class="hljs-selector-class">.back</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">180deg</span>);
}

<span class="hljs-comment">/* æ‚¬åœå */</span>
<span class="hljs-selector-class">.card-container</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.front</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">180deg</span>); <span class="hljs-comment">/* âœ“ ä» 0Â° å˜æˆ 180Â° */</span>
}
<span class="hljs-selector-class">.card-container</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.back</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">180deg</span>); <span class="hljs-comment">/* âœ— ä» 180Â° å˜æˆ 180Â°ï¼Œæ²¡å˜åŒ–ï¼ */</span>
}
</code></pre>
<p>èƒŒé¢çš„åˆå§‹å€¼ <code>rotateY(180deg)</code> è¢«æ–°å€¼ <code>rotateY(180deg)</code> è¦†ç›–ï¼Œä½†å› ä¸ºå€¼ç›¸åŒï¼Œæ‰€ä»¥èƒŒé¢æ ¹æœ¬æ²¡åŠ¨ï¼</p>
<h3 data-id="heading-10">æ­£ç¡®åšæ³•ï¼šæ—‹è½¬çˆ¶å®¹å™¨</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* âœ… æ­£ç¡®å†™æ³• */</span>
<span class="hljs-selector-class">.card-container</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">180deg</span>); <span class="hljs-comment">/* æ—‹è½¬æ•´ä¸ªçˆ¶å®¹å™¨ */</span>
}
</code></pre>
<p>è¿™æ ·åšçš„åŸç†æ˜¯ï¼š<strong>å­å…ƒç´ çš„ transform æ˜¯ç›¸å¯¹äºçˆ¶å…ƒç´ çš„åæ ‡ç³»</strong>ã€‚</p>
<pre><code class="hljs language-scss" lang="scss">åˆå§‹çŠ¶æ€ï¼š
<span class="hljs-selector-class">.card</span> (<span class="hljs-number">0</span>Â°)
  â”œâ”€â”€ <span class="hljs-selector-class">.front</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">0</span>Â°) ç›¸å¯¹äº .card   â†’ ç»å¯¹ä½ç½® <span class="hljs-number">0</span>Â°
  â””â”€â”€ .back:  <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">180</span>Â°) ç›¸å¯¹äº .card â†’ ç»å¯¹ä½ç½® <span class="hljs-number">180</span>Â°

æ‚¬åœåï¼š
.card (<span class="hljs-number">180</span>Â°)  â† æ•´ä¸ªåæ ‡ç³»æ—‹è½¬äº†
  â”œâ”€â”€ .front: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">0</span>Â°) ç›¸å¯¹äº .card   â†’ ç»å¯¹ä½ç½® <span class="hljs-number">0</span>Â° + <span class="hljs-number">180</span>Â° = <span class="hljs-number">180</span>Â°
  â””â”€â”€ .back:  <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">180</span>Â°) ç›¸å¯¹äº .card â†’ ç»å¯¹ä½ç½® <span class="hljs-number">180</span>Â° + <span class="hljs-number">180</span>Â° = <span class="hljs-number">360</span>Â° = <span class="hljs-number">0</span>Â°
</code></pre>
<p>çˆ¶å…ƒç´ æ—‹è½¬æ—¶ï¼Œå­å…ƒç´ çš„ç›¸å¯¹è§’åº¦ä¸å˜ï¼Œä½†ç»å¯¹è§’åº¦ä¼šæ”¹å˜ã€‚è¿™æ‰æ˜¯æ­£ç¡®çš„ç¿»è½¬é€»è¾‘ã€‚</p>
<h2 data-id="heading-11">ä¸ºä»€ä¹ˆéœ€è¦ä¸‰å±‚ç»“æ„ï¼Ÿ</h2>
<p>æ ‡å‡†çš„å¡ç‰‡ç¿»è½¬éœ€è¦ä¸‰å±‚ DOM ç»“æ„ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"çˆ·å®¹å™¨"</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- perspectiveï¼ˆè§‚å¯Ÿç‚¹ï¼‰ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"çˆ¶å®¹å™¨"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- transform-style + rotateYï¼ˆç¿»è½¬è€…ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"æ­£é¢"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- backface-visibilityï¼ˆè¢«ç¿»è½¬çš„é¢ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"èƒŒé¢"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- backface-visibilityï¼ˆè¢«ç¿»è½¬çš„é¢ï¼‰ --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h3 data-id="heading-12">æ¯ä¸€å±‚çš„èŒè´£</h3>
<p><strong>çˆ·å®¹å™¨</strong>ï¼šè®¾ç½® <code>perspective</code></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.card-container</span> {
  <span class="hljs-attribute">perspective</span>: <span class="hljs-number">1000px</span>; <span class="hljs-comment">/* å¿…é¡»åœ¨çˆ¶å…ƒç´ ä¸Š */</span>
}
</code></pre>
<ul>
<li>å®šä¹‰è§‚å¯Ÿè€…çš„ä½ç½®ï¼Œåˆ›å»º 3D ç©ºé—´</li>
<li>ç±»æ¯”ï¼šä½ ç«™åœ¨èˆå°å‰çœ‹è¡¨æ¼”ï¼Œè¿™ä¸ªå±æ€§å†³å®šä½ ç«™åœ¨å“ªé‡Œçœ‹</li>
<li><strong>ä¸ºä»€ä¹ˆåœ¨å¤–å±‚</strong>ï¼Ÿ<code>perspective</code> å¿…é¡»è®¾ç½®åœ¨çˆ¶å…ƒç´ ä¸Šï¼Œæ‰èƒ½å¯¹å­å…ƒç´ çš„ 3D å˜æ¢ç”Ÿæ•ˆ</li>
</ul>
<p><strong>çˆ¶å®¹å™¨</strong>ï¼šè®¾ç½® <code>transform-style</code> å’Œæ‰§è¡Œ <code>rotateY</code></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">transform-style</span>: preserve-<span class="hljs-number">3</span>d; <span class="hljs-comment">/* ä¿æŒ 3D ç©ºé—´ */</span>
  <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.6s</span>;
}

<span class="hljs-selector-class">.card-container</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">180deg</span>); <span class="hljs-comment">/* ç¿»è½¬æ•´ä¸ªå¡ç‰‡ */</span>
}
</code></pre>
<ul>
<li><code>preserve-3d</code>ï¼šè®©å­å…ƒç´ ä¿æŒåœ¨ 3D ç©ºé—´ä¸­ï¼ˆè€Œä¸æ˜¯è¢«å‹å¹³ï¼‰</li>
<li>ç±»æ¯”ï¼šè¿™æ˜¯èˆå°ä¸Šçš„è½¬ç›˜ï¼Œå¸¦ç€ä¸Šé¢çš„æ¼”å‘˜ä¸€èµ·æ—‹è½¬</li>
</ul>
<p><strong>å­å…ƒç´ </strong>ï¼šæ­£é¢å’ŒèƒŒé¢</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.card-front</span>,
<span class="hljs-selector-class">.card-back</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">backface-visibility</span>: hidden; <span class="hljs-comment">/* å…³é”®ï¼éšè—èƒŒé¢ */</span>
}

<span class="hljs-selector-class">.card-back</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">180deg</span>); <span class="hljs-comment">/* èƒŒé¢é¢„å…ˆç¿»è½¬ */</span>
}
</code></pre>
<ul>
<li><code>position: absolute</code>ï¼šè®©ä¸¤ä¸ªé¢é‡å åœ¨åŒä¸€ä½ç½®</li>
<li>èƒŒé¢é¢„å…ˆç¿»è½¬ 180Â°ï¼šè¿™æ ·å½“çˆ¶å®¹å™¨ç¿»è½¬ 180Â° æ—¶ï¼ŒèƒŒé¢åˆšå¥½æ­£é¢æœå‘ä½ </li>
</ul>
<h3 data-id="heading-13">ä¸ºä»€ä¹ˆä¸èƒ½å°‘ä¸€å±‚ï¼Ÿ</h3>
<p>å¦‚æœåªæœ‰ä¸¤å±‚ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* âŒ é”™è¯¯ */</span>
<span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">perspective</span>: <span class="hljs-number">1000px</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">180deg</span>);
}
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼š<code>perspective</code> å’Œ <code>transform</code> åœ¨åŒä¸€ä¸ªå…ƒç´ ä¸Šï¼Œ<code>perspective</code> ä¸ä¼šå¯¹è‡ªå·±çš„ <code>transform</code> ç”Ÿæ•ˆï¼Œåªä¼šå¯¹å­å…ƒç´ ç”Ÿæ•ˆã€‚ç»“æœå°±æ˜¯æ²¡æœ‰é€è§†æ•ˆæœã€‚</p>
<h2 data-id="heading-14">å®Œæ•´çš„å¡ç‰‡ç¿»è½¬æ¨¡æ¿</h2>
<p>ç›´æ¥å¤åˆ¶è¿™ä¸ªæ¨¡æ¿ï¼Œæ”¹æ”¹æ ·å¼å°±èƒ½ç”¨ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- HTML ç»“æ„ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-container"</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- çˆ·å®¹å™¨ï¼šè§‚å¯Ÿç‚¹ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- çˆ¶å®¹å™¨ï¼šç¿»è½¬è€… --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-front"</span>&gt;</span>æ­£é¢å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"card-back"</span>&gt;</span>èƒŒé¢å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ç¬¬ 1 å±‚ï¼šçˆ·å®¹å™¨ - è®¾ç½®è§‚å¯Ÿç‚¹ */</span>
<span class="hljs-selector-class">.card-container</span> {
  <span class="hljs-attribute">perspective</span>: <span class="hljs-number">1000px</span>; <span class="hljs-comment">/* å¿…é¡»åœ¨çˆ¶å…ƒç´ ä¸Š */</span>
}

<span class="hljs-comment">/* ç¬¬ 2 å±‚ï¼šçˆ¶å®¹å™¨ - æ‰§è¡Œç¿»è½¬ */</span>
<span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">transform-style</span>: preserve-<span class="hljs-number">3</span>d; <span class="hljs-comment">/* ä¿æŒ 3D ç©ºé—´ */</span>
  <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.6s</span>;
}

<span class="hljs-selector-class">.card-container</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">180deg</span>); <span class="hljs-comment">/* ç¿»è½¬æ•´ä¸ªå¡ç‰‡ */</span>
}

<span class="hljs-comment">/* ç¬¬ 3 å±‚ï¼šå­å…ƒç´  - æ­£é¢å’ŒèƒŒé¢ */</span>
<span class="hljs-selector-class">.card-front</span>,
<span class="hljs-selector-class">.card-back</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">backface-visibility</span>: hidden; <span class="hljs-comment">/* å…³é”®ï¼éšè—èƒŒé¢ */</span>
}

<span class="hljs-selector-class">.card-back</span> {
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotateY</span>(<span class="hljs-number">180deg</span>); <span class="hljs-comment">/* èƒŒé¢é¢„å…ˆç¿»è½¬ */</span>
}
</code></pre>
<p>è¿™ä¸ªæ¨¡æ¿æ˜¯æ ‡å‡†å†™æ³•ï¼Œä¸‰å±‚ç»“æ„ç¼ºä¸€ä¸å¯ã€‚</p>
<h2 data-id="heading-15">å‡ ä¸ªæ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>å¿…é¡»é…åˆ 3D å˜æ¢</strong>ï¼š<code>backface-visibility</code> åªåœ¨ 3D å˜æ¢ï¼ˆå¦‚ <code>rotateY</code>, <code>rotateX</code>ï¼‰ä¸­æœ‰æ„ä¹‰ï¼Œ2D æ—‹è½¬ï¼ˆ<code>rotate</code>ï¼‰ä¸ä¼šäº§ç”ŸèƒŒé¢</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šè®¾ç½®ä¸º <code>hidden</code> å¯ä»¥è®©æµè§ˆå™¨è·³è¿‡èƒŒé¢çš„æ¸²æŸ“ï¼Œæå‡æ€§èƒ½</li>
<li><strong>æµè§ˆå™¨å…¼å®¹</strong>ï¼šç°ä»£æµè§ˆå™¨éƒ½æ”¯æŒï¼Œæ—§ç‰ˆæœ¬å¯èƒ½éœ€è¦ <code>-webkit-</code> å‰ç¼€</li>
</ol>
<h2 data-id="heading-16">æ€»ç»“</h2>
<p><code>backface-visibility</code> è¿™ä¸ªå±æ€§æœ¬èº«å¾ˆç®€å•ï¼Œå°±ä¸¤ä¸ªå€¼ã€‚ä½†è¦çœŸæ­£ç†è§£å®ƒï¼Œéœ€è¦ææ¸…æ¥šå‡ ä¸ªæ¦‚å¿µï¼š</p>
<ol>
<li>æ¯ä¸ªå…ƒç´ å¤©ç”Ÿå°±æœ‰æ­£é¢å’ŒèƒŒé¢</li>
<li><code>backface-visibility: hidden</code> è®©èƒŒé¢æœå‘ä½ æ—¶å˜é€æ˜</li>
<li>å¡ç‰‡ç¿»è½¬å¿…é¡»åœ¨çˆ¶å…ƒç´ ä¸Šæ‰§è¡Œæ—‹è½¬</li>
<li>æ ‡å‡†çš„ä¸‰å±‚ç»“æ„ä¸èƒ½çœç•¥</li>
</ol>
<p>æœ€åå†æ¨èä¸€æ¬¡æˆ‘åšçš„æ¼”ç¤ºé¡µé¢ï¼Œé‡Œé¢æœ‰æ‰€æœ‰åœºæ™¯çš„äº¤äº’æ¼”ç¤ºå’Œè¯¦ç»†è¯´æ˜ï¼š</p>
<p>ğŸ‘‰ <a href="https://link.juejin.cn?target=https%3A%2F%2Ffrontend-learning.pages.dev%2Fanimation%2Fdemos%2Fbackface-visibility" target="_blank" title="https://frontend-learning.pages.dev/animation/demos/backface-visibility" ref="nofollow noopener noreferrer">frontend-learning.pages.dev/animation/dâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MoonBitè¯­æ³•åŸºç¡€æ¦‚è¿°]]></title>    <link>https://juejin.cn/post/7578797337868009506</link>    <guid>https://juejin.cn/post/7578797337868009506</guid>    <pubDate>2025-12-02T05:01:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578797337868009506" data-draft-id="7578797337867993122" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MoonBitè¯­æ³•åŸºç¡€æ¦‚è¿°"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-02T05:01:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¹‹è™é™ˆéšæ˜“"/> <meta itemprop="url" content="https://juejin.cn/user/1239904846873326"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MoonBitè¯­æ³•åŸºç¡€æ¦‚è¿°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1239904846873326/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¹‹è™é™ˆéšæ˜“
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T05:01:37.000Z" title="Tue Dec 02 2025 05:01:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ”¹å˜ä¸–ç•Œçš„ç¼–ç¨‹è¯­è¨€ MoonBit</h2>
<blockquote>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å†œæ‘ç¨‹åºå‘˜ï¼Œç‹¬ç«‹å¼€å‘è€…ï¼Œå‰ç«¯ä¹‹è™é™ˆéšæ˜“ï¼Œæˆ‘çš„ä¸ªäººç½‘ç«™æ˜¯ <code>https://chensuiyi.me</code></p>
</blockquote>
<blockquote>
<p>è¿™æ˜¯æˆ‘çš„ <code>ã€Šæ”¹å˜ä¸–ç•Œçš„ç¼–ç¨‹è¯­è¨€MoonBitã€‹</code> ç³»åˆ—æ–‡ç« ï¼Œå°†è‡ªå·±å­¦ä¹ å’Œç†è§£ MoonBit çš„è¿‡ç¨‹åˆ†äº«ç»™å¤§å®¶ï¼Œå¸Œæœ›èƒ½å¸¦æ¥å‚è€ƒå’Œå¸®åŠ©ã€‚</p>
</blockquote>
<blockquote>
<p>å…¨éƒ¨æ–‡ç« å¯ä»¥å‰å¾€ MoonBit å¼€å‘ç½‘ <code>https://moonbit.edgeone.app</code> æˆ– <code>https://moonbit.pages.dev</code> æŸ¥çœ‹ï¼Œæˆ‘åšä¿¡ï¼ŒMoonBit å°†ä¼šæ”¹å˜ä¸–ç•Œã€‚</p>
</blockquote>

<h3 data-id="heading-1">å¾€æœŸæ–‡ç« </h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FFPDr9JzFoGp806pzSDRe-g" target="_blank" title="https://mp.weixin.qq.com/s/FPDr9JzFoGp806pzSDRe-g" ref="nofollow noopener noreferrer">æ”¹å˜ä¸–ç•Œçš„ç¼–ç¨‹è¯­è¨€ MoonBitï¼šèƒŒæ™¯çŸ¥è¯†é€Ÿè§ˆ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FTr7-XOI20OMU5YZ0v7e-Mg" target="_blank" title="https://mp.weixin.qq.com/s/Tr7-XOI20OMU5YZ0v7e-Mg" ref="nofollow noopener noreferrer">æ”¹å˜ä¸–ç•Œçš„ç¼–ç¨‹è¯­è¨€ MoonBitï¼šé¡¹ç›®æ–‡ä»¶è¯¦è§£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FDZBJMFutT8um9FX2SxBNHg" target="_blank" title="https://mp.weixin.qq.com/s/DZBJMFutT8um9FX2SxBNHg" ref="nofollow noopener noreferrer">æ”¹å˜ä¸–ç•Œçš„ç¼–ç¨‹è¯­è¨€ MoonBitï¼šé…ç½®ç³»ç»Ÿä»‹ç»(ä¸Š)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FA9RLmkumNjNWOVH8SO34cw" target="_blank" title="https://mp.weixin.qq.com/s/A9RLmkumNjNWOVH8SO34cw" ref="nofollow noopener noreferrer">æ”¹å˜ä¸–ç•Œçš„ç¼–ç¨‹è¯­è¨€ MoonBitï¼šé…ç½®ç³»ç»Ÿä»‹ç»(ä¸‹)</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FubphoWliaegeU5E1TBgbsw" target="_blank" title="https://mp.weixin.qq.com/s/ubphoWliaegeU5E1TBgbsw" ref="nofollow noopener noreferrer">æ”¹å˜ä¸–ç•Œçš„ç¼–ç¨‹è¯­è¨€ MoonBitï¼šå¦‚ä½•ç”¨äºå‰ç«¯å¼€å‘</a></li>
</ul>

<p>å‰é¢å‡ ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ç³»ç»Ÿåœ°å­¦ä¹ äº† MoonBit çš„èƒŒæ™¯çŸ¥è¯†ã€é¡¹ç›®ç»“æ„ã€é…ç½®ç³»ç»Ÿä»¥åŠå¦‚ä½•åœ¨å‰ç«¯å¼€å‘ä¸­ä½¿ç”¨ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬ç»ˆäºè¦è¿›å…¥ MoonBit è¯­è¨€æœ¬èº«çš„è¯­æ³•å­¦ä¹ äº†ï¼</p>
<p>æœ¬æ–‡å°†å¸¦ä½ å…¨é¢äº†è§£ MoonBit çš„åŸºç¡€è¯­æ³•ï¼ŒåŒ…æ‹¬ç¨‹åºç»“æ„ã€å˜é‡ç»‘å®šã€æ•°æ®ç±»å‹ã€å‡½æ•°å®šä¹‰ã€æ§åˆ¶æµç­‰æ ¸å¿ƒæ¦‚å¿µã€‚è®©æˆ‘ä»¬ä¸€èµ·å¼€å§‹è¿™æ®µç²¾å½©çš„è¯­æ³•ä¹‹æ—…å§ï¼</p>

<h3 data-id="heading-2">ç¨‹åºçš„åŸºæœ¬ç»„æˆ</h3>
<p>ä¸€ä¸ª MoonBit ç¨‹åºç”±ä»¥ä¸‹é¡¶å±‚å®šä¹‰ç»„æˆï¼š</p>
<ul>
<li><strong>ç±»å‹å®šä¹‰</strong>ï¼šå®šä¹‰ç»“æ„ä½“ã€æšä¸¾ç­‰æ•°æ®ç±»å‹</li>
<li><strong>å‡½æ•°å®šä¹‰</strong>ï¼šå®šä¹‰å¯å¤ç”¨çš„ä»£ç å—</li>
<li><strong>å¸¸é‡å®šä¹‰å’Œå˜é‡ç»‘å®š</strong>ï¼šå®šä¹‰ä¸å˜çš„å¸¸é‡å’Œå¯å˜çš„å˜é‡</li>
<li><strong><code>init</code> å‡½æ•°</strong>ï¼šåˆå§‹åŒ–å‡½æ•°</li>
<li><strong><code>main</code> å‡½æ•°</strong>ï¼šç¨‹åºä¸»å…¥å£</li>
<li><strong><code>test</code> å—</strong>ï¼šå†…è”æµ‹è¯•</li>
</ul>
<p><strong>ç±»æ¯”ç†è§£</strong>ï¼š</p>
<p>å¦‚æœæŠŠ MoonBit ç¨‹åºæ¯”ä½œä¸€æœ¬ä¹¦ï¼Œé‚£ä¹ˆï¼š</p>
<ul>
<li>ç±»å‹å®šä¹‰å°±åƒæ˜¯ä¹¦ä¸­çš„è§’è‰²è®¾å®š</li>
<li>å‡½æ•°å®šä¹‰å°±åƒæ˜¯å„ä¸ªç« èŠ‚</li>
<li><code>main</code> å‡½æ•°å°±æ˜¯æ•…äº‹çš„å¼€å¤´</li>
<li><code>test</code> å—å°±æ˜¯æ¯ç« åé¢çš„ä¹ é¢˜</li>
</ul>

<h3 data-id="heading-3">è¡¨è¾¾å¼å’Œè¯­å¥</h3>
<p>MoonBit åŒºåˆ†<strong>è¯­å¥</strong>å’Œ<strong>è¡¨è¾¾å¼</strong>ï¼Œè¿™æ˜¯ç†è§£ MoonBit çš„å…³é”®ã€‚</p>
<p><strong>è¡¨è¾¾å¼</strong>ï¼šä¼šäº§ç”Ÿä¸€ä¸ªå€¼ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>å€¼å­—é¢é‡ï¼ˆå¸ƒå°”å€¼ã€æ•°å­—ã€å­—ç¬¦ã€å­—ç¬¦ä¸²ã€æ•°ç»„ã€å…ƒç»„ã€ç»“æ„ä½“ï¼‰</li>
<li>ç®—æœ¯ã€é€»è¾‘æˆ–æ¯”è¾ƒæ“ä½œ</li>
<li>è®¿é—®æ•°ç»„å…ƒç´ ï¼ˆå¦‚ <code>a[0]</code>ï¼‰ã€ç»“æ„ä½“å­—æ®µï¼ˆå¦‚ <code>r.x</code>ï¼‰ã€å…ƒç»„ç»„ä»¶ï¼ˆå¦‚ <code>t.0</code>ï¼‰</li>
<li>å˜é‡å’Œæšä¸¾æ„é€ å™¨</li>
<li>åŒ¿åå‡½æ•°å®šä¹‰</li>
<li><code>match</code>ã€<code>if</code>ã€<code>loop</code> è¡¨è¾¾å¼ç­‰</li>
</ul>
<p><strong>è¯­å¥</strong>ï¼šæ‰§è¡ŒæŸäº›æ“ä½œä½†ä¸äº§ç”Ÿå€¼ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>å‘½åæœ¬åœ°å‡½æ•°å®šä¹‰</li>
<li>æœ¬åœ°å˜é‡ç»‘å®š</li>
<li>èµ‹å€¼</li>
<li><code>return</code> è¯­å¥</li>
<li>ä»»ä½•è¿”å›ç±»å‹ä¸º <code>Unit</code> çš„è¡¨è¾¾å¼</li>
</ul>
<p><strong>é‡è¦è§„åˆ™</strong>ï¼šåœ¨å‡½æ•°ä½“ä¸­ï¼Œåªæœ‰æœ€åä¸€ä¸ªå­å¥åº”è¯¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå®ƒä½œä¸ºè¿”å›å€¼ã€‚</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn foo() -&gt; Int {
  let x = 1  // è¯­å¥ï¼šå˜é‡ç»‘å®š
  x + 1      // è¡¨è¾¾å¼ï¼šä½œä¸ºè¿”å›å€¼
}
</code></pre>
<p><strong>é€šä¿—ç†è§£</strong>ï¼š</p>
<p>è¯­å¥å°±åƒåšäº‹æƒ…ï¼Œæ¯”å¦‚"æŠŠè‹¹æœæ”¾æ¡Œä¸Š"ï¼›è¡¨è¾¾å¼å°±åƒå›ç­”é—®é¢˜ï¼Œæ¯”å¦‚"æ¡Œä¸Šæœ‰å‡ ä¸ªè‹¹æœï¼Ÿç­”ï¼š3 ä¸ª"ã€‚</p>

<h3 data-id="heading-4">å˜é‡ç»‘å®š</h3>
<p>MoonBit æ”¯æŒä¸‰ç§å˜é‡ç»‘å®šæ–¹å¼ï¼š</p>
<h4 data-id="heading-5">ä¸å¯å˜å˜é‡ï¼ˆletï¼‰</h4>
<p>ä½¿ç”¨ <code>let</code> å£°æ˜çš„å˜é‡ä¸èƒ½è¢«é‡æ–°èµ‹å€¼ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn main {
  let x = 10
  // x = 20  // âŒ é”™è¯¯ï¼ä¸å¯å˜å˜é‡ä¸èƒ½é‡æ–°èµ‹å€¼
  println(x)
}
</code></pre>
<h4 data-id="heading-6">å¯å˜å˜é‡ï¼ˆlet mutï¼‰</h4>
<p>ä½¿ç”¨ <code>let mut</code> å£°æ˜çš„å˜é‡å¯ä»¥è¢«é‡æ–°èµ‹å€¼ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn main {
  let mut i = 10
  i = 20  // âœ… æ­£ç¡®ï¼å¯å˜å˜é‡å¯ä»¥é‡æ–°èµ‹å€¼
  println(i)
}
</code></pre>
<h4 data-id="heading-7">å¸¸é‡ï¼ˆconstï¼‰</h4>
<p>ä½¿ç”¨ <code>const</code> å£°æ˜çš„å¸¸é‡åªèƒ½åœ¨é¡¶å±‚å®šä¹‰ï¼Œä¸èƒ½åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">const ZERO = 0  // âœ… é¡¶å±‚å¸¸é‡

fn main {
  // const LOCAL = 1  // âŒ é”™è¯¯ï¼å¸¸é‡ä¸èƒ½åœ¨å‡½æ•°å†…å®šä¹‰
  println(ZERO)
}
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹</strong>ï¼š</p>
<ul>
<li>é¡¶å±‚å˜é‡ç»‘å®šéœ€è¦æ˜¾å¼ç±»å‹æ³¨é‡Šï¼ˆé™¤éä½¿ç”¨å­—ç¬¦ä¸²ã€å­—èŠ‚æˆ–æ•°å­—ç­‰å­—é¢é‡å®šä¹‰ï¼‰</li>
<li>é¡¶å±‚å˜é‡ä¸èƒ½æ˜¯å¯å˜çš„ï¼ˆå¦‚éœ€å¯å˜ï¼Œä½¿ç”¨ <code>Ref</code> ä»£æ›¿ï¼‰</li>
</ul>

<h3 data-id="heading-8">å‘½åçº¦å®š</h3>
<p>MoonBit æœ‰ä¸€å¥—æ¸…æ™°çš„å‘½åè§„èŒƒï¼š</p>




















<table><thead><tr><th>ç±»å‹</th><th>è§„åˆ™</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>å˜é‡ã€å‡½æ•°</td><td>å°å†™å­—æ¯å¼€å¤´ï¼Œå»ºè®® snake_case</td><td><code>my_var</code>ã€<code>calculate_sum</code></td></tr><tr><td>å¸¸é‡ã€ç±»å‹</td><td>å¤§å†™å­—æ¯å¼€å¤´ï¼Œå»ºè®® PascalCase æˆ– SCREAMING_SNAKE_CASE</td><td><code>MyType</code>ã€<code>MAX_SIZE</code></td></tr></tbody></table>
<h4 data-id="heading-9">å…³é”®å­—ï¼ˆä¸èƒ½ä½¿ç”¨ï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">as</span>, <span class="hljs-keyword">else</span>, <span class="hljs-keyword">extern</span>, <span class="hljs-keyword">fn</span>, fnalias, <span class="hljs-keyword">if</span>, <span class="hljs-keyword">let</span>, <span class="hljs-keyword">const</span>, <span class="hljs-keyword">match</span>, using,
<span class="hljs-keyword">mut</span>, <span class="hljs-keyword">type</span>, typealias, <span class="hljs-keyword">struct</span>, <span class="hljs-keyword">enum</span>, <span class="hljs-keyword">trait</span>, traitalias, derive,
<span class="hljs-keyword">while</span>, <span class="hljs-keyword">break</span>, <span class="hljs-keyword">continue</span>, import, <span class="hljs-keyword">return</span>, throw, raise, <span class="hljs-keyword">try</span>, catch,
<span class="hljs-keyword">pub</span>, <span class="hljs-keyword">priv</span>, readonly, <span class="hljs-literal">true</span>, <span class="hljs-literal">false</span>, _, test, <span class="hljs-keyword">loop</span>, <span class="hljs-keyword">for</span>, <span class="hljs-keyword">in</span>, <span class="hljs-keyword">impl</span>,
with, guard, <span class="hljs-keyword">async</span>, is, suberror, and, letrec, enumview, noraise, defer
</code></pre>
<h4 data-id="heading-10">ä¿ç•™å…³é”®å­—ï¼ˆä¼šå¼•å‘è­¦å‘Šï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust">module, <span class="hljs-keyword">move</span>, <span class="hljs-keyword">ref</span>, <span class="hljs-keyword">static</span>, <span class="hljs-keyword">super</span>, <span class="hljs-keyword">unsafe</span>, <span class="hljs-keyword">use</span>, <span class="hljs-keyword">where</span>, <span class="hljs-keyword">await</span>,
<span class="hljs-keyword">dyn</span>, <span class="hljs-keyword">abstract</span>, <span class="hljs-keyword">do</span>, <span class="hljs-keyword">final</span>, <span class="hljs-keyword">macro</span>, <span class="hljs-keyword">override</span>, <span class="hljs-keyword">typeof</span>, <span class="hljs-keyword">virtual</span>, <span class="hljs-keyword">yield</span>...
</code></pre>
<p><strong>é€šä¿—ç†è§£</strong>ï¼š</p>
<p>å‘½åè§„èŒƒå°±åƒç»™å­©å­å–åå­—ï¼Œæœ‰äº›åå­—ï¼ˆå…³é”®å­—ï¼‰æ˜¯è¢«è¯­è¨€"å ç”¨"çš„ï¼Œä½ ä¸èƒ½ç”¨ï¼›æœ‰äº›åå­—è™½ç„¶ç›®å‰å¯ä»¥ç”¨ï¼Œä½†å¯èƒ½å°†æ¥ä¼šè¢«å ç”¨ï¼ˆä¿ç•™å…³é”®å­—ï¼‰ã€‚</p>

<h3 data-id="heading-11">ç¨‹åºå…¥å£</h3>
<h4 data-id="heading-12">init å‡½æ•°</h4>
<p><code>init</code> å‡½æ•°æ˜¯ç‰¹æ®Šçš„åˆå§‹åŒ–å‡½æ•°ï¼š</p>
<ul>
<li>æ²¡æœ‰å‚æ•°åˆ—è¡¨ä¹Ÿæ²¡æœ‰è¿”å›ç±»å‹</li>
<li>åŒä¸€ä¸ªåŒ…ä¸­å¯ä»¥æœ‰å¤šä¸ª <code>init</code> å‡½æ•°</li>
<li>ä¸èƒ½è¢«æ˜¾å¼è°ƒç”¨æˆ–è¢«å…¶ä»–å‡½æ•°å¼•ç”¨</li>
<li>åœ¨åˆå§‹åŒ–åŒ…æ—¶ä¼šéšå¼è‡ªåŠ¨è°ƒç”¨</li>
</ul>
<pre><code class="hljs language-moonbit" lang="moonbit">fn init {
  let x = 1
  println(x)
}
</code></pre>
<h4 data-id="heading-13">main å‡½æ•°</h4>
<p><code>main</code> å‡½æ•°æ˜¯ç¨‹åºçš„ä¸»å…¥å£ï¼Œåœ¨åˆå§‹åŒ–é˜¶æ®µä¹‹åæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn main {
  let x = 2
  println(x)
}
</code></pre>
<p>è¿è¡Œä»¥ä¸Šä¸¤æ®µä»£ç ï¼Œè¾“å‡ºï¼š</p>
<pre><code class="hljs">1
2
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šåªæœ‰æ ‡è®°ä¸º <code>is-main: true</code> çš„åŒ…æ‰èƒ½å®šä¹‰ <code>main</code> å‡½æ•°ã€‚</p>
<h4 data-id="heading-14">test å—</h4>
<p><code>test</code> å—ç”¨äºå®šä¹‰å†…è”æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">test "test_name" {
  assert_eq(1 + 1, 2)
  assert_eq(2 + 2, 4)
  inspect([1, 2, 3], content="[1, 2, 3]")
}
</code></pre>
<p><strong>é€šä¿—ç†è§£</strong>ï¼š</p>
<ul>
<li><code>init</code> å°±åƒå¼€é¤å…å‰çš„å‡†å¤‡å·¥ä½œï¼ˆå¤‡èœã€æ‘†æ¡Œå­ï¼‰</li>
<li><code>main</code> å°±åƒæ­£å¼å¼€é—¨è¥ä¸š</li>
<li><code>test</code> å°±åƒå“æ§æ£€æŸ¥ï¼Œç¡®ä¿èœå“è´¨é‡</li>
</ul>

<h3 data-id="heading-15">å†…ç½®æ•°æ®ç±»å‹</h3>
<p>MoonBit æä¾›äº†ä¸°å¯Œçš„å†…ç½®æ•°æ®ç±»å‹ï¼š</p>
<h4 data-id="heading-16">Unit ç±»å‹</h4>
<p><code>Unit</code> è¡¨ç¤ºæ²¡æœ‰æœ‰æ„ä¹‰çš„å€¼ï¼Œç±»ä¼¼äº C/C++ çš„ <code>void</code>ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªçœŸæ­£çš„ç±»å‹ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn print_hello() -&gt; Unit {
  println("Hello, world!")
}
</code></pre>
<h4 data-id="heading-17">å¸ƒå°”å€¼</h4>
<p>å¸ƒå°”ç±»å‹æœ‰ä¸¤ä¸ªå€¼ï¼š<code>true</code> å’Œ <code>false</code>ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">let a = true
let b = false
let c = a &amp;&amp; b    // é€»è¾‘ä¸
let d = a || b    // é€»è¾‘æˆ–
let e = not(a)    // é€»è¾‘é
</code></pre>
<h4 data-id="heading-18">æ•°å­—ç±»å‹</h4>
<p>MoonBit æ”¯æŒå¤šç§æ•°å­—ç±»å‹ï¼š</p>























































<table><thead><tr><th>ç±»å‹</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>Int16</code></td><td>16 ä½æœ‰ç¬¦å·æ•´æ•°</td><td><code>(42 : Int16)</code></td></tr><tr><td><code>Int</code></td><td>32 ä½æœ‰ç¬¦å·æ•´æ•°</td><td><code>42</code></td></tr><tr><td><code>Int64</code></td><td>64 ä½æœ‰ç¬¦å·æ•´æ•°</td><td><code>1000L</code></td></tr><tr><td><code>UInt16</code></td><td>16 ä½æ— ç¬¦å·æ•´æ•°</td><td><code>(14 : UInt16)</code></td></tr><tr><td><code>UInt</code></td><td>32 ä½æ— ç¬¦å·æ•´æ•°</td><td><code>14U</code></td></tr><tr><td><code>UInt64</code></td><td>64 ä½æ— ç¬¦å·æ•´æ•°</td><td><code>14UL</code></td></tr><tr><td><code>Double</code></td><td>64 ä½æµ®ç‚¹æ•°</td><td><code>3.14</code></td></tr><tr><td><code>Float</code></td><td>32 ä½æµ®ç‚¹æ•°</td><td><code>(3.14 : Float)</code></td></tr><tr><td><code>BigInt</code></td><td>å¤§æ•´æ•°</td><td><code>10000000000000000000000N</code></td></tr></tbody></table>
<p><strong>æ•°å­—å­—é¢é‡æ”¯æŒå¤šç§è¿›åˆ¶</strong>ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">let decimal = 1_000_000      // åè¿›åˆ¶ï¼Œæ”¯æŒä¸‹åˆ’çº¿åˆ†éš”
let binary = 0b110010        // äºŒè¿›åˆ¶
let octal = 0o1234           // å…«è¿›åˆ¶
let hex = 0xA_B_C            // åå…­è¿›åˆ¶
</code></pre>
<p><strong>ç±»å‹è‡ªåŠ¨é‡è½½</strong>ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">let int : Int = 42
let double : Double = 42     // è‡ªåŠ¨è½¬æ¢ä¸º 42.0
let bigint : BigInt = 42     // è‡ªåŠ¨è½¬æ¢ä¸ºå¤§æ•´æ•°
</code></pre>

<h4 data-id="heading-19">å­—ç¬¦ä¸²</h4>
<p>å­—ç¬¦ä¸²åŒ…å«ä¸€ç³»åˆ— UTF-16 ç ç‚¹ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">let a = "å…”rabbit"
println(a[0].to_char())  // Some('å…”')
println(a[1].to_char())  // Some('r')
</code></pre>
<p><strong>å¤šè¡Œå­—ç¬¦ä¸²</strong>ï¼š</p>
<p>ä½¿ç”¨ <code>#|</code> å‰ç¼€ä¿ç•™åŸå§‹å­—ç¬¦ä¸²ï¼Œä½¿ç”¨ <code>$|</code> å‰ç¼€æ”¯æŒè½¬ä¹‰å’Œæ’å€¼ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">let lang = "MoonBit"
let b =
  #| Hello
  #| ---
  $| \{lang}\n
  #| ---
</code></pre>
<p><strong>å­—ç¬¦ä¸²æ’å€¼</strong>ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">let x = 42
println("The answer is \{x}")  // The answer is 42
</code></pre>
<p><strong>è½¬ä¹‰åºåˆ—</strong>ï¼š</p>





































<table><thead><tr><th>è½¬ä¹‰åºåˆ—</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>\n</code></td><td>æ¢è¡Œ</td></tr><tr><td><code>\r</code></td><td>å›è½¦</td></tr><tr><td><code>\t</code></td><td>åˆ¶è¡¨ç¬¦</td></tr><tr><td><code>\b</code></td><td>é€€æ ¼</td></tr><tr><td><code>\\</code></td><td>åæ–œæ </td></tr><tr><td><code>\u5154</code></td><td>Unicode è½¬ä¹‰ï¼ˆ4 ä½ï¼‰</td></tr><tr><td><code>\u{1F600}</code></td><td>Unicode è½¬ä¹‰ï¼ˆå¯å˜é•¿ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-20">å­—ç¬¦</h4>
<p><code>Char</code> è¡¨ç¤ºä¸€ä¸ª Unicode ç ç‚¹ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">let a : Char = 'A'
let b = 'å…”'
let zero = '\u0030'  // '0'
let emoji = '\u{1F600}'  // ğŸ˜€
</code></pre>
<p>å½“æœŸæœ›ç±»å‹æ˜¯ <code>Int</code> æ—¶ï¼Œå­—ç¬¦å­—é¢é‡å¯ä»¥é‡è½½ä¸º <code>Int</code> ç±»å‹ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">let s : String = "hello"
let diff = s[0] - 'a'  // å­—ç¬¦ 'a' è¢«é‡è½½ä¸º Int
</code></pre>
<h4 data-id="heading-21">å­—èŠ‚</h4>
<p>å­—èŠ‚å­—é¢é‡æ˜¯ä¸€ä¸ª ASCII å­—ç¬¦æˆ–è½¬ä¹‰åºåˆ—ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">let b1 : Byte = b'a'
let b2 = b'\xff'

// å­—èŠ‚åºåˆ—
let bs : Bytes = b"abcd"
</code></pre>

<h4 data-id="heading-22">å…ƒç»„</h4>
<p>å…ƒç»„æ˜¯ä½¿ç”¨åœ†æ‹¬å·æ„é€ çš„æœ‰é™å€¼é›†åˆï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn pack(a : Bool, b : Int, c : String) -&gt; (Bool, Int, String) {
  (a, b, c)
}

fn main {
  let quad = pack(false, 100, "text")
  let (bool_val, int_val, str) = quad  // è§£æ„
  println("\{bool_val} \{int_val} \{str}")

  // ä¹Ÿå¯ä»¥é€šè¿‡ç´¢å¼•è®¿é—®
  let x = quad.0  // false
  let y = quad.1  // 100
}
</code></pre>
<h4 data-id="heading-23">æ•°ç»„</h4>
<p>æ•°ç»„æ˜¯ä½¿ç”¨æ–¹æ‹¬å·æ„é€ çš„æœ‰é™å€¼åºåˆ—ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">let numbers = [1, 2, 3, 4]

fn main {
  let a = numbers[2]    // è®¿é—®ç¬¬3ä¸ªå…ƒç´ 
  numbers[3] = 5        // ä¿®æ”¹ç¬¬4ä¸ªå…ƒç´ 
  println(a + numbers[3])  // 8
}
</code></pre>
<p><strong>ä¸¤ç§æ•°ç»„ç±»å‹</strong>ï¼š</p>
<ul>
<li><code>Array[T]</code>ï¼šå¯å¢é•¿çš„æ•°ç»„</li>
<li><code>FixedArray[T]</code>ï¼šå›ºå®šå¤§å°çš„æ•°ç»„</li>
</ul>
<p><strong>ArrayViewï¼ˆæ•°ç»„è§†å›¾ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">let xs = [0, 1, 2, 3, 4, 5]
let s1 = xs[2:]      // [2, 3, 4, 5]
let s2 = xs[:4]      // [0, 1, 2, 3]
let s3 = xs[2:5]     // [2, 3, 4]
</code></pre>
<h4 data-id="heading-24">Mapï¼ˆæ˜ å°„ï¼‰</h4>
<pre><code class="hljs language-moonbit" lang="moonbit">let map : Map[String, Int] = { "x": 1, "y": 2, "z": 3 }
</code></pre>
<h4 data-id="heading-25">Option å’Œ Result</h4>
<p>ç”¨äºè¡¨ç¤ºå¯èƒ½çš„é”™è¯¯æˆ–å¤±è´¥ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">let a : Int? = None           // æ²¡æœ‰å€¼
let b : Option[Int] = Some(42)  // æœ‰å€¼

let c : Result[Int, String] = Ok(42)       // æˆåŠŸ
let d : Result[Int, String] = Err("error") // å¤±è´¥
</code></pre>
<h4 data-id="heading-26">Refï¼ˆå¯å˜å¼•ç”¨ï¼‰</h4>
<p><code>Ref[T]</code> æ˜¯åŒ…å«ç±»å‹ <code>T</code> çš„å€¼çš„å¯å˜å¼•ç”¨ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">let a : Ref[Int] = { val: 100 }

fn main {
  a.val = 200
  println(a.val)  // 200
}
</code></pre>

<h3 data-id="heading-27">å‡½æ•°å®šä¹‰</h3>
<h4 data-id="heading-28">é¡¶å±‚å‡½æ•°</h4>
<p>ä½¿ç”¨ <code>fn</code> å…³é”®å­—å®šä¹‰é¡¶å±‚å‡½æ•°ï¼Œéœ€è¦æ˜¾å¼ç±»å‹æ³¨é‡Šï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn add3(x : Int, y : Int, z : Int) -&gt; Int {
  x + y + z
}
</code></pre>
<h4 data-id="heading-29">å±€éƒ¨å‡½æ•°</h4>
<p>å±€éƒ¨å‡½æ•°å¯ä»¥æ˜¯å‘½åçš„æˆ–åŒ¿åçš„ï¼Œç±»å‹å¯ä»¥è‡ªåŠ¨æ¨æ–­ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn main {
  // å‘½åå±€éƒ¨å‡½æ•°
  fn inc(x) {
    x + 1
  }

  // åŒ¿åå‡½æ•°
  let double = fn(x) { x * 2 }

  // ç®­å¤´å‡½æ•°ï¼ˆæ›´ç®€æ´ï¼‰
  [1, 2, 3].each(x =&gt; println(x * x))

  println(inc(5))     // 6
  println(double(5))  // 10
}
</code></pre>
<h4 data-id="heading-30">å‡½æ•°åº”ç”¨</h4>
<pre><code class="hljs language-moonbit" lang="moonbit">add3(1, 2, 7)  // 10

// ä»»ä½•æ±‚å€¼ä¸ºå‡½æ•°å€¼çš„è¡¨è¾¾å¼éƒ½æ˜¯å¯åº”ç”¨çš„
let w = (if true { fn(x) { x + 1 } } else { fn(x) { x + 2 } })(3)
// w = 4
</code></pre>
<h4 data-id="heading-31">éƒ¨åˆ†åº”ç”¨</h4>
<p>ä½¿ç”¨ <code>_</code> æ“ä½œç¬¦è¿›è¡Œéƒ¨åˆ†åº”ç”¨ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn add(x : Int, y : Int) -&gt; Int {
  x + y
}

fn main {
  let add10 = add(10, _)  // åˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°
  println(add10(5))   // 15
  println(add10(10))  // 20
}
</code></pre>

<h4 data-id="heading-32">å¸¦æ ‡ç­¾çš„å‚æ•°</h4>
<pre><code class="hljs language-moonbit" lang="moonbit">fn labelled(arg1~ : Int, arg2~ : Int) -&gt; Int {
  arg1 + arg2
}

fn main {
  let arg1 = 1
  // å¯ä»¥ä½¿ç”¨ label=value æˆ– label~ ç®€å†™
  println(labelled(arg2=2, arg1~))  // 3
}
</code></pre>
<h4 data-id="heading-33">å¯é€‰å‚æ•°</h4>
<pre><code class="hljs language-moonbit" lang="moonbit">fn optional(opt? : Int = 42) -&gt; Int {
  opt
}

fn main {
  println(optional())       // 42ï¼ˆä½¿ç”¨é»˜è®¤å€¼ï¼‰
  println(optional(opt=0))  // 0
}
</code></pre>
<h4 data-id="heading-34">æ²¡æœ‰é»˜è®¤å€¼çš„å¯é€‰å‚æ•°</h4>
<p>æ²¡æœ‰é»˜è®¤å€¼çš„å¯é€‰å‚æ•°ç±»å‹ä¸º <code>T?</code>ï¼Œé»˜è®¤å€¼ä¸º <code>None</code>ã€‚è°ƒç”¨æ—¶ MoonBit ä¼šè‡ªåŠ¨ç”¨ <code>Some</code> åŒ…è£…ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn new_image(width? : Int, height? : Int) -&gt; Unit {
  if width is Some(w) {
    println("width: \{w}")
  } else {
    println("no width")
  }
}

fn main {
  new_image(width=1920, height=1080)
}
</code></pre>
<p>è½¬å‘å¯é€‰å‚æ•°æ—¶ï¼Œä½¿ç”¨ <code>label?=value</code> è¯­æ³•ï¼Œ<code>label?</code> æ˜¯ <code>label?=label</code> çš„ç®€å†™ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn fixed_width_image(height? : Int) -&gt; Unit {
  new_image(width=1920, height?)  // è½¬å‘ height å‚æ•°
}
</code></pre>

<h3 data-id="heading-35">æ§åˆ¶ç»“æ„</h3>
<h4 data-id="heading-36">æ¡ä»¶è¡¨è¾¾å¼ï¼ˆifï¼‰</h4>
<pre><code class="hljs language-moonbit" lang="moonbit">let initial = if size &lt; 1 { 1 } else { size }
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šæ¡ä»¶è¡¨è¾¾å¼åœ¨ MoonBit ä¸­å§‹ç»ˆè¿”å›ä¸€ä¸ªå€¼ï¼Œç»“æœå’Œ else å­å¥çš„è¿”å›å€¼å¿…é¡»æ˜¯ç›¸åŒçš„ç±»å‹ã€‚</p>
<h4 data-id="heading-37">åŒ¹é…è¡¨è¾¾å¼ï¼ˆmatchï¼‰</h4>
<pre><code class="hljs language-moonbit" lang="moonbit">fn decide_sport(weather : String) -&gt; String {
  match weather {
    "sunny" =&gt; "tennis"
    "rainy" =&gt; "swimming"
    _ =&gt; "unknown"  // é»˜è®¤æƒ…å†µ
  }
}
</code></pre>
<h4 data-id="heading-38">å«è¯­å¥ï¼ˆguardï¼‰</h4>
<p>ç”¨äºæ£€æŸ¥æŒ‡å®šçš„ä¸å˜é‡ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn guarded_get(array : Array[Int], index : Int) -&gt; Int? {
  guard index &gt;= 0 &amp;&amp; index &lt; array.length() else { None }
  Some(array[index])
}
</code></pre>
<p>ç»“åˆ <code>is</code> è¡¨è¾¾å¼ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn getProcessedText(resources : Map[String, Resource], path : String) -&gt; String {
  guard resources.get(path) is Some(resource) else {
    fail("\{path} not found")
  }
  guard resource is PlainText(text) else {
    fail("\{path} is not plain text")
  }
  process(text)
}
</code></pre>

<h4 data-id="heading-39">While å¾ªç¯</h4>
<pre><code class="hljs language-moonbit" lang="moonbit">fn main {
  let mut i = 5
  while i &gt; 0 {
    println(i)
    i = i - 1
  }
}
// è¾“å‡º: 5 4 3 2 1
</code></pre>
<p>æ”¯æŒ <code>break</code> å’Œ <code>continue</code>ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn main {
  let mut i = 5
  while i &gt; 0 {
    i = i - 1
    if i == 4 { continue }  // è·³è¿‡æœ¬æ¬¡
    if i == 1 { break }     // é€€å‡ºå¾ªç¯
    println(i)
  }
}
// è¾“å‡º: 3 2
</code></pre>
<p>æ”¯æŒ <code>else</code> å­å¥ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn main {
  let mut i = 2
  while i &gt; 0 {
    println(i)
    i = i - 1
  } else {
    println("å¾ªç¯ç»“æŸï¼Œi = \{i}")
  }
}
// è¾“å‡º: 2 1 å¾ªç¯ç»“æŸï¼Œi = 0
</code></pre>
<h4 data-id="heading-40">For å¾ªç¯</h4>
<p>C é£æ ¼çš„ for å¾ªç¯ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn main {
  for i = 0; i &lt; 5; i = i + 1 {
    println(i)
  }
}
// è¾“å‡º: 0 1 2 3 4
</code></pre>
<p>å¤šå˜é‡ç»‘å®šï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">for i = 0, j = 0; i + j &lt; 100; i = i + 1, j = j + 1 {
  println(i)
}
</code></pre>

<h4 data-id="heading-41">for..in å¾ªç¯</h4>
<p>éå†æ•°æ®ç»“æ„çš„ä¾¿æ·è¯­æ³•ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">for x in [1, 2, 3] {
  println(x)
}
</code></pre>
<p>éå†æ•´æ•°èŒƒå›´ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">for j in 0..&lt;10 {   // 0 åˆ° 9
  println(j)
}

for l in 0..=10 {   // 0 åˆ° 10ï¼ˆåŒ…å«ï¼‰
  println(l)
}
</code></pre>
<p>éå† Mapï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">for k, v in { "x": 1, "y": 2, "z": 3 } {
  println("\{k}: \{v}")
}
</code></pre>
<p>éå†æ•°ç»„ï¼ˆå¸¦ç´¢å¼•ï¼‰ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">for index, elem in [4, 5, 6] {
  println("ç¬¬ \{index + 1} ä¸ªå…ƒç´ æ˜¯ \{elem}")
}
</code></pre>
<h4 data-id="heading-42">å‡½æ•°å¼å¾ªç¯ï¼ˆloopï¼‰</h4>
<pre><code class="hljs language-moonbit" lang="moonbit">fn sum(xs : @list.List[Int]) -&gt; Int {
  loop (xs, 0) {
    (Empty, acc) =&gt; break acc
    (More(x, tail=rest), acc) =&gt; continue (rest, x + acc)
  }
}
</code></pre>
<h4 data-id="heading-43">defer è¡¨è¾¾å¼</h4>
<p>ç”¨äºå¯é çš„èµ„æºé‡Šæ”¾ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn main {
  defer println("é‡Šæ”¾èµ„æº")
  println("ä½¿ç”¨èµ„æº")
}
// è¾“å‡ºï¼šä½¿ç”¨èµ„æº
//       é‡Šæ”¾èµ„æº
</code></pre>
<p>è¿ç»­çš„ <code>defer</code> ä»¥å€’åºæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn main {
  defer println("ç¬¬ä¸€å¤„ defer")
  defer println("ç¬¬äºŒå¤„ defer")
  println("åšäº›äº‹æƒ…")
}
// è¾“å‡ºï¼šåšäº›äº‹æƒ…
//       ç¬¬äºŒå¤„ defer
//       ç¬¬ä¸€å¤„ defer
</code></pre>

<h3 data-id="heading-44">è‡ªå®šä¹‰æ•°æ®ç±»å‹</h3>
<h4 data-id="heading-45">ç»“æ„ä½“ï¼ˆstructï¼‰</h4>
<pre><code class="hljs language-moonbit" lang="moonbit">struct User {
  id : Int
  name : String
  mut email : String  // å¯å˜å­—æ®µ
}

fn main {
  let u = User::{ id: 0, name: "John Doe", email: "john@doe.com" }
  u.email = "john@doe.name"  // ä¿®æ”¹å¯å˜å­—æ®µ
  println(u.name)
}
</code></pre>
<p><strong>ç®€å†™æ„é€ </strong>ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">let name = "john"
let email = "john@doe.com"
let u = { id: 0, name, email }  // å­—æ®µåä¸å˜é‡åç›¸åŒæ—¶å¯ç®€å†™
</code></pre>
<p><strong>ç»“æ„ä½“æ›´æ–°è¯­æ³•</strong>ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">let user = { id: 0, name: "John", email: "john@doe.com" }
let updated = { ..user, email: "new@email.com" }  // åªæ›´æ–° email
</code></pre>
<h4 data-id="heading-46">æšä¸¾ï¼ˆenumï¼‰</h4>
<pre><code class="hljs language-moonbit" lang="moonbit">enum Relation {
  Smaller
  Greater
  Equal
}

fn compare_int(x : Int, y : Int) -&gt; Relation {
  if x &lt; y { Smaller }
  else if x &gt; y { Greater }
  else { Equal }
}
</code></pre>
<p><strong>å¸¦æ•°æ®çš„æšä¸¾</strong>ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">enum Lst {
  Nil
  Cons(Int, Lst)  // æºå¸¦é¢å¤–æ•°æ®
}

fn is_singleton(l : Lst) -&gt; Bool {
  match l {
    Cons(_, Nil) =&gt; true
    _ =&gt; false
  }
}
</code></pre>
<p><strong>å¸¦æ ‡ç­¾å‚æ•°çš„æ„é€ å™¨</strong>ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">enum Point {
  Point2D(x~ : Int, y~ : Int)
}

fn main {
  let p = Point2D(x=10, y=20)
  match p {
    Point2D(x~, y~) =&gt; println("x=\{x}, y=\{y}")
  }
}
</code></pre>
<h4 data-id="heading-47">å…ƒç»„ç»“æ„ä½“</h4>
<pre><code class="hljs language-moonbit" lang="moonbit">struct UserId(Int)
struct UserInfo(UserId, String)

fn main {
  let id = UserId(1)
  let info = UserInfo(id, "John")

  // é€šè¿‡ç´¢å¼•è®¿é—®
  println(id.0)      // 1
  println(info.1)    // John
}
</code></pre>
<h4 data-id="heading-48">ç±»å‹åˆ«å</h4>
<pre><code class="hljs language-moonbit" lang="moonbit">pub type MyIndex = Int
pub type MyMap = Map[Int, String]
</code></pre>

<h3 data-id="heading-49">æ¨¡å¼åŒ¹é…</h3>
<h4 data-id="heading-50">ç®€å•æ¨¡å¼</h4>
<pre><code class="hljs language-moonbit" lang="moonbit">const ONE = 1

fn match_int(x : Int) -&gt; Unit {
  match x {
    0 =&gt; println("zero")
    ONE =&gt; println("one")
    value =&gt; println(value)  // ç»‘å®šåˆ°å˜é‡
  }
}
</code></pre>
<p>ä½¿ç”¨ <code>_</code> ä½œä¸ºé€šé…ç¬¦ï¼Œ<code>..</code> å¿½ç•¥å‰©ä½™å­—æ®µï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">struct Point3D { x : Int, y : Int, z : Int }

fn match_point(p : Point3D) -&gt; Unit {
  match p {
    { x: 0, .. } =&gt; println("åœ¨ yz å¹³é¢ä¸Š")
    _ =&gt; println("ä¸åœ¨ yz å¹³é¢ä¸Š")
  }
}
</code></pre>
<h4 data-id="heading-51">æ•°ç»„æ¨¡å¼</h4>
<pre><code class="hljs language-moonbit" lang="moonbit">fn match_array(arr : Array[Int]) -&gt; Unit {
  match arr {
    [] =&gt; println("ç©ºæ•°ç»„")
    [a, b, c] =&gt; println("ä¸‰å…ƒç´ : \{a}, \{b}, \{c}")
    [a, .. rest, b] =&gt; println("é¦–: \{a}, å°¾: \{b}")
  }
}
</code></pre>
<h4 data-id="heading-52">èŒƒå›´æ¨¡å¼</h4>
<pre><code class="hljs language-moonbit" lang="moonbit">fn classify_char(c : Char) -&gt; String {
  match c {
    'a'..='z' =&gt; "lowercase"
    'A'..='Z' =&gt; "uppercase"
    '0'..='9' =&gt; "digit"
    _ =&gt; "other"
  }
}
</code></pre>
<h4 data-id="heading-53">Map æ¨¡å¼</h4>
<pre><code class="hljs language-moonbit" lang="moonbit">fn match_map(map : Map[String, Int]) -&gt; Unit {
  match map {
    { "b": _, .. } =&gt; println("åŒ…å« key 'b'")
    { "a": x, .. } =&gt; println("a çš„å€¼æ˜¯ \{x}")
    _ =&gt; println("å…¶ä»–æƒ…å†µ")
  }
}
</code></pre>
<h4 data-id="heading-54">å®ˆå«æ¡ä»¶</h4>
<pre><code class="hljs language-moonbit" lang="moonbit">fn guard_example(x : Int?) -&gt; Int {
  match x {
    Some(a) if a &gt;= 0 =&gt; a
    Some(b) =&gt; -b
    None =&gt; -1
  }
}
</code></pre>

<h3 data-id="heading-55">æ³›å‹</h3>
<p>æ³›å‹åœ¨é¡¶å±‚å‡½æ•°å’Œæ•°æ®ç±»å‹å®šä¹‰ä¸­å—æ”¯æŒï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">enum List[T] {
  Nil
  Cons(T, List[T])
}

fn[S, T] List::map(self : List[S], f : (S) -&gt; T) -&gt; List[T] {
  match self {
    Nil =&gt; Nil
    Cons(x, xs) =&gt; Cons(f(x), xs.map(f))
  }
}

fn[S, T] List::reduce(self : List[S], op : (T, S) -&gt; T, init : T) -&gt; T {
  match self {
    Nil =&gt; init
    Cons(x, xs) =&gt; xs.reduce(op, op(init, x))
  }
}
</code></pre>

<h3 data-id="heading-56">ç‰¹æ®Šè¯­æ³•</h3>
<h4 data-id="heading-57">ç®¡é“æ“ä½œç¬¦ï¼ˆ|&gt;ï¼‰</h4>
<pre><code class="hljs language-moonbit" lang="moonbit">5 |&gt; ignore                    // ç­‰ä»·äº ignore(5)
[] |&gt; Array::push(5)           // ç­‰ä»·äº Array::push([], 5)
1 |&gt; add(5) |&gt; ignore          // é“¾å¼è°ƒç”¨
</code></pre>
<h4 data-id="heading-58">çº§è”è¿ç®—ç¬¦ï¼ˆ..ï¼‰</h4>
<p>ç”¨äºè¿ç»­å¯¹åŒä¸€å€¼æ‰§è¡Œå¤šä¸ªæ“ä½œï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">let result = StringBuilder::new()
  ..write_char('a')
  ..write_char('b')
  ..write_string("cdef")
  .to_string()
</code></pre>
<h4 data-id="heading-59">is è¡¨è¾¾å¼</h4>
<p>æµ‹è¯•å€¼æ˜¯å¦ç¬¦åˆç‰¹å®šæ¨¡å¼ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn is_none[T](x : T?) -&gt; Bool {
  x is None
}

fn start_with_lower(s : String) -&gt; Bool {
  s is ['a'..='z', ..]
}

// åœ¨ if ä¸­ä½¿ç”¨
fn process(x : Array[Int?]) -&gt; Unit {
  if x is [v, ..] &amp;&amp; v is Some(i) &amp;&amp; i is (0..=10) {
    println("åŒ¹é…æˆåŠŸï¼š\{i}")
  }
}
</code></pre>
<h4 data-id="heading-60">å±•å¼€è¿ç®—ç¬¦ï¼ˆ..ï¼‰</h4>
<p>åœ¨æ„é€ æ•°ç»„æ—¶å±•å¼€å…ƒç´ åºåˆ—ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">let a1 = [1, 2, 3]
let a2 = [4, 5, 6]
let combined : Array[Int] = [..a1, ..a2, 7, 8]
// [1, 2, 3, 4, 5, 6, 7, 8]
</code></pre>
<h4 data-id="heading-61">TODO è¯­æ³•ï¼ˆ...ï¼‰</h4>
<p>ç”¨äºæ ‡è®°å°šæœªå®ç°çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn todo_func() -&gt; Int {
  ...  // å ä½ç¬¦ï¼Œè¡¨ç¤ºå¾…å®ç°
}
</code></pre>

<h3 data-id="heading-62">è¿­ä»£å™¨</h3>
<p>MoonBit å†…ç½®äº† <code>Iter[T]</code> ç±»å‹ï¼Œæ˜¯ä¸€ç§å†…éƒ¨è¿­ä»£å™¨ï¼š</p>
<pre><code class="hljs language-moonbit" lang="moonbit">fn filter_even(l : Array[Int]) -&gt; Array[Int] {
  l.iter()
    .filter(x =&gt; (x &amp; 1) == 0)
    .collect()
}

fn fact(n : Int) -&gt; Int {
  (1).until(n).fold(Int::mul, init=1)
}
</code></pre>
<p>å¸¸ç”¨æ–¹æ³•ï¼š</p>
<ul>
<li><code>each</code>ï¼šéå†æ¯ä¸ªå…ƒç´ </li>
<li><code>fold</code>ï¼šæŠ˜å æ“ä½œ</li>
<li><code>collect</code>ï¼šæ”¶é›†åˆ°æ•°ç»„</li>
<li><code>filter</code>ï¼šè¿‡æ»¤å…ƒç´ </li>
<li><code>map</code>ï¼šè½¬æ¢å…ƒç´ </li>
<li><code>concat</code>ï¼šåˆå¹¶ä¸¤ä¸ªè¿­ä»£å™¨</li>
</ul>
<p><strong>ä¼˜åŠ¿</strong>ï¼š<code>filter</code>ã€<code>map</code> ç­‰æ–¹æ³•æ˜¯æƒ°æ€§çš„ï¼Œä¸ä¼šä¸ºä¸­é—´å€¼åˆ†é…å†…å­˜ã€‚</p>

<h3 data-id="heading-63">æ€»ç»“</h3>
<p>æœ¬æ–‡ä»‹ç»äº† MoonBit è¯­è¨€çš„åŸºç¡€è¯­æ³•ï¼ŒåŒ…æ‹¬ï¼š</p>













































<table><thead><tr><th>æ¦‚å¿µ</th><th>è¦ç‚¹</th></tr></thead><tbody><tr><td>ç¨‹åºç»“æ„</td><td>ç”±ç±»å‹å®šä¹‰ã€å‡½æ•°å®šä¹‰ã€å˜é‡ç»‘å®šã€init/main/test ç»„æˆ</td></tr><tr><td>å˜é‡ç»‘å®š</td><td><code>let</code>ï¼ˆä¸å¯å˜ï¼‰ã€<code>let mut</code>ï¼ˆå¯å˜ï¼‰ã€<code>const</code>ï¼ˆå¸¸é‡ï¼‰</td></tr><tr><td>æ•°æ®ç±»å‹</td><td>Unitã€å¸ƒå°”ã€æ•°å­—ã€å­—ç¬¦ä¸²ã€æ•°ç»„ã€å…ƒç»„ã€Mapã€Optionã€Result ç­‰</td></tr><tr><td>å‡½æ•°</td><td>é¡¶å±‚å‡½æ•°ã€å±€éƒ¨å‡½æ•°ã€åŒ¿åå‡½æ•°ã€æ ‡ç­¾å‚æ•°ã€å¯é€‰å‚æ•°</td></tr><tr><td>æ§åˆ¶æµ</td><td>ifã€matchã€guardã€whileã€forã€for..inã€loopã€defer</td></tr><tr><td>è‡ªå®šä¹‰ç±»å‹</td><td>structã€enumã€å…ƒç»„ç»“æ„ä½“ã€ç±»å‹åˆ«å</td></tr><tr><td>æ¨¡å¼åŒ¹é…</td><td>ç®€å•æ¨¡å¼ã€æ•°ç»„æ¨¡å¼ã€èŒƒå›´æ¨¡å¼ã€Map æ¨¡å¼ã€å®ˆå«æ¡ä»¶</td></tr><tr><td>æ³›å‹</td><td>ç±»å‹å‚æ•°åŒ–çš„å‡½æ•°å’Œæ•°æ®ç±»å‹</td></tr><tr><td>ç‰¹æ®Šè¯­æ³•</td><td>ç®¡é“ <code>|&gt;</code>ã€çº§è” <code>..</code>ã€is è¡¨è¾¾å¼ã€å±•å¼€è¿ç®—ç¬¦</td></tr></tbody></table>
<p>MoonBit èåˆäº†å‡½æ•°å¼å’Œå‘½ä»¤å¼ç¼–ç¨‹çš„ä¼˜ç‚¹ï¼Œè¯­æ³•ç®€æ´ä¼˜é›…ï¼Œç±»å‹ç³»ç»Ÿå¼ºå¤§ã€‚æŒæ¡è¿™äº›åŸºç¡€è¯­æ³•åï¼Œä½ å°±å¯ä»¥å¼€å§‹ç¼–å†™çœŸæ­£çš„ MoonBit ç¨‹åºäº†ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æŠ€æœ¯å¹²è´§ä¸¨AI å¤§æ¨¡å‹å¾®è°ƒåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿä¸€ç¯‡é€šä¿—æ–‡å¸®ä½ å¼„æ˜ç™½]]></title>    <link>https://juejin.cn/post/7578780780027658249</link>    <guid>https://juejin.cn/post/7578780780027658249</guid>    <pubDate>2025-12-02T05:47:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578780780027658249" data-draft-id="7578803491822207003" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æŠ€æœ¯å¹²è´§ä¸¨AI å¤§æ¨¡å‹å¾®è°ƒåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿä¸€ç¯‡é€šä¿—æ–‡å¸®ä½ å¼„æ˜ç™½"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-02T05:47:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æŠ€æœ¯å¹²è´§ä¸¨AI å¤§æ¨¡å‹å¾®è°ƒåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿä¸€ç¯‡é€šä¿—æ–‡å¸®ä½ å¼„æ˜ç™½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T05:47:19.000Z" title="Tue Dec 02 2025 05:47:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p><strong>ä»€ä¹ˆæ˜¯å¾®è°ƒ?</strong></p>
<p><strong>å¾®è°ƒå°±æ˜¯åœ¨å·²ç»è®­ç»ƒå¥½çš„å¤§æ¨¡å‹åŸºç¡€ä¸Šï¼Œç”¨ä½ è‡ªå·±çš„æ•°æ®ç»§ç»­è®­ç»ƒï¼Œè®©æ¨¡å‹æ›´ç¬¦åˆä½ çš„ç‰¹å®šéœ€æ±‚ã€‚</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3890544d45ef488dad986143cfedd92d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259238&amp;x-signature=W21vM7d42eiUf3tsIP%2FzRPzCoiQ%3D" alt="" loading="lazy"/></p>
<p>CPT(ContinualPre-Training)ç»§ç»­é¢„è®­ç»ƒæœ€åŸºç¡€çš„å¾®è°ƒæ–¹å¼ã€‚ä½ æ‹¿åˆ°ä¸€ä¸ªé¢„è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œç„¶åç”¨å¤§é‡æ— æ ‡ç­¾çš„æ–‡æœ¬æ•°æ®ç»§ç»­è®­ç»ƒå®ƒã€‚</p>
<p>SFT(Supervised Fine-Tuning)ç›‘ç£å¾®è°ƒæœ€å¸¸ç”¨çš„å¾®è°ƒæ–¹å¼ã€‚ä½ å‡†å¤‡å¥½é—®é¢˜-ç­”æ¡ˆå¯¹ï¼Œæ•™æ¨¡å‹å¦‚ä½•å›ç­”ç‰¹å®šç±»å‹çš„é—®é¢˜ã€‚</p>
<p>DPO(Direct Preference Optimization)åå¥½è®­ç»ƒæœ€æ–°çš„å¾®è°ƒæŠ€æœ¯ï¼Œé€šè¿‡å¯¹æ¯”â€œå¥½ç­”æ¡ˆâ€œå’Œâ€œåç­”æ¡ˆ"æ¥è®­ç»ƒæ¨¡å‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02bd9959a0d74cb98a29bcd59792a9c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259238&amp;x-signature=puIiK%2B8zPrQ5BKBopZuVPuL4bNc%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸‰ç§å¾®è°ƒæ–¹å¼è¯¦è§£</strong></p>
<p><strong>PTï¼ˆContinued Pre-Trainingï¼Œç»§ç»­é¢„è®­ç»ƒï¼‰</strong></p>
<p>é€šè¿‡æ— æ ‡æ³¨æ•°æ®è¿›è¡Œæ— ç›‘ç£ç»§ç»­é¢„è®­ç»ƒï¼Œå¼ºåŒ–æˆ–æ–°å¢æ¨¡å‹ç‰¹å®šèƒ½åŠ›ã€‚</p>
<p><strong>æ•°æ®è¦æ±‚</strong></p>
<p>éœ€è¦å¤§é‡æ–‡æœ¬æ•°æ®(é€šå¸¸å‡ GBåˆ°å‡ åGB)æ•°æ®è´¨é‡è¦é«˜ï¼Œæœ€å¥½æ˜¯ä½ ç›®æ ‡é¢†åŸŸçš„ä¸“ä¸šå†…å®¹</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong></p>
<p>è®©æ¨¡å‹å­¦ä¹ ç‰¹å®šé¢†åŸŸçš„çŸ¥è¯†ï¼Œæ¯”å¦‚åŒ»å­¦ã€æ³•å¾‹ã€é‡‘è</p>
<p>å¢å¼ºæ¨¡å‹å¯¹æŸç§è¯­è¨€æˆ–æ–¹è¨€çš„ç†è§£</p>
<p>è®©æ¨¡å‹ç†Ÿæ‚‰ä½ æ‰€åœ¨è¡Œä¸šçš„ä¸“ä¸šæœ¯è¯­</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ab498977630429ab2f0830945a0a9c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259238&amp;x-signature=LJKg338zQ9lzJtdaw60g%2FPOK3gY%3D" alt="" loading="lazy"/></p>
<p><strong>SFT(Supervised Fine-Tuning)ç›‘ç£å¾®è°ƒ</strong></p>
<p>æœ‰ç›‘ç£å¾®è°ƒï¼Œå¢å¼ºæ¨¡å‹æŒ‡ä»¤è·Ÿéšçš„èƒ½åŠ›ï¼Œæä¾›å…¨å‚å’Œé«˜æ•ˆè®­ç»ƒæ–¹å¼ã€‚</p>
<p><strong>æ•°æ®è¦æ±‚</strong></p>
<p>é€šå¸¸éœ€è¦å‡ åƒåˆ°å‡ ä¸‡æ¡é«˜è´¨é‡çš„é—®ç­”å¯¹</p>
<p>ç­”æ¡ˆè¦å‡†ç¡®ã€é£æ ¼ç»Ÿä¸€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93c4931daaaf4d2dac09d1c94432fce4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259238&amp;x-signature=e%2BRAA2yDlgvMXVuskG8mN0lD%2Bxk%3D" alt="" loading="lazy"/></p>
<p><strong>é€‚ç”¨åœºæ™¯</strong></p>
<p>è®­ç»ƒå®¢æœæœºå™¨äºº</p>
<p>åˆ›å»ºç‰¹å®šä»»åŠ¡çš„åŠ©æ‰‹(æ¯”å¦‚ä»£ç åŠ©æ‰‹ã€å†™ä½œåŠ©æ‰‹)</p>
<p>è®©æ¨¡å‹å­¦ä¼šç‰¹å®šçš„å¯¹è¯é£æ ¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0c08423d9d147eb9771d89e4d2cef34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259238&amp;x-signature=05GOXSBsnWJUlnWzlblpW3gvGoI%3D" alt="" loading="lazy"/></p>
<p><strong>DPO(Direct Preference Optimization)åå¥½è®­ç»ƒ</strong></p>
<p>å¼•å…¥è´Ÿåé¦ˆï¼Œé™ä½å¹»è§‰ï¼Œä½¿å¾—æ¨¡å‹è¾“å‡ºæ›´ç¬¦åˆäººç±»åå¥½</p>
<p><strong>å·¥ä½œåŸç†</strong></p>
<p>ç»™æ¨¡å‹åŒä¸€ä¸ªé—®é¢˜çš„ä¸¤ä¸ªä¸åŒç­”æ¡ˆ</p>
<p>å‘Šè¯‰æ¨¡å‹å“ªä¸ªç­”æ¡ˆæ›´å¥½</p>
<p>æ¨¡å‹å­¦ä¼šå€¾å‘äºç”Ÿæˆæ›´å¥½çš„ç­”æ¡ˆ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8821decf02dc45da880b109edad68530~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259238&amp;x-signature=fmqyHy5gohE3JLL4fpIKEoG9ihU%3D" alt="" loading="lazy"/></p>
<p><strong>é€‚ç”¨åœºæ™¯</strong></p>
<p>è®©æ¨¡å‹çš„å›ç­”æ›´ç¬¦åˆäººç±»åå¥½</p>
<p>å‡å°‘æœ‰å®³å†…å®¹çš„ç”Ÿæˆ</p>
<p>æé«˜å›ç­”çš„è´¨é‡å’Œå®‰å…¨æ€§</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fbbb70ddb86d451fb93661ad5fe78dd9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259238&amp;x-signature=b2I19Vj2AY8WT8zy6Tt9LOIYc98%3D" alt="" loading="lazy"/></p>
<p><strong>éå¿…è¦ä¸å¾®è°ƒ</strong></p>
<p>1.<strong>æˆæœ¬é«˜</strong>:éœ€è¦å¤§é‡GPUèµ„æºå’Œæ—¶é—´</p>
<p>2.<strong>æŠ€æœ¯é—¨æ§›é«˜</strong>:éœ€è¦æ‡‚æœºå™¨å­¦ä¹ ã€æ•°æ®å¤„ç†ã€æ¨¡å‹è®­ç»ƒ</p>
<p>3.æ•°æ®è¦æ±‚ä¸¥æ ¼:éœ€è¦é«˜è´¨é‡ã€å¤§é‡çš„è®­ç»ƒæ•°æ®4.ç»´æŠ¤å¤æ‚:æ¨¡å‹æ›´æ–°åéœ€è¦é‡æ–°å¾®è°ƒ</p>
<p><strong>ä¼˜å…ˆè€ƒè™‘æ›¿ä»£æ–¹æ¡ˆ</strong></p>
<p><strong>1.æç¤ºè¯å·¥ç¨‹</strong></p>
<p>é€šè¿‡ç²¾å¿ƒè®¾è®¡çš„æç¤ºè¯è®©æ¨¡å‹ç†è§£ä½ çš„éœ€æ±‚</p>
<p>æˆæœ¬ä½ï¼Œè§æ•ˆå¿«ï¼Œå®¹æ˜“è°ƒæ•´</p>
<p>é€‚åˆå¤§éƒ¨åˆ†ä½¿ç”¨åœºæ™¯</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0013c9f8d8c4ad5981f1b656d287785~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259238&amp;x-signature=LnCLu2CXLNfKx8SJ9%2FOWYSouT9g%3D" alt="" loading="lazy"/></p>
<p><strong>2.RAG</strong></p>
<p>è®©æ¨¡å‹æ£€ç´¢ç›¸å…³æ–‡æ¡£åå†å›ç­”</p>
<p>èƒ½å¤Ÿè·å–æœ€æ–°ä¿¡æ¯</p>
<p>ä¸éœ€è¦é‡æ–°è®­ç»ƒæ¨¡å‹</p>
<p><strong>ä»€ä¹ˆæƒ…å†µæœ‰å¿…è¦å¾®è°ƒ</strong></p>
<p><strong>1.ç‰¹å®šé¢†åŸŸçš„ä¸“ä¸šçŸ¥è¯†</strong></p>
<p>å½“ä½ çš„ä¸šåŠ¡æ¶‰åŠéå¸¸ä¸“ä¸šçš„é¢†åŸŸï¼Œè€Œé€šç”¨æ¨¡å‹çš„çŸ¥è¯†ä¸å¤Ÿç”¨æ—¶</p>
<p>å¦‚:åŒ»ç–—è¯Šæ–­ç³»ç»Ÿã€æ³•å¾‹æ–‡ä¹¦ç”Ÿæˆã€ç‰¹å®šè¡Œä¸šçš„æŠ€æœ¯æ”¯æŒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f8751049e3d042f8909f21a01aa81506~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259238&amp;x-signature=5BSmho4rLXsaFf7jATDs4LMYyHo%3D" alt="" loading="lazy"/></p>
<p><strong>2.ç‰¹æ®Šçš„è¾“å‡ºæ ¼å¼è¦æ±‚</strong></p>
<p>éœ€è¦æ¨¡å‹è¾“å‡ºç‰¹å®šæ ¼å¼ï¼Œè€Œæç¤ºè¯éš¾ä»¥ç¨³å®šæ§åˆ¶æ—¶ã€‚å¦‚:ç»“æ„åŒ–æ•°æ®æå–ã€ç‰¹å®šçš„ä»£ç ç”Ÿæˆè§„èŒƒã€æ ‡å‡†åŒ–çš„æŠ¥å‘Šæ ¼å¼ã€‚</p>
<p><strong>3.ç§æœ‰æ•°æ®çš„æ·±åº¦ç†è§£</strong></p>
<p>éœ€è¦æ¨¡å‹æ·±åº¦ç†è§£ä½ çš„ç§æœ‰æ•°æ®ï¼Œè€ŒRAGæ£€ç´¢æ•ˆæœä¸å¤Ÿå¥½æ—¶ã€‚å¦‚:ä¼ä¸šå†…éƒ¨çŸ¥è¯†åº“çš„æ·±åº¦åº”ç”¨ã€ä¸ªäººåŒ–æ¨èç³»ç»Ÿã€åŸºäºå†å²æ•°æ®çš„é¢„æµ‹</p>
<p><strong>4.æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯</strong></p>
<p>å¯¹å“åº”é€Ÿåº¦å’Œå‡†ç¡®æ€§è¦æ±‚éƒ½å¾ˆé«˜çš„åœºæ™¯ã€‚å¦‚:å®æ—¶å®¢æœç³»ç»Ÿã€é«˜é¢‘äº¤æ˜“çš„å†³ç­–æ”¯æŒã€å¤§è§„æ¨¡è‡ªåŠ¨åŒ–å¤„ç†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b890ac5b28b4899a0dcfa4b40373384~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259238&amp;x-signature=OlfJhOf1IoQB6ZTjWvuPU2QriTQ%3D" alt="" loading="lazy"/></p>
<p><strong>æ€»ç»“</strong></p>
<p>å¾®è°ƒæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·ï¼Œä½†ä¸æ˜¯ä¸‡èƒ½è¯ã€‚åœ¨è€ƒè™‘å¾®è°ƒä¹‹å‰ï¼Œå…ˆè¯•è¯•æç¤ºè¯ä¼˜åŒ–å’ŒRAGã€‚åªæœ‰åœ¨ç¡®å®éœ€è¦æ·±åº¦å®šåˆ¶ï¼Œä¸”æœ‰è¶³å¤Ÿèµ„æºæŠ•å…¥æ—¶ï¼Œæ‰è€ƒè™‘å¾®è°ƒã€‚</p>
<h2 data-id="heading-0">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäºSpringAIæ„å»ºå¤§æ¨¡å‹åº”ç”¨]]></title>    <link>https://juejin.cn/post/7578794217962127400</link>    <guid>https://juejin.cn/post/7578794217962127400</guid>    <pubDate>2025-12-02T05:50:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578794217962127400" data-draft-id="7578820431040118824" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäºSpringAIæ„å»ºå¤§æ¨¡å‹åº”ç”¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T05:50:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaç¼–ç¨‹çˆ±å¥½è€…"/> <meta itemprop="url" content="https://juejin.cn/user/819554264300154"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäºSpringAIæ„å»ºå¤§æ¨¡å‹åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/819554264300154/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaç¼–ç¨‹çˆ±å¥½è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T05:50:26.000Z" title="Tue Dec 02 2025 05:50:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»27åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. èƒŒæ™¯</h2>
<p>åœ¨è¿™é‡Œï¼Œæˆ‘ä¸»è¦åˆ†äº«çš„æ˜¯åœ¨<strong>åº”ç”¨</strong>å±‚é¢å¤§æ¨¡å‹ç›¸å…³çš„æŠ€æœ¯ï¼Œå‡å¦‚ä½ å·²æœ‰ä¸€ä¸ªç°æˆçš„å¤§æ¨¡å‹æ¥å£ï¼Œæ— è®ºæ˜¯ç¬¦åˆOpenAIè§„èŒƒçš„ï¼Œè¿˜æ˜¯å„å®¶å…¬å¸ä¸€äº›è‡ªå·±çš„æ¥å£ï¼Œä¾‹å¦‚Geminiï¼ŒDeepseekï¼Œé€šä¹‰åƒé—®ï¼Œé—®å¿ƒä¸€è¨€ç­‰ï¼Œè®©ç”¨è¿™äº›å¤§æ¨¡å‹æ¥æ„å»ºä¸€äº›åº”ç”¨ï¼Œå¯ä»¥é€‰å–ä¸‹é¢çš„æ–¹æ¡ˆï¼š</p>
<ol>
<li>ä½¿ç”¨ä½ä»£ç å¤§æ¨¡å‹åº”ç”¨æ­å»ºå¹³å°ï¼Œä¾‹å¦‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcoze-dev%2Fcoze-studio%3Ftab%3Dreadme-ov-file" target="_blank" title="https://github.com/coze-dev/coze-studio?tab=readme-ov-file" ref="nofollow noopener noreferrer">Coze</a>ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flanggenius%2Fdify%2F" target="_blank" title="https://github.com/langgenius/dify/" ref="nofollow noopener noreferrer">Dify</a>ï¼ŒÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flabring%2FFastGPT" target="_blank" title="https://github.com/labring/FastGPT" ref="nofollow noopener noreferrer">FastGPT</a>ç­‰ï¼Œè¿™äº›å¹³å°å¸¦äº†æµç¨‹ç¼–æ’ï¼ŒçŸ¥è¯†åº“ï¼Œä¹Ÿå¾ˆæ–¹ä¾¿çš„å’Œå„ç§å¤§æ¨¡å‹å¯¹æ¥ï¼Œå‘é‡æ¨¡å‹ã€å‘é‡åº“ï¼Œæœ‰äº›è¿˜æœ‰äº†ç›‘æ§ç•Œé¢æˆ–è€…æ’ä»¶å¸‚åœºç­‰ï¼Œèƒ½æ»¡è¶³æˆ‘ä»¬çš„å¤§éƒ¨åˆ†éœ€æ±‚</li>
<li>ä½¿ç”¨ç¼–ç¨‹çš„æ–¹å¼æ¥æ„å»ºåº”ç”¨ï¼Œè¿™ç§å¯ä»¥ä½¿ç”¨å…¬å¸ç°æœ‰çš„æŠ€æœ¯æ ˆï¼Œæä¾›æ›´ä¸ºçµæ´»çš„ä½¿ç”¨ï¼Œæ¥å…¥ç°æœ‰çš„ç³»ç»Ÿç­‰ï¼Œæˆ–è€…ä»æ›´é«˜å±‚é¢æ¥è¯´ï¼Œå®šåˆ¶è‡ªå·±çš„å¤§æ¨¡å‹åº”ç”¨è§„èŒƒï¼Œå®šåˆ¶å¤§æ¨¡å‹åº”ç”¨æ„å»ºå¹³å°ï¼Œæ¥å…¥å¹³å°ç­‰ï¼›ä¹Ÿå¯ä»¥æŠŠä¸Šé¢æ‰€è¯´çš„ä½ä»£ç å¹³å°çœ‹ä½œä¸ºè‡ªå»ºå¤§æ¨¡å‹åº”ç”¨ä½“ç³»çš„ä¸€éƒ¨åˆ†ï¼Œå³å¯ä»¥é€šè¿‡ä»£ç çš„æ–¹å¼çµæ´»å»æ„å»ºåº”ç”¨ï¼Œä¹Ÿé€šè¿‡å¹³å°æ›´é«˜æ•ˆçš„å»æ„å»ºåº”ç”¨</li>
</ol>
<p>æˆ‘ä»¬åé¢è®²çš„ä¸»è¦æ˜¯ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ï¼Œæˆ‘ä»¬é€‰å–ä¸€äº›ç°æœ‰çš„æ¡†æ¶æ¥å®ç°ï¼ŒPythonä¸»è¦<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flangchain-ai%2Flangchain" target="_blank" title="https://github.com/langchain-ai/langchain" ref="nofollow noopener noreferrer">Langchain</a>ç›¸å…³æŠ€æœ¯ï¼ŒJavaä¹Ÿæœ‰ä¸€ä¸ªå¯¹åº”çš„æ¡†æ¶<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flangchain4j%2Flangchain4j" target="_blank" title="https://github.com/langchain4j/langchain4j" ref="nofollow noopener noreferrer">Langchain4j</a>ï¼Œä¹Ÿæœ‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.spring.io%2Fspring-ai%2Freference%2Findex.html" target="_blank" title="https://docs.spring.io/spring-ai/reference/index.html" ref="nofollow noopener noreferrer">SpringAI</a></p>
<p>è¿™äº›æ¡†æ¶å¸®æˆ‘ä»¬åšäº†å¾ˆå¤šäº‹æƒ…ï¼š</p>
<ol>
<li>å°è£…ä¸€ä¸ªé€šç”¨çš„æ¨¡å‹è°ƒç”¨æ¥å£ï¼Œå±è”½äº†åº•å±‚ä¸åŒå…¬å¸å¤§æ¨¡å‹æ¥å£çš„å·®å¼‚</li>
<li>ç®¡ç†äº†ä¼šè¯å’Œä¸Šä¸‹æ–‡ï¼Œä¼šè¯å°±æ˜¯å°†ç”¨æˆ·ä¹‹å‰é—®çš„é—®é¢˜å’Œç°åœ¨é—®çš„é—®é¢˜å…³è”èµ·æ¥</li>
<li>ç»“æ„åŒ–è¾“å‡ºï¼Œå°†å¤§æ¨¡å‹çš„æ–‡æœ¬è¾“å‡ºè½¬ä¸ºç¨‹åºå¯ä»¥ä½¿ç”¨çš„ç»“æ„åŒ–å¯¹è±¡ï¼Œä¾‹å¦‚JSONå¯¹è±¡</li>
<li>å·¥å…·/å‡½æ•°è°ƒç”¨</li>
<li>å¯è§‚æµ‹æ€§</li>
<li>æ¨¡å‹æ•ˆæœè¯„ä¼°</li>
</ol>
<blockquote>
<p>ä¸€ä¸ªæ¡†æ¶<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FBerriAI%2Flitellm" target="_blank" title="https://github.com/BerriAI/litellm" ref="nofollow noopener noreferrer">LiteLLM</a>ä¸“é—¨æŠŠä¸åŒå¤§æ¨¡å‹æ¥å£é€‚é…ä¸ºOpenAIæ ¼å¼çš„ï¼Œè¿™ä¹Ÿæ˜¯ä¸€ç§å±è”½å·®å¼‚çš„æ–¹å¼</p>
</blockquote>
<h2 data-id="heading-1">2. æ¶æ„</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9876edfe1c494ed99924fe829325aab3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259426&amp;x-signature=kLIqwGgG%2Bgu9SAhFLKbYHQsCvAU%3D" alt="" loading="lazy"/>.png)</p>
<p>æ•´ä½“æ¶æ„å¦‚ä¸Šï¼Œä¸‹é¢ä¸»è¦ä»‹ç»éƒ¨åˆ†å®ç°</p>
<ul>
<li>æ¨¡å‹æ¡†æ¶å±‚ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.spring.io%2Fspring-ai%2Freference%2Findex.html" target="_blank" title="https://docs.spring.io/spring-ai/reference/index.html" ref="nofollow noopener noreferrer">SpringAI</a>ï¼ŒJavaå¤§æ¨¡å‹åº”ç”¨å¼€å‘æ¡†æ¶</li>
<li>æ¨¡å‹æ¨ç†èƒ½åŠ›ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Follama%2Follama" target="_blank" title="https://github.com/ollama/ollama" ref="nofollow noopener noreferrer">Ollama</a>ï¼Œåˆ©ç”¨æœ¬åœ°CPUæˆ–GPUï¼Œå’Œç°æœ‰è®­ç»ƒæ¨¡å‹ï¼Œå®ç°æ¨¡å‹æ¨ç†èƒ½åŠ›ï¼Œä¾¿äºå¼€å‘ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦æ›¿æ¢</li>
<li>ç›‘æ§è¿½è¸ªï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flangfuse%2Flangfuse" target="_blank" title="https://github.com/langfuse/langfuse" ref="nofollow noopener noreferrer">LangFuse</a>ï¼Œè¿½è¸ªå¤§æ¨¡å‹åº”ç”¨è¯·æ±‚ï¼Œä¾‹å¦‚è¾“å…¥è¾“å‡ºï¼Œè€—æ—¶ã€Tokenæ¶ˆè€—ç­‰</li>
</ul>
<h2 data-id="heading-2">3. å®ç°</h2>
<h3 data-id="heading-3">3.1 å®‰è£…</h3>
<p>Ollamaå’ŒLangFuseå‚ç…§æ–‡æ¡£å®‰è£…å’Œå¯åŠ¨</p>
<p>SpringAIé€šè¿‡pomå¯¼å…¥ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯¼å…¥äº†springboot ollamaã€opentelemetryç­‰ç›¸å…³åŒ…ï¼Œåè€…æ˜¯ä¸ºäº†æ¥å…¥LangFuse</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.jd.jt<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>ai-base<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Archetype - ai-base<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://maven.apache.org<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">parent</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.4.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">relativePath</span>/&gt;</span> <span class="hljs-comment">&lt;!-- lookup parent from repository --&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">parent</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.reporting.outputEncoding</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>21<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>21<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.opentelemetry.instrumentation<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>opentelemetry-instrumentation-bom<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.17.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-bom<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-starter-model-ollama<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Spring AI needs a reactive web server to run for some reason--&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.opentelemetry.instrumentation<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>opentelemetry-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Spring Boot Actuator for observability support --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- Micrometer Observation -&gt; OpenTelemetry bridge --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.micrometer<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>micrometer-tracing-bridge-otel<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- OpenTelemetry OTLP exporter for traces --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.opentelemetry<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>opentelemetry-exporter-otlp<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.18.38<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span>
</code></pre>
<h3 data-id="heading-4">3.2 èµ·æ­¥ç¤ºä¾‹</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.client.ChatClient;
<span class="hljs-keyword">import</span> org.springframework.http.MediaType;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RequestParam;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RestController;
<span class="hljs-keyword">import</span> reactor.core.publisher.Flux;

<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyController</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ChatClient chatClient;

    <span class="hljs-keyword">public</span> MyController(ChatClient.Builder chatClientBuilder) {
        <span class="hljs-keyword">this</span>.chatClient = chatClientBuilder.build();
    }

    <span class="hljs-meta">@GetMapping(value = <span class="hljs-string">"/ai-stream"</span>, produces = MediaType.TEXT_EVENT_STREAM_VALUE)</span>
    Flux&lt;String&gt; generationStream(<span class="hljs-meta">@RequestParam(<span class="hljs-string">"userInput"</span>)</span> String userInput) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.chatClient.prompt()
                .user(userInput)
                .stream()
                .content();
    }

    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/ai"</span>)</span>
    String generation(String userInput) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.chatClient.prompt()
                .user(userInput)
                .call()
                .content();
    }
</code></pre>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2FProject%2Fgithub%2Fai-base%2Fsrc%2Fmain%2Fresources%2Fapplication.properties" target="_blank" title="https://www.cnblogs.com/Project/github/ai-base/src/main/resources/application.properties" ref="nofollow noopener noreferrer">application.properties</a></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">spring.ai.ollama.chat.enabled</span>=<span class="hljs-literal">true</span>
<span class="hljs-attr">spring.ai.model.chat</span>=ollama
<span class="hljs-attr">spring.ai.ollama.chat.options.model</span>=qwen3:<span class="hljs-number">8</span>b
<span class="hljs-attr">spring.ai.chat.observations.include-prompt</span>=<span class="hljs-literal">true</span>
<span class="hljs-attr">spring.ai.chat.observations.include-completion</span>=<span class="hljs-literal">true</span>
<span class="hljs-attr">management.tracing.sampling.probability</span>=<span class="hljs-number">1.0</span>
</code></pre>
<p>æ‰§è¡Œå‘½ä»¤</p>
<pre><code class="hljs language-bash" lang="bash">curl --location <span class="hljs-string">'http://localhost:8080/ai?userInput=%E4%BD%A0%E5%A5%BD'</span>

&lt;think&gt;
å—¯ï¼Œç”¨æˆ·å‘æ¥â€œä½ å¥½â€ï¼Œæˆ‘éœ€è¦ä»¥è‡ªç„¶çš„æ–¹å¼å›åº”ã€‚é¦–å…ˆï¼Œåº”è¯¥ç”¨ä¸­æ–‡å›å¤ï¼Œä¿æŒå‹å¥½å’Œäº²åˆ‡çš„è¯­æ°”ã€‚å¯ä»¥ç®€å•é—®å€™ï¼Œæ¯”å¦‚â€œä½ å¥½ï¼æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿâ€è¿™æ ·æ—¢å›åº”äº†å¯¹æ–¹çš„é—®å€™ï¼Œåˆä¸»åŠ¨è¯¢é—®æ˜¯å¦éœ€è¦å¸®åŠ©ï¼Œç¬¦åˆæˆ‘çš„è®¾è®¡åŸåˆ™ã€‚åŒæ—¶ï¼Œè¦é¿å…ä½¿ç”¨å¤æ‚æˆ–ç”Ÿç¡¬çš„è¡¨è¾¾ï¼Œè®©å¯¹è¯æ˜¾å¾—è½»æ¾ã€‚å¦å¤–ï¼Œè€ƒè™‘åˆ°ç”¨æˆ·å¯èƒ½æœ‰å„ç§éœ€æ±‚ï¼Œä¿æŒå¼€æ”¾å¼çš„æé—®å¯ä»¥å¼•å¯¼ä»–ä»¬è¿›ä¸€æ­¥è¯´æ˜å…·ä½“é—®é¢˜ï¼Œè¿™æ ·æˆ‘æ‰èƒ½æ›´å¥½åœ°æä¾›å¸®åŠ©ã€‚ç¡®ä¿å›å¤ç®€æ´æ˜äº†ï¼Œç¬¦åˆæ—¥å¸¸äº¤æµçš„ä¹ æƒ¯ã€‚
&lt;/think&gt;

ä½ å¥½ï¼æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼ŸğŸ˜Š
</code></pre>
<h3 data-id="heading-5">3.3 æç¤ºè¯</h3>
<h4 data-id="heading-6">3.3.1 æç¤ºè¯æ¨¡æ¿</h4>
<p>å°†å˜é‡åµŒå…¥æç¤ºè¯æ¨¡æ¿ä¸­ï¼ŒåŠ¨æ€ç”Ÿæˆæç¤ºè¯</p>
<pre><code class="hljs language-ini" lang="ini">public String generateChildName() {

    PromptTemplate <span class="hljs-attr">promptTemplate</span> = new PromptTemplate(<span class="hljs-string">"""
            ç”·æ–¹å§“ï¼š{maleName}
            å¥³æ–¹å§“ï¼š{femaleName}
            å¸®å­©å­èµ·å
            """</span>)<span class="hljs-comment">;</span>

    Prompt <span class="hljs-attr">prompt</span> = promptTemplate.create(Map.of(<span class="hljs-string">"maleName"</span>, <span class="hljs-string">"å®‹"</span>, <span class="hljs-string">"femaleName"</span>, <span class="hljs-string">"åˆ˜"</span>))<span class="hljs-comment">;</span>

    return chatClient.prompt(prompt).call().content()<span class="hljs-comment">;</span>
}
</code></pre>
<p>æ‰§è¡Œå‘½ä»¤</p>
<pre><code class="hljs language-rust" lang="rust">curl --location <span class="hljs-symbol">'http</span>:<span class="hljs-comment">//localhost:8080/get-name</span>

&lt;think&gt;
å—¯ï¼Œç”¨æˆ·è®©æˆ‘å¸®å¿™ç»™å­©å­èµ·åï¼Œç”·æ–¹å§“å®‹ï¼Œå¥³æ–¹å§“åˆ˜ã€‚é¦–å…ˆï¼Œæˆ‘éœ€è¦äº†è§£ç”¨æˆ·çš„éœ€æ±‚ã€‚ä»–ä»¬å¯èƒ½æƒ³è¦ä¸€ä¸ªç»“åˆåŒæ–¹å§“æ°çš„åå­—ï¼Œæˆ–è€…æ›´å€¾å‘äºå…¶ä¸­ä¸€ä¸ªå§“æ°ã€‚ä¸è¿‡é€šå¸¸åœ¨ä¸­å›½ï¼Œå­©å­è·Ÿçˆ¶å§“ï¼Œæ‰€ä»¥å¯èƒ½ä¸»è¦ç”¨å®‹å§“ï¼Œä½†æœ‰æ—¶å€™ä¹Ÿä¼šè€ƒè™‘åŒå§“æˆ–è€…ç»“åˆåŒæ–¹å§“æ°çš„å…ƒç´ ã€‚
...
</code></pre>
<p>æç¤ºè¯æ¨¡æ¿ä¹Ÿå¯ä»¥é€šè¿‡<code>Resource</code>çš„æ–¹å¼ä½¿ç”¨ï¼Œè¿™æ ·æç¤ºè¯å¯ä»¥å­˜åœ¨ä»»ä½•åœ°æ–¹äº†ï¼Œå·¥ç¨‹æ–‡ä»¶ã€æ•°æ®åº“ã€é…ç½®ä¸­å¿ƒç­‰ï¼ŒæŠŠæç¤ºè¯æ¨¡æ¿æ”¾åœ¨å¤–éƒ¨ï¼Œæ›´å®¹æ˜“ç®¡ç†å’Œå®æ—¶å˜æ›´ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹åº“æ¥å®ç°è¿™ä¸ªåŠŸèƒ½</p>
<h4 data-id="heading-7">3.3.2 æç¤ºè¯ç®¡ç†</h4>
<p>æç¤ºè¯ç®¡ç†æ˜¯å°†æç¤ºè¯å•ç‹¬å­˜å‚¨åœ¨å·¥ç¨‹å¤–éƒ¨ï¼Œæä¾›ä¸€äº›æ˜“ç”¨çš„åŠŸèƒ½ï¼Œä¾‹å¦‚ç‰ˆæœ¬æ§åˆ¶ï¼Œæœç´¢æç¤ºè¯ç­‰ã€‚</p>
<p>æˆ‘ä»¬è¿™ç”¨äº†LangFuseï¼Œæ‰€ä»¥åªè¦æŠŠå®ƒæ¥å…¥æˆ‘ä»¬çš„é¡¹ç›®å³å¯</p>
<ol>
<li>åœ¨ç•Œé¢ä¸Šé¢åˆ›å»ºæç¤ºè¯æ¨¡æ¿ï¼Œå¹¶å‘å¸ƒ</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24b88b57453f41f5b0181a574f6ae32c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259426&amp;x-signature=66H41qG2HhLTqU5bdaKfGyFmmeQ%3D" alt="" loading="lazy"/></p>
<ol start="2">
<li>åœ¨Javaé¡¹ç›®ä¸­æ¥å…¥ï¼Œå› ä¸ºLangFuseæ²¡æœ‰Javaçš„SDKï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨Apiçš„æ–¹å¼</li>
</ol>

<pre><code class="hljs language-xml" lang="xml">          <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.lianjiatech<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>retrofit-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.2.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>â€‹ åˆ›å»ºLangFuseClient Httpè¯·æ±‚Clientï¼Œæ”¹é€ ä¹‹å‰å†™generateChildNameæ–¹æ³•ï¼Œä»LangFuseè·å–æç¤ºè¯</p>
<pre><code class="hljs language-less" lang="less">
<span class="hljs-variable">@RetrofitClient</span>(baseUrl = <span class="hljs-string">"http://localhost:3000"</span>)
public interface LangFuseClient {

    <span class="hljs-variable">@GET</span>(<span class="hljs-string">"api/public/v2/prompts/{promptName}"</span>)
    <span class="hljs-variable">@Headers</span>(<span class="hljs-string">"Authorization: Basic cGstbGYtNDFmZjZkYjItZWZjNC00YTg4LTkyNmItZmMxZDE1ZGUwNGNiOnNrLWxmLTYzN2RmMDE0LWVkZDItNDdhNi1iNmUwLTE0N2U2MjMyOWYyMQ=="</span>)
    LFPrompt <span class="hljs-built_in">getPrompts</span>(<span class="hljs-variable">@Path</span>(<span class="hljs-string">"promptName"</span>) String promptName);
}


public String <span class="hljs-built_in">generateChildName</span>() {

        <span class="hljs-selector-tag">LFPrompt</span> <span class="hljs-selector-tag">lfPrompt</span> = <span class="hljs-selector-tag">langFuseClient</span><span class="hljs-selector-class">.getPrompts</span>(<span class="hljs-string">"èµ·å"</span>);
        <span class="hljs-selector-tag">PromptTemplate</span> <span class="hljs-selector-tag">promptTemplate</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">PromptTemplate</span>(lfPrompt.<span class="hljs-built_in">getPrompt</span>());

        <span class="hljs-selector-tag">Prompt</span> <span class="hljs-selector-tag">prompt</span> = <span class="hljs-selector-tag">promptTemplate</span><span class="hljs-selector-class">.create</span>(Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"maleName"</span>, <span class="hljs-string">"å®‹"</span>, <span class="hljs-string">"femaleName"</span>, <span class="hljs-string">"åˆ˜"</span>));

        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">chatClient</span><span class="hljs-selector-class">.prompt</span>(prompt)<span class="hljs-selector-class">.call</span>()<span class="hljs-selector-class">.content</span>();
}
</code></pre>
<ol start="3">
<li>æ‰§è¡Œå‘½ä»¤ï¼ŒæŸ¥çœ‹ç»“æœ</li>
</ol>
<pre><code class="hljs language-rust" lang="rust">  curl --location <span class="hljs-symbol">'http</span>:<span class="hljs-comment">//localhost:8080/get-name'</span>
  
  &lt;think&gt;
  å—¯ï¼Œç”¨æˆ·è®©æˆ‘å¸®å¿™ç»™å­©å­èµ·åï¼Œç”·æ–¹å§“å®‹ï¼Œå¥³æ–¹å§“åˆ˜ã€‚é¦–å…ˆï¼Œæˆ‘éœ€è¦ç¡®è®¤ç”¨æˆ·çš„éœ€æ±‚ã€‚ä»–ä»¬å¯èƒ½å¸Œæœ›åå­—ä¸­åŒ…å«åŒæ–¹çš„å§“æ°ï¼Œæˆ–è€…ç»“åˆä¸¤è€…çš„å…ƒç´ ã€‚ä¸è¿‡ï¼Œç”¨æˆ·æ²¡æœ‰æ˜ç¡®è¯´æ˜æ˜¯å¦è¦åŒå§“ï¼Œæ‰€ä»¥å¯èƒ½éœ€è¦è€ƒè™‘ä¸åŒçš„å¯èƒ½æ€§ã€‚
  
  æ¥ä¸‹æ¥ï¼Œæˆ‘å¾—è€ƒè™‘åå­—çš„å¯“æ„å’ŒéŸ³éŸµã€‚ä¸­æ–‡åå­—é€šå¸¸è®²ç©¶å¹³ä»„æ­é…ï¼Œè¯»èµ·æ¥é¡ºå£ï¼ŒåŒæ—¶è¦æœ‰å¥½çš„å¯“æ„ã€‚æ¯”å¦‚ï¼Œå®‹å’Œåˆ˜çš„ç»„åˆï¼Œå¯èƒ½éœ€è¦æ‰¾ä¸€ä¸ªå­—æ¥è¿æ¥ï¼Œæˆ–è€…ç”¨ä¸¤ä¸ªå­—åˆ†åˆ«ä»£è¡¨åŒæ–¹çš„å§“æ°ã€‚
  
  ç„¶åï¼Œç”¨æˆ·è¦æ±‚è¾“å‡ºåœ¨<span class="hljs-number">30</span>ä¸ªå­—ä»¥å†…ï¼Œæ‰€ä»¥æ¯ä¸ªåå­—è¦ç®€æ´ã€‚å¯èƒ½éœ€è¦åˆ—å‡ºå¤šä¸ªé€‰é¡¹ï¼Œè®©ç”¨æˆ·æœ‰é€‰æ‹©çš„ä½™åœ°ã€‚åŒæ—¶ï¼Œè¦æ³¨æ„é¿å…ç”Ÿåƒ»å­—ï¼Œç¡®ä¿åå­—çš„æ˜“è¯»æ€§å’Œç¾è§‚æ€§ã€‚
  
</code></pre>
<h4 data-id="heading-8">3.3.3 æç¤ºè¯å·¥ç¨‹</h4>
<p>æç¤ºè¯å·¥ç¨‹æ˜¯é€šè¿‡å…³æ³¨æç¤ºè¯å¼€å‘å’Œä¼˜åŒ–ï¼Œæå‡å¤§è¯­è¨€æ¨¡å‹å¤„ç†å¤æ‚ä»»åŠ¡åœºæ™¯çš„èƒ½åŠ›</p>
<p>å…·ä½“å¯ä»¥å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.promptingguide.ai%2Fzh" target="_blank" title="https://www.promptingguide.ai/zh" ref="nofollow noopener noreferrer">æç¤ºå·¥ç¨‹æŒ‡å—</a></p>
<p>ä¸»è¦æ¶‰åŠäº†ï¼š</p>
<ol>
<li>æç¤ºè¯çš„åŸºæœ¬ç»“æ„ï¼Œä¾‹å¦‚åŒ…å«æŒ‡ä»¤ã€ä¸Šä¸‹æ–‡ï¼Œç”¨æˆ·è¾“å…¥ï¼Œè¾“å‡ºæŒ‡ç¤º</li>
<li>é€šç”¨æŠ€å·§</li>
<li><strong>æç¤ºè¯æŠ€æœ¯</strong>ï¼Œé›¶æ ·æœ¬æç¤ºï¼Œå°‘æ ·æœ¬æç¤ºï¼Œé“¾å¼æ€è€ƒ</li>
</ol>
<p>å¦‚æœæœ‰ç°æˆçš„æç¤ºè¯ï¼Œå¯ä»¥ç›´æ¥æ‹¿è¿‡æ¥ç”¨ï¼Œå¼€æºçš„æç¤ºè¯<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ff%2Fawesome-chatgpt-prompts" target="_blank" title="https://github.com/f/awesome-chatgpt-prompts" ref="nofollow noopener noreferrer">awesome-chatgpt-prompts</a>ï¼Œå•†ä¸šçš„æç¤ºè¯<a href="https://link.juejin.cn?target=https%3A%2F%2Fpromptbase.com%2F" target="_blank" title="https://promptbase.com/" ref="nofollow noopener noreferrer">promptbase</a>ï¼Œè¿™æ ·çš„ç½‘ç«™å¾ˆå¤šï¼Œç”šè‡³å¯ä»¥ä½¿ç”¨å¤§æ¨¡å‹æ¥ç”Ÿæˆæç¤ºè¯ï¼Œé€šå¸¸ä¼šæ¯”è‡ªå·±ä»å¤´å¼€å§‹å†™æ•ˆç‡ä¼šé«˜</p>
<h3 data-id="heading-9">3.4 ç»“æ„åŒ–è¾“å‡º</h3>
<p>å°†å¤§æ¨¡å‹çš„æ–‡æœ¬è¾“å‡ºè½¬åŒ–ä¸ºå›ºå®šç»“æ„</p>
<pre><code class="hljs language-ini" lang="ini">    public List&lt;String&gt; generateChildName() {

        LFPrompt <span class="hljs-attr">lfPrompt</span> = langFuseClient.getPrompts(<span class="hljs-string">"èµ·å"</span>)<span class="hljs-comment">;</span>
        PromptTemplate <span class="hljs-attr">promptTemplate</span> = new PromptTemplate(lfPrompt.getPrompt())<span class="hljs-comment">;</span>

        Prompt <span class="hljs-attr">prompt</span> = promptTemplate.create(Map.of(<span class="hljs-string">"maleName"</span>, <span class="hljs-string">"å®‹"</span>, <span class="hljs-string">"femaleName"</span>, <span class="hljs-string">"åˆ˜"</span>))<span class="hljs-comment">;</span>


        return chatClient.prompt(prompt).call().entity(new ListOutputConverter(new DefaultConversionService()))<span class="hljs-comment">;</span>
    }
</code></pre>
<p>æ‰§è¡Œå‘½ä»¤ï¼Œå¯ä»¥çœ‹åˆ°è¿”å›ç»“æœå˜ä¸ºäº†æ•°ç»„æ ¼å¼ï¼Œä½†å¹¶ä¸å®Œç¾ï¼Œé€šè¿‡æç¤ºè¯å…³é—­thinkå†…å®¹åï¼Œæ ¼å¼ä¸Šé¢è¿˜æ˜¯æœ‰ä¸€äº›é—®é¢˜ï¼Œåç»­<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fspring-projects%2Fspring-ai%2Fpull%2F3386" target="_blank" title="https://github.com/spring-projects/spring-ai/pull/3386" ref="nofollow noopener noreferrer">SpringAIä¼šæ”¯æŒé€šè¿‡å‚æ•°çš„æ–¹å¼å…³é—­thinkè¿‡ç¨‹</a></p>
<pre><code class="hljs language-swift" lang="swift">curl <span class="hljs-operator">--</span>location 'http:<span class="hljs-comment">//localhost:8080/get-name'</span>

[
    <span class="hljs-string">"&lt;think&gt;<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>&lt;/think&gt;<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>å®‹æ˜è½©"</span>,
    <span class="hljs-string">"å®‹å­æ¶µ"</span>,
    <span class="hljs-string">"å®‹æµ©ç„¶"</span>,
    <span class="hljs-string">"å®‹æ¢“ç¿"</span>,
    <span class="hljs-string">"å®‹ä¿Šç†™"</span>,
    <span class="hljs-string">"å®‹å¤©å®‡"</span>,
    <span class="hljs-string">"å®‹æµ©å®‡"</span>,
    <span class="hljs-string">"å®‹æ¢“è±ª"</span>,
    <span class="hljs-operator">...</span>
]
</code></pre>
<p>å¯ä»¥ä»æç¤ºè¯ä¸­ï¼Œçœ‹åˆ°Spring AIä¸ºæˆ‘ä»¬åŠ äº†çº¦æŸè¾“å‡ºçš„æç¤ºè¯ï¼Œè¾“å‡ºç»“æœä¹Ÿæ˜¯æŒ‰ç…§è¿™ä¸ªæ ¼å¼ï¼Œè¿™ä¸ªæˆªå›¾æ˜¯LangFuseçš„ç›‘æ§çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥çœ‹åˆ°è¯·æ±‚å¤§æ¨¡å‹çš„è®°å½•</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92c3a4200c6e441ba4a60a6351dad93c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259426&amp;x-signature=PqIgAXLxaWnaRPO5VfA%2FwSQitwE%3D" alt="" loading="lazy"/><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0e2a45be9d94636ae41fe5828bfdaba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259426&amp;x-signature=BMaFGMTaZldtExnoYnSmY8Zvx1I%3D" alt="" loading="lazy"/></p>
<p>å¦å¤–å¯ä»¥å°†ç»“æœè½¬ä¸ºMapæˆ–è€…Javaçš„æŸä¸ªå…·ä½“Class</p>
<h3 data-id="heading-10">3.5 ä¼šè¯å’Œä¸Šä¸‹æ–‡</h3>
<p>åœ¨ä½¿ç”¨å¤§æ¨¡å‹åº”ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸ä¼šæœ‰ä¸¤ç§æ¨¡å¼</p>
<ol>
<li>å•è½®å¯¹è¯ï¼Œä¹Ÿå°±æ˜¯ä¸€é—®ä¸€ç­”ï¼Œä¹‹å‰é—®è¿‡çš„é—®é¢˜ä¸ä¼šå†è€ƒè™‘</li>
<li>å¤šè½®å¯¹è¯ï¼Œåœ¨æ•´ä¸ªå¯¹è¯å‘¨æœŸå‘¢ï¼Œå¤§æ¨¡å‹ä¼šå…³è”ä¹‹å‰çš„é—®é¢˜ï¼Œç»¼åˆä¹‹åç»™å‡ºå›å¤</li>
</ol>
<p>è¦å®ç°å¤šè½®å¯¹è¯çš„åŠŸèƒ½ï¼Œå°±éœ€è¦æˆ‘ä»¬è®°å½•æ˜¯å¦æ˜¯ä¸€æ¬¡ä¼šè¯å’Œä¼šè¯æœŸé—´çš„ä¸Šä¸‹æ–‡ï¼Œå› ä¸ºå¤§æ¨¡å‹æœ¬èº«æ˜¯æ— çŠ¶æ€çš„ï¼Œå®ƒè‡ªå·±ä¸è®°å½•è¿™äº›å†…å®¹</p>
<pre><code class="hljs language-ini" lang="ini">

import org.springframework.ai.chat.client.ChatClient<span class="hljs-comment">;</span>
import org.springframework.ai.chat.client.advisor.MessageChatMemoryAdvisor<span class="hljs-comment">;</span>
import org.springframework.ai.chat.memory.ChatMemory<span class="hljs-comment">;</span>
import org.springframework.ai.chat.memory.MessageWindowChatMemory<span class="hljs-comment">;</span>
import org.springframework.ai.chat.prompt.Prompt<span class="hljs-comment">;</span>
import org.springframework.ai.chat.prompt.PromptTemplate<span class="hljs-comment">;</span>
import org.springframework.ai.converter.ListOutputConverter<span class="hljs-comment">;</span>
import org.springframework.core.convert.support.DefaultConversionService<span class="hljs-comment">;</span>
import org.springframework.stereotype.Service<span class="hljs-comment">;</span>

import java.util.List<span class="hljs-comment">;</span>
import java.util.Map<span class="hljs-comment">;</span>

@Service
public class ChatService {

    private final ChatClient chatClient<span class="hljs-comment">;</span>



    public ChatService(ChatClient.Builder chatClientBuilder) {
        ChatMemory <span class="hljs-attr">chatMemory</span> = MessageWindowChatMemory.builder().maxMessages(<span class="hljs-number">10</span>).build()<span class="hljs-comment">;</span>

        <span class="hljs-attr">this.chatClient</span> = chatClientBuilder
                .defaultAdvisors(MessageChatMemoryAdvisor.builder(chatMemory).build())
                .build()<span class="hljs-comment">;</span>
    }

    public List&lt;String&gt; generateChildName(String conversationId, String surname, String gender) {
        // ç³»ç»Ÿæç¤ºè¯
        String <span class="hljs-attr">systemMessage</span> = <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„èµ·åä¸“å®¶ï¼Œæ“…é•¿æ ¹æ®ä¸­å›½ä¼ ç»Ÿæ–‡åŒ–å’Œç°ä»£å®¡ç¾ä¸ºå­©å­èµ·åã€‚è¯·ç¡®ä¿åå­—å¯“æ„ç¾å¥½ã€æœ—æœ—ä¸Šå£ã€‚"</span><span class="hljs-comment">;</span>

        // ç”¨æˆ·æç¤ºè¯æ¨¡æ¿
        String <span class="hljs-attr">userMessageTemplate</span> = <span class="hljs-string">"""
                è¯·ä¸ºå§“{surname}çš„{gender}å­©å­èµ·åï¼Œè¦æ±‚ï¼š
                1. è¾“å‡ºä¸è¶…è¿‡10ä¸ªåå­—
                2. æ¯ä¸ªåå­—éƒ½è¦æœ‰å¯“æ„è¯´æ˜
                3. åå­—è¦ç¬¦åˆç°ä»£å®¡ç¾"""</span><span class="hljs-comment">;</span>

        PromptTemplate <span class="hljs-attr">userPromptTemplate</span> = new PromptTemplate(userMessageTemplate)<span class="hljs-comment">;</span>
        Prompt <span class="hljs-attr">userPrompt</span> = userPromptTemplate.create(Map.of(
                "surname", surname,
                "gender", gender
        ))<span class="hljs-comment">;</span>

        return chatClient
                .prompt()
                .system(systemMessage)  // ç³»ç»Ÿæç¤ºè¯
                .user(userPrompt.getContents())  // ç”¨æˆ·æç¤ºè¯
                .advisors(a -&gt; a.param(ChatMemory.CONVERSATION_ID, conversationId))
                .call()
                .entity(new ListOutputConverter(new DefaultConversionService()))<span class="hljs-comment">;</span>
    }


}
</code></pre>
<p>å½“å‘äº†ä¸¤æ¬¡è¯·æ±‚ä¹‹åï¼Œä»å›å¤çš„å†…å®¹å¯ä»¥çœ‹çœ‹ï¼Œå¤§æ¨¡å‹çŸ¥é“é—®äº†ä¸¤æ¬¡</p>
<pre><code class="hljs language-swift" lang="swift">[<span class="hljs-string">"&lt;think&gt;<span class="hljs-subst">\n</span>å¥½çš„ï¼Œç”¨æˆ·ä¹‹å‰è®©æˆ‘ä¸ºå§“å®‹çš„ç”·å­©èµ·åï¼Œç°åœ¨åˆå‘äº†ä¸€ä¸ªç±»ä¼¼çš„è¯·æ±‚ï¼Œä½†è¿™æ¬¡è¦æ±‚è¾“å‡ºæ ¼å¼æ˜¯é€—å·åˆ†éš”çš„åˆ—è¡¨ï¼Œæ²¡æœ‰å…¶ä»–æ–‡æœ¬ã€‚æˆ‘éœ€è¦ä»”ç»†åˆ†æç”¨æˆ·çš„éœ€æ±‚ã€‚<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>é¦–å…ˆï¼Œç”¨æˆ·å¯èƒ½æ˜¯åœ¨æµ‹è¯•æˆ‘æ˜¯å¦èƒ½æŒ‰ç…§æ–°çš„æ ¼å¼è¦æ±‚è¾“å‡ºï¼Œæˆ–è€…ä»–ä»¬éœ€è¦å°†åå­—ç›´æ¥ç”¨äºæŸä¸ªç³»ç»Ÿï¼Œæ¯”å¦‚æ³¨å†Œè¡¨å•æˆ–åº”ç”¨ç¨‹åºï¼Œæ‰€ä»¥éœ€è¦ç®€æ´çš„æ ¼å¼ã€‚ä¹‹å‰çš„å›å¤æ˜¯ä¸­æ–‡åå­—å’Œå¯“æ„ï¼Œç°åœ¨éœ€è¦è½¬æ¢ä¸ºåªåˆ—å‡ºåå­—ï¼Œç”¨é€—å·åˆ†éš”ã€‚<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>æ¥ä¸‹æ¥ï¼Œæˆ‘éœ€è¦ç¡®ä¿æ¯ä¸ªåå­—éƒ½ç¬¦åˆç°ä»£å®¡ç¾ï¼ŒåŒæ—¶ä¿æŒå¯“æ„ç¾å¥½ã€‚ç”¨æˆ·ä¹‹å‰æä¾›çš„ä¾‹å­ä¸­æœ‰â€œå®‹å­å¢¨â€ã€â€œå®‹çŸ¥è¿œâ€ç­‰ï¼Œè¿™äº›åå­—éƒ½æ¯”è¾ƒæ–‡é›…ï¼Œç¬¦åˆä¼ ç»Ÿæ–‡åŒ–ï¼ŒåŒæ—¶åˆä¸å¤±ç°ä»£æ„Ÿã€‚æˆ‘éœ€è¦ä¿æŒè¿™ç§é£æ ¼ï¼Œé¿å…ç”Ÿåƒ»å­—ï¼Œç¡®ä¿åå­—æœ—æœ—ä¸Šå£ã€‚<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>å¦å¤–ï¼Œç”¨æˆ·å¯èƒ½å¸Œæœ›åå­—æœ‰ç‹¬ç‰¹çš„å¯“æ„ï¼ŒåŒæ—¶é¿å…é‡å¤ã€‚æ¯”å¦‚â€œå®‹æ˜è½©â€ä¸­çš„â€œæ˜â€è±¡å¾å…‰æ˜ï¼Œâ€œè½©â€æœ‰æ°”åº¦çš„æ„æ€ï¼Œè¿™æ ·çš„ç»„åˆæ—¢ä¼ ç»Ÿåˆç°ä»£ã€‚æˆ‘éœ€è¦æ£€æŸ¥æ¯ä¸ªåå­—çš„å¯“æ„æ˜¯å¦æ˜ç¡®ï¼Œå¹¶ä¸”æ²¡æœ‰é‡å¤çš„å­—ã€‚<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>è¿˜è¦æ³¨æ„åå­—çš„ç»“æ„ï¼Œå§“æ°â€œå®‹â€æ˜¯å•å§“ï¼Œåå­—é€šå¸¸ä¸ºä¸¤ä¸ªå­—ï¼Œæ‰€ä»¥æ¯ä¸ªåå­—éƒ½æ˜¯ä¸¤ä¸ªå­—çš„ç»„åˆã€‚éœ€è¦ç¡®ä¿æ¯ä¸ªåå­—éƒ½ç¬¦åˆè¿™ä¸ªç»“æ„ï¼Œå¹¶ä¸”æ•´ä½“çœ‹èµ·æ¥åè°ƒã€‚<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>æœ€åï¼Œç”¨æˆ·è¦æ±‚ä¸è¶…è¿‡10ä¸ªåå­—ï¼Œæ‰€ä»¥æˆ‘è¦æ§åˆ¶æ•°é‡ï¼Œç¡®ä¿æ¯ä¸ªåå­—éƒ½ç»è¿‡ç­›é€‰ï¼Œç¬¦åˆæ‰€æœ‰è¦æ±‚ã€‚åŒæ—¶ï¼Œè¾“å‡ºæ ¼å¼å¿…é¡»ä¸¥æ ¼éµå¾ªé€—å·åˆ†éš”ï¼Œæ²¡æœ‰å…¶ä»–æ–‡å­—ï¼Œè¿™å¯èƒ½éœ€è¦åœ¨ç”Ÿæˆæ—¶ç‰¹åˆ«æ³¨æ„æ ¼å¼çš„æ­£ç¡®æ€§ï¼Œé¿å…ä»»ä½•å¤šä½™çš„å­—ç¬¦æˆ–ç©ºæ ¼ã€‚<span class="hljs-subst">\n</span>&lt;/think&gt;<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>å®‹çŸ¥è¿œ"</span>,<span class="hljs-string">"å®‹äº‘èˆŸ"</span>,<span class="hljs-string">"å®‹æ™¯è¡Œ"</span>,<span class="hljs-string">"å®‹æ¸…æ™"</span>,<span class="hljs-string">"å®‹ä¿®è¿œ"</span>,<span class="hljs-string">"å®‹å¢¨è¨€"</span>,<span class="hljs-string">"å®‹æ€€ç‘¾"</span>,<span class="hljs-string">"å®‹æ‰¿æ³½"</span>,<span class="hljs-string">"å®‹æ˜è½©"</span>,<span class="hljs-string">"å®‹è‡´è¿œ"</span>]
</code></pre>
<h3 data-id="heading-11">3.6 å·¥å…·/å‡½æ•°è°ƒç”¨</h3>
<p>åˆ©ç”¨å¤–éƒ¨çš„å·¥å…·ï¼Œå‡½æ•°ç°æœ‰çš„èƒ½åŠ›ï¼ŒåŒæ—¶åˆ©ç”¨å¤§æ¨¡å‹çš„èƒ½åŠ›ï¼Œç»“åˆèµ·æ¥å®Œæˆå¤æ‚çš„ä»»åŠ¡ï¼Œä¾‹å¦‚ï¼š</p>
<ol>
<li>æŸäº›æ•°å­¦è®¡ç®—å‡½æ•°ï¼Œå¤©æ°”æŸ¥è¯¢æœåŠ¡ï¼Œä¸‹å•æœåŠ¡ï¼Œè®¢ç¥¨æœåŠ¡ï¼Œå‘é‚®ä»¶ç­‰ï¼Œåˆ©ç”¨è¿™äº›æœåŠ¡å¯ä»¥æ‰©å±•å¤§æ¨¡å‹çš„èƒ½åŠ›</li>
<li>åˆä¾‹å¦‚é€šè¿‡æ•°æ®åº“æŸ¥è¯¢ä¿¡æ¯ï¼Œæ–‡æ¡£åº“æŸ¥è¯¢æ–‡æ¡£</li>
</ol>
<p>å·¥å…·ç±»</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">ai</span>.<span class="hljs-property">tool</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">Tool</span>;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TicketUtil</span> {

    <span class="hljs-meta">@Tool</span>(description = <span class="hljs-string">"è¾“å…¥å‡ºå‘åœ°å’Œç›®çš„åœ°ï¼Œè´­ä¹°ç«è½¦ç¥¨"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">buyTicket</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> source, <span class="hljs-built_in">String</span> target</span>) {

        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å·²è´­ä¹°"</span> + source + <span class="hljs-string">"åˆ°"</span> + target + <span class="hljs-string">"çš„ç¥¨"</span>);
    }
}
</code></pre>
<p>å¤§æ¨¡å‹è¯·æ±‚æ—¶ï¼Œä½¿ç”¨toolæ–¹æ³•</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span> com.jd.ai.util.TicketUtil;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.client.ChatClient;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

@Service
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TicketService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ChatClient chatClient;


    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">TicketService</span><span class="hljs-params">(ChatClient.Builder chatClientBuilder)</span> </span>{
        <span class="hljs-keyword">this</span>.chatClient = chatClientBuilder.<span class="hljs-built_in">build</span>();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">buyTicket</span><span class="hljs-params">()</span> </span>{

        <span class="hljs-keyword">return</span> chatClient
                .<span class="hljs-built_in">prompt</span>(<span class="hljs-string">"å¸®æˆ‘ä¹°åŒ—äº¬åˆ°æ™‹åŸçš„è½¦ç¥¨"</span>)
                .<span class="hljs-built_in">tools</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">TicketUtil</span>())
                .<span class="hljs-built_in">call</span>()
                .<span class="hljs-built_in">content</span>();

    }


}
</code></pre>

<pre><code class="hljs language-bash" lang="bash">å¤§æ¨¡å‹å›å¤ï¼š
å¥½çš„ï¼Œç”¨æˆ·è®©æˆ‘å¸®å¿™ä¹°åŒ—äº¬åˆ°æ™‹åŸçš„è½¦ç¥¨ã€‚é¦–å…ˆï¼Œæˆ‘éœ€è¦ç¡®è®¤å‡ºå‘åœ°å’Œç›®çš„åœ°æ˜¯å¦æ­£ç¡®ã€‚ç”¨æˆ·å·²ç»æ˜ç¡®è¯´æ˜æ˜¯åŒ—äº¬åˆ°æ™‹åŸï¼Œæ‰€ä»¥ç›´æ¥è°ƒç”¨buyTicketå‡½æ•°ï¼Œå‚æ•°æ˜¯<span class="hljs-built_in">source</span>:åŒ—äº¬ï¼Œtarget:æ™‹åŸã€‚æ²¡æœ‰å…¶ä»–å‚æ•°éœ€è¦å¤„ç†ï¼Œæ¯”å¦‚æ—¥æœŸæˆ–åº§ä½ç±»å‹ï¼Œæ‰€ä»¥ç›´æ¥ç”Ÿæˆå·¥å…·è°ƒç”¨ã€‚ç„¶åï¼Œç³»ç»Ÿè¿”å›â€œDoneâ€ï¼Œè¯´æ˜æ“ä½œæˆåŠŸã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘åº”è¯¥å‘Šè¯‰ç”¨æˆ·è´­ç¥¨æˆåŠŸï¼Œå¹¶è¯¢é—®æ˜¯å¦éœ€è¦è¿›ä¸€æ­¥å¸®åŠ©ï¼Œæ¯”å¦‚ç¡®è®¤è½¦æ¬¡æˆ–åŠç†ä¹˜è½¦è¯ã€‚è¿™æ ·æ—¢å®Œæˆäº†è´­ç¥¨ï¼Œåˆæä¾›äº†åç»­æ”¯æŒï¼Œç¡®ä¿ç”¨æˆ·æ»¡æ„ã€‚ æ‚¨çš„åŒ—äº¬è‡³æ™‹åŸè½¦ç¥¨å·²æˆåŠŸè´­ä¹°ï¼è¯·é—®æ˜¯å¦éœ€è¦å¸®æ‚¨æŸ¥è¯¢å…·ä½“è½¦æ¬¡ä¿¡æ¯æˆ–åŠç†ä¹˜è½¦è¯ç›¸å…³æ‰‹ç»­å‘¢ï¼Ÿ

æ§åˆ¶å°è¾“å‡ºï¼š
å·²è´­ä¹°åŒ—äº¬åˆ°æ™‹åŸçš„ç¥¨
</code></pre>
<h3 data-id="heading-12">3.7 çŸ¥è¯†åº“å’ŒRAG</h3>
<p>RAG(Retrieval Augmented Generation)æ˜¯æ£€ç´¢å¢å¼ºç”Ÿæˆï¼Œç®€å•æ¥è®²é€šè¿‡æå‰æ£€ç´¢ä¸€äº›çŸ¥è¯†ï¼Œå°†è¿™äº›çŸ¥è¯†å’Œç”¨æˆ·çš„é—®é¢˜ä¸€èµ·ç»™å¤§æ¨¡å‹ï¼Œä¼šæé«˜å¤§æ¨¡å‹å›å¤çš„è´¨é‡</p>
<h4 data-id="heading-13">3.7.1 çŸ¥è¯†åº“</h4>
<p>å¯¹äºé€šè¿‡åˆ†è¯çš„æ£€ç´¢ç³»ç»Ÿæ¥è®²ï¼ŒçŸ¥è¯†åº“ä¸€èˆ¬æ˜¯é€šè¿‡è¯­ä¹‰æ¥æ£€ç´¢çš„ï¼Œè¦å®ç°è¯­ä¹‰æ£€ç´¢ï¼Œéœ€è¦å¯¹æ•°æ®åšå‘é‡åŒ–ï¼Œæ‰€ä»¥éœ€è¦å‘é‡æ¨¡å‹å’Œå‘é‡åº“</p>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬ç”¨<code>SimpleVectorStore</code>æ¥åšå‘é‡åº“ï¼Œè¿™æ˜¯ä¸€ä¸ªå†…å­˜åº“</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> org.springframework.ai.embedding.EmbeddingModel;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.SimpleVectorStore;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.VectorStore;
<span class="hljs-keyword">import</span> org.springframework.context.<span class="hljs-keyword">annotation</span>.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.<span class="hljs-keyword">annotation</span>.Configuration;

<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">VectorStoreConfiguration</span> {
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> VectorStore vectorStore(EmbeddingModel embeddingModel) {
        <span class="hljs-keyword">return</span> SimpleVectorStore.builder(embeddingModel).build();
    }
}
</code></pre>
<p>ä½¿ç”¨<code>mxbai-embed-large</code>ä½œä¸ºå‘é‡æ¨¡å‹ï¼Œè¿™ä¸ªæ¨¡å‹ä¹Ÿä½¿ç”¨äº†ollamaçš„åŠŸèƒ½ï¼Œä¸”åœ¨SpringAIä¸­ä¸éœ€è¦é¢å¤–çš„é…ç½®å°±å¯ä»¥ä½¿ç”¨ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.spring.io%2Fspring-ai%2Freference%2Fapi%2Fembeddings%2Follama-embeddings.html" target="_blank" title="https://docs.spring.io/spring-ai/reference/api/embeddings/ollama-embeddings.html" ref="nofollow noopener noreferrer">å‚ç…§æ–‡æ¡£</a>åšä¸€äº›å®šåˆ¶é…ç½®ï¼Œè¿™é‡Œæˆ‘ä»¬å­˜äº†ä¸€äº›<a href="https://link.juejin.cn?target=https%3A%2F%2Fdouban.8610000.xyz%2Fq.json" target="_blank" title="https://douban.8610000.xyz/q.json" ref="nofollow noopener noreferrer">è±†ç“£çš„ç”µå½±ä¿¡æ¯</a>åˆ°é‡Œé¢</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> jakarta.annotation.PostConstruct;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.client.ChatClient;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.client.advisor.MessageChatMemoryAdvisor;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.memory.ChatMemory;
<span class="hljs-keyword">import</span> org.springframework.ai.chat.memory.MessageWindowChatMemory;
<span class="hljs-keyword">import</span> org.springframework.ai.document.Document;
<span class="hljs-keyword">import</span> org.springframework.ai.reader.JsonReader;
<span class="hljs-keyword">import</span> org.springframework.ai.vectorstore.VectorStore;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.core.io.FileSystemResource;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MovieService</span> {


    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ChatClient chatClient;

    <span class="hljs-meta">@Autowired</span>
    VectorStore vectorStore;


    <span class="hljs-meta">@PostConstruct</span>
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">load</span><span class="hljs-params">()</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">sourceFile</span> <span class="hljs-operator">=</span> <span class="hljs-string">"/Users/songjiyang.3/Downloads/less_douban_movie.json"</span>;
        <span class="hljs-type">JsonReader</span> <span class="hljs-variable">jsonReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileSystemResource</span>(sourceFile),
                <span class="hljs-string">"title"</span>, <span class="hljs-string">"year"</span>, <span class="hljs-string">"id"</span>, <span class="hljs-string">"role_desc"</span>, <span class="hljs-string">"original_title"</span>);
        List&lt;Document&gt; documents = jsonReader.get();
        <span class="hljs-built_in">this</span>.vectorStore.add(documents);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MovieService</span><span class="hljs-params">(ChatClient.Builder chatClientBuilder)</span> {
        <span class="hljs-type">ChatMemory</span> <span class="hljs-variable">chatMemory</span> <span class="hljs-operator">=</span> MessageWindowChatMemory.builder().maxMessages(<span class="hljs-number">10</span>).build();

        <span class="hljs-built_in">this</span>.chatClient = chatClientBuilder
                .defaultAdvisors(MessageChatMemoryAdvisor.builder(chatMemory).build())
                .build();
    }

    <span class="hljs-keyword">public</span> List&lt;Document&gt; <span class="hljs-title function_">search</span><span class="hljs-params">(String query)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.vectorStore.similaritySearch(query);
    }



  
</code></pre>
<p>ä¸‹é¢æ˜¯ä»å‘é‡åº“çš„æœç´¢ç»“æœï¼Œæœç´¢2013ä¼šå‡ºç°2013å¹´çš„ç”µå½±ï¼Œæœå–œå‰§ä¹Ÿå‡ºæ¥ä¸€äº›ç”µå½±ï¼Œä½†å¹¶ä¸æ˜¯ååˆ†å‡†ç¡®ï¼Œå› ä¸ºæˆ‘ä»¬è¿™åªå­˜äº†ç”µå½±çš„æ ‡é¢˜å’Œæ¼”å‘˜åç§°ï¼Œå¦‚æœåŠ å…¥ä¸€äº›å‰§æƒ…æ–‡æœ¬ï¼Œå¯èƒ½ä¼šåŒ¹é…å‡ºæ¥</p>
<pre><code class="hljs language-swift" lang="swift">http:<span class="hljs-comment">//localhost:8080/search-movie?query=2013</span>

[{<span class="hljs-string">"id"</span>:<span class="hljs-string">"9eb7a024-e1aa-45ef-921b-f565b45b4fd0"</span>,<span class="hljs-string">"text"</span>:<span class="hljs-string">"title: ææ€–ç›´æ’­<span class="hljs-subst">\n</span>year: 2013<span class="hljs-subst">\n</span>id: 21360417<span class="hljs-subst">\n</span>role_desc: é‡‘ç§‰ç¥ / æ²³æ­£å®‡ / æç’Ÿè£ / å…¨æ…§ç<span class="hljs-subst">\n</span>original_title: ë” í…ŒëŸ¬ ë¼ì´ë¸Œ<span class="hljs-subst">\n</span>"</span>,<span class="hljs-string">"media"</span>:null,<span class="hljs-string">"metadata"</span>:{<span class="hljs-string">"distance"</span>:<span class="hljs-number">0.4173857673321675</span>},<span class="hljs-string">"score"</span>:<span class="hljs-number">0.5826142326678325</span>},{<span class="hljs-string">"id"</span>:<span class="hljs-string">"b6a81d8a-bc6f-4eb1-921a-6a130f12b3eb"</span>,<span class="hljs-string">"text"</span>:<span class="hljs-string">"title: æœ¬å‘½å¹´<span class="hljs-subst">\n</span>year: 1990<span class="hljs-subst">\n</span>id: 1296266<span class="hljs-subst">\n</span>role_desc: è°¢é£ / è”¡é¸¿ç¿” / ç¨‹ç³ / å§œæ–‡<span class="hljs-subst">\n</span>original_title: <span class="hljs-subst">\n</span>"</span>,<span class="hljs-string">"media"</span>:null,<span class="hljs-string">"metadata"</span>:{<span class="hljs-string">"distance"</span>:<span class="hljs-number">0.41915724341448546</span>},<span class="hljs-string">"score"</span>:<span class="hljs-number">0.5808427565855145</span>},{<span class="hljs-string">"id"</span>:<span class="hljs-string">"c5a67630-92ce-40b7-97c8-1ff989add62a"</span>,<span class="hljs-string">"text"</span>:<span class="hljs-string">"title: ç´ åª›<span class="hljs-subst">\n</span>year: 2013<span class="hljs-subst">\n</span>id: 21937452<span class="hljs-subst">\n</span>role_desc: ææ¿¬ç›Š / è–›æ™¯æ±‚ / ä¸¥å¿—åª› / ææ¥<span class="hljs-subst">\n</span>original_title: ì†Œì›<span class="hljs-subst">\n</span>"</span>,<span class="hljs-string">"media"</span>:null,<span class="hljs-string">"metadata"</span>:{<span class="hljs-string">"distance"</span>:<span class="hljs-number">0.4254743519837735</span>},<span class="hljs-string">"score"</span>:<span class="hljs-number">0.5745256480162265</span>},{<span class="hljs-string">"id"</span>:<span class="hljs-string">"d4d735e2-ac91-47e4-b241-dc7d86a32c6a"</span>,<span class="hljs-string">"text"</span>:<span class="hljs-string">"title: 7å·æˆ¿çš„ç¤¼ç‰©<span class="hljs-subst">\n</span>year: 2013<span class="hljs-subst">\n</span>id: 10777687<span class="hljs-subst">\n</span>role_desc: æç„•åº† / æŸ³æ‰¿é¾™ / æœ´ä¿¡æƒ  / éƒ‘é•‡è£<span class="hljs-subst">\n</span>original_title: 7ë²ˆë°©ì˜ ì„ ë¬¼<span class="hljs-subst">\n</span>"</span>,<span class="hljs-string">"media"</span>:null,<span class="hljs-string">"metadata"</span>:{<span class="hljs-string">"distance"</span>:<span class="hljs-number">0.4299756041030963</span>},<span class="hljs-string">"score"</span>:<span class="hljs-number">0.5700243958969037</span>}]


http:<span class="hljs-comment">//localhost:8080/search-movie?query=å–œå‰§</span>
[{<span class="hljs-string">"id"</span>:<span class="hljs-string">"b8243634-9582-478f-ad61-69668af77d4d"</span>,<span class="hljs-string">"text"</span>:<span class="hljs-string">"title: ç†”ç‚‰<span class="hljs-subst">\n</span>year: 2011<span class="hljs-subst">\n</span>id: 5912992<span class="hljs-subst">\n</span>role_desc: é»„ä¸œèµ« / å­”ä¾‘ / éƒ‘æœ‰ç¾ / é‡‘è´¤ç§€<span class="hljs-subst">\n</span>original_title: ë„ê°€ë‹ˆ<span class="hljs-subst">\n</span>"</span>,<span class="hljs-string">"media"</span>:null,<span class="hljs-string">"metadata"</span>:{<span class="hljs-string">"distance"</span>:<span class="hljs-number">0.4354497256890415</span>},<span class="hljs-string">"score"</span>:<span class="hljs-number">0.5645502743109585</span>},{<span class="hljs-string">"id"</span>:<span class="hljs-string">"3a9d6a51-f99a-45cd-b6b3-36d868474b40"</span>,<span class="hljs-string">"text"</span>:<span class="hljs-string">"title: æˆ‘èƒ½è¯´<span class="hljs-subst">\n</span>year: 2017<span class="hljs-subst">\n</span>id: 27000061<span class="hljs-subst">\n</span>role_desc: é‡‘ç‚«é”¡ / ç½—æ–‡å§¬ / æå¸å‹‹ / å»‰æƒ å…°<span class="hljs-subst">\n</span>original_title: ì•„ì´ ìº” ìŠ¤í”¼í¬<span class="hljs-subst">\n</span>"</span>,<span class="hljs-string">"media"</span>:null,<span class="hljs-string">"metadata"</span>:{<span class="hljs-string">"distance"</span>:<span class="hljs-number">0.44649545952808223</span>},<span class="hljs-string">"score"</span>:<span class="hljs-number">0.5535045404719178</span>},{<span class="hljs-string">"id"</span>:<span class="hljs-string">"7b21368e-4a78-4561-aa9a-dc3287b66372"</span>,<span class="hljs-string">"text"</span>:<span class="hljs-string">"title: å¯ç›çŒ«<span class="hljs-subst">\n</span>year: 2009<span class="hljs-subst">\n</span>id: 2310047<span class="hljs-subst">\n</span>role_desc: åˆç”°ç»éƒ / åˆç”°ç»éƒ<span class="hljs-subst">\n</span>original_title: ã“ã¾æ’®ã‚Šæ˜ ç”»ãƒ»ã“ã¾ã­ã“<span class="hljs-subst">\n</span>"</span>,<span class="hljs-string">"media"</span>:null,<span class="hljs-string">"metadata"</span>:{<span class="hljs-string">"distance"</span>:<span class="hljs-number">0.44757831325045716</span>},<span class="hljs-string">"score"</span>:<span class="hljs-number">0.5524216867495428</span>},{<span class="hljs-string">"id"</span>:<span class="hljs-string">"14c92297-f014-4b9d-8613-cfcdf9b2578c"</span>,<span class="hljs-string">"text"</span>:<span class="hljs-string">"title: çº¢é³‰é±¼<span class="hljs-subst">\n</span>year: 2015<span class="hljs-subst">\n</span>id: 26266892<span class="hljs-subst">\n</span>role_desc: é«˜ç•‘ç§€å¤ª / äºŒå®«å’Œä¹Ÿ / åŒ—é‡æ­¦ / å®«å·å¤§è¾…<span class="hljs-subst">\n</span>original_title: èµ¤ã‚ã ã‹<span class="hljs-subst">\n</span>"</span>,<span class="hljs-string">"media"</span>:null,<span class="hljs-string">"metadata"</span>:{<span class="hljs-string">"distance"</span>:<span class="hljs-number">0.4475958034962455</span>},<span class="hljs-string">"score"</span>:<span class="hljs-number">0.5524041965037545</span>}]
</code></pre>
<h4 data-id="heading-14">3.7.2 RAG</h4>
<p>æœ‰äº†çŸ¥è¯†åº“ä¹‹åï¼Œå¯ä»¥åœ¨æ­¤çš„åŸºç¡€ä¸Šé¢ï¼Œå¯¹å¤§æ¨¡å‹çš„é—®é¢˜åšå¢å¼ºæ£€ç´¢</p>
<pre><code class="hljs language-scss" lang="scss">    public String <span class="hljs-built_in">suggestKnow</span>(String query){
        return chatClient<span class="hljs-selector-class">.prompt</span>()
                <span class="hljs-selector-class">.system</span>("ä½ æ˜¯ä¸€ä¸ªç”µå½±æ¨èä¸“å®¶ï¼Œè¯·æ ¹æ®ç”¨æˆ·è¾“å…¥çš„æŸ¥è¯¢è¯å’ŒçŸ¥è¯†åº“ä¿¡æ¯ï¼Œæ¨èä¸€éƒ¨ç”µå½±ã€‚")
                <span class="hljs-selector-class">.advisors</span>(new QuestionAnswerAdvisor(vectorStore))
                <span class="hljs-selector-class">.user</span>(query)
                <span class="hljs-selector-class">.call</span>()
                <span class="hljs-selector-class">.content</span>();
    }

    public String <span class="hljs-built_in">suggest</span>(String query){
        return chatClient<span class="hljs-selector-class">.prompt</span>()
                <span class="hljs-selector-class">.system</span>("ä½ æ˜¯ä¸€ä¸ªç”µå½±æ¨èä¸“å®¶ï¼Œè¯·æ ¹æ®ç”¨æˆ·è¾“å…¥çš„æŸ¥è¯¢è¯ï¼Œæ¨èä¸€éƒ¨ç”µå½±ã€‚")
                <span class="hljs-selector-class">.user</span>(query)
                <span class="hljs-selector-class">.call</span>()
                <span class="hljs-selector-class">.content</span>();
    }
</code></pre>
<p>æ¨èç»“æœï¼Œå¯ä»¥çœ‹åˆ°æœ‰æ— çŸ¥è¯†åº“çš„åŒºåˆ«ï¼Œä½†æ˜¯å› ä¸ºåœ¨è¿™ï¼Œè¿™ä¸ªçŸ¥è¯†åº“çš„è´¨é‡ä¸é«˜ï¼Œæ‰€ä»¥æ•´ä½“æ¥è®²ï¼Œæ— çŸ¥è¯†åº“åè€Œæ¨èçš„æ›´å¥½</p>
<pre><code class="hljs language-bash" lang="bash">http://localhost:8080/suggest-movie?query=å–œå‰§

å¥½çš„ï¼Œç”¨æˆ·æƒ³è¦æ¨èä¸€éƒ¨å–œå‰§ç”µå½±ã€‚é¦–å…ˆï¼Œæˆ‘éœ€è¦ç¡®å®šç”¨æˆ·å¯èƒ½å–œæ¬¢çš„å–œå‰§ç±»å‹ï¼Œæ˜¯è½»æ¾å¹½é»˜çš„ï¼Œè¿˜æ˜¯å¸¦æœ‰è®½åˆºæˆ–å®¶åº­å…ƒç´ çš„ï¼Ÿä¸è¿‡ç”¨æˆ·åªæåˆ°â€œå–œå‰§â€è¿™ä¸ªè¯ï¼Œæ²¡æœ‰æ›´å¤šç»†èŠ‚ï¼Œæ‰€ä»¥æˆ‘å¾—é€‰ä¸€éƒ¨å¹¿å—å¥½è¯„ã€é€‚åˆå¤§å¤šæ•°äººçš„å–œå‰§ã€‚ è€ƒè™‘åˆ°ä¸åŒåœ°åŒºçš„è§‚ä¼—ï¼Œå¯èƒ½éœ€è¦æ¨èä¸€éƒ¨å›½é™…çŸ¥åçš„ç”µå½±ï¼Œæ¯”å¦‚ç¾å›½æˆ–æ¬§æ´²çš„ã€‚æ¯”å¦‚ã€Šç–¯ç‹‚çš„çŸ³å¤´ã€‹æ˜¯åè¯­ç‰‡ï¼Œå¯èƒ½ç”¨æˆ·å¯¹ä¸­å›½ç”µå½±æ„Ÿå…´è¶£ï¼Ÿæˆ–è€…é€‰ä¸€éƒ¨ç»å…¸çš„è€ç”µå½±ï¼Œæ¯”å¦‚ã€Šå¤§è¯è¥¿æ¸¸ã€‹ï¼Ÿä¸è¿‡ç”¨æˆ·å¯èƒ½æƒ³è¦æ›´ç°ä»£çš„ã€‚ å¦å¤–ï¼Œç”¨æˆ·å¯èƒ½å¸Œæœ›ç”µå½±æœ‰æ·±åº¦ï¼Œä¸åªæ˜¯å•çº¯çš„æç¬‘ï¼Œæ¯”å¦‚ã€Šæ­»äº¡è¯—ç¤¾ã€‹è™½ç„¶åå‰§æƒ…ï¼Œä½†ä¹Ÿæœ‰å¹½é»˜å…ƒç´ ï¼Ÿæˆ–è€…åƒã€Šä¼´æˆ‘åŒè¡Œã€‹è¿™æ ·çš„æˆé•¿å–œå‰§ï¼Ÿä¸è¿‡ç”¨æˆ·æ˜ç¡®è¦å–œå‰§ï¼Œå¯èƒ½æ›´å€¾å‘äºçº¯ç²¹æç¬‘çš„ã€‚ å†æƒ³æƒ³ï¼Œåƒã€Šç–¯ç‹‚åŠ¨ç‰©åŸã€‹è¿™æ ·çš„åŠ¨ç”»å–œå‰§ï¼Œé€‚åˆå„ä¸ªå¹´é¾„å±‚ï¼Œè€Œä¸”å£ç¢‘ä¸é”™ã€‚æˆ–è€…ã€Šè§¦ä¸å¯åŠã€‹è¿™æ ·çš„æ³•å¼å–œå‰§ï¼Œæ—¢æœ‰å¹½é»˜åˆæœ‰æ¸©æƒ…ã€‚æˆ–è€…ã€Šäººåœ¨å›§é€”ã€‹è¿™æ ·çš„åè¯­å–œå‰§ï¼Œæ¯”è¾ƒè´´è¿‘ç”Ÿæ´»ã€‚ ä¸è¿‡ç”¨æˆ·å¯èƒ½æ²¡æœ‰æ˜ç¡®åœ°åŒºåå¥½ï¼Œæ‰€ä»¥é€‰ä¸€éƒ¨å›½é™…è®¤å¯çš„ï¼Œæ¯”å¦‚ã€Šå¸ƒè¾¾ä½©æ–¯å¤§é¥­åº—ã€‹è™½ç„¶å¸¦ç‚¹æ–‡è‰ºï¼Œä½†ä¹Ÿæœ‰å–œå‰§å…ƒç´ ã€‚æˆ–è€…ã€Šé“¶æ²³æŠ¤å«é˜Ÿã€‹è¿™æ ·çš„è¶…çº§è‹±é›„å–œå‰§ï¼Œæ¯”è¾ƒå—æ¬¢è¿ã€‚ ç»¼åˆè€ƒè™‘ï¼Œå¯èƒ½é€‰ä¸€éƒ¨å¹¿ä¸ºäººçŸ¥ã€è¯„ä»·é«˜çš„ï¼Œæ¯”å¦‚ã€Šç–¯ç‹‚çš„çŸ³å¤´ã€‹ä½œä¸ºåè¯­ä»£è¡¨ï¼Œæˆ–è€…ã€Šä¼´æˆ‘åŒè¡Œã€‹ä½œä¸ºç»å…¸ã€‚ä¸è¿‡ç”¨æˆ·å¯èƒ½æƒ³è¦æ›´è¿‘æœŸçš„ï¼Œæ¯”å¦‚ã€Šäººç”Ÿé¥æ§å™¨ã€‹æˆ–è€…ã€Šç–¯ç‹‚åŠ¨ç‰©åŸã€‹ã€‚æˆ–è€…ã€Šå¤§ä¾¦æ¢ç¦å°”æ‘©æ–¯ã€‹è™½ç„¶ååŠ¨ä½œï¼Œä½†ä¹Ÿæœ‰å¹½é»˜ã€‚ å†æ£€æŸ¥ä¸€ä¸‹ï¼Œç”¨æˆ·å¯èƒ½éœ€è¦ä¸€éƒ¨é€‚åˆæ¨èç»™æœ‹å‹çš„ï¼Œæ‰€ä»¥é€‰ä¸€éƒ¨å£ç¢‘å¥½ã€æœ‰ç¬‘ç‚¹çš„ï¼Œæ¯”å¦‚ã€Šäººåœ¨å›§é€”ã€‹æˆ–è€…ã€Šç–¯ç‹‚çš„çŸ³å¤´ã€‹ã€‚æˆ–è€…ã€Šå¤§è¯è¥¿æ¸¸ã€‹ä½œä¸ºç»å…¸ï¼Œä½†å¯èƒ½ç”¨æˆ·å·²ç»çœ‹è¿‡ã€‚ æœ€ç»ˆå†³å®šæ¨èã€Šç–¯ç‹‚çš„çŸ³å¤´ã€‹ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€éƒ¨åè¯­å–œå‰§ï¼Œå‰§æƒ…ç´§å‡‘ï¼Œæœ‰åè½¬ï¼Œé€‚åˆå–œæ¬¢é»‘è‰²å¹½é»˜çš„è§‚ä¼—ã€‚åŒæ—¶ä¹Ÿèƒ½å±•ç¤ºä¸­å›½ç”µå½±çš„ç‰¹è‰²ï¼Œå¯èƒ½ç”¨æˆ·å¯¹è¿™æ–¹é¢æ„Ÿå…´è¶£ã€‚æˆ–è€…å†è€ƒè™‘å…¶ä»–é€‰é¡¹ï¼Œæ¯”å¦‚ã€Šè®©å­å¼¹é£ã€‹ä¹Ÿæ˜¯å¼ è‰ºè°‹çš„ï¼Œä½†æ›´åå‰§æƒ…ã€‚å¯èƒ½è¿˜æ˜¯ã€Šç–¯ç‹‚çš„çŸ³å¤´ã€‹æ›´åˆé€‚ã€‚ æ ¹æ®æ‚¨çš„éœ€æ±‚ï¼Œæˆ‘æ¨èã€Šç–¯ç‹‚çš„çŸ³å¤´ã€‹ï¼ˆ2006å¹´ï¼Œä¸­å›½ï¼‰ã€‚è¿™éƒ¨ç”±å¾å³¥è‡ªç¼–è‡ªå¯¼è‡ªæ¼”çš„é»‘è‰²å¹½é»˜å–œå‰§ï¼Œä»¥é‡åº†ç«é”…åº—ä¸ºèƒŒæ™¯ï¼Œé€šè¿‡å¤šæ¡æ•…äº‹çº¿äº¤ç»‡å±•å¼€ã€‚å½±ç‰‡å°†æ±Ÿæ¹–æ©æ€¨ã€å•†æˆ˜åšå¼ˆä¸å¸‚äº•ç”Ÿæ´»å·§å¦™ç»“åˆï¼Œæ—¢æœ‰è’è¯çš„ç¬‘ç‚¹ï¼Œåˆæš—å«å¯¹äººæ€§çš„æ·±åˆ»å‰–æã€‚å…¶ç‹¬ç‰¹çš„å™äº‹ç»“æ„å’Œå¯¹å¸‚äº•æ–‡åŒ–çš„åˆ»ç”»ï¼Œä½¿å…¶æˆä¸ºåè¯­å–œå‰§ä¸­çš„ç»å…¸ä¹‹ä½œã€‚

http://localhost:8080/suggest-movie-know?query=å–œå‰§
å¥½çš„ï¼Œç”¨æˆ·ç°åœ¨è¦æ‰¾å–œå‰§ç±»çš„ç”µå½±æ¨èã€‚æˆ‘éœ€è¦æ ¹æ®æä¾›çš„çŸ¥è¯†åº“é‡Œçš„ä¿¡æ¯æ¥æ¨èã€‚é¦–å…ˆï¼Œæˆ‘è¦çœ‹ä¸€ä¸‹çŸ¥è¯†åº“é‡Œçš„ç”µå½±åˆ—è¡¨ï¼Œçœ‹çœ‹å“ªäº›æ˜¯å–œå‰§ç±»å‹ã€‚ çŸ¥è¯†åº“é‡Œçš„ç”µå½±æœ‰å››éƒ¨ï¼šç†”ç‚‰ï¼ˆ2011ï¼‰ã€æˆ‘èƒ½è¯´ï¼ˆ2017ï¼‰ã€å¯ç›çŒ«ï¼ˆ2009ï¼‰ã€çº¢é³‰é±¼ï¼ˆ2015ï¼‰ã€‚ä¸è¿‡ï¼Œè¿™äº›ç”µå½±çš„æè¿°é‡Œæ²¡æœ‰æ˜ç¡®æåˆ°ç±»å‹ï¼Œåªæœ‰è§’è‰²å’Œå¯¼æ¼”ç­‰ä¿¡æ¯ã€‚æ¯”å¦‚ï¼Œç†”ç‚‰å¯èƒ½æ˜¯ä¸€éƒ¨å‰§æƒ…ç‰‡æˆ–è€…ç¤¾ä¼šå‰§ï¼Œå› ä¸ºå®ƒçš„åŸåæ˜¯â€œé“åŠ å°¼â€ï¼Œå¯èƒ½æ¶‰åŠç¤¾ä¼šé—®é¢˜ã€‚æˆ‘èƒ½è¯´çš„æè¿°é‡Œä¹Ÿæ²¡æœ‰ç±»å‹ä¿¡æ¯ï¼Œä½†æ ¹æ®åå­—å¯èƒ½æ¶‰åŠè¯­è¨€æˆ–æ²Ÿé€šçš„ä¸»é¢˜ï¼Œå¯èƒ½ä¸æ˜¯å–œå‰§ã€‚å¯ç›çŒ«çš„åŸåæ˜¯â€œã“ã¾æ’®ã‚Šæ˜ ç”»ãƒ»ã“ã¾ã­ã“â€ï¼Œçœ‹èµ·æ¥åƒæ˜¯å…³äºçŒ«çš„ç”µå½±ï¼Œå¯èƒ½å¸¦æœ‰å¹½é»˜å…ƒç´ ï¼Œä½†ä¸ç¡®å®šæ˜¯å¦æ˜¯å–œå‰§ã€‚çº¢é³‰é±¼çš„åŸåæ˜¯â€œèµ¤ã‚ã ã‹â€ï¼Œå¯èƒ½å’Œé±¼ç±»æœ‰å…³ï¼Œä½†ç±»å‹ä¸æ˜ç¡®ã€‚ é—®é¢˜åœ¨äºï¼Œç”¨æˆ·è¦æ±‚æ¨èå–œå‰§ï¼Œä½†æä¾›çš„çŸ¥è¯†åº“ä¸­æ²¡æœ‰æ˜ç¡®è¯´æ˜ä»»ä½•ç”µå½±å±äºå–œå‰§ç±»å‹ã€‚å› æ­¤ï¼Œæ ¹æ®ç°æœ‰çš„ä¿¡æ¯ï¼Œæ— æ³•ç¡®å®šè¿™äº›ç”µå½±æ˜¯å¦ç¬¦åˆå–œå‰§çš„è¦æ±‚ã€‚è¿™æ—¶å€™åº”è¯¥å‘Šè¯‰ç”¨æˆ·ï¼Œæ ¹æ®æä¾›çš„èµ„æ–™ï¼Œæ— æ³•æ¨èå–œå‰§ç”µå½±ï¼Œå› ä¸ºæ²¡æœ‰ç›¸å…³ç±»å‹çš„ä¿¡æ¯ã€‚éœ€è¦ç¡®è®¤æ˜¯å¦æœ‰å…¶ä»–ä¿¡æ¯æˆ–è€…æ˜¯å¦éœ€è¦è¿›ä¸€æ­¥è¡¥å……ã€‚ æ ¹æ®æä¾›çš„èµ„æ–™ï¼Œè¿™äº›ç”µå½±çš„æè¿°ä¸­æœªæ˜ç¡®æåŠå–œå‰§ç±»å‹ï¼Œå› æ­¤æ— æ³•ç›´æ¥æ¨èç¬¦åˆå–œå‰§åˆ†ç±»çš„å½±ç‰‡ã€‚å»ºè®®æä¾›æ›´å¤šå…³äºç”µå½±ç±»å‹çš„ç»†èŠ‚æˆ–è¡¥å……ä¿¡æ¯ä»¥ä¾¿æ›´ç²¾å‡†æ¨èã€‚
</code></pre>
<h3 data-id="heading-15">3.8 MCP</h3>
<p>MCP(Model Context Protocol )æ˜¯å¤§æ¨¡å‹åº”ç”¨å’Œå…¶ä»–èµ„æºæˆ–è€…å·¥å…·äº¤äº’çš„ä¸€ç§æ ‡å‡†åè®®ï¼Œåˆ†ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯</p>
<h4 data-id="heading-16">3.8.1 MCPæœåŠ¡ç«¯</h4>
<p>å¼•å…¥ä¾èµ–ï¼Œwebmvcè¿™ç§æ–¹å¼ä¼šæš´éœ²ä¸€ä¸ªhttpè·¯å¾„ï¼Œå…¶ä»–mcpå®¢æˆ·ç«¯é€šè¿‡è¿™ä¸ªè·¯å¾„æ¥è¿™ä¸ªæœåŠ¡ç«¯äº¤äº’ï¼Œè¿˜æœ‰å…¶ä»–æ–¹å¼æ¥å®ç°MCPæœåŠ¡ï¼Œä¾‹å¦‚STDIO</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-starter-mcp-server-webmvc<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>åœ¨åŸå…ˆçš„ä¹°ç¥¨å·¥å…·ä¸Šé¢ï¼ŒåŠ ä¸€ä¸ªToolCallbackProviderï¼Œè¿™ä¸ªä¼šæŠŠå·¥å…·ç±»æš´éœ²å‡ºæ¥</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TicketUtil</span> {

    <span class="hljs-meta">@Tool</span>(description = <span class="hljs-string">"è¾“å…¥å‡ºå‘åœ°å’Œç›®çš„åœ°ï¼Œè´­ä¹°ç«è½¦ç¥¨"</span>)
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">buyTicket</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> source, <span class="hljs-built_in">String</span> target</span>) {

        <span class="hljs-title class_">System</span>.<span class="hljs-property">out</span>.<span class="hljs-title function_">println</span>(<span class="hljs-string">"å·²è´­ä¹°"</span> + source + <span class="hljs-string">"åˆ°"</span> + target + <span class="hljs-string">"çš„ç¥¨"</span>);
    }

    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">ToolCallbackProvider</span> <span class="hljs-title function_">tools</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">MethodToolCallbackProvider</span>.<span class="hljs-title function_">builder</span>().<span class="hljs-title function_">toolObjects</span>(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">build</span>();
    }
}
</code></pre>
<p>å¢åŠ é…ç½®</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">spring.ai.mcp.server.name</span>=webmvc-mcp-server
<span class="hljs-attr">spring.ai.mcp.server.version</span>=<span class="hljs-number">1.0</span>.<span class="hljs-number">0</span>
<span class="hljs-attr">spring.ai.mcp.server.type</span>=SYNC
<span class="hljs-attr">spring.ai.mcp.server.instructions</span>=This server provides weather information tools and resources
<span class="hljs-attr">spring.ai.mcp.server.sse-message-endpoint</span>=/mcp/messages
<span class="hljs-attr">spring.ai.mcp.server.capabilities.tool</span>=<span class="hljs-literal">true</span>
<span class="hljs-attr">spring.ai.mcp.server.capabilities.resource</span>=<span class="hljs-literal">true</span>
<span class="hljs-attr">spring.ai.mcp.server.capabilities.prompt</span>=<span class="hljs-literal">true</span>
<span class="hljs-attr">spring.ai.mcp.server.capabilities.completion</span>=<span class="hljs-literal">true</span>
</code></pre>
<p>ä½¿ç”¨MCPå®¢æˆ·ç«¯æ¥å…¥ï¼Œè¿™é‡Œä½¿ç”¨äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.cherry-ai.com%2F" target="_blank" title="https://docs.cherry-ai.com/" ref="nofollow noopener noreferrer">Cherry-Studio</a>ï¼Œé¦–å…ˆåœ¨é‡Œé¢é…ç½®MCPæœåŠ¡</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4e7ca88c859b45b399623f900b5f088a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259426&amp;x-signature=hS3nr5FDvvAdsXDxFi8UbOzjPrs%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8ccd11394d7f48d4add23f112c7004b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259426&amp;x-signature=Gtp7lzaVDXL8p7yeft9ZyzaFYeE%3D" alt="" loading="lazy"/></p>
<p>ç„¶ååœ¨å¯¹è¯é—®ç­”ä¸­å‹¾é€‰MCPæœåŠ¡å¹¶æé—®ï¼Œå¯ä»¥çœ‹åˆ°MCPè°ƒç”¨<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdd76c6c166f48b5b7b9fa052360db52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259426&amp;x-signature=CA2q5Nk%2BxPeAxH6yE4tsPQH7PYM%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-17">3.8.2 MCPå®¢æˆ·ç«¯</h4>
<p>MCPçš„å®¢æˆ·ç«¯å¯ä»¥æ˜¯ä¸€ä¸ªIDEï¼Œæˆ–è€…å¤§æ¨¡å‹å¯¹è¯å®¢æˆ·ç«¯ï¼ˆä¾‹å¦‚ä¸Šé¢çš„Cherry-Studioï¼‰ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç¨‹åºï¼ŒSpringAIä¹Ÿæ”¯æŒå®ç°MCPå®¢æˆ·ç«¯</p>
<p>å¼•å…¥ä¾èµ–</p>
<pre><code class="hljs language-xml" lang="xml">    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-starter-mcp-client<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>SpirngBooté…ç½®</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">spring.ai.ollama.chat.enabled</span>=<span class="hljs-literal">true</span>
<span class="hljs-attr">spring.ai.model.chat</span>=ollama
<span class="hljs-attr">spring.ai.ollama.chat.options.model</span>=qwen3:<span class="hljs-number">8</span>b
<span class="hljs-attr">spring.ai.chat.observations.include-prompt</span>=<span class="hljs-literal">true</span>
<span class="hljs-attr">spring.ai.chat.observations.include-completion</span>=<span class="hljs-literal">true</span>
<span class="hljs-attr">management.tracing.sampling.probability</span>=<span class="hljs-number">1.0</span>
<span class="hljs-attr">spring.ai.mcp.client.sse.connections.server1.url</span>=http://localhost:<span class="hljs-number">8080</span>
<span class="hljs-attr">server.port</span>=<span class="hljs-number">8081</span>  //æœ¬åœ°<span class="hljs-number">8080</span>è¢«MCPæœåŠ¡ç«¯å ç”¨äº†
</code></pre>
<p>åœ¨æ¨¡å‹è°ƒç”¨ä¸­åŠ å…¥MCPæœåŠ¡ï¼Œæ³¨é‡Šçš„ä»£ç æ˜¯ä¸Šé¢ä½¿ç”¨æœ¬åœ°å·¥å…·çš„ä¾‹å­ï¼ŒMCPå¯ä»¥ç†è§£ä¸ºè¿œç¨‹æˆ–è€…å¤–éƒ¨çš„å·¥å…·ï¼ŒMCPæœåŠ¡ç«¯å°±æ˜¯åˆšåˆšåœ¨ä¸Šä¸€èŠ‚ä¸­æˆ‘ä»¬è‡ªå·±å®ç°çš„æœåŠ¡ç«¯ï¼Œæˆ‘ä»¬é€šè¿‡é…ç½®çš„<code>http://localhost:8080</code>æ‰¾åˆ°äº†å®ƒï¼Œå¹¶äº†è§£äº†å®ƒæœ‰å“ªäº›å·¥å…·ï¼Œè¿™äº›éƒ½æ˜¯SpringAIå¸®æˆ‘ä»¬åšçš„</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">import</span> org.springframework.ai.chat.client.ChatClient;
<span class="hljs-keyword">import</span> org.springframework.ai.mcp.SyncMcpToolCallbackProvider;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.<span class="hljs-keyword">annotation</span>.Autowired;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TicketService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ChatClient chatClient;
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SyncMcpToolCallbackProvider toolCallbackProvider;

    <span class="hljs-keyword">public</span> TicketService(ChatClient.Builder chatClientBuilder) {
        <span class="hljs-keyword">this</span>.chatClient = chatClientBuilder.build();
    }


    <span class="hljs-keyword">public</span> String buyTicketMCP() {

        <span class="hljs-keyword">return</span> chatClient
                .prompt(<span class="hljs-string">"å¸®æˆ‘ä¹°åŒ—äº¬åˆ°æ™‹åŸçš„è½¦ç¥¨"</span>)
                .toolCallbacks(toolCallbackProvider)
                .call()
                .content();

    }
  
<span class="hljs-comment">//    public String buyTicket() {</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//        return chatClient</span>
<span class="hljs-comment">//                .prompt("å¸®æˆ‘ä¹°åŒ—äº¬åˆ°æ™‹åŸçš„è½¦ç¥¨")</span>
<span class="hljs-comment">//                .tools(new TicketUtil())</span>
<span class="hljs-comment">//                .call()</span>
<span class="hljs-comment">//                .content();</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//    }</span>

}
</code></pre>
<p>ä½¿ç”¨å’Œç»“æœï¼Œå¯ä»¥çœ‹åˆ°å¤§æ¨¡å‹çš„æ€è€ƒè¿‡ç¨‹ä¸­æ˜¯ä½¿ç”¨äº†mcpæœåŠ¡çš„</p>
<pre><code class="hljs language-bash" lang="bash">http://localhost:8081/buy-ticket-mcp?query=ä¹°åŒ—äº¬çš„æ™‹åŸçš„ç¥¨


å¥½çš„ï¼Œç”¨æˆ·è®©æˆ‘å¸®å¿™ä¹°åŒ—äº¬åˆ°æ™‹åŸçš„è½¦ç¥¨ã€‚é¦–å…ˆï¼Œæˆ‘éœ€è¦ç¡®è®¤ç”¨æˆ·çš„éœ€æ±‚æ˜¯å¦æ˜ç¡®ã€‚ç”¨æˆ·æåˆ°çš„å‡ºå‘åœ°æ˜¯åŒ—äº¬ï¼Œç›®çš„åœ°æ˜¯æ™‹åŸï¼Œè¿™ä¸¤ä¸ªåœ°ç‚¹éƒ½æ˜¯ä¸­å›½çš„åŸå¸‚ï¼Œä½†éœ€è¦ç¡®è®¤æ˜¯å¦æœ‰ç›´è¾¾çš„ç«è½¦çº¿è·¯ï¼Œæˆ–è€…æ˜¯å¦éœ€è¦ä¸­è½¬ã€‚ä¸è¿‡ï¼Œæ ¹æ®æä¾›çš„å·¥å…·å‡½æ•°ï¼Œä¼¼ä¹åªéœ€è¦è¾“å…¥å‡ºå‘åœ°å’Œç›®çš„åœ°å³å¯ï¼Œä¸éœ€è¦è€ƒè™‘å…¶ä»–å¤æ‚å› ç´ ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘éœ€è¦æ£€æŸ¥å·¥å…·å‡½æ•°çš„å‚æ•°ã€‚å·¥å…·å‡½æ•°æ˜¯spring_ai_mcp_client_server1_buyTicketï¼Œå‚æ•°æ˜¯arg0å’Œarg1ï¼Œéƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ã€‚æ ¹æ®æè¿°ï¼Œarg0åº”è¯¥æ˜¯å‡ºå‘åœ°ï¼Œarg1æ˜¯ç›®çš„åœ°ã€‚å› æ­¤ï¼Œæ­£ç¡®çš„å‚æ•°åº”è¯¥æ˜¯arg0ä¸ºâ€œåŒ—äº¬â€ï¼Œarg1ä¸ºâ€œæ™‹åŸâ€ã€‚ ä¸è¿‡ï¼Œæˆ‘éœ€è¦ç¡®è®¤ç”¨æˆ·æ˜¯å¦å·²ç»æä¾›äº†è¶³å¤Ÿçš„ä¿¡æ¯ã€‚æ¯”å¦‚ï¼Œæ˜¯å¦æœ‰æŒ‡å®šæ—¥æœŸã€åº§ä½ç±»å‹æˆ–è€…è½¦æ¬¡åå¥½ï¼Ÿä½†ç”¨æˆ·çš„é—®é¢˜ä¸­æ²¡æœ‰æåˆ°è¿™äº›ç»†èŠ‚ï¼Œæ‰€ä»¥å¯èƒ½åªéœ€è¦å¤„ç†åŸºæœ¬çš„å‡ºå‘åœ°å’Œç›®çš„åœ°ã€‚å¦‚æœç”¨æˆ·åç»­æœ‰æ›´å¤šéœ€æ±‚ï¼Œå¯èƒ½éœ€è¦è¿›ä¸€æ­¥è¯¢é—®ï¼Œä½†å½“å‰æƒ…å†µä¸‹ï¼Œå…ˆæŒ‰ç…§æä¾›çš„ä¸¤ä¸ªå‚æ•°å¤„ç†ã€‚ å¦å¤–ï¼Œè¦ç¡®ä¿è¾“å…¥çš„æ ¼å¼æ­£ç¡®ï¼Œæ˜¯å¦éœ€è¦ä½¿ç”¨å…¨ç§°è¿˜æ˜¯ç®€ç§°ï¼Ÿæ¯”å¦‚ï¼ŒåŒ—äº¬é€šå¸¸ç”¨â€œåŒ—äº¬â€è¡¨ç¤ºï¼Œæ™‹åŸä¹Ÿæ˜¯å…¨ç§°ã€‚æ‰€ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸¤ä¸ªåŸå¸‚åç§°ä½œä¸ºå‚æ•°åº”è¯¥æ˜¯æ­£ç¡®çš„ã€‚ æœ€åï¼Œç”Ÿæˆå¯¹åº”çš„å·¥å…·è°ƒç”¨ï¼Œå°†å‚æ•°å¡«å…¥å‡½æ•°ä¸­ï¼Œè¿”å›æ­£ç¡®çš„JSONç»“æ„ã€‚ç¡®ä¿æ²¡æœ‰æ‹¼å†™é”™è¯¯ï¼Œå‚æ•°é¡ºåºæ­£ç¡®ï¼Œarg0æ˜¯å‡ºå‘åœ°ï¼Œarg1æ˜¯ç›®çš„åœ°ã€‚è¿™æ ·ç”¨æˆ·çš„éœ€æ±‚å°±èƒ½è¢«æ­£ç¡®å¤„ç†äº†ã€‚ è½¦ç¥¨è´­ä¹°è¯·æ±‚å·²å¤„ç†ï¼ŒåŒ—äº¬è‡³æ™‹åŸçš„ç«è½¦ç¥¨å·²æˆåŠŸé¢„è®¢ã€‚è¯·æ³¨æ„æŸ¥æ”¶çŸ­ä¿¡é€šçŸ¥ï¼Œç¡®è®¤è½¦æ¬¡å’Œä¹˜è½¦æ—¶é—´ã€‚å¦‚æœ‰å…¶ä»–éœ€æ±‚ï¼Œè¯·éšæ—¶å‘ŠçŸ¥ã€‚
</code></pre>
<h3 data-id="heading-18">3.9 ç›‘æ§å’ŒæŒ‡æ ‡</h3>
<p>é€šè¿‡å¯¹å¤§æ¨¡å‹åº”ç”¨çš„ç›‘æ§ï¼Œå¯ä»¥æœ‰ä»¥ä¸‹å¥½å¤„ï¼š</p>
<ol>
<li>æ–¹ä¾¿è°ƒè¯•ã€å¼€å‘ï¼Œäº†è§£å¤§æ¨¡å‹åº”ç”¨å†…éƒ¨çš„æ‰§è¡Œæµç¨‹</li>
<li>è€—æ—¶åˆ†æ</li>
<li>Tokenæˆæœ¬åˆ†æ</li>
<li>æ¨¡å‹è¯„ä¼°çš„å‰æ</li>
<li>æ–¹ä¾¿æ’æŸ¥é—®é¢˜</li>
</ol>
<p>è¿™é‡Œæˆ‘ä»¬ä¸»è¦ç”¨çš„æ˜¯<a href="https://link.juejin.cn?target=https%3A%2F%2Flangfuse.com%2Fdocs%2Fobservability%2Foverview" target="_blank" title="https://langfuse.com/docs/observability/overview" ref="nofollow noopener noreferrer">LangFuse</a>ï¼Œç°åœ¨SpringAIå·²ç»å¯ä»¥å¾ˆå¥½çš„å’ŒLangFuseé…åˆæ¥ç›‘æ§å¤§æ¨¡å‹è°ƒç”¨ï¼Œä½†ç›®å‰å¯¹äºå·¥å…·ã€MCPçš„è°ƒç”¨è¿˜æ¬ ç¼ºï¼Œéœ€è¦è‡ªå·±æ¥å®ç°</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç›‘æ§çš„ç¤ºä¾‹ï¼Œå·¦è¾¹æ˜¯ä¸€ç³»åˆ—çš„è¯·æ±‚ï¼Œå³è¾¹æ˜¯æŸä¸€ä¸ªè¯·æ±‚çš„è¯¦æƒ…ï¼Œå¯ä»¥çœ‹åˆ°å„ä¸ªæ‰§è¡ŒèŠ‚ç‚¹ï¼Œå„ä¸ªèŠ‚ç‚¹å…¥å‚å’Œå‡ºå‚ç­‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73d4a022b054418db94c790c9d5427e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259426&amp;x-signature=veHVZsehpWLvQtEBG1vPXUNoRkg%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-19">3.9.1 æ¥å…¥LangFuse</h4>
<p>æ¥å…¥çš„ä¾èµ–å’Œé…ç½®å‚è€ƒ3.1</p>
<p>å¦å¤–éœ€è¦é…ç½®çš„ä¸€ä¸ªURLå’Œç§˜é’¥ï¼ŒURLæ˜¯LangFuseçš„å¯åŠ¨çš„åœ°å€ï¼Œç§˜é’¥éœ€è¦é€šè¿‡LangFuseç®¡ç†ç•Œé¢ç”Ÿæˆï¼Œé…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">OTEL_EXPORTER_OTLP_ENDPOINT</span>=http://localhost:<span class="hljs-number">3000</span>/api/public/otel<span class="hljs-comment">;OTEL_EXPORTER_OTLP_HEADERS=Authorization\=Basic cGstbGYtNGFhYjdhNWEtNThjYi00MWQ2LWIyODktY2M1MDgyMmNiMDliOnNrLWxmLWYxM2YzMmMzLTlkMzItNGE5My1iZmI0LTMxODFiOTE1Yzg2Yw\=\=</span>
</code></pre>
<p>è¯¦æƒ…è§<a href="https://link.juejin.cn?target=https%3A%2F%2Flangfuse.com%2Fintegrations%2Fframeworks%2Fspring-ai" target="_blank" title="https://langfuse.com/integrations/frameworks/spring-ai" ref="nofollow noopener noreferrer">LangFuseæ–‡æ¡£</a></p>
<h3 data-id="heading-20">3.10 æ¨¡å‹è¯„ä¼°</h3>
<p>å¾ˆå¤šæ—¶å€™ï¼Œåœ¨å¼€å‘å¤§æ¨¡å‹åº”ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä¸æ–­è°ƒæ•´æç¤ºè¯ï¼ŒçŸ¥è¯†åº“ï¼Œå·¥ä½œæµï¼Œå·¥å…·ï¼Œæ¨¡å‹ã€æ¨¡å‹å‚æ•°ç­‰ï¼Œè¿™äº›å†…å®¹çš„å˜æ›´ï¼Œéƒ½ä¼šå½±å“æœ€ç»ˆå¤§æ¨¡å‹çš„å›å¤è´¨é‡ï¼Œä¸ºäº†ä¿è¯å¤§æ¨¡å‹çš„å›å¤è´¨é‡æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæ‰€ä»¥éœ€è¦æœ‰æ¨¡å‹è¯„ä¼°è¿™ä¸ªç¯èŠ‚</p>
<p>ä¸‹é¢æ˜¯æ¨¡å‹è¯„ä¼°çš„ä¸€ä¸ªåŸºæœ¬æµç¨‹</p>
<ol>
<li>
<p>ç¦»çº¿è¯„ä¼°</p>
<ol>
<li>å‡†å¤‡æ•°æ®é›†ï¼Œä¹Ÿå°±æ˜¯ç”¨æˆ·çš„é—®é¢˜å’ŒæœŸæœ›çš„å›å¤</li>
<li>è¿è¡Œæ•°æ®é›†æµ‹è¯•</li>
<li>è¯„ä¼°ç”Ÿæˆçš„ç»“æœï¼Œå¯ä»¥äººå·¥/å¤§æ¨¡å‹/è‡ªå®šä¹‰çš„æ–¹å¼è¯„ä¼°</li>
</ol>
</li>
<li>
<p>åœ¨çº¿è¯„ä¼°ï¼Œåœ¨ç¦»çº¿è¯„ä¼°è¾¾åˆ°ä¸€ä¸ªå¯ä»¥ä¸Šçº¿çš„æ°´å¹³ä¹‹å</p>
<ol>
<li>çº¿ä¸Šæ”¶é›†ç”¨æˆ·é—®é¢˜å’Œå®é™…çš„å›å¤</li>
<li>è¯„ä¼°ç”Ÿæˆçš„ç»“æœï¼Œå¯ä»¥äººå·¥/å¤§æ¨¡å‹/è‡ªå®šä¹‰çš„æ–¹å¼è¯„ä¼°ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç»“åˆç”¨æˆ·çš„åé¦ˆ</li>
<li>æ ¹æ®å®é™…çš„è¯„ä¼°æ•°æ®ï¼Œæ‰¾åˆ°ç°æœ‰æµç¨‹çš„é—®é¢˜ï¼Œæ›´æ–°åŸæœ‰æµç¨‹ï¼ŒåŒæ—¶å¡«åŠ æ–°çš„æµ‹è¯•é›†æ•°æ®</li>
</ol>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e34a53de2679425a8abb7ba52986f047~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259426&amp;x-signature=lO4JdbFvHzwrDClAY0VlRTthVqs%3D" alt="" loading="lazy"/></p>
<p>LangFuseå¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°ä¸Šé¢çš„è¯„ä¼°ï¼Œè¯¦æƒ…å¯ä»¥<a href="https://link.juejin.cn?target=https%3A%2F%2Flangfuse.com%2Fdocs%2Fevaluation%2Foverview" target="_blank" title="https://langfuse.com/docs/evaluation/overview" ref="nofollow noopener noreferrer">å‚è€ƒæ–‡æ¡£</a></p>
<h3 data-id="heading-21">3.11 å¤šæ¨¡æ€è°ƒç”¨</h3>
<p>æ›´æ¢ollamaæ”¯æŒå¤šæ¨¡æ€çš„æ¨¡å‹ï¼Œè¿™é€‰ç”¨äº†llama3.2-vision:11bï¼Œæ”¯æŒå›¾æ–‡</p>
<p>ä¿®æ”¹é…ç½®</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">spring.ai.ollama.chat.options.model</span>=llama3.<span class="hljs-number">2</span>-vision:<span class="hljs-number">11</span>b
</code></pre>
<p>å¤šæ¨¡æ€è°ƒç”¨</p>
<pre><code class="hljs language-typescript" lang="typescript">    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">multiModality</span>(<span class="hljs-params"/>) {

        <span class="hljs-keyword">return</span> chatClient.<span class="hljs-title function_">prompt</span>()
                .<span class="hljs-title function_">system</span>(<span class="hljs-string">"ç»“æœå¿…é¡»ç”¨ä¸­æ–‡å›å¤"</span>)
                .<span class="hljs-title function_">user</span>(u -&gt; u.<span class="hljs-title function_">text</span>(<span class="hljs-string">"è§£é‡Šå›¾ç‰‡çš„å†…å®¹"</span>)
                        .<span class="hljs-title function_">media</span>(<span class="hljs-title class_">MimeTypeUtils</span>.<span class="hljs-property">IMAGE_PNG</span>, <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileSystemResource</span>(<span class="hljs-string">"/Users/songjiyang.3/Downloads/OIP-C.jpeg"</span>)))
                .<span class="hljs-title function_">call</span>()
                .<span class="hljs-title function_">content</span>();
    }
</code></pre>
<p>ç»“æœ</p>
<pre><code class="hljs">è¯¥å›¾ç‰‡æ˜¾ç¤ºäº†ä¸€åªçŒ«çš„å¤´éƒ¨ï¼ŒçŒ«çš„å¤´éƒ¨è¢«ä¸€ä¸ªç™½è‰²æ¯›æ¯¯åŒ…è£¹èµ·æ¥ï¼ŒçŒ«çš„çœ¼ç›è¢«æ¯›æ¯¯çš„éƒ¨åˆ†é®ä½äº†ã€‚
</code></pre>
<h3 data-id="heading-22">3.12 æ’ä»¶ç®¡ç†</h3>
<p>æˆ‘ä»¬åœ¨æœ‰äº›å¼€æºçš„å¤§æ¨¡å‹å·¥å…·ä¸­ï¼Œä¼šçœ‹åˆ°<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.coze.cn%2Fopen%2Fdocs%2Fguides%2Fplugin" target="_blank" title="https://www.coze.cn/open/docs/guides/plugin" ref="nofollow noopener noreferrer">æ’ä»¶</a>ï¼Œæ’ä»¶æ˜¯ä¸€ä¸ªå·¥å…·é›†ï¼Œä¸€ä¸ªæ’ä»¶å†…å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå·¥å…·ï¼ˆAPIï¼‰</p>
<p>çœ‹èµ·æ¥åªæ˜¯æŠŠå¤šä¸ªå·¥å…·æ•´åˆèµ·æ¥ï¼Œä½†é…ç½®æ’ä»¶å¸‚åœºï¼Œå¯ä»¥è®©å·¥å…·å˜çš„åƒæ‰‹æœºAPPä¸€æ ·ï¼Œå®‰è£…å³å¯ä½¿ç”¨ï¼Œå¤§é‡ç°æˆçš„å·¥å…·å¯ä»¥ä¾›æˆ‘ä»¬ä½¿ç”¨ï¼ˆå¯èƒ½éœ€è¦ä»˜è´¹ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c467982842394a439bc2f5c9ceb897ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259426&amp;x-signature=T2JanJwGAMVlOXvgnJNhRr%2BkVMo%3D" alt="" loading="lazy"/></p>
<p>å¯¹äºSaasæœåŠ¡è¿™ä¸ªéå¸¸å¥½ç”¨ï¼Œä¹Ÿç®—æ˜¯ä¸€ç§å¼€æº</p>
<h2 data-id="heading-23">4. æ€»ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»äº†ä½¿ç”¨SpringAI + Ollama + LangFuse æ„å»ºå¤§æ¨¡å‹åº”ç”¨ï¼ŒåŒ…æ‹¬æ•´ä½“çš„æ¶æ„ï¼Œå’Œä½¿ç”¨SpringAIæ„å»ºåº”ç”¨çš„å„ä¸ªç»†èŠ‚ï¼Œåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½ä¼šæ›´å¤æ‚</p>
<p>é€‚ç”¨äºä¼ä¸šçº§å®šåˆ¶å¼€å‘ã€å¤æ‚å¯¹è¯ç³»ç»Ÿã€RAGçŸ¥è¯†é—®ç­”</p>
<h2 data-id="heading-24">5. æƒ³æ³•</h2>
<p>å¤§æ¨¡å‹æŠ€æœ¯çš„åº•å±‚æ˜¯ç®—åŠ›ï¼Œç°åœ¨äº’è”ç½‘åº”ç”¨èƒ½ç»™ç”¨æˆ·å…è´¹ä½¿ç”¨çš„åŸå› æ˜¯å› ä¸ºæœåŠ¡å™¨ä»¥æä½çš„æˆæœ¬è¢«å¤§é‡ç”¨æˆ·å…±äº«ä½¿ç”¨ï¼Œè€Œå¤§é‡ç”¨æˆ·å¸¦æ¥çš„æµé‡çš„æ”¶ç›Šæ˜¯é«˜äºè¿™äº›æˆæœ¬çš„ï¼Œä¸€æ—¦æœåŠ¡å™¨çš„æˆæœ¬å˜é«˜ï¼Œå…¬å¸å°±æ˜¯ä½¿ç”¨æŸäº›æ‰‹æ®µï¼Œä¾‹å¦‚é™é€Ÿï¼Œè®¢é˜…çš„æ–¹å¼æ¥å¹³è¡¡æ”¯å‡ºã€‚</p>
<p>è€Œå¤§æ¨¡å‹çš„ä½¿ç”¨ä¾èµ–ç®—åŠ›ï¼Œé—®ä¸€ä¸ªé—®é¢˜çš„æˆæœ¬å¤§æ¦‚å¯ä»¥ä¼°è®¡å‡ºæ¥ï¼Œå¦‚ä¸‹è¡¨ï¼Œè™½ç„¶çœ‹èµ·æ¥æˆæœ¬ä¸é«˜ï¼Œä½†ç”¨æˆ·ä½“é‡ä¸€æ—¦èµ·æ¥ï¼Œç®—åŠ›æˆæœ¬éå¸¸é«˜ï¼Œç°åœ¨ä¹‹æ‰€ä»¥å¾ˆå¤šæ˜¯å…è´¹ä½¿ç”¨ï¼Œä¸€æ˜¯å› ä¸ºç°åœ¨è¿˜å¤„äºæŠ¢å å¸‚åœºé˜¶æ®µï¼ŒäºŒæ˜¯å› ä¸ºç”¨æˆ·çš„è¾“å…¥å¯ä»¥æˆæœ¬å¤§æ¨¡å‹çš„è®­ç»ƒæ•°æ®ã€‚</p>



































<table><thead><tr><th>å‚å•†</th><th>å…è´¹æ”¿ç­–</th><th>ä¼ä¸šçº§APIä»·æ ¼ï¼ˆè¾“å…¥/è¾“å‡ºï¼‰</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ç™¾åº¦æ–‡å¿ƒä¸€è¨€</td><td>å…¨åŠŸèƒ½å…è´¹</td><td>0.004/0.016å…ƒ/åƒtokensï¼ˆ4.5ï¼‰</td><td>ä¸ªäºº/ä¼ä¸šå…¨åœºæ™¯</td></tr><tr><td>é˜¿é‡Œé€šä¹‰åƒé—®</td><td>æ–°ç”¨æˆ·å…è´¹é¢åº¦</td><td>0.0003/0.0006å…ƒ/åƒtokensï¼ˆTurboï¼‰</td><td>æ€§ä»·æ¯”ä¼˜å…ˆçš„ä¼ä¸šåº”ç”¨</td></tr><tr><td>åä¸ºç›˜å¤</td><td>æ— å…è´¹é¢åº¦</td><td>æ¨ç†èµ„æº20å…ƒ/å°æ—¶èµ·</td><td>å·¥ä¸šçº§å¤æ‚ä»»åŠ¡</td></tr><tr><td>å­—èŠ‚è±†åŒ…</td><td>å®Œå…¨å…è´¹</td><td>æœªå…¬å¼€ï¼ˆå½“å‰å…è´¹ï¼‰</td><td>ä¸ªäººå­¦ä¹ ã€è½»é‡å¼€å‘</td></tr></tbody></table>
<p>åŸºæœ¬ä¸Šæ˜¯ä¸å¯èƒ½å…è´¹ç»™ç”¨æˆ·ä½¿ç”¨ï¼Œå¤§èƒ†çŒœæµ‹ä¸€ä¸‹ï¼Œåé¢ç®—åŠ›ä¼šå˜ä¸ºå®½å¸¦ï¼Œæµé‡è¿™æ ·çš„åŸºç¡€è®¾æ–½ï¼Œç”±ç”¨æˆ·è‡ªè¡Œè´­ä¹°ä½¿ç”¨æ¥æ»¡è¶³è‡ªå·±çš„éœ€æ±‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[çˆ†è‚6å‘¨ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºä¸€å¥—ç”Ÿäº§çº§RAGè®ºæ–‡ç ”ç©¶åŠ©æ‰‹]]></title>    <link>https://juejin.cn/post/7578803751609860146</link>    <guid>https://juejin.cn/post/7578803751609860146</guid>    <pubDate>2025-12-02T05:58:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578803751609860146" data-draft-id="7578781397118320686" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çˆ†è‚6å‘¨ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºä¸€å¥—ç”Ÿäº§çº§RAGè®ºæ–‡ç ”ç©¶åŠ©æ‰‹"/> <meta itemprop="keywords" content="LLM,Agent,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-02T05:58:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹æ•™ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1145012233707299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çˆ†è‚6å‘¨ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºä¸€å¥—ç”Ÿäº§çº§RAGè®ºæ–‡ç ”ç©¶åŠ©æ‰‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1145012233707299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹æ•™ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T05:58:07.000Z" title="Tue Dec 02 2025 05:58:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote>
<p>åœ¨å½“ä»ŠAIæµªæ½®ä¸­ï¼Œå¤§æ¨¡å‹ï¼ˆLLMï¼‰æ— ç–‘æ˜¯æŠ€æœ¯å‰æ²¿çš„æ˜æ˜Ÿã€‚ç„¶è€Œï¼Œå¦‚ä½•è®©å¤§æ¨¡å‹æ›´å¥½åœ°ç†è§£æˆ‘ä»¬çš„ç§æœ‰æ•°æ®ï¼Œå¹¶æä¾›æ›´å‡†ç¡®ã€æ›´å¯ä¿¡çš„å›ç­”ï¼ŒRAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æŠ€æœ¯ç»™å‡ºäº†ä¸€ä¸ªç»ä½³çš„ç­”æ¡ˆã€‚ä½†å¸‚é¢ä¸Šå…³äºRAGçš„æ•™ç¨‹ï¼Œå¾€å¾€æ­¢æ­¥äºç†è®ºæˆ–ç®€å•çš„åŸå‹ï¼Œè·ç¦»çœŸæ­£çš„â€œç”Ÿäº§çº§â€ç³»ç»Ÿæ€»æœ‰ä¸€æ®µè·ç¦»ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬è¦ä»‹ç»çš„è¿™ä¸ªå¼€æºé¡¹ç›®ï¼Œæ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸€ç—›ç‚¹è€Œæ¥ã€‚å®ƒä¸æ˜¯ç®€å•çš„ä»£ç å †ç Œï¼Œè€Œæ˜¯ä¸€ä¸ªä¸ºæœŸ6å‘¨ã€<strong>ä»¥å­¦ä¹ è€…ä¸ºä¸­å¿ƒ</strong>çš„<strong>ç”Ÿäº§çº§RAGç³»ç»Ÿå®æˆ˜æ•™ç¨‹</strong>â€”â€”ã€ŠThe Mother of AI Projectã€‹çš„ç¬¬ä¸€é˜¶æ®µï¼š<strong>arXivè®ºæ–‡ç­–å±•äºº (arXiv Paper Curator)</strong> ã€‚</p>
<p>è¿™ä¸ªé¡¹ç›®å°†æ‰‹æŠŠæ‰‹å¸¦ä½ æ„å»ºä¸€ä¸ªå®Œæ•´çš„AIç ”ç©¶åŠ©æ‰‹ã€‚å®ƒèƒ½è‡ªåŠ¨æŠ“å–å­¦æœ¯è®ºæ–‡ï¼Œæ·±å…¥ç†è§£å…¶å†…å®¹ï¼Œå¹¶è¿ç”¨å…ˆè¿›çš„RAGæŠ€æœ¯ï¼Œç²¾å‡†å›ç­”ä½ çš„ç ”ç©¶ç–‘é—®ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒå°†æ•™ä¼šä½ å¦‚ä½•æŒ‰ç…§è¡Œä¸šæœ€ä½³å®è·µï¼Œä»é›¶å¼€å§‹æ­å»ºä¸€ä¸ª<strong>ç”Ÿäº§çº§çš„RAGç³»ç»Ÿ</strong>ã€‚</p>
<p>å®ƒä¸ä¼—ä¸åŒä¹‹å¤„åœ¨äºï¼š<strong>å¼ºè°ƒå…ˆæ‰“å¥½å…³é”®è¯æœç´¢çš„åŸºç¡€ï¼Œå†ç»“åˆå‘é‡æœç´¢è¿›è¡Œæ··åˆæ£€ç´¢</strong>ã€‚è¿™æ­£æ˜¯è®¸å¤šæˆåŠŸä¼ä¸šæ„å»ºæœç´¢ç³»ç»Ÿæ‰€éµå¾ªçš„ä¸“ä¸šè·¯å¾„â€”â€”ä»¥æ‰å®çš„æœç´¢åŸºç¡€ä¸ºæ ¸å¿ƒï¼Œå†è¾…ä»¥AIå¢å¼ºï¼Œè€Œéä¸€å‘³è¿½æ±‚AIä¼˜å…ˆè€Œå¿½è§†äº†æœç´¢çš„æ ¹æœ¬ã€‚</p>
<p>é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œä½ ä¸ä»…èƒ½æ‹¥æœ‰ä¸€ä¸ªå¼ºå¤§çš„AIç ”ç©¶åŠ©æ‰‹ï¼Œæ›´èƒ½æŒæ¡æ„å»ºä»»ä½•é¢†åŸŸç”Ÿäº§çº§RAGç³»ç»Ÿçš„æ·±åšæŠ€æœ¯ã€‚</p>
<h3 data-id="heading-0">ä½ å°†æ„å»ºä»€ä¹ˆï¼Ÿ</h3>
<p>è¿™ä¸ªé¡¹ç›®ä»¥å‘¨ä¸ºå•ä½ï¼Œå¾ªåºæ¸è¿›åœ°æ„å»ºä¸€ä¸ªå¤æ‚è€Œå¼ºå¤§çš„RAGç³»ç»Ÿï¼š</p>
<ul>
<li><strong>ç¬¬1å‘¨ï¼š</strong> æ­å»ºDockerã€FastAPIã€PostgreSQLã€OpenSearchå’ŒAirflowæ„æˆçš„å®Œæ•´åŸºç¡€è®¾æ–½ã€‚</li>
<li><strong>ç¬¬2å‘¨ï¼š</strong> å®ç°è‡ªåŠ¨è·å–å’Œè§£æarXivå­¦æœ¯è®ºæ–‡çš„æ•°æ®ç®¡é“ã€‚</li>
<li><strong>ç¬¬3å‘¨ï¼š</strong> å­¦ä¹ ç”Ÿäº§çº§BM25å…³é”®è¯æœç´¢ï¼ŒåŒ…æ‹¬è¿‡æ»¤å’Œç›¸å…³æ€§è¯„åˆ†ã€‚</li>
<li><strong>ç¬¬4å‘¨ï¼š</strong> æŒæ¡æ™ºèƒ½åˆ†å—æŠ€æœ¯ï¼Œå¹¶ç»“åˆå…³é”®è¯ä¸è¯­ä¹‰ç†è§£å®ç°æ··åˆæœç´¢ã€‚</li>
<li><strong>ç¬¬5å‘¨ï¼š</strong> æ„å»ºå®Œæ•´çš„RAGç®¡é“ï¼Œé›†æˆæœ¬åœ°LLMã€æµå¼å“åº”å’ŒGradioç•Œé¢ã€‚</li>
<li><strong>ç¬¬6å‘¨ï¼š</strong> å®ç°ç”Ÿäº§çº§ç›‘æ§ï¼ˆLangfuseè¿½è¸ªï¼‰å’ŒRedisç¼“å­˜ï¼Œä»¥ä¼˜åŒ–æ€§èƒ½ã€‚</li>
</ul>
<p>ä¸‹é¢ï¼Œè®©æˆ‘ä»¬é€å‘¨æ·±å…¥ï¼Œçœ‹çœ‹è¿™6å‘¨çš„æ—…ç¨‹å°†å¸¦ä½ æ¢ç´¢å“ªäº›ç²¾å½©å†…å®¹ã€‚</p>
<h3 data-id="heading-1">ç¬¬1å‘¨ï¼šå¥ å®šåŸºçŸ³â€”â€”åŸºç¡€è®¾æ–½</h3>
<p>ä¸‡ä¸ˆé«˜æ¥¼å¹³åœ°èµ·ï¼Œä¸€ä¸ªç¨³å®šçš„åŸºç¡€è®¾æ–½æ˜¯ä»»ä½•ç”Ÿäº§çº§AIç³»ç»Ÿçš„åŸºçŸ³ã€‚åœ¨ç¬¬ä¸€å‘¨ï¼Œä½ å°†å­¦ä¼šå¦‚ä½•åˆ©ç”¨Docker Composeï¼Œæ­å»ºèµ·åŒ…æ‹¬FastAPIã€PostgreSQLã€OpenSearchã€Apache Airflowå’ŒOllamaï¼ˆæœ¬åœ°LLMæœåŠ¡ï¼‰åœ¨å†…çš„æ ¸å¿ƒæœåŠ¡ã€‚è¿™å°†ä¸ºä½ åç»­çš„æ‰€æœ‰å¼€å‘æä¾›åšå®çš„ç¯å¢ƒæ”¯æŒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61e88b522d7540678b723194e6376729~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259887&amp;x-signature=MDof1dnP%2FMOeUbmDGsuo4dt%2BW6A%3D" alt="" loading="lazy"/> å›¾1ï¼šç¬¬1å‘¨åŸºç¡€è®¾æ–½æ¦‚è§ˆï¼Œæ¶µç›–APIã€æ•°æ®åº“ã€æœç´¢ã€å·¥ä½œæµå’Œæœ¬åœ°LLM</p>
<p><strong>æœ¬å‘¨ç›®æ ‡ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨Docker Composeå®ŒæˆåŸºç¡€è®¾æ–½æ­å»ºã€‚</li>
<li>FastAPIå¼€å‘ï¼Œå®ç°è‡ªåŠ¨æ–‡æ¡£å’Œå¥åº·æ£€æŸ¥ã€‚</li>
<li>é…ç½®å’Œç®¡ç†PostgreSQLæ•°æ®åº“ã€‚</li>
<li>è®¾ç½®OpenSearchæ··åˆæœç´¢å¼•æ“ã€‚</li>
<li>é…ç½®Ollamaæœ¬åœ°LLMæœåŠ¡ã€‚</li>
<li>æœåŠ¡ç¼–æ’å’Œå¥åº·ç›‘æ§ã€‚</li>
</ul>
<h3 data-id="heading-2">ç¬¬2å‘¨ï¼šæ•°æ®å–‚å…»â€”â€”è‡ªåŠ¨åŒ–è®ºæ–‡æ‘„å–</h3>
<p>æœ‰äº†åŸºç¡€è®¾æ–½ï¼ŒRAGç³»ç»Ÿçš„â€œç‡ƒæ–™â€â€”â€”æ•°æ®å°±æˆäº†æ ¸å¿ƒã€‚ç¬¬äºŒå‘¨ï¼Œä½ å°†æ„å»ºä¸€ä¸ªè‡ªåŠ¨åŒ–çš„æ•°æ®æ‘„å–ç®¡é“ã€‚å®ƒèƒ½ä»arXiv APIæ‰¹é‡æŠ“å–è®ºæ–‡å…ƒæ•°æ®å’ŒPDFæ–‡æ¡£ï¼Œå¹¶åˆ©ç”¨Doclingç­‰å·¥å…·è¿›è¡Œç§‘å­¦PDFè§£æï¼Œæå–ç»“æ„åŒ–å†…å®¹ã€‚é€šè¿‡Apache Airflowï¼Œæ•´ä¸ªè¿‡ç¨‹å°†å®ç°è‡ªåŠ¨åŒ–è°ƒåº¦ï¼Œç¡®ä¿ç³»ç»Ÿæ‹¥æœ‰æºæºä¸æ–­ä¸”å¤„ç†å®Œå–„çš„æœ€æ–°å­¦æœ¯èµ„æ–™ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f2fafb60f1e459d9cd4a0a78a2ee4e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259887&amp;x-signature=BdDKBwgC73dlCVPHF83u2VbT%2BGo%3D" alt="" loading="lazy"/></p>
<p>Week 2 Data Ingestion Architecture</p>
<p>å›¾2ï¼šç¬¬2å‘¨æ•°æ®æ‘„å–æ¶æ„ï¼Œå±•ç¤ºäº†ä»arXivåˆ°PostgreSQLçš„æ•°æ®æµ</p>
<p><strong>æœ¬å‘¨ç›®æ ‡ï¼š</strong></p>
<ul>
<li>é›†æˆarXiv APIï¼Œå®ç°é™é€Ÿå’Œé‡è¯•é€»è¾‘ã€‚</li>
<li>ä½¿ç”¨Doclingè§£æç§‘å­¦PDFæ–‡æ¡£ã€‚</li>
<li>é€šè¿‡Apache Airflowæ„å»ºè‡ªåŠ¨åŒ–æ•°æ®æ‘„å–ç®¡é“ã€‚</li>
<li>æå–å’Œå­˜å‚¨è®ºæ–‡å…ƒæ•°æ®ã€‚</li>
<li>å®ç°ä»APIåˆ°æ•°æ®åº“çš„å®Œæ•´è®ºæ–‡å¤„ç†ã€‚</li>
</ul>
<h3 data-id="heading-3">ç¬¬3å‘¨ï¼šæœç´¢ä¹‹æœ¬â€”â€”å…³é”®è¯å…ˆè¡Œ</h3>
<p>å¾ˆå¤šRAGç³»ç»Ÿä¸€ä¸Šæ¥å°±ç›´å¥”å‘é‡æœç´¢ï¼Œä½†è¿™å¾€å¾€ä¼šå¿½ç•¥ä¸€ä¸ªé‡è¦çš„åŸºç¡€ï¼šå…³é”®è¯æœç´¢ã€‚æœ¬é¡¹ç›®å¼ºè°ƒ<strong>å…ˆæ‰“å¥½BM25å…³é”®è¯æœç´¢çš„æ‰å®åŸºç¡€</strong>ã€‚å› ä¸ºåœ¨å®é™…ç”Ÿäº§ä¸­ï¼Œç²¾ç¡®åŒ¹é…ã€æœ¯è¯­è¯†åˆ«å’Œæ•ˆç‡ï¼Œå…³é”®è¯æœç´¢å¾€å¾€è¡¨ç°å“è¶Šã€‚ä½ å°†åˆ©ç”¨OpenSearchï¼Œå®ç°é«˜æ•ˆçš„å…³é”®è¯æ£€ç´¢ã€è¿‡æ»¤å’Œç›¸å…³æ€§è¯„åˆ†ï¼Œä¸ºåç»­çš„æ··åˆæœç´¢æ‰“ä¸‹åšå®çš„åŸºç¡€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2ae0354dc6449f98c2f9c53e4c09a4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259887&amp;x-signature=XK8icssYhPE0PbOkdko9csFEBqI%3D" alt="" loading="lazy"/></p>
<p>Week 3 OpenSearch Flow Architecture</p>
<p>å›¾3ï¼šç¬¬3å‘¨OpenSearché›†æˆæµç¨‹æ¶æ„ï¼Œä¸“æ³¨äºå…³é”®è¯æœç´¢</p>
<p><strong>æœ¬å‘¨ç›®æ ‡ï¼š</strong></p>
<ul>
<li>ç†è§£å…³é”®è¯æœç´¢å¯¹RAGç³»ç»Ÿçš„é‡è¦æ€§ã€‚</li>
<li>æŒæ¡OpenSearchçš„ç´¢å¼•ç®¡ç†ã€æ˜ å°„å’Œæœç´¢ä¼˜åŒ–ã€‚</li>
<li>æ·±å…¥ç†è§£BM25ç®—æ³•èƒŒåçš„åŸç†ã€‚</li>
<li>åˆ©ç”¨Query DSLæ„å»ºå¤æ‚çš„æœç´¢æŸ¥è¯¢ã€‚</li>
<li>å­¦ä¹ æœç´¢ç›¸å…³æ€§åˆ†æå’Œæ€§èƒ½æµ‹é‡ã€‚</li>
</ul>
<h3 data-id="heading-4">ç¬¬4å‘¨ï¼šæ™ºèƒ½è·ƒè¿â€”â€”åˆ†å—ä¸æ··åˆæœç´¢</h3>
<p>åœ¨å…³é”®è¯æœç´¢çš„åŸºç¡€ä¹‹ä¸Šï¼Œç¬¬å››å‘¨å°†ä¸ºç³»ç»Ÿå¢åŠ è¯­ä¹‰ç†è§£èƒ½åŠ›ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•è¿›è¡Œ<strong>æ™ºèƒ½åˆ†å—</strong>ï¼Œå°†é•¿æ–‡æ¡£åˆ‡åˆ†æˆæœ‰æ„ä¹‰çš„ç‰‡æ®µï¼Œå¹¶åˆ©ç”¨Jina AIç­‰å·¥å…·ç”Ÿæˆå‘é‡åµŒå…¥ã€‚éšåï¼Œé€šè¿‡RRFï¼ˆReciprocal Rank Fusionï¼‰èåˆç®—æ³•ï¼Œå°†å…³é”®è¯æœç´¢çš„ç²¾ç¡®æ€§å’Œå‘é‡æœç´¢çš„è¯­ä¹‰å¬å›èƒ½åŠ›ç›¸ç»“åˆï¼Œå®ç°<strong>æ··åˆæœç´¢</strong>ï¼Œè®©æ£€ç´¢ç»“æœæ—¢ç²¾å‡†åˆå…¨é¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71bc59e247a14e2998eb96bdf70c849a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259887&amp;x-signature=saMhbDGxOxVSoGlLMq6PfhCtQ64%3D" alt="" loading="lazy"/></p>
<p>Week 4 Hybrid Search Architecture</p>
<p>å›¾4ï¼šç¬¬4å‘¨æ··åˆæœç´¢æ¶æ„ï¼Œå±•ç¤ºäº†åˆ†å—ã€åµŒå…¥å’ŒRRFèåˆ</p>
<p><strong>æœ¬å‘¨ç›®æ ‡ï¼š</strong></p>
<ul>
<li>æŒæ¡åŸºäºç« èŠ‚çš„æ™ºèƒ½æ–‡æ¡£åˆ†å—ç­–ç•¥ã€‚</li>
<li>é›†æˆJina AIç­‰ç”Ÿäº§çº§åµŒå…¥æœåŠ¡ã€‚</li>
<li>é€šè¿‡RRFèåˆå®ç°å…³é”®è¯ä¸è¯­ä¹‰æ£€ç´¢çš„æ··åˆæœç´¢ã€‚</li>
<li>è®¾è®¡ç»Ÿä¸€çš„APIï¼Œæ”¯æŒå¤šç§æœç´¢æ¨¡å¼ã€‚</li>
<li>åˆ†æä¸åŒæœç´¢æ–¹æ³•çš„æ€§èƒ½æƒè¡¡ã€‚</li>
</ul>
<h3 data-id="heading-5">ç¬¬5å‘¨ï¼šæ ¸å¿ƒæ™ºèƒ½â€”â€”å®Œæ•´çš„RAGç®¡é“</h3>
<p>è‡³æ­¤ï¼ŒRAGç³»ç»Ÿçš„æ£€ç´¢éƒ¨åˆ†å·²è¶‹äºå®Œå–„ã€‚ç¬¬äº”å‘¨ï¼Œæˆ‘ä»¬å°†é›†æˆå¤§æ¨¡å‹ï¼Œå®Œæˆæ•´ä¸ªRAGç®¡é“çš„æ ¸å¿ƒã€‚ä½ å°†æŠŠOllamaéƒ¨ç½²ä¸ºæœ¬åœ°LLMæœåŠ¡ï¼Œç¡®ä¿æ•°æ®éšç§ã€‚é€šè¿‡ç²¾å¿ƒçš„æç¤ºå·¥ç¨‹ï¼Œç³»ç»Ÿå“åº”é€Ÿåº¦å°†æå‡<strong>6å€</strong>ï¼ˆä»120ç§’ä¼˜åŒ–åˆ°15-20ç§’ï¼‰ã€‚åŒæ—¶ï¼Œå®ç°<strong>æµå¼å“åº”ï¼ˆSSEï¼‰</strong> æä¾›å®æ—¶ç”¨æˆ·åé¦ˆï¼Œå¹¶æ„å»ºä¸€ä¸ªå‹å¥½çš„<strong>Gradioäº¤äº’å¼Webç•Œé¢</strong>ï¼Œè®©éæŠ€æœ¯ç”¨æˆ·ä¹Ÿèƒ½è½»æ¾ä½¿ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ad13f3e556e4f31979af557e7df2ce7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259887&amp;x-signature=73OJFSBbhlXYHQYv9nHOHuECYes%3D" alt="" loading="lazy"/></p>
<p>Week 5 Complete RAG System Architecture</p>
<p>å›¾5ï¼šç¬¬5å‘¨å®Œæ•´çš„RAGç³»ç»Ÿæ¶æ„ï¼ŒåŒ…æ‹¬LLMç”Ÿæˆå±‚å’ŒGradioç•Œé¢</p>
<p><strong>æœ¬å‘¨ç›®æ ‡ï¼š</strong></p>
<ul>
<li>æŒæ¡æœ¬åœ°LLMæœåŠ¡ï¼ˆOllamaï¼‰é›†æˆã€‚</li>
<li>é€šè¿‡æç¤ºå·¥ç¨‹å®ç°6å€æ€§èƒ½ä¼˜åŒ–å’Œ80%çš„Promptå‹ç¼©ã€‚</li>
<li>å®ç°æµå¼å“åº”ï¼ˆServer-Sent Eventsï¼‰ã€‚</li>
<li>è®¾è®¡æ”¯æŒæ ‡å‡†å’Œæµå¼æŸ¥è¯¢çš„APIã€‚</li>
<li>æ„å»ºå¸¦æœ‰é«˜çº§å‚æ•°æ§åˆ¶çš„Gradioäº¤äº’å¼ç•Œé¢ã€‚</li>
</ul>
<p><strong>æ€§èƒ½é£è·ƒï¼š</strong></p>



































<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å (ç¬¬5å‘¨)</th><th>æå‡å¹…åº¦</th></tr></thead><tbody><tr><td><strong>å“åº”æ—¶é—´</strong></td><td>120+ ç§’</td><td>15-20 ç§’</td><td><strong>å¿«6å€</strong></td></tr><tr><td><strong>é¦–æ¬¡å‡ºå­—æ—¶é—´</strong></td><td>ä¸é€‚ç”¨</td><td>2-3 ç§’</td><td><strong>æµå¼å¯ç”¨</strong></td></tr><tr><td><strong>Promptæ•ˆç‡</strong></td><td>~10KB</td><td>~2KB</td><td><strong>80%ç¼©å‡</strong></td></tr><tr><td><strong>ç”¨æˆ·ä½“éªŒ</strong></td><td>ä»…API</td><td>Webç•Œé¢+æµå¼</td><td><strong>ç”Ÿäº§å°±ç»ª</strong></td></tr></tbody></table>
<h3 data-id="heading-6">ç¬¬6å‘¨ï¼šç”Ÿäº§å°±ç»ªâ€”â€”ç›‘æ§ä¸ç¼“å­˜</h3>
<p>ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„RAGç³»ç»Ÿè¿˜ä¸è¶³ä»¥ç§°ä¸ºâ€œç”Ÿäº§çº§â€ã€‚åœ¨æœ€åä¸€å‘¨ï¼Œä½ å°†ä¸ºç³»ç»ŸåŠ ä¸Šè‡³å…³é‡è¦çš„å¯è§‚æµ‹æ€§å’Œæ€§èƒ½ä¼˜åŒ–å±‚ã€‚é€šè¿‡é›†æˆ<strong>Langfuse</strong>è¿›è¡Œç«¯åˆ°ç«¯çš„RAGç®¡é“è¿½è¸ªï¼Œä½ å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°æ¯ä¸ªè¯·æ±‚ä»æŸ¥è¯¢åˆ°å›ç­”çš„å®Œæ•´è·¯å¾„ï¼Œåˆ†ææ€§èƒ½ç“¶é¢ˆã€‚åŒæ—¶ï¼Œå¼•å…¥<strong>Redisç¼“å­˜</strong>ï¼Œé’ˆå¯¹é‡å¤æŸ¥è¯¢å¯å°†å“åº”é€Ÿåº¦ä»15-20ç§’æå‡åˆ°æƒŠäººçš„<strong>50æ¯«ç§’</strong>ï¼Œå®ç°<strong>150-400å€</strong>çš„åŠ é€Ÿï¼Œå¹¶æœ‰æ•ˆé™ä½LLMè°ƒç”¨æˆæœ¬è¾¾<strong>60%</strong> ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83ea922dd9bd4183ae3ad7c799d61bcb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L5pWZ56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259887&amp;x-signature=VPmQ2MSsNh%2B1ml7CPNFpx8XV8DI%3D" alt="" loading="lazy"/></p>
<p>Week 6 Monitoring &amp; Caching Architecture</p>
<p>å›¾6ï¼šç¬¬6å‘¨ç›‘æ§ä¸ç¼“å­˜æ¶æ„ï¼Œæ·»åŠ äº†Langfuseè¿½è¸ªå’ŒRedisç¼“å­˜å±‚</p>
<p><strong>æœ¬å‘¨ç›®æ ‡ï¼š</strong></p>
<ul>
<li>é›†æˆLangfuseï¼Œå®ç°ç«¯åˆ°ç«¯RAGç®¡é“è¿½è¸ªå’Œæ€§èƒ½åˆ†æã€‚</li>
<li>åˆ¶å®šRedisç¼“å­˜ç­–ç•¥ï¼ŒåŒ…æ‹¬æ™ºèƒ½ç¼“å­˜é”®å’ŒTTLç®¡ç†ã€‚</li>
<li>æ„å»ºå®æ—¶æ€§èƒ½ç›‘æ§ä»ªè¡¨ç›˜ï¼Œæ˜¾ç¤ºå»¶è¿Ÿã€æˆæœ¬å’Œç¼“å­˜å‘½ä¸­ç‡ã€‚</li>
<li>æŒæ¡è¡Œä¸šæ ‡å‡†çš„è§‚æµ‹å’Œä¼˜åŒ–æŠ€æœ¯ã€‚</li>
<li>åˆ†æå’Œä¼˜åŒ–LLMä½¿ç”¨åŠåŸºç¡€è®¾æ–½æˆæœ¬ã€‚</li>
</ul>
<p><strong>æ€§èƒ½ä¸æˆæœ¬æ˜¾è‘—æå‡ï¼š</strong></p>









































<table><thead><tr><th>æŒ‡æ ‡</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å (ç¬¬6å‘¨)</th><th>æå‡å¹…åº¦</th></tr></thead><tbody><tr><td><strong>å¹³å‡å“åº”æ—¶é—´</strong></td><td>15-20ç§’</td><td>3-5ç§’ (æ··åˆè´Ÿè½½)</td><td><strong>å¿«3-4å€</strong></td></tr><tr><td><strong>ç¼“å­˜å‘½ä¸­å“åº”</strong></td><td>ä¸é€‚ç”¨</td><td>50-100æ¯«ç§’</td><td><strong>å¿«150-400å€</strong></td></tr><tr><td><strong>LLM Tokenç”¨é‡</strong></td><td>100%</td><td>40% (60%ç¼“å­˜)</td><td><strong>å‡å°‘60%</strong></td></tr><tr><td><strong>æ—¥å¸¸æˆæœ¬</strong></td><td>$12</td><td>$4.50</td><td><strong>èŠ‚çœ63%</strong></td></tr><tr><td><strong>ç³»ç»Ÿå¯è§‚æµ‹æ€§</strong></td><td>æ— </td><td>å®Œæ•´è¿½è¸ª</td><td><strong>å…¨é¢å¯è§</strong></td></tr></tbody></table>
<h3 data-id="heading-7">å¿«é€Ÿå¼€å§‹</h3>
<p>è¿™ä¸ªé¡¹ç›®éå¸¸é€‚åˆé‚£äº›æƒ³æ·±å…¥äº†è§£RAGç³»ç»Ÿã€æå‡AIå·¥ç¨‹å®è·µèƒ½åŠ›çš„å¼€å‘è€…ã€‚æ‰€æœ‰å†…å®¹éƒ½å¯ä»¥åœ¨æœ¬åœ°è¿è¡Œï¼Œæ— éœ€é¢å¤–è´¹ç”¨ã€‚</p>
<p><strong>å…ˆå†³æ¡ä»¶ï¼š</strong></p>
<ul>
<li>Docker Desktop (å« Docker Compose)</li>
<li>Python 3.12+</li>
<li>UV Package Manager</li>
<li>8GB+ RAM å’Œ 20GB+ ç©ºé—²ç£ç›˜ç©ºé—´</li>
</ul>
<p><strong>å¼€å§‹æ„å»ºï¼š</strong></p>
<ol>
<li>å…‹éš†é¡¹ç›®ä»“åº“ï¼š</li>
</ol>

<pre><code class="hljs language-bash" lang="bash">   gitÂ <span class="hljs-built_in">clone</span>Â &lt;repository-url&gt;  
<span class="hljs-built_in">cd</span>Â arxiv-paper-curator
</code></pre>
<p>2.  é…ç½®ç¯å¢ƒå˜é‡ï¼š</p>

<pre><code class="hljs">cpenv
</code></pre>

<pre><code class="hljs language-go" lang="go">ï¼ˆæ ¹æ®éœ€è¦ä¿®æ”¹ <span class="hljs-string">`.env`</span> æ–‡ä»¶ï¼Œä¾‹å¦‚ç¬¬<span class="hljs-number">4</span>å‘¨éœ€è¦æ·»åŠ  <span class="hljs-string">`JINA_API_KEY`</span>ï¼‰
</code></pre>
<p>3.    å®‰è£…ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">uvÂ <span class="hljs-built_in">sync</span>
</code></pre>
<p>4.  å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼š</p>

<pre><code class="hljs language-css" lang="css">    docker compose up <span class="hljs-attr">--build</span> -d
</code></pre>
<p>5.  éªŒè¯æœåŠ¡ï¼š</p>

<pre><code class="hljs language-bash" lang="bash">    curl http://localhost:8000/health
</code></pre>
<h3 data-id="heading-8">å†™åœ¨æœ€å</h3>
<p>ã€ŠThe Mother of AI Project: arXiv Paper Curatorã€‹ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ›´æ˜¯ä¸€é—¨ç³»ç»Ÿè€Œå®ç”¨çš„AIå·¥ç¨‹è¯¾ç¨‹ã€‚å®ƒå°†å¸¦é¢†ä½ äº²å†ä¸€ä¸ªç”Ÿäº§çº§RAGç³»ç»Ÿä»æ— åˆ°æœ‰çš„å…¨è¿‡ç¨‹ï¼Œä»åŸºç¡€è®¾æ–½æ­å»ºåˆ°æ•°æ®ç®¡é“ï¼Œä»å…³é”®è¯æœç´¢åˆ°æ··åˆæ£€ç´¢ï¼Œå†åˆ°å¤§æ¨¡å‹é›†æˆã€æ€§èƒ½ä¼˜åŒ–å’Œç”Ÿäº§ç›‘æ§ã€‚</p>
<p>å¦‚æœä½ æ˜¯ä¸€åAI/MLå·¥ç¨‹å¸ˆã€è½¯ä»¶å·¥ç¨‹å¸ˆæˆ–æ•°æ®ç§‘å­¦å®¶ï¼Œæ¸´æœ›å°†ç†è®ºçŸ¥è¯†è½¬åŒ–ä¸ºè§£å†³å®é™…é—®é¢˜çš„èƒ½åŠ›ï¼Œé‚£ä¹ˆè¿™ä¸ªé¡¹ç›®ç»å¯¹æ˜¯ä½ ä¸å®¹é”™è¿‡çš„å®æˆ˜å®å…¸ã€‚å®ƒå°†å¸®ä½ å¡«è¡¥ç†è®ºä¸å®è·µä¹‹é—´çš„é¸¿æ²Ÿï¼Œè®©ä½ çœŸæ­£æŒæ¡æ„å»ºç°ä»£AIåº”ç”¨æ‰€éœ€çš„æ ¸å¿ƒæŠ€èƒ½ã€‚</p>
<p>é¡¹ç›®åœ°å€ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjamwithai%2Farxiv-paper-curator" target="_blank" title="https://github.com/jamwithai/arxiv-paper-curator" ref="nofollow noopener noreferrer">github.com/jamwithai/aâ€¦</a></p>
<h2 data-id="heading-9">å­¦ä¹ èµ„æºæ¨è</h2>
<p>å¦‚æœä½ æƒ³æ›´æ·±å…¥åœ°å­¦ä¹ å¤§æ¨¡å‹ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›éå¸¸æœ‰ä»·å€¼çš„å­¦ä¹ èµ„æºï¼Œè¿™äº›èµ„æºå°†å¸®åŠ©ä½ ä»ä¸åŒè§’åº¦å­¦ä¹ å¤§æ¨¡å‹ï¼Œæå‡ä½ çš„å®è·µèƒ½åŠ›ã€‚</p>
<blockquote>
<p>æœ¬æ–‡è¾ƒé•¿ï¼Œå»ºè®®ç‚¹èµæ”¶è—ã€‚æ›´å¤šAIå¤§æ¨¡å‹åº”ç”¨å¼€å‘å­¦ä¹ è§†é¢‘åŠèµ„æ–™ï¼Œåœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fhy.zhipoai.cn%2F" target="_blank" title="https://hy.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[unipushæ¨é€å…¥é—¨ï¼š10åˆ†é’Ÿæå®šUniPushåœ¨çº¿æ¶ˆæ¯é›†æˆ]]></title>    <link>https://juejin.cn/post/7578793960627453978</link>    <guid>https://juejin.cn/post/7578793960627453978</guid>    <pubDate>2025-12-02T05:46:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578793960627453978" data-draft-id="7578519990283485210" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="unipushæ¨é€å…¥é—¨ï¼š10åˆ†é’Ÿæå®šUniPushåœ¨çº¿æ¶ˆæ¯é›†æˆ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-02T05:46:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‰‘æ£±è›¾å­"/> <meta itemprop="url" content="https://juejin.cn/user/2823201593493790"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            unipushæ¨é€å…¥é—¨ï¼š10åˆ†é’Ÿæå®šUniPushåœ¨çº¿æ¶ˆæ¯é›†æˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2823201593493790/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‰‘æ£±è›¾å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T05:46:05.000Z" title="Tue Dec 02 2025 05:46:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>æ¶ˆæ¯æ¨é€æ˜¯æå‡ App ç”¨æˆ·æ´»è·ƒåº¦å’Œç•™å­˜ç‡çš„å…³é”®èƒ½åŠ›ã€‚å¯¹äºé‡‡ç”¨ UniApp å¼€å‘çš„è·¨ç«¯åº”ç”¨ï¼ŒDCloud å®˜æ–¹æä¾›çš„Â <strong>UniPush</strong>Â æœåŠ¡æ— ç–‘æ˜¯é›†æˆæ¨é€åŠŸèƒ½æœ€é«˜æ•ˆé€‰æ‹©ã€‚</p>
<p>æœ¬æ–‡å°†ä»¥ä¸€åå¼€å‘è€…çš„è§†è§’ï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ å®ŒæˆÂ <strong>ä»é¡¹ç›®åˆå§‹åŒ–åˆ°æˆåŠŸæ¥æ”¶ç¬¬ä¸€æ¡æ¨é€æ¶ˆæ¯</strong>Â çš„å®Œæ•´æµç¨‹ã€‚ä½ å°†å­¦ä¼šï¼š</p>
<ol>
<li>UniPush çš„<strong>æ­£ç¡®æ¥å…¥å§¿åŠ¿</strong>ä¸æ ¸å¿ƒé…ç½®</li>
<li>å¼€å‘é˜¶æ®µå¿…é¡»ä½¿ç”¨çš„<strong>è‡ªå®šä¹‰è°ƒè¯•åŸºåº§</strong></li>
<li>å¦‚ä½•è·å–è®¾å¤‡æ ‡è¯†ï¼ˆCIDï¼‰å¹¶è¿›è¡Œ<strong>åœ¨çº¿æ¨é€æµ‹è¯•</strong></li>
<li>é¿å¼€æ–°æ‰‹å¸¸è§â€œå‘ç‚¹â€çš„å®ç”¨æŠ€å·§</li>
</ol>
<blockquote>
<p>æŠ€æœ¯æ ˆï¼šUniApp + UniPushï¼ˆåä¸ºã€å°ç±³ç­‰å‚å•†æ¨é€é…ç½®å°†åœ¨ä¸‹ç¯‡ä»‹ç»ï¼‰</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ å¼€å‘ç¯å¢ƒä¸é¡¹ç›®åˆå§‹åŒ–</h2>
<h3 data-id="heading-2">1.1 é¡¹ç›®åˆ›å»ºä¸æ¨¡å—é…ç½®</h3>
<ol>
<li><strong>é¡¹ç›®åˆ›å»º</strong>ï¼šåœ¨ HBuilderX ä¸­æ–°å»ºä¸€ä¸ª UniApp é¡¹ç›®ï¼ˆè¿‡ç¨‹ç•¥ï¼‰ã€‚</li>
<li><strong>å¯ç”¨ UniPush</strong>ï¼šæ‰“å¼€é¡¹ç›®æ ¹ç›®å½•çš„Â <code>manifest.json</code>Â æ–‡ä»¶ï¼Œè¿›å…¥Â  <strong>â€œAppæ¨¡å—é…ç½®â€</strong> Â é€‰é¡¹å¡ï¼Œå‹¾é€‰Â  <strong>â€œPush(æ¶ˆæ¯æ¨é€)â€</strong> Â æ¨¡å—ï¼Œå¹¶ç¡®ä¿é€‰ä¸­Â  <strong>â€œUniPushâ€</strong> Â ä½œä¸ºå…·ä½“æœåŠ¡ã€‚<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/686640ac586246399a1a3fa5c3d0dcd5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5qOx6Ju-5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259165&amp;x-signature=rpIT9JPEDnkrvYFn45S5tplbIYA%3D" alt="image.png" loading="lazy"/></li>
</ol>
<h3 data-id="heading-3">1.2 åˆ¶ä½œè‡ªå®šä¹‰è°ƒè¯•åŸºåº§</h3>
<p><strong>ä¸ºä»€ä¹ˆå¿…é¡»ä½¿ç”¨è‡ªå®šä¹‰åŸºåº§ï¼Ÿ</strong><br/>
UniApp çš„æ ‡å‡†è¿è¡ŒåŸºåº§ï¼ˆæ ‡å‡†çœŸæœºè¿è¡ŒåŒ…ï¼‰æ‰€ä½¿ç”¨çš„ DCloud å…¬æœ‰è¯ä¹¦ï¼Œå…¶æ¨é€æ ‡è¯†ï¼ˆCIDï¼‰<strong>æ— æ³•ç”¨äºæ­£å¼æ¨é€</strong>ã€‚åªæœ‰ä½¿ç”¨ä½ è‡ªå·± App çš„æ­£å¼è¯ä¹¦ï¼ˆæˆ–è°ƒè¯•è¯ä¹¦ï¼‰æ‰“åŒ…çš„è‡ªå®šä¹‰åŸºåº§ï¼Œæ‰èƒ½è·å¾—çœŸå®ã€æœ‰æ•ˆçš„ CIDã€‚</p>
<p><strong>åˆ¶ä½œæ­¥éª¤ï¼š</strong></p>
<ol>
<li>
<p>åœ¨ HBuilderX é¡¶éƒ¨èœå•ï¼Œé€‰æ‹©Â <strong>è¿è¡Œ -&gt; è¿è¡Œåˆ°æ‰‹æœºæˆ–æ¨¡æ‹Ÿå™¨ -&gt; åˆ¶ä½œè‡ªå®šä¹‰è°ƒè¯•åŸºåº§</strong>ã€‚</p>
</li>
<li>
<p>åœ¨å¼¹å‡ºçš„ç•Œé¢ä¸­ï¼Œä½ éœ€è¦ä¸º Android å¹³å°æä¾›åº”ç”¨ç­¾åè¯ä¹¦ã€‚</p>
<ul>
<li><strong>è¯ä¹¦ç”Ÿæˆ</strong>ï¼šå¯ä»¥ä½¿ç”¨åœ¨çº¿å·¥å…·å¦‚Â <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.yunedit.com%2Fcreatecert" target="_blank" title="https://www.yunedit.com/createcert" ref="nofollow noopener noreferrer">é¦™è•‰äº‘ç¼–</a></strong>Â å¿«é€Ÿç”Ÿæˆè°ƒè¯•è¯ä¹¦ï¼ˆ.keystore æ–‡ä»¶ï¼‰ï¼Œå¦¥å–„ä¿å­˜å¯†ç åŠåˆ«åä¿¡æ¯ã€‚</li>
<li><strong>è¯ä¹¦å¡«å†™</strong>ï¼šå°†ç”Ÿæˆçš„è¯ä¹¦æ–‡ä»¶è·¯å¾„ã€å¯†ç ã€åˆ«åç­‰ä¿¡æ¯ï¼Œå‡†ç¡®å¡«å…¥ HBuilderX çš„å¯¹åº”è¾“å…¥æ¡†ã€‚</li>
</ul>
</li>
<li>
<p>ç‚¹å‡»Â  <strong>â€œæ‰“åŒ…â€</strong> ï¼Œç­‰å¾…äº‘ç«¯å®Œæˆè‡ªå®šä¹‰åŸºåº§çš„åˆ¶ä½œã€‚</p>
</li>
</ol>
<p><strong>å¦‚ä½•ä½¿ç”¨ï¼š</strong><br/>
åˆ¶ä½œå®Œæˆåï¼Œè¿è¡Œé¡¹ç›®æ—¶ï¼ŒåŠ¡å¿…åœ¨è¿è¡Œèœå•ä¸­<strong>é€‰æ‹©â€œè‡ªå®šä¹‰è°ƒè¯•åŸºåº§â€</strong> ï¼Œè€Œéâ€œè¿è¡Œæ ‡å‡†åŸºåº§â€ã€‚åªæœ‰è¿è¡Œåœ¨è‡ªå®šä¹‰åŸºåº§ä¸Šï¼Œåç»­çš„æ¨é€æµ‹è¯•æ‰æœ‰æ•ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1424a23f2e74d1d9fa812f0fac914af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5qOx6Ju-5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259165&amp;x-signature=Hdxe6olyzOK3WiQobYVacdeBOXA%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-4">äºŒã€ UniPush æœåŠ¡å¼€é€šä¸é…ç½®</h2>
<p>æ¨é€èƒ½åŠ›ä¾èµ–äº DCloud çš„åå°æœåŠ¡ï¼Œå› æ­¤éœ€è¦åœ¨å¼€å‘è€…ä¸­å¿ƒå®Œæˆé…ç½®ã€‚</p>
<ol>
<li>
<p><strong>è¿›å…¥å¼€å‘è€…ä¸­å¿ƒ</strong>ï¼šè®¿é—®Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.dcloud.net.cn%2F" target="_blank" title="https://dev.dcloud.net.cn/" ref="nofollow noopener noreferrer">DCloud å¼€å‘è€…ä¸­å¿ƒ</a>ï¼Œåœ¨Â  <strong>â€œåº”ç”¨åˆ—è¡¨â€</strong> Â ä¸­æ‰¾åˆ°ä½ çš„é¡¹ç›®ã€‚</p>
</li>
<li>
<p><strong>é…ç½®åº”ç”¨ä¿¡æ¯</strong>ï¼š</p>
<ul>
<li>å¦‚æœæœªåˆ›å»ºï¼Œè¯·å…ˆä¸ºä½ çš„ App åˆ›å»ºä¸€ä¸ªåº”ç”¨ã€‚</li>
<li>è¿›å…¥åº”ç”¨è¯¦æƒ…ï¼Œåœ¨Â  <strong>â€œå„å¹³å°ä¿¡æ¯â€</strong> Â ä¸­é…ç½® Android å¹³å°ä¿¡æ¯ã€‚</li>
<li>è¿™é‡Œéœ€è¦å¡«å†™çš„<strong>åŒ…åã€åº”ç”¨ç­¾å</strong>ï¼Œå¿…é¡»ä¸ä¸Šä¸€æ­¥åˆ¶ä½œè‡ªå®šä¹‰åŸºåº§æ—¶ä½¿ç”¨çš„è¯ä¹¦ä¿¡æ¯<strong>å®Œå…¨ä¸€è‡´</strong>ã€‚ä½ å¯ä»¥åœ¨â€œé¦™è•‰äº‘ç¼–â€ç­‰å·¥å…·ç”Ÿæˆè¯ä¹¦çš„é¡µé¢æ‰¾åˆ°å¯¹åº”çš„ MD5 æˆ– SHA1 ç­¾åã€‚</li>
</ul>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b17f92d7b534f48b20dffccd850b159~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5qOx6Ju-5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259165&amp;x-signature=aKS3hxWFL8EwhU84osCtk%2FcKWvM%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€ æ ¸å¿ƒä»£ç å®ç°ä¸åœ¨çº¿æ¨é€æµ‹è¯•</h2>
<h3 data-id="heading-6">3.1 è·å–è®¾å¤‡æ¨é€æ ‡è¯† (CID)</h3>
<p>CID æ˜¯ UniPush æœåŠ¡è¯†åˆ«æ¯å°è®¾å¤‡çš„å”¯ä¸€ IDã€‚åœ¨å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬ä½¿ç”¨Â <code>uni.getPushClientId</code>Â API è·å–ã€‚</p>
<p><strong>å…³é”®æ³¨æ„äº‹é¡¹ï¼ˆæ—¶åºé—®é¢˜ï¼‰ï¼š</strong><br/>
æ¨é€æœåŠ¡åˆå§‹åŒ–éœ€è¦æ—¶é—´ï¼Œåº”ç”¨å¯åŠ¨åç«‹å³è°ƒç”¨æ­¤ API å¯èƒ½è¿”å›ç©ºå€¼ã€‚ä¸€ä¸ªç¨³å¥çš„åšæ³•æ˜¯å»¶æ—¶è·å–æˆ–åœ¨ç›‘å¬äº‹ä»¶ä¸­è·å–ã€‚</p>
<p><strong>æ¨èå®ç°æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨ App.vue çš„ onLaunch ä¸­ï¼Œæˆ–é¦–ä¸ªé¡µé¢çš„ onLoad ä¸­è°ƒç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">initUniPush</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// æ–¹æ¡ˆ1ï¼šå»¶æ—¶è·å–ï¼ˆç®€å•ç›´æ¥ï¼‰</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    uni.<span class="hljs-title function_">getPushClientId</span>({
      <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> cid = res.<span class="hljs-property">cid</span>;
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¾å¤‡æ¨é€æ ‡è¯†CID:'</span>, cid);
        <span class="hljs-comment">// é‡è¦ï¼šå°† CID å‘é€åˆ°ä½ çš„ä¸šåŠ¡æœåŠ¡å™¨è¿›è¡Œå…³è”å­˜å‚¨</span>
        <span class="hljs-comment">// uploadCidToServer(cid);</span>
        
        <span class="hljs-comment">// å¯é€šè¿‡ Vuex æˆ–å…¨å±€äº‹ä»¶æ›´æ–° UI çŠ¶æ€</span>
        uni.$emit(<span class="hljs-string">'push-cid-ready'</span>, cid);
      },
      <span class="hljs-attr">fail</span>: <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–CIDå¤±è´¥:'</span>, err);
        <span class="hljs-comment">// å¤„ç†å¤±è´¥é€»è¾‘ï¼Œå¦‚é‡è¯•</span>
      }
    });
  }, <span class="hljs-number">3000</span>); <span class="hljs-comment">// å»¶è¿Ÿ 3 ç§’ï¼Œå¯æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´</span>

  <span class="hljs-comment">// æ–¹æ¡ˆ2ï¼šç›‘å¬äº‹ä»¶ï¼ˆæ›´ç²¾å‡†ï¼‰</span>
  <span class="hljs-comment">// uni.onPushMessage((res) =&gt; {...}); // æ¥æ”¶æ¨é€æ¶ˆæ¯</span>
  <span class="hljs-comment">// ä¹Ÿå¯ä»¥åœ¨æœåŠ¡åˆå§‹åŒ–æˆåŠŸçš„äº‹ä»¶ä¸­è·å–CID</span>
}
</code></pre>
<h3 data-id="heading-7">3.2 å‘é€ä½ çš„ç¬¬ä¸€æ¡æ¨é€</h3>
<ol>
<li>
<p><strong>ç™»å½• DCloud åå°</strong>ï¼šè¿›å…¥ä½ çš„åº”ç”¨ï¼Œæ‰¾åˆ°Â  <strong>â€œUniPushâ€</strong> Â åŠŸèƒ½æ¨¡å—ã€‚</p>
</li>
<li>
<p><strong>åˆ›å»ºæ¨é€</strong>ï¼š</p>
<ul>
<li>ç‚¹å‡»Â  <strong>â€œåœ¨çº¿æ¨é€â€</strong> Â æˆ–Â  <strong>â€œæ¨é€æ¶ˆæ¯â€</strong> ã€‚</li>
<li>æ¨é€æ–¹å¼é€‰æ‹©Â  <strong>â€œå•æ’­ï¼ˆCIDï¼‰â€</strong> ï¼Œå°†ä¸Šä¸€æ­¥è·å–çš„ CID å¡«å…¥ã€‚</li>
<li>å¡«å†™æ¨é€æ ‡é¢˜ã€å†…å®¹ã€‚<strong>å†…å®¹åº”å°½é‡æ¨¡æ‹ŸçœŸå®åœºæ™¯</strong>ï¼ˆå¦‚â€œæ¬¢è¿ä½¿ç”¨â€ã€â€œè®¢å•å·²å‘è´§â€ï¼‰ï¼Œé¿å…ä½¿ç”¨â€œtestâ€ã€â€œaaaaâ€ç­‰æµ‹è¯•æ–‡æœ¬ï¼Œä»¥é˜²è¢«ç³»ç»Ÿæˆ–å‚å•†é€šé“è¯¯åˆ¤ä¸ºéªšæ‰°ä¿¡æ¯è€Œæ‹¦æˆªã€‚</li>
<li>ç‚¹å‡»å‘é€ã€‚</li>
</ul>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/977b333379fa4f99a9da33d45f7912c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5qOx6Ju-5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259165&amp;x-signature=WFcGec9BArATZaa7GT9mEgqCUVw%3D" alt="image.png" loading="lazy"/></p>
<ol start="3">
<li>
<p><strong>éªŒè¯ç»“æœ</strong>ï¼š</p>
<ul>
<li>å‘é€åï¼Œåœ¨Â  <strong>â€œæ¨é€è®°å½•â€</strong> Â ä¸­å¯ä»¥æŸ¥çœ‹çŠ¶æ€ã€‚æ˜¾ç¤ºâ€œå·²æ¥æ”¶â€å³è¡¨ç¤ºæ¨é€å·²æˆåŠŸæŠµè¾¾å®¢æˆ·ç«¯ã€‚</li>
<li>ç¡®ä¿ä½ çš„ App æ­£å¤„äº<strong>å‰å°è¿è¡Œ</strong>æˆ–<strong>åå°å­˜æ´»</strong>çŠ¶æ€ã€‚æ­¤æ—¶ï¼Œä½ åº”è¯¥èƒ½åœ¨è®¾å¤‡ä¸Šæ”¶åˆ°é€šçŸ¥æ æ¶ˆæ¯ã€‚</li>
</ul>
</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02c67c6b391e40018399cd3d60ee4633~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5omR5qOx6Ju-5a2Q:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259165&amp;x-signature=tQyZ4VR1NabCgz6YJq6yaQj7r0g%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-8">å››ã€ æ€»ç»“ä¸æ³¨æ„äº‹é¡¹</h2>
<p>è‡³æ­¤ï¼Œä½ å·²ç»å®Œæˆäº† UniPush åœ¨çº¿æ¨é€çš„æ ¸å¿ƒæµç¨‹ã€‚æˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹å…³é”®ç‚¹ï¼š</p>
<p>âœ…Â <strong>æ­£ç¡®æµç¨‹</strong>ï¼šåˆ›å»ºé¡¹ç›® â†’ å¯ç”¨æ¨¡å— â†’Â <strong>åˆ¶ä½œè‡ªå®šä¹‰åŸºåº§ï¼ˆå…³é”®ï¼ï¼‰</strong> Â â†’ å¹³å°é…ç½® â†’ è·å–CID â†’ åå°æ¨é€ã€‚</p>
<p>âš ï¸Â <strong>æ ¸å¿ƒè¦ç‚¹</strong>ï¼š</p>
<ol>
<li><strong>è°ƒè¯•å¿…é¡»ç”¨è‡ªå®šä¹‰åŸºåº§</strong>ï¼šè¿™æ˜¯è·å¾—æœ‰æ•ˆ CID çš„å‰æã€‚</li>
<li><strong>CID è·å–æœ‰æ—¶åº</strong>ï¼šä½¿ç”¨å»¶æ—¶æˆ–ç›‘å¬äº‹ä»¶ç¡®ä¿è·å–æˆåŠŸã€‚</li>
<li><strong>ä¿¡æ¯ä¸€è‡´</strong>ï¼šå¼€å‘è€…ä¸­å¿ƒé…ç½®çš„åŒ…åã€ç­¾åéœ€ä¸æ‰“åŒ…è¯ä¹¦ä¸€è‡´ã€‚</li>
<li><strong>æ¨é€å†…å®¹éœ€â€œçœŸå®â€</strong> ï¼šé¿å…çº¯æµ‹è¯•å†…å®¹è¢«è¿‡æ»¤ã€‚</li>
<li><strong>åœ¨çº¿æ¨é€çš„å±€é™æ€§</strong>ï¼šç›®å‰å®ç°çš„æ˜¯â€œåœ¨çº¿æ¨é€â€ï¼Œå³ App è¿›ç¨‹å­˜æ´»ï¼ˆå‰å°æˆ–åå°ï¼‰æ‰èƒ½æ¥æ”¶ã€‚è¦å®ç° App å®Œå…¨å…³é—­åä»èƒ½æ¥æ”¶ï¼ˆç¦»çº¿æ¨é€ï¼‰ï¼Œéœ€è¦é›†æˆ<strong>å„å¤§æ‰‹æœºå‚å•†çš„æ¨é€é€šé“</strong>ï¼ˆåä¸ºã€å°ç±³ã€OPPOã€vivo ç­‰ï¼‰</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[DeepSeek æœ€æ–°å¼€æºï¼ç›´æ¥å¹²åˆ°äº†æ•°å­¦å¥¥èµ›é‡‘ç‰Œæ°´å¹³ã€‚]]></title>    <link>https://juejin.cn/post/7578803491822288923</link>    <guid>https://juejin.cn/post/7578803491822288923</guid>    <pubDate>2025-12-02T05:59:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578803491822288923" data-draft-id="7578803491821928475" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="DeepSeek æœ€æ–°å¼€æºï¼ç›´æ¥å¹²åˆ°äº†æ•°å­¦å¥¥èµ›é‡‘ç‰Œæ°´å¹³ã€‚"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-12-02T05:59:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€›é€›GitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1442202996186093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            DeepSeek æœ€æ–°å¼€æºï¼ç›´æ¥å¹²åˆ°äº†æ•°å­¦å¥¥èµ›é‡‘ç‰Œæ°´å¹³ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442202996186093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€›é€›GitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T05:59:52.000Z" title="Tue Dec 02 2025 05:59:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åˆšåˆšï¼ŒDeepSeekÂ å¼€æºäº†æœ€æ–°çš„æ•°å­¦æ¨ç†æ¨¡å‹Â <strong>DeepSeek-Math-V2</strong>ã€‚<br/>
æœ€è¿‘å›½å¤– Geminiã€Claude ç¥ä»™æ‰“æ¶ï¼Œå°é²¸é±¼åˆæ´»è¿‡æ¥äº†ã€‚</p>
<p>è¿™ä¸ä»…ä»…æ˜¯ä¸€æ¬¡æ™®é€šçš„æ¨¡å‹è¿­ä»£ï¼Œæ ¹æ®åœ¨å›½é™…æ•°å­¦å¥¥æ—åŒ¹å…‹å’Œæ™®ç‰¹å—æ•°å­¦ç«èµ›ä¸Šçš„è¡¨ç°æ¥çœ‹ï¼Œè¿™å¯èƒ½æ˜¯å¼€æºæ¨¡å‹åœ¨æ•°å­¦æ¨ç†é¢†åŸŸçš„ä¸€ä¸ªé‡Œç¨‹ç¢‘æ—¶åˆ»ã€‚</p>
<p>æ•°å­¦æ¨ç†æ–°ç‹ç™»åŸºäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5f07382387a4b3f9e0ccad13e9a3857~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259992&amp;x-signature=Zev95xW4KXGwKxd%2FhBA%2B%2B8%2BLeYI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¦‚æœè¯´ä¸Šä¸€ä»£ DeepSeek-Math è®©æˆ‘ä»¬çœ‹åˆ°äº†å¼€æºæ¨¡å‹åœ¨æ•°å­¦é¢†åŸŸçš„æ½œåŠ›ï¼Œé‚£ä¹ˆè¿™ä¸€æ¬¡ V2 ç‰ˆæœ¬äº¤å‡ºäº†ä¸€ä»½ä»¤äººå’‹èˆŒçš„æˆç»©å•ï¼š<strong>IMO 2025 é‡‘ç‰Œæ°´å¹³</strong>ã€‚</p>
<p>è®©æˆ‘ä»¬ä¸€èµ·æ¥æ·±æ‰’ä¸€ä¸‹è¿™ä¸ªæ–°å‘å¸ƒçš„æ¨¡å‹åˆ°åº•æœ‰å¤šå¼ºã€‚</p>
<h2 data-id="heading-0">01ã€é¡¹ç›®ç®€ä»‹</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cdb74df8b5c242e9943675dbe58254f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259992&amp;x-signature=rWUlGGHPsZWnGqwgxUFyEj47i80%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸Šé¢è¿™ä¸ªå›¾å°±æ˜¯ DeepSeek-Math-V2 ç”©å‡ºçš„æˆç»©å•ã€‚</p>
<p>ğŸ† IMO 2025ï¼ˆå›½é™…æ•°å­¦å¥¥æ—åŒ¹å…‹ï¼‰ï¼šé‡‘ç‰Œæ°´å¹³</p>
<p>DeepSeek-Math-V2 å±•ç°äº†æå¼ºçš„å®šç†è¯æ˜èƒ½åŠ›ï¼Œè¾¾åˆ°äº†é‡‘ç‰Œé€‰æ‰‹çš„å¾—åˆ†çº¿ã€‚</p>
<p>åœ¨ IMO-ProofBench åŸºå‡†æµ‹è¯•ä¸Šï¼Œè¶…è¶Šäº† Google DeepMind å¼•ä»¥ä¸ºå‚²çš„Â <strong>DeepThink</strong>Â æ¨¡å‹ï¼Œå®ƒæ›¾ä¹Ÿæ˜¯é‡‘ç‰Œå¾—ä¸»ã€‚</p>
<p>è€Œä¸”è¶…è¶ŠÂ <strong>DeepThink ä¸æ˜¯ä¸€ä¸ªç‚¹ï¼Œè€Œæ˜¯ 10 ä¸ªç‚¹ã€‚ç´§è·Ÿåœ¨å®ƒä»¬åé¢çš„æ˜¯ GPT-5ã€Grok4 ç­‰æ¨¡å‹ã€‚</strong></p>
<p><strong>ğŸ“ Putnam 2024ï¼ˆæ™®ç‰¹å—æ•°å­¦ç«èµ›ï¼‰ï¼š118/120 åˆ†</strong></p>
<p>è¿™å‡ ä¹æ˜¯ä¸€ä¸ªæ»¡åˆ†æˆç»©ï¼è¦çŸ¥é“ Putnam æ˜¯å…¨ç¾é¡¶å°–å¤§å­¦ç”Ÿå‚åŠ çš„è¶…é«˜éš¾åº¦æ•°å­¦ç«èµ›ï¼Œèƒ½æ‹¿æ»¡åˆ†æ„å‘³ç€å®ƒä¸ä»…ä¼šåšé¢˜ï¼Œè¿˜èƒ½å¤„ç†æé«˜éš¾åº¦çš„é€»è¾‘é™·é˜±ã€‚</p>
<h2 data-id="heading-1">02ã€ä¸ºä»€ä¹ˆæå‡è¿™ä¹ˆå¤šï¼Ÿ</h2>
<p>ä¸ºä»€ä¹ˆ DeepSeek-Math-V2 èƒ½å–å¾—å¦‚æ­¤å·¨å¤§çš„çªç ´ï¼Ÿå®˜æ–¹çš„æŠ€æœ¯æ–‡æ¡£é€éœ²äº†å‡ ä¸ªå…³é”®ç‚¹ï¼Œè¿™ä¸ä»…ä»…æ˜¯å †å‚æ•°çš„ç»“æœã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79d119127c7144168c6e99c59db3490a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259992&amp;x-signature=wvGDpoqavsfGcUyWhmv3P8D6%2Bgo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>â‘  æ ¸å¿ƒæ¶æ„</p>
<p>è¿™ä¸ªæ¨¡å‹æ˜¯åŸºäº DeepSeek æœ€æ–°çš„Â <strong>V3.2-Exp-Base</strong>Â æ„å»ºçš„ã€‚</p>
<p>å®ƒç»§æ‰¿äº† V3 ç³»åˆ—å¼ºå¤§çš„é€šç”¨è¯­è¨€ç†è§£èƒ½åŠ›å’Œ MoEï¼ˆæ··åˆä¸“å®¶ï¼‰æ¶æ„çš„é«˜æ•ˆæ€§ã€‚è€Œä¸”å‚æ•°é‡è¾¾åˆ°äº†æƒŠäººçš„Â <strong>685B</strong>ï¼ˆ6850äº¿ï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªçœŸæ­£çš„å·¨æ— éœ¸æ¨¡å‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d555cac4f64b43b48ed9abb017e6ec43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259992&amp;x-signature=2q9LEP%2F5V0GWHOdCr6a0Gt08NTk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>â‘¡ éªŒè¯è€…-ç”Ÿæˆå™¨åŒæ ¸é©±åŠ¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f6a7ebe80084c5fad34ef5ea8b8e964~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765259992&amp;x-signature=a%2B7ioR%2BthGlwygnG%2BVTxATMloDM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™æ˜¯æœ¬æ¬¡ V2 æœ€å¤§çš„æŠ€æœ¯äº®ç‚¹ã€‚</p>
<p>ä¼ ç»Ÿçš„æ•°å­¦æ¨¡å‹å¾€å¾€åªæ˜¯é¢„æµ‹ä¸‹ä¸€ä¸ª Tokenï¼Œè¿½æ±‚æœ€ç»ˆç­”æ¡ˆæ­£ç¡®ã€‚ä½†æ•°å­¦æ¨ç†çš„æ ¸å¿ƒåœ¨äº<strong>è¿‡ç¨‹çš„ä¸¥è°¨æ€§</strong>ã€‚</p>
<p>DeepSeek-Math-V2 å¼•å…¥äº†è‡ªæˆ‘éªŒè¯ï¼ˆSelf-Verificationï¼‰æœºåˆ¶ï¼š</p>
<ul>
<li><strong>Generatorï¼ˆç”Ÿæˆå™¨ï¼‰</strong> ï¼šè´Ÿè´£æå‡ºè§£é¢˜æ€è·¯å’Œè¯æ˜æ­¥éª¤ã€‚</li>
<li>Verifierï¼ˆéªŒè¯è€…ï¼‰ï¼šåƒäººç±»æ•°å­¦å®¶ä¸€æ ·ï¼Œä¸€æ­¥æ­¥å®¡æŸ¥æ¨ç†è¿‡ç¨‹çš„ä¸¥è°¨æ€§ã€‚</li>
</ul>
<p>è¿™ç§æœºåˆ¶è§£å†³äº† AI åšæ•°å­¦é¢˜çš„ä¸€ä¸ªé¡½ç–¾ï¼šâ€œç­”æ¡ˆå¯¹äº†ï¼Œä½†è¿‡ç¨‹å…¨æ˜¯èƒ¡æ‰¯â€ã€‚</p>
<p>V2 ç‰ˆæœ¬ä¸ä»…èƒ½ç»™å‡ºç­”æ¡ˆï¼Œè¿˜èƒ½ç¡®ä¿æ¯ä¸€æ­¥æ¨å¯¼éƒ½æ˜¯é€»è¾‘é—­ç¯çš„ã€‚</p>
<p>â‘¢ Test-Time Compute Scaling</p>
<p>ç±»ä¼¼äº OpenAI çš„ o1 ç³»åˆ—æ€è·¯ï¼ŒDeepSeek-Math-V2 æ”¯æŒåœ¨æ¨ç†é˜¶æ®µé€šè¿‡å¢åŠ è®¡ç®—é‡æ¥æ¢å–æ›´é«˜çš„å‡†ç¡®ç‡ã€‚</p>
<p>å®ƒä¼šåœ¨è¾“å‡ºæœ€ç»ˆç»“æœå‰ï¼Œè¿›è¡Œå¤šè½®çš„è‡ªæˆ‘åšå¼ˆå’ŒéªŒè¯ï¼Œç›´åˆ°æ‰¾åˆ°æœ€å®Œç¾çš„è¯æ˜è·¯å¾„ã€‚</p>
<h2 data-id="heading-2">03ã€å¼€æºåœ°å€</h2>
<p>è¿™ä¸ªæ¨¡å‹Â Apache 2.0 åè®®å…¨å¼€æºï¼ŒDeepSeek è¿™æ¬¡ä¾ç„¶ä¿æŒäº†ä¾ å®¢é£èŒƒï¼Œä¸è—ç€æ–ç€ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">HFåœ°å€ï¼šhttps://huggingface.co/deepseek-ai/DeepSeek-Math-V2å¼€æºåœ°å€ï¼šhttps://github.com/deepseek-ai/DeepSeek-Math-V2
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vite 5ä¸ªéšè—åŠŸèƒ½å¤§æ­ç§˜ï¼š90%çš„å¼€å‘è€…éƒ½ä¸çŸ¥é“è¿™äº›æé€ŸæŠ€å·§ï¼]]></title>    <link>https://juejin.cn/post/7578767608631230464</link>    <guid>https://juejin.cn/post/7578767608631230464</guid>    <pubDate>2025-12-02T04:17:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578767608631230464" data-draft-id="7578794217961734184" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vite 5ä¸ªéšè—åŠŸèƒ½å¤§æ­ç§˜ï¼š90%çš„å¼€å‘è€…éƒ½ä¸çŸ¥é“è¿™äº›æé€ŸæŠ€å·§ï¼"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-02T04:17:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vite 5ä¸ªéšè—åŠŸèƒ½å¤§æ­ç§˜ï¼š90%çš„å¼€å‘è€…éƒ½ä¸çŸ¥é“è¿™äº›æé€ŸæŠ€å·§ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:17:01.000Z" title="Tue Dec 02 2025 04:17:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vite 5ä¸ªéšè—åŠŸèƒ½å¤§æ­ç§˜ï¼š90%çš„å¼€å‘è€…éƒ½ä¸çŸ¥é“è¿™äº›æé€ŸæŠ€å·§ï¼</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Vite ä½œä¸ºç°ä»£å‰ç«¯æ„å»ºå·¥å…·çš„ä»£è¡¨ï¼Œå‡­å€Ÿå…¶é—ªç”µèˆ¬çš„å¯åŠ¨é€Ÿåº¦å’Œçƒ­æ›´æ–°æ•ˆç‡ï¼Œå·²ç»æˆä¸ºä¼—å¤šå¼€å‘è€…çš„é¦–é€‰ã€‚ç„¶è€Œï¼Œå¤§å¤šæ•°å¼€å‘è€…ä»…ä»…åœç•™åœ¨åŸºç¡€ç”¨æ³•ä¸Šï¼Œå¿½ç•¥äº† Vite è®¸å¤šéšè—çš„å¼ºå¤§åŠŸèƒ½ã€‚æœ¬æ–‡å°†æ·±å…¥æŒ–æ˜ Vite 5 ä¸ªé²œä¸ºäººçŸ¥çš„é«˜çº§ç‰¹æ€§ï¼Œå¸®åŠ©ä½ è§£é”æ›´é«˜æ•ˆçš„å¼€å‘ä½“éªŒã€‚</p>
<h2 data-id="heading-2">1. é¢„æ„å»ºä¼˜åŒ–ï¼šæ‰‹åŠ¨æ§åˆ¶ä¾èµ–é¢„æ‰“åŒ…</h2>
<h3 data-id="heading-3">èƒŒæ™¯ä¸åŸç†</h3>
<p>Vite çš„æ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€æ˜¯åˆ©ç”¨äº† ES Modules çš„æµè§ˆå™¨åŸç”Ÿæ”¯æŒï¼Œä½†å¯¹äº CommonJS æ ¼å¼çš„ä¾èµ–é¡¹ï¼ˆå¦‚ lodashï¼‰ï¼ŒVite ä¼šåœ¨é¦–æ¬¡å¯åŠ¨æ—¶è¿›è¡Œé¢„æ„å»ºï¼ˆPre-Bundlingï¼‰ã€‚è¿™ä¸€è¿‡ç¨‹é»˜è®¤æ˜¯è‡ªåŠ¨çš„ï¼Œä½†ä½ å¯ä»¥é€šè¿‡é…ç½®è·å¾—æ›´ç²¾ç»†çš„æ§åˆ¶ã€‚</p>
<h3 data-id="heading-4">é«˜çº§é…ç½®æŠ€å·§</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">optimizeDeps</span>: {
    <span class="hljs-comment">// å¼ºåˆ¶æ’é™¤æŸäº›ä¾èµ–é¡¹ï¼ˆé€‚ç”¨äºå·²ç»ç¬¦åˆ ESM è§„èŒƒçš„åº“ï¼‰</span>
    <span class="hljs-attr">exclude</span>: [<span class="hljs-string">'some-esm-package'</span>],
    
    <span class="hljs-comment">// æ‰‹åŠ¨æŒ‡å®šéœ€è¦é¢„æ„å»ºçš„ä¾èµ–é¡¹ï¼ˆè§£å†³è‡ªåŠ¨æ£€æµ‹é—æ¼é—®é¢˜ï¼‰</span>
    <span class="hljs-attr">include</span>: [<span class="hljs-string">'lodash'</span>, <span class="hljs-string">'axios'</span>],
    
    <span class="hljs-comment">// æ·±åº¦ä¼˜åŒ–ï¼šä¸ºç‰¹å®šä¾èµ–å¯ç”¨ esbuild-loader</span>
    <span class="hljs-attr">esbuildOptions</span>: {
      <span class="hljs-attr">plugins</span>: [
        <span class="hljs-title function_">esbuildCommonjs</span>([<span class="hljs-string">'problematic-cjs-module'</span>])
      ]
    }
  }
}
</code></pre>
<h3 data-id="heading-5">æ€§èƒ½å½±å“åˆ†æ</h3>
<ul>
<li><strong>å†·å¯åŠ¨æ—¶é—´å‡å°‘30%+</strong>ï¼šé€šè¿‡ç²¾å‡†æ§åˆ¶é¢„æ„å»ºèŒƒå›´é¿å…ä¸å¿…è¦çš„å¤„ç†ã€‚</li>
<li><strong>è§£å†³å¹½çµä¾èµ–é—®é¢˜</strong>ï¼šæ˜¾å¼å£°æ˜é—´æ¥ä¾èµ–å¯é˜²æ­¢è¿è¡Œæ—¶é”™è¯¯ã€‚</li>
<li><strong>å¤§å‹monorepoåœºæ™¯ä¼˜åŒ–</strong>ï¼šåœ¨<code>pnpm</code>/<code>yarn workspaces</code>ä¸­ç‰¹åˆ«æœ‰æ•ˆã€‚</li>
</ul>
<h2 data-id="heading-6">2. Workerçº¿ç¨‹åŠ é€Ÿï¼šçœŸæ­£çš„å¹¶è¡Œå¤„ç†</h2>
<h3 data-id="heading-7">Web Workersçš„åˆ›æ–°ç”¨æ³•</h3>
<p>Viteå¯¹Web Workersçš„æ”¯æŒè¿œè¶…ç®€å•æ–‡ä»¶å¯¼å…¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// worker.js?worker&amp;inline</span>
<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">'./heavy-task.js'</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>), {
 <span class="hljs-attr">type</span>: <span class="hljs-string">'module'</span>
})

<span class="hljs-comment">// vite.config.jsç‰¹æ®Šé…ç½®</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
 <span class="hljs-attr">worker</span>: {
   <span class="hljs-attr">format</span>: <span class="hljs-string">'es'</span>, <span class="hljs-comment">// Workerè¾“å‡ºæ ¼å¼</span>
   <span class="hljs-attr">plugins</span>: [<span class="hljs-comment">/* workerä¸“å±æ’ä»¶ */</span>],
   <span class="hljs-attr">rollupOptions</span>: { <span class="hljs-comment">/* workerä¸“ç”¨çš„rollupé…ç½® */</span> }
 }
}
</code></pre>
<h3 data-id="heading-8">Benchmarkæ•°æ®å¯¹æ¯”</h3>

























<table><thead><tr><th>Operation</th><th>Traditional</th><th>Vite Optimized</th></tr></thead><tbody><tr><td>WASMç¼–è¯‘</td><td>~450ms</td><td>~120ms</td></tr><tr><td>CSVè§£æ</td><td>~380ms</td><td>~95ms</td></tr><tr><td>Imageå‹ç¼©</td><td>~620ms</td><td>~210ms</td></tr></tbody></table>
<h3 data-id="heading-9">SSRä¸­çš„ç‰¹æ®Šåº”ç”¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// server-worker.ts?node-worker</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Worker</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'worker_threads'</span>
<span class="hljs-keyword">const</span> worker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Worker</span>(__filename)
</code></pre>
<h2 data-id="heading-10">3. CSSä»£ç åˆ†å‰²é­”æ³•ï¼šçªç ´æ€§çš„ä½œç”¨åŸŸæ§åˆ¶</h2>
<h3 data-id="heading-11">:globalä¸:localçš„é©å‘½æ€§å†™æ³•</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* component.module.css */</span>
<span class="hljs-selector-class">.localStyle</span> { <span class="hljs-comment">/* auto-scoped */</span> }

<span class="hljs-comment">/* deep selectors */</span>
<span class="hljs-selector-class">.localStyle</span> :<span class="hljs-built_in">global</span>(.ant-btn) {
 <span class="hljs-attribute">color</span>: red;
}

<span class="hljs-comment">/* global override */</span>
:<span class="hljs-built_in">global</span>(body) {
 <span class="hljs-attr">--main-color</span>: <span class="hljs-number">#4568dc</span>;
}
</code></pre>
<h3 data-id="heading-12">Lightning CSSé›†æˆç§˜å¯†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
 <span class="hljs-attr">css</span>: {
   <span class="hljs-attr">transformer</span>: <span class="hljs-string">'lightningcss'</span>, <span class="hljs-comment">// vs postcss(default)</span>
   <span class="hljs-attr">lightningcss</span>: {
     <span class="hljs-attr">drafts</span>: {
       <span class="hljs-attr">nesting</span>: <span class="hljs-literal">true</span>,
       <span class="hljs-attr">customMedia</span>: <span class="hljs-literal">true</span>
     },
     <span class="hljs-attr">excludeFeaturesRegex</span>:<span class="hljs-regexp">/^width$/</span> 
   }
 }
}
</code></pre>
<h3 data-id="heading-13">Critical CSSæå–æ–¹æ¡ˆï¼ˆå®éªŒæ€§ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { extractCritical } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-critical'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
 <span class="hljs-attr">plugins</span>: [
   <span class="hljs-title function_">extractCritical</span>({
     <span class="hljs-attr">paths</span>: [<span class="hljs-string">'/home'</span>],
     <span class="hljs-attr">extractPackagesCSS</span>: <span class="hljs-literal">true</span>,
     <span class="hljs-attr">minifyCSSLevels</span>:[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]
   })
 ]
})
</code></pre>
<h2 data-id="heading-14">4. Build Analyzerçš„ç§˜å¯†æ­¦å™¨</h2>
<h3 data-id="heading-15">Rollupå¯è§†åŒ–å¢å¼ºç‰ˆ</h3>
<p>å®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm i rollup-plugin-visualizer -D

<span class="hljs-comment"># or more advanced:</span>
npm i @bundle-stats/vite-plugin -D 
</code></pre>
<p>é«˜çº§é…ç½®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { visualizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'rollup-plugin-visualizer'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
 <span class="hljs-attr">plugins</span>: [
   <span class="hljs-title function_">visualizer</span>({
     <span class="hljs-attr">template</span>:<span class="hljs-string">'treemap'</span>,
     gzipSize :<span class="hljs-literal">true</span>,
     brotliSize :<span class="hljs-literal">true</span>,
     <span class="hljs-attr">filename</span>:<span class="hljs-string">'stats.html'</span>
   })
 ],
 <span class="hljs-attr">build</span>:{
   <span class="hljs-attr">rollupOptions</span>:{
     <span class="hljs-attr">output</span>:{
       <span class="hljs-title function_">manualChunks</span>(<span class="hljs-params">id</span>){
         <span class="hljs-keyword">if</span>(id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'node_modules'</span>)){<span class="hljs-keyword">return</span><span class="hljs-string">'vendor'</span>}
         <span class="hljs-keyword">if</span>(id.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'utils'</span>)){<span class="hljs-keyword">return</span><span class="hljs-string">'utils'</span>}
       }
     }  
   }
 }
})
</code></pre>
<h3 data-id="heading-16">Bundleåˆ†æé»„é‡‘æ³•åˆ™ï¼š</h3>
<ol>
<li><strong>é‡å¤æ¨¡å—æ£€æµ‹</strong>ï¼šåŒä¸€åŒ…ä¸åŒç‰ˆæœ¬ä¼šæ˜¾è‘—å¢åŠ ä½“ç§¯ã€‚</li>
<li><strong>åŠ¨æ€å¯¼å…¥å®¡è®¡</strong>ï¼šæœªä½¿ç”¨çš„å¼‚æ­¥ç»„ä»¶ä¼šæ‚„æ‚„æ‰“åŒ…ã€‚</li>
<li><strong>CSSå æ¯”ç›‘æ§</strong>ï¼šè¶…è¿‡20%é€šå¸¸æ„å‘³ç€è®¾è®¡ç³»ç»Ÿæ»¥ç”¨ã€‚</li>
</ol>
<h2 data-id="heading-17">5. Server-Side Renderingè¶…é¢‘æ¨¡å¼</h2>
<h3 data-id="heading-18">SSRä¼˜åŒ–ä¸‰æ¿æ–§ï¼š</h3>
<h4 data-id="heading-19">A) PreloadæŒ‡ä»¤ç”Ÿæˆå™¨ï¼š</h4>
<p><code>javascript vite.config.js ssr:{ preload:{ resolveSpecifier:(s)=&gt;`${s}?ssrPreload` }} </code></p>
<h4 data-id="heading-20">B) Smart Manifestæ³¨å…¥ï¼š</h4>
<p><code>javascript server:{ middlewareMode:'ssr-manifest', manifestTransform:(m)=&gt;{...} } </code></p>
<h4 data-id="heading-21">C) Streaming SSRç¤ºä¾‹ï¼š</h4>
<p><code>jsx async function renderStream(res){ const { pipe } = await renderToPipeableStream(&lt;App/&gt;); pipe(res); } </code></p>
<h3 data-id="heading-22">Node.jsæ€§èƒ½å¯¹ç…§è¡¨ï¼š</h3>






















<table><thead><tr><th>Strategy</th><th>Memory Usage</th><th>TTFB</th><th>Hydration Time</th></tr></thead><tbody><tr><td>Classic SSR</td><td>High(~300MB)</td><td>Medium(120ms)</td><td>Slow(400ms)</td></tr><tr><td>Vite Optimized</td><td>Low(~180MB) Fast(45ms) Fast(90ms)</td><td/></tr></tbody></table>
<h2 data-id="heading-23">Bonusï¼šDebugè¶…çº§æŠ€å·§é›†é”¦</h2>
<ol>
<li>
<p><strong>ç¯å¢ƒå˜é‡é­”æœ¯å¸ˆ</strong>ï¼š
<code>bash .env[.[mode][.[local]]].* </code>å¤šé‡ç¯å¢ƒåˆå¹¶è§„åˆ™ã€‚</p>
</li>
<li>
<p><strong>HMRè°ƒè¯•ç§˜ç±</strong>ï¼š
Add <code>?v=timestamp</code> to force reload any module.</p>
</li>
<li>
<p><strong>Cacheæ ¸æ­¦å™¨æ¸…é™¤</strong>ï¼š</p>
</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">rm</span> -rf node_modules/.vite &amp;&amp; <span class="hljs-built_in">rm</span> -rf node_modules/.cache 
</code></pre>
<p>æ¯”--forceæ›´å½»åº•ã€‚</p>
<ol start="4">
<li><strong>Profileç«ç„°å›¾ç”Ÿæˆ</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-arduino" lang="arduino">vite --profile &amp;&amp; chrome:<span class="hljs-comment">//tracing/</span>
</code></pre>
<h2 data-id="heading-24"/>
<h2 data-id="heading-25"/>
<h2 data-id="heading-26"/>
<h2 data-id="heading-27"/>
<h2 data-id="heading-28"/>
<h2 data-id="heading-29"/>
<p>æ€»ç»“</p>
<p>æœ¬æ–‡æ­ç¤ºçš„è¿™äº›é«˜çº§æŠ€æœ¯ç»éç®€å•çš„APIç½—åˆ—â€”â€”å®ƒä»¬æ˜¯ä½œè€…åœ¨å®é™…ä¼ä¸šçº§é¡¹ç›®ä¸­ç»è¿‡åå¤éªŒè¯çš„æ€§èƒ½åˆ©å™¨ã€‚ä»ç²¾ç¡®æ§åˆ¶çš„ä¾èµ–é¢„æ„å»ºåˆ°é©å‘½æ€§çš„CSSå¤„ç†æ–¹å¼ï¼Œå†åˆ°SSRçš„è¶…é¢‘ä¼˜åŒ–ï¼Œæ¯ä¸ªæŠ€å·§èƒŒåéƒ½è•´å«ç€å¯¹Viteæ¶æ„åŸç†çš„æ·±åˆ»ç†è§£ã€‚</p>
<p>è¦çœŸæ­£æŒæ¡è¿™äº›æŠ€æœ¯ï¼Œå»ºè®®è¯»è€…ï¼š</p>
<ol>
<li><strong>æ¸è¿›å¼å®è·µ</strong> ï¼šæ¯å‘¨å°è¯•ä¸€ä¸ªç‰¹æ€§å¹¶æµ‹é‡æ€§èƒ½å˜åŒ–ï¼›</li>
<li><strong>æºç è¿½è¸ª</strong> ï¼šé‡åˆ°é—®é¢˜æ—¶ç›´æ¥æŸ¥é˜…vite/src/node/optimizerï¼›</li>
<li><strong>ç¤¾åŒºè´¡çŒ®</strong> ï¼šä¼˜ç§€çš„å®è·µåº”å›é¦ˆç»™å¼€æºç¤¾åŒºã€‚</li>
</ol>
<p>è®°ä½ï¼š"æœ€å¿«çš„æ„å»ºå·¥å…·"ä¸æ˜¯ç»ˆç‚¹è€Œæ˜¯èµ·ç‚¹â€”â€”å…³é”®åœ¨äºä½ å¦‚ä½•é©¾é©­å®ƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Manim v0.19.1 å‘å¸ƒå•¦ï¼ä¸‰å¤§æ–°ç‰¹æ€§è®©åŠ¨ç”»åˆ¶ä½œæ›´ä¸æ»‘]]></title>    <link>https://juejin.cn/post/7578787344612769828</link>    <guid>https://juejin.cn/post/7578787344612769828</guid>    <pubDate>2025-12-02T04:28:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578787344612769828" data-draft-id="7578811288819449899" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Manim v0.19.1 å‘å¸ƒå•¦ï¼ä¸‰å¤§æ–°ç‰¹æ€§è®©åŠ¨ç”»åˆ¶ä½œæ›´ä¸æ»‘"/> <meta itemprop="keywords" content="Python,åŠ¨æ•ˆ,åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T04:28:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="databook"/> <meta itemprop="url" content="https://juejin.cn/user/3526889035006702"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Manim v0.19.1 å‘å¸ƒå•¦ï¼ä¸‰å¤§æ–°ç‰¹æ€§è®©åŠ¨ç”»åˆ¶ä½œæ›´ä¸æ»‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3526889035006702/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    databook
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:28:41.000Z" title="Tue Dec 02 2025 04:28:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Manim ç¤¾åŒºæ–°å‘å¸ƒäº† <strong>v0.19.1</strong> ç‰ˆæœ¬ï¼ˆå‘å¸ƒäº 12 æœˆ 1 æ—¥ï¼‰ã€‚è™½ç„¶è¿™æ˜¯ä¸€ä¸ªå°ç‰ˆæœ¬å·æ›´æ–°ï¼Œä½†é‡Œé¢å¯æ˜¯è—ç€å‡ ä¸ªéå¸¸å®ç”¨çš„æ–°åŠŸèƒ½ï¼</p>
<p>æ— è®ºä½ æ˜¯åˆšå…¥å‘çš„æ–°æ‰‹ï¼Œæˆ–è€…å·²ç»è¢«æŸäº›ç—›ç‚¹æŠ˜ç£¨è¿‡çš„è€æ‰‹ï¼Œè¿™ç¯‡æ›´æ–°é€Ÿè§ˆéƒ½å€¼å¾—ä¸€çœ‹ã€‚</p>
<h2 data-id="heading-0">1. ğŸŒŸ äº®ç‚¹ä¸€ï¼šç»ˆäºå¯ä»¥â€œå›ºå®šâ€éšæœºé¢œè‰²äº†ï¼</h2>
<p>ä»¥å‰æˆ‘ä»¬åœ¨ä½¿ç”¨ <code>random_color()</code> æ—¶ï¼Œæœ€å¤§çš„ç—›ç‚¹å°±æ˜¯ï¼š<strong>æ¯æ¬¡è¿è¡Œè„šæœ¬ï¼Œç”Ÿæˆçš„é¢œè‰²éƒ½ä¸ä¸€æ ·ï¼</strong><br/>
æœ‰æ—¶å€™ä½ è§‰å¾—è¿™æ¬¡éšæœºå‡ºæ¥çš„é…è‰²æ–¹æ¡ˆç®€ç›´å®Œç¾ï¼Œç»“æœæ”¹äº†ä¸€è¡Œæ— å…³ä»£ç å†æ¸²æŸ“ï¼Œé…è‰²å˜äº†â€¦â€¦å¿ƒæ€ç›´æ¥å´©äº†æœ‰æ²¡æœ‰ï¼Ÿ</p>
<p>åœ¨ <code>v0.19.1</code> ä¸­ï¼Œ<code>random_color()</code> ç»ˆäºæ”¯æŒ <code>seed</code>ï¼ˆéšæœºç§å­ï¼‰å‚æ•°äº†ï¼è¿™æ„å‘³ç€ä½ å¯ä»¥é€šè¿‡æŒ‡å®šç§å­ï¼Œè®©éšæœºé¢œè‰²å˜å¾—â€œç¡®å®šâ€ã€‚</p>
<h4 data-id="heading-1">1.0.1. ğŸŒ° ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> manim <span class="hljs-keyword">import</span> *


<span class="hljs-keyword">class</span> <span class="hljs-title class_">DeterministicColors</span>(<span class="hljs-title class_ inherited__">Scene</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># ä»¥å‰ï¼šæ¯æ¬¡è¿è¡Œé¢œè‰²éƒ½å¯èƒ½ä¸åŒ</span>
        <span class="hljs-comment"># circle = Circle(color=random_color())</span>

        <span class="hljs-comment"># ç°åœ¨ï¼šæŒ‡å®š seed=1ï¼Œæ— è®ºè¿è¡Œå¤šå°‘æ¬¡ï¼Œå®ƒæ°¸è¿œæ˜¯åŒä¸€ä¸ªé¢œè‰²ï¼</span>
        rnd = RandomColorGenerator(seed=<span class="hljs-number">1</span>)
        dot_a = Dot(radius=<span class="hljs-number">1</span>, color=rnd.<span class="hljs-built_in">next</span>())
        dot_a.shift(LEFT * <span class="hljs-number">2</span>)

        <span class="hljs-comment"># å³ä½¿åœ¨ä¸åŒçš„åœ°æ–¹è°ƒç”¨ï¼Œåªè¦ç§å­ä¸€æ ·ï¼Œé¢œè‰²å°±ä¸€æ ·</span>
        dot_b = Dot(radius=<span class="hljs-number">1</span>, color=rnd.<span class="hljs-built_in">next</span>())
        dot_b.shift(RIGHT * <span class="hljs-number">2</span>)

        self.play(Create(dot_a), Create(dot_b))
        self.wait()
</code></pre>
<p>åªè¦<code>seed</code>çš„å€¼ä¸€æ ·ï¼Œæ¯æ¬¡çš„éšæœºçš„é¢œè‰²éƒ½ä¸€æ ·ã€‚</p>
<p>è¿™å¯¹äºåˆ¶ä½œç³»åˆ—è§†é¢‘æˆ–è€…è°ƒè¯•é…è‰²æ—¶ç®€ç›´æ˜¯æ•‘å‘½ç¨»è‰ã€‚</p>
<h2 data-id="heading-2">2. ğŸŒŸ äº®ç‚¹äºŒï¼šValueTracker ç»ˆäºå­¦ä¼šç®—æœ¯äº†</h2>
<p><code>ValueTracker</code> æ˜¯ Manim ä¸­åšåŠ¨æ€æ•°å€¼åŠ¨ç”»çš„æ ¸å¿ƒã€‚ä½†ä»¥å‰å®ƒæœ‰ç‚¹â€œç¬¨â€ï¼Œä¸èƒ½ç›´æ¥å‚ä¸åŠ å‡ä¹˜é™¤ã€‚</p>
<p>æ¯”å¦‚ä½ æƒ³è®©ä¸€ä¸ª <code>tracker</code> çš„å€¼ç¿»å€ï¼Œä»¥å‰ä½ å¾—å†™ <code>t.set_value(t.get_value() * 2)</code>ã€‚</p>
<p>ç°åœ¨åˆ™ç›´æ¥ä¹˜è¿™å°±è¡Œäº†ï¼</p>
<p>æ–°ç‰ˆæœ¬æ”¯æŒ <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>//</code>, <code>%</code>, <code>**</code> ç­‰å¸¸è§è¿ç®—ç¬¦ã€‚</p>
<h4 data-id="heading-3">2.0.1. ğŸŒ° ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> manim <span class="hljs-keyword">import</span> *

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SmartTracker</span>(<span class="hljs-title class_ inherited__">Scene</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self</span>):
        tracker = ValueTracker(<span class="hljs-number">2</span>)

        number = DecimalNumber()
        number.add_updater(<span class="hljs-keyword">lambda</span> m: m.set_value(tracker.get_value()))

        self.add(number)

        <span class="hljs-comment"># ä»¥å‰çš„å†™æ³•ï¼ˆç°åœ¨ä¾ç„¶å¯ç”¨ï¼Œä½†æ¯”è¾ƒç¹çï¼‰</span>
        <span class="hljs-comment"># self.play(tracker.animate.set_value(tracker.get_value() + 5))</span>

        <span class="hljs-comment"># v0.19.1 çš„æ–°ç©æ³•ï¼šç›´æ¥å¯¹å¯¹è±¡è¿›è¡Œæ“ä½œ</span>
        <span class="hljs-comment"># æ³¨æ„ï¼šè¿™é‡Œå±•ç¤ºçš„æ˜¯é€»è¾‘ä¸Šçš„ç®€åŒ–ï¼Œåœ¨é animate åœºæ™¯ä¸‹å¤„ç†æ•°æ®æ›´æ–¹ä¾¿</span>

        <span class="hljs-comment"># æ¯”å¦‚æˆ‘ä»¬åœ¨å¾ªç¯ä¸­å¤„ç†æ•°æ®é€»è¾‘æ—¶ï¼š</span>
        tracker += <span class="hljs-number">5</span>  <span class="hljs-comment"># tracker çš„å†…éƒ¨å€¼ç°åœ¨å˜æˆäº† 7</span>
        self.wait()

        <span class="hljs-comment"># ç”šè‡³å¯ä»¥è¿›è¡Œæ›´å¤æ‚çš„è¿ç®—</span>
        tracker *= <span class="hljs-number">2</span>  <span class="hljs-comment"># å˜æˆ 14</span>
        self.wait()

        <span class="hljs-comment"># æ³¨æ„ï¼šå¦‚æœä½ è¦ç”¨ animate åŠ¨ç”»è¿‡æ¸¡ï¼Œè¿˜æ˜¯æ¨èç”¨ .animate.set_value()</span>
        <span class="hljs-comment"># ä½†è¿™ä¸ªç‰¹æ€§è®©ç¼–å†™å¤æ‚çš„ updater é€»è¾‘æˆ–è€…é¢„è®¡ç®—å˜å¾—éå¸¸çˆ½ã€‚</span>
</code></pre>
<p>ä»£ç åˆå¯ä»¥å°‘å†™å‡ è¡Œ <code>get_value()</code> äº†ï¼Œæ¸…çˆ½åº¦ +1ã€‚</p>
<h2 data-id="heading-4">3. ğŸŒŸ äº®ç‚¹ä¸‰ï¼šæ–°å¢ <code>TangentialArc</code> (åˆ‡çº¿å¼§)</h2>
<p>è¿™æ˜¯å‡ ä½•ç»˜å›¾çš„æ–°ç©å…·ï¼ä»¥å‰å¦‚æœæƒ³ç”»ä¸€æ®µåœ†å¼§ï¼Œæ—¢è¦è¿æ¥ä¸¤ä¸ªç‚¹ï¼Œåˆè¦ä¿è¯åˆ‡çº¿æ–¹å‘å¹³æ»‘ï¼Œå¯èƒ½éœ€è¦è´¹ç‚¹è„‘ç­‹å»ç®—è§’åº¦ã€‚</p>
<p>æ–°çš„ <code>TangentialArc</code> æ—¨åœ¨ç®€åŒ–è¿™ç±»å‡ ä½•æ„é€ ã€‚</p>
<p>ç›®å‰å®˜æ–¹æ–‡æ¡£è¿˜åœ¨å®Œå–„ä¸­ï¼Œä½†å®ƒçš„å‡ºç°æ„å‘³ç€æˆ‘ä»¬å¯ä»¥æ›´å®¹æ˜“åœ°ç”»å‡ºæµç•…è¿æ¥ç›´çº¿æˆ–æ›²çº¿çš„åœ†å¼§äº†ã€‚</p>
<h4 data-id="heading-5">3.0.1. ğŸŒ° ä»£ç åœºæ™¯</h4>
<p>å¦‚æœä½ æœ‰ä¸€æ¡ç›´çº¿ï¼Œæƒ³åœ¨æœ«ç«¯æ¥ä¸€ä¸ªåœ†å¼§ï¼Œä¸”è¿æ¥å¤„è¦æ˜¯â€œä¸æ»‘â€çš„ï¼ˆåˆ‡çº¿è¿ç»­ï¼‰ã€‚</p>
<p>ä»¥å‰ä½ å¾—ç®—åˆ‡è§’ï¼Œç°åœ¨å¯ä»¥è¯•è¯•ä½¿ç”¨ <code>TangentialArc</code> ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TangentialArcSample</span>(<span class="hljs-title class_ inherited__">Scene</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self</span>):
        l1 = Line([<span class="hljs-number">0</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>], color=RED)
        l2 = Line([-<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>], [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>], color=BLUE)
        
        <span class="hljs-comment"># åˆ›å»ºåˆ‡åœ†å¼§å¯¹è±¡</span>
        <span class="hljs-comment"># å‚æ•°è¯´æ˜ï¼š</span>
        <span class="hljs-comment"># - l1: ç¬¬ä¸€æ¡åˆ‡çº¿</span>
        <span class="hljs-comment"># - l2: ç¬¬äºŒæ¡åˆ‡çº¿</span>
        <span class="hljs-comment"># - radius: åœ†å¼§çš„åŠå¾„ï¼ˆ0.2ï¼‰</span>
        <span class="hljs-comment"># - corner: åœ†å¼§æ‰€åœ¨çš„è§’è½æ–¹å‘</span>
        <span class="hljs-comment"># - color: åœ†å¼§çš„é¢œè‰²ï¼ˆç»¿è‰²ï¼‰</span>
        circulararc = TangentialArc(l1, l2, radius=<span class="hljs-number">0.2</span>, corner=(-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>), color=GREEN)
        self.play(Create(l1), Create(l2))
        self.play(Create(circulararc))

        self.wait()
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca2d253b6b73413a9ebda6378bf634ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZGF0YWJvb2s=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254521&amp;x-signature=thDHMrFMRbGCYLS2IqqrB%2B83wXA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">4. ğŸ› ï¸ å…¶ä»–å€¼å¾—å…³æ³¨çš„å˜åŒ–</h2>
<p>é™¤äº†ä¸Šé¢ä¸‰ä¸ªæ–°ç‰¹æ€§ï¼Œè¿˜æœ‰ä¸€äº›æ”¹åŠ¨ä¹Ÿéå¸¸è´´å¿ƒï¼š</p>
<ol>
<li><strong>SurroundingRectangle æ›´çµæ´»äº†</strong>ï¼š<br/>
ä»¥å‰ <code>buff</code> å‚æ•°åªèƒ½æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå¯¼è‡´çŸ©å½¢æ¡†çš„å››å‘¨ç•™ç™½å¿…é¡»ä¸€æ ·ã€‚ç°åœ¨ä½ å¯ä»¥ä¼ å…¥ä¸€ä¸ªå…ƒç»„ <code>buff=(0.5, 0.1)</code>ï¼Œåˆ†åˆ«æ§åˆ¶ <strong>æ°´å¹³</strong> å’Œ <strong>å‚ç›´</strong> æ–¹å‘çš„é—´è·ã€‚ç»™é•¿å…¬å¼åŠ æ¡†æ—¶å†ä¹Ÿä¸ç”¨æ‹…å¿ƒå·¦å³å¤ªå®½æˆ–è€…ä¸Šä¸‹å¤ªæŒ¤äº†ï¼</li>
<li><strong>Code Mobject æ”¯æŒ OpenGL</strong>ï¼š<br/>
å¦‚æœä½ æ˜¯ç”¨ OpenGL æ¸²æŸ“æ¨¡å¼ï¼ˆæ¸²æŸ“é€Ÿåº¦è¶…å¿«çš„é‚£ç§ï¼‰çš„ç”¨æˆ·ï¼Œç°åœ¨ <code>Code</code> å¯¹è±¡ä¹Ÿèƒ½å®Œç¾æ˜¾ç¤ºäº†ã€‚</li>
<li><strong>ä¿®å¤äº† Tex ç¯å¢ƒæ ¼å¼åŒ–é—®é¢˜</strong>ï¼š<br/>
å†™ <code>LaTeX</code> å…¬å¼æ—¶å¦‚æœä¸å°å¿ƒæ¢è¡Œæˆ–è€…æ ¼å¼ä¹±äº†ï¼Œç°åœ¨ <code>Manim</code> èƒ½æ›´å¥½åœ°å¤„ç†å®ƒï¼ŒæŠ¥é”™æ›´å°‘ã€‚</li>
<li><strong>CLI é»˜è®¤åˆ†è¾¨ç‡è°ƒæ•´</strong>ï¼š<br/>
å‘½ä»¤è¡Œå·¥å…·çš„é»˜è®¤åˆ†è¾¨ç‡é€»è¾‘è¿›è¡Œäº†ä¸€äº›å¾®è°ƒï¼Œæ›´åŠ ç¬¦åˆ 1080p çš„æ ‡å‡†é¢„æœŸã€‚</li>
</ol>
<h2 data-id="heading-7">5. ğŸ“ æ€»ç»“ä¸å‡çº§</h2>
<p>è¿™æ¬¡<code> v0.19.1</code> è™½ç„¶ç‰ˆæœ¬å·è·¨åº¦ä¸å¤§ï¼Œä½†æ¯ä¸€ä¸ªæ”¹åŠ¨éƒ½åˆ‡ä¸­äº†å®é™…å¼€å‘ä¸­çš„ç—›ç‚¹ã€‚</p>
<p>ç‰¹åˆ«æ˜¯ <strong>éšæœºç§å­</strong> å’Œ <strong>ValueTracker ç®—æœ¯æ”¯æŒ</strong>ï¼Œå±äºé‚£ç§â€œç”¨äº†å°±å›ä¸å»â€çš„ä¼˜åŒ–ã€‚</p>
<p>å‡çº§<code>Manim</code>ä¹Ÿå¾ˆç®€å•ï¼Œæ‰“å¼€ç»ˆç«¯/å‘½ä»¤è¡Œï¼Œè¾“å…¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pip install --upgrade manim
</code></pre>
<p>å¿«å»è¯•è¯•æ–°åŠŸèƒ½å§ï¼å¦‚æœä½ ç”¨æ–°ç‰¹æ€§åšå‡ºäº†å¥½ç©çš„åŠ¨ç”»ï¼Œæ¬¢è¿åœ¨ç¤¾åŒºåˆ†äº«å“¦ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Serverless is all you need: åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€ä¸Šä¸€é”®éƒ¨ç½²å¤§æ¨¡å‹APIèšåˆç®¡ç†å¹³å°OneHub]]></title>    <link>https://juejin.cn/post/7578820376999378995</link>    <guid>https://juejin.cn/post/7578820376999378995</guid>    <pubDate>2025-12-02T04:30:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578820376999378995" data-draft-id="7578803751609286706" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Serverless is all you need: åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€ä¸Šä¸€é”®éƒ¨ç½²å¤§æ¨¡å‹APIèšåˆç®¡ç†å¹³å°OneHub"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-02T04:30:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äºšé©¬é€Šäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2850395271209496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Serverless is all you need: åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€ä¸Šä¸€é”®éƒ¨ç½²å¤§æ¨¡å‹APIèšåˆç®¡ç†å¹³å°OneHub
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2850395271209496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äºšé©¬é€Šäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:30:57.000Z" title="Tue Dec 02 2025 04:30:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><a href="https://link.juejin.cn?target=https%3A%2F%2Fs3.cn-north-1.amazonaws.com.cn%2Fawschinablog%2Fblogbanner-newnew.png" target="_blank" title="https://s3.cn-north-1.amazonaws.com.cn/awschinablog/blogbanner-newnew.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e2072210bc8a4206ac594d4cde1e39d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254657&amp;x-signature=SNYYegi8tT7KpysYQcZ%2FEibPDM4%3D" alt="" loading="lazy"/></a></p>
<p>åœ¨AI åº”ç”¨å¼€å‘è¿‡ç¨‹ä¸­, å¼€å‘è€…ä¼šä½¿ç”¨åˆ°å„å¤§æ¨¡å‹API, åªä½¿ç”¨ä¸€å®¶LLM provider å¾€å¾€éš¾ä»¥æ»¡è¶³éœ€æ±‚, è€Œåœ¨æ¥å…¥å¤šå®¶APIæ—¶, æˆ‘ä»¬å¾€å¾€ä¼šé‡åˆ°å¦‚ä¸‹é—®é¢˜:</p>
<ol>
<li>å„å®¶LLM provider çš„Â è®¤è¯å‡­æ®ä¸åŒ, éœ€è¦è¿›è¡Œé›†ä¸­ç®¡ç†.</li>
<li>ä¸åŒ LLM provider çš„APIÂ è°ƒç”¨æ–¹å¼æœ‰å·®åˆ«, ä¼šæå‡ä¸šåŠ¡ä»£ç çš„å¤æ‚åº¦.</li>
<li>å„ä¸ª LLM provider çš„è°ƒç”¨é‡å’Œæ¶ˆè´¹æƒ…å†µéœ€è¦è¿›è¡Œç»Ÿè®¡.</li>
<li>ä¸šåŠ¡å›¢é˜Ÿå¯¹ä¸åŒæ¨¡å‹API çš„è°ƒç”¨æƒé™éœ€è¦è¿›è¡Œç®¡ç†.</li>
</ol>
<p>é’ˆå¯¹æ­¤ç±»åœºæ™¯, Â è§£å†³æ–¹æ³•å¾€å¾€æ˜¯å¢åŠ ä¸€ä¸ª LLM Gateway è¿›è¡Œç»Ÿä¸€ç®¡ç†, æ¯”è¾ƒæµè¡Œçš„æœ‰ LiteLLMã€OpenRouter å’Œ Ollama ç­‰, æˆ‘ä»¬æµ‹è¯•ä¸‹æ¥, Â é’ˆå¯¹å¤§é‡ç»ˆç«¯å®¢æˆ·åš API åˆ†å‘çš„åœºæ™¯, å¼€æºé¡¹ç›®Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMartialBE%2Fone-hub" target="_blank" title="https://github.com/MartialBE/one-hub" ref="nofollow noopener noreferrer">One HubÂ </a>è¾ƒä¸ºå®ç”¨, æ­¤é¡¹ç›®ä»¥Â <a href="https://link.juejin.cn?target=http%3A%2F%2F%2520https%2F%2Fgithub.com%2Fsongquanpeng%2Fone-api" target="_blank" title="http://%20https//github.com/songquanpeng/one-api" ref="nofollow noopener noreferrer">one-api</a>Â ä¸ºåŸºç¡€ï¼ˆone-api å·²ä¸å†ç»´æŠ¤ï¼‰. æœ¬æ–‡ä¸»è¦æ¢è®¨å¦‚ä½•åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€ä¸Šå¿«é€Ÿéƒ¨ç½²æ­¤é¡¹ç›®ä¸”è½»æ¾å®ç°å¼¹æ€§å’Œé«˜å¯ç”¨.</p>
<p>æ–¹æ¡ˆç‰¹ç‚¹:</p>
<p>âœ… Amazon CloudFormationÂ ä¸€é”®éƒ¨ç½².<br/>
âœ… ç»å¤§éƒ¨åˆ†æœåŠ¡ä¸º Serverless æœåŠ¡, å‡ ä¹é›¶è¿ç»´è´Ÿæ‹….<br/>
âœ…Â é«˜å¼¹æ€§æ¶æ„, é—²æ—¶èŠ‚çº¦æˆæœ¬, é«˜å³°æ—¶æœŸå¯æ‰¿è½½é«˜å¹¶å‘.<br/>
âœ… å­˜ç®—åˆ†ç¦»,Â é«˜å¯ç”¨æ¶æ„.<br/>
âœ…Â å®‰å…¨å¯é , æºç«™èµ„æºå…¨éƒ¨ç§æœ‰åŒ–éƒ¨ç½², CloudFront è‡ªå¸¦æŠ—DDOS. æ‰€æœ‰ç½‘ç»œé˜²ç«å¢™è§„åˆ™å¯é€šè¿‡ WAF ç»Ÿä¸€ç®¡ç†.</p>
<p>æ³¨1:Â æœ¬æ–¹æ¡ˆçš„æ‰€æœ‰é¡¹ç›®åˆ†æå’Œ CloudFormation éƒ¨ç½²è„šæœ¬çš†ç”± Amazon AI å·¥å…· Kiro/Amazon Q Developer CLI å®ç°, ç¬”è€…è¾…åŠ©è°ƒèŠ‚.</p>
<p>æ³¨2:Â æ–‡ä¸­æ‰€æåˆ°çš„å¼€æºé¡¹ç›®ä½¿ç”¨Â Â Apache License Version 2.0, æœ¬æ–‡ä»…æ¢è®¨å…³äºæºç åˆ†æ, é¡¹ç›®éƒ¨ç½²å’ŒåŠŸèƒ½ä½¿ç”¨å±‚é¢çš„å†…å®¹, ä¸æ¶‰åŠå¯¹åŸé¡¹ç›®çš„ä»£ç æˆ–å•†æ ‡ä¿®æ”¹. åœ¨å®é™…ä½¿ç”¨ä¸­è¯·éµå®ˆé¡¹ç›®åè®®. è‹¥æ¶‰åŠåˆ°äºŒæ¬¡å¼€å‘è¯·æ ‡æ˜åŸé¡¹ç›®å‡ºå¤„, è‹¥æ¶‰åŠåˆ°å•†æ ‡ä¿®æ”¹å’Œå‘å¸ƒ, è¯·è”ç³»åŸä½œè€….</p>
<blockquote>
<p>ğŸ“¢é™æ—¶æ’æ’­ï¼šæ— éœ€ç®¡ç†åŸºç¡€è®¾æ–½ï¼Œåˆ©ç”¨äºšé©¬é€ŠæŠ€æœ¯ä¸ç”Ÿæ€ï¼Œå¿«é€Ÿé›†æˆä¸éƒ¨ç½²ç”Ÿæˆå¼AIæ¨¡å‹èƒ½åŠ›ã€‚</p>
<p>âœ¨ ç²¾å¿ƒè®¾è®¡ï¼Œæ—¨åœ¨å¼•å¯¼æ‚¨æ·±å…¥æ¢ç´¢Amazon Bedrockçš„æ¨¡å‹é€‰æ‹©ä¸è°ƒç”¨ã€æ¨¡å‹è‡ªåŠ¨åŒ–è¯„ä¼°ä»¥åŠå®‰å…¨å›´æ (Guardrail)ç­‰é‡è¦åŠŸèƒ½ã€‚</p>
<p>â©å¿«å¿«ç‚¹å‡»è¿›å…¥ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.amazoncloud.cn%2Fexperience%2Fcloudlab%3Fid%3D6695e4c5e1432f239fae485f%26visitfrom%3D3P_Juejinhead_0606%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejinhead_0606" target="_blank" title="https://dev.amazoncloud.cn/experience/cloudlab?id=6695e4c5e1432f239fae485f&amp;visitfrom=3P_Juejinhead_0606&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejinhead_0606" ref="nofollow noopener noreferrer">å¤šæ¨¡ä¸€ç«™é€š â€”â€” Amazon Bedrock ä¸Šçš„åŸºç¡€æ¨¡å‹åˆä½“éªŒ</a>ã€‹å®éªŒæ„å»ºæ— é™, æ¢ç´¢å¯ç¨‹ï¼</p>
</blockquote>
<h2 data-id="heading-0">æ–¹æ¡ˆæ¶æ„</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7fc99824141e4a549e8c7ddb57530b6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254657&amp;x-signature=tP04gSCrdT29jo6w2MH0H0nrWSA%3D" alt="d077e5a8e1d9f34e857d7a27f9ea4dc1.jpg" loading="lazy"/></p>
<p>å¯¹äº Amazon Globa Region å¯ä»¥ä½¿ç”¨æ­¤å¤„çš„Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flanceli93%2FOneHub-on-AWS%2Fblob%2Fmain%2Fcf-one-hub-infra.yaml" target="_blank" title="https://github.com/lanceli93/OneHub-on-AWS/blob/main/cf-one-hub-infra.yaml" ref="nofollow noopener noreferrer">yamlæ–‡ä»¶</a>Â åœ¨ CloudFormation ä¸­ä¸€é”®éƒ¨ç½²:<br/>
éƒ¨ç½²æ—¶åŠ¡å¿…å°†Â <strong>DatabasePassword, SessionSecret, UserTokenSecret</strong> è¿™ä¸‰ä¸ªå‚æ•°çš„é»˜è®¤å€¼æ›¿æ¢.</p>
<p>æ³¨æ„:Â æ–°äºšé©¬é€Šäº‘ç§‘æŠ€è´¦å·æˆ–æ²¡æœ‰åˆ›å»ºè¿‡ECS èµ„æºçš„è´¦å·åœ¨åˆ›å»ºå †æ ˆæ—¶å¯èƒ½ä¼šæŠ¥é”™(æç¤ºç¼ºå°‘ECSæœåŠ¡é“¾æ¥è§’è‰², æ­¤è§’è‰²ä¸ºé¦–æ¬¡ä½¿ç”¨ ECS æ—¶äºšé©¬é€Šäº‘ç§‘æŠ€è‡ªåŠ¨åˆ›å»º), åˆ é™¤å †æ ˆå†æ¬¡å°è¯•å³å¯.</p>
<h2 data-id="heading-1">é¡¹ç›®éƒ¨ç½²åˆ†æ</h2>
<p>å¯¹æ­¤é¡¹ç›®è¿›è¡Œå•æœºéƒ¨ç½²å¾ˆç®€å•ï¼Œåœ¨å•æœºä¸­ç›´æ¥è¿è¡Œ docker container å³å¯. å…³äºå¤šæœºéƒ¨ç½², åœ¨é¡¹ç›®éƒ¨ç½²æ–‡æ¡£ä¸­ä¹Ÿæœ‰è¯´æ˜, å…¶ä¸­ç¬¬ä¸‰æ¡æåˆ°äº†ä»æœåŠ¡å™¨ slave å’Œä¸»æœåŠ¡å™¨ master çš„æ¦‚å¿µ, ä½†å¹¶æ²¡æœ‰è¯¦ç»†è¯´æ˜è¿™ä¸¤ç§æœåŠ¡å™¨ç±»å‹çš„è¡Œä¸ºæœ‰ä»€ä¹ˆåŒºåˆ«, è€Œç†æ¸…è¿™ä¸€ç‚¹å¯¹æˆ‘ä»¬åç»­çš„éƒ¨ç½²ç­–ç•¥å’Œæµé‡åˆ†å‘ç­–ç•¥éå¸¸é‡è¦.</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F14%2Fserverless-is-all-you-need-one-click-deploy-onehub-2.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/14/serverless-is-all-you-need-one-click-deploy-onehub-2.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87ec3817d1404d3a8403f39a07bace30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254657&amp;x-signature=Tr8qg3z5xPx%2BebFesM%2F8f74GeNM%3D" alt="" loading="lazy"/></a></p>
<p><strong>ä½¿ç”¨ Kiro/Amazon Q Developer åˆ†ææºç ä»¥æ˜ç¡®éƒ¨ç½²ç­–ç•¥</strong></p>
<p>Kiro å’Œ Amazon Q Developer æ˜¯äºšé©¬é€Šäº‘ç§‘æŠ€å‘å¸ƒçš„ AI IDE å’Œ AI Agent å·¥å…·, å¯ä»¥è‡ªåŠ¨è¯»å–é¡¹ç›®ä»£ç æ–‡ä»¶å’Œæœç´¢æ•´ä¸ªä»£ç ä»“åº“ä»è€Œå®ç°å¯¹é¡¹ç›®æºç çš„ç²¾å‡†åˆ†æ. ç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½é€‰æ‹©ä»»æ„ä¸€æ¬¾å·¥å…·å¿«é€Ÿå®Œæˆé¡¹ç›®åˆ†æä»»åŠ¡. ç¬”è€…è¿™é‡Œåœ¨Visual Studio Code ä¸­æ‰“å¼€äº† One Hub é¡¹ç›®å¹¶å¯ç”¨äº†å‘½ä»¤è¡Œå·¥å…· Amazon Q Developer CLI å¯¹æ•´ä¸ªé¡¹ç›®è¿›è¡Œäº†åˆ†æ, æœ€ç»ˆç»“è®ºå¦‚ä¸‹:</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F14%2Fserverless-is-all-you-need-one-click-deploy-onehub-3.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/14/serverless-is-all-you-need-one-click-deploy-onehub-3.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b44ec49b7bb48b4b77f1be2ac35434b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254657&amp;x-signature=M1i0xeIVPTZcNq%2Bs4BJP6HSMIBQ%3D" alt="" loading="lazy"/></a></p>
<p>è¯¦ç»†åˆ†æè¯·è§:Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flanceli93%2FOneHub-on-AWS%2Fblob%2Fmain%2FNODE_TYPE_%25E5%2588%2586%25E6%259E%2590%25E6%258A%25A5%25E5%2591%258A.md" target="_blank" title="https://github.com/lanceli93/OneHub-on-AWS/blob/main/NODE_TYPE_%E5%88%86%E6%9E%90%E6%8A%A5%E5%91%8A.md" ref="nofollow noopener noreferrer">NODE_TYPE_åˆ†ææŠ¥å‘Š</a></p>
<p>ç”±æ­¤æŠ¥å‘Šæˆ‘ä»¬å¯ä»¥æ€»ç»“å‡ºéƒ¨ç½²éœ€è¦æ³¨æ„çš„äº‹é¡¹:</p>
<ol>
<li>æ•°æ®åº“è¿æ¥ï¼šæ‰€æœ‰èŠ‚ç‚¹éœ€è¦è¿æ¥åŒä¸€ä¸ªæ•°æ®åº“</li>
<li>é…ç½®åŒæ­¥ï¼šSlave èŠ‚ç‚¹ä¼šå®šæœŸä»æ•°æ®åº“åŒæ­¥é…ç½®</li>
<li>å”¯ä¸€æ€§ï¼šå»ºè®®åªéƒ¨ç½²ä¸€ä¸ª Master èŠ‚ç‚¹</li>
<li>ç½‘ç»œè®¿é—®ï¼šç¡®ä¿ Slave èŠ‚ç‚¹èƒ½è®¿é—®æ•°æ®åº“</li>
</ol>
<h3 data-id="heading-2">ECS é›†ç¾¤éƒ¨ç½²è§„åˆ’</h3>
<p>æˆ‘ä»¬è®¡åˆ’åˆ›å»ºä¸€ä¸ª ECS Cluster å¹¶éƒ¨ç½²ä¸¤ä¸ª Service.<br/>
åˆ›å»ºä¸¤ä¸ª Task Definition ä»¥ä¸º Master èŠ‚ç‚¹å’Œ Slave èŠ‚ç‚¹é…ç½®ä¸åŒçš„ç¯å¢ƒå˜é‡.</p>
<p><strong>Master Service</strong></p>
<ol>
<li>ä½¿ç”¨ master-task-definition å¯åŠ¨ ECS Task.</li>
<li>åªå¯åŠ¨ä¸€ä¸ª ECS task, Â è¿è¡Œ Master èŠ‚ç‚¹.</li>
</ol>
<p><strong>Slave Service</strong></p>
<ol>
<li>ä½¿ç”¨ slave-task-definition å¯åŠ¨ ECS task.</li>
<li>å¯åŠ¨å¤šä¸ª ECS task, è¿è¡Œ Slave èŠ‚ç‚¹.</li>
<li>åœ¨ Task Definition ä¸­è®¾ç½®ç¯å¢ƒå˜é‡</li>
<li>å¼€å¯è‡ªåŠ¨æ‰©å±•, ä»¥ CPU æˆ–å†…å­˜å ç”¨ç‡ä¸ºæ‰©å±•æŒ‡æ ‡.</li>
</ol>
<p>ECS Service å¼€å¯ Availability Zone rebalancingï¼Œä»¥ç¡®ä¿ LLM API æœåŠ¡å§‹ç»ˆé«˜å¯ç”¨.</p>
<h3 data-id="heading-3">æ•°æ®åº“</h3>
<p>ç”±ä¸Šæ–‡å¯ä»¥æ˜ç¡®ï¼Œæ‰€æœ‰èŠ‚ç‚¹éœ€è¦è¿æ¥åˆ°åŒä¸€ä¸ªæ•°æ®åº“, è€Œåªæœ‰Master èŠ‚ç‚¹ä¼šè¿›è¡Œå†™å…¥æ“ä½œ.<br/>
æœ¬æ–‡éƒ¨ç½² Aurora Serverless V2 for MySQL, å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹:</p>
<ol>
<li>å¯ä»¥æ ¹æ®ä½¿ç”¨æƒ…å†µè‡ªåŠ¨æ‰©ç¼©å®¹ï¼Œä» 0.5 ACUï¼ˆ1 GiB å†…å­˜ï¼‰åˆ° 256 ACUï¼ˆ512 GiB å†…å­˜ï¼‰, æœ€å°æ‰©å±•å•ä½ä¸º 0.5 ACU.</li>
<li>æ•°æ®å­˜å‚¨éƒ¨åˆ†æŒ‰å®é™…ä½¿ç”¨é‡æ”¶è´¹ï¼Œæ— éœ€é¢„ç½®å­˜å‚¨å®¹é‡.</li>
<li>åŸç”Ÿé«˜å¯ç”¨, è‡ªåŠ¨æ•…éšœè½¬ç§».</li>
</ol>
<h3 data-id="heading-4">ALB æµé‡åˆ†å‘ç­–ç•¥</h3>
<ul>
<li>Master èŠ‚ç‚¹ï¼šè´Ÿè´£æ•°æ®ç®¡ç†ã€å®šæ—¶ä»»åŠ¡å’Œç³»ç»Ÿç»´æŠ¤</li>
<li>Slave èŠ‚ç‚¹ï¼šè´Ÿè´£è¯·æ±‚å¤„ç†å’ŒæœåŠ¡æ‰©å±•</li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ALB ç›‘å¬å™¨è§„åˆ™å°† LLM API è¯·æ±‚å…¨éƒ¨è½¬å‘åˆ° Slave Target Group, å°†æ‰€æœ‰å…¶ä»–ä¸å‰ç«¯é¡µé¢æ“ä½œï¼ˆä¸»è¦æ˜¯ç®¡ç†åŠ¨ä½œï¼‰ç›¸å…³çš„è¯·æ±‚è½¬å‘åˆ° Master Target Group. ç¤ºä¾‹å¦‚ä¸‹:</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F14%2Fserverless-is-all-you-need-one-click-deploy-onehub-4.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/14/serverless-is-all-you-need-one-click-deploy-onehub-4.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce2a153170f14deab73488b588b4bc86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254657&amp;x-signature=1Xd6qsRTCnnORItfaP6N6iPs%2BsA%3D" alt="" loading="lazy"/></a></p>
<p>æ³¨æ„è¿™é‡Œè®¾å®šçš„è§„åˆ™:</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">Path</span> = *v1* 
</code></pre>
<p>ä¸»è¦æ˜¯ä¸ºäº†åŒ¹é…å¤šç§ LLM API è°ƒç”¨æ ¼å¼, å¦‚</p>
<pre><code class="hljs language-bash" lang="bash">/v1/chat/completions
/claude/v1/messages
</code></pre>
<p>ä½†å®é™…ä¸Šè¿™ä¸ªè§„åˆ™å¹¶ä¸èƒ½è¦†ç›–å¸‚é¢ä¸Šæ‰€æœ‰çš„è°ƒç”¨æ ¼å¼ï¼Œä¸”æ˜“ä¸å…¶ä»– API path å†²çª, éœ€è¦é’ˆå¯¹ä½¿ç”¨åœºæ™¯è¿›è¡Œä¿®æ”¹.</p>
<h3 data-id="heading-5">ç½‘ç»œè§„åˆ’</h3>
<p>è¯¥é¡¹ç›®å¤§å¤šæ•°åœºæ™¯æ˜¯åœ¨äº’è”ç½‘ä¸Šæä¾›æœåŠ¡, ä¸ºç¡®ä¿æœåŠ¡æ•°æ®å®‰å…¨ä¸”é•¿æœŸç¨³å®šè¿è¡Œ, åœ¨ç½‘ç»œè§„åˆ’æ–¹é¢æˆ‘ä»¬æœ‰ä»¥ä¸‹å‡ ä¸ªè¦ç‚¹:</p>
<ol>
<li>ECS task å…¨éƒ¨è¿è¡Œäº VPC ç§æœ‰å­ç½‘, é€šè¿‡å…¬æœ‰å­ç½‘çš„ NAT Gateway å®ç°å…¬ç½‘è®¿é—®.</li>
<li>æ•°æ®åº“ Aurora è¿è¡Œäº VPC ç§æœ‰å­ç½‘, é…ç½®å®‰å…¨ç»„è§„åˆ™å…è®¸ ECS task è®¿é—®.</li>
<li>ALB éƒ¨ç½²åœ¨ VPC ç§æœ‰å­ç½‘, ç¦æ­¢å…¬ç½‘è®¿é—®.</li>
<li>CloudFront é‡‡ç”¨ VPC origin è¿æ¥æº ALB.</li>
</ol>
<p>é€šè¿‡æ­¤é…ç½®, æˆ‘ä»¬åœ¨æ²¡æœ‰é¢å¤–é…ç½® WAF çš„æƒ…å†µä¸‹å³å¯å®ç°:</p>
<ul>
<li>æºç«™æ— å…¬æœ‰ IP, æ‰€æœ‰å…¬ç½‘å…¥ç«™æµé‡åªèƒ½é€šè¿‡ CloudFront, æå¤§é™ä½äº†æ”»å‡»é¢.</li>
<li>CloudFront è‡ªå¸¦çš„ Standard Shield å¯ä»¥æŠµå¾¡å¤§éƒ¨åˆ† DDoS æ”»å‡».</li>
<li>é€šè¿‡ CloudFront å…³è” WAF è§„åˆ™, å¯ä»¥åœ¨å•ä¸€å…¥å£å®Œæˆé˜²æŠ¤é…ç½®å’Œæµé‡åˆ†æ, è¿ç»´ç®€å•.</li>
<li>é€šè¿‡ CloudFront å…¨çƒ PoP ç‚¹å¿«é€Ÿæ¥å…¥äºšé©¬é€Šäº‘ç§‘æŠ€éª¨å¹²ç½‘, é™ä½ API è®¿é—®å»¶æ—¶.</li>
</ul>
<h2 data-id="heading-6">åŠŸèƒ½æµ‹è¯•</h2>
<p>éƒ¨ç½²å®Œæ¯•åï¼Œåœ¨ CloudFormation Stack Output ä¸­æ‰¾åˆ° CloudFront URL, æ ¹æ®æ­¤Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fone-hub-doc.vercel.app%2Fuse%2F" target="_blank" title="https://one-hub-doc.vercel.app/use/" ref="nofollow noopener noreferrer">ä½¿ç”¨è¯´æ˜</a>Â ç™»é™†ç³»ç»Ÿè¿›è¡Œ API æµ‹è¯•.<br/>
æ­¤å¤„å¯é…ç½® Amazon Bedrock å¯ç”¨æ¨¡å‹ä»¥åŠè‡ªå®šä¹‰æ˜ å°„å…³ç³»:</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F14%2Fserverless-is-all-you-need-one-click-deploy-onehub-5.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/14/serverless-is-all-you-need-one-click-deploy-onehub-5.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/721e6f1aba53437bb8b0a58ff0eca8bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254657&amp;x-signature=L0XEK9uH1uphU5aAm%2Fk%2BcV%2FPTA4%3D" alt="" loading="lazy"/></a></p>
<p>Amazon Bedrock ç›¸å…³æ¨¡å‹çš„æ˜ å°„å…³ç³»å¯ä»¥åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMartialBE%2Fone-hub%2Fblob%2F53dae62f46211a1bb9caa97baee2eb2fdcdf299e%2Fproviders%2Fbedrock%2Fcategory%2Fbase.go%23L38" target="_blank" title="https://github.com/MartialBE/one-hub/blob/53dae62f46211a1bb9caa97baee2eb2fdcdf299e/providers/bedrock/category/base.go#L38" ref="nofollow noopener noreferrer">æ­¤å¤„</a>æ‰¾åˆ°.<br/>
é…ç½®å®Œæˆå, ä½¿ç”¨ Insomnia è¿›è¡Œ API æµ‹è¯•:</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fd2908q01vomqb2.cloudfront.net%2F472b07b9fcf2c2451e8781e944bf5f77cd8457c8%2F2025%2F10%2F14%2Fserverless-is-all-you-need-one-click-deploy-onehub-6.png" target="_blank" title="https://d2908q01vomqb2.cloudfront.net/472b07b9fcf2c2451e8781e944bf5f77cd8457c8/2025/10/14/serverless-is-all-you-need-one-click-deploy-onehub-6.png" ref="nofollow noopener noreferrer"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fdf8a7013898403f8bbdff04a26a5223~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254657&amp;x-signature=VnMLJm0krTGtJLs6HF97yx3dnMc%3D" alt="" loading="lazy"/></a></p>
<h2 data-id="heading-7">å¯è§‚æµ‹æ€§</h2>
<ul>
<li>Aurora é›†ç¾¤é»˜è®¤å¼€å¯Â RDS Data API, å¯é€šè¿‡äºšé©¬é€Šäº‘ç§‘æŠ€æ§åˆ¶å° Query Editor ç›´æ¥è¿æ¥æ•°æ®åº“å¹¶è¿è¡Œ MySQL, æ— éœ€é¢å¤–é…ç½®å ¡å’æœº.</li>
<li>æ‰€æœ‰ Amazon ECS Task äº§ç”Ÿçš„æ—¥å¿—é»˜è®¤å‘é€åˆ° CloudWatch, å¯å®æ—¶æŸ¥çœ‹å’Œåˆ†æ.</li>
<li>å¯å¼€å¯Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2FAmazonECS%2Flatest%2Fdeveloperguide%2Fecs-exec.html%23ecs-exec-enabling-and-using" target="_blank" title="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-exec.html#ecs-exec-enabling-and-using" ref="nofollow noopener noreferrer">ECS Exec</a>Â ä»¥ç›´æ¥ç™»é™†æ­£åœ¨è¿è¡Œçš„ Container è¿›è¡Œé—®é¢˜æ’æŸ¥.</li>
</ul>
<h2 data-id="heading-8">æˆæœ¬åˆ†æ</h2>
<p>æœ¬æ–¹æ¡ˆç»å¤§éƒ¨åˆ†æœåŠ¡ä¸º Serverless æœåŠ¡, æˆæœ¬ä¸åº”ç”¨å®é™…æ‰¿è½½æµé‡æ­£ç›¸å…³. ä»¥æœ¬æ–‡ä¸­æä¾›çš„ä¸€é”®éƒ¨ç½²æ–‡ä»¶é…ç½®ä¸ºä¾‹, è´¹ç”¨ä¸»è¦åŒ…å«å¦‚ä¸‹éƒ¨åˆ†:</p>
<ol>
<li>Amazon ECS Fargate éƒ¨ç½²è´¹ç”¨ï¼ˆå…±ä¸‰ä¸ªï¼Œå•ä¸ªé…ç½®ä¸º 256 CPU + 512 Memory, è¡¨ç¤º 1/4 vCPU å’Œ 512 MiB å†…å­˜ï¼‰</li>
<li>Amazon Aurora Serverless V2 éƒ¨ç½²å’Œå­˜å‚¨è´¹ç”¨, é»˜è®¤ 0.5 ACU</li>
<li>ALB éƒ¨ç½²è´¹ç”¨.</li>
<li>NAT Gateway éƒ¨ç½²è´¹ç”¨.</li>
</ol>
<p>åœ¨ä¸ªäººä½¿ç”¨åœºæ™¯ä¸‹ï¼Œç»æµ‹è¯•æ¯æ—¥æˆæœ¬åœ¨ 3.7-5.4 ç¾å…ƒä¹‹é—´ï¼ˆä¸å«å¤§æ¨¡å‹ API è°ƒç”¨è´¹ç”¨ï¼‰, ä¸åŒ Region éƒ¨ç½²ä¼šæœ‰å·®åˆ«. å¯ä»¥çœ‹å‡º Serverless æ¶æ„ç”¨äºéƒ¨ç½²æµé‡ä¸ç¡®å®šæˆ–ä¸šåŠ¡èµ·æ­¥é˜¶æ®µçš„åº”ç”¨å…·æœ‰å·¨å¤§æˆæœ¬ä¼˜åŠ¿.</p>
<h2 data-id="heading-9">æ€»ç»“ä¸å±•æœ›</h2>
<p>åœ¨å°†æ­¤æ–¹æ¡ˆéƒ¨ç½²è½åœ°åˆ°äº§å“æ—¶ï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹æ”¹è¿›æ–¹å‘ï¼š</p>
<ol>
<li>CloudFront é»˜è®¤ä¸æºç«™çš„è¿æ¥ Timeout æœ€é«˜ä¸º60s, å¯ä»¥é€šè¿‡æäº¤å·¥å•æå‡åˆ° 180s, ä»¥é€‚åº”è¶…é•¿ prompt æˆ–è¾“å‡ºçš„ API è°ƒç”¨åœºæ™¯.</li>
<li>é…ç½®å…³è”åˆ° CloudFront çš„ WAF è§„åˆ™, å¯ç”¨å®ç”¨æ‰˜ç®¡è§„åˆ™æ¯”å¦‚é™æµè§„åˆ™ä»¥åŠÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fblogs%2Fnetworking-and-content-delivery%2Fintroducing-the-aws-waf-application-layer-ddos-protection%2F" target="_blank" title="https://aws.amazon.com/blogs/networking-and-content-delivery/introducing-the-aws-waf-application-layer-ddos-protection/" ref="nofollow noopener noreferrer">Layer 7 DDoS é˜²æŠ¤è§„åˆ™</a>.</li>
<li>ECS Cluster æ”¯æŒ EC2 + Fargate æ··åˆéƒ¨ç½², è€ƒè™‘åˆ° Master èŠ‚ç‚¹åªéœ€éƒ¨ç½²ä¸€å°è€Œä¸åšæ‰©ç¼©å®¹, è‹¥éœ€è¦é•¿æœŸæä¾›æœåŠ¡, å¯ä»¥å°† Master Task Definition æ”¹ä¸º EC2 å®ä¾‹éƒ¨ç½²å¹¶è´­ä¹°é¢„ä»˜å®ä¾‹.</li>
<li>è‹¥éœ€è¦æå‡æ¥å£å“åº”é€Ÿåº¦, å¯ä»¥è€ƒè™‘éƒ¨ç½²Â Amazon ElastiCache Serverless for Redis. åŒæ ·ä¸ä¼šå¢åŠ è¿ç»´å‹åŠ›.</li>
</ol>
<p>é€šè¿‡å……åˆ†åˆ©ç”¨äºšé©¬é€Šäº‘ç§‘æŠ€çš„ Serverless æœåŠ¡ï¼Œæˆ‘ä»¬å°†åŸºç¡€è®¾æ–½è¿ç»´çš„é‡æ‹…è½¬ç§»ç»™äº†äº‘æœåŠ¡å•†,è®©å¼€å‘å›¢é˜Ÿèƒ½å¤Ÿå°†æ›´å¤šç²¾åŠ›é›†ä¸­åœ¨ä¸šåŠ¡åˆ›æ–°å’Œäº§å“è¿­ä»£ä¸Š. ä¸æ­¤åŒæ—¶ï¼ŒAI å·¥å…·çš„åº”ç”¨ä¹Ÿæå¤§æå‡äº†æˆ‘ä»¬çš„å·¥ä½œæ•ˆç‡ï¼Œç¼©çŸ­äº†äº§å“ä»å¼€å‘åˆ°éƒ¨ç½²ä¸Šçº¿çš„å‘¨æœŸã€‚</p>
<p>äººå·¥æ™ºèƒ½å’Œäº‘è®¡ç®—çš„ç»“åˆæ˜¯å½“ä¸‹ç§‘æŠ€å‘å±•çš„å¤§è¶‹åŠ¿,æˆ‘ä»¬æœŸæœ›é€šè¿‡è¿™äº›å‰æ²¿æŠ€æœ¯,ä¸æ–­ä¼˜åŒ–äº§å“äº¤ä»˜æ¨¡å¼,ä¸ºå®¢æˆ·æä¾›æ›´åŠ å“è¶Šçš„è§£å†³æ–¹æ¡ˆå’ŒæœåŠ¡ä½“éªŒã€‚</p>
<p><strong>å‚è€ƒé“¾æ¥</strong></p>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMartialBE%2Fone-hub" target="_blank" title="https://github.com/MartialBE/one-hub" ref="nofollow noopener noreferrer">github.com/MartialBE/oâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2FAmazonECS%2Flatest%2Fdeveloperguide%2Fcreate-cluster-console-v2.html" target="_blank" title="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/create-cluster-console-v2.html" ref="nofollow noopener noreferrer">docs.aws.amazon.com/AmazonECS/lâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2FAmazonCloudFront%2Flatest%2FDeveloperGuide%2Fprivate-content-vpc-origins.html" target="_blank" title="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-vpc-origins.html" ref="nofollow noopener noreferrer">docs.aws.amazon.com/AmazonCloudâ€¦</a></li>
</ol>
<p>*<em>å‰è¿°ç‰¹å®šäºšé©¬é€Šäº‘ç§‘æŠ€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ç›¸å…³çš„æœåŠ¡ç›®å‰åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€æµ·å¤–åŒºåŸŸå¯ç”¨ã€‚äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºåŸŸç›¸å…³äº‘æœåŠ¡ç”±è¥¿äº‘æ•°æ®å’Œå…‰ç¯æ–°ç½‘è¿è¥ï¼Œå…·ä½“ä¿¡æ¯ä»¥ä¸­å›½åŒºåŸŸå®˜ç½‘ä¸ºå‡†ã€‚</em></p>
<p><strong>æœ¬ç¯‡ä½œè€…</strong>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64c557c582124a7888c19832f60a14d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765254657&amp;x-signature=mZxCxQzNFwR6o%2BXBiQIAopyxRQw%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>æœ¬æœŸæœ€æ–°å®éªŒã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.amazoncloud.cn%2Fexperience%2Fcloudlab%3Fid%3D6695e4c5e1432f239fae485f%26visitfrom%3D3P_Juejintail_0415%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_0415" target="_blank" title="https://dev.amazoncloud.cn/experience/cloudlab?id=6695e4c5e1432f239fae485f&amp;visitfrom=3P_Juejintail_0415&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_0415" ref="nofollow noopener noreferrer">å¤šæ¨¡ä¸€ç«™é€š â€”â€” Amazon Bedrock ä¸Šçš„åŸºç¡€æ¨¡å‹åˆä½“éªŒ</a>ã€‹</p>
<p>âœ¨ ç²¾å¿ƒè®¾è®¡ï¼Œæ—¨åœ¨å¼•å¯¼æ‚¨æ·±å…¥æ¢ç´¢Amazon Bedrockçš„æ¨¡å‹é€‰æ‹©ä¸è°ƒç”¨ã€æ¨¡å‹è‡ªåŠ¨åŒ–è¯„ä¼°ä»¥åŠå®‰å…¨å›´æ (Guardrail)ç­‰é‡è¦åŠŸèƒ½ã€‚æ— éœ€ç®¡ç†åŸºç¡€è®¾æ–½ï¼Œåˆ©ç”¨äºšé©¬é€ŠæŠ€æœ¯ä¸ç”Ÿæ€ï¼Œå¿«é€Ÿé›†æˆä¸éƒ¨ç½²ç”Ÿæˆå¼AIæ¨¡å‹èƒ½åŠ›ã€‚</p>
<p>â©ï¸[<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.amazoncloud.cn%2Fexperience%2Fcloudlab%3Fid%3D6695e4c5e1432f239fae485f%26visitfrom%3D3P_Juejintail_0415%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_0415" target="_blank" title="https://dev.amazoncloud.cn/experience/cloudlab?id=6695e4c5e1432f239fae485f&amp;visitfrom=3P_Juejintail_0415&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_0415" ref="nofollow noopener noreferrer">ç‚¹å‡»è¿›å…¥å®éªŒ</a>] å³åˆ»å¼€å¯  AI å¼€å‘ä¹‹æ—…</p>
<p>æ„å»ºæ— é™, æ¢ç´¢å¯ç¨‹ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 12 é¢˜ï¼šVueï¼ˆå°¤å…¶ Vue3ï¼‰ä¸­çˆ¶å­ç»„ä»¶é€šä¿¡æ–¹å¼æœ‰å“ªäº›ï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7578787344612786212</link>    <guid>https://juejin.cn/post/7578787344612786212</guid>    <pubDate>2025-12-02T04:32:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578787344612786212" data-draft-id="7578714735307948058" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 12 é¢˜ï¼šVueï¼ˆå°¤å…¶ Vue3ï¼‰ä¸­çˆ¶å­ç»„ä»¶é€šä¿¡æ–¹å¼æœ‰å“ªäº›ï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:32:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 12 é¢˜ï¼šVueï¼ˆå°¤å…¶ Vue3ï¼‰ä¸­çˆ¶å­ç»„ä»¶é€šä¿¡æ–¹å¼æœ‰å“ªäº›ï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:32:22.000Z" title="Tue Dec 02 2025 04:32:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ç¬¬ 12 é¢˜ï¼šVueï¼ˆå°¤å…¶ Vue3ï¼‰ä¸­çˆ¶å­ç»„ä»¶é€šä¿¡æ–¹å¼æœ‰å“ªäº›ï¼ŸåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h2>
<p>è¿™æ˜¯ Vue é¢è¯•å¿…è€ƒé¢˜ï¼Œè‡³å°‘ 90% é¢è¯•å®˜ä¼šé—®ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ¯ ä¸€ã€æ ‡å‡†ç­”æ¡ˆï¼ˆä½ åœ¨é¢è¯•é‡Œåº”è¯¥å…ˆè¯´çš„ï¼‰</h2>
<p>Vue3 ä¸­çˆ¶å­ç»„ä»¶é€šä¿¡æœ‰ <strong>ä¸ƒ</strong> å¤§å¸¸ç”¨æ–¹å¼ï¼š</p>
<h4 data-id="heading-2"><strong>çˆ¶ â†’ å­</strong></h4>
<ol>
<li><strong>Propsï¼ˆæœ€å¸¸è§ï¼‰</strong></li>
<li><strong>Exposeï¼ˆçˆ¶é€šè¿‡ ref è°ƒç”¨å­æ–¹æ³•ï¼‰</strong></li>
</ol>
<h4 data-id="heading-3"><strong>å­ â†’ çˆ¶</strong></h4>
<ol start="3">
<li><strong>Emit äº‹ä»¶</strong></li>
</ol>
<h4 data-id="heading-4"><strong>çˆ¶ â†” å­</strong></h4>
<ol start="4">
<li><strong>v-modelï¼ˆè¯­æ³•ç³–ï¼Œæœ¬è´¨æ˜¯ props + emitï¼‰</strong></li>
</ol>
<h4 data-id="heading-5"><strong>è·¨å±‚çº§</strong></h4>
<ol start="5">
<li><strong>provide / inject</strong></li>
</ol>
<h4 data-id="heading-6"><strong>æ›´å¤§èŒƒå›´</strong></h4>
<ol start="6">
<li><strong>Pinia / Vuexï¼ˆçŠ¶æ€ç®¡ç†ï¼‰</strong></li>
</ol>
<h4 data-id="heading-7"><strong>æ›´åº•å±‚/ç‰¹æ®Šæƒ…å†µ</strong></h4>
<ol start="7">
<li><strong>EventBusï¼ˆVue3 ä¸æ¨èï¼Œä½†é¢è¯•ä¼šé—®ï¼‰</strong></li>
</ol>
<hr/>
<h2 data-id="heading-8">ğŸ¯ äºŒã€çˆ¶ â†’ å­é€šä¿¡æ–¹å¼</h2>
<hr/>
<h3 data-id="heading-9"><strong>1ï¸âƒ£ Propsï¼ˆæœ€å¸¸ç”¨ï¼‰</strong></h3>
<p>çˆ¶ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;Child :<span class="hljs-attr">msg</span>=<span class="hljs-string">"text"</span> /&gt;
</code></pre>
<p>å­ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">defineProps</span>({
  msg: String
})
</code></pre>
<h4 data-id="heading-10">Props ç‰¹æ€§ï¼š</h4>
<ul>
<li>å•å‘æ•°æ®æµï¼ˆçˆ¶ â†’ å­ï¼‰</li>
<li>å­ä¸å…è®¸ä¿®æ”¹ propsï¼ˆä¼šç›´æ¥æŠ¥é”™ï¼‰</li>
<li>é€‚åˆä¼ é€’é…ç½®ç±»ã€é™æ€æ•°æ®</li>
</ul>
<hr/>
<h3 data-id="heading-11"><strong>2ï¸âƒ£ defineExposeï¼ˆçˆ¶ç»„ä»¶é€šè¿‡ ref è°ƒç”¨å­ç»„ä»¶æ–¹æ³•ï¼‰</strong></h3>
<p>å­ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">const submit = () =&gt; { ... }
<span class="hljs-built_in">defineExpose</span>({ submit })
</code></pre>
<p>çˆ¶ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;Child <span class="hljs-attr">ref</span>=<span class="hljs-string">"childRef"</span> /&gt;
</code></pre>
<pre><code class="hljs language-scss" lang="scss">childRef<span class="hljs-selector-class">.value</span><span class="hljs-selector-class">.submit</span>()
</code></pre>
<p><strong>ä½¿ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>å­ç»„ä»¶å¸Œæœ›æš´éœ²ä¸€äº›å†…éƒ¨æ–¹æ³•ç»™çˆ¶ç»„ä»¶</li>
<li>æäº¤è¡¨å•ã€é‡ç½®ã€æ ¡éªŒç­‰</li>
</ul>
<hr/>
<h2 data-id="heading-12">ğŸ¯ ä¸‰ã€å­ â†’ çˆ¶é€šä¿¡æ–¹å¼</h2>
<hr/>
<h3 data-id="heading-13"><strong>3ï¸âƒ£ Emit äº‹ä»¶</strong></h3>
<p>å­ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">const emit = <span class="hljs-built_in">defineEmits</span>(['update'])
<span class="hljs-built_in">emit</span>('update', newValue)
</code></pre>
<p>çˆ¶ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;Child @<span class="hljs-attr">update</span>=<span class="hljs-string">"handleUpdate"</span> /&gt;
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å•å‘æ•°æ®æµï¼ˆå­ â†’ çˆ¶ï¼‰</li>
<li>ç»„ä»¶è§£è€¦ï¼Œå®˜æ–¹æ¨èæ–¹å¼</li>
</ul>
<hr/>
<h2 data-id="heading-14">ğŸ¯ å››ã€çˆ¶ â†” å­ åŒå‘é€šä¿¡</h2>
<hr/>
<h3 data-id="heading-15"><strong>4ï¸âƒ£ v-modelï¼ˆè¯­æ³•ç³–ï¼‰</strong></h3>
<h4 data-id="heading-16">çˆ¶ç»„ä»¶ï¼š</h4>
<pre><code class="hljs language-ini" lang="ini">&lt;Child <span class="hljs-attr">v-model</span>=<span class="hljs-string">"value"</span> /&gt;
</code></pre>
<h4 data-id="heading-17">å­ç»„ä»¶ï¼š</h4>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">defineProps</span>(['modelValue'])
const emit = <span class="hljs-built_in">defineEmits</span>(['update:modelValue'])

<span class="hljs-built_in">emit</span>('update:modelValue', <span class="hljs-number">123</span>)
</code></pre>
<p>æœ¬è´¨åªæ˜¯ props + emit çš„è¯­æ³•ç³–ã€‚</p>
<hr/>
<h2 data-id="heading-18">ğŸ¯ äº”ã€è·¨å±‚çº§é€šä¿¡</h2>
<h3 data-id="heading-19"><strong>5ï¸âƒ£ provide / inject</strong></h3>
<p>ç¥–å…ˆç»„ä»¶ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-built_in">provide</span>(<span class="hljs-string">'theme'</span>, <span class="hljs-string">'dark'</span>)
</code></pre>
<p>ä»»æ„å±‚å­ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">theme</span> = inject(<span class="hljs-string">'theme'</span>)
</code></pre>
<p><strong>ç‰¹ç‚¹ï¼š</strong></p>
<ul>
<li>å¤šå±‚çº§ï¼Œä¸éœ€è¦ä¸€å±‚ä¸€å±‚ä¼  props</li>
<li>å¸¸ç”¨äºé…ç½®ç±»ã€ä¸Šä¸‹æ–‡ç±»æ•°æ®ï¼ˆå¦‚è¡¨å•ç»„ä»¶åº“ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-20">ğŸ¯ å…­ã€å…¨å±€çŠ¶æ€é€šä¿¡</h2>
<h3 data-id="heading-21"><strong>6ï¸âƒ£ Piniaï¼ˆæˆ– Vuexï¼‰</strong></h3>
<p>é€‚åˆå…¨å±€æ•°æ®ï¼š</p>
<ul>
<li>ç”¨æˆ·ä¿¡æ¯</li>
<li>æƒé™çŠ¶æ€</li>
<li>å…¨å±€è®¾ç½®</li>
<li>ç¼“å­˜æ•°æ®</li>
</ul>
<p><strong>Pinia æ˜¯ Vue3 å®˜æ–¹ä¸»æ¨çŠ¶æ€åº“ã€‚</strong></p>
<hr/>
<h2 data-id="heading-22">ğŸ¯ ä¸ƒã€ç‰¹æ®Šæƒ…å†µ</h2>
<h3 data-id="heading-23"><strong>7ï¸âƒ£ EventBusï¼ˆVue3 ä¸æ¨èï¼Œä½†è¦çŸ¥é“ï¼‰</strong></h3>
<p>é€‚åˆç®€å•çš„äº‹ä»¶å¹¿æ’­åœºæ™¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> mitt <span class="hljs-keyword">from</span> <span class="hljs-string">'mitt'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> bus = <span class="hljs-title function_">mitt</span>()
</code></pre>
<p>ç»„ä»¶ Aï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">bus.<span class="hljs-built_in">emit</span>(<span class="hljs-string">'hello'</span>, <span class="hljs-number">123</span>)
</code></pre>
<p>ç»„ä»¶ Bï¼š</p>
<pre><code class="hljs language-dart" lang="dart">bus.<span class="hljs-keyword">on</span>(<span class="hljs-string">'hello'</span>, val =&gt; {})
</code></pre>
<hr/>
<h2 data-id="heading-24">ğŸ”¥ å…­ã€é¢è¯•å®˜å¸¸è§è¿½é—®ï¼ˆé™„é«˜èƒ½å›ç­”ï¼‰</h2>
<hr/>
<h3 data-id="heading-25"><strong>è¿½é—® 1ï¼šçˆ¶å­é€šä¿¡å’Œ provide/inject çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ªï¼Ÿ</strong></h3>
<h4 data-id="heading-26">ä½ åº”è¯¥è¿™æ ·ç­”ï¼š</h4>
<ul>
<li><strong>çˆ¶å­ props/emit</strong>ï¼šé€‚åˆç›´æ¥çˆ¶å­é€šä¿¡ï¼Œæ•°æ®æ¸…æ™°å¯æ§</li>
<li><strong>provide/inject</strong>ï¼šé€‚åˆè·¨å±‚çº§é€šä¿¡ï¼Œæ¯”å¦‚ 3ã€5 å±‚ä»¥ä¸Š</li>
<li><strong>provide/inject æ•°æ®ä¸æ˜¯å“åº”å¼ï¼ˆé™¤éä½ ä¼  ref æˆ– reactiveï¼‰</strong></li>
</ul>
<p>âœ” é«˜åˆ†è¡¥å……ï¼š</p>
<blockquote>
<p>provide/inject æ›´åƒâ€œä¾èµ–æ³¨å…¥â€ï¼Œåœ¨ UI ç»„ä»¶åº“ä¸­ç”¨å¾—éå¸¸å¤šï¼ˆElement Plusã€Ant Design Vueï¼‰ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-27"><strong>è¿½é—® 2ï¼šv-model ä¸ºä»€ä¹ˆèƒ½å®ç°åŒå‘ç»‘å®šï¼Ÿåº•å±‚æ˜¯ä»€ä¹ˆï¼Ÿ</strong></h3>
<p>æ ‡å‡†å›ç­”ï¼š</p>
<blockquote>
<p>v-model æœ¬è´¨æ˜¯ propsï¼ˆmodelValueï¼‰ + emitï¼ˆupdate:modelValueï¼‰</p>
</blockquote>
<p>å°±æ˜¯ï¼š</p>
<p>çˆ¶ç»™å­ï¼š<code>modelValue</code><br/>
å­è¿”çˆ¶ï¼š<code>update:modelValue</code></p>
<hr/>
<h3 data-id="heading-28"><strong>è¿½é—® 3ï¼šdefineExpose æ˜¯ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿå’Œ props/emit çš„å…³ç³»ï¼Ÿ</strong></h3>
<p>ç­”ï¼š</p>
<ul>
<li>
<p>expose ç”¨æ¥æš´éœ²æ–¹æ³•ç»™çˆ¶ç»„ä»¶è°ƒç”¨</p>
</li>
<li>
<p>å’Œ props/emit ä¸ä¸€æ ·ï¼š</p>
<ul>
<li>props/emit ç”¨äº <strong>æ•°æ®</strong></li>
<li>expose ç”¨äº <strong>æ–¹æ³•ã€è¡Œä¸º</strong></li>
</ul>
</li>
</ul>
<p>ä¾‹å¦‚è¡¨å•ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">defineExpose</span>({
  validate,
  reset
})
</code></pre>
<hr/>
<h3 data-id="heading-29"><strong>è¿½é—® 4ï¼šprovide æ˜¯ä¸æ˜¯å“åº”å¼çš„ï¼Ÿå¦‚ä½•è®©å®ƒå˜æˆå“åº”å¼ï¼Ÿ</strong></h3>
<p>é»˜è®¤ <strong>ä¸æ˜¯å“åº”å¼</strong>ï¼ˆéå¸¸å¤šäººä¸çŸ¥é“ï¼ï¼‰</p>
<p>å¿…é¡»è¿™æ ·ä¼ ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">const</span> theme = <span class="hljs-keyword">ref</span>(<span class="hljs-string">'dark'</span>)

provide(<span class="hljs-string">'theme'</span>, theme)
</code></pre>
<p>inject å¤„èƒ½å“åº”å˜åŒ–ã€‚</p>
<hr/>
<h3 data-id="heading-30"><strong>è¿½é—® 5ï¼šEventBus ä¸ºä»€ä¹ˆä¸æ¨èï¼Ÿ</strong></h3>
<ul>
<li>å®¹æ˜“é€ æˆäº‹ä»¶æ··ä¹±</li>
<li>ä¸æ˜“è¿½è¸ª</li>
<li>å¤§é¡¹ç›®å¯ç»´æŠ¤æ€§å·®</li>
<li>TypeScript æ”¯æŒå·®</li>
</ul>
<p>é¢è¯•å®˜ä¼šè§‰å¾—ä½ éå¸¸ä¸“ä¸šã€‚</p>
<hr/>
<h2 data-id="heading-31">ğŸ¯ ä¸ƒã€ä¸€å¥è¯æ€»ç»“ï¼ˆèƒŒä¸‹æ¥å°±èƒ½é¢è¯•ç”¨ï¼‰</h2>
<blockquote>
<p>Vue3 çˆ¶å­é€šä¿¡åˆ†ï¼špropsã€emitã€v-modelã€exposeï¼Œè·¨å±‚çº§ç”¨ provide/injectï¼Œå…¨å±€ç”¨ Piniaï¼Œå°‘é‡äº‹ä»¶å¯ç”¨ EventBusã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 13 é¢˜ï¼šVue çš„ `nextTick` åŸç†æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ]]></title>    <link>https://juejin.cn/post/7578830345870082089</link>    <guid>https://juejin.cn/post/7578830345870082089</guid>    <pubDate>2025-12-02T04:32:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578830345870082089" data-draft-id="7578724773993496602" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 13 é¢˜ï¼šVue çš„ `nextTick` åŸç†æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:32:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 13 é¢˜ï¼šVue çš„ `nextTick` åŸç†æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:32:44.000Z" title="Tue Dec 02 2025 04:32:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ç¬¬ 13 é¢˜ï¼šVue çš„ <code>nextTick</code> åŸç†æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</strong></h2>
<hr/>
<h2 data-id="heading-1">ğŸ¯ ä¸€ã€æ ‡å‡†å›ç­”ï¼ˆé¢è¯•å¿…é¡»è¯´çš„æ ¸å¿ƒï¼‰</h2>
<p><code>nextTick</code> ç”¨æ¥åœ¨ <strong>ä¸‹ä¸€è½® DOM æ›´æ–°å®Œæˆä¹‹å</strong> æ‰§è¡Œå›è°ƒã€‚</p>
<p>å› ä¸º Vue çš„ DOM æ›´æ–°æ˜¯ <strong>å¼‚æ­¥çš„ã€æ‰¹å¤„ç†çš„</strong>ï¼Œå½“ä½ ä¿®æ”¹å“åº”å¼æ•°æ®æ—¶ï¼ŒDOM å¹¶ä¸ä¼šç«‹å³æ›´æ–°ï¼Œè€Œæ˜¯æ”¾åˆ°ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—é‡Œï¼Œç­‰åŒä¸€è½®äº‹ä»¶å¾ªç¯ç»“æŸåç»Ÿä¸€æ›´æ–°ã€‚å› æ­¤ï¼Œå¦‚æœä½ æƒ³æ“ä½œâ€œæ›´æ–°åçš„ DOMâ€ï¼Œå¿…é¡»ä½¿ç”¨ <code>nextTick</code>ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸ¯ äºŒã€åº•å±‚åŸç†ï¼ˆé«˜é¢‘è€ƒç‚¹ï¼ŒåŠ¡å¿…èƒŒï¼‰</h2>
<p>Vue çš„ <code>nextTick</code> æœ¬è´¨ä¸Šæ˜¯ï¼š</p>
<blockquote>
<p>ä½¿ç”¨ <strong>å¾®ä»»åŠ¡ï¼ˆPromise.thenï¼‰ä¼˜å…ˆ</strong> å®ç°çš„å¼‚æ­¥å›è°ƒæœºåˆ¶ï¼Œå°†ä»»åŠ¡æ¨å…¥äº‹ä»¶å¾ªç¯çš„ä¸‹ä¸€ tick æ‰§è¡Œã€‚</p>
</blockquote>
<p>Vue3 å®ç°ä¼˜å…ˆçº§ï¼š</p>
<ol>
<li><strong>Promise.thenï¼ˆå¾®ä»»åŠ¡ï¼‰</strong></li>
<li>å¦‚æœ Promise ä¸å¯ç”¨ â†’ å†é™çº§åˆ° <strong>MutationObserver</strong></li>
<li>æœ€åæ‰ä½¿ç”¨ <strong>setTimeoutï¼ˆå®ä»»åŠ¡ï¼‰</strong></li>
</ol>
<p>ä¸ºä»€ä¹ˆç”¨å¾®ä»»åŠ¡ï¼Ÿ</p>
<ul>
<li>ä¼˜å…ˆçº§æ¯” setTimeout é«˜</li>
<li>æ‰§è¡Œéå¸¸å¿«</li>
<li>èƒ½ä¿è¯ DOM æ›´æ–°åå°½å¿«æ‰§è¡Œå›è°ƒ</li>
</ul>
<p>è¿™å¥è¯é¢è¯•å®˜å¾ˆçˆ±å¬ï¼š</p>
<blockquote>
<p>Vue3 ä¸­ DOM æ›´æ–°æ˜¯å¼‚æ­¥æ‰¹å¤„ç†çš„ï¼Œè€Œ nextTick å°±æ˜¯è®©ä»£ç åœ¨ DOM æ›´æ–°å®Œåå†æ‰§è¡Œã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-3">ğŸ¯ ä¸‰ã€ä¸ºä»€ä¹ˆ DOM æ›´æ–°æ˜¯å¼‚æ­¥çš„ï¼Ÿ</h2>
<p>è¿™æ˜¯é¢è¯•å®˜ 100% ä¼šè¿½é—®çš„ã€‚</p>
<h4 data-id="heading-4">âœ” åŒæ­¥æ›´æ–° DOM æ€§èƒ½å¤ªå·®</h4>
<p>é¢‘ç¹æ•°æ®å˜åŒ–ä¼šå¯¼è‡´é¢‘ç¹ DOM é‡ç»˜ã€å›æµï¼Œæ€§èƒ½å´©æºƒã€‚</p>
<h4 data-id="heading-5">âœ” å¼‚æ­¥æ‰¹å¤„ç†å¯ä»¥åˆå¹¶æ›´æ–°</h4>
<p>å¤šæ¬¡çŠ¶æ€ä¿®æ”¹ï¼š</p>
<pre><code class="hljs">count.value++
count.value++
count.value++
</code></pre>
<p>Vue ä¸ä¼šæ›´æ–° 3 æ¬¡ï¼Œè€Œæ˜¯ï¼š</p>
<p><strong>åˆå¹¶æ‰€æœ‰çŠ¶æ€å˜æ›´ â†’ æ‰§è¡Œä¸€æ¬¡ DOM æ›´æ–°</strong></p>
<h4 data-id="heading-6">âœ” nextTick ç”¨äºç­‰å¾…è¿™ä¸ªæ›´æ–°å®Œæˆ</h4>
<p>éå¸¸å¥½è®°ï¼š</p>
<blockquote>
<p>â€œæ•°æ®æ”¹å®Œä¸æ˜¯é©¬ä¸Šæ”¹ DOMï¼Œéœ€è¦ nextTick ç­‰ Vue æ‰¹é‡æ”¹å®Œ DOM åå†æ‰§è¡Œä»£ç ã€‚â€</p>
</blockquote>
<hr/>
<h2 data-id="heading-7">ğŸ¯ å››ã€ç®€å•ç†è§£ nextTick çš„æ‰§è¡Œæœºåˆ¶ï¼ˆåŠç™½è¯ï¼‰</h2>
<p>ä½ è¿ç»­æäº¤å¾ˆå¤š DOM æ›´æ–°ï¼Œä½† Vue ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯æ¨å…¥ä»»åŠ¡é˜Ÿåˆ—ã€‚</p>
<p>ç„¶åï¼š</p>
<ol>
<li>å½“å‰åŒæ­¥ä»£ç æ‰§è¡Œå®Œ</li>
<li>å¾®ä»»åŠ¡é˜Ÿåˆ—æ‰§è¡Œï¼ˆPromise.thenï¼‰</li>
<li>Vue æ‰¹é‡æ›´æ–° DOM</li>
<li>æ‰§è¡Œ nextTick å›è°ƒ</li>
</ol>
<p>é¡ºåºå¤§æ¦‚æ˜¯ï¼š</p>
<pre><code class="hljs">åŒæ­¥ä»£ç  â†’ Vue æ”¶é›†æ›´æ–° â†’ å¾®ä»»åŠ¡æ‰§è¡Œ â†’ DOM æ›´æ–° â†’ nextTick æ‰§è¡Œ
</code></pre>
<hr/>
<h2 data-id="heading-8">ğŸ¯ äº”ã€ä»£ç ç¤ºä¾‹ï¼ˆé¢è¯•å®˜é€šå¸¸è®©ä½ ä¸¾ä¾‹ï¼‰</h2>
<pre><code class="hljs language-scss" lang="scss">count<span class="hljs-selector-class">.value</span>++
await <span class="hljs-built_in">nextTick</span>()
console<span class="hljs-selector-class">.log</span>(divRef.value.innerText) <span class="hljs-comment">// æ‹¿åˆ°çš„æ˜¯æ›´æ–°åçš„ DOM</span>
</code></pre>
<hr/>
<h2 data-id="heading-9">ğŸ¯ å…­ã€æ‰‹å†™ä¸€ä¸ª nextTickï¼ˆå¿…åŠ åˆ†ï¼‰</h2>
<p>é¢è¯•å®˜çœ‹åˆ°ä½ èƒ½æ‰‹å†™ï¼Œç›´æ¥å¯¹ä½ å°è±¡çˆ†ç‚¸åŠ åˆ†ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">callbacks</span> = []
let <span class="hljs-attr">pending</span> = <span class="hljs-literal">false</span>

function nextTick(cb) {
  callbacks.push(cb)

  if (!pending) {
    <span class="hljs-attr">pending</span> = <span class="hljs-literal">true</span>
    Promise.resolve().then(() =&gt; {
      <span class="hljs-attr">pending</span> = <span class="hljs-literal">false</span>
      callbacks.forEach(<span class="hljs-attr">fn</span> =&gt; fn())
      <span class="hljs-attr">callbacks.length</span> = <span class="hljs-number">0</span>
    })
  }
}
</code></pre>
<p>è§£é‡Šï¼š</p>
<ul>
<li>å­˜å‚¨å›è°ƒ</li>
<li>æ‰¹å¤„ç†</li>
<li>åˆ©ç”¨ Promise.then åœ¨å¾®ä»»åŠ¡æ‰§è¡Œ</li>
</ul>
<hr/>
<h2 data-id="heading-10">ğŸ¯ ä¸ƒã€é¢è¯•å®˜å¸¸è§è¿½é—®ï¼ˆé™„æœ€ä½³å›ç­”ï¼‰</h2>
<hr/>
<h3 data-id="heading-11"><strong>è¿½é—® 1ï¼šVue3 DOM æ›´æ–°æ˜¯åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Ÿ</strong></h3>
<p>å›ç­”ï¼š</p>
<blockquote>
<p>å¼‚æ­¥ã€‚Vue3 ä¼šå°†å¤šæ¬¡æ•°æ®ä¿®æ”¹åˆå¹¶åœ¨ä¸€èµ·ï¼Œé€šè¿‡å¾®ä»»åŠ¡åœ¨ä¸‹ä¸€ä¸ª tick ç»Ÿä¸€æ›´æ–° DOMã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-12"><strong>è¿½é—® 2ï¼šä¸ºä»€ä¹ˆ <code>nextTick(() =&gt; {})</code> æœ‰æ—¶è¿˜æ˜¯æ‹¿ä¸åˆ° DOMï¼Ÿ</strong></h3>
<p>å›ç­”ï¼š</p>
<blockquote>
<p>å› ä¸ºä½ ç›‘å¬çš„æ˜¯æ•°æ®å˜åŒ–ï¼Œè€Œä¸æ˜¯ DOM æ›´æ–°ï¼›ä½ éœ€è¦ç¡®ä¿ DOM æ¸²æŸ“å‚ä¸äº†æ›´æ–°ã€‚<br/>
æŸäº›åœºæ™¯å¿…é¡»ä½¿ç”¨ <code>await nextTick()</code> è¿ç»­ä¸¤æ¬¡ï¼Œæˆ–ç”¨ <code>flush: 'post'</code>ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-13"><strong>è¿½é—® 3ï¼šwatch çš„ flush: 'post' å’Œ nextTick çš„åŒºåˆ«ï¼Ÿ</strong></h3>
<p>å›ç­”ï¼š</p>
<ul>
<li><code>nextTick</code>ï¼šç­‰å¾… <strong>DOM æ›´æ–°ä¹‹å</strong> æ‰§è¡Œ</li>
<li><code>flush: 'post'</code>ï¼šè®©å›è°ƒåœ¨ DOM æ›´æ–°ä¹‹åæ‰§è¡Œï¼ˆç±»ä¼¼ nextTickï¼‰</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-built_in">watch</span>(count, () =&gt; {
  console.<span class="hljs-built_in">log</span>(<span class="hljs-string">'DOM å·²æ›´æ–°'</span>)
}, { flush: <span class="hljs-string">'post'</span> })
</code></pre>
<p>äºŒè€…éƒ½å¯ä»¥â€œç­‰å¾… DOM æ›´æ–°â€ï¼Œä½†ï¼š</p>
<ul>
<li><code>nextTick</code> ç”¨äº<strong>æ•°æ®ä¿®æ”¹åæ‰‹åŠ¨ç­‰å¾… DOM</strong></li>
<li><code>post</code> ç”¨äº <strong>ä¾¦å¬å™¨è‡ªåŠ¨ç­‰å¾… DOM</strong></li>
</ul>
<hr/>
<h3 data-id="heading-14"><strong>è¿½é—® 4ï¼šnextTick æ˜¯ä¸æ˜¯ Vue ç‰¹æœ‰çš„ï¼Ÿ</strong></h3>
<p>å›ç­”ï¼š</p>
<blockquote>
<p>ä¸æ˜¯ï¼ŒReact ä¹Ÿæœ‰ç±»ä¼¼æœºåˆ¶ï¼Œæ‰€æœ‰è™šæ‹Ÿ DOM æ¡†æ¶éƒ½æœ‰å¼‚æ­¥æ‰¹å¤„ç†ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-15">ğŸ¯ å…«ã€ä¸€å¥è¯æ€»ç»“ï¼ˆèƒŒä¸‹æ¥ï¼‰</h2>
<blockquote>
<p>Vue çš„ nextTick åˆ©ç”¨ Promise å¾®ä»»åŠ¡ï¼Œå°†å›è°ƒå»¶è¿Ÿåˆ° DOM å¼‚æ­¥æ‰¹å¤„ç†æ›´æ–°å®Œæˆåæ‰§è¡Œï¼Œç”¨äºä¿è¯ä½ è·å–åˆ°çš„æ˜¯æœ€æ–° DOMã€‚</p>
</blockquote>
<p>æ¥è¯¦ç»†è§£é‡Š <strong>Vue3 ä¸­ <code>watch</code> å’Œ <code>computed</code> çš„åŒºåˆ«</strong>ï¼Œä»åŸç†ã€ç”¨é€”å’Œæ‰§è¡Œæ–¹å¼å¤šç»´åº¦å±•å¼€ï¼Œè®©ä½ é¢è¯•ç­”é¢˜æ—¶ä¸€è¯´å°±æ‡‚ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 14 é¢˜ï¼šVue3 ä¸­è™šæ‹Ÿ DOM æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ï¼Ÿå¦‚ä½•æå‡æ€§èƒ½ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7578787344612818980</link>    <guid>https://juejin.cn/post/7578787344612818980</guid>    <pubDate>2025-12-02T04:33:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578787344612818980" data-draft-id="7578719771588984842" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 14 é¢˜ï¼šVue3 ä¸­è™šæ‹Ÿ DOM æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ï¼Ÿå¦‚ä½•æå‡æ€§èƒ½ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:33:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 14 é¢˜ï¼šVue3 ä¸­è™šæ‹Ÿ DOM æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ï¼Ÿå¦‚ä½•æå‡æ€§èƒ½ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:33:05.000Z" title="Tue Dec 02 2025 04:33:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ç¬¬ 14 é¢˜ï¼šVue3 ä¸­è™šæ‹Ÿ DOM æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨ï¼Ÿå¦‚ä½•æå‡æ€§èƒ½ï¼Ÿ</strong></h2>
<hr/>
<h2 data-id="heading-1">ğŸ¯ ä¸€ã€æ ‡å‡†å›ç­”ï¼ˆé¢è¯•å®˜å¿…é—®æ ¸å¿ƒç‚¹ï¼‰</h2>
<h4 data-id="heading-2"><strong>1ï¸âƒ£ ä»€ä¹ˆæ˜¯è™šæ‹Ÿ DOMï¼ˆVNodeï¼‰</strong></h4>
<p>è™šæ‹Ÿ DOM æ˜¯ Vue å†…éƒ¨çš„ä¸€ç§ <strong>JavaScript å¯¹è±¡è¡¨ç¤ºçš„ DOM æ ‘</strong>ï¼ŒæŠ½è±¡å‡ºçœŸå® DOM çš„ç»“æ„å’Œå±æ€§ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">{
  tag: <span class="hljs-string">'div'</span>,
  props: { id: <span class="hljs-string">'app'</span> },
  children: [
    { tag: <span class="hljs-string">'span'</span>, children: <span class="hljs-string">'Hello'</span> }
  ]
}
</code></pre>
<p>å®ƒæ˜¯<strong>å†…å­˜ä¸­çš„ DOM æè¿°</strong>ï¼Œä¸æ˜¯æµè§ˆå™¨çœŸå® DOMã€‚</p>
<hr/>
<h4 data-id="heading-3"><strong>2ï¸âƒ£ ä¸ºä»€ä¹ˆè¦ç”¨è™šæ‹Ÿ DOM</strong></h4>
<ol>
<li><strong>é¿å…ç›´æ¥æ“ä½œçœŸå® DOMï¼Œæ€§èƒ½é«˜</strong></li>
<li><strong>è·¨å¹³å°æ¸²æŸ“</strong>ï¼ˆå¯æ¸²æŸ“åˆ°æµè§ˆå™¨ã€Nativeã€Canvas ç­‰ï¼‰</li>
<li><strong>Diff ç®—æ³•</strong>ï¼šå¯¹æ¯”æ–°æ—§ VNodeï¼Œåªæ›´æ–°å˜åŒ–éƒ¨åˆ†</li>
<li><strong>ç»„åˆå¼æ¸²æŸ“ä¼˜åŒ–</strong>ï¼šæ›´æ–¹ä¾¿ç®¡ç†å“åº”å¼æ›´æ–°</li>
</ol>
<hr/>
<h2 data-id="heading-4">ğŸ¯ äºŒã€è™šæ‹Ÿ DOM ä¼˜åŠ¿ï¼ˆé«˜åˆ†å¿…ç­”ç‚¹ï¼‰</h2>





























<table><thead><tr><th>ä¼˜åŠ¿</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>æ€§èƒ½ä¼˜åŒ–</td><td>æ‰¹é‡ diff â†’ æœ€å°åŒ–çœŸå® DOM æ›´æ–°</td></tr><tr><td>å¹³å°æ— å…³</td><td>å¯æ¸²æŸ“åœ¨æµè§ˆå™¨ã€æœåŠ¡ç«¯ã€Nativeã€Canvas</td></tr><tr><td>å“åº”å¼ç»“åˆ</td><td>Vue å“åº”å¼ç³»ç»Ÿä¿®æ”¹æ•°æ® â†’ ç”Ÿæˆæ–° VNode â†’ diff â†’ patch</td></tr><tr><td>å¯è°ƒè¯•</td><td>å†…å­˜ä¸­å¯¹è±¡æ˜“äºåˆ†æã€è°ƒè¯•ã€æµ‹è¯•</td></tr><tr><td>è·¨æ¸²æŸ“å™¨</td><td>Vue3 å¯ä»¥é€šè¿‡ renderer API æ¸²æŸ“ä¸åŒå¹³å°</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-5">ğŸ¯ ä¸‰ã€Vue3 ä¸­è™šæ‹Ÿ DOM æµç¨‹ï¼ˆé«˜é¢‘é¢è¯•è€ƒç‚¹ï¼‰</h2>
<ol>
<li><strong>æ¨¡æ¿ / render å‡½æ•°</strong> â†’ ç”Ÿæˆ <strong>VNode</strong></li>
<li><strong>å“åº”å¼æ•°æ®å˜åŒ–</strong> â†’ è§¦å‘ <strong>effect</strong> â†’ é‡æ–°ç”Ÿæˆæ–°çš„ VNode</li>
<li><strong>Diff ç®—æ³•</strong> â†’ å¯¹æ¯”æ–°æ—§ VNode</li>
<li><strong>Patch æ›´æ–°</strong> â†’ æœ€å°åŒ–çœŸå® DOM æ›´æ–°</li>
</ol>
<hr/>
<h2 data-id="heading-6">ğŸ¯ å››ã€ä»£ç ç¤ºä¾‹ï¼ˆrender å‡½æ•°ï¼‰</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { h, render } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> vnode = <span class="hljs-title function_">h</span>(<span class="hljs-string">'div'</span>, { <span class="hljs-attr">id</span>: <span class="hljs-string">'app'</span> }, [
  <span class="hljs-title function_">h</span>(<span class="hljs-string">'span'</span>, <span class="hljs-string">'Hello Vue3'</span>)
])

<span class="hljs-title function_">render</span>(vnode, <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>))
</code></pre>
<p><strong>æµç¨‹è§£é‡Šï¼š</strong></p>
<ul>
<li><code>h()</code> â†’ åˆ›å»º VNode</li>
<li><code>render()</code> â†’ æŒ‚è½½æˆ–æ›´æ–° DOM</li>
<li>æ•°æ®å˜æ›´ â†’ diff â†’ patch â†’ æœ€å°æ›´æ–°</li>
</ul>
<hr/>
<h2 data-id="heading-7">ğŸ¯ äº”ã€é¢è¯•å®˜å¸¸è§è¿½é—®</h2>
<hr/>
<h3 data-id="heading-8"><strong>è¿½é—® 1ï¼šè™šæ‹Ÿ DOM å¯¹æ€§èƒ½çœŸçš„æœ‰æå‡å—ï¼Ÿ</strong></h3>
<p>å›ç­”ï¼š</p>
<ul>
<li>å¯¹å°å‹åº”ç”¨å·®å¼‚ä¸å¤§ï¼Œä½†å¯¹äºé¢‘ç¹ä¿®æ”¹ DOM æˆ–å¤§è§„æ¨¡æ¸²æŸ“æ—¶ï¼Œ<strong>diff ç®—æ³•å‡å°‘å¤§é‡ DOM æ“ä½œ</strong>ï¼Œæ€§èƒ½æå‡æ˜æ˜¾ã€‚</li>
<li>Vue3 ä¸­ <strong>é™æ€èŠ‚ç‚¹æå‡ + PatchFlag</strong> è¿›ä¸€æ­¥ä¼˜åŒ–æ€§èƒ½ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-9"><strong>è¿½é—® 2ï¼šVue3 Diff ç®—æ³•æ€ä¹ˆä¼˜åŒ–çš„ï¼Ÿ</strong></h3>
<p>å›ç­”ï¼š</p>
<ol>
<li>
<p><strong>PatchFlag é™æ€æå‡</strong></p>
<ul>
<li>é™æ€èŠ‚ç‚¹ä¸éœ€è¦é‡æ–°æ¸²æŸ“</li>
</ul>
</li>
<li>
<p><strong>Keyed Diff</strong></p>
<ul>
<li>ç”¨ <code>key</code> å¿«é€Ÿæ¯”è¾ƒåˆ—è¡¨èŠ‚ç‚¹</li>
</ul>
</li>
<li>
<p><strong>Fragment æ”¯æŒ</strong></p>
<ul>
<li>å‡å°‘é¢å¤– DOM åŒ…è£¹å…ƒç´ </li>
</ul>
</li>
<li>
<p><strong>Teleport / Suspense</strong></p>
<ul>
<li>æå‡å¤æ‚åœºæ™¯æ¸²æŸ“æ•ˆç‡</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-10"><strong>è¿½é—® 3ï¼šè™šæ‹Ÿ DOM ä¼šæ¶ˆè€—å¤§é‡å†…å­˜å—ï¼Ÿ</strong></h3>
<p>å›ç­”ï¼š</p>
<ul>
<li>æ˜¯çš„ï¼Œä½† Vue3 ä½¿ç”¨ <strong>Proxy + effect + PatchFlag</strong> å‡å°‘é‡å¤åˆ›å»º</li>
<li>å¯¹äºå¤§è§„æ¨¡åˆ—è¡¨ï¼Œå»ºè®®ä½¿ç”¨ <code>v-for key</code> + è™šæ‹Ÿæ»šåŠ¨ç­‰ä¼˜åŒ–</li>
</ul>
<hr/>
<h3 data-id="heading-11"><strong>è¿½é—® 4ï¼šVue3 ä¸ºä»€ä¹ˆè™šæ‹Ÿ DOM ä¸åƒ Vue2 é‚£ä¹ˆæ…¢ï¼Ÿ</strong></h3>
<p>å›ç­”ï¼š</p>
<ul>
<li>Vue3 é‡‡ç”¨ <strong>Proxy + Composition API + Compiler ä¼˜åŒ–</strong></li>
<li>é™æ€èŠ‚ç‚¹æå‡ + PatchFlag + Fragment â†’ å‡å°‘ diff é‡</li>
<li>æ›´å°‘ä¸­é—´å¯¹è±¡ç”Ÿæˆ â†’ æ€§èƒ½æ˜¾è‘—æå‡</li>
</ul>
<hr/>
<h2 data-id="heading-12">ğŸ¯ å…­ã€killer é—®é¢˜ï¼ˆé¢è¯•å®˜çˆ±é—®çš„è¿›é˜¶é¢˜ï¼‰</h2>
<h4 data-id="heading-13">â“ â€œè™šæ‹Ÿ DOM å’ŒçœŸå® DOM æ“ä½œç›¸æ¯”çš„ä¼˜åŠ£ï¼Ÿâ€</h4>
<p><strong>ç­”æ¡ˆè¦ç‚¹ï¼š</strong></p>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šæ‰¹é‡å¤„ç†ã€è·¨å¹³å°ã€å¯æ§æ›´æ–°</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šæ¯”ç›´æ¥æ“ä½œçœŸå® DOM å¤šä¸€æ¬¡ä¸­é—´å±‚</li>
<li><strong>ç»“è®º</strong>ï¼šåœ¨å¤§å¤šæ•°å¤æ‚åº”ç”¨ä¸­ä¼˜åŠ¿å¤§äºåŠ£åŠ¿ï¼Œå°¤å…¶é…åˆ Vue3 ç¼–è¯‘ä¼˜åŒ–</li>
</ul>
<hr/>
<h4 data-id="heading-14">â“ â€œPatchFlag æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆ Vue3 éœ€è¦å®ƒï¼Ÿâ€</h4>
<ul>
<li>PatchFlagï¼šç¼–è¯‘é˜¶æ®µæ ‡è®° VNode çš„å˜åŒ–ç±»å‹</li>
<li>ä½œç”¨ï¼šè®©æ¸²æŸ“å™¨åªå¯¹å˜åŒ–çš„éƒ¨åˆ†è¿›è¡Œ patch</li>
<li>ä¼˜åŒ–æ€§èƒ½ â†’ å‡å°‘ diff è®¡ç®—</li>
</ul>
<hr/>
<h2 data-id="heading-15">ğŸ¯ ä¸ƒã€ä¸€å¥è¯æ€»ç»“ï¼ˆèƒŒé¢è¯•å®˜å³å¯ï¼‰</h2>
<blockquote>
<p>è™šæ‹Ÿ DOM æ˜¯ Vue å†…å­˜ä¸­ DOM æè¿°å¯¹è±¡ï¼Œé€šè¿‡ diff ç®—æ³•å®ç°æœ€å°åŒ–æ›´æ–°ï¼Œé¿å…ç›´æ¥æ“ä½œçœŸå® DOMï¼ŒVue3 é€šè¿‡ PatchFlagã€é™æ€æå‡å’Œ Proxy å“åº”å¼æå¤§ä¼˜åŒ–äº†æ€§èƒ½ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 15 é¢˜ï¼šcomputed vs watch åŒºåˆ« + ä½¿ç”¨åœºæ™¯]]></title>    <link>https://juejin.cn/post/7578787344612835364</link>    <guid>https://juejin.cn/post/7578787344612835364</guid>    <pubDate>2025-12-02T04:33:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578787344612835364" data-draft-id="7578719771589001226" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 15 é¢˜ï¼šcomputed vs watch åŒºåˆ« + ä½¿ç”¨åœºæ™¯"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:33:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 15 é¢˜ï¼šcomputed vs watch åŒºåˆ« + ä½¿ç”¨åœºæ™¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:33:24.000Z" title="Tue Dec 02 2025 04:33:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ç¬¬ 15 é¢˜ï¼šcomputed vs watch åŒºåˆ« + ä½¿ç”¨åœºæ™¯</strong></h2>
<hr/>
<h2 data-id="heading-1">ğŸ¯ ä¸€ã€æ ‡å‡†å›ç­”ï¼ˆé¢è¯•å®˜å¿…ç­”ç‚¹ï¼‰</h2>








































<table><thead><tr><th>ç‰¹æ€§</th><th>computed</th><th>watch</th></tr></thead><tbody><tr><td>ä¾èµ–æ”¶é›†</td><td>è‡ªåŠ¨ä¾èµ–è¿½è¸ª</td><td>éœ€è¦æ‰‹åŠ¨æŒ‡å®šä¾èµ–</td></tr><tr><td>è¿”å›å€¼</td><td>ä¼šç¼“å­˜ï¼ˆlazy evaluationï¼‰</td><td>ä¸ç¼“å­˜</td></tr><tr><td>ç”¨é€”</td><td>è®¡ç®—è¡ç”Ÿæ•°æ®</td><td>æ‰§è¡Œå‰¯ä½œç”¨ï¼ˆAPIã€DOMæ“ä½œç­‰ï¼‰</td></tr><tr><td>æ‰§è¡Œæ—¶æœº</td><td>è®¿é—®æ—¶æ‰æ‰§è¡Œ</td><td>æ•°æ®å˜åŒ–æ—¶è§¦å‘</td></tr><tr><td>è·å– oldValue</td><td>âŒ</td><td>âœ” å¯ä»¥è·å–</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>çº¯è®¡ç®—é€»è¾‘</td><td>ç›‘å¬å˜åŒ–åšå¼‚æ­¥æˆ–å‰¯ä½œç”¨å¤„ç†</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-2">ğŸ¯ äºŒã€ä»£ç ç¤ºä¾‹</h2>
<h4 data-id="heading-3"><strong>1ï¸âƒ£ computed ç¤ºä¾‹ï¼ˆç¼“å­˜è®¡ç®—ï¼‰</strong></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1</span>)
<span class="hljs-keyword">const</span> double = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> count.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(double.<span class="hljs-property">value</span>) <span class="hljs-comment">// 2</span>

count.<span class="hljs-property">value</span>++
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(double.<span class="hljs-property">value</span>) <span class="hljs-comment">// 4ï¼Œcomputed ä¼šè‡ªåŠ¨æ›´æ–°å¹¶ç¼“å­˜</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>åªæœ‰è®¿é—® <code>double.value</code> æ—¶æ‰æ‰§è¡Œ</li>
<li>å¦‚æœä¾èµ–æœªå˜åŒ–ï¼Œç›´æ¥è¿”å›ç¼“å­˜å€¼</li>
</ul>
<hr/>
<h4 data-id="heading-4"><strong>2ï¸âƒ£ watch ç¤ºä¾‹ï¼ˆå‰¯ä½œç”¨ç›‘å¬ï¼‰</strong></h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1</span>)

<span class="hljs-title function_">watch</span>(count, <span class="hljs-function">(<span class="hljs-params">newVal, oldVal</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`count changed from <span class="hljs-subst">${oldVal}</span> to <span class="hljs-subst">${newVal}</span>`</span>)
})
count.<span class="hljs-property">value</span>++  <span class="hljs-comment">// è§¦å‘ watch å›è°ƒ</span>
</span></code></pre>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>è§¦å‘å‰¯ä½œç”¨ï¼ˆæ—¥å¿—ã€è¯·æ±‚ APIã€æ“ä½œ DOMï¼‰</li>
<li>å¯ä»¥è·å– <code>oldVal</code></li>
<li>é»˜è®¤ flush: 'pre'ï¼ˆå¯æŒ‡å®š post æˆ– syncï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-5">ğŸ¯ ä¸‰ã€é¢è¯•å®˜è¿½é—®ï¼ˆé«˜é¢‘ï¼‰</h2>
<hr/>
<h3 data-id="heading-6"><strong>è¿½é—® 1ï¼šcomputed èƒ½åšå¼‚æ­¥å—ï¼Ÿ</strong></h3>
<p><strong>ç­”</strong>ï¼š</p>
<ul>
<li>computed ä¸æ”¯æŒå¼‚æ­¥ï¼ˆåªè®¡ç®—åŒæ­¥é€»è¾‘ï¼‰</li>
<li>å¼‚æ­¥é€»è¾‘åº”è¯¥ç”¨ <code>watch</code> æˆ– <code>watchEffect</code></li>
</ul>
<hr/>
<h3 data-id="heading-7"><strong>è¿½é—® 2ï¼šcomputed çš„æ‡’æ‰§è¡ŒåŸç†ï¼Ÿ</strong></h3>
<p><strong>ç­”</strong>ï¼š</p>
<ul>
<li>å†…éƒ¨ä¾èµ–æ”¶é›† + dirty flag</li>
<li>ä¾èµ–å˜åŒ–æ—¶æ ‡è®° dirty = true</li>
<li>ä¸‹æ¬¡è®¿é—® value æ—¶æ‰é‡æ–°è®¡ç®—å¹¶ç¼“å­˜ç»“æœ</li>
</ul>
<hr/>
<h3 data-id="heading-8"><strong>è¿½é—® 3ï¼šcomputed vs watchEffect åŒºåˆ«ï¼Ÿ</strong></h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th>computed</th><th>watchEffect</th></tr></thead><tbody><tr><td>è¿”å›å€¼</td><td>ç¼“å­˜è¿”å›å€¼</td><td>æ— è¿”å›å€¼</td></tr><tr><td>ä¾èµ–</td><td>è‡ªåŠ¨æ”¶é›†</td><td>è‡ªåŠ¨æ”¶é›†</td></tr><tr><td>æ‰§è¡Œæ—¶æœº</td><td>è®¿é—® value æ—¶æ‰æ‰§è¡Œ</td><td>é»˜è®¤ç«‹å³æ‰§è¡Œä¸€æ¬¡</td></tr><tr><td>ç”¨é€”</td><td>è¡ç”Ÿæ•°æ®</td><td>å‰¯ä½œç”¨é€»è¾‘</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-9"><strong>è¿½é—® 4ï¼šwatch å¯ä»¥æ›¿ä»£ computed å—ï¼Ÿ</strong></h3>
<p><strong>ç­”</strong>ï¼š</p>
<ul>
<li>æŠ€æœ¯ä¸Šå¯ä»¥ï¼Œä½†ä¸æ¨è</li>
<li>watch ä¸ç¼“å­˜ï¼Œæ¯æ¬¡è®¿é—®éƒ½å¯èƒ½é‡æ–°æ‰§è¡Œ</li>
<li>computed æ›´è½»é‡ä¸”æ€§èƒ½é«˜</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>è¿½é—® 5ï¼šcomputed å¯ä»¥å’Œ ref è”åŠ¨å—ï¼Ÿ</strong></h3>
<pre><code class="hljs language-scss" lang="scss">const count = <span class="hljs-built_in">ref</span>(<span class="hljs-number">1</span>)
const double = <span class="hljs-built_in">computed</span>(() =&gt; count<span class="hljs-selector-class">.value</span> * <span class="hljs-number">2</span>)
double<span class="hljs-selector-class">.value</span>++ <span class="hljs-comment">// âŒ æŠ¥é”™ï¼Œcomputed é»˜è®¤åªè¯»</span>
</code></pre>
<ul>
<li><strong>è§£å†³æ–¹æ³•</strong>ï¼šä½¿ç”¨ <code>computed({ get, set })</code> åˆ›å»ºå¯å†™ computed</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">const</span> <span class="hljs-built_in">double</span> = computed({
  <span class="hljs-keyword">get</span>: () =&gt; count.value * <span class="hljs-number">2</span>,
  <span class="hljs-keyword">set</span>: val =&gt; count.value = val / <span class="hljs-number">2</span>
})
</code></pre>
<hr/>
<h2 data-id="heading-11">ğŸ¯ å››ã€ä¸€å¥è¯æ€»ç»“ï¼ˆèƒŒé¢è¯•å®˜å³å¯ï¼‰</h2>
<blockquote>
<p>computed ç”¨äºç¼“å­˜è¡ç”Ÿæ•°æ®ï¼Œæ‡’æ‰§è¡Œã€è‡ªåŠ¨ä¾èµ–æ”¶é›†ï¼›watch ç”¨äºç›‘å¬æ•°æ®å˜åŒ–è§¦å‘å‰¯ä½œç”¨ï¼Œå¯è·å–æ–°æ—§å€¼ã€‚computed æ›´è½»é‡ï¼Œwatch æ›´çµæ´»ï¼Œé€‚åˆå¼‚æ­¥æˆ–å‰¯ä½œç”¨é€»è¾‘ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£é‡Šwatchå’Œcomputedçš„åŸç†]]></title>    <link>https://juejin.cn/post/7578818741698412550</link>    <guid>https://juejin.cn/post/7578818741698412550</guid>    <pubDate>2025-12-02T04:33:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578818741698412550" data-draft-id="7578699866182402086" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£é‡Šwatchå’Œcomputedçš„åŸç†"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:33:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£é‡Šwatchå’Œcomputedçš„åŸç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:33:44.000Z" title="Tue Dec 02 2025 04:33:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>1ï¸âƒ£ æ ¸å¿ƒåŒºåˆ«è¡¨</strong></h2>


















































<table><thead><tr><th>ç‰¹æ€§</th><th>computed</th><th>watch</th></tr></thead><tbody><tr><td><strong>ç”¨é€”</strong></td><td>è®¡ç®—è¡ç”Ÿæ•°æ®</td><td>ç›‘å¬å˜åŒ–æ‰§è¡Œå‰¯ä½œç”¨</td></tr><tr><td><strong>è¿”å›å€¼</strong></td><td>ä¼šè¿”å›å€¼å¹¶ç¼“å­˜</td><td>æ— è¿”å›å€¼ï¼ˆä¸»è¦è§¦å‘å›è°ƒï¼‰</td></tr><tr><td><strong>æ‰§è¡Œæ—¶æœº</strong></td><td>è®¿é—® <code>.value</code> æ—¶æ‰æ‰§è¡Œ</td><td>æ•°æ®å˜åŒ–æ—¶ç«‹å³è§¦å‘ï¼ˆflush å¯æ§åˆ¶ï¼‰</td></tr><tr><td><strong>ç¼“å­˜æœºåˆ¶</strong></td><td>âœ… ä¼šç¼“å­˜ï¼Œä¾èµ–æœªå˜ä¸é‡æ–°è®¡ç®—</td><td>âŒ ä¸ç¼“å­˜ï¼Œæ¯æ¬¡ä¾èµ–å˜åŒ–éƒ½ä¼šè§¦å‘å›è°ƒ</td></tr><tr><td><strong>ä¾èµ–æ”¶é›†</strong></td><td>è‡ªåŠ¨æ”¶é›†ä¾èµ–</td><td>éœ€æ‰‹åŠ¨æŒ‡å®šç›‘å¬å¯¹è±¡ï¼ˆæˆ– watchEffect è‡ªåŠ¨æ”¶é›†ï¼‰</td></tr><tr><td><strong>å¯è·å– oldValue</strong></td><td>âŒ</td><td>âœ…</td></tr><tr><td><strong>å¼‚æ­¥æ”¯æŒ</strong></td><td>âŒ ä»…åŒæ­¥è®¡ç®—</td><td>âœ… å¯åšå¼‚æ­¥å‰¯ä½œç”¨ï¼ˆAPIã€DOM æ“ä½œç­‰ï¼‰</td></tr><tr><td><strong>é€‚åˆåœºæ™¯</strong></td><td>çº¯é€»è¾‘è®¡ç®—ã€UI å±•ç¤ºæ•°æ®</td><td>å‰¯ä½œç”¨é€»è¾‘ã€å¼‚æ­¥è¯·æ±‚ã€æ“ä½œ DOM ç­‰</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-1"><strong>2ï¸âƒ£ ç†è§£æ–¹å¼</strong></h2>
<ol>
<li>
<p><strong>computed = è®¡ç®—å±æ€§ï¼ˆæƒ°æ€§æ±‚å€¼ + ç¼“å­˜ï¼‰</strong></p>
<ul>
<li>ä¸»è¦ç”¨äºæ ¹æ®å·²æœ‰æ•°æ®è®¡ç®—å‡ºæ–°çš„æ•°æ®</li>
<li>è®¿é—® value æ—¶æ‰è§¦å‘è®¡ç®—</li>
<li>ä¸é€‚åˆåšå‰¯ä½œç”¨</li>
</ul>
</li>
<li>
<p><strong>watch = æ•°æ®ä¾¦å¬å™¨ï¼ˆè§‚å¯Ÿè€…æ¨¡å¼ï¼‰</strong></p>
<ul>
<li>ç”¨äºç›‘å¬æŸä¸ªå“åº”å¼å˜é‡å˜åŒ–</li>
<li>è§¦å‘å›è°ƒæ‰§è¡Œå‰¯ä½œç”¨ï¼ˆAPI è¯·æ±‚ã€DOM æ“ä½œã€æ—¥å¿—ç­‰ï¼‰</li>
<li>å¯è®¿é—®æ–°æ—§å€¼</li>
<li>å¯ä»¥åšå¼‚æ­¥æ“ä½œ</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-2"><strong>3ï¸âƒ£ åŸç†ä¸Šçš„å·®å¼‚</strong></h2>
<ul>
<li>
<p><strong>computed</strong></p>
<ul>
<li>å†…éƒ¨æœ‰ <code>effect</code> + <code>dirty</code> flag</li>
<li>ä¾èµ–å˜åŒ–æ—¶æ ‡è®° dirty = true</li>
<li>ä¸‹ä¸€æ¬¡è®¿é—® value æ—¶é‡æ–°è®¡ç®—</li>
<li>å¯ä»¥ç¼“å­˜ï¼Œå‡å°‘é‡å¤è®¡ç®—</li>
</ul>
</li>
<li>
<p><strong>watch</strong></p>
<ul>
<li>ç›´æ¥å¯¹å“åº”å¼æ•°æ®æ³¨å†Œ effect</li>
<li>æ•°æ®å˜åŒ–æ—¶ç«‹å³è§¦å‘å›è°ƒ</li>
<li>å›è°ƒä¸è¿”å›å€¼</li>
<li>å¯é€‰æ‹© flushï¼š<code>pre/post/sync</code> æ§åˆ¶æ‰§è¡Œæ—¶æœº</li>
</ul>
</li>
</ul>
<h2 data-id="heading-3"><strong>computed çš„åŸç†</strong></h2>
<p><code>computed</code> æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª <strong>å¸¦ç¼“å­˜çš„å“åº”å¼å‰¯ä½œç”¨</strong>ï¼š</p>
<ol>
<li>
<p><strong>ä¾èµ–æ”¶é›†</strong></p>
<ul>
<li>å½“è®¿é—® <code>computed.value</code> æ—¶ï¼ŒVue ä¼šè§¦å‘å…¶å†…éƒ¨ <code>effect</code>ï¼Œè¿½è¸ªå®ƒä¾èµ–çš„å“åº”å¼æ•°æ®ï¼ˆref æˆ– reactive å¯¹è±¡ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>æƒ°æ€§æ±‚å€¼ï¼ˆlazyï¼‰</strong></p>
<ul>
<li>åˆæ¬¡è®¿é—®æ—¶æ‰§è¡Œ getterï¼Œç”Ÿæˆå€¼å¹¶ç¼“å­˜</li>
<li>æ ‡è®° <code>dirty = false</code></li>
</ul>
</li>
<li>
<p><strong>ç¼“å­˜æœºåˆ¶</strong></p>
<ul>
<li>å½“ä¾èµ–å˜åŒ–æ—¶ï¼Œå“åº”å¼ç³»ç»Ÿä¼šå°† <code>dirty = true</code></li>
<li>ä¸‹æ¬¡è®¿é—® <code>.value</code> æ—¶é‡æ–°è®¡ç®—å¹¶æ›´æ–°ç¼“å­˜</li>
</ul>
</li>
<li>
<p><strong>ä¸å¯è·å–æ—§å€¼</strong></p>
<ul>
<li>å› ä¸º computed åªå…³æ³¨æœ€æ–°å€¼ï¼Œå†…éƒ¨åªå­˜å½“å‰ç¼“å­˜</li>
</ul>
</li>
</ol>
<p><strong>ç¤ºæ„æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">è®¿é—® computed.value â†’ æ£€æŸ¥ dirty
    â”œâ”€ <span class="hljs-attr">dirty</span> = <span class="hljs-literal">true</span> â†’ æ‰§è¡Œ getter â†’ ç¼“å­˜å€¼ â†’ dirty = <span class="hljs-literal">false</span>
    â””â”€ <span class="hljs-attr">dirty</span> = <span class="hljs-literal">false</span> â†’ ç›´æ¥è¿”å›ç¼“å­˜å€¼
ä¾èµ–å˜åŒ– â†’ effect æ ‡è®° <span class="hljs-attr">dirty</span> = <span class="hljs-literal">true</span>
</code></pre>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span> { ref, computed } from <span class="hljs-string">'vue'</span>

<span class="hljs-type">const</span> count = <span class="hljs-built_in">ref</span>(<span class="hljs-number">1</span>)
<span class="hljs-type">const</span> <span class="hljs-type">double</span> = <span class="hljs-built_in">computed</span>(() =&gt; count.value * <span class="hljs-number">2</span>)

console.<span class="hljs-built_in">log</span>(<span class="hljs-type">double</span>.value) <span class="hljs-comment">// 2</span>
count.value++
console.<span class="hljs-built_in">log</span>(<span class="hljs-type">double</span>.value) <span class="hljs-comment">// 4ï¼Œé‡æ–°è®¡ç®—</span>
</code></pre>
<hr/>
<h2 data-id="heading-4"><strong>2ï¸âƒ£ watch çš„åŸç†</strong></h2>
<p><code>watch</code> æœ¬è´¨æ˜¯ä¸€ä¸ª <strong>å“åº”å¼æ•°æ®çš„è§‚å¯Ÿè€…ï¼ˆWatcherï¼‰</strong> ï¼Œç”¨äºæ‰§è¡Œå‰¯ä½œç”¨ï¼š</p>
<ol>
<li>
<p><strong>æ‰‹åŠ¨ä¾èµ–é€‰æ‹©</strong></p>
<ul>
<li>ä½ ä¼ å…¥è¦ç›‘å¬çš„å“åº”å¼å¯¹è±¡ï¼ˆref / reactive / getterï¼‰</li>
<li>Vue å†…éƒ¨ä¼šå¯¹å…¶æ³¨å†Œ effect</li>
</ul>
</li>
<li>
<p><strong>å“åº”å¼è§¦å‘</strong></p>
<ul>
<li>å½“è¢«ç›‘å¬çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œeffect ä¼šè§¦å‘å›è°ƒå‡½æ•°</li>
</ul>
</li>
<li>
<p><strong>å¯è·å– oldValue / newValue</strong></p>
<ul>
<li>watch åœ¨è§¦å‘æ—¶ä¼šæä¾›æ–°å€¼å’Œæ—§å€¼</li>
</ul>
</li>
<li>
<p><strong>å¼‚æ­¥å¯é€‰</strong></p>
<ul>
<li>é»˜è®¤ flush: 'pre'</li>
<li>å¯ä»¥æŒ‡å®š 'post'ï¼ˆDOM æ›´æ–°åï¼‰æˆ– 'sync'ï¼ˆåŒæ­¥æ‰§è¡Œï¼‰</li>
</ul>
</li>
<li>
<p><strong>æ²¡æœ‰ç¼“å­˜</strong></p>
<ul>
<li>æ¯æ¬¡æ•°æ®å˜åŒ–éƒ½ä¼šè°ƒç”¨å›è°ƒå‡½æ•°</li>
<li>é€‚åˆå‰¯ä½œç”¨é€»è¾‘ï¼Œä¸ç”¨äºçº¯è®¡ç®—</li>
</ul>
</li>
</ol>
<p><strong>ç¤ºæ„æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">watch</span>(reactiveData, callback)
    â””â”€ å†…éƒ¨åˆ›å»º effect
ä¾èµ–å˜åŒ– â†’ è§¦å‘ effect â†’ <span class="hljs-built_in">callback</span>(newValue, oldValue)
</code></pre>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { ref, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1</span>)

<span class="hljs-title function_">watch</span>(count, <span class="hljs-function">(<span class="hljs-params">newVal, oldVal</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`count changed from <span class="hljs-subst">${oldVal}</span> to <span class="hljs-subst">${newVal}</span>`</span>)
})

count.<span class="hljs-property">value</span>++  <span class="hljs-comment">// è§¦å‘ watch å›è°ƒ</span>
</code></pre>
<hr/>
<h2 data-id="heading-5"><strong>3ï¸âƒ£ åŸç†æ€»ç»“å¯¹æ¯”</strong></h2>



































<table><thead><tr><th>ç‰¹æ€§</th><th>computed</th><th>watch</th></tr></thead><tbody><tr><td>å†…éƒ¨æœºåˆ¶</td><td>effect + dirty flag</td><td>effect ç›´æ¥è§¦å‘å›è°ƒ</td></tr><tr><td>è§¦å‘æ—¶æœº</td><td>è®¿é—® <code>.value</code> æ—¶ï¼ˆæ‡’æ‰§è¡Œï¼‰</td><td>æ•°æ®å˜åŒ–æ—¶ç«‹å³è§¦å‘</td></tr><tr><td>ç¼“å­˜</td><td>âœ… ç¼“å­˜ä¸Šæ¬¡è®¡ç®—å€¼</td><td>âŒ ä¸ç¼“å­˜ï¼Œæ¯æ¬¡è§¦å‘å›è°ƒ</td></tr><tr><td>oldValue</td><td>âŒ æ— </td><td>âœ… æœ‰</td></tr><tr><td>ä½¿ç”¨ç›®çš„</td><td>è¡ç”Ÿæ•°æ®è®¡ç®—</td><td>æ‰§è¡Œå‰¯ä½œç”¨ï¼ˆå¼‚æ­¥ã€DOM æ“ä½œç­‰ï¼‰</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 16 é¢˜ï¼šVue3 å“åº”å¼åŸç†æ·±åº¦è§£æï¼ˆProxy + effect æ ˆ + ä¾èµ–è¿½è¸ªï¼‰]]></title>    <link>https://juejin.cn/post/7578811288819482667</link>    <guid>https://juejin.cn/post/7578811288819482667</guid>    <pubDate>2025-12-02T04:34:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578811288819482667" data-draft-id="7578709098256039974" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 16 é¢˜ï¼šVue3 å“åº”å¼åŸç†æ·±åº¦è§£æï¼ˆProxy + effect æ ˆ + ä¾èµ–è¿½è¸ªï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:34:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 16 é¢˜ï¼šVue3 å“åº”å¼åŸç†æ·±åº¦è§£æï¼ˆProxy + effect æ ˆ + ä¾èµ–è¿½è¸ªï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:34:07.000Z" title="Tue Dec 02 2025 04:34:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ç¬¬ 16 é¢˜ï¼šVue3 å“åº”å¼åŸç†æ·±åº¦è§£æï¼ˆProxy + effect æ ˆ + ä¾èµ–è¿½è¸ªï¼‰</strong></h2>
<hr/>
<h2 data-id="heading-1">ğŸ¯ ä¸€ã€æ ¸å¿ƒé—®é¢˜</h2>
<p><strong>é—®ï¼šVue3 å“åº”å¼æ˜¯å¦‚ä½•å®ç°çš„ï¼ŸProxyã€effect æ ˆå’Œä¾èµ–è¿½è¸ªæ˜¯æ€ä¹ˆåä½œçš„ï¼Ÿ</strong></p>
<p>è¿™æ˜¯é«˜é¢‘é¢è¯•æ·±åº¦é¢˜ï¼Œé¢è¯•å®˜ä¸€èˆ¬ä¼šè¿½é—® â€œä¸ºä»€ä¹ˆ Vue3 æ€§èƒ½æ¯” Vue2 å¥½â€ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸ¯ äºŒã€æ ‡å‡†å›ç­”ï¼ˆé¢è¯•å®˜æ»¡æ„ç‰ˆï¼‰</h2>
<ol>
<li>
<p><strong>å“åº”å¼æ ¸å¿ƒæ˜¯ Proxy</strong></p>
<ul>
<li>Vue3 ä¸å†ä½¿ç”¨ definePropertyï¼Œè€Œæ˜¯ä½¿ç”¨ Proxy ä»£ç†å¯¹è±¡</li>
<li>Proxy å¯ä»¥æ‹¦æˆª <code>get</code>ã€<code>set</code>ã€<code>deleteProperty</code> ç­‰æ“ä½œ</li>
<li>æ”¯æŒæ–°å¢å±æ€§ã€æ•°ç»„ä¸‹æ ‡å˜åŒ–ã€åˆ é™¤å±æ€§ç­‰</li>
</ul>
</li>
<li>
<p><strong>ä¾èµ–æ”¶é›†ï¼ˆTrackï¼‰</strong></p>
<ul>
<li>å½“è®¿é—®å“åº”å¼å¯¹è±¡çš„å±æ€§æ—¶ï¼ŒProxy çš„ <code>get</code> ä¼šè¢«è§¦å‘</li>
<li>Vue å†…éƒ¨å°†å½“å‰æ‰§è¡Œçš„ effectï¼ˆå‡½æ•°ï¼‰è®°å½•åˆ° <strong>ä¾èµ–é›†åˆ</strong></li>
<li>è¿™æ ·å½“å±æ€§å˜åŒ–æ—¶ï¼Œå¯ä»¥ç²¾å‡†è§¦å‘ä¾èµ–çš„ effect</li>
</ul>
</li>
<li>
<p><strong>effect æ ˆ</strong></p>
<ul>
<li>Vue3 ç”¨æ ˆç»“æ„ç»´æŠ¤å½“å‰æ¿€æ´»çš„ effect</li>
<li>å½“ä¸€ä¸ª effect æ‰§è¡Œæ—¶ï¼Œpush åˆ°æ ˆé¡¶</li>
<li>åœ¨ <code>get</code> è§¦å‘æ—¶ï¼Œä¾èµ–æ”¶é›†ä½¿ç”¨æ ˆé¡¶ effect</li>
<li>ç»“æŸå pop å‡ºæ ˆ</li>
<li>è§£å†³åµŒå¥— effect çš„ä¾èµ–è¿½è¸ªé—®é¢˜</li>
</ul>
</li>
<li>
<p><strong>è§¦å‘ä¾èµ–ï¼ˆTriggerï¼‰</strong></p>
<ul>
<li>å½“å±æ€§é€šè¿‡ Proxy <code>set</code> æ”¹å˜æ—¶</li>
<li>Vue ä¼šæŸ¥æ‰¾ä¾èµ–é›†åˆï¼Œå¹¶ä¾æ¬¡æ‰§è¡Œ effect</li>
<li>å®ç°ç»„ä»¶é‡æ–°æ¸²æŸ“æˆ– computed æ›´æ–°</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-3">ğŸ¯ ä¸‰ã€ç®€åŒ–æµç¨‹å›¾</h2>
<pre><code class="hljs language-scss" lang="scss">å“åº”å¼å¯¹è±¡è¢«è®¿é—®
       â”‚
       â–¼
Proxy get æ‹¦æˆª
       â”‚
       â–¼
<span class="hljs-built_in">track</span>(effect) æ”¶é›†ä¾èµ–
       â”‚
       â–¼
æ•°æ®å˜åŒ–
       â”‚
       â–¼
Proxy set æ‹¦æˆª
       â”‚
       â–¼
<span class="hljs-built_in">trigger</span>(effect) è§¦å‘ä¾èµ–æ‰§è¡Œ
</code></pre>
<hr/>
<h2 data-id="heading-4">ğŸ¯ å››ã€ç¤ºä¾‹ä»£ç ï¼ˆåŸç†æ¼”ç¤ºï¼‰</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { reactive, effect } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> })

<span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'count ='</span>, state.<span class="hljs-property">count</span>)
})

state.<span class="hljs-property">count</span>++  <span class="hljs-comment">// è‡ªåŠ¨è§¦å‘ effectï¼Œæ‰“å°æœ€æ–°å€¼</span>
</code></pre>
<p><strong>è§£é‡Šï¼š</strong></p>
<ul>
<li><code>reactive</code> åˆ›å»º Proxy</li>
<li><code>effect</code> åŒ…è£¹å›è°ƒå‡½æ•°å¹¶å…¥æ ˆ</li>
<li>è®¿é—® <code>state.count</code> â†’ track æ”¶é›†ä¾èµ–</li>
<li>ä¿®æ”¹ <code>state.count</code> â†’ trigger æ‰§è¡Œ effect</li>
</ul>
<hr/>
<h2 data-id="heading-5">ğŸ¯ äº”ã€é¢è¯•å®˜å¸¸è§è¿½é—®ï¼ˆé«˜é¢‘ï¼‰</h2>
<hr/>
<h3 data-id="heading-6"><strong>è¿½é—® 1ï¼šä¸ºä»€ä¹ˆ Vue3 ä½¿ç”¨ Proxyï¼Œæ¯” Vue2 defineProperty æ€§èƒ½æ›´å¥½ï¼Ÿ</strong></h3>
<ul>
<li>ä¸éœ€è¦é€’å½’éå†æ•´ä¸ªå¯¹è±¡ï¼ˆæƒ°æ€§ä»£ç†ï¼‰</li>
<li>æ”¯æŒæ–°å¢ / åˆ é™¤å±æ€§ã€æ•°ç»„ä¸‹æ ‡</li>
<li>æ›´å°‘å†…å­˜å¼€é”€</li>
<li>ä¾èµ–æ”¶é›†æ›´ç²¾å‡†ï¼Œå‡å°‘æ— æ•ˆæ›´æ–°</li>
</ul>
<hr/>
<h3 data-id="heading-7"><strong>è¿½é—® 2ï¼šeffect æ ˆæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</strong></h3>
<ul>
<li>æ”¯æŒåµŒå¥— effect</li>
<li>é¿å…è¯¯æ”¶é›† effect</li>
<li>ä¿è¯ track æ—¶æ€»æ˜¯æ”¶é›†å½“å‰æ¿€æ´»çš„ effect</li>
</ul>
<hr/>
<h3 data-id="heading-8"><strong>è¿½é—® 3ï¼šä¾èµ–è¿½è¸ªå¦‚ä½•é¿å…é‡å¤æ”¶é›†ï¼Ÿ</strong></h3>
<ul>
<li>æ¯ä¸ªå±æ€§ä¾èµ–ä½¿ç”¨ <strong>Set</strong> ä¿å­˜ effect</li>
<li>åŒä¸€ä¸ª effect ä¸ä¼šé‡å¤åŠ å…¥ä¾èµ–é›†åˆ</li>
</ul>
<hr/>
<h3 data-id="heading-9"><strong>è¿½é—® 4ï¼šcomputed æ˜¯æ€ä¹ˆåˆ©ç”¨ effect æ ˆçš„ï¼Ÿ</strong></h3>
<ul>
<li>computed å†…éƒ¨ä¹Ÿç”¨ effect åŒ…è£¹ getter</li>
<li>effect æ ˆä¿è¯ä¾èµ–æ”¶é›†åœ¨è®¡ç®—æ—¶æœ‰æ•ˆ</li>
<li>ä¾èµ–å˜åŒ–æ—¶ï¼Œcomputed è¢«æ ‡è®° dirtyï¼Œä¸‹æ¬¡è®¿é—®é‡æ–°è®¡ç®—</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>è¿½é—® 5ï¼šå“åº”å¼å¾ªç¯å¼•ç”¨æ€ä¹ˆåŠï¼Ÿ</strong></h3>
<ul>
<li>Vue3 Proxy æœ¬èº«æ”¯æŒå¾ªç¯å¯¹è±¡</li>
<li>æ¯æ¬¡ reactive è°ƒç”¨ä¼š <strong>ç¼“å­˜å·²ä»£ç†å¯¹è±¡</strong></li>
<li>é¿å…é‡å¤ä»£ç†å’Œæ— é™é€’å½’</li>
</ul>
<hr/>
<h2 data-id="heading-11">ğŸ¯ å…­ã€ä¸€å¥è¯æ€»ç»“ï¼ˆé¢è¯•å®˜å¿…èƒŒï¼‰</h2>
<blockquote>
<p>Vue3 å“åº”å¼åŸç†ï¼šé€šè¿‡ Proxy æ‹¦æˆªå¯¹è±¡æ“ä½œ + effect æ ˆç®¡ç†å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡ + track/trigger ç²¾å‡†æ”¶é›†ä¾èµ–ï¼Œå®ç°é«˜æ€§èƒ½ã€å¯ç¼“å­˜ã€å¯åµŒå¥—çš„å“åº”å¼ç³»ç»Ÿã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 18 é¢˜ï¼šVue3 å“åº”å¼åŸç†ä¸­çš„ effectã€ä¾èµ–æ”¶é›†ä¸ä¾èµ–è§¦å‘]]></title>    <link>https://juejin.cn/post/7578818741698428934</link>    <guid>https://juejin.cn/post/7578818741698428934</guid>    <pubDate>2025-12-02T04:34:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578818741698428934" data-draft-id="7578724773993529370" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 18 é¢˜ï¼šVue3 å“åº”å¼åŸç†ä¸­çš„ effectã€ä¾èµ–æ”¶é›†ä¸ä¾èµ–è§¦å‘"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:34:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 18 é¢˜ï¼šVue3 å“åº”å¼åŸç†ä¸­çš„ effectã€ä¾èµ–æ”¶é›†ä¸ä¾èµ–è§¦å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:34:40.000Z" title="Tue Dec 02 2025 04:34:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ç¬¬ 18 é¢˜ï¼šVue3 å“åº”å¼åŸç†ä¸­çš„ effectã€ä¾èµ–æ”¶é›†ä¸ä¾èµ–è§¦å‘</strong></h2>
<hr/>
<h2 data-id="heading-1">ğŸ¯ ä¸€ã€æ ¸å¿ƒé—®é¢˜</h2>
<p><strong>é—®ï¼šVue3 å“åº”å¼ç³»ç»Ÿä¸­ effect æ˜¯ä»€ä¹ˆï¼Ÿä¾èµ–æ˜¯å¦‚ä½•æ”¶é›†å’Œè§¦å‘çš„ï¼Ÿ</strong></p>
<ul>
<li>
<p>é¢è¯•å®˜å¸Œæœ›ä½ ç†è§£ï¼š</p>
<ul>
<li>å“åº”å¼ä¾èµ–æ”¶é›†æœºåˆ¶</li>
<li>effect æ ˆçš„ä½œç”¨</li>
<li>æ•°æ®å˜åŒ–å¦‚ä½•è§¦å‘å¯¹åº”ç»„ä»¶é‡æ–°æ¸²æŸ“</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-2">ğŸ¯ äºŒã€æ ¸å¿ƒæ¦‚å¿µ</h2>
<ol>
<li>
<p><strong>effect</strong></p>
<ul>
<li>æœ¬è´¨æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºåŒ…è£¹ <strong>å‰¯ä½œç”¨</strong>ï¼ˆå¦‚æ¨¡æ¿æ¸²æŸ“å‡½æ•°ã€computed getterï¼‰</li>
<li>å½“ä¾èµ–çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œeffect ä¼šè¢«é‡æ–°æ‰§è¡Œ</li>
</ul>
</li>
<li>
<p><strong>ä¾èµ–æ”¶é›†ï¼ˆtrackï¼‰</strong></p>
<ul>
<li>å½“ effect æ‰§è¡Œè¿‡ç¨‹ä¸­è®¿é—®å“åº”å¼å¯¹è±¡å±æ€§æ—¶</li>
<li>Proxy çš„ <code>get</code> ä¼šè°ƒç”¨ <code>track</code></li>
<li>å°†å½“å‰æ¿€æ´»çš„ effect ä¿å­˜åˆ°è¯¥å±æ€§çš„ä¾èµ–é›†åˆä¸­</li>
</ul>
</li>
<li>
<p><strong>ä¾èµ–è§¦å‘ï¼ˆtriggerï¼‰</strong></p>
<ul>
<li>å½“å±æ€§å˜åŒ–æ—¶ï¼Œé€šè¿‡ Proxy çš„ <code>set</code> è°ƒç”¨ <code>trigger</code></li>
<li>è§¦å‘ä¾èµ–é›†åˆä¸­çš„æ‰€æœ‰ effect æ‰§è¡Œ</li>
<li>æ›´æ–°æ¨¡æ¿ / computed / watch å›è°ƒ</li>
</ul>
</li>
<li>
<p><strong>effect æ ˆ</strong></p>
<ul>
<li>ç”¨æ¥å¤„ç†åµŒå¥— effect</li>
<li>ç¡®ä¿ track æ—¶æ”¶é›†çš„å§‹ç»ˆæ˜¯ <strong>å½“å‰æ¿€æ´»çš„ effect</strong></li>
<li>é¿å…ä¸åŒ effect æ··æ·†ä¾èµ–</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-3">ğŸ¯ ä¸‰ã€æ·±åº¦å›¾è§£ï¼ˆæ–‡å­—ç‰ˆå›¾ï¼‰</h2>
<pre><code class="hljs language-scss" lang="scss">effectStack = <span class="hljs-selector-attr">[]</span>

<span class="hljs-number">1</span>. åˆ›å»º effectï¼š
<span class="hljs-built_in">effect</span>(() =&gt; { console<span class="hljs-selector-class">.log</span>(state.count) })

<span class="hljs-number">2</span>. æ‰§è¡Œ effectï¼š
   â””â”€ push effect åˆ° effectStack
       â”‚
       â–¼
   Proxy get æ‹¦æˆª state<span class="hljs-selector-class">.count</span>
       â”‚
       â–¼
   <span class="hljs-built_in">track</span>(effectStack.top) â†’ ä¿å­˜ä¾èµ–

<span class="hljs-number">3</span>. æ•°æ®å˜åŒ–ï¼š
state<span class="hljs-selector-class">.count</span>++
   â””â”€ Proxy set æ‹¦æˆª
       â”‚
       â–¼
   <span class="hljs-built_in">trigger</span>(state.count.deps) â†’ æ‰§è¡Œä¾èµ–çš„ effect
       â”‚
       â–¼
   effectStack<span class="hljs-selector-class">.top</span> è¢«é‡æ–°æ‰§è¡Œ â†’ DOM / computed æ›´æ–°
</code></pre>
<p><strong>å…³ç³»æ€»ç»“ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">å“åº”å¼å¯¹è±¡ property â†’ <span class="hljs-built_in">Set</span>(effect1, effect2)
effect1 / effect2 â†’ <span class="hljs-built_in">function</span>(callback)
ä¾èµ–å˜åŒ– â†’ trigger â†’ æ‰§è¡Œ effect
</code></pre>
<hr/>
<h2 data-id="heading-4">ğŸ¯ å››ã€ç¤ºä¾‹ä»£ç ï¼ˆæœ€ç®€å•çš„å®ç°æ•ˆæœï¼‰</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { reactive, effect } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> })

<span class="hljs-title function_">effect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'count ='</span>, state.<span class="hljs-property">count</span>)
})

state.<span class="hljs-property">count</span>++  <span class="hljs-comment">// è‡ªåŠ¨è§¦å‘ effect</span>
state.<span class="hljs-property">count</span>++  <span class="hljs-comment">// å†æ¬¡è§¦å‘ effect</span>
</code></pre>
<p><strong>åˆ†æï¼š</strong></p>
<ol>
<li><code>effect</code> æ‰§è¡Œ â†’ push åˆ° effectStack</li>
<li><code>state.count</code> çš„ <code>get</code> è°ƒç”¨ track â†’ æ”¶é›† effect</li>
<li><code>state.count++</code> çš„ <code>set</code> è°ƒç”¨ trigger â†’ æ‰§è¡Œ effect â†’ è¾“å‡ºæœ€æ–°å€¼</li>
</ol>
<hr/>
<h2 data-id="heading-5">ğŸ¯ äº”ã€é¢è¯•å®˜å¸¸è§è¿½é—®</h2>
<hr/>
<h3 data-id="heading-6"><strong>è¿½é—® 1ï¼šeffect æ ˆä¸ºä»€ä¹ˆå¿…è¦ï¼Ÿ</strong></h3>
<ul>
<li>æ”¯æŒåµŒå¥— effect</li>
<li>ç¡®ä¿ track æ—¶æ”¶é›†çš„æ˜¯å½“å‰æ¿€æ´» effect</li>
<li>é¿å… effect A è°ƒç”¨ effect B æ—¶æ··ä¹±æ”¶é›†ä¾èµ–</li>
</ul>
<hr/>
<h3 data-id="heading-7"><strong>è¿½é—® 2ï¼šä¾èµ–æ”¶é›†å¦‚ä½•é¿å…é‡å¤ï¼Ÿ</strong></h3>
<ul>
<li>æ¯ä¸ªå±æ€§ä¾èµ–ä½¿ç”¨ <strong>Set</strong> å­˜å‚¨ effect</li>
<li>åŒä¸€ä¸ª effect å¤šæ¬¡è®¿é—®åŒä¸€å±æ€§åªä¼šæ”¶é›†ä¸€æ¬¡</li>
</ul>
<hr/>
<h3 data-id="heading-8"><strong>è¿½é—® 3ï¼šcomputed å†…éƒ¨å¦‚ä½•åˆ©ç”¨ effectï¼Ÿ</strong></h3>
<ul>
<li>computed getter åŒ…è£¹ effect</li>
<li>effect è¢«æ ‡è®° <code>lazy = true</code></li>
<li>è®¿é—® <code>.value</code> æ—¶è§¦å‘æ‰§è¡Œå¹¶æ”¶é›†ä¾èµ–</li>
<li>ä¾èµ–å˜åŒ– â†’ æ ‡è®° dirty â†’ ä¸‹æ¬¡è®¿é—®é‡æ–°è®¡ç®—</li>
</ul>
<hr/>
<h3 data-id="heading-9"><strong>è¿½é—® 4ï¼šwatch æ˜¯å¦‚ä½•åˆ©ç”¨ä¾èµ–è§¦å‘çš„ï¼Ÿ</strong></h3>
<ul>
<li>watch å†…éƒ¨åˆ›å»º getter effect</li>
<li>ç›‘å¬å“åº”å¼å¯¹è±¡ / getter</li>
<li>æ•°æ®å˜åŒ– â†’ trigger â†’ æ‰§è¡Œå›è°ƒ</li>
<li>å¯è·å–æ–°æ—§å€¼ï¼Œæ‰§è¡Œå¼‚æ­¥å‰¯ä½œç”¨</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>è¿½é—® 5ï¼šä¸ºä»€ä¹ˆ Vue3 å“åº”å¼æ€§èƒ½æ¯” Vue2 é«˜ï¼Ÿ</strong></h3>
<ul>
<li>Proxy ä¸éœ€è¦é€’å½’ defineProperty â†’ èŠ‚çœåˆå§‹åŒ–æ—¶é—´</li>
<li>ä¾èµ–æ”¶é›†ç²¾å‡† â†’ æœ€å°åŒ– effect æ‰§è¡Œ</li>
<li>effect + dirty + PatchFlag â†’ ç²¾å‡†æ›´æ–°</li>
</ul>
<hr/>
<h2 data-id="heading-11">ğŸ¯ å…­ã€ä¸€å¥è¯æ€»ç»“ï¼ˆé¢è¯•å¿…èƒŒï¼‰</h2>
<blockquote>
<p>Vue3 å“åº”å¼é€šè¿‡ Proxy æ‹¦æˆªè®¿é—®ï¼Œeffect æ ˆç®¡ç†å½“å‰æ¿€æ´» effectï¼Œtrack æ”¶é›†ä¾èµ–ï¼Œtrigger è§¦å‘ä¾èµ–æ‰§è¡Œï¼Œå®ç°é«˜æ€§èƒ½ã€ç²¾å‡†å“åº”å¼æ›´æ–°ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 19 é¢˜ï¼šVue3 æ€§èƒ½ä¼˜åŒ–æŠ€å·§]]></title>    <link>https://juejin.cn/post/7578832575503515690</link>    <guid>https://juejin.cn/post/7578832575503515690</guid>    <pubDate>2025-12-02T04:34:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578832575503515690" data-draft-id="7578719771589033994" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 19 é¢˜ï¼šVue3 æ€§èƒ½ä¼˜åŒ–æŠ€å·§"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:34:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 19 é¢˜ï¼šVue3 æ€§èƒ½ä¼˜åŒ–æŠ€å·§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:34:56.000Z" title="Tue Dec 02 2025 04:34:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ç¬¬ 19 é¢˜ï¼šVue3 æ€§èƒ½ä¼˜åŒ–æŠ€å·§</strong></h2>
<hr/>
<h2 data-id="heading-1">ğŸ¯ ä¸€ã€æ ¸å¿ƒé—®é¢˜</h2>
<p><strong>é—®ï¼šåœ¨ Vue3 ä¸­ï¼Œå¦‚ä½•ä¼˜åŒ–æ€§èƒ½ï¼Ÿå°¤å…¶æ˜¯å“åº”å¼ç³»ç»Ÿã€è™šæ‹Ÿ DOMã€é™æ€èŠ‚ç‚¹ã€åˆ—è¡¨æ¸²æŸ“ç­‰æ–¹é¢ã€‚</strong></p>
<ul>
<li>é¢è¯•å®˜è€ƒå¯Ÿä½ å¯¹ Vue3 åŸç†å’Œå®æˆ˜æ€§èƒ½ä¼˜åŒ–çš„ç†è§£</li>
</ul>
<hr/>
<h2 data-id="heading-2">ğŸ¯ äºŒã€ä¼˜åŒ–æ–¹æ³•</h2>
<h3 data-id="heading-3"><strong>1ï¸âƒ£ å“åº”å¼ä¼˜åŒ–</strong></h3>
<ol>
<li>
<p><strong>å‡å°‘ä¸å¿…è¦çš„å“åº”å¼å¯¹è±¡</strong></p>
<ul>
<li><code>reactive</code> ä¼šé€’å½’ä»£ç†å¯¹è±¡ï¼Œé¿å…å¯¹å¤§é‡é™æ€æ•°æ®ä½¿ç”¨ reactive</li>
<li>å¯¹äºé™æ€å¯¹è±¡ï¼Œå¯ç›´æ¥ä½¿ç”¨æ™®é€šå¯¹è±¡æˆ– <code>readonly</code></li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨ <code>shallowReactive</code> / <code>shallowRef</code></strong></p>
<ul>
<li>åªå¯¹æœ€å¤–å±‚åšå“åº”å¼ï¼Œå‡å°‘æ·±å±‚ Proxy å¼€é”€</li>
</ul>
</li>
<li>
<p><strong>é¿å…è¿‡åº¦ç›‘å¬</strong></p>
<ul>
<li>watch / computed åªç›‘å¬å¿…è¦å­—æ®µ</li>
<li>watchEffect è°¨æ…ä½¿ç”¨å¤§å¯¹è±¡</li>
</ul>
</li>
<li>
<p><strong>computed ç¼“å­˜</strong></p>
<ul>
<li>å¯¹è®¡ç®—é‡å¤§çš„é€»è¾‘ä½¿ç”¨ computedï¼Œé¿å…é‡å¤è®¡ç®—</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-4"><strong>2ï¸âƒ£ è™šæ‹Ÿ DOM ä¼˜åŒ–</strong></h3>
<ol>
<li>
<p><strong>PatchFlag</strong></p>
<ul>
<li>ä½¿ç”¨æ¨¡æ¿ç¼–è¯‘ä¼˜åŒ–ï¼ŒVue3 è‡ªåŠ¨ç”Ÿæˆ PatchFlag</li>
<li>å‡å°‘æ— æ•ˆ Diff</li>
</ul>
</li>
<li>
<p><strong>é™æ€èŠ‚ç‚¹æå‡</strong></p>
<ul>
<li>ä¸ä¾èµ–å“åº”å¼æ•°æ®çš„èŠ‚ç‚¹åœ¨ç¼–è¯‘é˜¶æ®µæå‡</li>
<li>é¿å…æ¯æ¬¡æ¸²æŸ“åˆ›å»º VNode</li>
</ul>
</li>
<li>
<p><strong>åˆç†ä½¿ç”¨ key</strong></p>
<ul>
<li>åˆ—è¡¨æ¸²æŸ“ç”¨ key åŒºåˆ†èŠ‚ç‚¹ï¼Œä¼˜åŒ–å¤ç”¨ï¼Œå‡å°‘ DOM ç§»åŠ¨</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-5"><strong>3ï¸âƒ£ åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–</strong></h3>
<ol>
<li>
<p><strong>v-for + key</strong></p>
<ul>
<li>å”¯ä¸€æ ‡è¯†å…ƒç´ ï¼Œæé«˜ Diff å‡†ç¡®æ€§</li>
</ul>
<pre><code class="hljs language-css" lang="css">&lt;<span class="hljs-selector-tag">li</span> v-for="item in list" :key=<span class="hljs-string">"item.id"</span>&gt;{{ item<span class="hljs-selector-class">.name</span> }}&lt;/<span class="hljs-selector-tag">li</span>&gt;
</code></pre>
</li>
<li>
<p><strong>è™šæ‹Ÿæ»šåŠ¨ / æ‡’æ¸²æŸ“</strong></p>
<ul>
<li>å¤§é‡åˆ—è¡¨åªæ¸²æŸ“å¯è§†åŒºåŸŸï¼Œæé«˜æ¸²æŸ“æ€§èƒ½</li>
<li>å¯ä½¿ç”¨ <code>vue-virtual-scroller</code> ç­‰ç»„ä»¶</li>
</ul>
</li>
<li>
<p><strong>é¿å…åµŒå¥— v-for</strong></p>
<ul>
<li>åµŒå¥—å¾ªç¯ä¼šäº§ç”ŸæŒ‡æ•°çº§æ¸²æŸ“å¼€é”€</li>
<li>å¯æ‹†åˆ†ç»„ä»¶ï¼Œå±€éƒ¨æ¸²æŸ“ä¼˜åŒ–</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-6"><strong>4ï¸âƒ£ äº‹ä»¶å’Œç»„ä»¶ä¼˜åŒ–</strong></h3>
<ol>
<li>
<p><strong>v-on / æ–¹æ³•ç»‘å®š</strong></p>
<ul>
<li>é¿å…åœ¨æ¨¡æ¿ä¸­ç›´æ¥å†™å†…è”å‡½æ•°ï¼Œå¯¼è‡´æ¯æ¬¡æ¸²æŸ“ç”Ÿæˆæ–°å‡½æ•°</li>
</ul>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ä¸æ¨è --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"count++"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-comment">&lt;!-- æ¨è --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleClick"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
</li>
<li>
<p><strong>ç»„ä»¶æ‹†åˆ† / æ‡’åŠ è½½</strong></p>
<ul>
<li>ä½¿ç”¨ <code>&lt;Suspense&gt;</code> æˆ–åŠ¨æ€ import æ‡’åŠ è½½å¤§å‹ç»„ä»¶</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">AsyncComponent</span> = <span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./MyComponent.vue'</span>))
</code></pre>
</li>
</ol>
<hr/>
<h2 data-id="heading-7">ğŸ¯ ä¸‰ã€ç»¼åˆç¤ºä¾‹</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in visibleList"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>&gt;</span>{{ item.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> list = <span class="hljs-title function_">ref</span>([...<span class="hljs-title class_">Array</span>(<span class="hljs-number">10000</span>).<span class="hljs-title function_">keys</span>()].<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">i</span> =&gt;</span> ({ <span class="hljs-attr">id</span>: i, <span class="hljs-attr">name</span>: <span class="hljs-string">`Item <span class="hljs-subst">${i}</span>`</span> })))
<span class="hljs-comment">// è™šæ‹Ÿæ»šåŠ¨æˆ–åˆ†é¡µï¼Œä»…æ˜¾ç¤ºéƒ¨åˆ†</span>
<span class="hljs-keyword">const</span> visibleList = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> list.<span class="hljs-property">value</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>))
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<ul>
<li>åªæ¸²æŸ“ 100 æ¡æ•°æ®ï¼Œè€Œä¸æ˜¯å…¨éƒ¨ 10000 æ¡</li>
<li>å‡å°‘ DOM æ•°é‡ â†’ æå‡æ€§èƒ½</li>
</ul>
<hr/>
<h2 data-id="heading-8">ğŸ¯ å››ã€é¢è¯•å®˜å¸¸è§è¿½é—®</h2>
<hr/>
<h3 data-id="heading-9"><strong>è¿½é—® 1ï¼šVue3 å“åº”å¼æ€§èƒ½æ¯” Vue2 å¥½åœ¨å“ªï¼Ÿ</strong></h3>
<ul>
<li>Proxy ä»£æ›¿ defineProperty</li>
<li>æ·±åº¦é€’å½’æƒ°æ€§ä»£ç†ï¼Œé¿å…åˆå§‹åŒ–æˆæœ¬é«˜</li>
<li>ç²¾å‡†ä¾èµ–æ”¶é›†ï¼Œå‡å°‘æ— æ•ˆ effect è§¦å‘</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>è¿½é—® 2ï¼šé™æ€èŠ‚ç‚¹æå‡ä¸ PatchFlag æ€ä¹ˆååŒä¼˜åŒ–ï¼Ÿ</strong></h3>
<ul>
<li>é™æ€èŠ‚ç‚¹ â†’ å‡å°‘ VNode åˆ›å»ºå’Œ Diff</li>
<li>PatchFlag â†’ å‡å°‘åŠ¨æ€èŠ‚ç‚¹ Diff èŒƒå›´</li>
<li>ä¸¤è€…ç»“åˆ â†’ æœ€å¤§åŒ–æ€§èƒ½ä¼˜åŒ–</li>
</ul>
<hr/>
<h3 data-id="heading-11"><strong>è¿½é—® 3ï¼šå¤§é‡åˆ—è¡¨æ¸²æŸ“æ—¶ï¼ŒDiff æ€§èƒ½ç“¶é¢ˆå¦‚ä½•è§£å†³ï¼Ÿ</strong></h3>
<ul>
<li>ä½¿ç”¨ key ä¼˜åŒ–å¤ç”¨</li>
<li>åˆ†é¡µ / è™šæ‹Ÿæ»šåŠ¨å‡å°‘æ¸²æŸ“èŠ‚ç‚¹æ•°é‡</li>
<li>å°½é‡é¿å…åµŒå¥—å¾ªç¯</li>
</ul>
<hr/>
<h3 data-id="heading-12"><strong>è¿½é—® 4ï¼šcomputed å’Œ watch åœ¨æ€§èƒ½ä¼˜åŒ–ä¸Šæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ</strong></h3>
<ul>
<li>computed â†’ ç¼“å­˜è®¡ç®—ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—</li>
<li>watch â†’ ç²¾å‡†ç›‘å¬å˜åŒ–ï¼Œæ‰§è¡Œå‰¯ä½œç”¨ï¼Œä¸è§¦å‘ä¸å¿…è¦æ¸²æŸ“</li>
</ul>
<hr/>
<h3 data-id="heading-13"><strong>è¿½é—® 5ï¼šå“åº”å¼å¯¹è±¡æ·±å±‚æ¬¡ä¿®æ”¹ä¼šå½±å“æ€§èƒ½å—ï¼Ÿ</strong></h3>
<ul>
<li>æ·±å±‚ reactive ä¼šå¯¹æ¯å±‚å¯¹è±¡é€’å½’ä»£ç†</li>
<li>å¯¹å¤§å¯¹è±¡æˆ–æ•°ç»„ï¼Œå»ºè®®ä½¿ç”¨ shallowReactive / shallowRef æˆ–åªä»£ç†å¿…è¦å±‚çº§</li>
</ul>
<hr/>
<h2 data-id="heading-14">ğŸ¯ äº”ã€ä¸€å¥è¯æ€»ç»“ï¼ˆé¢è¯•å¿…èƒŒï¼‰</h2>
<blockquote>
<p>Vue3 æ€§èƒ½ä¼˜åŒ–æ ¸å¿ƒï¼šç²¾å‡†å“åº”å¼ï¼ˆProxy + computed ç¼“å­˜ï¼‰ã€è™šæ‹Ÿ DOM PatchFlag + é™æ€èŠ‚ç‚¹æå‡ã€åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–ï¼ˆv-for + key + è™šæ‹Ÿæ»šåŠ¨ï¼‰ï¼Œç»“åˆç»„ä»¶æ‹†åˆ†ä¸æ‡’åŠ è½½ï¼Œå®ç°é«˜æ•ˆæ¸²æŸ“ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 17 é¢˜ï¼šVue3 è™šæ‹Ÿ DOM ä¸ PatchFlag åŸç† + é™æ€èŠ‚ç‚¹æå‡]]></title>    <link>https://juejin.cn/post/7578830345870098473</link>    <guid>https://juejin.cn/post/7578830345870098473</guid>    <pubDate>2025-12-02T04:34:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578830345870098473" data-draft-id="7578732288515751987" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 17 é¢˜ï¼šVue3 è™šæ‹Ÿ DOM ä¸ PatchFlag åŸç† + é™æ€èŠ‚ç‚¹æå‡"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:34:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 17 é¢˜ï¼šVue3 è™šæ‹Ÿ DOM ä¸ PatchFlag åŸç† + é™æ€èŠ‚ç‚¹æå‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:34:24.000Z" title="Tue Dec 02 2025 04:34:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ç¬¬ 17 é¢˜ï¼šVue3 è™šæ‹Ÿ DOM ä¸ PatchFlag åŸç† + é™æ€èŠ‚ç‚¹æå‡</strong></h2>
<hr/>
<h2 data-id="heading-1">ğŸ¯ ä¸€ã€æ ¸å¿ƒé—®é¢˜</h2>
<p><strong>é—®ï¼šVue3 ä¸­è™šæ‹Ÿ DOM æ˜¯å¦‚ä½•ä¼˜åŒ–æ€§èƒ½çš„ï¼ŸPatchFlag å’Œé™æ€èŠ‚ç‚¹æå‡çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>è¿™æ˜¯é¢è¯•å®˜éå¸¸å–œæ¬¢é—®çš„é«˜çº§é¢˜ï¼Œå°¤å…¶è€ƒå¯Ÿå¯¹ Vue3 ç¼–è¯‘å™¨ä¼˜åŒ–çš„ç†è§£ã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸ¯ äºŒã€æ ‡å‡†å›ç­”ï¼ˆé¢è¯•å®˜æ»¡æ„ç‰ˆï¼‰</h2>
<ol>
<li>
<p><strong>è™šæ‹Ÿ DOM æœ¬è´¨</strong></p>
<ul>
<li>Vue3 å°†æ¨¡æ¿ç¼–è¯‘æˆ <strong>VNodeï¼ˆè™šæ‹ŸèŠ‚ç‚¹ï¼‰</strong></li>
<li>æ¯æ¬¡å“åº”å¼æ•°æ®å˜åŒ–æ—¶ï¼Œç”Ÿæˆæ–°çš„ VNode</li>
<li>å¯¹æ¯”æ—§ VNode â†’ é€šè¿‡ Diff ç®—æ³•æœ€å°åŒ–çœŸå® DOM æ›´æ–°</li>
</ul>
</li>
<li>
<p><strong>PatchFlagï¼ˆç¼–è¯‘æ ‡è®°ï¼‰</strong></p>
<ul>
<li>
<p>åœ¨ç¼–è¯‘é˜¶æ®µï¼Œä¸º VNode æ·»åŠ  <strong>æ ‡è®°å­—æ®µ</strong>ï¼Œæ ‡è¯†èŠ‚ç‚¹å˜åŒ–ç±»å‹</p>
</li>
<li>
<p>ä½œç”¨ï¼š</p>
<ul>
<li>å‘Šè¯‰æ¸²æŸ“å™¨å“ªäº›å±æ€§å¯èƒ½å˜åŒ–</li>
<li>é¿å…å¯¹ä¸å˜çš„èŠ‚ç‚¹é‡å¤ diff</li>
</ul>
</li>
<li>
<p>å…¸å‹æ ‡è®°ï¼š</p>
<ul>
<li><code>TEXT</code> â†’ æ–‡æœ¬å˜åŒ–</li>
<li><code>CLASS</code> â†’ class å˜åŒ–</li>
<li><code>STYLE</code> â†’ style å˜åŒ–</li>
<li><code>PROPS</code> â†’ æ™®é€š props å˜åŒ–</li>
<li><code>FULL_PROPS</code> â†’ æ‰€æœ‰ props éƒ½å¯èƒ½å˜åŒ–</li>
<li><code>HYDRATE_EVENTS</code> â†’ äº‹ä»¶å˜åŒ–</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>é™æ€èŠ‚ç‚¹æå‡ï¼ˆHoist Staticï¼‰</strong></p>
<ul>
<li>ç¼–è¯‘å™¨æŠŠæ¨¡æ¿ä¸­ <strong>ä¸ä¾èµ–å“åº”å¼æ•°æ®çš„èŠ‚ç‚¹</strong> æå‰ç”Ÿæˆ VNode</li>
<li>æ¸²æŸ“æ—¶ç›´æ¥å¤ç”¨ï¼Œä¸éœ€è¦æ¯æ¬¡é‡æ–°åˆ›å»º</li>
<li>èŠ‚çº¦å†…å­˜å’Œè®¡ç®—ï¼Œå‡å°‘ Diff</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-3">ğŸ¯ ä¸‰ã€å·¥ä½œæµç¨‹ç¤ºæ„</h2>
<pre><code class="hljs language-markdown" lang="markdown">æ¨¡æ¿ â†’ ç¼–è¯‘å™¨ â†’ VNode + PatchFlag + é™æ€æå‡
å“åº”å¼æ•°æ®å˜åŒ– â†’ ç”Ÿæˆæ–° VNode
<span class="hljs-code">     â”‚
     â–¼
Diff + Patch
     â”‚
     â–¼
ä»…æ›´æ–°å˜åŒ–çš„èŠ‚ç‚¹/å±æ€§
</span></code></pre>
<hr/>
<h2 data-id="heading-4">ğŸ¯ å››ã€ä»£ç ç¤ºä¾‹ï¼ˆç¼–è¯‘å™¨ä¼˜åŒ–æ•ˆæœï¼‰</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>       <span class="hljs-comment">&lt;!-- åŠ¨æ€å†…å®¹ â†’ TEXT PatchFlag --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"desc"</span>&gt;</span>é™æ€æè¿°<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>  <span class="hljs-comment">&lt;!-- é™æ€èŠ‚ç‚¹ â†’ Hoist Static --&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<ul>
<li><code>&lt;h1&gt;</code> ä¼šæ¯æ¬¡å“åº”å¼æ•°æ®å˜åŒ–æ—¶ diff</li>
<li><code>&lt;p&gt;</code> è¢«æå‡ä¸º <strong>é™æ€èŠ‚ç‚¹</strong>ï¼Œä¸ä¼šé‡å¤åˆ›å»ºæˆ–æ¯”è¾ƒ</li>
</ul>
<p>å¦‚æœç”¨ Vue3 ç¼–è¯‘è¾“å‡º VNodeï¼Œä¼šç”Ÿæˆç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">const</span> _hoisted_1 = <span class="hljs-comment">/*#__PURE__*/</span>createVNode(<span class="hljs-string">"p"</span>, { <span class="hljs-keyword">class</span>: <span class="hljs-string">"desc"</span> }, <span class="hljs-string">"é™æ€æè¿°"</span>)
...
createVNode(<span class="hljs-string">"div"</span>, <span class="hljs-literal">null</span>, [
  createVNode(<span class="hljs-string">"h1"</span>, <span class="hljs-literal">null</span>, toDisplayString(title), <span class="hljs-number">1</span> <span class="hljs-comment">/* TEXT */</span>),
  _hoisted_1
])
</code></pre>
<hr/>
<h2 data-id="heading-5">ğŸ¯ äº”ã€é¢è¯•å®˜å¸¸è§è¿½é—®ï¼ˆé«˜é¢‘ï¼‰</h2>
<hr/>
<h3 data-id="heading-6"><strong>è¿½é—® 1ï¼šPatchFlag ä¸ºä»€ä¹ˆæ¯” Vue2 æ€§èƒ½é«˜ï¼Ÿ</strong></h3>
<ul>
<li>Vue2 diff æ¯æ¬¡éƒ½ä¼šæ¯”è¾ƒæ•´ä¸ª VNode æ ‘</li>
<li>Vue3 PatchFlag æå‰å‘Šè¯‰æ¸²æŸ“å™¨å“ªäº›å±æ€§å¯èƒ½å˜åŒ–</li>
<li>é¿å…äº†å¤§é‡æ— ç”¨æ¯”è¾ƒ â†’ å¤§å¹…å‡å°‘ diff è®¡ç®—</li>
</ul>
<hr/>
<h3 data-id="heading-7"><strong>è¿½é—® 2ï¼šé™æ€èŠ‚ç‚¹æå‡æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ</strong></h3>
<ul>
<li>é™æ€èŠ‚ç‚¹åªåˆ›å»ºä¸€æ¬¡</li>
<li>ä¸å‚ä¸æ¯æ¬¡æ¸²æŸ“çš„ Diff</li>
<li>èŠ‚çœå†…å­˜åˆ†é… + CPU æ—¶é—´</li>
<li>ç‰¹åˆ«é€‚åˆå¤§æ¨¡æ¿æˆ–åˆ—è¡¨çš„é™æ€å†…å®¹</li>
</ul>
<hr/>
<h3 data-id="heading-8"><strong>è¿½é—® 3ï¼šPatchFlag å’Œ key çš„å…³ç³»ï¼Ÿ</strong></h3>
<ul>
<li>
<p>PatchFlag ç”¨äºæ ‡è®°èŠ‚ç‚¹å†…éƒ¨å˜åŒ–ç±»å‹</p>
</li>
<li>
<p>key ç”¨äº <strong>åˆ—è¡¨èŠ‚ç‚¹å¿«é€Ÿå®šä½å˜åŒ–</strong></p>
</li>
<li>
<p>ç»“åˆä½¿ç”¨ï¼š</p>
<ul>
<li>PatchFlag ä¼˜åŒ–å•èŠ‚ç‚¹å±æ€§æ›´æ–°</li>
<li>key ä¼˜åŒ–åˆ—è¡¨çš„é‡æ–°æ’åºå’Œå¤ç”¨</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-9"><strong>è¿½é—® 4ï¼šå¦‚ä½•åœ¨å¼€å‘ä¸­æŸ¥çœ‹ PatchFlagï¼Ÿ</strong></h3>
<ul>
<li>ç¼–è¯‘æ—¶è¾“å‡º <code>__DEV__</code> æ¨¡å¼ä¸‹ VNode</li>
<li>Vue3 ç¼–è¯‘å™¨ä¼šåœ¨ VNode å¯¹è±¡ä¸­æ˜¾ç¤º PatchFlag</li>
<li>ä¹Ÿå¯ä»¥ç”¨ <code>vue-next</code> çš„æºç åˆ†æ</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>è¿½é—® 5ï¼šPatchFlag æœ‰å“ªäº›é™åˆ¶ï¼Ÿ</strong></h3>
<ul>
<li>ä»…å¯¹æ¨¡æ¿ç¼–è¯‘ç”Ÿæˆ VNode ç”Ÿæ•ˆ</li>
<li>æ‰‹å†™ render å‡½æ•°éœ€è¦æ‰‹åŠ¨ä¼˜åŒ–</li>
<li>å¯¹å¤æ‚åŠ¨æ€ç»“æ„ï¼ŒPatchFlag æ— æ³•è¦†ç›–å…¨éƒ¨å˜åŒ–ï¼Œéœ€è¦é…åˆ key å’Œåˆ—è¡¨ diff</li>
</ul>
<hr/>
<h2 data-id="heading-11">ğŸ¯ å…­ã€ä¸€å¥è¯æ€»ç»“ï¼ˆèƒŒé¢è¯•å®˜å³å¯ï¼‰</h2>
<blockquote>
<p>Vue3 é€šè¿‡ PatchFlag æ ‡è®°èŠ‚ç‚¹å˜åŒ–ç±»å‹å’Œé™æ€èŠ‚ç‚¹æå‡ï¼Œå‡å°‘ä¸å¿…è¦çš„ Diff å’Œ VNode åˆ›å»ºï¼Œä»è€Œæ˜¾è‘—æå‡æ¸²æŸ“æ€§èƒ½ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 20 é¢˜ï¼šVue3 ç”Ÿå‘½å‘¨æœŸ + watch æ‰§è¡Œé¡ºåº]]></title>    <link>https://juejin.cn/post/7578830345870114857</link>    <guid>https://juejin.cn/post/7578830345870114857</guid>    <pubDate>2025-12-02T04:35:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578830345870114857" data-draft-id="7578719771589050378" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 20 é¢˜ï¼šVue3 ç”Ÿå‘½å‘¨æœŸ + watch æ‰§è¡Œé¡ºåº"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-02T04:35:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¸€è¯¾"/> <meta itemprop="url" content="https://juejin.cn/user/1169536102963917"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€vueé«˜é¢‘é¢è¯•é¢˜ã€‘ç¬¬ 20 é¢˜ï¼šVue3 ç”Ÿå‘½å‘¨æœŸ + watch æ‰§è¡Œé¡ºåº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1169536102963917/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¸€è¯¾
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T04:35:14.000Z" title="Tue Dec 02 2025 04:35:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ç¬¬ 20 é¢˜ï¼šVue3 ç”Ÿå‘½å‘¨æœŸ + watch æ‰§è¡Œé¡ºåº</strong></h2>
<hr/>
<h2 data-id="heading-1">ğŸ¯ ä¸€ã€æ ¸å¿ƒé—®é¢˜</h2>
<p><strong>é—®ï¼šVue3 ä¸­ç”Ÿå‘½å‘¨æœŸå‡½æ•°çš„æ‰§è¡Œé¡ºåºæ˜¯æ€æ ·çš„ï¼Ÿwatch / onMounted / onBeforeUnmount å¦‚ä½•é…åˆä½¿ç”¨ï¼Ÿ</strong></p>
<ul>
<li>
<p>é¢è¯•å®˜é‡ç‚¹è€ƒå¯Ÿï¼š</p>
<ul>
<li>ç”Ÿå‘½å‘¨æœŸé¡ºåº</li>
<li>watch æ‰§è¡Œæ—¶æœº</li>
<li>å“åº”å¼æ›´æ–°ä¸ç”Ÿå‘½å‘¨æœŸçš„å…³ç³»</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-2">ğŸ¯ äºŒã€Vue3 ç”Ÿå‘½å‘¨æœŸé¡ºåºï¼ˆç»„åˆå¼ APIï¼‰</h2>
<ol>
<li>
<p><strong>setup() æ‰§è¡Œ</strong></p>
<ul>
<li>åˆå§‹åŒ– propsã€stateã€refã€computedã€watch</li>
<li>å¯ä»¥åœ¨ setup ä¸­æ³¨å†Œç”Ÿå‘½å‘¨æœŸå‡½æ•°</li>
</ul>
</li>
<li>
<p><strong>onBeforeMount</strong></p>
<ul>
<li>ç»„ä»¶æŒ‚è½½å‰è§¦å‘</li>
<li>è¿˜æœªæ¸²æŸ“åˆ° DOM</li>
</ul>
</li>
<li>
<p><strong>onMounted</strong></p>
<ul>
<li>ç»„ä»¶æŒ‚è½½å®Œæˆï¼ŒDOM å·²æ¸²æŸ“</li>
<li>å¯ä»¥æ“ä½œçœŸå® DOM</li>
</ul>
</li>
<li>
<p><strong>å“åº”å¼æ•°æ®å˜åŒ–è§¦å‘ watch</strong></p>
<ul>
<li>å¦‚æœ watch åœ¨ setup ä¸­æ³¨å†Œ</li>
<li>flush é»˜è®¤æ˜¯ <code>'pre'</code>ï¼Œåœ¨ DOM æ›´æ–°å‰æ‰§è¡Œ</li>
<li>flush: <code>'post'</code> â†’ åœ¨ DOM æ›´æ–°åæ‰§è¡Œ</li>
</ul>
</li>
<li>
<p><strong>onBeforeUnmount</strong></p>
<ul>
<li>ç»„ä»¶å¸è½½å‰è§¦å‘</li>
<li>å¯æ¸…ç†å®šæ—¶å™¨ã€äº‹ä»¶ç›‘å¬ç­‰</li>
</ul>
</li>
<li>
<p><strong>onUnmounted</strong></p>
<ul>
<li>ç»„ä»¶å·²å¸è½½</li>
<li>DOM å·²é”€æ¯</li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-3">ğŸ¯ ä¸‰ã€æ‰§è¡Œé¡ºåºå›¾ç¤º</h2>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">setup</span>()         â† åˆå§‹åŒ– state / computed / watch
  â”‚
<span class="hljs-built_in">onBeforeMount</span>() â† æŒ‚è½½å‰
  â”‚
DOM æ¸²æŸ“
  â”‚
<span class="hljs-built_in">onMounted</span>()     â† æŒ‚è½½å®Œæˆï¼Œå¯æ“ä½œçœŸå® DOM
  â”‚
å“åº”å¼æ•°æ®å˜åŒ–
  â”‚
<span class="hljs-built_in">watch</span>()         â† flush: pre/post/sync æ‰§è¡Œ
  â”‚
ç”¨æˆ·æ“ä½œ / å¸è½½ç»„ä»¶
  â”‚
<span class="hljs-built_in">onBeforeUnmount</span>()
  â”‚
<span class="hljs-built_in">onUnmounted</span>()
</code></pre>
<hr/>
<h2 data-id="heading-4">ğŸ¯ å››ã€ä»£ç ç¤ºä¾‹</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, watch, onMounted, onBeforeUnmount } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)

<span class="hljs-title function_">watch</span>(count, <span class="hljs-function">(<span class="hljs-params">newVal</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'watch count:'</span>, newVal)
}, { <span class="hljs-attr">flush</span>: <span class="hljs-string">'post'</span> })

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'mounted'</span>)
})

<span class="hljs-title function_">onBeforeUnmount</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'beforeUnmount'</span>)
})

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> count.<span class="hljs-property">value</span>++, <span class="hljs-number">1000</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><strong>è¾“å‡ºé¡ºåº</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">mounted</span>
<span class="hljs-attr">watch count:</span> <span class="hljs-number">1</span>   <span class="hljs-string">â†</span> <span class="hljs-attr">flush:</span> <span class="hljs-string">postï¼ŒDOM</span> <span class="hljs-string">å·²æ›´æ–°</span>
<span class="hljs-string">beforeUnmount</span>     <span class="hljs-string">â†</span> <span class="hljs-string">å¸è½½ç»„ä»¶æ—¶</span>
</code></pre>
<hr/>
<h2 data-id="heading-5">ğŸ¯ äº”ã€é¢è¯•å®˜å¸¸è§è¿½é—®</h2>
<hr/>
<h3 data-id="heading-6"><strong>è¿½é—® 1ï¼šwatch flush å‚æ•°å«ä¹‰ï¼Ÿ</strong></h3>
<ul>
<li><code>'pre'</code>ï¼ˆé»˜è®¤ï¼‰ â†’ åœ¨ DOM æ›´æ–°å‰æ‰§è¡Œ</li>
<li><code>'post'</code> â†’ åœ¨ DOM æ›´æ–°åæ‰§è¡Œ</li>
<li><code>'sync'</code> â†’ åŒæ­¥æ‰§è¡Œï¼Œç«‹å³è§¦å‘</li>
</ul>
<hr/>
<h3 data-id="heading-7"><strong>è¿½é—® 2ï¼šsetup å†… watch å’Œç”Ÿå‘½å‘¨æœŸæ‰§è¡Œé¡ºåºï¼Ÿ</strong></h3>
<ul>
<li>setup å…ˆæ‰§è¡Œ</li>
<li>ç”Ÿå‘½å‘¨æœŸæ³¨å†Œåœ¨ setup åï¼Œä½†ä¼šåœ¨æŒ‚è½½é˜¶æ®µä¾æ¬¡è§¦å‘</li>
<li>watch flush <code>'pre'</code> åœ¨ onMounted å‰å¯èƒ½æ‰§è¡Œä¸€æ¬¡ï¼ˆç¬¬ä¸€æ¬¡è®¿é—®ä¾èµ–ä¼šç«‹å³è§¦å‘ï¼‰</li>
</ul>
<hr/>
<h3 data-id="heading-8"><strong>è¿½é—® 3ï¼šonMounted ä¸­å¯ä»¥è®¿é—® DOM å—ï¼Ÿ</strong></h3>
<ul>
<li>âœ… å¯ä»¥</li>
<li>å› ä¸ºç»„ä»¶å·²ç»æŒ‚è½½å®Œæˆ</li>
<li>åœ¨ setup æˆ– onBeforeMount ä¸­è®¿é—® DOM æ˜¯ null</li>
</ul>
<hr/>
<h3 data-id="heading-9"><strong>è¿½é—® 4ï¼šonBeforeUnmount ä¸ watch æ¸…ç†æœ‰å…³ç³»å—ï¼Ÿ</strong></h3>
<ul>
<li>watch å¯è¿”å› <strong>stop å‡½æ•°</strong></li>
<li>åœ¨ onBeforeUnmount ä¸­è°ƒç”¨ stop() å¯æ‰‹åŠ¨åœæ­¢ watch</li>
<li>é¿å…ç»„ä»¶å¸è½½åå‰¯ä½œç”¨ä»ç„¶è§¦å‘</li>
</ul>
<hr/>
<h2 data-id="heading-10">ğŸ¯ å…­ã€ä¸€å¥è¯æ€»ç»“</h2>
<blockquote>
<p>Vue3 ç”Ÿå‘½å‘¨æœŸé¡ºåºï¼š<code>setup â†’ onBeforeMount â†’ onMounted â†’ å“åº”å¼ watch â†’ onBeforeUnmount â†’ onUnmounted</code>ï¼›watch flush å†³å®šå“åº”å¼å›è°ƒæ‰§è¡Œæ—¶æœºï¼Œå¯ç²¾ç¡®æ§åˆ¶ DOM æ›´æ–°å‰åã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[web3é’±åŒ…Demo]]></title>    <link>https://juejin.cn/post/7578793960626634778</link>    <guid>https://juejin.cn/post/7578793960626634778</guid>    <pubDate>2025-12-02T03:01:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578793960626634778" data-draft-id="7578392771921788934" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="web3é’±åŒ…Demo"/> <meta itemprop="keywords" content="web3"/> <meta itemprop="datePublished" content="2025-12-02T03:01:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆé•¿i"/> <meta itemprop="url" content="https://juejin.cn/user/465848663030424"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            web3é’±åŒ…Demo
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848663030424/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆé•¿i
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:01:58.000Z" title="Tue Dec 02 2025 03:01:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸ºäº†åŠ æ·±è‡ªå·±ç†è§£ç‰¹å†™ä¸€ç¯‡åŸºäºä¸ªäººç°æœ‰ç†è§£ç¼–å†™çš„3.0é’±åŒ…å°Demoï¼Œå¹¶ä¸”æ¯ä¸€è¡Œå…³é”®ä»£ç éƒ½åŠ æ³¨é‡Šï¼Œè®°å½•ä¸€ä¸‹ã€‚
giuhubåœ°å€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjingkais%2Fweb3walletdemo" target="_blank" title="https://github.com/jingkais/web3walletdemo" ref="nofollow noopener noreferrer">github.com/jingkais/weâ€¦</a></p>
<h2 data-id="heading-0">é¡¹ç›®ç›®å½•</h2>
<pre><code class="hljs language-scss" lang="scss">com<span class="hljs-selector-class">.learn</span><span class="hljs-selector-class">.web3walletdemo</span>/
â”œâ”€â”€ fragment/
â”‚   â”œâ”€â”€ BackupPrivateKeyFragment          (å¤‡ä»½ç§é’¥)
â”‚   â”œâ”€â”€ CreateWalletFragment              (åˆ›å»ºé’±åŒ…é¡µé¢)
â”‚   â”œâ”€â”€ DAppFragment                      (Dappæµè§ˆå™¨ç•Œé¢) å¾…å¼€å‘
â”‚   â”œâ”€â”€ ImportMnemonicFragment            (å¯¼å…¥åŠ©è®°è¯)
â”‚   â”œâ”€â”€ ImportPrivateKeyFragment          (å¯¼å…¥ç§é’¥)
â”‚   â”œâ”€â”€ SettingsFragment                 ï¼ˆè®¾ç½®ï¼‰å¾…å¼€å‘
â”‚   â”œâ”€â”€ TransactionFragment              ï¼ˆäº¤æ˜“ç•Œé¢ï¼‰ å¾…å¼€å‘
â”‚   â””â”€â”€ WalletFragment                   ï¼ˆé’±åŒ…ä¸»ç•Œé¢ï¼‰
â”œâ”€â”€ model/
â”‚   â”œâ”€â”€ GasInfo
â”‚   â”œâ”€â”€ NetworkInfo
â”‚   â”œâ”€â”€ Transaction<span class="hljs-selector-class">.kt</span>
â”‚   â””â”€â”€ Wallet
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ AndroidCryptoHelper   ï¼ˆAndroidåŠ å¯†è¾…åŠ©å·¥å…· - æä¾›åœ¨ä¸åŒAndroidç‰ˆæœ¬ä¸Šå®‰å…¨ç”Ÿæˆå¯†é’¥å¯¹çš„æ–¹æ³•ï¼‰
â”‚   â”œâ”€â”€ SecurityManager  ï¼ˆå®‰å…¨ç®¡ç†å™¨ - å¤„ç†æ•æ„Ÿæ•°æ®çš„åŠ å¯†å­˜å‚¨å’Œæ£€ç´¢ã€ä½¿ç”¨Android Keystoreç³»ç»Ÿä¿æŠ¤åŠ å¯†å¯†é’¥ï¼‰
â”‚   â””â”€â”€ Web3Service<span class="hljs-selector-class">.kt</span>
â””â”€â”€ MainActivity ä¸»ç•Œé¢   ï¼ˆåˆ›å»ºé’±åŒ…ï¼‰
</code></pre>
<h4 data-id="heading-1">æ€»ä½“ä»‹ç»</h4>
<p>ä»¥ä¸‹æ˜¯è¯¥Demoç›®å‰å®ç°çš„åŠŸèƒ½ï¼š</p>
<ul>
<li>é’±åŒ…ä¸»ç•Œé¢</li>
<li>å¯¼å…¥ç§é’¥ç•Œé¢</li>
<li>å¯¼å…¥åŠ©è®°è¯ç•Œé¢</li>
<li>åˆ›å»ºé’±åŒ…ç•Œé¢</li>
<li>å¤‡ä»½ç§é’¥ç•Œé¢</li>
</ul>
<p>å¾…å¼€å‘åŠŸèƒ½ï¼š</p>
<ul>
<li>äº¤æ˜“ç•Œé¢</li>
<li>è®¾ç½®</li>
<li>DAppæµè§ˆå™¨ç•Œé¢</li>
<li>...</li>
</ul>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> binding: ActivityMainBinding
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> securityManager: SecurityManager

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)

        binding = ActivityMainBinding.inflate(layoutInflater)
        setContentView(binding.root)

        securityManager = SecurityManager(<span class="hljs-keyword">this</span>)

        setupBottomNavigation()
        checkWalletExists()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setupBottomNavigation</span><span class="hljs-params">()</span></span> {
        binding.bottomNavigation.setOnNavigationItemSelectedListener { item -&gt;
            <span class="hljs-keyword">when</span> (item.itemId) {
                R.id.nav_wallet -&gt; {
                    replaceFragment(WalletFragment())
                    <span class="hljs-literal">true</span>
                }
                R.id.nav_transaction -&gt; {
                    replaceFragment(TransactionFragment())
                    <span class="hljs-literal">true</span>
                }
                R.id.nav_dapp -&gt; {
                    replaceFragment(DAppFragment())
                    <span class="hljs-literal">true</span>
                }
                R.id.nav_settings -&gt; {
                    replaceFragment(SettingsFragment())
                    <span class="hljs-literal">true</span>
                }
                <span class="hljs-keyword">else</span> -&gt; <span class="hljs-literal">false</span>
            }
        }

        <span class="hljs-keyword">if</span> (securityManager.hasWallets()) {
            replaceFragment(WalletFragment())
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">checkWalletExists</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">if</span> (!securityManager.hasWallets()) {
            replaceFragment(CreateWalletFragment())
            binding.bottomNavigation.visibility = View.GONE
        } <span class="hljs-keyword">else</span> {
            binding.bottomNavigation.visibility = View.VISIBLE
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">replaceFragment</span><span class="hljs-params">(fragment: <span class="hljs-type">androidx</span>.<span class="hljs-type">fragment</span>.<span class="hljs-type">app</span>.<span class="hljs-type">Fragment</span>)</span></span> {
        supportFragmentManager.beginTransaction()
            .replace(R.id.fragment_container, fragment)
            .commit()
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showBottomNavigation</span><span class="hljs-params">()</span></span> {
        binding.bottomNavigation.visibility = View.VISIBLE
    }

    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">hideBottomNavigation</span><span class="hljs-params">()</span></span> {
        binding.bottomNavigation.visibility = View.GONE
    }
}
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Web3Service</span> {

    companion object {
        <span class="hljs-comment">// å¤šä¸ªå¯é çš„å…¬å…± RPC èŠ‚ç‚¹ï¼ˆè‡ªåŠ¨æ•…éšœè½¬ç§»ï¼‰</span>
        private val <span class="hljs-variable constant_">SEPOLIA_NODES</span> = <span class="hljs-title function_">listOf</span>(
            <span class="hljs-string">"https://ethereum-sepolia-rpc.publicnode.com"</span>,  <span class="hljs-comment">// å…¬å…±èŠ‚ç‚¹ï¼Œæ— éœ€APIå¯†é’¥</span>
            <span class="hljs-string">"https://rpc.sepolia.org"</span>,                      <span class="hljs-comment">// Sepoliaå®˜æ–¹RPC</span>
            <span class="hljs-string">"https://sepolia.drpc.org"</span>,                     <span class="hljs-comment">// å¤‡ç”¨RPCèŠ‚ç‚¹</span>
            <span class="hljs-string">"https://rpc2.sepolia.org"</span>                      <span class="hljs-comment">// å¦ä¸€ä¸ªå¤‡ç”¨èŠ‚ç‚¹</span>
        )

        private val <span class="hljs-variable constant_">MAINNET_NODES</span> = <span class="hljs-title function_">listOf</span>(
            <span class="hljs-string">"https://eth.llamarpc.com"</span>,                     <span class="hljs-comment">// ä¸»ç½‘å…¬å…±èŠ‚ç‚¹</span>
            <span class="hljs-string">"https://rpc.ankr.com/eth"</span>,                     <span class="hljs-comment">// Ankræä¾›çš„èŠ‚ç‚¹</span>
            <span class="hljs-string">"https://ethereum.publicnode.com"</span>               <span class="hljs-comment">// ä»¥å¤ªåŠå…¬å…±èŠ‚ç‚¹</span>
        )

        <span class="hljs-comment">// åŒºå—é“¾ç½‘ç»œIDå®šä¹‰</span>
        <span class="hljs-keyword">const</span> val <span class="hljs-variable constant_">SEPOLIA_CHAIN_ID</span> = 11155111L              <span class="hljs-comment">// Sepoliaæµ‹è¯•ç½‘é“¾ID</span>
        <span class="hljs-keyword">const</span> val <span class="hljs-variable constant_">MAINNET_CHAIN_ID</span> = 1L                     <span class="hljs-comment">// ä»¥å¤ªåŠä¸»ç½‘é“¾ID</span>
    }

    <span class="hljs-comment">// å½“å‰ä½¿ç”¨çš„RPCèŠ‚ç‚¹URL</span>
    private <span class="hljs-keyword">var</span> currentRpcUrl = <span class="hljs-variable constant_">SEPOLIA_NODES</span>[<span class="hljs-number">0</span>]
    <span class="hljs-comment">// Web3jå®ä¾‹ï¼Œç”¨äºä¸ä»¥å¤ªåŠèŠ‚ç‚¹é€šä¿¡</span>
    private <span class="hljs-keyword">var</span> <span class="hljs-attr">web3j</span>: <span class="hljs-title class_">Web3</span>j = <span class="hljs-title class_">Web3</span>j.<span class="hljs-title function_">build</span>(<span class="hljs-title class_">HttpService</span>(currentRpcUrl))
    <span class="hljs-comment">// å½“å‰è¿æ¥çš„åŒºå—é“¾ç½‘ç»œID</span>
    private <span class="hljs-keyword">var</span> <span class="hljs-attr">currentChainId</span>: <span class="hljs-title class_">Long</span> = <span class="hljs-variable constant_">SEPOLIA_CHAIN_ID</span>
    <span class="hljs-comment">// æ ‡è¯†å½“å‰æ˜¯å¦è¿æ¥ä¸»ç½‘</span>
    private <span class="hljs-keyword">var</span> <span class="hljs-attr">isMainnet</span>: <span class="hljs-title class_">Boolean</span> = <span class="hljs-literal">false</span>

    <span class="hljs-comment">/**
     * åˆ›å»ºæ–°é’±åŒ… - ç”Ÿæˆæ–°çš„ä»¥å¤ªåŠé’±åŒ…åœ°å€å’Œç§é’¥
     * <span class="hljs-doctag">@return</span> WalletInfo åŒ…å«åœ°å€ã€ç§é’¥ç­‰é’±åŒ…ä¿¡æ¯
     */</span>
    fun <span class="hljs-title function_">createNewWallet</span>(): <span class="hljs-title class_">WalletInfo</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä½¿ç”¨å®‰å…¨éšæœºæ•°ç”Ÿæˆå™¨ç”Ÿæˆç§é’¥</span>
            val secureRandom = <span class="hljs-title class_">SecureRandom</span>()
            val privateKeyBytes = <span class="hljs-title class_">ByteArray</span>(<span class="hljs-number">32</span>) <span class="hljs-comment">// 256ä½ç§é’¥</span>
            secureRandom.<span class="hljs-title function_">nextBytes</span>(privateKeyBytes)

            <span class="hljs-comment">// å°†å­—èŠ‚æ•°ç»„è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼ˆå»æ‰0xå‰ç¼€ï¼‰</span>
            val privateKey = <span class="hljs-title class_">Numeric</span>.<span class="hljs-title function_">toHexStringNoPrefix</span>(privateKeyBytes)
            <span class="hljs-comment">// ä»ç§é’¥åˆ›å»ºå‡­è¯å¯¹è±¡ï¼Œå¯ä»¥è·å–åœ°å€ç­‰ä¿¡æ¯</span>
            val credentials = <span class="hljs-title class_">Credentials</span>.<span class="hljs-title function_">create</span>(privateKey)

            <span class="hljs-comment">// è¿”å›é’±åŒ…ä¿¡æ¯å¯¹è±¡</span>
            <span class="hljs-title class_">WalletInfo</span>(
                address = credentials.<span class="hljs-property">address</span>,      <span class="hljs-comment">// ä»¥å¤ªåŠåœ°å€</span>
                mnemonic = <span class="hljs-literal">null</span>,                    <span class="hljs-comment">// æ–°åˆ›å»ºçš„é’±åŒ…æ²¡æœ‰åŠ©è®°è¯</span>
                privateKey = privateKey,            <span class="hljs-comment">// åŸå§‹ç§é’¥</span>
                walletFile = <span class="hljs-literal">null</span>                   <span class="hljs-comment">// ä¸ç”Ÿæˆé’±åŒ…æ–‡ä»¶</span>
            )
        } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">e</span>: <span class="hljs-title class_">Exception</span>) {
            <span class="hljs-comment">// å¦‚æœæ ‡å‡†æ–¹æ³•å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ³•ç”Ÿæˆç§é’¥</span>
            val fallbackPrivateKey = <span class="hljs-title function_">generateFallbackPrivateKey</span>()
            val credentials = <span class="hljs-title class_">Credentials</span>.<span class="hljs-title function_">create</span>(fallbackPrivateKey)

            <span class="hljs-title class_">WalletInfo</span>(
                address = credentials.<span class="hljs-property">address</span>,
                mnemonic = <span class="hljs-literal">null</span>,
                privateKey = fallbackPrivateKey,
                walletFile = <span class="hljs-literal">null</span>
            )
        }
    }

    <span class="hljs-comment">/**
     * é€šè¿‡åŠ©è®°è¯åˆ›å»º/å¯¼å…¥é’±åŒ…
     * <span class="hljs-doctag">@param</span> mnemonic åŠ©è®°è¯å­—ç¬¦ä¸²
     * <span class="hljs-doctag">@param</span> password ç”¨äºåŠ å¯†çš„é’±åŒ…å¯†ç 
     * <span class="hljs-doctag">@return</span> WalletInfo é’±åŒ…ä¿¡æ¯
     */</span>
    fun <span class="hljs-title function_">createWalletFromMnemonic</span>(<span class="hljs-attr">mnemonic</span>: <span class="hljs-title class_">String</span>, <span class="hljs-attr">password</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">WalletInfo</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// éªŒè¯åŠ©è®°è¯æ ¼å¼</span>
            val cleanedMnemonic = mnemonic.<span class="hljs-title function_">trim</span>()
            <span class="hljs-keyword">if</span> (cleanedMnemonic.<span class="hljs-title function_">isEmpty</span>()) {
                <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Web3Exception</span>(<span class="hljs-string">"åŠ©è®°è¯ä¸èƒ½ä¸ºç©º"</span>)
            }

            <span class="hljs-comment">// åˆ†å‰²åŠ©è®°è¯å¹¶éªŒè¯é•¿åº¦</span>
            val words = cleanedMnemonic.<span class="hljs-title function_">split</span>(<span class="hljs-string">"\s+"</span>.<span class="hljs-title function_">toRegex</span>())
            <span class="hljs-keyword">if</span> (words.<span class="hljs-property">size</span> !<span class="hljs-keyword">in</span> <span class="hljs-title function_">listOf</span>(<span class="hljs-number">12</span>, <span class="hljs-number">15</span>, <span class="hljs-number">18</span>, <span class="hljs-number">21</span>, <span class="hljs-number">24</span>)) {
                <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Web3Exception</span>(<span class="hljs-string">"åŠ©è®°è¯åº”ä¸º12ã€15ã€18ã€21æˆ–24ä¸ªå•è¯"</span>)
            }

            <span class="hljs-comment">// ä½¿ç”¨ Web3j ä»åŠ©è®°è¯ç”Ÿæˆç§å­ï¼ˆåŸºäºBIP39æ ‡å‡†ï¼‰</span>
            val seed = <span class="hljs-title class_">MnemonicUtils</span>.<span class="hljs-title function_">generateSeed</span>(cleanedMnemonic, password)

            <span class="hljs-comment">// ä»ç§å­ç”Ÿæˆç¡®å®šæ€§é’±åŒ…ï¼ˆç®€åŒ–ç‰ˆæœ¬ï¼‰</span>
            <span class="hljs-comment">// æ³¨æ„ï¼šè¿™æ˜¯ä¸€ä¸ªç®€åŒ–å®ç°ï¼Œå®é™…åº”ç”¨ä¸­åº”è¯¥ä½¿ç”¨å®Œæ•´çš„ BIP44 è·¯å¾„</span>
            val privateKey = <span class="hljs-title function_">generatePrivateKeyFromSeed</span>(seed)
            val credentials = <span class="hljs-title class_">Credentials</span>.<span class="hljs-title function_">create</span>(privateKey)

            <span class="hljs-title class_">WalletInfo</span>(
                address = credentials.<span class="hljs-property">address</span>,
                mnemonic = cleanedMnemonic,     <span class="hljs-comment">// ä¿å­˜åŸå§‹åŠ©è®°è¯</span>
                privateKey = privateKey,        <span class="hljs-comment">// æ´¾ç”Ÿå‡ºçš„ç§é’¥</span>
                walletFile = <span class="hljs-literal">null</span>
            )
        } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">e</span>: <span class="hljs-title class_">Exception</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Web3Exception</span>(<span class="hljs-string">"é€šè¿‡åŠ©è®°è¯åˆ›å»ºé’±åŒ…å¤±è´¥: ${e.message ?: "</span>æœªçŸ¥é”™è¯¯<span class="hljs-string">"}"</span>)
        }
    }

    <span class="hljs-comment">/**
     * ä»ç§å­ç”Ÿæˆç§é’¥ï¼ˆç®€åŒ–å®ç°ï¼‰
     * <span class="hljs-doctag">@param</span> seed BIP39ç§å­å­—èŠ‚æ•°ç»„
     * <span class="hljs-doctag">@return</span> åå…­è¿›åˆ¶ç§é’¥å­—ç¬¦ä¸²
     */</span>
    private fun <span class="hljs-title function_">generatePrivateKeyFromSeed</span>(<span class="hljs-attr">seed</span>: <span class="hljs-title class_">ByteArray</span>): <span class="hljs-title class_">String</span> {
        <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªç®€åŒ–å®ç°</span>
        <span class="hljs-comment">// å®é™…åº”ç”¨ä¸­åº”è¯¥ä½¿ç”¨å®Œæ•´çš„ HD é’±åŒ…æ´¾ç”Ÿè·¯å¾„ï¼ˆBIP44ï¼‰</span>
        val secureRandom = <span class="hljs-title class_">SecureRandom</span>(seed)
        val privateKeyBytes = <span class="hljs-title class_">ByteArray</span>(<span class="hljs-number">32</span>)
        secureRandom.<span class="hljs-title function_">nextBytes</span>(privateKeyBytes)
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Numeric</span>.<span class="hljs-title function_">toHexStringNoPrefix</span>(privateKeyBytes)
    }

    <span class="hljs-comment">/**
     * å¯¼å…¥ç§é’¥é’±åŒ…
     * <span class="hljs-doctag">@param</span> privateKey åŸå§‹ç§é’¥å­—ç¬¦ä¸²
     * <span class="hljs-doctag">@return</span> WalletInfo é’±åŒ…ä¿¡æ¯
     */</span>
    fun importWalletFromPrivateKey(<span class="hljs-attr">privateKey</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">WalletInfo</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">var</span> cleanKey = privateKey.<span class="hljs-title function_">trim</span>()

            <span class="hljs-comment">// ç§»é™¤å¯èƒ½çš„0xå‰ç¼€</span>
            <span class="hljs-keyword">if</span> (cleanKey.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"0x"</span>)) {
                cleanKey = cleanKey.<span class="hljs-title function_">substring</span>(<span class="hljs-number">2</span>)
            }

            <span class="hljs-comment">// éªŒè¯ç§é’¥é•¿åº¦ï¼ˆ64ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ = 32å­—èŠ‚ï¼‰</span>
            <span class="hljs-keyword">if</span> (cleanKey.<span class="hljs-property">length</span> != <span class="hljs-number">64</span>) {
                <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Web3Exception</span>(<span class="hljs-string">"ç§é’¥å¿…é¡»æ˜¯64ä¸ªåå…­è¿›åˆ¶å­—ç¬¦"</span>)
            }

            <span class="hljs-comment">// éªŒè¯ç§é’¥åªåŒ…å«æœ‰æ•ˆçš„åå…­è¿›åˆ¶å­—ç¬¦</span>
            <span class="hljs-keyword">if</span> (!cleanKey.<span class="hljs-title function_">matches</span>(<span class="hljs-title class_">Regex</span>(<span class="hljs-string">"[0-9a-fA-F]+"</span>))) {
                <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Web3Exception</span>(<span class="hljs-string">"ç§é’¥åŒ…å«æ— æ•ˆå­—ç¬¦"</span>)
            }

            <span class="hljs-comment">// ä»ç§é’¥åˆ›å»ºå‡­è¯å¯¹è±¡</span>
            val credentials = <span class="hljs-title class_">Credentials</span>.<span class="hljs-title function_">create</span>(cleanKey)

            <span class="hljs-title class_">WalletInfo</span>(
                address = credentials.<span class="hljs-property">address</span>,
                mnemonic = <span class="hljs-literal">null</span>,
                privateKey = cleanKey,      <span class="hljs-comment">// ä½¿ç”¨æ¸…ç†åçš„ç§é’¥</span>
                walletFile = <span class="hljs-literal">null</span>
            )
        } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">e</span>: <span class="hljs-title class_">Exception</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Web3Exception</span>(<span class="hljs-string">"å¯¼å…¥é’±åŒ…å¤±è´¥: ${e.message ?: "</span>æœªçŸ¥é”™è¯¯<span class="hljs-string">"}"</span>)
        }
    }

    <span class="hljs-comment">/**
     * å¤‡ç”¨ç§é’¥ç”Ÿæˆæ–¹æ³• - å½“æ ‡å‡†æ–¹æ³•å¤±è´¥æ—¶ä½¿ç”¨
     * <span class="hljs-doctag">@return</span> éšæœºç”Ÿæˆçš„ç§é’¥å­—ç¬¦ä¸²
     */</span>
    private fun <span class="hljs-title function_">generateFallbackPrivateKey</span>(): <span class="hljs-title class_">String</span> {
        val random = java.<span class="hljs-property">util</span>.<span class="hljs-title class_">Random</span>()
        val sb = <span class="hljs-title class_">StringBuilder</span>()
        val hexChars = <span class="hljs-string">"0123456789abcdef"</span>
        <span class="hljs-comment">// ç”Ÿæˆ64ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ï¼ˆ32å­—èŠ‚ï¼‰</span>
        <span class="hljs-title function_">repeat</span>(<span class="hljs-params"><span class="hljs-number">64</span></span>) {
            sb.<span class="hljs-title function_">append</span>(hexChars[random.<span class="hljs-title function_">nextInt</span>(hexChars.<span class="hljs-property">length</span>)])
        }
        <span class="hljs-keyword">return</span> sb.<span class="hljs-title function_">toString</span>()
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢ä½™é¢ - è·å–æŒ‡å®šåœ°å€çš„ETHä½™é¢ï¼ˆå•ä½ï¼šWeiï¼‰
     * <span class="hljs-doctag">@param</span> address è¦æŸ¥è¯¢çš„ä»¥å¤ªåŠåœ°å€
     * <span class="hljs-doctag">@return</span> BigInteger ä½™é¢ï¼ˆWeiå•ä½ï¼‰
     */</span>
    suspend fun <span class="hljs-title function_">getBalance</span>(<span class="hljs-attr">address</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">BigInteger</span> {
        <span class="hljs-comment">// é¦–å…ˆéªŒè¯åœ°å€æ ¼å¼</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">isValidEthereumAddress</span>(address)) {
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">BigInteger</span>.<span class="hljs-property">ZERO</span>
        }

        <span class="hljs-comment">// æ ¹æ®å½“å‰ç½‘ç»œé€‰æ‹©èŠ‚ç‚¹åˆ—è¡¨</span>
        val nodes = <span class="hljs-keyword">if</span> (isMainnet) <span class="hljs-variable constant_">MAINNET_NODES</span> <span class="hljs-keyword">else</span> <span class="hljs-variable constant_">SEPOLIA_NODES</span>
        <span class="hljs-keyword">var</span> <span class="hljs-attr">lastException</span>: <span class="hljs-title class_">Exception</span>? = <span class="hljs-literal">null</span>

        <span class="hljs-comment">// å°è¯•æ‰€æœ‰å¯ç”¨èŠ‚ç‚¹ï¼Œå®ç°æ•…éšœè½¬ç§»</span>
        <span class="hljs-keyword">for</span> (node <span class="hljs-keyword">in</span> nodes) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// ä¸ºæ¯ä¸ªèŠ‚ç‚¹åˆ›å»ºæ–°çš„Web3jå®ä¾‹</span>
                val tempWeb3j = <span class="hljs-title class_">Web3</span>j.<span class="hljs-title function_">build</span>(<span class="hljs-title class_">HttpService</span>(node))
                <span class="hljs-comment">// æŸ¥è¯¢æœ€æ–°åŒºå—çš„ä½™é¢</span>
                val <span class="hljs-attr">ethGetBalance</span>: <span class="hljs-title class_">EthGetBalance</span> = tempWeb3j.<span class="hljs-title function_">ethGetBalance</span>(address, <span class="hljs-title class_">DefaultBlockParameterName</span>.<span class="hljs-property">LATEST</span>).<span class="hljs-title function_">send</span>()

                <span class="hljs-comment">// å¦‚æœæˆåŠŸï¼Œæ›´æ–°å½“å‰ä½¿ç”¨çš„èŠ‚ç‚¹</span>
                currentRpcUrl = node
                web3j = tempWeb3j

                <span class="hljs-comment">// è¿”å›ä½™é¢ï¼ˆå•ä½ï¼šWeiï¼‰</span>
                <span class="hljs-keyword">return</span> ethGetBalance.<span class="hljs-property">balance</span>
            } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">e</span>: <span class="hljs-title class_">Exception</span>) {
                lastException = e
                <span class="hljs-comment">// ç»§ç»­å°è¯•ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</span>
            }
        }

        <span class="hljs-comment">// æ‰€æœ‰èŠ‚ç‚¹éƒ½å¤±è´¥ï¼Œè®°å½•é”™è¯¯å¹¶è¿”å›0</span>
        <span class="hljs-title function_">println</span>(<span class="hljs-string">"æ‰€æœ‰RPCèŠ‚ç‚¹éƒ½å¤±è´¥ï¼Œæœ€åé”™è¯¯: ${lastException?.message}"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">BigInteger</span>.<span class="hljs-property">ZERO</span>
    }

    <span class="hljs-comment">/**
     * è·å–æ ¼å¼åŒ–çš„ä½™é¢ - å°†Weiè½¬æ¢ä¸ºETHå¹¶æ ¼å¼åŒ–æ˜¾ç¤º
     * <span class="hljs-doctag">@param</span> address ä»¥å¤ªåŠåœ°å€
     * <span class="hljs-doctag">@return</span> String æ ¼å¼åŒ–åçš„ä½™é¢å­—ç¬¦ä¸²ï¼ˆå¦‚ "1.500000 ETH"ï¼‰
     */</span>
    suspend fun <span class="hljs-title function_">getFormattedBalance</span>(<span class="hljs-attr">address</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">String</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            val balanceWei = <span class="hljs-title function_">getBalance</span>(address)
            <span class="hljs-keyword">if</span> (balanceWei == <span class="hljs-title class_">BigInteger</span>.<span class="hljs-property">ZERO</span>) {
                <span class="hljs-string">"0 ETH"</span>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// å°†Weiè½¬æ¢ä¸ºETH</span>
                val balanceEth = <span class="hljs-title class_">Convert</span>.<span class="hljs-title function_">fromWei</span>(<span class="hljs-title class_">BigDecimal</span>(balanceWei), <span class="hljs-title class_">Convert</span>.<span class="hljs-property">Unit</span>.<span class="hljs-property">ETHER</span>)
                <span class="hljs-comment">// ä¿ç•™6ä½å°æ•°å¹¶æ ¼å¼åŒ–æ˜¾ç¤º</span>
                <span class="hljs-string">"${balanceEth.setScale(6, BigDecimal.ROUND_HALF_UP)} ETH"</span>
            }
        } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">e</span>: <span class="hljs-title class_">Exception</span>) {
            <span class="hljs-string">"0 ETH"</span> <span class="hljs-comment">// å‘ç”Ÿé”™è¯¯æ—¶è¿”å›0</span>
        }
    }

    <span class="hljs-comment">/**
     * è·å–ç¾å…ƒä¼°å€¼ - è®¡ç®—ä½™é¢çš„ç¾å…ƒä»·å€¼ï¼ˆä½¿ç”¨å›ºå®šæ±‡ç‡ï¼‰
     * <span class="hljs-doctag">@param</span> address ä»¥å¤ªåŠåœ°å€
     * <span class="hljs-doctag">@return</span> String ç¾å…ƒä»·å€¼å­—ç¬¦ä¸²ï¼ˆå¦‚ "$2700.00"ï¼‰
     */</span>
    suspend fun <span class="hljs-title function_">getBalanceInUSD</span>(<span class="hljs-attr">address</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">String</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            val balanceWei = <span class="hljs-title function_">getBalance</span>(address)
            <span class="hljs-keyword">if</span> (balanceWei == <span class="hljs-title class_">BigInteger</span>.<span class="hljs-property">ZERO</span>) {
                <span class="hljs-string">"$0.00"</span>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// å°†Weiè½¬æ¢ä¸ºETH</span>
                val balanceEth = <span class="hljs-title class_">Convert</span>.<span class="hljs-title function_">fromWei</span>(<span class="hljs-title class_">BigDecimal</span>(balanceWei), <span class="hljs-title class_">Convert</span>.<span class="hljs-property">Unit</span>.<span class="hljs-property">ETHER</span>)
                <span class="hljs-comment">// ä½¿ç”¨å›ºå®šæ±‡ç‡è®¡ç®—ç¾å…ƒä»·å€¼ï¼ˆå®é™…åº”ç”¨ä¸­åº”è¯¥ä½¿ç”¨å®æ—¶æ±‡ç‡ï¼‰</span>
                val usdValue = balanceEth.<span class="hljs-title function_">toDouble</span>() * <span class="hljs-number">1800.0</span>
                <span class="hljs-comment">// æ ¼å¼åŒ–ç¾å…ƒé‡‘é¢</span>
                <span class="hljs-string">"$${String.format("</span>%.2f<span class="hljs-string">", usdValue)}"</span>
            }
        } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">e</span>: <span class="hljs-title class_">Exception</span>) {
            <span class="hljs-string">"$0.00"</span> <span class="hljs-comment">// å‘ç”Ÿé”™è¯¯æ—¶è¿”å›$0.00</span>
        }
    }

    <span class="hljs-comment">/**
     * éªŒè¯ä»¥å¤ªåŠåœ°å€æ ¼å¼
     * <span class="hljs-doctag">@param</span> address è¦éªŒè¯çš„åœ°å€å­—ç¬¦ä¸²
     * <span class="hljs-doctag">@return</span> Boolean æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ä»¥å¤ªåŠåœ°å€æ ¼å¼
     */</span>
    fun <span class="hljs-title function_">isValidEthereumAddress</span>(<span class="hljs-attr">address</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">Boolean</span> {
        <span class="hljs-comment">// æ­£åˆ™è¡¨è¾¾å¼éªŒè¯ï¼šä»¥0xå¼€å¤´ï¼Œåè·Ÿ40ä¸ªåå…­è¿›åˆ¶å­—ç¬¦</span>
        <span class="hljs-keyword">return</span> address.<span class="hljs-title function_">matches</span>(<span class="hljs-title class_">Regex</span>(<span class="hljs-string">"^0x[a-fA-F0-9]{40}$"</span>))
    }

    <span class="hljs-comment">/**
     * åˆ‡æ¢ç½‘ç»œ - åœ¨ä¸»ç½‘å’Œæµ‹è¯•ç½‘ä¹‹é—´åˆ‡æ¢
     * <span class="hljs-doctag">@param</span> useMainnet æ˜¯å¦åˆ‡æ¢åˆ°ä¸»ç½‘
     */</span>
    fun <span class="hljs-title function_">switchNetwork</span>(<span class="hljs-params">useMainnet: <span class="hljs-built_in">Boolean</span></span>) {
        isMainnet = useMainnet
        currentChainId = <span class="hljs-keyword">if</span> (useMainnet) <span class="hljs-variable constant_">MAINNET_CHAIN_ID</span> <span class="hljs-keyword">else</span> <span class="hljs-variable constant_">SEPOLIA_CHAIN_ID</span>
        currentRpcUrl = <span class="hljs-keyword">if</span> (useMainnet) <span class="hljs-variable constant_">MAINNET_NODES</span>[<span class="hljs-number">0</span>] <span class="hljs-keyword">else</span> <span class="hljs-variable constant_">SEPOLIA_NODES</span>[<span class="hljs-number">0</span>]
        <span class="hljs-comment">// é‡æ–°åˆ›å»ºWeb3jå®ä¾‹è¿æ¥åˆ°æ–°ç½‘ç»œ</span>
        web3j = <span class="hljs-title class_">Web3</span>j.<span class="hljs-title function_">build</span>(<span class="hljs-title class_">HttpService</span>(currentRpcUrl))
    }

    <span class="hljs-comment">/**
     * è·å–å½“å‰ç½‘ç»œä¿¡æ¯
     * <span class="hljs-doctag">@return</span> NetworkInfo åŒ…å«ç½‘ç»œåç§°ã€RPC URLã€é“¾IDç­‰ä¿¡æ¯
     */</span>
    fun <span class="hljs-title function_">getCurrentNetworkInfo</span>(): <span class="hljs-title class_">NetworkInfo</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (isMainnet) {
            <span class="hljs-title class_">NetworkInfo</span>(
                name = <span class="hljs-string">"Ethereum Mainnet"</span>,          <span class="hljs-comment">// ä¸»ç½‘åç§°</span>
                rpcUrl = currentRpcUrl,             <span class="hljs-comment">// å½“å‰RPC URL</span>
                chainId = <span class="hljs-variable constant_">MAINNET_CHAIN_ID</span>,         <span class="hljs-comment">// ä¸»ç½‘é“¾ID</span>
                symbol = <span class="hljs-string">"ETH"</span>,                     <span class="hljs-comment">// ä»£å¸ç¬¦å·</span>
                explorerUrl = <span class="hljs-string">"https://etherscan.io"</span> <span class="hljs-comment">// åŒºå—æµè§ˆå™¨URL</span>
            )
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-title class_">NetworkInfo</span>(
                name = <span class="hljs-string">"Sepolia Testnet"</span>,           <span class="hljs-comment">// æµ‹è¯•ç½‘åç§°</span>
                rpcUrl = currentRpcUrl,
                chainId = <span class="hljs-variable constant_">SEPOLIA_CHAIN_ID</span>,         <span class="hljs-comment">// æµ‹è¯•ç½‘é“¾ID</span>
                symbol = <span class="hljs-string">"ETH"</span>,
                explorerUrl = <span class="hljs-string">"https://sepolia.etherscan.io"</span> <span class="hljs-comment">// æµ‹è¯•ç½‘åŒºå—æµè§ˆå™¨</span>
            )
        }
    }

    <span class="hljs-comment">/**
     * æµ‹è¯•ç½‘ç»œè¿æ¥ - æ£€æŸ¥å½“å‰èŠ‚ç‚¹æ˜¯å¦å¯ç”¨
     * <span class="hljs-doctag">@return</span> Boolean è¿æ¥æ˜¯å¦æˆåŠŸ
     */</span>
    suspend fun <span class="hljs-title function_">testNetworkConnection</span>(): <span class="hljs-title class_">Boolean</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä½¿ç”¨é›¶åœ°å€è¿›è¡Œç®€å•çš„ä½™é¢æŸ¥è¯¢æ¥æµ‹è¯•è¿æ¥</span>
            val testAddress = <span class="hljs-string">"0x0000000000000000000000000000000000000000"</span>
            web3j.<span class="hljs-title function_">ethGetBalance</span>(testAddress, <span class="hljs-title class_">DefaultBlockParameterName</span>.<span class="hljs-property">LATEST</span>).<span class="hljs-title function_">send</span>()
            <span class="hljs-literal">true</span> <span class="hljs-comment">// å¦‚æœæ²¡æœ‰å¼‚å¸¸ï¼Œè¯´æ˜è¿æ¥æˆåŠŸ</span>
        } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">e</span>: <span class="hljs-title class_">Exception</span>) {
            <span class="hljs-literal">false</span> <span class="hljs-comment">// å‘ç”Ÿå¼‚å¸¸ï¼Œè¿æ¥å¤±è´¥</span>
        }
    }
}
</code></pre>
<pre><code class="hljs language-js" lang="js">
<span class="hljs-comment">/**
 * å®‰å…¨ç®¡ç†å™¨ - å¤„ç†æ•æ„Ÿæ•°æ®çš„åŠ å¯†å­˜å‚¨å’Œæ£€ç´¢
 * ä½¿ç”¨Android Keystoreç³»ç»Ÿä¿æŠ¤åŠ å¯†å¯†é’¥
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SecurityManager</span>(private val <span class="hljs-attr">context</span>: <span class="hljs-title class_">Context</span>) {

    companion object {
        private <span class="hljs-keyword">const</span> val <span class="hljs-variable constant_">ANDROID_KEYSTORE</span> = <span class="hljs-string">"AndroidKeyStore"</span>  <span class="hljs-comment">// Androidå¯†é’¥åº“æä¾›è€…</span>
        private <span class="hljs-keyword">const</span> val <span class="hljs-variable constant_">KEY_ALIAS</span> = <span class="hljs-string">"Web3Wallet_Key"</span>          <span class="hljs-comment">// å¯†é’¥åˆ«å</span>
        private <span class="hljs-keyword">const</span> val <span class="hljs-variable constant_">SHARED_PREFS_NAME</span> = <span class="hljs-string">"encrypted_web3_prefs"</span> <span class="hljs-comment">// åŠ å¯†å…±äº«åå¥½åç§°</span>
        private <span class="hljs-keyword">const</span> val <span class="hljs-variable constant_">TRANSFORMATION</span> = <span class="hljs-string">"AES/GCM/NoPadding"</span>  <span class="hljs-comment">// åŠ å¯†ç®—æ³•å’Œæ¨¡å¼</span>
        private <span class="hljs-keyword">const</span> val <span class="hljs-variable constant_">IV_LENGTH</span> = <span class="hljs-number">12</span>                        <span class="hljs-comment">// åˆå§‹åŒ–å‘é‡é•¿åº¦ï¼ˆå­—èŠ‚ï¼‰</span>
    }

    <span class="hljs-comment">// Androidå¯†é’¥åº“å®ä¾‹</span>
    private val <span class="hljs-attr">keyStore</span>: <span class="hljs-title class_">KeyStore</span> = <span class="hljs-title class_">KeyStore</span>.<span class="hljs-title function_">getInstance</span>(<span class="hljs-variable constant_">ANDROID_KEYSTORE</span>).<span class="hljs-property">apply</span> {
        <span class="hljs-title function_">load</span>(<span class="hljs-literal">null</span>) <span class="hljs-comment">// åŠ è½½å¯†é’¥åº“</span>
    }

    <span class="hljs-comment">// ä¸»å¯†é’¥ï¼Œç”¨äºåŠ å¯†å…±äº«åå¥½è®¾ç½®</span>
    private val <span class="hljs-attr">masterKey</span>: <span class="hljs-title class_">MasterKey</span> by lazy {
        <span class="hljs-title class_">MasterKey</span>.<span class="hljs-title class_">Builder</span>(context)
            .<span class="hljs-title function_">setKeyScheme</span>(<span class="hljs-title class_">MasterKey</span>.<span class="hljs-property">KeyScheme</span>.<span class="hljs-property">AES256_GCM</span>) <span class="hljs-comment">// ä½¿ç”¨AES256-GCMåŠ å¯†æ–¹æ¡ˆ</span>
            .<span class="hljs-title function_">build</span>()
    }

    <span class="hljs-comment">// åŠ å¯†çš„å…±äº«åå¥½è®¾ç½®å®ä¾‹</span>
    private val encryptedPrefs by lazy {
        <span class="hljs-title class_">EncryptedSharedPreferences</span>.<span class="hljs-title function_">create</span>(
            context,
            <span class="hljs-variable constant_">SHARED_PREFS_NAME</span>,
            masterKey,
            <span class="hljs-title class_">EncryptedSharedPreferences</span>.<span class="hljs-property">PrefKeyEncryptionScheme</span>.<span class="hljs-property">AES256_SIV</span>,    <span class="hljs-comment">// é”®åŠ å¯†æ–¹æ¡ˆ</span>
            <span class="hljs-title class_">EncryptedSharedPreferences</span>.<span class="hljs-property">PrefValueEncryptionScheme</span>.<span class="hljs-property">AES256_GCM</span>   <span class="hljs-comment">// å€¼åŠ å¯†æ–¹æ¡ˆ</span>
        )
    }

    <span class="hljs-comment">/**
     * è·å–æˆ–åˆ›å»ºåŠ å¯†å¯†é’¥ - ä½¿ç”¨Android Keystoreä¿æŠ¤å¯†é’¥
     * <span class="hljs-doctag">@return</span> SecretKey åŠ å¯†å¯†é’¥
     */</span>
    @<span class="hljs-title class_">RequiresApi</span>(<span class="hljs-title class_">Build</span>.<span class="hljs-property">VERSION_CODES</span>.<span class="hljs-property">M</span>)
    private fun <span class="hljs-title function_">getOrCreateSecretKey</span>(): <span class="hljs-title class_">SecretKey</span> {
        <span class="hljs-comment">// æ£€æŸ¥å¯†é’¥æ˜¯å¦å·²å­˜åœ¨</span>
        <span class="hljs-keyword">if</span> (!keyStore.<span class="hljs-title function_">containsAlias</span>(<span class="hljs-variable constant_">KEY_ALIAS</span>)) {
            <span class="hljs-comment">// åˆ›å»ºæ–°çš„å¯†é’¥ç”Ÿæˆå™¨</span>
            val keyGenerator = <span class="hljs-title class_">KeyGenerator</span>.<span class="hljs-title function_">getInstance</span>(
                <span class="hljs-title class_">KeyProperties</span>.<span class="hljs-property">KEY_ALGORITHM_AES</span>,
                <span class="hljs-variable constant_">ANDROID_KEYSTORE</span>
            )

            <span class="hljs-comment">// é…ç½®å¯†é’¥ç”Ÿæˆå‚æ•°</span>
            val keyGenParameterSpec = <span class="hljs-title class_">KeyGenParameterSpec</span>.<span class="hljs-title class_">Builder</span>(
                <span class="hljs-variable constant_">KEY_ALIAS</span>,
                <span class="hljs-title class_">KeyProperties</span>.<span class="hljs-property">PURPOSE_ENCRYPT</span> or <span class="hljs-title class_">KeyProperties</span>.<span class="hljs-property">PURPOSE_DECRYPT</span> <span class="hljs-comment">// å¯†é’¥ç”¨é€”</span>
            )
                .<span class="hljs-title function_">setBlockModes</span>(<span class="hljs-title class_">KeyProperties</span>.<span class="hljs-property">BLOCK_MODE_GCM</span>)       <span class="hljs-comment">// ä½¿ç”¨GCMåˆ†ç»„æ¨¡å¼</span>
                .<span class="hljs-title function_">setEncryptionPaddings</span>(<span class="hljs-title class_">KeyProperties</span>.<span class="hljs-property">ENCRYPTION_PADDING_NONE</span>) <span class="hljs-comment">// æ— å¡«å……</span>
                .<span class="hljs-title function_">setKeySize</span>(<span class="hljs-number">256</span>)                                   <span class="hljs-comment">// 256ä½å¯†é’¥</span>
                .<span class="hljs-title function_">build</span>()

            keyGenerator.<span class="hljs-title function_">init</span>(keyGenParameterSpec)
            keyGenerator.<span class="hljs-title function_">generateKey</span>() <span class="hljs-comment">// ç”Ÿæˆå¯†é’¥</span>
        }

        <span class="hljs-comment">// è¿”å›å·²å­˜åœ¨çš„å¯†é’¥</span>
        <span class="hljs-keyword">return</span> keyStore.<span class="hljs-title function_">getKey</span>(<span class="hljs-variable constant_">KEY_ALIAS</span>, <span class="hljs-literal">null</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">SecretKey</span>
    }

    <span class="hljs-comment">/**
     * åŠ å¯†æ•°æ® - ä½¿ç”¨AES-GCMåŠ å¯†ç®—æ³•
     * <span class="hljs-doctag">@param</span> plaintext è¦åŠ å¯†çš„æ˜æ–‡
     * <span class="hljs-doctag">@return</span> String Base64ç¼–ç çš„åŠ å¯†æ•°æ®
     */</span>
    @<span class="hljs-title class_">RequiresApi</span>(<span class="hljs-title class_">Build</span>.<span class="hljs-property">VERSION_CODES</span>.<span class="hljs-property">M</span>)
    fun <span class="hljs-title function_">encryptData</span>(<span class="hljs-attr">plaintext</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">String</span> {
        <span class="hljs-comment">// è·å–å¯†ç å™¨å®ä¾‹</span>
        val cipher = <span class="hljs-title class_">Cipher</span>.<span class="hljs-title function_">getInstance</span>(<span class="hljs-variable constant_">TRANSFORMATION</span>)
        <span class="hljs-comment">// åˆå§‹åŒ–ä¸ºåŠ å¯†æ¨¡å¼</span>
        cipher.<span class="hljs-title function_">init</span>(<span class="hljs-title class_">Cipher</span>.<span class="hljs-property">ENCRYPT_MODE</span>, <span class="hljs-title function_">getOrCreateSecretKey</span>())

        val iv = cipher.<span class="hljs-property">iv</span> <span class="hljs-comment">// è·å–åˆå§‹åŒ–å‘é‡</span>
        val encrypted = cipher.<span class="hljs-title function_">doFinal</span>(plaintext.<span class="hljs-title function_">toByteArray</span>(<span class="hljs-title class_">Charsets</span>.<span class="hljs-property">UTF_8</span>)) <span class="hljs-comment">// æ‰§è¡ŒåŠ å¯†</span>

        <span class="hljs-comment">// ç»„åˆIVå’ŒåŠ å¯†æ•°æ®</span>
        val combined = <span class="hljs-title class_">ByteArray</span>(iv.<span class="hljs-property">size</span> + encrypted.<span class="hljs-property">size</span>)
        <span class="hljs-title class_">System</span>.<span class="hljs-title function_">arraycopy</span>(iv, <span class="hljs-number">0</span>, combined, <span class="hljs-number">0</span>, iv.<span class="hljs-property">size</span>)              <span class="hljs-comment">// å¤åˆ¶IVåˆ°å‰é¢</span>
        <span class="hljs-title class_">System</span>.<span class="hljs-title function_">arraycopy</span>(encrypted, <span class="hljs-number">0</span>, combined, iv.<span class="hljs-property">size</span>, encrypted.<span class="hljs-property">size</span>) <span class="hljs-comment">// å¤åˆ¶åŠ å¯†æ•°æ®åˆ°åé¢</span>

        <span class="hljs-comment">// è¿”å›Base64ç¼–ç çš„å­—ç¬¦ä¸²</span>
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Base64</span>.<span class="hljs-title function_">encodeToString</span>(combined, <span class="hljs-title class_">Base64</span>.<span class="hljs-property">DEFAULT</span>)
    }

    <span class="hljs-comment">/**
     * è§£å¯†æ•°æ® - ä½¿ç”¨AES-GCMè§£å¯†ç®—æ³•
     * <span class="hljs-doctag">@param</span> encryptedData Base64ç¼–ç çš„åŠ å¯†æ•°æ®
     * <span class="hljs-doctag">@return</span> String è§£å¯†åçš„æ˜æ–‡
     */</span>
    @<span class="hljs-title class_">RequiresApi</span>(<span class="hljs-title class_">Build</span>.<span class="hljs-property">VERSION_CODES</span>.<span class="hljs-property">M</span>)
    fun <span class="hljs-title function_">decryptData</span>(<span class="hljs-attr">encryptedData</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">String</span> {
        <span class="hljs-comment">// è§£ç Base64å­—ç¬¦ä¸²</span>
        val combined = <span class="hljs-title class_">Base64</span>.<span class="hljs-title function_">decode</span>(encryptedData, <span class="hljs-title class_">Base64</span>.<span class="hljs-property">DEFAULT</span>)

        <span class="hljs-comment">// åˆ†ç¦»IVå’ŒåŠ å¯†æ•°æ®</span>
        val iv = <span class="hljs-title class_">ByteArray</span>(<span class="hljs-variable constant_">IV_LENGTH</span>)
        val encrypted = <span class="hljs-title class_">ByteArray</span>(combined.<span class="hljs-property">size</span> - <span class="hljs-variable constant_">IV_LENGTH</span>)

        <span class="hljs-title class_">System</span>.<span class="hljs-title function_">arraycopy</span>(combined, <span class="hljs-number">0</span>, iv, <span class="hljs-number">0</span>, <span class="hljs-variable constant_">IV_LENGTH</span>)            <span class="hljs-comment">// æå–IV</span>
        <span class="hljs-title class_">System</span>.<span class="hljs-title function_">arraycopy</span>(combined, <span class="hljs-variable constant_">IV_LENGTH</span>, encrypted, <span class="hljs-number">0</span>, encrypted.<span class="hljs-property">size</span>) <span class="hljs-comment">// æå–åŠ å¯†æ•°æ®</span>

        <span class="hljs-comment">// è·å–å¯†ç å™¨å®ä¾‹</span>
        val cipher = <span class="hljs-title class_">Cipher</span>.<span class="hljs-title function_">getInstance</span>(<span class="hljs-variable constant_">TRANSFORMATION</span>)
        <span class="hljs-comment">// é…ç½®GCMå‚æ•°ï¼ˆ128ä½è®¤è¯æ ‡ç­¾ï¼‰</span>
        val spec = <span class="hljs-title class_">GCMParameterSpec</span>(<span class="hljs-number">128</span>, iv)
        <span class="hljs-comment">// åˆå§‹åŒ–ä¸ºè§£å¯†æ¨¡å¼</span>
        cipher.<span class="hljs-title function_">init</span>(<span class="hljs-title class_">Cipher</span>.<span class="hljs-property">DECRYPT_MODE</span>, <span class="hljs-title function_">getOrCreateSecretKey</span>(), spec)

        <span class="hljs-comment">// æ‰§è¡Œè§£å¯†</span>
        val decrypted = cipher.<span class="hljs-title function_">doFinal</span>(encrypted)
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">String</span>(decrypted, <span class="hljs-title class_">Charsets</span>.<span class="hljs-property">UTF_8</span>)
    }

    <span class="hljs-comment">/**
     * å®‰å…¨å­˜å‚¨å­—ç¬¦ä¸² - ä½¿ç”¨åŠ å¯†çš„å…±äº«åå¥½è®¾ç½®
     * <span class="hljs-doctag">@param</span> key é”®
     * <span class="hljs-doctag">@param</span> value å€¼
     */</span>
    fun <span class="hljs-title function_">securePutString</span>(<span class="hljs-params">key: <span class="hljs-built_in">String</span>, value: <span class="hljs-built_in">String</span></span>) {
        encryptedPrefs.<span class="hljs-title function_">edit</span>().<span class="hljs-title function_">putString</span>(key, value).<span class="hljs-title function_">apply</span>()
    }

    <span class="hljs-comment">/**
     * å®‰å…¨è·å–å­—ç¬¦ä¸² - ä»åŠ å¯†çš„å…±äº«åå¥½è®¾ç½®ä¸­è¯»å–
     * <span class="hljs-doctag">@param</span> key é”®
     * <span class="hljs-doctag">@param</span> defaultValue é»˜è®¤å€¼
     * <span class="hljs-doctag">@return</span> String è·å–çš„å€¼æˆ–é»˜è®¤å€¼
     */</span>
    fun <span class="hljs-title function_">secureGetString</span>(<span class="hljs-attr">key</span>: <span class="hljs-title class_">String</span>, <span class="hljs-attr">defaultValue</span>: <span class="hljs-title class_">String</span> = <span class="hljs-string">""</span>): <span class="hljs-title class_">String</span> {
        <span class="hljs-keyword">return</span> encryptedPrefs.<span class="hljs-title function_">getString</span>(key, defaultValue) ?: defaultValue
    }

    <span class="hljs-comment">/**
     * ä¿å­˜é’±åŒ…æ•°æ® - å­˜å‚¨åŠ å¯†çš„é’±åŒ…ä¿¡æ¯
     * <span class="hljs-doctag">@param</span> walletAddress é’±åŒ…åœ°å€
     * <span class="hljs-doctag">@param</span> encryptedPrivateKey åŠ å¯†çš„ç§é’¥
     * <span class="hljs-doctag">@param</span> encryptedMnemonic åŠ å¯†çš„åŠ©è®°è¯ï¼ˆå¯ä¸ºç©ºï¼‰
     */</span>
    fun <span class="hljs-title function_">saveWalletData</span>(<span class="hljs-params">walletAddress: <span class="hljs-built_in">String</span>, encryptedPrivateKey: <span class="hljs-built_in">String</span>, encryptedMnemonic: <span class="hljs-built_in">String</span>?</span>) {
        <span class="hljs-comment">// ä½¿ç”¨åœ°å€ä½œä¸ºé”®çš„ä¸€éƒ¨åˆ†å­˜å‚¨ç§é’¥</span>
        <span class="hljs-title function_">securePutString</span>(<span class="hljs-string">"wallet_${walletAddress}_private"</span>, encryptedPrivateKey)
        <span class="hljs-comment">// å¦‚æœå­˜åœ¨åŠ©è®°è¯ï¼Œä¹Ÿå­˜å‚¨</span>
        encryptedMnemonic?.<span class="hljs-property">let</span> {
            <span class="hljs-title function_">securePutString</span>(<span class="hljs-string">"wallet_${walletAddress}_mnemonic"</span>, it)
        }
        <span class="hljs-comment">// è®¾ç½®å½“å‰é’±åŒ…</span>
        <span class="hljs-title function_">securePutString</span>(<span class="hljs-string">"current_wallet"</span>, walletAddress)

        <span class="hljs-comment">// æ›´æ–°é’±åŒ…åˆ—è¡¨</span>
        val wallets = <span class="hljs-title function_">getWalletList</span>().<span class="hljs-title function_">toMutableSet</span>()
        wallets.<span class="hljs-title function_">add</span>(walletAddress)
        <span class="hljs-title function_">securePutString</span>(<span class="hljs-string">"wallet_list"</span>, wallets.<span class="hljs-title function_">joinToString</span>(<span class="hljs-string">","</span>))
    }

    <span class="hljs-comment">/**
     * è·å–é’±åŒ…ç§é’¥ - è§£å¯†å¹¶è¿”å›ç§é’¥
     * <span class="hljs-doctag">@param</span> walletAddress é’±åŒ…åœ°å€
     * <span class="hljs-doctag">@return</span> String? è§£å¯†åçš„ç§é’¥ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›null
     */</span>
    @<span class="hljs-title class_">RequiresApi</span>(<span class="hljs-title class_">Build</span>.<span class="hljs-property">VERSION_CODES</span>.<span class="hljs-property">M</span>)
    fun <span class="hljs-title function_">getWalletPrivateKey</span>(<span class="hljs-attr">walletAddress</span>: <span class="hljs-title class_">String</span>): <span class="hljs-title class_">String</span>? {
        val encrypted = <span class="hljs-title function_">secureGetString</span>(<span class="hljs-string">"wallet_${walletAddress}_private"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (encrypted.<span class="hljs-title function_">isNotEmpty</span>()) <span class="hljs-title function_">decryptData</span>(encrypted) <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
    }

    <span class="hljs-comment">/**
     * è·å–é’±åŒ…åˆ—è¡¨ - è¿”å›æ‰€æœ‰å·²ä¿å­˜çš„é’±åŒ…åœ°å€
     * <span class="hljs-doctag">@return</span> Set&lt;String&gt; é’±åŒ…åœ°å€é›†åˆ
     */</span>
    fun <span class="hljs-title function_">getWalletList</span>(): <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">String</span>&gt; {
        val listStr = <span class="hljs-title function_">secureGetString</span>(<span class="hljs-string">"wallet_list"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (listStr.<span class="hljs-title function_">isEmpty</span>()) <span class="hljs-title function_">emptySet</span>() <span class="hljs-keyword">else</span> listStr.<span class="hljs-title function_">split</span>(<span class="hljs-string">","</span>).<span class="hljs-title function_">toSet</span>()
    }

    <span class="hljs-comment">/**
     * è·å–å½“å‰é’±åŒ…åœ°å€
     * <span class="hljs-doctag">@return</span> String? å½“å‰é’±åŒ…åœ°å€ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™è¿”å›null
     */</span>
    fun <span class="hljs-title function_">getCurrentWallet</span>(): <span class="hljs-title class_">String</span>? {
        val address = <span class="hljs-title function_">secureGetString</span>(<span class="hljs-string">"current_wallet"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (address.<span class="hljs-title function_">isNotEmpty</span>()) address <span class="hljs-keyword">else</span> <span class="hljs-literal">null</span>
    }

    <span class="hljs-comment">/**
     * æ£€æŸ¥æ˜¯å¦å­˜åœ¨é’±åŒ…
     * <span class="hljs-doctag">@return</span> Boolean æ˜¯å¦å­˜åœ¨è‡³å°‘ä¸€ä¸ªé’±åŒ…
     */</span>
    fun <span class="hljs-title function_">hasWallets</span>(): <span class="hljs-title class_">Boolean</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">getWalletList</span>().<span class="hljs-title function_">isNotEmpty</span>()
    }

    <span class="hljs-comment">/**
     * æ¸…é™¤æ‰€æœ‰æ•°æ® - åˆ é™¤æ‰€æœ‰å­˜å‚¨çš„é’±åŒ…ä¿¡æ¯
     */</span>
    fun <span class="hljs-title function_">clearAllData</span>(<span class="hljs-params"/>) {
        encryptedPrefs.<span class="hljs-title function_">edit</span>().<span class="hljs-title function_">clear</span>().<span class="hljs-title function_">apply</span>()
    }
}

</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * AndroidåŠ å¯†è¾…åŠ©å·¥å…· - æä¾›åœ¨ä¸åŒAndroidç‰ˆæœ¬ä¸Šå®‰å…¨ç”Ÿæˆå¯†é’¥å¯¹çš„æ–¹æ³•
 */</span>
<span class="hljs-keyword">object</span> AndroidCryptoHelper {

    <span class="hljs-comment">/**
     * åœ¨ Android ä¸Šå®‰å…¨ç”Ÿæˆ EC å¯†é’¥å¯¹ - æ”¯æŒå¤šç§å¤‡ç”¨æ–¹æ³•
     * <span class="hljs-doctag">@return</span> ECKeyPair æ¤­åœ†æ›²çº¿å¯†é’¥å¯¹
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">generateEcKeyPair</span><span class="hljs-params">()</span></span>: ECKeyPair {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ–¹æ³•1: å°è¯•ä½¿ç”¨ Web3j çš„æ ‡å‡†æ–¹æ³•ï¼ˆæœ€é«˜æ•ˆï¼‰</span>
            Keys.createEcKeyPair()
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            <span class="hljs-comment">// æ–¹æ³•2: å¦‚æœæ ‡å‡†æ–¹æ³•å¤±è´¥ï¼Œä½¿ç”¨ Android å…¼å®¹çš„API</span>
            <span class="hljs-keyword">try</span> {
                generateEcKeyPairWithAndroidAPI()
            } <span class="hljs-keyword">catch</span> (e2: Exception) {
                <span class="hljs-comment">// æ–¹æ³•3: æœ€ç»ˆå›é€€æ–¹æ³• - ä½¿ç”¨å®‰å…¨çš„éšæœºæ•°ç”Ÿæˆ</span>
                generateEcKeyPairFallback()
            }
        }
    }

    <span class="hljs-comment">/**
     * ä½¿ç”¨ Android API ç”Ÿæˆ EC å¯†é’¥å¯¹ - å…¼å®¹æ€§æ›´å¥½çš„æ–¹æ³•
     * <span class="hljs-doctag">@return</span> ECKeyPair æ¤­åœ†æ›²çº¿å¯†é’¥å¯¹
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">generateEcKeyPairWithAndroidAPI</span><span class="hljs-params">()</span></span>: ECKeyPair {
        <span class="hljs-comment">// è·å–ECå¯†é’¥å¯¹ç”Ÿæˆå™¨å®ä¾‹</span>
        <span class="hljs-keyword">val</span> keyPairGenerator = KeyPairGenerator.getInstance(<span class="hljs-string">"EC"</span>)
        <span class="hljs-comment">// æŒ‡å®šä½¿ç”¨secp256k1æ›²çº¿ï¼ˆæ¯”ç‰¹å¸å’Œä»¥å¤ªåŠä½¿ç”¨çš„æ›²çº¿ï¼‰</span>
        <span class="hljs-keyword">val</span> ecGenParameterSpec = ECGenParameterSpec(<span class="hljs-string">"secp256k1"</span>)
        <span class="hljs-comment">// ä½¿ç”¨å®‰å…¨éšæœºæ•°åˆå§‹åŒ–ç”Ÿæˆå™¨</span>
        keyPairGenerator.initialize(ecGenParameterSpec, SecureRandom())
        <span class="hljs-comment">// ç”Ÿæˆå¯†é’¥å¯¹</span>
        <span class="hljs-keyword">val</span> keyPair = keyPairGenerator.generateKeyPair()

        <span class="hljs-comment">// æå–ç§é’¥å’Œå…¬é’¥</span>
        <span class="hljs-keyword">val</span> privateKey = keyPair.<span class="hljs-keyword">private</span>
        <span class="hljs-keyword">val</span> publicKey = keyPair.<span class="hljs-keyword">public</span>

        <span class="hljs-comment">// è½¬æ¢ä¸º Web3j çš„ ECKeyPair æ ¼å¼</span>
        <span class="hljs-comment">// æ³¨æ„ï¼šè¿™æ˜¯ä¸€ä¸ªç®€åŒ–å®ç°ï¼Œå®é™…åº”ç”¨ä¸­éœ€è¦æ›´å¤æ‚çš„è½¬æ¢</span>
        <span class="hljs-keyword">val</span> privateKeyBytes = privateKey.encoded
        <span class="hljs-keyword">val</span> publicKeyBytes = publicKey.encoded

        <span class="hljs-comment">// ä½¿ç”¨ Web3j çš„å·¥å…·ä»å­—èŠ‚åˆ›å»ºå¯†é’¥å¯¹</span>
        <span class="hljs-keyword">return</span> ECKeyPair.create(privateKeyBytes)
    }

    <span class="hljs-comment">/**
     * å›é€€æ–¹æ³• - ä½¿ç”¨å®‰å…¨çš„éšæœºæ•°ç”Ÿæˆç§é’¥ï¼ˆæœ€åŸºç¡€ä½†å¯é çš„æ–¹æ³•ï¼‰
     * <span class="hljs-doctag">@return</span> ECKeyPair æ¤­åœ†æ›²çº¿å¯†é’¥å¯¹
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">generateEcKeyPairFallback</span><span class="hljs-params">()</span></span>: ECKeyPair {
        <span class="hljs-comment">// ä½¿ç”¨å®‰å…¨éšæœºæ•°ç”Ÿæˆå™¨</span>
        <span class="hljs-keyword">val</span> secureRandom = SecureRandom()
        <span class="hljs-keyword">val</span> privateKeyBytes = ByteArray(<span class="hljs-number">32</span>) <span class="hljs-comment">// 32å­—èŠ‚ = 256ä½</span>
        secureRandom.nextBytes(privateKeyBytes) <span class="hljs-comment">// å¡«å……éšæœºå­—èŠ‚</span>

        <span class="hljs-comment">// ä½¿ç”¨ Web3j ä»å­—èŠ‚åˆ›å»ºå¯†é’¥å¯¹</span>
        <span class="hljs-keyword">return</span> ECKeyPair.create(privateKeyBytes)
    }

    <span class="hljs-comment">/**
     * éªŒè¯ç§é’¥æ ¼å¼ - æ£€æŸ¥ç§é’¥æ˜¯å¦ç¬¦åˆä»¥å¤ªåŠæ ‡å‡†
     * <span class="hljs-doctag">@param</span> privateKey è¦éªŒè¯çš„ç§é’¥å­—ç¬¦ä¸²
     * <span class="hljs-doctag">@return</span> Boolean æ˜¯å¦ä¸ºæœ‰æ•ˆçš„ç§é’¥æ ¼å¼
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isValidPrivateKey</span><span class="hljs-params">(privateKey: <span class="hljs-type">String</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ç§»é™¤å¯èƒ½çš„ 0x å‰ç¼€</span>
            <span class="hljs-keyword">val</span> cleanKey = <span class="hljs-keyword">if</span> (privateKey.startsWith(<span class="hljs-string">"0x"</span>)) {
                privateKey.substring(<span class="hljs-number">2</span>)
            } <span class="hljs-keyword">else</span> {
                privateKey
            }

            <span class="hljs-comment">// æ£€æŸ¥é•¿åº¦ (64ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ = 32å­—èŠ‚) å’Œå­—ç¬¦æœ‰æ•ˆæ€§</span>
            cleanKey.length == <span class="hljs-number">64</span> &amp;&amp; cleanKey.matches(Regex(<span class="hljs-string">"[0-9a-fA-F]+"</span>))
        } <span class="hljs-keyword">catch</span> (e: Exception) {
            <span class="hljs-literal">false</span> <span class="hljs-comment">// ä»»ä½•å¼‚å¸¸éƒ½è§†ä¸ºæ— æ•ˆæ ¼å¼</span>
        }
    }

    <span class="hljs-comment">/**
     * æ ‡å‡†åŒ–ç§é’¥æ ¼å¼ - ç»Ÿä¸€ç§é’¥çš„è¡¨ç¤ºæ ¼å¼
     * <span class="hljs-doctag">@param</span> privateKey åŸå§‹ç§é’¥å­—ç¬¦ä¸²
     * <span class="hljs-doctag">@return</span> String æ ‡å‡†åŒ–åçš„ç§é’¥ï¼ˆå°å†™ï¼Œæ— 0xå‰ç¼€ï¼‰
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">normalizePrivateKey</span><span class="hljs-params">(privateKey: <span class="hljs-type">String</span>)</span></span>: String {
        <span class="hljs-keyword">var</span> cleanKey = privateKey.trim()
        <span class="hljs-comment">// ç§»é™¤0xå‰ç¼€</span>
        <span class="hljs-keyword">if</span> (cleanKey.startsWith(<span class="hljs-string">"0x"</span>)) {
            cleanKey = cleanKey.substring(<span class="hljs-number">2</span>)
        }
        <span class="hljs-comment">// è½¬æ¢ä¸ºå°å†™ç¡®ä¿ä¸€è‡´æ€§</span>
        <span class="hljs-keyword">return</span> cleanKey.toLowerCase()
    }
}

</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * é’±åŒ…ä¸»ç•Œé¢
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">WalletFragment</span> : <span class="hljs-type">Fragment</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _binding: FragmentWalletBinding? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> binding <span class="hljs-keyword">get</span>() = _binding!!

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> securityManager: SecurityManager
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> web3Service: Web3Service
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> currentAddress: String? = <span class="hljs-literal">null</span>

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateView</span><span class="hljs-params">(
        inflater: <span class="hljs-type">LayoutInflater</span>, container: <span class="hljs-type">ViewGroup</span>?,
        savedInstanceState: <span class="hljs-type">Bundle</span>?
    )</span></span>: View {
        _binding = FragmentWalletBinding.inflate(inflater, container, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> binding.root
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)

        securityManager = SecurityManager(requireContext())
        web3Service = Web3Service()

        setupUI()
        loadWalletData()
        setupClickListeners()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setupUI</span><span class="hljs-params">()</span></span> {
        currentAddress = securityManager.getCurrentWallet()
        currentAddress?.let { address -&gt;
            binding.tvAddress.text = formatAddress(address)
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">loadWalletData</span><span class="hljs-params">()</span></span> {
        currentAddress?.let { address -&gt;
            lifecycleScope.launch {
                <span class="hljs-keyword">try</span> {
                    <span class="hljs-keyword">val</span> balance = web3Service.getBalance(address)
                    <span class="hljs-keyword">val</span> etherBalance = Convert.fromWei(BigDecimal(balance), Convert.<span class="hljs-built_in">Unit</span>.ETHER)

                    binding.tvBalance.text = <span class="hljs-string">"<span class="hljs-subst">${etherBalance.setScale(<span class="hljs-number">4</span>, BigDecimal.ROUND_HALF_UP)}</span> ETH"</span>
                    binding.tvBalanceFiat.text = <span class="hljs-string">"â‰ˆ $<span class="hljs-subst">${(etherBalance.toDouble() * <span class="hljs-number">1800</span>).format(<span class="hljs-number">2</span>)}</span>"</span>

                } <span class="hljs-keyword">catch</span> (e: Exception) {
                    showError(<span class="hljs-string">"è·å–ä½™é¢å¤±è´¥: <span class="hljs-subst">${e.message}</span>"</span>)
                }
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setupClickListeners</span><span class="hljs-params">()</span></span> {
        binding.btnCopyAddress.setOnClickListener {
            currentAddress?.let { address -&gt;
                copyToClipboard(address)
                showMessage(<span class="hljs-string">"åœ°å€å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"</span>)
            }
        }

        binding.btnSend.setOnClickListener {
            showMessage(<span class="hljs-string">"å‘é€åŠŸèƒ½å¼€å‘ä¸­..."</span>)
        }

        binding.btnReceive.setOnClickListener {
            showMessage(<span class="hljs-string">"æ¥æ”¶åŠŸèƒ½å¼€å‘ä¸­..."</span>)
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">formatAddress</span><span class="hljs-params">(address: <span class="hljs-type">String</span>)</span></span>: String {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">if</span> (address.length &gt; <span class="hljs-number">12</span>) {
            <span class="hljs-string">"<span class="hljs-subst">${address.substring(<span class="hljs-number">0</span>, <span class="hljs-number">6</span>)}</span>...<span class="hljs-subst">${address.substring(address.length - <span class="hljs-number">6</span>)}</span>"</span>
        } <span class="hljs-keyword">else</span> {
            address
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">copyToClipboard</span><span class="hljs-params">(text: <span class="hljs-type">String</span>)</span></span> {
        <span class="hljs-keyword">val</span> clipboard = requireContext().getSystemService(Context.CLIPBOARD_SERVICE) <span class="hljs-keyword">as</span> ClipboardManager
        <span class="hljs-keyword">val</span> clip = ClipData.newPlainText(<span class="hljs-string">"é’±åŒ…åœ°å€"</span>, text)
        clipboard.setPrimaryClip(clip)
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showMessage</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        android.widget.Toast.makeText(requireContext(), message, android.widget.Toast.LENGTH_SHORT).show()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showError</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        android.widget.Toast.makeText(requireContext(), message, android.widget.Toast.LENGTH_LONG).show()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-built_in">Double</span>.<span class="hljs-title">format</span><span class="hljs-params">(digits: <span class="hljs-type">Int</span>)</span></span> = <span class="hljs-string">"%.<span class="hljs-subst">${digits}</span>f"</span>.format(<span class="hljs-keyword">this</span>)

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroyView</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onDestroyView()
        _binding = <span class="hljs-literal">null</span>
    }
}

</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * è®¾ç½®
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SettingsFragment</span> : <span class="hljs-type">Fragment</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _binding: FragmentSettingsBinding? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> binding <span class="hljs-keyword">get</span>() = _binding!!
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> securityManager: SecurityManager

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateView</span><span class="hljs-params">(
        inflater: <span class="hljs-type">LayoutInflater</span>, container: <span class="hljs-type">ViewGroup</span>?,
        savedInstanceState: <span class="hljs-type">Bundle</span>?
    )</span></span>: View {
        _binding = FragmentSettingsBinding.inflate(inflater, container, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> binding.root
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)

        securityManager = SecurityManager(requireContext())

        binding.btnClearData.setOnClickListener {
            securityManager.clearAllData()
            showMessage(<span class="hljs-string">"æ•°æ®å·²æ¸…é™¤"</span>)

            requireActivity().supportFragmentManager.beginTransaction()
                .replace(R.id.fragment_container, CreateWalletFragment())
                .commit()

            (requireActivity() <span class="hljs-keyword">as</span> MainActivity).hideBottomNavigation()
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showMessage</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        android.widget.Toast.makeText(requireContext(), message, android.widget.Toast.LENGTH_SHORT)
            .show()
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroyView</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onDestroyView()
        _binding = <span class="hljs-literal">null</span>
    }
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * å¯¼å…¥ç§é’¥é¡µé¢
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ImportPrivateKeyFragment</span> : <span class="hljs-type">Fragment</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _binding: FragmentImportPrivateKeyBinding? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> binding <span class="hljs-keyword">get</span>() = _binding!!

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> securityManager: SecurityManager
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> web3Service: Web3Service

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateView</span><span class="hljs-params">(
        inflater: <span class="hljs-type">LayoutInflater</span>, container: <span class="hljs-type">ViewGroup</span>?,
        savedInstanceState: <span class="hljs-type">Bundle</span>?
    )</span></span>: View {
        _binding = FragmentImportPrivateKeyBinding.inflate(inflater, container, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> binding.root
    }

    <span class="hljs-meta">@RequiresApi(Build.VERSION_CODES.M)</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)

        securityManager = SecurityManager(requireContext())
        web3Service = Web3Service()

        binding.btnImport.setOnClickListener {
            importWalletFromPrivateKey()
        }
    }

    <span class="hljs-meta">@RequiresApi(Build.VERSION_CODES.M)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">importWalletFromPrivateKey</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> privateKey = binding.etPrivateKey.text.toString().trim()

        <span class="hljs-keyword">if</span> (privateKey.isEmpty()) {
            showError(<span class="hljs-string">"è¯·è¾“å…¥ç§é’¥"</span>)
            <span class="hljs-keyword">return</span>
        }

        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> credentials = web3Service.importWalletFromPrivateKey(privateKey)

            <span class="hljs-keyword">val</span> encryptedPrivateKey = securityManager.encryptData(privateKey)

            securityManager.saveWalletData(
                credentials.address,
                encryptedPrivateKey,
                <span class="hljs-literal">null</span>
            )

            (requireActivity() <span class="hljs-keyword">as</span> MainActivity).showBottomNavigation()
            requireActivity().supportFragmentManager.beginTransaction()
                .replace(R.id.fragment_container, com.learn.web3walletdemo.ui.wallet.WalletFragment())
                .commit()

            showMessage(<span class="hljs-string">"é’±åŒ…å¯¼å…¥æˆåŠŸ"</span>)

        } <span class="hljs-keyword">catch</span> (e: Exception) {
            showError(<span class="hljs-string">"å¯¼å…¥é’±åŒ…å¤±è´¥: <span class="hljs-subst">${e.message}</span>"</span>)
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showError</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        android.widget.Toast.makeText(requireContext(), message, android.widget.Toast.LENGTH_LONG).show()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showMessage</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        android.widget.Toast.makeText(requireContext(), message, android.widget.Toast.LENGTH_SHORT).show()
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroyView</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onDestroyView()
        _binding = <span class="hljs-literal">null</span>
    }
}
</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * å¯¼å…¥åŠ©è®°è¯é¡µé¢
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ImportMnemonicFragment</span> : <span class="hljs-type">Fragment</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _binding: FragmentImportMnemonicBinding? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> binding <span class="hljs-keyword">get</span>() = _binding!!

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> securityManager: SecurityManager
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> web3Service: Web3Service

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateView</span><span class="hljs-params">(
        inflater: <span class="hljs-type">LayoutInflater</span>, container: <span class="hljs-type">ViewGroup</span>?,
        savedInstanceState: <span class="hljs-type">Bundle</span>?
    )</span></span>: View {
        _binding = FragmentImportMnemonicBinding.inflate(inflater, container, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> binding.root
    }

    <span class="hljs-meta">@RequiresApi(Build.VERSION_CODES.M)</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)

        securityManager = SecurityManager(requireContext())
        web3Service = Web3Service()

        binding.btnImport.setOnClickListener {
            importWalletFromMnemonic()
        }
    }

    <span class="hljs-meta">@RequiresApi(Build.VERSION_CODES.M)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">importWalletFromMnemonic</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> mnemonic = binding.etMnemonic.text.toString().trim()

        <span class="hljs-keyword">if</span> (mnemonic.isEmpty()) {
            showError(<span class="hljs-string">"è¯·è¾“å…¥åŠ©è®°è¯"</span>)
            <span class="hljs-keyword">return</span>
        }

        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> password = <span class="hljs-string">"default_password"</span>
            <span class="hljs-keyword">val</span> walletInfo = web3Service.createWalletFromMnemonic(mnemonic, password)

            <span class="hljs-keyword">val</span> encryptedPrivateKey = securityManager.encryptData(walletInfo.privateKey)
            <span class="hljs-keyword">val</span> encryptedMnemonic = securityManager.encryptData(mnemonic)

            securityManager.saveWalletData(
                walletInfo.address,
                encryptedPrivateKey,
                encryptedMnemonic
            )

            (requireActivity() <span class="hljs-keyword">as</span> MainActivity).showBottomNavigation()
            requireActivity().supportFragmentManager.beginTransaction()
                .replace(R.id.fragment_container, WalletFragment())
                .commit()

            showMessage(<span class="hljs-string">"é’±åŒ…å¯¼å…¥æˆåŠŸ"</span>)

        } <span class="hljs-keyword">catch</span> (e: Exception) {
            showError(<span class="hljs-string">"å¯¼å…¥é’±åŒ…å¤±è´¥: <span class="hljs-subst">${e.message}</span>"</span>)
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showError</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        android.widget.Toast.makeText(requireContext(), message, android.widget.Toast.LENGTH_LONG).show()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showMessage</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        android.widget.Toast.makeText(requireContext(), message, android.widget.Toast.LENGTH_SHORT).show()
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroyView</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onDestroyView()
        _binding = <span class="hljs-literal">null</span>
    }
}

</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin">
<span class="hljs-comment">/**
 * 1. CreateWalletFragment (åˆ›å»ºé’±åŒ…é¡µé¢)
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateWalletFragment</span> : <span class="hljs-type">Fragment</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _binding: FragmentCreateWalletBinding? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> binding <span class="hljs-keyword">get</span>() = _binding!!

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> securityManager: SecurityManager
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> web3Service: Web3Service

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateView</span><span class="hljs-params">(
        inflater: <span class="hljs-type">LayoutInflater</span>, container: <span class="hljs-type">ViewGroup</span>?,
        savedInstanceState: <span class="hljs-type">Bundle</span>?
    )</span></span>: View {
        _binding = FragmentCreateWalletBinding.inflate(inflater, container, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> binding.root
    }

    <span class="hljs-meta">@RequiresApi(Build.VERSION_CODES.M)</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)

        securityManager = SecurityManager(requireContext())
        web3Service = Web3Service()

        setupClickListeners()
    }

    <span class="hljs-meta">@RequiresApi(Build.VERSION_CODES.M)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setupClickListeners</span><span class="hljs-params">()</span></span> {
        binding.btnCreateNew.setOnClickListener {
            createNewWallet()
        }

        binding.btnImportMnemonic.setOnClickListener {
            replaceFragment(ImportMnemonicFragment())
        }

        binding.btnImportPrivateKey.setOnClickListener {
            replaceFragment(ImportPrivateKeyFragment())
        }
    }

    <span class="hljs-meta">@RequiresApi(Build.VERSION_CODES.M)</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createNewWallet</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">val</span> password = <span class="hljs-string">"default_password"</span>

        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">val</span> walletInfo = web3Service.createNewWallet()

            <span class="hljs-keyword">val</span> encryptedPrivateKey = securityManager.encryptData(walletInfo.privateKey)
            securityManager.saveWalletData(
                walletInfo.address,
                encryptedPrivateKey,
                <span class="hljs-literal">null</span>
            )

            <span class="hljs-keyword">val</span> backupFragment = BackupPrivateKeyFragment().apply {
                arguments = Bundle().apply {
                    putString(<span class="hljs-string">"privateKey"</span>, walletInfo.privateKey)
                    putString(<span class="hljs-string">"address"</span>, walletInfo.address)
                }
            }
            replaceFragment(backupFragment)

        } <span class="hljs-keyword">catch</span> (e: Exception) {
            Log.e(<span class="hljs-string">"aaaa"</span>, e.message.toString())
            showError(<span class="hljs-string">"åˆ›å»ºé’±åŒ…å¤±è´¥: <span class="hljs-subst">${e.message}</span>"</span>)
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">replaceFragment</span><span class="hljs-params">(fragment: <span class="hljs-type">Fragment</span>)</span></span> {
        requireActivity().supportFragmentManager.beginTransaction()
            .replace(R.id.fragment_container, fragment)
            .addToBackStack(<span class="hljs-literal">null</span>)
            .commit()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showError</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        android.widget.Toast.makeText(requireContext(), message, android.widget.Toast.LENGTH_LONG)
            .show()
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroyView</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onDestroyView()
        _binding = <span class="hljs-literal">null</span>
    }
}

</code></pre>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * å¤‡ä»½ç§é’¥é¡µé¢
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">BackupPrivateKeyFragment</span> : <span class="hljs-type">Fragment</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _binding: FragmentBackupPrivateKeyBinding? = <span class="hljs-literal">null</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> binding <span class="hljs-keyword">get</span>() = _binding!!

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> privateKey: String
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> address: String

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreateView</span><span class="hljs-params">(
        inflater: <span class="hljs-type">LayoutInflater</span>, container: <span class="hljs-type">ViewGroup</span>?,
        savedInstanceState: <span class="hljs-type">Bundle</span>?
    )</span></span>: View {
        _binding = FragmentBackupPrivateKeyBinding.inflate(inflater, container, <span class="hljs-literal">false</span>)
        <span class="hljs-keyword">return</span> binding.root
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onViewCreated</span><span class="hljs-params">(view: <span class="hljs-type">View</span>, savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onViewCreated(view, savedInstanceState)

        privateKey = arguments?.getString(<span class="hljs-string">"privateKey"</span>) ?: <span class="hljs-string">""</span>
        address = arguments?.getString(<span class="hljs-string">"address"</span>) ?: <span class="hljs-string">""</span>

        setupUI()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setupUI</span><span class="hljs-params">()</span></span> {
        binding.tvPrivateKey.text = privateKey
        binding.tvAddress.text = address

        binding.btnContinue.setOnClickListener {
            (requireActivity() <span class="hljs-keyword">as</span> MainActivity).showBottomNavigation()
            requireActivity().supportFragmentManager.beginTransaction()
                .replace(R.id.fragment_container, WalletFragment())
                .commit()
        }

        binding.btnCopyPrivateKey.setOnClickListener {
            copyToClipboard(privateKey)
            showMessage(<span class="hljs-string">"ç§é’¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿"</span>)
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">copyToClipboard</span><span class="hljs-params">(text: <span class="hljs-type">String</span>)</span></span> {
        <span class="hljs-keyword">val</span> clipboard = requireContext().getSystemService(Context.CLIPBOARD_SERVICE) <span class="hljs-keyword">as</span> ClipboardManager
        <span class="hljs-keyword">val</span> clip = ClipData.newPlainText(<span class="hljs-string">"ç§é’¥"</span>, text)
        clipboard.setPrimaryClip(clip)
    }

    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">showMessage</span><span class="hljs-params">(message: <span class="hljs-type">String</span>)</span></span> {
        android.widget.Toast.makeText(requireContext(), message, android.widget.Toast.LENGTH_SHORT).show()
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onDestroyView</span><span class="hljs-params">()</span></span> {
        <span class="hljs-keyword">super</span>.onDestroyView()
        _binding = <span class="hljs-literal">null</span>
    }
}

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å¯¼å‡ºé¡µé¢å†…å®¹ä¸ºPDF]]></title>    <link>https://juejin.cn/post/7578762210287239231</link>    <guid>https://juejin.cn/post/7578762210287239231</guid>    <pubDate>2025-12-02T02:45:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578762210287239231" data-draft-id="7578760341280800809" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å¯¼å‡ºé¡µé¢å†…å®¹ä¸ºPDF"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-02T02:45:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿«è½çš„å°æµ·ç–¼"/> <meta itemprop="url" content="https://juejin.cn/user/114004940573112"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å¯¼å‡ºé¡µé¢å†…å®¹ä¸ºPDF
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/114004940573112/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿«è½çš„å°æµ·ç–¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T02:45:26.000Z" title="Tue Dec 02 2025 02:45:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.å‰è¨€</h2>
<p>æ¥åˆ°ä¸€ä¸ªå°†çª—åˆåŒç­¾ç½²å¼¹çª—å¯¼å‡ºç›–ç« ä¹‹åçš„å†…å®¹ä¸ºPDFéœ€æ±‚ï¼Œé¦–å…ˆæƒ³åˆ°åç«¯å¯¼å‡ºï¼Œåç«¯åé¦ˆå¯¼å‡ºæ ·å¼æŠŠæ§å›°éš¾ï¼Œå®ç°æ—¶é—´éå¸¸ä¹…ã€‚å‰ç«¯è¢«è¿«æ¥æ´»å¯¼å‡ºPDFğŸ¤¡ã€‚</p>
<h2 data-id="heading-1">2.å®ç°æ–¹æ¡ˆ</h2>
<p>é‡‡ç”¨html2Canvaså¯¹é¡µé¢å†…å®¹è¿›è¡Œæˆªå›¾ï¼Œç”Ÿæˆé¡µé¢å†…å®¹å¯¹åº”çš„å›¾ç‰‡ï¼Œä¹‹åé€šè¿‡JsPDFå°†å›¾ç‰‡æ·»åŠ åˆ°pdfæ–‡ä»¶ï¼Œå¹¶å¯¼å‡ºä¸ºPDFæ–‡ä»¶</p>
<p>html2Canvas + JsPDF</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> html2Canvas <span class="hljs-keyword">from</span> <span class="hljs-string">'html2canvas'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">JsPDF</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'jspdf'</span>
</code></pre>
<h2 data-id="heading-2">3.å…·ä½“ä»£ç å®ç°</h2>
<p>å…·ä½“ä»£ç ä½ç½®ï¼špv-admin\src\views\devopsManage\noticeManage\list\components\previewDialog.vue</p>
<p>è¿™é‡Œå¤§æ¦‚é˜è¿°ä¸€ä¸‹ä»£ç é€»è¾‘ã€‚</p>
<p>1.é‡‡ç”¨html2Canvasç”Ÿæˆä¸€å¼ å®Œæ•´çš„å›¾ç‰‡</p>
<p>2.åˆ¤æ–­å›¾ç‰‡æ˜¯å¦å¤§äºä¸€é¡µï¼Œå¦‚æœåªæœ‰ä¸€é¡µåˆ™é€šè¿‡pdf.addImageæ–¹æ³•å¡å…¥pdf</p>
<p>3.å¦‚æœå›¾ç‰‡é•¿åº¦å¤§äºä¸€é¡µï¼Œåˆ™éœ€è¦å°†å›¾ç‰‡åˆ†å‰²ç”Ÿæˆå¤šé¡µï¼Œè¿™é‡Œå›¾ç‰‡åˆ†å‰²é‡‡ç”¨çš„æ–¹æ¡ˆæ˜¯ï¼Œé€šè¿‡canvasçš„drawImageæ–¹æ³•æ¸²æŸ“å›¾ç‰‡çš„æŸä¸ªé«˜åº¦åˆ°æŸä¸ªé«˜åº¦çš„å†…å®¹ï¼Œç„¶åå†è½¬æˆå›¾ç‰‡ï¼Œç„¶åé€šè¿‡pdf.addImageä¸€é¡µä¸€é¡µçš„å¡åˆ°pdf</p>
<p>4.é€šè¿‡pdf.output('blob')æ—¢å¯è·å–pdfæ–‡ä»¶æµã€‚</p>
<pre><code class="hljs language-java" lang="java">async <span class="hljs-title function_">generatePdf</span><span class="hljs-params">()</span> {
  <span class="hljs-built_in">this</span>.loading = <span class="hljs-literal">true</span>
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// å¯¼å‡ºå†…å®¹å¯¹åº”çš„domçš„ref</span>
    <span class="hljs-type">const</span> <span class="hljs-variable">element</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.$refs.rightContent
    <span class="hljs-type">const</span> <span class="hljs-variable">canvas</span> <span class="hljs-operator">=</span> await <span class="hljs-title function_">html2Canvas</span><span class="hljs-params">(element, {
      allowTaint: <span class="hljs-literal">true</span>,
      useCORS: <span class="hljs-literal">true</span>,
      scale: <span class="hljs-number">2</span>,
      logging: <span class="hljs-literal">false</span>,
      letterRendering: <span class="hljs-literal">true</span>,
    })</span>
    
    <span class="hljs-type">const</span> <span class="hljs-variable">imgData</span> <span class="hljs-operator">=</span> canvas.toDataURL(<span class="hljs-string">'image/jpeg'</span>, <span class="hljs-number">1.0</span>)
    <span class="hljs-comment">// åˆå§‹åŒ–ä¸€ä¸ªA4çº¸å¤§å°çš„PDF</span>
    <span class="hljs-type">const</span> <span class="hljs-variable">pdf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsPDF</span>(<span class="hljs-string">'p'</span>, <span class="hljs-string">'pt'</span>, <span class="hljs-string">'a4'</span>)
    
    <span class="hljs-comment">// è·å–PDFçš„å®½åº¦å’Œé«˜åº¦</span>
    <span class="hljs-type">const</span> <span class="hljs-variable">pdfWidth</span> <span class="hljs-operator">=</span> pdf.internal.pageSize.getWidth()
    <span class="hljs-type">const</span> <span class="hljs-variable">pdfHeight</span> <span class="hljs-operator">=</span> pdf.internal.pageSize.getHeight()
    
    <span class="hljs-comment">// è®¾ç½®é¡µé¢è¾¹è·</span>
    <span class="hljs-type">const</span> <span class="hljs-variable">marginTop</span> <span class="hljs-operator">=</span> <span class="hljs-number">40</span>
    <span class="hljs-type">const</span> <span class="hljs-variable">marginBottom</span> <span class="hljs-operator">=</span> <span class="hljs-number">60</span>
    
    <span class="hljs-comment">// è®¡ç®—å›¾ç‰‡çš„å®½åº¦å’Œé«˜åº¦åŠæ¯”ä¾‹</span>
    <span class="hljs-type">const</span> <span class="hljs-variable">imgWidth</span> <span class="hljs-operator">=</span> canvas.width
    <span class="hljs-type">const</span> <span class="hljs-variable">imgHeight</span> <span class="hljs-operator">=</span> canvas.height
    <span class="hljs-type">const</span> <span class="hljs-variable">ratio</span> <span class="hljs-operator">=</span> pdfWidth / imgWidth
    <span class="hljs-type">const</span> <span class="hljs-variable">scaledImgHeight</span> <span class="hljs-operator">=</span> imgHeight * ratio
    
    <span class="hljs-comment">// ä½¿ç”¨æ–°çš„åˆ†é¡µæ–¹æ³•ï¼šæŒ‰ç…§é¡µé¢é«˜åº¦åˆ‡å‰²åŸå§‹å›¾åƒ</span>
    <span class="hljs-keyword">if</span> (scaledImgHeight &lt;= pdfHeight - marginTop - marginBottom) {
      <span class="hljs-comment">// å¦‚æœå†…å®¹é«˜åº¦ä¸è¶…è¿‡ä¸€é¡µï¼Œç›´æ¥æ·»åŠ å›¾åƒ</span>
      pdf.addImage(imgData, <span class="hljs-string">'JPEG'</span>, <span class="hljs-number">0</span>, marginTop, pdfWidth, scaledImgHeight)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å¦‚æœå†…å®¹è¶…è¿‡ä¸€é¡µï¼Œä½¿ç”¨å¤šé¡µPDF</span>
      <span class="hljs-type">let</span> <span class="hljs-variable">remainingHeight</span> <span class="hljs-operator">=</span> imgHeight
      <span class="hljs-type">let</span> <span class="hljs-variable">yOffset</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
      <span class="hljs-type">let</span> <span class="hljs-variable">pageCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>
      
      <span class="hljs-keyword">while</span> (remainingHeight &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// è®¡ç®—å½“å‰é¡µèƒ½æ˜¾ç¤ºçš„é«˜åº¦(ä»¥åŸå§‹å›¾åƒé«˜åº¦è®¡ç®—)</span>
        <span class="hljs-type">const</span> <span class="hljs-variable">pageHeightInCanvas</span> <span class="hljs-operator">=</span> ((pdfHeight - marginTop - marginBottom) / ratio)
        <span class="hljs-comment">// è®¡ç®—å®é™…å¯ç”¨çš„é«˜åº¦</span>
        <span class="hljs-type">const</span> <span class="hljs-variable">heightToPrint</span> <span class="hljs-operator">=</span> Math.min(pageHeightInCanvas, remainingHeight)
        <span class="hljs-comment">// è½¬æ¢ä¸ºPDFä¸Šå®é™…é«˜åº¦</span>
        <span class="hljs-type">const</span> <span class="hljs-variable">heightOnPdf</span> <span class="hljs-operator">=</span> heightToPrint * ratio
        
        <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„canvasï¼ŒåªåŒ…å«å½“å‰é¡µéœ€è¦çš„éƒ¨åˆ†</span>
        <span class="hljs-type">const</span> <span class="hljs-variable">tmpCanvas</span> <span class="hljs-operator">=</span> document.createElement(<span class="hljs-string">'canvas'</span>)
        tmpCanvas.width = imgWidth
        tmpCanvas.height = heightToPrint
        
        <span class="hljs-type">const</span> <span class="hljs-variable">ctx</span> <span class="hljs-operator">=</span> tmpCanvas.getContext(<span class="hljs-string">'2d'</span>)
        <span class="hljs-comment">// å°†åŸå§‹canvasçš„ç‰¹å®šéƒ¨åˆ†ç»˜åˆ¶åˆ°ä¸´æ—¶canvas</span>
        ctx.drawImage(
          canvas,
          <span class="hljs-number">0</span>, yOffset, <span class="hljs-comment">// æºå›¾åƒçš„èµ·å§‹ä½ç½®</span>
          imgWidth, heightToPrint, <span class="hljs-comment">// æºå›¾åƒçš„å®½é«˜</span>
          <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-comment">// ç›®æ ‡èµ·å§‹ä½ç½®</span>
          imgWidth, heightToPrint <span class="hljs-comment">// ç›®æ ‡å®½é«˜</span>
        )
        
        <span class="hljs-comment">// å¦‚æœä¸æ˜¯ç¬¬ä¸€é¡µï¼Œæ·»åŠ æ–°é¡µ</span>
        <span class="hljs-keyword">if</span> (pageCount &gt; <span class="hljs-number">0</span>) {
          pdf.addPage()
        }
        
        <span class="hljs-comment">// å°†å½“å‰é¡µç»˜åˆ¶åˆ°PDF</span>
        <span class="hljs-type">const</span> <span class="hljs-variable">pageImgData</span> <span class="hljs-operator">=</span> tmpCanvas.toDataURL(<span class="hljs-string">'image/jpeg'</span>, <span class="hljs-number">1.0</span>)
        pdf.addImage(pageImgData, <span class="hljs-string">'JPEG'</span>, <span class="hljs-number">0</span>, marginTop, pdfWidth, heightOnPdf)
        
        <span class="hljs-comment">// æ›´æ–°å‰©ä½™é«˜åº¦å’Œå‚ç›´åç§»</span>
        remainingHeight -= heightToPrint
        yOffset += heightToPrint
        pageCount++
      }
    }
    
    <span class="hljs-comment">// è·å–PDFçš„blobå¯¹è±¡</span>
    <span class="hljs-type">const</span> <span class="hljs-variable">pdfBlob</span> <span class="hljs-operator">=</span> pdf.output(<span class="hljs-string">'blob'</span>)
    <span class="hljs-comment">// åˆ›å»ºFileå¯¹è±¡</span>
    <span class="hljs-type">const</span> <span class="hljs-variable">fileName</span> <span class="hljs-operator">=</span> `è¿ç»´å·¥ä½œå‘ŠçŸ¥å‡½_${<span class="hljs-built_in">this</span>.detail.noticeNo}.pdf`
    <span class="hljs-type">const</span> <span class="hljs-variable">pdfFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>([pdfBlob], fileName, { type: <span class="hljs-string">'application/pdf'</span> })
    
    <span class="hljs-comment">// ç”Ÿæˆæ–‡ä»¶è·¯å¾„</span>
    <span class="hljs-type">const</span> <span class="hljs-variable">filePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">'/notice/'</span> + <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().getTime() + <span class="hljs-string">'/'</span> + fileName
    
    <span class="hljs-comment">// ç›´æ¥ä¸Šä¼ æ–‡ä»¶</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-type">const</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> await <span class="hljs-title function_">UploadFile</span><span class="hljs-params">(pdfFile, filePath, filePath.substring(<span class="hljs-number">1</span>)</span>)
      <span class="hljs-keyword">if</span> (res &amp;&amp; res.url) {
        <span class="hljs-built_in">this</span>.queryFn(res.url)
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-built_in">this</span>.$message.error(<span class="hljs-string">'ç”ŸæˆPDFå¤±è´¥'</span>)
      }
    } <span class="hljs-keyword">catch</span> (error) {
      console.error(<span class="hljs-string">'ä¸Šä¼ PDFå¤±è´¥:'</span>, error)
      <span class="hljs-built_in">this</span>.$message.error(<span class="hljs-string">'ä¸Šä¼ PDFå¤±è´¥'</span>)
    }
  } <span class="hljs-keyword">catch</span> (error) {
    console.error(<span class="hljs-string">'ç”ŸæˆPDFå¤±è´¥:'</span>, error)
    <span class="hljs-built_in">this</span>.$message.error(<span class="hljs-string">'ç”ŸæˆPDFå¤±è´¥'</span>)
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-built_in">this</span>.loading = <span class="hljs-literal">false</span>
  }
},
</code></pre>
<h2 data-id="heading-3">4.æ•ˆæœå±•ç¤º</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcfpamf.yuque.com%2Fattachments%2Fyuque%2F0%2F2025%2Fpdf%2F1684650%2F1753669474022-7e5324e0-774c-48c6-a5b8-b8b0f6f202f2.pdf" target="_blank" title="https://cfpamf.yuque.com/attachments/yuque/0/2025/pdf/1684650/1753669474022-7e5324e0-774c-48c6-a5b8-b8b0f6f202f2.pdf" ref="nofollow noopener noreferrer">ğŸ“è¿ç»´å·¥ä½œå‘ŠçŸ¥å‡½_YW202507-02.pdf</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a187fe57ed7f4531b6cb10d8b7f0fb92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5b-r6JC955qE5bCP5rW355a8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765248326&amp;x-signature=%2B4H8yRk8ulnWMoPvsRUBtkFmgks%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">5.å­˜åœ¨é—®é¢˜</h2>
<p>é‡‡ç”¨html2Canvasç”Ÿæˆçš„å›¾ç‰‡ï¼Œå¦‚æœè¿‡é•¿ï¼Œåˆ†é¡µæ—¶ï¼Œåˆ†é¡µæˆªæ–­çš„ä½ç½®ä¸å¥½æ§åˆ¶ï¼Œä¼šå‡ºç°éƒ¨åˆ†æ¨¡å—è¢«åˆ†å‰²åˆ°ä¸¤é¡µï¼ˆå“ªæ€•ä¸€è¡Œå­—ä¹Ÿçœ‹ä¹Ÿèƒ½ä¼šè¢«ä»ä¸­é—´æˆªæ–­å±•ç¤ºï¼‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¨å±€é‡å¤æ¥å£å–æ¶ˆ&é‡å¤æç¤º]]></title>    <link>https://juejin.cn/post/7578811288819023915</link>    <guid>https://juejin.cn/post/7578811288819023915</guid>    <pubDate>2025-12-02T02:46:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578811288819023915" data-draft-id="7578760249949143094" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¨å±€é‡å¤æ¥å£å–æ¶ˆ&amp;é‡å¤æç¤º"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-02T02:46:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¿«è½çš„å°æµ·ç–¼"/> <meta itemprop="url" content="https://juejin.cn/user/114004940573112"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¨å±€é‡å¤æ¥å£å–æ¶ˆ&amp;é‡å¤æç¤º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/114004940573112/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¿«è½çš„å°æµ·ç–¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T02:46:35.000Z" title="Tue Dec 02 2025 02:46:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    23
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é‡å¤æ¥å£å–æ¶ˆ</h2>
<h3 data-id="heading-1">æ€è·¯</h3>
<p>æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªpendingMapå¯¹è±¡ï¼Œå®ƒç”¨äºå­˜å‚¨æ¯ä¸ªè¯·æ±‚çš„æ ‡è¯†ï¼ˆè¯·æ±‚è·¯å¾„ã€è¯·æ±‚æ–¹å¼ã€è¯·æ±‚å‚æ•°3ä¸ªç»´åº¦å”¯ä¸€æ ‡è¯†ï¼‰å’Œå–æ¶ˆå‡½æ•°ã€‚å½“è¯·æ±‚è¢«å‘å‡ºæ—¶ï¼Œæˆ‘ä»¬å°†å…¶æ·»åŠ åˆ°pendingMapä¸­ã€‚å†æ¬¡è°ƒç”¨pendingMapå­˜åœ¨æ­¤è¯·æ±‚ï¼Œåˆ™å–æ¶ˆè¯·æ±‚ï¼Œå¦å¤–å†æ­¤æ¥å£è¿”å›æ—¶ï¼ŒåŒæ ·å–æ¶ˆè¯·æ±‚ã€‚</p>
<h3 data-id="heading-2">å®ç°</h3>
<p>1ã€åˆ›å»ºAxiosCancelerç±»ï¼Œå®šä¹‰äº†addPendingã€removeAllPendingå’ŒremovePendingä¸‰ä¸ªæ–¹æ³•ã€‚addPendingæ–¹æ³•ç”¨äºå°†è¯·æ±‚æ·»åŠ åˆ°pendingMapä¸­ã€‚removeAllPendingæ–¹æ³•å¯ä»¥ç”¨äºå–æ¶ˆæ‰€æœ‰è¯·æ±‚ï¼Œè€ŒremovePendingæ–¹æ³•å¯ä»¥ç”¨äºå–æ¶ˆå•ä¸ªè¯·æ±‚ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp">import type { AxiosRequestConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>
import { generateRequestCode } <span class="hljs-keyword">from</span> <span class="hljs-string">'./index'</span>

<span class="hljs-comment">// ç”¨äºå­˜å‚¨æ¯ä¸ªè¯·æ±‚çš„æ ‡è¯†å’Œå–æ¶ˆå‡½æ•°</span>
<span class="hljs-keyword">const</span> pendingMap = <span class="hljs-keyword">new</span> Map&lt;<span class="hljs-built_in">string</span>, AbortController&gt;()

export <span class="hljs-keyword">class</span> <span class="hljs-title">AxiosCanceler</span> {
  <span class="hljs-comment">/**
   * æ·»åŠ è¯·æ±‚
   * @param config è¯·æ±‚é…ç½®
   */</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">addPending</span>(<span class="hljs-params">config: AxiosRequestConfig</span>): <span class="hljs-keyword">void</span></span> {
    <span class="hljs-comment">// ç«‹åˆ»ç§»é™¤é‡å¤è¯·æ±‚</span>
    <span class="hljs-keyword">this</span>.removePending(config)
    <span class="hljs-comment">// è¯·æ±‚å”¯ä¸€æ ‡è¯†code</span>
    <span class="hljs-keyword">const</span> requestCode = generateRequestCode(config)
    <span class="hljs-comment">// å–æ¶ˆè¯·æ±‚å¯¹è±¡</span>
    <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> AbortController()
    config.signal = controller.<span class="hljs-function">signal
    <span class="hljs-title">if</span> (<span class="hljs-params">!pendingMap.has(requestCode</span>))</span> {
      <span class="hljs-comment">// å¦‚æœå½“å‰è¯·æ±‚ä¸åœ¨ç­‰å¾…ä¸­ï¼Œå°†å…¶æ·»åŠ åˆ°ç­‰å¾…ä¸­</span>
      pendingMap.<span class="hljs-keyword">set</span>(requestCode, controller)
    }
  }

  <span class="hljs-comment">/**
   * æ¸…é™¤æ‰€æœ‰ç­‰å¾…ä¸­çš„è¯·æ±‚
   */</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">removeAllPending</span>(): <span class="hljs-keyword">void</span></span> {
    pendingMap.forEach((abortController) =&gt; {
      <span class="hljs-keyword">if</span> (abortController) {
        abortController.abort()
      }
    })
    <span class="hljs-keyword">this</span>.reset()
  }

  <span class="hljs-comment">/**
   * ç§»é™¤è¯·æ±‚
   * @param config è¯·æ±‚é…ç½®
   */</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">removePending</span>(<span class="hljs-params">config: AxiosRequestConfig</span>): <span class="hljs-keyword">void</span></span> {
    <span class="hljs-keyword">const</span> requestCode = generateRequestCode(config)
    <span class="hljs-keyword">if</span> (pendingMap.has(requestCode)) {
      <span class="hljs-comment">// å¦‚æœå½“å‰è¯·æ±‚åœ¨ç­‰å¾…ä¸­ï¼Œå–æ¶ˆå®ƒå¹¶å°†å…¶ä»ç­‰å¾…ä¸­ç§»é™¤</span>
      <span class="hljs-keyword">const</span> abortController = pendingMap.<span class="hljs-keyword">get</span>(requestCode)
      <span class="hljs-keyword">if</span> (abortController) {
        abortController.abort(requestCode)
      }
      pendingMap.delete(requestCode)
    }
  }

  <span class="hljs-comment">/**
   * é‡ç½®
   */</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">reset</span>(): <span class="hljs-keyword">void</span></span> {
    pendingMap.clear()
  }
}
</code></pre>
<p>2ã€åˆ›å»ºè·å–å”¯ä¸€æ ‡è¯†è¯·æ±‚codeçš„æ–¹æ³•generateRequestCodeï¼Œé€šè¿‡urlã€methodã€dataã€paramsæ¥å”¯ä¸€æ ‡è¯†</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">AxiosRequestConfig</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>

<span class="hljs-comment">/**
 * æ ‡å‡†åŒ–å‚æ•°å¯¹è±¡
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Record&lt;string, any&gt; | null | undefined</span>} <span class="hljs-variable">params</span> - éœ€è¦æ ‡å‡†åŒ–çš„å‚æ•°
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Record&lt;string, any&gt;</span>} - æ ‡å‡†åŒ–åçš„å‚æ•°å¯¹è±¡
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">normalizeParams</span>(<span class="hljs-params">params?: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span></span>): <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; {
  <span class="hljs-comment">// å¤„ç†undefinedå’Œæœªä¼ å‚çš„æƒ…å†µ</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">arguments</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span> || params === <span class="hljs-literal">undefined</span>) {
    <span class="hljs-keyword">return</span> {}
  }

  <span class="hljs-comment">// å¤„ç†nullå’Œå…¶ä»–ç©ºå€¼æƒ…å†µ</span>
  <span class="hljs-keyword">if</span> (params === <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">return</span> {}
  }

  <span class="hljs-comment">// å¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œå°è¯•è§£æä¸ºJSONå¯¹è±¡</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> params === <span class="hljs-string">'string'</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> parsed = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(params)
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> parsed === <span class="hljs-string">'object'</span> &amp;&amp; parsed !== <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">sortObjectDeep</span>(parsed)
      }
    } <span class="hljs-keyword">catch</span> (e) {
      <span class="hljs-comment">// è§£æå¤±è´¥ï¼Œè¿”å›ç©ºå¯¹è±¡</span>
    }
    <span class="hljs-keyword">return</span> {}
  }

  <span class="hljs-comment">// å¦‚æœä¸æ˜¯å¯¹è±¡ç±»å‹ï¼Œè¿”å›ç©ºå¯¹è±¡</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> params !== <span class="hljs-string">'object'</span>) {
    <span class="hljs-keyword">return</span> {}
  }

  <span class="hljs-comment">// å¦‚æœæ˜¯æ•°ç»„ï¼Œè¿”å›ç©ºå¯¹è±¡</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(params)) {
    <span class="hljs-keyword">return</span> {}
  }

  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦ä¸ºç©ºå¯¹è±¡</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(params).<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> {}
  }

  <span class="hljs-comment">// å¯¹éç©ºå¯¹è±¡è¿›è¡Œæ·±åº¦æ’åº</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">sortObjectDeep</span>(params)
}

<span class="hljs-comment">/**
 * æ·±åº¦æ’åºå¯¹è±¡
 * <span class="hljs-doctag">@template</span> <span class="hljs-variable">T</span> - è¾“å…¥å¯¹è±¡ç±»å‹
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">T</span>} <span class="hljs-variable">obj</span> - éœ€è¦æ’åºçš„å¯¹è±¡
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">T</span>} - æ’åºåçš„å¯¹è±¡
 */</span>
<span class="hljs-keyword">function</span> sortObjectDeep&lt;T&gt;(<span class="hljs-attr">obj</span>: T): T {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj !== <span class="hljs-string">'object'</span> || obj === <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">return</span> obj
  }

  <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(obj)) {
    <span class="hljs-keyword">return</span> obj.<span class="hljs-title function_">map</span>(sortObjectDeep).<span class="hljs-title function_">sort</span>() <span class="hljs-keyword">as</span> T
  }

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(obj <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;)
    .<span class="hljs-title function_">sort</span>()
    .<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">result: Record&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;, key: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
      result[key] = <span class="hljs-title function_">sortObjectDeep</span>((obj <span class="hljs-keyword">as</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;)[key])
      <span class="hljs-keyword">return</span> result
    }, {}) <span class="hljs-keyword">as</span> T
}

<span class="hljs-comment">/**
 * ç”Ÿæˆè¯·æ±‚å”¯ä¸€ç¼–ç 
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">AxiosRequestConfig</span>} <span class="hljs-variable">config</span> - Axiosè¯·æ±‚é…ç½®
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">string</span>} - å”¯ä¸€ç¼–ç 
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">generateRequestCode</span>(<span class="hljs-params">
  config: AxiosRequestConfig,
</span>): <span class="hljs-built_in">string</span> {
  <span class="hljs-comment">// ç¡®ä¿configå­˜åœ¨</span>
  <span class="hljs-keyword">if</span> (!config) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'è¯·æ±‚é…ç½®ä¸ºå¿…å¡«å‚æ•°'</span>)
  }

  <span class="hljs-comment">// ç¡®ä¿urlå’Œmethodå­˜åœ¨</span>
  <span class="hljs-keyword">if</span> (!config.<span class="hljs-property">url</span> || !config.<span class="hljs-property">method</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'URLå’Œmethodä¸ºå¿…å¡«å‚æ•°'</span>)
  }

  <span class="hljs-comment">// å¤„ç†paramsçš„ç‰¹æ®Šæƒ…å†µ</span>
  <span class="hljs-keyword">const</span> normalizedParams = <span class="hljs-title function_">normalizeParams</span>(config.<span class="hljs-property">params</span>)

  <span class="hljs-keyword">const</span> normalizedData = <span class="hljs-title function_">normalizeParams</span>(config.<span class="hljs-property">data</span>)
  <span class="hljs-comment">// æ‹¼æ¥å­—ç¬¦ä¸²</span>
  <span class="hljs-keyword">const</span> stringToHash = <span class="hljs-string">`<span class="hljs-subst">${config.url.toLowerCase()}</span>|<span class="hljs-subst">${config.method.toUpperCase()}</span>|<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(normalizedParams)}</span>|<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(normalizedData)}</span>`</span>
  
  <span class="hljs-keyword">return</span> stringToHash
}
</code></pre>
<p>3ã€ä¿®æ”¹è¯·æ±‚æ‹¦æˆªå™¨</p>
<pre><code class="hljs language-javascript" lang="javascript">instance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">config: AxiosRequestConfig</span>) =&gt;</span> {
    ... 
    axiosCanceler.<span class="hljs-title function_">addPending</span>(config)
    <span class="hljs-keyword">return</span> config
  },
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error.<span class="hljs-property">data</span>.<span class="hljs-property">error</span>.<span class="hljs-property">message</span>)
  },
)

<span class="hljs-comment">// å“åº”æ‹¦æˆªå™¨</span>
instance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) {
    ....
    <span class="hljs-comment">// ç§»é™¤è¯·æ±‚</span>
    axiosCanceler.<span class="hljs-title function_">removePending</span>(response.<span class="hljs-property">config</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(response)
  },
  <span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-comment">// è¯·æ±‚è¢«å–æ¶ˆæ—¶ï¼Œè¿”å›é”™è¯¯æç¤º</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isCancel</span>(error)) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">'é‡å¤è¯·æ±‚ï¼Œå·²å–æ¶ˆ'</span>)
    }
    <span class="hljs-comment">// ç§»é™¤è¯·æ±‚</span>
    <span class="hljs-keyword">const</span> { response } = error
    <span class="hljs-keyword">if</span> (response &amp;&amp; response.<span class="hljs-property">config</span>) {
      axiosCanceler.<span class="hljs-title function_">removePending</span>(response.<span class="hljs-property">config</span>)
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">config</span>) {
      <span class="hljs-comment">// å¤„ç†è¯·æ±‚è¢«å–æ¶ˆçš„æƒ…å†µ</span>
      axiosCanceler.<span class="hljs-title function_">removePending</span>(error.<span class="hljs-property">config</span>)
    }
    <span class="hljs-keyword">if</span> (response) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(response)
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">/*
       * å¤„ç†æ–­ç½‘çš„æƒ…å†µ
       * eg:è¯·æ±‚è¶…æ—¶æˆ–æ–­ç½‘æ—¶ï¼Œæ›´æ–°stateçš„networkçŠ¶æ€
       * networkçŠ¶æ€åœ¨app.vueä¸­æ§åˆ¶ç€ä¸€ä¸ªå…¨å±€çš„æ–­ç½‘æç¤ºç»„ä»¶çš„æ˜¾ç¤ºéšè—
       * åç»­å¢åŠ æ–­ç½‘æƒ…å†µä¸‹åšçš„ä¸€äº›æ“ä½œ
       */</span>
      <span class="hljs-comment">// æ–­ç½‘æƒ…å†µä¸‹ï¼Œæ¸…é™¤æ‰€æœ‰è¯·æ±‚</span>
      axiosCanceler.<span class="hljs-title function_">removeAllPending</span>()
    }
  },
)
<span class="hljs-comment">// åªéœ€è¦è€ƒè™‘å•ä¸€èŒè´£ï¼Œè¿™å—åªå°è£…axios</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> instance
</code></pre>
<h2 data-id="heading-3">é‡å¤æç¤º</h2>
<p>è¿™é‡Œæˆ‘æ˜¯é€šè¿‡ç›´æ¥äºŒæ¬¡å°è£…elementçš„æ¶ˆæ¯æç¤ºæ–¹æ³•ï¼Œæˆ‘è¿™é‡Œé‡‡ç”¨çš„æ˜¯vue3ï¼Œç»Ÿä¸€å…¥å£æ–¹å¼å»åšçš„ï¼Œå¦‚æœæ˜¯vue2ï¼Œå¯ä»¥åœ¨main.jså°†$messageæŒ‚è½½åˆ°thisä¹‹å‰åšä¸€ä¸‹é‡å†™</p>
<h3 data-id="heading-4">ä»£ç </h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElMessage</span>, <span class="hljs-title class_">MessageHandler</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>

<span class="hljs-comment">// é˜²æ­¢é‡å¤å¼¹çª—</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">messageInstance</span>: <span class="hljs-title class_">MessageHandler</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">MessageOptions</span> {
  <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-keyword">type</span>?: <span class="hljs-string">'success'</span> | <span class="hljs-string">'warning'</span> | <span class="hljs-string">'info'</span> | <span class="hljs-string">'error'</span>
  [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span>
}

<span class="hljs-keyword">const</span> mainMessage = (<span class="hljs-attr">options</span>: <span class="hljs-title class_">MessageOptions</span> | <span class="hljs-built_in">string</span>): <span class="hljs-function"><span class="hljs-params">MessageHandler</span> =&gt;</span> {
  <span class="hljs-comment">// å¦‚æœå¼¹çª—å·²å­˜åœ¨å…ˆå…³é—­</span>
  <span class="hljs-keyword">if</span> (messageInstance) {
    messageInstance.<span class="hljs-title function_">close</span>()
  }

  <span class="hljs-keyword">const</span> messageOptions = <span class="hljs-keyword">typeof</span> options === <span class="hljs-string">'string'</span>
    ? { <span class="hljs-attr">message</span>: options }
    : options

  messageInstance = <span class="hljs-title class_">ElMessage</span>(messageOptions)
  <span class="hljs-keyword">return</span> messageInstance
}


<span class="hljs-keyword">const</span> <span class="hljs-attr">extendedMainMessage</span>: <span class="hljs-built_in">any</span> = mainMessage

<span class="hljs-keyword">const</span> <span class="hljs-attr">arr</span>: <span class="hljs-title class_">Array</span>&lt;<span class="hljs-string">'success'</span> | <span class="hljs-string">'warning'</span> | <span class="hljs-string">'info'</span> | <span class="hljs-string">'error'</span>&gt; = [<span class="hljs-string">'success'</span>, <span class="hljs-string">'warning'</span>, <span class="hljs-string">'info'</span>, <span class="hljs-string">'error'</span>]
arr.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-keyword">type</span></span>) =&gt;</span> {
  extendedMainMessage[<span class="hljs-keyword">type</span>] = <span class="hljs-function">(<span class="hljs-params">options: MessageOptions | <span class="hljs-built_in">string</span></span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> messageOptions = <span class="hljs-keyword">typeof</span> options === <span class="hljs-string">'string'</span>
      ? { <span class="hljs-attr">message</span>: options }
      : { ...options }

    messageOptions.<span class="hljs-property">type</span> = <span class="hljs-keyword">type</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">mainMessage</span>(messageOptions)
  }
})

<span class="hljs-comment">// messageæ¶ˆæ¯æç¤º</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">$success</span> = (<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-title function_">mainMessage</span>({
    <span class="hljs-attr">message</span>: msg || <span class="hljs-string">'æ“ä½œæˆåŠŸ'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'success'</span>,
  })
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">$warning</span> = (<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-title function_">mainMessage</span>({
    <span class="hljs-attr">message</span>: msg || <span class="hljs-string">'æ“ä½œå¤±è´¥'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'warning'</span>,
  })
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">$error</span> = (<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-title function_">mainMessage</span>({
    <span class="hljs-attr">message</span>: msg || <span class="hljs-string">'æ“ä½œå¤±è´¥'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'error'</span>,
  })
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">$info</span> = (<span class="hljs-params">msg: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-title function_">mainMessage</span>({
    <span class="hljs-attr">message</span>: msg,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'info'</span>,
  })
}
</code></pre>
<h3 data-id="heading-5">ä½¿ç”¨</h3>
<p>æ­¤æ—¶è¿ç»­è°ƒç”¨å§‹ç»ˆåªä¼šæœ‰ä¸€ä¸ªæ¶ˆæ¯ä½“å‡ºç°ï¼ˆ<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>u</mi><mi>c</mi><mi>c</mi><mi>e</mi><mi>s</mi><mi>s</mi><mtext>ã€</mtext></mrow><annotation encoding="application/x-tex">successã€</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">s</span><span class="mord mathnormal">u</span><span class="mord mathnormal">ccess</span><span class="mord cjk_fallback">ã€</span></span></span></span></span>errorã€<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi><mi>a</mi><mi>r</mi><mi>n</mi><mi>i</mi><mi>n</mi><mi>g</mi><mtext>ã€</mtext></mrow><annotation encoding="application/x-tex">warningã€</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.02691em;">w</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">nin</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord cjk_fallback">ã€</span></span></span></span></span>infoå‡å…±ç”¨åŒä¸€ä¸ªæ¶ˆæ¯ä½“ï¼‰</p>
<pre><code class="hljs language-php" lang="php">import { <span class="hljs-variable">$error</span>, <span class="hljs-variable">$success</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/index'</span>

<span class="hljs-variable">$error</span>(<span class="hljs-string">'é”™è¯¯æç¤º1'</span>)
<span class="hljs-variable">$error</span>(<span class="hljs-string">'é”™è¯¯æç¤º2'</span>)
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ç¿»è¯‘ã€‘adbï¼ˆAndroid Debug Bridgeï¼‰ å¸®åŠ©æ–‡æ¡£]]></title>    <link>https://juejin.cn/post/7578793960626683930</link>    <guid>https://juejin.cn/post/7578793960626683930</guid>    <pubDate>2025-12-02T03:06:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578793960626683930" data-draft-id="7578803491821584411" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ç¿»è¯‘ã€‘adbï¼ˆAndroid Debug Bridgeï¼‰ å¸®åŠ©æ–‡æ¡£"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-02T03:06:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ²æ€¡æ—¸"/> <meta itemprop="url" content="https://juejin.cn/user/2875978146656750"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ç¿»è¯‘ã€‘adbï¼ˆAndroid Debug Bridgeï¼‰ å¸®åŠ©æ–‡æ¡£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978146656750/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ²æ€¡æ—¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:06:22.000Z" title="Tue Dec 02 2025 03:06:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><pre><code class="hljs language-arduino" lang="arduino">Android Debug <span class="hljs-built_in">Bridge</span> ç‰ˆæœ¬ <span class="hljs-number">1.0</span><span class="hljs-number">.41</span>
ç‰ˆæœ¬å· <span class="hljs-number">36.0</span><span class="hljs-number">.0</span><span class="hljs-number">-13206524</span>adb.exe
è¿è¡Œäº Windows <span class="hljs-number">10.0</span><span class="hljs-number">.26100</span>
</code></pre>
<pre><code class="hljs language-sql" lang="sql">å…¨å±€é€‰é¡¹ï¼š
 <span class="hljs-operator">-</span>a                       åœ¨æ‰€æœ‰ç½‘ç»œæ¥å£ä¸Šç›‘å¬ï¼Œè€Œä¸ä»…ä»…æ˜¯ localhost
 <span class="hljs-operator">-</span>d                       ä½¿ç”¨ USB è®¾å¤‡ï¼ˆå¦‚æœè¿æ¥äº†å¤šä¸ªè®¾å¤‡åˆ™æŠ¥é”™ï¼‰
 <span class="hljs-operator">-</span>e                       ä½¿ç”¨ TCP<span class="hljs-operator">/</span>IP è®¾å¤‡ï¼ˆå¦‚æœæœ‰å¤šä¸ªå¯ç”¨çš„ TCP<span class="hljs-operator">/</span>IP è®¾å¤‡åˆ™æŠ¥é”™ï¼‰
 <span class="hljs-operator">-</span>s åºåˆ—å·                ä½¿ç”¨æŒ‡å®šåºåˆ—å·çš„è®¾å¤‡ï¼ˆè¦†ç›– $ANDROID_SERIAL ç¯å¢ƒå˜é‡ï¼‰
 <span class="hljs-operator">-</span>t ID                    ä½¿ç”¨æŒ‡å®šä¼ è¾“ ID çš„è®¾å¤‡
 <span class="hljs-operator">-</span>H                       æŒ‡å®š adb æœåŠ¡å™¨ä¸»æœºå [é»˜è®¤<span class="hljs-operator">=</span>localhost]
 <span class="hljs-operator">-</span>P                       æŒ‡å®š adb æœåŠ¡å™¨ç«¯å£ [é»˜è®¤<span class="hljs-operator">=</span><span class="hljs-number">5037</span>]
 <span class="hljs-operator">-</span>L SOCKET                åœ¨æŒ‡å®šçš„å¥—æ¥å­—ä¸Šç›‘å¬ adb æœåŠ¡å™¨ [é»˜è®¤<span class="hljs-operator">=</span>tcp:localhost:<span class="hljs-number">5037</span>]
 <span class="hljs-comment">--one-device SERIAL|USB  ä»…å…è®¸ä¸ 'start-server' æˆ– 'server nodaemon' ä¸€èµ·ä½¿ç”¨ï¼ŒæœåŠ¡å™¨å°†ä»…è¿æ¥åˆ°ä¸€å° USB è®¾å¤‡ï¼Œç”±åºåˆ—å·æˆ– USB è®¾å¤‡åœ°å€æŒ‡å®šã€‚</span>
 <span class="hljs-comment">--exit-on-write-error    å¦‚æœæ ‡å‡†è¾“å‡ºè¢«å…³é—­åˆ™é€€å‡º</span>

å¸¸è§„å‘½ä»¤ï¼š
 devices [<span class="hljs-operator">-</span>l]             åˆ—å‡ºå·²è¿æ¥çš„è®¾å¤‡ï¼ˆ<span class="hljs-operator">-</span>l è¡¨ç¤ºè¯¦ç»†è¾“å‡ºï¼‰
 help                     æ˜¾ç¤ºæ­¤å¸®åŠ©ä¿¡æ¯
 version                  æ˜¾ç¤ºç‰ˆæœ¬å·

ç½‘ç»œè¿æ¥ï¼š
 <span class="hljs-keyword">connect</span> ä¸»æœº[:ç«¯å£]       é€šè¿‡ TCP<span class="hljs-operator">/</span>IP è¿æ¥åˆ°è®¾å¤‡ [é»˜è®¤ç«¯å£<span class="hljs-operator">=</span><span class="hljs-number">5555</span>]
 <span class="hljs-keyword">disconnect</span> [ä¸»æœº[:ç«¯å£]]  ä»ç»™å®šçš„ TCP<span class="hljs-operator">/</span>IP è®¾å¤‡æ–­å¼€è¿æ¥ [é»˜è®¤ç«¯å£<span class="hljs-operator">=</span><span class="hljs-number">5555</span>]ï¼Œæˆ–æ–­å¼€æ‰€æœ‰è¿æ¥
 pair ä¸»æœº[:ç«¯å£] [é…å¯¹ç ]  ä¸è®¾å¤‡é…å¯¹ä»¥è¿›è¡Œå®‰å…¨çš„ TCP<span class="hljs-operator">/</span>IP é€šä¿¡
 forward <span class="hljs-comment">--list           åˆ—å‡ºæ‰€æœ‰æ­£å‘å¥—æ¥å­—è¿æ¥</span>
 forward [<span class="hljs-comment">--no-rebind] æœ¬åœ°åœ°å€ è¿œç¨‹åœ°å€</span>
                          ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å»ºç«‹æ­£å‘å¥—æ¥å­—è¿æ¥ï¼š
                            tcp:<span class="hljs-operator">&lt;</span>ç«¯å£<span class="hljs-operator">&gt;</span> (<span class="hljs-operator">&lt;</span>æœ¬åœ°åœ°å€<span class="hljs-operator">&gt;</span> å¯ä¸º "tcp:0" ä»¥é€‰æ‹©ä»»æ„å¼€æ”¾ç«¯å£)
                            localabstract:<span class="hljs-operator">&lt;</span>Unix åŸŸå¥—æ¥å­—åç§°<span class="hljs-operator">&gt;</span>
                            localreserved:<span class="hljs-operator">&lt;</span>Unix åŸŸå¥—æ¥å­—åç§°<span class="hljs-operator">&gt;</span>
                            localfilesystem:<span class="hljs-operator">&lt;</span>Unix åŸŸå¥—æ¥å­—åç§°<span class="hljs-operator">&gt;</span>
                            dev:<span class="hljs-operator">&lt;</span>å­—ç¬¦è®¾å¤‡åç§°<span class="hljs-operator">&gt;</span>
                            dev<span class="hljs-operator">-</span>raw:<span class="hljs-operator">&lt;</span>å­—ç¬¦è®¾å¤‡åç§°<span class="hljs-operator">&gt;</span> (ä»¥åŸå§‹æ¨¡å¼æ‰“å¼€è®¾å¤‡)
                            jdwp:<span class="hljs-operator">&lt;</span>è¿›ç¨‹PID<span class="hljs-operator">&gt;</span> (ä»…é™è¿œç¨‹)
                            vsock:<span class="hljs-operator">&lt;</span>CID<span class="hljs-operator">&gt;</span>:<span class="hljs-operator">&lt;</span>ç«¯å£<span class="hljs-operator">&gt;</span> (ä»…é™è¿œç¨‹)
                            acceptfd:<span class="hljs-operator">&lt;</span>æ–‡ä»¶æè¿°ç¬¦<span class="hljs-operator">&gt;</span> (ä»…é™ç›‘å¬)
 forward <span class="hljs-comment">--remove æœ¬åœ°åœ°å€ ç§»é™¤ç‰¹å®šçš„æ­£å‘å¥—æ¥å­—è¿æ¥</span>
 forward <span class="hljs-comment">--remove-all     ç§»é™¤æ‰€æœ‰æ­£å‘å¥—æ¥å­—è¿æ¥</span>
 reverse <span class="hljs-comment">--list           åˆ—å‡ºè®¾å¤‡ä¸Šçš„æ‰€æœ‰åå‘å¥—æ¥å­—è¿æ¥</span>
 reverse [<span class="hljs-comment">--no-rebind] è¿œç¨‹åœ°å€ æœ¬åœ°åœ°å€</span>
                          ä½¿ç”¨ä»¥ä¸‹æ–¹å¼å»ºç«‹åå‘å¥—æ¥å­—è¿æ¥ï¼š
                            tcp:<span class="hljs-operator">&lt;</span>ç«¯å£<span class="hljs-operator">&gt;</span> (<span class="hljs-operator">&lt;</span>è¿œç¨‹åœ°å€<span class="hljs-operator">&gt;</span> å¯ä¸º "tcp:0" ä»¥é€‰æ‹©ä»»æ„å¼€æ”¾ç«¯å£)
                            localabstract:<span class="hljs-operator">&lt;</span>Unix åŸŸå¥—æ¥å­—åç§°<span class="hljs-operator">&gt;</span>
                            localreserved:<span class="hljs-operator">&lt;</span>Unix åŸŸå¥—æ¥å­—åç§°<span class="hljs-operator">&gt;</span>
                            localfilesystem:<span class="hljs-operator">&lt;</span>Unix åŸŸå¥—æ¥å­—åç§°<span class="hljs-operator">&gt;</span>
 reverse <span class="hljs-comment">--remove è¿œç¨‹åœ°å€ ç§»é™¤ç‰¹å®šçš„åå‘å¥—æ¥å­—è¿æ¥</span>
 reverse <span class="hljs-comment">--remove-all     ç§»é™¤è®¾å¤‡ä¸Šçš„æ‰€æœ‰åå‘å¥—æ¥å­—è¿æ¥</span>
 mdns <span class="hljs-keyword">check</span>               æ£€æŸ¥ mDNS å‘ç°æœåŠ¡æ˜¯å¦å¯ç”¨
 mdns services            åˆ—å‡ºæ‰€æœ‰å·²å‘ç°çš„æœåŠ¡

æ–‡ä»¶ä¼ è¾“ï¼š
 push [<span class="hljs-comment">--sync] [-z ç®—æ³•] [-Z] æœ¬åœ°è·¯å¾„... è¿œç¨‹è·¯å¾„</span>
                           å°†æœ¬åœ°æ–‡ä»¶<span class="hljs-operator">/</span>ç›®å½•å¤åˆ¶åˆ°è®¾å¤‡
                           <span class="hljs-operator">-</span>n: ç©ºè¿è¡Œï¼šæ¨é€æ–‡ä»¶åˆ°è®¾å¤‡ä½†ä¸å­˜å‚¨åˆ°æ–‡ä»¶ç³»ç»Ÿ
                           <span class="hljs-operator">-</span>q: ä¸æ˜¾ç¤ºè¿›åº¦ä¿¡æ¯
                           <span class="hljs-operator">-</span>Z: ç¦ç”¨å‹ç¼©
                           <span class="hljs-operator">-</span>z: ä½¿ç”¨æŒ‡å®šç®—æ³•å¯ç”¨å‹ç¼© (<span class="hljs-keyword">any</span><span class="hljs-operator">/</span><span class="hljs-keyword">none</span><span class="hljs-operator">/</span>brotli<span class="hljs-operator">/</span>lz4<span class="hljs-operator">/</span>zstd)
                           <span class="hljs-comment">--sync: ä»…æ¨é€ä¸»æœºå’Œè®¾å¤‡ä¸Šæ—¶é—´æˆ³ä¸åŒçš„æ–‡ä»¶</span>
 pull [<span class="hljs-operator">-</span>a] [<span class="hljs-operator">-</span>z ç®—æ³•] [<span class="hljs-operator">-</span>Z] è¿œç¨‹è·¯å¾„... æœ¬åœ°è·¯å¾„
                           ä»è®¾å¤‡å¤åˆ¶æ–‡ä»¶<span class="hljs-operator">/</span>ç›®å½•
                           <span class="hljs-operator">-</span>a: ä¿ç•™æ–‡ä»¶æ—¶é—´æˆ³å’Œæ¨¡å¼
                           <span class="hljs-operator">-</span>q: ä¸æ˜¾ç¤ºè¿›åº¦ä¿¡æ¯
                           <span class="hljs-operator">-</span>Z: ç¦ç”¨å‹ç¼©
                           <span class="hljs-operator">-</span>z: ä½¿ç”¨æŒ‡å®šç®—æ³•å¯ç”¨å‹ç¼© (<span class="hljs-keyword">any</span><span class="hljs-operator">/</span><span class="hljs-keyword">none</span><span class="hljs-operator">/</span>brotli<span class="hljs-operator">/</span>lz4<span class="hljs-operator">/</span>zstd)
 sync [<span class="hljs-operator">-</span>l] [<span class="hljs-operator">-</span>z ç®—æ³•] [<span class="hljs-operator">-</span>Z] [<span class="hljs-keyword">all</span><span class="hljs-operator">|</span>data<span class="hljs-operator">|</span>odm<span class="hljs-operator">|</span>oem<span class="hljs-operator">|</span>product<span class="hljs-operator">|</span><span class="hljs-keyword">system</span><span class="hljs-operator">|</span>system_ext<span class="hljs-operator">|</span>vendor]
                           å°† $ANDROID_PRODUCT_OUT ä¸­çš„æœ¬åœ°æ„å»ºåŒæ­¥åˆ°è®¾å¤‡ (é»˜è®¤ <span class="hljs-keyword">all</span>)
                           <span class="hljs-operator">-</span>l: åˆ—å‡ºå°†è¦å¤åˆ¶çš„æ–‡ä»¶ï¼Œä½†ä¸å®é™…å¤åˆ¶
                           <span class="hljs-operator">-</span>n: ç©ºè¿è¡Œï¼šæ¨é€æ–‡ä»¶åˆ°è®¾å¤‡ä½†ä¸å­˜å‚¨åˆ°æ–‡ä»¶ç³»ç»Ÿ
                           <span class="hljs-operator">-</span>q: ä¸æ˜¾ç¤ºè¿›åº¦ä¿¡æ¯
                           <span class="hljs-operator">-</span>Z: ç¦ç”¨å‹ç¼©
                           <span class="hljs-operator">-</span>z: ä½¿ç”¨æŒ‡å®šç®—æ³•å¯ç”¨å‹ç¼© (<span class="hljs-keyword">any</span><span class="hljs-operator">/</span><span class="hljs-keyword">none</span><span class="hljs-operator">/</span>brotli<span class="hljs-operator">/</span>lz4<span class="hljs-operator">/</span>zstd)

Shellï¼š
 shell [<span class="hljs-operator">-</span>e è½¬ä¹‰å­—ç¬¦] [<span class="hljs-operator">-</span>n] [<span class="hljs-operator">-</span>Tt] [<span class="hljs-operator">-</span>x] [å‘½ä»¤...]
                           è¿è¡Œè¿œç¨‹ shell å‘½ä»¤ï¼ˆå¦‚æœæœªç»™å‡ºå‘½ä»¤åˆ™è¿›å…¥äº¤äº’å¼ shellï¼‰
                           <span class="hljs-operator">-</span>e: é€‰æ‹©è½¬ä¹‰å­—ç¬¦ï¼Œæˆ– "none"ï¼›é»˜è®¤ä¸º <span class="hljs-string">'~'</span>
                           <span class="hljs-operator">-</span>n: ä¸ä»æ ‡å‡†è¾“å…¥è¯»å–
                           <span class="hljs-operator">-</span>T: ç¦ç”¨ä¼ªç»ˆç«¯åˆ†é…
                           <span class="hljs-operator">-</span>t: å¦‚æœåœ¨ç»ˆç«¯ä¸Šåˆ™åˆ†é…ä¼ªç»ˆç«¯ (<span class="hljs-operator">-</span>tt: å¼ºåˆ¶åˆ†é…ä¼ªç»ˆç«¯)
                           <span class="hljs-operator">-</span>x: ç¦ç”¨è¿œç¨‹é€€å‡ºç å’Œæ ‡å‡†è¾“å‡º<span class="hljs-operator">/</span>æ ‡å‡†é”™è¯¯åˆ†ç¦»
 emu å‘½ä»¤                  è¿è¡Œæ¨¡æ‹Ÿå™¨æ§åˆ¶å°å‘½ä»¤

åº”ç”¨å®‰è£…ï¼ˆå¦è¯·å‚è§ `adb shell cmd package help`ï¼‰ï¼š
 install [<span class="hljs-operator">-</span>lrtsdg] [<span class="hljs-comment">--instant] åŒ…å</span>
                           æ¨é€å•ä¸ªåŒ…åˆ°è®¾å¤‡å¹¶å®‰è£…
 install<span class="hljs-operator">-</span>multiple [<span class="hljs-operator">-</span>lrtsdpg] [<span class="hljs-comment">--instant] åŒ…å...</span>
                           æ¨é€å¤šä¸ª APK åˆ°è®¾å¤‡ï¼ˆç”¨äºå•ä¸ªåŒ…ï¼‰å¹¶å®‰è£…å®ƒä»¬
 install<span class="hljs-operator">-</span>multi<span class="hljs-operator">-</span>package [<span class="hljs-operator">-</span>lrtsdpg] [<span class="hljs-comment">--instant] åŒ…å...</span>
                           æ¨é€ä¸€ä¸ªæˆ–å¤šä¸ªåŒ…åˆ°è®¾å¤‡å¹¶ä»¥åŸå­æ“ä½œå®‰è£…å®ƒä»¬
                           <span class="hljs-operator">-</span>r: æ›¿æ¢ç°æœ‰åº”ç”¨
                           <span class="hljs-operator">-</span>t: å…è®¸æµ‹è¯•åŒ…
                           <span class="hljs-operator">-</span>d: å…è®¸ç‰ˆæœ¬ä»£ç é™çº§ï¼ˆä»…é€‚ç”¨äºå¯è°ƒè¯•åŒ…ï¼‰
                           <span class="hljs-operator">-</span>p: éƒ¨åˆ†åº”ç”¨å®‰è£…ï¼ˆä»…é€‚ç”¨äº install<span class="hljs-operator">-</span>multipleï¼‰
                           <span class="hljs-operator">-</span>g: æˆäºˆæ‰€æœ‰è¿è¡Œæ—¶æƒé™
                           <span class="hljs-comment">--abi ABI: è¦†ç›–å¹³å°çš„é»˜è®¤ ABI</span>
                           <span class="hljs-comment">--instant: å°†åº”ç”¨å®‰è£…ä¸ºä¸´æ—¶åº”ç”¨</span>
                           <span class="hljs-comment">--no-streaming: æ€»æ˜¯å…ˆå°† APK æ¨é€åˆ°è®¾å¤‡ï¼Œç„¶åå•ç‹¬è°ƒç”¨åŒ…ç®¡ç†å™¨</span>
                           <span class="hljs-comment">--streaming: å¼ºåˆ¶æµå¼ä¼ è¾“ APK ç›´æ¥åˆ°åŒ…ç®¡ç†å™¨</span>
                           <span class="hljs-comment">--fastdeploy: ä½¿ç”¨å¿«é€Ÿéƒ¨ç½²</span>
                           <span class="hljs-comment">--no-fastdeploy: é˜»æ­¢ä½¿ç”¨å¿«é€Ÿéƒ¨ç½²</span>
                           <span class="hljs-comment">--force-agent: ä½¿ç”¨å¿«é€Ÿéƒ¨ç½²æ—¶å¼ºåˆ¶æ›´æ–°éƒ¨ç½²ä»£ç†</span>
                           <span class="hljs-comment">--date-check-agent: å½“æœ¬åœ°ç‰ˆæœ¬è¾ƒæ–°ä¸”ä½¿ç”¨å¿«é€Ÿéƒ¨ç½²æ—¶æ›´æ–°éƒ¨ç½²ä»£ç†</span>
                           <span class="hljs-comment">--version-check-agent: å½“æœ¬åœ°ç‰ˆæœ¬ä»£ç ä¸åŒä¸”ä½¿ç”¨å¿«é€Ÿéƒ¨ç½²æ—¶æ›´æ–°éƒ¨ç½²ä»£ç†</span>
                           ï¼ˆæ›´å¤šé€‰é¡¹è¯·å‚è§ `adb shell pm help`ã€‚ï¼‰
 uninstall [<span class="hljs-operator">-</span>k] åŒ…å       ä»è®¾å¤‡ç§»é™¤æ­¤åº”ç”¨åŒ…
                           <span class="hljs-string">'-k'</span>: ä¿ç•™æ•°æ®å’Œç¼“å­˜ç›®å½•

è°ƒè¯•ï¼š
 bugreport [è·¯å¾„]          å°†é”™è¯¯æŠ¥å‘Šå†™å…¥ç»™å®šè·¯å¾„ [é»˜è®¤<span class="hljs-operator">=</span>bugreport.zip]ï¼›
                           å¦‚æœè·¯å¾„æ˜¯ä¸€ä¸ªç›®å½•ï¼Œåˆ™é”™è¯¯æŠ¥å‘Šä¿å­˜åœ¨è¯¥ç›®å½•ä¸­ã€‚
                           ä¸æ”¯æŒå‹ç¼©é”™è¯¯æŠ¥å‘Šçš„è®¾å¤‡å°†è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºã€‚
 jdwp                     åˆ—å‡ºæ‰¿è½½ JDWP ä¼ è¾“çš„è¿›ç¨‹çš„ PID
 logcat                   æ˜¾ç¤ºè®¾å¤‡æ—¥å¿—ï¼ˆæ›´å¤šé€‰é¡¹è¯·å‚è§ logcat <span class="hljs-comment">--helpï¼‰</span>

å®‰å…¨ï¼š
 disable<span class="hljs-operator">-</span>verity           åœ¨ userdebug ç‰ˆæœ¬ä¸Šç¦ç”¨ dm<span class="hljs-operator">-</span>verity æ£€æŸ¥
 enable<span class="hljs-operator">-</span>verity            åœ¨ userdebug ç‰ˆæœ¬ä¸Šé‡æ–°å¯ç”¨ dm<span class="hljs-operator">-</span>verity æ£€æŸ¥
 keygen æ–‡ä»¶               ç”Ÿæˆ adb å…¬é’¥<span class="hljs-operator">/</span>ç§é’¥ï¼›ç§é’¥å­˜å‚¨åœ¨æ–‡ä»¶ä¸­ï¼Œ

è„šæœ¬ï¼š
 wait<span class="hljs-operator">-</span><span class="hljs-keyword">for</span>[<span class="hljs-operator">-</span>ä¼ è¾“ç±»å‹]<span class="hljs-operator">-</span>çŠ¶æ€...
                           ç­‰å¾…è®¾å¤‡è¿›å…¥ç»™å®šçŠ¶æ€
                           çŠ¶æ€ï¼šdevice, recovery, rescue, sideload, bootloader, æˆ– <span class="hljs-keyword">disconnect</span>
                           ä¼ è¾“ç±»å‹ï¼šusb, <span class="hljs-keyword">local</span>, æˆ– <span class="hljs-keyword">any</span> [é»˜è®¤<span class="hljs-operator">=</span><span class="hljs-keyword">any</span>]
 <span class="hljs-keyword">get</span><span class="hljs-operator">-</span>state                æ‰“å° offline <span class="hljs-operator">|</span> bootloader <span class="hljs-operator">|</span> device
 <span class="hljs-keyword">get</span><span class="hljs-operator">-</span>serialno             æ‰“å° <span class="hljs-operator">&lt;</span>åºåˆ—å·<span class="hljs-operator">&gt;</span>
 <span class="hljs-keyword">get</span><span class="hljs-operator">-</span>devpath              æ‰“å° <span class="hljs-operator">&lt;</span>è®¾å¤‡è·¯å¾„<span class="hljs-operator">&gt;</span>
 remount [<span class="hljs-operator">-</span>R]             ä»¥è¯»å†™æ¨¡å¼é‡æ–°æŒ‚è½½åˆ†åŒºã€‚å¦‚æœéœ€è¦é‡å¯ï¼Œ<span class="hljs-operator">-</span>R å°†è‡ªåŠ¨é‡å¯è®¾å¤‡ã€‚
 reboot [bootloader<span class="hljs-operator">|</span>recovery<span class="hljs-operator">|</span>sideload<span class="hljs-operator">|</span>sideload<span class="hljs-operator">-</span>auto<span class="hljs-operator">-</span>reboot]
                           é‡å¯è®¾å¤‡ï¼›é»˜è®¤ä¸ºå¯åŠ¨ç³»ç»Ÿæ˜ åƒï¼Œä½†ä¹Ÿæ”¯æŒå¯åŠ¨åˆ° bootloader å’Œ recoveryã€‚sideload ä¼šé‡å¯åˆ° recovery å¹¶è‡ªåŠ¨å¯åŠ¨ sideload æ¨¡å¼ï¼Œsideload<span class="hljs-operator">-</span>auto<span class="hljs-operator">-</span>reboot ç›¸åŒä½†åœ¨ sideload åé‡å¯ã€‚
 sideload OTAåŒ…            ä¾§è½½ç»™å®šçš„å®Œæ•´ OTA åŒ…
 root                     ä»¥ root æƒé™é‡å¯ adbd
 unroot                   ä¸ä»¥ root æƒé™é‡å¯ adbd
 usb                      é‡å¯ adbd å¹¶åœ¨ USB ä¸Šç›‘å¬
 tcpip ç«¯å£                é‡å¯ adbd å¹¶åœ¨æŒ‡å®š TCP ç«¯å£ä¸Šç›‘å¬

å†…éƒ¨è°ƒè¯•ï¼š
 <span class="hljs-keyword">start</span><span class="hljs-operator">-</span>server             ç¡®ä¿æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
 kill<span class="hljs-operator">-</span>server              å¦‚æœæœåŠ¡å™¨æ­£åœ¨è¿è¡Œåˆ™ç»ˆæ­¢å®ƒ
 reconnect                ä»ä¸»æœºç«¯è¸¢æ‰è¿æ¥ä»¥å¼ºåˆ¶é‡æ–°è¿æ¥
 reconnect device         ä»è®¾å¤‡ç«¯è¸¢æ‰è¿æ¥ä»¥å¼ºåˆ¶é‡æ–°è¿æ¥
 reconnect offline        é‡ç½® offline<span class="hljs-operator">/</span>unauthorized è®¾å¤‡ä»¥å¼ºåˆ¶é‡æ–°è¿æ¥

USBï¼š
 attach                   é™„åŠ ä¸€ä¸ªå·²åˆ†ç¦»çš„ USB è®¾å¤‡
 detach                   ä»ä¸€ä¸ª USB è®¾å¤‡åˆ†ç¦»ï¼Œä»¥å…è®¸å…¶ä»–è¿›ç¨‹ä½¿ç”¨

ç¯å¢ƒå˜é‡ï¼š
 $ADB_TRACE
                           è¦è®°å½•çš„è°ƒè¯•ä¿¡æ¯çš„é€—å·<span class="hljs-operator">/</span>ç©ºæ ¼åˆ†éš”åˆ—è¡¨ï¼š
                           <span class="hljs-keyword">all</span>,adb,sockets,packets,rwx,usb,sync,sysdeps,transport,jdwp,services,auth,fdevent,shell,incremental
 $ADB_VENDOR_KEYS         ä»¥å†’å·åˆ†éš”çš„å¯†é’¥åˆ—è¡¨ï¼ˆæ–‡ä»¶æˆ–ç›®å½•ï¼‰
 $ANDROID_SERIAL          è¦è¿æ¥åˆ°çš„åºåˆ—å·ï¼ˆå‚è§ <span class="hljs-operator">-</span>s é€‰é¡¹ï¼‰
 $ANDROID_LOG_TAGS        ä¾› logcat ä½¿ç”¨çš„æ ‡ç­¾ï¼ˆå‚è§ logcat <span class="hljs-comment">--helpï¼‰</span>
 $ADB_LOCAL_TRANSPORT_MAX_PORT æœ€å¤§æ¨¡æ‹Ÿå™¨æ‰«æç«¯å£ï¼ˆé»˜è®¤ <span class="hljs-number">5585</span>ï¼Œ<span class="hljs-number">16</span> ä¸ªæ¨¡æ‹Ÿå™¨ï¼‰
 $ADB_MDNS_AUTO_CONNECT   å…è®¸è‡ªåŠ¨è¿æ¥çš„ mDNS æœåŠ¡é€—å·åˆ†éš”åˆ—è¡¨ï¼ˆé»˜è®¤ adb<span class="hljs-operator">-</span>tls<span class="hljs-operator">-</span><span class="hljs-keyword">connect</span>ï¼‰
</code></pre>
<p>åœ¨çº¿æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fandroid.googlesource.com%2Fplatform%2Fpackages%2Fmodules%2Fadb%2F%2B%2Frefs%2Fheads%2Fmain%2Fdocs%2Fuser%2Fadb.1.md" target="_blank" title="https://android.googlesource.com/platform/packages/modules/adb/+/refs/heads/main/docs/user/adb.1.md" ref="nofollow noopener noreferrer">android.googlesource.com/platform/paâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å†™åŸ‹ç‚¹ã€æ‰’ SDKã€æ”¹æ¡†æ¶ï¼šJS å‡½æ•°å¤å†™ 10 è¿æ‹›å®æˆ˜æ‰‹å†Œ]]></title>    <link>https://juejin.cn/post/7578732288517111859</link>    <guid>https://juejin.cn/post/7578732288517111859</guid>    <pubDate>2025-12-02T03:12:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578732288517111859" data-draft-id="7578780780026953737" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å†™åŸ‹ç‚¹ã€æ‰’ SDKã€æ”¹æ¡†æ¶ï¼šJS å‡½æ•°å¤å†™ 10 è¿æ‹›å®æˆ˜æ‰‹å†Œ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-02T03:12:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‰¹çº§ä¸šåŠ¡ä¸“å®¶"/> <meta itemprop="url" content="https://juejin.cn/user/2101921961481512"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å†™åŸ‹ç‚¹ã€æ‰’ SDKã€æ”¹æ¡†æ¶ï¼šJS å‡½æ•°å¤å†™ 10 è¿æ‹›å®æˆ˜æ‰‹å†Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2101921961481512/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‰¹çº§ä¸šåŠ¡ä¸“å®¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:12:39.000Z" title="Tue Dec 02 2025 03:12:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># JS ä¸­â€œå¤å†™å‡½æ•°â€çš„ 10 ç§å§¿åŠ¿ï¼ˆé™„å®Œæ•´å¯è¿è¡Œ Demoï¼‰</span>

åœ¨å‰ç«¯å·¥ç¨‹é‡Œï¼Œâ€œå¤å†™ä¸€ä¸ªå‡½æ•°â€ï¼ˆHook / Patch / Overrideï¼‰æ˜¯éå¸¸å¸¸è§çš„éœ€æ±‚ï¼Œå°¤å…¶æ˜¯åœ¨ï¼š

<span class="hljs-bullet">-</span> è°ƒè¯•é»‘ç›’ SDK
<span class="hljs-bullet">-</span> åšç›‘æ§åŸ‹ç‚¹
<span class="hljs-bullet">-</span> æ”¹ç¬¬ä¸‰æ–¹åº“è¡Œä¸ºä½†åˆä¸èƒ½ç›´æ¥æ”¹æºç 

æœ¬æ–‡æŠŠå¸¸è§çš„ 10 ç§æ‰‹æ³•æ•´ç†æˆä¸€ä¸ªâ€œæ­¦å™¨æ¸…å•â€ï¼Œ<span class="hljs-strong">**æ¯ç§éƒ½ç»™å‡ºå¯ç›´æ¥è·‘çš„ Demo**</span>ï¼Œæ–¹ä¾¿ä½ å¤åˆ¶åˆ°æ§åˆ¶å° / Node é‡Œè¯•ã€‚

---

<span class="hljs-section">## ğŸŸ¦ ä¸€ã€ç›´æ¥è¦†å†™ï¼šæœ€ç®€å•ç²—æš´</span>

<span class="hljs-strong">**æ€è·¯**</span>ï¼šå¦‚æœå‡½æ•°æœ¬æ¥å°±æ˜¯æŸä¸ªå¯¹è±¡ä¸Šçš„æ–¹æ³•ï¼Œç›´æ¥é‡æ–°èµ‹å€¼å³å¯ã€‚

<span class="hljs-section">### ç¤ºä¾‹åœºæ™¯</span>

å·²æœ‰ä¸€ä¸ªä¸šåŠ¡å¯¹è±¡ï¼š

<span class="hljs-code">```js
const userService = {
  getUserName(id) {
    console.log('[orig] getUserName', id);
    return 'Alice';
  }
};

// åŸå§‹è°ƒç”¨
console.log('--- åŸå§‹è°ƒç”¨ ---');
console.log(userService.getUserName(1));
</span></code></pre>
<p>ç°åœ¨æƒ³<strong>å®Œå…¨æ›¿æ¢</strong>æ‰ <code>getUserName</code> çš„å®ç°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç›´æ¥è¦†å†™</span>
userService.<span class="hljs-property">getUserName</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">id</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[new] getUserName'</span>, id);
  <span class="hljs-keyword">return</span> <span class="hljs-string">'Bob'</span>;
};

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- è¦†å†™å ---'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(userService.<span class="hljs-title function_">getUserName</span>(<span class="hljs-number">1</span>));
</code></pre>
<p><strong>ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>ç®€å•ç›´æ¥</li>
<li>ä¸ä¿ç•™åŸé€»è¾‘ï¼ˆé™¤éä½ è‡ªå·±å…ˆå­˜ä¸€ä»½å¼•ç”¨ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-0">ğŸŸ© äºŒã€Monkey Patchï¼šä¿ç•™åŸé€»è¾‘å†â€œåŠ ä¸€å±‚å£³â€ï¼ˆæœ€å¸¸ç”¨ï¼‰</h2>
<p><strong>æ€è·¯</strong>ï¼šä¿å­˜åŸå‡½æ•°å¼•ç”¨ â†’ ç”¨åŒåå‡½æ•°åŒ…è£…ä¸€å±‚ã€‚</p>
<h3 data-id="heading-1">ç¤ºä¾‹ï¼šç»™ SDK æ–¹æ³•åŠ åŸ‹ç‚¹</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ª SDK</span>
<span class="hljs-keyword">const</span> sdk = {
  <span class="hljs-title function_">track</span>(<span class="hljs-params">eventName, payload</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[orig track]'</span>, eventName, payload);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span> };
  }
};

<span class="hljs-comment">// åŸå§‹ä½¿ç”¨</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- åŸå§‹è°ƒç”¨ ---'</span>);
sdk.<span class="hljs-title function_">track</span>(<span class="hljs-string">'page_view'</span>, { <span class="hljs-attr">path</span>: <span class="hljs-string">'/home'</span> });

<span class="hljs-comment">// å¼€å§‹ Monkey Patch</span>
<span class="hljs-keyword">const</span> origTrack = sdk.<span class="hljs-property">track</span>;

sdk.<span class="hljs-property">track</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[before track]'</span>, ...args);

  <span class="hljs-keyword">const</span> result = origTrack.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[after track]'</span>, result);
  <span class="hljs-keyword">return</span> result;
};

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- Patch ä¹‹å ---'</span>);
sdk.<span class="hljs-title function_">track</span>(<span class="hljs-string">'page_view'</span>, { <span class="hljs-attr">path</span>: <span class="hljs-string">'/detail'</span> });
</code></pre>
<p><strong>é€‚ç”¨</strong>ï¼š</p>
<ul>
<li>æƒ³åœ¨åŸé€»è¾‘å‰åâ€œæ’å…¥â€è‡ªå·±çš„é€»è¾‘</li>
<li>Hook é»‘ç›’ SDKã€ç›‘æ§ã€åŸ‹ç‚¹ç­‰</li>
</ul>
<hr/>
<h2 data-id="heading-2">ğŸŸ§ ä¸‰ã€Proxyï¼šæ‹¦æˆªæ•´ä¸ªå¯¹è±¡ï¼ˆé«˜çº§é»‘ç›’åˆ†æï¼‰</h2>
<p><strong>æ€è·¯</strong>ï¼šç”¨ <code>Proxy</code> ä»£ç†æ•´ä¸ªå¯¹è±¡ï¼Œåœ¨ <code>get</code> é‡Œç»Ÿä¸€æ‹¦æˆªå‡½æ•°è°ƒç”¨ã€‚</p>
<h3 data-id="heading-3">ç¤ºä¾‹ï¼šæ‹¦æˆªæ‰€æœ‰æ–¹æ³•è°ƒç”¨åšæ—¥å¿—</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¸€ä¸ªâ€œé»‘ç›’â€å¯¹è±¡ï¼Œæ–¹æ³•åå¯èƒ½ä¼šå˜</span>
<span class="hljs-keyword">const</span> api = {
  <span class="hljs-title function_">login</span>(<span class="hljs-params">user, pwd</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'login...'</span>, user);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">token</span>: <span class="hljs-string">'xxx'</span> };
  },
  <span class="hljs-title function_">logout</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'logout...'</span>);
  }
};

<span class="hljs-comment">// ç”¨ Proxy åŒ…ä¸€å±‚</span>
<span class="hljs-keyword">const</span> apiWithLog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(api, {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, prop, receiver</span>) {
    <span class="hljs-keyword">const</span> value = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, prop, receiver);

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'function'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Proxy] call <span class="hljs-subst">${<span class="hljs-built_in">String</span>(prop)}</span> with`</span>, args);
        <span class="hljs-keyword">const</span> result = value.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[Proxy] <span class="hljs-subst">${<span class="hljs-built_in">String</span>(prop)}</span> result`</span>, result);
        <span class="hljs-keyword">return</span> result;
      };
    }

    <span class="hljs-keyword">return</span> value;
  }
});

<span class="hljs-comment">// ä½¿ç”¨æ–¹å¼è·ŸåŸæ¥ä¸€æ ·</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- ä½¿ç”¨ Proxy å ---'</span>);
apiWithLog.<span class="hljs-title function_">login</span>(<span class="hljs-string">'alice'</span>, <span class="hljs-string">'123456'</span>);
apiWithLog.<span class="hljs-title function_">logout</span>();
</code></pre>
<p><strong>é€‚ç”¨</strong>ï¼š</p>
<ul>
<li>ä½ <strong>ä¸çŸ¥é“å…·ä½“æ–¹æ³•å</strong>ï¼ˆSDK é‡Œä¸€å †æ–¹æ³•ï¼‰</li>
<li>æƒ³ç»Ÿä¸€æ‹¦æˆªæ‰€æœ‰æ–¹æ³•è°ƒç”¨ï¼ˆsniffï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-4">ğŸŸ¨ å››ã€<code>Object.defineProperty</code>ï¼šå¼ºè¡Œæ”¹ getter / setter / ä¸å¯æšä¸¾å±æ€§</h2>
<p><strong>æ€è·¯</strong>ï¼šå½“å±æ€§ä¸å¯å†™ã€æˆ–æ˜¯ getter / setterï¼Œéœ€è¦ç”¨ <code>defineProperty</code> æ“ä½œæè¿°ç¬¦ã€‚</p>
<h3 data-id="heading-5">ç¤ºä¾‹ 1ï¼šæŠŠåªè¯»å±æ€§æ”¹æˆå¯å†™å‡½æ•°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> obj = {};

<span class="hljs-comment">// åˆå§‹å®šä¹‰ï¼šåªè¯»å±æ€§</span>
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj, <span class="hljs-string">'foo'</span>, {
  <span class="hljs-attr">value</span>: <span class="hljs-string">'readonly'</span>,
  <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">enumerable</span>: <span class="hljs-literal">true</span>
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åŸå§‹ foo ='</span>, obj.<span class="hljs-property">foo</span>);

<span class="hljs-comment">// ç›´æ¥èµ‹å€¼ä¼šå¤±è´¥ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹æŠ¥é”™ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸‹æ— æ•ˆï¼‰</span>
obj.<span class="hljs-property">foo</span> = <span class="hljs-string">'new'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç›´æ¥èµ‹å€¼å foo ='</span>, obj.<span class="hljs-property">foo</span>); <span class="hljs-comment">// è¿˜æ˜¯ readonly</span>

<span class="hljs-comment">// ç”¨ defineProperty å¼ºè¡Œæ”¹æˆå‡½æ•°</span>
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(obj, <span class="hljs-string">'foo'</span>, {
  <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">writable</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">value</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'I am new foo()'</span>);
  }
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- æ”¹æˆå‡½æ•°ä¹‹å ---'</span>);
obj.<span class="hljs-title function_">foo</span>();
</code></pre>
<h3 data-id="heading-6">ç¤ºä¾‹ 2ï¼šç”¨ getter åšæ‡’åŠ è½½ Hook</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> service = {};

<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(service, <span class="hljs-string">'expensiveApi'</span>, {
  <span class="hljs-attr">configurable</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-title function_">get</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[getter] åˆå§‹åŒ– expensiveApi'</span>);
    <span class="hljs-comment">// çœŸæ­£åˆ›å»ºå¯¹è±¡</span>
    <span class="hljs-keyword">const</span> realApi = {
      <span class="hljs-title function_">call</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'real api called'</span>);
      }
    };
    <span class="hljs-comment">// ç”¨æ™®é€šå±æ€§æ›¿æ¢æ‰ getterï¼ˆåªåˆå§‹åŒ–ä¸€æ¬¡ï¼‰</span>
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(service, <span class="hljs-string">'expensiveApi'</span>, {
      <span class="hljs-attr">value</span>: realApi,
      <span class="hljs-attr">writable</span>: <span class="hljs-literal">false</span>,
      <span class="hljs-attr">configurable</span>: <span class="hljs-literal">false</span>
    });
    <span class="hljs-keyword">return</span> realApi;
  }
});

<span class="hljs-comment">// ç¬¬ä¸€æ¬¡è®¿é—®ä¼šè§¦å‘ getter</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- ç¬¬ä¸€æ¬¡è®¿é—® ---'</span>);
service.<span class="hljs-property">expensiveApi</span>.<span class="hljs-title function_">call</span>();

<span class="hljs-comment">// ç¬¬äºŒæ¬¡è®¿é—®ç›´æ¥ç”¨ç¼“å­˜</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- ç¬¬äºŒæ¬¡è®¿é—® ---'</span>);
service.<span class="hljs-property">expensiveApi</span>.<span class="hljs-title function_">call</span>();
</code></pre>
<hr/>
<h2 data-id="heading-7">ğŸŸ¥ äº”ã€Hook å…¨å±€å†…ç½®æ–¹æ³•ï¼šç½‘ç»œã€äº‹ä»¶ã€è·¯ç”±ç­‰ï¼ˆéå¸¸å¼ºï¼‰</h2>
<h3 data-id="heading-8">ç¤ºä¾‹ 1ï¼šæ‹¦æˆª <code>fetch</code>ï¼ˆæµè§ˆå™¨ï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¿å­˜åŸå§‹ fetch</span>
<span class="hljs-keyword">const</span> origFetch = <span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span>;

<span class="hljs-comment">// è¦†å†™</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span> = <span class="hljs-keyword">async</span> (...args) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Hook fetch] è¯·æ±‚å‚æ•°:'</span>, args);

  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">origFetch</span>(...args);

  <span class="hljs-comment">// å¤åˆ¶ä¸€ä»½ Response æŸ¥çœ‹å†…å®¹ï¼ˆæ³¨æ„ï¼šè¿™é‡Œåªæ˜¯ç¤ºæ„ï¼Œå®é™…éœ€è€ƒè™‘æµåªèƒ½è¯»ä¸€æ¬¡ï¼‰</span>
  <span class="hljs-keyword">const</span> clone = res.<span class="hljs-title function_">clone</span>();
  clone.<span class="hljs-title function_">text</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">text</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Hook fetch] å“åº”æ–‡æœ¬æˆªæ–­:'</span>, text.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>));
  });

  <span class="hljs-keyword">return</span> res;
};

<span class="hljs-comment">// ä½¿ç”¨ï¼šä¹‹åæ‰€æœ‰ fetch éƒ½ä¼šç»è¿‡ Hook</span>
<span class="hljs-comment">// fetch('https://jsonplaceholder.typicode.com/todos/1');</span>
</code></pre>
<h3 data-id="heading-9">ç¤ºä¾‹ 2ï¼šæ‹¦æˆªæ‰€æœ‰ DOM äº‹ä»¶ç›‘å¬</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> origAdd = <span class="hljs-title class_">EventTarget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">addEventListener</span>;

<span class="hljs-title class_">EventTarget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">addEventListener</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">type, listener, options</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Hook addEventListener]'</span>, type, <span class="hljs-string">'on'</span>, <span class="hljs-variable language_">this</span>);

  <span class="hljs-comment">// ä¹Ÿå¯ä»¥åœ¨è¿™é‡ŒåŒ…ä¸€å±‚ listenerï¼Œå®ç°äº‹ä»¶åŸ‹ç‚¹</span>
  <span class="hljs-keyword">return</span> origAdd.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, type, listener, options);
};

<span class="hljs-comment">// Demoï¼šæ·»åŠ ä¸€ä¸ª click äº‹ä»¶</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'body clicked'</span>);
});
</code></pre>
<p><strong>è¿˜èƒ½ Hook</strong>ï¼š</p>
<ul>
<li><code>XMLHttpRequest.prototype.send</code></li>
<li><code>WebSocket.prototype.send</code></li>
<li><code>history.pushState / replaceState</code>ï¼ˆå‰ç«¯è·¯ç”±ç›‘æ§ï¼‰</li>
<li><code>console.log</code>ï¼ˆè°ƒè¯•åœºæ™¯ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-10">ğŸŸª å…­ã€ä»£ç†æ¨¡å—åŠ è½½ï¼š<code>require</code> Hook / æ„å»ºæœŸ alias</h2>
<h3 data-id="heading-11">6.1 Nodeï¼šHook <code>require</code>ï¼ˆCommonJSï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// hook-require.js</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Module</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'module'</span>);
<span class="hljs-keyword">const</span> originalRequire = <span class="hljs-title class_">Module</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">require</span>;

<span class="hljs-title class_">Module</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">require</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">path</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[require]'</span>, path);
  <span class="hljs-keyword">const</span> <span class="hljs-built_in">exports</span> = originalRequire.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, <span class="hljs-variable language_">arguments</span>);

  <span class="hljs-comment">// é’ˆå¯¹æŒ‡å®šæ¨¡å—åš Monkey Patch</span>
  <span class="hljs-keyword">if</span> (path === <span class="hljs-string">'./sdk'</span>) {
    <span class="hljs-keyword">const</span> origDo = <span class="hljs-built_in">exports</span>.<span class="hljs-property">doSomething</span>;
    <span class="hljs-built_in">exports</span>.<span class="hljs-property">doSomething</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[patched sdk.doSomething]'</span>, args);
      <span class="hljs-keyword">return</span> origDo.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
    };
  }

  <span class="hljs-keyword">return</span> <span class="hljs-built_in">exports</span>;
};

<span class="hljs-comment">// ä¸»å…¥å£</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">'./hook-require'</span>);
<span class="hljs-keyword">const</span> sdk = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./sdk'</span>);

sdk.<span class="hljs-title function_">doSomething</span>(<span class="hljs-string">'hello'</span>);
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// sdk.js</span>
<span class="hljs-built_in">exports</span>.<span class="hljs-property">doSomething</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">msg</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[orig sdk.doSomething]'</span>, msg);
};
</code></pre>
<p>è¿è¡Œ <code>node main.js</code> å³å¯çœ‹åˆ° require æ—¥å¿— + patch æ•ˆæœã€‚</p>
<hr/>
<h3 data-id="heading-12">6.2 å‰ç«¯ï¼šé€šè¿‡ alias æ›¿æ¢æ•´ä¸ªæ¨¡å—</h3>
<p>ä»¥ Vite ä¸ºä¾‹ï¼ˆWebpack æ€è·¯ç±»ä¼¼ï¼‰ã€‚</p>
<h4 data-id="heading-13">æ­¥éª¤ 1ï¼šé…ç½® alias</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-string">'some-sdk'</span>: <span class="hljs-string">'/src/sdk-wrapped.js'</span> <span class="hljs-comment">// ç”¨ä½ è‡ªå·±çš„ wrapper æ›¿æ¢åŸ SDK</span>
    }
  }
});
</code></pre>
<h4 data-id="heading-14">æ­¥éª¤ 2ï¼šåœ¨ wrapper é‡Œå† Monkey Patch</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// src/sdk-wrapped.js</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> realSdk <span class="hljs-keyword">from</span> <span class="hljs-string">'some-sdk-original'</span>; <span class="hljs-comment">// å‡è®¾è¿™æ˜¯åŸ SDK åŒ…å</span>

<span class="hljs-keyword">const</span> sdk = { ...realSdk };

<span class="hljs-keyword">const</span> origInit = sdk.<span class="hljs-property">init</span>;
sdk.<span class="hljs-property">init</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[wrapped sdk.init]'</span>, args);
  <span class="hljs-keyword">return</span> origInit.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> sdk;
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'some-sdk-original'</span>; <span class="hljs-comment">// å…¶ä½™åŸæ ·å¯¼å‡º</span>
</code></pre>
<p>ä¸šåŠ¡ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// import sdk from 'some-sdk'; // å®é™…æ‹¿åˆ°çš„æ˜¯ sdk-wrapped.js</span>
<span class="hljs-comment">// sdk.init(...);</span>
</code></pre>
<hr/>
<h2 data-id="heading-15">ğŸŸ« ä¸ƒã€ES6 <code>class</code> ç»§æ‰¿ï¼šåœ¨å¯æ§æ¡†æ¶é‡Œâ€œæ­£ç»Ÿæ‰©å±•â€</h2>
<p><strong>æ€è·¯</strong>ï¼šå½“ä½ èƒ½æ§åˆ¶å®ä¾‹åˆ›å»ºæ—¶ï¼Œç›´æ¥ç”¨ <code>extends</code> ç»§æ‰¿åŸç±»ï¼Œè¦†å†™æ–¹æ³•å¹¶æŒ‰éœ€ <code>super.foo()</code>ã€‚</p>
<h3 data-id="heading-16">ç¤ºä¾‹ï¼šæ‰©å±•ä¸€ä¸ª UI ç»„ä»¶ç±»</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Button</span> {
  <span class="hljs-title function_">click</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Button] clicked'</span>);
  }
}

<span class="hljs-comment">// åŸå§‹ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> btn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Button</span>();
btn.<span class="hljs-title function_">click</span>();

<span class="hljs-comment">// æ–°ç±»ï¼šåœ¨åŸ click å‰ååŠ é€»è¾‘</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LogButton</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Button</span> {
  <span class="hljs-title function_">click</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[LogButton] before click'</span>);
    <span class="hljs-keyword">const</span> result = <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">click</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[LogButton] after click'</span>);
    <span class="hljs-keyword">return</span> result;
  }
}

<span class="hljs-keyword">const</span> logBtn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LogButton</span>();
logBtn.<span class="hljs-title function_">click</span>();
</code></pre>
<p><strong>é€‚åˆ</strong>ï¼š</p>
<ul>
<li>ä½ èƒ½è‡ªå·± new å­ç±»ï¼Œè€Œä¸æ˜¯æ¡†æ¶å†…éƒ¨å¸®ä½  new</li>
<li>æ¯”å¦‚å†…éƒ¨ä¸šåŠ¡ç±»ã€è‡ªå·±å°è£…çš„ç»„ä»¶ä½“ç³»</li>
</ul>
<hr/>
<h2 data-id="heading-17">ğŸŸ© å…«ã€<code>Proxy</code> + <code>construct</code>ï¼šæ‹¦æˆª <code>new</code> çš„æ„é€ è¡Œä¸º</h2>
<p><strong>æ€è·¯</strong>ï¼šç”¨ <code>Proxy</code> ä»£ç†â€œç±»æœ¬èº«â€ï¼Œåœ¨ <code>construct</code> é‡Œæ‹¦æˆªæ‰€æœ‰å®ä¾‹åˆ›å»ºã€‚</p>
<h3 data-id="heading-18">ç¤ºä¾‹ï¼šç»™æ¯ä¸ªå®ä¾‹è‡ªåŠ¨æ‰“ Patch</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Service</span> {
  <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Service.foo]'</span>);
  }
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">PatchedService</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(<span class="hljs-title class_">Service</span>, {
  <span class="hljs-title function_">construct</span>(<span class="hljs-params">target, args, newTarget</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Proxy construct] åˆ›å»º Service å®ä¾‹ï¼Œå‚æ•°:'</span>, args);

    <span class="hljs-comment">// åˆ›å»ºåŸå§‹å®ä¾‹</span>
    <span class="hljs-keyword">const</span> instance = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">construct</span>(target, args, newTarget);

    <span class="hljs-comment">// ç»™å®ä¾‹æ‰“è¡¥ä¸</span>
    <span class="hljs-keyword">const</span> origFoo = instance.<span class="hljs-property">foo</span>;
    instance.<span class="hljs-property">foo</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">...fooArgs</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[patched foo] before'</span>, fooArgs);
      <span class="hljs-keyword">const</span> result = origFoo.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, fooArgs);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[patched foo] after'</span>, result);
      <span class="hljs-keyword">return</span> result;
    };

    <span class="hljs-keyword">return</span> instance;
  }
});

<span class="hljs-comment">// ä¹‹åç»Ÿä¸€ç”¨ PatchedServiceï¼Œè€Œä¸æ˜¯ Service</span>
<span class="hljs-keyword">const</span> s = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PatchedService</span>();
s.<span class="hljs-title function_">foo</span>();
</code></pre>
<p><strong>é€‚åˆ</strong>ï¼š</p>
<ul>
<li>ç¬¬ä¸‰æ–¹åº“æš´éœ²çš„æ˜¯â€œç±»â€ï¼Œä½ å¯ä»¥æ§åˆ¶ <code>new</code> çš„åœ°æ–¹</li>
<li>æƒ³è®©<strong>æ‰€æœ‰å®ä¾‹</strong>éƒ½åº”ç”¨åŒä¸€å¥— Patch</li>
</ul>
<hr/>
<h2 data-id="heading-19">ğŸŸ¦ ä¹ã€Hook åŸå‹ï¼šå¯¹æ‰€æœ‰å®ä¾‹ç”Ÿæ•ˆ</h2>
<p><strong>æ€è·¯</strong>ï¼šç›´æ¥æ”¹ <code>Class.prototype.xxx</code> æˆ–å†…ç½®ç±»å‹åŸå‹ï¼Œä¾‹å¦‚ <code>Array.prototype.push</code>ã€‚</p>
<h3 data-id="heading-20">ç¤ºä¾‹ 1ï¼šæ”¹è‡ªå®šä¹‰ç±»çš„åŸå‹æ–¹æ³•</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Person</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
}

<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayHi</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Hi, I am'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
};

<span class="hljs-keyword">const</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'Alice'</span>);
p1.<span class="hljs-title function_">sayHi</span>();

<span class="hljs-comment">// Patch åŸå‹</span>
<span class="hljs-keyword">const</span> origSayHi = <span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayHi</span>;

<span class="hljs-title class_">Person</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">sayHi</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[patched] before sayHi'</span>);
  origSayHi.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[patched] after sayHi'</span>);
};

<span class="hljs-keyword">const</span> p2 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">'Bob'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- Patch ä¹‹å ---'</span>);
p1.<span class="hljs-title function_">sayHi</span>(); <span class="hljs-comment">// æ—§å®ä¾‹ä¹Ÿä¼šå—å½±å“</span>
p2.<span class="hljs-title function_">sayHi</span>();
</code></pre>
<h3 data-id="heading-21">ç¤ºä¾‹ 2ï¼šç»™æ‰€æœ‰æ•°ç»„çš„ <code>push</code> æ‰“æ—¥å¿—ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> origPush = <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">push</span>;

<span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">push</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">...items</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[Array.push patched] this ='</span>, <span class="hljs-variable language_">this</span>, <span class="hljs-string">'items ='</span>, items);
  <span class="hljs-keyword">return</span> origPush.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, items);
};

<span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>];
arr.<span class="hljs-title function_">push</span>(<span class="hljs-number">3</span>);  <span class="hljs-comment">// ä¼šæ‰“å°æ—¥å¿—</span>
</code></pre>
<p><strong>æ³¨æ„</strong>ï¼šæ”¹å†…ç½®åŸå‹å½±å“èŒƒå›´éå¸¸å¤§ï¼Œè¦åœ¨å¯æ§ç¯å¢ƒä¸‹ä½¿ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-22">ğŸŸ£ åã€åŠ¨æ€æ³¨å…¥ <code>&lt;script&gt;</code>ï¼šåœ¨ä¸èƒ½æ”¹æºç æ—¶å¤å†™å…¨å±€å‡½æ•°</h2>
<p><strong>æ€è·¯</strong>ï¼šåœ¨æµè§ˆå™¨é€šè¿‡è„šæœ¬æ³¨å…¥çš„æ–¹å¼è¦†ç›–æŸä¸ªå…¨å±€å‡½æ•°ï¼ˆæ²¹çŒ´è„šæœ¬ã€Chrome æ’ä»¶å¸¸ç”¨ï¼‰ã€‚</p>
<h3 data-id="heading-23">ç¤ºä¾‹ï¼šå¤å†™é¡µé¢é‡Œå·²æœ‰çš„ <code>window.someFn</code></h3>
<p>å‡è®¾ç›®æ ‡é¡µé¢æœ‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">window</span>.<span class="hljs-property">someFn</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[page] someFn'</span>);
};
</code></pre>
<p>ä½ åœ¨è‡ªå·±çš„è„šæœ¬é‡Œæ³¨å…¥ä¸€æ®µï¼š</p>
<pre><code class="hljs language-js" lang="js">(<span class="hljs-keyword">function</span> <span class="hljs-title function_">inject</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'script'</span>);

  script.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
    (function () {
      const orig = window.someFn;
      window.someFn = function (...args) {
        console.log('[injected] before someFn', args);
        const result = orig &amp;&amp; orig.apply(this, args);
        console.log('[injected] after someFn', result);
        return result;
      };
    })();
  `</span>;

  <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-title function_">appendChild</span>(script);
  script.<span class="hljs-title function_">remove</span>();
})();
</code></pre>
<p>æ‰§è¡Œåï¼Œé¡µé¢ä¸­<strong>æ‰€æœ‰å¯¹ <code>someFn</code> çš„è°ƒç”¨</strong>éƒ½ä¼šèµ°ä½ æ³¨å…¥çš„ç‰ˆæœ¬ã€‚</p>
<p><strong>é€‚ç”¨</strong>ï¼š</p>
<ul>
<li>ä½ ä¸èƒ½æ”¹é¡µé¢æºç ï¼Œä½†èƒ½æ³¨å…¥ JSï¼ˆæ²¹çŒ´è„šæœ¬ / æµè§ˆå™¨æ‰©å±• / WebView æ³¨å…¥ç­‰ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-24">ğŸ”¥ æ€»ç»“ï¼šå¤å†™å‡½æ•°çš„â€œæ­¦å™¨æ¸…å•â€</h2>




























































<table><thead><tr><th>æ–¹æ³•</th><th>èƒ½åŠ›/å¤æ‚åº¦</th><th>å…¸å‹åœºæ™¯</th></tr></thead><tbody><tr><td>ç›´æ¥è¦†å†™</td><td>æœ€ç®€å•</td><td>ä½ èƒ½ç›´æ¥è®¿é—®å¯¹è±¡å’Œæ–¹æ³•å</td></tr><tr><td>Monkey Patch</td><td>â­æœ€å¸¸ç”¨</td><td>Hook SDKã€åŸ‹ç‚¹ã€è°ƒè¯•</td></tr><tr><td>Proxyï¼ˆæ‹¦æˆªå¯¹è±¡ï¼‰</td><td>â­é«˜çº§é»‘ç›’åˆ†æ</td><td>ä¸çŸ¥é“å…·ä½“æ–¹æ³•åï¼Œæƒ³å…¨é‡ sniff</td></tr><tr><td><code>defineProperty</code></td><td>å¼ºåŠ›</td><td>åªè¯»å±æ€§ã€getter/setter ä»£ç†</td></tr><tr><td>Hook å…¨å±€ API</td><td>â­éå¸¸å¼º</td><td>ç½‘ç»œã€äº‹ä»¶ã€è·¯ç”±ã€æ—¥å¿—ç›‘æ§</td></tr><tr><td>require Hook / alias</td><td>æ„å»ºæœŸ</td><td>æ›¿æ¢æ•´ä¸ª SDK æ¨¡å—</td></tr><tr><td><code>class</code> ç»§æ‰¿</td><td>æ­£ç»Ÿæ‰©å±•</td><td>è‡ªå·±å¯æ§çš„ç±»/ç»„ä»¶</td></tr><tr><td><code>Proxy</code> + <code>construct</code></td><td>é«˜çº§</td><td>æ‹¦æˆªæ‰€æœ‰å®ä¾‹çš„åˆ›å»ºè¿‡ç¨‹</td></tr><tr><td>åŸå‹ Hook</td><td>å…¨å±€å½±å“</td><td>å¯¹æ‰€æœ‰å®ä¾‹ç”Ÿæ•ˆï¼ˆè°¨æ…ï¼‰</td></tr><tr><td>script æ³¨å…¥</td><td>æµè§ˆå™¨æ’ä»¶/æ²¹çŒ´åœºæ™¯</td><td>ä¸èƒ½æ”¹æºç ã€åªèƒ½è¿è¡Œæ—¶æ³¨å…¥</td></tr></tbody></table>
<p>--</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ç¿»è¯‘ã€‘scrcpyï¼ˆ3.3.3ï¼‰å‘½ä»¤ä½¿ç”¨æ–‡æ¡£]]></title>    <link>https://juejin.cn/post/7578797337867485218</link>    <guid>https://juejin.cn/post/7578797337867485218</guid>    <pubDate>2025-12-02T02:46:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578797337867485218" data-draft-id="7578803751608762418" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ç¿»è¯‘ã€‘scrcpyï¼ˆ3.3.3ï¼‰å‘½ä»¤ä½¿ç”¨æ–‡æ¡£"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-12-02T02:46:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ²æ€¡æ—¸"/> <meta itemprop="url" content="https://juejin.cn/user/2875978146656750"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ç¿»è¯‘ã€‘scrcpyï¼ˆ3.3.3ï¼‰å‘½ä»¤ä½¿ç”¨æ–‡æ¡£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978146656750/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ²æ€¡æ—¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T02:46:12.000Z" title="Tue Dec 02 2025 02:46:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>scrcpy 3.3.3 <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGenymobile%2Fscrcpy" target="_blank" title="https://github.com/Genymobile/scrcpy" ref="nofollow noopener noreferrer">github.com/Genymobile/â€¦</a>
ç”¨æ³•ï¼š<code>scrcpy.exe</code> [é€‰é¡¹]</p>
<blockquote>
<p>å£°æ˜ï¼šä»¥ä¸‹æ˜¯åœ¨ Windows ç”µè„‘ä¸Šçš„scrcpy --help è¾“å‡ºç¿»è¯‘ï¼Œä¸ç¡®ä¿å…¶ä»–å¹³å°æ˜¯å¦ä¸€æ ·</p>
</blockquote>
<p>é€‰é¡¹ï¼š</p>
<pre><code class="hljs language-lua" lang="lua"><span class="hljs-comment">--always-on-top</span>
    ä½¿ scrcpy çª—å£å§‹ç»ˆç½®é¡¶ï¼ˆä½äºå…¶ä»–çª—å£ä¹‹ä¸Šï¼‰ã€‚

<span class="hljs-comment">--angle=è§’åº¦</span>
    å°†è§†é¢‘å†…å®¹æ—‹è½¬æŒ‡å®šçš„è‡ªå®šä¹‰è§’åº¦ï¼ˆä»¥åº¦ä¸ºå•ä½ï¼Œé¡ºæ—¶é’ˆï¼‰ã€‚

<span class="hljs-comment">--audio-bit-rate=æ•°å€¼</span>
    ä»¥æŒ‡å®šçš„æ¯”ç‰¹ç‡ç¼–ç éŸ³é¢‘ï¼Œå•ä½ä¸ºæ¯”ç‰¹/ç§’ã€‚æ”¯æŒå•ä½åç¼€ï¼š<span class="hljs-string">'K'</span> (åƒä½/ç§’ x1000) å’Œ <span class="hljs-string">'M'</span> (ç™¾ä¸‡ä½/ç§’ x1000000)ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">128</span>K (<span class="hljs-number">128000</span>)ã€‚

<span class="hljs-comment">--audio-buffer=æ¯«ç§’</span>
    é…ç½®éŸ³é¢‘ç¼“å†²å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰ã€‚
    è¾ƒä½çš„å€¼å¯é™ä½å»¶è¿Ÿï¼Œä½†ä¼šå¢åŠ ç¼“å†²åŒºæ¬ è½½ï¼ˆå¯¼è‡´éŸ³é¢‘æ•…éšœï¼‰çš„å¯èƒ½æ€§ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">50</span>ã€‚

<span class="hljs-comment">--audio-codec=åç§°</span>
    é€‰æ‹©éŸ³é¢‘ç¼–ç å™¨ (opus, aac, flac æˆ– raw)ã€‚
    é»˜è®¤å€¼ä¸º opusã€‚

<span class="hljs-comment">--audio-codec-options=é”®[:ç±»å‹]=å€¼[, ...]</span>
    ä¸ºè®¾å¤‡éŸ³é¢‘ç¼–ç å™¨è®¾ç½®ä»¥é€—å·åˆ†éš”çš„ `é”®:ç±»å‹=å€¼` é€‰é¡¹åˆ—è¡¨ã€‚
    <span class="hljs-string">'ç±»å‹'</span> çš„å¯èƒ½å€¼ä¸º <span class="hljs-string">'int'</span> (é»˜è®¤), <span class="hljs-string">'long'</span>, <span class="hljs-string">'float'</span> å’Œ <span class="hljs-string">'string'</span>ã€‚
    å¯èƒ½çš„ç¼–è§£ç å™¨é€‰é¡¹åˆ—è¡¨å¯åœ¨ Android æ–‡æ¡£ä¸­æ‰¾åˆ°ï¼š
    &lt;https://d.android.com/reference/android/media/MediaFormat&gt;

<span class="hljs-comment">--audio-dup</span>
    å¤åˆ¶éŸ³é¢‘ï¼ˆæ•è·å¹¶åœ¨è®¾å¤‡ä¸Šç»§ç»­æ’­æ”¾ï¼‰ã€‚
    æ­¤åŠŸèƒ½ä»…åœ¨é…åˆ `<span class="hljs-comment">--audio-source=playback` æ—¶å¯ç”¨ã€‚</span>

<span class="hljs-comment">--audio-encoder=åç§°</span>
    ä½¿ç”¨ç‰¹å®šçš„ MediaCodec éŸ³é¢‘ç¼–ç å™¨ï¼ˆå–å†³äº `<span class="hljs-comment">--audio-codec` æä¾›çš„ç¼–è§£ç å™¨ï¼‰ã€‚</span>
    å¯ç”¨çš„ç¼–ç å™¨å¯é€šè¿‡ `<span class="hljs-comment">--list-encoders` åˆ—å‡ºã€‚</span>

<span class="hljs-comment">--audio-source=æ¥æº</span>
    é€‰æ‹©éŸ³é¢‘æºã€‚å¯èƒ½çš„å€¼æœ‰ï¼š
     - `<span class="hljs-string">"output"</span>`: è½¬å‘æ•´ä¸ªéŸ³é¢‘è¾“å‡ºï¼Œå¹¶ç¦ç”¨è®¾å¤‡ä¸Šçš„æ’­æ”¾ã€‚
     - `<span class="hljs-string">"playback"</span>`: æ•è·éŸ³é¢‘æ’­æ”¾ï¼ˆAndroid åº”ç”¨å¯é€‰æ‹©é€€å‡ºï¼Œå› æ­¤ä¸ä¸€å®šèƒ½æ•è·å…¨éƒ¨è¾“å‡ºï¼‰ã€‚
     - `<span class="hljs-string">"mic"</span>`: æ•è·éº¦å…‹é£ã€‚
     - `<span class="hljs-string">"mic-unprocessed"</span>`: æ•è·æœªç»å¤„ç†ï¼ˆåŸå§‹ï¼‰çš„éº¦å…‹é£å£°éŸ³ã€‚
     - `<span class="hljs-string">"mic-camcorder"</span>`: æ•è·ä¸ºè§†é¢‘å½•åˆ¶è°ƒæ•´çš„éº¦å…‹é£ï¼ˆå¦‚æœå¯ç”¨ï¼Œåˆ™ä¸æ‘„åƒå¤´æ–¹å‘ä¸€è‡´ï¼‰ã€‚
     - `<span class="hljs-string">"mic-voice-recognition"</span>`: æ•è·ä¸ºè¯­éŸ³è¯†åˆ«è°ƒæ•´çš„éº¦å…‹é£ã€‚
     - `<span class="hljs-string">"mic-voice-communication"</span>`: æ•è·ä¸ºè¯­éŸ³é€šä¿¡è°ƒæ•´çš„éº¦å…‹é£ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœå¯ç”¨ï¼Œå°†åˆ©ç”¨å›å£°æ¶ˆé™¤æˆ–è‡ªåŠ¨å¢ç›Šæ§åˆ¶ï¼‰ã€‚
     - `<span class="hljs-string">"voice-call"</span>`: æ•è·è¯­éŸ³é€šè¯ã€‚
     - `<span class="hljs-string">"voice-call-uplink"</span>`: ä»…æ•è·è¯­éŸ³é€šè¯ä¸Šè¡Œé“¾è·¯ã€‚
     - `<span class="hljs-string">"voice-call-downlink"</span>`: ä»…æ•è·è¯­éŸ³é€šè¯ä¸‹è¡Œé“¾è·¯ã€‚
     - `<span class="hljs-string">"voice-performance"</span>`: æ•è·ç”¨äºç°åœºè¡¨æ¼”ï¼ˆå¦‚å¡æ‹‰OKï¼‰å¤„ç†çš„éŸ³é¢‘ï¼ŒåŒ…æ‹¬éº¦å…‹é£å’Œè®¾å¤‡æ’­æ”¾ã€‚
    é»˜è®¤å€¼ä¸º `<span class="hljs-built_in">output</span>`ã€‚

<span class="hljs-comment">--audio-output-buffer=æ¯«ç§’</span>
    é…ç½® SDL éŸ³é¢‘è¾“å‡ºç¼“å†²åŒºçš„å¤§å°ï¼ˆæ¯«ç§’ï¼‰ã€‚
    å¦‚æœæ‚¨å¬åˆ°â€œæœºå™¨äººå£°â€èˆ¬çš„éŸ³é¢‘æ’­æ”¾ï¼Œåº”å°è¯•æ›´é«˜çš„å€¼ï¼ˆä¾‹å¦‚ <span class="hljs-number">10</span>ï¼‰ã€‚å¦åˆ™è¯·å‹¿æ›´æ”¹æ­¤è®¾ç½®ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">5</span>ã€‚

-b, <span class="hljs-comment">--video-bit-rate=æ•°å€¼</span>
    ä»¥æŒ‡å®šçš„æ¯”ç‰¹ç‡ç¼–ç è§†é¢‘ï¼Œå•ä½ä¸ºæ¯”ç‰¹/ç§’ã€‚æ”¯æŒå•ä½åç¼€ï¼š<span class="hljs-string">'K'</span> (åƒä½/ç§’ x1000) å’Œ <span class="hljs-string">'M'</span> (ç™¾ä¸‡ä½/ç§’ x1000000)ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">8</span>M (<span class="hljs-number">8000000</span>)ã€‚

<span class="hljs-comment">--camera-ar=å®½é«˜æ¯”</span>
    æ ¹æ®å®½é«˜æ¯”ï¼ˆ+/- <span class="hljs-number">10</span>%ï¼‰é€‰æ‹©ç›¸æœºå°ºå¯¸ã€‚
    å¯èƒ½çš„å€¼æœ‰ `<span class="hljs-string">"sensor"</span>` (ä½¿ç”¨ç›¸æœºä¼ æ„Ÿå™¨çš„å®½é«˜æ¯”)ã€`<span class="hljs-string">"&lt;æ•°å­—&gt;:&lt;åˆ†æ¯&gt;"</span>` (ä¾‹å¦‚ `<span class="hljs-string">"4:3"</span>`) æˆ– `<span class="hljs-string">"&lt;æ•°å€¼&gt;"</span>` (ä¾‹å¦‚ `<span class="hljs-string">"1.6"</span>`)ã€‚

<span class="hljs-comment">--camera-facing=æœå‘</span>
    æ ¹æ®æœå‘é€‰æ‹©è®¾å¤‡æ‘„åƒå¤´ã€‚
    å¯èƒ½çš„å€¼æœ‰ `<span class="hljs-string">"front"</span>`, `<span class="hljs-string">"back"</span>` å’Œ `<span class="hljs-string">"external"</span>`ã€‚

<span class="hljs-comment">--camera-fps=æ•°å€¼</span>
    æŒ‡å®šç›¸æœºæ•è·å¸§ç‡ã€‚
    å¦‚æœæœªæŒ‡å®šï¼Œåˆ™ä½¿ç”¨ Android çš„é»˜è®¤å¸§ç‡ (<span class="hljs-number">30</span> fps)ã€‚

<span class="hljs-comment">--camera-high-speed</span>
    å¯ç”¨é«˜é€Ÿç›¸æœºæ•è·æ¨¡å¼ã€‚
    æ­¤æ¨¡å¼ä»…é™äºç‰¹å®šçš„åˆ†è¾¨ç‡å’Œå¸§ç‡ï¼Œå¯é€šè¿‡ `<span class="hljs-comment">--list-camera-sizes` åˆ—å‡ºã€‚</span>

<span class="hljs-comment">--camera-id=æ ‡è¯†</span>
    æŒ‡å®šè¦é•œåƒçš„è®¾å¤‡æ‘„åƒå¤´ IDã€‚
    å¯ç”¨çš„æ‘„åƒå¤´ ID å¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤åˆ—å‡ºï¼š
        scrcpy <span class="hljs-comment">--list-cameras</span>

<span class="hljs-comment">--camera-size=&lt;å®½åº¦&gt;x&lt;é«˜åº¦&gt;</span>
    æŒ‡å®šæ˜ç¡®çš„ç›¸æœºæ•è·å°ºå¯¸ã€‚

<span class="hljs-comment">--capture-orientation=æ•°å€¼</span>
    è®¾ç½®æ•è·è§†é¢‘çš„æ–¹å‘ã€‚
    å¯èƒ½çš„å€¼ä¸º <span class="hljs-number">0</span>, <span class="hljs-number">90</span>, <span class="hljs-number">180</span>, <span class="hljs-number">270</span>, flip0, flip90, flip180 å’Œ flip270ï¼Œå‰é¢å¯ä»¥åŠ  <span class="hljs-string">'@'</span> å‰ç¼€ã€‚
    æ•°å­—è¡¨ç¤ºé¡ºæ—¶é’ˆæ—‹è½¬çš„åº¦æ•°ï¼›`<span class="hljs-string">"flip"</span>` å…³é”®å­—è¡¨ç¤ºåœ¨æ—‹è½¬å‰åº”ç”¨æ°´å¹³ç¿»è½¬ã€‚
    å¦‚æœä¸ºæ˜¾ç¤ºæ•è·ä¼ é€’äº†å‰å¯¼ <span class="hljs-string">'@'</span>ï¼ˆå¦‚ `@<span class="hljs-number">90</span>`ï¼‰ï¼Œåˆ™æ—‹è½¬å°†è¢«é”å®šï¼Œä¸”ç›¸å¯¹äºè®¾å¤‡çš„è‡ªç„¶æ–¹å‘ã€‚
    å¦‚æœå•ç‹¬ä¼ é€’ `@`ï¼Œåˆ™æ—‹è½¬å°†é”å®šåˆ°è®¾å¤‡çš„åˆå§‹æ–¹å‘ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">0</span>ã€‚

<span class="hljs-comment">--crop=å®½åº¦:é«˜åº¦:x:y</span>
    åœ¨æœåŠ¡å™¨ä¸Šè£å‰ªè®¾å¤‡å±å¹•ã€‚
    æ•°å€¼ä»¥è®¾å¤‡çš„è‡ªç„¶æ–¹å‘è¡¨ç¤ºï¼ˆé€šå¸¸ï¼Œæ‰‹æœºä¸ºçºµå‘ï¼Œå¹³æ¿ä¸ºæ¨ªå‘ï¼‰ã€‚

-d, <span class="hljs-comment">--select-usb</span>
    ä½¿ç”¨ USB è®¾å¤‡ï¼ˆå¦‚æœæ°å¥½æœ‰ä¸€ä¸ªï¼Œç±»ä¼¼äº `adb -d`ï¼‰ã€‚
    å¦è¯·å‚é˜… -e (`<span class="hljs-comment">--select-tcpip`)ã€‚</span>

<span class="hljs-comment">--disable-screensaver</span>
    åœ¨ scrcpy è¿è¡Œæ—¶ç¦ç”¨å±å¹•ä¿æŠ¤ç¨‹åºã€‚

<span class="hljs-comment">--display-id=æ ‡è¯†</span>
    æŒ‡å®šè¦é•œåƒçš„è®¾å¤‡æ˜¾ç¤º IDã€‚
    å¯ç”¨çš„æ˜¾ç¤º ID å¯é€šè¿‡ä»¥ä¸‹å‘½ä»¤åˆ—å‡ºï¼š
        scrcpy <span class="hljs-comment">--list-displays</span>
    é»˜è®¤å€¼ä¸º <span class="hljs-number">0</span>ã€‚

<span class="hljs-comment">--display-ime-policy=ç­–ç•¥</span>
    è®¾ç½®é€‰æ‹© IME åº”åœ¨ä½•å¤„æ˜¾ç¤ºçš„ç­–ç•¥ã€‚
    å¯èƒ½çš„å€¼æœ‰ `<span class="hljs-string">"local"</span>`, `<span class="hljs-string">"fallback"</span>` å’Œ `<span class="hljs-string">"hide"</span>`ã€‚
    `<span class="hljs-string">"local"</span>` è¡¨ç¤º IME åº”æ˜¾ç¤ºåœ¨æœ¬åœ°å±å¹•ä¸Šã€‚
    `<span class="hljs-string">"fallback"</span>` è¡¨ç¤º IME åº”æ˜¾ç¤ºåœ¨å¤‡ç”¨ï¼ˆé»˜è®¤ï¼‰å±å¹•ä¸Šã€‚
    `<span class="hljs-string">"hide"</span>` è¡¨ç¤º IME åº”éšè—ã€‚

<span class="hljs-comment">--display-orientation=æ•°å€¼</span>
    è®¾ç½®åˆå§‹æ˜¾ç¤ºæ–¹å‘ã€‚
    å¯èƒ½çš„å€¼ä¸º <span class="hljs-number">0</span>, <span class="hljs-number">90</span>, <span class="hljs-number">180</span>, <span class="hljs-number">270</span>, flip0, flip90, flip180 å’Œ flip270ã€‚
    æ•°å­—è¡¨ç¤ºé¡ºæ—¶é’ˆæ—‹è½¬çš„åº¦æ•°ï¼›`<span class="hljs-string">"flip"</span>` å…³é”®å­—è¡¨ç¤ºåœ¨æ—‹è½¬å‰åº”ç”¨æ°´å¹³ç¿»è½¬ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">0</span>ã€‚

-e, <span class="hljs-comment">--select-tcpip</span>
    ä½¿ç”¨ TCP/IP è®¾å¤‡ï¼ˆå¦‚æœæ°å¥½æœ‰ä¸€ä¸ªï¼Œç±»ä¼¼äº `adb -e`ï¼‰ã€‚
    å¦è¯·å‚é˜… -d (`<span class="hljs-comment">--select-usb`)ã€‚</span>

-f, <span class="hljs-comment">--fullscreen</span>
    ä»¥å…¨å±æ¨¡å¼å¯åŠ¨ã€‚

<span class="hljs-comment">--force-adb-forward</span>
    ä¸å°è¯•ä½¿ç”¨ `adb <span class="hljs-built_in">reverse</span>` è¿æ¥åˆ°è®¾å¤‡ã€‚

-G
    ç­‰åŒäº `<span class="hljs-comment">--gamepad=uhid`ï¼Œå¦‚æœè®¾ç½®äº† `--otg` åˆ™ç­‰åŒäº `--gamepad=aoa`ã€‚</span>

<span class="hljs-comment">--gamepad=æ¨¡å¼</span>
    é€‰æ‹©å¦‚ä½•å‘è®¾å¤‡å‘é€æ¸¸æˆæ‰‹æŸ„è¾“å…¥ã€‚
    å¯èƒ½çš„å€¼æœ‰ `<span class="hljs-string">"disabled"</span>`, `<span class="hljs-string">"uhid"</span>` å’Œ `<span class="hljs-string">"aoa"</span>`ã€‚
    `<span class="hljs-string">"disabled"</span>` ä¸å‘è®¾å¤‡å‘é€æ¸¸æˆæ‰‹æŸ„è¾“å…¥ã€‚
    `<span class="hljs-string">"uhid"</span>` ä½¿ç”¨è®¾å¤‡ä¸Šçš„ Linux UHID å†…æ ¸æ¨¡å—æ¨¡æ‹Ÿç‰©ç† HID æ¸¸æˆæ‰‹æŸ„ã€‚
    `<span class="hljs-string">"aoa"</span>` ä½¿ç”¨ AOAv2 åè®®æ¨¡æ‹Ÿç‰©ç†æ¸¸æˆæ‰‹æŸ„ã€‚å®ƒå¯èƒ½ä»…é€šè¿‡ USB å·¥ä½œã€‚
    å¦è¯·å‚é˜… `<span class="hljs-comment">--keyboard` å’Œ `--mouse`ã€‚</span>

-h, <span class="hljs-comment">--help</span>
    æ‰“å°æ­¤å¸®åŠ©ä¿¡æ¯ã€‚

-K
    ç­‰åŒäº `<span class="hljs-comment">--keyboard=uhid`ï¼Œå¦‚æœè®¾ç½®äº† `--otg` åˆ™ç­‰åŒäº `--keyboard=aoa`ã€‚</span>

<span class="hljs-comment">--keyboard=æ¨¡å¼</span>
    é€‰æ‹©å¦‚ä½•å‘è®¾å¤‡å‘é€é”®ç›˜è¾“å…¥ã€‚
    å¯èƒ½çš„å€¼æœ‰ `<span class="hljs-string">"disabled"</span>`, `<span class="hljs-string">"sdk"</span>`, `<span class="hljs-string">"uhid"</span>` å’Œ `<span class="hljs-string">"aoa"</span>`ã€‚
    `<span class="hljs-string">"disabled"</span>` ä¸å‘è®¾å¤‡å‘é€é”®ç›˜è¾“å…¥ã€‚
    `<span class="hljs-string">"sdk"</span>` ä½¿ç”¨ Android ç³»ç»Ÿ API å°†é”®ç›˜äº‹ä»¶ä¼ é€’ç»™åº”ç”¨ç¨‹åºã€‚
    `<span class="hljs-string">"uhid"</span>` ä½¿ç”¨è®¾å¤‡ä¸Šçš„ Linux UHID å†…æ ¸æ¨¡å—æ¨¡æ‹Ÿç‰©ç† HID é”®ç›˜ã€‚
    `<span class="hljs-string">"aoa"</span>` ä½¿ç”¨ AOAv2 åè®®æ¨¡æ‹Ÿç‰©ç†é”®ç›˜ã€‚å®ƒå¯èƒ½ä»…é€šè¿‡ USB å·¥ä½œã€‚
    å¯¹äº `<span class="hljs-string">"uhid"</span>` å’Œ `<span class="hljs-string">"aoa"</span>` æ¨¡å¼ï¼Œå¿…é¡»é€šè¿‡ `è®¾ç½® -&gt; ç³»ç»Ÿ -&gt; è¯­è¨€å’Œè¾“å…¥ -&gt; ç‰©ç†é”®ç›˜` åœ¨è®¾å¤‡ä¸Šé…ç½®ï¼ˆä¸€åŠ³æ°¸é€¸åœ°ï¼‰é”®ç›˜å¸ƒå±€ã€‚å¯ä»¥é€šè¿‡å¿«æ·é”® MOD+k (OTG æ¨¡å¼é™¤å¤–) æˆ–æ‰§è¡Œ `adb shell am start -a android.settings.HARD_KEYBOARD_SETTINGS` ç›´æ¥å¯åŠ¨æ­¤è®¾ç½®é¡µé¢ã€‚
    æ­¤é€‰é¡¹ä»…åœ¨å¯ç”¨ HID é”®ç›˜ï¼ˆæˆ–è¿æ¥äº†ç‰©ç†é”®ç›˜ï¼‰æ—¶å¯ç”¨ã€‚
    å¦è¯·å‚é˜… `<span class="hljs-comment">--mouse` å’Œ `--gamepad`ã€‚</span>

<span class="hljs-comment">--kill-adb-on-close</span>
    å½“ scrcpy ç»ˆæ­¢æ—¶ç»“æŸ adb è¿›ç¨‹ã€‚

<span class="hljs-comment">--legacy-paste</span>
    åœ¨æŒ‰ Ctrl+v æ—¶ï¼Œå°†è®¡ç®—æœºå‰ªè´´æ¿æ–‡æœ¬ä½œä¸ºä¸€ç³»åˆ—æŒ‰é”®äº‹ä»¶æ³¨å…¥ï¼ˆç±»ä¼¼ MOD+Shift+vï¼‰ã€‚
    è¿™æ˜¯é’ˆå¯¹æŸäº›è®¾å¤‡åœ¨ç¼–ç¨‹æ–¹å¼è®¾ç½®è®¾å¤‡å‰ªè´´æ¿æ—¶è¡Œä¸ºä¸ç¬¦åˆé¢„æœŸçš„è§£å†³æ–¹æ³•ã€‚

<span class="hljs-comment">--list-apps</span>
    åˆ—å‡ºè®¾å¤‡ä¸Šå®‰è£…çš„ Android åº”ç”¨ã€‚

<span class="hljs-comment">--list-cameras</span>
    åˆ—å‡ºè®¾å¤‡æ‘„åƒå¤´ã€‚

<span class="hljs-comment">--list-camera-sizes</span>
    åˆ—å‡ºæœ‰æ•ˆçš„ç›¸æœºæ•è·å°ºå¯¸ã€‚

<span class="hljs-comment">--list-displays</span>
    åˆ—å‡ºè®¾å¤‡å±å¹•ã€‚

<span class="hljs-comment">--list-encoders</span>
    åˆ—å‡ºè®¾å¤‡ä¸Šå¯ç”¨çš„è§†é¢‘å’ŒéŸ³é¢‘ç¼–ç å™¨ã€‚

-m, <span class="hljs-comment">--max-size=æ•°å€¼</span>
    å°†è§†é¢‘çš„å®½åº¦å’Œé«˜åº¦éƒ½é™åˆ¶ä¸ºæŒ‡å®šå€¼ã€‚å¦ä¸€ç»´åº¦ä¼šæŒ‰æ¯”ä¾‹è®¡ç®—ä»¥ä¿æŒè®¾å¤‡å®½é«˜æ¯”ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">0</span> (æ— é™åˆ¶)ã€‚

-M
    ç­‰åŒäº `<span class="hljs-comment">--mouse=uhid`ï¼Œå¦‚æœè®¾ç½®äº† `--otg` åˆ™ç­‰åŒäº `--mouse=aoa`ã€‚</span>

<span class="hljs-comment">--max-fps=æ•°å€¼</span>
    é™åˆ¶å±å¹•æ•è·çš„å¸§ç‡ï¼ˆä» Android <span class="hljs-number">10</span> å¼€å§‹å®˜æ–¹æ”¯æŒï¼Œä½†æ—©æœŸç‰ˆæœ¬å¯èƒ½ä¹Ÿå¯ç”¨ï¼‰ã€‚

<span class="hljs-comment">--mouse=æ¨¡å¼</span>
    é€‰æ‹©å¦‚ä½•å‘è®¾å¤‡å‘é€é¼ æ ‡è¾“å…¥ã€‚
    å¯èƒ½çš„å€¼æœ‰ `<span class="hljs-string">"disabled"</span>`, `<span class="hljs-string">"sdk"</span>`, `<span class="hljs-string">"uhid"</span>` å’Œ `<span class="hljs-string">"aoa"</span>`ã€‚
    `<span class="hljs-string">"disabled"</span>` ä¸å‘è®¾å¤‡å‘é€é¼ æ ‡è¾“å…¥ã€‚
    `<span class="hljs-string">"sdk"</span>` ä½¿ç”¨ Android ç³»ç»Ÿ API å°†é¼ æ ‡äº‹ä»¶ä¼ é€’ç»™åº”ç”¨ç¨‹åºã€‚
    `<span class="hljs-string">"uhid"</span>` ä½¿ç”¨è®¾å¤‡ä¸Šçš„ Linux UHID å†…æ ¸æ¨¡å—æ¨¡æ‹Ÿç‰©ç† HID é¼ æ ‡ã€‚
    `<span class="hljs-string">"aoa"</span>` ä½¿ç”¨ AOAv2 åè®®æ¨¡æ‹Ÿç‰©ç†é¼ æ ‡ã€‚å®ƒå¯èƒ½ä»…é€šè¿‡ USB å·¥ä½œã€‚
    åœ¨ `<span class="hljs-string">"uhid"</span>` å’Œ `<span class="hljs-string">"aoa"</span>` æ¨¡å¼ä¸‹ï¼Œè®¡ç®—æœºé¼ æ ‡ä¼šè¢«æ•è·ä»¥ç›´æ¥æ§åˆ¶è®¾å¤‡ï¼ˆç›¸å¯¹é¼ æ ‡æ¨¡å¼ï¼‰ã€‚
    å·¦ Altã€å·¦ Super æˆ–å³ Super é”®å¯åˆ‡æ¢æ•è·æ¨¡å¼ï¼Œå°†é¼ æ ‡æ§åˆ¶æƒäº¤è¿˜ç»™è®¡ç®—æœºã€‚
    å¦è¯·å‚é˜… `<span class="hljs-comment">--keyboard` å’Œ `--gamepad`ã€‚</span>

<span class="hljs-comment">--mouse-bind=xxxx[:xxxx]</span>
    é…ç½®è¾…åŠ©ç‚¹å‡»çš„ç»‘å®šã€‚
    å‚æ•°å¿…é¡»æ˜¯ä¸€ä¸ªæˆ–ä¸¤ä¸ªç”±å†’å·åˆ†éš”çš„åºåˆ—ï¼Œæ¯ä¸ªåºåˆ—æ°å¥½ <span class="hljs-number">4</span> ä¸ªå­—ç¬¦ï¼Œåˆ†åˆ«å¯¹åº”æ¯ä¸ªè¾…åŠ©ç‚¹å‡»ï¼ˆé¡ºåºä¸ºï¼šå³é”®ã€ä¸­é”®ã€ç¬¬å››é”®ã€ç¬¬äº”é”®ï¼‰ã€‚
    ç¬¬ä¸€ä¸ªåºåˆ—å®šä¹‰ä¸»ç»‘å®šï¼Œç”¨äºé¼ æ ‡æŒ‰é’®å•ç‹¬æŒ‰ä¸‹æ—¶ã€‚ç¬¬äºŒä¸ªåºåˆ—å®šä¹‰è¾…åŠ©ç»‘å®šï¼Œç”¨äºæŒ‰ä½ Shift é”®çš„åŒæ—¶æŒ‰ä¸‹é¼ æ ‡æŒ‰é’®æ—¶ã€‚
    å¦‚æœçœç•¥ç¬¬äºŒä¸ªç»‘å®šåºåˆ—ï¼Œåˆ™ä¸ç¬¬ä¸€ä¸ªåºåˆ—ç›¸åŒã€‚
    æ¯ä¸ªå­—ç¬¦å¿…é¡»æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š
     `+`: å°†ç‚¹å‡»è½¬å‘åˆ°è®¾å¤‡
     `-`: å¿½ç•¥ç‚¹å‡»
     `b`: è§¦å‘å¿«æ·é”® BACK (æˆ–å¦‚æœå±å¹•å…³é—­åˆ™ç‚¹äº®å±å¹•)
     `h`: è§¦å‘å¿«æ·é”® HOME
     `s`: è§¦å‘å¿«æ·é”® APP_SWITCH
     `n`: è§¦å‘å¿«æ·é”® `å±•å¼€é€šçŸ¥é¢æ¿`
    å¯¹äº SDK é¼ æ ‡ï¼Œé»˜è®¤ä¸º `<span class="hljs-string">'bhsn:++++'</span>`ï¼›å¯¹äº AOA å’Œ UHID é¼ æ ‡ï¼Œé»˜è®¤ä¸º `<span class="hljs-string">'++++:bhsn'</span>`ã€‚

-n, <span class="hljs-comment">--no-control</span>
    ç¦ç”¨è®¾å¤‡æ§åˆ¶ï¼ˆä»¥åªè¯»æ–¹å¼é•œåƒè®¾å¤‡ï¼‰ã€‚

-N, <span class="hljs-comment">--no-playback</span>
    åœ¨è®¡ç®—æœºä¸Šç¦ç”¨è§†é¢‘å’ŒéŸ³é¢‘æ’­æ”¾ï¼ˆç­‰åŒäº `<span class="hljs-comment">--no-video-playback --no-audio-playback`ï¼‰ã€‚</span>

<span class="hljs-comment">--new-display[=[&lt;å®½åº¦&gt;x&lt;é«˜åº¦&gt;][/&lt;æ¯è‹±å¯¸ç‚¹æ•°&gt;]]</span>
    åˆ›å»ºä¸€ä¸ªå…·æœ‰æŒ‡å®šåˆ†è¾¨ç‡å’Œåƒç´ å¯†åº¦ï¼ˆDPIï¼‰çš„æ–°å±å¹•ã€‚å¦‚æœæœªæä¾›ï¼Œåˆ™é»˜è®¤ä½¿ç”¨ä¸»å±å¹•å°ºå¯¸å’Œ DPIã€‚
    ç¤ºä¾‹ï¼š
        <span class="hljs-comment">--new-display=1920x1080</span>
        <span class="hljs-comment">--new-display=1920x1080/420  # å¼ºåˆ¶ 420 DPI</span>
        <span class="hljs-comment">--new-display                # ä¸»å±å¹•å°ºå¯¸å’Œ DPI</span>
        <span class="hljs-comment">--new-display=/240           # ä¸»å±å¹•å°ºå¯¸å’Œ 240 DPI</span>

<span class="hljs-comment">--no-audio</span>
    ç¦ç”¨éŸ³é¢‘è½¬å‘ã€‚

<span class="hljs-comment">--no-audio-playback</span>
    åœ¨è®¡ç®—æœºä¸Šç¦ç”¨éŸ³é¢‘æ’­æ”¾ã€‚

<span class="hljs-comment">--no-cleanup</span>
    é»˜è®¤æƒ…å†µä¸‹ï¼Œscrcpy åœ¨é€€å‡ºæ—¶ä¼šä»è®¾å¤‡ç§»é™¤æœåŠ¡å™¨äºŒè¿›åˆ¶æ–‡ä»¶å¹¶æ¢å¤è®¾å¤‡çŠ¶æ€ï¼ˆæ˜¾ç¤ºè§¦æ‘¸ã€ä¿æŒå”¤é†’å’Œç”µæºæ¨¡å¼ï¼‰ã€‚
    æ­¤é€‰é¡¹ç¦ç”¨æ­¤æ¸…ç†æ“ä½œã€‚

<span class="hljs-comment">--no-clipboard-autosync</span>
    é»˜è®¤æƒ…å†µä¸‹ï¼Œscrcpy ä¼šåœ¨æ³¨å…¥ Ctrl+v ä¹‹å‰è‡ªåŠ¨å°†è®¡ç®—æœºå‰ªè´´æ¿åŒæ­¥åˆ°è®¾å¤‡å‰ªè´´æ¿ï¼Œå¹¶åœ¨è®¾å¤‡å‰ªè´´æ¿å‘ç”Ÿå˜åŒ–æ—¶è‡ªåŠ¨å°†å…¶åŒæ­¥åˆ°è®¡ç®—æœºå‰ªè´´æ¿ã€‚
    æ­¤é€‰é¡¹ç¦ç”¨æ­¤è‡ªåŠ¨åŒæ­¥ã€‚

<span class="hljs-comment">--no-downsize-on-error</span>
    é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨ MediaCodec å‡ºé”™æ—¶ï¼Œscrcpy ä¼šè‡ªåŠ¨å°è¯•ä»¥è¾ƒä½çš„åˆ†è¾¨ç‡é‡æ–°ç¼–ç ã€‚
    æ­¤é€‰é¡¹ç¦ç”¨æ­¤è¡Œä¸ºã€‚

<span class="hljs-comment">--no-key-repeat</span>
    å½“æŒ‰é”®è¢«æŒ‰ä½æ—¶ï¼Œä¸è½¬å‘é‡å¤çš„æŒ‰é”®äº‹ä»¶ã€‚

<span class="hljs-comment">--no-mipmaps</span>
    å¦‚æœæ¸²æŸ“å™¨æ˜¯ OpenGL <span class="hljs-number">3.0</span>+ æˆ– OpenGL ES <span class="hljs-number">2.0</span>+ï¼Œåˆ™ä¼šè‡ªåŠ¨ç”Ÿæˆ Mipmaps ä»¥æé«˜ç¼©å°æ¯”ä¾‹æ—¶çš„è´¨é‡ã€‚æ­¤é€‰é¡¹ç¦ç”¨ Mipmaps çš„ç”Ÿæˆã€‚

<span class="hljs-comment">--no-mouse-hover</span>
    ä¸è½¬å‘é¼ æ ‡æ‚¬åœï¼ˆæ²¡æœ‰ä»»ä½•ç‚¹å‡»çš„é¼ æ ‡ç§»åŠ¨ï¼‰äº‹ä»¶ã€‚

<span class="hljs-comment">--no-power-on</span>
    å¯åŠ¨æ—¶ä¸å”¤é†’è®¾å¤‡ã€‚

<span class="hljs-comment">--no-vd-destroy-content</span>
    ç¦ç”¨è™šæ‹Ÿå±å¹•çš„â€œç§»é™¤æ—¶é”€æ¯å†…å®¹â€æ ‡å¿—ã€‚
    å¯ç”¨æ­¤é€‰é¡¹åï¼Œå…³é—­è™šæ‹Ÿå±å¹•æ—¶ï¼Œæ­£åœ¨è¿è¡Œçš„åº”ç”¨ä¼šç§»åˆ°ä¸»å±å¹•è€Œä¸æ˜¯è¢«é”€æ¯ã€‚

<span class="hljs-comment">--no-vd-system-decorations</span>
    ç¦ç”¨è™šæ‹Ÿå±å¹•çš„ç³»ç»Ÿè£…é¥°æ ‡å¿—ã€‚

<span class="hljs-comment">--no-video</span>
    ç¦ç”¨è§†é¢‘è½¬å‘ã€‚

<span class="hljs-comment">--no-video-playback</span>
    åœ¨è®¡ç®—æœºä¸Šç¦ç”¨è§†é¢‘æ’­æ”¾ã€‚

<span class="hljs-comment">--no-window</span>
    ç¦ç”¨ scrcpy çª—å£ã€‚éšå« `<span class="hljs-comment">--no-video-playback`ã€‚</span>

<span class="hljs-comment">--orientation=æ•°å€¼</span>
    ç­‰åŒäº `<span class="hljs-comment">--display-orientation=æ•°å€¼ --record-orientation=æ•°å€¼`ã€‚</span>

<span class="hljs-comment">--otg</span>
    ä»¥ OTG æ¨¡å¼è¿è¡Œï¼šæ¨¡æ‹Ÿç‰©ç†é”®ç›˜å’Œé¼ æ ‡ï¼Œå°±åƒè®¡ç®—æœºé”®ç›˜å’Œé¼ æ ‡é€šè¿‡ OTG çº¿ç¼†ç›´æ¥æ’å…¥è®¾å¤‡ä¸€æ ·ã€‚
    åœ¨æ­¤æ¨¡å¼ä¸‹ï¼Œä¸éœ€è¦ adb (USB è°ƒè¯•)ï¼Œå¹¶ä¸”é•œåƒè¢«ç¦ç”¨ã€‚
    å·¦ Altã€å·¦ Super æˆ–å³ Super é”®å¯åˆ‡æ¢é¼ æ ‡æ•è·æ¨¡å¼ï¼Œå°†é¼ æ ‡æ§åˆ¶æƒäº¤è¿˜ç»™è®¡ç®—æœºã€‚
    é”®ç›˜å’Œé¼ æ ‡å¯ä»¥åˆ†åˆ«ä½¿ç”¨ `<span class="hljs-comment">--keyboard=disabled` å’Œ `--mouse=disabled` ç¦ç”¨ã€‚</span>
    å®ƒå¯èƒ½ä»…é€šè¿‡ USB å·¥ä½œã€‚
    å‚è§ `<span class="hljs-comment">--keyboard`, `--mouse` å’Œ `--gamepad`ã€‚</span>

-p, <span class="hljs-comment">--port=ç«¯å£[:ç«¯å£]</span>
    è®¾ç½®å®¢æˆ·ç«¯ç›‘å¬çš„ TCP ç«¯å£ï¼ˆèŒƒå›´ï¼‰ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">27183</span>:<span class="hljs-number">27199</span>ã€‚

<span class="hljs-comment">--pause-on-exit[=æ¨¡å¼]</span>
    é…ç½®é€€å‡ºæ—¶æš‚åœã€‚å¯èƒ½çš„å€¼æœ‰ `<span class="hljs-string">"true"</span>` (æ€»æ˜¯åœ¨é€€å‡ºæ—¶æš‚åœ)ã€`<span class="hljs-string">"false"</span>` (ä»ä¸åœ¨é€€å‡ºæ—¶æš‚åœ) å’Œ `<span class="hljs-string">"if-error"</span>` (ä»…åœ¨å‡ºé”™æ—¶æš‚åœ)ã€‚
    è¿™æœ‰åŠ©äºé˜²æ­¢ç»ˆç«¯çª—å£è‡ªåŠ¨å…³é—­ï¼Œä»¥ä¾¿é˜…è¯»é”™è¯¯ä¿¡æ¯ã€‚
    é»˜è®¤å€¼ä¸º `<span class="hljs-string">"false"</span>`ã€‚
    ä¸å¸¦å‚æ•°ä¼ é€’æ­¤é€‰é¡¹ç­‰åŒäºä¼ é€’ `<span class="hljs-string">"true"</span>`ã€‚

<span class="hljs-comment">--power-off-on-close</span>
    å…³é—­ scrcpy æ—¶å…³é—­è®¾å¤‡å±å¹•ã€‚

<span class="hljs-comment">--prefer-text</span>
    å°†å­—æ¯å­—ç¬¦å’Œç©ºæ ¼ä½œä¸ºæ–‡æœ¬äº‹ä»¶è€ŒéæŒ‰é”®äº‹ä»¶æ³¨å…¥ã€‚
    è¿™é¿å…äº†è¾“å…¥ç‰¹æ®Šå­—ç¬¦æ—¶ç»„åˆå¤šä¸ªé”®å¯èƒ½äº§ç”Ÿçš„é—®é¢˜ï¼Œä½†ä¼šç ´åæ¸¸æˆä¸­å­—æ¯é”®ï¼ˆé€šå¸¸æ˜¯ WASDï¼‰çš„é¢„æœŸè¡Œä¸ºã€‚

<span class="hljs-comment">--print-fps</span>
    å¯åŠ¨ FPS è®¡æ•°å™¨ï¼Œåœ¨æ§åˆ¶å°æ‰“å°å¸§ç‡æ—¥å¿—ã€‚å¯ä»¥éšæ—¶é€šè¿‡ MOD+i å¯åŠ¨æˆ–åœæ­¢ã€‚

<span class="hljs-comment">--push-target=è·¯å¾„</span>
    è®¾ç½®é€šè¿‡æ‹–æ”¾å°†æ–‡ä»¶æ¨é€åˆ°è®¾å¤‡æ—¶çš„ç›®æ ‡ç›®å½•ã€‚
    æ­¤è·¯å¾„ä¼šåŸæ ·ä¼ é€’ç»™ `adb push`ã€‚
    é»˜è®¤å€¼ä¸º `<span class="hljs-string">"/sdcard/Download/"</span>`ã€‚

-r, <span class="hljs-comment">--record=æ–‡ä»¶å.mp4</span>
    å°†å±å¹•å½•åˆ¶åˆ°æ–‡ä»¶ã€‚
    æ ¼å¼ç”± `<span class="hljs-comment">--record-format` é€‰é¡¹ï¼ˆå¦‚æœè®¾ç½®ï¼‰æˆ–æ–‡ä»¶æ‰©å±•åå†³å®šã€‚</span>

<span class="hljs-comment">--raw-key-events</span>
    ä¸ºæ‰€æœ‰è¾“å…¥é”®æ³¨å…¥æŒ‰é”®äº‹ä»¶ï¼Œå¹¶å¿½ç•¥æ–‡æœ¬äº‹ä»¶ã€‚

<span class="hljs-comment">--record-format=æ ¼å¼</span>
    å¼ºåˆ¶å½•åˆ¶æ ¼å¼ (mp4, mkv, m4a, mka, opus, aac, flac æˆ– wav)ã€‚

<span class="hljs-comment">--record-orientation=æ•°å€¼</span>
    è®¾ç½®å½•åˆ¶æ–¹å‘ã€‚
    å¯èƒ½çš„å€¼ä¸º <span class="hljs-number">0</span>, <span class="hljs-number">90</span>, <span class="hljs-number">180</span> å’Œ <span class="hljs-number">270</span>ã€‚æ•°å­—è¡¨ç¤ºé¡ºæ—¶é’ˆæ—‹è½¬çš„åº¦æ•°ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">0</span>ã€‚

<span class="hljs-comment">--render-driver=åç§°</span>
    è¯·æ±‚ SDL ä½¿ç”¨ç»™å®šçš„æ¸²æŸ“é©±åŠ¨ï¼ˆè¿™åªæ˜¯ä¸€ä¸ªæç¤ºï¼‰ã€‚
    ç›®å‰æ”¯æŒçš„åç§°æœ‰ `<span class="hljs-string">"direct3d"</span>`, `<span class="hljs-string">"opengl"</span>`, `<span class="hljs-string">"opengles2"</span>`, `<span class="hljs-string">"opengles"</span>`, `<span class="hljs-string">"metal"</span>` å’Œ `<span class="hljs-string">"software"</span>`ã€‚
    &lt;https://wiki.libsdl.org/SDL_HINT_RENDER_DRIVER&gt;

<span class="hljs-comment">--require-audio</span>
    é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“è®¾å¤‡ä¸Šçš„éŸ³é¢‘æ•è·å¤±è´¥æ—¶ï¼Œscrcpy ä»…é•œåƒè§†é¢‘ã€‚æ­¤é€‰é¡¹ä½¿å¾—åœ¨å¯ç”¨éŸ³é¢‘ä½†éŸ³é¢‘æ— æ³•å·¥ä½œæ—¶ï¼Œscrcpy ç›´æ¥å¤±è´¥ã€‚

-s, <span class="hljs-comment">--serial=åºåˆ—å·</span>
    è®¾å¤‡åºåˆ—å·ã€‚ä»…åœ¨å¤šä¸ªè®¾å¤‡è¿æ¥åˆ° adb æ—¶å¿…é¡»æŒ‡å®šã€‚

-S, <span class="hljs-comment">--turn-screen-off</span>
    ç«‹å³å…³é—­è®¾å¤‡å±å¹•ã€‚

<span class="hljs-comment">--screen-off-timeout=ç§’æ•°</span>
    è®¾ç½®åœ¨ scrcpy è¿è¡ŒæœŸé—´çš„å±å¹•å…³é—­è¶…æ—¶æ—¶é—´ï¼ˆé€€å‡ºæ—¶æ¢å¤åˆå§‹å€¼ï¼‰ã€‚

<span class="hljs-comment">--shortcut-mod=æŒ‰é”®[+...][,...]</span>
    æŒ‡å®šç”¨äº scrcpy å¿«æ·é”®çš„ä¿®é¥°é”®ã€‚
    å¯èƒ½çš„æŒ‰é”®æ˜¯ `<span class="hljs-string">"lctrl"</span>`, `<span class="hljs-string">"rctrl"</span>`, `<span class="hljs-string">"lalt"</span>`, `<span class="hljs-string">"ralt"</span>`, `<span class="hljs-string">"lsuper"</span>` å’Œ `<span class="hljs-string">"rsuper"</span>`ã€‚
    å¯ä»¥æŒ‡å®šå¤šä¸ªå¿«æ·é”®ä¿®é¥°é”®ï¼Œç”¨é€—å·åˆ†éš”ã€‚
    ä¾‹å¦‚ï¼Œè¦ä½¿ç”¨å·¦ Ctrl æˆ–å·¦ Super ä½œä¸º scrcpy å¿«æ·é”®ï¼Œä¼ é€’ `<span class="hljs-string">"lctrl,lsuper"</span>`ã€‚
    é»˜è®¤å€¼ä¸º `<span class="hljs-string">"lalt,lsuper"</span>` (å·¦ Alt æˆ–å·¦ Super)ã€‚

<span class="hljs-comment">--start-app=åç§°</span>
    å¯åŠ¨ä¸€ä¸ª Android åº”ç”¨ï¼Œé€šè¿‡å…¶ç²¾ç¡®çš„åŒ…åã€‚
    æ·»åŠ å‰ç¼€ `<span class="hljs-string">'?'</span>` ä»¥é€‰æ‹©åç§°ä»¥ç»™å®šåç§°ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰å¼€å¤´çš„åº”ç”¨ï¼ˆåœ¨è®¾å¤‡ä¸Šæ£€ç´¢åº”ç”¨åç§°å¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´ï¼‰ï¼š
        scrcpy <span class="hljs-comment">--start-app=?firefox</span>
    æ·»åŠ å‰ç¼€ `<span class="hljs-string">'+'</span>` ä»¥åœ¨å¯åŠ¨åº”ç”¨å‰å¼ºåˆ¶åœæ­¢å®ƒï¼š
        scrcpy <span class="hljs-comment">--new-display --start-app=+org.mozilla.firefox</span>
    ä¸¤ä¸ªå‰ç¼€å¯ä»¥ä¸€èµ·ä½¿ç”¨ï¼ŒæŒ‰æ­¤é¡ºåºï¼š
        scrcpy <span class="hljs-comment">--start-app=+?firefox</span>

-t, <span class="hljs-comment">--show-touches</span>
    åœ¨å¯åŠ¨æ—¶å¯ç”¨â€œæ˜¾ç¤ºè§¦æ‘¸â€ï¼Œé€€å‡ºæ—¶æ¢å¤åˆå§‹å€¼ã€‚
    å®ƒåªæ˜¾ç¤ºç‰©ç†è§¦æ‘¸ï¼ˆä¸åŒ…æ‹¬æ¥è‡ª scrcpy çš„ç‚¹å‡»ï¼‰ã€‚

<span class="hljs-comment">--tcpip[=[+]IPåœ°å€[:ç«¯å£]]</span>
    é€šè¿‡ TCP/IP é…ç½®å¹¶è¿æ¥åˆ°è®¾å¤‡ã€‚
    å¦‚æœæä¾›äº†ç›®æ ‡åœ°å€ï¼Œåˆ™ scrcpy åœ¨å¯åŠ¨å‰è¿æ¥åˆ°è¯¥åœ°å€ã€‚è®¾å¤‡å¿…é¡»åœ¨ç»™å®šçš„ TCP ç«¯å£ï¼ˆé»˜è®¤ <span class="hljs-number">5555</span>ï¼‰ä¸Šç›‘å¬ã€‚
    å¦‚æœæœªæä¾›ç›®æ ‡åœ°å€ï¼Œåˆ™ scrcpy å°è¯•æŸ¥æ‰¾å½“å‰è®¾å¤‡ï¼ˆé€šå¸¸é€šè¿‡ USB è¿æ¥ï¼‰çš„ IP åœ°å€ï¼Œå¯ç”¨ TCP/IP æ¨¡å¼ï¼Œç„¶ååœ¨å¯åŠ¨å‰è¿æ¥åˆ°è¯¥åœ°å€ã€‚
    åœ¨åœ°å€å‰åŠ  `<span class="hljs-string">'+'</span>` å‰ç¼€ä»¥å¼ºåˆ¶é‡æ–°è¿æ¥ã€‚

<span class="hljs-comment">--time-limit=ç§’æ•°</span>
    è®¾ç½®æœ€å¤§é•œåƒæ—¶é—´ï¼ˆç§’ï¼‰ã€‚

<span class="hljs-comment">--tunnel-host=IPåœ°å€</span>
    è®¾ç½®ç”¨äºè®¿é—® scrcpy æœåŠ¡å™¨çš„ adb éš§é“ IP åœ°å€ã€‚æ­¤é€‰é¡¹è‡ªåŠ¨å¯ç”¨ `<span class="hljs-comment">--force-adb-forward`ã€‚</span>
    é»˜è®¤å€¼ä¸º `localhost`ã€‚

<span class="hljs-comment">--tunnel-port=ç«¯å£</span>
    è®¾ç½®ç”¨äºè®¿é—® scrcpy æœåŠ¡å™¨çš„ adb éš§é“ TCP ç«¯å£ã€‚æ­¤é€‰é¡¹è‡ªåŠ¨å¯ç”¨ `<span class="hljs-comment">--force-adb-forward`ã€‚</span>
    é»˜è®¤å€¼ä¸º `<span class="hljs-number">0</span>` (ä¸å¼ºåˆ¶)ï¼šå°†ä½¿ç”¨ç”¨äºå»ºç«‹éš§é“çš„æœ¬åœ°ç«¯å£ã€‚

-v, <span class="hljs-comment">--version</span>
    æ‰“å° scrcpy çš„ç‰ˆæœ¬ã€‚

-V, <span class="hljs-comment">--verbosity=çº§åˆ«</span>
    è®¾ç½®æ—¥å¿—çº§åˆ« (verbose, <span class="hljs-built_in">debug</span>, info, warn æˆ– <span class="hljs-built_in">error</span>)ã€‚
    é»˜è®¤å€¼ä¸º `info`ã€‚

<span class="hljs-comment">--v4l2-sink=/dev/videoN</span>
    è¾“å‡ºåˆ° v4l2loopback è®¾å¤‡ã€‚
    æ­¤åŠŸèƒ½ä»…åœ¨ Linux ä¸Šå¯ç”¨ã€‚

<span class="hljs-comment">--v4l2-buffer=æ¯«ç§’</span>
    åœ¨æ¨é€å¸§ä¹‹å‰æ·»åŠ ç¼“å†²å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰ã€‚è¿™ä¼šå¢åŠ å»¶è¿Ÿä»¥è¡¥å¿æŠ–åŠ¨ã€‚
    æ­¤é€‰é¡¹ç±»ä¼¼äº `<span class="hljs-comment">--video-buffer`ï¼Œä½†ä¸“ç”¨äº V4L2 è¾“å‡ºã€‚</span>
    é»˜è®¤å€¼ä¸º <span class="hljs-number">0</span> (æ— ç¼“å†²)ã€‚
    æ­¤é€‰é¡¹ä»…åœ¨ Linux ä¸Šå¯ç”¨ã€‚

<span class="hljs-comment">--video-buffer=æ¯«ç§’</span>
    åœ¨æ˜¾ç¤ºè§†é¢‘å¸§ä¹‹å‰æ·»åŠ ç¼“å†²å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰ã€‚è¿™ä¼šå¢åŠ å»¶è¿Ÿä»¥è¡¥å¿æŠ–åŠ¨ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">0</span> (æ— ç¼“å†²)ã€‚

<span class="hljs-comment">--video-codec=åç§°</span>
    é€‰æ‹©è§†é¢‘ç¼–ç å™¨ (h264, h265 æˆ– av1)ã€‚
    é»˜è®¤å€¼ä¸º h264ã€‚

<span class="hljs-comment">--video-codec-options=é”®[:ç±»å‹]=å€¼[, ...]</span>
    ä¸ºè®¾å¤‡è§†é¢‘ç¼–ç å™¨è®¾ç½®ä»¥é€—å·åˆ†éš”çš„ `é”®:ç±»å‹=å€¼` é€‰é¡¹åˆ—è¡¨ã€‚
    <span class="hljs-string">'ç±»å‹'</span> çš„å¯èƒ½å€¼ä¸º <span class="hljs-string">'int'</span> (é»˜è®¤), <span class="hljs-string">'long'</span>, <span class="hljs-string">'float'</span> å’Œ <span class="hljs-string">'string'</span>ã€‚
    å¯èƒ½çš„ç¼–è§£ç å™¨é€‰é¡¹åˆ—è¡¨å¯åœ¨ Android æ–‡æ¡£ä¸­æ‰¾åˆ°ï¼š
    &lt;https://d.android.com/reference/android/media/MediaFormat&gt;

<span class="hljs-comment">--video-encoder=åç§°</span>
    ä½¿ç”¨ç‰¹å®šçš„ MediaCodec è§†é¢‘ç¼–ç å™¨ï¼ˆå–å†³äº `<span class="hljs-comment">--video-codec` æä¾›çš„ç¼–è§£ç å™¨ï¼‰ã€‚</span>
    å¯ç”¨çš„ç¼–ç å™¨å¯é€šè¿‡ `<span class="hljs-comment">--list-encoders` åˆ—å‡ºã€‚</span>

<span class="hljs-comment">--video-source=æ¥æº</span>
    é€‰æ‹©è§†é¢‘æ¥æº (display æˆ– camera)ã€‚
    ç›¸æœºé•œåƒéœ€è¦ Android <span class="hljs-number">12</span>+ã€‚
    é»˜è®¤å€¼ä¸º `display`ã€‚

-w, <span class="hljs-comment">--stay-awake</span>
    å½“è®¾å¤‡æ¥é€šç”µæºæ—¶ï¼Œåœ¨ scrcpy è¿è¡ŒæœŸé—´ä¿æŒè®¾å¤‡å”¤é†’ã€‚

<span class="hljs-comment">--window-borderless</span>
    ç¦ç”¨çª—å£è£…é¥°ï¼ˆæ˜¾ç¤ºæ— è¾¹æ¡†çª—å£ï¼‰ã€‚

<span class="hljs-comment">--window-title=æ–‡æœ¬</span>
    è®¾ç½®è‡ªå®šä¹‰çª—å£æ ‡é¢˜ã€‚

<span class="hljs-comment">--window-x=æ•°å€¼</span>
    è®¾ç½®çª—å£åˆå§‹æ°´å¹³ä½ç½®ã€‚
    é»˜è®¤å€¼ä¸º `<span class="hljs-string">"auto"</span>`ã€‚

<span class="hljs-comment">--window-y=æ•°å€¼</span>
    è®¾ç½®çª—å£åˆå§‹å‚ç›´ä½ç½®ã€‚
    é»˜è®¤å€¼ä¸º `<span class="hljs-string">"auto"</span>`ã€‚

<span class="hljs-comment">--window-width=æ•°å€¼</span>
    è®¾ç½®çª—å£åˆå§‹å®½åº¦ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">0</span> (è‡ªåŠ¨)ã€‚

<span class="hljs-comment">--window-height=æ•°å€¼</span>
    è®¾ç½®çª—å£åˆå§‹é«˜åº¦ã€‚
    é»˜è®¤å€¼ä¸º <span class="hljs-number">0</span> (è‡ªåŠ¨)ã€‚
</code></pre>
<p>å¿«æ·é”®ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">åœ¨ä»¥ä¸‹åˆ—è¡¨ä¸­ï¼ŒMOD æ˜¯å¿«æ·é”®ä¿®é¥°é”®ã€‚é»˜è®¤æ˜¯ï¼ˆå·¦ï¼‰Alt æˆ–ï¼ˆå·¦ï¼‰Superï¼Œä½†å¯ä»¥é€šè¿‡ <span class="hljs-code">`--shortcut-mod`</span> é…ç½®ï¼ˆè§ä¸Šæ–‡ï¼‰ã€‚

MOD+f
<span class="hljs-code">    åˆ‡æ¢å…¨å±æ¨¡å¼
</span>
MOD+å·¦æ–¹å‘é”®
<span class="hljs-code">    å‘å·¦æ—‹è½¬å±å¹•
</span>
MOD+å³æ–¹å‘é”®
<span class="hljs-code">    å‘å³æ—‹è½¬å±å¹•
</span>
MOD+Shift+å·¦æ–¹å‘é”®
MOD+Shift+å³æ–¹å‘é”®
<span class="hljs-code">    æ°´å¹³ç¿»è½¬å±å¹•
</span>
MOD+Shift+ä¸Šæ–¹å‘é”®
MOD+Shift+ä¸‹æ–¹å‘é”®
<span class="hljs-code">    å‚ç›´ç¿»è½¬å±å¹•
</span>
MOD+z
<span class="hljs-code">    æš‚åœæˆ–æ¢å¤æ˜¾ç¤º
</span>
MOD+Shift+z
<span class="hljs-code">    å–æ¶ˆæš‚åœæ˜¾ç¤º
</span>
MOD+Shift+r
<span class="hljs-code">    é‡ç½®è§†é¢‘æ•è·/ç¼–ç 
</span>
MOD+g
<span class="hljs-code">    å°†çª—å£å¤§å°è°ƒæ•´ä¸º 1:1 (åƒç´ å®Œç¾)
</span>
MOD+w
åŒå‡»é»‘è¾¹
<span class="hljs-code">    è°ƒæ•´çª—å£å¤§å°ä»¥ç§»é™¤é»‘è¾¹
</span>
MOD+h
ä¸­é”®ç‚¹å‡»
<span class="hljs-code">    ç‚¹å‡» HOME
</span>
MOD+b
MOD+é€€æ ¼é”®
å³é”®ç‚¹å‡» (å½“å±å¹•äº®æ—¶)
<span class="hljs-code">    ç‚¹å‡» BACK
</span>
MOD+s
ç¬¬å››é”®ç‚¹å‡»
<span class="hljs-code">    ç‚¹å‡» APP_SWITCH
</span>
MOD+m
<span class="hljs-code">    ç‚¹å‡» MENU
</span>
MOD+ä¸Šæ–¹å‘é”®
<span class="hljs-code">    ç‚¹å‡» VOLUME_UP
</span>
MOD+ä¸‹æ–¹å‘é”®
<span class="hljs-code">    ç‚¹å‡» VOLUME_DOWN
</span>
MOD+p
<span class="hljs-code">    ç‚¹å‡» POWER (æ‰“å¼€/å…³é—­å±å¹•)
</span>
å³é”®ç‚¹å‡» (å½“å±å¹•ç­æ—¶)
<span class="hljs-code">    ç‚¹äº®å±å¹•
</span>
MOD+o
<span class="hljs-code">    å…³é—­è®¾å¤‡å±å¹• (ç»§ç»­é•œåƒ)
</span>
MOD+Shift+o
<span class="hljs-code">    æ‰“å¼€è®¾å¤‡å±å¹•
</span>
MOD+r
<span class="hljs-code">    æ—‹è½¬è®¾å¤‡å±å¹•
</span>
MOD+n
ç¬¬äº”é”®ç‚¹å‡»
<span class="hljs-code">    å±•å¼€é€šçŸ¥é¢æ¿
</span>
MOD+Shift+n
<span class="hljs-code">    æ”¶èµ·é€šçŸ¥é¢æ¿
</span>
MOD+c
<span class="hljs-code">    å¤åˆ¶åˆ°å‰ªè´´æ¿ (æ³¨å…¥ COPY é”®ç ï¼Œä»…é™ Android &gt;= 7)
</span>
MOD+x
<span class="hljs-code">    å‰ªåˆ‡åˆ°å‰ªè´´æ¿ (æ³¨å…¥ CUT é”®ç ï¼Œä»…é™ Android &gt;= 7)
</span>
MOD+v
<span class="hljs-code">    å°†è®¡ç®—æœºå‰ªè´´æ¿å†…å®¹å¤åˆ¶åˆ°è®¾å¤‡ï¼Œç„¶åç²˜è´´ (æ³¨å…¥ PASTE é”®ç ï¼Œä»…é™ Android &gt;= 7)
</span>
MOD+Shift+v
<span class="hljs-code">    å°†è®¡ç®—æœºå‰ªè´´æ¿æ–‡æœ¬ä½œä¸ºä¸€ç³»åˆ—æŒ‰é”®äº‹ä»¶æ³¨å…¥
</span>
MOD+k
<span class="hljs-code">    åœ¨è®¾å¤‡ä¸Šæ‰“å¼€é”®ç›˜è®¾ç½® (ä»…é€‚ç”¨äº HID é”®ç›˜)
</span>
MOD+i
<span class="hljs-code">    å¯ç”¨/ç¦ç”¨ FPS è®¡æ•°å™¨ (åœ¨æ—¥å¿—ä¸­æ‰“å°æ¯ç§’å¸§æ•°)
</span>
Ctrl+ç‚¹å‡»å¹¶æ‹–åŠ¨
<span class="hljs-code">    ä»å±å¹•ä¸­å¿ƒè¿›è¡Œæåˆç¼©æ”¾å’Œæ—‹è½¬
</span>
Shift+ç‚¹å‡»å¹¶æ‹–åŠ¨
<span class="hljs-code">    å‚ç›´å€¾æ–œ (ç”¨åŒæŒ‡æ»‘åŠ¨)
</span>
Ctrl+Shift+ç‚¹å‡»å¹¶æ‹–åŠ¨
<span class="hljs-code">    æ°´å¹³å€¾æ–œ (ç”¨åŒæŒ‡æ»‘åŠ¨)
</span>
æ‹–æ”¾ APK æ–‡ä»¶
<span class="hljs-code">    ä»è®¡ç®—æœºå®‰è£… APK
</span>
æ‹–æ”¾é APK æ–‡ä»¶
<span class="hljs-code">    æ¨é€æ–‡ä»¶åˆ°è®¾å¤‡ (å‚è§ `--push-target`)
</span></code></pre>
<p>ç¯å¢ƒå˜é‡ï¼š</p>
<pre><code class="hljs language-go" lang="go">ADB
    adb å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„

ANDROID_SERIAL
    å¦‚æœæœªæŒ‡å®šé€‰æ‹©å™¨ (<span class="hljs-string">`-s`</span>, <span class="hljs-string">`-d`</span>, <span class="hljs-string">`-e`</span> æˆ– <span class="hljs-string">`--tcpip=&lt;åœ°å€&gt;`</span>) æ—¶è¦ä½¿ç”¨çš„è®¾å¤‡åºåˆ—å·

SCRCPY_ICON_PATH
    ç¨‹åºå›¾æ ‡è·¯å¾„

SCRCPY_SERVER_PATH
    æœåŠ¡å™¨äºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„
</code></pre>
<p>é€€å‡ºçŠ¶æ€ï¼š</p>
<pre><code class="hljs">  0  ç¨‹åºæ­£å¸¸ç»ˆæ­¢
  1  å¯åŠ¨å¤±è´¥
  2  è¿è¡Œè¿‡ç¨‹ä¸­è®¾å¤‡æ–­å¼€è¿æ¥
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[FiddleræŠ“åŒ…å·¥å…·è¯¦è§£ï¼ŒHTTPHTTPSè°ƒè¯•ã€ä»£ç†é…ç½®ä¸æ¥å£åˆ†æå®æˆ˜æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7578762210287386687</link>    <guid>https://juejin.cn/post/7578762210287386687</guid>    <pubDate>2025-12-02T03:19:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578762210287386687" data-draft-id="7578811288819236907" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="FiddleræŠ“åŒ…å·¥å…·è¯¦è§£ï¼ŒHTTPHTTPSè°ƒè¯•ã€ä»£ç†é…ç½®ä¸æ¥å£åˆ†æå®æˆ˜æ•™ç¨‹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-02T03:19:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€å¿ƒçŒ´çˆ·"/> <meta itemprop="url" content="https://juejin.cn/user/2179705232165364"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            FiddleræŠ“åŒ…å·¥å…·è¯¦è§£ï¼ŒHTTPHTTPSè°ƒè¯•ã€ä»£ç†é…ç½®ä¸æ¥å£åˆ†æå®æˆ˜æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2179705232165364/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€å¿ƒçŒ´çˆ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-02T03:19:00.000Z" title="Tue Dec 02 2025 03:19:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰åç«¯åˆ†ç¦»ã€å¾®æœåŠ¡æ¶æ„æ—¥ç›Šå¤æ‚çš„ä»Šå¤©ï¼Œç½‘ç»œé€šä¿¡é—®é¢˜ã€æ¥å£å¼‚å¸¸ä¸æ€§èƒ½ç“¶é¢ˆå‡ ä¹æˆäº†æ¯ä½å¼€å‘è€…çš„â€œæ—¥å¸¸ä¼´ä¾£â€ã€‚
è¦ç²¾å‡†å®šä½è¿™äº›é—®é¢˜ï¼Œä¸€ä¸ªå¼ºå¤§çš„æŠ“åŒ…è°ƒè¯•å·¥å…·å°±æ˜¾å¾—è‡³å…³é‡è¦ã€‚</p>
<p>åœ¨ä¼—å¤šå·¥å…·ä¸­ï¼Œ<strong>FiddleræŠ“åŒ…å·¥å…·</strong> å‡­å€Ÿå…¶åŠŸèƒ½å…¨é¢ã€å…è´¹æ˜“ç”¨ã€å…¼å®¹æ€§å¼ºçš„ä¼˜åŠ¿ï¼Œæˆä¸ºå¼€å‘è€…åœ¨æ¥å£è°ƒè¯•ã€æ€§èƒ½åˆ†æå’Œç§»åŠ¨ç«¯è°ƒè¯•ä¸­çš„é¦–é€‰åˆ©å™¨ã€‚</p>
<p>æœ¬æ–‡å°†ç»“åˆå®æˆ˜ç»éªŒï¼Œç³»ç»Ÿè®²è§£ <strong>Fiddlerä½¿ç”¨æ•™ç¨‹ã€ä»£ç†é…ç½®ã€HTTPSæŠ“åŒ…ã€æ¥å£è°ƒè¯•ä¸ä¼˜åŒ–æŠ€å·§</strong>ï¼Œå¸®åŠ©ä½ é«˜æ•ˆæŒæ¡ç½‘ç»œè°ƒè¯•çš„æ ¸å¿ƒèƒ½åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€FiddleræŠ“åŒ…å·¥å…·ç®€ä»‹</strong></h2>
<p><strong>Fiddler</strong> æ˜¯ Telerik å…¬å¸æ¨å‡ºçš„ä¸€æ¬¾ä¸“ä¸š HTTP/HTTPS æŠ“åŒ…ä¸è°ƒè¯•å·¥å…·ï¼Œé€šè¿‡ä»£ç†æœºåˆ¶æ‹¦æˆªå¹¶è®°å½•ç½‘ç»œè¯·æ±‚ï¼Œå®ç°å¯¹è¯·æ±‚å¤´ã€å“åº”å†…å®¹ã€å‚æ•°ä¸æ€§èƒ½çš„å…¨é¢åˆ†æã€‚</p>
<p>ç›¸æ¯”å…¶ä»–å¸¸è§å·¥å…·ï¼š</p>






























<table><thead><tr><th>å·¥å…·</th><th>ç‰¹ç‚¹</th><th>ä¼˜åŠ¿</th></tr></thead><tbody><tr><td><strong>Fiddler</strong></td><td>å…è´¹ã€å¯å®šåˆ¶ã€æ”¯æŒæ–­ç‚¹ä¸Mock</td><td>åŠŸèƒ½å…¨é¢ã€è°ƒè¯•çµæ´»</td></tr><tr><td><strong>Charles</strong></td><td>å•†ä¸šè½¯ä»¶ï¼Œæ“ä½œç®€å•</td><td>ä¸Šæ‰‹å¿«ä½†åŠŸèƒ½ç•¥å¼±</td></tr><tr><td><strong>Postman</strong></td><td>è¯·æ±‚æ„é€ ä¸æµ‹è¯•å·¥å…·</td><td>ä¸æ”¯æŒå®æ—¶æŠ“åŒ…</td></tr><tr><td><strong>Wireshark</strong></td><td>åº•å±‚ç½‘ç»œåˆ†æå·¥å…·</td><td>ä¸“ä¸šä½†å­¦ä¹ é—¨æ§›é«˜</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€Fiddlerå®‰è£…ä¸é…ç½®æ­¥éª¤</strong></h2>
<h3 data-id="heading-2"><strong>1. å®‰è£…ä¸å¯åŠ¨</strong></h3>
<p>å®‰è£… Fiddler åï¼Œå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨æ¥ç®¡ç³»ç»Ÿä»£ç†ã€‚
æ‰“å¼€æµè§ˆå™¨è®¿é—®ä»»æ„ç½‘ç«™ï¼Œå³å¯åœ¨ Fiddler ç•Œé¢çœ‹åˆ°å®æ—¶è¯·æ±‚æµã€‚</p>
<ul>
<li>å·¦ä¸‹è§’æ˜¾ç¤º â€œCapturingâ€ è¡¨ç¤ºæ­£åœ¨æŠ“åŒ…ï¼›</li>
<li>è‹¥æ˜¾ç¤º â€œPausedâ€ï¼Œç‚¹å‡»å³å¯é‡æ–°å¼€å§‹ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3"><strong>2. Fiddlerä»£ç†é…ç½®ï¼ˆç”µè„‘ä¸ç§»åŠ¨ç«¯ï¼‰</strong></h3>
<p>Fiddler é»˜è®¤ä»…æ•è·æœ¬æœºç½‘ç»œæµé‡ã€‚
è‹¥è¦æŠ“å–ç§»åŠ¨ç«¯ Appã€å°ç¨‹åºæˆ–å…¶ä»–è®¾å¤‡çš„è¯·æ±‚ï¼Œéœ€è¦å¼€å¯è¿œç¨‹ä»£ç†ã€‚</p>
<p><strong>é…ç½®æ–¹æ³•å¦‚ä¸‹ï¼š</strong></p>
<ol>
<li>æ‰“å¼€ <code>Tools â†’ Options â†’ Connections</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Allow remote computers to connect</strong>ï¼›</li>
<li>è®°å½•ç”µè„‘ IP åœ°å€ä¸ç«¯å£ï¼ˆé»˜è®¤ 8888ï¼‰ï¼›</li>
<li>ç¡®ä¿æ‰‹æœºä¸ç”µè„‘è¿æ¥åŒä¸€ Wi-Fiï¼›</li>
<li>åœ¨æ‰‹æœº Wi-Fi è®¾ç½®ä¸­æ·»åŠ ä»£ç†ï¼š
<ul>
<li>ä¸»æœºåï¼šç”µè„‘ IPï¼›</li>
<li>ç«¯å£å·ï¼š8888ã€‚</li>
</ul>
</li>
</ol>
<p>å®Œæˆåï¼ŒFiddler å³å¯æ•è·ç§»åŠ¨ç«¯æ‰€æœ‰ç½‘ç»œè¯·æ±‚ã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong>3. HTTPS æŠ“åŒ…é…ç½®</strong></h3>
<p>ç°ä»£ç½‘ç«™å‡ ä¹å…¨éƒ¨å¯ç”¨ HTTPS åŠ å¯†ï¼Œ
å› æ­¤éœ€è¦å®‰è£…å¹¶ä¿¡ä»» Fiddler è¯ä¹¦ï¼Œæ‰èƒ½æŸ¥çœ‹åŠ å¯†è¯·æ±‚ã€‚</p>
<p><strong>é…ç½®æ­¥éª¤å¦‚ä¸‹ï¼š</strong></p>
<ul>
<li>æ‰“å¼€ <code>Tools â†’ Options â†’ HTTPS</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Decrypt HTTPS traffic</strong>ï¼›</li>
<li>ç‚¹å‡» â€œActions â†’ Trust Root Certificateâ€ï¼›</li>
<li>å®‰è£…å¹¶ä¿¡ä»»æ ¹è¯ä¹¦ï¼›</li>
<li>è‹¥æŠ“å–ç§»åŠ¨ç«¯è¯·æ±‚ï¼Œè¿˜éœ€å¯¼å‡ºè¯ä¹¦å¹¶åœ¨æ‰‹æœºä¿¡ä»»ã€‚</li>
</ul>
<p>é…ç½®å®Œæˆåï¼ŒFiddler å°†èƒ½æ˜¾ç¤º HTTPS è¯·æ±‚çš„å®Œæ•´ Header ä¸å“åº”å†…å®¹ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>ä¸‰ã€Fiddlerä½¿ç”¨æ•™ç¨‹ï¼šæ ¸å¿ƒåŠŸèƒ½è¯¦è§£</strong></h2>
<h3 data-id="heading-6"><strong>1. è¯·æ±‚ä¸å“åº”åˆ†æ</strong></h3>
<p>Fiddler ä¸»ç•Œé¢æ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰è¯·æ±‚ï¼Œ
ç‚¹å‡»ä»»æ„æ¡ç›®å³å¯æŸ¥çœ‹ï¼š</p>
<ul>
<li>è¯·æ±‚æ–¹å¼ï¼ˆGET/POST/PUT/DELETEï¼‰ï¼›</li>
<li>è¯·æ±‚ URL ä¸å‚æ•°ï¼›</li>
<li>è¯·æ±‚å¤´ã€Cookieã€è¯·æ±‚ä½“ï¼›</li>
<li>å“åº”çŠ¶æ€ç ã€è¿”å›æ•°æ®ä¸æ—¶é—´ç»Ÿè®¡ã€‚</li>
</ul>
<p>æŸç”µå•†æ¥å£åœ¨ç§»åŠ¨ç«¯åŠ è½½å¤±è´¥ï¼Œé€šè¿‡ Fiddler æŠ“åŒ…å‘ç°è¯·æ±‚å‚æ•°å¤šå¸¦äº†ä¸€ä¸ªç©ºæ ¼ï¼Œ
å¯¼è‡´åç«¯ç­¾åéªŒè¯ä¸é€šè¿‡ã€‚å‡ åˆ†é’Ÿå†…å³å¯å®šä½ä¿®å¤ã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>2. æ¨¡æ‹Ÿæ¥å£å“åº”ï¼ˆAutoResponderï¼‰</strong></h3>
<p>AutoResponder æ¨¡å—å…è®¸å¼€å‘è€…æ¨¡æ‹Ÿæ¥å£å“åº”ï¼Œ
æ— éœ€ä¾èµ–åç«¯å³å¯æµ‹è¯•å‰ç«¯é€»è¾‘ã€‚</p>
<p><strong>ä½¿ç”¨æ–¹æ³•ï¼š</strong></p>
<ol>
<li>æ‰“å¼€ AutoResponder é¢æ¿ï¼›</li>
<li>ç‚¹å‡» â€œAdd Ruleâ€ æ·»åŠ è§„åˆ™ï¼›</li>
<li>åŒ¹é…æ¥å£ URL æˆ–è·¯å¾„å…³é”®å­—ï¼›</li>
<li>é€‰æ‹©æœ¬åœ° JSON æ–‡ä»¶æˆ–è‡ªå®šä¹‰è¿”å›å†…å®¹ï¼›</li>
<li>å‹¾é€‰ â€œEnable Rulesâ€ å¯ç”¨è§„åˆ™ã€‚</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼š</strong>
å¯è®© <code>/api/user</code> è¿”å› <code>{ "status":200, "name":"test" }</code>ï¼Œ
å‰ç«¯å³å¯åœ¨åç«¯æœªå®Œæˆæ—¶æ­£å¸¸å¼€å‘ã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>3. è¯·æ±‚æ–­ç‚¹ä¸ä¿®æ”¹ï¼ˆBreakpointsï¼‰</strong></h3>
<p>Fiddler æ”¯æŒåœ¨è¯·æ±‚æˆ–å“åº”é˜¶æ®µè®¾ç½®æ–­ç‚¹ï¼Œ
å¼€å‘è€…å¯åœ¨è¯·æ±‚å‘å‡ºæˆ–å“åº”è¿”å›å‰ä¿®æ”¹æ•°æ®ã€‚</p>
<p><strong>å¸¸ç”¨å‘½ä»¤ï¼š</strong></p>
<ul>
<li><code>bpu yourapi.com</code> â†’ è¯·æ±‚å‰æ–­ç‚¹ï¼›</li>
<li><code>bpafter yourapi.com</code> â†’ å“åº”å‰æ–­ç‚¹ï¼›</li>
<li><code>bpu</code> â†’ å…³é—­æ–­ç‚¹ã€‚</li>
</ul>
<p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ¨¡æ‹ŸæœåŠ¡å™¨é”™è¯¯ï¼ˆ500 / 404ï¼‰ï¼›</li>
<li>æµ‹è¯•æ¥å£å®¹é”™æœºåˆ¶ï¼›</li>
<li>æ‰‹åŠ¨ä¿®æ”¹å‚æ•°éªŒè¯æ¥å£å®‰å…¨æ€§ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-9"><strong>4. æ„é€ ä¸é‡æ”¾è¯·æ±‚ï¼ˆComposerï¼‰</strong></h3>
<p>Composer æ¨¡å—ç›¸å½“äºé›†æˆç‰ˆ Postmanï¼Œ
å¯æ„é€ è¯·æ±‚ã€ä¿®æ”¹å‚æ•°ã€è°ƒè¯•æ¥å£ã€‚</p>
<p><strong>ä½¿ç”¨æŠ€å·§ï¼š</strong></p>
<ul>
<li>æ”¯æŒè¯·æ±‚å¤´ã€Bodyã€å‚æ•°å®Œå…¨è‡ªå®šä¹‰ï¼›</li>
<li>å¯å¯¼å…¥å†å²è¯·æ±‚é‡æ”¾ï¼›</li>
<li>éªŒè¯ç­¾åç®—æ³•ã€æ¥å£ Token æˆ–èº«ä»½æ ¡éªŒé€»è¾‘ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10"><strong>5. æ€§èƒ½åˆ†æï¼ˆTimelineï¼‰</strong></h3>
<p>Timeline æ¨¡å—å¯å¯è§†åŒ–å±•ç¤ºè¯·æ±‚è€—æ—¶é˜¶æ®µï¼š
DNS â†’ TCP â†’ TLS â†’ Server Response â†’ Content Downloadã€‚</p>
<p><strong>å…¸å‹ç”¨é€”ï¼š</strong></p>
<ul>
<li>åˆ†æåŠ è½½å»¶è¿Ÿç“¶é¢ˆï¼›</li>
<li>ä¼˜åŒ–æ¥å£å“åº”é€Ÿåº¦ï¼›</li>
<li>åˆ¤æ–­é—®é¢˜æ˜¯ç½‘ç»œè¿˜æ˜¯åç«¯æ€§èƒ½ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-11"><strong>å››ã€å®æˆ˜æ¡ˆä¾‹ï¼šæ¥å£å»¶è¿Ÿä¸è¯·æ±‚å¼‚å¸¸åˆ†æ</strong></h2>
<p>åœ¨æŸé¡¹ç›®ä¸­ï¼Œé¦–é¡µåŠ è½½è€—æ—¶è¶…è¿‡ 8 ç§’ã€‚
é€šè¿‡ Fiddler Timeline åˆ†æï¼š</p>
<ul>
<li>è¯·æ±‚é˜Ÿåˆ—é˜»å¡ä¸¥é‡ï¼›</li>
<li>DNS è§£ææ—¶é—´é«˜ï¼›</li>
<li>åç«¯å“åº”å»¶è¿Ÿæ˜æ˜¾ã€‚</li>
</ul>
<p>é€šè¿‡ä¼˜åŒ–åï¼š</p>
<ul>
<li>å¯ç”¨ç¼“å­˜å‡å°‘é‡å¤è¯·æ±‚ï¼›</li>
<li>åˆå¹¶èµ„æºè¯·æ±‚ï¼›</li>
<li>åç«¯å¼€å¯ Gzip å‹ç¼©ã€‚</li>
</ul>
<p>æœ€ç»ˆåŠ è½½æ—¶é—´é™è‡³ 2.3 ç§’ã€‚</p>
<blockquote>
<p>Fiddler ä¸ä»…ç”¨äºæŠ“åŒ…ï¼Œæ›´èƒ½æˆä¸ºç½‘ç»œæ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒå·¥å…·ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-12"><strong>äº”ã€FiddleråŠŸèƒ½æ¨¡å—æ€»è§ˆ</strong></h2>



































<table><thead><tr><th>æ¨¡å—</th><th>åŠŸèƒ½</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Filters</strong></td><td>æŒ‰æ¡ä»¶ç­›é€‰è¯·æ±‚</td><td>ä»…å…³æ³¨ç›®æ ‡æ¥å£</td></tr><tr><td><strong>AutoResponder</strong></td><td>æ¨¡æ‹Ÿæ¥å£å“åº”</td><td>å‰åç«¯åˆ†ç¦»è°ƒè¯•</td></tr><tr><td><strong>Breakpoints</strong></td><td>æ‹¦æˆªå¹¶ä¿®æ”¹è¯·æ±‚</td><td>å¼‚å¸¸æ¨¡æ‹Ÿä¸å®‰å…¨æµ‹è¯•</td></tr><tr><td><strong>Composer</strong></td><td>æ„é€ ä¸é‡æ”¾è¯·æ±‚</td><td>æ¥å£éªŒè¯ä¸æ€§èƒ½è°ƒè¯•</td></tr><tr><td><strong>Timeline</strong></td><td>è¯·æ±‚æ€§èƒ½åˆ†æ</td><td>ç½‘ç»œæ€§èƒ½ä¼˜åŒ–</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-13"><strong>å…­ã€Fiddlerå­¦ä¹ ä¸èµ„æºæ¨è</strong></h2>
<p>æƒ³æ·±å…¥å­¦ä¹  Fiddler çš„æ›´å¤šç”¨æ³•ï¼Ÿæ¨èè®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.fiddler.hk%2F" target="_blank" title="https://www.fiddler.hk/" ref="nofollow noopener noreferrer">Fiddler ä¸­æ–‡ç½‘</a></p>
<ul>
<li>Fiddler å®‰è£…ä¸é…ç½®æ•™ç¨‹ï¼›</li>
<li>HTTPS æŠ“åŒ…ä¸è¯ä¹¦è®¾ç½®æ–¹æ³•ï¼›</li>
<li>ç§»åŠ¨ç«¯ä»£ç†è°ƒè¯•æŒ‡å—ï¼›</li>
<li>Mock æ•°æ®ä¸æ–­ç‚¹è°ƒè¯•æŠ€å·§ï¼›</li>
<li>ç½‘ç»œæ€§èƒ½ä¼˜åŒ–å®æˆ˜æ¡ˆä¾‹ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>