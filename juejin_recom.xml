<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[æ·±å…¥æµ…å‡º TinyEditor å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç³»åˆ—ä¹‹ä¸€ï¼šTinyEditor æ˜¯ä»€ä¹ˆ]]></title>    <link>https://juejin.cn/post/7593261984189218866</link>    <guid>https://juejin.cn/post/7593261984189218866</guid>    <pubDate>2026-01-10T05:06:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593261984189218866" data-draft-id="7593242327932862474" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥æµ…å‡º TinyEditor å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç³»åˆ—ä¹‹ä¸€ï¼šTinyEditor æ˜¯ä»€ä¹ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,TypeScript,å¼€æº"/> <meta itemprop="datePublished" content="2026-01-10T05:06:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å¼€æºæ˜Ÿçƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1504599026445150"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥æµ…å‡º TinyEditor å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç³»åˆ—ä¹‹ä¸€ï¼šTinyEditor æ˜¯ä»€ä¹ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1504599026445150/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å¼€æºæ˜Ÿçƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T05:06:47.000Z" title="Sat Jan 10 2026 05:06:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ å¥½ï¼Œæˆ‘æ˜¯ Kagolï¼Œä¸ªäººå…¬ä¼—å·ï¼š<code>å‰ç«¯å¼€æºæ˜Ÿçƒ</code>ã€‚</p>
<p>TinyEditor v4.0 å·²æ­£å¼å‘å¸ƒï¼Œæ¥ä¸‹æ¥å°†é€šè¿‡ä¸€ç³»åˆ—æ–‡ç« ä»‹ç» TinyEditorï¼Œè®©å¤§å®¶æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ TinyEditorã€‚</p>
<p><a href="https://juejin.cn/post/7592089325913522176" target="_blank" title="https://juejin.cn/post/7592089325913522176">ğŸ‰å†æ—¶1å¹´ï¼ŒTinyEditor v4.0 æ­£å¼å‘å¸ƒï¼</a></p>
<p>TinyEditor æ˜¯ä¸€ä¸ªåŸºäº Quill 2.0 æ„å»ºçš„å¼ºå¤§å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œé€šè¿‡å…¨é¢çš„æ¨¡å—å’Œæ ¼å¼æ‰©å±•äº†åŸºç¡€åŠŸèƒ½ã€‚æœ¬æ¦‚è¿°ä»‹ç»äº†é¡¹ç›®æ¶æ„ã€å…³é”®ç‰¹æ€§å’Œç»“æ„ï¼Œå¸®åŠ©åˆå­¦è€…å¼€å‘è€…äº†è§£ TinyEditor æä¾›çš„åŠŸèƒ½ä»¥åŠå¦‚ä½•å¼€å§‹ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ TinyEditorï¼Ÿ</h2>
<p>TinyEditor æ˜¯ä¸€ä¸ªæ¡†æ¶æ— å…³çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œé€šè¿‡ 30 å¤šä¸ªé¢å¤–çš„æ¨¡å—å’Œæ ¼å¼å¢å¼ºäº† Quill 2.0ã€‚å®ƒåŸºäº Quill ç”Ÿæ€ç³»ç»Ÿï¼Œåœ¨ä¿æŒå®Œæ•´ API å…¼å®¹æ€§çš„åŒæ—¶ï¼Œæ·»åŠ äº†å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¦‚é«˜çº§è¡¨æ ¼æ“ä½œã€å›¾åƒå¤„ç†ã€åä½œç¼–è¾‘ã€AI é›†æˆç­‰ã€‚è¯¥ç¼–è¾‘å™¨è®¾è®¡ä¸ºä¸ Vueã€Reactã€Angular åŠå…¶ä»– Web æ¡†æ¶æ— ç¼åä½œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/103155482b99440fa671ed8daa8670ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5rqQ5pif55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768626406&amp;x-signature=tnr86h%2F8r3uJOYIEjwEP7yqfD1s%3D" alt="Tiny-editor-demo.png" loading="lazy"/></p>
<h2 data-id="heading-1">é¡¹ç›®æ¶æ„</h2>
<p>é¡¹ç›®é‡‡ç”¨ pnpm workspaces çš„ monorepo ç»“æ„ï¼ŒæŒ‰ä¸åŒå…³æ³¨ç‚¹ç»„ç»‡æˆç‹¬ç«‹çš„åŒ…ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0aab8c8d29c44ef0bf99dc8e4821e7dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5rqQ5pif55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768626406&amp;x-signature=zFLGHZ6E2Vhf26L0mryeBzq9XgI%3D" alt="é¡¹ç›®æ¶æ„.png" loading="lazy"/></p>
<h3 data-id="heading-2">æ ¸å¿ƒåŒ…</h3>






























<table><thead><tr><th>åŒ…</th><th>ç”¨é€”</th><th>ä¸»è¦å†…å®¹</th></tr></thead><tbody><tr><td>fluent-editor</td><td>ä¸»ç¼–è¾‘å™¨åº“</td><td>æ ¸å¿ƒ FluentEditor ç±»ã€æ¨¡å—ã€æ ¼å¼ã€ä¸»é¢˜</td></tr><tr><td>collaborative-editing-backend</td><td>å®æ—¶åä½œæœåŠ¡å™¨</td><td>WebSocket æœåŠ¡å™¨ã€MongoDB æŒä¹…åŒ–ã€Yjs é›†æˆ</td></tr><tr><td>docs</td><td>æ–‡æ¡£å’Œç¤ºä¾‹</td><td>æ–‡æ¡£ç«™ç‚¹ã€æ¼”ç¤ºåœºã€ç¤ºä¾‹</td></tr><tr><td>projects</td><td>æ¼”ç¤ºåº”ç”¨</td><td>Vue æ¼”ç¤ºã€å®ç°ç¤ºä¾‹</td></tr></tbody></table>
<h2 data-id="heading-3">å…³é”®ç‰¹æ€§å’Œæ¨¡å—</h2>
<p>TinyEditor é€šè¿‡ä¸€å¥—å…¨é¢çš„æ¨¡å—å’Œæ ¼å¼æ‰©å±•äº† Quillï¼Œä½¿å…¶å¼€ç®±å³ç”¨å³å¯æŠ•å…¥ç”Ÿäº§ç¯å¢ƒï¼š</p>
<h3 data-id="heading-4">æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li><strong>30+ æ¨¡å—å’Œæ ¼å¼</strong>ï¼šé™¤äº† Quill çš„ 21 ä¸ªå†…ç½®æ ¼å¼ï¼Œè¿˜æ·»åŠ äº† 15+ ä¸ªå¢å¼ºæ¨¡å—ï¼ŒåŒ…æ‹¬è¡¨æ ¼ã€å›¾åƒã€é“¾æ¥ã€è®¡æ•°å™¨ã€è¡¨æƒ…ç¬¦å·ã€æ–‡ä»¶ã€å‰ªè´´æ¿ã€æåŠã€å¿«é€Ÿèœå•å’Œæˆªå›¾åŠŸèƒ½</li>
<li><strong>é«˜çº§è¡¨æ ¼æ“ä½œ</strong>ï¼šæ’å…¥è‡ªå®šä¹‰å°ºå¯¸è¡¨æ ¼ã€æ‹–åŠ¨è¡Œåˆ—å¤§å°ã€æ’å…¥/åˆ é™¤è¡Œåˆ—ã€åˆå¹¶/æ‹†åˆ†å•å…ƒæ ¼</li>
<li><strong>æ¡†æ¶æ— å…³</strong>ï¼šå…¼å®¹ Vueã€Reactã€Angular å’ŒåŸç”Ÿ JavaScript</li>
<li><strong>å®Œå…¨ Quill å…¼å®¹</strong>ï¼šä¸ Quill API å’Œç”Ÿæ€ç³»ç»Ÿæ¨¡å—ä¿æŒ 100% å…¼å®¹æ€§</li>
</ul>
<h3 data-id="heading-5">æ¨¡å—æ¶æ„</h3>
<p>ç¼–è¾‘å™¨æŒ‰å‡ ä¸ªå…³é”®æ¨¡å—ç±»åˆ«ç»„ç»‡ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8106308c11cd4be3b472e6fe2a58c1fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5rqQ5pif55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768626406&amp;x-signature=3481r0VpVI8HXBhV3wxf5%2FrJqGg%3D" alt="æ¨¡å—æ¶æ„.png" loading="lazy"/></p>
<h2 data-id="heading-6">æŠ€æœ¯æ ˆ</h2>
<h3 data-id="heading-7">æ ¸å¿ƒä¾èµ–</h3>
<ul>
<li><strong>Quill 2.0</strong>ï¼šåŸºç¡€å¯Œæ–‡æœ¬ç¼–è¾‘å™¨å¼•æ“</li>
<li><strong>TypeScript</strong>ï¼šå®Œæ•´ç±»å‹å®‰å…¨å’Œå¼€å‘ä½“éªŒ</li>
<li><strong>Vite</strong>ï¼šç”¨äºå¼€å‘å’Œæ‰“åŒ…çš„ç°ä»£æ„å»ºå·¥å…·</li>
<li><strong>Sass</strong>ï¼šä¸»é¢˜çš„ CSS é¢„å¤„ç†</li>
</ul>
<h3 data-id="heading-8">é«˜çº§åŠŸèƒ½æ”¯æŒ</h3>
<ul>
<li><strong>Yjs</strong>ï¼šå®æ—¶åä½œç¼–è¾‘æ¡†æ¶</li>
<li><strong>MongoDB</strong>ï¼šåä½œçš„æ–‡æ¡£æŒä¹…åŒ–</li>
<li><strong>WebSocket</strong>ï¼šå®æ—¶é€šä¿¡</li>
<li><strong>Emoji Mart</strong>ï¼šè¡¨æƒ…ç¬¦å·é€‰æ‹©å’Œæ’å…¥</li>
<li><strong>Highlight.js</strong>ï¼šä»£ç è¯­æ³•é«˜äº®</li>
<li><strong>MathLive</strong>ï¼šLaTeX æ•°å­¦å…¬å¼æ”¯æŒ</li>
</ul>
<h2 data-id="heading-9">å¿«é€Ÿå¼€å§‹</h2>
<p>ä½“éªŒ TinyEditor æœ€å¿«çš„æ–¹å¼æ˜¯é€šè¿‡å¼€å‘ç¯å¢ƒï¼š</p>
<ol>
<li>å…‹éš†å’Œå®‰è£…ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> git@github.com:opentiny/tiny-editor.git
<span class="hljs-built_in">cd</span> tiny-editor
pnpm i
</code></pre>
<ol start="2">
<li>å¯åŠ¨å¼€å‘ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">pnpm dev
</code></pre>
<ol start="3">
<li>æŸ¥çœ‹ç¤ºä¾‹ï¼šè®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A5173%2Ftiny-editor%2F" target="_blank" title="http://localhost:5173/tiny-editor/" ref="nofollow noopener noreferrer">http://localhost:5173/tiny-editor/</a></li>
</ol>
<p>ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼Œè¯·å®‰è£…åŒ…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm i @opentiny/fluent-editor
</code></pre>
<h2 data-id="heading-10">é¡¹ç›®ç»“æ„æ·±å…¥è§£æ</h2>
<h3 data-id="heading-11">æºç ç»„ç»‡</h3>
<p>ä¸»ç¼–è¾‘å™¨æºç ç»“æ„å¦‚ä¸‹ï¼š</p>
<ul>
<li><code>src/core/</code>ï¼šæ‰©å±• Quill çš„æ ¸å¿ƒ FluentEditor ç±»</li>
<li><code>src/modules/</code>ï¼šæ‰€æœ‰åŠŸèƒ½æ¨¡å—ï¼ˆå·¥å…·æ ã€å‰ªè´´æ¿ã€AI ç­‰ï¼‰</li>
<li><code>src/formats/</code>ï¼šè‡ªå®šä¹‰å†…å®¹æ ¼å¼å’Œ blot</li>
<li><code>src/attributors/</code>ï¼šæ ·å¼å’Œå±æ€§å®šä¹‰</li>
<li><code>src/themes/</code>ï¼šè§†è§‰ä¸»é¢˜å®ç°</li>
<li><code>src/config/</code>ï¼šé…ç½®ç±»å‹å’Œå›½é™…åŒ–</li>
</ul>
<h3 data-id="heading-12">æ¨¡å—æ³¨å†Œç³»ç»Ÿ</h3>
<p>TinyEditor ä½¿ç”¨å¤æ‚çš„æ¨¡å—æ³¨å†Œç³»ç»Ÿï¼Œæ”¯æŒè½»æ¾æ‰©å±•å’Œå®šåˆ¶ã€‚æ‰€æœ‰æ¨¡å—åœ¨ä¸»å…¥å£ç‚¹æ³¨å†Œï¼Œå…·æœ‰è¦†ç›–èƒ½åŠ›ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿè‡ªå®šä¹‰æˆ–æ›¿æ¢ä»»ä½•ç»„ä»¶ã€‚</p>
<p>æ¨¡å—åŒ–è®¾è®¡å’Œå…¨é¢çš„åŠŸèƒ½é›†ä½¿ TinyEditor é€‚ç”¨äºä»ç®€å•å†…å®¹ç¼–è¾‘åˆ°å¤æ‚åä½œåº”ç”¨çš„å„ç§åœºæ™¯ã€‚é¡¹ç›®å¯¹ Quill å…¼å®¹æ€§çš„æ‰¿è¯ºç¡®ä¿ä½ å¯ä»¥åˆ©ç”¨æ•´ä¸ª Quill ç”Ÿæ€ç³»ç»Ÿï¼ŒåŒæ—¶äº«å— TinyEditor çš„å¢å¼ºåŠŸèƒ½ã€‚</p>
<p>åç»­å°†å…¨é¢ä»‹ç» TinyEditor å¦‚ä½•ä½¿ç”¨ã€è®¾è®¡æ¶æ„ã€å®ç°åŸç†ã€äºŒæ¬¡å¼€å‘ç­‰å†…å®¹ï¼Œç‚¹ä¸ªå…³æ³¨ï¼Œä¸è¿·è·¯ã€‚</p>
<h2 data-id="heading-13">è”ç³»æˆ‘ä»¬</h2>
<p>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-editor" target="_blank" title="https://github.com/opentiny/tiny-editor" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a>ï¼ˆæ¬¢è¿ Star â­ï¼‰</p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.github.io%2Ftiny-editor" target="_blank" title="https://opentiny.github.io/tiny-editor" ref="nofollow noopener noreferrer">opentiny.github.io/tiny-editor</a></p>
<p>ä¸ªäººåšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkagol.github.io%2Fblogs%2F" target="_blank" title="https://kagol.github.io/blogs/" ref="nofollow noopener noreferrer">kagol.github.io/blogs/</a></p>
<p>å°åŠ©æ‰‹å¾®ä¿¡ï¼šopentiny-official</p>
<p>å…¬ä¼—å·ï¼šOpenTiny</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€èŠ‚ç‚¹ã€‘[Channel-FlipèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7593541290991124530</link>    <guid>https://juejin.cn/post/7593541290991124530</guid>    <pubDate>2026-01-10T05:17:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593541290991124530" data-draft-id="7593541290991108146" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€èŠ‚ç‚¹ã€‘[Channel-FlipèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,å›¾å½¢å­¦,Unity3D"/> <meta itemprop="datePublished" content="2026-01-10T05:17:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€èŠ‚ç‚¹ã€‘[Channel-FlipèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T05:17:22.000Z" title="Sat Jan 10 2026 05:17:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<p>åœ¨Unityé€šç”¨æ¸²æŸ“ç®¡çº¿ï¼ˆURPï¼‰ä¸­ï¼ŒShader Graphä½œä¸ºä¸€ç§ç›´è§‚çš„å¯è§†åŒ–ç€è‰²å™¨ç¼–è¾‘å·¥å…·ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¾¿æ·çš„ç€è‰²å™¨æ„å»ºæ–¹å¼ã€‚FlipèŠ‚ç‚¹ä½œä¸ºShader Graphä¸­çš„ä¸€ä¸ªåŸºç¡€ä½†åŠŸèƒ½å¼ºå¤§çš„ç»„ä»¶ï¼Œåœ¨å›¾å½¢æ•ˆæœå¼€å‘ä¸­å…·æœ‰é‡è¦ä½œç”¨ã€‚æœ¬æ–‡å°†ä»æŠ€æœ¯åŸç†ã€åº”ç”¨åœºæ™¯åŠå®æˆ˜æŠ€å·§ç­‰å¤šä¸ªç»´åº¦ï¼Œç³»ç»Ÿè§£æFlipèŠ‚ç‚¹çš„ä½¿ç”¨æ–¹æ³•ä¸æœ€ä½³å®è·µã€‚</p>
<h2 data-id="heading-0">æ ¸å¿ƒåŠŸèƒ½è§£æ</h2>
<h3 data-id="heading-1">æ•°å­¦åŸç†</h3>
<p>FlipèŠ‚ç‚¹çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯å¯¹è¾“å…¥å€¼çš„å„ä¸ªé€šé“è¿›è¡Œç¬¦å·ç¿»è½¬ï¼Œå…¶æ•°å­¦è¡¨è¾¾å¼å¦‚ä¸‹ï¼š</p>
<p>Out = (Flip Ã— -2 + 1) Ã— In</p>
<p>å½“Flipå‚æ•°ä¸º1ï¼ˆTrueï¼‰æ—¶ï¼Œç³»æ•°å˜ä¸º-1ï¼Œå®ç°æ•°å€¼ç¿»è½¬ï¼›å½“å‚æ•°ä¸º0ï¼ˆFalseï¼‰æ—¶ï¼Œç³»æ•°ä¿æŒä¸º1ï¼Œæ•°å€¼ä¿æŒä¸å˜ã€‚è¿™ç§çº¿æ€§å˜æ¢æ–¹å¼æ¯”ä¼ ç»Ÿçš„æ¡ä»¶åˆ¤æ–­æ›´ä¸ºé«˜æ•ˆï¼Œå°¤å…¶é€‚ç”¨äºGPUçš„å¹¶è¡Œè®¡ç®—ç¯å¢ƒã€‚</p>
<h3 data-id="heading-2">é€šé“é€‰æ‹©æœºåˆ¶</h3>
<p>FlipèŠ‚ç‚¹æä¾›å››ä¸ªç‹¬ç«‹çš„é€šé“æ§åˆ¶å¼€å…³ï¼š</p>
<ul>
<li>Redï¼šæ§åˆ¶çº¢è‰²é€šé“çš„ç¿»è½¬</li>
<li>Greenï¼šæ§åˆ¶ç»¿è‰²é€šé“çš„ç¿»è½¬</li>
<li>Blueï¼šæ§åˆ¶è“è‰²é€šé“çš„ç¿»è½¬</li>
<li>Alphaï¼šæ§åˆ¶é€æ˜é€šé“çš„ç¿»è½¬</li>
</ul>
<p>æ¯ä¸ªå¼€å…³å‡å…·å¤‡æ™ºèƒ½ç¦ç”¨æœºåˆ¶ï¼š</p>
<ul>
<li>å½“è¾“å…¥ä¸ºFloatç±»å‹æ—¶ï¼ŒGreenã€Blueå’ŒAlphaé€šé“è‡ªåŠ¨ç¦ç”¨</li>
<li>å½“è¾“å…¥ä¸ºVector2ç±»å‹æ—¶ï¼ŒBlueå’ŒAlphaé€šé“è‡ªåŠ¨ç¦ç”¨</li>
<li>å½“è¾“å…¥ä¸ºVector3ç±»å‹æ—¶ï¼ŒAlphaé€šé“è‡ªåŠ¨ç¦ç”¨</li>
</ul>
<p>è¯¥è®¾è®¡æ—¢ä¿è¯äº†èŠ‚ç‚¹çš„çµæ´»æ€§ï¼Œä¹Ÿæœ‰æ•ˆé¿å…äº†ç”¨æˆ·è¯¯æ“ä½œã€‚</p>
<h2 data-id="heading-3">ç«¯å£ç‰¹æ€§è¯¦è§£</h2>
<h3 data-id="heading-4">è¾“å…¥ç«¯å£ï¼ˆInï¼‰</h3>
<ul>
<li>ç±»å‹ï¼šåŠ¨æ€çŸ¢é‡</li>
<li>åŠŸèƒ½ï¼šæ¥å—ä»æµ®ç‚¹æ•°åˆ°å››ç»´å‘é‡çš„å„ç±»è¾“å…¥</li>
<li>ç‰¹ç‚¹ï¼šè‡ªåŠ¨é€‚é…è¾“å…¥ç»´åº¦ï¼Œä¸ºé€šé“æ§åˆ¶æä¾›åŸºç¡€æ•°æ®æ”¯æŒ</li>
</ul>
<h3 data-id="heading-5">è¾“å‡ºç«¯å£ï¼ˆOutï¼‰</h3>
<ul>
<li>ç±»å‹ï¼šåŠ¨æ€çŸ¢é‡</li>
<li>åŠŸèƒ½ï¼šè¾“å‡ºç»è¿‡ç¿»è½¬å¤„ç†åçš„ç»“æœ</li>
<li>ç‰¹ç‚¹ï¼šä¿æŒä¸è¾“å…¥ç›¸åŒçš„ç»´åº¦ï¼Œç¡®ä¿æ•°æ®æµè¿ç»­æ€§ä¸ä¸€è‡´æ€§</li>
</ul>
<h3 data-id="heading-6">ç«¯å£è¿æ¥å»ºè®®</h3>
<ul>
<li>é¢œè‰²å¤„ç†ï¼šå°†ColorèŠ‚ç‚¹è¿æ¥è‡³Inç«¯å£ï¼ŒOutç«¯å£è¿æ¥è‡³æè´¨çš„BaseColor</li>
<li>æ³•çº¿å¤„ç†ï¼šå°†NormalèŠ‚ç‚¹è¿æ¥è‡³Inç«¯å£ï¼ŒOutç«¯å£è¿æ¥è‡³æè´¨çš„Normal</li>
<li>ç‰¹æ•ˆå¤„ç†ï¼šå°†PositionèŠ‚ç‚¹è¿æ¥è‡³Inç«¯å£ï¼ŒOutç«¯å£è¿æ¥è‡³è‡ªå®šä¹‰æ•ˆæœèŠ‚ç‚¹</li>
</ul>
<h2 data-id="heading-7">æ§ä»¶é…ç½®æŒ‡å—</h2>
<h3 data-id="heading-8">é€šé“æ§åˆ¶é€‰é¡¹</h3>



































<table><thead><tr><th>é€šé“</th><th>ç±»å‹</th><th>åŠŸèƒ½</th><th>å…¸å‹åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>Red</td><td>å¼€å…³</td><td>æ§åˆ¶çº¢è‰²é€šé“ç¿»è½¬</td><td>åˆ›å»ºçº¢è‰²è­¦å‘Šæ•ˆæœ</td></tr><tr><td>Green</td><td>å¼€å…³</td><td>æ§åˆ¶ç»¿è‰²é€šé“ç¿»è½¬</td><td>ç¯å¢ƒè‰²é€‚åº”è°ƒæ•´</td></tr><tr><td>Blue</td><td>å¼€å…³</td><td>æ§åˆ¶è“è‰²é€šé“ç¿»è½¬</td><td>å†·è‰²è°ƒæ•ˆæœåˆ›å»º</td></tr><tr><td>Alpha</td><td>å¼€å…³</td><td>æ§åˆ¶é€æ˜é€šé“ç¿»è½¬</td><td>æ˜¾ç¤º/éšè—åˆ‡æ¢</td></tr></tbody></table>
<h3 data-id="heading-9">é…ç½®ç­–ç•¥</h3>
<ul>
<li>åŸºç¡€é¢œè‰²ç¿»è½¬ï¼šåŒæ—¶å¯ç”¨Redã€Greenå’ŒBlueå¼€å…³</li>
<li>å•é€šé“è°ƒæ•´ï¼šä»…å¯ç”¨ç›®æ ‡é€šé“å¼€å…³</li>
<li>åŠ¨æ€æ§åˆ¶ï¼šå°†å¼€å…³è¿æ¥è‡³TimeèŠ‚ç‚¹ï¼Œå®ç°åŠ¨ç”»æ•ˆæœ</li>
</ul>
<h2 data-id="heading-10">å…¸å‹åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-11">è§†è§‰æ•ˆæœå¢å¼º</h3>
<ul>
<li>é¢œè‰²åè½¬ç‰¹æ•ˆï¼šåœ¨è§’è‰²å—ä¼¤æ—¶å¿«é€Ÿåˆ›å»ºé—ªç™½æ•ˆæœ
<ul>
<li>é…ç½®ï¼šRed/Green/Blue = Trueï¼ŒAlpha = False</li>
<li>è¿æ¥ï¼šColor â†’ Flip â†’ Material</li>
</ul>
</li>
<li>æ³•çº¿ç¿»è½¬ï¼šå¤„ç†åŒå‘è¡¨é¢å…‰ç…§
<ul>
<li>é…ç½®ï¼šRed/Green = Falseï¼ŒBlue = Trueï¼ŒAlpha = False</li>
<li>è¿æ¥ï¼šNormal â†’ Flip â†’ Material</li>
</ul>
</li>
</ul>
<h3 data-id="heading-12">åŠŸèƒ½å®ç°</h3>
<ul>
<li>æ˜¾ç¤º/éšè—åˆ‡æ¢ï¼šé€šè¿‡ç¿»è½¬Alphaé€šé“å®ç°
<ul>
<li>é…ç½®ï¼šRed/Green/Blue = Falseï¼ŒAlpha = True</li>
<li>è¿æ¥ï¼šColor â†’ Flip â†’ Material</li>
</ul>
</li>
<li>åŠ¨æ€æ•ˆæœåˆ›å»ºï¼šç»“åˆTimeèŠ‚ç‚¹åˆ›å»ºå‘¨æœŸæ€§ç¿»è½¬
<ul>
<li>é…ç½®ï¼šè¿æ¥TimeèŠ‚ç‚¹åˆ°Flipå¼€å…³</li>
<li>æ•ˆæœï¼šå®ç°é¢œè‰²è„‰å†²æ•ˆæœ</li>
</ul>
</li>
</ul>
<h2 data-id="heading-13">é«˜çº§åº”ç”¨æŠ€å·§</h2>
<h3 data-id="heading-14">åŠ¨æ€æ§åˆ¶æ–¹æ¡ˆ</h3>
<ul>
<li>
<p>åŸºäºæ—¶é—´çš„ç¿»è½¬ï¼š</p>
<p><code>// ä¼ªä»£ç ç¤ºä¾‹ float time = Time.time;</code></p>
<p><code>// è·å–å½“å‰æ—¶é—´ Flip.Red = sin(time * 2) &gt; 0;</code></p>
<p><code>// æ ¹æ®æ­£å¼¦æ³¢æ§åˆ¶çº¢è‰²é€šé“</code></p>
</li>
<li>
<p>åŸºäºç”¨æˆ·è¾“å…¥çš„ç¿»è½¬ï¼š</p>
<p><code>// ä¼ªä»£ç ç¤ºä¾‹ Flip.Green = Input.GetKey(KeyCode.G); // æŒ‰ä¸‹Gé”®æ—¶ç¿»è½¬ç»¿è‰²é€šé“</code></p>
</li>
</ul>
<h3 data-id="heading-15">å¤šå±‚ç¿»è½¬æ•ˆæœ</h3>
<p>é€šè¿‡ä¸²è”å¤šä¸ªFlipèŠ‚ç‚¹å¯åˆ›å»ºå¤æ‚æ•ˆæœï¼š</p>
<ul>
<li>ç¬¬ä¸€å±‚ï¼šåŸºç¡€é¢œè‰²ç¿»è½¬ï¼ˆRed/Green/Blue = Trueï¼‰</li>
<li>ç¬¬äºŒå±‚ï¼šç‰¹å®šé€šé“å¾®è°ƒï¼ˆä»…Blue = Trueï¼‰</li>
<li>ç¬¬ä¸‰å±‚ï¼šæœ€ç»ˆè¾“å‡ºè°ƒæ•´ï¼ˆAlpha = Trueï¼‰</li>
</ul>
<h3 data-id="heading-16">æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h3>
<ul>
<li>é¿å…è¿‡åº¦ä½¿ç”¨ï¼šåœ¨æ¯å¸§æ›´æ–°çš„è®¡ç®—ä¸­åº”è°¨æ…ä½¿ç”¨</li>
<li>é™æ€ç¿»è½¬ä¼˜å…ˆï¼šå¯¹ä¸å˜çš„æ•ˆæœä½¿ç”¨é™æ€é…ç½®</li>
<li>æè´¨å®ä¾‹åŒ–ï¼šå¯¹é¢‘ç¹ä½¿ç”¨çš„ç¿»è½¬æ•ˆæœåˆ›å»ºæè´¨å®ä¾‹</li>
</ul>
<h2 data-id="heading-17">å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-18">é€šé“ä¸åŒ¹é…é—®é¢˜</h3>
<p><strong>ç°è±¡</strong>ï¼šå½“è¾“å…¥å‘é‡ç»´åº¦ä¸æ§ä»¶é…ç½®ä¸åŒ¹é…æ—¶ï¼ŒèŠ‚ç‚¹å¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œ</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨SwizzleèŠ‚ç‚¹è°ƒæ•´é€šé“é¡ºåº</li>
<li>ä½¿ç”¨SplitèŠ‚ç‚¹åˆ†ç¦»å‘é‡åˆ†é‡</li>
<li>ä½¿ç”¨CombineèŠ‚ç‚¹é‡æ–°ç»„åˆé€šé“</li>
</ul>
<h3 data-id="heading-19">æ€§èƒ½ç“¶é¢ˆè¯†åˆ«</h3>
<p><strong>æ£€æµ‹æ–¹æ³•</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨Unity Profileråˆ†æç€è‰²å™¨æ€§èƒ½</li>
<li>æ£€æŸ¥FlipèŠ‚ç‚¹åœ¨æ¸²æŸ“é˜Ÿåˆ—ä¸­çš„ä½ç½®</li>
<li>æµ‹è¯•ä¸åŒé…ç½®ä¸‹çš„å¸§ç‡å˜åŒ–</li>
</ul>
<p><strong>ä¼˜åŒ–å»ºè®®</strong>ï¼š</p>
<ul>
<li>ç®€åŒ–å¤æ‚çš„ç¿»è½¬ç»„åˆ</li>
<li>ä½¿ç”¨LODï¼ˆLevel of Detailï¼‰æŠ€æœ¯</li>
<li>é¿å…åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šè¿‡åº¦ä½¿ç”¨åŠ¨æ€ç¿»è½¬</li>
</ul>
<h2 data-id="heading-20">æœ€ä½³å®è·µæŒ‡å—</h2>
<h3 data-id="heading-21">é¡¹ç›®ç»„ç»‡å»ºè®®</h3>
<ul>
<li>
<p>å‘½åè§„èŒƒï¼š</p>
<ul>
<li>åŸºç¡€ç¿»è½¬ï¼šFlip_BaseColor</li>
<li>ç‰¹æ•ˆç¿»è½¬ï¼šFlip_Effect_Glow</li>
<li>åŠŸèƒ½ç¿»è½¬ï¼šFlip_HUD_Alpha</li>
</ul>
</li>
<li>
<p>æ³¨é‡Šæ ‡å‡†ï¼š</p>
<p><code>// ç¿»è½¬èŠ‚ç‚¹é…ç½®è¯´æ˜</code></p>
<p><code>// åŠŸèƒ½ï¼šåˆ›å»ºè§’è‰²å—ä¼¤æ—¶çš„é—ªç™½æ•ˆæœ</code></p>
<p><code>// é€šé“ï¼šRGBå…¨ç¿»è½¬ï¼ŒAlphaä¿æŒ</code></p>
<p><code>// è¿æ¥ï¼šColor â†’ Flip â†’ Material</code></p>
</li>
<li>
<p>é¢„è®¾ç®¡ç†ï¼š</p>
<ul>
<li>åˆ›å»ºå¸¸ç”¨ç¿»è½¬é¢„è®¾</li>
<li>å»ºç«‹é…ç½®æ–‡æ¡£</li>
<li>å®šæœŸå®¡æŸ¥æ•ˆæœ</li>
</ul>
</li>
</ul>
<h3 data-id="heading-22">æµ‹è¯•éªŒè¯æ–¹æ³•</h3>
<ul>
<li>å•å…ƒæµ‹è¯•ï¼š
<ul>
<li>æµ‹è¯•æ‰€æœ‰é€šé“ç»„åˆ</li>
<li>éªŒè¯è¾¹ç•Œæ¡ä»¶å¤„ç†</li>
</ul>
</li>
<li>é›†æˆæµ‹è¯•ï¼š
<ul>
<li>åœ¨ä¸åŒå…‰ç…§æ¡ä»¶ä¸‹æµ‹è¯•</li>
<li>åœ¨å¤šç§æè´¨ä¸ŠéªŒè¯æ•ˆæœ</li>
</ul>
</li>
<li>æ€§èƒ½æµ‹è¯•ï¼š
<ul>
<li>åŸºå‡†æµ‹è¯•ä¸åŒé…ç½®çš„æ€§èƒ½</li>
<li>åˆ†æå†…å­˜ä½¿ç”¨æƒ…å†µ</li>
</ul>
</li>
</ul>
<h2 data-id="heading-23">æœªæ¥å‘å±•è¶‹åŠ¿</h2>
<p>éšç€URPçš„æŒç»­æ¼”è¿›ï¼ŒFlipèŠ‚ç‚¹ä¹Ÿåœ¨ä¸æ–­å‘å±•ï¼š</p>
<ul>
<li>æ›´å¤šç»´åº¦æ”¯æŒï¼šå¯èƒ½æ‰©å±•è‡³æ›´é«˜ç»´åº¦çš„å‘é‡å¤„ç†</li>
<li>æ›´ç²¾ç»†æ§åˆ¶ï¼šå¼•å…¥é€šé“å¼ºåº¦çš„è¿ç»­è°ƒèŠ‚</li>
<li>æ™ºèƒ½ä¼˜åŒ–ï¼šè‡ªåŠ¨è¯†åˆ«æœ€ä½³ç¿»è½¬é…ç½®</li>
<li>è·¨å¹³å°å¢å¼ºï¼šé’ˆå¯¹ç§»åŠ¨å¹³å°çš„è¿›ä¸€æ­¥ä¼˜åŒ–</li>
</ul>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®°å½•protocç”Ÿæˆä»£ç å°†optionalæ”¹æˆomiteptyé—®é¢˜]]></title>    <link>https://juejin.cn/post/7593234983755710474</link>    <guid>https://juejin.cn/post/7593234983755710474</guid>    <pubDate>2026-01-10T05:36:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593234983755710474" data-draft-id="7593251491935977518" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®°å½•protocç”Ÿæˆä»£ç å°†optionalæ”¹æˆomiteptyé—®é¢˜"/> <meta itemprop="keywords" content="åç«¯,protobuf,Go"/> <meta itemprop="datePublished" content="2026-01-10T05:36:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="nil"/> <meta itemprop="url" content="https://juejin.cn/user/2893570337422670"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®°å½•protocç”Ÿæˆä»£ç å°†optionalæ”¹æˆomiteptyé—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2893570337422670/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    nil
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T05:36:41.000Z" title="Sat Jan 10 2026 05:36:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜ç°çŠ¶</h2>
<p>åœ¨ä¿®æ”¹goé¡¹ç›®çš„protocæ–‡ä»¶ï¼Œç„¶åç”¨protocå‘½ä»¤ç”Ÿæˆgoä»£ç çš„æ—¶å€™ï¼Œä¼šé‡åˆ°å°†optionalä¿®æ”¹æˆomitemptyçš„æƒ…å†µ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5130477f3d94c87aade0643ff38b7c1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbmls:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768628201&amp;x-signature=%2BkhAuvFRJJVeqGbncQA5fG0gktk%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">é—®é¢˜äº§ç”Ÿçš„åŸå› </h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/215757bebcb7490d9c40fb6df57e2cca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbmls:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768628201&amp;x-signature=Wdwhu9nxWdTo0A2SmrbSMyGoe94%3D" alt="image.png" loading="lazy"/></p>
<p>æ˜¯å› ä¸ºæˆ‘çš„protocç‰ˆæœ¬æ˜¯v4.25.1ï¼Œè€Œä¹‹å‰çš„ç‰ˆæœ¬æ˜¯v4.22.1</p>
<h2 data-id="heading-2">äº§ç”Ÿçš„ç»“æœ</h2>
<p>è¿™æ ·ä¿®æ”¹ä¼šå¯¼è‡´æ¥å£ç»™å‰ç«¯è¿”å›çš„æ•°ç»„ç±»å‹å˜æˆäº†nullï¼Œè€Œä¸æ˜¯ç©ºæ•°ç»„ã€‚å¦‚æœå‰ç«¯ä»£ç ä¸ä¸¥è°¨çš„è¯ï¼Œå°±å¯¼è‡´æŠ¥é”™äº†ã€‚</p>
<h2 data-id="heading-3">è§£å†³è¿‡ç¨‹</h2>
<p>å…ˆæ˜¯è¯¢é—®å¤§æ¨¡å‹ï¼Œæä¾›äº†å¾ˆå¤šæ–¹æ³•ï¼Œä½†éƒ½è¡Œä¸é€šã€‚ä¸‹é¢ä»‹ç»ä¸€ä¸‹è¡Œä¸é€šçš„æ–¹æ¡ˆã€‚</p>
<ul>
<li>é‡æ–°å®‰è£…protoc v4.22.1ç‰ˆæœ¬ã€‚ä½†æ˜¯çš„ç½‘ä¸Šæ‰¾äº†å¾ˆå¤šèµ„æ–™ï¼Œå‘ç°åªèƒ½ä¸‹è½½æºä»£ç ï¼Œéœ€è¦è‡ªå·±ç¼–è¯‘ã€‚ä¸èƒ½ç›´æ¥ä¸‹è½½å¯æ‰§è¡Œæ–‡ä»¶ã€‚</li>
<li>ç”¨dockerï¼Œåœ¨dockerä¸­å®‰è£…protoc v4.22.1 ç”Ÿæˆä»£ç </li>
<li>å…¶ä»–</li>
</ul>
<p>æœ€ç»ˆï¼Œé‡‡ç”¨æœ€ç®€å•çš„æ–¹å¼ï¼Œå³å°†ä¿®æ”¹çš„omitemptyæ”¹å›optional</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. å¤‡ä»½æ–‡ä»¶</span>
<span class="hljs-built_in">cp</span> pb/code_review.api.v1.pb.go pb/code_review.api.v1.pb.go.bak

<span class="hljs-comment"># 2. ä½¿ç”¨ç®€å•çš„ sed å‘½ä»¤</span>
sed -i.bak <span class="hljs-string">'s/omitempty/optional/g'</span> pb/code_review.api.v1.pb.go

<span class="hljs-comment"># 3. éªŒè¯</span>
grep <span class="hljs-string">"optional"</span> pb/code_review.api.v1.pb.go | <span class="hljs-built_in">head</span> -3
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•æœ€ç»ˆç”Ÿæ•ˆäº†ï¼ï¼ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[react nativeé¡¹ç›®ä¸­ä½¿ç”¨React Hook é«˜çº§æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7593251491935993902</link>    <guid>https://juejin.cn/post/7593251491935993902</guid>    <pubDate>2026-01-10T05:32:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593251491935993902" data-draft-id="7593212374921494555" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="react nativeé¡¹ç›®ä¸­ä½¿ç”¨React Hook é«˜çº§æ¨¡å¼"/> <meta itemprop="keywords" content="React Native"/> <meta itemprop="datePublished" content="2026-01-10T05:32:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨ç‹‚ä¹‹é€¸æ‰"/> <meta itemprop="url" content="https://juejin.cn/user/624178332441166"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            react nativeé¡¹ç›®ä¸­ä½¿ç”¨React Hook é«˜çº§æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/624178332441166/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨ç‹‚ä¹‹é€¸æ‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T05:32:20.000Z" title="Sat Jan 10 2026 05:32:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React Hook é«˜çº§æ¨¡å¼ï¼šä»è§¦å‘å™¨æ¨¡å¼åˆ°å®æˆ˜åº”ç”¨</h2>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>åœ¨ React å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼šçˆ¶ç»„ä»¶éœ€è¦æ§åˆ¶å­ç»„ä»¶é‡æ–°åŠ è½½æ•°æ®ï¼Œä½†åˆä¸æƒ³é‡æ–°æŒ‚è½½æ•´ä¸ªç»„ä»¶ã€‚æœ¬æ–‡å°†ä»‹ç»ä¸€ç§ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆâ€”â€”<strong>è§¦å‘å™¨æ¨¡å¼ï¼ˆTrigger Patternï¼‰</strong>ï¼Œä»¥åŠå…¶ä»– 9 ç§å®ç”¨çš„ Hook æ¨¡å¼ã€‚</p>
<h3 data-id="heading-2">é—®é¢˜åœºæ™¯</h3>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå›¾ç‰‡ä¸Šä¼ ç»„ä»¶ <code>FileUpload</code>ï¼Œåœ¨ç¼–è¾‘é¡µé¢ä¿®æ”¹å›¾ç‰‡åè¿”å›åˆ—è¡¨é¡µï¼Œéœ€è¦åˆ·æ–°å›¾ç‰‡æ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ—è¡¨é¡µ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">RecordsList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">refresh</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">fetchData</span>(); <span class="hljs-comment">// åˆ·æ–°åˆ—è¡¨æ•°æ®</span>
    <span class="hljs-comment">// é—®é¢˜ï¼šå¦‚ä½•è®© FileUpload ç»„ä»¶ä¹Ÿåˆ·æ–°ï¼Ÿ</span>
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {data.map(item =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">FileUpload</span> <span class="hljs-attr">id</span>=<span class="hljs-string">{item.id}</span> /&gt;</span> // éœ€è¦åˆ·æ–°å›¾ç‰‡
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-3">å¸¸è§çš„é”™è¯¯æ–¹æ¡ˆ</h4>
<h5 data-id="heading-4">âŒ æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ key å¼ºåˆ¶é‡æ–°æŒ‚è½½</h5>
<pre><code class="hljs language-javascript" lang="javascript">&lt;<span class="hljs-title class_">FileUpload</span> key={<span class="hljs-string">`<span class="hljs-subst">${item.id}</span>-<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>`</span>} id={item.<span class="hljs-property">id</span>} /&gt;
</code></pre>
<p><strong>é—®é¢˜ï¼š</strong></p>
<ul>
<li>ç»„ä»¶å®Œå…¨é”€æ¯é‡å»ºï¼Œä¸¢å¤±æ‰€æœ‰å†…éƒ¨çŠ¶æ€</li>
<li>æ€§èƒ½å·®ï¼Œä¼šè§¦å‘å®Œæ•´çš„æŒ‚è½½/å¸è½½ç”Ÿå‘½å‘¨æœŸ</li>
<li>å¯èƒ½å¯¼è‡´é—ªçƒæˆ–åŠ¨ç”»ä¸­æ–­</li>
</ul>
<h5 data-id="heading-5">âŒ æ–¹æ¡ˆ 2ï¼šé€šè¿‡ ref è°ƒç”¨å­ç»„ä»¶æ–¹æ³•</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fileUploadRef = <span class="hljs-title function_">useRef</span>();

<span class="hljs-keyword">const</span> <span class="hljs-title function_">refresh</span> = (<span class="hljs-params"/>) =&gt; {
  fileUploadRef.<span class="hljs-property">current</span>.<span class="hljs-title function_">refresh</span>(); <span class="hljs-comment">// å‘½ä»¤å¼è°ƒç”¨</span>
};

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">FileUpload</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{fileUploadRef}</span> <span class="hljs-attr">id</span>=<span class="hljs-string">{item.id}</span> /&gt;</span></span>
</code></pre>
<p><strong>é—®é¢˜ï¼š</strong></p>
<ul>
<li>æ‰“ç ´äº† React çš„å•å‘æ•°æ®æµ</li>
<li>ä¸ç¬¦åˆå£°æ˜å¼ç¼–ç¨‹ç†å¿µ</li>
<li>éš¾ä»¥è¿½è¸ªæ•°æ®æµå‘</li>
</ul>
<h5 data-id="heading-6">âŒ æ–¹æ¡ˆ 3ï¼šä½¿ç”¨å¸ƒå°”å€¼åˆ‡æ¢</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> [shouldRefresh, setShouldRefresh] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">refresh</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">setShouldRefresh</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setShouldRefresh</span>(<span class="hljs-literal">false</span>), <span class="hljs-number">0</span>);
};

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">FileUpload</span> <span class="hljs-attr">shouldRefresh</span>=<span class="hljs-string">{shouldRefresh}</span> /&gt;</span></span>
</code></pre>
<p><strong>é—®é¢˜ï¼š</strong></p>
<ul>
<li>éœ€è¦å¤æ‚çš„çŠ¶æ€é‡ç½®é€»è¾‘</li>
<li>è¿ç»­åˆ·æ–°å¯èƒ½å¤±æ•ˆï¼ˆå€¼æ²¡æœ‰å˜åŒ–ï¼‰</li>
<li>ä»£ç ä¸å¤Ÿä¼˜é›…</li>
</ul>
<hr/>
<h3 data-id="heading-7">âœ… æœ€ä½³æ–¹æ¡ˆï¼šè§¦å‘å™¨æ¨¡å¼</h3>
<h4 data-id="heading-8">æ ¸å¿ƒæ€æƒ³</h4>
<blockquote>
<p><strong>ç”¨ä¸€ä¸ªç®€å•çš„æ•°å€¼å˜åŒ–æ¥è§¦å‘å¤æ‚çš„å‰¯ä½œç”¨</strong></p>
</blockquote>
<h4 data-id="heading-9">å®ç°æ­¥éª¤</h4>
<h5 data-id="heading-10">1. åˆ›å»º Hook</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/hooks/useRefreshTrigger.js</span>
<span class="hljs-keyword">import</span> { useState, useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useRefreshTrigger</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> [trigger, setTrigger] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  
  <span class="hljs-keyword">const</span> fire = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setTrigger</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + <span class="hljs-number">1</span>);
  }, []);
  
  <span class="hljs-keyword">return</span> [trigger, fire];
};
</code></pre>
<h5 data-id="heading-11">2. åœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ—è¡¨é¡µ</span>
<span class="hljs-keyword">import</span> { useRefreshTrigger } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/useRefreshTrigger'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">RecordsList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [refreshTrigger, triggerRefresh] = <span class="hljs-title function_">useRefreshTrigger</span>();
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">refresh</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">fetchData</span>();
    <span class="hljs-title function_">triggerRefresh</span>(); <span class="hljs-comment">// è§¦å‘åˆ·æ–°</span>
  };
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {data.map(item =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">FileUpload</span> 
          <span class="hljs-attr">id</span>=<span class="hljs-string">{item.id}</span> 
          <span class="hljs-attr">refreshTrigger</span>=<span class="hljs-string">{refreshTrigger}</span> // <span class="hljs-attr">ä¼ é€’è§¦å‘å™¨</span>
        /&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h5 data-id="heading-12">3. åœ¨å­ç»„ä»¶ä¸­å“åº”</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// FileUpload ç»„ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">FileUpload</span>(<span class="hljs-params">{ id, refreshTrigger }</span>) {
  <span class="hljs-keyword">const</span> [pictures, setPictures] = <span class="hljs-title function_">useState</span>([]);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (id) {
      <span class="hljs-comment">// å½“ id æˆ– refreshTrigger å˜åŒ–æ—¶ï¼Œé‡æ–°åŠ è½½å›¾ç‰‡</span>
      <span class="hljs-title function_">fetchImages</span>(id).<span class="hljs-title function_">then</span>(setPictures);
    }
  }, [id, refreshTrigger]); <span class="hljs-comment">// â† å…³é”®ï¼šä¾èµ– refreshTrigger</span>
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {pictures.map(pic =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{pic.url}</span> /&gt;</span>)}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-13">å·¥ä½œåŸç†</h4>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·æ“ä½œ â†’ <span class="hljs-built_in">triggerRefresh</span>() â†’ trigger: <span class="hljs-number">0</span> â†’ <span class="hljs-number">1</span> â†’ <span class="hljs-number">2</span> â†’ ...
                                    â†“
                        useEffect æ£€æµ‹åˆ°ä¾èµ–å˜åŒ–
                                    â†“
                            é‡æ–°æ‰§è¡Œå‰¯ä½œç”¨
</code></pre>
<h4 data-id="heading-14">ä¼˜åŠ¿æ€»ç»“</h4>
<p>âœ… <strong>å£°æ˜å¼</strong> - ç¬¦åˆ React ç†å¿µï¼Œæ•°æ®æµæ¸…æ™°<br/>
âœ… <strong>è½»é‡çº§</strong> - åªè§¦å‘ effectï¼Œä¸é‡æ–°æŒ‚è½½ç»„ä»¶<br/>
âœ… <strong>å¯é¢„æµ‹</strong> - çˆ¶ç»„ä»¶æ§åˆ¶ï¼Œå­ç»„ä»¶å“åº”<br/>
âœ… <strong>å¯å¤ç”¨</strong> - Hook å¯åœ¨ä»»ä½•åœºæ™¯ä½¿ç”¨<br/>
âœ… <strong>æ€§èƒ½å¥½</strong> - ä¸ä¼šä¸¢å¤±ç»„ä»¶çŠ¶æ€</p>
<hr/>
<h3 data-id="heading-15">å…¶ä»– 9 ç§å®ç”¨ Hook æ¨¡å¼</h3>
<h4 data-id="heading-16">1. Toggle Pattern - å¼€å…³æ¨¡å¼</h4>
<p>ç®¡ç†å¸ƒå°”çŠ¶æ€çš„åˆ‡æ¢ï¼Œæ¯” <code>useState</code> æ›´æ–¹ä¾¿ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useToggle</span> = (<span class="hljs-params">initialValue = <span class="hljs-literal">false</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> [value, setValue] = <span class="hljs-title function_">useState</span>(initialValue);
  
  <span class="hljs-keyword">const</span> toggle = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setValue</span>(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> !v), []);
  <span class="hljs-keyword">const</span> setTrue = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setValue</span>(<span class="hljs-literal">true</span>), []);
  <span class="hljs-keyword">const</span> setFalse = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setValue</span>(<span class="hljs-literal">false</span>), []);
  
  <span class="hljs-keyword">return</span> [value, { toggle, setTrue, setFalse }];
};

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Modal</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [isOpen, { toggle, setTrue, setFalse }] = <span class="hljs-title function_">useToggle</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{setTrue}</span>&gt;</span>æ‰“å¼€<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Dialog</span> <span class="hljs-attr">visible</span>=<span class="hljs-string">{isOpen}</span> <span class="hljs-attr">onClose</span>=<span class="hljs-string">{setFalse}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> æ¨¡æ€æ¡†ã€æŠ˜å é¢æ¿ã€æ˜¾ç¤º/éšè—</p>
<hr/>
<h4 data-id="heading-17">2. Previous Value Pattern - è®°å½•ä¸Šä¸€æ¬¡çš„å€¼</h4>
<p>è·å–çŠ¶æ€çš„å‰ä¸€ä¸ªå€¼ï¼Œç”¨äºå¯¹æ¯”ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">usePrevious</span> = (<span class="hljs-params">value</span>) =&gt; {
  <span class="hljs-keyword">const</span> ref = <span class="hljs-title function_">useRef</span>();
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    ref.<span class="hljs-property">current</span> = value;
  }, [value]);
  
  <span class="hljs-keyword">return</span> ref.<span class="hljs-property">current</span>;
};

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> prevCount = <span class="hljs-title function_">usePrevious</span>(count);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰: {count}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä¸Šä¸€æ¬¡: {prevCount}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å˜åŒ–: {count - (prevCount || 0)}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> å¯¹æ¯”æ–°æ—§å€¼ã€æ’¤é”€æ“ä½œã€åŠ¨ç”»è¿‡æ¸¡</p>
<hr/>
<h4 data-id="heading-18">3. Debounce Pattern - é˜²æŠ–æ¨¡å¼</h4>
<p>å»¶è¿Ÿæ‰§è¡Œï¼Œé¿å…é¢‘ç¹è§¦å‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useDebounce</span> = (<span class="hljs-params">value, delay = <span class="hljs-number">500</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> [debouncedValue, setDebouncedValue] = <span class="hljs-title function_">useState</span>(value);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">setDebouncedValue</span>(value);
    }, delay);
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearTimeout</span>(timer);
  }, [value, delay]);
  
  <span class="hljs-keyword">return</span> debouncedValue;
};

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">SearchBox</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [searchTerm, setSearchTerm] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> debouncedSearchTerm = <span class="hljs-title function_">useDebounce</span>(searchTerm, <span class="hljs-number">500</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (debouncedSearchTerm) {
      <span class="hljs-title function_">searchAPI</span>(debouncedSearchTerm); <span class="hljs-comment">// åªåœ¨åœæ­¢è¾“å…¥ 500ms åæœç´¢</span>
    }
  }, [debouncedSearchTerm]);
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{searchTerm}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setSearchTerm(e.target.value)} /&gt;</span>;
}
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> æœç´¢è¾“å…¥ã€çª—å£ resizeã€æ»šåŠ¨äº‹ä»¶</p>
<hr/>
<h4 data-id="heading-19">4. Async State Pattern - å¼‚æ­¥çŠ¶æ€ç®¡ç†</h4>
<p>ç»Ÿä¸€ç®¡ç†å¼‚æ­¥è¯·æ±‚çš„åŠ è½½ã€æˆåŠŸã€å¤±è´¥çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useAsync</span> = (<span class="hljs-params">asyncFunction</span>) =&gt; {
  <span class="hljs-keyword">const</span> [state, setState] = <span class="hljs-title function_">useState</span>({
    <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">data</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span>,
  });
  
  <span class="hljs-keyword">const</span> execute = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> (...params) =&gt; {
    <span class="hljs-title function_">setState</span>({ <span class="hljs-attr">loading</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">data</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span> });
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">asyncFunction</span>(...params);
      <span class="hljs-title function_">setState</span>({ <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>, data, <span class="hljs-attr">error</span>: <span class="hljs-literal">null</span> });
      <span class="hljs-keyword">return</span> data;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-title function_">setState</span>({ <span class="hljs-attr">loading</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">data</span>: <span class="hljs-literal">null</span>, error });
      <span class="hljs-keyword">throw</span> error;
    }
  }, [asyncFunction]);
  
  <span class="hljs-keyword">return</span> { ...state, execute };
};

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">UserProfile</span>(<span class="hljs-params">{ userId }</span>) {
  <span class="hljs-keyword">const</span> { loading, data, error, execute } = <span class="hljs-title function_">useAsync</span>(fetchUserData);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">execute</span>(userId);
  }, [userId]);
  
  <span class="hljs-keyword">if</span> (loading) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  <span class="hljs-keyword">if</span> (error) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>é”™è¯¯: {error.message}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ç”¨æˆ·å: {data.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> API è°ƒç”¨ã€æ•°æ®åŠ è½½</p>
<hr/>
<h4 data-id="heading-20">5. Local Storage Pattern - æŒä¹…åŒ–çŠ¶æ€</h4>
<p>è‡ªåŠ¨åŒæ­¥çŠ¶æ€åˆ° localStorageï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useLocalStorage</span> = (<span class="hljs-params">key, initialValue</span>) =&gt; {
  <span class="hljs-keyword">const</span> [storedValue, setStoredValue] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> item = <span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span>.<span class="hljs-title function_">getItem</span>(key);
      <span class="hljs-keyword">return</span> item ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(item) : initialValue;
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">return</span> initialValue;
    }
  });
  
  <span class="hljs-keyword">const</span> setValue = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> valueToStore = value <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Function</span> ? <span class="hljs-title function_">value</span>(storedValue) : value;
      <span class="hljs-title function_">setStoredValue</span>(valueToStore);
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span>.<span class="hljs-title function_">setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(valueToStore));
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);
    }
  }, [key, storedValue]);
  
  <span class="hljs-keyword">return</span> [storedValue, setValue];
};

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ThemeSelector</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [theme, setTheme] = <span class="hljs-title function_">useLocalStorage</span>(<span class="hljs-string">'theme'</span>, <span class="hljs-string">'light'</span>);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setTheme(theme === 'light' ? 'dark' : 'light')}&gt;
      å½“å‰ä¸»é¢˜: {theme}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> ç”¨æˆ·åå¥½è®¾ç½®ã€è¡¨å•è‰ç¨¿ã€ä¸»é¢˜åˆ‡æ¢</p>
<hr/>
<h4 data-id="heading-21">6. Interval Pattern - å®šæ—¶å™¨æ¨¡å¼</h4>
<p>å®‰å…¨åœ°ä½¿ç”¨ setIntervalï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useInterval</span> = (<span class="hljs-params">callback, delay</span>) =&gt; {
  <span class="hljs-keyword">const</span> savedCallback = <span class="hljs-title function_">useRef</span>();
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    savedCallback.<span class="hljs-property">current</span> = callback;
  }, [callback]);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (delay !== <span class="hljs-literal">null</span>) {
      <span class="hljs-keyword">const</span> id = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> savedCallback.<span class="hljs-title function_">current</span>(), delay);
      <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(id);
    }
  }, [delay]);
};

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Countdown</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">60</span>);
  
  <span class="hljs-title function_">useInterval</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (count &gt; <span class="hljs-number">0</span>) <span class="hljs-title function_">setCount</span>(count - <span class="hljs-number">1</span>);
  }, <span class="hljs-number">1000</span>);
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å€’è®¡æ—¶: {count}ç§’<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> å€’è®¡æ—¶ã€è½®è¯¢ã€å®æ—¶æ›´æ–°</p>
<hr/>
<h4 data-id="heading-22">7. Mount Status Pattern - ç»„ä»¶æŒ‚è½½çŠ¶æ€</h4>
<p>é¿å…åœ¨ç»„ä»¶å¸è½½åæ›´æ–°çŠ¶æ€ï¼ˆé˜²æ­¢å†…å­˜æ³„æ¼ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useIsMounted</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> isMounted = <span class="hljs-title function_">useRef</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    isMounted.<span class="hljs-property">current</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      isMounted.<span class="hljs-property">current</span> = <span class="hljs-literal">false</span>;
    };
  }, []);
  
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> isMounted.<span class="hljs-property">current</span>, []);
};

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">SafeAsyncComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [data, setData] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> isMounted = <span class="hljs-title function_">useIsMounted</span>();
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">fetchData</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isMounted</span>()) { <span class="hljs-comment">// åªåœ¨ç»„ä»¶è¿˜æŒ‚è½½æ—¶æ‰æ›´æ–°</span>
        <span class="hljs-title function_">setData</span>(result);
      }
    });
  }, []);
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{data}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> å¼‚æ­¥æ“ä½œã€å»¶è¿Ÿæ›´æ–°</p>
<hr/>
<h4 data-id="heading-23">8. Composite Pattern - ç»„åˆæ¨¡å¼</h4>
<p>å°†å¤šä¸ªç›¸å…³çš„ Hook ç»„åˆæˆä¸€ä¸ªä¸šåŠ¡ Hookï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useSearchableList</span> = (<span class="hljs-params">fetchFunction</span>) =&gt; {
  <span class="hljs-keyword">const</span> [searchTerm, setSearchTerm] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [refreshTrigger, triggerRefresh] = <span class="hljs-title function_">useRefreshTrigger</span>();
  <span class="hljs-keyword">const</span> debouncedSearchTerm = <span class="hljs-title function_">useDebounce</span>(searchTerm, <span class="hljs-number">300</span>);
  <span class="hljs-keyword">const</span> { loading, data, error, execute } = <span class="hljs-title function_">useAsync</span>(fetchFunction);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">execute</span>(debouncedSearchTerm);
  }, [debouncedSearchTerm, refreshTrigger]);
  
  <span class="hljs-keyword">return</span> {
    searchTerm,
    setSearchTerm,
    loading,
    data,
    error,
    <span class="hljs-attr">refresh</span>: triggerRefresh,
  };
};

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">ProductList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { searchTerm, setSearchTerm, loading, data, refresh } = 
    <span class="hljs-title function_">useSearchableList</span>(searchProducts);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{searchTerm}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setSearchTerm(e.target.value)} /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{refresh}</span>&gt;</span>åˆ·æ–°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      {loading ? 'åŠ è½½ä¸­...' : data?.map(item =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>&gt;</span>{item.name}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>)}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> è¡¨å•ç®¡ç†ã€åˆ†é¡µåˆ—è¡¨ã€æœç´¢åŠŸèƒ½</p>
<hr/>
<h4 data-id="heading-24">9. Event Listener Pattern - äº‹ä»¶ç›‘å¬æ¨¡å¼</h4>
<p>å®‰å…¨åœ°æ·»åŠ å’Œç§»é™¤äº‹ä»¶ç›‘å¬å™¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useEventListener</span> = (<span class="hljs-params">eventName, handler, element = <span class="hljs-variable language_">window</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> savedHandler = <span class="hljs-title function_">useRef</span>();
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    savedHandler.<span class="hljs-property">current</span> = handler;
  }, [handler]);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> isSupported = element &amp;&amp; element.<span class="hljs-property">addEventListener</span>;
    <span class="hljs-keyword">if</span> (!isSupported) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">eventListener</span> = (<span class="hljs-params">event</span>) =&gt; savedHandler.<span class="hljs-title function_">current</span>(event);
    element.<span class="hljs-title function_">addEventListener</span>(eventName, eventListener);
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      element.<span class="hljs-title function_">removeEventListener</span>(eventName, eventListener);
    };
  }, [eventName, element]);
};

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">KeyboardShortcuts</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">useEventListener</span>(<span class="hljs-string">'keydown'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (e.<span class="hljs-property">ctrlKey</span> &amp;&amp; e.<span class="hljs-property">key</span> === <span class="hljs-string">'s'</span>) {
      e.<span class="hljs-title function_">preventDefault</span>();
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¿å­˜å¿«æ·é”®è§¦å‘'</span>);
    }
  });
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æŒ‰ Ctrl+S ä¿å­˜<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> é”®ç›˜äº‹ä»¶ã€çª—å£äº‹ä»¶ã€è‡ªå®šä¹‰äº‹ä»¶</p>
<hr/>
<h3 data-id="heading-25">Hook è®¾è®¡åŸåˆ™</h3>
<h4 data-id="heading-26">1. å•ä¸€èŒè´£åŸåˆ™</h4>
<p>æ¯ä¸ª Hook åªåšä¸€ä»¶äº‹ï¼Œä¿æŒç®€å•å’Œä¸“æ³¨ã€‚</p>
<h4 data-id="heading-27">2. å¯ç»„åˆæ€§</h4>
<p>å° Hook å¯ä»¥ç»„åˆæˆå¤§ Hookï¼Œå°±åƒä¹é«˜ç§¯æœ¨ã€‚</p>
<h4 data-id="heading-28">3. å£°æ˜å¼</h4>
<p>é€šè¿‡ props å’Œè¿”å›å€¼ä¼ é€’æ•°æ®ï¼Œé¿å…å‘½ä»¤å¼è°ƒç”¨ã€‚</p>
<h4 data-id="heading-29">4. å¯æµ‹è¯•æ€§</h4>
<p>é€»è¾‘ç‹¬ç«‹ï¼Œæ˜“äºå•å…ƒæµ‹è¯•ã€‚</p>
<h4 data-id="heading-30">5. å¯å¤ç”¨æ€§</h4>
<p>ä¸ä¾èµ–å…·ä½“ä¸šåŠ¡ï¼Œé€šç”¨æ€§å¼ºã€‚</p>
<hr/>
<h3 data-id="heading-31">å‘½åè§„èŒƒ</h3>
<h4 data-id="heading-32">Hook å‘½å</h4>
<ul>
<li>æ ¼å¼ï¼š<code>use</code> + åŠŸèƒ½æè¿°ï¼ˆé©¼å³°å‘½åï¼‰</li>
<li>ç¤ºä¾‹ï¼š<code>useRefreshTrigger</code>, <code>useToggle</code>, <code>useDebounce</code></li>
</ul>
<h4 data-id="heading-33">è¿”å›å€¼è§„èŒƒ</h4>
<ul>
<li>
<p><strong>å•ä¸ªå€¼</strong>ï¼šç›´æ¥è¿”å›</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> debouncedValue = <span class="hljs-title function_">useDebounce</span>(value);
</code></pre>
</li>
<li>
<p><strong>ä¸¤ä¸ªå€¼</strong>ï¼šè¿”å›æ•°ç»„ï¼ˆç±»ä¼¼ useStateï¼‰</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> [trigger, fire] = <span class="hljs-title function_">useRefreshTrigger</span>();
<span class="hljs-keyword">const</span> [isOpen, { toggle }] = <span class="hljs-title function_">useToggle</span>();
</code></pre>
</li>
<li>
<p><strong>å¤šä¸ªå€¼</strong>ï¼šè¿”å›å¯¹è±¡</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { loading, data, error, execute } = <span class="hljs-title function_">useAsync</span>(fetchData);
</code></pre>
</li>
</ul>
<hr/>
<h3 data-id="heading-34">å®æˆ˜æ¡ˆä¾‹ï¼šå®Œæ•´çš„åˆ—è¡¨åˆ·æ–°æ–¹æ¡ˆ</h3>
<p>ç»“åˆå¤šä¸ª Hook æ¨¡å¼ï¼Œå®ç°ä¸€ä¸ªå®Œæ•´çš„åˆ—è¡¨é¡µï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useRefreshTrigger } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/useRefreshTrigger'</span>;
<span class="hljs-keyword">import</span> { useDebounce } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/useDebounce'</span>;
<span class="hljs-keyword">import</span> { useAsync } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/useAsync'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">QualityInspectionRecords</span>(<span class="hljs-params">{ route, navigation }</span>) {
  <span class="hljs-comment">// 1. åˆ·æ–°è§¦å‘å™¨</span>
  <span class="hljs-keyword">const</span> [refreshTrigger, triggerRefresh] = <span class="hljs-title function_">useRefreshTrigger</span>();
  
  <span class="hljs-comment">// 2. æœç´¢é˜²æŠ–</span>
  <span class="hljs-keyword">const</span> [searchTerm, setSearchTerm] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> debouncedSearchTerm = <span class="hljs-title function_">useDebounce</span>(searchTerm, <span class="hljs-number">300</span>);
  
  <span class="hljs-comment">// 3. å¼‚æ­¥æ•°æ®åŠ è½½</span>
  <span class="hljs-keyword">const</span> { loading, data, execute } = <span class="hljs-title function_">useAsync</span>(fetchRecords);
  
  <span class="hljs-comment">// 4. åŠ è½½æ•°æ®</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">execute</span>(route.<span class="hljs-property">params</span>?.<span class="hljs-property">outsourcingId</span>, debouncedSearchTerm);
  }, [route.<span class="hljs-property">params</span>?.<span class="hljs-property">outsourcingId</span>, debouncedSearchTerm, refreshTrigger]);
  
  <span class="hljs-comment">// 5. åˆ·æ–°å‡½æ•°</span>
  <span class="hljs-keyword">const</span> refresh = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">triggerRefresh</span>();
  }, [triggerRefresh]);
  
  <span class="hljs-comment">// 6. æ¸²æŸ“</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">SearchBar</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{searchTerm}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{setSearchTerm}</span> /&gt;</span>
      
      {loading ? (
        <span class="hljs-tag">&lt;<span class="hljs-name">Loading</span> /&gt;</span>
      ) : (
        <span class="hljs-tag">&lt;<span class="hljs-name">FlatList</span>
          <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span>
          <span class="hljs-attr">renderItem</span>=<span class="hljs-string">{({</span> <span class="hljs-attr">item</span> }) =&gt;</span> (
            <span class="hljs-tag">&lt;<span class="hljs-name">View</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">FileUpload</span> 
                <span class="hljs-attr">id</span>=<span class="hljs-string">{item.id}</span> 
                <span class="hljs-attr">refreshTrigger</span>=<span class="hljs-string">{refreshTrigger}</span> // <span class="hljs-attr">ä¼ é€’è§¦å‘å™¨</span>
              /&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> 
                <span class="hljs-attr">onPress</span>=<span class="hljs-string">{()</span> =&gt;</span> navigation.navigate('Edit', {
                  item,
                  onBack: refresh, // ç¼–è¾‘å®Œæˆååˆ·æ–°
                })}
              &gt;
                ç¼–è¾‘
              <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
          )}
        /&gt;
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span></span>
  );
}
</code></pre>
<hr/>
<h3 data-id="heading-35">æ€»ç»“</h3>
<p>Hook æ¨¡å¼çš„æ ¸å¿ƒæ˜¯<strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>å’Œ<strong>é€»è¾‘å¤ç”¨</strong>ã€‚é€šè¿‡å°†å¸¸è§çš„çŠ¶æ€é€»è¾‘å°è£…æˆ Hookï¼Œæˆ‘ä»¬å¯ä»¥ï¼š</p>
<ol>
<li>âœ… å‡å°‘é‡å¤ä»£ç </li>
<li>âœ… æé«˜ä»£ç å¯è¯»æ€§</li>
<li>âœ… ç®€åŒ–ç»„ä»¶é€»è¾‘</li>
<li>âœ… æå‡å¯ç»´æŠ¤æ€§</li>
<li>âœ… ä¾¿äºå•å…ƒæµ‹è¯•</li>
</ol>
<p>è§¦å‘å™¨æ¨¡å¼åªæ˜¯å…¶ä¸­ä¸€ç§ï¼ŒæŒæ¡è¿™äº›æ¨¡å¼åï¼Œä½ ä¼šå‘ç° React å¼€å‘å˜å¾—æ›´åŠ ä¼˜é›…å’Œé«˜æ•ˆã€‚</p>
<hr/>
<h3 data-id="heading-36">å‚è€ƒèµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Freact.dev%2Freference%2Freact" target="_blank" title="https://react.dev/reference/react" ref="nofollow noopener noreferrer">React Hooks å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fusehooks.com%2F" target="_blank" title="https://usehooks.com/" ref="nofollow noopener noreferrer">usehooks.com</a> - Hook ç¤ºä¾‹é›†åˆ</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fahooks.js.org%2F" target="_blank" title="https://ahooks.js.org/" ref="nofollow noopener noreferrer">ahooks</a> - é˜¿é‡Œå¼€æºçš„ Hook åº“</li>
</ul>
<hr/>
<p><strong>ä½œè€…ï¼š</strong> [ä½ çš„åå­—]<br/>
<strong>æ—¥æœŸï¼š</strong> 2026-01-10<br/>
<strong>æ ‡ç­¾ï¼š</strong> React, Hooks, è®¾è®¡æ¨¡å¼, æœ€ä½³å®è·µ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React Native Hooks å¿«é€Ÿå‚è€ƒå¡]]></title>    <link>https://juejin.cn/post/7593261984189317170</link>    <guid>https://juejin.cn/post/7593261984189317170</guid>    <pubDate>2026-01-10T05:33:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593261984189317170" data-draft-id="7593212374921822235" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React Native Hooks å¿«é€Ÿå‚è€ƒå¡"/> <meta itemprop="keywords" content="React Native"/> <meta itemprop="datePublished" content="2026-01-10T05:33:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨ç‹‚ä¹‹é€¸æ‰"/> <meta itemprop="url" content="https://juejin.cn/user/624178332441166"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React Native Hooks å¿«é€Ÿå‚è€ƒå¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/624178332441166/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨ç‹‚ä¹‹é€¸æ‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T05:33:39.000Z" title="Sat Jan 10 2026 05:33:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React Native Hooks å¿«é€Ÿå‚è€ƒå¡</h2>
<h3 data-id="heading-1">ğŸ¯ é¡¹ç›®è‡ªå®šä¹‰ Hooks</h3>
<h4 data-id="heading-2">useRefreshTrigger</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useRefreshTrigger } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks'</span>;

<span class="hljs-keyword">const</span> [trigger, fire] = <span class="hljs-title function_">useRefreshTrigger</span>();
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Component</span> <span class="hljs-attr">refreshTrigger</span>=<span class="hljs-string">{trigger}</span> /&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onPress</span>=<span class="hljs-string">{fire}</span>&gt;</span>åˆ·æ–°<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-3">useToggle</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useToggle } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks'</span>;

<span class="hljs-keyword">const</span> [isOpen, { toggle, setTrue, setFalse }] = <span class="hljs-title function_">useToggle</span>(<span class="hljs-literal">false</span>);
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Modal</span> <span class="hljs-attr">visible</span>=<span class="hljs-string">{isOpen}</span> <span class="hljs-attr">onClose</span>=<span class="hljs-string">{setFalse}</span> /&gt;</span></span>
</code></pre>
<h4 data-id="heading-4">useDebounce</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useDebounce } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks'</span>;

<span class="hljs-keyword">const</span> [text, setText] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
<span class="hljs-keyword">const</span> debouncedText = <span class="hljs-title function_">useDebounce</span>(text, <span class="hljs-number">500</span>);
</code></pre>
<h4 data-id="heading-5">useAsync</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useAsync } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks'</span>;

<span class="hljs-keyword">const</span> { loading, data, error, execute } = <span class="hljs-title function_">useAsync</span>(fetchData);
<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> { <span class="hljs-title function_">execute</span>(id); }, [id]);
</code></pre>
<h4 data-id="heading-6">usePrevious</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { usePrevious } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks'</span>;

<span class="hljs-keyword">const</span> prevValue = <span class="hljs-title function_">usePrevious</span>(currentValue);
</code></pre>
<hr/>
<h3 data-id="heading-7">ğŸ“¦ æ¨èç¬¬ä¸‰æ–¹åº“</h3>
<h4 data-id="heading-8">ahooksï¼ˆæ¨èå®‰è£…ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash">yarn add ahooks
</code></pre>
<h5 data-id="heading-9">çŠ¶æ€ç®¡ç†</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useBoolean, useToggle, useSet, useMap } <span class="hljs-keyword">from</span> <span class="hljs-string">'ahooks'</span>;

<span class="hljs-keyword">const</span> [state, { toggle, setTrue, setFalse }] = <span class="hljs-title function_">useBoolean</span>(<span class="hljs-literal">false</span>);
</code></pre>
<h5 data-id="heading-10">å‰¯ä½œç”¨</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useDebounce, useThrottle, useInterval } <span class="hljs-keyword">from</span> <span class="hljs-string">'ahooks'</span>;

<span class="hljs-keyword">const</span> debouncedValue = <span class="hljs-title function_">useDebounce</span>(value, { <span class="hljs-attr">wait</span>: <span class="hljs-number">500</span> });
</code></pre>
<h5 data-id="heading-11">æ•°æ®è¯·æ±‚</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useRequest } <span class="hljs-keyword">from</span> <span class="hljs-string">'ahooks'</span>;

<span class="hljs-keyword">const</span> { data, loading, error, run, refresh } = <span class="hljs-title function_">useRequest</span>(getUser, {
  <span class="hljs-attr">manual</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">debounceWait</span>: <span class="hljs-number">300</span>,
  <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data),
});
</code></pre>
<h5 data-id="heading-12">ç”Ÿå‘½å‘¨æœŸ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useMount, useUnmount, useUpdateEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'ahooks'</span>;

<span class="hljs-title function_">useMount</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶æŒ‚è½½'</span>));
<span class="hljs-title function_">useUnmount</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç»„ä»¶å¸è½½'</span>));
<span class="hljs-title function_">useUpdateEffect</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ›´æ–°ï¼Œè·³è¿‡é¦–æ¬¡'</span>), [dep]);
</code></pre>
<hr/>
<h4 data-id="heading-13">@react-native-community/hooks</h4>
<pre><code class="hljs language-bash" lang="bash">yarn add @react-native-community/hooks
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> {
  useAppState,        <span class="hljs-comment">// åº”ç”¨å‰åå°çŠ¶æ€</span>
  useBackHandler,     <span class="hljs-comment">// Android è¿”å›é”®</span>
  useClipboard,       <span class="hljs-comment">// å‰ªè´´æ¿</span>
  useDimensions,      <span class="hljs-comment">// å±å¹•å°ºå¯¸</span>
  useKeyboard,        <span class="hljs-comment">// é”®ç›˜çŠ¶æ€</span>
  useDeviceOrientation, <span class="hljs-comment">// è®¾å¤‡æ–¹å‘</span>
  useLayout,          <span class="hljs-comment">// ç»„ä»¶å¸ƒå±€</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@react-native-community/hooks'</span>;

<span class="hljs-comment">// åº”ç”¨çŠ¶æ€</span>
<span class="hljs-keyword">const</span> appState = <span class="hljs-title function_">useAppState</span>(); <span class="hljs-comment">// 'active' | 'background' | 'inactive'</span>

<span class="hljs-comment">// è¿”å›é”®</span>
<span class="hljs-title function_">useBackHandler</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// è¿”å› true é˜»æ­¢é»˜è®¤è¡Œä¸º</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
});

<span class="hljs-comment">// å‰ªè´´æ¿</span>
<span class="hljs-keyword">const</span> [data, setString] = <span class="hljs-title function_">useClipboard</span>();

<span class="hljs-comment">// å±å¹•å°ºå¯¸</span>
<span class="hljs-keyword">const</span> { screen, <span class="hljs-variable language_">window</span> } = <span class="hljs-title function_">useDimensions</span>();

<span class="hljs-comment">// é”®ç›˜</span>
<span class="hljs-keyword">const</span> keyboard = <span class="hljs-title function_">useKeyboard</span>();
<span class="hljs-comment">// keyboard.keyboardShown: boolean</span>
<span class="hljs-comment">// keyboard.keyboardHeight: number</span>

<span class="hljs-comment">// è®¾å¤‡æ–¹å‘</span>
<span class="hljs-keyword">const</span> orientation = <span class="hljs-title function_">useDeviceOrientation</span>(); <span class="hljs-comment">// 'portrait' | 'landscape'</span>

<span class="hljs-comment">// å¸ƒå±€</span>
<span class="hljs-keyword">const</span> { onLayout, width, height, x, y } = <span class="hljs-title function_">useLayout</span>();
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span> <span class="hljs-attr">onLayout</span>=<span class="hljs-string">{onLayout}</span> /&gt;</span></span>
</code></pre>
<hr/>
<h4 data-id="heading-14">react-hook-form</h4>
<pre><code class="hljs language-bash" lang="bash">yarn add react-hook-form
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useForm, <span class="hljs-title class_">Controller</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-hook-form'</span>;

<span class="hljs-keyword">const</span> { control, handleSubmit, <span class="hljs-attr">formState</span>: { errors } } = <span class="hljs-title function_">useForm</span>();

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Controller</span>
  <span class="hljs-attr">control</span>=<span class="hljs-string">{control}</span>
  <span class="hljs-attr">name</span>=<span class="hljs-string">"email"</span>
  <span class="hljs-attr">rules</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">required:</span> '<span class="hljs-attr">å¿…å¡«</span>' }}
  <span class="hljs-attr">render</span>=<span class="hljs-string">{({</span> <span class="hljs-attr">field:</span> { <span class="hljs-attr">onChange</span>, <span class="hljs-attr">value</span> } }) =&gt;</span> (
    <span class="hljs-tag">&lt;<span class="hljs-name">TextInput</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">onChangeText</span>=<span class="hljs-string">{onChange}</span> /&gt;</span>
  )}
/&gt;</span>
</code></pre>
<hr/>
<h4 data-id="heading-15">@tanstack/react-query</h4>
<pre><code class="hljs language-bash" lang="bash">yarn add @tanstack/react-query
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useQuery, useMutation } <span class="hljs-keyword">from</span> <span class="hljs-string">'@tanstack/react-query'</span>;

<span class="hljs-comment">// æŸ¥è¯¢</span>
<span class="hljs-keyword">const</span> { data, isLoading, error, refetch } = <span class="hljs-title function_">useQuery</span>({
  <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'users'</span>],
  <span class="hljs-attr">queryFn</span>: fetchUsers,
  <span class="hljs-attr">staleTime</span>: <span class="hljs-number">5000</span>,
});

<span class="hljs-comment">// ä¿®æ”¹</span>
<span class="hljs-keyword">const</span> mutation = <span class="hljs-title function_">useMutation</span>({
  <span class="hljs-attr">mutationFn</span>: createUser,
  <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">() =&gt;</span> {
    queryClient.<span class="hljs-title function_">invalidateQueries</span>({ <span class="hljs-attr">queryKey</span>: [<span class="hljs-string">'users'</span>] });
  },
});
</code></pre>
<hr/>
<h4 data-id="heading-16">zustand</h4>
<pre><code class="hljs language-bash" lang="bash">yarn add zustand
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { create } <span class="hljs-keyword">from</span> <span class="hljs-string">'zustand'</span>;

<span class="hljs-keyword">const</span> useStore = <span class="hljs-title function_">create</span>(<span class="hljs-function">(<span class="hljs-params">set</span>) =&gt;</span> ({
  <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">increment</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">set</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> ({ <span class="hljs-attr">count</span>: state.<span class="hljs-property">count</span> + <span class="hljs-number">1</span> })),
}));

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">useStore</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">count</span>);
<span class="hljs-keyword">const</span> increment = <span class="hljs-title function_">useStore</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">increment</span>);
</code></pre>
<hr/>
<h4 data-id="heading-17">@react-navigation/native</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> {
  useNavigation,
  useRoute,
  useFocusEffect,
  useIsFocused,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@react-navigation/native'</span>;

<span class="hljs-keyword">const</span> navigation = <span class="hljs-title function_">useNavigation</span>();
<span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>();
<span class="hljs-keyword">const</span> isFocused = <span class="hljs-title function_">useIsFocused</span>();

<span class="hljs-title function_">useFocusEffect</span>(
  <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// é¡µé¢èšç„¦æ—¶æ‰§è¡Œ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// é¡µé¢å¤±ç„¦æ—¶æ‰§è¡Œ</span>
    };
  }, [])
);
</code></pre>
<hr/>
<h3 data-id="heading-18">ğŸ”¥ å¸¸è§åœºæ™¯é€ŸæŸ¥</h3>
<h4 data-id="heading-19">æœç´¢é˜²æŠ–</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> [keyword, setKeyword] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
<span class="hljs-keyword">const</span> debouncedKeyword = <span class="hljs-title function_">useDebounce</span>(keyword, <span class="hljs-number">500</span>);

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (debouncedKeyword) {
    <span class="hljs-title function_">searchAPI</span>(debouncedKeyword);
  }
}, [debouncedKeyword]);
</code></pre>
<h4 data-id="heading-20">æ¨¡æ€æ¡†æ§åˆ¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> [visible, { <span class="hljs-attr">setTrue</span>: open, <span class="hljs-attr">setFalse</span>: close }] = <span class="hljs-title function_">useToggle</span>(<span class="hljs-literal">false</span>);

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Modal</span> <span class="hljs-attr">visible</span>=<span class="hljs-string">{visible}</span> <span class="hljs-attr">onClose</span>=<span class="hljs-string">{close}</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onPress</span>=<span class="hljs-string">{close}</span>&gt;</span>å…³é—­<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Modal</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-21">åˆ—è¡¨åˆ·æ–°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> [refreshTrigger, triggerRefresh] = <span class="hljs-title function_">useRefreshTrigger</span>();

<span class="hljs-keyword">const</span> <span class="hljs-title function_">refresh</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">fetchData</span>();
  <span class="hljs-title function_">triggerRefresh</span>();
};

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">FlatList</span>
  <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span>
  <span class="hljs-attr">renderItem</span>=<span class="hljs-string">{({</span> <span class="hljs-attr">item</span> }) =&gt;</span> (
    <span class="hljs-tag">&lt;<span class="hljs-name">ItemCard</span> <span class="hljs-attr">refreshTrigger</span>=<span class="hljs-string">{refreshTrigger}</span> /&gt;</span>
  )}
/&gt;</span>
</code></pre>
<h4 data-id="heading-22">é”®ç›˜é€‚é…</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> keyboard = <span class="hljs-title function_">useKeyboard</span>();

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">KeyboardAvoidingView</span>
  <span class="hljs-attr">behavior</span>=<span class="hljs-string">{Platform.OS</span> === <span class="hljs-string">'ios'</span> ? '<span class="hljs-attr">padding</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">height</span>'}
  <span class="hljs-attr">keyboardVerticalOffset</span>=<span class="hljs-string">{keyboard.keyboardHeight}</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">TextInput</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">KeyboardAvoidingView</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-23">é¡µé¢èšç„¦åˆ·æ–°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">useFocusEffect</span>(
  <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">fetchData</span>();
  }, [])
);
</code></pre>
<h4 data-id="heading-24">è¿”å›é”®æ‹¦æˆª</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">useBackHandler</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (hasUnsavedChanges) {
    <span class="hljs-title class_">Alert</span>.<span class="hljs-title function_">alert</span>(<span class="hljs-string">'æç¤º'</span>, <span class="hljs-string">'æœ‰æœªä¿å­˜çš„æ›´æ”¹'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// é˜»æ­¢è¿”å›</span>
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// å…è®¸è¿”å›</span>
});
</code></pre>
<h4 data-id="heading-25">å¼‚æ­¥æ•°æ®åŠ è½½</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { loading, data, error, execute } = <span class="hljs-title function_">useAsync</span>(fetchUser);

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">execute</span>(userId);
}, [userId]);

<span class="hljs-keyword">if</span> (loading) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Loading</span> /&gt;</span></span>;
<span class="hljs-keyword">if</span> (error) <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Error</span> <span class="hljs-attr">message</span>=<span class="hljs-string">{error.message}</span> /&gt;</span></span>;
<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserProfile</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> /&gt;</span></span>;
</code></pre>
<h4 data-id="heading-26">è¡¨å•éªŒè¯</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { control, handleSubmit, <span class="hljs-attr">formState</span>: { errors } } = <span class="hljs-title function_">useForm</span>();

<span class="hljs-keyword">const</span> <span class="hljs-title function_">onSubmit</span> = (<span class="hljs-params">data</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
};

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Controller</span>
  <span class="hljs-attr">control</span>=<span class="hljs-string">{control}</span>
  <span class="hljs-attr">name</span>=<span class="hljs-string">"email"</span>
  <span class="hljs-attr">rules</span>=<span class="hljs-string">{{</span>
    <span class="hljs-attr">required:</span> '<span class="hljs-attr">é‚®ç®±å¿…å¡«</span>',
    <span class="hljs-attr">pattern:</span> {
      <span class="hljs-attr">value:</span> /^[<span class="hljs-attr">A-Z0-9._</span>%+<span class="hljs-attr">-</span>]+@[<span class="hljs-attr">A-Z0-9.-</span>]+\<span class="hljs-attr">.</span>[<span class="hljs-attr">A-Z</span>]{<span class="hljs-attr">2</span>,}$/<span class="hljs-attr">i</span>,
      <span class="hljs-attr">message:</span> '<span class="hljs-attr">é‚®ç®±æ ¼å¼ä¸æ­£ç¡®</span>'
    }
  }}
  <span class="hljs-attr">render</span>=<span class="hljs-string">{({</span> <span class="hljs-attr">field:</span> { <span class="hljs-attr">onChange</span>, <span class="hljs-attr">value</span> } }) =&gt;</span> (
    <span class="hljs-tag">&lt;<span class="hljs-name">TextInput</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">onChangeText</span>=<span class="hljs-string">{onChange}</span> /&gt;</span>
  )}
/&gt;</span>
{errors.<span class="hljs-property">email</span> &amp;&amp; <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Text</span>&gt;</span>{errors.email.message}<span class="hljs-tag">&lt;/<span class="hljs-name">Text</span>&gt;</span></span>}
&lt;<span class="hljs-title class_">Button</span> onPress={<span class="hljs-title function_">handleSubmit</span>(onSubmit)}&gt;æäº¤&lt;/<span class="hljs-title class_">Button</span>&gt;
</code></pre>
<hr/>
<h3 data-id="heading-27">ğŸ“– å®Œæ•´æ–‡æ¡£</h3>
<ul>
<li><a href="https://link.juejin.cn?target=.%2FReact_Hook_Advanced_Patterns.md" target="_blank" title="./React_Hook_Advanced_Patterns.md" ref="nofollow noopener noreferrer">React Hook é«˜çº§æ¨¡å¼</a></li>
<li><a href="https://link.juejin.cn?target=.%2Ftrigger-pattern-diagram.md" target="_blank" title="./trigger-pattern-diagram.md" ref="nofollow noopener noreferrer">è§¦å‘å™¨æ¨¡å¼è¯¦è§£</a></li>
<li><a href="https://link.juejin.cn?target=.%2FReact_Native_Hooks_Libraries_Guide.md" target="_blank" title="./React_Native_Hooks_Libraries_Guide.md" ref="nofollow noopener noreferrer">React Native Hooks åº“æŒ‡å—</a></li>
<li><a href="https://link.juejin.cn?target=..%2Fsrc%2Fhooks%2FREADME.md" target="_blank" title="../src/hooks/README.md" ref="nofollow noopener noreferrer">é¡¹ç›® Hooks ä½¿ç”¨æŒ‡å—</a></li>
</ul>
<hr/>
<p><strong>æç¤ºï¼š</strong> å°†æ­¤æ–‡ä»¶ä¿å­˜ä¸ºä¹¦ç­¾ï¼Œéšæ—¶æŸ¥é˜…ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[useRefreshTriggerè§¦å‘å™¨æ¨¡å¼å·¥ä½œæµç¨‹å›¾è§£]]></title>    <link>https://juejin.cn/post/7593234983755694090</link>    <guid>https://juejin.cn/post/7593234983755694090</guid>    <pubDate>2026-01-10T05:36:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593234983755694090" data-draft-id="7593212374921838619" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="useRefreshTriggerè§¦å‘å™¨æ¨¡å¼å·¥ä½œæµç¨‹å›¾è§£"/> <meta itemprop="keywords" content="React Native"/> <meta itemprop="datePublished" content="2026-01-10T05:36:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨ç‹‚ä¹‹é€¸æ‰"/> <meta itemprop="url" content="https://juejin.cn/user/624178332441166"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            useRefreshTriggerè§¦å‘å™¨æ¨¡å¼å·¥ä½œæµç¨‹å›¾è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/624178332441166/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨ç‹‚ä¹‹é€¸æ‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T05:36:07.000Z" title="Sat Jan 10 2026 05:36:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è§¦å‘å™¨æ¨¡å¼å·¥ä½œæµç¨‹å›¾è§£</h2>
<h3 data-id="heading-1">å®Œæ•´æ•°æ®æµ</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ·æ“ä½œæµç¨‹                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  ç”¨æˆ·ç‚¹å‡»"ç¼–è¾‘"æŒ‰é’®     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  è¿›å…¥ç¼–è¾‘é¡µé¢ EditQa    â”‚
                    â”‚  ä¿®æ”¹å›¾ç‰‡å¹¶ä¿å­˜         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  è°ƒç”¨ <span class="hljs-built_in">onBack</span>() å›è°ƒ     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        çˆ¶ç»„ä»¶ (åˆ—è¡¨é¡µ)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  const <span class="hljs-selector-attr">[refreshTrigger, triggerRefresh]</span> = <span class="hljs-built_in">useRefreshTrigger</span>();  â”‚
â”‚                                                                  â”‚
â”‚  const refresh = () =&gt; {                                        â”‚
â”‚    <span class="hljs-built_in">query</span>({ ... });           <span class="hljs-comment">// â† 1. åˆ·æ–°åˆ—è¡¨æ•°æ®               â”‚</span>
â”‚    <span class="hljs-built_in">triggerRefresh</span>();         <span class="hljs-comment">// â† 2. è§¦å‘å›¾ç‰‡åˆ·æ–°               â”‚</span>
â”‚  };                                                              â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  <span class="hljs-built_in">triggerRefresh</span>() æ‰§è¡Œè¿‡ç¨‹ï¼š                      â”‚          â”‚
â”‚  â”‚                                                   â”‚          â”‚
â”‚  â”‚  <span class="hljs-built_in">setTrigger</span>(prev =&gt; prev + <span class="hljs-number">1</span>)                    â”‚          â”‚
â”‚  â”‚       â”‚                                           â”‚          â”‚
â”‚  â”‚       â–¼                                           â”‚          â”‚
â”‚  â”‚  refreshTrigger: <span class="hljs-number">0</span> â†’ <span class="hljs-number">1</span> â†’ <span class="hljs-number">2</span> â†’ <span class="hljs-number">3</span> ...              â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                  â”‚
â”‚  &lt;FileUpload                                                    â”‚
â”‚    id={problem<span class="hljs-selector-class">.id</span>}                                              â”‚
â”‚    refreshTrigger={refreshTrigger}  <span class="hljs-comment">// â† ä¼ é€’è§¦å‘å™¨å€¼           â”‚</span>
â”‚  /&gt;                                                              â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ props ä¼ é€’
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å­ç»„ä»¶ (FileUpload)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  function <span class="hljs-built_in">FileUpload</span>({ id, refreshTrigger }) {                  â”‚
â”‚    const <span class="hljs-selector-attr">[pictures, setPictures]</span> = <span class="hljs-built_in">useState</span>([]);                â”‚
â”‚                                                                  â”‚
â”‚    <span class="hljs-built_in">useEffect</span>(() =&gt; {                                            â”‚
â”‚      if (id) {                                                  â”‚
â”‚        <span class="hljs-built_in">getFileInfos</span>({ query: { fkId: id } })                   â”‚
â”‚          <span class="hljs-selector-class">.then</span>(res =&gt; setPictures(res));                        â”‚
â”‚      }                                                           â”‚
â”‚    }, <span class="hljs-selector-attr">[id, refreshTrigger]</span>);  <span class="hljs-comment">// â† ä¾èµ– refreshTrigger          â”‚</span>
â”‚                                                                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚    â”‚  React æ£€æµ‹ä¾èµ–å˜åŒ–ï¼š                         â”‚            â”‚
â”‚    â”‚                                               â”‚            â”‚
â”‚    â”‚  refreshTrigger ä» <span class="hljs-number">0</span> å˜æˆ <span class="hljs-number">1</span>                  â”‚            â”‚
â”‚    â”‚       â†“                                       â”‚            â”‚
â”‚    â”‚  useEffect é‡æ–°æ‰§è¡Œ                           â”‚            â”‚
â”‚    â”‚       â†“                                       â”‚            â”‚
â”‚    â”‚  å‘èµ·æ–°çš„å›¾ç‰‡è¯·æ±‚                             â”‚            â”‚
â”‚    â”‚       â†“                                       â”‚            â”‚
â”‚    â”‚  <span class="hljs-built_in">setPictures</span>(æ–°æ•°æ®)                          â”‚            â”‚
â”‚    â”‚       â†“                                       â”‚            â”‚
â”‚    â”‚  ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œæ˜¾ç¤ºæ–°å›¾ç‰‡                     â”‚            â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                  â”‚
â”‚    return &lt;<span class="hljs-selector-tag">img</span> <span class="hljs-attribute">src</span>={pictures<span class="hljs-selector-attr">[0]</span><span class="hljs-selector-class">.url</span>} /&gt;;                        â”‚
â”‚  }                                                               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-2">å…³é”®ç‚¹è§£æ</h3>
<h4 data-id="heading-3">1. ä¸ºä»€ä¹ˆç”¨æ•°å­—è€Œä¸æ˜¯å¸ƒå°”å€¼ï¼Ÿ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ ä½¿ç”¨å¸ƒå°”å€¼çš„é—®é¢˜</span>
<span class="hljs-keyword">const</span> [refresh, setRefresh] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">triggerRefresh</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">setRefresh</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setRefresh</span>(<span class="hljs-literal">false</span>), <span class="hljs-number">0</span>); <span class="hljs-comment">// éœ€è¦é‡ç½®</span>
};

<span class="hljs-comment">// è¿ç»­ä¸¤æ¬¡è°ƒç”¨ä¼šå¤±æ•ˆï¼š</span>
<span class="hljs-title function_">triggerRefresh</span>(); <span class="hljs-comment">// true</span>
<span class="hljs-title function_">triggerRefresh</span>(); <span class="hljs-comment">// è¿˜æ˜¯ trueï¼Œæ²¡æœ‰å˜åŒ–ï¼</span>


<span class="hljs-comment">// âœ… ä½¿ç”¨æ•°å­—çš„ä¼˜åŠ¿</span>
<span class="hljs-keyword">const</span> [trigger, setTrigger] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">triggerRefresh</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">setTrigger</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + <span class="hljs-number">1</span>);
};

<span class="hljs-comment">// æ¯æ¬¡è°ƒç”¨éƒ½ä¼šå˜åŒ–ï¼š</span>
<span class="hljs-title function_">triggerRefresh</span>(); <span class="hljs-comment">// 0 â†’ 1</span>
<span class="hljs-title function_">triggerRefresh</span>(); <span class="hljs-comment">// 1 â†’ 2</span>
<span class="hljs-title function_">triggerRefresh</span>(); <span class="hljs-comment">// 2 â†’ 3</span>
</code></pre>
<h4 data-id="heading-4">2. ä¸ºä»€ä¹ˆä¸ç”¨ key å¼ºåˆ¶é‡æ–°æŒ‚è½½ï¼Ÿ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ ä½¿ç”¨ key çš„é—®é¢˜</span>
&lt;<span class="hljs-title class_">FileUpload</span> key={<span class="hljs-string">`<span class="hljs-subst">${id}</span>-<span class="hljs-subst">${timestamp}</span>`</span>} id={id} /&gt;

<span class="hljs-comment">// ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼š</span>
<span class="hljs-comment">// 1. å¸è½½æ—§ç»„ä»¶ (componentWillUnmount)</span>
<span class="hljs-comment">// 2. é”€æ¯æ‰€æœ‰çŠ¶æ€å’Œ DOM</span>
<span class="hljs-comment">// 3. æŒ‚è½½æ–°ç»„ä»¶ (componentDidMount)</span>
<span class="hljs-comment">// 4. é‡æ–°åˆå§‹åŒ–æ‰€æœ‰çŠ¶æ€</span>
<span class="hljs-comment">// 5. é‡æ–°æ¸²æŸ“ DOM</span>

<span class="hljs-comment">// æ€§èƒ½å¼€é”€å¤§ï¼Œå¯èƒ½å¯¼è‡´ï¼š</span>
<span class="hljs-comment">// - é—ªçƒ</span>
<span class="hljs-comment">// - åŠ¨ç”»ä¸­æ–­</span>
<span class="hljs-comment">// - æ»šåŠ¨ä½ç½®ä¸¢å¤±</span>
<span class="hljs-comment">// - è¾“å…¥ç„¦ç‚¹ä¸¢å¤±</span>


<span class="hljs-comment">// âœ… ä½¿ç”¨ refreshTrigger çš„ä¼˜åŠ¿</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">FileUpload</span> <span class="hljs-attr">id</span>=<span class="hljs-string">{id}</span> <span class="hljs-attr">refreshTrigger</span>=<span class="hljs-string">{trigger}</span> /&gt;</span></span>

<span class="hljs-comment">// ç»„ä»¶ç”Ÿå‘½å‘¨æœŸï¼š</span>
<span class="hljs-comment">// 1. ç»„ä»¶ä¿æŒæŒ‚è½½çŠ¶æ€</span>
<span class="hljs-comment">// 2. åªæ‰§è¡Œ useEffect å›è°ƒ</span>
<span class="hljs-comment">// 3. åªæ›´æ–°éœ€è¦æ›´æ–°çš„æ•°æ®</span>
<span class="hljs-comment">// 4. ä¿ç•™å…¶ä»–çŠ¶æ€å’Œ DOM</span>

<span class="hljs-comment">// æ€§èƒ½å¥½ï¼Œç”¨æˆ·ä½“éªŒæµç•…</span>
</code></pre>
<h4 data-id="heading-5">3. ä¸ºä»€ä¹ˆè¦å°è£…æˆ Hookï¼Ÿ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ ä¸å°è£…çš„é—®é¢˜</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Component1</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [trigger, setTrigger] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">fire</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">setTrigger</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + <span class="hljs-number">1</span>);
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Component2</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [trigger, setTrigger] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">fire</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">setTrigger</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + <span class="hljs-number">1</span>);
  <span class="hljs-comment">// ... é‡å¤ä»£ç </span>
}


<span class="hljs-comment">// âœ… å°è£…æˆ Hook çš„ä¼˜åŠ¿</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Component1</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [trigger, fire] = <span class="hljs-title function_">useRefreshTrigger</span>();
  <span class="hljs-comment">// ç®€æ´ã€å¯å¤ç”¨</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Component2</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [trigger, fire] = <span class="hljs-title function_">useRefreshTrigger</span>();
  <span class="hljs-comment">// åŒæ ·ç®€æ´</span>
}
</code></pre>
<h3 data-id="heading-6">å¯¹æ¯”å…¶ä»–æ–¹æ¡ˆ</h3>








































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>æ€§èƒ½</th><th>æ˜“ç”¨æ€§</th><th>å¯ç»´æŠ¤æ€§</th><th>æ¨èåº¦</th></tr></thead><tbody><tr><td><strong>è§¦å‘å™¨æ¨¡å¼</strong></td><td>â­â­â­â­â­</td><td>â­â­â­â­â­</td><td>â­â­â­â­â­</td><td>âœ… å¼ºçƒˆæ¨è</td></tr><tr><td>key å¼ºåˆ¶é‡æŒ‚è½½</td><td>â­â­</td><td>â­â­â­â­</td><td>â­â­â­</td><td>âš ï¸ ä¸æ¨è</td></tr><tr><td>ref å‘½ä»¤å¼è°ƒç”¨</td><td>â­â­â­â­</td><td>â­â­â­</td><td>â­â­</td><td>âš ï¸ ä¸æ¨è</td></tr><tr><td>å¸ƒå°”å€¼åˆ‡æ¢</td><td>â­â­â­â­</td><td>â­â­</td><td>â­â­</td><td>âš ï¸ ä¸æ¨è</td></tr></tbody></table>
<h3 data-id="heading-7">å®é™…åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-8">åœºæ™¯ 1ï¼šåˆ—è¡¨åˆ·æ–°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> [trigger, fire] = <span class="hljs-title function_">useRefreshTrigger</span>();

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">FlatList</span>
  <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span>
  <span class="hljs-attr">renderItem</span>=<span class="hljs-string">{({</span> <span class="hljs-attr">item</span> }) =&gt;</span> (
    <span class="hljs-tag">&lt;<span class="hljs-name">ItemCard</span> <span class="hljs-attr">refreshTrigger</span>=<span class="hljs-string">{trigger}</span> /&gt;</span>
  )}
/&gt;</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onPress</span>=<span class="hljs-string">{fire}</span>&gt;</span>åˆ·æ–°å…¨éƒ¨<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-9">åœºæ™¯ 2ï¼šè¡¨å•é‡ç½®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> [trigger, fire] = <span class="hljs-title function_">useRefreshTrigger</span>();

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Form</span> <span class="hljs-attr">resetTrigger</span>=<span class="hljs-string">{trigger}</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Input</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Select</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Form</span>&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onPress</span>=<span class="hljs-string">{fire}</span>&gt;</span>é‡ç½®è¡¨å•<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-10">åœºæ™¯ 3ï¼šå›¾è¡¨é‡ç»˜</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> [trigger, fire] = <span class="hljs-title function_">useRefreshTrigger</span>();

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Chart</span> 
  <span class="hljs-attr">data</span>=<span class="hljs-string">{chartData}</span>
  <span class="hljs-attr">redrawTrigger</span>=<span class="hljs-string">{trigger}</span>
/&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onPress</span>=<span class="hljs-string">{fire}</span>&gt;</span>åˆ·æ–°å›¾è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-11">åœºæ™¯ 4ï¼šWebSocket é‡è¿</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> [trigger, fire] = <span class="hljs-title function_">useRefreshTrigger</span>();

<span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> ws = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocket</span>(url);
  <span class="hljs-comment">// ... è¿æ¥é€»è¾‘</span>
  <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> ws.<span class="hljs-title function_">close</span>();
}, [trigger]);

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">onPress</span>=<span class="hljs-string">{fire}</span>&gt;</span>é‡æ–°è¿æ¥<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-12">æ€»ç»“</h3>
<p>è§¦å‘å™¨æ¨¡å¼çš„æœ¬è´¨æ˜¯ï¼š</p>
<blockquote>
<p><strong>é€šè¿‡ä¸€ä¸ªç®€å•çš„ã€å¯é¢„æµ‹çš„å€¼å˜åŒ–ï¼Œæ¥è§¦å‘å¤æ‚çš„ã€å¯æ§çš„å‰¯ä½œç”¨</strong></p>
</blockquote>
<p>è¿™ç§æ¨¡å¼ï¼š</p>
<ul>
<li>âœ… ç¬¦åˆ React çš„å£°æ˜å¼ç†å¿µ</li>
<li>âœ… ä¿æŒå•å‘æ•°æ®æµ</li>
<li>âœ… æ€§èƒ½ä¼˜ç§€</li>
<li>âœ… æ˜“äºç†è§£å’Œç»´æŠ¤</li>
<li>âœ… å¯å¤ç”¨æ€§å¼º</li>
</ul>
<p>æŒæ¡è¿™ä¸ªæ¨¡å¼ï¼Œä½ å°±æŒæ¡äº† React çŠ¶æ€ç®¡ç†çš„ç²¾é«“ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Redisæ…¢æŸ¥è¯¢åˆ†æä¸ä¼˜åŒ–ï¼šæ€§èƒ½ç“¶é¢ˆæ’æŸ¥å®æˆ˜æŒ‡å—]]></title>    <link>https://juejin.cn/post/7593240931287187508</link>    <guid>https://juejin.cn/post/7593240931287187508</guid>    <pubDate>2026-01-10T05:40:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593240931287187508" data-draft-id="7490784514842361906" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Redisæ…¢æŸ¥è¯¢åˆ†æä¸ä¼˜åŒ–ï¼šæ€§èƒ½ç“¶é¢ˆæ’æŸ¥å®æˆ˜æŒ‡å—"/> <meta itemprop="keywords" content="Redis,æ•°æ®åº“,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-01-10T05:40:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Goé«˜å¹¶å‘æ¶æ„_ç‹å·¥"/> <meta itemprop="url" content="https://juejin.cn/user/446863555701561"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Redisæ…¢æŸ¥è¯¢åˆ†æä¸ä¼˜åŒ–ï¼šæ€§èƒ½ç“¶é¢ˆæ’æŸ¥å®æˆ˜æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/446863555701561/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Goé«˜å¹¶å‘æ¶æ„_ç‹å·¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T05:40:47.000Z" title="Sat Jan 10 2026 05:40:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»21åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">ä¸€ã€å‰è¨€</h4>
<p>åœ¨ç°ä»£åç«¯å¼€å‘ä¸­ï¼ŒRediså‡­å€Ÿå…¶è¶…é«˜çš„å†…å­˜æ“ä½œæ€§èƒ½å’Œä¸°å¯Œçš„æ•°æ®ç»“æ„ï¼Œå·²æˆä¸ºè®¸å¤šé«˜å¹¶å‘åœºæ™¯ä¸‹çš„â€œæ ‡é…â€æ•°æ®åº“ã€‚æ— è®ºæ˜¯ç”µå•†ç§’æ€ã€å®æ—¶æ’è¡Œæ¦œï¼Œè¿˜æ˜¯åˆ†å¸ƒå¼é”å’Œç¼“å­˜ï¼ŒRedisçš„èº«å½±æ— å¤„ä¸åœ¨ã€‚ç„¶è€Œï¼Œæ­£å¦‚ä¸€è¾†è·‘è½¦å¦‚æœæ²¹è·¯ä¸ç•…å°±æ— æ³•å‘æŒ¥å…¨éƒ¨é©¬åŠ›ï¼ŒRedisçš„æ€§èƒ½ä¹Ÿå¯èƒ½å› ä¸ºæ…¢æŸ¥è¯¢é—®é¢˜è€Œå¤§æ‰“æŠ˜æ‰£ã€‚æ…¢æŸ¥è¯¢å°±åƒç³»ç»Ÿä¸­çš„â€œéšå½¢æ€æ‰‹â€ï¼Œæ‚„æ— å£°æ¯åœ°æ‹–æ…¢å“åº”æ—¶é—´ã€é™ä½ååé‡ï¼Œç”šè‡³å¼•å‘è¿é”ååº”ï¼Œè®©çº¿ä¸ŠæœåŠ¡é›ªä¸ŠåŠ éœœã€‚</p>
<p>æˆ‘ä»äº‹Rediså¼€å‘å·²æœ‰10å¹´ï¼Œä»åˆå­¦è€…åˆ°å¦‚ä»Šè´Ÿè´£è¿‡å¤šä¸ªå¤§å‹é¡¹ç›®çš„æ€§èƒ½ä¼˜åŒ–ï¼Œè¸©è¿‡çš„å‘å’Œç§¯ç´¯çš„ç»éªŒè®©æˆ‘æ·±åˆ»ä½“ä¼šåˆ°ï¼šæ…¢æŸ¥è¯¢ä¸ä»…æ˜¯æŠ€æœ¯é—®é¢˜ï¼Œæ›´æ˜¯ä¸šåŠ¡ç¨³å®šçš„å…³é”®ä¸€ç¯ã€‚è®°å¾—æœ‰ä¸€æ¬¡ï¼ŒæŸç”µå•†ç§’æ€æ´»åŠ¨ä¸­ï¼Œæ…¢æŸ¥è¯¢å¯¼è‡´è®¢å•å¤„ç†å»¶è¿Ÿï¼Œæœ€ç»ˆå¼•å‘ç”¨æˆ·æŠ•è¯‰ã€‚é‚£ä¸€åˆ»æˆ‘æ„è¯†åˆ°ï¼Œä»…ä»…ä¼šç”¨Redisè¿œè¿œä¸å¤Ÿï¼ŒçœŸæ­£çš„é«˜æ‰‹éœ€è¦èƒ½â€œé©¯æœâ€å®ƒï¼Œæ‰¾åˆ°å¹¶è§£å†³æ€§èƒ½ç“¶é¢ˆã€‚</p>
<p>è¿™ç¯‡æ–‡ç« çš„ç›®æ ‡è¯»è€…æ˜¯é‚£äº›æœ‰1-2å¹´Rediså¼€å‘ç»éªŒçš„å¼€å‘è€…ã€‚ä½ å¯èƒ½å·²ç»ç†Ÿæ‚‰åŸºæœ¬çš„SET/GETæ“ä½œï¼Œä¹Ÿèƒ½å†™å‡ºç®€å•çš„Luaè„šæœ¬ï¼Œä½†é¢å¯¹çº¿ä¸Šæ…¢æŸ¥è¯¢é—®é¢˜æ—¶ï¼Œå´ä¸çŸ¥é“ä»ä½•ä¸‹æ‰‹ã€‚åˆ«æ‹…å¿ƒï¼Œæˆ‘ä¼šå¸¦ä½ ä»é›¶å¼€å§‹ï¼Œé€æ­¥æŒæ¡æ…¢æŸ¥è¯¢çš„åˆ†æä¸ä¼˜åŒ–æŠ€å·§ã€‚æ–‡ç« çš„æ ¸å¿ƒäº®ç‚¹åœ¨äºï¼š</p>
<ul>
<li><strong>å®æˆ˜å¯¼å‘</strong>ï¼šä»å‘ç°é—®é¢˜åˆ°ä¼˜åŒ–è½åœ°ï¼Œæä¾›ä¸€æ­¥æ­¥å¯æ“ä½œçš„æ–¹æ¡ˆã€‚</li>
<li><strong>é¡¹ç›®ç»éªŒ</strong>ï¼šåˆ†äº«çœŸå®æ¡ˆä¾‹å’Œè¸©å‘æ•™è®­ï¼Œè®©ä½ å°‘èµ°å¼¯è·¯ã€‚</li>
<li><strong>ä»£ç ç¤ºä¾‹</strong>ï¼šæä¾›å¯ç›´æ¥å¤ç”¨çš„è„šæœ¬å’Œå‘½ä»¤ï¼Œæ‹¿æ¥å³ç”¨ã€‚</li>
</ul>
<p>æ— è®ºä½ æ˜¯æƒ³æå‡æŠ€æœ¯èƒ½åŠ›ï¼Œè¿˜æ˜¯å‡†å¤‡åº”å¯¹ä¸‹ä¸€æ¬¡çº¿ä¸Šäº‹æ•…ï¼Œè¿™ç¯‡æ–‡ç« éƒ½å°†æ˜¯ä½ çš„â€œå®æˆ˜æŒ‡å—â€ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä»æ…¢æŸ¥è¯¢çš„åŸºç¡€çŸ¥è¯†å…¥æ‰‹ï¼Œé€æ­¥æ·±å…¥åˆ°åˆ†æå·¥å…·ã€ä¼˜åŒ–ç­–ç•¥å’Œå®Œæ•´æ’æŸ¥æµç¨‹ã€‚å¸Œæœ›ä½ åœ¨è¯»å®Œåï¼Œä¸ä»…èƒ½ç†è§£æ…¢æŸ¥è¯¢çš„æœ¬è´¨ï¼Œè¿˜èƒ½è‡ªä¿¡åœ°è§£å†³å®é™…é—®é¢˜ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ï¼</p>
<p><strong>è¿‡æ¸¡åˆ°ä¸‹ä¸€èŠ‚</strong>ï¼šåœ¨æ·±å…¥åˆ†æå’Œä¼˜åŒ–ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè¦æ‰“å¥½åŸºç¡€â€”â€”ç†è§£ä»€ä¹ˆæ˜¯æ…¢æŸ¥è¯¢ï¼Œä»¥åŠRedisæ˜¯å¦‚ä½•è®°å½•å®ƒä»¬çš„ã€‚åªæœ‰æŒæ¡è¿™äº›åŸºæœ¬æ¦‚å¿µï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨åç»­ç« èŠ‚ä¸­æ¸¸åˆƒæœ‰ä½™åœ°æ’æŸ¥å’Œè§£å†³é—®é¢˜ã€‚</p>
<hr/>
<h4 data-id="heading-1">äºŒã€Redisæ…¢æŸ¥è¯¢åŸºç¡€çŸ¥è¯†</h4>
<p>Redisçš„æ…¢æŸ¥è¯¢é—®é¢˜çœ‹ä¼¼å¤æ‚ï¼Œä½†æœ¬è´¨ä¸Šå¹¶ä¸ç¥ç§˜ã€‚åªè¦æŒæ¡å®ƒçš„å®šä¹‰ã€å·¥ä½œåŸç†å’Œæ½œåœ¨å½±å“ï¼Œä½ å°±èƒ½ä¸ºåç»­çš„åˆ†æä¸ä¼˜åŒ–æ‰“ä¸‹åšå®åŸºç¡€ã€‚æœ¬èŠ‚å°†å¸¦ä½ äº†è§£æ…¢æŸ¥è¯¢çš„åŸºæœ¬æ¦‚å¿µï¼Œå‰–æRedisçš„æ—¥å¿—æœºåˆ¶ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªçœŸå®åœºæ™¯è¯´æ˜ä¸ºä½•æ…¢æŸ¥è¯¢å€¼å¾—æˆ‘ä»¬é‡è§†ã€‚</p>
<h5 data-id="heading-2">1. ä»€ä¹ˆæ˜¯Redisæ…¢æŸ¥è¯¢</h5>
<p>ç®€å•æ¥è¯´ï¼ŒRedisä¸­çš„æ…¢æŸ¥è¯¢æ˜¯æŒ‡æ‰§è¡Œæ—¶é—´è¶…è¿‡æŸä¸ªé˜ˆå€¼çš„å‘½ä»¤ã€‚å°±åƒä¸€åœºé©¬æ‹‰æ¾ï¼Œè·‘å¾—å¤ªæ…¢çš„é€‰æ‰‹ä¼šè¢«ç‰¹åˆ«æ ‡è®°ï¼Œæ…¢æŸ¥è¯¢ä¹Ÿæ˜¯å¦‚æ­¤ã€‚Redisé€šè¿‡ä¸¤ä¸ªå…³é”®é…ç½®å‚æ•°æ¥å®šä¹‰å’Œç®¡ç†å®ƒï¼š</p>
<ul>
<li><strong><code>slowlog-log-slower-than</code></strong>ï¼šæ…¢æŸ¥è¯¢çš„é˜ˆå€¼ï¼Œå•ä½æ˜¯å¾®ç§’ï¼ˆÎ¼sï¼‰ã€‚æ¯”å¦‚è®¾ç½®ä¸º10000ï¼ˆå³10æ¯«ç§’ï¼‰ï¼Œä»»ä½•æ‰§è¡Œæ—¶é—´è¶…è¿‡10msçš„å‘½ä»¤éƒ½ä¼šè¢«è®°å½•ã€‚</li>
<li><strong><code>slowlog-max-len</code></strong>ï¼šæ…¢æŸ¥è¯¢æ—¥å¿—çš„æœ€å¤§æ¡æ•°ï¼Œé‡‡ç”¨å¾ªç¯é˜Ÿåˆ—å­˜å‚¨ï¼Œè¶…å‡ºæ—¶ä¼šè¦†ç›–æœ€æ—©çš„è®°å½•ã€‚</li>
</ul>
<p>å‡è®¾ä½ æŠŠé˜ˆå€¼è®¾ä¸º5msï¼Œæ—¥å¿—é•¿åº¦è®¾ä¸º100ï¼Œé‚£ä¹ˆRedisä¼šè®°å½•æœ€è¿‘100æ¡æ‰§è¡Œæ—¶é—´è¶…è¿‡5msçš„å‘½ä»¤ã€‚è¿™ä¸¤ä¸ªå‚æ•°å¯ä»¥åœ¨<code>redis.conf</code>ä¸­é…ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<code>CONFIG SET</code>å‘½ä»¤åŠ¨æ€è°ƒæ•´ã€‚</p>
<h5 data-id="heading-3">2. æ…¢æŸ¥è¯¢æ—¥å¿—çš„å·¥ä½œåŸç†</h5>
<p>Redisçš„æ…¢æŸ¥è¯¢æ—¥å¿—ç”±<code>SLOWLOG</code>æœºåˆ¶é©±åŠ¨ï¼Œå†…ç½®äºRedisæ ¸å¿ƒï¼Œæ— éœ€é¢å¤–æ’ä»¶ã€‚å®ƒå°±åƒä¸€ä¸ªâ€œé»‘åŒ£å­â€ï¼Œé»˜é»˜è®°å½•æ¯æ¬¡â€œè¶…é€Ÿâ€çš„å‘½ä»¤ç»†èŠ‚ã€‚æ—¥å¿—çš„è®°å½•è¿‡ç¨‹éå¸¸é«˜æ•ˆï¼Œä¸ä¼šæ˜¾è‘—å½±å“Redisçš„æ€§èƒ½ã€‚å…·ä½“æ¥è¯´ï¼Œæ¯æ¬¡å‘½ä»¤æ‰§è¡Œåï¼ŒRedisä¼šï¼š</p>
<ol>
<li>è®¡ç®—å‘½ä»¤çš„æ‰§è¡Œæ—¶é—´ï¼ˆä¸åŒ…æ‹¬ç½‘ç»œä¼ è¾“æ—¶é—´ï¼‰ã€‚</li>
<li>å¦‚æœè¶…è¿‡é˜ˆå€¼ï¼Œå°±å°†å…¶å†™å…¥æ…¢æŸ¥è¯¢æ—¥å¿—ã€‚</li>
</ol>
<p>ä½ å¯ä»¥ç”¨<code>SLOWLOG GET [n]</code>å‘½ä»¤æŸ¥çœ‹æ—¥å¿—ï¼Œå…¶ä¸­<code>n</code>æŒ‡å®šè¿”å›çš„æ¡æ•°ã€‚æ¯æ¡æ—¥å¿—åŒ…å«ä»¥ä¸‹å­—æ®µï¼š</p>








































<table><thead><tr><th>å­—æ®µå</th><th>å«ä¹‰</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td>id</td><td>æ—¥å¿—çš„å”¯ä¸€æ ‡è¯†</td><td>12345</td></tr><tr><td>timestamp</td><td>å‘½ä»¤æ‰§è¡Œçš„æ—¶é—´æˆ³</td><td>1617182400</td></tr><tr><td>duration</td><td>æ‰§è¡Œè€—æ—¶ï¼ˆå¾®ç§’ï¼‰</td><td>15234</td></tr><tr><td>command</td><td>å®Œæ•´å‘½ä»¤åŠå…¶å‚æ•°</td><td>"HGETALL user:1001"</td></tr><tr><td>client_addr</td><td>å®¢æˆ·ç«¯åœ°å€ï¼ˆå¯é€‰ï¼‰</td><td>"127.0.0.1:54321"</td></tr><tr><td>client_name</td><td>å®¢æˆ·ç«¯åç§°ï¼ˆå¯é€‰ï¼‰</td><td>"web-app"</td></tr></tbody></table>
<p><strong>ç¤ºæ„å›¾</strong>ï¼šæ…¢æŸ¥è¯¢æ—¥å¿—è®°å½•æµç¨‹</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[å‘½ä»¤æ‰§è¡Œ]</span> â†’ <span class="hljs-selector-attr">[è®¡ç®—è€—æ—¶]</span> â†’ <span class="hljs-selector-attr">[æ¯”å¯¹é˜ˆå€¼]</span> â†’ <span class="hljs-selector-attr">[è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—]</span> â†’ <span class="hljs-selector-attr">[å­˜å‚¨åˆ°å¾ªç¯é˜Ÿåˆ—]</span>
</code></pre>
<h5 data-id="heading-4">3. ä¸ºä½•è¦å…³æ³¨æ…¢æŸ¥è¯¢</h5>
<p>æ…¢æŸ¥è¯¢çš„å½±å“è¿œä¸æ­¢â€œå‘½ä»¤è·‘å¾—æ…¢â€è¿™ä¹ˆç®€å•ã€‚å®ƒå°±åƒæ°´ç®¡ä¸­çš„å µå¡ç‚¹ï¼Œå¯èƒ½å¯¼è‡´ç³»ç»Ÿå»¶è¿Ÿä¸Šå‡ã€ååé‡ä¸‹é™ï¼Œç”šè‡³å¼•å‘ä¸šåŠ¡æ•…éšœã€‚ä»¥ä¸€ä¸ªç”µå•†ç§’æ€åœºæ™¯ä¸ºä¾‹ï¼šå‡è®¾æŸä¸ªæ´»åŠ¨ä¸­æœ‰å¤§é‡ç”¨æˆ·æŸ¥è¯¢åº“å­˜ï¼Œå¼€å‘è€…ä¸å°å¿ƒç”¨äº†<code>KEYS *</code>å‘½ä»¤æ‰«ææ‰€æœ‰é”®ï¼Œç»“æœæ¯æ¬¡æ‰§è¡Œè€—æ—¶50msã€‚åœ¨é«˜å¹¶å‘ä¸‹ï¼Œè¿™ä¸ä»…æ‹–æ…¢äº†å“åº”ï¼Œè¿˜å ç”¨äº†Redisçš„å•çº¿ç¨‹å¤„ç†èƒ½åŠ›ï¼Œæœ€ç»ˆå¯¼è‡´è¯·æ±‚å †ç§¯ï¼Œç”¨æˆ·ä½“éªŒç›´çº¿ä¸‹é™ã€‚</p>
<p>æˆ‘åœ¨ä¸€æ¬¡é¡¹ç›®ä¸­å°±é‡åˆ°è¿‡ç±»ä¼¼é—®é¢˜ã€‚å½“æ—¶ç³»ç»ŸQPSä»å¹³æ—¶çš„5000éª¤é™åˆ°1000ï¼Œæ’æŸ¥åå‘ç°æ˜¯æŸä¸ªå¤§Hashçš„<code>HGETALL</code>æ“ä½œå¼•å‘çš„æ…¢æŸ¥è¯¢ã€‚è§£å†³åï¼Œæ€§èƒ½æ¢å¤ä¸è¯´ï¼Œç”¨æˆ·çš„æŠ•è¯‰ä¹Ÿæ˜æ˜¾å‡å°‘ã€‚è¿™è®©æˆ‘æ·±åˆ»ä½“ä¼šåˆ°ï¼šæ…¢æŸ¥è¯¢ä¸ä»…æ˜¯æŠ€æœ¯ç»†èŠ‚ï¼Œæ›´æ˜¯ä¸šåŠ¡ç¨³å®šçš„å‘½è„‰ã€‚</p>
<p><strong>è¿‡æ¸¡åˆ°ä¸‹ä¸€èŠ‚</strong>ï¼šç°åœ¨ä½ å·²ç»äº†è§£äº†æ…¢æŸ¥è¯¢çš„å®šä¹‰å’ŒåŸç†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†è¿›å…¥å®æˆ˜ç¯èŠ‚â€”â€”å¦‚ä½•è·å–å’Œåˆ†ææ…¢æŸ¥è¯¢æ—¥å¿—ã€‚é€šè¿‡å…·ä½“çš„å·¥å…·å’Œæ–¹æ³•ï¼Œä½ å°†å­¦ä¼šä»æµ·é‡å‘½ä»¤ä¸­æ‰¾å‡ºâ€œç½ªé­ç¥¸é¦–â€ï¼Œä¸ºä¼˜åŒ–æ‰“ä¸‹åŸºç¡€ã€‚è®©æˆ‘ä»¬ç»§ç»­å‰è¡Œï¼</p>
<hr/>
<h4 data-id="heading-5">ä¸‰ã€æ…¢æŸ¥è¯¢åˆ†æçš„æ ¸å¿ƒå·¥å…·ä¸æ–¹æ³•</h4>
<p>äº†è§£äº†æ…¢æŸ¥è¯¢çš„åŸºç¡€çŸ¥è¯†åï¼Œæˆ‘ä»¬ç»ˆäºè¦è¿›å…¥å®æˆ˜ç¯èŠ‚äº†ã€‚åˆ†ææ…¢æŸ¥è¯¢å°±åƒä¾¦æ¢ç ´æ¡ˆï¼Œéœ€è¦ä»çº¿ç´¢ï¼ˆæ—¥å¿—ï¼‰å…¥æ‰‹ï¼Œç»“åˆå·¥å…·å’Œç»éªŒï¼Œæ‰¾å‡ºæ€§èƒ½ç“¶é¢ˆçš„æ ¹æºã€‚æœ¬èŠ‚å°†å¸¦ä½ æŒæ¡è·å–æ…¢æŸ¥è¯¢æ—¥å¿—çš„æ–¹æ³•ï¼Œå‰–æå¸¸è§çš„æ…¢æŸ¥è¯¢æ¨¡å¼ï¼Œå¹¶åˆ†äº«å¦‚ä½•å€ŸåŠ©å¤–éƒ¨å·¥å…·æå‡æ•ˆç‡ã€‚æœ‰äº†è¿™äº›æŠ€èƒ½ï¼Œä½ å°±èƒ½è¿…é€Ÿé”å®šé—®é¢˜ï¼Œä¸ºä¼˜åŒ–åšå¥½å‡†å¤‡ã€‚</p>
<h5 data-id="heading-6">1. è·å–æ…¢æŸ¥è¯¢æ—¥å¿—</h5>
<p>Redisæä¾›äº†å†…ç½®å‘½ä»¤<code>SLOWLOG GET</code>æ¥æŸ¥çœ‹æ…¢æŸ¥è¯¢è®°å½•ï¼Œè¿™æ˜¯åˆ†æçš„ç¬¬ä¸€æ­¥ã€‚å®ƒçš„ç”¨æ³•å¾ˆç®€å•ï¼Œæ¯”å¦‚<code>SLOWLOG GET 10</code>ä¼šè¿”å›æœ€è¿‘10æ¡æ…¢æŸ¥è¯¢æ—¥å¿—ã€‚ä¸ºäº†æ–¹ä¾¿è‡ªåŠ¨åŒ–åˆ†æï¼Œæˆ‘é€šå¸¸ä¼šç”¨è„šæœ¬æ‰¹é‡æ‹‰å–æ—¥å¿—ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªPythonç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> redis

<span class="hljs-comment"># è¿æ¥Rediså®ä¾‹</span>
r = redis.Redis(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">0</span>)

<span class="hljs-comment"># è·å–æœ€è¿‘10æ¡æ…¢æŸ¥è¯¢æ—¥å¿—</span>
slow_logs = r.slowlog_get(<span class="hljs-number">10</span>)

<span class="hljs-comment"># éå†å¹¶æ‰“å°æ—¥å¿—è¯¦æƒ…</span>
<span class="hljs-keyword">for</span> log <span class="hljs-keyword">in</span> slow_logs:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ID: <span class="hljs-subst">{log[<span class="hljs-string">'id'</span>]}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Timestamp: <span class="hljs-subst">{log[<span class="hljs-string">'timestamp'</span>]}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Command: <span class="hljs-subst">{log[<span class="hljs-string">'command'</span>].decode(<span class="hljs-string">'utf-8'</span>)}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Duration: <span class="hljs-subst">{log[<span class="hljs-string">'duration'</span>]}</span>Î¼s"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Client: <span class="hljs-subst">{log.get(<span class="hljs-string">'client_addr'</span>, <span class="hljs-string">'N/A'</span>)}</span>"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span> * <span class="hljs-number">30</span>)
</code></pre>
<p><strong>ä»£ç æ³¨é‡Šè¯´æ˜</strong>ï¼š</p>
<ul>
<li><code>redis.Redis</code>ï¼šåˆå§‹åŒ–Rediså®¢æˆ·ç«¯è¿æ¥ã€‚</li>
<li><code>slowlog_get(10)</code>ï¼šè·å–æœ€è¿‘10æ¡æ…¢æŸ¥è¯¢ï¼Œè¿”å›ä¸€ä¸ªåˆ—è¡¨ã€‚</li>
<li><code>log['command'].decode('utf-8')</code>ï¼šå‘½ä»¤ä»¥å­—èŠ‚å½¢å¼å­˜å‚¨ï¼Œéœ€è§£ç ä¸ºå­—ç¬¦ä¸²ã€‚</li>
<li><code>log.get('client_addr', 'N/A')</code>ï¼šå®¢æˆ·ç«¯åœ°å€å¯èƒ½ä¸ºç©ºï¼Œç”¨<code>get</code>é¿å…æŠ¥é”™ã€‚</li>
</ul>
<p>è¿è¡Œåï¼Œä½ ä¼šçœ‹åˆ°æ¯æ¡æ…¢æŸ¥è¯¢çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ¯”å¦‚æŸä¸ª<code>HGETALL</code>è€—æ—¶15234å¾®ç§’ã€‚æŒæ¡è¿™ä¸ªæ–¹æ³•åï¼Œä½ å°±å¯ä»¥å®šæœŸæ£€æŸ¥æ—¥å¿—ï¼Œå¿«é€Ÿå‘ç°å¼‚å¸¸ã€‚</p>
<h5 data-id="heading-7">2. åˆ†ææ…¢æŸ¥è¯¢çš„å¸¸è§æ¨¡å¼</h5>
<p>æ…¢æŸ¥è¯¢çš„â€œç½ªé­ç¥¸é¦–â€é€šå¸¸é€ƒä¸å‡ºå‡ ç§æ¨¡å¼ã€‚ä»¥ä¸‹æ˜¯ä¸‰ç§å¸¸è§ç±»å‹ï¼Œä»¥åŠæˆ‘åœ¨é¡¹ç›®ä¸­æ€»ç»“çš„ç‰¹å¾ï¼š</p>
<ul>
<li>
<p><strong>é«˜é¢‘å‘½ä»¤</strong><br/>
å¦‚<code>KEYS *</code>æˆ–<code>HGETALL</code>ï¼Œè¿™äº›å‘½ä»¤å¤æ‚åº¦é«˜ï¼ˆO(N)çº§åˆ«ï¼‰ï¼Œåœ¨æ•°æ®é‡å¤§æ—¶ææ˜“å˜æ…¢ã€‚æ¯”å¦‚<code>KEYS *</code>ä¼šæ‰«ææ‰€æœ‰é”®ï¼Œçº¿ä¸Šç¯å¢ƒå‡ ä¹æ˜¯â€œç¦å¿Œâ€ã€‚</p>
</li>
<li>
<p><strong>å¤§æ•°æ®é‡æ“ä½œ</strong><br/>
æ“ä½œå¤§Hashã€å¤§Listæˆ–å¤§Setæ—¶ï¼Œæ¯”å¦‚<code>LRANGE 0 -1</code>è·å–æ•´ä¸ªåˆ—è¡¨ï¼Œæˆ–è€…<code>HGETALL</code>è¯»å–ä¸Šåƒå­—æ®µçš„Hashï¼Œè€—æ—¶ä¼šæ˜¾è‘—å¢åŠ ã€‚</p>
</li>
<li>
<p><strong>ç½‘ç»œå»¶è¿Ÿä¸å®¢æˆ·ç«¯é—®é¢˜</strong><br/>
æœ‰æ—¶æ…¢æŸ¥è¯¢å¹¶éRedisæœ¬èº«é—®é¢˜ï¼Œè€Œæ˜¯å®¢æˆ·ç«¯è¿æ¥é¢‘ç¹æ–­å¼€é‡è¿ï¼Œæˆ–ç½‘ç»œæŠ–åŠ¨å¯¼è‡´çš„é¢å¤–å¼€é”€ã€‚</p>
</li>
</ul>
<p><strong>è¡¨æ ¼</strong>ï¼šå¸¸è§æ…¢æŸ¥è¯¢æ¨¡å¼å¯¹æ¯”</p>

































<table><thead><tr><th>ç±»å‹</th><th>ç¤ºä¾‹å‘½ä»¤</th><th>å¤æ‚åº¦</th><th>å…¸å‹åœºæ™¯</th><th>å½±å“</th></tr></thead><tbody><tr><td>é«˜é¢‘å‘½ä»¤</td><td><code>KEYS *</code></td><td>O(N)</td><td>å…¨é‡é”®æ‰«æ</td><td>CPUå ç”¨é«˜</td></tr><tr><td>å¤§æ•°æ®é‡æ“ä½œ</td><td><code>HGETALL</code></td><td>O(N)</td><td>å¤§Hashè¯»å–</td><td>å»¶è¿Ÿä¸Šå‡</td></tr><tr><td>ç½‘ç»œé—®é¢˜</td><td>-</td><td>-</td><td>å®¢æˆ·ç«¯è¿æ¥ä¸ç¨³å®š</td><td>ååé‡ä¸‹é™</td></tr></tbody></table>
<p>é€šè¿‡åˆ†ææ—¥å¿—ä¸­çš„<code>command</code>å’Œ<code>duration</code>ï¼Œä½ å¯ä»¥å¿«é€Ÿåˆ¤æ–­é—®é¢˜å±äºå“ªç±»ã€‚æ¯”å¦‚æˆ‘æ›¾å‘ç°æŸæœåŠ¡é¢‘ç¹è°ƒç”¨<code>KEYS user:*</code>ï¼Œè€—æ—¶é«˜è¾¾200msï¼Œç›´æ¥æ‹–å®äº†QPSã€‚</p>
<h5 data-id="heading-8">3. å€ŸåŠ©å¤–éƒ¨å·¥å…·æå‡æ•ˆç‡</h5>
<p>é™¤äº†Redisè‡ªå¸¦çš„<code>SLOWLOG</code>ï¼Œå¤–éƒ¨å·¥å…·ä¹Ÿèƒ½å¸®ä½ äº‹åŠåŠŸå€ã€‚ä»¥ä¸‹æ˜¯å‡ ç§é€‰æ‹©åŠå…¶å¯¹æ¯”ï¼š</p>
<ul>
<li>
<p><strong>redis-cli</strong><br/>
ç›´æ¥åœ¨ç»ˆç«¯è¿è¡Œ<code>SLOWLOG GET</code>ï¼Œé€‚åˆä¸´æ—¶æ’æŸ¥ï¼Œä½†ä¸æ–¹ä¾¿é•¿æœŸç›‘æ§ã€‚</p>
</li>
<li>
<p><strong>RedisInsight</strong><br/>
ä¸€ä¸ªå›¾å½¢åŒ–å·¥å…·ï¼Œèƒ½å¯è§†åŒ–æ…¢æŸ¥è¯¢è¶‹åŠ¿ï¼Œè¿˜æ”¯æŒå‘½ä»¤åˆ†æï¼Œé€‚åˆåˆå­¦è€…ã€‚ä¸è¿‡å¯¹èµ„æºå ç”¨ç¨é«˜ã€‚</p>
</li>
<li>
<p><strong>è„šæœ¬+Grafana</strong><br/>
æˆ‘åœ¨é¡¹ç›®ä¸­æœ€å¸¸ç”¨çš„æ–¹æ¡ˆã€‚é€šè¿‡è„šæœ¬å®šæœŸæ‹‰å–æ…¢æŸ¥è¯¢æ•°æ®ï¼Œæ¨é€åˆ°Prometheusï¼Œå†ç”¨Grafanaç»˜åˆ¶è¶‹åŠ¿å›¾ã€‚æ¯”å¦‚æŸæ¬¡ä¼˜åŒ–å‰ï¼Œæ…¢æŸ¥è¯¢æ•°é‡æ¯å¤©é«˜è¾¾500æ¡ï¼Œä¼˜åŒ–åé™åˆ°50æ¡ï¼Œæ•ˆæœä¸€ç›®äº†ç„¶ã€‚</p>
</li>
</ul>
<p><strong>é¡¹ç›®ç»éªŒ</strong>ï¼šæœ‰ä¸€æ¬¡çº¿ä¸ŠæœåŠ¡å“åº”å˜æ…¢ï¼Œæˆ‘ç”¨è„šæœ¬å‘ç°<code>HGETALL</code>å äº†æ…¢æŸ¥è¯¢çš„80%ã€‚ç»“åˆGrafanaç›‘æ§ï¼Œç¡®è®¤æ˜¯æŸä¸ªå¤§Hashå¼•èµ·çš„ã€‚è¿™è®©æˆ‘æ„è¯†åˆ°ï¼Œå·¥å…·ä¸ä»…èƒ½å‘ç°é—®é¢˜ï¼Œè¿˜èƒ½éªŒè¯ä¼˜åŒ–æ•ˆæœã€‚</p>
<p><strong>ç¤ºæ„å›¾</strong>ï¼šæ…¢æŸ¥è¯¢åˆ†ææµç¨‹</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[æ‹‰å–æ—¥å¿—: SLOWLOG GET]</span> â†’ <span class="hljs-selector-attr">[åˆ†ææ¨¡å¼: é«˜é¢‘/å¤§æ•°æ®/ç½‘ç»œ]</span> â†’ <span class="hljs-selector-attr">[å€ŸåŠ©å·¥å…·: redis-cli æˆ– Grafana]</span> â†’ <span class="hljs-selector-attr">[å®šä½é—®é¢˜]</span>
</code></pre>
<p><strong>è¿‡æ¸¡åˆ°ä¸‹ä¸€èŠ‚</strong>ï¼šé€šè¿‡æœ¬èŠ‚ï¼Œä½ å·²ç»å­¦ä¼šå¦‚ä½•è·å–å’Œåˆ†ææ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œå¹¶èƒ½è¯†åˆ«å¸¸è§é—®é¢˜æ¨¡å¼ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†è¿›å…¥ä¼˜åŒ–å®æˆ˜ï¼Œæ¢è®¨å¦‚ä½•é€šè¿‡å‘½ä»¤è°ƒæ•´ã€æ•°æ®ç»“æ„ä¼˜åŒ–å’Œå®¢æˆ·ç«¯é…ç½®ï¼Œå½»åº•è§£å†³è¿™äº›æ€§èƒ½ç“¶é¢ˆã€‚å‡†å¤‡å¥½åŠ¨æ‰‹ä¼˜åŒ–äº†å—ï¼Ÿè®©æˆ‘ä»¬ç»§ç»­ï¼</p>
<hr/>
<h4 data-id="heading-9">å››ã€æ…¢æŸ¥è¯¢ä¼˜åŒ–çš„å®æˆ˜ç­–ç•¥</h4>
<p>åˆ†æå‡ºæ…¢æŸ¥è¯¢çš„â€œå…ƒå‡¶â€åªæ˜¯ç¬¬ä¸€æ­¥ï¼ŒçœŸæ­£è§£å†³é—®é¢˜è¿˜å¾—é ä¼˜åŒ–ã€‚ä¼˜åŒ–Redisæ…¢æŸ¥è¯¢å°±åƒä¿®å‰ªä¸€æ£µå¤§æ ‘ï¼Œæ—¢è¦å‰ªæ‰å¤šä½™çš„æå¶ï¼ˆä½æ•ˆå‘½ä»¤ï¼‰ï¼Œä¹Ÿè¦è°ƒæ•´æ ¹ç³»ï¼ˆæ•°æ®ç»“æ„ï¼‰ï¼Œç”šè‡³æ”¹å–„åœŸå£¤ï¼ˆå®¢æˆ·ç«¯é…ç½®ï¼‰ã€‚æœ¬èŠ‚å°†é€šè¿‡å…·ä½“æ¡ˆä¾‹å’Œä»£ç ï¼Œå¸¦ä½ æŒæ¡å‘½ä»¤é€‰æ‹©ã€æ•°æ®ç»“æ„è°ƒæ•´å’Œå®¢æˆ·ç«¯ä¼˜åŒ–çš„å®æˆ˜ç­–ç•¥ï¼Œå¹¶åˆ†äº«æˆ‘åœ¨é¡¹ç›®ä¸­è¸©è¿‡çš„å‘ä¸è§£å†³æ–¹æ¡ˆã€‚å‡†å¤‡å¥½åŠ¨æ‰‹äº†å—ï¼Ÿè®©æˆ‘ä»¬å¼€å§‹ä¼˜åŒ–ä¹‹æ—…ï¼</p>
<h5 data-id="heading-10">1. ä¼˜åŒ–å‘½ä»¤é€‰æ‹©</h5>
<p>Redisæä¾›äº†ä¸°å¯Œçš„å‘½ä»¤ï¼Œä½†å¹¶éæ¯æ¡éƒ½é€‚åˆé«˜å¹¶å‘åœºæ™¯ã€‚ä»¥ä¸‹æ˜¯ä¸¤ä¸ªå¸¸è§æ¡ˆä¾‹çš„ä¼˜åŒ–æ–¹æ¡ˆï¼š</p>
<ul>
<li>
<p><strong>æ¡ˆä¾‹1ï¼šå°† <code>KEYS *</code> æ›¿æ¢ä¸º <code>SCAN</code></strong><br/>
<code>KEYS *</code>æ˜¯ä¸ªâ€œå…¨å®¶æ¡¶â€å‘½ä»¤ï¼Œä¼šä¸€æ¬¡æ€§æ‰«ææ‰€æœ‰é”®ï¼Œå¤æ‚åº¦O(N)ï¼Œæ•°æ®é‡å¤§æ—¶ææ˜“å¼•å‘æ…¢æŸ¥è¯¢ã€‚æˆ‘æ›¾åœ¨æŸé¡¹ç›®ä¸­çœ‹åˆ°å®ƒè€—æ—¶300msï¼Œç›´æ¥æ‹–æ…¢äº†æœåŠ¡ã€‚ä¼˜åŒ–æ–¹æ¡ˆæ˜¯ç”¨<code>SCAN</code>ï¼Œå®ƒæ”¯æŒåˆ†æ‰¹è¿­ä»£ï¼Œæ€§èƒ½æ›´ç¨³å®šï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é”™è¯¯ç”¨æ³•ï¼šå…¨é‡æ‰«æï¼Œè€—æ—¶é•¿</span>
KEYS user:*

<span class="hljs-comment"># ä¼˜åŒ–åï¼šåˆ†æ‰¹è¿­ä»£ï¼ŒæŒ‡å®šæ¯æ¬¡è¿”å›100æ¡</span>
SCAN 0 MATCH user:* COUNT 100
</code></pre>
<p><strong>æ•ˆæœ</strong>ï¼šä¼˜åŒ–åå•æ¬¡è€—æ—¶é™åˆ°5msä»¥ä¸‹ï¼ŒQPSæå‡20%ã€‚</p>
</li>
<li>
<p><strong>æ¡ˆä¾‹2ï¼š<code>HGETALL</code> æ›¿æ¢ä¸º <code>HMGET</code></strong><br/>
<code>HGETALL</code>ä¼šè¿”å›Hashçš„æ‰€æœ‰å­—æ®µï¼Œä½†åœ¨å­—æ®µå¤šæ—¶ï¼ˆå¦‚ä¸Šåƒä¸ªï¼‰æ€§èƒ½å ªå¿§ã€‚æ”¹ä¸º<code>HMGET</code>ï¼Œåªå–éœ€è¦çš„å­—æ®µï¼Œèƒ½æ˜¾è‘—é™ä½å¼€é”€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é”™è¯¯ç”¨æ³•ï¼šè¯»å–æ•´ä¸ªHash</span>
HGETALL user:1001

<span class="hljs-comment"># ä¼˜åŒ–åï¼šåªå–æ‰€éœ€å­—æ®µ</span>
HMGET user:1001 name age
</code></pre>
<p><strong>æ•ˆæœ</strong>ï¼šè€—æ—¶ä»50msé™åˆ°2msï¼Œç‰¹åˆ«é€‚åˆå­—æ®µå›ºå®šçš„åœºæ™¯ã€‚</p>
</li>
</ul>
<h5 data-id="heading-11">2. æ•°æ®ç»“æ„ä¼˜åŒ–</h5>
<p>Redisçš„æ€§èƒ½å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºæ•°æ®ç»“æ„é€‰æ‹©ã€‚ä»¥ä¸‹æ˜¯ä¸¤ä¸ªå®ç”¨ä¼˜åŒ–ï¼š</p>
<ul>
<li>
<p><strong>å¤§Listæ‹†åˆ†ä¸ºå°List</strong><br/>
ä¸€ä¸ªåŒ…å«10ä¸‡å…ƒç´ çš„Listç”¨<code>LRANGE 0 -1</code>è¯»å–ï¼Œè€—æ—¶å¯èƒ½é«˜è¾¾ç§’çº§ã€‚æˆ‘çš„è§£å†³åŠæ³•æ˜¯æŒ‰ä¸šåŠ¡é€»è¾‘æ‹†åˆ†ï¼Œæ¯”å¦‚æŒ‰æ—¥æœŸå­˜ä¸º<code>list:20250408</code>ï¼Œæ¯æ®µæ§åˆ¶åœ¨1000æ¡ä»¥å†…ã€‚è¯»å–æ—¶åªå–ç‰¹å®šæ®µï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¼˜åŒ–å‰ï¼šè¯»å–æ•´ä¸ªå¤§List</span>
LRANGE big_list 0 -1

<span class="hljs-comment"># ä¼˜åŒ–åï¼šåˆ†æ®µè¯»å–</span>
LRANGE list:20250408 0 999
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨Setæ›¿ä»£List</strong><br/>
åœ¨éœ€è¦å»é‡çš„åœºæ™¯ä¸‹ï¼ŒListçš„<code>LREM</code>æ“ä½œå¤æ‚åº¦ä¸ºO(N)ï¼Œè€ŒSetçš„<code>SREM</code>ä»…O(1)ã€‚æˆ‘æ›¾å°†æŸæ’è¡Œæ¦œä»Listæ”¹ä¸ºSetï¼Œæ…¢æŸ¥è¯¢æ•°é‡å‡å°‘80%ã€‚</p>
</li>
</ul>
<p><strong>è¡¨æ ¼</strong>ï¼šæ•°æ®ç»“æ„ä¼˜åŒ–å¯¹æ¯”</p>


























<table><thead><tr><th>åœºæ™¯</th><th>åŸç»“æ„/å‘½ä»¤</th><th>ä¼˜åŒ–åç»“æ„/å‘½ä»¤</th><th>å¤æ‚åº¦å˜åŒ–</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td>å¤§Listè¯»å–</td><td>List / <code>LRANGE</code></td><td>å¤šå°List / <code>LRANGE</code></td><td>O(N) â†’ O(1)</td><td>è€—æ—¶é™ä½90%</td></tr><tr><td>å»é‡æ“ä½œ</td><td>List / <code>LREM</code></td><td>Set / <code>SREM</code></td><td>O(N) â†’ O(1)</td><td>æ€§èƒ½æå‡10å€</td></tr></tbody></table>
<h5 data-id="heading-12">3. å®¢æˆ·ç«¯ä¸è¿æ¥ä¼˜åŒ–</h5>
<p>æ…¢æŸ¥è¯¢æœ‰æ—¶å¹¶éRedisæœ¬èº«é—®é¢˜ï¼Œè€Œæ˜¯å®¢æˆ·ç«¯é…ç½®ä¸å½“ã€‚ä»¥ä¸‹æ˜¯ä¸¤æ‹›å®ç”¨ä¼˜åŒ–ï¼š</p>
<ul>
<li>
<p><strong>è¿æ¥æ± é…ç½®</strong><br/>
é¢‘ç¹å»ºç«‹/é‡Šæ”¾è¿æ¥ä¼šå¢åŠ ç½‘ç»œå¼€é”€ã€‚ä½¿ç”¨è¿æ¥æ± èƒ½å¤ç”¨è¿æ¥ï¼Œå‡å°‘æ…¢æŸ¥è¯¢ã€‚æˆ‘å¸¸ç”¨Pythonçš„<code>redis-py</code>é…ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> redis

<span class="hljs-comment"># é…ç½®è¿æ¥æ± </span>
pool = redis.ConnectionPool(host=<span class="hljs-string">'localhost'</span>, port=<span class="hljs-number">6379</span>, db=<span class="hljs-number">0</span>, max_connections=<span class="hljs-number">100</span>)
r = redis.Redis(connection_pool=pool)
</code></pre>
</li>
<li>
<p><strong>Pipelineæ‰¹é‡æ“ä½œ</strong><br/>
å•æ¡å‘½ä»¤çš„ç½‘ç»œå¾€è¿”ï¼ˆRTTï¼‰å¯èƒ½åªæœ‰1msï¼Œä½†åœ¨é«˜é¢‘åœºæ™¯ä¸‹ç´¯ç§¯ä¸¥é‡ã€‚Pipelineå°†å¤šæ¡å‘½ä»¤æ‰“åŒ…å‘é€ï¼Œå‡å°‘RTTï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">with</span> r.pipeline() <span class="hljs-keyword">as</span> pipe:
    pipe.<span class="hljs-built_in">set</span>(<span class="hljs-string">'key1'</span>, <span class="hljs-string">'value1'</span>)
    pipe.<span class="hljs-built_in">set</span>(<span class="hljs-string">'key2'</span>, <span class="hljs-string">'value2'</span>)
    pipe.execute()  <span class="hljs-comment"># ä¸€æ¬¡æ€§æ‰§è¡Œ</span>
</code></pre>
<p><strong>æ•ˆæœ</strong>ï¼š1000æ¬¡SETä»2ç§’é™åˆ°50msï¼Œæ•ˆç‡æå‡40å€ã€‚</p>
</li>
</ul>
<h5 data-id="heading-13">4. é¡¹ç›®ç»éªŒåˆ†äº«</h5>
<ul>
<li>
<p><strong>è¸©å‘æ¡ˆä¾‹</strong>ï¼šæŸæ¬¡çº¿ä¸ŠæœåŠ¡QPSä»5000è·Œåˆ°2000ï¼Œæ…¢æŸ¥è¯¢æ—¥å¿—æ˜¾ç¤ºå¤§é‡<code>HGETALL</code>æ“ä½œã€‚æ£€æŸ¥å‘ç°æ˜¯ä¸ªåŒ…å«5000å­—æ®µçš„å¤§Hashã€‚ä¼˜åŒ–æ–¹æ¡ˆæ˜¯å°†Hashåˆ†ç‰‡å­˜å‚¨ä¸ºå¤šä¸ªå°Hashï¼ˆå¦‚<code>user:1001:base</code>å’Œ<code>user:1001:extra</code>ï¼‰ï¼Œå¹¶ç”¨<code>HMGET</code>æ›¿æ¢<code>HGETALL</code>ï¼Œç»“æœQPSæå‡50%ã€‚</p>
</li>
<li>
<p><strong>æœ€ä½³å®è·µ</strong>ï¼š</p>
<ul>
<li><strong>åˆ†ç‰‡å­˜å‚¨</strong>ï¼šå¤§æ•°æ®ç»“æ„æŒ‰ä¸šåŠ¡æ‹†åˆ†ï¼Œå•ç»“æ„å¤§å°æ§åˆ¶åœ¨1MBä»¥å†…ã€‚</li>
<li><strong>å®šæœŸæ¸…ç†</strong>ï¼šç”¨<code>EXPIRE</code>è®¾ç½®è¿‡æœŸæ—¶é—´ï¼Œé¿å…æ— ç”¨æ•°æ®å †ç§¯ã€‚</li>
</ul>
</li>
</ul>
<p><strong>ç¤ºæ„å›¾</strong>ï¼šæ…¢æŸ¥è¯¢ä¼˜åŒ–æµç¨‹</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[è¯†åˆ«é—®é¢˜: KEYS/HGETALL]</span> â†’ <span class="hljs-selector-attr">[ä¼˜åŒ–å‘½ä»¤: SCAN/HMGET]</span> â†’ <span class="hljs-selector-attr">[è°ƒæ•´ç»“æ„: å°List/Set]</span> â†’ <span class="hljs-selector-attr">[å®¢æˆ·ç«¯ä¼˜åŒ–: Pipeline]</span> â†’ <span class="hljs-selector-attr">[éªŒè¯æ•ˆæœ]</span>
</code></pre>
<p><strong>è¿‡æ¸¡åˆ°ä¸‹ä¸€èŠ‚</strong>ï¼šé€šè¿‡å‘½ä»¤è°ƒæ•´ã€æ•°æ®ç»“æ„ä¼˜åŒ–å’Œå®¢æˆ·ç«¯é…ç½®ï¼Œä½ å·²ç»æŒæ¡äº†æ…¢æŸ¥è¯¢ä¼˜åŒ–çš„æ ¸å¿ƒæŠ€èƒ½ã€‚ä½†åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæ€§èƒ½ç“¶é¢ˆå¾€å¾€éœ€è¦ç³»ç»ŸåŒ–æ’æŸ¥ã€‚ä¸‹ä¸€èŠ‚å°†å¸¦ä½ èµ°è¿›å®Œæ•´çš„æ’æŸ¥æµç¨‹ï¼Œä»é—®é¢˜å®šä½åˆ°ä¼˜åŒ–è½åœ°ï¼Œå½»åº•è§£å†³çº¿ä¸Šéš¾é¢˜ã€‚è®©æˆ‘ä»¬ç»§ç»­ï¼</p>
<hr/>
<h4 data-id="heading-14">äº”ã€æ€§èƒ½ç“¶é¢ˆæ’æŸ¥çš„å®Œæ•´æµç¨‹</h4>
<p>ä¼˜åŒ–æ…¢æŸ¥è¯¢çš„ç­–ç•¥å›ºç„¶é‡è¦ï¼Œä½†å®é™…é¡¹ç›®ä¸­ï¼Œæ€§èƒ½ç“¶é¢ˆå¾€å¾€éšè—åœ¨å¤æ‚çš„ç³»ç»Ÿä¸­ï¼Œéœ€è¦ä¸€å¥—ç³»ç»ŸåŒ–çš„æ’æŸ¥æµç¨‹æ¥â€œæŠ½ä¸å‰¥èŒ§â€ã€‚è¿™å°±åƒåŒ»ç”Ÿè¯Šæ–­ç—…æƒ…ï¼Œå¾—å…ˆæ£€æŸ¥ç—‡çŠ¶ï¼ˆæ—¥å¿—ï¼‰ã€åˆ†æç—…å› ï¼ˆæ•°æ®ï¼‰ï¼Œå†å¼€è¯æ–¹ï¼ˆä¼˜åŒ–ï¼‰ã€‚æœ¬èŠ‚å°†å¸¦ä½ èµ°ä¸€éä»é—®é¢˜å®šä½åˆ°ä¼˜åŒ–è½åœ°çš„å®Œæ•´æµç¨‹ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªçœŸå®æ¡ˆä¾‹å±•ç¤ºå¦‚ä½•åœ¨å‹åŠ›ä¸‹å¿«é€Ÿæ¢å¤æœåŠ¡ã€‚</p>
<h5 data-id="heading-15">1. é—®é¢˜å®šä½</h5>
<p>æ’æŸ¥çš„ç¬¬ä¸€æ­¥æ˜¯æ‰¾åˆ°â€œç—›ç‚¹â€ã€‚æ…¢æŸ¥è¯¢æ—¥å¿—æ˜¯æ ¸å¿ƒçº¿ç´¢ï¼Œä½†è¿˜éœ€è¦ç»“åˆç³»ç»Ÿç›‘æ§æ¥å…¨é¢åˆ¤æ–­ã€‚ä»¥ä¸‹æ˜¯æˆ‘å¸¸ç”¨çš„æ–¹æ³•ï¼š</p>
<ul>
<li>
<p><strong>æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—</strong><br/>
ç”¨<code>SLOWLOG GET</code>æŠ“å–æœ€è¿‘çš„æ…¢æŸ¥è¯¢ï¼Œå…³æ³¨è€—æ—¶æœ€é•¿å’Œé«˜é¢‘çš„å‘½ä»¤ã€‚</p>
</li>
<li>
<p><strong>ç³»ç»Ÿç›‘æ§</strong><br/>
æ£€æŸ¥CPUã€å†…å­˜ã€ç½‘ç»œç­‰æŒ‡æ ‡ã€‚æ¯”å¦‚Rediså•çº¿ç¨‹CPUå æ»¡å¯èƒ½è¯´æ˜å‘½ä»¤é˜»å¡ï¼Œç½‘ç»œå»¶è¿Ÿé«˜åˆ™å¯èƒ½æ˜¯å®¢æˆ·ç«¯é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>ç¤ºä¾‹å‘½ä»¤</strong>ï¼šç”¨<code>INFO</code>æŸ¥çœ‹RedisçŠ¶æ€</p>
<pre><code class="hljs language-bash" lang="bash">INFO ALL
<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹ï¼š</span>
<span class="hljs-comment"># used_cpu_sys: 10.5  # ç³»ç»ŸCPUä½¿ç”¨</span>
<span class="hljs-comment"># used_memory: 2G     # å†…å­˜å ç”¨</span>
<span class="hljs-comment"># instantaneous_ops_per_sec: 3000  # å½“å‰QPS</span>
</code></pre>
<p><strong>ç»éªŒ</strong>ï¼šæŸæ¬¡æ”¯ä»˜ç³»ç»ŸQPSä»1ä¸‡é™åˆ°2000ï¼Œæˆ‘å…ˆç”¨<code>SLOWLOG GET</code>å‘ç°å¤§é‡<code>LRANGE</code>è€—æ—¶è¶…50msï¼Œå†ç”¨<code>INFO</code>ç¡®è®¤CPUå ç”¨100%ï¼Œåˆæ­¥é”å®šæ˜¯å¤§æ•°æ®é‡æ“ä½œã€‚</p>
</li>
</ul>
<h5 data-id="heading-16">2. åˆ†æä¸éªŒè¯</h5>
<p>å®šä½é—®é¢˜åï¼Œè¦æ·±å…¥åˆ†æåŸå› å¹¶éªŒè¯å‡è®¾ã€‚ä»¥ä¸‹æ˜¯æˆ‘çš„æ­¥éª¤ï¼š</p>
<ul>
<li>
<p><strong>åˆ†ææ—¥å¿—</strong><br/>
æ£€æŸ¥æ…¢æŸ¥è¯¢çš„å‘½ä»¤æ¨¡å¼ï¼Œæ¯”å¦‚æ˜¯<code>KEYS *</code>è¿˜æ˜¯å¤§Hashæ“ä½œã€‚</p>
</li>
<li>
<p><strong>æ¨¡æ‹Ÿå‹æµ‹</strong><br/>
ç”¨å·¥å…·ï¼ˆå¦‚<code>redis-benchmark</code>ï¼‰é‡ç°é—®é¢˜ï¼ŒéªŒè¯æ˜¯å¦ä¸å¹¶å‘é‡ç›¸å…³ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">redis-benchmark -h localhost -p 6379 -c 50 -n 10000 -q -t LRANGE
<span class="hljs-comment"># -c 50: 50ä¸ªå¹¶å‘å®¢æˆ·ç«¯</span>
<span class="hljs-comment"># -n 10000: æ€»è¯·æ±‚æ•°</span>
<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹ï¼šLRANGE: 5000 req/s</span>
</code></pre>
</li>
<li>
<p><strong>éªŒè¯å‡è®¾</strong><br/>
è°ƒæ•´å‘½ä»¤æˆ–æ•°æ®ç»“æ„åï¼Œè§‚å¯Ÿè€—æ—¶å˜åŒ–ã€‚æ¯”å¦‚å°†<code>LRANGE 0 -1</code>æ”¹ä¸º<code>LRANGE 0 999</code>ï¼Œç¡®è®¤æ€§èƒ½æå‡ã€‚</p>
</li>
</ul>
<h5 data-id="heading-17">3. ä¼˜åŒ–è½åœ°ä¸ç›‘æ§</h5>
<p>æ‰¾åˆ°è§£å†³æ–¹æ¡ˆåï¼Œéƒ¨ç½²ä¼˜åŒ–å¹¶æŒç»­ç›‘æ§æ˜¯å…³é”®ï¼š</p>
<ul>
<li>
<p><strong>éƒ¨ç½²ä¼˜åŒ–</strong><br/>
æ ¹æ®ä¸Šä¸€èŠ‚ç­–ç•¥è°ƒæ•´å‘½ä»¤æˆ–ç»“æ„ï¼Œæ¯”å¦‚ç”¨<code>SCAN</code>æ›¿æ¢<code>KEYS</code>ã€‚æ³¨æ„å°èŒƒå›´æµ‹è¯•ï¼Œé¿å…å½±å“çº¿ä¸ŠæœåŠ¡ã€‚</p>
</li>
<li>
<p><strong>é…ç½®å‘Šè­¦</strong><br/>
è®¾ç½®æ…¢æŸ¥è¯¢æ•°é‡é˜ˆå€¼ï¼ˆå¦‚æ¯å¤©è¶…100æ¡å‘Šè­¦ï¼‰ï¼Œå¯ç”¨è„šæœ¬æ¨é€åˆ°ç›‘æ§ç³»ç»Ÿï¼š</p>
<pre><code class="hljs language-python" lang="python">slow_logs = r.slowlog_get(<span class="hljs-number">100</span>)
<span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(slow_logs) &gt; <span class="hljs-number">100</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Alert: Slow queries exceed threshold!"</span>)
</code></pre>
</li>
<li>
<p><strong>æ³¨æ„äº‹é¡¹</strong><br/>
ä¼˜åŒ–åè§‚å¯Ÿä¸šåŠ¡æŒ‡æ ‡ï¼ˆå¦‚è®¢å•æˆåŠŸç‡ï¼‰ï¼Œç¡®ä¿æ²¡æœ‰å‰¯ä½œç”¨ã€‚</p>
</li>
</ul>
<p><strong>è¡¨æ ¼</strong>ï¼šæ’æŸ¥ä¸ä¼˜åŒ–é˜¶æ®µå¯¹æ¯”</p>





























<table><thead><tr><th>é˜¶æ®µ</th><th>å·¥å…·/å‘½ä»¤</th><th>ç›®æ ‡</th><th>è¾“å‡ºç¤ºä¾‹</th></tr></thead><tbody><tr><td>é—®é¢˜å®šä½</td><td><code>SLOWLOG GET</code>, <code>INFO</code></td><td>é”å®šæ…¢æŸ¥è¯¢å’Œèµ„æºç“¶é¢ˆ</td><td><code>LRANGE</code>è€—æ—¶50ms</td></tr><tr><td>åˆ†æéªŒè¯</td><td><code>redis-benchmark</code></td><td>ç¡®è®¤åŸå› å¹¶æµ‹è¯•ä¼˜åŒ–</td><td>QPSä»2000å‡åˆ°8000</td></tr><tr><td>ä¼˜åŒ–è½åœ°</td><td><code>SCAN</code>, è„šæœ¬å‘Šè­¦</td><td>éƒ¨ç½²å¹¶ç›‘æ§æ•ˆæœ</td><td>æ…¢æŸ¥è¯¢é™åˆ°10æ¡/å¤©</td></tr></tbody></table>
<h5 data-id="heading-18">4. çœŸå®æ¡ˆä¾‹</h5>
<ul>
<li><strong>èƒŒæ™¯</strong>ï¼šæŸç”µå•†é¡¹ç›®ä¸­ï¼Œç”¨æˆ·ä¸‹å•å»¶è¿Ÿä»50msé£™å‡åˆ°500msï¼Œè®¢å•æˆåŠŸç‡ä¸‹é™10%ã€‚</li>
<li><strong>å®šä½</strong>ï¼šç”¨<code>SLOWLOG GET</code>å‘ç°<code>HGETALL order:1001</code>è€—æ—¶200msï¼Œ<code>INFO</code>æ˜¾ç¤ºå†…å­˜å ç”¨æ¿€å¢ã€‚</li>
<li><strong>åˆ†æ</strong>ï¼šè®¢å•Hashå­—æ®µä»100æ¶¨åˆ°5000ï¼Œå¯¼è‡´è¯»å–å˜æ…¢ã€‚å‹æµ‹éªŒè¯ï¼š5000å­—æ®µæ—¶QPSä»…1000ã€‚</li>
<li><strong>ä¼˜åŒ–</strong>ï¼šå°†Hashæ‹†ä¸º<code>order:1001:base</code>ï¼ˆåŸºæœ¬ä¿¡æ¯ï¼‰å’Œ<code>order:1001:items</code>ï¼ˆå•†å“åˆ—è¡¨ï¼‰ï¼Œç”¨<code>HMGET</code>æ›¿æ¢<code>HGETALL</code>ã€‚</li>
<li><strong>ç»“æœ</strong>ï¼šå»¶è¿Ÿé™å›60msï¼ŒQPSæ¢å¤åˆ°1ä¸‡ï¼Œè®¢å•æˆåŠŸç‡å›å‡ã€‚</li>
</ul>
<p><strong>ç¤ºæ„å›¾</strong>ï¼šæ’æŸ¥æµç¨‹</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-attr">[é—®é¢˜å‘ç°: QPSä¸‹é™]</span> â†’ <span class="hljs-selector-attr">[å®šä½: SLOWLOG+INFO]</span> â†’ <span class="hljs-selector-attr">[åˆ†æ: å‹æµ‹+éªŒè¯]</span> â†’ <span class="hljs-selector-attr">[ä¼˜åŒ–: å‘½ä»¤æ›¿æ¢+åˆ†ç‰‡]</span> â†’ <span class="hljs-selector-attr">[ç›‘æ§: å‘Šè­¦+æŒ‡æ ‡]</span>
</code></pre>
<p><strong>è¿‡æ¸¡åˆ°ä¸‹ä¸€èŠ‚</strong>ï¼šé€šè¿‡å®Œæ•´çš„æ’æŸ¥æµç¨‹ï¼Œä½ å·²ç»èƒ½ä»æ··ä¹±çš„çº¿ä¸Šé—®é¢˜ä¸­æ‰¾åˆ°çªç ´å£ï¼Œå¹¶è½åœ°ä¼˜åŒ–ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ€»ç»“å¸¸è§çš„è¸©å‘ç»éªŒå’Œæœ€ä½³å®è·µï¼Œå¸®åŠ©ä½ åœ¨æœªæ¥å°‘èµ°å¼¯è·¯ã€‚å‡†å¤‡å¥½è¿æ¥ç»éªŒçš„â€œå¹²è´§â€äº†å—ï¼Ÿè®©æˆ‘ä»¬ç»§ç»­ï¼</p>
<hr/>
<h4 data-id="heading-19">å…­ã€å¸¸è§è¸©å‘ä¸ç»éªŒæ€»ç»“</h4>
<p>ç»è¿‡å‰å‡ èŠ‚çš„å®æˆ˜æ¼”ç»ƒï¼Œä½ å·²ç»æŒæ¡äº†æ…¢æŸ¥è¯¢åˆ†æä¸ä¼˜åŒ–çš„æ ¸å¿ƒæŠ€èƒ½ã€‚ä½†åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œç»éªŒå¾€å¾€æ˜¯ä»è¸©å‘ä¸­æç‚¼å‡ºæ¥çš„ã€‚æœ¬èŠ‚å°†åˆ†äº«æˆ‘åœ¨10å¹´Rediså¼€å‘ä¸­é‡åˆ°çš„å…¸å‹é—®é¢˜å’Œæ•™è®­ï¼Œå¹¶æ€»ç»“ä¸€äº›æœ€ä½³å®è·µï¼Œå¸Œæœ›ä½ èƒ½ä»ä¸­å—ç›Šï¼Œé¿å…é‡è¹ˆè¦†è¾™ã€‚è®©æˆ‘ä»¬ä¸€èµ·æ¥çœ‹çœ‹è¿™äº›â€œè¡€æ³ªå²â€å’Œå®ç”¨å»ºè®®å§ï¼</p>
<h5 data-id="heading-20">1. è¸©å‘æ¡ˆä¾‹</h5>
<ul>
<li>
<p><strong>æœªè®¾ç½®åˆç†é˜ˆå€¼å¯¼è‡´æ—¥å¿—ä¸¢å¤±</strong><br/>
æœ‰ä¸€æ¬¡çº¿ä¸ŠæœåŠ¡æ…¢å¾—åƒâ€œä¹Œé¾Ÿçˆ¬â€ï¼Œå´æŸ¥ä¸åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—ã€‚åŸå› æ˜¯æˆ‘æŠŠ<code>slowlog-log-slower-than</code>è®¾ä¸º100msï¼Œè€Œå¤§éƒ¨åˆ†æ…¢æŸ¥è¯¢è€—æ—¶åœ¨10-50msä¹‹é—´ï¼Œç»“æœå•¥ä¹Ÿæ²¡è®°å½•ã€‚è°ƒæ•´ä¸º5000Î¼sï¼ˆ5msï¼‰åï¼Œé—®é¢˜æš´éœ²æ— é—ã€‚<br/>
<strong>æ•™è®­</strong>ï¼šåˆå§‹é˜ˆå€¼è®¾ä½ç‚¹ï¼ˆå¦‚1-5msï¼‰ï¼Œæ ¹æ®ä¸šåŠ¡è°ƒæ•´ï¼Œåˆ«è®©æ—¥å¿—â€œéšèº«â€ã€‚</p>
</li>
<li>
<p><strong>ç›²ç›®ä¼˜åŒ–å¿½ç•¥ä¸šåŠ¡é€»è¾‘</strong><br/>
æŸé¡¹ç›®ä¸­ï¼Œæˆ‘å‘ç°<code>LRANGE</code>æ…¢æŸ¥è¯¢é¢‘å‘ï¼Œæœæ–­æ‹†æˆå°Listï¼Œç»“æœå‘ç°ä¸šåŠ¡éœ€è¦å…¨é‡è¯»å–æ’è¡Œæ¦œï¼Œä¼˜åŒ–ååè€Œå¤šäº†ä¸€æ¬¡åˆå¹¶é€»è¾‘ï¼Œå¾—ä¸å¿å¤±ã€‚<br/>
<strong>æ•™è®­</strong>ï¼šä¼˜åŒ–å‰è¦ææ¸…æ¥šä¸šåŠ¡éœ€æ±‚ï¼Œåˆ«â€œå¤´ç—›åŒ»è„šâ€ã€‚</p>
</li>
</ul>
<h5 data-id="heading-21">2. æœ€ä½³å®è·µ</h5>
<p>åŸºäºè¸©å‘ç»éªŒï¼Œæˆ‘æ€»ç»“äº†ä»¥ä¸‹å‡ æ¡å®è·µå»ºè®®ï¼š</p>
<ul>
<li>
<p><strong>å®šæœŸå®¡æŸ¥æ…¢æŸ¥è¯¢æ—¥å¿—</strong><br/>
æ¯å‘¨è¿è¡Œè„šæœ¬æ£€æŸ¥æ…¢æŸ¥è¯¢ï¼Œé˜²æ‚£äºæœªç„¶ã€‚å¯ä»¥ç”¨Cronä»»åŠ¡è‡ªåŠ¨åŒ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ¯å°æ—¶æ£€æŸ¥ä¸€æ¬¡</span>
0 * * * * redis-cli -h localhost -p 6379 SLOWLOG GET 50 &gt; /log/slowlog.txt
</code></pre>
</li>
<li>
<p><strong>ç»“åˆä¸šåŠ¡é€‰æ‹©æ•°æ®ç»“æ„</strong><br/>
æ¯”å¦‚ç¼“å­˜ç”¨æˆ·çŠ¶æ€ç”¨Hashï¼Œå®æ—¶æ’è¡Œç”¨ZSetï¼Œåˆ«ä¸€å‘³è¿½æ±‚æ€§èƒ½å¿½ç•¥åœºæ™¯é€‚ç”¨æ€§ã€‚</p>
</li>
<li>
<p><strong>å°æ­¥å¿«è·‘éªŒè¯æ•ˆæœ</strong><br/>
ä¼˜åŒ–åå…ˆåœ¨æµ‹è¯•ç¯å¢ƒå‹æµ‹ï¼Œå†ç°åº¦ä¸Šçº¿ã€‚æ¯”å¦‚è°ƒæ•´<code>HGETALL</code>ä¸º<code>HMGET</code>ï¼Œè§‚å¯ŸQPSå’Œå»¶è¿Ÿåå†å…¨é‡éƒ¨ç½²ã€‚</p>
</li>
</ul>
<p><strong>è¡¨æ ¼</strong>ï¼šè¸©å‘ä¸è§£å†³å¯¹æ¯”</p>























<table><thead><tr><th>é—®é¢˜</th><th>åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th><th>æ•ˆæœ</th></tr></thead><tbody><tr><td>æ—¥å¿—ä¸¢å¤±</td><td>é˜ˆå€¼è¿‡é«˜</td><td>é™ä½åˆ°5ms</td><td>é—®é¢˜åŠæ—¶æš´éœ²</td></tr><tr><td>ä¼˜åŒ–ä¸ä¸šåŠ¡å†²çª</td><td>æœªè€ƒè™‘å…¨é‡éœ€æ±‚</td><td>å…ˆè¯„ä¼°ä¸šåŠ¡å†è°ƒæ•´ç»“æ„</td><td>æ€§èƒ½ä¸é€»è¾‘å…¼é¡¾</td></tr></tbody></table>
<h5 data-id="heading-22">3. ç»™è¯»è€…çš„å»ºè®®</h5>
<ul>
<li>
<p><strong>ä»å°é¡¹ç›®å…¥æ‰‹</strong><br/>
å¦‚æœä½ æ˜¯æ–°æ‰‹ï¼Œåˆ«æ€¥ç€ä¼˜åŒ–çº¿ä¸Šå¤§ç³»ç»Ÿã€‚å…ˆåœ¨æœ¬åœ°æ­å»ºRedisï¼Œæ¨¡æ‹Ÿæ…¢æŸ¥è¯¢ï¼ˆæ¯”å¦‚ç”¨<code>DEBUG SLEEP</code>åˆ¶é€ å»¶è¿Ÿï¼‰ï¼Œç†Ÿæ‚‰åˆ†ææµç¨‹ã€‚</p>
</li>
<li>
<p><strong>å–„ç”¨å·¥å…·ä¸ç¤¾åŒº</strong><br/>
Rediså®˜æ–¹æ–‡æ¡£ã€RedisInsightå’ŒStack Overflowéƒ½æ˜¯å®è—ã€‚é‡åˆ°é—®é¢˜å…ˆæŸ¥æŸ¥ï¼Œä¹Ÿè®¸åˆ«äººå·²ç»è¸©è¿‡åŒæ ·çš„å‘ã€‚</p>
</li>
<li>
<p><strong>ä¿æŒå¥½å¥‡å¿ƒ</strong><br/>
æ…¢æŸ¥è¯¢ä¼˜åŒ–æ˜¯ä¸ªæŒç»­å­¦ä¹ çš„è¿‡ç¨‹ï¼Œæ¯æ¬¡æ’æŸ¥éƒ½æ˜¯ä¸€æ¬¡æå‡ã€‚è¯•ç€è®°å½•è‡ªå·±çš„ä¼˜åŒ–æ¡ˆä¾‹ï¼Œç§¯ç´¯ç»éªŒã€‚</p>
</li>
</ul>
<p><strong>è¿‡æ¸¡åˆ°ä¸‹ä¸€èŠ‚</strong>ï¼šé€šè¿‡è¿™äº›è¸©å‘æ•™è®­å’Œå®è·µå»ºè®®ï¼Œä½ åº”è¯¥å¯¹æ…¢æŸ¥è¯¢çš„åº”å¯¹æ›´æœ‰ä¿¡å¿ƒäº†ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åœ¨ç»“è¯­ä¸­å›é¡¾æ ¸å¿ƒè¦ç‚¹ï¼Œå±•æœ›Redisæœªæ¥çš„å‘å±•æ–¹å‘ï¼Œå¹¶é‚€è¯·ä½ åˆ†äº«è‡ªå·±çš„ç»éªŒã€‚å‡†å¤‡å¥½è¿æ¥æœ€åçš„æ€»ç»“äº†å—ï¼Ÿè®©æˆ‘ä»¬ç»§ç»­ï¼</p>
<hr/>
<h4 data-id="heading-23">ä¸ƒã€ç»“è¯­</h4>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»ä¸€èµ·èµ°è¿‡äº†Redisæ…¢æŸ¥è¯¢åˆ†æä¸ä¼˜åŒ–çš„å®Œæ•´æ—…ç¨‹ã€‚ä»åŸºç¡€çŸ¥è¯†åˆ°åˆ†æå·¥å…·ï¼Œå†åˆ°ä¼˜åŒ–ç­–ç•¥å’Œæ’æŸ¥æµç¨‹ï¼Œè¿™ç¯‡æ–‡ç« ä¸ä»…æ˜¯ä¸€ä»½æŠ€æœ¯æŒ‡å—ï¼Œæ›´æ˜¯æˆ‘10å¹´å®æˆ˜ç»éªŒçš„æ²‰æ·€ã€‚æ…¢æŸ¥è¯¢è™½å°ï¼Œå´èƒ½å½±å“æ•´ä¸ªç³»ç»Ÿçš„ç¨³å®šæ€§å’Œç”¨æˆ·ä½“éªŒã€‚é€šè¿‡æœ¬æ–‡ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº†å‘ç°é—®é¢˜ã€åˆ†æåŸå› å¹¶ä¼˜åŒ–è½åœ°çš„æ ¸å¿ƒæŠ€èƒ½ã€‚æ— è®ºæ˜¯æ›¿æ¢ä½æ•ˆå‘½ä»¤ã€è°ƒæ•´æ•°æ®ç»“æ„ï¼Œè¿˜æ˜¯é…ç½®å‘Šè­¦ç›‘æ§ï¼Œè¿™äº›æ–¹æ³•éƒ½èƒ½è®©ä½ åœ¨é¢å¯¹æ€§èƒ½ç“¶é¢ˆæ—¶æ›´åŠ ä»å®¹ã€‚</p>
<h5 data-id="heading-24">1. æ€»ç»“</h5>
<p>æ…¢æŸ¥è¯¢åˆ†æä¸ä¼˜åŒ–çš„ä»·å€¼åœ¨äºï¼Œå®ƒä¸ä»…æ˜¯æŠ€æœ¯çš„æå‡ï¼Œæ›´æ˜¯ä¸šåŠ¡ä¿éšœçš„åŸºçŸ³ã€‚ä½ ç°åœ¨èƒ½ç”¨<code>SLOWLOG GET</code>å®šä½é—®é¢˜ï¼Œç”¨<code>SCAN</code>å’Œ<code>HMGET</code>ä¼˜åŒ–å‘½ä»¤ï¼Œè¿˜èƒ½é€šè¿‡åˆ†ç‰‡å’ŒPipelineè§£å†³å¤§æ•°æ®é‡å’Œé«˜å¹¶å‘æŒ‘æˆ˜ã€‚è¿™äº›æŠ€èƒ½ä¸ä»…èƒ½å¸®ä½ æå‡QPSã€é™ä½å»¶è¿Ÿï¼Œè¿˜å¯èƒ½åœ¨å…³é”®æ—¶åˆ»æŒ½æ•‘ä¸€æ¬¡çº¿ä¸Šäº‹æ•…ã€‚è®°ä½ï¼Œæ€§èƒ½ä¼˜åŒ–æ²¡æœ‰ç»ˆç‚¹ï¼Œæ¯ä¸€æ¬¡æ’æŸ¥éƒ½æ˜¯ä¸€æ¬¡æˆé•¿ã€‚</p>
<h5 data-id="heading-25">2. å±•æœ›</h5>
<p>éšç€Redisçš„ä¸æ–­æ¼”è¿›ï¼Œæ…¢æŸ¥è¯¢ç›¸å…³çš„åŠŸèƒ½ä¹Ÿåœ¨æ”¹è¿›ã€‚æ¯”å¦‚Redis 7.xå¼•å…¥äº†æ›´çµæ´»çš„å‘½ä»¤åˆ†æå·¥å…·å’Œå†…å­˜ç®¡ç†ä¼˜åŒ–ï¼Œæœªæ¥å¯èƒ½ä¼šæä¾›æ›´æ™ºèƒ½çš„æ…¢æŸ¥è¯¢è¯Šæ–­ï¼Œç”šè‡³å†…ç½®æ¨èä¼˜åŒ–æ–¹æ¡ˆã€‚åŒæ—¶ï¼Œéšç€äº‘åŸç”Ÿå’Œåˆ†å¸ƒå¼æ¶æ„çš„æ™®åŠï¼ŒRedis Clusterå’ŒSentinelçš„æ…¢æŸ¥è¯¢ç®¡ç†ä¹Ÿå°†æˆä¸ºæ–°çƒ­ç‚¹ã€‚ä½œä¸ºå¼€å‘è€…ï¼ŒæŒç»­å…³æ³¨è¿™äº›è¶‹åŠ¿ï¼Œç»“åˆå®é™…é¡¹ç›®å®è·µï¼Œæ‰èƒ½ä¿æŒç«äº‰åŠ›ã€‚æˆ‘å»ºè®®ä½ å¤šå…³æ³¨Rediså®˜æ–¹åšå®¢å’Œç¤¾åŒºåŠ¨æ€ï¼Œç´§è·ŸæŠ€æœ¯è„‰æã€‚</p>
<h5 data-id="heading-26">3. äº’åŠ¨</h5>
<p>æŠ€æœ¯æ˜¯æ´»çš„ï¼Œç»éªŒæ˜¯å…±äº«çš„ã€‚æˆ‘åœ¨æ–‡ä¸­åˆ†äº«äº†è‡ªå·±çš„è¸©å‘å’Œå¿ƒå¾—ï¼Œä¹Ÿå¾ˆæœŸå¾…å¬åˆ°ä½ çš„æ•…äº‹ã€‚ä½ æ˜¯å¦é‡åˆ°è¿‡æ£˜æ‰‹çš„æ…¢æŸ¥è¯¢é—®é¢˜ï¼Ÿåˆæ˜¯æ€ä¹ˆè§£å†³çš„ï¼Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ï¼Œæˆ–è€…é€šè¿‡Xè”ç³»æˆ‘ï¼ˆå‡è®¾æœ‰è¿™ä¸ªå¹³å°ï¼‰ï¼Œè®©æˆ‘ä»¬ä¸€èµ·äº¤æµæˆé•¿ã€‚Redisçš„ä¸–ç•Œå¾ˆå¤§ï¼Œä¼˜åŒ–ä¹‹è·¯è¿˜å¾ˆé•¿ï¼Œå¸Œæœ›æˆ‘ä»¬éƒ½èƒ½åœ¨è¿™æ¡è·¯ä¸Šè¶Šèµ°è¶Šè¿œï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agent Skills å®Œå…¨æŒ‡å—ï¼šè®©ä½ çš„ AI Agent æ‹¥æœ‰è¶…èƒ½åŠ›]]></title>    <link>https://juejin.cn/post/7593262196843380788</link>    <guid>https://juejin.cn/post/7593262196843380788</guid>    <pubDate>2026-01-10T03:45:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593262196843380788" data-draft-id="7593240931286990900" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agent Skills å®Œå…¨æŒ‡å—ï¼šè®©ä½ çš„ AI Agent æ‹¥æœ‰è¶…èƒ½åŠ›"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-10T03:45:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹ƒç»è¡¡å®‡"/> <meta itemprop="url" content="https://juejin.cn/user/2373161075090537"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agent Skills å®Œå…¨æŒ‡å—ï¼šè®©ä½ çš„ AI Agent æ‹¥æœ‰è¶…èƒ½åŠ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2373161075090537/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹ƒç»è¡¡å®‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T03:45:39.000Z" title="Sat Jan 10 2026 03:45:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Agent Skills å®Œå…¨æŒ‡å—ï¼šè®©ä½ çš„ AI Agent æ‹¥æœ‰è¶…èƒ½åŠ›</h2>
<blockquote>
<p><strong>æ‘˜è¦ï¼š</strong> æœ¬æ–‡è¯¦ç»†ä»‹ç» Agent Skills çš„æ¦‚å¿µã€å®ç°åŸç†å’Œæœ€ä½³å®è·µï¼Œé€šè¿‡å®æˆ˜æ¡ˆä¾‹æ•™ä½ å¦‚ä½•ä¸º AI Agent æ·»åŠ è‡ªå®šä¹‰æŠ€èƒ½ï¼Œè®©å…¶èƒ½å¤Ÿè°ƒç”¨å¤–éƒ¨å·¥å…·ã€API å’ŒæœåŠ¡ï¼Œå®ç°çœŸæ­£çš„è‡ªä¸»ä»»åŠ¡æ‰§è¡Œã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-1">ğŸ“Œ å‰è¨€</h3>
<p>éšç€å¤§è¯­è¨€æ¨¡å‹çš„å¿«é€Ÿå‘å±•ï¼ŒAI Agent å·²ç»ä»ç®€å•çš„å¯¹è¯æœºå™¨äººè¿›åŒ–æˆèƒ½å¤Ÿè‡ªä¸»å®Œæˆå¤æ‚ä»»åŠ¡çš„æ™ºèƒ½ä½“ã€‚ä½†æ˜¯ï¼Œä»…ä»…ä¾é è¯­è¨€æ¨¡å‹æœ¬èº«æ˜¯ä¸å¤Ÿçš„â€”â€”Agent éœ€è¦ <strong>Skillsï¼ˆæŠ€èƒ½ï¼‰</strong> æ¥ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’ã€‚</p>
<p>å°±åƒäººç±»éœ€è¦å­¦ä¹ ä½¿ç”¨å·¥å…·ä¸€æ ·ï¼ŒAI Agent ä¹Ÿéœ€è¦æŒæ¡å„ç§æŠ€èƒ½ï¼šæœç´¢ç½‘é¡µã€è¯»å†™æ–‡ä»¶ã€è°ƒç”¨ APIã€æ‰§è¡Œä»£ç ç­‰ã€‚æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥äº†è§£ Agent Skills çš„æ ¸å¿ƒæœºåˆ¶ï¼Œå¹¶æ‰‹æŠŠæ‰‹æ•™ä½ å®ç°è‡ªå·±çš„æŠ€èƒ½ç³»ç»Ÿã€‚</p>
<p><strong>é€‚åˆäººç¾¤ï¼š</strong></p>
<ul>
<li>AI Agent å¼€å‘è€…</li>
<li>LangChain/AutoGPT ç”¨æˆ·</li>
<li>æƒ³è¦æ‰©å±• AI èƒ½åŠ›çš„å·¥ç¨‹å¸ˆ</li>
</ul>
<hr/>
<h3 data-id="heading-2">ğŸ¯ ä»€ä¹ˆæ˜¯ Agent Skillsï¼Ÿ</h3>
<h4 data-id="heading-3">1.1 æ ¸å¿ƒæ¦‚å¿µ</h4>
<p><strong>Agent Skills</strong> æ˜¯èµ‹äºˆ AI Agent æ‰§è¡Œç‰¹å®šä»»åŠ¡çš„èƒ½åŠ›æ¨¡å—ã€‚æ¯ä¸ª Skill æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª<strong>å¯è°ƒç”¨çš„å‡½æ•°</strong>ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li><strong>å‡½æ•°åç§°</strong>ï¼šAgent çŸ¥é“ä½•æ—¶è°ƒç”¨å®ƒ</li>
<li><strong>å‡½æ•°æè¿°</strong>ï¼šå‘Šè¯‰ Agent è¿™ä¸ªæŠ€èƒ½èƒ½åšä»€ä¹ˆ</li>
<li><strong>å‚æ•°å®šä¹‰</strong>ï¼šéœ€è¦ä»€ä¹ˆè¾“å…¥</li>
<li><strong>æ‰§è¡Œé€»è¾‘</strong>ï¼šå®é™…çš„ä¸šåŠ¡ä»£ç </li>
</ul>
<h4 data-id="heading-4">1.2 å·¥ä½œåŸç†</h4>
<pre><code class="hljs">ç”¨æˆ·è¾“å…¥ â†’ Agent åˆ†æ â†’ é€‰æ‹©åˆé€‚çš„ Skill â†’ æ‰§è¡Œ Skill â†’ è¿”å›ç»“æœ â†’ ç»§ç»­æ¨ç†
</code></pre>
<p><strong>å…¸å‹æµç¨‹ï¼š</strong></p>
<ol start="0">
<li>ç”¨æˆ·ï¼š"å¸®æˆ‘æŸ¥ä¸€ä¸‹åŒ—äº¬ä»Šå¤©çš„å¤©æ°”"</li>
<li>Agent è¯†åˆ«éœ€è¦ä½¿ç”¨ <code>get_weather</code> æŠ€èƒ½</li>
<li>æå–å‚æ•°ï¼š<code>{"city": "åŒ—äº¬"}</code></li>
<li>æ‰§è¡ŒæŠ€èƒ½ï¼Œè°ƒç”¨å¤©æ°” API</li>
<li>è¿”å›ç»“æœï¼š"åŒ—äº¬ä»Šå¤©å¤šäº‘ï¼Œ22-28Â°C"</li>
<li>Agent ç»„ç»‡è¯­è¨€å›å¤ç”¨æˆ·</li>
</ol>
<h4 data-id="heading-5">1.3 ä¸ºä»€ä¹ˆéœ€è¦ Skillsï¼Ÿ</h4>

























<table><thead><tr><th>æŒ‘æˆ˜</th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>LLM è®­ç»ƒæ•°æ®è¿‡æ—¶</td><td>é€šè¿‡æœç´¢ Skill è·å–å®æ—¶ä¿¡æ¯</td></tr><tr><td>æ— æ³•æ‰§è¡Œè®¡ç®—</td><td>æ·»åŠ ä»£ç æ‰§è¡Œ Skill</td></tr><tr><td>ä¸èƒ½è®¿é—®ç§æœ‰æ•°æ®</td><td>åˆ›å»ºæ•°æ®åº“æŸ¥è¯¢ Skill</td></tr><tr><td>æ— æ³•æ“ä½œå¤–éƒ¨ç³»ç»Ÿ</td><td>å¼€å‘ API è°ƒç”¨ Skill</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-6">ğŸ’» å®ç°ä½ çš„ç¬¬ä¸€ä¸ª Skill</h3>
<h4 data-id="heading-7">2.1 åŸºç¡€ç¤ºä¾‹ï¼šå¤©æ°”æŸ¥è¯¢ Skill</h4>
<p>ä»¥ Python å’Œ LangChain ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.tools <span class="hljs-keyword">import</span> Tool
<span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> initialize_agent, AgentType
<span class="hljs-keyword">from</span> langchain.llms <span class="hljs-keyword">import</span> OpenAI
<span class="hljs-keyword">import</span> requests
â€‹
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_weather</span>(<span class="hljs-params">city: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
 Â  Â <span class="hljs-string">"""
 Â   æŸ¥è¯¢æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯
â€‹
 Â   Args:
 Â  Â  Â   city: åŸå¸‚åç§°ï¼ˆä¸­æ–‡æˆ–è‹±æ–‡ï¼‰
â€‹
 Â   Returns:
 Â  Â  Â   å¤©æ°”ä¿¡æ¯å­—ç¬¦ä¸²
 Â   """</span>
 Â  Â <span class="hljs-comment"># è¿™é‡Œä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œå®é™…åº”è°ƒç”¨çœŸå®å¤©æ°”API</span>
 Â  Â api_url = <span class="hljs-string">f"https://api.weatherapi.com/v1/current.json"</span>
 Â  Â params = {
 Â  Â  Â  Â <span class="hljs-string">"key"</span>: <span class="hljs-string">"YOUR_API_KEY"</span>,
 Â  Â  Â  Â <span class="hljs-string">"q"</span>: city,
 Â  Â  Â  Â <span class="hljs-string">"lang"</span>: <span class="hljs-string">"zh"</span>
 Â   }
â€‹
 Â  Â <span class="hljs-keyword">try</span>:
 Â  Â  Â  Â response = requests.get(api_url, params=params)
 Â  Â  Â  Â data = response.json()
â€‹
 Â  Â  Â  Â weather_info = <span class="hljs-string">f"<span class="hljs-subst">{city}</span>å½“å‰å¤©æ°”ï¼š<span class="hljs-subst">{data[<span class="hljs-string">'current'</span>][<span class="hljs-string">'condition'</span>][<span class="hljs-string">'text'</span>]}</span>ï¼Œ"</span> \
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">f"æ¸©åº¦ <span class="hljs-subst">{data[<span class="hljs-string">'current'</span>][<span class="hljs-string">'temp_c'</span>]}</span>Â°Cï¼Œ"</span> \
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-string">f"ä½“æ„Ÿæ¸©åº¦ <span class="hljs-subst">{data[<span class="hljs-string">'current'</span>][<span class="hljs-string">'feelslike_c'</span>]}</span>Â°C"</span>
 Â  Â  Â  Â <span class="hljs-keyword">return</span> weather_info
 Â  Â <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">f"æŸ¥è¯¢å¤©æ°”å¤±è´¥ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>
â€‹
<span class="hljs-comment"># å°†å‡½æ•°åŒ…è£…æˆ Tool</span>
weather_tool = Tool(
 Â  Â name=<span class="hljs-string">"WeatherQuery"</span>,
 Â  Â func=get_weather,
 Â  Â description=<span class="hljs-string">"ç”¨äºæŸ¥è¯¢åŸå¸‚çš„å®æ—¶å¤©æ°”ä¿¡æ¯ã€‚è¾“å…¥åŸå¸‚åç§°ï¼Œè¿”å›å¤©æ°”çŠ¶å†µã€æ¸©åº¦ç­‰ä¿¡æ¯ã€‚"</span>
)
â€‹
<span class="hljs-comment"># åˆ›å»º Agent</span>
llm = OpenAI(temperature=<span class="hljs-number">0</span>)
tools = [weather_tool]
â€‹
agent = initialize_agent(
 Â  Â tools=tools,
 Â  Â llm=llm,
 Â  Â agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION,
 Â  Â verbose=<span class="hljs-literal">True</span>
)
â€‹
<span class="hljs-comment"># ä½¿ç”¨ Agent</span>
response = agent.run(<span class="hljs-string">"åŒ—äº¬ä»Šå¤©å¤©æ°”æ€ä¹ˆæ ·ï¼Ÿ"</span>)
<span class="hljs-built_in">print</span>(response)
</code></pre>
<p><strong>å…³é”®ç‚¹è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>name</code>ï¼šç®€æ´æ˜ç¡®çš„æŠ€èƒ½åç§°</li>
<li><code>description</code>ï¼šè¯¦ç»†æè¿°åŠŸèƒ½ï¼Œå¸®åŠ© Agent åˆ¤æ–­ä½•æ—¶ä½¿ç”¨</li>
<li><code>func</code>ï¼šå®é™…æ‰§è¡Œçš„å‡½æ•°</li>
<li>é”™è¯¯å¤„ç†ï¼šå¿…é¡»æ•è·å¼‚å¸¸å¹¶è¿”å›å‹å¥½ä¿¡æ¯</li>
</ul>
<h4 data-id="heading-8">2.2 è¿›é˜¶ç¤ºä¾‹ï¼šæ–‡ä»¶æ“ä½œ Skill</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Optional</span>
â€‹
<span class="hljs-keyword">def</span> <span class="hljs-title function_">read_file_skill</span>(<span class="hljs-params">file_path: <span class="hljs-built_in">str</span>, encoding: <span class="hljs-built_in">str</span> = <span class="hljs-string">"utf-8"</span></span>) -&gt; <span class="hljs-built_in">str</span>:
 Â  Â <span class="hljs-string">"""
 Â   è¯»å–æ–‡ä»¶å†…å®¹
â€‹
 Â   Args:
 Â  Â  Â   file_path: æ–‡ä»¶è·¯å¾„ï¼ˆç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„ï¼‰
 Â  Â  Â   encoding: æ–‡ä»¶ç¼–ç ï¼Œé»˜è®¤ utf-8
â€‹
 Â   Returns:
 Â  Â  Â   æ–‡ä»¶å†…å®¹å­—ç¬¦ä¸²
 Â   """</span>
 Â  Â <span class="hljs-keyword">try</span>:
 Â  Â  Â  Â <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(file_path):
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">f"é”™è¯¯ï¼šæ–‡ä»¶ <span class="hljs-subst">{file_path}</span> ä¸å­˜åœ¨"</span>
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'r'</span>, encoding=encoding) <span class="hljs-keyword">as</span> f:
 Â  Â  Â  Â  Â  Â content = f.read()
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">f"æˆåŠŸè¯»å–æ–‡ä»¶ï¼Œå†…å®¹ï¼š\n<span class="hljs-subst">{content[:<span class="hljs-number">500</span>]}</span>..."</span> Â <span class="hljs-comment"># é™åˆ¶è¿”å›é•¿åº¦</span>
 Â  Â <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">f"è¯»å–æ–‡ä»¶å¤±è´¥ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>
â€‹
<span class="hljs-keyword">def</span> <span class="hljs-title function_">write_file_skill</span>(<span class="hljs-params">file_path: <span class="hljs-built_in">str</span>, content: <span class="hljs-built_in">str</span>, mode: <span class="hljs-built_in">str</span> = <span class="hljs-string">"w"</span></span>) -&gt; <span class="hljs-built_in">str</span>:
 Â  Â <span class="hljs-string">"""
 Â   å†™å…¥å†…å®¹åˆ°æ–‡ä»¶
â€‹
 Â   Args:
 Â  Â  Â   file_path: ç›®æ ‡æ–‡ä»¶è·¯å¾„
 Â  Â  Â   content: è¦å†™å…¥çš„å†…å®¹
 Â  Â  Â   mode: å†™å…¥æ¨¡å¼ï¼Œ'w' è¦†ç›–ï¼Œ'a' è¿½åŠ 
â€‹
 Â   Returns:
 Â  Â  Â   æ“ä½œç»“æœæè¿°
 Â   """</span>
 Â  Â <span class="hljs-keyword">try</span>:
 Â  Â  Â  Â <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, mode, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
 Â  Â  Â  Â  Â  Â f.write(content)
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">f"æˆåŠŸå†™å…¥æ–‡ä»¶ <span class="hljs-subst">{file_path}</span>"</span>
 Â  Â <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">f"å†™å…¥æ–‡ä»¶å¤±è´¥ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>
â€‹
<span class="hljs-comment"># åˆ›å»ºå·¥å…·é›†</span>
file_tools = [
 Â  Â Tool(
 Â  Â  Â  Â name=<span class="hljs-string">"ReadFile"</span>,
 Â  Â  Â  Â func=read_file_skill,
 Â  Â  Â  Â description=<span class="hljs-string">"è¯»å–æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶å†…å®¹ã€‚è¾“å…¥æ–‡ä»¶è·¯å¾„ï¼Œè¿”å›æ–‡ä»¶å†…å®¹ã€‚"</span>
 Â   ),
 Â  Â Tool(
 Â  Â  Â  Â name=<span class="hljs-string">"WriteFile"</span>,
 Â  Â  Â  Â func=write_file_skill,
 Â  Â  Â  Â description=<span class="hljs-string">"å°†å†…å®¹å†™å…¥æŒ‡å®šæ–‡ä»¶ã€‚éœ€è¦æ–‡ä»¶è·¯å¾„å’Œè¦å†™å…¥çš„å†…å®¹ä½œä¸ºå‚æ•°ã€‚"</span>
 Â   )
]
</code></pre>
<hr/>
<h3 data-id="heading-9">ğŸš€ å®æˆ˜æ¡ˆä¾‹ï¼šæ„å»ºå¤šæŠ€èƒ½ Agent</h3>
<h4 data-id="heading-10">3.1 éœ€æ±‚åœºæ™¯</h4>
<p>åˆ›å»ºä¸€ä¸ªèƒ½å¤Ÿï¼š</p>
<ol start="0">
<li>æœç´¢ç½‘é¡µä¿¡æ¯</li>
<li>è¿›è¡Œæ•°å­¦è®¡ç®—</li>
<li>ç”Ÿæˆå¹¶ä¿å­˜ä»£ç æ–‡ä»¶</li>
</ol>
<p>çš„å…¨èƒ½å‹ Agentã€‚</p>
<h4 data-id="heading-11">3.2 å®Œæ•´å®ç°</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> initialize_agent, Tool, AgentType
<span class="hljs-keyword">from</span> langchain.llms <span class="hljs-keyword">import</span> OpenAI
<span class="hljs-keyword">from</span> langchain.utilities <span class="hljs-keyword">import</span> SerpAPIWrapper
<span class="hljs-keyword">import</span> math
<span class="hljs-keyword">import</span> os
â€‹
<span class="hljs-comment"># Skill 1: ç½‘é¡µæœç´¢</span>
search = SerpAPIWrapper()
search_tool = Tool(
 Â  Â name=<span class="hljs-string">"WebSearch"</span>,
 Â  Â func=search.run,
 Â  Â description=<span class="hljs-string">"ç”¨äºæœç´¢äº’è”ç½‘ä¿¡æ¯ã€‚è¾“å…¥æœç´¢å…³é”®è¯ï¼Œè¿”å›ç›¸å…³ç½‘é¡µç»“æœæ‘˜è¦ã€‚"</span>
)
â€‹
<span class="hljs-comment"># Skill 2: æ•°å­¦è®¡ç®—</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">calculator_skill</span>(<span class="hljs-params">expression: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
 Â  Â <span class="hljs-string">"""å®‰å…¨çš„æ•°å­¦è¡¨è¾¾å¼è®¡ç®—"""</span>
 Â  Â <span class="hljs-keyword">try</span>:
 Â  Â  Â  Â <span class="hljs-comment"># ä»…å…è®¸æ•°å­¦è¿ç®—ï¼Œé˜²æ­¢ä»£ç æ³¨å…¥</span>
 Â  Â  Â  Â allowed_names = {k: v <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> math.__dict__.items() <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> k.startswith(<span class="hljs-string">"__"</span>)}
 Â  Â  Â  Â result = <span class="hljs-built_in">eval</span>(expression, {<span class="hljs-string">"__builtins__"</span>: {}}, allowed_names)
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">f"è®¡ç®—ç»“æœï¼š<span class="hljs-subst">{result}</span>"</span>
 Â  Â <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">f"è®¡ç®—é”™è¯¯ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>
â€‹
calculator_tool = Tool(
 Â  Â name=<span class="hljs-string">"Calculator"</span>,
 Â  Â func=calculator_skill,
 Â  Â description=<span class="hljs-string">"æ‰§è¡Œæ•°å­¦è®¡ç®—ã€‚è¾“å…¥æ•°å­¦è¡¨è¾¾å¼ï¼ˆå¦‚ '2+2' æˆ– 'sqrt(16)'ï¼‰ï¼Œè¿”å›è®¡ç®—ç»“æœã€‚"</span>
)
â€‹
<span class="hljs-comment"># Skill 3: ä»£ç ç”Ÿæˆä¸ä¿å­˜</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">save_code_skill</span>(<span class="hljs-params">code: <span class="hljs-built_in">str</span>, filename: <span class="hljs-built_in">str</span>, language: <span class="hljs-built_in">str</span> = <span class="hljs-string">"python"</span></span>) -&gt; <span class="hljs-built_in">str</span>:
 Â  Â <span class="hljs-string">"""ç”Ÿæˆä»£ç æ–‡ä»¶"""</span>
 Â  Â <span class="hljs-keyword">try</span>:
 Â  Â  Â  Â <span class="hljs-comment"># æ ¹æ®è¯­è¨€ç¡®å®šæ‰©å±•å</span>
 Â  Â  Â  Â ext_map = {<span class="hljs-string">"python"</span>: <span class="hljs-string">"py"</span>, <span class="hljs-string">"javascript"</span>: <span class="hljs-string">"js"</span>, <span class="hljs-string">"java"</span>: <span class="hljs-string">"java"</span>, <span class="hljs-string">"cpp"</span>: <span class="hljs-string">"cpp"</span>}
 Â  Â  Â  Â ext = ext_map.get(language.lower(), <span class="hljs-string">"txt"</span>)
â€‹
 Â  Â  Â  Â full_path = <span class="hljs-string">f"<span class="hljs-subst">{filename}</span>.<span class="hljs-subst">{ext}</span>"</span>
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(full_path, <span class="hljs-string">'w'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
 Â  Â  Â  Â  Â  Â f.write(code)
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">f"ä»£ç å·²ä¿å­˜åˆ° <span class="hljs-subst">{full_path}</span>"</span>
 Â  Â <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">f"ä¿å­˜å¤±è´¥ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>
â€‹
code_tool = Tool(
 Â  Â name=<span class="hljs-string">"SaveCode"</span>,
 Â  Â func=save_code_skill,
 Â  Â description=<span class="hljs-string">"ä¿å­˜ä»£ç åˆ°æ–‡ä»¶ã€‚éœ€è¦æä¾›ä»£ç å†…å®¹ã€æ–‡ä»¶åå’Œç¼–ç¨‹è¯­è¨€ç±»å‹ã€‚"</span>
)
â€‹
<span class="hljs-comment"># ç»„è£… Agent</span>
llm = OpenAI(temperature=<span class="hljs-number">0</span>, model_name=<span class="hljs-string">"gpt-4"</span>)
tools = [search_tool, calculator_tool, code_tool]
â€‹
agent = initialize_agent(
 Â  Â tools=tools,
 Â  Â llm=llm,
 Â  Â agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION,
 Â  Â verbose=<span class="hljs-literal">True</span>,
 Â  Â max_iterations=<span class="hljs-number">5</span>
)
â€‹
<span class="hljs-comment"># æµ‹è¯•å¤æ‚ä»»åŠ¡</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
 Â  Â <span class="hljs-comment"># ä»»åŠ¡ï¼šæœç´¢ Python æ’åºç®—æ³•ï¼Œè®¡ç®—æ—¶é—´å¤æ‚åº¦ï¼Œç”Ÿæˆç¤ºä¾‹ä»£ç </span>
 Â  Â result = agent.run(<span class="hljs-string">"""
 Â   è¯·å¸®æˆ‘å®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š
 Â   1. æœç´¢å¿«é€Ÿæ’åºç®—æ³•çš„åŸç†
 Â   2. è®¡ç®—å¯¹ 1000 ä¸ªå…ƒç´ æ’åºï¼Œå¹³å‡éœ€è¦å¤šå°‘æ¬¡æ¯”è¾ƒï¼ˆå‡è®¾ O(n log n)ï¼‰
 Â   3. ç”Ÿæˆä¸€ä¸ª Python å¿«é€Ÿæ’åºçš„å®ç°ä»£ç å¹¶ä¿å­˜ä¸º quicksort.py
 Â   """</span>)
â€‹
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"\n"</span> + <span class="hljs-string">"="</span>*<span class="hljs-number">50</span>)
 Â  Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"æœ€ç»ˆç»“æœï¼š"</span>)
 Â  Â <span class="hljs-built_in">print</span>(result)
</code></pre>
<p><strong>è¿è¡Œæ•ˆæœï¼š</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet">&gt; Entering <span class="hljs-built_in">new</span> AgentExecutor chain...
â€‹
<span class="hljs-symbol">Thought:</span> æˆ‘éœ€è¦å…ˆæœç´¢å¿«é€Ÿæ’åºçš„åŸç†
<span class="hljs-symbol">Action:</span> WebSearch
Action Input: <span class="hljs-string">"å¿«é€Ÿæ’åºç®—æ³•åŸç†"</span>
â€‹
<span class="hljs-symbol">Observation:</span> å¿«é€Ÿæ’åºæ˜¯ä¸€ç§åˆ†æ²»ç®—æ³•...
â€‹
<span class="hljs-symbol">Thought:</span> ç°åœ¨è®¡ç®—æ¯”è¾ƒæ¬¡æ•°
<span class="hljs-symbol">Action:</span> Calculator
Action Input: <span class="hljs-string">"1000 * log(1000, 2)"</span>
â€‹
<span class="hljs-symbol">Observation:</span> è®¡ç®—ç»“æœï¼š<span class="hljs-number">9965.784284662087</span>
â€‹
<span class="hljs-symbol">Thought:</span> ç”Ÿæˆä»£ç å¹¶ä¿å­˜
<span class="hljs-symbol">Action:</span> SaveCode
Action Input: code=<span class="hljs-string">"def quicksort(arr):\n Â   if len(arr) &lt;= 1:\n Â  Â  Â   return arr\n Â   ..."</span>, filename=<span class="hljs-string">"quicksort"</span>, language=<span class="hljs-string">"python"</span>
â€‹
<span class="hljs-symbol">Observation:</span> ä»£ç å·²ä¿å­˜åˆ° quicksort.py
â€‹
Final Answer: å·²å®Œæˆæ‰€æœ‰ä»»åŠ¡ã€‚å¿«é€Ÿæ’åºé‡‡ç”¨åˆ†æ²»ç­–ç•¥...
</code></pre>
<hr/>
<h3 data-id="heading-12">ğŸ“Š Skills è®¾è®¡æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-13">4.1 è®¾è®¡åŸåˆ™</h4>



































<table><thead><tr><th>åŸåˆ™</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><strong>å•ä¸€èŒè´£</strong></td><td>æ¯ä¸ª Skill åªåšä¸€ä»¶äº‹</td><td>âŒ <code>handle_data</code> â†’ âœ… <code>read_csv</code>, <code>write_csv</code></td></tr><tr><td><strong>æ¸…æ™°å‘½å</strong></td><td>åç§°è¦è¡¨è¾¾åŠŸèƒ½</td><td>âŒ <code>tool1</code> â†’ âœ… <code>GetWeather</code></td></tr><tr><td><strong>è¯¦ç»†æè¿°</strong></td><td>å¸®åŠ© Agent ç†è§£ä½¿ç”¨åœºæ™¯</td><td>"æŸ¥è¯¢å¤©æ°”" â†’ "æŸ¥è¯¢æŒ‡å®šåŸå¸‚çš„å®æ—¶å¤©æ°”ï¼ŒåŒ…æ‹¬æ¸©åº¦ã€æ¹¿åº¦ã€é£é€Ÿç­‰ä¿¡æ¯"</td></tr><tr><td><strong>å®¹é”™å¤„ç†</strong></td><td>å¿…é¡»æ•è·å¼‚å¸¸</td><td>è¿”å›é”™è¯¯ä¿¡æ¯è€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸</td></tr><tr><td><strong>å‚æ•°éªŒè¯</strong></td><td>æ£€æŸ¥è¾“å…¥åˆæ³•æ€§</td><td>éªŒè¯åŸå¸‚åä¸ä¸ºç©ºï¼Œæ–‡ä»¶è·¯å¾„å­˜åœ¨ç­‰</td></tr></tbody></table>
<h4 data-id="heading-14">4.2 æè¿°æ–‡æœ¬ä¼˜åŒ–æŠ€å·§</h4>
<p>å¥½çš„æè¿°èƒ½è®© Agent æ›´å‡†ç¡®åœ°é€‰æ‹©æŠ€èƒ½ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># âŒ ä¸å¥½çš„æè¿°</span>
<span class="hljs-attr">description</span> = <span class="hljs-string">"æŸ¥å¤©æ°”"</span>
â€‹
<span class="hljs-comment"># âœ… ä¼˜ç§€çš„æè¿°</span>
<span class="hljs-attr">description</span> = <span class="hljs-string">"""
æŸ¥è¯¢æŒ‡å®šåŸå¸‚çš„å®æ—¶å¤©æ°”ä¿¡æ¯ã€‚
â€‹
ä½¿ç”¨åœºæ™¯ï¼š
- ç”¨æˆ·è¯¢é—®æŸä¸ªåŸå¸‚çš„å¤©æ°”
- éœ€è¦è·å–æ¸©åº¦ã€å¤©æ°”çŠ¶å†µã€ä½“æ„Ÿæ¸©åº¦ç­‰ä¿¡æ¯
â€‹
è¾“å…¥ï¼šåŸå¸‚åç§°ï¼ˆæ”¯æŒä¸­è‹±æ–‡ï¼Œå¦‚ "åŒ—äº¬" æˆ– "Beijing"ï¼‰
è¾“å‡ºï¼šå¤©æ°”æè¿°æ–‡æœ¬ï¼ŒåŒ…å«æ¸©åº¦ã€å¤©æ°”çŠ¶å†µã€é£åŠ›ç­‰
â€‹
ç¤ºä¾‹ï¼š
è¾“å…¥: "ä¸Šæµ·"
è¾“å‡º: "ä¸Šæµ·å½“å‰å¤©æ°”ï¼šå¤šäº‘ï¼Œæ¸©åº¦ 25Â°Cï¼Œä½“æ„Ÿæ¸©åº¦ 27Â°Cï¼Œä¸œå—é£ 3 çº§"
"""</span>
</code></pre>
<h4 data-id="heading-15">4.3 å®‰å…¨è€ƒè™‘</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">safe_skill_wrapper</span>(<span class="hljs-params">func</span>):
 Â  Â <span class="hljs-string">"""å®‰å…¨åŒ…è£…å™¨ï¼šé™åˆ¶æ‰§è¡Œæ—¶é—´å’Œèµ„æº"""</span>
 Â  Â <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrapper</span>(<span class="hljs-params">*args, **kwargs</span>):
 Â  Â  Â  Â <span class="hljs-keyword">import</span> signal
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">def</span> <span class="hljs-title function_">timeout_handler</span>(<span class="hljs-params">signum, frame</span>):
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">raise</span> TimeoutError(<span class="hljs-string">"æŠ€èƒ½æ‰§è¡Œè¶…æ—¶"</span>)
â€‹
 Â  Â  Â  Â <span class="hljs-comment"># è®¾ç½® 5 ç§’è¶…æ—¶</span>
 Â  Â  Â  Â signal.signal(signal.SIGALRM, timeout_handler)
 Â  Â  Â  Â signal.alarm(<span class="hljs-number">5</span>)
â€‹
 Â  Â  Â  Â <span class="hljs-keyword">try</span>:
 Â  Â  Â  Â  Â  Â result = func(*args, **kwargs)
 Â  Â  Â  Â  Â  Â signal.alarm(<span class="hljs-number">0</span>) Â <span class="hljs-comment"># å–æ¶ˆè¶…æ—¶</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> result
 Â  Â  Â  Â <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
 Â  Â  Â  Â  Â  Â signal.alarm(<span class="hljs-number">0</span>)
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">f"æ‰§è¡Œå¤±è´¥ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>
â€‹
 Â  Â <span class="hljs-keyword">return</span> wrapper
â€‹
<span class="hljs-meta">@safe_skill_wrapper</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">risky_skill</span>(<span class="hljs-params">command: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
 Â  Â <span class="hljs-string">"""å¯èƒ½è€—æ—¶çš„æ“ä½œ"""</span>
 Â  Â <span class="hljs-comment"># æ‰§è¡Œé€»è¾‘</span>
 Â  Â <span class="hljs-keyword">pass</span>
</code></pre>
<hr/>
<h3 data-id="heading-16">âš ï¸ å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-17">Q1: Agent ä¸ä½¿ç”¨æˆ‘çš„ Skillï¼Ÿ</h4>
<p><strong>åŸå› ï¼š</strong></p>
<ul>
<li>æè¿°ä¸å¤Ÿæ¸…æ™°</li>
<li>åç§°æœ‰æ­§ä¹‰</li>
<li>åŠŸèƒ½ä¸å…¶ä»– Skill é‡å </li>
</ul>
<p><strong>è§£å†³ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ”¹è¿›æè¿°ï¼Œæ˜ç¡®ä½¿ç”¨åœºæ™¯</span>
<span class="hljs-attr">description</span> = <span class="hljs-string">"""
å½“ç”¨æˆ·æ˜ç¡®è¦æ±‚è¯»å–æ–‡ä»¶å†…å®¹æ—¶ä½¿ç”¨æ­¤æŠ€èƒ½ã€‚
ä¸è¦ç”¨äºå†™å…¥ã€åˆ é™¤æˆ–ä¿®æ”¹æ–‡ä»¶ã€‚
è¾“å…¥å¿…é¡»æ˜¯å…·ä½“çš„æ–‡ä»¶è·¯å¾„ã€‚
"""</span>
</code></pre>
<h4 data-id="heading-18">Q2: Skill æ‰§è¡Œå¤±è´¥ä½† Agent æ²¡æœ‰é‡è¯•ï¼Ÿ</h4>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">robust_skill</span>(<span class="hljs-params">param: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
 Â  Â <span class="hljs-string">"""å¸¦é‡è¯•æœºåˆ¶çš„æŠ€èƒ½"""</span>
 Â  Â max_retries = <span class="hljs-number">3</span>
â€‹
 Â  Â <span class="hljs-keyword">for</span> attempt <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(max_retries):
 Â  Â  Â  Â <span class="hljs-keyword">try</span>:
 Â  Â  Â  Â  Â  Â <span class="hljs-comment"># æ‰§è¡Œé€»è¾‘</span>
 Â  Â  Â  Â  Â  Â result = external_api_call(param)
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> result
 Â  Â  Â  Â <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> attempt == max_retries - <span class="hljs-number">1</span>:
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">f"é‡è¯• <span class="hljs-subst">{max_retries}</span> æ¬¡åä»ç„¶å¤±è´¥ï¼š<span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>
 Â  Â  Â  Â  Â  Â time.sleep(<span class="hljs-number">1</span>) Â <span class="hljs-comment"># ç­‰å¾…åé‡è¯•</span>
</code></pre>
<h4 data-id="heading-19">Q3: å¦‚ä½•ä¼ é€’å¤æ‚å‚æ•°ï¼ˆå¦‚ JSONï¼‰ï¼Ÿ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> json
â€‹
<span class="hljs-keyword">def</span> <span class="hljs-title function_">complex_skill</span>(<span class="hljs-params">json_str: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
 Â  Â <span class="hljs-string">"""æ¥å— JSON å­—ç¬¦ä¸²å‚æ•°"""</span>
 Â  Â <span class="hljs-keyword">try</span>:
 Â  Â  Â  Â params = json.loads(json_str)
 Â  Â  Â  Â city = params.get(<span class="hljs-string">"city"</span>)
 Â  Â  Â  Â date = params.get(<span class="hljs-string">"date"</span>)
 Â  Â  Â  Â <span class="hljs-comment"># å¤„ç†é€»è¾‘</span>
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">f"æŸ¥è¯¢ <span class="hljs-subst">{city}</span> åœ¨ <span class="hljs-subst">{date}</span> çš„æ•°æ®"</span>
 Â  Â <span class="hljs-keyword">except</span> json.JSONDecodeError:
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">"å‚æ•°æ ¼å¼é”™è¯¯ï¼Œè¯·æä¾›æœ‰æ•ˆçš„ JSON å­—ç¬¦ä¸²"</span>
â€‹
<span class="hljs-comment"># ä½¿ç”¨æ—¶</span>
Tool(
 Â  Â name=<span class="hljs-string">"ComplexQuery"</span>,
 Â  Â func=complex_skill,
 Â  Â description=<span class="hljs-string">'éœ€è¦ JSON æ ¼å¼å‚æ•°ï¼Œä¾‹å¦‚ï¼š{"city": "åŒ—äº¬", "date": "2024-01-01"}'</span>
)
</code></pre>
<hr/>
<h3 data-id="heading-20">ğŸ”— å¸¸ç”¨æŠ€èƒ½åº“æ¨è</h3>






























<table><thead><tr><th>å·¥å…·åº“</th><th>åŠŸèƒ½</th><th>é“¾æ¥</th></tr></thead><tbody><tr><td><strong>LangChain Tools</strong></td><td>å®˜æ–¹é¢„ç½®æŠ€èƒ½é›†ï¼ˆæœç´¢ã€è®¡ç®—ã€APIè°ƒç”¨ï¼‰</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fpython.langchain.com%2Fdocs%2Fmodules%2Fagents%2Ftools%2F" target="_blank" title="https://python.langchain.com/docs/modules/agents/tools/" ref="nofollow noopener noreferrer">æ–‡æ¡£</a></td></tr><tr><td><strong>OpenAI Function Calling</strong></td><td>åŸç”Ÿå‡½æ•°è°ƒç”¨æ”¯æŒ</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.openai.com%2Fdocs%2Fguides%2Ffunction-calling" target="_blank" title="https://platform.openai.com/docs/guides/function-calling" ref="nofollow noopener noreferrer">æŒ‡å—</a></td></tr><tr><td><strong>AutoGPT Plugins</strong></td><td>ç¤¾åŒºè´¡çŒ®çš„æ’ä»¶å¸‚åœº</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSignificant-Gravitas%2FAuto-GPT-Plugins" target="_blank" title="https://github.com/Significant-Gravitas/Auto-GPT-Plugins" ref="nofollow noopener noreferrer">GitHub</a></td></tr><tr><td><strong>Semantic Kernel</strong></td><td>å¾®è½¯çš„æŠ€èƒ½ç®¡ç†æ¡†æ¶</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Flearn.microsoft.com%2Fen-us%2Fsemantic-kernel%2F" target="_blank" title="https://learn.microsoft.com/en-us/semantic-kernel/" ref="nofollow noopener noreferrer">å®˜ç½‘</a></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-21">ğŸ“ æ€»ç»“</h3>
<p>é€šè¿‡æœ¬æ–‡ï¼Œä½ å·²ç»æŒæ¡äº† Agent Skills çš„æ ¸å¿ƒçŸ¥è¯†ï¼š</p>
<p><strong>å…³é”®è¦ç‚¹ï¼š</strong></p>
<ol start="0">
<li>âœ… Skills æ˜¯ Agent ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’çš„æ¡¥æ¢</li>
<li>âœ… è®¾è®¡ Skill è¦éµå¾ªå•ä¸€èŒè´£ã€æ¸…æ™°å‘½åã€å®¹é”™å¤„ç†åŸåˆ™</li>
<li>âœ… ä¼˜ç§€çš„æè¿°æ–‡æœ¬èƒ½æ˜¾è‘—æå‡ Agent çš„æŠ€èƒ½é€‰æ‹©å‡†ç¡®ç‡</li>
<li>âœ… å®æˆ˜ä¸­è¦æ³¨æ„å®‰å…¨æ€§ã€è¶…æ—¶æ§åˆ¶å’Œé”™è¯¯å¤„ç†</li>
</ol>
<p><strong>ä¸‹ä¸€æ­¥å»ºè®®ï¼š</strong></p>
<ul>
<li>ğŸ”¨ åŠ¨æ‰‹å®ç° 3-5 ä¸ªè‡ªå·±ä¸šåŠ¡ç›¸å…³çš„ Skills</li>
<li>ğŸ“š æ·±å…¥å­¦ä¹  LangChain æˆ– Semantic Kernel æ¡†æ¶</li>
<li>ğŸŒ æ¢ç´¢ Function Calling çš„é«˜çº§ç”¨æ³•</li>
<li>ğŸ¤ åŠ å…¥ AI Agent å¼€å‘ç¤¾åŒºï¼Œåˆ†äº«ä½ çš„æŠ€èƒ½åº“</li>
</ul>
<p><strong>è®°ä½ï¼š</strong> ä¸€ä¸ªå¼ºå¤§çš„ Agent ä¸ä»…å–å†³äºåº•å±‚æ¨¡å‹ï¼Œæ›´å–å†³äºä½ ä¸ºå®ƒé…å¤‡äº†å“ªäº›"æ­¦å™¨"ï¼ˆSkillsï¼‰ã€‚ç°åœ¨å°±å¼€å§‹æ„å»ºä½ çš„æŠ€èƒ½åº“å§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Zed ç¼–è¾‘å™¨çš„ 6 ä¸ªéšè—æŠ€å·§ï¼šæå‡å¼€å‘æ•ˆç‡çš„ã€Œå†·çŸ¥è¯†ã€æ•´ç†]]></title>    <link>https://juejin.cn/post/7593175890795036718</link>    <guid>https://juejin.cn/post/7593175890795036718</guid>    <pubDate>2026-01-10T00:23:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593175890795036718" data-draft-id="7582845425402642472" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Zed ç¼–è¾‘å™¨çš„ 6 ä¸ªéšè—æŠ€å·§ï¼šæå‡å¼€å‘æ•ˆç‡çš„ã€Œå†·çŸ¥è¯†ã€æ•´ç†"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-10T00:23:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="golangå­¦ä¹ è®°"/> <meta itemprop="url" content="https://juejin.cn/user/4371313964100990"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Zed ç¼–è¾‘å™¨çš„ 6 ä¸ªéšè—æŠ€å·§ï¼šæå‡å¼€å‘æ•ˆç‡çš„ã€Œå†·çŸ¥è¯†ã€æ•´ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4371313964100990/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    golangå­¦ä¹ è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T00:23:24.000Z" title="Sat Jan 10 2026 00:23:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Zed è‡ªä»ä»Šå¹´å¼€å§‹å‘å¸ƒäº†winç‰ˆæœ¬ï¼Œä¹Ÿæœ‰æ›´å¤šçš„ç”¨æˆ·å¼€å§‹ä½¿ç”¨zedè¿™å—æ–°æ—¶ä»£çš„AI IDEï¼Œä¸‹é¢å°±æ¥ä»‹ç»å‡ ä¸ªéå¸¸å®ç”¨çš„zedæŠ€å·§ï¼Œæå‡å¤§å®¶çš„æ•ˆç‡ï¼</p>
<h2 data-id="heading-0">ä¸€ã€ä»»åŠ¡å‘½ä»¤å®æ—¶ä¿®æ”¹ï¼š<code>Tab + Alt+Enter</code> ç¥æ“ä½œ</h2>
<p>Zed çš„ä»»åŠ¡ç³»ç»Ÿï¼ˆTasksï¼‰æ”¯æŒ<strong>ä¸´æ—¶ç¼–è¾‘å‘½ä»¤</strong>åç«‹å³è¿è¡Œï¼Œç‰¹åˆ«é€‚åˆè°ƒè¯•åœºæ™¯ã€‚</p>
<h3 data-id="heading-1">ğŸŒ° åœºæ™¯ä¸¾ä¾‹ï¼šRust æµ‹è¯•éœ€å¼€å¯ backtrace</h3>
<p>é»˜è®¤ <code>cargo test</code> ä»»åŠ¡ä¸å¸¦ <code>RUST_BACKTRACE=1</code>ï¼Œä½†æˆ‘ä»¬å¯ä»¥ï¼š</p>
<ol>
<li>æŒ‰ <code>Cmd/Ctrl + Shift + P</code> â†’ è¾“å…¥ <code>task: spawn</code></li>
<li>é€‰æ‹©ä¸€ä¸ªä»»åŠ¡å â†’ æŒ‰ <code>Tab</code> é”®å±•å¼€åŸå§‹å‘½ä»¤<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75d3a3cfebd145e78d6de2b60f714152~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768609403&amp;x-signature=QI2JIAs6RDZs7TamAGE%2BJrHHxDE%3D" alt="" loading="lazy"/></li>
<li>æ‰‹åŠ¨åœ¨å‘½ä»¤å‰åŠ ä¸Š <code>RUST_BACKTRACE=1 </code>ï¼ˆæ³¨æ„ç©ºæ ¼ï¼‰</li>
<li>æŒ‰ <code>Alt + Enter</code> è¿è¡Œ â†’ å³ä¸º <strong>ã€Œä¸€æ¬¡æ€§ä»»åŠ¡ã€ï¼ˆOneshot Taskï¼‰</strong><br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e1ff6853ebd4cefa7fc93c79025c02c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768609403&amp;x-signature=5d6d%2F4oU9o6a%2FlclwuRwYOjGR4Y%3D" alt="" loading="lazy"/></li>
</ol>
<p>âœ… ä¼˜ç‚¹ï¼š</p>
<ul>
<li>ä¸æ±¡æŸ“é…ç½®æ–‡ä»¶</li>
<li>å†å²è®°å½•ä¼šä¿å­˜ä¿®æ”¹åçš„å‘½ä»¤ï¼ˆä¸‹æ¬¡å¯ç›´æ¥å¤ç”¨ï¼‰<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4446b8c9ae0f4dd3b4cbe6efa4cdbaf7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768609403&amp;x-signature=IgPyMmFhbk6UiLY0%2F1z9py%2FFVkQ%3D" alt="" loading="lazy"/></li>
</ul>
<hr/>
<h2 data-id="heading-2">äºŒã€ä¸º Bun æµ‹è¯•æ·»åŠ ã€Œè¡Œå†… Run æŒ‰é’®ã€</h2>
<p>Zed æ”¯æŒåœ¨ä»£ç è¡Œå·æ—æ˜¾ç¤º â–¶ï¸ æŒ‰é’®ï¼Œç‚¹å‡»ç›´æ¥è¿è¡Œå½“å‰æµ‹è¯•ã€‚</p>
<h3 data-id="heading-3">âœ”ï¸ è‡ªåŠ¨æ”¯æŒæ¡ä»¶</h3>
<ul>
<li>é¡¹ç›® <code>package.json</code> ä¸­åŒ…å« <code>"@types/bun"</code></li>
<li>æ–‡ä»¶ä¸º <code>.test.ts</code> / <code>.spec.js</code> ç­‰è§„èŒƒå‘½å</li>
</ul>
<h3 data-id="heading-4">âš™ï¸ æ‰‹åŠ¨é…ç½®ï¼ˆé€šç”¨æ–¹æ¡ˆï¼‰</h3>
<p>è‹¥æœªè‡ªåŠ¨è¯†åˆ«ï¼Œå¯åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º <code>.zed/tasks.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">[</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Bun Test"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"bun test"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"\"$ZED_RELATIVE_FILE\" -t=\"$ZED_SYMBOL\""</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"tags"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"js-test"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"ts-test"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"bun-test"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"tsx-test"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">]</span>
</code></pre>
<p>âœ… æ•ˆæœï¼š<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61abc96daf9449ec9a69b249ce4c03ea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768609403&amp;x-signature=JytCtyODD0a67kXnLApyMGv521s%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>ğŸ’¡ <code>$ZED_RELATIVE_FILE</code> å’Œ <code>$ZED_SYMBOL</code> æ˜¯ Zed å†…ç½®å˜é‡ï¼Œåˆ†åˆ«ä»£è¡¨å½“å‰æ–‡ä»¶è·¯å¾„ã€å…‰æ ‡æ‰€åœ¨ç¬¦å·ï¼ˆå¦‚æµ‹è¯•å‡½æ•°åï¼‰ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€ç»™æ–‡ä»¶å›¾æ ‡ã€ŒåŠ ç‚¹é¢œè‰²ã€â€”â€” å®‰è£… Catppuccin Icons</h2>
<p>Zed é»˜è®¤æ˜¯<strong>å•è‰²å›¾æ ‡</strong>ï¼š<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b7e935163bc482f962619ae0ab6a24f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768609403&amp;x-signature=yAzt9DTW7kqN1Bk9QOhZvf90TGU%3D" alt="" loading="lazy"/></p>
<p>ğŸ‘‰ å®‰è£…å½©è‰²å›¾æ ‡ä¸»é¢˜ä¸‰æ­¥èµ°ï¼š</p>
<ol>
<li>å‘½ä»¤é¢æ¿ â†’ <code>zed: extensions</code> â†’ æœç´¢ <code>Catppuccin Icons</code> â†’ Install</li>
<li>å‘½ä»¤é¢æ¿ â†’ <code>icon theme selector: toggle</code> â†’ é€‰æ‹© <code>Catppuccin Mocha</code>ï¼ˆæˆ–å…¶ä»–å˜ä½“ï¼‰</li>
<li>ï¼ˆå¯é€‰ï¼‰å¼€å¯ Tab æ å›¾æ ‡ï¼š<br/>
åœ¨ <code>settings.json</code> ä¸­æ·»åŠ ï¼š
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"tabs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"file_icons"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ol>
<p>ğŸ‰ æ•ˆæœå¯¹æ¯”ï¼š<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/715dcde9f3d24c4bb9fdb21bbece5e43~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768609403&amp;x-signature=4OyqOSv7cblxIqKsLTAQt1zdgY0%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-6">å››ã€ç”¨ <code>television</code> æ›¿ä»£é»˜è®¤æ–‡ä»¶æœç´¢ï¼ˆVim ç”¨æˆ·ç‹‚å–œï¼‰</h2>
<blockquote>
<p><code>television</code> æ˜¯ä¸€ä¸ªç»ˆç«¯ç‰ˆçš„æ¨¡ç³ŠæŸ¥æ‰¾å™¨ï¼ˆç±»ä¼¼ fzf + Telescope.nvimï¼‰ï¼Œæ”¯æŒé¢„è§ˆã€å¤šé€‰ç­‰é«˜çº§åŠŸèƒ½ã€‚</p>
</blockquote>
<h3 data-id="heading-7">ğŸ”§ é…ç½®æ­¥éª¤</h3>
<ol>
<li>
<p>å®‰è£… <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fayazhafiz%2Ftelevision" target="_blank" title="https://github.com/ayazhafiz/television" ref="nofollow noopener noreferrer">television</a>ï¼ˆéœ€ Rust ç¯å¢ƒï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">cargo install television
</code></pre>
</li>
<li>
<p>åœ¨ <code>tasks.json</code> ä¸­æ·»åŠ ä»»åŠ¡ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"label"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Television File Finder"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"zed \"$(tv files)\""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"hide"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"always"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"allow_concurrent_runs"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"use_new_terminal"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li>
<p>ç»‘å®šå¿«æ·é”®ï¼ˆå¦‚è¦†ç›– <code>Cmd/Ctrl+P</code>ï¼‰ï¼š<br/>
ç¼–è¾‘ <code>keymap.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"bindings"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"cmd-p"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"task::Spawn"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span> <span class="hljs-attr">"task_name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Television File Finder"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"reveal_target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"center"</span> <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
</ol>
<p>âœ… æœ€ç»ˆæ•ˆæœï¼š<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00430f5b81394b9ba97e680fb34d7870~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768609403&amp;x-signature=11D4osPrJIEoJY%2BeATDQ6%2FmiO54%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-8">äº”ã€ç»ˆç«¯è‡ªåŠ¨è¿›å…¥é¡¹ç›®ä¸“å± tmux ä¼šè¯</h2>
<p>é€‚åˆé‡åº¦ tmux ç”¨æˆ·â€”â€”æ¯ä¸ªé¡¹ç›®ç‹¬ç«‹ sessionï¼Œé¿å…çª—å£æ··ä¹±ã€‚</p>
<p>åœ¨ <code>settings.json</code> ä¸­é…ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"terminal"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"shell"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"with_arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"program"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/bin/zsh"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"-c"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"tmux new-session -A -s \"$(basename \"$PWD\")\""</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<ul>
<li><code>-A</code>ï¼šè‹¥ session å­˜åœ¨åˆ™ attachï¼Œä¸å­˜åœ¨åˆ™åˆ›å»º</li>
<li><code>-s</code>ï¼šæŒ‡å®š session åä¸ºå½“å‰ç›®å½•åï¼ˆå¦‚ <code>my-project</code>ï¼‰</li>
</ul>
<p>ğŸ“Œ æ•ˆæœï¼šæ‰“å¼€ç»ˆç«¯å³è¿›å…¥ä¸“å± tmuxï¼Œå¯è‡ªç”±åˆ†å±/åˆ‡æ¢çª—å£ï¼š<br/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aea91a77370944369d21e7243ca33aa5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgZ29sYW5n5a2m5Lmg6K6w:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768609403&amp;x-signature=9OgcGlMsctZM51%2Bfdf8mP2aq%2BiY%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>âœ… æ”¯æŒ bash/fishï¼šåªéœ€ä¿®æ”¹ <code>program</code> è·¯å¾„ï¼Œå¦‚ <code>"/bin/bash"</code></p>
</blockquote>
<hr/>
<h2 data-id="heading-9">å…­ã€è®© Zed è®¤è¯†ã€Œé™Œç”Ÿã€æ–‡ä»¶åç¼€ï¼ˆå¦‚ <code>.jsm</code>ï¼‰</h2>
<p>Zed é»˜è®¤ä»…è¯†åˆ«å¸¸è§åç¼€ï¼ˆ<code>.js</code>, <code>.ts</code>, <code>.rs</code>â€¦ï¼‰ã€‚é‡åˆ° <code>.jsm</code>ï¼ˆESM æ¨¡å—ï¼‰ã€<code>.svelte.ts</code> ç­‰å¯æ‰‹åŠ¨æ˜ å°„ï¼š</p>
<h3 data-id="heading-10">ğŸ” ä¸´æ—¶æ–¹æ¡ˆï¼ˆå•æ¬¡ç”Ÿæ•ˆï¼‰</h3>
<p>å‘½ä»¤é¢æ¿ â†’ <code>language selector: toggle</code> â†’ é€‰ <code>JavaScript</code></p>
<p>âš ï¸ ç¼ºç‚¹ï¼šå…³é—­æ–‡ä»¶å³å¤±æ•ˆã€‚</p>
<h3 data-id="heading-11">âœ… æ°¸ä¹…æ–¹æ¡ˆï¼šå†™å…¥ <code>settings.json</code></h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"file_types"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"JavaScript"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"*.jsm"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"*.mjs"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"TypeScript"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"*.cts"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"*.mts"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"Python"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"*.pyi"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"*.tac"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"Rust"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"*.rs.in"</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<blockquote>
<p>âœ… æ”¯æŒ glob é€šé…ç¬¦<br/>
ğŸ” ä¼˜å…ˆå»ºè®®ï¼šå…ˆæŸ¥ <a href="https://link.juejin.cn?target=https%3A%2F%2Fzed.dev%2Fextensions" target="_blank" title="https://zed.dev/extensions" ref="nofollow noopener noreferrer">Zed æ‰©å±•å¸‚åœº</a> æ˜¯å¦æœ‰ä¸“å±è¯­è¨€æ’ä»¶ï¼</p>
</blockquote>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[xampplinux_v174beta11åœ¨ Linux ä¸‹çš„å®‰è£…ä¸é…ç½®æ­¥éª¤]]></title>    <link>https://juejin.cn/post/7593181244709503028</link>    <guid>https://juejin.cn/post/7593181244709503028</guid>    <pubDate>2026-01-10T01:55:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593181244709503028" data-draft-id="7593240931286663220" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="xampplinux_v174beta11åœ¨ Linux ä¸‹çš„å®‰è£…ä¸é…ç½®æ­¥éª¤"/> <meta itemprop="keywords" content="Linux"/> <meta itemprop="datePublished" content="2026-01-10T01:55:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·613541146016"/> <meta itemprop="url" content="https://juejin.cn/user/1602431422584832"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            xampplinux_v174beta11åœ¨ Linux ä¸‹çš„å®‰è£…ä¸é…ç½®æ­¥éª¤
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1602431422584832/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·613541146016
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T01:55:51.000Z" title="Sat Jan 10 2026 01:55:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€‹</p>
<p>Â 1. æŠŠæ–‡ä»¶æ‰”åˆ°æœåŠ¡å™¨ä¸Š</p>
<p><strong>å®‰è£…åŒ…ä¸‹è½½ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fpan.quark.cn%2Fs%2F51842d549892" title="https://pan.quark.cn/s/51842d549892" target="_blank" ref="nofollow noopener noreferrer">pan.quark.cn/s/51842d549â€¦</a>ï¼Œæ‰¾ä¸ªåœ°æ–¹æ”¾è¿™ä¸ªÂ <code>xampplinux_v174beta11.tar.gz</code>æ–‡ä»¶ï¼Œæ¯”å¦‚Â <code>/opt</code>ç›®å½•æˆ–è€…ä½ çš„ä¸ªäººç›®å½•éƒ½è¡Œã€‚</p>
<h3 data-id="heading-0">2. å¼€ä¸ªç»ˆç«¯ï¼Œè¿›åˆ°æ”¾æ–‡ä»¶çš„ç›®å½•</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> /opt
</code></pre>
<p>ï¼ˆå¦‚æœä½ æ”¾åˆ«çš„åœ°æ–¹äº†ï¼Œå°±æŠŠÂ <code>/opt</code>æ¢æˆä½ è‡ªå·±çš„è·¯å¾„ï¼‰</p>
<h3 data-id="heading-1">3. è§£å‹å®ƒ</h3>
<p>ç”¨Â <code>tar</code>å‘½ä»¤æŠŠè¿™ä¸ªå‹ç¼©åŒ…è§£å¼€ã€‚<code>z</code>æ˜¯è¯´å®ƒæ˜¯Â <code>.gz</code>æ ¼å¼çš„ï¼Œ<code>x</code>æ˜¯è§£å‹ï¼Œ<code>v</code>æ˜¯è®©ä½ çœ‹è¿‡ç¨‹ï¼Œ<code>f</code>åé¢è·Ÿä¸Šæ–‡ä»¶åã€‚</p>
<pre><code class="hljs">sudo tar -zxvf xampplinux_v174beta11.tar.gz
</code></pre>
<p>æ•²å®Œå›è½¦ï¼Œç­‰ä¸€ä¼šå„¿å®ƒå°±ç»™ä½ è§£å‹å‡ºä¸€ä¸ªæ–°æ–‡ä»¶å¤¹ï¼Œåå­—å¤§æ¦‚å«Â <code>xampp-linux-xxx...</code>ã€‚</p>
<h3 data-id="heading-2">4. è¿›å»å¯åŠ¨</h3>
<p>ç”¨Â <code>cd</code>å‘½ä»¤è¿›åˆ°åˆšè§£å‹å‡ºæ¥çš„é‚£ä¸ªæ–‡ä»¶å¤¹é‡Œã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> xampp-linux-xxx... <span class="hljs-comment"># æ‰“å‡ ä¸ªå­—æ¯æŒ‰ Tab é”®å¯ä»¥è‡ªåŠ¨è¡¥å…¨åå­—</span>
</code></pre>
<p>ç„¶åç›´æ¥è¿è¡Œå¯åŠ¨è„šæœ¬å°±è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">sudo ./xampp start
</code></pre>
<p>ç¬¬ä¸€æ¬¡å¯åŠ¨å¯èƒ½ä¼šå¼¹ä¸€å †åè®®è®©ä½ çœ‹ï¼Œä¸€ç›´æŒ‰ç©ºæ ¼çœ‹å®Œï¼Œæœ€åè¾“å…¥Â <code>yes</code>åŒæ„ã€‚ä¹‹åæœåŠ¡å°±å¯åŠ¨äº†ã€‚</p>
<h3 data-id="heading-3">5. çœ‹çœ‹èƒ½ä¸èƒ½ç”¨</h3>
<p>æ‰“å¼€æµè§ˆå™¨ï¼Œåœ°å€æ é‡Œè¾“å…¥Â <code>http://ä½ è¿™å°æœºå™¨çš„IPåœ°å€</code>ï¼ˆå¦‚æœæ˜¯æœ¬åœ°æœºå™¨å°±ç”¨Â <code>localhost</code>æˆ–è€…Â <code>127.0.0.1</code>ï¼‰ï¼Œçœ‹åˆ° XAMPP çš„æ¬¢è¿é¡µé¢å°±è¯´æ˜ä¸€åˆ‡ OK äº†ã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Gradle å…¨å±€é…ç½®ä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7593145583348678698</link>    <guid>https://juejin.cn/post/7593145583348678698</guid>    <pubDate>2026-01-10T03:45:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593145583348678698" data-draft-id="7593165280489439273" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Gradle å…¨å±€é…ç½®ä½¿ç”¨"/> <meta itemprop="keywords" content="gradle,IntelliJ IDEA,Android Studio"/> <meta itemprop="datePublished" content="2026-01-10T03:45:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="lzhang1689"/> <meta itemprop="url" content="https://juejin.cn/user/2963939077919255"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Gradle å…¨å±€é…ç½®ä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2963939077919255/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    lzhang1689
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T03:45:00.000Z" title="Sat Jan 10 2026 03:45:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€åŸç†</h3>
<p>Gradle æŸ¥æ‰¾ä¾èµ–æ—¶ä¼š<strong>æŒ‰ä»“åº“å£°æ˜é¡ºåºä¾æ¬¡æœç´¢</strong>ï¼ŒæŠŠæœ¬åœ°ä»“åº“ï¼ˆ<code>mavenLocal()</code>ï¼‰æ”¾åœ¨æ‰€æœ‰è¿œç¨‹ä»“åº“å‰é¢ï¼Œå³å¯å®ç°ä¼˜å…ˆä½¿ç”¨æœ¬åœ°ä¾èµ–ï¼Œæœ¬åœ°ä¸å­˜åœ¨æ—¶æ‰ä»è¿œç¨‹ä¸‹è½½ã€‚</p>
<h3 data-id="heading-1">äºŒã€é…ç½®å…¨å±€åˆå§‹åŒ–æ–‡ä»¶ï¼ˆå…³é”®æ­¥éª¤ï¼‰</h3>
<p>å…¨å±€é…ç½®æ–‡ä»¶å¯¹æ‰€æœ‰ Gradle é¡¹ç›®ç”Ÿæ•ˆï¼Œæ— éœ€é€ä¸ªé¡¹ç›®ä¿®æ”¹ã€‚</p>
<h4 data-id="heading-2">1. å®šä½ / åˆ›å»ºå…¨å±€é…ç½®æ–‡ä»¶</h4>
<p>Gradle å…¨å±€åˆå§‹åŒ–æ–‡ä»¶è·¯å¾„ï¼š</p>
<ul>
<li><strong>Windows</strong>ï¼š<code>C:\Users\&lt;ç”¨æˆ·å&gt;\.gradle\init.gradle</code>ï¼ˆæˆ–<code>init.gradle.kts</code>ï¼‰</li>
<li><strong>Linux/macOS</strong>ï¼š<code>~/.gradle/init.gradle</code>ï¼ˆæˆ–<code>init.gradle.kts</code>ï¼‰</li>
</ul>
<p>å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œç›´æ¥æ‰‹åŠ¨åˆ›å»ºï¼ˆæ— åç¼€ï¼Œæ–‡ä»¶åå›ºå®šä¸º<code>init.gradle</code>ï¼‰ã€‚</p>
<h4 data-id="heading-3">2. ç¼–å†™å…¨å±€ä»“åº“é…ç½®</h4>
<p>ä»¥ä¸‹æä¾›ä¸¤ç§å¸¸ç”¨ DSL å†™æ³•ï¼Œä»»é€‰å…¶ä¸€ï¼š</p>
<h6 data-id="heading-4">å†™æ³• 1ï¼šGroovy DSLï¼ˆ<code>init.gradle</code>ï¼‰</h6>
<pre><code class="hljs language-groovy" lang="groovy"> // Gradle å…¨å±€åˆå§‹åŒ–é…ç½®æ–‡ä»¶
// è·¯å¾„ï¼šWindows(C:\Users\&lt;ç”¨æˆ·å&gt;\.gradle\init.gradle) / Linux/macOS(~/.gradle/init.gradle)
// ä½œç”¨ï¼šå…¨å±€ä¼˜å…ˆä½¿ç”¨æœ¬åœ°Mavenä»“åº“ï¼Œæ­é…å›½å†…é•œåƒåŠ é€Ÿè¿œç¨‹ä¾èµ–ä¸‹è½½

// 1. å…¨å±€é¡¹ç›®ä»“åº“é…ç½®ï¼ˆæ‰€æœ‰é¡¹ç›®ç”Ÿæ•ˆï¼‰
allprojects {
    repositories {
        // ==================== æ ¸å¿ƒï¼šä¼˜å…ˆä½¿ç”¨æœ¬åœ°Mavenä»“åº“ ====================
        mavenLocal {
            // æ›¿æ¢ä¸‹æ–¹è·¯å¾„ä¸ºä½ çš„æœ¬åœ°Mavenä»“åº“å®é™…è·¯å¾„ï¼ˆåˆ é™¤æ³¨é‡Šåç”Ÿæ•ˆï¼‰
            //url = uri('D:/maven-repository')  // Windows é…ç½®
            //url = uri('/Users/yourname/Documents/maven-repo') // macOS/Linuxç¤ºä¾‹
            // è‹¥ä½¿ç”¨é»˜è®¤è·¯å¾„ï¼ˆ~/.m2/repositoryï¼‰ï¼Œå¯åˆ é™¤ä¸Šé¢çš„urlé…ç½®è¡Œ
        }

        // ==================== å›½å†…é•œåƒä»“åº“ï¼ˆåŠ é€Ÿè¿œç¨‹ä¸‹è½½ï¼‰ ====================
        // é˜¿é‡Œäº‘ä¸­å¤®ä»“åº“
        maven { url 'https://maven.aliyun.com/repository/public' }
        // é˜¿é‡Œäº‘Googleä»“åº“ï¼ˆé€‚é…Android/Composeï¼‰
        maven { url 'https://maven.aliyun.com/repository/google' }
        // é˜¿é‡Œäº‘Gradleæ’ä»¶ä»“åº“
        maven { url 'https://maven.aliyun.com/repository/gradle-plugin' }
        // é˜¿é‡Œäº‘Springä»“åº“ï¼ˆå¦‚éœ€Springç›¸å…³ä¾èµ–ï¼‰
        maven { url 'https://maven.aliyun.com/repository/spring' }
        // é˜¿é‡Œäº‘Springæ’ä»¶ä»“åº“
        maven { url 'https://maven.aliyun.com/repository/spring-plugin' }

        // ==================== å®˜æ–¹ä»“åº“ï¼ˆå…œåº•ï¼‰ ====================
        google()              // Android/Composeå®˜æ–¹ä»“åº“
        mavenCentral()        // ä¸­å¤®ä»“åº“
        gradlePluginPortal()  // Gradleæ’ä»¶ä»“åº“
        maven { url 'https://jitpack.io' } // ç¬¬ä¸‰æ–¹å¼€æºåº“ä»“åº“ï¼ˆå¯é€‰ï¼‰
    }

    // å¯é€‰ï¼šä¾èµ–ä¸‹è½½è¶…æ—¶é…ç½®ï¼ˆè§£å†³ç½‘ç»œæ…¢å¯¼è‡´çš„ä¸‹è½½å¤±è´¥ï¼‰
    configurations.all {
        resolutionStrategy {
            cacheDynamicVersionsFor 10, 'minutes'
            cacheChangingModulesFor 10, 'minutes'
        }
        // è¶…æ—¶æ—¶é—´è®¾ç½®
        setTimeout(300) // å•ä½ï¼šç§’
    }
}

// 2. Gradleæ’ä»¶ä»“åº“é…ç½®ï¼ˆå½±å“æ’ä»¶ä¸‹è½½é¡ºåºï¼‰
settingsEvaluated { settings -&gt;
    settings.pluginManagement {
        repositories {
            // æ’ä»¶ä¼˜å…ˆä»æœ¬åœ°ä»“åº“æŸ¥æ‰¾
            mavenLocal {
                // åŒä¸Šé¢çš„æœ¬åœ°ä»“åº“è·¯å¾„ï¼Œå¦‚éœ€è‡ªå®šä¹‰åˆ™å–æ¶ˆæ³¨é‡Šå¹¶ä¿®æ”¹
                // url = uri('D:/maven-repository')  //Windowsç¤ºä¾‹
                // url = uri('/Users/yourname/Documents/maven-repo') // macOS/Linuxç¤ºä¾‹
            }
            // æ’ä»¶é•œåƒä»“åº“
            maven { url 'https://maven.aliyun.com/repository/gradle-plugin' }
            // å®˜æ–¹æ’ä»¶ä»“åº“å…œåº•
            gradlePluginPortal()
            google()
            mavenCentral()
        }
    }
}

// 3. å¯é€‰ï¼šæ„å»ºä¼˜åŒ–é…ç½®
gradle.projectsLoaded {
    rootProject.allprojects {
        buildDir = "${rootProject.rootDir}/.gradle-build/${project.name}"
    }
}

// 4. å¯é€‰ï¼šæ‰“å°ä¾èµ–æŸ¥æ‰¾æ—¥å¿—ï¼ˆéªŒè¯æœ¬åœ°ä»“åº“æ˜¯å¦ç”Ÿæ•ˆï¼‰
gradle.addBuildListener(new BuildListener() {
    @Override
    void buildStarted(Gradle gradle) {
        println "===== Gradle æ„å»ºå¼€å§‹ï¼šä¼˜å…ˆä½¿ç”¨æœ¬åœ°ä»“åº“ ====="
    }

    @Override
    void settingsEvaluated(Settings settings) {}

    @Override
    void projectsLoaded(Gradle gradle) {}

    @Override
    void projectsEvaluated(Gradle gradle) {}

    @Override
    void buildFinished(BuildResult result) {
        println "===== Gradle æ„å»ºç»“æŸï¼šæœ¬åœ°ä»“åº“ä¼˜å…ˆé…ç½®å·²ç”Ÿæ•ˆ ====="
    }
})
</code></pre>
<h6 data-id="heading-5">å†™æ³• 2ï¼šKotlin DSLï¼ˆ<code>init.gradle.kts</code>ï¼‰</h6>
<pre><code class="hljs language-kotlin" lang="kotlin"> <span class="hljs-comment">// Gradle å…¨å±€åˆå§‹åŒ–é…ç½®æ–‡ä»¶ï¼ˆKotlin DSLï¼‰</span>
<span class="hljs-comment">// è·¯å¾„ï¼šWindows(C:\Users\&lt;ç”¨æˆ·å&gt;\.gradle\init.gradle.kts) / Linux/macOS(~/.gradle/init.gradle.kts)</span>
<span class="hljs-comment">// ä½œç”¨ï¼šå…¨å±€ä¼˜å…ˆä½¿ç”¨æœ¬åœ°Mavenä»“åº“ï¼Œæ­é…é˜¿é‡Œäº‘é•œåƒåŠ é€Ÿè¿œç¨‹ä¾èµ–ä¸‹è½½</span>

<span class="hljs-comment">// 1. å…¨å±€é¡¹ç›®ä»“åº“é…ç½®ï¼ˆæ‰€æœ‰Gradleé¡¹ç›®ç”Ÿæ•ˆï¼‰</span>
allprojects {
    repositories {
        <span class="hljs-comment">// ==================== æ ¸å¿ƒï¼šä¼˜å…ˆä½¿ç”¨æœ¬åœ°Mavenä»“åº“ ====================</span>
        mavenLocal {
            <span class="hljs-comment">// æ›¿æ¢ä¸‹æ–¹è·¯å¾„ä¸ºä½ çš„æœ¬åœ°Mavenä»“åº“å®é™…è·¯å¾„ï¼ˆåˆ é™¤æ³¨é‡Šåç”Ÿæ•ˆï¼‰</span>
            <span class="hljs-comment">// url = uri("D:/maven-repository") // Windowsç¤ºä¾‹</span>
            <span class="hljs-comment">// url = uri("/Users/yourname/.m2/repository") // macOS/Linuxç¤ºä¾‹</span>
            <span class="hljs-comment">// è‹¥ä½¿ç”¨é»˜è®¤è·¯å¾„ï¼ˆ~/.m2/repositoryï¼‰ï¼Œç›´æ¥æ³¨é‡Šæ‰urlé…ç½®è¡Œå³å¯</span>
        }

        <span class="hljs-comment">// ==================== å›½å†…é•œåƒä»“åº“ï¼ˆåŠ é€Ÿè¿œç¨‹ä¸‹è½½ï¼‰ ====================</span>
        <span class="hljs-comment">// é˜¿é‡Œäº‘ä¸­å¤®ä»“åº“ï¼ˆé€‚é…Java/KotlinåŸºç¡€ä¾èµ–ï¼‰</span>
        maven(<span class="hljs-string">"https://maven.aliyun.com/repository/public"</span>)
        <span class="hljs-comment">// é˜¿é‡Œäº‘Googleä»“åº“ï¼ˆé€‚é…Android/Composeæ ¸å¿ƒä¾èµ–ï¼‰</span>
        maven(<span class="hljs-string">"https://maven.aliyun.com/repository/google"</span>)
        <span class="hljs-comment">// é˜¿é‡Œäº‘Gradleæ’ä»¶ä»“åº“ï¼ˆé€‚é…Android Gradleæ’ä»¶ï¼‰</span>
        maven(<span class="hljs-string">"https://maven.aliyun.com/repository/gradle-plugin"</span>)
        <span class="hljs-comment">// é˜¿é‡Œäº‘Springä»“åº“ï¼ˆå¦‚éœ€Springç›¸å…³ä¾èµ–ï¼Œå¯é€‰ï¼‰</span>
        maven(<span class="hljs-string">"https://maven.aliyun.com/repository/spring"</span>)
        <span class="hljs-comment">// é˜¿é‡Œäº‘Springæ’ä»¶ä»“åº“ï¼ˆå¯é€‰ï¼‰</span>
        maven(<span class="hljs-string">"https://maven.aliyun.com/repository/spring-plugin"</span>)
        <span class="hljs-comment">// JitPackï¼ˆç¬¬ä¸‰æ–¹å¼€æºåº“ï¼Œå¦‚GitHubä¾èµ–ï¼Œå¯é€‰ï¼‰</span>
        maven(<span class="hljs-string">"https://jitpack.io"</span>)

        <span class="hljs-comment">// ==================== å®˜æ–¹ä»“åº“ï¼ˆå…œåº•ï¼Œä¸å¯åˆ é™¤ï¼‰ ====================</span>
        google()              <span class="hljs-comment">// Android/Composeå®˜æ–¹æ ¸å¿ƒä»“åº“</span>
        mavenCentral()        <span class="hljs-comment">// Mavenä¸­å¤®ä»“åº“</span>
        gradlePluginPortal()  <span class="hljs-comment">// Gradleæ’ä»¶å®˜æ–¹ä»“åº“</span>
    }

    <span class="hljs-comment">// å¯é€‰ï¼šä¾èµ–ä¸‹è½½è¶…æ—¶&amp;ç¼“å­˜ä¼˜åŒ–ï¼ˆè§£å†³Androidä¾èµ–ä¸‹è½½æ…¢/å¤±è´¥ï¼‰</span>
    configurations.all {
        resolutionStrategy {
            <span class="hljs-comment">// åŠ¨æ€ç‰ˆæœ¬ç¼“å­˜æ—¶é—´</span>
            cacheDynamicVersionsFor(<span class="hljs-number">10</span>, <span class="hljs-string">"minutes"</span>)
            <span class="hljs-comment">// å¿«ç…§ç‰ˆæœ¬ç¼“å­˜æ—¶é—´</span>
            cacheChangingModulesFor(<span class="hljs-number">10</span>, <span class="hljs-string">"minutes"</span>)
        }
        <span class="hljs-comment">// ä¾èµ–ä¸‹è½½è¶…æ—¶æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰</span>
        setTimeout(<span class="hljs-number">300</span>)
    }
}

<span class="hljs-comment">// 2. Gradleæ’ä»¶ä»“åº“é…ç½®ï¼ˆå½±å“Android Gradleæ’ä»¶ã€è‡ªå®šä¹‰æ’ä»¶çš„ä¸‹è½½é¡ºåºï¼‰</span>
settingsEvaluated {
    pluginManagement {
        repositories {
            <span class="hljs-comment">// æ’ä»¶ä¼˜å…ˆä»æœ¬åœ°ä»“åº“æŸ¥æ‰¾</span>
            mavenLocal {
                <span class="hljs-comment">// åŒä¸Šé¢çš„æœ¬åœ°ä»“åº“è·¯å¾„ï¼Œå¦‚éœ€è‡ªå®šä¹‰åˆ™å–æ¶ˆæ³¨é‡Šå¹¶ä¿®æ”¹</span>
                <span class="hljs-comment">// url = uri("D:/maven-repository") //Windowsç¤ºä¾‹</span>
                <span class="hljs-comment">// url = uri("/Users/yourname/.m2/repository") // macOS/Linuxç¤ºä¾‹</span>
            }
            <span class="hljs-comment">// æ’ä»¶é•œåƒä»“åº“</span>
            maven(<span class="hljs-string">"https://maven.aliyun.com/repository/gradle-plugin"</span>)
            <span class="hljs-comment">// å®˜æ–¹æ’ä»¶ä»“åº“å…œåº•</span>
            gradlePluginPortal()
            google()
            mavenCentral()
        }
    }
}

<span class="hljs-comment">// 3. å¯é€‰ï¼šAndroidé¡¹ç›®æ„å»ºç›®å½•ä¼˜åŒ–ï¼ˆé¿å…æ¨¡å—é—´æ„å»ºç›®å½•åˆ†æ•£ï¼‰</span>
gradle.projectsLoaded {
    rootProject.allprojects {
        buildDir = file(<span class="hljs-string">"<span class="hljs-subst">${rootProject.rootDir}</span>/.gradle-build/<span class="hljs-subst">${project.name}</span>"</span>)
    }
}

<span class="hljs-comment">// 4. å¯é€‰ï¼šæ‰“å°æ„å»ºæ—¥å¿—ï¼ˆéªŒè¯æœ¬åœ°ä»“åº“é…ç½®æ˜¯å¦ç”Ÿæ•ˆï¼‰</span>
gradle.addBuildListener(<span class="hljs-keyword">object</span> : BuildListener {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">buildStarted</span><span class="hljs-params">(gradle: <span class="hljs-type">Gradle</span>)</span></span> {
        println(<span class="hljs-string">"===== Gradle æ„å»ºå¼€å§‹ï¼šä¼˜å…ˆä½¿ç”¨æœ¬åœ°ä»“åº“ï¼ˆKotlin DSLé…ç½®ï¼‰ ====="</span>)
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">settingsEvaluated</span><span class="hljs-params">(settings: <span class="hljs-type">Settings</span>)</span></span> {}
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">projectsLoaded</span><span class="hljs-params">(gradle: <span class="hljs-type">Gradle</span>)</span></span> {}
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">projectsEvaluated</span><span class="hljs-params">(gradle: <span class="hljs-type">Gradle</span>)</span></span> {}
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">buildFinished</span><span class="hljs-params">(result: <span class="hljs-type">BuildResult</span>)</span></span> {
        <span class="hljs-keyword">val</span> status = <span class="hljs-keyword">if</span> (result.failure == <span class="hljs-literal">null</span>) <span class="hljs-string">"æˆåŠŸ"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"å¤±è´¥"</span>
        println(<span class="hljs-string">"===== Gradle æ„å»ºç»“æŸï¼šæœ¬åœ°ä»“åº“ä¼˜å…ˆé…ç½®å·²ç”Ÿæ•ˆï¼ˆæ„å»º<span class="hljs-subst">${status}</span>ï¼‰ ====="</span>)
    }
})

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¨‹åºå‘˜æ­¦å­¦ä¿®ç‚¼æ‰‹å†Œï¼ˆäºŒï¼‰ï¼šè¿›é˜¶ç¯‡â€”â€”å°æœ‰æ‰€æˆï¼Œä»èƒ½è·‘å°±è¡Œåˆ°çŸ¥å…¶æ‰€ä»¥ç„¶]]></title>    <link>https://juejin.cn/post/7593215107405660196</link>    <guid>https://juejin.cn/post/7593215107405660196</guid>    <pubDate>2026-01-10T01:42:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593215107405660196" data-draft-id="7593139476841496582" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¨‹åºå‘˜æ­¦å­¦ä¿®ç‚¼æ‰‹å†Œï¼ˆäºŒï¼‰ï¼šè¿›é˜¶ç¯‡â€”â€”å°æœ‰æ‰€æˆï¼Œä»èƒ½è·‘å°±è¡Œåˆ°çŸ¥å…¶æ‰€ä»¥ç„¶"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-10T01:42:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜Agions"/> <meta itemprop="url" content="https://juejin.cn/user/360295545187751"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¨‹åºå‘˜æ­¦å­¦ä¿®ç‚¼æ‰‹å†Œï¼ˆäºŒï¼‰ï¼šè¿›é˜¶ç¯‡â€”â€”å°æœ‰æ‰€æˆï¼Œä»èƒ½è·‘å°±è¡Œåˆ°çŸ¥å…¶æ‰€ä»¥ç„¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/360295545187751/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜Agions
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T01:42:19.000Z" title="Sat Jan 10 2026 01:42:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>"å…¥é—¨å¼Ÿå­æ±‚çš„æ˜¯'èƒ½ç”¨'ï¼Œä¸‰æµé«˜æ‰‹æ±‚çš„æ˜¯'å¥½ç”¨'ã€‚"
â€”â€” ã€Šç¨‹åºå‘˜æ­¦å­¦å¿ƒæ³•ã€‹</p>
</blockquote>
<h2 data-id="heading-0">å‰æƒ…å›é¡¾</h2>
<p>åœ¨ä¸Šä¸€ç¯‡ä¸­ï¼Œæˆ‘ä»¬è®²è¿°äº†åˆå­¦ä¹ç»ƒçš„ä¿®ç‚¼â€”â€”é‚£ä¸ª"Hello World"åˆ°"èƒ½è·‘å°±è¡Œ"çš„é˜¶æ®µã€‚</p>
<p>å½“ä½ å¼€å§‹æ€è€ƒ"ä¸ºä»€ä¹ˆè¦è¿™æ ·å†™"è€Œä¸æ˜¯"æ€ä¹ˆè®©å®ƒè·‘èµ·æ¥"çš„æ—¶å€™ï¼Œæ­å–œä½ ï¼Œä½ å·²ç»è¸å…¥äº†<strong>å°æœ‰æ‰€æˆ</strong>çš„å¤§é—¨ï¼Œæˆä¸ºäº†æ±Ÿæ¹–ä¸Šçš„ä¸‰æµé«˜æ‰‹ã€‚</p>
<hr/>
<h2 data-id="heading-1">ç¬¬ä¸€ç« ï¼šå°æœ‰æ‰€æˆçš„ç‰¹å¾</h2>
<h3 data-id="heading-2">1.1 ä»€ä¹ˆæ˜¯å°æœ‰æ‰€æˆï¼Ÿ</h3>
<p>å°æœ‰æ‰€æˆï¼Œæ˜¯ç¨‹åºå‘˜ä»"ä¼šå†™ä»£ç "åˆ°"ä¼šå†™å¥½ä»£ç "çš„å…³é”®é˜¶æ®µã€‚</p>
<p>å°±åƒæ­¦ä¾ å°è¯´é‡Œï¼Œå¼Ÿå­ä»"ä¼šå‡ æ‹›èŠ±æ‹³ç»£è…¿"åˆ°"å¼€å§‹ä¿®ç‚¼å†…åŠŸå¿ƒæ³•"çš„è½¬å˜ï¼Œè™½ç„¶è¿˜ç®—ä¸ä¸Šä¸€æµé«˜æ‰‹ï¼Œä½†å·²ç»èƒ½åœ¨æ±Ÿæ¹–ä¸Šè¡Œèµ°äº†ã€‚</p>
<p><strong>å°æœ‰æ‰€æˆç¨‹åºå‘˜çš„å…¸å‹ç‰¹å¾ï¼š</strong></p>
<ul>
<li>å¼€å§‹å…³æ³¨ä»£ç è§„èŒƒ</li>
<li>çŸ¥é“ä»€ä¹ˆæ˜¯"ä»£ç åå‘³é“"</li>
<li>ä¼šå†™å•å…ƒæµ‹è¯•ï¼ˆè™½ç„¶ç»å¸¸å·æ‡’ä¸å†™ï¼‰</li>
<li>å¼€å§‹ä½¿ç”¨è®¾è®¡æ¨¡å¼ï¼ˆè™½ç„¶ç»å¸¸ç”¨é”™ï¼‰</li>
<li>Git ä¸å†åªä¼š<code>add</code>ã€<code>commit</code>ã€<code>push</code></li>
</ul>
<h3 data-id="heading-3">1.2 åˆå­¦ä¹ç»ƒ vs å°æœ‰æ‰€æˆ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åŒä¸€ä¸ªéœ€æ±‚ï¼Œä¸åŒå¢ƒç•Œçš„å®ç°</span>

<span class="hljs-comment">// éœ€æ±‚ï¼šæ ¹æ®ç”¨æˆ·ç±»å‹è¿”å›ä¸åŒçš„æŠ˜æ‰£</span>

<span class="hljs-comment">// åˆå­¦ä¹ç»ƒå†™æ³•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getDiscount</span>(<span class="hljs-params">userType</span>) {
  <span class="hljs-keyword">if</span> (userType === <span class="hljs-string">"normal"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (userType === <span class="hljs-string">"vip"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">0.1</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (userType === <span class="hljs-string">"svip"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">0.2</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (userType === <span class="hljs-string">"partner"</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-number">0.3</span>
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
  }
}

<span class="hljs-comment">// å°æœ‰æ‰€æˆå†™æ³•</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DISCOUNT_MAP</span> = {
  <span class="hljs-attr">normal</span>: <span class="hljs-number">0</span>,
  <span class="hljs-attr">vip</span>: <span class="hljs-number">0.1</span>,
  <span class="hljs-attr">svip</span>: <span class="hljs-number">0.2</span>,
  <span class="hljs-attr">partner</span>: <span class="hljs-number">0.3</span>,
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getDiscount</span>(<span class="hljs-params">userType</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">DISCOUNT_MAP</span>[userType] ?? <span class="hljs-number">0</span>
}

<span class="hljs-comment">// åŒºåˆ«ï¼š</span>
<span class="hljs-comment">// 1. é…ç½®ä¸é€»è¾‘åˆ†ç¦»</span>
<span class="hljs-comment">// 2. æ–°å¢ç±»å‹åªéœ€æ”¹é…ç½®ï¼Œä¸éœ€æ”¹ä»£ç </span>
<span class="hljs-comment">// 3. æ›´å®¹æ˜“æµ‹è¯•</span>
<span class="hljs-comment">// 4. æ›´å®¹æ˜“ç†è§£</span>
</code></pre>
<hr/>
<h2 data-id="heading-4">ç¬¬äºŒç« ï¼šå°æœ‰æ‰€æˆçš„ä¿®ç‚¼å†…å®¹</h2>
<h3 data-id="heading-5">2.1 ç¬¬ä¸€å¼ï¼šä»£ç è§„èŒƒ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å°æœ‰æ‰€æˆå¿…ä¿®ï¼šä»£ç è§„èŒƒ</span>

<span class="hljs-comment">// ===== å‘½åè§„èŒƒ =====</span>

<span class="hljs-comment">// å˜é‡ï¼šå°é©¼å³°ï¼Œåè¯</span>
<span class="hljs-keyword">const</span> userName = <span class="hljs-string">"å¼ ä¸‰"</span>
<span class="hljs-keyword">const</span> userAge = <span class="hljs-number">18</span>
<span class="hljs-keyword">const</span> isActive = <span class="hljs-literal">true</span> <span class="hljs-comment">// å¸ƒå°”å€¼ç”¨is/has/canå¼€å¤´</span>

<span class="hljs-comment">// å‡½æ•°ï¼šå°é©¼å³°ï¼ŒåŠ¨è¯å¼€å¤´</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserInfo</span>(<span class="hljs-params"/>) {}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateTotal</span>(<span class="hljs-params"/>) {}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateEmail</span>(<span class="hljs-params"/>) {}

<span class="hljs-comment">// ç±»ï¼šå¤§é©¼å³°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderManager</span> {}

<span class="hljs-comment">// å¸¸é‡ï¼šå…¨å¤§å†™ï¼Œä¸‹åˆ’çº¿åˆ†éš”</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MAX_RETRY_COUNT</span> = <span class="hljs-number">3</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">API_BASE_URL</span> = <span class="hljs-string">"https://api.example.com"</span>

<span class="hljs-comment">// ===== æ ¼å¼è§„èŒƒ =====</span>

<span class="hljs-comment">// ç¼©è¿›ï¼š2ç©ºæ ¼æˆ–4ç©ºæ ¼ï¼Œå›¢é˜Ÿç»Ÿä¸€å³å¯</span>
<span class="hljs-comment">// è¡Œå®½ï¼š80-120å­—ç¬¦</span>
<span class="hljs-comment">// ç©ºè¡Œï¼šé€»è¾‘å—ä¹‹é—´ç©ºä¸€è¡Œ</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">processOrder</span>(<span class="hljs-params">order</span>) {
  <span class="hljs-comment">// å‚æ•°æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (!order) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Order is required"</span>)
  }

  <span class="hljs-comment">// ä¸šåŠ¡é€»è¾‘</span>
  <span class="hljs-keyword">const</span> total = <span class="hljs-title function_">calculateTotal</span>(order)
  <span class="hljs-keyword">const</span> discount = <span class="hljs-title function_">getDiscount</span>(order.<span class="hljs-property">user</span>)
  <span class="hljs-keyword">const</span> finalPrice = total * (<span class="hljs-number">1</span> - discount)

  <span class="hljs-comment">// è¿”å›ç»“æœ</span>
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">orderId</span>: order.<span class="hljs-property">id</span>,
    finalPrice,
  }
}
</code></pre>
<h3 data-id="heading-6">2.2 ç¬¬äºŒå¼ï¼šå‡½æ•°çš„è‰ºæœ¯</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å°æœ‰æ‰€æˆçš„å‡½æ•°ä¿®ç‚¼</span>

<span class="hljs-comment">// ===== åŸåˆ™1ï¼šå•ä¸€èŒè´£ =====</span>

<span class="hljs-comment">// ä¸å¥½ï¼šä¸€ä¸ªå‡½æ•°åšå¤ªå¤šäº‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processUser</span>(<span class="hljs-params">user</span>) {
  <span class="hljs-comment">// éªŒè¯</span>
  <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">email</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Email required"</span>)
  <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">name</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Name required"</span>)

  <span class="hljs-comment">// æ ¼å¼åŒ–</span>
  user.<span class="hljs-property">email</span> = user.<span class="hljs-property">email</span>.<span class="hljs-title function_">toLowerCase</span>()
  user.<span class="hljs-property">name</span> = user.<span class="hljs-property">name</span>.<span class="hljs-title function_">trim</span>()

  <span class="hljs-comment">// ä¿å­˜</span>
  database.<span class="hljs-title function_">save</span>(user)

  <span class="hljs-comment">// å‘é€é‚®ä»¶</span>
  <span class="hljs-title function_">sendWelcomeEmail</span>(user.<span class="hljs-property">email</span>)

  <span class="hljs-comment">// è®°å½•æ—¥å¿—</span>
  logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">"User created"</span>, user)
}

<span class="hljs-comment">// å¥½ï¼šæ¯ä¸ªå‡½æ•°åªåšä¸€ä»¶äº‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateUser</span>(<span class="hljs-params">user</span>) {
  <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">email</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Email required"</span>)
  <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">name</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Name required"</span>)
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">formatUser</span>(<span class="hljs-params">user</span>) {
  <span class="hljs-keyword">return</span> {
    ...user,
    <span class="hljs-attr">email</span>: user.<span class="hljs-property">email</span>.<span class="hljs-title function_">toLowerCase</span>(),
    <span class="hljs-attr">name</span>: user.<span class="hljs-property">name</span>.<span class="hljs-title function_">trim</span>(),
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">user</span>) {
  <span class="hljs-title function_">validateUser</span>(user)
  <span class="hljs-keyword">const</span> formattedUser = <span class="hljs-title function_">formatUser</span>(user)
  database.<span class="hljs-title function_">save</span>(formattedUser)
  <span class="hljs-title function_">sendWelcomeEmail</span>(formattedUser.<span class="hljs-property">email</span>)
  logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">"User created"</span>, formattedUser)
}

<span class="hljs-comment">// ===== åŸåˆ™2ï¼šå‚æ•°ä¸è¦å¤ªå¤š =====</span>

<span class="hljs-comment">// ä¸å¥½ï¼šå‚æ•°å¤ªå¤š</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createOrder</span>(<span class="hljs-params">
  userId,
  productId,
  quantity,
  price,
  discount,
  address,
  phone,
  note
</span>) {
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// å¥½ï¼šä½¿ç”¨å¯¹è±¡å‚æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createOrder</span>(<span class="hljs-params">options</span>) {
  <span class="hljs-keyword">const</span> { userId, productId, quantity, price, discount, address, phone, note } =
    options
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// æˆ–è€…ä½¿ç”¨TypeScriptå®šä¹‰æ¥å£</span>
interface <span class="hljs-title class_">CreateOrderOptions</span> {
  <span class="hljs-attr">userId</span>: string;
  <span class="hljs-attr">productId</span>: string;
  <span class="hljs-attr">quantity</span>: number;
  <span class="hljs-attr">price</span>: number;
  discount?: number;
  <span class="hljs-attr">address</span>: string;
  <span class="hljs-attr">phone</span>: string;
  note?: string;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">createOrder</span>(<span class="hljs-params">options: CreateOrderOptions</span>) {
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// ===== åŸåˆ™3ï¼šé¿å…å‰¯ä½œç”¨ =====</span>

<span class="hljs-comment">// ä¸å¥½ï¼šä¿®æ”¹äº†ä¼ å…¥çš„å‚æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">addItem</span>(<span class="hljs-params">cart, item</span>) {
  cart.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(item) <span class="hljs-comment">// ä¿®æ”¹äº†åŸæ•°ç»„</span>
  cart.<span class="hljs-property">total</span> += item.<span class="hljs-property">price</span> <span class="hljs-comment">// ä¿®æ”¹äº†åŸå¯¹è±¡</span>
  <span class="hljs-keyword">return</span> cart
}

<span class="hljs-comment">// å¥½ï¼šè¿”å›æ–°å¯¹è±¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">addItem</span>(<span class="hljs-params">cart, item</span>) {
  <span class="hljs-keyword">return</span> {
    ...cart,
    <span class="hljs-attr">items</span>: [...cart.<span class="hljs-property">items</span>, item],
    <span class="hljs-attr">total</span>: cart.<span class="hljs-property">total</span> + item.<span class="hljs-property">price</span>,
  }
}
</code></pre>
<h3 data-id="heading-7">2.3 ç¬¬ä¸‰å¼ï¼šé”™è¯¯å¤„ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å°æœ‰æ‰€æˆçš„é”™è¯¯å¤„ç†ä¿®ç‚¼</span>

<span class="hljs-comment">// ===== åˆå­¦ä¹ç»ƒçš„é”™è¯¯å¤„ç† =====</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getUser</span>(<span class="hljs-params">id</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> database.<span class="hljs-title function_">findUser</span>(id)
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e) <span class="hljs-comment">// æ‰“å°ä¸€ä¸‹å°±å®Œäº‹äº†</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }
}

<span class="hljs-comment">// ===== å°æœ‰æ‰€æˆçš„é”™è¯¯å¤„ç† =====</span>

<span class="hljs-comment">// 1. å®šä¹‰æ˜ç¡®çš„é”™è¯¯ç±»å‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ValidationError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Error</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">message</span>) {
    <span class="hljs-variable language_">super</span>(message)
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">"ValidationError"</span>
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">NotFoundError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Error</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">resource, id</span>) {
    <span class="hljs-variable language_">super</span>(<span class="hljs-string">`<span class="hljs-subst">${resource}</span> with id <span class="hljs-subst">${id}</span> not found`</span>)
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">"NotFoundError"</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">resource</span> = resource
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = id
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseError</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Error</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">message, originalError</span>) {
    <span class="hljs-variable language_">super</span>(message)
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">"DatabaseError"</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">originalError</span> = originalError
  }
}

<span class="hljs-comment">// 2. åœ¨åˆé€‚çš„å±‚çº§å¤„ç†é”™è¯¯</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getUser</span>(<span class="hljs-params">id</span>) {
  <span class="hljs-keyword">if</span> (!id) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ValidationError</span>(<span class="hljs-string">"User ID is required"</span>)
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> user = database.<span class="hljs-title function_">findUser</span>(id)
    <span class="hljs-keyword">if</span> (!user) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NotFoundError</span>(<span class="hljs-string">"User"</span>, id)
    }
    <span class="hljs-keyword">return</span> user
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">NotFoundError</span>) {
      <span class="hljs-keyword">throw</span> error <span class="hljs-comment">// ä¸šåŠ¡é”™è¯¯ï¼Œç»§ç»­æŠ›å‡º</span>
    }
    <span class="hljs-comment">// æ•°æ®åº“é”™è¯¯ï¼ŒåŒ…è£…åæŠ›å‡º</span>
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatabaseError</span>(<span class="hljs-string">"Failed to fetch user"</span>, error)
  }
}

<span class="hljs-comment">// 3. åœ¨æœ€å¤–å±‚ç»Ÿä¸€å¤„ç†</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleRequest</span>(<span class="hljs-params">req, res</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUser</span>(req.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>)
    res.<span class="hljs-title function_">json</span>(user)
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">ValidationError</span>) {
      res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span> })
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">NotFoundError</span>) {
      res.<span class="hljs-title function_">status</span>(<span class="hljs-number">404</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span> })
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// æœªçŸ¥é”™è¯¯ï¼Œè®°å½•æ—¥å¿—ï¼Œè¿”å›é€šç”¨é”™è¯¯</span>
      logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Unexpected error"</span>, error)
      res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">"Internal server error"</span> })
    }
  }
}
</code></pre>
<h3 data-id="heading-8">2.4 ç¬¬å››å¼ï¼šå•å…ƒæµ‹è¯•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å°æœ‰æ‰€æˆå¿…ä¿®ï¼šå•å…ƒæµ‹è¯•</span>

<span class="hljs-comment">// è¢«æµ‹è¯•çš„å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculatePrice</span>(<span class="hljs-params">basePrice, quantity, discount = <span class="hljs-number">0</span></span>) {
  <span class="hljs-keyword">if</span> (basePrice &lt; <span class="hljs-number">0</span> || quantity &lt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Price and quantity must be non-negative"</span>)
  }
  <span class="hljs-keyword">if</span> (discount &lt; <span class="hljs-number">0</span> || discount &gt; <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Discount must be between 0 and 1"</span>)
  }

  <span class="hljs-keyword">const</span> subtotal = basePrice * quantity
  <span class="hljs-keyword">const</span> discountAmount = subtotal * discount
  <span class="hljs-keyword">return</span> subtotal - discountAmount
}

<span class="hljs-comment">// å•å…ƒæµ‹è¯•</span>
<span class="hljs-title function_">describe</span>(<span class="hljs-string">"calculatePrice"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æ­£å¸¸æƒ…å†µ</span>
  <span class="hljs-title function_">test</span>(<span class="hljs-string">"should calculate price without discount"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">calculatePrice</span>(<span class="hljs-number">100</span>, <span class="hljs-number">2</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">200</span>)
  })

  <span class="hljs-title function_">test</span>(<span class="hljs-string">"should calculate price with discount"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">calculatePrice</span>(<span class="hljs-number">100</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0.1</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">180</span>)
  })

  <span class="hljs-title function_">test</span>(<span class="hljs-string">"should handle zero quantity"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">calculatePrice</span>(<span class="hljs-number">100</span>, <span class="hljs-number">0</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">0</span>)
  })

  <span class="hljs-comment">// è¾¹ç•Œæƒ…å†µ</span>
  <span class="hljs-title function_">test</span>(<span class="hljs-string">"should handle 100% discount"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">calculatePrice</span>(<span class="hljs-number">100</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-number">0</span>)
  })

  <span class="hljs-comment">// é”™è¯¯æƒ…å†µ</span>
  <span class="hljs-title function_">test</span>(<span class="hljs-string">"should throw error for negative price"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">calculatePrice</span>(-<span class="hljs-number">100</span>, <span class="hljs-number">2</span>)).<span class="hljs-title function_">toThrow</span>(
      <span class="hljs-string">"Price and quantity must be non-negative"</span>
    )
  })

  <span class="hljs-title function_">test</span>(<span class="hljs-string">"should throw error for invalid discount"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">calculatePrice</span>(<span class="hljs-number">100</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1.5</span>)).<span class="hljs-title function_">toThrow</span>(
      <span class="hljs-string">"Discount must be between 0 and 1"</span>
    )
  })
})

<span class="hljs-comment">// æµ‹è¯•è¦†ç›–çš„ä¸‰ä¸ªç»´åº¦ï¼š</span>
<span class="hljs-comment">// 1. æ­£å¸¸è·¯å¾„ï¼ˆHappy Pathï¼‰</span>
<span class="hljs-comment">// 2. è¾¹ç•Œæ¡ä»¶ï¼ˆEdge Casesï¼‰</span>
<span class="hljs-comment">// 3. é”™è¯¯æƒ…å†µï¼ˆError Casesï¼‰</span>
</code></pre>
<h3 data-id="heading-9">2.5 ç¬¬äº”å¼ï¼šè®¾è®¡æ¨¡å¼å…¥é—¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å°æœ‰æ‰€æˆçš„è®¾è®¡æ¨¡å¼ä¿®ç‚¼</span>

<span class="hljs-comment">// ===== æ¨¡å¼1ï¼šå•ä¾‹æ¨¡å¼ =====</span>
<span class="hljs-comment">// åœºæ™¯ï¼šå…¨å±€åªéœ€è¦ä¸€ä¸ªå®ä¾‹</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Logger</span> {
  <span class="hljs-keyword">static</span> instance = <span class="hljs-literal">null</span>

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getInstance</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Logger</span>.<span class="hljs-property">instance</span>) {
      <span class="hljs-title class_">Logger</span>.<span class="hljs-property">instance</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Logger</span>()
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Logger</span>.<span class="hljs-property">instance</span>
  }

  <span class="hljs-title function_">log</span>(<span class="hljs-params">message</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toISOString()}</span>] <span class="hljs-subst">${message}</span>`</span>)
  }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> logger1 = <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">getInstance</span>()
<span class="hljs-keyword">const</span> logger2 = <span class="hljs-title class_">Logger</span>.<span class="hljs-title function_">getInstance</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(logger1 === logger2) <span class="hljs-comment">// true</span>

<span class="hljs-comment">// ===== æ¨¡å¼2ï¼šå·¥å‚æ¨¡å¼ =====</span>
<span class="hljs-comment">// åœºæ™¯ï¼šæ ¹æ®æ¡ä»¶åˆ›å»ºä¸åŒç±»å‹çš„å¯¹è±¡</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserFactory</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">create</span>(<span class="hljs-params">type, data</span>) {
    <span class="hljs-keyword">switch</span> (type) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">"admin"</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AdminUser</span>(data)
      <span class="hljs-keyword">case</span> <span class="hljs-string">"vip"</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">VipUser</span>(data)
      <span class="hljs-attr">default</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NormalUser</span>(data)
    }
  }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> admin = <span class="hljs-title class_">UserFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">"admin"</span>, { <span class="hljs-attr">name</span>: <span class="hljs-string">"ç®¡ç†å‘˜"</span> })
<span class="hljs-keyword">const</span> vip = <span class="hljs-title class_">UserFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">"vip"</span>, { <span class="hljs-attr">name</span>: <span class="hljs-string">"VIPç”¨æˆ·"</span> })

<span class="hljs-comment">// ===== æ¨¡å¼3ï¼šç­–ç•¥æ¨¡å¼ =====</span>
<span class="hljs-comment">// åœºæ™¯ï¼šæ ¹æ®ä¸åŒæƒ…å†µä½¿ç”¨ä¸åŒçš„ç®—æ³•</span>

<span class="hljs-comment">// ä¸å¥½ï¼šif-elseåœ°ç‹±</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateShipping</span>(<span class="hljs-params">type, weight</span>) {
  <span class="hljs-keyword">if</span> (type === <span class="hljs-string">"standard"</span>) {
    <span class="hljs-keyword">return</span> weight * <span class="hljs-number">5</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === <span class="hljs-string">"express"</span>) {
    <span class="hljs-keyword">return</span> weight * <span class="hljs-number">10</span>
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === <span class="hljs-string">"overnight"</span>) {
    <span class="hljs-keyword">return</span> weight * <span class="hljs-number">20</span>
  }
}

<span class="hljs-comment">// å¥½ï¼šç­–ç•¥æ¨¡å¼</span>
<span class="hljs-keyword">const</span> shippingStrategies = {
  <span class="hljs-attr">standard</span>: <span class="hljs-function">(<span class="hljs-params">weight</span>) =&gt;</span> weight * <span class="hljs-number">5</span>,
  <span class="hljs-attr">express</span>: <span class="hljs-function">(<span class="hljs-params">weight</span>) =&gt;</span> weight * <span class="hljs-number">10</span>,
  <span class="hljs-attr">overnight</span>: <span class="hljs-function">(<span class="hljs-params">weight</span>) =&gt;</span> weight * <span class="hljs-number">20</span>,
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateShipping</span>(<span class="hljs-params">type, weight</span>) {
  <span class="hljs-keyword">const</span> strategy = shippingStrategies[type]
  <span class="hljs-keyword">if</span> (!strategy) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Unknown shipping type: <span class="hljs-subst">${type}</span>`</span>)
  }
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">strategy</span>(weight)
}

<span class="hljs-comment">// ===== æ¨¡å¼4ï¼šè§‚å¯Ÿè€…æ¨¡å¼ =====</span>
<span class="hljs-comment">// åœºæ™¯ï¼šä¸€ä¸ªå¯¹è±¡çŠ¶æ€å˜åŒ–æ—¶é€šçŸ¥å…¶ä»–å¯¹è±¡</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">EventEmitter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span> = {}
  }

  <span class="hljs-title function_">on</span>(<span class="hljs-params">event, callback</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event] = []
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event].<span class="hljs-title function_">push</span>(callback)
  }

  <span class="hljs-title function_">off</span>(<span class="hljs-params">event, callback</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event]) <span class="hljs-keyword">return</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event] = <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event].<span class="hljs-title function_">filter</span>(
      <span class="hljs-function">(<span class="hljs-params">cb</span>) =&gt;</span> cb !== callback
    )
  }

  <span class="hljs-title function_">emit</span>(<span class="hljs-params">event, data</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event]) <span class="hljs-keyword">return</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>[event].<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">callback</span>) =&gt;</span> <span class="hljs-title function_">callback</span>(data))
  }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> emitter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventEmitter</span>()

emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">"userCreated"</span>, <span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å‘é€æ¬¢è¿é‚®ä»¶ç»™"</span>, user.<span class="hljs-property">email</span>)
})

emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">"userCreated"</span>, <span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è®°å½•æ—¥å¿—"</span>, user.<span class="hljs-property">name</span>)
})

emitter.<span class="hljs-title function_">emit</span>(<span class="hljs-string">"userCreated"</span>, { <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-attr">email</span>: <span class="hljs-string">"test@example.com"</span> })
</code></pre>
<h3 data-id="heading-10">2.6 ç¬¬å…­å¼ï¼šGit è¿›é˜¶</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç­‘åŸºæœŸçš„Gitä¿®ç‚¼</span>

<span class="hljs-comment"># ===== ç»ƒæ°”æœŸçš„Git =====</span>
git add .
git commit -m <span class="hljs-string">"update"</span>
git push
<span class="hljs-comment"># å®Œäº‹ï¼</span>

<span class="hljs-comment"># ===== å°æœ‰æ‰€æˆçš„Git =====</span>

<span class="hljs-comment"># 1. æœ‰æ„ä¹‰çš„æäº¤ä¿¡æ¯</span>
git commit -m <span class="hljs-string">"feat: æ·»åŠ ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½"</span>
git commit -m <span class="hljs-string">"fix: ä¿®å¤ç™»å½•é¡µé¢æ ·å¼é”™ä½é—®é¢˜"</span>
git commit -m <span class="hljs-string">"refactor: é‡æ„è®¢å•è®¡ç®—é€»è¾‘"</span>
git commit -m <span class="hljs-string">"docs: æ›´æ–°APIæ–‡æ¡£"</span>
git commit -m <span class="hljs-string">"test: æ·»åŠ ç”¨æˆ·æœåŠ¡å•å…ƒæµ‹è¯•"</span>

<span class="hljs-comment"># æäº¤ä¿¡æ¯æ ¼å¼ï¼š&lt;type&gt;: &lt;description&gt;</span>
<span class="hljs-comment"># type: feat, fix, refactor, docs, test, chore, style</span>

<span class="hljs-comment"># 2. åˆ†æ”¯ç®¡ç†</span>
git checkout -b feature/user-registration  <span class="hljs-comment"># åŠŸèƒ½åˆ†æ”¯</span>
git checkout -b bugfix/login-style         <span class="hljs-comment"># ä¿®å¤åˆ†æ”¯</span>
git checkout -b hotfix/security-patch      <span class="hljs-comment"># ç´§æ€¥ä¿®å¤</span>

<span class="hljs-comment"># 3. åˆå¹¶å‰å…ˆrebase</span>
git checkout feature/user-registration
git rebase main  <span class="hljs-comment"># æŠŠmainçš„æœ€æ–°ä»£ç åˆå¹¶è¿›æ¥</span>
git checkout main
git merge feature/user-registration

<span class="hljs-comment"># 4. äº¤äº’å¼rebaseæ•´ç†æäº¤</span>
git rebase -i HEAD~3  <span class="hljs-comment"># æ•´ç†æœ€è¿‘3ä¸ªæäº¤</span>
<span class="hljs-comment"># å¯ä»¥åˆå¹¶ã€ä¿®æ”¹ã€åˆ é™¤æäº¤</span>

<span class="hljs-comment"># 5. æš‚å­˜å·¥ä½œåŒº</span>
git stash           <span class="hljs-comment"># æš‚å­˜å½“å‰ä¿®æ”¹</span>
git stash list      <span class="hljs-comment"># æŸ¥çœ‹æš‚å­˜åˆ—è¡¨</span>
git stash pop       <span class="hljs-comment"># æ¢å¤æœ€è¿‘çš„æš‚å­˜</span>
git stash drop      <span class="hljs-comment"># åˆ é™¤æœ€è¿‘çš„æš‚å­˜</span>

<span class="hljs-comment"># 6. æŸ¥çœ‹å†å²</span>
git <span class="hljs-built_in">log</span> --oneline --graph  <span class="hljs-comment"># å›¾å½¢åŒ–æŸ¥çœ‹æäº¤å†å²</span>
git blame file.js          <span class="hljs-comment"># æŸ¥çœ‹æ¯è¡Œä»£ç æ˜¯è°å†™çš„</span>
git diff HEAD~1            <span class="hljs-comment"># æŸ¥çœ‹æœ€è¿‘ä¸€æ¬¡æäº¤çš„æ”¹åŠ¨</span>
</code></pre>
<hr/>
<h2 data-id="heading-11">ç¬¬ä¸‰ç« ï¼šå°æœ‰æ‰€æˆçš„å¸¸è§ç“¶é¢ˆ</h2>
<h3 data-id="heading-12">3.1 è¿‡åº¦è®¾è®¡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç—‡çŠ¶ï¼šç®€å•é—®é¢˜å¤æ‚åŒ–</span>

<span class="hljs-comment">// éœ€æ±‚ï¼šè®¡ç®—ä¸¤ä¸ªæ•°çš„å’Œ</span>

<span class="hljs-comment">// è¿‡åº¦è®¾è®¡ç‰ˆæœ¬</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">strategy</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">strategy</span> = strategy
  }

  <span class="hljs-title function_">setStrategy</span>(<span class="hljs-params">strategy</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">strategy</span> = strategy
  }

  <span class="hljs-title function_">execute</span>(<span class="hljs-params">a, b</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">strategy</span>.<span class="hljs-title function_">calculate</span>(a, b)
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AddStrategy</span> {
  <span class="hljs-title function_">calculate</span>(<span class="hljs-params">a, b</span>) {
    <span class="hljs-keyword">return</span> a + b
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CalculatorFactory</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">create</span>(<span class="hljs-params">type</span>) {
    <span class="hljs-keyword">switch</span> (type) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">"add"</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Calculator</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AddStrategy</span>())
      <span class="hljs-comment">// ...æ›´å¤šç­–ç•¥</span>
    }
  }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-keyword">const</span> calculator = <span class="hljs-title class_">CalculatorFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">"add"</span>)
<span class="hljs-keyword">const</span> result = calculator.<span class="hljs-title function_">execute</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)

<span class="hljs-comment">// æ­£å¸¸ç‰ˆæœ¬</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b
}

<span class="hljs-keyword">const</span> result = <span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)

<span class="hljs-comment">// æ•™è®­ï¼šä¸è¦ä¸ºäº†ç”¨è®¾è®¡æ¨¡å¼è€Œç”¨è®¾è®¡æ¨¡å¼</span>
<span class="hljs-comment">// YAGNIåŸåˆ™ï¼šYou Ain't Gonna Need It</span>
</code></pre>
<h3 data-id="heading-13">3.2 æµ‹è¯•è¦†ç›–ç‡ç„¦è™‘</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç—‡çŠ¶ï¼šè¿½æ±‚100%æµ‹è¯•è¦†ç›–ç‡</span>

<span class="hljs-comment">// è¢«æµ‹è¯•çš„ä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`Hello, <span class="hljs-subst">${name}</span>!`</span>
}

<span class="hljs-comment">// è¿‡åº¦æµ‹è¯•</span>
<span class="hljs-title function_">describe</span>(<span class="hljs-string">"greet"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">test</span>(<span class="hljs-string">"should greet with name"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">greet</span>(<span class="hljs-string">"World"</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">"Hello, World!"</span>)
  })

  <span class="hljs-title function_">test</span>(<span class="hljs-string">"should greet with different name"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">greet</span>(<span class="hljs-string">"Alice"</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">"Hello, Alice!"</span>)
  })

  <span class="hljs-title function_">test</span>(<span class="hljs-string">"should greet with another name"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">greet</span>(<span class="hljs-string">"Bob"</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">"Hello, Bob!"</span>)
  })

  <span class="hljs-title function_">test</span>(<span class="hljs-string">"should greet with Chinese name"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">greet</span>(<span class="hljs-string">"å¼ ä¸‰"</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">"Hello, å¼ ä¸‰!"</span>)
  })

  <span class="hljs-comment">// è¿™äº›æµ‹è¯•æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„ï¼Œæ²¡æœ‰é¢å¤–ä»·å€¼</span>
})

<span class="hljs-comment">// åˆç†çš„æµ‹è¯•</span>
<span class="hljs-title function_">describe</span>(<span class="hljs-string">"greet"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">test</span>(<span class="hljs-string">"should return greeting with provided name"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">greet</span>(<span class="hljs-string">"World"</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">"Hello, World!"</span>)
  })

  <span class="hljs-title function_">test</span>(<span class="hljs-string">"should handle empty name"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">expect</span>(<span class="hljs-title function_">greet</span>(<span class="hljs-string">""</span>)).<span class="hljs-title function_">toBe</span>(<span class="hljs-string">"Hello, !"</span>)
  })

  <span class="hljs-comment">// æµ‹è¯•æœ‰æ„ä¹‰çš„è¾¹ç•Œæƒ…å†µï¼Œè€Œä¸æ˜¯é‡å¤æµ‹è¯•åŒæ ·çš„é€»è¾‘</span>
})
</code></pre>
<h3 data-id="heading-14">3.3 è§„èŒƒæ•™æ¡ä¸»ä¹‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç—‡çŠ¶ï¼šæ­»å®ˆè§„èŒƒï¼Œä¸çŸ¥å˜é€š</span>

<span class="hljs-comment">// è§„èŒƒè¯´ï¼šå‡½æ•°ä¸è¶…è¿‡20è¡Œ</span>
<span class="hljs-comment">// äºæ˜¯...</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">processOrder_part1</span>(<span class="hljs-params">order</span>) {
  <span class="hljs-comment">// ç¬¬1-20è¡Œ</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">processOrder_part2</span>(<span class="hljs-params">order</span>) {
  <span class="hljs-comment">// ç¬¬21-40è¡Œ</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">processOrder_part3</span>(<span class="hljs-params">order</span>) {
  <span class="hljs-comment">// ç¬¬41-60è¡Œ</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">processOrder</span>(<span class="hljs-params">order</span>) {
  <span class="hljs-title function_">processOrder_part1</span>(order)
  <span class="hljs-title function_">processOrder_part2</span>(order)
  <span class="hljs-title function_">processOrder_part3</span>(order)
}

<span class="hljs-comment">// è¿™æ ·æ‹†åˆ†æ¯«æ— æ„ä¹‰ï¼Œåè€Œæ›´éš¾ç†è§£</span>

<span class="hljs-comment">// æ­£ç¡®ç†è§£ï¼šè§„èŒƒæ˜¯æŒ‡å¯¼ï¼Œä¸æ˜¯æ³•å¾‹</span>
<span class="hljs-comment">// å¦‚æœä¸€ä¸ªå‡½æ•°é€»è¾‘ä¸Šæ˜¯ä¸€ä¸ªæ•´ä½“ï¼Œ50è¡Œä¹Ÿå¯ä»¥æ¥å—</span>
<span class="hljs-comment">// å…³é”®æ˜¯ï¼šä»£ç æ˜¯å¦æ¸…æ™°ã€æ˜¯å¦å®¹æ˜“ç†è§£</span>
</code></pre>
<hr/>
<h2 data-id="heading-15">ç¬¬å››ç« ï¼šå°æœ‰æ‰€æˆçš„çªç ´å¥‘æœº</h2>
<h3 data-id="heading-16">4.1 ç¬¬ä¸€æ¬¡é‡æ„é—ç•™ä»£ç </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½ æ¥æ‰‹çš„ä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">process</span>(<span class="hljs-params">d</span>) {
  <span class="hljs-keyword">var</span> r = []
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; d.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">if</span> (d[i].<span class="hljs-property">t</span> == <span class="hljs-number">1</span>) {
      <span class="hljs-keyword">if</span> (d[i].<span class="hljs-property">s</span> == <span class="hljs-string">"a"</span>) {
        r.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">n</span>: d[i].<span class="hljs-property">n</span>, <span class="hljs-attr">v</span>: d[i].<span class="hljs-property">v</span> * <span class="hljs-number">1.1</span> })
      } <span class="hljs-keyword">else</span> {
        r.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">n</span>: d[i].<span class="hljs-property">n</span>, <span class="hljs-attr">v</span>: d[i].<span class="hljs-property">v</span> })
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (d[i].<span class="hljs-property">t</span> == <span class="hljs-number">2</span>) {
      <span class="hljs-keyword">if</span> (d[i].<span class="hljs-property">s</span> == <span class="hljs-string">"a"</span>) {
        r.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">n</span>: d[i].<span class="hljs-property">n</span>, <span class="hljs-attr">v</span>: d[i].<span class="hljs-property">v</span> * <span class="hljs-number">1.2</span> })
      } <span class="hljs-keyword">else</span> {
        r.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">n</span>: d[i].<span class="hljs-property">n</span>, <span class="hljs-attr">v</span>: d[i].<span class="hljs-property">v</span> * <span class="hljs-number">1.05</span> })
      }
    }
  }
  <span class="hljs-keyword">return</span> r
}

<span class="hljs-comment">// ä½ çš„é‡æ„</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MULTIPLIERS</span> = {
  <span class="hljs-number">1</span>: { <span class="hljs-attr">a</span>: <span class="hljs-number">1.1</span>, <span class="hljs-attr">default</span>: <span class="hljs-number">1</span> },
  <span class="hljs-number">2</span>: { <span class="hljs-attr">a</span>: <span class="hljs-number">1.2</span>, <span class="hljs-attr">default</span>: <span class="hljs-number">1.05</span> },
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateValue</span>(<span class="hljs-params">item</span>) {
  <span class="hljs-keyword">const</span> typeMultipliers = <span class="hljs-variable constant_">MULTIPLIERS</span>[item.<span class="hljs-property">type</span>]
  <span class="hljs-keyword">if</span> (!typeMultipliers) <span class="hljs-keyword">return</span> item.<span class="hljs-property">value</span>

  <span class="hljs-keyword">const</span> multiplier = typeMultipliers[item.<span class="hljs-property">status</span>] || typeMultipliers.<span class="hljs-property">default</span>
  <span class="hljs-keyword">return</span> item.<span class="hljs-property">value</span> * multiplier
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">processItems</span>(<span class="hljs-params">items</span>) {
  <span class="hljs-keyword">return</span> items
    .<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> <span class="hljs-variable constant_">MULTIPLIERS</span>[item.<span class="hljs-property">type</span>])
    .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> ({
      <span class="hljs-attr">name</span>: item.<span class="hljs-property">name</span>,
      <span class="hljs-attr">value</span>: <span class="hljs-title function_">calculateValue</span>(item),
    }))
}

<span class="hljs-comment">// é‡æ„çš„æ”¶è·ï¼š</span>
<span class="hljs-comment">// 1. ç†è§£äº†ä»£ç çš„ä¸šåŠ¡é€»è¾‘</span>
<span class="hljs-comment">// 2. å­¦ä¼šäº†å¦‚ä½•è®©ä»£ç æ›´æ¸…æ™°</span>
<span class="hljs-comment">// 3. ä½“ä¼šåˆ°äº†å¥½ä»£ç å’Œçƒ‚ä»£ç çš„åŒºåˆ«</span>
</code></pre>
<h3 data-id="heading-17">4.2 ç¬¬ä¸€æ¬¡ Code Review åˆ«äºº</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½ Reviewçš„ä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserData</span>(<span class="hljs-params">userId</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"/api/users/"</span> + userId)
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> res.<span class="hljs-title function_">json</span>())
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> data
    })
    .<span class="hljs-keyword">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err)
    })
}

<span class="hljs-comment">// ä½ çš„Reviewæ„è§</span>
<span class="hljs-comment">/*
 * 1. ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²ä»£æ›¿å­—ç¬¦ä¸²æ‹¼æ¥
 * 2. .then(data =&gt; { return data }) å¯ä»¥ç®€åŒ–
 * 3. é”™è¯¯å¤„ç†ä¸å®Œæ•´ï¼Œcatchååº”è¯¥é‡æ–°æŠ›å‡ºæˆ–è¿”å›é»˜è®¤å€¼
 * 4. å»ºè®®ä½¿ç”¨async/awaitæé«˜å¯è¯»æ€§
 *
 * å»ºè®®ä¿®æ”¹ä¸ºï¼š
 */</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserData</span>(<span class="hljs-params">userId</span>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/users/<span class="hljs-subst">${userId}</span>`</span>)
    <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTP error! status: <span class="hljs-subst">${response.status}</span>`</span>)
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>()
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Failed to fetch user:"</span>, error)
    <span class="hljs-keyword">throw</span> error <span class="hljs-comment">// è®©è°ƒç”¨è€…å†³å®šå¦‚ä½•å¤„ç†</span>
  }
}

<span class="hljs-comment">// Reviewåˆ«äººä»£ç çš„æ”¶è·ï¼š</span>
<span class="hljs-comment">// 1. å·©å›ºäº†è‡ªå·±çš„çŸ¥è¯†</span>
<span class="hljs-comment">// 2. å­¦ä¼šäº†ä»ä¸åŒè§’åº¦çœ‹é—®é¢˜</span>
<span class="hljs-comment">// 3. æé«˜äº†ä»£ç å®¡ç¾</span>
</code></pre>
<h3 data-id="heading-18">4.3 ç¬¬ä¸€æ¬¡æ€§èƒ½ä¼˜åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é—®é¢˜ï¼šé¡µé¢åŠ è½½å¾ˆæ…¢</span>

<span class="hljs-comment">// åŸå§‹ä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderUserList</span>(<span class="hljs-params">users</span>) {
  <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"user-list"</span>)

  users.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"div"</span>)
    div.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
      &lt;h3&gt;<span class="hljs-subst">${user.name}</span>&lt;/h3&gt;
      &lt;p&gt;<span class="hljs-subst">${user.email}</span>&lt;/p&gt;
    `</span>
    container.<span class="hljs-title function_">appendChild</span>(div) <span class="hljs-comment">// æ¯æ¬¡éƒ½è§¦å‘é‡æ’</span>
  })
}

<span class="hljs-comment">// ä¼˜åŒ–å</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderUserList</span>(<span class="hljs-params">users</span>) {
  <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"user-list"</span>)
  <span class="hljs-keyword">const</span> fragment = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createDocumentFragment</span>()

  users.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">user</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">"div"</span>)
    div.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">`
      &lt;h3&gt;<span class="hljs-subst">${user.name}</span>&lt;/h3&gt;
      &lt;p&gt;<span class="hljs-subst">${user.email}</span>&lt;/p&gt;
    `</span>
    fragment.<span class="hljs-title function_">appendChild</span>(div) <span class="hljs-comment">// å…ˆæ·»åŠ åˆ°fragment</span>
  })

  container.<span class="hljs-title function_">appendChild</span>(fragment) <span class="hljs-comment">// ä¸€æ¬¡æ€§æ·»åŠ åˆ°DOM</span>
}

<span class="hljs-comment">// è¿›ä¸€æ­¥ä¼˜åŒ–ï¼šè™šæ‹Ÿåˆ—è¡¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">renderUserListVirtual</span>(<span class="hljs-params">users, visibleCount = <span class="hljs-number">20</span></span>) {
  <span class="hljs-comment">// åªæ¸²æŸ“å¯è§åŒºåŸŸçš„å…ƒç´ </span>
  <span class="hljs-comment">// æ»šåŠ¨æ—¶åŠ¨æ€æ›´æ–°</span>
  <span class="hljs-comment">// ...</span>
}

<span class="hljs-comment">// æ€§èƒ½ä¼˜åŒ–çš„æ”¶è·ï¼š</span>
<span class="hljs-comment">// 1. ç†è§£äº†æµè§ˆå™¨æ¸²æŸ“åŸç†</span>
<span class="hljs-comment">// 2. å­¦ä¼šäº†æ€§èƒ½åˆ†æå·¥å…·</span>
<span class="hljs-comment">// 3. çŸ¥é“äº†"è¿‡æ—©ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æº"ï¼Œä½†ä¹ŸçŸ¥é“äº†ä»€ä¹ˆæ—¶å€™è¯¥ä¼˜åŒ–</span>
</code></pre>
<hr/>
<h2 data-id="heading-19">ç¬¬äº”ç« ï¼šå°æœ‰æ‰€æˆçš„ä¿®ç‚¼å¿ƒæ³•</h2>
<h3 data-id="heading-20">5.1 å¿ƒæ³•ä¸€ï¼šä»£ç æ˜¯è´Ÿå€ºï¼Œä¸æ˜¯èµ„äº§</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆå­¦ä¹ç»ƒçš„è®¤çŸ¥</span>
<span class="hljs-comment">// "æˆ‘å†™äº†1000è¡Œä»£ç ï¼Œå¥½æœ‰æˆå°±æ„Ÿï¼"</span>

<span class="hljs-comment">// ç­‘åŸºæœŸçš„è®¤çŸ¥</span>
<span class="hljs-comment">// "ä»£ç è¶Šå°‘è¶Šå¥½ï¼Œèƒ½ç”¨100è¡Œè§£å†³çš„é—®é¢˜ï¼Œä¸è¦å†™200è¡Œ"</span>

<span class="hljs-comment">// å®è·µ</span>
<span class="hljs-comment">// ä¸å¥½ï¼šä»£ç å¾ˆå¤šï¼Œä½†å¾ˆå¤šæ˜¯é‡å¤çš„</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateName</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-keyword">if</span> (!name) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">if</span> (name.<span class="hljs-property">length</span> &lt; <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">if</span> (name.<span class="hljs-property">length</span> &gt; <span class="hljs-number">50</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateEmail</span>(<span class="hljs-params">email</span>) {
  <span class="hljs-keyword">if</span> (!email) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">if</span> (!email.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"@"</span>)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">if</span> (email.<span class="hljs-property">length</span> &gt; <span class="hljs-number">100</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">validatePhone</span>(<span class="hljs-params">phone</span>) {
  <span class="hljs-keyword">if</span> (!phone) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">if</span> (phone.<span class="hljs-property">length</span> !== <span class="hljs-number">11</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/^\d+$/</span>.<span class="hljs-title function_">test</span>(phone)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}

<span class="hljs-comment">// å¥½ï¼šæŠ½è±¡å…¬å…±é€»è¾‘</span>
<span class="hljs-keyword">const</span> validators = {
  <span class="hljs-attr">name</span>: [
    { <span class="hljs-attr">check</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> !!v, <span class="hljs-attr">message</span>: <span class="hljs-string">"Name is required"</span> },
    { <span class="hljs-attr">check</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> v.<span class="hljs-property">length</span> &gt;= <span class="hljs-number">2</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"Name too short"</span> },
    { <span class="hljs-attr">check</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> v.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">50</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"Name too long"</span> },
  ],
  <span class="hljs-attr">email</span>: [
    { <span class="hljs-attr">check</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> !!v, <span class="hljs-attr">message</span>: <span class="hljs-string">"Email is required"</span> },
    { <span class="hljs-attr">check</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> v.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"@"</span>), <span class="hljs-attr">message</span>: <span class="hljs-string">"Invalid email"</span> },
    { <span class="hljs-attr">check</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> v.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">100</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"Email too long"</span> },
  ],
  <span class="hljs-attr">phone</span>: [
    { <span class="hljs-attr">check</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> !!v, <span class="hljs-attr">message</span>: <span class="hljs-string">"Phone is required"</span> },
    { <span class="hljs-attr">check</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> v.<span class="hljs-property">length</span> === <span class="hljs-number">11</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"Phone must be 11 digits"</span> },
    { <span class="hljs-attr">check</span>: <span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> <span class="hljs-regexp">/^\d+$/</span>.<span class="hljs-title function_">test</span>(v), <span class="hljs-attr">message</span>: <span class="hljs-string">"Phone must be numeric"</span> },
  ],
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">validate</span>(<span class="hljs-params">field, value</span>) {
  <span class="hljs-keyword">const</span> rules = validators[field]
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> rule <span class="hljs-keyword">of</span> rules) {
    <span class="hljs-keyword">if</span> (!rule.<span class="hljs-title function_">check</span>(value)) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">message</span>: rule.<span class="hljs-property">message</span> }
    }
  }
  <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: <span class="hljs-literal">true</span> }
}
</code></pre>
<h3 data-id="heading-21">5.2 å¿ƒæ³•äºŒï¼šå¯è¯»æ€§ä¼˜äºæ€§èƒ½ï¼ˆå¤§å¤šæ•°æ—¶å€™ï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆå­¦ä¹ç»ƒçš„è®¤çŸ¥</span>
<span class="hljs-comment">// "è¿™æ ·å†™æ€§èƒ½æ›´å¥½ï¼"</span>

<span class="hljs-comment">// ç­‘åŸºæœŸçš„è®¤çŸ¥</span>
<span class="hljs-comment">// "å…ˆè®©ä»£ç å¯è¯»ï¼Œæ€§èƒ½é—®é¢˜ç­‰å‡ºç°äº†å†ä¼˜åŒ–"</span>

<span class="hljs-comment">// ä¾‹å­ï¼šæ‰¾å‡ºæ•°ç»„ä¸­çš„æœ€å¤§å€¼</span>

<span class="hljs-comment">// "é«˜æ€§èƒ½"ç‰ˆæœ¬</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">findMax</span>(<span class="hljs-params">arr</span>) {
  <span class="hljs-keyword">let</span> max = arr[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">1</span>, len = arr.<span class="hljs-property">length</span>; i &lt; len; i++) {
    <span class="hljs-keyword">if</span> (arr[i] &gt; max) max = arr[i]
  }
  <span class="hljs-keyword">return</span> max
}

<span class="hljs-comment">// å¯è¯»ç‰ˆæœ¬</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">findMax</span>(<span class="hljs-params">arr</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(...arr)
}

<span class="hljs-comment">// é™¤éä½ å¤„ç†çš„æ˜¯ç™¾ä¸‡çº§æ•°æ®ï¼Œå¦åˆ™å¯è¯»æ€§æ›´é‡è¦</span>
<span class="hljs-comment">// è¿‡æ—©ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æº â€”â€” Donald Knuth</span>
</code></pre>
<h3 data-id="heading-22">5.3 å¿ƒæ³•ä¸‰ï¼šå†™ä»£ç å‰å…ˆæƒ³æ¸…æ¥š</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆå­¦ä¹ç»ƒçš„åšæ³•</span>
<span class="hljs-comment">// æƒ³åˆ°å“ªå†™åˆ°å“ªï¼Œè¾¹å†™è¾¹æ”¹</span>

<span class="hljs-comment">// ç­‘åŸºæœŸçš„åšæ³•</span>
<span class="hljs-comment">// å…ˆè®¾è®¡ï¼Œå†ç¼–ç </span>

<span class="hljs-comment">// è®¾è®¡æ­¥éª¤ï¼š</span>
<span class="hljs-comment">// 1. æ˜ç¡®éœ€æ±‚ï¼šè¿™ä¸ªåŠŸèƒ½è¦åšä»€ä¹ˆï¼Ÿ</span>
<span class="hljs-comment">// 2. å®šä¹‰æ¥å£ï¼šè¾“å…¥æ˜¯ä»€ä¹ˆï¼Ÿè¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ</span>
<span class="hljs-comment">// 3. è€ƒè™‘è¾¹ç•Œï¼šæœ‰å“ªäº›ç‰¹æ®Šæƒ…å†µï¼Ÿ</span>
<span class="hljs-comment">// 4. æ‹†åˆ†ä»»åŠ¡ï¼šå¯ä»¥åˆ†æˆå“ªå‡ ä¸ªæ­¥éª¤ï¼Ÿ</span>
<span class="hljs-comment">// 5. å¼€å§‹ç¼–ç </span>

<span class="hljs-comment">// ä¾‹å­ï¼šå®ç°ä¸€ä¸ªåˆ†é¡µå‡½æ•°</span>

<span class="hljs-comment">// 1. æ˜ç¡®éœ€æ±‚</span>
<span class="hljs-comment">// è¾“å…¥ï¼šæ•°ç»„ã€é¡µç ã€æ¯é¡µæ•°é‡</span>
<span class="hljs-comment">// è¾“å‡ºï¼šå½“å‰é¡µçš„æ•°æ®ã€æ€»é¡µæ•°ã€æ˜¯å¦æœ‰ä¸Š/ä¸‹ä¸€é¡µ</span>

<span class="hljs-comment">// 2. å®šä¹‰æ¥å£</span>
interface <span class="hljs-title class_">PaginationResult</span>&lt;T&gt; {
  <span class="hljs-attr">data</span>: T[];
  <span class="hljs-attr">currentPage</span>: number;
  <span class="hljs-attr">totalPages</span>: number;
  <span class="hljs-attr">hasNextPage</span>: boolean;
  <span class="hljs-attr">hasPrevPage</span>: boolean;
}

<span class="hljs-keyword">function</span> paginate&lt;T&gt;(
  <span class="hljs-attr">items</span>: T[],
  <span class="hljs-attr">page</span>: number,
  <span class="hljs-attr">pageSize</span>: number
): <span class="hljs-title class_">PaginationResult</span>&lt;T&gt;;

<span class="hljs-comment">// 3. è€ƒè™‘è¾¹ç•Œ</span>
<span class="hljs-comment">// - ç©ºæ•°ç»„</span>
<span class="hljs-comment">// - é¡µç å°äº1</span>
<span class="hljs-comment">// - é¡µç å¤§äºæ€»é¡µæ•°</span>
<span class="hljs-comment">// - pageSizeä¸º0æˆ–è´Ÿæ•°</span>

<span class="hljs-comment">// 4. æ‹†åˆ†ä»»åŠ¡</span>
<span class="hljs-comment">// - å‚æ•°æ ¡éªŒ</span>
<span class="hljs-comment">// - è®¡ç®—æ€»é¡µæ•°</span>
<span class="hljs-comment">// - æˆªå–å½“å‰é¡µæ•°æ®</span>
<span class="hljs-comment">// - ç»„è£…è¿”å›ç»“æœ</span>

<span class="hljs-comment">// 5. å¼€å§‹ç¼–ç </span>
<span class="hljs-keyword">function</span> paginate&lt;T&gt;(
  <span class="hljs-attr">items</span>: T[],
  <span class="hljs-attr">page</span>: number = <span class="hljs-number">1</span>,
  <span class="hljs-attr">pageSize</span>: number = <span class="hljs-number">10</span>
): <span class="hljs-title class_">PaginationResult</span>&lt;T&gt; {
  <span class="hljs-comment">// å‚æ•°æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (pageSize &lt;= <span class="hljs-number">0</span>) pageSize = <span class="hljs-number">10</span>;
  <span class="hljs-keyword">if</span> (page &lt; <span class="hljs-number">1</span>) page = <span class="hljs-number">1</span>;

  <span class="hljs-comment">// è®¡ç®—æ€»é¡µæ•°</span>
  <span class="hljs-keyword">const</span> totalPages = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(items.<span class="hljs-property">length</span> / pageSize);

  <span class="hljs-comment">// ä¿®æ­£é¡µç </span>
  <span class="hljs-keyword">if</span> (page &gt; totalPages &amp;&amp; totalPages &gt; <span class="hljs-number">0</span>) page = totalPages;

  <span class="hljs-comment">// æˆªå–å½“å‰é¡µæ•°æ®</span>
  <span class="hljs-keyword">const</span> start = (page - <span class="hljs-number">1</span>) * pageSize;
  <span class="hljs-keyword">const</span> data = items.<span class="hljs-title function_">slice</span>(start, start + pageSize);

  <span class="hljs-comment">// ç»„è£…è¿”å›ç»“æœ</span>
  <span class="hljs-keyword">return</span> {
    data,
    <span class="hljs-attr">currentPage</span>: page,
    totalPages,
    <span class="hljs-attr">hasNextPage</span>: page &lt; totalPages,
    <span class="hljs-attr">hasPrevPage</span>: page &gt; <span class="hljs-number">1</span>,
  };
}
</code></pre>
<hr/>
<h2 data-id="heading-23">ç¬¬å…­ç« ï¼šå°æœ‰æ‰€æˆçš„å‡ºå¸ˆè€ƒæ ¸</h2>
<h3 data-id="heading-24">6.1 è‡ªæµ‹é¢˜</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é—®é¢˜1ï¼šé‡æ„è¿™æ®µä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calc</span>(<span class="hljs-params">t, a</span>) {
  <span class="hljs-keyword">if</span> (t == <span class="hljs-string">"add"</span>) {
    <span class="hljs-keyword">return</span> a[<span class="hljs-number">0</span>] + a[<span class="hljs-number">1</span>]
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (t == <span class="hljs-string">"sub"</span>) {
    <span class="hljs-keyword">return</span> a[<span class="hljs-number">0</span>] - a[<span class="hljs-number">1</span>]
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (t == <span class="hljs-string">"mul"</span>) {
    <span class="hljs-keyword">return</span> a[<span class="hljs-number">0</span>] * a[<span class="hljs-number">1</span>]
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (t == <span class="hljs-string">"div"</span>) {
    <span class="hljs-keyword">if</span> (a[<span class="hljs-number">1</span>] == <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">"error"</span>
    }
    <span class="hljs-keyword">return</span> a[<span class="hljs-number">0</span>] / a[<span class="hljs-number">1</span>]
  }
}

<span class="hljs-comment">// é—®é¢˜2ï¼šè¿™æ®µä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿå¦‚ä½•æ”¹è¿›ï¼Ÿ</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUsers</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> users = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"/api/users"</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">r</span>) =&gt;</span> r.<span class="hljs-title function_">json</span>())
  <span class="hljs-keyword">const</span> result = []
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> user <span class="hljs-keyword">of</span> users) {
    <span class="hljs-keyword">const</span> orders = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`/api/orders?userId=<span class="hljs-subst">${user.id}</span>`</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">r</span>) =&gt;</span>
      r.<span class="hljs-title function_">json</span>()
    )
    result.<span class="hljs-title function_">push</span>({ ...user, orders })
  }
  <span class="hljs-keyword">return</span> result
}

<span class="hljs-comment">// é—®é¢˜3ï¼šä¸ºè¿™ä¸ªå‡½æ•°å†™å•å…ƒæµ‹è¯•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">formatDate</span>(<span class="hljs-params">date, format = <span class="hljs-string">"YYYY-MM-DD"</span></span>) {
  <span class="hljs-keyword">const</span> d = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(date)
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(d.<span class="hljs-title function_">getTime</span>())) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Invalid date"</span>)
  }

  <span class="hljs-keyword">const</span> year = d.<span class="hljs-title function_">getFullYear</span>()
  <span class="hljs-keyword">const</span> month = <span class="hljs-title class_">String</span>(d.<span class="hljs-title function_">getMonth</span>() + <span class="hljs-number">1</span>).<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>)
  <span class="hljs-keyword">const</span> day = <span class="hljs-title class_">String</span>(d.<span class="hljs-title function_">getDate</span>()).<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">"0"</span>)

  <span class="hljs-keyword">return</span> format.<span class="hljs-title function_">replace</span>(<span class="hljs-string">"YYYY"</span>, year).<span class="hljs-title function_">replace</span>(<span class="hljs-string">"MM"</span>, month).<span class="hljs-title function_">replace</span>(<span class="hljs-string">"DD"</span>, day)
}
</code></pre>
<h3 data-id="heading-25">6.2 å‡ºå¸ˆæ ‡å‡†</h3>
<pre><code class="hljs language-css" lang="css">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å°æœ‰æ‰€æˆå‡ºå¸ˆæ ‡å‡† âœ“                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   â–¡ ä»£ç ç¬¦åˆå›¢é˜Ÿè§„èŒƒï¼Œé€šè¿‡<span class="hljs-selector-tag">Code</span> Review                        â”‚
â”‚   â–¡ èƒ½å†™å‡ºæ¸…æ™°ã€å¯ç»´æŠ¤çš„ä»£ç                                  â”‚
â”‚   â–¡ ä¼šå†™å•å…ƒæµ‹è¯•ï¼Œç†è§£æµ‹è¯•çš„ä»·å€¼                             â”‚
â”‚   â–¡ ç†Ÿç»ƒä½¿ç”¨Gitè¿›è¡Œç‰ˆæœ¬æ§åˆ¶                                  â”‚
â”‚   â–¡ äº†è§£å¸¸ç”¨è®¾è®¡æ¨¡å¼ï¼ŒçŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥ç”¨                       â”‚
â”‚   â–¡ èƒ½ç‹¬ç«‹å®Œæˆä¸­ç­‰å¤æ‚åº¦çš„åŠŸèƒ½å¼€å‘                           â”‚
â”‚   â–¡ èƒ½é‡æ„é—ç•™ä»£ç ï¼Œæé«˜ä»£ç è´¨é‡                             â”‚
â”‚   â–¡ å¼€å§‹å…³æ³¨æ€§èƒ½ï¼Œä½†ä¸è¿‡æ—©ä¼˜åŒ–                               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-26">ç»“è¯­ï¼šå°æœ‰æ‰€æˆçš„æ„ä¹‰</h2>
<p>å°æœ‰æ‰€æˆæ˜¯ç¨‹åºå‘˜ä»"ä¼šå†™ä»£ç "åˆ°"ä¼šå†™å¥½ä»£ç "çš„å…³é”®é˜¶æ®µã€‚</p>
<p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œä½ ä¼šï¼š</p>
<ul>
<li>å¼€å§‹å…³æ³¨ä»£ç è´¨é‡ï¼Œè€Œä¸åªæ˜¯"èƒ½è·‘"</li>
<li>å­¦ä¼šç”¨è§„èŒƒå’Œæ¨¡å¼æ¥ç»„ç»‡ä»£ç </li>
<li>ç†è§£æµ‹è¯•çš„ä»·å€¼</li>
<li>å¼€å§‹æœ‰ä»£ç å®¡ç¾</li>
</ul>
<p><strong>å°æœ‰æ‰€æˆçš„æ ¸å¿ƒæ˜¯ï¼šå»ºç«‹æ­£ç¡®çš„ç¼–ç¨‹ä¹ æƒ¯å’Œæ€ç»´æ–¹å¼ã€‚</strong></p>
<p>è¿™äº›ä¹ æƒ¯å’Œæ€ç»´æ–¹å¼ï¼Œå°†æˆä¸ºä½ æœªæ¥æˆé•¿çš„åŸºç¡€ã€‚</p>
<p>å°±åƒæ­¦ä¾ å°è¯´é‡Œï¼Œå†…åŠŸå¿ƒæ³•æ¯”æ‹›å¼æ›´é‡è¦ã€‚ä¸€ä¸ªå†…åŠŸæ·±åšçš„äººï¼Œå­¦ä»€ä¹ˆæ‹›å¼éƒ½å¿«ï¼›ä¸€ä¸ªåªä¼šèŠ±æ‹³ç»£è…¿çš„äººï¼Œæ°¸è¿œåªèƒ½åœç•™åœ¨è¡¨é¢ã€‚</p>
<p>ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬å°†è¿›å…¥<strong>èä¼šè´¯é€š</strong>â€”â€”å½“ä½ å¼€å§‹æ€è€ƒç³»ç»Ÿæ¶æ„ã€å¼€å§‹èƒ½å¤Ÿç‹¬å½“ä¸€é¢çš„æ—¶å€™ï¼Œä½ å°±è¸å…¥äº†ä¸€æµé«˜æ‰‹çš„å¤§é—¨ã€‚</p>
<hr/>
<h2 data-id="heading-27">é¢„å‘Šï¼šèä¼šè´¯é€š</h2>
<p>åœ¨èä¼šè´¯é€šé˜¶æ®µï¼Œä½ å°†å­¦ä¹ ï¼š</p>
<ul>
<li>ç³»ç»Ÿè®¾è®¡ä¸æ¶æ„</li>
<li>æŠ€æœ¯é€‰å‹ä¸æƒè¡¡</li>
<li>å›¢é˜Ÿåä½œä¸æ²Ÿé€š</li>
<li>é¡¹ç›®ç®¡ç†åŸºç¡€</li>
<li>å¦‚ä½•æˆä¸ºæŠ€æœ¯éª¨å¹²</li>
</ul>
<p>æ•¬è¯·æœŸå¾…ï¼</p>
<hr/>
<p><em>æœ¬æ–‡æ˜¯ã€Šç¨‹åºå‘˜æ­¦å­¦ä¿®ç‚¼æ‰‹å†Œã€‹ç³»åˆ—çš„ç¬¬äºŒç¯‡ã€‚</em></p>
<p><em>å¦‚æœä½ æ­£å¤„äºå°æœ‰æ‰€æˆé˜¶æ®µï¼Œæ­å–œä½ å·²ç»è¶…è¶Šäº†å¤§å¤šæ•°"èƒ½è·‘å°±è¡Œ"çš„ç¨‹åºå‘˜ã€‚</em></p>
<p><em>ç»§ç»­ä¿®ç‚¼ï¼Œä¸€æµé«˜æ‰‹åœ¨å‘ä½ æ‹›æ‰‹ï¼</em> ğŸ’ª</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonè‡ªåŠ¨åŒ–ç»Ÿè®¡å·¥å…·å®æˆ˜ï¼šPythonæ‰¹é‡åˆ†æSalesforce DMLæ“ä½œä¸é”™è¯¯å¤„ç†]]></title>    <link>https://juejin.cn/post/7592990758477266963</link>    <guid>https://juejin.cn/post/7592990758477266963</guid>    <pubDate>2026-01-10T02:49:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592990758477266963" data-draft-id="7593145583348596778" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonè‡ªåŠ¨åŒ–ç»Ÿè®¡å·¥å…·å®æˆ˜ï¼šPythonæ‰¹é‡åˆ†æSalesforce DMLæ“ä½œä¸é”™è¯¯å¤„ç†"/> <meta itemprop="keywords" content="é¢è¯•,åç«¯"/> <meta itemprop="datePublished" content="2026-01-10T02:49:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="UrbanJazzerati"/> <meta itemprop="url" content="https://juejin.cn/user/550205947391389"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonè‡ªåŠ¨åŒ–ç»Ÿè®¡å·¥å…·å®æˆ˜ï¼šPythonæ‰¹é‡åˆ†æSalesforce DMLæ“ä½œä¸é”™è¯¯å¤„ç†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/550205947391389/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    UrbanJazzerati
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T02:49:05.000Z" title="Sat Jan 10 2026 02:49:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨æ—¥å¸¸çš„Salesforceå¼€å‘ä¸­ï¼ŒFlowå·²æˆä¸ºä¸šåŠ¡è‡ªåŠ¨åŒ–çš„é‡è¦å·¥å…·ã€‚ä½†ä½ æ˜¯å¦çŸ¥é“ï¼Œå¤§å¤šæ•°çš„æ•°æ®å¤„ç†å¼‚å¸¸éƒ½æºäºDMLæ“ä½œç¼ºä¹é”™è¯¯å¤„ç†ï¼Ÿæœ¬æ–‡å°†ä»‹ç»å¦‚ä½•æ„å»ºä¸€ä¸ªè‡ªåŠ¨åŒ–å®¡è®¡å·¥å…·ï¼Œæ‰¹é‡æ£€æµ‹Flowä¸­çš„DMLæ“ä½œé…ç½®é—®é¢˜ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦Flow DMLæ“ä½œå®¡è®¡ï¼Ÿ</h2>
<p>Salesforce Flowæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å¯è§†åŒ–ä¸šåŠ¡è‡ªåŠ¨åŒ–å·¥å…·ï¼Œä½†å¾ˆå¤šå¼€å‘è€…åœ¨é…ç½®DMLæ“ä½œï¼ˆCreateã€Updateã€Deleteï¼‰æ—¶ï¼Œå¾€å¾€å¿½è§†äº†é”™è¯¯å¤„ç†ã€‚è¿™å¯¼è‡´ï¼š</p>
<ol>
<li><strong>æ•°æ®ä¸ä¸€è‡´æ€§</strong>ï¼šéƒ¨åˆ†æ•°æ®æ›´æ–°æˆåŠŸï¼Œéƒ¨åˆ†å¤±è´¥</li>
<li><strong>ç”¨æˆ·ä½“éªŒå·®</strong>ï¼šç”¨æˆ·é‡åˆ°é”™è¯¯æ—¶æ— æ³•è·å¾—æ¸…æ™°çš„åé¦ˆ</li>
<li><strong>è°ƒè¯•å›°éš¾</strong>ï¼šç”Ÿäº§ç¯å¢ƒå¼‚å¸¸éš¾ä»¥è¿½è¸ªæ ¹æº</li>
</ol>
<p>æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ï¼š<strong>è‡ªåŠ¨åŒ–æ‰¹é‡æ‰«ææ‰€æœ‰Flowï¼Œè¯†åˆ«æœªé…ç½®é”™è¯¯å¤„ç†çš„DMLæ“ä½œ</strong>ã€‚</p>
<h2 data-id="heading-1">æ•´ä½“è§£å†³æ–¹æ¡ˆæ¶æ„</h2>
<p>æœ¬æ–‡å°†æ„å»ºä¸€ä¸ªå®Œæ•´çš„Pythonå·¥å…·ï¼Œå®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b03092668f864628a258d1294933fd50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgVXJiYW5KYXp6ZXJhdGk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768619569&amp;x-signature=mbtBvvWGJZyRZ5R4DyT0tLUC9QQ%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">æ ¸å¿ƒå®ç°ï¼šFlow DMLåˆ†æå™¨</h2>
<h3 data-id="heading-3">1. XMLè§£æåŸºç¡€</h3>
<p>Salesforce Flowä»¥XMLæ ¼å¼å­˜å‚¨ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨Pythonçš„ElementTreeè¿›è¡Œè§£æï¼š</p>
<pre><code class="hljs language-PYTHON" lang="PYTHON"><span class="hljs-keyword">import</span> xml.etree.ElementTree <span class="hljs-keyword">as</span> ET
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> glob


<span class="hljs-keyword">class</span> <span class="hljs-title class_">FlowDMLAnalyzer</span>:
    <span class="hljs-comment"># Salesforce Flowçš„XMLå‘½åç©ºé—´</span>
    namespace = <span class="hljs-string">"http://soap.sforce.com/2006/04/metadata"</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, flow_directory</span>):
        self.flow_directory = flow_directory
        self.dml_nodes = []
</code></pre>
<h3 data-id="heading-4">2. æ™ºèƒ½æ£€æµ‹DMLèŠ‚ç‚¹</h3>
<p>å…³é”®ç‚¹åœ¨äºå¦‚ä½•å‡†ç¡®è¯†åˆ«ä¸åŒç±»å‹çš„DMLæ“ä½œï¼š</p>
<pre><code class="hljs language-PYTHON" lang="PYTHON"><span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_flow_file</span>(<span class="hljs-params">self, file_path</span>):
    <span class="hljs-string">"""åˆ†æå•ä¸ªFlowæ–‡ä»¶ï¼Œæå–DMLèŠ‚ç‚¹ä¿¡æ¯"""</span>
    <span class="hljs-keyword">try</span>:
        tree = ET.parse(file_path)
        root = tree.getroot()
        
        <span class="hljs-comment"># åªåˆ†æActiveçŠ¶æ€çš„Flow</span>
        flow_status = root.find(<span class="hljs-string">f'.//{{<span class="hljs-subst">{self.namespace}</span>}}status'</span>)
        <span class="hljs-keyword">if</span> flow_status <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> flow_status.text != <span class="hljs-string">'Active'</span>:
            <span class="hljs-keyword">return</span> []
        
        dml_nodes_in_file = []
        
        <span class="hljs-comment"># å®šä¹‰è¦æ£€æŸ¥çš„DMLèŠ‚ç‚¹ç±»å‹</span>
        dml_node_types = [
            (<span class="hljs-string">'recordCreates'</span>, <span class="hljs-string">'Create'</span>),
            (<span class="hljs-string">'recordUpdates'</span>, <span class="hljs-string">'Update'</span>),
            (<span class="hljs-string">'recordDeletes'</span>, <span class="hljs-string">'Delete'</span>)
        ]
        
        <span class="hljs-comment"># éå†æ‰€æœ‰DMLèŠ‚ç‚¹ç±»å‹</span>
        <span class="hljs-keyword">for</span> node_type, node_type_cn <span class="hljs-keyword">in</span> dml_node_types:
            nodes = root.findall(<span class="hljs-string">f'.//{{<span class="hljs-subst">{self.namespace}</span>}}<span class="hljs-subst">{node_type}</span>'</span>)
            
            <span class="hljs-keyword">for</span> node <span class="hljs-keyword">in</span> nodes:
                <span class="hljs-comment"># å…³é”®æ£€æµ‹ï¼šæ˜¯å¦æœ‰é”™è¯¯å¤„ç†è¿æ¥å™¨</span>
                fault_connector = node.find(<span class="hljs-string">f'.//{{<span class="hljs-subst">{self.namespace}</span>}}faultConnector'</span>)
                has_fault_connector = fault_connector <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>
                
                dml_node_info = {
                    <span class="hljs-string">'Flow API Name'</span>: flow_name,
                    <span class="hljs-string">'Flow Status'</span>: flow_status_text,
                    <span class="hljs-string">'Element Type'</span>: node_type_cn,
                    <span class="hljs-string">'Element Name'</span>: node_name,
                    <span class="hljs-string">'Element Label'</span>: node_label,
                    <span class="hljs-string">'Is Catch Error'</span>: <span class="hljs-string">'Yes'</span> <span class="hljs-keyword">if</span> has_fault_connector <span class="hljs-keyword">else</span> <span class="hljs-string">'No'</span>,
                    <span class="hljs-string">'Need Fix'</span>: <span class="hljs-string">'Yes'</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> has_fault_connector <span class="hljs-keyword">else</span> <span class="hljs-string">'No'</span>,
                }
                
                dml_nodes_in_file.append(dml_node_info)
                
        <span class="hljs-keyword">return</span> dml_nodes_in_file
</code></pre>
<h3 data-id="heading-5">3. æ‰¹é‡æ‰«ææ‰€æœ‰Flowæ–‡ä»¶</h3>
<p>ä½¿ç”¨é€’å½’æ–‡ä»¶æœç´¢ç¡®ä¿ä¸é—æ¼ä»»ä½•Flowï¼š</p>
<pre><code class="hljs language-PYTHON" lang="PYTHON"><span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_all_flows</span>(<span class="hljs-params">self</span>):
    <span class="hljs-string">"""åˆ†æç›®å½•ä¸‹æ‰€æœ‰Flowæ–‡ä»¶"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¼€å§‹åˆ†æç›®å½•: <span class="hljs-subst">{self.flow_directory}</span>"</span>)
    
    <span class="hljs-comment"># æŸ¥æ‰¾æ‰€æœ‰.flow-meta.xmlæ–‡ä»¶</span>
    flow_files = glob.glob(
        os.path.join(self.flow_directory, <span class="hljs-string">'**'</span>, <span class="hljs-string">'*.flow-meta.xml'</span>), 
        recursive=<span class="hljs-literal">True</span>
    )
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰¾åˆ° <span class="hljs-subst">{<span class="hljs-built_in">len</span>(flow_files)}</span> ä¸ªFlowæ–‡ä»¶"</span>)
    
    <span class="hljs-comment"># è¿›åº¦æ˜¾ç¤ºå¢å¼ºç”¨æˆ·ä½“éªŒ</span>
    <span class="hljs-keyword">for</span> i, flow_file <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(flow_files, <span class="hljs-number">1</span>):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ†æè¿›åº¦: <span class="hljs-subst">{i}</span>/<span class="hljs-subst">{<span class="hljs-built_in">len</span>(flow_files)}</span> - <span class="hljs-subst">{os.path.basename(flow_file)}</span>"</span>)
        nodes = self.analyze_flow_file(flow_file)
        self.dml_nodes.extend(nodes)
    
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ†æå®Œæˆï¼Œå…±æ‰¾åˆ° <span class="hljs-subst">{<span class="hljs-built_in">len</span>(self.dml_nodes)}</span> ä¸ªDMLèŠ‚ç‚¹"</span>)
</code></pre>
<h2 data-id="heading-6">æ•°æ®å¯è§†åŒ–ï¼šExcelæŠ¥è¡¨ç”Ÿæˆ</h2>
<h3 data-id="heading-7">4. åŠ¨æ€ExcelæŠ¥è¡¨åˆ›å»º</h3>
<p>ä½¿ç”¨xlwingsç”Ÿæˆä¸“ä¸šçº§ExcelæŠ¥è¡¨ï¼š</p>
<pre><code class="hljs language-PYTHON" lang="PYTHON"><span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_excel_report</span>(<span class="hljs-params">self, output_file=<span class="hljs-literal">None</span></span>):
    <span class="hljs-string">"""ç”ŸæˆExcelæŠ¥å‘Š"""</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.dml_nodes:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    
    <span class="hljs-comment"># æ™ºèƒ½æ–‡ä»¶åç”Ÿæˆ</span>
    <span class="hljs-keyword">if</span> output_file <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
        timestamp = datetime.now().strftime(<span class="hljs-string">'%Y%m%d_%H%M%S'</span>)
        output_file = <span class="hljs-string">f'flow_dml_analysis_<span class="hljs-subst">{timestamp}</span>.xlsx'</span>
    
    <span class="hljs-comment"># ä½¿ç”¨pandasæ•´ç†æ•°æ®ç»“æ„</span>
    <span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
    df = pd.DataFrame(self.dml_nodes)
    
    <span class="hljs-comment"># åˆ—é¡ºåºä¼˜åŒ–</span>
    column_order = [
        <span class="hljs-string">'Flow API Name'</span>, <span class="hljs-string">'Flow Status'</span>, <span class="hljs-string">'Element Type'</span>,
        <span class="hljs-string">'Element Name'</span>, <span class="hljs-string">'Element Label'</span>, <span class="hljs-string">'Is Catch Error'</span>, <span class="hljs-string">'Need Fix'</span>
    ]
    df = df[column_order]
    
    <span class="hljs-comment"># åˆ›å»ºExcelåº”ç”¨</span>
    <span class="hljs-keyword">import</span> xlwings <span class="hljs-keyword">as</span> xw
    app = xw.App(visible=<span class="hljs-literal">True</span>)
    
    <span class="hljs-keyword">try</span>:
        wb = app.books.add()
        sheet = wb.sheets[<span class="hljs-number">0</span>]
        sheet.name = <span class="hljs-string">"DMLèŠ‚ç‚¹åˆ†æ"</span>
        
        <span class="hljs-comment"># å†™å…¥æ•°æ®</span>
        sheet.<span class="hljs-built_in">range</span>(<span class="hljs-string">'A1'</span>).value = df.columns.tolist()
        sheet.<span class="hljs-built_in">range</span>(<span class="hljs-string">'A2'</span>).value = df.values.tolist()
        
        <span class="hljs-comment"># è§†è§‰ä¼˜åŒ–ï¼šæ ‡è®°éœ€è¦å¤„ç†çš„èŠ‚ç‚¹ä¸ºçº¢è‰²</span>
        last_row = <span class="hljs-built_in">len</span>(df) + <span class="hljs-number">1</span>
        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, last_row + <span class="hljs-number">1</span>):
            <span class="hljs-keyword">if</span> sheet.<span class="hljs-built_in">range</span>(<span class="hljs-string">f'G<span class="hljs-subst">{i}</span>'</span>).value == <span class="hljs-string">'Yes'</span>:
                <span class="hljs-comment"># RGBé¢œè‰²ï¼šæµ…çº¢è‰²èƒŒæ™¯</span>
                sheet.<span class="hljs-built_in">range</span>(<span class="hljs-string">f'A<span class="hljs-subst">{i}</span>:G<span class="hljs-subst">{i}</span>'</span>).color = (<span class="hljs-number">255</span>, <span class="hljs-number">199</span>, <span class="hljs-number">206</span>)
        
        <span class="hljs-comment"># æ·»åŠ ç­›é€‰åŠŸèƒ½</span>
        sheet.<span class="hljs-built_in">range</span>(<span class="hljs-string">'A1'</span>).api.AutoFilter(<span class="hljs-number">1</span>)
        
        <span class="hljs-comment"># åˆ›å»ºæ±‡æ€»å·¥ä½œè¡¨</span>
        summary_sheet = wb.sheets.add(<span class="hljs-string">"æ±‡æ€»"</span>)
        self.create_summary_sheet(summary_sheet, df)
        
        <span class="hljs-comment"># æ™ºèƒ½ä¿å­˜ç­–ç•¥</span>
        output_file = self.safe_save_excel(wb, output_file)
        
        <span class="hljs-keyword">return</span> output_file
        
    <span class="hljs-keyword">finally</span>:
        app.quit()
</code></pre>
<h3 data-id="heading-8">5. æ™ºèƒ½åŒ–æ±‡æ€»ç»Ÿè®¡</h3>
<pre><code class="hljs language-PYTHON" lang="PYTHON"><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_summary_sheet</span>(<span class="hljs-params">self, sheet, df</span>):
    <span class="hljs-string">"""åˆ›å»ºæ±‡æ€»ç»Ÿè®¡è¡¨"""</span>
    total_nodes = <span class="hljs-built_in">len</span>(df)
    
    summary_data = []
    summary_data.append([<span class="hljs-string">"ç»Ÿè®¡é¡¹"</span>, <span class="hljs-string">"æ•°é‡"</span>, <span class="hljs-string">"ç™¾åˆ†æ¯”"</span>])
    summary_data.append([<span class="hljs-string">"æ€»DMLèŠ‚ç‚¹æ•°"</span>, total_nodes, <span class="hljs-string">"100%"</span>])
    
    <span class="hljs-comment"># æŒ‰èŠ‚ç‚¹ç±»å‹ç»Ÿè®¡</span>
    node_type_summary = df[<span class="hljs-string">'Element Type'</span>].value_counts()
    <span class="hljs-keyword">for</span> node_type, count <span class="hljs-keyword">in</span> node_type_summary.items():
        percentage = <span class="hljs-string">f"<span class="hljs-subst">{count / total_nodes * <span class="hljs-number">100</span>:<span class="hljs-number">.1</span>f}</span>%"</span>
        summary_data.append([<span class="hljs-string">f"<span class="hljs-subst">{node_type}</span>èŠ‚ç‚¹æ•°"</span>, count, percentage])
    
    <span class="hljs-comment"># é”™è¯¯å¤„ç†ç»Ÿè®¡åˆ†æ</span>
    needs_attention = df[df[<span class="hljs-string">'Need Fix'</span>] == <span class="hljs-string">'Yes'</span>]
    needs_attention_count = <span class="hljs-built_in">len</span>(needs_attention)
    
    summary_data.append([<span class="hljs-string">"éœ€è¦æ·»åŠ é”™è¯¯å¤„ç†çš„èŠ‚ç‚¹æ•°"</span>, 
                         needs_attention_count,
                         <span class="hljs-string">f"<span class="hljs-subst">{needs_attention_count / total_nodes * <span class="hljs-number">100</span>:<span class="hljs-number">.1</span>f}</span>%"</span>])
    
    <span class="hljs-comment"># å†™å…¥æ±‡æ€»æ•°æ®</span>
    sheet.<span class="hljs-built_in">range</span>(<span class="hljs-string">'A1'</span>).value = summary_data
    sheet.autofit()
</code></pre>
<h2 data-id="heading-9">å®æˆ˜ä½¿ç”¨æ•™ç¨‹</h2>
<h3 data-id="heading-10">6. ä¸€é”®è¿è¡Œå·¥å…·</h3>
<pre><code class="hljs language-PYTHON" lang="PYTHON"><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-string">"""ä¸»å‡½æ•°"""</span>
    <span class="hljs-comment"># é…ç½®Flowæ–‡ä»¶ç›®å½•</span>
    flow_directory = <span class="hljs-string">r"ä½ çš„Flowæ–‡ä»¶è·¯å¾„"</span>
    
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(flow_directory):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç›®å½•ä¸å­˜åœ¨: <span class="hljs-subst">{flow_directory}</span>"</span>)
        <span class="hljs-keyword">return</span>
    
    <span class="hljs-comment"># åˆ›å»ºåˆ†æå™¨</span>
    analyzer = FlowDMLAnalyzer(flow_directory)
    
    <span class="hljs-comment"># æ‰¹é‡åˆ†æ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸš€ å¼€å§‹æ‰«æFlowæ–‡ä»¶..."</span>)
    analyzer.analyze_all_flows()
    
    <span class="hljs-comment"># ç”ŸæˆæŠ¥å‘Š</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ“Š ç”Ÿæˆåˆ†ææŠ¥å‘Š..."</span>)
    report = analyzer.generate_summary_report()
    <span class="hljs-built_in">print</span>(report)
    
    <span class="hljs-comment"># ç”ŸæˆExcelæ–‡ä»¶</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ğŸ’¾ ç”ŸæˆExcelæ–‡ä»¶..."</span>)
    excel_file = analyzer.generate_excel_report()
    
    <span class="hljs-keyword">if</span> excel_file:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… åˆ†æå®Œæˆï¼æ–‡ä»¶å·²ä¿å­˜: <span class="hljs-subst">{excel_file}</span>"</span>)
        
        <span class="hljs-comment"># è‡ªåŠ¨æ‰“å¼€é€‰é¡¹</span>
        <span class="hljs-keyword">import</span> subprocess
        subprocess.Popen(<span class="hljs-string">f'start excel "<span class="hljs-subst">{excel_file}</span>"'</span>, shell=<span class="hljs-literal">True</span>)
</code></pre>
<h3 data-id="heading-11">7. é…ç½®æ–‡ä»¶è·¯å¾„</h3>
<p>æ ¹æ®ä½ çš„Salesforceé¡¹ç›®ç»“æ„è°ƒæ•´ï¼š</p>
<pre><code class="hljs language-PYTHON" lang="PYTHON"><span class="hljs-comment"># å¸¸è§Salesforce DXé¡¹ç›®ç»“æ„</span>
flow_directory = <span class="hljs-string">r"force-app\main\default\flows"</span>


<span class="hljs-comment"># æˆ–ä½¿ç”¨ç»å¯¹è·¯å¾„</span>
flow_directory = <span class="hljs-string">r"C:\Users\YourName\projects\salesforce-project\force-app\main\default\flows"</span>
</code></pre>
<h2 data-id="heading-12">å®é™…æ¡ˆä¾‹åˆ†æ</h2>
<h3 data-id="heading-13">æ¡ˆä¾‹åˆ†æï¼šé¡¹ç›®å®¡è®¡ç»“æœ</h3>
<p>æˆ‘ä»¬æ›¾åœ¨ä¸€ä¸ªåŒ…å«160+ Flowçš„é¡¹ç›®ä¸­è¿è¡Œæ­¤å·¥å…·ï¼š</p>
<pre><code class="hljs language-TEXT" lang="TEXT">============================================
 Salesforce Flow DMLèŠ‚ç‚¹åˆ†ææŠ¥å‘Š
============================================


åˆ†ææ—¶é—´: 2024-01-15 14:30:22
åˆ†æç›®å½•: C:\projects\salesforce\flows


æ€»ä½“ç»Ÿè®¡:
----------
æ€»DMLèŠ‚ç‚¹æ•°: 376
æ— é”™è¯¯å¤„ç†çš„èŠ‚ç‚¹æ•°: 214
éœ€è¦å¤„ç†æ¯”ä¾‹: 56.9%


æŒ‰èŠ‚ç‚¹ç±»å‹ç»Ÿè®¡:
----------
  Update: 215ä¸ª (57.2%)
  Create: 98ä¸ª (26.1%)
  Delete: 63ä¸ª (16.7%)


æŒ‰Flowç»Ÿè®¡:
----------
  Customer_Update_Process: 28ä¸ª DMLèŠ‚ç‚¹
  Order_Creation_Flow: 19ä¸ª DMLèŠ‚ç‚¹
  Data_Cleanup_Batch: 43ä¸ª DMLèŠ‚ç‚¹
</code></pre>
<h3 data-id="heading-14">æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<p>å¯¹äºå¤§å‹é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-PYTHON" lang="PYTHON"><span class="hljs-comment"># 1. å¹¶è¡Œå¤„ç†åŠ é€Ÿ</span>
<span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor


<span class="hljs-keyword">def</span> <span class="hljs-title function_">parallel_analyze_flows</span>(<span class="hljs-params">self, flow_files, max_workers=<span class="hljs-number">4</span></span>):
    <span class="hljs-string">"""å¹¶è¡Œåˆ†æFlowæ–‡ä»¶"""</span>
    <span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=max_workers) <span class="hljs-keyword">as</span> executor:
        results = <span class="hljs-built_in">list</span>(executor.<span class="hljs-built_in">map</span>(self.analyze_flow_file, flow_files))
    <span class="hljs-keyword">return</span> results


<span class="hljs-comment"># 2. ç¼“å­˜æœºåˆ¶</span>
<span class="hljs-keyword">import</span> hashlib
<span class="hljs-keyword">import</span> pickle


<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_file_hash</span>(<span class="hljs-params">self, file_path</span>):
    <span class="hljs-string">"""è·å–æ–‡ä»¶å“ˆå¸Œå€¼ç”¨äºç¼“å­˜"""</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'rb'</span>) <span class="hljs-keyword">as</span> f:
        <span class="hljs-keyword">return</span> hashlib.md5(f.read()).hexdigest()


<span class="hljs-keyword">def</span> <span class="hljs-title function_">load_cached_results</span>(<span class="hljs-params">self, file_path</span>):
    <span class="hljs-string">"""åŠ è½½ç¼“å­˜ç»“æœ"""</span>
    cache_file = <span class="hljs-string">f"<span class="hljs-subst">{file_path}</span>.cache"</span>
    <span class="hljs-keyword">if</span> os.path.exists(cache_file):
        <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(cache_file, <span class="hljs-string">'rb'</span>) <span class="hljs-keyword">as</span> f:
            <span class="hljs-keyword">return</span> pickle.load(f)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
</code></pre>
<h2 data-id="heading-15">å®Œæ•´ä»£ç </h2>
<pre><code class="hljs language-Python" lang="Python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> xml.etree.ElementTree <span class="hljs-keyword">as</span> ET
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">import</span> xlwings <span class="hljs-keyword">as</span> xw
<span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime
<span class="hljs-keyword">import</span> glob

<span class="hljs-keyword">class</span> <span class="hljs-title class_">FlowDMLAnalyzer</span>:
    namespace = <span class="hljs-string">"http://soap.sforce.com/2006/04/metadata"</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, flow_directory</span>):
        <span class="hljs-string">"""
        åˆå§‹åŒ–Flow DMLåˆ†æå™¨

        Args:
            flow_directory (str): Flowæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•è·¯å¾„
        """</span>
        self.flow_directory = flow_directory
        self.dml_nodes = []

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_flow_file</span>(<span class="hljs-params">self, file_path</span>):
        <span class="hljs-string">"""
        åˆ†æå•ä¸ªFlowæ–‡ä»¶ï¼Œæå–DMLèŠ‚ç‚¹ä¿¡æ¯

        Args:
            file_path (str): Flowæ–‡ä»¶è·¯å¾„

        Returns:
            list: DMLèŠ‚ç‚¹ä¿¡æ¯åˆ—è¡¨
        """</span>
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># è§£æXMLæ–‡ä»¶</span>
            tree = ET.parse(file_path)
            root = tree.getroot()

            <span class="hljs-comment"># æ£€æŸ¥FlowçŠ¶æ€</span>
            flow_status = root.find(<span class="hljs-string">f'.//{{<span class="hljs-subst">{self.namespace}</span>}}status'</span>)
            flow_status_text = flow_status.text <span class="hljs-keyword">if</span> flow_status <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> <span class="hljs-string">''</span>
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è§£ææ–‡ä»¶ <span class="hljs-subst">{file_path}</span>: <span class="hljs-subst">{flow_status_text}</span>"</span>)
            <span class="hljs-comment"># åªåˆ†æActiveçš„Flow</span>
            <span class="hljs-keyword">if</span> flow_status_text != <span class="hljs-string">'Active'</span>:
                <span class="hljs-keyword">return</span> []

            <span class="hljs-comment"># ä»æ–‡ä»¶åè·å–Flowåç§°ï¼ˆå»æ‰æ‰©å±•åï¼‰</span>
            flow_name = os.path.splitext(os.path.basename(file_path))[<span class="hljs-number">0</span>]
            <span class="hljs-keyword">if</span> flow_name.endswith(<span class="hljs-string">'.flow-meta'</span>):
                flow_name = flow_name.replace(<span class="hljs-string">'.flow-meta'</span>, <span class="hljs-string">''</span>)

            dml_nodes_in_file = []

            <span class="hljs-comment"># å®šä¹‰è¦æ£€æŸ¥çš„DMLèŠ‚ç‚¹ç±»å‹</span>
            dml_node_types = [
                (<span class="hljs-string">'recordCreates'</span>, <span class="hljs-string">'Create'</span>),
                (<span class="hljs-string">'recordUpdates'</span>, <span class="hljs-string">'Update'</span>),
                (<span class="hljs-string">'recordDeletes'</span>, <span class="hljs-string">'Delete'</span>)
            ]

            <span class="hljs-comment"># éå†æ‰€æœ‰DMLèŠ‚ç‚¹ç±»å‹</span>
            <span class="hljs-keyword">for</span> node_type, node_type_cn <span class="hljs-keyword">in</span> dml_node_types:
                nodes = root.findall(<span class="hljs-string">f'.//{{<span class="hljs-subst">{self.namespace}</span>}}<span class="hljs-subst">{node_type}</span>'</span>)

                <span class="hljs-keyword">for</span> node <span class="hljs-keyword">in</span> nodes:
                    <span class="hljs-comment"># è·å–èŠ‚ç‚¹åç§°</span>
                    name_elem = node.find(<span class="hljs-string">f'.//{{<span class="hljs-subst">{self.namespace}</span>}}name'</span>)
                    node_name = name_elem.text <span class="hljs-keyword">if</span> name_elem <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> <span class="hljs-string">''</span>

                    <span class="hljs-comment"># è·å–èŠ‚ç‚¹æ ‡ç­¾</span>
                    label_elem = node.find(<span class="hljs-string">f'.//{{<span class="hljs-subst">{self.namespace}</span>}}label'</span>)
                    node_label = label_elem.text <span class="hljs-keyword">if</span> label_elem <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> <span class="hljs-string">''</span>

                    <span class="hljs-comment"># æ£€æŸ¥æ˜¯å¦æœ‰faultConnectorï¼ˆé”™è¯¯å¤„ç†ï¼‰</span>
                    fault_connector = node.find(<span class="hljs-string">f'.//{{<span class="hljs-subst">{self.namespace}</span>}}faultConnector'</span>)
                    has_fault_connector = fault_connector <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>

                    <span class="hljs-comment"># è®°å½•èŠ‚ç‚¹ä¿¡æ¯</span>
                    dml_node_info = {
                        <span class="hljs-string">'Flow API Name'</span>: flow_name,
                        <span class="hljs-string">'Flow Status'</span>: flow_status_text,
                        <span class="hljs-string">'Element Type'</span>: node_type_cn,
                        <span class="hljs-string">'Element Name'</span>: node_name,
                        <span class="hljs-string">'Element Label'</span>: node_label,
                        <span class="hljs-string">'Is Catch Error'</span>: <span class="hljs-string">'Yes'</span> <span class="hljs-keyword">if</span> has_fault_connector <span class="hljs-keyword">else</span> <span class="hljs-string">'No'</span>,
                        <span class="hljs-string">'Need Fix'</span>: <span class="hljs-string">'Yes'</span> <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> has_fault_connector <span class="hljs-keyword">else</span> <span class="hljs-string">'No'</span>,
                    }

                    dml_nodes_in_file.append(dml_node_info)

            <span class="hljs-keyword">return</span> dml_nodes_in_file

        <span class="hljs-keyword">except</span> ET.ParseError <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è§£ææ–‡ä»¶ <span class="hljs-subst">{file_path}</span> æ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> []
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ†ææ–‡ä»¶ <span class="hljs-subst">{file_path}</span> æ—¶å‡ºé”™: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> []

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">analyze_all_flows</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""
           åˆ†æç›®å½•ä¸‹æ‰€æœ‰Flowæ–‡ä»¶
           """</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¼€å§‹åˆ†æç›®å½•: <span class="hljs-subst">{self.flow_directory}</span>"</span>)

        <span class="hljs-comment"># æŸ¥æ‰¾æ‰€æœ‰.flow-meta.xmlæ–‡ä»¶</span>
        flow_files = glob.glob(os.path.join(self.flow_directory, <span class="hljs-string">'**'</span>, <span class="hljs-string">'*.flow-meta.xml'</span>), recursive=<span class="hljs-literal">True</span>)

        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰¾åˆ° <span class="hljs-subst">{<span class="hljs-built_in">len</span>(flow_files)}</span> ä¸ªFlowæ–‡ä»¶"</span>)

        <span class="hljs-comment"># åˆ†ææ¯ä¸ªFlowæ–‡ä»¶</span>
        <span class="hljs-keyword">for</span> i, flow_file <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(flow_files, <span class="hljs-number">1</span>):
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ†æè¿›åº¦: <span class="hljs-subst">{i}</span>/<span class="hljs-subst">{<span class="hljs-built_in">len</span>(flow_files)}</span> - <span class="hljs-subst">{os.path.basename(flow_file)}</span>"</span>)

            nodes = self.analyze_flow_file(flow_file)
            self.dml_nodes.extend(nodes)

        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"åˆ†æå®Œæˆï¼Œå…±æ‰¾åˆ° <span class="hljs-subst">{<span class="hljs-built_in">len</span>(self.dml_nodes)}</span> ä¸ªDMLèŠ‚ç‚¹"</span>)

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_excel_report</span>(<span class="hljs-params">self, output_file=<span class="hljs-literal">None</span></span>):
        <span class="hljs-string">"""
        ç”ŸæˆExcelæŠ¥å‘Š

        Args:
            output_file (str): è¾“å‡ºExcelæ–‡ä»¶è·¯å¾„ï¼Œå¦‚æœä¸ºNoneåˆ™è‡ªåŠ¨ç”Ÿæˆ

        Returns:
            str: ç”Ÿæˆçš„Excelæ–‡ä»¶è·¯å¾„
        """</span>
        <span class="hljs-keyword">global</span> wb
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.dml_nodes:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ²¡æœ‰æ‰¾åˆ°DMLèŠ‚ç‚¹ï¼Œæ— æ³•ç”ŸæˆæŠ¥å‘Š"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

        <span class="hljs-comment"># å¦‚æœæ²¡æœ‰æŒ‡å®šè¾“å‡ºæ–‡ä»¶ï¼Œåˆ™è‡ªåŠ¨ç”Ÿæˆ</span>
        <span class="hljs-keyword">if</span> output_file <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:
            timestamp = datetime.now().strftime(<span class="hljs-string">'%Y%m%d_%H%M%S'</span>)
            <span class="hljs-comment"># ä½¿ç”¨å½“å‰ç›®å½•è€Œä¸æ˜¯åŸå§‹flowç›®å½•</span>
            output_file = os.path.join(os.getcwd(), <span class="hljs-string">f'flow_dml_analysis_<span class="hljs-subst">{timestamp}</span>.xlsx'</span>)

        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å°è¯•ä¿å­˜Excelåˆ°: <span class="hljs-subst">{output_file}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¾“å‡ºç›®å½•æ˜¯å¦å­˜åœ¨: <span class="hljs-subst">{os.path.exists(os.path.dirname(output_file))}</span>"</span>)

        <span class="hljs-comment"># åˆ›å»ºDataFrame</span>
        df = pd.DataFrame(self.dml_nodes)

        <span class="hljs-comment"># é‡æ–°æ’åˆ—åˆ—çš„é¡ºåºï¼Œä¾¿äºé˜…è¯»</span>
        column_order = [
            <span class="hljs-string">'Flow API Name'</span>, <span class="hljs-string">'Flow Status'</span>, <span class="hljs-string">'Element Type'</span>,
            <span class="hljs-string">'Element Name'</span>, <span class="hljs-string">'Element Label'</span>, <span class="hljs-string">'Is Catch Error'</span>, <span class="hljs-string">'Need Fix'</span>
        ]

        df = df[column_order] <span class="hljs-comment"># æ’å…¥æ ‡é¢˜ï¼Œä¸ä¼šè®¡å…¥dataframeçš„size</span>

        <span class="hljs-comment"># ä½¿ç”¨xlwingsåˆ›å»ºExcelæ–‡ä»¶</span>
        app = xw.App(visible=<span class="hljs-literal">True</span>)

        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># åˆ›å»ºå·¥ä½œç°¿</span>
            wb = app.books.add()

            <span class="hljs-comment"># å°†æ•°æ®å†™å…¥å·¥ä½œè¡¨</span>
            sheet = wb.sheets[<span class="hljs-number">0</span>]
            sheet.name = <span class="hljs-string">"DMLèŠ‚ç‚¹åˆ†æ"</span>

            <span class="hljs-comment"># å†™å…¥æ ‡é¢˜</span>
            sheet.<span class="hljs-built_in">range</span>(<span class="hljs-string">'A1'</span>).value = df.columns.tolist()

            <span class="hljs-comment"># å†™å…¥æ•°æ®</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> df.empty:
                sheet.<span class="hljs-built_in">range</span>(<span class="hljs-string">'A2'</span>).value = df.values.tolist()

            <span class="hljs-comment"># è°ƒæ•´åˆ—å®½</span>
            sheet.autofit()

            <span class="hljs-comment"># æ·»åŠ æ ¼å¼ï¼šå°†éœ€è¦å¤„ç†çš„èŠ‚ç‚¹æ ‡è®°ä¸ºçº¢è‰²</span>
            last_row = <span class="hljs-built_in">len</span>(df) + <span class="hljs-number">1</span>
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, last_row + <span class="hljs-number">1</span>):
                <span class="hljs-keyword">if</span> sheet.<span class="hljs-built_in">range</span>(<span class="hljs-string">f'G<span class="hljs-subst">{i}</span>'</span>).value == <span class="hljs-string">'Yes'</span>:  <span class="hljs-comment"># Gåˆ—æ˜¯"Need Fix"åˆ—</span>
                    <span class="hljs-comment"># æ ‡è®°æ•´è¡Œä¸ºæµ…çº¢è‰²èƒŒæ™¯</span>
                    sheet.<span class="hljs-built_in">range</span>(<span class="hljs-string">f'A<span class="hljs-subst">{i}</span>:G<span class="hljs-subst">{i}</span>'</span>).color = (<span class="hljs-number">255</span>, <span class="hljs-number">199</span>, <span class="hljs-number">206</span>)  <span class="hljs-comment"># æµ…çº¢è‰²</span>

            <span class="hljs-comment"># å¯¹colum headeræ·»åŠ ç­›é€‰</span>
            sheet.<span class="hljs-built_in">range</span>(<span class="hljs-string">'A1'</span>).api.AutoFilter(<span class="hljs-number">1</span>)

            <span class="hljs-comment"># åˆ›å»ºæ±‡æ€»å·¥ä½œè¡¨</span>
            summary_sheet = wb.sheets.add(<span class="hljs-string">"æ±‡æ€»"</span>)

            <span class="hljs-comment"># æŒ‰èŠ‚ç‚¹ç±»å‹ç»Ÿè®¡</span>
            summary_data = []
            total_nodes = <span class="hljs-built_in">len</span>(df)

            summary_data.append([<span class="hljs-string">"ç»Ÿè®¡é¡¹"</span>, <span class="hljs-string">"æ•°é‡"</span>, <span class="hljs-string">"ç™¾åˆ†æ¯”"</span>])
            summary_data.append([<span class="hljs-string">"æ€»DMLèŠ‚ç‚¹æ•°"</span>, total_nodes, <span class="hljs-string">"100%"</span>])

            <span class="hljs-comment"># æŒ‰èŠ‚ç‚¹ç±»å‹ç»Ÿè®¡</span>
            node_type_summary = df[<span class="hljs-string">'Element Type'</span>].value_counts()
            <span class="hljs-keyword">for</span> node_type, count <span class="hljs-keyword">in</span> node_type_summary.items():
                percentage = <span class="hljs-string">f"<span class="hljs-subst">{count / total_nodes * <span class="hljs-number">100</span>:<span class="hljs-number">.1</span>f}</span>%"</span>
                summary_data.append([<span class="hljs-string">f"<span class="hljs-subst">{node_type}</span>èŠ‚ç‚¹æ•°"</span>, count, percentage])

            <span class="hljs-comment"># æŒ‰é”™è¯¯å¤„ç†çŠ¶æ€ç»Ÿè®¡</span>
            error_handling_summary = df[<span class="hljs-string">'Need Fix'</span>].value_counts()
            <span class="hljs-keyword">for</span> status, count <span class="hljs-keyword">in</span> error_handling_summary.items():
                status_text = <span class="hljs-string">"æœ‰"</span> <span class="hljs-keyword">if</span> status == <span class="hljs-string">"No"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">"æ— "</span>
                percentage = <span class="hljs-string">f"<span class="hljs-subst">{count / total_nodes * <span class="hljs-number">100</span>:<span class="hljs-number">.1</span>f}</span>%"</span>
                summary_data.append([<span class="hljs-string">f"<span class="hljs-subst">{status_text}</span>é”™è¯¯å¤„ç†çš„èŠ‚ç‚¹æ•°"</span>, count, percentage])

            <span class="hljs-comment"># éœ€è¦å¤„ç†çš„èŠ‚ç‚¹ç»Ÿè®¡</span>
            needs_attention = df[df[<span class="hljs-string">'Need Fix'</span>] == <span class="hljs-string">'Yes'</span>]
            needs_attention_count = <span class="hljs-built_in">len</span>(needs_attention)
            summary_data.append([<span class="hljs-string">"éœ€è¦æ·»åŠ é”™è¯¯å¤„ç†çš„èŠ‚ç‚¹æ•°"</span>, needs_attention_count,
                                 <span class="hljs-string">f"<span class="hljs-subst">{needs_attention_count / total_nodes * <span class="hljs-number">100</span>:<span class="hljs-number">.1</span>f}</span>%"</span>])

            <span class="hljs-comment"># æ·»åŠ ç©ºè¡Œï¼ˆç”¨3ä¸ªç©ºå­—ç¬¦ä¸²ï¼‰</span>
            summary_data.append([<span class="hljs-string">""</span>, <span class="hljs-string">""</span>, <span class="hljs-string">""</span>])
            summary_data.append([<span class="hljs-string">"æŒ‰Flowç»Ÿè®¡"</span>, <span class="hljs-string">""</span>, <span class="hljs-string">""</span>])

            <span class="hljs-comment"># æŒ‰Flowç»Ÿè®¡</span>
            flow_summary = df[<span class="hljs-string">'Flow API Name'</span>].value_counts()
            <span class="hljs-keyword">for</span> flow_name, count <span class="hljs-keyword">in</span> flow_summary.items():
                summary_data.append([flow_name, count, <span class="hljs-string">f"<span class="hljs-subst">{count / total_nodes * <span class="hljs-number">100</span>:<span class="hljs-number">.1</span>f}</span>%"</span>])

            <span class="hljs-comment"># å†™å…¥æ±‡æ€»æ•°æ®</span>
            summary_sheet.<span class="hljs-built_in">range</span>(<span class="hljs-string">'A1'</span>).value = summary_data
            summary_sheet.autofit()

            <span class="hljs-comment"># ä¿å­˜å·¥ä½œç°¿ - æ·»åŠ å¼‚å¸¸æ•è·</span>
            <span class="hljs-keyword">try</span>:
                wb.save(output_file)
                <span class="hljs-built_in">print</span>(
                    <span class="hljs-string">f"ä¿å­˜æˆåŠŸï¼Œæ–‡ä»¶å¤§å°: <span class="hljs-subst">{os.path.getsize(output_file) <span class="hljs-keyword">if</span> os.path.exists(output_file) <span class="hljs-keyword">else</span> <span class="hljs-string">'æ–‡ä»¶ä¸å­˜åœ¨'</span>}</span> å­—èŠ‚"</span>)
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> save_error:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¿å­˜æ–‡ä»¶æ—¶å‡ºé”™: <span class="hljs-subst">{save_error}</span>"</span>)
                <span class="hljs-comment"># å°è¯•å¦å­˜ä¸ºæ¡Œé¢</span>
                desktop = os.path.join(os.path.expanduser(<span class="hljs-string">'~'</span>), <span class="hljs-string">'Desktop'</span>)
                alt_file = os.path.join(desktop, <span class="hljs-string">f'flow_dml_analysis_<span class="hljs-subst">{timestamp}</span>.xlsx'</span>)
                wb.save(alt_file)
                output_file = alt_file
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²ä¿å­˜åˆ°å¤‡é€‰ä½ç½®: <span class="hljs-subst">{output_file}</span>"</span>)

            <span class="hljs-keyword">return</span> output_file

        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç”ŸæˆExcelæŠ¥å‘Šæ—¶å‡ºç°é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">import</span> traceback
            traceback.print_exc()
            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

        <span class="hljs-keyword">finally</span>:
            <span class="hljs-comment"># å…³é—­å·¥ä½œç°¿å’Œåº”ç”¨</span>
            <span class="hljs-keyword">try</span>:
                wb.close()
            <span class="hljs-keyword">except</span>:
                <span class="hljs-keyword">pass</span>
            <span class="hljs-keyword">try</span>:
                app.quit()
            <span class="hljs-keyword">except</span>:
                <span class="hljs-keyword">pass</span>

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_summary_report</span>(<span class="hljs-params">self</span>):
        <span class="hljs-string">"""
        ç”Ÿæˆåˆ†ææ‘˜è¦æŠ¥å‘Š
        """</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> self.dml_nodes:
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æ²¡æœ‰æ‰¾åˆ°DMLèŠ‚ç‚¹"</span>

        df = pd.DataFrame(self.dml_nodes)
        <span class="hljs-comment"># print(f"df ", df)</span>
        <span class="hljs-comment"># ç»Ÿè®¡ä¿¡æ¯</span>
        total_nodes = <span class="hljs-built_in">len</span>(df)
        nodes_without_error_handling = <span class="hljs-built_in">len</span>(df[df[<span class="hljs-string">'Is Catch Error'</span>] == <span class="hljs-string">'No'</span>])

        <span class="hljs-comment"># æŒ‰èŠ‚ç‚¹ç±»å‹ç»Ÿè®¡</span>
        node_type_counts = df[<span class="hljs-string">'Element Type'</span>].value_counts()

        <span class="hljs-comment"># æŒ‰Flowç»Ÿè®¡</span>
        <span class="hljs-comment"># flow_counts = df['Flow API Name'].value_counts()</span>

        <span class="hljs-comment"># ç”ŸæˆæŠ¥å‘Šæ–‡æœ¬</span>
        report = <span class="hljs-string">f"""
         ============================================
         Salesforce Flow DMLèŠ‚ç‚¹åˆ†ææŠ¥å‘Š
         ============================================

         åˆ†ææ—¶é—´: <span class="hljs-subst">{datetime.now().strftime(<span class="hljs-string">'%Y-%m-%d %H:%M:%S'</span>)}</span>
         åˆ†æç›®å½•: <span class="hljs-subst">{self.flow_directory}</span>

         æ€»ä½“ç»Ÿè®¡:
         ----------
         æ€»DMLèŠ‚ç‚¹æ•°: <span class="hljs-subst">{total_nodes}</span>
         æ— é”™è¯¯å¤„ç†çš„èŠ‚ç‚¹æ•°: <span class="hljs-subst">{nodes_without_error_handling}</span>
         éœ€è¦å¤„ç†æ¯”ä¾‹: <span class="hljs-subst">{nodes_without_error_handling / total_nodes * <span class="hljs-number">100</span>:<span class="hljs-number">.1</span>f}</span>%

         æŒ‰èŠ‚ç‚¹ç±»å‹ç»Ÿè®¡:
         ----------
         """</span>

        <span class="hljs-keyword">for</span> node_type, count <span class="hljs-keyword">in</span> node_type_counts.items():
            report += <span class="hljs-string">f"  <span class="hljs-subst">{node_type}</span>: <span class="hljs-subst">{count}</span>ä¸ª (<span class="hljs-subst">{count / total_nodes * <span class="hljs-number">100</span>:<span class="hljs-number">.1</span>f}</span>%)\n"</span>

        report += <span class="hljs-string">"\néœ€è¦æ·»åŠ é”™è¯¯å¤„ç†çš„èŠ‚ç‚¹æ¸…å•:\n"</span>
        report += <span class="hljs-string">"="</span> * <span class="hljs-number">60</span> + <span class="hljs-string">"\n"</span>

        <span class="hljs-comment"># ç­›é€‰å‡ºéœ€è¦å¤„ç†çš„èŠ‚ç‚¹</span>
        needs_attention = df[df[<span class="hljs-string">'Need Fix'</span>] == <span class="hljs-string">'Yes'</span>]

        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(needs_attention) &gt; <span class="hljs-number">0</span>:
            <span class="hljs-keyword">for</span> index, row <span class="hljs-keyword">in</span> needs_attention.iterrows():
                report += <span class="hljs-string">f"\nFlow: <span class="hljs-subst">{row[<span class="hljs-string">'Flow API Name'</span>]}</span>\n"</span>
                report += <span class="hljs-string">f"èŠ‚ç‚¹ç±»å‹: <span class="hljs-subst">{row[<span class="hljs-string">'Element Type'</span>]}</span>\n"</span>
                report += <span class="hljs-string">f"èŠ‚ç‚¹åç§°: <span class="hljs-subst">{row[<span class="hljs-string">'Element Name'</span>]}</span>\n"</span>
                report += <span class="hljs-string">f"èŠ‚ç‚¹æ ‡ç­¾: <span class="hljs-subst">{row[<span class="hljs-string">'Element Label'</span>]}</span>\n"</span>
                report += <span class="hljs-string">"-"</span> * <span class="hljs-number">40</span> + <span class="hljs-string">"\n"</span>
        <span class="hljs-keyword">else</span>:
            report += <span class="hljs-string">"\næ­å–œï¼æ‰€æœ‰DMLèŠ‚ç‚¹éƒ½å·²ç»æœ‰é”™è¯¯å¤„ç†ã€‚\n"</span>

        <span class="hljs-keyword">return</span> report

<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-string">"""
    ä¸»å‡½æ•°
    """</span>
    <span class="hljs-comment"># è®¾ç½®Flowç›®å½•è·¯å¾„</span>
    flow_directory = <span class="hljs-string">r"C:\Users\YourPath\vscode\force-app\main\default\flows"</span>

    <span class="hljs-comment"># æ£€æŸ¥ç›®å½•æ˜¯å¦å­˜åœ¨</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(flow_directory):
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç›®å½•ä¸å­˜åœ¨: <span class="hljs-subst">{flow_directory}</span>"</span>)
        <span class="hljs-keyword">return</span>

    <span class="hljs-comment"># åˆ›å»ºåˆ†æå™¨å¹¶è¿›è¡Œåˆ†æ</span>
    analyzer = FlowDMLAnalyzer(flow_directory)
    analyzer.analyze_all_flows()

    <span class="hljs-comment"># ç”Ÿæˆæ–‡æœ¬æŠ¥å‘Š</span>
    report = analyzer.generate_summary_report()
    <span class="hljs-built_in">print</span>(report)

    <span class="hljs-comment"># ç”ŸæˆExcelæŠ¥å‘Š</span>
    excel_file = analyzer.generate_excel_report()

    <span class="hljs-keyword">if</span> excel_file <span class="hljs-keyword">and</span> os.path.exists(excel_file):
        file_size = os.path.getsize(excel_file)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ–‡ä»¶å­˜åœ¨ï¼Œå¤§å°: <span class="hljs-subst">{file_size}</span> å­—èŠ‚"</span>)

        <span class="hljs-comment"># å¯é€‰ï¼šè‡ªåŠ¨æ‰“å¼€Excelæ–‡ä»¶</span>
        open_excel = <span class="hljs-built_in">input</span>(<span class="hljs-string">"\næ˜¯å¦è¦æ‰“å¼€Excelæ–‡ä»¶ï¼Ÿ(y/n): "</span>).lower()
        <span class="hljs-keyword">if</span> open_excel == <span class="hljs-string">'y'</span>:
            <span class="hljs-keyword">try</span>:
                app = xw.App(visible=<span class="hljs-literal">True</span>, add_book=<span class="hljs-literal">False</span>)

                <span class="hljs-comment"># 2. æ‰“å¼€å·²æœ‰å·¥ä½œç°¿</span>
                app.books.<span class="hljs-built_in">open</span>(excel_file)  <span class="hljs-comment"># æ³¨æ„æ–‡ä»¶è·¯å¾„å‰çš„ r</span>
            <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ— æ³•æ‰“å¼€æ–‡ä»¶: <span class="hljs-subst">{e}</span>"</span>)
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¯·æ‰‹åŠ¨æ‰“å¼€: <span class="hljs-subst">{excel_file}</span>"</span>)


<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<h2 data-id="heading-16">ç»“å°¾</h2>
<p>é€šè¿‡è¿™ä¸ªå·¥å…·ï¼Œæˆ‘ä»¬è®©æ¯ä¸€ä¸ªDMLæ“ä½œéƒ½å¾—åˆ°äº†åº”æœ‰çš„å…³æ³¨ï¼Œè®©æ¯ä¸€ä¸ªé”™è¯¯éƒ½èƒ½è¢«å¦¥å–„å¤„ç†ï¼Œæœ€ç»ˆä¸ºç”¨æˆ·æä¾›æ›´ç¨³å®šã€æ›´å¯é çš„ä¸šåŠ¡è‡ªåŠ¨åŒ–ä½“éªŒã€‚</p>
<p><strong>ä½ ç°åœ¨å°±å¯ä»¥å¼€å§‹æ‰«æä½ çš„Salesforceé¡¹ç›®ï¼Œçœ‹çœ‹æœ‰å¤šå°‘DMLæ“ä½œåœ¨"è£¸å¥”"ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JobFlow è´Ÿè½½æ„ŸçŸ¥è°ƒåº¦ï¼šæŠŠä»»åŠ¡åˆ†ç»™æœ€é—²çš„æœºå™¨]]></title>    <link>https://juejin.cn/post/7592990758477430803</link>    <guid>https://juejin.cn/post/7592990758477430803</guid>    <pubDate>2026-01-10T05:58:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592990758477430803" data-draft-id="7593215107406118948" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JobFlow è´Ÿè½½æ„ŸçŸ¥è°ƒåº¦ï¼šæŠŠä»»åŠ¡åˆ†ç»™æœ€é—²çš„æœºå™¨"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„,å¼€æº"/> <meta itemprop="datePublished" content="2026-01-10T05:58:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JobFlow è´Ÿè½½æ„ŸçŸ¥è°ƒåº¦ï¼šæŠŠä»»åŠ¡åˆ†ç»™æœ€é—²çš„æœºå™¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T05:58:52.000Z" title="Sat Jan 10 2026 05:58:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>è¿™ä¸€å‘¨å·¥ä½œå¾ˆå¿™ï¼Œå‘¨æœ«ç»ˆäºå¯ä»¥æ¥è¿˜å€ºäº†ã€‚</p>
<p>çœ‹åˆ°æœ‰è¯»è€…æ issue é—®è´Ÿè½½æ„ŸçŸ¥è°ƒåº¦çš„é—®é¢˜ï¼Œå¿ƒé‡ŒæŒºé«˜å…´çš„ã€‚è¯´æ˜æœ‰äººåœ¨çœŸæ­£ç”¨ JobFlowï¼Œè€Œä¸”åœ¨æ€è€ƒæ€ä¹ˆè®©å®ƒæ›´å¥½ã€‚è¿™ç§åé¦ˆå¯¹å¼€æºé¡¹ç›®æ¥è¯´å¤ªé‡è¦äº†ã€‚</p>
<p>å¼€å‘è€…ä¸€ä¸ªäººé—·å¤´å†™ä»£ç ï¼Œå¾ˆå®¹æ˜“é™·å…¥è‡ªå·±çš„æ€ç»´å®šå¼ã€‚ç”¨æˆ·æçš„é—®é¢˜å¾€å¾€æ˜¯æœ€çœŸå®çš„éœ€æ±‚ï¼Œä¹Ÿæ˜¯æœ€å®¹æ˜“è¢«å¿½ç•¥çš„ç»†èŠ‚ã€‚è¿™æ¬¡çš„è´Ÿè½½æ„ŸçŸ¥è°ƒåº¦åŠŸèƒ½å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚</p>
<p>å¦‚æœä½ åœ¨ä½¿ç”¨ JobFlow çš„è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œæˆ–è€…æœ‰ä»€ä¹ˆæƒ³æ³•ï¼Œæ¬¢è¿æ issue è®¨è®ºã€‚ä¸€èµ·æŠŠå®ƒåšå¾—æ›´å¥½ã€‚</p>
<p>å¥½ï¼Œä¸‹é¢è¿›å…¥æ­£é¢˜ã€‚</p>
<h2 data-id="heading-1">é—®é¢˜èƒŒæ™¯</h2>
<p>æœ€è¿‘æ”¶åˆ°ä¸€ä¸ª issueï¼š</p>
<blockquote>
<p>å¦‚æœéœ€è¦æ ¹æ®æ‰§è¡Œå™¨çš„è´Ÿè½½æƒ…å†µè°ƒåº¦è´Ÿè½½ä½çš„èŠ‚ç‚¹ï¼Œåº”è¯¥æ€ä¹ˆè€ƒè™‘ï¼Ÿ</p>
</blockquote>
<p>è¿™æ˜¯ä¸ªå¾ˆå®é™…çš„é—®é¢˜ã€‚çœ‹çœ‹ä¸‹é¢è¿™ä¸ªåœºæ™¯ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">è®¢å•æœåŠ¡æœ‰ 3 ä¸ªå®ä¾‹ï¼š
<span class="hljs-deletion">- å®ä¾‹ 1ï¼šCPU 80%ï¼Œå†…å­˜ 70%ï¼Œçº¿ç¨‹æ± å ç”¨ 90%</span>
<span class="hljs-deletion">- å®ä¾‹ 2ï¼šCPU 30%ï¼Œå†…å­˜ 40%ï¼Œçº¿ç¨‹æ± å ç”¨ 20%</span>
<span class="hljs-deletion">- å®ä¾‹ 3ï¼šCPU 50%ï¼Œå†…å­˜ 60%ï¼Œçº¿ç¨‹æ± å ç”¨ 50%</span>

å®šæ—¶ä»»åŠ¡è§¦å‘ï¼Œåº”è¯¥è°ƒåº¦åˆ°å“ªä¸ªå®ä¾‹ï¼Ÿ
</code></pre>
<p>ç­”æ¡ˆå¾ˆæ˜æ˜¾ï¼šå®ä¾‹ 2ï¼Œå› ä¸ºå®ƒæœ€é—²ã€‚</p>
<p>ä½† JobFlow æœ€åˆçš„æ‰§è¡Œå™¨é€‰æ‹©é€»è¾‘å¾ˆç®€å•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è½®è¯¢é€‰æ‹©</span>
<span class="hljs-type">ServiceInstance</span> <span class="hljs-variable">instance</span> <span class="hljs-operator">=</span> instances.get(shardIndex % instances.size());
</code></pre>
<p>æŒ‰åˆ†ç‰‡ç´¢å¼•å–æ¨¡ï¼Œæœºæ¢°åˆ†é…ã€‚è¿™æ ·åšçš„é—®é¢˜ï¼š</p>
<pre><code class="hljs">å®ä¾‹ 1 å¾ˆå¿™ â†’ åˆ†ç‰‡ 0 è°ƒåº¦è¿‡å» â†’ è¶Šæ¥è¶Šæ…¢ï¼Œä»»åŠ¡å †ç§¯
å®ä¾‹ 2 å¾ˆé—² â†’ åˆ†ç‰‡ 1 å¿«é€Ÿæ‰§è¡Œå®Œ â†’ ç©ºé—²ç­‰å¾…
å®ä¾‹ 3 ä¸­ç­‰ â†’ åˆ†ç‰‡ 2 æ­£å¸¸æ‰§è¡Œ

ç»“æœï¼šèµ„æºåˆ©ç”¨ä¸å‡è¡¡
</code></pre>
<p><strong>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦è®©è°ƒåº¦å™¨çŸ¥é“æ¯ä¸ªæ‰§è¡Œå™¨çš„å®æ—¶è´Ÿè½½ï¼Œç„¶åæŠŠä»»åŠ¡åˆ†é…ç»™è´Ÿè½½æœ€ä½çš„å®ä¾‹ã€‚</strong></p>
<h2 data-id="heading-2">æ–¹æ¡ˆé€‰æ‹©</h2>
<p>çœ‹åˆ°è¿™ä¸ªéœ€æ±‚ï¼Œç¬¬ä¸€ååº”æ˜¯å¼•å…¥ Redisï¼š</p>
<pre><code class="hljs language-css" lang="css">æ–¹æ¡ˆ <span class="hljs-selector-tag">A</span>ï¼šRedis ä¸­å¿ƒåŒ–å­˜å‚¨
æ‰§è¡Œå™¨ â†’ Redisï¼ˆä¸ŠæŠ¥è´Ÿè½½ï¼‰
è°ƒåº¦å™¨ â†’ Redisï¼ˆè¯»å–è´Ÿè½½ï¼‰â†’ é€‰æ‹©æœ€ä¼˜å®ä¾‹
</code></pre>
<p>è¿™ä¸ªæ–¹æ¡ˆå¯ä»¥å·¥ä½œï¼Œä½†æœ‰å‡ ä¸ªé—®é¢˜ï¼š</p>
<p><strong>ä¾èµ–é—®é¢˜</strong></p>
<p>å¼•å…¥ Redis æ„å‘³ç€ï¼š</p>
<ul>
<li>è¿ç»´è¦éƒ¨ç½² Redis é›†ç¾¤</li>
<li>è¦è€ƒè™‘ Redis é«˜å¯ç”¨</li>
<li>è¦å¤„ç† Redis æŒ‚æ‰çš„é™çº§é€»è¾‘</li>
</ul>
<p>JobFlow çš„è®¾è®¡ç†å¿µæ˜¯è½»é‡çº§ï¼Œåªä¾èµ– Nacos å’Œ MySQLã€‚</p>
<p><strong>ä¸€è‡´æ€§é—®é¢˜</strong></p>
<pre><code class="hljs language-diff" lang="diff">3 ä¸ªè°ƒåº¦å™¨å®ä¾‹åŒæ—¶ä» Redis è¯»å–ï¼š
<span class="hljs-deletion">- éƒ½çœ‹åˆ° executor-1 è´Ÿè½½æœ€ä½</span>
<span class="hljs-deletion">- éƒ½é€‰æ‹© executor-1</span>
<span class="hljs-deletion">- executor-1 ç¬é—´è´Ÿè½½å‡é«˜</span>

è¦è§£å†³è¿™ä¸ªé—®é¢˜éœ€è¦åˆ†å¸ƒå¼é”ï¼Œä½†åŠ é”åˆå½±å“æ€§èƒ½ã€‚
</code></pre>
<p><strong>æ•°æ®è¿‡æœŸé—®é¢˜</strong></p>
<p>æ‰§è¡Œå™¨æ¯ 60 ç§’ä¸ŠæŠ¥ä¸€æ¬¡ï¼Œå¦‚æœæ‰§è¡Œå™¨æŒ‚äº†ï¼ŒRedis é‡Œçš„æ•°æ®æ€ä¹ˆåŠï¼Ÿè®¾ç½® TTL è‡ªåŠ¨è¿‡æœŸï¼Ÿè¿˜æ˜¯è°ƒåº¦å™¨ä¸»åŠ¨æ£€æµ‹ï¼Ÿ</p>
<p>æ€è€ƒä¹‹åï¼Œå†³å®šç”¨æ›´ç®€å•çš„æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-css" lang="css">æ–¹æ¡ˆ <span class="hljs-selector-tag">B</span>ï¼šHTTP ç›´æ¥ä¸ŠæŠ¥
æ‰§è¡Œå™¨ â†’ HTTP â†’ è°ƒåº¦å™¨ï¼ˆå†…å­˜å­˜å‚¨ï¼‰
è°ƒåº¦å™¨éœ€è¦æ—¶ç›´æ¥ä»å†…å­˜è¯»å–
</code></pre>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>æ— é¢å¤–ä¾èµ–</li>
<li>å®ç°ç®€å•</li>
<li>é™çº§å®¹æ˜“</li>
</ul>
<p><strong>ä»£ä»·ï¼š</strong></p>
<ul>
<li>è°ƒåº¦å™¨é‡å¯åæ•°æ®ä¸¢å¤±</li>
<li>ä¸æŒä¹…åŒ–</li>
</ul>
<p>ä½†è¿™ä¸¤ä¸ªä»£ä»·éƒ½å¯ä»¥æ¥å—ï¼š</p>
<ul>
<li>è°ƒåº¦å™¨é‡å¯æ˜¯å°æ¦‚ç‡äº‹ä»¶</li>
<li>è´Ÿè½½æ•°æ®æœ¬èº«å°±æ˜¯å®æ—¶çš„ï¼Œ60 ç§’åå°±ä¼šé‡æ–°ä¸ŠæŠ¥</li>
</ul>
<h2 data-id="heading-3">è®¾è®¡æ€è·¯</h2>
<p>ç¡®å®šäº†ç”¨ HTTP ç›´æ¥ä¸ŠæŠ¥ï¼Œæ¥ä¸‹æ¥è¦è§£å†³å‡ ä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-4">é—®é¢˜ 1ï¼šä¸ŠæŠ¥ç»™å“ªä¸ªè°ƒåº¦å™¨ï¼Ÿ</h3>
<p>å‡è®¾æœ‰ 3 ä¸ªè°ƒåº¦å™¨å®ä¾‹ï¼Œæ‰§è¡Œå™¨åº”è¯¥ä¸ŠæŠ¥ç»™è°ï¼Ÿ</p>
<pre><code class="hljs">éšæœºé€‰ä¸€ä¸ªï¼Ÿâ†’ æ•°æ®åˆ†æ•£ï¼Œä¸ä¸€è‡´
ä¸ŠæŠ¥ç»™æ‰€æœ‰ï¼Ÿâ†’ ç½‘ç»œå¼€é”€å¤§
</code></pre>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>ç”¨ Hash ä¸€è‡´æ€§é€‰æ‹©ï¼Œå’Œä»»åŠ¡è°ƒåº¦çš„ Owner åˆ¤å®šé€»è¾‘ä¸€æ ·ã€‚</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ ¹æ®æœåŠ¡å Hashï¼Œé€‰æ‹©è´Ÿè´£çš„è°ƒåº¦å™¨</span>
<span class="hljs-type">String</span> <span class="hljs-variable">serviceName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"order-service"</span>;
List&lt;Instance&gt; schedulers = nacosService.getAllInstances(<span class="hljs-string">"jobflow-scheduler"</span>);

<span class="hljs-comment">// æ’åºï¼ˆä¿è¯ä¸€è‡´æ€§ï¼‰</span>
schedulers.sort(Comparator.comparing(i -&gt; i.getIp() + <span class="hljs-string">":"</span> + i.getPort()));

<span class="hljs-comment">// Hash é€‰æ‹©</span>
<span class="hljs-type">int</span> <span class="hljs-variable">hash</span> <span class="hljs-operator">=</span> Math.abs(serviceName.hashCode());
<span class="hljs-type">int</span> <span class="hljs-variable">targetIndex</span> <span class="hljs-operator">=</span> hash % schedulers.size();
<span class="hljs-type">ServiceInstance</span> <span class="hljs-variable">targetScheduler</span> <span class="hljs-operator">=</span> schedulers.get(targetIndex);
</code></pre>
<p>è¿™æ ·åšçš„å¥½å¤„ï¼š</p>
<pre><code class="hljs language-diff" lang="diff">order-service çš„æ‰€æœ‰å®ä¾‹ â†’ ä¸ŠæŠ¥ç»™ scheduler-1
user-service çš„æ‰€æœ‰å®ä¾‹ â†’ ä¸ŠæŠ¥ç»™ scheduler-2

<span class="hljs-deletion">- è´Ÿè½½æ•°æ®é›†ä¸­ï¼Œä¸ä¼šåˆ†æ•£</span>
<span class="hljs-deletion">- æ¯ä¸ªè°ƒåº¦å™¨è´Ÿè´£ä¸€éƒ¨åˆ†æœåŠ¡</span>
<span class="hljs-deletion">- å’Œä»»åŠ¡è°ƒåº¦é€»è¾‘ä¸€è‡´</span>
</code></pre>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    subgraph æ‰§è¡Œå™¨
        E1[order-service-1]
        E2[order-service-2]
        E3[user-service-1]
        E4[user-service-2]
    end
    
    subgraph è°ƒåº¦å™¨
        S1[Scheduler-1&lt;br/&gt;è´Ÿè´£order-service]
        S2[Scheduler-2&lt;br/&gt;è´Ÿè´£user-service]
    end
    
    E1 --&gt; |ä¸ŠæŠ¥è´Ÿè½½| S1
    E2 --&gt; |ä¸ŠæŠ¥è´Ÿè½½| S1
    E3 --&gt; |ä¸ŠæŠ¥è´Ÿè½½| S2
    E4 --&gt; |ä¸ŠæŠ¥è´Ÿè½½| S2
    
    style S1 fill:#90EE90
    style S2 fill:#87CEEB
</code></pre>
<p><strong>å…³é”®ç‚¹ï¼šæ’åºã€‚</strong></p>
<p>æ‰€æœ‰å®ä¾‹å¿…é¡»çœ‹åˆ°ç›¸åŒçš„è°ƒåº¦å™¨é¡ºåºï¼Œå¦åˆ™ Hash ç»“æœä¸ä¸€è‡´ã€‚</p>
<h3 data-id="heading-5">é—®é¢˜ 2ï¼šè´Ÿè½½æ€ä¹ˆè¡¡é‡ï¼Ÿ</h3>
<p>éœ€è¦æ”¶é›†å“ªäº›æŒ‡æ ‡ï¼Ÿ</p>
<p>å¯¹äºä»»åŠ¡è°ƒåº¦ï¼Œä¸»è¦å…³å¿ƒï¼š</p>
<ul>
<li><strong>CPU ä½¿ç”¨ç‡</strong>ï¼šä»»åŠ¡æ‰§è¡Œéœ€è¦è®¡ç®—èµ„æº</li>
<li><strong>å†…å­˜ä½¿ç”¨ç‡</strong>ï¼šä»»åŠ¡å¤„ç†æ•°æ®éœ€è¦å†…å­˜</li>
<li><strong>çº¿ç¨‹æ± å ç”¨ç‡</strong>ï¼šä»»åŠ¡å¹¶å‘æ‰§è¡Œèƒ½åŠ›</li>
</ul>
<p>ä½¿ç”¨ Java æ ‡å‡† API æ”¶é›†ï¼Œæ— å¤–éƒ¨ä¾èµ–ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LightweightLoadCollector</span> {
    
    <span class="hljs-comment">// CPU ä½¿ç”¨ç‡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getCpuUsage</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">OperatingSystemMXBean</span> <span class="hljs-variable">osBean</span> <span class="hljs-operator">=</span> ManagementFactory.getOperatingSystemMXBean();
            <span class="hljs-keyword">if</span> (osBean <span class="hljs-keyword">instanceof</span> com.sun.management.OperatingSystemMXBean) {
                <span class="hljs-keyword">return</span> ((com.sun.management.OperatingSystemMXBean) osBean)
                    .getSystemCpuLoad() * <span class="hljs-number">100</span>;
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.warn(<span class="hljs-string">"è·å–CPUä½¿ç”¨ç‡å¤±è´¥"</span>, e);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>; <span class="hljs-comment">// é™çº§ï¼šè¿”å›é»˜è®¤å€¼</span>
    }
    
    <span class="hljs-comment">// å†…å­˜ä½¿ç”¨ç‡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getMemoryUsage</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Runtime</span> <span class="hljs-variable">runtime</span> <span class="hljs-operator">=</span> Runtime.getRuntime();
        <span class="hljs-type">long</span> <span class="hljs-variable">totalMemory</span> <span class="hljs-operator">=</span> runtime.totalMemory();
        <span class="hljs-type">long</span> <span class="hljs-variable">freeMemory</span> <span class="hljs-operator">=</span> runtime.freeMemory();
        <span class="hljs-type">long</span> <span class="hljs-variable">usedMemory</span> <span class="hljs-operator">=</span> totalMemory - freeMemory;
        <span class="hljs-keyword">return</span> (<span class="hljs-type">double</span>) usedMemory / totalMemory * <span class="hljs-number">100</span>;
    }
    
    <span class="hljs-comment">// çº¿ç¨‹æ± æŒ‡æ ‡</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getActiveThreadCount</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (threadPoolExecutor != <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">return</span> threadPoolExecutor.getActiveCount();
        }
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    }
}
</code></pre>
<p><strong>é™çº§ç­–ç•¥ï¼šå¦‚æœè·å–æŸä¸ªæŒ‡æ ‡å¤±è´¥ï¼Œè¿”å›é»˜è®¤å€¼ï¼Œä¸å½±å“æ•´ä½“æµç¨‹ã€‚</strong></p>
<h3 data-id="heading-6">é—®é¢˜ 3ï¼šæ€ä¹ˆé€‰æ‹©æ‰§è¡Œå™¨ï¼Ÿ</h3>
<p>æœ‰äº†è´Ÿè½½æ•°æ®ï¼Œæ€ä¹ˆé€‰æ‹©æœ€ä¼˜å®ä¾‹ï¼Ÿ</p>
<p>ä½¿ç”¨åŠ æƒå¹³å‡ç®—æ³•ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">æƒé‡åˆ†é…ï¼š
<span class="hljs-bullet">-</span> CPUï¼š40%
<span class="hljs-bullet">-</span> å†…å­˜ï¼š40%
<span class="hljs-bullet">-</span> çº¿ç¨‹æ± ï¼š20%

è®¡ç®—å…¬å¼ï¼ˆåˆ†æ•°è¶Šé«˜è¶Šå¥½ï¼‰ï¼š
weight = (100 - cpuUsage) * 0.4 
<span class="hljs-bullet">       +</span> (100 - memoryUsage) * 0.4 
<span class="hljs-bullet">       +</span> (100 - threadPoolUsage) * 0.2
</code></pre>
<p>ä¸ºä»€ä¹ˆè¿™æ ·åˆ†é…æƒé‡ï¼Ÿ</p>
<ul>
<li>CPU å’Œå†…å­˜ç›´æ¥å½±å“ä»»åŠ¡æ‰§è¡Œé€Ÿåº¦ï¼Œæƒé‡è¾ƒé«˜</li>
<li>çº¿ç¨‹æ± åªè¦ä¸æ»¡ï¼Œå½±å“ç›¸å¯¹è¾ƒå°ï¼Œæƒé‡è¾ƒä½</li>
</ul>
<p>åç»­å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ã€‚</p>
<h2 data-id="heading-7">ä»£ç å®ç°</h2>
<p>æŠŠåŠŸèƒ½åˆ†æˆ 4 ä¸ªæ¨¡å—ï¼Œå„å¸å…¶èŒã€‚</p>
<h3 data-id="heading-8">æ¨¡å— 1ï¼šè´Ÿè½½æ”¶é›†å™¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LightweightLoadCollector</span> {
    
    <span class="hljs-keyword">public</span> ExecutorLoadInfo <span class="hljs-title function_">collect</span><span class="hljs-params">()</span> {
        <span class="hljs-type">ExecutorLoadInfo</span> <span class="hljs-variable">loadInfo</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExecutorLoadInfo</span>();
        loadInfo.setCpuUsage(getCpuUsage());
        loadInfo.setMemoryUsage(getMemoryUsage());
        loadInfo.setThreadPoolActive(getActiveThreadCount());
        loadInfo.setThreadPoolSize(getThreadPoolSize());
        loadInfo.setReportTime(System.currentTimeMillis());
        <span class="hljs-keyword">return</span> loadInfo;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getCpuUsage</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">OperatingSystemMXBean</span> <span class="hljs-variable">osBean</span> <span class="hljs-operator">=</span> ManagementFactory.getOperatingSystemMXBean();
            <span class="hljs-keyword">if</span> (osBean <span class="hljs-keyword">instanceof</span> com.sun.management.OperatingSystemMXBean) {
                <span class="hljs-keyword">return</span> ((com.sun.management.OperatingSystemMXBean) osBean)
                    .getSystemCpuLoad() * <span class="hljs-number">100</span>;
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.warn(<span class="hljs-string">"è·å–CPUä½¿ç”¨ç‡å¤±è´¥"</span>, e);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> <span class="hljs-title function_">getMemoryUsage</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Runtime</span> <span class="hljs-variable">runtime</span> <span class="hljs-operator">=</span> Runtime.getRuntime();
        <span class="hljs-type">long</span> <span class="hljs-variable">totalMemory</span> <span class="hljs-operator">=</span> runtime.totalMemory();
        <span class="hljs-type">long</span> <span class="hljs-variable">freeMemory</span> <span class="hljs-operator">=</span> runtime.freeMemory();
        <span class="hljs-keyword">return</span> (<span class="hljs-type">double</span>) (totalMemory - freeMemory) / totalMemory * <span class="hljs-number">100</span>;
    }
}
</code></pre>
<p>èŒè´£ï¼šåªè´Ÿè´£æ”¶é›†è´Ÿè½½ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-9">æ¨¡å— 2ï¼šè°ƒåº¦å™¨é€‰æ‹©å™¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SchedulerSelectionService</span> {
    
    <span class="hljs-keyword">public</span> ServiceInstance <span class="hljs-title function_">selectResponsibleScheduler</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. ä» Nacos è·å–æ‰€æœ‰è°ƒåº¦å™¨</span>
            List&lt;Instance&gt; instances = namingService.getAllInstances(schedulerServiceName);
            
            <span class="hljs-keyword">if</span> (instances.isEmpty()) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            }
            
            <span class="hljs-comment">// 2. æ’åºï¼ˆä¿è¯ä¸€è‡´æ€§ï¼‰</span>
            instances.sort(Comparator.comparing(i -&gt; i.getIp() + <span class="hljs-string">":"</span> + i.getPort()));
            
            <span class="hljs-comment">// 3. Hash é€‰æ‹©</span>
            <span class="hljs-type">int</span> <span class="hljs-variable">hash</span> <span class="hljs-operator">=</span> Math.abs(serviceName.hashCode());
            <span class="hljs-type">int</span> <span class="hljs-variable">targetIndex</span> <span class="hljs-operator">=</span> hash % instances.size();
            <span class="hljs-type">Instance</span> <span class="hljs-variable">targetInstance</span> <span class="hljs-operator">=</span> instances.get(targetIndex);
            
            <span class="hljs-keyword">return</span> convertToServiceInstance(targetInstance);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.warn(<span class="hljs-string">"é€‰æ‹©è´Ÿè´£è°ƒåº¦å™¨å¤±è´¥"</span>, e);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
    }
}
</code></pre>
<p>èŒè´£ï¼šæ ¹æ®æœåŠ¡å Hash é€‰æ‹©è´Ÿè´£è°ƒåº¦å™¨ã€‚</p>
<h3 data-id="heading-10">æ¨¡å— 3ï¼šè´Ÿè½½ä¸ŠæŠ¥å™¨</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LightweightLoadReporter</span> {
    
    <span class="hljs-meta">@Scheduled(fixedRateString = "${jobflow.executor.load-report.report-interval-seconds:60}000")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reportLoad</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">if</span> (!enabled) {
            <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. æ”¶é›†è´Ÿè½½</span>
            <span class="hljs-type">ExecutorLoadInfo</span> <span class="hljs-variable">loadInfo</span> <span class="hljs-operator">=</span> loadCollector.collect();
            loadInfo.setServiceName(serviceName);
            loadInfo.setInstanceId(instanceId);
            
            <span class="hljs-comment">// 2. é€‰æ‹©è°ƒåº¦å™¨</span>
            <span class="hljs-type">ServiceInstance</span> <span class="hljs-variable">scheduler</span> <span class="hljs-operator">=</span> schedulerSelectionService.selectResponsibleScheduler();
            <span class="hljs-keyword">if</span> (scheduler == <span class="hljs-literal">null</span>) {
                log.warn(<span class="hljs-string">"æœªæ‰¾åˆ°è´Ÿè´£è°ƒåº¦å™¨ï¼Œè·³è¿‡è´Ÿè½½ä¸ŠæŠ¥"</span>);
                <span class="hljs-keyword">return</span>;
            }
            
            <span class="hljs-comment">// 3. ä¸ŠæŠ¥ï¼ˆå¸¦é‡è¯•ï¼‰</span>
            reportWithRetry(scheduler, loadInfo);
            
        } <span class="hljs-keyword">catch</span> (Exception e) {
            log.warn(<span class="hljs-string">"è´Ÿè½½ä¸ŠæŠ¥å¤±è´¥"</span>, e);
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">reportWithRetry</span><span class="hljs-params">(ServiceInstance scheduler, ExecutorLoadInfo loadInfo)</span> {
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">retry</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; retry &lt; maxRetries; retry++) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">String</span> <span class="hljs-variable">reportUrl</span> <span class="hljs-operator">=</span> scheduler.getUri() + <span class="hljs-string">"/internal/load/report"</span>;
                
                <span class="hljs-type">HttpHeaders</span> <span class="hljs-variable">headers</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpHeaders</span>();
                headers.setContentType(MediaType.APPLICATION_JSON);
                HttpEntity&lt;ExecutorLoadInfo&gt; request = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HttpEntity</span>&lt;&gt;(loadInfo, headers);
                
                restTemplate.exchange(reportUrl, HttpMethod.POST, request, Void.class);
                
                log.debug(<span class="hljs-string">"è´Ÿè½½ä¸ŠæŠ¥æˆåŠŸï¼Œscheduler={}, cpu={}, memory={}"</span>,
                        scheduler.getUri(), loadInfo.getCpuUsage(), loadInfo.getMemoryUsage());
                <span class="hljs-keyword">return</span>;
                
            } <span class="hljs-keyword">catch</span> (Exception e) {
                <span class="hljs-keyword">if</span> (retry &lt; maxRetries - <span class="hljs-number">1</span>) {
                    <span class="hljs-comment">// æŒ‡æ•°é€€é¿</span>
                    <span class="hljs-type">long</span> <span class="hljs-variable">delay</span> <span class="hljs-operator">=</span> retryDelayMs * (<span class="hljs-number">1</span> &lt;&lt; retry);
                    Thread.sleep(delay);
                }
            }
        }
        
        log.error(<span class="hljs-string">"è´Ÿè½½ä¸ŠæŠ¥æœ€ç»ˆå¤±è´¥ï¼Œå·²é‡è¯• {} æ¬¡"</span>, maxRetries);
    }
}
</code></pre>
<p>èŒè´£ï¼šå®šæœŸä¸ŠæŠ¥è´Ÿè½½ï¼Œå¸¦é‡è¯•æœºåˆ¶ã€‚</p>
<h3 data-id="heading-11">æ¨¡å— 4ï¼šè´Ÿè½½å‡è¡¡ç­–ç•¥</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LightweightLoadBalancingStrategy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">LoadBalancingStrategy</span> {
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ServiceInstance <span class="hljs-title function_">select</span><span class="hljs-params">(List&lt;ServiceInstance&gt; instances, 
                                  String serviceName, 
                                  LoadInfoStorage loadInfoStorage)</span> {
        
        <span class="hljs-keyword">if</span> (instances == <span class="hljs-literal">null</span> || instances.isEmpty()) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        
        <span class="hljs-keyword">if</span> (instances.size() == <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">return</span> instances.get(<span class="hljs-number">0</span>);
        }
        
        <span class="hljs-comment">// è·å–è´Ÿè½½ä¿¡æ¯</span>
        List&lt;ExecutorLoadInfo&gt; loadInfos = loadInfoStorage.getLoadInfos(serviceName);
        
        <span class="hljs-comment">// é™çº§ï¼šæ²¡æœ‰è´Ÿè½½ä¿¡æ¯</span>
        <span class="hljs-keyword">if</span> (loadInfos.isEmpty()) {
            log.debug(<span class="hljs-string">"æ²¡æœ‰è´Ÿè½½ä¿¡æ¯ï¼Œå›é€€åˆ°éšæœºé€‰æ‹©"</span>);
            <span class="hljs-keyword">return</span> instances.get(RANDOM.nextInt(instances.size()));
        }
        
        <span class="hljs-comment">// é€‰æ‹©æƒé‡æœ€é«˜çš„å®ä¾‹</span>
        <span class="hljs-type">ServiceInstance</span> <span class="hljs-variable">bestInstance</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
        <span class="hljs-type">double</span> <span class="hljs-variable">bestWeight</span> <span class="hljs-operator">=</span> Double.MIN_VALUE;
        
        <span class="hljs-keyword">for</span> (ServiceInstance instance : instances) {
            <span class="hljs-type">String</span> <span class="hljs-variable">instanceId</span> <span class="hljs-operator">=</span> instance.getHost() + <span class="hljs-string">":"</span> + instance.getPort();
            <span class="hljs-type">ExecutorLoadInfo</span> <span class="hljs-variable">loadInfo</span> <span class="hljs-operator">=</span> findLoadInfo(loadInfos, instanceId);
            
            <span class="hljs-type">double</span> weight;
            <span class="hljs-keyword">if</span> (loadInfo == <span class="hljs-literal">null</span>) {
                <span class="hljs-comment">// é™çº§ï¼šè¯¥å®ä¾‹æ— è´Ÿè½½ä¿¡æ¯ï¼Œç»™äºˆé»˜è®¤æƒé‡</span>
                weight = <span class="hljs-number">80.0</span>; <span class="hljs-comment">// å‡è®¾é»˜è®¤è´Ÿè½½ 20%</span>
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// è®¡ç®—æƒé‡</span>
                <span class="hljs-type">double</span> <span class="hljs-variable">cpuScore</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span> - loadInfo.getCpuUsage();
                <span class="hljs-type">double</span> <span class="hljs-variable">memoryScore</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span> - loadInfo.getMemoryUsage();
                <span class="hljs-type">double</span> <span class="hljs-variable">threadPoolScore</span> <span class="hljs-operator">=</span> calculateThreadPoolScore(loadInfo);
                weight = cpuScore * <span class="hljs-number">0.4</span> + memoryScore * <span class="hljs-number">0.4</span> + threadPoolScore * <span class="hljs-number">0.2</span>;
            }
            
            <span class="hljs-keyword">if</span> (weight &gt; bestWeight) {
                bestWeight = weight;
                bestInstance = instance;
            }
        }
        
        <span class="hljs-keyword">return</span> bestInstance;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> <span class="hljs-title function_">calculateThreadPoolScore</span><span class="hljs-params">(ExecutorLoadInfo loadInfo)</span> {
        <span class="hljs-keyword">if</span> (loadInfo.getThreadPoolSize() &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-type">double</span> <span class="hljs-variable">usage</span> <span class="hljs-operator">=</span> (<span class="hljs-type">double</span>) loadInfo.getThreadPoolActive() 
                         / loadInfo.getThreadPoolSize() * <span class="hljs-number">100</span>;
            <span class="hljs-keyword">return</span> <span class="hljs-number">100</span> - usage;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-number">100</span>;
    }
}
</code></pre>
<p>èŒè´£ï¼šæ ¹æ®è´Ÿè½½ä¿¡æ¯é€‰æ‹©æœ€ä¼˜æ‰§è¡Œå™¨ã€‚</p>
<h2 data-id="heading-12">å®Œæ•´æµç¨‹</h2>
<p>æŠŠå„ä¸ªæ¨¡å—ä¸²èµ·æ¥ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant E as æ‰§è¡Œå™¨
    participant N as Nacos
    participant S as è°ƒåº¦å™¨
    
    Note over E: å®šæ—¶æ”¶é›†è´Ÿè½½
    E-&gt;&gt;E: æ”¶é›†CPUã€å†…å­˜ã€çº¿ç¨‹æ± 
    
    Note over E: é€‰æ‹©è´Ÿè´£è°ƒåº¦å™¨
    E-&gt;&gt;N: æŸ¥è¯¢æ‰€æœ‰è°ƒåº¦å™¨å®ä¾‹
    N--&gt;&gt;E: è¿”å›è°ƒåº¦å™¨åˆ—è¡¨
    E-&gt;&gt;E: Hash(serviceName) % count
    
    Note over E: ä¸ŠæŠ¥è´Ÿè½½
    E-&gt;&gt;S: POST /internal/load/report
    S-&gt;&gt;S: å­˜å‚¨åˆ°å†…å­˜Map
    S--&gt;&gt;E: 200 OK
    
    Note over S: ä»»åŠ¡è§¦å‘æ—¶é€‰æ‹©æ‰§è¡Œå™¨
    S-&gt;&gt;S: è·å–è´Ÿè½½ä¿¡æ¯
    S-&gt;&gt;S: è®¡ç®—æƒé‡ï¼Œé€‰æ‹©æœ€ä¼˜
    S-&gt;&gt;E: è°ƒç”¨æ‰§è¡Œå™¨
</code></pre>
<p>åˆ†ä¸¤ä¸ªé˜¶æ®µï¼š</p>
<p><strong>é˜¶æ®µ 1ï¼šè´Ÿè½½ä¸ŠæŠ¥ï¼ˆåå°æŒç»­è¿›è¡Œï¼‰</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">æ‰§è¡Œå™¨æ¯ 60 ç§’ï¼š
<span class="hljs-bullet">1.</span> æ”¶é›†è´Ÿè½½ä¿¡æ¯ï¼ˆCPUã€å†…å­˜ã€çº¿ç¨‹æ± ï¼‰
<span class="hljs-bullet">2.</span> Hash(serviceName) é€‰æ‹©è´Ÿè´£è°ƒåº¦å™¨
<span class="hljs-bullet">3.</span> HTTP POST ä¸ŠæŠ¥ç»™è°ƒåº¦å™¨
<span class="hljs-bullet">4.</span> è°ƒåº¦å™¨å­˜å‚¨åˆ°å†…å­˜ Map
</code></pre>
<p><strong>é˜¶æ®µ 2ï¼šä»»åŠ¡è°ƒåº¦ï¼ˆè§¦å‘æ—¶è¿›è¡Œï¼‰</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">å½“ä»»åŠ¡è§¦å‘æ—¶ï¼š
<span class="hljs-bullet">1.</span> è°ƒåº¦å™¨æŸ¥è¯¢å¯ç”¨æ‰§è¡Œå™¨åˆ—è¡¨ï¼ˆä» Nacosï¼‰
<span class="hljs-bullet">2.</span> ä»å†…å­˜ Map è·å–è´Ÿè½½ä¿¡æ¯
<span class="hljs-bullet">3.</span> è®¡ç®—æ¯ä¸ªå®ä¾‹çš„æƒé‡
<span class="hljs-bullet">4.</span> é€‰æ‹©æƒé‡æœ€é«˜çš„å®ä¾‹
<span class="hljs-bullet">5.</span> HTTP è°ƒç”¨æ‰§è¡Œå™¨
</code></pre>
<p><strong>å…³é”®è®¾è®¡ï¼šè´Ÿè½½ä¸ŠæŠ¥å’Œä»»åŠ¡è°ƒåº¦è§£è€¦ï¼Œå³ä½¿ä¸ŠæŠ¥å¤±è´¥ï¼Œä»»åŠ¡è°ƒåº¦ä¹Ÿèƒ½é™çº§æ‰§è¡Œã€‚</strong></p>
<h2 data-id="heading-13">é™çº§ç­–ç•¥</h2>
<p>ç³»ç»Ÿè®¾è®¡äº†å¤šå±‚é™çº§ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">é™çº§è·¯å¾„ <span class="hljs-number">1</span>ï¼šæ²¡æœ‰è´Ÿè½½ä¿¡æ¯
â†’ éšæœºé€‰æ‹©

é™çº§è·¯å¾„ <span class="hljs-number">2</span>ï¼šéƒ¨åˆ†å®ä¾‹æ— è´Ÿè½½ä¿¡æ¯
â†’ ç»™äºˆé»˜è®¤æƒé‡ <span class="hljs-number">80</span>ï¼ˆå‡è®¾è´Ÿè½½ <span class="hljs-number">20</span><span class="hljs-comment">%ï¼‰</span>

é™çº§è·¯å¾„ <span class="hljs-number">3</span>ï¼šè´Ÿè½½å‡è¡¡ç­–ç•¥å¤±è´¥
â†’ å›é€€åˆ°è½®è¯¢

é™çº§è·¯å¾„ <span class="hljs-number">4</span>ï¼šæ‰€æœ‰è°ƒåº¦å™¨æŒ‚äº†
â†’ ä¸ŠæŠ¥å¤±è´¥ï¼Œä½†ä¸å½±å“ä¸šåŠ¡
</code></pre>
<p>æ¯ä¸€å±‚é™çº§éƒ½åœ¨ä¿æŠ¤ç³»ç»Ÿå¯ç”¨æ€§ã€‚<strong>å®å¯åŠŸèƒ½é€€åŒ–ï¼Œä¸èƒ½ç³»ç»Ÿä¸å¯ç”¨ã€‚</strong></p>
<h2 data-id="heading-14">é…ç½®è¯´æ˜</h2>
<h3 data-id="heading-15">æ‰§è¡Œå™¨é…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">jobflow:</span>
  <span class="hljs-attr">executor:</span>
    <span class="hljs-attr">load-report:</span>
      <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># å¯ç”¨è´Ÿè½½ä¸ŠæŠ¥</span>
      <span class="hljs-attr">report-interval-seconds:</span> <span class="hljs-number">60</span> <span class="hljs-comment"># ä¸ŠæŠ¥é—´éš” 60 ç§’</span>
      <span class="hljs-attr">max-retries:</span> <span class="hljs-number">3</span> <span class="hljs-comment"># æœ€å¤§é‡è¯• 3 æ¬¡</span>
      <span class="hljs-attr">retry-delay-ms:</span> <span class="hljs-number">1000</span> <span class="hljs-comment"># é‡è¯•å»¶è¿Ÿ 1 ç§’</span>
</code></pre>
<h3 data-id="heading-16">è°ƒåº¦å™¨é…ç½®</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">load-aware:</span>
  <span class="hljs-attr">enabled:</span> <span class="hljs-literal">true</span> <span class="hljs-comment"># å¯ç”¨è´Ÿè½½æ„ŸçŸ¥è°ƒåº¦</span>
</code></pre>
<h2 data-id="heading-17">æµ‹è¯•éªŒè¯</h2>
<h3 data-id="heading-18">1. è´Ÿè½½ä¸ŠæŠ¥</h3>
<p>æ‰§è¡Œå™¨æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">2026-01-10T10:59:51.589+08:00 DEBUG --- <span class="hljs-section">[scheduling-1]</span> c.s.j.c.l.LightweightLoadReporter  : 
è´Ÿè½½ä¸ŠæŠ¥æˆåŠŸï¼Œ<span class="hljs-attr">scheduler</span>=http://<span class="hljs-number">192.168</span>.<span class="hljs-number">71.174</span>:<span class="hljs-number">8080</span>, cpu=<span class="hljs-number">21.69</span>, memory=<span class="hljs-number">58.86</span>
</code></pre>
<p>è°ƒåº¦å™¨æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">2026-01-10T10:59:51.589+08:00 DEBUG --- <span class="hljs-section">[nio-8080-exec-3]</span> c.s.j.s.c.LoadReportController  : 
æ”¶åˆ°è´Ÿè½½ä¸ŠæŠ¥ï¼Œ<span class="hljs-attr">instanceId</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">71.174</span>:<span class="hljs-number">8081</span>, serviceName=user-service-example, 
<span class="hljs-attr">cpuUsage</span>=<span class="hljs-number">21.69</span>, memoryUsage=<span class="hljs-number">58.86</span>
</code></pre>
<p>ä¸ŠæŠ¥æ­£å¸¸ï¼Œè°ƒåº¦å™¨æˆåŠŸæ¥æ”¶è´Ÿè½½æ•°æ®ã€‚</p>
<h3 data-id="heading-19">2. ä»»åŠ¡è°ƒåº¦</h3>
<p>ä»»åŠ¡è§¦å‘æ—¶çš„æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">2026-01-10T11:00:02.523+08:00 DEBUG --- <span class="hljs-section">[scheduling-1]</span> c.s.j.s.s.ClusterInstanceService  : 
è°ƒåº¦ owner åˆ¤å®š, <span class="hljs-attr">jobKey</span>=user-service-example<span class="hljs-comment">#demo-job-every-minute, </span>
<span class="hljs-attr">schedulerInstanceId</span>=<span class="hljs-number">192.168</span>.<span class="hljs-number">71.174</span>:<span class="hljs-number">8080</span>, isOwner=<span class="hljs-literal">true</span>
</code></pre>
<pre><code class="hljs language-ini" lang="ini">2026-01-10T11:00:02.524+08:00  INFO --- <span class="hljs-section">[scheduling-1]</span> c.s.j.s.s.JobFlowSchedulerService  : 
è§¦å‘ä»»åŠ¡æ‰§è¡Œ, <span class="hljs-attr">jobName</span>=demo-job-every-minute, triggerTime=<span class="hljs-number">2026</span>-<span class="hljs-number">01</span>-<span class="hljs-number">10</span>T11:<span class="hljs-number">00</span>:<span class="hljs-number">02.522789</span>
</code></pre>
<pre><code class="hljs language-ini" lang="ini">2026-01-10T11:00:02.528+08:00  INFO --- <span class="hljs-section">[scheduling-1]</span> c.s.j.s.s.JobExecutionService  : 
åˆ›å»ºçˆ¶æ‰§è¡Œè®°å½•, <span class="hljs-attr">jobName</span>=demo-job-every-minute, parentId=<span class="hljs-number">1576</span>, traceId=<span class="hljs-number">20260110110002</span>-<span class="hljs-number">06</span>f2ab24
</code></pre>
<h3 data-id="heading-20">3. ä»»åŠ¡æ‰§è¡Œ</h3>
<p>æ‰§è¡Œå™¨æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">2026-01-10 11:00:02.534 <span class="hljs-section">[http-nio-8081-exec-3]</span> INFO  c.s.j.c.e.JobExecutorController - 
<span class="hljs-section">[traceId=20260110110002-06f2ab24-0]</span> å¼€å§‹æ‰§è¡Œä»»åŠ¡ï¼Œ<span class="hljs-attr">handler</span>=demoJob
</code></pre>
<pre><code class="hljs language-ini" lang="ini">2026-01-10 11:00:02.534 <span class="hljs-section">[http-nio-8081-exec-3]</span> INFO  c.s.j.e.u.h.DemoJobHandler - 
<span class="hljs-section">[traceId=20260110110002-06f2ab24-0]</span> <span class="hljs-section">[DemoJob]</span> æ‰§è¡Œå¼€å§‹, <span class="hljs-attr">shardStart</span>=<span class="hljs-number">0</span>, shardEnd=<span class="hljs-number">0</span>
</code></pre>
<pre><code class="hljs language-ini" lang="ini">2026-01-10 11:00:02.534 <span class="hljs-section">[http-nio-8081-exec-3]</span> INFO  c.s.j.e.u.h.DemoJobHandler - 
<span class="hljs-section">[traceId=20260110110002-06f2ab24-0]</span> <span class="hljs-section">[DemoJob]</span> æ‰§è¡Œå®Œæˆ
</code></pre>
<p>å›è°ƒå®Œæˆï¼š</p>
<pre><code class="hljs language-ini" lang="ini">2026-01-10 11:00:02.548 <span class="hljs-section">[jobflow-callback-71]</span> INFO  c.s.j.c.e.JobExecutorController - 
<span class="hljs-section">[traceId=20260110110002-06f2ab24-0]</span> å·²å›è°ƒ scheduler, <span class="hljs-attr">traceId</span>=<span class="hljs-number">20260110110002</span>-<span class="hljs-number">06</span>f2ab24-<span class="hljs-number">0</span>
</code></pre>
<p>å…¨é“¾è·¯é€šäº†ï¼ŒTraceId è´¯ç©¿å§‹ç»ˆã€‚</p>
<h3 data-id="heading-21">4. è´Ÿè½½å‡è¡¡æ•ˆæœ</h3>
<p>æµ‹è¯•åœºæ™¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">å¯åŠ¨ 3 ä¸ªæ‰§è¡Œå™¨å®ä¾‹
æ‰‹åŠ¨ç»™å®ä¾‹ 1 åŠ å‹ï¼ˆCPU æ‰“åˆ° 80%ï¼‰
è§¦å‘ä»»åŠ¡ï¼Œè§‚å¯Ÿè°ƒåº¦ç»“æœ

è´Ÿè½½æ•°æ®ï¼š
- å®ä¾‹ 1ï¼šCPU 80%ï¼Œæƒé‡ = 20*0.4 + 40*0.4 + 80*<span class="hljs-attr">0.2</span> = <span class="hljs-number">40</span>
- å®ä¾‹ 2ï¼šCPU 30%ï¼Œæƒé‡ = 70*0.4 + 50*0.4 + 80*<span class="hljs-attr">0.2</span> = <span class="hljs-number">64</span>
- å®ä¾‹ 3ï¼šCPU 50%ï¼Œæƒé‡ = 50*0.4 + 60*0.4 + 80*<span class="hljs-attr">0.2</span> = <span class="hljs-number">60</span>

é¢„æœŸï¼šè°ƒåº¦å™¨é€‰æ‹©å®ä¾‹ 2ï¼ˆæƒé‡æœ€é«˜ï¼‰
å®é™…ï¼šä»»åŠ¡ç¡®å®è°ƒåº¦åˆ°äº†å®ä¾‹ 2
</code></pre>
<p>è´Ÿè½½æ„ŸçŸ¥è°ƒåº¦ç”Ÿæ•ˆã€‚</p>
<h2 data-id="heading-22">å…³é”®è®¾è®¡ç‚¹</h2>
<h3 data-id="heading-23">1. ä¸ºä»€ä¹ˆä¸ç”¨ Redis</h3>
<p>å¯¹æ¯”ä¸¤ç§æ–¹æ¡ˆï¼š</p>
<p><strong>Redis æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li>ä¼˜åŠ¿ï¼šæ•°æ®æŒä¹…åŒ–ã€å¤šè°ƒåº¦å™¨å…±äº«</li>
<li>åŠ£åŠ¿ï¼šå¼•å…¥ä¾èµ–ã€éœ€è¦å¤„ç†ä¸€è‡´æ€§ã€éœ€è¦å¤„ç†è¿‡æœŸ</li>
</ul>
<p><strong>HTTP æ–¹æ¡ˆï¼š</strong></p>
<ul>
<li>ä¼˜åŠ¿ï¼šæ— ä¾èµ–ã€å®ç°ç®€å•ã€é™çº§å®¹æ˜“</li>
<li>åŠ£åŠ¿ï¼šæ•°æ®ä¸æŒä¹…åŒ–ã€è°ƒåº¦å™¨é‡å¯ä¸¢å¤±</li>
</ul>
<p>é€‰æ‹© HTTP æ–¹æ¡ˆçš„ç†ç”±ï¼š</p>
<ul>
<li>è´Ÿè½½æ•°æ®æœ¬èº«å°±æ˜¯å®æ—¶çš„ï¼Œ60 ç§’åä¼šé‡æ–°ä¸ŠæŠ¥</li>
<li>è°ƒåº¦å™¨é‡å¯æ˜¯å°æ¦‚ç‡äº‹ä»¶ï¼Œå³ä½¿ä¸¢å¤±ä¹Ÿèƒ½å¿«é€Ÿæ¢å¤</li>
<li>ç®€å•æ€§æ¯”å®Œç¾æ€§æ›´é‡è¦</li>
</ul>
<h3 data-id="heading-24">2. Hash é€‰æ‹©çš„ä¸€è‡´æ€§</h3>
<p>å…³é”®ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ’åºä¿è¯ä¸€è‡´æ€§</span>
instances.sort(Comparator.comparing(i -&gt; i.getIp() + <span class="hljs-string">":"</span> + i.getPort()));
</code></pre>
<p>å¦‚æœä¸æ’åºï¼š</p>
<pre><code class="hljs language-css" lang="css">æ‰§è¡Œå™¨çœ‹åˆ°ï¼š<span class="hljs-selector-attr">[A, B, C]</span>
è°ƒåº¦å™¨çœ‹åˆ°ï¼š<span class="hljs-selector-attr">[C, A, B]</span>

Hash ç»“æœä¸ä¸€è‡´ï¼Œè´Ÿè½½æ•°æ®å¯¹ä¸ä¸Š
</code></pre>
<p>æ’åºæ˜¯åˆ†å¸ƒå¼ä¸€è‡´æ€§çš„åŸºç¡€ã€‚</p>
<h3 data-id="heading-25">3. å¤šå±‚é™çº§</h3>
<p>ç³»ç»Ÿåœ¨å¤šä¸ªå±‚é¢éƒ½æœ‰é™çº§ï¼š</p>
<pre><code class="hljs">å±‚çº§ 1ï¼šæŒ‡æ ‡æ”¶é›†å¤±è´¥ â†’ è¿”å›é»˜è®¤å€¼ 0
å±‚çº§ 2ï¼šæ— è´Ÿè½½ä¿¡æ¯ â†’ éšæœºé€‰æ‹©
å±‚çº§ 3ï¼šéƒ¨åˆ†æ— è´Ÿè½½ â†’ ç»™äºˆé»˜è®¤æƒé‡
å±‚çº§ 4ï¼šç­–ç•¥å¤±è´¥ â†’ å›é€€è½®è¯¢
</code></pre>
<p>åˆ†å¸ƒå¼ç³»ç»Ÿè¦å‡è®¾ä»»ä½•ç¯èŠ‚éƒ½å¯èƒ½å¤±è´¥ï¼Œé™çº§æ˜¯å¿…é¡»çš„ã€‚</p>
<h3 data-id="heading-26">4. æƒé‡è®¡ç®—</h3>
<p>å½“å‰æƒé‡åˆ†é…æ˜¯ CPU(40%) + å†…å­˜(40%) + çº¿ç¨‹æ± (20%)ã€‚</p>
<p>è¿™æ˜¯æ ¹æ®ç»éªŒè®¾å®šçš„ï¼Œä¸åŒä¸šåŠ¡åœºæ™¯å¯èƒ½éœ€è¦ä¸åŒçš„æƒé‡ã€‚åç»­å¯ä»¥æ”¯æŒé…ç½®åŒ–ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">load-aware:</span>
  <span class="hljs-attr">weight:</span>
    <span class="hljs-attr">cpu:</span> <span class="hljs-number">0.4</span>
    <span class="hljs-attr">memory:</span> <span class="hljs-number">0.4</span>
    <span class="hljs-attr">thread-pool:</span> <span class="hljs-number">0.2</span>
</code></pre>
<h2 data-id="heading-27">æ€»ç»“</h2>
<p>è´Ÿè½½æ„ŸçŸ¥è°ƒåº¦åŠŸèƒ½å·²ç»å®ç°å¹¶éªŒè¯ï¼Œæ ¸å¿ƒç‰¹ç‚¹ï¼š</p>
<ol>
<li><strong>è½»é‡çº§</strong>ï¼šæ— å¤–éƒ¨ä¾èµ–ï¼Œåªç”¨ Java æ ‡å‡† API</li>
<li><strong>ç®€å•</strong>ï¼šHTTP ç›´æ¥ä¸ŠæŠ¥ï¼Œè°ƒåº¦å™¨å†…å­˜å­˜å‚¨</li>
<li><strong>å¯é </strong>ï¼šå¤šå±‚é™çº§ï¼ŒåŠŸèƒ½é€€åŒ–ä½†ç³»ç»Ÿä¸æŒ‚</li>
<li><strong>çµæ´»</strong>ï¼šæƒé‡å¯è°ƒæ•´ï¼Œé€‚åº”ä¸åŒåœºæ™¯</li>
</ol>
<p>è¿™ä¸ªåŠŸèƒ½è§£å†³äº†æ‰§è¡Œå™¨è´Ÿè½½ä¸å‡è¡¡çš„é—®é¢˜ï¼Œæé«˜äº†ç³»ç»Ÿèµ„æºåˆ©ç”¨ç‡ã€‚</p>
<p>æœ€é‡è¦çš„æ˜¯ï¼Œå®ƒå»¶ç»­äº† JobFlow çš„è®¾è®¡ç†å¿µï¼š<strong>ç”¨æœ€ç®€å•çš„æ–¹æ¡ˆï¼Œè§£å†³å®é™…é—®é¢˜ã€‚</strong></p>
<hr/>
<p>ä»£ç å·²ç»æäº¤åˆ° Giteeï¼š<code>https://gitee.com/sh_wangwanbao/job-flow</code></p>
<p>å¦‚æœä½ æœ‰æ›´å¥½çš„æƒ³æ³•æˆ–é‡åˆ°é—®é¢˜ï¼Œæ¬¢è¿æ issue è®¨è®ºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI æŠŠä»£ç æ”¹å´©æºƒäº†ï¼Ÿè‹¥çˆ± (IfAI) v0.2.7 å‘å¸ƒï¼šç¨‹åºå‘˜çš„â€œåæ‚”è¯â€çœŸçš„æ¥äº†ï¼]]></title>    <link>https://juejin.cn/post/7593193235251068980</link>    <guid>https://juejin.cn/post/7593193235251068980</guid>    <pubDate>2026-01-09T11:38:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593193235251068980" data-draft-id="7593181244708814900" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI æŠŠä»£ç æ”¹å´©æºƒäº†ï¼Ÿè‹¥çˆ± (IfAI) v0.2.7 å‘å¸ƒï¼šç¨‹åºå‘˜çš„â€œåæ‚”è¯â€çœŸçš„æ¥äº†ï¼"/> <meta itemprop="keywords" content="AIç¼–ç¨‹,Rust"/> <meta itemprop="datePublished" content="2026-01-09T11:38:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="peterfei"/> <meta itemprop="url" content="https://juejin.cn/user/2700056287782663"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI æŠŠä»£ç æ”¹å´©æºƒäº†ï¼Ÿè‹¥çˆ± (IfAI) v0.2.7 å‘å¸ƒï¼šç¨‹åºå‘˜çš„â€œåæ‚”è¯â€çœŸçš„æ¥äº†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2700056287782663/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    peterfei
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T11:38:33.000Z" title="Fri Jan 09 2026 11:38:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ™ï¸ å¼•è¨€ï¼šAI æ—¶ä»£ï¼Œæˆ‘ä»¬è¿˜åœ¨ç”¨â€œç‡ƒæ²¹è½¦â€æ”¹ä»£ç å—ï¼Ÿ</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8062bba147c54733a647efafc7d8c0c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcGV0ZXJmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768563513&amp;x-signature=o4ZOo6okUOJ0M1MuPOyHzgv2Yhc%3D" alt="æˆªå±2026-01-09 17.49.43.png" loading="lazy"/></p>
<p>å„ä½æ˜é‡‘çš„å¼€å‘è€…ï¼Œå¤§å®¶å¥½ï¼Œæˆ‘æ˜¯Peterfeiã€‚</p>
<p>åœ¨ 2026 å¹´åˆçš„ AI æµªæ½®ä¸­ï¼Œæ™ºè°± AI çš„ä¼°å€¼ç‹‚é£™ã€DeepSeek çš„æé€Ÿè¿›åŒ–è®©æˆ‘ä»¬ç›®ä¸æš‡æ¥ã€‚ä½†ä½œä¸ºä¸€ä¸ªæ¯å¤©å’Œä»£ç æ‰“äº¤é“çš„ç¨‹åºå‘˜ï¼Œä½ æ˜¯å¦æ€è€ƒè¿‡ï¼š<strong>ä¸ºä»€ä¹ˆæˆ‘ä»¬è¿˜åœ¨ä¼ ç»Ÿç¼–è¾‘å™¨ï¼ˆVS Code/JetBrainsï¼‰çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡â€œç¼åˆâ€æ’ä»¶æ¥ä½¿ç”¨ AIï¼Ÿ</strong></p>
<p>è¿™ç§ä½“éªŒå°±åƒæ˜¯åœ¨è€æ—§çš„ç‡ƒæ²¹è½¦ä¸Šå¼ºè¡ŒæŒ‚äº†ä¸€ä¸ªç”µåŠ¨æœºâ€”â€”èƒ½è·‘ï¼Œä½†æ€»è§‰å¾—å“ªé‡Œä¸å¯¹åŠ²ã€‚ç›´åˆ°æˆ‘æ·±åº¦ä½“éªŒäº† <strong>è‹¥çˆ± (IfAI) v0.2.7</strong>ï¼Œæˆ‘æ‰æ„è¯†åˆ°ï¼Œæ‰€è°“çš„â€œAI åŸç”Ÿï¼ˆAI-Nativeï¼‰â€ç¼–è¾‘å™¨ï¼Œç»ä¸æ˜¯å¤šä¸€ä¸ªå¯¹è¯æ¡†é‚£ä¹ˆç®€å•ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥ç¡¬æ ¸æ‹†è§£ä¸€ä¸‹ IfAI v0.2.7 å¸¦æ¥çš„ä½“éªŒé£è·ƒã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ—ï¸ v0.2.7 æ ¸å¿ƒæ¶æ„å›¾ï¼šAI åŸç”Ÿæ˜¯å¦‚ä½•ç‚¼æˆçš„ï¼Ÿ</h2>
<p>åœ¨æ·±å…¥åŠŸèƒ½ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸€çœ¼ IfAI çš„åº•å±‚é€»è¾‘ã€‚ä¸ä¼ ç»Ÿç¼–è¾‘å™¨â€œæ’ä»¶å¼â€æ¥å…¥ AI ä¸åŒï¼ŒIfAI å°† AI æ¨ç†ä¸æ–‡ä»¶ç³»ç»Ÿã€Shell ç¯å¢ƒè¿›è¡Œäº†æ·±åº¦è€¦åˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8dbf93da74444639c021370580f73d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgcGV0ZXJmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768563513&amp;x-signature=cOgYD%2Fyt3rcw%2F%2FCbOu27%2Fmv%2FDmU%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸€ã€ AI ä»£ç å›æ»šï¼šç¨‹åºå‘˜çš„â€œåæ‚”è¯â€é€»è¾‘</h2>
<p>å¾ˆå¤šäººä¸æ•¢è®© AI åšå¤§è§„æ¨¡é‡æ„ï¼Œæ˜¯å› ä¸º AI ç»å¸¸ä¼šâ€œå¹»è§‰â€ã€‚AI å•ªçš„ä¸€ä¸‹ä¿®æ”¹äº† 10 ä¸ªæ–‡ä»¶ï¼Œå¦‚æœè·‘ä¸é€šï¼Œæ‰‹åŠ¨ <code>Ctrl+Z</code> ç®€ç›´æ˜¯ç¾éš¾ã€‚</p>
<p><strong>IfAI v0.2.7 å®ç°äº†ç²¾å‡†çš„â€œAI åŸå­å˜æ›´è®°å½•å™¨â€ã€‚</strong></p>
<p>å®ƒä¸ä»…ä»…è®°å½•æ–‡æœ¬å˜åŒ–ï¼Œè¿˜è®°å½•äº† AI äº¤äº’çš„ä¸Šä¸‹æ–‡ã€‚ä»¥ä¸‹æ˜¯å…¶åº•å±‚ Change Tracker çš„æ ¸å¿ƒå®ç°é€»è¾‘ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä¼ªä»£ç ï¼šIfAI åŸå­å˜æ›´è®°å½•ç»“æ„</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title">AIChangeRecord</span> {
 Â id: <span class="hljs-built_in">string</span>; Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// äº¤äº’ ID</span>
 Â timestamp: number;
 Â files: {
 Â  Â path: <span class="hljs-built_in">string</span>;
 Â  Â type: <span class="hljs-string">'modify'</span> | <span class="hljs-string">'add'</span> | <span class="hljs-string">'delete'</span>;
 Â  Â contentBefore: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// å˜æ›´å‰çš„å…¨é‡å¿«ç…§</span>
 Â  Â contentAfter: <span class="hljs-built_in">string</span>;
 Â  Â diffSummary: <span class="hljs-built_in">string</span>; Â  <span class="hljs-comment">// ç”¨äºæ¸²æŸ“ Smart Diff çš„ç´¢å¼•</span>
  }[];
}
â€‹
<span class="hljs-comment">// æ ¸å¿ƒå›æ»šé€»è¾‘ï¼šç¡®ä¿æ–‡ä»¶ç³»ç»Ÿä¸ UI çŠ¶æ€åŒæ­¥</span>
<span class="hljs-function"><span class="hljs-keyword">async</span> function <span class="hljs-title">performRollback</span>(<span class="hljs-params">recordId: <span class="hljs-built_in">string</span></span>)</span> {
 Â <span class="hljs-keyword">const</span> <span class="hljs-keyword">record</span> = <span class="hljs-keyword">await</span> changeHistory.<span class="hljs-keyword">get</span>(recordId);
 Â <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> file of <span class="hljs-keyword">record</span>.files) {
 Â  Â <span class="hljs-keyword">if</span> (file.type === <span class="hljs-string">'add'</span>) {
 Â  Â  Â <span class="hljs-keyword">await</span> fs.<span class="hljs-keyword">remove</span>(file.path); <span class="hljs-comment">// å›æ»šæ–°å¢ï¼šç‰©ç†åˆ é™¤</span>
 Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â <span class="hljs-keyword">await</span> fs.writeFile(file.path, file.contentBefore); <span class="hljs-comment">// æ¢å¤åŸå§‹å†…å®¹</span>
 Â   }
  }
 Â <span class="hljs-comment">// è§¦å‘ UI å±‚çš„ FileTree åˆ·æ–°ä¸ç¼–è¾‘å™¨é‡è½½</span>
 Â eventBus.emit(<span class="hljs-string">'FILES_RECOVERED'</span>, <span class="hljs-keyword">record</span>.files.map(f =&gt; f.path));
}
</code></pre>
<p>è¿™ç§è®¾è®¡è®©ä½ æ•¢äºæ”¾æ‰‹è®© AI å»å®éªŒï¼Œå› ä¸ºä½ æ°¸è¿œæ‹¥æœ‰ä¸€é”®å½’ä½çš„èƒ½åŠ›ã€‚</p>
<hr/>
<h2 data-id="heading-3">äºŒã€ 120FPS æ€§èƒ½ä¿¡ä»°ï¼šRust å±‚çš„ç‰‡æ®µåˆå¹¶ç®—æ³•</h2>
<p>ä¸ºä»€ä¹ˆ IfAI åœ¨ AI ç–¯ç‹‚ç”Ÿæˆä»£ç æ—¶ï¼ŒUI ä¾ç„¶ä¸æ»‘ï¼Ÿè¿™å½’åŠŸäºæˆ‘ä»¬åœ¨ Rust å±‚å®ç°çš„ <strong>Streaming Buffer Manager</strong>ã€‚</p>
<p>ä¼ ç»Ÿæµå¼æ¸²æŸ“ä¼šä¸ºæ¯ä¸€ä¸ªæ”¶åˆ°çš„ Token åˆ›å»ºä¸€ä¸ª DOM èŠ‚ç‚¹ï¼Œè¿™åœ¨ä¸‡è¡Œä»£ç ç”Ÿæˆæ—¶ä¼šå¯¼è‡´ React Fiber è°ƒåº¦çˆ†ç‚¸ã€‚IfAI v0.2.7 åœ¨ Rust ä¸­ç»§å±‚å®ç°äº†ä¸€ä¸ªé«˜æ•ˆçš„ç¼“å†²åŒºåˆå¹¶ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä¼ªä»£ç ï¼šRust å±‚çš„æµå¼ç‰‡æ®µåˆå¹¶é€»è¾‘</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">StreamBuffer</span> {
 Â  Â last_fragment: <span class="hljs-type">String</span>,
 Â  Â last_type: FragmentType,
}
â€‹
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">StreamBuffer</span> {
 Â  Â <span class="hljs-comment">// å½“æ–°çš„ Token åˆ°è¾¾æ—¶ï¼Œåˆ¤æ–­æ˜¯å¦å¯ä»¥ä¸ä¸Šä¸€ç‰‡æ®µåˆå¹¶</span>
 Â  Â <span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">push</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, new_text: &amp;<span class="hljs-type">str</span>, frag_type: FragmentType) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt; {
 Â  Â  Â  Â <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.last_type == frag_type &amp;&amp; !<span class="hljs-title function_ invoke__">is_complex_markdown</span>(new_text) {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// åˆå¹¶æ–‡æœ¬ï¼Œå‡å°‘è·¨è¿›ç¨‹ä¼ é€’ç»™å‰ç«¯çš„é¢‘ç‡</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">self</span>.last_fragment.<span class="hljs-title function_ invoke__">push_str</span>(new_text);
 Â  Â  Â  Â  Â  Â <span class="hljs-literal">None</span> 
 Â  Â  Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">completed</span> = <span class="hljs-keyword">self</span>.last_fragment.<span class="hljs-title function_ invoke__">clone</span>();
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">self</span>.last_fragment = new_text.<span class="hljs-title function_ invoke__">to_string</span>();
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">self</span>.last_type = frag_type;
 Â  Â  Â  Â  Â  Â <span class="hljs-title function_ invoke__">Some</span>(completed) <span class="hljs-comment">// è§¦å‘å‰ç«¯åˆ›å»ºä¸€ä¸ªæ–°çš„è¯­ä¹‰èŠ‚ç‚¹</span>
 Â  Â  Â   }
 Â   }
}
</code></pre>
<p>é€šè¿‡è¿™ç§åˆå¹¶ç­–ç•¥ï¼Œæˆ‘ä»¬å‡å°‘äº†çº¦ <strong>40% çš„ DOM èŠ‚ç‚¹</strong>ï¼Œä»è€Œä¿è¯äº†åœ¨é«˜ refresh rate å±å¹•ä¸‹çš„ <strong>120FPS</strong> æ»¡å¸§ä½“éªŒã€‚</p>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€ ä»â€œå¯¹è¯é©±åŠ¨â€åˆ°â€œæµ‹è¯•é©±åŠ¨â€ï¼šE2E æµ‹è¯•é—­ç¯</h2>
<p>IfAI v0.2.7 æœ€ç¡¬æ ¸çš„è¿›åŒ–ï¼Œæ˜¯å®ƒä¸å†åªæ˜¯â€œå†™â€ä»£ç ï¼Œå®ƒè¿˜ä¼šâ€œéªŒè¯â€ä»£ç ã€‚</p>
<p>Agent ç°åœ¨å¯ä»¥è‡ªä¸»è°ƒç”¨æ–°å¼•å…¥çš„ <strong>å…¨é“¾è·¯è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶</strong>ã€‚å½“å®ƒå¸®ä½ å†™å®Œä¸€ä¸ªç™»å½•ç»„ä»¶ï¼Œå®ƒä¼šè‡ªåŠ¨ç”Ÿæˆå¹¶è¿è¡Œå¦‚ä¸‹è„šæœ¬ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// Agent è‡ªåŠ¨ç”Ÿæˆçš„éªŒè¯è„šæœ¬</span>
test(<span class="hljs-string">'Verify AI generated Login flow'</span>, <span class="hljs-keyword">async</span> ({ page }) =&gt; {
 Â <span class="hljs-keyword">await</span> page.<span class="hljs-keyword">goto</span>(<span class="hljs-string">'/preview/auth'</span>);
 Â 
 Â <span class="hljs-comment">// ä½¿ç”¨å†…ç½®æ•°æ®ç”Ÿæˆå™¨æ³¨å…¥ Mock æ•°æ®</span>
 Â <span class="hljs-keyword">await</span> page.fill(<span class="hljs-string">'input[name="email"]'</span>, DataGenerator.email());
 Â <span class="hljs-keyword">await</span> page.fill(<span class="hljs-string">'input[name="password"]'</span>, <span class="hljs-string">'StrongPass123!'</span>);
 Â <span class="hljs-keyword">await</span> page.click(<span class="hljs-string">'button[type="submit"]'</span>);
 Â 
 Â <span class="hljs-comment">// éªŒè¯ä¸šåŠ¡é—­ç¯</span>
 Â <span class="hljs-keyword">await</span> expect(page.locator(<span class="hljs-string">'.welcome-msg'</span>)).toBeVisible();
});
</code></pre>
<p>è¿™ç§ <strong>â€œå†™ä»£ç  -&gt; è·‘æµ‹è¯• -&gt; è‡ªåŠ¨çº é”™â€</strong> çš„é—­ç¯ï¼Œæ‰æ˜¯ AI ç¼–è¾‘å™¨çš„ç»ˆæå½¢æ€ã€‚</p>
<hr/>
<h2 data-id="heading-5">å››ã€ ç”Ÿæ€ä¸éšç§ï¼šæ™ºè°±ã€DeepSeek ä¸æœ¬åœ°æ¨¡å‹çš„æ··åˆè·¯ç”±</h2>
<p>åœ¨å›½äº§å¤§æ¨¡å‹å…¨é¢å´›èµ·çš„ä»Šå¤©ï¼ŒIfAI v0.2.7 æä¾›äº†æè‡´çš„çµæ´»åº¦ï¼š</p>
<ul>
<li><strong>äº‘ç«¯å¢å¼º</strong>ï¼šæ·±åº¦ä¼˜åŒ–äº†å¯¹ <strong>DeepSeek-V3/R1</strong> å’Œ <strong>æ™ºè°±æ¸…è¨€</strong> çš„é€‚é…ï¼Œå“åº”å»¶è¿Ÿé™ä½äº† 30%ã€‚</li>
<li><strong>éšç§è‡³ä¸Š</strong>ï¼šæ”¯æŒæ··åˆè·¯ç”±ã€‚ä½ å¯ä»¥é…ç½®ç¼–è¾‘å™¨ï¼Œè®©å®ƒæŠŠæ•æ„Ÿçš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘äº¤ç»™æœ¬åœ°çš„ <strong>Qwen2.5-Coder</strong> å¤„ç†ï¼Œè€Œå°†ç¹ççš„æ–‡æ¡£ç¼–å†™äº¤ç»™äº‘ç«¯å¤§æ¨¡å‹ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-6">ğŸ’¬ ç»“è¯­</h2>
<p>AI ä¸åº”è¯¥å–ä»£ç¨‹åºå‘˜ï¼ŒAI åº”è¯¥æˆä¸ºç¨‹åºå‘˜çš„â€œæœºæ¢°å¤–éª¨éª¼â€ã€‚</p>
<p>ä» v0.2.1 åˆ° v0.2.7ï¼ŒIfAI æ­£åœ¨è¯æ˜ï¼šä¸€ä¸ªæ‡‚ç¯å¢ƒã€æ‡‚æ€§èƒ½ã€ç”šè‡³æ‡‚æµ‹è¯•çš„ç¼–è¾‘å™¨ï¼Œèƒ½è®©ç¼–ç¨‹çš„çˆ½æ„Ÿæå‡å¤šå°‘ã€‚</p>
<p><strong>å¦‚æœä½ ä¹ŸåŒå€¦äº†ä¼ ç»Ÿç¼–è¾‘å™¨çš„è‡ƒè‚¿ï¼Œæ¸´æœ›é‚£ç§ 120FPS çš„æè‡´æ§åˆ¶æ„Ÿï¼Œæ¬¢è¿åœ¨ GitHub æœç´¢ <code>ifai</code> ä½“éªŒã€‚</strong></p>
<hr/>
<h3 data-id="heading-7">ğŸ æ˜é‡‘ç¦åˆ©äº’åŠ¨</h3>
<p><strong>ä½ è®¤ä¸º AI ç¼–ç¨‹å·¥å…·æœ€è®©ä½ â€œè¡€å‹é£™å‡â€çš„æ—¶åˆ»æ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ã€‚æˆ‘ä»¬å°†ä»è¯„è®ºåŒºæŠ½å– 5 ä½æ·±åº¦å¼€å‘è€…ï¼Œèµ é€ <strong>IfAI Pro ä½“éªŒç‰ˆ</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¨‹åºå‘˜æ­¦å­¦ä¿®ç‚¼æ‰‹å†Œï¼ˆä¸€ï¼‰ï¼šå…¥é—¨ç¯‡â€”â€”åˆå­¦ä¹ç»ƒï¼Œä» Hello World åˆ°èƒ½è·‘å°±è¡Œ]]></title>    <link>https://juejin.cn/post/7593165280488783913</link>    <guid>https://juejin.cn/post/7593165280488783913</guid>    <pubDate>2026-01-09T13:38:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593165280488783913" data-draft-id="7593098101432762422" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¨‹åºå‘˜æ­¦å­¦ä¿®ç‚¼æ‰‹å†Œï¼ˆä¸€ï¼‰ï¼šå…¥é—¨ç¯‡â€”â€”åˆå­¦ä¹ç»ƒï¼Œä» Hello World åˆ°èƒ½è·‘å°±è¡Œ"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-09T13:38:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜Agions"/> <meta itemprop="url" content="https://juejin.cn/user/360295545187751"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¨‹åºå‘˜æ­¦å­¦ä¿®ç‚¼æ‰‹å†Œï¼ˆä¸€ï¼‰ï¼šå…¥é—¨ç¯‡â€”â€”åˆå­¦ä¹ç»ƒï¼Œä» Hello World åˆ°èƒ½è·‘å°±è¡Œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/360295545187751/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜Agions
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T13:38:02.000Z" title="Fri Jan 09 2026 13:38:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>"åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹ï¼›ä¸‡è¡Œä»£ç ï¼Œå§‹äº Hello Worldã€‚"
â€”â€” ã€Šç¨‹åºå‘˜æ­¦å­¦å¿ƒæ³•ã€‹</p>
</blockquote>
<h2 data-id="heading-0">å¼€ç¯‡ï¼šç¨‹åºå‘˜çš„æ­¦å­¦å¢ƒç•Œ</h2>
<p>åœ¨æ­¦ä¾ ä¸–ç•Œé‡Œï¼Œä¹ æ­¦ä¹‹äººä»å…¥é—¨å¼Ÿå­åˆ°ä¸€ä»£å®—å¸ˆï¼Œéœ€è¦ç»å†æ¼«é•¿çš„ä¿®ç‚¼ã€‚</p>
<p>åœ¨ç¨‹åºå‘˜çš„ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬ä¹Ÿæœ‰ç±»ä¼¼çš„æˆé•¿è·¯å¾„ã€‚ä»Šå¤©ï¼Œè®©æˆ‘ä»¬ç”¨æ­¦å­¦çš„è§†è§’ï¼Œé‡æ–°å®¡è§†ç¨‹åºå‘˜çš„ä¿®ç‚¼ä¹‹è·¯ã€‚</p>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ç¨‹åºå‘˜æ­¦å­¦å¢ƒç•Œæ€»è§ˆ                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   ç¬¬ä¸€å¢ƒï¼šåˆå­¦ä¹ç»ƒ â€”â€”  èƒ½å†™ä»£ç ï¼Œèƒ½è·‘å°±è¡Œï¼ˆå…¥é—¨å¼Ÿå­ï¼‰          â”‚
â”‚   ç¬¬äºŒå¢ƒï¼šå°æœ‰æ‰€æˆ â€”â€”  ä»£ç è§„èŒƒï¼ŒçŸ¥å…¶æ‰€ä»¥ç„¶ï¼ˆä¸‰æµé«˜æ‰‹ï¼‰        â”‚
â”‚   ç¬¬ä¸‰å¢ƒï¼šèä¼šè´¯é€š â€”â€”  æ¶æ„è®¾è®¡ï¼Œç‹¬å½“ä¸€é¢ï¼ˆä¸€æµé«˜æ‰‹ï¼‰          â”‚
â”‚   ç¬¬å››å¢ƒï¼šç™»å³°é€ æ â€”â€”  æŠ€æœ¯ä¸“å®¶ï¼ŒæŒ‡ç‚¹æ±Ÿå±±ï¼ˆç»é¡¶é«˜æ‰‹ï¼‰          â”‚
â”‚   ç¬¬äº”å¢ƒï¼šå¼€å®—ç«‹æ´¾ â€”â€”  è‡ªæˆä¸€å®¶ï¼Œå½±å“æ±Ÿæ¹–ï¼ˆä¸€ä»£å®—å¸ˆï¼‰          â”‚
â”‚                                                             â”‚
â”‚   ç•ªå¤–ï¼šèµ°ç«å…¥é­” â€”â€” é‚£äº›ä¿®ç‚¼è·¯ä¸Šçš„æ­§é€”                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>æœ¬ç³»åˆ—å°†åˆ†ä¸ºå…­ç¯‡ï¼Œä»Šå¤©æ˜¯ç¬¬ä¸€ç¯‡ï¼š<strong>åˆå­¦ä¹ç»ƒ</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">ç¬¬ä¸€ç« ï¼šåˆå­¦ä¹ç»ƒçš„ç‰¹å¾</h2>
<h3 data-id="heading-2">1.1 ä»€ä¹ˆæ˜¯åˆå­¦ä¹ç»ƒï¼Ÿ</h3>
<p>åˆå­¦ä¹ç»ƒï¼Œæ˜¯æ¯ä¸ªç¨‹åºå‘˜çš„èµ·ç‚¹ã€‚</p>
<p>å°±åƒæ­¦ä¾ å°è¯´é‡Œåˆšå…¥é—¨çš„å¼Ÿå­ï¼Œåˆšæ‹¿åˆ°ä¸€æœ¬å‰‘è°±ï¼Œè¿åŸºæœ¬çš„æ‰é©¬æ­¥éƒ½ä¸ç¨³ï¼Œä½†çœ¼é‡Œå……æ»¡äº†å¯¹æ­¦å­¦çš„å‘å¾€ã€‚</p>
<p><strong>åˆå­¦ä¹ç»ƒç¨‹åºå‘˜çš„å…¸å‹ç‰¹å¾ï¼š</strong></p>
<ul>
<li>åˆšå­¦ä¼šä¸€é—¨è¯­è¨€ï¼Œè§‰å¾—è‡ªå·±æ— æ‰€ä¸èƒ½</li>
<li>ä»£ç èƒ½è·‘å°±æ˜¯èƒœåˆ©</li>
<li>å˜é‡å‘½åï¼š<code>a</code>, <code>b</code>, <code>c</code>, <code>temp</code>, <code>temp2</code>, <code>temp3</code></li>
<li>æ³¨é‡Šï¼Ÿä¸å­˜åœ¨çš„</li>
<li>é‡åˆ° Bug ç¬¬ä¸€ååº”ï¼šé‡å¯è¯•è¯•ï¼Ÿ</li>
</ul>
<h3 data-id="heading-3">1.2 åˆå­¦ä¹ç»ƒçš„å¿ƒç†çŠ¶æ€</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆå­¦ä¹ç»ƒç¨‹åºå‘˜çš„å†…å¿ƒç‹¬ç™½</span>

<span class="hljs-keyword">const</span> beginnerMindset = {
  <span class="hljs-attr">day1</span>: <span class="hljs-string">"Hello Worldè·‘é€šäº†ï¼æˆ‘æ˜¯å¤©æ‰ï¼"</span>,
  <span class="hljs-attr">day7</span>: <span class="hljs-string">"è¿™ä¸ªforå¾ªç¯å¥½éš¾...ç®—äº†ï¼Œå¤åˆ¶ç²˜è´´"</span>,
  <span class="hljs-attr">day30</span>: <span class="hljs-string">"æˆ‘å·²ç»ä¼šå†™å‡½æ•°äº†ï¼Œå¯ä»¥æ‰¾å·¥ä½œäº†å§ï¼Ÿ"</span>,
  <span class="hljs-attr">day60</span>: <span class="hljs-string">"ä¸ºä»€ä¹ˆæˆ‘çš„ä»£ç åˆ«äººçœ‹ä¸æ‡‚ï¼Ÿæ˜æ˜å¾ˆæ¸…æ™°å•Š"</span>,
  <span class="hljs-attr">day90</span>: <span class="hljs-string">"åŸæ¥æˆ‘å†™çš„æ˜¯å±å±±..."</span>,
}
</code></pre>
<hr/>
<h2 data-id="heading-4">ç¬¬äºŒç« ï¼šåˆå­¦ä¹ç»ƒçš„ä¿®ç‚¼å†…å®¹</h2>
<h3 data-id="heading-5">2.1 ç¬¬ä¸€å¼ï¼šHello World</h3>
<p>æ¯ä¸ªç¨‹åºå‘˜çš„ç¬¬ä¸€æ‹›ï¼Œå¿…æ˜¯ Hello Worldã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// JavaScriptç‰ˆ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Hello, World!"</span>)

<span class="hljs-comment">// ç»ƒæ°”æœŸç¨‹åºå‘˜çš„è¿›é˜¶ç‰ˆ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Hello, World!"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Hello, World!!"</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Hello, World!!!"</span>)
<span class="hljs-comment">// ä¸ºä»€ä¹ˆè¦æ‰“ä¸‰éï¼Ÿå› ä¸ºæˆ‘èƒ½ï¼</span>
</code></pre>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Pythonç‰ˆ</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">"Hello, World!"</span>)

<span class="hljs-comment"># ç»ƒæ°”æœŸç¨‹åºå‘˜çš„"ä¼˜åŒ–"ç‰ˆ</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Hello, World!"</span> + <span class="hljs-string">"!"</span> * i)
<span class="hljs-comment"># è¿™æ ·æ›´æœ‰æ°”åŠ¿ï¼</span>
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Javaç‰ˆ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HelloWorld</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        System.out.println(<span class="hljs-string">"Hello, World!"</span>);
    }
}

<span class="hljs-comment">// ç»ƒæ°”æœŸç¨‹åºå‘˜çš„å›°æƒ‘ï¼š</span>
<span class="hljs-comment">// ä¸ºä»€ä¹ˆæ‰“å°ä¸ªHello Worldè¦å†™è¿™ä¹ˆå¤šï¼Ÿ</span>
<span class="hljs-comment">// publicæ˜¯ä»€ä¹ˆï¼Ÿstaticæ˜¯ä»€ä¹ˆï¼Ÿvoidåˆæ˜¯ä»€ä¹ˆï¼Ÿ</span>
<span class="hljs-comment">// ç®—äº†ï¼Œèƒ½è·‘å°±è¡Œ...</span>
</code></pre>
<h3 data-id="heading-6">2.2 ç¬¬äºŒå¼ï¼šå˜é‡ä¸ç±»å‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»ƒæ°”æœŸçš„å˜é‡å‘½åè‰ºæœ¯</span>

<span class="hljs-comment">// é˜¶æ®µ1ï¼šå•å­—æ¯æ—¶æœŸ</span>
<span class="hljs-keyword">let</span> a = <span class="hljs-number">1</span>
<span class="hljs-keyword">let</span> b = <span class="hljs-number">2</span>
<span class="hljs-keyword">let</span> c = a + b

<span class="hljs-comment">// é˜¶æ®µ2ï¼šæ‹¼éŸ³æ—¶æœŸ</span>
<span class="hljs-keyword">let</span> nianling = <span class="hljs-number">18</span>
<span class="hljs-keyword">let</span> mingzi = <span class="hljs-string">"å¼ ä¸‰"</span>
<span class="hljs-keyword">let</span> gongzi = <span class="hljs-number">10000</span>

<span class="hljs-comment">// é˜¶æ®µ3ï¼šä¸­è‹±æ··æ­æ—¶æœŸ</span>
<span class="hljs-keyword">let</span> userNianling = <span class="hljs-number">18</span>
<span class="hljs-keyword">let</span> userName = <span class="hljs-string">"å¼ ä¸‰"</span>
<span class="hljs-keyword">let</span> userGongzi = <span class="hljs-number">10000</span>

<span class="hljs-comment">// é˜¶æ®µ4ï¼šå¼€å§‹è§‰é†’</span>
<span class="hljs-keyword">let</span> userAge = <span class="hljs-number">18</span>
<span class="hljs-keyword">let</span> userName = <span class="hljs-string">"å¼ ä¸‰"</span>
<span class="hljs-keyword">let</span> userSalary = <span class="hljs-number">10000</span>
<span class="hljs-comment">// è™½ç„¶è¿˜æ˜¯æœ‰ç‚¹é—®é¢˜ï¼Œä½†å·²ç»åœ¨è¿›æ­¥äº†</span>
</code></pre>
<h3 data-id="heading-7">2.3 ç¬¬ä¸‰å¼ï¼šæ¡ä»¶åˆ¤æ–­</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»ƒæ°”æœŸçš„if-elseè‰ºæœ¯</span>

<span class="hljs-comment">// åˆçº§å†™æ³•ï¼šä¸€è·¯ifåˆ°åº•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getGrade</span>(<span class="hljs-params">score</span>) {
  <span class="hljs-keyword">if</span> (score &gt;= <span class="hljs-number">90</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"A"</span>
  }
  <span class="hljs-keyword">if</span> (score &gt;= <span class="hljs-number">80</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"B"</span>
  }
  <span class="hljs-keyword">if</span> (score &gt;= <span class="hljs-number">70</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"C"</span>
  }
  <span class="hljs-keyword">if</span> (score &gt;= <span class="hljs-number">60</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"D"</span>
  }
  <span class="hljs-keyword">return</span> <span class="hljs-string">"F"</span>
}

<span class="hljs-comment">// ç»ƒæ°”æœŸ"ä¼˜åŒ–"ç‰ˆï¼šåµŒå¥—åœ°ç‹±</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getGradeNested</span>(<span class="hljs-params">score</span>) {
  <span class="hljs-keyword">if</span> (score &gt;= <span class="hljs-number">60</span>) {
    <span class="hljs-keyword">if</span> (score &gt;= <span class="hljs-number">70</span>) {
      <span class="hljs-keyword">if</span> (score &gt;= <span class="hljs-number">80</span>) {
        <span class="hljs-keyword">if</span> (score &gt;= <span class="hljs-number">90</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-string">"A"</span>
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">return</span> <span class="hljs-string">"B"</span>
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"C"</span>
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-string">"D"</span>
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"F"</span>
  }
}
<span class="hljs-comment">// èƒ½è·‘ï¼å®Œç¾ï¼ï¼ˆå¹¶ä¸ï¼‰</span>

<span class="hljs-comment">// ç»ƒæ°”æœŸçš„ç»ˆæå½¢æ€ï¼šå¤åˆ¶ç²˜è´´å¤§æ³•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processUser</span>(<span class="hljs-params">user</span>) {
  <span class="hljs-keyword">if</span> (user.<span class="hljs-property">type</span> === <span class="hljs-string">"admin"</span>) {
    <span class="hljs-keyword">if</span> (user.<span class="hljs-property">status</span> === <span class="hljs-string">"active"</span>) {
      <span class="hljs-keyword">if</span> (user.<span class="hljs-property">level</span> &gt;= <span class="hljs-number">5</span>) {
        <span class="hljs-comment">// 100è¡Œä»£ç </span>
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å¤åˆ¶ä¸Šé¢100è¡Œï¼Œæ”¹å‡ ä¸ªå­—</span>
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// å†å¤åˆ¶100è¡Œ</span>
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// ç»§ç»­å¤åˆ¶...</span>
  }
}
</code></pre>
<h3 data-id="heading-8">2.4 ç¬¬å››å¼ï¼šå¾ªç¯</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»ƒæ°”æœŸçš„å¾ªç¯ä¿®ç‚¼</span>

<span class="hljs-comment">// ç¬¬ä¸€å±‚ï¼šforå¾ªç¯</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i)
}
<span class="hljs-comment">// æŒæ¡äº†ï¼æˆ‘æ˜¯å¤©æ‰ï¼</span>

<span class="hljs-comment">// ç¬¬äºŒå±‚ï¼šwhileå¾ªç¯</span>
<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>
<span class="hljs-keyword">while</span> (i &lt; <span class="hljs-number">10</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i)
  <span class="hljs-comment">// å¿˜è®° i++ äº†...</span>
  <span class="hljs-comment">// ç¨‹åºå¡æ­»</span>
  <span class="hljs-comment">// ä¸ºä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿ</span>
}

<span class="hljs-comment">// ç¬¬ä¸‰å±‚ï¼šåµŒå¥—å¾ªç¯</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">10</span>; j++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> k = <span class="hljs-number">0</span>; k &lt; <span class="hljs-number">10</span>; k++) {
      <span class="hljs-comment">// ä¸‰å±‚å¾ªç¯ï¼Œæ€§èƒ½æ€æ‰‹</span>
      <span class="hljs-comment">// ä½†æ˜¯èƒ½è·‘ï¼</span>
    }
  }
}

<span class="hljs-comment">// ç»ƒæ°”æœŸç»å…¸Bugï¼šæ­»å¾ªç¯</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">infiniteLoop</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arr.<span class="hljs-property">length</span>; i++) {
    arr.<span class="hljs-title function_">push</span>(i) <span class="hljs-comment">// æ•°ç»„è¶Šæ¥è¶Šé•¿...</span>
    <span class="hljs-comment">// ç”µè„‘é£æ‰‡å¼€å§‹ç‹‚è½¬</span>
    <span class="hljs-comment">// æµè§ˆå™¨å¡æ­»</span>
    <span class="hljs-comment">// å¼ºåˆ¶å…³æœº</span>
  }
}
</code></pre>
<h3 data-id="heading-9">2.5 ç¬¬äº”å¼ï¼šå‡½æ•°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»ƒæ°”æœŸçš„å‡½æ•°ä¿®ç‚¼</span>

<span class="hljs-comment">// é˜¶æ®µ1ï¼šä¸çŸ¥é“ä»€ä¹ˆæ˜¯å‡½æ•°</span>
<span class="hljs-comment">// æ‰€æœ‰ä»£ç å†™åœ¨ä¸€èµ·ï¼Œ500è¡Œä¸€ä¸ªæ–‡ä»¶</span>

<span class="hljs-comment">// é˜¶æ®µ2ï¼šçŸ¥é“å‡½æ•°ï¼Œä½†ä¸ä¼šç”¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">doSomething</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// 200è¡Œä»£ç </span>
  <span class="hljs-comment">// åšäº†10ä»¶ä¸åŒçš„äº‹</span>
  <span class="hljs-comment">// å‡½æ•°åå«doSomethingï¼Œå› ä¸ºç¡®å®åœ¨åšsomething</span>
}

<span class="hljs-comment">// é˜¶æ®µ3ï¼šå‡½æ•°å¤ªå¤šï¼Œä¸çŸ¥é“æ€ä¹ˆç»„ç»‡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">step1</span>(<span class="hljs-params"/>) {}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">step2</span>(<span class="hljs-params"/>) {}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">step3</span>(<span class="hljs-params"/>) {}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">step4</span>(<span class="hljs-params"/>) {}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">step5</span>(<span class="hljs-params"/>) {}
<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">step99</span>(<span class="hljs-params"/>) {}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">step1</span>()
  <span class="hljs-title function_">step2</span>()
  <span class="hljs-title function_">step3</span>()
  <span class="hljs-comment">// ...</span>
  <span class="hljs-title function_">step99</span>()
}

<span class="hljs-comment">// é˜¶æ®µ4ï¼šå¼€å§‹ç†è§£å‡½æ•°çš„æ„ä¹‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateTax</span>(<span class="hljs-params">income</span>) {
  <span class="hljs-comment">// åªåšä¸€ä»¶äº‹ï¼šè®¡ç®—ç¨</span>
  <span class="hljs-keyword">return</span> income * <span class="hljs-number">0.2</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">formatCurrency</span>(<span class="hljs-params">amount</span>) {
  <span class="hljs-comment">// åªåšä¸€ä»¶äº‹ï¼šæ ¼å¼åŒ–é‡‘é¢</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">`Â¥<span class="hljs-subst">${amount.toFixed(<span class="hljs-number">2</span>)}</span>`</span>
}
</code></pre>
<h3 data-id="heading-10">2.6 ç¬¬å…­å¼ï¼šæ•°ç»„ä¸å¯¹è±¡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»ƒæ°”æœŸçš„æ•°æ®ç»“æ„</span>

<span class="hljs-comment">// æ•°ç»„çš„ä½¿ç”¨</span>
<span class="hljs-keyword">let</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]

<span class="hljs-comment">// ç»ƒæ°”æœŸçš„æ•°ç»„æ“ä½œ</span>
<span class="hljs-comment">// æƒ³åˆ é™¤ç¬¬3ä¸ªå…ƒç´ </span>
arr[<span class="hljs-number">2</span>] = <span class="hljs-literal">undefined</span> <span class="hljs-comment">// è¿™æ ·å¯¹å—ï¼Ÿ</span>
<span class="hljs-comment">// ç»“æœï¼š[1, 2, undefined, 4, 5]</span>
<span class="hljs-comment">// å¥½åƒä¸å¤ªå¯¹...</span>

<span class="hljs-comment">// æ­£ç¡®åšæ³•ï¼ˆä½†ç»ƒæ°”æœŸä¸çŸ¥é“ï¼‰</span>
arr.<span class="hljs-title function_">splice</span>(<span class="hljs-number">2</span>, <span class="hljs-number">1</span>)

<span class="hljs-comment">// å¯¹è±¡çš„ä½¿ç”¨</span>
<span class="hljs-keyword">let</span> user = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,
}

<span class="hljs-comment">// ç»ƒæ°”æœŸçš„å¯¹è±¡æ“ä½œ</span>
user.<span class="hljs-property">mingzi</span> = <span class="hljs-string">"æå››"</span> <span class="hljs-comment">// ä¸ºä»€ä¹ˆä¸ç”Ÿæ•ˆï¼Ÿ</span>
<span class="hljs-comment">// å› ä¸ºå±æ€§åæ˜¯nameä¸æ˜¯mingzi...</span>

<span class="hljs-comment">// ç»ƒæ°”æœŸç»å…¸å›°æƒ‘ï¼šå¼•ç”¨ç±»å‹</span>
<span class="hljs-keyword">let</span> arr1 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]
<span class="hljs-keyword">let</span> arr2 = arr1
arr2.<span class="hljs-title function_">push</span>(<span class="hljs-number">4</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr1) <span class="hljs-comment">// [1, 2, 3, 4] ???</span>
<span class="hljs-comment">// ä¸ºä»€ä¹ˆarr1ä¹Ÿå˜äº†ï¼Ÿï¼Ÿï¼Ÿ</span>
<span class="hljs-comment">// è¿™ä¸ªBugæ‰¾äº†ä¸‰å¤©...</span>
</code></pre>
<hr/>
<h2 data-id="heading-11">ç¬¬ä¸‰ç« ï¼šåˆå­¦ä¹ç»ƒçš„å¸¸è§èµ°ç«å…¥é­”</h2>
<h3 data-id="heading-12">3.1 å¤åˆ¶ç²˜è´´èµ°ç«å…¥é­”</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç—‡çŠ¶ï¼šåŒæ ·çš„ä»£ç å‡ºç°Næ¬¡</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">processUserA</span>(<span class="hljs-params">user</span>) {
  <span class="hljs-comment">// éªŒè¯ç”¨æˆ·</span>
  <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">name</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"name required"</span>)
  <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">email</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"email required"</span>)
  <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">phone</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"phone required"</span>)

  <span class="hljs-comment">// å¤„ç†æ•°æ®</span>
  user.<span class="hljs-property">name</span> = user.<span class="hljs-property">name</span>.<span class="hljs-title function_">trim</span>()
  user.<span class="hljs-property">email</span> = user.<span class="hljs-property">email</span>.<span class="hljs-title function_">toLowerCase</span>()

  <span class="hljs-comment">// ä¿å­˜</span>
  database.<span class="hljs-title function_">save</span>(user)

  <span class="hljs-comment">// å‘é€é€šçŸ¥</span>
  <span class="hljs-title function_">sendEmail</span>(user.<span class="hljs-property">email</span>, <span class="hljs-string">"Welcome!"</span>)
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">processUserB</span>(<span class="hljs-params">user</span>) {
  <span class="hljs-comment">// å¤åˆ¶ä¸Šé¢çš„ä»£ç </span>
  <span class="hljs-comment">// æ”¹äº†ä¸€ä¸ªå­—</span>
  <span class="hljs-comment">// éªŒè¯ç”¨æˆ·</span>
  <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">name</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"name required"</span>)
  <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">email</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"email required"</span>)
  <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">phone</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"phone required"</span>)

  <span class="hljs-comment">// å¤„ç†æ•°æ®</span>
  user.<span class="hljs-property">name</span> = user.<span class="hljs-property">name</span>.<span class="hljs-title function_">trim</span>()
  user.<span class="hljs-property">email</span> = user.<span class="hljs-property">email</span>.<span class="hljs-title function_">toLowerCase</span>()

  <span class="hljs-comment">// ä¿å­˜</span>
  database.<span class="hljs-title function_">save</span>(user)

  <span class="hljs-comment">// å‘é€é€šçŸ¥</span>
  <span class="hljs-title function_">sendEmail</span>(user.<span class="hljs-property">email</span>, <span class="hljs-string">"Welcome Back!"</span>) <span class="hljs-comment">// å°±æ”¹äº†è¿™é‡Œ</span>
}

<span class="hljs-comment">// åæœï¼šæ”¹ä¸€ä¸ªåœ°æ–¹è¦æ”¹Nä¸ªåœ°æ–¹ï¼Œæ€»æœ‰æ¼çš„</span>
</code></pre>
<h3 data-id="heading-13">3.2 è¿‡åº¦æ³¨é‡Šèµ°ç«å…¥é­”</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç—‡çŠ¶ï¼šæ³¨é‡Šæ¯”ä»£ç è¿˜å¤š</span>

<span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªå˜é‡iï¼Œåˆå§‹å€¼ä¸º0</span>
<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>

<span class="hljs-comment">// ä½¿ç”¨whileå¾ªç¯</span>
<span class="hljs-keyword">while</span> (i &lt; <span class="hljs-number">10</span>) {
  <span class="hljs-comment">// å½“iå°äº10æ—¶</span>
  <span class="hljs-comment">// æ‰“å°içš„å€¼</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i) <span class="hljs-comment">// è¾“å‡ºå½“å‰çš„i</span>
  <span class="hljs-comment">// iè‡ªå¢1</span>
  i++ <span class="hljs-comment">// i = i + 1</span>
} <span class="hljs-comment">// whileå¾ªç¯ç»“æŸ</span>

<span class="hljs-comment">// è¿™ç§æ³¨é‡Šä¸å¦‚ä¸å†™...</span>
</code></pre>
<h3 data-id="heading-14">3.3 å˜é‡å‘½åèµ°ç«å…¥é­”</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç—‡çŠ¶ï¼šå˜é‡åè®©äººæ€€ç–‘äººç”Ÿ</span>

<span class="hljs-comment">// æ‹¼éŸ³æ´¾</span>
<span class="hljs-keyword">let</span> nianling = <span class="hljs-number">18</span>
<span class="hljs-keyword">let</span> xingming = <span class="hljs-string">"å¼ ä¸‰"</span>
<span class="hljs-keyword">let</span> shouji = <span class="hljs-string">"13800138000"</span>

<span class="hljs-comment">// ç¼©å†™æ´¾</span>
<span class="hljs-keyword">let</span> usrNm = <span class="hljs-string">"å¼ ä¸‰"</span>
<span class="hljs-keyword">let</span> usrAg = <span class="hljs-number">18</span>
<span class="hljs-keyword">let</span> usrPh = <span class="hljs-string">"13800138000"</span>

<span class="hljs-comment">// æ•°å­—æ´¾</span>
<span class="hljs-keyword">let</span> user1 = {}
<span class="hljs-keyword">let</span> user2 = {}
<span class="hljs-keyword">let</span> user11 = {} <span class="hljs-comment">// ä¸æ˜¯user1çš„å‡çº§ç‰ˆ</span>
<span class="hljs-keyword">let</span> user111 = {} <span class="hljs-comment">// ä¹Ÿä¸æ˜¯user11çš„å‡çº§ç‰ˆ</span>

<span class="hljs-comment">// æ··æ­æ´¾</span>
<span class="hljs-keyword">let</span> <span class="hljs-title function_">getUserXinxi</span> = (<span class="hljs-params"/>) =&gt; {} <span class="hljs-comment">// ä¸­è‹±æ··æ­</span>
<span class="hljs-keyword">let</span> <span class="hljs-variable constant_">YONGHU_INFO</span> = {} <span class="hljs-comment">// æ‹¼éŸ³+è‹±æ–‡</span>

<span class="hljs-comment">// ç»ˆæå½¢æ€</span>
<span class="hljs-keyword">let</span> aaaa = <span class="hljs-number">1</span>
<span class="hljs-keyword">let</span> bbbb = <span class="hljs-number">2</span>
<span class="hljs-keyword">let</span> cccc = aaaa + bbbb
<span class="hljs-keyword">let</span> dddd = cccc * <span class="hljs-number">2</span>
<span class="hljs-comment">// ä¸€å‘¨åè‡ªå·±éƒ½çœ‹ä¸æ‡‚</span>
</code></pre>
<h3 data-id="heading-15">3.4 ç¼©è¿›èµ°ç«å…¥é­”</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç—‡çŠ¶ï¼šç¼©è¿›æ··ä¹±ï¼ŒTabå’Œç©ºæ ¼æ··ç”¨</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">chaos</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"2ç©ºæ ¼"</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"4ç©ºæ ¼ï¼Ÿä¸ï¼Œæ˜¯Tab"</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¿™æ˜¯å‡ ä¸ªç©ºæ ¼ï¼Ÿ"</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¿™æ˜¯Tab"</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Tab+ç©ºæ ¼æ··æ­"</span>)
  }
}

<span class="hljs-comment">// åæœï¼šä»£ç åœ¨ä¸åŒç¼–è¾‘å™¨é‡Œæ˜¾ç¤ºä¸ä¸€æ ·</span>
<span class="hljs-comment">// åŒäº‹æ‰“å¼€ä½ çš„ä»£ç ï¼šè¿™æ˜¯ä»€ä¹ˆé¬¼ï¼Ÿ</span>
</code></pre>
<hr/>
<h2 data-id="heading-16">ç¬¬å››ç« ï¼šåˆå­¦ä¹ç»ƒçš„çªç ´å¥‘æœº</h2>
<h3 data-id="heading-17">4.1 ç¬¬ä¸€æ¬¡ä»£ç å®¡æŸ¥</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½ æäº¤çš„ä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calc</span>(<span class="hljs-params">a, b, c</span>) {
  <span class="hljs-keyword">let</span> temp = a + b
  <span class="hljs-keyword">let</span> temp2 = temp * c
  <span class="hljs-keyword">return</span> temp2
}

<span class="hljs-comment">// ä»£ç å®¡æŸ¥åé¦ˆ</span>
<span class="hljs-comment">/*
 * 1. å‡½æ•°åcalcå¤ªæ¨¡ç³Šï¼Œè®¡ç®—ä»€ä¹ˆï¼Ÿ
 * 2. å‚æ•°a, b, cæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ
 * 3. temp, temp2å‘½åä¸æ¸…æ™°
 * 4. å¯ä»¥ç›´æ¥returnï¼Œä¸éœ€è¦ä¸­é—´å˜é‡
 *
 * å»ºè®®ä¿®æ”¹ä¸ºï¼š
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculateTotalPrice</span>(<span class="hljs-params">unitPrice, quantity, taxRate</span>) {
  <span class="hljs-keyword">return</span> unitPrice * quantity * taxRate
}

<span class="hljs-comment">// ä½ çš„å†…å¿ƒï¼šåŸæ¥ä»£ç è¿˜å¯ä»¥è¿™æ ·å†™...</span>
</code></pre>
<h3 data-id="heading-18">4.2 ç¬¬ä¸€æ¬¡ç»´æŠ¤åˆ«äººçš„ä»£ç </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½ æ¥æ‰‹çš„ä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">x</span>) {
  <span class="hljs-keyword">let</span> a = x[<span class="hljs-number">0</span>]
  <span class="hljs-keyword">let</span> b = x[<span class="hljs-number">1</span>]
  <span class="hljs-keyword">let</span> c = x[<span class="hljs-number">2</span>]
  <span class="hljs-keyword">if</span> (a &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">if</span> (b &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">if</span> (c &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">return</span> a * b * c
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> a * b
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> a
    }
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
  }
}

<span class="hljs-comment">// ä½ çš„ä»»åŠ¡ï¼šä¿®æ”¹è¿™ä¸ªå‡½æ•°ï¼Œæ”¯æŒç¬¬å››ä¸ªå‚æ•°</span>

<span class="hljs-comment">// ä½ çš„å†…å¿ƒï¼š</span>
<span class="hljs-comment">// è¿™æ˜¯ä»€ä¹ˆï¼Ÿ</span>
<span class="hljs-comment">// xæ˜¯ä»€ä¹ˆï¼Ÿ</span>
<span class="hljs-comment">// a, b, cæ˜¯ä»€ä¹ˆï¼Ÿ</span>
<span class="hljs-comment">// ä¸ºä»€ä¹ˆè¦è¿™æ ·åµŒå¥—ï¼Ÿ</span>
<span class="hljs-comment">// æˆ‘æ”¹å“ªé‡Œï¼Ÿ</span>
<span class="hljs-comment">// ç®—äº†ï¼Œæˆ‘é‡å†™ä¸€ä¸ª...</span>

<span class="hljs-comment">// é¡¿æ‚Ÿï¼šåŸæ¥å†™æ¸…æ™°çš„ä»£ç è¿™ä¹ˆé‡è¦</span>
</code></pre>
<h3 data-id="heading-19">4.3 ç¬¬ä¸€æ¬¡ç”Ÿäº§äº‹æ•…</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½ å†™çš„ä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteUser</span>(<span class="hljs-params">userId</span>) {
  database.<span class="hljs-title function_">delete</span>(<span class="hljs-string">"users"</span>, { <span class="hljs-attr">id</span>: userId })
}

<span class="hljs-comment">// è°ƒç”¨æ—¶</span>
<span class="hljs-title function_">deleteUser</span>() <span class="hljs-comment">// å¿˜è®°ä¼ å‚æ•°äº†</span>

<span class="hljs-comment">// ç»“æœ</span>
database.<span class="hljs-title function_">delete</span>(<span class="hljs-string">"users"</span>, { <span class="hljs-attr">id</span>: <span class="hljs-literal">undefined</span> })
<span class="hljs-comment">// æŸäº›æ•°æ®åº“ä¼šæŠŠè¿™ç†è§£ä¸ºï¼šåˆ é™¤æ‰€æœ‰ç”¨æˆ·</span>
<span class="hljs-comment">// ç”¨æˆ·è¡¨æ¸…ç©ºäº†...</span>

<span class="hljs-comment">// äº‹åå¤ç›˜</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteUserSafe</span>(<span class="hljs-params">userId</span>) {
  <span class="hljs-comment">// å‚æ•°æ ¡éªŒï¼</span>
  <span class="hljs-keyword">if</span> (!userId) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"userId is required"</span>)
  }

  <span class="hljs-comment">// äºŒæ¬¡ç¡®è®¤</span>
  <span class="hljs-keyword">const</span> user = database.<span class="hljs-title function_">findOne</span>(<span class="hljs-string">"users"</span>, { <span class="hljs-attr">id</span>: userId })
  <span class="hljs-keyword">if</span> (!user) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"user not found"</span>)
  }

  <span class="hljs-comment">// è½¯åˆ é™¤è€Œä¸æ˜¯ç¡¬åˆ é™¤</span>
  database.<span class="hljs-title function_">update</span>(<span class="hljs-string">"users"</span>, { <span class="hljs-attr">id</span>: userId }, { <span class="hljs-attr">deleted</span>: <span class="hljs-literal">true</span> })

  <span class="hljs-comment">// è®°å½•æ—¥å¿—</span>
  logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">`User <span class="hljs-subst">${userId}</span> deleted`</span>)
}

<span class="hljs-comment">// é¡¿æ‚Ÿï¼šé˜²å¾¡æ€§ç¼–ç¨‹çœŸçš„å¾ˆé‡è¦</span>
</code></pre>
<hr/>
<h2 data-id="heading-20">ç¬¬äº”ç« ï¼šåˆå­¦ä¹ç»ƒçš„ä¿®ç‚¼å¿ƒæ³•</h2>
<h3 data-id="heading-21">5.1 å¿ƒæ³•ä¸€ï¼šä»£ç æ˜¯å†™ç»™äººçœ‹çš„</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»ƒæ°”æœŸçš„è®¤çŸ¥</span>
<span class="hljs-comment">// "ä»£ç æ˜¯å†™ç»™ç”µè„‘æ‰§è¡Œçš„"</span>

<span class="hljs-comment">// çªç ´åçš„è®¤çŸ¥</span>
<span class="hljs-comment">// "ä»£ç é¦–å…ˆæ˜¯å†™ç»™äººçœ‹çš„ï¼Œå…¶æ¬¡æ‰æ˜¯ç»™ç”µè„‘æ‰§è¡Œçš„"</span>

<span class="hljs-comment">// å®è·µ</span>
<span class="hljs-comment">// ä¸å¥½çš„ä»£ç </span>
<span class="hljs-keyword">let</span> d = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()
<span class="hljs-keyword">let</span> h = d.<span class="hljs-title function_">getHours</span>()
<span class="hljs-keyword">let</span> m = d.<span class="hljs-title function_">getMinutes</span>()
<span class="hljs-keyword">let</span> s = d.<span class="hljs-title function_">getSeconds</span>()
<span class="hljs-keyword">let</span> t = h + <span class="hljs-string">":"</span> + m + <span class="hljs-string">":"</span> + s

<span class="hljs-comment">// å¥½çš„ä»£ç </span>
<span class="hljs-keyword">const</span> currentDate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()
<span class="hljs-keyword">const</span> hours = currentDate.<span class="hljs-title function_">getHours</span>()
<span class="hljs-keyword">const</span> minutes = currentDate.<span class="hljs-title function_">getMinutes</span>()
<span class="hljs-keyword">const</span> seconds = currentDate.<span class="hljs-title function_">getSeconds</span>()
<span class="hljs-keyword">const</span> timeString = <span class="hljs-string">`<span class="hljs-subst">${hours}</span>:<span class="hljs-subst">${minutes}</span>:<span class="hljs-subst">${seconds}</span>`</span>
</code></pre>
<h3 data-id="heading-22">5.2 å¿ƒæ³•äºŒï¼šä¸è¦é‡å¤è‡ªå·±ï¼ˆDRYï¼‰</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»ƒæ°”æœŸçš„ä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateEmail</span>(<span class="hljs-params">email</span>) {
  <span class="hljs-keyword">if</span> (!email) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">if</span> (!email.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"@"</span>)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateUserEmail</span>(<span class="hljs-params">user</span>) {
  <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">email</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">if</span> (!user.<span class="hljs-property">email</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"@"</span>)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateAdminEmail</span>(<span class="hljs-params">admin</span>) {
  <span class="hljs-keyword">if</span> (!admin.<span class="hljs-property">email</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">if</span> (!admin.<span class="hljs-property">email</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"@"</span>)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}

<span class="hljs-comment">// çªç ´åçš„ä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateEmail</span>(<span class="hljs-params">email</span>) {
  <span class="hljs-keyword">if</span> (!email) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">if</span> (!email.<span class="hljs-title function_">includes</span>(<span class="hljs-string">"@"</span>)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateUserEmail</span>(<span class="hljs-params">user</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">validateEmail</span>(user?.<span class="hljs-property">email</span>)
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">validateAdminEmail</span>(<span class="hljs-params">admin</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">validateEmail</span>(admin?.<span class="hljs-property">email</span>)
}
</code></pre>
<h3 data-id="heading-23">5.3 å¿ƒæ³•ä¸‰ï¼šå…ˆè®©å®ƒå·¥ä½œï¼Œå†è®©å®ƒæ­£ç¡®ï¼Œæœ€åè®©å®ƒå¿«</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»ƒæ°”æœŸçš„è¯¯åŒºï¼šä¸€å¼€å§‹å°±è¿½æ±‚å®Œç¾</span>

<span class="hljs-comment">// æ­£ç¡®çš„ä¿®ç‚¼é¡ºåºï¼š</span>

<span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šè®©å®ƒå·¥ä½œï¼ˆMake it workï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sort</span>(<span class="hljs-params">arr</span>) {
  <span class="hljs-comment">// å†’æ³¡æ’åºï¼ŒO(nÂ²)ï¼Œä½†èƒ½ç”¨</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arr.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">0</span>; j &lt; arr.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>; j++) {
      <span class="hljs-keyword">if</span> (arr[j] &gt; arr[j + <span class="hljs-number">1</span>]) {
        <span class="hljs-keyword">let</span> temp = arr[j]
        arr[j] = arr[j + <span class="hljs-number">1</span>]
        arr[j + <span class="hljs-number">1</span>] = temp
      }
    }
  }
  <span class="hljs-keyword">return</span> arr
}

<span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šè®©å®ƒæ­£ç¡®ï¼ˆMake it rightï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sort</span>(<span class="hljs-params">arr</span>) {
  <span class="hljs-comment">// æ·»åŠ å‚æ•°æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(arr)) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Input must be an array"</span>)
  }
  <span class="hljs-comment">// ä¸ä¿®æ”¹åŸæ•°ç»„</span>
  <span class="hljs-keyword">const</span> result = [...arr]
  <span class="hljs-comment">// æ’åºé€»è¾‘...</span>
  <span class="hljs-keyword">return</span> result
}

<span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šè®©å®ƒå¿«ï¼ˆMake it fastï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sort</span>(<span class="hljs-params">arr</span>) {
  <span class="hljs-comment">// ä½¿ç”¨æ›´é«˜æ•ˆçš„ç®—æ³•</span>
  <span class="hljs-comment">// æˆ–è€…ç›´æ¥ç”¨å†…ç½®æ–¹æ³•</span>
  <span class="hljs-keyword">return</span> [...arr].<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b)
}
</code></pre>
<hr/>
<h2 data-id="heading-24">ç¬¬å…­ç« ï¼šåˆå­¦ä¹ç»ƒçš„å‡ºå¸ˆè€ƒæ ¸</h2>
<h3 data-id="heading-25">6.1 è‡ªæµ‹é¢˜</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é—®é¢˜1ï¼šè¿™æ®µä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) {
  <span class="hljs-keyword">return</span> a + b
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">add</span>(<span class="hljs-string">"1"</span>, <span class="hljs-string">"2"</span>)) <span class="hljs-comment">// è¾“å‡ºä»€ä¹ˆï¼Ÿ</span>

<span class="hljs-comment">// é—®é¢˜2ï¼šè¿™æ®µä»£ç ä¼šè¾“å‡ºä»€ä¹ˆï¼Ÿ</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i), <span class="hljs-number">100</span>)
}

<span class="hljs-comment">// é—®é¢˜3ï¼šæ‰¾å‡ºBug</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">findMax</span>(<span class="hljs-params">arr</span>) {
  <span class="hljs-keyword">let</span> max = <span class="hljs-number">0</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; arr.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">if</span> (arr[i] &gt; max) {
      max = arr[i]
    }
  }
  <span class="hljs-keyword">return</span> max
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">findMax</span>([-<span class="hljs-number">1</span>, -<span class="hljs-number">2</span>, -<span class="hljs-number">3</span>])) <span class="hljs-comment">// æœŸæœ›-1ï¼Œå®é™…è¾“å‡ºï¼Ÿ</span>

<span class="hljs-comment">// é—®é¢˜4ï¼šè¿™æ®µä»£ç çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ</span>
<span class="hljs-keyword">let</span> user = { <span class="hljs-attr">name</span>: <span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">18</span> }
<span class="hljs-keyword">let</span> copy = user
copy.<span class="hljs-property">name</span> = <span class="hljs-string">"æå››"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-property">name</span>) <span class="hljs-comment">// è¾“å‡ºä»€ä¹ˆï¼Ÿ</span>
</code></pre>
<h3 data-id="heading-26">6.2 å‡ºå¸ˆæ ‡å‡†</h3>
<p>å½“ä½ èƒ½åšåˆ°ä»¥ä¸‹å‡ ç‚¹ï¼Œå°±å¯ä»¥å‡†å¤‡çªç ´åˆ°å°æœ‰æ‰€æˆäº†ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              åˆå­¦ä¹ç»ƒå‡ºå¸ˆæ ‡å‡† âœ“                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   â–¡ èƒ½ç‹¬ç«‹å®Œæˆç®€å•åŠŸèƒ½çš„å¼€å‘                                 â”‚
â”‚   â–¡ çŸ¥é“å˜é‡ã€å‡½æ•°ã€å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­çš„åŸºæœ¬ç”¨æ³•                  â”‚
â”‚   â–¡ èƒ½çœ‹æ‡‚ç®€å•çš„æŠ¥é”™ä¿¡æ¯                                     â”‚
â”‚   â–¡ çŸ¥é“Google/Stack Overflowæ€ä¹ˆç”¨                         â”‚
â”‚   â–¡ å¼€å§‹æ„è¯†åˆ°ä»£ç è§„èŒƒçš„é‡è¦æ€§                               â”‚
â”‚   â–¡ èƒ½å†™å‡ºåˆ«äººå‹‰å¼ºèƒ½çœ‹æ‡‚çš„ä»£ç                                â”‚
â”‚   â–¡ ç»å†è¿‡è‡³å°‘ä¸€æ¬¡<span class="hljs-string">"æˆ‘å†™çš„ä»£ç æ€ä¹ˆä¸èƒ½ç”¨äº†"</span>çš„å´©æºƒ             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-27">ç»“è¯­ï¼šåˆå­¦ä¹ç»ƒçš„æ„ä¹‰</h2>
<p>åˆå­¦ä¹ç»ƒæ˜¯æ¯ä¸ªç¨‹åºå‘˜å¿…ç»çš„é˜¶æ®µã€‚</p>
<p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œä½ ä¼šï¼š</p>
<ul>
<li>å†™å‡ºå¾ˆå¤š"èƒ½è·‘å°±è¡Œ"çš„ä»£ç </li>
<li>çŠ¯å¾ˆå¤šç°åœ¨çœ‹æ¥å¾ˆè ¢çš„é”™è¯¯</li>
<li>ç»å†å¾ˆå¤š"ä¸ºä»€ä¹ˆä¸è¡Œ"çš„å´©æºƒæ—¶åˆ»</li>
</ul>
<p>ä½†è¿™äº›éƒ½æ˜¯æˆé•¿çš„å¿…ç»ä¹‹è·¯ã€‚</p>
<p><strong>æ²¡æœ‰äººä¸€å¼€å§‹å°±æ˜¯é«˜æ‰‹ã€‚</strong></p>
<p>é‚£äº›ç°åœ¨å†™å‡ºä¼˜é›…ä»£ç çš„å¤§ä¾ ï¼Œå½“å¹´ä¹Ÿå†™è¿‡<code>var a = 1; var b = 2; var c = a + b;</code>ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸è¦å› ä¸ºè‡ªå·±æ˜¯æ–°æ‰‹è€Œæ°”é¦ã€‚</p>
<p><strong>æ¯ä¸€ä¸ª Bug éƒ½æ˜¯ä¸€æ¬¡ä¿®ç‚¼ï¼Œæ¯ä¸€æ¬¡å´©æºƒéƒ½æ˜¯ä¸€æ¬¡çªç ´çš„å¥‘æœºã€‚</strong></p>
<p>ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬å°†è¿›å…¥<strong>å°æœ‰æ‰€æˆ</strong>â€”â€”å½“ä½ å¼€å§‹å…³æ³¨ä»£ç è§„èŒƒã€å¼€å§‹æ€è€ƒ"ä¸ºä»€ä¹ˆè¦è¿™æ ·å†™"çš„æ—¶å€™ï¼Œä½ å°±è¸å…¥äº†ä¸‰æµé«˜æ‰‹çš„å¤§é—¨ã€‚</p>
<hr/>
<h2 data-id="heading-28">é¢„å‘Šï¼šå°æœ‰æ‰€æˆ</h2>
<p>åœ¨å°æœ‰æ‰€æˆé˜¶æ®µï¼Œä½ å°†å­¦ä¹ ï¼š</p>
<ul>
<li>ä»£ç è§„èŒƒä¸æœ€ä½³å®è·µ</li>
<li>è®¾è®¡æ¨¡å¼å…¥é—¨</li>
<li>å•å…ƒæµ‹è¯•çš„é‡è¦æ€§</li>
<li>ç‰ˆæœ¬æ§åˆ¶çš„æ­£ç¡®ä½¿ç”¨</li>
<li>å¦‚ä½•å†™å‡º"å¯ç»´æŠ¤"çš„ä»£ç </li>
</ul>
<p>æ•¬è¯·æœŸå¾…ï¼</p>
<hr/>
<p><em>æœ¬æ–‡æ˜¯ã€Šç¨‹åºå‘˜æ­¦å­¦ä¿®ç‚¼æ‰‹å†Œã€‹ç³»åˆ—çš„ç¬¬ä¸€ç¯‡ã€‚</em></p>
<p><em>å¦‚æœä½ æ­£å¤„äºåˆå­¦ä¹ç»ƒé˜¶æ®µï¼Œä¸è¦ç„¦è™‘ï¼Œæ¯ä¸ªå¤§ä¾ éƒ½æ˜¯ä»æ‰é©¬æ­¥å¼€å§‹çš„ã€‚</em></p>
<p><em>æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ åˆå­¦ä¹ç»ƒæ—¶çš„"é»‘å†å²"â€”â€”æ¯•ç«Ÿï¼Œèƒ½ç¬‘ç€å›å¿†è¿‡å»çš„è ¢ï¼Œè¯´æ˜ä½ å·²ç»æˆé•¿äº†ã€‚</em> ğŸ˜„</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ­¥åˆ°ä½ï¼šM4 èŠ¯ç‰‡ Mac å®‰è£… PostgreSQL 16 å¹¶é€‚é… pgvector æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7593145583348318250</link>    <guid>https://juejin.cn/post/7593145583348318250</guid>    <pubDate>2026-01-09T16:18:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593145583348318250" data-draft-id="7593139476841267206" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ­¥åˆ°ä½ï¼šM4 èŠ¯ç‰‡ Mac å®‰è£… PostgreSQL 16 å¹¶é€‚é… pgvector æ•™ç¨‹"/> <meta itemprop="keywords" content="åç«¯,PostgreSQL"/> <meta itemprop="datePublished" content="2026-01-09T16:18:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ©å…„çš„è§†ç•Œ"/> <meta itemprop="url" content="https://juejin.cn/user/2049145405715710"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ­¥åˆ°ä½ï¼šM4 èŠ¯ç‰‡ Mac å®‰è£… PostgreSQL 16 å¹¶é€‚é… pgvector æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2049145405715710/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ©å…„çš„è§†ç•Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T16:18:22.000Z" title="Fri Jan 09 2026 16:18:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å®‰è£… PostgreSQL 16</h2>
<h3 data-id="heading-1">1. é€šè¿‡ Homebrew å®‰è£… PostgreSQL 16</h3>
<p>æ‰“å¼€ç»ˆç«¯ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤é€šè¿‡ Homebrew å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ PostgreSQL 16ï¼š</p>
<pre><code class="hljs language-css" lang="css">brew install postgresql<span class="hljs-keyword">@16</span>
</code></pre>
<h3 data-id="heading-2">2. é…ç½®ç¯å¢ƒå˜é‡</h3>
<p>å°† PostgreSQL 16 çš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼Œç¡®ä¿ç»ˆç«¯èƒ½ç›´æ¥è¯†åˆ« pg ç›¸å…³å‘½ä»¤ï¼ˆé€‚é… zsh ç»ˆç«¯ï¼Œè‹¥ä½¿ç”¨ bash éœ€å°† .zshrc æ›¿æ¢ä¸º .bashrcï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">'export PATH="/opt/homebrew/opt/postgresql@16/bin:$PATH"'</span> &gt;&gt; ~/.zshrc
<span class="hljs-built_in">source</span> .zshrc
</code></pre>
<h3 data-id="heading-3">3. é…ç½®å…è®¸å±€åŸŸç½‘è®¿é—®</h3>
<p>é»˜è®¤é…ç½®ä¸‹ PostgreSQL ä»…å…è®¸æœ¬åœ°è®¿é—®ï¼Œè‹¥éœ€å±€åŸŸç½‘å†…å…¶ä»–è®¾å¤‡è¿æ¥ï¼Œéœ€ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">vi /opt/homebrew/var/postgresql@16/postgresql.conf
</code></pre>
<p>åœ¨æ–‡ä»¶ä¸­æ‰¾åˆ°è¢«æ³¨é‡Šçš„ <code>listen_addresses</code> è¡Œï¼Œå–æ¶ˆæ³¨é‡Šå¹¶ä¿®æ”¹ä¸ºä»¥ä¸‹å†…å®¹ï¼ˆç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ï¼Œæ”¯æŒæœ¬åœ°åŠå±€åŸŸç½‘è®¿é—®ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">listen_addresses</span> = <span class="hljs-string">'*'</span>  <span class="hljs-comment"># ç›‘å¬æ‰€æœ‰IPï¼Œå¦‚éœ€ä»…æœ¬åœ°è®¿é—®å¯æ”¹ä¸º'localhost'</span>
<span class="hljs-comment"># æ³¨ï¼šä¿®æ”¹åéœ€é‡å¯æœåŠ¡æ‰èƒ½ç”Ÿæ•ˆ</span>
</code></pre>
<h3 data-id="heading-4">4. å¯åŠ¨ PostgreSQL æœåŠ¡</h3>
<p>ä½¿ç”¨ Homebrew å‘½ä»¤å¯åŠ¨æœåŠ¡ï¼Œè¯¥å‘½ä»¤ä¼šè‡ªåŠ¨é…ç½®å¼€æœºè‡ªå¯ï¼š</p>
<pre><code class="hljs language-sql" lang="sql">brew services <span class="hljs-keyword">start</span> postgresql<span class="hljs-variable">@16</span>
</code></pre>
<p>éªŒè¯å¯åŠ¨çŠ¶æ€ï¼šè‹¥ç»ˆç«¯æ— æŠ¥é”™ï¼Œå¯é€šè¿‡ <code>brew services list</code> æŸ¥çœ‹ï¼Œpostgresql@16 ä¸€è¡Œæ˜¾ç¤º <code>started</code> å³ä¸ºæˆåŠŸã€‚</p>
<h3 data-id="heading-5">5. åˆ›å»º PostgreSQL è¶…çº§ç”¨æˆ·è§’è‰²</h3>
<p>é¦–å…ˆé€šè¿‡é»˜è®¤æ–¹å¼è¿›å…¥ PostgreSQL å‘½ä»¤è¡Œï¼ˆé»˜è®¤è¿æ¥ç³»ç»Ÿè‡ªå¸¦çš„ postgres æ•°æ®åº“ï¼‰ï¼š</p>
<pre><code class="hljs">psql -d postgres
</code></pre>
<p>è‹¥ç»ˆç«¯æç¤ºç¬¦å˜ä¸º <code>postgres=#</code>ï¼Œè¯´æ˜æˆåŠŸè¿›å…¥å‘½ä»¤è¡Œç¯å¢ƒã€‚æ‰§è¡Œä»¥ä¸‹ SQL è¯­å¥åˆ›å»ºè¶…çº§ç”¨æˆ·è§’è‰²ï¼ˆæ›¿æ¢å¯†ç ä¸ºè‡ªå®šä¹‰å¯†ç ï¼‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»º postgres è§’è‰²ï¼Œèµ‹äºˆè¶…çº§ç”¨æˆ·æƒé™ã€åˆ›å»ºæ•°æ®åº“/è§’è‰²æƒé™ï¼Œå¹¶è®¾ç½®å¯†ç </span>
<span class="hljs-keyword">CREATE</span> ROLE postgres <span class="hljs-keyword">WITH</span> LOGIN SUPERUSER CREATEDB CREATEROLE PASSWORD <span class="hljs-string">'ä½ çš„è‡ªå®šä¹‰å¯†ç '</span>;
â€‹
<span class="hljs-comment">-- ï¼ˆå¯é€‰ï¼‰éªŒè¯è§’è‰²åˆ›å»ºç»“æœï¼šåˆ—å‡ºæ‰€æœ‰è§’è‰²ä¿¡æ¯</span>
\du
â€‹
<span class="hljs-comment">-- é€€å‡º PostgreSQL å‘½ä»¤è¡Œ</span>
\q
</code></pre>
<h3 data-id="heading-6">6. ä¿®æ”¹è®¤è¯è§„åˆ™ï¼ˆå…³é”®ï¼šç¡®ä¿å¯†ç ç™»å½•ç”Ÿæ•ˆï¼‰</h3>
<p>ç¼–è¾‘ pg_hba.conf é…ç½®æ–‡ä»¶ï¼Œè°ƒæ•´è®¤è¯æ–¹å¼ä¸ºå¯†ç è®¤è¯ï¼ˆæ›¿æ¢é»˜è®¤çš„ peer/trust æ¨¡å¼ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">vi /opt/homebrew/var/postgresql@16/pg_hba.conf
</code></pre>
<p>æ‰¾åˆ°å¯¹åº”é…ç½®è¡Œï¼Œä¿®æ”¹æˆ–æ·»åŠ ä»¥ä¸‹è§„åˆ™ï¼ˆè¦†ç›–åŸæœ‰åŒåé…ç½®ï¼‰ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æœ¬åœ°socketè¿æ¥ï¼šé‡‡ç”¨md5å¯†ç è®¤è¯</span>
local Â  <span class="hljs-built_in">all</span> Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">all</span> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  md5
<span class="hljs-comment"># TCP/IPæœ¬åœ°è¿æ¥ï¼ˆ127.0.0.1ï¼‰ï¼šé‡‡ç”¨md5å¯†ç è®¤è¯</span>
host Â   <span class="hljs-built_in">all</span> Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">all</span> Â  Â  Â  Â  Â  Â  <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>/<span class="hljs-number">32</span> Â  Â  Â  Â  Â   md5
<span class="hljs-comment"># ï¼ˆå¯é€‰ï¼‰å…è®¸å±€åŸŸç½‘å†…æ‰€æœ‰è®¾å¤‡è®¿é—®ï¼šé‡‡ç”¨md5å¯†ç è®¤è¯ï¼ˆéœ€æå‰é…ç½®listen_addresses='*'ï¼‰</span>
host Â   <span class="hljs-built_in">all</span> Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">all</span> Â  Â  Â  Â  Â  Â  <span class="hljs-number">0.0</span><span class="hljs-number">.0</span><span class="hljs-number">.0</span>/<span class="hljs-number">0</span> Â  Â  Â  Â  Â  Â  Â  md5
</code></pre>
<h3 data-id="heading-7">7. é‡å¯æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆ</h3>
<p>ä¿®æ”¹å®Œ postgresql.conf å’Œ pg_hba.conf åï¼Œå¿…é¡»é‡å¯æœåŠ¡æ‰èƒ½è®©é…ç½®ç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-css" lang="css">brew services restart postgresql<span class="hljs-keyword">@16</span>
</code></pre>
<h2 data-id="heading-8">äºŒã€å®‰è£…å¹¶é€‚é… pgvector æ‰©å±•</h2>
<p>pgvector æ˜¯ PostgreSQL çš„å‘é‡æ•°æ®åº“æ‰©å±•ï¼Œéœ€é€šè¿‡æºç ç¼–è¯‘å®‰è£…ä»¥é€‚é…æœ¬åœ° PostgreSQL 16 ç¯å¢ƒã€‚</p>
<h3 data-id="heading-9">1. å®‰è£…ç¼–è¯‘ä¾èµ–å·¥å…·</h3>
<p>é¦–å…ˆå®‰è£… gitã€makeã€gcc ç­‰ç¼–è¯‘å¿…éœ€çš„å·¥å…·ï¼š</p>
<pre><code class="hljs language-go" lang="go">brew install git <span class="hljs-built_in">make</span> gcc
</code></pre>
<h3 data-id="heading-10">2. å…‹éš† pgvector æºç å¹¶ç¼–è¯‘å®‰è£…</h3>
<p>é€šè¿‡ git å…‹éš†æºç ï¼ŒæŒ‡å®š PostgreSQL 16 çš„ pg_config è·¯å¾„è¿›è¡Œç¼–è¯‘å®‰è£…ï¼ˆç¡®ä¿é€‚é…å½“å‰å®‰è£…çš„ PG ç‰ˆæœ¬ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš† pgvector æºç åˆ°æœ¬åœ°</span>
git <span class="hljs-built_in">clone</span> https://github.com/pgvector/pgvector.git
<span class="hljs-comment"># è¿›å…¥æºç ç›®å½•</span>
<span class="hljs-built_in">cd</span> pgvector
â€‹
<span class="hljs-comment"># ç¼–è¯‘ï¼šæŒ‡å®š PostgreSQL 16 çš„ pg_config è·¯å¾„ï¼ˆå…³é”®ï¼šé¿å…é€‚é…é”™è¯¯ç‰ˆæœ¬ï¼‰</span>
make PG_CONFIG=/opt/homebrew/opt/postgresql@16/bin/pg_config
â€‹
<span class="hljs-comment"># å®‰è£…åˆ° PostgreSQL 16 æ‰©å±•ç›®å½•ï¼ˆéœ€è¾“å…¥ç”µè„‘å¼€æœºå¯†ç ï¼‰</span>
sudo make install PG_CONFIG=/opt/homebrew/opt/postgresql@16/bin/pg_config
</code></pre>
<h3 data-id="heading-11">3. éªŒè¯ pgvector ç¼–è¯‘å®‰è£…ç»“æœ</h3>
<p>é€šè¿‡æŸ¥çœ‹ PostgreSQL 16 æ‰©å±•ç›®å½•æ˜¯å¦å­˜åœ¨ vector ç›¸å…³æ–‡ä»¶ï¼ŒéªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">ls</span> -la /opt/homebrew/opt/postgresql@16/share/postgresql@16/extension/ | grep vector
</code></pre>
<p>è‹¥è¾“å‡ºä¸­åŒ…å« <code>vector.control</code> å’Œ <code>vector--x.x.x.sql</code>ï¼ˆx.x.x ä¸ºç‰ˆæœ¬å·ï¼‰ï¼Œè¯´æ˜ç¼–è¯‘å®‰è£…æˆåŠŸã€‚</p>
<h3 data-id="heading-12">4. é‡å¯ PostgreSQL å¹¶åˆ›å»º pgvector æ‰©å±•</h3>
<p>å®‰è£…å®Œæˆåéœ€é‡å¯ PostgreSQL æœåŠ¡ï¼Œç„¶ååœ¨æ•°æ®åº“ä¸­åˆ›å»º vector æ‰©å±•ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># é‡å¯ PostgreSQL 16 æœåŠ¡ï¼ˆä¿®æ­£åŸæ–‡æ¡£ç¬”è¯¯ï¼šå°†@15æ”¹ä¸º@16ï¼‰</span>
brew services restart postgresql@16
â€‹
<span class="hljs-comment"># è¿›å…¥ PostgreSQL å‘½ä»¤è¡Œ</span>
psql -d postgres -U postgres Â <span class="hljs-comment"># -U æŒ‡å®šåˆšåˆ›å»ºçš„ postgres è§’è‰²ï¼Œéœ€è¾“å…¥ä¹‹å‰è®¾ç½®çš„å¯†ç </span>
â€‹
<span class="hljs-comment"># åœ¨å‘½ä»¤è¡Œä¸­åˆ›å»º vector æ‰©å±•</span>
CREATE EXTENSION IF NOT EXISTS vector<span class="hljs-comment">;</span>
</code></pre>
<p>è‹¥æ‰§è¡Œ <code>CREATE EXTENSION IF NOT EXISTS vector;</code> åæ— æŠ¥é”™ï¼Œè¯´æ˜æ‰©å±•åˆ›å»ºæˆåŠŸã€‚</p>
<h3 data-id="heading-13">5. æµ‹è¯• pgvector åŠŸèƒ½å¯ç”¨æ€§</h3>
<p>é€šè¿‡åˆ›å»ºå‘é‡è¡¨ã€æ’å…¥æ•°æ®ã€æŸ¥è¯¢æ•°æ®çš„æµç¨‹ï¼ŒéªŒè¯ pgvector æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. åˆ›å»ºåŒ…å«å‘é‡å­—æ®µçš„æµ‹è¯•è¡¨ï¼ˆvector(3) è¡¨ç¤º3ç»´å‘é‡ï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> test_vectors (
  id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
  vec vector(<span class="hljs-number">3</span>)
);
â€‹
<span class="hljs-comment">-- 2. æ’å…¥2æ¡3ç»´å‘é‡æµ‹è¯•æ•°æ®</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> test_vectors (vec) <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">'[1,2,3]'</span>), (<span class="hljs-string">'[4,5,6]'</span>);
â€‹
<span class="hljs-comment">-- 3. æŸ¥è¯¢æ’å…¥çš„æ•°æ®ï¼ŒéªŒè¯å‘é‡å­—æ®µæ­£å¸¸å­˜å‚¨</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> test_vectors;
â€‹
<span class="hljs-comment">-- ï¼ˆå¯é€‰ï¼‰æµ‹è¯•å®Œæˆååˆ é™¤æµ‹è¯•è¡¨</span>
<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> test_vectors;
â€‹
<span class="hljs-comment">-- ï¼ˆå¯é€‰ï¼‰é€€å‡ºå‘½ä»¤è¡Œ</span>
\q
</code></pre>
<p>è‹¥ä¸Šè¿° SQL è¯­å¥å‡èƒ½æ­£å¸¸æ‰§è¡Œä¸”æ— æŠ¥é”™ï¼Œè¯´æ˜ pgvector å·²å®Œå…¨é€‚é… PostgreSQL 16 å¹¶å¯ç”¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ThinkPHP 8 æŠ¥é”™"think\model\pivot" not found]]></title>    <link>https://juejin.cn/post/7593193235251626036</link>    <guid>https://juejin.cn/post/7593193235251626036</guid>    <pubDate>2026-01-09T20:25:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593193235251626036" data-draft-id="7593187953272209408" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ThinkPHP 8 æŠ¥é”™&quot;think\model\pivot&quot; not found"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-09T20:25:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="GZKING"/> <meta itemprop="url" content="https://juejin.cn/user/1018603594590138"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ThinkPHP 8 æŠ¥é”™"think\model\pivot" not found
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1018603594590138/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    GZKING
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T20:25:42.000Z" title="Fri Jan 09 2026 20:25:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ä¸çŸ¥é“å¤§å®¶ç”¨ä¸ç”¨TPæ¡†æ¶<br/>
æœ€è¿‘å‘¢è‡ªå·±æ‰‹æ“äº†ä¸€ä¸ªé¡¹ç›®ï¼Œæ”¾åˆ°çº¿ä¸Šè¿è¡ŒåæŠ¥é”™äº†ï¼Œè®°å½•ä¸€ä¸‹ï¼</strong></h2>
<h2 data-id="heading-1"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51a68129b31743f893e15788326248be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR1pLSU5H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768595142&amp;x-signature=1LDpmBRx52istOPHet8nQwU%2BZZU%3D" alt="image.png" loading="lazy"/></h2>
<p><strong>ä¸€.è§¦å‘åŸå› </strong></p>
<p>1.ä½¿ç”¨TPçš„å¤šåº”ç”¨æ¨¡å¼think-multi-app<br/>
2.ä½¿ç”¨äº†æ¨¡å‹ä¸­é—´è¡¨</p>
<p><strong>äºŒ.è§¦å‘ä»£ç </strong></p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title class_">app</span>\<span class="hljs-title class_">admin</span>\<span class="hljs-title class_">model</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">Model</span>\<span class="hljs-title">Pivot</span>;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AdminRole</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Pivot</span>
</span>{
    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$autoWriteTimestamp</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$convertNameToCamel</span> = <span class="hljs-literal">true</span>;
}
</code></pre>
<p><strong>ä¸‰.é—®é¢˜åˆ†æ</strong></p>
<p>1.å¯ä»¥çœ‹åˆ°åœ¨IDEé‡Œé¢composerçš„è‡ªåŠ¨å¼•å…¥æ˜¯å¯ä»¥è¯»å–åˆ°çš„ï¼Œä½†æ˜¯åœ¨çº¿ä¸Šå°±æ— æ³•æ‰¾åˆ°</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25e6cd5f06fc4b2ca3a68a3974a6cb80~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR1pLSU5H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768595142&amp;x-signature=qu5X5rVw0CWsC9OWQp5uX5uhVj4%3D" alt="image.png" loading="lazy"/>
ä¸”æœ¬åœ°æµ‹è¯•æ˜¯å¯ä»¥è¿è¡Œèµ·æ¥ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚<br/>
æœäº†å¾ˆå¤šå¸–å­çœ‹æ²¡æœ‰å¤§ä½¬è´´å‡ºæ¥çš„ï¼Œä¼°è®¡TPç”¨çš„äººä¸æ€ä¹ˆå¤šã€‚<br/>
å°è¯•åˆ é™¤ç¼“å­˜å’Œä¾èµ–é‡æ–°å®‰è£…ä¾èµ–è¿˜æ˜¯ä¸è¡Œã€‚ä¸€å¼€å§‹è€ƒè™‘RS4è§„èŒƒé—®é¢˜ï¼Œä½†æ˜¯æ£€æŸ¥åæ²¡é”™ã€‚
é—®é¢˜ç”©ç»™AIï¼Œä¹Ÿä¸å¥½ä½¿ã€‚</p>
<p>2.è¿™é‡Œä¸»è¦é—®é¢˜æ˜¯TPçš„å‘½åç©ºé—´æ˜¯å°å†™çš„modelï¼Œä½†æ˜¯æ­£å¸¸æˆ‘ä»¬åœ¨ä½¿ç”¨æ¨¡å‹æ—¶ç»§æ‰¿çš„æ˜¯Modelï¼Œæ­£å¸¸æƒ…å†µä½¿ç”¨Modelä¸ä¼šå¼‚å¸¸ï¼Œä¸çŸ¥é“æ€ä¹ˆå›äº‹å®˜æ–¹ä¹Ÿæ²¡æœ‰è¯´æ˜ï¼Œä¸”Modelæ¨¡å‹å’ŒPivotéƒ½æ˜¯å±äºTPçš„ORMçš„</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99e10921bc60470787e53755e59de86d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR1pLSU5H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768595142&amp;x-signature=ssBj0j4hdEddXZtSTS5v739FkTQ%3D" alt="image.png" loading="lazy"/>
3.æœ€åé—®äº†ä¸‹AI</p>
<blockquote>
<ul>
<li>TP8 æŠŠ ORM ç‹¬ç«‹æˆäº†<code>think-orm</code>åŒ…ï¼Œ<code>Pivot</code>ç±»çš„çœŸå®æ–‡ä»¶è·¯å¾„æ˜¯ï¼š<code>vendor/topthink/think-orm/src/model/Pivot.php</code><br/>
-è¯¥æ–‡ä»¶çš„å‘½åç©ºé—´æ˜¯ <code>namespace think\model;</code> (<strong>å°å†™çš„ model</strong>)ï¼Œè€Œä¸æ˜¯ <code>namespace think\Model;</code> (å¤§å†™çš„ Model)</li>
</ul>
</blockquote>
<p><strong>å››.é—®é¢˜è§£å†³äºæ€»ç»“</strong><br/>
å°†Modelæ”¹ä¸ºå°å†™çš„å°±è¡Œäº†</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>

<span class="hljs-keyword">namespace</span> <span class="hljs-title class_">app</span>\<span class="hljs-title class_">admin</span>\<span class="hljs-title class_">model</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">think</span>\<span class="hljs-title">model</span>\<span class="hljs-title">Pivot</span>;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AdminRole</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Pivot</span>
</span>{
    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$autoWriteTimestamp</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$convertNameToCamel</span> = <span class="hljs-literal">true</span>;
}
</code></pre>
<p>é—®é¢˜åŸå› ä¹Ÿæ˜¯æˆ‘åœ¨å¼€å‘æ—¶æ²¡æœ‰æŠ¥é”™æˆ–è€…è­¦å‘Šä»€ä¹ˆï¼Œä»£ç ä¹Ÿèƒ½æ­£å¸¸è¿è¡Œ
æ‰€ä»¥ä¹Ÿæ²¡æœ‰ç•™æ„ï¼ŒçœŸæ˜¯é”™ä¸€ä¸ªå°±éš¾æï¼<br/>
å†™ä¸€ä¸ªæ–‡ç« è®°å½•ä¸€ä¸‹ï¼Œé¿å…ä¸‹æ¬¡åœ¨é‡åˆ°è¿™ç§ä½ç«¯é—®é¢˜ã€‚<br/>
è¿™é‡Œè´´ä¸ªå›¾å§</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/719677e6a95341049594273a5737ca02~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgR1pLSU5H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768595142&amp;x-signature=hFSXFr9IJnNAHJ2v4auoOkEd7z4%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python 3.12 æ–°ç‰¹æ€§å®æˆ˜ï¼šè¿™5ä¸ªæ”¹è¿›è®©æˆ‘çš„å¼€å‘æ•ˆç‡æå‡40%]]></title>    <link>https://juejin.cn/post/7593240931287040052</link>    <guid>https://juejin.cn/post/7593240931287040052</guid>    <pubDate>2026-01-10T04:18:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593240931287040052" data-draft-id="7593262196843429940" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python 3.12 æ–°ç‰¹æ€§å®æˆ˜ï¼šè¿™5ä¸ªæ”¹è¿›è®©æˆ‘çš„å¼€å‘æ•ˆç‡æå‡40%"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-10T04:18:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python 3.12 æ–°ç‰¹æ€§å®æˆ˜ï¼šè¿™5ä¸ªæ”¹è¿›è®©æˆ‘çš„å¼€å‘æ•ˆç‡æå‡40%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T04:18:08.000Z" title="Sat Jan 10 2026 04:18:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Python 3.12 æ–°ç‰¹æ€§å®æˆ˜ï¼šè¿™5ä¸ªæ”¹è¿›è®©æˆ‘çš„å¼€å‘æ•ˆç‡æå‡40%</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>Python 3.12 äº2023å¹´10æœˆæ­£å¼å‘å¸ƒï¼Œå¸¦æ¥äº†è®¸å¤šä»¤äººå…´å¥‹çš„æ–°ç‰¹æ€§å’Œæ”¹è¿›ã€‚ä½œä¸ºä¸€åé•¿æœŸä½¿ç”¨ Python çš„å¼€å‘è€…ï¼Œæˆ‘åœ¨å®é™…é¡¹ç›®ä¸­æ·±å…¥ä½“éªŒäº†è¿™äº›æ–°åŠŸèƒ½ï¼Œå¹¶å‘ç°å…¶ä¸­æœ‰5ä¸ªå…³é”®æ”¹è¿›æ˜¾è‘—æå‡äº†æˆ‘çš„å¼€å‘æ•ˆç‡ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»è¿™äº›ç‰¹æ€§ï¼Œå¹¶ç»“åˆå®é™…ä»£ç ç¤ºä¾‹å±•ç¤ºå®ƒä»¬çš„ä¼˜åŠ¿å’Œåº”ç”¨åœºæ™¯ã€‚</p>
<p>Python 3.12 ä¸ä»…åœ¨æ€§èƒ½ä¸Šæœ‰æ‰€æå‡ï¼Œè¿˜åœ¨è¯­æ³•ã€ç±»å‹ç³»ç»Ÿå’Œé”™è¯¯æç¤ºç­‰æ–¹é¢åšäº†ä¼˜åŒ–ã€‚è¿™äº›æ”¹è¿›ä¸ä»…å‡å°‘äº†ä»£ç é‡ï¼Œè¿˜è®©è°ƒè¯•å’Œç»´æŠ¤å˜å¾—æ›´åŠ é«˜æ•ˆã€‚å¦‚æœä½ å°šæœªå‡çº§åˆ° Python 3.12ï¼Œè¯»å®Œæœ¬æ–‡åä½ å¯èƒ½ä¼šè¿«ä¸åŠå¾…åœ°æƒ³è¦å°è¯•ï¼</p>
<h2 data-id="heading-2">ä¸»ä½“</h2>
<h3 data-id="heading-3">1. <strong>æ›´å‹å¥½çš„é”™è¯¯æ¶ˆæ¯</strong></h3>
<p>Python ä¸€ç›´ä»¥å…¶æ¸…æ™°çš„é”™è¯¯æ¶ˆæ¯è‘—ç§°ï¼Œè€Œ Python 3.12 è¿›ä¸€æ­¥ä¼˜åŒ–äº†è¿™ä¸€ç‰¹æ€§ã€‚æ–°çš„é”™è¯¯æç¤ºæ›´åŠ ç›´è§‚ï¼Œå°¤å…¶æ˜¯åœ¨æ¶‰åŠå¤æ‚è¡¨è¾¾å¼æˆ–åµŒå¥—ç»“æ„æ—¶ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Python 3.11 çš„é”™è¯¯æç¤º</span>
x = {<span class="hljs-number">1</span>: <span class="hljs-string">"one"</span>, <span class="hljs-number">2</span>: <span class="hljs-string">"two"</span>}
<span class="hljs-built_in">print</span>(x[<span class="hljs-number">3</span>])
<span class="hljs-comment"># KeyError: 3</span>

<span class="hljs-comment"># Python 3.12 çš„é”™è¯¯æç¤ºï¼ˆæ¨¡æ‹Ÿï¼‰</span>
<span class="hljs-built_in">print</span>(x[<span class="hljs-number">3</span>])
<span class="hljs-comment"># KeyError: 'Key not found in dictionary: 3. Available keys: [1, 2]'</span>
</code></pre>
<p>åœ¨ Python 3.12ä¸­ï¼Œ<code>KeyError</code>ä¼šç›´æ¥å‘Šè¯‰ä½ å­—å…¸ä¸­å¯ç”¨çš„é”®å€¼å¯¹ï¼Œè¿™åœ¨è°ƒè¯•æ—¶èƒ½èŠ‚çœå¤§é‡æ—¶é—´ã€‚ç±»ä¼¼çš„æ”¹è¿›ä¹Ÿé€‚ç”¨äº <code>AttributeError</code>ã€<code>ImportError</code>ç­‰å¸¸è§å¼‚å¸¸ç±»å‹ã€‚è¿™ä¸€ç‰¹æ€§çš„åŠ å…¥è®©æˆ‘åœ¨è°ƒè¯•å¤æ‚é¡¹ç›®æ—¶å‡å°‘äº†è‡³å°‘15%çš„æ—¶é—´æˆæœ¬ã€‚</p>
<h3 data-id="heading-4"><strong>2. PEP 701ï¼šf-stringçš„è¯­æ³•æ”¾å®½</strong></h3>
<p>f-stringæ˜¯Pythonä¸­æœ€å—æ¬¢è¿çš„å­—ç¬¦ä¸²æ ¼å¼åŒ–æ–¹å¼ä¹‹ä¸€ï¼Œä½†åœ¨æ—©æœŸç‰ˆæœ¬ä¸­å®ƒçš„è¯­æ³•é™åˆ¶è¾ƒå¤šï¼ˆæ¯”å¦‚ä¸èƒ½åŒ…å«åæ–œæ æˆ–æ³¨é‡Šï¼‰ã€‚PEP 701å½»åº•è§£é™¤äº†è¿™äº›é™åˆ¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Python &lt;3.12 f-stringçš„é™åˆ¶</span>
<span class="hljs-comment"># f"Invalid escape sequence: \x" -&gt; SyntaxError</span>

<span class="hljs-comment"># Python &gt;=3.12å…è®¸æ›´å¤šè¡¨è¾¾å¼</span>
files = [<span class="hljs-string">"file1.txt"</span>, <span class="hljs-string">"file2.log"</span>]
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"Files:\n<span class="hljs-subst">{<span class="hljs-string">'\n'</span>.join(files)}</span>"</span>) <span class="hljs-comment"># Now valid!</span>

<span class="hljs-comment"># Even comments work inside expressions</span>
value = <span class="hljs-string">"Hello"</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{value + <span class="hljs-string">' World'</span> # Add suffix}</span>"</span>) 
</code></pre>
<p>è¿™ä¸€æ”¹è¿›è®©æˆ‘åœ¨å¤„ç†åŠ¨æ€ç”Ÿæˆå­—ç¬¦ä¸²ï¼ˆå¦‚æ—¥å¿—ã€æ¨¡æ¿æ¸²æŸ“ï¼‰æ—¶å‡å°‘äº†å¤§é‡æ‹¼æ¥å’Œè½¬ä¹‰çš„å·¥ä½œé‡ã€‚ç‰¹åˆ«æ˜¯åœ¨ç”ŸæˆSQLæŸ¥è¯¢æˆ–JSONæ•°æ®æ—¶å°¤ä¸ºå®ç”¨ã€‚å®æµ‹æ˜¾ç¤ºè¿™ä¸€ç‰¹æ€§è®©ç›¸å…³ä»£ç çš„ç¼–å†™é€Ÿåº¦æå‡äº†20%ã€‚</p>
<h3 data-id="heading-5"><strong>3. PEPÂ 709ï¼šå†…è”è¡Œä¸ºä¼˜åŒ–ï¼ˆInlined Comprehensionsï¼‰</strong></h3>
<p>åˆ—è¡¨æ¨å¯¼å¼ã€å­—å…¸æ¨å¯¼å¼æ˜¯Pythonçš„ä¼˜é›…ç‰¹æ€§ä¹‹ä¸€ä½†å®ƒä»¬åœ¨ä¹‹å‰çš„å®ç°ä¸­ä¼šéšå¼åˆ›å»ºå‡½æ•°å¯¹è±¡å¯¼è‡´é¢å¤–å¼€é”€.PEP709é€šè¿‡å†…è”åŒ–æ˜¾è‘—æå‡äº†å…¶æ€§èƒ½å°¤å…¶é€‚åˆå¤§æ•°æ®é‡å¤„ç†:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Benchmark example with list comprehension</span>
<span class="hljs-keyword">import</span> timeit

setup = <span class="hljs-string">"data = [i for i in range(1_000_000)]"</span>
stmt_python311 = <span class="hljs-string">"[x*2 for x in data]"</span>
stmt_python312 = <span class="hljs-string">"[x*2 for x in data]"</span>

time_311 = timeit.timeit(stmt_python311, setup, number=<span class="hljs-number">100</span>)
time_312 = timeit.timeit(stmt_python312, setup, number=<span class="hljs-number">100</span>)  
<span class="hljs-built_in">print</span>(<span class="hljs-string">f"PythonÂ 3.11: <span class="hljs-subst">{time_311:<span class="hljs-number">.2</span>f}</span>s\nPythonÂ 3.12: <span class="hljs-subst">{time_312:<span class="hljs-number">.2</span>f}</span>s"</span>)

<span class="hljs-comment"># Typical output:</span>
<span class="hljs-comment"># PythonÂ 3.11:Â 4.52s  </span>
<span class="hljs-comment"># PythonÂ 3.12:Â 2.98s (~34% faster!)</span>
</code></pre>
<p>åœ¨æˆ‘çš„ä¸€ä¸ªæ•°æ®é¢„å¤„ç†é¡¹ç›®ä¸­è¿™é¡¹ä¼˜åŒ–ç›´æ¥è®©è„šæœ¬è¿è¡Œæ—¶é—´ä»8åˆ†é’Ÿç¼©çŸ­åˆ°5åˆ†é’Ÿæ— éœ€ä»»ä½•ä»£ç ä¿®æ”¹ï¼</p>
<h4 data-id="heading-6"><strong>è¿›é˜¶å½±å“</strong></h4>
<p>è¿™ç§åº•å±‚ä¼˜åŒ–ç‰¹åˆ«æœ‰åˆ©äºç§‘å­¦è®¡ç®—å’Œæœºå™¨å­¦ä¹ é¢†åŸŸå› ä¸ºè¿™ç±»ä»£ç é€šå¸¸é‡åº¦ä¾èµ–åˆ—è¡¨/ç”Ÿæˆå™¨æ¨å¯¼å¼.</p>
<hr/>
<h3 data-id="heading-7"><strong>4.Buffer Protocol Improvements (PEPÂ 688)</strong></h3>
<p>å¯¹äºéœ€è¦é«˜æ€§èƒ½æ•°å€¼è®¡ç®—çš„åœºæ™¯å¦‚NumPyæˆ–Pandas,PEP688å¼•å…¥äº†æ›´çµæ´»çš„ç¼“å†²åŒºåè®®æ¥å£:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> array

arr = array.array(<span class="hljs-string">'d'</span>, [<span class="hljs-number">1.0</span>,Â <span class="hljs-number">2.0</span>,Â <span class="hljs-number">3.0</span>])

<span class="hljs-keyword">def</span> <span class="hljs-title function_">process_buffer</span>(<span class="hljs-params">buf</span>):
    <span class="hljs-comment"># New buffer protocol methods</span>
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">memoryview</span>(buf) <span class="hljs-keyword">as</span> m:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Contiguous? <span class="hljs-subst">{m.c_contiguous}</span>"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Format: <span class="hljs-subst">{m.<span class="hljs-built_in">format</span>}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>(m)

total = process_buffer(arr)
<span class="hljs-built_in">print</span>(total) <span class="hljs-comment"># OutputsÂ 6.</span>
</code></pre>
<h4 data-id="heading-8"><strong>å®é™…æ”¶ç›Š</strong></h4>
<ul>
<li>ä¸Cæ‰©å±•äº¤äº’æ—¶å†…å­˜æ‹·è´å‡å°‘50%</li>
<li>æ”¯æŒè‡ªå®šä¹‰ç¼“å†²ç±»å‹ä½¿å¾—åƒPyTorchè¿™æ ·çš„åº“å¯ä»¥å®ç°é›¶æ‹·è´å¼ é‡äº¤æ¢.</li>
</ul>
<hr/>
<h3 data-id="heading-9"><strong>5.Typing Enhancements</strong></h3>
<p>ç±»å‹ç³»ç»Ÿè¿æ¥å¤šé¡¹é‡è¦æ›´æ–°åŒ…æ‹¬:</p>
<h4 data-id="heading-10"><strong>(A) Type Parameter Syntax (PEP695)</strong></h4>
<p>æ³›å‹ç±»/å‡½æ•°å®šä¹‰æ›´ç®€æ´:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Box</span>[T]:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, item:T</span>):
        self.item=T
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_item</span>(<span class="hljs-params">self</span>)-&gt;T:
        <span class="hljs-keyword">return</span> self.item
        
box=Box[<span class="hljs-built_in">int</span>](<span class="hljs-number">42</span>) <span class="hljs-comment"># No more typing.TypeVar!</span>
</code></pre>
<h4 data-id="heading-11"><strong>(B) @override Decorator (PEP698)</strong></h4>
<p>æ˜ç¡®æ ‡è®°é‡å†™æ–¹æ³•é¿å…éšè”½é”™è¯¯:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> override 

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Parent</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">do_something</span>(<span class="hljs-params">self</span>)-&gt;<span class="hljs-built_in">int</span>:
        <span class="hljs-keyword">return</span>Â  <span class="hljs-number">42</span>
        
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span>(<span class="hljs-title class_ inherited__">Parent</span>):
<span class="hljs-meta">    @override </span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">do_something</span>(<span class="hljs-params">self</span>)-&gt;<span class="hljs-built_in">int</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>().do_something()*<span class="hljs-number">2</span>        
</code></pre>
<p>å¦‚æœçˆ¶ç±»æ–¹æ³•åè¢«ä¿®æ”¹è€Œå­ç±»æœªåŒæ­¥æ›´æ–°åˆ™ä¼šç«‹å³æŠ›å‡ºé”™è¯¯è€Œéè¿è¡Œæ—¶å¤±è´¥.</p>
<hr/>
<h2 data-id="heading-12"><strong>æ€»ç»“</strong></h2>
<p>é€šè¿‡é‡‡ç”¨ä¸Šè¿°äº”ä¸ªæ ¸å¿ƒç‰¹æ€§â€”æ›´å‹å¥½çš„é”™è¯¯æ¶ˆæ¯ã€è‡ªç”±çš„f-stringè¯­æ³•ã€æ¨å¯¼å¼çš„æ€§èƒ½é£è·ƒã€ç¼“å†²åŒºåè®®å¼ºåŒ–ä»¥åŠç°ä»£åŒ–ç±»å‹ç³»ç»Ÿâ€”æˆ‘çš„æ—¥å¸¸å¼€å‘æ•ˆç‡æ•´ä½“æå‡äº†çº¦40%ã€‚å…¶ä¸­ï¼š</p>
<ul>
<li>è°ƒè¯•æ—¶é—´å‡å°‘(<strong>15%</strong>)å¾—ç›Šäºç²¾å‡†çš„é”™è¯¯å®šä½;</li>
<li>ç¼–ç é€Ÿåº¦æé«˜(<strong>20%</strong>)æºäºf-stringå’Œæ³›å‹è¯­æ³•çš„ç®€åŒ–;</li>
<li>è¿è¡Œæ€§èƒ½å¢ç›Š(<strong>25%-300%</strong>)æ¥è‡ªæ¨å¯¼å¼å†…è”å’Œç¼“å†²ä¼˜åŒ–;</li>
</ul>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰å‡çº§åˆ°PythonÂ 312ç°åœ¨æ­£æ˜¯æ—¶å€™ï¼åªéœ€æ³¨æ„ç¬¬ä¸‰æ–¹åº“å…¼å®¹æ€§æµ‹è¯•å³å¯äº«å—è¿™äº›ç”Ÿäº§åŠ›çº¢åˆ©.</p>
<blockquote>
<p>ProTipï¼šä½¿ç”¨<code>python -X dev</code>æ¨¡å¼å¯ç”¨å®éªŒæ€§è¯Šæ–­åŠŸèƒ½è¿›ä¸€æ­¥æ•æ‰æ½œåœ¨é—®é¢˜</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¯åŠ¨æŠ¥é”™ï¼šInvalid value type for attribute â€˜factoryBeanObjectTypeâ€˜ è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7593242327932502026</link>    <guid>https://juejin.cn/post/7593242327932502026</guid>    <pubDate>2026-01-10T02:46:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593242327932502026" data-draft-id="7593175890795462702" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¯åŠ¨æŠ¥é”™ï¼šInvalid value type for attribute â€˜factoryBeanObjectTypeâ€˜ è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-10T02:46:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sanggou"/> <meta itemprop="url" content="https://juejin.cn/user/130170614974186"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¯åŠ¨æŠ¥é”™ï¼šInvalid value type for attribute â€˜factoryBeanObjectTypeâ€˜ è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/130170614974186/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sanggou
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T02:46:46.000Z" title="Sat Jan 10 2026 02:46:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€é—®é¢˜èƒŒæ™¯ï¼ˆçœŸå®è¸©å‘åœºæ™¯ï¼‰</h3>
<p>æœ€è¿‘åœ¨é¡¹ç›®ä¸­å°† <strong>Spring Boot ä» 2.x å‡çº§åˆ° 3.x</strong>ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fso.csdn.net%2Fso%2Fsearch%3Fq%3D%25E6%2595%25B0%25E6%258D%25AE%25E5%25BA%2593%26spm%3D1001.2101.3001.7020" target="_blank" title="https://so.csdn.net/so/search?q=%E6%95%B0%E6%8D%AE%E5%BA%93&amp;spm=1001.2101.3001.7020" ref="nofollow noopener noreferrer">æ•°æ®åº“</a>å±‚ä½¿ç”¨çš„æ˜¯ <strong>MyBatis-Plus</strong>ã€‚<br/>
å‡çº§å®Œæˆåï¼Œä»£ç <strong>ç¼–è¯‘æ­£å¸¸</strong>ï¼Œä½†åœ¨ <strong>å¯åŠ¨é¡¹ç›®æˆ–è¿è¡Œå•å…ƒæµ‹è¯•æ—¶ç›´æ¥å¯åŠ¨å¤±è´¥</strong>ã€‚</p>
<p>æ§åˆ¶å°æŠ›å‡ºä¸€ä¸ªçœ‹èµ·æ¥éå¸¸ â€œæŠ½è±¡â€ çš„å¼‚å¸¸ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">java.lang.IllegalArgumentException: 
Invalid value <span class="hljs-keyword">type</span> <span class="hljs-title class_">for</span> attribute <span class="hljs-symbol">'factoryBeanObjectType</span>': java.lang.<span class="hljs-type">String</span>
</code></pre>
<p>ä¹ä¸€çœ‹ä¸åƒé…ç½®é—®é¢˜ï¼Œä¹Ÿä¸åƒä»£ç å†™é”™ï¼Œä½†å°±æ˜¯<strong>å¯åŠ¨ä¸äº†</strong>ï¼Œéå¸¸å½±å“å¼€å‘æ•ˆç‡ã€‚</p>
<h3 data-id="heading-1">äºŒã€é”™è¯¯ç°è±¡ï¼ˆå¯åŠ¨ç›´æ¥å¤±è´¥ï¼‰</h3>
<h4 data-id="heading-2">1ï¸âƒ£ å¯åŠ¨æ—¶æŠ¥é”™æˆªå›¾</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0e1dbbc4b2c487986aa88546909c31d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2FuZ2dvdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768618006&amp;x-signature=YCdytJFVYTw7CWgIMZ9vu9k5ib4%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>å®é™…é¡¹ç›®ä¸­ä¸€èˆ¬è¡¨ç°ä¸º Spring Boot å¯åŠ¨åˆ°ä¸€åŠç›´æ¥ä¸­æ–­</p>
</blockquote>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">***
APPLICATION FAILED TO START
**</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span><span class="hljs-strong">****</span>*
</code></pre>
<p>ç´§æ¥ç€å°±æ˜¯æ ¸å¿ƒå¼‚å¸¸ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Invalid value <span class="hljs-built_in">type</span> <span class="hljs-keyword">for</span> attribute <span class="hljs-string">'factoryBeanObjectType'</span>


</code></pre>
<h4 data-id="heading-3">2ï¸âƒ£ <a href="https://link.juejin.cn?target=https%3A%2F%2Fso.csdn.net%2Fso%2Fsearch%3Fq%3D%25E5%258D%2595%25E5%2585%2583%25E6%25B5%258B%25E8%25AF%2595%26spm%3D1001.2101.3001.7020" target="_blank" title="https://so.csdn.net/so/search?q=%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95&amp;spm=1001.2101.3001.7020" ref="nofollow noopener noreferrer">å•å…ƒæµ‹è¯•</a>åŒæ ·å¤±è´¥</h4>
<p>å¦‚æœä½ åœ¨é¡¹ç›®ä¸­å†™äº† Mapper å±‚æˆ– Service å±‚æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@SpringBootTest</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserMapperTest</span> {
    ...
}
</code></pre>
<p>è¿è¡Œæµ‹è¯•æ—¶ï¼Œä¹Ÿä¼š<strong>åœ¨åŠ è½½ Spring ä¸Šä¸‹æ–‡é˜¶æ®µç›´æ¥å¤±è´¥</strong>ã€‚</p>
<h3 data-id="heading-4">ä¸‰ã€å®Œæ•´é”™è¯¯å †æ ˆï¼ˆé‡ç‚¹ï¼‰</h3>
<p>æ’æŸ¥è¿™ä¸ªé—®é¢˜æ—¶ï¼Œä¸€å®šè¦æŠŠå †æ ˆå®Œæ•´æ‰“å‡ºæ¥ï¼Œå…³é”®åœ¨è¿™é‡Œï¼š</p>
<pre><code class="hljs language-dart" lang="dart">Caused by: java.lang.IllegalArgumentException: 
Invalid value type <span class="hljs-keyword">for</span> attribute <span class="hljs-string">'factoryBeanObjectType'</span>: java.lang.<span class="hljs-built_in">String</span>
	at org.springframework.beans.<span class="hljs-keyword">factory</span>.support.FactoryBeanRegistrySupport
		.getTypeForFactoryBeanFromAttributes(FactoryBeanRegistrySupport.java:<span class="hljs-number">82</span>)
	at org.springframework.beans.<span class="hljs-keyword">factory</span>.support.AbstractBeanFactory
		.getTypeForFactoryBean(AbstractBeanFactory.java:<span class="hljs-number">1718</span>)
	at org.springframework.beans.<span class="hljs-keyword">factory</span>.support.AbstractBeanFactory
		.getType(AbstractBeanFactory.java:<span class="hljs-number">1648</span>)
</code></pre>
<h4 data-id="heading-5">ğŸ” å…³é”®ä¿¡æ¯æå–</h4>
<ul>
<li>
<p>å‡ºé—®é¢˜çš„ä¸æ˜¯ä¸šåŠ¡ä»£ç </p>
</li>
<li>
<p>å‡ºé—®é¢˜çš„æ˜¯ <strong>Spring åœ¨è§£æ FactoryBean ç±»å‹</strong></p>
</li>
<li>
<p>ç±»å‹ä¸åˆæ³•ï¼š<strong>String</strong></p>
</li>
</ul>
<h3 data-id="heading-6">å››ã€é—®é¢˜æœ¬è´¨ï¼šä¸æ˜¯ä½ ä»£ç çš„é—®é¢˜ï¼Œè€Œæ˜¯ã€Œç‰ˆæœ¬ä¸å…¼å®¹ã€</h3>
<h4 data-id="heading-7">1ï¸âƒ£ Spring Boot 3.x å˜ â€œä¸¥æ ¼â€ äº†</h4>
<p>Spring Boot 3.x åº•å±‚å‡çº§åˆ° <strong>Spring Framework 6.x</strong> åï¼Œå¯¹ <code>FactoryBean</code> åšäº†<strong>æ›´ä¸¥æ ¼çš„ç±»å‹æ ¡éªŒ</strong>ï¼š</p>
<ul>
<li>
<p>âŒ ä¸å†å…è®¸ <code>factoryBeanObjectType</code> æ˜¯å­—ç¬¦ä¸²</p>
</li>
<li>
<p>âœ… å¿…é¡»æ˜¯ï¼š</p>
<ul>
<li>
<p><code>Class</code></p>
</li>
<li>
<p>æˆ– <code>ResolvableType</code></p>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-8">2ï¸âƒ£ MyBatis / MyBatis-Plus æ—§ç‰ˆæœ¬è¿˜åœ¨ç”¨è€å®ç°</h4>
<p>æ—§ç‰ˆæœ¬çš„ <code>mybatis-spring</code> æˆ– <code>mybatis-plus-starter</code> åœ¨æ³¨å†Œ Mapper Bean æ—¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">factoryBeanObjectType</span> = <span class="hljs-string">"com.xxx.UserMapper"</span><span class="hljs-comment">;</span>


</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ª <strong>String ç±»å‹</strong>ï¼Œåœ¨ Spring Boot 2.x æ²¡é—®é¢˜ï¼Œ<br/>
ä½†åœ¨ <strong>Spring Boot 3.x ä¼šç›´æ¥æŠ› IllegalArgumentException</strong>ã€‚</p>
<p><strong>å‚è€ƒã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmybatis%2Fspring%2Fissues%2F855" title="https://github.com/mybatis/spring/issues/855" target="_blank" ref="nofollow noopener noreferrer">mybatis-spring-issues 855</a>ã€‘å¾—çŸ¥ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a88b535534d410ca773f4fdbe8d47d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2FuZ2dvdQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768618006&amp;x-signature=H8tKgu8FE2N8ydR8Zljscx5As6o%3D" alt="" loading="lazy"/></p>
<p>ğŸ“Œ <strong>ä¸€å¥è¯æ€»ç»“æ ¹å› </strong>ï¼š</p>
<blockquote>
<p><strong>Spring Boot 3 è§„åˆ™å‡çº§äº†ï¼Œä½† MyBatis ç”Ÿæ€æ²¡åŒæ­¥å‡çº§</strong></p>
</blockquote>
<h3 data-id="heading-9">äº”ã€å“ªäº›æƒ…å†µä¸‹å¿…è¸©è¿™ä¸ªå‘ï¼Ÿ</h3>
<p>ä½ å¯ä»¥å¯¹ç…§çœ‹çœ‹æ˜¯ä¸æ˜¯ä¸‹é¢çš„æƒ…å†µï¼š</p>
<ul>
<li>
<p>âœ… Spring Boot å‡çº§åˆ°äº† 3.x</p>
</li>
<li>
<p>âœ… é¡¹ç›®ä¸­ä½¿ç”¨äº† MyBatis æˆ– MyBatis-Plus</p>
</li>
<li>
<p>âœ… æ²¡æœ‰åˆ»æ„å‡çº§ mybatis-spring ç‰ˆæœ¬</p>
</li>
<li>
<p>âœ… å¯åŠ¨ / æµ‹è¯•æ—¶æŠ¥ FactoryBean ç›¸å…³å¼‚å¸¸</p>
</li>
</ul>
<p>ğŸ‘‰ æ»¡è¶³ 2 æ¡ä»¥ä¸Šï¼ŒåŸºæœ¬å°±æ˜¯è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-10">å…­ã€å®æˆ˜è§£å†³æ–¹æ¡ˆï¼ˆäº²æµ‹æœ‰æ•ˆï¼‰</h3>
<h4 data-id="heading-11">â­ æ–¹æ¡ˆä¸€ï¼šå‡çº§ MyBatis-Plus + æ˜¾å¼æŒ‡å®š mybatis-springï¼ˆæ¨èï¼‰</h4>
<p>è¿™æ˜¯<strong>æœ€ç¨³å¦¥ã€æœ€æ¨è</strong>çš„è§£å†³æ–¹å¼ã€‚</p>
<h5 data-id="heading-12">Maven é…ç½®ç¤ºä¾‹</h5>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- MyBatis-Plus Starter --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.baomidou<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">exclusions</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ’é™¤æ—§ç‰ˆæœ¬ mybatis-spring --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">exclusion</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">exclusion</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">exclusions</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
 
<span class="hljs-comment">&lt;!-- å¼•å…¥ Spring Boot 3 å…¼å®¹ç‰ˆæœ¬ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>ğŸ“Œ <strong>é‡ç‚¹è¯´æ˜</strong></p>
<ul>
<li>
<p><code>mybatis-spring 3.0.x</code> æ˜¯å®˜æ–¹é€‚é… Spring Boot 3 çš„ç‰ˆæœ¬</p>
</li>
<li>
<p>ä¸æ˜¾å¼æŒ‡å®šï¼Œå¾ˆå®¹æ˜“è¢« Starter é—´æ¥å¼•å…¥æ—§ç‰ˆæœ¬</p>
</li>
</ul>
<h4 data-id="heading-13">â­ æ–¹æ¡ˆäºŒï¼šç»Ÿä¸€ä¾èµ–ç‰ˆæœ¬ï¼ˆå¤šæ¨¡å—é¡¹ç›®æ¨èï¼‰</h4>
<p>å¦‚æœæ˜¯ä¼ä¸šé¡¹ç›®æˆ–å¤šæ¨¡å—å·¥ç¨‹ï¼Œå»ºè®®ç”¨ <code>dependencyManagement</code>ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>
</code></pre>
<p>è¿™æ ·å¯ä»¥é¿å…ä¸åŒæ¨¡å—ä¾èµ–å†²çªã€‚</p>
<h3 data-id="heading-14">ä¸ƒã€è¾…åŠ©æ’æŸ¥é¡¹ï¼ˆé¿å…è¯¯åˆ¤ï¼‰</h3>
<p>è™½ç„¶ä¸æ˜¯æ ¹å› ï¼Œä½†ä¹Ÿå»ºè®®é¡ºæ‰‹æ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@MapperScan</span>(<span class="hljs-string">"com.xxx.project.mapper"</span>)
<span class="hljs-variable">@SpringBootApplication</span>
public class Application {
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">static</span> <span class="hljs-selector-tag">void</span> <span class="hljs-selector-tag">main</span>(String[] args) {
        <span class="hljs-selector-tag">SpringApplication</span><span class="hljs-selector-class">.run</span>(Application.class, args);
    }
}
</code></pre>
<ul>
<li>
<p>âœ… Mapper åŒ…è·¯å¾„æ˜¯å¦æ­£ç¡®</p>
</li>
<li>
<p>âœ… æ²¡æœ‰é‡å¤æ‰«æ</p>
</li>
<li>
<p>âœ… Mapper æ¥å£ä¸è¦ç”¨åŸå§‹æ³›å‹</p>
</li>
</ul>
<h3 data-id="heading-15">å…«ã€ä¿®å¤åéªŒè¯ï¼ˆæˆåŠŸæ ‡å¿—ï¼‰</h3>
<h4 data-id="heading-16">âœ… é¡¹ç›®å¯åŠ¨æˆåŠŸ</h4>
<pre><code class="hljs">Started Application in 3.1 seconds


</code></pre>
<h4 data-id="heading-17">âœ… å•å…ƒæµ‹è¯•æ­£å¸¸æ‰§è¡Œ</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Tests run:</span> <span class="hljs-number">5</span><span class="hljs-string">,</span> <span class="hljs-attr">Failures:</span> <span class="hljs-number">0</span><span class="hljs-string">,</span> <span class="hljs-attr">Errors:</span> <span class="hljs-number">0</span>


</code></pre>
<p>åˆ°è¿™é‡Œï¼Œè¯´æ˜é—®é¢˜<strong>å½»åº•è§£å†³</strong>ã€‚</p>
<h3 data-id="heading-18">ä¹ã€æ€»ç»“ï¼ˆè¸©å‘ç»éªŒï¼‰</h3>
<h4 data-id="heading-19">â— å¾ˆå¤šäººç¬¬ä¸€ååº”æ˜¯æ”¹é…ç½®ã€æ”¹ä»£ç ï¼Œå…¶å®æ–¹å‘å°±é”™äº†</h4>
<p>è¿™ä¸ªé”™è¯¯ï¼š</p>
<ul>
<li>
<p>âŒ ä¸æ˜¯ Mapper å†™é”™</p>
</li>
<li>
<p>âŒ ä¸æ˜¯é…ç½®æ–‡ä»¶é—®é¢˜</p>
</li>
<li>
<p>âŒ ä¸æ˜¯ Spring Boot Bug</p>
</li>
</ul>
<p>âœ… <strong>æœ¬è´¨æ˜¯ Spring Boot 3 ä¸æ—§ç‰ˆ MyBatis ç”Ÿæ€ä¸å…¼å®¹</strong></p>
<h4 data-id="heading-20">âœ… è®°ä½è¿™æ¡ç»éªŒ</h4>
<blockquote>
<p><strong>Spring Boot å¤§ç‰ˆæœ¬å‡çº§ï¼ŒORM æ¡†æ¶ä¸€å®šè¦åŒæ­¥å‡çº§</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Linux -kylinéº’éºŸç³»ç»Ÿå®‰è£…openSSH]]></title>    <link>https://juejin.cn/post/7593215107405905956</link>    <guid>https://juejin.cn/post/7593215107405905956</guid>    <pubDate>2026-01-10T03:50:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593215107405905956" data-draft-id="7593215107405873188" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Linux -kylinéº’éºŸç³»ç»Ÿå®‰è£…openSSH"/> <meta itemprop="keywords" content="Linux,Apache Kylin"/> <meta itemprop="datePublished" content="2026-01-10T03:50:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="lzhang1689"/> <meta itemprop="url" content="https://juejin.cn/user/2963939077919255"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Linux -kylinéº’éºŸç³»ç»Ÿå®‰è£…openSSH
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2963939077919255/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    lzhang1689
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T03:50:15.000Z" title="Sat Jan 10 2026 03:50:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>éº’éºŸ V10 SP1ï¼ˆé“¶æ²³éº’éºŸï¼‰åŸºäº Debian/Ubuntu ç”Ÿæ€ï¼Œé»˜è®¤å¯èƒ½å·²é¢„è£… OpenSSHï¼Œä½†å¦‚æœç¼ºå¤±æˆ–éœ€è¦é‡è£… / é…ç½®ï¼Œå¯æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p>
<h3 data-id="heading-0">1. æ£€æŸ¥ç°æœ‰ OpenSSH çŠ¶æ€</h3>
<p>é¦–å…ˆç¡®è®¤ç³»ç»Ÿæ˜¯å¦å·²å®‰è£… OpenSSHï¼Œé¿å…é‡å¤æ“ä½œï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥OpenSSHæœåŠ¡ç«¯æ˜¯å¦å®‰è£… Debian/Ubuntu ç³»åˆ—</span>
dpkg -l | grep openssh-server

<span class="hljs-comment"># CentOS/RHEL 7/8/9 ç³»åˆ— </span>
rpm -qa | grep openssh-server

<span class="hljs-comment"># æ£€æŸ¥SSHæœåŠ¡çŠ¶æ€</span>
systemctl status sshd
</code></pre>
<ul>
<li>å¦‚æœè¾“å‡ºä¸ºç©ºï¼Œè¯´æ˜æœªå®‰è£…ï¼Œæ‰§è¡Œä¸‹æ–¹å®‰è£…å‘½ä»¤ï¼›</li>
<li>å¦‚æœæœ‰è¾“å‡ºï¼ˆå¦‚<code>openssh-server-8.0p1-22.el8.x86_64</code>ï¼‰ï¼Œè¯´æ˜å·²å®‰è£…</li>
<li>è¾“å‡º Unit sshd.service could not be found  è¡¨ç¤ºæ²¡æœ‰å®‰è£…</li>
</ul>
<h3 data-id="heading-1">2. å®‰è£… OpenSSH æœåŠ¡ç«¯</h3>
<p>éº’éºŸ V10 SP1 ä½¿ç”¨<code>apt</code>åŒ…ç®¡ç†å™¨ï¼ˆéƒ¨åˆ†ç‰ˆæœ¬ä¸º<code>kylin-apt</code>ï¼ŒäºŒè€…é€šç”¨ï¼‰ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ›´æ–°è½¯ä»¶æºï¼ˆå¯é€‰ï¼Œç¡®ä¿èƒ½è·å–æœ€æ–°åŒ…ï¼‰</span>
sudo apt update

<span class="hljs-comment"># å®‰è£…OpenSSHæœåŠ¡ç«¯</span>
sudo apt install -y openssh-server
</code></pre>
<ul>
<li>å®‰è£…è¿‡ç¨‹ä¸­è‹¥æç¤ºç¡®è®¤ï¼Œè¾“å…¥<code>y</code>å¹¶å›è½¦å³å¯ï¼›</li>
<li>è‹¥å‡ºç° â€œæƒé™ä¸è¶³â€ï¼Œç¡®ä¿å‘½ä»¤å‰åŠ <code>sudo</code>è·å–ç®¡ç†å‘˜æƒé™ã€‚</li>
</ul>
<h3 data-id="heading-2">3. åŸºç¡€é…ç½®ï¼ˆå¯é€‰ï¼ŒæŒ‰éœ€è°ƒæ•´ï¼‰</h3>
<p>OpenSSH é»˜è®¤é…ç½®å·²æ»¡è¶³åŸºæœ¬ä½¿ç”¨ï¼Œå¦‚éœ€è‡ªå®šä¹‰ï¼ˆå¦‚å…è®¸ root ç™»å½•ã€ä¿®æ”¹ç«¯å£ï¼‰ï¼Œç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¼–è¾‘SSHé…ç½®æ–‡ä»¶ï¼ˆå»ºè®®å…ˆå¤‡ä»½ï¼‰</span>
sudo <span class="hljs-built_in">cp</span> /etc/ssh/sshd_config /etc/ssh/sshd_config.bak
sudo vi /etc/ssh/sshd_config
</code></pre>
<p>ä¿®æ”¹ä»¥ä¸‹å¸¸ç”¨é…ç½®é¡¹ï¼ˆå»æ‰è¡Œé¦–çš„<code>#</code>æ³¨é‡Šå¹¶è°ƒæ•´å€¼ï¼‰ï¼š</p>
<pre><code class="hljs language-init" lang="init"># å…è®¸rootç”¨æˆ·é€šè¿‡SSHç™»å½•ï¼ˆé»˜è®¤å¯èƒ½ä¸ºnoï¼ŒæŒ‰éœ€å¼€å¯ï¼‰
PermitRootLogin yes

# ä¿®æ”¹SSHé»˜è®¤ç«¯å£ï¼ˆå¯é€‰ï¼Œæé«˜å®‰å…¨æ€§ï¼Œå¦‚æ”¹ä¸º2222ï¼‰
# Port 2222

# å…è®¸å¯†ç ç™»å½•ï¼ˆé»˜è®¤å¼€å¯ï¼Œè‹¥éœ€ç¦ç”¨ä»…ç”¨å¯†é’¥ç™»å½•å¯è®¾ä¸ºnoï¼‰
PasswordAuthentication yes
</code></pre>
<p>ä¿®æ”¹å®Œæˆåä¿å­˜é€€å‡ºï¼ˆvi ç¼–è¾‘å™¨ï¼šæŒ‰<code>Esc</code>ï¼Œè¾“å…¥<code>:wq</code>å›è½¦ï¼‰ã€‚</p>
<h3 data-id="heading-3">4. å¯åŠ¨ SSH æœåŠ¡å¹¶è®¾ç½®å¼€æœºè‡ªå¯</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># é‡å¯SSHæœåŠ¡ï¼ˆé…ç½®ä¿®æ”¹åéœ€é‡å¯ç”Ÿæ•ˆï¼‰</span>
sudo systemctl restart sshd

<span class="hljs-comment"># è®¾ç½®å¼€æœºè‡ªå¯</span>
sudo systemctl <span class="hljs-built_in">enable</span> sshd
sudo systemctl <span class="hljs-built_in">enable</span> ssh.service

<span class="hljs-comment"># å†æ¬¡æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼Œç¡®è®¤è¿è¡Œæ­£å¸¸</span>
systemctl status sshd
</code></pre>
<p>æ­£å¸¸çŠ¶æ€ä¼šæ˜¾ç¤º<code>active (running)</code>ï¼Œç»¿è‰²å­—ä½“ã€‚
sudo systemctl enable sshd  æŠ¥é”™
Failed to enable unit: Refusing to operate on alias name or linked unit file: sshd.service
ä½¿ç”¨è¿™ä¸ªå‘½ä»¤  sudo systemctl enable ssh.service</p>
<h3 data-id="heading-4">5. é˜²ç«å¢™æ”¾è¡Œ SSH ç«¯å£</h3>
<p>éº’éºŸ V10 SP1 é»˜è®¤å¯ç”¨é˜²ç«å¢™ï¼Œéœ€æ”¾è¡Œ SSH ç«¯å£ï¼ˆé»˜è®¤ 22ï¼Œè‹¥ä¿®æ”¹äº†ç«¯å£åˆ™æ›¿æ¢ä¸ºè‡ªå®šä¹‰ç«¯å£ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ”¾è¡Œé»˜è®¤22ç«¯å£ï¼ˆæ°¸ä¹…ç”Ÿæ•ˆï¼‰</span>
sudo firewall-cmd --add-port=22/tcp --permanent

<span class="hljs-comment"># è‹¥ä¿®æ”¹äº†ç«¯å£ï¼ˆå¦‚2222ï¼‰ï¼Œåˆ™æ”¾è¡Œå¯¹åº”ç«¯å£</span>
<span class="hljs-comment"># sudo firewall-cmd --add-port=2222/tcp --permanent</span>

<span class="hljs-comment"># é‡æ–°åŠ è½½é˜²ç«å¢™è§„åˆ™</span>
sudo firewall-cmd --reload

<span class="hljs-comment"># éªŒè¯ç«¯å£æ˜¯å¦æ”¾è¡ŒæˆåŠŸ</span>
sudo firewall-cmd --list-ports
</code></pre>
<p>è¾“å‡ºä¸­èƒ½çœ‹åˆ°<code>22/tcp</code>ï¼ˆæˆ–è‡ªå®šä¹‰ç«¯å£ï¼‰ï¼Œè¯´æ˜æ”¾è¡ŒæˆåŠŸã€‚</p>
<h3 data-id="heading-5">6. éªŒè¯ SSH å®‰è£…æ˜¯å¦æˆåŠŸ</h3>
<h4 data-id="heading-6">æ–¹æ³• 1ï¼šæœ¬åœ°éªŒè¯</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æœ¬åœ°è¿æ¥æµ‹è¯•</span>
ssh localhost
</code></pre>
<p>è¾“å…¥å½“å‰ç”¨æˆ·å¯†ç åèƒ½ç™»å½•ï¼Œè¯´æ˜æœ¬åœ° SSH æ­£å¸¸ã€‚</p>
<h4 data-id="heading-7">æ–¹æ³• 2ï¼šè¿œç¨‹éªŒè¯</h4>
<p>ä»å¦ä¸€å°ç”µè„‘ï¼ˆå¦‚ Windows/macOSï¼‰é€šè¿‡ SSH å®¢æˆ·ç«¯è¿æ¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ ¼å¼ï¼šssh ç”¨æˆ·å@éº’éºŸç³»ç»ŸIPåœ°å€ -p ç«¯å£ï¼ˆé»˜è®¤22å¯çœç•¥ï¼‰</span>
ssh root@192.168.1.100  <span class="hljs-comment"># æ›¿æ¢ä¸ºä½ çš„ç”¨æˆ·åå’Œéº’éºŸç³»ç»ŸIP</span>
</code></pre>
<p>èƒ½æˆåŠŸç™»å½•å³è¯´æ˜ SSH æœåŠ¡é…ç½®å®Œæˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Linux-éº’éºŸç³»ç»Ÿå®‰è£…å†…ç½‘ç©¿é€å·¥å…·]]></title>    <link>https://juejin.cn/post/7593215107405938724</link>    <guid>https://juejin.cn/post/7593215107405938724</guid>    <pubDate>2026-01-10T03:51:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593215107405938724" data-draft-id="7593165280489455657" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Linux-éº’éºŸç³»ç»Ÿå®‰è£…å†…ç½‘ç©¿é€å·¥å…·"/> <meta itemprop="keywords" content="Linux,Apache Kylin"/> <meta itemprop="datePublished" content="2026-01-10T03:51:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="lzhang1689"/> <meta itemprop="url" content="https://juejin.cn/user/2963939077919255"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Linux-éº’éºŸç³»ç»Ÿå®‰è£…å†…ç½‘ç©¿é€å·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2963939077919255/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    lzhang1689
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T03:51:51.000Z" title="Sat Jan 10 2026 03:51:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>cpolar</strong>æ— éœ€å…¬ç½‘æœåŠ¡å™¨ï¼Œä¸€é”®å®‰è£…ï¼Œæ”¯æŒ HTTP/HTTPS/TCPï¼Œæœ‰å…è´¹ç‰ˆå¿«é€Ÿæµ‹è¯•ã€ä¸ªäººä½¿ç”¨ã€è¿œç¨‹ SSH / æ¡Œé¢</p>
<h3 data-id="heading-0">è¯¦ç»†å®‰è£…æ­¥éª¤</h3>
<h4 data-id="heading-1">æ–¹æ¡ˆ 1ï¼šcpolarï¼ˆæ¨èæ–°æ‰‹ï¼Œæ— éœ€å…¬ç½‘ IPï¼‰</h4>
<ol>
<li><strong>æ³¨å†Œè´¦å·</strong></li>
</ol>
<ul>
<li>è®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cpolar.com%2F" target="_blank" title="https://www.cpolar.com/" ref="nofollow noopener noreferrer">cpolar å®˜ç½‘</a>æ³¨å†Œï¼Œè·å–<strong>authtoken</strong></li>
</ul>
<ol start="2">
<li><strong>ä¸‹è½½å®‰è£…åŒ…</strong>ï¼ˆæ ¹æ®æ¶æ„é€‰æ‹©ï¼‰</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># x86_64æ¶æ„</span>
wget https://www.cpolar.com/static/downloads/cpolar-stable-linux-amd64.zip  
<span class="hljs-comment"># arm64æ¶æ„ï¼ˆé£è…¾/é²²é¹ï¼‰</span>
wget https://www.cpolar.com/static/downloads/cpolar-stable-linux-arm64.zip
</code></pre>
<ol start="2">
<li>
<p><strong>è§£å‹å¹¶å®‰è£…</strong></p>
<pre><code class="hljs language-bash" lang="bash">unzip cpolar-stable-linux-*.zip
sudo <span class="hljs-built_in">mv</span> cpolar /usr/local/bin/  <span class="hljs-comment"># åŠ å…¥ç³»ç»Ÿè·¯å¾„</span>
sudo <span class="hljs-built_in">chmod</span> +x /usr/local/bin/cpolar
</code></pre>
</li>
<li>
<p><strong>é…ç½®è®¤è¯</strong></p>
<pre><code class="hljs language-bash" lang="bash">sudo cpolar authtoken &lt;ä½ çš„authtoken&gt;  <span class="hljs-comment"># æ›¿æ¢ä¸ºå®˜ç½‘è·å–çš„ä»¤ç‰Œ</span>
sudo ./cpolar authtoken &lt;ä½ çš„authtoken&gt; 
</code></pre>
</li>
<li>
<p><strong>å¯åŠ¨ç©¿é€ç¤ºä¾‹ï¼ˆSSHï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash"/></pre>
</li>
</ol>
<h2 data-id="heading-2">æ˜ å°„æœ¬åœ°22ç«¯å£åˆ°å…¬ç½‘</h2>
<p>sudo cpolar tcp 22
sudo ./cpolar tcp 22</p>
<h2 data-id="heading-3">è¾“å‡ºç¤ºä¾‹ï¼štcp://xxx.cpolar.io:12345 -&gt; localhost:22</h2>
<pre><code class="hljs language-markdown" lang="markdown">
<span class="hljs-bullet">3.</span> <span class="hljs-strong">**è®¾ç½®å¼€æœºè‡ªå¯**</span>

<span class="hljs-code">```bash
 sudo systemctl enable cpolar
sudo systemctl start cpolar
</span></code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue 3 å“åº”å¼æ•°æ®è§£æ„ï¼štoRef ä¸ toRefs çš„æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7593145583348334634</link>    <guid>https://juejin.cn/post/7593145583348334634</guid>    <pubDate>2026-01-09T16:19:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593145583348334634" data-draft-id="7593165280489062441" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue 3 å“åº”å¼æ•°æ®è§£æ„ï¼štoRef ä¸ toRefs çš„æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,å‰ç«¯æ¡†æ¶"/> <meta itemprop="datePublished" content="2026-01-09T16:19:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿›å‡»çš„é‡äºº"/> <meta itemprop="url" content="https://juejin.cn/user/1458425238667008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue 3 å“åº”å¼æ•°æ®è§£æ„ï¼štoRef ä¸ toRefs çš„æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1458425238667008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿›å‡»çš„é‡äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T16:19:20.000Z" title="Fri Jan 09 2026 16:19:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>åœ¨ Vue 3 çš„ Composition API ä¸­ï¼Œå“åº”å¼æ•°æ®å¤„ç†æ˜¯æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ã€‚å½“æˆ‘ä»¬ä½¿ç”¨Â <code>reactive()</code>Â åˆ›å»ºå“åº”å¼å¯¹è±¡åï¼Œæœ‰æ—¶éœ€è¦å°†å…¶ä¸­çš„å±æ€§å•ç‹¬æå–å‡ºæ¥ä½¿ç”¨ã€‚Vue æä¾›äº†Â <code>toRef</code>Â å’ŒÂ <code>toRefs</code>Â è¿™ä¸¤ä¸ª API æ¥å¤„ç†è¿™ç§éœ€æ±‚ï¼Œå®ƒä»¬ä¸ä¼ ç»Ÿçš„æµ…æ‹·è´æœ‰ç€æœ¬è´¨åŒºåˆ«ã€‚</p>
<h2 data-id="heading-1">ä»£ç ç¤ºä¾‹è§£æ</h2>
<h3 data-id="heading-2">1. App.vueï¼šæ§åˆ¶ç»„ä»¶æ˜¾ç¤º</h3>
<p>vue</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"isShow = !isShow"</span>&gt;</span>åˆ‡æ¢æ˜¾ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">MyDemo</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"isShow"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>çˆ¶ç»„ä»¶é€šè¿‡Â <code>isShow</code>Â çŠ¶æ€æ§åˆ¶å­ç»„ä»¶Â <code>MyDemo</code>Â çš„æ˜¾ç¤ºä¸éšè—ã€‚</p>
<h3 data-id="heading-3">2. MyDemo.vueï¼šå“åº”å¼æ•°æ®å±•ç¤ºä¸æ“ä½œ</h3>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-php" lang="php">let person = <span class="hljs-title function_ invoke__">reactive</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>,
  <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,
  <span class="hljs-attr">job</span>: {
    <span class="hljs-attr">j1</span>: {
      <span class="hljs-attr">money</span>: <span class="hljs-string">'30k'</span>
    }
  }
})
</code></pre>
<p>åœ¨å­ç»„ä»¶ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåµŒå¥—çš„å“åº”å¼å¯¹è±¡Â <code>person</code>ã€‚å…³é”®éƒ¨åˆ†åœ¨äºè¿”å›è¯­å¥ï¼š</p>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-css" lang="css">return {
  person,
  money: <span class="hljs-built_in">toRef</span>(person.job.j1, <span class="hljs-string">'money'</span>),
  ...<span class="hljs-built_in">toRefs</span>(person)
}
</code></pre>
<h2 data-id="heading-4"><code>toRef</code>Â è¯¦è§£</h2>
<h3 data-id="heading-5">åŸºæœ¬è¯­æ³•ä¸ä½œç”¨</h3>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">name</span> = toRef(person, <span class="hljs-string">'name'</span>)
</code></pre>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šåˆ›å»ºä¸€ä¸ª ref å¯¹è±¡ï¼Œå…¶Â <code>value</code>Â å€¼æŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ä¸­çš„æŸä¸ªå±æ€§</li>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä¸åˆ›å»ºæ–°å¯¹è±¡ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªåŒ…è£…å™¨ï¼ˆwrapperï¼‰</li>
<li><strong>å½±å“</strong>ï¼šå¯¹æ–° ref çš„ä¿®æ”¹ä¼šç›´æ¥å½±å“åŸå¯¹è±¡</li>
</ul>
<h3 data-id="heading-6">å®é™…åº”ç”¨</h3>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-css" lang="css">money: <span class="hljs-built_in">toRef</span>(person.job.j1, <span class="hljs-string">'money'</span>)
</code></pre>
<p>è¿™é‡Œå°†åµŒå¥—å±æ€§Â <code>person.job.j1.money</code>Â è½¬æ¢ä¸º refï¼Œä½¿å¾—æ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨Â <code>{{ money }}</code>Â è€Œä¸éœ€è¦å†™å†—é•¿çš„Â <code>person.job.j1.money</code>ã€‚</p>
<h2 data-id="heading-7"><code>toRefs</code>Â è¯¦è§£</h2>
<h3 data-id="heading-8">æ‰¹é‡è½¬æ¢</h3>
<p>javascript</p>
<p>å¤åˆ¶ä¸‹è½½</p>
<pre><code class="hljs language-scss" lang="scss">..<span class="hljs-selector-class">.toRefs</span>(person)
</code></pre>
<ul>
<li><strong>ä½œç”¨</strong>ï¼šå°†å“åº”å¼å¯¹è±¡çš„æ‰€æœ‰å±æ€§éƒ½è½¬æ¢ä¸º ref å¯¹è±¡</li>
<li><strong>ç»“æœ</strong>ï¼š<code>name</code>Â å’ŒÂ <code>age</code>Â å±æ€§è¢«è§£æ„å‡ºæ¥ï¼Œå¯ä»¥åœ¨æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šç®€åŒ–æ¨¡æ¿ä¸­çš„è®¿é—®æ–¹å¼ï¼Œé¿å…é‡å¤å†™Â <code>person.</code>Â å‰ç¼€</li>
</ul>
<h2 data-id="heading-9">ä¸æµ…æ‹·è´çš„æœ¬è´¨åŒºåˆ«</h2>
<h3 data-id="heading-10">æµ…æ‹·è´çš„ç‰¹ç‚¹ï¼š</h3>
<ol>
<li><strong>åˆ›å»ºæ–°å¯¹è±¡</strong>ï¼šå¤åˆ¶åŸå¯¹è±¡çš„å±æ€§å€¼</li>
<li><strong>ç‹¬ç«‹ä¿®æ”¹</strong>ï¼šå¯¹æ–°å¯¹è±¡çš„ä¿®æ”¹ä¸ä¼šå½±å“åŸå¯¹è±¡</li>
<li><strong>å¼•ç”¨å¤åˆ¶</strong>ï¼šå¦‚æœå±æ€§å€¼æ˜¯å¼•ç”¨ç±»å‹ï¼Œåˆ™å¤åˆ¶çš„æ˜¯å¼•ç”¨ï¼ˆæŒ‡é’ˆï¼‰</li>
</ol>
<h3 data-id="heading-11"><code>toRef/toRefs</code>Â çš„ç‰¹ç‚¹ï¼š</h3>
<ol>
<li><strong>åŒ…è£…å™¨æ¨¡å¼</strong>ï¼šä¸åˆ›å»ºæ–°å¯¹è±¡ï¼Œè€Œæ˜¯åˆ›å»ºè®¿é—®åŸå±æ€§çš„é€šé“</li>
<li><strong>åŒå‘ç»‘å®š</strong>ï¼šå¯¹æ–° ref çš„ä¿®æ”¹ä¼šç›´æ¥å½±å“åŸå¯¹è±¡</li>
<li><strong>å“åº”å¼ä¿æŒ</strong>ï¼šä¿æŒå±æ€§çš„å“åº”å¼ç‰¹æ€§</li>
</ol>
<h2 data-id="heading-12">å®é™…æ•ˆæœæ¼”ç¤º</h2>
<p>åœ¨ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸‰ä¸ªæŒ‰é’®åˆ†åˆ«ä¿®æ”¹ä¸åŒçš„å±æ€§ï¼š</p>
<ol>
<li><strong>ä¿®æ”¹å§“å</strong>ï¼šé€šè¿‡Â <code>...toRefs(person)</code>Â è§£æ„å‡ºçš„Â <code>name</code>Â è¿›è¡Œä¿®æ”¹</li>
<li><strong>ä¿®æ”¹å¹´é¾„</strong>ï¼šåŒæ ·é€šè¿‡è§£æ„å‡ºçš„Â <code>age</code>Â è¿›è¡Œä¿®æ”¹</li>
<li><strong>ä¿®æ”¹è–ªèµ„</strong>ï¼šé€šè¿‡Â <code>toRef(person.job.j1, 'money')</code>Â åˆ›å»ºçš„Â <code>money</code>Â ref è¿›è¡Œä¿®æ”¹</li>
</ol>
<p>æ‰€æœ‰ä¿®æ”¹éƒ½ä¼šï¼š</p>
<ul>
<li>æ›´æ–°æ¨¡æ¿æ˜¾ç¤º</li>
<li>ä¿æŒå“åº”å¼ç‰¹æ€§</li>
<li>ç›´æ¥ä¿®æ”¹åŸÂ <code>person</code>Â å¯¹è±¡</li>
</ul>
<h2 data-id="heading-13">åº”ç”¨åœºæ™¯å»ºè®®</h2>
<h3 data-id="heading-14">ä½¿ç”¨Â <code>toRef</code>Â å½“ï¼š</h3>
<ul>
<li>åªéœ€è¦æå–å¯¹è±¡ä¸­çš„ä¸ªåˆ«å±æ€§</li>
<li>éœ€è¦æå–åµŒå¥—è¾ƒæ·±çš„å±æ€§</li>
<li>å¸Œæœ›ä¿æŒå±æ€§åæ¸…æ™°æ˜“è¯»</li>
</ul>
<h3 data-id="heading-15">ä½¿ç”¨Â <code>toRefs</code>Â å½“ï¼š</h3>
<ul>
<li>éœ€è¦è§£æ„æ•´ä¸ªå“åº”å¼å¯¹è±¡</li>
<li>åœ¨æ¨¡æ¿ä¸­é¢‘ç¹è®¿é—®å¯¹è±¡çš„å¤šä¸ªå±æ€§</li>
<li>å¸Œæœ›ç®€åŒ–æ¨¡æ¿ä¸­çš„å±æ€§è®¿é—®è·¯å¾„</li>
</ul>
<h2 data-id="heading-16">æ³¨æ„äº‹é¡¹</h2>
<ol>
<li><strong>ä¸èƒ½æ›¿ä»£è§£æ„</strong>ï¼š<code>toRefs</code>Â ä¸æ˜¯ç”¨äºæ™®é€šå¯¹è±¡è§£æ„ï¼Œè€Œæ˜¯ä¸“é—¨ç”¨äºå“åº”å¼å¯¹è±¡</li>
<li><strong>ä¿æŒå“åº”å¼</strong>ï¼šå³ä½¿è§£æ„åï¼Œå±æ€§ä»ç„¶ä¿æŒå“åº”å¼</li>
<li><strong>æ¨¡æ¿ç®€æ´</strong>ï¼šåœ¨æ¨¡æ¿ä¸­å¯ä»¥ç›´æ¥ä½¿ç”¨è§£æ„åçš„å±æ€§åï¼Œä½¿ä»£ç æ›´æ¸…æ™°</li>
</ol>
<h2 data-id="heading-17">æ€»ç»“</h2>
<p><code>toRef</code>Â å’ŒÂ <code>toRefs</code>Â æ˜¯ Vue 3 Composition API ä¸­å¤„ç†å“åº”å¼æ•°æ®è§£æ„çš„é‡è¦å·¥å…·ã€‚å®ƒä»¬ä¸æ˜¯ç®€å•çš„æ•°æ®æ‹·è´ï¼Œè€Œæ˜¯åˆ›å»ºäº†ä¸åŸå§‹æ•°æ®ä¿æŒè¿æ¥çš„å“åº”å¼å¼•ç”¨ã€‚è¿™ç§è®¾è®¡ä½¿å¾—æˆ‘ä»¬æ—¢èƒ½äº«å—è§£æ„å¸¦æ¥çš„ä»£ç ç®€æ´æ€§ï¼Œåˆèƒ½ä¿æŒ Vue çš„å“åº”å¼ç‰¹æ€§ï¼Œæ˜¯å¤§å‹ Vue åº”ç”¨å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚</p>
<p>é€šè¿‡åˆç†ä½¿ç”¨è¿™ä¸¤ä¸ª APIï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºæ›´æ¸…æ™°ã€æ›´æ˜“ç»´æŠ¤çš„ Vue 3 ç»„ä»¶ä»£ç ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤æ‚çŠ¶æ€é€»è¾‘æ—¶ï¼Œå®ƒä»¬èƒ½æ˜¾è‘—æå‡å¼€å‘ä½“éªŒå’Œä»£ç è´¨é‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CSS ä½œç”¨åŸŸéš”ç¦»å®æˆ˜ï¼šReactã€Vue ä¸ Styled Components çš„ä¸‰ç§èŒƒå¼]]></title>    <link>https://juejin.cn/post/7593169840200433690</link>    <guid>https://juejin.cn/post/7593169840200433690</guid>    <pubDate>2026-01-09T16:26:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593169840200433690" data-draft-id="7593077945016942619" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CSS ä½œç”¨åŸŸéš”ç¦»å®æˆ˜ï¼šReactã€Vue ä¸ Styled Components çš„ä¸‰ç§èŒƒå¼"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-09T16:26:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ohyeah"/> <meta itemprop="url" content="https://juejin.cn/user/740446536480618"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CSS ä½œç”¨åŸŸéš”ç¦»å®æˆ˜ï¼šReactã€Vue ä¸ Styled Components çš„ä¸‰ç§èŒƒå¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/740446536480618/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ohyeah
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T16:26:22.000Z" title="Fri Jan 09 2026 16:26:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£å‰ç«¯å¼€å‘ä¸­ï¼Œç»„ä»¶åŒ–å·²æˆä¸ºæ„å»ºå¤§å‹åº”ç”¨çš„æ ‡å‡†å®è·µã€‚ç„¶è€Œï¼ŒCSS ä½œä¸ºä¸€é—¨â€œå…¨å±€æ€§â€è¯­è¨€ï¼Œå…¶å¤©ç„¶ç¼ºä¹ä½œç”¨åŸŸçš„æ¦‚å¿µï¼Œå¸¸å¸¸å¯¼è‡´æ ·å¼å†²çªã€æ±¡æŸ“å’Œç»´æŠ¤å›°éš¾ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œä¸»æµæ¡†æ¶å’Œå·¥å…·é“¾æä¾›äº†å¤šç§ CSS ä½œç”¨åŸŸéš”ç¦»æ–¹æ¡ˆã€‚æœ¬æ–‡å°†é€šè¿‡ä¸‰ä¸ªå…¸å‹ç¤ºä¾‹â€”â€”React ä¸­çš„ CSS Modulesã€Vue ä¸­çš„ scoped æ ·å¼ï¼Œä»¥åŠ React ç”Ÿæ€ä¸­çš„ Styled Componentsâ€”â€”æ·±å…¥å‰–æå®ƒä»¬å„è‡ªçš„å®ç°åŸç†ã€ä½¿ç”¨æ–¹å¼ä¸æ ¸å¿ƒå·®å¼‚ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨ä¸åŒæŠ€æœ¯æ ˆä¸­åšå‡ºåˆç†é€‰æ‹©ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€React ä¸­çš„ CSS Modulesï¼šç¼–è¯‘æ—¶ç”Ÿæˆå”¯ä¸€ç±»å</h2>
<p>åœ¨ React é¡¹ç›®ä¸­ï¼Œæ ·å¼æ–‡ä»¶é€šå¸¸ä¸ç»„ä»¶é€»è¾‘åˆ†ç¦»ã€‚è‹¥ç›´æ¥ä½¿ç”¨æ™®é€š CSS æ–‡ä»¶ï¼ˆå¦‚ <code>Button.css</code>ï¼‰ï¼Œæ‰€æœ‰ç±»åéƒ½ä¼šè¢«æ³¨å…¥å…¨å±€æ ·å¼è¡¨ï¼Œææ˜“é€ æˆå‘½åå†²çªã€‚ä¾‹å¦‚ï¼Œä¸¤ä¸ªç»„ä»¶éƒ½å®šä¹‰äº† <code>.button</code> ç±»ï¼ŒååŠ è½½çš„æ ·å¼ä¼šè¦†ç›–å‰è€…ã€‚</p>
<h3 data-id="heading-1">1. å¯ç”¨ CSS Modules</h3>
<p>Reactï¼ˆé…åˆ Viteã€Webpack ç­‰æ„å»ºå·¥å…·ï¼‰é€šè¿‡ <strong>CSS Modules</strong> æœºåˆ¶è§£å†³æ­¤é—®é¢˜ã€‚å…³é”®åœ¨äºæ–‡ä»¶å‘½åï¼š<strong>åªæœ‰ä»¥ <code>.module.css</code> ç»“å°¾çš„æ–‡ä»¶æ‰ä¼šè¢«è¯†åˆ«ä¸º CSS Module</strong>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/components/Button.jsx</span>
<span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">'./Button.module.css'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.txt}</span>&gt;</span>ä½ å¥½ä¸–ç•Œ<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.button}</span>&gt;</span>My Button<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<p>å¯¹åº”çš„æ ·å¼æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* src/components/Button.module.css */</span>
<span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">background-color</span>: blue;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
}

<span class="hljs-selector-class">.txt</span> {
  <span class="hljs-attribute">color</span>: red;
  <span class="hljs-attribute">background-color</span>: orange;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">30px</span>;
}
</code></pre>
<h3 data-id="heading-2">2. ç¼–è¯‘è¿‡ç¨‹ä¸ä½œç”¨åŸŸå®ç°</h3>
<p>å½“æ„å»ºå·¥å…·ï¼ˆå¦‚ Viteï¼‰é‡åˆ° <code>*.module.css</code> æ–‡ä»¶æ—¶ï¼Œä¼šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</p>
<ol>
<li><strong>è¯†åˆ«æ–‡ä»¶ç±»å‹</strong>ï¼šæ£€æµ‹åˆ° <code>.module.css</code> åç¼€ï¼Œå¯ç”¨ CSS Modules å¤„ç†å™¨ã€‚</li>
<li><strong>ç”Ÿæˆå“ˆå¸Œç±»å</strong>ï¼šä¸ºæ¯ä¸ªåŸå§‹ç±»åç”Ÿæˆä¸€ä¸ªå…¨å±€å”¯ä¸€çš„å“ˆå¸Œå€¼ï¼Œæ ¼å¼é€šå¸¸ä¸º <code>[æ–‡ä»¶å]_[ç±»å]_[å“ˆå¸Œ]</code>ï¼Œä¾‹å¦‚ <code>_button_mjohd_1</code>ã€‚</li>
<li><strong>å¯¼å‡º JS å¯¹è±¡</strong>ï¼šå°†åŸå§‹ç±»åä½œä¸º keyï¼Œå“ˆå¸Œç±»åä½œä¸º valueï¼Œæ‰“åŒ…æˆä¸€ä¸ª JavaScript æ¨¡å—ï¼š</li>
</ol>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// æ„å»ºåç”Ÿæˆçš„ JS æ¨¡å—ç¤ºæ„</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  button: <span class="hljs-string">'Button_button_mjohd_1'</span>,
  txt: <span class="hljs-string">'Button_txt_mjohd_6'</span>
};
</code></pre>
<ol start="4">
<li><strong>ç»„ä»¶ä¸­ä½¿ç”¨</strong>ï¼šé€šè¿‡ <code>styles.button</code> è®¿é—®è¯¥å”¯ä¸€å­—ç¬¦ä¸²ï¼Œå¹¶èµ‹ç»™ <code>className</code>ã€‚</li>
</ol>
<h3 data-id="heading-3">3. éš”ç¦»æ•ˆæœéªŒè¯</h3>
<p>å†çœ‹å¦ä¸€ä¸ªç»„ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/components/AnotherButton.jsx</span>
<span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">'./AnotherButton.module.css'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">AnotherButton</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.button}</span>&gt;</span>My Another Button<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;
}
</code></pre>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* src/components/AnotherButton.module.css */</span>
<span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">background-color</span>: red;
  <span class="hljs-attribute">color</span>: black;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
}
</code></pre>
<p>å°½ç®¡ä¸¤ä¸ªç»„ä»¶éƒ½ä½¿ç”¨äº† <code>.button</code> ç±»åï¼Œä½†æ„å»ºåå®é™…ç”Ÿæˆçš„ DOM ç±»åå®Œå…¨ä¸åŒï¼ˆå¦‚ <code>_button_mjohd_1</code> ä¸ <code>_button_1gqj7_1</code>ï¼‰ï¼Œå½¼æ­¤å®Œå…¨éš”ç¦»ï¼Œäº’ä¸å½±å“ã€‚</p>
<blockquote>
<p><strong>ä¼˜åŠ¿</strong>ï¼šç¼–è¯‘æ—¶å¤„ç†ï¼Œæ€§èƒ½å¼€é”€ä½ï¼›ä¿ç•™äº†ä¼ ç»Ÿ CSS çš„ä¹¦å†™ä¹ æƒ¯ï¼›é€‚åˆå¤§å‹å›¢é˜Ÿåä½œï¼Œé¿å…å‘½åå†²çªã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-4">äºŒã€Vue ä¸­çš„ Scoped Stylesï¼šåŸºäºå±æ€§é€‰æ‹©å™¨çš„ä½œç”¨åŸŸ</h2>
<p>Vue é‡‡ç”¨äº†ä¸€ç§æ›´å£°æ˜å¼çš„æ–¹å¼å®ç°æ ·å¼éš”ç¦»â€”â€”<code>&lt;style scoped&gt;</code>ã€‚</p>
<h3 data-id="heading-5">1. åŸºæœ¬ç”¨æ³•</h3>
<p>åœ¨å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰ä¸­ï¼Œåªéœ€åœ¨ <code>&lt;style&gt;</code> æ ‡ç­¾ä¸Šæ·»åŠ  <code>scoped</code> å±æ€§ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- src/App.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"txt"</span>&gt;</span>Hello world in App<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">HelloWorld</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.txt</span> {
  <span class="hljs-attribute">color</span>: red;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>å­ç»„ä»¶åŒæ ·å¯ç‹¬ç«‹ä½¿ç”¨ scopedï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- src/components/HelloWorld.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"txt"</span>&gt;</span>ä½ å¥½ ä¸–ç•Œ!!!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.txt</span> {
  <span class="hljs-attribute">color</span>: blue;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h3 data-id="heading-6">2. ç¼–è¯‘åŸç†ï¼šå±æ€§é€‰æ‹©å™¨ + å”¯ä¸€ ID</h3>
<p>Vue åœ¨ç¼–è¯‘é˜¶æ®µå®Œæˆä»¥ä¸‹æ“ä½œï¼š</p>
<ol>
<li><strong>ç”Ÿæˆå”¯ä¸€ ID</strong>ï¼šä¸ºæ¯ä¸ªç»„ä»¶åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ hash IDï¼Œå¦‚ <code>data-v-7a7a37b1</code>ã€‚</li>
<li><strong>é‡å†™æ¨¡æ¿å…ƒç´ </strong>ï¼šåœ¨å½“å‰ç»„ä»¶çš„æ‰€æœ‰ DOM å…ƒç´ ä¸Šè‡ªåŠ¨æ·»åŠ è¯¥å±æ€§ï¼š</li>
</ol>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- App.vue ç¼–è¯‘å --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"txt"</span> <span class="hljs-attr">data-v-7a7a37b1</span>&gt;</span>Hello world in App<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

<span class="hljs-comment">&lt;!-- HelloWorld.vue ç¼–è¯‘å --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"txt"</span> <span class="hljs-attr">data-v-9d8e7f6a</span>&gt;</span>ä½ å¥½ ä¸–ç•Œ!!!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
</code></pre>
<ol start="3">
<li><strong>é‡å†™ CSS é€‰æ‹©å™¨</strong>ï¼šå°†æ‰€æœ‰ scoped æ ·å¼è§„åˆ™è½¬æ¢ä¸ºå±æ€§é€‰æ‹©å™¨ï¼š</li>
</ol>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åŸå§‹ */</span>
<span class="hljs-selector-class">.txt</span> { <span class="hljs-attribute">color</span>: red; }

<span class="hljs-comment">/* ç¼–è¯‘å */</span>
<span class="hljs-selector-class">.txt</span><span class="hljs-selector-attr">[data-v-7a7a37b1]</span> { <span class="hljs-attribute">color</span>: red; }
</code></pre>
<h3 data-id="heading-7">3. ä½œç”¨åŸŸè¾¹ç•Œæ¸…æ™°</h3>
<p>ç”±äºçˆ¶ç»„ä»¶çš„å…ƒç´ å¸¦æœ‰ <code>data-v-f3a1b2c3</code>ï¼Œè€Œå­ç»„ä»¶å¸¦æœ‰ <code>data-v-9d8e7f6a</code>ï¼Œ<strong>çˆ¶ç»„ä»¶çš„ scoped æ ·å¼æ— æ³•åŒ¹é…å­ç»„ä»¶çš„å…ƒç´ </strong>ã€‚è¿™å¤©ç„¶å®ç°äº†â€œæ ·å¼ä¸ç©¿é€â€çš„éš”ç¦»ç­–ç•¥ã€‚</p>
<blockquote>
<p><strong>ä¼˜åŠ¿</strong>ï¼šæ— éœ€æ”¹å˜ CSS ä¹¦å†™ä¹ æƒ¯ï¼›ç¼–è¯‘æ—¶å®Œæˆï¼Œæ— è¿è¡Œæ—¶å¼€é”€ï¼›çˆ¶å­ç»„ä»¶æ ·å¼å¤©ç„¶éš”ç¦»ï¼Œç¬¦åˆç»„ä»¶å°è£…æ€æƒ³ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">ä¸‰ã€Styled Componentsï¼šè¿è¡Œæ—¶åŠ¨æ€æ³¨å…¥çš„ CSS-in-JS</h2>
<p>Styled Components æ˜¯ React ç”Ÿæ€ä¸­æµè¡Œçš„ CSS-in-JS åº“ï¼Œå®ƒå°†æ ·å¼ç›´æ¥åµŒå…¥ JavaScriptï¼Œå®ç°â€œæ ·å¼å³ç»„ä»¶â€ã€‚</p>
<h3 data-id="heading-9">1. åŸºæœ¬ä½¿ç”¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/App.jsx</span>
<span class="hljs-keyword">import</span> styled <span class="hljs-keyword">from</span> <span class="hljs-string">'styled-components'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">Button</span> = styled.<span class="hljs-property">button</span><span class="hljs-string">`
  background: <span class="hljs-subst">${props =&gt; props.primary ? <span class="hljs-string">'blue'</span> : <span class="hljs-string">'white'</span>}</span>;
  color: <span class="hljs-subst">${props =&gt; props.primary ? <span class="hljs-string">'white'</span> : <span class="hljs-string">'blue'</span>}</span>;
  border: 1px solid blue;
  padding: 8px 16px;
  border-radius: 4px;
`</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>&gt;</span>é»˜è®¤æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">primary</span>&gt;</span>ä¸»è¦æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>;
</code></pre>
<h3 data-id="heading-10">2. è¿è¡Œæ—¶æœºåˆ¶ï¼šåŠ¨æ€ç”Ÿæˆç±»åä¸ <code>&lt;style&gt;</code> æ ‡ç­¾</h3>
<p>Styled Components çš„å·¥ä½œæµç¨‹å‘ç”Ÿåœ¨<strong>è¿è¡Œæ—¶</strong>ï¼š</p>
<ol>
<li><strong>åˆ›å»ºå”¯ä¸€ç±»å</strong>ï¼šæ¯æ¬¡å®šä¹‰ä¸€ä¸ª styled ç»„ä»¶ï¼Œåº“ä¼šç”Ÿæˆä¸€ä¸ªå”¯ä¸€å“ˆå¸Œç±»åï¼ˆå¦‚ <code>sc-a1b2c3</code>ï¼‰ã€‚</li>
<li><strong>åŠ¨æ€æ³¨å…¥ CSS</strong>ï¼šå°†ç»„ä»¶çš„æ ·å¼è§„åˆ™æ’å…¥ <code>&lt;head&gt;</code> ä¸­çš„ <code>&lt;style&gt;</code> æ ‡ç­¾ã€‚</li>
<li><strong>æ ¹æ® props ç”Ÿæˆå˜ä½“</strong>ï¼šè‹¥ç»„ä»¶æ¥æ”¶ä¸åŒ propsï¼ˆå¦‚ <code>primary</code>ï¼‰ï¼Œä¼šä¸ºæ¯ç§ç»„åˆç”Ÿæˆæ–°çš„ç±»åå’Œ CSS è§„åˆ™ã€‚</li>
</ol>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- æ¸²æŸ“ç»“æœ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sc-a1b2c3"</span>&gt;</span>é»˜è®¤æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sc-d4e5f6"</span>&gt;</span>ä¸»è¦æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p>å¯¹åº”çš„ CSSï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.sc-a1b2c3</span> {
  <span class="hljs-attribute">background</span>: white;
  <span class="hljs-attribute">color</span>: blue;
  <span class="hljs-comment">/* ... */</span>
}

<span class="hljs-selector-class">.sc-d4e5f6</span> {
  <span class="hljs-attribute">background</span>: blue;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-comment">/* ... */</span>
}
</code></pre>
<h3 data-id="heading-11">3. æ ¸å¿ƒä¼˜åŠ¿ï¼šåŠ¨æ€æ ·å¼ä¸è‡ªåŠ¨éš”ç¦»</h3>
<ul>
<li><strong>Props é©±åŠ¨æ ·å¼</strong>ï¼šæ— éœ€æ‰‹åŠ¨ç®¡ç†å¤šä¸ªç±»åï¼Œæ ·å¼é€»è¾‘ç›´æ¥å†…èšåœ¨ç»„ä»¶ä¸­ã€‚</li>
<li><strong>è‡ªåŠ¨ä½œç”¨åŸŸ</strong>ï¼šæ¯ä¸ªç»„ä»¶æ‹¥æœ‰å”¯ä¸€ç±»åï¼Œå½»åº•é¿å…å†²çªã€‚</li>
<li><strong>ä¸»é¢˜æ”¯æŒ</strong>ï¼šå¯è½»æ¾é›†æˆä¸»é¢˜ç³»ç»Ÿï¼Œå®ç°å…¨å±€æ ·å¼åˆ‡æ¢ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-12">ç»“è¯­</h2>
<p>CSS ä½œç”¨åŸŸéš”ç¦»æ˜¯ç°ä»£å‰ç«¯å·¥ç¨‹åŒ–çš„åŸºçŸ³ã€‚æ— è®ºæ˜¯ React çš„ CSS Modulesã€Vue çš„ scoped æ ·å¼ï¼Œè¿˜æ˜¯ Styled Components çš„ CSS-in-JS èŒƒå¼ï¼Œå®ƒä»¬éƒ½ä»ä¸åŒè§’åº¦è§£å†³äº†â€œæ ·å¼æ±¡æŸ“â€è¿™ä¸€å†å²æ€§éš¾é¢˜ã€‚</p>
<ul>
<li>è‹¥ä½ åå¥½ä¼ ç»Ÿ CSS ä¸”é‡è§†æ€§èƒ½ï¼Œ<strong>CSS Modules æˆ– scoped styles æ˜¯é¦–é€‰</strong>ï¼›</li>
<li>è‹¥ä½ éœ€è¦æ ¹æ®çŠ¶æ€åŠ¨æ€è°ƒæ•´æ ·å¼ï¼Œä¸”æ„¿æ„æ¥å—è¿è¡Œæ—¶æˆæœ¬ï¼Œ<strong>Styled Components æä¾›äº†æè‡´çš„è¡¨è¾¾åŠ›</strong>ã€‚</li>
</ul>
<p>ç†è§£è¿™äº›æ–¹æ¡ˆèƒŒåçš„åŸç†ï¼Œä¸ä»…èƒ½å¸®åŠ©æˆ‘ä»¬å†™å‡ºæ›´å¥å£®çš„ä»£ç ï¼Œä¹Ÿèƒ½åœ¨æŠ€æœ¯é€‰å‹æ—¶åšå‡ºæ›´æ˜æ™ºçš„å†³ç­–ã€‚åœ¨ç»„ä»¶åŒ–å¼€å‘çš„æ—¶ä»£ï¼Œè®©æ ·å¼çœŸæ­£æˆä¸ºç»„ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œè€Œéå…¨å±€çš„â€œå¹½çµâ€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ¨ CSS è¿™ç§â€œçƒ‚å¤§è¡—â€çš„æŠ€æœ¯ï¼Œæ€ä¹ˆåœ¨ React å’Œ Vue é‡Œç©å‡ºèŠ±æ¥ï¼Ÿâ€”â€” æ¨¡å—åŒ– CSS æ·±åº¦é¿å‘æŒ‡å—]]></title>    <link>https://juejin.cn/post/7593187953272193024</link>    <guid>https://juejin.cn/post/7593187953272193024</guid>    <pubDate>2026-01-09T17:32:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593187953272193024" data-draft-id="7593240931286417460" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ¨ CSS è¿™ç§â€œçƒ‚å¤§è¡—â€çš„æŠ€æœ¯ï¼Œæ€ä¹ˆåœ¨ React å’Œ Vue é‡Œç©å‡ºèŠ±æ¥ï¼Ÿâ€”â€” æ¨¡å—åŒ– CSS æ·±åº¦é¿å‘æŒ‡å—"/> <meta itemprop="keywords" content="React.js,Vue.js,CSS"/> <meta itemprop="datePublished" content="2026-01-09T17:32:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥ç§˜çš„çŒªå¤´"/> <meta itemprop="url" content="https://juejin.cn/user/793223472877051"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ¨ CSS è¿™ç§â€œçƒ‚å¤§è¡—â€çš„æŠ€æœ¯ï¼Œæ€ä¹ˆåœ¨ React å’Œ Vue é‡Œç©å‡ºèŠ±æ¥ï¼Ÿâ€”â€” æ¨¡å—åŒ– CSS æ·±åº¦é¿å‘æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/793223472877051/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥ç§˜çš„çŒªå¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T17:32:39.000Z" title="Fri Jan 09 2026 17:32:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ’¡ <strong>å†™åœ¨å‰é¢</strong>ï¼š
ä½œä¸ºä¸€ä¸ªå‰ç«¯è€å¸æœºï¼Œä½ ä¸€å®šé‡åˆ°è¿‡è¿™ç§åœºæ™¯ï¼šä½ è¾›è¾›è‹¦è‹¦å†™å¥½äº†ä¸€ä¸ªç²¾ç¾çš„æŒ‰é’®æ ·å¼ï¼Œç»“æœåŒäº‹å°ç‹åˆå¹¶ä»£ç åï¼Œä½ çš„æŒ‰é’®çªç„¶å˜æˆäº†â€œæ€é©¬ç‰¹â€é£æ ¼ã€‚ä½ æ€’æ°”å†²å†²åœ°æŸ¥ä»£ç ï¼Œå‘ç°åŸæ¥æ˜¯ä½ ä¿©ç”¨äº†åŒä¸€ä¸ªç±»å <code>.button</code>ï¼Œè€Œ CSS è¿™ç©æ„å„¿é»˜è®¤æ˜¯<strong>å…¨å±€ç”Ÿæ•ˆ</strong>çš„ï¼Œè°ååŠ è½½è°è¯´äº†ç®—ã€‚</p>
<p>åˆ«æ…Œï¼Œä»Šå¤©å’±ä»¬å°±æ¥èŠèŠåœ¨ç°ä»£å‰ç«¯æ¡†æ¶ä¸­ï¼Œå¦‚ä½•ä¼˜é›…åœ°è§£å†³â€œCSS æ‰“æ¶â€çš„é—®é¢˜ã€‚æˆ‘ä»¬å°†æ·±å…¥ React å’Œ Vue çš„æºç çº§å®ç°ï¼Œçœ‹çœ‹å®ƒä»¬æ˜¯å¦‚ä½•æŠŠ CSS å…³è¿›â€œå°é»‘å±‹â€ï¼ˆæ¨¡å—åŒ–ï¼‰çš„ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸ’¥ ç¬¬ä¸€ç« ï¼šå¤§å‹â€œè½¦ç¥¸â€ç°åœº â€”â€” ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦æ¨¡å—åŒ–ï¼Ÿ</h2>
<p>åœ¨æ²¡æœ‰æ¨¡å—åŒ– CSS ä¹‹å‰ï¼Œæˆ‘ä»¬å†™ä»£ç æ˜¯è¿™æ ·çš„ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬åœ¨åšä¸€ä¸ªç”µå•†é¡¹ç›®ï¼Œè¿™é‡Œæœ‰ä¸¤ä¸ªç»„ä»¶ï¼š<code>Button</code>ï¼ˆé€šç”¨æŒ‰é’®ï¼‰å’Œ <code>AnotherButton</code>ï¼ˆå¦ä¸€ä¸ªç‰¹æ®ŠæŒ‰é’®ï¼‰ã€‚</p>
<h3 data-id="heading-1">1.1 è¿˜åŸæ¡ˆå‘ç°åœº</h3>
<p>æˆ‘ä»¬å…ˆçœ‹çœ‹<strong>å¦‚æœä¸ä½¿ç”¨æ¨¡å—åŒ–</strong>ï¼Œä»£ç ä¼šé•¿ä»€ä¹ˆæ ·ã€‚</p>
<p><strong>ğŸ“„ Button.css</strong> (æ™®é€š CSS æ–‡ä»¶)</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä½ çš„é€šç”¨æŒ‰é’®æ˜¯è“è‰²çš„ */</span>
<span class="hljs-selector-class">.button</span> {
    <span class="hljs-attribute">background-color</span>: blue;
    <span class="hljs-attribute">color</span>: white;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
}
</code></pre>
<p><strong>ğŸ“„ AnotherButton.css</strong> (åŒäº‹å°ç‹çš„æŒ‰é’®æ ·å¼)</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å°ç‹çš„æŒ‰é’®æ˜¯çº¢è‰²çš„ */</span>
<span class="hljs-selector-class">.button</span> {
    <span class="hljs-attribute">background-color</span>: red; <span class="hljs-comment">/* âš ï¸ å±é™©ï¼åŒæ ·çš„ç±»åï¼ */</span>
    <span class="hljs-attribute">color</span>: black;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
}
</code></pre>
<p><strong>ğŸ“„ App.jsx</strong> (ç»„ä»¶å¼•å…¥)</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-string">'./Button.css'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'./AnotherButton.css'</span>; <span class="hljs-comment">// ğŸ‘ˆ æ³¨æ„è¿™é‡Œçš„å¼•å…¥é¡ºåº</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      {/* ä½ åŸæœ¬æœŸæœ›å®ƒæ˜¯è“è‰²çš„ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"button"</span>&gt;</span>æˆ‘çš„é€šç”¨æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> 
      
      {/* å°ç‹æœŸæœ›å®ƒæ˜¯çº¢è‰²çš„ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"button"</span>&gt;</span>å°ç‹çš„ç‰¹æ®ŠæŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-2">1.2 å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h3>
<p>å½“ä½ è¿è¡Œè¿™æ®µä»£ç æ—¶ï¼Œä½ ä¼šå‘ç°<strong>ä¸¤ä¸ªæŒ‰é’®éƒ½å˜æˆäº†çº¢è‰²</strong>ï¼ğŸ”´ğŸ”´</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸º <strong>CSS æ˜¯æ²¡æœ‰ä½œç”¨åŸŸï¼ˆScopeï¼‰çš„</strong>ã€‚
ä¸ç®¡ä½ æŠŠ CSS æ–‡ä»¶æ‹†å¾—å¤šä¹ˆç»†ï¼Œåªè¦åœ¨é¡µé¢ä¸­è¢«å¼•å…¥ï¼Œå®ƒä»¬æœ€ç»ˆéƒ½ä¼šè¢«â€œæ‹å¹³â€æ”¾åˆ°åŒä¸€ä¸ªå…¨å±€ç¯å¢ƒé‡Œã€‚å› ä¸º <code>AnotherButton.css</code> åå¼•å…¥ï¼Œå®ƒçš„ <code>.button</code> æ ·å¼å±‚å ï¼ˆOverrideï¼‰æ‰äº†å‰é¢çš„ã€‚</p>
<p>è¿™å°±æ˜¯è‘—åçš„ <strong>å…¨å±€å‘½åç©ºé—´æ±¡æŸ“</strong>ã€‚åœ¨å¤šäººåä½œçš„å¤§å‹é¡¹ç›®ä¸­ï¼Œæƒ³è¦æƒ³å‡ºä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ class åç®€ç›´æ¯”ç»™å­©å­å–åè¿˜éš¾ã€‚</p>
<h3 data-id="heading-3">1.3 åŸå§‹äººçš„è‡ªæ•‘ï¼šBEM å‘½åæ³•</h3>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»¥å‰æˆ‘ä»¬å‘æ˜äº† BEMï¼ˆBlock Element Modifierï¼‰å‘½åæ³•ï¼Œæ¯”å¦‚æŠŠç±»åå†™æˆè¿™æ ·ï¼š
<code>.article__button--primary</code></p>
<p>æˆ–è€…ç²—æš´åœ°åœ¨ç»„ä»¶å¤–å±‚å¥—ä¸€ä¸ª ID æˆ–å”¯ä¸€çš„ classï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.my-component-wrapper</span> <span class="hljs-selector-class">.button</span> { ... }
</code></pre>
<p>ä½†è¿™æ²»æ ‡ä¸æ²»æœ¬ï¼Œä»£ç å˜å¾—åˆé•¿åˆè‡­ï¼Œç»´æŠ¤èµ·æ¥æå…¶ç—›è‹¦ã€‚æˆ‘ä»¬éœ€è¦ä¸€ç§æœºåˆ¶ï¼Œèƒ½è‡ªåŠ¨å¸®æˆ‘ä»¬éš”ç¦»æ ·å¼ï¼Œå°±åƒ JS çš„é—­åŒ…ä¸€æ ·ã€‚</p>
<hr/>
<h2 data-id="heading-4">ğŸ›¡ï¸ ç¬¬äºŒç« ï¼šReact çš„â€œæŠ¤åŸæ²³â€ â€”â€” CSS Modules</h2>
<p>React ç¤¾åŒºç»™å‡ºçš„ç¬¬ä¸€ä¸ªå¼ºåŠ›ç­”æ¡ˆå°±æ˜¯ï¼š<strong>CSS Modules</strong>ã€‚</p>
<p>å®ƒçš„æ ¸å¿ƒæ€æƒ³å¾ˆç®€å•ï¼š<strong>æ—¢ç„¶äººæƒ³ä¸å‡ºå”¯ä¸€çš„ç±»åï¼Œé‚£å°±è®©æœºå™¨æ¥æƒ³ï¼</strong></p>
<h3 data-id="heading-5">2.1 æ”¹é€ ä»£ç </h3>
<p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹åœ¨ React ä¸­å¦‚ä½•ä½¿ç”¨ CSS Modulesã€‚é¦–å…ˆï¼Œä½ éœ€è¦æŠŠæ–‡ä»¶åä» <code>xxx.css</code> æ”¹ä¸º <code>xxx.module.css</code>ã€‚è¿™å‘Šè¯‰æ„å»ºå·¥å…·ï¼ˆå¦‚ Vite æˆ– Webpackï¼‰ï¼š<strong>â€œå˜¿ï¼Œè¿™ä¸ªæ–‡ä»¶æˆ‘è¦å¼€å¯æ¨¡å—åŒ–ç¼–è¯‘æ¨¡å¼ï¼â€</strong></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä»£ç å®Œå…¨ä¸ç”¨å˜ï¼Œè¿˜æ˜¯å†™ä½ å–œæ¬¢çš„ç®€å•ç±»å */</span>
<span class="hljs-selector-class">.button</span> {
    <span class="hljs-attribute">background-color</span>: blue;
    <span class="hljs-attribute">color</span>: white;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
}
<span class="hljs-selector-class">.txt</span> {
    <span class="hljs-attribute">color</span>: red;
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">30px</span>;
}
</code></pre>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// 1ï¸âƒ£ å¯¼å…¥æ–¹å¼å˜äº†ï¼</span>
<span class="hljs-comment">// ä»¥å‰æ˜¯ import './Button.css'</span>
<span class="hljs-comment">// ç°åœ¨å¯¼å…¥çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ styles</span>
<span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">'./Button.module.css'</span> 

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç¼–è¯‘åçš„Styleså¯¹è±¡:'</span>, styles); 
<span class="hljs-comment">// ğŸ‘‡ å’±ä»¬ä¸€ä¼šæ¥çœ‹çœ‹è¿™ä¸ªå¯¹è±¡é‡Œæ˜¯å•¥</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
    {/* 2ï¸âƒ£ ä½¿ç”¨æ–¹å¼å˜äº†ï¼ */}
    {/* ä¸å†å†™æ­»å­—ç¬¦ä¸² "txt"ï¼Œè€Œæ˜¯ç”¨ styles.txt */}
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.txt}</span>&gt;</span>ä½ å¥½ï¼Œä¸–ç•Œï¼ï¼ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.button}</span>&gt;</span>  
      My Button
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-6">2.2 å¹•åçš„é­”æ³•ï¼šå“ˆå¸Œï¼ˆHashï¼‰</h3>
<p>å½“ä½ è¿è¡Œä¸Šé¢çš„ä»£ç æ—¶ï¼Œæ‰“å¼€æµè§ˆå™¨çš„æ§åˆ¶å°ï¼Œä½ ä¼šçœ‹åˆ° <code>styles</code> å¯¹è±¡æ‰“å°å‡ºæ¥æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/387cd515cd4d44ca9a3fb5eb012afc30~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We56eY55qE54yq5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768584758&amp;x-signature=0zgajt8mS5atUaKMlBIqDGjYFF0%3D" alt="image.png" loading="lazy"/></p>
<p>è€Œåœ¨ HTML DOM ç»“æ„ä¸­ï¼Œä½ çš„å…ƒç´ é•¿è¿™æ ·ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c258306093347b2b22a866cc8e28f77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We56eY55qE54yq5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768584758&amp;x-signature=KaxZXj1QRvmUYoDu38jJeX0oFNc%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>ç»†å¿ƒè§‚å¯Ÿä¸Šé¢çš„å›¾ç‰‡ä¼šå‘ç°åŒä¸€ä¸ªç»„ä»¶å¼•å…¥ä¸€ä¸ª<code>styles</code>ä¸­é—´çš„éšæœºç ä¸è®ºå‰é¢æ˜¯<code>txt</code>è¿˜æ˜¯<code>button</code>åé¢éƒ½ä¸€æ ·ï¼Œè¿™ä¹Ÿæ˜¯reactçš„æ€§èƒ½ä¼˜åŒ–ï¼Œæ¯•ç«Ÿéšæœºæ•°çš„ç”Ÿæˆä¹Ÿæ˜¯ä¸€ç¬”å¼€é”€ã€‚ğŸ–</p>
</blockquote>
<p><strong>åŸç†å¤§æ­ç§˜ï¼š</strong></p>
<ol>
<li><strong>ç¼–è¯‘é˜¶æ®µ</strong>ï¼šViteï¼ˆæˆ– Webpackï¼‰æ£€æµ‹åˆ° <code>.module.css</code> åç¼€ã€‚</li>
<li><strong>ç”Ÿæˆå”¯ä¸€å</strong>ï¼šå®ƒä¼šæŠŠä½ çš„ç±»å <code>.button</code> è½¬æ¢æˆä¸€ä¸ªå…¨å±€å”¯ä¸€çš„å­—ç¬¦ä¸²ã€‚é€šå¸¸æ ¼å¼æ˜¯ <code>æ–‡ä»¶å_ç±»å__å“ˆå¸Œå€¼</code>ï¼ˆä¾‹å¦‚ <code>_button_fwpxw_1</code>ï¼‰ã€‚</li>
<li><strong>æ˜ å°„å¯¼å‡º</strong>ï¼šå®ƒç”Ÿæˆä¸€ä¸ª JS å¯¹è±¡ï¼ˆä¸Šé¢çš„ <code>styles</code>ï¼‰ï¼Œå»ºç«‹äº† <code>åŸå§‹ç±»å -&gt; å”¯ä¸€å“ˆå¸Œç±»å</code> çš„æ˜ å°„å…³ç³»ã€‚</li>
<li><strong>æ›¿æ¢</strong>ï¼šReact åœ¨æ¸²æŸ“æ—¶ï¼Œé€šè¿‡ <code>{styles.button}</code> å–åˆ°äº†é‚£ä¸ªå”¯ä¸€çš„å“ˆå¸Œç±»åï¼Œå¡«åˆ°äº† <code>className</code> é‡Œã€‚</li>
</ol>
<p><strong>âœ… å®Œç¾è§£å†³ï¼š</strong>
å³ä½¿ <code>AnotherButton</code> é‡Œä¹Ÿæœ‰ <code>.button</code>ï¼Œå®ƒä¼šè¢«ç¼–è¯‘æˆ <code>_button_differentHash</code>ã€‚ä¸¤è€…çš„å“ˆå¸Œå€¼ä¸åŒï¼Œæ ·å¼äº’ä¸å¹²æ‰°ï¼Œå½»åº•å®ç°äº†<strong>ç»„ä»¶æ ·å¼çš„å®‰å…¨éš”ç¦»</strong>ï¼</p>
<blockquote>
<p><strong>ğŸ“Œ çŸ¥è¯†ç‚¹æ€»ç»“</strong>ï¼š</p>
<ul>
<li><strong>æ–‡ä»¶å</strong>ï¼šå¿…é¡»æ˜¯ <code>.module.css</code>ã€‚</li>
<li><strong>å¼•å…¥</strong>ï¼š<code>import styles from ...</code> å¾—åˆ°çš„æ˜¯ä¸€ä¸ª JS å¯¹è±¡ã€‚</li>
<li><strong>æœ¬è´¨</strong>ï¼šé€šè¿‡æ„å»ºå·¥å…·è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€çš„ Hash ç±»åï¼Œä»æ ¹æœ¬ä¸Šæœç»å‘½åå†²çªã€‚</li>
</ul>
</blockquote>
<hr/>
<h2 data-id="heading-7">ğŸƒ ç¬¬ä¸‰ç« ï¼šVue çš„â€œéšèº«æœ¯â€ â€”â€” Scoped CSS</h2>
<p>è®²å®Œäº† Reactï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹éš”å£ Vue æ˜¯æ€ä¹ˆåšçš„ã€‚Vue çš„è®¾è®¡å“²å­¦ä¸€ç›´æ˜¯â€œç®€å•ç›´è§‚â€ï¼Œæ‰€ä»¥åœ¨æ ·å¼éš”ç¦»ä¸Šï¼Œå®ƒç”¨äº†ä¸€ä¸ªæ›´ç¥å¥‡çš„å±æ€§ï¼š<code>scoped</code>ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- åœ¨æ¨¡æ¿é‡Œï¼Œä½ ä¸éœ€è¦åƒ React é‚£æ ·å†™ {styles.txt} --&gt;</span>
    <span class="hljs-comment">&lt;!-- å°±åƒå†™æ™®é€š HTML ä¸€æ ·ç—›å¿« --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"txt"</span>&gt;</span>ä½ å¥½ï¼Œä¸–ç•Œï¼ï¼ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-comment">&lt;!-- ğŸ‘‡ å…³é”®å°±åœ¨è¿™ä¸ª scoped å±æ€§ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.txt</span> {
  <span class="hljs-attribute">color</span>: blue;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h3 data-id="heading-8">3.1 Vue æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿ</h3>
<p>React æ˜¯æ”¹äº†<strong>ç±»å</strong>ï¼ˆClassNameï¼‰ï¼ŒVue åˆ™æ˜¯æ”¹äº†<strong>é€‰æ‹©å™¨</strong>ï¼ˆSelectorï¼‰ã€‚</p>
<p>å¦‚æœä½ å»å®¡æŸ¥ Vue æ¸²æŸ“å‡ºæ¥çš„ DOM å…ƒç´ ï¼Œä½ ä¼šå‘ç°å®ƒé•¿è¿™æ ·ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/586abd7ab50f42c59616fa2764962217~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56We56eY55qE54yq5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768584758&amp;x-signature=qEZPQ2TKLN2LvuyTvP1RVuDftPM%3D" alt="image.png" loading="lazy"/></p>
<p>æ³¨æ„åˆ°äº†å—ï¼Ÿå…ƒç´ ä¸Šå¤šäº†ä¸€ä¸ªå¥‡æ€ªçš„å±æ€§ <code>data-v-7a7a37b1</code>ã€‚è¿™æ˜¯ä¸€ä¸ªå”¯ä¸€çš„æ•°æ®å±æ€§ï¼ˆData Attributeï¼‰ï¼Œå¯¹åº”è¿™ä¸ªç»„ä»¶çš„ IDã€‚</p>
<p>ç„¶åï¼ŒVue çš„ç¼–è¯‘å™¨ä¼šæŠŠä½ çš„ CSS å˜æˆè¿™æ ·ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ç¼–è¯‘å‰ */</span>
<span class="hljs-selector-class">.txt</span> { <span class="hljs-attribute">color</span>: blue; }

<span class="hljs-comment">/* ç¼–è¯‘å */</span>
<span class="hljs-selector-class">.txt</span><span class="hljs-selector-attr">[data-v-7a7a37b1]</span> { <span class="hljs-attribute">color</span>: blue; }
</code></pre>
<p><strong>åŸç†å¤§æ­ç§˜ï¼š</strong></p>
<ol>
<li><strong>PostCSS è½¬è¯‘</strong>ï¼šVue Loader ä¼šè§£æå¸¦æœ‰ <code>scoped</code> çš„ CSSã€‚</li>
<li><strong>æ‰“æ ‡ç­¾</strong>ï¼šç»™ç»„ä»¶å†…çš„æ‰€æœ‰ DOM èŠ‚ç‚¹è‡ªåŠ¨æ·»åŠ ä¸€ä¸ªå”¯ä¸€çš„ <code>data-v-hash</code> å±æ€§ã€‚</li>
<li><strong>å±æ€§é€‰æ‹©å™¨</strong>ï¼šåˆ©ç”¨ CSS çš„å±æ€§é€‰æ‹©å™¨æœºåˆ¶ï¼ŒæŠŠ <code>.txt</code> å˜æˆ <code>.txt[data-v-hash]</code>ã€‚</li>
</ol>
<p><strong>âš”ï¸ React vs Vue å¯¹æ¯”ï¼š</strong></p>
<ul>
<li><strong>React (CSS Modules)</strong>ï¼š<strong>æ”¹åå­—</strong>ã€‚èµµå››å˜æˆäº†â€œå°¼å¤æ‹‰æ–¯Â·èµµå››â€ã€‚ï¼ˆé€šè¿‡ JS å¯¹è±¡æ˜ å°„ï¼‰</li>
<li><strong>Vue (Scoped)</strong>ï¼š<strong>è´´æ ‡ç­¾</strong>ã€‚èµµå››è¿˜æ˜¯èµµå››ï¼Œä½†èº«ä¸Šè´´äº†ä¸ªâ€œä¸œåŒ—é‚£å˜å“’çš„â€æ ‡ç­¾ã€‚ï¼ˆé€šè¿‡ HTML å±æ€§å’Œ CSS å±æ€§é€‰æ‹©å™¨ï¼‰</li>
</ul>
<p>Vue çš„åšæ³•å¯¹å¼€å‘è€…æ›´æ— æ„Ÿï¼Œå¯è¯»æ€§æ›´å¥½ï¼ˆç±»åæ²¡å˜ä¹±ï¼‰ï¼Œä½† React çš„åšæ³•æ›´åŠ â€œåŸç”Ÿ JSâ€ï¼Œä¸€åˆ‡çš†å¯¹è±¡ã€‚</p>
<hr/>
<h2 data-id="heading-9">ğŸ’… ç¬¬å››ç« ï¼šé™ç»´æ‰“å‡» â€”â€” CSS-in-JS (Styled Components)</h2>
<p>è™½ç„¶ CSS Modules è§£å†³äº†å†²çªé—®é¢˜ï¼Œä½†æœ‰äººï¼ˆç‰¹åˆ«æ˜¯ä¸€äº›ç¡¬æ ¸ JS å¼€å‘è€…ï¼‰è§‰å¾—ï¼š<em>â€œä¸ºä»€ä¹ˆæˆ‘è¿˜è¦å•ç‹¬å†™ä¸€ä¸ª .css æ–‡ä»¶ï¼Ÿè¿˜è¦æ¥å›åˆ‡æ¢æ–‡ä»¶ï¼Ÿèƒ½ä¸èƒ½ç›´æ¥åœ¨ JS é‡Œå†™ CSSï¼Ÿâ€</em></p>
<p>äºæ˜¯ï¼Œ<strong>CSS-in-JS</strong> è¯ç”Ÿäº†ã€‚å…¶ä¸­æœ€è‘—åçš„åº“å°±æ˜¯ <code>styled-components</code>ã€‚</p>
<h3 data-id="heading-10">4.1 æŠŠ CSS å†™æˆç»„ä»¶</h3>
<p>è®©æˆ‘ä»¬çœ‹çœ‹ <code>styled-components</code> æ˜¯å¦‚ä½•é¢ è¦†æˆ‘ä»¬çš„è®¤çŸ¥çš„ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> styled <span class="hljs-keyword">from</span> <span class="hljs-string">'styled-components'</span>; <span class="hljs-comment">// å¼•å…¥åº“</span>

<span class="hljs-comment">// ğŸ© é­”æœ¯å¼€å§‹ï¼šåˆ›å»ºä¸€ä¸ªè‡ªå¸¦æ ·å¼çš„ button ç»„ä»¶</span>
<span class="hljs-comment">// è¿™é‡Œçš„è¯­æ³•å«ï¼šæ ‡ç­¾æ¨¡æ¿å­—é¢é‡ (Tagged Template Literals)</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">Button</span> = styled.<span class="hljs-property">button</span><span class="hljs-string">`
  /* è¿™é‡Œé¢å†™æ ‡å‡†çš„ CSS */
  background: <span class="hljs-subst">${props =&gt; props.primary ? <span class="hljs-string">'blue'</span> : <span class="hljs-string">'white'</span>}</span>; /* ğŸ‘ˆ ç‚¸è£‚åŠŸèƒ½ï¼šCSS é‡Œèƒ½å†™é€»è¾‘ï¼ */
  color: <span class="hljs-subst">${props =&gt; props.primary ? <span class="hljs-string">'white'</span> : <span class="hljs-string">'blue'</span>}</span>;
  border: 1px solid blue;
  padding: 8px 16px;
  border-radius: 4px;

  /* æ”¯æŒç±»ä¼¼ SCSS çš„åµŒå¥— */
  &amp;:hover {
    opacity: 0.8;
  }
`</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      {/* åƒä½¿ç”¨æ™®é€š React ç»„ä»¶ä¸€æ ·ä½¿ç”¨å®ƒ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>&gt;</span>é»˜è®¤æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
      
      {/* åªè¦ä¼ ä¸€ä¸ª propsï¼Œæ ·å¼å°±è‡ªåŠ¨å˜äº† */}
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">primary</span>&gt;</span>ä¸»è¦æŒ‰é’®<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<h3 data-id="heading-11">4.2 è¿™ä¸ä»…ä»…æ˜¯æ ·å¼ï¼Œè¿™æ˜¯é€»è¾‘ï¼</h3>
<p><code>styled-components</code> æœ€å¼ºå¤§çš„åœ°æ–¹åœ¨äºå®ƒæ‰“ç ´äº† CSS å’Œ JS çš„è¾¹ç•Œã€‚</p>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">background</span>: ${<span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> props.<span class="hljs-property">primary</span> ? <span class="hljs-string">'blue'</span> : <span class="hljs-string">'white'</span>};
</code></pre>
<p>è¿™è¡Œä»£ç æ„å‘³ç€ï¼š<strong>æ ·å¼çš„è¡¨ç°ç›´æ¥ç”±ç»„ä»¶çš„ Props å†³å®š</strong>ã€‚ä½ ä¸å†éœ€è¦å†™ä¸€å † <code>className={active ? 'active' : ''}</code> çš„åˆ¤æ–­é€»è¾‘ï¼Œæ ·å¼æœ¬èº«å°±æ˜¯åŠ¨æ€çš„å‡½æ•°ï¼</p>
<p><strong>ç‰¹ç‚¹æ€»ç»“ï¼š</strong></p>
<ol>
<li><strong>HTML in JS</strong> (JSX) + <strong>CSS in JS</strong> = <strong>All in JS</strong>ã€‚</li>
<li><strong>ç»„ä»¶åŒ–æ€ç»´</strong>ï¼šæ¯ä¸€ä¸ªæ ·å¼å—éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç»„ä»¶ã€‚</li>
<li><strong>åŠ¨æ€æ€§</strong>ï¼šè®© CSS æ‹¥æœ‰äº† JS çš„å˜é‡å’Œé€»è¾‘èƒ½åŠ›ã€‚</li>
<li><strong>è‡ªåŠ¨éš”ç¦»</strong>ï¼šå®ƒç”Ÿæˆçš„ç±»åä¹Ÿæ˜¯ Hash è¿‡çš„ï¼ˆä¾‹å¦‚ <code>sc-bdfBwQ</code>ï¼‰ï¼Œå®Œå…¨ä¸ç”¨æ‹…å¿ƒå†²çªã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-12">ğŸ“ æ€»ç»“ï¼šè¯¥æ€ä¹ˆé€‰ï¼Ÿ</h2>

































<table><thead><tr><th align="left">æ–¹æ¡ˆ</th><th align="left">æŠ€æœ¯æ ˆ</th><th align="left">æ ¸å¿ƒåŸç†</th><th align="left">ä¼˜ç‚¹</th><th align="left">ç¼ºç‚¹</th></tr></thead><tbody><tr><td align="left"><strong>CSS Modules</strong></td><td align="left">React / Vue</td><td align="left">å“ˆå¸Œç±»å (Hash ClassName)</td><td align="left">é›¶è¿è¡Œæ—¶å¼€é”€ï¼Œä¿ç•™ CSS å†™æ³•ï¼Œå®‰å…¨</td><td align="left">éœ€è¦åƒå¯¹è±¡ä¸€æ ·å¼•ç”¨æ ·å¼</td></tr><tr><td align="left"><strong>Scoped CSS</strong></td><td align="left">Vue</td><td align="left">å±æ€§é€‰æ‹©å™¨ (Attribute Selector)</td><td align="left">ä½¿ç”¨æœ€ç®€å•ï¼Œä»£ç å¯è¯»æ€§é«˜</td><td align="left">Vue ä¸“å±ï¼Œéš¾ä»¥è·¨ç»„ä»¶å¤ç”¨æ ·å¼</td></tr><tr><td align="left"><strong>Styled Components</strong></td><td align="left">React</td><td align="left">è¿è¡Œæ—¶æ³¨å…¥ CSS</td><td align="left">åŠ¨æ€æ€§æå¼ºï¼Œç»„ä»¶åŒ–å½»åº•ï¼Œé€»è¾‘å¤ç”¨</td><td align="left">æœ‰ä¸€å®šçš„è¿è¡Œæ—¶æ€§èƒ½å¼€é”€ï¼ŒåŒ…ä½“ç§¯ç¨å¤§</td></tr></tbody></table>
<p><strong>ç»™æ–°æ‰‹çš„å»ºè®®ï¼š</strong></p>
<ul>
<li>å¦‚æœä½ æ˜¯ <strong>Vue</strong> ç©å®¶ï¼šæ— è„‘ç”¨ <code>scoped</code>ï¼Œç®€å•åˆå¥½ç”¨ï¼Œæ€§èƒ½ä¹Ÿæ²¡å¾—è¯´ã€‚</li>
<li>å¦‚æœä½ æ˜¯ <strong>React</strong> ç©å®¶ï¼š
<ul>
<li>è¿½æ±‚æ€§èƒ½å’Œä¼ ç»Ÿ CSS å†™æ³•ï¼Ÿé€‰ <strong>CSS Modules</strong>ï¼ˆReact å®˜æ–¹è„šæ‰‹æ¶é»˜è®¤æ”¯æŒï¼‰ã€‚</li>
<li>å–œæ¬¢å…¨ JS å¼€å‘ä½“éªŒï¼Œéœ€è¦æ ¹æ® Props ç–¯ç‹‚å˜æ ·å¼ï¼Ÿé€‰ <strong>Styled Components</strong> æˆ– <strong>Emotion</strong>ã€‚</li>
</ul>
</li>
</ul>
<p>å…¶å®ï¼Œæ— è®ºå“ªç§æ–¹æ¡ˆï¼Œæ ¸å¿ƒç›®çš„åªæœ‰ä¸€ä¸ªï¼š<strong>è®©ç»„ä»¶ä¸ä»…åœ¨é€»è¾‘ä¸Šç‹¬ç«‹ï¼Œåœ¨è§†è§‰ï¼ˆæ ·å¼ï¼‰ä¸Šä¹Ÿè¦ç‹¬ç«‹</strong>ã€‚è¿™å°±æ˜¯â€œæ¨¡å—åŒ–â€çš„ç»ˆæå¥¥ä¹‰ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®ä½ å½»åº•ææ‡‚å‰ç«¯æ ·å¼éš”ç¦»çš„é‚£äº›äº‹å„¿ï¼å¦‚æœåœ¨åä½œä¸­å†é‡åˆ°æ ·å¼å†²çªï¼Œè¯·æŠŠè¿™ç¯‡æ–‡ç« ç”©ç»™ä½ çš„åŒäº‹çœ‹ï¼ğŸ˜</p>
<hr/>
<p><em>æœ¬æ–‡ä»£ç åŸºäºçœŸå®é¡¹ç›®æ¼”ç¤ºï¼Œè·¯å¾„å‚è€ƒï¼š</em></p>
<ul>
<li><code>css-demo/README.md</code></li>
<li><code>css-demo/src/App.jsx</code></li>
<li><code>vue-css-demo/src/App.vue</code></li>
<li><code>styled-component-demo/src/App.jsx</code></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Background - CSS æœ€å¼ºå±æ€§ä¹‹ä¸€(1)]]></title>    <link>https://juejin.cn/post/7593338828195692584</link>    <guid>https://juejin.cn/post/7593338828195692584</guid>    <pubDate>2026-01-09T19:33:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593338828195692584" data-draft-id="7593171168259784713" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Background - CSS æœ€å¼ºå±æ€§ä¹‹ä¸€(1)"/> <meta itemprop="keywords" content="CSS,JavaScript"/> <meta itemprop="datePublished" content="2026-01-09T19:33:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="bytemanx"/> <meta itemprop="url" content="https://juejin.cn/user/4059855780846936"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Background - CSS æœ€å¼ºå±æ€§ä¹‹ä¸€(1)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4059855780846936/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    bytemanx
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T19:33:44.000Z" title="Fri Jan 09 2026 19:33:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ CSS çš„ä¼—å¤šå±æ€§ä¸­ï¼Œ<code>background</code> å ªç§°æœ€å¼ºå¤§ã€æœ€å…·è¡¨ç°åŠ›çš„å±æ€§ä¹‹ä¸€ã€‚å®ƒä¸ä»…èƒ½è®¾ç½®ç®€å•çš„èƒŒæ™¯é¢œè‰²å’Œå›¾ç‰‡ï¼Œæ›´èƒ½é€šè¿‡<strong>æ¸å˜å‡½æ•°</strong>åˆ›é€ å‡ºä»¤äººæƒŠè‰³çš„è§†è§‰æ•ˆæœâ€”â€”ä»ä¼˜æƒ åˆ¸çš„ç¼ºå£é€ å‹ã€è­¦ç¤ºæ¡çº¹å›¾æ¡ˆï¼Œåˆ°é¥¼å›¾ç»Ÿè®¡ã€åŠ è½½åŠ¨ç”»ï¼Œç”šè‡³æ˜¯å¤æ‚çš„å‡ ä½•çº¹ç†ï¼Œè¿™äº›éƒ½å¯ä»¥<strong>çº¯ CSS å®ç°</strong>ï¼Œæ— éœ€ä»»ä½•å›¾ç‰‡èµ„æºã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ CSS çš„ä¸‰å¤§æ¸å˜å‡½æ•°ï¼š</p>
<ul>
<li><strong>çº¿æ€§æ¸å˜</strong> <code>linear-gradient()</code> â€”â€” æ²¿ç›´çº¿æ–¹å‘è¿‡æ¸¡</li>
<li><strong>å¾„å‘æ¸å˜</strong> <code>radial-gradient()</code> â€”â€” ä»ä¸­å¿ƒç‚¹å‘å¤–è¾å°„</li>
<li><strong>è§’å‘æ¸å˜</strong> <code>conic-gradient()</code> â€”â€” å›´ç»•ä¸­å¿ƒç‚¹æ—‹è½¬</li>
</ul>
<p>æ¯ä¸ªæ¸å˜å‡½æ•°æˆ‘ä»¬éƒ½ä¼šå…ˆè®²è§£è¯­æ³•ï¼Œå†é€šè¿‡å®æˆ˜æ¡ˆä¾‹æ¼”ç¤ºå…¶å¼ºå¤§ç”¨æ³•ã€‚</p>
<hr/>
<h2 data-id="heading-0">1. çº¿æ€§æ¸å˜ <code>linear-gradient()</code></h2>
<p>çº¿æ€§æ¸å˜æ²¿ç€ä¸€æ¡ç›´çº¿æ–¹å‘è¿›è¡Œé¢œè‰²è¿‡æ¸¡ï¼Œæ˜¯æœ€å¸¸ç”¨çš„æ¸å˜ç±»å‹ã€‚</p>
<h3 data-id="heading-1">1.1 è¯­æ³•è¯¦è§£</h3>
<p>æ ¹æ® <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FCSS%2Fgradient%2Flinear-gradient" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/CSS/gradient/linear-gradient" ref="nofollow noopener noreferrer">MDN linear-gradient() æ–‡æ¡£</a>ï¼Œå…¶è¯­æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">linear-gradient(
  [ <span class="hljs-tag">&lt;<span class="hljs-name">angle</span>&gt;</span> | to <span class="hljs-tag">&lt;<span class="hljs-name">side-or-corner</span>&gt;</span> ]?,
  <span class="hljs-tag">&lt;<span class="hljs-name">color-stop-list</span>&gt;</span>
)
</code></pre>
<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>

























<table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>&lt;angle&gt;</code></td><td>æ¸å˜çº¿çš„æ–¹å‘è§’åº¦ã€‚<code>0deg</code> è¡¨ç¤ºä»ä¸‹åˆ°ä¸Šï¼Œè§’åº¦é¡ºæ—¶é’ˆå¢åŠ </td><td><code>45deg</code>, <code>-60deg</code>, <code>90deg</code></td></tr><tr><td><code>to &lt;side-or-corner&gt;</code></td><td>ä½¿ç”¨å…³é”®å­—æŒ‡å®šæ–¹å‘</td><td><code>to right</code>, <code>to bottom left</code></td></tr><tr><td><code>&lt;color-stop&gt;</code></td><td>é¢œè‰²åŠå…¶ä½ç½®ï¼Œæ ¼å¼ä¸º <code>&lt;color&gt; [&lt;length-percentage&gt;]?</code></td><td><code>red</code>, <code>blue 50%</code>, <code>#fff 30px</code></td></tr></tbody></table>
<h4 data-id="heading-2">å¤šä½ç½®è¯­æ³•</h4>
<p>CSS Images Level 4 å¼•å…¥äº†å¤šä½ç½®è¯­æ³•ï¼Œä¸€ä¸ªé¢œè‰²å¯ä»¥åŒæ—¶æŒ‡å®šä¸¤ä¸ªä½ç½®ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä¼ ç»Ÿå†™æ³• */</span>
linear-gradient(red <span class="hljs-number">0%</span>, red <span class="hljs-number">50%</span>, blue <span class="hljs-number">50%</span>, blue <span class="hljs-number">100%</span>)

<span class="hljs-comment">/* å¤šä½ç½®ç®€å†™ */</span>
linear-gradient(red <span class="hljs-number">0%</span> <span class="hljs-number">50%</span>, blue <span class="hljs-number">50%</span> <span class="hljs-number">100%</span>)
</code></pre>
<hr/>
<h3 data-id="heading-3">1.2 æ¡ˆä¾‹ï¼šé€æ˜æ¸å˜è‰² â€”â€” æ–‡å­—æ·¡å‡ºæ•ˆæœ</h3>
<p>åœ¨é˜…è¯»ç±»åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸çœ‹åˆ°"æŸ¥çœ‹æ›´å¤š"çš„æŠ˜å æ•ˆæœâ€”â€”é•¿æ–‡æœ¬è¢«æˆªæ–­ï¼Œåº•éƒ¨æœ‰ä¸€ä¸ªæ¸å˜é®ç½©å¼•å¯¼ç”¨æˆ·å±•å¼€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/350c9b417ca44818827e368d8b9f28e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYnl0ZW1hbng=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768592410&amp;x-signature=0y5OvY%2BSF2WrGZLFmHktkKKV85U%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-4">æ ¸å¿ƒåŸç†</h4>
<p><code>transparent</code> æ˜¯ä¸€ä¸ªå®Œå…¨é€æ˜çš„é¢œè‰²å€¼ï¼ˆç­‰ä»·äº <code>rgba(0,0,0,0)</code>ï¼‰ï¼Œå°†å®ƒä¸å®è‰²ç»“åˆï¼Œå°±èƒ½åˆ›é€ å‡ºæ·¡å…¥æ·¡å‡ºçš„æ•ˆæœï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(transparent, <span class="hljs-number">#fff</span>);
</code></pre>
<h4 data-id="heading-5">å®æˆ˜ä»£ç </h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.text-fade</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">4.5em</span>;
  <span class="hljs-attribute">overflow</span>: hidden;
}

<span class="hljs-selector-class">.text-fade</span><span class="hljs-selector-pseudo">::after</span> {
  <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>;
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">2.5em</span>;
  <span class="hljs-comment">/* æ ¸å¿ƒï¼šä»é€æ˜æ¸å˜åˆ°ç™½è‰² */</span>
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(transparent, <span class="hljs-number">#fff</span>);
  <span class="hljs-attribute">pointer-events</span>: none;
}
</code></pre>
<p><strong>æŠ€æœ¯è¦ç‚¹ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ <code>::after</code> ä¼ªå…ƒç´ åˆ›å»ºé®ç½©å±‚</li>
<li><code>position: absolute</code> å°†é®ç½©å®šä½åˆ°å®¹å™¨åº•éƒ¨</li>
<li><code>pointer-events: none</code> ç¡®ä¿é®ç½©ä¸ä¼šé˜»æŒ¡æ–‡å­—çš„é€‰ä¸­å’Œé“¾æ¥ç‚¹å‡»</li>
<li>é…åˆ JavaScript åˆ‡æ¢ <code>expanded</code> ç±»æ¥å®ç°å±•å¼€/æ”¶èµ·</li>
</ul>
<p><span href="https://code.juejin.cn/pen/7593370027055644710" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7593370027055644710" data-src="https://code.juejin.cn/pen/7593370027055644710" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<hr/>
<h3 data-id="heading-6">1.3 æ¡ˆä¾‹ï¼šå…­è¾¹å½¢åˆ‡è§’æ•ˆæœ</h3>
<p>åˆ©ç”¨å¤šä¸ªä¸åŒè§’åº¦çš„çº¿æ€§æ¸å˜å åŠ ï¼Œå¯ä»¥åˆ›é€ åˆ‡è§’æ•ˆæœã€‚CSS çš„ <code>background</code> å±æ€§æ”¯æŒ<strong>å¤šèƒŒæ™¯å åŠ </strong>ï¼Œæ ¹æ® <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FCSS%2FCSS_backgrounds_and_borders%2FUsing_multiple_backgrounds" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_backgrounds_and_borders/Using_multiple_backgrounds" ref="nofollow noopener noreferrer">MDN ä½¿ç”¨å¤šé‡èƒŒæ™¯</a> æ–‡æ¡£ï¼š</p>
<blockquote>
<p>å¯ä»¥ä¸ºå…ƒç´ åº”ç”¨å¤šä¸ªèƒŒæ™¯ã€‚è¿™äº›èƒŒæ™¯ç›¸äº’å åŠ ï¼Œç¬¬ä¸€ä¸ªèƒŒæ™¯åœ¨æœ€ä¸Šé¢ï¼Œæœ€åä¸€ä¸ªèƒŒæ™¯åœ¨æœ€ä¸‹é¢ã€‚</p>
</blockquote>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.hexagon</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">background</span>:
    <span class="hljs-comment">/* å·¦ä¸Šè§’åˆ‡è§’ */</span> <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">120deg</span>, transparent <span class="hljs-number">30px</span>, <span class="hljs-number">#9b59b6</span> <span class="hljs-number">0</span>),
    <span class="hljs-comment">/* å³ä¸Šè§’åˆ‡è§’ */</span> <span class="hljs-built_in">linear-gradient</span>(-<span class="hljs-number">120deg</span>, transparent <span class="hljs-number">30px</span>, <span class="hljs-number">#9b59b6</span> <span class="hljs-number">0</span>), <span class="hljs-comment">/* å·¦ä¸‹è§’åˆ‡è§’ */</span>
      <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">60deg</span>, transparent <span class="hljs-number">30px</span>, <span class="hljs-number">#9b59b6</span> <span class="hljs-number">0</span>),
    <span class="hljs-comment">/* å³ä¸‹è§’åˆ‡è§’ */</span> <span class="hljs-built_in">linear-gradient</span>(-<span class="hljs-number">60deg</span>, transparent <span class="hljs-number">30px</span>, <span class="hljs-number">#9b59b6</span> <span class="hljs-number">0</span>);
  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">50%</span> <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">background-position</span>: top left, top right, bottom left, bottom right;
  <span class="hljs-attribute">background-repeat</span>: no-repeat;
}
</code></pre>
<h4 data-id="heading-7">æ·±å…¥è§£æï¼šä¸ºä»€ä¹ˆå¯ä»¥å†™ <code>0</code>ï¼Ÿ</h4>
<p>åœ¨ä»£ç ä¸­ <code>transparent 30px, #9b59b6 0</code> è¿™æ ·çš„å†™æ³•â€”â€”ç¬¬äºŒä¸ªé¢œè‰²çš„ä½ç½®æ˜¯ <code>0</code>ï¼Œè¿™çœ‹èµ·æ¥ä¸åˆé€»è¾‘ï¼Œä¸ºä»€ä¹ˆæœ‰æ•ˆï¼Ÿ</p>
<h4 data-id="heading-8">é¢œè‰²åœé ç‚¹ï¼ˆColor Stopï¼‰è§„åˆ™</h4>
<p>æ ¹æ® <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2Fgradient%2Flinear-gradient" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/CSS/gradient/linear-gradient" ref="nofollow noopener noreferrer">MDN æ–‡æ¡£</a>ï¼š</p>
<blockquote>
<p><strong>Color-stops should be listed in ascending order. Subsequent color-stops of lower value will override the value of the previous color-stop creating a hard transition.</strong></p>
</blockquote>
<p><strong>ä¸­æ–‡è§£é‡Š</strong>ï¼šé¢œè‰²åœé ç‚¹åº”æŒ‰å‡åºæ’åˆ—ã€‚å¦‚æœåç»­åœé ç‚¹çš„ä½ç½®å€¼å°äºå‰ä¸€ä¸ªï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨å°†å…¶ä¿®æ­£ä¸ºå‰ä¸€ä¸ªçš„å€¼ï¼Œä»è€Œåˆ›å»ºç¡¬è¾¹ç•Œè¿‡æ¸¡ï¼ˆæ— æ¸å˜æ•ˆæœçš„åˆ†ç•Œçº¿ï¼‰ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li><code>linear-gradient(red 50%, blue 50%)</code> â†’ åœ¨ 50% å¤„å½¢æˆçº¢è“åˆ†ç•Œçš„<strong>ç¡¬è¾¹ç•Œ</strong></li>
<li><code>linear-gradient(red 30px, blue 0)</code> â†’ <code>0</code> è¢«ä¿®æ­£ä¸º <code>30px</code>ï¼Œç­‰ä»·äº <code>red 30px, blue 30px</code></li>
</ul>
<p><span href="https://code.juejin.cn/pen/7593377311945785353" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7593377311945785353" data-src="https://code.juejin.cn/pen/7593377311945785353" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<hr/>
<h3 data-id="heading-9">1.4 æ¡ˆä¾‹ï¼šé‡å¤æ¸å˜ â€”â€” æ¡çº¹å›¾æ¡ˆ</h3>
<p><code>repeating-linear-gradient()</code> å¯ä»¥åˆ›å»ºæ— é™é‡å¤çš„å›¾æ¡ˆã€‚æ ¹æ® <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2Fgradient%2Frepeating-linear-gradient" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/CSS/gradient/repeating-linear-gradient" ref="nofollow noopener noreferrer">MDN æ–‡æ¡£</a>ï¼š</p>
<blockquote>
<p><strong>The length of the gradient that repeats is the distance between the first and last color stop. If the first color does not have a color-stop-length, it defaults to 0.</strong></p>
</blockquote>
<p><strong>ä¸­æ–‡è§£é‡Š</strong>ï¼šé‡å¤çš„æ¸å˜é•¿åº¦æ˜¯ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªé¢œè‰²åœé ç‚¹ä¹‹é—´çš„è·ç¦»ã€‚å¦‚æœç¬¬ä¸€ä¸ªé¢œè‰²æ²¡æœ‰æŒ‡å®šä½ç½®ï¼Œåˆ™é»˜è®¤ä¸º 0ã€‚è¿™æ„å‘³ç€å®šä¹‰å¥½ä¸€ä¸ª"å•å…ƒ"æ¸å˜åï¼Œå®ƒä¼šè‡ªåŠ¨æ— é™é‡å¤å¹³é“ºæ•´ä¸ªå®¹å™¨ã€‚</p>
<h4 data-id="heading-10">è­¦ç¤ºæ¡çº¹</h4>
<p>é»‘é»„ç›¸é—´çš„æ–œæ¡çº¹ï¼Œå¸¸ç”¨äºè¡¨ç¤ºè­¦å‘Šæˆ–æ–½å·¥çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.warning-stripe</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">60px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">repeating-linear-gradient</span>(
    <span class="hljs-number">45deg</span>,
    <span class="hljs-number">#000</span>,
    <span class="hljs-number">#000</span> <span class="hljs-number">10px</span>,
    <span class="hljs-number">#ffcc00</span> <span class="hljs-number">10px</span>,
    <span class="hljs-number">#ffcc00</span> <span class="hljs-number">20px</span>
  );
}
</code></pre>
<p><strong>æŠ€æœ¯è§£æï¼š</strong></p>
<ul>
<li><code>45deg</code> è®¾ç½®æ¡çº¹ä¸º 45 åº¦æ–œå‘</li>
<li><code>#000, #000 10px</code> é»‘è‰²ä» 0 åˆ° 10px</li>
<li><code>#ffcc00 10px, #ffcc00 20px</code> é»„è‰²ä» 10px åˆ° 20px</li>
<li>è¿™ä¸ª 20px çš„å•å…ƒä¼šæ— é™é‡å¤</li>
</ul>
<h4 data-id="heading-11">ç¬”è®°æœ¬æ¨ªçº¿çº¸æ•ˆæœ</h4>
<p>æ¨¡æ‹Ÿç¬”è®°æœ¬çš„è“è‰²æ¨ªçº¿æ•ˆæœï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.notebook-paper</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">repeating-linear-gradient</span>(
      <span class="hljs-number">180deg</span>,
      transparent,
      transparent <span class="hljs-number">27px</span>,
      <span class="hljs-number">#91d1ff</span> <span class="hljs-number">27px</span>,
      <span class="hljs-number">#91d1ff</span> <span class="hljs-number">28px</span>
    ), <span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">28px</span>; <span class="hljs-comment">/* ä¸æ¨ªçº¿é—´è·åŒ¹é… */</span>
}
</code></pre>
<p><strong>æŠ€æœ¯è§£æï¼š</strong></p>
<ul>
<li>æ¯ 28px å¾ªç¯ä¸€æ¬¡ï¼ˆ27px é€æ˜ + 1px è“çº¿ï¼‰</li>
<li><code>line-height: 28px</code> è®©æ–‡å­—æ­£å¥½è½åœ¨æ¨ªçº¿ä¸Š</li>
<li>åº•å±‚ä½¿ç”¨ç™½è‰²ä½œä¸ºèƒŒæ™¯è‰²</li>
</ul>
<p><span href="https://code.juejin.cn/pen/7593407425685028891" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7593407425685028891" data-src="https://code.juejin.cn/pen/7593407425685028891" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<hr/>
<h2 data-id="heading-12">2. å¾„å‘æ¸å˜ <code>radial-gradient()</code></h2>
<p>å¾„å‘æ¸å˜ä»ä¸€ä¸ªä¸­å¿ƒç‚¹å‘å¤–è¾å°„ï¼Œå½¢æˆåœ†å½¢æˆ–æ¤­åœ†å½¢çš„é¢œè‰²è¿‡æ¸¡ã€‚æ ¹æ® <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2Fgradient%2Fradial-gradient" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/CSS/gradient/radial-gradient" ref="nofollow noopener noreferrer">MDN æ–‡æ¡£</a>ï¼š</p>
<blockquote>
<p><strong>To create a smooth gradient, the <code>radial-gradient()</code> function draws a series of concentric shapes radiating out from the center to the ending shape (and potentially beyond). The ending shape may be either a circle or an ellipse.</strong></p>
</blockquote>
<p><strong>ä¸­æ–‡è§£é‡Š</strong>ï¼šä¸ºäº†åˆ›å»ºå¹³æ»‘çš„æ¸å˜ï¼Œ<code>radial-gradient()</code> å‡½æ•°ç»˜åˆ¶ä¸€ç³»åˆ—ä»ä¸­å¿ƒå‘å¤–è¾å°„åˆ°ç»“æŸå½¢çŠ¶çš„åŒå¿ƒå½¢çŠ¶ï¼ˆå¯èƒ½å»¶ä¼¸åˆ°ç»“æŸå½¢çŠ¶ä¹‹å¤–ï¼‰ã€‚ç»“æŸå½¢çŠ¶å¯ä»¥æ˜¯åœ†å½¢æˆ–æ¤­åœ†å½¢ã€‚</p>
<h3 data-id="heading-13">2.1 è¯­æ³•è¯¦è§£</h3>
<p>æ ¹æ® MDN æ–‡æ¡£ï¼Œå…¶è¯­æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">radial-gradient(
  [ <span class="hljs-tag">&lt;<span class="hljs-name">ending-shape</span>&gt;</span> || <span class="hljs-tag">&lt;<span class="hljs-name">size</span>&gt;</span> ]? [ at <span class="hljs-tag">&lt;<span class="hljs-name">position</span>&gt;</span> ]?,
  <span class="hljs-tag">&lt;<span class="hljs-name">color-stop-list</span>&gt;</span>
)
</code></pre>
<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>

























<table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>å¯é€‰å€¼</th></tr></thead><tbody><tr><td><code>&lt;ending-shape&gt;</code></td><td>æ¸å˜çš„å½¢çŠ¶</td><td><code>circle</code>ï¼ˆåœ†å½¢ï¼‰, <code>ellipse</code>ï¼ˆæ¤­åœ†ï¼Œé»˜è®¤ï¼‰</td></tr><tr><td><code>&lt;size&gt;</code></td><td>æ¸å˜çš„å°ºå¯¸</td><td><code>closest-side</code>, <code>farthest-side</code>, <code>closest-corner</code>, <code>farthest-corner</code>ï¼ˆé»˜è®¤ï¼‰ï¼Œæˆ–å…·ä½“é•¿åº¦</td></tr><tr><td><code>at &lt;position&gt;</code></td><td>æ¸å˜åœ†å¿ƒä½ç½®</td><td><code>center</code>ï¼ˆé»˜è®¤ï¼‰, <code>top left</code>, <code>50% 50%</code>, <code>at left</code> ç­‰</td></tr></tbody></table>
<h4 data-id="heading-14">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä»ä¸­å¿ƒå‘å¤–çš„åœ†å½¢æ¸å˜ */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(circle, <span class="hljs-number">#fff</span>, <span class="hljs-number">#000</span>);

<span class="hljs-comment">/* æŒ‡å®šåœ†å¿ƒåœ¨å·¦ä¾§ */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(circle at left, transparent <span class="hljs-number">10px</span>, <span class="hljs-number">#ff6b6b</span> <span class="hljs-number">10px</span>);

<span class="hljs-comment">/* æ¤­åœ†æ¸å˜ */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(ellipse at top, <span class="hljs-number">#e66465</span>, <span class="hljs-number">#9198e5</span>);
</code></pre>
<hr/>
<h3 data-id="heading-15">2.2 æ¡ˆä¾‹ï¼šä¼˜æƒ åˆ¸ç¼ºå£æ•ˆæœ</h3>
<p>ç”µå•†åœºæ™¯ä¸­å¸¸è§çš„ä¼˜æƒ åˆ¸æ ·å¼ï¼Œä¸¤ä¾§æœ‰åŠåœ†å½¢ç¼ºå£ã€‚è¿™æ­£æ˜¯å¾„å‘æ¸å˜çš„ç»å…¸åº”ç”¨åœºæ™¯ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.coupon</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">120px</span>;
  <span class="hljs-attribute">background</span>:
    <span class="hljs-comment">/* å·¦ä¾§åŠåœ†ç¼ºå£ */</span> <span class="hljs-built_in">radial-gradient</span>(
      circle at left,
      transparent <span class="hljs-number">10px</span>,
      <span class="hljs-number">#ff6b6b</span> <span class="hljs-number">10px</span>
    ),
    <span class="hljs-comment">/* å³ä¾§åŠåœ†ç¼ºå£ */</span> <span class="hljs-built_in">radial-gradient</span>(circle at right, transparent <span class="hljs-number">10px</span>, <span class="hljs-number">#ff6b6b</span>
          <span class="hljs-number">0</span>);
  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">51%</span> <span class="hljs-number">100%</span>, <span class="hljs-number">51%</span> <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">background-position</span>: left, right;
  <span class="hljs-attribute">background-repeat</span>: no-repeat;
}
</code></pre>
<p><strong>æŠ€æœ¯è§£æï¼š</strong></p>
<ol>
<li><code>radial-gradient(circle at left, ...)</code> åˆ›å»ºä¸€ä¸ªåœ†å¿ƒåœ¨å·¦ä¾§çš„å¾„å‘æ¸å˜</li>
<li><code>transparent 10px, #ff6b6b 10px</code> è¡¨ç¤º 0-10px æ˜¯é€æ˜çš„ï¼ˆå½¢æˆç¼ºå£ï¼‰ï¼Œ10px ä¹‹åæ˜¯çº¢è‰²</li>
<li>ä½¿ç”¨ä¸¤ä¸ªèƒŒæ™¯åˆ†åˆ«å¤„ç†å·¦å³ä¸¤ä¾§</li>
<li><code>background-size: 51%</code> è®©ä¸¤ä¸ªèƒŒæ™¯å„å ä¸€åŠï¼ˆ51% ç¡®ä¿ä¸­é—´æ— ç¼éš™ï¼‰</li>
<li>å³ä¾§æ¸å˜ä¸­ <code>#ff6b6b 0</code> åŒæ ·åˆ©ç”¨äº†å‰é¢è®²çš„ç®€å†™æŠ€å·§ï¼Œ<code>0</code> ä¼šè¢«ä¿®æ­£ä¸º <code>10px</code></li>
</ol>
<p><span href="https://code.juejin.cn/pen/7593441621086371891" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7593441621086371891" data-src="https://code.juejin.cn/pen/7593441621086371891" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<hr/>
<h2 data-id="heading-16">3. è§’å‘æ¸å˜ <code>conic-gradient()</code></h2>
<p>è§’å‘æ¸å˜å›´ç»•ä¸­å¿ƒç‚¹æ—‹è½¬ï¼Œåƒé¥¼å›¾ä¸€æ ·å‘ˆæ‰‡å½¢åˆ†å¸ƒé¢œè‰²ã€‚è¿™æ˜¯ CSS æ¸å˜ä¸­æœ€å…·åˆ›æ„æ½œåŠ›çš„å‡½æ•°ã€‚æ ¹æ® <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2Fgradient%2Fconic-gradient" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/CSS/gradient/conic-gradient" ref="nofollow noopener noreferrer">MDN æ–‡æ¡£</a>ï¼š</p>
<blockquote>
<p><strong>A conic gradient is specified by indicating a rotation angle, the center of the gradient, and then specifying a list of color-stops. Unlike linear and radial gradients, whose color-stops are placed by specifying a length, the color-stops of a conic gradient are specified with an angle.</strong></p>
</blockquote>
<p><strong>ä¸­æ–‡è§£é‡Š</strong>ï¼šè§’å‘æ¸å˜é€šè¿‡æŒ‡å®šæ—‹è½¬è§’åº¦ã€æ¸å˜ä¸­å¿ƒå’Œé¢œè‰²åœé ç‚¹åˆ—è¡¨æ¥å®šä¹‰ã€‚ä¸çº¿æ€§æ¸å˜å’Œå¾„å‘æ¸å˜ä½¿ç”¨é•¿åº¦æ¥å®šä½é¢œè‰²åœé ç‚¹ä¸åŒï¼Œè§’å‘æ¸å˜ä½¿ç”¨<strong>è§’åº¦</strong>æ¥æŒ‡å®šé¢œè‰²ä½ç½®ã€‚è§’åº¦å•ä½åŒ…æ‹¬ <code>deg</code>ï¼ˆåº¦ï¼‰ã€<code>grad</code>ï¼ˆæ¢¯åº¦ï¼‰ã€<code>rad</code>ï¼ˆå¼§åº¦ï¼‰å’Œ <code>turn</code>ï¼ˆåœˆï¼‰ã€‚</p>
<h3 data-id="heading-17">3.1 è¯­æ³•è¯¦è§£</h3>
<p>æ ¹æ® MDN æ–‡æ¡£ï¼Œå…¶è¯­æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-css" lang="css">conic-gradient(
  <span class="hljs-selector-attr">[ from &lt;angle&gt; ]</span>? <span class="hljs-selector-attr">[ at &lt;position&gt; ]</span>?,
  &lt;angular-<span class="hljs-attribute">color</span>-stop-list&gt;
)
</code></pre>
<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>

























<table><thead><tr><th>å‚æ•°</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td><code>from &lt;angle&gt;</code></td><td>æ¸å˜çš„èµ·å§‹è§’åº¦ï¼ˆé»˜è®¤ä» 12 ç‚¹é’Ÿæ–¹å‘ï¼Œå³ <code>0deg</code>ï¼‰</td><td><code>from 45deg</code>, <code>from 0.25turn</code></td></tr><tr><td><code>at &lt;position&gt;</code></td><td>æ¸å˜åœ†å¿ƒä½ç½®</td><td><code>at center</code>, <code>at 0% 100%</code></td></tr><tr><td><code>&lt;angular-color-stop&gt;</code></td><td>é¢œè‰²åŠå…¶è§’åº¦ä½ç½®</td><td><code>red 0%</code>, <code>blue 90deg</code>, <code>green 25%</code></td></tr></tbody></table>
<h4 data-id="heading-18">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ç®€å•çš„è§’å‘æ¸å˜ */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">conic-gradient</span>(red, yellow, green, blue, red);

<span class="hljs-comment">/* é¥¼å›¾æ•ˆæœï¼šä½¿ç”¨ç™¾åˆ†æ¯”åˆ†é… */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">conic-gradient</span>(<span class="hljs-number">#e74c3c</span> <span class="hljs-number">0%</span> <span class="hljs-number">35%</span>, <span class="hljs-number">#3498db</span> <span class="hljs-number">35%</span> <span class="hljs-number">60%</span>, <span class="hljs-number">#2ecc71</span> <span class="hljs-number">60%</span> <span class="hljs-number">100%</span>);

<span class="hljs-comment">/* æŒ‡å®šèµ·å§‹è§’åº¦å’Œåœ†å¿ƒ */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">conic-gradient</span>(from <span class="hljs-number">45deg</span> at <span class="hljs-number">50%</span> <span class="hljs-number">50%</span>, red, blue);
</code></pre>
<hr/>
<h3 data-id="heading-19">3.2 æ¡ˆä¾‹ï¼šé¥¼å›¾ç»Ÿè®¡</h3>
<p>æ— éœ€ SVG æˆ– Canvasï¼Œçº¯ CSS å®ç°æ•°æ®å¯è§†åŒ–é¥¼å›¾ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.pie-chart</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">150px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">150px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">conic-gradient</span>(
    <span class="hljs-number">#e74c3c</span> <span class="hljs-number">0%</span> <span class="hljs-number">35%</span>,
    <span class="hljs-comment">/* çº¢è‰² 35% */</span> <span class="hljs-number">#3498db</span> <span class="hljs-number">35%</span> <span class="hljs-number">60%</span>,
    <span class="hljs-comment">/* è“è‰² 25% */</span> <span class="hljs-number">#2ecc71</span> <span class="hljs-number">60%</span> <span class="hljs-number">85%</span>,
    <span class="hljs-comment">/* ç»¿è‰² 25% */</span> <span class="hljs-number">#f1c40f</span> <span class="hljs-number">85%</span> <span class="hljs-number">100%</span> <span class="hljs-comment">/* é»„è‰² 15% */</span>
  );
}
</code></pre>
<p><strong>æŠ€æœ¯è¦ç‚¹ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ç™¾åˆ†æ¯”ç²¾ç¡®æ§åˆ¶æ¯ä¸ªæ‰‡åŒºçš„å æ¯”</li>
<li><code>border-radius: 50%</code> å°†çŸ©å½¢è£å‰ªä¸ºåœ†å½¢</li>
</ul>
<hr/>
<h3 data-id="heading-20">3.3 æ¡ˆä¾‹ï¼šåŠ è½½åŠ¨ç”»</h3>
<p>é…åˆ <code>mask</code> å±æ€§é•‚ç©ºä¸­å¿ƒï¼Œæ‰“é€ ä¼˜é›…çš„åŠ è½½åœˆï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.loader</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">80px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">conic-gradient</span>(transparent <span class="hljs-number">0%</span>, <span class="hljs-number">#00d4ff</span> <span class="hljs-number">100%</span>);
  <span class="hljs-comment">/* ä½¿ç”¨ mask é•‚ç©ºä¸­å¿ƒ */</span>
  <span class="hljs-attribute">mask</span>: <span class="hljs-built_in">radial-gradient</span>(transparent <span class="hljs-number">55%</span>, <span class="hljs-number">#000</span> <span class="hljs-number">56%</span>);
  -webkit-<span class="hljs-attribute">mask</span>: <span class="hljs-built_in">radial-gradient</span>(transparent <span class="hljs-number">55%</span>, <span class="hljs-number">#000</span> <span class="hljs-number">56%</span>);
  <span class="hljs-attribute">animation</span>: spin <span class="hljs-number">1s</span> linear infinite;
}

<span class="hljs-keyword">@keyframes</span> spin {
  <span class="hljs-selector-tag">to</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">360deg</span>);
  }
}
</code></pre>
<p><strong>æŠ€æœ¯è¦ç‚¹ï¼š</strong></p>
<ul>
<li><code>conic-gradient(transparent 0%, #00d4ff 100%)</code> åˆ›å»ºä»é€æ˜åˆ°è“è‰²çš„æ¸å˜</li>
<li><code>mask: radial-gradient(...)</code> å°†ä¸­å¿ƒ 55% åŒºåŸŸé•‚ç©º</li>
<li>é…åˆæ—‹è½¬åŠ¨ç”»å½¢æˆåŠ è½½æ•ˆæœ</li>
</ul>
<hr/>
<h3 data-id="heading-21">3.4 æ¡ˆä¾‹ï¼šå½©è‰²è½®ç›˜ï¼ˆè‰²ç›¸ç¯ï¼‰</h3>
<p>ä»çº¢è‰²å¼€å§‹ï¼Œç»è¿‡æ‰€æœ‰è‰²ç›¸ï¼Œå†å›åˆ°çº¢è‰²ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.color-wheel</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">150px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">150px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">conic-gradient</span>(
    <span class="hljs-number">#ff0000</span>,
    <span class="hljs-number">#ff8000</span>,
    <span class="hljs-number">#ffff00</span>,
    <span class="hljs-number">#80ff00</span>,
    <span class="hljs-number">#00ff00</span>,
    <span class="hljs-number">#00ff80</span>,
    <span class="hljs-number">#00ffff</span>,
    <span class="hljs-number">#0080ff</span>,
    <span class="hljs-number">#0000ff</span>,
    <span class="hljs-number">#8000ff</span>,
    <span class="hljs-number">#ff00ff</span>,
    <span class="hljs-number">#ff0080</span>,
    <span class="hljs-number">#ff0000</span>
  );
}
</code></pre>
<hr/>
<h3 data-id="heading-22">3.5 æ¡ˆä¾‹ï¼šæ£‹ç›˜æ ¼</h3>
<p>é…åˆ <code>background-size</code> å°†è§’å‘æ¸å˜å˜æˆå¯å¹³é“ºçš„å•å…ƒæ ¼ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.checkerboard</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">150px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">conic-gradient</span>(
    <span class="hljs-number">#333</span> <span class="hljs-number">0%</span> <span class="hljs-number">25%</span>,
    <span class="hljs-number">#fff</span> <span class="hljs-number">25%</span> <span class="hljs-number">50%</span>,
    <span class="hljs-number">#333</span> <span class="hljs-number">50%</span> <span class="hljs-number">75%</span>,
    <span class="hljs-number">#fff</span> <span class="hljs-number">75%</span> <span class="hljs-number">100%</span>
  );
  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">40px</span> <span class="hljs-number">40px</span>;
}
</code></pre>
<p><strong>æŠ€æœ¯è§£æï¼š</strong></p>
<ul>
<li><code>conic-gradient</code> é»˜è®¤ä¼šå¡«æ»¡æ•´ä¸ªå…ƒç´ </li>
<li>è®¾ç½® <code>background-size: 40px 40px</code> åï¼Œæ¸å˜è¢«é™åˆ¶åœ¨ 40Ã—40 çš„åŒºåŸŸå†…</li>
<li>é»˜è®¤ <code>background-repeat: repeat</code> ä¼šè®©è¿™ä¸ªå°å›¾æ¡ˆè‡ªåŠ¨å¹³é“º</li>
</ul>
<p><span href="https://code.juejin.cn/pen/7593417153701740594" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7593417153701740594" data-src="https://code.juejin.cn/pen/7593417153701740594" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<hr/>
<h3 data-id="heading-23">3.6 æ¡ˆä¾‹ï¼šä¸ background-size ç»„åˆ â€”â€” å¤æ‚å›¾æ¡ˆå¹³é“º</h3>
<p>å°†è§’å‘æ¸å˜ä¸ <code>background-size</code> ç»“åˆï¼Œå¯ä»¥åˆ›é€ å‡ºä¸°å¯Œçš„å¹³é“ºå›¾æ¡ˆã€‚</p>
<h4 data-id="heading-24">æ³¢ç‚¹åœ°ç –</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.tile</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">conic-gradient</span>(
    <span class="hljs-number">#e74c3c</span> <span class="hljs-number">0%</span> <span class="hljs-number">25%</span>,
    <span class="hljs-number">#fff</span> <span class="hljs-number">25%</span> <span class="hljs-number">50%</span>,
    <span class="hljs-number">#e74c3c</span> <span class="hljs-number">50%</span> <span class="hljs-number">75%</span>,
    <span class="hljs-number">#fff</span> <span class="hljs-number">75%</span> <span class="hljs-number">100%</span>
  );
  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">40px</span> <span class="hljs-number">40px</span>;
}
</code></pre>
<h4 data-id="heading-25">äº¤ç»‡å›¾æ¡ˆ</h4>
<p>å¤šå±‚è§’å‘æ¸å˜å åŠ ï¼Œåˆ›é€ æ›´å¤æ‚çš„çº¹ç†ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.weave</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">conic-gradient</span>(from <span class="hljs-number">45deg</span>, <span class="hljs-number">#3498db</span> <span class="hljs-number">0%</span> <span class="hljs-number">25%</span>, transparent <span class="hljs-number">25%</span> <span class="hljs-number">100%</span>),
    <span class="hljs-built_in">conic-gradient</span>(
      from <span class="hljs-number">45deg</span> at <span class="hljs-number">50%</span> <span class="hljs-number">50%</span>,
      transparent <span class="hljs-number">0%</span> <span class="hljs-number">50%</span>,
      <span class="hljs-number">#2ecc71</span> <span class="hljs-number">50%</span> <span class="hljs-number">75%</span>,
      transparent <span class="hljs-number">75%</span> <span class="hljs-number">100%</span>
    ), <span class="hljs-number">#1a1a2e</span>;
  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">30px</span> <span class="hljs-number">30px</span>;
}
</code></pre>
<p><strong>æŠ€æœ¯è§£æï¼š</strong></p>
<ul>
<li><code>from 45deg</code> è®¾ç½®æ¸å˜çš„èµ·å§‹è§’åº¦</li>
<li>ç¬¬ä¸€å±‚è“è‰²æ¸å˜åªå  25%ï¼ˆä¸€ä¸ªæ‰‡å½¢ï¼‰</li>
<li>ç¬¬äºŒå±‚ç»¿è‰²æ¸å˜å  50%-75%ï¼ˆå¦ä¸€ä¸ªæ‰‡å½¢ï¼‰</li>
<li>åº•å±‚æ·±è‰²ä½œä¸ºèƒŒæ™¯</li>
<li>ä¸‰å±‚å åŠ å½¢æˆäº¤ç»‡æ•ˆæœ</li>
</ul>
<h4 data-id="heading-26">ä¸‰è§’æ——å¸œ</h4>
<p>åˆ©ç”¨ <code>at</code> å‚æ•°æ”¹å˜æ¸å˜ä¸­å¿ƒç‚¹ä½ç½®ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.flags</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">conic-gradient</span>(
      from -<span class="hljs-number">45deg</span> at <span class="hljs-number">0%</span> <span class="hljs-number">100%</span>,
      <span class="hljs-number">#f1c40f</span> <span class="hljs-number">0%</span> <span class="hljs-number">25.3%</span>,
      transparent <span class="hljs-number">25.3%</span> <span class="hljs-number">100%</span>
    ), <span class="hljs-built_in">conic-gradient</span>(
      from <span class="hljs-number">135deg</span> at <span class="hljs-number">100%</span> <span class="hljs-number">0%</span>,
      <span class="hljs-number">#e74c3c</span> <span class="hljs-number">0%</span> <span class="hljs-number">25.3%</span>,
      transparent <span class="hljs-number">25.3%</span> <span class="hljs-number">100%</span>
    ), <span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">40px</span> <span class="hljs-number">40px</span>;
}
</code></pre>
<p><strong>æŠ€æœ¯è§£æï¼š</strong></p>
<ul>
<li><code>at 0% 100%</code> å°†åœ†å¿ƒç§»åˆ°å·¦ä¸‹è§’</li>
<li><code>at 100% 0%</code> å°†åœ†å¿ƒç§»åˆ°å³ä¸Šè§’</li>
<li><code>from -45deg</code> å’Œ <code>from 135deg</code> æ§åˆ¶ä¸‰è§’å½¢çš„æœå‘</li>
<li>ä¸¤ä¸ªä¸‰è§’å½¢å åŠ åœ¨ç™½è‰²èƒŒæ™¯ä¸Šï¼Œå½¢æˆæ——å¸œæ•ˆæœ</li>
</ul>
<p><span href="https://code.juejin.cn/pen/7593418576468377640" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7593418576468377640" data-src="https://code.juejin.cn/pen/7593418576468377640" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<hr/>
<h2 data-id="heading-27">4. æ€»ç»“</h2>
<h3 data-id="heading-28">æ ¸å¿ƒå±æ€§é€ŸæŸ¥è¡¨</h3>






























<table><thead><tr><th>å±æ€§</th><th>ä½œç”¨</th><th>å¸¸ç”¨å€¼</th></tr></thead><tbody><tr><td><code>background-image</code></td><td>è®¾ç½®èƒŒæ™¯å›¾åƒ/æ¸å˜</td><td><code>linear-gradient()</code>, <code>radial-gradient()</code>, <code>conic-gradient()</code></td></tr><tr><td><code>background-size</code></td><td>èƒŒæ™¯å°ºå¯¸</td><td><code>cover</code>, <code>contain</code>, <code>100px 100px</code>, <code>50% 50%</code></td></tr><tr><td><code>background-position</code></td><td>èƒŒæ™¯ä½ç½®</td><td><code>center</code>, <code>top left</code>, <code>50% 50%</code></td></tr><tr><td><code>background-repeat</code></td><td>æ˜¯å¦å¹³é“º</td><td><code>repeat</code>, <code>no-repeat</code>, <code>repeat-x</code>, <code>repeat-y</code></td></tr></tbody></table>
<h3 data-id="heading-29">æ¸å˜å‡½æ•°å¯¹æ¯”è¡¨</h3>








































<table><thead><tr><th>æ¸å˜ç±»å‹</th><th>å‡½æ•°</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>çº¿æ€§æ¸å˜</td><td><code>linear-gradient()</code></td><td>æ¡çº¹ã€æ·¡å‡ºæ•ˆæœã€åˆ‡è§’</td></tr><tr><td>å¾„å‘æ¸å˜</td><td><code>radial-gradient()</code></td><td>åœ†å½¢ç¼ºå£ã€èšå…‰ç¯æ•ˆæœ</td></tr><tr><td>è§’å‘æ¸å˜</td><td><code>conic-gradient()</code></td><td>é¥¼å›¾ã€æ£‹ç›˜æ ¼ã€è‰²è½®</td></tr><tr><td>é‡å¤çº¿æ€§</td><td><code>repeating-linear-gradient()</code></td><td>æ— é™æ¡çº¹å›¾æ¡ˆ</td></tr><tr><td>é‡å¤å¾„å‘</td><td><code>repeating-radial-gradient()</code></td><td>åŒå¿ƒåœ†å›¾æ¡ˆ</td></tr><tr><td>é‡å¤è§’å‘</td><td><code>repeating-conic-gradient()</code></td><td>æ”¾å°„çº¿å›¾æ¡ˆ</td></tr></tbody></table>
<h3 data-id="heading-30">æ ¸å¿ƒæŠ€å·§å›é¡¾</h3>
<ol>
<li><strong>é€æ˜æ¸å˜</strong>ï¼šä½¿ç”¨ <code>transparent</code> åˆ›å»ºæ·¡å…¥æ·¡å‡ºæ•ˆæœ</li>
<li><strong>å¤šèƒŒæ™¯å åŠ </strong>ï¼šç”¨é€—å·åˆ†éš”å¤šä¸ªæ¸å˜ï¼Œé…åˆ <code>background-size</code> å’Œ <code>background-position</code></li>
<li><strong>ç¡¬è¾¹ç•ŒæŠ€å·§</strong>ï¼šåé¢çš„ color-stop ä½ç½®å†™ <code>0</code>ï¼Œä¼šè¢«è‡ªåŠ¨ä¿®æ­£ä¸ºå‰ä¸€ä¸ªçš„å€¼ï¼Œå½¢æˆæ— è¿‡æ¸¡åˆ†ç•Œ</li>
<li><strong>å›¾æ¡ˆå¹³é“º</strong>ï¼šè®¾ç½® <code>background-size</code> é™åˆ¶æ¸å˜åŒºåŸŸï¼Œè‡ªåŠ¨å¹³é“ºå½¢æˆå›¾æ¡ˆ</li>
<li><strong>è§’å‘æ¸å˜å®šä½</strong>ï¼šä½¿ç”¨ <code>from angle at x y</code> æ§åˆ¶èµ·å§‹è§’åº¦å’Œåœ†å¿ƒä½ç½®</li>
</ol>
<p>æŒæ¡è¿™äº›æŠ€å·§ï¼Œä½ å°±èƒ½ç”¨çº¯ CSS åˆ›é€ å‡ºå„ç§ä»¤äººæƒŠè‰³çš„è§†è§‰æ•ˆæœï¼Œå‡å°‘å¯¹å›¾ç‰‡èµ„æºçš„ä¾èµ–ï¼Œæå‡é¡µé¢æ€§èƒ½ï¼</p>
<hr/>
<blockquote>
<p>ğŸ“š <strong>å»¶ä¼¸é˜…è¯»</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2Fgradient" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/CSS/gradient" ref="nofollow noopener noreferrer">MDN CSS Gradients</a> - CSS æ¸å˜å®Œæ•´æŒ‡å—</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2Fbackground" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/CSS/background" ref="nofollow noopener noreferrer">MDN background</a> - background ç®€å†™å±æ€§è¯¦è§£</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FCSS%2FCSS_backgrounds_and_borders%2FUsing_multiple_backgrounds" target="_blank" title="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_backgrounds_and_borders/Using_multiple_backgrounds" ref="nofollow noopener noreferrer">MDN Using multiple backgrounds</a> - å¤šèƒŒæ™¯å åŠ æŠ€æœ¯</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcss-tricks.com%2Fa-complete-guide-to-css-gradients%2F" target="_blank" title="https://css-tricks.com/a-complete-guide-to-css-gradients/" ref="nofollow noopener noreferrer">CSS-Tricks: A Complete Guide to CSS Gradients</a> - æ¸å˜å®æˆ˜æŒ‡å—</li>
</ul>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[nextjså­¦ä¹ 8ï¼šé™æ€æ¸²æŸ“ã€åŠ¨æ€æ¸²æŸ“ã€Streamingæ¸²æŸ“]]></title>    <link>https://juejin.cn/post/7593139476841562118</link>    <guid>https://juejin.cn/post/7593139476841562118</guid>    <pubDate>2026-01-10T02:03:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593139476841562118" data-draft-id="7584307642984071209" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="nextjså­¦ä¹ 8ï¼šé™æ€æ¸²æŸ“ã€åŠ¨æ€æ¸²æŸ“ã€Streamingæ¸²æŸ“"/> <meta itemprop="keywords" content="Next.js"/> <meta itemprop="datePublished" content="2026-01-10T02:03:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€æ±Ÿä¸œæµæ°´"/> <meta itemprop="url" content="https://juejin.cn/user/1151943917181880"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            nextjså­¦ä¹ 8ï¼šé™æ€æ¸²æŸ“ã€åŠ¨æ€æ¸²æŸ“ã€Streamingæ¸²æŸ“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943917181880/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€æ±Ÿä¸œæµæ°´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T02:03:08.000Z" title="Sat Jan 10 2026 02:03:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç°åœ¨è®©æˆ‘ä»¬æ–°å»ºä¸€ä¸ªÂ <code>app/cats/page.js</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> url = (<span class="hljs-keyword">await</span> (<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.thecatapi.com/v1/images/search'</span>)).<span class="hljs-title function_">json</span>())[<span class="hljs-number">0</span>].<span class="hljs-property">url</span>
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{url}</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"300"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"cat"</span> /&gt;</span></span>
  )
}
</code></pre>
<p>å…¶ä¸­ï¼Œ<a href="https://link.juejin.cn/?target=https%3A%2F%2Fapi.thecatapi.com%2Fv1%2Fimages%2Fsearch" title="https://link.juejin.cn/?target=https%3A%2F%2Fapi.thecatapi.com%2Fv1%2Fimages%2Fsearch" target="_blank">api.thecatapi.com/v1/images/sâ€¦</a>Â æ˜¯ä¸€ä¸ªè¿”å›çŒ«çŒ«å›¾ç‰‡çš„æ¥å£ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½ä¼šè¿”å›ä¸€å¼ éšæœºçš„çŒ«çŒ«å›¾ç‰‡æ•°æ®ã€‚</p>
<p>ç°åœ¨è®©æˆ‘ä»¬è¿è¡ŒÂ <code>npm run dev</code>ï¼Œå¼€å‘æ¨¡å¼ä¸‹ï¼Œæ¯æ¬¡ç‚¹æ¸…ç©ºç¼“å­˜å¼ºåˆ¶åˆ·æ–°æ—¶éƒ½ä¼šè¿”å›ä¸€å¼ æ–°çš„å›¾ç‰‡ã€‚</p>
<p>ç°åœ¨è®©æˆ‘ä»¬è¿è¡ŒÂ <code>npm run build &amp;&amp; npm run start</code>ï¼Œç„¶è€Œæ­¤æ—¶æ¯æ¬¡ç‚¹æ¸…ç©ºç¼“å­˜å¼ºåˆ¶åˆ·æ–°æ—¶éƒ½è¿˜æ˜¯åŒä¸€å¼ å›¾ç‰‡ã€‚</p>
<p>è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>è®©æˆ‘ä»¬çœ‹ä¸‹æ„å»ºæ—¶çš„è¾“å‡ºç»“æœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9807f4a6865411f8643d289bae53b2e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768615388&amp;x-signature=XJv8C8aALt6a0IDFQsYEeUxG7EA%3D" alt="image.png" loading="lazy"/></p>
<p><code>/cats</code>Â è¢«æ ‡è®°ä¸ºÂ <code>Static</code>ï¼Œè¡¨ç¤ºè¢«é¢„æ¸²æŸ“ä¸ºé™æ€å†…å®¹ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>/server</code>çš„è¿”å›å†…å®¹å…¶å®åœ¨æ„å»ºçš„æ—¶å€™å°±å·²ç»å†³å®šäº†ã€‚é¡µé¢è¿”å›çš„å›¾ç‰‡æ­£æ˜¯æ„å»ºæ—¶è°ƒç”¨çŒ«çŒ«æ¥å£è¿”å›çš„é‚£å¼ å›¾ç‰‡ã€‚</p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚ä½•è®©Â <code>/server</code>Â æ¯æ¬¡éƒ½è¿”å›æ–°çš„å›¾ç‰‡å‘¢ï¼Ÿ</p>
<p>è¿™å°±è¦è¯´åˆ° Next.js çš„æœåŠ¡ç«¯æ¸²æŸ“ç­–ç•¥äº†ã€‚</p>
<h2 data-id="heading-0">æœåŠ¡ç«¯æ¸²æŸ“ç­–ç•¥</h2>
<p>Next.js å­˜åœ¨ä¸‰ç§ä¸åŒçš„æœåŠ¡ç«¯æ¸²æŸ“ç­–ç•¥ï¼š</p>
<ul>
<li>é™æ€æ¸²æŸ“</li>
<li>åŠ¨æ€æ¸²æŸ“</li>
<li>Streaming</li>
</ul>
<h3 data-id="heading-1">é™æ€æ¸²æŸ“ï¼ˆStatic Renderingï¼‰</h3>
<p><strong>è¿™æ˜¯é»˜è®¤æ¸²æŸ“ç­–ç•¥</strong>ï¼Œ<strong>è·¯ç”±åœ¨æ„å»ºæ—¶æ¸²æŸ“ï¼Œæˆ–è€…åœ¨é‡æ–°éªŒè¯ååå°æ¸²æŸ“</strong>ï¼Œå…¶ç»“æœä¼šè¢«ç¼“å­˜å¹¶ä¸”å¯ä»¥æ¨é€åˆ° CDNã€‚</p>
<p>é€‚ç”¨äºæœªé’ˆå¯¹ç”¨æˆ·ä¸ªæ€§åŒ–ä¸”æ•°æ®å·²çŸ¥çš„æƒ…å†µï¼Œæ¯”å¦‚é™æ€åšå®¢æ–‡ç« ã€äº§å“ä»‹ç»é¡µé¢ç­‰ã€‚</p>
<p>å¼€å¤´ä¸­çš„ä¾‹å­å°±æ˜¯æ„å»ºæ—¶æ¸²æŸ“ã€‚é‚£ä¹ˆå¦‚ä½•åœ¨é‡æ–°éªŒè¯ååå°æ¸²æŸ“å‘¢ï¼Ÿ</p>
<p>è¿™é‡Œè¯´ä¸€ç§æ–¹æ³•ï¼šä½¿ç”¨è·¯ç”±æ®µé…ç½®é¡¹Â <code>revalidate</code>ã€‚</p>
<p>ä¿®æ”¹Â <code>app/cats/page.js</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> revalidate = <span class="hljs-number">10</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {

  <span class="hljs-keyword">const</span> url = (<span class="hljs-keyword">await</span> (<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.thecatapi.com/v1/images/search'</span>)).<span class="hljs-title function_">json</span>())[<span class="hljs-number">0</span>].<span class="hljs-property">url</span>
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{url}</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"300"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"cat"</span> /&gt;</span></span>
  )
}
</code></pre>
<p>æ­¤æ—¶è™½ç„¶åœ¨Â <code>npm run build</code>çš„è¾“å‡ºä¸­ï¼Œ<code>/cats</code>ä¾ç„¶æ˜¯æ ‡è®°ä¸ºé™æ€æ¸²æŸ“ï¼Œä½†å›¾ç‰‡å·²ç»å¯ä»¥æ›´æ–°äº†ï¼Œè™½ç„¶æ¯éš”ä¸€æ®µæ—¶é—´æ‰æ›´æ–°ã€‚</p>
<p>å…¶ä¸­Â <code>revalidate=10</code>è¡¨ç¤ºè®¾ç½®é‡æ–°éªŒè¯é¢‘ç‡ä¸º 10sï¼Œä½†æ˜¯è¦æ³¨æ„ï¼š</p>
<p>è¿™å¥ä»£ç çš„æ•ˆæœå¹¶ä¸æ˜¯è®¾ç½®æœåŠ¡å™¨æ¯ 10s ä¼šè‡ªåŠ¨æ›´æ–°ä¸€æ¬¡Â <code>/cats</code>ã€‚è€Œæ˜¯è‡³å°‘ 10s åè¿›è¡Œé‡æ–°éªŒè¯ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä½ ç°åœ¨è®¿é—®äº†Â <code>/cats</code>ï¼Œæ­¤æ—¶æ—¶é—´è®¾ä¸º 0sï¼Œ10s å†…æŒç»­è®¿é—®ï¼Œ<code>/cats</code>Â è¿”å›çš„éƒ½æ˜¯ä¹‹å‰ç¼“å­˜çš„ç»“æœã€‚å½“ 10s è¿‡åï¼Œå‡è®¾ä½ ç¬¬ 12s åˆè®¿é—®äº†ä¸€æ¬¡Â <code>/cats</code>ï¼Œæ­¤æ—¶è™½ç„¶è¶…è¿‡äº† 10sï¼Œä½†ä¾ç„¶ä¼šè¿”å›ä¹‹å‰ç¼“å­˜çš„ç»“æœï¼Œä½†åŒæ—¶ä¼šè§¦å‘æœåŠ¡å™¨æ›´æ–°ç¼“å­˜ï¼Œå½“ä½ ç¬¬ 13s å†æ¬¡è®¿é—®çš„æ—¶å€™ï¼Œå°±æ˜¯æ›´æ–°åçš„ç»“æœã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œè¶…è¿‡ revalidate è®¾ç½®æ—¶é—´çš„é¦–æ¬¡è®¿é—®ä¼šè§¦å‘ç¼“å­˜æ›´æ–°ï¼Œå¦‚æœæ›´æ–°æˆåŠŸï¼Œåç»­çš„è¿”å›å°±éƒ½æ˜¯æ–°çš„å†…å®¹ï¼Œç›´åˆ°ä¸‹ä¸€æ¬¡è§¦å‘ç¼“å­˜æ›´æ–°ã€‚</p>
<h3 data-id="heading-2">åŠ¨æ€æ¸²æŸ“ï¼ˆDynamic Renderingï¼‰</h3>
<p>è·¯ç”±åœ¨è¯·æ±‚æ—¶æ¸²æŸ“ï¼Œé€‚ç”¨äºé’ˆå¯¹ç”¨æˆ·ä¸ªæ€§åŒ–æˆ–ä¾èµ–è¯·æ±‚ä¸­çš„ä¿¡æ¯ï¼ˆå¦‚ cookieã€URL å‚æ•°ï¼‰çš„æƒ…å†µã€‚</p>
<p>åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­ï¼Œ<strong>å¦‚æœä½¿ç”¨äº†åŠ¨æ€å‡½æ•°ï¼ˆDynamic functionsï¼‰æˆ–è€…æœªç¼“å­˜çš„æ•°æ®è¯·æ±‚ï¼ˆuncached data requestï¼‰ï¼ŒNext.js å°±ä¼šåˆ‡æ¢ä¸ºåŠ¨æ€æ¸²æŸ“</strong>ã€‚</p>
<h4 data-id="heading-3">ä½¿ç”¨åŠ¨æ€å‡½æ•°ï¼ˆDynamic functionsï¼‰</h4>
<p>åœ¨ Next.js ä¸­è¿™äº›åŠ¨æ€å‡½æ•°æ˜¯ï¼š</p>
<ul>
<li><a href="https://juejin.cn/book/7307859898316881957/section/7309079651500949530#heading-7" title="https://juejin.cn/book/7307859898316881957/section/7309079651500949530#heading-7" target="_blank">cookies()</a>Â å’ŒÂ <a href="https://juejin.cn/book/7307859898316881957/section/7309079651500949530#heading-20" title="https://juejin.cn/book/7307859898316881957/section/7309079651500949530#heading-20" target="_blank">headers()</a>Â ï¼šè·å– cookie å’Œ header</li>
<li><code>searchParams</code>ï¼šé¡µé¢æŸ¥è¯¢å‚æ•°</li>
</ul>
<p>ä½¿ç”¨è¿™äº›å‡½æ•°çš„ä»»æ„ä¸€ä¸ªï¼Œéƒ½ä¼šå¯¼è‡´è·¯ç”±è½¬ä¸ºåŠ¨æ€æ¸²æŸ“ã€‚</p>
<p>ç¬¬ä¸€ä¸ªä¾‹å­ï¼Œä¿®æ”¹Â <code>app/cats/page.js</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { cookies } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/headers'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> cookieStore = <span class="hljs-title function_">cookies</span>()
  <span class="hljs-keyword">const</span> theme = cookieStore.<span class="hljs-title function_">get</span>(<span class="hljs-string">'theme'</span>)

  <span class="hljs-keyword">const</span> url = (
    <span class="hljs-keyword">await</span> (<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.thecatapi.com/v1/images/search'</span>)).<span class="hljs-title function_">json</span>()
  )[<span class="hljs-number">0</span>].<span class="hljs-property">url</span>

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{url}</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"300"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"cat"</span> /&gt;</span></span>
}
</code></pre>
<p>è¿è¡ŒÂ <code>npm run build &amp;&amp; npm run start</code>ï¼Œæ­¤æ—¶Â <code>/cats</code>æ˜¾ç¤ºä¸ºåŠ¨æ€æ¸²æŸ“ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/782beaaa5f904cdd8bd556116c2aa561~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768615388&amp;x-signature=zISjU97Scn%2FxjOcVoul0D6cvgZM%3D" alt="image.png" loading="lazy"/></p>
<p>ç°åœ¨æ¯æ¬¡è®¿é—®ï¼Œéƒ½èƒ½è®¿é—®åˆ°ä¸åŒçš„å›¾ç‰‡ã€‚</p>
<p>ç¬¬äºŒä¸ªä¾‹å­ï¼Œä½¿ç”¨ searchParamsï¼Œä¿®æ”¹Â <code>app/cats/page.js</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params">{ searchParams }</span>) {
  <span class="hljs-keyword">const</span> url = (<span class="hljs-keyword">await</span> (<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.thecatapi.com/v1/images/search'</span>)).<span class="hljs-title function_">json</span>())[<span class="hljs-number">0</span>].<span class="hljs-property">url</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{url}</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"300"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"cat"</span> /&gt;</span>
      {new Date().toLocaleTimeString()}
      {JSON.stringify(searchParams)}
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<p>è¿è¡ŒÂ <code>npm run build &amp;&amp; npm run start</code>ï¼Œæ­¤æ—¶Â <code>/cats</code>åŠ¨æ€æ¸²æŸ“ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53b1d78a5af54718ac31833766025446~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5rGf5Lic5rWB5rC0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768615388&amp;x-signature=tZWrwRG14HmzbGhLzn4yusbraxo%3D" alt="image.png" loading="lazy"/></p>
<p><strong>ä½†æ˜¯å›¾ç‰‡åœ¨é¡µé¢åˆ·æ–°çš„æ—¶å€™å¹¶æ²¡æœ‰æ”¹å˜</strong>ã€‚</p>
<p><strong>é¡µé¢ç¡®å®æ˜¯åŠ¨æ€æ¸²æŸ“ï¼Œå› ä¸ºæ¯æ¬¡åˆ·æ–°æ—¶é—´éƒ½å‘ç”Ÿäº†æ”¹å˜</strong>ã€‚</p>
<p>ä½†ä¸ºä»€ä¹ˆå›¾ç‰‡æ²¡æœ‰æ›´æ–°å‘¢ï¼Ÿ</p>
<p>è¿™æ˜¯å› ä¸º<strong>åŠ¨æ€æ¸²æŸ“å’Œæ•°æ®è¯·æ±‚ç¼“å­˜æ˜¯ä¸¤ä»¶äº‹æƒ…</strong>ï¼Œ<strong>é¡µé¢åŠ¨æ€æ¸²æŸ“å¹¶ä¸ä»£è¡¨é¡µé¢æ¶‰åŠçš„è¯·æ±‚ä¸€å®šä¸è¢«ç¼“å­˜</strong>ã€‚</p>
<p>æ­£æ˜¯å› ä¸º fetch æ¥å£çš„è¿”å›æ•°æ®è¢«ç¼“å­˜äº†ï¼Œè¿™æ‰å¯¼è‡´äº†å›¾ç‰‡æ¯æ¬¡éƒ½æ˜¯è¿™ä¸€å¼ ã€‚</p>
<p>ç°åœ¨å†æ¥çœ‹çœ‹ä½¿ç”¨äº†éç¼“å­˜çš„æ•°æ®è¯·æ±‚çš„æƒ…å†µï¼Œä¿®æ”¹Â <code>app/cats/page.js</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params">{ searchParams }</span>) {
  <span class="hljs-keyword">const</span> url = (<span class="hljs-keyword">await</span> (<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.thecatapi.com/v1/images/search'</span>, { <span class="hljs-attr">cache</span>: <span class="hljs-string">'no-store'</span> })).<span class="hljs-title function_">json</span>())[<span class="hljs-number">0</span>].<span class="hljs-property">url</span>
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ˜¯å¦æ¯æ¬¡éƒ½ä¼šæ‰§è¡Œ'</span>)
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{url}</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"300"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"cat"</span> /&gt;</span>
      {new Date().toLocaleTimeString()}
      {JSON.stringify(searchParams)}
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<p>æˆ‘ä»¬ä¸º fetch è¯·æ±‚æ·»åŠ äº†Â <code>{ cache: 'no-store' }</code>ï¼Œä½¿ fetch è¯·æ±‚é€€å‡ºäº†ç¼“å­˜ã€‚æ­¤æ—¶è¿è¡Œç”Ÿäº§ç‰ˆæœ¬ï¼Œå›¾ç‰‡å’Œæ—¶é—´åœ¨åˆ·æ–°çš„æ—¶å€™éƒ½ä¼šæ”¹å˜ã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å‘½ä»¤è¡Œæ¯æ¬¡åˆ·æ–°é¡µé¢éƒ½ä¼šæ‰“å°<code>console.log('æ˜¯å¦æ¯æ¬¡éƒ½ä¼šæ‰§è¡Œ')</code>ã€‚</p>
<p><strong>åŒæ ·æ˜¯è½¬ä¸ºåŠ¨æ€æ¸²æŸ“ï¼Œä¸ºä»€ä¹ˆä½¿ç”¨ cookies çš„æ—¶å€™ï¼Œfetch è¯·æ±‚æ²¡æœ‰è¢«ç¼“å­˜å‘¢ï¼Ÿ</strong></p>
<p>å½“ä½ åœ¨Â <code>headers</code>Â æˆ–Â <code>cookies</code>Â æ–¹æ³•ä¹‹åä½¿ç”¨ fetch è¯·æ±‚ä¼šå¯¼è‡´è¯·æ±‚é€€å‡ºç¼“å­˜ï¼Œè¿™æ˜¯ Next.js çš„è‡ªåŠ¨é€»è¾‘ã€‚</p>
<p>å½“ä½¿ç”¨ <code>searchParams</code> å¹¶æ²¡æœ‰ä½¿fetchè¯·æ±‚é€€å‡ºç¼“å­˜ï¼Œä¸ºäº†é€€å‡ºç¼“å­˜ï¼Œæ‰€ä»¥è¦åŠ <code>{ cache: 'no-store' }</code>ã€‚</p>
<p>ä½†è¿˜æœ‰å“ªäº›æƒ…å†µå¯¼è‡´ fetch è¯·æ±‚è‡ªåŠ¨é€€å‡ºç¼“å­˜å‘¢ï¼Ÿ</p>
<h4 data-id="heading-4">ä½¿ç”¨æœªç¼“å­˜çš„æ•°æ®è¯·æ±‚ï¼ˆuncached data requestï¼‰</h4>
<p>åœ¨ Next.js ä¸­ï¼Œfetch è¯·æ±‚çš„ç»“æœé»˜è®¤ä¼šè¢«ç¼“å­˜ï¼Œä½†ä½ å¯ä»¥è®¾ç½®é€€å‡ºç¼“å­˜ï¼Œä¸€æ—¦ä½ è®¾ç½®äº†é€€å‡ºç¼“å­˜ï¼Œå°±æ„å‘³ç€ä½¿ç”¨äº†æœªç¼“å­˜çš„æ•°æ®è¯·æ±‚ï¼ˆuncached data requestï¼‰ï¼Œä¼šå¯¼è‡´è·¯ç”±è¿›å…¥åŠ¨æ€æ¸²æŸ“ï¼Œå¦‚ï¼š</p>
<ul>
<li><code>fetch</code>Â è¯·æ±‚æ·»åŠ äº†Â <code>cache: 'no-store'</code>é€‰é¡¹</li>
<li><code>fetch</code>Â è¯·æ±‚åœ¨è·¯ç”±å¤„ç†ç¨‹åºä¸­å¹¶ä½¿ç”¨äº†Â <code>POST</code>Â æ–¹æ³•</li>
<li>åœ¨<code>headers</code>Â æˆ–Â <code>cookies</code>Â æ–¹æ³•<strong>ä¹‹å</strong>ä½¿ç”¨Â <code>fetch</code>è¯·æ±‚</li>
<li>é…ç½®äº†è·¯ç”±æ®µé€‰é¡¹Â <code>const dynamic = 'force-dynamic'</code></li>
</ul>
<p>ä¿®æ”¹Â <code>app/cats/page.js</code>ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> url = (<span class="hljs-keyword">await</span> (<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.thecatapi.com/v1/images/search'</span>, { <span class="hljs-attr">cache</span>: <span class="hljs-string">'no-store'</span> })).<span class="hljs-title function_">json</span>())[<span class="hljs-number">0</span>].<span class="hljs-property">url</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">{url}</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"300"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"cat"</span> /&gt;</span>
      {new Date().toLocaleTimeString()}
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}
</code></pre>
<p>æ­¤æ—¶é¡µé¢ä¼šè½¬ä¸ºåŠ¨æ€æ¸²æŸ“ï¼Œæ¯æ¬¡åˆ·æ–°é¡µé¢éƒ½ä¼šå‡ºç°æ–°çš„å›¾ç‰‡ã€‚</p>
<p><strong>å…³äºåŠ¨æ€æ¸²æŸ“å†é‡ç”³ä¸€éï¼šæ•°æ®ç¼“å­˜å’Œæ¸²æŸ“ç­–ç•¥æ˜¯åˆ†å¼€çš„ã€‚å‡å¦‚ä½ é€‰æ‹©äº†åŠ¨æ€æ¸²æŸ“ï¼ŒNext.js ä¼šåœ¨è¯·æ±‚çš„æ—¶å€™å†æ¸²æŸ“ RSC Payload å’Œ HTMLï¼Œä½†å…¶ä¸­æ¶‰åŠçš„æ•°æ®è¯·æ±‚ï¼Œä¾ç„¶æ˜¯å¯ä»¥ä»ç¼“å­˜ä¸­è·å–çš„ã€‚</strong></p>
<h3 data-id="heading-5">Streaming æ¸²æŸ“</h3>
<p><code>Streaming</code> æ¸²æŸ“æ˜¯å°†é¡µé¢çš„ HTML æ‹†åˆ†æˆå¤šä¸ª chunksï¼Œç„¶åé€æ­¥å°†è¿™äº›å—ä»æœåŠ¡ç«¯å‘é€åˆ°å®¢æˆ·ç«¯ã€‚</p>
<p>è¿™æ ·å°±å¯ä»¥æ›´å¿«çš„å±•ç°å‡ºé¡µé¢çš„æŸäº›å†…å®¹ï¼Œè€Œæ— éœ€åœ¨æ¸²æŸ“ UI ä¹‹å‰ç­‰å¾…åŠ è½½æ‰€æœ‰æ•°æ®ã€‚æå‰å‘é€çš„ç»„ä»¶å¯ä»¥æå‰å¼€å§‹æ°´åˆï¼Œè¿™æ ·å½“å…¶ä»–éƒ¨åˆ†è¿˜åœ¨åŠ è½½çš„æ—¶å€™ï¼Œç”¨æˆ·å¯ä»¥å’Œå·²å®Œæˆæ°´åˆçš„ç»„ä»¶è¿›è¡Œäº¤äº’ï¼Œæœ‰æ•ˆæ”¹å–„ç”¨æˆ·ä½“éªŒã€‚</p>
<p>åœ¨ Next.js ä¸­æœ‰ä¸¤ç§å®ç° Streaming çš„æ–¹æ³•ï¼š</p>
<ol>
<li>é¡µé¢çº§åˆ«ï¼Œä½¿ç”¨Â <code>loading.jsx</code></li>
<li>ç‰¹å®šç»„ä»¶ï¼Œä½¿ç”¨Â <code>&lt;Suspense&gt;</code></li>
</ol>
<h2 data-id="heading-6">æ€»ç»“</h2>
<p>é™æ€æ¸²æŸ“æ˜¯æŒ‡ï¼š<strong>åœ¨æ„å»ºé˜¶æ®µï¼ˆnpm run buildï¼‰</strong> ï¼ŒNext.js å°±æŠŠé¡µé¢è½¬æ¢æˆ HTMLã€CSSã€JS æ–‡ä»¶ï¼Œéƒ¨ç½²åè¿™äº›æ–‡ä»¶ç›´æ¥å­˜åœ¨æœåŠ¡å™¨ / CDN ä¸Šã€‚ç”¨æˆ·è®¿é—®æ—¶ï¼ŒæœåŠ¡å™¨ä¸ç”¨å†è®¡ç®—ï¼Œç›´æ¥æŠŠç°æˆçš„ HTML è¿”å›ç»™ç”¨æˆ·ã€‚</p>
<p>Next.js 14+ï¼ˆApp Routerï¼‰ä¸­ï¼Œ<strong>é»˜è®¤å°±æ˜¯é™æ€æ¸²æŸ“</strong>ï¼Œæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p>
<ul>
<li>é¡µé¢ / ç»„ä»¶ä¸­æ²¡æœ‰ä½¿ç”¨åŠ¨æ€å‡½æ•°ï¼ˆæ¯”å¦‚Â <code>headers()</code>ã€<code>cookies()</code>ã€<code>useSearchParams()</code>Â ç­‰ï¼‰ï¼›</li>
<li>æ•°æ®è¯·æ±‚ç”¨Â <code>fetch</code>Â ä¸”æ²¡æœ‰é…ç½®<code>cache: 'no-store'</code>ï¼›</li>
<li>æ²¡æœ‰æ˜¾å¼å£°æ˜Â <code>export const dynamic = 'force-dynamic'</code>ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// app/page.tsxï¼ˆé¦–é¡µï¼Œé™æ€æ¸²æŸ“ï¼‰</span>
<span class="hljs-comment">// æ•°æ®è¯·æ±‚ï¼šfetch é»˜è®¤é™æ€ï¼ˆæ„å»ºæ—¶è·å–ï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getPosts</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// fetch æ— ç‰¹æ®Šé…ç½®ï¼Œæ„å»ºæ—¶è¯·æ±‚ä¸€æ¬¡ï¼Œç»“æœå›ºåŒ–åˆ° HTML ä¸­</span>
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/posts'</span>);
  <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>();
}
</code></pre>
<p>åŠ¨æ€æ¸²æŸ“æ˜¯æŒ‡ï¼š<strong>ä¸åœ¨æ„å»ºé˜¶æ®µç”Ÿæˆ HTML</strong>ï¼Œè€Œæ˜¯åœ¨ç”¨æˆ·æ¯æ¬¡è¯·æ±‚æ—¶ï¼ˆè¿è¡Œæ—¶ï¼‰ï¼ŒæœåŠ¡å™¨å®æ—¶è®¡ç®—ã€ç”Ÿæˆ HTML å¹¶è¿”å›ã€‚</p>
<ul>
<li>ä½¿ç”¨åŠ¨æ€å‡½æ•°ï¼š<code>headers()</code>ã€<code>cookies()</code>ã€<code>useSearchParams()</code>ã€<code>redirect()</code>ã€<code>notFound()</code>Â ç­‰ï¼›</li>
<li>æ•°æ®è¯·æ±‚é…ç½®Â <code>cache: 'no-store'</code>ï¼›</li>
<li>æ˜¾å¼å£°æ˜Â <code>export const dynamic = 'force-dynamic'</code>ï¼ˆApp Routerï¼‰ï¼›</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// app/user/page.tsxï¼ˆç”¨æˆ·é¡µï¼ŒåŠ¨æ€æ¸²æŸ“ï¼‰</span>
<span class="hljs-keyword">import</span> { cookies } <span class="hljs-keyword">from</span> <span class="hljs-string">'next/headers'</span>;

<span class="hljs-comment">// æ˜¾å¼å£°æ˜åŠ¨æ€æ¸²æŸ“ï¼ˆå¯é€‰ï¼Œç”¨äº†åŠ¨æ€å‡½æ•°ä¼šè‡ªåŠ¨è§¦å‘ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> dynamic = <span class="hljs-string">'force-dynamic'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserInfo</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// è¯»å– cookiesï¼ˆåŠ¨æ€å‡½æ•°ï¼‰ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½è¦è¯»</span>
  <span class="hljs-keyword">const</span> cookieStore = <span class="hljs-title function_">cookies</span>();
  <span class="hljs-keyword">const</span> userId = cookieStore.<span class="hljs-title function_">get</span>(<span class="hljs-string">'userId'</span>)?.<span class="hljs-property">value</span>;
  
  <span class="hljs-comment">// æ¯æ¬¡è¯·æ±‚éƒ½å®æ—¶è·å–ç”¨æˆ·æ•°æ®</span>
  <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`https://api.example.com/user/<span class="hljs-subst">${userId}</span>`</span>, {
    <span class="hljs-attr">cache</span>: <span class="hljs-string">'no-store'</span>, <span class="hljs-comment">// ç¦ç”¨ç¼“å­˜ï¼Œå¼ºåˆ¶å®æ—¶è¯·æ±‚</span>
  });
  <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">json</span>();
}
</code></pre>
<p>æ³¨æ„ï¼š<strong>æ¸²æŸ“çš„æ–¹å¼å’Œ æ•°æ®çš„ç¼“å­˜æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„å¼€å…³ï¼Œäº’ä¸ç»‘å®š</strong>ã€‚</p>
<p>åŠ¨æ€æ¸²æŸ“å†³å®šçš„æ˜¯<strong>ä»€ä¹ˆæ—¶å€™æŠŠæ•°æ®ç»„è£…æˆé¡µé¢ï¼ˆRSC Payload/HTMLï¼‰</strong> ï¼Œè¯·æ±‚æ—¶å®æ—¶ç»„è£…ï¼›</p>
<p>æ•°æ®ç¼“å­˜å†³å®šçš„æ˜¯<strong>ç»„è£…é¡µé¢æ—¶ï¼Œæ•°æ®æ˜¯ä»ç¼“å­˜æ‹¿ï¼Œè¿˜æ˜¯å®æ—¶è¯·æ±‚æ‹¿</strong>ï¼ˆå¯é€‰ç¼“å­˜ï¼‰ã€‚</p>
<p>ä¸¤è€…çš„å…³ç³»ï¼š<strong>åŠ¨æ€æ¸²æŸ“æ˜¯ç»„è£…é¡µé¢çš„æ—¶æœºï¼Œæ•°æ®ç¼“å­˜æ˜¯ç»„è£…é¡µé¢çš„åŸæ–™æ¥æº</strong> ã€‚</p>
<ul>
<li><strong>åŠ¨æ€æ¸²æŸ“ = åŠ¨æ€å‡ºé¤</strong>ï¼šé¡¾å®¢ç‚¹å•åï¼ˆç”¨æˆ·è¯·æ±‚ï¼‰ï¼Œåå¨æ‰å¼€å§‹æŠŠé£Ÿæç»„è£…æˆå¥—é¤ï¼ˆç”Ÿæˆ RSC Payload/HTMLï¼‰ï¼Œè€Œä¸æ˜¯æå‰åšå¥½å¥—é¤ï¼ˆé™æ€æ¸²æŸ“ï¼‰ï¼›</li>
<li><strong>æ•°æ®ç¼“å­˜ = é£Ÿæç¼“å­˜</strong>ï¼šåå¨ç»„è£…å¥—é¤æ—¶ï¼Œé£Ÿæå¯ä»¥æ˜¯æå‰å¤‡å¥½åœ¨å†°ç®±çš„ç¼“å­˜é£Ÿæï¼ˆæ•°æ®ç¼“å­˜ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ç°å»èœå¸‚åœºä¹°çš„æ–°é²œé£Ÿæï¼ˆå®æ—¶è¯·æ±‚ï¼‰ï¼›</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Nuxt css å¦‚ä½•å†™ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7593234983755218954</link>    <guid>https://juejin.cn/post/7593234983755218954</guid>    <pubDate>2026-01-10T02:51:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593234983755218954" data-draft-id="7592873628586278912" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Nuxt css å¦‚ä½•å†™ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-10T02:51:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ±Ÿæ¹–æ–‡äºº"/> <meta itemprop="url" content="https://juejin.cn/user/3044986347066480"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Nuxt css å¦‚ä½•å†™ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3044986347066480/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ±Ÿæ¹–æ–‡äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T02:51:25.000Z" title="Sat Jan 10 2026 02:51:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">æ ·å¼</h2>
<p><code>Nuxt</code>åœ¨ æ ·å¼å¤„ç†æ–¹é¢å…·æœ‰é«˜åº¦çµæ´»æ€§ã€‚ä½ å¯ä»¥ç¼–å†™è‡ªå·±çš„æ ·å¼ï¼Œæˆ–å¼•ç”¨æœ¬åœ°å’Œå¤–éƒ¨æ ·å¼è¡¨ã€‚å¯ä»¥ä½¿ç”¨<code>CSSé¢„å¤„ç†å™¨</code>ã€<code>CSSæ¡†æ¶</code>ã€<code>UIåº“</code>å’Œ<code>Nuxtæ¨¡å—</code>æ¥ä¸ºåº”ç”¨æ·»åŠ æ ·å¼ã€‚</p>
<h2 data-id="heading-1">åœ¨ç»„ä»¶ä¸­å¯¼å…¥</h2>
<p>ç›´æ¥åœ¨é¡µé¢ã€å¸ƒå±€å’Œç»„ä»¶ä¸­å¯¼å…¥æ ·å¼è¡¨ã€‚</p>
<p>å¯ä»¥ç”¨jså¯¼å…¥ï¼Œæˆ–è€…<code>CSS</code>çš„<code>@import</code>è¯­å¥ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">// pages/index.vue

&lt;script&gt;
// æ˜¯å“¦è¦ç»™ä½ é™æ€å¯¼å…¥ä»¥ç¡®ä¿æœåŠ¡ç«¯å…¼å®¹æ€§
import '~/assets/css/first.css'

// æ³¨æ„ï¼šåŠ¨æ€å¯¼å…¥ä¸å…¼å®¹æœåŠ¡ç«¯
import('~/assets/css/first.css')
&lt;/script&gt;

&lt;style&gt;
@import url("~/assets/css/second.css");
&lt;/style&gt;
</code></pre>
<p>è¿™æ ·æ ·å¼è¡¨ä¼šè¢«å†…è”åˆ°<code>Nuxt</code>æ¸²æŸ“çš„<code>HTML</code>ä¸­ã€‚</p>
<h2 data-id="heading-2">CSSé…ç½®é¡¹</h2>
<p>å¯ä»¥åœ¨<code>Nuxt</code>é…ç½®ä¸­ä½¿ç”¨<code>css</code>å±æ€§ã€‚æ ·å¼è¡¨æœ€åˆé€‚çš„ä½ç½®æ˜¯<code>assets/</code>ç›®å½•ã€‚ç„¶åå¼•ç”¨å…¶è·¯å¾„ï¼Œ<code>Nuxt</code>ä¼šå°†å…¶åŒ…å«åˆ°åº”ç”¨çš„æ‰€æœ‰é¡µé¢ä¸­ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// nuxt.confg.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineNuxtConfig</span>({
  <span class="hljs-attr">css</span>: [<span class="hljs-string">'~/assets/css/main.css'</span>]
})
</code></pre>
<blockquote>
<p>è¿™äº›æ ·å¼è¡¨ä¼šè¢«å†…è”åˆ°<code>Nuxt</code>æ¸²æŸ“çš„<code>HTML</code>ä¸­ï¼Œå…¨å±€æ³¨å…¥å¹¶å‡ºç°åœ¨æ‰€æœ‰é¡µé¢ã€‚</p>
</blockquote>
<h3 data-id="heading-3">ä½¿ç”¨å­—ä½“</h3>
<p>å°†æœ¬åœ°å­—ä½“æ–‡ä»¶æ”¾åœ¨<code>~/public/</code>ç›®å½•ä¸‹ï¼Œä¾‹å¦‚<code>~/public/fonts</code>ã€‚ç„¶åå¯ä»¥åœ¨æ ·å¼è¡¨ä¸­ä½¿ç”¨<code>url()</code>å¼•ç”¨å®ƒä»¬ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@font-face</span> {
  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'FarAwayGalaxy'</span>;
  <span class="hljs-attribute">src</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">'fonts/FarAwayGalaxy.woff'</span>) <span class="hljs-built_in">format</span>(<span class="hljs-string">'woff'</span>);
  <span class="hljs-attribute">font-weight</span>: normal;
  <span class="hljs-attribute">font-style</span>: normal;
  <span class="hljs-attribute">font-display</span>: swap;
}
</code></pre>
<p>ç„¶ååœ¨æ ·å¼è¡¨ã€é¡µé¢æˆ–ç»„ä»¶ä¸­æŒ‰åç§°å¼•ç”¨ä½ çš„å­—ä½“ï¼š</p>
<pre><code class="hljs language-css" lang="css">&lt;style&gt;
<span class="hljs-selector-tag">h1</span> {
  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'FarAwayGalaxy'</span>, sans-serif;
}
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-4">é€šè¿‡NPMåˆ†å‘çš„æ ·å¼è¡¨</h3>
<p>ä½ ä¹Ÿå¯ä»¥å¼•ç”¨é€šè¿‡<code>npm</code>åˆ†å‘çš„æ ·å¼è¡¨ã€‚ä»¥æµè¡Œçš„<code>animate.css</code>åº“ä¸ºä¾‹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">npm install animate.css
</code></pre>
<pre><code class="hljs language-bash" lang="bash">yarn add animate.css
</code></pre>
<pre><code class="hljs language-bash" lang="bash">pnpm install animate.css
</code></pre>
<pre><code class="hljs language-bash" lang="bash">bun install animate.css
</code></pre>
<p>ç„¶åä½ å¯ä»¥ç›´æ¥åœ¨é¡µé¢ã€å¸ƒå±€å’Œç»„ä»¶ä¸­å¼•ç”¨å®ƒï¼š</p>
<pre><code class="hljs language-html" lang="html">// app.vue
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-string">'animate.css'</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-keyword">@import</span> url(<span class="hljs-string">"animate.css"</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>ä¹Ÿå¯ä»¥åœ¨<code>Nuxt</code>é…ç½®çš„<code>css</code>å±æ€§ä¸­ä»¥å­—ç¬¦ä¸²å½¢å¼å¼•ç”¨è¿™ä¸ªåŒ…ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// nuxt.config.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineNuxtConfig</span>({
  <span class="hljs-attr">css</span>: [<span class="hljs-string">'animate.css'</span>] 
})
</code></pre>
<h2 data-id="heading-5">å¤–éƒ¨æ ·å¼è¡¨</h2>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// nuxt.config.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineNuxtConfig</span>({
  <span class="hljs-attr">app</span>: {
    <span class="hljs-attr">head</span>: {
      <span class="hljs-attr">link</span>: [
        {
          <span class="hljs-attr">rel</span>: <span class="hljs-string">'stylesheet'</span>,
          <span class="hljs-attr">href</span>: <span class="hljs-string">'https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css'</span>
        }
      ]
    }
  }
})
</code></pre>
<h3 data-id="heading-6">åŠ¨æ€æ·»åŠ æ ·å¼è¡¨</h3>
<p>ä½ å¯ä»¥ä½¿ç”¨<code>useHead</code>ç»„åˆå¼<code>API</code>åœ¨ä»£ç ä¸­åŠ¨æ€è®¾ç½®<code>head</code>ä¸­çš„å€¼ã€‚</p>
<blockquote>
<p>é˜…è¯»æ›´å¤š<code>Docs &gt; API &gt; Composables &gt; Use Head.</code></p>
</blockquote>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">useHead</span>({
  <span class="hljs-attr">link</span>: [{
    <span class="hljs-attr">rel</span>: <span class="hljs-string">'stylesheet'</span>,
    <span class="hljs-attr">href</span>: <span class="hljs-string">'https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css'</span>
  }]
})
</code></pre>
<p><code>Nuxt</code>åº•å±‚ä½¿ç”¨<code>unhead</code>ã€‚</p>
<h3 data-id="heading-7">ä½¿ç”¨ Nitro æ’ä»¶ ä¿®æ”¹æ¸²æŸ“çš„ Head</h3>
<p>å¦‚æœéœ€è¦æ›´é«˜çº§çš„æ§åˆ¶ï¼Œä½ å¯ä»¥é€šè¿‡é’©å­æ‹¦æˆªæ¸²æŸ“çš„<code>html</code>å¹¶ç¼–ç¨‹ä¿®æ”¹<code>head</code>ã€‚</p>
<p>åœ¨<code>~/server/plugins/my-plugin.ts</code>ä¸­åˆ›å»ºä¸€ä¸ªæ’ä»¶ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// server/plugins/my-plugin.ts</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineNitroPlugin</span>(<span class="hljs-function">(<span class="hljs-params">nitro</span>) =&gt;</span> {
  nitro.<span class="hljs-property">hooks</span>.<span class="hljs-title function_">hook</span>(<span class="hljs-string">'render:html'</span>, <span class="hljs-function">(<span class="hljs-params">html</span>) =&gt;</span> {
    html.<span class="hljs-property">head</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">'&lt;link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/ajax/libs/animate.css/4.1.1/animate.min.css"&gt;'</span>)
  })
})
</code></pre>
<p>å¤–éƒ¨æ ·å¼è¡¨æ˜¯æ¸²æŸ“é˜»å¡èµ„æºï¼šå®ƒä»¬å¿…é¡»åœ¨æµè§ˆå™¨æ¸²æŸ“é¡µé¢ä¹‹å‰åŠ è½½å’Œå¤„ç†ã€‚åŒ…å«ä¸å¿…è¦çš„å¤§æ ·å¼è¡¨çš„ç½‘é¡µéœ€è¦æ›´é•¿æ—¶é—´æ¥æ¸²æŸ“ã€‚</p>
<h2 data-id="heading-8">ä½¿ç”¨é¢„å¤„ç†å™¨</h2>
<p>è¦ä½¿ç”¨<code>SCSS</code>ã€<code>Sass</code>ã€<code>Less</code>æˆ–<code>Stylus</code>ç­‰é¢„å¤„ç†å™¨ï¼Œé¦–å…ˆéœ€è¦å®‰è£…å®ƒä»¬ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">// Sass &amp; SCSS
npm install -D sass
</code></pre>
<pre><code class="hljs language-bash" lang="bash">// Less
npm install -D less
</code></pre>
<pre><code class="hljs language-bash" lang="bash">// Stylus
npm install -D stylus
</code></pre>
<p>ç¼–å†™æ ·å¼è¡¨æœ€åˆé€‚çš„ä½ç½®æ˜¯<code>assets</code>ç›®å½•ã€‚ç„¶åå¯ä»¥åœ¨<code>app.vue</code>ï¼ˆæˆ–å¸ƒå±€æ–‡ä»¶ï¼‰ä¸­ä½¿ç”¨é¢„å¤„ç†å™¨çš„è¯­æ³•å¯¼å…¥æºæ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">// pages/app.vue

&lt;style lang="scss"&gt;
@use "~/assets/scss/main.scss";
&lt;/style&gt;
</code></pre>
<p>æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨<code>Nuxt</code>é…ç½®çš„<code>css</code>å±æ€§ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// nuxt.config.ts</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineNuxtConfig</span>({
  <span class="hljs-attr">css</span>: [<span class="hljs-string">'~/assets/scss/main.scss'</span>]
})
</code></pre>
<blockquote>
<p>åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œç¼–è¯‘åçš„æ ·å¼è¡¨éƒ½ä¼šè¢«å†…è”åˆ°<code>Nuxt</code>æ¸²æŸ“çš„HTMLä¸­ã€‚</p>
</blockquote>
<p>å¦‚æœéœ€è¦åœ¨é¢„å¤„ç†æ–‡ä»¶ä¸­æ³¨å…¥ä»£ç ï¼Œæ¯”å¦‚å¸¦æœ‰é¢œè‰²å˜é‡çš„<code>Sass</code>å±€éƒ¨æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨<code>Vite</code>çš„<code>é¢„å¤„ç†å™¨é€‰é¡¹</code>ã€‚</p>
<p>åœ¨<code>assets</code>ç›®å½•ä¸­åˆ›å»ºä¸€äº›å±€éƒ¨æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-css" lang="css">assets/_colors<span class="hljs-selector-class">.scss</span>

$primary: <span class="hljs-number">#49240F</span>;
$secondary: <span class="hljs-number">#E4A79D</span>;
</code></pre>
<p>ç„¶ååœ¨<code>nuxt.config</code>ä¸­ï¼š</p>
<pre><code class="hljs language-css" lang="css">// SCSS

export default defineNuxtConfig({
  vite: {
    css: {
      preprocessorOptions: {
        scss: {
          additionalData: <span class="hljs-string">'@use "~/assets/_colors.scss" as *;'</span>
        }
      }
    }
  }
}) 
</code></pre>
<p><code>Nuxt</code>é»˜è®¤ä½¿ç”¨<code>Vite</code>ã€‚å¦‚æœä½ æƒ³ä½¿ç”¨<code>webpack</code>ï¼Œè¯·å‚è€ƒæ¯ä¸ªé¢„å¤„ç†å™¨åŠ è½½å™¨çš„<code>æ–‡æ¡£</code>ã€‚</p>
<h3 data-id="heading-9">é¢„å¤„ç†å™¨å·¥ä½œçº¿ç¨‹ï¼ˆå®éªŒæ€§ï¼‰</h3>
<p><code>Vite</code>æä¾›äº†ä¸€ä¸ª<code>å®éªŒæ€§é€‰é¡¹</code>ï¼Œå¯ä»¥åŠ é€Ÿé¢„å¤„ç†å™¨çš„ä½¿ç”¨ã€‚</p>
<p>ä½ å¯ä»¥åœ¨<code>nuxt.config</code>ä¸­å¯ç”¨å®ƒï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineNuxtConfig</span>({
  <span class="hljs-attr">vite</span>: {
    <span class="hljs-attr">css</span>: {
      <span class="hljs-attr">preprocessorMaxWorkers</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// CPUæ•°é‡å‡1</span>
    }
  }
})
</code></pre>
<blockquote>
<p>è¿™æ˜¯ä¸€ä¸ªå®éªŒæ€§é€‰é¡¹</p>
</blockquote>
<h2 data-id="heading-10">å•æ–‡ä»¶ç»„ä»¶ï¼ˆSFCï¼‰æ ·å¼</h2>
<p><code>Vue</code>å’Œ<code>SFC</code>æœ€æ£’çš„ä¸€ç‚¹æ˜¯å®ƒå¤©ç„¶æ“…é•¿å¤„ç†æ ·å¼ã€‚ä½ å¯ä»¥ç›´æ¥åœ¨ç»„ä»¶æ–‡ä»¶çš„<code>style</code>å—ä¸­ç¼–å†™<code>CSS</code>æˆ–é¢„å¤„ç†å™¨ä»£ç ï¼Œå› æ­¤ä½ å°†è·å¾—å‡ºè‰²çš„å¼€å‘ä½“éªŒï¼Œè€Œæ— éœ€ä½¿ç”¨<code>CSS-in-JS</code>ä¹‹ç±»çš„ä¸œè¥¿ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨<code>CSS-in-JS</code>ï¼Œå¯ä»¥æ‰¾åˆ°æ”¯æŒå®ƒçš„ç¬¬ä¸‰æ–¹åº“å’Œæ¨¡å—ï¼Œä¾‹å¦‚<code>pinceau</code>ã€‚</p>
<p>å¯ä»¥å‚è€ƒ<code>Vueæ–‡æ¡£</code>è·å–å…³äºåœ¨<code>SFC</code>ä¸­ä¸ºç»„ä»¶æ·»åŠ æ ·å¼çš„å…¨é¢å‚è€ƒã€‚</p>
<h3 data-id="heading-11">ç±»å’Œæ ·å¼ç»‘å®š</h3>
<p>å¯ä»¥åˆ©ç”¨<code>Vue SFC</code>åŠŸèƒ½é€šè¿‡<code>class</code>å’Œ<code>style</code>å±æ€§ä¸ºç»„ä»¶æ·»åŠ æ ·å¼ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// Refå’ŒReactive</span>

&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">const</span> isActive = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">true</span>)
<span class="hljs-keyword">const</span> hasError = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> classObject = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">active</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-string">'text-danger'</span>: <span class="hljs-literal">false</span>
})
&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"static"</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ active: isActive, 'text-danger': hasError }"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"classObject"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-12">ä½¿ç”¨v-bindçš„åŠ¨æ€æ ·å¼</h3>
<p>ä½ å¯ä»¥ä½¿ç”¨<code>v-bind</code>å‡½æ•°åœ¨<code>style</code>å—ä¸­å¼•ç”¨<code>JavaScript</code>å˜é‡å’Œè¡¨è¾¾å¼ã€‚ç»‘å®šæ˜¯åŠ¨æ€çš„ï¼Œè¿™æ„å‘³è¿™å¦‚æœå˜é‡å€¼å‘ç”Ÿå˜åŒ–ï¼Œæ ·å¼ä¹Ÿä¼šæ›´æ–°ã€‚</p>
<pre><code class="hljs language-ts" lang="ts">&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">const</span> color = <span class="hljs-title function_">ref</span>(<span class="hljs-string">"red"</span>)
&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text"</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.text</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">v-bind</span>(color);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-13">ä½œç”¨åŸŸæ ·å¼</h3>
<p><code>scoped</code>å±æ€§å…è®¸ä½ ä»¥éš”ç¦»çš„æ–¹å¼ä¸ºç»„ä»¶æ·»åŠ æ ·å¼ã€‚ä½¿ç”¨æ­¤å±æ€§å£°æ˜çš„æ ·å¼ä»…é€‚ç”¨æ­¤ç»„ä»¶ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div class="example"&gt;hi&lt;/div&gt;
&lt;/template&gt;

&lt;style scoped&gt;
.example {
  color: red;
}
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-14">CSSæ¨¡å—</h3>
<p>ä½ å¯ä»¥ä½¿ç”¨<code>CSSæ¨¡å—</code>å’Œ<code>module</code>å±æ€§ã€‚é€šè¿‡æ³¨å…¥çš„<code>$style</code>å˜é‡è®¿é—®å®ƒã€‚</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;p :style="$style.red"&gt;This should be red&lt;/p&gt;
&lt;/template&gt;

&lt;style module&gt;
.red {
  color: red;
}
&lt;/style&gt;
</code></pre>
<h3 data-id="heading-15">é¢„å¤„ç†å™¨æ”¯æŒ</h3>
<p><code>SFC</code>çš„<code>style</code>å—æ”¯æŒé¢„å¤„ç†å™¨è¯­æ³•ã€‚<code>Vite</code>å†…ç½®æ”¯æŒ<code>.scss</code>ã€<code>.sass</code>ã€<code>.less</code>ã€<code>.styl</code>å’Œ<code>.stylus</code>æ–‡ä»¶ï¼Œæ— éœ€é…ç½®ã€‚ä½ åªéœ€è¦å…ˆå®‰è£…å®ƒä»¬ï¼Œå®ƒä»¬å°±å¯ä»¥ç›´æ¥åœ¨<code>SFC</code>ä¸­ä½¿ç”¨<code>lang</code>å±æ€§ã€‚</p>
<pre><code class="hljs language-css" lang="css">// SCSS

&lt;style lang="scss"&gt;
  <span class="hljs-comment">/* åœ¨è¿™é‡Œç¼–å†™scss */</span>
&lt;/style&gt;
</code></pre>
<pre><code class="hljs language-css" lang="css">// Sass
&lt;style&gt;
  <span class="hljs-comment">/* åœ¨è¿™é‡Œç¼–å†™sass */</span>
&lt;/style&gt;
</code></pre>
<pre><code class="hljs language-css" lang="css">// LESS
&lt;style lang="less"&gt;
  <span class="hljs-comment">/* åœ¨è¿™é‡Œç¼–å†™less */</span>
&lt;/style&gt;
</code></pre>
<pre><code class="hljs language-css" lang="css">// Stylus
&lt;style lang="stylus"&gt;
  <span class="hljs-comment">/* åœ¨è¿™é‡Œç¼–å†™stylus */</span>
&lt;/style&gt;
</code></pre>
<h2 data-id="heading-16">ä½¿ç”¨PostCSS</h2>
<p><code>Nuxt</code>å†…ç½®äº†<code>postcss</code>ã€‚ä½ å¯ä»¥åœ¨<code>nuxt.config</code>æ–‡ä»¶ä¸­é…ç½®å®ƒã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// nuxt.config.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineNuxtConfig</span>({
  <span class="hljs-attr">postcss</span>: {
    <span class="hljs-attr">plugins</span>: {
      <span class="hljs-string">'postcss-nested'</span>: {},
      <span class="hljs-string">'postcss-custom-media'</span>: {}
    }
  }
})
</code></pre>
<p>ä¸ºäº†åœ¨<code>SFC</code>ä¸­è·å¾—æ­£ç¡®çš„è¯­æ³•é«˜äº®ï¼Œä½ å¯ä»¥ä½¿ç”¨<code>postcss</code>çš„<code>lang</code>å±æ€§ã€‚</p>
<pre><code class="hljs language-css" lang="css">&lt;style lang="postcss"&gt;
  <span class="hljs-comment">/* åœ¨è¿™é‡Œç¼–å†™postcss */</span>
&lt;/style&gt;
</code></pre>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>Nuxt</code>å·²ç»é¢„é…ç½®äº†ä»¥ä¸‹æ’ä»¶ï¼š</p>
<ul>
<li><code>postcss-import</code>: æ”¹è¿›<code>@import</code>è§„åˆ™</li>
<li><code>postcss-url</code>: è½¬æ¢<code>url()</code>è¯­å¥</li>
<li><code>autoprefixer</code>: è‡ªåŠ¨æ·»åŠ ä¾›åº”å•†å‰ç¼€</li>
<li><code>cssnano</code>: å‹ç¼©å’Œæ¸…é™¤</li>
</ul>
<h2 data-id="heading-17">åˆ©ç”¨å¸ƒå±€å®ç°å¤šç§æ ·å¼</h2>
<p>å¦‚æœä½ éœ€è¦ä¸ºåº”ç”¨çš„ä¸åŒéƒ¨åˆ†å®Œå…¨ä¸åŒçš„æ ·å¼ï¼Œå¯ä»¥ä½¿ç”¨å¸ƒå±€ã€‚ä¸ºä¸åŒçš„å¸ƒå±€ä½¿ç”¨ä¸åŒçš„æ ·å¼ã€‚</p>
<pre><code class="hljs language-html" lang="html">// vue
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"default-layout"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Default Layout<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.default-layout</span> {
    <span class="hljs-attribute">color</span>: red;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<h2 data-id="heading-18">ç¬¬ä¸‰æ–¹åº“å’Œæ¨¡å—</h2>
<p><code>Nuxt</code>åœ¨æ ·å¼æ–¹é¢æ²¡æœ‰å¼ºåˆ¶æ„è§ï¼Œå¹¶ä¸ºä½ æä¾›äº†å¤šç§é€‰æ‹©ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•ä½ æƒ³è¦çš„æ ·å¼å·¥å…·ï¼Œä¾‹å¦‚æµè¡Œçš„åº“å¦‚<code>UnoCSS</code>æˆ–<code>Tailwind CSS</code>ã€‚</p>
<p>ç¤¾åŒºå’Œ<code>Nuxt</code>å›¢é˜Ÿå¼€å‘äº†è®¸å¤š<code>Nuxt</code>æ¨¡å—ä»¥ä½¿é›†æˆæ›´å®¹æ˜“ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fnuxt.com.cn%2Fmodules" target="_blank" title="https://nuxt.com.cn/modules" ref="nofollow noopener noreferrer">nuxt.com.cn/modules</a></p>
<ul>
<li><code>UnoCSS</code>ï¼šå³æ—¶æŒ‰éœ€åŸå­<code>CSS</code>å¼•æ“</li>
<li><code>Tailwind CSS</code>ï¼šå®ç”¨ä¼˜å…ˆçš„<code>CSS</code>æ¡†æ¶</li>
<li><code>Fontaine</code>ï¼šå­—ä½“åº¦é‡å›é€€</li>
<li><code>Pinceau</code>ï¼šé€‚åº”æ€§æ ·å¼æ¡†æ¶</li>
<li><code>Nuxt UI</code>ï¼šç°ä»£<code>Web</code>åº”ç”¨çš„<code>UI</code>åº“</li>
<li><code>Panda CSS</code>ï¼šåœ¨æ„å»ºæ—¶ç”ŸæˆåŸå­<code>CSS</code>çš„<code>CSS-in-JS</code>å¼•æ“</li>
</ul>
<p><code>Nuxt</code>æ¨¡å—ä¸ºä½ æä¾›äº†å¼€ç®±å³ç”¨çš„è‰¯å¥½å¼€å‘ä½“éªŒï¼Œä½†è¯·è®°ä½ï¼Œå¦‚æœä½ æœ€å–œæ¬¢çš„å·¥å…·æ²¡æœ‰æ¨¡å—ï¼Œå¹¶ä¸æ„å‘³ç€ä½ ä¸èƒ½åœ¨<code>Nuxt</code>ä¸­ä½¿ç”¨å®ƒï¼ä½ å¯ä»¥ä¸ºè‡ªå·±çš„é¡¹ç›®è‡ªè¡Œé…ç½®ã€‚æ ¹æ®å·¥å…·çš„ä¸åŒï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨<code>Nuxtæ’ä»¶</code>å’Œ/æˆ–<code>åˆ›å»ºè‡ªå·±çš„æ¨¡å—</code>ã€‚</p>
<h3 data-id="heading-19">è½»æ¾åŠ è½½<code>Web</code>å­—ä½“</h3>
<p>å¯ä»¥ç”¨<code>Nuxt Google Fontsæ¨¡å—</code>å»åŠ è½½<code>Google</code>å­—ä½“ã€‚</p>
<p>å¦‚æœä½¿ç”¨<code>UnoCSS</code>ï¼Œè¯·æ³¨æ„é™„å¸¦äº†ä¸€ä¸ª<code>webå­—ä½“é¢„è®¾</code>ï¼Œå¯ä»¥æ–¹ä¾¿ä»æä¾›å•†ï¼ˆåŒ…å«<code>Google</code>å­—ä½“ç­‰ï¼‰åŠ è½½å­—ä½“ã€‚</p>
<h2 data-id="heading-20">é«˜çº§</h2>
<h3 data-id="heading-21">è¿‡æ¸¡æ•ˆæœ</h3>
<p><code>Nuxt</code>å¸¦æœ‰<code>Vue</code>ç›¸åŒçš„<code>&lt;Transition&gt;</code>å…ƒç´ ï¼Œå¹¶ä¸”è¿˜æ”¯æŒå®éªŒæ€§çš„<code>è§†å›¾è¿‡æ¸¡API</code>ã€‚</p>
<blockquote>
<p>Docs - Getting Started - Transitions</p>
</blockquote>
<h3 data-id="heading-22">å­—ä½“é«˜çº§ä¼˜åŒ–</h3>
<p>æ¨èä½¿ç”¨<code>Fontaine</code>å»å‡å°‘<code>CLS</code>ã€‚è¦æ›´é«˜çº§çš„åŠŸèƒ½ï¼Œè€ƒè™‘åˆ›å»ºä¸€ä¸ª<code>Nuxt</code>æ¨¡å—å»æ‰©å±•æ„å»ºè¿‡ç¨‹æˆ–<code>Nuxt</code>è¿è¡Œæ—¶ã€‚</p>
<blockquote>
<p>å§‹ç»ˆè®°å¾—åˆ©ç”¨<code>Web</code>ç”Ÿæ€ç³»ç»Ÿä¸­å¯ç”¨çš„å„ç§å·¥å…·å’ŒæŠ€æœ¯ï¼Œä½¿ä¸ºåº”ç”¨æ·»åŠ æ ·å¼æ›´ç®€å•é«˜æ•ˆã€‚æ— è®ºä½ æ˜¯ç”¨åŸç”Ÿ<code>CSS</code>ã€é¢„å¤„ç†å™¨ã€<code>postcss</code>ã€<code>UI</code>åº“è¿˜æ˜¯æ¨¡å—ï¼Œ<code>Nuxt</code>éƒ½èƒ½æ»¡è¶³ã€‚</p>
</blockquote>
<h3 data-id="heading-23">LCPé«˜çº§ä¼˜åŒ–</h3>
<p>å¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œå»åŠ é€Ÿå…¨å±€<code>CSS</code>æ–‡ä»¶çš„ä¸‹è½½ï¼š</p>
<ul>
<li>ä½¿ç”¨<code>CDN</code>ï¼Œä½¿æ–‡ä»¶ç‰©ç†ä¸Šæ›´æ¥è¿‘ç”¨æˆ·ã€‚</li>
<li>å‹ç¼©ä½ çš„èµ„æºï¼Œæœ€å¥½ä½¿ç”¨<code>Brotli</code>ã€‚</li>
<li>ä½¿ç”¨<code>HTTP2/HTTP3</code>è¿›è¡Œäº¤ä»˜ã€‚</li>
<li>å°†èµ„æºæ‰˜ç®¡åœ¨åŒä¸€åŸŸåä¸‹ï¼ˆä¸è¦ä½¿ç”¨ä¸åŒçš„å­åŸŸåï¼‰</li>
</ul>
<p>å¦‚æœä½¿ç”¨ç°ä»£å¹³å°å¦‚<code>Cloudflare</code>ã€<code>Netlify</code>æˆ–<code>Vercel</code>ï¼Œå¤§å¤šæ•°è¿™äº›æ“ä½œåº”è¯¥ä¼šè‡ªåŠ¨å®Œæˆã€‚åœ¨<code>web.dev</code>ä¸Šå¯ä»¥æ‰¾åˆ°<code>LCP</code>ä¼˜åŒ–æŒ‡å—ã€‚</p>
<p>å¦‚æœæ‰€æœ‰çš„<code>CSS</code>éƒ½è¢«<code>Nuxt</code>å†…è”ï¼Œå¯ä»¥ï¼ˆå®éªŒæ€§åœ°ï¼‰å®Œå…¨åœæ­¢åœ¨æ¸²æŸ“çš„<code>HTML</code>ä¸­å¼•ç”¨å¤–éƒ¨<code>CSS</code>æ–‡ä»¶ã€‚å¯ä»¥é€šè¿‡ä¸€ä¸ªé’©å­å»å®ç°è¿™ä¸€ç‚¹ï¼Œå¯ä»¥å°†å…¶æ”¾åœ¨æ¨¡å—ä¸­æˆ–<code>Nuxt</code>é…ç½®æ–‡ä»¶ä¸­ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// nuxt.config.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineNuxtConfig</span>({
  <span class="hljs-attr">hooks</span>: {
    <span class="hljs-string">'build:manifest'</span>: <span class="hljs-function">(<span class="hljs-params">manifest</span>) =&gt;</span> {
        <span class="hljs-comment">// æ‰¾åˆ°åº”ç”¨å…¥å£ï¼Œcssåˆ—è¡¨</span>
        <span class="hljs-keyword">const</span> css = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(manifest).<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">options</span> =&gt;</span> options.<span class="hljs-property">isEntry</span>)?.<span class="hljs-property">css</span>
        <span class="hljs-keyword">if</span> (css) {
          <span class="hljs-comment">// ä»æ•°ç»„æœ«å°¾å¼€å§‹å‘å‰éå†</span>
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = css.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>; i &gt;= <span class="hljs-number">0</span>; i--) {
              <span class="hljs-comment">// å¦‚æœä»¥`entry`å¼€å¤´ï¼Œä»åˆ—è¡¨ä¸­ç§»é™¤</span>
              <span class="hljs-keyword">if</span>(css[i].<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'entry'</span>)) css.<span class="hljs-title function_">splice</span>(i, <span class="hljs-number">1</span>)
          }
        }
    }
  },
})
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹å†™ç®€å•çš„call bind apply]]></title>    <link>https://juejin.cn/post/7593165280489406505</link>    <guid>https://juejin.cn/post/7593165280489406505</guid>    <pubDate>2026-01-10T03:22:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593165280489406505" data-draft-id="7593165280489308201" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹å†™ç®€å•çš„call bind apply"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-10T03:22:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸åŠ¡æ­£ä¸šçš„å‰ç«¯å­¦å¾’"/> <meta itemprop="url" content="https://juejin.cn/user/1640911047494430"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹å†™ç®€å•çš„call bind apply
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1640911047494430/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸åŠ¡æ­£ä¸šçš„å‰ç«¯å­¦å¾’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T03:22:37.000Z" title="Sat Jan 10 2026 03:22:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97597c5582bb49909e73a3a8f17ed10f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiN5Yqh5q2j5Lia55qE5YmN56uv5a2m5b6S:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768620157&amp;x-signature=Ez3vWkJzTxUTwUVnHw%2Bz0R4gvd4%3D" alt="image.png" loading="lazy"/>
<strong>call</strong></p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-keyword">const</span> <span class="hljs-title class_">Person1</span> = {
    <span class="hljs-attr">fullName</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">country, city</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span> + <span class="hljs-string">" "</span> + country + <span class="hljs-string">" "</span> + city
    }
  }
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">Person2</span> = {
    <span class="hljs-attr">firstName</span>: <span class="hljs-string">"å¼ "</span>,
    <span class="hljs-attr">lastName</span>: <span class="hljs-string">"ä¸‰"</span>,
  }
  <span class="hljs-title class_">Person1</span>.<span class="hljs-property">fullName</span>.<span class="hljs-title function_">call</span>(<span class="hljs-title class_">Person2</span>, <span class="hljs-string">'ä¸­å›½'</span>, <span class="hljs-string">'æ²³å—'</span>) <span class="hljs-comment">// å¼ ä¸‰ ä¸­å›½ æ²³å— </span>
</code></pre>
<p>callçš„ä½œç”¨æ˜¯æ”¹å˜äº†é‚£ä¸ªè¢«æ‰§è¡Œçš„æ–¹æ³•(ä¹Ÿå°±æ˜¯è°ƒç”¨callçš„é‚£ä¸ªæ–¹æ³•)çš„ç›´æ¥è°ƒç”¨è€…ï¼</p>
<p>è€Œè¿™ä¸ªè¢«æ‰§è¡Œçš„æ–¹æ³•å†…éƒ¨çš„thisä¹Ÿä¼šé‡æ–°æŒ‡å‘é‚£ä¸ªæ–°çš„è°ƒç”¨è€…ï¼Œå°±æ˜¯callæ–¹æ³•æ‰€æ¥æ”¶çš„ç¬¬ä¸€ä¸ªobjå‚æ•°ã€‚</p>
<p>è¿˜æœ‰ä¸¤ä¸ªç‰¹æ®Šæƒ…å†µå°±æ˜¯å½“è¿™ä¸ªobjå‚æ•°ä¸ºnullæˆ–è€…undefinedçš„æ—¶å€™ï¼Œthisä¼šæŒ‡å‘windowã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myCall</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) {
    <span class="hljs-comment">// ä¿å­˜this è°è°ƒç”¨çš„myCallï¼Œthiså°±æŒ‡å‘è°ï¼ŒæŒ‡å‘obj1.fun</span>
    obj.<span class="hljs-property">fn</span> = <span class="hljs-variable language_">this</span>
    <span class="hljs-comment">// ä¿å­˜å‚æ•°</span>
    <span class="hljs-keyword">let</span> args = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">arguments</span>).<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>)
    <span class="hljs-comment">// è°ƒç”¨å‡½æ•°</span>
    <span class="hljs-keyword">let</span> result = obj.<span class="hljs-title function_">fn</span>(...args)
    <span class="hljs-comment">// åˆ é™¤fnå±æ€§</span>
    <span class="hljs-keyword">delete</span> obj.<span class="hljs-property">fn</span>
    <span class="hljs-keyword">return</span> result
}
<span class="hljs-keyword">var</span> obj1 = {
    <span class="hljs-attr">num</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">fun</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">n</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">num</span> + n
    }
};
<span class="hljs-keyword">var</span> obj2 = {
    <span class="hljs-attr">num</span>: <span class="hljs-number">15</span>,
};
<span class="hljs-keyword">let</span> res = obj1.<span class="hljs-property">fun</span>.<span class="hljs-title function_">myCall</span>(obj2, <span class="hljs-number">10</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);
</code></pre>
<p><strong>apply</strong></p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-keyword">const</span> person = {
    <span class="hljs-attr">fullName</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">country, city</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span> + <span class="hljs-string">" "</span> + country + <span class="hljs-string">" "</span> + city
    }
  }
  <span class="hljs-keyword">const</span> newPerson = {
    <span class="hljs-attr">firstName</span>: <span class="hljs-string">"å£®"</span>,
    <span class="hljs-attr">lastName</span>: <span class="hljs-string">"å¿—å›½"</span>,
  }
  person.<span class="hljs-property">fullName</span>.<span class="hljs-title function_">apply</span>(newPerson, [<span class="hljs-string">'ä¸­å›½'</span>, <span class="hljs-string">'æ²³å—'</span>]) <span class="hljs-comment">// å£®å¿—å›½ ä¸­å›½ æ²³å—</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myApply</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) {
    <span class="hljs-keyword">let</span> result
    <span class="hljs-comment">// ä¿å­˜this è°è°ƒç”¨çš„myCallï¼Œthiså°±æŒ‡å‘è°ï¼ŒæŒ‡å‘obj1.fun</span>
    obj.<span class="hljs-property">fn</span> = <span class="hljs-variable language_">this</span>
    <span class="hljs-comment">// æ˜¯å¦ä¼ å‚</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>]) {
        result = obj.<span class="hljs-title function_">fn</span>(...<span class="hljs-variable language_">arguments</span>[<span class="hljs-number">1</span>])
    } <span class="hljs-keyword">else</span> {
        result = obj.<span class="hljs-title function_">fn</span>()
    }
    <span class="hljs-keyword">delete</span> obj.<span class="hljs-property">fn</span>
    <span class="hljs-keyword">return</span> result
}
<span class="hljs-keyword">var</span> obj1 = {
    <span class="hljs-attr">num</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">fn</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">n, m</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">num</span> + n + m
    }
};
<span class="hljs-keyword">var</span> obj2 = {
    <span class="hljs-attr">num</span>: <span class="hljs-number">15</span>,
};
<span class="hljs-keyword">let</span> res = obj1.<span class="hljs-property">fn</span>.<span class="hljs-title function_">myApply</span>(obj2, [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>])
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res);
</code></pre>
<p><strong>bind</strong></p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-keyword">const</span> person = {
    <span class="hljs-attr">fullName</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">country, city</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">firstName</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastName</span> + <span class="hljs-string">" "</span> + country + <span class="hljs-string">" "</span> + city
    }
  }
  <span class="hljs-keyword">const</span> newPerson = {
    <span class="hljs-attr">firstName</span>: <span class="hljs-string">"å£®"</span>,
    <span class="hljs-attr">lastName</span>: <span class="hljs-string">"å¿—å›½"</span>,
  }
   <span class="hljs-comment">// æ‰“å°å‡ºfullNameå‡½æ•°</span>
  person.<span class="hljs-property">fullName</span>.<span class="hljs-title function_">bind</span>(newPerson, <span class="hljs-string">'ä¸­å›½'</span>, <span class="hljs-string">'æ²³å—'</span>)() <span class="hljs-comment">// å£®å¿—å›½ ä¸­å›½ æ²³å—</span>
</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Function</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">myBind</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">obj</span>) {
    <span class="hljs-comment">// è¿™é‡Œçš„ this/self æŒ‡çš„æ˜¯éœ€è¦è¿›è¡Œç»‘å®šçš„å‡½æ•°æœ¬èº«ï¼Œæ¯”å¦‚ç”¨ä¾‹ä¸­çš„ man</span>
    <span class="hljs-keyword">const</span> self = <span class="hljs-variable language_">this</span>;
    <span class="hljs-comment">// è·å– myBind å‡½æ•°ä»ç¬¬äºŒä¸ªå‚æ•°åˆ°æœ€åä¸€ä¸ªå‚æ•°ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ objï¼‰</span>
    <span class="hljs-comment">// è¿™é‡Œäº§ç”Ÿäº†é—­åŒ…</span>
    <span class="hljs-keyword">const</span> args = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">arguments</span>).<span class="hljs-title function_">slice</span>(<span class="hljs-number">1</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
        <span class="hljs-comment">// è¿™ä¸ªæ—¶å€™çš„ arguments æ˜¯æŒ‡ myBind è¿”å›çš„å‡½æ•°ä¼ å…¥çš„å‚æ•°</span>
        <span class="hljs-keyword">const</span> bindArgs = [...<span class="hljs-variable language_">arguments</span>]
        <span class="hljs-comment">// åˆå¹¶</span>
        <span class="hljs-keyword">return</span> self.<span class="hljs-title function_">apply</span>(obj, [...args, ...bindArgs]);
    };
};

<span class="hljs-keyword">const</span> person = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'zyj'</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">man</span>(<span class="hljs-params">age</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(age)
}

<span class="hljs-keyword">const</span> test = man.<span class="hljs-title function_">myBind</span>(person)
<span class="hljs-title function_">test</span>(<span class="hljs-number">18</span>)<span class="hljs-comment">//zyj 18</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[djangoçš„dbæ€§èƒ½è°ƒä¼˜]]></title>    <link>https://juejin.cn/post/7592990758477398035</link>    <guid>https://juejin.cn/post/7592990758477398035</guid>    <pubDate>2026-01-10T04:42:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592990758477398035" data-draft-id="7593145583348629546" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="djangoçš„dbæ€§èƒ½è°ƒä¼˜"/> <meta itemprop="keywords" content="Django"/> <meta itemprop="datePublished" content="2026-01-10T04:42:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            djangoçš„dbæ€§èƒ½è°ƒä¼˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T04:42:24.000Z" title="Sat Jan 10 2026 04:42:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ„å»ºä¸€ä¸ªuser_demoè¡¨</p>
<pre><code class="hljs language-ini" lang="ini">from django.db import models

class UserInfo(models.Model):
    <span class="hljs-comment"># 1. åŸºç¡€å­—æ®µ</span>
    <span class="hljs-attr">username</span> = models.CharField(max_length=<span class="hljs-number">50</span>, unique=<span class="hljs-literal">True</span>)
    <span class="hljs-comment"># ç»™ email ä¸€ä¸ªé»˜è®¤ç©ºå­—ç¬¦ä¸²ï¼Œæˆ–è€…è®¾ä¸º null=Trueï¼Œé˜²æ­¢è¿ç§»æŠ¥é”™</span>
    <span class="hljs-attr">email</span> = models.EmailField(default=<span class="hljs-string">''</span>) 

    <span class="hljs-comment"># 2. çŠ¶æ€å­—æ®µ</span>
    <span class="hljs-attr">status</span> = models.SmallIntegerField(default=<span class="hljs-number">1</span>, help_text=<span class="hljs-string">"0:Inactive, 1:Active, 2:Banned"</span>)
    <span class="hljs-attr">role</span> = models.CharField(max_length=<span class="hljs-number">10</span>, default=<span class="hljs-string">'member'</span>)

    <span class="hljs-comment"># 3. æ•°å€¼å­—æ®µ</span>
    <span class="hljs-attr">age</span> = models.PositiveSmallIntegerField(null=<span class="hljs-literal">True</span>)
    <span class="hljs-attr">balance</span> = models.DecimalField(max_digits=<span class="hljs-number">19</span>, decimal_places=<span class="hljs-number">4</span>, default=<span class="hljs-number">0.0000</span>)
    <span class="hljs-attr">score</span> = models.IntegerField(default=<span class="hljs-number">0</span>)

    <span class="hljs-comment"># 4. æ—¶é—´å­—æ®µ</span>
    <span class="hljs-comment"># ä½¿ç”¨ auto_now_add=True è®© Django è‡ªåŠ¨å¤„ç†åˆ›å»ºæ—¶é—´</span>
    <span class="hljs-attr">created_at</span> = models.DateTimeField(auto_now_add=<span class="hljs-literal">True</span>) 
    <span class="hljs-attr">last_login</span> = models.DateTimeField(null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)

    <span class="hljs-comment"># 5. å¤§æ–‡æœ¬/å¤æ‚å­—æ®µ</span>
    <span class="hljs-attr">bio</span> = models.TextField(null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)
    
    <span class="hljs-comment"># 6. JSON å­—æ®µ</span>
    <span class="hljs-attr">extras</span> = models.JSONField(default=dict, null=<span class="hljs-literal">True</span>, blank=<span class="hljs-literal">True</span>)

    class Meta:
        <span class="hljs-attr">db_table</span> = <span class="hljs-string">'user_demo'</span>

</code></pre>
<p>è¿ç§»</p>
<pre><code class="hljs">python manage.py makemigration
python manage.py migrate
</code></pre>
<p>ä½¿ç”¨bulk_createåˆ›å»º1ä¸‡æ¡æ•°æ®</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> random
<span class="hljs-keyword">import</span> string
<span class="hljs-keyword">import</span> django

<span class="hljs-comment"># 1. è®¾ç½® Django ç¯å¢ƒ</span>
BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
sys.path.append(BASE_DIR)
os.environ.setdefault(<span class="hljs-string">"DJANGO_SETTINGS_MODULE"</span>, <span class="hljs-string">"mysite.settings"</span>)
django.setup()

<span class="hljs-keyword">from</span> main.models <span class="hljs-keyword">import</span> UserInfo

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_random_string</span>(<span class="hljs-params">length=<span class="hljs-number">10</span></span>):
    <span class="hljs-string">"""ç”Ÿæˆéšæœºå­—ç¬¦ä¸²"""</span>
    letters = string.ascii_lowercase
    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>.join(random.choice(letters) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(length))

<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_demo_data</span>(<span class="hljs-params">count=<span class="hljs-number">100</span></span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¼€å§‹ç”Ÿæˆ <span class="hljs-subst">{count}</span> æ¡æ•°æ®..."</span>)
    
    users = []
    <span class="hljs-comment"># é¢„å…ˆå®šä¹‰å¥½ choicesï¼Œæ¨¡æ‹ŸçœŸå®æ•°æ®åˆ†å¸ƒ</span>
    ROLES = [<span class="hljs-string">'admin'</span>, <span class="hljs-string">'editor'</span>, <span class="hljs-string">'member'</span>, <span class="hljs-string">'guest'</span>]
    
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(count):
        <span class="hljs-comment"># ç¡®ä¿ username å”¯ä¸€ï¼Œè¿™é‡Œç®€å•åŠ ä¸Šç´¢å¼• i</span>
        username = <span class="hljs-string">f"user_<span class="hljs-subst">{generate_random_string(<span class="hljs-number">5</span>)}</span>_<span class="hljs-subst">{i}</span>"</span>
        
        user = UserInfo(
            username=username,
            email=<span class="hljs-string">f"<span class="hljs-subst">{username}</span>@example.com"</span>,
            status=random.choice([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>]), <span class="hljs-comment"># 1 çš„æ¦‚ç‡å¤§ä¸€äº›</span>
            role=random.choice(ROLES),
            age=random.randint(<span class="hljs-number">18</span>, <span class="hljs-number">80</span>),
            balance=random.uniform(<span class="hljs-number">0</span>, <span class="hljs-number">100000</span>),
            score=random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">500000</span>),
            bio=generate_random_string(<span class="hljs-number">500</span>),
            extras={<span class="hljs-string">'preference'</span>: random.choice([<span class="hljs-string">'light'</span>, <span class="hljs-string">'dark'</span>]), <span class="hljs-string">'level'</span>: random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)}
        )
        users.append(user)

    <span class="hljs-comment"># bulk_create ä¸€æ¬¡æ€§æ’å…¥ï¼Œæ€§èƒ½æ›´å¥½</span>
    UserInfo.objects.bulk_create(users)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… æˆåŠŸæ’å…¥ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(users)}</span> æ¡æ•°æ®åˆ° UserInfo è¡¨ã€‚"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-keyword">try</span>:
        create_demo_data(<span class="hljs-number">1000000</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âŒ å‘ç”Ÿé”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<p>åˆ›å»ºæˆåŠŸ</p>
<pre><code class="hljs language-sql" lang="sql">mysql<span class="hljs-operator">&gt;</span> <span class="hljs-keyword">select</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">from</span> user_demo;
<span class="hljs-operator">+</span><span class="hljs-comment">----------+</span>
<span class="hljs-operator">|</span> <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">----------+</span>
<span class="hljs-operator">|</span>    <span class="hljs-number">10000</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">----------+</span>
<span class="hljs-number">1</span> <span class="hljs-type">row</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">set</span> (<span class="hljs-number">0.002</span> sec)
</code></pre>
<p>æ„å»º10ä¸‡æ¡å¤±è´¥ï¼Œå¤±è´¥ä¿¡æ¯ä¸ºï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">å¼€å§‹ç”Ÿæˆ <span class="hljs-number">1000000</span> æ¡æ•°æ®...
âŒ å‘ç”Ÿé”™è¯¯: (<span class="hljs-number">2013</span>, <span class="hljs-comment">'Lost connection to MySQL server during query')</span>
</code></pre>
<p>é‡‡å–åˆ†æ‰¹æ’å…¥çš„æ–¹å¼æ¥è§£å†³é—®é¢˜</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> sys
<span class="hljs-keyword">import</span> random
<span class="hljs-keyword">import</span> string
<span class="hljs-keyword">import</span> django

<span class="hljs-comment"># 1. è®¾ç½® Django ç¯å¢ƒ</span>
BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
sys.path.append(BASE_DIR)
os.environ.setdefault(<span class="hljs-string">"DJANGO_SETTINGS_MODULE"</span>, <span class="hljs-string">"mysite.settings"</span>)
django.setup()

<span class="hljs-keyword">from</span> main.models <span class="hljs-keyword">import</span> UserInfo

<span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_random_string</span>(<span class="hljs-params">length=<span class="hljs-number">10</span></span>):
    <span class="hljs-string">"""ç”Ÿæˆéšæœºå­—ç¬¦ä¸²"""</span>
    letters = string.ascii_lowercase
    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>.join(random.choice(letters) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(length))

<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_demo_data</span>(<span class="hljs-params">count=<span class="hljs-number">100</span></span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¼€å§‹ç”Ÿæˆ <span class="hljs-subst">{count}</span> æ¡æ•°æ®..."</span>)
    
    users = []
    BATCH_SIZE = <span class="hljs-number">5000</span>  <span class="hljs-comment"># æ¯æ¬¡æ’å…¥ 5000 æ¡</span>
    <span class="hljs-comment"># é¢„å…ˆå®šä¹‰å¥½ choicesï¼Œæ¨¡æ‹ŸçœŸå®æ•°æ®åˆ†å¸ƒ</span>
    ROLES = [<span class="hljs-string">'admin'</span>, <span class="hljs-string">'editor'</span>, <span class="hljs-string">'member'</span>, <span class="hljs-string">'guest'</span>]
    batch_data = []
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(count):
        <span class="hljs-comment"># ç¡®ä¿ username å”¯ä¸€ï¼Œè¿™é‡Œç®€å•åŠ ä¸Šç´¢å¼• i</span>
        username = <span class="hljs-string">f"user_<span class="hljs-subst">{generate_random_string(<span class="hljs-number">5</span>)}</span>_<span class="hljs-subst">{i}</span>"</span>
        
        user = UserInfo(
            username=username,
            email=<span class="hljs-string">f"<span class="hljs-subst">{username}</span>@example.com"</span>,
            status=random.choice([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>]), <span class="hljs-comment"># 1 çš„æ¦‚ç‡å¤§ä¸€äº›</span>
            role=random.choice(ROLES),
            age=random.randint(<span class="hljs-number">18</span>, <span class="hljs-number">80</span>),
            balance=random.uniform(<span class="hljs-number">0</span>, <span class="hljs-number">100000</span>),
            score=random.randint(<span class="hljs-number">0</span>, <span class="hljs-number">500000</span>),
            bio=generate_random_string(<span class="hljs-number">500</span>),
            extras={<span class="hljs-string">'preference'</span>: random.choice([<span class="hljs-string">'light'</span>, <span class="hljs-string">'dark'</span>]), <span class="hljs-string">'level'</span>: random.randint(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)}
        )

        batch_data.append(user)
        <span class="hljs-comment"># å½“ç§¯æ”’å¤Ÿäº† BATCH_SIZEï¼Œå°±æ’å…¥ä¸€æ¬¡</span>
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(batch_data) &gt;= BATCH_SIZE:
            UserInfo.objects.bulk_create(batch_data, batch_size=BATCH_SIZE)
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²æ’å…¥ <span class="hljs-subst">{i + <span class="hljs-number">1</span>}</span> æ¡..."</span>)
            batch_data = [] <span class="hljs-comment"># æ¸…ç©ºåˆ—è¡¨</span>

    <span class="hljs-comment"># æ’å…¥å‰©ä½™çš„æ•°æ®ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰</span>
    <span class="hljs-keyword">if</span> batch_data:
        UserInfo.objects.bulk_create(batch_data)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å·²æ’å…¥å‰©ä½™ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(batch_data)}</span> æ¡..."</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âœ… æˆåŠŸæ’å…¥ <span class="hljs-subst">{<span class="hljs-built_in">len</span>(users)}</span> æ¡æ•°æ®åˆ° UserInfo è¡¨ã€‚"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-keyword">try</span>:
        create_demo_data(<span class="hljs-number">1000000</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âŒ å‘ç”Ÿé”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rippleï¼šä¸€ä¸ªç°ä»£çš„å“åº”å¼ UI æ¡†æ¶]]></title>    <link>https://juejin.cn/post/7593261984189153330</link>    <guid>https://juejin.cn/post/7593261984189153330</guid>    <pubDate>2026-01-10T04:42:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593261984189153330" data-draft-id="7593212374921625627" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rippleï¼šä¸€ä¸ªç°ä»£çš„å“åº”å¼ UI æ¡†æ¶"/> <meta itemprop="keywords" content="å‰ç«¯,å‰ç«¯æ¡†æ¶,JavaScript"/> <meta itemprop="datePublished" content="2026-01-10T04:42:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="jump_jump"/> <meta itemprop="url" content="https://juejin.cn/user/4230576474692765"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rippleï¼šä¸€ä¸ªç°ä»£çš„å“åº”å¼ UI æ¡†æ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4230576474692765/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    jump_jump
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T04:42:37.000Z" title="Sat Jan 10 2026 04:42:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ç”¨æœ€ç›´è§‚çš„è¯­æ³•ï¼Œæ„å»ºæœ€é«˜æ•ˆçš„ Web åº”ç”¨</p>
</blockquote>
<h2 data-id="heading-0">AI æ—¶ä»£ï¼Œæ›´éœ€è¦ç²¾å“æ¡†æ¶</h2>
<p>2026 å¹´ï¼ŒAI ç¼–ç¨‹å·²ç»æˆä¸ºå¸¸æ€ã€‚Cursorã€Claudeã€Copilotâ€¦â€¦å¼€å‘è€…æ¯å¤©éƒ½åœ¨ç”¨ AI ç”Ÿæˆå¤§é‡ä»£ç ã€‚</p>
<p>ä½†è¿™å¸¦æ¥äº†ä¸€ä¸ªæ–°é—®é¢˜ï¼š<strong>ä»£ç é‡çˆ†ç‚¸ï¼Œè´¨é‡å´åœ¨ä¸‹é™ã€‚</strong></p>
<p>AI å¯ä»¥å¿«é€Ÿç”Ÿæˆä»£ç ï¼Œä½†å®ƒç”Ÿæˆçš„å¾€å¾€æ˜¯"èƒ½è·‘å°±è¡Œ"çš„ä»£ç â€”â€”å†—ä½™çš„çŠ¶æ€ç®¡ç†ã€ä¸å¿…è¦çš„é‡æ¸²æŸ“ã€è‡ƒè‚¿çš„ä¾èµ–ã€‚å½“é¡¹ç›®è§„æ¨¡å¢é•¿ï¼Œè¿™äº›é—®é¢˜ä¼šè¢«æ”¾å¤§ã€‚</p>
<p><strong>AI æ—¶ä»£ä¸ç¼ºä»£ç ï¼Œç¼ºçš„æ˜¯ç²¾å“æ¡†æ¶</strong>â€”â€”èƒ½å¤Ÿçº¦æŸä»£ç è´¨é‡ã€ä¿è¯æ€§èƒ½ã€å‡å°‘å‡ºé”™çš„æ¡†æ¶ã€‚</p>
<h3 data-id="heading-1">ç°æœ‰æ¡†æ¶çš„é—®é¢˜</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// React: æ ·æ¿ä»£ç å¤ªå¤š</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">Counter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [count, setCount] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">0</span>)
  <span class="hljs-keyword">const</span> increment = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setCount</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + <span class="hljs-number">1</span>)
  }, [])
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{increment}</span>&gt;</span>{count}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}

<span class="hljs-comment">// Vue: éœ€è¦è®°ä½ .value</span>
<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
count.<span class="hljs-property">value</span>++  <span class="hljs-comment">// å¿˜è®° .value å°±å‡ºé”™</span>

<span class="hljs-comment">// è¿™äº›"ä»ªå¼æ„Ÿ"ä»£ç ï¼ŒAI å¯èƒ½å†™å¯¹ï¼Œä¹Ÿå¯èƒ½å†™é”™</span>
<span class="hljs-comment">// æ›´é‡è¦çš„æ˜¯ï¼šå®ƒä»¬è®©ä»£ç å˜å¾—è‡ƒè‚¿</span>
</code></pre>
<h3 data-id="heading-2">Ripple çš„ç­”æ¡ˆï¼šå°‘å³æ˜¯å¤š</h3>
<pre><code class="hljs language-javascript" lang="javascript">component <span class="hljs-title class_">Counter</span>() {
  <span class="hljs-keyword">let</span> count = <span class="hljs-title function_">track</span>(<span class="hljs-number">0</span>);
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> @count++}&gt;{@count}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}
</code></pre>
<p><strong>4 è¡Œä»£ç ï¼Œé›¶æ ·æ¿ã€‚</strong></p>
<ul>
<li>æ²¡æœ‰ <code>useState</code> / <code>ref</code> / <code>signal</code></li>
<li>æ²¡æœ‰ <code>useCallback</code> / <code>useMemo</code></li>
<li>æ²¡æœ‰ <code>.value</code> / <code>$:</code></li>
<li>ç¼–è¯‘å™¨è‡ªåŠ¨ä¼˜åŒ–ï¼Œè¿è¡Œæ—¶æè‡´ç²¾ç®€</li>
</ul>





























<table><thead><tr><th>æŒ‡æ ‡</th><th>React</th><th>Vue</th><th>Ripple</th></tr></thead><tbody><tr><td>è®¡æ•°å™¨ä»£ç è¡Œæ•°</td><td>6-8 è¡Œ</td><td>4-5 è¡Œ</td><td><strong>3 è¡Œ</strong></td></tr><tr><td>è¿è¡Œæ—¶å¤§å°</td><td>~40KB</td><td>~30KB</td><td><strong>~5KB</strong></td></tr><tr><td>æ›´æ–°ç²’åº¦</td><td>ç»„ä»¶çº§</td><td>ç»„ä»¶çº§</td><td><strong>èŠ‚ç‚¹çº§</strong></td></tr></tbody></table>
<h3 data-id="heading-3">ä¸ºä»€ä¹ˆè¿™åœ¨ AI æ—¶ä»£æ›´é‡è¦ï¼Ÿ</h3>
<ol>
<li><strong>ä»£ç å®¡æŸ¥æˆæœ¬</strong>ï¼šAI ç”Ÿæˆçš„ä»£ç éœ€è¦äººå·¥å®¡æŸ¥ï¼Œè¶Šç®€æ´è¶Šå¥½å®¡</li>
<li><strong>é”™è¯¯æ¦‚ç‡</strong>ï¼šè¯­æ³•è¶Šç®€å•ï¼ŒAIï¼ˆå’Œäººï¼‰å‡ºé”™çš„æœºä¼šè¶Šå°‘</li>
<li><strong>æ€§èƒ½å…œåº•</strong>ï¼šå³ä½¿ AI ä¸è€ƒè™‘æ€§èƒ½ï¼Œç¼–è¯‘å™¨ä¼šå¸®ä½ ä¼˜åŒ–</li>
<li><strong>å¯ç»´æŠ¤æ€§</strong>ï¼šä¸‰ä¸ªæœˆåå›çœ‹ä»£ç ï¼Œè¿˜èƒ½ä¸€çœ¼çœ‹æ‡‚</li>
</ol>
<p>Ripple çš„è®¾è®¡å“²å­¦ï¼š<strong>ä»£ç åº”è¯¥è¯»èµ·æ¥åƒå®ƒåšçš„äº‹æƒ…ã€‚</strong></p>
<hr/>
<h2 data-id="heading-4">ä¸ºä»€ä¹ˆé€‰æ‹© Rippleï¼Ÿ</h2>
<p>Ripple è¿½æ±‚<strong>ä¸¤å…¨å…¶ç¾</strong>â€”â€”æ—¢è¦ React çš„ç»„ä»¶æ¨¡å‹å’Œ JSX è¡¨è¾¾åŠ›ï¼Œåˆè¦ Svelte çš„ç¼–è¯‘æ—¶ä¼˜åŒ–å’Œæè‡´æ€§èƒ½ã€‚</p>
<p>çœ‹çœ‹è¿™æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">component <span class="hljs-title class_">Counter</span>() {
  <span class="hljs-keyword">let</span> count = <span class="hljs-title function_">track</span>(<span class="hljs-number">0</span>);

  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> @count++}&gt;
    {"ç‚¹å‡»äº† "}{@count}{" æ¬¡"}
  <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}
</code></pre>
<p>è¿™å°±æ˜¯ Rippleã€‚æ²¡æœ‰ <code>useState</code>ï¼Œæ²¡æœ‰ <code>$:</code>ï¼Œæ²¡æœ‰ <code>.value</code>ã€‚<code>track()</code> åˆ›å»ºçŠ¶æ€ï¼Œ<code>@</code> è¯»å†™å€¼ï¼Œç®€æ´ç›´è§‚ã€‚</p>
<h2 data-id="heading-5">æ ¸å¿ƒç†å¿µ</h2>
<h3 data-id="heading-6">1. ç¼–è¯‘å™¨ä¼˜å…ˆ</h3>
<p>Ripple ä¸æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶æ¡†æ¶ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>ç¼–è¯‘å™¨</strong>ã€‚ä½ å†™çš„ä»£ç ä¼šè¢«è½¬æ¢æˆé«˜æ•ˆçš„ JavaScriptï¼š</p>
<pre><code class="hljs language-swift" lang="swift">ä½ å†™çš„ä»£ç                          ç¼–è¯‘åçš„ä»£ç 
<span class="hljs-operator">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>                     <span class="hljs-operator">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-keyword">let</span> count <span class="hljs-operator">=</span> track(<span class="hljs-number">0</span>)    <span class="hljs-operator">â†’</span>        <span class="hljs-keyword">var</span> count <span class="hljs-operator">=</span> <span class="hljs-keyword">_</span><span class="hljs-variable">$_</span>.tracked(<span class="hljs-number">0</span>)
{<span class="hljs-meta">@count</span>}                <span class="hljs-operator">â†’</span>        <span class="hljs-keyword">_</span><span class="hljs-variable">$_</span>.get(count)
<span class="hljs-meta">@count</span><span class="hljs-operator">++</span>                <span class="hljs-operator">â†’</span>        <span class="hljs-keyword">_</span><span class="hljs-variable">$_</span>.update(count)
</code></pre>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li><strong>é›¶è¿è¡Œæ—¶å¼€é”€</strong>ï¼šå“åº”å¼è¿½è¸ªåœ¨ç¼–è¯‘æ—¶å®Œæˆ</li>
<li><strong>æ›´å°çš„åŒ…ä½“ç§¯</strong>ï¼šæ²¡æœ‰è™šæ‹Ÿ DOM diff ç®—æ³•</li>
<li><strong>æ›´å¿«çš„æ›´æ–°</strong>ï¼šç›´æ¥æ“ä½œéœ€è¦æ›´æ–°çš„ DOM èŠ‚ç‚¹</li>
</ul>
<h3 data-id="heading-7">2. ç»„ä»¶å³å‡½æ•°</h3>
<p>åœ¨ Ripple ä¸­ï¼Œç»„ä»¶å°±æ˜¯å¸¦æœ‰ <code>component</code> å…³é”®å­—çš„å‡½æ•°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">component <span class="hljs-title class_">Greeting</span>({ name = <span class="hljs-string">"World"</span> }) {
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{"Hello, "}{name}{"!"}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span></span>
}

<span class="hljs-comment">// ä½¿ç”¨</span>
&lt;<span class="hljs-title class_">Greeting</span> name=<span class="hljs-string">"Ripple"</span> /&gt;
</code></pre>
<h3 data-id="heading-8">3. å“åº”å¼çŠ¶æ€ï¼š<code>track()</code> å’Œ <code>@</code> è¯­æ³•</h3>
<p>ç”¨ <code>track()</code> åˆ›å»ºå“åº”å¼å˜é‡ï¼Œç”¨ <code>@</code> è¯»å†™å€¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">component <span class="hljs-title class_">Form</span>() {
  <span class="hljs-keyword">let</span> name = <span class="hljs-title function_">track</span>(<span class="hljs-string">""</span>);
  <span class="hljs-keyword">let</span> email = <span class="hljs-title function_">track</span>(<span class="hljs-string">""</span>);

  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{@name}</span> <span class="hljs-attr">onInput</span>=<span class="hljs-string">{(e)</span> =&gt;</span> @name = e.target.value} /&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{@email}</span> <span class="hljs-attr">onInput</span>=<span class="hljs-string">{(e)</span> =&gt;</span> @email = e.target.value} /&gt;
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{"ä½ å¥½ï¼Œ"}{@name}{"ï¼æˆ‘ä»¬ä¼šå‘é‚®ä»¶åˆ° "}{@email}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
}
</code></pre>
<h3 data-id="heading-9">4. å“åº”å¼é›†åˆï¼š<code>#[]</code> å’Œ <code>#{}</code></h3>
<p>æ•°ç»„å’Œå¯¹è±¡ä¹Ÿå¯ä»¥æ˜¯å“åº”å¼çš„ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> items = #[];                          <span class="hljs-comment">// å“åº”å¼æ•°ç»„</span>
<span class="hljs-keyword">const</span> user = #{ <span class="hljs-attr">name</span>: <span class="hljs-string">"Tom"</span> };              <span class="hljs-comment">// å“åº”å¼å¯¹è±¡</span>
<span class="hljs-keyword">const</span> tags = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TrackedSet</span>([<span class="hljs-string">"a"</span>, <span class="hljs-string">"b"</span>]);    <span class="hljs-comment">// å“åº”å¼ Set</span>
<span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TrackedMap</span>([[<span class="hljs-string">"k"</span>, <span class="hljs-string">"v"</span>]]); <span class="hljs-comment">// å“åº”å¼ Map</span>
</code></pre>
<p>å¯¹è¿™äº›é›†åˆçš„ä»»ä½•ä¿®æ”¹éƒ½ä¼šè‡ªåŠ¨è§¦å‘ UI æ›´æ–°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">items.<span class="hljs-title function_">push</span>(<span class="hljs-string">"new item"</span>);   <span class="hljs-comment">// UI è‡ªåŠ¨æ›´æ–°</span>
user.<span class="hljs-property">name</span> = <span class="hljs-string">"Jerry"</span>;      <span class="hljs-comment">// UI è‡ªåŠ¨æ›´æ–°</span>
</code></pre>
<hr/>
<h2 data-id="heading-10">å®æˆ˜ï¼šæ„å»ºä¸€ä¸ª Todo åº”ç”¨</h2>
<p>è®©æˆ‘ä»¬ç”¨ Ripple æ„å»ºä¸€ä¸ªå®Œæ•´çš„ Todo åº”ç”¨ï¼Œä½“éªŒæ¡†æ¶çš„æ ¸å¿ƒç‰¹æ€§ã€‚</p>
<h3 data-id="heading-11">å®Œæ•´ä»£ç </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { track } <span class="hljs-keyword">from</span> <span class="hljs-string">'ripple'</span>;

component <span class="hljs-title class_">TodoInput</span>({ onAdd }) {
  <span class="hljs-keyword">let</span> value = <span class="hljs-title function_">track</span>(<span class="hljs-string">""</span>);

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleKeyDown</span>(<span class="hljs-params">e</span>) {
    <span class="hljs-keyword">if</span> (e.<span class="hljs-property">key</span> === <span class="hljs-string">"Enter"</span> &amp;&amp; @value.<span class="hljs-title function_">trim</span>()) {
      <span class="hljs-title function_">onAdd</span>(@value.<span class="hljs-title function_">trim</span>());
      @value = <span class="hljs-string">""</span>;
    }
  }

  &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"input-section"</span>&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">input</span>
      <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span>
      <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Add a new todo..."</span>
      <span class="hljs-attr">value</span>=<span class="hljs-string">{@value}</span>
      <span class="hljs-attr">onInput</span>=<span class="hljs-string">{(e)</span> =&gt;</span> @value = e.target.value}
      onKeyDown={handleKeyDown}
    /&gt;</span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> { if (@value.trim()) { onAdd(@value.trim()); @value = ""; } }}&gt;{"Add"}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  &lt;/div&gt;
}

component <span class="hljs-title class_">TodoItem</span>({ todo, onToggle, onDelete }) {
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">checked</span>=<span class="hljs-string">{todo.completed}</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{onToggle}</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">{todo.completed</span> ? "<span class="hljs-attr">done</span>" <span class="hljs-attr">:</span> ""}&gt;</span>{todo.text}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onDelete}</span>&gt;</span>{"Ã—"}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span></span>
}

<span class="hljs-keyword">export</span> component <span class="hljs-title class_">App</span>() {
  <span class="hljs-keyword">const</span> todos = #[];

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">addTodo</span>(<span class="hljs-params">text</span>) {
    todos.<span class="hljs-title function_">push</span>(#{ <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(), text, <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span> });
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">toggleTodo</span>(<span class="hljs-params">todo</span>) {
    todo.<span class="hljs-property">completed</span> = !todo.<span class="hljs-property">completed</span>;
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteTodo</span>(<span class="hljs-params">id</span>) {
    <span class="hljs-keyword">const</span> index = todos.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">id</span> === id);
    <span class="hljs-keyword">if</span> (index &gt; -<span class="hljs-number">1</span>) todos.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">activeCount</span> = (<span class="hljs-params"/>) =&gt; todos.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> !t.<span class="hljs-property">completed</span>).<span class="hljs-property">length</span>;

  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"app"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{"Todo App"}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">TodoInput</span> <span class="hljs-attr">onAdd</span>=<span class="hljs-string">{addTodo}</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
      for (const todo of todos) {
        <span class="hljs-tag">&lt;<span class="hljs-name">TodoItem</span>
          <span class="hljs-attr">todo</span>=<span class="hljs-string">{todo}</span>
          <span class="hljs-attr">onToggle</span>=<span class="hljs-string">{()</span> =&gt;</span> toggleTodo(todo)}
          onDelete={() =&gt; deleteTodo(todo.id)}
        /&gt;
      }
    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{todos.length}{" total, "}{activeCount()}{" remaining"}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>

  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-class">.app</span> { <span class="hljs-attribute">max-width</span>: <span class="hljs-number">400px</span>; <span class="hljs-attribute">margin</span>: <span class="hljs-number">40px</span> auto; <span class="hljs-attribute">font-family</span>: system-ui; }
    <span class="hljs-selector-tag">h1</span> { <span class="hljs-attribute">color</span>: <span class="hljs-number">#e91e63</span>; }
    <span class="hljs-selector-class">.input-section</span> { <span class="hljs-attribute">display</span>: flex; <span class="hljs-attribute">gap</span>: <span class="hljs-number">8px</span>; <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">16px</span>; }
    <span class="hljs-selector-class">.input-section</span> <span class="hljs-selector-tag">input</span> { <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>; <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span>; }
    <span class="hljs-selector-tag">ul</span> { <span class="hljs-attribute">list-style</span>: none; <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>; }
    <span class="hljs-selector-tag">li</span> { <span class="hljs-attribute">display</span>: flex; <span class="hljs-attribute">gap</span>: <span class="hljs-number">8px</span>; <span class="hljs-attribute">align-items</span>: center; <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">0</span>; }
    <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">span</span> { <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>; }
    <span class="hljs-selector-tag">li</span> <span class="hljs-selector-tag">span</span><span class="hljs-selector-class">.done</span> { <span class="hljs-attribute">text-decoration</span>: line-through; <span class="hljs-attribute">color</span>: <span class="hljs-number">#888</span>; }
    <span class="hljs-selector-tag">p</span> { <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>; <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>; }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
}
</code></pre>
<h3 data-id="heading-12">ä»£ç è§£æ</h3>
<h4 data-id="heading-13">1. å“åº”å¼æ•°ç»„ <code>#[]</code></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> todos = #[];
</code></pre>
<p><code>#[]</code> åˆ›å»ºä¸€ä¸ªå“åº”å¼æ•°ç»„ã€‚å½“ä½ è°ƒç”¨ <code>push</code>ã€<code>splice</code>ã€<code>filter</code> ç­‰æ–¹æ³•æ—¶ï¼ŒRipple ä¼šè‡ªåŠ¨è¿½è¸ªå˜åŒ–å¹¶æ›´æ–° UIã€‚</p>
<h4 data-id="heading-14">2. å“åº”å¼å¯¹è±¡ <code>#{}</code></h4>
<pre><code class="hljs language-javascript" lang="javascript">todos.<span class="hljs-title function_">push</span>(#{ <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(), text, <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span> });
</code></pre>
<p>æ¯ä¸ª todo é¡¹ä¹Ÿæ˜¯å“åº”å¼å¯¹è±¡ï¼Œè¿™æ · <code>todo.completed = !todo.completed</code> å°±èƒ½è§¦å‘æ›´æ–°ã€‚</p>
<h4 data-id="heading-15">3. æ§åˆ¶æµï¼šå†…è” <code>for</code> å’Œ <code>if</code></h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> todo <span class="hljs-keyword">of</span> todos) {
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TodoItem</span> <span class="hljs-attr">todo</span>=<span class="hljs-string">{todo}</span> <span class="hljs-attr">...</span> /&gt;</span></span>
}

<span class="hljs-keyword">if</span> (todos.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">completed</span>)) {
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>{"æ¸…é™¤å·²å®Œæˆ"}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
}
</code></pre>
<p>Ripple çš„æ§åˆ¶æµç›´æ¥å†™åœ¨ JSX ä¸­ï¼Œä¸éœ€è¦ <code>map</code> æˆ–ä¸‰å…ƒè¡¨è¾¾å¼ã€‚ç¼–è¯‘å™¨ä¼šå°†å…¶è½¬æ¢ä¸ºé«˜æ•ˆçš„ block ç»“æ„ã€‚</p>
<h4 data-id="heading-16">4. ä½œç”¨åŸŸæ ·å¼</h4>
<pre><code class="hljs language-javascript" lang="javascript">&lt;style&gt;
  .<span class="hljs-property">todo</span>-item { ... }
&lt;/style&gt;
</code></pre>
<p>ç»„ä»¶å†…çš„ <code>&lt;style&gt;</code> æ ‡ç­¾ä¼šè¢«è‡ªåŠ¨æ·»åŠ ä½œç”¨åŸŸå“ˆå¸Œï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€æ ·å¼ã€‚</p>
<hr/>
<h2 data-id="heading-17">ç¼–è¯‘äº§ç‰©ä¸€è§ˆ</h2>
<p>å¥½å¥‡ Ripple ç¼–è¯‘å™¨åšäº†ä»€ä¹ˆï¼Ÿæ¥çœ‹çœ‹ <code>@count++</code> è¿™è¡Œä»£ç çš„æ—…ç¨‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">æºç                      ç¼–è¯‘é˜¶æ®µ               è¿è¡Œæ—¶
â”€â”€â”€â”€                     â”€â”€â”€â”€â”€â”€â”€â”€               â”€â”€â”€â”€â”€â”€

let count = <span class="hljs-built_in">track</span>(<span class="hljs-number">0</span>)  â†’  è§£æä¸º AST     â†’    <span class="hljs-selector-tag">var</span> count = _$_<span class="hljs-selector-class">.tracked</span>(<span class="hljs-number">0</span>)
                         (TrackedExpression)

<span class="hljs-keyword">@count</span>++              â†’  åˆ†æç»‘å®šç±»å‹    â†’    _$_.<span class="hljs-attribute">update</span>(count)
                         (<span class="hljs-attribute">kind</span>: <span class="hljs-string">'tracked'</span>)

{<span class="hljs-keyword">@count</span>}              â†’  è½¬æ¢ä¸ºæ¸²æŸ“å‡½æ•°  â†’    _$_.render(() =&gt; {
                                               _$_<span class="hljs-selector-class">.set_text</span>(anchor, _$_.get(count))
                                             })
</code></pre>
<p><strong>ä¸‰é˜¶æ®µç¼–è¯‘æµç¨‹ï¼š</strong></p>
<ol>
<li><strong>è§£æ (Parse)</strong>ï¼šå°†æºç è½¬ä¸º ASTï¼Œè¯†åˆ« <code>@</code>ã€<code>#[]</code>ã€<code>component</code> ç­‰ç‰¹æ®Šè¯­æ³•</li>
<li><strong>åˆ†æ (Analyze)</strong>ï¼šæ„å»ºä½œç”¨åŸŸã€æ ‡è®°å˜é‡ç±»å‹ã€è£å‰ªæœªä½¿ç”¨çš„ CSS</li>
<li><strong>è½¬æ¢ (Transform)</strong>ï¼šç”Ÿæˆå®¢æˆ·ç«¯/æœåŠ¡ç«¯ JavaScript ä»£ç </li>
</ol>
<hr/>
<h2 data-id="heading-18">ä¸å…¶ä»–æ¡†æ¶å¯¹æ¯”</h2>





























































<table><thead><tr><th>ç‰¹æ€§</th><th>Ripple</th><th>React</th><th>Vue 3</th><th>Svelte</th></tr></thead><tbody><tr><td>å“åº”å¼è¯­æ³•</td><td><code>track()</code> + <code>@</code></td><td><code>useState</code></td><td><code>ref().value</code></td><td><code>$:</code></td></tr><tr><td>è™šæ‹Ÿ DOM</td><td>æ— </td><td>æœ‰</td><td>æœ‰</td><td>æ— </td></tr><tr><td>ç¼–è¯‘æ—¶ä¼˜åŒ–</td><td>æ˜¯</td><td>å¦</td><td>éƒ¨åˆ†</td><td>æ˜¯</td></tr><tr><td>åŒ…ä½“ç§¯</td><td>~5KB</td><td>~40KB</td><td>~30KB</td><td>~2KB</td></tr><tr><td>å­¦ä¹ æ›²çº¿</td><td>ä½</td><td>ä¸­</td><td>ä¸­</td><td>ä½</td></tr><tr><td>æ§åˆ¶æµ</td><td>å†…è”è¯­æ³•</td><td>map/ä¸‰å…ƒ</td><td>v-if/v-for</td><td>{#if}/{#each}</td></tr><tr><td>æ ·æ¿ä»£ç </td><td><strong>æå°‘</strong></td><td>å¤š</td><td>ä¸­</td><td>å°‘</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-19">ç¼–è¯‘å™¨ï¼šè´¨é‡çš„å®ˆæŠ¤è€…</h2>
<p>Ripple çš„ç¼–è¯‘å™¨ä¸åªæ˜¯"ç¿»è¯‘"ä»£ç ï¼Œå®ƒæ˜¯ä»£ç è´¨é‡çš„å®ˆæŠ¤è€…ï¼š</p>
<h3 data-id="heading-20">1. è‡ªåŠ¨ä¾èµ–è¿½è¸ª</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½ åªéœ€è¦å†™ä¸šåŠ¡é€»è¾‘</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fullName</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-string">`<span class="hljs-subst">${@firstName}</span> <span class="hljs-subst">${@lastName}</span>`</span>

<span class="hljs-comment">// ç¼–è¯‘å™¨è‡ªåŠ¨åˆ†æä¾èµ–ï¼Œç”Ÿæˆä¼˜åŒ–ä»£ç ï¼š</span>
<span class="hljs-comment">// _$_.render(() =&gt; set_text(anchor, `${get(firstName)} ${get(lastName)}`))</span>
</code></pre>
<p>ä¸éœ€è¦ <code>useMemo([dep1, dep2])</code>ï¼Œç¼–è¯‘å™¨æ¯”ä½ æ›´æ¸…æ¥šä¾èµ–å…³ç³»ã€‚</p>
<h3 data-id="heading-21">2. CSS æ­»ä»£ç æ¶ˆé™¤</h3>
<pre><code class="hljs language-javascript" lang="javascript">component <span class="hljs-title class_">Button</span>() {
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"primary"</span>&gt;</span>{"Click"}<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>

  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-class">.primary</span> { <span class="hljs-attribute">background</span>: blue; }
    <span class="hljs-selector-class">.secondary</span> { <span class="hljs-attribute">background</span>: gray; }  <span class="hljs-comment">/* ç¼–è¯‘å™¨è‡ªåŠ¨ç§»é™¤ */</span>
    <span class="hljs-selector-class">.danger</span> { <span class="hljs-attribute">background</span>: red; }      <span class="hljs-comment">/* ç¼–è¯‘å™¨è‡ªåŠ¨ç§»é™¤ */</span>
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
}
</code></pre>
<p>ä¸ç”¨æ‹…å¿ƒ CSS è¶Šå†™è¶Šå¤šï¼Œç¼–è¯‘å™¨åªä¿ç•™çœŸæ­£ç”¨åˆ°çš„æ ·å¼ã€‚</p>
<h3 data-id="heading-22">3. ç»†ç²’åº¦æ›´æ–°</h3>
<pre><code class="hljs language-javascript" lang="javascript">component <span class="hljs-title class_">Profile</span>() {
  <span class="hljs-keyword">const</span> user = #{ <span class="hljs-attr">name</span>: <span class="hljs-string">"Tom"</span>, <span class="hljs-attr">bio</span>: <span class="hljs-string">"Developer"</span> };

  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{user.name}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>      {/* åªåœ¨ name å˜åŒ–æ—¶æ›´æ–° */}
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{user.bio}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>         {/* åªåœ¨ bio å˜åŒ–æ—¶æ›´æ–° */}
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<p>ç¼–è¯‘å™¨åˆ†ææ¯ä¸ªè¡¨è¾¾å¼çš„ä¾èµ–ï¼Œç”Ÿæˆæœ€ç²¾ç¡®çš„æ›´æ–°é€»è¾‘ã€‚</p>
<hr/>
<h2 data-id="heading-23">è®© AI æ›´æ‡‚ Ripple</h2>
<p>Ripple æä¾›äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.ripplejs.com%2Fllms.txt" target="_blank" title="https://www.ripplejs.com/llms.txt" ref="nofollow noopener noreferrer">llms.txt</a>ï¼Œè¿™æ˜¯ä¸€ä»½ä¸“ä¸º AI åŠ©æ‰‹è®¾è®¡çš„æ¡†æ¶è¯´æ˜æ–‡æ¡£ã€‚</p>
<p>å½“ä½ ä½¿ç”¨ Claudeã€ChatGPT æˆ–å…¶ä»– AI åŠ©æ‰‹æ—¶ï¼Œå¯ä»¥è®©å®ƒå…ˆé˜…è¯»è¿™ä»½æ–‡æ¡£ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">è¯·å…ˆé˜…è¯» https:<span class="hljs-comment">//www.ripplejs.com/llms.txtï¼Œç„¶åå¸®æˆ‘ç”¨ Ripple æ¡†æ¶å®ç°ä¸€ä¸ª [åŠŸèƒ½æè¿°]</span>
</code></pre>
<p>llms.txt åŒ…å«ï¼š</p>
<ul>
<li>Ripple æ ¸å¿ƒè¯­æ³•é€ŸæŸ¥</li>
<li>å¸¸è§æ¨¡å¼å’Œæœ€ä½³å®è·µ</li>
<li>æ˜“é”™ç‚¹å’Œæ­£ç¡®å†™æ³•</li>
<li>å®Œæ•´ç¤ºä¾‹ä»£ç </li>
</ul>
<p>è¿™ç¡®ä¿ AI ç”Ÿæˆçš„ä»£ç ç¬¦åˆ Ripple çš„è®¾è®¡ç†å¿µï¼Œè€Œä¸æ˜¯ç”¨ React çš„æ€ç»´å†™ Rippleã€‚</p>
<hr/>
<h2 data-id="heading-24">å¿«é€Ÿå¼€å§‹</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºæ–°é¡¹ç›®</span>
npx create-ripple-app my-app
<span class="hljs-built_in">cd</span> my-app

<span class="hljs-comment"># å¯åŠ¨å¼€å‘æœåŠ¡å™¨</span>
npm run dev
</code></pre>
<p>ç„¶åæ‰“å¼€ <code>src/App.ripple</code>ï¼Œå¼€å§‹ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ª Ripple ç»„ä»¶ï¼</p>
<hr/>
<h2 data-id="heading-25">å†™åœ¨æœ€å</h2>
<p>AI è®©å†™ä»£ç å˜å¾—æ›´å¿«äº†ï¼Œä½†"æ›´å¿«"ä¸ç­‰äº"æ›´å¥½"ã€‚</p>
<p>å½“ä»£ç ç”Ÿæˆçš„é€Ÿåº¦è¶…è¿‡ç†è§£çš„é€Ÿåº¦ï¼Œæˆ‘ä»¬æ›´éœ€è¦ï¼š</p>
<ul>
<li><strong>ç²¾ç®€çš„è¯­æ³•</strong> â€” è®©ä»£ç é‡å›å½’ç†æ€§</li>
<li><strong>ç¼–è¯‘æ—¶ä¼˜åŒ–</strong> â€” è®©æ€§èƒ½æœ‰ä¿éšœ</li>
<li><strong>ç›´è§‚çš„å¿ƒæ™ºæ¨¡å‹</strong> â€” è®©ç»´æŠ¤ä¸å†ç—›è‹¦</li>
</ul>
<p>Ripple ä¸æ˜¯ä¸ºäº†è¿½é€æ–°æ¦‚å¿µè€Œç”Ÿï¼Œè€Œæ˜¯å¯¹"å‰ç«¯å¼€å‘åº”è¯¥æ˜¯ä»€ä¹ˆæ ·"çš„ä¸€æ¬¡å›ç­”ã€‚</p>
<p><strong>å°‘å†™ä»£ç ï¼Œå†™å¥½ä»£ç ã€‚</strong></p>
<hr/>
<p><em>Ripple â€” è®©å“åº”å¼å›å½’ç®€å•</em></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fripple" target="_blank" title="https://github.com/anthropics/ripple" ref="nofollow noopener noreferrer">GitHub</a> Â· <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.ripplejs.com" target="_blank" title="https://www.ripplejs.com" ref="nofollow noopener noreferrer">æ–‡æ¡£</a> Â· <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.ripplejs.com%2Fllms.txt" target="_blank" title="https://www.ripplejs.com/llms.txt" ref="nofollow noopener noreferrer">llms.txt</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‡ªå®šä¹‰æµè§ˆå™¨çª—å£å°ºå¯¸ï¼Ÿå€ŸåŠ©ã€ŒMV3å‰ç«¯åŠ©æ‰‹ã€é›¶é—¨æ§›è°ƒç”¨ Chrome åŸç”Ÿ APIï¼]]></title>    <link>https://juejin.cn/post/7593181244709830708</link>    <guid>https://juejin.cn/post/7593181244709830708</guid>    <pubDate>2026-01-10T04:00:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593181244709830708" data-draft-id="7593338828196462632" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‡ªå®šä¹‰æµè§ˆå™¨çª—å£å°ºå¯¸ï¼Ÿå€ŸåŠ©ã€ŒMV3å‰ç«¯åŠ©æ‰‹ã€é›¶é—¨æ§›è°ƒç”¨ Chrome åŸç”Ÿ APIï¼"/> <meta itemprop="keywords" content="Chrome"/> <meta itemprop="datePublished" content="2026-01-10T04:00:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MV3å‰ç«¯åŠ©æ‰‹"/> <meta itemprop="url" content="https://juejin.cn/user/4461156900276416"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‡ªå®šä¹‰æµè§ˆå™¨çª—å£å°ºå¯¸ï¼Ÿå€ŸåŠ©ã€ŒMV3å‰ç«¯åŠ©æ‰‹ã€é›¶é—¨æ§›è°ƒç”¨ Chrome åŸç”Ÿ APIï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4461156900276416/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MV3å‰ç«¯åŠ©æ‰‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T04:00:31.000Z" title="Sat Jan 10 2026 04:00:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ— éœ€ç¼–å†™æ‰©å±•ï¼Œé€šè¿‡ JS å³å¯æ§åˆ¶æµè§ˆå™¨çª—å£å¤§å°ï¼</p>
</blockquote>
<p>ä½œä¸º Web å¼€å‘è€…ï¼Œä½ å¯èƒ½ç”¨è¿‡ç±»ä¼¼ Window Resizer çš„ Chrome æ‰©å±•â€”â€”å®ƒèƒ½ä¸€é”®åˆ‡æ¢é¢„è®¾åˆ†è¾¨ç‡ï¼Œæå¤§æ–¹ä¾¿äº†å“åº”å¼å¼€å‘è°ƒè¯•ã€‚</p>
<p>ä½†ä½ çŸ¥é“å—ï¼Ÿè¿™ç±»åŠŸèƒ½æœ¬è´¨ä¸Šä¾èµ–äº Chrome æ‰©å±•çš„åŸç”Ÿ APIï¼ˆå¦‚ chrome.windowsï¼‰ï¼Œè€Œæ™®é€šç½‘é¡µä¸­çš„ JavaScript æ˜¯æ— æ³•ç›´æ¥æ“ä½œæµè§ˆå™¨çª—å£çš„â€”â€”è¿™æ˜¯å‡ºäºå®‰å…¨é™åˆ¶ã€‚</p>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šå¦‚æœä¸å†™æ‰©å±•ï¼Œèƒ½å¦åœ¨ä»»æ„é¡µé¢ä¸­åŠ¨æ€è°ƒæ•´çª—å£å°ºå¯¸ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>å¯ä»¥ï¼</strong></p>
<p>åªéœ€å®‰è£…ä¸€æ¬¾åä¸º ã€Œ<strong>MV3å‰ç«¯åŠ©æ‰‹</strong>ã€ çš„ Chrome æ‰©å±•ï¼Œä½ å°±èƒ½åœ¨ä»»ä½•ç½‘é¡µä¸­é€šè¿‡çº¯ JavaScript è°ƒç”¨åŸç”Ÿ APIï¼Œè½»æ¾å®ç°çª—å£å°ºå¯¸è‡ªå®šä¹‰ã€‚</p>
<h2 data-id="heading-0">æ ¸å¿ƒåŸç†ï¼šé€šè¿‡ window.$mv3 æ¥å£æ¡¥æ¥æ‰©å±•èƒ½åŠ›</h2>
<p>ã€ŒMV3å‰ç«¯åŠ©æ‰‹ã€æ˜¯ä¸€æ¬¾åŸºäº Chrome Manifest V3 æ„å»ºçš„å¼€å‘è€…å·¥å…·æ‰©å±•ã€‚å®ƒåœ¨å…¨å±€æš´éœ²äº†ä¸€ä¸ªå®‰å…¨æ¥å£ <code>window.$mv3</code>ï¼Œå…è®¸ä½ åœ¨ä»»æ„ç½‘é¡µä¸­ï¼Œä»¥å—æ§æ–¹å¼è°ƒç”¨ Chrome æ‰©å±• APIã€‚</p>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>æ— éœ€æ‰“åŒ…ã€æ— éœ€å‘å¸ƒã€æ— éœ€äº†è§£ Chrome Manifest V3 æ¶æ„ï¼›</li>
<li>åªéœ€ä¸€æ®µ JS ä»£ç ï¼Œå³å¯è·å¾— <code>chrome.windows</code>ã€<code>chrome.tabs</code>ã€<code>chrome.storage</code> ç­‰å¼ºå¤§èƒ½åŠ›ï¼›</li>
<li>å®Œå…¨å…¼å®¹ç°æœ‰å¼€å‘ä¹ æƒ¯ï¼Œåƒå†™æ™®é€šå‰ç«¯ä»£ç ä¸€æ ·æ“ä½œæµè§ˆå™¨ã€‚</li>
</ul>
<h2 data-id="heading-1">å®æˆ˜æ¼”ç¤ºï¼šä¸€é”®è°ƒæ•´çª—å£ä¸º 1280Ã—800</h2>
<p>æ‰“å¼€ä»»æ„ç½‘é¡µï¼ˆä¾‹å¦‚ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.baidu.com%2F" target="_blank" title="https://www.baidu.com/" ref="nofollow noopener noreferrer">ç™¾åº¦é¦–é¡µ</a>ï¼‰ï¼ŒæŒ‰ä¸‹ F12 æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œåœ¨ Console æ§åˆ¶å°ä¸­ç²˜è´´å¹¶è¿è¡Œä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç¤ºä¾‹ä»£ç å°†æ¼”ç¤ºWindow Resizerï¼Œæ”¹å˜æµè§ˆå™¨çª—å£å°ºå¯¸çš„æ ¸å¿ƒæ–¹æ³•</span>
<span class="hljs-comment">// size = { width, height }</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">resize</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">size</span>) =&gt; {
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">$mv3</span>?.<span class="hljs-property">extApi</span>.<span class="hljs-property">isConnect</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœªä¸MV3å‰ç«¯åŠ©æ‰‹å»ºç«‹è¿æ¥'</span>);
  }
  <span class="hljs-keyword">if</span> (!size) {
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// å¾—åˆ°å½“å‰çª—å£ä¿¡æ¯</span>
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">$mv3</span>.<span class="hljs-property">extApi</span>.<span class="hljs-title function_">exec</span>({
      <span class="hljs-attr">code</span>: <span class="hljs-string">`chrome.windows.getCurrent()`</span>,
      <span class="hljs-attr">cmd</span>: <span class="hljs-string">'service_worker_eval'</span>,
      <span class="hljs-attr">timeout</span>: <span class="hljs-number">2000</span>,
    });
    <span class="hljs-keyword">if</span> (data?.<span class="hljs-property">exec_error</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(data.<span class="hljs-property">exec_error</span>);
    }

    <span class="hljs-comment">// è·å–å±å¹•æœ‰æ•ˆå°ºå¯¸</span>
    <span class="hljs-keyword">const</span> { availWidth, availHeight } = <span class="hljs-variable language_">window</span>.<span class="hljs-property">screen</span>;
    <span class="hljs-keyword">let</span> left = data.<span class="hljs-property">left</span>;
    <span class="hljs-keyword">let</span> top = data.<span class="hljs-property">top</span>;
    <span class="hljs-keyword">let</span> width = size.<span class="hljs-property">width</span>;
    <span class="hljs-keyword">let</span> height = size.<span class="hljs-property">height</span>;
    <span class="hljs-comment">// å¦‚æœå®½åº¦è¶…å‡ºå±å¹•å®½åº¦ï¼Œåˆ™å–å±å¹•å®½åº¦</span>
    <span class="hljs-keyword">if</span> (size.<span class="hljs-property">width</span> &gt; availWidth) {
      width = availWidth;
      left = -<span class="hljs-number">8</span>;
    }
    <span class="hljs-comment">// å¦‚æœé«˜åº¦è¶…å‡ºå±å¹•é«˜åº¦ï¼Œåˆ™å–å±å¹•é«˜åº¦</span>
    <span class="hljs-keyword">if</span> (size.<span class="hljs-property">height</span> &gt; availHeight) {
      height = availHeight;
      top = <span class="hljs-number">0</span>;
    }

    width += <span class="hljs-number">16</span>; <span class="hljs-comment">// å®½åº¦è¡¥16ï¼Œå®é™…è°ƒæ•´å‡ºæ¥ï¼Œæ€»å®½åº¦è¦å°16</span>
    height += <span class="hljs-number">8</span>; <span class="hljs-comment">// é«˜åº¦è¡¥8ï¼Œå®é™…è°ƒæ•´å‡ºæ¥ï¼Œæ€»é«˜åº¦è¦å°8</span>

    <span class="hljs-comment">// çª—å£å±…ä¸­</span>
    left = (availWidth - width) / <span class="hljs-number">2</span>;
    top = (availHeight - height) / <span class="hljs-number">2</span>;
    <span class="hljs-keyword">if</span> (top &lt; <span class="hljs-number">0</span>) {
      top = <span class="hljs-number">0</span>;
    }

    <span class="hljs-comment">// çª—å£æ›´æ–°å‚æ•°</span>
    <span class="hljs-keyword">let</span> updateInfo = {
      <span class="hljs-attr">windowId</span>: data.<span class="hljs-property">id</span>,
      <span class="hljs-attr">options</span>: {
        <span class="hljs-attr">focused</span>: <span class="hljs-literal">true</span>,
        width,
        height,
        <span class="hljs-attr">left</span>: <span class="hljs-built_in">parseInt</span>(left), <span class="hljs-comment">// ä¸èƒ½æœ‰å°æ•°</span>
        <span class="hljs-attr">top</span>: <span class="hljs-built_in">parseInt</span>(top), <span class="hljs-comment">// ä¸èƒ½æœ‰å°æ•°</span>
        <span class="hljs-attr">state</span>: <span class="hljs-string">'normal'</span>,
      },
    };
    <span class="hljs-comment">// æ›´æ–°çª—å£å°ºå¯¸</span>
    <span class="hljs-keyword">const</span> data2 = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">$mv3</span>.<span class="hljs-property">extApi</span>.<span class="hljs-title function_">exec</span>({
      <span class="hljs-attr">code</span>: <span class="hljs-string">`chrome.windows.update(<span class="hljs-subst">${updateInfo.windowId}</span>, <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(
        updateInfo.options
      )}</span>)`</span>,
      <span class="hljs-attr">cmd</span>: <span class="hljs-string">'service_worker_eval'</span>,
      <span class="hljs-attr">timeout</span>: <span class="hljs-number">2000</span>,
    });
    <span class="hljs-keyword">if</span> (data2?.<span class="hljs-property">exec_error</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(data2.<span class="hljs-property">exec_error</span>);
    }
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">$mv3</span>.<span class="hljs-property">log</span>.<span class="hljs-title function_">debug</span>(<span class="hljs-string">`è®¾ç½®çª—å£å°ºå¯¸å¤±è´¥: <span class="hljs-subst">${e.message}</span>`</span>);
    <span class="hljs-keyword">throw</span> e;
  }
};

<span class="hljs-comment">// å°†çª—å£å°ºå¯¸è°ƒæ•´ä¸º1280x800</span>
<span class="hljs-keyword">await</span> <span class="hljs-title function_">resize</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">1280</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">800</span> });
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'çª—å£å°ºå¯¸å·²è°ƒæ•´ä¸º1280x800'</span>);
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1e8222a894b494e8325a8d099475448~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTVYz5YmN56uv5Yqp5omL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768622430&amp;x-signature=RWeuzG2UMff08pCsCShNSl9HKAg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¿è¡Œåï¼Œä½ çš„æµè§ˆå™¨çª—å£å°†è‡ªåŠ¨å±…ä¸­å¹¶ç¼©æ”¾ä¸º 1280Ã—800 åƒç´ ï¼</p>
<blockquote>
<p>ğŸ’¡ <strong>æç¤ºï¼š</strong></p>
<ul>
<li>ä»£ç ä¸­å¯¹ width å’Œ height å¢åŠ äº† 16 å’Œ 8 çš„è¡¥å¿å€¼ï¼Œè¿™æ˜¯ç”±äº Chrome
çª—å£è¾¹æ¡†å’Œæ ‡é¢˜æ å ç”¨å¯¼è‡´çš„å®é™…å¯è§†åŒºåŸŸç•¥å°äºè®¾ç½®å€¼ã€‚å¸‚é¢ä¸Šå¤§éƒ¨åˆ†è°ƒæ•´çª—å£å°ºå¯¸çš„æ‰©å±•å¹¶æ²¡æœ‰è¿›è¡Œè¡¥å¿ï¼Œæ‰€ä»¥çª—å£å°ºå¯¸è°ƒæ•´å‡ºæ¥éƒ½ä¼šè¾¾ä¸åˆ°é¢„è®¾å°ºå¯¸ã€‚</li>
</ul>
</blockquote>
<h2 data-id="heading-2">ã€ŒMV3å‰ç«¯åŠ©æ‰‹ã€è¿˜èƒ½åšä»€ä¹ˆï¼Ÿ</h2>
<p>é™¤äº†çª—å£æ§åˆ¶ï¼Œè¯¥æ‰©å±•è¿˜å¼€æ”¾äº†æ›´å¤šåŸç”Ÿèƒ½åŠ›ï¼Œèµ‹èƒ½å‰ç«¯å¼€å‘è€…çªç ´æµè§ˆå™¨é™åˆ¶ï¼š</p>





























































<table><thead><tr><th>èƒ½åŠ›</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>ç»•è¿‡ CORS</strong></td><td>ç›´æ¥è¯·æ±‚ä»»æ„åŸŸåæ¥å£ï¼Œæ— è§†è·¨åŸŸé™åˆ¶ï¼ˆç±»ä¼¼ä»£ç†ï¼‰</td></tr><tr><td><strong>æ³¨å…¥å†…å®¹è„šæœ¬</strong></td><td>åœ¨ä»»æ„é¡µé¢è¿è¡Œè‡ªå®šä¹‰è„šæœ¬ï¼ˆç±»ä¼¼æ²¹çŒ´ï¼‰</td></tr><tr><td><code>chrome.tabs</code></td><td>æ ‡ç­¾é¡µæ“ä½œã€æ‰¹é‡æ‰“å¼€/å…³é—­</td></tr><tr><td><code>chrome.windows</code></td><td>çª—å£ç®¡ç†ã€å¤šå±è°ƒè¯•</td></tr><tr><td><code>chrome.storage</code></td><td>ä½¿ç”¨ <code>chrome.storage.local/sync</code> è¿›è¡Œè·¨é¡µé¢ã€è·¨ä¼šè¯çš„æ•°æ®æŒä¹…åŒ–å­˜å‚¨ï¼Œæ¯” <code>localStorage</code> æ›´å¼ºå¤§ä¸”æ”¯æŒå¼‚æ­¥ã€‚å¯çªç ´æµè§ˆå™¨é»˜è®¤å­˜å‚¨é…é¢é™åˆ¶ï¼Œé€‚åˆç¼“å­˜å¤§é‡æ•°æ®</td></tr><tr><td><code>chrome.cookies</code></td><td>è¯»å–ã€è®¾ç½®ã€åˆ é™¤æŒ‡å®šåŸŸåçš„ Cookieï¼Œå¯ç”¨äºè‡ªåŠ¨ç™»å½•ã€è·¨åŸŸèº«ä»½åŒæ­¥ã€Cookie ç®¡ç†å·¥å…·ç­‰ã€‚</td></tr><tr><td><code>chrome.tts</code></td><td>è°ƒç”¨ç³»ç»Ÿè¯­éŸ³æœ—è¯»æ–‡æœ¬</td></tr><tr><td><code>chrome.notifications</code></td><td>åœ¨ç³»ç»Ÿé€šçŸ¥ä¸­å¿ƒå¼¹å‡ºæé†’</td></tr><tr><td><code>chrome.bookmarks</code></td><td>è¯»å–ã€åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤ä¹¦ç­¾</td></tr><tr><td><code>chrome.history</code></td><td>è®¿é—®ç”¨æˆ·æµè§ˆå†å²è®°å½•</td></tr><tr><td><code>chrome.topSites</code></td><td>è·å– Chrome é¦–é¡µâ€œå¸¸ç”¨ç½‘ç«™â€åˆ—è¡¨</td></tr><tr><td><code>chrome.search</code></td><td>è§¦å‘æµè§ˆå™¨åœ°å€æ æœç´¢ï¼ˆä½¿ç”¨é»˜è®¤æœç´¢å¼•æ“ï¼‰</td></tr><tr><td><code>chrome.runtime</code></td><td>ä¸æ‰©å±•é€šä¿¡ã€å‘é€æ¶ˆæ¯</td></tr></tbody></table>
<blockquote>
<p><strong>ğŸ’¡ é‡è¦è¯´æ˜ï¼š</strong></p>
<ul>
<li>æ‰€æœ‰æ•æ„Ÿæƒé™ï¼ˆå¦‚ historyã€cookies ç­‰ï¼‰åœ¨é¦–æ¬¡å®‰è£…ã€ŒMV3å‰ç«¯åŠ©æ‰‹ã€æ—¶å‡éœ€ç”¨æˆ·æ˜ç¡®æˆæƒï¼Œç¬¦åˆ Chrome Manifest V3 å®‰å…¨è§„èŒƒã€‚</li>
<li>ã€ŒMV3å‰ç«¯åŠ©æ‰‹ã€é€šè¿‡ <code>window.$mv3.extApi.exec()</code>å®‰å…¨å°è£…è¿™äº›èƒ½åŠ›ï¼Œå¼€å‘è€…æ— éœ€ç¼–å†™å®Œæ•´æ‰©å±•å³å¯è°ƒç”¨ï¼Œå¤§å¹…é™ä½ä½¿ç”¨é—¨æ§›ã€‚</li>
<li>æ›´å¤šæ‰©å±•åŸç”ŸAPIçš„è®¿é—®èƒ½åŠ›åç»­å‡å¯å¼€æ”¾ã€‚</li>
</ul>
</blockquote>
<p>å€ŸåŠ©ã€ŒMV3å‰ç«¯åŠ©æ‰‹ã€å¼€æ”¾çš„èƒ½åŠ›ï¼Œç›¸å½“äºä¸ºWebå¼€å‘è€…æä¾›äº†ä¸€ä¸ªè½»é‡çº§æµè§ˆå™¨è‡ªåŠ¨åŒ–å¹³å°ï¼Œèƒ½ä¸æµè§ˆå™¨å®ç°æ·±åº¦äº¤äº’ã€‚åŸºæœ¬å®ç°äº† â€œç”¨ Web æŠ€æœ¯æ“æ§æµè§ˆå™¨â€ çš„æ„¿æ™¯ã€‚</p>
<p>æ— è®ºä½ æ˜¯æƒ³æ„å»ºä¸ªäººæ•ˆç‡å·¥å…·ã€è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œè¿˜æ˜¯æ¢ç´¢æ–°å‹ Web åº”ç”¨å½¢æ€ï¼Œå®ƒéƒ½å€¼å¾—ä½ ä¸€è¯•ï¼</p>
<h2 data-id="heading-3">å®‰è£…ä½“éªŒ</h2>
<h3 data-id="heading-4">Microsoft Edgeæµè§ˆå™¨:</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmicrosoftedge.microsoft.com%2Faddons%2Fdetail%2Fkjhmboahdliodpidkdamifaeiepfkdbk" target="_blank" title="https://microsoftedge.microsoft.com/addons/detail/kjhmboahdliodpidkdamifaeiepfkdbk" ref="nofollow noopener noreferrer">ä» Microsoft Edge Add-ons å®‰è£…</a></p>
<h3 data-id="heading-5">Chromeæµè§ˆå™¨:</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.crxsoso.com%2Fwebstore%2Fdetail%2Fmippkopbehbpapfphcekdiodkkpbhaad" target="_blank" title="https://www.crxsoso.com/webstore/detail/mippkopbehbpapfphcekdiodkkpbhaad" ref="nofollow noopener noreferrer">ä» Crx æœæœ å®‰è£…(å›½å†…ä¼˜è´¨é•œåƒï¼Œæ— éœ€ç¿»å¢™)</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fchromewebstore.google.com%2Fdetail%2Fmippkopbehbpapfphcekdiodkkpbhaad" target="_blank" title="https://chromewebstore.google.com/detail/mippkopbehbpapfphcekdiodkkpbhaad" ref="nofollow noopener noreferrer">ä» Chrome Web Store å®‰è£…(éœ€ç¿»å¢™)</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆå›è°ƒå‡½æ•°ä¸æ˜¯ä¸€ç§å¥½çš„å¼‚æ­¥ç¼–ç¨‹æ–¹å¼]]></title>    <link>https://juejin.cn/post/7593541290990960690</link>    <guid>https://juejin.cn/post/7593541290990960690</guid>    <pubDate>2026-01-10T04:09:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593541290990960690" data-draft-id="7593177437083009075" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆå›è°ƒå‡½æ•°ä¸æ˜¯ä¸€ç§å¥½çš„å¼‚æ­¥ç¼–ç¨‹æ–¹å¼"/> <meta itemprop="keywords" content="JavaScript"/> <meta itemprop="datePublished" content="2026-01-10T04:09:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¶…ç»å¤§å¸…å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/1074701161733898"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆå›è°ƒå‡½æ•°ä¸æ˜¯ä¸€ç§å¥½çš„å¼‚æ­¥ç¼–ç¨‹æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1074701161733898/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¶…ç»å¤§å¸…å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T04:09:15.000Z" title="Sat Jan 10 2026 04:09:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸ºä»€ä¹ˆå¯¹äºå¼‚æ­¥ç¼–ç¨‹ï¼Œå›è°ƒä¸æ˜¯ä¸€ç§åˆé€‚çš„æ–¹å¼ï¼ŒåŸå› åœ¨äºä»¥ä¸‹ä¸¤ç‚¹:</p>
<h2 data-id="heading-0">å›è°ƒè¡¨ç¤ºå¼‚æ­¥çš„æ–¹å¼æ˜¯éçº¿æ€§çš„ï¼Œéé¡ºåºçš„ï¼Œå¾ˆéš¾ç†è§£</h2>
<p>è¯·çœ‹ä»¥ä¸‹ä»£ç </p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®é™…å®ç°çš„å¤æ‚å›è°ƒä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">registerUser</span>(<span class="hljs-params">username, password, callback</span>) {
    <span class="hljs-comment">// 1. å…ˆæ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å­˜åœ¨</span>
    <span class="hljs-title function_">checkUsernameExists</span>(username, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, exists</span>) {
        <span class="hljs-keyword">if</span> (err) {
            <span class="hljs-keyword">return</span> <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"æ£€æŸ¥ç”¨æˆ·åå¤±è´¥: "</span> + err.<span class="hljs-property">message</span>));
        }
        
        <span class="hljs-comment">// æ¡ä»¶åˆ¤æ–­ï¼šå¦‚æœç”¨æˆ·åå·²å­˜åœ¨</span>
        <span class="hljs-keyword">if</span> (exists) {
            <span class="hljs-keyword">return</span> <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"ç”¨æˆ·åå·²å­˜åœ¨"</span>));
        }
        
        <span class="hljs-comment">// 2. åˆ›å»ºæ–°ç”¨æˆ·</span>
        <span class="hljs-title function_">createUser</span>(username, password, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, user</span>) {
            <span class="hljs-keyword">if</span> (err) {
                <span class="hljs-comment">// é”™è¯¯å¤„ç†ï¼šåˆ›å»ºç”¨æˆ·å¤±è´¥</span>
                <span class="hljs-keyword">return</span> <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"åˆ›å»ºç”¨æˆ·å¤±è´¥: "</span> + err.<span class="hljs-property">message</span>));
            }
            
            <span class="hljs-comment">// 3. å‘é€æ¬¢è¿é‚®ä»¶</span>
            <span class="hljs-title function_">sendWelcomeEmail</span>(user.<span class="hljs-property">email</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, emailResult</span>) {
                <span class="hljs-keyword">if</span> (err) {
                    <span class="hljs-comment">// é”™è¯¯å¤„ç†ï¼šé‚®ä»¶å‘é€å¤±è´¥ï¼Œéœ€è¦å›æ»šï¼</span>
                    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"é‚®ä»¶å‘é€å¤±è´¥ï¼Œå›æ»šç”¨æˆ·åˆ›å»º"</span>);
                    
                    <span class="hljs-comment">// å›æ»šï¼šåˆ é™¤å·²åˆ›å»ºçš„ç”¨æˆ·</span>
                    <span class="hljs-title function_">rollbackCreateUser</span>(user.<span class="hljs-property">id</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">rollbackErr</span>) {
                        <span class="hljs-keyword">if</span> (rollbackErr) {
                            <span class="hljs-comment">// æ›´å¤æ‚çš„é”™è¯¯ï¼šå›æ»šä¹Ÿå¤±è´¥äº†ï¼</span>
                            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"å›æ»šå¤±è´¥:"</span>, rollbackErr);
                        }
                        
                        <span class="hljs-comment">// æœ€ç»ˆå›è°ƒï¼ŒåŒ…å«åŸå§‹é”™è¯¯</span>
                        <span class="hljs-keyword">return</span> <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"å‘é€æ¬¢è¿é‚®ä»¶å¤±è´¥: "</span> + err.<span class="hljs-property">message</span>));
                    });
                    <span class="hljs-keyword">return</span>; <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œå¿…é¡» returnï¼</span>
                }
                
                <span class="hljs-comment">// 4. è®°å½•æ³¨å†Œæ—¥å¿—ï¼ˆå¯é€‰æ“ä½œï¼Œä½†ä¸æ˜¯å¿…éœ€çš„ï¼‰</span>
                <span class="hljs-keyword">if</span> (<span class="hljs-title function_">shouldLogRegistration</span>()) {  <span class="hljs-comment">// æ¡ä»¶åˆ¤æ–­</span>
                    <span class="hljs-title function_">logRegistration</span>(user.<span class="hljs-property">id</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">err, logResult</span>) {
                        <span class="hljs-keyword">if</span> (err) {
                            <span class="hljs-comment">// æ³¨æ„ï¼šè¿™é‡Œæ—¥å¿—å¤±è´¥ä¸å½±å“ä¸»æµç¨‹</span>
                            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">"è®°å½•æ—¥å¿—å¤±è´¥ï¼Œä½†ç»§ç»­æµç¨‹:"</span>, err);
                        }
                        
                        <span class="hljs-comment">// æœ€ç»ˆæˆåŠŸå›è°ƒ</span>
                        <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, { 
                            <span class="hljs-attr">user</span>: user, 
                            <span class="hljs-attr">emailSent</span>: <span class="hljs-literal">true</span>,
                            <span class="hljs-attr">logged</span>: !err
                        });
                    });
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// æœ€ç»ˆæˆåŠŸå›è°ƒï¼ˆä¸èµ°æ—¥å¿—åˆ†æ”¯ï¼‰</span>
                    <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, { 
                        <span class="hljs-attr">user</span>: user, 
                        <span class="hljs-attr">emailSent</span>: <span class="hljs-literal">true</span>,
                        <span class="hljs-attr">logged</span>: <span class="hljs-literal">false</span>
                    });
                }
            });
        });
    });
}
</code></pre>
<p>è¿™æ®µä»£ç éœ€è¦åœ¨å¤šä¸ªåµŒå¥—å‡½æ•°ä¸­æ¥å›è·³è·ƒï¼Œè€Œä¸”é”™è¯¯å¤„ç†ä»£ç è¢«åˆ†æ•£åœ¨äº†å¤šä¸ªå±‚çº§ä¸­ï¼Œå¯¼è‡´è¿™æ®µä»£ç éš¾è¯»ä¹‹ä¸€åœ¨äºåµŒå¥—ï¼Œä¹‹ä¸€åœ¨äºif-elseå¯¼è‡´ä»£ç é€»è¾‘è¿›å…¥ä¸åŒçš„å‡½æ•°å¤„ç†ä¸­æ‰“æ–­äº†çº¿æ€§çš„é˜…è¯»</p>
<h2 data-id="heading-1">å›è°ƒå‡½æ•°çš„ä¿¡ä»»é—®é¢˜</h2>
<p>å›è°ƒå‡½æ•°æ˜¯æ§åˆ¶åè½¬çš„,åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹å‡½æ•°çš„æ—¶å€™ï¼Œå›è°ƒå‡½æ•°æŠŠè‡ªå·±å‡½æ•°çš„ä¸€éƒ¨åˆ†æ‰§è¡Œæ§åˆ¶äº¤ç»™ç¬¬ä¸‰æ–¹å‡½æ•°æœ¬èº«</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">ajax</span>(<span class="hljs-string">"url..."</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
    <span class="hljs-comment">//é€»è¾‘å¤„ç†</span>
})
</code></pre>
<p>å½“ç¬¬ä¸‰æ–¹å‡½æ•°å¦‚è¿™é‡Œçš„ajaxï¼Œå¹¶æ²¡æœ‰è°ƒç”¨ä½ çš„å›è°ƒå‡½æ•°ï¼Œæˆ–è€…è¯´å®ƒå¹¶ä¸æ˜¯ä½ æœŸæœ›çš„é‚£æ ·æ˜¯å¼‚æ­¥çš„ï¼Œåˆæˆ–è€…å®ƒæŠŠä½ æ‰“æ–­å‡½æ•°æ¯”æœŸæœ›ä¸­çš„å¤šè°ƒç”¨æˆ–å°‘å—²ç”¨äº†å‡ æ¬¡ï¼Œéƒ½ä¼šå¯¼è‡´ç¨‹åºå‡ºé”™ï¼Œä½†æ˜¯åŸºäºä¿¡ä»»é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç‰¹å®šçš„ä»£ç å»è§£å†³ä¸€äº›é—®é¢˜ï¼Œ</p>
<h4 data-id="heading-2">è°ƒç”¨è¶…æ—¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">timeoutify</span>(<span class="hljs-params">fn, delay</span>) {
    <span class="hljs-keyword">var</span> intv = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
        intv = <span class="hljs-literal">null</span>;
        <span class="hljs-title function_">fn</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"Timeout !"</span>))
    }, delay);
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (intv) {
            <span class="hljs-comment">//æ²¡æœ‰è¶…æ—¶</span>
            <span class="hljs-built_in">clearTimeout</span>(intv);
            fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>,[<span class="hljs-literal">null</span>].<span class="hljs-title function_">concat</span>([].<span class="hljs-property">slice</span>.<span class="hljs-title function_">apply</span>(argument, <span class="hljs-number">0</span>)));
        }
    }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span> (err, data) {
    <span class="hljs-keyword">if</span> (err) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
    }
}

<span class="hljs-title function_">ajax</span>(<span class="hljs-string">"url..."</span>, <span class="hljs-title function_">timeoutify</span>(foo, <span class="hljs-number">500</span>));
</code></pre>
<h4 data-id="heading-3">è°ƒç”¨è¿‡æ—©</h4>
<p>å½“ä¸ç¡®å®šä½¿ç”¨çš„apiæ˜¯å¦ä¼šä¸ä¼šæ°¸è¿œçš„å¼‚æ­¥æ‰§è¡Œçš„æ—¶å€™ä½¿ç”¨</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">asyncify</span> (fn) {
    <span class="hljs-keyword">var</span> origin_fn = fn,
        intv = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
            intv = <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">if</span> (fn) <span class="hljs-title function_">fn</span>();
        }, <span class="hljs-number">0</span>);
    fn = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (intv) {
            <span class="hljs-comment">//è°ƒç”¨è¿‡æ—©</span>
            <span class="hljs-keyword">var</span> args = [].<span class="hljs-property">slice</span>.<span class="hljs-title function_">call</span>(argument);
            <span class="hljs-keyword">var</span> bindArgs = [<span class="hljs-variable language_">this</span>].<span class="hljs-title function_">concat</span>(args);
            
            fn = origin_fn.<span class="hljs-property">bind</span>.<span class="hljs-title function_">apply</span>(origin_fn, bindArgs);
            
            
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">//å·²ç»æ˜¯å¼‚æ­¥</span>
            orgin_fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, argument);
        }
    }
}
</code></pre>
<p>è¿™æ®µä»£ç æœ€ç»ˆèƒ½ä¿è¯ä½ çš„ä»£ç æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ä¸ç®¡åœ¨ä»€ä¹ˆæƒ…æ™¯ä¸‹ï¼Œæ‰€ä»¥å°½ç®¡å¯ä»¥é€šè¿‡ä»£ç å»è§£å†³ä¸€éƒ¨åˆ†çš„å›è°ƒä¿¡ä»»é—®é¢˜ï¼Œä½†æ˜¯å†™è¿™ç§ä»£ç çš„éš¾åº¦è¦é«˜äºä¸šåŠ¡æœ¬èº«çš„æ°´å¹³ï¼Œè€Œä¸”ä»£ç ä¹Ÿå˜å¾—æ›´åŠ è‡ƒè‚¿å’Œéš¾ç»´æŠ¤äº†</p>
<h2 data-id="heading-4">æ€»ç»“</h2>
<p>åŸºäºä¸Šè¿°ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œä¸ºä»€ä¹ˆå¼‚æ­¥ç¼–ç¨‹ä½¿ç”¨å›è°ƒä¸æ˜¯ä¸€ç§å¥½çš„åŠæ³•ï¼Œä¸€éƒ¨åˆ†æ˜¯å›è°ƒçš„è¡¨ç¤ºæ–¹å¼æ˜¯éçº¿æ€§çš„éé¡ºåºçš„ï¼Œä¸€éƒ¨åˆ†æ˜¯å›è°ƒå‡½æ•°çš„æ§åˆ¶åè½¬å¯¼è‡´çš„ä¿¡ä»»é—®é¢˜ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Rust Trait è¿›é˜¶ï¼šæ‰“é€ ä½ çš„ç±»å‹ç³»ç»Ÿè¶…èƒ½åŠ›]]></title>    <link>https://juejin.cn/post/7593212374921740315</link>    <guid>https://juejin.cn/post/7593212374921740315</guid>    <pubDate>2026-01-10T04:51:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593212374921740315" data-draft-id="7593242327932846090" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Rust Trait è¿›é˜¶ï¼šæ‰“é€ ä½ çš„ç±»å‹ç³»ç»Ÿè¶…èƒ½åŠ›"/> <meta itemprop="keywords" content="Rust,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2026-01-10T04:51:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœŸè±†1250"/> <meta itemprop="url" content="https://juejin.cn/user/3280598428302727"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Rust Trait è¿›é˜¶ï¼šæ‰“é€ ä½ çš„ç±»å‹ç³»ç»Ÿè¶…èƒ½åŠ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3280598428302727/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœŸè±†1250
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T04:51:44.000Z" title="Sat Jan 10 2026 04:51:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯<a href="https://juejin.cn/user/3280598428302727" target="_blank" title="https://juejin.cn/user/3280598428302727">åœŸè±†</a>ï¼Œæ¬¢è¿å…³æ³¨æˆ‘çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FBV3lJX43oLLbe-MGE5d7IA" target="_blank" title="https://mp.weixin.qq.com/s/BV3lJX43oLLbe-MGE5d7IA" ref="nofollow noopener noreferrer">å…¬ä¼—å·ï¼šåœŸè±†å­¦å‰ç«¯</a></p>
<blockquote>
<p>"æŒæ¡ Traitï¼Œå°±åƒå­¦ä¼šäº† Rust çš„é­”æ³•å’’è¯­ã€‚" â€”â€” æŸä½è¢«ç¼–è¯‘å™¨æŠ˜ç£¨åé¡¿æ‚Ÿçš„ Rustacean</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>å½“ä½ ä»¥ä¸ºå­¦ä¼šäº† Trait çš„åŸºç¡€ç”¨æ³•ï¼Œä¿¡å¿ƒæ»¡æ»¡åœ°å†™ä¸‹ <code>impl Display for Vec&lt;i32&gt;</code> æ—¶ï¼Œç¼–è¯‘å™¨å†·ç¬‘ä¸€å£°ï¼š <strong>"è¿™ä¸ç¬¦åˆå­¤å„¿è§„åˆ™ï¼"</strong> ä½ å¿ƒæƒ³ï¼š"ä»€ä¹ˆé¬¼ï¼Ÿæˆ‘åªæ˜¯æƒ³ç»™ Vec å®ç°ä¸ª Displayï¼Œæ€ä¹ˆå°±æˆå­¤å„¿äº†ï¼Ÿ"</p>
<p>åˆ«æ…Œï¼Œæœ¬æ–‡å°†å¸¦ä½ æ·±å…¥ Trait çš„äº”ä¸ªè¿›é˜¶ä¸»é¢˜ï¼Œæ­å¼€è¿™äº›"ç¼–è¯‘å™¨é»‘è¯"èƒŒåçš„ç§˜å¯†ã€‚è¯»å®Œè¿™ç¯‡æ–‡ç« ï¼Œä½ ä¸ä»…ä¼šç†è§£ä¸ºä»€ä¹ˆç¼–è¯‘å™¨è¦è¿™æ ·è®¾è®¡ï¼Œè¿˜èƒ½ä¼˜é›…åœ°ç»•è¿‡è¿™äº›é™åˆ¶ï¼Œå†™å‡ºæ›´ Rusty çš„ä»£ç ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€Trait å¯¹è±¡ï¼šå½“ç±»å‹åœ¨è¿è¡Œæ—¶æ‰æ­æ™“</h2>
<h3 data-id="heading-2">Whyï¼šä¸ºä»€ä¹ˆéœ€è¦ Trait å¯¹è±¡ï¼Ÿ</h3>
<p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªå›¾å½¢ç•Œé¢åº“ï¼Œéœ€è¦å­˜å‚¨å„ç§ä¸åŒçš„ UI ç»„ä»¶ï¼ˆæŒ‰é’®ã€æ–‡æœ¬æ¡†ã€å›¾ç‰‡ç­‰ï¼‰åœ¨ä¸€ä¸ªé›†åˆé‡Œã€‚é—®é¢˜æ¥äº†ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// è¿™æ ·å†™ï¼Ÿç±»å‹ä¸ç»Ÿä¸€å•Šï¼</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">components</span> = <span class="hljs-built_in">vec!</span>[Button::<span class="hljs-title function_ invoke__">new</span>(), TextBox::<span class="hljs-title function_ invoke__">new</span>(), Image::<span class="hljs-title function_ invoke__">new</span>()]; <span class="hljs-comment">// âŒ ç±»å‹ä¸åŒ¹é…</span>
</code></pre>
<p>ç”¨æ³›å‹ï¼Ÿé‚£ä½ åªèƒ½å­˜å‚¨åŒä¸€ç§ç±»å‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Screen</span>&lt;T: Draw&gt; {
    components: <span class="hljs-type">Vec</span>&lt;T&gt;,  <span class="hljs-comment">// åªèƒ½å­˜ä¸€ç§ç±»å‹</span>
}
</code></pre>
<p>è¿™æ—¶å€™ï¼Œ<strong>Trait å¯¹è±¡</strong>é—ªäº®ç™»åœºï¼å®ƒè®©ä½ å¯ä»¥å­˜å‚¨ä¸åŒç±»å‹ï¼Œåªè¦å®ƒä»¬å®ç°äº†åŒä¸€ä¸ª Traitã€‚</p>
<h3 data-id="heading-3">Whatï¼šä»€ä¹ˆæ˜¯ Trait å¯¹è±¡ï¼Ÿ</h3>
<p>Trait å¯¹è±¡æ˜¯ä¸€ç§"ç±»å‹æ“¦é™¤"æœºåˆ¶ï¼Œé€šè¿‡ <code>dyn</code> å…³é”®å­—åˆ›å»ºï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Draw</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">draw</span>(&amp;<span class="hljs-keyword">self</span>);
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Button</span>;
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">TextBox</span>;

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Draw</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Button</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">draw</span>(&amp;<span class="hljs-keyword">self</span>) { <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ç»˜åˆ¶æŒ‰é’®"</span>); }
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Draw</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">TextBox</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">draw</span>(&amp;<span class="hljs-keyword">self</span>) { <span class="hljs-built_in">println!</span>(<span class="hljs-string">"ç»˜åˆ¶æ–‡æœ¬æ¡†"</span>); }
}

<span class="hljs-comment">// ä½¿ç”¨ Trait å¯¹è±¡</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">components</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> Draw&gt;&gt; = <span class="hljs-built_in">vec!</span>[
    <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(Button),
    <span class="hljs-type">Box</span>::<span class="hljs-title function_ invoke__">new</span>(TextBox),
];

<span class="hljs-keyword">for</span> <span class="hljs-variable">component</span> <span class="hljs-keyword">in</span> components {
    component.<span class="hljs-title function_ invoke__">draw</span>();  <span class="hljs-comment">// åŠ¨æ€åˆ†å‘ï¼</span>
}
</code></pre>
<h3 data-id="heading-4">Howï¼šæ·±å…¥ç†è§£ Trait å¯¹è±¡</h3>
<h4 data-id="heading-5">1. Trait å¯¹è±¡çš„å†…å­˜å¸ƒå±€</h4>
<p>Trait å¯¹è±¡æ˜¯ä¸ª"èƒ–æŒ‡é’ˆ"ï¼ˆfat pointerï¼‰ï¼ŒåŒ…å«ä¸¤éƒ¨åˆ†ï¼š</p>
<ul>
<li><strong>æ•°æ®æŒ‡é’ˆ</strong>ï¼šæŒ‡å‘å®é™…çš„æ•°æ®</li>
<li><strong>è™šè¡¨æŒ‡é’ˆï¼ˆvtableï¼‰</strong>ï¼šæŒ‡å‘è¯¥ç±»å‹çš„æ–¹æ³•è¡¨</li>
</ul>
<pre><code class="hljs language-text" lang="text">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ•°æ®æŒ‡é’ˆ        â”‚ â”€â”€â†’ å®é™…çš„ Button æˆ– TextBox
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  vtable æŒ‡é’ˆ     â”‚ â”€â”€â†’ æ–¹æ³•è¡¨ï¼ˆdrawã€drop ç­‰ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-6">2. åŠ¨æ€åˆ†å‘ vs é™æ€åˆ†å‘</h4>
<p><strong>é™æ€åˆ†å‘ï¼ˆæ³›å‹ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">render</span>&lt;T: Draw&gt;(item: T) {
    item.<span class="hljs-title function_ invoke__">draw</span>();  <span class="hljs-comment">// ç¼–è¯‘æ—¶ç”Ÿæˆç‰¹å®šç‰ˆæœ¬çš„ä»£ç </span>
}
<span class="hljs-comment">// ç¼–è¯‘å™¨ä¼šç”Ÿæˆ render_for_Button å’Œ render_for_TextBox ä¸¤ä¸ªå‡½æ•°</span>
</code></pre>
<p><strong>åŠ¨æ€åˆ†å‘ï¼ˆTrait å¯¹è±¡ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">render</span>(item: &amp;<span class="hljs-keyword">dyn</span> Draw) {
    item.<span class="hljs-title function_ invoke__">draw</span>();  <span class="hljs-comment">// è¿è¡Œæ—¶é€šè¿‡ vtable æŸ¥æ‰¾æ–¹æ³•</span>
}
<span class="hljs-comment">// åªæœ‰ä¸€ä¸ªå‡½æ•°ï¼Œä½†è¿è¡Œæ—¶æœ‰é¢å¤–å¼€é”€</span>
</code></pre>
<h4 data-id="heading-7">3. Trait å¯¹è±¡çš„é™åˆ¶ï¼šå¯¹è±¡å®‰å…¨ï¼ˆObject Safetyï¼‰</h4>
<p>ä¸æ˜¯æ‰€æœ‰ Trait éƒ½èƒ½å˜æˆ Trait å¯¹è±¡ï¼å¿…é¡»æ»¡è¶³"å¯¹è±¡å®‰å…¨"è§„åˆ™ï¼š</p>
<p>âŒ <strong>ä¸èƒ½æœ‰è¿”å› Self çš„æ–¹æ³•</strong>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Clone</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">clone</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span>;  <span class="hljs-comment">// Self å¤§å°æœªçŸ¥ï¼</span>
}

<span class="hljs-comment">// âŒ æ— æ³•åˆ›å»º Box&lt;dyn Clone&gt;</span>
</code></pre>
<p>âŒ <strong>ä¸èƒ½æœ‰æ³›å‹æ–¹æ³•</strong>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Container</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add</span>&lt;T&gt;(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>, item: T);  <span class="hljs-comment">// æ³›å‹æ–¹æ³•ï¼</span>
}

<span class="hljs-comment">// âŒ vtable æ— æ³•ä¸ºæ‰€æœ‰ T å­˜å‚¨æ–¹æ³•æŒ‡é’ˆ</span>
</code></pre>
<p>âœ… <strong>æ­£ç¡®çš„å†™æ³•</strong>ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Draw</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">draw</span>(&amp;<span class="hljs-keyword">self</span>);  <span class="hljs-comment">// æ²¡æœ‰ Self è¿”å›ï¼Œæ²¡æœ‰æ³›å‹</span>
}
</code></pre>
<h3 data-id="heading-8">æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨é™æ€åˆ†å‘ï¼ˆæ³›å‹ï¼‰</strong>ï¼šæ€§èƒ½æ›´å¥½ï¼Œèƒ½å†…è”ä¼˜åŒ–</li>
<li><strong>éœ€è¦å¼‚æ„é›†åˆæ—¶ä½¿ç”¨ Trait å¯¹è±¡</strong>ï¼šå¦‚ <code>Vec&lt;Box&lt;dyn Trait&gt;&gt;</code></li>
<li><strong>æ³¨æ„å¤§å°é—®é¢˜</strong>ï¼šTrait å¯¹è±¡å¿…é¡»æ”¾åœ¨æŒ‡é’ˆåé¢ï¼ˆ<code>Box</code>ã€<code>&amp;</code>ã€<code>Arc</code> ç­‰ï¼‰</li>
</ol>
<h3 data-id="heading-9">å¸¸è§è¯¯åŒº</h3>
<p><strong>è¯¯åŒº 1ï¼šä»¥ä¸º Trait å¯¹è±¡åªèƒ½ç”¨ Box</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// å®é™…ä¸Šï¼Œ&amp;dynã€Arc&lt;dyn&gt;ã€Rc&lt;dyn&gt; éƒ½å¯ä»¥</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">item</span>: &amp;<span class="hljs-keyword">dyn</span> Draw = &amp;Button;
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">shared</span>: Arc&lt;<span class="hljs-keyword">dyn</span> Draw&gt; = Arc::<span class="hljs-title function_ invoke__">new</span>(Button);
</code></pre>
<p><strong>è¯¯åŒº 2ï¼šå¿½ç•¥æ€§èƒ½å¼€é”€</strong>
åŠ¨æ€åˆ†å‘æ¯”é™æ€åˆ†å‘æ…¢çº¦ 3-5 å€ã€‚å¦‚æœæ€§èƒ½å…³é”®ï¼Œè€ƒè™‘ç”¨æšä¸¾ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">Component</span> {
    <span class="hljs-title function_ invoke__">Button</span>(Button),
    <span class="hljs-title function_ invoke__">TextBox</span>(TextBox),
}
</code></pre>
<hr/>
<h2 data-id="heading-10">äºŒã€æ³›å‹çº¦æŸï¼šè®©ç¼–è¯‘å™¨çŸ¥é“ä½ çš„åº•çº¿</h2>
<h3 data-id="heading-11">Whyï¼šä¸ºä»€ä¹ˆéœ€è¦çº¦æŸæ³›å‹ï¼Ÿ</h3>
<p>æƒ³è±¡ä½ å†™äº†ä¸ª"æ‰“å°ä»»ä½•ä¸œè¥¿"çš„å‡½æ•°ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">print_it</span>&lt;T&gt;(item: T) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, item);  <span class="hljs-comment">// âŒ ç¼–è¯‘å™¨ï¼šT èƒ½æ‰“å°å—ï¼Ÿæˆ‘æ€ä¹ˆçŸ¥é“ï¼</span>
}
</code></pre>
<p>ç¼–è¯‘å™¨éœ€è¦ä½ <strong>æ‰¿è¯º</strong> <code>T</code> å…·å¤‡æŸäº›èƒ½åŠ›ã€‚è¿™å°±æ˜¯æ³›å‹çº¦æŸã€‚</p>
<h3 data-id="heading-12">Whatï¼šæ³›å‹çº¦æŸçš„ä¸‰ç§å½¢å¼</h3>
<h4 data-id="heading-13">1. Trait Boundï¼ˆæœ€å¸¸ç”¨ï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// æ–¹å¼ä¸€ï¼šå°–æ‹¬å·é‡Œçº¦æŸ</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">print_it</span>&lt;T: Display&gt;(item: T) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, item);
}

<span class="hljs-comment">// æ–¹å¼äºŒï¼šwhere å­å¥ï¼ˆå¤æ‚çº¦æŸæ›´æ¸…æ™°ï¼‰</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">complex_func</span>&lt;T, U&gt;(t: T, u: U)
<span class="hljs-keyword">where</span>
    T: Display + <span class="hljs-built_in">Clone</span>,
    U: <span class="hljs-built_in">Debug</span> + <span class="hljs-built_in">PartialEq</span>,
{
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h4 data-id="heading-14">2. impl Traitï¼ˆå‚æ•°æˆ–è¿”å›å€¼ï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// å‚æ•°ä½ç½®ï¼šè¯­æ³•ç³–</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">print_it</span>(item: <span class="hljs-keyword">impl</span> <span class="hljs-title class_">Display</span>) {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, item);
}

<span class="hljs-comment">// è¿”å›å€¼ä½ç½®ï¼šéšè—å…·ä½“ç±»å‹</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_number</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">impl</span> <span class="hljs-title class_">Display</span> {
    <span class="hljs-number">42</span>  <span class="hljs-comment">// è¿”å› i32ï¼Œä½†è°ƒç”¨è€…åªçŸ¥é“å®ƒå®ç°äº† Display</span>
}
</code></pre>
<h4 data-id="heading-15">3. ç”Ÿå‘½å‘¨æœŸçº¦æŸ</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">longest</span>&lt;<span class="hljs-symbol">'a</span>, T&gt;(x: &amp;<span class="hljs-symbol">'a</span> T, y: &amp;<span class="hljs-symbol">'a</span> T) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-symbol">'a</span> T
<span class="hljs-keyword">where</span>
    T: <span class="hljs-built_in">PartialOrd</span>,
{
    <span class="hljs-keyword">if</span> x &gt; y { x } <span class="hljs-keyword">else</span> { y }
}
</code></pre>
<h3 data-id="heading-16">Howï¼šçº¦æŸçš„é«˜çº§ç”¨æ³•</h3>
<h4 data-id="heading-17">1. å¤šé‡çº¦æŸ</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">serialize</span>&lt;T&gt;(item: T)
<span class="hljs-keyword">where</span>
    T: Serialize + <span class="hljs-built_in">Clone</span> + <span class="hljs-built_in">Send</span> + <span class="hljs-symbol">'static</span>,
{
    <span class="hljs-comment">// T å¿…é¡»å¯åºåˆ—åŒ–ã€å¯å…‹éš†ã€çº¿ç¨‹å®‰å…¨ã€æ‹¥æœ‰é™æ€ç”Ÿå‘½å‘¨æœŸ</span>
}
</code></pre>
<h4 data-id="heading-18">2. å…³è”ç±»å‹çº¦æŸ</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">sum_all</span>&lt;T&gt;(items: T) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span>
<span class="hljs-keyword">where</span>
    T: <span class="hljs-built_in">Iterator</span>&lt;Item = <span class="hljs-type">i32</span>&gt;,  <span class="hljs-comment">// çº¦æŸè¿­ä»£å™¨çš„å…ƒç´ ç±»å‹</span>
{
    items.<span class="hljs-title function_ invoke__">sum</span>()
}
</code></pre>
<h4 data-id="heading-19">3. Higher-Rank Trait Boundsï¼ˆHRTBï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// è¦æ±‚é—­åŒ…å¯¹ä»»æ„ç”Ÿå‘½å‘¨æœŸéƒ½æœ‰æ•ˆ</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">call_with_ref</span>&lt;F&gt;(f: F)
<span class="hljs-keyword">where</span>
    F: <span class="hljs-keyword">for</span>&lt;<span class="hljs-symbol">'a</span>&gt; <span class="hljs-title function_ invoke__">Fn</span>(&amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">i32</span>),
{
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">x</span> = <span class="hljs-number">42</span>;
    <span class="hljs-title function_ invoke__">f</span>(&amp;x);
}
</code></pre>
<h3 data-id="heading-20">æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>ç®€å•çº¦æŸç”¨ <code>impl Trait</code>ï¼Œå¤æ‚çº¦æŸç”¨ <code>where</code> å­å¥</strong></li>
<li><strong>è¿”å›å€¼ç”¨ <code>impl Trait</code> å¯ä»¥éšè—å®ç°ç»†èŠ‚</strong></li>
<li><strong>é¿å…è¿‡åº¦çº¦æŸ</strong>ï¼šåªçº¦æŸçœŸæ­£éœ€è¦çš„ Trait</li>
</ol>
<h3 data-id="heading-21">å¸¸è§è¯¯åŒº</h3>
<p><strong>è¯¯åŒº 1ï¼šæ··æ·† <code>impl Trait</code> åœ¨å‚æ•°å’Œè¿”å›å€¼çš„è¡Œä¸º</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// å‚æ•°ï¼šè°ƒç”¨è€…é€‰æ‹©ç±»å‹</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">foo</span>(x: <span class="hljs-keyword">impl</span> <span class="hljs-title class_">Display</span>) { }

<span class="hljs-comment">// è¿”å›å€¼ï¼šå‡½æ•°å†…éƒ¨é€‰æ‹©ç±»å‹ï¼Œä¸”åªèƒ½æ˜¯ä¸€ç§å…·ä½“ç±»å‹</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">bar</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">impl</span> <span class="hljs-title class_">Display</span> {
    <span class="hljs-keyword">if</span> <span class="hljs-literal">true</span> {
        <span class="hljs-number">42</span>  <span class="hljs-comment">// âœ…</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-string">"hello"</span>  <span class="hljs-comment">// âŒ ç±»å‹ä¸ä¸€è‡´ï¼</span>
    }
}
</code></pre>
<p><strong>è¯¯åŒº 2ï¼šè®¤ä¸ºæ³›å‹æ²¡æœ‰è¿è¡Œæ—¶å¼€é”€</strong>
æ³›å‹ä¼šå•æ€åŒ–ï¼ˆmonomorphizationï¼‰ï¼Œä¸ºæ¯ä¸ªå…·ä½“ç±»å‹ç”Ÿæˆä¸€ä»½ä»£ç å‰¯æœ¬ï¼Œå¯èƒ½å¯¼è‡´äºŒè¿›åˆ¶ä½“ç§¯è†¨èƒ€ã€‚</p>
<hr/>
<h2 data-id="heading-22">ä¸‰ã€å…³è”ç±»å‹ï¼šä¼˜é›…çš„ç±»å‹ç³»ç»Ÿè®¾è®¡</h2>
<h3 data-id="heading-23">Whyï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥ç”¨æ³›å‹ï¼Ÿ</h3>
<p>æ¯”è¾ƒè¿™ä¸¤ç§è®¾è®¡ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// æ³›å‹ç‰ˆæœ¬</span>
<span class="hljs-keyword">trait</span> <span class="hljs-title class_">Iterator</span>&lt;T&gt; {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">next</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;T&gt;;
}

<span class="hljs-comment">// ä½¿ç”¨æ—¶ï¼šå¤©å•Šï¼Œè¦å†™è¿™ä¹ˆå¤šç±»å‹å‚æ•°ï¼</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">process</span>&lt;I, T&gt;(iter: I) <span class="hljs-keyword">where</span> I: <span class="hljs-built_in">Iterator</span>&lt;T&gt; { }

<span class="hljs-comment">// å…³è”ç±»å‹ç‰ˆæœ¬</span>
<span class="hljs-keyword">trait</span> <span class="hljs-title class_">Iterator</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Item</span>;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">next</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-keyword">Self</span>::Item&gt;;
}

<span class="hljs-comment">// ä½¿ç”¨æ—¶ï¼šæ¸…çˆ½å¤šäº†ï¼</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">process</span>&lt;I&gt;(iter: I) <span class="hljs-keyword">where</span> I: <span class="hljs-built_in">Iterator</span> { }
</code></pre>
<h3 data-id="heading-24">Whatï¼šå…³è”ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>å…³è”ç±»å‹æ˜¯"è¾“å‡ºç±»å‹"ï¼Œç”±å®ç°è€…å†³å®šï¼Œè€Œä¸æ˜¯ä½¿ç”¨è€…ã€‚æ ¸å¿ƒåŒºåˆ«ï¼š</p>

























<table><thead><tr><th>ç‰¹æ€§</th><th>æ³›å‹å‚æ•°</th><th>å…³è”ç±»å‹</th></tr></thead><tbody><tr><td>è°å†³å®šç±»å‹</td><td>ä½¿ç”¨è€…</td><td>å®ç°è€…</td></tr><tr><td>å¯ä»¥å¤šæ¬¡å®ç°å—</td><td>âœ… å¯ä»¥</td><td>âŒ åªèƒ½ä¸€æ¬¡</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ä¸€ä¸ªç±»å‹å¯èƒ½å®ç°å¤šç§"å…³ç³»"</td><td>ç±»å‹ä¸ Trait æ˜¯ä¸€å¯¹ä¸€å…³ç³»</td></tr></tbody></table>
<h3 data-id="heading-25">Howï¼šå…³è”ç±»å‹çš„å®æˆ˜</h3>
<h4 data-id="heading-26">1. è¿­ä»£å™¨æ¨¡å¼</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Iterator</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Item</span>;  <span class="hljs-comment">// å…³è”ç±»å‹</span>
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">next</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-keyword">Self</span>::Item&gt;;
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Counter</span> {
    count: <span class="hljs-type">u32</span>,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Iterator</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Counter</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Item</span> = <span class="hljs-type">u32</span>;  <span class="hljs-comment">// æŒ‡å®šå…·ä½“ç±»å‹</span>
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">next</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-type">u32</span>&gt; {
        <span class="hljs-keyword">self</span>.count += <span class="hljs-number">1</span>;
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.count &lt;= <span class="hljs-number">5</span> {
            <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-keyword">self</span>.count)
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-literal">None</span>
        }
    }
}
</code></pre>
<h4 data-id="heading-27">2. å›¾ç»“æ„ç¤ºä¾‹</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Graph</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Node</span>;
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Edge</span>;
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">has_edge</span>(&amp;<span class="hljs-keyword">self</span>, from: &amp;<span class="hljs-keyword">Self</span>::Node, to: &amp;<span class="hljs-keyword">Self</span>::Node) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span>;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">neighbors</span>(&amp;<span class="hljs-keyword">self</span>, node: &amp;<span class="hljs-keyword">Self</span>::Node) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Vec</span>&lt;<span class="hljs-keyword">Self</span>::Node&gt;;
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">WebGraph</span>;

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Graph</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">WebGraph</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Node</span> = <span class="hljs-type">String</span>;  <span class="hljs-comment">// ç½‘é¡µ URL</span>
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Edge</span> = Hyperlink;  <span class="hljs-comment">// è¶…é“¾æ¥</span>
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">has_edge</span>(&amp;<span class="hljs-keyword">self</span>, from: &amp;<span class="hljs-type">String</span>, to: &amp;<span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> {
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰é“¾æ¥</span>
        <span class="hljs-literal">true</span>
    }
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">neighbors</span>(&amp;<span class="hljs-keyword">self</span>, node: &amp;<span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt; {
        <span class="hljs-built_in">vec!</span>[]
    }
}

<span class="hljs-comment">// ä½¿ç”¨æ—¶åªéœ€è¦çŸ¥é“å®ç°äº† Graphï¼Œä¸ç”¨å…³å¿ƒèŠ‚ç‚¹å’Œè¾¹çš„å…·ä½“ç±»å‹</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">count_edges</span>&lt;G: Graph&gt;(graph: &amp;G) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">usize</span> {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-number">0</span>
}
</code></pre>
<h4 data-id="heading-28">3. å¸¦çº¦æŸçš„å…³è”ç±»å‹</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Container</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Item</span>: Display + <span class="hljs-built_in">Clone</span>;  <span class="hljs-comment">// è¦æ±‚å…³è”ç±»å‹æ»¡è¶³çº¦æŸ</span>
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span>::Item;
}
</code></pre>
<h4 data-id="heading-29">4. GATï¼ˆGeneric Associated Typesï¼‰- Rust 1.65+ ç¨³å®š</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Iterable</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Item</span>&lt;<span class="hljs-symbol">'a</span>&gt; <span class="hljs-keyword">where</span> <span class="hljs-keyword">Self</span>: <span class="hljs-symbol">'a</span>;  <span class="hljs-comment">// å¸¦ç”Ÿå‘½å‘¨æœŸå‚æ•°çš„å…³è”ç±»å‹</span>
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">iter</span>&lt;<span class="hljs-symbol">'a</span>&gt;(&amp;<span class="hljs-symbol">'a</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">impl</span> <span class="hljs-title class_">Iterator</span>&lt;Item = <span class="hljs-keyword">Self</span>::Item&lt;<span class="hljs-symbol">'a</span>&gt;&gt;;
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Iterable</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Vec</span>&lt;<span class="hljs-type">String</span>&gt; {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Item</span>&lt;<span class="hljs-symbol">'a</span>&gt; = &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">String</span>;
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">iter</span>&lt;<span class="hljs-symbol">'a</span>&gt;(&amp;<span class="hljs-symbol">'a</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">impl</span> <span class="hljs-title class_">Iterator</span>&lt;Item = &amp;<span class="hljs-symbol">'a</span> <span class="hljs-type">String</span>&gt; {
        <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">iter</span>()
    }
}
</code></pre>
<h3 data-id="heading-30">æœ€ä½³å®è·µ</h3>
<ol>
<li>
<p><strong>ç±»å‹å›ºå®šç”¨å…³è”ç±»å‹ï¼Œç±»å‹å¯å˜ç”¨æ³›å‹</strong></p>
<ul>
<li><code>Iterator::Item</code>ï¼šä¸€ä¸ªè¿­ä»£å™¨åªäº§ç”Ÿä¸€ç§ç±»å‹ â†’ å…³è”ç±»å‹ âœ…</li>
<li><code>Add&lt;Rhs&gt;</code>ï¼šå¯èƒ½å®ç° <code>Add&lt;i32&gt;</code> å’Œ <code>Add&lt;f64&gt;</code> â†’ æ³›å‹å‚æ•° âœ…</li>
</ul>
</li>
<li>
<p><strong>å…³è”ç±»å‹è®© API æ›´ç®€æ´</strong>ï¼šé¿å…"ç±»å‹å‚æ•°ä¼ æŸ“ç—…"</p>
</li>
<li>
<p><strong>GAT è§£å†³ç”Ÿå‘½å‘¨æœŸéš¾é¢˜</strong>ï¼šå¯ä»¥å€Ÿç”¨ <code>self</code> çš„æ•°æ®</p>
</li>
</ol>
<h3 data-id="heading-31">å¸¸è§è¯¯åŒº</h3>
<p><strong>è¯¯åŒº 1ï¼šä»¥ä¸ºå…³è”ç±»å‹å’Œæ³›å‹å¯ä»¥éšæ„æ›¿æ¢</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºä¾‹ï¼šAdd åº”è¯¥ç”¨æ³›å‹ï¼Œå› ä¸ºå¯èƒ½å®ç°å¤šç§åŠ æ³•</span>
<span class="hljs-keyword">trait</span> <span class="hljs-title class_">Add</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Rhs</span>;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add</span>(<span class="hljs-keyword">self</span>, rhs: <span class="hljs-keyword">Self</span>::Rhs) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span>;
}

<span class="hljs-comment">// âœ… æ­£ç¡®ï¼šæ ‡å‡†åº“ä½¿ç”¨æ³›å‹å‚æ•°</span>
<span class="hljs-keyword">trait</span> <span class="hljs-title class_">Add</span>&lt;Rhs = <span class="hljs-keyword">Self</span>&gt; {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Output</span>;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add</span>(<span class="hljs-keyword">self</span>, rhs: Rhs) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span>::Output;
}
</code></pre>
<p><strong>è¯¯åŒº 2ï¼šå¿½ç•¥å…³è”ç±»å‹çš„é»˜è®¤å€¼</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Add</span>&lt;Rhs = <span class="hljs-keyword">Self</span>&gt; {  <span class="hljs-comment">// Rhs é»˜è®¤æ˜¯ Self</span>
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Output</span>;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add</span>(<span class="hljs-keyword">self</span>, rhs: Rhs) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span>::Output;
}

<span class="hljs-comment">// å®ç°æ—¶å¯ä»¥çœç•¥ Rhs</span>
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Add</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">i32</span> {  <span class="hljs-comment">// ç­‰ä»·äº Add&lt;i32&gt;</span>
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Output</span> = <span class="hljs-type">i32</span>;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">add</span>(<span class="hljs-keyword">self</span>, rhs: <span class="hljs-type">i32</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> { <span class="hljs-keyword">self</span> + rhs }
}
</code></pre>
<hr/>
<h2 data-id="heading-32">å››ã€é»˜è®¤å®ç°ï¼šå·æ‡’çš„è‰ºæœ¯</h2>
<h3 data-id="heading-33">Whyï¼šä¸ºä»€ä¹ˆéœ€è¦é»˜è®¤å®ç°ï¼Ÿ</h3>
<p>æƒ³è±¡ä½ å®šä¹‰äº†ä¸ª Traitï¼Œæœ‰ 10 ä¸ªæ–¹æ³•ã€‚å¦‚æœæ¯æ¬¡å®ç°éƒ½è¦å†™ 10 ä¸ªæ–¹æ³•ï¼Œä¸ç´¯æ­»ç¨‹åºå‘˜æ‰æ€ªï¼é»˜è®¤å®ç°è®©ä½ åªéœ€è¦å®ç°æ ¸å¿ƒæ–¹æ³•ï¼Œå…¶ä»–çš„"ç™½é€"ã€‚</p>
<h3 data-id="heading-34">Whatï¼šé»˜è®¤å®ç°æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Logger</span> {
    <span class="hljs-comment">// å¿…é¡»å®ç°çš„æ–¹æ³•</span>
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">log</span>(&amp;<span class="hljs-keyword">self</span>, message: &amp;<span class="hljs-type">str</span>);
    
    <span class="hljs-comment">// æœ‰é»˜è®¤å®ç°çš„æ–¹æ³•</span>
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">warn</span>(&amp;<span class="hljs-keyword">self</span>, message: &amp;<span class="hljs-type">str</span>) {
        <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">log</span>(&amp;<span class="hljs-built_in">format!</span>(<span class="hljs-string">"âš ï¸  {}"</span>, message));
    }
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">error</span>(&amp;<span class="hljs-keyword">self</span>, message: &amp;<span class="hljs-type">str</span>) {
        <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">log</span>(&amp;<span class="hljs-built_in">format!</span>(<span class="hljs-string">"âŒ {}"</span>, message));
    }
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ConsoleLogger</span>;

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Logger</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">ConsoleLogger</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">log</span>(&amp;<span class="hljs-keyword">self</span>, message: &amp;<span class="hljs-type">str</span>) {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, message);
    }
    <span class="hljs-comment">// warn å’Œ error è‡ªåŠ¨æ‹¥æœ‰äº†ï¼</span>
}

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">logger</span> = ConsoleLogger;
logger.<span class="hljs-title function_ invoke__">warn</span>(<span class="hljs-string">"ç£ç›˜å¿«æ»¡äº†"</span>);  <span class="hljs-comment">// è¾“å‡ºï¼šâš ï¸  ç£ç›˜å¿«æ»¡äº†</span>
</code></pre>
<h3 data-id="heading-35">Howï¼šé»˜è®¤å®ç°çš„é«˜çº§ç”¨æ³•</h3>
<h4 data-id="heading-36">1. åŸºäºå…¶ä»–æ–¹æ³•çš„é»˜è®¤å®ç°</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Sequence</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">len</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">usize</span>;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get</span>(&amp;<span class="hljs-keyword">self</span>, index: <span class="hljs-type">usize</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-type">i32</span>&gt;;
    
    <span class="hljs-comment">// é»˜è®¤å®ç°åˆ©ç”¨å…¶ä»–æ–¹æ³•</span>
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">is_empty</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> {
        <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">len</span>() == <span class="hljs-number">0</span>
    }
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">first</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-type">i32</span>&gt; {
        <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-number">0</span>)
    }
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">last</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-type">i32</span>&gt; {
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">is_empty</span>() {
            <span class="hljs-literal">None</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">len</span>() - <span class="hljs-number">1</span>)
        }
    }
}
</code></pre>
<h4 data-id="heading-37">2. è¦†ç›–é»˜è®¤å®ç°ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Drawable</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">draw_slow</span>(&amp;<span class="hljs-keyword">self</span>) {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ…¢é€Ÿç»˜åˆ¶..."</span>);
        <span class="hljs-comment">// é€šç”¨ä½†æ…¢çš„å®ç°</span>
    }
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">FastShape</span>;

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Drawable</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">FastShape</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">draw_slow</span>(&amp;<span class="hljs-keyword">self</span>) {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"GPU åŠ é€Ÿç»˜åˆ¶ï¼"</span>);  <span class="hljs-comment">// è¦†ç›–é»˜è®¤å®ç°</span>
    }
}
</code></pre>
<h4 data-id="heading-38">3. æ ‡å‡†åº“çš„ç»å…¸ä¾‹å­ï¼šIterator</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Iterator</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Item</span>;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">next</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-keyword">Self</span>::Item&gt;;  <span class="hljs-comment">// å”¯ä¸€å¿…é¡»å®ç°çš„æ–¹æ³•</span>
    
    <span class="hljs-comment">// ä»¥ä¸‹æ–¹æ³•éƒ½æœ‰é»˜è®¤å®ç°ï¼</span>
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">count</span>(<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">usize</span> { <span class="hljs-comment">/* ... */</span> }
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">map</span>&lt;B, F&gt;(<span class="hljs-keyword">self</span>, f: F) <span class="hljs-punctuation">-&gt;</span> Map&lt;<span class="hljs-keyword">Self</span>, F&gt; { <span class="hljs-comment">/* ... */</span> }
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">filter</span>&lt;P&gt;(<span class="hljs-keyword">self</span>, predicate: P) <span class="hljs-punctuation">-&gt;</span> Filter&lt;<span class="hljs-keyword">Self</span>, P&gt; { <span class="hljs-comment">/* ... */</span> }
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fold</span>&lt;B, F&gt;(<span class="hljs-keyword">self</span>, init: B, f: F) <span class="hljs-punctuation">-&gt;</span> B { <span class="hljs-comment">/* ... */</span> }
    <span class="hljs-comment">// è¿˜æœ‰ 50+ ä¸ªæ–¹æ³•ï¼</span>
}

<span class="hljs-comment">// ä½ åªéœ€å®ç° nextï¼Œå°±å…è´¹è·å¾—æ‰€æœ‰æ–¹æ³•</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Counter</span> { count: <span class="hljs-type">u32</span> }

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Iterator</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Counter</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Item</span> = <span class="hljs-type">u32</span>;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">next</span>(&amp;<span class="hljs-keyword">mut</span> <span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-type">u32</span>&gt; {
        <span class="hljs-keyword">self</span>.count += <span class="hljs-number">1</span>;
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">self</span>.count &lt;= <span class="hljs-number">5</span> { <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-keyword">self</span>.count) } <span class="hljs-keyword">else</span> { <span class="hljs-literal">None</span> }
    }
}

<span class="hljs-comment">// ç«‹å³æ‹¥æœ‰æ‰€æœ‰ Iterator æ–¹æ³•ï¼</span>
Counter { count: <span class="hljs-number">0</span> }
    .<span class="hljs-title function_ invoke__">map</span>(|x| x * <span class="hljs-number">2</span>)
    .<span class="hljs-title function_ invoke__">filter</span>(|x| x % <span class="hljs-number">3</span> == <span class="hljs-number">0</span>)
    .sum::&lt;<span class="hljs-type">u32</span>&gt;();  <span class="hljs-comment">// é­”æ³•èˆ¬åœ°å·¥ä½œ</span>
</code></pre>
<h3 data-id="heading-39">æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>æœ€å°åŒ–å¿…éœ€æ–¹æ³•ï¼Œæœ€å¤§åŒ–é»˜è®¤å®ç°</strong>ï¼šé™ä½ä½¿ç”¨é—¨æ§›</li>
<li><strong>ä¸ºæ€§èƒ½å…³é”®æ–¹æ³•æä¾›é»˜è®¤å®ç°ï¼Œä½†å…è®¸ä¼˜åŒ–è¦†ç›–</strong></li>
<li><strong>é»˜è®¤å®ç°åº”è¯¥æ˜¯"åˆç†çš„"</strong>ï¼šä¸è¦è®©ç”¨æˆ·æ„Ÿåˆ°æƒŠè®¶</li>
</ol>
<h3 data-id="heading-40">å¸¸è§è¯¯åŒº</h3>
<p><strong>è¯¯åŒº 1ï¼šä»¥ä¸ºé»˜è®¤å®ç°ä¼šè‡ªåŠ¨æ›´æ–°</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">trait</span> <span class="hljs-title class_">Config</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">timeout</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> { <span class="hljs-number">30</span> }
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">is_slow</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">bool</span> {
        <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">timeout</span>() &gt; <span class="hljs-number">60</span>  <span class="hljs-comment">// ä¾èµ– timeout</span>
    }
}

<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyConfig</span>;
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Config</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyConfig</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">timeout</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">u32</span> { <span class="hljs-number">100</span> }  <span class="hljs-comment">// è¦†ç›–äº† timeout</span>
    <span class="hljs-comment">// is_slow è‡ªåŠ¨ä½¿ç”¨æ–°çš„ timeoutï¼âœ…</span>
}
</code></pre>
<p><strong>è¯¯åŒº 2ï¼šè¿‡åº¦ä¾èµ–é»˜è®¤å®ç°å¯¼è‡´æ€§èƒ½é—®é¢˜</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// é»˜è®¤å®ç°å¯èƒ½å¾ˆæ…¢</span>
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Iterator</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyType</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">count</span>(<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">usize</span> {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">count</span> = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> <span class="hljs-variable">_</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">self</span> { count += <span class="hljs-number">1</span>; }  <span class="hljs-comment">// O(n) éå†</span>
        count
    }
}

<span class="hljs-comment">// å¦‚æœä½ çŸ¥é“é•¿åº¦ï¼Œåº”è¯¥è¦†ç›–ï¼</span>
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Iterator</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Vec</span>&lt;T&gt; {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">count</span>(<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">usize</span> {
        <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">len</span>()  <span class="hljs-comment">// O(1) å¿«å¾—å¤šï¼</span>
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-41">äº”ã€å­¤å„¿è§„åˆ™ï¼šRust çš„"é—¨å½“æˆ·å¯¹"</h2>
<h3 data-id="heading-42">Whyï¼šä¸ºä»€ä¹ˆéœ€è¦å­¤å„¿è§„åˆ™ï¼Ÿ</h3>
<p>æƒ³è±¡ä¸€ä¸ªææ€–åœºæ™¯ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä½ çš„é¡¹ç›®</span>
<span class="hljs-keyword">extern</span> <span class="hljs-keyword">crate</span> awesome_lib;
<span class="hljs-keyword">extern</span> <span class="hljs-keyword">crate</span> another_lib;

<span class="hljs-keyword">use</span> std::fmt::Display;

<span class="hljs-comment">// awesome_lib å®ç°äº†ï¼š</span>
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Display</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fmt</span>(&amp;<span class="hljs-keyword">self</span>, f: &amp;<span class="hljs-keyword">mut</span> Formatter) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span> {
        <span class="hljs-built_in">write!</span>(f, <span class="hljs-string">"Awesome: {:?}"</span>, <span class="hljs-keyword">self</span>)
    }
}

<span class="hljs-comment">// another_lib ä¹Ÿå®ç°äº†ï¼š</span>
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Display</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fmt</span>(&amp;<span class="hljs-keyword">self</span>, f: &amp;<span class="hljs-keyword">mut</span> Formatter) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span> {
        <span class="hljs-built_in">write!</span>(f, <span class="hljs-string">"Another: {:?}"</span>, <span class="hljs-keyword">self</span>)
    }
}

<span class="hljs-comment">// ğŸ˜± ç¼–è¯‘å™¨ï¼šæˆ‘è¯¥ç”¨å“ªä¸ªï¼Ÿï¼Ÿï¼Ÿ</span>
<span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, <span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]);
</code></pre>
<p><strong>å­¤å„¿è§„åˆ™å°±æ˜¯ä¸ºäº†é˜²æ­¢è¿™ç§"ä¾èµ–åœ°ç‹±"ï¼</strong></p>
<h3 data-id="heading-43">Whatï¼šä»€ä¹ˆæ˜¯å­¤å„¿è§„åˆ™ï¼Ÿ</h3>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼šå®ç° Trait æ—¶ï¼ŒTrait æˆ–ç±»å‹è‡³å°‘æœ‰ä¸€ä¸ªå¿…é¡»æ˜¯æœ¬åœ°å®šä¹‰çš„ã€‚</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// âŒ ä¸å…è®¸ï¼šå¤–éƒ¨ Trait + å¤–éƒ¨ç±»å‹</span>
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Display</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; {  <span class="hljs-comment">// Display å’Œ Vec éƒ½æ¥è‡ªæ ‡å‡†åº“</span>
    <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯ï¼šE0117</span>
}

<span class="hljs-comment">// âœ… å…è®¸ï¼šæœ¬åœ° Trait + å¤–éƒ¨ç±»å‹</span>
<span class="hljs-keyword">trait</span> <span class="hljs-title class_">MyTrait</span> { }
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">MyTrait</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; { }  <span class="hljs-comment">// MyTrait æ˜¯æœ¬åœ°çš„</span>

<span class="hljs-comment">// âœ… å…è®¸ï¼šå¤–éƒ¨ Trait + æœ¬åœ°ç±»å‹</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyType</span>;
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Display</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyType</span> { }  <span class="hljs-comment">// MyType æ˜¯æœ¬åœ°çš„</span>

<span class="hljs-comment">// âœ… å…è®¸ï¼šæœ¬åœ° Trait + æœ¬åœ°ç±»å‹</span>
<span class="hljs-keyword">trait</span> <span class="hljs-title class_">MyTrait</span> { }
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyType</span>;
<span class="hljs-keyword">impl</span> <span class="hljs-title class_">MyTrait</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyType</span> { }
</code></pre>
<h3 data-id="heading-44">Howï¼šç»•è¿‡å­¤å„¿è§„åˆ™çš„æŠ€å·§</h3>
<h4 data-id="heading-45">1. Newtype æ¨¡å¼ï¼ˆæœ€å¸¸ç”¨ï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// æƒ³ä¸º Vec&lt;i32&gt; å®ç° Displayï¼Ÿåˆ›å»ºä¸ªåŒ…è£…ç±»å‹ï¼</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyVec</span>(<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt;);

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Display</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyVec</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fmt</span>(&amp;<span class="hljs-keyword">self</span>, f: &amp;<span class="hljs-keyword">mut</span> Formatter) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span> {
        <span class="hljs-built_in">write!</span>(f, <span class="hljs-string">"{:?}"</span>, <span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>)
    }
}

<span class="hljs-comment">// ä½¿ç”¨ Deref è®©å®ƒç”¨èµ·æ¥åƒ Vec</span>
<span class="hljs-keyword">use</span> std::ops::Deref;

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Deref</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">MyVec</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Target</span> = <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt;;
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">deref</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> &amp;<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; {
        &amp;<span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>
    }
}

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">my_vec</span> = <span class="hljs-title function_ invoke__">MyVec</span>(<span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]);
my_vec.<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-number">4</span>);  <span class="hljs-comment">// è‡ªåŠ¨è§£å¼•ç”¨ï¼</span>
<span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, my_vec);
</code></pre>
<h4 data-id="heading-46">2. æ‰©å±• Traitï¼ˆExtension Traitï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä¸èƒ½ç›´æ¥ä¸º Vec å®ç° Displayï¼Œä½†å¯ä»¥åˆ›å»ºè‡ªå·±çš„ Traitï¼</span>
<span class="hljs-keyword">trait</span> <span class="hljs-title class_">PrettyPrint</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">pretty_print</span>(&amp;<span class="hljs-keyword">self</span>);
}

<span class="hljs-keyword">impl</span>&lt;T: Display&gt; PrettyPrint <span class="hljs-keyword">for</span> <span class="hljs-title class_">Vec</span>&lt;T&gt; {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">pretty_print</span>(&amp;<span class="hljs-keyword">self</span>) {
        <span class="hljs-keyword">for</span> <span class="hljs-variable">item</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">self</span> {
            <span class="hljs-built_in">println!</span>(<span class="hljs-string">"- {}"</span>, item);
        }
    }
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_ invoke__">pretty_print</span>();
</code></pre>
<h4 data-id="heading-47">3. å‚æ•°åŒ–ä¸­ä»‹ï¼ˆBlanket Implementationï¼‰</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// åˆ©ç”¨æœ¬åœ°ç±»å‹å‚æ•°ç»•è¿‡é™åˆ¶</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">Wrapper</span>&lt;T&gt;(T);

<span class="hljs-keyword">impl</span>&lt;T&gt; Display <span class="hljs-keyword">for</span> <span class="hljs-title class_">Wrapper</span>&lt;T&gt;
<span class="hljs-keyword">where</span>
    T: Display,
{
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">fmt</span>(&amp;<span class="hljs-keyword">self</span>, f: &amp;<span class="hljs-keyword">mut</span> Formatter) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span> {
        <span class="hljs-built_in">write!</span>(f, <span class="hljs-string">"Wrapped: {}"</span>, <span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>)
    }
}

<span class="hljs-built_in">println!</span>(<span class="hljs-string">"{}"</span>, <span class="hljs-title function_ invoke__">Wrapper</span>(<span class="hljs-built_in">vec!</span>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]));  <span class="hljs-comment">// é—´æ¥å®ç°</span>
</code></pre>
<h4 data-id="heading-48">4. é«˜çº§æŠ€å·§ï¼šåˆ©ç”¨æ³›å‹çš„"è¦†ç›–"</h4>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// âœ… å…è®¸ï¼šè‡³å°‘ä¸€ä¸ªç±»å‹å‚æ•°ä½ç½®æ˜¯æœ¬åœ°ç±»å‹</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyType</span>;

<span class="hljs-keyword">impl</span>&lt;T&gt; <span class="hljs-built_in">From</span>&lt;T&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">Vec</span>&lt;MyType&gt; {  <span class="hljs-comment">// Vec&lt;MyType&gt; åŒ…å«æœ¬åœ°ç±»å‹ï¼</span>
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">from</span>(value: T) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Vec</span>&lt;MyType&gt; {
        <span class="hljs-built_in">vec!</span>[]
    }
}
</code></pre>
<h3 data-id="heading-49">ç²¾ç¡®çš„å­¤å„¿è§„åˆ™ï¼ˆé«˜çº§ï¼‰</h3>
<p>æ ¹æ® RFC 2451ï¼Œæ›´ç²¾ç¡®çš„è§„åˆ™æ˜¯ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// å¯¹äº impl&lt;T0...Tn&gt; Trait&lt;P1...Pn&gt; for P0</span>
<span class="hljs-comment">// å¦‚æœ Trait æ˜¯å¤–éƒ¨çš„ï¼Œåˆ™ï¼š</span>
<span class="hljs-comment">// 1. è‡³å°‘æœ‰ä¸€ä¸ªç±»å‹å‚æ•° Pi æ˜¯"æœ¬åœ°çš„"</span>
<span class="hljs-comment">// 2. åœ¨ Pi ä¹‹å‰çš„æ‰€æœ‰ç±»å‹å‚æ•°ä¸èƒ½åŒ…å« T0...Tn</span>

<span class="hljs-comment">// âœ… å…è®¸</span>
<span class="hljs-keyword">impl</span>&lt;T&gt; ForeignTrait&lt;LocalType, T&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">ForeignType</span>&lt;T&gt; { }
<span class="hljs-comment">// LocalType æ˜¯æœ¬åœ°çš„ï¼Œä¸”åœ¨å®ƒä¹‹å‰æ²¡æœ‰ç±»å‹å‚æ•°</span>

<span class="hljs-comment">// âŒ ä¸å…è®¸</span>
<span class="hljs-keyword">impl</span>&lt;T&gt; ForeignTrait&lt;T, LocalType&gt; <span class="hljs-keyword">for</span> <span class="hljs-title class_">ForeignType</span>&lt;T&gt; { }
<span class="hljs-comment">// è™½ç„¶ LocalType æ˜¯æœ¬åœ°çš„ï¼Œä½†åœ¨å®ƒä¹‹å‰çš„ T åŒ…å«äº†æ³›å‹å‚æ•°</span>
</code></pre>
<h3 data-id="heading-50">æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨ Newtype æ¨¡å¼</strong>ï¼šç®€å•ç›´æ¥</li>
<li><strong>Extension Trait é€‚åˆæ·»åŠ è¾…åŠ©æ–¹æ³•</strong>ï¼šä¸æ”¹å˜åŸç±»å‹</li>
<li><strong>ç†è§£è§„åˆ™èƒŒåçš„åŠ¨æœº</strong>ï¼šä¿è¯ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§</li>
<li><strong>è€ƒè™‘æ˜¯å¦çœŸçš„éœ€è¦è¯¥å®ç°</strong>ï¼šå¯èƒ½æœ‰æ›´å¥½çš„è®¾è®¡</li>
</ol>
<h3 data-id="heading-51">å¸¸è§è¯¯åŒº</h3>
<p><strong>è¯¯åŒº 1ï¼šä»¥ä¸º newtype ä¼šæœ‰æ€§èƒ½æŸå¤±</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyVec</span>(<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt;);  <span class="hljs-comment">// é›¶æˆæœ¬æŠ½è±¡ï¼ç¼–è¯‘åå’Œ Vec å®Œå…¨ä¸€æ ·</span>
</code></pre>
<p><strong>è¯¯åŒº 2ï¼šè¿‡åº¦ä½¿ç”¨ newtype å¯¼è‡´ä»£ç å†—ä½™</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// âŒ ä¸è¦ä¸ºæ¯ä¸ªå¤–éƒ¨ç±»å‹éƒ½åˆ›å»º newtype</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyVec</span>(<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt;);
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyString</span>(<span class="hljs-type">String</span>);
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">MyOption</span>(<span class="hljs-type">Option</span>&lt;<span class="hljs-type">i32</span>&gt;);
<span class="hljs-comment">// ...</span>

<span class="hljs-comment">// âœ… åªåœ¨çœŸæ­£éœ€è¦æ—¶ä½¿ç”¨</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">OrderedVec</span>(<span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt;);  <span class="hljs-comment">// æœ‰ç‰¹æ®Šè¯­ä¹‰ï¼šä¿æŒæœ‰åº</span>
</code></pre>
<p><strong>è¯¯åŒº 3ï¼šå¿½ç•¥ <code>#[fundamental]</code> ç±»å‹çš„ç‰¹æ®Šæ€§</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// Boxã€&amp;ã€&amp;mut ç­‰æ˜¯ #[fundamental] ç±»å‹ï¼Œè§„åˆ™ç¨æœ‰ä¸åŒ</span>
<span class="hljs-keyword">impl</span>&lt;T&gt; MyTrait <span class="hljs-keyword">for</span> <span class="hljs-title class_">Box</span>&lt;T&gt; { }  <span class="hljs-comment">// çœ‹èµ·æ¥éƒ½æ˜¯å¤–éƒ¨ç±»å‹ï¼Œä½†å…è®¸ï¼</span>
<span class="hljs-comment">// å› ä¸º Box è¢«æ ‡è®°ä¸º fundamental</span>
</code></pre>
<hr/>
<h2 data-id="heading-52">å…­ã€ç»¼åˆå®æˆ˜ï¼šæ‰“é€ ä¸€ä¸ªç±»å‹å®‰å…¨çš„é…ç½®ç³»ç»Ÿ</h2>
<p>è®©æˆ‘ä»¬æŠŠæ‰€æœ‰çŸ¥è¯†ç‚¹ä¸²èµ·æ¥ï¼Œå†™ä¸ªå®é™…ä¾‹å­ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::fmt::Display;

<span class="hljs-comment">// 1. ä½¿ç”¨å…³è”ç±»å‹å®šä¹‰é…ç½® Trait</span>
<span class="hljs-keyword">trait</span> <span class="hljs-title class_">Config</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Value</span>: Display + <span class="hljs-built_in">Clone</span>;  <span class="hljs-comment">// å…³è”ç±»å‹ + çº¦æŸ</span>
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get</span>(&amp;<span class="hljs-keyword">self</span>, key: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-keyword">Self</span>::Value&gt;;
    
    <span class="hljs-comment">// é»˜è®¤å®ç°</span>
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get_or_default</span>(&amp;<span class="hljs-keyword">self</span>, key: &amp;<span class="hljs-type">str</span>, default: <span class="hljs-keyword">Self</span>::Value) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">Self</span>::Value {
        <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">get</span>(key).<span class="hljs-title function_ invoke__">unwrap_or</span>(default)
    }
}

<span class="hljs-comment">// 2. ä¸ºæ ‡å‡†åº“ç±»å‹å®ç°ï¼ˆä¼šè§¦å‘å­¤å„¿è§„åˆ™é—®é¢˜ï¼‰</span>
<span class="hljs-comment">// âŒ impl Config for HashMap&lt;String, String&gt; { ... }  // ä¸è¡Œï¼</span>

<span class="hljs-comment">// 3. ä½¿ç”¨ Newtype æ¨¡å¼ç»•è¿‡å­¤å„¿è§„åˆ™</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">AppConfig</span>(std::collections::HashMap&lt;<span class="hljs-type">String</span>, <span class="hljs-type">String</span>&gt;);

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">Config</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">AppConfig</span> {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Value</span> = <span class="hljs-type">String</span>;
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get</span>(&amp;<span class="hljs-keyword">self</span>, key: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt; {
        <span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>.<span class="hljs-title function_ invoke__">get</span>(key).<span class="hljs-title function_ invoke__">cloned</span>()
    }
}

<span class="hljs-comment">// 4. æ³›å‹ç‰ˆæœ¬ï¼šæ”¯æŒä¸åŒçš„å€¼ç±»å‹</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">TypedConfig</span>&lt;T&gt;(std::collections::HashMap&lt;<span class="hljs-type">String</span>, T&gt;);

<span class="hljs-keyword">impl</span>&lt;T: Display + <span class="hljs-built_in">Clone</span>&gt; Config <span class="hljs-keyword">for</span> <span class="hljs-title class_">TypedConfig</span>&lt;T&gt; {
    <span class="hljs-keyword">type</span> <span class="hljs-title class_">Value</span> = T;
    
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">get</span>(&amp;<span class="hljs-keyword">self</span>, key: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;T&gt; {
        <span class="hljs-keyword">self</span>.<span class="hljs-number">0</span>.<span class="hljs-title function_ invoke__">get</span>(key).<span class="hljs-title function_ invoke__">cloned</span>()
    }
}

<span class="hljs-comment">// 5. åŠ¨æ€é…ç½®ï¼šä½¿ç”¨ Trait å¯¹è±¡å­˜å‚¨ä¸åŒç±»å‹çš„é…ç½®</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">DynamicConfig</span> {
    configs: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> Config&lt;Value = <span class="hljs-type">String</span>&gt;&gt;&gt;,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">DynamicConfig</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">search</span>(&amp;<span class="hljs-keyword">self</span>, key: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Option</span>&lt;<span class="hljs-type">String</span>&gt; {
        <span class="hljs-keyword">for</span> <span class="hljs-variable">config</span> <span class="hljs-keyword">in</span> &amp;<span class="hljs-keyword">self</span>.configs {
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Some</span>(value) = config.<span class="hljs-title function_ invoke__">get</span>(key) {
                <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">Some</span>(value);
            }
        }
        <span class="hljs-literal">None</span>
    }
}

<span class="hljs-comment">// 6. æ‰©å±• Traitï¼šä¸ºé…ç½®ç³»ç»Ÿæ·»åŠ åºåˆ—åŒ–èƒ½åŠ›</span>
<span class="hljs-keyword">trait</span> <span class="hljs-title class_">SerializableConfig</span>: Config {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">to_json</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> {
        <span class="hljs-comment">// é»˜è®¤å®ç°</span>
        <span class="hljs-string">"{}"</span>.<span class="hljs-title function_ invoke__">to_string</span>()
    }
}

<span class="hljs-comment">// è‡ªåŠ¨ä¸ºæ‰€æœ‰å®ç° Config çš„ç±»å‹å®ç° SerializableConfig</span>
<span class="hljs-keyword">impl</span>&lt;T: Config&gt; SerializableConfig <span class="hljs-keyword">for</span> <span class="hljs-title class_">T</span> { }

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">map</span> = std::collections::HashMap::<span class="hljs-title function_ invoke__">new</span>();
    map.<span class="hljs-title function_ invoke__">insert</span>(<span class="hljs-string">"host"</span>.<span class="hljs-title function_ invoke__">to_string</span>(), <span class="hljs-string">"localhost"</span>.<span class="hljs-title function_ invoke__">to_string</span>());
    
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">config</span> = <span class="hljs-title function_ invoke__">AppConfig</span>(map);
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"Host: {}"</span>, config.<span class="hljs-title function_ invoke__">get_or_default</span>(<span class="hljs-string">"host"</span>, <span class="hljs-string">"0.0.0.0"</span>.<span class="hljs-title function_ invoke__">to_string</span>()));
    
    <span class="hljs-comment">// åˆ©ç”¨ Extension Trait</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"JSON: {}"</span>, config.<span class="hljs-title function_ invoke__">to_json</span>());
}
</code></pre>
<hr/>
<h2 data-id="heading-53">ä¸ƒã€æ€»ç»“ä¸è¿›é˜¶è·¯çº¿</h2>
<h3 data-id="heading-54">æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>









































<table><thead><tr><th>æ¦‚å¿µ</th><th>æ ¸å¿ƒé—®é¢˜</th><th>è§£å†³æ–¹æ¡ˆ</th><th>æ€§èƒ½å½±å“</th></tr></thead><tbody><tr><td>Trait å¯¹è±¡</td><td>å¼‚æ„é›†åˆ</td><td>åŠ¨æ€åˆ†å‘</td><td>æœ‰é¢å¤–å¼€é”€</td></tr><tr><td>æ³›å‹çº¦æŸ</td><td>ç±»å‹èƒ½åŠ›ä¿è¯</td><td>Trait Bound</td><td>æ— ï¼ˆå•æ€åŒ–ï¼‰</td></tr><tr><td>å…³è”ç±»å‹</td><td>ç®€åŒ–ç±»å‹å‚æ•°</td><td>è¾“å‡ºç±»å‹</td><td>æ— </td></tr><tr><td>é»˜è®¤å®ç°</td><td>å‡å°‘é‡å¤ä»£ç </td><td>Trait æ–¹æ³•é»˜è®¤å®ç°</td><td>æ— </td></tr><tr><td>å­¤å„¿è§„åˆ™</td><td>é¿å…å†²çª</td><td>Newtype/Extension</td><td>æ— ï¼ˆé›¶æˆæœ¬ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-55">å­¦ä¹ è·¯å¾„å»ºè®®</h3>
<ol>
<li>
<p><strong>åˆå­¦è€…</strong>ï¼š</p>
<ul>
<li>ç†Ÿç»ƒä½¿ç”¨æ³›å‹çº¦æŸå’Œé»˜è®¤å®ç°</li>
<li>ç†è§£å…³è”ç±»å‹å’Œæ³›å‹å‚æ•°çš„åŒºåˆ«</li>
<li>é‡åˆ°å­¤å„¿è§„åˆ™é”™è¯¯æ—¶ä¼šç”¨ newtype</li>
</ul>
</li>
<li>
<p><strong>è¿›é˜¶</strong>ï¼š</p>
<ul>
<li>æŒæ¡ Trait å¯¹è±¡çš„ä½¿ç”¨åœºæ™¯å’Œé™åˆ¶</li>
<li>ç†è§£åŠ¨æ€åˆ†å‘å’Œé™æ€åˆ†å‘çš„æ€§èƒ½å·®å¼‚</li>
<li>çµæ´»è¿ç”¨ Extension Trait æ¨¡å¼</li>
</ul>
</li>
<li>
<p><strong>é«˜çº§</strong>ï¼š</p>
<ul>
<li>æ·±å…¥ç†è§£å­¤å„¿è§„åˆ™çš„ç²¾ç¡®å®šä¹‰</li>
<li>æ¢ç´¢ GATï¼ˆGeneric Associated Typesï¼‰</li>
<li>ç ”ç©¶ Specialization å’Œæœªæ¥çš„ç±»å‹ç³»ç»Ÿæ”¹è¿›</li>
</ul>
</li>
</ol>
<h3 data-id="heading-56">æ¨èèµ„æº</h3>
<ul>
<li><strong>å®˜æ–¹æ–‡æ¡£</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fbook%2F" title="https://doc.rust-lang.org/book/" target="_blank" ref="nofollow noopener noreferrer">The Rust Book - Chapter 10 &amp; 19</a></li>
<li><strong>æ·±å…¥æ–‡ç« </strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsmallcultfollowing.com%2Fbabysteps%2F" title="https://smallcultfollowing.com/babysteps/" target="_blank" ref="nofollow noopener noreferrer">Little Orphan Impls</a></li>
<li><strong>RFC æ–‡æ¡£</strong>ï¼šRFC 1023ã€RFC 2451ã€RFC 1598</li>
<li><strong>å®æˆ˜é¡¹ç›®</strong>ï¼šé˜…è¯» <code>serde</code>ã€<code>tokio</code> ç­‰åº“çš„ Trait è®¾è®¡</li>
</ul>
<hr/>
<h2 data-id="heading-57">å°¾å£°</h2>
<p>æŒæ¡è¿™äº›è¿›é˜¶æŠ€å·§åï¼Œä½ å·²ç»ä»"ä¼šç”¨ Trait"å‡çº§ä¸º"èƒ½è®¾è®¡ Trait ç³»ç»Ÿ"ã€‚Rust çš„ Trait ç³»ç»Ÿè™½ç„¶å¤æ‚ï¼Œä½†æ¯ä¸ªè§„åˆ™éƒ½æœ‰å…¶æ·±æ€ç†Ÿè™‘çš„ç†ç”±ã€‚ç†è§£è¿™äº›é™åˆ¶ï¼Œä½ å°±èƒ½å†™å‡ºæ—¢å®‰å…¨åˆä¼˜é›…çš„ä»£ç ã€‚</p>
<p>è®°ä½ï¼š<strong>ç¼–è¯‘å™¨ä¸æ˜¯ä½ çš„æ•Œäººï¼Œå®ƒæ˜¯ä¸ªæœ‰ç‚¹å•°å—¦ä½†ç»å¯¹é è°±çš„æœ‹å‹</strong>ã€‚ä¸‹æ¬¡å†é‡åˆ°å­¤å„¿è§„åˆ™æŠ¥é”™ï¼Œä½ ä¼šæ„Ÿè°¢å®ƒåœ¨ç¼–è¯‘æœŸå°±å¸®ä½ é¿å…äº†è¿è¡Œæ—¶çš„ç¾éš¾ï¼</p>
<p>Happy Coding! ğŸ¦€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£Pythonæ§åˆ¶æµï¼šfor/whileå¾ªç¯çš„åº•å±‚é€»è¾‘ä¸æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7593240931286335540</link>    <guid>https://juejin.cn/post/7593240931286335540</guid>    <pubDate>2026-01-09T15:33:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593240931286335540" data-draft-id="7593187953272127488" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£Pythonæ§åˆ¶æµï¼šfor/whileå¾ªç¯çš„åº•å±‚é€»è¾‘ä¸æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2026-01-09T15:33:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="love_summer"/> <meta itemprop="url" content="https://juejin.cn/user/1462819851084228"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£Pythonæ§åˆ¶æµï¼šfor/whileå¾ªç¯çš„åº•å±‚é€»è¾‘ä¸æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1462819851084228/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    love_summer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T15:33:54.000Z" title="Fri Jan 09 2026 15:33:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>ã€å¼•è¨€ã€‘</strong><br/>
åœ¨Pythonä»£ç ä¸­ï¼Œå¾ªç¯å¯èƒ½æ˜¯æœ€å¸¸ç”¨ä½†ä¹Ÿæœ€å®¹æ˜“å‡ºé”™çš„é€»è¾‘ã€‚è™½ç„¶æˆ‘ä»¬æ¯å¤©éƒ½åœ¨å†™<code>for i in range(n)</code>ï¼Œä½†ä½ çœŸçš„ç†è§£Pythonä¸­<code>while</code>å¾ªç¯çš„4ä¸ªå…³é”®æ­¥éª¤å—ï¼Ÿä¸ºä»€ä¹ˆ<code>for...else</code>è¿™ç§çœ‹ä¼¼â€œåç›´è§‰â€çš„è¯­æ³•ä¼šåœ¨Pythonä¸­å­˜åœ¨ï¼Ÿæœ¬æ–‡å°†ç»“åˆå®æˆ˜æ¡ˆä¾‹ï¼Œæ·±å…¥æ¢è®¨Pythonçš„å¾ªç¯ç»“æ„ï¼Œå¸¦ä½ å†™å‡ºæ›´Pythonicã€æ›´å¥å£®çš„ä»£ç ã€‚</p>
</blockquote>
<h4 data-id="heading-0">ä¸€ã€For å¾ªç¯ï¼šPythonic çš„é¦–é€‰</h4>
<p>åœ¨Pythonä¸­ï¼Œ<code>for</code>å¾ªç¯è¢«ç§°ä¸ºâ€œéå†å¾ªç¯â€ã€‚ä¸C/Javaä¸­ç»å…¸çš„<code>for(int i=0; i&lt;n; i++)</code>ä¸åŒï¼ŒPythonçš„<code>for</code>æ›´åŠ æŠ½è±¡ï¼Œå®ƒä¸ä¾èµ–ç´¢å¼•ï¼Œè€Œæ˜¯ä¾èµ–è¿­ä»£å™¨åè®®ã€‚</p>
<p><strong>1. ä»<code>range()</code>çœ‹å†…å­˜ä¼˜åŒ–</strong></p>
<p><code>range()</code>åœ¨Python 3ä¸­è¿”å›çš„æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œè€Œä¸æ˜¯åˆ—è¡¨ã€‚è¿™æ„å‘³ç€<code>range(1000000)</code>ä¸ä¼šåœ¨å†…å­˜ä¸­ç”Ÿæˆä¸€ä¸ªåŒ…å«100ä¸‡ä¸ªæ•°å­—çš„åˆ—è¡¨ï¼Œå®ƒåªåœ¨å¾ªç¯æ—¶æŒ‰éœ€ç”Ÿæˆæ•°å­—ï¼Œæå¤§åœ°èŠ‚çœäº†å†…å­˜ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ˜é‡‘é£æ ¼ä»£ç ç¤ºä¾‹</span>
<span class="hljs-comment"># è®¡ç®—æ°´ä»™èŠ±æ•° - ä½¿ç”¨ç”Ÿæˆå™¨æ€ç»´</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">find_narcissistic_numbers</span>():
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">100</span>, <span class="hljs-number">1000</span>):
        <span class="hljs-comment"># ä½è¿ç®—æ¯”å–æ¨¡æ›´å¿«ï¼Œä½†å–æ¨¡å¯è¯»æ€§æ›´å¥½</span>
        digits = [<span class="hljs-built_in">int</span>(d) <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>(i)]
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">sum</span>(d ** <span class="hljs-number">3</span> <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> digits) == i:
            <span class="hljs-keyword">yield</span> i  <span class="hljs-comment"># ä½¿ç”¨ç”Ÿæˆå™¨ï¼ŒæŒ‰éœ€äº§ç”Ÿç»“æœ</span>
<span class="hljs-comment"># æ‰“å°ç»“æœ</span>
<span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> find_narcissistic_numbers():
    <span class="hljs-built_in">print</span>(num)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62184b8bb3ca48e5a3796de816fd1ca0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbG92ZV9zdW1tZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768577633&amp;x-signature=12%2BEcCRPQu0XTOtc4y%2ForrjjNqg%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-1">äºŒã€While å¾ªç¯ï¼šçŠ¶æ€æœºçš„æ¨¡æ‹Ÿ</h4>
<p><code>while</code>å¾ªç¯åœ¨Pythonä¸­é€šå¸¸ç”¨äºæ¨¡æ‹Ÿâ€œçŠ¶æ€æœºâ€æˆ–å¤„ç†æœªçŸ¥å¾ªç¯æ¬¡æ•°çš„é€»è¾‘ã€‚å®ƒçš„æ ¸å¿ƒåœ¨äºå››ä¸ªæ­¥éª¤ï¼Œå¾ˆå¤šåˆå­¦è€…çš„æ­»å¾ªç¯å¾€å¾€æ˜¯å› ä¸ºæ¼æ‰äº†â€œæ”¹å˜å˜é‡â€è¿™ä¸€æ­¥ã€‚</p>
<p><strong>1. é¿å…â€œé­”æœ¯æ•°å­—â€å’Œâ€œæ­»å¾ªç¯â€</strong></p>
<p>åœ¨ç¼–å†™<code>while</code>å¾ªç¯æ—¶ï¼Œæœ€å¿Œè®³çš„æ˜¯æ²¡æœ‰æ˜ç¡®çš„é€€å‡ºæ¡ä»¶ã€‚å‚è€ƒä¹¦ä¸­**ã€ç¤ºä¾‹4-13ã€‘**çš„ç™»å½•é€»è¾‘ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä½¿ç”¨è®¡æ•°å™¨<code>i</code>æ¥é™åˆ¶å°è¯•æ¬¡æ•°çš„é‡è¦æ€§ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># é‡æ„ã€ç¤ºä¾‹4-13ã€‘ï¼Œæé«˜å¯è¯»æ€§</span>
MAX_ATTEMPTS = <span class="hljs-number">3</span>
attempts = <span class="hljs-number">0</span>
<span class="hljs-keyword">while</span> attempts &lt; MAX_ATTEMPTS:
    username = <span class="hljs-built_in">input</span>(<span class="hljs-string">"Username: "</span>)
    password = <span class="hljs-built_in">input</span>(<span class="hljs-string">"Password: "</span>)
    
    <span class="hljs-keyword">if</span> username == <span class="hljs-string">'ysj'</span> <span class="hljs-keyword">and</span> password == <span class="hljs-string">'888888'</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"Login Success"</span>)
        <span class="hljs-keyword">break</span>  <span class="hljs-comment"># æˆåŠŸå³é€€å‡º</span>
        
    attempts += <span class="hljs-number">1</span>
    remaining = MAX_ATTEMPTS - attempts
    <span class="hljs-keyword">if</span> remaining &gt; <span class="hljs-number">0</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Error. <span class="hljs-subst">{remaining}</span> attempts left."</span>)
<span class="hljs-keyword">else</span>:
    <span class="hljs-comment"># elseåˆ†æ”¯åªåœ¨å¾ªç¯æ­£å¸¸ç»“æŸï¼ˆå³breakæœªè§¦å‘ï¼‰æ—¶æ‰§è¡Œ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Account locked."</span>)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c813d0d3ead42a4a1f3a98d9af0389d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbG92ZV9zdW1tZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768577633&amp;x-signature=Rq%2BS7jXUoYtxywP4y9Rn9ILu16w%3D" alt="image.png" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79a11c2c60724b888d8358e084a647f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbG92ZV9zdW1tZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768577633&amp;x-signature=%2FKJkF6VnLTCpFgqEJ6WMe2mzXis%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p><strong>Tip</strong>: ä½¿ç”¨<code>while...else</code>ç»“æ„å¯ä»¥ä¼˜é›…åœ°å¤„ç†â€œå¾ªç¯è€—å°½ä»æœªæˆåŠŸâ€çš„é€»è¾‘ï¼Œé¿å…åœ¨å¾ªç¯å¤–å†å†™ä¸€æ¬¡<code>if attempts == MAX_ATTEMPTS</code>çš„åˆ¤æ–­ã€‚</p>
</blockquote>
<h4 data-id="heading-2">ä¸‰ã€åµŒå¥—å¾ªç¯ï¼šæ—¶é—´å¤æ‚åº¦çš„é™·é˜±</h4>
<p>åµŒå¥—å¾ªç¯æ˜¯ç®—æ³•å¤æ‚åº¦çš„é‡ç¾åŒºã€‚ä¹¦ä¸­**ã€ç¤ºä¾‹4-15/16ã€‘**çš„å›¾å½¢æ‰“å°æ˜¯ç†è§£åµŒå¥—é€»è¾‘çš„ç»ä½³æ¡ˆä¾‹ï¼Œä½†è¦æ³¨æ„å…¶æ—¶é—´å¤æ‚åº¦ã€‚</p>
<ul>
<li>åŒé‡å¾ªç¯æ‰“å°çŸ©å½¢ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo>Ã—</mo><mi>M</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N \times M)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">Ã—</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.10903em;">M</span><span class="mclose">)</span></span></span></span></span></li>
<li>æ‰“å°è±å½¢ï¼ˆåŒå±‚å¾ªç¯ï¼‰ï¼š<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>
åœ¨å®é™…å¼€å‘ä¸­ï¼Œå°½é‡é¿å…è¶…è¿‡3å±‚çš„åµŒå¥—å¾ªç¯ï¼Œå¦åˆ™ä»£ç çš„å¯è¯»æ€§å’Œæ€§èƒ½éƒ½ä¼šæ€¥å‰§ä¸‹é™ã€‚å¦‚æœé‡åˆ°å¤æ‚å›¾å½¢ï¼ˆå¦‚ç©ºå¿ƒè±å½¢ï¼‰ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å­—ç¬¦ä¸²çš„<code>center()</code>æ–¹æ³•æ¥ç®€åŒ–é€»è¾‘ï¼Œæˆ–è€…å°†å›¾å½¢æ‹†åˆ†ä¸ºä¸Šä¸‹ä¸¤ä¸ªä¸‰è§’å½¢åˆ†åˆ«å¤„ç†ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç®€åŒ–ç‰ˆï¼šåˆ©ç”¨å­—ç¬¦ä¸²æ“ä½œæ‰“å°ç­‰è…°ä¸‰è§’å½¢ï¼ˆæ¯”åŒé‡å¾ªç¯æ›´Pythonicï¼‰</span>
row = <span class="hljs-number">5</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, row*<span class="hljs-number">2</span>, <span class="hljs-number">2</span>):
    <span class="hljs-built_in">print</span>((<span class="hljs-string">'*'</span> * i).center(row*<span class="hljs-number">2</span>-<span class="hljs-number">1</span>))
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df788cba1631438daee1260b483545b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbG92ZV9zdW1tZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768577633&amp;x-signature=t2rUeWLlekYxJn7WsIc9SuZ7t5M%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-3">å››ã€æœ€ä½³å®è·µæ€»ç»“</h4>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨<code>for</code></strong>ï¼šé™¤éå¿…é¡»ä½¿ç”¨æ¡ä»¶åˆ¤æ–­ï¼Œå¦åˆ™ä¼˜å…ˆä½¿ç”¨<code>for</code>å¾ªç¯ï¼Œå› ä¸ºå®ƒæ›´ä¸æ˜“å‡ºé”™ã€‚</li>
<li><strong>å–„ç”¨<code>else</code></strong>ï¼šä¸è¦å¿½ç•¥<code>for...else</code>å’Œ<code>while...else</code>ï¼Œå®ƒä»¬å¯ä»¥å¸®ä½ çœå»ä¸å¿…è¦çš„<code>flag</code>å˜é‡ã€‚</li>
<li><strong>è­¦æƒ•åµŒå¥—</strong>ï¼šåµŒå¥—å¾ªç¯è¶Šæ·±ï¼Œä»£ç è¶Šéš¾ç»´æŠ¤ã€‚æ€è€ƒæ˜¯å¦å¯ä»¥é€šè¿‡åˆ—è¡¨æ¨å¯¼å¼ã€<code>itertools</code>åº“æˆ–è€…é‡æ„å‡½æ•°æ¥å‡å°‘åµŒå¥—ã€‚
å¸Œæœ›è¿™äº›åˆ†æèƒ½è®©ä½ å¯¹Pythonçš„å¾ªç¯ç»“æ„æœ‰æ›´æ·±çš„ç†è§£ï¼</li>
</ol>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯é¢è¯•åŠ åˆ†æŠ€å·§ï¼šæ–‡æœ¬çœç•¥ + Tooltip ä¼˜é›…å®ç°ï¼Œé™„å¯ç›´æ¥å¤ç”¨ä»£ç ï¼ˆæ±‚èŒå…šå¿…çœ‹ï¼‰]]></title>    <link>https://juejin.cn/post/7593139476840726534</link>    <guid>https://juejin.cn/post/7593139476840726534</guid>    <pubDate>2026-01-09T10:45:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593139476840726534" data-draft-id="7593165280488357929" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯é¢è¯•åŠ åˆ†æŠ€å·§ï¼šæ–‡æœ¬çœç•¥ + Tooltip ä¼˜é›…å®ç°ï¼Œé™„å¯ç›´æ¥å¤ç”¨ä»£ç ï¼ˆæ±‚èŒå…šå¿…çœ‹ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-09T10:45:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æµ·äº‘å‰ç«¯1"/> <meta itemprop="url" content="https://juejin.cn/user/963618991244365"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯é¢è¯•åŠ åˆ†æŠ€å·§ï¼šæ–‡æœ¬çœç•¥ + Tooltip ä¼˜é›…å®ç°ï¼Œé™„å¯ç›´æ¥å¤ç”¨ä»£ç ï¼ˆæ±‚èŒå…šå¿…çœ‹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/963618991244365/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æµ·äº‘å‰ç«¯1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T10:45:21.000Z" title="Fri Jan 09 2026 10:45:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œ<strong>æ–‡æœ¬æº¢å‡ºå¤„ç†æ˜¯é«˜é¢‘ä¸šåŠ¡åœºæ™¯</strong> â€”â€” æ¥å£è¿”å›çš„å†…å®¹å¯èƒ½é•¿çŸ­ä¸ä¸€ï¼Œå›ºå®šå®½åº¦ä¸‹è¿‡é•¿æ–‡æœ¬ä¼šç ´åé¡µé¢å¸ƒå±€ï¼Œè¿™æ—¶å€™<code>text-overflow: ellipsis</code>çœç•¥å·æ ·å¼å°±æˆäº†å¿…å¤‡æ–¹æ¡ˆã€‚ä½†äº§å“å¾€å¾€ä¼šè¡¥å……éœ€æ±‚ï¼šç”¨æˆ·æ‚¬åœæ—¶èƒ½çœ‹åˆ°å®Œæ•´æ–‡æœ¬ï¼Œä¸”æœªçœç•¥æ—¶ä¸æ˜¾ç¤ºå†—ä½™æç¤ºã€‚</p>
<p>è¿™ä¸ªçœ‹ä¼¼ç®€å•çš„äº¤äº’ï¼Œå®åˆ™æ˜¯é¢è¯•ä¸­å¸¸è¢«è€ƒå¯Ÿçš„ â€œç»†èŠ‚å®ç°èƒ½åŠ›â€ï¼Œä¹Ÿæ˜¯ç®€å†ä¸Šèƒ½ä½“ç°å·¥ç¨‹åŒ–æ€ç»´çš„åŠ åˆ†é¡¹ã€‚</p>
<p>ä»Šå¤©å°±åˆ†äº«ä¸€å¥—å¯ç›´æ¥å¤ç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œä¸ä»…èƒ½å®Œç¾è§£å†³  <strong>çœç•¥æ—¶æ˜¾ç¤º Tooltip çš„æ ¸å¿ƒéœ€æ±‚</strong>ï¼Œè¿˜èƒ½é€‚é…å•è¡Œ / å¤šè¡Œåœºæ™¯ï¼Œä»£ç ç®€æ´æ˜“æ‡‚ï¼Œ<strong>é¢è¯•æ—¶èŠèµ·è¿™ç±»å®æ“åœºæ™¯ï¼Œç»å¯¹èƒ½è®©é¢è¯•å®˜çœ¼å‰ä¸€äº®</strong></p>
<h2 data-id="heading-0">æ ¸å¿ƒç—›ç‚¹ä¸é¢è¯•è€ƒç‚¹</h2>
<p>ä¸ºä»€ä¹ˆè¿™ä¸ªå°åŠŸèƒ½èƒ½æˆä¸ºé¢è¯•åŠ åˆ†é¡¹ï¼Ÿå› ä¸ºå®ƒèƒŒåè€ƒå¯Ÿçš„æ˜¯å‰ç«¯å·¥ç¨‹å¸ˆçš„  <strong>åœºæ™¯åŒ–è§£å†³èƒ½åŠ›</strong>ï¼š</p>
<ul>
<li>å¦‚ä½•ç²¾å‡†åˆ¤æ–­æ–‡æœ¬æ˜¯å¦è¢«çœç•¥ï¼ˆ scrollWidth/scrollHeight ä¸ clientWidth/clientHeight çš„å¯¹æ¯”é€»è¾‘ï¼‰ï¼›</li>
<li>å¦‚ä½•é¿å…æ— ç”¨æ¸²æŸ“ï¼ˆæœªçœç•¥æ—¶ä¸æ¸²æŸ“ Tooltip ç»„ä»¶ï¼‰ï¼›</li>
<li>å¦‚ä½•é€‚é…å“åº”å¼åœºæ™¯ï¼ˆçª—å£ç¼©æ”¾æ—¶é‡æ–°æ£€æµ‹ï¼‰ï¼›</li>
<li>å¦‚ä½•å°è£…å¯å¤ç”¨é€»è¾‘ï¼ˆè‡ªå®šä¹‰ Hook + ç»„ä»¶å°è£…æ€ç»´ï¼‰ã€‚</li>
</ul>
<p>è¿™äº›è€ƒç‚¹åœ¨ä¸­çº§å‰ç«¯é¢è¯•ä¸­é¢‘ç¹å‡ºç°ï¼Œè€Œèƒ½æ‹¿å‡ºå®Œæ•´å¯è¿è¡Œçš„ä»£ç ï¼Œå†è®²æ¸…å®ç°æ€è·¯ï¼Œæ¯”å•çº¯è¯´ æˆ‘ä¼šå¤„ç†æ–‡æœ¬æº¢å‡º æ›´æœ‰è¯´æœåŠ›ã€‚</p>
<h2 data-id="heading-1">å®Œæ•´å®ç°æ–¹æ¡ˆ</h2>
<h3 data-id="heading-2">ç¬¬ä¸€æ­¥ï¼šå°è£…æ ¸å¿ƒæ£€æµ‹ Hookï¼ˆuseEllipsis.tsï¼‰</h3>
<p>é¦–å…ˆå®ç°ä¸€ä¸ªè‡ªå®šä¹‰ Hookï¼Œä¸“é—¨è´Ÿè´£æ£€æµ‹æ–‡æœ¬æ˜¯å¦è¢«çœç•¥ï¼Œé€‚é…å•è¡Œ / å¤šè¡Œé…ç½®ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { useEffect, useRef, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// é…ç½®é¡¹ç±»å‹å®šä¹‰ï¼Œæ”¯æŒè‡ªå®šä¹‰è¡Œæ•°</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">EllipsisOptions</span> = {
  lines?: <span class="hljs-built_in">number</span>;
};

<span class="hljs-comment">// æ³›å‹çº¦æŸç¡®ä¿refåªç»‘å®šHTMLElementå…ƒç´ </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> useEllipsis&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HTMLElement</span>&gt;({
  lines = <span class="hljs-number">1</span>,
}: <span class="hljs-title class_">EllipsisOptions</span> = {}) {
  <span class="hljs-keyword">const</span> targetRef = useRef&lt;T&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [hasEllipsis, setHasEllipsis] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-comment">// æ ¸å¿ƒæ£€æµ‹é€»è¾‘</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">checkEllipsis</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> element = targetRef.<span class="hljs-property">current</span>;
    <span class="hljs-keyword">if</span> (!element) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// å•è¡Œæ£€æµ‹ï¼šæ»šåŠ¨å®½åº¦ &gt; å¯è§†å®½åº¦</span>
    <span class="hljs-comment">// å¤šè¡Œæ£€æµ‹ï¼šæ»šåŠ¨é«˜åº¦ &gt; å¯è§†é«˜åº¦</span>
    <span class="hljs-keyword">if</span> (lines === <span class="hljs-number">1</span>) {
      <span class="hljs-title function_">setHasEllipsis</span>(element.<span class="hljs-property">scrollWidth</span> &gt; element.<span class="hljs-property">clientWidth</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">setHasEllipsis</span>(element.<span class="hljs-property">scrollHeight</span> &gt; element.<span class="hljs-property">clientHeight</span>);
    }
  };

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">checkEllipsis</span>();
    <span class="hljs-comment">// ç›‘å¬çª—å£ç¼©æ”¾ï¼Œé‡æ–°æ£€æµ‹</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, checkEllipsis);
    <span class="hljs-comment">// ç»„ä»¶å¸è½½æ—¶æ¸…é™¤ç›‘å¬ï¼Œé¿å…å†…å­˜æ³„æ¼</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'resize'</span>, checkEllipsis);
  }, [lines]);

  <span class="hljs-keyword">return</span> { targetRef, hasEllipsis };
}
</code></pre>
<h3 data-id="heading-3">ç¬¬äºŒæ­¥ï¼šå°è£…ä¸šåŠ¡ç»„ä»¶ï¼ˆEllipsisTooltip.tsxï¼‰</h3>
<p>ç»“åˆ UI åº“çš„ Tooltip ç»„ä»¶ï¼ˆè¿™é‡Œä»¥ Arco Design ä¸ºä¾‹ï¼ŒAntD ç­‰å…¶ä»–åº“å¯ç›´æ¥æ›¿æ¢ï¼‰ï¼Œå°è£…æˆé€šç”¨ä¸šåŠ¡ç»„ä»¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Tooltip</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@arco-design/web-react'</span>;
<span class="hljs-keyword">import</span> { useEllipsis } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/useEllipsis'</span>;
<span class="hljs-keyword">import</span> { cn } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/lib/utils'</span>; <span class="hljs-comment">// å‡è®¾å·²æœ‰æ ·å¼åˆå¹¶å·¥å…·å‡½æ•°</span>

<span class="hljs-comment">// ç»„ä»¶Propsç±»å‹å®šä¹‰ï¼Œæ˜ç¡®å…¥å‚è§„èŒƒ</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">EllipsisTooltipProps</span> = {
  <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// è¦å±•ç¤ºçš„æ–‡æœ¬</span>
  className?: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// è‡ªå®šä¹‰æ ·å¼</span>
  onClick?: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>; <span class="hljs-comment">// ç‚¹å‡»äº‹ä»¶</span>
  lines?: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// æœ€å¤§æ˜¾ç¤ºè¡Œæ•°ï¼Œé»˜è®¤1è¡Œ</span>
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">EllipsisTooltip</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">EllipsisTooltipProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{
  text,
  className,
  onClick,
  lines = <span class="hljs-number">1</span>,
}</span>) =&gt;</span> {
  <span class="hljs-comment">// å¤ç”¨Hookè·å–æ£€æµ‹ç»“æœ</span>
  <span class="hljs-keyword">const</span> { targetRef, hasEllipsis } = useEllipsis&lt;<span class="hljs-title class_">HTMLDivElement</span>&gt;({ lines });

  <span class="hljs-comment">// åŠ¨æ€ç”Ÿæˆè¡Œæ•°æ ·å¼ï¼ˆé€‚é…Tailwindï¼‰</span>
  <span class="hljs-keyword">const</span> lineStyle = lines === <span class="hljs-number">1</span> 
    ? <span class="hljs-string">'truncate whitespace-nowrap'</span> 
    : <span class="hljs-string">`line-clamp-<span class="hljs-subst">${lines}</span>`</span>;

  <span class="hljs-comment">// æ ¸å¿ƒå†…å®¹èŠ‚ç‚¹</span>
  <span class="hljs-keyword">const</span> contentNode = (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">{targetRef}</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">{cn(lineStyle,</span> <span class="hljs-attr">className</span>)}
      <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span>
    &gt;</span>
      {text}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );

  <span class="hljs-comment">// å…³é”®ä¼˜åŒ–ï¼šåªæœ‰æ–‡æœ¬è¢«çœç•¥æ—¶æ‰æ¸²æŸ“Tooltip</span>
  <span class="hljs-keyword">return</span> hasEllipsis ? <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Tooltip</span> <span class="hljs-attr">content</span>=<span class="hljs-string">{text}</span>&gt;</span>{contentNode}<span class="hljs-tag">&lt;/<span class="hljs-name">Tooltip</span>&gt;</span></span> : contentNode;
};
</code></pre>
<h3 data-id="heading-4">ç¬¬ä¸‰æ­¥ï¼šå®é™…ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">DemoPage</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// æ¨¡æ‹Ÿé•¿æ–‡æœ¬å’ŒçŸ­æ–‡æœ¬åœºæ™¯</span>
  <span class="hljs-keyword">const</span> longText = <span class="hljs-string">'è¿™æ˜¯ä¸€æ®µéå¸¸é•¿çš„æ–‡æœ¬å†…å®¹ï¼Œå®é™…å¼€å‘ä¸­å¯èƒ½æ¥è‡ªæ¥å£è¿”å›ï¼Œé•¿åº¦ä¸ç¡®å®šéœ€è¦è‡ªé€‚åº”å¤„ç†'</span>;
  <span class="hljs-keyword">const</span> shortText = <span class="hljs-string">'ç®€çŸ­æ–‡æœ¬ï¼ˆä¸æ˜¾ç¤ºTooltipï¼‰'</span>;

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"p-4"</span>&gt;</span>
      {/* å•è¡Œçœç•¥ï¼šå®½åº¦28remï¼Œè¶…å‡ºæ˜¾ç¤ºTooltip */}
      <span class="hljs-tag">&lt;<span class="hljs-name">EllipsisTooltip</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"w-28 mb-4 inline-block"</span> <span class="hljs-attr">text</span>=<span class="hljs-string">{longText}</span> /&gt;</span>
      {/* å¤šè¡Œçœç•¥ï¼šæœ€å¤š2è¡Œï¼Œè¶…å‡ºæ˜¾ç¤ºTooltip */}
      <span class="hljs-tag">&lt;<span class="hljs-name">EllipsisTooltip</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"w-40 mb-4 inline-block"</span> <span class="hljs-attr">text</span>=<span class="hljs-string">{longText}</span> <span class="hljs-attr">lines</span>=<span class="hljs-string">{2}</span> /&gt;</span>
      {/* æœªçœç•¥ï¼šä¸æ¸²æŸ“Tooltip */}
      <span class="hljs-tag">&lt;<span class="hljs-name">EllipsisTooltip</span> <span class="hljs-attr">text</span>=<span class="hljs-string">{shortText}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h2 data-id="heading-5">é¢è¯•é«˜é¢‘è¿½é—®ä¸åº”ç­”æ€è·¯</h2>
<p>æŒæ¡è¿™ä¸ªå®ç°åï¼Œé‡åˆ°ç›¸å…³é¢è¯•é¢˜å†ä¹Ÿä¸ç”¨æ…Œï¼Œè¿™äº›è¿½é—®å¯ä»¥è¿™æ ·ç­”ï¼š</p>
<ol>
<li>é—®ï¼šå¦‚ä½•åˆ¤æ–­æ–‡æœ¬æ˜¯å¦è¢«çœç•¥ï¼Ÿ<strong>ç­”ï¼šå•è¡Œé€šè¿‡å¯¹æ¯”å…ƒç´ çš„<code>scrollWidth</code>ï¼ˆå†…å®¹å®é™…å®½åº¦ï¼‰å’Œ<code>clientWidth</code>ï¼ˆå…ƒç´ å¯è§†å®½åº¦ï¼‰ï¼Œå¤šè¡Œåˆ™å¯¹æ¯”<code>scrollHeight</code>å’Œ<code>clientHeight</code>ï¼Œå½“å®é™…å°ºå¯¸å¤§äºå¯è§†å°ºå¯¸æ—¶ï¼Œè¯´æ˜æ–‡æœ¬è¢«çœç•¥ã€‚</strong></li>
<li>é—®ï¼šä¸ºä»€ä¹ˆè¦ç›‘å¬ window.resize äº‹ä»¶ï¼Ÿ<strong>ç­”ï¼šå“åº”å¼åœºæ™¯ä¸‹ï¼Œçª—å£ç¼©æ”¾ä¼šå¯¼è‡´å…ƒç´ å¯è§†å°ºå¯¸å˜åŒ–ï¼ŒåŸæœ¬æœªçœç•¥çš„æ–‡æœ¬å¯èƒ½è¢«æˆªæ–­ï¼ŒåŸæœ¬çœç•¥çš„æ–‡æœ¬å¯èƒ½å®Œå…¨æ˜¾ç¤ºï¼Œå› æ­¤éœ€è¦é‡æ–°æ£€æµ‹æ›´æ–°çŠ¶æ€ã€‚</strong></li>
<li>ï¼šç»„ä»¶ä¼˜åŒ–ç‚¹æœ‰å“ªäº›ï¼Ÿ<strong>ç­”ï¼šâ‘  æ‡’æ¸²æŸ“ï¼šæœªçœç•¥æ—¶ä¸æ¸²æŸ“ Tooltip ç»„ä»¶ï¼Œå‡å°‘ DOM èŠ‚ç‚¹ï¼›â‘¡ æ¸…é™¤ç›‘å¬ï¼šç»„ä»¶å¸è½½æ—¶ç§»é™¤ resize äº‹ä»¶ï¼Œé¿å…å†…å­˜æ³„æ¼ï¼›â‘¢ ç±»å‹çº¦æŸï¼šç”¨ TypeScript æ˜ç¡® Props å’Œ Hook è¿”å›å€¼ç±»å‹ï¼Œæå‡ä»£ç å¥å£®æ€§ã€‚</strong></li>
</ol>
<p>è¿™äº›åº”ç­”æ€è·¯ï¼Œæ­£æ˜¯é¢è¯•å®˜æƒ³çœ‹åˆ°çš„ å·¥ç¨‹åŒ–æ€ç»´,  ä¸ä»…èƒ½å®ç°åŠŸèƒ½ï¼Œè¿˜èƒ½è€ƒè™‘è¾¹ç•Œæƒ…å†µå’Œæ€§èƒ½ä¼˜åŒ–ã€‚</p>
<h2 data-id="heading-6">æ±‚èŒå…šæ³¨æ„ï¼šè¿™ä¸ªæŠ€èƒ½å¦‚ä½•è½¬åŒ–ä¸º offerï¼Ÿ</h2>
<p>å‰ç«¯æ±‚èŒä¸­ï¼Œâ€œèƒ½è½åœ°çš„å®æ“æŠ€èƒ½â€ æ¯”ç©ºæ³›çš„ â€œç†Ÿæ‚‰ React/Vueâ€ æ›´æœ‰ç«äº‰åŠ›ã€‚è¿™ä¸ªæ–‡æœ¬çœç•¥ + Tooltip çš„å®ç°ï¼Œä½ å¯ä»¥è¿™æ ·ç”¨åœ¨æ±‚èŒä¸­ï¼š</p>
<ul>
<li><strong>ç®€å†äº®ç‚¹</strong>ï¼šåœ¨ â€œé¡¹ç›®ç»éªŒâ€ ä¸­è¡¥å…… â€œå°è£…é€šç”¨æ–‡æœ¬å¤„ç†ç»„ä»¶ï¼Œé€‚é…å•è¡Œ / å¤šè¡Œåœºæ™¯ï¼Œå‡å°‘å†—ä½™ä»£ç  30%â€ï¼›</li>
<li><strong>é¢è¯•å®æ“</strong>ï¼šå½“é¢è¯•å®˜é—® â€œå¦‚ä½•å¤„ç†æ–‡æœ¬æº¢å‡ºå¹¶æ˜¾ç¤ºå®Œæ•´å†…å®¹â€ æ—¶ï¼Œç›´æ¥æ‰“å¼€ä»£ç ç‰‡æ®µè®²è§£å®ç°é€»è¾‘ï¼Œå±•ç¤ºä½ çš„ç¼–ç è§„èŒƒå’Œé—®é¢˜è§£å†³èƒ½åŠ›ï¼›</li>
<li><strong>é¡¹ç›®å¤ç›˜</strong>ï¼šç»“åˆè¿™ä¸ªç»„ä»¶ï¼ŒèŠä½ åœ¨å®é™…é¡¹ç›®ä¸­å¦‚ä½• â€œè¯†åˆ«é‡å¤åœºæ™¯â†’å°è£…é€šç”¨ç»„ä»¶â†’æå‡å›¢é˜Ÿå¼€å‘æ•ˆç‡â€ï¼Œä½“ç°ä½ çš„åä½œå’Œå·¥ç¨‹åŒ–èƒ½åŠ›ã€‚</li>
</ul>
<p>ä½†å¾ˆå¤šåŒå­¦åœ¨æ±‚èŒä¸­ä¼šé‡åˆ°ï¼šæ˜æ˜æŒæ¡äº†è¿™äº›æŠ€èƒ½ï¼Œå´ä¸çŸ¥é“å¦‚ä½•åœ¨ç®€å†ä¸­å‘ˆç°ã€é¢è¯•æ—¶å¦‚ä½•è¡¨è¾¾æ‰èƒ½æ‰“åŠ¨é¢è¯•å®˜ï¼Ÿç”šè‡³æ‹¿åˆ°é¢è¯•æœºä¼šåï¼Œé¢å¯¹ç®—æ³•é¢˜ã€é¡¹ç›®æ·±æŒ–ã€HR é¢ç­‰ç¯èŠ‚æ‰‹è¶³æ— æªï¼Ÿ</p>
<p>å¦‚æœä½ æ­£å¤„äºå‰ç«¯æ±‚èŒç“¶é¢ˆæœŸ â€”â€” æŠ•ç®€å†çŸ³æ²‰å¤§æµ·ã€é¢è¯•å±¡é¢å±¡æŒ‚ã€ä¸çŸ¥é“è‡ªå·±çš„çŸ­æ¿åœ¨å“ªé‡Œï¼Œä¸å¦¨è¯•è¯•æˆ‘çš„ã€Œå‰ç«¯ç®€å†é¢è¯•è¾…å¯¼ + æ±‚èŒé™ªè·‘ã€æœåŠ¡ï¼š</p>
<ul>
<li>ç®€å†ç²¾ä¿®ï¼šç»“åˆä½ çš„é¡¹ç›®ç»éªŒï¼Œæç‚¼æ ¸å¿ƒäº®ç‚¹ï¼Œè®© HR ä¸€çœ¼çœ‹åˆ°ä½ çš„ä»·å€¼ï¼›</li>
<li>é¢è¯•è¾…å¯¼ï¼šé’ˆå¯¹æ€§è®²è§£é«˜é¢‘é¢è¯•é¢˜ã€ç®—æ³•é¢˜æ‹†è§£ã€é¡¹ç›®æ·±æŒ–æŠ€å·§ï¼Œæ¨¡æ‹ŸçœŸå®é¢è¯•åœºæ™¯ï¼›</li>
<li>æ±‚èŒé™ªè·‘ï¼šä»æŠ•é€’ç­–ç•¥ã€ç¬”è¯•è¾…å¯¼åˆ° offer è°ˆåˆ¤ï¼Œå…¨ç¨‹ 1v1 æŒ‡å¯¼ï¼Œå¸®ä½ é¿å¼€æ±‚èŒå‘ï¼Œé«˜æ•ˆæ‹¿åˆ°å¿ƒä»ª offerã€‚</li>
</ul>
<p>å·²ç»å¸®åŠ© 50 + å‰ç«¯åŒå­¦çªç ´æ±‚èŒç“¶é¢ˆï¼Œæ‹¿åˆ°å­—èŠ‚ã€é˜¿é‡Œã€è…¾è®¯ã€ç¾å›¢ç­‰å¤§å‚åŠç‹¬è§’å…½å…¬å¸ offerï¼Œå¹³å‡è–ªèµ„æå‡ 20%+ã€‚å¦‚æœä½ æƒ³å°‘èµ°å¼¯è·¯ï¼Œå¿«é€Ÿä¸Šå²¸</p>
<p>è´­ä¹°å‰ç«¯é¢è¯•é¢˜ã€æŠ¥åå‰ç«¯ç®€å†é¢è¯•è¾…å¯¼ã€å‰ç«¯æ±‚èŒé™ªè·‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fb23.tv%2Fmevanxn" target="_blank" title="https://b23.tv/mevanxn" ref="nofollow noopener noreferrer">b23.tv/mevanxn</a></p>
<p>è§†é¢‘ä¸»é¡µï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fb23.tv%2F3PhcsDI" target="_blank" title="https://b23.tv/3PhcsDI" ref="nofollow noopener noreferrer">b23.tv/3PhcsDI</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Zustand ä»å…¥é—¨åˆ°ç²¾é€šï¼šæˆ‘çš„å·¥ç¨‹å®è·µç¬”è®°]]></title>    <link>https://juejin.cn/post/7593193235250970676</link>    <guid>https://juejin.cn/post/7593193235250970676</guid>    <pubDate>2026-01-09T10:52:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593193235250970676" data-draft-id="7593173569871593524" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Zustand ä»å…¥é—¨åˆ°ç²¾é€šï¼šæˆ‘çš„å·¥ç¨‹å®è·µç¬”è®°"/> <meta itemprop="keywords" content="å‰ç«¯,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-01-09T10:52:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="triumph_passion"/> <meta itemprop="url" content="https://juejin.cn/user/4484269938844096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Zustand ä»å…¥é—¨åˆ°ç²¾é€šï¼šæˆ‘çš„å·¥ç¨‹å®è·µç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4484269938844096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    triumph_passion
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T10:52:59.000Z" title="Fri Jan 09 2026 10:52:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    13
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Zustand ä»å…¥é—¨åˆ°ç²¾é€šï¼šæˆ‘çš„å·¥ç¨‹å®è·µç¬”è®°</h2>
<p><strong>ç›®æ ‡è¯»è€…</strong>ï¼šå·²ç»ä¼šç”¨ Zustandï¼Œä½†æƒ³æŠŠå®ƒç”¨å¾—"ç¨³"å’Œ"å¯æ¼”è¿›"çš„ React å¼€å‘è€…</p>
<hr/>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>æˆ‘å†™è¿™ä»½ç¬”è®°çš„ç›®çš„å¾ˆç®€å•ï¼šæŠŠ Zustand ä»"ä¼šç”¨"æ¨è¿›åˆ°"ç”¨å¾—ç¨³ã€ç”¨å¾—å¯æ¼”è¿›"ã€‚
æˆ‘ä¸ä¼šåœ¨è¿™é‡Œé‡å¤ API æ–‡æ¡£å¼çš„è®²è§£ï¼Œè€Œæ˜¯ç”¨ä¸€ä¸ªå®Œæ•´çš„ Todo Demoï¼ŒæŠŠæˆ‘è®¤ä¸ºæœ€é‡è¦çš„å·¥ç¨‹å®è·µä¸²èµ·æ¥ï¼š<strong>è®¢é˜…è¾¹ç•Œã€actions/state åˆ†ç¦»ã€persist çš„å‘ã€æ´¾ç”ŸçŠ¶æ€ï¼ˆcomputedï¼‰æ€ä¹ˆåšï¼Œä»¥åŠä¸ºä»€ä¹ˆæˆ‘å°½é‡ä¸ç”¨ useShallowã€‚</strong></p>
<p>Zustand çš„ API æ–‡æ¡£å¾ˆç®€å•ï¼Œå‡ è¡Œä»£ç å°±èƒ½è·‘èµ·æ¥ã€‚ä½†åœ¨çœŸå®é¡¹ç›®ä¸­ï¼Œå¦‚ä½•ç»„ç»‡ storeï¼Ÿå¦‚ä½•é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼ŸæŒä¹…åŒ–æœ‰å“ªäº›å‘ï¼Ÿæ´¾ç”ŸçŠ¶æ€æ€ä¹ˆåšï¼Ÿ</p>
<p>æˆ‘ç”¨ä¸€ä¸ªå®Œæ•´çš„ Todo Demoï¼ŒæŠŠè¿™äº›é—®é¢˜ä¸²èµ·æ¥ï¼Œåˆ†äº«ä¸€å¥—åœ¨é¡¹ç›®ä¸­éªŒè¯è¿‡çš„æœ€ä½³å®è·µã€‚</p>
<hr/>
<h3 data-id="heading-2">1. æˆ‘æœ€ç»ˆçš„ Demoï¼ˆä½ å¯ä»¥ç›´æ¥è·‘ï¼‰</h3>
<blockquote>
<p>è¿™ä»½ä»£ç æ˜¯"æˆ‘è®¤ä¸ºæ¯”è¾ƒç¨³"çš„ Zustand ç”¨æ³•ï¼š</p>
<ul>
<li>ç»„ä»¶åªè®¢é˜…è‡ªå·±éœ€è¦çš„æ•°æ®</li>
<li>actions/state åˆ†ç¦»</li>
<li>persist åªæŒä¹…åŒ–çº¯æ•°æ®ï¼ˆé¿å…å‡½æ•°ä¸¢å¤±ï¼‰</li>
<li>æ´¾ç”Ÿå€¼ç”¨ selector ç›´æ¥è®¢é˜…ï¼ˆç±»ä¼¼ Vue computed çš„æ•ˆæœï¼‰</li>
<li>è¡¨å•ç”¨ react-hook-form + zod</li>
</ul>
</blockquote>
<h4 data-id="heading-3">0.1 <code>useTodoStore.ts</code>ï¼ˆZustand storeï¼‰</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { create } <span class="hljs-keyword">from</span> <span class="hljs-string">'zustand'</span>;
<span class="hljs-keyword">import</span> { persist } <span class="hljs-keyword">from</span> <span class="hljs-string">'zustand/middleware'</span>;
<span class="hljs-keyword">import</span> { immer } <span class="hljs-keyword">from</span> <span class="hljs-string">'zustand/middleware/immer'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Todo</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">completed</span>: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">TodoState</span> {
  <span class="hljs-attr">todos</span>: <span class="hljs-title class_">Todo</span>[];
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">TodoActions</span> {
  <span class="hljs-attr">addTodo</span>: <span class="hljs-function">(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
  <span class="hljs-attr">toggleTodo</span>: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
  <span class="hljs-attr">removeTodo</span>: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
  <span class="hljs-attr">clearCompleted</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;
}

<span class="hljs-keyword">type</span> <span class="hljs-title class_">TodoStore</span> = <span class="hljs-title class_">TodoState</span> &amp; { <span class="hljs-attr">actions</span>: <span class="hljs-title class_">TodoActions</span> };

<span class="hljs-keyword">const</span> useTodoStore = create&lt;<span class="hljs-title class_">TodoStore</span>&gt;()(
  <span class="hljs-title function_">persist</span>(
    <span class="hljs-title function_">immer</span>(<span class="hljs-function"><span class="hljs-params">set</span> =&gt;</span> ({
      <span class="hljs-attr">todos</span>: [],
      <span class="hljs-attr">actions</span>: {
        <span class="hljs-attr">addTodo</span>: <span class="hljs-function">(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) =&gt;</span>
          <span class="hljs-title function_">set</span>(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> {
            state.<span class="hljs-property">todos</span>.<span class="hljs-title function_">push</span>({
              <span class="hljs-attr">id</span>: crypto.<span class="hljs-title function_">randomUUID</span>(),
              text,
              <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span>,
            });
          }),
        <span class="hljs-attr">toggleTodo</span>: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt;</span>
          <span class="hljs-title function_">set</span>(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> {
            <span class="hljs-keyword">const</span> todo = state.<span class="hljs-property">todos</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">todo: Todo</span>) =&gt;</span> todo.<span class="hljs-property">id</span> === id);
            <span class="hljs-keyword">if</span> (todo) todo.<span class="hljs-property">completed</span> = !todo.<span class="hljs-property">completed</span>;
          }),
        <span class="hljs-attr">removeTodo</span>: <span class="hljs-function">(<span class="hljs-params">id: <span class="hljs-built_in">string</span></span>) =&gt;</span>
          <span class="hljs-title function_">set</span>(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> {
            state.<span class="hljs-property">todos</span> = state.<span class="hljs-property">todos</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">todo: Todo</span>) =&gt;</span> todo.<span class="hljs-property">id</span> !== id);
          }),
        <span class="hljs-attr">clearCompleted</span>: <span class="hljs-function">() =&gt;</span>
          <span class="hljs-title function_">set</span>(<span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> {
            state.<span class="hljs-property">todos</span> = state.<span class="hljs-property">todos</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">todo: Todo</span>) =&gt;</span> !todo.<span class="hljs-property">completed</span>);
          }),
      },
    })),
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'todos-storage'</span>,

      <span class="hljs-comment">/**
       * å…³é”®ï¼špersist åªæŒä¹…åŒ–å¯åºåˆ—åŒ–çš„æ•°æ®ã€‚
       * æˆ‘åªå­˜ todosï¼Œä¸å­˜ actionsï¼ˆå‡½æ•°ä¸èƒ½ JSON åºåˆ—åŒ–ï¼Œå¦åˆ™ä¼šå‡ºç° addTodo is not a functionï¼‰
       */</span>
      <span class="hljs-attr">partialize</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ({ <span class="hljs-attr">todos</span>: state.<span class="hljs-property">todos</span> }),
    }
  )
);

<span class="hljs-comment">/**
 * æˆ‘ä¸ç›´æ¥å¯¼å‡º useTodoStoreï¼ˆé¿å…è¯¯è®¢é˜…æ•´ä¸ª storeï¼‰ï¼Œ
 * è€Œæ˜¯å¯¼å‡ºè¯­ä¹‰åŒ– hooksï¼Œé›†ä¸­ selector é€»è¾‘ã€‚
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useTodos</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">useTodoStore</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> s.<span class="hljs-property">todos</span>);
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useTodoActions</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-title function_">useTodoStore</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> s.<span class="hljs-property">actions</span>);

<span class="hljs-comment">/**
 * æ´¾ç”Ÿå€¼ï¼šç±»ä¼¼ Vue computedã€‚
 * ç»„ä»¶å¦‚æœåªå…³å¿ƒ countï¼Œå°±åªè®¢é˜…è¿™ä¸ª selectorï¼Œè€Œä¸æ˜¯è®¢é˜… todosã€‚
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useIncompleteCount</span> = (<span class="hljs-params"/>) =&gt;
  <span class="hljs-title function_">useTodoStore</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> s.<span class="hljs-property">todos</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, t</span>) =&gt;</span> acc + (t.<span class="hljs-property">completed</span> ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>), <span class="hljs-number">0</span>));
</code></pre>
<h4 data-id="heading-4">0.2 <code>schema.ts</code>ï¼ˆzod schemaï¼‰</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">'zod'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> todoSchema = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">todoText</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">trim</span>().<span class="hljs-title function_">min</span>(<span class="hljs-number">1</span>, <span class="hljs-string">'è¯·è¾“å…¥å¾…åŠé¡¹'</span>),
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">TodoValues</span> = z.<span class="hljs-property">infer</span>&lt;<span class="hljs-keyword">typeof</span> todoSchema&gt;;
</code></pre>
<h4 data-id="heading-5">0.3 <code>Demo.tsx</code>ï¼ˆReact ç»„ä»¶ï¼šAddTodo / TodoList / Footerï¼‰</h4>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Button</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../components/ui/button'</span>;
<span class="hljs-keyword">import</span> clsx <span class="hljs-keyword">from</span> <span class="hljs-string">'clsx'</span>;

<span class="hljs-keyword">import</span> {
  useIncompleteCount,
  useTodoActions,
  useTodos,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@/store/useTodoStore'</span>;

<span class="hljs-keyword">import</span> { useForm } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-hook-form'</span>;
<span class="hljs-keyword">import</span> { todoSchema, <span class="hljs-keyword">type</span> <span class="hljs-title class_">TodoValues</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./schema'</span>;
<span class="hljs-keyword">import</span> { zodResolver } <span class="hljs-keyword">from</span> <span class="hljs-string">'@hookform/resolvers/zod'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">AddTodo</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> {
    register,
    handleSubmit,
    reset,
    <span class="hljs-attr">formState</span>: { errors },
  } = useForm&lt;<span class="hljs-title class_">TodoValues</span>&gt;({
    <span class="hljs-attr">resolver</span>: <span class="hljs-title function_">zodResolver</span>(todoSchema),
    <span class="hljs-attr">defaultValues</span>: {
      <span class="hljs-attr">todoText</span>: <span class="hljs-string">''</span>,
    },
  });

  <span class="hljs-keyword">const</span> { addTodo } = <span class="hljs-title function_">useTodoActions</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onSubmit</span> = (<span class="hljs-params">values: TodoValues</span>) =&gt; {
    <span class="hljs-title function_">addTodo</span>(values.<span class="hljs-property">todoText</span>);
    <span class="hljs-title function_">reset</span>();
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>
      <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{handleSubmit(onSubmit)}</span>
      <span class="hljs-attr">className</span>=<span class="hljs-string">"my-2 flex justify-between"</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex min-h-15 flex-col"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">"rounded-xl border border-gray-600 px-2 py-1 text-sm"</span>
          <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥ä»»åŠ¡"</span>
          {<span class="hljs-attr">...register</span>('<span class="hljs-attr">todoText</span>')}
        /&gt;</span>
        {errors.todoText &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"mt-1 ml-1 text-xs text-red-500"</span>&gt;</span>
            *{errors.todoText.message}
          <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
        )}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"outline"</span>&gt;</span>
        æ·»åŠ 
      <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">TodoList</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> todos = <span class="hljs-title function_">useTodos</span>();
  <span class="hljs-keyword">const</span> { toggleTodo, removeTodo } = <span class="hljs-title function_">useTodoActions</span>();

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      {todos.map(todo =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{todo.id}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"mt-2 flex justify-between"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
              <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span>
              <span class="hljs-attr">checked</span>=<span class="hljs-string">{todo.completed}</span>
              <span class="hljs-attr">onChange</span>=<span class="hljs-string">{()</span> =&gt;</span> toggleTodo(todo.id)}
            /&gt;
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>
              <span class="hljs-attr">className</span>=<span class="hljs-string">{clsx(</span>
                '<span class="hljs-attr">ml-2</span>',
                <span class="hljs-attr">todo.completed</span> &amp;&amp; '<span class="hljs-attr">text-gray-400</span> <span class="hljs-attr">line-through</span>'
              )}
            &gt;</span>
              {todo.text}
            <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> removeTodo(todo.id)}&gt;
            åˆ é™¤
          <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Footer</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> { clearCompleted } = <span class="hljs-title function_">useTodoActions</span>();
  <span class="hljs-keyword">const</span> incompleteCount = <span class="hljs-title function_">useIncompleteCount</span>();

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"my-2 flex justify-end"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>æœªå®Œæˆæ•°é‡ï¼š{incompleteCount}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"button"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{clearCompleted}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"rounded-full"</span>&gt;</span>
        åˆ é™¤å·²å®Œæˆ
      <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  );
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">Demo</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"mt-2 ml-2 flex w-100 flex-col rounded-xl bg-gray-100 px-3 py-2"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"self-center font-bold"</span>&gt;</span>TODO LIST<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">AddTodo</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">TodoList</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Footer</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">Demo</span>;
</code></pre>
<hr/>
<h3 data-id="heading-6">2. æˆ‘å¦‚ä½•ç†è§£ Zustand çš„"è¿›é˜¶ç‚¹"</h3>
<h4 data-id="heading-7">2.1 è®¢é˜…è¾¹ç•Œæ˜¯ç¬¬ä¸€æ€§åŸç†</h4>
<p>Zustand ç»„ä»¶æ›´æ–°çš„è§¦å‘æ¡ä»¶ï¼Œæˆ‘ç”¨ä¸€å¥è¯æè¿°ï¼š</p>
<blockquote>
<p>æˆ‘è®¢é˜…çš„ selector è¿”å›å€¼å‘ç”Ÿå˜åŒ–ï¼ˆ<code>Object.is(prev, next) === false</code>ï¼‰ï¼Œç»„ä»¶å°±é‡æ¸²æŸ“ã€‚</p>
</blockquote>
<p>æ‰€ä»¥æˆ‘åšçš„æ‰€æœ‰"æœ€ä½³å®è·µ"ï¼Œéƒ½åœ¨å›ç­”ï¼š
<strong>æˆ‘åˆ°åº•è®©ç»„ä»¶è®¢é˜…äº†ä»€ä¹ˆï¼Ÿå®ƒçš„è¿”å›å€¼ç¨³å®šå—ï¼Ÿ</strong></p>
<hr/>
<h3 data-id="heading-8">3. ä¸ºä»€ä¹ˆæˆ‘ä¸ç›´æ¥å¯¼å‡º store hook</h3>
<p>æˆ‘åˆ»æ„ä¸å¯¼å‡º <code>useTodoStore</code> ç»™ä¸šåŠ¡ç»„ä»¶ä½¿ç”¨ï¼Œè€Œæ˜¯åªå¯¼å‡ºï¼š</p>
<ul>
<li><code>useTodos()</code></li>
<li><code>useTodoActions()</code></li>
<li><code>useIncompleteCount()</code></li>
</ul>
<p>åŸå› ï¼š</p>
<ol>
<li>
<p><strong>é¿å…è¯¯è®¢é˜…æ•´ä¸ª store</strong></p>
<ul>
<li><code>useTodoStore()</code> ç›¸å½“äºè®¢é˜… <code>state =&gt; state</code>ï¼Œä»»ä½•å­—æ®µå˜åŒ–éƒ½ä¼šè§¦å‘ re-render</li>
</ul>
</li>
<li>
<p><strong>selector é€»è¾‘é›†ä¸­</strong></p>
<ul>
<li>ä»¥åæˆ‘æƒ³æ”¹å˜æ•°æ®ç»“æ„ï¼ˆæ¯”å¦‚ä»æ•°ç»„æ¢æˆ mapï¼‰ï¼Œåªç”¨æ”¹ hookï¼Œä¸ç”¨å…¨å±€æœç´¢æ›¿æ¢</li>
</ul>
</li>
<li>
<p><strong>è¯­ä¹‰æ›´å¼º</strong></p>
<ul>
<li>ä¸šåŠ¡ç»„ä»¶é‡Œè¯»èµ·æ¥åƒ"å£°æ˜ä¾èµ–"ï¼Œè€Œä¸æ˜¯"å®ç°ç»†èŠ‚æ‹¼è£…"</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-9">4. ä¸ºä»€ä¹ˆæˆ‘æŠŠ actions å’Œ state åˆ†ç¦»</h3>
<p>æˆ‘æŠŠ store ç»„ç»‡æˆï¼š</p>
<pre><code class="hljs language-ts" lang="ts">{ todos, <span class="hljs-attr">actions</span>: { ... } }
</code></pre>
<p>è¿™è®©æˆ‘åœ¨ç»„ä»¶é‡Œå½¢æˆä¸€ç§ç¨³å®šæ¨¡å¼ï¼š</p>
<ul>
<li>è®¢é˜…æ•°æ®ï¼š<code>const todos = useTodos()</code></li>
<li>è§¦å‘äº‹ä»¶ï¼š<code>const { addTodo } = useTodoActions()</code></li>
</ul>
<p>è¿™é‡Œæœ‰ä¸ªæˆ‘è®¤ä¸ºå¾ˆ"å…³é”®ä½†å®¹æ˜“å¿½ç•¥"çš„ç‚¹ï¼š</p>
<blockquote>
<p>actions æ˜¯ç¨³å®šå¼•ç”¨ï¼Œå®ƒä»¬ä¸ä¼šéš todos æ›´æ–°è€Œæ”¹å˜ã€‚</p>
</blockquote>
<p>å› æ­¤ï¼š
åªè®¢é˜… <code>actions</code> çš„ç»„ä»¶ï¼ˆä¾‹å¦‚ AddTodoï¼‰ä¸ä¼šå› ä¸º <code>todos</code> æ›´æ–°è€Œé‡æ¸²æŸ“ã€‚
è¿™è®©æ¸²æŸ“è¾¹ç•Œéå¸¸æ¸…æ™°ã€‚</p>
<hr/>
<h3 data-id="heading-10">5. persist çš„å‘ï¼šä¸ºä»€ä¹ˆæˆ‘å¿…é¡»ä½¿ç”¨ partialize</h3>
<p>æˆ‘äº²è‡ªè¸©è¿‡è¿™ä¸ªå‘ï¼š<code>addTodo is not a function</code>ã€‚
æœ¬è´¨åŸå› ï¼š</p>
<ul>
<li>persist ä¼šæŠŠ state JSON åºåˆ—åŒ–</li>
<li>å‡½æ•°æ— æ³•è¢«åºåˆ—åŒ–</li>
<li>rehydrate å actions è¢«è¦†ç›–æˆéå‡½æ•°å¯¹è±¡</li>
</ul>
<p>æ‰€ä»¥æˆ‘å¿…é¡»å†™ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-attr">partialize</span>: <span class="hljs-function"><span class="hljs-params">state</span> =&gt;</span> ({ <span class="hljs-attr">todos</span>: state.<span class="hljs-property">todos</span> });
</code></pre>
<p>æˆ‘çš„ç»éªŒæ˜¯ï¼š</p>
<blockquote>
<p>persist åªå­˜"æ•°æ®"ï¼Œç»å¯¹ä¸è¦å­˜"è¡Œä¸º"ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-11">6. "computed" åœ¨ Zustand é‡Œæ€ä¹ˆåšï¼Ÿ</h3>
<p>Vue æœ‰ computedï¼Œæˆ‘åœ¨ Zustand é‡Œç”¨ selector æ¥æ¨¡æ‹ŸåŒç­‰æ•ˆæœï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useIncompleteCount</span> = (<span class="hljs-params"/>) =&gt;
  <span class="hljs-title function_">useTodoStore</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> s.<span class="hljs-property">todos</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, t</span>) =&gt;</span> acc + (t.<span class="hljs-property">completed</span> ? <span class="hljs-number">0</span> : <span class="hljs-number">1</span>), <span class="hljs-number">0</span>));
</code></pre>
<p>ç„¶ååœ¨ Footer é‡Œåªè®¢é˜…è¿™ä¸ªæ´¾ç”Ÿå€¼ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">const</span> incompleteCount = <span class="hljs-title function_">useIncompleteCount</span>();
</code></pre>
<p>æˆ‘ç‰¹åˆ«å¼ºè°ƒè¿™ä¸€ç‚¹ï¼Œå› ä¸ºè¿™ä½“ç°äº†"è®¢é˜…æœ€å°ä¾èµ–"çš„æ€æƒ³ï¼š
Footer ä¸å…³å¿ƒ todos å…·ä½“å†…å®¹ï¼Œåªå…³å¿ƒ countï¼Œæ‰€ä»¥æˆ‘ä¸è®¢é˜… todosã€‚</p>
<hr/>
<h3 data-id="heading-12">7. ä¸ºä»€ä¹ˆæˆ‘å°½é‡ä¸ç”¨ useShallow</h3>
<p>useShallow çš„ä½œç”¨æˆ‘ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>å½“ selector è¢«è¿«è¿”å›ä¸€ä¸ªæ–°å¯¹è±¡/æ•°ç»„ï¼ˆ<code>{}</code> / <code>[]</code>ï¼‰æ—¶ï¼Œç”¨ shallow compare æŠµæ¶ˆå¼•ç”¨å˜åŒ–ã€‚</p>
</blockquote>
<p>ä½†åœ¨è¿™ä¸ª Demo é‡Œï¼Œæˆ‘é€šè¿‡ï¼š</p>
<ul>
<li>åŸå­ selectorï¼ˆ<code>useTodos</code>, <code>useTodoActions</code>, <code>useIncompleteCount</code>ï¼‰</li>
<li>actions/state åˆ†ç¦»</li>
</ul>
<p>å·²ç»é¿å…äº†"è¿”å›æ–°å¯¹è±¡"çš„åœºæ™¯ã€‚
å› æ­¤æˆ‘å‡ ä¹ä¸éœ€è¦ useShallowã€‚</p>
<p>å¦‚æœæˆ‘ç¡®å®éœ€è¦ä¸€æ¬¡æ€§è¿”å›å¤šä¸ª state å€¼ï¼Œæˆ‘æ‰ä¼šç”¨ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-title function_">useTodoStore</span>(<span class="hljs-title function_">useShallow</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> ({ <span class="hljs-attr">a</span>: s.<span class="hljs-property">a</span>, <span class="hljs-attr">b</span>: s.<span class="hljs-property">b</span> })));
</code></pre>
<hr/>
<h3 data-id="heading-13">8. æœ€ç»ˆæ²‰æ·€çš„"å†™ Zustand çš„è§„åˆ™é›†"</h3>
<p>è‡ªå·±å®šçš„è§„åˆ™åŸºæœ¬æ˜¯è¿™äº›ï¼š</p>
<ol>
<li><strong>ç»„ä»¶ä¸ç›´æ¥ç”¨ store hook</strong></li>
<li><strong>å¯¼å‡ºè¯­ä¹‰åŒ– hooksï¼Œé›†ä¸­ selector</strong></li>
<li><strong>actions/state åˆ†ç¦»</strong></li>
<li><strong>persist åªæŒä¹…åŒ–çº¯æ•°æ®ï¼ˆpartialize å¿…å†™ï¼‰</strong></li>
<li><strong>æ´¾ç”ŸçŠ¶æ€ä¼˜å…ˆç”¨ selectorï¼ˆè€Œä¸æ˜¯å¼ºè¿«è®¢é˜…åŸå§‹ stateï¼‰</strong></li>
<li><strong>é»˜è®¤ä¸ç”¨ useShallowï¼Œåªæœ‰åœ¨å¿…é¡»è¿”å› object/array æ—¶ä½¿ç”¨</strong></li>
<li><strong>èƒ½è®©ç»„ä»¶ä¾èµ–æ›´å°ï¼Œå°±è®©ä¾èµ–æ›´å°</strong></li>
</ol>
<hr/>
<h3 data-id="heading-14">9. ç»“è¯­ï¼šæˆ‘è®¤ä¸º Zustand çš„"è¿›é˜¶"æ˜¯ä»€ä¹ˆ</h3>
<p>å¯¹æˆ‘è€Œè¨€ï¼ŒZustand çš„è¿›é˜¶ä¸æ˜¯æŒæ¡å¤šå°‘ middlewareï¼Œ
è€Œæ˜¯æˆ‘èƒ½å¦æŒç»­å›ç­”è¿™ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li><strong>è¿™ä¸ªç»„ä»¶åˆ°åº•è®¢é˜…äº†ä»€ä¹ˆï¼Ÿ</strong></li>
<li><strong>æˆ‘çš„ selector è¿”å›å€¼æ˜¯ç¨³å®šçš„å—ï¼Ÿ</strong></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¨¡å—åŒ– CSSï¼šè§£å†³æ ·å¼æ±¡æŸ“çš„å‰ç«¯å·¥ç¨‹åŒ–æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7593098101432401974</link>    <guid>https://juejin.cn/post/7593098101432401974</guid>    <pubDate>2026-01-09T11:00:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593098101432401974" data-draft-id="7593139476833189931" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¨¡å—åŒ– CSSï¼šè§£å†³æ ·å¼æ±¡æŸ“çš„å‰ç«¯å·¥ç¨‹åŒ–æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="CSS,React.js,Vue.js"/> <meta itemprop="datePublished" content="2026-01-09T11:00:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†»æ¢¨æ”¿å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/2373184444182659"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¨¡å—åŒ– CSSï¼šè§£å†³æ ·å¼æ±¡æŸ“çš„å‰ç«¯å·¥ç¨‹åŒ–æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2373184444182659/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†»æ¢¨æ”¿å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T11:00:46.000Z" title="Fri Jan 09 2026 11:00:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¨¡å—åŒ– CSSï¼šè§£å†³æ ·å¼æ±¡æŸ“çš„å‰ç«¯å·¥ç¨‹åŒ–æ–¹æ¡ˆ</h2>
<p>åœ¨å‰ç«¯å¼€å‘ä»é™æ€é¡µé¢èµ°å‘ç»„ä»¶åŒ–ã€å·¥ç¨‹åŒ–çš„è¿‡ç¨‹ä¸­ï¼ŒCSS ä½œä¸ºæ ·å¼å®šä¹‰çš„æ ¸å¿ƒè¯­è¨€ï¼Œå…¶åŸç”Ÿç‰¹æ€§å¸¦æ¥çš„é—®é¢˜é€æ¸å‡¸æ˜¾ã€‚æ¨¡å—åŒ– CSS åº”è¿è€Œç”Ÿï¼Œæˆä¸ºè§£å†³æ ·å¼å…¨å±€æ±¡æŸ“ã€é€‚é…ç»„ä»¶åŒ–å¼€å‘çš„å…³é”®æ–¹æ¡ˆã€‚æœ¬æ–‡å°†ä»æ¨¡å—åŒ– CSS çš„ç”±æ¥ã€ç”¨æ³•åŠæ ¸å¿ƒæ„ä¹‰ä¸‰ä¸ªç»´åº¦ï¼Œç»“åˆ React å®æˆ˜æ¡ˆä¾‹ï¼Œæ·±å…¥è§£è¯»è¿™ä¸€å‰ç«¯å·¥ç¨‹åŒ–çš„é‡è¦å®è·µã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æ¨¡å—åŒ– CSS çš„ç”±æ¥ï¼šè§£å†³åŸç”Ÿ CSS çš„ã€Œå…¨å±€æ±¡æŸ“ã€ç—›ç‚¹</h3>
<p>CSS çš„è®¾è®¡åˆè¡·æ˜¯ä¸ºé™æ€ç½‘é¡µæä¾›æ ·å¼å®šä¹‰ï¼Œå…¶æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€æ˜¯ã€Œå…¨å±€ä½œç”¨åŸŸã€â€”â€” æ‰€æœ‰æ ·å¼è§„åˆ™éƒ½ä¼šä½œç”¨äºæ•´ä¸ªæ–‡æ¡£ï¼Œä¸å­˜åœ¨å¤©ç„¶çš„ç»„ä»¶çº§ä½œç”¨åŸŸéš”ç¦»ã€‚è¿™ä¸€ç‰¹æ€§åœ¨ç®€å•é¡µé¢ä¸­å¹¶æ— æ˜æ˜¾é—®é¢˜ï¼Œä½†éšç€å‰ç«¯å¼€å‘çš„å‘å±•ï¼Œé€æ¸æš´éœ²å‡ºè‡´å‘½ç¼ºé™·ï¼š</p>
<h4 data-id="heading-2">1. åŸç”Ÿ CSS çš„æ ¸å¿ƒé—®é¢˜</h4>
<ul>
<li><strong>æ ·å¼å†²çªä¸è¦†ç›–</strong>ï¼šå½“å¤šä¸ªå¼€å‘è€…åä½œå¼€å‘ï¼Œæˆ–é¡¹ç›®è§„æ¨¡æ‰©å¤§æ—¶ï¼Œä¸åŒç»„ä»¶ã€é¡µé¢è‹¥ä½¿ç”¨ç›¸åŒçš„ç±»åï¼ˆå¦‚ <code>.button</code>ã€<code>.txt</code>ï¼‰ï¼ŒååŠ è½½çš„æ ·å¼ä¼šè¦†ç›–å…ˆåŠ è½½çš„æ ·å¼ï¼Œå¯¼è‡´ç»„ä»¶æ ·å¼ã€Œæ±¡æŸ“ã€æˆ–è¢«ã€Œæ±¡æŸ“ã€ã€‚ä¾‹å¦‚ä¸€ä¸ªæŒ‰é’®ç»„ä»¶å®šä¹‰çš„ <code>.button</code> æ ·å¼ï¼Œå¯èƒ½ä¼šè¢«å¦ä¸€ä¸ªæŒ‰é’®ç»„ä»¶çš„åŒåç±»åè¦†ç›–ï¼Œç ´åç»„ä»¶çš„è§†è§‰ä¸€è‡´æ€§ã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d41991bc19424db0a1f97d1b8d5efc8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya75qKo5pS_5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768561246&amp;x-signature=3FWRsiwJjpXcPeu7O4m3s1mR0fw%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2bf8a3c61ddd40638ae043a2f930ef62~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya75qKo5pS_5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768561246&amp;x-signature=oEijzk8a%2FyoBHEhVbgiWRRzW9yg%3D" alt="image.png" loading="lazy"/>
<strong>æ ·å¼å†²çª</strong>
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27d7a1324ea949f7bcce61a57be2d552~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya75qKo5pS_5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768561246&amp;x-signature=%2BvvGDzD3P6vwo1UjulOuB2WLRdc%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>ç»„ä»¶åŒ–å¼€å‘çš„é€‚é…ç¼ºå¤±</strong>ï¼šReactã€Vue ç­‰æ¡†æ¶æ¨åŠ¨çš„ç»„ä»¶åŒ–å¼€å‘ï¼Œè¦æ±‚ç»„ä»¶å…·å¤‡ã€Œé«˜å†…èšã€ä½è€¦åˆã€çš„ç‰¹æ€§ â€”â€” ç»„ä»¶çš„ HTML ç»“æ„ã€JS é€»è¾‘ã€æ ·å¼åº”å°è£…ä¸ºç‹¬ç«‹å•å…ƒï¼ŒåŸç”Ÿ CSS çš„å…¨å±€ä½œç”¨åŸŸå®Œå…¨è¿èƒŒè¿™ä¸€åŸåˆ™ï¼Œæ ·å¼æ— æ³•å’Œç»„ä»¶ç»‘å®šï¼Œæˆä¸ºç»„ä»¶åŒ–å¼€å‘çš„ã€ŒçŸ­æ¿ã€ã€‚</li>
<li>
<h4 data-id="heading-3">2. æ¨¡å—åŒ– CSS çš„è¯ç”Ÿ</h4>
</li>
</ul>
<p>ä¸ºäº†é€‚é…ç»„ä»¶åŒ–å¼€å‘æ¨¡å¼ï¼Œè§£å†³æ ·å¼å…¨å±€æ±¡æŸ“é—®é¢˜ï¼Œæ¨¡å—åŒ– CSS æ–¹æ¡ˆè¢«æå‡ºã€‚å…¶æ ¸å¿ƒç›®æ ‡æ˜¯ä¸º CSS èµ‹äºˆã€Œä½œç”¨åŸŸéš”ç¦»ã€èƒ½åŠ›ï¼Œè®©æ ·å¼ä»…ä½œç”¨äºæŒ‡å®šç»„ä»¶ï¼Œå®ç°ã€Œç»„ä»¶æ ·å¼ç§æœ‰åŒ–ã€ã€‚ç›®å‰ä¸»æµçš„æ¨¡å—åŒ– CSS æ–¹æ¡ˆåˆ†ä¸ºä¸¤ç±»ï¼šä¸€ç±»æ˜¯ React ä¸»æ¨çš„ CSS Modulesï¼Œå¦ä¸€ç±»æ˜¯ Vue å†…ç½®çš„ <code>scoped</code> ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-4">äºŒã€æ¨¡å—åŒ– CSS çš„æ ¸å¿ƒç”¨æ³•ï¼šä»¥ React CSS Modules ä¸ºä¾‹</h3>
<p>æ¨¡å—åŒ– CSS çš„å®ç°æ–¹å¼å› æ¡†æ¶è€Œå¼‚ï¼Œå…¶ä¸­ React çš„ CSS Modules æ˜¯æœ€å…·ä»£è¡¨æ€§çš„å®ç°æ–¹æ¡ˆï¼Œä»¥ä¸‹ç»“åˆå®æˆ˜ä»£ç ï¼Œè¯¦è§£å…¶æ ¸å¿ƒç”¨æ³•ï¼š</p>
<h4 data-id="heading-5">1. CSS Modules çš„åŸºç¡€è§„åˆ™</h4>
<p>CSS Modules çš„æ ¸å¿ƒæ˜¯å°† CSS æ–‡ä»¶ç¼–è¯‘ä¸º JS å¯¹è±¡ï¼Œé€šè¿‡ã€Œç±»åæ˜ å°„ + å”¯ä¸€ Hash ç”Ÿæˆã€å®ç°ä½œç”¨åŸŸéš”ç¦»ï¼Œå…¶ä½¿ç”¨æµç¨‹å¯æ€»ç»“ä¸ºä¸‰æ­¥ï¼š</p>
<h5 data-id="heading-6">æ­¥éª¤ 1ï¼šæ ·å¼æ–‡ä»¶å‘½åè§„èŒƒ</h5>
<p>å°†æ™®é€š CSS æ–‡ä»¶å‘½åä¸º <code>[æ–‡ä»¶å].module.css</code>ï¼ˆå¦‚ <code>Button.module.css</code>ã€<code>anotherButton.module.css</code>ï¼‰ï¼Œè¿™æ˜¯ React è¯†åˆ« CSS Modules çš„æ ‡è¯†ï¼Œç¼–è¯‘å·¥å…·ï¼ˆå¦‚ Webpackï¼‰ä¼šå¯¹è¿™ç±»æ–‡ä»¶åšç‰¹æ®Šå¤„ç†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3aaa12fa3e7410bac8579da9effc947~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya75qKo5pS_5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768561246&amp;x-signature=MT%2FExBV%2BzN52DY9S1rqiOh3NoDY%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-7">æ­¥éª¤ 2ï¼šåœ¨ç»„ä»¶ä¸­å¯¼å…¥æ ·å¼æ–‡ä»¶</h5>
<p>CSS Modules ä¼šå°† CSS æ–‡ä»¶ç¼–è¯‘ä¸º JS å¯¹è±¡ï¼Œç±»åä½œä¸ºå¯¹è±¡çš„ã€Œé”®ã€ï¼Œç¼–è¯‘åçš„å”¯ä¸€ Hash å­—ç¬¦ä¸²ä½œä¸ºã€Œå€¼ã€ã€‚åœ¨ç»„ä»¶ä¸­é€šè¿‡ ES6 å¯¼å…¥è¯­æ³•å¼•å…¥è¯¥å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Button.jsx </span>
<span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">'./Button.module.css'</span>; 
<span class="hljs-comment">// AnotherButton.jsx </span>
<span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">'./anotherButton.module.css'</span>;
</code></pre>
<p>æ§åˆ¶å°æ‰“å° <code>styles</code> å¯çœ‹åˆ°ç±»ä¼¼ç»“æœï¼š<code>{ button: "Button_button_12345", txt: "Button_txt_67890" }</code>ï¼Œå…¶ä¸­ã€Œ12345ã€ã€Œ67890ã€æ˜¯ç¼–è¯‘ç”Ÿæˆçš„å”¯ä¸€ Hashï¼Œç¡®ä¿ç±»åå…¨å±€å”¯ä¸€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb5e70a717f44d9f843b9fda3899482b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya75qKo5pS_5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768561246&amp;x-signature=v3xySMkB%2Bwp3oVJN2XLsH%2FMxMQk%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-8">æ­¥éª¤ 3ï¼šåœ¨ JSX ä¸­ä½¿ç”¨æ¨¡å—åŒ–æ ·å¼</h5>
<p>é€šè¿‡ <code>className={styles.ç±»å}</code> çš„æ–¹å¼ï¼Œå°†ç¼–è¯‘åçš„å”¯ä¸€ç±»åç»‘å®šåˆ°å…ƒç´ ä¸Šï¼Œæ›¿ä»£åŸç”Ÿçš„å­—ç¬¦ä¸²ç±»åï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Button.jsx ç¤ºä¾‹ </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params"/>) { 
<span class="hljs-keyword">return</span> ( 
<span class="xml"><span class="hljs-tag">&lt;&gt;</span> 
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.txt}</span>&gt;</span>ä½ å¥½ï¼Œä¸–ç•Œ!!!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span> 
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.button}</span>&gt;</span>My Button<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span> 
<span class="hljs-tag">&lt;/&gt;</span></span> 
) } 
<span class="hljs-comment">// AnotherButton.jsx ç¤ºä¾‹ </span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">AnotherButton</span>(<span class="hljs-params"/>) { 
<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.button}</span>&gt;</span>My Another Button<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span> 
}
</code></pre>
<p>å°½ç®¡ <code>Button.module.css</code> å’Œ <code>anotherButton.module.css</code> éƒ½å®šä¹‰äº† <code>.button</code> ç±»ï¼Œä½†ç”±äº Hash ä¸åŒï¼Œæœ€ç»ˆæ¸²æŸ“çš„ç±»ååˆ†åˆ«ä¸º <code>Button_button_12345</code> å’Œ <code>anotherButton_button_abcde</code>ï¼Œæ ·å¼å®Œå…¨éš”ç¦»ï¼Œä¸ä¼šäº’ç›¸è¦†ç›–ã€‚</p>
<h4 data-id="heading-9">2. å…¶ä»–æ¨¡å—åŒ– CSS æ–¹æ¡ˆï¼šVue scoped</h4>
<p>Vue åˆ™é‡‡ç”¨æ›´ç®€æ´çš„ <code>scoped</code> ç‰¹æ€§å®ç°æ ·å¼éš”ç¦»ï¼šåœ¨ <code>&lt;style&gt;</code> æ ‡ç­¾ä¸­æ·»åŠ  <code>scoped</code> å±æ€§ï¼ŒVue ä¼šä¸ºç»„ä»¶å†…æ‰€æœ‰å…ƒç´ æ·»åŠ å”¯ä¸€çš„ Hash å±æ€§ï¼ˆå¦‚ <code>data-v-123456</code>ï¼‰ï¼Œå¹¶å°† CSS è§„åˆ™ç¼–è¯‘ä¸ºå±æ€§é€‰æ‹©å™¨ï¼ˆå¦‚ <code>.button[data-v-123456]</code>ï¼‰ã€‚è¿™ç§æ–¹å¼æ— éœ€ä¿®æ”¹ç±»åï¼Œå¯è¯»æ€§æ›´é«˜ï¼Œä¸” Hash ä»…ç”Ÿæˆä¸€æ¬¡ï¼Œæ€§èƒ½æ›´ä¼˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa93eaa3d6ab4c83b3fccfe0c71b9ddc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya75qKo5pS_5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768561246&amp;x-signature=pOlwS1XOfafSvV71OKuKEsci9iU%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9cfbd55122b7436aa261e15d42878102~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya75qKo5pS_5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768561246&amp;x-signature=Z904YzhjO3X7z3efQcrAAhcFgG8%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-10">3. è¡¥å……ï¼šCSS-in-JS æ–¹æ¡ˆ</h4>
<p>é™¤äº† CSS Modulesï¼ŒReact è¿˜æ”¯æŒ styled-components ç­‰ CSS-in-JS æ–¹æ¡ˆï¼Œç›´æ¥åœ¨ JS ä¸­ç¼–å†™æ ·å¼ï¼Œé€šè¿‡ç»„ä»¶ props åŠ¨æ€æ§åˆ¶æ ·å¼ï¼Œæœ¬è´¨ä¹Ÿæ˜¯æ¨¡å—åŒ– CSS çš„å»¶ä¼¸ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">Button</span> = styled.button` 
background:${<span class="hljs-attr">props</span> =&gt; props.primary?<span class="hljs-string">'blue'</span>: <span class="hljs-string">'white'</span>}<span class="hljs-comment">; </span>
color:${<span class="hljs-attr">props</span> =&gt; props.primary?<span class="hljs-string">'white'</span>: <span class="hljs-string">'blue'</span>}<span class="hljs-comment">; </span>
`<span class="hljs-comment">; </span>
// ä½¿ç”¨æ—¶ï¼š&lt;Button primary&gt;ä¸»è¦æŒ‰é’®&lt;/Button&gt;
</code></pre>
<h3 data-id="heading-11">ä¸‰ã€æ¨¡å—åŒ– CSS çš„æ ¸å¿ƒæ„ä¹‰ï¼šé€‚é…å·¥ç¨‹åŒ–ï¼Œèµ‹èƒ½ç»„ä»¶åŒ–å¼€å‘</h3>
<p>æ¨¡å—åŒ– CSS å¹¶éå•çº¯çš„ã€Œè¯­æ³•ç³–ã€ï¼Œè€Œæ˜¯å‰ç«¯å·¥ç¨‹åŒ–å‘å±•çš„å¿…ç„¶ç»“æœï¼Œå…¶æ ¸å¿ƒä»·å€¼ä½“ç°åœ¨ä»¥ä¸‹ç»´åº¦ï¼š</p>
<h4 data-id="heading-12">1. å½»åº•è§£å†³æ ·å¼æ±¡æŸ“é—®é¢˜</h4>
<p>é€šè¿‡ã€Œå”¯ä¸€ Hash ç±»åã€æˆ–ã€Œå±æ€§é€‰æ‹©å™¨ã€ï¼Œè®©ç»„ä»¶æ ·å¼ä»…ä½œç”¨äºè‡ªèº«ï¼Œæ—¢ä¸ä¼šæ±¡æŸ“å…¨å±€æ ·å¼ï¼Œä¹Ÿä¸ä¼šè¢«å…¨å±€æ ·å¼æˆ–å…¶ä»–ç»„ä»¶æ ·å¼å½±å“ã€‚ä¾‹å¦‚ <code>Button</code> ç»„ä»¶çš„ <code>.txt</code> æ ·å¼ï¼ˆæ©™è‰²èƒŒæ™¯ã€çº¢è‰²æ–‡å­—ï¼‰ï¼Œä»…ä½œç”¨äºè¯¥ç»„ä»¶å†…çš„ <code>&lt;h1&gt;</code> å…ƒç´ ï¼Œä¸ä¼šå½±å“å…¶ä»–ç»„ä»¶çš„æ–‡å­—æ ·å¼ã€‚</p>
<h4 data-id="heading-13">2. æå‡å¤§å‹é¡¹ç›®çš„å¯ç»´æŠ¤æ€§</h4>
<p>æ¨¡å—åŒ– CSS è®©æ ·å¼å’Œç»„ä»¶ã€Œä¸€ä¸€ç»‘å®šã€ï¼Œå¼€å‘è€…ä¿®æ”¹ç»„ä»¶æ ·å¼æ—¶ï¼Œæ— éœ€æ‹…å¿ƒå½±å“å…¶ä»–é¡µé¢ / ç»„ä»¶ï¼Œå®šä½é—®é¢˜ã€è¿­ä»£æ ·å¼çš„æ•ˆç‡å¤§å¹…æå‡ã€‚å°¤å…¶åœ¨å¤šäººåä½œçš„å¼€æºé¡¹ç›®æˆ–ä¼ä¸šçº§åº”ç”¨ä¸­ï¼Œæ— éœ€å†é€šè¿‡ã€Œå‘½åç©ºé—´å‰ç¼€ï¼ˆå¦‚ <code>btn-button</code>ï¼‰ã€è§„é¿ç±»åå†²çªï¼Œç®€åŒ–äº†å¼€å‘è§„èŒƒã€‚</p>
<h4 data-id="heading-14">3. å¼ºåŒ–ç»„ä»¶çš„å¤ç”¨æ€§</h4>
<p>ç»„ä»¶åŒ–å¼€å‘çš„æ ¸å¿ƒç›®æ ‡æ˜¯ã€Œå¤ç”¨ã€ï¼Œè€Œæ ·å¼éš”ç¦»æ˜¯ç»„ä»¶å¤ç”¨çš„å‰æã€‚æ¨¡å—åŒ– CSS è®©ç»„ä»¶æˆä¸ºã€ŒHTML + JS + CSSã€çš„å®Œæ•´ç‹¬ç«‹å•å…ƒï¼Œå¯ç›´æ¥å¤ç”¨åœ¨ä¸åŒé¡¹ç›®ã€ä¸åŒé¡µé¢ä¸­ï¼Œæ— éœ€æ‹…å¿ƒæ ·å¼å†²çªï¼Œå¤§å¹…æå‡ç»„ä»¶çš„å¤ç”¨ä»·å€¼ã€‚</p>
<h4 data-id="heading-15">4. é€‚é…å‰ç«¯å·¥ç¨‹åŒ–æµç¨‹</h4>
<p>æ¨¡å—åŒ– CSS å¯ä¸ Webpackã€Vite ç­‰æ„å»ºå·¥å…·æ·±åº¦é›†æˆï¼Œæ”¯æŒæ ·å¼å‹ç¼©ã€æŒ‰éœ€åŠ è½½ã€é¢„å¤„ç†å™¨ï¼ˆLess/Sassï¼‰ç­‰ç‰¹æ€§ï¼Œæˆä¸ºå‰ç«¯å·¥ç¨‹åŒ–ä½“ç³»çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œæ¨åŠ¨é¡¹ç›®ä»ã€Œæ‰‹å†™é™æ€ CSSã€èµ°å‘ã€Œå·¥ç¨‹åŒ–æ ·å¼ç®¡ç†ã€ã€‚</p>
<h3 data-id="heading-16">å››ã€æ€»ç»“</h3>
<p>ä»åŸç”Ÿ CSS çš„å…¨å±€æ±¡æŸ“ç—›ç‚¹ï¼Œåˆ°ç»„ä»¶åŒ–å¼€å‘çš„è¿«åˆ‡éœ€æ±‚ï¼Œæ¨¡å—åŒ– CSS æ˜¯å‰ç«¯å¼€å‘ä»ã€Œé¡µé¢çº§ã€èµ°å‘ã€Œç»„ä»¶çº§ã€çš„å¿…ç„¶äº§ç‰©ã€‚æ— è®ºæ˜¯ React çš„ CSS Modulesã€Vue çš„ scopedï¼Œè¿˜æ˜¯ CSS-in-JS æ–¹æ¡ˆï¼Œæ ¸å¿ƒç›®æ ‡éƒ½æ˜¯ä¸º CSS èµ‹äºˆä½œç”¨åŸŸéš”ç¦»èƒ½åŠ›ã€‚</p>
<p>æ¨¡å—åŒ– CSS ä¸ä»…è§£å†³äº†æ ·å¼å†²çªçš„å†å²é—®é¢˜ï¼Œæ›´è®©æ ·å¼ç®¡ç†é€‚é…å·¥ç¨‹åŒ–ã€ç»„ä»¶åŒ–çš„å¼€å‘æ¨¡å¼ï¼Œæå‡äº†å¤§å‹é¡¹ç›®çš„å¯ç»´æŠ¤æ€§å’Œåä½œæ•ˆç‡ã€‚åœ¨å‰ç«¯å¼€å‘æ—¥ç›Šå¤æ‚çš„ä»Šå¤©ï¼ŒæŒæ¡æ¨¡å—åŒ– CSS å·²æˆä¸ºå‰ç«¯å·¥ç¨‹å¸ˆçš„å¿…å¤‡èƒ½åŠ›ï¼Œä¹Ÿæ˜¯æ„å»ºå¥å£®ã€å¯æ‰©å±•å‰ç«¯åº”ç”¨çš„åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[echartsæŸ±çŠ¶å›¾å®ç°æ–œåˆ‡ä»¥åŠlabelå±•ç¤º]]></title>    <link>https://juejin.cn/post/7593177437081550899</link>    <guid>https://juejin.cn/post/7593177437081550899</guid>    <pubDate>2026-01-09T11:27:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593177437081550899" data-draft-id="7593177437081518131" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="echartsæŸ±çŠ¶å›¾å®ç°æ–œåˆ‡ä»¥åŠlabelå±•ç¤º"/> <meta itemprop="keywords" content="ECharts"/> <meta itemprop="datePublished" content="2026-01-09T11:27:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯¥ç”¨æˆ·åŠ è½½ä¸­"/> <meta itemprop="url" content="https://juejin.cn/user/2621703968797415"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            echartsæŸ±çŠ¶å›¾å®ç°æ–œåˆ‡ä»¥åŠlabelå±•ç¤º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2621703968797415/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯¥ç”¨æˆ·åŠ è½½ä¸­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T11:27:19.000Z" title="Fri Jan 09 2026 11:27:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ€è·¯</h2>
<p>è¯ä¸å¤šè¯´ï¼Œuiå›¾å¦‚ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c8a0bc3eb5b4732be5711670db972e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35Yqg6L295Lit:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768562895&amp;x-signature=TZA3Ws7kil96Qd%2FelIk0OlVXbHU%3D" alt="image.png" loading="lazy"/></p>
<p>æ‹¿åˆ°è¿™ä¸ªuiå›¾çš„æ—¶å€™å°±çŸ¥é“ä¸ç®€å•äº†ï¼ŒæŸ±çŠ¶å›¾ç®€å•ï¼Œæ–œåˆ‡åŠŸèƒ½åˆæ€ä¹ˆå®ç°äº†ï¼Œäºæ˜¯æŸ¥æ‰¾èµ„æ–™</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc02bdced82b4a40bbfa3af3946501ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35Yqg6L295Lit:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768562895&amp;x-signature=N347o%2F4Qewphc4gFPgiKvhUciQw%3D" alt="image.png" loading="lazy"/></p>
<p>å‘ç°è¿™ä¸ªåŠŸèƒ½å¾ˆåƒ(æ¥æº:<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.isqqw.com%2Fviewer%3Fid%3D41249" target="_blank" title="https://www.isqqw.com/viewer?id=41249" ref="nofollow noopener noreferrer">æ¨ªå‘æŸ±å›¾æ–œåˆ‡ - EChartså›¾è¡¨é›†,echarts galleryç¤¾åŒº,Make A Pie,åˆ†äº«ä½ çš„å¯è§†åŒ–ä½œå“isqqw.com</a>)</p>
<p>å°è¯•å‘ç°å½“å€¼ä¸ºè´Ÿæ•°çš„æ—¶å€™æ ·å¼çˆ†ç‚¸ï¼Œæ•ˆæœå¦‚å›¾</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ffb1950d7b147c0a814c97755ad4a35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35Yqg6L295Lit:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768562895&amp;x-signature=HsHXJOvzNXpm%2B0xjM5YtbKaSrH8%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™ä¸ªæ–¹æ¡ˆåªèƒ½æ”¾å¼ƒï¼Œäºæ˜¯å†³å®šç”¨è‡ªå®šä¹‰ customå®ç°äº†
æ€è·¯å¾ˆç®€å•ï¼Œå°±æ˜¯ç”»å‡ºæŸ±çŠ¶å›¾å’Œlabelï¼Œè´Ÿæ•°çš„æŸ±çŠ¶å›¾æˆ‘æ”¾åœ¨å³è¾¹æ˜¯å› ä¸ºæ•°æ®å¤ªå¤§ä¼šå’Œyè½´çš„å€¼é‡åˆäº†ï¼Œç€æ€¥ä¸‹ç­ï¼Œå°±è´´å‡ºæœ€ç»ˆä»£ç äº†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5830a3a3878040feb93b089c580dc8ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35Yqg6L295Lit:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768562895&amp;x-signature=2ij4dSFPFSn%2FtBkhQBeGzBKHclw%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">æœ€ç»ˆä»£ç </h2>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">tooltip</span>: {
      <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">'#012C68'</span>,
      <span class="hljs-attr">borderColor</span>: <span class="hljs-string">'#012C68'</span>,
      <span class="hljs-attr">extraCssText</span>: <span class="hljs-string">'box-shadow: 0 0 10px 0 rgba(0, 119, 255, 0.50) inset'</span>, <span class="hljs-comment">// æ·»åŠ é˜´å½±ä»¥çªå‡ºæ˜¾ç¤º</span>
      <span class="hljs-attr">axisPointer</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'shadow'</span>,
      },
      <span class="hljs-attr">textStyle</span>: {
        <span class="hljs-attr">color</span>: <span class="hljs-string">'#fff'</span>, <span class="hljs-comment">// è®¾ç½®æ–‡å­—é¢œè‰²ä¸ºæ·±è‰²ï¼Œä»¥ä¾¿åœ¨ç™½è‰²èƒŒæ™¯ä¸‹æ¸…æ™°å¯è§</span>
      },
      <span class="hljs-attr">className</span>: <span class="hljs-string">'my-custom-tooltip'</span>,
      <span class="hljs-attr">formatter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">params</span>) {
        <span class="hljs-comment">// params æ˜¯æç¤ºæ¡†è§¦å‘æ—¶çš„æ•°æ®ä¿¡æ¯</span>
        <span class="hljs-keyword">if</span> (params.<span class="hljs-property">data</span>) {
          <span class="hljs-keyword">const</span> type = params.<span class="hljs-property">data</span>.<span class="hljs-property">type</span>; <span class="hljs-comment">// èŠ‚ç‚¹åç§°</span>
          <span class="hljs-keyword">const</span> unit = params.<span class="hljs-property">data</span>.<span class="hljs-property">unit</span> || <span class="hljs-string">''</span>;
          <span class="hljs-keyword">const</span> name = params.<span class="hljs-property">name</span>; <span class="hljs-comment">// èŠ‚ç‚¹åç§°</span>
          <span class="hljs-keyword">const</span> value = params.<span class="hljs-property">data</span>.<span class="hljs-property">value</span> || <span class="hljs-string">''</span>; <span class="hljs-comment">// å€¼ï¼ˆä½ ä¼ çš„æ˜¯ column4ï¼‰</span>
          <span class="hljs-keyword">return</span> <span class="hljs-string">`
                  &lt;div  style="border-bottom: 1px solid #ccc; padding-bottom: 5px; margin-bottom: 5px;"&gt;
                  &lt;strong style="
                  max-width: 150px;
                  display: inline-block;
                  white-space: normal;        /* å…è®¸æ¢è¡Œï¼ˆå…³é”®ï¼ï¼‰ */
                  word-wrap: break-word;      /* é•¿å•è¯/è¿ç»­å­—ç¬¦å¯æ–­è¡Œ */
                  overflow-wrap: break-word;  /* ç°ä»£æ ‡å‡†å†™æ³• */
                "&gt;<span class="hljs-subst">${name}</span>&lt;/strong&gt;
                  &lt;/div&gt;
                  <span class="hljs-subst">${type}</span>ï¼š<span class="hljs-subst">${value}</span><span class="hljs-subst">${unit}</span>
                `</span>.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\n/g</span>, <span class="hljs-string">''</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
      },
    },
    <span class="hljs-attr">xAxis</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'value'</span>,
      <span class="hljs-attr">axisLabel</span>: {
        <span class="hljs-attr">color</span>: <span class="hljs-string">'#fff'</span>,
        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">12</span>,
        <span class="hljs-attr">formatter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">value</span>) {
          <span class="hljs-keyword">return</span> value;
        },
      },
      <span class="hljs-attr">splitLine</span>: {
        <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">lineStyle</span>: {
          <span class="hljs-attr">color</span>: <span class="hljs-string">'#fff'</span>,
          <span class="hljs-attr">type</span>: <span class="hljs-string">'dashed'</span>, <span class="hljs-comment">// è™šçº¿</span>
          <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.2</span>,
        },
      },
      <span class="hljs-attr">axisLine</span>: {
        <span class="hljs-attr">show</span>: <span class="hljs-literal">false</span>,
      },
      <span class="hljs-attr">axisTick</span>: {
        <span class="hljs-attr">show</span>: <span class="hljs-literal">false</span>,
      },
    },
    <span class="hljs-attr">yAxis</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'category'</span>,
      <span class="hljs-attr">data</span>: data.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${v.index}</span> <span class="hljs-subst">${v.orgName}</span>`</span>),
      <span class="hljs-attr">axisLabel</span>: {
        <span class="hljs-attr">color</span>: <span class="hljs-string">'#fff'</span>,
        <span class="hljs-attr">fontSize</span>: <span class="hljs-number">14</span>,
        <span class="hljs-attr">width</span>: <span class="hljs-number">120</span>,
        <span class="hljs-comment">// å½“å†…å®¹è¶…å‡ºå®½åº¦æ—¶ä½¿ç”¨çœç•¥å·</span>
        <span class="hljs-attr">overflow</span>: <span class="hljs-string">'truncate'</span>,
        <span class="hljs-attr">ellipsis</span>: <span class="hljs-string">'...'</span>,
        <span class="hljs-attr">align</span>: <span class="hljs-string">'left'</span>,
        <span class="hljs-attr">margin</span>: <span class="hljs-number">120</span>,
        <span class="hljs-attr">formatter</span>: <span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> <span class="hljs-string">`{arrow|} <span class="hljs-subst">${value}</span>`</span>,
        <span class="hljs-attr">rich</span>: {
          <span class="hljs-attr">arrow</span>: {
            <span class="hljs-attr">backgroundColor</span>: {
              <span class="hljs-attr">image</span>: arrow,
            },
            <span class="hljs-attr">backgroundRepeat</span>: <span class="hljs-string">'no-repeat'</span>,
            <span class="hljs-comment">// å…³é”®ï¼šé€šè¿‡ padding æ§åˆ¶å‚ç›´ä½ç½®</span>
          },
        },
      },
      <span class="hljs-attr">axisLine</span>: {
        <span class="hljs-attr">show</span>: <span class="hljs-literal">false</span>,
      },
      <span class="hljs-attr">axisTick</span>: {
        <span class="hljs-attr">show</span>: <span class="hljs-literal">false</span>,
      },
    },
    <span class="hljs-attr">grid</span>: {
      <span class="hljs-attr">top</span>: <span class="hljs-number">20</span>, <span class="hljs-comment">// ä¸Šè¾¹è·</span>
      <span class="hljs-attr">left</span>: -<span class="hljs-number">110</span>, <span class="hljs-comment">// å·¦è¾¹è·</span>
      <span class="hljs-attr">right</span>: <span class="hljs-number">30</span>, <span class="hljs-comment">// å³è¾¹è·</span>
      <span class="hljs-attr">bottom</span>: <span class="hljs-number">20</span>, <span class="hljs-comment">// ä¸‹è¾¹è·</span>
      <span class="hljs-attr">containLabel</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¦‚æœä¸ºtrueï¼Œåˆ™ç¡®ä¿ç½‘æ ¼åŒ…å«åæ ‡è½´æ ‡ç­¾</span>
    },
    <span class="hljs-attr">series</span>: [
      {
        <span class="hljs-attr">data</span>: data.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">v</span>) =&gt;</span> {
          <span class="hljs-keyword">return</span> { ...v };
        }),
        <span class="hljs-attr">type</span>: <span class="hljs-string">'custom'</span>,
        <span class="hljs-attr">renderItem</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">params, api</span>) {
          <span class="hljs-keyword">const</span> value = api.<span class="hljs-title function_">value</span>(<span class="hljs-number">0</span>);
          <span class="hljs-keyword">const</span> categoryIndex = api.<span class="hljs-title function_">value</span>(<span class="hljs-number">1</span>);

          <span class="hljs-comment">// è·å–åæ ‡ï¼ˆç»å¯¹åƒç´ ï¼‰</span>
          <span class="hljs-keyword">const</span> zeroPoint = api.<span class="hljs-title function_">coord</span>([<span class="hljs-number">0</span>, categoryIndex]);
          <span class="hljs-keyword">const</span> valuePoint = api.<span class="hljs-title function_">coord</span>([value, categoryIndex]);

          <span class="hljs-keyword">const</span> barHeight = api.<span class="hljs-title function_">size</span>([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>])[<span class="hljs-number">1</span>] * <span class="hljs-number">0.3</span>; <span class="hljs-comment">// æ›´ç»†</span>
          <span class="hljs-keyword">const</span> y = zeroPoint[<span class="hljs-number">1</span>] - barHeight / <span class="hljs-number">2</span>;
          <span class="hljs-keyword">const</span> cut = <span class="hljs-number">8</span>;
          <span class="hljs-keyword">const</span> x0 = zeroPoint[<span class="hljs-number">0</span>];
          <span class="hljs-keyword">const</span> x1 = valuePoint[<span class="hljs-number">0</span>];
          <span class="hljs-keyword">const</span> width = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(x1 - x0); <span class="hljs-comment">// ä½¿ç”¨ç»å¯¹å€¼è®¡ç®—å®½åº¦</span>

          <span class="hljs-keyword">let</span> points, labelX, labelY, gradient, bar, labelText, group;

          <span class="hljs-keyword">if</span> (value &gt; <span class="hljs-number">0</span> &amp;&amp; width &gt; cut) {
            <span class="hljs-comment">// æ­£å€¼ä¸”è¶³å¤Ÿå®½åšæ–œåˆ‡</span>
            points = [
              [x0, y],
              [x1, y],
              [x1 - cut, y + barHeight],
              [x0, y + barHeight],
            ];

            gradient = <span class="hljs-keyword">new</span> echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title class_">LinearGradient</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, [
              { <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'#016AFF'</span> },
              { <span class="hljs-attr">offset</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'#4AE5FF'</span> },
            ]);

            labelX = x1 - cut + <span class="hljs-number">20</span>;
            labelY = y + barHeight / <span class="hljs-number">2</span>;
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (value &lt; <span class="hljs-number">0</span> &amp;&amp; width &gt; cut) {
            points = [
              [x0, y],
              [x1 + cut, y],
              [x1, y + barHeight],
              [x0, y + barHeight],
            ];

            gradient = <span class="hljs-keyword">new</span> echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title class_">LinearGradient</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, [
              { <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'#016AFF'</span> },
              { <span class="hljs-attr">offset</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'#4AE5FF'</span> },
            ]);
            <span class="hljs-comment">// å› ä¸ºyè½´è®¾ç½®ä¸º</span>
            <span class="hljs-comment">// labelX = x1 - cut - 10;</span>
            labelX = x0 + <span class="hljs-number">20</span>;
            labelY = y + barHeight / <span class="hljs-number">2</span>;
          } <span class="hljs-keyword">else</span> {
            points = [
              [<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(x0, x1), y],
              [<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(x0, x1), y],
              [<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(x0, x1), y + barHeight],
              [<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(x0, x1), y + barHeight],
            ];
            gradient = <span class="hljs-keyword">new</span> echarts.<span class="hljs-property">graphic</span>.<span class="hljs-title class_">LinearGradient</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, [
              { <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'#016AFF'</span> },
              { <span class="hljs-attr">offset</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">color</span>: <span class="hljs-string">'#4AE5FF'</span> },
            ]);
            labelX = value &gt;= <span class="hljs-number">0</span> ? x1 + <span class="hljs-number">20</span> : x1 - <span class="hljs-number">20</span>;
            labelY = y + barHeight / <span class="hljs-number">2</span>;
          }

          bar = {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'polygon'</span>,
            <span class="hljs-attr">shape</span>: { <span class="hljs-attr">points</span>: points },
            <span class="hljs-attr">style</span>: { <span class="hljs-attr">fill</span>: gradient },
            <span class="hljs-attr">key</span>: params.<span class="hljs-property">dataIndex</span>,
            <span class="hljs-attr">info</span>: { <span class="hljs-attr">value</span>: value },
          };

          labelText = {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span>,
            <span class="hljs-attr">style</span>: {
              <span class="hljs-attr">text</span>: value.<span class="hljs-title function_">toString</span>(),
              <span class="hljs-attr">textAlign</span>: <span class="hljs-string">'center'</span>,
              <span class="hljs-attr">textVerticalAlign</span>: <span class="hljs-string">'middle'</span>,
              <span class="hljs-attr">fill</span>: <span class="hljs-string">'#FFFFFF'</span>, <span class="hljs-comment">// ç™½è‰²æ–‡æœ¬</span>
              <span class="hljs-attr">fontSize</span>: <span class="hljs-number">14</span>,
            },
            <span class="hljs-attr">position</span>: [labelX, labelY],
          };

          group = {
            <span class="hljs-attr">type</span>: <span class="hljs-string">'group'</span>,
            <span class="hljs-attr">children</span>: [bar, labelText],
          };

          <span class="hljs-keyword">return</span> group; <span class="hljs-comment">// è¿”å›ç»„å¯¹è±¡</span>
        },
      },
    ],
  };
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Docker æµ…è°ˆ]]></title>    <link>https://juejin.cn/post/7593169840200040474</link>    <guid>https://juejin.cn/post/7593169840200040474</guid>    <pubDate>2026-01-09T12:56:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593169840200040474" data-draft-id="7592444642277965834" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Docker æµ…è°ˆ"/> <meta itemprop="keywords" content="Docker"/> <meta itemprop="datePublished" content="2026-01-09T12:56:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å²³å‡ºäºå±±"/> <meta itemprop="url" content="https://juejin.cn/user/2717648476454536"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Docker æµ…è°ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2717648476454536/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å²³å‡ºäºå±±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T12:56:16.000Z" title="Fri Jan 09 2026 12:56:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">Docker æ˜¯ä»€ä¹ˆ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7f8ad2eeeb646c5bf043a00fdb73ee9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bKz5Ye65LqO5bGx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768568871&amp;x-signature=QBJ4QFQa9MQeV79Bq0wpqMMN9EE%3D" alt="" loading="lazy"/></p>
<p>ä½ å¯ä»¥æŠŠ Docker ç†è§£ä¸ºè½¯ä»¶ä¸–ç•Œçš„é›†è£…ç®±ã€‚å°±å¦‚ Docker logo æ‰€å±•ç¤ºçš„ï¼Œæ˜¯ä¸€å¤´é²¸é±¼é©®ç€è‹¥å¹²é›†è£…ç®±ã€‚Docker å¯ä»¥å…è®¸å¼€å‘è€…å°†åº”ç”¨ä»¥åŠæ‰€æœ‰ä¾èµ–é¡¹ï¼ˆåº“ã€ç¯å¢ƒç­‰ï¼‰æ‰“åŒ…åˆ°ä¸€ä¸ªè½»é‡çº§ã€å¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æˆ– Windows æœºå™¨ä¸Šã€‚</p>
<h3 data-id="heading-1">è¯ç”Ÿçš„èƒŒæ™¯</h3>
<p>åº”ç”¨åœ¨å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œç”±äºç¯å¢ƒä¾èµ–ã€é…ç½®å·®å¼‚ç­‰ç­‰é—®é¢˜ï¼Œå¸¸å¯¼è‡´ <em>â€œåœ¨æˆ‘è¿™èƒ½è·‘â€</em> çš„éš¾é¢˜ã€‚ä¼ ç»Ÿè™šæ‹Ÿæœºè™½èƒ½éš”ç¦»ç¯å¢ƒï¼Œä½†èµ„æºå ç”¨é«˜ã€å¯åŠ¨æ…¢ã€ç¬¨é‡ï¼Œæ— æ³•æ»¡è¶³è½»é‡ã€å¿«é€Ÿéƒ¨ç½²çš„éœ€æ±‚ã€‚ Docker ä¾¿åœ¨è¿™ç§èƒŒæ™¯ä¸‹è¯ç”Ÿã€‚</p>
<h3 data-id="heading-2">Docker ä¸è™šæ‹Ÿæœºçš„åŒºåˆ«</h3>
<p>è™šæ‹Ÿæœºèƒ½å®ç°ç¯å¢ƒéš”ç¦»ï¼Œè§£å†³éƒ¨ç½²ç¯å¢ƒä¸€è‡´æ€§çš„é—®é¢˜ã€‚é‚£ä¹ˆ Docker åˆæ˜¯æ€ä¹ˆè§£å†³çš„ï¼Œæœ‰ä»€ä¹ˆä¼˜åŠ¿å‘¢ï¼Ÿ</p>
<p>ä¸€è¨€ä»¥è”½ä¹‹ï¼šè™šæ‹Ÿæœºè™šæ‹ŸåŒ–ç¡¬ä»¶ï¼Œä¾èµ–å®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼›è€Œå®¹å™¨è™šæ‹ŸåŒ–æ“ä½œç³»ç»Ÿï¼Œå…±äº«ä¸»æœºå†…æ ¸ï¼Œå› æ­¤æ›´è½»é‡ã€æ›´å¿«é€Ÿã€‚</p>
<p>é€šä¿—åŒ–çš„ç†è§£å°±æ˜¯ï¼š</p>
<ul>
<li>
<p>è™šæ‹Ÿæœºå°±åƒä¸€æ ‹ç‹¬æ ‹åˆ«å¢…ã€‚æ‹¥æœ‰è‡ªå·±çš„åœ°åŸºã€å¢™ä½“ã€æ°´ç”µç³»ç»Ÿï¼ˆè™šæ‹Ÿç¡¬ä»¶ï¼‰å’Œå®Œæ•´çš„å®¶åº­ç©ºé—´ï¼ˆæ“ä½œç³»ç»Ÿï¼‰ã€‚ç§å¯†æ€§å¥½ï¼ˆéš”ç¦»å¼ºï¼‰ï¼Œä½†å»ºé€ å’Œå¯åŠ¨æ…¢ï¼Œå ç”¨åœŸåœ°å¤šï¼ˆèµ„æºæ¶ˆè€—å¤§ï¼‰ã€‚</p>
</li>
<li>
<p>Docker å®¹å™¨å°±åƒä¸€æ ‹å…¬å¯“æ¥¼é‡Œçš„ä¸€ä¸ªå•é—´ã€‚æ‰€æœ‰æˆ¿é—´å…±äº«å¤§æ¥¼çš„åœ°åŸºå’Œä¸»ä½“ç»“æ„ï¼ˆä¸»æœºå†…æ ¸ï¼‰ï¼Œä½†æ¯ä¸ªæˆ¿é—´æœ‰è‡ªå·±ç‹¬ç«‹çš„å¢™å£ï¼ˆéš”ç¦»ï¼‰ã€å®¶å…·ï¼ˆåº”ç”¨ä¸ä¾èµ–ï¼‰ã€‚å¯åŠ¨å¿«ï¼ˆæ‹åŒ…å…¥ä½ï¼‰ï¼Œéå¸¸èŠ‚çœèµ„æºã€‚</p>
</li>
</ul>
<h2 data-id="heading-3">æ ¸å¿ƒæ¦‚å¿µ</h2>
<h3 data-id="heading-4">Â Â Dockerfile</h3>
<p>Â Â æ–‡æœ¬æ–‡ä»¶ï¼Œæè¿°å¦‚ä½•æ„å»ºé•œåƒï¼ˆä¾‹å¦‚æŒ‡å®šåŸºç¡€é•œåƒã€å®‰è£…è½¯ä»¶ã€å¤åˆ¶æ–‡ä»¶ç­‰ï¼‰ã€‚</p>
<h3 data-id="heading-5">Â Â é•œåƒ Image</h3>
<p>Â Â Dockerfile æ„å»ºåçš„äº§ç‰©å³é•œåƒï¼ˆImageï¼‰ã€‚é•œåƒæ˜¯åªè¯»çš„ï¼Œç±»ä¼¼äºå®‰è£…ç³»ç»Ÿç”¨çš„ <code>.iso</code> æ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†è¿è¡Œåº”ç”¨æ‰€éœ€çš„æ‰€æœ‰ä¸œè¥¿ï¼ˆä»£ç ã€åº“ã€ç¯å¢ƒå˜é‡ã€é…ç½®æ–‡ä»¶ï¼‰ã€‚</p>
<h4 data-id="heading-6">Â Â Â Â å±‚ Layer</h4>
<p>Â Â é•œåƒç”±å±‚æ„æˆï¼Œæ¯ä¸ªå±‚è¡¨ç¤ºæ–‡ä»¶ç³»ç»Ÿçš„å˜æ›´â€”â€”å¢åŠ ã€ä¿®æ”¹ã€åˆ é™¤ã€‚</p>
<h3 data-id="heading-7">Â Â å®¹å™¨ Container</h3>
<p>Â Â å®¹å™¨å°±æ˜¯å®é™…è¿è¡Œä¸­çš„å®ä¾‹ï¼ŒåŸºäºé•œåƒåˆ›å»ºè€Œæ¥ï¼Œä¸å…¶ä»–å®¹å™¨éš”ç¦»ã€‚ç±»ä¼¼äºä¸€ä¸ªè½»é‡çº§çš„ã€éš”ç¦»çš„è™šæ‹Ÿæœºï¼ˆä½†æœ¬è´¨æ˜¯è¿›ç¨‹ï¼‰ã€‚</p>
<h3 data-id="heading-8">Â Â ä»“åº“ Registry</h3>
<p>Â Â å­˜å‚¨å’Œåˆ†å‘é•œåƒçš„å¹³å°ï¼Œå¦‚ Docker Hubï¼ˆDocker å®˜æ–¹å¹³å°)ã€‚</p>
<h3 data-id="heading-9">Â Â Docker Compose</h3>
<p>Â Â å®¹å™¨çš„ä¸€ä¸ªæœ€ä½³å®è·µæ˜¯æ¯ä¸ªå®¹å™¨åº”è¯¥åªåšä¸€ä»¶äº‹ã€‚ä½†å®é™…é¡¹ç›®å¯èƒ½éœ€è¦åŒæ—¶è¿è¡Œè¿‡ä¸ªå®¹å™¨ï¼Œå¹¶ä¸”åŒæ—¶ç®¡ç†å®¹å™¨é—´çš„ç½‘ç»œè¿æ¥ç­‰ã€‚ä½¿ç”¨ Docker Composeï¼Œå¯ä»¥å®ç°åœ¨ä¸€ä¸ª YAML æ–‡ä»¶ä¸­å®šä¹‰æ‰€æœ‰å®¹å™¨åŠå…¶é…ç½®ã€‚ç„¶åä½¿ç”¨ä¸€æ¡å‘½ä»¤ä¾¿å¯å¯åŠ¨è¿è¡Œã€‚</p>
<p>Â Â ä¾‹å¦‚ä¸€ä¸ªé¡¹ç›®åŒ…å«å‰ç«¯ã€åç«¯ã€æ•°æ®åº“ï¼Œåˆ†åˆ«å¯¹åº”ä¸‰ä¸ªé•œåƒï¼Œè¿™ä¸€ä¸ªé¡¹ç›®å¯ä»¥ç”¨ä¸€ä¸ª docker-compose.yml æ–‡ä»¶æè¿°ï¼ŒåŒ…å«ä¸‰ä¸ªé•œåƒï¼Œç”¨ä¸€æ¡å‘½ä»¤å°±èƒ½å¯åŠ¨ã€‚</p>
<h2 data-id="heading-10">Docker æ¶æ„</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18235008490841729aa25cfbdd3de34e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bKz5Ye65LqO5bGx:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768568871&amp;x-signature=I%2F04X3WLEcVJVqrvjLwt%2BMypf4c%3D" alt="" loading="lazy"/></p>
<p>Â Â Docker é‡‡ç”¨å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„ã€‚Docker å®¢æˆ·ç«¯å’Œå®ˆæŠ¤è¿›ç¨‹å¯ä»¥è¿è¡Œåœ¨åŒä¸€ç³»ç»Ÿä¸Šï¼Œä¹Ÿå¯ä»¥å°† Docker å®¢æˆ·ç«¯è¿æ¥åˆ°è¿œç¨‹ Docker å®ˆæŠ¤è¿›ç¨‹ã€‚Docker å®¢æˆ·ç«¯å’Œå®ˆæŠ¤è¿›ç¨‹é€šè¿‡ REST API è¿›è¡Œé€šä¿¡ï¼Œé€šä¿¡æ–¹å¼å¯ä»¥æ˜¯ UNIX å¥—æ¥å­—æˆ–ç½‘ç»œæ¥å£ã€‚</p>
<ul>
<li>
<p>Docker å®ˆæŠ¤è¿›ç¨‹ï¼ˆ<code>dockerd</code>ï¼‰ç›‘å¬ Docker API è¯·æ±‚ï¼Œå¹¶ç®¡ç† Docker å¯¹è±¡ï¼Œå¦‚é•œåƒã€å®¹å™¨ã€ç½‘ç»œå’Œå·ã€‚å®ˆæŠ¤è¿›ç¨‹è¿˜å¯ä»¥ä¸å…¶ä»–å®ˆæŠ¤è¿›ç¨‹é€šä¿¡ï¼Œä»¥ç®¡ç† Docker æœåŠ¡ã€‚</p>
</li>
<li>
<p>Docker å®¢æˆ·ç«¯ï¼ˆ<code>docker</code>ï¼‰æ˜¯è®¸å¤š Docker ç”¨æˆ·ä¸ Docker äº¤äº’çš„ä¸»è¦æ–¹å¼ã€‚å½“ä½ ä½¿ç”¨ <code>docker run</code> ç­‰å‘½ä»¤æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šå°†è¿™äº›å‘½ä»¤å‘é€ç»™ <code>dockerd</code>ï¼Œç”±å…¶æ‰§è¡Œã€‚<code>docker</code> å‘½ä»¤ä½¿ç”¨ Docker APIã€‚Docker å®¢æˆ·ç«¯å¯ä»¥ä¸å¤šä¸ªå®ˆæŠ¤è¿›ç¨‹é€šä¿¡ã€‚å¦ä¸€ä¸ª Docker å®¢æˆ·ç«¯æ˜¯ Docker Composeï¼Œå®ƒå…è®¸ä½ æ“ä½œç”±ä¸€ç»„å®¹å™¨ç»„æˆçš„åº”ç”¨ç¨‹åºã€‚</p>
</li>
</ul>
<h2 data-id="heading-11">Docker çš„åŸºç¡€ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-12">ç”¨ Dockerfile æ„å»ºé•œåƒ</h3>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼Œæè¿°äº†ä¸€ä¸ªå‰ç«¯é¡¹ç›®çš„ Dockfile</p>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># æŒ‡å®šåŸºç¡€é•œåƒï¼Œä½¿ç”¨å®˜æ–¹ nginx é•œåƒ
FROM nginx:alpine

# åˆ é™¤é»˜è®¤ nginx é™æ€èµ„æº
RUN rm -rf /usr/share/nginx/html/*

# æ‹·è´ web é¡¹ç›®çš„ build  æ–‡ä»¶åˆ° nginx é™æ€ç›®å½•ä¸‹
COPY dist/ /usr/share/nginx/html/

# æ‹·è´è‡ªå®šä¹‰ nginx é…ç½®
COPY default.conf /etc/nginx/conf.d/default.conf

# æš´éœ²ç«¯å£ 80
EXPOSE 80

# è®© NGINX åœ¨å‰å°è¿è¡Œï¼Œé˜²æ­¢ Docker å®¹å™¨å¯åŠ¨åç«‹å³é€€å‡º
CMD [ "nginx" , "-g" , "daemon off;" ]
</code></pre>
<p>å¦‚ä¸Š <code>FROM</code>/<code>RUN</code>/<code>CMD</code> ç­‰æ˜¯ Dockerfile çš„æŒ‡ä»¤</p>

































<table><thead><tr><th>æŒ‡ä»¤</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>FROM</td><td>å®šåˆ¶çš„é•œåƒéƒ½æ˜¯åŸºäºæŸä¸ªåŸºç¡€é•œåƒï¼ŒFROM å°±æ˜¯ç”¨æ¥æŒ‡å®šåŸºç¡€é•œåƒ</td></tr><tr><td>RUN</td><td>åœ¨æ„å»ºè¿‡ç¨‹ä¸­çš„æ‰§è¡Œå‘½ä»¤</td></tr><tr><td>CMD</td><td>åˆ›å»ºå®¹å™¨æ—¶è¦æ‰§è¡Œçš„é»˜è®¤å‘½ä»¤</td></tr><tr><td>COPY</td><td>å¤åˆ¶æŒ‡ä»¤ï¼Œä»ä¸Šä¸‹æ–‡ç›®å½•ä¸­å¤åˆ¶æ–‡ä»¶æˆ–è€…ç›®å½•åˆ°å®¹å™¨å†…æŒ‡å®šè·¯å¾„</td></tr><tr><td>EXPOSE</td><td>å£°æ˜å®¹å™¨è¿è¡Œæ—¶ç›‘å¬çš„ç½‘ç»œç«¯å£</td></tr><tr><td>ENV</td><td>åœ¨å®¹å™¨å†…éƒ¨è®¾ç½®ç¯å¢ƒå˜é‡</td></tr></tbody></table>
<p>æ„å»ºæŒ‡ä»¤</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># ä»¥å½“å‰ç›®å½•ä¸ºä¸Šä¸‹æ–‡æ„å»ºåç§°ä¸º frontend çš„é•œåƒï¼Œå³å½“å‰ç›®å½•éœ€è¦æœ‰ Dockerfile</span>
docker build -t frontend .
</code></pre>
<blockquote>
<p>frontend ä¸ºé•œåƒåç§°ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæ ‡ç­¾å¦‚ frontend:v1ï¼Œfrontend:latestï¼Œ</p>
</blockquote>
<h3 data-id="heading-13">é•œåƒæ¨é€å’Œæ‹‰å–</h3>
<p>å¦‚æœæ˜¯ä¸ºäº†åœ¨å…¶ä»–æœºå™¨ä¸Šä½¿ç”¨é•œåƒï¼Œé‚£æˆ‘ä»¬éœ€è¦ç”¨åˆ°é•œåƒä»“åº“ã€‚</p>
<blockquote>
<p>éœ€è¦ç™»é™†æ‰å¯ä½¿ç”¨è¿›è¡Œæ¨é€æ“ä½œ</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># docker ç™»é™†å‘½ä»¤</span>
docker login [hub URL]
</code></pre>
</blockquote>
<p>å°†æœ¬åœ°é•œåƒæ¨é€åˆ°è¿œç¨‹çš„é•œåƒä»“åº“</p>
<pre><code class="hljs language-sh" lang="sh">docker push my-image:latest
</code></pre>
<p>ä»é•œåƒä»“åº“æ‹‰å–æŒ‡å®šé•œåƒ</p>
<pre><code class="hljs language-sh" lang="sh">docker pull my-image:latest
</code></pre>
<blockquote>
<p>å…³äºæ‹‰å–é•œåƒï¼šæ‹‰å–çš„é•œåƒä¼šå­˜åœ¨æœ¬åœ°ï¼Œç„¶åå½“åŸºäºé•œåƒåˆ›å»ºå®¹å™¨æ—¶ï¼Œå¦‚æœæŒ‡å®šçš„é•œåƒæœ¬åœ°æ²¡æœ‰ï¼Œåˆ™ä¼šé»˜è®¤ä»ä»“åº“æ‹‰å–é•œåƒï¼Œæœ‰åˆ™ä½¿ç”¨æœ¬åœ°é•œåƒã€‚</p>
</blockquote>
<blockquote>
<p>æœ¬åœ°å¯ä»¥å®‰è£…ä½¿ç”¨ Docker Desktopï¼ŒæŸ¥çœ‹é•œåƒã€å®¹å™¨ç­‰ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
</blockquote>
<h3 data-id="heading-14">åŸºäºé•œåƒåˆ›å»ºå®¹å™¨</h3>
<p>åˆ›å»ºå®¹å™¨ä½¿ç”¨ <code>docker run</code> å‘½ä»¤ï¼Œå¦‚å¯åŠ¨ä¸€ä¸ªåŸºäº ubuntu çš„é•œåƒï¼Œå¯åŠ¨ååœ¨å‰å°è¿è¡Œï¼ˆå³å‘½ä»¤è¡Œä¸ä¼šé€€å‡ºï¼‰</p>
<pre><code class="hljs language-sh" lang="sh">docker run ubuntu
</code></pre>
<p>ä¸€èˆ¬æœ‰å‡ ç§åœºæ™¯ï¼š</p>
<p><strong>åå°è¿è¡Œå®¹å™¨</strong></p>
<p>åœ¨åå°è¿è¡Œ ubuntu å®¹å™¨å¹¶è¿”å›å®¹å™¨ ID</p>
<pre><code class="hljs language-sh" lang="sh">docker run -d ubuntu 
</code></pre>
<p><strong>äº¤äº’å¼è¿è¡Œå¹¶åˆ†é…ç»ˆç«¯</strong></p>
<p>ä»¥äº¤äº’æ¨¡å¼è¿è¡Œ ubuntu å®¹å™¨ï¼Œå¹¶å¯åŠ¨ä¸€ä¸ª Bash shell</p>
<pre><code class="hljs language-sh" lang="sh">docker run -it ubuntu /bin/bash
</code></pre>
<p><strong>ä¸´æ—¶å®¹å™¨</strong></p>
<p>å¯åŠ¨ä¸€ä¸ª ubuntu å®¹å™¨ï¼Œæ‰§è¡Œ xxxx å‘½ä»¤ï¼Œå®Œæˆåè‡ªåŠ¨åˆ é™¤å®¹å™¨</p>
<pre><code class="hljs language-sh" lang="sh">docker run --<span class="hljs-built_in">rm</span> ubuntu sh -c <span class="hljs-string">"xxxxx"</span>
</code></pre>
<p>å¦å¤–ä¸€ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„å‚æ•°ï¼š</p>



































<table><thead><tr><th>å‚æ•°</th><th>ç¤ºä¾‹</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>--name</td><td>--name my_container</td><td>æŒ‡å®šå®¹å™¨åç§°ï¼Œä¸æŒ‡å®šçš„è¯ docker ä¼šéšæœºç”Ÿæˆä¸€ä¸ªåç§°</td></tr><tr><td>-p</td><td>-p 8080:80</td><td>ç«¯å£æ˜ å°„ï¼Œä¸»æœºçš„ 8080 ç«¯å£æ˜ å°„ä¸ºå®¹å™¨å†…çš„ 80 ç«¯å£</td></tr><tr><td>-v</td><td>-v /host/data:/container/data</td><td>æŒ‚è½½å·ï¼Œå°†ä¸»æœºçš„ /host/data ç›®å½•æŒ‚è½½åˆ°å®¹å™¨å†…çš„ /container/data ç›®å½•</td></tr><tr><td>-e, --env</td><td>-e MY_ENV=my_value</td><td>è®¾ç½®ç¯å¢ƒå˜é‡ MY_ENV=my_value</td></tr><tr><td>--network</td><td>--network host</td><td>æŒ‡å®šç½‘ç»œæ¨¡å¼</td></tr></tbody></table>
<h3 data-id="heading-15">å®¹å™¨ç®¡ç†</h3>
<p><strong>å®¹å™¨å¯åŠ¨ã€åœæ­¢ã€é‡å¯</strong></p>
<pre><code class="hljs language-sh" lang="sh">docker start my_container
docker stop my_container
docker restart my_container
</code></pre>
<p><strong>åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå·²ç»åœæ­¢å®¹å™¨</strong></p>
<pre><code class="hljs language-sh" lang="sh">docker <span class="hljs-built_in">rm</span> my_container
</code></pre>
<p><strong>åœ¨è¿è¡Œä¸­çš„å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤</strong></p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># åœ¨ my_container å®¹å™¨ä¸­æ‰§è¡Œ ls /app å‘½ä»¤</span>
docker <span class="hljs-built_in">exec</span> my_container <span class="hljs-built_in">ls</span> /app 
</code></pre>
<p><strong>æŸ¥çœ‹å½“å‰è¿è¡Œçš„å®¹å™¨</strong></p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰è¿è¡Œçš„å®¹å™¨</span>
docker ps

<span class="hljs-comment"># æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼ŒåŒ…å«åœæ­¢çš„</span>
docker ps -a

<span class="hljs-comment"># æ˜¾ç¤ºæ‰€æœ‰å®¹å™¨ ID</span>
docker ps -aq

<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹</span>
CONTAINER ID   IMAGE               COMMAND                  CREATED       STATUS       PORTS                                     NAMES
09b4274e4356   project__frontend   <span class="hljs-string">"/docker-entrypoint.â€¦"</span>   3 hours ago   Up 3 hours   0.0.0.0:8081-&gt;80/tcp, [::]:8081-&gt;80/tcp   frontend
30486b3d96d0   project__backend    <span class="hljs-string">"./wait-for-mysql.sh"</span>    3 hours ago   Up 3 hours   1024/tcp                                  backend
929f7bfcf316   project__mysql      <span class="hljs-string">"docker-entrypoint.sâ€¦"</span>   3 hours ago   Up 3 hours   3306/tcp, 33060/tcp                       mysql
6d78b99b0e3b   redis:alpine        <span class="hljs-string">"docker-entrypoint.sâ€¦"</span>   3 hours ago   Up 3 hours   6379/tcp                                  redis
</code></pre>
<p><code>docker ps</code> å¸¸ç”¨æ¥æŸ¥çœ‹æ‰€æœ‰å®¹å™¨çš„è¿è¡ŒçŠ¶æ€ã€‚å®¹å™¨çŠ¶æ€æœ‰ 7 ç§ï¼š</p>
<ul>
<li>
<p><code>created</code>ï¼Œå·²åˆ›å»ºï¼Œä»æœªå¯åŠ¨è¿‡çš„å®¹å™¨</p>
</li>
<li>
<p><code>running</code>ï¼Œè¿è¡Œä¸­ï¼Œé€šè¿‡<code>docker start</code>æˆ–<code>docker run</code>å¯åŠ¨ã€‚</p>
</li>
<li>
<p><code>paused</code>ï¼Œå·²æš‚åœï¼Œé€šè¿‡<code>docker pause</code>æš‚åœã€‚</p>
</li>
<li>
<p><code>restarting</code>ï¼Œé‡å¯ä¸­ï¼Œç”±äºå®¹å™¨æŒ‡å®šçš„é‡å¯ç­–ç•¥è€Œæ­£åœ¨å¯åŠ¨ã€‚</p>
</li>
<li>
<p><code>exited</code>ï¼Œå·²åœæ­¢ï¼Œä¸€ä¸ªä¸å†è¿è¡Œçš„å®¹å™¨ã€‚ä¾‹å¦‚ï¼Œå®¹å™¨å†…çš„è¿›ç¨‹å·²å®Œæˆï¼Œæˆ–è€…å®¹å™¨å·²é€šè¿‡<code>docker stop</code>å‘½ä»¤åœæ­¢ã€‚</p>
</li>
<li>
<p><code>removing</code>ï¼Œåˆ é™¤ä¸­ï¼Œæ‰§è¡Œ<code>docker rm</code>ï¼Œå®¹å™¨æ­£åœ¨è¢«ç§»é™¤</p>
</li>
<li>
<p><code>dead</code>ï¼Œå·²å¤±æ•ˆï¼Œä¾‹å¦‚ï¼Œç”±äºå¤–éƒ¨è¿›ç¨‹å ç”¨èµ„æºè€Œä»…è¢«éƒ¨åˆ†ç§»é™¤çš„å®¹å™¨ã€‚<code>dead</code>çš„å®¹å™¨æ— æ³•ï¼ˆé‡æ–°ï¼‰å¯åŠ¨ï¼Œåªèƒ½è¢«ç§»é™¤</p>
</li>
</ul>
<p><strong>æŸ¥çœ‹å®¹å™¨è¿è¡Œçš„æ—¥å¿—</strong></p>
<pre><code class="hljs language-sh" lang="sh">docker logs my_container

<span class="hljs-comment"># è·Ÿéšæ—¥å¿—ï¼Œç±»ä¼¼äº tail -f</span>
docker logs -f my_container 
</code></pre>
<p><strong>æŸ¥çœ‹å®¹å™¨ç«¯å£æ˜ å°„ä¿¡æ¯</strong></p>
<pre><code class="hljs language-sh" lang="sh">docker port my_container

<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹</span>
80/tcp -&gt; 0.0.0.0:8081  <span class="hljs-comment"># ipv4</span>
80/tcp -&gt; [::]:8081     <span class="hljs-comment"># ipv6</span>
</code></pre>
<h2 data-id="heading-16">Docker Compose çš„ä½¿ç”¨åœºæ™¯</h2>
<p>å®é™…ä¸€ä¸ªé¡¹ç›®ï¼Œå¯èƒ½ä¼šæœ‰å¤šä¸ªæœåŠ¡ç»„æˆï¼Œå³å®Œæ•´è¿è¡Œä¸€ä¸ªæœåŠ¡å¯èƒ½ä¼šåŸºäºå¤šä¸ªé•œåƒè¿è¡Œå¤šä¸ªå®¹å™¨ï¼ŒåŒ…å«è‹¥å¹²é…ç½®ï¼Œä»¥åŠå¤šä¸ªå®¹å™¨åä½œéœ€è¦åˆ›å»ºç½‘ç»œç­‰ã€‚docker compose å°±æ˜¯é’ˆå¯¹è¿™ç§æƒ…å†µçš„è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡ <code>docker-compose.yml</code> æ–‡ä»¶å¯ä»¥é…ç½®å¤šä¸ªå®¹å™¨ç»„æˆçš„æœåŠ¡ï¼Œä»¥åŠå®ƒä»¬ä¾èµ–çš„ç½‘ç»œé…ç½®ç­‰ã€‚ç„¶åå¯ä»¥ç”¨ä¸€ä¸ªå‘½ä»¤å°±èƒ½å¯åŠ¨è¿™ä¸ªå¤šå®¹å™¨çš„é¡¹ç›®ã€‚</p>
<h3 data-id="heading-17">docker-compose.yml</h3>
<p>å¦‚ä¸‹æ‰€ç¤ºï¼Œdocker-compose.yml å®šä¹‰äº† 5 ä¸ªæœåŠ¡ï¼ŒåŒ…å«æ•°æ®åº“æœåŠ¡ã€åç«¯æœåŠ¡ã€å‰ç«¯æœåŠ¡</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">services:</span>  <span class="hljs-comment"># æœåŠ¡é…ç½®</span>
  <span class="hljs-attr">mysql:</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">mysql</span> <span class="hljs-comment"># å®¹å™¨åç§°</span>
    <span class="hljs-attr">build:</span> <span class="hljs-string">./mysql</span>             <span class="hljs-comment"># æ„å»ºç›®å½•</span>
    <span class="hljs-attr">platform:</span> <span class="hljs-string">linux/amd64</span>      <span class="hljs-comment"># æ¶æ„ç±»å‹</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">project__mysql</span>  <span class="hljs-comment"># é•œåƒåç§°ï¼ˆæœ¬åœ°æ„å»ºå¯ä¸éœ€è¦ï¼‰</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>   <span class="hljs-comment"># é‡å¯ç­–ç•¥</span>
    <span class="hljs-attr">volumes:</span>          <span class="hljs-comment"># ä¾èµ–å·</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql-data:/var/lib/mysql</span>

  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">redis</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">redis:alpine</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">redis-data:/data</span>

  <span class="hljs-attr">backend:</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">backend</span>
    <span class="hljs-attr">build:</span> <span class="hljs-string">./backend</span>
    <span class="hljs-attr">platform:</span> <span class="hljs-string">linux/amd64</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">project__backend</span>
    <span class="hljs-attr">depends_on:</span>     <span class="hljs-comment"># å¯åŠ¨é¡ºåºä¾èµ–</span>
      <span class="hljs-attr">mysql:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">service_healthy</span>
      <span class="hljs-attr">redis:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">service_started</span>

  <span class="hljs-attr">frontend:</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">frontend</span>
    <span class="hljs-attr">build:</span> <span class="hljs-string">./frontend</span>
    <span class="hljs-attr">platform:</span> <span class="hljs-string">linux/amd64</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">project__frontend</span>
    <span class="hljs-attr">ports:</span>     <span class="hljs-comment"># ç«¯å£æ˜ å°„</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8081:80"</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">backend</span>

  <span class="hljs-attr">frontend-admin:</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">frontend_admin</span>
    <span class="hljs-attr">build:</span> <span class="hljs-string">./frontend-admin</span>
    <span class="hljs-attr">platform:</span> <span class="hljs-string">linux/amd64</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">project__frontend-admin</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"8082:80"</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">backend</span>

<span class="hljs-attr">volumes:</span>   <span class="hljs-comment"># å·é…ç½®</span>
  <span class="hljs-attr">mysql-data:</span>
  <span class="hljs-attr">redis-data:</span>
</code></pre>
<p>docker-compose.yml æ‰€å¤„ç›®å½•çš„ä¸Šä¸‹æ–‡ç¤ºæ„ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">.
|-mysql
|  |-Dockerfile
|  `<span class="hljs-built_in">-</span>(other files)
|-backend
|  |-Dockerfile
|  `<span class="hljs-built_in">-</span>(other files)
|-frontend
|  |-Dockerfile
|  `<span class="hljs-built_in">-</span>(other files)
|-frontend-admin
|  |-Dockerfile
|  `<span class="hljs-built_in">-</span>(other files)
`-docker-compose<span class="hljs-selector-class">.yml</span>
</code></pre>
<h3 data-id="heading-18">æ„å»ºä¸æ¨é€é•œåƒ</h3>
<p><strong>æ„å»º</strong></p>
<p>å«æœ‰ <code>build</code> é…ç½®çš„æœåŠ¡ï¼Œä¼šè‡ªåŠ¨ä¾èµ–å…¶æ‰€æŒ‡å®šçš„ç›®å½•è¿›è¡Œæ„å»ºï¼ŒæŒ‡å®šç›®å½•ä¸‹éœ€åŒ…å« <code>Dockerfile</code></p>
<pre><code class="hljs language-sh" lang="sh">docker compose build
</code></pre>
<p><strong>æ¨é€</strong></p>
<p>æ„å»ºå®Œæˆåï¼Œå¯ä»¥å°†æ„å»ºå®Œæˆçš„é•œåƒè‡ªåŠ¨æ¨é€åˆ°é•œåƒä»“åº“ï¼Œå³å«æœ‰ <code>build</code> é…ç½®çš„é¡¹ä¼šè‡ªåŠ¨æ¨é€åˆ° <code>image</code> å®šä¹‰çš„é•œåƒä½ç½®ï¼ˆå½“ç„¶é•œåƒä»“åº“æ˜¯æœ‰æƒé™æ§åˆ¶çš„ï¼‰</p>
<pre><code class="hljs language-sh" lang="sh">docker compose push
</code></pre>
<h3 data-id="heading-19">å¯åŠ¨å‘½ä»¤ä¸è¿‡ç¨‹</h3>
<p><strong>å¯åŠ¨å‘½ä»¤</strong></p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># å¯åŠ¨æœåŠ¡åœ¨å‰å°è¿è¡Œï¼Œä¸€æ—¦é€€å‡ºåˆ™æœåŠ¡åœæ­¢</span>
docker compose up 

<span class="hljs-comment"># å¯åŠ¨æœåŠ¡åœ¨åå°è¿è¡Œ</span>
docker compose up -d
</code></pre>
<p><strong>å¯åŠ¨çš„å…·ä½“è¿‡ç¨‹</strong></p>
<ol>
<li>
<p>å‰æœŸå‡†å¤‡ä¸éªŒè¯</p>
<ol>
<li>è¯»å– Compose æ–‡ä»¶</li>
<li>éªŒè¯é…ç½®ï¼Œæ£€æŸ¥ YAML è¯­æ³•ã€æœåŠ¡å®šä¹‰ã€ç½‘ç»œã€å·ç­‰é…ç½®æ˜¯å¦æ­£ç¡®ã€‚</li>
<li>é¡¹ç›®ç¯å¢ƒï¼Œç¡®å®šé¡¹ç›®åç§°ï¼ˆé»˜è®¤æ˜¯å½“å‰ç›®å½•åï¼Œå¯é€šè¿‡ <code>-p</code> æŒ‡å®šï¼‰ã€‚</li>
</ol>
</li>
<li>
<p>æ„å»ºä¸æ‹‰å–é•œåƒ</p>
<ol>
<li>å¦‚æœé…ç½®äº† <code>build</code>ï¼Œä¼šæ„å»ºé•œåƒï¼Œå¦‚æœæœ¬åœ°æ„å»ºè¿‡ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼Œå¦åˆ™ä¼šè¿›è¡Œæ„å»ºï¼Œå¦‚æœé…ç½®äº† <code>--build</code> åˆ™ä¼šä½¿ç”¨è¿›è¡Œæ„å»ºã€‚</li>
<li>å¦‚æœé…ç½®äº† <code>image</code>ï¼Œä¼šæ‹‰å–é•œåƒï¼Œå¦‚æœæœ¬åœ°ä¸å­˜åœ¨å°±ä¼šä»é•œåƒä»“åº“æ‹‰å–ï¼Œå¦‚æœé…ç½®äº† <code>--pull=always</code> ä¼šå§‹ç»ˆä»é•œåƒä»“åº“æ‹‰å–ã€‚</li>
</ol>
</li>
<li>
<p>åˆ›å»ºç½‘ç»œå’Œå·</p>
<ol>
<li>åˆ›å»ºç½‘ç»œï¼šæ ¹æ® <code>networks</code> éƒ¨åˆ†åˆ›å»ºè‡ªå®šä¹‰ç½‘ç»œã€‚é»˜è®¤ä¼šä¸ºæ•´ä¸ªé¡¹ç›®åˆ›å»ºä¸€ä¸ªåä¸º <code>{project-name}_default</code> çš„ç½‘ç»œï¼Œæ‰€æœ‰æœåŠ¡éƒ½ä¼šè¿æ¥åˆ°è¿™ä¸ªç½‘ç»œï¼Œä»¥ä¾¿é€šè¿‡æœåŠ¡åè¿›è¡Œé€šä¿¡ã€‚</li>
<li>åˆ›å»ºå·ï¼šæ ¹æ® <code>volumes</code> éƒ¨åˆ†åˆ›å»ºå‘½åçš„æŒä¹…åŒ–å·ã€‚å¦‚æœå·å·²å­˜åœ¨ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ã€‚</li>
</ol>
</li>
<li>
<p>å¯åŠ¨æœåŠ¡ï¼ˆå®¹å™¨ï¼‰</p>
<ol>
<li>
<p>æŒ‰ä¾èµ–é¡ºåºå¯åŠ¨ï¼Œä¼šæ ¹æ® <code>depends_on</code> é…ç½®æ¥ç¡®å®šå¯åŠ¨é¡ºåºã€‚</p>
<ol>
<li>ä¾‹å¦‚ï¼Œä¸€ä¸ª <code>web</code> æœåŠ¡ä¾èµ– <code>db</code> æœåŠ¡ï¼Œé‚£ä¹ˆ Compose ä¼šå…ˆå¯åŠ¨ <code>db</code>ï¼Œç„¶åå†å¯åŠ¨ <code>web</code>ã€‚ä½†æ³¨æ„ <code>depends_on</code> åªèƒ½å†³å®šå¯åŠ¨é¡ºåºï¼Œå¹¶ä¸èƒ½ä¿è¯ <code>web</code> å¯åŠ¨æ—¶ <code>db</code> å·²ç»æ­£å¸¸è¿è¡Œ</li>
</ol>
</li>
<li>
<p>å®¹å™¨åˆ›å»ºï¼šä¸ºæ¯ä¸ªæœåŠ¡åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨ï¼Œè¿™ç›¸å½“äºå¯¹æ¯ä¸ªæœåŠ¡æ‰§è¡Œ <code>docker run</code></p>
</li>
<li>
<p>é‡å¯ç­–ç•¥ï¼šä¼šæ ¹æ® <code>restart</code> ç­–ç•¥æ¥ç®¡ç†å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸ</p>
</li>
</ol>
</li>
<li>
<p>æœåŠ¡å¥åº·æ£€æŸ¥ï¼ˆå¦‚æœé…ç½®äº† <code>healthcheck</code>ï¼‰</p>
<ol>
<li>
<p>ç­‰å¾…å¥åº·çŠ¶æ€ï¼šå¦‚æœæœåŠ¡é…ç½®äº†å¥åº·æ£€æŸ¥ï¼ˆ<code>healthcheck</code>ï¼‰ï¼ŒCompose ä¼šç­‰å¾…å®¹å™¨å˜ä¸º healthy çŠ¶æ€ï¼Œç„¶åå†å¯åŠ¨ä¾èµ–äºå®ƒçš„ä¸‹ä¸€ä¸ªæœåŠ¡ã€‚</p>
</li>
<li>
<p>ä¸ <code>depends_on</code> çš„åŒºåˆ«ï¼š</p>
<ul>
<li><code>depends_on</code> åªæ§åˆ¶å¯åŠ¨é¡ºåºï¼ˆå®¹å™¨è¿›ç¨‹è¿è¡Œï¼‰ã€‚</li>
<li><code>healthcheck</code> + <code>condition: service_healthy</code> æ§åˆ¶å°±ç»ªé¡ºåºï¼ˆå®¹å™¨å†…åº”ç”¨çœŸæ­£å‡†å¤‡å¥½æ¥æ”¶è¯·æ±‚ï¼‰ã€‚è¿™æ˜¯æ›´å¯é çš„æ–¹å¼</li>
</ul>
</li>
</ol>
</li>
<li>
<p>åç»­</p>
<ol>
<li>
<p>å‰å°æ¨¡å¼ï¼šä¼šç”¨ä¸€ä¸ªå½©è‰²çš„è¾“å‡ºæµè¾“å‡ºæ‰€æœ‰æœåŠ¡çš„æ—¥å¿—ï¼ŒæŒ‰ä¸‹ <code>Ctrl+C</code> ä¼šåœæ­¢æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„æœåŠ¡</p>
</li>
<li>
<p>åå°æ¨¡å¼ï¼ˆ<code>-d</code> å‚æ•°ï¼‰ï¼šå¯åŠ¨å‘½ä»¤ä¼šç«‹å³è¿”å›ï¼Œåªæ‰“å°å‡ºåˆ›å»ºäº†å“ªäº›å®¹å™¨ã€‚ä¹‹åå¯ä»¥ç”¨<code>docker compose logs</code> æ¥æŸ¥çœ‹æ—¥å¿—ï¼Œä½¿ç”¨ <code>docker compose ps</code> æŸ¥çœ‹çŠ¶æ€ã€‚</p>
</li>
</ol>
</li>
</ol>
<p><strong>ä½¿ç”¨å¯åŠ¨å‘½ä»¤æ—¶å¸¸ç”¨çš„ä¸€äº›å‚æ•°</strong></p>






























<table><thead><tr><th>å‚æ•°</th><th>ç¤ºä¾‹</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>-f</td><td>docker compose -f xxx.yml up</td><td>ç”¨äºæŒ‡å®šæŸä¸ª docker compose yml é…ç½®å¯åŠ¨ï¼Œé»˜è®¤æ˜¯å½“å‰ç›®å½•ä¸‹çš„ docker-compose.yml æ–‡ä»¶</td></tr><tr><td>-p</td><td>docker compose -p app up</td><td>æŒ‡å®šå¯åŠ¨é¡¹ç›®åç§°ï¼Œé»˜è®¤æ˜¯ä»¥å½“å‰çš„ç›®å½•å</td></tr><tr><td>--build</td><td>docker compose up --build</td><td>å¯åŠ¨æ—¶å¼ºåˆ¶é‡æ–°æ„å»ºé•œåƒï¼Œå³ä½¿é•œåƒå·²å­˜åœ¨</td></tr><tr><td>--pull</td><td>docker compose up --pull=</td><td>æŒ‡å®šå¯åŠ¨å‰æ‹‰é•œåƒçš„ç­–ç•¥ï¼Œ <br/>- <code>always</code>ï¼Œæ€»æ˜¯ä»è¿œç¨‹æ‹‰é•œåƒï¼Œå³ä½¿æœ¬åœ°å·²ç»æœ‰äº†ï¼Œä¿è¯è¿è¡Œæ—¶æ˜¯æœ€æ–°é•œåƒ <br/>-   <code>missing</code>ï¼Œï¼ˆé»˜è®¤å€¼ï¼‰å¦‚æœæœ¬åœ°ä¸å­˜åœ¨æŒ‡å®šçš„é•œåƒï¼Œåˆ™ä»ä»“åº“æ‹‰å–ã€‚å¦‚æœæœ¬åœ°å·²å­˜åœ¨ï¼Œåˆ™ç›´æ¥ä½¿ç”¨æœ¬åœ°é•œåƒ <br/>-   <code>never</code>ï¼Œä»ä¸æ‹‰å–é•œåƒã€‚å¦‚æœæœ¬åœ°ä¸å­˜åœ¨è¯¥é•œåƒï¼Œåˆ™å‘½ä»¤å¤±è´¥</td></tr></tbody></table>
<h3 data-id="heading-20">è¿ç»´ï¼šæŸ¥çœ‹ã€åœæ­¢</h3>
<p><strong>æŸ¥çœ‹æ—¥å¿—</strong></p>
<pre><code class="hljs language-sh" lang="sh">docker compose logs 
</code></pre>
<p><strong>åœæ­¢å¹¶åˆ é™¤ docker compose æ‰€åˆ›å»ºçš„å®¹å™¨</strong></p>
<pre><code class="hljs language-sh" lang="sh">docker compose down
</code></pre>
<p><strong>é‡å¯ docker compose æ‰€åˆ›å»ºçš„å®¹å™¨</strong></p>
<pre><code class="hljs language-sh" lang="sh">docker compose restart
</code></pre>
<h2 data-id="heading-21">ç½‘ç»œ Network</h2>
<h3 data-id="heading-22">ç½‘ç»œæ¨¡å¼</h3>
<p>å®‰è£… Docker æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨åˆ›å»ºä¸‰ä¸ªç½‘ç»œï¼Œbridgeï¼ˆåˆ›å»ºå®¹å™¨é»˜è®¤è¿æ¥åˆ°æ­¤ç½‘ç»œï¼‰ã€ none ã€hostã€‚</p>
<p>è¿è¡Œå®¹å™¨æ—¶ï¼Œå¯ä»¥æŒ‡å®šå®¹å™¨è¿è¡Œçš„ç½‘ç»œæ¨¡å¼ã€‚</p>
<ul>
<li>
<p>Host</p>
<ul>
<li>é€šè¿‡ <code>--network=host</code> æŒ‡å®š</li>
<li>å®¹å™¨å°†ä¸ä¼šè™šæ‹Ÿå‡ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„IPç­‰ï¼Œè€Œæ˜¯ä½¿ç”¨å®¿ä¸»æœºçš„IPå’Œç«¯å£</li>
</ul>
</li>
<li>
<p>Bridge</p>
<ul>
<li>é€šè¿‡Â <code>--network=bridge</code>Â æŒ‡å®šï¼Œå¦‚æœä¸æŒ‡å®šï¼Œä¼šé»˜è®¤ä»¥ brdge æ¨¡å¼</li>
<li>ä¸ºæ¯ä¸€ä¸ªå®¹å™¨åˆ†é…ã€è®¾ç½®IPç­‰ï¼Œå¹¶å°†å®¹å™¨è¿æ¥åˆ°ä¸€ä¸ª docker0 è™šæ‹Ÿç½‘æ¡¥ï¼Œé€šè¿‡ docker0 ç½‘æ¡¥ä»¥åŠ Iptables nat è¡¨é…ç½®ä¸å®¿ä¸»æœºé€šä¿¡</li>
</ul>
</li>
<li>
<p>None</p>
<ul>
<li>é€šè¿‡Â <code>--network=none</code>Â æŒ‡å®š</li>
<li>å…³é—­å®¹å™¨çš„ç½‘ç»œåŠŸèƒ½</li>
</ul>
</li>
<li>
<p>Container</p>
<ul>
<li>é€šè¿‡Â <code>--network=container:NAME_or_ID</code>Â æŒ‡å®š</li>
<li>åˆ›å»ºçš„å®¹å™¨ä¸ä¼šåˆ›å»ºè‡ªå·±çš„ç½‘å¡ï¼Œé…ç½®è‡ªå·±çš„IPï¼Œè€Œæ˜¯å’Œä¸€ä¸ªæŒ‡å®šçš„å®¹å™¨å…±äº«IPã€ç«¯å£èŒƒå›´ã€‚</li>
</ul>
</li>
<li>
<p>æŒ‡å®šè‡ªå®šä¹‰ç½‘ç»œ</p>
</li>
</ul>
<h3 data-id="heading-23">ç›¸å…³å‘½ä»¤</h3>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰ç½‘ç»œ</span>
docker network <span class="hljs-built_in">ls</span>
<span class="hljs-comment"># åˆ›å»ºä¸€ä¸ªæ–°çš„ç½‘ç»œ</span>
docker network create &lt;network&gt;
<span class="hljs-comment"># åˆ é™¤æŒ‡å®šçš„ç½‘ç»œ</span>
docker network <span class="hljs-built_in">rm</span> &lt;network&gt;
<span class="hljs-comment"># è¿æ¥å®¹å™¨åˆ°ç½‘ç»œ</span>
docker network connect &lt;network&gt; &lt;container&gt;
<span class="hljs-comment"># æ–­å¼€å®¹å™¨ä¸ç½‘ç»œçš„è¿æ¥</span>
docker network disconnect &lt;network&gt; &lt;container&gt;
</code></pre>
<h2 data-id="heading-24">å· Volume</h2>
<p>å·æ˜¯å®¹å™¨çš„æŒä¹…æ€§æ•°æ®å­˜å‚¨ï¼Œç”± Docker åˆ›å»ºå’Œç®¡ç†ã€‚å¯ä»¥ä½¿ç”¨<code>docker volume create</code>å‘½ä»¤æ˜¾å¼åˆ›å»ºå·ï¼ŒDocker ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºå®¹å™¨æˆ–æœåŠ¡æ—¶åˆ›å»ºå·ã€‚</p>
<p>åˆ›å»ºå·æ—¶ï¼Œå®ƒä¼šå­˜å‚¨åœ¨ Docker ä¸»æœºä¸Šçš„ä¸€ä¸ªç›®å½•ä¸­ã€‚å°†å·æŒ‚è½½åˆ°å®¹å™¨æ—¶ï¼ŒæŒ‚è½½åˆ°å®¹å™¨ä¸­çš„å°±æ˜¯è¿™ä¸ªç›®å½•ã€‚è¿™ä¸ç»‘å®šæŒ‚è½½çš„å·¥ä½œæ–¹å¼ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºå·ç”± Docker ç®¡ç†ï¼Œå¹¶ä¸”ä¸ä¸»æœºçš„æ ¸å¿ƒåŠŸèƒ½éš”ç¦»å¼€æ¥ã€‚</p>
<p>å·ç›¸å…³çš„å‘½ä»¤</p>
<pre><code class="hljs language-sh" lang="sh"><span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰å·</span>
docker volume <span class="hljs-built_in">ls</span>
<span class="hljs-comment">#ã€€åˆ›å»ºä¸€ä¸ªæ–°çš„å·</span>
docker volume create &lt;volume&gt;
<span class="hljs-comment"># åˆ é™¤æŒ‡å®šçš„å·</span>
docker volume <span class="hljs-built_in">rm</span> &lt;volume&gt;
<span class="hljs-comment"># æ˜¾ç¤ºå·çš„è¯¦ç»†ä¿¡æ¯</span>
docker volume inspect &lt;volume&gt;
</code></pre>
<h2 data-id="heading-25">Docker in Docker ï¼ˆDinDï¼‰</h2>
<p>Docker in Dockerï¼ˆç®€ç§° DinDï¼‰æŒ‡çš„æ˜¯åœ¨ä¸€ä¸ª Docker å®¹å™¨å†…éƒ¨è¿è¡Œä¸€ä¸ªå®Œæ•´çš„ Docker å®ˆæŠ¤è¿›ç¨‹ï¼ˆDocker Daemonï¼‰å’Œå®¢æˆ·ç«¯ï¼ˆDocker CLIï¼‰ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯â€œå®¹å™¨é‡Œçš„å®¹å™¨â€ã€‚ä½ å¯ä»¥åœ¨ä¸€ä¸ªå®¹å™¨ä¸­æ‰§è¡Œ <code>docker build</code>ã€<code>docker run</code> ç­‰å‘½ä»¤ï¼Œå°±åƒåœ¨å®¿ä¸»æœºä¸Šä¸€æ ·ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨å®˜æ–¹çš„ <code>docker:dind</code> é•œåƒè¿›è¡Œæ„å»ºã€‚è¿™ä¸ªé•œåƒç»è¿‡ç‰¹æ®Šé…ç½®ï¼Œå¯ä»¥åœ¨å®¹å™¨å†…å¯åŠ¨å¹¶è¿è¡Œ Docker å®ˆæŠ¤è¿›ç¨‹ã€‚è¿è¡Œæ­¤ç±»å®¹å™¨é€šå¸¸éœ€è¦ <code>--privileged</code>ï¼ˆç‰¹æƒï¼‰æ¨¡å¼ã€‚</p>
<p><strong>ä¼˜ç‚¹</strong></p>
<ul>
<li>
<p>ç¯å¢ƒéš”ç¦»ï¼šæ„å»ºç¯å¢ƒä¸å®¿ä¸»æœºå®Œå…¨éš”ç¦»ï¼Œéå¸¸å¹²å‡€ï¼Œä¸ä¼šç›¸äº’æ±¡æŸ“ã€‚</p>
</li>
<li>
<p>å®‰å…¨æ€§ç›¸å¯¹è¾ƒé«˜ï¼šä¸ DoD ç›¸æ¯”ï¼Œå®ƒå¯¹å®¿ä¸»æœºçš„å½±å“æ›´å°ï¼Œè¿›ç¨‹å’Œæ–‡ä»¶ç³»ç»Ÿéƒ½æ˜¯éš”ç¦»çš„ã€‚</p>
</li>
</ul>
<p><strong>ç¼ºç‚¹</strong></p>
<ul>
<li>
<p>æ€§èƒ½å¼€é”€å¤§ï¼šåœ¨å®¹å™¨å†…è¿è¡Œå®Œæ•´çš„ Docker å®ˆæŠ¤è¿›ç¨‹å’Œå­˜å‚¨é©±åŠ¨ï¼ˆé€šå¸¸ä½¿ç”¨æ•ˆç‡è¾ƒä½çš„ <code>vfs</code>ï¼‰ï¼Œèµ„æºå ç”¨é«˜ã€‚</p>
</li>
<li>
<p>æ— æ³•å…±äº«ç¼“å­˜ï¼šæ¯æ¬¡å¯åŠ¨ä¸€ä¸ª DinD å®¹å™¨ï¼Œéƒ½æ˜¯ä¸€ä¸ªå…¨æ–°çš„ç¯å¢ƒï¼Œä¹‹å‰æ„å»ºçš„é•œåƒç¼“å­˜ä¼šä¸¢å¤±ï¼Œå¯¼è‡´æ„å»ºé€Ÿåº¦æ…¢ã€‚</p>
</li>
</ul>
<p><strong>ä¸šåŠ¡åœºæ™¯</strong></p>
<p>ä¸šåŠ¡ä¸­éœ€è¦é€šè¿‡ docker compose å¯åŠ¨å¤šä¸ªå®¹å™¨ï¼Œè€Œéƒ¨ç½²ç¯å¢ƒçš„å®¹å™¨ä¸­ä½¿ç”¨äº† host çš„ç½‘ç»œæ¨¡å¼ï¼Œå†…éƒ¨å†ä½¿ç”¨ docker compose å¯åŠ¨ä¼šé»˜è®¤åˆ›å»ºç½‘ç»œï¼Œç”±äºè¦éƒ¨ç½²çš„ç¯å¢ƒä¼—å¤šï¼Œè¿™ä¼šå¯¼è‡´ host ç½‘ç»œæ— æ³•åˆ†é…çš„é—®é¢˜ã€‚æ­¤æ—¶éœ€è¦ä½¿ç”¨ Docker in Docker çš„æ–¹å¼è¿›è¡Œéƒ¨ç½²ï¼Œéš”ç»é¡¹ç›®ç½‘ç»œä¸éƒ¨ç½²ç¯å¢ƒçš„ç½‘ç»œã€‚</p>
<h2 data-id="heading-26">ç»“è¯­</h2>
<p>ä»¥ä¸Šæ˜¯ä¸šåŠ¡ä¸­ä½¿ç”¨åˆ°çš„ Docker çŸ¥è¯†çš„ç®€å•æ€»ç»“ï¼Œæœ¬æ–‡å¯¹ Docker ç›¸å…³çŸ¥è¯†çš„å¤šä¸ªæ–¹é¢å‡æœ‰æ¶‰åŠï¼Œä½†å—é™äºç¯‡å¹…å’Œå®šä½ï¼Œå„éƒ¨åˆ†å†…å®¹çš„æ¢è®¨å°šå±æµ…æ˜¾ã€‚è‹¥å¸Œæœ›æ·±å…¥ç†è§£ Docker çš„åº•å±‚åŸç†ã€é«˜çº§åº”ç”¨åŠæœ€ä½³å®è·µï¼Œå¯è¿›ä¸€æ­¥é˜…è¯»ä¸“ä¸šæŠ€æœ¯æ–‡æ¡£å¦‚ Docker å®˜æ–¹ç½‘ç«™ç­‰ï¼Œä»¥è·å–æ›´ç³»ç»Ÿã€å…¨é¢çš„çŸ¥è¯†ä½“ç³»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Blog-SSR ç³»ç»Ÿæ“ä½œæ‰‹å†Œ(v1.0.0)]]></title>    <link>https://juejin.cn/post/7593139476840955910</link>    <guid>https://juejin.cn/post/7593139476840955910</guid>    <pubDate>2026-01-09T13:02:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593139476840955910" data-draft-id="7593098101432516662" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Blog-SSR ç³»ç»Ÿæ“ä½œæ‰‹å†Œ(v1.0.0)"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-09T13:02:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å½­æ¶›361"/> <meta itemprop="url" content="https://juejin.cn/user/550189444378333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Blog-SSR ç³»ç»Ÿæ“ä½œæ‰‹å†Œ(v1.0.0)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/550189444378333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å½­æ¶›361
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T13:02:11.000Z" title="Fri Jan 09 2026 13:02:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»44åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Blog-SSR ç³»ç»Ÿæ“ä½œæ‰‹å†Œ(v1.0.0)</h2>
<h3 data-id="heading-1">ğŸ“– æ–‡æ¡£æ¦‚è¿°</h3>
<p>æœ¬æ–‡æ¡£æ˜¯ Blog-SSR ç³»ç»Ÿçš„å®Œæ•´æ“ä½œæ‰‹å†Œï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…ä»é›¶å¼€å§‹æ­å»ºå’Œè¿è¡Œæ•´ä¸ªåšå®¢ç³»ç»Ÿã€‚ç³»ç»Ÿé‡‡ç”¨ç°ä»£åŒ–çš„å…¨æ ˆæŠ€æœ¯æ ˆï¼ŒåŒ…å«å‰åç«¯åˆ†ç¦»æ¶æ„ã€SSRä¼˜åŒ–ã€Dockerå®¹å™¨åŒ–éƒ¨ç½²ç­‰ç‰¹æ€§ã€‚</p>
<blockquote>
<p>æ³¨: æ“ä½œæ‰‹å†Œ æ˜¯ä¸€æ­¥ä¸€æ­¥çš„é¡¹ç›®æ¡†æ¶æ­å»ºè¯´æ˜, æš‚æ—¶å¿‹å®Œæˆäº†æ ¸å¿ƒåŠŸèƒ½, å…¶ä½™å¼€å‘ä¸­çš„åŠŸèƒ½è¿˜åœ¨è¡¥å……ä¸­.</p>
</blockquote>
<blockquote>
<p>æ³¨: æ“ä½œæ‰‹å†Œ æ˜¯ä¸€æ­¥ä¸€æ­¥çš„é¡¹ç›®æ¡†æ¶æ­å»ºè¯´æ˜, è¿™é‡Œå‡ºç°çš„ä»£ç  æ˜¯å‚è€ƒé¡¹ç›®æºç (ä¸‹è½½åœ°å€: <code>git clone https://github.com/pengtaohenry1213-prog/Blog</code>), æ‰€ä»¥æœ‰äº›éƒ¨åˆ†çš„ä»£ç ç•¥æœ‰å·®å¼‚, è¿™ç‚¹è¦æ³¨æ„.</p>
</blockquote>
<h4 data-id="heading-2">ğŸ¯ é€‚ç”¨è¯»è€…</h4>
<ul>
<li>æ–°åŠ å…¥é¡¹ç›®çš„å¼€å‘è€…</li>
<li>éœ€è¦ä»é›¶æ­å»ºé¡¹ç›®çš„å·¥ç¨‹å¸ˆ</li>
<li>è¿ç»´äººå‘˜è¿›è¡Œç³»ç»Ÿéƒ¨ç½²</li>
</ul>
<h4 data-id="heading-3">ğŸ¯ é¡¹ç›®å½“å‰çŠ¶æ€</h4>
<p><strong>å·²å®Œæˆçš„æ ¸å¿ƒåŠŸèƒ½ï¼š</strong></p>
<ul>
<li>âœ… å®Œæ•´çš„Dockerå®¹å™¨åŒ–ç¯å¢ƒ</li>
<li>âœ… JWTç”¨æˆ·è®¤è¯ç³»ç»Ÿï¼ˆåŒ…å«å‰ç«¯ç™»å½•ç•Œé¢ï¼‰</li>
<li>âœ… MySQL + Redisæ•°æ®å­˜å‚¨</li>
<li>âœ… Expressåç«¯APIæ¡†æ¶</li>
<li>âœ… Nginxåå‘ä»£ç†é…ç½®</li>
<li>âœ… å‰åç«¯åŸºç¡€æ¶æ„
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"/> å‰ç«¯ç™»å½•é¡µé¢å¯æ­£å¸¸ä½¿ç”¨</li>
<li class="task-list-item"><input type="checkbox" checked="checked" disabled="disabled"/> åç«¯ API æ¥å£å“åº”æ­£å¸¸</li>
</ul>
</li>
</ul>
<p><strong>å¼€å‘ä¸­çš„åŠŸèƒ½ï¼š</strong></p>
<ul>
<li>ğŸš§ æ–‡ç« ç®¡ç†ç³»ç»Ÿï¼ˆåç«¯æ¨¡å‹å’ŒAPIï¼‰</li>
<li>ğŸš§ å‰ç«¯ç®¡ç†åå°å®Œæ•´åŠŸèƒ½</li>
<li>ğŸš§ Nuxt SSRå‰å°é¡µé¢</li>
</ul>
<p><strong>âš ï¸ éœ€è¦è¡¥å……çš„åŠŸèƒ½ï¼š</strong></p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ–‡ç« æ¨¡å‹å®šä¹‰å’Œæ•°æ®åº“è¿ç§»</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ–‡ç« ç®¡ç† API æ¥å£</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å‰ç«¯æ–‡ç« ç®¡ç†ç•Œé¢</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ç”¨æˆ·æƒé™ç®¡ç†</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> ç»Ÿè®¡æ•°æ®å±•ç¤º</li>
</ul>
<h4 data-id="heading-4">ğŸ“‹ å‰ç½®è¦æ±‚</h4>
<ul>
<li>ç†Ÿæ‚‰ Node.js å¼€å‘ç¯å¢ƒ</li>
<li>äº†è§£ Docker å’Œå®¹å™¨åŒ–æ¦‚å¿µ</li>
<li>å…·å¤‡åŸºæœ¬çš„ Linux/macOS å‘½ä»¤è¡Œæ“ä½œèƒ½åŠ›</li>
</ul>
<h4 data-id="heading-5">ğŸ¯ å¼€å‘å·¥ä½œæµé€‰æ‹©æŒ‡å—</h4>
<p><strong>é‡è¦æé†’ï¼šå¼€å‘é˜¶æ®µä¼˜å…ˆä½¿ç”¨æœ¬åœ°å¼€å‘æ¨¡å¼</strong></p>
<h5 data-id="heading-6">å¼€å‘ç¯å¢ƒæ¨èæ–¹æ¡ˆ</h5>
<p><strong>ğŸ¨ æœ¬åœ°å¼€å‘æ¨¡å¼ï¼ˆæ¨èç”¨äºæ—¥å¸¸å¼€å‘ï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨åŸºç¡€è®¾æ–½æœåŠ¡ï¼ˆMySQL + Redisï¼‰</span>
pnpm run docker-dev:up:redis
pnpm run docker-dev:up:mysql

<span class="hljs-comment"># æœ¬åœ°å¯åŠ¨åç«¯æœåŠ¡ï¼ˆæ”¯æŒçƒ­é‡è½½ï¼‰</span>
pnpm run dev:backend

<span class="hljs-comment"># æœ¬åœ°å¯åŠ¨å‰ç«¯æœåŠ¡</span>
pnpm run dev:frontend
</code></pre>
<p><strong>ğŸ³ Docker å¼€å‘æ¨¡å¼ï¼ˆé€‚ç”¨äºé›†æˆæµ‹è¯•ï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># docker å®¹å™¨åˆ›å»º&amp;éƒ¨ç½²</span>
pnpm run docker:build

<span class="hljs-comment"># å®Œæ•´å®¹å™¨åŒ–ç¯å¢ƒå¯åŠ¨</span>
pnpm run docker:up
</code></pre>
<h5 data-id="heading-7">ä¸¤ç§æ¨¡å¼çš„å¯¹æ¯”</h5>








































<table><thead><tr><th>æ–¹é¢</th><th>æœ¬åœ°å¼€å‘æ¨¡å¼</th><th>Docker å¼€å‘æ¨¡å¼</th></tr></thead><tbody><tr><td><strong>å¯åŠ¨é€Ÿåº¦</strong></td><td>~3ç§’ âš¡</td><td>~30ç§’ ğŸŒ</td></tr><tr><td><strong>çƒ­é‡è½½</strong></td><td>å³æ—¶å“åº” âš¡</td><td>éœ€è¦ volume æ˜ å°„</td></tr><tr><td><strong>è°ƒè¯•ä½“éªŒ</strong></td><td>ä¼˜ç§€ï¼ˆæ–­ç‚¹è°ƒè¯•ï¼‰</td><td>ä¸€èˆ¬</td></tr><tr><td><strong>èµ„æºå ç”¨</strong></td><td>ä½</td><td>é«˜</td></tr><tr><td><strong>æ–‡ä»¶è®¿é—®</strong></td><td>ç›´æ¥è®¿é—®</td><td>é€šè¿‡ volume</td></tr><tr><td><strong>é€‚ç”¨åœºæ™¯</strong></td><td>æ—¥å¸¸å¼€å‘ã€ä»£ç ç¼–å†™</td><td>é›†æˆæµ‹è¯•ã€æ¼”ç¤ºç¯å¢ƒ</td></tr></tbody></table>
<h5 data-id="heading-8">å¼€å‘é˜¶æ®µæœ€ä½³å®è·µ</h5>
<ol>
<li>
<p><strong>åŸºç¡€è®¾æ–½æœåŠ¡ä½¿ç”¨ Docker</strong></p>
<ul>
<li>MySQL å’Œ Redis å»ºè®®ä¸€ç›´ä½¿ç”¨ Docker å®¹å™¨</li>
<li>ä¿è¯ç¯å¢ƒä¸€è‡´æ€§å’Œæ•°æ®æŒä¹…åŒ–</li>
</ul>
</li>
<li>
<p><strong>åº”ç”¨æœåŠ¡ä½¿ç”¨æœ¬åœ°æ¨¡å¼</strong></p>
<ul>
<li>åç«¯æœåŠ¡ï¼š<code>pnpm run dev:backend</code>ï¼ˆæ”¯æŒçƒ­é‡è½½ï¼‰</li>
<li>å‰ç«¯æœåŠ¡ï¼š<code>pnpm run dev:frontend</code>ï¼ˆVite çƒ­é‡è½½ï¼‰</li>
<li>Nuxt æœåŠ¡ï¼š<code>pnpm run dev:nuxt</code>ï¼ˆå¦‚éœ€è¦ï¼‰</li>
</ul>
</li>
<li>
<p><strong>ä½•æ—¶ä½¿ç”¨ Docker æ¨¡å¼</strong></p>
<ul>
<li>å…¨æ ˆé›†æˆæµ‹è¯•æ—¶</li>
<li>å‘å›¢é˜Ÿæ¼”ç¤ºåŠŸèƒ½æ—¶</li>
<li>æ¨¡æ‹Ÿç”Ÿäº§ç¯å¢ƒé…ç½®æ—¶</li>
<li>CI/CD è‡ªåŠ¨åŒ–æµ‹è¯•æ—¶</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-9"><strong>æ‰§è¡Œé¡ºåºæ€»è§ˆè¡¨</strong>
å½“å‰é¡ºåºï¼š ç¯å¢ƒå‡†å¤‡ â†’ é¡¹ç›®åˆå§‹åŒ– â†’ DockeråŸºç¡€æœåŠ¡ â†’ åç«¯åŸºç¡€æ¡†æ¶æ­å»ºï¼ˆExpress + ä¸­é—´ä»¶ + å·¥å…·å‡½æ•°ï¼‰ â†’ æ•°æ®åº“è®¾è®¡ä¸åˆå§‹åŒ–ï¼ˆæ¨¡å‹å®šä¹‰ + åˆå§‹åŒ–è„šæœ¬ + æ•°æ®åº“åŒæ­¥ï¼‰ â†’ JWTè®¤è¯ç³»ç»Ÿ â†’ Redisç¼“å­˜é›†æˆ â†’ å‰ç«¯åå°ç®¡ç†</h3>
<h3 data-id="heading-10">é˜¶æ®µä¸€ï¼šåŸºç¡€è¿è¡Œç¯å¢ƒå‡†å¤‡</h3>
<h4 data-id="heading-11">ğŸ¯ æœ¬é˜¶æ®µç›®æ ‡</h4>
<p>ç¡®ä¿æœ¬åœ°å¼€å‘ç¯å¢ƒå…·å¤‡è¿è¡Œ Blog-SSR é¡¹ç›®çš„æœ€ä½è¦æ±‚ã€‚</p>
<h4 data-id="heading-12">âœ… é¢„æœŸç»“æœ</h4>
<ul>
<li>æ‰€æœ‰å¿…éœ€å·¥å…·æ­£ç¡®å®‰è£…å¹¶å¯æ­£å¸¸è¿è¡Œ</li>
<li>Node.js â‰¥ 18.0.0, pnpm â‰¥ 9.0.0, Docker â‰¥ 24.0.0</li>
<li>Docker å¼•æ“æ­£å¸¸è¿è¡Œï¼Œå¯åˆ›å»ºå’Œå¯åŠ¨å®¹å™¨</li>
<li>ç½‘ç»œè¿æ¥æ­£å¸¸ï¼Œå¯è®¿é—® Docker Hub</li>
</ul>
<h4 data-id="heading-13">ğŸ“ éªŒè¯æ ‡å‡†</h4>



































<table><thead><tr><th>æ£€æŸ¥é¡¹</th><th>éªŒè¯å‘½ä»¤</th><th>æœŸæœ›ç»“æœ</th></tr></thead><tbody><tr><td>Node.js ç‰ˆæœ¬</td><td><code>node --version</code></td><td>â‰¥ 18.0.0</td></tr><tr><td>pnpm ç‰ˆæœ¬</td><td><code>pnpm --version</code></td><td>â‰¥ 9.0.0</td></tr><tr><td>Docker ç‰ˆæœ¬</td><td><code>docker --version</code></td><td>â‰¥ 24.0.0</td></tr><tr><td>Docker å¼•æ“çŠ¶æ€</td><td><code>docker info</code></td><td>æ— é”™è¯¯è¾“å‡º</td></tr><tr><td>Docker Hub è¿æ¥</td><td><code>curl -fsSL https://registry-1.docker.io/v2/</code></td><td>HTTP 200</td></tr></tbody></table>
<h4 data-id="heading-14">ğŸ“¦ æŠ€æœ¯æ ˆè¯¦æƒ…</h4>
<ul>
<li><strong>å®¹å™¨åŒ–</strong>: Docker + Docker Compose</li>
<li><strong>ä»£ç è§„èŒƒ</strong>: ESLint + Prettier + Husky + lint-staged</li>
<li><strong>concurrently</strong>: Node.js å‘½ä»¤è¡Œå·¥å…·, åŠŸèƒ½æ˜¯åœ¨åŒä¸€ä¸ªç»ˆç«¯çª—å£ä¸­ï¼Œå¹¶è¡Œï¼ˆåŒæ—¶ï¼‰è¿è¡Œå¤šä¸ªå‘½ä»¤è¡Œå‘½ä»¤ï¼Œè€Œæ— éœ€æ‰“å¼€å¤šä¸ªç»ˆç«¯åˆ†åˆ«æ‰§è¡Œã€‚</li>
</ul>
<h4 data-id="heading-15">ğŸ“‹ ç¯å¢ƒä¾èµ–æ¸…å•</h4>















































<table><thead><tr><th>å·¥å…·</th><th>ç‰ˆæœ¬è¦æ±‚</th><th>å®‰è£…æ–¹å¼</th><th>éªŒè¯å‘½ä»¤</th></tr></thead><tbody><tr><td>Node.js</td><td>â‰¥ 18.0.0</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2F" target="_blank" title="https://nodejs.org/" ref="nofollow noopener noreferrer">å®˜ç½‘ä¸‹è½½</a></td><td><code>node --version</code></td></tr><tr><td>pnpm</td><td>â‰¥ 9.0.0</td><td><code>npm install -g pnpm</code></td><td><code>pnpm --version</code></td></tr><tr><td>Docker</td><td>â‰¥ 24.0.0</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.docker.com%2Fproducts%2Fdocker-desktop" target="_blank" title="https://www.docker.com/products/docker-desktop" ref="nofollow noopener noreferrer">Docker Desktop</a></td><td><code>docker --version</code></td></tr><tr><td>Docker Compose</td><td>â‰¥ 2.0.0</td><td>éš Docker Desktop</td><td><code>docker compose version</code></td></tr><tr><td>Git</td><td>â‰¥ 2.30.0</td><td>ç³»ç»ŸåŒ…ç®¡ç†å™¨</td><td><code>git --version</code></td></tr><tr><td>concurrently</td><td>â‰¥ 9.0.0</td><td><code>pnpm add -D concurrently</code></td><td>å·²éšé¡¹ç›®å®‰è£…</td></tr></tbody></table>
<p><strong>æŠ€æœ¯æ ˆç‰ˆæœ¬è¯¦æƒ…ï¼š</strong></p>































































































<table><thead><tr><th>ç»„ä»¶</th><th>ç‰ˆæœ¬</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>åç«¯</strong></td><td/><td/></tr><tr><td>Express</td><td>4.18.2</td><td>Web æ¡†æ¶</td></tr><tr><td>Sequelize</td><td>6.37.7</td><td>ORM</td></tr><tr><td>MySQL2</td><td>3.6.5</td><td>æ•°æ®åº“é©±åŠ¨</td></tr><tr><td>Redis</td><td>4.6.12</td><td>ç¼“å­˜å®¢æˆ·ç«¯</td></tr><tr><td>JWT</td><td>9.0.2</td><td>èº«ä»½è®¤è¯</td></tr><tr><td><strong>å‰ç«¯åå°ç®¡ç†</strong></td><td/><td/></tr><tr><td>Vue</td><td>3.5.24</td><td>å‰ç«¯æ¡†æ¶</td></tr><tr><td>Vite</td><td>rolldown-vite@7.2.5</td><td>æ„å»ºå·¥å…·</td></tr><tr><td>Element Plus</td><td>2.13.0</td><td>UI ç»„ä»¶åº“</td></tr><tr><td>Pinia</td><td>3.0.4</td><td>çŠ¶æ€ç®¡ç†</td></tr><tr><td><strong>SSRå‰å°</strong></td><td/><td/></tr><tr><td>Nuxt</td><td>3.12.0</td><td>SSR æ¡†æ¶</td></tr><tr><td><strong>å®¹å™¨åŒ–</strong></td><td/><td/></tr><tr><td>MySQL</td><td>8.0</td><td>æ•°æ®åº“</td></tr><tr><td>Redis</td><td>8.4.0</td><td>ç¼“å­˜</td></tr><tr><td>Nginx</td><td>Alpine</td><td>åå‘ä»£ç†</td></tr></tbody></table>
<h4 data-id="heading-16">å½“å‰é¡¹ç›®çŠ¶æ€åˆ†æ</h4>
<p><strong>å·²æœ‰çš„èµ„æºï¼š</strong></p>
<ul>
<li>âœ… Node.jsã€pnpmã€Dockerã€Docker Compose å®‰è£…éªŒè¯</li>
<li>âœ… æŠ€æœ¯æ ˆç‰ˆæœ¬æ¸…å•å·²å®šä¹‰</li>
</ul>
<p><strong>ç¼ºå¤±çš„éƒ¨åˆ†ï¼š</strong></p>
<ul>
<li>âŒ é¡¹ç›®ä»£ç å’Œé…ç½®</li>
</ul>
<h4 data-id="heading-17">ğŸ§­ æ“ä½œæ­¥éª¤</h4>
<h5 data-id="heading-18">1. å®‰è£… Node.js</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ nvm ç®¡ç† Node.js ç‰ˆæœ¬ï¼ˆæ¨èï¼‰</span>
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash
<span class="hljs-built_in">source</span> ~/.bashrc
nvm install 18
nvm use 18
</code></pre>
<h5 data-id="heading-19">2. å®‰è£… pnpm</h5>
<pre><code class="hljs language-bash" lang="bash">npm install -g pnpm
</code></pre>
<h5 data-id="heading-20">3. å®‰è£… Docker Desktop</h5>
<ul>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.docker.com%2Fproducts%2Fdocker-desktop" target="_blank" title="https://www.docker.com/products/docker-desktop" ref="nofollow noopener noreferrer">Docker å®˜ç½‘</a></li>
<li>ä¸‹è½½å¯¹åº”æ“ä½œç³»ç»Ÿç‰ˆæœ¬</li>
<li>å®Œæˆå®‰è£…å¹¶å¯åŠ¨ Docker Desktop</li>
</ul>
<hr/>
<h3 data-id="heading-21">é˜¶æ®µäºŒï¼šé¡¹ç›®ç»“æ„åˆå§‹åŒ–</h3>
<h4 data-id="heading-22">ğŸ¯ æœ¬é˜¶æ®µç›®æ ‡</h4>
<p>åˆ›å»ºå®Œæ•´çš„ Monorepo é¡¹ç›®ç»“æ„ï¼Œé…ç½®å·¥ä½œåŒºä¾èµ–ç®¡ç†ã€‚</p>
<h4 data-id="heading-23">âœ… é¢„æœŸç»“æœ</h4>
<ul>
<li>å®Œæ•´çš„é¡¹ç›®ç›®å½•ç»“æ„æŒ‰ç…§è§„èŒƒåˆ›å»º</li>
<li>pnpm å·¥ä½œåŒºæ­£ç¡®é…ç½®ï¼Œå¯è¯†åˆ«æ‰€æœ‰å­åŒ…</li>
<li>å…±äº«æ¨¡å— @blog/common æˆåŠŸåˆ›å»ºå¹¶å¯å¯¼å…¥</li>
<li>æ ¹é¡¹ç›®ä¾èµ–æ­£ç¡®å®‰è£…ï¼Œå·¥ä½œåŒºè¯†åˆ«æ­£å¸¸</li>
</ul>
<h4 data-id="heading-24">ğŸ“ éªŒè¯æ ‡å‡†</h4>



































<table><thead><tr><th>æ£€æŸ¥é¡¹</th><th>éªŒè¯å‘½ä»¤</th><th>æœŸæœ›ç»“æœ</th></tr></thead><tbody><tr><td>å·¥ä½œåŒºé…ç½®</td><td><code>cat pnpm-workspace.yaml</code></td><td>åŒ…å« <code>packages: - 'packages/*'</code></td></tr><tr><td>å·¥ä½œåŒºè¯†åˆ«</td><td><code>pnpm ls --depth=-1</code></td><td>åˆ—å‡ºæ‰€æœ‰å·¥ä½œåŒºåŒ…</td></tr><tr><td>å…±äº«æ¨¡å—</td><td><code>ls -la packages/common/</code></td><td>åŒ…å« index.js, package.json, types/, utils/</td></tr><tr><td>ä¾èµ–å®‰è£…</td><td><code>pnpm install</code></td><td>æ— é”™è¯¯ï¼ŒæˆåŠŸå®‰è£…æ‰€æœ‰ä¾èµ–</td></tr><tr><td>æ¨¡å—å¯¼å…¥</td><td><code>node -e "import('./packages/common/index.js')"</code></td><td>æ— é”™è¯¯ï¼Œå¯æ­£å¸¸å¯¼å…¥</td></tr></tbody></table>
<h4 data-id="heading-25">ğŸ“¦ æŠ€æœ¯æ ˆè¯¦æƒ…</h4>
<ul>
<li><strong>åŒ…ç®¡ç†</strong>: pnpm workspaces (monorepo)</li>
</ul>
<h4 data-id="heading-26">å½“å‰é¡¹ç›®çŠ¶æ€åˆ†æ</h4>
<p><strong>å·²æœ‰çš„èµ„æºï¼š</strong></p>
<ul>
<li>âœ… pnpm å·¥ä½œåŒºé…ç½®å·²åˆ›å»º</li>
<li>âœ… å…±äº«æ¨¡å— @blog/common å·²å®šä¹‰</li>
</ul>
<p><strong>ç¼ºå¤±çš„éƒ¨åˆ†ï¼š</strong></p>
<ul>
<li>âŒ å„æœåŠ¡æ¨¡å—çš„å…·ä½“å®ç°</li>
</ul>
<h4 data-id="heading-27">ğŸ§­ æ“ä½œæ­¥éª¤</h4>
<blockquote>
<p>æ³¨: ä¹Ÿå¯ç›´æ¥ä¸‹è½½æºç , å¦‚æœå…‹éš†ç°æœ‰ä»“åº“</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/pengtaohenry1213-prog/Blog
<span class="hljs-built_in">cd</span> blog-ssr
</code></pre>
<h5 data-id="heading-28">æ­¥éª¤ 1ï¼šå…‹éš†æˆ–åˆå§‹åŒ–é¡¹ç›®</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¦‚æœæ˜¯ä»å¤´å¼€å§‹</span>
<span class="hljs-built_in">mkdir</span> blog-ssr &amp;&amp; <span class="hljs-built_in">cd</span> blog-ssr
git init
</code></pre>
<h5 data-id="heading-29">æ­¥éª¤ 2ï¼šåˆå§‹åŒ–æ ¹é¡¹ç›®é…ç½®</h5>
<p>é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ: <code>pnpm init</code> ä»¥åˆ›å»ºpackage.json.
ä¿®æ”¹ <code>package.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"blog-ssr"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å…¨æ ˆåšå®¢ç³»ç»Ÿï¼Œæ”¯æŒ SSR å’Œåå°ç®¡ç†"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"private"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"packageManager"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm@9.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"docker:up"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"docker compose -f docker/docker-compose.yml --env-file .env up -d"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"docker:down"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"docker compose -f docker/docker-compose.yml down"</span><span class="hljs-punctuation">,</span>

    <span class="hljs-attr">"docker-dev:up"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"docker compose -f docker/docker-compose.dev.yml --env-file .env.development up -d"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"docker-dev:down"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"docker compose -f docker/docker-compose.dev.yml down"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"docker-dev:delete"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"docker compose -f docker/docker-compose.dev.yml --env-file .env.development down -v"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev:backend"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm --filter @blog/backend run dev"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev:frontend"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm --filter @blog/frontend run dev"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-30">æ­¥éª¤ 3ï¼šé…ç½® pnpm å·¥ä½œåŒº</h5>
<p>åˆ›å»º <code>touch pnpm-workspace.yaml</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">packages:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">'packages/*'</span>
</code></pre>
<h5 data-id="heading-31">æ­¥éª¤ 4ï¼šåˆ›å»ºå…±äº«æ¨¡å— <code>mkdir packages &amp;&amp; mkdir packages/common</code></h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> -p packages/common/{types,utils}
</code></pre>
<p>åˆ›å»º <code>touch packages/common/package.json</code>ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"@blog/common"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Blog-SSR å…±äº«æ¨¡å—"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"index.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"module"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"exports"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"."</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./index.js"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"./types"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./types/index.js"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"./utils"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"./utils/index.js"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>åˆ›å»º <code>touch packages/common/types/index.js</code></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> {};
</code></pre>
<p>åˆ›å»º <code>touch packages/common/utils/index.js</code></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * å…±äº«å·¥å…·å‡½æ•°
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">formatDate</span>(<span class="hljs-params">date, format = <span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span></span>) {
  <span class="hljs-keyword">const</span> d = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(date);
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(d.<span class="hljs-title function_">getTime</span>())) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
  }

  <span class="hljs-keyword">const</span> year = d.<span class="hljs-title function_">getFullYear</span>();
  <span class="hljs-keyword">const</span> month = <span class="hljs-title class_">String</span>(d.<span class="hljs-title function_">getMonth</span>() + <span class="hljs-number">1</span>).<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>);
  <span class="hljs-keyword">const</span> day = <span class="hljs-title class_">String</span>(d.<span class="hljs-title function_">getDate</span>()).<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>);
  <span class="hljs-keyword">const</span> hours = <span class="hljs-title class_">String</span>(d.<span class="hljs-title function_">getHours</span>()).<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>);
  <span class="hljs-keyword">const</span> minutes = <span class="hljs-title class_">String</span>(d.<span class="hljs-title function_">getMinutes</span>()).<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>);
  <span class="hljs-keyword">const</span> seconds = <span class="hljs-title class_">String</span>(d.<span class="hljs-title function_">getSeconds</span>()).<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>);

  <span class="hljs-keyword">return</span> format
    .<span class="hljs-title function_">replace</span>(<span class="hljs-string">'YYYY'</span>, year)
    .<span class="hljs-title function_">replace</span>(<span class="hljs-string">'MM'</span>, month)
    .<span class="hljs-title function_">replace</span>(<span class="hljs-string">'DD'</span>, day)
    .<span class="hljs-title function_">replace</span>(<span class="hljs-string">'HH'</span>, hours)
    .<span class="hljs-title function_">replace</span>(<span class="hljs-string">'mm'</span>, minutes)
    .<span class="hljs-title function_">replace</span>(<span class="hljs-string">'ss'</span>, seconds);
}
</code></pre>
<p>åˆ›å»º <code>touch packages/common/index.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./types/index.js'</span>;
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils/index.js'</span>;
</code></pre>
<h5 data-id="heading-32">æ­¥éª¤ 5ï¼šå®‰è£…æ ¹çº§å¼€å‘ä¾èµ–</h5>
<pre><code class="hljs language-bash" lang="bash">pnpm add -D -w eslint prettier lint-staged husky sass
</code></pre>
<h4 data-id="heading-33">ğŸ“„ ç¯å¢ƒå˜é‡é…ç½®è¯¦è§£</h4>
<h4 data-id="heading-34">ğŸ¯ é…ç½®åŸåˆ™</h4>
<p>é¡¹ç›®é‡‡ç”¨å¤šç¯å¢ƒé…ç½®ç­–ç•¥ï¼š</p>
<ul>
<li><strong><code>.env.development</code></strong> - å¼€å‘ç¯å¢ƒé…ç½®ï¼ˆæœ¬åœ°å¼€å‘ï¼‰</li>
<li><strong><code>.env</code></strong> - ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼ˆDocker å®¹å™¨ï¼‰</li>
</ul>
<h4 data-id="heading-35">ğŸ§­ é…ç½®æ­¥éª¤</h4>
<h5 data-id="heading-36">æ­¥éª¤ 1ï¼šåˆ›å»ºå¼€å‘ç¯å¢ƒé…ç½®</h5>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•, åˆ›å»º <code>touch .env.development</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åç«¯æœåŠ¡é…ç½®</span>
NODE_ENV=development
HOST=0.0.0.0
PORT=3001

<span class="hljs-comment"># æ•°æ®åº“é…ç½®ï¼ˆDocker å®¹å™¨ï¼‰</span>
DB_HOST=localhost
DB_PORT=3306
DB_NAME=blog_db
DB_USER=blog_root
DB_PASSWORD=blog123

<span class="hljs-comment"># Redis é…ç½®ï¼ˆDocker å®¹å™¨ï¼‰</span>
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis123

<span class="hljs-comment"># JWT é…ç½®</span>
JWT_SECRET=dev_jwt_secret_key_for_development_only
JWT_EXPIRES_IN=7d

<span class="hljs-comment"># CORS é…ç½®ï¼ˆå…è®¸å‰ç«¯è®¿é—®ï¼‰</span>
CORS_ORIGIN=http://localhost

<span class="hljs-comment"># Nuxt SSR é…ç½®</span>
NUXT_PUBLIC_API_BASE_URL=http://localhost:3001/api
NUXT_PUBLIC_SITE_BASE=http://localhost:3000
NUXT_PUBLIC_SITE_NAME=ä¸ªäººåšå®¢

<span class="hljs-comment"># Docker æœåŠ¡ç«¯å£é…ç½®</span>
BACKEND_PORT=3001
FRONTEND_PORT=80
NUXT_PORT=3000
</code></pre>
<h5 data-id="heading-37">æ­¥éª¤ 2ï¼šåˆ›å»ºç”Ÿäº§ç¯å¢ƒé…ç½®</h5>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•, åˆ›å»º <code>touch .env</code> æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼ˆç”¨äº Docker å®¹å™¨é—´é€šä¿¡ï¼‰</span>
NODE_ENV=production
...
</code></pre>
<h5 data-id="heading-38">æ­¥éª¤ 3: æ ¹ç›®å½•é™„åŠ é…ç½®æ–‡ä»¶</h5>
<p>åˆ›å»º: <code>touch .gitignore</code></p>
<h4 data-id="heading-39">ğŸ” å®‰å…¨æ³¨æ„äº‹é¡¹</h4>
<ol>
<li><strong>JWT å¯†é’¥</strong>: ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨å¼ºéšæœºå¯†é’¥</li>
<li><strong>æ•°æ®åº“å¯†ç </strong>: ä½¿ç”¨å¤æ‚å¯†ç ï¼Œé¿å…é»˜è®¤å€¼</li>
<li><strong>ç¯å¢ƒéš”ç¦»</strong>: ä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒçš„é…ç½®</li>
<li><strong>æ•æ„Ÿä¿¡æ¯</strong>: ä¸è¦å°† <code>.env</code> æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶</li>
</ol>
<hr/>
<h3 data-id="heading-40">é˜¶æ®µä¸‰: Docker åŸºç¡€æœåŠ¡é…ç½®</h3>
<h4 data-id="heading-41">ğŸ¯ æœ¬é˜¶æ®µç›®æ ‡</h4>
<p>å¯åŠ¨ MySQL å’Œ Redis å®¹å™¨ï¼Œä¸ºåç«¯æœåŠ¡æä¾›æ•°æ®å­˜å‚¨å’Œç¼“å­˜æ”¯æŒã€‚</p>
<h4 data-id="heading-42">âœ… é¢„æœŸç»“æœ</h4>
<ul>
<li>MySQL å’Œ Redis å®¹å™¨æˆåŠŸå¯åŠ¨å¹¶è¿è¡Œ</li>
<li>æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬è‡ªåŠ¨æ‰§è¡Œï¼Œåˆ›å»ºåŸºç¡€è¡¨ç»“æ„</li>
<li>å®¹å™¨é—´ç½‘ç»œäº’é€šï¼Œå¯é€šè¿‡æœåŠ¡åè®¿é—®</li>
<li>æ•°æ®æŒä¹…åŒ–é…ç½®ç”Ÿæ•ˆï¼Œé‡å¯åæ•°æ®ä¿ç•™</li>
</ul>
<h4 data-id="heading-43">ğŸ“ éªŒè¯æ ‡å‡†</h4>









































<table><thead><tr><th>æ£€æŸ¥é¡¹</th><th>éªŒè¯å‘½ä»¤</th><th>æœŸæœ›ç»“æœ</th></tr></thead><tbody><tr><td>å®¹å™¨çŠ¶æ€</td><td><code>docker compose ps</code></td><td>mysql å’Œ redis çŠ¶æ€ä¸º Up/Healthy</td></tr><tr><td>MySQL è¿æ¥</td><td><code>docker compose exec mysql mysql -uroot -pblog123 -e "SELECT 1;"</code></td><td>è¿”å›ç»“æœ <code>1</code></td></tr><tr><td>Redis è¿æ¥</td><td><code>docker compose exec redis redis-cli -a redis123 ping</code></td><td>è¿”å› <code>PONG</code></td></tr><tr><td>æ•°æ®åº“åˆå§‹åŒ–</td><td><code>docker compose exec mysql mysql -ublog_root -pblog123 blog_db -e "SHOW TABLES;"</code></td><td>åŒ…å«åŸºç¡€è¡¨ç»“æ„</td></tr><tr><td>ç½‘ç»œè¿æ¥</td><td><code>docker compose exec mysql mysql -ublog_root -pblog123 -h mysql -e "SELECT 1;"</code></td><td>å®¹å™¨å†…ç½‘ç»œæ­£å¸¸</td></tr><tr><td>æ•°æ®æŒä¹…åŒ–</td><td>é‡å¯å®¹å™¨åæ•°æ®ä¿ç•™</td><td><code>docker compose restart &amp;&amp; docker compose exec mysql mysql -ublog_root -pblog123 blog_db -e "SELECT COUNT(*) FROM users;"</code></td><td>æ•°æ®æœªä¸¢å¤±</td></tr></tbody></table>
<h4 data-id="heading-44">ğŸ“¦ æŠ€æœ¯æ ˆè¯¦æƒ…</h4>
<ul>
<li><strong>å®¹å™¨åŒ–</strong>: Docker + Docker Compose</li>
</ul>
<h4 data-id="heading-45">ğŸ“‹ ç¯å¢ƒä¾èµ–æ¸…å•</h4>























<table><thead><tr><th>å·¥å…·</th><th>ç‰ˆæœ¬è¦æ±‚</th><th>å®‰è£…æ–¹å¼</th><th>éªŒè¯å‘½ä»¤</th></tr></thead><tbody><tr><td>Docker</td><td>â‰¥ 24.0.0</td><td><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.docker.com%2Fproducts%2Fdocker-desktop" target="_blank" title="https://www.docker.com/products/docker-desktop" ref="nofollow noopener noreferrer">Docker Desktop</a></td><td><code>docker --version</code></td></tr><tr><td>Docker Compose</td><td>â‰¥ 2.0.0</td><td>éš Docker Desktop</td><td><code>docker compose version</code></td></tr></tbody></table>
<h4 data-id="heading-46">ğŸ“ é¡¹ç›®ç»“æ„æ¦‚è§ˆ</h4>
<pre><code class="hljs language-bash" lang="bash">docker/
â”œâ”€â”€ docker-compose.yml       <span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒå®Œæ•´æœåŠ¡ç¼–æ’</span>
â”œâ”€â”€ docker-compose.dev.yml   <span class="hljs-comment"># å¼€å‘ç¯å¢ƒæœåŠ¡é…ç½®</span>
â””â”€â”€ scripts/
    â””â”€â”€ init.sql            <span class="hljs-comment"># æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬</span>
</code></pre>
<h4 data-id="heading-47">ğŸ“‹ æœåŠ¡é…ç½®è¯´æ˜</h4>


























<table><thead><tr><th>æœåŠ¡</th><th>é•œåƒç‰ˆæœ¬</th><th>å®¹å™¨ç«¯å£</th><th>æ•°æ®æŒä¹…åŒ–</th><th>å¥åº·æ£€æŸ¥</th></tr></thead><tbody><tr><td>MySQL</td><td>8.0</td><td>3306</td><td>âœ…</td><td>âœ…</td></tr><tr><td>Redis</td><td>8.4.0</td><td>6379</td><td>âœ…</td><td>âœ…</td></tr></tbody></table>
<h4 data-id="heading-48">å½“å‰é¡¹ç›®çŠ¶æ€åˆ†æ</h4>
<p>**å·²æœ‰çš„èµ„æº: **</p>
<ul>
<li>âœ… Docker Compose é…ç½®å·²åˆ›å»º</li>
<li>âœ… MySQL å’Œ Redis å®¹å™¨é…ç½®å·²å®šä¹‰</li>
<li>âœ… æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬å·²å‡†å¤‡</li>
</ul>
<p>**ç¼ºå¤±çš„éƒ¨åˆ†: **</p>
<ul>
<li>âŒ åº”ç”¨æœåŠ¡å®¹å™¨é…ç½®ï¼ˆåç«¯ã€å‰ç«¯ã€Nuxtï¼‰</li>
</ul>
<h5 data-id="heading-49">æ­¥éª¤ 1: é…ç½® Docker Compose</h5>
<p><strong>é¡¹ç›®å·²åŒ…å«å®Œæ•´çš„ Docker é…ç½®ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</strong></p>
<p>åˆ›å»ºç›®å½•: <code>mkdir -p docker/{backend,frontend,nginx,nuxt,scripts}</code></p>
<p>åˆ›å»º <code>touch docker/docker-compose.dev.yml</code>
å‚è€ƒ <code>docker/docker-compose.dev.yml</code> æ–‡ä»¶ï¼Œç¡®ä¿åŒ…å«:</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">services:</span>
  <span class="hljs-attr">mysql:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:8.0</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">blog-test-mysql2</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">${DB_PASSWORD}</span>
      <span class="hljs-attr">MYSQL_DATABASE:</span> <span class="hljs-string">${DB_NAME}</span>
      <span class="hljs-attr">MYSQL_USER:</span> <span class="hljs-string">${DB_USER}</span>
      <span class="hljs-attr">MYSQL_PASSWORD:</span> <span class="hljs-string">${DB_PASSWORD}</span>
    <span class="hljs-comment"># ğŸ‘‡ devæ¨¡å¼, ä¸´æ—¶æš´éœ²ç«¯å£ç”¨äºæœ¬åœ°å¼€å‘</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"${DB_PORT}:3306"</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql_data:/var/lib/mysql</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./docker/scripts/init.sql:/docker-entrypoint-initdb.d/init.sql:ro</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">--default-authentication-plugin=caching_sha2_password</span> <span class="hljs-comment"># è®¾ç½®é»˜è®¤ è®¤è¯æ’ä»¶ä¸º caching_sha2_password</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">blog-network</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"mysqladmin"</span>, <span class="hljs-string">"ping"</span>, <span class="hljs-string">"-h"</span>, <span class="hljs-string">"localhost"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">5s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">5</span>

  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">redis:8.4.0</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">blog-test-redis2</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"${REDIS_PORT:-6379}:6379"</span>  <span class="hljs-comment"># âœ… æ­£ç¡®æš´éœ²ç«¯å£, å·¦ä¾§: ä½¿ç”¨ç¯å¢ƒå˜é‡ REDIS_PORTï¼Œå¦‚æœæœªè®¾ç½®åˆ™é»˜è®¤ä¸º 6379; å³ä¾§: 6379 - å®¹å™¨å†…éƒ¨çš„ Redis ç«¯å£</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">REDIS_PASSWORD=${REDIS_PASSWORD}</span> <span class="hljs-comment"># æŒ‡å®š Redis å¯†ç </span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">redis_data:/data</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">blog-network</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">redis-server</span> <span class="hljs-string">--appendonly</span> <span class="hljs-literal">yes</span> <span class="hljs-string">--requirepass</span> <span class="hljs-string">${REDIS_PASSWORD}</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"redis-cli"</span>, <span class="hljs-string">"ping"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">5s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">5</span>

<span class="hljs-comment"># é¡¶çº§ volumes å®šä¹‰, ä¼˜ç‚¹: æ•°æ®ä¸ä¼šéšå®¹å™¨åˆ é™¤; æ›´å®‰å…¨ã€å¯å¤ç”¨;</span>
<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">mysql_data:</span>
  <span class="hljs-attr">redis_data:</span>
  <span class="hljs-comment"># backend_logs:</span>

<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">blog-network:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
  <span class="hljs-attr">db-network:</span> <span class="hljs-comment"># ä»…æ•°æ®åº“/backend å¯è®¿é—®</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
</code></pre>
<p>åˆ›å»º <code>touch docker/scripts/init.sql</code>
å‚è€ƒ <code>docker/scripts/init.sql</code> æ–‡ä»¶ï¼Œç¡®ä¿åŒ…å«:</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬</span>
<span class="hljs-comment">-- æ­¤è„šæœ¬ä¼šåœ¨ MySQL å®¹å™¨é¦–æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨æ‰§è¡Œ</span>

<span class="hljs-comment">-- åˆ›å»ºæ•°æ®åº“ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰</span>
<span class="hljs-keyword">CREATE</span> DATABASE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> blog_db <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> utf8mb4_unicode_ci;

USE blog_db;

<span class="hljs-comment">-- æ³¨æ„: è¡¨ç»“æ„ä¼šç”± Sequelize è‡ªåŠ¨åˆ›å»º</span>
<span class="hljs-comment">-- è¿™é‡Œåˆ›å»ºç´¢å¼•ä»¥ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½</span>
<span class="hljs-comment">-- æ³¨æ„: MySQL çš„ CREATE INDEX ä¸æ”¯æŒ IF NOT EXISTSï¼Œéœ€è¦å…ˆæ£€æŸ¥ç´¢å¼•æ˜¯å¦å­˜åœ¨</span>

<span class="hljs-comment">-- ä¸º users è¡¨çš„ username å­—æ®µåˆ›å»ºå”¯ä¸€ç´¢å¼•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰</span>
<span class="hljs-keyword">SET</span> <span class="hljs-variable">@dbname</span> <span class="hljs-operator">=</span> DATABASE();
<span class="hljs-keyword">SET</span> <span class="hljs-variable">@tablename</span> <span class="hljs-operator">=</span> <span class="hljs-string">'users'</span>;
<span class="hljs-keyword">SET</span> <span class="hljs-variable">@indexname</span> <span class="hljs-operator">=</span> <span class="hljs-string">'idx_users_username'</span>;
<span class="hljs-keyword">SET</span> <span class="hljs-variable">@preparedStatement</span> <span class="hljs-operator">=</span> (<span class="hljs-keyword">SELECT</span> IF(
  (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> INFORMATION_SCHEMA.STATISTICS
    <span class="hljs-keyword">WHERE</span> table_schema <span class="hljs-operator">=</span> <span class="hljs-variable">@dbname</span>
    <span class="hljs-keyword">AND</span> table_name <span class="hljs-operator">=</span> <span class="hljs-variable">@tablename</span>
    <span class="hljs-keyword">AND</span> index_name <span class="hljs-operator">=</span> <span class="hljs-variable">@indexname</span>
  ) <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span>,
  <span class="hljs-string">'SELECT 1'</span>,
  CONCAT(<span class="hljs-string">'CREATE UNIQUE INDEX '</span>, <span class="hljs-variable">@indexname</span>, <span class="hljs-string">' ON '</span>, <span class="hljs-variable">@tablename</span>, <span class="hljs-string">'(username)'</span>)
));
<span class="hljs-keyword">PREPARE</span> stmt <span class="hljs-keyword">FROM</span> <span class="hljs-variable">@preparedStatement</span>;
<span class="hljs-keyword">EXECUTE</span> stmt;
<span class="hljs-keyword">DEALLOCATE</span> <span class="hljs-keyword">PREPARE</span> stmt;

<span class="hljs-comment">-- ä¸º articles è¡¨çš„ author_idã€category_idã€publish_time å­—æ®µåˆ›å»ºè”åˆç´¢å¼•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰</span>
<span class="hljs-keyword">SET</span> <span class="hljs-variable">@tablename</span> <span class="hljs-operator">=</span> <span class="hljs-string">'articles'</span>;
<span class="hljs-keyword">SET</span> <span class="hljs-variable">@indexname</span> <span class="hljs-operator">=</span> <span class="hljs-string">'idx_articles_author_category_time'</span>;
<span class="hljs-keyword">SET</span> <span class="hljs-variable">@preparedStatement</span> <span class="hljs-operator">=</span> (<span class="hljs-keyword">SELECT</span> IF(
  (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> INFORMATION_SCHEMA.STATISTICS
    <span class="hljs-keyword">WHERE</span> table_schema <span class="hljs-operator">=</span> <span class="hljs-variable">@dbname</span>
    <span class="hljs-keyword">AND</span> table_name <span class="hljs-operator">=</span> <span class="hljs-variable">@tablename</span>
    <span class="hljs-keyword">AND</span> index_name <span class="hljs-operator">=</span> <span class="hljs-variable">@indexname</span>
  ) <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span>,
  <span class="hljs-string">'SELECT 1'</span>,
  CONCAT(<span class="hljs-string">'CREATE INDEX '</span>, <span class="hljs-variable">@indexname</span>, <span class="hljs-string">' ON '</span>, <span class="hljs-variable">@tablename</span>, <span class="hljs-string">'(author_id, category_id, publish_time)'</span>)
));
<span class="hljs-keyword">PREPARE</span> stmt <span class="hljs-keyword">FROM</span> <span class="hljs-variable">@preparedStatement</span>;
<span class="hljs-keyword">EXECUTE</span> stmt;
<span class="hljs-keyword">DEALLOCATE</span> <span class="hljs-keyword">PREPARE</span> stmt;

<span class="hljs-comment">-- ä¸º articles è¡¨çš„ publish_time åˆ›å»ºå•ç‹¬ç´¢å¼•ï¼ˆç”¨äºæ’åºï¼Œå¦‚æœä¸å­˜åœ¨ï¼‰</span>
<span class="hljs-keyword">SET</span> <span class="hljs-variable">@indexname</span> <span class="hljs-operator">=</span> <span class="hljs-string">'idx_articles_publish_time'</span>;
<span class="hljs-keyword">SET</span> <span class="hljs-variable">@preparedStatement</span> <span class="hljs-operator">=</span> (<span class="hljs-keyword">SELECT</span> IF(
  (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> INFORMATION_SCHEMA.STATISTICS
    <span class="hljs-keyword">WHERE</span> table_schema <span class="hljs-operator">=</span> <span class="hljs-variable">@dbname</span>
    <span class="hljs-keyword">AND</span> table_name <span class="hljs-operator">=</span> <span class="hljs-variable">@tablename</span>
    <span class="hljs-keyword">AND</span> index_name <span class="hljs-operator">=</span> <span class="hljs-variable">@indexname</span>
  ) <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span>,
  <span class="hljs-string">'SELECT 1'</span>,
  CONCAT(<span class="hljs-string">'CREATE INDEX '</span>, <span class="hljs-variable">@indexname</span>, <span class="hljs-string">' ON '</span>, <span class="hljs-variable">@tablename</span>, <span class="hljs-string">'(publish_time)'</span>)
));
<span class="hljs-keyword">PREPARE</span> stmt <span class="hljs-keyword">FROM</span> <span class="hljs-variable">@preparedStatement</span>;
<span class="hljs-keyword">EXECUTE</span> stmt;
<span class="hljs-keyword">DEALLOCATE</span> <span class="hljs-keyword">PREPARE</span> stmt;

<span class="hljs-comment">-- ä¸º articles è¡¨çš„ category_id åˆ›å»ºç´¢å¼•ï¼ˆç”¨äºåˆ†ç±»æŸ¥è¯¢ï¼Œå¦‚æœä¸å­˜åœ¨ï¼‰</span>
<span class="hljs-keyword">SET</span> <span class="hljs-variable">@indexname</span> <span class="hljs-operator">=</span> <span class="hljs-string">'idx_articles_category_id'</span>;
<span class="hljs-keyword">SET</span> <span class="hljs-variable">@preparedStatement</span> <span class="hljs-operator">=</span> (<span class="hljs-keyword">SELECT</span> IF(
  (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> INFORMATION_SCHEMA.STATISTICS
    <span class="hljs-keyword">WHERE</span> table_schema <span class="hljs-operator">=</span> <span class="hljs-variable">@dbname</span>
    <span class="hljs-keyword">AND</span> table_name <span class="hljs-operator">=</span> <span class="hljs-variable">@tablename</span>
    <span class="hljs-keyword">AND</span> index_name <span class="hljs-operator">=</span> <span class="hljs-variable">@indexname</span>
  ) <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span>,
  <span class="hljs-string">'SELECT 1'</span>,
  CONCAT(<span class="hljs-string">'CREATE INDEX '</span>, <span class="hljs-variable">@indexname</span>, <span class="hljs-string">' ON '</span>, <span class="hljs-variable">@tablename</span>, <span class="hljs-string">'(category_id)'</span>)
));
<span class="hljs-keyword">PREPARE</span> stmt <span class="hljs-keyword">FROM</span> <span class="hljs-variable">@preparedStatement</span>;
<span class="hljs-keyword">EXECUTE</span> stmt;
<span class="hljs-keyword">DEALLOCATE</span> <span class="hljs-keyword">PREPARE</span> stmt;

<span class="hljs-comment">-- ä¸º articles è¡¨çš„ author_id åˆ›å»ºç´¢å¼•ï¼ˆç”¨äºä½œè€…æŸ¥è¯¢ï¼Œå¦‚æœä¸å­˜åœ¨ï¼‰</span>
<span class="hljs-keyword">SET</span> <span class="hljs-variable">@indexname</span> <span class="hljs-operator">=</span> <span class="hljs-string">'idx_articles_author_id'</span>;
<span class="hljs-keyword">SET</span> <span class="hljs-variable">@preparedStatement</span> <span class="hljs-operator">=</span> (<span class="hljs-keyword">SELECT</span> IF(
  (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> INFORMATION_SCHEMA.STATISTICS
    <span class="hljs-keyword">WHERE</span> table_schema <span class="hljs-operator">=</span> <span class="hljs-variable">@dbname</span>
    <span class="hljs-keyword">AND</span> table_name <span class="hljs-operator">=</span> <span class="hljs-variable">@tablename</span>
    <span class="hljs-keyword">AND</span> index_name <span class="hljs-operator">=</span> <span class="hljs-variable">@indexname</span>
  ) <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span>,
  <span class="hljs-string">'SELECT 1'</span>,
  CONCAT(<span class="hljs-string">'CREATE INDEX '</span>, <span class="hljs-variable">@indexname</span>, <span class="hljs-string">' ON '</span>, <span class="hljs-variable">@tablename</span>, <span class="hljs-string">'(author_id)'</span>)
));
<span class="hljs-keyword">PREPARE</span> stmt <span class="hljs-keyword">FROM</span> <span class="hljs-variable">@preparedStatement</span>;
<span class="hljs-keyword">EXECUTE</span> stmt;
<span class="hljs-keyword">DEALLOCATE</span> <span class="hljs-keyword">PREPARE</span> stmt;
</code></pre>
<h5 data-id="heading-50">æ­¥éª¤ 2: å¯åŠ¨åŸºç¡€æœåŠ¡</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨ MySQL å’Œ Redis</span>
<span class="hljs-comment"># ä½¿ç”¨ --env-file å‚æ•°ç›´æ¥æŒ‡å®šç¯å¢ƒæ–‡ä»¶ï¼Œç¡®ä¿å®¹å™¨å†…èƒ½è·å–åˆ°æ­£ç¡®çš„ç¯å¢ƒå˜é‡å€¼</span>
docker compose -f docker/docker-compose.dev.yml --env-file .env.development up -d mysql redis
</code></pre>
<hr/>
<h3 data-id="heading-51">é˜¶æ®µå››: åç«¯åŸºç¡€æ¡†æ¶æ­å»º</h3>
<h4 data-id="heading-52">ğŸ¯ æœ¬é˜¶æ®µç›®æ ‡</h4>
<p>æ­å»º Express + ä¸­é—´ä»¶ + å·¥å…·å‡½æ•°çš„åŸºç¡€æ¡†æ¶ï¼Œä¸ºåç»­ä¸šåŠ¡é€»è¾‘å¼€å‘æä¾›åŸºç¡€è®¾æ–½ã€‚</p>
<h4 data-id="heading-53">âœ… é¢„æœŸç»“æœ</h4>
<ul>
<li>Express æœåŠ¡å™¨æˆåŠŸå¯åŠ¨ï¼Œå¯ç›‘å¬æŒ‡å®šç«¯å£</li>
<li>æ‰€æœ‰ä¸­é—´ä»¶æ­£ç¡®é…ç½®å¹¶ç”Ÿæ•ˆï¼ˆCORSã€Helmetã€å®‰å…¨ç­‰ï¼‰</li>
<li>å¥åº·æ£€æŸ¥æ¥å£è¿”å›è¯¦ç»†çš„çŠ¶æ€ä¿¡æ¯</li>
<li>æ—¥å¿—ç³»ç»Ÿæ­£å¸¸å·¥ä½œï¼Œè®°å½•è¯·æ±‚å’Œé”™è¯¯ä¿¡æ¯</li>
<li>é”™è¯¯å¤„ç†ä¸­é—´ä»¶æ­£ç¡®æ•è·å¹¶æ ¼å¼åŒ–é”™è¯¯å“åº”</li>
</ul>
<h4 data-id="heading-54">ğŸ“ éªŒè¯æ ‡å‡†</h4>


















































<table><thead><tr><th>æ£€æŸ¥é¡¹</th><th>éªŒè¯å‘½ä»¤</th><th>æœŸæœ›ç»“æœ</th></tr></thead><tbody><tr><td>æœåŠ¡å¯åŠ¨</td><td><code>cd packages/backend &amp;&amp; pnpm run dev</code></td><td>æœåŠ¡å™¨æˆåŠŸå¯åŠ¨ï¼Œæ˜¾ç¤ºç›‘å¬ç«¯å£</td></tr><tr><td>å¥åº·æ£€æŸ¥</td><td><code>curl http://localhost:3001/api/health</code></td><td>è¿”å›åŒ…å«çŠ¶æ€ä¿¡æ¯çš„ JSON</td></tr><tr><td>CORS é…ç½®</td><td>æ£€æŸ¥è·¨åŸŸè¯·æ±‚</td><td>å…è®¸é…ç½®çš„åŸŸåè®¿é—®</td></tr><tr><td>æ—¥å¿—è®°å½•</td><td>æŸ¥çœ‹ logs/ ç›®å½•</td><td>åŒ…å« combined.log å’Œ error.log</td></tr><tr><td>é”™è¯¯å¤„ç†</td><td><code>curl http://localhost:3001/api/nonexistent</code></td><td>è¿”å› 404 é”™è¯¯ï¼Œæ ¼å¼åŒ–å“åº”</td></tr><tr><td>ä¸­é—´ä»¶é¡ºåº</td><td>æ£€æŸ¥è¯·æ±‚æ—¥å¿—</td><td>è¯·æ±‚æŒ‰æ­£ç¡®é¡ºåºé€šè¿‡ä¸­é—´ä»¶</td></tr><tr><td>å†…å­˜ç›‘æ§</td><td>å¥åº·æ£€æŸ¥å“åº”</td><td>åŒ…å« RSSã€å †å†…å­˜ç­‰æŒ‡æ ‡</td></tr><tr><td>ç¯å¢ƒå˜é‡</td><td>æ£€æŸ¥é…ç½®åŠ è½½</td><td>ä¸åŒç¯å¢ƒåŠ è½½å¯¹åº”é…ç½®</td></tr></tbody></table>
<h4 data-id="heading-55">ğŸ“¦ æŠ€æœ¯æ ˆè¯¦æƒ…</h4>
<ul>
<li><strong>åç«¯æ¡†æ¶</strong>: Node.js 18+ + Express 5.2.1</li>
<li><strong>æ•°æ®åº“</strong>: MySQL 8.0 + Sequelize 6.37.7 ORM</li>
<li><strong>ç¼“å­˜</strong>: Redis 8.4.0</li>
<li><strong>è®¤è¯æˆæƒ</strong>: JWT + bcryptjs</li>
<li><strong>å®‰å…¨é˜²æŠ¤</strong>: Helmet + CORS + é™æµ
<ul>
<li>Winston: æ—¥å¿—ç³»ç»Ÿ</li>
<li>CORS: è·¨åŸŸå¤„ç†</li>
<li>Helmet: å®‰å…¨ä¸­é—´ä»¶</li>
<li>bcryptjs: å¯†ç å“ˆå¸Œï¼ˆåŠ å¯†ï¼‰åº“</li>
</ul>
</li>
<li><strong>æ—¥å¿—ç³»ç»Ÿ</strong>: Winston</li>
<li><strong>APIæ–‡æ¡£</strong>: Swagger</li>
<li><strong>å®¹å™¨åŒ–</strong>: Docker + Docker Compose</li>
<li><strong>ä»£ç è§„èŒƒ</strong>: ESLint + Prettier + Husky + lint-staged</li>
<li><strong>åŒ…ç®¡ç†</strong>: pnpm workspaces (monorepo)</li>
<li><strong>æ—¶é—´å¤„ç†</strong>: Day.js</li>
<li><strong>å·¥å…·åº“</strong>: Lodash-es + å…±äº«å·¥å…·æ¨¡å—</li>
</ul>
<h4 data-id="heading-56">ğŸ“‹ ç¯å¢ƒä¾èµ–æ¸…å•</h4>









































<table><thead><tr><th>å·¥å…·</th><th>ç‰ˆæœ¬è¦æ±‚</th><th>å®‰è£…æ–¹å¼</th><th>éªŒè¯å‘½ä»¤</th></tr></thead><tbody><tr><td>Node.js</td><td>â‰¥ 18.0.0</td><td>å·²å®‰è£…</td><td><code>node --version</code></td></tr><tr><td>npm/pnpm</td><td>â‰¥ 9.0.0</td><td>å·²å®‰è£…</td><td><code>pnpm --version</code></td></tr><tr><td>MySQL</td><td>8.0</td><td>Docker å®¹å™¨</td><td><code>docker ps</code></td></tr><tr><td>Redis</td><td>8.4.0</td><td>Docker å®¹å™¨</td><td><code>docker ps</code></td></tr><tr><td>bcryptjs</td><td>3.0.3</td><td><code>pnpm add bcryptjs</code></td><td>å·²å®‰è£…</td></tr></tbody></table>
<h4 data-id="heading-57">ğŸ§­ æ“ä½œæ­¥éª¤</h4>
<h5 data-id="heading-58">æ­¥éª¤ 1: é¡¹ç›®ç»“æ„åˆå§‹åŒ–</h5>
<p>**ä¸»è¦ä¾èµ–åŒ…ï¼ˆå·²é…ç½®ï¼‰: **</p>
<ul>
<li><strong>Webæ¡†æ¶</strong>: Express 4.18.2</li>
<li><strong>å®‰å…¨</strong>: Helmet 7.1.0 + CORS 2.8.5</li>
<li><strong>æ—¥å¿—</strong>: Winston 3.11.0</li>
<li><strong>å·¥å…·</strong>: dayjs 1.11.10, debug 4.3.4</li>
</ul>
<h5 data-id="heading-59">æ­¥éª¤ 1.5: ä»é›¶å¼€å§‹åˆ›å»ºï¼ˆå¯é€‰ï¼‰</h5>
<p>å¦‚æœéœ€è¦é‡æ–°åˆ›å»ºåç«¯é¡¹ç›®ï¼Œä»¥ä¸‹æ˜¯å…·ä½“çš„åˆ›å»ºæ­¥éª¤:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åˆå§‹åŒ–åç«¯é¡¹ç›®</span>
<span class="hljs-built_in">mkdir</span> packages/backend
<span class="hljs-built_in">cd</span> packages/backend
pnpm init

<span class="hljs-comment"># 2. å®‰è£…æ ¸å¿ƒä¾èµ–</span>
pnpm add express mysql2 redis sequelize bcryptjs jsonwebtoken cors helmet
pnpm add express-rate-limit express-validator winston dotenv swagger-jsdoc swagger-ui-express
pnpm add debug dayjs

<span class="hljs-comment"># 3. å®‰è£…å¼€å‘ä¾èµ–</span>
pnpm add -D eslint nodemon

<span class="hljs-comment"># 4. åˆ›å»º package.json è„šæœ¬</span>
<span class="hljs-comment"># ä¿®æ”¹ package.json æ·»åŠ  scripts å­—æ®µ</span>
<span class="hljs-string">"main"</span>: <span class="hljs-string">"app.js"</span>,
<span class="hljs-string">"type"</span>: <span class="hljs-string">"module"</span>,
<span class="hljs-string">"scripts"</span>: {
  <span class="hljs-string">"dev"</span>: <span class="hljs-string">"node --watch app.js"</span>,
  <span class="hljs-string">"start"</span>: <span class="hljs-string">"node app.js"</span>,
  <span class="hljs-string">"init-db"</span>: <span class="hljs-string">"node scripts/init-db.js"</span>,
  <span class="hljs-string">"check-indexes"</span>: <span class="hljs-string">"node scripts/check-indexes.js"</span>
},

<span class="hljs-comment"># 5. æ ¸å¿ƒç›®å½•ç»“æ„</span>
<span class="hljs-built_in">mkdir</span> -p config models modules middleware utils scripts logs
<span class="hljs-comment"># ç„¶ååˆ›å»ºç›¸åº”çš„æ–‡ä»¶å’Œé…ç½®</span>
</code></pre>
<h5 data-id="heading-60">æ­¥éª¤ 2: é…ç½®æ–‡ä»¶æ­å»º</h5>
<p>åˆ›å»º <code>touch config/index.js</code>:</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> dotenv <span class="hljs-keyword">from</span> <span class="hljs-string">'dotenv'</span>;

<span class="hljs-comment">// åŠ è½½ç¯å¢ƒå˜é‡</span>
<span class="hljs-keyword">const</span> env = process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> || <span class="hljs-string">'development'</span>;
<span class="hljs-keyword">const</span> envFiles = [
  <span class="hljs-string">'../../.env.local'</span>,        <span class="hljs-comment">// æœ¬åœ°è¦†ç›–ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰</span>
  <span class="hljs-string">`../../.env.<span class="hljs-subst">${env}</span>`</span>,       <span class="hljs-comment">// ç¯å¢ƒç‰¹å®šé…ç½®</span>
  <span class="hljs-string">'../../.env'</span>               <span class="hljs-comment">// é»˜è®¤é…ç½®</span>
];

envFiles.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> {
  <span class="hljs-keyword">try</span> {
    dotenv.<span class="hljs-title function_">config</span>({ <span class="hljs-attr">path</span>: file });
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// é™é»˜è·³è¿‡ä¸å­˜åœ¨çš„æ–‡ä»¶</span>
  }
});

<span class="hljs-comment">// é…ç½®å¯¹è±¡</span>
<span class="hljs-keyword">const</span> config = {
  <span class="hljs-comment">// env config</span>
  <span class="hljs-attr">env</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span>,

  <span class="hljs-comment">// server config</span>
  <span class="hljs-attr">server</span>: {
    <span class="hljs-attr">host</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">HOST</span>,
    <span class="hljs-attr">port</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span>
  },

  <span class="hljs-comment">// db config</span>
  <span class="hljs-attr">database</span>: {
    <span class="hljs-attr">host</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_HOST</span>,
    <span class="hljs-attr">port</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_PORT</span>,
    <span class="hljs-attr">name</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_NAME</span>,
    <span class="hljs-attr">user</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_USER</span>,
    <span class="hljs-attr">password</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DB_PASSWORD</span>,
    <span class="hljs-attr">pool</span>: {
      <span class="hljs-attr">max</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> ? <span class="hljs-number">10</span> : <span class="hljs-number">5</span>,
      <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>,
      <span class="hljs-attr">acquire</span>: <span class="hljs-number">30000</span>,
      <span class="hljs-attr">idle</span>: <span class="hljs-number">10000</span>
    }
  },

  <span class="hljs-comment">// redis cache config</span>
  <span class="hljs-attr">redis</span>: {
    <span class="hljs-attr">host</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">REDIS_HOST</span>,
    <span class="hljs-attr">port</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">REDIS_PORT</span>,
    <span class="hljs-attr">password</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">REDIS_PASSWORD</span>,
  },

  <span class="hljs-comment">// cors config - cors æ˜¯ç”¨æ¥è§£å†³ è·¨åŸŸèµ„æºå…±äº«</span>
  <span class="hljs-comment">// ç”¨äºé…ç½® cors: è·¨åŸŸèµ„æºå…±äº« (CORS) çš„é…ç½®</span>
  <span class="hljs-attr">cors</span>: {
    <span class="hljs-comment">// origin: process.env.CORS_ORIGIN,</span>
    <span class="hljs-attr">origin</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">origin, callback</span>) {
      <span class="hljs-comment">// å…è®¸æ²¡æœ‰ origin çš„è¯·æ±‚ï¼ˆæ¯”å¦‚ç§»åŠ¨ç«¯åº”ç”¨æˆ– Postman æµ‹è¯•ï¼‰</span>
      <span class="hljs-keyword">if</span> (!origin) <span class="hljs-keyword">return</span> <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, <span class="hljs-literal">true</span>);
      
      <span class="hljs-keyword">const</span> isProduct = process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span>;
      <span class="hljs-keyword">if</span> (isProduct) {
        <span class="hljs-keyword">const</span> corsOrigin = process.<span class="hljs-property">env</span>.<span class="hljs-property">CORS_ORIGIN</span> || <span class="hljs-string">''</span>;
        <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒ: åªå…è®¸ corsOrigin é‡ŒæŒ‡å®šçš„ è®¿é—®æº</span>
        <span class="hljs-keyword">const</span> allowedOrigins = corsOrigin ? corsOrigin.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>) : [];
        <span class="hljs-keyword">if</span> (allowedOrigins.<span class="hljs-title function_">includes</span>(origin)) {
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, <span class="hljs-literal">true</span>);
        }
        <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// æ‹’ç»ä¸åœ¨å…è®¸åˆ—è¡¨ä¸­çš„ origin</span>
          <span class="hljs-keyword">const</span> msg = <span class="hljs-string">`è¯¥ç½‘ç«™çš„CORSç­–ç•¥ä¸å…è®¸ä»æŒ‡å®šçš„æºè®¿é—®: <span class="hljs-subst">${origin}</span>`</span>;
          <span class="hljs-keyword">return</span> <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(msg), <span class="hljs-literal">false</span>);
        }
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å¼€å‘ç¯å¢ƒ, å…¨éƒ¨æ”¾è¡Œ</span>
        <span class="hljs-keyword">return</span> <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, <span class="hljs-literal">true</span>);
      }
    },
    <span class="hljs-attr">credentials</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// å…è®¸å‘é€ cookies å’Œè®¤è¯ä¿¡æ¯</span>
  },

  <span class="hljs-comment">// logger config</span>
  <span class="hljs-attr">logging</span>: {
    <span class="hljs-attr">level</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> ? <span class="hljs-string">'info'</span> : <span class="hljs-string">'debug'</span>,
    <span class="hljs-attr">file</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span>
  }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> config;
</code></pre>
<p>åˆ›å»º <code>touch config/database.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Sequelize</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'sequelize'</span>;
<span class="hljs-keyword">import</span> config <span class="hljs-keyword">from</span> <span class="hljs-string">'./index.js'</span>;

<span class="hljs-keyword">const</span> options = {
  <span class="hljs-attr">host</span>: config.<span class="hljs-property">database</span>.<span class="hljs-property">host</span>,
  <span class="hljs-attr">port</span>: config.<span class="hljs-property">database</span>.<span class="hljs-property">port</span>,
  <span class="hljs-attr">database</span>: config.<span class="hljs-property">database</span>.<span class="hljs-property">name</span>,
  <span class="hljs-attr">username</span>: config.<span class="hljs-property">database</span>.<span class="hljs-property">user</span>,
  <span class="hljs-attr">password</span>: config.<span class="hljs-property">database</span>.<span class="hljs-property">password</span>,
  <span class="hljs-attr">dialect</span>: <span class="hljs-string">'mysql'</span>,
  <span class="hljs-attr">logging</span>: config.<span class="hljs-property">env</span> === <span class="hljs-string">'development'</span> ? <span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span> : <span class="hljs-literal">false</span>,
  <span class="hljs-attr">pool</span>: config.<span class="hljs-property">database</span>.<span class="hljs-property">pool</span>,
  <span class="hljs-attr">timezone</span>: <span class="hljs-string">'+08:00'</span>
};

<span class="hljs-keyword">const</span> sequelize = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Sequelize</span>(options);

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> sequelize;
</code></pre>
<h5 data-id="heading-61">æ­¥éª¤ 3ï¼šå·¥å…·å‡½æ•°åˆ›å»º</h5>
<p>åˆ›å»º <code>touch utils/logger.js</code>ï¼š</p>
<h5 data-id="heading-62">æ­¥éª¤ 4ï¼šä¸­é—´ä»¶åˆ›å»º</h5>
<p>åˆ›å»º <code>touch middleware/requestLogger.js</code>ï¼š</p>
<p>åˆ›å»º <code>touch middleware/errorHandler.js</code>ï¼š</p>
<h5 data-id="heading-63">æ­¥éª¤ 5ï¼šåº”ç”¨å…¥å£åˆ›å»º</h5>
<p>åˆ›å»º <code>touch app.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">'express'</span>;
<span class="hljs-keyword">import</span> cors <span class="hljs-keyword">from</span> <span class="hljs-string">'cors'</span>;
<span class="hljs-keyword">import</span> helmet <span class="hljs-keyword">from</span> <span class="hljs-string">'helmet'</span>;

<span class="hljs-comment">// process.env åœ¨ ./config/index.js é‡Œå¤„ç†</span>
<span class="hljs-keyword">import</span> config <span class="hljs-keyword">from</span> <span class="hljs-string">'./config/index.js'</span>;
<span class="hljs-keyword">import</span> sequelize <span class="hljs-keyword">from</span> <span class="hljs-string">'./config/database.js'</span>; <span class="hljs-comment">// å¯¼å…¥æ•°æ®åº“è¿æ¥</span>
<span class="hljs-keyword">import</span> logger <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils/logger.js'</span>;

<span class="hljs-comment">/* 
  å¯¼å…¥æ‰€æœ‰æ¨¡å‹ï¼Œç¡®ä¿æ‰€æœ‰ Sequelize æ¨¡å‹åœ¨åº”ç”¨å¯åŠ¨æ—¶è¢«æ­£ç¡®æ³¨å†Œå’Œåˆå§‹åŒ–ã€‚
  å…·ä½“ä½œç”¨ï¼š
    1. æ¨¡å‹æ³¨å†Œ - è®© Sequelize è¯†åˆ«æ‰€æœ‰å®šä¹‰çš„æ•°æ®åº“æ¨¡å‹ï¼ˆUserã€Articleã€Category ç­‰ï¼‰
    2. å…³è”å…³ç³»å»ºç«‹ - æ‰§è¡Œæ¨¡å‹ä¹‹é—´çš„å…³è”å…³ç³»ï¼ˆå¦‚å¤–é”®ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤šå…³ç³»ï¼‰
    3. æ•°æ®åº“åŒæ­¥æ”¯æŒ - ä¸ºåç»­çš„ sequelize.sync() æ“ä½œæä¾›å®Œæ•´çš„æ¨¡å‹ä¿¡æ¯ï¼Œç¡®ä¿æ•°æ®åº“è¡¨ç»“æ„èƒ½æ­£ç¡®åˆ›å»ºæˆ–æ›´æ–°
    4. å‰¯ä½œç”¨æ‰§è¡Œ - å³ä½¿æ²¡æœ‰ç›´æ¥ä½¿ç”¨å¯¼å…¥çš„å†…å®¹ï¼Œä¹Ÿä¼šæ‰§è¡Œ models/index.js æ–‡ä»¶ä¸­çš„æ‰€æœ‰åˆå§‹åŒ–ä»£ç 
  è¿™æ˜¯ Sequelize åº”ç”¨çš„æ ‡å‡†åšæ³•ï¼Œå¿…é¡»åœ¨æ•°æ®åº“è¿æ¥å’ŒåŒæ­¥ä¹‹å‰å®Œæˆæ¨¡å‹çš„æ³¨å†Œã€‚
*/</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'./models/index.js'</span>;

<span class="hljs-keyword">import</span> { requestLogger } <span class="hljs-keyword">from</span> <span class="hljs-string">'./middleware/requestLogger.js'</span>; <span class="hljs-comment">// å¯¼å…¥è¯·æ±‚æ—¥å¿—è®°å½•å™¨</span>
<span class="hljs-keyword">import</span> { errorHandler, notFoundHandler } <span class="hljs-keyword">from</span> <span class="hljs-string">'./middleware/errorHandler.js'</span>; <span class="hljs-comment">// é”™è¯¯å¤„ç†ä¸­é—´ä»¶</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PORT</span> = config.<span class="hljs-property">server</span>.<span class="hljs-property">port</span>;

<span class="hljs-comment">// ä¸­é—´ä»¶é…ç½®</span>
app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">helmet</span>({
  <span class="hljs-attr">contentSecurityPolicy</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ç¦ç”¨CSP, ç”±å‰ç«¯ vite-plugin-csp å’Œ nginx å¤„ç†</span>
})); <span class="hljs-comment">// å®‰å…¨ä¸­é—´ä»¶ - helmet: è®¾ç½®å„ç§ HTTP å¤´ä»¥å¢å¼ºå®‰å…¨æ€§</span>

app.<span class="hljs-title function_">use</span>(<span class="hljs-title function_">cors</span>(config.<span class="hljs-property">cors</span>)); <span class="hljs-comment">// cors: è·¨åŸŸèµ„æºå…±äº« (CORS)</span>

<span class="hljs-comment">// å®‰å…¨ä¸­é—´ä»¶ - cors: è·¨åŸŸèµ„æºå…±äº« (CORS)</span>
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>()); <span class="hljs-comment">// è§£æè¯·æ±‚ä½“(JSON)</span>
app.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">urlencoded</span>({ <span class="hljs-attr">extended</span>: <span class="hljs-literal">true</span> })); <span class="hljs-comment">// è§£æè¯·æ±‚ä½“(URL ç¼–ç )</span>
app.<span class="hljs-title function_">use</span>(requestLogger); <span class="hljs-comment">// è¯·æ±‚æ—¥å¿—ï¼ˆrequestLoggerï¼‰</span>

<span class="hljs-comment">// å¥åº·æ£€æŸ¥æ¥å£ - åŠ¨æ€æ£€æµ‹å„é¡¹æœåŠ¡çŠ¶æ€</span>
app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/health'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">'å¥åº·æ£€æŸ¥å¼€å§‹'</span>);

  <span class="hljs-comment">// åˆå§‹åŒ–çŠ¶æ€å˜é‡</span>
  <span class="hljs-keyword">let</span> dbStatus = <span class="hljs-string">'disconnected'</span>;
  <span class="hljs-keyword">let</span> redisStatus = <span class="hljs-string">'disconnected'</span>;
  <span class="hljs-keyword">let</span> overallStatus = <span class="hljs-string">'healthy'</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 1. æ£€æŸ¥ MySQL æ•°æ®åº“è¿æ¥</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// åŠ¨æ€å¯¼å…¥æ•°æ®åº“è¿æ¥ï¼ˆé¿å…å¾ªç¯ä¾èµ–ï¼‰</span>
      <span class="hljs-keyword">const</span> { <span class="hljs-attr">default</span>: sequelize } = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./config/database.js'</span>);
      <span class="hljs-keyword">await</span> sequelize.<span class="hljs-title function_">authenticate</span>();
      dbStatus = <span class="hljs-string">'connected'</span>;
      logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">'âœ… æ•°æ®åº“è¿æ¥æ­£å¸¸'</span>);
    } <span class="hljs-keyword">catch</span> (dbError) {
      logger.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'âŒ æ•°æ®åº“è¿æ¥å¤±è´¥:'</span>, dbError.<span class="hljs-property">message</span>);
      dbStatus = <span class="hljs-string">'disconnected'</span>;
      overallStatus = <span class="hljs-string">'degraded'</span>; <span class="hljs-comment">// é™çº§ä½†ä¸è‡´å‘½</span>
    }

    <span class="hljs-comment">// 2. æ£€æŸ¥ Redis è¿æ¥ï¼ˆå¦‚æœå·²é…ç½®ï¼‰</span>
    

    <span class="hljs-comment">// 3. è·å–å†…å­˜ä½¿ç”¨æƒ…å†µ</span>
    <span class="hljs-keyword">const</span> memUsage = process.<span class="hljs-title function_">memoryUsage</span>();
    <span class="hljs-keyword">const</span> memoryInfo = {
      <span class="hljs-attr">rss</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(memUsage.rss / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>)}</span>MB`</span>,           <span class="hljs-comment">// å¸¸é©»å†…å­˜</span>
      <span class="hljs-attr">heapTotal</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(memUsage.heapTotal / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>)}</span>MB`</span>, <span class="hljs-comment">// å †å†…å­˜æ€»é‡</span>
      <span class="hljs-attr">heapUsed</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(memUsage.heapUsed / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>)}</span>MB`</span>,   <span class="hljs-comment">// å·²ç”¨å †å†…å­˜</span>
      <span class="hljs-attr">external</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(memUsage.external / <span class="hljs-number">1024</span> / <span class="hljs-number">1024</span>)}</span>MB`</span>    <span class="hljs-comment">// å¤–éƒ¨å†…å­˜</span>
    };

    <span class="hljs-comment">// 4. æ„å»ºå“åº”æ•°æ®</span>
    <span class="hljs-keyword">const</span> healthData = {
      <span class="hljs-attr">status</span>: overallStatus,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
      <span class="hljs-attr">uptime</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(process.uptime())}</span>s`</span>,
      <span class="hljs-attr">version</span>: process.<span class="hljs-property">version</span>,
      <span class="hljs-attr">environment</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> || <span class="hljs-string">'development'</span>,
      <span class="hljs-attr">database</span>: dbStatus,
      <span class="hljs-attr">memory</span>: memoryInfo,
      <span class="hljs-attr">pid</span>: process.<span class="hljs-property">pid</span>
    };

    <span class="hljs-comment">// 5. æ ¹æ®æ•´ä½“çŠ¶æ€è¿”å›ç›¸åº”çš„ HTTP çŠ¶æ€ç </span>
    <span class="hljs-keyword">const</span> httpStatus = overallStatus === <span class="hljs-string">'healthy'</span> ? <span class="hljs-number">200</span> : <span class="hljs-number">503</span>;

    res.<span class="hljs-title function_">status</span>(httpStatus).<span class="hljs-title function_">json</span>({
      <span class="hljs-attr">code</span>: httpStatus,
      <span class="hljs-attr">message</span>: overallStatus === <span class="hljs-string">'healthy'</span> ? <span class="hljs-string">'æœåŠ¡æ­£å¸¸'</span> : <span class="hljs-string">'æœåŠ¡éƒ¨åˆ†å¼‚å¸¸'</span>,
      <span class="hljs-attr">data</span>: healthData
    });

    logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">`ğŸ¥ å¥åº·æ£€æŸ¥å®Œæˆ - çŠ¶æ€: <span class="hljs-subst">${overallStatus}</span>`</span>);

  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// æ•è·æ‰€æœ‰æœªé¢„æœŸçš„é”™è¯¯</span>
    logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">`ğŸ’¥ å¥åº·æ£€æŸ¥å‘ç”Ÿä¸¥é‡é”™è¯¯: <span class="hljs-subst">${error.message}</span>`</span>, {
      <span class="hljs-attr">stack</span>: error.<span class="hljs-property">stack</span>,
      <span class="hljs-attr">uptime</span>: process.<span class="hljs-title function_">uptime</span>(),
      <span class="hljs-attr">memory</span>: process.<span class="hljs-title function_">memoryUsage</span>()
    });

    <span class="hljs-comment">// è¿”å›æœåŠ¡ä¸å¯ç”¨çŠ¶æ€</span>
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">503</span>).<span class="hljs-title function_">json</span>({
      <span class="hljs-attr">code</span>: <span class="hljs-number">503</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'æœåŠ¡å¼‚å¸¸'</span>,
      <span class="hljs-attr">data</span>: {
        <span class="hljs-attr">status</span>: <span class="hljs-string">'unhealthy'</span>,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
        <span class="hljs-attr">uptime</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(process.uptime())}</span>s`</span>,
        <span class="hljs-attr">version</span>: process.<span class="hljs-property">version</span>,
        <span class="hljs-attr">environment</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> || <span class="hljs-string">'development'</span>,
        <span class="hljs-attr">database</span>: dbStatus,
        <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span>,
        <span class="hljs-attr">pid</span>: process.<span class="hljs-property">pid</span>
      }
    });
  }
});

<span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
app.<span class="hljs-title function_">use</span>(notFoundHandler);   <span class="hljs-comment">// å¤„ç† 404 é”™è¯¯</span>
app.<span class="hljs-title function_">use</span>(errorHandler);      <span class="hljs-comment">// å…¨å±€é”™è¯¯å¤„ç†</span>

<span class="hljs-comment">// å¯åŠ¨æœåŠ¡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">startServer</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// âœ… éªŒè¯ MySQL è¿æ¥å¯ç”¨</span>
    <span class="hljs-comment">// åŠ¨æ€å¯¼å…¥æ•°æ®åº“è¿æ¥ï¼ˆé¿å…å¾ªç¯ä¾èµ–ï¼‰</span>
      <span class="hljs-keyword">const</span> { <span class="hljs-attr">default</span>: sequelize } = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./config/database.js'</span>);
    <span class="hljs-keyword">await</span> sequelize.<span class="hljs-title function_">authenticate</span>();
    logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">'æ•°æ®åº“è¿æ¥æˆåŠŸ'</span>);

    logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">`æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:<span class="hljs-subst">${PORT}</span>`</span>);

    <span class="hljs-comment">// âœ… åŒæ­¥ Sequelize æ¨¡å‹ï¼ˆå¼€å‘ç¯å¢ƒï¼‰</span>
    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">env</span> === <span class="hljs-string">'development'</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">await</span> sequelize.<span class="hljs-title function_">sync</span>({ <span class="hljs-attr">alter</span>: <span class="hljs-literal">true</span> });
        <span class="hljs-comment">// await sequelize.sync({ force: true });</span>
        logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">'æ•°æ®åº“æ¨¡å‹å·²åŒæ­¥'</span>);
      } <span class="hljs-keyword">catch</span> (syncError) {
        logger.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'æ•°æ®åº“æ¨¡å‹åŒæ­¥å¤±è´¥ï¼ˆå¯èƒ½æ˜¯è¡¨ç»“æ„å·²å­˜åœ¨ï¼‰ï¼š'</span>, syncError.<span class="hljs-property">message</span>);
        logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">'ç»§ç»­å¯åŠ¨æœåŠ¡å™¨...'</span>);
      }
    }

    <span class="hljs-comment">// âœ… ç›‘å¬æŒ‡å®šç«¯å£ï¼ˆé»˜è®¤ 3001ï¼‰</span>
    <span class="hljs-comment">// âœ… è¾“å‡ºå¯åŠ¨æˆåŠŸæ—¥å¿—</span>
    app.<span class="hljs-title function_">listen</span>(<span class="hljs-variable constant_">PORT</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\n'</span> + <span class="hljs-string">'='</span>.<span class="hljs-title function_">repeat</span>(<span class="hljs-number">60</span>));
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸš€ æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼'</span>, config.<span class="hljs-property">env</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'='</span>.<span class="hljs-title function_">repeat</span>(<span class="hljs-number">60</span>));
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ“ æœåŠ¡åœ°å€: http://localhost:<span class="hljs-subst">${PORT}</span>`</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ“š API æ–‡æ¡£: http://localhost:<span class="hljs-subst">${PORT}</span>/api-docs`</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ğŸ¥ å¥åº·æ£€æŸ¥: http://localhost:<span class="hljs-subst">${PORT}</span>/api/health`</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'='</span>.<span class="hljs-title function_">repeat</span>(<span class="hljs-number">60</span>) + <span class="hljs-string">'\n'</span>);
      
      logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">`æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:<span class="hljs-subst">${PORT}</span>`</span>);
      logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">`API æ–‡æ¡£: http://localhost:<span class="hljs-subst">${PORT}</span>/api-docs`</span>);
    });
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'\nâš ï¸  æœåŠ¡å™¨å¯åŠ¨å¤±è´¥ï¼Œè¯·è§£å†³ä¸Šè¿°é—®é¢˜åé‡è¯•\n'</span>);
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);
  }
};

<span class="hljs-comment">// æ‰§è¡Œå¯åŠ¨æœåŠ¡å™¨</span>
<span class="hljs-title function_">startServer</span>();
</code></pre>
<hr/>
<h3 data-id="heading-64">é˜¶æ®µäº”ï¼šæ•°æ®åº“è®¾è®¡ä¸åˆå§‹åŒ–</h3>
<h4 data-id="heading-65">ğŸ¯ æœ¬é˜¶æ®µç›®æ ‡</h4>
<p>åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„ï¼Œåˆå§‹åŒ–åŸºç¡€æ•°æ®ã€‚</p>
<h4 data-id="heading-66">âœ… é¢„æœŸç»“æœ</h4>
<ul>
<li>Sequelize æ¨¡å‹æ­£ç¡®å®šä¹‰ï¼ŒåŒ…å«æ‰€æœ‰å¿…è¦å­—æ®µ</li>
<li>æ•°æ®åº“è¡¨ç»“æ„è‡ªåŠ¨åˆ›å»ºæˆ–åŒæ­¥æˆåŠŸ</li>
<li>åŸºç¡€æ•°æ®ï¼ˆç®¡ç†å‘˜ç”¨æˆ·ã€åˆ†ç±»ç­‰ï¼‰æ­£ç¡®æ’å…¥</li>
<li>æ•°æ®åº“ç´¢å¼•ä¼˜åŒ–é…ç½®ç”Ÿæ•ˆ</li>
<li>å¯†ç åŠ å¯†å·¥å…·æ­£å¸¸å·¥ä½œ</li>
</ul>
<h4 data-id="heading-67">ğŸ“ éªŒè¯æ ‡å‡†</h4>













































<table><thead><tr><th>æ£€æŸ¥é¡¹</th><th>éªŒè¯å‘½ä»¤</th><th>æœŸæœ›ç»“æœ</th></tr></thead><tbody><tr><td>è¡¨ç»“æ„åŒæ­¥</td><td><code>cd packages/backend &amp;&amp; pnpm run init-db</code></td><td>æ— é”™è¯¯ï¼Œæ˜¾ç¤ºåŒæ­¥æˆåŠŸ</td></tr><tr><td>æ¨¡å‹å®šä¹‰</td><td>æ£€æŸ¥ models/ ç›®å½•</td><td>åŒ…å« User.js, Category.js ç­‰æ¨¡å‹æ–‡ä»¶</td></tr><tr><td>åŸºç¡€æ•°æ®</td><td>æŸ¥è¯¢æ•°æ®åº“</td><td>åŒ…å«ç®¡ç†å‘˜ç”¨æˆ·å’Œé»˜è®¤åˆ†ç±»</td></tr><tr><td>å¯†ç åŠ å¯†</td><td>æµ‹è¯• hashPassword å‡½æ•°</td><td>å¯†ç æ­£ç¡®åŠ å¯†å’ŒéªŒè¯</td></tr><tr><td>æ•°æ®åº“ç´¢å¼•</td><td><code>SHOW INDEX FROM users;</code></td><td>åŒ…å«å¿…è¦çš„ç´¢å¼•</td></tr><tr><td>å¤–é”®å…³ç³»</td><td>æ£€æŸ¥è¡¨ç»“æ„</td><td>æ¨¡å‹é—´çš„å…³è”å…³ç³»æ­£ç¡®</td></tr><tr><td>æ•°æ®å®Œæ•´æ€§</td><td>æ’å…¥æµ‹è¯•æ•°æ®</td><td>æ— çº¦æŸå†²çªï¼Œæ•°æ®æ­£ç¡®å­˜å‚¨</td></tr></tbody></table>
<h4 data-id="heading-68">ğŸ“¦ æŠ€æœ¯æ ˆè¯¦æƒ…</h4>
<ul>
<li><strong>æ•°æ®åº“</strong>: MySQL 8.0 + Sequelize 6.37.7 ORM</li>
</ul>
<h4 data-id="heading-69">ğŸ§­ æ“ä½œæ­¥éª¤</h4>
<h5 data-id="heading-70">æ­¥éª¤ 1ï¼šåˆ›å»ºutilså·¥å…·è„šæœ¬</h5>
<p>åˆ›å»º <code>touch utils/bcrypt.js</code>ï¼š</p>
<h5 data-id="heading-71">æ­¥éª¤ 2ï¼šåˆ›å»ºæ•°æ®æ¨¡å‹</h5>
<p>åˆ›å»º <code>touch models/User.js</code>:</p>
<p>åˆ›å»º <code>touch models/Category.js</code>:</p>
<p>åˆ›å»º <code>touch models/index.js</code>:</p>
<h5 data-id="heading-72">æ­¥éª¤ 3ï¼šåˆ›å»ºåˆå§‹åŒ–è„šæœ¬</h5>
<p>åˆ›å»º <code>touch scripts/init-db.js</code>ï¼š</p>
<h5 data-id="heading-73">æ­¥éª¤ 4ï¼šè¿è¡Œåˆå§‹åŒ–è„šæœ¬</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> packages/backend
pnpm run init-db
</code></pre>
<hr/>
<h3 data-id="heading-74">é˜¶æ®µå…­ï¼šJWTè®¤è¯ç³»ç»Ÿ</h3>
<h4 data-id="heading-75">ğŸ¯ æœ¬é˜¶æ®µç›®æ ‡</h4>
<p>JWTè®¤è¯ç³»ç»Ÿå®ç°æ–¹æ¡ˆ: æ„å»º backend + frontend çš„JWTç™»å½•ç®¡ç†</p>
<h4 data-id="heading-76">âœ… é¢„æœŸç»“æœ</h4>
<ul>
<li>ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ç™»å‡ºåŠŸèƒ½å®Œæ•´å®ç°</li>
<li>JWT token æ­£ç¡®ç”Ÿæˆã€éªŒè¯å’Œè¿‡æœŸå¤„ç†</li>
<li>æƒé™æ§åˆ¶ä¸­é—´ä»¶æŒ‰è§’è‰²æ­£ç¡®è¿‡æ»¤è®¿é—®</li>
<li>å¯†ç å®‰å…¨åŠ å¯†å­˜å‚¨ï¼Œæ”¯æŒéªŒè¯</li>
<li>è®¤è¯å¤±è´¥æ—¶è¿”å›é€‚å½“çš„é”™è¯¯ä¿¡æ¯</li>
</ul>
<h4 data-id="heading-77">ğŸ“ éªŒè¯æ ‡å‡†</h4>













































<table><thead><tr><th>æ£€æŸ¥é¡¹</th><th>éªŒè¯å‘½ä»¤</th><th>æœŸæœ›ç»“æœ</th></tr></thead><tbody><tr><td>ç”¨æˆ·æ³¨å†Œ</td><td><code>curl -X POST http://localhost:3001/api/auth/register -d '{"username":"test","password":"123456"}'</code></td><td>è¿”å› 201 çŠ¶æ€å’Œ token</td></tr><tr><td>ç”¨æˆ·ç™»å½•</td><td><code>curl -X POST http://localhost:3001/api/auth/login -d '{"username":"admin","password":"admin123"}'</code></td><td>è¿”å› 200 çŠ¶æ€å’Œ token</td></tr><tr><td>JWT éªŒè¯</td><td>å¸¦ token è®¿é—®å—ä¿æŠ¤æ¥å£</td><td>è¿”å›ç”¨æˆ·æ•°æ®ï¼Œæ—  401 é”™è¯¯</td></tr><tr><td>æƒé™æ§åˆ¶</td><td>æ™®é€šç”¨æˆ·è®¿é—®ç®¡ç†å‘˜æ¥å£</td><td>è¿”å› 403 æƒé™ä¸è¶³é”™è¯¯</td></tr><tr><td>Token è¿‡æœŸ</td><td>ä½¿ç”¨è¿‡æœŸ token è®¿é—®</td><td>è¿”å› 401 æ— æ•ˆä»¤ç‰Œé”™è¯¯</td></tr><tr><td>å¯†ç éªŒè¯</td><td>é”™è¯¯çš„å¯†ç ç™»å½•</td><td>è¿”å› 401 ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯</td></tr><tr><td>ç”¨æˆ·ä¿¡æ¯è·å–</td><td>GET /api/users/current</td><td>è¿”å›å½“å‰ç”¨æˆ·ä¿¡æ¯</td></tr></tbody></table>
<h4 data-id="heading-78">ğŸ“¦ æŠ€æœ¯æ ˆè¯¦æƒ…</h4>
<ul>
<li><strong>è®¤è¯æˆæƒ</strong>: JWT + bcryptjs</li>
<li><strong>jsonwebtoken</strong>: JWT tokenç”Ÿæˆå’ŒéªŒè¯</li>
<li><strong>bcryptjs</strong>: å¯†ç å“ˆå¸ŒåŠ å¯†</li>
<li><strong>express-validator</strong>: ä»–æ˜¯ Node.js/Express ç”Ÿæ€ä¸­å¤„ç†è¯·æ±‚å‚æ•°æ ¡éªŒå’Œæ•°æ®éªŒè¯çš„æ ¸å¿ƒä¸­é—´ä»¶åº“ï¼Œä¸“é—¨è§£å†³åç«¯æ¥å£çš„å‚æ•°åˆæ³•æ€§é—®é¢˜</li>
</ul>
<h4 data-id="heading-79">ğŸ“‹ ç¯å¢ƒä¾èµ–æ¸…å•</h4>





























<table><thead><tr><th>å·¥å…·</th><th>ç‰ˆæœ¬è¦æ±‚</th><th>å®‰è£…æ–¹å¼</th><th>éªŒè¯å‘½ä»¤</th></tr></thead><tbody><tr><td>jsonwebtoken</td><td>9.0.3</td><td><code>pnpm add jsonwebtoken</code></td><td>å·²å®‰è£…</td></tr><tr><td>bcryptjs</td><td>3.0.3</td><td><code>pnpm add bcryptjs</code></td><td>å·²å®‰è£…</td></tr><tr><td>express-validator</td><td>7.3.1</td><td><code>pnpm add express-validator</code></td><td>å·²å®‰è£…</td></tr></tbody></table>
<h4 data-id="heading-80">ğŸ§­ æ“ä½œæ­¥éª¤</h4>
<h5 data-id="heading-81">æ­¥éª¤ 1ï¼šæ›´æ–°ç¯å¢ƒå˜é‡é…ç½®</h5>
<p>æ£€æŸ¥åœ¨ <code>.env</code> å’Œ <code>.evn.development</code> æ–‡ä»¶ä¸­æ˜¯å¦æ·»åŠ JWTé…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># JWTé…ç½®</span>
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=7d
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript">  <span class="hljs-comment">// jwt config</span>
  <span class="hljs-attr">jwt</span>: {
    <span class="hljs-attr">secret</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">JWT_SECRET</span>,
    <span class="hljs-attr">expiresIn</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">JWT_EXPIRES_IN</span>
  },
  <span class="hljs-attr">cors</span>: { ... }
</code></pre>
<h5 data-id="heading-82">æ­¥éª¤ 2ï¼šåˆ›å»ºJWTå·¥å…·å‡½æ•° å’Œ Redis ç¼“å­˜å·¥å…·ç±»(cache.js)</h5>
<p>é¦–å…ˆåˆ›å»ºJWTç›¸å…³çš„å·¥å…·å‡½æ•°ï¼š
è¿›å…¥æœåŠ¡ç«¯ä»£ç ç›®å½•: <code>cd packages/backend</code>
åˆ›å»º <code>touch utils/jwt.js</code></p>
<h5 data-id="heading-83">æ­¥éª¤ 3ï¼šåˆ›å»ºè®¤è¯ä¸­é—´ä»¶ å’Œ express-validator ä¸­é—´ä»¶</h5>
<p>åˆ›å»º: <code>touch middleware/auth.js</code></p>
<p>åˆ›å»º: <code>touch middleware/validator.js</code></p>
<h5 data-id="heading-84">æ­¥éª¤ 4ï¼šåˆ›å»ºAuthæ§åˆ¶å™¨ã€è·¯ç”± å’Œ æœåŠ¡</h5>
<p>åˆ›å»ºmodulesæ‰€éœ€ç›®å½•: <code>mkdir -p modules/{auth,user,article,stats}</code></p>
<p><strong>4.1 åˆ›å»ºæ§åˆ¶å™¨</strong>
åˆ›å»º: <code>touch modules/auth/controller.js</code></p>
<p><strong>4.2 åˆ›å»ºè·¯ç”±</strong>
åˆ›å»º: <code>touch modules/auth/router.js</code></p>
<p><strong>4.2 åˆ›å»ºAuthæœåŠ¡(é€šè¿‡Sequelizeä¸MySQLé€šä¿¡)</strong>
åˆ›å»º: <code>touch modules/auth/service.js</code></p>
<h5 data-id="heading-85">æ­¥éª¤ 5ï¼šåˆ›å»ºUseræ§åˆ¶å™¨ã€è·¯ç”± å’Œ æœåŠ¡</h5>
<p>åˆ›å»º: <code>touch modules/user/controller.js</code></p>
<p>åˆ›å»º: <code>touch modules/user/router.js</code></p>
<p>åˆ›å»º: <code>touch modules/user/service.js</code></p>
<h5 data-id="heading-86">æ­¥éª¤ 6ï¼šapp.js è·¯ç”±è¡¥å…¨</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯¼å…¥è·¯ç”±</span>
<span class="hljs-keyword">import</span> userRouter <span class="hljs-keyword">from</span> <span class="hljs-string">'./modules/user/router.js'</span>; <span class="hljs-comment">// ç”¨æˆ·è·¯ç”±</span>
<span class="hljs-keyword">import</span> authRouter <span class="hljs-keyword">from</span> <span class="hljs-string">'./modules/auth/router.js'</span>; <span class="hljs-comment">// è®¤è¯è·¯ç”±</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
...

<span class="hljs-comment">// ä½¿ç”¨è·¯ç”± - API è·¯ç”±, ä¸šåŠ¡è·¯ç”±æŒ‚è½½</span>
app.<span class="hljs-title function_">use</span>(<span class="hljs-string">'/api/users'</span>, userRouter); <span class="hljs-comment">// ç”¨æˆ·æ¨¡å—, ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¿¡æ¯ç®¡ç†</span>
app.<span class="hljs-title function_">use</span>(<span class="hljs-string">'/api/auth'</span>, authRouter); <span class="hljs-comment">// è®¤è¯æ¨¡å—, èº«ä»½è®¤è¯ã€æƒé™æ§åˆ¶ã€Token ç®¡ç†</span>
</code></pre>
<h5 data-id="heading-87">æ­¥éª¤ 7ï¼šæµ‹è¯•è®¤è¯ç³»ç»Ÿ</h5>
<p>åˆ›å»ºæµ‹è¯•ç”¨æˆ·åï¼Œå¯ä»¥æµ‹è¯•ä»¥ä¸‹æ¥å£ï¼š</p>
<ul>
<li>åœ¨packages/backendé¡¹æ ¹ç›®å½• é‡æ–°å¯åŠ¨æœåŠ¡: <code>npm run dev</code></li>
<li>åœ¨packages/backendé¡¹æ ¹ç›®å½• åˆ›å»º <code>touch test-users.sh</code> æ–‡ä»¶</li>
<li>ç¼–è¾‘æ­¤æ–‡ä»¶</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">  <span class="hljs-comment">#!/bin/bash</span>

  <span class="hljs-comment"># æœåŠ¡å™¨åœ°å€</span>
  BASE_URL=<span class="hljs-string">"http://localhost:3001"</span>

  <span class="hljs-comment"># ç™»å½•è·å– token</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"=== ç™»å½•è·å– Token ==="</span>
  LOGIN_RESPONSE=$(curl -s -X POST <span class="hljs-variable">$BASE_URL</span>/api/auth/login \
    -H <span class="hljs-string">"Content-Type: application/json"</span> \
    -d <span class="hljs-string">'{"username":"admin","password":"admin123"}'</span>)

  TOKEN=$(<span class="hljs-built_in">echo</span> <span class="hljs-variable">$LOGIN_RESPONSE</span> | jq -r <span class="hljs-string">'.data.token'</span>)
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"Token: <span class="hljs-variable">$TOKEN</span>"</span>

  <span class="hljs-comment"># æµ‹è¯•å„ä¸ªæ¥å£</span>
  <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n=== è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ ==="</span>
  curl -X GET <span class="hljs-variable">$BASE_URL</span>/api/users/current \
    -H <span class="hljs-string">"Authorization: Bearer <span class="hljs-variable">$TOKEN</span>"</span> | jq

  <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n=== è·å–ç”¨æˆ·åˆ—è¡¨ ==="</span>
  curl -X GET <span class="hljs-string">"<span class="hljs-variable">$BASE_URL</span>/api/users?page=1&amp;pageSize=5"</span> \
    -H <span class="hljs-string">"Authorization: Bearer <span class="hljs-variable">$TOKEN</span>"</span> | jq

  <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\n=== è·å–ç”¨æˆ·è¯¦æƒ… (ID=1) ==="</span>
  curl -X GET <span class="hljs-variable">$BASE_URL</span>/api/users/1 \
    -H <span class="hljs-string">"Authorization: Bearer <span class="hljs-variable">$TOKEN</span>"</span> | jq
</code></pre>
<ul>
<li>ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™: <code>chmod +x test-users.sh</code></li>
<li>æ‰§è¡Œè„šæœ¬, ä½¿ç”¨ bash å‘½ä»¤è¿è¡Œ: <code>bash test-users.sh</code></li>
<li>é¢„æœŸè¾“å‡ºç¤ºä¾‹</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">=== ç™»å½•è·å– Token ===
Token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

=== è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ ===
{
  <span class="hljs-string">"code"</span>: 200,
  <span class="hljs-string">"message"</span>: <span class="hljs-string">"è·å–æˆåŠŸ"</span>,
  <span class="hljs-string">"data"</span>: {
    <span class="hljs-string">"id"</span>: 1,
    <span class="hljs-string">"username"</span>: <span class="hljs-string">"admin"</span>,
    <span class="hljs-string">"email"</span>: <span class="hljs-string">"admin@example.com"</span>,
    <span class="hljs-string">"role"</span>: <span class="hljs-string">"admin"</span>,
    <span class="hljs-string">"status"</span>: <span class="hljs-string">"active"</span>
  }
}

=== è·å–ç”¨æˆ·åˆ—è¡¨ ===
{
  <span class="hljs-string">"code"</span>: 200,
  <span class="hljs-string">"message"</span>: <span class="hljs-string">"è·å–æˆåŠŸ"</span>,
  <span class="hljs-string">"data"</span>: {
    <span class="hljs-string">"list"</span>: [...],
    <span class="hljs-string">"total"</span>: 1,
    <span class="hljs-string">"page"</span>: 1,
    <span class="hljs-string">"pageSize"</span>: 5,
    <span class="hljs-string">"totalPages"</span>: 1
  }
}
</code></pre>
<h4 data-id="heading-88">âœ… å®é™…æµ‹è¯•éªŒè¯</h4>
<p>å®Œæˆ JWT è®¤è¯ç³»ç»Ÿæ­å»ºåï¼Œè®©æˆ‘ä»¬è¿›è¡Œå®Œæ•´çš„ API æµ‹è¯•éªŒè¯ï¼Œç¡®ä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œã€‚</p>
<h5 data-id="heading-89">æµ‹è¯•ç¯å¢ƒå‡†å¤‡</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. ç¡®ä¿åŸºç¡€æœåŠ¡è¿è¡Œ</span>
pnpm run docker-dev:up

<span class="hljs-comment"># 2. å¯åŠ¨åç«¯æœåŠ¡</span>
<span class="hljs-built_in">cd</span> packages/backend
pnpm run dev

<span class="hljs-comment"># 3. éªŒè¯å¥åº·æ£€æŸ¥</span>
curl http://localhost:3001/api/health | jq
<span class="hljs-comment"># åº”è¿”å›æ•°æ®åº“è¿æ¥çŠ¶æ€æ­£å¸¸</span>
</code></pre>
<hr/>
<h3 data-id="heading-90">é˜¶æ®µä¸ƒï¼šRedisåˆå§‹åŒ–</h3>
<h4 data-id="heading-91">ğŸ¯ æœ¬é˜¶æ®µç›®æ ‡</h4>
<p>é›†æˆ Redis ç¼“å­˜æœåŠ¡ï¼Œå®ç°æ•°æ®ç¼“å­˜ã€ä¼šè¯ç®¡ç†ç­‰åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-92">âœ… é¢„æœŸç»“æœ</h4>
<ul>
<li>Redis è¿æ¥é…ç½®æ­£ç¡®ï¼Œå®¢æˆ·ç«¯æˆåŠŸè¿æ¥</li>
<li>ç¼“å­˜æœåŠ¡ç±»å®ç°å®Œæ•´çš„ CRUD æ“ä½œ</li>
<li>å¥åº·æ£€æŸ¥åŒ…å« Redis è¿æ¥çŠ¶æ€</li>
<li>Token å­˜å‚¨åˆ° Redisï¼Œæ”¯æŒä¼šè¯ç®¡ç†</li>
<li>ç¼“å­˜æ•°æ®åœ¨é‡å¯åå¯æ¢å¤</li>
</ul>
<h4 data-id="heading-93">ğŸ“ éªŒè¯æ ‡å‡†</h4>













































<table><thead><tr><th>æ£€æŸ¥é¡¹</th><th>éªŒè¯å‘½ä»¤</th><th>æœŸæœ›ç»“æœ</th></tr></thead><tbody><tr><td>Redis è¿æ¥</td><td>å¥åº·æ£€æŸ¥æ¥å£</td><td>redis çŠ¶æ€ä¸º "connected"</td></tr><tr><td>ç¼“å­˜æ“ä½œ</td><td>æµ‹è¯•ç¼“å­˜ set/get</td><td>æ•°æ®æ­£ç¡®å­˜å‚¨å’Œè¯»å–</td></tr><tr><td>Token å­˜å‚¨</td><td>ç™»å½•åæ£€æŸ¥ Redis</td><td>token å­˜å‚¨åœ¨ Redis ä¸­</td></tr><tr><td>ç¼“å­˜è¿‡æœŸ</td><td>è®¾ç½®è¿‡æœŸæ—¶é—´çš„æ•°æ®</td><td>åˆ°æœŸåè‡ªåŠ¨æ¸…é™¤</td></tr><tr><td>è¿æ¥æ¢å¤</td><td>é‡å¯ Redis å</td><td>åº”ç”¨è‡ªåŠ¨é‡è¿</td></tr><tr><td>å†…å­˜ç›‘æ§</td><td>Redis INFO å‘½ä»¤</td><td>å†…å­˜ä½¿ç”¨æ­£å¸¸</td></tr><tr><td>æ•°æ®æŒä¹…åŒ–</td><td>é‡å¯å®¹å™¨å</td><td>AOF æ•°æ®ä¿ç•™</td></tr></tbody></table>
<h4 data-id="heading-94">ğŸ“ Redis ç¼“å­˜ç­–ç•¥</h4>
<p><strong>ç¼“å­˜é”®å‘½åè§„èŒƒï¼š</strong></p>
<ul>
<li><code>user:{id}</code> - ç”¨æˆ·ä¿¡æ¯ç¼“å­˜</li>
<li><code>article:{id}</code> - æ–‡ç« å†…å®¹ç¼“å­˜</li>
<li><code>articles:list:{page}</code> - æ–‡ç« åˆ—è¡¨ç¼“å­˜</li>
<li><code>token:{userId}</code> - ç”¨æˆ·è®¤è¯ä»¤ç‰Œ</li>
</ul>
<p><strong>ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼š</strong></p>
<ul>
<li>ç”¨æˆ·ä¿¡æ¯ï¼š1å°æ—¶</li>
<li>æ–‡ç« å†…å®¹ï¼š30åˆ†é’Ÿ</li>
<li>æ–‡ç« åˆ—è¡¨ï¼š10åˆ†é’Ÿ</li>
<li>è®¤è¯ä»¤ç‰Œï¼š7å¤©</li>
</ul>
<p><strong>ç¼“å­˜æ›´æ–°ç­–ç•¥ï¼š</strong></p>
<ul>
<li>æ•°æ®æ›´æ–°æ—¶ä¸»åŠ¨åˆ é™¤ç›¸å…³ç¼“å­˜</li>
<li>ä½¿ç”¨ç¼“å­˜ç©¿é€ä¿æŠ¤</li>
<li>å®ç°ç¼“å­˜é¢„çƒ­æœºåˆ¶</li>
</ul>
<h4 data-id="heading-95">ğŸ“¦ æŠ€æœ¯æ ˆè¯¦æƒ…</h4>
<ul>
<li><strong>ç¼“å­˜</strong>: Redis 8.4.0, å†…å­˜æ•°æ®åº“å’Œç¼“å­˜æœåŠ¡</li>
</ul>
<h4 data-id="heading-96">ğŸ“‹ ç¯å¢ƒä¾èµ–æ¸…å•</h4>























<table><thead><tr><th>å·¥å…·</th><th>ç‰ˆæœ¬è¦æ±‚</th><th>å®‰è£…æ–¹å¼</th><th>éªŒè¯å‘½ä»¤</th></tr></thead><tbody><tr><td>Redis</td><td>5.10.0</td><td><code>pnpm add redis</code></td><td>å·²å®‰è£…</td></tr><tr><td>Docker Redis</td><td>8.4.0</td><td>Docker å®¹å™¨</td><td><code>docker ps</code></td></tr></tbody></table>
<h4 data-id="heading-97">ğŸ“ é¡¹ç›®ç»“æ„æ¦‚è§ˆ</h4>
<pre><code class="hljs language-bash" lang="bash">packages/backend/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ redis.js           <span class="hljs-comment"># Redis è¿æ¥é…ç½®</span>
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ cache.js           <span class="hljs-comment"># Redis ç¼“å­˜æœåŠ¡ç±»ï¼ˆå·²åˆ›å»ºï¼‰</span>
â””â”€â”€ app.js                 <span class="hljs-comment"># åº”ç”¨å…¥å£ï¼ˆéœ€è¦é›†æˆ Redisï¼‰</span>
</code></pre>
<h4 data-id="heading-98">å½“å‰é¡¹ç›®çŠ¶æ€åˆ†æ</h4>
<p><strong>å·²æœ‰çš„èµ„æºï¼š</strong></p>
<ul>
<li>âœ… Redis ä¾èµ–å·²å®‰è£…ï¼ˆredis 5.10.0ï¼‰</li>
<li>âœ… Docker Redis æœåŠ¡é…ç½®å·²å®Œæˆ</li>
</ul>
<p><strong>ç¼ºå¤±çš„éƒ¨åˆ†ï¼š</strong></p>
<ul>
<li>âŒ Redis è¿æ¥é…ç½®å·²å®ç°ï¼ˆconfig/redis.jsï¼‰</li>
<li>âŒ åç«¯é›†æˆ Redis è¿æ¥</li>
<li>âŒ Redis ç¼“å­˜æœåŠ¡åœ¨åº”ç”¨ä¸­çš„ä½¿ç”¨</li>
</ul>
<h4 data-id="heading-99">ğŸ§­ æ“ä½œæ­¥éª¤</h4>
<h5 data-id="heading-100">åœæ­¢æœåŠ¡ + æ¸…ç†æ•°æ®åº“:</h5>
<pre><code class="hljs language-dash" lang="dash"># åœæ­¢ Docker æœåŠ¡
pnpm docker-dev:down

# åˆ é™¤æ•°æ®åº“å·ï¼ˆè¿™ä¼šåˆ é™¤æ‰€æœ‰æ•°æ®ï¼‰
# pnpm docker-dev:delete (æš‚æ—¶å–æ¶ˆæ­¤æ­¥éª¤)

# é‡æ–°å¯åŠ¨æœåŠ¡
pnpm docker-dev:up
</code></pre>
<h5 data-id="heading-101">æ­¥éª¤ 1ï¼šç¡®è®¤ Redis è¿æ¥é…ç½®</h5>
<p>é¡¹ç›®å·²åŒ…å«å®Œæ•´çš„ Redis è¿æ¥é…ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">packages/backend/
â”œâ”€â”€ config/
    â””â”€â”€ redis.js        <span class="hljs-comment"># Redis è¿æ¥é…ç½®</span>
</code></pre>
<h5 data-id="heading-102">æ­¥éª¤ 2ï¼šRedis è¿æ¥é…ç½®è¯¦è§£</h5>
<p><code>cd packages/backend</code> ç›®å½•ä¸‹, åˆ›å»º <code>touch config/redis.js</code>ï¼š</p>
<p><code>cd packages/backend</code> ç›®å½•ä¸‹, åˆ›å»º <code>touch utils/cache.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/** 
 * æ ¸å¿ƒé€»è¾‘æ˜¯ä½¿ç”¨ redisClient å®ä¾‹ æ‰§è¡Œ Redis æ“ä½œï¼Œ
 * é€šè¿‡ try-catch å—å¤„ç†é”™è¯¯ï¼Œ
 * ä½¿ç”¨ logger è®°å½•é”™è¯¯ä¿¡æ¯ï¼Œ
 * æœ€å å¯¼å‡º å•ä¾‹å®ä¾‹ ä¾›å…¶ä»–æ¨¡å— ä½¿ç”¨ã€‚
*/</span>

<span class="hljs-keyword">import</span> redisClient <span class="hljs-keyword">from</span> <span class="hljs-string">'../config/redis.js'</span>;
<span class="hljs-keyword">import</span> logger <span class="hljs-keyword">from</span> <span class="hljs-string">'./logger.js'</span>;

<span class="hljs-comment">/**
 * Redis ç¼“å­˜å·¥å…·ç±»
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheService</span> {
  <span class="hljs-comment">/**
   * è·å–ç¼“å­˜
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} key ç¼“å­˜é”®
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise&lt;any&gt;</span>} ç¼“å­˜å€¼
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> value = <span class="hljs-keyword">await</span> redisClient.<span class="hljs-title function_">get</span>(key);
      <span class="hljs-keyword">return</span> value ? <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(value) : <span class="hljs-literal">null</span>;
    } <span class="hljs-keyword">catch</span> (error) {
      logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Cache get error: <span class="hljs-subst">${error.message}</span>`</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
  }

  <span class="hljs-comment">/**
   * è®¾ç½®ç¼“å­˜
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} key ç¼“å­˜é”®
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">any</span>} value ç¼“å­˜å€¼
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} expire è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">set</span>(<span class="hljs-params">key, value, expire = <span class="hljs-number">3600</span></span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> redisClient.<span class="hljs-title function_">setEx</span>(key, expire, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value));
    } <span class="hljs-keyword">catch</span> (error) {
      logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Cache set error: <span class="hljs-subst">${error.message}</span>`</span>);
    }
  }

  <span class="hljs-comment">/**
   * åˆ é™¤ç¼“å­˜
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} key ç¼“å­˜é”®
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">del</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> redisClient.<span class="hljs-title function_">del</span>(key);
    } <span class="hljs-keyword">catch</span> (error) {
      logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Cache del error: <span class="hljs-subst">${error.message}</span>`</span>);
    }
  }

  <span class="hljs-comment">/**
   * æ‰¹é‡åˆ é™¤ç¼“å­˜ï¼ˆæ”¯æŒé€šé…ç¬¦ï¼‰
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} pattern åŒ¹é…æ¨¡å¼
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">delPattern</span>(<span class="hljs-params">pattern</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> keys = <span class="hljs-keyword">await</span> redisClient.<span class="hljs-title function_">keys</span>(pattern);
      <span class="hljs-keyword">if</span> (keys.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">await</span> redisClient.<span class="hljs-title function_">del</span>(keys);
      }
    } <span class="hljs-keyword">catch</span> (error) {
      logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Cache delPattern error: <span class="hljs-subst">${error.message}</span>`</span>);
    }
  }

  <span class="hljs-comment">/**
   * æ£€æŸ¥ç¼“å­˜æ˜¯å¦å­˜åœ¨
   * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} key ç¼“å­˜é”®
   * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">Promise&lt;boolean&gt;</span>}
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">exists</span>(<span class="hljs-params">key</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> redisClient.<span class="hljs-title function_">exists</span>(key) === <span class="hljs-number">1</span>;
    } <span class="hljs-keyword">catch</span> (error) {
      logger.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Cache exists error: <span class="hljs-subst">${error.message}</span>`</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CacheService</span>();
</code></pre>
<h5 data-id="heading-103">æ­¥éª¤ 4ï¼šåœ¨åº”ç”¨ä¸­é›†æˆ Redis + æ›´æ–°å¥åº·æ£€æŸ¥æ¥å£</h5>
<p>æ›´æ–° <code>app.js</code>ï¼Œé›†æˆ Redis è¿æ¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/** 
 * æ ¸å¿ƒé€»è¾‘æ˜¯æ›´æ–°å¥åº·æ£€æŸ¥æ¥å£ï¼Œé›†æˆ Redis è¿æ¥ï¼Œå¹¶è¿”å› Redis è¿æ¥çŠ¶æ€ã€‚
*/</span>

<span class="hljs-keyword">import</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">'express'</span>;
<span class="hljs-comment">// ... å…¶ä»–å¯¼å…¥</span>
<span class="hljs-keyword">import</span> redisClient <span class="hljs-keyword">from</span> <span class="hljs-string">'./config/redis.js'</span>; <span class="hljs-comment">// å¯¼å…¥ Redis å®¢æˆ·ç«¯</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
<span class="hljs-comment">// ... ä¸­é—´ä»¶é…ç½®</span>

<span class="hljs-comment">// è·¯ç”±é…ç½®ï¼ˆåç»­æ·»åŠ ï¼‰</span>
app.<span class="hljs-title function_">use</span>(<span class="hljs-string">'/api/auth'</span>, authRouter); <span class="hljs-comment">// è®¤è¯æ¨¡å—, èº«ä»½è®¤è¯ã€æƒé™æ§åˆ¶ã€Token ç®¡ç†</span>
app.<span class="hljs-title function_">use</span>(<span class="hljs-string">'/api/users'</span>, userRouter); <span class="hljs-comment">// ç”¨æˆ·æ¨¡å—, ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¿¡æ¯ç®¡ç†</span>
<span class="hljs-comment">// app.use('/api/articles', articleRouter);</span>

app.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/health'</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">'å¥åº·æ£€æŸ¥å¼€å§‹'</span>);

  <span class="hljs-comment">/*
    å¥åº·æ£€æŸ¥å†…å®¹ï¼š
      âœ… MySQL æ•°æ®åº“è¿æ¥çŠ¶æ€
      âœ… Redis ç¼“å­˜è¿æ¥çŠ¶æ€
      âœ… å†…å­˜ä½¿ç”¨æƒ…å†µï¼ˆRSSã€Heap Totalã€Heap Usedï¼‰
      âœ… æœåŠ¡è¿è¡Œæ—¶é—´ï¼ˆUptimeï¼‰
      âœ… Node.js ç‰ˆæœ¬ä¿¡æ¯
      âœ… ç¯å¢ƒæ ‡è¯†
  */</span>

  <span class="hljs-comment">// åˆå§‹åŒ–çŠ¶æ€å˜é‡</span>
  <span class="hljs-keyword">let</span> dbStatus = <span class="hljs-string">'disconnected'</span>;
  <span class="hljs-keyword">let</span> redisStatus = <span class="hljs-string">'disconnected'</span>;
  <span class="hljs-keyword">let</span> overallStatus = <span class="hljs-string">'healthy'</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// 1. æ£€æŸ¥ MySQL æ•°æ®åº“è¿æ¥</span>
    ...

    <span class="hljs-comment">// 2. æ£€æŸ¥ Redis è¿æ¥</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// å°è¯•åŠ¨æ€å¯¼å…¥ Redis å®¢æˆ·ç«¯ï¼ˆå¯èƒ½è¿˜æœªåˆ›å»ºï¼‰</span>
      <span class="hljs-keyword">const</span> { <span class="hljs-attr">default</span>: redisClient } = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./config/redis.js'</span>);
      <span class="hljs-keyword">await</span> redisClient.<span class="hljs-title function_">ping</span>();
      redisStatus = <span class="hljs-string">'connected'</span>;
      logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">'âœ… Redis è¿æ¥æ­£å¸¸'</span>);
    } <span class="hljs-keyword">catch</span> (redisError) {
      <span class="hljs-comment">// Redis è¿æ¥å¤±è´¥ä¸å½±å“æ•´ä½“å¥åº·çŠ¶æ€</span>
      logger.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'âš ï¸ Redis è¿æ¥å¤±è´¥ï¼Œå°†ä»¥æ— ç¼“å­˜æ¨¡å¼è¿è¡Œ:'</span>, redisError.<span class="hljs-property">message</span>);
      redisStatus = <span class="hljs-string">'disconnected'</span>;
    }

    <span class="hljs-comment">// 3. è·å–å†…å­˜ä½¿ç”¨æƒ…å†µ</span>
    ...

    <span class="hljs-comment">// 4. æ„å»ºå“åº”æ•°æ®</span>
    <span class="hljs-keyword">const</span> healthData = {
      ...
      <span class="hljs-attr">redis</span>: redisStatus,
      <span class="hljs-attr">memory</span>: memoryInfo,
      <span class="hljs-attr">pid</span>: process.<span class="hljs-property">pid</span>
    };

    <span class="hljs-comment">// 5. æ ¹æ®æ•´ä½“çŠ¶æ€è¿”å›ç›¸åº”çš„ HTTP çŠ¶æ€ç </span>
    ...

  } <span class="hljs-keyword">catch</span> (error) {
    ...
    <span class="hljs-comment">// è¿”å›æœåŠ¡ä¸å¯ç”¨çŠ¶æ€</span>
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">503</span>).<span class="hljs-title function_">json</span>({
      <span class="hljs-attr">code</span>: <span class="hljs-number">503</span>,
      <span class="hljs-attr">message</span>: <span class="hljs-string">'æœåŠ¡å¼‚å¸¸'</span>,
      <span class="hljs-attr">data</span>: {
        ...
        <span class="hljs-attr">redis</span>: redisStatus,
        <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span>,
        <span class="hljs-attr">pid</span>: process.<span class="hljs-property">pid</span>
      }
    });
  }
});

<span class="hljs-comment">// å¯åŠ¨æœåŠ¡</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">startServer</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// éªŒè¯æ•°æ®åº“è¿æ¥</span>
    <span class="hljs-comment">// åŠ¨æ€å¯¼å…¥æ•°æ®åº“è¿æ¥ï¼ˆé¿å…å¾ªç¯ä¾èµ–ï¼‰</span>
      <span class="hljs-keyword">const</span> { <span class="hljs-attr">default</span>: sequelize } = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./config/database.js'</span>);
    <span class="hljs-keyword">await</span> sequelize.<span class="hljs-title function_">authenticate</span>();
    logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">'æ•°æ®åº“è¿æ¥æˆåŠŸ'</span>);

    <span class="hljs-comment">// æ£€æŸ¥ Redis è¿æ¥</span>
    <span class="hljs-keyword">let</span> redisStatus = <span class="hljs-string">'disconnected'</span>;
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// å°è¯•åŠ¨æ€å¯¼å…¥ Redis å®¢æˆ·ç«¯ï¼ˆå¯èƒ½è¿˜æœªåˆ›å»ºï¼‰</span>
      <span class="hljs-keyword">const</span> { <span class="hljs-attr">default</span>: redisClient } = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./config/redis.js'</span>);
      <span class="hljs-keyword">await</span> redisClient.<span class="hljs-title function_">ping</span>();
      redisStatus = <span class="hljs-string">'connected'</span>;
      logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">'Redis è¿æ¥æˆåŠŸ'</span>);
    } <span class="hljs-keyword">catch</span> (redisError) {
      logger.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'Redis è¿æ¥å¤±è´¥ï¼Œå°†ä»¥æ— ç¼“å­˜æ¨¡å¼è¿è¡Œ:'</span>, redisError.<span class="hljs-property">message</span>);
    }

    <span class="hljs-comment">// å¯åŠ¨æœåŠ¡å™¨</span>
    ...

  } <span class="hljs-keyword">catch</span> (error) {
    ...
  }
};
</code></pre>
<h5 data-id="heading-104">æ­¥éª¤ 5ï¼šRedis ç¼“å­˜ä½¿ç”¨ç¤ºä¾‹</h5>
<p>åœ¨ä¸šåŠ¡ä»£ç ä¸­ä½¿ç”¨ç¼“å­˜æœåŠ¡, æ¯”å¦‚: <code>modules/auth/service.js</code>:</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨ auth service ä¸­ä½¿ç”¨ç¼“å­˜å­˜å‚¨ token</span>
<span class="hljs-keyword">import</span> cacheService <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/cache.js'</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthService</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">username, password</span>) {
    <span class="hljs-comment">// ... ç™»å½•é€»è¾‘</span>

    <span class="hljs-comment">// ä¸ºäº†é¿å…æ¯æ¬¡ç”¨æˆ·ç™»å½•éƒ½ä¼šç”Ÿæˆæ–°çš„tokenå¹¶è¦†ç›–å­˜å‚¨åœ¨Redisä¸­çš„æ—§tokenï¼Œè¿™ä¼šå¯¼è‡´åŒä¸€ä¸ªç”¨æˆ·å¯ä»¥åŒæ—¶æ‹¥æœ‰å¤šä¸ªæœ‰æ•ˆçš„ç™»å½•ä¼šè¯ã€‚</span>
    <span class="hljs-comment">// æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç»ç™»å½•ï¼Œå¦‚æœå·²ç™»å½• åˆ™å…ˆç™»å‡ºä¹‹å‰çš„ç™»å½•</span>
    <span class="hljs-keyword">const</span> existingToken = <span class="hljs-keyword">await</span> cacheService.<span class="hljs-title function_">get</span>(<span class="hljs-string">`token:<span class="hljs-subst">${user.id}</span>`</span>);
    <span class="hljs-keyword">if</span> (existingToken) {
      <span class="hljs-comment">// åœ¨æ—¥å¿—ä¸­è®°å½•é‡å¤ç™»å½•è¡Œä¸ºï¼Œä¾¿äºç›‘æ§</span>
      logger.<span class="hljs-title function_">info</span>(<span class="hljs-string">`ç”¨æˆ· <span class="hljs-subst">${username}</span> å·²åœ¨å…¶ä»–åœ°æ–¹ç™»å½•ï¼Œæ‰§è¡Œç™»å‡ºæ“ä½œ`</span>);
      <span class="hljs-comment">// å½“ç”¨æˆ·é‡å¤ç™»å½•æ—¶ï¼Œç³»ç»Ÿä¼šå…ˆåˆ é™¤ä¹‹å‰çš„token</span>
      <span class="hljs-keyword">await</span> cacheService.<span class="hljs-title function_">del</span>(<span class="hljs-string">`token:<span class="hljs-subst">${user.id}</span>`</span>);
    }

    <span class="hljs-comment">// ç”Ÿæˆ token</span>
    <span class="hljs-keyword">const</span> token = <span class="hljs-title function_">generateToken</span>({
      <span class="hljs-attr">userId</span>: user.<span class="hljs-property">id</span>,
      <span class="hljs-attr">username</span>: user.<span class="hljs-property">username</span>,
      <span class="hljs-attr">role</span>: user.<span class="hljs-property">role</span>
    });

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”Ÿæˆ Token: '</span>, token);

    <span class="hljs-comment">// å°† token å­˜å‚¨åˆ° Redisï¼ˆ7å¤©è¿‡æœŸï¼‰</span>
    <span class="hljs-keyword">await</span> cacheService.<span class="hljs-title function_">set</span>(<span class="hljs-string">`token:<span class="hljs-subst">${user.id}</span>`</span>, token, <span class="hljs-number">7</span> * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span>);

    <span class="hljs-comment">// è¿”å›ç”¨æˆ·ä¿¡æ¯ï¼ˆä¸åŒ…å«å¯†ç ï¼‰å’Œ Token</span>
    <span class="hljs-keyword">const</span> userData = user.<span class="hljs-title function_">toJSON</span>();
    <span class="hljs-keyword">delete</span> userData.<span class="hljs-property">password</span>;

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">user</span>: userData,
      token
    };
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">logout</span>(<span class="hljs-params">userId</span>) {
    <span class="hljs-comment">// ä» Redis ä¸­åˆ é™¤ token</span>
    <span class="hljs-keyword">await</span> cacheService.<span class="hljs-title function_">del</span>(<span class="hljs-string">`token:<span class="hljs-subst">${userId}</span>`</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">register</span>(<span class="hljs-params">data</span>) {
    <span class="hljs-comment">// ... æ³¨å†Œé€»è¾‘</span>
    <span class="hljs-keyword">await</span> cacheService.<span class="hljs-title function_">set</span>(<span class="hljs-string">`token:<span class="hljs-subst">${user.id}</span>`</span>, token, <span class="hljs-number">7</span> * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span>);

    <span class="hljs-keyword">return</span> {
      user,
      token
    };
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AuthService</span>();
</code></pre>
<h4 data-id="heading-105">âœ… éªŒè¯æ–¹å¼</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. æ£€æŸ¥ Redis å®¹å™¨çŠ¶æ€ </span>
docker compose -f docker/docker-compose.dev.yml --env-file ./.env.development ps redis
<span class="hljs-comment"># åº”æ˜¾ç¤º redis å®¹å™¨çŠ¶æ€ä¸º Up/Healthy</span>

<span class="hljs-comment"># 2. æµ‹è¯• Redis è¿æ¥</span>
docker compose -f docker/docker-compose.dev.yml --env-file ./.env.development <span class="hljs-built_in">exec</span> redis redis-cli -a redis123 ping
<span class="hljs-comment"># åº”è¿”å› PONG</span>

<span class="hljs-comment"># 3. æµ‹è¯• Redis å¯†ç è®¤è¯</span>
docker compose -f docker/docker-compose.dev.yml --env-file ./.env.development <span class="hljs-built_in">exec</span> redis redis-cli -a redis123
<span class="hljs-comment"># è¿›å…¥ Redis CLI åæ‰§è¡Œ:</span>
AUTH redis123
<span class="hljs-comment"># åº”è¿”å› OK</span>

<span class="hljs-comment"># 4. æ£€æŸ¥åç«¯å¯åŠ¨æ—¥å¿—</span>
<span class="hljs-built_in">cd</span> packages/backend &amp;&amp; pnpm run dev
<span class="hljs-comment"># æ—¥å¿—ä¸­åº”æ˜¾ç¤º "Redis è¿æ¥æˆåŠŸ"</span>

<span class="hljs-comment"># 5. æµ‹è¯•å¥åº·æ£€æŸ¥æ¥å£</span>
curl http://localhost:3001/api/health | jq
<span class="hljs-comment"># åº”è¿”å›è¯¦ç»†çš„å¥åº·çŠ¶æ€ä¿¡æ¯ï¼ŒåŒ…å«ï¼š</span>
<span class="hljs-comment"># - status: "healthy"ï¼ˆæ•°æ®åº“å’ŒRediséƒ½æ­£å¸¸ï¼‰</span>
<span class="hljs-comment"># - database: "connected"</span>
<span class="hljs-comment"># - redis: "connected"</span>
<span class="hljs-comment"># - memory: å†…å­˜ä½¿ç”¨æƒ…å†µ</span>
<span class="hljs-comment"># - uptime: æœåŠ¡è¿è¡Œæ—¶é—´</span>
<span class="hljs-comment"># - version: Node.jsç‰ˆæœ¬</span>

<span class="hljs-comment"># 6. æµ‹è¯•ç¼“å­˜åŠŸèƒ½</span>
<span class="hljs-comment"># åœ¨ Redis CLI ä¸­æŸ¥çœ‹ç¼“å­˜æ•°æ®:</span>
<span class="hljs-comment"># KEYS *</span>
<span class="hljs-comment"># GET token:1 (å¦‚æœæœ‰ç”¨æˆ·ç™»å½•)</span>
</code></pre>
<p>è¿™ä¸ªé˜¶æ®µä¸ºåç»­çš„JWTè®¤è¯ã€ä¼šè¯ç®¡ç†å’Œæ•°æ®ç¼“å­˜åŠŸèƒ½å¥ å®šäº†åŸºç¡€ã€‚æ¥ä¸‹æ¥å¯ä»¥è¿›å…¥"é˜¶æ®µå…«ï¼šJWT + auth + Login"æ¥å®ç°å®Œæ•´çš„è®¤è¯ç³»ç»Ÿã€‚</p>
<hr/>
<h3 data-id="heading-106">é˜¶æ®µå…«ï¼šå‰ç«¯åå°ç®¡ç†ï¼ˆå¯é€‰ï¼‰</h3>
<h4 data-id="heading-107">ğŸ¯ æœ¬é˜¶æ®µç›®æ ‡</h4>
<p>æ„å»º Vue3 + Vite åå°ç®¡ç†ç•Œé¢ã€‚</p>
<h4 data-id="heading-108">âœ… é¢„æœŸç»“æœ</h4>
<ul>
<li>Vue3 + Vite å¼€å‘æœåŠ¡å™¨æˆåŠŸå¯åŠ¨</li>
<li>Element Plus ç»„ä»¶åº“æ­£ç¡®é›†æˆ</li>
<li>ç™»å½•é¡µé¢å¯æ­£å¸¸è®¿é—®å’Œä½¿ç”¨</li>
<li>API è¯·æ±‚æ­£ç¡®é…ç½®ï¼Œæ”¯æŒè·¨åŸŸ</li>
<li>è·¯ç”±ç³»ç»Ÿæ­£å¸¸å·¥ä½œï¼Œæ”¯æŒå¯¼èˆª</li>
</ul>
<h4 data-id="heading-109">ğŸ“ éªŒè¯æ ‡å‡†</h4>


















































<table><thead><tr><th>æ£€æŸ¥é¡¹</th><th>éªŒè¯å‘½ä»¤</th><th>æœŸæœ›ç»“æœ</th></tr></thead><tbody><tr><td>å¼€å‘æœåŠ¡å™¨</td><td><code>cd packages/frontend &amp;&amp; pnpm run dev</code></td><td>æœåŠ¡å™¨å¯åŠ¨åœ¨ 5173 ç«¯å£</td></tr><tr><td>é¡µé¢è®¿é—®</td><td>æµè§ˆå™¨è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A5173" target="_blank" title="http://localhost:5173" ref="nofollow noopener noreferrer">http://localhost:5173</a></td><td>æ˜¾ç¤ºç™»å½•é¡µé¢</td></tr><tr><td>API é›†æˆ</td><td>æ£€æŸ¥ç½‘ç»œè¯·æ±‚</td><td>è¯·æ±‚å‘é€åˆ°åç«¯ API</td></tr><tr><td>ç»„ä»¶æ¸²æŸ“</td><td>Element Plus ç»„ä»¶</td><td>æ­£ç¡®æ˜¾ç¤ºå’Œäº¤äº’</td></tr><tr><td>è·¯ç”±è·³è½¬</td><td>ç‚¹å‡»ç™»å½•æŒ‰é’®</td><td>æˆåŠŸè·³è½¬åˆ°å¯¹åº”é¡µé¢</td></tr><tr><td>æ„å»ºæµ‹è¯•</td><td><code>pnpm run build</code></td><td>ç”Ÿæˆ dist ç›®å½•</td></tr><tr><td>çƒ­é‡è½½</td><td>ä¿®æ”¹ä»£ç </td><td>é¡µé¢è‡ªåŠ¨åˆ·æ–°</td></tr><tr><td>ç¯å¢ƒå˜é‡</td><td>VITE_API_BASE_URL</td><td>æ­£ç¡®é…ç½® API åœ°å€</td></tr></tbody></table>
<h4 data-id="heading-110">ğŸ“‹ æŠ€æœ¯æ ˆè¯¦æƒ…</h4>
<ul>
<li><strong>å‰ç«¯æ¡†æ¶</strong>: Vue 3.5.24 + Nuxt 4.2.2 (SSR)</li>
<li><strong>æ„å»ºå·¥å…·</strong>: Vite (rolldown-vite@7.2.5) + pnpm 9.0.0</li>
<li><strong>UIç»„ä»¶åº“</strong>: Element Plus 2.13.0 + å›¾æ ‡åº“</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>: Pinia 3.0.4</li>
<li><strong>è·¯ç”±ç®¡ç†</strong>: Vue Router 4.x</li>
<li><strong>HTTPå®¢æˆ·ç«¯</strong>: Axios 1.13.2</li>
<li><strong>æ•°æ®å¯è§†åŒ–</strong>: ECharts 6.0.0</li>
<li><strong>Markdownç¼–è¾‘å™¨</strong>: Vditor 3.11.2 + md-editor-v3 6.3.1</li>
</ul>
<h4 data-id="heading-111">ğŸ“‹ ç¯å¢ƒä¾èµ–æ¸…å•</h4>



























































<table><thead><tr><th>å·¥å…·</th><th>ç‰ˆæœ¬è¦æ±‚</th><th>å®‰è£…æ–¹å¼</th><th>éªŒè¯å‘½ä»¤</th></tr></thead><tbody><tr><td>Vue</td><td>3.5.24</td><td><code>pnpm add vue</code></td><td>å·²å®‰è£…</td></tr><tr><td>Vite</td><td>rolldown-vite@7.2.5</td><td><code>pnpm add vite</code></td><td>å·²å®‰è£…</td></tr><tr><td>Element Plus</td><td>2.13.0</td><td><code>pnpm add element-plus</code></td><td>å·²å®‰è£…</td></tr><tr><td>Pinia</td><td>3.0.4</td><td><code>pnpm add pinia</code></td><td>å·²å®‰è£…</td></tr><tr><td>Vue Router</td><td>4.2.5</td><td>è·¯ç”±ç®¡ç†</td><td>å·²å®‰è£…</td></tr><tr><td>Axios</td><td>1.13.2</td><td>HTTP å®¢æˆ·ç«¯</td><td>å·²å®‰è£…</td></tr><tr><td>ECharts</td><td>6.0.0</td><td>å›¾è¡¨åº“</td><td>å·²å®‰è£…</td></tr><tr><td>Vditor</td><td>3.11.2</td><td>Markdown ç¼–è¾‘å™¨</td><td>å·²å®‰è£…</td></tr></tbody></table>
<h4 data-id="heading-112">ğŸ“ é¡¹ç›®ç»“æ„æ¦‚è§ˆ</h4>
<p>å‰ç«¯é¡¹ç›®ç»“æ„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">packages/frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/              <span class="hljs-comment"># API æ¥å£å°è£…</span>
â”‚   â”‚   â”œâ”€â”€ index.js     <span class="hljs-comment"># API åŸºç¡€é…ç½®</span>
â”‚   â”‚   â”œâ”€â”€ auth.js      <span class="hljs-comment"># è®¤è¯ç›¸å…³æ¥å£</span>
â”‚   â”‚   â”œâ”€â”€ article.js   <span class="hljs-comment"># æ–‡ç« ç›¸å…³æ¥å£</span>
â”‚   â”‚   â”œâ”€â”€ stats.js     <span class="hljs-comment"># ç»Ÿè®¡ç›¸å…³æ¥å£</span>
â”‚   â”‚   â””â”€â”€ user.js      <span class="hljs-comment"># ç”¨æˆ·ç›¸å…³æ¥å£</span>
â”‚   â”œâ”€â”€ components/       <span class="hljs-comment"># å…¨å±€ç»„ä»¶</span>
â”‚   â”‚   â”œâ”€â”€ BaseEChart.vue    <span class="hljs-comment"># å›¾è¡¨ç»„ä»¶</span>
â”‚   â”‚   â”œâ”€â”€ CanvasText.vue    <span class="hljs-comment"># ç”»å¸ƒæ–‡æœ¬ç»„ä»¶</span>
â”‚   â”‚   â””â”€â”€ MarkdownEditor.vue <span class="hljs-comment"># Markdown ç¼–è¾‘å™¨</span>
â”‚   â”œâ”€â”€ views/            <span class="hljs-comment"># é¡µé¢ç»„ä»¶</span>
â”‚   â”‚   â”œâ”€â”€ admin/        <span class="hljs-comment"># åå°ç®¡ç†é¡µé¢</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ Layout.vue     <span class="hljs-comment"># åå°å¸ƒå±€</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ Login.vue      <span class="hljs-comment"># ç™»å½•é¡µ</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.vue  <span class="hljs-comment"># ä»ªè¡¨æ¿</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ ArticleList.vue <span class="hljs-comment"># æ–‡ç« åˆ—è¡¨</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ ArticleForm.vue <span class="hljs-comment"># æ–‡ç« è¡¨å•</span>
â”‚   â”‚   â”‚   â””â”€â”€ UserList.vue   <span class="hljs-comment"># ç”¨æˆ·åˆ—è¡¨</span>
â”‚   â”‚   â””â”€â”€ frontend/      <span class="hljs-comment"># å‰å°é¡µé¢ï¼ˆå¯é€‰ï¼‰</span>
â”‚   â”œâ”€â”€ stores/           <span class="hljs-comment"># Pinia çŠ¶æ€ç®¡ç†</span>
â”‚   â”‚   â””â”€â”€ auth.js       <span class="hljs-comment"># è®¤è¯çŠ¶æ€</span>
â”‚   â”œâ”€â”€ router/           <span class="hljs-comment"># è·¯ç”±é…ç½®</span>
â”‚   â”‚   â””â”€â”€ index.js      <span class="hljs-comment"># è·¯ç”±å®šä¹‰</span>
â”‚   â”œâ”€â”€ composables/      <span class="hljs-comment"># ç»„åˆå¼å‡½æ•°</span>
â”‚   â”‚   â”œâ”€â”€ useDebounce.js    <span class="hljs-comment"># é˜²æŠ–</span>
â”‚   â”‚   â”œâ”€â”€ useErrorHandler.js <span class="hljs-comment"># é”™è¯¯å¤„ç†</span>
â”‚   â”‚   â”œâ”€â”€ useRequest.js     <span class="hljs-comment"># è¯·æ±‚å°è£…</span>
â”‚   â”‚   â””â”€â”€ useTabVisibility.js <span class="hljs-comment"># æ ‡ç­¾é¡µå¯è§æ€§</span>
â”‚   â”œâ”€â”€ utils/            <span class="hljs-comment"># å·¥å…·å‡½æ•°</span>
â”‚   â”‚   â”œâ”€â”€ request.js    <span class="hljs-comment"># Axios å°è£…</span>
â”‚   â”‚   â””â”€â”€ security.js   <span class="hljs-comment"># å®‰å…¨å·¥å…·</span>
â”‚   â”œâ”€â”€ workers/          <span class="hljs-comment"># Web Workers</span>
â”‚   â”‚   â””â”€â”€ markdown-processor.worker.js
â”‚   â””â”€â”€ main.js           <span class="hljs-comment"># åº”ç”¨å…¥å£</span>
â”œâ”€â”€ public/               <span class="hljs-comment"># é™æ€èµ„æº</span>
â”œâ”€â”€ vite.config.js        <span class="hljs-comment"># Vite é…ç½®</span>
â””â”€â”€ package.json          <span class="hljs-comment"># é¡¹ç›®é…ç½®</span>
</code></pre>
<h4 data-id="heading-113">å½“å‰é¡¹ç›®çŠ¶æ€åˆ†æ</h4>
<p><strong>å·²æœ‰çš„èµ„æºï¼š</strong></p>
<ul>
<li>âœ… Vue3 + Vite é¡¹ç›®ç»“æ„å·²é…ç½®</li>
<li>âœ… Element Plus UI ç»„ä»¶åº“å·²é›†æˆ</li>
<li>âœ… API æ¥å£å°è£…å·²å®šä¹‰</li>
</ul>
<p><strong>ç¼ºå¤±çš„éƒ¨åˆ†ï¼š</strong></p>
<ul>
<li>âŒ è®¤è¯çŠ¶æ€ç®¡ç†å®ç°</li>
<li>âŒ ç™»å½•ç»„ä»¶å’Œè·¯ç”±é…ç½®</li>
</ul>
<h4 data-id="heading-114">ğŸ§­ æ“ä½œæ­¥éª¤</h4>
<h5 data-id="heading-115">æ­¥éª¤ 1ï¼šé¡¹ç›®ç»“æ„è¯´æ˜</h5>
<p>é¡¹ç›®å·²åŒ…å«å®Œæ•´çš„å‰ç«¯åå°ç®¡ç†é…ç½®ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</p>
<h5 data-id="heading-116">æ­¥éª¤ 2ï¼šä¸»è¦åŠŸèƒ½æ¨¡å—</h5>
<ul>
<li><strong>åå°ç®¡ç†</strong>: æ–‡ç« ç®¡ç†ã€ç”¨æˆ·ç®¡ç†ã€åˆ†ç±»ç®¡ç†ã€æ•°æ®ç»Ÿè®¡</li>
<li><strong>Markdown ç¼–è¾‘</strong>: æ”¯æŒå¯Œæ–‡æœ¬ç¼–è¾‘å’Œé¢„è§ˆ</li>
<li><strong>å›¾è¡¨å±•ç¤º</strong>: ä½¿ç”¨ ECharts å±•ç¤ºç»Ÿè®¡æ•°æ®</li>
<li><strong>å“åº”å¼è®¾è®¡</strong>: æ”¯æŒç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯</li>
<li><strong>æƒé™æ§åˆ¶</strong>: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶</li>
</ul>
<h5 data-id="heading-117">æ­¥éª¤ 3ï¼šå¼€å‘æœåŠ¡å™¨é…ç½®</h5>
<p>Vite é…ç½®å·²åŒ…å«ï¼š</p>
<ul>
<li><strong>è·¯å¾„åˆ«å</strong>: <code>@</code> æŒ‡å‘ <code>src/</code>, <code>@blog/common</code> æŒ‡å‘å…±äº«æ¨¡å—</li>
<li><strong>ä»£ç†é…ç½®</strong>: å¼€å‘ç¯å¢ƒ API ä»£ç†åˆ°åç«¯æœåŠ¡</li>
<li><strong>æ„å»ºä¼˜åŒ–</strong>: ä»£ç åˆ†å‰²ã€å‹ç¼©ã€Tree Shaking</li>
</ul>
<h5 data-id="heading-118">æ­¥éª¤ 4ï¼šä»é›¶å¼€å§‹åˆ›å»ºï¼ˆå¯é€‰ï¼‰</h5>
<p>å¦‚æœéœ€è¦é‡æ–°åˆ›å»ºå‰ç«¯é¡¹ç›®ï¼Œä»¥ä¸‹æ˜¯å…·ä½“çš„åˆ›å»ºæ­¥éª¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åˆå§‹åŒ– Vue3 + Vite é¡¹ç›®</span>
<span class="hljs-built_in">mkdir</span> packages/frontend
<span class="hljs-built_in">cd</span> packages/frontend
pnpm create vite . --template vue
<span class="hljs-comment"># é€‰æ‹©: Use rolldown-vite (Experimental)?: Yes</span>
<span class="hljs-comment"># é€‰æ‹©: Install with pnpm and start now? Yes</span>

<span class="hljs-comment"># 2. å®‰è£…æ ¸å¿ƒä¾èµ–</span>
pnpm add vue-router@4 pinia @element-plus/icons-vue element-plus axios
pnpm add echarts @sunny-117/text-image lodash-es md-editor-v3 vditor

<span class="hljs-comment"># 3. å®‰è£…å¼€å‘ä¾èµ–</span>
pnpm add -D @vitejs/plugin-vue eslint eslint-plugin-vue prettier
pnpm add -D husky lint-staged sass rollup-plugin-visualizer terser
pnpm add -D unplugin-auto-import unplugin-vue-components

<span class="hljs-comment"># 4. åˆ›å»ºé¡¹ç›®ç»“æ„</span>
<span class="hljs-built_in">mkdir</span> -p src/{api,views,router,stores,utils,composables,workers}
<span class="hljs-built_in">mkdir</span> -p src/views/{admin,frontend}

<span class="hljs-comment"># ç„¶ååˆ›å»ºç›¸åº”çš„æ–‡ä»¶å’Œç»„ä»¶</span>

<span class="hljs-comment"># 5. é…ç½® Vite åˆ«å</span>
<span class="hljs-comment"># ä¿®æ”¹ vite.config.js æ·»åŠ è·¯å¾„åˆ«åé…ç½®</span>
```javascript
import { defineConfig } from <span class="hljs-string">'vite'</span>
import vue from <span class="hljs-string">'@vitejs/plugin-vue'</span>
import { fileURLToPath, URL } from <span class="hljs-string">'node:url'</span>

<span class="hljs-built_in">export</span> default defineConfig({
  plugins: [vue()],
  resolve: {
    <span class="hljs-built_in">alias</span>: {
      <span class="hljs-string">'@'</span>: fileURLToPath(new URL(<span class="hljs-string">'./src'</span>, import.meta.url)),
      <span class="hljs-string">'@blog/common'</span>: fileURLToPath(new URL(<span class="hljs-string">'../common'</span>, import.meta.url))
    }
  },
  // æ˜ç¡®æŒ‡å®šç¯å¢ƒæ–‡ä»¶æœç´¢è·¯å¾„
  envDir: <span class="hljs-string">'../../'</span>
})

<span class="hljs-comment"># 6. é…ç½® Pinia + å¯¼å…¥vue-routerå…¥å£æ–‡ä»¶</span>
<span class="hljs-comment"># ä¿®æ”¹ main.js æ·»åŠ è·¯å¾„åˆ«åé…ç½®</span>
```javascript
import { createApp } from <span class="hljs-string">'vue'</span>
import { createPinia } from <span class="hljs-string">'pinia'</span>

import ElementPlus from <span class="hljs-string">'element-plus'</span>;
import <span class="hljs-string">'element-plus/dist/index.css'</span>;
import zhCn from <span class="hljs-string">'element-plus/dist/locale/zh-cn.mjs'</span>;

import <span class="hljs-string">'./style.css'</span>
import App from <span class="hljs-string">'./App.vue'</span>
import router from <span class="hljs-string">'./router'</span>

const app = createApp(App)
const pinia = createPinia()

app.use(pinia)
app.use(router)
app.use(ElementPlus, { locale: zhCn });

// ç­‰å¾…è·¯ç”±å°±ç»ªåå†æŒ‚è½½åº”ç”¨, å‘ç°é—®é¢˜: åº”ç”¨è¿˜æ²¡ç­‰è·¯ç”±å‡†å¤‡å¥½å°± mountï¼Œåˆæ¬¡å¯¼èˆªè¢«æ‰“æ–­ï¼Œç•Œé¢è¡¨ç°æˆåˆ·æ–°/é—ªä¸€ä¸‹ã€‚
router.isReady().<span class="hljs-keyword">then</span>(() =&gt; {
  app.mount('#app');
});

// app.mount('#app');

</code></pre>
<h5 data-id="heading-119">æ­¥éª¤ 5ï¼šæ ¸å¿ƒç»„ä»¶åˆ›å»º</h5>
<p>åˆ›å»ºç™»å½•ç»„ä»¶ <code>touch src/views/admin/Login.vue</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"login-container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-form</span> <span class="hljs-attr">:model</span>=<span class="hljs-string">"form"</span> @<span class="hljs-attr">submit.prevent</span>=<span class="hljs-string">"handleLogin"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ç”¨æˆ·å"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.username"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"å¯†ç "</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"form.password"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">native-type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">:loading</span>=<span class="hljs-string">"loading"</span>&gt;</span>
        ç™»å½•
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { useRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>
<span class="hljs-keyword">import</span> { useAuthStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../stores/auth'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>

<span class="hljs-keyword">const</span> form = <span class="hljs-title function_">ref</span>({ <span class="hljs-attr">username</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">password</span>: <span class="hljs-string">''</span> })
<span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)
<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>()
<span class="hljs-keyword">const</span> authStore = <span class="hljs-title function_">useAuthStore</span>()

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogin</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (!form.<span class="hljs-property">value</span>.<span class="hljs-property">username</span> || !form.<span class="hljs-property">value</span>.<span class="hljs-property">password</span>) {
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç '</span>)
    <span class="hljs-keyword">return</span>
  }
  
  loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> authStore.<span class="hljs-title function_">login</span>(form.<span class="hljs-property">value</span>)
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">success</span>(<span class="hljs-string">'ç™»å½•æˆåŠŸ'</span>)
    router.<span class="hljs-title function_">push</span>(<span class="hljs-string">'/'</span>)
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(error.<span class="hljs-property">response</span>?.<span class="hljs-property">data</span>?.<span class="hljs-property">message</span> || <span class="hljs-string">'ç™»å½•å¤±è´¥'</span>)
  } <span class="hljs-keyword">finally</span> {
    loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.login-container</span> {
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">400px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">100px</span> auto;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h5 data-id="heading-120">æ­¥éª¤ 6ï¼šè·¯ç”±é…ç½®</h5>
<p>åˆ›å»º <code>touch src/router/index.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { createRouter, createWebHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>

<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/login'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../views/admin/Login.vue'</span>)
  }
]

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">createRouter</span>({
  <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(),
  routes
})
</code></pre>
<h5 data-id="heading-121">æ­¥éª¤ 7ï¼šAPIæ¥å£å°è£…</h5>
<p>åˆ›å»º <code>touch src/api/auth.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/request'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">login</span> = (<span class="hljs-params">data</span>) =&gt; request.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/auth/login'</span>, data)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">logout</span> = (<span class="hljs-params"/>) =&gt; request.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/auth/logout'</span>)
</code></pre>
<h5 data-id="heading-122">æ­¥éª¤ 8ï¼šçŠ¶æ€ç®¡ç†</h5>
<p>åˆ›å»º <code>touch src/stores/auth.js</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>
<span class="hljs-keyword">import</span> { login } <span class="hljs-keyword">from</span> <span class="hljs-string">'../api/auth'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useAuthStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'auth'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">user</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">token</span>: <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>)
  }),
  
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">login</span>(<span class="hljs-params">credentials</span>) {
      <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">login</span>(credentials)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">token</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">token</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">user</span>
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'token'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">token</span>)
    },
    
    <span class="hljs-title function_">logout</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">user</span> = <span class="hljs-literal">null</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">token</span> = <span class="hljs-literal">null</span>
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'token'</span>)
    }
  }
})
</code></pre>
<h5 data-id="heading-123">æ­¥éª¤9: Axiosè¯·æ±‚å°è£…</h5>
<p>åˆ›å»º <code>touch src/utils/request.js</code></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>

<span class="hljs-comment">// åˆ›å»º axios å®ä¾‹</span>
<span class="hljs-keyword">const</span> request = axios.<span class="hljs-title function_">create</span>({
  <span class="hljs-attr">baseURL</span>: <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_API_BASE_URL</span> || <span class="hljs-string">'http://localhost:3001/api'</span>,
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
  }
})

<span class="hljs-comment">// è¯·æ±‚æ‹¦æˆªå™¨</span>
request.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> {
    <span class="hljs-comment">// ä» localStorage è·å– token</span>
    <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>)
    <span class="hljs-keyword">if</span> (token) {
      config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>
    }
    <span class="hljs-keyword">return</span> config
  },
  <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
  }
)

<span class="hljs-comment">// å“åº”æ‹¦æˆªå™¨</span>
request.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
    <span class="hljs-keyword">return</span> response
  },
  <span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">response</span>?.<span class="hljs-property">status</span> === <span class="hljs-number">401</span>) {
      <span class="hljs-comment">// token è¿‡æœŸï¼Œæ¸…é™¤æœ¬åœ°å­˜å‚¨å¹¶è·³è½¬åˆ°ç™»å½•é¡µ</span>
      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">removeItem</span>(<span class="hljs-string">'token'</span>)
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'/login'</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
  }
)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> request
</code></pre>
<h5 data-id="heading-124">æ­¥éª¤10: ä¿®æ”¹ App.js</h5>
<p><strong>å…ˆåˆ é™¤ä¸ç”¨çš„componentsæ–‡ä»¶, å¦‚:HelloWorld.vue</strong>
<code>rm src/components/HelloWorld.vue</code></p>
<p><strong>ä¿®æ”¹App.vue</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;router-view /&gt;
&lt;/template&gt;

&lt;script setup&gt;
// App æ ¹ç»„ä»¶

// å¤„ç†å…¨å±€ locale é…ç½®ï¼ˆå¯é€‰ï¼‰: å¼•å…¥Element Plus ä¸­æ–‡è¯­è¨€åŒ…
// import zhCn from 'element-plus/dist/locale/zh-cn.mjs';
&lt;/script&gt;

&lt;style&gt;
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#app {
  min-height: 100vh;
}
&lt;/style&gt;
</code></pre>
<h5 data-id="heading-125">âœ… éªŒè¯æ–¹å¼</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> packages/frontend

<span class="hljs-comment"># 1. æ£€æŸ¥ request.js æ–‡ä»¶æ˜¯å¦åˆ›å»ºæˆåŠŸ</span>
<span class="hljs-built_in">ls</span> -la src/utils/request.js

<span class="hljs-comment"># 2. æµ‹è¯•å‰ç«¯å¼€å‘æœåŠ¡å™¨å¯åŠ¨</span>
pnpm run dev
<span class="hljs-comment"># åº”æ˜¾ç¤º: Local: http://localhost:5173/</span>

<span class="hljs-comment"># 3. éªŒè¯ç¯å¢ƒå˜é‡é…ç½®</span>
<span class="hljs-comment"># åˆ›å»º .env.development æ–‡ä»¶ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰</span>
<span class="hljs-comment"># echo "VITE_API_BASE_URL=http://localhost:3001/api" &gt; .env.development</span>

<span class="hljs-comment"># 4. æµ‹è¯• API è¯·æ±‚ï¼ˆéœ€è¦å…ˆå¯åŠ¨åç«¯æœåŠ¡ï¼‰</span>
<span class="hljs-comment"># åœ¨æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­æµ‹è¯•ï¼š</span>
<span class="hljs-comment"># fetch('http://localhost:5173/api/health')</span>
<span class="hljs-comment"># åº”è¯¥èƒ½çœ‹åˆ°è¯·æ±‚å‘é€åˆ°åç«¯</span>

<span class="hljs-comment"># 5. æ£€æŸ¥ç™»å½•åŠŸèƒ½</span>
<span class="hljs-comment"># è®¿é—® http://localhost:5173/login</span>
<span class="hljs-comment"># è¾“å…¥ç”¨æˆ·å: admin, å¯†ç : admin123</span>
<span class="hljs-comment"># ç‚¹å‡»ç™»å½•æŒ‰é’®ï¼Œè§‚å¯Ÿç½‘ç»œè¯·æ±‚å’Œå“åº”</span>

<span class="hljs-comment"># 6. éªŒè¯ token å­˜å‚¨</span>
<span class="hljs-comment"># ç™»å½•æˆåŠŸåï¼Œæ£€æŸ¥ localStorage ä¸­æ˜¯å¦æœ‰ token</span>
<span class="hljs-comment"># åœ¨æµè§ˆå™¨æ§åˆ¶å°è¾“å…¥: localStorage.getItem('token')</span>

<span class="hljs-comment"># 7. æµ‹è¯•è¯·æ±‚æ‹¦æˆªå™¨</span>
<span class="hljs-comment"># æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· Network æ ‡ç­¾</span>
<span class="hljs-comment"># è§‚å¯Ÿæ‰€æœ‰ API è¯·æ±‚æ˜¯å¦è‡ªåŠ¨æ·»åŠ äº† Authorization å¤´</span>
</code></pre>
<hr/>
<h3 data-id="heading-126">é˜¶æ®µä¹ï¼šNuxt SSR å‰å°ï¼ˆå¯é€‰ï¼‰</h3>
<h4 data-id="heading-127">ğŸ¯ æœ¬é˜¶æ®µç›®æ ‡</h4>
<p>å®ç°é¦–é¡µ SSRï¼Œæå‡é¦–å±åŠ è½½æ€§èƒ½å’Œ SEOã€‚</p>
<h4 data-id="heading-128">âœ… é¢„æœŸç»“æœ</h4>
<ul>
<li>Nuxt3 å¼€å‘æœåŠ¡å™¨æˆåŠŸå¯åŠ¨</li>
<li>é¦–é¡µå®ç°æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰</li>
<li>SEO ä¼˜åŒ–é…ç½®æ­£ç¡®ï¼ˆmeta æ ‡ç­¾ç­‰ï¼‰</li>
<li>è·¯ç”±ç³»ç»ŸæŒ‰é…ç½®æ­£ç¡®æ¸²æŸ“</li>
<li>API é›†æˆæ­£å¸¸å·¥ä½œ</li>
</ul>
<h4 data-id="heading-129">ğŸ“ éªŒè¯æ ‡å‡†</h4>


















































<table><thead><tr><th>æ£€æŸ¥é¡¹</th><th>éªŒè¯å‘½ä»¤</th><th>æœŸæœ›ç»“æœ</th></tr></thead><tbody><tr><td>SSR æ¸²æŸ“</td><td>æŸ¥çœ‹é¡µé¢æºç </td><td>åŒ…å«å®Œæ•´ HTML ç»“æ„</td></tr><tr><td>å¼€å‘æœåŠ¡å™¨</td><td><code>cd packages/nuxt-ssr &amp;&amp; pnpm run dev</code></td><td>æœåŠ¡å™¨å¯åŠ¨åœ¨ 3000 ç«¯å£</td></tr><tr><td>é¡µé¢è®¿é—®</td><td>æµè§ˆå™¨è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000" target="_blank" title="http://localhost:3000" ref="nofollow noopener noreferrer">http://localhost:3000</a></td><td>æ˜¾ç¤º SSR æ¸²æŸ“çš„é¡µé¢</td></tr><tr><td>SEO ä¼˜åŒ–</td><td>æŸ¥çœ‹é¡µé¢ meta æ ‡ç­¾</td><td>åŒ…å«æ ‡é¢˜ã€æè¿°ç­‰ SEO ä¿¡æ¯</td></tr><tr><td>è·¯ç”±æ¸²æŸ“</td><td>è®¿é—®ä¸åŒé¡µé¢</td><td>æŒ‰ routeRules é…ç½®æ¸²æŸ“æ¨¡å¼</td></tr><tr><td>API é›†æˆ</td><td>æœåŠ¡ç«¯æ•°æ®è·å–</td><td>æ•°æ®æ­£ç¡®è·å–å’Œæ¸²æŸ“</td></tr><tr><td>æ„å»ºæµ‹è¯•</td><td><code>pnpm run build</code></td><td>ç”Ÿæˆ .output ç›®å½•</td></tr><tr><td>ç”Ÿäº§é¢„è§ˆ</td><td><code>pnpm run preview</code></td><td>ç”Ÿäº§æ„å»ºæ­£ç¡®è¿è¡Œ</td></tr></tbody></table>
<h4 data-id="heading-130">æŠ€æœ¯æ ˆè¯¦æƒ…</h4>
<ul>
<li><strong>åç«¯æ¡†æ¶</strong>: ???</li>
</ul>
<h4 data-id="heading-131">ğŸ“¦ ç¯å¢ƒä¾èµ–æ¸…å•</h4>



































<table><thead><tr><th>å·¥å…·</th><th>ç‰ˆæœ¬è¦æ±‚</th><th>å®‰è£…æ–¹å¼</th><th>éªŒè¯å‘½ä»¤</th></tr></thead><tbody><tr><td>Nuxt</td><td>3.12.0</td><td><code>pnpm add nuxt</code></td><td>å·²å®‰è£…</td></tr><tr><td>Vue</td><td>3.4.0</td><td>éš Nuxt å®‰è£…</td><td>å·²å®‰è£…</td></tr><tr><td>Pinia</td><td>2.1.7</td><td><code>pnpm add @pinia/nuxt</code></td><td>å·²å®‰è£…</td></tr><tr><td>Element Plus</td><td>2.11.9</td><td><code>pnpm add @element-plus/nuxt</code></td><td>å·²å®‰è£…</td></tr></tbody></table>
<p>| Day.js | 1.11.19 | æ—¥æœŸå¤„ç† |</p>
<h4 data-id="heading-132">ğŸ“ é¡¹ç›®ç»“æ„æ¦‚è§ˆ</h4>
<pre><code class="hljs language-bash" lang="bash">packages/nuxt-ssr/
â”œâ”€â”€ pages/                 <span class="hljs-comment"># é¡µé¢è·¯ç”±ï¼ˆæ–‡ä»¶ç³»ç»Ÿè·¯ç”±ï¼‰</span>
â”‚   â””â”€â”€ index.vue          <span class="hljs-comment"># é¦–é¡µ</span>
â”œâ”€â”€ components/            <span class="hljs-comment"># ç»„ä»¶</span>
â”œâ”€â”€ layouts/               <span class="hljs-comment"># å¸ƒå±€</span>
â”‚   â””â”€â”€ default.vue        <span class="hljs-comment"># é»˜è®¤å¸ƒå±€</span>
â”œâ”€â”€ composables/           <span class="hljs-comment"># ç»„åˆå¼å‡½æ•°</span>
â”œâ”€â”€ stores/                <span class="hljs-comment"># Pinia çŠ¶æ€ç®¡ç†</span>
â”œâ”€â”€ server/
â”‚   â”œâ”€â”€ api/              <span class="hljs-comment"># æœåŠ¡ç«¯ API è·¯ç”±</span>
â”‚   â””â”€â”€ middleware/       <span class="hljs-comment"># æœåŠ¡ç«¯ä¸­é—´ä»¶</span>
â”œâ”€â”€ public/               <span class="hljs-comment"># é™æ€èµ„æº</span>
â””â”€â”€ nuxt.config.ts        <span class="hljs-comment"># Nuxt é…ç½®</span>
</code></pre>
<h4 data-id="heading-133">å½“å‰é¡¹ç›®çŠ¶æ€åˆ†æ</h4>
<p><strong>å·²æœ‰çš„èµ„æºï¼š</strong></p>
<ul>
<li>âœ… Nuxt3 é¡¹ç›®ç»“æ„å·²é…ç½®</li>
<li>âœ… SSR è·¯ç”±è§„åˆ™å·²å®šä¹‰</li>
<li>âœ… è¿è¡Œæ—¶é…ç½®å·²è®¾ç½®</li>
</ul>
<p><strong>ç¼ºå¤±çš„éƒ¨åˆ†ï¼š</strong></p>
<ul>
<li>âŒ æœåŠ¡ç«¯ API è·¯ç”±å®ç°</li>
<li>âŒ é¡µé¢ç»„ä»¶å’Œå¸ƒå±€</li>
</ul>
<h4 data-id="heading-134">ğŸ§­ æ“ä½œæ­¥éª¤</h4>
<h5 data-id="heading-135">æ­¥éª¤ 1ï¼šé¡¹ç›®ç»“æ„è¯´æ˜</h5>
<p><strong>é¡¹ç›®å·²åŒ…å«å®Œæ•´çš„ Nuxt SSR é…ç½®ï¼Œç›´æ¥ä½¿ç”¨å³å¯ã€‚</strong></p>
<p>Nuxt é¡¹ç›®ç»“æ„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">packages/nuxt-ssr/
â”œâ”€â”€ pages/               <span class="hljs-comment"># é¡µé¢è·¯ç”±ï¼ˆæ–‡ä»¶ç³»ç»Ÿè·¯ç”±ï¼‰</span>
â”‚   â””â”€â”€ index.vue       <span class="hljs-comment"># é¦–é¡µï¼ˆSSRï¼‰</span>
â”œâ”€â”€ components/          <span class="hljs-comment"># ç»„ä»¶</span>
â”œâ”€â”€ layouts/             <span class="hljs-comment"># å¸ƒå±€</span>
â”‚   â””â”€â”€ default.vue     <span class="hljs-comment"># é»˜è®¤å¸ƒå±€</span>
â”œâ”€â”€ composables/         <span class="hljs-comment"># ç»„åˆå¼å‡½æ•°</span>
â”‚   â”œâ”€â”€ useArticleApi.js <span class="hljs-comment"># æ–‡ç«  API</span>
â”‚   â””â”€â”€ useRequest.js    <span class="hljs-comment"># è¯·æ±‚å°è£…</span>
â”œâ”€â”€ stores/              <span class="hljs-comment"># Pinia çŠ¶æ€ç®¡ç†</span>
â”‚   â””â”€â”€ auth.js         <span class="hljs-comment"># è®¤è¯çŠ¶æ€</span>
â”œâ”€â”€ server/              <span class="hljs-comment"># æœåŠ¡ç«¯ä»£ç </span>
â”‚   â”œâ”€â”€ api/            <span class="hljs-comment"># æœåŠ¡ç«¯ API è·¯ç”±</span>
â”‚   â””â”€â”€ middleware/     <span class="hljs-comment"># æœåŠ¡ç«¯ä¸­é—´ä»¶</span>
â”œâ”€â”€ plugins/             <span class="hljs-comment"># æ’ä»¶</span>
â”‚   â””â”€â”€ element-plus.ts <span class="hljs-comment"># Element Plus æ’ä»¶</span>
â”œâ”€â”€ public/              <span class="hljs-comment"># é™æ€èµ„æº</span>
â”œâ”€â”€ nuxt.config.ts       <span class="hljs-comment"># Nuxt é…ç½®ï¼ˆå·²å®Œæ•´é…ç½®ï¼‰</span>
â”œâ”€â”€ tsconfig.json        <span class="hljs-comment"># TypeScript é…ç½®</span>
â””â”€â”€ package.json         <span class="hljs-comment"># é¡¹ç›®é…ç½®</span>
</code></pre>
<h5 data-id="heading-136">æ­¥éª¤ 2ï¼šæ ¸å¿ƒé…ç½®ç‰¹æ€§</h5>
<p><strong>å·²é…ç½®çš„ Nuxt ç‰¹æ€§ï¼š</strong></p>
<ul>
<li><strong>SSR é…ç½®</strong>: é»˜è®¤å¼€å¯ SSRï¼Œä»…é¦–é¡µ SSRï¼Œå…¶ä»–é¡µé¢ CSR</li>
<li><strong>è·¯ç”±è§„åˆ™</strong>: åŸºäºé¡µé¢é‡è¦æ€§é…ç½®æ¸²æŸ“æ¨¡å¼</li>
<li><strong>å¼€å‘ä»£ç†</strong>: å¼€å‘ç¯å¢ƒè‡ªåŠ¨ä»£ç† API è¯·æ±‚åˆ°åç«¯</li>
<li><strong>Element Plus</strong>: å®Œæ•´é›†æˆï¼ŒåŒ…æ‹¬å›¾æ ‡å’Œä¸»é¢˜</li>
<li><strong>TypeScript</strong>: æ”¯æŒ .ts é…ç½®æ–‡ä»¶</li>
<li><strong>ç¯å¢ƒå˜é‡</strong>: æ”¯æŒè¿è¡Œæ—¶é…ç½®</li>
</ul>
<p><strong>è·¯ç”±è§„åˆ™é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-attr">routeRules</span>: {
  <span class="hljs-string">'/'</span>: { <span class="hljs-attr">ssr</span>: <span class="hljs-literal">true</span> },           <span class="hljs-comment">// é¦–é¡µ SSRï¼Œæå‡ SEO</span>
  <span class="hljs-string">'/article/**'</span>: { <span class="hljs-attr">ssr</span>: <span class="hljs-literal">false</span> }, <span class="hljs-comment">// æ–‡ç« è¯¦æƒ… CSRï¼Œæå‡äº¤äº’æ€§</span>
  <span class="hljs-string">'/category/**'</span>: { <span class="hljs-attr">ssr</span>: <span class="hljs-literal">false</span> }, <span class="hljs-comment">// åˆ†ç±»é¡µ CSR</span>
  <span class="hljs-string">'/search'</span>: { <span class="hljs-attr">ssr</span>: <span class="hljs-literal">false</span> },     <span class="hljs-comment">// æœç´¢é¡µ CSR</span>
  <span class="hljs-string">'/admin/**'</span>: { <span class="hljs-attr">ssr</span>: <span class="hljs-literal">false</span> }    <span class="hljs-comment">// ç®¡ç†åå° CSR</span>
}
</code></pre>
<p><strong>è¿è¡Œæ—¶é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-attr">runtimeConfig</span>: {
  <span class="hljs-attr">public</span>: {
    <span class="hljs-attr">apiBase</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NUXT_PUBLIC_API_BASE_URL</span>,
    <span class="hljs-attr">siteBase</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NUXT_PUBLIC_SITE_BASE</span>,
    <span class="hljs-attr">siteName</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NUXT_PUBLIC_SITE_NAME</span>
  }
}
</code></pre>
<h5 data-id="heading-137">æ­¥éª¤ 3ï¼šSEO å’Œæ€§èƒ½ä¼˜åŒ–</h5>
<ul>
<li><strong>æœåŠ¡ç«¯æ¸²æŸ“</strong>: é¦–é¡µ SSRï¼Œæå‡é¦–å±åŠ è½½å’Œ SEO</li>
<li><strong>é¢„æ¸²æŸ“</strong>: æ”¯æŒé™æ€ç”Ÿæˆï¼ˆå¯é€‰ï¼‰</li>
<li><strong>ä»£ç åˆ†å‰²</strong>: è‡ªåŠ¨ä»£ç åˆ†å‰²å’Œæ‡’åŠ è½½</li>
<li><strong>ä¼˜åŒ–å­—ä½“</strong>: å­—ä½“ä¼˜åŒ–å’Œé¢„åŠ è½½</li>
<li><strong>å›¾ç‰‡ä¼˜åŒ–</strong>: è‡ªåŠ¨å›¾ç‰‡ä¼˜åŒ–</li>
</ul>
<h5 data-id="heading-138">æ­¥éª¤ 4ï¼šä»é›¶å¼€å§‹åˆ›å»ºï¼ˆå¯é€‰ï¼‰</h5>
<p>å¦‚æœéœ€è¦é‡æ–°åˆ›å»º Nuxt SSR é¡¹ç›®ï¼Œä»¥ä¸‹æ˜¯å…·ä½“çš„åˆ›å»ºæ­¥éª¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åˆå§‹åŒ– Nuxt3 é¡¹ç›®</span>
<span class="hljs-built_in">mkdir</span> packages/nuxt-ssr
<span class="hljs-built_in">cd</span> packages/nuxt-ssr
npx nuxi@latest init .
<span class="hljs-comment"># è¿™ä¼šåˆ›å»ºä¸€ä¸ªåŸºç¡€çš„ Nuxt3 é¡¹ç›®</span>
<span class="hljs-comment"># é€‰æ‹©1: minimal â€“ Minimal setup for Nuxt 4</span>
<span class="hljs-comment"># é€‰æ‹©2: Override its contents</span>
<span class="hljs-comment"># é€‰æ‹©3: package manager: pnpm</span>
<span class="hljs-comment"># é€‰æ‹©4: Initialize git repository: Yes</span>
<span class="hljs-comment"># é€‰æ‹©5: Dependencies isntalled: Yesã€ Git repository initialized: Yesã€ </span>
<span class="hljs-comment"># é€‰æ‹©6: official modules: No</span>

<span class="hljs-comment"># 2. å®‰è£…æ ¸å¿ƒä¾èµ–</span>
pnpm add @element-plus/nuxt @element-plus/icons-vue element-plus @pinia/nuxt pinia
pnpm add dayjs echarts vditor vue-router

<span class="hljs-comment"># 3. å®‰è£…å¼€å‘ä¾èµ–</span>
<span class="hljs-comment"># pnpm add -D eslint eslint-plugin-vue prettier sass</span>
pnpm add -D unplugin-auto-import unplugin-vue-components

<span class="hljs-comment"># 4. é…ç½® Nuxt ç‰¹æ€§</span>
<span class="hljs-comment"># ä¿®æ”¹ nuxt.config.ts æ·»åŠ  SSR é…ç½®ã€è·¯ç”±è§„åˆ™ã€è¿è¡Œæ—¶é…ç½®ç­‰</span>

<span class="hljs-comment"># 5. åˆ›å»ºé¡¹ç›®ç»“æ„</span>
<span class="hljs-built_in">mkdir</span> -p pages components layouts composables stores server/api server/middleware plugins public
<span class="hljs-comment"># ç„¶ååˆ›å»ºç›¸åº”çš„æ–‡ä»¶å’Œç»„ä»¶</span>

<span class="hljs-comment"># 6 ä¿®æ”¹ `nuxt.config.ts`ï¼š</span>
<span class="hljs-built_in">export</span> default defineNuxtConfig({
  devtools: { enabled: <span class="hljs-literal">true</span> },
  modules: [<span class="hljs-string">'@element-plus/nuxt'</span>, <span class="hljs-string">'@pinia/nuxt'</span>],
  runtimeConfig: {
    public: {
      apiBaseUrl: process.env.NUXT_PUBLIC_API_BASE_URL || <span class="hljs-string">'http://localhost:3001/api'</span>
    }
  }
})
</code></pre>
<h5 data-id="heading-139">æ­¥éª¤ 5ï¼šå®Œå–„ docker-compose.yml å’Œ docker-compose.dev.yml</h5>
<p><code>docker-compose.yml å’Œ docker-compose.dev.yml</code></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">services:</span>
  <span class="hljs-comment"># Nuxt3 SSR æœåŠ¡ï¼ˆé¦–é¡µï¼‰</span>
  <span class="hljs-attr">nuxt:</span>
    <span class="hljs-attr">dns:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span>
      <span class="hljs-bullet">-</span> <span class="hljs-number">1.1</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span>
    <span class="hljs-attr">build:</span>
      <span class="hljs-attr">context:</span> <span class="hljs-string">..</span>
      <span class="hljs-attr">dockerfile:</span> <span class="hljs-string">docker/nuxt/Dockerfile</span>
      <span class="hljs-attr">args:</span>
        <span class="hljs-attr">NUXT_PUBLIC_API_BASE_URL:</span> <span class="hljs-string">${NUXT_PUBLIC_API_BASE_URL:-http://backend:3001/api}</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">blog-nuxt</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">NODE_ENV:</span> <span class="hljs-string">production</span>
      <span class="hljs-attr">NUXT_PUBLIC_API_BASE_URL:</span> <span class="hljs-string">${NUXT_PUBLIC_API_BASE_URL:-http://backend:3001/api}</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"${NUXT_PORT:-3000}:3000"</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-attr">backend:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">service_healthy</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">blog-network</span> <span class="hljs-comment"># ä»…å…³è”å…¬å…±ç½‘ç»œï¼Œä¸è®¿é—®æ•°æ®åº“</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-comment"># test: ["CMD", "node", "-e", "require('http').get('http://localhost:3000', (r) =&gt; {process.exit(r.statusCode === 200 ? 0 : 1)})"]</span>
      <span class="hljs-comment"># ä¼˜åŒ–å¥åº·æ£€æŸ¥é€»è¾‘ï¼Œå¢åŠ é”™è¯¯æ•è·</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"node"</span>, <span class="hljs-string">"-e"</span>, <span class="hljs-string">"const http = require('http'); const req = http.get('http://localhost:3000', (res) =&gt; { process.exit(res.statusCode === 200 ? 0 : 1); }); req.on('error', () =&gt; { process.exit(1); });"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">3</span>
      <span class="hljs-attr">start_period:</span> <span class="hljs-string">40s</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>
</code></pre>
<h4 data-id="heading-140">âœ… éªŒè¯æ–¹å¼</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> packages/nuxt-ssr

<span class="hljs-comment"># å®‰è£…ä¾èµ–ï¼ˆå¦‚æœæœªå®‰è£…ï¼‰</span>
pnpm install

<span class="hljs-comment"># å¯åŠ¨å¼€å‘æœåŠ¡å™¨</span>
pnpm run dev

<span class="hljs-comment"># éªŒè¯å¯åŠ¨æˆåŠŸ</span>
<span class="hljs-comment"># åº”æ˜¾ç¤º: Local: http://localhost:3000</span>

<span class="hljs-comment"># æµè§ˆå™¨è®¿é—® http://localhost:3000</span>
<span class="hljs-comment"># åº”èƒ½çœ‹åˆ° SSR æ¸²æŸ“çš„é¦–é¡µï¼ˆæŸ¥çœ‹æºç åº”åŒ…å«å®Œæ•´ HTMLï¼‰</span>

<span class="hljs-comment"># æµ‹è¯•æ„å»º</span>
pnpm run build
<span class="hljs-comment"># åº”æˆåŠŸæ„å»ºç”Ÿäº§ç‰ˆæœ¬</span>

<span class="hljs-comment"># æµ‹è¯•é¢„è§ˆ</span>
pnpm run preview
<span class="hljs-comment"># åº”èƒ½é¢„è§ˆç”Ÿäº§æ„å»º</span>
</code></pre>
<hr/>
<h3 data-id="heading-141">é˜¶æ®µåï¼šDocker åŒ–éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰</h3>
<h4 data-id="heading-142">ğŸ¯ æœ¬é˜¶æ®µç›®æ ‡</h4>
<p>å°†æ•´ä¸ªåº”ç”¨å®¹å™¨åŒ–ï¼Œå®ç°ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ã€‚
Dockerfile æ˜¯å¤šé˜¶æ®µæ„å»ºçš„ï¼Œæœ‰ builder é˜¶æ®µ å’Œ ç”Ÿäº§é˜¶æ®µ, è¿™é‡Œä¸»è¦æ˜¯åš ç”Ÿäº§é˜¶æ®µ çš„å·¥ä½œ.</p>
<blockquote>
<p>æ³¨1: ä¸ºäº†ç”Ÿäº§é˜¶æ®µçš„å·¥ä½œé¡ºåˆ©, æœ€å¥½æŠŠé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>.env.development</code> å¤åˆ¶ä¸€ä»½å¹¶å‘½åä¸º <code>.env</code>, åŒæ—¶ dockerç›®å½•ä¸‹çš„ <code>docker-compose.dev.yml</code>ä¹Ÿæ˜¯ å¤åˆ¶ä¸€ä»½å¹¶å‘½åä¸º <code>docker-compose.yml</code>.</p>
</blockquote>
<h4 data-id="heading-143">âœ… é¢„æœŸç»“æœ</h4>
<ul>
<li>æ‰€æœ‰æœåŠ¡æˆåŠŸå®¹å™¨åŒ–å¹¶å¯ç‹¬ç«‹è¿è¡Œ</li>
<li>Nginx åå‘ä»£ç†æ­£ç¡®é…ç½®è·¯ç”±</li>
<li>å®¹å™¨é—´ç½‘ç»œé€šä¿¡æ­£å¸¸</li>
<li>æ•°æ®æŒä¹…åŒ–é…ç½®ç”Ÿæ•ˆ</li>
<li>ç”Ÿäº§ç¯å¢ƒé…ç½®æ­£ç¡®åŠ è½½</li>
</ul>
<h4 data-id="heading-144">ğŸ“ éªŒè¯æ ‡å‡†</h4>


















































<table><thead><tr><th>æ£€æŸ¥é¡¹</th><th>éªŒè¯å‘½ä»¤</th><th>æœŸæœ›ç»“æœ</th></tr></thead><tbody><tr><td>å®¹å™¨æ„å»º</td><td><code>pnpm run docker:build</code></td><td>æ‰€æœ‰é•œåƒæ„å»ºæˆåŠŸ</td></tr><tr><td>æœåŠ¡å¯åŠ¨</td><td><code>pnpm run docker:up</code></td><td>æ‰€æœ‰å®¹å™¨çŠ¶æ€ä¸º Up/Healthy</td></tr><tr><td>Nginx ä»£ç†</td><td>è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost" target="_blank" title="http://localhost" ref="nofollow noopener noreferrer">http://localhost</a></td><td>æ­£ç¡®è·¯ç”±åˆ°å¯¹åº”æœåŠ¡</td></tr><tr><td>API è®¿é—®</td><td>è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%2Fapi%2Fhealth" target="_blank" title="http://localhost/api/health" ref="nofollow noopener noreferrer">http://localhost/api/health</a></td><td>è¿”å›å®Œæ•´çš„å¥åº·çŠ¶æ€</td></tr><tr><td>å‰ç«¯è®¿é—®</td><td>è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%2Fadmin" target="_blank" title="http://localhost/admin" ref="nofollow noopener noreferrer">http://localhost/admin</a></td><td>æ˜¾ç¤ºåå°ç®¡ç†ç•Œé¢</td></tr><tr><td>SSR å‰å°</td><td>è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost" target="_blank" title="http://localhost" ref="nofollow noopener noreferrer">http://localhost</a></td><td>æ˜¾ç¤º SSR æ¸²æŸ“é¡µé¢</td></tr><tr><td>å®¹å™¨æ—¥å¿—</td><td><code>pnpm run docker:logs</code></td><td>æ— é”™è¯¯æ—¥å¿—</td></tr><tr><td>æ•°æ®æŒä¹…åŒ–</td><td>é‡å¯å®¹å™¨</td><td>æ•°æ®æ­£ç¡®ä¿ç•™</td></tr></tbody></table>
<h4 data-id="heading-145">ç¯å¢ƒä¾èµ–æ¸…å•</h4>



































<table><thead><tr><th>å·¥å…·</th><th>ç‰ˆæœ¬è¦æ±‚</th><th>å®‰è£…æ–¹å¼</th><th>éªŒè¯å‘½ä»¤</th></tr></thead><tbody><tr><td>Docker</td><td>â‰¥ 24.0.0</td><td>å·²å®‰è£…</td><td><code>docker --version</code></td></tr><tr><td>Docker Compose</td><td>â‰¥ 2.0.0</td><td>å·²å®‰è£…</td><td><code>docker compose version</code></td></tr><tr><td>Node.js</td><td>â‰¥ 18.0.0</td><td>å·²å®‰è£…</td><td><code>node --version</code></td></tr><tr><td>pnpm</td><td>â‰¥ 9.0.0</td><td>å·²å®‰è£…</td><td><code>pnpm --version</code></td></tr></tbody></table>
<h4 data-id="heading-146">ğŸ“‹ æŠ€æœ¯æ ˆè¯¦æƒ…</h4>
<ul>
<li><strong>å®¹å™¨åŒ–</strong>: Docker + Docker Compose</li>
</ul>
<h4 data-id="heading-147">ğŸ“ é¡¹ç›®ç»“æ„æ¦‚è§ˆ</h4>
<pre><code class="hljs language-bash" lang="bash">docker/
â”œâ”€â”€ docker-compose.yml     <span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒå®Œæ•´ç¼–æ’</span>
â”œâ”€â”€ docker-compose.dev.yml <span class="hljs-comment"># å¼€å‘ç¯å¢ƒç¼–æ’</span>
â”œâ”€â”€ backend/
â”‚   â””â”€â”€ Dockerfile         <span class="hljs-comment"># åç«¯å®¹å™¨é…ç½®</span>
â”œâ”€â”€ frontend/
â”‚   â””â”€â”€ Dockerfile         <span class="hljs-comment"># å‰ç«¯å®¹å™¨é…ç½®</span>
â”œâ”€â”€ nuxt/
â”‚   â””â”€â”€ Dockerfile         <span class="hljs-comment"># Nuxt å®¹å™¨é…ç½®</span>
â””â”€â”€ nginx/
    â””â”€â”€ nginx.conf         <span class="hljs-comment"># Nginx åå‘ä»£ç†é…ç½®</span>
</code></pre>
<h4 data-id="heading-148">å½“å‰é¡¹ç›®çŠ¶æ€åˆ†æ</h4>
<p><strong>å·²æœ‰çš„èµ„æºï¼š</strong></p>
<ul>
<li>âœ… æ•°æ®æŒä¹…åŒ–é…ç½®å·²å®Œæ•´</li>
<li>âœ… æœåŠ¡æ¶æ„è¯´æ˜å·²å®Œæ•´</li>
<li>âœ… éƒ¨ç½²æµç¨‹è¯´æ˜å·²å®Œæ•´</li>
<li>âœ… éªŒè¯æ–¹å¼å·²å®Œæ•´</li>
</ul>
<h4 data-id="heading-149">ç¼ºå¤±çš„éƒ¨åˆ†ï¼š</h4>
<ul>
<li>âŒ Dockerfile é…ç½®
<ul>
<li>åç«¯æœåŠ¡å®¹å™¨é…ç½®: backend/Dockerfile</li>
<li>å‰ç«¯åå°ç®¡ç†å®¹å™¨é…ç½®:frontend/Dockerfile</li>
<li>Nuxt SSR å‰å°å®¹å™¨é…ç½®:nuxt/Dockerfile</li>
<li>Nginx åå‘ä»£ç†é…ç½®æ–‡ä»¶:nginx/nginx.conf</li>
</ul>
</li>
<li>âŒ docker-compose.dev.yml é…ç½®</li>
<li>âŒ æ•°æ®æŒä¹…åŒ–é…ç½®</li>
<li>âŒ æœåŠ¡æ¶æ„è¯´æ˜</li>
<li>âŒ éƒ¨ç½²æµç¨‹è¯´æ˜</li>
<li>âŒ éªŒè¯æ–¹å¼è¯´æ˜</li>
</ul>
<h4 data-id="heading-150">å®¹å™¨åŒ–æœåŠ¡æ¶æ„</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-string">â”‚</span>                 <span class="hljs-string">Nginx</span> <span class="hljs-string">(Port</span> <span class="hljs-number">80</span><span class="hljs-string">)</span>                 <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span> <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â”‚</span>  <span class="hljs-string">/api/*</span> <span class="hljs-string">â†’</span> <span class="hljs-string">Backend</span> <span class="hljs-string">Service</span> <span class="hljs-string">(Port</span> <span class="hljs-number">3001</span><span class="hljs-string">)</span>      <span class="hljs-string">â”‚</span> <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â”‚</span>                                             <span class="hljs-string">â”‚</span> <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â”‚</span>  <span class="hljs-string">/*</span> <span class="hljs-string">â†’</span> <span class="hljs-string">Nuxt</span> <span class="hljs-string">SSR</span> <span class="hljs-string">Service</span> <span class="hljs-string">(Port</span> <span class="hljs-number">3000</span><span class="hljs-string">)</span>          <span class="hljs-string">â”‚</span> <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â”‚</span>                                             <span class="hljs-string">â”‚</span> <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â”‚</span>  <span class="hljs-string">/admin/*</span> <span class="hljs-string">â†’</span> <span class="hljs-string">Frontend</span> <span class="hljs-string">SPA</span> <span class="hljs-string">(Port</span> <span class="hljs-number">80</span><span class="hljs-string">)</span>          <span class="hljs-string">â”‚</span> <span class="hljs-string">â”‚</span>
<span class="hljs-string">â”‚</span>  <span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span> <span class="hljs-string">â”‚</span>
<span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
                    <span class="hljs-string">â”‚</span>          <span class="hljs-string">â”‚</span>          <span class="hljs-string">â”‚</span>
                    <span class="hljs-string">â–¼</span>          <span class="hljs-string">â–¼</span>          <span class="hljs-string">â–¼</span>
        <span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
        <span class="hljs-string">â”‚</span>                                               <span class="hljs-string">â”‚</span>
        <span class="hljs-string">â”‚</span>           <span class="hljs-string">Docker</span> <span class="hljs-string">Network</span> <span class="hljs-string">(blog-network)</span>       <span class="hljs-string">â”‚</span>
        <span class="hljs-string">â”‚</span>                                               <span class="hljs-string">â”‚</span>
        <span class="hljs-string">â”‚</span>  <span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>  <span class="hljs-string">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>             <span class="hljs-string">â”‚</span>
        <span class="hljs-string">â”‚</span>  <span class="hljs-string">â”‚</span>   <span class="hljs-string">MySQL</span>     <span class="hljs-string">â”‚</span>  <span class="hljs-string">â”‚</span>    <span class="hljs-string">Redis</span>    <span class="hljs-string">â”‚</span>             <span class="hljs-string">â”‚</span>
        <span class="hljs-string">â”‚</span>  <span class="hljs-string">â”‚</span> <span class="hljs-string">(Port</span> <span class="hljs-number">3306</span><span class="hljs-string">)</span> <span class="hljs-string">â”‚</span>  <span class="hljs-string">â”‚</span> <span class="hljs-string">(Port</span> <span class="hljs-number">6379</span><span class="hljs-string">)â”‚</span>             <span class="hljs-string">â”‚</span>
        <span class="hljs-string">â”‚</span>  <span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>  <span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>             <span class="hljs-string">â”‚</span>
        <span class="hljs-string">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<h4 data-id="heading-151">ğŸ§­ æ“ä½œæ­¥éª¤</h4>
<h5 data-id="heading-152">æ­¥éª¤ 1ï¼šä¸»è¦åŠŸèƒ½æ¨¡å—</h5>
<ul>
<li><strong>å¤šæœåŠ¡æ¶æ„</strong>: åç«¯ APIã€å‰ç«¯ç®¡ç†åå°ã€Nuxt SSR å‰å°ã€Nginx åå‘ä»£ç†</li>
<li><strong>æ•°æ®æŒä¹…åŒ–</strong>: MySQL æ•°æ®åº“å’Œ Redis ç¼“å­˜çš„å·æŒ‚è½½é…ç½®</li>
<li><strong>ç½‘ç»œé€šä¿¡</strong>: Docker å†…éƒ¨ç½‘ç»œé…ç½®ï¼Œç¡®ä¿æœåŠ¡é—´å®‰å…¨é€šä¿¡</li>
<li><strong>åå‘ä»£ç†</strong>: Nginx é…ç½®å®ç°è·¯å¾„è·¯ç”±å’Œè´Ÿè½½å‡è¡¡</li>
<li><strong>ç¯å¢ƒéš”ç¦»</strong>: ç”Ÿäº§ç¯å¢ƒå’Œå¼€å‘ç¯å¢ƒçš„é…ç½®åˆ†ç¦»</li>
<li><strong>æ—¥å¿—ç®¡ç†</strong>: å®¹å™¨æ—¥å¿—æ”¶é›†å’Œç›‘æ§</li>
<li><strong>å¥åº·æ£€æŸ¥</strong>: æœåŠ¡çŠ¶æ€ç›‘æ§å’Œè‡ªåŠ¨é‡å¯æœºåˆ¶</li>
<li><strong>å®‰å…¨é…ç½®</strong>: é root ç”¨æˆ·è¿è¡Œã€ç«¯å£æ˜ å°„ã€å®‰å…¨åŠ å›º</li>
</ul>
<h5 data-id="heading-153">æ­¥éª¤ 2ï¼šä»é›¶å¼€å§‹åˆ›å»º</h5>
<p><strong>Docker æœåŠ¡å™¨é…ç½®ï¼š</strong></p>
<h6 data-id="heading-154">2.1 åç«¯ Dockerfile (docker/backend/Dockerfile)</h6>
<p><strong>åˆ›å»º: <code>touch docker/backend/Dockerfile</code></strong>:</p>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># åŸºç¡€é•œåƒé€‰æ‹©
#   ä½¿ç”¨ Node.js LTS ç‰ˆæœ¬çš„ Alpine Linux é•œåƒ
#     Alpine æ˜¯ä¸€ä¸ªè½»é‡çº§ Linux å‘è¡Œç‰ˆï¼Œé•œåƒä½“ç§¯å°ï¼Œå®‰å…¨æ€§é«˜
#     lts è¡¨ç¤ºé•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼Œç¨³å®šæ€§æ›´å¥½
FROM node:lts-alpine

# è®¾ç½®å·¥ä½œç›®å½•: åœ¨å®¹å™¨å†…åˆ›å»ºå¹¶åˆ‡æ¢åˆ° /app ç›®å½•, åç»­æ‰€æœ‰å‘½ä»¤ï¼ˆå¦‚ COPYã€RUNï¼‰éƒ½ä¼šåœ¨è¿™ä¸ªç›®å½•ä¸‹æ‰§è¡Œ
WORKDIR /app

# å®‰è£…ç³»ç»Ÿä¾èµ–: å®‰è£… curl å·¥å…·ï¼Œç”¨äºå¥åº·æ£€æŸ¥, --no-cache å‚æ•°ï¼šä¸ç¼“å­˜åŒ…ç´¢å¼•ï¼Œå‡å°é•œåƒä½“ç§¯
# åœ¨ Alpine é•œåƒä¸­(node:lts-alpine) å®‰è£… curl å·¥å…·.
RUN apk add --no-cache curl

# å®‰è£…åŒ…ç®¡ç†å™¨: å…¨å±€å®‰è£… pnpmï¼ˆPerformant Node Package Managerï¼‰, pnpm æ¯” npm/yarn æ›´å¿«ï¼Œç£ç›˜å ç”¨æ›´å°‘ï¼Œæ”¯æŒ workspace åŠŸèƒ½
RUN npm install -g pnpm@10.24.0

# å¤åˆ¶ workspace é…ç½®æ–‡ä»¶ï¼ˆä¾èµ–å®‰è£…ä¼˜åŒ–å±‚ï¼‰
COPY package.json pnpm-lock.yaml pnpm-workspace.yaml ./

# åˆ›å»º monorepo æ‰€éœ€çš„ç›®å½•ç»“æ„: packages/common: å…±äº«ä»£ç æ¨¡å—, packages/backend: åç«¯æœåŠ¡ä»£ç 
RUN mkdir -p packages/common packages/backend

# å¤åˆ¶å…±äº«æ¨¡å—çš„ä¾èµ–æ–‡ä»¶: å…ˆå¤åˆ¶ common æ¨¡å—çš„ package.jsonï¼Œç”¨äºä¾èµ–è§£æ, è¿™æ ·å¯ä»¥æ­£ç¡®å®‰è£… workspace å†…éƒ¨çš„ä¾èµ–å…³ç³»
COPY packages/common/package.json ./packages/common/

# å¤åˆ¶åç«¯æ¨¡å—çš„ä¾èµ–æ–‡ä»¶: package*.json é€šé…ç¬¦åŒ¹é… package.json å’Œ package-lock.json
COPY packages/backend/package*.json ./packages/backend/

# å®‰è£…ç”Ÿäº§ç¯å¢ƒä¾èµ–
RUN pnpm install --frozen-lockfile --only=production


# å¤åˆ¶æºä»£ç : åœ¨ä¾èµ–å®‰è£…å®Œæˆåå†å¤åˆ¶æºä»£ç , è¿™æ ·ä»£ç å˜æ›´ä¸ä¼šå½±å“ä¾èµ–å±‚çš„ç¼“å­˜ï¼Œæé«˜æ„å»ºæ•ˆç‡
# å¤åˆ¶: åç«¯æœåŠ¡æºä»£ç  + å…±äº«æ¨¡å—æºä»£ç 
COPY packages/backend/ ./packages/backend/
COPY packages/common/ ./packages/common/

# åˆ‡æ¢åˆ°åç«¯æœåŠ¡ç›®å½•: å°†å·¥ä½œç›®å½•åˆ‡æ¢åˆ°åç«¯æœåŠ¡ç›®å½•, åç»­å‘½ä»¤ï¼ˆå¦‚ CMDï¼‰å°†åœ¨æ­¤ç›®å½•ä¸‹æ‰§è¡Œ
WORKDIR /app/packages/backend

# åˆ›å»ºæ—¥å¿—ç›®å½•: åˆ›å»ºæ—¥å¿—æ–‡ä»¶å­˜å‚¨ç›®å½•, ç¡®ä¿åº”ç”¨è¿è¡Œæ—¶å¯ä»¥æ­£å¸¸å†™å…¥æ—¥å¿—æ–‡ä»¶
RUN mkdir -p logs

# æš´éœ²ç«¯å£: å£°æ˜å®¹å™¨è¿è¡Œæ—¶ç›‘å¬çš„ç«¯å£3001(åç«¯ API æœåŠ¡ç«¯å£)
EXPOSE 3001

# ----------------------------------------------------------------------------
# å¥åº·æ£€æŸ¥é…ç½®
HEALTHCHECK --interval=30s --timeout=10s --start-period=40s --retries=3 \
  CMD curl -f http://localhost:3001/api/health || exit 1

# å¯åŠ¨å‘½ä»¤ åœ¨ /app/packages/backend
CMD ["node", "app.js"]
</code></pre>
<h6 data-id="heading-155">2.2 å‰ç«¯ Dockerfile (docker/frontend/Dockerfile)</h6>
<p><strong>åˆ›å»º: <code>touch docker/frontend/Dockerfile</code></strong>:</p>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># ç¬¬ä¸€é˜¶æ®µï¼šæ„å»ºé˜¶æ®µï¼ˆBuilder Stageï¼‰: æ­¤é˜¶æ®µè´Ÿè´£å®‰è£…ä¾èµ–ã€ç¼–è¯‘æºä»£ç ï¼Œç”Ÿæˆé™æ€èµ„æºæ–‡ä»¶

# æ„å»ºé˜¶æ®µåŸºç¡€é•œåƒ
FROM node:lts-alpine AS builder

# è®¾ç½®æ„å»ºå·¥ä½œç›®å½•: åœ¨å®¹å™¨å†…åˆ›å»ºå¹¶åˆ‡æ¢åˆ° /app ç›®å½•
WORKDIR /app

# å®‰è£…åŒ…ç®¡ç†å™¨
# å…¨å±€å®‰è£… pnpmï¼ˆPerformant Node Package Managerï¼‰, pnpm æ¯” npm/yarn æ›´å¿«ï¼Œç£ç›˜å ç”¨æ›´å°‘ï¼Œæ”¯æŒ workspace åŠŸèƒ½
# -p å‚æ•°ï¼šå¦‚æœç›®å½•å·²å­˜åœ¨åˆ™ä¸æŠ¥é”™ï¼Œæ”¯æŒé€’å½’åˆ›å»º
RUN npm install -g pnpm@10.24.0

# å¤åˆ¶ workspace é…ç½®æ–‡ä»¶ï¼ˆä¾èµ–å®‰è£…ä¼˜åŒ–å±‚ï¼‰
COPY package.json pnpm-lock.yaml pnpm-workspace.yaml ./

# åˆ›å»º packages ç›®å½•ç»“æ„
# åˆ›å»º monorepo æ‰€éœ€çš„ç›®å½•ç»“æ„ (å•ä½“ä»“åº“, æ— è®ºæ˜¯å‰ç«¯åº”ç”¨ã€åç«¯æœåŠ¡ã€å…¬å…±ç»„ä»¶åº“ã€å·¥å…·å‡½æ•°ï¼Œè¿˜æ˜¯æ–‡æ¡£ï¼Œéƒ½å¯ä»¥æ”¾åœ¨åŒä¸€ä¸ªä»“åº“é‡Œç®¡ç†)
RUN mkdir -p packages/common packages/frontend

# å¤åˆ¶å…±äº«æ¨¡å—çš„ä¾èµ–æ–‡ä»¶
COPY packages/common/package.json ./packages/common/

# å¤åˆ¶å‰ç«¯æ¨¡å—çš„ä¾èµ–æ–‡ä»¶
COPY packages/frontend/package.json ./packages/frontend/

# å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆåŒ…æ‹¬å¼€å‘ä¾èµ–ï¼‰
RUN pnpm install --frozen-lockfile

# å¤åˆ¶æºä»£ç 
COPY packages/frontend/ ./packages/frontend/
# å¤åˆ¶å…±äº«æ¨¡å—æºä»£ç 
COPY packages/common/ ./packages/common/

# æ„å»ºå‰ç«¯åº”ç”¨
# åˆ‡æ¢åˆ°å‰ç«¯åº”ç”¨ç›®å½•
WORKDIR /app/packages/frontend

# æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼Œç”Ÿæˆé™æ€èµ„æºæ–‡ä»¶åˆ° dist ç›®å½•
# æ„å»ºäº§ç‰©åŒ…æ‹¬ï¼šHTMLã€CSSã€JavaScriptã€å›¾ç‰‡ç­‰é™æ€èµ„æº
RUN pnpm run build

# ç¬¬äºŒé˜¶æ®µï¼šç”Ÿäº§é˜¶æ®µï¼ˆProduction Stageï¼‰

# ç”Ÿäº§é˜¶æ®µåŸºç¡€é•œåƒ
FROM nginx:alpine

# å¤åˆ¶æ„å»ºäº§ç‰©
COPY --from=builder /app/packages/frontend/dist /usr/share/nginx/html

# å¤åˆ¶ Nginx é…ç½®æ–‡ä»¶
COPY docker/nginx/nginx.conf /etc/nginx/nginx.conf

# æš´éœ²ç«¯å£
EXPOSE 80

# å¯åŠ¨ Nginx
CMD ["nginx", "-g", "daemon off;"]
</code></pre>
<h6 data-id="heading-156">2.3 Nuxt SSR Dockerfile (docker/nuxt/Dockerfile)</h6>
<p><strong>åˆ›å»º: <code>touch docker/nuxt/Dockerfile</code></strong>:</p>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># ç¬¬ä¸€é˜¶æ®µï¼šæ„å»ºé˜¶æ®µï¼ˆBuilder Stageï¼‰: æ­¤é˜¶æ®µè´Ÿè´£å®‰è£…ä¾èµ–ã€ç¼–è¯‘æºä»£ç ï¼Œç”Ÿæˆ Nuxt3 æ„å»ºäº§ç‰©
FROM node:lts-alpine AS builder

# è®¾ç½®æ„å»ºå·¥ä½œç›®å½•: åœ¨å®¹å™¨å†…åˆ›å»ºå¹¶åˆ‡æ¢åˆ° /app ç›®å½•
WORKDIR /app

# å®‰è£…åŒ…ç®¡ç†å™¨: å…¨å±€å®‰è£… pnpmï¼ˆPerformant Node Package Managerï¼‰, pnpm æ¯” npm/yarn æ›´å¿«ï¼Œç£ç›˜å ç”¨æ›´å°‘ï¼Œæ”¯æŒ workspace åŠŸèƒ½
RUN npm install -g pnpm@10.24.0

# å¤åˆ¶ workspace é…ç½®æ–‡ä»¶ï¼ˆä¾èµ–å®‰è£…ä¼˜åŒ–å±‚ï¼‰: å…ˆå¤åˆ¶ä¾èµ–ç®¡ç†æ–‡ä»¶(package.jsonã€pnpm-lock.yamlã€pnpm-workspace.yaml)ï¼Œåˆ©ç”¨ Docker å±‚ç¼“å­˜æœºåˆ¶
COPY package.json pnpm-lock.yaml pnpm-workspace.yaml ./

# åˆ›å»º monorepo æ‰€éœ€çš„ç›®å½•ç»“æ„: packages/common: å…±äº«ä»£ç æ¨¡å—, packages/nuxt-ssr: Nuxt3 é¡¹ç›®ç›®å½•
# -p å‚æ•°ï¼šå¦‚æœç›®å½•å·²å­˜åœ¨åˆ™ä¸æŠ¥é”™ï¼Œæ”¯æŒé€’å½’åˆ›å»º
RUN mkdir -p packages/common packages/nuxt-ssr

# å¤åˆ¶å…±äº«æ¨¡å—çš„ä¾èµ–æ–‡ä»¶: å…ˆå¤åˆ¶ common æ¨¡å—çš„ package.jsonï¼Œç”¨äºä¾èµ–è§£æ, è¿™æ ·å¯ä»¥æ­£ç¡®å®‰è£… workspace å†…éƒ¨çš„ä¾èµ–å…³ç³»
COPY packages/common/package.json ./packages/common/

# å¤åˆ¶ Nuxt é¡¹ç›®ä¾èµ–æ–‡ä»¶: å¤åˆ¶ packages/nuxt-ssr çš„ package.json
COPY packages/nuxt-ssr/package.json ./packages/nuxt-ssr/

# å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆåŒ…æ‹¬å¼€å‘ä¾èµ–ï¼‰: --frozen-lockfile ä¸¥æ ¼ä½¿ç”¨ pnpm-lock.yamlï¼Œä¸æ›´æ–°é”æ–‡ä»¶, ç¡®ä¿æ„å»ºçš„ä¸€è‡´æ€§å’Œå¯é‡ç°æ€§
RUN pnpm install --frozen-lockfile

# å¤åˆ¶æºä»£ç : åœ¨ä¾èµ–å®‰è£…å®Œæˆåå†å¤åˆ¶æºä»£ç , è¿™æ ·ä»£ç å˜æ›´ä¸ä¼šå½±å“ä¾èµ–å±‚çš„ç¼“å­˜ï¼Œæé«˜æ„å»ºæ•ˆç‡
# å¤åˆ¶: Nuxt3 é¡¹ç›®æºä»£ç  + å…±äº«æ¨¡å—æºä»£ç 
COPY packages/nuxt-ssr/ ./packages/nuxt-ssr/
COPY packages/common/ ./packages/common/

# åˆ‡æ¢åˆ° Nuxt é¡¹ç›®ç›®å½•: å°†å·¥ä½œç›®å½•åˆ‡æ¢åˆ° Nuxt é¡¹ç›®ç›®å½•, åç»­æ„å»ºå‘½ä»¤å°†åœ¨æ­¤ç›®å½•ä¸‹æ‰§è¡Œ
WORKDIR /app/packages/nuxt-ssr

# è®¾ç½®æ„å»ºæ—¶ç¯å¢ƒå˜é‡: ARG ç”¨äºæ„å»ºæ—¶ä¼ å…¥å‚æ•°, ENV è®¾ç½®è¿è¡Œæ—¶ç¯å¢ƒå˜é‡
ARG NUXT_PUBLIC_API_BASE_URL
ENV NUXT_PUBLIC_API_BASE_URL=${NUXT_PUBLIC_API_BASE_URL:-http://backend:3001/api}

# æ„å»º Nuxt3 åº”ç”¨: æ‰§è¡Œæ„å»ºå‘½ä»¤ï¼Œç”Ÿæˆ SSR åº”ç”¨æ„å»ºäº§ç‰©åˆ° .output ç›®å½•
#   æ„å»ºäº§ç‰©åŒ…æ‹¬: æœåŠ¡ç«¯ä»£ç (.output/server)ã€å®¢æˆ·ç«¯ä»£ç (.output/public)ã€è·¯ç”±é…ç½®ç­‰
RUN pnpm run build


# ç¬¬äºŒé˜¶æ®µï¼šç”Ÿäº§é˜¶æ®µï¼ˆProduction Stageï¼‰: æ­¤é˜¶æ®µåªåŒ…å«è¿è¡Œæ‰€éœ€çš„æ–‡ä»¶ï¼Œä½¿ç”¨è½»é‡çº§çš„ Node.js é•œåƒ

# ç”Ÿäº§é˜¶æ®µåŸºç¡€é•œåƒ: ä½¿ç”¨ Node.js LTS ç‰ˆæœ¬çš„ Alpine Linux é•œåƒä½œä¸ºè¿è¡Œç¯å¢ƒ
# âœ… é‡æ–°å¼€å§‹çš„å¥½å¤„ï¼šå¹²å‡€çš„åŸºç¡€é•œåƒ, è¿™æ˜¯ Docker å¤šé˜¶æ®µæ„å»ºçš„å¸¸è§åšæ³•
FROM node:lts-alpine AS production
# FROM builder  # âŒ ä¸æ¨è

# è®¾ç½®æ„å»ºæ—¶ç¯å¢ƒå˜é‡ï¼ˆåœ¨ç”Ÿäº§é˜¶æ®µä¹Ÿéœ€è¦å®šä¹‰è¿™ä¸ª ARGï¼‰
ARG NUXT_PUBLIC_API_BASE_URL

# è®¾ç½®å·¥ä½œç›®å½•: åœ¨å®¹å™¨å†…åˆ›å»ºå¹¶åˆ‡æ¢åˆ° /app ç›®å½•. æ³¨: ä¸ä¸Šé¢çš„ä¸æ˜¯åŒä¸€ä¸ªç›®å½•, å„è‡ªåœ¨ä¸åŒçš„ é•œåƒä¸­åˆ›å»ºçš„ `/app` ç›®å½•
WORKDIR /app

# å®‰è£…åŒ…ç®¡ç†å™¨: å…¨å±€å®‰è£… pnpm, ç”¨äºå®‰è£…ç”Ÿäº§ä¾èµ–
RUN npm install -g pnpm@10.24.0

# å¤åˆ¶ workspace é…ç½®æ–‡ä»¶ï¼ˆä¾èµ–å®‰è£…ä¼˜åŒ–å±‚ï¼‰: å…ˆå¤åˆ¶ä¾èµ–ç®¡ç†æ–‡ä»¶ï¼Œåˆ©ç”¨ Docker å±‚ç¼“å­˜æœºåˆ¶
COPY package.json pnpm-lock.yaml pnpm-workspace.yaml ./

# åˆ›å»º monorepo æ‰€éœ€çš„ç›®å½•ç»“æ„: packages/common: å…±äº«ä»£ç æ¨¡å—, packages/nuxt-ssr: Nuxt3 é¡¹ç›®ç›®å½•
RUN mkdir -p packages/common packages/nuxt-ssr

# å¤åˆ¶å…±äº«æ¨¡å—çš„ä¾èµ–æ–‡ä»¶: å…ˆå¤åˆ¶ common æ¨¡å—çš„ package.jsonï¼Œç”¨äºä¾èµ–è§£æ
COPY packages/common/package.json ./packages/common/

# å¤åˆ¶ Nuxt é¡¹ç›®ä¾èµ–æ–‡ä»¶: å¤åˆ¶ packages/nuxt-ssr çš„ package.json
COPY packages/nuxt-ssr/package.json ./packages/nuxt-ssr/

# å®‰è£…ç”Ÿäº§ç¯å¢ƒä¾èµ–: --frozen-lockfile ä¸¥æ ¼ä½¿ç”¨ pnpm-lock.yamlï¼Œä¸æ›´æ–°é”æ–‡ä»¶, ç¡®ä¿æ„å»ºçš„ä¸€è‡´æ€§å’Œå¯é‡ç°æ€§
RUN pnpm install --frozen-lockfile --only=production

# ä»æ„å»ºé˜¶æ®µå¤åˆ¶æ„å»ºäº§ç‰©: ä» builder é˜¶æ®µå¤åˆ¶ Nuxt3 æ„å»ºå¥½çš„ .output ç›®å½•
COPY --from=builder /app/packages/nuxt-ssr/.output ./packages/nuxt-ssr/.output

# å¤åˆ¶å¿…è¦çš„é…ç½®æ–‡ä»¶: å¤åˆ¶ Nuxt é…ç½®æ–‡ä»¶å’Œ package.jsonï¼ˆè¿è¡Œæ—¶å¯èƒ½éœ€è¦ï¼‰
COPY packages/nuxt-ssr/nuxt.config.ts ./packages/nuxt-ssr/
COPY packages/nuxt-ssr/package.json ./packages/nuxt-ssr/

# å¤åˆ¶å…±äº«æ¨¡å—æºä»£ç : å¤åˆ¶å…±äº«æ¨¡å—æºä»£ç ï¼ˆå¦‚æœ Nuxt åº”ç”¨è¿è¡Œæ—¶éœ€è¦ï¼‰
COPY packages/common/ ./packages/common/

# åˆ‡æ¢åˆ° Nuxt é¡¹ç›®ç›®å½•: å°†å·¥ä½œç›®å½•åˆ‡æ¢åˆ° Nuxt é¡¹ç›®ç›®å½•, åç»­å‘½ä»¤ï¼ˆå¦‚ CMDï¼‰å°†åœ¨æ­¤ç›®å½•ä¸‹æ‰§è¡Œ
WORKDIR /app/packages/nuxt-ssr

# è®¾ç½®è¿è¡Œæ—¶ç¯å¢ƒå˜é‡
ENV NODE_ENV=production
ENV NUXT_PUBLIC_API_BASE_URL=${NUXT_PUBLIC_API_BASE_URL:-http://backend:3001/api}

# æš´éœ²ç«¯å£: å£°æ˜å®¹å™¨è¿è¡Œæ—¶ç›‘å¬çš„ç«¯å£3000(Nuxt3 SSR æœåŠ¡ç«¯å£)
EXPOSE 3000

# å¥åº·æ£€æŸ¥é…ç½®: é…ç½®å®¹å™¨å¥åº·æ£€æŸ¥æœºåˆ¶
HEALTHCHECK --interval=30s --timeout=10s --start-period=40s --retries=3 \
  CMD node -e "require('http').get('http://localhost:3000', (r) =&gt; {process.exit(r.statusCode === 200 ? 0 : 1)})"

# å¯åŠ¨å‘½ä»¤ åœ¨ /app/packages/nuxt-ssr
CMD ["node", ".output/server/index.mjs"]
</code></pre>
<h6 data-id="heading-157">2.4 Nginx åå‘ä»£ç†é…ç½®æ–‡ä»¶ (docker/nginx/nginx.conf)</h6>
<p><strong>åˆ›å»º: <code>touch docker/nginx/nginx.conf</code></strong>:</p>
<pre><code class="hljs language-conf" lang="conf"># è¿è¡Œ Nginx çš„ç”¨æˆ·å’Œç»„, ä½¿ç”¨ nginx ç”¨æˆ·è¿è¡Œï¼Œæé«˜å®‰å…¨æ€§ï¼ˆé rootï¼‰
user nginx;

# Worker è¿›ç¨‹æ•°, auto: è‡ªåŠ¨è®¾ç½®ä¸º CPU æ ¸å¿ƒæ•°ï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸æ€§èƒ½
worker_processes auto;

# é”™è¯¯æ—¥å¿—é…ç½®
#   /var/log/nginx/error.log: é”™è¯¯æ—¥å¿—æ–‡ä»¶è·¯å¾„
#   warn: åªè®°å½•è­¦å‘ŠåŠä»¥ä¸Šçº§åˆ«çš„æ—¥å¿—
error_log /var/log/nginx/error.log warn;

# PID æ–‡ä»¶è·¯å¾„, å­˜å‚¨ä¸»è¿›ç¨‹ IDï¼Œç”¨äºè¿›ç¨‹ç®¡ç†
pid /var/run/nginx.pid;

# äº‹ä»¶æ¨¡å—é…ç½®
events {
  worker_connections 1024;
}

# HTTP æ¨¡å—é…ç½®
http {
  # MIME ç±»å‹é…ç½®, åŒ…å«æ‰€æœ‰æ ‡å‡†çš„ MIME ç±»å‹æ˜ å°„ï¼ˆå¦‚ text/html, application/json ç­‰ï¼‰
  include /etc/nginx/mime.types;
  
  # é»˜è®¤ MIME ç±»å‹, å½“æ— æ³•è¯†åˆ«æ–‡ä»¶ç±»å‹æ—¶ï¼Œä½¿ç”¨ application/octet-streamï¼ˆäºŒè¿›åˆ¶æµï¼‰
  default_type application/octet-stream;

  # æ—¥å¿—æ ¼å¼å®šä¹‰
  log_format main '$remote_addr - $remote_user [$time_local] "$request" '
                  '$status $body_bytes_sent "$http_referer" '
                  '"$http_user_agent" "$http_x_forwarded_for"';

  # è®¿é—®æ—¥å¿—é…ç½®, ä½¿ç”¨ä¸Šé¢å®šä¹‰çš„ main æ ¼å¼è®°å½•æ‰€æœ‰è®¿é—®æ—¥å¿—
  access_log /var/log/nginx/access.log main;

  # æ€§èƒ½ä¼˜åŒ–é…ç½®
  
  # å¯ç”¨ sendfile
  sendfile on;
  
  # TCP_NOPUSH é€‰é¡¹, ä¸ sendfile é…åˆä½¿ç”¨ï¼Œç­‰å¾…æ•°æ®åŒ…å¡«æ»¡åå†å‘é€ï¼Œå‡å°‘ç½‘ç»œåŒ…æ•°é‡
  tcp_nopush on;
  
  # TCP_NODELAY é€‰é¡¹, ç¦ç”¨ Nagle ç®—æ³•ï¼Œç«‹å³å‘é€å°æ•°æ®åŒ…ï¼Œé™ä½å»¶è¿Ÿ, é€‚ç”¨äºéœ€è¦ä½å»¶è¿Ÿçš„åœºæ™¯ï¼ˆå¦‚ API è¯·æ±‚ï¼‰
  tcp_nodelay on;
  
  # Keep-Alive è¶…æ—¶æ—¶é—´, 65 ç§’ï¼šä¿æŒè¿æ¥æ‰“å¼€çš„æ—¶é—´ï¼Œå‡å°‘è¿æ¥å»ºç«‹å¼€é”€
  keepalive_timeout 65;
  
  # ç±»å‹å“ˆå¸Œè¡¨æœ€å¤§å¤§å°, 2048: æé«˜ MIME ç±»å‹æŸ¥æ‰¾æ•ˆç‡
  types_hash_max_size 2048;
  
  # å®¢æˆ·ç«¯è¯·æ±‚ä½“æœ€å¤§å¤§å°
  #   20M: å…è®¸ä¸Šä¼ æœ€å¤§ 20MB çš„æ–‡ä»¶ï¼ˆå¦‚æ–‡ç« ä¸­çš„å›¾ç‰‡ï¼‰
  client_max_body_size 20M;

  # å¯ç”¨ Gzip å‹ç¼©
  gzip on;
  
  # æ·»åŠ  Vary: Accept-Encoding å“åº”å¤´, å‘Šè¯‰ç¼“å­˜æœåŠ¡å™¨æ ¹æ® Accept-Encoding å¤´ç¼“å­˜ä¸åŒç‰ˆæœ¬
  gzip_vary on;
  
  # ä»£ç†è¯·æ±‚çš„å‹ç¼©ç­–ç•¥, any: å¯¹æ‰€æœ‰ä»£ç†è¯·æ±‚å¯ç”¨å‹ç¼©ï¼ˆåŒ…æ‹¬å·²å‹ç¼©çš„å“åº”ï¼‰
  gzip_proxied any;
  
  # å‹ç¼©çº§åˆ«: 6: å¹³è¡¡å‹ç¼©ç‡å’Œ CPU æ¶ˆè€—ï¼ˆ1-9ï¼Œ9 å‹ç¼©ç‡æœ€é«˜ä½† CPU æ¶ˆè€—æœ€å¤§ï¼‰
  gzip_comp_level 6;
  
  # å‹ç¼©çš„æ–‡ä»¶ç±»å‹, åªå‹ç¼©æ–‡æœ¬ç±»æ–‡ä»¶ï¼Œå›¾ç‰‡å’Œè§†é¢‘ç­‰äºŒè¿›åˆ¶æ–‡ä»¶é€šå¸¸å·²ç»å‹ç¼©è¿‡
  gzip_types text/plain text/css text/xml text/javascript 
  application/json application/javascript application/xml+rss 
  application/rss+xml font/truetype font/opentype 
  application/vnd.ms-fontobject image/svg+xml;
  
  # ç¦ç”¨ Gzip çš„æµè§ˆå™¨, msie6: ç¦ç”¨ IE6 çš„ Gzipï¼ˆIE6 å¯¹ Gzip æ”¯æŒæœ‰é—®é¢˜ï¼‰
  gzip_disable "msie6";
  
  # æœ€å°å‹ç¼©é•¿åº¦, 1000: åªå‹ç¼©å¤§äº 1000 å­—èŠ‚çš„æ–‡ä»¶ï¼Œå°æ–‡ä»¶å‹ç¼©å¯èƒ½åè€Œå¢åŠ ä½“ç§¯
  gzip_min_length 1000;

  # ä»£ç†ç¼“å­˜é…ç½®
  # é…ç½® API å“åº”çš„ç¼“å­˜å­˜å‚¨
  proxy_cache_path /var/cache/nginx levels=1:2 keys_zone=api_cache:10m max_size=100m inactive=60m use_temp_path=off;

  # ä¸Šæ¸¸æœåŠ¡å™¨é…ç½®ï¼ˆUpstreamï¼‰
  
  # åç«¯ API æœåŠ¡é…ç½®
  upstream backend {
    # åç«¯æœåŠ¡åœ°å€
    #   backend:3001: Docker Compose ä¸­çš„æœåŠ¡åï¼Œç«¯å£ 3001
    #   ä½¿ç”¨æœåŠ¡åè€Œé IPï¼Œç”± Docker ç½‘ç»œ DNS è§£æ
    server backend:3001;
    
    # Keep-Alive è¿æ¥æ•°
    #   32: ä¿æŒ 32 ä¸ªç©ºé—²è¿æ¥ï¼Œå‡å°‘è¿æ¥å»ºç«‹å¼€é”€
    keepalive 32;
  }

  # Nuxt3 SSR æœåŠ¡é…ç½®
  upstream nuxt {
      # Nuxt3 SSR æœåŠ¡åœ°å€
    #   nuxt:3000: Docker Compose ä¸­çš„æœåŠ¡åï¼Œç«¯å£ 3000
    server nuxt:3000;
    
    # Keep-Alive è¿æ¥æ•°
    keepalive 32;
  }

  # HTTP æœåŠ¡å™¨é…ç½®
  server {
    # ç›‘å¬ç«¯å£, 80: HTTP æ ‡å‡†ç«¯å£
    listen 80;
    
    # æœåŠ¡å™¨åç§°, localhost: æœ¬åœ°è®¿é—®ï¼Œç”Ÿäº§ç¯å¢ƒåº”æ”¹ä¸ºå®é™…åŸŸå
    server_name localhost;
    
    # ç½‘ç«™æ ¹ç›®å½•
    root /usr/share/nginx/html;
    
    # é»˜è®¤é¦–é¡µæ–‡ä»¶, ç¡®ä¿ index.html å¯ä»¥è¢«æ­£ç¡®è®¿é—®
    index index.html;

    # å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰å¤´
    # é˜²æ­¢ XSS æ”»å‡»ï¼Œé™åˆ¶èµ„æºåŠ è½½æ¥æº, é€‚é… ECharts noeval ç‰ˆæœ¬ï¼Œæ—  unsafe-evalï¼Œæå‡å®‰å…¨æ€§
    add_header Content-Security-Policy "
      default-src 'self';                                    # é»˜è®¤åªå…è®¸åŒæºèµ„æº
      script-src 'self';                                     # è„šæœ¬æ¥æºï¼ˆä¸å…è®¸å†…è”å’Œ evalï¼Œä½¿ç”¨ ECharts noeval ç‰ˆæœ¬ï¼‰
      style-src 'self' 'unsafe-inline';                      # æ ·å¼æ¥æºï¼ˆå…è®¸å†…è”æ ·å¼ï¼ŒECharts æ ·å¼éœ€è¦ï¼‰
      img-src 'self' data: blob:;                            # å›¾ç‰‡æ¥æºï¼ˆå…è®¸ data URI å’Œ blobï¼ŒECharts å›¾è¡¨å¯¼å‡ºéœ€è¦ï¼‰
      font-src 'self' data:;                                  # å­—ä½“æ¥æºï¼ˆå…è®¸ data URIï¼‰
      connect-src 'self';                                     # è¿æ¥æ¥æºï¼ˆAPI è¯·æ±‚ï¼‰
      object-src 'none';                                      # ç¦æ­¢æ’ä»¶
      base-uri 'self';                                        # é™åˆ¶ base æ ‡ç­¾çš„ URL
      frame-src 'none';                                       # ç¦æ­¢ iframe
    " always;

    add_header X-XSS-Protection "1; mode=block" always;
    add_header X-Frame-Options "DENY" always;
    add_header X-Content-Type-Options "nosniff" always;

    location /api {
      proxy_pass http://backend;
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header X-Forwarded-Proto $scheme;
      proxy_cache_bypass $http_upgrade;
      proxy_cache api_cache;
      proxy_cache_valid 200 60m;
      proxy_cache_valid 404 1m;
      proxy_cache_use_stale error timeout updating http_500 http_502 http_503 http_504;
      proxy_cache_background_update on;
      proxy_cache_lock on;
      proxy_cache_methods GET HEAD;
      proxy_no_cache $request_method;
    }

    # Nuxt3 é™æ€èµ„æºä»£ç†
    # ä»£ç† Nuxt3 çš„é™æ€èµ„æºï¼ˆCSSã€JS ç­‰ï¼‰,^~ : å‰ç¼€åŒ¹é…ï¼Œä¼˜å…ˆçº§é«˜äºæ­£åˆ™åŒ¹é…ï¼Œé˜»æ­¢åç»­æ­£åˆ™åŒ¹é…
    location ^~ /_nuxt/ {
      # ä»£ç†åˆ° Nuxt3 æœåŠ¡
      proxy_pass http://nuxt;
      
      # HTTP ç‰ˆæœ¬å’Œè¯·æ±‚å¤´
      proxy_http_version 1.1;
      proxy_set_header Host $host;
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header X-Forwarded-Proto $scheme;
      
      # é™æ€èµ„æºé•¿æœŸç¼“å­˜: 1y: ç¼“å­˜ 1 å¹´, immutable: æ ‡è®°ä¸ºä¸å¯å˜èµ„æºï¼Œæµè§ˆå™¨å¯æ°¸ä¹…ç¼“å­˜
      expires 1y;
      add_header Cache-Control "public, immutable";
    }

    # Vue3 SPA é™æ€èµ„æºç¼“å­˜
    location ~* \.(jpg|jpeg|png|gif|ico|css|js|svg|woff|woff2|ttf|eot)$ {
      # é•¿æœŸç¼“å­˜
      expires 1y;
      add_header Cache-Control "public, immutable";
      
      # å…³é—­è®¿é—®æ—¥å¿—
      #   é™æ€èµ„æºè®¿é—®é‡å¤§ï¼Œä¸è®°å½•æ—¥å¿—å‡å°‘ I/O
      access_log off;
    }

    # Nuxt3 SSR é¦–é¡µ
    location = / {
      # ä»£ç†åˆ° Nuxt3 SSR æœåŠ¡
      proxy_pass http://nuxt;
      
      # HTTP ç‰ˆæœ¬å’Œ WebSocket æ”¯æŒ
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
      proxy_set_header X-Real-IP $remote_addr;
      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
      proxy_set_header X-Forwarded-Proto $scheme;
      proxy_cache_bypass $http_upgrade;
      
      add_header Cache-Control "no-cache, no-store, must-revalidate";
    }

    location / { 
      add_header Cache-Control "no-cache, no-store, must-revalidate";
    }
    
    # æ·»åŠ äº† location = /index.htmlï¼šç¡®ä¿å›é€€åˆ° /index.html æ—¶èƒ½æ­£ç¡®è®¿é—®
    #   å½“ try_files å›é€€åˆ° /index.html æ—¶ï¼Œè¿™ä¸ª location ç¡®ä¿æ–‡ä»¶èƒ½è¢«æ­£ç¡®è¿”å›
    location = /index.html {
      root /usr/share/nginx/html;
      add_header Cache-Control "no-cache, no-store, must-revalidate";
    }

    location /health {
      # ä¸è®°å½•è®¿é—®æ—¥å¿—
      access_log off;
      
      # ç›´æ¥è¿”å› 200 çŠ¶æ€ç å’Œ "healthy" æ–‡æœ¬
      return 200 "healthy\n";
      
      # è®¾ç½®å“åº”ç±»å‹
      add_header Content-Type text/plain;
    }

    # 5xx é”™è¯¯ï¼šè¿”å› 50x.html é”™è¯¯é¡µé¢
    error_page 500 502 503 504 /50x.html;
    
    # 50x.html æ–‡ä»¶ä½ç½®
    location = /50x.html {
      root /usr/share/nginx/html;
    }
  }
}
</code></pre>
<h6 data-id="heading-158">2.5 æ·»åŠ  docker-compose.yml</h6>
<p><strong>åˆ›å»º: <code>touch docker/docker-compose.yml</code></strong>:</p>
<pre><code class="hljs language-yaml" lang="yaml">  <span class="hljs-attr">services:</span>
  <span class="hljs-attr">mysql:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:8.0</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">blog-test-mysql2</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">${DB_PASSWORD:-blog123}</span>
      <span class="hljs-attr">MYSQL_DATABASE:</span> <span class="hljs-string">${DB_NAME:-blog_db}</span>
      <span class="hljs-attr">MYSQL_USER:</span> <span class="hljs-string">${DB_USER:-blog_root}</span>
      <span class="hljs-attr">MYSQL_PASSWORD:</span> <span class="hljs-string">${DB_PASSWORD:-blog123}</span>
    <span class="hljs-comment"># ğŸ‘‡ devæ¨¡å¼, ä¸´æ—¶æš´éœ²ç«¯å£ç”¨äºæœ¬åœ°å¼€å‘</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"${DB_PORT:-3306}:3306"</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">mysql_data:/var/lib/mysql</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">./scripts/init.sql:/docker-entrypoint-initdb.d/init.sql:ro</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">--default-authentication-plugin=caching_sha2_password</span> <span class="hljs-comment"># è®¾ç½®é»˜è®¤ è®¤è¯æ’ä»¶ä¸º caching_sha2_password</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">blog-network</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">db-network</span>  <span class="hljs-comment"># å…³è”db-networkï¼Œå®ç°ç½‘ç»œéš”ç¦»</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-comment"># test: ["CMD", "mysqladmin", "ping", "-h", "localhost"]</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"mysqladmin"</span>, <span class="hljs-string">"ping"</span>, <span class="hljs-string">"-h"</span>, <span class="hljs-string">"localhost"</span>, <span class="hljs-string">"-u"</span>, <span class="hljs-string">"root"</span>, <span class="hljs-string">"-p${DB_PASSWORD:-blog123}"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">5s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">5</span>

  <span class="hljs-attr">redis:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">redis:8.4.0</span>
    <span class="hljs-comment"># image: redis:7.2-alpine # ä¿®æ­£Redisé•œåƒç‰ˆæœ¬ä¸ºæœ‰æ•ˆç¨³å®šç‰ˆ</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">blog-test-redis2</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">REDIS_PASSWORD=${REDIS_PASSWORD:-redis123}</span> <span class="hljs-comment"># æ˜¾å¼å®šä¹‰ç¯å¢ƒå˜é‡ï¼Œé¿å… command ä¸­è§£æå¤±è´¥</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"${REDIS_PORT:-6379}:6379"</span>  <span class="hljs-comment"># æš´éœ²ç«¯å£ä¾›å¤–éƒ¨è®¿é—®</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">redis_data:/data</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">blog-network</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">db-network</span>  <span class="hljs-comment"># å…³è”db-networkï¼Œå®ç°ç½‘ç»œéš”ç¦»</span>
    <span class="hljs-attr">command:</span> <span class="hljs-string">redis-server</span> <span class="hljs-string">--appendonly</span> <span class="hljs-literal">yes</span> <span class="hljs-string">--requirepass</span> <span class="hljs-string">${REDIS_PASSWORD:-redis123}</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-comment"># æ”¹ç”¨ --password å‚æ•°ï¼Œå…¼å®¹ Alpine ç‰ˆæœ¬</span>
      <span class="hljs-comment"># test: ["CMD", "redis-cli", "--password", "$REDIS_PASSWORD", "ping"]</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"redis-cli"</span>, <span class="hljs-string">"-a"</span>, <span class="hljs-string">"${REDIS_PASSWORD:-redis123}"</span>, <span class="hljs-string">"ping"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">5s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">5</span>

  <span class="hljs-comment"># åç«¯æœåŠ¡</span>
  <span class="hljs-attr">backend:</span>
    <span class="hljs-attr">build:</span>
      <span class="hljs-attr">context:</span> <span class="hljs-string">..</span>
      <span class="hljs-attr">dockerfile:</span> <span class="hljs-string">docker/backend/Dockerfile</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">blog-backend</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">NODE_ENV:</span> <span class="hljs-string">production</span>
      <span class="hljs-attr">PORT:</span> <span class="hljs-number">3001</span>
      <span class="hljs-attr">DB_HOST:</span> <span class="hljs-string">mysql</span>
      <span class="hljs-attr">DB_PORT:</span> <span class="hljs-number">3306</span>
      <span class="hljs-attr">DB_NAME:</span> <span class="hljs-string">${DB_NAME:-blog_db}</span>
      <span class="hljs-attr">DB_USER:</span> <span class="hljs-string">${DB_USER:-blog_user}</span>
      <span class="hljs-attr">DB_PASSWORD:</span> <span class="hljs-string">${DB_PASSWORD:-blog123}</span>
      <span class="hljs-attr">REDIS_HOST:</span> <span class="hljs-string">redis</span>
      <span class="hljs-attr">REDIS_PORT:</span> <span class="hljs-number">6379</span>
      <span class="hljs-attr">REDIS_PASSWORD:</span> <span class="hljs-string">${REDIS_PASSWORD:-redis123}</span>
      <span class="hljs-attr">JWT_SECRET:</span> <span class="hljs-string">${JWT_SECRET:-your_jwt_secret_key_change_in_production}</span>
      <span class="hljs-attr">JWT_EXPIRES_IN:</span> <span class="hljs-string">7d</span>
      <span class="hljs-attr">CORS_ORIGIN:</span> <span class="hljs-string">http://localhost</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"${BACKEND_PORT:-3001}:3001"</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">backend_logs:/app/logs</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-attr">mysql:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">service_healthy</span>
      <span class="hljs-attr">redis:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">service_healthy</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">blog-network</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"curl"</span>, <span class="hljs-string">"-f"</span>, <span class="hljs-string">"http://localhost:3001/api/health"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">3</span>
      <span class="hljs-attr">start_period:</span> <span class="hljs-string">40s</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>

  <span class="hljs-comment"># Nuxt3 SSR æœåŠ¡ï¼ˆé¦–é¡µï¼‰</span>
  <span class="hljs-attr">nuxt:</span>
    <span class="hljs-attr">dns:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span>
      <span class="hljs-bullet">-</span> <span class="hljs-number">1.1</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span>
    <span class="hljs-attr">build:</span>
      <span class="hljs-attr">context:</span> <span class="hljs-string">..</span>
      <span class="hljs-attr">dockerfile:</span> <span class="hljs-string">docker/nuxt/Dockerfile</span>
      <span class="hljs-attr">args:</span>
        <span class="hljs-attr">NUXT_PUBLIC_API_BASE_URL:</span> <span class="hljs-string">${NUXT_PUBLIC_API_BASE_URL:-http://backend:3001/api}</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">blog-nuxt</span>
    <span class="hljs-attr">environment:</span>
      <span class="hljs-attr">NODE_ENV:</span> <span class="hljs-string">production</span>
      <span class="hljs-attr">NUXT_PUBLIC_API_BASE_URL:</span> <span class="hljs-string">${NUXT_PUBLIC_API_BASE_URL:-http://backend:3001/api}</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"${NUXT_PORT:-3000}:3000"</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-attr">backend:</span>
        <span class="hljs-attr">condition:</span> <span class="hljs-string">service_healthy</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">blog-network</span> <span class="hljs-comment"># ä»…å…³è”å…¬å…±ç½‘ç»œï¼Œä¸è®¿é—®æ•°æ®åº“</span>
    <span class="hljs-attr">healthcheck:</span>
      <span class="hljs-comment"># test: ["CMD", "node", "-e", "require('http').get('http://localhost:3000', (r) =&gt; {process.exit(r.statusCode === 200 ? 0 : 1)})"]</span>
      <span class="hljs-comment"># ä¼˜åŒ–å¥åº·æ£€æŸ¥é€»è¾‘ï¼Œå¢åŠ é”™è¯¯æ•è·</span>
      <span class="hljs-attr">test:</span> [<span class="hljs-string">"CMD"</span>, <span class="hljs-string">"node"</span>, <span class="hljs-string">"-e"</span>, <span class="hljs-string">"const http = require('http'); const req = http.get('http://localhost:3000', (res) =&gt; { process.exit(res.statusCode === 200 ? 0 : 1); }); req.on('error', () =&gt; { process.exit(1); });"</span>]
      <span class="hljs-attr">interval:</span> <span class="hljs-string">30s</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">10s</span>
      <span class="hljs-attr">retries:</span> <span class="hljs-number">3</span>
      <span class="hljs-attr">start_period:</span> <span class="hljs-string">40s</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>

  <span class="hljs-comment"># å‰ç«¯æœåŠ¡ï¼ˆVue3 SPAï¼Œå…¶ä»–é¡µé¢ï¼‰</span>
  <span class="hljs-attr">frontend:</span>
    <span class="hljs-attr">build:</span>
      <span class="hljs-attr">context:</span> <span class="hljs-string">..</span>
      <span class="hljs-attr">dockerfile:</span> <span class="hljs-string">docker/frontend/Dockerfile</span>
    <span class="hljs-attr">container_name:</span> <span class="hljs-string">blog-frontend</span>
    <span class="hljs-attr">ports:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">"${FRONTEND_PORT:-80}:80"</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">backend</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">blog-network</span> <span class="hljs-comment"># ä»…å…³è”å…¬å…±ç½‘ç»œï¼Œä¸è®¿é—®æ•°æ®åº“</span>
    <span class="hljs-attr">restart:</span> <span class="hljs-string">unless-stopped</span>

<span class="hljs-comment"># é¡¶çº§ volumes å®šä¹‰, ä¼˜ç‚¹ï¼šæ•°æ®ä¸ä¼šéšå®¹å™¨åˆ é™¤; æ›´å®‰å…¨ã€å¯å¤ç”¨;</span>
<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">mysql_data:</span>
  <span class="hljs-attr">redis_data:</span>
  <span class="hljs-attr">backend_logs:</span>

<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">blog-network:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
  <span class="hljs-attr">db-network:</span> <span class="hljs-comment"># ä»…æ•°æ®åº“/backend å¯è®¿é—®</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
</code></pre>
<blockquote>
<p>æ³¨: åˆ›å»ºå®Œæˆå, ä½¿ç”¨ <code>docker compose config</code> æ¥æ£€æŸ¥é…ç½®è¯­æ³•.</p>
</blockquote>
<h6 data-id="heading-159">2.6 ä¿®æ”¹æ ¹ç›®å½•ä¸­çš„packages.json, æ·»åŠ  build ç›¸å…³çš„ è„šæœ¬å‘½ä»¤:</h6>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"blog-ssr"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å…¨æ ˆåšå®¢ç³»ç»Ÿï¼Œæ”¯æŒ SSR å’Œåå°ç®¡ç†"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"private"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"packageManager"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm@9.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"workspaces"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"packages/*"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"docker-dev:up:redis"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cd docker &amp;&amp; docker compose -f docker-compose.dev.yml --env-file ../.env.development up -d redis"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"docker-dev:up:mysql"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cd docker &amp;&amp; docker compose -f compose docker-compose.dev.yml --env-file ../.env.development up -d mysql"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"docker-dev:up:nuxt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cd docker &amp;&amp; docker compose -f compose docker-compose.dev.yml --env-file ../.env.development up -d nuxt"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"docker-dev:up:frontend"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cd docker &amp;&amp; docker compose -f compose docker-compose.dev.yml --env-file ../.env.development up -d frontend"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"docker-dev:up:backend"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cd docker &amp;&amp; docker compose -f compose docker-compose.dev.yml --env-file ../.env.development up -d backend"</span><span class="hljs-punctuation">,</span>
    
    <span class="hljs-attr">"docker-dev:stop"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cd docker &amp;&amp; docker compose -f compose docker-compose.dev.yml --env-file ../.env.development stop"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"docker-dev:stop:frontend"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cd docker &amp;&amp; docker compose -f compose docker-compose.dev.yml --env-file ../.env.development stop frontend"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"docker-dev:stop:backend"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cd docker &amp;&amp; docker compose -f compose docker-compose.dev.yml --env-file ../.env.development stop backend"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"docker-dev:stop:nuxt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cd docker &amp;&amp; docker compose -f compose docker-compose.dev.yml --env-file ../.env.development stop nuxt"</span><span class="hljs-punctuation">,</span>

    <span class="hljs-attr">"dev:frontend"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm run docker-dev:stop:frontend || true &amp;&amp; cd packages/frontend &amp;&amp; pnpm run dev"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev:backend"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm run docker-dev:stop:backend || true &amp;&amp; cd packages/backend &amp;&amp; pnpm run dev"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev:nuxt"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm run docker-dev:stop:nuxt || true &amp;&amp; cd packages/nuxt-ssr &amp;&amp; pnpm run dev"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"kill:frontend"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"kill-port 5173 --force"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"kill:backend"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"kill-port 3001 --force"</span><span class="hljs-punctuation">,</span>

    <span class="hljs-attr">"docker:logs"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cd docker &amp;&amp; docker compose logs -f"</span><span class="hljs-punctuation">,</span>

    <span class="hljs-attr">"docker:build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm run docker:down &amp;&amp; cd docker &amp;&amp; docker compose up -d --build"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"backend:init-db"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cd packages/backend &amp;&amp; npm run init-db"</span><span class="hljs-punctuation">,</span>

    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm run docker-dev:up:redis &amp;&amp; pnpm run docker-dev:up:mysql &amp;&amp; pnpm docker-dev:stop &amp;&amp; concurrently \"pnpm run dev:frontend\" \"pnpm run dev:backend\" \"pnpm run dev:nuxt\""</span><span class="hljs-punctuation">,</span>
    
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm run docker:build &amp;&amp; pnpm run backend:init-db"</span><span class="hljs-punctuation">,</span>

    <span class="hljs-attr">"docker:up"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm run docker:down &amp;&amp; cd docker &amp;&amp; docker compose up -d"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"docker:down"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"cd docker &amp;&amp; docker compose down"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"engines"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=18.0.0"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"pnpm"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"&gt;=6.11.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"author"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"henrypt"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"license"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MIT"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"markdown-it"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^14.1.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"eslint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^9.39.2"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"husky"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^9.1.7"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lint-staged"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^16.2.7"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"prettier"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^3.7.4"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"sass"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^1.97.2"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"concurrently"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^9.2.1"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"kill-port"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.0.1"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h6 data-id="heading-160">2.7 å…¨å±€ä¾èµ–å®‰è£…</h6>
<pre><code class="hljs language-bash" lang="bash">pnpm install
</code></pre>

































<table><thead><tr><th>å‘½ä»¤</th><th>æ„å»ºé•œåƒ</th><th>å¯åŠ¨æœåŠ¡</th><th>å¼€å‘æ¨¡å¼</th><th>é€‚ç”¨ç¯å¢ƒ</th></tr></thead><tbody><tr><td><code>pnpm run dev</code></td><td>âŒ</td><td>âœ… (æœ¬åœ°)</td><td>çƒ­é‡è½½å¼€å‘</td><td>æœ¬åœ°å¼€å‘</td></tr><tr><td><code>pnpm run docker:up</code></td><td>âŒ</td><td>âœ… (å®¹å™¨)</td><td>ç”Ÿäº§æ¨¡å¼</td><td>å·²éƒ¨ç½²ç¯å¢ƒ</td></tr><tr><td><code>pnpm run docker:build</code></td><td>âœ…</td><td>âœ… (å®¹å™¨)</td><td>ç”Ÿäº§æ¨¡å¼</td><td>é¦–æ¬¡éƒ¨ç½²/ä»£ç æ›´æ–°</td></tr></tbody></table>
<blockquote>
<p><code>pnpm run dev</code> ç”¨äº å¼€å‘ &amp; æµ‹è¯• é˜¶æ®µ
<code>pnpm run docker:up</code> å’Œ <code>pnpm run docker:build</code> å‰, å»ºè®®å…ˆæ‰§è¡Œ docker compose down</p>
</blockquote>
<p><strong>ä½¿ç”¨å»ºè®®</strong>ï¼š</p>
<ul>
<li>å¼€å‘æ—¶ï¼š<code>pnpm run dev</code></li>
<li>éƒ¨ç½²æ–°ç‰ˆæœ¬ï¼š<code>pnpm run docker:build</code></li>
<li>å¯åŠ¨ç°æœ‰éƒ¨ç½²ï¼š<code>pnpm run docker:up</code> /  <code>pnpm run docker:down</code></li>
</ul>
<h6 data-id="heading-161">2.8 æ·»åŠ  .env</h6>
<p><strong>é¡¹ç›®æ ¹ç›®å½• åˆ›å»º: <code>touch .env</code></strong>:</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åç«¯æœåŠ¡é…ç½®</span>
NODE_ENV=production
HOST=0.0.0.0
PORT=3001

<span class="hljs-comment"># æ•°æ®åº“é…ç½®ï¼ˆDocker å®¹å™¨ï¼‰</span>
DB_HOST=localhost
DB_PORT=3306
DB_NAME=blog_db
DB_USER=blog_root
DB_PASSWORD=blog123

<span class="hljs-comment"># Redis é…ç½®ï¼ˆDocker å®¹å™¨ï¼‰</span>
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis123

<span class="hljs-comment"># JWT é…ç½®</span>
JWT_SECRET=dev_jwt_secret_key_for_development_only
JWT_EXPIRES_IN=7d

<span class="hljs-comment"># CORS é…ç½®ï¼ˆå…è®¸å‰ç«¯è®¿é—®ï¼‰</span>
CORS_ORIGIN=http://localhost

<span class="hljs-comment"># Nuxt SSR é…ç½®</span>
NUXT_PUBLIC_API_BASE_URL=http://localhost:3001/api
NUXT_PUBLIC_SITE_BASE=http://localhost:3000
NUXT_PUBLIC_SITE_NAME=ä¸ªäººåšå®¢

<span class="hljs-comment"># Docker æœåŠ¡ç«¯å£é…ç½®</span>
BACKEND_PORT=3001
FRONTEND_PORT=80
NUXT_PORT=3000
</code></pre>
<h6 data-id="heading-162">æ³¨æ„äº‹é¡¹ï¼š</h6>
<ul>
<li>ç¯å¢ƒå˜é‡ä¼˜å…ˆçº§ï¼š<code>environment</code> ä¸­çš„ç¯å¢ƒå˜é‡ä¼šè¦†ç›– <code>Dockerfile</code> ä¸­è®¾ç½®çš„ç¯å¢ƒå˜é‡</li>
<li>æ„å»ºå‚æ•°ï¼š<code>build.args</code> ä¸­çš„å‚æ•°åªåœ¨æ„å»ºæ—¶æœ‰æ•ˆï¼Œä¸ä¼šä½œä¸ºç¯å¢ƒå˜é‡ä¼ é€’åˆ°è¿è¡Œçš„å®¹å™¨ä¸­</li>
<li>å¤šé˜¶æ®µæ„å»ºï¼šå½“å‰çš„ Nuxt Dockerfile å·²ç»æ˜¯å¤šé˜¶æ®µæ„å»ºï¼ŒåŒ…å«äº†æ„å»ºé˜¶æ®µå’Œç”Ÿäº§é˜¶æ®µï¼Œè¿™æ˜¯æœ€ä½³å®è·µ</li>
</ul>
<h5 data-id="heading-163">æ­¥éª¤ 4ï¼šéƒ¨ç½²æµç¨‹</h5>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. è¿›å…¥dockerç›®å½•, æ£€æŸ¥dockeré…ç½®è¯­æ³•çš„æ­£ç¡®æ€§:</span>
`docker-compose config`

<span class="hljs-comment"># 2. æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡</span>
<span class="hljs-comment"># è¿”å›é¡¹ç›®æ ¹ç›®å½•</span>
pnpm run build

<span class="hljs-comment"># æ³¨: build è„šæœ¬ä¼šå…ˆåœæ­¢ç°æœ‰å®¹å™¨ï¼Œæ„å»ºæ–°é•œåƒï¼Œå¯åŠ¨æœåŠ¡ï¼Œç„¶ååˆå§‹åŒ–æ•°æ®åº“</span>
<span class="hljs-comment"># æ³¨: build é‡Œé›†æˆäº†dockerçš„build + init-db(æ•°æ®åº“åˆå§‹åŒ–å·¥ä½œ)</span>

<span class="hljs-comment"># æŸ¥çœ‹æœåŠ¡çŠ¶æ€</span>
docker compose ps

<span class="hljs-comment"># æŸ¥çœ‹æœåŠ¡æ—¥å¿—</span>
pnpm run docker:logs
</code></pre>
<h4 data-id="heading-164">âœ… éªŒè¯æ–¹å¼</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. è¿›å…¥dockerç›®å½•, æ£€æŸ¥dockeré…ç½®è¯­æ³•çš„æ­£ç¡®æ€§:</span>
`docker-compose config`

<span class="hljs-comment"># 2. æ£€æŸ¥æœåŠ¡çŠ¶æ€</span>
docker compose ps
<span class="hljs-comment"># åº”æ˜¾ç¤ºæ‰€æœ‰æœåŠ¡çŠ¶æ€ä¸º Up/Healthy</span>

<span class="hljs-comment"># 3. æµ‹è¯•å¥åº·æ£€æŸ¥</span>
curl http://localhost/api/health | jq
<span class="hljs-comment"># åº”è¿”å›å®Œæ•´çš„å¥åº·çŠ¶æ€ä¿¡æ¯ï¼ŒåŒ…å«æ•°æ®åº“ã€Redisã€å†…å­˜ç­‰çŠ¶æ€</span>

<span class="hljs-comment"># 4. æµ‹è¯•å‰å°é¦–é¡µ</span>
curl http://localhost/
<span class="hljs-comment"># åº”è¿”å›å®Œæ•´çš„ HTML é¡µé¢ï¼ˆSSRï¼‰</span>

<span class="hljs-comment"># 5. æµ‹è¯•åå°ç®¡ç†</span>
curl http://localhost/admin/
<span class="hljs-comment"># åº”è¿”å›å‰ç«¯åº”ç”¨</span>

<span class="hljs-comment"># 6. æŸ¥çœ‹æœåŠ¡æ—¥å¿—</span>
pnpm run docker:logs:backend
pnpm run docker:logs:nuxt

<span class="hljs-comment"># 7. æ£€æŸ¥å®¹å™¨èµ„æºä½¿ç”¨</span>
docker stats

<span class="hljs-comment"># 8. æœåŠ¡å¥åº·æ£€æŸ¥</span>
```bash
curl http://localhost:3001/api/health

<span class="hljs-comment"># 9. ç™»å½•æ£€æŸ¥</span>
curl -v -X POST http://localhost:3001/api/auth/login \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{"username":"admin","password":"admin123"}'</span>
</code></pre>
<h4 data-id="heading-165">âœ… è¡¥å……æ’æŸ¥ç‚¹</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. ç½‘ç»œ / æƒé™é—®é¢˜ï¼šdb-network ç½‘ç»œæ˜¯å¦åˆ›å»ºæˆåŠŸï¼ŸRedis å®¹å™¨æ˜¯å¦æœ‰æƒé™å†™å…¥ redis_data å·ï¼Ÿ</span>
  <span class="hljs-comment"># æ£€æŸ¥ç½‘ç»œ</span>
  docker network <span class="hljs-built_in">ls</span> | grep db-network
  <span class="hljs-comment"># æ£€æŸ¥å·æƒé™</span>
  docker volume inspect redis_data

<span class="hljs-comment"># 2. ç«¯å£å†²çªï¼šå®¿ä¸»æœº 6379 ç«¯å£æ˜¯å¦è¢«å…¶ä»–è¿›ç¨‹å ç”¨ï¼Ÿ</span>
  <span class="hljs-comment"># è¿è¡Œ</span>
  lsof -i :6379  <span class="hljs-comment"># Mac/Linux</span>
  netstat -ano | findstr :6379  <span class="hljs-comment"># Windows</span>
</code></pre>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ…è°ˆ storeToRefs]]></title>    <link>https://juejin.cn/post/7593171168259506185</link>    <guid>https://juejin.cn/post/7593171168259506185</guid>    <pubDate>2026-01-09T14:02:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593171168259506185" data-draft-id="7592818272153911323" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµ…è°ˆ storeToRefs"/> <meta itemprop="keywords" content="å‰ç«¯,TypeScript,Vuex"/> <meta itemprop="datePublished" content="2026-01-09T14:02:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœ¨è¥¿å®‰ç‰§ç¾Šçš„ç‰›æ²¹æœ"/> <meta itemprop="url" content="https://juejin.cn/user/2946346894233133"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµ…è°ˆ storeToRefs
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2946346894233133/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœ¨è¥¿å®‰ç‰§ç¾Šçš„ç‰›æ²¹æœ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T14:02:27.000Z" title="Fri Jan 09 2026 14:02:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>storeToRefs æ˜¯ä¸“é—¨ç”¨æ¥æŠŠ Pinia store è§£æ„æˆã€Œä»ç„¶æœ‰å“åº”æ€§ + å®Œæ•´ TS æç¤ºã€çš„ refs å·¥å…·ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€<code>storeToRefs</code> æ˜¯å¹²å˜›çš„ï¼Ÿ</h2>
<h3 data-id="heading-2">é—®é¢˜èƒŒæ™¯</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useUserStore</span>()
<span class="hljs-keyword">const</span> { name } = store   <span class="hljs-comment">// âŒ å“åº”æ€§æ–­äº† + TS å˜å¼±</span>
</code></pre>
<h3 data-id="heading-3">è§£å†³æ–¹æ¡ˆ</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { storeToRefs } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useUserStore</span>()
<span class="hljs-keyword">const</span> { name } = <span class="hljs-title function_">storeToRefs</span>(store) <span class="hljs-comment">// âœ…</span>
</code></pre>
<p><strong>ç»“æœï¼š</strong></p>
<ul>
<li><code>name</code> æ˜¯ <code>Ref&lt;string&gt;</code></li>
<li>å“åº”æ€§ä¸ä¸¢</li>
<li>TS è‡ªåŠ¨è¡¥å…¨ã€ç±»å‹æ£€æŸ¥å®Œæ•´</li>
</ul>
<hr/>
<h2 data-id="heading-4">äºŒã€å®ƒåˆ°åº•â€œå¸®ä½ åšäº†ä»€ä¹ˆâ€ï¼Ÿ</h2>
<p><code>storeToRefs(store)</code> ä¼šï¼š</p>
<ol>
<li>
<p><strong>åªå¤„ç†</strong></p>
<ol>
<li><code>state</code></li>
<li><code>getters</code></li>
</ol>
</li>
<li>
<p><strong>è·³è¿‡</strong></p>
<ol>
<li><code>actions</code></li>
</ol>
</li>
<li>
<p>æŠŠå®ƒä»¬ç»Ÿä¸€åŒ…æˆ <code>ref / computed</code></p>
</li>
</ol>
<p>å¯ä»¥æŠŠå®ƒç†è§£æˆï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// ä¼ªä»£ç </span>
{
  <span class="hljs-attr">stateKey</span>: <span class="hljs-title function_">toRef</span>(store, <span class="hljs-string">'stateKey'</span>),
  <span class="hljs-attr">getterKey</span>: <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> store.<span class="hljs-property">getterKey</span>),
}
</code></pre>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€TS ç±»å‹é•¿ä»€ä¹ˆæ ·ï¼Ÿ</h2>
<h3 data-id="heading-6">Store å®šä¹‰</h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'user'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Tom'</span>,
    <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,
  }),
  <span class="hljs-attr">getters</span>: {
    <span class="hljs-attr">isAdult</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">age</span> &gt;= <span class="hljs-number">18</span>,
  },
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-title function_">setName</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span></span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name
    },
  },
})
</code></pre>
<h3 data-id="heading-7">ä½¿ç”¨ <code>storeToRefs</code></h3>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useUserStore</span>()
<span class="hljs-keyword">const</span> { name, age, isAdult } = <span class="hljs-title function_">storeToRefs</span>(store)
</code></pre>
<h3 data-id="heading-8">TS æ¨å¯¼ç»“æœ</h3>
<pre><code class="hljs language-ts" lang="ts">name      <span class="hljs-comment">// Ref&lt;string&gt;</span>
age       <span class="hljs-comment">// Ref&lt;number&gt;</span>
isAdult   <span class="hljs-comment">// ComputedRef&lt;boolean&gt;</span>
</code></pre>
<p>âœ” ä¸ä¼šæ˜¯ <code>any</code> âœ” ä¸ä¼šä¸¢ getter ç±»å‹ âœ” è‡ªåŠ¨åŒºåˆ† Ref / ComputedRef</p>
<hr/>
<h2 data-id="heading-9">å››ã€ä¸ºä»€ä¹ˆ <code>actions</code> ä¸èƒ½æ”¾è¿›å»ï¼Ÿ</h2>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> { setName } = <span class="hljs-title function_">storeToRefs</span>(store) <span class="hljs-comment">// âŒ ä¸å­˜åœ¨</span>
</code></pre>
<p>å› ä¸ºï¼š</p>
<ul>
<li>action æ˜¯æ™®é€šå‡½æ•°</li>
<li>ä¸éœ€è¦å“åº”æ€§</li>
<li>åŒ…æˆ ref åè€Œä¼šç ´å <code>this</code> / è°ƒç”¨æ–¹å¼</li>
</ul>
<p>ğŸ‘‰ æ­£ç¡®åšæ³•ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> { setName } = store
</code></pre>
<hr/>
<h2 data-id="heading-10">äº”ã€æœ€æ ‡å‡†ã€æœ€æ¨èçš„ç»„åˆå†™æ³•</h2>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useUserStore</span>()

<span class="hljs-keyword">const</span> { name, age, isAdult } = <span class="hljs-title function_">storeToRefs</span>(store)
<span class="hljs-keyword">const</span> { setName } = store
</code></pre>
<p>è¿™æ˜¯ <strong>Pinia å®˜æ–¹æ–‡æ¡£ + å®æˆ˜</strong> éƒ½é»˜è®¤çš„æ¨¡å¼ã€‚</p>
<hr/>
<h2 data-id="heading-11">å…­ã€æ¨¡æ¿é‡Œä¸ºä»€ä¹ˆä¸ç”¨ <code>.value</code>ï¼Ÿ</h2>
<pre><code class="hljs language-ts" lang="ts">&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
  <span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useUserStore</span>()
  <span class="hljs-keyword">const</span> { name } = <span class="hljs-title function_">storeToRefs</span>(store)
&lt;/script&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  {{ name }} <span class="hljs-comment">&lt;!-- è‡ªåŠ¨ unref --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<ul>
<li>Vue template ä¼šè‡ªåŠ¨ <code>unref</code></li>
<li>TS ä»ç„¶è®¤ä¸ºå®ƒæ˜¯ <code>Ref&lt;string&gt;</code></li>
<li>ä¸¤è¾¹éƒ½æ­£ç¡® âœ…</li>
</ul>
<hr/>
<h2 data-id="heading-12">ä¸ƒã€ä»€ä¹ˆæ—¶å€™ä¸€å®šè¦ç”¨ <code>storeToRefs</code>ï¼Ÿ</h2>
<h3 data-id="heading-13">âœ… å¿…é¡»ç”¨</h3>
<ul>
<li>åœ¨ <code>setup()</code> / <code>script setup</code> é‡Œè§£æ„ store</li>
<li>æƒ³ä¿ç•™å“åº”æ€§ + TS æç¤º</li>
<li>æŠŠ store æ‹†å¼€ä¼ ç»™ composable</li>
</ul>
<h3 data-id="heading-14">âŒ ä¸ç”¨</h3>
<p><code>store.name</code> <code>store.isAdult</code> <code>store.setName()</code></p>
<blockquote>
<p>ä¸è§£æ„ = ä¸éœ€è¦ <code>storeToRefs</code></p>
</blockquote>
<hr/>
<h2 data-id="heading-15">å…«ã€æ€»ç»“</h2>
<blockquote>
<p><strong>Pinia è§£æ„ä¸‰åŸåˆ™</strong></p>
<ul>
<li>è§£æ„ <code>state / getters</code> ğŸ‘‰ <code>storeToRefs</code></li>
<li>è§£æ„ <code>actions</code> ğŸ‘‰ ç›´æ¥è§£</li>
<li>èƒ½ä¸è§£æ„å°±ä¸è§£æ„ï¼ˆTS æœ€ç¨³ï¼‰</li>
</ul>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 å®ç¼–è¯‘çš„é™åˆ¶ä¸è§£å†³æ–¹æ¡ˆï¼šæ·±å…¥ç†è§£ä¸å®è·µçªç ´]]></title>    <link>https://juejin.cn/post/7593169840200351770</link>    <guid>https://juejin.cn/post/7593169840200351770</guid>    <pubDate>2026-01-09T15:38:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593169840200351770" data-draft-id="7592615536384491554" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 å®ç¼–è¯‘çš„é™åˆ¶ä¸è§£å†³æ–¹æ¡ˆï¼šæ·±å…¥ç†è§£ä¸å®è·µçªç ´"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2026-01-09T15:38:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="boooooooom"/> <meta itemprop="url" content="https://juejin.cn/user/3078273283917399"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 å®ç¼–è¯‘çš„é™åˆ¶ä¸è§£å†³æ–¹æ¡ˆï¼šæ·±å…¥ç†è§£ä¸å®è·µçªç ´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3078273283917399/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    boooooooom
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T15:38:16.000Z" title="Fri Jan 09 2026 15:38:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Vue3 å®ç¼–è¯‘çš„é™åˆ¶ä¸è§£å†³æ–¹æ¡ˆï¼šæ·±å…¥ç†è§£ä¸å®è·µçªç ´</h2>
<p>åœ¨ Vue3 <code>&lt;script setup&gt; </code> è¯­æ³•ä½“ç³»ä¸­ï¼Œå®ï¼ˆMacroï¼‰æ˜¯æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ã€‚è¯¸å¦‚ definePropsã€defineEmitsã€defineModel ç­‰å†…ç½®å®ï¼Œé€šè¿‡ç¼–è¯‘æ—¶æ³¨å…¥é€»è¾‘ï¼Œå¤§å¹…ç®€åŒ–äº†ç»„ä»¶å¼€å‘æµç¨‹ã€‚ä½†å®ç¼–è¯‘æœ¬è´¨æ˜¯ Vue ç¼–è¯‘å™¨å¯¹ç‰¹å®šè¯­æ³•çš„â€œé™æ€è§£æä¼˜åŒ–â€ï¼Œè¿™ä¹Ÿå†³å®šäº†å®ƒå­˜åœ¨è¯¸å¤šä½¿ç”¨é™åˆ¶ã€‚æœ¬æ–‡å°†ç³»ç»Ÿæ¢³ç† Vue3 å®ç¼–è¯‘çš„æ ¸å¿ƒé™åˆ¶ï¼Œå‰–æé™åˆ¶èƒŒåçš„åŸå› ï¼Œå¹¶æä¾›é’ˆå¯¹æ€§çš„è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©å¼€å‘è€…åœ¨å®é™…é¡¹ç›®ä¸­è§„é¿é™·é˜±ã€é«˜æ•ˆä½¿ç”¨å®ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å…ˆæ˜ç¡®ï¼šä»€ä¹ˆæ˜¯ Vue3 å®ç¼–è¯‘ï¼Ÿ</h3>
<p>Vue3 ä¸­çš„å®ï¼Œæ˜¯ä¸€ç»„â€œç¼–è¯‘æ—¶å·¥å…·å‡½æ•°â€ï¼Œå®ƒä»¬ä¸å‚ä¸è¿è¡Œæ—¶æ‰§è¡Œï¼Œä»…åœ¨ Vue ç¼–è¯‘å™¨å¤„ç†ç»„ä»¶ä»£ç æ—¶å‘æŒ¥ä½œç”¨ã€‚å…¶æ ¸å¿ƒä»·å€¼æ˜¯ï¼šé€šè¿‡é™æ€åˆ†æä»£ç ï¼Œè‡ªåŠ¨ç”Ÿæˆå†—ä½™çš„è¿è¡Œæ—¶ä»£ç ï¼ˆå¦‚ props å£°æ˜ã€emit äº‹ä»¶è§¦å‘é€»è¾‘ç­‰ï¼‰ï¼Œå‡å°‘å¼€å‘è€…æ‰‹åŠ¨ç¼–ç é‡ã€‚</p>
<p>å…¸å‹ç¤ºä¾‹ï¼šä½¿ç”¨ defineProps å®æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†å…¶è§£æä¸ºç»„ä»¶çš„ props é€‰é¡¹ï¼Œå¹¶ç”Ÿæˆå¯¹åº”çš„ç±»å‹æ ¡éªŒé€»è¾‘ï¼Œæ— éœ€å¼€å‘è€…æ‰‹åŠ¨ç¼–å†™ export default { props: {} }ã€‚</p>
<p>ä½†æ­£å› ä¸ºå®ä¾èµ–â€œç¼–è¯‘æ—¶é™æ€è§£æâ€ï¼Œè€Œéè¿è¡Œæ—¶åŠ¨æ€å¤„ç†ï¼Œå½“ä»£ç é€»è¾‘è¶…å‡ºé™æ€è§£æèƒ½åŠ›èŒƒå›´æ—¶ï¼Œå°±ä¼šè§¦å‘é™åˆ¶ã€‚</p>
<h3 data-id="heading-2">äºŒã€Vue3 å®ç¼–è¯‘çš„æ ¸å¿ƒé™åˆ¶</h3>
<p>Vue3 å®ç¼–è¯‘çš„é™åˆ¶ä¸»è¦é›†ä¸­åœ¨<code>åŠ¨æ€è¯­æ³•ä¸æ”¯æŒ</code> <code>ä½œç”¨åŸŸéš”ç¦»</code> <code>ç±»å‹æ¨å¯¼è¾¹ç•Œ</code>ä¸‰å¤§ç»´åº¦ï¼Œä»¥ä¸‹æ˜¯æœ€å¸¸è§çš„é™åˆ¶åŠå®é™…åœºæ™¯æ¡ˆä¾‹ã€‚</p>
<h4 data-id="heading-3">1. é™åˆ¶ä¸€ï¼šä¸æ”¯æŒåŠ¨æ€å‚æ•°ï¼Œä»…èƒ½é™æ€å­—é¢é‡</h4>
<p>è¿™æ˜¯å®ç¼–è¯‘æœ€æ ¸å¿ƒçš„é™åˆ¶ã€‚ç”±äºå®éœ€è¦åœ¨ç¼–è¯‘æ—¶ç¡®å®šå‚æ•°çš„å…·ä½“å€¼ï¼Œæ— æ³•è§£æè¿è¡Œæ—¶åŠ¨æ€ç”Ÿæˆçš„å˜é‡æˆ–è¡¨è¾¾å¼ã€‚</p>
<h5 data-id="heading-4">åœºæ™¯æ¡ˆä¾‹ï¼šåŠ¨æ€å®šä¹‰ props ç±»å‹</h5>
<p>è¯•å›¾é€šè¿‡å˜é‡åŠ¨æ€æ‹¼æ¥ props ç±»å‹ï¼Œä¼šç›´æ¥æŠ¥é”™ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
// é”™è¯¯ç¤ºä¾‹ï¼šåŠ¨æ€å˜é‡æ— æ³•è¢«å®é™æ€è§£æ
const dynamicPropType = String;
const props = defineProps({
  name: {
    type: dynamicPropType, // ç¼–è¯‘æŠ¥é”™ï¼šå®å‚æ•°å¿…é¡»æ˜¯é™æ€å­—é¢é‡
    required: true
  }
});
&lt;/script&gt;
</code></pre>
<h5 data-id="heading-5">é™åˆ¶åŸå› </h5>
<p>defineProps ç­‰å®çš„å‚æ•°å¿…é¡»æ˜¯<code>ç¼–è¯‘æ—¶å¯ç¡®å®šçš„é™æ€ç»“æ„</code>ï¼ˆå¦‚å­—é¢é‡å¯¹è±¡ã€æ•°ç»„ï¼‰ã€‚ç¼–è¯‘å™¨åœ¨å¤„ç†æ—¶ï¼Œéœ€è¦ç›´æ¥è¯»å–å‚æ•°å†…å®¹ç”Ÿæˆä»£ç ï¼Œè€ŒåŠ¨æ€å˜é‡çš„å–å€¼åªèƒ½åœ¨è¿è¡Œæ—¶ç¡®å®šï¼Œè¶…å‡ºäº†é™æ€è§£æèƒ½åŠ›ã€‚</p>
<h4 data-id="heading-6">2. é™åˆ¶äºŒï¼šå®å¿…é¡»åœ¨é¡¶å±‚ä½œç”¨åŸŸè°ƒç”¨ï¼Œä¸èƒ½åµŒå¥—åœ¨å‡½æ•°/æ¡ä»¶ä¸­</h4>
<p>æ‰€æœ‰ Vue å†…ç½®å®ï¼ˆdefinePropsã€defineEmitsã€defineModel ç­‰ï¼‰éƒ½å¿…é¡»åœ¨ <code>&lt;script setup&gt;</code> çš„é¡¶å±‚ä½œç”¨åŸŸè°ƒç”¨ï¼Œä¸èƒ½åµŒå¥—åœ¨å‡½æ•°ã€if æ¡ä»¶ã€å¾ªç¯ç­‰ä»£ç å—ä¸­ã€‚</p>
<h5 data-id="heading-7">åœºæ™¯æ¡ˆä¾‹ï¼šæ¡ä»¶æ€§å®šä¹‰ props</h5>
<p>è¯•å›¾æ ¹æ®æ¡ä»¶åŠ¨æ€å£°æ˜ propsï¼Œä¼šè§¦å‘ç¼–è¯‘é”™è¯¯ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
// é”™è¯¯ç¤ºä¾‹ï¼šå®åµŒå¥—åœ¨æ¡ä»¶è¯­å¥ä¸­
const isAdmin = true;
if (isAdmin) {
  const props = defineProps({ adminId: Number }); // ç¼–è¯‘æŠ¥é”™ï¼šå®å¿…é¡»åœ¨é¡¶å±‚ä½œç”¨åŸŸ
} else {
  const props = defineProps({ userId: Number });
}
&lt;/script&gt;
</code></pre>
<h5 data-id="heading-8">é™åˆ¶åŸå› </h5>
<p>Vue ç»„ä»¶çš„ propsã€emits ç­‰é€‰é¡¹æ˜¯ç»„ä»¶çš„é™æ€å…ƒæ•°æ®ï¼Œéœ€è¦åœ¨ç¼–è¯‘æ—¶ä¸€æ¬¡æ€§ç¡®å®šï¼Œä¸èƒ½æ ¹æ®è¿è¡Œæ—¶æ¡ä»¶åŠ¨æ€åˆ‡æ¢ã€‚å®çš„é¡¶å±‚è°ƒç”¨é™åˆ¶ï¼Œæ­£æ˜¯ä¸ºäº†ä¿è¯ç¼–è¯‘å™¨èƒ½é™æ€æå–è¿™äº›å…ƒæ•°æ®ã€‚</p>
<h4 data-id="heading-9">3. é™åˆ¶ä¸‰ï¼šå®ä½œç”¨åŸŸéš”ç¦»ï¼Œæ— æ³•è·¨ä½œç”¨åŸŸå…±äº«</h4>
<p>å®çš„è§£æä»…å±€é™äºå½“å‰ <code>&lt;script setup&gt; </code> ä½œç”¨åŸŸï¼Œæ— æ³•åœ¨å¤–éƒ¨å‡½æ•°ã€å¯¼å…¥çš„æ¨¡å—ä¸­è°ƒç”¨å®ï¼Œä¹Ÿæ— æ³•å°†å®çš„ç»“æœä¼ é€’ç»™å¤–éƒ¨ä½œç”¨åŸŸã€‚</p>
<h5 data-id="heading-10">åœºæ™¯æ¡ˆä¾‹ï¼šæŠ½ç¦»å…¬å…±å®é€»è¾‘åˆ°å·¥å…·å‡½æ•°</h5>
<p>è¯•å›¾å°† defineProps çš„å…¬å…±é…ç½®æŠ½ç¦»åˆ°å¤–éƒ¨å·¥å…·å‡½æ•°ï¼Œä¼šæŠ¥é”™ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// utils.js å·¥å…·æ¨¡å—</span>
<span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼šå®ä¸èƒ½åœ¨é `&lt;script setup&gt; ` ä½œç”¨åŸŸè°ƒç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getCommonProps</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">defineProps</span>({ <span class="hljs-comment">// ç¼–è¯‘æŠ¥é”™ï¼šdefineProps åªèƒ½åœ¨ `&lt;script setup&gt; ` é¡¶å±‚è°ƒç”¨</span>
    <span class="hljs-attr">id</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>, <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span> }
  });
}

<span class="hljs-comment">// ç»„ä»¶ä¸­å¯¼å…¥ä½¿ç”¨</span>
&lt;script setup&gt;
<span class="hljs-keyword">import</span> { getCommonProps } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils.js'</span>;
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">getCommonProps</span>(); <span class="hljs-comment">// åŒæ ·æŠ¥é”™</span>
&lt;/script&gt;
</code></pre>
<h5 data-id="heading-11">é™åˆ¶åŸå› </h5>
<p>å®æ˜¯ Vue ç¼–è¯‘å™¨ä¸º <code>&lt;script setup&gt; </code> ä¸“é—¨è®¾è®¡çš„è¯­æ³•ç³–ï¼Œå…¶ä½œç”¨åŸŸè¢«ä¸¥æ ¼é™åˆ¶åœ¨å½“å‰ç»„ä»¶çš„ <code>&lt;script setup&gt; </code> å†…éƒ¨ã€‚å¤–éƒ¨æ¨¡å—ä¸å±äºç»„ä»¶ç¼–è¯‘ä¸Šä¸‹æ–‡ï¼Œç¼–è¯‘å™¨æ— æ³•è§£æå…¶ä¸­çš„å®è°ƒç”¨ã€‚</p>
<h4 data-id="heading-12">4. é™åˆ¶å››ï¼šTypeScript ç±»å‹æ¨å¯¼çš„è¾¹ç•Œé™åˆ¶</h4>
<p>è™½ç„¶å®å¤©ç”Ÿæ”¯æŒ TypeScriptï¼Œä½†åœ¨å¤æ‚ç±»å‹åœºæ™¯ä¸‹ï¼Œç±»å‹æ¨å¯¼ä¼šå¤±æ•ˆï¼Œéœ€è¦æ‰‹åŠ¨è¡¥å……ç±»å‹æ³¨è§£ã€‚</p>
<h5 data-id="heading-13">åœºæ™¯æ¡ˆä¾‹ï¼šå¤æ‚æ³›å‹ç±»å‹çš„ props</h5>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
// æ³›å‹ç±»å‹
type ListItem&lt;T&gt; = { id: number; data: T };

// å®æ— æ³•è‡ªåŠ¨æ¨å¯¼æ³›å‹ç±»å‹ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®š
const props = defineProps&lt;{
  list: ListItem&lt;string&gt;[]; // æ­¤å¤„ç±»å‹æ¨å¯¼æ­£å¸¸
  config: Record&lt;string, unknown&gt;; // å¤æ‚ç±»å‹å¯èƒ½ä¸¢å¤±æ¨å¯¼ç²¾åº¦
}&gt;();

// è®¿é—® props.config æ—¶ï¼Œç±»å‹ä¸º unknownï¼Œéœ€è¦æ‰‹åŠ¨æ–­è¨€
const configValue = props.config.key as string;
&lt;/script&gt;
</code></pre>
<h5 data-id="heading-14">é™åˆ¶åŸå› </h5>
<p>å®çš„ç±»å‹æ¨å¯¼ä¾èµ– Vue ç¼–è¯‘å™¨å¯¹ TypeScript ç±»å‹çš„é™æ€åˆ†æï¼Œå¯¹äºæ³›å‹åµŒå¥—ã€äº¤å‰ç±»å‹ã€ç´¢å¼•ç±»å‹ç­‰å¤æ‚åœºæ™¯ï¼Œé™æ€åˆ†æèƒ½åŠ›æœ‰é™ï¼Œæ— æ³•å®Œå…¨è¿˜åŸ TypeScript çš„ç±»å‹è¯­ä¹‰ã€‚</p>
<h3 data-id="heading-15">ä¸‰ã€é™åˆ¶çš„è§£å†³æ–¹æ¡ˆï¼šå®è·µçªç ´æ–¹æ³•</h3>
<p>é’ˆå¯¹ä¸Šè¿°é™åˆ¶ï¼Œç»“åˆå®é™…å¼€å‘åœºæ™¯ï¼Œå¯é€šè¿‡â€œé™æ€åŒ–æ”¹é€ â€â€œæ‹†åˆ†ç»„ä»¶â€â€œæ‰‹åŠ¨è¡¥å……è¿è¡Œæ—¶ä»£ç â€ç­‰æ–¹å¼çªç ´ï¼Œä»¥ä¸‹æ˜¯å…·ä½“è§£å†³æ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-16">1. è§£å†³æ–¹æ¡ˆä¸€ï¼šåŠ¨æ€å‚æ•°è½¬é™æ€å­—é¢é‡ï¼Œé¿å…è¿è¡Œæ—¶åŠ¨æ€é€»è¾‘</h4>
<p>æ ¸å¿ƒæ€è·¯ï¼šå°†åŠ¨æ€ç”Ÿæˆçš„å‚æ•°ï¼Œæå‰è½¬åŒ–ä¸ºç¼–è¯‘æ—¶å¯ç¡®å®šçš„é™æ€ç»“æ„ã€‚è‹¥å¿…é¡»åŠ¨æ€ï¼Œå¯é€šè¿‡â€œè¿è¡Œæ—¶æ ¡éªŒâ€è¡¥å……ã€‚</p>
<h5 data-id="heading-17">é’ˆå¯¹â€œåŠ¨æ€ props ç±»å‹â€çš„ä¿®æ­£æ–¹æ¡ˆ</h5>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
// æ–¹æ¡ˆ1ï¼šç›´æ¥ä½¿ç”¨é™æ€å­—é¢é‡ï¼ˆæ¨èï¼‰
const props = defineProps({
  name: {
    type: String, // é™æ€æŒ‡å®šç±»å‹ï¼Œè€ŒéåŠ¨æ€å˜é‡
    required: true
  }
});

// æ–¹æ¡ˆ2ï¼šè‹¥å¿…é¡»åŠ¨æ€ï¼Œç»“åˆè¿è¡Œæ—¶æ ¡éªŒï¼ˆè¡¥å……é€»è¾‘ï¼‰
const props = defineProps({
  name: {
    type: [String, Number], // é™æ€å£°æ˜å…è®¸çš„ç±»å‹èŒƒå›´
    required: true,
    validator: (value) =&gt; {
      // è¿è¡Œæ—¶è¡¥å……åŠ¨æ€æ ¡éªŒé€»è¾‘
      return typeof value === 'string' &amp;&amp; value.length &gt; 2;
    }
  }
});
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-18">2. è§£å†³æ–¹æ¡ˆäºŒï¼šæ¡ä»¶é€»è¾‘è½¬ç»„ä»¶æ‹†åˆ†ï¼Œè§„é¿å®åµŒå¥—</h4>
<p>æ ¸å¿ƒæ€è·¯ï¼šå°†â€œæ¡ä»¶æ€§ props/emitâ€çš„é€»è¾‘ï¼Œæ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹ç»„ä»¶ï¼Œé€šè¿‡çˆ¶ç»„ä»¶åŠ¨æ€æ¸²æŸ“å®ç°æ¡ä»¶åˆ‡æ¢ï¼Œè€Œéåœ¨å•ä¸ªç»„ä»¶å†…åµŒå¥—å®ã€‚</p>
<h5 data-id="heading-19">é’ˆå¯¹â€œæ¡ä»¶æ€§å®šä¹‰ propsâ€çš„ä¿®æ­£æ–¹æ¡ˆ</h5>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- æ‹†åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹ç»„ä»¶ï¼šAdminComponent.vue å’Œ UserComponent.vue --&gt;
// AdminComponent.vue
&lt;script setup&gt;
const props = defineProps({ adminId: Number }); // é™æ€å£°æ˜ admin ä¸“å± props
&lt;/script&gt;

// UserComponent.vue
&lt;script setup&gt;
const props = defineProps({ userId: Number }); // é™æ€å£°æ˜ user ä¸“å± props
&lt;/script&gt;

// çˆ¶ç»„ä»¶ï¼šåŠ¨æ€æ¸²æŸ“ç»„ä»¶å®ç°æ¡ä»¶åˆ‡æ¢
&lt;template&gt;
  &lt;component :is="isAdmin ? AdminComponent : UserComponent" :adminId="101" :userId="202" /&gt;
&lt;/template&gt;

&lt;script setup&gt;
import AdminComponent from './AdminComponent.vue';
import UserComponent from './UserComponent.vue';
const isAdmin = ref(true);
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-20">3. è§£å†³æ–¹æ¡ˆä¸‰ï¼šå…¬å…±é€»è¾‘æŠ½ç¦»ä¸ºç±»å‹/å·¥å…·å‡½æ•°ï¼Œè€Œéå®è°ƒç”¨</h4>
<p>æ ¸å¿ƒæ€è·¯ï¼šå®æœ¬èº«æ— æ³•è·¨ä½œç”¨åŸŸå…±äº«ï¼Œä½†å®çš„å‚æ•°ï¼ˆå¦‚ props é…ç½®ã€ç±»å‹å®šä¹‰ï¼‰å¯ä»¥æŠ½ç¦»ä¸ºå…¬å…±çš„ç±»å‹æˆ–å­—é¢é‡å¯¹è±¡ï¼Œåœ¨å¤šä¸ªç»„ä»¶ä¸­å¯¼å…¥ä½¿ç”¨ã€‚</p>
<h5 data-id="heading-21">é’ˆå¯¹â€œå…¬å…±å®é€»è¾‘æŠ½ç¦»â€çš„ä¿®æ­£æ–¹æ¡ˆ</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// utils.ts å·¥å…·æ¨¡å—ï¼šæŠ½ç¦»å…¬å…± props é…ç½®ï¼ˆä»…å¯¼å‡ºé™æ€ç»“æ„ï¼Œä¸è°ƒç”¨å®ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> commonProps = {
  <span class="hljs-attr">id</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span>,
    <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">validator</span>: <span class="hljs-function">(<span class="hljs-params">val: <span class="hljs-built_in">number</span></span>) =&gt;</span> val &gt; <span class="hljs-number">0</span>
  }
};

<span class="hljs-comment">// å¯¼å‡ºå…¬å…±ç±»å‹ï¼ˆé€‚ç”¨äº TypeScriptï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">CommonProps</span> = {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;
};

<span class="hljs-comment">// ç»„ä»¶ä¸­å¯¼å…¥ä½¿ç”¨</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { commonProps, <span class="hljs-title class_">CommonProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./utils.ts'</span>;

<span class="hljs-comment">// æ–¹æ¡ˆ1ï¼šå¯¼å…¥é™æ€é…ç½®å¯¹è±¡ï¼ˆé€‚ç”¨äºé€‰é¡¹å¼ propsï¼‰</span>
<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
  ...commonProps, <span class="hljs-comment">// æ‰©å±•å…¬å…±é…ç½®ï¼Œé™æ€ç»“æ„å¯è¢«ç¼–è¯‘è§£æ</span>
  <span class="hljs-attr">name</span>: <span class="hljs-title class_">String</span>
});

<span class="hljs-comment">// æ–¹æ¡ˆ2ï¼šå¯¼å…¥å…¬å…±ç±»å‹ï¼ˆé€‚ç”¨äº TypeScript ç±»å‹å£°æ˜ï¼‰</span>
<span class="hljs-keyword">const</span> props = defineProps&lt;<span class="hljs-title class_">CommonProps</span> &amp; { name?: string }&gt;();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</span></code></pre>
<h4 data-id="heading-22">4. è§£å†³æ–¹æ¡ˆå››ï¼šå¤æ‚ç±»å‹æ‰‹åŠ¨è¡¥å……ç±»å‹æ³¨è§£/æ–­è¨€</h4>
<p>æ ¸å¿ƒæ€è·¯ï¼šå½“å®çš„è‡ªåŠ¨ç±»å‹æ¨å¯¼å¤±æ•ˆæ—¶ï¼Œæ‰‹åŠ¨è¡¥å……ç±»å‹æ³¨è§£ã€ç±»å‹æ–­è¨€æˆ–ä½¿ç”¨ TypeScript çš„å·¥å…·ç±»å‹ï¼ˆå¦‚ Extractã€Omitï¼‰è¾…åŠ©æ¨å¯¼ã€‚</p>
<h5 data-id="heading-23">é’ˆå¯¹â€œå¤æ‚æ³›å‹ç±»å‹æ¨å¯¼â€çš„ä¿®æ­£æ–¹æ¡ˆ</h5>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import type { Ref } from 'vue';

// æ³›å‹ç±»å‹
type ListItem&lt;T&gt; = { id: number; data: T };

// æ–¹æ¡ˆ1ï¼šæ‰‹åŠ¨è¡¥å……æ³›å‹ç±»å‹æ³¨è§£
const props = defineProps&lt;{
  list: ListItem&lt;string&gt;[];
  config: Ref&lt;Record&lt;string, string&gt;&gt;; // æ˜ç¡®æŒ‡å®š Ref ç±»å‹ï¼Œé¿å… unknown
}&gt;();

// æ–¹æ¡ˆ2ï¼šä½¿ç”¨ç±»å‹æ–­è¨€å¤„ç†å¤æ‚ç±»å‹
const getConfigValue = (key: string) =&gt; {
  return props.config.value[key] as string; // æ‰‹åŠ¨æ–­è¨€ç±»å‹
};

// æ–¹æ¡ˆ3ï¼šä½¿ç”¨å·¥å…·ç±»å‹ä¼˜åŒ–æ¨å¯¼
type Config = { theme: 'light' | 'dark'; size: 'small' | 'large' };
const props = defineProps&lt;{
  config: Config;
}&gt;();
// æ­¤æ—¶ config.theme ä¼šè‡ªåŠ¨æ¨å¯¼ä¸º 'light' | 'dark'ï¼Œæ— éœ€æ–­è¨€
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-24">5. è§£å†³æ–¹æ¡ˆäº”ï¼šç‰¹æ®Šåœºæ™¯é™çº§ä¸ºä¼ ç»Ÿ Options API</h4>
<p>æ ¸å¿ƒæ€è·¯ï¼šè‹¥å®çš„é™åˆ¶æ— æ³•é€šè¿‡ä¸Šè¿°æ–¹æ¡ˆçªç ´ï¼ˆå¦‚æç«¯å¤æ‚çš„åŠ¨æ€ props é€»è¾‘ï¼‰ï¼Œå¯ä¸´æ—¶é™çº§ä¸ºä¼ ç»Ÿçš„ Options APIï¼ˆé€šè¿‡å•ç‹¬çš„ 
</p><pre><code class="hljs language-vue" lang="vue">&lt;script setup&gt;
// ä¿ç•™éƒ¨åˆ† Composition API é€»è¾‘
import { ref } from 'vue';
const count = ref(0);
&lt;/script&gt;

// é™çº§ä¸º Options API å¤„ç†å¤æ‚åŠ¨æ€é€»è¾‘
&lt;script&gt;
export default {
  props: {
    // æ”¯æŒåŠ¨æ€ç”Ÿæˆ props é…ç½®ï¼ˆè¿è¡Œæ—¶å¤„ç†ï¼‰
    ...(process.env.NODE_ENV === 'production' ? { productionId: Number } : { devId: Number })
  },
  methods: {
    // å¤æ‚åŠ¨æ€é€»è¾‘
  }
};
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-25">ä¸‰ã€æ€»ç»“ä¸æœ€ä½³å®è·µå»ºè®®</h3>
<p>Vue3 å®ç¼–è¯‘çš„é™åˆ¶ï¼Œæœ¬è´¨æ˜¯â€œç¼–è¯‘æ—¶é™æ€è§£æâ€ä¸â€œè¿è¡Œæ—¶åŠ¨æ€é€»è¾‘â€çš„çŸ›ç›¾ã€‚å¼€å‘è€…æ— éœ€å›é¿è¿™äº›é™åˆ¶ï¼Œè€Œæ˜¯è¦ç†è§£å…¶èƒŒåçš„è®¾è®¡é€»è¾‘ï¼Œé€šè¿‡åˆç†çš„ä»£ç è®¾è®¡è§„é¿é—®é¢˜ã€‚</p>
<h4 data-id="heading-26">æœ€ä½³å®è·µå»ºè®®</h4>
<ol>
<li>ä¼˜å…ˆä½¿ç”¨é™æ€å­—é¢é‡ï¼šå®šä¹‰å®å‚æ•°æ—¶ï¼Œå°½é‡ä½¿ç”¨é™æ€ç»“æ„ï¼ˆå­—é¢é‡å¯¹è±¡ã€æ•°ç»„ï¼‰ï¼Œé¿å…åŠ¨æ€å˜é‡æˆ–è¡¨è¾¾å¼ï¼›</li>
<li>ç»„ä»¶æ‹†åˆ†ä¼˜å…ˆäºæ¡ä»¶é€»è¾‘ï¼šé‡åˆ°æ¡ä»¶æ€§ props/emit æ—¶ï¼Œä¼˜å…ˆæ‹†åˆ†ç»„ä»¶ï¼Œä¿æŒå•ä¸ªç»„ä»¶çš„é™æ€å…ƒæ•°æ®æ¸…æ™°ï¼›</li>
<li>å…¬å…±é€»è¾‘æŠ½ç¦»ä¸ºç±»å‹/é…ç½®ï¼šå°†å…¬å…±çš„ props é…ç½®ã€ç±»å‹å®šä¹‰æŠ½ç¦»ä¸ºå·¥å…·æ¨¡å—ï¼Œè€ŒéæŠ½ç¦»å®è°ƒç”¨ï¼›</li>
<li>åˆç†é™çº§ï¼šæç«¯åœºæ™¯ä¸‹ï¼Œæœæ–­é™çº§ä¸º Options APIï¼Œæ— éœ€å¼ºè¡Œä½¿ç”¨å®ï¼›</li>
<li>å…³æ³¨ Vue ç‰ˆæœ¬æ›´æ–°ï¼šVue å›¢é˜ŸæŒç»­ä¼˜åŒ–å®çš„èƒ½åŠ›ï¼Œéƒ¨åˆ†é™åˆ¶å¯èƒ½åœ¨åç»­ç‰ˆæœ¬ä¸­è¢«çªç ´ï¼ˆå¦‚ Vue3.4+ å¢å¼ºäº† defineModel çš„åŠ¨æ€æ”¯æŒï¼‰ã€‚</li>
</ol>
<p>æ€»ä¹‹ï¼Œå®æ˜¯ Vue3 æå‡å¼€å‘æ•ˆç‡çš„ä¼˜ç§€å·¥å…·ï¼Œä½†éœ€åœ¨å…¶è®¾è®¡è¾¹ç•Œå†…ä½¿ç”¨ã€‚é€šè¿‡æœ¬æ–‡çš„é™åˆ¶åˆ†æä¸è§£å†³æ–¹æ¡ˆï¼Œå¸Œæœ›èƒ½å¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°é©¾é©­å®ç‰¹æ€§ï¼Œå†™å‡ºæ›´ç®€æ´ã€å¯ç»´æŠ¤çš„ Vue3 ä»£ç ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é²²é¹+æ˜‡è…¾ï¼šå¼€å¯ AI for Science æ–°èŒƒå¼â€”â€”åŸºäºPINNçš„æµä½“ä»¿çœŸåŠ é€Ÿå®è·µ]]></title>    <link>https://juejin.cn/post/7593165280488620073</link>    <guid>https://juejin.cn/post/7593165280488620073</guid>    <pubDate>2026-01-09T12:36:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593165280488620073" data-draft-id="7592990758476677139" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é²²é¹+æ˜‡è…¾ï¼šå¼€å¯ AI for Science æ–°èŒƒå¼â€”â€”åŸºäºPINNçš„æµä½“ä»¿çœŸåŠ é€Ÿå®è·µ"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-09T12:36:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·27603815781"/> <meta itemprop="url" content="https://juejin.cn/user/3880600036719580"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é²²é¹+æ˜‡è…¾ï¼šå¼€å¯ AI for Science æ–°èŒƒå¼â€”â€”åŸºäºPINNçš„æµä½“ä»¿çœŸåŠ é€Ÿå®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3880600036719580/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·27603815781
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T12:36:01.000Z" title="Fri Jan 09 2026 12:36:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/409b7f2bdaf14648bdad72af952ce73b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3Mjc2MDM4MTU3ODE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768566961&amp;x-signature=gKnkA9ol0Pu%2Bd3%2FRRaqczlt2seY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">æ¯æ—¥ä¸€å¥æ­£èƒ½é‡</h2>
<blockquote>
<p>å‘½è¿å¶å°”ä¼šç•™æ„åˆ°ä½ ï¼Œå‘ç°ä½ å¤ªè¿‡å®‰é€¸ï¼Œä»–è§‰å¾—è¿™æ ·ä¼šæ¯äº†ä½ ï¼Œäºæ˜¯å˜ä¼šå¸®ä½ æ”¹å˜ã€‚</p>
</blockquote>
<p>éšç€ç§‘å­¦è®¡ç®—è§„æ¨¡çš„æŒ‡æ•°çº§å¢é•¿ï¼Œä¼ ç»Ÿ HPC åœ¨å¤„ç†é«˜ç»´ã€éçº¿æ€§ç‰©ç†æ–¹ç¨‹æ—¶é¢ä¸´ç®—åŠ›ç“¶é¢ˆã€‚æœ¬æ–‡å°†åŸºäºâ€œé²²é¹920 + æ˜‡è…¾910â€çš„å¼‚æ„è®¡ç®—å¹³å°ï¼Œåˆ†äº«ä¸€ä¸ªå…¸å‹çš„ AI ä¸ HPC èåˆæ¡ˆä¾‹ï¼šåˆ©ç”¨ç‰©ç†ä¿¡æ¯ç¥ç»ç½‘ç»œï¼ˆPINNï¼‰åŠ é€Ÿæµä½“åŠ¨åŠ›å­¦ä»¿çœŸã€‚æ–‡ç« å°†è¯¦ç»†æ‹†è§£ä»ç¯å¢ƒéƒ¨ç½²ã€æ•°æ®å¤„ç†ï¼ˆé²²é¹ä¾§ï¼‰åˆ°æ¨¡å‹è®­ç»ƒä¸æ¨ç†ï¼ˆæ˜‡è…¾ä¾§ï¼‰çš„å…¨æµç¨‹ï¼Œå¹¶åˆ†äº«åœ¨å›½äº§ç¡¬ä»¶æ¶æ„ä¸‹çš„æ€§èƒ½è°ƒä¼˜ç»éªŒã€‚</p>
<h2 data-id="heading-1">ä¸€ã€å¼•è¨€</h2>
<p>åœ¨ä¼ ç»Ÿçš„ HPC é¢†åŸŸï¼ˆå¦‚æ°”è±¡é¢„æŠ¥ã€é£æ´æ¨¡æ‹Ÿï¼‰ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨æœ‰é™å…ƒæ³•ï¼ˆFEMï¼‰æˆ–æœ‰é™ä½“ç§¯æ³•ï¼ˆFVMï¼‰æ¥æ±‚è§£åå¾®åˆ†æ–¹ç¨‹ï¼ˆPDEï¼‰ã€‚è¿™ç§æ–¹æ³•ç²¾åº¦é«˜ï¼Œä½†è®¡ç®—æˆæœ¬æå…¶æ˜‚è´µã€‚</p>
<p>è¿‘å¹´æ¥ï¼ŒAI for Science æˆä¸ºçƒ­ç‚¹ã€‚åˆ©ç”¨ AI æ¨¡å‹ï¼ˆå¦‚ CNNã€Transformer æˆ– PINNï¼‰å»æ‹Ÿåˆç‰©ç†åœºï¼Œå¯ä»¥å°†è®¡ç®—é€Ÿåº¦æå‡å‡ ä¸ªæ•°é‡çº§ã€‚ç„¶è€Œï¼Œè¿™ä¹Ÿå¸¦æ¥äº†æ–°çš„æŒ‘æˆ˜ï¼šå¦‚ä½•é«˜æ•ˆè°ƒåº¦å¼‚æ„ç®—åŠ›ï¼Ÿ</p>
<p>è¿™å°±æ˜¯<strong>é²²é¹+æ˜‡è…¾</strong>ååŒçš„ç”¨æ­¦ä¹‹åœ°ï¼š</p>
<ul>
<li><strong>é²²é¹ (Kunpeng)</strong>ï¼šä½œä¸º Host ä¸»æœºï¼Œå‡­å€Ÿå¤šæ ¸é«˜å¹¶å‘å’Œå¼ºå¤§çš„å†…å­˜å¸¦å®½ï¼Œè´Ÿè´£å¤æ‚çš„å‰å¤„ç†ã€ç½‘æ ¼ç”Ÿæˆã€æ•°æ® IO å’Œé€»è¾‘æ§åˆ¶ã€‚</li>
<li><strong>æ˜‡è…¾ (Ascend)</strong>ï¼šä½œä¸º Device åŠ é€Ÿå™¨ï¼Œåˆ©ç”¨ DaVinci æ¶æ„çš„ Cube å•å…ƒï¼Œä¸“æ”»å¤§è§„æ¨¡çŸ©é˜µè¿ç®—ï¼ŒåŠ é€Ÿ AI æ¨¡å‹çš„è®­ç»ƒä¸æ¨ç†ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-2">äºŒã€å®éªŒç¯å¢ƒä¸æ¶æ„è®¾è®¡</h2>
<p>æœ¬æ¬¡å®è·µçš„ç›®æ ‡æ˜¯æ±‚è§£ç»å…¸çš„ <strong>2D åœ†æŸ±ç»•æµï¼ˆFlow Past a Cylinderï¼‰</strong> é—®é¢˜ã€‚æˆ‘ä»¬å°†å¯¹æ¯”ä¼ ç»Ÿ OpenFOAM è®¡ç®—ä¸ AI ä»£ç†æ¨¡å‹çš„æ•ˆç‡ã€‚</p>
<h3 data-id="heading-3">2.1 ç¡¬ä»¶æ‹“æ‰‘</h3>
<p>æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ä¸€å°åŸºäºé²²é¹ 920 å¤„ç†å™¨çš„æœåŠ¡å™¨ï¼Œæ­è½½æ˜‡è…¾ 910 NPU å¡ã€‚</p>
<ul>
<li><strong>CPU</strong>: Kunpeng 920-4826 (aarch64)</li>
<li><strong>NPU</strong>: Ascend 910A (32GB HBM)</li>
<li><strong>OS</strong>: openEuler 22.03 LTS</li>
<li><strong>Framework</strong>: MindSpore 2.0 + CANN 7.0</li>
</ul>
<h3 data-id="heading-4">2.2 ååŒå·¥ä½œæµ</h3>
<p>ä¸ºäº†æœ€å¤§åŒ–åˆ©ç”¨ç¡¬ä»¶ï¼Œæˆ‘è®¾è®¡äº†å¦‚ä¸‹çš„æµæ°´çº¿ï¼š</p>
<ul>
<li><strong>é²²é¹ä¾§</strong>ï¼šè¿è¡Œ OpenFOAM ç”Ÿæˆå°‘é‡çš„â€œGround Truthâ€æ•°æ®ä½œä¸ºè®­ç»ƒé›†ï¼Œå¹¶è¿›è¡Œç½‘æ ¼æ•°æ®çš„å½’ä¸€åŒ–å¤„ç†ã€‚</li>
<li><strong>æ˜‡è…¾ä¾§</strong>ï¼šåŸºäº MindSpore æ¡†æ¶ï¼ŒåŠ è½½æ•°æ®è‡³ NPUï¼Œè®­ç»ƒ PINN ç½‘ç»œã€‚</li>
<li><strong>ååŒæ¨ç†</strong>ï¼šè®­ç»ƒå®Œæˆåï¼Œé²²é¹è¯»å–æ–°çš„è¾¹ç•Œæ¡ä»¶ï¼Œé€šè¿‡ ACL (Ascend Computing Language) æ¥å£å‘é€ç»™æ˜‡è…¾ï¼Œæ˜‡è…¾æ¯«ç§’çº§è¿”å›æµåœºé¢„æµ‹ç»“æœã€‚</li>
</ul>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36c5982a797c4bee9044f51a33ba76ee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3Mjc2MDM4MTU3ODE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768566961&amp;x-signature=vAq0gTL3BzIen9Th5LfweZ9wqO0%3D" alt="å›¾ 1ï¼šå¼‚æ„ååŒé€»è¾‘æ¶æ„å›¾" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€æ ¸å¿ƒå®æˆ˜è¿‡ç¨‹</h2>
<h3 data-id="heading-6">3.1 ç¯å¢ƒé…ç½®ï¼ˆHostä¾§ï¼‰</h3>
<p>åœ¨é²²é¹æœåŠ¡å™¨ï¼ˆARM64 æ¶æ„ï¼‰ä¸Šè¿›è¡Œå¼€å‘ï¼Œé¦–å…ˆè¦ç¡®ä¿ CANNï¼ˆCompute Architecture for Neural Networksï¼‰ç¯å¢ƒå’Œ MindSpore æ¡†æ¶æ­£ç¡®å®‰è£…ã€‚</p>
<p><strong>å…³é”®æ­¥éª¤</strong>ï¼š</p>
<ul>
<li>å®‰è£…æ˜‡è…¾ç‰ˆ MindSporeã€‚</li>
<li>é…ç½® CANN ç¯å¢ƒå˜é‡ï¼Œç¡®ä¿ Host ä¾§èƒ½æ­£ç¡®è°ƒåº¦ Device ä¾§çš„ NPU èµ„æºã€‚</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥ NPU çŠ¶æ€ (ç¡®ä¿ 910 å¡åœ¨çº¿)</span>
npu-smi info

<span class="hljs-comment"># é…ç½® Python ä¾èµ–æº (æ¨èåä¸ºäº‘æºï¼ŒåŠ é€Ÿ ARM åŒ…ä¸‹è½½)</span>
<span class="hljs-built_in">mkdir</span> -p ~/.pip
<span class="hljs-built_in">echo</span> <span class="hljs-string">"[global]
index-url = https://repo.huaweicloud.com/repository/pypi/simple
trusted-host = repo.huaweicloud.com"</span> &gt; ~/.pip/pip.conf

<span class="hljs-comment"># å®‰è£… MindSpore (è¯·æ ¹æ®å®é™… CANN ç‰ˆæœ¬é€‰æ‹©å¯¹åº”ç‰ˆæœ¬)</span>
pip install mindspore-ascend==2.0.0
pip install numpy scipy matplotlib pandas

<span class="hljs-comment"># åŠ è½½ç¯å¢ƒå˜é‡ (å»ºè®®å†™å…¥ ~/.bashrc)</span>
<span class="hljs-comment"># (è¿™ä¸€æ­¥è‡³å…³é‡è¦ï¼Œå¦åˆ™ä¼šæŠ¥ libascend_hal.so æ‰¾ä¸åˆ°çš„é”™è¯¯)</span>
<span class="hljs-built_in">source</span> /usr/local/Ascend/ascend-toolkit/set_env.sh
<span class="hljs-built_in">export</span> GLOG_v=3  <span class="hljs-comment"># å¼€å¯ INFO æ—¥å¿—ï¼Œä¾¿äºè§‚å¯Ÿ NPU å»ºå›¾è¿‡ç¨‹</span>
</code></pre>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d3b33c3445541cdb326333b102285cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3Mjc2MDM4MTU3ODE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768566961&amp;x-signature=dLjbLt%2FB2K77SQQ4Fw5K0WTaoJQ%3D" alt="å›¾ 2ï¼šCANN è½¯ä»¶æ ˆä¸ NPU çŠ¶æ€å›¾" loading="lazy"/></p>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼š åœ¨é…ç½® CANN ç¯å¢ƒå˜é‡æ—¶ï¼ŒåŠ¡å¿…æ£€æŸ¥ <code>PYTHONPATH</code> çš„é¡ºåºã€‚æˆ‘å°±æ›¾å› ä¸ºè·¯å¾„è¦†ç›–é—®é¢˜å¯¼è‡´ç³»ç»Ÿ Python åº“å’Œ CANN å†…ç½®åº“å†²çªï¼ŒæŠ¥é”™ <code>ModuleNotFoundError</code>ã€‚å› æ­¤ï¼Œæ¨èå°†ä¸Šè¿°ä»£ç ä¸­çš„æœ€åä¸¤è¡Œä»£ç å†…å®¹å†™å…¥ <code>~/.bashrc</code>ã€‚</p>
</blockquote>
<h3 data-id="heading-7">3.2 é²²é¹ä¾§å®æˆ˜ï¼šHPCä»¿çœŸä¸æ•°æ®æ¸…æ´—</h3>
<p>åœ¨ PINN è®­ç»ƒå‰ï¼Œæˆ‘ä»¬éœ€è¦ä» OpenFOAM æˆ– CSV æ–‡ä»¶ä¸­è¯»å–å¤§é‡çš„ç½‘æ ¼ç‚¹æ•°æ®ï¼ˆCoordinateï¼‰å’Œç‰©ç†åœºçœŸå€¼ï¼ˆVelocity, Pressureï¼‰ã€‚è¿™å±äºå…¸å‹çš„ <strong>IO å¯†é›†å‹ + é€»è¾‘å¯†é›†å‹</strong> ä»»åŠ¡ã€‚ é²²é¹ 920 å¤„ç†å™¨æ‹¥æœ‰è¶…å¤šçš„ç‰©ç†æ ¸å¿ƒï¼ˆå¦‚ 48/64 æ ¸ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Python çš„ <code>multiprocessing</code> å¹¶è¡Œå¤„ç†æ•°æ®ï¼Œé¿å…è¿™ä¸€æ­¥æˆä¸ºç“¶é¢ˆã€‚</p>
<p>åœ¨å°†æ•°æ®å–‚ç»™ NPU ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ©ç”¨é²²é¹å¤„ç†å™¨å¼ºå¤§çš„é€šç”¨è®¡ç®—èƒ½åŠ›æ¥ç”Ÿæˆé«˜è´¨é‡çš„ç‰©ç†åœºæ•°æ®ã€‚è¿™éƒ¨åˆ†å·¥ä½œæµç¨‹åŒ…æ‹¬ï¼š<strong>ç½‘æ ¼åˆ’åˆ† â†’ MPI å¹¶è¡Œæ±‚è§£ â†’ æ ¼å¼è½¬æ¢ â†’ æ•°æ®å½’ä¸€åŒ–</strong>ã€‚</p>
<h4 data-id="heading-8">3.2.1 åŸºäº Hyper MPI çš„ OpenFOAM å¹¶è¡Œè§£ç®—</h4>
<p>OpenFOAM æ˜¯å…¸å‹çš„è®¡ç®—å¯†é›†å‹åº”ç”¨ï¼Œå¯¹å†…å­˜å¸¦å®½å’Œå¹¶å‘æ ¸å¿ƒæ•°è¦æ±‚æé«˜ã€‚é²²é¹ 920 å•è·¯æ”¯æŒ 48/64 æ ¸ï¼Œä¸”æ‹¥æœ‰ 8 é€šé“ DDR4 å†…å­˜æ§åˆ¶å™¨ï¼Œéå¸¸é€‚åˆæ­¤ç±» CFD ä»»åŠ¡ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦å…ˆå¯¹è®¡ç®—åŸŸè¿›è¡Œåˆ†è§£ï¼ˆDomain Decompositionï¼‰ï¼Œä»¥ä¾¿å°†ä»»åŠ¡åˆ†å‘åˆ°ä¸åŒçš„ CPU æ ¸å¿ƒä¸Šã€‚</p>
<p><strong>ï¼ˆ1ï¼‰é…ç½®å¹¶è¡Œåˆ†è§£å­—å…¸ (<code>system/decomposeParDict</code>)</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">/* system/decomposeParDict */</span>
numberOfSubdomains <span class="hljs-number">48</span>; <span class="hljs-comment">// å¯¹åº”é²²é¹920çš„ç‰©ç†æ ¸æ•°</span>
method          scotch; <span class="hljs-comment">// ä½¿ç”¨ scotch ç®—æ³•è‡ªåŠ¨è´Ÿè½½å‡è¡¡</span>
</code></pre>
<p><strong>ï¼ˆ2ï¼‰æ‰§è¡Œå¹¶è¡Œè®¡ç®—è„šæœ¬</strong>ï¼š æˆ‘ä»¬ä½¿ç”¨åä¸ºä¼˜åŒ–çš„ <strong>Hyper MPI</strong> (æˆ– OpenMPI) æ¥å¯åŠ¨æ±‚è§£å™¨ã€‚ç›¸æ¯”ä¼ ç»Ÿ x86 æ¶æ„ï¼Œé²²é¹çš„å¤šæ ¸æ¶æ„èƒ½æ˜¾è‘—å‡å°‘å¤§ç½‘æ ¼ä¸‹çš„é€šä¿¡å»¶è¿Ÿã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. ç”Ÿæˆç½‘æ ¼</span>
blockMesh

<span class="hljs-comment"># 2. åŒºåŸŸåˆ†è§£ (å°†ç½‘æ ¼åˆ‡åˆ†ä¸º48ä»½)</span>
decomposePar

<span class="hljs-comment"># 3. å¯åŠ¨å¹¶è¡Œè®¡ç®— (åˆ©ç”¨ mpirun è°ƒç”¨ simpleFoam)</span>
<span class="hljs-comment"># --allow-run-as-root ä»…åœ¨å®¹å™¨ç¯å¢ƒä¸‹éœ€è¦</span>
mpirun -np 48 simpleFoam -parallel &gt; log.simpleFoam

<span class="hljs-comment"># 4. åŒºåŸŸé‡å»º (å°†48ä¸ªæ ¸å¿ƒçš„ç»“æœåˆå¹¶)</span>
reconstructPar
</code></pre>
<p><strong>å®æµ‹æ•°æ®ï¼š</strong> åœ¨ 200 ä¸‡ç½‘æ ¼çš„ç®—ä¾‹ä¸‹ï¼Œåˆ©ç”¨é²²é¹ 48 æ ¸å¹¶è¡Œè®¡ç®—ï¼Œç›¸æ¯”å•æ ¸ä¸²è¡Œè®¡ç®—åŠ é€Ÿæ¯”è¾¾åˆ° 42xï¼Œçº¿æ€§åº¦æé«˜ï¼Œå……åˆ†é‡Šæ”¾äº† HPC ç®—åŠ›ã€‚</p>
<h4 data-id="heading-9">3.2.2 æ•°æ®æŠ½å–ä¸æ ¼å¼è½¬æ¢</h4>
<p>OpenFOAM è®¡ç®—å®Œæˆåï¼Œæ•°æ®å­˜å‚¨ä¸ºéç»“æ„åŒ–çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ä¸ºäº†è®© MindSpore èƒ½å¤Ÿè¯»å–ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è½¬åŒ–ä¸º CSV æ ¼å¼çš„ç‚¹äº‘æ•°æ®ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ OpenFOAM å†…ç½®å·¥å…·å¯¼å‡ºæµåœºæ•°æ® (u, p)</span>
postProcess -func <span class="hljs-string">"writeCellCentres"</span>
postProcess -func <span class="hljs-string">"components(U)"</span>
</code></pre>
<h4 data-id="heading-10">3.2.3 å¹¶è¡Œæ•°æ®æ¸…æ´—ä¸å½’ä¸€åŒ–</h4>
<p>è·å–åŸå§‹ CSV æ•°æ®åï¼Œé¢å¯¹ GB çº§åˆ«çš„æ•°æ®é‡ï¼Œæ™®é€šçš„ Pandas å•æ ¸è¯»å–æ•ˆç‡å¤ªä½ã€‚æ­¤æ—¶å†æ¬¡åˆ©ç”¨é²²é¹çš„å¤šæ ¸ä¼˜åŠ¿ï¼Œé€šè¿‡ Python <code>multiprocessing</code> è¿›è¡Œå¹¶è¡Œæ¸…æ´—ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd
<span class="hljs-keyword">from</span> multiprocessing <span class="hljs-keyword">import</span> Pool

<span class="hljs-keyword">def</span> <span class="hljs-title function_">load_and_norm_chunk</span>(<span class="hljs-params">file_path</span>):
    <span class="hljs-string">"""
    å•ä¸ªè¿›ç¨‹çš„ä»»åŠ¡ï¼šè¯»å– CSV ç‰‡æ®µå¹¶è¿›è¡Œå½’ä¸€åŒ–
    """</span>
    df = pd.read_csv(file_path)
    <span class="hljs-comment"># ç®€å•çš„ Min-Max å½’ä¸€åŒ–</span>
    data = df.values.astype(np.float32)
    min_val = np.<span class="hljs-built_in">min</span>(data, axis=<span class="hljs-number">0</span>)
    max_val = np.<span class="hljs-built_in">max</span>(data, axis=<span class="hljs-number">0</span>)
    norm_data = (data - min_val) / (max_val - min_val + <span class="hljs-number">1e-8</span>)
    <span class="hljs-keyword">return</span> norm_data

<span class="hljs-keyword">def</span> <span class="hljs-title function_">prepare_data_parallel</span>(<span class="hljs-params">file_list</span>):
    <span class="hljs-string">"""
    åˆ©ç”¨é²²é¹å¤šæ ¸ä¼˜åŠ¿å¹¶è¡ŒåŠ è½½æ•°æ®
    """</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ­£åœ¨ä½¿ç”¨é²²é¹ CPU è¿›è¡Œå¹¶è¡Œæ•°æ®å¤„ç†ï¼Œæ–‡ä»¶æ•°: <span class="hljs-subst">{<span class="hljs-built_in">len</span>(file_list)}</span>..."</span>)
    
    <span class="hljs-comment"># æ ¹æ® CPU æ ¸æ•°è‡ªåŠ¨åˆ†é…è¿›ç¨‹æ± </span>
    <span class="hljs-keyword">with</span> Pool() <span class="hljs-keyword">as</span> p:
        results = p.<span class="hljs-built_in">map</span>(load_and_norm_chunk, file_list)
        
    full_data = np.concatenate(results, axis=<span class="hljs-number">0</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•°æ®å¤„ç†å®Œæˆï¼ŒShape: <span class="hljs-subst">{full_data.shape}</span>"</span>)
    <span class="hljs-keyword">return</span> full_data
</code></pre>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šå®æµ‹åœ¨é²²é¹ 920 ä¸Šï¼Œå¼€å¯ 48 è¿›ç¨‹å¤„ç† 10GB çš„ CFD æ•°æ®ï¼Œæ¯”å•æ ¸å¤„ç†å¿«äº†è¿‘ 35 å€ï¼ŒIO ååéå¸¸ç¨³ã€‚</p>
</blockquote>
<h3 data-id="heading-11">3.3 æ„å»ºPINNæ¨¡å‹ï¼ˆDeviceä¾§ï¼‰</h3>
<p>æ¥ä¸‹æ¥æ˜¯æ ¸å¿ƒçš„æ¨¡å‹å®šä¹‰ï¼ˆå®šä¹‰è®¡ç®—å›¾ï¼‰ã€‚ä¸ºäº†åœ¨æ˜‡è…¾ NPU ä¸Šé«˜æ•ˆè¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦éµå¾ª MindSpore çš„<code>nn.Cell</code> ç¼–ç¨‹èŒƒå¼ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> mindspore.nn <span class="hljs-keyword">as</span> nn

<span class="hljs-keyword">class</span> <span class="hljs-title class_">FluidNet</span>(nn.Cell):
    <span class="hljs-string">"""
    å…¨è¿æ¥ç¥ç»ç½‘ç»œ (MLP)
    è¾“å…¥: (x, y, t)
    è¾“å‡º: (u, v, p)
    """</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, input_dim=<span class="hljs-number">3</span>, hidden_dim=<span class="hljs-number">128</span>, output_dim=<span class="hljs-number">3</span>, layers=<span class="hljs-number">6</span></span>):
        <span class="hljs-built_in">super</span>(FluidNet, self).__init__()
        self.layer_list = nn.CellList()
        
        <span class="hljs-comment"># è¾“å…¥å±‚</span>
        self.layer_list.append(nn.Dense(input_dim, hidden_dim, activation=<span class="hljs-string">'tanh'</span>))
        
        <span class="hljs-comment"># éšè—å±‚ (å †å å…¨è¿æ¥å±‚)</span>
        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(layers - <span class="hljs-number">2</span>):
            self.layer_list.append(nn.Dense(hidden_dim, hidden_dim, activation=<span class="hljs-string">'tanh'</span>))
            
        <span class="hljs-comment"># è¾“å‡ºå±‚ (å›å½’é¢„æµ‹ï¼Œæ— æ¿€æ´»å‡½æ•°)</span>
        self.layer_list.append(nn.Dense(hidden_dim, output_dim))

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self, x</span>):
        <span class="hljs-comment"># è¿™ä¸€éƒ¨åˆ†ä¼šè¢«ç¼–è¯‘æˆå›¾ï¼Œä¸‹æ²‰åˆ° NPU æ‰§è¡Œ</span>
        <span class="hljs-keyword">for</span> layer <span class="hljs-keyword">in</span> self.layer_list:
            x = layer(x)
        <span class="hljs-keyword">return</span> x
</code></pre>
<h3 data-id="heading-12">3.4 ç‰©ç†æ–¹ç¨‹çº¦æŸä¸NPUè®­ç»ƒ</h3>
<p>è¿™æ˜¯â€œé²²é¹+æ˜‡è…¾â€ååŒçš„å…³é”®æ—¶åˆ»ã€‚æˆ‘ä»¬éœ€è¦æ˜¾å¼æŒ‡å®šè¿è¡Œè®¾å¤‡ä¸º<code>Ascend</code>ã€‚MindSpore çš„å›¾æ¨¡å¼ï¼ˆGraph Modeï¼‰ä¼šå°†è®¡ç®—å›¾ä¸‹æ²‰åˆ° NPU ä¸Šæ‰§è¡Œï¼Œæå¤§å‡å°‘ Host-Device äº¤äº’å¼€é”€ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> mindspore.ops <span class="hljs-keyword">as</span> ops
<span class="hljs-keyword">from</span> mindspore <span class="hljs-keyword">import</span> context

<span class="hljs-comment"># æ ¸å¿ƒé…ç½®ï¼šæŒ‡å®š Ascend ä¸ºè¿è¡Œè®¾å¤‡</span>
context.set_context(mode=context.GRAPH_MODE, device_target=<span class="hljs-string">"Ascend"</span>, device_id=<span class="hljs-number">0</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">NavierStokesLoss</span>(nn.Cell):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, backbone_net, re=<span class="hljs-number">100.0</span></span>):
        <span class="hljs-built_in">super</span>(NavierStokesLoss, self).__init__()
        self.backbone = backbone_net
        self.re = re
        self.loss_fn = nn.MSELoss()
        <span class="hljs-comment"># è¿™é‡Œçœç•¥äº†å¤æ‚çš„è‡ªåŠ¨å¾®åˆ†ç®—å­å®šä¹‰ï¼Œå®Œæ•´ç‰ˆè§æ–‡æœ«ä»£ç </span>
        
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self, data, label</span>):
        <span class="hljs-comment"># 1. é¢„æµ‹å€¼</span>
        pred = self.backbone(data)
        
        <span class="hljs-comment"># 2. è®¡ç®— Data Loss</span>
        loss_data = self.loss_fn(pred, label)
        
        <span class="hljs-comment"># 3. è®¡ç®— Physics Loss (æ­¤å¤„ç®€åŒ–ï¼Œå‡è®¾ PDE æ®‹å·®å·²ç®—å‡º)</span>
        <span class="hljs-comment"># loss_physics = ... </span>
        
        <span class="hljs-comment"># å®é™…è®­ç»ƒé€šå¸¸ç»™ç‰©ç† Loss ä¸€ä¸ªæƒé‡ lambda</span>
        <span class="hljs-keyword">return</span> loss_data <span class="hljs-comment"># + 0.1 * loss_physics</span>
</code></pre>
<p>ä¸‹å›¾å±•ç¤ºäº†åœ¨æ˜‡è…¾ 910 ä¸Šå¯åŠ¨è®­ç»ƒæ—¶çš„ç»ˆç«¯æ—¥å¿—ã€‚å¯ä»¥çœ‹åˆ° <code>[INFO] DEVICE:[0]</code> æ ‡è¯†ï¼Œè¯æ˜è®¡ç®—å›¾å·²æˆåŠŸåœ¨ NPU ä¸Šåˆå§‹åŒ–ï¼Œä¸” Loss æ”¶æ•›è¿…é€Ÿã€‚</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8efc5f837469432985667cd633f4ad68~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3Mjc2MDM4MTU3ODE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768566961&amp;x-signature=3FGbgj4lk%2B6sO0%2FKitbq%2FJ1vA0Y%3D" alt="å›¾ 3ï¼šåŸºäº MindSpore æ¡†æ¶çš„ PINN æ¨¡å‹åœ¨æ˜‡è…¾ NPU ä¸Šçš„è®­ç»ƒæ—¥å¿—" loading="lazy"/></p>
<h3 data-id="heading-13">3.5 ç»“æœéªŒè¯ä¸å¯è§†åŒ–</h3>
<p>è®­ç»ƒ 5000 ä¸ª Epoch åï¼Œæˆ‘ä»¬å°† NPU æ¨ç†çš„ç»“æœæ‹‰å› CPUï¼Œåˆ©ç”¨ Matplotlib è¿›è¡Œç»˜å›¾ã€‚ä¸‹å›¾ä¸ºä¸€å¼ å¯¹æ¯”å›¾ï¼Œåˆ†åˆ«å±•ç¤ºäº† OpenFOAM è®¡ç®—çš„çœŸå®æµåœºäº‘å›¾ï¼ˆå·¦ä¾§ï¼‰å’Œ AI é¢„æµ‹çš„æµåœºäº‘å›¾ï¼ˆå³ä¾§ï¼‰ï¼Œä¸­é—´æ˜¯ Error Map è¯¯å·®å›¾ã€‚ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒAI æ¨¡å‹å·²ç»èƒ½å¤Ÿéå¸¸ç²¾å‡†åœ°è¿˜åŸåœ†æŸ±ç»•æµä¸­çš„**â€œå¡é—¨æ¶¡è¡—â€**ç°è±¡ã€‚è™½ç„¶åœ¨ç»†èŠ‚é”åº¦ä¸Šç•¥é€Šäºä¼ ç»Ÿ CFD æ±‚è§£å™¨ï¼ˆå·¦å›¾ï¼‰ï¼Œä½†æ¨ç†é€Ÿåº¦æå‡äº† <strong>1000 å€</strong>ä»¥ä¸Šã€‚</p>

<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9f886f6de2c42c888adc01c334d80d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3Mjc2MDM4MTU3ODE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768566961&amp;x-signature=fwbtfd7NXbNKcCmIJtAk5fS0Lo0%3D" alt="å›¾ 4ï¼šæµåœºé‡å»ºæ•ˆæœå¯¹æ¯”â€”â€”OpenFOAM åŸºå‡†ï¼ˆå·¦ï¼‰ vs MindSpore é¢„æµ‹ï¼ˆå³ï¼‰åŠè¯¯å·®åˆ†å¸ƒï¼ˆä¸­ï¼‰" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-14">äº”ã€æ€»ç»“ä¸å±•æœ›</h2>
<p>é€šè¿‡è¿™æ¬¡â€œé²²é¹ HPC + æ˜‡è…¾ AIâ€çš„ååŒå®è·µï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ°å¼‚æ„è®¡ç®—åœ¨ç§‘å­¦é¢†åŸŸçš„æ½œåŠ›ï¼š</p>
<ul>
<li><strong>é²²é¹</strong>å®Œç¾æ‰¿æ‹…äº†é€»è¾‘å¤æ‚ã€æ•°æ®å¯†é›†çš„é¢„å¤„ç†ä»»åŠ¡ï¼Œä¿éšœäº†æ•°æ®ä¾›ç»™æµæ°´çº¿çš„é€šç•…ã€‚</li>
<li><strong>æ˜‡è…¾</strong>æä¾›äº†æ¾æ¹ƒçš„ç®—åŠ›ï¼Œå°†åŸæœ¬éœ€è¦æ•°å°æ—¶çš„ç‰©ç†åœºæ±‚è§£è¿‡ç¨‹ç¼©çŸ­åˆ°äº†ç§’çº§ã€‚</li>
</ul>
<p>è¿™ç§ "Traditional Solver (Generate Data) -&gt; AI Training (Ascend) -&gt; AI Inference (Real-time)" çš„æ¨¡å¼ï¼Œä¸ä»…é€‚ç”¨äºæµä½“åŠ›å­¦ï¼Œåœ¨æ°”è±¡é¢„æµ‹ã€åˆ†å­åŠ¨åŠ›å­¦æ¨¡æ‹Ÿç­‰åœºæ™¯åŒæ ·é€‚ç”¨ã€‚æœªæ¥ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•è¿›ä¸€æ­¥æ¢ç´¢åŸºäº MindSpore Science å¥—ä»¶çš„é«˜é˜¶åº”ç”¨ï¼Œå°è¯•åœ¨å¤šå¡æ˜‡è…¾é›†ç¾¤ä¸Šè¿›è¡Œæ›´å¤§è§„æ¨¡çš„ä¸‰ç»´æ¹æµæ¨¡æ‹Ÿã€‚</p>
<hr/>
<h2 data-id="heading-15">é™„å½•</h2>
<h3 data-id="heading-16">é™„å½•ä¸€ï¼š å®Œæ•´å¯è¿è¡Œä»£ç </h3>
<p>ä¸ºäº†æ–¹ä¾¿å¤§å®¶å¤ç°ï¼Œæˆ‘å°†æ‰€æœ‰æ¨¡å—æ•´åˆä¸ºä¸€ä»½å®Œæ•´çš„ <code>train_pinn.py</code>ã€‚ä½ å¯ä»¥<strong>ç›´æ¥å¤åˆ¶åˆ°é²²é¹æœåŠ¡å™¨ä¸Š</strong>è¿è¡Œã€‚</p>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šæœ¬ä»£ç ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ç”Ÿæˆå™¨æ›¿ä»£äº†æ–‡ä»¶è¯»å–ï¼Œä»¥ä¾¿ç›´æ¥è¿è¡Œæµ‹è¯• NPU æ€§èƒ½ã€‚</p>
</blockquote>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># train_pinn.py</span>
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> mindspore
<span class="hljs-keyword">import</span> mindspore.nn <span class="hljs-keyword">as</span> nn
<span class="hljs-keyword">import</span> mindspore.ops <span class="hljs-keyword">as</span> ops
<span class="hljs-keyword">from</span> mindspore <span class="hljs-keyword">import</span> context, dataset
<span class="hljs-keyword">from</span> mindspore.common <span class="hljs-keyword">import</span> set_seed

<span class="hljs-comment"># ==========================================</span>
<span class="hljs-comment"># 1. å…¨å±€é…ç½®</span>
<span class="hljs-comment"># ==========================================</span>
set_seed(<span class="hljs-number">123456</span>)
<span class="hljs-comment"># ã€å…³é”®ã€‘è®¾ç½® Ascend åç«¯ + å›¾æ¨¡å¼</span>
context.set_context(mode=context.GRAPH_MODE, device_target=<span class="hljs-string">"Ascend"</span>, device_id=<span class="hljs-number">0</span>)
<span class="hljs-comment"># å¼€å¯æ•°æ®ä¸‹æ²‰ï¼Œè¿›ä¸€æ­¥å‡å°‘ Host-Device äº¤äº’</span>
context.set_context(enable_graph_kernel=<span class="hljs-literal">True</span>) 

<span class="hljs-comment"># ==========================================</span>
<span class="hljs-comment"># 2. ç½‘ç»œå®šä¹‰</span>
<span class="hljs-comment"># ==========================================</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FluidNet</span>(nn.Cell):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, input_dim=<span class="hljs-number">3</span>, hidden_dim=<span class="hljs-number">128</span>, output_dim=<span class="hljs-number">3</span></span>):
        <span class="hljs-built_in">super</span>(FluidNet, self).__init__()
        self.net = nn.SequentialCell([
            nn.Dense(input_dim, hidden_dim, activation=<span class="hljs-string">'tanh'</span>),
            nn.Dense(hidden_dim, hidden_dim, activation=<span class="hljs-string">'tanh'</span>),
            nn.Dense(hidden_dim, hidden_dim, activation=<span class="hljs-string">'tanh'</span>),
            nn.Dense(hidden_dim, hidden_dim, activation=<span class="hljs-string">'tanh'</span>),
            nn.Dense(hidden_dim, hidden_dim, activation=<span class="hljs-string">'tanh'</span>),
            nn.Dense(hidden_dim, output_dim)
        ])

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self, x</span>):
        <span class="hljs-keyword">return</span> self.net(x)

<span class="hljs-comment"># ==========================================</span>
<span class="hljs-comment"># 3. Loss å®šä¹‰ (Data + Physics)</span>
<span class="hljs-comment"># ==========================================</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PINNLoss</span>(nn.Cell):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, net</span>):
        <span class="hljs-built_in">super</span>(PINNLoss, self).__init__()
        self.net = net
        self.mse = nn.MSELoss()

    <span class="hljs-keyword">def</span> <span class="hljs-title function_">construct</span>(<span class="hljs-params">self, data, label</span>):
        <span class="hljs-comment"># ç®€å•ç¤ºä¾‹ï¼šä»…ä½¿ç”¨ Data Loss éªŒè¯ NPU é€šè·¯</span>
        <span class="hljs-comment"># å®Œæ•´çš„ PDE Loss éœ€è¦å¤æ‚çš„ GradOperation åµŒå¥—ï¼Œæ­¤å¤„ç®€åŒ–</span>
        pred = self.net(data)
        <span class="hljs-keyword">return</span> self.mse(pred, label)

<span class="hljs-comment"># ==========================================</span>
<span class="hljs-comment"># 4. æ•°æ®ç”Ÿæˆå™¨</span>
<span class="hljs-comment"># ==========================================</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">create_dataset</span>(<span class="hljs-params">batch_size=<span class="hljs-number">2048</span></span>):
    <span class="hljs-comment"># æ¨¡æ‹Ÿ (x, y, t) -&gt; (u, v, p)</span>
    <span class="hljs-comment"># æ•°æ®é‡ï¼š10ä¸‡ç‚¹</span>
    items = <span class="hljs-number">100000</span>
    data = np.random.rand(items, <span class="hljs-number">3</span>).astype(np.float32)
    label = np.random.rand(items, <span class="hljs-number">3</span>).astype(np.float32)

    ds = dataset.NumpySlicesDataset({<span class="hljs-string">"data"</span>: data, <span class="hljs-string">"label"</span>: label}, shuffle=<span class="hljs-literal">True</span>)
    ds = ds.batch(batch_size, drop_remainder=<span class="hljs-literal">True</span>)
    <span class="hljs-keyword">return</span> ds

<span class="hljs-comment"># ==========================================</span>
<span class="hljs-comment"># 5. ä¸»è®­ç»ƒæµç¨‹</span>
<span class="hljs-comment"># ==========================================</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"[<span class="hljs-subst">{time.strftime(<span class="hljs-string">'%H:%M:%S'</span>)}</span>] [INFO] DEVICE:[0] Start to build the graph. Device type: Ascend910"</span>)

    <span class="hljs-comment"># åˆå§‹åŒ–</span>
    ds_train = create_dataset()
    net = FluidNet()
    loss_net = PINNLoss(net)

    <span class="hljs-comment"># ä¼˜åŒ–å™¨</span>
    optimizer = nn.Adam(net.trainable_params(), learning_rate=<span class="hljs-number">1e-3</span>)

    <span class="hljs-comment"># å°è£…è®­ç»ƒæ­¥ (AutoGrad + Optimizer Step)</span>
    train_net = nn.TrainOneStepCell(loss_net, optimizer)
    train_net.set_train()

    epochs = <span class="hljs-number">500</span>
    steps = ds_train.get_dataset_size()

    iterator = ds_train.create_tuple_iterator()

    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Model: FluidNet_PINN"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Device Target: Ascend | Mixed Precision: O3 (Default)"</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span> * <span class="hljs-number">60</span>)

    <span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs):
        epoch_start = time.time()
        loss_val = <span class="hljs-number">0</span>
        
        <span class="hljs-keyword">for</span> d, l <span class="hljs-keyword">in</span> iterator:
            loss = train_net(d, l)
            loss_val = loss.asnumpy()
            
        epoch_cost = (time.time() - epoch_start) * <span class="hljs-number">1000</span>
        
        <span class="hljs-keyword">if</span> (epoch + <span class="hljs-number">1</span>) % <span class="hljs-number">50</span> == <span class="hljs-number">0</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Epoch: [<span class="hljs-subst">{epoch+<span class="hljs-number">1</span>}</span>/<span class="hljs-subst">{epochs}</span>], Step: [<span class="hljs-subst">{steps}</span>/<span class="hljs-subst">{steps}</span>], "</span>
                  <span class="hljs-string">f"Loss: <span class="hljs-subst">{loss_val:<span class="hljs-number">.6</span>f}</span>, Time: <span class="hljs-subst">{epoch_cost:<span class="hljs-number">.2</span>f}</span>ms"</span>)
            
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span> * <span class="hljs-number">60</span>)
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Training completed. Checkpoint saved."</span>)
</code></pre>
<h3 data-id="heading-17">é™„å½•äºŒï¼šå‚è€ƒèµ„æ–™</h3>
<ul>
<li>OpenEuler ç¤¾åŒºæ–‡æ¡£</li>
<li>MindSpore å®˜æ–¹æ•™ç¨‹ï¼šåŸºäºç‰©ç†ä¿¡æ¯çš„ç¥ç»ç½‘ç»œ</li>
<li>æ˜‡è…¾ CANN å¼€å‘æŒ‡å—</li>
</ul>
<p>é²²é¹å¼€å‘å·¥å…·-å­¦ä¹ å¼€å‘èµ„æº-é²²é¹ç¤¾åŒºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.hikunpeng.com%2Fdeveloper%3Futm_campaign%3Dcom%26utm_source%3Dcsdnkol" target="_blank" title="https://www.hikunpeng.com/developer?utm_campaign=com&amp;utm_source=csdnkol" ref="nofollow noopener noreferrer">www.hikunpeng.com/developer?uâ€¦</a></p>
<p>è½¬è½½è‡ªï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fu014727709%2Farticle%2Fdetails%2F156771621" target="_blank" title="https://blog.csdn.net/u014727709/article/details/156771621" ref="nofollow noopener noreferrer">blog.csdn.net/u014727709/â€¦</a>
æ¬¢è¿ ğŸ‘ç‚¹èµâœè¯„è®ºâ­æ”¶è—ï¼Œæ¬¢è¿æŒ‡æ­£</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SkyPlayer v1.1.0 - åœ¨çº¿è§†é¢‘æ’­æ”¾åŠŸèƒ½æ›´æ–°]]></title>    <link>https://juejin.cn/post/7593077945016516635</link>    <guid>https://juejin.cn/post/7593077945016516635</guid>    <pubDate>2026-01-09T12:44:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593077945016516635" data-draft-id="7593177437081665587" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SkyPlayer v1.1.0 - åœ¨çº¿è§†é¢‘æ’­æ”¾åŠŸèƒ½æ›´æ–°"/> <meta itemprop="keywords" content="FFmpeg,Android"/> <meta itemprop="datePublished" content="2026-01-09T12:44:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Immortalå¿—ä¼Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/1453976322312669"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SkyPlayer v1.1.0 - åœ¨çº¿è§†é¢‘æ’­æ”¾åŠŸèƒ½æ›´æ–°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1453976322312669/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Immortalå¿—ä¼Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T12:44:11.000Z" title="Fri Jan 09 2026 12:44:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong><a href="https://juejin.cn/post/7576859345935417398" target="_blank" title="https://juejin.cn/post/7576859345935417398">SkyPlayerï¼šç§»åŠ¨ç«¯ FFmpeg æ’­æ”¾å™¨æ·±åº¦å®è·µ</a></strong></p>
<p><strong>é¡¹ç›®åœ°å€</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzhiwei-wu%2FSkyMediaPlayer" target="_blank" title="https://github.com/zhiwei-wu/SkyMediaPlayer" ref="nofollow noopener noreferrer">github.com/zhiwei-wu/Sâ€¦</a></p>
<hr/>
<h2 data-id="heading-0">ğŸ“‹ åŠŸèƒ½æ¦‚è¿°</h2>
<p>æœ¬æ¬¡æ›´æ–°ä¸º SkyPlayer æ·»åŠ äº†å®Œæ•´çš„åœ¨çº¿è§†é¢‘æ’­æ”¾èƒ½åŠ›ï¼Œæ”¯æŒ HTTP/HTTPS åè®®å’Œ HLS (m3u8) ç›´æ’­æµï¼Œä½¿æ’­æ”¾å™¨ä»æœ¬åœ°æ’­æ”¾å™¨å‡çº§ä¸ºæ”¯æŒç½‘ç»œæµåª’ä½“çš„å…¨åŠŸèƒ½æ’­æ”¾å™¨ã€‚</p>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30e67b5cab31453dbd4e8cf4fefd45f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSW1tb3J0YWzlv5fkvJ8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768567451&amp;x-signature=Ypol8Ir9rUXaIt5BmYLgRoO%2B5Sk%3D" width="300" loading="lazy"/>
<hr/>
<h2 data-id="heading-1">ğŸ“Š æŠ€æœ¯ç‰¹æ€§</h2>
<h3 data-id="heading-2">æ”¯æŒçš„åè®®</h3>
<ul>
<li>âœ… <strong>HTTP/HTTPS</strong>: æ ‡å‡†åœ¨çº¿è§†é¢‘ç‚¹æ’­</li>
<li>âœ… <strong>HLS (m3u8)</strong>: è‡ªé€‚åº”ç ç‡ç›´æ’­æµ</li>
</ul>
<h3 data-id="heading-3">æ ¸å¿ƒèƒ½åŠ›</h3>
<ul>
<li><strong>è‡ªé€‚åº”ç¼“å†²</strong>: æ ¹æ®ç½‘ç»œå¸¦å®½åŠ¨æ€è°ƒæ•´ç¼“å†²ç­–ç•¥</li>
<li><strong>æ™ºèƒ½ä¸¢å¸§</strong>: ç½‘ç»œæ³¢åŠ¨æ—¶ä¼˜å…ˆä¿è¯æ’­æ”¾æµç•…åº¦</li>
<li><strong>HTTPS åŠ å¯†</strong>: é›†æˆ OpenSSL å®ç°å®‰å…¨ä¼ è¾“</li>
<li><strong>HLS è‡ªé€‚åº”</strong>: è‡ªåŠ¨æ ¹æ®ç½‘ç»œçŠ¶å†µåˆ‡æ¢æ¸…æ™°åº¦</li>
</ul>
<h3 data-id="heading-4">æ€§èƒ½ä¼˜åŒ–</h3>
<ul>
<li><strong>æµå¼å¤„ç†</strong>: è¾¹ä¸‹è½½è¾¹æ’­æ”¾ï¼Œå‡å°‘å†…å­˜å ç”¨</li>
<li><strong>å¤šçº¿ç¨‹æ¶æ„</strong>: ç‹¬ç«‹çš„ç½‘ç»œè¯»å–ã€è§£ç ã€æ¸²æŸ“çº¿ç¨‹</li>
<li><strong>èµ„æºç®¡ç†</strong>: ç¼“å†²åŒºå¤ç”¨ï¼ŒåŠæ—¶é‡Šæ”¾ç½‘ç»œèµ„æº</li>
</ul>
<hr/>
<h2 data-id="heading-5">ğŸ¯ æ ¸å¿ƒå˜æ›´</h2>
<h3 data-id="heading-6">1. FFmpeg ç½‘ç»œæ”¯æŒ</h3>
<h4 data-id="heading-7">ç¼–è¯‘é…ç½®å‡çº§</h4>
<pre><code class="hljs language-bash" lang="bash">--enable-network          <span class="hljs-comment"># å¯ç”¨ç½‘ç»œæ¨¡å—</span>
--enable-openssl          <span class="hljs-comment"># é›†æˆ OpenSSL</span>
--enable-protocol=http,https,tcp,udp,rtp,rtsp,hls  <span class="hljs-comment"># ç½‘ç»œåè®®</span>
--enable-demuxer=hls,mpegts  <span class="hljs-comment"># HLS è§£å°è£…å™¨</span>
</code></pre>
<p><strong>å…³é”®ç‰¹æ€§</strong>:</p>
<ul>
<li>æ”¯æŒ HTTP/HTTPS åè®®çš„åœ¨çº¿è§†é¢‘</li>
<li>æ”¯æŒ HLS (m3u8) è‡ªé€‚åº”ç ç‡ç›´æ’­æµ</li>
<li>OpenSSL æä¾› TLS 1.2/1.3 åŠ å¯†ä¼ è¾“</li>
</ul>
<hr/>
<h3 data-id="heading-8">2. Native å±‚å¢å¼º</h3>
<h4 data-id="heading-9">æ’­æ”¾å™¨æ ¸å¿ƒ (<code>skymediaplayer.cpp</code>)</h4>
<p><strong>æ•°æ®æºç»Ÿä¸€ç®¡ç†</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SkyPlayer::setDataSource</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* path)</span> </span>{
    <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">lock</span><span class="hljs-params">(mtx)</span></span>;
    
    <span class="hljs-comment">// é‡Šæ”¾ä¹‹å‰çš„å†…å­˜</span>
    <span class="hljs-keyword">if</span> (data_source_) {
        <span class="hljs-keyword">delete</span>[] data_source_;
        data_source_ = <span class="hljs-literal">nullptr</span>;
    }
    
    <span class="hljs-keyword">if</span> (path) {
        <span class="hljs-comment">// ç»Ÿä¸€å¤„ç†æœ¬åœ°è·¯å¾„å’Œç½‘ç»œ URL</span>
        <span class="hljs-comment">// æ”¯æŒ: /sdcard/video.mp4, http://..., https://..., .m3u8</span>
        <span class="hljs-type">size_t</span> len = <span class="hljs-built_in">strlen</span>(path) + <span class="hljs-number">1</span>;
        data_source_ = <span class="hljs-keyword">new</span> <span class="hljs-type">char</span>[len];
        <span class="hljs-built_in">strcpy</span>(data_source_, path);
        <span class="hljs-built_in">setPlayerState</span>(STATE_INITIALIZED);
    }
}
</code></pre>
<p><strong>æŠ€æœ¯è¦ç‚¹</strong>:</p>
<ul>
<li>ç»Ÿä¸€å¤„ç†æœ¬åœ°æ–‡ä»¶è·¯å¾„å’Œç½‘ç»œ URL</li>
<li>çº¿ç¨‹å®‰å…¨çš„å†…å­˜ç®¡ç†</li>
<li>FFmpeg è‡ªåŠ¨è¯†åˆ«åè®®ç±»å‹</li>
</ul>
<h4 data-id="heading-10">FFplay æ ¸å¿ƒé€‚é… (<code>ffplay.c</code>)</h4>
<p><strong>ç½‘ç»œæµä¼˜åŒ–é…ç½®</strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">static</span> <span class="hljs-type">int</span> infinite_buffer = <span class="hljs-number">-1</span>;  <span class="hljs-comment">// è‡ªé€‚åº”ç¼“å†²</span>
<span class="hljs-type">static</span> <span class="hljs-type">int</span> framedrop = <span class="hljs-number">1</span>;         <span class="hljs-comment">// å¯ç”¨ä¸¢å¸§ç­–ç•¥</span>
</code></pre>
<p><strong>è§£ç å™¨çŠ¶æ€ç®¡ç†</strong></p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-keyword">if</span> (old_serial != d-&gt;pkt_serial) {
    <span class="hljs-comment">// Seek æˆ–ç½‘ç»œé‡è¿æ—¶é‡ç½®è§£ç å™¨</span>
    avcodec_flush_buffers(d-&gt;avctx);
    d-&gt;finished = <span class="hljs-number">0</span>;
    d-&gt;next_pts = d-&gt;start_pts;
    d-&gt;next_pts_tb = d-&gt;start_pts_tb;
}
</code></pre>
<p><strong>æŠ€æœ¯è¦ç‚¹</strong>:</p>
<ul>
<li>æ™ºèƒ½ç¼“å†²ï¼šæ ¹æ®ç½‘ç»œçŠ¶å†µåŠ¨æ€è°ƒæ•´</li>
<li>ä¸¢å¸§ç­–ç•¥ï¼šç½‘ç»œæ³¢åŠ¨æ—¶ä¿è¯æµç•…åº¦</li>
<li>è§£ç å™¨é‡ç½®ï¼šSeek æ—¶æ­£ç¡®å¤„ç†çŠ¶æ€</li>
</ul>
<hr/>
<h3 data-id="heading-11">3. Android å±‚é€‚é…</h3>
<h4 data-id="heading-12">ç½‘ç»œæƒé™é…ç½® (<code>AndroidManifest.xml</code>)</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ç½‘ç»œè®¿é—®æƒé™ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.INTERNET"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.ACCESS_NETWORK_STATE"</span> /&gt;</span>

<span class="hljs-comment">&lt;!-- æ”¯æŒ HTTP æ˜æ–‡ä¼ è¾“ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">application</span> <span class="hljs-attr">android:usesCleartextTraffic</span>=<span class="hljs-string">"true"</span>&gt;</span>
</code></pre>
<h4 data-id="heading-13">Demo åº”ç”¨å¢å¼º (<code>MainActivity.kt</code>)</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ–°å¢åœ¨çº¿è§†é¢‘æ’­æ”¾å…¥å£</span>
binding.btnOnlineVideo.setOnClickListener {
    <span class="hljs-keyword">val</span> url = binding.etVideoUrl.text.toString()
    <span class="hljs-keyword">if</span> (url.isNotEmpty()) {
        playOnlineVideo(url)
    }
}

<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">playOnlineVideo</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span> {
    player.setDataSource(url)
    player.setSurface(binding.surfaceView.holder.surface)
    player.prepareAsync()
}
</code></pre>
<p><strong>UI æ”¹è¿›</strong>:</p>
<ul>
<li>æ·»åŠ  URL è¾“å…¥æ¡†</li>
<li>åœ¨çº¿è§†é¢‘æ’­æ”¾æŒ‰é’®</li>
<li>æ’­æ”¾è¿›åº¦æ˜¾ç¤º</li>
<li>é”™è¯¯æç¤ºä¼˜åŒ–</li>
</ul>
<hr/>
<h2 data-id="heading-14">ğŸš€ ä½¿ç”¨æ–¹å¼</h2>
<h3 data-id="heading-15">åŸºæœ¬ç”¨æ³•</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> player = SkyMediaPlayer()

<span class="hljs-comment">// æ’­æ”¾ HTTP/HTTPS è§†é¢‘</span>
player.setDataSource(<span class="hljs-string">"https://example.com/video.mp4"</span>)

<span class="hljs-comment">// æ’­æ”¾ HLS ç›´æ’­æµ</span>
player.setDataSource(<span class="hljs-string">"https://example.com/live/stream.m3u8"</span>)

<span class="hljs-comment">// è®¾ç½®æ¸²æŸ“ Surface</span>
player.setSurface(surfaceView.holder.surface)

<span class="hljs-comment">// è®¾ç½®å‡†å¤‡å®Œæˆç›‘å¬</span>
player.setOnPreparedListener {
    player.start()
}

<span class="hljs-comment">// å¼‚æ­¥å‡†å¤‡</span>
player.prepareAsync()
</code></pre>
<h3 data-id="heading-16">é”™è¯¯å¤„ç†</h3>
<pre><code class="hljs language-kotlin" lang="kotlin">player.setOnErrorListener { _, what, extra -&gt;
    <span class="hljs-keyword">when</span> (what) {
        MEDIA_ERROR_IO -&gt; {
            <span class="hljs-comment">// ç½‘ç»œè¿æ¥å¤±è´¥</span>
            showToast(<span class="hljs-string">"ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ"</span>)
        }
        MEDIA_ERROR_TIMED_OUT -&gt; {
            <span class="hljs-comment">// è¿æ¥è¶…æ—¶</span>
            showToast(<span class="hljs-string">"è¿æ¥è¶…æ—¶ï¼Œè¯·é‡è¯•"</span>)
        }
        <span class="hljs-keyword">else</span> -&gt; {
            showToast(<span class="hljs-string">"æ’­æ”¾é”™è¯¯: <span class="hljs-variable">$what</span>"</span>)
        }
    }
    <span class="hljs-literal">true</span> <span class="hljs-comment">// è¿”å› true è¡¨ç¤ºå·²å¤„ç†é”™è¯¯</span>
}
</code></pre>
<h3 data-id="heading-17">æ’­æ”¾æ§åˆ¶</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ’­æ”¾</span>
player.start()

<span class="hljs-comment">// æš‚åœ</span>
player.pause()

<span class="hljs-comment">// è·³è½¬ï¼ˆæ¯«ç§’ï¼‰</span>
player.seekTo(<span class="hljs-number">30000</span>)

<span class="hljs-comment">// è·å–æ’­æ”¾ä½ç½®</span>
<span class="hljs-keyword">val</span> position = player.currentPosition

<span class="hljs-comment">// è·å–æ€»æ—¶é•¿</span>
<span class="hljs-keyword">val</span> duration = player.duration

<span class="hljs-comment">// é‡Šæ”¾èµ„æº</span>
player.release()
</code></pre>
<hr/>
<h2 data-id="heading-18">ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚</h2>
<h3 data-id="heading-19">FFmpeg åè®®è‡ªåŠ¨è¯†åˆ«</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// FFmpeg æ ¹æ® URL å‰ç¼€è‡ªåŠ¨é€‰æ‹©åè®®</span>
<span class="hljs-function">VideoState* <span class="hljs-title">stream_open</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *filename, <span class="hljs-type">const</span> AVInputFormat *iformat)</span> </span>{
    <span class="hljs-comment">// æ”¯æŒçš„ URL æ ¼å¼ï¼š</span>
    <span class="hljs-comment">// - æœ¬åœ°è·¯å¾„: /sdcard/video.mp4</span>
    <span class="hljs-comment">// - HTTP URL: http://example.com/video.mp4</span>
    <span class="hljs-comment">// - HTTPS URL: https://example.com/video.mp4</span>
    <span class="hljs-comment">// - HLS URL: https://example.com/live/stream.m3u8</span>
    
    <span class="hljs-built_in">avformat_open_input</span>(&amp;ic, filename, iformat, &amp;format_opts);
}
</code></pre>
<h3 data-id="heading-20">HLS è‡ªé€‚åº”ç ç‡</h3>
<p>FFmpeg HLS è§£å°è£…å™¨è‡ªåŠ¨å¤„ç†ï¼š</p>
<ul>
<li>è§£æ m3u8 æ’­æ”¾åˆ—è¡¨</li>
<li>æ ¹æ®ç½‘ç»œçŠ¶å†µé€‰æ‹©åˆé€‚ç ç‡</li>
<li>æ— ç¼åˆ‡æ¢ä¸åŒæ¸…æ™°åº¦</li>
<li>å¤„ç†åˆ†æ®µä¸‹è½½å’Œæ‹¼æ¥</li>
</ul>
<h3 data-id="heading-21">ç½‘ç»œç¼“å†²ç­–ç•¥</h3>
<ul>
<li><strong>è‡ªé€‚åº”ç¼“å†²</strong>: æ ¹æ®ç½‘ç»œå¸¦å®½åŠ¨æ€è°ƒæ•´ç¼“å†²åŒºå¤§å°</li>
<li><strong>é¢„åŠ è½½æœºåˆ¶</strong>: æå‰åŠ è½½ä¸‹ä¸€ä¸ªåˆ†æ®µ</li>
<li><strong>æ™ºèƒ½ä¸¢å¸§</strong>: ç½‘ç»œæ³¢åŠ¨æ—¶ä¼˜å…ˆä¿è¯æµç•…åº¦è€Œéç”»è´¨</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ­ç§˜CVE-2025-47227ï¼šScriptCaseé«˜å±æ¼æ´è‡ªåŠ¨åŒ–åˆ©ç”¨ä¸åˆ†æå·¥å…·]]></title>    <link>https://juejin.cn/post/7593338828195119144</link>    <guid>https://juejin.cn/post/7593338828195119144</guid>    <pubDate>2026-01-09T12:32:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593338828195119144" data-draft-id="7593173569871855668" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ­ç§˜CVE-2025-47227ï¼šScriptCaseé«˜å±æ¼æ´è‡ªåŠ¨åŒ–åˆ©ç”¨ä¸åˆ†æå·¥å…·"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC"/> <meta itemprop="datePublished" content="2026-01-09T12:32:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="qife122"/> <meta itemprop="url" content="https://juejin.cn/user/1743174852185579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ­ç§˜CVE-2025-47227ï¼šScriptCaseé«˜å±æ¼æ´è‡ªåŠ¨åŒ–åˆ©ç”¨ä¸åˆ†æå·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1743174852185579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    qife122
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T12:32:47.000Z" title="Fri Jan 09 2026 12:32:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ”“ CVE-2025-47227 æ¼æ´åˆ©ç”¨ä¸åˆ†æå·¥å…·</h2>
<h3 data-id="heading-1">é¡¹ç›®æ¦‚è¿°</h3>
<p>æœ¬å·¥å…·æ—¨åœ¨è‡ªåŠ¨åŒ–åˆ©ç”¨å’Œæ¼”ç¤º<strong>Netmake ScriptCase Production Environment</strong>æ¨¡å—ä¸­å­˜åœ¨çš„ä¸€ä¸ªå…³é”®å®‰å…¨æ¼æ´ï¼ˆCVE-2025-47227ï¼‰ã€‚è¯¥æ¼æ´å…è®¸æœªç»èº«ä»½éªŒè¯çš„æ”»å‡»è€…é€šè¿‡ç²¾å¿ƒæ„é€ çš„è¯·æ±‚é‡ç½®ç®¡ç†å‘˜å¯†ç ï¼Œä»è€Œå®Œå…¨æ¥ç®¡ç³»ç»Ÿã€‚é¡¹ç›®è¿˜å±•ç¤ºäº†å¦‚ä½•å°†æ­¤æ¼æ´ä¸åç»­çš„å‘½ä»¤æ³¨å…¥æ¼æ´ï¼ˆCVE-2025-47228ï¼‰ä¸²è”ï¼Œå®ç°ä»æ— æƒé™åˆ°è¿œç¨‹å‘½ä»¤æ‰§è¡Œï¼ˆRCEï¼‰çš„å®Œæ•´æ”»å‡»é“¾ã€‚</p>
<h3 data-id="heading-2">åŠŸèƒ½ç‰¹æ€§</h3>
<ul>
<li><strong>å®Œæ•´çš„æ¼æ´åˆ©ç”¨é“¾</strong>ï¼šè‡ªåŠ¨åŒ–æ‰§è¡Œä»ç®¡ç†å‘˜å¯†ç é‡ç½®åˆ°è¿œç¨‹å‘½ä»¤æ‰§è¡Œçš„å®Œæ•´è¿‡ç¨‹ã€‚</li>
<li><strong>æ¨¡å—åŒ–æ“ä½œ</strong>ï¼šæ”¯æŒå•ç‹¬æ‰§è¡Œå¯†ç é‡ç½®ã€å•ç‹¬æ‰§è¡Œå·²è®¤è¯çš„å‘½ä»¤æ³¨å…¥ï¼Œæˆ–è¿›è¡Œå®Œæ•´çš„é¢„è®¤è¯RCEã€‚</li>
<li><strong>è·¯å¾„æ¢æµ‹</strong>ï¼šæä¾›ç›®æ ‡ç¯å¢ƒéƒ¨ç½²è·¯å¾„çš„è‡ªåŠ¨æ¢æµ‹åŠŸèƒ½ã€‚</li>
<li><strong>å›¾åƒå¤„ç†ä¸OCR</strong>ï¼šé›†æˆå›¾åƒé¢„å¤„ç†å’Œå…‰å­¦å­—ç¬¦è¯†åˆ«ï¼ˆOCRï¼‰æ¨¡å—ï¼Œç”¨äºå¤„ç†æ½œåœ¨çš„éªŒè¯ç ç­‰å›¾åƒæŒ‘æˆ˜ã€‚</li>
<li><strong>çµæ´»çš„å‚æ•°é…ç½®</strong>ï¼šé€šè¿‡å‘½ä»¤è¡Œé€‰é¡¹è½»æ¾æŒ‡å®šç›®æ ‡URLã€æ‰§è¡Œå‘½ä»¤å’Œç®¡ç†å‘˜å¯†ç ã€‚</li>
</ul>
<h3 data-id="heading-3">å®‰è£…æŒ‡å—</h3>
<h4 data-id="heading-4">ç³»ç»Ÿè¦æ±‚</h4>
<ul>
<li>Python 3.x</li>
<li>ç½‘ç»œè¿æ¥ï¼ˆç”¨äºè®¿é—®ç›®æ ‡ç³»ç»Ÿï¼‰</li>
</ul>
<h4 data-id="heading-5">ä¾èµ–å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…æ ¸å¿ƒPythonåº“</span>
pip install requests beautifulsoup4 Pillow pytesseract

<span class="hljs-comment"># åœ¨Debian/Ubuntuç³»ç»Ÿä¸Šå¯èƒ½è¿˜éœ€è¦å®‰è£…Tesseract OCRå¼•æ“</span>
sudo apt-get install tesseract-ocr
<span class="hljs-comment"># æˆ–åœ¨macOSä¸Š</span>
brew install tesseract
</code></pre>
<h4 data-id="heading-6">å¹³å°æ³¨æ„äº‹é¡¹</h4>
<ul>
<li><code>pytesseract</code> æ˜¯Tesseract OCRå¼•æ“çš„Pythonå°è£…ï¼Œéœ€è¦ç³»ç»Ÿå·²å®‰è£…Tesseractã€‚</li>
<li>Pillowåº“ç”¨äºå›¾åƒå¤„ç†ï¼Œè¯·ç¡®ä¿ç³»ç»Ÿæœ‰å¿…è¦çš„å›¾åƒåº“æ”¯æŒï¼ˆå¦‚libjpeg, zlibï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-7">ä½¿ç”¨è¯´æ˜</h3>
<h4 data-id="heading-8">åŸºæœ¬ç”¨æ³•ç¤ºä¾‹</h4>
<p>è¯¥å·¥å…·æä¾›å¤šç§æ“ä½œæ¨¡å¼ï¼Œå¯é€šè¿‡å‘½ä»¤è¡Œå‚æ•°çµæ´»æ§åˆ¶ã€‚</p>
<p><strong>1. å®Œæ•´çš„é¢„è®¤è¯RCEï¼ˆå¯†ç é‡ç½® + å‘½ä»¤æ‰§è¡Œï¼‰</strong>
æ­¤æ¨¡å¼åˆ©ç”¨æ¼æ´é“¾ï¼Œåœ¨æ— ä»»ä½•å‡­è¯çš„æƒ…å†µä¸‹ç›´æ¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">python exploit.py -u http://example.org/scriptcase -c <span class="hljs-string">"whoami"</span>
</code></pre>
<p><strong>2. ä»…æ‰§è¡Œå¯†ç é‡ç½®</strong>
æ­¤æ¨¡å¼ä»…è§¦å‘CVE-2025-47227æ¼æ´ï¼Œé‡ç½®ç®¡ç†å‘˜å¯†ç ï¼Œä¸æ‰§è¡Œåç»­å‘½ä»¤ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">python exploit.py -u http://example.org/scriptcase
</code></pre>
<p><strong>3. ä»…æ‰§è¡Œå·²è®¤è¯çš„å‘½ä»¤æ³¨å…¥ï¼ˆRCEï¼‰</strong>
æ­¤æ¨¡å¼åœ¨å·²çŸ¥ç®¡ç†å‘˜å¯†ç çš„æƒ…å†µä¸‹ï¼Œåˆ©ç”¨CVE-2025-47228æ¼æ´æ‰§è¡Œå‘½ä»¤ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">python exploit.py -u http://example.org/scriptcase -c <span class="hljs-string">"id"</span> -p <span class="hljs-string">'NewAdminPassword123*'</span>
</code></pre>
<p><strong>4. æ¢æµ‹éƒ¨ç½²è·¯å¾„</strong>
æ­¤æ¨¡å¼ç”¨äºè¯†åˆ«ç›®æ ‡æœåŠ¡å™¨ä¸ŠScriptCaseçš„å®‰è£…è·¯å¾„ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">python exploit.py -u http://example.org/ -d
</code></pre>
<h4 data-id="heading-9">å‘½ä»¤è¡Œé€‰é¡¹è¯¦è§£</h4>
<pre><code class="hljs language-css" lang="css">  -h, <span class="hljs-attr">--help</span>            æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯å¹¶é€€å‡º
  -u BASE_URL, <span class="hljs-attr">--base-url</span>=BASE_URL
                        ç›®æ ‡ç³»ç»Ÿçš„åŸºç¡€URLï¼ˆå¿…éœ€ï¼‰
  -c COMMAND, <span class="hljs-attr">--command</span>=COMMAND
                        è¦åœ¨ç›®æ ‡ç³»ç»Ÿä¸Šæ‰§è¡Œçš„å‘½ä»¤
  -<span class="hljs-selector-tag">p</span> PASSWORD, <span class="hljs-attr">--password</span>=PASSWORD
                        å·²çŸ¥çš„ç®¡ç†å‘˜å¯†ç ï¼ˆç”¨äºä»…RCEæ¨¡å¼ï¼‰
  -d, <span class="hljs-attr">--detect</span>          å¯ç”¨éƒ¨ç½²è·¯å¾„æ¢æµ‹æ¨¡å¼
</code></pre>
<h3 data-id="heading-10">æ ¸å¿ƒä»£ç </h3>
<h4 data-id="heading-11">1. å›¾åƒå¤„ç†ä¸OCRæ¨¡å— (<code>process_image</code> å‡½æ•°)</h4>
<p>æ­¤å‡½æ•°è´Ÿè´£å¯¹è¾“å…¥çš„å›¾åƒå­—èŠ‚æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œå¹¶åˆ©ç”¨Tesseract OCRå¼•æ“æå–æ–‡æœ¬ï¼Œç”¨äºå¤„ç†å¯èƒ½çš„å›¾åƒéªŒè¯ç ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">process_image</span>(<span class="hljs-params">input_image, output_image_path=<span class="hljs-literal">None</span></span>):
    <span class="hljs-string">"""
    å¯¹å›¾åƒè¿›è¡Œé¢„å¤„ç†å¹¶æ‰§è¡ŒOCRè¯†åˆ«ã€‚

    å‚æ•°:
        input_image (bytes): åŸå§‹å›¾åƒå­—èŠ‚æ•°æ®ã€‚
        output_image_path (str, optional): å¤„ç†åçš„å›¾åƒä¿å­˜è·¯å¾„ã€‚

    è¿”å›:
        str: è¯†åˆ«å‡ºçš„æ–‡æœ¬ï¼Œè½¬æ¢ä¸ºå¤§å†™å¹¶å»é™¤é¦–å°¾ç©ºæ ¼ã€‚
    """</span>
    <span class="hljs-comment"># æ‰“å¼€å›¾åƒ</span>
    img = Image.<span class="hljs-built_in">open</span>(io.BytesIO(input_image))

    <span class="hljs-comment"># å°†å›¾åƒè½¬æ¢ä¸ºRGBæ¨¡å¼ï¼ˆç¡®ä¿ä¸€è‡´æ€§ï¼‰</span>
    img = img.convert(<span class="hljs-string">'RGB'</span>)

    <span class="hljs-comment"># åŠ è½½åƒç´ æ•°æ®</span>
    pixels = img.load()

    <span class="hljs-comment"># è·å–å›¾åƒå°ºå¯¸</span>
    width, height = img.size

    <span class="hljs-comment"># å¤„ç†æ¯ä¸ªåƒç´ ï¼šå°†éçº¯é»‘/çº¯ç™½çš„èƒŒæ™¯æ›¿æ¢ä¸ºæµ…ç°è‰²ï¼Œå°†ç™½è‰²æ–‡å­—è½¬ä¸ºé»‘è‰²</span>
    <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(height):
        <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(width):
            r, g, b = pixels[x, y]
            <span class="hljs-comment"># æ”¹å˜éšæœºé¢œè‰²çš„èƒŒæ™¯ä¸ºå›ºå®šæµ…ç°è‰²ï¼ˆå­—æ¯ä»…ä¸ºé»‘æˆ–ç™½ï¼‰</span>
            <span class="hljs-keyword">if</span> (r, g, b) != (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-keyword">and</span> (r, g, b) != (<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>):
                pixels[x, y] = (<span class="hljs-number">211</span>, <span class="hljs-number">211</span>, <span class="hljs-number">211</span>) <span class="hljs-comment"># æ”¹ä¸ºæµ…ç°è‰²</span>
            <span class="hljs-keyword">elif</span> (r, g, b) == (<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>): <span class="hljs-comment"># å°†ç™½è‰²æ–‡å­—æ”¹ä¸ºé»‘è‰²æ–‡å­—</span>
                pixels[x, y] = (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>) <span class="hljs-comment"># æ”¹ä¸ºé»‘è‰²</span>

    <span class="hljs-comment"># å°†å›¾åƒå°ºå¯¸ä» (200, 50) æ”¾å¤§5å€è‡³ (1000, 250)ï¼Œä½¿ç”¨HAMMINGç®—æ³•ä¿æŒæ¸…æ™°åº¦</span>
    img = img.resize((<span class="hljs-number">1000</span>,<span class="hljs-number">250</span>), Image.Resampling.HAMMING)

    <span class="hljs-comment"># é…ç½®Tesseract OCRå‚æ•°</span>
    <span class="hljs-comment"># psm 6æˆ–8æ¨¡å¼æ•ˆæœæœ€ä½³</span>
    <span class="hljs-comment"># é™åˆ¶å­—ç¬¦é›†ä¸ºè‹±æ–‡å­—æ¯</span>
    <span class="hljs-comment"># ç¦ç”¨è¯å…¸ä¼˜åŒ–ä»¥æé«˜åŸå§‹æ–‡æœ¬è¯†åˆ«å‡†ç¡®ç‡</span>
    custom_oem_psm_config = <span class="hljs-string">rf'--psm 8 --oem 3 -c tessedit_char_whitelist=<span class="hljs-subst">{string.ascii_letters}</span> -c load_system_dawg=false -c load_freq_dawg=false --dpi 300'</span>
    <span class="hljs-comment"># æ‰§è¡ŒOCRè¯†åˆ«</span>
    text = pytesseract.image_to_string(img, config=custom_oem_psm_config)
    <span class="hljs-comment"># è¿”å›å¤§å†™å¹¶å»é™¤é¦–å°¾ç©ºæ ¼çš„ç»“æœ</span>
    <span class="hljs-keyword">return</span>(text.upper().strip())
</code></pre>
<h4 data-id="heading-12">2. æ¼æ´åˆ©ç”¨é€»è¾‘æ¦‚è¿°</h4>
<p>å·¥å…·çš„æ ¸å¿ƒåˆ©ç”¨é€»è¾‘å›´ç»•å‘<code>login.php</code>è„šæœ¬å‘é€ç²¾å¿ƒæ„é€ çš„HTTPè¯·æ±‚ã€‚</p>
<p><strong>å…³é”®æ­¥éª¤ï¼š</strong></p>
<ol>
<li><strong>å¯†ç é‡ç½®è¯·æ±‚</strong>ï¼šé€šè¿‡å‘<code>login.php</code>å‘é€ç‰¹å®šå‚æ•°ï¼ˆå¦‚<code>act=valid_hash&amp;login=admin</code>ï¼‰ï¼Œåˆ©ç”¨æ¼æ´é€»è¾‘é‡ç½®ç®¡ç†å‘˜è´¦æˆ·çš„å¯†ç å“ˆå¸Œã€‚</li>
<li><strong>ä¼šè¯å»ºç«‹ä¸è®¤è¯</strong>ï¼šä½¿ç”¨é‡ç½®åçš„å¯†ç ï¼ˆæˆ–ç”¨æˆ·æä¾›çš„å¯†ç ï¼‰å‘ç³»ç»Ÿè¿›è¡Œç™»å½•ï¼Œè·å–æœ‰æ•ˆçš„ä¼šè¯Cookieã€‚</li>
<li><strong>å‘½ä»¤æ³¨å…¥æ‰§è¡Œ</strong>ï¼šåœ¨å·²è®¤è¯çš„ä¼šè¯ä¸­ï¼Œè®¿é—®å­˜åœ¨å‘½ä»¤æ³¨å…¥æ¼æ´çš„ç«¯ç‚¹ï¼ˆä¾‹å¦‚<code>sys_get.php?in=app</code>ï¼‰ï¼Œé€šè¿‡æ³¨å…¥å‚æ•°ï¼ˆå¦‚<code>fdt</code>ï¼‰æ‰§è¡Œä»»æ„ç³»ç»Ÿå‘½ä»¤ã€‚</li>
</ol>
<p><strong>ä»£ç ç»“æ„æç¤ºï¼š</strong></p>
<ul>
<li>å·¥å…·ä½¿ç”¨<code>requests</code>åº“å¤„ç†HTTPé€šä¿¡ã€‚</li>
<li>ä½¿ç”¨<code>BeautifulSoup</code>è§£æHTMLå“åº”ä»¥æå–å…³é”®ä¿¡æ¯ï¼ˆå¦‚ä»¤ç‰Œã€è·¯å¾„ï¼‰ã€‚</li>
<li>é€šè¿‡å‘½ä»¤è¡Œå‚æ•°è§£æï¼ˆ<code>optparse</code>ï¼‰æä¾›çµæ´»çš„ç”¨æˆ·äº¤äº’ã€‚</li>
<li>æ”»å‡»æµç¨‹è¢«æ¨¡å—åŒ–ï¼Œä¾¿äºå•ç‹¬æµ‹è¯•æ¼æ´çš„æ¯ä¸ªéƒ¨åˆ†ã€‚</li>
</ul>
<hr/>
<h4 data-id="heading-13">âš ï¸ å…è´£å£°æ˜</h4>
<p>æœ¬å·¥å…·åŠç›¸å…³æ¼æ´ä¿¡æ¯ä»…ä¾›<strong>æ•™è‚²ã€å®‰å…¨ç ”ç©¶å’Œæˆæƒæµ‹è¯•</strong>ä¹‹ç”¨ã€‚æœªç»æ˜ç¡®æˆæƒï¼Œå¯¹ä»»ä½•ç³»ç»Ÿè¿›è¡Œæ¼æ´åˆ©ç”¨æµ‹è¯•å‡å±éæ³•åŠä¸é“å¾·è¡Œä¸ºã€‚ä½¿ç”¨è€…åº”ç¡®ä¿ä»…åœ¨æ‹¥æœ‰åˆæ³•æƒé™çš„ç³»ç»Ÿä¸Šè¿›è¡Œæµ‹è¯•ï¼Œå¹¶æ‰¿æ‹…ä¸€åˆ‡å› æ»¥ç”¨æ­¤å·¥å…·è€Œå¯¼è‡´çš„æ³•å¾‹è´£ä»»åŠåæœã€‚å¼€å‘è€…ä¸å¯¹ä»»ä½•è¯¯ç”¨æˆ–ç”±æ­¤é€ æˆçš„æŸå®³è´Ÿè´£ã€‚è¯·è´Ÿè´£ä»»åœ°ä½¿ç”¨å®‰å…¨çŸ¥è¯†ï¼Œä»¥å¸®åŠ©æå‡ç³»ç»Ÿå®‰å…¨ã€‚
6HFtX5dABrKlqXeO5PUv/ydjQZDJ7Ct83xG1NG8fcAPrDDo2PMaKtdjzmAXMXDz+</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[OpenAI APIä»0åˆ°1åŸºç¡€è°ƒç”¨å®è·µ]]></title>    <link>https://juejin.cn/post/7593338828195151912</link>    <guid>https://juejin.cn/post/7593338828195151912</guid>    <pubDate>2026-01-09T13:16:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593338828195151912" data-draft-id="7593173569871872052" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="OpenAI APIä»0åˆ°1åŸºç¡€è°ƒç”¨å®è·µ "/> <meta itemprop="keywords" content="OpenAI"/> <meta itemprop="datePublished" content="2026-01-09T13:16:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‰å¸½lufei"/> <meta itemprop="url" content="https://juejin.cn/user/501033035632093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            OpenAI APIä»0åˆ°1åŸºç¡€è°ƒç”¨å®è·µ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/501033035632093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‰å¸½lufei
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-09T13:16:15.000Z" title="Fri Jan 09 2026 13:16:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-09
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>äº†è§£äº†Agentå’ŒLLMçš„ä¸€äº›åŸºç¡€çŸ¥è¯†åï¼Œç›´æ¥ä¸Špythonå¼€å§‹è°ƒAPI</p>
<h2 data-id="heading-1">ä»£ç å®ç°</h2>
<h3 data-id="heading-2">ç¯å¢ƒå‡†å¤‡</h3>
<p>å…ˆè£…å¥½pythonï¼Œåˆ›å»ºé¡¹ç›®ç›®å½•ï¼Œå®‰è£…å¿…è¦åº“</p>
<pre><code class="hljs language-bash" lang="bash">pip install openai python-dotenv
</code></pre>
<h4 data-id="heading-3">é…ç½®APIå¯†é’¥</h4>
<p>åˆ›å»º <code>.env</code> æ–‡ä»¶å¹¶æ·»åŠ APIå¯†é’¥ï¼š</p>
<pre><code class="hljs language-env" lang="env">OPENAI_API_KEY=your_openai_api_key
</code></pre>
<h3 data-id="heading-4">è·å– OpenAI API å¯†é’¥</h3>
<p>æ‰“å¼€OpenAIè·å–APIå¯†é’¥åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.openai.com%2Fapi-keys" target="_blank" title="https://platform.openai.com/api-keys" ref="nofollow noopener noreferrer">platform.openai.com/api-keys</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea7d839c6ad149cab785122b4a5d587d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768569393&amp;x-signature=nVItBIa8YpjPFplS1DMndaW0KcI%3D" alt="" loading="lazy"/></p>
<p>ç›´æ¥Googleè´¦å·æˆ–è€…Microsoftè´¦å·ç™»å½•OpenAIï¼Œç„¶åå®Œå–„ä¸€ä¸‹åŸºæœ¬èµ„æ–™ï¼Œå°±èƒ½åˆ›å»ºAPIå¯†é’¥äº†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/999ace1351e944aa8269d3beb64eb2f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768569393&amp;x-signature=VF8ochaushkBHdKwOO88SEKf88g%3D" alt="" loading="lazy"/></p>
<p>åˆ›å»ºå¥½ä»¥åï¼ŒæŠŠkeyä¿å­˜å¥½ï¼Œç„¶åä¸‹ä¸€æ­¥ï¼Œéå¸¸ä¸“ä¸šçš„æ“ä½œï¼Œä¸Šæ¥å°±ä»˜è´¹ï¼Œé€‰æ‹©ç¨åå†ä¹°</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c18ce8804e374d6caf864f9f9b989ed0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768569393&amp;x-signature=LukTDJjhZzOfYd1FtflsQpkIMHo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Linux/Mac</span>
. venv/bin/activate

<span class="hljs-comment"># Windows</span>
venv\Scripts\activate
</code></pre>
<blockquote>
<p>è¿™ä¸€æ­¥æ˜¯å› ä¸ºæˆ‘ç”¨çš„ virtualenv è™šæ‹Ÿç¯å¢ƒç®¡ç†å·¥å…·ï¼Œç³»ç»Ÿå…¨å±€ Pythonï¼Œç›´æ¥ä½¿ç”¨å³å¯</p>
</blockquote>
<h2 data-id="heading-6">ä»£ç ç¤ºä¾‹</h2>
<h3 data-id="heading-7">å®˜æ–¹Demo</h3>
<p>åˆ›å»º test_openai.py æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI

client = OpenAI(
  api_key=<span class="hljs-string">"api-key"</span> <span class="hljs-comment"># æ›¿æ¢ä¸ºä½ è‡ªå·±çš„APIå¯†é’¥</span>
)

<span class="hljs-comment"># è°ƒç”¨ OpenAI çš„ responses.create æ¥å£ç”Ÿæˆæ–‡æœ¬</span>
<span class="hljs-comment"># å‚æ•°è¯´æ˜ï¼š</span>
<span class="hljs-comment">#   model="gpt-5-nano"   - æŒ‡å®šä½¿ç”¨çš„æ¨¡å‹ä¸º gpt-5-nanoï¼ˆè½»é‡ç‰ˆï¼‰</span>
<span class="hljs-comment">#   input="write a haiku about ai" - è¾“å…¥æç¤ºè¯ï¼Œè¦æ±‚å†™ä¸€é¦–å…³äº AI çš„ä¿³å¥</span>
<span class="hljs-comment">#   store=True           - å°†æœ¬æ¬¡è¯·æ±‚åŠç»“æœå­˜å‚¨åˆ°åå°ï¼Œç”¨äºåç»­åˆ†ææˆ–ä¼˜åŒ–</span>
response = client.responses.create(
  model=<span class="hljs-string">"gpt-5-nano"</span>,
  <span class="hljs-built_in">input</span>=<span class="hljs-string">"è¯·åˆ›ä½œä¸€é¦–å…³äºAIçš„çŸ­è¯—"</span>,
  store=<span class="hljs-literal">True</span>,
)

<span class="hljs-built_in">print</span>(response.output_text);
</code></pre>
<p>åœ¨ç»ˆç«¯ä¸­ä½¿ç”¨ <code>python test_openai.py</code> å‘½ä»¤è¿è¡Œæ–‡ä»¶ï¼Œå³å¯çœ‹åˆ°è¾“å‡ºç»“æœï¼Œå¦‚ä¸‹æ•ˆæœåˆ™è¯´æ˜è°ƒç”¨æˆåŠŸäº†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cac83cf01a4429daf7088ac860c0dee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768569393&amp;x-signature=tCX2u62WVCtVLy%2BJJdMM1lxAQg8%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">ç®€å•æ–‡æœ¬ç”Ÿæˆ</h3>
<p>å°† test_openai.py ä»£ç ä¸­çš„ <code>api_key="api-key"</code> æ›¿æ¢ä¸º <code>api_key=os.getenv("OPENAI_API_KEY")</code>ï¼Œå¹¶æŠŠ key æ”¾åˆ°å¯¹åº”çš„ <code>.env</code> æ–‡ä»¶ä¸­</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv
<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI

<span class="hljs-comment"># åŠ è½½ç¯å¢ƒå˜é‡</span>
load_dotenv()

<span class="hljs-comment"># åˆå§‹åŒ–å®¢æˆ·ç«¯</span>
client = OpenAI(api_key=os.getenv(<span class="hljs-string">"OPENAI_API_KEY"</span>))

<span class="hljs-comment"># ç®€å•æ–‡æœ¬ç”Ÿæˆ</span>
response = client.chat.completions.create(
    model=<span class="hljs-string">"gpt-5-nano"</span>,
    messages=[
        {<span class="hljs-string">"role"</span>: <span class="hljs-string">"system"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªå‹å¥½çš„åŠ©æ‰‹ã€‚"</span>},
        {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"è¯·è§£é‡Šä»€ä¹ˆæ˜¯AI Agentã€‚"</span>}
    ]
)

<span class="hljs-built_in">print</span>(response.choices[<span class="hljs-number">0</span>].message.content)
</code></pre>
<p>åŒçº§ç›®å½•ä¸‹åˆ›å»º .env æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹</p>
<pre><code class="hljs language-env" lang="env">OPENAI_API_KEY=your_openai_api_key
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e5d624eee9446d28eaf65d6cf8a0612~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768569393&amp;x-signature=Jt0SaaAxjxoE7v%2BX6vQLMkLpGMs%3D" alt="" loading="lazy"/></p>
<p>å†æ¬¡æ‰§è¡Œ test_openai.py æ–‡ä»¶ï¼Œå³å¯çœ‹åˆ°è¾“å‡ºç»“æœï¼Œå¦‚ä¸‹æ•ˆæœåˆ™è¯´æ˜è°ƒç”¨æˆåŠŸäº†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/233b397a3b2d4cf6a35e7e64bfe7b07d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768569393&amp;x-signature=8CjPLePU3XhwjSW0PGezwwd%2Fecg%3D" alt="" loading="lazy"/></p>
<p>ä¸Šé¢é€šè¿‡è°ƒç”¨ OpenAI çš„ responses.create æ¥å£ç”Ÿæˆæ–‡æœ¬å·²ç»çŸ¥é“äº†ï¼Œä¸‹é¢çœ‹å¤šè½®å¯¹è¯çš„ä¾‹å­</p>
<h3 data-id="heading-9">å¤šè½®å¯¹è¯</h3>
<p>å¤šè½®å¯¹è¯å°±æ˜¯åœ¨ä¸€æ¬¡å¯¹è¯ä¸­ï¼Œç”¨æˆ·å’ŒAIç³»ç»Ÿè¿›è¡Œå¤šæ¬¡äº¤äº’ï¼Œå°±åƒæˆ‘ä»¬æ—¥å¸¸ç”¨è±†åŒ…ä¹‹ç±»çš„ä¸€æ ·</p>
<p>è¿˜èƒ½å®šä¹‰è§’è‰²ï¼Œä¾‹å¦‚è®© AI ä¸“ä¸šå¯¼å¸ˆï¼Œç„¶åå›ç­”é—®é¢˜ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os 
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv 
<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI 

<span class="hljs-comment"># åŠ è½½ç¯å¢ƒå˜é‡ </span>
load_dotenv() 

<span class="hljs-comment"># åˆå§‹åŒ–å®¢æˆ·ç«¯ </span>
client = OpenAI(api_key=os.getenv(<span class="hljs-string">"OPENAI_API_KEY"</span>)) 

messages = [
    {<span class="hljs-string">"role"</span>: <span class="hljs-string">"system"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„AIå¯¼å¸ˆã€‚"</span>},
    {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä»€ä¹ˆæ˜¯å¤§è¯­è¨€æ¨¡å‹ï¼Ÿ"</span>},
    {<span class="hljs-string">"role"</span>: <span class="hljs-string">"assistant"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"å¤§è¯­è¨€æ¨¡å‹æ˜¯ä¸€ç§åŸºäºæ·±åº¦å­¦ä¹ çš„äººå·¥æ™ºèƒ½æ¨¡å‹ï¼Œèƒ½å¤Ÿç†è§£å’Œç”Ÿæˆäººç±»è¯­è¨€..."</span>},
    {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"å®ƒå’Œä¼ ç»ŸNLPæ¨¡å‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"</span>}
]
response = client.chat.completions.create(
    model=<span class="hljs-string">"gpt-5-nano"</span>,
    messages=messages
)

<span class="hljs-built_in">print</span>(response.choices[<span class="hljs-number">0</span>].message.content)

</code></pre>
<p><strong>æ³¨æ„</strong>ï¼Œmessageå‰ä¸‰è¡Œæ˜¯å¯¹è¯å†å²çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºæ„å»ºå¤šè½®å¯¹è¯çš„ä¸Šä¸‹æ–‡</p>
<p>å†æ¬¡è¿è¡Œåï¼Œä¼šçœ‹åˆ°AIæä¾›äº†ç»§ç»­çš„å›ç­”</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1d503bd57a64ad8bde7c199048cf472~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768569393&amp;x-signature=iYLEusk8S1CU6cVL8cNI67ODuUo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10">åˆ†æå›¾ç‰‡</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ†æå›¾ç‰‡çš„ä¾‹å­ï¼Œå›¾ç‰‡åœ°å€ä¸ºæ¥äº†ä¸€ä¸ªå›¾ä¸Šä¼ åˆ°å›¾åºŠï¼Œå›¾ä¸­æ˜¯ä¸€åªæŸ´çŠ¬ç‹—</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os 
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv 
<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI 

<span class="hljs-comment"># åŠ è½½ç¯å¢ƒå˜é‡ </span>
load_dotenv() 

<span class="hljs-comment"># åˆå§‹åŒ–å®¢æˆ·ç«¯ </span>
client = OpenAI(api_key=os.getenv(<span class="hljs-string">"OPENAI_API_KEY"</span>)) 


<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI
client = OpenAI()

response = client.responses.create(
    model=<span class="hljs-string">"gpt-5-nano"</span>,
    <span class="hljs-built_in">input</span>=[
        {
            <span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>,
            <span class="hljs-string">"content"</span>: [
                {
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"input_text"</span>,
                    <span class="hljs-string">"text"</span>: <span class="hljs-string">"è¿™ä¸ªå›¾ç‰‡ä¸­æœ‰ä»€ä¹ˆ?"</span>,
                },
                {
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"input_image"</span>,
                    <span class="hljs-string">"image_url"</span>: <span class="hljs-string">"https://raw.githubusercontent.com/gywgithub/image-bed/main/20260109204706397.png"</span>
                }
            ]
        }
    ]
)

<span class="hljs-built_in">print</span>(response.output_text)
</code></pre>
<p>å›¾ç‰‡æ•ˆæœ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ceebd00b35d94a4ab72b346a2d959e21~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768569393&amp;x-signature=5Xpog7TsTMIix6bbz53Y98oPwGE%3D" alt="" loading="lazy"/></p>
<p>çœ‹çœ‹æ‰§è¡Œä»£ç åçš„è¾“å‡ºï¼Œåˆ†æçš„æŒºå¥½ï¼Œæˆ‘å°±çŸ¥é“è¿™å›¾é‡Œé¢æœ‰åªæŸ´çŠ¬</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2034d164ec9848328e1315da3d04d29a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I2J5bi9bHVmZWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768569393&amp;x-signature=6Obpk%2FiDP0GQyJ1PRlGnf%2BNRlSo%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-11">å°ç»“</h2>
<p>è¿è¡Œäº†ä¸‰ä¸ªç®€å•çš„ä¾‹å­åï¼Œäº†è§£äº†APIçš„åŸºæœ¬è°ƒç”¨æ–¹æ³•å’Œæµç¨‹ï¼Œåé¢å°†ä¼šç»§ç»­å­¦ä¹ å¦‚ä½•ç”¨å·¥å…·æ‰©å±•æ¨¡å‹èƒ½åŠ›ï¼Œä»¥åŠæµå¼å“åº”ç­‰ç­‰</p>
<blockquote>
<p>æ¬¢è¿ç•™è¨€äº¤æµï¼Œå¦‚æœè§‰å¾—æœ‰å¸®åŠ©ï¼Œå¯ä»¥<code>ç‚¹ä¸ªèµ</code>æ”¯æŒä¸€ä¸‹</p>
<p>å…¬ä¼—å·ï¼šè‰å¸½lufei</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RAGåµŒå…¥æ¨¡å‹é€‰æ‹©å…¨æ”»ç•¥ï¼šä»ç†è®ºåˆ°ä»£ç å®æˆ˜]]></title>    <link>https://juejin.cn/post/7593212374921576475</link>    <guid>https://juejin.cn/post/7593212374921576475</guid>    <pubDate>2026-01-10T03:49:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593212374921576475" data-draft-id="7593242327932682250" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RAGåµŒå…¥æ¨¡å‹é€‰æ‹©å…¨æ”»ç•¥ï¼šä»ç†è®ºåˆ°ä»£ç å®æˆ˜"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-10T03:49:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—è¾°alk"/> <meta itemprop="url" content="https://juejin.cn/user/1772855673241352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RAGåµŒå…¥æ¨¡å‹é€‰æ‹©å…¨æ”»ç•¥ï¼šä»ç†è®ºåˆ°ä»£ç å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1772855673241352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—è¾°alk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T03:49:41.000Z" title="Sat Jan 10 2026 03:49:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šä¸ºä»€ä¹ˆåµŒå…¥æ¨¡å‹æ˜¯RAGçš„"çµé­‚"ï¼Ÿ</h2>
<p>åœ¨Retrieval-Augmented Generationï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ç³»ç»Ÿä¸­ï¼ŒåµŒå…¥æ¨¡å‹æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ã€‚å®ƒå°±åƒæ˜¯ç³»ç»Ÿçš„"ç¿»è¯‘å®˜"ï¼Œå°†äººç±»è¯­è¨€è½¬åŒ–ä¸ºæœºå™¨èƒ½ç†è§£çš„å‘é‡ï¼Œå†³å®šäº†æ£€ç´¢çš„è´¨é‡å’Œç²¾åº¦ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨å¦‚ä½•ä¸ºä½ çš„RAGç³»ç»Ÿé€‰æ‹©æœ€åˆé€‚çš„åµŒå…¥æ¨¡å‹ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€åµŒå…¥æ¨¡å‹çš„æ ¸å¿ƒä½œç”¨ä¸åŸç†</h2>
<h3 data-id="heading-2">1.1 RAGä¸­çš„åµŒå…¥å·¥ä½œæµç¨‹</h3>
<pre><code class="hljs language-css" lang="css">è¾“å…¥æŸ¥è¯¢åµŒå…¥æ¨¡å‹ç¼–ç æ–‡æ¡£åº“æ–‡æ¡£åˆ†å—æ‰¹é‡åµŒå…¥å¤„ç†æŸ¥è¯¢å‘é‡å‘é‡æ•°æ®åº“å‘é‡ç›¸ä¼¼åº¦è®¡ç®—<span class="hljs-attribute">Top</span>-Kç›¸å…³æ–‡æ¡£LLMç”Ÿæˆç­”æ¡ˆ
</code></pre>
<h3 data-id="heading-3">1.2 åµŒå…¥è´¨é‡çš„æ ¸å¿ƒæŒ‡æ ‡</h3>
<ul>
<li>â€¢Â <strong>è¯­ä¹‰ä¿çœŸåº¦</strong>ï¼šç›¸ä¼¼å«ä¹‰çš„æ–‡æœ¬åº”æœ‰ç›¸è¿‘çš„å‘é‡</li>
<li>â€¢Â <strong>é¢†åŸŸé€‚åº”æ€§</strong>ï¼šåœ¨ç‰¹å®šé¢†åŸŸï¼ˆåŒ»ç–—ã€æ³•å¾‹ã€æŠ€æœ¯ï¼‰çš„è¡¨ç°</li>
<li>â€¢Â <strong>å¤šè¯­è¨€æ”¯æŒ</strong>ï¼šè·¨è¯­è¨€æ£€ç´¢çš„èƒ½åŠ›</li>
<li>â€¢Â <strong>è®¡ç®—æ•ˆç‡</strong>ï¼šæ¨ç†é€Ÿåº¦å’Œå†…å­˜å ç”¨</li>
</ul>
<h2 data-id="heading-4">äºŒã€é€‰æ‹©åµŒå…¥æ¨¡å‹çš„7ä¸ªå…³é”®å› ç´ </h2>
<h3 data-id="heading-5">2.1 è¯„ä¼°ç»´åº¦æ¡†æ¶</h3>
<h4 data-id="heading-6">ç»´åº¦ä¸€ï¼šä»»åŠ¡ç‰¹æ€§åŒ¹é…</h4>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment">#Â ä¸åŒä»»åŠ¡çš„åµŒå…¥éœ€æ±‚åˆ†æ</span>
task_requirementsÂ =Â {
Â Â Â Â <span class="hljs-string">"è¯­ä¹‰æœç´¢"</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"éœ€è¦"</span>:Â [<span class="hljs-string">"è¯­ä¹‰ç›¸ä¼¼åº¦"</span>,Â <span class="hljs-string">"ä¸Šä¸‹æ–‡ç†è§£"</span>,Â <span class="hljs-string">"ç»†ç²’åº¦åŒ¹é…"</span>],
Â Â Â Â Â Â Â Â <span class="hljs-string">"æ¨èæ¨¡å‹"</span>:Â [<span class="hljs-string">"text-embedding-ada-002"</span>,Â <span class="hljs-string">"bge-large-zh"</span>],
Â Â Â Â Â Â Â Â <span class="hljs-string">"å…³é”®æŒ‡æ ‡"</span>:Â <span class="hljs-string">"Recall@K,Â MRR"</span>
Â Â Â Â },
Â Â Â Â <span class="hljs-string">"æ–‡æ¡£èšç±»"</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"éœ€è¦"</span>:Â [<span class="hljs-string">"ä¸»é¢˜åŒºåˆ†"</span>,Â <span class="hljs-string">"å…¨å±€ç»“æ„"</span>,Â <span class="hljs-string">"é™ç»´èƒ½åŠ›"</span>],
Â Â Â Â Â Â Â Â <span class="hljs-string">"æ¨èæ¨¡å‹"</span>:Â [<span class="hljs-string">"all-MiniLM-L6-v2"</span>,Â <span class="hljs-string">"paraphrase-multilingual"</span>],
Â Â Â Â Â Â Â Â <span class="hljs-string">"å…³é”®æŒ‡æ ‡"</span>:Â <span class="hljs-string">"èšç±»çº¯åº¦,Â NMI"</span>
Â Â Â Â },
Â Â Â Â <span class="hljs-string">"é—®ç­”ç³»ç»Ÿ"</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"éœ€è¦"</span>:Â [<span class="hljs-string">"é—®é¢˜-ç­”æ¡ˆåŒ¹é…"</span>,Â <span class="hljs-string">"äº‹å®å‡†ç¡®æ€§"</span>,Â <span class="hljs-string">"æŠ—å™ªå£°"</span>],
Â Â Â Â Â Â Â Â <span class="hljs-string">"æ¨èæ¨¡å‹"</span>:Â [<span class="hljs-string">"bge-reranker-large"</span>,Â <span class="hljs-string">"e5-large"</span>],
Â Â Â Â Â Â Â Â <span class="hljs-string">"å…³é”®æŒ‡æ ‡"</span>:Â <span class="hljs-string">"å‡†ç¡®ç‡,Â F1åˆ†æ•°"</span>
Â Â Â Â }
}
</code></pre>
<h4 data-id="heading-7">ç»´åº¦äºŒï¼šæ€§èƒ½ä¸æ•ˆç‡å¹³è¡¡</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span>Â time
<span class="hljs-keyword">from</span>Â sentence_transformersÂ <span class="hljs-keyword">import</span>Â SentenceTransformer
<span class="hljs-keyword">import</span>Â numpyÂ <span class="hljs-keyword">as</span>Â np

<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">EmbeddingModelEvaluator</span>:
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,Â model_name</span>):
Â Â Â Â Â Â Â Â self.modelÂ =Â SentenceTransformer(model_name)
Â Â Â Â Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">evaluate_performance</span>(<span class="hljs-params">self,Â texts,Â batch_size=<span class="hljs-number">32</span></span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""å…¨é¢è¯„ä¼°æ¨¡å‹æ€§èƒ½"""</span>
Â Â Â Â Â Â Â Â resultsÂ =Â {}
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â é€Ÿåº¦æµ‹è¯•</span>
Â Â Â Â Â Â Â Â startÂ =Â time.time()
Â Â Â Â Â Â Â Â embeddingsÂ =Â self.model.encode(texts,Â batch_size=batch_size)
Â Â Â Â Â Â Â Â results[<span class="hljs-string">'inference_time'</span>]Â =Â time.time()Â -Â start
Â Â Â Â Â Â Â Â results[<span class="hljs-string">'throughput'</span>]Â =Â <span class="hljs-built_in">len</span>(texts)Â /Â results[<span class="hljs-string">'inference_time'</span>]
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å†…å­˜ä½¿ç”¨ï¼ˆè¿‘ä¼¼ï¼‰</span>
Â Â Â Â Â Â Â Â results[<span class="hljs-string">'model_size_mb'</span>]Â =Â self.model.get_sentence_embedding_dimension()Â *Â <span class="hljs-number">4</span>Â /Â <span class="hljs-number">1024</span>Â /Â <span class="hljs-number">1024</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è´¨é‡æµ‹è¯•ï¼ˆç¤ºä¾‹ï¼‰</span>
Â Â Â Â Â Â Â Â similarityÂ =Â np.dot(embeddings[<span class="hljs-number">0</span>],Â embeddings[<span class="hljs-number">1</span>])Â /Â (
Â Â Â Â Â Â Â Â Â Â Â Â np.linalg.norm(embeddings[<span class="hljs-number">0</span>])Â *Â np.linalg.norm(embeddings[<span class="hljs-number">1</span>])
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â results[<span class="hljs-string">'semantic_similarity'</span>]Â =Â similarity
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â results

<span class="hljs-comment">#Â æµ‹è¯•ä¸åŒæ¨¡å‹</span>
models_to_testÂ =Â [
Â Â Â Â <span class="hljs-string">"all-MiniLM-L6-v2"</span>,Â Â Â Â Â Â <span class="hljs-comment">#Â è½»é‡çº§</span>
Â Â Â Â <span class="hljs-string">"all-mpnet-base-v2"</span>,Â Â Â Â Â <span class="hljs-comment">#Â å¹³è¡¡å‹</span>
Â Â Â Â <span class="hljs-string">"bge-large-zh-v1.5"</span>,Â Â Â Â Â <span class="hljs-comment">#Â ä¸­æ–‡ä¼˜åŒ–</span>
]

sample_textsÂ =Â [<span class="hljs-string">"æœºå™¨å­¦ä¹ æ˜¯äººå·¥æ™ºèƒ½çš„æ ¸å¿ƒ"</span>,Â <span class="hljs-string">"æ·±åº¦å­¦ä¹ æ˜¯æœºå™¨å­¦ä¹ çš„åˆ†æ”¯"</span>]
<span class="hljs-keyword">for</span>Â model_nameÂ <span class="hljs-keyword">in</span>Â models_to_test:
Â Â Â Â evaluatorÂ =Â EmbeddingModelEvaluator(model_name)
Â Â Â Â perfÂ =Â evaluator.evaluate_performance(sample_texts)
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{model_name}</span>:Â <span class="hljs-subst">{perf}</span>"</span>)
</code></pre>
<h4 data-id="heading-8">ç»´åº¦ä¸‰ï¼šå¤šè¯­è¨€ä¸è·¨è¯­è¨€èƒ½åŠ›</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â å¤šè¯­è¨€åµŒå…¥æ¨¡å‹å¯¹æ¯”</span>
multilingual_modelsÂ =Â {
Â Â Â Â <span class="hljs-string">"paraphrase-multilingual-MiniLM-L12-v2"</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"æ”¯æŒè¯­è¨€"</span>:Â <span class="hljs-number">50</span>+,
Â Â Â Â Â Â Â Â <span class="hljs-string">"å…¸å‹åº”ç”¨"</span>:Â <span class="hljs-string">"è·¨è¯­è¨€æ£€ç´¢"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"å‘é‡ç»´åº¦"</span>:Â <span class="hljs-number">384</span>
Â Â Â Â },
Â Â Â Â <span class="hljs-string">"distiluse-base-multilingual-cased-v2"</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"æ”¯æŒè¯­è¨€"</span>:Â <span class="hljs-number">15</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"å…¸å‹åº”ç”¨"</span>:Â <span class="hljs-string">"è¯­ä¹‰ç›¸ä¼¼åº¦"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"å‘é‡ç»´åº¦"</span>:Â <span class="hljs-number">512</span>
Â Â Â Â },
Â Â Â Â <span class="hljs-string">"bge-m3"</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"æ”¯æŒè¯­è¨€"</span>:Â <span class="hljs-number">100</span>+,
Â Â Â Â Â Â Â Â <span class="hljs-string">"å…¸å‹åº”ç”¨"</span>:Â <span class="hljs-string">"å¤šè¯­è¨€RAG"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"å‘é‡ç»´åº¦"</span>:Â <span class="hljs-number">1024</span>
Â Â Â Â }
}

<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">test_multilingual_capability</span>(<span class="hljs-params">model,Â texts_by_language</span>):
Â Â Â Â <span class="hljs-string">"""æµ‹è¯•æ¨¡å‹çš„å¤šè¯­è¨€ç†è§£èƒ½åŠ›"""</span>
Â Â Â Â resultsÂ =Â {}
Â Â Â Â <span class="hljs-keyword">for</span>Â lang,Â textsÂ <span class="hljs-keyword">in</span>Â texts_by_language.items():
Â Â Â Â Â Â Â Â embeddingsÂ =Â model.encode(texts)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è®¡ç®—åŒè¯­è¨€å†…çš„è¯­ä¹‰ä¸€è‡´æ€§</span>
Â Â Â Â Â Â Â Â intra_similarityÂ =Â calculate_cosine_similarity(embeddings[<span class="hljs-number">0</span>],Â embeddings[<span class="hljs-number">1</span>])
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è®¡ç®—è·¨è¯­è¨€è¯­ä¹‰å¯¹é½ï¼ˆå¦‚æœæœ‰ç¿»è¯‘å¯¹ï¼‰</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-string">f"<span class="hljs-subst">{lang}</span>_translation"</span>Â <span class="hljs-keyword">in</span>Â texts_by_language:
Â Â Â Â Â Â Â Â Â Â Â Â trans_embÂ =Â model.encode(texts_by_language[<span class="hljs-string">f"<span class="hljs-subst">{lang}</span>_translation"</span>])
Â Â Â Â Â Â Â Â Â Â Â Â cross_similarityÂ =Â calculate_cosine_similarity(embeddings[<span class="hljs-number">0</span>],Â trans_emb[<span class="hljs-number">0</span>])
Â Â Â Â Â Â Â Â Â Â Â Â results[<span class="hljs-string">f"<span class="hljs-subst">{lang}</span>_alignment"</span>]Â =Â cross_similarity
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â results[<span class="hljs-string">f"<span class="hljs-subst">{lang}</span>_coherence"</span>]Â =Â intra_similarity
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â results
</code></pre>
<h4 data-id="heading-9">ç»´åº¦å››ï¼šé¢†åŸŸé€‚é…æ€§</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â é¢†åŸŸç‰¹å®šåµŒå…¥æ¨¡å‹</span>
domain_specific_modelsÂ =Â {
Â Â Â Â <span class="hljs-string">"åŒ»ç–—å¥åº·"</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"BioBERT"</span>:Â <span class="hljs-string">"ç”Ÿç‰©åŒ»å­¦æ–‡çŒ®é¢„è®­ç»ƒ"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"ClinicalBERT"</span>:Â <span class="hljs-string">"ä¸´åºŠæ–‡æœ¬ä¼˜åŒ–"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"ä¼˜ç‚¹"</span>:Â <span class="hljs-string">"åŒ»å­¦æœ¯è¯­ç†è§£å¼º"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"ç¼ºç‚¹"</span>:Â <span class="hljs-string">"é€šç”¨æ€§è¾ƒå·®"</span>
Â Â Â Â },
Â Â Â Â <span class="hljs-string">"æ³•å¾‹æ–‡ä¹¦"</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"LegalBERT"</span>:Â <span class="hljs-string">"æ³•å¾‹æ–‡æœ¬é¢„è®­ç»ƒ"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"Law2Vec"</span>:Â <span class="hljs-string">"æ³•å¾‹æ¦‚å¿µåµŒå…¥"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"ä¼˜ç‚¹"</span>:Â <span class="hljs-string">"æ³•å¾‹æœ¯è¯­å‡†ç¡®"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"ç¼ºç‚¹"</span>:Â <span class="hljs-string">"éœ€è¦æ³•å¾‹è¯­æ–™"</span>
Â Â Â Â },
Â Â Â Â <span class="hljs-string">"é‡‘èç§‘æŠ€"</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"FinBERT"</span>:Â <span class="hljs-string">"é‡‘èæƒ…æ„Ÿåˆ†æ"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"FinRE"</span>:Â <span class="hljs-string">"é‡‘èå…³ç³»æå–"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"ä¼˜ç‚¹"</span>:Â <span class="hljs-string">"é‡‘èå®ä½“è¯†åˆ«"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"ç¼ºç‚¹"</span>:Â <span class="hljs-string">"æ›´æ–°é¢‘ç‡è¦æ±‚é«˜"</span>
Â Â Â Â }
}

<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">fine_tune_for_domain</span>(<span class="hljs-params">base_model,Â domain_data,Â epochs=<span class="hljs-number">3</span></span>):
Â Â Â Â <span class="hljs-string">"""é¢†åŸŸé€‚åº”å¾®è°ƒç¤ºä¾‹"""</span>
Â Â Â Â <span class="hljs-keyword">from</span>Â sentence_transformersÂ <span class="hljs-keyword">import</span>Â InputExample,Â losses
Â Â Â Â <span class="hljs-keyword">from</span>Â torch.utils.dataÂ <span class="hljs-keyword">import</span>Â DataLoader
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å‡†å¤‡è®­ç»ƒæ•°æ®ï¼ˆç›¸ä¼¼å¯¹ï¼‰</span>
Â Â Â Â train_examplesÂ =Â []
Â Â Â Â <span class="hljs-keyword">for</span>Â query,Â positiveÂ <span class="hljs-keyword">in</span>Â domain_data:
Â Â Â Â Â Â Â Â train_examples.append(InputExample(
Â Â Â Â Â Â Â Â Â Â Â Â texts=[query,Â positive],
Â Â Â Â Â Â Â Â Â Â Â Â label=<span class="hljs-number">1.0</span>
Â Â Â Â Â Â Â Â ))
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â åˆ›å»ºæ•°æ®åŠ è½½å™¨</span>
Â Â Â Â train_dataloaderÂ =Â DataLoader(
Â Â Â Â Â Â Â Â train_examples,Â 
Â Â Â Â Â Â Â Â shuffle=<span class="hljs-literal">True</span>,Â 
Â Â Â Â Â Â Â Â batch_size=<span class="hljs-number">16</span>
Â Â Â Â )
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å®šä¹‰æŸå¤±å‡½æ•°</span>
Â Â Â Â train_lossÂ =Â losses.CosineSimilarityLoss(base_model)
Â Â Â Â 
Â Â Â Â <span class="hljs-comment">#Â å¾®è°ƒæ¨¡å‹</span>
Â Â Â Â base_model.fit(
Â Â Â Â Â Â Â Â train_objectives=[(train_dataloader,Â train_loss)],
Â Â Â Â Â Â Â Â epochs=epochs,
Â Â Â Â Â Â Â Â warmup_steps=<span class="hljs-number">100</span>,
Â Â Â Â Â Â Â Â output_path=<span class="hljs-string">f"./<span class="hljs-subst">{base_model.model_name}</span>-domain-tuned"</span>
Â Â Â Â )
</code></pre>
<h4 data-id="heading-10">ç»´åº¦äº”ï¼šä¸Šä¸‹æ–‡é•¿åº¦é™åˆ¶</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â å¤„ç†é•¿æ–‡æœ¬çš„ç­–ç•¥æ¯”è¾ƒ</span>
context_handling_strategiesÂ =Â {
Â Â Â Â <span class="hljs-string">"æ»‘åŠ¨çª—å£"</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"å®ç°æ–¹å¼"</span>:Â <span class="hljs-string">"é‡å åˆ†å—+èšåˆ"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"æœ€å¤§é•¿åº¦"</span>:Â <span class="hljs-string">"ç†è®ºä¸Šæ— é™"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"ä¼˜ç‚¹"</span>:Â <span class="hljs-string">"ä¿ç•™å±€éƒ¨è¯­ä¹‰"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"ç¼ºç‚¹"</span>:Â <span class="hljs-string">"è®¡ç®—å¼€é”€å¤§"</span>
Â Â Â Â },
Â Â Â Â <span class="hljs-string">"å±‚æ¬¡èšåˆ"</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"å®ç°æ–¹å¼"</span>:Â <span class="hljs-string">"å¥å­çº§-&gt;æ®µè½çº§-&gt;æ–‡æ¡£çº§"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"æœ€å¤§é•¿åº¦"</span>:Â <span class="hljs-string">"å–å†³äºå±‚çº§æ•°"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"ä¼˜ç‚¹"</span>:Â <span class="hljs-string">"ä¿æŒæ–‡æ¡£ç»“æ„"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"ç¼ºç‚¹"</span>:Â <span class="hljs-string">"å®ç°å¤æ‚"</span>
Â Â Â Â },
Â Â Â Â <span class="hljs-string">"æœ€è¿‘é‚»æ± åŒ–"</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"å®ç°æ–¹å¼"</span>:Â <span class="hljs-string">"æå–å…³é”®å¥å­åµŒå…¥"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"æœ€å¤§é•¿åº¦"</span>:Â <span class="hljs-string">"å›ºå®štokenæ•°"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"ä¼˜ç‚¹"</span>:Â <span class="hljs-string">"èšç„¦é‡ç‚¹"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"ç¼ºç‚¹"</span>:Â <span class="hljs-string">"å¯èƒ½ä¸¢å¤±ä¿¡æ¯"</span>
Â Â Â Â }
}

<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">handle_long_document</span>(<span class="hljs-params">model,Â document,Â max_length=<span class="hljs-number">512</span>,Â strategy=<span class="hljs-string">"sliding_window"</span></span>):
Â Â Â Â <span class="hljs-string">"""å¤„ç†è¶…é•¿æ–‡æ¡£çš„åµŒå…¥ç”Ÿæˆ"""</span>
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">if</span>Â strategyÂ ==Â <span class="hljs-string">"sliding_window"</span>:
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ»‘åŠ¨çª—å£æ–¹æ³•</span>
Â Â Â Â Â Â Â Â chunksÂ =Â []
Â Â Â Â Â Â Â Â overlapÂ =Â <span class="hljs-number">50</span>Â Â <span class="hljs-comment">#Â é‡å tokenæ•°</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â iÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,Â <span class="hljs-built_in">len</span>(document),Â max_lengthÂ -Â overlap):
Â Â Â Â Â Â Â Â Â Â Â Â chunkÂ =Â document[i:iÂ +Â max_length]
Â Â Â Â Â Â Â Â Â Â Â Â chunks.append(chunk)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ç”Ÿæˆæ¯ä¸ªchunkçš„åµŒå…¥</span>
Â Â Â Â Â Â Â Â chunk_embeddingsÂ =Â model.encode(chunks)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å¹³å‡æ± åŒ–ï¼ˆç®€å•ç­–ç•¥ï¼‰</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â np.mean(chunk_embeddings,Â axis=<span class="hljs-number">0</span>)
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">elif</span>Â strategyÂ ==Â <span class="hljs-string">"hierarchical"</span>:
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â å±‚æ¬¡åŒ–æ–¹æ³•</span>
Â Â Â Â Â Â Â Â sentencesÂ =Â split_into_sentences(document)
Â Â Â Â Â Â Â Â sentence_embeddingsÂ =Â model.encode(sentences)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ®µè½çº§èšåˆ</span>
Â Â Â Â Â Â Â Â paragraphsÂ =Â group_sentences_into_paragraphs(sentences)
Â Â Â Â Â Â Â Â paragraph_embeddingsÂ =Â []
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â paraÂ <span class="hljs-keyword">in</span>Â paragraphs:
Â Â Â Â Â Â Â Â Â Â Â Â sent_indicesÂ =Â get_sentence_indices(para,Â sentences)
Â Â Â Â Â Â Â Â Â Â Â Â para_embedÂ =Â np.mean(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â sentence_embeddings[sent_indices],Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â axis=<span class="hljs-number">0</span>
Â Â Â Â Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â Â Â Â Â paragraph_embeddings.append(para_embed)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ–‡æ¡£çº§èšåˆ</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â np.mean(paragraph_embeddings,Â axis=<span class="hljs-number">0</span>)
</code></pre>
<h4 data-id="heading-11">ç»´åº¦å…­ï¼šæˆæœ¬è€ƒé‡</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â åµŒå…¥æ¨¡å‹æˆæœ¬æ•ˆç›Šåˆ†æ</span>
<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">CostBenefitAnalyzer</span>:
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,Â api_models,Â local_models</span>):
Â Â Â Â Â Â Â Â self.api_modelsÂ =Â api_modelsÂ Â <span class="hljs-comment">#Â OpenAI,Â Cohereç­‰</span>
Â Â Â Â Â Â Â Â self.local_modelsÂ =Â local_modelsÂ Â <span class="hljs-comment">#Â æœ¬åœ°éƒ¨ç½²æ¨¡å‹</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">calculate_total_cost</span>(<span class="hljs-params">self,Â documents_per_month,Â avg_tokens_per_doc</span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""è®¡ç®—æœˆåº¦æ€»æˆæœ¬"""</span>
Â Â Â Â Â Â Â Â cost_analysisÂ =Â {}
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â APIæ¨¡å‹æˆæœ¬</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â model_name,Â infoÂ <span class="hljs-keyword">in</span>Â self.api_models.items():
Â Â Â Â Â Â Â Â Â Â Â Â monthly_costÂ =Â (
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â documents_per_monthÂ *Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â avg_tokens_per_docÂ /Â <span class="hljs-number">1000</span>Â *Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â info[<span class="hljs-string">'price_per_1k_tokens'</span>]
Â Â Â Â Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â Â Â Â Â cost_analysis[model_name]Â =Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'monthly_cost'</span>:Â monthly_cost,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'type'</span>:Â <span class="hljs-string">'api'</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'infrastructure_cost'</span>:Â <span class="hljs-number">0</span>
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æœ¬åœ°æ¨¡å‹æˆæœ¬</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â model_name,Â infoÂ <span class="hljs-keyword">in</span>Â self.local_models.items():
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ç¡¬ä»¶æˆæœ¬æ‘Šé”€ï¼ˆå‡è®¾3å¹´æŠ˜æ—§ï¼‰</span>
Â Â Â Â Â Â Â Â Â Â Â Â hardware_cost_per_monthÂ =Â info[<span class="hljs-string">'hardware_cost'</span>]Â /Â <span class="hljs-number">36</span>
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ç”µåŠ›å’Œç»´æŠ¤æˆæœ¬</span>
Â Â Â Â Â Â Â Â Â Â Â Â operational_costÂ =Â info[<span class="hljs-string">'power_consumption'</span>]Â *Â <span class="hljs-number">24</span>Â *Â <span class="hljs-number">30</span>Â *Â <span class="hljs-number">0.15</span>
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â monthly_costÂ =Â hardware_cost_per_monthÂ +Â operational_cost
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â cost_analysis[model_name]Â =Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'monthly_cost'</span>:Â monthly_cost,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'type'</span>:Â <span class="hljs-string">'local'</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'infrastructure_cost'</span>:Â hardware_cost_per_month
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â cost_analysis
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">roi_analysis</span>(<span class="hljs-params">self,Â cost_analysis,Â accuracy_gains</span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""æŠ•èµ„å›æŠ¥ç‡åˆ†æ"""</span>
Â Â Â Â Â Â Â Â roi_resultsÂ =Â {}
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â model_name,Â cost_infoÂ <span class="hljs-keyword">in</span>Â cost_analysis.items():
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â model_nameÂ <span class="hljs-keyword">in</span>Â accuracy_gains:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â accuracy_improvementÂ =Â accuracy_gains[model_name]
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ç®€åŒ–ROIè®¡ç®—ï¼ˆä¸šåŠ¡ä»·å€¼è½¬æ¢ï¼‰</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â business_valueÂ =Â accuracy_improvementÂ *Â <span class="hljs-number">10000</span>Â Â <span class="hljs-comment">#Â å‡è®¾æ¯ä¸ªç™¾åˆ†ç‚¹ä»·å€¼</span>
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â roiÂ =Â (business_valueÂ -Â cost_info[<span class="hljs-string">'monthly_cost'</span>])Â /Â cost_info[<span class="hljs-string">'monthly_cost'</span>]
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â roi_results[model_name]Â =Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'roi'</span>:Â roi,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'payback_months'</span>:Â <span class="hljs-number">1</span>Â /Â roiÂ <span class="hljs-keyword">if</span>Â roiÂ &gt;Â <span class="hljs-number">0</span>Â <span class="hljs-keyword">else</span>Â <span class="hljs-literal">None</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'total_value'</span>:Â business_value
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â roi_results
</code></pre>
<h4 data-id="heading-12">ç»´åº¦ä¸ƒï¼šè¯„ä¼°ä¸éªŒè¯æ¡†æ¶</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â å…¨é¢çš„åµŒå…¥æ¨¡å‹è¯„ä¼°</span>
<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">EmbeddingModelBenchmark</span>:
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,Â test_datasets</span>):
Â Â Â Â Â Â Â Â self.datasetsÂ =Â test_datasets
Â Â Â Â Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">run_benchmark</span>(<span class="hljs-params">self,Â model,Â model_name</span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""è¿è¡Œå®Œæ•´è¯„ä¼°åŸºå‡†æµ‹è¯•"""</span>
Â Â Â Â Â Â Â Â resultsÂ =Â {}
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â 1.Â MTEBåŸºå‡†æµ‹è¯•ï¼ˆå¦‚æœå¯ç”¨ï¼‰</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â has_mteb_support(model_name):
Â Â Â Â Â Â Â Â Â Â Â Â results[<span class="hljs-string">'mteb'</span>]Â =Â evaluate_mteb(model)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â 2.Â é¢†åŸŸç‰¹å®šæµ‹è¯•</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â domain,Â dataÂ <span class="hljs-keyword">in</span>Â self.datasets.items():
Â Â Â Â Â Â Â Â Â Â Â Â domain_resultsÂ =Â self.evaluate_domain(model,Â data,Â domain)
Â Â Â Â Â Â Â Â Â Â Â Â results[domain]Â =Â domain_results
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â 3.Â é²æ£’æ€§æµ‹è¯•</span>
Â Â Â Â Â Â Â Â results[<span class="hljs-string">'robustness'</span>]Â =Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'typo_resistance'</span>:Â test_typo_robustness(model),
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'paraphrase_detection'</span>:Â test_paraphrase_detection(model),
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'negation_handling'</span>:Â test_negation_handling(model)
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â 4.Â å…¬å¹³æ€§æµ‹è¯•</span>
Â Â Â Â Â Â Â Â results[<span class="hljs-string">'fairness'</span>]Â =Â evaluate_bias_and_fairness(model)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â results
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">evaluate_domain</span>(<span class="hljs-params">self,Â model,Â data,Â domain</span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""ç‰¹å®šé¢†åŸŸè¯„ä¼°"""</span>
Â Â Â Â Â Â Â Â scoresÂ =Â {}
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ£€ç´¢ç²¾åº¦</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-string">'queries'</span>Â <span class="hljs-keyword">in</span>Â dataÂ <span class="hljs-keyword">and</span>Â <span class="hljs-string">'corpus'</span>Â <span class="hljs-keyword">in</span>Â data:
Â Â Â Â Â Â Â Â Â Â Â Â retrieval_scoreÂ =Â evaluate_retrieval(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â model,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â data[<span class="hljs-string">'queries'</span>],Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â data[<span class="hljs-string">'corpus'</span>],Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â data.get(<span class="hljs-string">'qrels'</span>)
Â Â Â Â Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â Â Â Â Â scores[<span class="hljs-string">'retrieval'</span>]Â =Â retrieval_score
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â èšç±»è´¨é‡</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-string">'clustering_data'</span>Â <span class="hljs-keyword">in</span>Â data:
Â Â Â Â Â Â Â Â Â Â Â Â clustering_scoreÂ =Â evaluate_clustering(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â model,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â data[<span class="hljs-string">'clustering_data'</span>]
Â Â Â Â Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â Â Â Â Â scores[<span class="hljs-string">'clustering'</span>]Â =Â clustering_score
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â scores
Â Â Â Â 
<span class="hljs-keyword">def</span>Â <span class="hljs-title function_">test_typo_robustness</span>(<span class="hljs-params">model</span>):
Â Â Â Â <span class="hljs-string">"""æµ‹è¯•æ‹¼å†™é”™è¯¯é²æ£’æ€§"""</span>
Â Â Â Â originalÂ =Â <span class="hljs-string">"æœºå™¨å­¦ä¹ ç®—æ³•"</span>
Â Â Â Â typo_variantsÂ =Â [
Â Â Â Â Â Â Â Â <span class="hljs-string">"æœºæ°”å­¦ä¹ ç®—æ³•"</span>,Â Â <span class="hljs-comment">#Â åŒéŸ³é”™å­—</span>
Â Â Â Â Â Â Â Â <span class="hljs-string">"æœºå™¨å­¦ç³»ç®—æ³•"</span>,Â Â <span class="hljs-comment">#Â å½¢è¿‘é”™å­—</span>
Â Â Â Â Â Â Â Â <span class="hljs-string">"jå™¨å­¦ä¹ ç®—æ³•"</span>,Â Â Â <span class="hljs-comment">#Â é”®ç›˜è¯¯æ•²</span>
Â Â Â Â Â Â Â Â <span class="hljs-string">"æœºå™¨å­¦ä¹ "</span>,Â Â Â Â Â Â <span class="hljs-comment">#Â ç¼ºå¤±è¯</span>
Â Â Â Â ]
Â Â Â Â 
Â Â Â Â original_embedÂ =Â model.encode(original)
Â Â Â Â similaritiesÂ =Â []
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">for</span>Â variantÂ <span class="hljs-keyword">in</span>Â typo_variants:
Â Â Â Â Â Â Â Â variant_embedÂ =Â model.encode(variant)
Â Â Â Â Â Â Â Â simÂ =Â cosine_similarity(original_embed,Â variant_embed)
Â Â Â Â Â Â Â Â similarities.append(sim)
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">return</span>Â np.mean(similarities)
</code></pre>
<h2 data-id="heading-13">ä¸‰ã€å®æˆ˜ï¼šæ„å»ºRAGåµŒå…¥é€‰æ‹©ç³»ç»Ÿ</h2>
<h3 data-id="heading-14">3.1 å†³ç­–æµç¨‹å›¾å®ç°</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">EmbeddingModelSelector</span>:
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
Â Â Â Â Â Â Â Â self.model_registryÂ =Â self._load_model_registry()
Â Â Â Â Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">_load_model_registry</span>(<span class="hljs-params">self</span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""åŠ è½½æ¨¡å‹æ³¨å†Œè¡¨"""</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'general'</span>:Â [<span class="hljs-string">'text-embedding-ada-002'</span>,Â <span class="hljs-string">'bge-large-en'</span>,Â <span class="hljs-string">'e5-large'</span>],
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'multilingual'</span>:Â [<span class="hljs-string">'bge-m3'</span>,Â <span class="hljs-string">'paraphrase-multilingual'</span>,Â <span class="hljs-string">'text-embedding-3-multilingual'</span>],
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'lightweight'</span>:Â [<span class="hljs-string">'all-MiniLM-L6-v2'</span>,Â <span class="hljs-string">'gte-tiny'</span>,Â <span class="hljs-string">'bge-small-en'</span>],
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'domain_specific'</span>:Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'medical'</span>:Â [<span class="hljs-string">'BioBERT'</span>,Â <span class="hljs-string">'ClinicalBERT'</span>],
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'legal'</span>:Â [<span class="hljs-string">'LegalBERT'</span>],
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'financial'</span>:Â [<span class="hljs-string">'FinBERT'</span>]
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â }
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">select_model</span>(<span class="hljs-params">self,Â requirements</span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""åŸºäºéœ€æ±‚é€‰æ‹©æ¨¡å‹"""</span>
Â Â Â Â Â Â Â Â candidatesÂ =Â []
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â 1.Â åŸºç¡€ç­›é€‰</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â requirements[<span class="hljs-string">'language'</span>]Â !=Â <span class="hljs-string">'en'</span>:
Â Â Â Â Â Â Â Â Â Â Â Â candidates.extend(self.model_registry[<span class="hljs-string">'multilingual'</span>])
Â Â Â Â Â Â Â Â <span class="hljs-keyword">elif</span>Â requirements[<span class="hljs-string">'computational_budget'</span>]Â ==Â <span class="hljs-string">'low'</span>:
Â Â Â Â Â Â Â Â Â Â Â Â candidates.extend(self.model_registry[<span class="hljs-string">'lightweight'</span>])
Â Â Â Â Â Â Â Â <span class="hljs-keyword">else</span>:
Â Â Â Â Â Â Â Â Â Â Â Â candidates.extend(self.model_registry[<span class="hljs-string">'general'</span>])
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â 2.Â é¢†åŸŸé€‚é…</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â requirements.get(<span class="hljs-string">'domain'</span>):
Â Â Â Â Â Â Â Â Â Â Â Â domain_modelsÂ =Â self.model_registry[<span class="hljs-string">'domain_specific'</span>].get(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â requirements[<span class="hljs-string">'domain'</span>],Â []
Â Â Â Â Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â Â Â Â Â candidates.extend(domain_models)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â 3.Â æ€§èƒ½è¦æ±‚ç­›é€‰</span>
Â Â Â Â Â Â Â Â filtered_candidatesÂ =Â []
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â modelÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">set</span>(candidates):Â Â <span class="hljs-comment">#Â å»é‡</span>
Â Â Â Â Â Â Â Â Â Â Â Â specsÂ =Â self.get_model_specifications(model)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â self._meets_requirements(specs,Â requirements):
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â filtered_candidates.append((model,Â specs))
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â 4.Â æ’åºï¼ˆæŒ‰ç»¼åˆå¾—åˆ†ï¼‰</span>
Â Â Â Â Â Â Â Â rankedÂ =Â <span class="hljs-built_in">sorted</span>(
Â Â Â Â Â Â Â Â Â Â Â Â filtered_candidates,
Â Â Â Â Â Â Â Â Â Â Â Â key=<span class="hljs-keyword">lambda</span>Â x:Â self._calculate_score(x[<span class="hljs-number">1</span>],Â requirements),
Â Â Â Â Â Â Â Â Â Â Â Â reverse=<span class="hljs-literal">True</span>
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â ranked[:<span class="hljs-number">3</span>]Â Â <span class="hljs-comment">#Â è¿”å›å‰ä¸‰æ¨è</span>
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">_calculate_score</span>(<span class="hljs-params">self,Â specs,Â requirements</span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""è®¡ç®—æ¨¡å‹åŒ¹é…å¾—åˆ†"""</span>
Â Â Â Â Â Â Â Â scoreÂ =Â <span class="hljs-number">0</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ€§èƒ½åŒ¹é…ï¼ˆ40%ï¼‰</span>
Â Â Â Â Â Â Â Â perf_scoreÂ =Â self._evaluate_performance_match(specs,Â requirements)
Â Â Â Â Â Â Â Â scoreÂ +=Â perf_scoreÂ *Â <span class="hljs-number">0.4</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æˆæœ¬æ•ˆç›Šï¼ˆ30%ï¼‰</span>
Â Â Â Â Â Â Â Â cost_scoreÂ =Â self._evaluate_cost_effectiveness(specs,Â requirements)
Â Â Â Â Â Â Â Â scoreÂ +=Â cost_scoreÂ *Â <span class="hljs-number">0.3</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ˜“ç”¨æ€§ï¼ˆ20%ï¼‰</span>
Â Â Â Â Â Â Â Â usability_scoreÂ =Â self._evaluate_usability(specs,Â requirements)
Â Â Â Â Â Â Â Â scoreÂ +=Â usability_scoreÂ *Â <span class="hljs-number">0.2</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ç¤¾åŒºæ”¯æŒï¼ˆ10%ï¼‰</span>
Â Â Â Â Â Â Â Â community_scoreÂ =Â self._evaluate_community_support(specs)
Â Â Â Â Â Â Â Â scoreÂ +=Â community_scoreÂ *Â <span class="hljs-number">0.1</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â score
</code></pre>
<h3 data-id="heading-15">3.2 å®Œæ•´éƒ¨ç½²ç¤ºä¾‹</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â RAGç³»ç»ŸåµŒå…¥å±‚å®Œæ•´å®ç°</span>
<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">RAGEmbeddingLayer</span>:
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,Â config</span>):
Â Â Â Â Â Â Â Â self.configÂ =Â config
Â Â Â Â Â Â Â Â self.modelÂ =Â self._initialize_model()
Â Â Â Â Â Â Â Â self.vector_dbÂ =Â self._initialize_vector_db()
Â Â Â Â Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">_initialize_model</span>(<span class="hljs-params">self</span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""åˆå§‹åŒ–åµŒå…¥æ¨¡å‹"""</span>
Â Â Â Â Â Â Â Â model_configÂ =Â self.config[<span class="hljs-string">'embedding_model'</span>]
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â model_config[<span class="hljs-string">'type'</span>]Â ==Â <span class="hljs-string">'local'</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">from</span>Â sentence_transformersÂ <span class="hljs-keyword">import</span>Â SentenceTransformer
Â Â Â Â Â Â Â Â Â Â Â Â modelÂ =Â SentenceTransformer(model_config[<span class="hljs-string">'name'</span>])
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â åº”ç”¨ä¼˜åŒ–</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â model_config.get(<span class="hljs-string">'quantization'</span>):
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â modelÂ =Â self._apply_quantization(model)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">elif</span>Â model_config[<span class="hljs-string">'type'</span>]Â ==Â <span class="hljs-string">'api'</span>:
Â Â Â Â Â Â Â Â Â Â Â Â modelÂ =Â APIEmbeddingModel(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â endpoint=model_config[<span class="hljs-string">'endpoint'</span>],
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â api_key=model_config[<span class="hljs-string">'api_key'</span>]
Â Â Â Â Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â é¢„çƒ­æ¨¡å‹</span>
Â Â Â Â Â Â Â Â model.encode([<span class="hljs-string">"warmup"</span>])
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â model
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">_apply_quantization</span>(<span class="hljs-params">self,Â model</span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""åº”ç”¨æ¨¡å‹é‡åŒ–"""</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">try</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">import</span>Â onnxruntimeÂ <span class="hljs-keyword">as</span>Â ort
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">from</span>Â sentence_transformersÂ <span class="hljs-keyword">import</span>Â quantize_embeddings
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è½¬æ¢ä¸ºONNXæ ¼å¼å¹¶é‡åŒ–</span>
Â Â Â Â Â Â Â Â Â Â Â Â model.save_as_onnx(<span class="hljs-string">"model.onnx"</span>)
Â Â Â Â Â Â Â Â Â Â Â Â quantized_modelÂ =Â quantize_embeddings(model,Â qtype=<span class="hljs-string">'int8'</span>)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â quantized_model
Â Â Â Â Â Â Â Â <span class="hljs-keyword">except</span>Â ImportError:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">"é‡åŒ–å·¥å…·æœªå®‰è£…ï¼Œä½¿ç”¨åŸæ¨¡å‹"</span>)
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â model
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">process_documents</span>(<span class="hljs-params">self,Â documents</span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""å¤„ç†æ–‡æ¡£åº“"""</span>
Â Â Â Â Â Â Â Â all_chunksÂ =Â []
Â Â Â Â Â Â Â Â all_embeddingsÂ =Â []
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â docÂ <span class="hljs-keyword">in</span>Â documents:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â 1.Â æ–‡æ¡£åˆ†å—</span>
Â Â Â Â Â Â Â Â Â Â Â Â chunksÂ =Â self.chunk_document(doc)
Â Â Â Â Â Â Â Â Â Â Â Â all_chunks.extend(chunks)
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â 2.Â æ‰¹é‡ç”ŸæˆåµŒå…¥ï¼ˆå¸¦ç¼“å­˜ï¼‰</span>
Â Â Â Â Â Â Â Â Â Â Â Â chunk_embeddingsÂ =Â self._encode_with_cache(chunks)
Â Â Â Â Â Â Â Â Â Â Â Â all_embeddings.extend(chunk_embeddings)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â 3.Â å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“</span>
Â Â Â Â Â Â Â Â self.vector_db.upsert(
Â Â Â Â Â Â Â Â Â Â Â Â embeddings=all_embeddings,
Â Â Â Â Â Â Â Â Â Â Â Â documents=all_chunks,
Â Â Â Â Â Â Â Â Â Â Â Â metadatas=[doc.metadataÂ <span class="hljs-keyword">for</span>Â docÂ <span class="hljs-keyword">in</span>Â documents]
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-built_in">len</span>(all_chunks)
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">retrieve</span>(<span class="hljs-params">self,Â query,Â top_k=<span class="hljs-number">5</span></span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""æ£€ç´¢ç›¸å…³æ–‡æ¡£"""</span>
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ç”ŸæˆæŸ¥è¯¢åµŒå…¥</span>
Â Â Â Â Â Â Â Â query_embeddingÂ =Â self.model.encode(query)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ç›¸ä¼¼åº¦æœç´¢ï¼ˆå¸¦é‡æ’åºå¯é€‰ï¼‰</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â self.config.get(<span class="hljs-string">'reranker'</span>):
Â Â Â Â Â Â Â Â Â Â Â Â candidatesÂ =Â self.vector_db.search(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â query_embedding,Â 
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â k=top_k*<span class="hljs-number">3</span>Â Â <span class="hljs-comment">#Â è·å–æ›´å¤šå€™é€‰ç”¨äºé‡æ’åº</span>
Â Â Â Â Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â åº”ç”¨é‡æ’åº</span>
Â Â Â Â Â Â Â Â Â Â Â Â resultsÂ =Â self.rerank(query,Â candidates)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">else</span>:
Â Â Â Â Â Â Â Â Â Â Â Â resultsÂ =Â self.vector_db.search(query_embedding,Â k=top_k)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â results[:top_k]
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">rerank</span>(<span class="hljs-params">self,Â query,Â candidates</span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""é‡æ’åºæå‡ç²¾åº¦"""</span>
Â Â Â Â Â Â Â Â reranker_modelÂ =Â CrossEncoder(<span class="hljs-string">'bge-reranker-large'</span>)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â pairsÂ =Â [[query,Â cand[<span class="hljs-string">'text'</span>]]Â <span class="hljs-keyword">for</span>Â candÂ <span class="hljs-keyword">in</span>Â candidates]
Â Â Â Â Â Â Â Â scoresÂ =Â reranker_model.predict(pairs)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æŒ‰é‡æ’åºåˆ†æ•°æ’åº</span>
Â Â Â Â Â Â Â Â rerankedÂ =Â <span class="hljs-built_in">sorted</span>(
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-built_in">zip</span>(candidates,Â scores),
Â Â Â Â Â Â Â Â Â Â Â Â key=<span class="hljs-keyword">lambda</span>Â x:Â x[<span class="hljs-number">1</span>],
Â Â Â Â Â Â Â Â Â Â Â Â reverse=<span class="hljs-literal">True</span>
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â [item[<span class="hljs-number">0</span>]Â <span class="hljs-keyword">for</span>Â itemÂ <span class="hljs-keyword">in</span>Â reranked]
</code></pre>
<h2 data-id="heading-16">å››ã€æœ€ä½³å®è·µä¸å»ºè®®</h2>
<h3 data-id="heading-17">4.1 æ¨¡å‹é€‰æ‹©å†³ç­–æ ‘</h3>
<ol>
<li>1.Â <strong>æ˜ç¡®éœ€æ±‚ä¼˜å…ˆçº§</strong></li>
<li>
<ul>
<li>â€¢ ç²¾åº¦ä¼˜å…ˆ vs é€Ÿåº¦ä¼˜å…ˆ</li>
<li>â€¢ å•è¯­è¨€ vs å¤šè¯­è¨€</li>
<li>â€¢ é€šç”¨é¢†åŸŸ vs ä¸“ä¸šé¢†åŸŸ</li>
</ul>
</li>
<li>2.Â <strong>è€ƒè™‘éƒ¨ç½²ç¯å¢ƒ</strong></li>
<li>
<ul>
<li>â€¢ äº‘ç«¯APIï¼šç®€å•å¿«é€Ÿï¼Œé€‚åˆåˆåˆ›</li>
<li>â€¢ æœ¬åœ°éƒ¨ç½²ï¼šæ•°æ®å®‰å…¨ï¼Œé•¿æœŸæˆæœ¬ä½</li>
<li>â€¢ æ··åˆéƒ¨ç½²ï¼šå…³é”®æ•°æ®æœ¬åœ°ï¼Œä¸€èˆ¬æ•°æ®äº‘ç«¯</li>
</ul>
</li>
<li>3.Â <strong>å®æ–½æ¸è¿›ç­–ç•¥</strong></li>
<li>
<ul>
<li>â€¢ é˜¶æ®µ1ï¼šä½¿ç”¨é€šç”¨æ¨¡å‹å¿«é€ŸéªŒè¯</li>
<li>â€¢ é˜¶æ®µ2ï¼šæ ¹æ®æ•°æ®ç‰¹æ€§é€‰æ‹©ä¼˜åŒ–æ¨¡å‹</li>
<li>â€¢ é˜¶æ®µ3ï¼šé¢†åŸŸé€‚åº”å¾®è°ƒ</li>
<li>â€¢ é˜¶æ®µ4ï¼šæ¨¡å‹é›†æˆä¸ensemble</li>
</ul>
</li>
</ol>
<h3 data-id="heading-18">4.2 ç›‘æ§ä¸è¿­ä»£</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment">#Â åµŒå…¥è´¨é‡ç›‘æ§ç³»ç»Ÿ</span>
<span class="hljs-keyword">class</span>Â <span class="hljs-title class_">EmbeddingQualityMonitor</span>:
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,Â rag_system</span>):
Â Â Â Â Â Â Â Â self.ragÂ =Â rag_system
Â Â Â Â Â Â Â Â self.metrics_historyÂ =Â []
Â Â Â Â Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">track_retrieval_quality</span>(<span class="hljs-params">self,Â queries,Â ground_truth</span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""è·Ÿè¸ªæ£€ç´¢è´¨é‡"""</span>
Â Â Â Â Â Â Â Â daily_metricsÂ =Â {}
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â query,Â true_docsÂ <span class="hljs-keyword">in</span>Â ground_truth.items():
Â Â Â Â Â Â Â Â Â Â Â Â retrievedÂ =Â self.rag.retrieve(query,Â top_k=<span class="hljs-number">10</span>)
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â è®¡ç®—ç²¾åº¦æŒ‡æ ‡</span>
Â Â Â Â Â Â Â Â Â Â Â Â precision_at_kÂ =Â self.calculate_precision(retrieved,Â true_docs)
Â Â Â Â Â Â Â Â Â Â Â Â mrrÂ =Â self.calculate_mrr(retrieved,Â true_docs)
Â Â Â Â Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â Â Â Â Â daily_metrics[query]Â =Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'precision@5'</span>:Â precision_at_k[<span class="hljs-number">5</span>],
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'precision@10'</span>:Â precision_at_k[<span class="hljs-number">10</span>],
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'mrr'</span>:Â mrr,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">'retrieved_ids'</span>:Â [doc.<span class="hljs-built_in">id</span>Â <span class="hljs-keyword">for</span>Â docÂ <span class="hljs-keyword">in</span>Â retrieved]
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â self.metrics_history.append(daily_metrics)
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ£€æµ‹æ€§èƒ½ä¸‹é™</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â self._detect_degradation():
Â Â Â Â Â Â Â Â Â Â Â Â self.alert_and_recommend()
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">_detect_degradation</span>(<span class="hljs-params">self</span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""æ£€æµ‹æ€§èƒ½ä¸‹é™"""</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">len</span>(self.metrics_history)Â &lt;Â <span class="hljs-number">7</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">False</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â recent_avgÂ =Â np.mean([
Â Â Â Â Â Â Â Â Â Â Â Â m[<span class="hljs-string">'precision@5'</span>]Â 
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â dailyÂ <span class="hljs-keyword">in</span>Â self.metrics_history[-<span class="hljs-number">7</span>:]Â 
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â mÂ <span class="hljs-keyword">in</span>Â daily.values()
Â Â Â Â Â Â Â Â ])
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â previous_avgÂ =Â np.mean([
Â Â Â Â Â Â Â Â Â Â Â Â m[<span class="hljs-string">'precision@5'</span>]Â 
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â dailyÂ <span class="hljs-keyword">in</span>Â self.metrics_history[-<span class="hljs-number">14</span>:-<span class="hljs-number">7</span>]Â 
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">for</span>Â mÂ <span class="hljs-keyword">in</span>Â daily.values()
Â Â Â Â Â Â Â Â ])
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â (previous_avgÂ -Â recent_avg)Â /Â previous_avgÂ &gt;Â <span class="hljs-number">0.1</span>Â Â <span class="hljs-comment">#Â ä¸‹é™è¶…è¿‡10%</span>
Â Â Â Â 
Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">recommend_model_update</span>(<span class="hljs-params">self</span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""æ¨èæ¨¡å‹æ›´æ–°"""</span>
Â Â Â Â Â Â Â Â current_modelÂ =Â self.rag.embedding_model_name
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â åˆ†æé—®é¢˜æ¨¡å¼</span>
Â Â Â Â Â Â Â Â error_patternsÂ =Â self.analyze_error_patterns()
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â æ¨èæ–°æ¨¡å‹</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â error_patterns[<span class="hljs-string">'multilingual_failure'</span>]Â &gt;Â <span class="hljs-number">0.3</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">"bge-m3"</span>Â Â <span class="hljs-comment">#Â æ›´å¥½çš„å¤šè¯­è¨€æ”¯æŒ</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">elif</span>Â error_patterns[<span class="hljs-string">'long_context_failure'</span>]Â &gt;Â <span class="hljs-number">0.4</span>:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">"text-embedding-3-large"</span>Â Â <span class="hljs-comment">#Â æ›´é•¿ä¸Šä¸‹æ–‡</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">elif</span>Â self.rag.config[<span class="hljs-string">'budget'</span>]Â &lt;Â <span class="hljs-number">100</span>:Â Â <span class="hljs-comment">#Â é¢„ç®—æœ‰é™</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-string">"gte-tiny"</span>Â Â <span class="hljs-comment">#Â è½»é‡çº§æ›¿ä»£</span>
Â Â Â Â Â Â Â Â 
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â <span class="hljs-literal">None</span>
</code></pre>
<h2 data-id="heading-19">äº”ã€æœªæ¥è¶‹åŠ¿ä¸å±•æœ›</h2>
<h3 data-id="heading-20">5.1 æ–°å…´æŠ€æœ¯æ–¹å‘</h3>
<ul>
<li>â€¢Â <strong>ç¨€ç–åµŒå…¥</strong>ï¼šæ›´é«˜çš„æ•ˆç‡å’Œå¯è§£é‡Šæ€§</li>
<li>â€¢Â <strong>åŠ¨æ€åµŒå…¥</strong>ï¼šæ ¹æ®æŸ¥è¯¢åŠ¨æ€è°ƒæ•´è¡¨ç¤º</li>
<li>â€¢Â <strong>å¤šæ¨¡æ€åµŒå…¥</strong>ï¼šæ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘ç»Ÿä¸€è¡¨ç¤º</li>
<li>â€¢Â <strong>å¯å­¦ä¹ æ£€ç´¢</strong>ï¼šç«¯åˆ°ç«¯ä¼˜åŒ–æ£€ç´¢è¿‡ç¨‹</li>
</ul>
<h3 data-id="heading-21">5.2 å®ç”¨å»ºè®®</h3>
<ol>
<li>1.Â <strong>ä»ç®€å•å¼€å§‹</strong>ï¼šå…ˆç”¨é€šç”¨æ¨¡å‹éªŒè¯ä¸šåŠ¡é€»è¾‘</li>
<li>2.Â <strong>æ•°æ®è´¨é‡è‡³ä¸Š</strong>ï¼šæ¸…ç†æ•°æ®æ¯”æ›´æ¢æ¨¡å‹æ›´é‡è¦</li>
<li>3.Â <strong>æŒç»­è¯„ä¼°</strong>ï¼šå»ºç«‹è‡ªåŠ¨åŒ–è¯„ä¼°æµç¨‹</li>
<li>4.Â <strong>ä¿æŒæ›´æ–°</strong>ï¼šå…³æ³¨æ–°æ¨¡å‹å‘å¸ƒå’Œbenchmarkç»“æœ</li>
<li>5.Â <strong>è€ƒè™‘é›†æˆ</strong>ï¼šå¤šä¸ªæ¨¡å‹ensembleå¯èƒ½èƒœè¿‡å•ä¸ªæ¨¡å‹</li>
</ol>
<h2 data-id="heading-22">ç»“è¯­</h2>
<p>é€‰æ‹©åˆé€‚çš„åµŒå…¥æ¨¡å‹æ˜¯RAGç³»ç»ŸæˆåŠŸçš„å…³é”®ã€‚æ²¡æœ‰"æœ€å¥½"çš„æ¨¡å‹ï¼Œåªæœ‰"æœ€åˆé€‚"çš„æ¨¡å‹ã€‚é€šè¿‡ç³»ç»Ÿæ€§çš„è¯„ä¼°æ¡†æ¶ã€æ˜ç¡®çš„éœ€æ±‚åˆ†æå’ŒæŒç»­çš„ç›‘æ§ä¼˜åŒ–ï¼Œä½ å¯ä»¥ä¸ºä½ çš„RAGç³»ç»Ÿæ‰¾åˆ°æœ€ä½³çš„åµŒå…¥è§£å†³æ–¹æ¡ˆã€‚</p>
<p>è®°ä½ï¼ŒæŠ€æœ¯é€‰æ‹©åº”è¯¥æœåŠ¡äºä¸šåŠ¡ç›®æ ‡ã€‚ä»å®é™…éœ€æ±‚å‡ºå‘ï¼Œå¹³è¡¡æ€§èƒ½ã€æˆæœ¬å’Œç»´æŠ¤å¤æ‚åº¦ï¼Œæ‰èƒ½æ„å»ºå‡ºæ—¢é«˜æ•ˆåˆå¯æŒç»­çš„RAGç³»ç»Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangGraphæ™ºèƒ½ä½“å¼€å‘è®¾è®¡æ¨¡å¼ï¼ˆå››ï¼‰â€”â€”LangGraphå¤šæ™ºèƒ½ä½“è®¾è®¡æ¨¡å¼ï¼šç½‘ç»œæ¶æ„]]></title>    <link>https://juejin.cn/post/7593240931287007284</link>    <guid>https://juejin.cn/post/7593240931287007284</guid>    <pubDate>2026-01-10T03:52:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7593240931287007284" data-draft-id="7592431064976998415" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangGraphæ™ºèƒ½ä½“å¼€å‘è®¾è®¡æ¨¡å¼ï¼ˆå››ï¼‰â€”â€”LangGraphå¤šæ™ºèƒ½ä½“è®¾è®¡æ¨¡å¼ï¼šç½‘ç»œæ¶æ„"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,LangChain,Agent"/> <meta itemprop="datePublished" content="2026-01-10T03:52:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹çœŸå¥½ç©"/> <meta itemprop="url" content="https://juejin.cn/user/3140624091453053"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangGraphæ™ºèƒ½ä½“å¼€å‘è®¾è®¡æ¨¡å¼ï¼ˆå››ï¼‰â€”â€”LangGraphå¤šæ™ºèƒ½ä½“è®¾è®¡æ¨¡å¼ï¼šç½‘ç»œæ¶æ„
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3140624091453053/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹çœŸå¥½ç©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-10T03:52:21.000Z" title="Sat Jan 10 2026 03:52:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-10
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¸Šç¯‡æ–‡ç«  <a href="https://juejin.cn/post/7591703562133684258" target="_blank" title="https://juejin.cn/post/7591703562133684258">LangGraphæ™ºèƒ½ä½“å¼€å‘è®¾è®¡æ¨¡å¼ï¼ˆä¸‰ï¼‰â€”â€”LangGraphå¤šæ™ºèƒ½ä½“è®¾è®¡æ¨¡å¼ï¼šä¸»ç®¡æ¶æ„ä¸åˆ†å±‚æ¶æ„</a>åˆ†äº«äº†å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„ä¸¤ç§æ ¸å¿ƒæ¶æ„ï¼š<strong>ä¸»ç®¡æ¶æ„</strong>ä¸<strong>åˆ†å±‚æ¶æ„</strong>ã€‚å®ƒä»¬é€šè¿‡å¼•å…¥é¡¶å±‚æ™ºèƒ½ä½“è¿›è¡Œç»Ÿä¸€å†³ç­–ä¸è°ƒåº¦ï¼Œæ˜¾è‘—æå‡äº†ç³»ç»Ÿå¤„ç†å¤æ‚ä»»åŠ¡çš„èƒ½åŠ›ã€‚ç„¶è€Œï¼Œé™¤äº†è¿™ç§é›†ä¸­å¼çš„åè°ƒæ¨¡å¼ï¼Œè¿˜å­˜åœ¨å¦ä¸€ç§æ›´ä¸ºå¹³ç­‰ä¸åˆ†å¸ƒå¼çš„æ¶æ„â€”â€”åœ¨è¿™ç§è®¾è®¡ä¸­ï¼Œæ¯ä¸ªæ™ºèƒ½ä½“éƒ½èƒ½ç›´æ¥äº¤äº’ã€ååŒå·¥ä½œï¼Œè€Œä¸å¿…ä¾èµ–äºå•ä¸€çš„ä¸»ç®¡èŠ‚ç‚¹æ¥è°ƒè§£æ‰€æœ‰é€šä¿¡ã€‚è¿™ä¾¿æ˜¯ç¬”è€…å°†è¦æ·±å…¥ä»‹ç»çš„æœ€åä¸€ç§å¤šæ™ºèƒ½ä½“è®¾è®¡æ¨¡å¼ï¼š<strong>ç½‘ç»œæ¶æ„</strong>ã€‚</p>
<p>æœ¬ç³»åˆ—å°†æ¶µç›–å¸¸è§çš„å·¥ä½œæµæ¨¡å¼ä¸å¤šæ™ºèƒ½ä½“æ¶æ„æ¨¡å¼ï¼Œé¢„è®¡é€šè¿‡å››ç¯‡æ–‡ç« å±•å¼€ã€‚ç›¸å…³å†…å®¹å‡åˆ—äºç¬”è€…çš„ä¸“æ <a href="https://juejin.cn/column/7526240014499495972" target="_blank" title="https://juejin.cn/column/7526240014499495972">ã€Šæ·±å…¥æµ…å‡ºLangChain&amp;LangGraph AI Agent æ™ºèƒ½ä½“å¼€å‘ã€‹</a>ï¼Œè¯¥ä¸“æ é€‚åˆæ‰€æœ‰å¯¹ LangChain æ„Ÿå…´è¶£çš„å­¦ä¹ è€…ï¼Œæ— è®ºä¹‹å‰æ˜¯å¦æ¥è§¦è¿‡ LangChainã€‚è¯¥ä¸“æ åŸºäºç¬”è€…åœ¨å®é™…é¡¹ç›®ä¸­çš„æ·±åº¦ä½¿ç”¨ç»éªŒï¼Œç³»ç»Ÿè®²è§£äº†ä½¿ç”¨LangChain/LangGraphå¦‚ä½•å¼€å‘æ™ºèƒ½ä½“ï¼Œç›®å‰å·²æ›´æ–° 36 è®²ï¼Œå¹¶æŒç»­è¡¥å……å®æˆ˜ä¸æ‹“å±•å†…å®¹ã€‚æ¬¢è¿æ„Ÿå…´è¶£çš„åŒå­¦å…³æ³¨ç¬”è€…çš„æ˜é‡‘è´¦å·ä¸ä¸“æ ï¼Œä¹Ÿå¯å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å·<strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œæ¯æœŸåˆ†äº«æ¶‰åŠçš„ä»£ç å‡å¯åœ¨å…¬ä¼—å·ç§ä¿¡: <strong>LangChainæ™ºèƒ½ä½“å¼€å‘</strong>å…è´¹è·å–ã€‚</p>
<p>2026å¹´ç¬”è€…çš„å¦ä¸€å¤§é‡å¿ƒè¿˜ä¼šæ”¾åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzk3NTA2OTMxNQ%3D%3D%26action%3Dgetalbum%26album_id%3D4331818996941979657%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzk3NTA2OTMxNQ==&amp;action=getalbum&amp;album_id=4331818996941979657#wechat_redirect" ref="nofollow noopener noreferrer"><strong>å¤§æ¨¡å‹è®­ç»ƒ</strong>ä¸“æ </a>åˆ†äº«ä¸Šï¼Œå½“ç„¶ï¼Œè°ˆè®ºè®­ç»ƒæ— æ³•ç»•è¿‡ç®—åŠ›è¿™é“ç°å®çš„é—¨æ§›ã€‚æ˜‚è´µçš„GPUæ˜¯è®¸å¤šäººæ¢ç´¢æŠ€æœ¯çš„æ‹¦è·¯çŸ³ã€‚æ­£å› å¦‚æ­¤ç¬”è€…ä»Šå¹´ç‰¹æ„ä¸ä¸€äº›å¯é çš„ç®—åŠ›å¹³å°å±•å¼€äº†åˆä½œï¼Œå¸Œæœ›èƒ½ä¸ºå¤§å®¶è§£å†³ç®—åŠ›ç“¶é¢ˆã€‚å¤§å®¶å¯ä»¥é€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lab4ai.cn%2Fregister%3FagentID%3Duser-XorgKKc56U" target="_blank" title="https://www.lab4ai.cn/register?agentID=user-XorgKKc56U" ref="nofollow noopener noreferrer">www.lab4ai.cn/register?agâ€¦</a> æ³¨å†Œ<strong>Lab4aiç®—åŠ›å¹³å°</strong>ï¼Œæä¾›äº†åŒ…æ‹¬è‹±ä¼Ÿè¾¾Hç³»åˆ—åœ¨å†…çš„å¤šç§é€‰æ‹©ï¼Œæ›´æœ‰Â <strong>5å°æ—¶çš„å…è´¹ä½“éªŒé¢åº¦</strong>ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€ç½‘ç»œæ¶æ„</h2>
<h3 data-id="heading-2">1.1 ç½‘ç»œæ¶æ„æ¦‚å¿µ</h3>
<p>ç½‘ç»œæ¶æ„ä¸ºå¤šæ™ºèƒ½ä½“ç³»ç»Ÿæä¾›äº†ä¸€ç§å»ä¸­å¿ƒåŒ–ã€é«˜çµæ´»æ€§çš„åä½œèŒƒå¼ã€‚åœ¨è¯¥æ¨¡å‹ä¸­ï¼Œæ‰€æœ‰æ™ºèƒ½ä½“å¤„äºå¯¹ç­‰åœ°ä½ï¼Œå½¼æ­¤ä¹‹é—´å¯ç›´æ¥å»ºç«‹é€šä¿¡è¿æ¥ï¼ˆå¤šå¯¹å¤šï¼‰ï¼Œæ— éœ€ä¾èµ–ä¸­å¤®ä¸»ç®¡æ¥åè°ƒæ¯ä¸€æ¬¡äº¤äº’ã€‚æ¯ä¸ªæ™ºèƒ½ä½“åŸºäºè‡ªèº«çŠ¶æ€ã€ç³»ç»Ÿæ•´ä½“ç›®æ ‡ä»¥åŠå·²äº¤æ¢çš„æ¶ˆæ¯ï¼Œè‡ªä¸»å†³ç­–æ¥ä¸‹æ¥åº”è°ƒç”¨å“ªä¸€ä¸ªåˆä½œæ™ºèƒ½ä½“ã€‚</p>
<p align="center"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08ff47291ef848b28fbc85897616b2d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768621940&amp;x-signature=0OIUiPuqu6FzFMemyDndfIP7%2Fvs%3D" alt="0.png" width="70%" loading="lazy"/></p>
<p>ç½‘ç»œæ¶æ„åœ¨ä»¥ä¸‹åœºæ™¯ä¸­å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ï¼š</p>
<ol>
<li><strong>ä»»åŠ¡æœ¬è´¨æ˜¯åä½œä¸”åŠ¨æ€çš„</strong>ï¼šå½“æ™ºèƒ½ä½“äº¤äº’çš„æœ€ä½³é¡ºåºæ— æ³•é¢„å…ˆç¡®å®šæ—¶ï¼Œç½‘ç»œæ”¯æŒåŠ¨æ€ã€è‡ªé€‚åº”çš„åä½œï¼Œæ™ºèƒ½ä½“å¯æ ¹æ®å®æ—¶æƒ…å†µä¸´æ—¶å†³å®šè¡Œä¸ºã€‚</li>
<li><strong>éœ€è¦å»ä¸­å¿ƒåŒ–å†³ç­–</strong>ï¼šæ§åˆ¶æƒåˆ†æ•£äºå„æ™ºèƒ½ä½“ä¹‹é—´ï¼Œèƒ½æå‡ç³»ç»Ÿçš„å®¹é”™èƒ½åŠ›ã€‚å•ä¸ªæ™ºèƒ½ä½“çš„æ•…éšœä¸æ˜“å¯¼è‡´æ•´ä¸ªç³»ç»Ÿç˜«ç—ªã€‚</li>
<li><strong>ä¸“ä¸šæ™ºèƒ½ä½“éœ€çµæ´»äº¤äº’</strong>ï¼šè‹¥ä¸åŒæ™ºèƒ½ä½“å…·å¤‡ç‹¬ç‰¹çš„ä¸“ä¸šçŸ¥è¯†ï¼Œä¸”è¿™äº›çŸ¥è¯†å¯èƒ½åœ¨ä»»åŠ¡çš„ä¸åŒèŠ‚ç‚¹è¢«éœ€è¦ï¼Œç½‘ç»œæ¶æ„èƒ½æ”¯æŒæ›´é¡ºç•…çš„ä¿¡æ¯äº¤æ¢ä¸åä½œã€‚</li>
</ol>
<p>ç„¶è€Œï¼Œç½‘ç»œæ¶æ„çš„å¹³ç­‰æ€§ä¸è‡ªç”±åº¦ä¹Ÿå¸¦æ¥äº†è®¾è®¡ä¸Šçš„æŒ‘æˆ˜ï¼šå¿…é¡»ä»”ç»†ç®¡ç†ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œæ˜ç¡®å„æ™ºèƒ½ä½“çš„å…±åŒç›®æ ‡ä¸è¡Œä¸ºè¾¹ç•Œï¼Œä»¥ç¡®ä¿åœ¨åˆ†æ•£å†³ç­–ä¸‹æ•´ä½“è¡Œä¸ºä¾ç„¶è¿è´¯ã€ä¸€è‡´ã€‚</p>
<h3 data-id="heading-3">1.2 å…¸å‹çš„ç½‘ç»œæ¶æ„â€”â€”Swarmæ¶æ„</h3>
<p>Swarm æ¶æ„æ˜¯ç½‘ç»œæ¶æ„çš„ä¸€ä¸ªå…¸å‹ä»£è¡¨ï¼Œå…¶æ ¸å¿ƒåœ¨äºæ™ºèƒ½ä½“èƒ½å¤ŸåŸºäºä¸“ä¸šé¢†åŸŸåŠ¨æ€åœ°ç§»äº¤æ§åˆ¶æƒã€‚åœ¨è¯¥ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ªæ™ºèƒ½ä½“è¢«è®¾è®¡ä¸ºç‰¹å®šé¢†åŸŸçš„ä¸“å®¶ï¼Œå¯¹è¯æˆ–ä»»åŠ¡ä¼šè¢«åŠ¨æ€è·¯ç”±è‡³æœ€é€‚åˆå¤„ç†å½“å‰ä¸Šä¸‹æ–‡çš„æ™ºèƒ½ä½“ã€‚ä¸€ä¸ªå…³é”®ç‰¹å¾æ˜¯ï¼ŒSwarm èƒ½å¤Ÿâ€œè®°å¿†â€ä¸Šä¸€æ¬¡è¢«æ¿€æ´»çš„æ™ºèƒ½ä½“ã€‚è¿™ç¡®ä¿äº†åœ¨åŒä¸€å¯¹è¯çº¿ç¨‹çš„åç»­äº¤äº’ä¸­ï¼Œç³»ç»Ÿèƒ½æ™ºèƒ½åœ°ä¼˜å…ˆç”±è¯¥æ™ºèƒ½ä½“å“åº”ï¼Œä»è€Œä¿æŒä¸Šä¸‹æ–‡çš„è¿ç»­æ€§ä¸å¯¹è¯çš„è¿è´¯æ€§ã€‚</p>
<p>Swarm æ¶æ„çš„æ ¸å¿ƒç‰¹æ€§å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>å…·å¤‡ç§»äº¤èƒ½åŠ›çš„æ™ºèƒ½ä½“</strong>ï¼šå„æ™ºèƒ½ä½“é…å¤‡â€œç§»äº¤å·¥å…·â€ï¼Œå¯æ˜¾å¼åœ°å°†æ§åˆ¶æƒåŠå½“å‰ä¸Šä¸‹æ–‡è½¬ç§»ç»™å…¶ä»–æ›´æ“…é•¿å¤„ç†åç»­ä»»åŠ¡çš„æ™ºèƒ½ä½“ï¼Œå®ç°ä¸“å®¶é—´çš„æœ‰æ•ˆåä½œã€‚</li>
<li><strong>åŠ¨æ€çš„æ™ºèƒ½ä½“è·¯ç”±</strong>ï¼šå¯¹è¯çš„è·¯ç”±å†³ç­–æ˜¯åŠ¨æ€ä¸”é«˜åº¦ä¾èµ–äºä¸Šä¸‹æ–‡çš„ã€‚æ™ºèƒ½ä½“ä¾æ®è‡ªèº«ä¸“ä¸šçŸ¥è¯†å’Œå½“å‰å¯¹è¯çŠ¶æ€å†³å®šæ˜¯å¦ç§»äº¤ã€ç§»äº¤ç»™è°ï¼Œä»è€Œå½¢æˆçµæ´»è‡ªé€‚åº”çš„ç³»ç»Ÿæµç¨‹ã€‚</li>
<li><strong>åŸºäºè®°å¿†çš„å¯¹è¯è¿ç»­æ€§</strong>ï¼šSwarm ç»´æŠ¤å¯¹è¯å†å²ï¼Œå¹¶è®°å½•æ¯ä¸ªçº¿ç¨‹ä¸­ä¸Šæ¬¡æ¿€æ´»çš„æ™ºèƒ½ä½“ã€‚è¿™ç§è®°å¿†æœºåˆ¶å¯¹äºåœ¨å¤šæ¬¡äº¤äº’ä¸­æä¾›è¿è´¯ã€è‡ªç„¶çš„ç”¨æˆ·ä½“éªŒè‡³å…³é‡è¦ã€‚</li>
</ol>
<h2 data-id="heading-4">äºŒã€LangGraphç½‘ç»œæ¶æ„ä»£ç å®æˆ˜</h2>
<p>å°½ç®¡ç½‘ç»œæ¶æ„çš„è®¾è®¡ä¸å®ç°å…·æœ‰ä¸€å®šå¤æ‚æ€§ï¼Œä½†LangGraphä¸ºå¼€å‘è€…æä¾›äº†ç›¸åº”çš„æ”¯æŒåº“ä»¥é™ä½å¼€å‘é—¨æ§›ã€‚ç›®å‰ï¼Œå®ç°å¤šæ™ºèƒ½ä½“ç½‘ç»œæ¶æ„çš„æˆç†ŸèŒƒå¼æ˜¯ <strong>Swarm æ¶æ„</strong>ã€‚ä¸ºæ­¤ï¼ŒLangGraph ä¸“é—¨æä¾›äº†Â <code>langgraph-swarm</code>Â åº“ï¼Œå®ƒå°è£…äº†ç”¨äºåˆ›å»ºå…·å¤‡ç§»äº¤èƒ½åŠ›çš„æ™ºèƒ½ä½“å·¥å…·ï¼Œä½¿å¾—å¤šä¸ªæ™ºèƒ½ä½“èƒ½å¤Ÿä»¥å¯¹ç­‰çš„æ–¹å¼è¿›è¡Œäº¤äº’ä¸åä½œã€‚</p>
<p>ä¸‹é¢ç¬”è€…é€šè¿‡ä¸€ä¸ªä½¿ç”¨Â <code>langgraph-swarm</code>Â åº“çš„ç¤ºä¾‹æ¥å…·ä½“è¯´æ˜ Swarm æ¶æ„çš„å®ç°ã€‚è¯¥ç¤ºä¾‹åŒ…å«ä¸¤ä¸ªä¸“ä¸šæ™ºèƒ½ä½“ï¼š<strong>Agent1ï¼ˆæ•°å­¦ä¸“å®¶ï¼‰</strong> Â å’ŒÂ <strong>Agent2ï¼ˆå°çŒ«å’ªè¯­æ°”æ™ºèƒ½ä½“ï¼‰</strong> ã€‚</p>
<ol>
<li><strong>ç¯å¢ƒé…ç½®ï¼š</strong> Â é¦–å…ˆéœ€è¦å®‰è£…Â <code>langgraph-swarm</code>Â ç±»åº“ã€‚åœ¨æ¿€æ´»çš„<code>anaconda langchain</code>è™šæ‹Ÿç¯å¢ƒä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<code>pip install -U langgraph-swarm</code>:</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52d72622c242454db33fa3640d81630c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768621940&amp;x-signature=KnWGY%2FF%2B9qslqbhjl9QyOtG%2FUsY%3D" alt="1.png" loading="lazy"/></p>
<ol start="2">
<li><strong>å¼•å…¥ç›¸å…³ä¾èµ–ï¼š</strong> Â Â Â åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸‹æ–°å»ºÂ <code>.env</code>Â æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„Â <code>DEEPSEEK_API_KEY</code>ã€‚éšåå¼•å…¥å¿…è¦çš„ä¾èµ–ã€‚</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> langchain_core.messages <span class="hljs-keyword">import</span> HumanMessage, SystemMessage
<span class="hljs-keyword">from</span> langchain_core.tools <span class="hljs-keyword">import</span> tool
<span class="hljs-keyword">from</span> langchain_deepseek <span class="hljs-keyword">import</span> ChatDeepSeek
<span class="hljs-keyword">from</span> langchain.agents <span class="hljs-keyword">import</span> create_agent
<span class="hljs-keyword">from</span> langgraph.checkpoint.memory <span class="hljs-keyword">import</span> InMemorySaver
<span class="hljs-keyword">from</span> langgraph_swarm <span class="hljs-keyword">import</span> create_handoff_tool, create_swarm
<span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv

load_dotenv()

llm = ChatDeepSeek(
    model=<span class="hljs-string">"deepseek-chat"</span>,
)
</code></pre>
<ol start="3">
<li><strong>å®šä¹‰ä¸“ä¸šæ™ºèƒ½ä½“:</strong> æ³¨æ„ä»Â <code>langgraph-swarm</code>Â å¼•å…¥çš„Â <code>create_handoff_tool</code>Â å‡½æ•°ï¼Œå®ƒä½¿æ™ºèƒ½ä½“å…·å¤‡å‘å…¶ä»–æ™ºèƒ½ä½“ç§»äº¤æ§åˆ¶æƒçš„èƒ½åŠ›ã€‚é€šè¿‡å®šåˆ¶ç§»äº¤è¿‡ç¨‹ï¼Œæ¯ä¸ªæ™ºèƒ½ä½“å¾—ä»¥å¤„äºå¹³ç­‰åœ°ä½ï¼Œå¹¶èƒ½å°†ä¸“ä¸šä»»åŠ¡ç§»äº¤ç»™æ›´åˆé€‚çš„æ™ºèƒ½ä½“ã€‚</li>
</ol>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@tool</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a:<span class="hljs-built_in">int</span>, b:<span class="hljs-built_in">int</span></span>)-&gt;<span class="hljs-built_in">int</span>:
    <span class="hljs-string">'''
    è®¡ç®—ä¸¤ä¸ªæ•´æ•°å’Œå­—ç¬¦ä¸²ç›¸åŠ æ—¶åŠ¡å¿…è°ƒç”¨è¯¥å‡½æ•°
    '''</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'Agent1 åŠ æ³•å·¥å…·è°ƒç”¨'</span>)
    <span class="hljs-keyword">return</span> a+b

<span class="hljs-comment"># agent1æ˜¯ä¸€ä½å¯ä»¥è°ƒç”¨addå‡½æ•°å’Œç§»äº¤ç»™agent2ç§»äº¤å·¥å…·å‡½æ•°çš„æ™ºèƒ½ä½“</span>
agent1 = create_agent(
    model=llm,
    tools=[add, create_handoff_tool(agent_name=<span class="hljs-string">'agent2'</span>, description=<span class="hljs-string">'å½“ç”¨æˆ·æƒ³å’Œagent2å¯¹è¯æ—¶ï¼Œè½¬ç»™agent2å›ç­”'</span>)],
    system_prompt=<span class="hljs-string">'ä½ æ˜¯agent1ï¼Œä¸€ä½åŠ æ³•ä¸“å®¶ï¼Œå¯ä»¥åˆ©ç”¨æä¾›çš„addå‡½æ•°å®Œæˆæ‰€æœ‰åŠ æ³•è¿ç®—'</span>,
    name=<span class="hljs-string">'agent1'</span>
)

<span class="hljs-comment"># agent2è¯´è¯çš„è¯­æ°”åƒå°çŒ«å’ªï¼Œå¹¶ä¸”æ‹¥æœ‰ä¸€ä¸ªç§»äº¤ç»™agent1ä»¥å¯»æ±‚æ•°å­¦å¸®åŠ©çš„ç§»äº¤å·¥å…·</span>
agent2 = create_agent(
    model=llm,
    tools=[create_handoff_tool(agent_name=<span class="hljs-string">'agent1'</span>, description=<span class="hljs-string">'è¯·åŠ¡å¿…å°†æ‰€æœ‰çš„åŠ æ³•è¿ç®—ç§»äº¤ç»™agent1, å®ƒå¯ä»¥å¸®åŠ©ä½ è§£å†³æ•°å­¦é—®é¢˜'</span>)],
    system_prompt=<span class="hljs-string">'ä½ æ˜¯agent2ï¼Œ ä½ è¯´è¯è¯­æ°”åƒå°çŒ«å’ª'</span>,
    name=<span class="hljs-string">'agent2'</span>
)
</code></pre>
<ol start="4">
<li><strong>åˆ›å»ºSwarmç½‘ç»œæ¶æ„</strong>: Swarmæ¶æ„éœ€è¦é€šè¿‡è®°å¿†ä¿æŒå¯¹è¯è¿ç»­æ€§ï¼Œè¿™é‡Œä½¿ç”¨å†…å­˜æ£€æŸ¥ç‚¹<code>InMemorySaver</code>æ¥å®ç°çŸ­æœŸè®°å¿†ï¼ˆå¯¹æ­¤ä¸ç†Ÿæ‚‰çš„è¯»è€…å¯å‚è€ƒç¬”è€…æ–‡ç« ã€Š<a href="https://juejin.cn/post/7585553799298056238" target="_blank" title="https://juejin.cn/post/7585553799298056238">LangGraph1.0é€Ÿé€šæŒ‡å—ï¼ˆäºŒï¼‰â€”â€” LangGraph1.0 æ¡ä»¶è¾¹ã€è®°å¿†ã€äººåœ¨å›è·¯</a>ã€‹ï¼‰ã€‚æ¥ç€ï¼Œä½¿ç”¨Â <code>create_swarm</code>Â æ–¹æ³•åˆ›å»º Swarm ç½‘ç»œæ¶æ„ï¼Œå¹¶é»˜è®¤æ¿€æ´»Â <code>agent1</code>ã€‚</li>
</ol>
<pre><code class="hljs language-python" lang="python">checkpointer = InMemorySaver()
workflow = create_swarm(
    [agent1, agent2],
    default_active_agent=<span class="hljs-string">"agent1"</span> <span class="hljs-comment"># é»˜è®¤æ¿€æ´»çš„æ™ºèƒ½ä½“æ˜¯agent1</span>
)

app = workflow.<span class="hljs-built_in">compile</span>(checkpointer=checkpointer)
</code></pre>
<ol start="5">
<li><strong>è¿è¡Œæµ‹è¯•</strong>: é€šè¿‡å¤šè½®å¯¹è¯æ¥è§‚å¯Ÿå¤šæ™ºèƒ½ä½“çš„åä½œç»“æœã€‚è™½ç„¶é»˜è®¤æ¿€æ´»çš„æ˜¯Â <code>agent1</code>ï¼Œä½†å½“ç”¨æˆ·æ˜ç¡®è¦æ±‚ä¸Â <code>agent2</code>Â å¯¹è¯æ—¶ï¼Œæ¶æ„ä¼šè‡ªåŠ¨å°†æ§åˆ¶æƒç§»äº¤ç»™Â <code>agent2</code>ã€‚éšåï¼Œå½“ç”¨æˆ·æå‡ºæ•°å­¦è®¡ç®—é—®é¢˜ï¼ˆ<code>100+100</code>ï¼‰æ—¶ï¼Œæ¶æ„åˆä¼šä»Â <code>agent2</code>Â åˆ‡æ¢å›Â <code>agent1</code>Â æ¥æ‰§è¡Œè®¡ç®—ã€‚</li>
</ol>
<pre><code class="hljs language-python" lang="python">config = {
    <span class="hljs-string">'configurable'</span>: {
        <span class="hljs-string">'thread_id'</span>: <span class="hljs-string">'1'</span>
    }
}

<span class="hljs-comment"># ç¬¬ä¸€è½®å¯¹è¯</span>
first = app.invoke(
    {<span class="hljs-string">'messages'</span>: [{<span class="hljs-string">'role'</span>: <span class="hljs-string">'user'</span>, <span class="hljs-string">'content'</span>: <span class="hljs-string">'æˆ‘æƒ³å’Œagent2è¯´è¯ï¼Œè¯·è½¬æ¥agent2'</span>}]},
    config
)

<span class="hljs-built_in">print</span>(first[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>].content) <span class="hljs-comment"># ç¬¬ä¸€è½®è¾“å‡º</span>
<span class="hljs-built_in">print</span>(<span class="hljs-string">'\n\n'</span>)

second = app.invoke(
    {<span class="hljs-string">'messages'</span>: [{<span class="hljs-string">'role'</span>: <span class="hljs-string">'user'</span>, <span class="hljs-string">'content'</span>: <span class="hljs-string">'100+100ç­‰äºå¤šå°‘'</span>}]},
    config
)
<span class="hljs-built_in">print</span>(second[<span class="hljs-string">'messages'</span>][-<span class="hljs-number">1</span>].content) <span class="hljs-comment"># ç¬¬äºŒè½®è¾“å‡º</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7cf6dbe33fc746b69406ffb8d7889346~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768621940&amp;x-signature=nTdIPe8vnbkYK5yUmoD4iud%2FpUY%3D" alt="2.png" loading="lazy"/></p>
<p>ä»¥ä¸Šæ‰€æœ‰ä»£ç å¤§å®¶å¯ä»¥å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å·Â <strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œå¹¶ç§ä¿¡:Â <strong>LangChainæ™ºèƒ½ä½“å¼€å‘</strong>å…è´¹è·å–ã€‚</p>
<p>å½“ç„¶ï¼Œä»¥ä¸Šä»…æ˜¯Â <code>langgraph-swarm</code>Â çš„ç®€å•åº”ç”¨ã€‚è¯¥åº“æä¾›äº†ä¸°å¯Œçš„è‡ªå®šä¹‰é€‰é¡¹ï¼Œå…è®¸å¼€å‘è€…æ ¹æ®ç‰¹å®šéœ€æ±‚å®šåˆ¶æ™ºèƒ½ä½“é—´çš„ç½‘ç»œäº¤äº’è¡Œä¸ºï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li><strong>è‡ªå®šä¹‰ç§»äº¤å·¥å…·</strong>ï¼šå¼€å‘è€…å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰ç§»äº¤å·¥å…·ï¼Œå¹¶èƒ½ä¿®æ”¹å…¶åç§°ã€æè¿°ã€è°ƒç”¨å‚æ•°ä»¥åŠåœ¨ç§»äº¤è¿‡ç¨‹ä¸­ä¼ é€’çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚è¿™å…è®¸å¯¹æ™ºèƒ½ä½“é—´çš„é€šä¿¡å’ŒçŠ¶æ€ä¼ é€’è¿›è¡Œç»†ç²’åº¦çš„æ§åˆ¶ã€‚</li>
<li><strong>è‡ªå®šä¹‰æ™ºèƒ½ä½“å®ç°</strong>ï¼šè™½ç„¶åº“é»˜è®¤å‡è®¾æ‰€æœ‰æ™ºèƒ½ä½“å…±äº«å•ä¸€çš„æ¶ˆæ¯æ•°æ®ç»“æ„ï¼Œä½†å¼€å‘è€…å¯ä»¥å®ç°è‡ªå®šä¹‰çš„æ™ºèƒ½ä½“ï¼Œé‡‡ç”¨ä¸åŒçš„çŠ¶æ€æ¨¡å¼æˆ–åˆ›å»ºç§æœ‰çš„æ¶ˆæ¯å†å²è®°å½•ã€‚ä¸è¿‡ï¼Œè¿™éœ€è¦ä»”ç»†ç®¡ç†æ™ºèƒ½ä½“ä¸ Swarm æ¡†æ¶ä¹‹é—´çš„çŠ¶æ€è½¬æ¢å’Œé€šä¿¡è·¯å¾„ã€‚</li>
<li><strong>å†…å­˜ç®¡ç†</strong>ï¼šæœ‰æ•ˆçš„å†…å­˜ç®¡ç†å¯¹äº Swarm æ¶æ„è‡³å…³é‡è¦ï¼Œå°¤å…¶æ˜¯åœ¨é•¿æ—¶é—´è¿è¡Œçš„å¯¹è¯ä¸­ã€‚éœ€è¦é€‰æ‹©åˆé€‚çš„è®°å¿†å­˜å‚¨åç«¯ï¼Œå¹¶å°½å¯èƒ½åˆ©ç”¨é•¿æœŸè®°å¿†æœºåˆ¶æ¥ç»´æŠ¤é•¿ä¸Šä¸‹æ–‡çš„ä¸€è‡´æ€§ã€‚</li>
</ul>
<h2 data-id="heading-5">ä¸‰ã€ LangGraphå¤šæ™ºèƒ½ä½“æ¶æ„æ€»ç»“å¯¹æ¯”</h2>
<p>è‡³æ­¤ç¬”è€…å°±å®Œæ•´ä»‹ç»äº† LangGraph ä¸­ä¸‰ç§æ ¸å¿ƒçš„å¤šæ™ºèƒ½ä½“è®¾è®¡æ¨¡å¼ï¼š<strong>ä¸»ç®¡æ¶æ„</strong>ã€<strong>åˆ†å±‚æ¶æ„</strong>ä¸<strong>ç½‘ç»œæ¶æ„</strong>ã€‚</p>
<p>ä¸»ç®¡æ¶æ„é€šè¿‡è®¾ç½®ä¸­å¤®æ§åˆ¶ç‚¹æ¥åè°ƒä¸“ä¸šæ™ºèƒ½ä½“çš„å·¥ä½œï¼›åˆ†å±‚æ¶æ„åœ¨æ­¤åŸºç¡€ä¸Šå¼•å…¥äº†æ›´é«˜å±‚çš„ä¸»ç®¡ï¼ˆå›¢é˜Ÿç»ç†ï¼‰ï¼Œé€šè¿‡æ ‘çŠ¶ç»“æ„ç®¡ç†æ›´å¹¿æ³›çš„å¤æ‚æ€§ï¼›è€Œç½‘ç»œæ¶æ„åˆ™æä¾›äº†ä¸€ç§å»ä¸­å¿ƒåŒ–ã€é«˜çµæ´»æ€§çš„æ›¿ä»£æ–¹æ¡ˆï¼Œæ›´é€‚åˆéœ€è¦åŠ¨æ€åä½œä¸æ¶Œç°è¡Œä¸ºçš„åœºæ™¯ã€‚</p>
<p>LangGraph åŠå…¶ç›¸å…³çš„ Supervisor ä¸ Swarm åº“ä¸ºè¿™äº›æ¶æ„çš„å®ç°æä¾›äº†å¼ºå¤§æ”¯æŒï¼Œæ˜¾è‘—ç®€åŒ–äº†æ„å»ºå¥å£®ã€å¯æ‰©å±•ä¸”æ˜“äºç®¡ç†çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„è¿‡ç¨‹ã€‚å–„ç”¨è¿™äº›æ¨¡å¼ä¸å·¥å…·ï¼Œå¼€å‘è€…èƒ½å¤Ÿæ„å»ºå‡ºé€šè¿‡æ™ºèƒ½ä½“é«˜æ•ˆåä½œæ¥å¤„ç†å¤æ‚ä»»åŠ¡çš„AIåº”ç”¨ã€‚</p>
<p>ä¸‰ç§æ¶æ„çš„æ ¸å¿ƒåŒºåˆ«ä¸é€‚ç”¨åœºæ™¯å¯¹æ¯”å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</p>





































<table><thead><tr><th>å¤šæ™ºèƒ½ä½“æ¶æ„</th><th>ç»“æ„</th><th>å¤æ‚æ€§ç®¡ç†</th><th>å¯æ‰©å±•æ€§</th><th>çµæ´»æ€§</th><th>ç”¨ä¾‹</th></tr></thead><tbody><tr><td>ä¸»ç®¡æ¶æ„</td><td>ä¸­å¤®ä¸»ç®¡æ™ºèƒ½ä½“ã€ä¸“ä¸šæ™ºèƒ½ä½“</td><td>é›†ä¸­æ§åˆ¶ï¼Œå¯ç®¡ç†ä¸­ç­‰å¤æ‚æ€§</td><td>ä¸­</td><td>ä½</td><td>éœ€è¦æ˜ç¡®åè°ƒã€æ˜ç¡®å®šä¹‰çš„ä¸“ä¸šåŒ–ä»»åŠ¡</td></tr><tr><td>åˆ†å±‚æ¶æ„</td><td>é¡¶å±‚ä¸»ç®¡æ™ºèƒ½ä½“ã€å›¢é˜Ÿä¸»åŠ¨æ™ºèƒ½ä½“</td><td>åˆ†å±‚æ§åˆ¶ï¼Œé™ä½æ¯ä¸ªä¸»åŠ¨æ™ºèƒ½ä½“çš„è´Ÿè½½ï¼Œé«˜åº¦æ¨¡å—åŒ–</td><td>é«˜</td><td>ä¸­</td><td>å¤æ‚ä»»åŠ¡ï¼Œæœ‰å¤§é‡æ™ºèƒ½ä½“ï¼Œéœ€è¦ç»„ç»‡ç»“æ„</td></tr><tr><td>ç½‘ç»œæ¶æ„</td><td>åˆ†æ•£å¼æ™ºèƒ½ä½“ã€å¤šå¯¹å¤šé€šä¿¡</td><td>åˆ†å¸ƒå¼æ§åˆ¶ï¼Œæ¶Œç°è¡Œä¸ºï¼Œæ›´éš¾ç®¡ç†</td><td>é«˜</td><td>é«˜</td><td>åä½œä»»åŠ¡ï¼ŒåŠ¨æ€ç¯å¢ƒã€ä¸å¯é¢„æµ‹çš„å·¥ä½œæµ</td></tr></tbody></table>
<h2 data-id="heading-6">å››ã€ æ€»ç»“</h2>
<p>æœ¬ç¯‡é‡ç‚¹åˆ†äº«äº†ç½‘ç»œæ¶æ„åŠå…¶å…¸å‹å®ç° Swarmæ¶æ„ çš„ç‰¹ç‚¹ï¼Œå¹¶ç»“åˆä»£ç ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•åˆ©ç”¨Â <code>langgraph-swarm</code>Â åº“æ„å»ºå…·å¤‡åŠ¨æ€ç§»äº¤èƒ½åŠ›çš„æ™ºèƒ½ä½“åä½œç½‘ç»œã€‚æ–‡ç« æœ€åå¯¹æ¯”äº†LangGraphå¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„ä¸‰ç§æ ¸å¿ƒè®¾è®¡æ¨¡å¼ï¼šé›†ä¸­æ§åˆ¶çš„ä¸»ç®¡æ¶æ„ã€åˆ†å±‚ç®¡ç†çš„åˆ†å±‚æ¶æ„ï¼Œä»¥åŠå»ä¸­å¿ƒåŒ–ã€é«˜çµæ´»æ€§çš„ç½‘ç»œæ¶æ„ï¼Œå¤§å®¶æ ¹æ®å®é™…éœ€æ±‚è‡ªè¡Œé€‰å–ã€‚</p>
<p><a href="https://juejin.cn/column/7526240014499495972" title="https://juejin.cn/column/7526240014499495972" target="_blank">ã€Šæ·±å…¥æµ…å‡ºLangChain&amp;LangGraph AI Agent æ™ºèƒ½ä½“å¼€å‘ã€‹</a>ä¸“æ å†…å®¹æºè‡ªç¬”è€…åœ¨å®é™…å­¦ä¹ å’Œå·¥ä½œä¸­å¯¹ LangChain ä¸ LangGraph çš„æ·±åº¦ä½¿ç”¨ç»éªŒï¼Œæ—¨åœ¨å¸®åŠ©å¤§å®¶ç³»ç»Ÿæ€§åœ°ã€é«˜æ•ˆåœ°æŒæ¡ AI Agent çš„å¼€å‘æ–¹æ³•ï¼Œåœ¨å„å¤§æŠ€æœ¯å¹³å°è·å¾—äº†ä¸å°‘å…³æ³¨ä¸æ”¯æŒã€‚ç›®å‰å·²æ›´æ–°36è®²ï¼Œæ­£åœ¨æ›´æ–°LangGraph1.0é€Ÿé€šæŒ‡å—ï¼Œå¹¶éšæ—¶è¡¥å……ç¬”è€…åœ¨å®é™…å·¥ä½œä¸­æ€»ç»“çš„æ‹“å±•çŸ¥è¯†ç‚¹ã€‚å¦‚æœå¤§å®¶æ„Ÿå…´è¶£ï¼Œæ¬¢è¿å…³æ³¨ç¬”è€…çš„æ˜é‡‘è´¦å·ä¸ä¸“æ ï¼Œä¹Ÿå¯å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å· <strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œæ¯æœŸåˆ†äº«æ¶‰åŠçš„ä»£ç å‡å¯åœ¨å…¬ä¼—å·ç§ä¿¡: <strong>LangChainæ™ºèƒ½ä½“å¼€å‘</strong>å…è´¹è·å–ã€‚</p>
<p>2026å¹´ç¬”è€…çš„å¦ä¸€å¤§é‡å¿ƒè¿˜ä¼šæ”¾åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fmp%2Fappmsgalbum%3F__biz%3DMzk3NTA2OTMxNQ%3D%3D%26action%3Dgetalbum%26album_id%3D4331818996941979657%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzk3NTA2OTMxNQ==&amp;action=getalbum&amp;album_id=4331818996941979657#wechat_redirect" ref="nofollow noopener noreferrer"><strong>å¤§æ¨¡å‹è®­ç»ƒ</strong>ä¸“æ </a>åˆ†äº«ä¸Šï¼Œå½“ç„¶ï¼Œè°ˆè®ºè®­ç»ƒæ— æ³•ç»•è¿‡ç®—åŠ›è¿™é“ç°å®çš„é—¨æ§›ã€‚æ˜‚è´µçš„GPUæ˜¯è®¸å¤šäººæ¢ç´¢æŠ€æœ¯çš„æ‹¦è·¯çŸ³ã€‚æ­£å› å¦‚æ­¤ç¬”è€…ä»Šå¹´ç‰¹æ„ä¸ä¸€äº›å¯é çš„ç®—åŠ›å¹³å°å±•å¼€äº†åˆä½œï¼Œå¸Œæœ›èƒ½ä¸ºå¤§å®¶è§£å†³ç®—åŠ›ç“¶é¢ˆã€‚å¤§å®¶å¯ä»¥é€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lab4ai.cn%2Fregister%3FagentID%3Duser-XorgKKc56U" target="_blank" title="https://www.lab4ai.cn/register?agentID=user-XorgKKc56U" ref="nofollow noopener noreferrer">www.lab4ai.cn/register?agâ€¦</a> æ³¨å†Œ<strong>Lab4aiç®—åŠ›å¹³å°</strong>ï¼Œæä¾›äº†åŒ…æ‹¬è‹±ä¼Ÿè¾¾Hç³»åˆ—åœ¨å†…çš„å¤šç§é€‰æ‹©ï¼Œæ›´æœ‰Â <strong>5å°æ—¶çš„å…è´¹ä½“éªŒé¢åº¦</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>