<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[è‡ªå®šä¹‰å°è£… vueå¤šé¡µé¡¹ç›®æ–°å¢é¡¹ç›®è„šæ‰‹æ¶]]></title>    <link>https://juejin.cn/post/7584057497206702123</link>    <guid>https://juejin.cn/post/7584057497206702123</guid>    <pubDate>2025-12-16T08:49:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584057497206702123" data-draft-id="7584007232411926534" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‡ªå®šä¹‰å°è£… vueå¤šé¡µé¡¹ç›®æ–°å¢é¡¹ç›®è„šæ‰‹æ¶"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Node.js"/> <meta itemprop="datePublished" content="2025-12-16T08:49:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ximimimi"/> <meta itemprop="url" content="https://juejin.cn/user/3350967174040238"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‡ªå®šä¹‰å°è£… vueå¤šé¡µé¡¹ç›®æ–°å¢é¡¹ç›®è„šæ‰‹æ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3350967174040238/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ximimimi
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:49:27.000Z" title="Tue Dec 16 2025 08:49:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨å¤šé¡µé¡¹ç›®ä¸­ï¼Œæœ‰æ—¶å€™æ–°å»ºé¡¹ç›®éœ€è¦åŸºäºåŸå…ˆçš„é¡¹ç›®æ‹·è´ä¸€ä»½ï¼Œè¿˜éœ€è¦åœ¨publicä¸Šæ–°å¢htmlå…¥å£ï¼Œä¿®æ”¹vue.config.jsé…ç½®....è¿™ä¸ªè¿‡ç¨‹æ¯”è¾ƒç¹çï¼Œè€Œä¸”å®¹æ˜“æ¼æ‰ï¼Œæ‰€ä»¥å°è£…äº†ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„è„šæ‰‹æ¶å·¥å…·</p>
<h2 data-id="heading-1">ä½¿ç”¨</h2>
<ul>
<li>
<p>åŸå…ˆæ–¹å¼ï¼š æ‰‹åŠ¨å¢åŠ </p>
<ul>
<li>åœ¨srcç›®å½•ä¸‹æ–°å¢é¡¹ç›®,main.tsä¸­ç›‘å¬ç‰ˆæœ¬å·çš„initVersionUpdateJsonä¼ å…¥å‚æ•°æ”¹æˆæ–°çš„æ¨¡å— ï¼ˆæ³¨æ„ï¼Œè¿™é‡Œæ‹·è´æ•´ä¸ªé¡¹ç›®åéœ€è¦æŠŠé¡¹ç›®å†…çš„å¼•ç”¨æ”¹ä¸€ä¸‹ï¼Œæ¯”å¦‚æ–°å»ºé¡¹ç›®æ˜¯B, æ‹·è´çš„æ˜¯Aé¡¹ç›®ï¼Œéœ€è¦å…¨å±€å°†@/views/A/XXX æ”¹æˆ@/views/B/XXXXï¼‰</li>
<li>åœ¨publicç›®å½•ä¸‹æ–°å¢ä¸€ä¸ªhtmlæ–‡ä»¶</li>
<li>é…ç½®vue.config.jsä¸­çš„pageså‚æ•°ï¼Œæ–°å¢ä¸€ä¸ªitem</li>
<li>åœ¨é¦–é¡µï¼ˆ<code>src/views/Home/index.vue</code>ï¼‰æ·»åŠ æ–°å…¥å£é¡¹</li>
<li>åœ¨version.jsonä¸­å¢åŠ è¯¥é¡¹ç›®ç‰ˆæœ¬</li>
</ul>
</li>
<li>
<p>ç°åœ¨ï¼š ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·</p>
<ul>
<li>å®‰è£…ï¼šnpm install hcli</li>
<li>ä½¿ç”¨ï¼šhcli create
äº¤äº’å¼æç¤ºå°†è¯¢é—®ï¼š
<ul>
<li>æ˜¯å¦åˆ›å»ºæ–°çš„é¡¹ç›®ï¼ˆconfirmï¼‰</li>
<li>é¡¹ç›®åç§°ï¼ˆnameï¼‰</li>
<li>åœ¨é¦–é¡µæ˜¾ç¤ºçš„æ ‡é¢˜ï¼ˆtitleï¼‰</li>
<li>é€‰æ‹©è¦å¤ç”¨çš„æ¨¡æ¿ï¼ˆmodelï¼Œåˆ—ä¸¾ä¾‹å¦‚ <code>Aé¡¹ç›®</code>, <code>Bé¡¹ç›®</code>....ï¼‰</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 data-id="heading-2">å¦‚ä½•å®ç°</h2>
<h4 data-id="heading-3">å‰ç½®çŸ¥è¯†</h4>
<ul>
<li>node bin å°è£…æ’ä»¶</li>
<li>nodeæ¨¡å—ï¼ˆcommander /inquirer /fs/ chalk)</li>
</ul>
<h4 data-id="heading-4">å®ç°</h4>
<ul>
<li>
<p>åˆå§‹åŒ–é¡¹ç›®npm init -yï¼Œ æ–°å»ºbin/hcli.jsæ–‡ä»¶,å†…å®¹å¦‚ä¸‹
// åœ¨package.jsonä¸­çš„é…ç½®
{
"name": "hcli",
"version": "1.0.0",
"description": "",
"main": "index.js",
"bin": {
"hcli": "bin/hcli.js"
},
"scripts": {
"publish": "npm publish",
"test": "echo "Error: no test specified" &amp;&amp; exit 1"
},
"author": "",
"license": "ISC",
"dependencies": {
"commander": "^14.0.2",
"inquirer": "^12.11.1"
}
}</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// bin/hcli.js å†…å®¹</span>
#!<span class="hljs-regexp">/usr/</span>bin/env node
 <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'hello,world'</span>)
</code></pre>
</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97374feb3aec45ec9a561d08a9a4328c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGltaW1pbWk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766479811&amp;x-signature=JYkVC3LxOYWqDoxfP1DgZ%2BRKflc%3D" alt="image.png" loading="lazy"/></p>
<p>è°ƒè¯•ï¼š åœ¨å½“å‰ç›®å½•ä¸‹npm link,åœ¨è°ƒè¯•çš„ç›®å½•ä¸‹npm link hcli; è¿™æ—¶å€™æ‰§è¡Œhcliå°±ä¼šæ‰“å°hello,world</p>
<ul>
<li>ä¸ºäº†å®ç°hcli createåŠŸèƒ½ï¼Œéœ€è¦ä½¿ç”¨commanderè¿™ä¸ªæ¨¡å—, åœ¨bin/hcli.jsæ–‡ä»¶ä¸­</li>
</ul>

<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-meta">#!/usr/bin/env node</span>
<span class="hljs-keyword">const</span> { program } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'commander'</span>)
<span class="hljs-keyword">const</span> create = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../src/create'</span>)

program.<span class="hljs-title function_">command</span>(<span class="hljs-string">'create'</span>).<span class="hljs-title function_">description</span>(<span class="hljs-string">'create a project '</span>).<span class="hljs-title function_">action</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'create project'</span>)
})

program.<span class="hljs-title function_">parse</span>(process.<span class="hljs-property">argv</span>)
</code></pre>
<ul>
<li>åœ¨hcli createæ—¶éœ€è¦å‡ºç°äº¤äº’ç•Œé¢è¿è¡Œç”¨æˆ·è¾“å…¥é€‰æ‹©ï¼Œè¿™æ—¶å€™éœ€è¦ç”¨åˆ°inquireræ¨¡å—</li>
</ul>

<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ–°å¢src/question.jsæ–‡ä»¶</span>
<span class="hljs-keyword">const</span> create = [
    {
        <span class="hljs-attr">name</span>:<span class="hljs-string">'conf'</span>,
        <span class="hljs-attr">type</span>:<span class="hljs-string">'confirm'</span>,
        <span class="hljs-attr">message</span>:<span class="hljs-string">'æ˜¯å¦åˆ›å»ºæ–°çš„é¡¹ç›®ï¼Ÿ'</span>
    },{
        <span class="hljs-attr">name</span>:<span class="hljs-string">'name'</span>,
        <span class="hljs-attr">message</span>:<span class="hljs-string">'è¯·è¾“å…¥é¡¹ç›®åç§°ï¼Ÿ'</span>,
        <span class="hljs-attr">when</span>: <span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-title class_">Boolean</span>(res.<span class="hljs-property">conf</span>)
    },{
        <span class="hljs-attr">name</span>:<span class="hljs-string">'title'</span>,
        <span class="hljs-attr">message</span>:<span class="hljs-string">'è¯·è¾“å…¥é¡¹ç›®åœ¨é¦–é¡µçš„æ ‡é¢˜ï¼Ÿ'</span>,
        <span class="hljs-attr">when</span>: <span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-title class_">Boolean</span>(res.<span class="hljs-property">conf</span>)
    },{
        <span class="hljs-attr">type</span>: <span class="hljs-string">'list'</span>,
        <span class="hljs-attr">message</span>: <span class="hljs-string">'è¯·é€‰æ‹©è¦å¤ç”¨çš„é¡¹ç›®æ¨¡ç‰ˆï¼Ÿ'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'model'</span>,
        <span class="hljs-attr">choices</span>: [<span class="hljs-string">'A'</span>,<span class="hljs-string">'B'</span>,<span class="hljs-string">'C'</span> ....],
        <span class="hljs-attr">filter</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">val</span>) {
          <span class="hljs-keyword">return</span> val.<span class="hljs-title function_">toLowerCase</span>()
        },
        <span class="hljs-attr">when</span>: <span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> <span class="hljs-title class_">Boolean</span>(res.<span class="hljs-property">conf</span>)
    }
]
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    create
}

<span class="hljs-comment">// æ–°å¢src/inquirer.jsæ–‡ä»¶</span>
<span class="hljs-keyword">const</span> inquirer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'inquirer'</span>)
<span class="hljs-keyword">const</span> questions = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./question'</span>)
<span class="hljs-keyword">const</span> prompt = inquirer.<span class="hljs-property">prompt</span> || (inquirer.<span class="hljs-property">default</span> &amp;&amp; inquirer.<span class="hljs-property">default</span>.<span class="hljs-property">prompt</span>)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">create</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-title function_">prompt</span>(questions.<span class="hljs-property">create</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> {
      <span class="hljs-title function_">resolve</span>(res)
    })
  })
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  create
}

<span class="hljs-comment">/// bin/hcli.jsæ–‡ä»¶</span>
#!<span class="hljs-regexp">/usr/</span>bin/env node
<span class="hljs-keyword">const</span> { program } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'commander'</span>)
<span class="hljs-keyword">const</span> inquirer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../src/inquirer'</span>)
<span class="hljs-keyword">const</span> create = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../src/create'</span>)

program.<span class="hljs-title function_">command</span>(<span class="hljs-string">'create'</span>).<span class="hljs-title function_">description</span>(<span class="hljs-string">'create a project '</span>).<span class="hljs-title function_">action</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'create project'</span>)
  inquirer.<span class="hljs-title function_">create</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span>=&gt;</span>{
		<span class="hljs-keyword">if</span>(res.<span class="hljs-property">conf</span>){
                <span class="hljs-comment">// todo</span>
                 <span class="hljs-title function_">create</span>(res)
		}
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'res'</span>, res)
	})
})
program.<span class="hljs-title function_">parse</span>(process.<span class="hljs-property">argv</span>)
</code></pre>
<ul>
<li>æœ€é‡è¦çš„å°±æ˜¯æ ¹æ®inquirerä¼ å…¥çš„reså‚æ•°æ¥å®ç°createåŠŸèƒ½</li>
</ul>

<pre><code class="hljs language-scss" lang="scss">const fs = <span class="hljs-built_in">require</span>('fs')
const path = <span class="hljs-built_in">require</span>('path')
const copy = <span class="hljs-built_in">require</span>('../utils/copyFile.js')

module<span class="hljs-selector-class">.exports</span> = <span class="hljs-built_in">function</span>(res){
    <span class="hljs-comment">/**
    * 1ã€åœ¨src/viewä¸‹åˆ›å»ºnameç›®å½•ï¼Œå°†modelç›®å½•ä¸‹çš„æ–‡ä»¶å¤åˆ¶è¿‡å»
    * 2ã€åœ¨publicç›®å½•ä¸‹åˆ›å»ºname.htmlæ–‡ä»¶
    * 3ã€ä¿®æ”¹vue.config.jsæ–‡ä»¶ï¼Œæ·»åŠ æ–°çš„å…¥å£
    * 4ã€åœ¨homeé¡¹ç›®ä¸­å¢åŠ å…¥å£
    * 5ã€åœ¨public/versions.jsonä¸­æ·»åŠ ç‰ˆæœ¬ä¿¡æ¯
    * **/</span>
    <span class="hljs-built_in">createBaseProject</span>(res)
    <span class="hljs-built_in">createPublicHtml</span>(res)
    <span class="hljs-built_in">updateVueConfig</span>(res)
    <span class="hljs-built_in">addHomeEnetry</span>(res)
    <span class="hljs-built_in">addVersion</span>(res)
}

function <span class="hljs-built_in">createBaseProject</span>(res){
    ....
}

function <span class="hljs-built_in">createPublicHtml</span>(res){
 ...
}

function <span class="hljs-built_in">updateVueConfig</span>(res) {
 ...
}

const addVersion = (res) =&gt; {
 ...
}
</code></pre>
<p>è¿™é‡Œcreateæ–¹æ³•éœ€è¦æ ¹æ®è‡ªå·±å®é™…é¡¹ç›®çš„éœ€æ±‚æ¥å®ç°ï½åªéœ€åˆ—å‡ºå…·ä½“æ¡†æ¶ï¼Œå…¶ä»–è®©AIå®ç°å°±å¥½äº†</p>
<p>å‚è€ƒæ–‡ç« ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.aliyun.com%2Farticle%2F1259366" target="_blank" title="https://developer.aliyun.com/article/1259366" ref="nofollow noopener noreferrer">developer.aliyun.com/article/125â€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JSæ‰§è¡Œæœºåˆ¶æ­ç§˜ï¼šä½ ä»¥ä¸ºçš„â€œé¡ºåºæ‰§è¡Œâ€ï¼Œå…¶å®æ˜¯V8å¼•æ“åœ¨èƒŒåæäº‹æƒ…ï¼]]></title>    <link>https://juejin.cn/post/7584073390694187023</link>    <guid>https://juejin.cn/post/7584073390694187023</guid>    <pubDate>2025-12-16T09:00:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584073390694187023" data-draft-id="7584071941025054735" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JSæ‰§è¡Œæœºåˆ¶æ­ç§˜ï¼šä½ ä»¥ä¸ºçš„â€œé¡ºåºæ‰§è¡Œâ€ï¼Œå…¶å®æ˜¯V8å¼•æ“åœ¨èƒŒåæäº‹æƒ…ï¼"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-16T09:00:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ETA8"/> <meta itemprop="url" content="https://juejin.cn/user/608445545328347"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JSæ‰§è¡Œæœºåˆ¶æ­ç§˜ï¼šä½ ä»¥ä¸ºçš„â€œé¡ºåºæ‰§è¡Œâ€ï¼Œå…¶å®æ˜¯V8å¼•æ“åœ¨èƒŒåæäº‹æƒ…ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/608445545328347/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ETA8
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T09:00:19.000Z" title="Tue Dec 16 2025 09:00:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš€ <strong>JSæ‰§è¡Œæœºåˆ¶æ­ç§˜ï¼šä½ ä»¥ä¸ºçš„â€œé¡ºåºæ‰§è¡Œâ€ï¼Œå…¶å®æ˜¯V8å¼•æ“åœ¨èƒŒåæäº‹æƒ…ï¼</strong></h2>
<hr/>
<p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼Ÿ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">showName</span>(); <span class="hljs-comment">// èƒ½æ‰§è¡Œï¼Ÿ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myname); <span class="hljs-comment">// undefinedï¼Ÿ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hero); <span class="hljs-comment">// ç›´æ¥æŠ¥é”™ï¼Ÿï¼Ÿï¼Ÿ</span>

<span class="hljs-keyword">var</span> myname = <span class="hljs-string">'lc'</span>;
<span class="hljs-keyword">let</span> hero = <span class="hljs-string">'é’¢é“ä¾ '</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">showName</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å‡½æ•°showNameæ‰§è¡Œäº†'</span>);
}
</code></pre>
<p>æ˜¯ä¸æ˜¯ä¸€è„¸æ‡µï¼Ÿ<br/>
ä¸ºä»€ä¹ˆ <code>showName()</code> æ²¡å®šä¹‰å°±èƒ½è°ƒç”¨ï¼Ÿ<br/>
ä¸ºä»€ä¹ˆ <code>myname</code> æ˜¯ <code>undefined</code> è€Œä¸æ˜¯æŠ¥é”™ï¼Ÿ<br/>
ä½† <code>hero</code> å´ç›´æ¥æŠ›å‡ºé”™è¯¯ï¼šâ€œCannot access 'hero' before initializationâ€ï¼Ÿ</p>
<p>åˆ«æ€¥â€”â€”è¿™å¹¶ä¸æ˜¯ JS çš„ bugï¼Œè€Œæ˜¯ <strong>V8 å¼•æ“åœ¨ç¼–è¯‘é˜¶æ®µæ‚„æ‚„åšäº†ç‚¹â€œæ‰‹è„šâ€</strong>ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ­å¼€ JavaScript æ‰§è¡Œæœºåˆ¶çš„ç¥ç§˜é¢çº±ï¼Œå¸¦ä½ èµ°è¿› <strong>Chrome æµè§ˆå™¨èƒŒåçš„â€œå¤§è„‘â€â€”â€”V8å¼•æ“</strong>ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•ä¸€æ­¥æ­¥æŠŠä½ çš„ä»£ç â€œç©å¼„äºè‚¡æŒä¹‹é—´â€çš„ï¼</p>
<hr/>
<h3 data-id="heading-1">ğŸ”¥ å¼€ç¯‡æš´å‡»ï¼šJS çœŸçš„æ˜¯â€œè¾¹è§£é‡Šè¾¹æ‰§è¡Œâ€å—ï¼Ÿ</h3>
<p>å¾ˆå¤šäººè¯´ï¼šâ€œJavaScript æ˜¯è„šæœ¬è¯­è¨€ï¼Œä¸éœ€è¦ç¼–è¯‘ï¼Œæ˜¯è¾¹è§£é‡Šè¾¹æ‰§è¡Œçš„ã€‚â€</p>
<p>âŒ é”™ï¼å¤§é”™ç‰¹é”™ï¼</p>
<p>ç°ä»£ JavaScriptï¼ˆå°¤å…¶æ˜¯ V8 å¼•æ“ï¼‰<strong>åœ¨æ‰§è¡Œå‰ä¼šå…ˆè¿›è¡Œä¸€è½®å¿«é€Ÿçš„â€œç¼–è¯‘â€</strong> â€”â€” è™½ç„¶å®ƒä¸åƒ C++ é‚£æ ·ç”Ÿæˆæœºå™¨ç ï¼Œä½†å®ƒç¡®å®ä¼šåœ¨â€œæ‰§è¡Œå‰çš„ä¸€åˆ¹é‚£â€å®Œæˆå˜é‡æå‡ã€ä½œç”¨åŸŸåˆ†æã€è¯­æ³•æ£€æŸ¥ç­‰ä¸€ç³»åˆ—å‡†å¤‡å·¥ä½œã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹ï¼Œå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ï¼š</p>
<blockquote>
<p>ğŸ’¡ <strong>ç¼–è¯‘é˜¶æ®µ + æ‰§è¡Œé˜¶æ®µ</strong></p>
</blockquote>
<p>è€Œè¿™ä¸€åˆ‡çš„èƒŒåæ¨æ‰‹ï¼Œå°±æ˜¯ <strong>è°ƒç”¨æ ˆï¼ˆCall Stackï¼‰ + æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution Contextï¼‰</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-2">ğŸ§  ä¸¾ä¸ªç”Ÿæ´»åŒ–çš„ä¾‹å­ï¼šåšä¸€é¡¿é¥­</h3>
<p>æƒ³è±¡ä½ è¦åšä¸€é¡¿é¥­ï¼š</p>
<ol>
<li>å…ˆçœ‹èœè°±ï¼ˆç›¸å½“äºè¯»ä»£ç ï¼‰</li>
<li>æŠŠè¦ç”¨çš„é£Ÿææå‰å‡†å¤‡å¥½ï¼ˆé¸¡è›‹æ‰“æ•£ã€è‘±åˆ‡å¥½â€¦ï¼‰</li>
<li>å†å¼€å§‹ç‚’èœï¼ˆçœŸæ­£æ‰§è¡Œï¼‰</li>
</ol>
<p>JavaScript çš„æ‰§è¡Œæµç¨‹ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼š</p>
<ul>
<li><strong>ç¼–è¯‘é˜¶æ®µ</strong>ï¼šæå‰æŠŠå˜é‡å’Œå‡½æ•°â€œå¤‡å¥½æ–™â€</li>
<li><strong>æ‰§è¡Œé˜¶æ®µ</strong>ï¼šæ­£å¼å¼€ç«ç‚’èœ</li>
</ul>
<p>å¦‚æœä½ è·³è¿‡â€œå¤‡æ–™â€ç›´æ¥ç‚’ï¼Œå°±ä¼šå‘ç°ï¼šâ€œå“æˆ‘è‘±è¿˜æ²¡åˆ‡ï¼â€â€”â€”è¿™å°±æ˜¯ä½ çœ‹åˆ° <code>undefined</code> æˆ–æŠ¥é”™çš„åŸå› ã€‚</p>
<hr/>
<h3 data-id="heading-3">ğŸ› ï¸ ç¬¬ä¸€æ­¥ï¼šV8 å¼•æ“çš„ä¸¤æ­¥èµ°æˆ˜ç•¥</h3>
<h4 data-id="heading-4">âœ… ç¼–è¯‘é˜¶æ®µï¼ˆCompilation Phaseï¼‰</h4>
<ul>
<li>æ£€æŸ¥è¯­æ³•é”™è¯¯</li>
<li>å˜é‡æå‡ï¼ˆHoistingï¼‰</li>
<li>å‡½æ•°ä¼˜å…ˆæå‡</li>
<li>åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution Contextï¼‰</li>
</ul>
<h4 data-id="heading-5">âœ… æ‰§è¡Œé˜¶æ®µï¼ˆExecution Phaseï¼‰</h4>
<ul>
<li>æŒ‰é¡ºåºæ‰§è¡Œå¯æ‰§è¡Œä»£ç </li>
<li>ä½¿ç”¨å·²å‡†å¤‡å¥½çš„å˜é‡å’Œå‡½æ•°</li>
</ul>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼š<strong>ç¼–è¯‘æ€»æ˜¯åœ¨æ‰§è¡Œä¹‹å‰å‘ç”Ÿ</strong>ï¼Œå“ªæ€•åªå·®ä¸€æ¯«ç§’ï¼</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">ğŸ¯ å®æˆ˜è§£æ 1ï¼š<code>var</code> å’Œ <code>let</code> çš„å‘½è¿ä¸ºä½•å¤©å·®åœ°åˆ«ï¼Ÿ</h3>
<p>æ¥çœ‹è¿™æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1.js</span>
<span class="hljs-title function_">showName</span>();           <span class="hljs-comment">// âœ… è¾“å‡ºï¼šå‡½æ•°showNameæ‰§è¡Œäº†</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myname);  <span class="hljs-comment">// â“ è¾“å‡ºï¼šundefined</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hero);    <span class="hljs-comment">// ğŸ’¥ æŠ¥é”™ï¼šCannot access 'hero' before initialization</span>

<span class="hljs-keyword">var</span> myname = <span class="hljs-string">'lc'</span>;
<span class="hljs-keyword">let</span> hero = <span class="hljs-string">'é’¢é“ä¾ '</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">showName</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å‡½æ•°showNameæ‰§è¡Œäº†'</span>);
}
</code></pre>
<h4 data-id="heading-7">ğŸ¤” ä¸ºä»€ä¹ˆç»“æœè¿™ä¹ˆå¥‡æ€ªï¼Ÿ</h4>
<p>è®©æˆ‘ä»¬æ¨¡æ‹Ÿ V8 å¼•æ“çš„â€œå†…å¿ƒç‹¬ç™½â€ï¼š</p>
<h5 data-id="heading-8">ç¼–è¯‘é˜¶æ®µ ğŸ‘‡</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// V8å¿ƒé‡Œæƒ³ï¼š</span>
<span class="hljs-keyword">var</span> myname;        <span class="hljs-comment">// æå‡ï¼Œåˆå§‹å€¼ undefined</span>
<span class="hljs-keyword">let</span> hero;          <span class="hljs-comment">// å£°æ˜äº†ï¼Œä½†ä¸èƒ½è®¿é—®ï¼è¿›å…¥â€œæš‚æ—¶æ€§æ­»åŒºâ€</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">showName</span>(<span class="hljs-params"/>) { ... } <span class="hljs-comment">// å‡½æ•°å£°æ˜ï¼Œç›´æ¥æ•´ä¸ªå‡½æ•°ä½“æŒ‚ä¸Šå»</span>
</code></pre>
<p>æ­¤æ—¶å†…å­˜é•¿è¿™æ ·ï¼š</p>





















<table><thead><tr><th>å˜é‡å</th><th>å€¼</th></tr></thead><tbody><tr><td>myname</td><td><code>undefined</code></td></tr><tr><td>hero</td><td><code>&lt;uninitialized&gt;</code></td></tr><tr><td>showName</td><td><code>function showName(){}</code></td></tr></tbody></table>
<h5 data-id="heading-9">æ‰§è¡Œé˜¶æ®µ ğŸ‘‡</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">showName</span>();           <span class="hljs-comment">// âœ… æ‰¾åˆ°äº†å‡½æ•°ï¼Œæ‰§è¡ŒæˆåŠŸ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myname);  <span class="hljs-comment">// myname è¿˜æ²¡èµ‹å€¼ï¼Œæ‰€ä»¥æ˜¯ undefined</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hero);    <span class="hljs-comment">// âŒ hero å¤„äºâ€œæš‚æ—¶æ€§æ­»åŒºâ€ï¼Œä¸å…è®¸è®¿é—® â†’ æŠ¥é”™ï¼</span>
</code></pre>
<blockquote>
<p>ğŸ’¡ å°è´´å£«ï¼š<code>let/const</code> ä¸å…è®¸é‡å¤å£°æ˜ï¼Œä¸”å­˜åœ¨ <strong>æš‚æ—¶æ€§æ­»åŒºï¼ˆTemporal Dead Zone, TDZï¼‰</strong>ï¼Œå³ä»è¿›å…¥ä½œç”¨åŸŸåˆ°è¢«èµ‹å€¼å‰éƒ½ä¸èƒ½è®¿é—®ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-10">ğŸ”„ å®æˆ˜è§£æ 2ï¼šå‡½æ•°æå‡æ¯”å˜é‡æ›´ç‰›ï¼Ÿ</h3>
<p>å†çœ‹ä¸€ä¸ªç»å…¸æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 2.js</span>
<span class="hljs-title function_">showName</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myName);

<span class="hljs-keyword">var</span> myName = <span class="hljs-string">'lc'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">showName</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å‡½æ•°showNameæ‰§è¡Œäº†'</span>);
}
</code></pre>
<p>ä½ ä»¥ä¸ºçš„æ‰§è¡Œé¡ºåºæ˜¯ï¼š</p>
<ol>
<li>è°ƒç”¨ <code>showName</code></li>
<li>æ‰“å° <code>myName</code></li>
<li>ç»™ <code>myName</code> èµ‹å€¼</li>
</ol>
<p>ä½†å®é™…ä¸Šï¼ŒV8 ç¼–è¯‘åæ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç¼–è¯‘é˜¶æ®µåçš„æ ·å­ï¼ˆä¼ªä»£ç ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">showName</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å‡½æ•°showNameæ‰§è¡Œäº†'</span>);
}
<span class="hljs-keyword">var</span> myName = <span class="hljs-literal">undefined</span>;

<span class="hljs-comment">// æ‰§è¡Œé˜¶æ®µ</span>
<span class="hljs-title function_">showName</span>();         <span class="hljs-comment">// âœ… æˆåŠŸ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myName); <span class="hljs-comment">// â“ undefinedï¼ˆè¿˜æ²¡èµ‹å€¼ï¼‰</span>
myName = <span class="hljs-string">'lc'</span>;       <span class="hljs-comment">// åé¢æ‰èµ‹å€¼</span>
</code></pre>
<p>ğŸ¯ ç»“è®ºï¼š<strong>å‡½æ•°å£°æ˜ &gt; var å˜é‡æå‡</strong><br/>
å‡½æ•°ä¼šè¢«å®Œæ•´æå‡åˆ°æœ€ä¸Šé¢ï¼Œ<code>var</code> åªæ˜¯å£°æ˜æå‡ï¼Œèµ‹å€¼ä»ç•™åœ¨åŸåœ°ã€‚</p>
<hr/>
<h3 data-id="heading-11">ğŸ”¥ é«˜èƒ½é¢„è­¦ï¼šå‡½æ•°å†…éƒ¨ä¹Ÿèƒ½â€œå®«æ–—â€ï¼Ÿ</h3>
<p>æ¥çœ‹è¿™æ®µâ€œå†…è®§ä¸¥é‡â€çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 3.js</span>
<span class="hljs-keyword">var</span> a = <span class="hljs-number">1</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">a</span>) {
  <span class="hljs-keyword">var</span> a = <span class="hljs-number">2</span>;
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params"/>) {}
  <span class="hljs-keyword">var</span> b = a;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a);
}

<span class="hljs-title function_">fn</span>(<span class="hljs-number">3</span>);
</code></pre>
<p>è¾“å‡ºä»€ä¹ˆï¼ŸğŸ¤”</p>
<p>A. <code>2</code><br/>
B. <code>3</code><br/>
C. <code>function a(){}</code><br/>
D. æŠ¥é”™</p>
<p>æ­æ™“ç­”æ¡ˆï¼šğŸ‘‰ <strong>A. 2</strong></p>
<h4 data-id="heading-12">ğŸ•µï¸â€â™‚ï¸ è®©æˆ‘ä»¬è¿˜åŸ V8 çš„ç¼–è¯‘ç°åœºï¼š</h4>
<h5 data-id="heading-13">ç¼–è¯‘é˜¶æ®µï¼ˆè¿›å…¥ fn å‡½æ•°æ—¶ï¼‰</h5>
<p>å‚æ•° <code>a</code> å·²ç»ä¼ å…¥å®å‚ <code>3</code> â†’ <code>a = 3</code></p>
<p>ç„¶åå¼€å§‹æ‰«æå†…éƒ¨å£°æ˜ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params"/>) {}  <span class="hljs-comment">// å‡½æ•°å£°æ˜ï¼Œä¼˜å…ˆçº§æœ€é«˜ â†’ a = function a(){}</span>
<span class="hljs-keyword">var</span> a;           <span class="hljs-comment">// var å£°æ˜ï¼Œå¿½ç•¥ï¼ˆå·²æœ‰ aï¼‰</span>
<span class="hljs-keyword">var</span> b;           <span class="hljs-comment">// b = undefined</span>
</code></pre>
<p>âš ï¸ å…³é”®æ¥äº†ï¼šè™½ç„¶å‡½æ•°å£°æ˜ä¼˜å…ˆï¼Œä½† <strong>å‡½æ•°å†…éƒ¨å¦‚æœæœ‰åŒåå˜é‡æˆ–å‚æ•°ï¼Œä¼šè¦†ç›–å‡½æ•°å</strong>ï¼</p>
<p>æ¥ç€æ‰§è¡Œé˜¶æ®µï¼š</p>
<pre><code class="hljs language-js" lang="js">a = <span class="hljs-number">2</span>;      <span class="hljs-comment">// æ˜¾å¼èµ‹å€¼ï¼Œè¦†ç›–ä¹‹å‰çš„ function a(){}</span>
b = a;      <span class="hljs-comment">// b = 2</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a); <span class="hljs-comment">// æ‰“å° 2</span>
</code></pre>
<p>ğŸ¯ æ‰€ä»¥æœ€ç»ˆè¾“å‡ºï¼š<code>2</code></p>
<blockquote>
<p>ğŸ§¨ æ€»ç»“ï¼š<strong>å‡½æ•°å£°æ˜è™½å¼ºï¼Œä½†åœ¨æ‰§è¡Œé˜¶æ®µçš„èµ‹å€¼æ“ä½œé¢å‰ï¼Œä¹Ÿä¼šè¢«æ— æƒ…è¦†ç›–ï¼</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-14">ğŸš« <code>var</code> å’Œ <code>let</code> çš„â€œå©šå§»è§‚â€å®Œå…¨ä¸åŒï¼</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 4.js</span>
<span class="hljs-keyword">var</span> a = <span class="hljs-number">1</span>;
<span class="hljs-keyword">var</span> a = <span class="hljs-number">2</span>; <span class="hljs-comment">// âœ… åˆæ³•ï¼var å…è®¸é‡å¤å£°æ˜</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a); <span class="hljs-comment">// 2</span>

<span class="hljs-keyword">let</span> b = <span class="hljs-number">3</span>;
<span class="hljs-keyword">let</span> b = <span class="hljs-number">4</span>; <span class="hljs-comment">// âŒ æŠ¥é”™ï¼SyntaxError: Identifier 'b' has already been declared</span>
</code></pre>
<p>ğŸ’¡ ç±»æ¯”ä¸€ä¸‹ï¼š</p>
<ul>
<li><code>var</code> å°±åƒâ€œå¼€æ”¾å¼å©šå§»â€ï¼šä½ å¯ä»¥å¤šæ¬¡ declareï¼Œåªè¦ä¸é—¹å¤§å°±è¡Œã€‚</li>
<li><code>let/const</code> åˆ™æ˜¯â€œä¸€å¤«ä¸€å¦»åˆ¶â€ï¼šä¸€æ—¦å£°æ˜ï¼Œç»ˆèº«ç»‘å®šï¼Œé‡å¤å°±æ˜¯è¿æ³•ï¼</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç°ä»£å¼€å‘æ¨èä½¿ç”¨ <code>let/const</code>ï¼Œé¿å…æ„å¤–è¦†ç›–ã€‚</p>
<hr/>
<h3 data-id="heading-15">ğŸ’£ æœ€è‡´å‘½é™·é˜±ï¼šå‡½æ•°è¡¨è¾¾å¼ä¸ä¼šæå‡ï¼</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 5.js</span>
<span class="hljs-title function_">func</span>(); <span class="hljs-comment">// âŒ æŠ¥é”™ï¼Cannot access 'func' before initialization</span>

<span class="hljs-keyword">let</span> <span class="hljs-title function_">func</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">123</span>);
};
</code></pre>
<p>å¾ˆå¤šäººä»¥ä¸ºï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> <span class="hljs-title function_">func</span> = (<span class="hljs-params"/>) =&gt; {}
</code></pre>
<p>ä¹Ÿèƒ½æå‡ï¼Ÿé”™ï¼</p>
<p>ğŸ“Œ <strong>åªæœ‰å‡½æ•°å£°æ˜ä¼šå®Œæ•´æå‡ï¼Œå‡½æ•°è¡¨è¾¾å¼ä¸ä¼šï¼</strong></p>
<p>ä¸Šé¢è¿™æ®µä»£ç åœ¨ç¼–è¯‘é˜¶æ®µæ˜¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> func; <span class="hljs-comment">// å£°æ˜äº†ï¼Œä½†å¤„äº TDZï¼ˆæš‚æ—¶æ€§æ­»åŒºï¼‰</span>
</code></pre>
<p>æ‰§è¡Œåˆ° <code>func()</code> æ—¶ï¼Œ<code>func</code> è¿˜æ²¡åˆå§‹åŒ– â†’ ç›´æ¥çˆ†ç‚¸ ğŸ’¥</p>
<blockquote>
<p>âœ… æ­£ç¡®å†™æ³•åº”è¯¥æ˜¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> <span class="hljs-title function_">func</span> = (<span class="hljs-params"/>) =&gt; { ... };
<span class="hljs-title function_">func</span>(); <span class="hljs-comment">// æ”¾åœ¨åé¢è°ƒç”¨</span>
</code></pre>
</blockquote>
<hr/>
<h3 data-id="heading-16">ğŸ§© æ ¸å¿ƒæœºåˆ¶æ­ç§˜ï¼šæ‰§è¡Œä¸Šä¸‹æ–‡ä¸è°ƒç”¨æ ˆ</h3>
<p>JavaScript æ˜¯å¦‚ä½•ç®¡ç†è¿™äº›å¤æ‚çš„ä½œç”¨åŸŸå’Œæå‡è¡Œä¸ºçš„ï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯ï¼š<strong>æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆExecution Contextï¼‰ + è°ƒç”¨æ ˆï¼ˆCall Stackï¼‰</strong></p>
<h4 data-id="heading-17">ğŸ§± æ¯æ¬¡å‡½æ•°æ‰§è¡Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡</h4>
<p>æ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡åŒ…å«ä¸¤ä¸ªé‡è¦éƒ¨åˆ†ï¼š</p>

















<table><thead><tr><th>ç»„ä»¶</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>å˜é‡ç¯å¢ƒï¼ˆVariable Environmentï¼‰</strong></td><td>å­˜æ”¾ <code>var</code> å£°æ˜çš„å˜é‡</td></tr><tr><td><strong>è¯æ³•ç¯å¢ƒï¼ˆLexical Environmentï¼‰</strong></td><td>å­˜æ”¾ <code>let/const</code> å£°æ˜çš„å˜é‡</td></tr></tbody></table>
<blockquote>
<p>ğŸ“Œ å…¨å±€ä¸Šä¸‹æ–‡æœ€å…ˆå…¥æ ˆï¼Œå‡½æ•°è°ƒç”¨æ—¶æ–°ä¸Šä¸‹æ–‡å‹å…¥æ ˆé¡¶ï¼Œæ‰§è¡Œå®Œåå¼¹å‡ºå¹¶é”€æ¯ã€‚</p>
</blockquote>
<h4 data-id="heading-18">ğŸ§± è°ƒç”¨æ ˆçš„å·¥ä½œæ–¹å¼ï¼ˆLIFOï¼šåè¿›å…ˆå‡ºï¼‰</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">a</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">b</span>();
}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">b</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">c</span>();
}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">c</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æˆ‘åœ¨æ ˆé¡¶ï¼'</span>);
}
<span class="hljs-title function_">a</span>(); <span class="hljs-comment">// a â†’ b â†’ c å…¥æ ˆï¼Œc å…ˆæ‰§è¡Œå®Œï¼Œä¾æ¬¡å‡ºæ ˆ</span>
</code></pre>
<p>å°±åƒå ç›˜å­ï¼šæœ€åæ”¾ä¸Šçš„æœ€å…ˆæ‹¿èµ°ã€‚</p>
<hr/>
<h3 data-id="heading-19">ğŸ§  æ€»ç»“ï¼šä¸€å¼ å›¾çœ‹æ‡‚ JS æ‰§è¡Œæœºåˆ¶</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c58c00e8d1734246b00c8fb07ac49c2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRVRBOA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766480418&amp;x-signature=BFdbvntxKGP6lyF0EVIamwbmEC8%3D" alt="Snipaste_2025-12-16_16-58-13.jpg" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6b67974727e488d944bde215e84a8f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRVRBOA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766480418&amp;x-signature=w%2FTCgVVnTCy6Il2OBryHfjA4K2A%3D" alt="Snipaste_2025-12-16_16-48-07.jpg" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-20">âœ… ç»ˆæå£è¯€ï¼šèƒŒä¸‹è¿™å‡ å¥ï¼Œé¢è¯•ä¸å†æ…Œï¼</h3>
<blockquote>
<p>ğŸ¯ <strong>â€œå‡½æ•°ä¼˜å…ˆï¼Œvar æå‡ï¼Œlet æ­»åŒºï¼Œè¡¨è¾¾å¼ä¸å‡ï¼Œæ ˆç®¡æ‰§è¡Œã€‚â€</strong></p>
</blockquote>






























<table><thead><tr><th>ç‰¹æ€§</th><th>var</th><th>let/const</th></tr></thead><tbody><tr><td>æ˜¯å¦æå‡</td><td>æ˜¯ï¼ˆå£°æ˜ï¼‰</td><td>å¦ï¼ˆTDZï¼‰</td></tr><tr><td>æ˜¯å¦å¯é‡å¤å£°æ˜</td><td>æ˜¯</td><td>å¦</td></tr><tr><td>åˆå§‹åŒ–æ—¶æœº</td><td>undefined</td><td>å¿…é¡»æ‰‹åŠ¨èµ‹å€¼</td></tr><tr><td>æå‡ä¼˜å…ˆçº§</td><td>ä½äºå‡½æ•°</td><td>ä¸å‚ä¸æå‡</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-21">ğŸ å½©è›‹ï¼šå¦‚ä½•é¿å…æå‡å¸¦æ¥çš„å‘ï¼Ÿ</h3>
<h4 data-id="heading-22">âœ”ï¸ æœ€ä½³å®è·µå»ºè®®ï¼š</h4>
<ol>
<li><strong>ä¸€å¾‹ä½¿ç”¨ <code>let/const</code></strong>ï¼Œæœç» <code>var</code></li>
<li><strong>å‡½æ•°å£°æ˜æ”¾åœ¨æ–‡ä»¶é¡¶éƒ¨</strong></li>
<li><strong>ä¸è¦åœ¨å‡½æ•°å†…æ··ç”¨åŒåå‡½æ•°ä¸å˜é‡</strong></li>
<li><strong>å˜é‡å£°æ˜å°½é‡é è¿‘ä½¿ç”¨ä½ç½®</strong></li>
<li><strong>å¼€å¯ ESLintï¼Œè‡ªåŠ¨æ£€æµ‹ TDZ é”™è¯¯</strong></li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// âœ… æ¨èå†™æ³•</span>
<span class="hljs-keyword">let</span> userName = <span class="hljs-string">'lc'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">showName</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(userName);
}

<span class="hljs-title function_">showName</span>();
</code></pre>
<hr/>
<h3 data-id="heading-23">ğŸŒŸ å†™åœ¨æœ€åï¼šä½ å†™çš„ä¸æ˜¯ä»£ç ï¼Œæ˜¯ V8 çš„å‰§æœ¬</h3>
<p>JavaScript è¡¨é¢ä¸Šçœ‹ä¼¼éšæ„ã€çµæ´»ï¼Œå®åˆ™æ¯ä¸€æ­¥éƒ½åœ¨ V8 å¼•æ“çš„ç²¾å¯†è®¡ç®—ä¹‹ä¸­ã€‚</p>
<p>ç†è§£æ‰§è¡Œæœºåˆ¶ï¼Œä¸åªæ˜¯ä¸ºäº†åº”ä»˜é¢è¯•ï¼Œæ›´æ˜¯ä¸ºäº†å†™å‡ºæ›´ç¨³å®šã€æ›´å¯é¢„æµ‹çš„ä»£ç ã€‚</p>
<p>å½“ä½ ä¸‹æ¬¡çœ‹åˆ° <code>undefined</code> æˆ–è«åå…¶å¦™çš„æŠ¥é”™æ—¶ï¼Œä¸è¦å†éª‚â€œJS æ˜¯ä¸ªå¥‡è‘©è¯­è¨€â€äº†ã€‚</p>
<p>ä½ åº”è¯¥å¾®ç¬‘ç€è¯´ï¼š</p>
<blockquote>
<p>â€œå“¦ï½åŸæ¥æ˜¯ä½ ï¼ŒV8ï¼Œåœ¨èƒŒåå·å·æäº‹æƒ…å•Šã€‚â€</p>
</blockquote>
<hr/>
<h3 data-id="heading-24">ğŸ”– å…³é”®è¯æ ‡ç­¾</h3>
<p>#JavaScript #JSæ‰§è¡Œæœºåˆ¶ #å˜é‡æå‡ #Hoisting #V8å¼•æ“ #æ‰§è¡Œä¸Šä¸‹æ–‡ #è°ƒç”¨æ ˆ #letå’ŒvaråŒºåˆ« #å‰ç«¯é¢è¯• #æ˜é‡‘çƒ­é—¨</p>
<hr/>
<p>ğŸ“Œ <strong>å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Ÿè®°å¾—ç‚¹èµ + æ”¶è— + åˆ†äº«ç»™åŒäº‹ï¼è®©æ›´å¤šäººå°‘èµ°å¼¯è·¯ï¼</strong><br/>
å…³æ³¨æˆ‘ï¼Œæ¯å‘¨ä¸€ç¯‡æ·±åº¦å‰ç«¯æºç†è§£æï¼Œå¸¦ä½ ä»é’é“œèµ°å‘ç‹è€… ğŸ’ª</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[VonaJSæ˜¯å¦‚ä½•åšåˆ°æ–‡ä»¶çº§åˆ«ç²¾ç¡®HMR(çƒ­æ›´æ–°)çš„ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7584059298696921129</link>    <guid>https://juejin.cn/post/7584059298696921129</guid>    <pubDate>2025-12-16T09:04:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584059298696921129" data-draft-id="7584057497206194219" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="VonaJSæ˜¯å¦‚ä½•åšåˆ°æ–‡ä»¶çº§åˆ«ç²¾ç¡®HMR(çƒ­æ›´æ–°)çš„ï¼Ÿ"/> <meta itemprop="keywords" content="TypeScript,Node.js,NestJS"/> <meta itemprop="datePublished" content="2025-12-16T09:04:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¿®æ°´å¤§å”"/> <meta itemprop="url" content="https://juejin.cn/user/1119781972622208"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            VonaJSæ˜¯å¦‚ä½•åšåˆ°æ–‡ä»¶çº§åˆ«ç²¾ç¡®HMR(çƒ­æ›´æ–°)çš„ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1119781972622208/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¿®æ°´å¤§å”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T09:04:32.000Z" title="Tue Dec 16 2025 09:04:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">NestJSï¼šé¡¹ç›®çº§åˆ«HMR</h2>
<p>å¦‚æœä½¿ç”¨è¿‡NestJSï¼Œå°±ä¼šçŸ¥é“NestJSæ˜¯åŸºäºæ•´ä¸ªé¡¹ç›®å®ç°HMRï¼ˆçƒ­æ›´æ–°ï¼‰çš„ã€‚å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼šå½“ä¸€ä¸ªæºç æ–‡ä»¶å˜æ›´æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†æ–‡ä»¶é‡æ–°ç¼–è¯‘è¾“å‡ºåˆ°distç›®å½•ï¼Œç„¶åé‡å¯Appã€‚å½“é¡¹ç›®éå¸¸å¤§æ—¶ï¼Œè¿™æ ·çš„HMRæœºåˆ¶å°±ä¼šéå¸¸æ…¢ã€‚</p>
<h2 data-id="heading-1">VonaJSï¼šæ–‡ä»¶çº§åˆ«HMR</h2>
<p>è€ŒVonaJSå°±å®ç°äº†åŸºäºå•æ–‡ä»¶çš„ç²¾ç¡®HMRï¼ˆçƒ­æ›´æ–°ï¼‰ã€‚å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼šå½“æºç æ–‡ä»¶å˜æ›´æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é‡æ–°å¯¼å…¥è¯¥æ–‡ä»¶ï¼Œå¹¶æ›¿æ¢IOCå®¹å™¨ä¸­æ³¨å†Œçš„å®ä¾‹ã€‚æ—¢æ²¡æœ‰é‡æ–°ç¼–è¯‘çš„ç¯èŠ‚ï¼Œä¹Ÿä¸éœ€è¦é‡å¯Appã€‚å¦‚æœä½ è¦å¼€å‘å¤§å‹é¡¹ç›®ï¼Œæ²¡æœ‰æ¯”è¿™ä¸ªæ›´çˆ½çš„HMRæœºåˆ¶äº†ã€‚</p>
<p>ä¸‹é¢å…ˆç®€è¦çœ‹çœ‹VonaJS HMRçš„æ•ˆæœï¼Œå†ä»‹ç»æ˜¯å¦‚ä½•å®ç°çš„ï¼š</p>
<h2 data-id="heading-2">æ–‡ä»¶çº§åˆ«HMRæ•ˆæœå±•ç¤º</h2>
<h3 data-id="heading-3">1. ä¿®æ”¹Serviceæ–‡ä»¶</h3>
<p>å½“æˆ‘ä»¬ä¿®æ”¹æŸä¸ªServiceæ–‡ä»¶å¹¶ä¿å­˜ä¹‹åï¼Œæ§åˆ¶å°æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4055072902884aaeb3710824c94040df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r-u5rC05aSn5Y-U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766480671&amp;x-signature=TmJEyfG1uLibwAxZAXAE7QDZm6w%3D" alt="hmr_1.png" loading="lazy"/></p>
<h3 data-id="heading-4">2. ä¿®æ”¹Controlleræ–‡ä»¶</h3>
<p>å½“æˆ‘ä»¬ä¿®æ”¹æŸä¸ªControlleræ–‡ä»¶å¹¶ä¿å­˜ä¹‹åï¼Œæ§åˆ¶å°æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0911e3ae1f8b41da8100c48c8310ebc0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r-u5rC05aSn5Y-U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766480671&amp;x-signature=4%2F1qSMd0Y5ik4ozg6nXLx2hY0VI%3D" alt="hmr-2.png" loading="lazy"/></p>
<h3 data-id="heading-5">3. ä¿®æ”¹Middlewareæ–‡ä»¶</h3>
<p>å½“æˆ‘ä»¬ä¿®æ”¹æŸä¸ªMiddlewareæ–‡ä»¶å¹¶ä¿å­˜ä¹‹åï¼Œæ§åˆ¶å°æ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b96f32e55ba46c6ad129f3a33916076~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r-u5rC05aSn5Y-U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766480671&amp;x-signature=TlInyPQPnPfIpQsaL3uBq%2BWs4KI%3D" alt="hmr-3.png" loading="lazy"/></p>
<h2 data-id="heading-6">æ–‡ä»¶çº§åˆ«HMRåŸç†åˆ†æ</h2>
<h3 data-id="heading-7">1. åˆ†å¸ƒå¼åœºæ™¯ä¸­å¦‚ä½•å®ç°æ–‡ä»¶Watch</h3>
<p>VonaJSåŸç”Ÿæ”¯æŒåˆ†å¸ƒå¼æ¶æ„ï¼Œå› æ­¤åœ¨æ‰§è¡Œ<code>npm run dev</code>æ—¶ä¹Ÿæ˜¯é»˜è®¤å¯åŠ¨ä¸¤ä¸ªWorkersï¼Œä¾¿äºå°½æ—©æ’æŸ¥åˆ†å¸ƒå¼åœºæ™¯ä¸‹å¯èƒ½é‡åˆ°çš„é—®é¢˜ã€‚é‚£ä¹ˆï¼Œåœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æŒ‘é€‰å‡ºä¸€ä¸ªWorkerï¼Œç”¨äºç›‘å¬æ–‡ä»¶çš„å˜æ›´äº‹ä»¶ã€‚</p>
<p>VonaJSæä¾›äº†<code>Election</code>æœºåˆ¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Monkey</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">appStarted</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> scope = <span class="hljs-variable language_">this</span>.<span class="hljs-property">app</span>.<span class="hljs-title function_">scope</span>(__ThisModule__);
    scope.<span class="hljs-property">election</span>.<span class="hljs-title function_">obtain</span>(<span class="hljs-string">'hmr'</span>, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">await</span> scope.<span class="hljs-property">service</span>.<span class="hljs-property">watch</span>.<span class="hljs-title function_">start</span>();
    }, <span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">await</span> scope.<span class="hljs-property">service</span>.<span class="hljs-property">watch</span>.<span class="hljs-title function_">stop</span>();
    });
  }
}
</code></pre>
<ol>
<li>å“åº”ç³»ç»Ÿå¯åŠ¨äº‹ä»¶ï¼Œé€šè¿‡<code>scope.election.obtain</code>ç«äº‰æ‰€æœ‰æƒ</li>
<li>å½“å–å¾—æ‰€æœ‰æƒæ—¶ï¼Œæ‰§è¡Œ<code>scope.service.watch.start</code>ï¼Œå®ç°æ–‡ä»¶ç›‘å¬</li>
<li>å½“é‡Šæ”¾æ‰€æœ‰æƒæ—¶ï¼Œæ‰§è¡Œ<code>scope.service.watch.stop</code>ï¼Œåœæ­¢æ–‡ä»¶ç›‘å¬</li>
</ol>
<h3 data-id="heading-8">2. ESMæ–‡ä»¶é‡æ–°åŠ è½½</h3>
<p>å½“ç›‘å¬åˆ°æºç æ–‡ä»¶å˜æ›´ä¹‹åï¼Œéœ€è¦é‡æ–°åŠ è½½ã€‚æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªæ–‡ä»¶<code>import</code>ä¹‹åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç¼“å­˜ï¼Œå¦‚æœå†æ¬¡importï¼Œç³»ç»Ÿä¼šç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼Œä¸ä¼šé‡æ–°åŠ è½½ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬æ˜¯å¦å¯ä»¥å¼ºåˆ¶æ¸…ç†ç³»ç»Ÿç¼“å­˜å‘¢ï¼Ÿåœ¨CJSä¸­æ˜¯å¯ä»¥çš„ï¼Œä½†åœ¨ESMä¸­ä¸è¡Œã€‚</p>
<p>NestJSå¼€å‘æ—¶é—´æ¯”è¾ƒæ—©ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ä»ç„¶ä½¿ç”¨çš„æ˜¯CJSæ¨¡å—ã€‚åœ¨NestJSä¸­ï¼Œæºç é‡‡ç”¨çš„æ˜¯ESMè¯­æ³•ï¼Œä½†æ˜¯å®é™…è¿è¡Œæ—¶ï¼Œéœ€è¦å…ˆç¼–è¯‘æˆCJSæ¨¡å—ï¼Œç„¶åå†é€šè¿‡<code>require</code>åŠ è½½æ¨¡å—ã€‚</p>
<p>è€ŒVonaJSæ˜¯å…¨æ–°è®¾è®¡çš„æ¡†æ¶ï¼Œå…¨éƒ¨ä½¿ç”¨äº†ESMæ¨¡å—ã€‚è™½ç„¶ä¸èƒ½åˆ é™¤ç³»ç»Ÿç¼“å­˜ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡å˜æ›´æ–‡ä»¶åçš„æ–¹å¼æ¥å®ç°é‡æ–°åŠ è½½ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> file=<span class="hljs-string">'/path/to/service.ts'</span>;
<span class="hljs-keyword">const</span> fileUrl = <span class="hljs-string">`<span class="hljs-subst">${file}</span>?<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>`</span>;
<span class="hljs-keyword">const</span> fileModule = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(fileUrl);
</code></pre>
<h3 data-id="heading-9">3. æ¸…ç†è¿è¡ŒçŠ¶æ€å€¼</h3>
<p>å½“æ–‡ä»¶é‡æ–°åŠ è½½ä¹‹åï¼Œå°±å¯ä»¥æ›¿æ¢IOCå®¹å™¨ä¸­æ³¨å†Œçš„å®ä¾‹ã€‚é™¤æ­¤ä¹‹å¤–è¿˜æœ‰å¯èƒ½éœ€è¦æ¸…ç†ä¸€äº›è¿è¡ŒçŠ¶æ€å€¼ã€‚è¿™å°±éœ€è¦å…·ä½“é—®é¢˜å…·ä½“åˆ†æã€‚æ¯”å¦‚ï¼ŒServeræ–‡ä»¶ä¸éœ€æ¸…ç†è¿è¡ŒçŠ¶æ€å€¼ã€‚ä½†æ˜¯ï¼ŒMiddlewareå°±éœ€è¦æ¸…ç†è¿è¡ŒçŠ¶æ€ï¼Œä»è€Œè®©æ–°çš„Middlewareç”Ÿæ•ˆ</p>
<p>ä¸‹é¢ä»¥ç³»ç»Ÿä¸­é—´ä»¶ä¸ºä¾‹ï¼Œæ¼”ç¤ºåŸºæœ¬æµç¨‹ï¼š</p>
<ol>
<li>å½“ç³»ç»Ÿå¯åŠ¨æ—¶ï¼Œéœ€è¦æ³¨å…¥ç³»ç»Ÿä¸­é—´ä»¶</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-variable language_">this</span>.<span class="hljs-property">app</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">ctx, next</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">_composeMiddlewareSystems</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">app</span>)(ctx, next);
});
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">_composeMiddlewareSystems</span>(<span class="hljs-params">app: VonaApplication</span>) {
  <span class="hljs-comment">// compose</span>
  <span class="hljs-keyword">if</span> (!app.<span class="hljs-property">meta</span>[<span class="hljs-title class_">SymbolCacheComposeMiddlewareSystems</span>]) {
    <span class="hljs-keyword">const</span> middlewares = app.<span class="hljs-property">bean</span>.<span class="hljs-property">onion</span>.<span class="hljs-property">middlewareSystem</span>.<span class="hljs-title function_">getOnionsEnabledWrapped</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">_wrapOnion</span>(app, item);
    });
    app.<span class="hljs-property">meta</span>[<span class="hljs-title class_">SymbolCacheComposeMiddlewareSystems</span>] = <span class="hljs-title function_">compose</span>(middlewares);
  }
  <span class="hljs-keyword">return</span> app.<span class="hljs-property">meta</span>[<span class="hljs-title class_">SymbolCacheComposeMiddlewareSystems</span>];
}
</code></pre>
<p><code>_composeMiddlewareSystems</code>æ–¹æ³•å°†æ”¶é›†æ‰€æœ‰ç³»ç»Ÿä¸­é—´ä»¶ï¼Œå¹¶<code>compose</code>æˆä¸€ä¸ªå‡½æ•°ï¼Œç„¶åç¼“å­˜åˆ°<code>app.meta[SymbolCacheComposeMiddlewareSystems]</code>ä¸­</p>
<ol start="2">
<li>æ¸…ç†è¿è¡ŒçŠ¶æ€</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Hmr</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HmrMiddlewareSystem</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">BeanBase</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IHmrReload</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">reload</span>(<span class="hljs-params">_beanOptions: IDecoratorBeanOptionsBase</span>) {
    <span class="hljs-keyword">delete</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">app</span>.<span class="hljs-property">meta</span>[<span class="hljs-title class_">SymbolCacheComposeMiddlewareSystems</span>];
  }
}
</code></pre>
<p>å½“æŸä¸ªç³»ç»Ÿä¸­é—´ä»¶é‡æ–°åŠ è½½åï¼Œå°±ä¼šè‡ªåŠ¨æ‰§è¡Œè¯¥Classçš„<code>reload</code>æ–¹æ³•ï¼Œåˆ é™¤ç¼“å­˜<code>app.meta[SymbolCacheComposeMiddlewareSystems]</code>ã€‚ä»è€Œè®©<code>_composeMiddlewareSystems</code>æ–¹æ³•é‡æ–°æ”¶é›†æ‰€æœ‰ç³»ç»Ÿä¸­é—´ä»¶ï¼Œ<code>compose</code>å‡ºä¸€ä¸ªæ–°çš„å‡½æ•°</p>
<h3 data-id="heading-10">4. æ”¯æŒæ›´å¤šåœºæ™¯</h3>
<p>å¦‚ä¸Šæ‰€è¿°ï¼Œä¸åŒåœºæ™¯çš„æ–‡ä»¶ï¼Œéœ€è¦æ ¹æ®ä¸åŒçš„è¿è¡Œæœºåˆ¶ï¼Œæä¾›ä¸åŒçš„æ¸…ç†é€»è¾‘ï¼Œç¡®ä¿æ–‡ä»¶çº§åˆ«çš„HMRå¯ä»¥æ­£å¸¸è¿è¡Œ</p>
<p>VonaJSæ”¯æŒå¤§é‡çš„åœºæ™¯å¼€å‘ï¼Œæ¸…å•å¦‚ä¸‹ï¼š</p>
<ol>
<li>Vona Aspect</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7834f512448240c5b25b3d80775bafa2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r-u5rC05aSn5Y-U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766480671&amp;x-signature=t43wvdTgWwrJFSp8Idl3VgITbGI%3D" alt="menu-aspect.png" loading="lazy"/></p>
<ol start="2">
<li>Vona Bean</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0bc694db1944659bae85da86f7c7c69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r-u5rC05aSn5Y-U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766480671&amp;x-signature=KyI6DrSw6HCHZua%2BQl16jbqmP2Q%3D" alt="menu-bean.png" loading="lazy"/></p>
<ol start="3">
<li>Vona Create</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6786eece962e4ffdbe6d648f59355df4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r-u5rC05aSn5Y-U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766480671&amp;x-signature=AXTZGvActrOBCp1n3dCyT%2B2%2FWTQ%3D" alt="menu-create.png" loading="lazy"/></p>
<ol start="4">
<li>Vona Init</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66b964992b1349b0b167e22f49722c0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r-u5rC05aSn5Y-U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766480671&amp;x-signature=NHMRYrlKAGess%2Fqekk91HIDgazk%3D" alt="menu-init.png" loading="lazy"/></p>
<ol start="5">
<li>Vona Meta</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad38ed7a9e124f499fcb8111ab2ef09a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r-u5rC05aSn5Y-U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766480671&amp;x-signature=w9bVSSqj8AV6hKfHY5Ypi80BZSw%3D" alt="menu-meta.png" loading="lazy"/></p>
<ol start="6">
<li>Vona Tools</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7287edb7a74141e08b41593bf1b6387a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5r-u5rC05aSn5Y-U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766480671&amp;x-signature=mbQqBdDioTbXEtZrX0J0lZ4N25U%3D" alt="menu-tools.png" loading="lazy"/></p>
<h2 data-id="heading-11">èµ„æº</h2>
<ul>
<li>Githubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvonajs%2Fvona" target="_blank" title="https://github.com/vonajs/vona" ref="nofollow noopener noreferrer">github.com/vonajs/vona</a></li>
<li>æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fvona.js.org" target="_blank" title="https://vona.js.org" ref="nofollow noopener noreferrer">vona.js.org</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤±è´¥çš„æœåŠ¡ç«¯SSRé™çº§CSR]]></title>    <link>https://juejin.cn/post/7584203412197720090</link>    <guid>https://juejin.cn/post/7584203412197720090</guid>    <pubDate>2025-12-16T09:13:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584203412197720090" data-draft-id="7584028251167621147" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤±è´¥çš„æœåŠ¡ç«¯SSRé™çº§CSR"/> <meta itemprop="keywords" content="Next.js"/> <meta itemprop="datePublished" content="2025-12-16T09:13:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="saintofficial"/> <meta itemprop="url" content="https://juejin.cn/user/1864415033966120"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤±è´¥çš„æœåŠ¡ç«¯SSRé™çº§CSR
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1864415033966120/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    saintofficial
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T09:13:02.000Z" title="Tue Dec 16 2025 09:13:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{font-family:-apple-system,system-ui,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial;color:#00325e}.markdown-body ::selection{background-color:#00325e;color:#fff}.markdown-body blockquote{padding:10px 20px;background-color:#fffaf0;box-shadow:0 3px 10px 0 rgba(255,172,194,.24);border:1px solid #f3ca8e;transition:all .2s;margin:1em 0;border-radius:5px}.markdown-body blockquote p{font-size:14px;line-height:25px;color:#795548}.markdown-body blockquote p:last-child{margin:0}.markdown-body blockquote:hover{border-color:#ff9800;background-color:#fff8e0;box-shadow:0 6px 10px -5px rgba(225,173,98,.3803921569)}.markdown-body blockquote code{color:#ff502c}.markdown-body pre{border:1px solid #8cc0f3;box-shadow:0 3px 10px 0 rgba(255,198,198,.28);border-radius:5px;transition:all .2s;overflow-x:auto;white-space:pre-wrap}.markdown-body pre:hover{border-color:#6d9dce}.markdown-body pre&gt;code{padding:10px 20px;color:#00325e;background:#f0f8ff;font-size:12px;line-height:1.6;display:block}.markdown-body code{background:#f6fbff;color:#0b5393;padding:2px 4px;border-radius:4px;font-size:12px}.markdown-body p{font-size:14px;line-height:28px;text-align:justify;margin-bottom:17px;color:#595959}.markdown-body a{color:#00325e;text-decoration:none}.markdown-body a:after{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAQdJREFUKFNt0DtLA0EUBeBzZle0Eks7rcUfEfBRCha7NorYa6NmVJzgyi4smUgKtdZGCJktLMVH4Y8QeztLWyE7VyLEuNFbXj4Oh0P8c8mZm+uJrEN4BJFTeP/MUVe3bnocfALwkOlo1zS7iZAzf6Cx7oXgbaqjxiDEWCcVaGyxQ8pSWo9XhqhoQ/xUFbaKjhe5V+CmR7mnSplEEF6GSmJ+F/d0KHvbCIIJCLc85U6BC5mONgbJNM3uFag++sX7z8O8MzsWBucifMx0dDGE1kmm458KDVukAlnNdDz/exEeW3dNkbfsYC0xtmgDWP6ELLZ0/F6BJu/UoFQN5AkoeUjeJPvx6+i+X5Sjah4tA6gYAAAAAElFTkSuQmCC);margin-left:2px}.markdown-body a:hover{box-shadow:0 1px}.markdown-body table{max-width:100%;border-collapse:collapse;border-spacing:0;box-shadow:0 3px 10px 0 rgba(255,238,172,.24);transition:all .2s}.markdown-body table:hover{box-shadow:0 3px 10px 0 rgba(185,169,103,.24)}.markdown-body table tr th{border:1px solid #8cc0f3;background-color:#f0f8ff;padding:12px 15px}.markdown-body table tr td{border:1px solid rgba(243,202,142,.4);padding:12px 15px}.markdown-body table tbody tr{transition:all .2s}.markdown-body table tbody tr:hover td{border-color:#f3ca8e;background-color:#fff8e0;z-index:1}.markdown-body img{max-width:100%}.markdown-body h1{font-size:20px;margin-top:30px;margin-bottom:10px;padding-left:30px;position:relative}.markdown-body h1&gt;code{font-size:20px}.markdown-body h1:before{content:"ğŸº";display:block;font-size:18px;width:18px;height:18px;left:0;position:absolute}.markdown-body h2{font-size:18px;margin-top:30px;margin-bottom:10px;padding-left:28px;position:relative}.markdown-body h2&gt;code{font-size:18px}.markdown-body h2:before{content:"ğŸ»";display:block;font-size:16px;width:16px;height:16px;left:0;position:absolute}.markdown-body h3{font-size:16px;margin-top:30px;margin-bottom:10px;padding-left:26px;position:relative}.markdown-body h3&gt;code{font-size:16px}.markdown-body h3:before{content:"ğŸ¥‚";display:block;font-size:14px;width:14px;height:14px;left:0;position:absolute}.markdown-body h4{font-size:14px;margin-top:30px;margin-bottom:10px;padding-left:24px;position:relative}.markdown-body h4&gt;code{font-size:14px}.markdown-body h4:before{content:"ğŸ¥ƒ";display:block;font-size:12px;width:12px;height:12px;left:0;position:absolute}.markdown-body h5{font-size:12px;margin-top:30px;margin-bottom:10px}.markdown-body h5&gt;code{font-size:12px}.markdown-body h6{font-size:10px;margin-top:30px;margin-bottom:10px}.markdown-body h6&gt;code{font-size:10px}.markdown-body h1,.markdown-body h2{color:#ff502c}.markdown-body hr{height:4px;border:none;margin-top:32px;margin-bottom:32px;background-size:4px 1px;background-image:linear-gradient(270deg,#6d9dce,#8cc0f3 25%,transparent 50%)}.markdown-body hr:nth-child(2n){background-image:linear-gradient(270deg,#ff9800,#fff8e0 25%,transparent 50%)}.markdown-body ul{padding-inline-start:20px}.markdown-body ul li{list-style-type:"ğŸ”¸"}.markdown-body ul li li{list-style-type:"â—»ï¸"}.markdown-body ul li li li{list-style-type:"â–«ï¸"}.markdown-body ol{padding-inline-start:20px}.markdown-body ol ::marker{color:#ff9800}.markdown-body ol,.markdown-body ul{line-height:2em}.markdown-body li{padding-inline-start:1ch}.markdown-body li.task-list-item{list-style:none;padding-inline-start:0}.markdown-body li input{padding-right:2px}.markdown-body li input[type=checkbox i]{appearance:none}.markdown-body li input:before{content:"ğŸŸ©";display:block;width:13px;height:13px}.markdown-body li input:checked:before{content:"âœ…"}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-sulphurpool-light">.hljs-comment,.hljs-quote{color:#6b7394}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c94922}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#c76b29}.hljs-bullet,.hljs-string,.hljs-symbol{color:#ac9739}.hljs-section,.hljs-title{color:#3d8fd1}.hljs-keyword,.hljs-selector-tag{color:#6679cc}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#f5f7ff;color:#5e6687}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">å‰æ²¿</h3>
<p>åœ¨æ´»åŠ¨é¡µéœ€è¦åŒæ—¶å…¼é¡¾é¦–å±æ¸²æŸ“å’Œæ¥å£ä¸ç¨³å®šï¼Œæƒ³ç”¨ä¸€ä¸ªç»„ä»¶å…œåº•ï¼šæœåŠ¡ç«¯ä¼˜å…ˆæ¸²æŸ“ï¼Œå¤±è´¥æ—¶è‡ªåŠ¨é™çº§åˆ°å®¢æˆ·ç«¯å†æ‹‰ä¸€æ¬¡ã€‚äºæ˜¯å†™äº†Â DataSectionï¼ˆsrc/components/global/DataSectionï¼‰ï¼Œè®°å½•è¿™æ¬¡å°è¯•å’Œå®ƒæœ€ç»ˆæ²¡å®Œå…¨è¾¾æˆé¢„æœŸçš„åŸå› ã€‚</p>
<h3 data-id="heading-1">æ¡ä»¶</h3>
<ol>
<li>å…¨å±€å…¬å…±ä½¿ç”¨ï¼Œé‚£ä¹ˆå¿…é¡»æ˜¯å…¬å…±ç»„ä»¶ï¼Œä¸ç”¨ä¸ºæ¯ä¸ªæ¶‰åŠæ¥å£çš„ç»„ä»¶å¤„ç†ï¼ˆå„ç§Wapperç»„ä»¶)</li>
<li>å¤ç”¨åŒä¸€ä»½ä¸šåŠ¡ä»£ç ç‰‡æ®µï¼Œé¿å…å†™ä¸¤å¥—ï¼ˆå•¥å®¢æˆ·ç«¯ä¸€å¥—ã€æœåŠ¡ç«¯ä¸€å¥—çš„ï¼‰</li>
<li>å¦‚æœSSR æ­£å¸¸ï¼Œdomå…ƒç´ ä»ç„¶èµ°SSRï¼Œå¦‚æœå¤±è´¥ï¼Œå¯æ¥å—å…¨å±€domé™çº§å®¢æˆ·ç«¯æ¸²æŸ“</li>
</ol>
<h3 data-id="heading-2">ç›®çš„</h3>
<ul>
<li>SSR æ­£å¸¸ï¼šç›´æ¥ç”¨æœåŠ¡ç«¯æ•°æ®æ¸²æŸ“ï¼Œæ‹¿åˆ°å®Œæ•´ HTML/SEOã€‚</li>
<li>SSR å¤±è´¥ï¼šä¸è¦ 500ï¼Œä¹Ÿä¸è¦ç©ºç™½ï¼›åœ¨æµè§ˆå™¨ç«¯å†è¯·æ±‚ä¸€æ¬¡ã€‚</li>
</ul>
<h3 data-id="heading-3">å®ç°è¿‡ç¨‹</h3>
<ol>
<li>æœåŠ¡ç«¯å®‰å…¨ fetch<br/>
api-client.tsÂ ç”¨Â safeFetchÂ åŒ…è£…ï¼ŒæœåŠ¡ç«¯è¯·æ±‚å¤±è´¥ä¸æŠ›é”™ï¼Œè¿”å›Â nullï¼Œé¿å…æ•´ä¸ªé¡µé¢å´©æ‰ã€‚</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript">src/components/<span class="hljs-variable language_">global</span>/<span class="hljs-title class_">DataSection</span>/api-client.<span class="hljs-property">ts</span> 

<span class="hljs-keyword">const</span> isServer = <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> === <span class="hljs-string">"undefined"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> safeFetch&lt;T&gt;(<span class="hljs-attr">fetcher</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;T&gt;): <span class="hljs-title class_">Promise</span>&lt;T | <span class="hljs-literal">null</span>&gt; {
  <span class="hljs-keyword">if</span> (!isServer) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">"safeFetch should only be called on server"</span>)
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetcher</span>()
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"[Server] API failed:"</span>, error)
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
  }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> safeFetchAll&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">unknown</span>[]&gt;(
  <span class="hljs-attr">fetchers</span>: <span class="hljs-keyword">readonly</span> (<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;T[<span class="hljs-built_in">number</span>]&gt;)[]
): <span class="hljs-title class_">Promise</span>&lt;{ [K <span class="hljs-keyword">in</span> keyof T]: T[K] | <span class="hljs-literal">null</span> }&gt; {
  <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>(fetchers.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">fetcher</span> =&gt;</span> <span class="hljs-title function_">fetcher</span>()))

  <span class="hljs-keyword">return</span> results.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> (result.<span class="hljs-property">status</span> === <span class="hljs-string">"fulfilled"</span> ? result.<span class="hljs-property">value</span> : <span class="hljs-literal">null</span>)) <span class="hljs-keyword">as</span> { [K <span class="hljs-keyword">in</span> keyof T]: T[K] | <span class="hljs-literal">null</span> }
}

</code></pre>
<ol start="2">
<li>ç»Ÿä¸€å…¥å£ DataSection<br/>
SSR æœ‰æ•°æ®ï¼ˆinitialData.code === 0ï¼‰å°±ç›´æ¥æ¸²æŸ“ childrenï¼›å¦åˆ™èµ°å®¢æˆ·ç«¯é™çº§ã€‚</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/components/global/DataSection/index.tsx</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">ClientFallback</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./ClientFallback'</span>

<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">CommonApiRes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/lib/service/type'</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Props</span>&lt;T&gt; {
  <span class="hljs-attr">queryKey</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">string</span>[]
  <span class="hljs-attr">initialData</span>: <span class="hljs-title class_">CommonApiRes</span>&lt;T&gt; | <span class="hljs-literal">null</span>
  <span class="hljs-attr">fetcher</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">CommonApiRes</span>&lt;T&gt;&gt;
  <span class="hljs-attr">children</span>: <span class="hljs-function">(<span class="hljs-params">data: T</span>) =&gt;</span> <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title class_">DataSection</span>&lt;T&gt;(<span class="hljs-attr">props</span>: <span class="hljs-title class_">Props</span>&lt;T&gt;) {
  <span class="hljs-keyword">const</span> { queryKey, initialData, fetcher, children } = props
  <span class="hljs-comment">// âœ… æœåŠ¡ç«¯æ¸²æŸ“è·¯å¾„</span>
  <span class="hljs-keyword">if</span> (initialData !== <span class="hljs-literal">null</span> &amp;&amp; initialData.<span class="hljs-property">code</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.Fragment</span>&gt;</span>
        {children(initialData.res)}
      <span class="hljs-tag">&lt;/<span class="hljs-name">React.Fragment</span>&gt;</span></span>
    )
  }

  <span class="hljs-comment">// âŒ å®¢æˆ·ç«¯é™çº§è·¯å¾„</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ClientFallback</span>
      <span class="hljs-attr">queryKey</span>=<span class="hljs-string">{queryKey}</span>
      <span class="hljs-attr">fetcher</span>=<span class="hljs-string">{fetcher}</span>
    &gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">ClientFallback</span>&gt;</span></span>
  )
}

</code></pre>
<ol start="3">
<li>å®¢æˆ·ç«¯å…œåº• ClientFallback<br/>
ç”¨ React Query è§¦å‘æµè§ˆå™¨ç«¯è¯·æ±‚ï¼Œloading æ—¶å±•ç¤ºéª¨æ¶ï¼Œæ‹¿åˆ°æ•°æ®åå¤ç”¨ childrenã€‚</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/components/global/DataSection/ClientFallback.tsx</span>

<span class="hljs-string">'use client'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Loading</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../Loading'</span>

<span class="hljs-keyword">import</span> { useServerData } <span class="hljs-keyword">from</span> <span class="hljs-string">'./useServerData'</span>

<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">CommonApiRes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/lib/service/type'</span>

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Props</span>&lt;T&gt; {
  <span class="hljs-attr">queryKey</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">string</span>[]
  <span class="hljs-attr">fetcher</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">CommonApiRes</span>&lt;T&gt;&gt;
  <span class="hljs-attr">children</span>: <span class="hljs-function">(<span class="hljs-params">data: T</span>) =&gt;</span> <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title class_">ClientFallback</span>&lt;T&gt;(<span class="hljs-attr">props</span>: <span class="hljs-title class_">Props</span>&lt;T&gt;) {
  <span class="hljs-keyword">const</span> { queryKey, fetcher, children } = props

  <span class="hljs-keyword">const</span> { data, loading, ...rest } = <span class="hljs-title function_">useServerData</span>(
    queryKey,
    <span class="hljs-literal">null</span>,
    fetcher
  )

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.Fragment</span> &gt;</span>
      {loading &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">Loading</span> /&gt;</span>}
      {data &amp;&amp; children(data)}
    <span class="hljs-tag">&lt;/<span class="hljs-name">React.Fragment</span>&gt;</span></span>
  )
}
</code></pre>
<ol start="4">
<li>Hook ç»†èŠ‚<br/>
useServerDataÂ åŒ…è£…Â useQueryï¼Œæ§åˆ¶å¯ç”¨ä¸é‡è¯•ã€‚</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/components/global/DataSection/useServerData.ts </span>
<span class="hljs-keyword">import</span> { useQuery, <span class="hljs-keyword">type</span> <span class="hljs-title class_">UseQueryOptions</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@tanstack/react-query"</span>

<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">CommonApiRes</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/lib/service/type"</span>

<span class="hljs-keyword">type</span> <span class="hljs-title class_">UseServerDataOptions</span>&lt;T&gt; = <span class="hljs-title class_">Omit</span>&lt;<span class="hljs-title class_">UseQueryOptions</span>&lt;T, <span class="hljs-title class_">Error</span>&gt;, <span class="hljs-string">"queryKey"</span> | <span class="hljs-string">"queryFn"</span>&gt;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> useServerData&lt;T&gt;(
  <span class="hljs-attr">queryKey</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">string</span>[],
  <span class="hljs-attr">initialData</span>: <span class="hljs-title class_">CommonApiRes</span>&lt;T&gt; | <span class="hljs-literal">null</span>,
  <span class="hljs-attr">fetcher</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">CommonApiRes</span>&lt;T&gt;&gt;,
  options?: <span class="hljs-title class_">UseServerDataOptions</span>&lt;<span class="hljs-title class_">CommonApiRes</span>&lt;T&gt;&gt;
) {
  <span class="hljs-keyword">const</span> key = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(queryKey) ? queryKey : [queryKey]

  <span class="hljs-keyword">const</span> query = useQuery&lt;<span class="hljs-title class_">CommonApiRes</span>&lt;T&gt;, <span class="hljs-title class_">Error</span>&gt;({
    <span class="hljs-attr">queryKey</span>: key,
    <span class="hljs-attr">queryFn</span>: fetcher,
    <span class="hljs-attr">enabled</span>: initialData === <span class="hljs-literal">null</span>,
    <span class="hljs-attr">initialData</span>: initialData ?? <span class="hljs-literal">undefined</span>,
    <span class="hljs-attr">staleTime</span>: initialData ? <span class="hljs-number">0</span> : <span class="hljs-number">5</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>,
    <span class="hljs-attr">retry</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">retryDelay</span>: <span class="hljs-function"><span class="hljs-params">attemptIndex</span> =&gt;</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">1000</span> * <span class="hljs-number">2</span> ** attemptIndex, <span class="hljs-number">30000</span>),
    ...options,
  })

  <span class="hljs-keyword">return</span> {
    ...query,
    <span class="hljs-attr">data</span>: query.<span class="hljs-property">data</span>?.<span class="hljs-property">res</span> ?? <span class="hljs-literal">null</span>,
    <span class="hljs-attr">loading</span>: query.<span class="hljs-property">isLoading</span>,
    <span class="hljs-attr">error</span>: query.<span class="hljs-property">error</span>,
    <span class="hljs-attr">refetch</span>: query.<span class="hljs-property">refetch</span>,
    <span class="hljs-attr">isRefetching</span>: query.<span class="hljs-property">isRefetching</span>,
  }
}
</code></pre>
<ol>
<li>å®é™…è½åœ°<br/>
åœ¨å…‘æ¢å•†åº—é¡µÂ src/app/act/(1st)/exchange-store/page.tsxÂ åŒæ—¶ä¼ å…¥æœåŠ¡ç«¯ç»“æœå’Œå®¢æˆ·ç«¯ fetcherã€‚</li>
</ol>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">exchangeRes</span> = await ExchangeStoreApi.getExchangeList()

&lt;DataSection
  <span class="hljs-attr">queryKey</span>=<span class="hljs-string">"exchange-list"</span>
  <span class="hljs-attr">initialData</span>={exchangeRes}
  <span class="hljs-attr">fetcher</span>={() =&gt; ExchangeStoreClientApi.getExchangeList()}&gt;
  {<span class="hljs-attr">data</span> =&gt; &lt;p className=<span class="hljs-string">"text-[38px] text-white"</span>&gt;{data?.carnivalNum || <span class="hljs-number">0</span>}&lt;/p&gt;}
&lt;/DataSection&gt;

</code></pre>
<p>SSR æˆåŠŸåˆ™ç›´å‡ºï¼›å¤±è´¥åˆ™å®¢æˆ·ç«¯é‡è¯•å¹¶æ˜¾ç¤º loadingã€‚</p>
<h3 data-id="heading-4">è§£å†³äº†ä»€ä¹ˆ</h3>
<ul>
<li>æœåŠ¡ç«¯ fetch å¤±è´¥ä¸å†ç›´æ¥æŠ›å‡ºé”™è¯¯é¡µé¢ï¼Œå¯å›é€€åˆ°å®¢æˆ·ç«¯è¯·æ±‚ <strong>(å®é™…åœºæ™¯ï¼šæˆ‘çš„é¡¹ç›®å‰æœŸçš„æ¥å£æ˜¯éœ€è¦tokenï¼Œæ‰€ä»¥åªèƒ½ä»appé€šè¿‡bridgeè·å–tokenï¼Œå¯¼è‡´æ¥å£éƒ¨åˆ†åªèƒ½æ˜¯å®¢æˆ·ç«¯æ¸²æŸ“ï¼ŒåæœŸæ”¹äº†å¯ä»¥æœåŠ¡ç«¯æ¸²æŸ“ï¼Œä½†æ˜¯éœ€è¦æ›´æ–°appç‰ˆæœ¬,è¿™æ ·å°±å­˜åœ¨ç‰ˆæœ¬å…¼å®¹é—®é¢˜)ã€‚</strong></li>
</ul>
<h3 data-id="heading-5">ä¸ºä»€ä¹ˆæ–¹æ¡ˆä¸è¡Œï¼ˆé—ç•™ä¸é™åˆ¶ï¼‰</h3>
<ul>
<li>è¯·æ±‚æˆæœ¬ã€æ°´åˆä¸ä¸€è‡´ã€ä¸é€šè¿‡safeFetchè¿”å›nullå¯¼è‡´SSRæŠ›é”™ç­‰ç­‰å…¶ä»–é—®é¢˜ï¼Œè¿™äº›å…¶å®å¯ä»¥è§£å†³ã€‚ç»„ä»¶å®ç°é‡Œæœ€ä¸»è¦çš„é—®é¢˜æ˜¯å‡½æ•°ä¸èƒ½åºåˆ—åŒ–ä¼ é€’çš„é—®é¢˜ï¼Œå¦‚æœæˆ‘æƒ³ä¿æŒè¿™æ ·çš„å†™æ³•çš„è¯ï¼ˆä¸»è¦è¿™ç§å†™æ³•æ˜¯æ¯”è¾ƒä¼˜é›…äº†ã€å·¥ä½œé‡å°‘ï¼Œä¸ç”¨å•ç‹¬å¤„ç†ï¼‰ï¼Œè¿™é‡Œæœ€éš¾å¤„ç†çš„æ˜¯childrené€šè¿‡ä¼ é€’dataé—®é¢˜ï¼Œä½†æ˜¯è¿™ä¸ªé—®é¢˜æˆ‘ç›®å‰æ²¡æœ‰æ€è€ƒåˆ°å¥½çš„æ–¹å¼</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">&lt;DataSection
  ...
  <span class="hljs-attr">fetcher</span>={() =&gt; ExchangeStoreClientApi.getExchangeList()}&gt;
  {<span class="hljs-attr">data</span> =&gt; (
    &lt;p <span class="hljs-attr">className</span>=<span class="hljs-string">"text-[38px] text-white"</span>&gt;{data?.carnivalNum || <span class="hljs-number">0</span>}&lt;/p&gt;
  )}
&lt;/DataSection&gt;
</code></pre>
<h3 data-id="heading-6">è§£å†³æ–¹æ¡ˆ</h3>
<p>è§£å†³æ–¹æ¡ˆå…¶å®æœ‰ä¸€äº›ï¼Œå°è¯•è¿‡å¾ˆå¤š</p>
<p>fetchæ–¹é¢ï¼Œæ¯”å¦‚æˆ‘å†™ä¸€ä¸ªfetchMap+æ³¨å†Œè¡¨ï¼Œè¿™æ ·å°±å¯ä»¥ä¸ä¼ ï¼Œä½†æ˜¯ä¹Ÿåªæ˜¯è§£å†³äº†fetchï¼Œdata =&gt; åªèƒ½åœ¨å®¢æˆ·ç«¯</p>
<p>æ¯”å¦‚åœ¨åŒ…ä¸€å±‚DataSectionWrapper,use clientç»„ä»¶ï¼Œä½†æ˜¯å¼Šç«¯å°±æ˜¯å¦‚æœSSRæˆåŠŸï¼ŒåŸæœ¬SSRçš„domå…¨éƒ¨å˜æˆclientçš„domï¼Œä¸¢å¤±äº†æ¡†æ¶çš„ä¼˜åŠ¿</p>
<p>åœ¨æ¯”å¦‚ä¸ºæ¯ä¸€ä¸ªæ¶‰åŠæ¥å£çš„ç»„ä»¶å•ç‹¬å†™ä¸€ä¸ªRender Wapperï¼Œå»åˆ¤æ–­è¿”å›æˆåŠŸorå¤±è´¥ï¼Œå¯¹åº”æ¸²æŸ“ï¼Œä½†æ˜¯è¿™æ ·å·¥ä½œé‡å…¶å®å¾ˆå¤§</p>
<h3 data-id="heading-7">å°ç»“</h3>
<p>è¿˜åœ¨æƒ³è§£å†³æ–¹æ³•</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uni-app ä¸Šæ¶ iOSï¼Œå¹¶ä¸æ˜¯å¡åœ¨æŠ€æœ¯ï¼Œè€Œæ˜¯å¡åœ¨æµç¨‹ç†è§£]]></title>    <link>https://juejin.cn/post/7584266920640610355</link>    <guid>https://juejin.cn/post/7584266920640610355</guid>    <pubDate>2025-12-16T09:15:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584266920640610355" data-draft-id="7584244431869509659" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uni-app ä¸Šæ¶ iOSï¼Œå¹¶ä¸æ˜¯å¡åœ¨æŠ€æœ¯ï¼Œè€Œæ˜¯å¡åœ¨æµç¨‹ç†è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-16T09:15:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aiopencode"/> <meta itemprop="url" content="https://juejin.cn/user/1898230261493865"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uni-app ä¸Šæ¶ iOSï¼Œå¹¶ä¸æ˜¯å¡åœ¨æŠ€æœ¯ï¼Œè€Œæ˜¯å¡åœ¨æµç¨‹ç†è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1898230261493865/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aiopencode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T09:15:14.000Z" title="Tue Dec 16 2025 09:15:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ uni-app é¡¹ç›®é‡Œï¼Œå¼€å‘é˜¶æ®µé€šå¸¸æ¨è¿›å¾—å¾ˆå¿«ã€‚
é¡µé¢ã€æ¥å£ã€é€»è¾‘éªŒè¯éƒ½è·‘é€šä¹‹åï¼Œå¾ˆå¤šå›¢é˜Ÿä¼šäº§ç”Ÿä¸€ç§é”™è§‰ï¼š<strong>ä¸Šæ¶åªæ˜¯æœ€åä¸€æ­¥çš„â€œæäº¤åŠ¨ä½œâ€</strong>ã€‚</p>
<p>æˆ‘ç¬¬ä¸€æ¬¡è´Ÿè´£ uni-app é¡¹ç›®çš„ iOS ä¸Šæ¶æ—¶ï¼Œä¹Ÿæœ‰ç±»ä¼¼é¢„æœŸã€‚çœŸæ­£å¼€å§‹æ“ä½œä¹‹åæ‰æ„è¯†åˆ°ï¼Œuni-app å¹¶æ²¡æœ‰æ”¹å˜ iOS ä¸Šæ¶çš„åº•å±‚è§„åˆ™ï¼Œå®ƒåªæ˜¯æŠŠä»£ç å±‚é¢çš„å¤æ‚åº¦éšè—äº†ï¼Œè€Œè¯ä¹¦ã€Bundle IDã€æè¿°æ–‡ä»¶ã€IPA æ ¡éªŒè¿™äº›é—®é¢˜ï¼Œä¸€ä¸ªéƒ½ä¸ä¼šå°‘ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>uni-app é¡¹ç›®åœ¨ä¸Šæ¶å‰ï¼Œå…¶å®å·²ç»éšå«äº†å¾ˆå¤šå‡è®¾</strong></h2>
<p>uni-app çš„æ„å»ºå·¥å…·å¸®æˆ‘ä»¬åšäº†å¾ˆå¤šäº‹ï¼Œä¾‹å¦‚ç”Ÿæˆ Xcode å·¥ç¨‹ã€å¤„ç†èµ„æºç›®å½•ã€å°è£… WebViewã€‚ä½†å®ƒå¹¶ä¸ä¼šæ›¿ä½ åˆ¤æ–­ï¼š</p>
<ul>
<li>å½“å‰ Bundle ID æ˜¯å¦å·²ç»å­˜åœ¨</li>
<li>ä½¿ç”¨çš„æ˜¯å¼€å‘è¯ä¹¦è¿˜æ˜¯å‘å¸ƒè¯ä¹¦</li>
<li>æ„å»ºå‡ºæ¥çš„ IPA æ˜¯å¦çœŸçš„â€œé€‚åˆä¸Šæ¶â€</li>
</ul>
<p>åœ¨æœ€åˆçš„é¡¹ç›®ä¸­ï¼Œæˆ‘é‡åˆ°çš„ç¬¬ä¸€ä¸ªé—®é¢˜å¹¶ä¸æ˜¯æ„å»ºå¤±è´¥ï¼Œè€Œæ˜¯ <strong>ä¸çŸ¥é“è‡ªå·±æ­£åœ¨ç”¨ä»€ä¹ˆèº«ä»½ä¸Šæ¶</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>Bundle ID åœ¨ uni-app é¡¹ç›®é‡Œå¾ˆå®¹æ˜“è¢«å¿½ç•¥</strong></h2>
<p>åœ¨ HBuilderX é‡Œå¡«å†™ Bundle ID çš„æ—¶å€™ï¼Œå®ƒçœ‹èµ·æ¥åªæ˜¯ä¸€ä¸ªé…ç½®é¡¹ã€‚ä½†ä¸€æ—¦è¿›å…¥ Apple çš„ä½“ç³»ï¼Œè¿™ä¸ªå­—ç¬¦ä¸²ä¼šåŒæ—¶å½±å“ï¼š</p>
<ul>
<li>è¯ä¹¦æ˜¯å¦å¯ç”¨</li>
<li>æè¿°æ–‡ä»¶æ˜¯å¦åŒ¹é…</li>
<li>App Store Connect æ˜¯å¦æ¥å—æ„å»º</li>
</ul>
<p>æˆ‘åæ¥å…»æˆçš„ä¹ æƒ¯æ˜¯ï¼š
åœ¨å‡†å¤‡ä¸Šæ¶ä¹‹å‰ï¼Œå…ˆç¡®è®¤è´¦å·é‡Œåˆ°åº•å·²ç»æœ‰å“ªäº› Bundle IDï¼Œè€Œä¸æ˜¯ç›´æ¥â€œå‡è®¾è¿˜æ²¡æœ‰â€ã€‚</p>
<p>åœ¨ Windows ç¯å¢ƒä¸‹ï¼Œæˆ‘é€šå¸¸ä¼šç”¨ <strong>å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰æŸ¥çœ‹è´¦å·å†…çš„ Bundle ID åˆ—è¡¨</strong>ï¼Œä¸»è¦ç›®çš„æ˜¯ï¼š</p>
<ul>
<li>é¿å…å’Œå†å²é¡¹ç›®å†²çª</li>
<li>ç¡®è®¤æ˜¯å¦éœ€è¦æ–°å»º</li>
<li>æ˜ç¡®å½“å‰ uni-app é¡¹ç›®å¯¹åº”çš„å”¯ä¸€èº«ä»½
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84e3a9a994db43e1ba917f355602da09~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWlvcGVuY29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481314&amp;x-signature=EpFjlutcfCpQ6rHJ1gBO6NeI4Hk%3D" alt="bidæŸ¥çœ‹" loading="lazy"/></li>
</ul>
<p>è¿™ä¸ªåŠ¨ä½œå¹¶ä¸å¤æ‚ï¼Œä½†å®ƒèƒ½æå‰é¿å…å¾ˆå¤šâ€œçœ‹èµ·æ¥åƒè¯ä¹¦é—®é¢˜â€çš„åç»­éº»çƒ¦ã€‚</p>
<hr/>
<h2 data-id="heading-2"><strong>è¯ä¹¦é—®é¢˜åœ¨ uni-app é¡¹ç›®é‡Œï¼Œå¾€å¾€æš´éœ²å¾—æ›´æ™š</strong></h2>
<p>å¾ˆå¤š uni-app é¡¹ç›®å¹¶ä¸ç›´æ¥æ“ä½œ Xcodeï¼Œä¹Ÿå¾ˆå°‘æ¥è§¦é’¥åŒ™ä¸²ã€‚
ç»“æœå°±æ˜¯ï¼šè¯ä¹¦ä¸€æ—¦å‡ºé—®é¢˜ï¼Œæ’æŸ¥æˆæœ¬ä¼šæ˜æ˜¾æ”¾å¤§ã€‚</p>
<p>æˆ‘é‡åˆ°è¿‡çš„å…¸å‹æƒ…å†µåŒ…æ‹¬ï¼š</p>
<ul>
<li>æ„å»ºèƒ½æˆåŠŸï¼Œä½†ä¸Šä¼ è¢«æ‹’</li>
<li>IPA èƒ½å®‰è£…ï¼Œä½†æ— æ³•æäº¤ TestFlight</li>
<li>æè¿°æ–‡ä»¶ä¸‹è½½äº†ï¼Œä½†ä¸çŸ¥é“å®ƒç»‘å®šäº†å“ªä¸ªè¯ä¹¦</li>
</ul>
<p>åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œä»…ä»…â€œé‡æ–°ç”Ÿæˆè¯ä¹¦â€å¾€å¾€ä¸æ˜¯æœ€ä¼˜è§£ã€‚</p>
<p>åœ¨ä¸€äº›é¡¹ç›®ä¸­ï¼Œæˆ‘å¼€å§‹ç›´æ¥ç”¨ <strong>Appuploader åˆ›å»º iOS è¯ä¹¦</strong>ï¼ŒåŸå› å¹¶ä¸æ˜¯ä¸ºäº†ç»•è¿‡ Macï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>è¯ä¹¦ç”Ÿæˆè¿‡ç¨‹æ›´æ˜ç¡®</li>
<li>è¯ä¹¦æ–‡ä»¶å¯ä»¥ç›´æ¥äº¤ç»™æ„å»ºèŠ‚ç‚¹</li>
<li>ä¸éœ€è¦ä¾èµ–æŸä¸€å° Mac çš„é’¥åŒ™ä¸²çŠ¶æ€
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ef652098fb74a6aa14bb44fe674a9cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWlvcGVuY29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481314&amp;x-signature=f%2BlEjIQfX1qhn9a87otJtC0YMdw%3D" alt="è¯ä¹¦ç”Ÿæˆ" loading="lazy"/></li>
</ul>
<p>è¿™æ ·åšä¹‹åï¼Œè¯ä¹¦ä¸å†æ˜¯â€œæŸä¸ªäººç”µè„‘é‡Œçš„ä¸œè¥¿â€ï¼Œè€Œæ˜¯å·¥ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚</p>
<hr/>
<h2 data-id="heading-3"><strong>æè¿°æ–‡ä»¶æ˜¯ uni-app ä¸Šæ¶é‡Œæœ€å®¹æ˜“è¢«è¯¯ç”¨çš„æ–‡ä»¶</strong></h2>
<p>æè¿°æ–‡ä»¶çš„é—®é¢˜ï¼Œé€šå¸¸ä¸ä¼šåœ¨æ„å»ºé˜¶æ®µæŠ¥é”™ï¼Œè€Œæ˜¯åœ¨ä¸Šä¼ æˆ–å®¡æ ¸é˜¶æ®µå‡ºç°ã€‚</p>
<p>æœ‰ä¸€æ¬¡é¡¹ç›®å¡äº†æ•´æ•´ä¸€å¤©ï¼Œæœ€åå‘ç°åªæ˜¯ <strong>IPA é‡Œå¸¦çš„æ˜¯å¼€å‘æè¿°æ–‡ä»¶</strong>ã€‚
æ„å»ºæ²¡é—®é¢˜ã€å®‰è£…æ²¡é—®é¢˜ï¼Œä½†å°±æ˜¯ä¸Šä¸äº†æ¶ã€‚</p>
<p>ä»é‚£ä¹‹åï¼Œæˆ‘åœ¨ uni-app é¡¹ç›®é‡Œéƒ½ä¼šåšä¸€ä»¶äº‹ï¼š
<strong>åœ¨ä¸Šä¼ å‰ï¼Œä¸»åŠ¨çœ‹ä¸€çœ¼æè¿°æ–‡ä»¶çš„å†…å®¹ã€‚</strong></p>
<p>é€šè¿‡ <strong>Appuploader æŸ¥çœ‹ mobileprovision æ–‡ä»¶</strong>ï¼Œå¯ä»¥ç›´æ¥ç¡®è®¤ï¼š</p>
<ul>
<li>å®ƒæ˜¯å¼€å‘è¿˜æ˜¯å‘å¸ƒç±»å‹</li>
<li>ç»‘å®šçš„æ˜¯å“ªä¸ª Bundle ID</li>
<li>ä½¿ç”¨çš„æ˜¯å“ªä¸€ä¸ªè¯ä¹¦
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f447b48e95d42b4a14262a238460705~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWlvcGVuY29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481314&amp;x-signature=vMmqB1M8IH5zq4ZltgqdjT%2B1EQc%3D" alt="æŸ¥çœ‹æ–‡ä»¶" loading="lazy"/></li>
</ul>
<p>è¿™ä¸ªåŠ¨ä½œä¸ä¾èµ– Xcodeï¼Œä¹Ÿä¸ä¾èµ– macOSï¼Œå¯¹ Windows å›¢é˜Ÿå°¤å…¶é‡è¦ã€‚</p>
<hr/>
<h2 data-id="heading-4"><strong>IPA ä¸æ˜¯â€œé»‘ç›’â€ï¼Œä½†å¾ˆå¤šå›¢é˜ŸæŠŠå®ƒå½“é»‘ç›’</strong></h2>
<p>uni-app æ„å»ºå‡ºæ¥çš„ IPAï¼Œæœ¬è´¨ä¸Šä»ç„¶æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ iOS åº”ç”¨åŒ…ã€‚
ä½†åœ¨å¾ˆå¤šé¡¹ç›®é‡Œï¼Œå®ƒåªè¢«å½“ä½œâ€œä¸Šä¼ ç”¨æ–‡ä»¶â€ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¯ä»¥è¢«æ£€æŸ¥çš„å·¥ç¨‹äº§ç‰©ã€‚</p>
<p>æˆ‘åœ¨ uni-app ä¸Šæ¶ä¸­é‡åˆ°è¿‡çš„é—®é¢˜åŒ…æ‹¬ï¼š</p>
<ul>
<li>Bundle ID åœ¨å·¥ç¨‹é…ç½®é‡Œæ˜¯å¯¹çš„ï¼Œä½† IPA é‡Œä¸ä¸€è‡´</li>
<li>å›¾æ ‡èµ„æºç¼ºå¤±ï¼Œå®¡æ ¸é˜¶æ®µæ‰è¢«æŒ‡å‡º</li>
<li>Info.plist æƒé™è¯´æ˜ä¸å®Œæ•´</li>
</ul>
<p>è¿™äº›é—®é¢˜å¦‚æœèƒ½åœ¨ä¸Šä¼ å‰å‘ç°ï¼Œä»£ä»·ä¼šå°å¾—å¤šã€‚</p>
<p>åœ¨ Windows ä¸Šï¼Œæˆ‘é€šå¸¸ä¼šç”¨ <strong>Appuploader æŸ¥çœ‹ IPA å†…å®¹</strong>ï¼Œé‡ç‚¹å…³æ³¨ï¼š</p>
<ul>
<li><code>CFBundleIdentifier</code></li>
<li>æ˜¯å¦æºå¸¦äº†æ­£ç¡®çš„ mobileprovision</li>
<li>åŸºç¡€èµ„æºæ˜¯å¦å­˜åœ¨</li>
</ul>
<p>è¿™ä¸ªæ­¥éª¤è®© uni-app ä¸Šæ¶ä¸å†å®Œå…¨ä¾èµ–â€œæ„å»ºç»“æœæ˜¯å¦æŠ¥é”™â€ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>uni-app é¡¹ç›®é‡Œï¼Œä¸Šæ¶ä¸Šä¼ è¿™ä¸€ç¯æœ€å®¹æ˜“è¢«å¿½è§†</strong></h2>
<p>uni-app çš„å¼€å‘è€…å¾€å¾€ä¸å¤ªå…³å¿ƒâ€œç”¨ä»€ä¹ˆå·¥å…·ä¸Šä¼  IPAâ€ï¼Œå› ä¸ºè¿™ä¸€æ­¥é€šå¸¸è¢«è®¤ä¸ºæ˜¯å·¥å…·è‡ªå¸¦çš„ã€‚</p>
<p>ä½†åœ¨è·¨å¹³å°å›¢é˜Ÿé‡Œï¼Œè¿™ä¸ªå‡è®¾å¹¶ä¸æˆç«‹ã€‚</p>
<p>å½“æ„å»ºå‘ç”Ÿåœ¨äº‘ç«¯æˆ– CIï¼Œè€Œå›¢é˜Ÿæˆå‘˜ä¸»è¦ä½¿ç”¨ Windows æ—¶ï¼ŒXcode å’Œ Transporter å°±ä¸å†æ˜¯ä¸€ä¸ªç¨³å®šé€‰é¡¹ã€‚</p>
<p>åœ¨è¿™äº›é¡¹ç›®ä¸­ï¼Œæˆ‘ä½¿ç”¨ <strong>å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰æä¾›çš„ä¸Šä¼ æ–¹å¼</strong>ï¼ŒåŸå› å¾ˆç®€å•ï¼š</p>
<ul>
<li>å¯ä»¥åœ¨ Windows ä¸Šæ‰§è¡Œ</li>
<li>ä¸Šä¼ åŠ¨ä½œå¯è„šæœ¬åŒ–</li>
<li>æ„å»ºå’Œä¸Šä¼ èŒè´£å¯ä»¥åˆ†ç¦»</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">appuploader_cli -u appleid@example.com -p xxxx-xxxx -c 1 -f app.ipa
</code></pre>
<p>è¿™å¹¶æ²¡æœ‰æ”¹å˜è‹¹æœçš„å®¡æ ¸è§„åˆ™ï¼Œä½†å®ƒæ”¹å˜äº† <strong>uni-app é¡¹ç›®å†…éƒ¨çš„åä½œæ–¹å¼</strong>ã€‚
GUIç•Œé¢ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ca6df1ce1724ac49ad35b7277075a85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWlvcGVuY29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481314&amp;x-signature=5Pc38v1iZnCKiKBHM0MyB%2BwJ0yo%3D" alt="ipaä¸Šä¼ " loading="lazy"/></p>
<hr/>
<h2 data-id="heading-6"><strong>uni-app ä¸Šæ¶é¡ºåˆ©ï¼Œå¾€å¾€ä¸æ˜¯å› ä¸ºâ€œå·¥å…·é€‰å¯¹äº†â€</strong></h2>
<p>å›å¤´çœ‹è¿™äº›ç»å†ï¼Œä¼šå‘ç° uni-app ä¸Šæ¶é¡ºåˆ©ä¸å¦ï¼Œå¾ˆå°‘å–å†³äºæŸä¸€ä¸ªå·¥å…·ï¼Œè€Œæ›´å¤šå–å†³äºï¼š</p>
<ul>
<li>æ˜¯å¦æ¸…æ¥š Bundle ID çš„å®é™…ä½œç”¨</li>
<li>æ˜¯å¦çŸ¥é“è¯ä¹¦å’Œæè¿°æ–‡ä»¶åœ¨ç”¨å“ªä¸€å¥—</li>
<li>æ˜¯å¦åœ¨ä¸Šä¼ å‰çœŸæ­£æ£€æŸ¥è¿‡ IPA</li>
<li>æ˜¯å¦æŠŠä¸Šæ¶å½“æˆå·¥ç¨‹æµç¨‹ï¼Œè€Œä¸æ˜¯æäº¤åŠ¨ä½œ</li>
</ul>
<hr/>
<p>uni-app è®©å¼€å‘å˜å¿«äº†ï¼Œä½†å®ƒä¸ä¼šæ›¿ä½ ç†è§£ iOS ä¸Šæ¶ã€‚
å½“å›¢é˜Ÿä¸»è¦å·¥ä½œåœ¨ Windows ç¯å¢ƒï¼Œæˆ–è€…æ„å»ºä¸ä¸Šä¼ è¢«æ‹†åˆ†æ—¶ï¼Œä¸Šæ¶æµç¨‹å¦‚æœä»ç„¶ä¾èµ–â€œæŸå° Mac çš„çŠ¶æ€â€ï¼Œå°±å¾ˆå®¹æ˜“å¤±æ§ã€‚</p>
<p>å½“æˆ‘å¼€å§‹æŠŠè¯ä¹¦ã€Bundle IDã€æè¿°æ–‡ä»¶ã€IPA å½“æˆæ˜ç¡®çš„å·¥ç¨‹å¯¹è±¡ï¼Œè€Œä¸æ˜¯å·¥å…·å†…éƒ¨ç»†èŠ‚æ—¶ï¼Œuni-app çš„ iOS ä¸Šæ¶æ‰çœŸæ­£ç¨³å®šä¸‹æ¥ã€‚</p>
<p>è¿™ä¸æ˜¯æŸä¸€æ¬¡é…ç½®çš„æˆåŠŸï¼Œè€Œæ˜¯ä¸€ç§å¯¹æµç¨‹çš„é‡æ–°ç†è§£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ’­æ”¾å™¨è§†é¢‘åå¤„ç†å®è·µï¼ˆäºŒï¼‰æ°›å›´æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7584110439933755438</link>    <guid>https://juejin.cn/post/7584110439933755438</guid>    <pubDate>2025-12-16T09:19:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584110439933755438" data-draft-id="7584094504631992329" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ’­æ”¾å™¨è§†é¢‘åå¤„ç†å®è·µï¼ˆäºŒï¼‰æ°›å›´æ¨¡å¼"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-16T09:19:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç™¾åº¦Geekè¯´"/> <meta itemprop="url" content="https://juejin.cn/user/4186596000416094"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ’­æ”¾å™¨è§†é¢‘åå¤„ç†å®è·µï¼ˆäºŒï¼‰æ°›å›´æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4186596000416094/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç™¾åº¦Geekè¯´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T09:19:23.000Z" title="Tue Dec 16 2025 09:19:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">01 å‰è¨€</h2>
<p>åœ¨æ—¥å¸¸è§†é¢‘æ’­æ”¾ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼šè§†é¢‘çš„é•¿å®½æ¯”ä¾‹ä¸è®¾å¤‡å±å¹•ä¸ä¸€è‡´ï¼Œå¯¼è‡´ç”»é¢ä¸Šä¸‹æˆ–å·¦å³å‡ºç°é»‘è¾¹ã€‚è™½ç„¶è¿™å¹¶ä¸å½±å“è§†é¢‘çš„æ­£å¸¸æ’­æ”¾ï¼Œä½†ä»ç”¨æˆ·ä½“éªŒçš„è§’åº¦æ¥çœ‹ï¼Œè¿™äº›é»‘è¾¹å¾€å¾€æ‰“æ–­äº†è§†è§‰çš„æ²‰æµ¸æ„Ÿï¼Œæ˜¾å¾—æ ¼å¤–çªå…€ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œä¸šç•Œä¸»æµæ’­æ”¾å™¨ï¼ˆå¦‚ YouTubeã€Netflixï¼‰å¼•å…¥äº†ä¸€ç§è¢«ç§°ä¸ºæ°›å›´æ¨¡å¼ï¼ˆAmbient Modeï¼‰çš„è§†è§‰å¢å¼ºæ•ˆæœã€‚å®ƒçš„æ ¸å¿ƒæ€è·¯æ˜¯ï¼š</p>
<p>é€šè¿‡å®æ—¶è¯†åˆ«è§†é¢‘ç”»é¢çš„ä¸»è‰²è°ƒï¼Œå¹¶åŠ¨æ€å°†å…¶å¡«å……åˆ°é»‘è¾¹åŒºåŸŸï¼Œä½¿è¾¹ç¼˜è‰²å½©ä¸è§†é¢‘å†…å®¹ä¿æŒä¸€è‡´ï¼Œæå‡æ•´ä½“è§†è§‰ç»Ÿä¸€æ€§ï¼Œä»è€Œè¥é€ å‡ºä¸è§†é¢‘å†…å®¹ç›¸åè°ƒçš„æ°›å›´æ•ˆæœï¼Œè®©è§‚ä¼—çš„è§‚çœ‹ä½“éªŒæ›´åŠ è‡ªç„¶å’Œæ²‰æµ¸ã€‚</p>
<p>ä¸‹é¢æ˜¯YouTubeçš„æ°›å›´æ¨¡å¼æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/047a991acb3b4a558b0ec276341531e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481562&amp;x-signature=IhzK8ll7nF6FPFH%2FWsKu4ZCJz8g%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>youtubeç«–å±æ•ˆæœ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47622cb9be444ec38d26cb0e5730e422~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481562&amp;x-signature=qMcG0PtCGWtR3zEfXbSKw1KPnYk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>youtubeæ¨ªå±æ•ˆæœ</p>
<p>ç™¾åº¦æ’­æ”¾å†…æ ¸å›¢é˜Ÿä¹Ÿå°†æ°›å›´æ¨¡å¼æ•ˆæœåº”ç”¨åˆ°äº†è§†é¢‘æ’­æ”¾åœºæ™¯ï¼Œç”¨äºæå‡ç”¨æˆ·è§‚çœ‹è§†é¢‘æ²‰æµ¸æ„Ÿï¼ŒåŒæ—¶åœ¨ç™¾åº¦Appã€å¥½çœ‹Appä¸¤æ¬¾äº§å“å®Œæˆä¸Šçº¿ã€‚æœ¬æ–‡å°†è¯¦ç»†è¯´æ˜è§†é¢‘åœºæ™¯æ°›å›´æ¨¡å¼æŠ€æœ¯æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">02 æ•´ä½“æŠ€æœ¯æ–¹æ¡ˆ</h2>
<p>æ°›å›´æ¨¡å¼é€šè¿‡åœ¨æ’­æ”¾å†…æ ¸è§†é¢‘åå¤„ç†é€šé“ï¼ˆFilterChainï¼‰æ·»åŠ ä¸€ä¸ªAmbientFilteræ»¤é•œå®ç°ï¼Œå…¶æ ¸å¿ƒæ€è·¯ï¼šé€šè¿‡AmbientFilteræ»¤é•œå…ˆå°†è§†é¢‘å¸§æ•°æ®ä»GPUä¸‹è½½åˆ°CPUï¼Œç„¶åå°†è§†é¢‘å¸§æ•°æ®æŒ‰å—è¿›è¡ŒåŒºåŸŸåˆ’åˆ†ï¼Œåˆ’åˆ†å®Œæˆåå†é€šè¿‡é¢œè‰²é‡åŒ–ç®—æ³•æå–æ¯ä¸ªåŒºåŸŸä¸»è‰²è°ƒï¼Œæœ€åå°†å„ä¸ªåŒºåŸŸä¸»è‰²è°ƒä¼ ç»™å¹³å°å±‚ï¼Œå¹³å°å±‚æ‹¿åˆ°ä¸»è‰²è°ƒè¿›è¡Œç»˜åˆ¶è§†é¢‘å››å‘¨æ°›å›´æ•ˆæœã€‚æ•´ä½“æ–¹æ¡ˆæµç¨‹å¤§è‡´å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efff8125738a428e9fe6402077c7f7e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481562&amp;x-signature=fodAnWu8sTbxeMmqLXeVcSO4bUk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ°›å›´æ¨¡å¼æ•´ä½“æ–¹æ¡ˆ</p>
<h3 data-id="heading-2"><strong>2.1 è§†é¢‘å¸§é‡‡æ ·</strong></h3>
<p>ä¸ºäº†æå–è§†é¢‘çš„ä¸»è‰²è°ƒï¼Œéœ€è¦è·å–è§†é¢‘å¸§æ•°æ®ã€‚ä½†æå–ä¸»è‰²è°ƒå¹¶ä¸è¦æ±‚æ¯å¸§éƒ½ä¸‹è½½ï¼Œå¤ªé¢‘ç¹ä¸‹è½½ä¼šæ‹–å®åº”ç”¨æ€§èƒ½ï¼Œåœ¨è§†è§‰ä¸Šä¹Ÿä¸ä¼šå¸¦æ¥ç‰¹åˆ«å¥½çš„ä½“éªŒã€‚å› æ­¤æˆ‘ä»¬å¯¹è§†é¢‘å¸§è¿›è¡Œé‡‡æ ·ä¸‹è½½ï¼šåœ¨ 25 FPS çš„è§†é¢‘ä¸‹ï¼Œæ¯éš”çº¦ 50 å¸§ï¼ˆçº¦ 2 ç§’ï¼‰é‡‡é›†ä¸€æ¬¡å¸§æ•°æ®ã€‚</p>
<p>åŒæ—¶ï¼Œä¸ºäº†é¿å…å°†è§†é¢‘å¸§æ•°æ®ä» GPU ä¸‹è½½åˆ° CPU æ—¶é˜»å¡æ¸²æŸ“çº¿ç¨‹ï¼Œæˆ‘ä»¬é‡‡å–äº†ä»¥ä¸‹ä¼˜åŒ–ï¼š</p>
<p>1. FBO å‹ç¼©ï¼šå…ˆå°†è§†é¢‘å¸§æ¸²æŸ“åˆ°è¾ƒä½åˆ†è¾¨ç‡çš„ FBOï¼ˆä¾‹å¦‚å°† 1080p å‹ç¼©åˆ° 108pï¼‰ï¼Œå¤§å¹…å‡å°‘å¾…ä¼ è¾“çš„æ•°æ®é‡ã€‚</p>
<p>2. PBO å¼‚æ­¥ä¼ è¾“ï¼šåˆ©ç”¨ PBO å¼‚æ­¥å°†å¸§æ•°æ®ä» GPU ä¸‹è½½åˆ° CPUï¼Œä»è€Œé¿å…é˜»å¡ä¸»æ¸²æŸ“çº¿ç¨‹ã€‚</p>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬æ—¢èƒ½ä¿è¯ä¸»è‰²è°ƒæå–çš„æ•ˆç‡ï¼Œåˆä¸ä¼šå½±å“è§†é¢‘çš„æµç•…æ’­æ”¾ã€‚æ¸²æŸ“çº¿ç¨‹å’Œæ°›å›´æ¨¡å¼å·¥ä½œçº¿ç¨‹ä¸¤ä¸ªçº¿ç¨‹å·¥ä½œæµç¨‹å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a739c05ac7646188b15eca2426cbe81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481562&amp;x-signature=R1VmW%2FDmik70cMxHYHhCuamrBd4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>çº¿ç¨‹æ ¸å¿ƒèŒè´£</p>
<h3 data-id="heading-3"><strong>2.2 ä¸»è‰²è°ƒæå–</strong></h3>
<h4 data-id="heading-4">2.2.1 è§†é¢‘å¸§åŒºåŸŸåˆ’åˆ†</h4>
<p>æ‹¿åˆ°è§†é¢‘å¸§æ•°æ®åï¼Œæˆ‘ä»¬å…ˆå°†è§†é¢‘å¸§åˆ’åˆ†å‡ºå‡ ä¸ªåŒºåŸŸã€‚é¡¹ç›®ä¸­æˆ‘ä»¬æ˜¯å°†è§†é¢‘å¸§ç”»é¢åˆ’åˆ†ä¸ºï¼šTopLeft, TopCenter, TopRight, BottomLeft, BottomCenter, BottomRight å…­ä¸ªåŒºåŸŸï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fced291d707f49509009a28bdbd7681a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481562&amp;x-signature=m2xwkhlZ2%2Br4QVTYW%2F8cNBFx0ok%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è§†é¢‘åŒºåŸŸå—åˆ’åˆ†</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æå–å‡ºæ¯å—åŒºåŸŸçš„ä¸»è‰²è°ƒã€‚</p>
<h4 data-id="heading-5">2.2.2 æå–ä¸»è‰²è°ƒ</h4>
<p>è¦æå–ç”»é¢ä¸»è‰²è°ƒï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡é¢œè‰²é‡åŒ–æŠ€æœ¯å®ç°çš„ã€‚é¢œè‰²é‡åŒ–ï¼ˆColor Quantizationï¼‰ æ˜¯ä¸€ç§å›¾åƒå¤„ç†æŠ€æœ¯ï¼Œç›®çš„æ˜¯å‡å°‘å›¾åƒä¸­ä½¿ç”¨çš„é¢œè‰²æ•°é‡ï¼ŒåŒæ—¶å°½é‡ä¿æŒåŸå›¾çš„è§†è§‰æ•ˆæœã€‚ä»£è¡¨æ€§çš„é¢œè‰²é‡åŒ–ç®—æ³•æœ‰ï¼š</p>
<p>1. ä¸­å€¼åˆ‡å‰²æ³•ï¼ˆMedian Cutï¼‰ï¼šå°†é¢œè‰²ç©ºé—´é€’å½’åˆ†å‰²æˆå°ç«‹æ–¹ä½“ï¼Œå–æ¯ä¸ªç«‹æ–¹ä½“çš„é¢œè‰²ä¸­ä½æ•°ä½œä¸ºè°ƒè‰²æ¿é¢œè‰²ã€‚</p>
<p>2. K-meansèšç±»ï¼šå°†é¢œè‰²æŒ‰ç›¸ä¼¼æ€§åˆ†ç»„ï¼Œå–æ¯ç»„çš„ä¸­å¿ƒä½œä¸ºè°ƒè‰²æ¿é¢œè‰²ã€‚</p>
<p>3. å…«å‰æ ‘ç®—æ³•ï¼šé€šè¿‡æ„å»ºå…«å‰æ ‘åˆ†å±‚åˆå¹¶é¢œè‰²ï¼Œé€å±‚å‡å°‘å¶å­èŠ‚ç‚¹æ•°é‡ï¼Œæœ€ç»ˆä¿ç•™é«˜é¢‘é¢œè‰²ã€‚</p>
<p>4. æµè¡Œè‰²ç®—æ³•ï¼ˆPopularityï¼‰ï¼šç»Ÿè®¡åŸå›¾é¢œè‰²å‡ºç°çš„é¢‘ç‡ï¼Œé€‰å–é«˜é¢‘é¢œè‰²ä½œä¸ºè°ƒè‰²æ¿ã€‚</p>
<p>è¿™å‡ ç§ç®—æ³•ä»å„ç»´åº¦å¯¹æ¯”æƒ…å†µå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6a49bfda08e4676b52998060b34d477~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481562&amp;x-signature=kzp47Y%2BHhpx%2BSw0ZOusAET3fW2c%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä»ç®—æ³•çš„é€Ÿåº¦ã€ç²¾åº¦ä»¥åŠå®ç°å¤æ‚åº¦ç­‰å¤šç»´åº¦è€ƒè™‘ï¼Œæ°›å›´æ¨¡å¼åœºæ™¯æˆ‘ä»¬é€‰ç”¨ä¸­å€¼åˆ‡å‰²æ³•å®Œæˆè§†é¢‘ç”»é¢ä¸»è‰²è°ƒçš„æå–ã€‚</p>
<h4 data-id="heading-6">2.2.3 ä¸­å€¼åˆ‡å‰²æ³•</h4>
<p>ä¸­å€¼åˆ‡å‰²æ³•ï¼ˆMedian Cutï¼‰æ˜¯ä¸€ç§ç”¨äºå›¾åƒé¢œè‰²é‡åŒ–çš„ç®—æ³•ï¼Œç®—æ³•æ ¸å¿ƒæ€æƒ³æ˜¯å°†é¢œè‰²ç©ºé—´é€’å½’åœ°åˆ†å‰²æˆæ›´å°çš„åŒºåŸŸï¼Œä»¥å‡å°‘å›¾åƒä¸­é¢œè‰²æ•°é‡ã€‚è¯¥ç®—æ³•çš„ç›®æ ‡æ˜¯åœ¨é¢œè‰²ç©ºé—´ä¸­é€‰æ‹©ä¸€ç»„ä»£è¡¨æ€§çš„é¢œè‰²ï¼Œè¿™äº›é¢œè‰²å¯ä»¥ç”¨äºç”Ÿæˆè°ƒè‰²æ¿ï¼Œä»è€Œå‡å°‘å›¾åƒçš„é¢œè‰²æ•°é‡ï¼ŒåŒæ—¶å°½é‡ä¿ç•™å›¾åƒçš„è§†è§‰æ•ˆæœã€‚ç®—æ³•æ ¸å¿ƒæ­¥éª¤å¦‚ä¸‹ï¼š</p>
<p><strong>1. åˆå§‹åŒ–é¢œè‰²ç›’</strong></p>
<p>a. é¦–å…ˆï¼Œå°†æ‰€æœ‰é¢œè‰²è§†ä¸ºä¸€ä¸ªå¤§çš„é¢œè‰²ç›’ï¼ˆå³æ•´ä¸ªé¢œè‰²ç©ºé—´çš„ä¸€ä¸ªåŒºåŸŸï¼‰ã€‚</p>
<p>b. é¢œè‰²ç›’åŒ…å«å›¾åƒä¸­æ‰€æœ‰åƒç´ çš„é¢œè‰²ã€‚</p>
<p><strong>2. é€‰æ‹©åˆ†å‰²è½´</strong></p>
<p>a. åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œé€‰æ‹©é¢œè‰²åˆ†é‡ï¼ˆçº¢ã€ç»¿ã€è“ï¼‰ä¸­èŒƒå›´æœ€å¤§çš„åˆ†é‡ä½œä¸ºåˆ†å‰²è½´ã€‚è¿™æ˜¯ä¸ºäº†æœ€å¤§é™åº¦åœ°å‡å°‘é¢œè‰²ç©ºé—´çš„ä¸å‡åŒ€æ€§ã€‚</p>
<p><strong>3. æŒ‰ä¸­å€¼åˆ†å‰²</strong></p>
<p>a. æ²¿ç€é€‰å®šçš„åˆ†å‰²è½´ï¼Œæ ¹æ®é¢œè‰²å€¼çš„ä¸­å€¼ï¼Œå°†é¢œè‰²ç›’åˆ†æˆä¸¤ä¸ªè¾ƒå°çš„ç›’ã€‚</p>
<p>b. è¿™ç§æ–¹æ³•ç¡®ä¿æ¯ä¸ªæ–°ç›’å­ä¸­åŒ…å«çš„é¢œè‰²æ•°é‡å°½å¯èƒ½ç›¸ç­‰ã€‚</p>
<p><strong>4. é€’å½’åˆ†å‰²</strong></p>
<p>a. å¯¹æ¯ä¸ªæ–°çš„é¢œè‰²ç›’é‡å¤æ­¥éª¤2å’Œ3ï¼Œç›´åˆ°è¾¾åˆ°æ‰€éœ€çš„é¢œè‰²ç›’æ•°é‡ï¼ˆé€šå¸¸æ˜¯æ‰€éœ€è°ƒè‰²æ¿çš„å¤§å°ï¼‰ã€‚</p>
<p><strong>5. ç”Ÿæˆè°ƒè‰²æ¿</strong></p>
<p>a. ä¸€æ—¦é¢œè‰²ç›’çš„æ•°é‡è¾¾åˆ°é¢„æœŸçš„æ•°é‡ï¼Œå¯¹æ¯ä¸ªç›’å­è®¡ç®—å¹³å‡é¢œè‰²æˆ–ä¸­å€¼é¢œè‰²ï¼Œå°†å…¶ä½œä¸ºä»£è¡¨é¢œè‰²æ·»åŠ åˆ°è°ƒè‰²æ¿ä¸­ã€‚</p>
<p><strong>6. é¢œè‰²æ˜ å°„</strong></p>
<p>a. ä½¿ç”¨ç”Ÿæˆçš„è°ƒè‰²æ¿ï¼Œé‡æ–°æ˜ å°„åŸå§‹å›¾åƒä¸­çš„æ¯ä¸ªåƒç´ åˆ°æœ€æ¥è¿‘çš„è°ƒè‰²æ¿é¢œè‰²ã€‚</p>
<p>ä¸­å€¼åˆ‡å‰²ç®—æ³•æ ¸å¿ƒæµç¨‹å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17ff6df1c48249829968465058be3946~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481562&amp;x-signature=%2BLU9VtAbxchwlbb1radhJ9qpW%2B0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸­å€¼åˆ‡å‰²ç®—æ³•</p>
<h2 data-id="heading-7">03 å¹³å°æ¸²æŸ“æ°›å›´æ•ˆæœ</h2>
<p>å½“nativeå±‚æå–å®Œè§†é¢‘å¸§å„åŒºåŸŸä¸»è‰²è°ƒåï¼Œå°†è‰²å€¼ä¼ ç»™å¹³å°å±‚ï¼ˆAndroid/iOSï¼‰ã€‚å¹³å°å±‚æ”¶åˆ°è‰²å€¼åï¼Œå°†è‰²å€¼æ¸²æŸ“åˆ°è§†é¢‘å››å‘¨ä»¥äº§ç”Ÿæ°›å›´æ•ˆæœã€‚ä¸ºä¿è¯å„ä¸ªåŒºåŸŸè‰²å€¼è¿‡æ¸¡è‡ªç„¶ï¼Œä»¥åŠå‰åä¸¤å¸§çš„è‰²å€¼å¹³æ»‘è¿‡æ¸¡ï¼Œéœ€è¦å€ŸåŠ©å¹³å°å±‚æ¸å˜ã€åŠ¨ç”»ã€rgbæ’å€¼ç­‰æŠ€æœ¯å®ç°ã€‚ ä¸‹é¢ç»“åˆAndroidå’ŒiOSä¸¤ä¸ªå¹³å°åˆ†åˆ«ä»‹ç»å…·ä½“æ€è·¯ã€‚</p>
<h3 data-id="heading-8"><strong>3.1 Androidå¹³å°</strong></h3>
<p>Android ä½¿ç”¨è‡ªå®šä¹‰viewæŠ€æœ¯ï¼Œå®Œæˆæ°›å›´è‰²å€¼çš„æ¸²æŸ“ã€‚æˆ‘ä»¬æä¾›ä¸€ä¸ªè‡ªå®šä¹‰viewåä¸ºAmbientView æ¥å®Œæˆè¿™ä¸ªåŠŸèƒ½ã€‚æœ‰äº†AmbientViewä¹‹åï¼Œå¸ƒå±€ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;FrameLayout
Â  Â Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"match_parent"</span>
Â  Â Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"match_parent"</span>
Â  Â Â android:<span class="hljs-attr">layout_gravity</span>=<span class="hljs-string">"center"</span>&gt;
Â  Â  Â  Â Â &lt;com.baidu.cyberplayer.sdk.AmbientView
Â  Â  Â  Â  Â  Â Â android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/left_ambient"</span>
Â  Â  Â  Â  Â  Â Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"xxxdp"</span>
Â  Â  Â  Â  Â  Â Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"match_parent"</span>/&gt;
Â  Â  Â  Â Â &lt;FrameLayout
Â  Â  Â  Â  Â  Â Â android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/video_container"</span>
Â  Â  Â  Â  Â  Â Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"wrap_content"</span>
Â  Â  Â  Â  Â  Â Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"wrap_content"</span>/&gt;
Â  Â  Â  Â Â &lt;com.baidu.cyberplayer.sdk.AmbientView
Â  Â  Â  Â  Â  Â Â android:<span class="hljs-attr">id</span>=<span class="hljs-string">"@+id/right_ambient"</span>
Â  Â  Â  Â  Â  Â Â android:<span class="hljs-attr">layout_width</span>=<span class="hljs-string">"xxxdp"</span>
Â  Â  Â  Â  Â  Â Â android:<span class="hljs-attr">layout_height</span>=<span class="hljs-string">"match_parent"</span>/&gt;
&lt;/FrameLayout&gt;

</code></pre>
<p>ä¸Šé¢ä¸ºè§†é¢‘æ¨ªå±ä¸‹å¸ƒå±€å¤§è‡´æƒ…å†µï¼Œidä¸ºvideo_containerçš„FrameLayoutæ˜¯æ’­æ”¾å™¨å®¹å™¨ï¼Œåœ¨æ’­æ”¾å™¨å®¹å™¨å·¦å³å„æ‘†æ”¾ä¸€ä¸ªAmbientViewæ¸²æŸ“æ°›å›´æ¨¡å¼ï¼ŒAmbientViewçš„å®½åº¦ä¼šæ ¹æ®æ’­æ”¾å™¨çš„å°ºå¯¸çš„å˜åŒ–åœ¨ä»£ç ä¸­åŠ¨æ€è°ƒæ•´ã€‚</p>
<p>AmbientViewæ ¸å¿ƒåŠŸèƒ½ï¼š</p>
<p>1. ç›¸é‚»åŒºåŸŸçš„ä¸»è‰²è°ƒï¼Œä½¿ç”¨LinearGradientæ‹‰å‡ºçº¿å½¢æ¸å˜ã€‚å¯¹äºæ¨ªå±è§†é¢‘ï¼Œæˆ‘ä»¬æ¸å˜æ–¹å‘å°±æ˜¯ä»ä¸Šè‡³ä¸‹ã€‚æ‰€ä»¥æ›´æ–°æ°›å›´è‰²å€¼çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">privateÂ voidÂ <span class="hljs-built_in">updateGradient</span>()Â {
Â  Â  mLinearGradient =Â newÂ <span class="hljs-built_in">LinearGradient</span>(<span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>, getHeight(),
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mColors,Â null, Shader<span class="hljs-selector-class">.TileMode</span><span class="hljs-selector-class">.CLAMP</span>);
Â  Â  mPaint<span class="hljs-selector-class">.setShader</span>(mLinearGradient);
Â  Â  <span class="hljs-built_in">invalidate</span>();
}

</code></pre>
<p>2. å‰åä¸¤å¸§æ°›å›´è‰²å€¼çš„åˆ‡æ¢ï¼Œä¸ºäº†é¢œè‰²åˆ‡æ¢ä¸æ˜¾å¾—ç”Ÿç¡¬ï¼Œæˆ‘ä»¬å€ŸåŠ©Androidå±æ€§åŠ¨ç”»ä»¥åŠRGBæ’å€¼å®ç°è‰²å€¼ç¼“æ…¢æ¸å˜æ•ˆæœï¼Œæ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">privateÂ voidÂ startColorAnimator()Â {
Â  Â Â int<span class="hljs-section">[]</span> <span class="hljs-attr">lastColors</span> =Â newÂ int[mLastColors.length]<span class="hljs-comment">;</span>
Â  Â Â forÂ (intÂ <span class="hljs-attr">i</span> =Â <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; lastColors.length; i++) {</span>
Â  Â  Â  Â  lastColors<span class="hljs-section">[i]</span> = mLastColors<span class="hljs-section">[i]</span><span class="hljs-comment">;</span>
Â  Â  }

Â  Â  <span class="hljs-attr">mColorAnimator</span> = ValueAnimator.<span class="hljs-literal">ofF</span>loat(<span class="hljs-number">0</span>,Â <span class="hljs-number">1</span>f)<span class="hljs-comment">;</span>
Â  Â  mColorAnimator.setDuration(1500)<span class="hljs-comment">;</span>
Â  Â  mColorAnimator.addUpdateListener(newÂ ValueAnimator.AnimatorUpdateListener() {
Â  Â  Â  Â  @Override
Â  Â  Â  Â Â publicÂ voidÂ onAnimationUpdate(@NonNull ValueAnimator valueAnimator)Â {
Â  Â  Â  Â  Â  Â Â floatÂ <span class="hljs-attr">progress</span> = (float) valueAnimator.getAnimatedValue()<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  interpolateColors(progress, lastColors)<span class="hljs-comment">;</span>
Â  Â  Â  Â  Â  Â  updateGradient()<span class="hljs-comment">;</span>
Â  Â  Â  Â  }
Â  Â  })<span class="hljs-comment">;</span>
Â  Â  mColorAnimator.start()<span class="hljs-comment">;</span>
}

/**
Â * æ’å€¼è®¡ç®—color
Â */
privateÂ voidÂ interpolateColors(floatÂ progress,Â int<span class="hljs-section">[]</span> lastColors)Â {
Â  Â Â ifÂ (<span class="hljs-attr">mCurColors</span> ==Â nullÂ || mCurColors.length &lt;=Â <span class="hljs-number">0</span>) {
Â  Â  Â  Â Â return<span class="hljs-comment">;</span>
Â  Â  }

Â  Â  ArgbEvaluator <span class="hljs-attr">evaluator</span> =Â newÂ ArgbEvaluator()<span class="hljs-comment">;</span>
Â  Â Â forÂ (intÂ <span class="hljs-attr">i</span> =Â <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; mCurColors.length; i++) {</span>
Â  Â  Â  Â  mColors<span class="hljs-section">[i]</span> = (int) evaluator.evaluate(progress, lastColors<span class="hljs-section">[i]</span>, mCurColors<span class="hljs-section">[i]</span>)<span class="hljs-comment">;</span>
Â  Â  }
}

</code></pre>
<p>mColorAnimatoræ˜¯ä¸€ä¸ªValueAnimatorå¯¹è±¡ï¼Œé€šè¿‡ValueAnimatoræˆ‘ä»¬åˆ›å»ºä¸€ä¸ª1500msçš„åŠ¨ç”»ï¼Œåœ¨åŠ¨ç”»çš„æ›´æ–°å‡½æ•°é‡Œé¢ï¼Œæˆ‘ä»¬è°ƒç”¨äº†interpolateColorsï¼Œè¿™ä¸ªæ–¹æ³•å†…éƒ¨å°±æ˜¯ç”¨ArgbEvaluatorå®ŒæˆRGBé¢œè‰²æ’å€¼ï¼Œæ›´æ–°åˆ°mColorsæ•°ç»„ä¸­ã€‚æœ€åè°ƒç”¨updateGradientæ–¹æ³•è§¦å‘AmbientViewé‡ç»˜ã€‚</p>
<p>3. æ¸å˜é®ç½©ï¼šæœ€åæˆ‘ä»¬è¿˜è¦åœ¨ä¸Šé¢æ·»åŠ ä¸€å±‚é»‘è‰²æ¸å˜é®ç½©ï¼Œä¿è¯æ°›å›´åŒºåŸŸä¸è¦å¤ªçªå…€ï¼Œä»¥å…è¿‡åº¦å¸å¼•ç”¨æˆ·çœ¼çƒï¼Œå¯¼è‡´ç”¨æˆ·æ³¨æ„åŠ›ä¸åœ¨è§†é¢‘å†…å®¹æœ¬èº«ä¸Šé¢ã€‚é»‘è‰²é®ç½©å®ç°ä¹Ÿéå¸¸ç®€å•ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">float<span class="hljs-section">[]</span> <span class="hljs-attr">mPositions</span> = {<span class="hljs-number">0.0</span>f,Â <span class="hljs-number">1.0</span>f}<span class="hljs-comment">;</span>
int<span class="hljs-section">[]</span> <span class="hljs-attr">mMaskColors</span> = {<span class="hljs-number">0</span>x88000000,Â <span class="hljs-number">0</span>xff000000}<span class="hljs-comment">;</span>
// ä»å·¦åˆ°å³æ¸å˜
<span class="hljs-attr">mMaskLinearGradient</span> =Â newÂ LinearGradient(<span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>, getWidth(),Â <span class="hljs-number">0</span>,
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  mMaskColors, mPositions, Shader.TileMode.CLAMP)<span class="hljs-comment">;</span>
mMaskPaint.setShader(mMaskLinearGradient)<span class="hljs-comment">;</span>
// ç»˜åˆ¶é»‘è‰²æ¸å˜è’™å±‚
canvas.drawRect(0,Â 0, getWidth(), getHeight(), mMaskPaint)<span class="hljs-comment">;</span>

</code></pre>
<h3 data-id="heading-9"><strong>3.2 Â iOSå¹³å°</strong></h3>
<p>iOSç«¯åŒæ ·æä¾›äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ AmbientViewï¼ˆæ°›å›´è§†å›¾ï¼‰ï¼Œä¸ºè§†é¢‘æ’­æ”¾åœºæ™¯æä¾›åŠ¨æ€æ¸å˜èƒŒæ™¯å’Œé®ç½©æ•ˆæœï¼Œå¢å¼ºè§†è§‰æ²‰æµ¸æ„Ÿã€‚</p>
<p>1. åŒå›¾å±‚æ¶æ„è®¾è®¡ï¼šé‡‡ç”¨ä¸»æ¸å˜å±‚ä¸é®ç½©å±‚åˆ†ç¦»çš„æ¶æ„æ–¹æ¡ˆï¼Œç¡®ä¿è‰²å½©æ¸²æŸ“ä¸è¾¹ç¼˜é®ç½©æ•ˆæœäº’ä¸å¹²æ‰°ï¼Œæå‡æ•´ä½“æ¸²æŸ“æ•ˆç‡ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">- (void)setupSubLayers {
Â  Â  <span class="hljs-attr">_gradientLayer</span> = [CAGradientLayerÂ layer]<span class="hljs-comment">;</span>
Â  Â  <span class="hljs-attr">_gradientLayer.frame</span> =Â self.bounds<span class="hljs-comment">;</span>
Â  Â  <span class="hljs-section">[self.layer addSublayer:_gradientLayer]</span><span class="hljs-comment">;</span>

Â  Â  <span class="hljs-attr">_maskLayer</span> = [CAGradientLayerÂ layer]<span class="hljs-comment">;</span>
Â  Â  <span class="hljs-attr">_maskLayer.frame</span> =Â self.bounds<span class="hljs-comment">;</span>
Â  Â  <span class="hljs-section">[self.layer addSublayer:_maskLayer]</span><span class="hljs-comment">;</span>
}

</code></pre>
<p>2. æµç•…åŠ¨ç”»å¼•æ“ï¼šåŸºäºCADisplayLinkæ„å»ºåŠ¨ç”»å¾ªç¯ï¼Œé€šè¿‡å®æ—¶é¢œè‰²æ’å€¼è®¡ç®—ï¼Œå®ç°ç»†è…»æµç•…çš„è‰²å½©è¿‡æ¸¡æ•ˆæœã€‚</p>
<pre><code class="hljs language-ini" lang="ini">-Â (void)startAnimation {
Â  Â Â // æ ¸å¿ƒåŠŸèƒ½ä»£ç 
Â  Â Â <span class="hljs-attr">self.displayLink</span>Â =Â [CADisplayLinkÂ displayLinkWithTarget:selfÂ selector:@selector(updateColors)]<span class="hljs-comment">;</span>
Â  Â  <span class="hljs-section">[self.displayLink addToRunLoop:[NSRunLoopÂ mainRunLoop]</span> forMode:NSRunLoopCommonModes]<span class="hljs-comment">;</span>
}

-Â (void)updateColors {
Â  Â Â CGFloatÂ <span class="hljs-attr">progress</span>Â =Â MIN(<span class="hljs-number">1.0</span>, (CACurrentMediaTime()Â -Â self.startTime)Â /Â self.animationDuration)<span class="hljs-comment">;</span>
Â  Â Â NSMutableArrayÂ *<span class="hljs-attr">interpolated</span>Â =Â [NSMutableArrayÂ array]<span class="hljs-comment">;</span>
Â  Â Â forÂ (NSUIntegerÂ <span class="hljs-attr">i</span>Â =Â <span class="hljs-number">0</span><span class="hljs-comment">; iÂ &lt;Â self.endColors.count; i++) {</span>
Â  Â  Â  Â Â UIColorÂ *<span class="hljs-attr">from</span>Â =Â iÂ &lt;Â self.startColors.countÂ ?Â self.startColors[i] : [UIColorÂ clearColor]<span class="hljs-comment">;</span>
Â  Â  Â  Â Â UIColorÂ *<span class="hljs-attr">to</span>Â =Â self.endColors[i]<span class="hljs-comment">;</span>
Â  Â  Â  Â  <span class="hljs-section">[interpolated addObject:(__bridge id)[selfÂ interpolateFrom:from to:to progress:progress]</span>.CGColor]<span class="hljs-comment">;</span>
Â  Â  }
Â  Â  <span class="hljs-attr">_gradientLayer.colors</span>Â =Â interpolated<span class="hljs-comment">;</span>
}

-Â (UIColorÂ *)interpolateFrom:(UIColorÂ *)from to:(UIColorÂ *)to progress:(CGFloat)progress {
Â  Â Â CGFloatÂ fr, fg, fb, fa, tr, tg, tb, ta<span class="hljs-comment">;</span>
Â  Â  <span class="hljs-section">[from getRed:&amp;fr green:&amp;fg blue:&amp;fb alpha:&amp;fa]</span><span class="hljs-comment">;</span>
Â  Â  <span class="hljs-section">[to getRed:&amp;tr green:&amp;tg blue:&amp;tb alpha:&amp;ta]</span><span class="hljs-comment">;</span>
Â  Â Â returnÂ <span class="hljs-section">[UIColorÂ colorWithRed:frÂ +Â (trÂ -Â fr)Â *Â progress
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â green:fgÂ +Â (tgÂ -Â fg)Â *Â progress
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  blue:fbÂ +Â (tbÂ -Â fb)Â *Â progress
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â alpha:faÂ +Â (taÂ -Â fa)Â *Â progress]</span><span class="hljs-comment">;</span>
}

</code></pre>
<p>3. æ¸å˜é®ç½©ï¼šé‡‡ç”¨å¤šæ®µå¼æ¸å˜é®ç½©é…åˆåŠ é€Ÿæ›²çº¿ç®—æ³•ï¼Œæ‰“é€ è‡ªç„¶çš„è¾¹ç¼˜è¿‡æ¸¡ï¼Œæœ‰æ•ˆå¢å¼ºè§†è§‰å±‚æ¬¡æ„Ÿã€‚</p>
<pre><code class="hljs language-ini" lang="ini">- (void)makeMaskColorsAndLocations {
Â  Â Â constÂ NSIntegerÂ <span class="hljs-attr">steps</span> =Â <span class="hljs-number">6</span><span class="hljs-comment">;</span>
Â  Â Â forÂ (NSIntegerÂ <span class="hljs-attr">i</span> =Â <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; steps; i++) {</span>
Â  Â  Â  Â Â CGFloatÂ <span class="hljs-attr">t</span> = (CGFloat)i / (steps -Â <span class="hljs-number">1</span>)<span class="hljs-comment">;</span>
Â  Â  Â  Â Â CGFloatÂ <span class="hljs-attr">acceleratedT</span> = t * t<span class="hljs-comment">;</span>
Â  Â  Â  Â Â CGFloatÂ <span class="hljs-attr">currentAlpha</span> = a + (<span class="hljs-number">1.0</span>Â - a) * acceleratedT<span class="hljs-comment">;</span>

Â  Â  Â  Â Â UIColorÂ *<span class="hljs-attr">color</span> = [UIColorÂ colorWithRed:r green:g blue:b alpha:currentAlpha]<span class="hljs-comment">;</span>
Â  Â  Â  Â  <span class="hljs-section">[_maskColors addObject:(__bridgeÂ id)color.CGColor]</span><span class="hljs-comment">;</span>
Â  Â  Â  Â  <span class="hljs-section">[_maskColorsLocations addObject:@(t)]</span><span class="hljs-comment">;</span>
Â  Â  }
Â  Â  <span class="hljs-attr">_maskLayer.colors</span> = _maskColors<span class="hljs-comment">;</span>
Â  Â  <span class="hljs-attr">_maskLayer.locations</span> = _maskColorsLocations<span class="hljs-comment">;</span>
Â  Â  <span class="hljs-attr">_maskLayer.startPoint</span> =Â CGPointMake(<span class="hljs-number">0</span>,Â <span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
Â  Â  <span class="hljs-attr">_maskLayer.endPoint</span> =Â CGPointMake(<span class="hljs-number">1</span>,Â <span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
}

</code></pre>
<p>è¯¥å®ç°ç¡®ä¿äº†æ°›å›´æ¸²æŸ“çš„é«˜æ€§èƒ½å’Œä¼˜ç¾è§†è§‰æ•ˆæœï¼Œä¸ºç”¨æˆ·æä¾›äº†æ²‰æµ¸å¼çš„è§‚çœ‹ä½“éªŒã€‚</p>
<h2 data-id="heading-10">04 æ•ˆæœå±•ç¤º</h2>
<p>æ°›å›´æ¨¡å¼å·²åœ¨ç™¾åº¦å†…åŒ…æ‹¬ç™¾åº¦Appå’Œå¥½çœ‹Appä¸¤æ¬¾Appå®Œæˆä¸Šçº¿ï¼Œå…¶ä¸­ç™¾åº¦Appä¸»è¦é›†ä¸­åœ¨æœç´¢ä¸‰æ–¹å½±è§†åœºæ™¯ï¼Œå¥½çœ‹Appæ‰€æœ‰è§†é¢‘æ¨ªå±åœºæ™¯ï¼ˆæ’é™¤å¹¿å‘Šè§†é¢‘ï¼‰ã€‚åŒæ—¶åœ¨è§†é¢‘è§‚çœ‹æ—¶é•¿ã€åˆ†å‘ã€å®Œæ’­ç‡ç­‰UBSæŒ‡æ ‡å–å¾—äº†æ­£å‘æ”¶ç›Šï¼Œè¯´æ˜æ°›å›´æ¨¡å¼ç»™ç”¨æˆ·å¸¦æ¥äº†ä¸é”™çš„æ²‰æµ¸å¼è§‚å½±ä½“éªŒã€‚</p>
<p>ä¸‹é¢æ˜¯ç™¾åº¦Appå’Œå¥½çœ‹Appæ•ˆæœå±•ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b2cac248a8241519c544f37d741908b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481562&amp;x-signature=FSGBL8zPM08006qKnl%2FcTGuggqg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç™¾åº¦Appæ°›å›´æ¨¡å¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/823557021bd1475aa4c2d20289cc5d6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55m-5bqmR2Vla-ivtA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481562&amp;x-signature=p0h7JvMuUXNXHlJCqjydfuVoLGY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¥½çœ‹Appæ°›å›´æ¨¡å¼</p>
<h2 data-id="heading-11"><strong><strong><strong>5. æ€»ç»“</strong></strong></strong></h2>
<p>æ°›å›´æ¨¡å¼æ˜¯ä¸€ç§è§†è§‰å¢å¼ºåŠŸèƒ½ï¼Œé€šè¿‡æŠ€æœ¯æ‰‹æ®µæœ‰æ•ˆè§£å†³äº†è§†é¢‘æ¯”ä¾‹ä¸åŒ¹é…å¯¼è‡´çš„é»‘è¾¹é—®é¢˜ï¼Œæ˜¾è‘—æå‡äº†ç”¨æˆ·è§†è§‰ä½“éªŒï¼Œä¸»è¦è¡¨ç°åœ¨å¦‚ä¸‹å‡ ä¸ªæ–¹é¢ï¼š</p>
<p>1. è§†è§‰æ²‰æµ¸ï¼šæ°›å›´æ¨¡å¼é€šè¿‡åœ¨è§†é¢‘å‘¨å›´æ·»åŠ æŸ”å’Œçš„èƒŒæ™¯é¢œè‰²ï¼Œä½¿å±å¹•çš„è¾¹ç¼˜ä¸è§†é¢‘å†…å®¹æ›´å¥½åœ°èåˆã€‚è¿™ç§è®¾è®¡ä½¿å¾—ç”¨æˆ·åœ¨è§‚çœ‹è§†é¢‘æ—¶æ„Ÿè§‰æ›´åŠ æ²‰æµ¸ï¼Œå‡å°‘äº†è§†é¢‘ä¸å‘¨å›´ç¯å¢ƒä¹‹é—´çš„è§†è§‰å‰²è£‚</p>
<p>2. èˆ’é€‚è§‚çœ‹ï¼šè¿™ç§æ¨¡å¼å¯ä»¥å‡å°‘é•¿æ—¶é—´è§‚çœ‹è§†é¢‘æ—¶çš„çœ¼ç›ç–²åŠ³ã€‚é€šè¿‡åœ¨è§†é¢‘å‘¨å›´ä½¿ç”¨æŸ”å’Œçš„è‰²å½©è¿‡æ¸¡ï¼Œå¯ä»¥ç¼“è§£äº®åº¦å·®å¼‚å¸¦æ¥çš„è§†è§‰åˆºæ¿€ï¼Œä»è€Œæé«˜è§‚çœ‹èˆ’é€‚åº¦ã€‚</p>
<p>3. æå‡è§‚æ„Ÿï¼šæ°›å›´æ¨¡å¼é€šè¿‡æ™ºèƒ½åœ°è°ƒæ•´èƒŒæ™¯è‰²å½©ï¼Œä½¿å…¶ä¸è§†é¢‘ä¸­çš„ä¸»è¦è‰²è°ƒç›¸åŒ¹é…ï¼Œæå‡æ•´ä½“è§‚æ„Ÿã€‚è¿™ä½¿å¾—è§†é¢‘å†…å®¹æ›´åŠ çªå‡ºï¼ŒåŒæ—¶ä¸ºè§‚çœ‹è€…æä¾›ä¸€ç§æ›´ä¸ºå’Œè°çš„è§†è§‰ä½“éªŒã€‚</p>
<p>é€šè¿‡æœ¬æ–‡ä»‹ç»çš„æŠ€æœ¯æ–¹æ¡ˆï¼Œå¼€å‘è€…å¯ä»¥å®ç°ç±»ä¼¼ä¸»æµè§†é¢‘å¹³å°çš„é«˜è´¨é‡æ°›å›´æ¨¡å¼æ•ˆæœï¼Œä¸ºç”¨æˆ·å¸¦æ¥æ›´åŠ æ²‰æµ¸çš„è§‚çœ‹ä½“éªŒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javaåç«¯è¿›é˜¶ï¼šå¤„ç†å¤šæ•°æ®æºèšåˆAPI â€”â€” ä»¥å¤©è¿œå°å¾®ä¼ä¸šæŠ¥å‘Šä¸ºä¾‹]]></title>    <link>https://juejin.cn/post/7584273076645478406</link>    <guid>https://juejin.cn/post/7584273076645478406</guid>    <pubDate>2025-12-16T09:21:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584273076645478406" data-draft-id="7584057497206980651" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javaåç«¯è¿›é˜¶ï¼šå¤„ç†å¤šæ•°æ®æºèšåˆAPI â€”â€” ä»¥å¤©è¿œå°å¾®ä¼ä¸šæŠ¥å‘Šä¸ºä¾‹"/> <meta itemprop="keywords" content="API,å¤§æ•°æ®"/> <meta itemprop="datePublished" content="2025-12-16T09:21:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤©è¿œAPI"/> <meta itemprop="url" content="https://juejin.cn/user/195070305779163"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javaåç«¯è¿›é˜¶ï¼šå¤„ç†å¤šæ•°æ®æºèšåˆAPI â€”â€” ä»¥å¤©è¿œå°å¾®ä¼ä¸šæŠ¥å‘Šä¸ºä¾‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/195070305779163/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤©è¿œAPI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T09:21:34.000Z" title="Tue Dec 16 2025 09:21:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ç”¨ Java æ„å»ºâ€œå…¬ç§è”åŠ¨â€çš„ä¿¡è´·å®¡æ‰¹ä¸­å°</h2>
<p>åœ¨å•†ä¸šé“¶è¡Œä¸ä¾›åº”é“¾é‡‘èçš„ä¿¡è´·ç³»ç»Ÿä¸­ï¼Œ<strong>å°å¾®ä¼ä¸šè´·</strong>ï¼ˆSME Loanï¼‰çš„é£æ§é€»è¾‘æœ€ä¸ºå¤æ‚ã€‚å®ƒè¦æ±‚ç³»ç»Ÿæ—¢è¦åƒæŸ¥ä¼ä¸šä¸€æ ·æ ¸éªŒå·¥å•†å¸æ³•ä¿¡æ¯ï¼Œåˆè¦åƒæŸ¥ä¸ªäººä¸€æ ·è¯„ä¼°ä¼ä¸šä¸»ï¼ˆæ³•äººï¼‰çš„å¿å€ºèƒ½åŠ›ã€‚</p>
<p><strong>å¤©è¿œAPI</strong> çš„â€œå…¨èƒ½å°å¾®ä¼ä¸šæŠ¥å‘Šâ€ï¼ˆCOMBQN13ï¼‰ï¼Œé€šè¿‡å•ä¸€æ¥å£èšåˆäº† <strong>QYGL3F8Eï¼ˆäººä¼å…³ç³»ï¼‰</strong> ã€<strong>JRZQ7F1Aï¼ˆå…¨æ™¯é›·è¾¾ï¼‰</strong> ã€<strong>JRZQ8A2Dï¼ˆç‰¹æ®Šåå•ï¼‰</strong> å’Œ <strong>FLXG7E8Fï¼ˆå¸æ³•æ¶‰è¯‰ï¼‰</strong> å››å¤§æ ¸å¿ƒäº§å“ 111ã€‚è¿™ç§â€œä¸€åŒ…å››æŸ¥â€çš„è®¾è®¡æå¤§é™ä½äº†ç½‘ç»œäº¤äº’é¢‘æ¬¡ï¼Œä½†ä¹Ÿç»™ Java åç«¯å¸¦æ¥äº†æŒ‘æˆ˜ï¼šå¦‚ä½•å°†æ¥å£è¿”å›çš„å¼‚æ„ <code>JSON Array</code> è§£æä¸ºæ ‡å‡†çš„ Java å¯¹è±¡ï¼Œä»¥ä¾¿è¾“å…¥åˆ° Drools æˆ– EasyRules ç­‰è§„åˆ™å¼•æ“ä¸­ï¼Ÿ</p>
<p>æœ¬æ–‡å°†æä¾›ä¸€å¥—å®Œæ•´çš„ Java è§£å†³æ–¹æ¡ˆï¼Œæ¶µç›– <strong>AES åŠ å¯†å·¥å…·ç±»</strong>ã€<strong>ç»„åˆå“åº”çš„ POJO æ˜ å°„ç­–ç•¥</strong> ä»¥åŠ <strong>æ ¸å¿ƒé£æ§æŒ‡æ ‡çš„æå–é€»è¾‘</strong>ï¼ŒåŠ©åŠ›å¼€å‘è€…æ„å»ºé«˜å¥å£®æ€§çš„å°å¾®é£æ§æœåŠ¡ã€‚</p>
<h2 data-id="heading-1">äºŒã€APIæ¥å£è°ƒç”¨ç¤ºä¾‹ï¼ˆJavaç‰ˆï¼‰</h2>
<p>æœ¬æ¥å£é‡‡ç”¨æ ‡å‡†çš„ AES-128-CBC åŠ å¯†ã€‚ç”±äºè¯·æ±‚å‚æ•°æ¶‰åŠ <code>authorized</code>ï¼ˆæˆæƒä¹¦çŠ¶æ€ï¼‰ï¼Œè¯·ç¡®ä¿åœ¨ä¸šåŠ¡æµç¨‹ä¸­å·²ç•™å­˜ç”¨æˆ·çš„ç”µå­ç­¾åæˆ–æˆæƒæ—¥å¿—ã€‚</p>
<h3 data-id="heading-2">1. æ¥å£é…ç½®æ¦‚è§ˆ</h3>
<ul>
<li><strong>æœåŠ¡åœ°å€</strong>ï¼š<code>https://api.tianyuanapi.com/api/v1/COMBQN13</code> 2</li>
<li><strong>è¯·æ±‚æ–¹å¼</strong>ï¼šPOST</li>
<li><strong>é‰´æƒ</strong>ï¼šHeader (<code>Access-Id</code>) + Body (<code>data</code> å¯†æ–‡)</li>
<li><strong>æ•°æ®ç‰¹ç‚¹</strong>ï¼šå“åº”ä½“åŒ…å«ä¸€ä¸ª <code>responses</code> æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ å¯¹åº”ä¸€ä¸ªå­äº§å“ 3ã€‚</li>
</ul>
<h3 data-id="heading-3">2. Java å®Œæ•´æ¥å…¥ä»£ç </h3>
<p>ä¸ºäº†å¤„ç†èšåˆå“åº”ï¼Œæœ¬ç¤ºä¾‹å®šä¹‰äº†ä¸€ä¸ª <code>SmeRiskService</code> ç±»ã€‚æˆ‘ä»¬ä½¿ç”¨ Jackson çš„ <code>JsonNode</code> æ¥çµæ´»å¤„ç†ä¸åŒå­äº§å“çš„ <code>data</code> ç»“æ„ï¼Œé¿å…å®šä¹‰è¿‡äºåºå¤§çš„å®ä½“ç±»ã€‚</p>
<p>Java</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.JsonNode;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.node.ArrayNode;

<span class="hljs-keyword">import</span> javax.crypto.Cipher;
<span class="hljs-keyword">import</span> javax.crypto.spec.IvParameterSpec;
<span class="hljs-keyword">import</span> javax.crypto.spec.SecretKeySpec;
<span class="hljs-keyword">import</span> java.io.BufferedReader;
<span class="hljs-keyword">import</span> java.io.InputStreamReader;
<span class="hljs-keyword">import</span> java.io.OutputStream;
<span class="hljs-keyword">import</span> java.net.HttpURLConnection;
<span class="hljs-keyword">import</span> java.net.URL;
<span class="hljs-keyword">import</span> java.nio.charset.StandardCharsets;
<span class="hljs-keyword">import</span> java.security.SecureRandom;
<span class="hljs-keyword">import</span> java.util.Base64;
<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-comment">/**
 * å¤©è¿œå°å¾®ä¼ä¸šå…¨èƒ½æŠ¥å‘Š API æœåŠ¡
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmeRiskService</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">API_URL</span> <span class="hljs-operator">=</span> <span class="hljs-string">"&lt;https://api.tianyuanapi.com/api/v1/COMBQN13&gt;"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">ACCESS_ID</span> <span class="hljs-operator">=</span> <span class="hljs-string">"YOUR_ACCESS_ID"</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">ACCESS_KEY</span> <span class="hljs-operator">=</span> <span class="hljs-string">"YOUR_ACCESS_KEY_HEX"</span>; <span class="hljs-comment">// 16å­—èŠ‚ Hex</span>

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// 1. å‘èµ·èšåˆæŸ¥è¯¢</span>
            <span class="hljs-type">SmeRiskSummary</span> <span class="hljs-variable">summary</span> <span class="hljs-operator">=</span> querySmeReport(<span class="hljs-string">"å¼ ä¸‰"</span>, <span class="hljs-string">"110101199001011234"</span>, <span class="hljs-string">"13800138000"</span>);

            <span class="hljs-keyword">if</span> (summary != <span class="hljs-literal">null</span>) {
                System.out.println(<span class="hljs-string">"=== å°å¾®ä¼ä¸šä¸»é£é™©æ‘˜è¦ ==="</span>);
                System.out.println(<span class="hljs-string">"å…³è”ä¼ä¸š: "</span> + summary.getCompanyName());
                System.out.println(<span class="hljs-string">"ç»è¥çŠ¶æ€: "</span> + summary.getRegStatus());
                System.out.println(<span class="hljs-string">"ä¸ªäººå€Ÿè´·è¡Œä¸ºåˆ†: "</span> + summary.getLoanBehaviorScore());
                System.out.println(<span class="hljs-string">"è¿‘åŠå¹´é€¾æœŸé‡‘é¢: "</span> + summary.getOverdueAmount6M());
                System.out.println(<span class="hljs-string">"æ¶‰è¯‰æœªç»“æ¡ˆæ•°: "</span> + summary.getOpenLawsuitCount());
                
                <span class="hljs-comment">// ç®€å•çš„æ‹’å•è§„åˆ™æ¼”ç¤º</span>
                <span class="hljs-keyword">if</span> (<span class="hljs-string">"æ³¨é”€"</span>.equals(summary.getRegStatus()) || summary.getOpenLawsuitCount() &gt; <span class="hljs-number">0</span>) {
                    System.err.println(<span class="hljs-string">"[REJECT] å‘½ä¸­æ‹’å•è§„åˆ™ï¼šä¼ä¸šæ³¨é”€æˆ–å­˜åœ¨æœªç»“æ¡ˆæ¶‰è¯‰"</span>);
                }
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            e.printStackTrace();
        }
    }

    <span class="hljs-comment">/**
     * æŸ¥è¯¢å¹¶æ¸…æ´—æ•°æ®ï¼Œè¿”å›é¢†åŸŸæ¨¡å‹å¯¹è±¡
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SmeRiskSummary <span class="hljs-title function_">querySmeReport</span><span class="hljs-params">(String name, String idCard, String mobile)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-comment">// 1. å‡†å¤‡å‚æ•°</span>
        Map&lt;String, String&gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
        params.put(<span class="hljs-string">"name"</span>, name);
        params.put(<span class="hljs-string">"id_card"</span>, idCard);
        params.put(<span class="hljs-string">"mobile_no"</span>, mobile);
        params.put(<span class="hljs-string">"authorized"</span>, <span class="hljs-string">"1"</span>); <span class="hljs-comment">// å¿…é¡»è·å¾—æˆæƒ</span>

        <span class="hljs-comment">// 2. åŠ å¯†</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">encryptedData</span> <span class="hljs-operator">=</span> AesUtil.encrypt(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>().writeValueAsString(params), ACCESS_KEY);

        <span class="hljs-comment">// 3. å‘é€è¯·æ±‚</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">responseJson</span> <span class="hljs-operator">=</span> sendPost(encryptedData);

        <span class="hljs-comment">// 4. è§£æå“åº”ç»“æ„</span>
        <span class="hljs-type">ObjectMapper</span> <span class="hljs-variable">mapper</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectMapper</span>();
        <span class="hljs-type">JsonNode</span> <span class="hljs-variable">rootNode</span> <span class="hljs-operator">=</span> mapper.readTree(responseJson);
        
        <span class="hljs-comment">// å‡è®¾å¤–å±‚æœªåŠ å¯†ï¼Œç›´æ¥è§£æ responses æ•°ç»„</span>
        <span class="hljs-comment">// è‹¥ data å­—æ®µåŠ å¯†ï¼Œéœ€å…ˆè§£å¯† data å†è§£æï¼Œé€»è¾‘åŒä¸Š</span>
        <span class="hljs-type">JsonNode</span> <span class="hljs-variable">responses</span> <span class="hljs-operator">=</span> rootNode.get(<span class="hljs-string">"responses"</span>);
        <span class="hljs-keyword">if</span> (responses == <span class="hljs-literal">null</span> || !responses.isArray()) {
            System.err.println(<span class="hljs-string">"æ— æ•ˆçš„å“åº”æ ¼å¼"</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }

        <span class="hljs-comment">// 5. æ ¸å¿ƒï¼šä»èšåˆæ•°æ®ä¸­æå–å…³é”®æŒ‡æ ‡</span>
        <span class="hljs-keyword">return</span> parseRiskSummary(responses);
    }

    <span class="hljs-comment">/**
     * æ•°æ®æ¸…æ´—å™¨ï¼šéå†å­äº§å“æ•°ç»„ï¼Œæå–æ ¸å¿ƒå­—æ®µ
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SmeRiskSummary <span class="hljs-title function_">parseRiskSummary</span><span class="hljs-params">(JsonNode responses)</span> {
        <span class="hljs-type">SmeRiskSummary</span> <span class="hljs-variable">summary</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SmeRiskSummary</span>();

        <span class="hljs-keyword">for</span> (JsonNode item : responses) {
            <span class="hljs-type">String</span> <span class="hljs-variable">apiCode</span> <span class="hljs-operator">=</span> item.get(<span class="hljs-string">"api_code"</span>).asText();
            <span class="hljs-type">boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> item.get(<span class="hljs-string">"success"</span>).asBoolean();
            <span class="hljs-type">JsonNode</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> item.get(<span class="hljs-string">"data"</span>);

            <span class="hljs-keyword">if</span> (!success || data == <span class="hljs-literal">null</span> || data.isNull()) <span class="hljs-keyword">continue</span>;

            <span class="hljs-comment">// åˆ†å‘å¤„ç†é€»è¾‘</span>
            <span class="hljs-keyword">switch</span> (apiCode) {
                <span class="hljs-keyword">case</span> <span class="hljs-string">"QYGL3F8E"</span>: <span class="hljs-comment">// äººä¼å…³ç³»</span>
                    <span class="hljs-keyword">if</span> (data.has(<span class="hljs-string">"items"</span>) &amp;&amp; data.get(<span class="hljs-string">"items"</span>).isArray() &amp;&amp; data.get(<span class="hljs-string">"items"</span>).size() &gt; <span class="hljs-number">0</span>) {
                        <span class="hljs-type">JsonNode</span> <span class="hljs-variable">company</span> <span class="hljs-operator">=</span> data.get(<span class="hljs-string">"items"</span>).get(<span class="hljs-number">0</span>).get(<span class="hljs-string">"basicInfo"</span>);
                        summary.setCompanyName(company.path(<span class="hljs-string">"name"</span>).asText());
                        summary.setRegStatus(company.path(<span class="hljs-string">"regStatus"</span>).asText());
                    }
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"JRZQ7F1A"</span>: <span class="hljs-comment">// å…¨æ™¯é›·è¾¾</span>
                    summary.setLoanBehaviorScore(data.path(<span class="hljs-string">"behavior_report_detail"</span>).path(<span class="hljs-string">"B22170001"</span>).asText(<span class="hljs-string">"0"</span>));
                    summary.setOverdueAmount6M(data.path(<span class="hljs-string">"behavior_report_detail"</span>).path(<span class="hljs-string">"B22170031"</span>).asText(<span class="hljs-string">"0"</span>));
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"JRZQ8A2D"</span>: <span class="hljs-comment">// ç‰¹æ®Šåå•</span>
                    summary.setCourtBad(data.path(<span class="hljs-string">"id"</span>).path(<span class="hljs-string">"court_bad"</span>).asText(<span class="hljs-string">"æœªå‘½ä¸­"</span>));
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">"FLXG7E8F"</span>: <span class="hljs-comment">// å¸æ³•æ¶‰è¯‰</span>
                    summary.setOpenLawsuitCount(data.path(<span class="hljs-string">"judicial_data"</span>).path(<span class="hljs-string">"lawsuitStat"</span>)
                            .path(<span class="hljs-string">"count"</span>).path(<span class="hljs-string">"count_wei_total"</span>).asInt(<span class="hljs-number">0</span>));
                    <span class="hljs-keyword">break</span>;
            }
        }
        <span class="hljs-keyword">return</span> summary;
    }

    <span class="hljs-comment">// --- é¢†åŸŸæ¨¡å‹ DTO ---</span>
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SmeRiskSummary</span> {
        <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">companyName</span> <span class="hljs-operator">=</span> <span class="hljs-string">"æœªæŸ¥å¾—"</span>;
        <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">regStatus</span> <span class="hljs-operator">=</span> <span class="hljs-string">"æœªçŸ¥"</span>;
        <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">loanBehaviorScore</span> <span class="hljs-operator">=</span> <span class="hljs-string">"0"</span>;
        <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">overdueAmount6M</span> <span class="hljs-operator">=</span> <span class="hljs-string">"0"</span>;
        <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> <span class="hljs-variable">courtBad</span> <span class="hljs-operator">=</span> <span class="hljs-string">"æœªå‘½ä¸­"</span>;
        <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">openLawsuitCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// Getters &amp; Setters çœç•¥...</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCompanyName</span><span class="hljs-params">(String name)</span> { <span class="hljs-built_in">this</span>.companyName = name; }
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getCompanyName</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> companyName; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setRegStatus</span><span class="hljs-params">(String status)</span> { <span class="hljs-built_in">this</span>.regStatus = status; }
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getRegStatus</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> regStatus; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setLoanBehaviorScore</span><span class="hljs-params">(String score)</span> { <span class="hljs-built_in">this</span>.loanBehaviorScore = score; }
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getLoanBehaviorScore</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> loanBehaviorScore; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setOverdueAmount6M</span><span class="hljs-params">(String amt)</span> { <span class="hljs-built_in">this</span>.overdueAmount6M = amt; }
        <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getOverdueAmount6M</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> overdueAmount6M; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCourtBad</span><span class="hljs-params">(String status)</span> { <span class="hljs-built_in">this</span>.courtBad = status; }
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setOpenLawsuitCount</span><span class="hljs-params">(<span class="hljs-type">int</span> count)</span> { <span class="hljs-built_in">this</span>.openLawsuitCount = count; }
        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getOpenLawsuitCount</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> openLawsuitCount; }
    }

    <span class="hljs-comment">// --- HTTP &amp; AES Utils (ç®€åŒ–ç‰ˆ) ---</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">sendPost</span><span class="hljs-params">(String data)</span> <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">URL</span> <span class="hljs-variable">url</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">URL</span>(API_URL + <span class="hljs-string">"?t="</span> + System.currentTimeMillis());
        <span class="hljs-type">HttpURLConnection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> (HttpURLConnection) url.openConnection();
        conn.setRequestMethod(<span class="hljs-string">"POST"</span>);
        conn.setRequestProperty(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"application/json"</span>);
        conn.setRequestProperty(<span class="hljs-string">"Access-Id"</span>, ACCESS_ID);
        conn.setDoOutput(<span class="hljs-literal">true</span>);
        <span class="hljs-keyword">try</span> (<span class="hljs-type">OutputStream</span> <span class="hljs-variable">os</span> <span class="hljs-operator">=</span> conn.getOutputStream()) {
            os.write((<span class="hljs-string">"{\"data\":\""</span> + data + <span class="hljs-string">"\"}"</span>).getBytes(StandardCharsets.UTF_8));
        }
        <span class="hljs-keyword">try</span> (<span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(conn.getInputStream(), StandardCharsets.UTF_8))) {
            <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
            String line;
            <span class="hljs-keyword">while</span> ((line = br.readLine()) != <span class="hljs-literal">null</span>) sb.append(line);
            <span class="hljs-keyword">return</span> sb.toString();
        }
    }

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AesUtil</span> {
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">encrypt</span><span class="hljs-params">(String content, String key)</span> <span class="hljs-keyword">throws</span> Exception {
            <span class="hljs-type">byte</span>[] iv = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">16</span>];
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">SecureRandom</span>().nextBytes(iv);
            <span class="hljs-type">Cipher</span> <span class="hljs-variable">cipher</span> <span class="hljs-operator">=</span> Cipher.getInstance(<span class="hljs-string">"AES/CBC/PKCS5Padding"</span>);
            cipher.init(Cipher.ENCRYPT_MODE, <span class="hljs-keyword">new</span> <span class="hljs-title class_">SecretKeySpec</span>(key.getBytes(StandardCharsets.UTF_8), <span class="hljs-string">"AES"</span>), <span class="hljs-keyword">new</span> <span class="hljs-title class_">IvParameterSpec</span>(iv));
            <span class="hljs-type">byte</span>[] enc = cipher.doFinal(content.getBytes(StandardCharsets.UTF_8));
            <span class="hljs-type">byte</span>[] combined = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">16</span> + enc.length];
            System.arraycopy(iv, <span class="hljs-number">0</span>, combined, <span class="hljs-number">0</span>, <span class="hljs-number">16</span>);
            System.arraycopy(enc, <span class="hljs-number">0</span>, combined, <span class="hljs-number">16</span>, enc.length);
            <span class="hljs-keyword">return</span> Base64.getEncoder().encodeToString(combined);
        }
    }
}
</code></pre>
<h2 data-id="heading-4">ä¸‰ã€æ ¸å¿ƒæ•°æ®ç»“æ„è§£æ</h2>
<h3 data-id="heading-5">1. èšåˆå“åº”æ¨¡å¼</h3>
<p>æ¥å£è¿”å›çš„ <code>data</code> å¹¶éç›´æ¥çš„ä¸šåŠ¡å¯¹è±¡ï¼Œè€Œæ˜¯ä¸€ä¸ªç”±å­äº§å“å“åº”ç»„æˆçš„åˆ—è¡¨ã€‚Java å¼€å‘è€…åº”ä½¿ç”¨ <strong>ç­–ç•¥æ¨¡å¼</strong> æˆ– <strong>Switch-Case</strong> ç»“æ„æ ¹æ® <code>api_code</code> å­—æ®µè¿›è¡Œåˆ†å‘å¤„ç†ã€‚</p>
<p>JSON</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"responses"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"api_code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"QYGL3F8E"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> ... <span class="hljs-punctuation">}</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// äººä¼å…³ç³»</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"api_code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"JRZQ7F1A"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> ... <span class="hljs-punctuation">}</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// å…¨æ™¯é›·è¾¾</span>
    <span class="hljs-punctuation">{</span> <span class="hljs-attr">"api_code"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"JRZQ8A2D"</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"success"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> ... <span class="hljs-punctuation">}</span> <span class="hljs-punctuation">}</span>  <span class="hljs-comment">// ç‰¹æ®Šåå•</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-6">2. å­—æ®µæ˜ å°„æŒ‘æˆ˜</h3>
<p>æ¯ä¸ªå­äº§å“çš„å­—æ®µå‘½åé£æ ¼ä¸åŒï¼š</p>
<ul>
<li><strong>QYGL3F8E</strong>ï¼šä½¿ç”¨é©¼å³°å‘½åï¼ˆå¦‚ <code>regStatus</code>ï¼‰4ã€‚</li>
<li><strong>JRZQ7F1A</strong>ï¼šä½¿ç”¨å¤§å†™ä»£ç ï¼ˆå¦‚ <code>B22170001</code>ï¼‰55ã€‚</li>
<li><strong>JRZQ8A2D</strong>ï¼šä½¿ç”¨ä¸‹åˆ’çº¿å‘½åï¼ˆå¦‚ <code>id_court_bad</code>ï¼‰6ã€‚</li>
</ul>
<p>å»ºè®®åœ¨ Java å®ä½“ç±»ï¼ˆå¦‚ä¸Šæ–‡çš„ <code>SmeRiskSummary</code>ï¼‰ä¸­ç»Ÿä¸€é‡å‘½åä¸ºç¬¦åˆä¸šåŠ¡è¯­ä¹‰çš„å­—æ®µï¼ˆå¦‚ <code>loanScore</code>, <code>companyStatus</code>ï¼‰ï¼Œå±è”½åº•å±‚çš„å¼‚æ„æ€§ã€‚</p>
<h2 data-id="heading-7">å››ã€å­—æ®µè¯¦è§£ï¼ˆJava å¼€å‘é‡ç‚¹ï¼‰</h2>
<p>ä»¥ä¸‹è¡¨æ ¼æ¢³ç†äº†åœ¨ Java é£æ§ç³»ç»Ÿä¸­ï¼Œç”¨äº**è‡ªåŠ¨å‡†å…¥ï¼ˆAuto-Approveï¼‰<strong>æˆ–</strong>è‡ªåŠ¨æ‹’å•ï¼ˆAuto-Rejectï¼‰**çš„å…³é”®å­—æ®µã€‚</p>
<h3 data-id="heading-8">1. ä¼ä¸šç»è¥ç»´åº¦ (QYGL3F8E)</h3>




















<table><thead><tr><th><strong>å­—æ®µè·¯å¾„ (JSON Path)</strong></th><th><strong>ä¸šåŠ¡å«ä¹‰</strong></th><th><strong>é€»è¾‘å»ºè®®</strong></th></tr></thead><tbody><tr><td><code>items[0].basicInfo.regStatus</code></td><td>ç»è¥çŠ¶æ€</td><td>è‹¥åŒ…å«â€œæ³¨é”€â€ã€â€œåŠé”€â€ï¼ŒJava é€»è¾‘åº”ç›´æ¥æŠ›å‡º <code>RejectException</code> 7ã€‚</td></tr><tr><td><code>items[0].basicInfo.estiblishTime</code></td><td>æˆç«‹æ—¶é—´</td><td>è®¡ç®—ç»è¥å¹´é™ï¼Œå¦‚ <code>&lt; 1å¹´</code> åˆ™å½’ä¸ºé«˜é£é™© 8ã€‚</td></tr></tbody></table>
<h3 data-id="heading-9">2. ä¼ä¸šä¸»è¿˜æ¬¾èƒ½åŠ› (JRZQ7F1A)</h3>

























<table><thead><tr><th><strong>å­—æ®µä»£ç </strong></th><th><strong>å­—æ®µå«ä¹‰</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td><strong>B22170001</strong></td><td>è´·æ¬¾è¡Œä¸ºåˆ†</td><td>1-1000ã€‚åˆ†æ•°è¶Šä½ï¼Œä¸ªäººä¿¡ç”¨è¶Šå·® 9999ã€‚</td></tr><tr><td><strong>B22170031</strong></td><td>è¿‘6ä¸ªæœˆç´¯è®¡é€¾æœŸé‡‘é¢</td><td>åŒºé—´å€¼ï¼ˆå¦‚ <code>[5000,10000)</code>ï¼‰ã€‚ç”¨äºè®¡ç®—è´Ÿå€ºå‹åŠ› 10ã€‚</td></tr><tr><td><strong>B22170026</strong></td><td>è¿‘12ä¸ªæœˆM0+é€¾æœŸç¬”æ•°</td><td>è¡¡é‡è¿˜æ¬¾æ„æ„¿ã€‚è‹¥ &gt; 3ï¼Œå»ºè®®è½¬äººå·¥ 11ã€‚</td></tr></tbody></table>
<h3 data-id="heading-10">3. å¸æ³•ä¸é»‘åå• (JRZQ8A2D / FLXG7E8F)</h3>




















<table><thead><tr><th><strong>å­—æ®µè·¯å¾„</strong></th><th><strong>å­—æ®µå«ä¹‰</strong></th><th><strong>é€»è¾‘å»ºè®®</strong></th></tr></thead><tbody><tr><td><code>id.court_bad</code></td><td>æ³•é™¢å¤±ä¿¡äºº</td><td>å€¼ <code>0</code> è¡¨ç¤ºå‘½ä¸­ã€‚<strong>ä¸€ç¥¨å¦å†³</strong>æŒ‡æ ‡ 12ã€‚</td></tr><tr><td><code>lawsuitStat.count.money_wei_total</code></td><td>æ¶‰è¯‰æœªç»“æ¡ˆé‡‘é¢</td><td>ä¼ä¸šä¸»çš„æ½œåœ¨è´Ÿå€ºï¼Œéœ€è®¡å…¥ DTIï¼ˆå€ºåŠ¡æ”¶å…¥æ¯”ï¼‰è®¡ç®— 13ã€‚</td></tr></tbody></table>
<h2 data-id="heading-11">äº”ã€åº”ç”¨ä»·å€¼åˆ†æ</h2>
<p>é›†æˆ<strong>å¤©è¿œå…¨èƒ½å°å¾®ä¼ä¸šæŠ¥å‘Š</strong>åï¼ŒJava åç«¯ç³»ç»Ÿå¯å®ç°ä»¥ä¸‹æ ¸å¿ƒèƒ½åŠ›ï¼š</p>
<ol>
<li>
<p>å…¬ç§è”åŠ¨ç”»åƒæ„å»ºï¼š</p>
<p>åœ¨ä¸€æ¬¡ API äº‹åŠ¡ä¸­ï¼ŒåŒæ—¶è·å–â€œä¼ä¸šçš„å£³â€å’Œâ€œæ³•äººçš„æ ¸â€ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¼ä¸šç»è¥æ­£å¸¸ï¼ˆQYGL3F8Eï¼‰ï¼Œä½†æ³•äººè¿‘æœŸæœ‰å¤§é‡ç½‘è´·é€¾æœŸï¼ˆJRZQ7F1Aï¼‰ï¼Œç³»ç»Ÿå¯è‡ªåŠ¨åˆ¤å®šä¸ºâ€œç»è¥æ€§èµ„é‡‘æŒªç”¨é£é™©â€ï¼Œæ‹’ç»æ”¾æ¬¾ã€‚</p>
</li>
<li>
<p>ä¾›åº”é“¾é‡‘èè‡ªåŠ¨å‡†å…¥ï¼š</p>
<p>å¯¹äºç»é”€å•†èèµ„åœºæ™¯ï¼ŒJava æœåŠ¡å¯ä»¥é…ç½®è§„åˆ™é“¾ï¼š</p>
<ul>
<li>
<p>Step 1: æ ¡éªŒä¼ä¸šæ˜¯å¦å­˜ç»­ï¼ˆQYGL3F8Eï¼‰ã€‚</p>
</li>
<li>
<p>Step 2: æ ¡éªŒæ³•äººæ˜¯å¦ä¸ºè€èµ–ï¼ˆJRZQ8A2Dï¼‰ã€‚</p>
</li>
<li>
<p>Step 3: æ ¡éªŒæ¶‰è¯‰é‡‘é¢æ˜¯å¦è¶…è¿‡æ³¨å†Œèµ„æœ¬çš„ 50%ï¼ˆFLXG7E8Fï¼‰ã€‚</p>
<p>å…¨éƒ¨é€šè¿‡åï¼Œè‡ªåŠ¨è§¦å‘æˆä¿¡æµç¨‹ã€‚</p>
</li>
</ul>
</li>
<li>
<p>è´·åé£é™©é¢„è­¦ï¼š</p>
<p>åˆ©ç”¨ Java çš„ Quartz æˆ– Spring Scheduler å®šæ—¶ä»»åŠ¡ï¼Œå®šæœŸè°ƒç”¨æ­¤æ¥å£ã€‚è‹¥å‘ç°å­˜é‡å®¢æˆ·çš„ openLawsuitCountï¼ˆæœªç»“æ¡ˆæ•°ï¼‰çªå¢ï¼Œç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆé£æ§å·¥å•ï¼Œæç¤ºå®¢æˆ·ç»ç†è¿›è¡Œè´·åå›è®¿ã€‚</p>
</li>
</ol>
<h2 data-id="heading-12">å…­ã€æ€»ç»“</h2>
<p>å¯¹äº Java å¼€å‘è€…è€Œè¨€ï¼Œ<strong>å¤©è¿œå…¨èƒ½å°å¾®ä¼ä¸šæŠ¥å‘Š</strong> æ˜¯ä¸€ä¸ªå…¸å‹çš„â€œèƒ–æ¥å£â€ã€‚å¯¹æ¥çš„å…³é”®åœ¨äºç¼–å†™å¥å£®çš„ <strong>è§£æå™¨ï¼ˆParserï¼‰</strong> ï¼Œèƒ½å¤Ÿå…¼å®¹å­äº§å“çš„æˆåŠŸä¸å¤±è´¥çŠ¶æ€ï¼Œå¹¶å°†å¼‚æ„æ•°æ®æ¸…æ´—ä¸ºç»Ÿä¸€çš„é¢†åŸŸæ¨¡å‹ã€‚</p>
<p>é€šè¿‡æœ¬æ–‡æä¾›çš„ <code>SmeRiskService</code> ç¤ºä¾‹ï¼Œæ‚¨å¯ä»¥å¿«é€Ÿæ‰“é€šä»æ•°æ®è·å–ã€æ¸…æ´—åˆ°è§„åˆ™åˆ¤å®šçš„å…¨æµç¨‹ï¼Œä¸ºä¼ä¸šæ„å»ºä¸€ä¸ªé«˜æ•ˆã€æ™ºèƒ½çš„å°å¾®é£æ§å¤§è„‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¯” Kettle å¿«2å€çš„ Java ETL å¼€æºåº“ï¼šEtl-engine]]></title>    <link>https://juejin.cn/post/7584286241487634472</link>    <guid>https://juejin.cn/post/7584286241487634472</guid>    <pubDate>2025-12-16T09:22:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584286241487634472" data-draft-id="7584043969687961652" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¯” Kettle å¿«2å€çš„ Java ETL å¼€æºåº“ï¼šEtl-engine"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-16T09:22:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å˜å½¢ä¾ åŒ»"/> <meta itemprop="url" content="https://juejin.cn/user/2418581313172413"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¯” Kettle å¿«2å€çš„ Java ETL å¼€æºåº“ï¼šEtl-engine
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2418581313172413/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å˜å½¢ä¾ åŒ»
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T09:22:38.000Z" title="Tue Dec 16 2025 09:22:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    20
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘åœ¨Githubä¸Šå‘ç°äº†ä¸€ä¸ªä¸é”™çš„å¼€æºé¡¹ç›®ï¼ŒåŸºäºJavaçš„ETLå¼€å‘åº“ï¼Œå·ç§°è¡¨æ•°æ®å¯¼å…¥é€Ÿåº¦æ˜¯kettleçš„2å€ï¼Œè€Œä¸”ç®€å•æ˜“ç”¨ï¼Œæ¨èä¸€æ³¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fadd2ws%2Fetl-engine-project" target="_blank" title="https://github.com/add2ws/etl-engine-project" ref="nofollow noopener noreferrer">add2ws/etl-engine-project: A fast &amp; stable &amp; flexible ETL tool.</a></p>
<h2 data-id="heading-0">ğŸš€ é¡¹ç›®ç®€ä»‹</h2>
<p><strong><code>Etl-engine</code></strong> æ˜¯ä¸€ä¸ªè½»é‡ã€ç¨³å¥ã€æ˜“æ‰©å±•çš„é¢å‘å¼€å‘è€…çš„ ETLï¼ˆæŠ½å–ã€è½¬æ¢ã€åŠ è½½ï¼‰åº“ï¼Œæ—¨åœ¨æˆä¸º **Kettle (PDI) çš„é«˜æ€§èƒ½æ›¿ä»£æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸ”¥ æ ¸å¿ƒä¼˜åŠ¿</h2>
<p><strong><code>Etl-engine</code></strong> æä¾›ä»¥ä¸‹ä¸‰å¤§æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<h3 data-id="heading-2">1. æè‡´çš„é€Ÿåº¦ âš¡ï¸</h3>
<p>é€šè¿‡æ‰¹é‡æ“ä½œå’Œéé˜»å¡çš„ç¼“å­˜ç®¡é“è®¾è®¡ï¼Œæ˜¾è‘—æå‡æ•°æ®å¤„ç†å’Œæ•°æ®åº“ I/O é€Ÿåº¦ã€‚</p>
<p>ğŸ“Š <strong>å®æµ‹æ•°æ®ï¼š</strong> å¤„ç† <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>200</mn><mo separator="true">,</mo><mn>000</mn></mrow><annotation encoding="application/x-tex">200,000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em;"/><span class="mord">200</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">000</span></span></span></span></span> æ¡æ•°æ®çš„æ’å…¥/æ›´æ–°ä»»åŠ¡ï¼Œ<code>etl-engine</code> çš„é€Ÿåº¦æ˜¯ <strong>Kettle çš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn mathvariant="bold">2</mn></mrow><annotation encoding="application/x-tex">\mathbf{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord mathbf">2</span></span></span></span></span> å€å·¦å³</strong>ã€‚</p>
<p><strong>Kettle:</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/730ea2f329a54295bb8d105999f16a41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-Y5b2i5L6g5Yy7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766482988&amp;x-signature=2bmKC1ZVdzuGltXFP6ZzZkk8zgs%3D" alt="1765353174408.png" loading="lazy"/></p>
<p><strong>Etl-engine:</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bbd84d731054490b95ed994e30bd014d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-Y5b2i5L6g5Yy7:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766482988&amp;x-signature=cpJbFBaGSTitgy9ULJEh45JBfQQ%3D" alt="1765353763090.png" loading="lazy"/></p>
<h3 data-id="heading-3">2. è¿è¡Œç¨³å¥å¯é  ğŸ›¡ï¸</h3>
<p>æ•°æ®æµä¼ è¾“è¿‡ç¨‹ä¸­å¦‚æœé‡åˆ°å¼‚å¸¸ä¸ä¼šé©¬ä¸Šåœæ­¢ï¼Œè‡ªåŠ¨å°è¯•é‡æ–°è¯»å–æˆ–å†™å…¥æ•°æ®ã€‚</p>
<h3 data-id="heading-4">3. è½»é‡ä¸”æ˜“äºæ‰©å±• ğŸ§©</h3>
<p>æ ¸å¿ƒä»…ç”± <strong>Node(èŠ‚ç‚¹)</strong> , <strong>Pipe(ç®¡é“)</strong> , <strong>Dataflow(æ•°æ®æµ)</strong> 3ä¸ªä¸»è¦ç»„ä»¶æ„æˆï¼Œæ‰€æœ‰æ•°æ®åŠ è½½é€»è¾‘éƒ½æŠ½è±¡ä¸ºå¯æ‰©å±•çš„<strong>èŠ‚ç‚¹</strong>ã€‚é™¤äº†å†…ç½®çš„JDBCæ•°æ®æºèŠ‚ç‚¹ï¼Œç”¨æˆ·å¯ä»¥è½»æ¾ç»§æ‰¿åŸºç±»ï¼Œå¿«é€Ÿå¼€å‘æ–°çš„æ•°æ®æºï¼ˆå¦‚ Httpã€Redisï¼‰æˆ–è‡ªå®šä¹‰è½¬æ¢é€»è¾‘ï¼Œæ»¡è¶³ç‰¹å®šçš„ä¸šåŠ¡éœ€æ±‚ã€‚</p>
<hr/>
<h2 data-id="heading-5">ğŸ› ï¸ ä½¿ç”¨ç¤ºä¾‹</h2>
<p>ä»¥ä¸‹ä»£ç å±•ç¤ºäº†å¦‚ä½•å¿«é€Ÿæ„å»ºä¸€ä¸ªå°† <strong>Oracle æ•°æ®ï¼ˆæŠ½å–ï¼‰</strong> é€šè¿‡ <strong>Upsert æ–¹å¼åŒæ­¥åˆ° PostgreSQLï¼ˆåŠ è½½ï¼‰</strong> çš„ ETL ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-6">1. ä¸€ä¸ªè¡¨è¾“å…¥åˆ°ä¸€ä¸ªè¡¨è¾“å‡º</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
  sqlInputNode --pipe--&gt; upsertOutputNode
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//åˆ›å»ºOracleæ•°æ®æº</span>
<span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSourceOracle</span> <span class="hljs-operator">=</span> DataSourceUtil.getOracleDataSource();
<span class="hljs-comment">//åˆ›å»ºè¡¨è¾“å…¥èŠ‚ç‚¹</span>
<span class="hljs-type">SqlInputNode</span> <span class="hljs-variable">sqlInputNode</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlInputNode</span>(dataSourceOracle, <span class="hljs-string">"select * from t_resident_info"</span>);

<span class="hljs-comment">//åˆ›å»ºPostgresæ•°æ®æº</span>
<span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSourcePG</span> <span class="hljs-operator">=</span> DataSourceUtil.getPostgresDataSource();
<span class="hljs-comment">//åˆ›å»ºæ’å…¥/æ›´æ–°èŠ‚ç‚¹</span>
<span class="hljs-type">UpsertOutputNode</span> <span class="hljs-variable">upsertOutputNode</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpsertOutputNode</span>(dataSourcePG, <span class="hljs-string">"t_resident_info"</span>, <span class="hljs-number">1000</span>);
<span class="hljs-comment">//è®¾ç½®å”¯ä¸€æ ‡è¯†(ä¸»é”®)æ˜ å°„ï¼Œç”¨äºåˆ¤æ–­ Insert æˆ– Update</span>
upsertOutputNode.setIdentityMapping(Arrays.asList(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Tuple2</span>&lt;&gt;(<span class="hljs-string">"ID"</span>, <span class="hljs-string">"ID"</span>)));

<span class="hljs-comment">//åˆ›å»ºç®¡é“ï¼Œå¹¶è®¾å®šç¼“å†²åŒºä¸º1000æ¡æ•°æ®</span>
<span class="hljs-type">Pipe</span> <span class="hljs-variable">pipe</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pipe</span>(<span class="hljs-number">1000</span>);
<span class="hljs-comment">//è¿æ¥è¡¨è¾“å…¥å’Œè¾“å‡ºèŠ‚ç‚¹</span>
pipe.connect(sqlInputNode, upsertOutputNode);

<span class="hljs-comment">//åˆ›å»ºæ•°æ®æµå®ä¾‹</span>
<span class="hljs-type">Dataflow</span> <span class="hljs-variable">dataflow</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dataflow</span>(sqlInputNode);
<span class="hljs-comment">//å¯åŠ¨æ•°æ®æµï¼Œå¹¶è®¾å®š5åˆ†é’Ÿåè¶…æ—¶</span>
dataflow.syncStart(<span class="hljs-number">5</span>, TimeUnit.MINUTES);
</code></pre>
<h3 data-id="heading-7">2. ä¸€ä¸ªè¡¨è¾“å…¥åˆ°å¤šä¸ªè¾“å‡º</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
  sqlInputNode --pipe--&gt; upsertOutputNode
  sqlInputNode --pipe--&gt; csvOutputNode
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//åˆ›å»ºOracleæ•°æ®æº</span>
<span class="hljs-type">DataSource</span> <span class="hljs-variable">oracleDataSource</span> <span class="hljs-operator">=</span> DataSourceUtil.getOracleDataSource();
<span class="hljs-type">SqlInputNode</span> <span class="hljs-variable">sqlInputNode</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlInputNode</span>(oracleDataSource, <span class="hljs-string">"select * from etl_base.t_resident_info where rownum&lt;=50000 order by id"</span>);

<span class="hljs-comment">//åˆ›å»ºPostgresç›®æ ‡æ•°æ®æº</span>
<span class="hljs-type">DataSource</span> <span class="hljs-variable">postgresDataSource</span> <span class="hljs-operator">=</span> DataSourceUtil.getPostgresDataSource();
<span class="hljs-type">UpsertOutputNode</span> <span class="hljs-variable">upsertOutputNode</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UpsertOutputNode</span>(postgresDataSource, <span class="hljs-string">"public.t_resident_info"</span>, <span class="hljs-number">1000</span>);
upsertOutputNode.setIdentityMapping(Arrays.asList(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Tuple2</span>&lt;&gt;(<span class="hljs-string">"ID"</span>,<span class="hljs-string">"ID"</span>)));

<span class="hljs-comment">//åˆ›å»ºcsvæ–‡ä»¶ç›®æ ‡</span>
<span class="hljs-type">FileOutputNode</span> <span class="hljs-variable">fileOutputNode</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputNode</span>(<span class="hljs-string">"E:/output_"</span> + System.currentTimeMillis() + <span class="hljs-string">".csv"</span>, FileOutputNode.Format.CSV);

<span class="hljs-comment">//åˆ›å»ºç®¡é“å¹¶è¿æ¥Oracleå’ŒPostgres</span>
<span class="hljs-type">Pipe</span> <span class="hljs-variable">pipe</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pipe</span>(<span class="hljs-number">1000</span>);
pipe.connect(sqlInputNode,upsertOutputNode);

<span class="hljs-comment">//åˆ›å»ºç®¡é“å¹¶è¿æ¥Oracleå’Œcsvæ–‡ä»¶</span>
<span class="hljs-type">Pipe</span> <span class="hljs-variable">pipe_2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Pipe</span>(<span class="hljs-number">1000</span>);
pipe_2.connect(sqlInputNode,fileOutputNode);

<span class="hljs-comment">//åˆ›å»ºæ•°æ®æµå¹¶å¯åŠ¨</span>
<span class="hljs-type">Dataflow</span> <span class="hljs-variable">dataflow</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dataflow</span>(sqlInputNode);
dataflow.syncStart();

</code></pre>
<hr/>
<h2 data-id="heading-8">ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ</h2>
<p><code>Etl-engine</code> æ ¸å¿ƒä»…ç”±ä»¥ä¸‹3ä¸ªä¸»è¦ç»„ä»¶æ„æˆï¼š</p>
<ul>
<li><strong>Node (èŠ‚ç‚¹):</strong> æ•°æ®çš„èµ·ç‚¹ã€ç»ˆç‚¹å’Œæ•°æ®è½¬æ¢é€»è¾‘è½½ä½“ã€‚</li>
<li><strong>Pipe (ç®¡é“):</strong> è´Ÿè´£åœ¨èŠ‚ç‚¹é—´ä¼ é€’æ•°æ®çš„éé˜»å¡ç¼“å­˜é˜Ÿåˆ—ã€‚</li>
<li><strong>Dataflow (æ•°æ®æµ):</strong> ä»»åŠ¡çš„ç¼–æ’å™¨å’Œæ‰§è¡Œå…¥å£ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GoFrame vs Laravelï¼šä»ORMåˆ°CLIå·¥å…·çš„å…¨é¢å¯¹æ¯”ä¸è¿ç§»æŒ‡å—]]></title>    <link>https://juejin.cn/post/7584203412197883930</link>    <guid>https://juejin.cn/post/7584203412197883930</guid>    <pubDate>2025-12-16T09:25:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584203412197883930" data-draft-id="7584203412197851162" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GoFrame vs Laravelï¼šä»ORMåˆ°CLIå·¥å…·çš„å…¨é¢å¯¹æ¯”ä¸è¿ç§»æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯,Go"/> <meta itemprop="datePublished" content="2025-12-16T09:25:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹ä¸­é˜³GoèƒŒåçš„ç”·äºº"/> <meta itemprop="url" content="https://juejin.cn/user/1444135685064410"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GoFrame vs Laravelï¼šä»ORMåˆ°CLIå·¥å…·çš„å…¨é¢å¯¹æ¯”ä¸è¿ç§»æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1444135685064410/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹ä¸­é˜³GoèƒŒåçš„ç”·äºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T09:25:10.000Z" title="Tue Dec 16 2025 09:25:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;font-weight:400;line-height:2;font-size:17px;overflow-x:hidden;color:#000}.markdown-body strong{padding:1px;color:#ee3f4d}.markdown-body em{padding:0 2px;color:#f33b1f}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position:relative;margin-top:30px;margin-bottom:20px;line-height:1.5;font-weight:700}.markdown-body h1{text-align:center;padding-bottom:5px;font-size:32px;color:#ac1f18}.markdown-body h1:after{content:"";display:block;margin:4px auto 0;width:100px;height:2px;border-bottom:2px solid #f33b1f}.markdown-body h2{font-size:28px;border-bottom:1px solid #f33b1f}.markdown-body h2:before{content:"# "!important;color:#f33b1f}.markdown-body h3{font-size:24px;padding-left:9px;border-left:6px solid #f33b1f}.markdown-body h4{font-size:20px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #bbb;margin:16px 0}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:#f9f1db;color:#ee2746;border-radius:2px;font-size:16px;padding:1px 2px}.markdown-body code,.markdown-body pre{font-family:-apple-system,-apple-system-body,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,PingFang SC,æ€æºé»‘ä½“ CN,æ€æºé»‘ä½“,JetBrains Mono,Fira Code,Menlo,Ubuntu Mono,Consolas,sans-serif}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{margin:12px 0!important;border-radius:3px;font-size:15px;padding:16px 12px;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f7f7f7}.markdown-body a{text-decoration:none;color:#1781b5;padding:0 2px;border-bottom:1px solid #1781b5}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #f33b1f;color:#ac1f18}.markdown-body blockquote{color:#3d3d3d;background-color:#fff9f9;padding:6px 16px;margin:16px 0;border-left:3px solid #f07c82}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:6px 0}.markdown-body ol,.markdown-body ul{padding-left:30px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:6px}.markdown-body ol li{padding-left:6px}.markdown-body ::marker{color:#f33b1f}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body .task-list-item input[type=checkbox]{position:relative}.markdown-body .task-list-item input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background:#fff;border:1px solid #f07c82;border-radius:3px;box-sizing:border-box;z-index:1}.markdown-body .task-list-item input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-5px;left:0;right:0;bottom:0;width:0;height:0;color:#f33b1f;font-size:16px;font-weight:700;z-index:2}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border-spacing:0;border-collapse:collapse}.markdown-body table thead{background:#fff9f9;color:#000;text-align:left;font-size:15px}.markdown-body table tr:nth-child(2n){background-color:#fcfcfc}.markdown-body table tr:hover{background-color:#fff9f9}.markdown-body table td,.markdown-body table th{padding:12px 7px;line-height:24px;border:1px solid #f9f1db}.markdown-body table td{min-width:120px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="xcode">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#000}.xml .hljs-meta{color:silver}.hljs-comment,.hljs-quote{color:#007400}.hljs-attribute,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-tag{color:#aa0d91}.hljs-template-variable,.hljs-variable{color:#3f6e74}.hljs-code,.hljs-meta-string,.hljs-string{color:#c41a16}.hljs-link,.hljs-regexp{color:#0e0eff}.hljs-bullet,.hljs-number,.hljs-symbol,.hljs-title{color:#1c00cf}.hljs-meta,.hljs-section{color:#643820}.hljs-built_in,.hljs-builtin-name,.hljs-class .hljs-title,.hljs-params,.hljs-type{color:#5c2699}.hljs-attr{color:#836c28}.hljs-subst{color:#000}.hljs-formula{background-color:#eee;font-style:italic}.hljs-addition{background-color:#baeeba}.hljs-deletion{background-color:#ffc8bd}.hljs-selector-class,.hljs-selector-id{color:#9b703f}.hljs-doctag,.hljs-strong{font-weight:700}.hljs-emphasis{font-style:italic}</style><blockquote>
<p>æœ€è¿‘è´¼æœ‰æ„æ€ï¼Œå‘ç°äº†ä¸€ä¸ªè´¦å·ï¼Œä¸“é—¨å‘PHPè½¬Goçš„å¸–å­ï¼Œå“å‘¦å–‚ï¼Œè¿™ä¸æ­£æ˜¯æˆ‘3å¹´å‰åšçš„äº‹æƒ…å—ï¼Ÿå“ˆå“ˆã€‚</p>
</blockquote>
<p>å°¤å…¶çœ‹åˆ°ä»–å†™çš„å®‰åˆ©GoFrameæ•™ç¨‹çš„æ–‡ç« ï¼Œæœ‰ç‚¹åˆºæ¿€åˆ°æˆ‘äº†ï¼Œä¸€çœ‹ä»–å°±æ²¡æˆ‘ç”¨çš„å¤šï¼Œç”¨çš„æºœï¼Œå› ä¸ºæˆ‘ä¸ä»…åœ¨å…¬å¸ç”¨GoFrameåšè¿‡å•†ä¸šé¡¹ç›®ï¼Œè¿˜å†™è¿‡ä¸“æ ï¼Œå‡ºè¿‡æ•™ç¨‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7fc34ce8f2641d1861712e3feb8a3d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Lit6ZizR2_og4zlkI7nmoTnlLfkuro=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481910&amp;x-signature=XkPgP7Pa4XZ%2BYimznHXYZbTeFvk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6e702d1b7a44948b9301f52bdedd189~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546L5Lit6ZizR2_og4zlkI7nmoTnlLfkuro=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481910&amp;x-signature=sDVxrw%2BWfT%2Fji%2FcC%2FchLhfTJzLo%3D" alt="" loading="lazy"/></p>
<p>ä½œä¸ºä¸€å<strong>æ·±è€•PHPå¤šå¹´</strong>çš„å¼€å‘è€…ï¼ŒLaravelçš„<strong>ä¼˜é›…ä¸é«˜æ•ˆ</strong>æ—©å·²åˆ»å…¥æˆ‘çš„å¼€å‘ä¹ æƒ¯ã€‚å½“ä¸šåŠ¡éœ€æ±‚æœç€<strong>é«˜å¹¶å‘ã€é«˜æ€§èƒ½</strong>æ–¹å‘å‡çº§ï¼ŒGoè¯­è¨€æˆä¸ºå¿…ç„¶é€‰æ‹©æ—¶ï¼Œæˆ‘å´ä¸€åº¦é™·å…¥"ç”¨æƒ¯äº†Laravelï¼Œå†å†™Goæ€»è§‰å¾—ä¸é¡ºæ‰‹"çš„å›°å¢ƒâ€”â€”ç›´åˆ°é‚‚é€…<strong>GoFrame</strong>ã€‚è¿™ä¸ªè¢«èª‰ä¸ºGoç”Ÿæ€"<strong>ç‘å£«å†›åˆ€</strong>"çš„æ¡†æ¶ï¼Œå®Œç¾å¤åˆ»äº†Laravelçš„å¼€å‘ä½“éªŒï¼Œåˆå…¼å…·Goè¯­è¨€çš„<strong>åŸç”Ÿä¼˜åŠ¿</strong>ï¼Œè®©æˆ‘åœ¨è½¬å‹è·¯ä¸Šå°‘èµ°äº†æ— æ•°å¼¯è·¯ã€‚ä»Šå¤©å°±æ¥æ‹†è§£<strong>GoFrameä¸ºä½•èƒ½æˆä¸ºPHPå¼€å‘è€…çš„Goè¯­è¨€å…¥é—¨é¦–é€‰</strong>ï¼Œä»¥åŠå¦‚ä½•å¿«é€Ÿä¸Šæ‰‹å®è·µã€‚</p>
<h2 data-id="heading-0">ä¸€ã€GoFrameï¼šLaravelå¼€å‘è€…çš„"ä»–ä¹¡æ•…çŸ¥"</h2>
<p>GoFrameæœ€æ‰“åŠ¨PHPå¼€å‘è€…çš„ï¼Œæ˜¯å®ƒä¸Laravel<strong>ä¸€è„‰ç›¸æ‰¿çš„è®¾è®¡ç†å¿µ</strong>ã€‚å¾ˆå¤šç”¨è¿‡çš„å¼€å‘è€…éƒ½æˆç§°å®ƒæ˜¯"<strong>Goç‰ˆLaravel</strong>"ï¼Œè¿™ç§äº²åˆ‡æ„Ÿæºäºä¸¤è€…åœ¨æ ¸å¿ƒåŠŸèƒ½ä¸Šçš„<strong>é«˜åº¦å¥‘åˆ</strong>ï¼š</p>
<h3 data-id="heading-1">1. å¦‚å‡ºä¸€è¾™çš„ORMæ“ä½œ</h3>
<p>Laravelçš„<strong>Eloquent ORM</strong>æ˜¯å…¶æ ¸å¿ƒäº®ç‚¹ä¹‹ä¸€ï¼Œè€ŒGoFrameçš„ORMè®¾è®¡å‡ ä¹åšåˆ°äº†"<strong>æ— ç¼è¡”æ¥</strong>"ã€‚åŒæ ·æ”¯æŒ<strong>é“¾å¼è°ƒç”¨</strong>ï¼ŒåŒæ ·<strong>ç®€æ´ç›´è§‚</strong>çš„æŸ¥è¯¢è¯­æ³•ï¼Œè®©ä¹ æƒ¯äº†Laravelçš„å¼€å‘è€…æ— éœ€é‡æ–°é€‚åº”ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// GoFrameæŸ¥è¯¢ç¤ºä¾‹</span>
user, err := g.Model(<span class="hljs-string">"user"</span>).Where(<span class="hljs-string">"id"</span>, <span class="hljs-number">1</span>).One()
activeUsers, err := g.Model(<span class="hljs-string">"user"</span>).Where(<span class="hljs-string">"status"</span>, <span class="hljs-number">1</span>).Order(<span class="hljs-string">"create_at desc"</span>).All()

<span class="hljs-comment">// å¯¹æ¯”Laravelçš„Eloquent</span>
$user = User::where(<span class="hljs-string">'id'</span>, <span class="hljs-number">1</span>)-&gt;first();
$activeUsers = User::where(<span class="hljs-string">'status'</span>, <span class="hljs-number">1</span>)-&gt;orderBy(<span class="hljs-string">'create_at'</span>, <span class="hljs-string">'desc'</span>)-&gt;get();
</code></pre>
<p>è¿™ç§<strong>è¯­æ³•ä¸Šçš„ç›¸ä¼¼åº¦</strong>ï¼Œè®©å¼€å‘è€…èƒ½ç¬é—´ä»£å…¥ï¼Œæå¤§é™ä½äº†<strong>å­¦ä¹ æˆæœ¬</strong>ã€‚</p>
<h3 data-id="heading-2">2. åŠŸèƒ½å¯¹ç­‰çš„å‘½ä»¤è¡Œå·¥å…·</h3>
<p>Laravelçš„<strong>Artisanå·¥å…·</strong>æ˜¯æå‡å¼€å‘æ•ˆç‡çš„åˆ©å™¨ï¼Œè€ŒGoFrameçš„<code>gf</code>å‘½ä»¤è¡Œå·¥å…·åœ¨åŠŸèƒ½ä¸Š<strong>å®Œå…¨ä¸è¾“</strong>ã€‚ä»<strong>é¡¹ç›®åˆå§‹åŒ–</strong>åˆ°<strong>ä»£ç ç”Ÿæˆ</strong>ï¼Œå†åˆ°<strong>çƒ­é‡è½½è¿è¡Œ</strong>ï¼Œä¸€å¥—å‘½ä»¤å°±èƒ½æå®šæ‰€æœ‰åŸºç¡€æ“ä½œï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># GoFrame gfå·¥å…·</span>
gf init myapp          <span class="hljs-comment"># åˆå§‹åŒ–é¡¹ç›®ï¼ˆå¯¹åº”laravel new myappï¼‰</span>
gf gen model user      <span class="hljs-comment"># ç”Ÿæˆæ•°æ®æ¨¡å‹ï¼ˆå¯¹åº”php artisan make:model Userï¼‰</span>
gf run                 <span class="hljs-comment"># çƒ­å¯åŠ¨é¡¹ç›®ï¼ˆæ— éœ€æ‰‹åŠ¨é‡å¯ï¼Œå¯¹åº”laravel serveï¼‰</span>

<span class="hljs-comment"># é¢å¤–å®ç”¨åŠŸèƒ½</span>
gf gen controller user <span class="hljs-comment"># å¿«é€Ÿç”Ÿæˆæ§åˆ¶å™¨</span>
gf sql <span class="hljs-built_in">export</span>          <span class="hljs-comment"># æ•°æ®åº“ç»“æ„å¯¼å‡º</span>
</code></pre>
<p>ç†Ÿæ‚‰çš„<strong>å‘½ä»¤è¡Œä½“éªŒ</strong>ï¼Œè®©å¼€å‘è€…ä»Laravelåˆ‡æ¢åˆ°GoFrameæ—¶<strong>æ¯«æ— è¿å’Œæ„Ÿ</strong>ã€‚</p>
<h3 data-id="heading-3">3. ç»å…¸MVCæ¶æ„å¤ç”¨</h3>
<p>GoFrameæ²¿ç”¨äº†Laravelç»å…¸çš„<strong>MVCï¼ˆæ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨ï¼‰æ¶æ„</strong>ï¼Œè·¯ç”±ã€æ§åˆ¶å™¨ã€æ¨¡å‹çš„<strong>ä»£ç ç»„ç»‡æ–¹å¼</strong>ä¸Laravelé«˜åº¦ä¸€è‡´ã€‚è¿™ç§<strong>æ¶æ„ä¸Šçš„ç†Ÿæ‚‰æ„Ÿ</strong>ï¼Œè®©å¼€å‘è€…èƒ½ç›´æ¥å¤ç”¨æ­¤å‰çš„<strong>é¡¹ç›®ç»“æ„è®¾è®¡ç»éªŒ</strong>ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// è·¯ç”±å®šä¹‰ï¼ˆå¯¹åº”Laravelçš„routes/api.phpï¼‰</span>
s.Group(<span class="hljs-string">"/api"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(group *ghttp.RouterGroup)</span></span> {
    group.POST(<span class="hljs-string">"/users"</span>, controller.User.Create)
    group.GET(<span class="hljs-string">"/users/:id"</span>, controller.User.Show)
})

<span class="hljs-comment">// æ§åˆ¶å™¨é€»è¾‘ï¼ˆå¯¹åº”Laravelçš„app/Http/Controllers/UserControllerï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *UserController)</span></span> Create(r *ghttp.Request) {
    <span class="hljs-comment">// æ¥æ”¶å‚æ•°ã€ä¸šåŠ¡å¤„ç†ã€è¿”å›å“åº”çš„æµç¨‹ä¸Laravelä¸€è‡´</span>
}
</code></pre>
<p>æ­¤å¤–ï¼ŒGoFrameçš„<strong>ä¸­é—´ä»¶æœºåˆ¶</strong>ä¹Ÿä¸Laravelå®Œå…¨åŒæºï¼Œæ— è®ºæ˜¯<strong>è®¤è¯æˆæƒ</strong>ã€<strong>æ—¥å¿—è®°å½•</strong>è¿˜æ˜¯<strong>é™æµç†”æ–­</strong>ï¼Œéƒ½èƒ½æŒ‰ç…§ç†Ÿæ‚‰çš„æ–¹å¼å®ç°ï¼Œæ— éœ€é‡æ„<strong>å¼€å‘æ€ç»´</strong>ã€‚</p>
<h3 data-id="heading-4">4. æ›´çµæ´»çš„é…ç½®ç®¡ç†</h3>
<p>Laravelçš„<code>.env</code>é…ç½®æ–¹å¼<strong>ç®€æ´æ˜“ç”¨</strong>ï¼Œä½†GoFrameåœ¨æ­¤åŸºç¡€ä¸Šæä¾›äº†<strong>æ›´çµæ´»çš„æ–¹æ¡ˆ</strong>â€”â€”æ”¯æŒ<strong>yamlã€tomlã€json</strong>ç­‰å¤šç§æ ¼å¼çš„é…ç½®æ–‡ä»¶ï¼Œè¿˜èƒ½æ ¹æ®<strong>ç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰</strong> è‡ªåŠ¨åŠ è½½å¯¹åº”é…ç½®ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># å¼€å‘ç¯å¢ƒé…ç½®ï¼ˆconfig.dev.yamlï¼‰</span>
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">address:</span> <span class="hljs-string">":8080"</span>
<span class="hljs-attr">database:</span>
  <span class="hljs-attr">default:</span>
    <span class="hljs-attr">link:</span> <span class="hljs-string">"mysql:root:123456@tcp(127.0.0.1:3306)/dev_db"</span>
    <span class="hljs-attr">debug:</span> <span class="hljs-literal">true</span>

<span class="hljs-comment"># ç”Ÿäº§ç¯å¢ƒé…ç½®ï¼ˆconfig.prod.yamlï¼‰</span>
<span class="hljs-attr">server:</span>
  <span class="hljs-attr">address:</span> <span class="hljs-string">":80"</span>
<span class="hljs-attr">database:</span>
  <span class="hljs-attr">default:</span>
    <span class="hljs-attr">link:</span> <span class="hljs-string">"mysql:prod_user:prod_pwd@tcp(10.0.0.1:3306)/prod_db"</span>
    <span class="hljs-attr">debug:</span> <span class="hljs-literal">false</span>
</code></pre>
<p>é€šè¿‡<code>gf env set</code>å‘½ä»¤å³å¯<strong>åˆ‡æ¢ç¯å¢ƒ</strong>ï¼Œæ¯”Laravelæ‰‹åŠ¨ä¿®æ”¹<code>.env</code>æ›´<strong>é«˜æ•ˆå®‰å…¨</strong>ã€‚</p>
<h2 data-id="heading-5">äºŒã€GoFrameçš„ç‹¬å®¶ä¼˜åŠ¿ï¼šä¸æ­¢äº"åƒLaravel"</h2>
<p>å¦‚æœè¯´<strong>ç›¸ä¼¼æ€§</strong>è®©GoFrameé™ä½äº†å…¥é—¨é—¨æ§›ï¼Œé‚£ä¹ˆè¿™äº›<strong>ç‹¬å®¶ä¼˜åŠ¿</strong>æ‰æ˜¯å®ƒçœŸæ­£çš„æ ¸å¿ƒç«äº‰åŠ›ï¼š</p>
<h3 data-id="heading-6">1. GoåŸç”Ÿçš„é«˜æ€§èƒ½</h3>
<p>ä½œä¸ºGoè¯­è¨€æ¡†æ¶ï¼ŒGoFrameå¤©ç”Ÿç»§æ‰¿äº†Goçš„<strong>å¹¶å‘ä¼˜åŠ¿</strong>ã€‚åœ¨åŒç­‰æœåŠ¡å™¨é…ç½®ä¸‹ï¼ŒGoFrameçš„<strong>QPSï¼ˆæ¯ç§’æŸ¥è¯¢ç‡ï¼‰</strong> æ˜¯ä¼ ç»ŸPHPæ¡†æ¶çš„<strong>5-10å€</strong>ï¼Œå†…å­˜å ç”¨å´åªæœ‰PHPçš„<strong>1/3</strong>ã€‚å¯¹äºéœ€è¦å¤„ç†<strong>é«˜å¹¶å‘è¯·æ±‚</strong>çš„åœºæ™¯ï¼ˆå¦‚ç›´æ’­äº’åŠ¨ã€ç”µå•†ç§’æ€ï¼‰ï¼Œè¿™ç§<strong>æ€§èƒ½å·®è·</strong>å°¤ä¸ºæ˜æ˜¾ã€‚</p>
<h3 data-id="heading-7">2. çœŸæ­£çš„æ¨¡å—åŒ–è®¾è®¡</h3>
<p>GoFrameçš„"<strong>å…¨å®¶æ¡¶</strong>"å¹¶éç®€å•å †ç Œï¼Œè€Œæ˜¯ç”±å¤šä¸ª<strong>å¯ç‹¬ç«‹ä½¿ç”¨çš„æ¨¡å—</strong>ç»„æˆã€‚é™¤äº†Webå¼€å‘å¿…å¤‡çš„ORMã€è·¯ç”±ã€æ§åˆ¶å™¨ï¼Œè¿˜åŒ…å«<strong>ç¼“å­˜ã€æ—¥å¿—ã€éªŒè¯ã€å›½é™…åŒ–</strong>ç­‰å…¨å¥—ä¼ä¸šçº§ç»„ä»¶ã€‚å¼€å‘è€…å¯ä»¥<strong>æŒ‰éœ€é€‰ç”¨</strong>ï¼Œæ¯”å¦‚åªä½¿ç”¨å®ƒçš„ORMæ¨¡å—æ“ä½œæ•°æ®åº“ï¼Œæˆ–ç”¨ç¼“å­˜æ¨¡å—æ›¿ä»£Rediså®¢æˆ·ç«¯ï¼Œ<strong>çµæ´»æ€§è¿œè¶…Laravel</strong>ã€‚</p>
<h3 data-id="heading-8">3. å®Œå–„çš„ä¸­æ–‡ç”Ÿæ€æ”¯æŒ</h3>
<p>å¯¹äºå›½å†…å¼€å‘è€…è€Œè¨€ï¼ŒGoFrameçš„<strong>ä¸­æ–‡æ–‡æ¡£</strong>å ªç§°"<strong>æ•™ç§‘ä¹¦çº§åˆ«</strong>"â€”â€”ä¸ä»…å†…å®¹è¯¦å°½ï¼Œè¿˜åŒ…å«å¤§é‡é’ˆå¯¹<strong>å›½å†…åœºæ™¯</strong>çš„ä¼˜åŒ–è¯´æ˜ï¼ˆå¦‚MySQLé©±åŠ¨é€‚é…ã€å¾®ä¿¡æ”¯ä»˜é›†æˆç­‰ï¼‰ã€‚æ­¤å¤–ï¼ŒGitHubç¤¾åŒº<strong>æ´»è·ƒåº¦æé«˜</strong>ï¼Œå¤§éƒ¨åˆ†é—®é¢˜éƒ½èƒ½åœ¨<strong>24å°æ—¶å†…</strong>æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œæ¯”ä¾èµ–è‹±æ–‡æ–‡æ¡£çš„Laravelç”Ÿæ€æ›´<strong>æ¥åœ°æ°”</strong>ã€‚</p>
<h3 data-id="heading-9">4. å¾®æœåŠ¡å‹å¥½å‹æ¶æ„</h3>
<p>GoFrameçš„<strong>æ¨¡å—åŒ–è®¾è®¡</strong>å¤©ç„¶é€‚åˆ<strong>å¾®æœåŠ¡æ‹†åˆ†</strong>ã€‚æ¯ä¸ªä¸šåŠ¡æ¨¡å—éƒ½å¯ä»¥<strong>ç‹¬ç«‹éƒ¨ç½²ã€ç‹¬ç«‹æ‰©å±•</strong>ï¼Œé…åˆGoè¯­è¨€çš„<strong>è·¨å¹³å°ç¼–è¯‘ç‰¹æ€§</strong>ï¼Œèƒ½è½»æ¾å®ç°<strong>å¤šç¯å¢ƒéƒ¨ç½²</strong>ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒLaravelåœ¨å¾®æœåŠ¡æ¶æ„ä¸­éœ€è¦é¢å¤–å¼•å…¥<strong>ç¬¬ä¸‰æ–¹ç»„ä»¶</strong>ï¼Œå¤æ‚åº¦æ›´é«˜ã€‚</p>
<h2 data-id="heading-10">ä¸‰ã€å¿«é€Ÿä¸Šæ‰‹ï¼š30åˆ†é’Ÿæ­å»ºå®Œæ•´CRUD API</h2>
<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œä¸å¦‚äº²æ‰‹å®è·µä¸€ç•ªã€‚ä¸‹é¢ä»¥<strong>ç”¨æˆ·ç®¡ç†API</strong>ä¸ºä¾‹ï¼Œå¸¦ä½ ä½“éªŒGoFrameçš„<strong>å¼€å‘æµç¨‹</strong>ï¼š</p>
<h3 data-id="heading-11">1. ç¯å¢ƒå‡†å¤‡ä¸å®‰è£…</h3>
<p>é¦–å…ˆç¡®ä¿æœ¬åœ°å·²å®‰è£…<strong>Go 1.18+ç‰ˆæœ¬</strong>ï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…<code>gf</code>å·¥å…·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å®‰è£…gfå‘½ä»¤è¡Œå·¥å…·</span>
go install github.com/gogf/gf/cmd/gf@latest

<span class="hljs-comment"># éªŒè¯å®‰è£…æˆåŠŸ</span>
gf -v
</code></pre>
<h3 data-id="heading-12">2. åˆå§‹åŒ–é¡¹ç›®</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºé¡¹ç›®</span>
gf init user-api

<span class="hljs-comment"># è¿›å…¥é¡¹ç›®ç›®å½•</span>
<span class="hljs-built_in">cd</span> user-api

<span class="hljs-comment"># å¯åŠ¨é¡¹ç›®ï¼ˆçƒ­é‡è½½æ¨¡å¼ï¼‰</span>
gf run
</code></pre>
<p>æ­¤æ—¶è®¿é—®<code>http://127.0.0.1:8080</code>ï¼Œå°±èƒ½çœ‹åˆ°GoFrameçš„<strong>é»˜è®¤æ¬¢è¿é¡µé¢</strong>ï¼Œé¡¹ç›®åˆå§‹åŒ–å®Œæˆã€‚</p>
<h3 data-id="heading-13">3. é…ç½®æ•°æ®åº“</h3>
<p>ç¼–è¾‘é¡¹ç›®æ ¹ç›®å½•çš„<code>config.yaml</code>æ–‡ä»¶ï¼Œé…ç½®<strong>MySQLè¿æ¥ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">database:</span>
  <span class="hljs-attr">default:</span>
    <span class="hljs-attr">link:</span> <span class="hljs-string">"mysql:root:123456@tcp(127.0.0.1:3306)/user_db"</span>
    <span class="hljs-attr">debug:</span> <span class="hljs-literal">true</span>
    <span class="hljs-attr">maxIdleConn:</span> <span class="hljs-number">10</span>
    <span class="hljs-attr">maxOpenConn:</span> <span class="hljs-number">100</span>
</code></pre>
<p>ç¡®ä¿æ•°æ®åº“å·²åˆ›å»ºï¼ˆå¯æ‰‹åŠ¨åˆ›å»º<code>user_db</code>åº“ï¼‰ï¼Œæ— éœ€æå‰å»ºè¡¨ï¼Œåç»­å¯é€šè¿‡<strong>æ¨¡å‹ç”Ÿæˆå·¥å…·</strong>è‡ªåŠ¨åŒæ­¥ã€‚</p>
<h3 data-id="heading-14">4. ç”Ÿæˆæ¨¡å‹ä¸æ§åˆ¶å™¨</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç”ŸæˆUseræ¨¡å‹ï¼ˆä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®è¡¨ï¼‰</span>
gf gen model user -t user -f

<span class="hljs-comment"># ç”ŸæˆUseræ§åˆ¶å™¨</span>
gf gen controller user
</code></pre>
<p>æ‰§è¡Œå®Œæˆåï¼Œé¡¹ç›®ä¼šè‡ªåŠ¨åˆ›å»º<code>model/user.go</code>å’Œ<code>controller/user.go</code>æ–‡ä»¶ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™<strong>åŸºç¡€ä»£ç </strong>ã€‚</p>
<h3 data-id="heading-15">5. å®šä¹‰è·¯ç”±</h3>
<p>ç¼–è¾‘<code>router/router.go</code>æ–‡ä»¶ï¼Œæ·»åŠ <strong>CRUDè·¯ç”±</strong>ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> router

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"user-api/app/controller"</span>
    <span class="hljs-string">"github.com/gogf/gf/frame/g"</span>
)

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">init</span><span class="hljs-params">()</span></span> {
    s := g.Server()
    <span class="hljs-comment">// æ¥å£è·¯ç”±ç»„</span>
    s.Group(<span class="hljs-string">"/api/v1"</span>, <span class="hljs-function"><span class="hljs-keyword">func</span><span class="hljs-params">(group *ghttp.RouterGroup)</span></span> {
        <span class="hljs-comment">// è·¨åŸŸæ”¯æŒ</span>
        group.Middleware(ghttp.MiddlewareCORS)
        <span class="hljs-comment">// ç”¨æˆ·ç®¡ç†è·¯ç”±</span>
        group.POST(<span class="hljs-string">"/users"</span>, controller.User.Create)
        group.GET(<span class="hljs-string">"/users/:id"</span>, controller.User.Show)
        group.PUT(<span class="hljs-string">"/users/:id"</span>, controller.User.Update)
        group.DELETE(<span class="hljs-string">"/users/:id"</span>, controller.User.Delete)
        group.GET(<span class="hljs-string">"/users"</span>, controller.User.List)
    })
}
</code></pre>
<h3 data-id="heading-16">6. å®Œå–„æ§åˆ¶å™¨é€»è¾‘</h3>
<p>ç¼–è¾‘<code>controller/user.go</code>ï¼Œè¡¥å……<strong>ä¸šåŠ¡å¤„ç†é€»è¾‘</strong>ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">package</span> controller

<span class="hljs-keyword">import</span> (
    <span class="hljs-string">"user-api/app/model"</span>
    <span class="hljs-string">"github.com/gogf/gf/net/ghttp"</span>
    <span class="hljs-string">"github.com/gogf/gf/frame/g"</span>
)

<span class="hljs-keyword">type</span> UserController <span class="hljs-keyword">struct</span>{}

<span class="hljs-comment">// åˆ›å»ºç”¨æˆ·</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *UserController)</span></span> Create(r *ghttp.Request) {
    <span class="hljs-keyword">var</span> data model.User
    <span class="hljs-keyword">if</span> err := r.Parse(&amp;data); err != <span class="hljs-literal">nil</span> {
        r.Response.WriteJsonExit(g.Map{
            <span class="hljs-string">"code"</span>: <span class="hljs-number">400</span>,
            <span class="hljs-string">"msg"</span>:  <span class="hljs-string">"å‚æ•°é”™è¯¯ï¼š"</span> + err.Error(),
        })
    }
    <span class="hljs-comment">// æ’å…¥æ•°æ®åº“</span>
    result, err := g.Model(<span class="hljs-string">"user"</span>).Insert(&amp;data)
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        r.Response.WriteJsonExit(g.Map{
            <span class="hljs-string">"code"</span>: <span class="hljs-number">500</span>,
            <span class="hljs-string">"msg"</span>:  <span class="hljs-string">"åˆ›å»ºå¤±è´¥ï¼š"</span> + err.Error(),
        })
    }
    id, _ := result.LastInsertId()
    r.Response.WriteJsonExit(g.Map{
        <span class="hljs-string">"code"</span>: <span class="hljs-number">200</span>,
        <span class="hljs-string">"msg"</span>:  <span class="hljs-string">"åˆ›å»ºæˆåŠŸ"</span>,
        <span class="hljs-string">"data"</span>: g.Map{<span class="hljs-string">"id"</span>: id},
    })
}

<span class="hljs-comment">// è·å–å•ä¸ªç”¨æˆ·</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *UserController)</span></span> Show(r *ghttp.Request) {
    id := r.GetInt(<span class="hljs-string">"id"</span>)
    user, err := g.Model(<span class="hljs-string">"user"</span>).Where(<span class="hljs-string">"id"</span>, id).One()
    <span class="hljs-keyword">if</span> err != <span class="hljs-literal">nil</span> {
        r.Response.WriteJsonExit(g.Map{
            <span class="hljs-string">"code"</span>: <span class="hljs-number">500</span>,
            <span class="hljs-string">"msg"</span>:  <span class="hljs-string">"æŸ¥è¯¢å¤±è´¥ï¼š"</span> + err.Error(),
        })
    }
    <span class="hljs-keyword">if</span> user.IsEmpty() {
        r.Response.WriteJsonExit(g.Map{
            <span class="hljs-string">"code"</span>: <span class="hljs-number">404</span>,
            <span class="hljs-string">"msg"</span>:  <span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨"</span>,
        })
    }
    r.Response.WriteJsonExit(g.Map{
        <span class="hljs-string">"code"</span>: <span class="hljs-number">200</span>,
        <span class="hljs-string">"msg"</span>:  <span class="hljs-string">"æŸ¥è¯¢æˆåŠŸ"</span>,
        <span class="hljs-string">"data"</span>: user,
    })
}

<span class="hljs-comment">// å…¶ä»–æ–¹æ³•ï¼ˆUpdateã€Deleteã€Listï¼‰ç±»ä¼¼ï¼Œæ­¤å¤„çœç•¥...</span>
</code></pre>
<h3 data-id="heading-17">7. å¯åŠ¨æµ‹è¯•</h3>
<p>æ‰§è¡Œ<code>gf run</code>å¯åŠ¨é¡¹ç›®ï¼Œé€šè¿‡<strong>Postmanæˆ–curl</strong>æµ‹è¯•æ¥å£ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æµ‹è¯•åˆ›å»ºç”¨æˆ·</span>
curl -X POST http://127.0.0.1:8080/api/v1/users \
-H <span class="hljs-string">"Content-Type: application/json"</span> \
-d <span class="hljs-string">'{"name":"test","email":"test@example.com"}'</span>
</code></pre>
<p>è¿”å›å¦‚ä¸‹ç»“æœå³è¡¨ç¤ºæˆåŠŸï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span><span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span><span class="hljs-number">200</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"msg"</span><span class="hljs-punctuation">:</span><span class="hljs-string">"åˆ›å»ºæˆåŠŸ"</span><span class="hljs-punctuation">,</span><span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span><span class="hljs-punctuation">{</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span><span class="hljs-number">1</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">}</span>
</code></pre>
<h2 data-id="heading-18">å››ã€è°è¯¥é€‰æ‹©GoFrameï¼Ÿ</h2>
<p>ç»è¿‡<strong>3å¹´å¤šçš„å®æˆ˜ä½“éªŒ</strong>ï¼Œæˆ‘è®¤ä¸ºä»¥ä¸‹å‡ ç±»å¼€å‘è€…/å›¢é˜Ÿ<strong>æœ€é€‚åˆä½¿ç”¨GoFrame</strong>ï¼š</p>
<ol>
<li><strong>PHP/Laravelè½¬Goçš„å¼€å‘è€…</strong>ï¼šæœ€ä½å­¦ä¹ æˆæœ¬ï¼Œæœ€å¿«ä¸Šæ‰‹é€Ÿåº¦ï¼Œæ— éœ€é‡æ„å¼€å‘æ€ç»´ï¼›</li>
<li><strong>è¿½æ±‚"å¼€å‘æ•ˆç‡+è¿è¡Œæ€§èƒ½"çš„å›¢é˜Ÿ</strong>ï¼šæ—¢æƒ³è¦Laravelå¼çš„é«˜æ•ˆå¼€å‘ï¼Œåˆéœ€è¦åº”å¯¹é«˜å¹¶å‘åœºæ™¯ï¼›</li>
<li><strong>å¾®æœåŠ¡æ¶æ„é¡¹ç›®</strong>ï¼šæ¨¡å—åŒ–è®¾è®¡é€‚åˆæ‹†åˆ†éƒ¨ç½²ï¼ŒGoè¯­è¨€çš„è½»é‡ç‰¹æ€§é™ä½æœåŠ¡è¿ç»´æˆæœ¬ï¼›</li>
<li><strong>å›½å†…ä¸­å°ä¼ä¸š</strong>ï¼šä¸­æ–‡æ–‡æ¡£+æ´»è·ƒç¤¾åŒºï¼Œè§£å†³é—®é¢˜æ›´é«˜æ•ˆï¼Œæ— éœ€ä¾èµ–æµ·å¤–èµ„æºã€‚</li>
</ol>
<p>å½“ç„¶ï¼ŒGoFrame<strong>å¹¶éä¸‡èƒ½</strong>ã€‚å¦‚æœåªæ˜¯å¼€å‘ä¸€ä¸ª<strong>æç®€çš„é™æ€ç½‘ç«™æˆ–ä¸ªäººå·¥å…·</strong>ï¼ŒGinç­‰è½»é‡æ¡†æ¶å¯èƒ½æ›´åˆé€‚ï¼›å¦‚æœé¡¹ç›®æ¶‰åŠ<strong>å¤æ‚çš„é¢†åŸŸé©±åŠ¨è®¾è®¡</strong>ï¼Œå¯èƒ½éœ€è¦ç»“åˆå…¶ä»–å·¥å…·è¡¥å……ã€‚ä½†å¯¹äº<strong>ç»å¤§å¤šæ•°Webå¼€å‘åœºæ™¯</strong>ï¼ŒGoFrameçš„"<strong>ä¸æŠ˜è…¾</strong>"å“²å­¦â€”â€”æä¾›å…¨å¥—è§£å†³æ–¹æ¡ˆä½†ä¸æ†ç»‘å¼€å‘è€…â€”â€”éƒ½èƒ½å¸¦æ¥<strong>æä½³çš„ä½“éªŒ</strong>ã€‚</p>
<h2 data-id="heading-19">äº”ã€æœ€åå»ºè®®</h2>
<p>å¦‚æœä½ æ­£æ‰“ç®—ä»PHPè½¬å‘Goï¼Œæˆ–è€…æ­£åœ¨ä¸ºGoé¡¹ç›®é€‰æ‹©æ¡†æ¶ï¼Œä¸å¦¨èŠ±ä¸€ä¸ªå‘¨æœ«çš„æ—¶é—´<strong>è¯•è¯•GoFrame</strong>ï¼š</p>
<ol>
<li>ä»<a href="https://link.juejin.cn?target=https%3A%2F%2Fgoframe.org%2F" target="_blank" title="https://goframe.org/" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a>çš„"<strong>å¿«é€Ÿå¼€å§‹</strong>"å…¥æ‰‹ï¼Œç†Ÿæ‚‰æ ¸å¿ƒæ¦‚å¿µï¼›</li>
<li>ç”¨<code>gf</code>å·¥å…·åˆ›å»ºä¸€ä¸ªdemoé¡¹ç›®ï¼Œäº²æ‰‹å®ç°<strong>ç®€å•çš„CRUD</strong>ï¼›</li>
<li>é‡åˆ°é—®é¢˜æ—¶ï¼Œä¼˜å…ˆæŸ¥çœ‹GitHubçš„issueå’Œç¤¾åŒºè®¨è®ºï¼Œå¤§éƒ¨åˆ†å¸¸è§é—®é¢˜éƒ½æœ‰<strong>æˆç†Ÿè§£å†³æ–¹æ¡ˆ</strong>ã€‚</li>
</ol>
<p>å°±åƒLaravelå½“å¹´è®©PHPå¼€å‘å˜å¾—ä¼˜é›…ä¸€æ ·ï¼ŒGoFrameä¹Ÿæ­£åœ¨è®©Goçš„Webå¼€å‘å˜å¾—<strong>æ›´é«˜æ•ˆã€æ›´æ„‰æ‚¦</strong>ã€‚å¯¹äºPHPå¼€å‘è€…è€Œè¨€ï¼Œå®ƒä¸ä»…æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œæ›´æ˜¯ä¸€åº§é€šå¾€Goè¯­è¨€ä¸–ç•Œçš„"<strong>æ— ç¼æ¡¥æ¢</strong>"ã€‚ä¸å¦¨ç°åœ¨å°±åŠ¨æ‰‹è¯•è¯•ï¼Œç›¸ä¿¡ä½ ä¼šå’Œæˆ‘ä¸€æ ·ï¼Œçˆ±ä¸Šè¿™ç§"<strong>Laravelå¼ä½“éªŒ+Goçº§æ€§èƒ½</strong>"çš„å¼€å‘å¿«æ„Ÿã€‚</p>
<h3 data-id="heading-20">äº’åŠ¨è¯é¢˜ï¼ˆæ¬¢è¿è¯„è®ºåŒºäº¤æµï¼‰</h3>
<ol>
<li>ä½ ä¹Ÿæ˜¯ PHP è½¬ Go çš„å¼€å‘è€…å—ï¼Ÿè¸©è¿‡å“ªäº›æ¡†æ¶å‘ï¼Ÿ</li>
<li>ä½ ç”¨ GoFrame åšè¿‡å“ªäº›é¡¹ç›®ï¼Ÿæœ‰æ²¡æœ‰éšè—æŠ€å·§å¯ä»¥åˆ†äº«ï¼Ÿ</li>
<li>ä¸‹æœŸæƒ³æˆ‘æ‹†è§£ GoFrame çš„å“ªä¸ªåŠŸèƒ½ï¼Ÿï¼ˆæ¯”å¦‚æƒé™æ§åˆ¶ã€å¾®æœåŠ¡éƒ¨ç½²ã€æ—¥å¿—æ’æŸ¥ï¼‰</li>
</ol>
<p>å…³æ³¨æˆ‘ï¼Œåç»­æŒç»­è¾“å‡º GoFrame å®æˆ˜å¹²è´§ã€PHP è½¬ Go é¿å‘æŒ‡å—ï¼Œè¿˜æœ‰å•†ä¸šé¡¹ç›®ä¸­çš„çœŸå®æ¡ˆä¾‹æ‹†è§£ï¼Œå¸®ä½ å¿«é€Ÿä» "Go æ–°æ‰‹" ç†¬æˆ "Go ç†Ÿæ‰‹"ğŸ’ª</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain.js 1.0 + NestJS å…¥é—¨ Demo]]></title>    <link>https://juejin.cn/post/7584289165753253942</link>    <guid>https://juejin.cn/post/7584289165753253942</guid>    <pubDate>2025-12-16T09:22:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584289165753253942" data-draft-id="7584307642983448617" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain.js 1.0 + NestJS å…¥é—¨ Demo"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-16T09:22:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="tirelyl"/> <meta itemprop="url" content="https://juejin.cn/user/870468941789383"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain.js 1.0 + NestJS å…¥é—¨ Demo
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/870468941789383/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    tirelyl
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T09:22:06.000Z" title="Tue Dec 16 2025 09:22:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘åœ¨å­¦ä¹  AI Agent å¼€å‘ï¼Œæ‰€ä»¥é¿å…ä¸äº†çš„äº†è§£åˆ°äº† LangChain è¿™ä¸ªæ¡†æ¶ã€‚ç”±äºæœ¬äººä¸€ç›´ä»äº‹å‰ç«¯å¼€å‘ï¼Œæ‰€ä»¥ä¸€ç›´å°† JS è¯­è¨€ä½œä¸ºæ•´ä¸ªå…¨æ ˆçš„ç”Ÿæ€è¯­è¨€çš„é€‰æ‹©ã€‚LangChain åœ¨ä»Šå¹´ 10 æœˆä»½å‘å¸ƒäº† 1.0 ç‰ˆæœ¬ï¼Œä½†æ˜¯å†…å¤–ç½‘å¯¹äº TS ç‰ˆæœ¬çš„ LangChain ç›¸å…³çš„ä»‹ç»å’Œå®è·µçš„èµ„æ–™éƒ½éå¸¸å°‘ï¼Œæ‰€ä»¥æˆ‘å°è¯•å°†æˆ‘æœ€è¿‘çš„å­¦ä¹ æ€»ç»“è®°å½•ä¸€ä¸‹ã€‚</p>
<h2 data-id="heading-0">ä»‹ç»</h2>
<p>ç”±äºæœ€è¿‘æ‰å¼€å§‹å­¦ä¹  Agent å¼€å‘ï¼Œå¯¹äº LangChain 1.0 ä¹‹å‰çš„ç‰ˆæœ¬åªæ˜¯åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.langchain.com%2Foss%2Fjavascript%2Fmigrate%2Flangchain-v1%23prompts" target="_blank" title="https://docs.langchain.com/oss/javascript/migrate/langchain-v1#prompts" ref="nofollow noopener noreferrer">æ–‡æ¡£ä¸­çš„è¿ç§»</a>å˜æ›´æ¨¡å—ä¸­å¤§æ¦‚äº†è§£ä¸€ä¸‹ã€‚æœ¬ç€å­¦æ–°ä¸å­¦æ—§çš„åŸåˆ™ï¼Œ1.0 ä¹‹å‰ç‰ˆæœ¬çš„ä»€ä¹ˆ <code>createReactAgent</code> <code>pipe</code> <code>chian</code> ç­‰æ¦‚å¿µï¼Œé€šé€šéƒ½ä¸å»è¯¦ç»†äº†è§£äº†ï¼ˆæˆ‘ä¹Ÿå­¦ä¸åŠ¨äº†ï¼‰ï¼Œç›´æ¥æœ€æ–°ç‰ˆæœ¬ä¸€æŠŠæ¢­ã€‚</p>
<h2 data-id="heading-1">åˆå§‹åŒ– NestJs</h2>
<p>ä¸ºäº†æ›´å¥½åœ°æ¼”ç¤ºç”Ÿäº§ä¸­çš„åœºæ™¯ï¼Œæˆ‘é€‰æ‹© <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.nestjs.com%2F" target="_blank" title="https://docs.nestjs.com/" ref="nofollow noopener noreferrer">NestJs</a> æ¡†æ¶ï¼ŒNest ä¸­æ‰€æä¾›çš„åŸå§‹è„šæ‰‹æ¶ä»¥åŠæ¨¡å—ç­‰æ¦‚å¿µï¼Œèƒ½å¤Ÿæ›´å¥½åœ°æ¼”ç¤ºç¼–å†™ä¸€ä¸ª Agent åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„é€»è¾‘åˆ’åˆ†ã€‚</p>
<p>ä½¿ç”¨ Nestjs åˆ›å»ºä¸¤ä¸ªæ¨¡å—ï¼š</p>
<ol>
<li><code>AgentModule</code>ï¼šç¼–å†™ Agent é€»è¾‘ï¼Œæä¾› <code>AgentService</code> ã€‚</li>
<li><code>ChatModule</code>ï¼šç¼–å†™æˆ‘ä»¬çš„èŠå¤©å¯¹è¯æ¥å£ï¼Œæä¾›è°ƒç”¨ Agent çš„ APIã€‚</li>
</ol>
<p>ç›¸å…³å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…¨å±€å®‰è£… NestJs cli</span>
npm install -g @nest/cli

<span class="hljs-comment"># ä½¿ç”¨ Nest Cli åˆ›å»ºä¸€ä¸ª Nest é¡¹ç›®</span>
nest new project-name

<span class="hljs-comment"># åˆ›å»º AgentModule</span>
nest g module agent

<span class="hljs-comment"># åˆ›å»º AgentService</span>
nest g service agent

<span class="hljs-comment"># åˆ›å»º ChatModule</span>
nest g module chat

<span class="hljs-comment"># åˆ›å»º ChatController</span>
nest g controller chat

</code></pre>
<p>æœ€ç»ˆæˆ‘ä»¬çš„ Nest é¡¹ç›®ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a0cd2769b4d44fa8a8bce619427db2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdGlyZWx5bA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481725&amp;x-signature=FzNcJFHBixo%2FJVNgeK6Ne3b5buo%3D" alt="image.png" loading="lazy"/></p>
<p>æœ€åæˆ‘ä»¬å°†åšä¸€äº›å¯¼å…¥å’Œå¯¼å‡ºçš„å¤„ç†ï¼š</p>
<p><code>AgentModule</code> ä¸­éœ€è¦å¯¼å‡º <code>AgentService</code>ï¼Œä¾› <code>ChatModule</code> ä¸­çš„ Controller ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// agent.module.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AgentService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./agent.service'</span>;

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">AgentService</span>],
  <span class="hljs-attr">exports</span>: [<span class="hljs-title class_">AgentService</span>], <span class="hljs-comment">// å¯¼å‡º AgentService</span>
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AgentModule</span> {}
</code></pre>
<p><code>ChatModule</code> ä¸­å¯¼å…¥ <code>AgentModule</code>ï¼Œä»¥ä¾›åœ¨ <code>ChatController</code> ä¸­ä½¿ç”¨ <code>AgentService</code> æ¥ç¼–å†™ API é€»è¾‘ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// chat.module.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatController</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./chat.controller'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AgentModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../agent/agent.module'</span>;

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">AgentModule</span>],
  <span class="hljs-attr">controllers</span>: [<span class="hljs-title class_">ChatController</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatModule</span> {}
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// chat.controller.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AgentService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../agent/agent.service'</span>;

<span class="hljs-meta">@Controller</span>(<span class="hljs-string">'chat'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatController</span> {
  <span class="hljs-comment">// ä½¿ç”¨ä¾èµ–æ³¨å…¥ `AgentService`</span>
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> agentService: AgentService</span>) {}
}
</code></pre>
<p><code>AppModule</code> ä¸­å¯¼å…¥ <code>ChatModule</code> è®©æˆ‘ä»¬çš„ API æ¥å£èƒ½å¤Ÿæ³¨å†Œåˆ°æ•´ä¸ªé¡¹ç›®ä¸­ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// app.module.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./chat/chat.module'</span>;

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [<span class="hljs-title class_">ChatModule</span>], <span class="hljs-comment">// ç¡®ä¿ `ChatModule` å¯¼å…¥</span>
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}

</code></pre>
<p>åˆ°æ­¤ä¸ºæ­¢æˆ‘ä»¬é¡¹ç›®çš„åˆå§‹ç»“æ„å°±æ­å»ºå®Œæˆäº†</p>
<h2 data-id="heading-2">å®‰è£… LangChain</h2>
<pre><code class="hljs language-bash" lang="bash">npm install langchain @langchain/openai @langchain/core
</code></pre>
<h2 data-id="heading-3">AgentService é€»è¾‘</h2>
<p>ä½¿ç”¨ LangChain 1.0 æ¥ç¼–å†™æˆ‘ä»¬çš„ Agent é€»è¾‘ï¼Œåœ¨è¿™ä¸ªç®€å•çš„ demo ä¸­ï¼Œæä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>LLM çš„åˆå§‹åŒ–ä»¥åŠç®€å•é…ç½®ã€‚</li>
<li>æä¾›ä¸€ä¸ªç®€å•çš„æŸ¥è¯¢å¤©æ°”çš„ toolï¼Œä¾› Agent ä½¿ç”¨ï¼ˆä»¥å®˜æ–¹æ–‡æ¡£ä¸­å±•ç¤ºçš„ demo ä¸ºä¾‹ï¼‰ã€‚</li>
<li>æä¾›åŸºäºæœ¬åœ°å†…å­˜çš„ Memoryï¼Œä¿è¯ä¸€æ¬¡ç®€å• Agent å¯¹è¯æµç¨‹çš„å®Œæ•´æ€§ã€‚</li>
</ul>
<p>å®Œæ•´ä»£ç ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// agent.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/config'</span>;

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatOpenAI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/openai'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">HumanMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/messages'</span>;
<span class="hljs-keyword">import</span> { tool } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/core/tools'</span>;
<span class="hljs-keyword">import</span> { createAgent, <span class="hljs-keyword">type</span> <span class="hljs-title class_">ReactAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'langchain'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">MemorySaver</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@langchain/langgraph'</span>;
<span class="hljs-keyword">import</span> z <span class="hljs-keyword">from</span> <span class="hljs-string">'zod'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AgentService</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">agent</span>: <span class="hljs-title class_">ReactAgent</span>;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> configService: ConfigService</span>) {
    <span class="hljs-comment">// åˆå§‹åŒ– LLM è¯­è¨€æ¨¡å‹</span>
    <span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({
      <span class="hljs-attr">model</span>: <span class="hljs-string">'qwen-plus'</span>, <span class="hljs-comment">// ä½¿ç”¨ Qwen-Plus æ¨¡å‹ï¼Œä»»ä½•å…¼å®¹ OpenAI API çš„æ¨¡å‹å‡å¯ä½¿ç”¨</span>
      <span class="hljs-attr">apiKey</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">configService</span>.<span class="hljs-property">get</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">'AI_API_KEY'</span>), <span class="hljs-comment">// é…ç½®è‡ªå·±è·å–çš„ api key</span>
      <span class="hljs-attr">configuration</span>: {
        <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://dashscope.aliyuncs.com/compatible-mode/v1'</span>, <span class="hljs-comment">// é’ˆå¯¹è‡ªå·±ä½¿ç”¨çš„æ¨¡å‹æä¾›å•†ï¼Œè°ƒæ•´è¯¥å€¼</span>
      },
      <span class="hljs-attr">temperature</span>: <span class="hljs-number">0.1</span>,
    });

    <span class="hljs-comment">// å®šä¹‰å¤©æ°”æŸ¥è¯¢å·¥å…·</span>
    <span class="hljs-keyword">const</span> getWeatherTool = <span class="hljs-title function_">tool</span>(
      <span class="hljs-function">(<span class="hljs-params">{ location }</span>) =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">${location}</span> çš„å¤©æ°”æ˜¯: æ™´å¤©â˜€ï¸, 72Â°F`</span>, <span class="hljs-comment">// æ­¤å¤„æ˜¯å†™æ­»çš„é€»è¾‘ï¼Œç”Ÿäº§ä¸­åº”è¯¥ä½¿ç”¨çœŸå®çš„æ¥å£è¿›è¡ŒæŸ¥è¯¢</span>
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'get_weather'</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">'è·å–æŸä¸ªåœ°ç‚¹çš„å¤©æ°”ä¿¡æ¯'</span>,
        <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
          <span class="hljs-attr">location</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">'ç”¨æˆ·è·å–å¤©æ°”é¢„æŠ¥çš„åœ°ç‚¹'</span>),
        }),
      },
    );

    <span class="hljs-comment">// åˆå§‹åŒ–æ£€æŸ¥ç‚¹å­˜å‚¨å™¨</span>
    <span class="hljs-keyword">const</span> checkpointer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MemorySaver</span>();

    <span class="hljs-comment">// åˆå§‹åŒ– Agent</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">agent</span> = <span class="hljs-title function_">createAgent</span>({
      model,
      <span class="hljs-attr">systemPrompt</span>: <span class="hljs-string">'ä½ æ˜¯ä¸€ä¸ªå¸®åŠ©äººä»¬æŸ¥æ‰¾ä¿¡æ¯çš„äººå·¥æ™ºèƒ½åŠ©æ‰‹ã€‚'</span>,
      <span class="hljs-attr">tools</span>: [getWeatherTool],
      checkpointer,
    });
  }

  <span class="hljs-comment">/**
   * ä¸ agent å¯¹è¯ï¼ˆæ™®é€šå“åº”ï¼‰
   */</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">chatWithAgent</span>(<span class="hljs-params">message: <span class="hljs-built_in">string</span>, threadId: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">agent</span>.<span class="hljs-title function_">invoke</span>(
      {
        <span class="hljs-attr">messages</span>: [<span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(message)],
      },
      {
        <span class="hljs-attr">configurable</span>: {
          <span class="hljs-attr">thread_id</span>: threadId, <span class="hljs-comment">// thread_id æä¾›ç»™ checkpointerï¼Œç”¨äºè¯†åˆ«å½“å‰å¯¹è¯åº”è¯¥ä½¿ç”¨å“ªä¸ªèŠå¤©ä¼šè¯çš„è®°å¿† </span>
        },
      },
    );

    <span class="hljs-comment">// ç®€å•ç²—æš´è¿”å›æœ€åçš„ AI æ€»ç»“çš„ä¿¡æ¯</span>
    <span class="hljs-keyword">return</span> result.<span class="hljs-property">messages</span>[result.<span class="hljs-property">messages</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>].<span class="hljs-property">content</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>;
  }
}
</code></pre>
<h3 data-id="heading-4"><code>checkpointer</code> å˜é‡</h3>
<p>ç”±äºæœ€ç®€å•çš„å¤§æ¨¡å‹å¯¹è¯æµç¨‹ä¸­ï¼ŒAI æ˜¯æ²¡æœ‰è‡ªå·±çš„è®°å¿†çš„ï¼Œå¯¹è¯å†å²éœ€è¦è‡ªå·±ç¼–å†™é€»è¾‘ä¿å­˜ï¼Œç„¶åå°†ä¿å­˜åçš„è®°å½•æ•´ä½“æ‰”ç»™å¤§æ¨¡å‹ï¼Œè¿™æ ·çš„æ“ä½œè¿‡äºå¤æ‚ã€‚å¼•å…¥ checkpointerï¼Œå®ƒæ˜¯ langgraph çš„ MemorySaverï¼Œç”¨æ¥ç»™ Agent åšâ€œæ£€æŸ¥ç‚¹â€å­˜å‚¨ï¼Œè§£å†³å¤šè½®/å¤šæ¬¡è°ƒç”¨æ—¶çŠ¶æ€ä¸¢å¤±çš„é—®é¢˜ã€‚åœ¨æˆ‘ä»¬è¿™ä¸ªç®€å•çš„æ¥å£å¯¹è¯ demo ä¸­ï¼Œè®© AI å…·å¤‡è¿ç»­å¯¹è¯çš„èƒ½åŠ›ã€‚
è®¾ç½®äº† <code>checkpointer</code> åï¼Œåœ¨åç»­çš„ agent è°ƒç”¨æ—¶ï¼Œéœ€è¦ä¼ å…¥ <code>thread_id</code>ï¼Œå®ƒä¼šä½œä¸ºå¯¹è¯çš„ key å€¼ï¼Œé’ˆå¯¹å”¯ä¸€çš„ keyï¼Œæ¥ä¿å­˜æŸæ¬¡ä¼šè¯çš„èŠå¤©è®°å¿†ã€‚
åœ¨æœ¬ demo ä¸­ï¼Œä½¿ç”¨äº†<code>@langchain/langgraph</code> åŒ…ä¸­çš„ <code>MemorySaver</code>ï¼Œè¯¥ç±»ä½¿ç”¨å†…å­˜æœ€ä¸ºä¸€æ¬¡å¯¹è¯çš„ä¸´æ—¶å­˜å‚¨ï¼Œåœ¨ node è¿›ç¨‹é‡å¯åï¼Œä¼šä¸¢å¤±æ‰€æœ‰è®°å¿†ã€‚æ‰€ä»¥åªé€‚åˆåœ¨ demo ä¸­æ¼”ç¤ºã€‚å®é™…ç”Ÿäº§ç¯å¢ƒçš„åç«¯é¡¹ç›®ï¼Œå¯ä»¥è€ƒè™‘å’Œæ•°æ®åº“ä½œæŒä¹…å‚¨å­˜ã€‚</p>
<h3 data-id="heading-5">å…³äº <code>AgentService.agent</code> æˆå‘˜å˜é‡çš„ ts æç¤º</h3>
<p>è¿™é‡Œä¸é€‰æ‹©åœ¨ agent å˜é‡å®šä¹‰æ—¶åˆå§‹åŒ–ï¼Œè€Œæ˜¯åœ¨ constructor æ–¹æ³•ä¸­åˆå§‹åŒ–ï¼Œæ˜¯å› ä¸º <code>createAgent</code> æ–¹æ³•æ‰€éœ€è¦çš„å‚æ•°æœ‰å¾ˆå¤šéœ€è¦å¤æ‚çš„ç¼–æ’é€»è¾‘ï¼Œä»¥åŠä»ä¾èµ–æ³¨å…¥ä¸­è·å–ï¼ˆä¾‹å¦‚ä» <code>ConfigService</code> ä¸­è·å–ç¯å¢ƒå˜é‡ç­‰ï¼‰ã€‚ç”±äº <code>ReactAgent</code> ç±»å‹æœ‰ç€å¤æ‚çš„æ³›å‹å‚æ•°å®šä¹‰ï¼Œå¦‚æœä¸èƒ½å’Œåç»­çš„ <code>createAgent</code> æ–¹æ³•è¿”å›çš„ agent ç±»å‹å¯¹é½çš„è¯ï¼Œåœ¨ä¸¥æ ¼çš„ ts ç±»å‹æ ¡éªŒæ¨¡å¼ä¸‹ä¼šå‡ºç°ç±»å‹æŠ¥é”™ï¼Œå¯¹äºä¸å–œæ¬¢æŠŠ TypeScript å½“ AnyScript çš„äººæ¥è¯´ï¼Œå»ºè®®è½¬åˆ° <code>ReactAgent</code>çš„ç±»å‹å®šä¹‰ä¸­è¯¦ç»†çœ‹ä¸‹æ³›å‹å‚æ•°çš„å®šä¹‰ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-keyword">type</span> <span class="hljs-title class_">ReactAgent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'langchain'</span>;

<span class="hljs-comment">// å®šä¹‰ä¸Šä¸‹æ–‡ Schema</span>
<span class="hljs-keyword">const</span> agentContextSchema = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-comment">// ä¸Šä¸‹æ–‡ä¸­ï¼Œæ°¸è¿œä¸å˜çš„ userIdï¼Œå¯ä»¥ç”¨äºæ•°æ®åº“æŸ¥è¯¢ï¼Œèº«ä»½éªŒè¯ç­‰</span>
  <span class="hljs-attr">userId</span>: z.<span class="hljs-title function_">number</span>(),
});

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AgentService</span> {
  <span class="hljs-comment">// ç¬¬ä¸€ä¸ªæ³›å‹å‚æ•° StructuredResponseFormatï¼ˆç»“æ„åŒ–åçš„æ¨¡å‹è¾“å‡ºç»“æ„ï¼‰ï¼Œ é»˜è®¤å€¼ä¸º `Record&lt;string, any&gt;`</span>
  <span class="hljs-comment">// ç¬¬äºŒä¸ªæ³›å‹å‚æ•° StateSchemaï¼ˆgraph state æ•°æ®ç»“æ„ï¼‰ï¼Œé»˜è®¤å€¼ä¸º undefined</span>
  <span class="hljs-comment">// ç¬¬ä¸‰ä¸ªæ³›å‹å‚æ•°ä¸º ContextSchemaï¼ˆgraph context æ•°æ®ç»“æ„ï¼‰ï¼Œéœ€è¦ä¼ å…¥è‡ªå·±å®šä¹‰çš„ä¸Šä¸‹æ–‡ schema</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">agent</span>: <span class="hljs-title class_">ReactAgent</span>&lt;<span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;, <span class="hljs-literal">undefined</span>, <span class="hljs-keyword">typeof</span> agentContextSchema&gt;;
}

</code></pre>
<h2 data-id="heading-6"><code>ChatController</code> æä¾›å¯¹è¯æ¥å£</h2>
<p>è¿™éƒ¨åˆ†ä»£ç å¾ˆç®€å•ï¼Œå°†æˆ‘ä»¬ç¼–å†™å¥½çš„ Agent æœåŠ¡å°è£…æˆ restful æ¥å£ï¼Œæ­¤å¤„åªæ¼”ç¤ºä¸€ä¸ª chat æ¥å£
å…¨éƒ¨ä»£ç ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Body</span>, <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Post</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AgentService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'../agent/agent.service'</span>;

<span class="hljs-meta">@Controller</span>(<span class="hljs-string">'chat'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatController</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> agentService: AgentService</span>) {}

  <span class="hljs-comment">// è®¿é—®è¯¥æ¥å£ï¼šhttp://localhost:3000/chat</span>
  <span class="hljs-meta">@Post</span>()
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">chat</span>(<span class="hljs-params"><span class="hljs-meta">@Body</span>() body: { message: <span class="hljs-built_in">string</span>; threadId: <span class="hljs-built_in">string</span> }</span>) {
    <span class="hljs-keyword">const</span> content = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">agentService</span>.<span class="hljs-title function_">chatWithAgent</span>(
      body.<span class="hljs-property">message</span>,
      body.<span class="hljs-property">threadId</span>,
    );
    <span class="hljs-keyword">return</span> {
      content,
    };
  }
}
</code></pre>
<p>å°è¯•è®¿é—®æ¥å£ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4516036e3ad34fd1a2437db67a530129~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdGlyZWx5bA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481725&amp;x-signature=Enb80lJwqBSB9QWuEWI7SpUFMXg%3D" alt="image.png" loading="lazy"/></p>
<p>è°ƒç”¨å¤©æ°”å·¥å…·ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7f3d437b12da4c23a451728bcf8e1508~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdGlyZWx5bA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481725&amp;x-signature=aSFzqXTaTZvSuM3ZhFGrcrLea9k%3D" alt="image.png" loading="lazy"/></p>
<p>å±•ç¤ºè®°å¿†åŠŸèƒ½ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c24c4b3ea23c4244888cc0fc3c2a41ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdGlyZWx5bA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481725&amp;x-signature=r%2Ftq47KsSXjMHxgS5%2F4EMOWKshM%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8159ec36331f4fa3b8780a6167c20d83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgdGlyZWx5bA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766481725&amp;x-signature=g5y1ilxJlCpqgM60r1yEYYP6aWY%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-7">æ€»ç»“</h2>
<p>ä½œä¸º LangChain æ¡†æ¶å®˜æ–¹é‡ç‚¹æ”¯æŒçš„ä¸¤ç§è¯­è¨€ä¹‹ä¸€ï¼ŒTypeScript åœ¨ 1.0 ç‰ˆæœ¬ä¸­ä¸ NestJS ç»“åˆä½¿ç”¨çš„å®è·µèµ„æ–™ç›¸å¯¹è¾ƒå°‘ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©åˆ°å…¥é—¨çš„åŒå­¦ã€‚</p>
<p>åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼ŒLangChain å¼ºå¤§çš„ç¼–æ’èƒ½åŠ›å¾€å¾€ä¾èµ–äºå¤§é‡çš„æ³›å‹å‚æ•°æ¥å®Œå–„ç±»å‹çº¦æŸã€‚å¦‚æœä¸å¸Œæœ›é¢‘ç¹ä½¿ç”¨ <code>as any</code> è¿›è¡Œç±»å‹æ–­è¨€ï¼Œå°±éœ€è¦å¯¹å…¶æºç ä¸­çš„ç±»å‹è®¾è®¡æœ‰è¾ƒä¸ºæ·±å…¥çš„ç†è§£ï¼Œè¿™å¯¹ä½¿ç”¨è€…çš„ TypeScript åŸºç¡€æå‡ºäº†æ›´é«˜è¦æ±‚ã€‚</p>
<p>æœ¬äººä¹Ÿæ˜¯ä¸€ååç«¯æ–¹å‘çš„åˆå­¦è€…ï¼Œä»¥ä¸Šå†…å®¹æ›´å¤šæ˜¯ä¸ªäººåœ¨å­¦ä¹ å’Œå®è·µè¿‡ç¨‹ä¸­çš„ä¸€äº›æ€»ç»“ä¸æ€è€ƒã€‚å¦‚æœæœ¬æ–‡èƒ½å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµå’Œäº¤æµï¼Œéå¸¸æ„Ÿè°¢ ğŸ™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js æ–‡ä»¶ç³»ç»Ÿ fs]]></title>    <link>https://juejin.cn/post/7584059298697052201</link>    <guid>https://juejin.cn/post/7584059298697052201</guid>    <pubDate>2025-12-16T09:25:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584059298697052201" data-draft-id="7584289165753335862" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Node.js æ–‡ä»¶ç³»ç»Ÿ fs"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-16T09:25:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¢¨å­åŒå¿—"/> <meta itemprop="url" content="https://juejin.cn/user/2084329779627965"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Node.js æ–‡ä»¶ç³»ç»Ÿ fs
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2084329779627965/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¢¨å­åŒå¿—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T09:25:44.000Z" title="Tue Dec 16 2025 09:25:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>å‚è€ƒèµ„æºï¼š</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fapi%2Ffs.html" target="_blank" title="https://nodejs.org/api/fs.html" ref="nofollow noopener noreferrer">Node.js å®˜æ–¹æ–‡æ¡£ - File System</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.w3schools.com%2Fnodejs%2Fdefault.asp" target="_blank" title="https://www.w3schools.com/nodejs/default.asp" ref="nofollow noopener noreferrer">W3Schools Node.js æ•™ç¨‹</a></li>
</ul>
</blockquote>
<hr/>
<p>Node.js æä¾›äº†å¼ºå¤§çš„æ–‡ä»¶ç³»ç»Ÿï¼ˆFile Systemï¼‰æ¨¡å—ï¼Œå…è®¸å¼€å‘è€…ä¸æ–‡ä»¶ç³»ç»Ÿè¿›è¡Œäº¤äº’ã€‚<code>fs</code> æ¨¡å—æä¾›äº†åŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§æ“ä½œæ–¹å¼ï¼Œæ”¯æŒæ–‡ä»¶è¯»å†™ã€ç›®å½•æ“ä½œã€æ–‡ä»¶ç›‘å¬ã€æµå¼æ“ä½œç­‰åŠŸèƒ½ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ Node.js æ–‡ä»¶ç³»ç»Ÿçš„å„ä¸ªæ–¹é¢ï¼ŒåŒ…æ‹¬åŸºç¡€æ“ä½œå’Œé«˜çº§ç‰¹æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€æ–‡ä»¶ç³»ç»ŸåŸºç¡€</h2>
<h3 data-id="heading-1">1.1 å¼•å…¥ fs æ¨¡å—</h3>
<p>åœ¨ Node.js ä¸­ï¼Œä½¿ç”¨ <code>require()</code> æˆ– <code>import</code> å¼•å…¥æ–‡ä»¶ç³»ç»Ÿæ¨¡å—ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// CommonJS æ–¹å¼</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// ES Modules æ–¹å¼</span>
<span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">'fs'</span>;
</code></pre>
<h3 data-id="heading-2">1.2 å¼‚æ­¥ä¸åŒæ­¥æ“ä½œ</h3>
<p>Node.js æ–‡ä»¶ç³»ç»Ÿæä¾›äº†ä¸¤ç§æ“ä½œæ–¹å¼ï¼š</p>
<ul>
<li><strong>å¼‚æ­¥æ“ä½œ</strong>ï¼šéé˜»å¡ï¼Œä½¿ç”¨å›è°ƒå‡½æ•°å¤„ç†ç»“æœï¼ˆæ¨èï¼‰</li>
<li><strong>åŒæ­¥æ“ä½œ</strong>ï¼šé˜»å¡ï¼Œç›´æ¥è¿”å›ç»“æœï¼ˆé€‚ç”¨äºè„šæœ¬æˆ–åˆå§‹åŒ–ï¼‰</li>
</ul>
<p><strong>æœ€ä½³å®è·µï¼š</strong> åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¼˜å…ˆä½¿ç”¨å¼‚æ­¥æ“ä½œï¼Œé¿å…é˜»å¡äº‹ä»¶å¾ªç¯ã€‚</p>
<hr/>
<h2 data-id="heading-3">äºŒã€æ–‡ä»¶è¯»å†™æ“ä½œ</h2>
<h3 data-id="heading-4">2.1 è¯»å–æ–‡ä»¶</h3>
<h4 data-id="heading-5">2.1.1 å¼‚æ­¥è¯»å–æ–‡ä»¶ï¼ˆreadFileï¼‰</h4>
<p><code>fs.readFile()</code> æ˜¯å¼‚æ­¥è¯»å–æ–‡ä»¶çš„æ¨èæ–¹å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// åŸºæœ¬ç”¨æ³•</span>
fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'example.txt'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–æ–‡ä»¶å¤±è´¥:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å†…å®¹:'</span>, data);
});

<span class="hljs-comment">// è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆå¦‚å›¾ç‰‡ï¼‰</span>
fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'image.png'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–å¤±è´¥:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å¤§å°:'</span>, data.<span class="hljs-property">length</span>, <span class="hljs-string">'å­—èŠ‚'</span>);
});
</code></pre>
<p><strong>å‚æ•°è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>path</code>: æ–‡ä»¶è·¯å¾„ï¼ˆå­—ç¬¦ä¸²ã€Buffer æˆ– URLï¼‰</li>
<li><code>encoding</code>: ç¼–ç æ ¼å¼ï¼ˆå¯é€‰ï¼Œå¦‚ 'utf8'ã€'ascii'ã€'base64'ï¼‰</li>
<li><code>callback</code>: å›è°ƒå‡½æ•° <code>(err, data) =&gt; {}</code></li>
</ul>
<h4 data-id="heading-6">2.1.2 åŒæ­¥è¯»å–æ–‡ä»¶ï¼ˆreadFileSyncï¼‰</h4>
<p><code>fs.readFileSync()</code> æ˜¯åŒæ­¥è¯»å–æ–‡ä»¶çš„æ–¹å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-keyword">try</span> {
  <span class="hljs-comment">// åŒæ­¥è¯»å–ï¼Œä¼šé˜»å¡æ‰§è¡Œ</span>
  <span class="hljs-keyword">const</span> data = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'example.txt'</span>, <span class="hljs-string">'utf8'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å†…å®¹:'</span>, data);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–æ–‡ä»¶å¤±è´¥:'</span>, err);
}

<span class="hljs-comment">// è¯»å–äºŒè¿›åˆ¶æ–‡ä»¶</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> buffer = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'image.png'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å¤§å°:'</span>, buffer.<span class="hljs-property">length</span>, <span class="hljs-string">'å­—èŠ‚'</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–å¤±è´¥:'</span>, err);
}
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ul>
<li>åŒæ­¥æ“ä½œä¼šé˜»å¡ Node.js äº‹ä»¶å¾ªç¯</li>
<li>é€‚åˆåœ¨åº”ç”¨å¯åŠ¨æ—¶è¯»å–é…ç½®æ–‡ä»¶</li>
<li>ä¸é€‚åˆå¤„ç†å¤§æ–‡ä»¶æˆ–é«˜å¹¶å‘åœºæ™¯</li>
</ul>
<h3 data-id="heading-7">2.2 å†™å…¥æ–‡ä»¶</h3>
<h4 data-id="heading-8">2.2.1 å¼‚æ­¥å†™å…¥æ–‡ä»¶ï¼ˆwriteFileï¼‰</h4>
<p><code>fs.writeFile()</code> ç”¨äºå¼‚æ­¥å†™å…¥æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// å†™å…¥æ–‡æœ¬æ–‡ä»¶</span>
fs.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">'output.txt'</span>, <span class="hljs-string">'Hello Node.js!'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å†™å…¥å¤±è´¥:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å†™å…¥æˆåŠŸ'</span>);
});

<span class="hljs-comment">// å†™å…¥ JSON æ•°æ®</span>
<span class="hljs-keyword">const</span> data = { <span class="hljs-attr">name</span>: <span class="hljs-string">'Node.js'</span>, <span class="hljs-attr">version</span>: <span class="hljs-string">'18.0.0'</span> };
fs.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">'data.json'</span>, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>), <span class="hljs-string">'utf8'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å†™å…¥å¤±è´¥:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'JSON æ–‡ä»¶å†™å…¥æˆåŠŸ'</span>);
});

<span class="hljs-comment">// è¿½åŠ å†…å®¹ï¼ˆä½¿ç”¨ flag: 'a'ï¼‰</span>
fs.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">'log.txt'</span>, <span class="hljs-string">'æ–°çš„ä¸€è¡Œ\n'</span>, { <span class="hljs-attr">flag</span>: <span class="hljs-string">'a'</span>, <span class="hljs-attr">encoding</span>: <span class="hljs-string">'utf8'</span> }, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¿½åŠ å¤±è´¥:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å†…å®¹è¿½åŠ æˆåŠŸ'</span>);
});
</code></pre>
<p><strong>å¸¸ç”¨ flag é€‰é¡¹ï¼š</strong></p>
<ul>
<li><code>'w'</code>: å†™å…¥ï¼ˆè¦†ç›–ï¼Œé»˜è®¤ï¼‰</li>
<li><code>'a'</code>: è¿½åŠ </li>
<li><code>'r+'</code>: è¯»å†™</li>
<li><code>'wx'</code>: å†™å…¥ï¼ˆå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™å¤±è´¥ï¼‰</li>
</ul>
<h4 data-id="heading-9">2.2.2 åŒæ­¥å†™å…¥æ–‡ä»¶ï¼ˆwriteFileSyncï¼‰</h4>
<p><code>fs.writeFileSync()</code> ç”¨äºåŒæ­¥å†™å…¥æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-keyword">try</span> {
  fs.<span class="hljs-title function_">writeFileSync</span>(<span class="hljs-string">'output.txt'</span>, <span class="hljs-string">'Hello Node.js!'</span>, <span class="hljs-string">'utf8'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å†™å…¥æˆåŠŸ'</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å†™å…¥å¤±è´¥:'</span>, err);
}

<span class="hljs-comment">// è¿½åŠ å†…å®¹</span>
<span class="hljs-keyword">try</span> {
  fs.<span class="hljs-title function_">writeFileSync</span>(<span class="hljs-string">'log.txt'</span>, <span class="hljs-string">'æ–°çš„ä¸€è¡Œ\n'</span>, { <span class="hljs-attr">flag</span>: <span class="hljs-string">'a'</span>, <span class="hljs-attr">encoding</span>: <span class="hljs-string">'utf8'</span> });
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å†…å®¹è¿½åŠ æˆåŠŸ'</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¿½åŠ å¤±è´¥:'</span>, err);
}
</code></pre>
<h3 data-id="heading-10">2.3 è¿½åŠ æ–‡ä»¶å†…å®¹</h3>
<p>é™¤äº†ä½¿ç”¨ <code>writeFile</code> çš„ <code>flag: 'a'</code> é€‰é¡¹ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä¸“é—¨çš„è¿½åŠ æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// å¼‚æ­¥è¿½åŠ </span>
fs.<span class="hljs-title function_">appendFile</span>(<span class="hljs-string">'log.txt'</span>, <span class="hljs-string">'æ–°çš„æ—¥å¿—æ¡ç›®\n'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¿½åŠ å¤±è´¥:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿½åŠ æˆåŠŸ'</span>);
});

<span class="hljs-comment">// åŒæ­¥è¿½åŠ </span>
<span class="hljs-keyword">try</span> {
  fs.<span class="hljs-title function_">appendFileSync</span>(<span class="hljs-string">'log.txt'</span>, <span class="hljs-string">'æ–°çš„æ—¥å¿—æ¡ç›®\n'</span>, <span class="hljs-string">'utf8'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¿½åŠ æˆåŠŸ'</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¿½åŠ å¤±è´¥:'</span>, err);
}
</code></pre>
<hr/>
<h2 data-id="heading-11">ä¸‰ã€ç›®å½•æ“ä½œ</h2>
<h3 data-id="heading-12">3.1 åˆ›å»ºç›®å½•</h3>
<h4 data-id="heading-13">3.1.1 å¼‚æ­¥åˆ›å»ºç›®å½•ï¼ˆmkdirï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// åˆ›å»ºå•ä¸ªç›®å½•</span>
fs.<span class="hljs-title function_">mkdir</span>(<span class="hljs-string">'newDir'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åˆ›å»ºç›®å½•å¤±è´¥:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç›®å½•åˆ›å»ºæˆåŠŸ'</span>);
});

<span class="hljs-comment">// åˆ›å»ºåµŒå¥—ç›®å½•ï¼ˆéœ€è¦ recursive: trueï¼‰</span>
fs.<span class="hljs-title function_">mkdir</span>(<span class="hljs-string">'path/to/nested/dir'</span>, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> }, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åˆ›å»ºç›®å½•å¤±è´¥:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åµŒå¥—ç›®å½•åˆ›å»ºæˆåŠŸ'</span>);
});
</code></pre>
<h4 data-id="heading-14">3.1.2 åŒæ­¥åˆ›å»ºç›®å½•ï¼ˆmkdirSyncï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-keyword">try</span> {
  <span class="hljs-comment">// åˆ›å»ºå•ä¸ªç›®å½•</span>
  fs.<span class="hljs-title function_">mkdirSync</span>(<span class="hljs-string">'newDir'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç›®å½•åˆ›å»ºæˆåŠŸ'</span>);
  
  <span class="hljs-comment">// åˆ›å»ºåµŒå¥—ç›®å½•</span>
  fs.<span class="hljs-title function_">mkdirSync</span>(<span class="hljs-string">'path/to/nested/dir'</span>, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åµŒå¥—ç›®å½•åˆ›å»ºæˆåŠŸ'</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åˆ›å»ºç›®å½•å¤±è´¥:'</span>, err);
}
</code></pre>
<h3 data-id="heading-15">3.2 è¯»å–ç›®å½•</h3>
<h4 data-id="heading-16">3.2.1 å¼‚æ­¥è¯»å–ç›®å½•ï¼ˆreaddirï¼‰</h4>
<p><code>fs.readdir()</code> ç”¨äºè¯»å–ç›®å½•å†…å®¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);

<span class="hljs-comment">// åŸºæœ¬ç”¨æ³•</span>
fs.<span class="hljs-title function_">readdir</span>(<span class="hljs-string">'./'</span>, <span class="hljs-function">(<span class="hljs-params">err, files</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–ç›®å½•å¤±è´¥:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç›®å½•å†…å®¹:'</span>, files);
});

<span class="hljs-comment">// è¯»å–è¯¦ç»†ä¿¡æ¯ï¼ˆä½¿ç”¨ withFileTypesï¼‰</span>
fs.<span class="hljs-title function_">readdir</span>(<span class="hljs-string">'./'</span>, { <span class="hljs-attr">withFileTypes</span>: <span class="hljs-literal">true</span> }, <span class="hljs-function">(<span class="hljs-params">err, entries</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–ç›®å½•å¤±è´¥:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  
  entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (entry.<span class="hljs-title function_">isDirectory</span>()) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç›®å½•: <span class="hljs-subst">${entry.name}</span>`</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (entry.<span class="hljs-title function_">isFile</span>()) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ–‡ä»¶: <span class="hljs-subst">${entry.name}</span>`</span>);
    }
  });
});

<span class="hljs-comment">// é€’å½’è¯»å–ç›®å½•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">readDirRecursive</span>(<span class="hljs-params">dirPath</span>) {
  fs.<span class="hljs-title function_">readdir</span>(dirPath, { <span class="hljs-attr">withFileTypes</span>: <span class="hljs-literal">true</span> }, <span class="hljs-function">(<span class="hljs-params">err, entries</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–å¤±è´¥:'</span>, err);
      <span class="hljs-keyword">return</span>;
    }
    
    entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> fullPath = path.<span class="hljs-title function_">join</span>(dirPath, entry.<span class="hljs-property">name</span>);
      <span class="hljs-keyword">if</span> (entry.<span class="hljs-title function_">isDirectory</span>()) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç›®å½•: <span class="hljs-subst">${fullPath}</span>`</span>);
        <span class="hljs-title function_">readDirRecursive</span>(fullPath);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ–‡ä»¶: <span class="hljs-subst">${fullPath}</span>`</span>);
      }
    });
  });
}

<span class="hljs-title function_">readDirRecursive</span>(<span class="hljs-string">'./'</span>);
</code></pre>
<h4 data-id="heading-17">3.2.2 åŒæ­¥è¯»å–ç›®å½•ï¼ˆreaddirSyncï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> files = fs.<span class="hljs-title function_">readdirSync</span>(<span class="hljs-string">'./'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç›®å½•å†…å®¹:'</span>, files);
  
  <span class="hljs-comment">// è¯»å–è¯¦ç»†ä¿¡æ¯</span>
  <span class="hljs-keyword">const</span> entries = fs.<span class="hljs-title function_">readdirSync</span>(<span class="hljs-string">'./'</span>, { <span class="hljs-attr">withFileTypes</span>: <span class="hljs-literal">true</span> });
  entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(entry.<span class="hljs-title function_">isDirectory</span>() ? <span class="hljs-string">`ç›®å½•: <span class="hljs-subst">${entry.name}</span>`</span> : <span class="hljs-string">`æ–‡ä»¶: <span class="hljs-subst">${entry.name}</span>`</span>);
  });
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–ç›®å½•å¤±è´¥:'</span>, err);
}
</code></pre>
<h3 data-id="heading-18">3.3 åˆ é™¤ç›®å½•</h3>
<h4 data-id="heading-19">3.3.1 å¼‚æ­¥åˆ é™¤ç›®å½•ï¼ˆrmdirï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// åˆ é™¤ç©ºç›®å½•</span>
fs.<span class="hljs-title function_">rmdir</span>(<span class="hljs-string">'emptyDir'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åˆ é™¤ç›®å½•å¤±è´¥:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç›®å½•åˆ é™¤æˆåŠŸ'</span>);
});

<span class="hljs-comment">// åˆ é™¤éç©ºç›®å½•ï¼ˆéœ€è¦ recursive: trueï¼‰</span>
fs.<span class="hljs-title function_">rmdir</span>(<span class="hljs-string">'nonEmptyDir'</span>, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> }, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åˆ é™¤ç›®å½•å¤±è´¥:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç›®å½•åŠå…¶å†…å®¹åˆ é™¤æˆåŠŸ'</span>);
});
</code></pre>
<p><strong>æ³¨æ„ï¼š</strong> åœ¨ Node.js 14.14.0+ ç‰ˆæœ¬ä¸­ï¼Œæ¨èä½¿ç”¨ <code>fs.rm()</code> æ›¿ä»£ <code>fs.rmdir()</code> åˆ é™¤éç©ºç›®å½•ã€‚</p>
<h4 data-id="heading-20">3.3.2 åŒæ­¥åˆ é™¤ç›®å½•ï¼ˆrmdirSyncï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-keyword">try</span> {
  <span class="hljs-comment">// åˆ é™¤ç©ºç›®å½•</span>
  fs.<span class="hljs-title function_">rmdirSync</span>(<span class="hljs-string">'emptyDir'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç›®å½•åˆ é™¤æˆåŠŸ'</span>);
  
  <span class="hljs-comment">// åˆ é™¤éç©ºç›®å½•</span>
  fs.<span class="hljs-title function_">rmdirSync</span>(<span class="hljs-string">'nonEmptyDir'</span>, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç›®å½•åŠå…¶å†…å®¹åˆ é™¤æˆåŠŸ'</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åˆ é™¤ç›®å½•å¤±è´¥:'</span>, err);
}
</code></pre>
<h3 data-id="heading-21">3.4 åˆ é™¤æ–‡ä»¶</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// å¼‚æ­¥åˆ é™¤æ–‡ä»¶</span>
fs.<span class="hljs-title function_">unlink</span>(<span class="hljs-string">'file.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åˆ é™¤æ–‡ä»¶å¤±è´¥:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶åˆ é™¤æˆåŠŸ'</span>);
});

<span class="hljs-comment">// åŒæ­¥åˆ é™¤æ–‡ä»¶</span>
<span class="hljs-keyword">try</span> {
  fs.<span class="hljs-title function_">unlinkSync</span>(<span class="hljs-string">'file.txt'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶åˆ é™¤æˆåŠŸ'</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åˆ é™¤æ–‡ä»¶å¤±è´¥:'</span>, err);
}
</code></pre>
<hr/>
<h2 data-id="heading-22">å››ã€æ–‡ä»¶ç³»ç»Ÿé«˜çº§æ“ä½œ</h2>
<h3 data-id="heading-23">4.1 æ–‡ä»¶ç›‘å¬</h3>
<h4 data-id="heading-24">4.1.1 ä½¿ç”¨ watch ç›‘å¬æ–‡ä»¶å˜åŒ–</h4>
<p><code>fs.watch()</code> æ˜¯è·¨å¹³å°çš„æ–‡ä»¶ç›‘å¬ APIï¼Œä½†è¡Œä¸ºå¯èƒ½å› å¹³å°è€Œå¼‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// ç›‘å¬æ–‡ä»¶</span>
<span class="hljs-keyword">const</span> watcher = fs.<span class="hljs-title function_">watch</span>(<span class="hljs-string">'example.txt'</span>, <span class="hljs-function">(<span class="hljs-params">eventType, filename</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (filename) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`äº‹ä»¶ç±»å‹: <span class="hljs-subst">${eventType}</span>`</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ–‡ä»¶å: <span class="hljs-subst">${filename}</span>`</span>);
    
    <span class="hljs-keyword">if</span> (eventType === <span class="hljs-string">'change'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å†…å®¹å‘ç”Ÿå˜åŒ–'</span>);
      <span class="hljs-comment">// è¯»å–æœ€æ–°å†…å®¹</span>
      fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'example.txt'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (!err) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ€æ–°å†…å®¹:'</span>, data);
        }
      });
    }
  }
});

<span class="hljs-comment">// ç›‘å¬ç›®å½•</span>
<span class="hljs-keyword">const</span> dirWatcher = fs.<span class="hljs-title function_">watch</span>(<span class="hljs-string">'./'</span>, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> }, <span class="hljs-function">(<span class="hljs-params">eventType, filename</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`äº‹ä»¶ç±»å‹: <span class="hljs-subst">${eventType}</span>, æ–‡ä»¶: <span class="hljs-subst">${filename}</span>`</span>);
});

<span class="hljs-comment">// å…³é—­ç›‘å¬å™¨</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  watcher.<span class="hljs-title function_">close</span>();
  dirWatcher.<span class="hljs-title function_">close</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç›‘å¬å™¨å·²å…³é—­'</span>);
}, <span class="hljs-number">60000</span>); <span class="hljs-comment">// 60ç§’åå…³é—­</span>
</code></pre>
<p><strong>äº‹ä»¶ç±»å‹ï¼š</strong></p>
<ul>
<li><code>'rename'</code>: æ–‡ä»¶æˆ–ç›®å½•è¢«é‡å‘½åæˆ–åˆ é™¤</li>
<li><code>'change'</code>: æ–‡ä»¶å†…å®¹å‘ç”Ÿå˜åŒ–</li>
</ul>
<h4 data-id="heading-25">4.1.2 ä½¿ç”¨ watchFile ç›‘å¬æ–‡ä»¶ï¼ˆå·²å¼ƒç”¨ï¼‰</h4>
<p><code>fs.watchFile()</code> ä½¿ç”¨è½®è¯¢æœºåˆ¶ï¼Œæ€§èƒ½è¾ƒå·®ï¼Œä¸æ¨èä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// ç›‘å¬æ–‡ä»¶å˜åŒ–ï¼ˆè½®è¯¢æ–¹å¼ï¼‰</span>
fs.<span class="hljs-title function_">watchFile</span>(<span class="hljs-string">'example.txt'</span>, { <span class="hljs-attr">interval</span>: <span class="hljs-number">1000</span> }, <span class="hljs-function">(<span class="hljs-params">curr, prev</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (curr.<span class="hljs-property">mtime</span> !== prev.<span class="hljs-property">mtime</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å·²ä¿®æ”¹'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰ä¿®æ”¹æ—¶é—´:'</span>, curr.<span class="hljs-property">mtime</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¹‹å‰ä¿®æ”¹æ—¶é—´:'</span>, prev.<span class="hljs-property">mtime</span>);
  }
});

<span class="hljs-comment">// åœæ­¢ç›‘å¬</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  fs.<span class="hljs-title function_">unwatchFile</span>(<span class="hljs-string">'example.txt'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å·²åœæ­¢ç›‘å¬'</span>);
}, <span class="hljs-number">30000</span>);
</code></pre>
<p><strong>æ³¨æ„ï¼š</strong> <code>fs.watchFile()</code> å·²è¢«æ ‡è®°ä¸ºå¼ƒç”¨ï¼Œæ¨èä½¿ç”¨ <code>fs.watch()</code>ã€‚</p>
<h3 data-id="heading-26">4.2 æµå¼æ–‡ä»¶æ“ä½œ</h3>
<p>æµï¼ˆStreamï¼‰æ˜¯å¤„ç†å¤§æ–‡ä»¶çš„é«˜æ•ˆæ–¹å¼ï¼Œé¿å…ä¸€æ¬¡æ€§å°†æ•´ä¸ªæ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚</p>
<h4 data-id="heading-27">4.2.1 åˆ›å»ºå¯è¯»æµ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// åˆ›å»ºå¯è¯»æµ</span>
<span class="hljs-keyword">const</span> readStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'large-file.txt'</span>, <span class="hljs-string">'utf8'</span>);

readStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'data'</span>, <span class="hljs-function">(<span class="hljs-params">chunk</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯»å–æ•°æ®å—:'</span>, chunk.<span class="hljs-property">length</span>, <span class="hljs-string">'å­—èŠ‚'</span>);
  <span class="hljs-comment">// å¤„ç†æ•°æ®å—</span>
});

readStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'end'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶è¯»å–å®Œæˆ'</span>);
});

readStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–é”™è¯¯:'</span>, err);
});
</code></pre>
<h4 data-id="heading-28">4.2.2 åˆ›å»ºå¯å†™æµ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// åˆ›å»ºå¯å†™æµ</span>
<span class="hljs-keyword">const</span> writeStream = fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'output.txt'</span>, <span class="hljs-string">'utf8'</span>);

writeStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'ç¬¬ä¸€è¡Œæ•°æ®\n'</span>);
writeStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'ç¬¬äºŒè¡Œæ•°æ®\n'</span>);
writeStream.<span class="hljs-title function_">write</span>(<span class="hljs-string">'ç¬¬ä¸‰è¡Œæ•°æ®\n'</span>);

writeStream.<span class="hljs-title function_">end</span>(); <span class="hljs-comment">// ç»“æŸå†™å…¥</span>

writeStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'finish'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å†™å…¥å®Œæˆ'</span>);
});

writeStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å†™å…¥é”™è¯¯:'</span>, err);
});
</code></pre>
<h4 data-id="heading-29">4.2.3 ä½¿ç”¨ç®¡é“ï¼ˆpipeï¼‰å¤åˆ¶æ–‡ä»¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// ä½¿ç”¨ç®¡é“å¤åˆ¶å¤§æ–‡ä»¶</span>
<span class="hljs-keyword">const</span> readStream = fs.<span class="hljs-title function_">createReadStream</span>(<span class="hljs-string">'source.txt'</span>);
<span class="hljs-keyword">const</span> writeStream = fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'destination.txt'</span>);

readStream.<span class="hljs-title function_">pipe</span>(writeStream);

readStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'end'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å¤åˆ¶å®Œæˆ'</span>);
});

writeStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¤åˆ¶é”™è¯¯:'</span>, err);
});
</code></pre>
<h4 data-id="heading-30">4.2.4 æµå¼å¤„ç†å¤§æ–‡ä»¶ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> readline = <span class="hljs-built_in">require</span>(<span class="hljs-string">'readline'</span>);

<span class="hljs-comment">// é€è¡Œè¯»å–å¤§æ–‡ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">processLargeFile</span>(<span class="hljs-params">filePath</span>) {
  <span class="hljs-keyword">const</span> readStream = fs.<span class="hljs-title function_">createReadStream</span>(filePath, <span class="hljs-string">'utf8'</span>);
  <span class="hljs-keyword">const</span> rl = readline.<span class="hljs-title function_">createInterface</span>({
    <span class="hljs-attr">input</span>: readStream,
    <span class="hljs-attr">crlfDelay</span>: <span class="hljs-title class_">Infinity</span>
  });
  
  rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'line'</span>, <span class="hljs-function">(<span class="hljs-params">line</span>) =&gt;</span> {
    <span class="hljs-comment">// å¤„ç†æ¯ä¸€è¡Œ</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤„ç†è¡Œ:'</span>, line);
  });
  
  rl.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å¤„ç†å®Œæˆ'</span>);
  });
}

<span class="hljs-title function_">processLargeFile</span>(<span class="hljs-string">'large-file.txt'</span>);
</code></pre>
<h3 data-id="heading-31">4.3 æ–‡ä»¶æƒé™</h3>
<h4 data-id="heading-32">4.3.1 æ£€æŸ¥æ–‡ä»¶æƒé™</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// æ£€æŸ¥æ–‡ä»¶è®¿é—®æƒé™ï¼ˆå¼‚æ­¥ï¼‰</span>
fs.<span class="hljs-title function_">access</span>(<span class="hljs-string">'file.txt'</span>, fs.<span class="hljs-property">constants</span>.<span class="hljs-property">F_OK</span> | fs.<span class="hljs-property">constants</span>.<span class="hljs-property">R_OK</span> | fs.<span class="hljs-property">constants</span>.<span class="hljs-property">W_OK</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ–‡ä»¶ä¸å¯è®¿é—®:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å¯è¯»å¯å†™'</span>);
});

<span class="hljs-comment">// æ£€æŸ¥æ–‡ä»¶æƒé™ï¼ˆåŒæ­¥ï¼‰</span>
<span class="hljs-keyword">try</span> {
  fs.<span class="hljs-title function_">accessSync</span>(<span class="hljs-string">'file.txt'</span>, fs.<span class="hljs-property">constants</span>.<span class="hljs-property">R_OK</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å¯è¯»'</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ–‡ä»¶ä¸å¯è¯»:'</span>, err);
}
</code></pre>
<p><strong>æƒé™å¸¸é‡ï¼š</strong></p>
<ul>
<li><code>fs.constants.F_OK</code>: æ–‡ä»¶å­˜åœ¨</li>
<li><code>fs.constants.R_OK</code>: å¯è¯»</li>
<li><code>fs.constants.W_OK</code>: å¯å†™</li>
<li><code>fs.constants.X_OK</code>: å¯æ‰§è¡Œ</li>
</ul>
<h4 data-id="heading-33">4.3.2 ä¿®æ”¹æ–‡ä»¶æƒé™</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// å¼‚æ­¥ä¿®æ”¹æƒé™</span>
fs.<span class="hljs-title function_">chmod</span>(<span class="hljs-string">'file.txt'</span>, <span class="hljs-number">0o755</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä¿®æ”¹æƒé™å¤±è´¥:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æƒé™ä¿®æ”¹æˆåŠŸ'</span>);
});

<span class="hljs-comment">// åŒæ­¥ä¿®æ”¹æƒé™</span>
<span class="hljs-keyword">try</span> {
  fs.<span class="hljs-title function_">chmodSync</span>(<span class="hljs-string">'file.txt'</span>, <span class="hljs-number">0o644</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æƒé™ä¿®æ”¹æˆåŠŸ'</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä¿®æ”¹æƒé™å¤±è´¥:'</span>, err);
}
</code></pre>
<p><strong>æƒé™æ¨¡å¼è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>0o755</code>: æ‰€æœ‰è€…å¯è¯»å¯å†™å¯æ‰§è¡Œï¼Œç»„å’Œå…¶ä»–ç”¨æˆ·å¯è¯»å¯æ‰§è¡Œ</li>
<li><code>0o644</code>: æ‰€æœ‰è€…å¯è¯»å¯å†™ï¼Œç»„å’Œå…¶ä»–ç”¨æˆ·åªè¯»</li>
</ul>
<h3 data-id="heading-34">4.4 æ–‡ä»¶ç»Ÿè®¡ä¿¡æ¯</h3>
<h4 data-id="heading-35">4.4.1 è·å–æ–‡ä»¶ç»Ÿè®¡ä¿¡æ¯ï¼ˆstatï¼‰</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// å¼‚æ­¥è·å–æ–‡ä»¶ç»Ÿè®¡ä¿¡æ¯</span>
fs.<span class="hljs-title function_">stat</span>(<span class="hljs-string">'file.txt'</span>, <span class="hljs-function">(<span class="hljs-params">err, stats</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–ç»Ÿè®¡ä¿¡æ¯å¤±è´¥:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶ç»Ÿè®¡ä¿¡æ¯:'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ˜¯å¦ä¸ºæ–‡ä»¶:'</span>, stats.<span class="hljs-title function_">isFile</span>());
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ˜¯å¦ä¸ºç›®å½•:'</span>, stats.<span class="hljs-title function_">isDirectory</span>());
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å¤§å°:'</span>, stats.<span class="hljs-property">size</span>, <span class="hljs-string">'å­—èŠ‚'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åˆ›å»ºæ—¶é—´:'</span>, stats.<span class="hljs-property">birthtime</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¿®æ”¹æ—¶é—´:'</span>, stats.<span class="hljs-property">mtime</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è®¿é—®æ—¶é—´:'</span>, stats.<span class="hljs-property">atime</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æƒé™:'</span>, stats.<span class="hljs-property">mode</span>.<span class="hljs-title function_">toString</span>(<span class="hljs-number">8</span>));
});

<span class="hljs-comment">// åŒæ­¥è·å–æ–‡ä»¶ç»Ÿè®¡ä¿¡æ¯</span>
<span class="hljs-keyword">try</span> {
  <span class="hljs-keyword">const</span> stats = fs.<span class="hljs-title function_">statSync</span>(<span class="hljs-string">'file.txt'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å¤§å°:'</span>, stats.<span class="hljs-property">size</span>, <span class="hljs-string">'å­—èŠ‚'</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¿®æ”¹æ—¶é—´:'</span>, stats.<span class="hljs-property">mtime</span>);
} <span class="hljs-keyword">catch</span> (err) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–ç»Ÿè®¡ä¿¡æ¯å¤±è´¥:'</span>, err);
}
</code></pre>
<p><strong>Stats å¯¹è±¡å±æ€§ï¼š</strong></p>
<ul>
<li><code>size</code>: æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰</li>
<li><code>birthtime</code>: åˆ›å»ºæ—¶é—´</li>
<li><code>mtime</code>: ä¿®æ”¹æ—¶é—´</li>
<li><code>atime</code>: è®¿é—®æ—¶é—´</li>
<li><code>ctime</code>: çŠ¶æ€å˜æ›´æ—¶é—´</li>
<li><code>isFile()</code>: æ˜¯å¦ä¸ºæ–‡ä»¶</li>
<li><code>isDirectory()</code>: æ˜¯å¦ä¸ºç›®å½•</li>
<li><code>isSymbolicLink()</code>: æ˜¯å¦ä¸ºç¬¦å·é“¾æ¥</li>
</ul>
<h4 data-id="heading-36">4.4.2 æ£€æŸ¥æ–‡ä»¶æˆ–ç›®å½•æ˜¯å¦å­˜åœ¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-comment">// å¼‚æ­¥æ£€æŸ¥</span>
fs.<span class="hljs-title function_">access</span>(<span class="hljs-string">'file.txt'</span>, fs.<span class="hljs-property">constants</span>.<span class="hljs-property">F_OK</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶ä¸å­˜åœ¨'</span>);
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å­˜åœ¨'</span>);
  }
});

<span class="hljs-comment">// åŒæ­¥æ£€æŸ¥ï¼ˆæ¨èï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">fileExists</span>(<span class="hljs-params">filePath</span>) {
  <span class="hljs-keyword">try</span> {
    fs.<span class="hljs-title function_">accessSync</span>(filePath, fs.<span class="hljs-property">constants</span>.<span class="hljs-property">F_OK</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  } <span class="hljs-keyword">catch</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
}

<span class="hljs-keyword">if</span> (<span class="hljs-title function_">fileExists</span>(<span class="hljs-string">'file.txt'</span>)) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å­˜åœ¨'</span>);
} <span class="hljs-keyword">else</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶ä¸å­˜åœ¨'</span>);
}
</code></pre>
<hr/>
<h2 data-id="heading-37">äº”ã€å®ç”¨ç¤ºä¾‹</h2>
<h3 data-id="heading-38">5.1 æ–‡ä»¶å¤åˆ¶å·¥å…·</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">copyFile</span>(<span class="hljs-params">source, destination</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> readStream = fs.<span class="hljs-title function_">createReadStream</span>(source);
    <span class="hljs-keyword">const</span> writeStream = fs.<span class="hljs-title function_">createWriteStream</span>(destination);
    
    readStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, reject);
    writeStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, reject);
    writeStream.<span class="hljs-title function_">on</span>(<span class="hljs-string">'finish'</span>, resolve);
    
    readStream.<span class="hljs-title function_">pipe</span>(writeStream);
  });
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-title function_">copyFile</span>(<span class="hljs-string">'source.txt'</span>, <span class="hljs-string">'destination.txt'</span>)
  .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤åˆ¶æˆåŠŸ'</span>))
  .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¤åˆ¶å¤±è´¥:'</span>, err));
</code></pre>
<h3 data-id="heading-39">5.2 ç›®å½•éå†å·¥å…·</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">walkDir</span>(<span class="hljs-params">dirPath, callback</span>) {
  fs.<span class="hljs-title function_">readdir</span>(dirPath, { <span class="hljs-attr">withFileTypes</span>: <span class="hljs-literal">true</span> }, <span class="hljs-function">(<span class="hljs-params">err, entries</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-title function_">callback</span>(err);
      <span class="hljs-keyword">return</span>;
    }
    
    entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> fullPath = path.<span class="hljs-title function_">join</span>(dirPath, entry.<span class="hljs-property">name</span>);
      <span class="hljs-keyword">if</span> (entry.<span class="hljs-title function_">isDirectory</span>()) {
        <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, fullPath, <span class="hljs-string">'directory'</span>);
        <span class="hljs-title function_">walkDir</span>(fullPath, callback);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">callback</span>(<span class="hljs-literal">null</span>, fullPath, <span class="hljs-string">'file'</span>);
      }
    });
  });
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-title function_">walkDir</span>(<span class="hljs-string">'./'</span>, <span class="hljs-function">(<span class="hljs-params">err, filePath, type</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'éå†é”™è¯¯:'</span>, err);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${type}</span>: <span class="hljs-subst">${filePath}</span>`</span>);
});
</code></pre>
<h3 data-id="heading-40">5.3 æ—¥å¿—è®°å½•å·¥å…·</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Logger</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">logFile</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">logFile</span> = logFile;
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">ensureLogFile</span>();
  }
  
  <span class="hljs-title function_">ensureLogFile</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (!fs.<span class="hljs-title function_">existsSync</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">logFile</span>)) {
      fs.<span class="hljs-title function_">writeFileSync</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">logFile</span>, <span class="hljs-string">''</span>);
    }
  }
  
  <span class="hljs-title function_">log</span>(<span class="hljs-params">message</span>) {
    <span class="hljs-keyword">const</span> timestamp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>();
    <span class="hljs-keyword">const</span> logMessage = <span class="hljs-string">`[<span class="hljs-subst">${timestamp}</span>] <span class="hljs-subst">${message}</span>\n`</span>;
    
    fs.<span class="hljs-title function_">appendFile</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">logFile</span>, logMessage, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (err) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ—¥å¿—å†™å…¥å¤±è´¥:'</span>, err);
      }
    });
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> logger = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Logger</span>(<span class="hljs-string">'app.log'</span>);
logger.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åº”ç”¨ç¨‹åºå¯åŠ¨'</span>);
logger.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¤„ç†ç”¨æˆ·è¯·æ±‚'</span>);
</code></pre>
<hr/>
<h2 data-id="heading-41">å…­ã€æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-42">6.1 é”™è¯¯å¤„ç†</h3>
<p>å§‹ç»ˆå¤„ç†æ–‡ä»¶ç³»ç»Ÿæ“ä½œçš„é”™è¯¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file.txt'</span>, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-keyword">if</span> (err) {
    <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span> === <span class="hljs-string">'ENOENT'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ–‡ä»¶ä¸å­˜åœ¨'</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (err.<span class="hljs-property">code</span> === <span class="hljs-string">'EACCES'</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æƒé™ä¸è¶³'</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æœªçŸ¥é”™è¯¯:'</span>, err);
    }
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-comment">// å¤„ç†æ•°æ®</span>
});
</code></pre>
<h3 data-id="heading-43">6.2 è·¯å¾„å¤„ç†</h3>
<p>ä½¿ç”¨ <code>path</code> æ¨¡å—å¤„ç†è·¯å¾„ï¼Œç¡®ä¿è·¨å¹³å°å…¼å®¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);

<span class="hljs-keyword">const</span> filePath = path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">'data'</span>, <span class="hljs-string">'file.txt'</span>);
fs.<span class="hljs-title function_">readFile</span>(filePath, <span class="hljs-string">'utf8'</span>, <span class="hljs-function">(<span class="hljs-params">err, data</span>) =&gt;</span> {
  <span class="hljs-comment">// ...</span>
});
</code></pre>
<h3 data-id="heading-44">6.3 æ€§èƒ½ä¼˜åŒ–</h3>
<ul>
<li>å¯¹äºå¤§æ–‡ä»¶ï¼Œä½¿ç”¨æµï¼ˆStreamï¼‰è€Œä¸æ˜¯ <code>readFile</code>/<code>writeFile</code></li>
<li>ä¼˜å…ˆä½¿ç”¨å¼‚æ­¥æ“ä½œï¼Œé¿å…é˜»å¡äº‹ä»¶å¾ªç¯</li>
<li>ä½¿ç”¨ <code>fs.promises</code> API æˆ– <code>util.promisify</code> å°†å›è°ƒè½¬æ¢ä¸º Promise</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> { promisify } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'util'</span>);

<span class="hljs-keyword">const</span> readFile = <span class="hljs-title function_">promisify</span>(fs.<span class="hljs-property">readFile</span>);

<span class="hljs-comment">// ä½¿ç”¨ async/await</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">readFileAsync</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file.txt'</span>, <span class="hljs-string">'utf8'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯»å–å¤±è´¥:'</span>, err);
  }
}
</code></pre>
<h3 data-id="heading-45">6.4 ä½¿ç”¨ Promise API</h3>
<p>Node.js 10+ æä¾›äº† <code>fs.promises</code> APIï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>).<span class="hljs-property">promises</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fileOperations</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// è¯»å–æ–‡ä»¶</span>
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">readFile</span>(<span class="hljs-string">'file.txt'</span>, <span class="hljs-string">'utf8'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–‡ä»¶å†…å®¹:'</span>, data);
    
    <span class="hljs-comment">// å†™å…¥æ–‡ä»¶</span>
    <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">'output.txt'</span>, <span class="hljs-string">'Hello World'</span>, <span class="hljs-string">'utf8'</span>);
    
    <span class="hljs-comment">// åˆ›å»ºç›®å½•</span>
    <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">mkdir</span>(<span class="hljs-string">'newDir'</span>, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });
    
    <span class="hljs-comment">// è¯»å–ç›®å½•</span>
    <span class="hljs-keyword">const</span> files = <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">readdir</span>(<span class="hljs-string">'./'</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç›®å½•å†…å®¹:'</span>, files);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ“ä½œå¤±è´¥:'</span>, err);
  }
}

<span class="hljs-title function_">fileOperations</span>();
</code></pre>
<hr/>
<h2 data-id="heading-46">ä¸ƒã€æ€»ç»“</h2>
<p>Node.js æ–‡ä»¶ç³»ç»Ÿæ¨¡å—æä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>åŸºç¡€æ“ä½œ</strong>ï¼šæ–‡ä»¶è¯»å†™ã€ç›®å½•æ“ä½œ</li>
<li><strong>é«˜çº§ç‰¹æ€§</strong>ï¼šæ–‡ä»¶ç›‘å¬ã€æµå¼æ“ä½œã€æƒé™ç®¡ç†ã€ç»Ÿè®¡ä¿¡æ¯</li>
<li><strong>å¤šç§æ–¹å¼</strong>ï¼šåŒæ­¥/å¼‚æ­¥æ“ä½œã€å›è°ƒ/Promise/async-await</li>
</ul>
<p><strong>å…³é”®è¦ç‚¹ï¼š</strong></p>
<ol>
<li>ä¼˜å…ˆä½¿ç”¨å¼‚æ­¥æ“ä½œï¼Œé¿å…é˜»å¡äº‹ä»¶å¾ªç¯</li>
<li>å¤„ç†å¤§æ–‡ä»¶æ—¶ä½¿ç”¨æµï¼ˆStreamï¼‰</li>
<li>å§‹ç»ˆè¿›è¡Œé”™è¯¯å¤„ç†</li>
<li>ä½¿ç”¨ <code>path</code> æ¨¡å—å¤„ç†è·¯å¾„ï¼Œç¡®ä¿è·¨å¹³å°å…¼å®¹</li>
<li>è€ƒè™‘ä½¿ç”¨ <code>fs.promises</code> API æˆ– Promise åŒ…è£…å™¨</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ReactDOM.preload]]></title>    <link>https://juejin.cn/post/7584262116388192282</link>    <guid>https://juejin.cn/post/7584262116388192282</guid>    <pubDate>2025-12-16T09:26:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584262116388192282" data-draft-id="7584262116387995674" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ReactDOM.preload"/> <meta itemprop="keywords" content="å‰ç«¯,React.js"/> <meta itemprop="datePublished" content="2025-12-16T09:26:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Kellen"/> <meta itemprop="url" content="https://juejin.cn/user/1007587030991165"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ReactDOM.preload
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1007587030991165/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Kellen
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T09:26:21.000Z" title="Tue Dec 16 2025 09:26:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="tomorrow-night">.hljs-comment,.hljs-quote{color:#969896}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c66}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#de935f}.hljs-attribute{color:#f0c674}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#b5bd68}.hljs-section,.hljs-title{color:#81a2be}.hljs-keyword,.hljs-selector-tag{color:#b294bb}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1d1f21;color:#c5c8c6}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç®€ä»‹</h2>
<p><code>ReactDOM.preload</code>React æä¾›çš„èµ„æºé¢„åŠ è½½ APIï¼Œç”¨äºåœ¨ç»„ä»¶çœŸæ­£æ¸²æŸ“å‰ï¼Œæå‰å‘Šè¯‰æµè§ˆå™¨é«˜ä¼˜å…ˆçº§åŠ è½½â€œå½“å‰é¡µé¢ä¸€å®šä¼šç”¨åˆ°â€çš„å…³é”®èµ„æºã€‚</p>
<p>å®ƒåœ¨è¯­ä¹‰ä¸Šç­‰ä»·äº<code>&lt;link rel="preload"&gt; </code>ï¼Œä½†ç”± React ç»Ÿä¸€ç®¡ç†ï¼Œé€‚ç”¨äºå¹¶å‘æ¸²æŸ“å’Œ SSR / Streaming åœºæ™¯ã€‚</p>
<h2 data-id="heading-1">ä¸»è¦åŠŸèƒ½ï¼ˆå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼‰</h2>
<p>ç”¨äºæå‰é¢„åŠ è½½å…³é”®èµ„æºï¼ˆè„šæœ¬ã€æ ·å¼ã€å­—ä½“ã€å›¾åƒç­‰ï¼‰ï¼Œä¼˜åŒ–é¡µé¢æ€§èƒ½ã€‚å³ï¼šå°†<code>â€œèµ„æºåŠ è½½â€æå‰åˆ°æ¸²æŸ“ä¹‹å‰ï¼Œç¼©çŸ­å…³é”®æ¸²æŸ“è·¯å¾„ã€‚</code></p>
<p>åœ¨å¹¶å‘æ¸²æŸ“æˆ– Streaming SSR åœºæ™¯ä¸­ï¼š</p>
<ul>
<li>ç»„ä»¶å¯èƒ½è¿˜æ²¡ render</li>
<li>ä½†å·²ç»ç¡®å®šæŸäº›èµ„æºé©¬ä¸Šä¼šè¢«ä½¿ç”¨ï¼ˆå›¾ç‰‡ / å­—ä½“ / CSS / JSï¼‰</li>
</ul>
<p>å¦‚æœç­‰ç»„ä»¶ render åå†è§¦å‘èµ„æºåŠ è½½ï¼Œä¼šå¯¼è‡´ï¼š</p>
<ul>
<li>é¦–å±èµ„æºä¸‹è½½å¯åŠ¨è¿‡æ™š</li>
<li>LCPï¼ˆLargest Contentful Paintï¼‰å˜æ…¢</li>
<li>Suspense resolve åå‡ºç°äºŒæ¬¡ç­‰å¾…</li>
</ul>
<h2 data-id="heading-2">å‚æ•°/å±æ€§</h2>
<h3 data-id="heading-3"><code>preload(href, options) </code></h3>


























<table><thead><tr><th>å‚æ•°å</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>href</code></td><td>string</td><td>âœ…</td><td>-</td><td>è¦é¢„åŠ è½½çš„èµ„æºURL</td></tr><tr><td><code>options</code></td><td>object</td><td>âœ…</td><td>-</td><td>é…ç½®é€‰é¡¹</td></tr></tbody></table>
<h3 data-id="heading-4"><code>options</code> å¯¹è±¡å‚æ•°:</h3>





















































































<table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>å¿…å¡«</th><th>é»˜è®¤å€¼</th><th>æè¿°</th><th>æœ‰æ•ˆå€¼</th></tr></thead><tbody><tr><td>as</td><td>string</td><td>âœ…</td><td>-</td><td>èµ„æºç±»å‹</td><td>'audio', 'document', 'embed', 'font', 'image', 'object', 'script', 'style', 'track', 'video', 'worker'</td></tr><tr><td>crossOrigin</td><td>string</td><td>âŒ</td><td>undefined</td><td>CORSè®¾ç½®</td><td>'anonymous', 'use-credentials'</td></tr><tr><td>integrity</td><td>string</td><td>âŒ</td><td>undefined</td><td>å­èµ„æºå®Œæ•´æ€§(SRI)</td><td>å“ˆå¸Œå­—ç¬¦ä¸² (å¦‚ 'sha256-abc123...')</td></tr><tr><td>type</td><td>string</td><td>âŒ</td><td>undefined</td><td>èµ„æºMIMEç±»å‹</td><td>'font/woff2', 'text/css', 'application/javascript' ç­‰</td></tr><tr><td>fetchPriority</td><td>string</td><td>âŒ</td><td>'auto'</td><td>åŠ è½½ä¼˜å…ˆçº§</td><td>'high', 'low', 'auto'</td></tr><tr><td>referrerPolicy</td><td>string</td><td>âŒ</td><td>undefined</td><td>Referrerç­–ç•¥</td><td>'no-referrer', 'no-referrer-when-downgrade', 'origin', 'origin-when-cross-origin', 'unsafe-url'</td></tr><tr><td>imageSrcSet</td><td>string</td><td>âŒ</td><td>undefined</td><td>å“åº”å¼å›¾ç‰‡æºé›†</td><td>ä»…å½“ as: 'image' æ—¶æœ‰æ•ˆ</td></tr><tr><td>imageSizes</td><td>string</td><td>âŒ</td><td>undefined</td><td>å“åº”å¼å›¾ç‰‡å°ºå¯¸</td><td>ä»…å½“ as: 'image' æ—¶æœ‰æ•ˆ</td></tr><tr><td>media</td><td>string</td><td>âŒ</td><td>undefined</td><td>åª’ä½“æŸ¥è¯¢æ¡ä»¶</td><td>å¦‚ '(max-width: 768px)'</td></tr></tbody></table>
<h2 data-id="heading-5">ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-6">Case1ï¼šé¢„åŠ è½½å­—ä½“æ–‡ä»¶</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>;

<span class="hljs-comment">// é¢„åŠ è½½è‡ªå®šä¹‰å­—ä½“ï¼Œé¿å…FOUT/FOIT</span>
<span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">preload</span>(<span class="hljs-string">'/fonts/inter-bold.woff2'</span>, {
  <span class="hljs-attr">as</span>: <span class="hljs-string">'font'</span>,
  <span class="hljs-attr">type</span>: <span class="hljs-string">'font/woff2'</span>,
  <span class="hljs-attr">crossOrigin</span>: <span class="hljs-string">'anonymous'</span>,
  <span class="hljs-attr">fetchPriority</span>: <span class="hljs-string">'high'</span>
});
</code></pre>
<blockquote>
<p>ğŸ“Œå­—ä½“ preload å‡ ä¹æ€»æ˜¯éœ€è¦<code>crossOrigin</code>ã€‚</p>
</blockquote>
<h3 data-id="heading-7">Case2ï¼šé¢„åŠ è½½å…³é”®CSS</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// åˆ†ç¦»å…³é”®CSSå’Œéå…³é”®CSS</span>
<span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">preload</span>(<span class="hljs-string">'/critical.css'</span>, {
  <span class="hljs-attr">as</span>: <span class="hljs-string">'style'</span>,
  <span class="hljs-attr">fetchPriority</span>: <span class="hljs-string">'high'</span>
});

<span class="hljs-comment">// å»¶è¿ŸåŠ è½½éå…³é”®CSS</span>
<span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">preload</span>(<span class="hljs-string">'/non-critical.css'</span>, {
  <span class="hljs-attr">as</span>: <span class="hljs-string">'style'</span>,
  <span class="hljs-attr">fetchPriority</span>: <span class="hljs-string">'low'</span>,
  <span class="hljs-attr">media</span>: <span class="hljs-string">'print'</span>, <span class="hljs-comment">// åˆå§‹è®¾ä¸ºprintï¼ŒåŠ è½½ååˆ‡æ¢</span>
  <span class="hljs-attr">onLoad</span>: <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'link[href="/non-critical.css"]'</span>).<span class="hljs-property">media</span> = <span class="hljs-string">'all'</span>;
  }
});
</code></pre>
<h3 data-id="heading-8">Case3ï¼šé¢„åŠ è½½è„šæœ¬æ¨¡å—</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// é¢„åŠ è½½ESæ¨¡å—</span>
<span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">preload</span>(<span class="hljs-string">'/analytics-module.js'</span>, {
  <span class="hljs-attr">as</span>: <span class="hljs-string">'script'</span>,
  <span class="hljs-attr">type</span>: <span class="hljs-string">'module'</span>,
  <span class="hljs-attr">crossOrigin</span>: <span class="hljs-string">'anonymous'</span>,
  <span class="hljs-attr">integrity</span>: <span class="hljs-string">'sha256-abc123...'</span>
});

<span class="hljs-comment">// é¢„åŠ è½½JSONæ¨¡å—</span>
<span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">preload</span>(<span class="hljs-string">'/config.json'</span>, {
  <span class="hljs-attr">as</span>: <span class="hljs-string">'fetch'</span>,
  <span class="hljs-attr">type</span>: <span class="hljs-string">'application/json'</span>
});
</code></pre>
<h3 data-id="heading-9">Case4ï¼šå“åº”å¼å›¾ç‰‡é¢„åŠ è½½</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// é¢„åŠ è½½å“åº”å¼å›¾ç‰‡</span>
<span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">preload</span>(<span class="hljs-string">'/hero-image.jpg'</span>, {
  <span class="hljs-attr">as</span>: <span class="hljs-string">'image'</span>,
  <span class="hljs-attr">fetchPriority</span>: <span class="hljs-string">'high'</span>,
  <span class="hljs-attr">imageSrcSet</span>: <span class="hljs-string">`
    hero-image-320w.jpg 320w,
    hero-image-480w.jpg 480w,
    hero-image-800w.jpg 800w
  `</span>,
  <span class="hljs-attr">imageSizes</span>: <span class="hljs-string">`
    (max-width: 320px) 280px,
    (max-width: 480px) 440px,
    800px
  `</span>
});
</code></pre>
<h3 data-id="heading-10">Case5ï¼šè§†é¢‘èµ„æºé¢„åŠ è½½</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// é¢„åŠ è½½è§†é¢‘å…ƒæ•°æ®ï¼Œä½†ä¸ä¸‹è½½æ•´ä¸ªè§†é¢‘</span>
<span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">preload</span>(<span class="hljs-string">'/product-demo.mp4'</span>, {
  <span class="hljs-attr">as</span>: <span class="hljs-string">'video'</span>,
  <span class="hljs-attr">type</span>: <span class="hljs-string">'video/mp4'</span>,
  <span class="hljs-attr">fetchPriority</span>: <span class="hljs-string">'low'</span>, <span class="hljs-comment">// éå…³é”®èµ„æºç”¨ä½ä¼˜å…ˆçº§</span>
  <span class="hljs-attr">media</span>: <span class="hljs-string">'(min-width: 1024px)'</span> <span class="hljs-comment">// ä»…åœ¨å¤§å±å¹•é¢„åŠ è½½</span>
});
</code></pre>
<h3 data-id="heading-11">Case6ï¼šç¬¬ä¸‰æ–¹èµ„æºé¢„åŠ è½½</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">// é¢„åŠ è½½Googleå­—ä½“</span>
<span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">preload</span>(<span class="hljs-string">'https://fonts.gstatic.com/s/inter/v12/...woff2'</span>, {
  <span class="hljs-attr">as</span>: <span class="hljs-string">'font'</span>,
  <span class="hljs-attr">crossOrigin</span>: <span class="hljs-string">'anonymous'</span>,
  <span class="hljs-attr">type</span>: <span class="hljs-string">'font/woff2'</span>
});

<span class="hljs-comment">// é¢„åŠ è½½CDNä¸Šçš„è„šæœ¬</span>
<span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">preload</span>(<span class="hljs-string">'https://cdn.jsdelivr.net/npm/chart.js'</span>, {
  <span class="hljs-attr">as</span>: <span class="hljs-string">'script'</span>,
  <span class="hljs-attr">crossOrigin</span>: <span class="hljs-string">'anonymous'</span>
});
</code></pre>
<h3 data-id="heading-12">Case7ï¼šæ¡ä»¶æ€§é¢„åŠ è½½ç­–ç•¥</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">SmartPreloadComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [shouldPreload, setShouldPreload] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-comment">// ç”¨æˆ·æ¥è¿‘ç‰¹å®šåŒºåŸŸæ—¶è§¦å‘é¢„åŠ è½½</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-variable language_">window</span>.<span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (entries[<span class="hljs-number">0</span>].<span class="hljs-property">isIntersecting</span> &amp;&amp; !shouldPreload) {
        <span class="hljs-title function_">setShouldPreload</span>(<span class="hljs-literal">true</span>);
        
        <span class="hljs-comment">// é¢„åŠ è½½ä¸‹ä¸€å±å†…å®¹</span>
        <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">preload</span>(<span class="hljs-string">'/next-section.css'</span>, { <span class="hljs-attr">as</span>: <span class="hljs-string">'style'</span> });
        <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">preload</span>(<span class="hljs-string">'/interactive-widget.js'</span>, { <span class="hljs-attr">as</span>: <span class="hljs-string">'script'</span> });
      }
    }, { <span class="hljs-attr">threshold</span>: <span class="hljs-number">0.1</span> });
    
    <span class="hljs-keyword">const</span> trigger = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#next-section-trigger'</span>);
    <span class="hljs-keyword">if</span> (trigger) observer.<span class="hljs-title function_">observe</span>(trigger);

    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> observer.<span class="hljs-title function_">disconnect</span>();
  }, [shouldPreload]);
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"next-section-trigger"</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<h3 data-id="heading-13">Case8ï¼šåŸºäºç½‘ç»œæ¡ä»¶çš„æ™ºèƒ½é¢„åŠ è½½</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">AdaptivePreload</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> connection = navigator.<span class="hljs-property">connection</span> || navigator.<span class="hljs-property">mozConnection</span> || navigator.<span class="hljs-property">webkitConnection</span>;
    
    <span class="hljs-keyword">if</span> (connection) {
      <span class="hljs-keyword">switch</span> (connection.<span class="hljs-property">effectiveType</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'4g'</span>:
          <span class="hljs-comment">// é«˜é€Ÿç½‘ç»œï¼šé¢„åŠ è½½æ›´å¤šèµ„æº</span>
          <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">preload</span>(<span class="hljs-string">'/carousel-images.jpg'</span>, { <span class="hljs-attr">as</span>: <span class="hljs-string">'image'</span> });
          <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">preload</span>(<span class="hljs-string">'/video-preview.mp4'</span>, { <span class="hljs-attr">as</span>: <span class="hljs-string">'video'</span> });
          <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">preload</span>(<span class="hljs-string">'/comments-widget.js'</span>, { <span class="hljs-attr">as</span>: <span class="hljs-string">'script'</span> });
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'3g'</span>:
          <span class="hljs-comment">// ä¸­é€Ÿç½‘ç»œï¼šåªé¢„åŠ è½½å…³é”®èµ„æº</span>
          <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">preload</span>(<span class="hljs-string">'/hero-image.jpg'</span>, { <span class="hljs-attr">as</span>: <span class="hljs-string">'image'</span>, <span class="hljs-attr">fetchPriority</span>: <span class="hljs-string">'high'</span> });
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'2g'</span>:
        <span class="hljs-keyword">case</span> <span class="hljs-string">'slow-2g'</span>:
          <span class="hljs-comment">// ä½é€Ÿç½‘ç»œï¼šä¸é¢„åŠ è½½é¢å¤–èµ„æº</span>
          <span class="hljs-keyword">break</span>;
      }
      <span class="hljs-keyword">if</span> (connection.<span class="hljs-property">saveData</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'çœæµé‡æ¨¡å¼å¼€å¯ï¼Œè·³è¿‡éå…³é”®é¢„åŠ è½½'</span>);
      }
    }
  }, []);
  
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>è‡ªé€‚åº”é¢„åŠ è½½ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<h3 data-id="heading-14">Case9ï¼šè·¯ç”±çº§èµ„æºé¢„åŠ è½½</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useNavigate } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-router-dom'</span>;

<span class="hljs-keyword">const</span> routePreloadConfig = {
  <span class="hljs-string">'/dashboard'</span>: [
    { <span class="hljs-attr">href</span>: <span class="hljs-string">'/dashboard-styles.css'</span>, <span class="hljs-attr">as</span>: <span class="hljs-string">'style'</span> },
    { <span class="hljs-attr">href</span>: <span class="hljs-string">'/charts-library.js'</span>, <span class="hljs-attr">as</span>: <span class="hljs-string">'script'</span> }
  ],
  <span class="hljs-string">'/editor'</span>: [
    { <span class="hljs-attr">href</span>: <span class="hljs-string">'/monaco-editor.css'</span>, <span class="hljs-attr">as</span>: <span class="hljs-string">'style'</span> },
    { <span class="hljs-attr">href</span>: <span class="hljs-string">'/monaco-editor.js'</span>, <span class="hljs-attr">as</span>: <span class="hljs-string">'script'</span>, <span class="hljs-attr">fetchPriority</span>: <span class="hljs-string">'high'</span> }
  ]
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">useRoutePreload</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> navigate = <span class="hljs-title function_">useNavigate</span>();
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">preloadAndNavigate</span> = (<span class="hljs-params">path</span>) =&gt; {
    <span class="hljs-comment">// é¢„åŠ è½½ç›®æ ‡è·¯ç”±èµ„æº</span>
    <span class="hljs-keyword">const</span> resources = routePreloadConfig[path] || [];
    resources.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">{ href, ...options }</span>) =&gt;</span> {
      <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">preload</span>(href, options);
    });
    <span class="hljs-comment">// å»¶è¿Ÿå¯¼èˆªï¼Œç¡®ä¿èµ„æºå¼€å§‹åŠ è½½</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">navigate</span>(path), <span class="hljs-number">50</span>);
  };
  
  <span class="hljs-keyword">return</span> preloadAndNavigate;
}
</code></pre>
<h3 data-id="heading-15">Case10ï¼šé”™è¯¯å¤„ç†å’Œå›é€€</h3>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-keyword">import</span> { useState, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">SafePreloadComponent</span>(<span class="hljs-params">{ imageUrl, fallbackUrl }</span>) {
  <span class="hljs-keyword">const</span> [preloadFailed, setPreloadFailed] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// åˆ›å»ºlinkå…ƒç´ è¿›è¡Œé¢„åŠ è½½</span>
    <span class="hljs-keyword">const</span> link = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'link'</span>);
    link.<span class="hljs-property">rel</span> = <span class="hljs-string">'preload'</span>;
    link.<span class="hljs-property">href</span> = imageUrl;
    link.<span class="hljs-property">as</span> = <span class="hljs-string">'image'</span>;
    
    <span class="hljs-comment">// æ·»åŠ é”™è¯¯å¤„ç†</span>
    link.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`é¢„åŠ è½½å¤±è´¥: <span class="hljs-subst">${imageUrl}</span>`</span>);
      <span class="hljs-title function_">setPreloadFailed</span>(<span class="hljs-literal">true</span>);
      <span class="hljs-comment">// å°è¯•é¢„åŠ è½½å›é€€èµ„æº</span>
      <span class="hljs-keyword">if</span> (fallbackUrl) {
        <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">preload</span>(fallbackUrl, { <span class="hljs-attr">as</span>: <span class="hljs-string">'image'</span> });
      }
    });
    
    <span class="hljs-comment">// æ·»åŠ æˆåŠŸå›è°ƒ</span>
    link.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`é¢„åŠ è½½æˆåŠŸ: <span class="hljs-subst">${imageUrl}</span>`</span>);
    });
    
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">appendChild</span>(link);
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">document</span>.<span class="hljs-property">head</span>.<span class="hljs-title function_">removeChild</span>(link);
    };
  }, [imageUrl, fallbackUrl]);
  
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> 
      <span class="hljs-attr">src</span>=<span class="hljs-string">{preloadFailed</span> ? <span class="hljs-attr">fallbackUrl</span> <span class="hljs-attr">:</span> <span class="hljs-attr">imageUrl</span>} 
      <span class="hljs-attr">alt</span>=<span class="hljs-string">"ç¤ºä¾‹å›¾ç‰‡"</span>
      <span class="hljs-attr">onError</span>=<span class="hljs-string">{(e)</span> =&gt;</span> {
        if (fallbackUrl &amp;&amp; e.target.src !== fallbackUrl) {
          e.target.src = fallbackUrl;
        }
      }}
    /&gt;</span>
  );
}
</code></pre>
<h2 data-id="heading-16">ä»€ä¹ˆæ—¶å€™ä½¿ç”¨</h2>
<p>:::tip
åªæœ‰å½“â€œèµ„æºä¸€å®šä¼šåœ¨å½“å‰é¡µé¢ç«‹å³ä½¿ç”¨ï¼Œå¹¶ä¸”å½±å“é¦–å±ä½“éªŒâ€æ—¶ï¼Œæ‰è€ƒè™‘ä½¿ç”¨ ReactDOM.preloadã€‚
:::</p>
<h2 data-id="heading-17">å‚è€ƒ</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzh-hans.react.dev%2Freference%2Freact-dom%2Fpreload" target="_blank" title="https://zh-hans.react.dev/reference/react-dom/preload" ref="nofollow noopener noreferrer">React å®˜ç½‘</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2 æ•°ç»„ é€’å½’ å¤æ‚åº¦ å­—ç¬¦ä¸²]]></title>    <link>https://juejin.cn/post/7584028251167866907</link>    <guid>https://juejin.cn/post/7584028251167866907</guid>    <pubDate>2025-12-16T08:16:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584028251167866907" data-draft-id="7584028251167850523" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2 æ•°ç»„  é€’å½’   å¤æ‚åº¦  å­—ç¬¦ä¸²"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-16T08:16:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç˜¦çš„å¯ä»¥ä¸‹é¥­äº†"/> <meta itemprop="url" content="https://juejin.cn/user/895474817042060"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2 æ•°ç»„  é€’å½’   å¤æ‚åº¦  å­—ç¬¦ä¸²
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/895474817042060/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç˜¦çš„å¯ä»¥ä¸‹é¥­äº†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:16:17.000Z" title="Tue Dec 16 2025 08:16:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1å°æ—¶+
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ•°æ®ç»“æ„å±‚é¢ï¼Œå¤§å®¶éœ€è¦æŒæ¡ä»¥ä¸‹å‡ ç§ï¼š</p>
<ul>
<li>æ•°ç»„</li>
<li>æ ˆ</li>
<li>é˜Ÿåˆ—</li>
<li>é“¾è¡¨</li>
<li>æ ‘ï¼ˆè¿™é‡Œæˆ‘ä»¬ç€é‡è®²äºŒå‰æ ‘ï¼‰</li>
</ul>
<p>å¯¹äºè¿™äº›æ•°æ®ç»“æ„ï¼Œå„ä½å¦‚æœæ²¡æœ‰å¤§é‡çš„å¯æ”¯é…æ—¶é—´å¯ä»¥æŠ•å…¥ï¼Œé‚£ä¹ˆå…¶å®ä¸å»ºè®®æ‰¾åšåšçš„å¤§å­¦æ•™ææ¥åˆ·ã€‚æ­¤æ—¶æ­¤åˆ»ï¼Œæ—¶é—´ä¸ºç‹ï¼Œæˆ‘ä»¬è¿½æ±‚çš„æ˜¯æ•ˆç‡çš„æœ€å¤§åŒ–ã€‚</p>
<p>ä¸åŒçš„æ•°æ®ç»“æ„æ•™æï¼Œå¯¹æ•°æ®ç»“æ„æœ‰ç€ä¸åŒçš„åˆ’åˆ†ã€ä¸åŒçš„è§£è¯»ã€ä¸åŒçš„ç¼–ç å®ç°ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é¢å‘ JavaScriptï¼Œé¢å‘å‰ç«¯é¢è¯•ï¼Œåªé’ˆå¯¹å¤§å®¶åç»­åšé¢˜ã€ç­”é¢˜æ—¶ä¼šç”¨åˆ°çš„æœ€è´´åˆå®æˆ˜çš„æ•°æ®ç»“æ„ç‰¹æ€§&amp;ç¼–ç æŠ€èƒ½ä½œè®²è§£ã€‚</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="LightPink"><mtext>ä¿å§†å¼æ•™å­¦ã®</mtext><mstyle mathcolor="Pink"><mtext>æ¸©æƒ…æç¤ºï¼š</mtext></mstyle></mstyle></mrow><annotation encoding="application/x-tex">\color{LightPink}{ä¿å§†å¼æ•™å­¦ã®}\color{Pink}{æ¸©æƒ…æç¤ºï¼š}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord" style="color:LightPink;"><span class="mord cjk_fallback" style="color:LightPink;">ä¿å§†å¼æ•™å­¦ã®</span></span><span class="mord" style="color:Pink;"><span class="mord cjk_fallback" style="color:Pink;">æ¸©æƒ…æç¤ºï¼š</span></span></span></span></span></span><br/>
è¿™ä¸¤èŠ‚æˆ‘ä»¬æ‰€æåŠçš„åŸºç¡€çŸ¥è¯†ç»†èŠ‚ï¼Œå¾ˆå¯èƒ½ä¼šæˆä¸ºä½ åé¢å†™ä»£ç çš„å…³é”®çº¿ç´¢ã€‚<br/>
<strong>ä¸è¦å› ä¸ºä¹ä¸€çœ‹è§‰å¾—ç®€å•ï¼Œå°±æ€¥ç€è·³è¯»æ€¥ç€åšé¢˜</strong>ã€‚<br/>
ä¸ç„¶ä½ å¾ˆå¯èƒ½åšé¢˜åšåˆ°ä¸€åŠï¼Œä¼šä¸çŸ¥é“è‡ªå·±åˆ°åº•ä¸ºä»€ä¹ˆå°±å¡äº†å£³ã€‚<br/>
åˆ°æ—¶å€™ä¸‡ä¸€åˆå› ä¸ºæ‡’å¾—å›å¤´çœ‹ï¼Œè€ŒåŸåœ°å¡æ­»ï¼Œé‚£å°±æ›´åšä¸ä¸‹å»äº†orzã€‚</p>
<p>æ³¨ï¼šç”±äº JavaScript ä¸­å­—ç¬¦ä¸²å’Œæ•°ç»„å…³è”ç´§å¯†ï¼Œå…³é”®çŸ¥è¯†ç‚¹é‡å¤åº¦è¾ƒé«˜ï¼Œæ•…æˆ‘ä»¬åœ¨æ•°æ®ç»“æ„éƒ¨åˆ†ï¼Œä¸å†å•ç‹¬ä¸ºå­—ç¬¦ä¸²ä¿ç•™ç¯‡å¹…ã€‚å­—ç¬¦ä¸²ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬ç›´æ¥å¸¦åˆ°åç»­çš„è§£é¢˜æŠ€å·§å½’çº³ä¸“é¢˜é‡Œå»çœ‹ã€‚</p>
<h3 data-id="heading-0">æ•°ç»„</h3>
<p>æ•°ç»„æ˜¯å„ä½è¦è®¤è¯†çš„ç¬¬ä¸€ä¸ªæ•°æ®ç»“æ„ã€‚<br/>
ä½œä¸ºæœ€ç®€å•ã€æœ€åŸºç¡€çš„æ•°æ®ç»“æ„ï¼Œå¤§å¤šæ•°çš„è¯­è¨€éƒ½å¤©ç„¶åœ°å¯¹æ•°ç»„æœ‰ç€åŸç”Ÿçš„è¡¨è¾¾ï¼ŒJavaScript äº¦ç„¶ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å¯¹æ•°ç»„åšåˆ°â€œå¼€ç®±å³ç”¨â€ï¼Œè€Œä¸å¿…è‡ªè¡Œæ¨¡æ‹Ÿå®ç°ï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
<p>è€ƒè™‘åˆ°æ—¥å¸¸å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ•°ç»„çš„å‡ºé•œç‡æœ¬èº«å·²ç»å¾ˆé«˜ï¼Œç›¸ä¿¡å®ƒä¹Ÿæ˜¯å¤§å¤šæ•°åŒå­¦æœ€ç†Ÿæ‚‰çš„æ•°æ®ç»“æ„ã€‚ å³ä¾¿å¦‚æ­¤ï¼Œè¿™é‡Œä»ç„¶éœ€è¦æé†’å„ä½ï¼š<strong>è¦å¯¹æ•°ç»„æ ¼å¤–èµ°ç‚¹å¿ƒï¼Œæ¯•ç«Ÿåé¢éœ€è¦å®ƒå¸®å¿™çš„åœ°æ–¹ä¼šéå¸¸å¤š</strong>ã€‚</p>
<h4 data-id="heading-1">æ•°ç»„çš„åˆ›å»º</h4>
<p>å¤§å®¶å¹³æ—¶ç”¨çš„æœ€å¤šçš„åˆ›å»ºæ–¹å¼æƒ³å¿…å°±æ˜¯ç›´æ¥æ–¹æ‹¬å·+å…ƒç´ å†…å®¹è¿™ç§å½¢å¼ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]   
</code></pre>
<p>ä¸è¿‡åœ¨ç®—æ³•é¢˜ä¸­ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬åˆå§‹åŒ–ä¸€ä¸ªæ•°ç»„æ—¶ï¼Œå¹¶ä¸çŸ¥é“å®ƒå†…éƒ¨å…ƒç´ çš„æƒ…å†µã€‚è¿™ç§åœºæ™¯ä¸‹ï¼Œè¦ç»™å¤§å®¶æ¨èçš„æ˜¯æ„é€ å‡½æ•°åˆ›å»ºæ•°ç»„çš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>()
</code></pre>
<p>å½“æˆ‘ä»¬ä»¥æ„é€ å‡½æ•°çš„å½¢å¼åˆ›å»ºæ•°ç»„æ—¶ï¼Œè‹¥æˆ‘ä»¬åƒæ¥¼ä¸Šè¿™æ ·ï¼Œä¸ä¼ ä»»ä½•å‚æ•°ï¼Œå¾—åˆ°çš„å°±ä¼šæ˜¯ä¸€ä¸ªç©ºæ•°ç»„ã€‚ç­‰ä»·äºï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = []
</code></pre>
<p>ä¸è¿‡å’±ä»¬ä½¿ç”¨æ„é€ å‡½æ•°ï¼Œå¯ä¸æ˜¯ä¸ºäº†åˆ›å»ºç©ºæ•°ç»„è¿™ä¹ˆæ— èŠã€‚<br/>
æˆ‘ä»¬éœ€è¦å®ƒçš„æ—¶å€™ï¼Œå¾€å¾€æ˜¯å› ä¸ºæˆ‘ä»¬æœ‰â€œåˆ›é€ æŒ‡å®šé•¿åº¦çš„ç©ºæ•°ç»„â€è¿™æ ·çš„éœ€æ±‚ã€‚éœ€è¦å¤šé•¿çš„æ•°ç»„ï¼Œå°±ç»™å®ƒä¼ å¤šå¤§çš„å‚æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">7</span>)
</code></pre>
<p>è¿™æ ·çš„å†™æ³•å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªé•¿åº¦ä¸º7çš„æ•°ç»„ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/8/170b97e7423bafba~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=832&amp;h=270&amp;s=31854&amp;e=png" alt="" loading="lazy"/></p>
<p>åœ¨ä¸€äº›åœºæ™¯ä¸­ï¼Œè¿™ä¸ªéœ€æ±‚ä¼šç¨å¾®å˜å¾—æœ‰ç‚¹å¤æ‚â€”â€”
â€œåˆ›å»ºä¸€ä¸ªé•¿åº¦ç¡®å®šã€åŒæ—¶æ¯ä¸€ä¸ªå…ƒç´ çš„å€¼ä¹Ÿéƒ½ç¡®å®šçš„æ•°ç»„â€ã€‚è¿™æ—¶æˆ‘ä»¬å¯ä»¥è°ƒç”¨ fill æ–¹æ³•ï¼Œå‡è®¾éœ€æ±‚æ˜¯æ¯ä¸ªå‘é‡Œéƒ½å¡«ä¸Šä¸€ä¸ª1ï¼Œåªéœ€ç»™å®ƒ fill ä¸€ä¸ª1ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">7</span>)).<span class="hljs-title function_">fill</span>(<span class="hljs-number">1</span>)
</code></pre>
<p>å¦‚æ­¤ä¾¿å¯ä»¥å¾—åˆ°ä¸€ä¸ªé•¿åº¦ä¸º7ï¼Œä¸”æ¯ä¸ªå…ƒç´ éƒ½åˆå§‹åŒ–ä¸º1çš„æ•°ç»„ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/8/170b9821b9fce58b~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=846&amp;h=150&amp;s=14874&amp;e=png&amp;b=fefefe" alt="" loading="lazy"/></p>
<h5 data-id="heading-2">æ•°ç»„çš„è®¿é—®å’Œéå†</h5>
<p>è®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨ä¸­æ‹¬å·ä¸­æŒ‡å®šå…¶ç´¢å¼•å³å¯ï¼š</p>
<pre><code class="hljs language-js" lang="js">arr[<span class="hljs-number">0</span>] <span class="hljs-comment">// è®¿é—®ç´¢å¼•ä¸‹æ ‡ä¸º0çš„å…ƒç´ </span>
</code></pre>
<p>è€Œéå†æ•°ç»„ï¼Œè¿™ä¸ªæ–¹æ³•å°±å¤šäº†ï¼Œä¸è¿‡ç›®çš„å¾€å¾€éƒ½æ˜¯ä¸€è‡´çš„â€”â€”è®¿é—®åˆ°æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”çŸ¥é“å½“å‰å…ƒç´ çš„ç´¢å¼•ã€‚è¿™é‡Œæˆ‘ä»¬è®²ä¸‰ä¸ªæ–¹æ³•ï¼š</p>
<ol>
<li><strong>for å¾ªç¯</strong><br/>
è¿™ä¸ªæ˜¯æœ€æœ€åŸºç¡€çš„æ“ä½œã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å¾ªç¯æ•°ç»„çš„ä¸‹æ ‡ï¼Œæ¥ä¾æ¬¡è®¿é—®æ¯ä¸ªå€¼ï¼š</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è·å–æ•°ç»„çš„é•¿åº¦</span>
<span class="hljs-keyword">const</span> len = arr.<span class="hljs-property">length</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;len;i++) {
    <span class="hljs-comment">// è¾“å‡ºæ•°ç»„çš„å…ƒç´ å€¼ï¼Œè¾“å‡ºå½“å‰ç´¢å¼•</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr[i], i)
}
</code></pre>
<ol start="2">
<li><strong>forEach æ–¹æ³•</strong><br/>
é€šè¿‡å– forEach æ–¹æ³•ä¸­ä¼ å…¥å‡½æ•°çš„ç¬¬ä¸€ä¸ªå…¥å‚å’Œç¬¬äºŒä¸ªå…¥å‚ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å–åˆ°æ•°ç»„æ¯ä¸ªå…ƒç´ çš„å€¼åŠå…¶å¯¹åº”ç´¢å¼•ï¼š</li>
</ol>
<pre><code class="hljs language-js" lang="js">arr.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>)=&gt;</span> {
    <span class="hljs-comment">// è¾“å‡ºæ•°ç»„çš„å…ƒç´ å€¼ï¼Œè¾“å‡ºå½“å‰ç´¢å¼•</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item, index)
})
</code></pre>
<ol start="3">
<li><strong>map æ–¹æ³•</strong><br/>
map æ–¹æ³•åœ¨è°ƒç”¨å½¢å¼ä¸Šä¸ forEach æ— å¼‚ï¼ŒåŒºåˆ«åœ¨äº map æ–¹æ³•ä¼šæ ¹æ®ä½ ä¼ å…¥çš„å‡½æ•°é€»è¾‘å¯¹æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ã€è¿›è€Œè¿”å›ä¸€ä¸ªå…¨æ–°çš„æ•°ç»„ã€‚<br/>
æ‰€ä»¥å…¶å® map åšçš„äº‹æƒ…ä¸ä»…ä»…æ˜¯éå†ï¼Œè€Œæ˜¯åœ¨éå†çš„åŸºç¡€ä¸Šâ€œå†åŠ å·¥â€ã€‚å½“æˆ‘ä»¬éœ€è¦å¯¹æ•°ç»„å†…å®¹åšæ‰¹é‡ä¿®æ”¹ã€åŒæ—¶ä¿®æ”¹çš„é€»è¾‘åˆé«˜åº¦ä¸€è‡´æ—¶ï¼Œå°±å¯ä»¥è°ƒç”¨ map æ¥è¾¾åˆ°æˆ‘ä»¬çš„ç›®çš„ï¼š</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> newArr = arr.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item, index</span>)=&gt;</span> {
    <span class="hljs-comment">// è¾“å‡ºæ•°ç»„çš„å…ƒç´ å€¼ï¼Œè¾“å‡ºå½“å‰ç´¢å¼•</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(item, index)
    <span class="hljs-comment">// åœ¨å½“å‰å…ƒç´ å€¼çš„åŸºç¡€ä¸ŠåŠ 1</span>
    <span class="hljs-keyword">return</span> item+<span class="hljs-number">1</span>
})
</code></pre>
<p>è¿™æ®µä»£ç å°±é€šè¿‡ map æ¥è¿”å›äº†ä¸€ä¸ªå…¨æ–°çš„æ•°ç»„ï¼Œæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„å€¼éƒ½æ˜¯åœ¨å…¶ç°æœ‰å…ƒç´ å€¼çš„åŸºç¡€ä¸Š+1åçš„ç»“æœã€‚</p>
<p>è¿™é‡Œç»™ä¸ªå°å»ºè®®ï¼šä¸ªäººæ¨èå¦‚æœæ²¡æœ‰ç‰¹æ®Šçš„éœ€è¦ï¼Œé‚£ä¹ˆç»Ÿä¸€ä½¿ç”¨ for å¾ªç¯æ¥å®ç°éå†ã€‚å› ä¸º<strong>ä»æ€§èƒ½ä¸Šçœ‹ï¼Œfor å¾ªç¯éå†èµ·æ¥æ˜¯æœ€å¿«çš„</strong>ã€‚</p>
<h4 data-id="heading-3">äºŒç»´æ•°ç»„</h4>
<p>åˆå­¦ç¼–ç¨‹çš„åŒå­¦åŸºç¡€å¦‚æœæ¯”è¾ƒè–„å¼±ï¼Œä¼šå¯¹äºŒç»´æ•°ç»„å®Œå…¨æ²¡æœ‰æ¦‚å¿µã€‚è¿™é‡Œå’±ä»¬å…ˆç®€å•ä»‹ç»ä¸‹ï¼šäºŒç»´æ•°ç»„å…¶å®å°±æ˜¯æ•°ç»„å¥—æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ªå…ƒç´ éƒ½æ˜¯æ•°ç»„çš„æ•°ç»„ã€‚<br/>
è¯´èµ·æ¥æœ‰ç‚¹ç»•å£ï¼Œå’±ä»¬ç›´æ¥ä¸Šå›¾æ¥çœ‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]
</code></pre>
<p>è¿™ä¸ªæ•°ç»„åœ¨é€»è¾‘ä¸Šçš„åˆ†å¸ƒå°±æ˜¯è¿™æ ·å¼å„¿çš„ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/8/170b9a59c3bc0944~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=882&amp;h=266&amp;s=15240&amp;e=png" alt="" loading="lazy"/></p>
<p>åƒå›¾ä¸Šè¿™æ ·ï¼Œæ•°ç»„çš„å…ƒç´ æ˜¯æ•°å­—è€Œéæ•°ç»„ã€‚æ•´ä¸ªæ•°ç»„çš„ç»“æ„çœ‹ä¸Šå»å®›å¦‚ä¸€æ¡â€œçº¿â€ï¼Œè¿™å°±æ˜¯ä¸€ç»´æ•°ç»„ã€‚<br/>
è€Œâ€œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯æ•°ç»„çš„æ•°ç»„â€ï¼Œä»£ç é‡Œçœ‹æ˜¯è¿™æ ·ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [
  [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>],
  [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>],
  [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>],
  [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>],
  [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>]
]
</code></pre>
<p>ç›´æ¥æŠŠå®ƒçš„é€»è¾‘ç»“æ„ç”»å‡ºæ¥çœ‹ï¼Œæ˜¯è¿™æ ·ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/8/170b9bedc6a882c1~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=850&amp;h=788&amp;s=38505&amp;e=png&amp;b=1ca2fc" alt="" loading="lazy"/><br/>
å›¾ä¸­çš„æ¯ä¸€è¡Œï¼Œå°±ä»£è¡¨ç€ä¸€ä¸ªæ•°ç»„å…ƒç´ ã€‚æ¯”å¦‚ç¬¬ 0 è¡Œï¼Œå°±ä»£è¡¨ç€æ•°ç»„ä¸­ arr[0] è¿™ä¸ªæ•°ç»„å…ƒç´ ï¼Œå…¶å†…å®¹æ˜¯ [1,2,3,4,5]ã€‚<br/>
æ¯ä¸€è¡Œä¸­çš„æ¯ä¸€åˆ—ï¼Œåˆ™ä»£è¡¨ä¸€ä¸ªç¡®åˆ‡çš„â€œå‘â€ã€‚æ¯”å¦‚ç¬¬ 0 è¡Œç¬¬ 1 åˆ—ï¼Œå°±ä»£è¡¨ç€æ•°ç»„ä¸­ arr[0][1] è¿™ä¸ªå…ƒç´ ï¼Œå…¶å€¼ä¸º2ï¼Œæ˜¯ä¸€ä¸ªç¡®åˆ‡çš„ numberã€‚</p>
<p>æ˜ç™½äº†äºŒç»´æ•°ç»„çš„ç´¢å¼•è§„å¾‹ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹äºŒç»´æ•°ç»„çš„ç‰¹ç‚¹ï¼šä»å½¢çŠ¶ä¸Šçœ‹ï¼Œç›¸å¯¹äºä¸€ç»´æ•°ç»„ä¸€æ¡â€œçº¿â€ä¸€èˆ¬çš„å¸ƒå±€ï¼ŒäºŒç»´æ•°ç»„æ›´åƒæ˜¯ä¸€ä¸ªâ€œé¢â€ã€‚æ‹¿å’±ä»¬è¿™ä¸ªä¾‹å­æ¥è¯´ï¼Œè¿™é‡Œçš„äºŒç»´æ•°ç»„é€»è¾‘åˆ†å¸ƒå›¾å°±å®›å¦‚ä¸€ä¸ªæ­£æ–¹å½¢ã€‚å½“ç„¶å•¦ï¼Œå¦‚æœæˆ‘ä»¬ç¨å¾®å»¶é•¿ä¸€ä¸‹å…¶ä¸­çš„ä¸€è¾¹ï¼Œå®ƒä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªçŸ©å½¢ã€‚</p>
<p>åœ¨æ•°å­¦ä¸­ï¼Œå½¢å¦‚è¿™æ ·<strong>é•¿æ–¹é˜µåˆ—æ’åˆ—çš„å¤æ•°æˆ–å®æ•°é›†åˆ</strong>ï¼Œè¢«ç§°ä¸ºâ€œçŸ©é˜µâ€ã€‚å› æ­¤<strong>äºŒç»´æ•°ç»„çš„åˆ«åå°±å«â€œçŸ©é˜µâ€</strong>ã€‚</p>
<p>è®²åˆ°è¿™é‡Œï¼Œå¦‚æœæœ‰å¯¹â€œçŸ©é˜µâ€çš„å®šä¹‰ä¸€è„¸æ‡µé€¼çš„åŒå­¦ï¼Œä¹Ÿä¸ç”¨æ€•â€”â€”ä¸çŸ¥é“â€œçŸ©é˜µâ€æ˜¯å•¥ï¼Œä¸€ç‚¹ä¸æ‰“ç´§ï¼ˆæ‰€ä»¥å¿«åœä¸‹ä½ å¤åˆ¶ç²˜è´´åˆ° Google çš„æ‰‹å“ˆå“ˆï¼‰ï¼Œä½†ä½ å¿…é¡»è¦<strong>è®°ä½â€œçŸ©é˜µâ€å’Œâ€œäºŒç»´æ•°ç»„â€ä¹‹é—´çš„ç­‰ä»·å…³ç³»</strong>ã€‚åœ¨ç®—æ³•é¢˜ç›®ä¸­ï¼Œè§åˆ°â€œçŸ©é˜µâ€æ—¶ï¼Œèƒ½å¤Ÿç«‹åˆ»åå°„å‡ºå®ƒè¯´çš„æ˜¯äºŒç»´æ•°ç»„ï¼Œä¸è¢«åˆ«åæ•´æ‡µé€¼ï¼Œè¿™å°±å¤Ÿäº†ã€‚</p>
<h4 data-id="heading-4">äºŒç»´æ•°ç»„çš„åˆå§‹åŒ–</h4>
<h5 data-id="heading-5">fill çš„å±€é™æ€§</h5>
<p>æœ‰åŒå­¦ç”¨ fill æ–¹æ³•ç”¨é¡ºäº†æ‰‹ï¼Œå°±æœ¬èƒ½åœ°æƒ³ç”¨ fill è§£å†³æ‰€æœ‰çš„é—®é¢˜ï¼Œæ¯”å¦‚åˆå§‹åŒ–ä¸€ä¸ªäºŒç»´æ•°ç»„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr =(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">7</span>)).<span class="hljs-title function_">fill</span>([])
</code></pre>
<p>ä¹ä¸€çœ‹æ²¡å•¥æ¯›ç—…ï¼Œ7ä¸ªå‘éƒ½è¢«ä¹–ä¹–åœ°å¡«ä¸Šäº†æ•°ç»„å…ƒç´ ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/8/170b9cf7d9677680~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1246&amp;h=752&amp;s=77964&amp;e=png" alt="" loading="lazy"/><br/>
ä½†æ˜¯å½“ä½ æƒ³ä¿®æ”¹æŸä¸€ä¸ªå‘é‡Œçš„æ•°ç»„çš„å€¼çš„æ—¶å€™ï¼š</p>
<pre><code class="hljs language-js" lang="js">arr[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>
</code></pre>
<p>ä½ ä¼šå‘ç°ä¸€æ•´åˆ—çš„å…ƒç´ éƒ½è¢«è®¾ä¸ºäº† 1ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/8/170b9d27489b1815~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1300&amp;h=758&amp;s=79078&amp;e=png" alt="" loading="lazy"/></p>
<p>è¿™æ˜¯ä»€ä¹ˆéªšæ“ä½œï¼Ÿï¼Ÿï¼Ÿ<br/>
è¿™å°±è¦ä» fill çš„å·¥ä½œæœºåˆ¶è®²èµ·äº†ã€‚å„ä½è¦æ¸…æ¥šï¼Œå½“ä½ ç»™ fill ä¼ é€’ä¸€ä¸ªå…¥å‚æ—¶ï¼Œ<strong>å¦‚æœè¿™ä¸ªå…¥å‚çš„ç±»å‹æ˜¯å¼•ç”¨ç±»å‹ï¼Œé‚£ä¹ˆ fill åœ¨å¡«å……å‘ä½æ—¶å¡«å……çš„å…¶å®å°±æ˜¯å…¥å‚çš„å¼•ç”¨</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸‹å›¾ä¸­è™½ç„¶çœ‹ä¼¼æˆ‘ä»¬ç»™7ä¸ªå‘ä½å„åˆå§‹åŒ–äº†ä¸€ä¸ªæ•°ç»„ï¼š<br/>
<img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/8/170b9cf7d9677680~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1246&amp;h=752&amp;s=77964&amp;e=png" alt="" loading="lazy"/><br/>
å…¶å®è¿™7ä¸ªæ•°ç»„å¯¹åº”äº†åŒä¸€ä¸ªå¼•ç”¨ã€æŒ‡å‘çš„æ˜¯åŒä¸€å—å†…å­˜ç©ºé—´ï¼Œ<strong>å®ƒä»¬æœ¬è´¨ä¸Šæ˜¯åŒä¸€ä¸ªæ•°ç»„</strong>ã€‚å› æ­¤å½“ä½ ä¿®æ”¹ç¬¬0è¡Œç¬¬0ä¸ªå…ƒç´ çš„å€¼æ—¶ï¼Œç¬¬1-6è¡Œçš„ç¬¬0ä¸ªå…ƒç´ çš„å€¼ä¹Ÿéƒ½ä¼šè·Ÿç€å‘ç”Ÿæ”¹å˜ã€‚</p>
<h5 data-id="heading-6">åˆå§‹åŒ–ä¸€ä¸ªäºŒç»´æ•°ç»„</h5>
<p>æœ¬ç€å®‰å…¨çš„åŸåˆ™ï¼Œè¿™é‡Œæˆ‘æ¨èå¤§å®¶é‡‡çº³çš„äºŒç»´æ•°ç»„åˆå§‹åŒ–æ–¹æ³•éå¸¸ç®€å•ï¼ˆè€Œä¸”æ€§èƒ½ä¹Ÿä¸é”™ï¼‰ã€‚ç›´æ¥ç”¨ä¸€ä¸ª for å¾ªç¯æ¥è§£å†³ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> len = arr.<span class="hljs-property">length</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;len;i++) {
    <span class="hljs-comment">// å°†æ•°ç»„çš„æ¯ä¸€ä¸ªå‘ä½åˆå§‹åŒ–ä¸ºæ•°ç»„</span>
    arr[i] = []
}
</code></pre>
<p>for å¾ªç¯ä¸­ï¼Œæ¯ä¸€æ¬¡è¿­ä»£æˆ‘ä»¬éƒ½é€šè¿‡â€œ[]â€æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œè¿™æ ·ä¾¿ä¸ä¼šæœ‰å¼•ç”¨æŒ‡å‘é—®é¢˜å¸¦æ¥çš„å°´å°¬ã€‚</p>
<h5 data-id="heading-7">äºŒç»´æ•°ç»„çš„è®¿é—®</h5>
<p>è®¿é—®äºŒç»´æ•°ç»„å’Œè®¿é—®ä¸€ç»´æ•°ç»„å·®åˆ«ä¸å¤§ï¼ŒåŒºåˆ«åœ¨äºæˆ‘ä»¬ç°åœ¨éœ€è¦çš„æ˜¯ä¸¤å±‚å¾ªç¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç¼“å­˜å¤–éƒ¨æ•°ç»„çš„é•¿åº¦</span>
<span class="hljs-keyword">const</span> outerLen = arr.<span class="hljs-property">length</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;outerLen;i++) {
    <span class="hljs-comment">// ç¼“å­˜å†…éƒ¨æ•°ç»„çš„é•¿åº¦</span>
    <span class="hljs-keyword">const</span> innerLen = arr[i].<span class="hljs-property">length</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> j=<span class="hljs-number">0</span>;j&lt;innerLen;j++) {
        <span class="hljs-comment">// è¾“å‡ºæ•°ç»„çš„å€¼ï¼Œè¾“å‡ºæ•°ç»„çš„ç´¢å¼•</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr[i][j],i,j)
    }
}
</code></pre>
<p>ä¸€ç»´æ•°ç»„ç”¨ for å¾ªç¯éå†åªéœ€ä¸€å±‚å¾ªç¯ï¼ŒäºŒç»´æ•°ç»„æ˜¯ä¸¤å±‚ï¼Œä¸‰ç»´æ•°ç»„å°±æ˜¯ä¸‰å±‚ã€‚ä¾æ¬¡ç±»æ¨ï¼Œ<strong>N ç»´æ•°ç»„éœ€è¦ N å±‚å¾ªç¯æ¥å®Œæˆéå†</strong>ã€‚</p>
<h3 data-id="heading-8">æ•°ç»„å°ç»“</h3>
<p>å…³äºæ•°ç»„çš„åŸºç¡€çŸ¥è¯†ï¼Œå’±ä»¬æ•´æ•´ç”¨æ‰äº†ä¸€èŠ‚çš„ç¯‡å¹…æ¥ä»‹ç»ï¼Œå¯è§å…¶é‡è¦æ€§ã€‚</p>
<p>åœ¨æœ¬èŠ‚ï¼Œæˆ‘ä»¬ä»…ä»…å›´ç»•æ•°ç»„æœ€åŸºæœ¬çš„æ“ä½œè¿›è¡Œä»‹ç»ï¼Œè¿™è¿œä¸æ˜¯æ•°ç»„çš„å…¨éƒ¨ã€‚å…³äºæ•°ç»„ï¼Œè¿˜æœ‰å¤ªå¤šå¤ªå¤šçš„æ•…äº‹è¦è®²â€”â€”å®é™…ä¸Šï¼Œå•å°±å…¶é‡è¦çš„æ–¹æ³•çš„ä½¿ç”¨ï¼šå¦‚concatã€someã€sliceã€joinã€sortã€popã€push ç­‰ç­‰è¿™äº›ï¼Œå°±è¶³ä»¥è¯´ä¸Šä¸ªæŠŠé’Ÿå¤´ã€‚</p>
<p>æœ¬èŠ‚æš‚æ—¶ä¸å¯¹æ•°ç»„ API ä½œé›†ä¸­è®²è§£ï¼Œå› ä¸ºç½—åˆ— API æ²¡æœ‰æ„ä¹‰â€”â€”è„±ç¦»åœºæ™¯å»è®°å¿† API å®åœ¨æ˜¯ä¸€ä»¶å¤ªç—›è‹¦çš„äº‹æƒ…ï¼Œè¿™ä¼šæŒ«ä¼¤å„ä½ç»§ç»­èµ°ä¸‹å»çš„ç§¯ææ€§ã€‚</p>
<p>å…³äºæ•°ç»„çš„æ›´å¤šç‰¹æ€§å’ŒæŠ€å·§ï¼Œä¼šè¢«æ‰“æ•£åˆ°åç»­çš„ç« èŠ‚ä¸­å»ã€‚å„ä½åœ¨çœŸé¢˜è§£è¯»çš„ç¯èŠ‚ã€åŒ…æ‹¬åœ¨å…¶å®ƒæ•°æ®ç»“æ„çš„è®²è§£ä¸­ï¼Œéƒ½ä¼šä¸å¯é¿å…åœ°å†è§åˆ°æ•°ç»„çš„èº«å½±ã€‚å½¼æ—¶æ•°ç»„çš„æ¯ä¸€ä¸ªæ–¹æ³•éƒ½ä¼šå’Œå®ƒå¯¹åº”çš„åº”ç”¨åœºæ™¯ä¸€èµ·å‡ºç°ï¼Œç›¸ä¿¡ä½ ä¼šæœ‰æ›´æ·±åˆ»çš„è®°å¿†ã€‚</p>
<p>äº‹å®ä¸Šï¼Œåœ¨ JavaScript æ•°æ®ç»“æ„ä¸­ï¼Œæ•°ç»„å‡ ä¹æ˜¯â€œåŸºçŸ³â€ä¸€èˆ¬çš„å­˜åœ¨ã€‚è¿™ä¸€ç‚¹ï¼Œå¤§å®¶åœ¨ä¸‹ä¸€èŠ‚å°±ä¼šæœ‰æ‰€æ„Ÿè§¦ã€‚</p>
<p>ï¼ˆé˜…è¯»è¿‡ç¨‹ä¸­æœ‰ä»»ä½•æƒ³æ³•æˆ–ç–‘é—®ï¼Œæˆ–è€…å•çº¯å¸Œæœ›å’Œç¬”è€…äº¤ä¸ªæœ‹å‹å•¥çš„ï¼Œæ¬¢è¿å¤§å®¶æ·»åŠ æˆ‘çš„å¾®ä¿¡xyalinodeä¸æˆ‘äº¤æµå“ˆ~ï¼‰</p>
<p>æœ¬èŠ‚æˆ‘ä»¬åŸºäºå¯¹æ•°ç»„çš„ç†è§£å’ŒæŒæ¡ï¼Œå›´å‰¿çº¿æ€§æ•°æ®ç»“æ„ï¼ˆæ ˆã€é˜Ÿåˆ—å’Œé“¾è¡¨ï¼‰ã€‚</p>
<h3 data-id="heading-9">æ ˆå’Œé˜Ÿåˆ—</h3>
<p>åœ¨ JavaScript ä¸­ï¼Œ<strong>æ ˆå’Œé˜Ÿåˆ—çš„å®ç°ä¸€èˆ¬éƒ½è¦ä¾èµ–äºæ•°ç»„</strong>ï¼Œå¤§å®¶å®Œå…¨å¯ä»¥æŠŠæ ˆå’Œé˜Ÿåˆ—éƒ½çœ‹ä½œæ˜¯â€œç‰¹åˆ«çš„æ•°ç»„â€ã€‚</p>
<p>ï¼ˆæ³¨ï¼šå®é™…ä¸Šï¼Œæ ˆå’Œé˜Ÿåˆ—ä½œä¸ºä¸¤ç§è¿ç®—å—é™çš„<strong>çº¿æ€§è¡¨</strong>ï¼Œç”¨é“¾è¡¨æ¥å®ç°ä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚åªæ˜¯ä»å‰ç«¯é¢è¯•åšé¢˜çš„è§’åº¦æ¥è¯´ï¼ŒåŸºäºé“¾è¡¨æ¥å®ç°æ ˆå’Œé˜Ÿåˆ—çº¦ç­‰äºè„±è£¤å­æ”¾å±ï¼ˆé“¾è¡¨å®ç°èµ·æ¥ä¼šæ¯”æ•°ç»„éº»çƒ¦å¾—å¤šï¼Œåšä¸åˆ°å¼€ç®±å³ç”¨ï¼‰ï¼ŒåŸºæœ¬æ²¡äººä¼šè¿™ä¹ˆå¹²ã€‚è¿™é‡Œå¤§å®¶æŒ‰ç…§æ•°ç»„çš„æ€è·¯å¾€ä¸‹èµ°å°±è¡Œäº†ï¼‰</p>
<p>ä¸¤è€…çš„åŒºåˆ«åœ¨äºï¼Œå®ƒä»¬å„è‡ªå¯¹æ•°ç»„çš„<strong>å¢åˆ æ“ä½œ</strong>æœ‰ç€ä¸ä¸€æ ·çš„é™åˆ¶ã€‚å› æ­¤ï¼Œåœ¨å­¦ä¹ æ ˆä¸é˜Ÿåˆ—ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ¥æ˜ç¡®ä¸€ä¸‹æ•°ç»„ä¸­çš„å¢åˆ æ“ä½œå…·æœ‰ä»€ä¹ˆæ ·çš„ç‰¹æ€§ã€å¯¹åº”çš„æ–¹æ³•æœ‰å“ªäº›ï¼š</p>
<h4 data-id="heading-10">çµæ´»å¢åˆ çš„æ•°ç»„</h4>
<p>æ•°ç»„çš„å¢åˆ æ“ä½œå¯ä»¥è¯´æ˜¯æ²¡æœ‰ä»»ä½•é™åˆ¶çš„ï¼Œå…è®¸æˆ‘ä»¬åœ¨ä»»ä½•ä½ç½®æ‰§è¡Œæƒ³è¦çš„æ“ä½œã€‚</p>
<h5 data-id="heading-11">æ•°ç»„ä¸­å¢åŠ å…ƒç´ çš„ä¸‰ç§æ–¹æ³•</h5>
<ul>
<li>unshift æ–¹æ³•-æ·»åŠ å…ƒç´ åˆ°æ•°ç»„çš„å¤´éƒ¨</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]
arr.<span class="hljs-title function_">unshift</span>(<span class="hljs-number">0</span>) <span class="hljs-comment">// [0,1,2]</span>
</code></pre>
<ul>
<li>push æ–¹æ³•-æ·»åŠ å…ƒç´ åˆ°æ•°ç»„çš„å°¾éƒ¨</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]
arr.<span class="hljs-title function_">push</span>(<span class="hljs-number">3</span>) <span class="hljs-comment">// [1,2,3]</span>
</code></pre>
<ul>
<li>splice æ–¹æ³•-æ·»åŠ å…ƒç´ åˆ°æ•°ç»„çš„ä»»ä½•ä½ç½®</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>] 
arr.<span class="hljs-title function_">splice</span>(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>) <span class="hljs-comment">// [1,3,2]</span>
</code></pre>
<p>è¿™é‡Œé‡ç‚¹è®²ä¸€ä¸‹è¿™ä¸ª splice æ–¹æ³•ã€‚å¾ˆå¤šåŒå­¦å¯¹ä¼ å…¥ä¸¤ä¸ªä»¥ä¸Šçš„å‚æ•°è¿™ç§ç”¨æ³•å¯èƒ½æ¯”è¾ƒé™Œç”Ÿã€‚å¤§å®¶ç›¸å¯¹ç†Ÿæ‚‰çš„åº”è¯¥è¿˜æ˜¯ splice ç”¨äºåˆ é™¤çš„æ“ä½œï¼š</p>
<pre><code class="hljs language-js" lang="js">arr.<span class="hljs-title function_">splice</span>(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>)
</code></pre>
<p>ç¬¬ä¸€ä¸ªå…¥å‚æ˜¯èµ·å§‹çš„ç´¢å¼•å€¼ï¼Œç¬¬äºŒä¸ªå…¥å‚è¡¨ç¤ºä»èµ·å§‹ç´¢å¼•å¼€å§‹éœ€è¦åˆ é™¤çš„å…ƒç´ ä¸ªæ•°ã€‚è¿™é‡Œæˆ‘ä»¬æŒ‡æ˜ä»ç´¢å¼•ä¸º1çš„å…ƒç´ å¼€å§‹ï¼Œåˆ æ‰1ä¸ªå…ƒç´ ï¼Œä¹Ÿå°±ç›¸å½“äºæŠŠ arr[1] ç»™åˆ æ‰äº†ã€‚è¿™å°±æ˜¯æ•°ç»„ä¸­<strong>åˆ é™¤ä»»æ„ä½ç½®å…ƒç´ çš„æ–¹æ³•</strong>ã€‚<br/>
è‡³äºä¼ å…¥ä¸¤ä¸ªä»¥ä¸Šå‚æ•°è¿™ç§ç”¨æ³•ï¼Œæ˜¯ç”¨äºåœ¨åˆ é™¤çš„åŒæ—¶å®Œæˆæ•°ç»„å…ƒç´ çš„æ–°å¢ã€‚è€Œä»ç¬¬ä¸‰ä¸ªä½ç½®å¼€å§‹çš„å…¥å‚ï¼Œéƒ½ä»£è¡¨ç€éœ€è¦æ·»åŠ åˆ°æ•°ç»„é‡Œçš„å…ƒç´ çš„å€¼ï¼š</p>
<pre><code class="hljs language-js" lang="js">arr.<span class="hljs-title function_">splice</span>(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">3</span>) <span class="hljs-comment">// [1,3,2]</span>
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬å°±æŒ‡æ˜äº†ä» arr[1] å¼€å§‹ï¼Œåˆ æ‰ 0 ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”åœ¨ç´¢å¼•ä¸º1çš„åœ°æ–¹æ–°å¢äº†å€¼ä¸º3çš„å…ƒç´ ã€‚<br/>
å› ä¸ºåˆ æ‰çš„å…ƒç´ æ˜¯0ä¸ªï¼Œæ‰€ä»¥è¯´ arr[1] ä¸­åŸæœ‰çš„å…ƒç´ å€¼â€œ2â€ä»ç„¶ä¼šè¢«ä¿ç•™ä¸‹æ¥ï¼›åŒæ—¶å› ä¸ºæˆ‘ä»¬åé¢åˆæŒ‡å®šäº† arr[1] å¤„éœ€è¦æ–°å¢ä¸€ä¸ªå…ƒç´ 3ï¼Œé‚£ä¹ˆè¿™ä¸ª3å°±ä¼šæŠŠåŸæ¥arr[1]è¿™ä¸ªåœ°æ–¹çš„å…ƒç´ ç»™â€œæŒ¤åˆ°åé¢å»â€ã€‚è¿™æ ·æˆ‘ä»¬å°±åšåˆ°äº†åœ¨æ•°ç»„ä¸­ä»»æ„ä½ç½®è¿›è¡Œå…ƒç´ çš„æ–°å¢ã€‚è¿™ä¸ªè¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8bb23bc7244f4f93bd2f85a3c65016e8~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=760&amp;h=632&amp;s=23173&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<h5 data-id="heading-12">æ•°ç»„ä¸­åˆ é™¤å…ƒç´ çš„ä¸‰ç§æ–¹æ³•</h5>
<ul>
<li>shift æ–¹æ³•-åˆ é™¤æ•°ç»„å¤´éƒ¨çš„å…ƒç´ </li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]
arr.<span class="hljs-title function_">shift</span>() <span class="hljs-comment">// [2,3]</span>
</code></pre>
<ul>
<li>pop æ–¹æ³•-åˆ é™¤æ•°ç»„å°¾éƒ¨çš„å…ƒç´ </li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]
arr.<span class="hljs-title function_">pop</span>() <span class="hljs-comment">// [1,2]</span>
</code></pre>
<ul>
<li>splice æ–¹æ³•-åˆ é™¤æ•°ç»„ä»»æ„ä½ç½®çš„å…ƒç´ <br/>
splice æ–¹æ³•æˆ‘ä»¬ä¸Šæ–‡å·²ç»è¯¦ç»†è®²è¿‡ï¼Œæ­¤å¤„ä¸å†èµ˜è¿°ã€‚</li>
</ul>
<h4 data-id="heading-13">æ ˆï¼ˆStackï¼‰â€”â€”åªç”¨ pop å’Œ push å®Œæˆå¢åˆ çš„â€œæ•°ç»„â€</h4>
<p>æ ˆæ˜¯ä¸€ç§åè¿›å…ˆå‡º(LIFOï¼ŒLast In First Out)çš„æ•°æ®ç»“æ„ã€‚<br/>
æˆ‘ä»¬å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆå°æ—¶å€™å­¦æ ¡é—¨å£å°å–éƒ¨é‡Œï¼Œæ‘æ»¡äº†å†°æ·‡æ·‹çš„æ–¹å½¢å¤§å†°æŸœã€‚<br/>
å°å–éƒ¨è€æ¿å¾€é‡Œé¢æ‘†ç½®å†°æ·‡æ·‹çš„æ—¶å€™ï¼Œæœ€å…ˆæ‘†è¿›å»çš„ä¼šè½åœ¨å†°æŸœçš„åº•éƒ¨ï¼Œæœ€åæ‘†ç½®è¿›å»çš„ç•™åœ¨å†°æŸœçš„é¡¶éƒ¨ã€‚å¦‚æœè¿™æ—¶å€™å’±ä»¬å»ä¹°å†°æ·‡æ·‹ï¼Œè€æ¿å°±ä¼šæŠŠå†°æŸœé¡¶éƒ¨çš„é‚£ä¸ªå–å‡ºæ¥ç»™æˆ‘ä»¬ã€‚åœ¨å†°æ·‡æ·‹ä¸æ–­è¢«å–å‡ºçš„è¿™ä¸ªè¿‡ç¨‹é‡Œï¼Œè¶Šæ˜¯åæ¥æ”¾è¿›å»çš„ï¼Œè¶Šæ˜¯å…ˆè¢«å–å‡ºæ¥ï¼›è¶Šæ˜¯å…ˆæ”¾è¿›å»çš„ï¼Œè¶Šæ˜¯æœ€åè¢«å–å‡ºæ¥ã€‚è¿™ä¸ªè¿‡ç¨‹ï¼Œå°±æ˜¯æ‰€è°“çš„â€œåè¿›å…ˆå‡ºâ€ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5248e4cb4f26445fb04c2f0a231dd9b6~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1268&amp;h=846&amp;s=53338&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/>
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6c87d3e3a7ee47309cd33bc2976e15a7~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1296&amp;h=844&amp;s=70920&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬çœ‹åˆ°è¿™ä¸ªè¿‡ç¨‹æœ‰ä¸¤ä¸ªç‰¹å¾ï¼š</p>
<ul>
<li>åªå…è®¸ä»å°¾éƒ¨æ·»åŠ å…ƒç´ </li>
<li>åªå…è®¸ä»å°¾éƒ¨å–å‡ºå…ƒç´ <br/>
å¯¹åº”åˆ°æ•°ç»„çš„æ–¹æ³•ï¼Œåˆšå¥½å°±æ˜¯ push å’Œ popã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºåœ¨ JavaScript ä¸­ï¼Œæ ˆå°±æ˜¯é™åˆ¶åªèƒ½ç”¨ push æ¥æ·»åŠ å…ƒç´ ï¼ŒåŒæ—¶åªèƒ½ç”¨ pop æ¥ç§»é™¤å…ƒç´ çš„ä¸€ç§ç‰¹æ®Šçš„æ•°ç»„ã€‚</li>
</ul>
<p>é™¤äº† pop å’Œ push ä¹‹å¤–ï¼Œæ ˆç›¸å…³çš„é¢è¯•é¢˜ä¸­å¾€å¾€è¿˜ä¼šæ¶‰åŠåˆ°å–æ ˆé¡¶å…ƒç´ çš„æ“ä½œã€‚æ‰€è°“æ ˆé¡¶å…ƒç´ ï¼Œä»å›¾ä¸Šæˆ‘ä»¬ä¸éš¾çœ‹å‡ºæ¥ï¼Œå®é™…ä¸Šå®ƒæŒ‡çš„å°±æ˜¯æ•°ç»„å°¾éƒ¨çš„å…ƒç´ ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬åŸºäºæ•°ç»„æ¥å®ç°ä¸€æ³¢æ ˆçš„å¸¸ç”¨æ“ä½œï¼Œå®Œæˆâ€œæ”¾ç½®å†°æ·‡æ·‹â€å’Œâ€œå–å†°æ·‡æ·‹â€çš„è¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆå§‹çŠ¶æ€ï¼Œæ ˆç©º</span>
<span class="hljs-keyword">const</span> stack = []  
<span class="hljs-comment">// å…¥æ ˆè¿‡ç¨‹</span>
stack.<span class="hljs-title function_">push</span>(<span class="hljs-string">'ä¸œåŒ—å¤§æ¿'</span>)
stack.<span class="hljs-title function_">push</span>(<span class="hljs-string">'å¯çˆ±å¤š'</span>)
stack.<span class="hljs-title function_">push</span>(<span class="hljs-string">'å·§ä¹å…¹'</span>)
stack.<span class="hljs-title function_">push</span>(<span class="hljs-string">'å†°å·¥å‚'</span>)
stack.<span class="hljs-title function_">push</span>(<span class="hljs-string">'å…‰æ˜å¥¶ç –'</span>)

<span class="hljs-comment">// å‡ºæ ˆè¿‡ç¨‹ï¼Œæ ˆä¸ä¸ºç©ºæ—¶æ‰æ‰§è¡Œ</span>
<span class="hljs-keyword">while</span>(stack.<span class="hljs-property">length</span>) {
    <span class="hljs-comment">// å•çº¯è®¿é—®æ ˆé¡¶å…ƒç´ ï¼ˆä¸å‡ºæ ˆï¼‰</span>
    <span class="hljs-keyword">const</span> top = stack[stack.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>]
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç°åœ¨å–å‡ºçš„å†°æ·‡æ·‹æ˜¯'</span>, top)  
    <span class="hljs-comment">// å°†æ ˆé¡¶å…ƒç´ å‡ºæ ˆ</span>
    stack.<span class="hljs-title function_">pop</span>()
}

<span class="hljs-comment">// æ ˆç©º</span>
stack <span class="hljs-comment">// []</span>
</code></pre>
<p>ä¸¢åˆ°æ§åˆ¶å°è¿è¡Œï¼Œå†°æ·‡æ·‹å°±ä¼šæŒ‰ç…§åè¿›å…ˆå‡ºçš„é¡ºåºè¢«å–å‡ºï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3214df44908b41f0928c51ed5e93cc58~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1208&amp;h=374&amp;s=117317&amp;e=png&amp;b=fefefe" alt="" loading="lazy"/></p>
<h4 data-id="heading-14">é˜Ÿåˆ—ï¼ˆQueueï¼‰â€”â€”åªç”¨ push å’Œ shift å®Œæˆå¢åˆ çš„â€œæ•°ç»„â€</h4>
<p>é˜Ÿåˆ—æ˜¯ä¸€ç§å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼ŒFirst In First Outï¼‰çš„æ•°æ®ç»“æ„ã€‚<br/>
å®ƒæ¯”è¾ƒåƒå’±ä»¬å»è‚¯å¾·åŸºæ’é˜Ÿç‚¹é¤ã€‚å…ˆç‚¹é¤çš„äººå…ˆå‡ºé¤ï¼Œåç‚¹é¤çš„äººåå‡ºé¤ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/33522d7a89ef44cba52975b9793ca7d3~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=940&amp;h=810&amp;s=63687&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/>
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/285f76f511aa413ba04a8c510d136ae1~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=822&amp;h=814&amp;s=63483&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªè¿‡ç¨‹çš„è§„å¾‹ä¹Ÿå¾ˆæ˜æ˜¾ï¼š</p>
<ul>
<li>åªå…è®¸ä»å°¾éƒ¨æ·»åŠ å…ƒç´ </li>
<li>åªå…è®¸ä»å¤´éƒ¨ç§»é™¤å…ƒç´ </li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´æ•´ä¸ªè¿‡ç¨‹åªæ¶‰åŠäº†æ•°ç»„çš„ push å’Œ shift æ–¹æ³•ã€‚<br/>
åœ¨æ ˆå…ƒç´ å‡ºæ ˆæ—¶ï¼Œæˆ‘ä»¬å…³å¿ƒçš„æ˜¯æ ˆé¡¶å…ƒç´ ï¼ˆæ•°ç»„çš„æœ€åä¸€ä¸ªå…ƒç´ ï¼‰ï¼›é˜Ÿåˆ—å…ƒç´ å‡ºé˜Ÿæ—¶ï¼Œæˆ‘ä»¬å…³å¿ƒçš„åˆ™æ˜¯é˜Ÿå¤´å…ƒç´ ï¼ˆæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰ã€‚<br/>
ä¸‹é¢æˆ‘ä»¬åŸºäºæ•°ç»„æ¥å®ç°ä¸€æ³¢é˜Ÿåˆ—çš„å¸¸ç”¨æ“ä½œï¼Œå®Œæˆâ€œå°å†Œå§æ’é˜Ÿâ€å’Œâ€œå°å†Œå§å–é¤â€çš„è¿‡ç¨‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> queue = []  
queue.<span class="hljs-title function_">push</span>(<span class="hljs-string">'å°å†Œä¸€å§'</span>)
queue.<span class="hljs-title function_">push</span>(<span class="hljs-string">'å°å†ŒäºŒå§'</span>)
queue.<span class="hljs-title function_">push</span>(<span class="hljs-string">'å°å†Œä¸‰å§'</span>)  
  
<span class="hljs-keyword">while</span>(queue.<span class="hljs-property">length</span>) {
    <span class="hljs-comment">// å•çº¯è®¿é—®é˜Ÿå¤´å…ƒç´ ï¼ˆä¸å‡ºé˜Ÿï¼‰</span>
    <span class="hljs-keyword">const</span> top = queue[<span class="hljs-number">0</span>]
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(top,<span class="hljs-string">'å–é¤'</span>)
    <span class="hljs-comment">// å°†é˜Ÿå¤´å…ƒç´ å‡ºé˜Ÿ</span>
    queue.<span class="hljs-title function_">shift</span>()
}

<span class="hljs-comment">// é˜Ÿç©º</span>
queue <span class="hljs-comment">// []</span>
</code></pre>
<p>æŠŠä¸Šé¢ä»£ç ä¸¢è¿›æ§åˆ¶å°è¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å°å†Œå§ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°ä¹–ä¹–å»å–é¤äº†ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d209732f39cf42da991a17d47dbe1d36~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1186&amp;h=230&amp;s=48465&amp;e=png&amp;b=fefefe" alt="" loading="lazy"/></p>
<h3 data-id="heading-15">é“¾è¡¨</h3>
<p>é“¾è¡¨å’Œæ•°ç»„ç›¸ä¼¼ï¼Œå®ƒä»¬éƒ½æ˜¯æœ‰åºçš„åˆ—è¡¨ã€éƒ½æ˜¯çº¿æ€§ç»“æ„ï¼ˆæœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå‰é©±ã€æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªåç»§ï¼‰ã€‚ä¸åŒç‚¹åœ¨äºï¼Œé“¾è¡¨ä¸­ï¼Œæ•°æ®å•ä½çš„åç§°å«åšâ€œç»“ç‚¹â€ï¼Œè€Œç»“ç‚¹å’Œç»“ç‚¹çš„åˆ†å¸ƒï¼Œåœ¨å†…å­˜ä¸­å¯ä»¥æ˜¯<strong>ç¦»æ•£</strong>çš„ã€‚</p>
<p>è¿™ä¸ªâ€œç¦»æ•£â€æ˜¯ç›¸å¯¹äºæ•°ç»„çš„â€œè¿ç»­â€æ¥è¯´çš„ã€‚ä¸Šä¸€èŠ‚å’±ä»¬ç»™å¤§å®¶ç”»è¿‡æ•°ç»„çš„å…ƒç´ åˆ†å¸ƒç¤ºæ„å›¾ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/36ee8a2b5e554d1e99125a3ace41f65a~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=882&amp;h=266&amp;s=15240&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<p>æ•°ç»„åœ¨å†…å­˜ä¸­æœ€ä¸ºå…³é”®çš„ä¸€ä¸ªç‰¹å¾ï¼Œå°±æ˜¯å®ƒä¸€èˆ¬æ˜¯å¯¹åº”ä¸€æ®µä½äºè‡ªå·±ä¸Šç•Œå’Œä¸‹ç•Œä¹‹é—´çš„ã€ä¸€æ®µ<strong>è¿ç»­</strong>çš„å†…å­˜ç©ºé—´ã€‚å…ƒç´ ä¸å…ƒç´ ä¹‹é—´ï¼Œç´§ç´§ç›¸è¿ï¼ˆå½“ç„¶å•¦ï¼Œè¿˜æœ‰äºŒèˆ¬æƒ…å†µï¼Œæˆ‘ä»¬åœ¨ä¸‹æ–‡çš„è¾¨æç¯èŠ‚ä¼šæåˆ°ï¼‰ã€‚</p>
<p>è€Œé“¾è¡¨ä¸­çš„ç»“ç‚¹ï¼Œåˆ™å…è®¸æ•£è½åœ¨å†…å­˜ç©ºé—´çš„å„ä¸ªè§’è½é‡Œã€‚ä¸€ä¸ªå†…å®¹ä¸º1-&gt;2-&gt;3-&gt;4-&gt;5çš„é“¾è¡¨ï¼Œåœ¨å†…å­˜ä¸­çš„å½¢æ€å¯ä»¥æ˜¯æ•£ä¹±å¦‚ä¸‹çš„ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/87081b9e7fea480bb20225830f141e9b~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=892&amp;h=776&amp;s=21367&amp;e=png&amp;b=1ca2fc" alt="" loading="lazy"/><br/>
æ­£æ˜¯ç”±äºæ•°ç»„ä¸­çš„å…ƒç´ æ˜¯è¿ç»­çš„ï¼Œæ¯ä¸ªå…ƒç´ çš„å†…å­˜åœ°å€å¯ä»¥æ ¹æ®å…¶ç´¢å¼•è·ç¦»æ•°ç»„å¤´éƒ¨çš„è·ç¦»æ¥è®¡ç®—å‡ºæ¥ã€‚å› æ­¤å¯¹æ•°ç»„æ¥è¯´ï¼Œæ¯ä¸€ä¸ªå…ƒç´ éƒ½å¯ä»¥é€šè¿‡æ•°ç»„çš„ç´¢å¼•ä¸‹æ ‡ç›´æ¥å®šä½ã€‚</p>
<p>ä½†æ˜¯å¯¹é“¾è¡¨æ¥è¯´ï¼Œå…ƒç´ å’Œå…ƒç´ ä¹‹é—´ä¼¼ä¹æ¯«æ— å†…å­˜ä¸Šçš„ç“œè‘›å¯è¨€ã€‚å°±æ¯”å¦‚è¯´å’±ä»¬å›¾ä¸Šè¿™ç§æƒ…å†µï¼Œ1ã€2ã€3ã€4ã€5å„æ®å±±å¤´ï¼Œç«™åœ¨å…ƒç´ 1çš„å‘ä½é‡Œï¼Œæˆ‘ä»¬å¯¹å…ƒç´ 2ã€3ã€4ã€5çš„å†…å­˜åœ°å€ä¸€æ— æ‰€çŸ¥ï¼Œè¿éå†éƒ½æ²¡æ³•éå†ï¼Œè¿™å¯å’‹æ•´ï¼Ÿ</p>
<p>æ²¡æœ‰å…³è”ï¼Œå°±åˆ›é€ å…³è”ï¼</p>
<p>åœ¨é“¾è¡¨ä¸­ï¼Œæ¯ä¸€ä¸ªç»“ç‚¹çš„ç»“æ„éƒ½åŒ…æ‹¬äº†ä¸¤éƒ¨åˆ†çš„å†…å®¹ï¼šæ•°æ®åŸŸå’ŒæŒ‡é’ˆåŸŸã€‚JS ä¸­çš„é“¾è¡¨ï¼Œæ˜¯ä»¥åµŒå¥—çš„å¯¹è±¡çš„å½¢å¼æ¥å®ç°çš„ï¼š</p>
<pre><code class="hljs language-js" lang="js">{
    <span class="hljs-comment">// æ•°æ®åŸŸ</span>
    <span class="hljs-attr">val</span>: <span class="hljs-number">1</span>,
    <span class="hljs-comment">// æŒ‡é’ˆåŸŸï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹</span>
    <span class="hljs-attr">next</span>: {
        <span class="hljs-attr">val</span>:<span class="hljs-number">2</span>,
        <span class="hljs-attr">next</span>: ...
    }
}   
</code></pre>
<p>æ•°æ®åŸŸå­˜å‚¨çš„æ˜¯å½“å‰ç»“ç‚¹æ‰€å­˜å‚¨çš„æ•°æ®å€¼ï¼Œè€ŒæŒ‡é’ˆåŸŸåˆ™ä»£è¡¨ä¸‹ä¸€ä¸ªç»“ç‚¹ï¼ˆåç»§ç»“ç‚¹ï¼‰çš„å¼•ç”¨ã€‚
æœ‰äº† next æŒ‡é’ˆæ¥è®°å½•åç»§ç»“ç‚¹çš„å¼•ç”¨ï¼Œæ¯ä¸€ä¸ªç»“ç‚¹è‡³å°‘éƒ½èƒ½çŸ¥é“è‡ªå·±åé¢çš„åŒå­¦æ˜¯å“ªä½äº†ï¼ŒåŸæœ¬ç›¸äº’ç‹¬ç«‹çš„ç»“ç‚¹ä¹‹é—´å°±æœ‰äº†å¦‚ä¸‹çš„è”ç³»ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3d0baf800bfb4b5bb81f6fbc83dfdb9c~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=792&amp;h=742&amp;s=25909&amp;e=png&amp;b=1ca2fc" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬æŠŠè¿™ä¸ªå…³ç³»ç»™ç®€åŒ–ä¸€ä¸‹ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ae5e9931272d49e18d96122dfa186e86~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1314&amp;h=462&amp;s=30110&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/><br/>
è¦æƒ³è®¿é—®é“¾è¡¨ä¸­çš„ä»»ä½•ä¸€ä¸ªå…ƒç´ ï¼Œæˆ‘ä»¬éƒ½å¾—ä»èµ·ç‚¹ç»“ç‚¹å¼€å§‹ï¼Œé€ä¸ªè®¿é—® nextï¼Œä¸€ç›´è®¿é—®åˆ°ç›®æ ‡ç»“ç‚¹ä¸ºæ­¢ã€‚ä¸ºäº†ç¡®ä¿èµ·ç‚¹ç»“ç‚¹æ˜¯å¯æŠµè¾¾çš„ï¼Œæˆ‘ä»¬æœ‰æ—¶è¿˜ä¼šè®¾å®šä¸€ä¸ª head æŒ‡é’ˆæ¥ä¸“é—¨æŒ‡å‘é“¾è¡¨çš„å¼€å§‹ä½ç½®ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/981d8c74866d4aefb8b695c9e4ed0e1e~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1266&amp;h=562&amp;s=43215&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/><br/>
ä»¥ä¸Šï¼Œå°±æ˜¯é“¾è¡¨çš„åŸºæœ¬å½¢æ€å•¦ã€‚</p>
<h4 data-id="heading-16">é“¾è¡¨ç»“ç‚¹çš„åˆ›å»º</h4>
<p>åˆ›å»ºé“¾è¡¨ç»“ç‚¹ï¼Œå’±ä»¬éœ€è¦ä¸€ä¸ªæ„é€ å‡½æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ListNode</span>(<span class="hljs-params">val</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">val</span> = val;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">next</span> = <span class="hljs-literal">null</span>;
}
</code></pre>
<p>åœ¨ä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»ºç»“ç‚¹æ—¶ï¼Œä¼ å…¥ val ï¼ˆæ•°æ®åŸŸå¯¹åº”çš„å€¼å†…å®¹ï¼‰ã€æŒ‡å®š next ï¼ˆä¸‹ä¸€ä¸ªé“¾è¡¨ç»“ç‚¹ï¼‰å³å¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> node = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(<span class="hljs-number">1</span>)  
node.<span class="hljs-property">next</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(<span class="hljs-number">2</span>)
</code></pre>
<p>ä»¥ä¸Šï¼Œå°±åˆ›å»ºå‡ºäº†ä¸€ä¸ªæ•°æ®åŸŸå€¼ä¸º1ï¼Œnext ç»“ç‚¹æ•°æ®åŸŸå€¼ä¸º2çš„é“¾è¡¨ç»“ç‚¹ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/816ad2c296f74df78342093e4d6edcf6~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=682&amp;h=258&amp;s=12528&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<h4 data-id="heading-17">é“¾è¡¨å…ƒç´ çš„æ·»åŠ </h4>
<p>ç»“åˆå‰é¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œé“¾è¡¨çš„ç»“ç‚¹é—´å…³ç³»æ˜¯é€šè¿‡ next æŒ‡é’ˆæ¥ç»´ç³»çš„ã€‚å› æ­¤ï¼Œé“¾è¡¨å…ƒç´ çš„æ·»åŠ å’Œåˆ é™¤æ“ä½œï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯åœ¨å›´ç»• next æŒ‡é’ˆåšæ–‡ç« ã€‚</p>
<p>å…ˆæ¥è¯´è¯´æ·»åŠ ï¼Œç›´æ¥åœ¨å°¾éƒ¨æ·»åŠ ç»“ç‚¹ç›¸å¯¹æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬æ”¹å˜ä¸€ä¸ª next æŒ‡é’ˆå°±è¡Œã€‚è¿™é‡Œè®°å€¼ä¸º2çš„ node ç»“ç‚¹ä¸º node2ï¼ˆå‡è®¾ node2 æ˜¯ç°åœ¨çš„å°¾éƒ¨ç»“ç‚¹ï¼‰ï¼Œå€¼ä¸º3çš„ node ç»“ç‚¹ä¸º node3ã€‚å‡å¦‚æˆ‘è¦æŠŠ node3 æ·»åŠ åˆ° node2 æ‰€åœ¨é“¾è¡¨çš„å°¾éƒ¨ï¼Œç›´æ¥æŠŠ node2 çš„ next æŒ‡é’ˆæŒ‡å‘ node3 å³å¯ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/97312baddfb342128ffb9c205bedccac~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=928&amp;h=288&amp;s=17560&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<p>éœ€è¦å¤§å®¶å¼•èµ·é‡è§†çš„æ˜¯å¦ä¸€ç§æ·»åŠ æ“ä½œï¼šå¦‚ä½•åœ¨ä¸¤ä¸ªç»“ç‚¹é—´æ’å…¥ä¸€ä¸ªç»“ç‚¹ï¼Ÿæ³¨æ„ï¼Œç”±äºé“¾è¡¨æœ‰æ—¶ä¼šæœ‰å¤´ç»“ç‚¹ï¼Œè¿™æ—¶å³ä¾¿ä½ æ˜¯å¾€é“¾è¡¨å¤´éƒ¨å¢åŠ ç»“ç‚¹ï¼Œå…¶æœ¬è´¨ä¹Ÿæ˜¯â€œåœ¨å¤´ç»“ç‚¹å’Œç¬¬ä¸€ä¸ªç»“ç‚¹ä¹‹é—´æ’å…¥ä¸€ä¸ªæ–°ç»“ç‚¹â€ã€‚æ‰€ä»¥è¯´ï¼Œ<strong>ä»»æ„ä¸¤ç»“ç‚¹é—´æ’å…¥ä¸€ä¸ªæ–°ç»“ç‚¹</strong>è¿™ç§ç±»å‹çš„å¢åŠ æ“ä½œï¼Œå°†ä¼šæ˜¯é“¾è¡¨åŸºç¡€ä¸­çš„ä¸€ä¸ªå…³é”®è€ƒç‚¹ã€‚</p>
<p>è¦æƒ³å®Œæˆè¿™ä¸ªåŠ¨ä½œï¼Œæˆ‘ä»¬éœ€è¦å˜æ›´çš„æ˜¯<strong>å‰é©±ç»“ç‚¹</strong>å’Œ<strong>ç›®æ ‡ç»“ç‚¹</strong>çš„ next æŒ‡é’ˆæŒ‡å‘ï¼Œè¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š<br/>
æ’å…¥å‰ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/601217fc64d141f0aed48f6558c53998~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=846&amp;h=506&amp;s=22276&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/>
æ’å…¥åï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/faf00f911dc04864ae52a6343dacafa2~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=798&amp;h=550&amp;s=27741&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<p>æ³¨æ„æˆ‘åœˆçº¢çš„åœ°æ–¹ï¼Œå°±æ˜¯å’±ä»¬è¦åŠ¨æ‰‹è„šçš„åœ°æ–¹ã€‚ä¸‹é¢æˆ‘ç”¨ä»£ç æ¥è¡¨è¿°ä¸€ä¸‹è¿™ä¸ªæ”¹å˜ã€‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¦‚æœç›®æ ‡ç»“ç‚¹æœ¬æ¥ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆè®°å¾—æ‰‹åŠ¨åˆ›å»º</span>
<span class="hljs-keyword">const</span> node3 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>(<span class="hljs-number">3</span>)     
<span class="hljs-comment">// æŠŠnode3çš„ next æŒ‡é’ˆæŒ‡å‘ node2ï¼ˆå³ node1.nextï¼‰</span>
node3.<span class="hljs-property">next</span> = node1.<span class="hljs-property">next</span>
<span class="hljs-comment">// æŠŠnode1çš„ next æŒ‡é’ˆæŒ‡å‘ node3</span>
node1.<span class="hljs-property">next</span> = node3
</code></pre>
<h4 data-id="heading-18">é“¾è¡¨å…ƒç´ çš„åˆ é™¤</h4>
<p>é“¾è¡¨å…ƒç´ çš„åˆ é™¤ä¹Ÿæ˜¯éå¸¸é«˜é¢‘çš„æ“ä½œã€‚å»¶ç»­æˆ‘ä»¬å‰é¢çš„æ€è·¯ï¼Œä»ç„¶æŠŠé‡å¿ƒæ”¾åœ¨å¯¹ next æŒ‡é’ˆçš„è°ƒæ•´ä¸Šã€‚æˆ‘ä»¬æ€è€ƒä¸€ä¸‹ï¼šå¦‚ä½•æŠŠåˆšåˆšæ·»åŠ è¿›æ¥çš„ node3 ä»ç°åœ¨çš„é“¾è¡¨é‡Œåˆ æ‰ï¼Ÿ<br/>
æ³¨æ„ï¼Œåˆ é™¤çš„æ ‡å‡†æ˜¯ï¼šåœ¨é“¾è¡¨çš„éå†è¿‡ç¨‹ä¸­ï¼Œæ— æ³•å†éå†åˆ°æŸä¸ªç»“ç‚¹çš„å­˜åœ¨ã€‚æŒ‰ç…§è¿™ä¸ªæ ‡å‡†ï¼Œè¦æƒ³éå†ä¸åˆ° node3ï¼Œæˆ‘ä»¬ç›´æ¥è®©å®ƒçš„å‰é©±ç»“ç‚¹ node1 çš„ next æŒ‡é’ˆè·³è¿‡å®ƒã€æŒ‡å‘ node3 çš„åç»§å³å¯ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fc6a1f482c0c4b24bf791171c43167d9~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=760&amp;h=598&amp;s=33301&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/><br/>
å¦‚æ­¤ä¸€æ¥ï¼Œnode3 å°±æˆä¸ºäº†ä¸€ä¸ªå®Œå…¨ä¸å¯æŠµè¾¾çš„ç»“ç‚¹äº†ï¼Œå®ƒä¼šè¢« JS çš„åƒåœ¾å›æ”¶å™¨è‡ªåŠ¨å›æ”¶æ‰ã€‚è¿™ä¸ªè¿‡ç¨‹ç”¨ä»£ç è¡¨è¿°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">node1.<span class="hljs-property">next</span> = node3.<span class="hljs-property">next</span> 
</code></pre>
<p>è¿™é‡Œç»™å¤§å®¶æä¸ªé†’ï¼šåœ¨æ¶‰åŠé“¾è¡¨åˆ é™¤æ“ä½œçš„é¢˜ç›®ä¸­ï¼Œé‡ç‚¹ä¸æ˜¯å®šä½ç›®æ ‡ç»“ç‚¹ï¼Œè€Œæ˜¯<strong>å®šä½ç›®æ ‡ç»“ç‚¹çš„å‰é©±ç»“ç‚¹</strong>ã€‚åšé¢˜æ—¶ï¼Œå®Œå…¨å¯ä»¥åªä½¿ç”¨ä¸€ä¸ªæŒ‡é’ˆï¼ˆå¼•ç”¨ï¼‰ï¼Œè¿™ä¸ªæŒ‡é’ˆç”¨æ¥å®šä½ç›®æ ‡ç»“ç‚¹çš„å‰é©±ç»“ç‚¹ã€‚æ¯”å¦‚è¯´å’±ä»¬è¿™ä¸ªé¢˜é‡Œï¼Œå…¶å®åªè¦èƒ½æ‹¿åˆ° node1 å°±è¡Œäº†ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åˆ©ç”¨ node1 å¯ä»¥å®šä½åˆ° node3</span>
<span class="hljs-keyword">const</span> target = node1.<span class="hljs-property">next</span>  
node1.<span class="hljs-property">next</span> = target.<span class="hljs-property">next</span>
</code></pre>
<p>å› æ­¤å¤§å®¶åšé¢˜çš„æ—¶å€™ï¼Œåƒä¸‡åˆ«è·‘è¿‡äº†å¤´ï¼Œæœ€åæ‰¾åˆ°äº†ç›®æ ‡ç»“ç‚¹ã€å›å¤´å´å‘ç°å¿˜äº†è®°å½•çœŸæ­£é‡è¦çš„å‰é©±ç»“ç‚¹ã€‚ï¼ˆè¿™ç‚¹æˆ‘ä»¬åé¢åšé¢˜çš„æ—¶å€™ä¼šå†ç»™å¤§å®¶æç‚¹ä¸€ä¸‹ï¼‰</p>
<h4 data-id="heading-19">é“¾è¡¨å’Œæ•°ç»„çš„è¾¨æ</h4>
<p>åœ¨å¤§å¤šæ•°çš„è®¡ç®—æœºè¯­è¨€ä¸­ï¼Œæ•°ç»„éƒ½å¯¹åº”ç€ä¸€æ®µè¿ç»­çš„å†…å­˜ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨ä»»æ„ä½ç½®åˆ é™¤ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆè¯¥ä½ç½®å¾€åçš„æ‰€æœ‰å…ƒç´ ï¼Œéƒ½éœ€è¦å¾€å‰æŒªä¸€ä¸ªä½ç½®ï¼›ç›¸åº”åœ°ï¼Œå¦‚æœè¦åœ¨ä»»æ„ä½ç½®æ–°å¢ä¸€ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆè¯¥ä½ç½®å¾€åçš„æ‰€æœ‰å…ƒç´ ä¹Ÿéƒ½è¦å¾€åæŒªä¸€ä¸ªä½ç½®ã€‚<br/>
<strong>æˆ‘ä»¬å‡è®¾æ•°ç»„çš„é•¿åº¦æ˜¯ nï¼Œé‚£ä¹ˆå› å¢åŠ /åˆ é™¤æ“ä½œå¯¼è‡´éœ€è¦ç§»åŠ¨çš„å…ƒç´ æ•°é‡ï¼Œå°±ä¼šéšç€æ•°ç»„é•¿åº¦ n çš„å¢å¤§è€Œå¢å¤§ï¼Œå‘ˆä¸€ä¸ªçº¿æ€§å…³ç³»ã€‚æ‰€ä»¥è¯´æ•°ç»„å¢åŠ /åˆ é™¤æ“ä½œå¯¹åº”çš„å¤æ‚åº¦å°±æ˜¯ O(n)</strong>ã€‚</p>
<p>ï¼ˆå…³äºæ—¶é—´å¤æ‚åº¦ï¼Œåœ¨ç¬¬6å°èŠ‚æˆ‘ä»¬ä¼šä½œä¸“é¢˜è®²è§£ï¼Œå¤§å®¶è«æ…Œï¼‰</p>
<p>ä½† JS ä¸­ä¸ä¸€å®šæ˜¯ã€‚<br/>
JSæ¯”è¾ƒç‰¹åˆ«ã€‚å¦‚æœæˆ‘ä»¬åœ¨ä¸€ä¸ªæ•°ç»„ä¸­åªå®šä¹‰äº†ä¸€ç§ç±»å‹çš„å…ƒç´ ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]
</code></pre>
<p>å®ƒæ˜¯ä¸€ä¸ªçº¯æ•°å­—æ•°ç»„ï¼Œé‚£ä¹ˆå¯¹åº”çš„ç¡®å®æ˜¯è¿ç»­å†…å­˜ã€‚<br/>
ä½†å¦‚æœæˆ‘ä»¬å®šä¹‰äº†ä¸åŒç±»å‹çš„å…ƒç´ ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-string">'haha'</span>, <span class="hljs-number">1</span>, {<span class="hljs-attr">a</span>:<span class="hljs-number">1</span>}]
</code></pre>
<p>å®ƒå¯¹åº”çš„å°±æ˜¯ä¸€æ®µéè¿ç»­çš„å†…å­˜ã€‚æ­¤æ—¶ï¼ŒJS æ•°ç»„ä¸å†å…·æœ‰æ•°ç»„çš„ç‰¹å¾ï¼Œå…¶åº•å±‚ä½¿ç”¨å“ˆå¸Œæ˜ å°„åˆ†é…å†…å­˜ç©ºé—´ï¼Œæ˜¯ç”±å¯¹è±¡é“¾è¡¨æ¥å®ç°çš„ã€‚</p>
<p>è¯´èµ·æ¥æœ‰ç‚¹ç»•å£ï¼Œä½†å¤§å®¶è°¨è®°â€œJS æ•°ç»„æœªå¿…æ˜¯çœŸæ­£çš„æ•°ç»„â€å³å¯ã€‚</p>
<p>ä½•è°“â€œçœŸæ­£çš„æ•°ç»„â€ï¼Ÿåœ¨å„å¤§æ•™æï¼ˆåŒ…æ‹¬ç™¾ç§‘è¯æ¡ï¼‰å¯¹æ•°ç»„çš„å®šä¹‰ä¸­ï¼Œéƒ½æœ‰ä¸€ä¸ªâ€œå­˜å‚¨åœ¨è¿ç»­çš„å†…å­˜ç©ºé—´é‡Œâ€è¿™æ ·çš„å¿…è¦æ¡ä»¶ã€‚å› æ­¤åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬æè¿°çš„â€œæ•°ç»„â€å°±æ˜¯ç¬¦åˆè¿™ä¸ªå®šä¹‰çš„æ•°ç»„ã€‚é¢è¯•æ—¶ï¼Œè‹¥è€ƒåˆ°æ•°ç»„å’Œé“¾è¡¨çš„è¾¨æï¼Œå¤§å®¶ä¹Ÿæ²¿ç€è¿™ä¸ªæ€è·¯å¾€ä¸‹è¯´ï¼Œæ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚å¦‚æœèƒ½å¤Ÿè¯´å‡º JS æ•°ç»„å’Œå¸¸è§„æ•°ç»„çš„ä¸åŒï¼Œé‚£å°±æ˜¯é”¦ä¸Šæ·»èŠ±äº†ã€‚</p>
<p>ç›¸å¯¹äºæ•°ç»„æ¥è¯´ï¼Œé“¾è¡¨æœ‰ä¸€ä¸ªæ˜æ˜¾çš„ä¼˜ç‚¹ï¼Œå°±æ˜¯<strong>æ·»åŠ å’Œåˆ é™¤å…ƒç´ éƒ½ä¸éœ€è¦æŒªåŠ¨å¤šä½™çš„å…ƒç´ </strong>ã€‚</p>
<h5 data-id="heading-20">é«˜æ•ˆçš„å¢åˆ æ“ä½œ</h5>
<p>åœ¨é“¾è¡¨ä¸­ï¼Œæ·»åŠ å’Œåˆ é™¤æ“ä½œçš„å¤æ‚åº¦æ˜¯å›ºå®šçš„â€”â€”ä¸ç®¡é“¾è¡¨é‡Œé¢çš„ç»“ç‚¹ä¸ªæ•° n æœ‰å¤šå¤§ï¼Œåªè¦æˆ‘ä»¬æ˜ç¡®äº†è¦æ’å…¥/åˆ é™¤çš„ç›®æ ‡ä½ç½®ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦åšçš„éƒ½ä»…ä»…æ˜¯æ”¹å˜ç›®æ ‡ç»“ç‚¹åŠå…¶å‰é©±/åç»§ç»“ç‚¹çš„æŒ‡é’ˆæŒ‡å‘ã€‚
å› æ­¤æˆ‘ä»¬è¯´é“¾è¡¨å¢åˆ æ“ä½œçš„å¤æ‚åº¦æ˜¯å¸¸æ•°çº§åˆ«çš„å¤æ‚åº¦ï¼Œç”¨å¤§ O è¡¨ç¤ºæ³•è¡¨ç¤ºä¸º O(1)ã€‚</p>
<h5 data-id="heading-21">éº»çƒ¦çš„è®¿é—®æ“ä½œ</h5>
<p>ä½†æ˜¯é“¾è¡¨ä¹Ÿæœ‰ä¸€ä¸ªå¼Šç«¯ï¼šå½“æˆ‘ä»¬è¯•å›¾è¯»å–æŸä¸€ä¸ªç‰¹å®šçš„é“¾è¡¨ç»“ç‚¹æ—¶ï¼Œå¿…é¡»éå†æ•´ä¸ªé“¾è¡¨æ¥æŸ¥æ‰¾å®ƒã€‚æ¯”å¦‚è¯´æˆ‘è¦åœ¨ä¸€ä¸ªé•¿åº¦ä¸º nï¼ˆn&gt;10ï¼‰ çš„é“¾è¡¨é‡Œï¼Œå®šä½å®ƒçš„ç¬¬ 10 ä¸ªç»“ç‚¹ï¼Œæˆ‘éœ€è¦è¿™æ ·åšï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è®°å½•ç›®æ ‡ç»“ç‚¹çš„ä½ç½®</span>
<span class="hljs-keyword">const</span> index = <span class="hljs-number">10</span>  
<span class="hljs-comment">// è®¾ä¸€ä¸ªæ¸¸æ ‡æŒ‡å‘é“¾è¡¨ç¬¬ä¸€ä¸ªç»“ç‚¹ï¼Œä»ç¬¬ä¸€ä¸ªç»“ç‚¹å¼€å§‹éå†</span>
<span class="hljs-keyword">let</span> node = head  
<span class="hljs-comment">// åå¤éå†åˆ°ç¬¬10ä¸ªç»“ç‚¹ä¸ºæ­¢</span>
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;index&amp;&amp;node;i++) {
    node = node.<span class="hljs-property">next</span>
}
</code></pre>
<p>éšç€é“¾è¡¨é•¿åº¦çš„å¢åŠ ï¼Œæˆ‘ä»¬æœç´¢çš„èŒƒå›´ä¹Ÿä¼šå˜å¤§ã€éå†å…¶ä¸­ä»»æ„å…ƒç´ çš„æ—¶é—´æˆæœ¬è‡ªç„¶éšä¹‹æé«˜ã€‚è¿™ä¸ªå˜åŒ–çš„è¶‹åŠ¿å‘ˆçº¿æ€§è§„å¾‹ï¼Œç”¨å¤§ O è¡¨ç¤ºæ³•è¡¨ç¤ºä¸º O(n)ã€‚</p>
<p>ä½†åœ¨æ•°ç»„ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥è®¿é—®ç´¢å¼•ã€å¯ä»¥åšåˆ°ä¸€æ­¥åˆ°ä½ï¼Œè¿™ä¸ªæ“ä½œçš„å¤æ‚åº¦ä¼šè¢«é™çº§ä¸ºå¸¸æ•°çº§åˆ«(O(1))ï¼š</p>
<pre><code class="hljs language-js" lang="js">arr[<span class="hljs-number">9</span>]
</code></pre>
<h4 data-id="heading-22">å°ç»“</h4>
<p>ç»“åˆä¸Šè¿°åˆ†æï¼Œæˆ‘ä»¬ä¸éš¾å¾—å‡ºè¿™æ ·çš„ç»“è®ºï¼šé“¾è¡¨çš„æ’å…¥/åˆ é™¤æ•ˆç‡è¾ƒé«˜ï¼Œè€Œè®¿é—®æ•ˆç‡è¾ƒä½ï¼›æ•°ç»„çš„è®¿é—®æ•ˆç‡è¾ƒé«˜ï¼Œè€Œæ’å…¥æ•ˆç‡è¾ƒä½ã€‚è¿™ä¸ªç‰¹æ€§éœ€è¦å¤§å®¶ç‰¢è®°ï¼Œå¯èƒ½ä¼šä½œä¸ºæ•°æ®ç»“æ„é€‰å‹çš„ä¾æ®æ¥å•ç‹¬è€ƒå¯Ÿã€‚</p>
<p>ï¼ˆé˜…è¯»è¿‡ç¨‹ä¸­æœ‰ä»»ä½•æƒ³æ³•æˆ–ç–‘é—®ï¼Œæˆ–è€…å•çº¯å¸Œæœ›å’Œç¬”è€…äº¤ä¸ªæœ‹å‹å•¥çš„ï¼Œæ¬¢è¿å¤§å®¶æ·»åŠ æˆ‘çš„å¾®ä¿¡xyalinodeä¸æˆ‘äº¤æµå“ˆ~ï¼‰</p>
<h2 data-id="heading-23">å¿«é€Ÿä¸Šæ‰‹â€”â€”ä»0åˆ°1æŒæ¡ç®—æ³•é¢è¯•éœ€è¦çš„æ•°æ®ç»“æ„ï¼ˆä¸‰ï¼‰</h2>
<p>æœ¬èŠ‚æˆ‘ä»¬ä¸€èµ·æ¥è®¤è¯†ä¸€ä¸‹æ ‘ä¸äºŒå‰æ ‘ã€‚<br/></p>
<p><a name="user-content-4175d9d6" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-24">ç†è§£æ ‘ç»“æ„</h3>
<p><br/>åœ¨ç†è§£è®¡ç®—æœºä¸–ç•Œçš„æ ‘ç»“æ„ä¹‹å‰ï¼Œå¤§å®¶ä¸å¦¨å›å¿†ä¸€ä¸‹ç°å®ä¸–ç•Œä¸­çš„æ ‘æœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼šä¸€æ£µæ ‘å¾€å¾€åªæœ‰ä¸€ä¸ªæ ‘æ ¹ï¼Œå‘ä¸Šç”Ÿé•¿åï¼Œå´å¯ä»¥ä¼¸å±•å‡ºæ— æ•°çš„æ ‘æã€æ ‘æä¸Šä¼šé•¿å‡ºæ ‘å¶ã€‚ç”±æ ‘æ ¹ä»æ³¥åœŸä¸­å¸æ”¶æ°´ã€æ— æœºç›ç­‰è¥å…»ç‰©è´¨ï¼Œæºæºä¸æ–­åœ°è¾“é€åˆ°æ ‘æä¸æ ‘å¶çš„é‚£ä¸€ç«¯ã€‚ä¸€æ£µæ ‘å¾€å¾€å‘ˆç°è¿™æ ·çš„åŸºæœ¬å½¢æ€ï¼š<br/> <br/><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/6/1714e6b2706ab067~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=886&amp;h=628&amp;s=101731&amp;e=png" alt="" loading="lazy"/><br/>æ•°æ®ç»“æ„ä¸­çš„æ ‘ï¼Œé¦–å…ˆæ˜¯å¯¹ç°å®ä¸–ç•Œä¸­æ ‘çš„ä¸€å±‚ç®€åŒ–ï¼šæŠŠæ ‘æ ¹æŠ½è±¡ä¸ºâ€œæ ¹ç»“ç‚¹â€ï¼Œæ ‘ææŠ½è±¡ä¸ºâ€œè¾¹â€ï¼Œæ ‘æçš„ä¸¤ä¸ªç«¯ç‚¹æŠ½è±¡ä¸ºâ€œç»“ç‚¹â€ï¼Œæ ‘å¶æŠ½è±¡ä¸ºâ€œå¶å­ç»“ç‚¹â€ã€‚æŠ½è±¡åçš„æ ‘ç»“æ„å¦‚ä¸‹ï¼š<br/> <br/>
<img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/15/1717d9e07221bb94~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1162&amp;h=776&amp;s=90313&amp;e=png" alt="" loading="lazy"/><br/>æŠŠè¿™æ£µæŠ½è±¡åçš„æ ‘é¢ å€’ä¸€ä¸‹ï¼Œå°±å¾—åˆ°äº†è®¡ç®—æœºä¸­çš„æ ‘ç»“æ„ï¼š<br/> <br/><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/6/1714e6b267f22329~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=621&amp;h=401&amp;s=24592&amp;e=png" alt="" loading="lazy"/><br/> <br/>ç»“åˆè¿™å¼ å›¾ï¼Œæˆ‘ä»¬æ¥è®²è§£æ ‘çš„å…³é”®ç‰¹æ€§å’Œé‡ç‚¹æ¦‚å¿µã€‚å¸Œæœ›å¤§å®¶å¯ä»¥ç‰¢è®°ä»¥ä¸‹å‡ ç‚¹ï¼š<br/></p>
<ul>
<li>æ ‘çš„å±‚æ¬¡è®¡ç®—è§„åˆ™ï¼šæ ¹ç»“ç‚¹æ‰€åœ¨çš„é‚£ä¸€å±‚è®°ä¸ºç¬¬ä¸€å±‚ï¼Œå…¶å­ç»“ç‚¹æ‰€åœ¨çš„å°±æ˜¯ç¬¬äºŒå±‚ï¼Œä»¥æ­¤ç±»æ¨ã€‚</li>
<li>ç»“ç‚¹å’Œæ ‘çš„â€œé«˜åº¦â€è®¡ç®—è§„åˆ™ï¼šå¶å­ç»“ç‚¹é«˜åº¦è®°ä¸º1ï¼Œæ¯å‘ä¸Šä¸€å±‚é«˜åº¦å°±åŠ 1ï¼Œé€å±‚å‘ä¸Šç´¯åŠ è‡³ç›®æ ‡ç»“ç‚¹æ—¶ï¼Œæ‰€å¾—åˆ°çš„çš„å€¼å°±æ˜¯ç›®æ ‡ç»“ç‚¹çš„é«˜åº¦ã€‚æ ‘ä¸­ç»“ç‚¹çš„æœ€å¤§é«˜åº¦ï¼Œç§°ä¸ºâ€œæ ‘çš„é«˜åº¦â€ã€‚</li>
<li>â€œåº¦â€çš„æ¦‚å¿µï¼šä¸€ä¸ªç»“ç‚¹å¼€å‰å‡ºå»å¤šå°‘ä¸ªå­æ ‘ï¼Œè¢«è®°ä¸ºç»“ç‚¹çš„â€œåº¦â€ã€‚æ¯”å¦‚æˆ‘ä»¬ä¸Šå›¾ä¸­ï¼Œæ ¹ç»“ç‚¹çš„â€œåº¦â€å°±æ˜¯3ã€‚</li>
<li>â€œå¶å­ç»“ç‚¹â€ï¼šå¶å­ç»“ç‚¹å°±æ˜¯åº¦ä¸º0çš„ç»“ç‚¹ã€‚åœ¨ä¸Šå›¾ä¸­ï¼Œæœ€åä¸€å±‚çš„ç»“ç‚¹çš„åº¦å…¨éƒ¨ä¸º0ï¼Œæ‰€ä»¥è¿™ä¸€å±‚çš„ç»“ç‚¹éƒ½æ˜¯å¶å­ç»“ç‚¹ã€‚</li>
</ul>
<p><a name="user-content-aa301582" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-25">ç†è§£äºŒå‰æ ‘ç»“æ„</h3>
<p><br/>äºŒå‰æ ‘æ˜¯æŒ‡æ»¡è¶³ä»¥ä¸‹è¦æ±‚çš„æ ‘ï¼š<br/></p>
<ul>
<li>å®ƒå¯ä»¥æ²¡æœ‰æ ¹ç»“ç‚¹ï¼Œä½œä¸ºä¸€æ£µç©ºæ ‘å­˜åœ¨</li>
<li>å¦‚æœå®ƒä¸æ˜¯ç©ºæ ‘ï¼Œé‚£ä¹ˆ<strong>å¿…é¡»ç”±æ ¹ç»“ç‚¹ã€å·¦å­æ ‘å’Œå³å­æ ‘ç»„æˆï¼Œä¸”å·¦å³å­æ ‘éƒ½æ˜¯äºŒå‰æ ‘</strong>ã€‚å¦‚ä¸‹å›¾ï¼š<br/>
<img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/6/1714e6b275ab6309~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=621&amp;h=401&amp;s=24948&amp;e=png" alt="" loading="lazy"/><br/>
æ³¨æ„ï¼Œ<strong>äºŒå‰æ ‘ä¸èƒ½è¢«ç®€å•å®šä¹‰ä¸ºæ¯ä¸ªç»“ç‚¹çš„åº¦éƒ½æ˜¯2çš„æ ‘</strong>ã€‚æ™®é€šçš„æ ‘å¹¶ä¸ä¼šåŒºåˆ†å·¦å­æ ‘å’Œå³å­æ ‘ï¼Œä½†åœ¨äºŒå‰æ ‘ä¸­ï¼Œå·¦å³å­æ ‘çš„ä½ç½®æ˜¯ä¸¥æ ¼çº¦å®šã€ä¸èƒ½äº¤æ¢çš„ã€‚å¯¹åº”åˆ°å›¾ä¸Šæ¥çœ‹ï¼Œä¹Ÿå°±æ„å‘³ç€ B å’Œ Cã€D å’Œ Eã€F å’Œ G æ˜¯ä¸èƒ½äº’æ¢çš„ã€‚</li>
</ul>
<p><a name="user-content-f302bdd8" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-26">äºŒå‰æ ‘çš„ç¼–ç å®ç°</h3>
<p><br/>åœ¨ JS ä¸­ï¼ŒäºŒå‰æ ‘ä½¿ç”¨å¯¹è±¡æ¥å®šä¹‰ã€‚å®ƒçš„ç»“æ„åˆ†ä¸ºä¸‰å—ï¼š<br/></p>
<ul>
<li>æ•°æ®åŸŸ</li>
<li>å·¦ä¾§å­ç»“ç‚¹ï¼ˆå·¦å­æ ‘æ ¹ç»“ç‚¹ï¼‰çš„å¼•ç”¨</li>
<li>å³ä¾§å­ç»“ç‚¹ï¼ˆå³å­æ ‘æ ¹ç»“ç‚¹ï¼‰çš„å¼•ç”¨</li>
</ul>
<p><br/>åœ¨å®šä¹‰äºŒå‰æ ‘æ„é€ å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå·¦ä¾§å­ç»“ç‚¹å’Œå³ä¾§å­ç»“ç‚¹éƒ½é¢„ç½®ä¸ºç©ºï¼š<br/></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// äºŒå‰æ ‘ç»“ç‚¹çš„æ„é€ å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">TreeNode</span>(<span class="hljs-params">val</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">val</span> = val;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">right</span> = <span class="hljs-literal">null</span>;
}
</code></pre>
<p><br/>å½“ä½ éœ€è¦æ–°å»ºä¸€ä¸ªäºŒå‰æ ‘ç»“ç‚¹æ—¶ï¼Œç›´æ¥è°ƒç”¨æ„é€ å‡½æ•°ã€ä¼ å…¥æ•°æ®åŸŸçš„å€¼å°±è¡Œäº†ï¼š<br/></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> node  = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeNode</span>(<span class="hljs-number">1</span>)
</code></pre>
<p><br/>å¦‚æ­¤ä¾¿èƒ½å¾—åˆ°ä¸€ä¸ªå€¼ä¸º 1 çš„äºŒå‰æ ‘ç»“ç‚¹ï¼Œä»ç»“æ„ä¸Šæ¥è¯´ï¼Œå®ƒé•¿è¿™æ ·ï¼š<br/> <br/><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/6/1714e6b26ae0d174~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=500&amp;h=224&amp;s=10175&amp;e=png" alt="" loading="lazy"/><br/> <br/>ä»¥è¿™ä¸ªç»“ç‚¹ä¸ºæ ¹ç»“ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»™ left/right èµ‹å€¼æ‹“å±•å…¶å­æ ‘ä¿¡æ¯ï¼Œå»¶å±•å‡ºä¸€æ£µäºŒå‰æ ‘ã€‚å› æ­¤ä»æ›´åŠ ç»†åŒ–çš„è§’åº¦æ¥çœ‹ï¼Œä¸€æ£µäºŒå‰æ ‘çš„å½¢æ€å®é™…æ˜¯è¿™æ ·çš„ï¼š<br/><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/6/1714e6b268b61522~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1150&amp;h=804&amp;s=56127&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/><br/> <br/>ç°åœ¨å„ä½å·²ç»æŒæ¡äº†åšäºŒå‰æ ‘é¢è¯•é¢˜æ‰€éœ€è¦çš„ä¸€ç³»åˆ—å‰ç½®çŸ¥è¯†ã€‚æ¥ä¸‹æ¥æˆ‘ä¼šå¸¦å¤§å®¶ä¸€èµ·é€šè¿‡å†™ä»£ç çš„æ–¹å¼ï¼Œæ¥æå®šäºŒå‰æ ‘ç³»åˆ—é‡Œæœ€é¦–å½“å…¶å†²ã€åŒæ—¶ç›¸å½“çƒ­é—¨çš„è€ƒç‚¹â€”â€”äºŒå‰æ ‘çš„éå†ã€‚</p>
<p>ï¼ˆé˜…è¯»è¿‡ç¨‹ä¸­æœ‰ä»»ä½•æƒ³æ³•æˆ–ç–‘é—®ï¼Œæˆ–è€…å•çº¯å¸Œæœ›å’Œç¬”è€…äº¤ä¸ªæœ‹å‹å•¥çš„ï¼Œæ¬¢è¿å¤§å®¶æ·»åŠ æˆ‘çš„å¾®ä¿¡xyalinodeä¸æˆ‘äº¤æµå“ˆ~ï¼‰
<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathcolor="LightPink"><mtext>ä¿å§†å¼æ•™å­¦ã®</mtext><mstyle mathcolor="Pink"><mtext>æ¸©æƒ…æç¤ºï¼š</mtext></mstyle></mstyle></mrow><annotation encoding="application/x-tex">\color{LightPink}{ä¿å§†å¼æ•™å­¦ã®}\color{Pink}{æ¸©æƒ…æç¤ºï¼š}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord" style="color:LightPink;"><span class="mord cjk_fallback" style="color:LightPink;">ä¿å§†å¼æ•™å­¦ã®</span></span><span class="mord" style="color:Pink;"><span class="mord cjk_fallback" style="color:Pink;">æ¸©æƒ…æç¤ºï¼š</span></span></span></span></span></span></p>
<p>æˆ‘ä»¬ä¹‹å‰å­¦è¿‡æ•°ç»„çš„éå†ã€é“¾è¡¨çš„éå†ï¼Œè¿™äº›çº¿æ€§ç»“æ„çš„éå†è€ƒèµ·æ¥æ²¡æœ‰ä»€ä¹ˆéš¾åº¦ï¼Œå¯ä»¥ç†è§£ä¸ºåŸºæœ¬æŠ€èƒ½ï¼Œä¸€èˆ¬ä¹Ÿä¸ä¼šå•ç‹¬å‡ºé¢˜ã€‚</p>
<p>ä½†æ˜¯äºŒå‰æ ‘å¯ä¸ä¸€æ ·äº†ï¼Œè¿™ä¸€â€œå¼€å‰â€ï¼Œå®ƒçš„éå†éš¾åº¦é™¡ç„¶ä¸Šäº†ä¸€ä¸ªå°é˜¶ã€‚åœ¨é¢è¯•ä¸­ï¼Œ<strong>äºŒå‰æ ‘çš„å„ç§å§¿åŠ¿çš„éå†ï¼Œæ˜¯éå¸¸å®¹æ˜“ä½œä¸ºç‹¬ç«‹å‘½é¢˜ç‚¹æ¥è€ƒå¯Ÿçš„</strong>ï¼Œè€Œä¸”è¿™ä¸ªè€ƒå¯Ÿçš„é¢‘ç‡æé«˜æé«˜ã€‚<br/>
å› æ­¤å¯¹äºæœ‰å¿—äºåœ¨ç®—æ³•é¢è¯•ä¸Šæ±‚ç¨³çš„åŒå­¦ï¼Œæœ¬èŠ‚æ¶‰åŠçš„ç¼–ç å†…å®¹ï¼Œä½ åƒä¸‡ä¸è¦æ²‰æººåœ¨â€œæˆ‘çœ‹æ‡‚äº†â€ã€â€œæˆ‘ç†è§£äº†â€ã€â€œæˆ‘çŸ¥é“ä½ è¯´çš„æ˜¯å•¥æ„æ€äº†â€è¿™ç§è™šæ— çš„æˆå°±æ„Ÿä¸­â€”â€”å‡çš„ï¼Œéƒ½æ˜¯å‡çš„ï¼Œåªæœ‰è‡ªå·±å†™å‡ºæ¥çš„ä»£ç æ‰æ˜¯çœŸçš„ï¼</p>
<p>ç†è§£åªæ˜¯è®°å¿†çš„å‰æï¼Œåªå¹ç†è§£ä¸è®°å¿†ï¼Œä¸å¦‚å›å®¶å»ç§åœ°ï¼šï¼‰ã€‚</p>
<p>è¿™é‡Œæˆ‘å¯¹å¤§å®¶çš„è¦æ±‚å°±æ˜¯â€œ<strong>åœ¨ç†è§£çš„åŸºç¡€ä¸Šè®°å¿†</strong>â€ã€‚å¦‚æœä½ çœŸçš„æš‚æ—¶ç†è§£ä¸äº†ï¼Œ<code>èƒŒä¹Ÿè¦å…ˆç»™ä½ è‡ªå·±èƒŒä¸‹æ¥</code>ï¼Œç„¶åå¸¦ç€å¯¹æ­£ç¡®æ€è·¯çš„è®°å¿†ï¼Œé‡æ–°å»çœ‹è§£æéƒ¨åˆ†é‡Œçš„å›¾æ–‡ï¼ˆå°¤å…¶æ˜¯å›¾ï¼‰ã€åå¤å»ç†è§£ï¼Œè¿™ä¹ˆæ•´ä¸‹æ¥ä½ ä¸å¯èƒ½å­¦ä¸ä¼šã€‚<br/>
é¢è¯•æ—¶è§åˆ°äºŒå‰æ ‘çš„éå†ï¼Œä½ ä¸èƒ½å†å»æƒ³å¤ªå¤šâ€”â€”æ²¡æœ‰é‚£ä¹ˆå¤šæ—¶é—´ç»™ä½ ç°åœºæ¨ç†ï¼Œè¿™ä¹ˆç†Ÿæ‚‰çš„é¢˜ç›®ä½ æ²¡å¿…è¦ç°åœºæ¨ç†ï¼Œä½ è¦åšçš„æ˜¯é»˜å†™ï¼é»˜å†™å•Šï¼è€å“¥ä»¬ï¼ï¼ï¼ˆæ¶èƒ¸é¡¿è¶³ï¼‰</p>
<h3 data-id="heading-27">äºŒå‰æ ‘çš„éå†â€”â€”å‘½é¢˜æ€è·¯è§£è¯»</h3>
<p>ä»¥ä¸€å®šçš„é¡ºåºè§„åˆ™ï¼Œé€ä¸ªè®¿é—®äºŒå‰æ ‘çš„æ‰€æœ‰ç»“ç‚¹ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯äºŒå‰æ ‘çš„éå†ã€‚æŒ‰ç…§é¡ºåºè§„åˆ™çš„ä¸åŒï¼Œéå†æ–¹å¼æœ‰ä»¥ä¸‹å››ç§ï¼š</p>
<ul>
<li>å…ˆåºéå†</li>
<li>ä¸­åºéå†</li>
<li>ååºéå†</li>
<li>å±‚æ¬¡éå†</li>
</ul>
<p>æŒ‰ç…§å®ç°æ–¹å¼çš„ä¸åŒï¼Œéå†æ–¹å¼åˆå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ç§ï¼š</p>
<ul>
<li>é€’å½’éå†ï¼ˆå…ˆã€ä¸­ã€ååºéå†ï¼‰</li>
<li>è¿­ä»£éå†ï¼ˆå±‚æ¬¡éå†ï¼‰</li>
</ul>
<p>å±‚æ¬¡éå†çš„è€ƒå¯Ÿç›¸å¯¹æ¯”è¾ƒå­¤ç«‹ï¼Œæˆ‘ä»¬ä¼šæŠŠå®ƒæ”¾åœ¨åç»­çš„çœŸé¢˜å½’çº³è§£è¯»ç¯èŠ‚æ¥è®²ã€‚è¿™é‡Œæˆ‘ä»¬é‡ç‚¹è¦çœ‹çš„æ˜¯å…ˆã€ä¸­ã€ååºéå†ä¸‰å…„å¼Ÿâ€”â€”ç”±äºåŒæ—¶çº ç»“äº†äºŒå‰æ ‘å’Œâ€œé€’å½’â€ä¸¤ä¸ªå¤§çƒ­å‘½é¢˜ç‚¹ï¼Œåˆä¸å±äºâ€œåéš¾æ€ªâ€ä¹‹æµï¼Œéå†ä¸‰å…„å¼Ÿä¸€ç›´æ˜¯å‰ç«¯ç®—æ³•é¢è¯•å®˜ä»¬çš„å¿ƒå¤´å¥½ï¼Œè€ƒå¯Ÿçƒ­åº¦ç»ä¹…ä¸è¡°ã€‚</p>
<h3 data-id="heading-28">é€’å½’éå†åˆç›¸è§</h3>
<blockquote>
<p>ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œå‡½æ•°Func(Type a,â€¦â€¦)ç›´æ¥æˆ–é—´æ¥è°ƒç”¨å‡½æ•°æœ¬èº«ï¼Œåˆ™è¯¥å‡½æ•°ç§°ä¸ºé€’å½’å‡½æ•°ã€‚</p>
</blockquote>
<p>ç®€å•æ¥è¯´ï¼Œå½“æˆ‘ä»¬çœ‹åˆ°ä¸€ä¸ªå‡½æ•°åå¤è°ƒç”¨å®ƒè‡ªå·±çš„æ—¶å€™ï¼Œé€’å½’å°±å‘ç”Ÿäº†ã€‚â€œé€’å½’â€å°±æ„å‘³ç€â€œåå¤â€ï¼Œåƒå’±ä»¬ä¹‹å‰å¯¹äºŒå‰æ ‘çš„å®šä¹‰ï¼Œå°±å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªé€’å½’å¼çš„å®šä¹‰ï¼š</p>
<ul>
<li>å®ƒå¯ä»¥æ²¡æœ‰æ ¹ç»“ç‚¹ï¼Œä½œä¸ºä¸€æ£µç©ºæ ‘å­˜åœ¨</li>
<li>å¦‚æœå®ƒä¸æ˜¯ç©ºæ ‘ï¼Œé‚£ä¹ˆå¿…é¡»ç”±æ ¹ç»“ç‚¹ã€å·¦å­æ ‘å’Œå³å­æ ‘ç»„æˆï¼Œ<strong>ä¸”å·¦å³å­æ ‘éƒ½æ˜¯äºŒå‰æ ‘</strong>ã€‚</li>
</ul>
<p>è¿™ä¸ªå®šä¹‰æœ‰ç€è¿™æ ·çš„å†…æ¶µï¼šå¦‚æœæˆ‘ä»¬æƒ³è¦åˆ›å»ºä¸€ä¸ªäºŒå‰æ ‘ç»“ç‚¹ä½œä¸ºæ ¹ç»“ç‚¹ï¼Œé‚£ä¹ˆå®ƒå·¦ä¾§çš„å­ç»“ç‚¹å’Œå³ä¾§çš„å­ç»“ç‚¹ä¹Ÿéƒ½å¿…é¡»ç¬¦åˆäºŒå‰æ ‘ç»“ç‚¹çš„å®šä¹‰ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬è¦åå¤åœ°æ‰§è¡Œâ€œåˆ›å»ºä¸€ä¸ªç”±æ•°æ®åŸŸã€å·¦å³å­æ ‘ç»„æˆçš„ç»“ç‚¹â€è¿™ä¸ªåŠ¨ä½œï¼Œç›´åˆ°æ•°æ®è¢«åˆ†é…å®Œä¸ºæ­¢ã€‚</p>
<p>ç»“åˆè¿™ä¸ªå®šä¹‰æ¥çœ‹ï¼Œæ¯ä¸€æ£µäºŒå‰æ ‘éƒ½åº”è¯¥ç”±è¿™ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/14/17177af5d863f478~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=674&amp;h=456&amp;s=30434&amp;e=png" alt="" loading="lazy"/>
å¯¹æ ‘çš„éå†ï¼Œå°±å¯ä»¥çœ‹åšæ˜¯å¯¹è¿™ä¸‰ä¸ªéƒ¨åˆ†çš„éå†ã€‚è¿™é‡Œå°±å¼•å‡ºä¸€ä¸ªé—®é¢˜ï¼šä¸‰ä¸ªéƒ¨åˆ†ä¸­ï¼Œåˆ°åº•å…ˆéå†å“ªä¸ªã€åéå†å“ªä¸ªå‘¢ï¼Ÿæˆ‘ä»¬æ­¤å¤„å…¶å®å¯ä»¥ç©·ä¸¾ä¸€ä¸‹ï¼Œå‡å¦‚åœ¨ä¿è¯â€œå·¦å­æ ‘ä¸€å®šå…ˆäºå³å­æ ‘éå†â€è¿™ä¸ªå‰æï¼Œé‚£ä¹ˆéå†çš„å¯èƒ½é¡ºåºä¹Ÿä¸è¿‡ä¸‰ç§ï¼š</p>
<ul>
<li>æ ¹ç»“ç‚¹ -&gt; å·¦å­æ ‘ -&gt; å³å­æ ‘</li>
<li>å·¦å­æ ‘ -&gt; æ ¹ç»“ç‚¹ -&gt; å³å­æ ‘</li>
<li>å·¦å­æ ‘ -&gt; å³å­æ ‘ -&gt; æ ¹ç»“ç‚¹</li>
</ul>
<p>ä¸Šè¿°ä¸‰ä¸ªéå†é¡ºåºï¼Œå°±åˆ†åˆ«å¯¹åº”äº†äºŒå‰æ ‘çš„å…ˆåºéå†ã€ä¸­åºéå†å’Œååºéå†è§„åˆ™ã€‚</p>
<p>åœ¨è¿™ä¸‰ç§é¡ºåºä¸­ï¼Œæ ¹ç»“ç‚¹çš„éå†åˆ†åˆ«è¢«å®‰æ’åœ¨äº†é¦–è¦ä½ç½®ã€ä¸­é—´ä½ç½®å’Œæœ€åä½ç½®ã€‚<br/>
æ‰€è°“çš„â€œå…ˆåºâ€ã€â€œä¸­åºâ€å’Œâ€œååºâ€ï¼Œâ€œå…ˆâ€ã€â€œä¸­â€ã€â€œåâ€å…¶å®å°±æ˜¯æŒ‡æ ¹ç»“ç‚¹çš„éå†æ—¶æœºã€‚</p>
<h3 data-id="heading-29">éå†æ–¹æ³•å›¾è§£ä¸ç¼–ç å®ç°</h3>
<h4 data-id="heading-30">å…ˆåºéå†</h4>
<p>å…ˆåºéå†çš„â€œæ—…è¡Œè·¯çº¿â€å¦‚ä¸‹å›¾çº¢è‰²æ•°å­—
æ‰€ç¤ºï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/14/17177aac2aee4da6~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=772&amp;h=484&amp;s=33985&amp;e=png" alt="" loading="lazy"/></p>
<p>å¦‚æœè¯´æœ‰ N å¤šä¸ªå­æ ‘ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æ¯ä¸€æ£µå­æ ‘å†…éƒ¨ï¼Œéƒ½è¦é‡å¤è¿™ä¸ªâ€œæ—…è¡Œè·¯çº¿â€ï¼ŒåŠ¨ç”»æ¼”ç¤ºå¦‚ä¸‹ï¼š
<img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/6/1714ec42acc57e04~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1553&amp;h=1010&amp;s=237869&amp;e=gif&amp;f=27" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªâ€œé‡å¤â€ï¼Œæˆ‘ä»¬å°±ç”¨é€’å½’æ¥å®ç°ã€‚</p>
<p>æ³¨ï¼šä¸Šé¢è¿™ä¸ªäºŒå‰æ ‘çš„ç»“æ„ï¼Œå¤§å®¶å¯ä»¥è¯•ç€ç”¨æˆ‘ä»¬å‰é¢å­¦è¿‡çš„çŸ¥è¯†ç¼–ç å®ç°ä¸€æŠŠã€‚è¿™é‡Œä¸ºäº†æ–¹ä¾¿å¤§å®¶ç†è§£ï¼Œæˆ‘ç›´æ¥ç»™å‡ºæ¥äº†å“ˆï¼ˆè®°å¾—è‡ªå·±å›å»ä¹Ÿè¦è¯•ç€æ‰‹å†™ä¸€éï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> root = {
  <span class="hljs-attr">val</span>: <span class="hljs-string">"A"</span>,
  <span class="hljs-attr">left</span>: {
    <span class="hljs-attr">val</span>: <span class="hljs-string">"B"</span>,
    <span class="hljs-attr">left</span>: {
      <span class="hljs-attr">val</span>: <span class="hljs-string">"D"</span>
    },
    <span class="hljs-attr">right</span>: {
      <span class="hljs-attr">val</span>: <span class="hljs-string">"E"</span>
    }
  },
  <span class="hljs-attr">right</span>: {
    <span class="hljs-attr">val</span>: <span class="hljs-string">"C"</span>,
    <span class="hljs-attr">right</span>: {
      <span class="hljs-attr">val</span>: <span class="hljs-string">"F"</span>
    }
  }
};
</code></pre>
<h5 data-id="heading-31">é€’å½’å‡½æ•°çš„ç¼–å†™è¦ç‚¹</h5>
<p>ç¼–å†™ä¸€ä¸ªé€’å½’å‡½æ•°ä¹‹å‰ï¼Œå¤§å®¶é¦–å…ˆè¦æ˜ç¡®ä¸¤æ ·ä¸œè¥¿ï¼š</p>
<ul>
<li>é€’å½’å¼</li>
<li>é€’å½’è¾¹ç•Œ</li>
</ul>
<p>é€’å½’å¼ï¼Œå®ƒæŒ‡çš„æ˜¯ä½ æ¯ä¸€æ¬¡é‡å¤çš„å†…å®¹æ˜¯ä»€ä¹ˆã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è¦åšå…ˆåºéå†ï¼Œé‚£ä¹ˆæ¯ä¸€æ¬¡é‡å¤çš„å…¶å®å°±æ˜¯ <code>æ ¹ç»“ç‚¹ -&gt; å·¦å­æ ‘ -&gt; å³å­æ ‘</code> è¿™ä¸ªæ—…è¡Œè·¯çº¿ã€‚</p>
<p>é€’å½’è¾¹ç•Œï¼Œå®ƒæŒ‡çš„æ˜¯<strong>ä½ ä»€ä¹ˆæ—¶å€™åœä¸‹æ¥</strong>ã€‚<br/>
åœ¨éå†çš„åœºæ™¯ä¸‹ï¼Œå½“æˆ‘ä»¬å‘ç°éå†çš„ç›®æ ‡æ ‘ä¸ºç©ºçš„æ—¶å€™ï¼Œå°±æ„å‘³ç€æ—…é€”å·²è¾¾ç»ˆç‚¹ã€éœ€è¦ç”»ä¸Šå¥å·äº†ã€‚è¿™ä¸ªâ€œç”»å¥å·â€çš„æ–¹å¼ï¼Œåœ¨ç¼–ç å®ç°é‡Œå¯¹åº”ç€ä¸€ä¸ª return è¯­å¥â€”â€”è¿™å°±æ˜¯äºŒå‰æ ‘éå†çš„é€’å½’è¾¹ç•Œã€‚</p>
<h5 data-id="heading-32">ç¬¬ä¸€ä¸ªé€’å½’éå†å‡½æ•°</h5>
<p>ä¸Šé¢å’±ä»¬å·²ç»æ‹æ¸…æ¥šæ€è·¯ï¼Œæ¥ä¸‹æ¥è¯ä¸å¤šè¯´ï¼Œå…ˆåºéå†çš„ç¼–ç å®ç°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ‰€æœ‰éå†å‡½æ•°çš„å…¥å‚éƒ½æ˜¯æ ‘çš„æ ¹ç»“ç‚¹å¯¹è±¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">preorder</span>(<span class="hljs-params">root</span>) {
    <span class="hljs-comment">// é€’å½’è¾¹ç•Œï¼Œroot ä¸ºç©º</span>
    <span class="hljs-keyword">if</span>(!root) {
        <span class="hljs-keyword">return</span> 
    }
     
    <span class="hljs-comment">// è¾“å‡ºå½“å‰éå†çš„ç»“ç‚¹å€¼</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š'</span>, root.<span class="hljs-property">val</span>)  
    <span class="hljs-comment">// é€’å½’éå†å·¦å­æ ‘ </span>
    <span class="hljs-title function_">preorder</span>(root.<span class="hljs-property">left</span>)  
    <span class="hljs-comment">// é€’å½’éå†å³å­æ ‘  </span>
    <span class="hljs-title function_">preorder</span>(root.<span class="hljs-property">right</span>)
}
</code></pre>
<p>ä¸ç†Ÿæ‚‰è¿™ç§å†™æ³•ï¼Ÿä¸ç”¨æ€•ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ä¸€è¡Œä¸€è¡ŒæŠŠè¿™æ®µä»£ç è·‘å®Œï¼Œä½ å°±çŸ¥é“å®ƒåœ¨å¹²å•¥äº†ï¼š</p>
<h5 data-id="heading-33">å›¾è§£å…ˆåºéå†çš„å®Œæ•´è¿‡ç¨‹</h5>
<p>å„ä½ç°åœ¨å®Œå…¨å¯ä»¥å†å›è¿‡å¤´æ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬å‰é¢ç¤ºä¾‹çš„è¿™æ£µäºŒå‰æ ‘ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/6/1714ec60340dc2db~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1098&amp;h=718&amp;s=54834&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<p>æˆ‘ä»¬ç›´æ¥æŠŠå®ƒå¥—è¿› <code>preorder</code> å‡½æ•°é‡Œï¼Œä¸€æ­¥ä¸€æ­¥æ¥è®¤æ¸…æ¥šå…ˆåºéå†çš„æ¯ä¸€æ­¥åšäº†ä»€ä¹ˆï¼š</p>
<ol>
<li>è°ƒç”¨ <code>preorder(root)</code>ï¼Œè¿™é‡Œ root å°±æ˜¯ Aï¼Œå®ƒéç©ºï¼Œæ‰€ä»¥è¿›å…¥é€’å½’å¼ï¼Œè¾“å‡º A å€¼ã€‚æ¥ç€ä¼˜å…ˆéå†å·¦å­æ ‘ï¼Œ<code>preorder(root.left)  </code> æ­¤æ—¶ä¸º <code>preorder(B)  </code>ï¼š</li>
</ol>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/15/170dcc91bf634932~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1066&amp;h=748&amp;s=56726&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/>
2. è¿›å…¥ <code>preorder(B)  </code>çš„é€»è¾‘ï¼š å…¥å‚ä¸ºç»“ç‚¹ Bï¼Œéç©ºï¼Œè¿›å…¥é€’å½’å¼ï¼Œè¾“å‡º B å€¼ã€‚æ¥ç€ä¼˜å…ˆéå† B çš„å·¦å­æ ‘ï¼Œ<code>preorder(root.left)  </code> æ­¤æ—¶ä¸º <code>preorder(D)  </code>ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/15/170dccaa644cac09~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1124&amp;h=754&amp;s=57690&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/><br/>
3. è¿›å…¥ <code>preorder(D)  </code>çš„é€»è¾‘ï¼š å…¥å‚ä¸ºç»“ç‚¹ Dï¼Œéç©ºï¼Œè¿›å…¥é€’å½’å¼ï¼Œè¾“å‡º D å€¼ã€‚æ¥ç€ä¼˜å…ˆéå† D çš„å·¦å­æ ‘ï¼Œ<code>preorder(root.left)  </code> æ­¤æ—¶ä¸º <code>preorder(null)</code>ï¼š
<img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/15/170dccbc123ee093~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1206&amp;h=878&amp;s=68891&amp;e=png" alt="" loading="lazy"/></p>
<ol start="4">
<li>è¿›å…¥<code>preorder(null) </code>ï¼Œå‘ç°æŠµè¾¾äº†é€’å½’è¾¹ç•Œï¼Œç›´æ¥ return æ‰ã€‚ç´§æ¥ç€æ˜¯ <code>preorder(D)  </code>çš„é€»è¾‘å¾€ä¸‹èµ°ï¼Œèµ°åˆ°äº† <code>preorder(root.right) </code>ï¼š</li>
</ol>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/15/170dccd42ab28ae3~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1068&amp;h=768&amp;s=64559&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/>
5. å†æ¬¡è¿›å…¥<code>preorder(null) </code>ï¼Œå‘ç°æŠµè¾¾äº†é€’å½’è¾¹ç•Œï¼Œç›´æ¥ return æ‰ï¼Œå›åˆ°<code>preorder(D)  </code>é‡Œã€‚æ¥ç€ <code>preorder(D)  </code>çš„é€»è¾‘å¾€ä¸‹èµ°ï¼Œå‘ç°  <code>preorder(D)  </code> å·²ç»æ‰§è¡Œå®Œäº†ã€‚äºæ˜¯è¿”å›ï¼Œå›åˆ°<code>preorder(B) </code>é‡Œï¼Œæ¥ç€<code>preorder(B) </code>å¾€ä¸‹èµ°ï¼Œè¿›å…¥ <code>preorder(root.right) </code>ï¼Œä¹Ÿå°±æ˜¯ <code>preorder(E) </code>ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/15/170dcd0c633202e3~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1112&amp;h=766&amp;s=57528&amp;e=png" alt="" loading="lazy"/><br/>
E ä¸ä¸ºç©ºï¼Œè¿›å…¥é€’å½’å¼ï¼Œè¾“å‡º E å€¼ã€‚æ¥ç€ä¼˜å…ˆéå† E çš„å·¦å­æ ‘ï¼Œ<code>preorder(root.left)  </code> æ­¤æ—¶ä¸º <code>preorder(null)</code>ï¼Œè§¦ç¢°é€’å½’è¾¹ç•Œï¼Œç›´æ¥è¿”å› <code>preorder(E)</code>ï¼›ç»§ç»­<code>preorder(E)</code>æ‰§è¡Œä¸‹å»ï¼Œæ˜¯<code>preorder(root.right)  </code>ï¼Œè¿™é‡Œ E çš„ right åŒæ ·æ˜¯ nullï¼Œæ•…ç›´æ¥è¿”å›ã€‚å¦‚æ­¤ä¸€æ¥ï¼Œ<code>preorder(E)</code>å°±æ‰§è¡Œå®Œäº†ï¼Œå›åˆ°<code>preorder(B)</code>é‡Œå»ï¼›å‘ç°<code>preorder(B)</code>ä¹Ÿæ‰§è¡Œå®Œäº†ï¼Œäºæ˜¯å›åˆ°<code>preorder(A)</code>é‡Œå»ï¼Œæ‰§è¡Œ<code>preorder(A)</code>ä¸­çš„ <code>preorder(root.right)</code>ã€‚</p>
<ol start="6">
<li>root æ˜¯Aï¼Œroot.right å°±æ˜¯ C äº†ï¼Œè¿›å…¥<code>preorder(C)</code>çš„é€»è¾‘ï¼š</li>
</ol>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/15/170dcd3c66015e73~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1086&amp;h=706&amp;s=55802&amp;e=png" alt="" loading="lazy"/>
C ä¸ä¸ºç©ºï¼Œè¿›å…¥é€’å½’å¼ï¼Œè¾“å‡º C å€¼ã€‚æ¥ç€ä¼˜å…ˆéå† C çš„å·¦å­æ ‘ï¼Œ<code>preorder(root.left)  </code> æ­¤æ—¶ä¸º <code>preorder(null)</code>ï¼Œè§¦ç¢°é€’å½’è¾¹ç•Œï¼Œç›´æ¥è¿”å›ã€‚ç»§ç»­<code>preorder(C)</code>æ‰§è¡Œä¸‹å»ï¼Œæ˜¯<code>preorder(root.right)  </code>ï¼Œè¿™é‡Œ C çš„ right æ˜¯ Fï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/15/170dcd5098638f06~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1156&amp;h=734&amp;s=57242&amp;e=png" alt="" loading="lazy"/>
7. è¿›å…¥<code>preorder(F)</code>çš„é€»è¾‘ï¼ŒF ä¸ä¸ºç©ºï¼Œè¿›å…¥é€’å½’å¼ï¼Œè¾“å‡º F å€¼ã€‚æ¥ç€ä¼˜å…ˆéå† F çš„å·¦å­æ ‘ï¼Œ<code>preorder(root.left)  </code> æ­¤æ—¶ä¸º <code>preorder(null)</code>ï¼Œè§¦ç¢°é€’å½’è¾¹ç•Œï¼Œç›´æ¥è¿”å› <code>preorder(F)</code>ï¼›ç»§ç»­<code>preorder(F)</code>æ‰§è¡Œä¸‹å»ï¼Œæ˜¯<code>preorder(root.right)  </code>ï¼Œè¿™é‡Œ F çš„ right åŒæ ·æ˜¯ nullï¼Œæ•…ç›´æ¥è¿”å›<code>preorder(F)</code>ã€‚æ­¤æ—¶<code>preorder(F)</code>å·²ç»æ‰§è¡Œå®Œäº†ï¼Œè¿”å›<code>preorder(C)</code>ï¼›å‘ç°<code>preorder(C)</code>ä¹Ÿæ‰§è¡Œå®Œäº†ï¼Œå°±å›åˆ° <code>preorder(A)</code>ï¼›å‘ç°<code>preorder(A)</code>ä½œä¸ºé€’å½’å…¥å£ï¼Œå®ƒçš„é€»è¾‘ä¹Ÿå·²ç»æ‰§è¡Œå®Œäº†ï¼Œäºæ˜¯æˆ‘ä»¬çš„é€’å½’æ´»åŠ¨å°±æ­£å¼ç”»ä¸Šäº†å¥å·ã€‚åˆ°æ­¤ä¸ºæ­¢ï¼Œ6ä¸ªç»“ç‚¹ä¹Ÿå·²å…¨éƒ¨æŒ‰ç…§å…ˆåºéå†é¡ºåºè¾“å‡ºï¼š</p>
<pre><code class="hljs language-js" lang="js">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š A
å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š B
å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š D
å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š E
å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š C
å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š F
</code></pre>
<h4 data-id="heading-34">ä¸­åºéå†</h4>
<p>ç†è§£äº†å…ˆåºéå†çš„è¿‡ç¨‹ï¼Œä¸­åºéå†å°±ä¸æ˜¯ä»€ä¹ˆéš¾é¢˜ã€‚å”¯ä¸€çš„åŒºåˆ«åªæ˜¯æŠŠéå†é¡ºåºè°ƒæ¢äº†å·¦å­æ ‘ -&gt; æ ¹ç»“ç‚¹ -&gt; å³å­æ ‘ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/14/17177ac5f4302ee7~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=714&amp;h=460&amp;s=32754&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/>
è‹¥æœ‰å¤šä¸ªå­æ ‘ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æ¯ä¸€æ£µå­æ ‘å†…éƒ¨ï¼Œéƒ½è¦é‡å¤è¿™ä¸ªâ€œæ—…è¡Œè·¯çº¿â€ï¼Œè¿™ä¸ªè¿‡ç¨‹ç”¨åŠ¨ç”»è¡¨ç¤ºå¦‚ä¸‹ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/6/1714f098b2bd1f9a~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=903&amp;h=558&amp;s=288516&amp;e=gif&amp;f=29" alt="" loading="lazy"/></p>
<p>é€’å½’è¾¹ç•Œç…§æ—§ï¼Œå”¯ä¸€å‘ç”Ÿæ”¹å˜çš„æ˜¯é€’å½’å¼é‡Œè°ƒç”¨é€’å½’å‡½æ•°çš„é¡ºåºâ€”â€”å·¦å­æ ‘çš„è®¿é—®ä¼šä¼˜å…ˆäºæ ¹ç»“ç‚¹ã€‚æˆ‘ä»¬å‚è€ƒå…ˆåºéå†çš„åˆ†ææ€è·¯ï¼Œæ¥å†™ä¸­åºéå†çš„ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ‰€æœ‰éå†å‡½æ•°çš„å…¥å‚éƒ½æ˜¯æ ‘çš„æ ¹ç»“ç‚¹å¯¹è±¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">inorder</span>(<span class="hljs-params">root</span>) {
    <span class="hljs-comment">// é€’å½’è¾¹ç•Œï¼Œroot ä¸ºç©º</span>
    <span class="hljs-keyword">if</span>(!root) {
        <span class="hljs-keyword">return</span> 
    }
     
    <span class="hljs-comment">// é€’å½’éå†å·¦å­æ ‘ </span>
    <span class="hljs-title function_">inorder</span>(root.<span class="hljs-property">left</span>)  
    <span class="hljs-comment">// è¾“å‡ºå½“å‰éå†çš„ç»“ç‚¹å€¼</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š'</span>, root.<span class="hljs-property">val</span>)  
    <span class="hljs-comment">// é€’å½’éå†å³å­æ ‘  </span>
    <span class="hljs-title function_">inorder</span>(root.<span class="hljs-property">right</span>)
}
</code></pre>
<p>æŒ‰ç…§ä¸­åºéå†çš„é€»è¾‘ï¼ŒåŒæ ·çš„ä¸€æ£µäºŒå‰æ ‘ï¼Œç»“ç‚¹å†…å®¹çš„è¾“å‡ºé¡ºåºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š D
å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š B
å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š E
å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š A
å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š C
å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š F
</code></pre>
<h4 data-id="heading-35">ååºéå†</h4>
<p>åœ¨ååºéå†ä¸­ï¼Œæˆ‘ä»¬å…ˆè®¿é—®å·¦å­æ ‘ï¼Œå†è®¿é—®å³å­æ ‘ï¼Œæœ€åè®¿é—®æ ¹ç»“ç‚¹ï¼š<br/>
<img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/14/17177ad1ebeef412~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=770&amp;h=484&amp;s=33874&amp;e=png" alt="" loading="lazy"/>
è‹¥æœ‰å¤šä¸ªå­æ ‘ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨æ¯ä¸€æ£µå­æ ‘å†…éƒ¨ï¼Œéƒ½è¦é‡å¤è¿™ä¸ªâ€œæ—…è¡Œè·¯çº¿â€ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/6/1714efce7db2cdff~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=911&amp;h=532&amp;s=226576&amp;e=gif&amp;f=29" alt="" loading="lazy"/>
åœ¨ç¼–ç å®ç°çš„æ—¶å€™ï¼Œé€’å½’è¾¹ç•Œç…§æ—§ï¼Œå”¯ä¸€å‘ç”Ÿæ”¹å˜çš„ä»ç„¶æ˜¯æ˜¯é€’å½’å¼é‡Œè°ƒç”¨é€’å½’å‡½æ•°çš„é¡ºåºï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">postorder</span>(<span class="hljs-params">root</span>) {
    <span class="hljs-comment">// é€’å½’è¾¹ç•Œï¼Œroot ä¸ºç©º</span>
    <span class="hljs-keyword">if</span>(!root) {
        <span class="hljs-keyword">return</span> 
    }
     
    <span class="hljs-comment">// é€’å½’éå†å·¦å­æ ‘ </span>
    <span class="hljs-title function_">postorder</span>(root.<span class="hljs-property">left</span>)  
    <span class="hljs-comment">// é€’å½’éå†å³å­æ ‘  </span>
    <span class="hljs-title function_">postorder</span>(root.<span class="hljs-property">right</span>)
    <span class="hljs-comment">// è¾“å‡ºå½“å‰éå†çš„ç»“ç‚¹å€¼</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š'</span>, root.<span class="hljs-property">val</span>)  
}
</code></pre>
<p>æŒ‰ç…§ååºéå†çš„é€»è¾‘ï¼ŒåŒæ ·çš„ä¸€æ£µäºŒå‰æ ‘ï¼Œç»“ç‚¹å†…å®¹çš„è¾“å‡ºé¡ºåºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js">å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š D
å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š E
å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š B
å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š F
å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š C
å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š A
</code></pre>
<h3 data-id="heading-36">ç»“è¯­</h3>
<p>å¯¹äºäºŒå‰æ ‘çš„å…ˆã€ä¸­ã€ååºéå†ï¼Œå„ä½åªè¦æŒæ¡äº†å…¶ä¸­ä¸€ç§çš„æ€è·¯ï¼Œå°±å¯ä»¥ä¸¾ä¸€åä¸‰ã€é¡ºåŠ¿æ¨å¯¼å…¶å®ƒä¸‰ç§æ€è·¯ã€‚ä¸è¿‡ï¼Œæˆ‘ä¸ªäººçš„å»ºè®®ï¼Œä»ç„¶æ˜¯ä»¥â€œé»˜å†™â€çš„æ ‡å‡†æ¥è¦æ±‚è‡ªå·±ï¼Œé¢è¯•æ—¶ä¸è¦æŒ‡æœ›â€œæ¨å¯¼â€ï¼Œè€Œåº”è¯¥æœ‰<strong>æ¡ä»¶åå°„</strong>ã€‚è¿™æ ·æ‰å¯ä»¥å°½é‡åœ°æé«˜ä½ åšé¢˜çš„æ•ˆç‡ï¼Œä¸ºåé¢çœŸæ­£çš„éš¾é¢˜ã€ç»¼åˆæ€§é¢˜ç›®è…¾å‡ºæ—¶é—´ã€‚</p>
<p>å…³äºäºŒå‰æ ‘éå†ç±»é¢˜ç›®çš„è®¨è®ºï¼Œè¿™é‡Œåªæ˜¯ä¸€ä¸ªå¼€å§‹ã€‚äºŒå‰æ ‘çš„å…ˆã€ä¸­ã€ååŒ…æ‹¬å±‚æ¬¡éå†çš„ç©æ³•ï¼Œè¿˜æœ‰å¾ˆå¤šå¾ˆå¤šï¼Œæˆ‘ä»¬åœ¨åç»­çš„çœŸé¢˜å½’çº³è§£è¯»ä¸“é¢˜ã€åŒ…æ‹¬æœ«å°¾çš„å¤§è§„æ¨¡åˆ·é¢˜è®­ç»ƒä¸­ï¼Œä¼šå¸¦å¤§å®¶è®¤è¯†æ›´å¤šæ–°å¥‡å¥½ç©çš„ä¸œè¥¿ã€‚</p>
<p>ï¼ˆé˜…è¯»è¿‡ç¨‹ä¸­æœ‰ä»»ä½•æƒ³æ³•æˆ–ç–‘é—®ï¼Œæˆ–è€…å•çº¯å¸Œæœ›å’Œç¬”è€…äº¤ä¸ªæœ‹å‹å•¥çš„ï¼Œæ¬¢è¿å¤§å®¶æ·»åŠ æˆ‘çš„å¾®ä¿¡xyalinodeä¸æˆ‘äº¤æµå“ˆ~ï¼‰
ç»“æŸäº†æ•°æ®ç»“æ„åŸºæœ¬åŠŸçš„å­¦ä¹ ï¼Œæ¥ä¸‹æ¥åœ¨çœŸæ­£å¼€å§‹æ’¸çœŸé¢˜ä¹‹å‰ï¼Œå¤§å®¶è¿˜éœ€è¦å…·å¤‡<strong>è¯„ä»·ç®—æ³•çš„èƒ½åŠ›</strong>ã€‚</p>
<p>å¹³æ—¶æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªäººæ˜¯å¦â€œæ‡‚è¡Œâ€ï¼Œä¸€ä¸ªé‡è¦çš„ä¾æ®å°±æ˜¯çœ‹è¿™ä¸ªäººå¯¹æŸä¸€ä¸ªäº‹ç‰©æ˜¯å¦å…·å¤‡æ­£ç¡®çš„è¯„ä»·èƒ½åŠ›ã€‚<br/>
ä¸¾ä¸ªä¾‹å­ï¼ŒåŒæ ·æ˜¯ä¹°æ‰‹æœºï¼Œå¤–è¡Œè¿›åˆ°æ‰‹æœºåº—ï¼Œä»–å…³æ³¨çš„å¯èƒ½æ˜¯æ‰‹æœºæœ‰æ²¡æœ‰è·‘é©¬ç¯ã€æœ‰æ²¡æœ‰çš®å¥—æŠ¤ä½“ã€æœ‰æ²¡æœ‰â€œå…«å¿ƒå…«ç®­â€â€”â€”è¿™äº›ä¸œè¥¿ï¼Œä»»ä½•ä¸€éƒ¨æ‰‹æœºéšä¾¿åŒ…è£…ä¸€ä¸‹å°±éƒ½æœ‰äº†ï¼Œæ ¹æœ¬æ²¡æ³•åæ˜ å‡ºè¿™å°æ‰‹æœºçš„æœ¬è´¨é—®é¢˜ã€‚ä½†å¦‚æœæ˜¯ä¸€ä¸ªç›¸å¯¹æ‡‚æ‰‹æœºçš„äººï¼Œä»–å¯èƒ½å°±ä¼šå»å…³æ³¨è¿™å°æ‰‹æœºçš„èŠ¯ç‰‡ã€å†…å­˜ã€å±å¹•æè´¨åŠåˆ†è¾¨ç‡ç­‰ç­‰ï¼Œä»è€Œå¯¹æ‰‹æœºçš„æ•´ä½“æ€§èƒ½å’Œè´¨é‡ä½œå‡ºä¸€ä¸ªåˆç†çš„åˆ¤æ–­ï¼Œè¿™æ ·ä»–ä¹°åˆ°å¥½æ‰‹æœºçš„æ¦‚ç‡å°±æ›´å¤§ã€‚</p>
<p>å›åˆ°åšç®—æ³•é¢˜ä¸Šï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„é“ç†ã€‚åœ¨é¢è¯•æ—¶ï¼Œè‡ªå·±ç»™å‡ºçš„ç®—æ³•åˆ°åº•è¿‡ä¸è¿‡å¾—å»ï¼Œè¿™ä¸€ç‚¹åœ¨é¢è¯•å®˜ç»™å‡ºè¯„è¯­ä¹‹å‰ï¼Œè‡ªå·±å°±åº”è¯¥æœ‰æ‰€æ„ŸçŸ¥ã€‚åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ æ‰ä¼šæŒæ¡æ”¹è¿›ç®—æ³•çš„ä¸»åŠ¨æƒã€‚</p>
<p>æœ¬èŠ‚æˆ‘ä»¬è¦å­¦ä¹ çš„å°±æ˜¯è¯„ä»·ç®—æ³•çš„ä¸¤ä¸ªé‡è¦ä¾æ®â€”â€”æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ã€‚</p>
<p>å¾ˆå¤šåŒå­¦ç®—æ³•å…¥é—¨ç›´æ¥å°±è·ªåœ¨å¤æ‚åº¦ç†è§£è¿™ä¸€ç¯ã€‚æ—¶é—´å¤æ‚åº¦ã€ç©ºé—´å¤æ‚åº¦ï¼Œç›´æ¥è¯»æ¦‚å¿µç¡®å®å¤ªæ— èŠï¼Œæˆ‘ä»¬æœ¬èŠ‚ä»ä»£ç å…¥æ‰‹ï¼Œå¤§å®¶çš„ç†è§£ä¼šæ›´ç›´è§‚ä¸€ç‚¹ã€‚</p>
<h3 data-id="heading-37">æ—¶é—´å¤æ‚åº¦</h3>
<p>å¤§å®¶å…ˆæ¥çœ‹è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šä¸‹é¢è¿™æ®µä»£ç ï¼Œä¸€å…±ä¼šæ‰§è¡Œå¤šå°‘æ¬¡ï¼Ÿ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">traverse</span>(<span class="hljs-params">arr</span>) {
    <span class="hljs-keyword">var</span> len = arr.<span class="hljs-property">length</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;len;i++) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr[i])
    }
}
</code></pre>
<p>é¦–å…ˆï¼Œæœ€æ²¡æœ‰æ‚¬å¿µçš„æ˜¯å‡½æ•°é‡Œçš„ç¬¬ä¸€è¡Œä»£ç ï¼Œå®ƒåªä¼šè¢«æ‰§è¡Œ1æ¬¡ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> len = arr.<span class="hljs-property">length</span>
</code></pre>
<p>å…¶æ¬¡æ²¡æœ‰æ‚¬å¿µçš„æ˜¯å¾ªç¯ä½“ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr[i])
</code></pre>
<p><code>for</code>å¾ªç¯è·‘äº† <code>n</code> æ¬¡ï¼Œå› æ­¤è¿™æ¡è¯­å¥å°±ä¼šè¢«æ‰§è¡Œ <code>n</code> æ¬¡ã€‚</p>
<p>å¾ªç¯ä½“ä¸Šé¢çš„å‡ ä¸ªéƒ¨åˆ†æˆ‘ä»¬æ‹†å¼€æ¥çœ‹ï¼Œé¦–å…ˆæ˜¯ <code>i</code> çš„åˆå§‹åŒ–è¯­å¥ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>
</code></pre>
<p>åˆå§‹åŒ–åªæœ‰1æ¬¡ï¼Œå› æ­¤å®ƒä¹Ÿåªä¼šè¢«æ‰§è¡Œ1æ¬¡ã€‚</p>
<p>æ¥ç€æ˜¯ <code>i &lt; len</code> è¿™ä¸ªåˆ¤æ–­ã€‚è¿™é‡Œæœ‰ä¸ªè§„å¾‹å¤§å®¶å¯ä»¥è®°ä¸‹ï¼šåœ¨æ‰€æœ‰çš„ <code>for</code> å¾ªç¯é‡Œï¼Œåˆ¤æ–­è¯­å¥éƒ½ä¼šæ¯”é€’å¢è¯­å¥å¤šæ‰§è¡Œä¸€æ¬¡ã€‚åœ¨è¿™é‡Œï¼Œåˆ¤æ–­è¯­å¥æ‰§è¡Œçš„æ¬¡æ•°å°±æ˜¯ <code>n+1</code>ã€‚<br/>
å†å¾€ä¸‹å°±æ˜¯é€’å¢è¯­å¥ <code>i++</code> äº†ï¼Œå®ƒè·Ÿéšæ•´ä¸ªå¾ªç¯ä½“ï¼Œæ¯«æ— ç–‘é—®ä¼šè¢«æ‰§è¡Œ <code>n</code> æ¬¡ã€‚<br/>
å‡å¦‚æŠŠæ€»çš„æ‰§è¡Œæ¬¡æ•°è®°ä¸º T(n)ï¼Œä¸‹é¢å’±ä»¬å°±å¯ä»¥æ¥åšä¸ªç®€å•çš„åŠ æ³•ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">T</span>(n) = <span class="hljs-number">1</span> + n + <span class="hljs-number">1</span> + (n+<span class="hljs-number">1</span>) + n = <span class="hljs-number">3</span>n + <span class="hljs-number">3</span>
</code></pre>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹è§„æ¨¡ä¸º <code>n*n</code> çš„äºŒç»´æ•°ç»„çš„éå†ï¼Œä¸€å…±éœ€è¦æ‰§è¡Œå¤šå°‘æ¬¡ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">traverse</span>(<span class="hljs-params">arr</span>) {
    <span class="hljs-keyword">var</span> outLen = arr.<span class="hljs-property">length</span>

    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;outLen;i++) {
        <span class="hljs-keyword">var</span> inLen = arr[i].<span class="hljs-property">length</span>

        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> j=<span class="hljs-number">0</span>;j&lt;inLen;j++) { 
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr[i][j])
        }
    }
}
</code></pre>
<p>é¦–å…ˆä»ç„¶æ˜¯æ²¡æœ‰æ‚¬å¿µçš„ç¬¬ä¸€è¡Œä»£ç ï¼Œå®ƒåªä¼šè¢«æ‰§è¡Œä¸€æ¬¡ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> outLen = arr.<span class="hljs-property">length</span>
</code></pre>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹æœ€å†…å±‚çš„å¾ªç¯ä½“ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr[i][j])
</code></pre>
<p>å› ä¸ºå’±ä»¬æ˜¯ä¸¤å±‚å¾ªç¯ï¼Œæ‰€ä»¥è¿™è´§ä¼šè¢«æ‰§è¡Œ <code>n*n = n^2</code> æ¬¡ã€‚<br/>
å…¶å®ƒè¯­å¥çš„è®¡ç®—æ€è·¯å’Œå’±ä»¬ç¬¬ä¸€ä¸ªğŸŒ°åŒºåˆ«ä¸å¤§ï¼Œè¿™é‡Œæˆ‘å°±ä¸é‡å¤è®²äº†ï¼Œç›´æ¥ç»™å‡ºå¤§å®¶ç­”æ¡ˆï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/6/1714f38044f931dd~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=932&amp;h=676&amp;s=97339&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<p>ç»§ç»­æ¥åšä¸ªæ±‚æ€»æ‰§è¡Œæ¬¡æ•° T(n) çš„åŠ æ³•çœ‹çœ‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">T</span>(n) = <span class="hljs-number">1</span> + <span class="hljs-number">1</span> + (n+<span class="hljs-number">1</span>) + n + n + n + n*(n+<span class="hljs-number">1</span>) + n*n + n*n = <span class="hljs-number">3n</span>^<span class="hljs-number">2</span> + <span class="hljs-number">5n</span> + <span class="hljs-number">3</span>
</code></pre>
<p>ä»£ç çš„æ‰§è¡Œæ¬¡æ•°ï¼Œå¯ä»¥åæ˜ å‡ºä»£ç çš„æ‰§è¡Œæ—¶é—´ã€‚ä½†æ˜¯å¦‚æœæ¯æ¬¡æˆ‘ä»¬éƒ½é€è¡Œå»è®¡ç®— T(n)ï¼Œäº‹æƒ…ä¼šå˜å¾—éå¸¸éº»çƒ¦ã€‚ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ï¼Œå®ƒåæ˜ çš„ä¸æ˜¯ç®—æ³•çš„é€»è¾‘ä»£ç åˆ°åº•è¢«æ‰§è¡Œäº†å¤šå°‘æ¬¡ï¼Œè€Œæ˜¯éšç€è¾“å…¥è§„æ¨¡çš„å¢å¤§ï¼Œç®—æ³•å¯¹åº”çš„æ‰§è¡Œæ€»æ¬¡æ•°çš„ä¸€ä¸ª<strong>å˜åŒ–è¶‹åŠ¿</strong>ã€‚è¦æƒ³åæ˜ è¶‹åŠ¿ï¼Œé‚£å°±ç®€å•å¤šäº†ï¼Œç›´æ¥æŠ“ä¸»è¦çŸ›ç›¾å°±è¡Œã€‚æˆ‘ä»¬å¯ä»¥å°è¯•å¯¹ T(n) åšå¦‚ä¸‹å¤„ç†ï¼š</p>
<ul>
<li>è‹¥ T(n) æ˜¯å¸¸æ•°ï¼Œé‚£ä¹ˆæ— è„‘ç®€åŒ–ä¸º1</li>
<li>è‹¥ T(n) æ˜¯å¤šé¡¹å¼ï¼Œæ¯”å¦‚ 3n^2 + 5n + 3ï¼Œæˆ‘ä»¬åªä¿ç•™æ¬¡æ•°æœ€é«˜é‚£ä¸€é¡¹ï¼Œå¹¶ä¸”å°†å…¶å¸¸æ•°ç³»æ•°æ— è„‘æ”¹ä¸º1ã€‚</li>
</ul>
<p>ç»è¿‡è¿™ä¹ˆä¸€æ³¢æ“ä½œï¼ŒT(n) å°±è¢«ç®€åŒ–ä¸ºäº† O(n)ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">T</span>(n) = <span class="hljs-number">10</span>  
<span class="hljs-built_in">O</span>(n) = <span class="hljs-number">1</span>
</code></pre>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">T</span>(n) = <span class="hljs-number">3</span>n^<span class="hljs-number">2</span> + <span class="hljs-number">5</span>n + <span class="hljs-number">3</span>
<span class="hljs-built_in">O</span>(n) = n^<span class="hljs-number">2</span>
</code></pre>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ€è·¯ä»ç„¶æ˜¯ <code>è®¡ç®—T(n) -&gt; æ¨å¯¼O(n)</code>ã€‚è¿™ä¹ˆè®²æ˜¯ä¸ºäº†æ–¹ä¾¿å¤§å®¶ç†è§£ O(n) çš„ç®€åŒ–è¿‡ç¨‹ï¼Œå®é™…æ“ä½œä¸­ï¼ŒO(n) åŸºæœ¬å¯ä»¥ç›®æµ‹ï¼Œæ¯”å¦‚å’±ä»¬ä¸Šé¢çš„ä¸¤ä¸ªéå†å‡½æ•°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">traverse1</span>(<span class="hljs-params">arr</span>) {
    <span class="hljs-keyword">var</span> len = arr.<span class="hljs-property">length</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;len;i++) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr[i])
    }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">traverse2</span>(<span class="hljs-params">arr</span>) {
    <span class="hljs-keyword">var</span> outLen = arr.<span class="hljs-property">length</span>

    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;outLen;i++) {
        <span class="hljs-keyword">var</span> inLen = arr[i].<span class="hljs-property">length</span>

        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> j=<span class="hljs-number">0</span>;j&lt;inLen;j++) { 
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr[i][j])
        }
    }
}
</code></pre>
<p>éå† N ç»´æ•°ç»„ï¼Œéœ€è¦ N å±‚å¾ªç¯ï¼Œæˆ‘ä»¬åªéœ€è¦å…³å¿ƒå…¶æœ€å†…å±‚é‚£ä¸ªå¾ªç¯ä½“è¢«æ‰§è¡Œå¤šå°‘æ¬¡å°±è¡Œäº†ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œè§„æ¨¡ä¸º <code>n</code> çš„ä¸€ç»´æ•°ç»„éå†æ—¶ï¼Œæœ€å†…å±‚çš„å¾ªç¯ä¼šæ‰§è¡Œ <code>n</code> æ¬¡ï¼Œå…¶å¯¹åº”çš„æ—¶é—´å¤æ‚åº¦æ˜¯ <code>O(n)</code>ï¼›è§„æ¨¡ä¸º <code>n*n</code> çš„äºŒç»´æ•°ç»„éå†æ—¶ï¼Œæœ€å†…å±‚çš„å¾ªç¯ä¼šæ‰§è¡Œ <code>n*n</code> æ¬¡ï¼Œå…¶å¯¹åº”çš„æ—¶é—´å¤æ‚åº¦æ˜¯ <code>O(n^2)</code>ã€‚</p>
<p>ä»¥æ­¤ç±»æ¨ï¼Œè§„æ¨¡ä¸º <code>n*m</code> çš„äºŒç»´æ•°ç»„æœ€å†…å±‚å¾ªç¯ä¼šæ‰§è¡Œ <code>n*m</code> æ¬¡ï¼Œå…¶å¯¹åº”çš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ <code>O(n*m)</code>ï¼›è§„æ¨¡ä¸º <code>n*n*n</code> çš„ä¸‰ç»´æ•°ç»„æœ€å†…å±‚å¾ªç¯ä¼šæ‰§è¡Œ <code>n^3</code> æ¬¡ï¼Œå› æ­¤å…¶å¯¹åº”çš„æ—¶é—´å¤æ‚åº¦å°±è¡¨ç¤ºä¸º <code>O(n^3)</code>ã€‚</p>
<p>å¸¸è§çš„æ—¶é—´å¤æ‚åº¦è¡¨è¾¾ï¼Œé™¤äº†å¤šé¡¹å¼ä»¥å¤–ï¼Œè¿˜æœ‰<code>logn</code>ã€‚æˆ‘ä»¬ä¸€èµ·æ¥çœ‹å¦ä¸€ä¸ªç®—æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">arr</span>) {
    <span class="hljs-keyword">var</span> len = arr.<span class="hljs-property">length</span>  
    
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">1</span>;i&lt;len;i=i*<span class="hljs-number">2</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr[i])
    }
}
</code></pre>
<p>è¿™ä¸ªç®—æ³•è¯»å–ä¸€ä¸ªä¸€ç»´æ•°ç»„ä½œä¸ºå…¥å‚ï¼Œç„¶åå¯¹å…¶ä¸­çš„å…ƒç´ è¿›è¡Œè·³è·ƒå¼çš„è¾“å‡ºã€‚è¿™ä¸ªè·³è·ƒçš„è§„åˆ™ï¼Œå°±æ˜¯æ•°ç»„ä¸‹æ ‡ä»1å¼€å§‹ï¼Œæ¯æ¬¡ä¼šä¹˜ä»¥äºŒã€‚</p>
<p>å¦‚ä½•è®¡ç®—è¿™ä¸ªå‡½æ•°çš„æ—¶é—´å¤æ‚åº¦å‘¢ï¼Ÿåœ¨æœ‰å¾ªç¯çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å…³å¿ƒçš„æ°¸è¿œæ˜¯æœ€å†…å±‚çš„å¾ªç¯ä½“ã€‚è¿™ä¸ªç®—æ³•ä¸­ï¼Œæˆ‘ä»¬å…³å¿ƒçš„å°±æ˜¯ <code>console.log(arr[i])</code> åˆ°åº•è¢«æ‰§è¡Œäº†å‡ æ¬¡ï¼Œæ¢å¥è¯è¯´ï¼Œä¹Ÿå°±æ˜¯è¦çŸ¥é“ <code>i&lt;n</code>ï¼ˆ len === nï¼‰ è¿™ä¸ªæ¡ä»¶æ˜¯åœ¨ <code>i</code> é€’å¢å¤šå°‘æ¬¡åæ‰ä¸æˆç«‹çš„ã€‚</p>
<p>å‡è®¾ <code>i</code> åœ¨ä»¥ <code>i=i*2</code>çš„è§„åˆ™é€’å¢äº† <code>x</code> æ¬¡ä¹‹åï¼Œ<code>i&lt;n</code> å¼€å§‹ä¸æˆç«‹ï¼ˆåè¿‡æ¥è¯´ä¹Ÿå°±æ˜¯ <code>i&gt;=n</code> æˆç«‹ï¼‰ã€‚é‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬è¦è®¡ç®—çš„å…¶å®å°±æ˜¯è¿™æ ·ä¸€ä¸ªæ•°å­¦æ–¹ç¨‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-number">2</span>^x &gt;= n
</code></pre>
<p><code>x</code>è§£å‡ºæ¥ï¼Œå°±æ˜¯è¦å¤§äºç­‰äºä»¥ 2 ä¸ºåº•æ•°çš„ <code>n</code> çš„å¯¹æ•°ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/6/1714f5c2b41495c3~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=366&amp;h=162&amp;s=9127&amp;e=png" alt="" loading="lazy"/></p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåªæœ‰å½“ <code>x</code> å°äº <code>log2n</code> çš„æ—¶å€™ï¼Œå¾ªç¯æ‰æ˜¯æˆç«‹çš„ã€å¾ªç¯ä½“æ‰èƒ½æ‰§è¡Œã€‚æ³¨æ„æ¶‰åŠåˆ°å¯¹æ•°çš„æ—¶é—´å¤æ‚åº¦ï¼Œåº•æ•°å’Œç³»æ•°éƒ½æ˜¯è¦è¢«ç®€åŒ–æ‰çš„ã€‚é‚£ä¹ˆè¿™é‡Œçš„ O(n) å°±å¯ä»¥è¡¨ç¤ºä¸ºï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">O</span>(n) = logn
</code></pre>
<p>æ²¡é”™ï¼Œè¿™æ—¶çš„ä¸»è¦çŸ›ç›¾ï¼Œå°±å˜æˆäº†ä¸€ä¸ªå¯¹æ•°è¡¨è¾¾å¼ã€‚</p>
<p>å…³äºå¸¸è§çš„æ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬ä¼šåœ¨åé¢è®²åˆ°å…·ä½“çŸ¥è¯†ç‚¹ï¼ˆå°¤å…¶æ˜¯æ’åºç®—æ³•ï¼‰æ—¶ï¼Œç»“åˆå®ä¾‹æ¥ç»™å¤§å®¶åšåˆ†æã€‚è¿™é‡Œå¤§å®¶é¦–å…ˆè¦è®¤è¯†ä¸€ä¸‹å¸¸è§æ—¶é—´å¤æ‚åº¦æœ‰å“ªäº›ï¼Œå¹¶ä¸”å¯¹è¿™äº›å¸¸è§æ—¶é—´å¤æ‚åº¦ä¹‹é—´çš„å¤§å°å…³ç³»åšä¸ªæŠŠæ¡ã€‚<br/>
å¸¸è§çš„æ—¶é—´å¤æ‚åº¦æŒ‰ç…§ä»å°åˆ°å¤§çš„é¡ºåºæ’åˆ—ï¼Œæœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/6/1714f67c52dc8d15~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1148&amp;h=414&amp;s=35829&amp;e=png" alt="" loading="lazy"/></p>
<h3 data-id="heading-38">ç©ºé—´å¤æ‚åº¦</h3>
<p>ç©ºé—´å¤æ‚åº¦æ˜¯å¯¹ä¸€ä¸ªç®—æ³•åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶å ç”¨å­˜å‚¨ç©ºé—´å¤§å°çš„é‡åº¦ã€‚å’Œæ—¶é—´å¤æ‚åº¦ç›¸ä¼¼ï¼Œå®ƒæ˜¯å†…å­˜å¢é•¿çš„<strong>è¶‹åŠ¿</strong>ã€‚<br/>
å¸¸è§çš„ç©ºé—´å¤æ‚åº¦æœ‰ <code>O(1)</code>ã€<code>O(n)</code> å’Œ <code>O(n^2)</code>ã€‚</p>
<p>ç†è§£ç©ºé—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬ç…§æ ·æ¥çœ‹ä¸€ä¸ªğŸŒ°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">traverse</span>(<span class="hljs-params">arr</span>) {
    <span class="hljs-keyword">var</span> len = arr.<span class="hljs-property">length</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;len;i++) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr[i])
    }
}
</code></pre>
<p>åœ¨ <code>traverse</code> ä¸­ï¼Œå ç”¨ç©ºé—´çš„æœ‰ä»¥ä¸‹å˜é‡ï¼š</p>
<pre><code class="hljs language-js" lang="js">arr    
len   
i    
</code></pre>
<p>åé¢å°½ç®¡å’±ä»¬åšäº†å¾ˆå¤šæ¬¡å¾ªç¯ï¼Œä½†æ˜¯è¿™äº›éƒ½æ˜¯æ—¶é—´ä¸Šçš„å¼€é”€ã€‚å¾ªç¯ä½“åœ¨æ‰§è¡Œæ—¶ï¼Œå¹¶æ²¡æœ‰å¼€è¾Ÿæ–°çš„å†…å­˜ç©ºé—´ã€‚å› æ­¤ï¼Œæ•´ä¸ª <code>traverse</code> å‡½æ•°å¯¹å†…å­˜çš„å ç”¨é‡æ˜¯æ’å®šçš„ï¼Œå®ƒå¯¹åº”çš„ç©ºé—´å¤æ‚åº¦å°±æ˜¯ <code>O(1)</code>ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹å¦ä¸€ä¸ªğŸŒ°ï¼Œæ­¤æ—¶æˆ‘æƒ³è¦åˆå§‹åŒ–ä¸€ä¸ªè§„æ¨¡ä¸º n çš„æ•°ç»„ï¼Œå¹¶ä¸”è¦æ±‚è¿™ä¸ªæ•°ç»„çš„æ¯ä¸ªå…ƒç´ çš„å€¼ä¸å…¶ç´¢å¼•å§‹ç»ˆæ˜¯ç›¸ç­‰å…³ç³»ï¼Œæˆ‘å¯ä»¥è¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params">n</span>) {
    <span class="hljs-keyword">var</span> arr = []
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;i&lt;n;i++) {
        arr[i] = i
    }
    <span class="hljs-keyword">return</span> arr
}
</code></pre>
<p>åœ¨è¿™ä¸ª <code>init</code> ä¸­ï¼Œæ¶‰åŠåˆ°çš„å ç”¨å†…å­˜çš„å˜é‡æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p>
<pre><code class="hljs language-js" lang="js">n 
arr
i
</code></pre>
<p>æ³¨æ„è¿™é‡Œè¿™ä¸ª <code>arr</code>ï¼Œå®ƒå¹¶ä¸æ˜¯ä¸€ä¸ªä¸€æˆä¸å˜çš„æ•°ç»„ã€‚<code>arr</code>æœ€ç»ˆçš„å¤§å°æ˜¯ç”±è¾“å…¥çš„ <code>n</code> çš„å¤§å°å†³å®šçš„ï¼Œå®ƒä¼šéšç€ <code>n</code> çš„å¢å¤§è€Œå¢å¤§ã€å‘ˆä¸€ä¸ªçº¿æ€§å…³ç³»ã€‚å› æ­¤è¿™ä¸ªç®—æ³•çš„ç©ºé—´å¤æ‚åº¦å°±æ˜¯ <code>O(n)</code>ã€‚<br/>
ç”±æ­¤æˆ‘ä»¬ä¸éš¾æƒ³è±¡ï¼Œå‡å¦‚éœ€è¦åˆå§‹åŒ–çš„æ˜¯ä¸€ä¸ªè§„æ¨¡ä¸º <code>n*n</code> çš„æ•°ç»„ï¼Œé‚£ä¹ˆå®ƒçš„ç©ºé—´å¤æ‚åº¦å°±æ˜¯ <code>O(n^2)</code> å•¦ã€‚</p>
<h3 data-id="heading-39">å°ç»“</h3>
<p>ç»“æŸäº†æœ¬èŠ‚çš„å­¦ä¹ ï¼Œç›¸ä¿¡å„ä½å¯¹æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦éƒ½æœ‰äº†ä¸€ä¸ªæ„Ÿæ€§çš„è®¤çŸ¥å’Œåˆæ­¥çš„äº†è§£ã€‚åœ¨åç»­çš„å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬ä¼šåœ¨å¿…è¦çš„æ—¶å€™ç»§ç»­ä¸ºå¤§å®¶æç‚¹çœŸé¢˜ä¸­çš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦ï¼Œå¸¦é¢†å¤§å®¶åœ¨å®æˆ˜ä¸­å¼ºåŒ–å¯¹ç†è®ºæ¦‚å¿µçš„è®¤çŸ¥ã€‚</p>
<p>ï¼ˆé˜…è¯»è¿‡ç¨‹ä¸­æœ‰ä»»ä½•æƒ³æ³•æˆ–ç–‘é—®ï¼Œæˆ–è€…å•çº¯å¸Œæœ›å’Œç¬”è€…äº¤ä¸ªæœ‹å‹å•¥çš„ï¼Œæ¬¢è¿å¤§å®¶æ·»åŠ æˆ‘çš„å¾®ä¿¡xyalinodeä¸æˆ‘äº¤æµå“ˆ~ï¼‰
æˆ‘ä»¬ç°åœ¨è¦å¼€å§‹åšé¢˜å•¦ï¼</p>
<p>ä¸‡é‡Œé•¿å¾ç¬¬ä¸€æ­¥ï¼Œä»ç„¶æ˜¯æ•°ç»„ã€‚<br/>
å•çº¯é’ˆå¯¹æ•°ç»„æ¥è€ƒå¯Ÿçš„é¢˜ç›®ï¼Œæ€»ä½“æ¥è¯´ï¼Œéƒ½ä¸ç®—å¤ªéš¾â€”â€”æ•°ç»„é¢˜ç›®è¦æƒ³å¾€éš¾äº†å‡ºï¼ŒåŸºæœ¬éƒ½è¦ç»“åˆæ’åºã€äºŒåˆ†å’ŒåŠ¨æ€è§„åˆ’è¿™äº›ç›¸å¯¹å¤æ‚çš„ç®—æ³•æ€æƒ³æ‰è¡Œã€‚</p>
<p>å’±ä»¬æœ¬èŠ‚è¦è§£å†³çš„æ­£æ˜¯è¿™ä¸€ç±»â€œä¸ç®—å¤ªéš¾â€çš„æ•°ç»„é¢˜ç›®â€”â€”å¹¶ä¸æ˜¯åªæœ‰éš¾é¢˜æ‰æ‹¥æœ‰æˆä¸ºçœŸé¢˜çš„å…¥åœºåˆ¸ï¼Œä¸€é“å¥½é¢˜ä¸ä¸€å®šä¼šéš¾ï¼Œå®ƒåªè¦èƒ½å¤Ÿåæ˜ é—®é¢˜å°±å¯ä»¥äº†ã€‚<br/>
æœ¬èŠ‚æ‰€æ¶‰åŠçš„é¢˜ç›®åœ¨é¢è¯•ä¸­æ™®éå…·æœ‰è¾ƒé«˜çš„å‡ºé•œç‡ã€åŒæ—¶å…¼å…·ä¸€å®šçš„ç»¼åˆæ€§ï¼Œå¯¹åŸ¹å…»å¤§å®¶çš„é€šç”¨è§£é¢˜èƒ½åŠ›å¤§æœ‰è£¨ç›Š ã€‚<br/>
ç›¸ä¿¡è¿™èŠ‚ä½ ä¼šå­¦å¾—å¾ˆå¼€å¿ƒï¼Œåœ¨è½»æ¾ä¸­æ”¶è·è‡ªå·±çš„ç¬¬ä¸€ä»½ç®—æ³•è§£é¢˜é”¦å›Šã€‚</p>
<h3 data-id="heading-40">Map çš„å¦™ç”¨â€”â€”ä¸¤æ•°æ±‚å’Œé—®é¢˜</h3>
<blockquote>
<p>çœŸé¢˜æè¿°ï¼š ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡ºå’Œä¸ºç›®æ ‡å€¼çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›ä»–ä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚<br/>
ä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œä½ ä¸èƒ½é‡å¤åˆ©ç”¨è¿™ä¸ªæ•°ç»„ä¸­åŒæ ·çš„å…ƒç´ ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹:
ç»™å®š nums = [2, 7, 11, 15], target = 9<br/>
å› ä¸º nums[0] + nums[1] = 2 + 7 = 9
æ‰€ä»¥è¿”å› [0, 1]</p>
</blockquote>
<h4 data-id="heading-41">æ€è·¯åˆ†æï¼š</h4>
<h5 data-id="heading-42">ä¸€ä¸ªâ€œæ·³æœ´â€çš„è§£æ³•</h5>
<p>è¿™é“é¢˜ç›¸ä¿¡å¾ˆå¤šåŒå­¦çœ‹ä¸€çœ¼å°±å¾ˆå¿«èƒ½å¾—å‡ºä¸€ä¸ªæœ€åŸºæœ¬çš„æ€è·¯ï¼šä¸¤å±‚å¾ªç¯æ¥éå†åŒä¸€ä¸ªæ•°ç»„ï¼›ç¬¬ä¸€å±‚å¾ªç¯éå†çš„å€¼è®°ä¸º aï¼Œç¬¬äºŒå±‚å¾ªç¯æ—¶éå†çš„å€¼è®°ä¸º bï¼›è‹¥ <code>a+b = ç›®æ ‡å€¼</code>ï¼Œé‚£ä¹ˆ a å’Œ b å¯¹åº”çš„æ•°ç»„ä¸‹æ ‡å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç­”æ¡ˆã€‚</p>
<h5 data-id="heading-43">å¯¹â€œæ·³æœ´â€è§£æ³•çš„åæ€</h5>
<p>å¤§å®¶ä»¥ååšç®—æ³•é¢˜çš„æ—¶å€™ï¼Œè¦æœ‰è¿™æ ·çš„ä¸€ç§æœ¬èƒ½ï¼šå½“å‘ç°è‡ªå·±çš„ä»£ç é‡Œæœ‰ä¸¤å±‚å¾ªç¯æ—¶ï¼Œå…ˆåæ€ä¸€ä¸‹ï¼Œèƒ½ä¸èƒ½ç”¨ç©ºé—´æ¢æ—¶é—´ï¼ŒæŠŠå®ƒä¼˜åŒ–æˆä¸€å±‚å¾ªç¯ã€‚</p>
<p>å› ä¸ºä¸¤å±‚å¾ªç¯å¾ˆå¤šæƒ…å†µä¸‹éƒ½æ„å‘³ç€ O(n^2) çš„å¤æ‚åº¦ï¼Œè¿™ä¸ªå¤æ‚åº¦éå¸¸å®¹æ˜“å¯¼è‡´ä½ çš„ç®—æ³•è¶…æ—¶ã€‚å³ä¾¿æ²¡æœ‰è¶…æ—¶ï¼Œåœ¨æ˜æ˜æœ‰ä¸€å±‚éå†è§£æ³•çš„æƒ…å†µä¸‹ï¼Œä½ å†™äº†ä¸¤å±‚éå†ï¼Œé¢è¯•å®˜å¯¹ä½ çš„å°è±¡åˆ†ä¼šå¤§æ‰“æŠ˜æ‰£ã€‚</p>
<h5 data-id="heading-44">ç©ºé—´æ¢æ—¶é—´ï¼ŒMap æ¥å¸®å¿™</h5>
<p>æ‹¿æˆ‘ä»¬è¿™é“é¢˜æ¥è¯´ï¼Œå…¶å®äºŒå±‚éå†æ˜¯å®Œå…¨ä¸å¿…è¦çš„ã€‚<br/>
å¤§å®¶è®°ä½ä¸€ä¸ªç»“è®ºï¼šå‡ ä¹æ‰€æœ‰çš„æ±‚å’Œé—®é¢˜ï¼Œéƒ½å¯ä»¥è½¬åŒ–ä¸º<strong>æ±‚å·®é—®é¢˜</strong>ã€‚
è¿™é“é¢˜å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ï¼Œé€šè¿‡æŠŠæ±‚å’Œé—®é¢˜è½¬åŒ–ä¸ºæ±‚å·®é—®é¢˜ï¼Œäº‹æƒ…ä¼šå˜å¾—æ›´åŠ ç®€å•ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨éå†æ•°ç»„çš„è¿‡ç¨‹ä¸­ï¼Œå¢åŠ ä¸€ä¸ª Map æ¥è®°å½•å·²ç»éå†è¿‡çš„æ•°å­—åŠå…¶å¯¹åº”çš„ç´¢å¼•å€¼ã€‚ç„¶åæ¯éå†åˆ°ä¸€ä¸ªæ–°æ•°å­—çš„æ—¶å€™ï¼Œéƒ½å›åˆ° Map é‡Œå»æŸ¥è¯¢ targetNum ä¸è¯¥æ•°çš„<strong>å·®å€¼</strong>æ˜¯å¦å·²ç»åœ¨å‰é¢çš„æ•°å­—ä¸­å‡ºç°è¿‡äº†ã€‚è‹¥å‡ºç°è¿‡ï¼Œé‚£ä¹ˆç­”æ¡ˆå·²ç„¶æ˜¾ç°ï¼Œæˆ‘ä»¬å°±ä¸å¿…å†å¾€ä¸‹èµ°äº†ã€‚</p>
<p>æˆ‘ä»¬ä»¥ <code>nums = [2, 7, 11, 15]</code> è¿™ä¸ªæ•°ç»„ä¸ºä¾‹ï¼Œæ¥æ¨¡æ‹Ÿä¸€ä¸‹è¿™ä¸ªæ€è·¯ï¼š<br/>
ç¬¬ä¸€æ¬¡éå†åˆ° 2ï¼Œæ­¤æ—¶ Map ä¸ºç©ºï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/16/171815ed07055b8d~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=792&amp;h=472&amp;s=16503&amp;e=png" alt="" loading="lazy"/></p>
<p>ä»¥ 2 ä¸º keyï¼Œç´¢å¼• 0 ä¸º value ä½œå­˜å‚¨ï¼Œç»§ç»­å¾€ä¸‹èµ°ï¼›é‡åˆ°äº† 7ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/16/171815d7f14b9ce0~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=736&amp;h=416&amp;s=16273&amp;e=png" alt="" loading="lazy"/></p>
<p>è®¡ç®— targetNum å’Œ 7 çš„å·®å€¼ä¸º2ï¼Œå» Map ä¸­æ£€ç´¢ 2 è¿™ä¸ª keyï¼Œå‘ç°æ˜¯ä¹‹å‰å‡ºç°è¿‡çš„å€¼ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/16/171815cf9cc83f3f~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=696&amp;h=460&amp;s=20589&amp;e=png" alt="" loading="lazy"/>
é‚£ä¹ˆ 2 å’Œ 7 çš„ç´¢å¼•ç»„åˆå°±æ˜¯è¿™é“é¢˜çš„ç­”æ¡ˆå•¦ã€‚<br/>
é”®å€¼å¯¹å­˜å‚¨æˆ‘ä»¬å¯ä»¥ç”¨ ES6 é‡Œçš„ Map æ¥åšï¼Œå¦‚æœå›¾çœäº‹ï¼Œç›´æ¥ç”¨å¯¹è±¡å­—é¢é‡æ¥å®šä¹‰ä¹Ÿæ²¡ä»€ä¹ˆé—®é¢˜ã€‚</p>
<h5 data-id="heading-45">ç¼–ç å®ç°</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums</span>
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">target</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number[]</span>}
 */</span>
<span class="hljs-keyword">const</span> twoSum = <span class="hljs-keyword">function</span>(<span class="hljs-params">nums, target</span>) {
    <span class="hljs-comment">// è¿™é‡Œæˆ‘ç”¨å¯¹è±¡æ¥æ¨¡æ‹Ÿ map çš„èƒ½åŠ›</span>
    <span class="hljs-keyword">const</span> diffs = {}
    <span class="hljs-comment">// ç¼“å­˜æ•°ç»„é•¿åº¦</span>
    <span class="hljs-keyword">const</span> len = nums.<span class="hljs-property">length</span>
    <span class="hljs-comment">// éå†æ•°ç»„</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;len;i++) {
        <span class="hljs-comment">// åˆ¤æ–­å½“å‰å€¼å¯¹åº”çš„ target å·®å€¼æ˜¯å¦å­˜åœ¨ï¼ˆæ˜¯å¦å·²éå†è¿‡ï¼‰</span>
        <span class="hljs-keyword">if</span>(diffs[target-nums[i]]!==<span class="hljs-literal">undefined</span>) {
            <span class="hljs-comment">// è‹¥æœ‰å¯¹åº”å·®å€¼ï¼Œé‚£ä¹ˆç­”æ¡ˆgetï¼</span>
            <span class="hljs-keyword">return</span> [diffs[target - nums[i]], i]
        }
        <span class="hljs-comment">// è‹¥æ²¡æœ‰å¯¹åº”å·®å€¼ï¼Œåˆ™è®°å½•å½“å‰å€¼</span>
        diffs[nums[i]]=i
    }
};
</code></pre>
<p>tipsï¼šè¿™é“é¢˜ä¹Ÿå¯ä»¥ç”¨ ES6 ä¸­çš„ Map æ¥åšï¼Œä½ è¯•è¯•å‘¢ï¼Ÿ</p>
<h3 data-id="heading-46">å¼ºå¤§çš„åŒæŒ‡é’ˆæ³•</h3>
<h4 data-id="heading-47">åˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„</h4>
<blockquote>
<p>çœŸé¢˜æè¿°ï¼šç»™ä½ ä¸¤ä¸ªæœ‰åºæ•´æ•°æ•°ç»„Â nums1 å’Œ nums2ï¼Œè¯·ä½ å°† nums2 åˆå¹¶åˆ°Â nums1Â ä¸­ï¼Œä½¿ nums1 æˆä¸ºä¸€ä¸ªæœ‰åºæ•°ç»„ã€‚<br/>
è¯´æ˜: åˆå§‹åŒ–Â nums1 å’Œ nums2 çš„å…ƒç´ æ•°é‡åˆ†åˆ«ä¸ºÂ m å’Œ n ã€‚
ä½ å¯ä»¥å‡è®¾Â nums1Â æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼ˆç©ºé—´å¤§å°å¤§äºæˆ–ç­‰äºÂ m + nï¼‰æ¥ä¿å­˜ nums2 ä¸­çš„å…ƒç´ ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹:
è¾“å…¥:<br/>
nums1 = [1,2,3,0,0,0], m = 3<br/>
nums2 = [2,5,6],       n = 3<br/>
è¾“å‡º:Â [1,2,2,3,5,6]</p>
</blockquote>
<h4 data-id="heading-48">æ€è·¯åˆ†æ</h4>
<h5 data-id="heading-49">æ ‡å‡†è§£æ³•</h5>
<p>è¿™é“é¢˜æ²¡æœ‰å¤ªå¤šçš„å¼¯å¼¯ç»•ç»•ï¼Œæ ‡å‡†è§£æ³•å°±æ˜¯åŒæŒ‡é’ˆæ³•ã€‚é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œå„æŒ‡å‘ä¸¤ä¸ªæ•°ç»„ç”Ÿæ•ˆéƒ¨åˆ†çš„å°¾éƒ¨ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/15/170ddde2f653cce0~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=954&amp;h=634&amp;s=22043&amp;e=png" alt="" loading="lazy"/></p>
<p><strong>æ¯æ¬¡åªå¯¹æŒ‡é’ˆæ‰€æŒ‡çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒ</strong>ã€‚å–å…¶ä¸­è¾ƒå¤§çš„å…ƒç´ ï¼ŒæŠŠå®ƒä» nums1 çš„æœ«å°¾å¾€å‰é¢å¡«è¡¥ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/15/170de023737bd4d0~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1020&amp;h=660&amp;s=26875&amp;e=png" alt="" loading="lazy"/>
è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦è§£é‡Šä¸€ä¸‹ï¼š<br/>
ä¸ºä»€ä¹ˆæ˜¯ä»åå¾€å‰å¡«è¡¥ï¼Ÿå› ä¸ºæ˜¯è¦æŠŠæ‰€æœ‰çš„å€¼åˆå¹¶åˆ° nums1 é‡Œï¼Œæ‰€ä»¥è¯´æˆ‘ä»¬è¿™é‡Œå¯ä»¥æŠŠ nums1 çœ‹åšæ˜¯ä¸€ä¸ªâ€œå®¹å™¨â€ã€‚ä½†æ˜¯è¿™ä¸ªå®¹å™¨ï¼Œå®ƒä¸æ˜¯ç©ºçš„ï¼Œè€Œæ˜¯å‰é¢å‡ ä¸ªå‘æœ‰å†…å®¹çš„ã€‚å¦‚æœæˆ‘ä»¬ä»å‰å¾€åå¡«è¡¥ï¼Œå°±æ²¡æ³•ç›´æ¥å¾€å¯¹åº”çš„å‘ä½èµ‹å€¼äº†ï¼ˆä¼šäº§ç”Ÿå€¼è¦†ç›–ï¼‰ã€‚<br/>
ä»åå¾€å‰å¡«è¡¥ï¼Œæˆ‘ä»¬å¡«çš„éƒ½æ˜¯æ²¡æœ‰å†…å®¹çš„å‘ï¼Œè¿™æ ·ä¼šçœæ‰å¾ˆå¤šéº»çƒ¦ã€‚</p>
<p>ç”±äº nums1 çš„æœ‰æ•ˆéƒ¨åˆ†å’Œ nums2 å¹¶ä¸ä¸€å®šæ˜¯ä¸€æ ·é•¿çš„ã€‚æˆ‘ä»¬è¿˜éœ€è¦è€ƒè™‘å…¶ä¸­ä¸€ä¸ªæå‰åˆ°å¤´çš„è¿™ç§æƒ…å†µï¼š</p>
<ol>
<li>
<p>å¦‚æœæå‰éå†å®Œçš„æ˜¯ nums1 çš„æœ‰æ•ˆéƒ¨åˆ†ï¼Œå‰©ä¸‹çš„æ˜¯ nums2ã€‚é‚£ä¹ˆè¿™æ—¶æ„å‘³ç€ nums1 çš„å¤´éƒ¨ç©ºå‡ºæ¥äº†ï¼Œç›´æ¥æŠŠ nums2 æ•´ä¸ªè¡¥åˆ° nums1 å‰é¢å»å³å¯ã€‚</p>
</li>
<li>
<p>å¦‚æœæå‰éå†å®Œçš„æ˜¯ nums2ï¼Œå‰©ä¸‹çš„æ˜¯ nums1ã€‚ç”±äºå®¹å™¨æœ¬èº«å°±æ˜¯  nums1ï¼Œæ‰€ä»¥æ­¤æ—¶ä¸å¿…åšä»»ä½•é¢å¤–çš„æ“ä½œã€‚</p>
</li>
</ol>
<h5 data-id="heading-50">ç¼–ç å®ç°ï¼š</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums1</span>
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">m</span>
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums2</span>
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">n</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">void</span>} Do not return anything, modify nums1 in-place instead.
 */</span>
<span class="hljs-keyword">const</span> merge = <span class="hljs-keyword">function</span>(<span class="hljs-params">nums1, m, nums2, n</span>) {
    <span class="hljs-comment">// åˆå§‹åŒ–ä¸¤ä¸ªæŒ‡é’ˆçš„æŒ‡å‘ï¼Œåˆå§‹åŒ– nums1 å°¾éƒ¨ç´¢å¼•k</span>
    <span class="hljs-keyword">let</span> i = m - <span class="hljs-number">1</span>, j = n - <span class="hljs-number">1</span>, k = m + n - <span class="hljs-number">1</span>
    <span class="hljs-comment">// å½“ä¸¤ä¸ªæ•°ç»„éƒ½æ²¡éå†å®Œæ—¶ï¼ŒæŒ‡é’ˆåŒæ­¥ç§»åŠ¨</span>
    <span class="hljs-keyword">while</span>(i &gt;= <span class="hljs-number">0</span> &amp;&amp; j &gt;= <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// å–è¾ƒå¤§çš„å€¼ï¼Œä»æœ«å°¾å¾€å‰å¡«è¡¥</span>
        <span class="hljs-keyword">if</span>(nums1[i] &gt;= nums2[j]) {
            nums1[k] = nums1[i] 
            i-- 
            k--
        } <span class="hljs-keyword">else</span> {
            nums1[k] = nums2[j] 
            j-- 
            k--
        }
    }
    
    <span class="hljs-comment">// nums2 ç•™ä¸‹çš„æƒ…å†µï¼Œç‰¹æ®Šå¤„ç†ä¸€ä¸‹ </span>
    <span class="hljs-keyword">while</span>(j&gt;=<span class="hljs-number">0</span>) {
        nums1[k] = nums2[j]  
        k-- 
        j--
    }
};
</code></pre>
<p>æ‰¾ç‚¹ä¹å­ï¼š<br/>
ä¸Šé¢æˆ‘ä»¬ç»™å‡ºçš„ï¼Œæ˜¯é¢è¯•å®˜æœ€å–œæ¬¢çœ‹åˆ°çš„ä¸€ç§è§£æ³•ï¼Œè¿™ç§è§£æ³•é€‚ç”¨äºå„ç§è¯­è¨€ã€‚<br/>
ä½†æ˜¯å°± JS è€Œè¨€ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥â€œå¦è¾Ÿè¹Šå¾„â€ï¼Œä»”ç»†æƒ³æƒ³ï¼Œä½ æœ‰ä»€ä¹ˆå¦™æ‹›ï¼Ÿ</p>
<h4 data-id="heading-51">ä¸‰æ•°æ±‚å’Œé—®é¢˜</h4>
<p>åŒæŒ‡é’ˆæ³•èƒ½å¤„ç†çš„é—®é¢˜å¤šåˆ°ä½ æƒ³ä¸åˆ°ã€‚ä¸ä¿¡æ¥ç…ç…ä¸¤æ•°æ±‚å’Œå®ƒå„¿å­â€”â€”ä¸‰æ•°æ±‚å’Œé—®é¢˜ï¼<br/>
ä¿—è¯è¯´ï¼Œé’å‡ºäºè“è€Œèƒœäºè“ï¼Œä¸‰æ•°æ±‚å’Œè™½ç„¶å’Œä¸¤æ•°æ±‚å’Œåªå·®äº†ä¸€ä¸ªå­—ï¼Œä½†æ˜¯æ€è·¯å´å®Œå…¨ä¸åŒã€‚</p>
<blockquote>
<p>çœŸé¢˜æè¿°ï¼šç»™ä½ ä¸€ä¸ªåŒ…å« n ä¸ªæ•´æ•°çš„æ•°ç»„Â numsï¼Œåˆ¤æ–­Â numsÂ ä¸­æ˜¯å¦å­˜åœ¨ä¸‰ä¸ªå…ƒç´  aï¼Œbï¼Œc ï¼Œä½¿å¾—Â a + b + c = 0 ï¼Ÿè¯·ä½ æ‰¾å‡ºæ‰€æœ‰æ»¡è¶³æ¡ä»¶ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚<br/>
æ³¨æ„ï¼šç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹ï¼š
ç»™å®šæ•°ç»„ nums = [-1, 0, 1, 2, -1, -4]ï¼Œ
æ»¡è¶³è¦æ±‚çš„ä¸‰å…ƒç»„é›†åˆä¸ºï¼š
[
[-1, 0, 1],
[-1, -1, 2]
]</p>
</blockquote>
<h5 data-id="heading-52">æ€è·¯åˆ†æ</h5>
<p>ä¸‰æ•°ä¹‹å’Œå»¶ç»­ä¸¤æ•°ä¹‹å’Œçš„æ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥<strong>æŠŠæ±‚å’Œé—®é¢˜å˜æˆæ±‚å·®é—®é¢˜</strong>â€”â€”å›ºå®šå…¶ä¸­ä¸€ä¸ªæ•°ï¼Œåœ¨å‰©ä¸‹çš„æ•°ä¸­å¯»æ‰¾æ˜¯å¦æœ‰ä¸¤ä¸ªæ•°å’Œè¿™ä¸ªå›ºå®šæ•°ç›¸åŠ æ˜¯ç­‰äº0çš„ã€‚</p>
<p>è™½ç„¶ä¹ä¸€çœ‹ä¼¼ä¹è¿˜æ˜¯éœ€è¦ä¸‰å±‚å¾ªç¯æ‰èƒ½è§£å†³çš„æ ·å­ï¼Œä¸è¿‡ç°åœ¨æˆ‘ä»¬æœ‰äº†åŒæŒ‡é’ˆæ³•ï¼Œå®šä½æ•ˆç‡å°†ä¼šè¢«å¤§å¤§æå‡ï¼Œä»æ­¤å‘Šåˆ«è¿‡åº¦å¾ªç¯~</p>
<p>ï¼ˆè¿™é‡Œå¤§å®¶ç›¸ä¿¡å·²ç»èƒ½å¯Ÿè§‰å‡ºæ¥åŒæŒ‡é’ˆæ³•çš„ä½¿ç”¨åœºæ™¯äº†ï¼Œä¸€æ–¹é¢ï¼Œå®ƒå¯ä»¥åšåˆ°ç©ºé—´æ¢æ—¶é—´ï¼›å¦ä¸€æ–¹é¢ï¼Œå®ƒä¹Ÿå¯ä»¥å¸®æˆ‘ä»¬é™ä½é—®é¢˜çš„å¤æ‚åº¦ã€‚ï¼‰</p>
<p>åŒæŒ‡é’ˆæ³•ç”¨åœ¨æ¶‰åŠæ±‚å’Œã€æ¯”å¤§å°ç±»çš„æ•°ç»„é¢˜ç›®é‡Œæ—¶ï¼Œå¤§å‰æå¾€å¾€æ˜¯ï¼šè¯¥æ•°ç»„å¿…é¡»æœ‰åºã€‚å¦åˆ™åŒæŒ‡é’ˆæ ¹æœ¬æ— æ³•å¸®åŠ©æˆ‘ä»¬ç¼©å°å®šä½çš„èŒƒå›´ï¼Œå‹æ ¹æ²¡æœ‰æ„ä¹‰ã€‚å› æ­¤è¿™é“é¢˜çš„ç¬¬ä¸€æ­¥æ˜¯å°†æ•°ç»„æ’åºï¼š</p>
<pre><code class="hljs language-js" lang="js"> nums = nums.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a,b</span>)=&gt;</span>{
    <span class="hljs-keyword">return</span> a-b
})
</code></pre>
<p>ç„¶åï¼Œå¯¹æ•°ç»„è¿›è¡Œéå†ï¼Œæ¯æ¬¡éå†åˆ°å“ªä¸ªæ•°å­—ï¼Œå°±å›ºå®šå“ªä¸ªæ•°å­—ã€‚ç„¶åæŠŠå·¦æŒ‡é’ˆæŒ‡å‘è¯¥æ•°å­—åé¢ä¸€ä¸ªå‘é‡Œçš„æ•°å­—ï¼ŒæŠŠå³æŒ‡é’ˆæŒ‡å‘æ•°ç»„æœ«å°¾ï¼Œè®©å·¦å³æŒ‡é’ˆä»èµ·ç‚¹å¼€å§‹ï¼Œå‘ä¸­é—´å‰è¿›ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/15/170de65ecf8b277f~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1046&amp;h=406&amp;s=25797&amp;e=png" alt="" loading="lazy"/>
æ¯æ¬¡æŒ‡é’ˆç§»åŠ¨ä¸€æ¬¡ä½ç½®ï¼Œå°±è®¡ç®—ä¸€ä¸‹ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘æ•°å­—ä¹‹å’ŒåŠ ä¸Šå›ºå®šçš„é‚£ä¸ªæ•°ä¹‹åï¼Œæ˜¯å¦ç­‰äº0ã€‚å¦‚æœæ˜¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªç›®æ ‡ç»„åˆï¼›å¦åˆ™ï¼Œåˆ†ä¸¤ç§æƒ…å†µæ¥çœ‹ï¼š</p>
<ul>
<li>
<p>ç›¸åŠ ä¹‹å’Œå¤§äº0ï¼Œè¯´æ˜å³ä¾§çš„æ•°åå¤§äº†ï¼Œå³æŒ‡é’ˆå·¦ç§»</p>
</li>
<li>
<p>ç›¸åŠ ä¹‹å’Œå°äº0ï¼Œè¯´æ˜å·¦ä¾§çš„æ•°åå°äº†ï¼Œå·¦æŒ‡é’ˆå³ç§»</p>
</li>
</ul>
<p>tipsï¼šè¿™ä¸ªæ•°ç»„åœ¨é¢˜ç›®ä¸­è¦æ±‚äº†â€œä¸é‡å¤çš„ä¸‰å…ƒç»„â€ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦åšä¸€ä¸ªé‡å¤å…ƒç´ çš„è·³è¿‡å¤„ç†ã€‚è¿™ä¸€ç‚¹åœ¨ç¼–ç å®ç°ç¯èŠ‚å¤§å®¶ä¼šæ³¨æ„åˆ°ã€‚</p>
<h5 data-id="heading-53">ç¼–ç å®ç°</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number[][]</span>}
 */</span>
<span class="hljs-keyword">const</span> threeSum = <span class="hljs-keyword">function</span>(<span class="hljs-params">nums</span>) {
    <span class="hljs-comment">// ç”¨äºå­˜æ”¾ç»“æœæ•°ç»„</span>
    <span class="hljs-keyword">let</span> res = [] 
    <span class="hljs-comment">// ç»™ nums æ’åº</span>
    nums = nums.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a,b</span>)=&gt;</span>{
        <span class="hljs-keyword">return</span> a-b
    })
    <span class="hljs-comment">// ç¼“å­˜æ•°ç»„é•¿åº¦</span>
    <span class="hljs-keyword">const</span> len = nums.<span class="hljs-property">length</span>
    <span class="hljs-comment">// æ³¨æ„æˆ‘ä»¬éå†åˆ°å€’æ•°ç¬¬ä¸‰ä¸ªæ•°å°±è¶³å¤Ÿäº†ï¼Œå› ä¸ºå·¦å³æŒ‡é’ˆä¼šéå†åé¢ä¸¤ä¸ªæ•°</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;len-<span class="hljs-number">2</span>;i++) {
        <span class="hljs-comment">// å·¦æŒ‡é’ˆ j</span>
        <span class="hljs-keyword">let</span> j=i+<span class="hljs-number">1</span> 
        <span class="hljs-comment">// å³æŒ‡é’ˆk</span>
        <span class="hljs-keyword">let</span> k=len-<span class="hljs-number">1</span>   
        <span class="hljs-comment">// å¦‚æœé‡åˆ°é‡å¤çš„æ•°å­—ï¼Œåˆ™è·³è¿‡</span>
        <span class="hljs-keyword">if</span>(i&gt;<span class="hljs-number">0</span>&amp;&amp;nums[i]===nums[i-<span class="hljs-number">1</span>]) {
            <span class="hljs-keyword">continue</span>
        }
        <span class="hljs-keyword">while</span>(j&lt;k) {
            <span class="hljs-comment">// ä¸‰æ•°ä¹‹å’Œå°äº0ï¼Œå·¦æŒ‡é’ˆå‰è¿›</span>
            <span class="hljs-keyword">if</span>(nums[i]+nums[j]+nums[k]&lt;<span class="hljs-number">0</span>){
                j++
               <span class="hljs-comment">// å¤„ç†å·¦æŒ‡é’ˆå…ƒç´ é‡å¤çš„æƒ…å†µ</span>
               <span class="hljs-keyword">while</span>(j&lt;k&amp;&amp;nums[j]===nums[j-<span class="hljs-number">1</span>]) {
                    j++
                }
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(nums[i]+nums[j]+nums[k]&gt;<span class="hljs-number">0</span>){
                <span class="hljs-comment">// ä¸‰æ•°ä¹‹å’Œå¤§äº0ï¼Œå³æŒ‡é’ˆåé€€</span>
                k--
               
               <span class="hljs-comment">// å¤„ç†å³æŒ‡é’ˆå…ƒç´ é‡å¤çš„æƒ…å†µ</span>
               <span class="hljs-keyword">while</span>(j&lt;k&amp;&amp;nums[k]===nums[k+<span class="hljs-number">1</span>]) {
                    k--
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// å¾—åˆ°ç›®æ ‡æ•°å­—ç»„åˆï¼Œæ¨å…¥ç»“æœæ•°ç»„</span>
                res.<span class="hljs-title function_">push</span>([nums[i],nums[j],nums[k]])
                
                <span class="hljs-comment">// å·¦å³æŒ‡é’ˆä¸€èµ·å‰è¿›</span>
                j++  
                k--
               
                <span class="hljs-comment">// è‹¥å·¦æŒ‡é’ˆå…ƒç´ é‡å¤ï¼Œè·³è¿‡</span>
                <span class="hljs-keyword">while</span>(j&lt;k&amp;&amp;nums[j]===nums[j-<span class="hljs-number">1</span>]) {
                    j++
                }  
               
               <span class="hljs-comment">// è‹¥å³æŒ‡é’ˆå…ƒç´ é‡å¤ï¼Œè·³è¿‡</span>
               <span class="hljs-keyword">while</span>(j&lt;k&amp;&amp;nums[k]===nums[k+<span class="hljs-number">1</span>]) {
                    k--
                }
            }
        }
    }
    
    <span class="hljs-comment">// è¿”å›ç»“æœæ•°ç»„</span>
    <span class="hljs-keyword">return</span> res
};
</code></pre>
<h4 data-id="heading-54">åŒæŒ‡é’ˆæ³•ä¸­çš„â€œå¯¹æ’æŒ‡é’ˆâ€æ³•</h4>
<p>åœ¨ä¸Šé¢è¿™é“é¢˜ä¸­ï¼Œå·¦å³æŒ‡é’ˆä¸€èµ·ä»ä¸¤è¾¹å¾€ä¸­é—´ä½ç½®ç›¸äº’è¿«è¿‘ï¼Œè¿™æ ·çš„ç‰¹æ®ŠåŒæŒ‡é’ˆå½¢æ€ï¼Œè¢«ç§°ä¸ºâ€œå¯¹æ’æŒ‡é’ˆâ€ã€‚</p>
<p>ä»€ä¹ˆæ—¶å€™ä½ éœ€è¦è”æƒ³åˆ°å¯¹æ’æŒ‡é’ˆï¼Ÿ<br/>
è¿™é‡Œæˆ‘ç»™å¤§å®¶ä¸¤ä¸ªå…³é”®å­—â€”â€”â€œæœ‰åºâ€å’Œâ€œæ•°ç»„â€ã€‚<br/>
æ²¡é”™ï¼Œè§åˆ°è¿™ä¸¤ä¸ªå…³é”®å­—ï¼Œç«‹åˆ»æŠŠåŒæŒ‡é’ˆæ³•è°ƒåº¦è¿›ä½ çš„å¤§è„‘å†…å­˜ã€‚æ™®é€šåŒæŒ‡é’ˆèµ°ä¸é€šï¼Œç«‹åˆ»æƒ³å¯¹æ’æŒ‡é’ˆï¼</p>
<p>å³ä¾¿æ•°ç»„é¢˜ç›®ä¸­å¹¶æ²¡æœ‰ç›´æ¥ç»™å‡ºâ€œæœ‰åºâ€è¿™ä¸ªå…³é”®æ¡ä»¶ï¼Œæˆ‘ä»¬åœ¨å‘è§‰æ™®é€šæ€è·¯èµ°ä¸ä¸‹å»çš„æ—¶å€™ï¼Œä¹Ÿåº”è¯¥åŠæ—¶åœ°å°è¯•æ‰‹åŠ¨å¯¹å…¶è¿›è¡Œæ’åºè¯•è¯•çœ‹æœ‰æ²¡æœ‰æ–°çš„åˆ‡å…¥ç‚¹â€”â€”æ²¡æœ‰æ¡ä»¶ï¼Œåˆ›é€ æ¡ä»¶ä¹Ÿè¦ä¸Šã€‚</p>
<p>å¯¹æ’æŒ‡é’ˆå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç¼©å°é—®é¢˜çš„èŒƒå›´ï¼Œè¿™ä¸€ç‚¹åœ¨â€œä¸‰æ•°æ±‚å’Œâ€é—®é¢˜ä¸­ä½“ç°å¾—æ·‹æ¼“å°½è‡´ï¼šå› ä¸ºæ•°ç»„æœ‰åºï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ä¸¤ä¸ªæŒ‡é’ˆâ€œç”»åœ°ä¸ºç‰¢â€åœˆå‡ºä¸€ä¸ªèŒƒå›´ï¼Œè¿™ä¸ªèŒƒå›´ä»¥å¤–çš„å€¼ä¸æ˜¯å¤ªå¤§å°±æ˜¯å¤ªå°ã€ç›´æ¥è¢«æ’é™¤åœ¨æˆ‘ä»¬çš„åˆ¤æ–­é€»è¾‘ä¹‹å¤–ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æŠŠæ—¶é—´èŠ±åœ¨çœŸæ­£æœ‰æ„ä¹‰çš„è®¡ç®—å’Œå¯¹æ¯”ä¸Šã€‚å¦‚æ­¤ä¸€æ¥ï¼Œä¸ä»…èŠ‚çœäº†è®¡ç®—çš„æ—¶é—´ï¼Œæ›´é™ä½äº†é—®é¢˜æœ¬èº«çš„å¤æ‚åº¦ï¼Œæˆ‘ä»¬åšé¢˜çš„é€Ÿåº¦ä¹Ÿä¼šå¤§å¤§åŠ å¿«ã€‚</p>
<p>ï¼ˆé˜…è¯»è¿‡ç¨‹ä¸­æœ‰ä»»ä½•æƒ³æ³•æˆ–ç–‘é—®ï¼Œæˆ–è€…å•çº¯å¸Œæœ›å’Œç¬”è€…äº¤ä¸ªæœ‹å‹å•¥çš„ï¼Œæ¬¢è¿å¤§å®¶æ·»åŠ æˆ‘çš„å¾®ä¿¡xyalinodeä¸æˆ‘äº¤æµå“ˆ~ï¼‰
å­—ç¬¦ä¸²åœ¨ç®—æ³•é¢è¯•ä¸­ï¼Œå•ç‹¬è€ƒå¯Ÿçš„æœºä¼šå¹¶ä¸å¤šï¼ŒåŒæ ·å€¾å‘äºå’Œä¸€äº›ç»å…¸ç®—æ³•ï¼ˆåé¢ä¼šè®²çš„ï¼‰ç»“åˆæ¥ä½“ç°åŒºåˆ†åº¦ã€‚æ­¥å­ä¸èƒ½è·¨å¤ªå¤§ï¼Œä¸ç„¶å®¹æ˜“æ‰¯ç€xã€‚æœ¬èŠ‚æˆ‘ä»¬ç…§æ ·æ˜¯å…ˆè§£å†³åªéœ€è¦æ•°æ®ç»“æ„çŸ¥è¯†åšåŸºç¡€å°±å¯ä»¥è§£å†³çš„å­—ç¬¦ä¸²é—®é¢˜ã€‚</p>
<p>åœ¨è®²é¢˜ä¹‹å‰ï¼Œæˆ‘é¦–å…ˆè¦ç»™å¤§å®¶ç‚¹æ‹¨ä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸å…³çš„â€œåŸºæœ¬ç®—æ³•æŠ€èƒ½â€ã€‚è¿™ä¸¤ä¸ªæŠ€èƒ½å¶å°”ä¹Ÿä¼šå•ç‹¬å‘½é¢˜ï¼Œä½†æ•´ä½“æ¥çœ‹åœ¨ç»¼åˆæ€§é¢˜ç›®ä¸­çš„è€ƒå¯Ÿé¢‘ç‡è¾ƒé«˜ï¼Œéœ€è¦å¤§å®¶<strong>ç€é‡ç†Ÿæ‚‰ã€åå¤ç»ƒä¹ å’Œè®°å¿†</strong>ï¼Œç¡®ä¿çœŸæ­£åšé¢˜æ—¶ä¸‡æ— ä¸€å¤±ã€‚</p>
<h3 data-id="heading-55">åŸºæœ¬ç®—æ³•æŠ€èƒ½</h3>
<h4 data-id="heading-56">åè½¬å­—ç¬¦ä¸²</h4>
<p>åœ¨ JS ä¸­ï¼Œåè½¬å­—ç¬¦ä¸²æˆ‘ä»¬ç›´æ¥è°ƒç›¸å…³ API å³å¯ï¼Œç›¸ä¿¡ä¸å°‘åŒå­¦éƒ½èƒ½æ‰‹åˆ°æ“’æ¥ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å®šä¹‰è¢«åè½¬çš„å­—ç¬¦ä¸² </span>
<span class="hljs-keyword">const</span> str = <span class="hljs-string">'juejin'</span>  
<span class="hljs-comment">// å®šä¹‰åè½¬åçš„å­—ç¬¦ä¸²</span>
<span class="hljs-keyword">const</span> res = str.<span class="hljs-title function_">split</span>(<span class="hljs-string">''</span>).<span class="hljs-title function_">reverse</span>().<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>)

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res) <span class="hljs-comment">// nijeuj</span>
</code></pre>
<p>ï¼ˆè¿™æ®µä»£ç éœ€è¦ä½ éå¸¸ç†Ÿæ‚‰ï¼Œä¸€äº›å…¬å¸ä¸€é¢ä¸ºäº†è¯•æ°´ï¼Œæœ‰æ—¶ä¼šå•ç‹¬è€ƒè¿™ä¸ªæ“ä½œï¼‰ã€‚</p>
<h4 data-id="heading-57">åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ˜¯å›æ–‡å­—ç¬¦ä¸²</h4>
<p>å›æ–‡å­—ç¬¦ä¸²ï¼Œå°±æ˜¯æ­£ç€è¯»å’Œå€’ç€è¯»éƒ½ä¸€ğŸ±ä¸€æ ·çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">'yessey'</span>
</code></pre>
<p>ç»“åˆè¿™ä¸ªå®šä¹‰ï¼Œæˆ‘ä»¬ä¸éš¾å†™å‡ºä¸€ä¸ªåˆ¤å®šå›æ–‡å­—ç¬¦ä¸²çš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">isPalindrome</span>(<span class="hljs-params">str</span>) {
    <span class="hljs-comment">// å…ˆåè½¬å­—ç¬¦ä¸²</span>
    <span class="hljs-keyword">const</span> reversedStr = str.<span class="hljs-title function_">split</span>(<span class="hljs-string">''</span>).<span class="hljs-title function_">reverse</span>().<span class="hljs-title function_">join</span>(<span class="hljs-string">''</span>)
    <span class="hljs-comment">// åˆ¤æ–­åè½¬å‰åæ˜¯å¦ç›¸ç­‰</span>
    <span class="hljs-keyword">return</span> reversedStr === str
}
</code></pre>
<p>åŒæ—¶ï¼Œå›æ–‡å­—ç¬¦ä¸²è¿˜æœ‰å¦ä¸€ä¸ªç‰¹æ€§ï¼šå¦‚æœä»ä¸­é—´ä½ç½®â€œåŠˆå¼€â€ï¼Œé‚£ä¹ˆä¸¤è¾¹çš„ä¸¤ä¸ªå­ä¸²åœ¨å†…å®¹ä¸Šæ˜¯å®Œå…¨å¯¹ç§°çš„ã€‚å› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥ç»“åˆå¯¹ç§°æ€§æ¥åšåˆ¤æ–­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">isPalindrome</span>(<span class="hljs-params">str</span>) {
    <span class="hljs-comment">// ç¼“å­˜å­—ç¬¦ä¸²çš„é•¿åº¦</span>
    <span class="hljs-keyword">const</span> len = str.<span class="hljs-property">length</span>
    <span class="hljs-comment">// éå†å‰åŠéƒ¨åˆ†ï¼Œåˆ¤æ–­å’ŒååŠéƒ¨åˆ†æ˜¯å¦å¯¹ç§°</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;len/<span class="hljs-number">2</span>;i++) {
        <span class="hljs-keyword">if</span>(str[i]!==str[len-i-<span class="hljs-number">1</span>]) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
}
</code></pre>
<p>ï¼ˆè°¨è®°è¿™ä¸ªå¯¹ç§°çš„ç‰¹æ€§ï¼Œéå¸¸å®¹æ˜“ç”¨åˆ°ï¼‰</p>
<h3 data-id="heading-58">é«˜é¢‘çœŸé¢˜è§£è¯»</h3>
<h4 data-id="heading-59">å›æ–‡å­—ç¬¦ä¸²çš„è¡ç”Ÿé—®é¢˜</h4>
<blockquote>
<p>çœŸé¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªéç©ºå­—ç¬¦ä¸²Â sï¼Œæœ€å¤šåˆ é™¤ä¸€ä¸ªå­—ç¬¦ã€‚åˆ¤æ–­æ˜¯å¦èƒ½æˆä¸ºå›æ–‡å­—ç¬¦ä¸²ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹ 1:
è¾“å…¥: "aba"<br/>
è¾“å‡º: True<br/>
ç¤ºä¾‹ 2:<br/>
è¾“å…¥: "abca"<br/>
è¾“å‡º: True<br/>
è§£é‡Š: ä½ å¯ä»¥åˆ é™¤cå­—ç¬¦ã€‚<br/>
æ³¨æ„: å­—ç¬¦ä¸²åªåŒ…å«ä» a-z çš„å°å†™å­—æ¯ã€‚å­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦æ˜¯50000ã€‚</p>
</blockquote>
<h5 data-id="heading-60">æ€è·¯åˆ†æ</h5>
<p>è¿™é“é¢˜å¾ˆå¤šåŒå­¦ç¬¬ä¸€çœ¼çœ‹è¿‡å»ï¼Œå¯èƒ½æœ¬èƒ½åœ°ä¼šæƒ³åˆ°è¿™æ ·ä¸€ç§è§£æ³•ï¼šè‹¥å­—ç¬¦ä¸²æœ¬èº«ä¸å›æ–‡ï¼Œåˆ™ç›´æ¥éå†æ•´ä¸ªå­—ç¬¦ä¸²ã€‚éå†åˆ°å“ªä¸ªå­—ç¬¦å°±åˆ é™¤å“ªä¸ªå­—ç¬¦ã€åŒæ—¶å¯¹åˆ é™¤è¯¥å­—ç¬¦åçš„å­—ç¬¦ä¸²è¿›è¡Œæ˜¯å¦å›æ–‡çš„åˆ¤æ–­ï¼Œçœ‹çœ‹å­˜ä¸å­˜åœ¨åˆ æ‰æŸä¸ªå­—ç¬¦åã€å­—ç¬¦ä¸²èƒ½å¤Ÿæ»¡è¶³å›æ–‡çš„è¿™ç§æƒ…å†µã€‚</p>
<p>è¿™ä¸ªæ€è·¯çœŸçš„å®ç°èµ·æ¥çš„è¯ï¼Œåœ¨åˆ¤é¢˜ç³»ç»Ÿçœ¼é‡Œå…¶å®ä¹Ÿæ˜¯æ²¡å•¥æ¯›ç—…çš„ã€‚ä½†æ˜¯åœ¨é¢è¯•å®˜çœ‹æ¥ï¼Œå°±æœ‰ç‚¹é—®é¢˜äº†â€”â€”è¿™ä¸æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„è§£æ³•ã€‚<br/>
å¦‚ä½•åˆ¤æ–­è‡ªå·±è§£å†³å›æ–‡ç±»é—®é¢˜çš„è§£æ³•æ˜¯å¦â€œé«˜æ•ˆâ€ï¼Ÿå…¶ä¸­ä¸€ä¸ªå¾ˆé‡è¦çš„æ ‡å‡†ï¼Œå°±æ˜¯çœ‹ä½ å¯¹<strong>å›æ–‡å­—ç¬¦ä¸²çš„å¯¹ç§°ç‰¹æ€§</strong>åˆ©ç”¨å¾—æ˜¯å¦å½»åº•ã€‚</p>
<p>å­—ç¬¦ä¸²é¢˜å¹²ä¸­è‹¥æœ‰â€œå›æ–‡â€å…³é”®å­—ï¼Œé‚£ä¹ˆåšé¢˜æ—¶è„‘æµ·ä¸­ä¸€å®šè¦å†’å‡ºä¸¤ä¸ªå…³é”®å­—â€”â€”<strong>å¯¹ç§°æ€§</strong> å’Œ <strong>åŒæŒ‡é’ˆ</strong>ã€‚è¿™ä¸¤ä¸ªå·¥å…·ä¸€èµ·ä¸Šï¼Œè¶³ä»¥è§£å†³å¤§éƒ¨åˆ†çš„å›æ–‡å­—ç¬¦ä¸²è¡ç”Ÿé—®é¢˜ã€‚</p>
<p>å›åˆ°è¿™é“é¢˜ä¸Šæ¥ï¼Œæˆ‘ä»¬é¦–å…ˆæ˜¯åˆå§‹åŒ–ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªæŒ‡å‘å­—ç¬¦ä¸²å¤´éƒ¨ï¼Œå¦ä¸€ä¸ªæŒ‡å‘å°¾éƒ¨ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/16/170e18e4bd1c843a~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=828&amp;h=472&amp;s=14207&amp;e=png" alt="" loading="lazy"/><br/>
å¦‚æœä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡çš„å­—ç¬¦æ°å¥½ç›¸ç­‰ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªå­—ç¬¦å°±ç¬¦åˆäº†å›æ–‡å­—ç¬¦ä¸²å¯¹å¯¹ç§°æ€§çš„è¦æ±‚ï¼Œè·³è¿‡å®ƒä»¬å¾€ä¸‹èµ°å³å¯ã€‚å¦‚æœä¸¤ä¸ªæŒ‡é’ˆæ‰€æŒ‡çš„å­—ç¬¦ä¸²ä¸ç­‰ï¼Œæ¯”å¦‚è¿™æ ·ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/16/170e191a29f7b7cb~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=790&amp;h=364&amp;s=11980&amp;e=png" alt="" loading="lazy"/><br/>
é‚£ä¹ˆå°±æ„å‘³ç€ä¸å¯¹ç§°å‘ç”Ÿäº†ï¼Œæ„å‘³ç€è¿™æ˜¯ä¸€ä¸ªå¯ä»¥â€œåˆ æ‰è¯•è¯•çœ‹â€çš„æ“ä½œç‚¹ã€‚æˆ‘ä»¬å¯ä»¥åˆ†åˆ«å¯¹å·¦æŒ‡é’ˆå­—ç¬¦å’Œå³æŒ‡é’ˆå­—ç¬¦å°è¯•è¿›è¡Œâ€œè·³è¿‡â€ï¼Œçœ‹çœ‹åŒºé—´åœ¨ <code>[left+1, right]</code> æˆ– <code>[left, right-1]</code> çš„å­—ç¬¦ä¸²æ˜¯å¦å›æ–‡ã€‚å¦‚æœæ˜¯çš„è¯ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€å¦‚æœåˆ æ‰è¢«â€œè·³è¿‡â€é‚£ä¸ªå­—ç¬¦ï¼Œæ•´ä¸ªå­—ç¬¦ä¸²éƒ½å°†å›æ–‡ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/16/170e1993aac908fe~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=900&amp;h=510&amp;s=18643&amp;e=png" alt="" loading="lazy"/>
æ¯”å¦‚è¯´è¿™é‡Œæˆ‘ä»¬è·³è¿‡äº† bï¼Œ[left+1, right] çš„åŒºé—´å°±æ˜¯ [2, 2]ï¼Œå®ƒå¯¹åº” c è¿™ä¸ªå­—ç¬¦ï¼Œå•ä¸ªå­—ç¬¦ä¸€å®šå›æ–‡ã€‚è¿™æ ·ä¸€æ¥ï¼Œåˆ æ‰ b ä¹‹åï¼Œå·¦å³æŒ‡é’ˆæ‰€æŒ‡çš„å†…éƒ¨åŒºé—´æ˜¯å›æ–‡çš„ï¼Œå¤–éƒ¨åŒºé—´ä¹Ÿæ˜¯å›æ–‡çš„ï¼Œå¯ä»¥è®¤ä¸ºæ•´ä¸ªå­—ç¬¦ä¸²å°±æ˜¯ä¸€ä¸ªå›æ–‡å­—ç¬¦ä¸²äº†ã€‚</p>
<h5 data-id="heading-61">ç¼–ç å®ç°</h5>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> validPalindrome = <span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>) {
    <span class="hljs-comment">// ç¼“å­˜å­—ç¬¦ä¸²çš„é•¿åº¦</span>
    <span class="hljs-keyword">const</span> len = s.<span class="hljs-property">length</span>

    <span class="hljs-comment">// iã€jåˆ†åˆ«ä¸ºå·¦å³æŒ‡é’ˆ</span>
    <span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>, j=len-<span class="hljs-number">1</span>
    
    <span class="hljs-comment">// å½“å·¦å³æŒ‡é’ˆå‡æ»¡è¶³å¯¹ç§°æ—¶ï¼Œä¸€èµ·å‘ä¸­é—´å‰è¿›</span>
    <span class="hljs-keyword">while</span>(i&lt;j&amp;&amp;s[i]===s[j]) {
        i++ 
        j--
    }
    
    <span class="hljs-comment">// å°è¯•åˆ¤æ–­è·³è¿‡å·¦æŒ‡é’ˆå…ƒç´ åå­—ç¬¦ä¸²æ˜¯å¦å›æ–‡</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-title function_">isPalindrome</span>(i+<span class="hljs-number">1</span>,j)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
    <span class="hljs-comment">// å°è¯•åˆ¤æ–­è·³è¿‡å³æŒ‡é’ˆå…ƒç´ åå­—ç¬¦ä¸²æ˜¯å¦å›æ–‡</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-title function_">isPalindrome</span>(i,j-<span class="hljs-number">1</span>)) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
    
    <span class="hljs-comment">// å·¥å…·æ–¹æ³•ï¼Œç”¨äºåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦å›æ–‡</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">isPalindrome</span>(<span class="hljs-params">st, ed</span>) {
        <span class="hljs-keyword">while</span>(st&lt;ed) {
            <span class="hljs-keyword">if</span>(s[st] !== s[ed]) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
            }
            st++
            ed--
        } 
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
    
    <span class="hljs-comment">// é»˜è®¤è¿”å› false</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span> 
};
</code></pre>
<h4 data-id="heading-62">å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜â€”â€”æ­£åˆ™è¡¨è¾¾å¼åˆç›¸è§</h4>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€é“ç»¼åˆæ€§æ¯”è¾ƒå¼ºçš„å­—ç¬¦ä¸²å¤§é¢˜ï¼š</p>
<blockquote>
<p>çœŸé¢˜æè¿°ï¼š è®¾è®¡ä¸€ä¸ªæ”¯æŒä»¥ä¸‹ä¸¤ç§æ“ä½œçš„æ•°æ®ç»“æ„ï¼š<br/>
void addWord(word)<br/>
bool search(word)<br/>
search(word)Â å¯ä»¥æœç´¢æ–‡å­—æˆ–æ­£åˆ™è¡¨è¾¾å¼å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²åªåŒ…å«å­—æ¯Â .Â æˆ–Â a-zÂ ã€‚<br/>
. å¯ä»¥è¡¨ç¤ºä»»ä½•ä¸€ä¸ªå­—æ¯ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹:
addWord("bad")<br/>
addWord("dad")<br/>
addWord("mad")<br/>
search("pad") -&gt; false<br/>
search("bad") -&gt; true<br/>
search(".ad") -&gt; true<br/>
search("b..") -&gt; true<br/>
è¯´æ˜:<br/>
ä½ å¯ä»¥å‡è®¾æ‰€æœ‰å•è¯éƒ½æ˜¯ç”±å°å†™å­—æ¯ a-zÂ ç»„æˆçš„ã€‚</p>
</blockquote>
<h5 data-id="heading-63">æ€è·¯åˆ†æ</h5>
<p>è¿™é“é¢˜è¦æ±‚å­—ç¬¦ä¸²æ—¢å¯ä»¥è¢«æ·»åŠ ã€åˆå¯ä»¥è¢«æœç´¢ï¼Œè¿™å°±æ„å‘³ç€å­—ç¬¦ä¸²åœ¨æ·»åŠ æ—¶ä¸€å®šè¦è¢«å­˜åœ¨æŸå¤„ã€‚é”®å€¼å¯¹å­˜å‚¨ï¼Œæˆ‘ä»¬ç”¨ Mapï¼ˆæˆ–å¯¹è±¡å­—é¢é‡æ¥æ¨¡æ‹Ÿ Mapï¼‰ã€‚</p>
<p>æ³¨æ„ï¼Œè¿™é‡Œä¸ºäº†é™ä½æŸ¥æ‰¾æ—¶çš„å¤æ‚åº¦ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä»¥å­—ç¬¦ä¸²çš„é•¿åº¦ä¸º keyï¼Œç›¸åŒé•¿åº¦çš„å­—ç¬¦ä¸²å­˜åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œè¿™æ ·å¯ä»¥æé«˜æˆ‘ä»¬åç»­å®šä½çš„æ•ˆç‡ã€‚</p>
<p>éš¾ç‚¹åœ¨äº search è¿™ä¸ª APIï¼Œå®ƒæ—¢å¯ä»¥æœç´¢æ–‡å­—ï¼Œåˆå¯ä»¥æœç´¢æ­£åˆ™è¡¨è¾¾å¼ã€‚å› æ­¤æˆ‘ä»¬åœ¨æœç´¢å‰éœ€è¦é¢å¤–åˆ¤æ–­ä¸€ä¸‹ï¼Œä¼ å…¥çš„åˆ°åº•æ˜¯æ™®é€šå­—ç¬¦ä¸²ï¼Œè¿˜æ˜¯æ­£åˆ™è¡¨è¾¾å¼ã€‚è‹¥æ˜¯æ™®é€šå­—ç¬¦ä¸²ï¼Œåˆ™ç›´æ¥å» Map ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰è¿™ä¸ª keyï¼›è‹¥æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œåˆ¤æ–­ Map ä¸­ç›¸åŒé•¿åº¦çš„å­—ç¬¦ä¸²é‡Œï¼Œæ˜¯å¦å­˜åœ¨ä¸€ä¸ªèƒ½å¤Ÿä¸è¿™ä¸ªæ­£åˆ™ç›¸åŒ¹é…ã€‚</p>
<p>è¿™é‡Œéœ€è¦å¤§å®¶å¤ä¹ ä¸€ä¸‹æ­£åˆ™è¡¨è¾¾å¼çš„åˆ›å»ºï¼Œä»¥åŠç”¨äºæµ‹è¯•æŸä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸ä¹‹åŒ¹é…çš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * æ„é€ å‡½æ•°
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">WordDictionary</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-comment">// åˆå§‹åŒ–ä¸€ä¸ªå¯¹è±¡å­—é¢é‡ï¼Œæ‰¿æ‹… Map çš„è§’è‰²</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">words</span> = {}
};

<span class="hljs-comment">/**
  æ·»åŠ å­—ç¬¦ä¸²çš„æ–¹æ³•
 */</span>
<span class="hljs-title class_">WordDictionary</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">addWord</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">word</span>) {
  <span class="hljs-comment">// è‹¥è¯¥å­—ç¬¦ä¸²å¯¹åº”é•¿åº¦çš„æ•°ç»„å·²ç»å­˜åœ¨ï¼Œåˆ™åªåšæ·»åŠ </span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">words</span>[word.<span class="hljs-property">length</span>]) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">words</span>[word.<span class="hljs-property">length</span>].<span class="hljs-title function_">push</span>(word)
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// è‹¥è¯¥å­—ç¬¦ä¸²å¯¹åº”é•¿åº¦çš„æ•°ç»„è¿˜ä¸å­˜åœ¨ï¼Œåˆ™å…ˆåˆ›å»º</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">words</span>[word.<span class="hljs-property">length</span>] = [word]
  }

};

<span class="hljs-comment">/**
  æœç´¢æ–¹æ³•
 */</span>
<span class="hljs-title class_">WordDictionary</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">search</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">word</span>) {
  <span class="hljs-comment">// è‹¥è¯¥å­—ç¬¦ä¸²é•¿åº¦åœ¨ Map ä¸­å¯¹åº”çš„æ•°ç»„æ ¹æœ¬ä¸å­˜åœ¨ï¼Œåˆ™å¯åˆ¤æ–­è¯¥å­—ç¬¦ä¸²ä¸å­˜åœ¨</span>
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">words</span>[word.<span class="hljs-property">length</span>]) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
  }
  <span class="hljs-comment">// ç¼“å­˜ç›®æ ‡å­—ç¬¦ä¸²çš„é•¿åº¦</span>
  <span class="hljs-keyword">const</span> len = word.<span class="hljs-property">length</span>
  <span class="hljs-comment">// å¦‚æœå­—ç¬¦ä¸²ä¸­ä¸åŒ…å«â€˜.â€™ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯æ™®é€šå­—ç¬¦ä¸²</span>
  <span class="hljs-keyword">if</span> (!word.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'.'</span>)) {
    <span class="hljs-comment">// å®šä½åˆ°å’Œç›®æ ‡å­—ç¬¦ä¸²é•¿åº¦ä¸€è‡´çš„å­—ç¬¦ä¸²æ•°ç»„ï¼Œåœ¨å…¶ä¸­æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨è¯¥å­—ç¬¦ä¸²</span>
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">words</span>[len].<span class="hljs-title function_">includes</span>(word)

  }

  <span class="hljs-comment">// å¦åˆ™æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œè¦å…ˆåˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡</span>
  <span class="hljs-keyword">const</span> reg = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(word)

  <span class="hljs-comment">// åªè¦æ•°ç»„ä¸­æœ‰ä¸€ä¸ªåŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„å­—ç¬¦ä¸²ï¼Œå°±è¿”å›true</span>
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">words</span>[len].<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> reg.<span class="hljs-title function_">test</span>(item)
  })
};
</code></pre>
<h4 data-id="heading-64">æ­£åˆ™è¡¨è¾¾å¼æ›´è¿›ä¸€æ­¥â€”â€”å­—ç¬¦ä¸²ä¸æ•°å­—ä¹‹é—´çš„è½¬æ¢é—®é¢˜</h4>
<blockquote>
<p>çœŸé¢˜æè¿°ï¼šè¯·ä½ æ¥å®ç°ä¸€ä¸ªÂ atoiÂ å‡½æ•°ï¼Œä½¿å…¶èƒ½å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ•´æ•°ã€‚<br/>
é¦–å…ˆï¼Œè¯¥å‡½æ•°ä¼šæ ¹æ®éœ€è¦ä¸¢å¼ƒæ— ç”¨çš„å¼€å¤´ç©ºæ ¼å­—ç¬¦ï¼Œç›´åˆ°å¯»æ‰¾åˆ°ç¬¬ä¸€ä¸ªéç©ºæ ¼çš„å­—ç¬¦ä¸ºæ­¢ã€‚<br/>
å½“æˆ‘ä»¬å¯»æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ä¸ºæ­£æˆ–è€…è´Ÿå·æ—¶ï¼Œåˆ™å°†è¯¥ç¬¦å·ä¸ä¹‹åé¢å°½å¯èƒ½å¤šçš„è¿ç»­æ•°å­—ç»„åˆèµ·æ¥ï¼Œä½œä¸ºè¯¥æ•´æ•°çš„æ­£è´Ÿå·ï¼›å‡å¦‚ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦æ˜¯æ•°å­—ï¼Œåˆ™ç›´æ¥å°†å…¶ä¸ä¹‹åè¿ç»­çš„æ•°å­—å­—ç¬¦ç»„åˆèµ·æ¥ï¼Œå½¢æˆæ•´æ•°ã€‚<br/>
è¯¥å­—ç¬¦ä¸²é™¤äº†æœ‰æ•ˆçš„æ•´æ•°éƒ¨åˆ†ä¹‹åä¹Ÿå¯èƒ½ä¼šå­˜åœ¨å¤šä½™çš„å­—ç¬¦ï¼Œè¿™äº›å­—ç¬¦å¯ä»¥è¢«å¿½ç•¥ï¼Œå®ƒä»¬å¯¹äºå‡½æ•°ä¸åº”è¯¥é€ æˆå½±å“ã€‚<br/>
æ³¨æ„ï¼šå‡å¦‚è¯¥å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªéç©ºæ ¼å­—ç¬¦ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆæ•´æ•°å­—ç¬¦ã€å­—ç¬¦ä¸²ä¸ºç©ºæˆ–å­—ç¬¦ä¸²ä»…åŒ…å«ç©ºç™½å­—ç¬¦æ—¶ï¼Œåˆ™ä½ çš„å‡½æ•°ä¸éœ€è¦è¿›è¡Œè½¬æ¢ã€‚<br/>
åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œè‹¥å‡½æ•°ä¸èƒ½è¿›è¡Œæœ‰æ•ˆçš„è½¬æ¢æ—¶ï¼Œè¯·è¿”å› 0ã€‚</p>
</blockquote>
<blockquote>
<p>è¯´æ˜ï¼š
å‡è®¾æˆ‘ä»¬çš„ç¯å¢ƒåªèƒ½å­˜å‚¨ 32 ä½å¤§å°çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œé‚£ä¹ˆå…¶æ•°å€¼èŒƒå›´ä¸ºÂ [âˆ’2^31,Â  2^31Â âˆ’ 1]ã€‚å¦‚æœæ•°å€¼è¶…è¿‡è¿™ä¸ªèŒƒå›´ï¼Œè¯·è¿”å› Â INT_MAX (2^31Â âˆ’ 1) æˆ–Â INT_MIN (âˆ’2^31) ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹Â 1:<br/>
è¾“å…¥: "42"<br/>
è¾“å‡º: 42</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹ 2:<br/>
è¾“å…¥: "   -42"<br/>
è¾“å‡º: -42<br/>
è§£é‡Š: ç¬¬ä¸€ä¸ªéç©ºç™½å­—ç¬¦ä¸º '-', å®ƒæ˜¯ä¸€ä¸ªè´Ÿå·ã€‚<br/>
æˆ‘ä»¬å°½å¯èƒ½å°†è´Ÿå·ä¸åé¢æ‰€æœ‰è¿ç»­å‡ºç°çš„æ•°å­—ç»„åˆèµ·æ¥ï¼Œæœ€åå¾—åˆ° -42 ã€‚<br/>
</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹Â 3:
è¾“å…¥: "4193 with words"<br/>
è¾“å‡º: 4193<br/>
è§£é‡Š: è½¬æ¢æˆªæ­¢äºæ•°å­— '3'    ï¼Œå› ä¸ºå®ƒçš„ä¸‹ä¸€ä¸ªå­—ç¬¦ä¸ä¸ºæ•°å­—ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹Â 4:
è¾“å…¥: "words and 987"<br/>
è¾“å‡º: 0<br/>
è§£é‡Š: ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦æ˜¯ 'w',    ä½†å®ƒä¸æ˜¯æ•°å­—æˆ–æ­£ã€è´Ÿå·ã€‚   å› æ­¤æ— æ³•æ‰§è¡Œæœ‰æ•ˆçš„è½¬æ¢ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹Â 5:<br/>
è¾“å…¥: "-91283472332"<br/>
è¾“å‡º: -2147483648<br/>
è§£é‡Š: æ•°å­— "-91283472332" è¶…è¿‡ 32 ä½æœ‰ç¬¦å·æ•´æ•°èŒƒå›´ã€‚å› æ­¤è¿”å› INT_MIN (âˆ’2^31) ã€‚</p>
</blockquote>
<h5 data-id="heading-65">æ€è·¯è§£è¯»</h5>
<p>è¿™é“é¢˜ä¹ä¸€çœ‹æ¯”è¾ƒå”¬äººï¼Œæ¯•ç«Ÿé¢˜å¹²è¿™ä¹ˆé•¿ï¼Œé¦–å…ˆä¼šåˆ·æ‰ä¸€æ³¢æ²¡è€å¿ƒè¯»å®Œçš„ç«å¤§è€å“¥ã€‚æˆ‘åœ¨å®é™…çš„é¢è¯•æƒ…æ™¯ä¸‹ï¼Œè§è¿‡é¢˜æ²¡è¯»å®Œå°±æ€æ¡Œèµ°äººçš„.....å—¨ï¼Œè¿™é‡Œç‰¹åˆ«æé†’å¤§å®¶ï¼Œåƒä¸‡åˆ«å†²åŠ¨ï¼šå°å­©å­æ‰å®³æ€•è¯»é¢˜ï¼Œæˆå¹´äººéƒ½å·ç€ä¹â€”â€”ä½ å¾—çŸ¥é“ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œé¢˜å¹²è¶Šé•¿ï¼Œé¢˜ç›®è¶Šå¥½åšã€‚</p>
<p>ä¸ºå•¥è¿™æ ·è¯´ï¼Ÿå¤§å®¶æƒ³æƒ³ï¼Œæˆ‘ä»¬åšé¢˜é çš„æ˜¯ä»€ä¹ˆï¼Ÿè‡ªèº«çš„çŸ¥è¯†å‚¨å¤‡+é¢˜ç›®æä¾›çš„ä¿¡æ¯ã€‚é¢˜å¹²é•¿æ„å‘³ç€ä»€ä¹ˆï¼Ÿæ„å‘³ç€å®ƒæä¾›çš„ä¿¡æ¯ç›¸å¯¹ä¸°å¯Œã€ç»†èŠ‚æè¿°ç›¸å¯¹åˆ°ä½ï¼Œç”šè‡³å¾ˆæœ‰å¯èƒ½ï¼Œè¿™ä¸ªé¢˜çš„ç­”æ¡ˆéƒ½è—åœ¨é¢˜é‡Œäº†ï¼</p>
<p>å°±æ‹¿è¿™é“é¢˜å¼€åˆ€ï¼Œæˆ‘æŠŠå…¶ä¸­æ¯”è¾ƒå…³é”®çš„å¥å­æ‘˜å‡ºæ¥ç»™å¤§å®¶ç¿»è¯‘ç¿»è¯‘ï¼š</p>
<ol>
<li>
<p>è¯¥å‡½æ•°ä¼šæ ¹æ®éœ€è¦ä¸¢å¼ƒæ— ç”¨çš„å¼€å¤´ç©ºæ ¼å­—ç¬¦ï¼Œç›´åˆ°å¯»æ‰¾åˆ°ç¬¬ä¸€ä¸ªéç©ºæ ¼çš„å­—ç¬¦ä¸ºæ­¢â€”â€”æš—ç¤ºä½ æ‹¿åˆ°å­—ç¬¦ä¸²å…ˆå»ç©ºæ ¼ï¼›</p>
</li>
<li>
<p>å½“æˆ‘ä»¬å¯»æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ä¸ºæ­£æˆ–è€…è´Ÿå·æ—¶ï¼Œåˆ™å°†è¯¥ç¬¦å·ä¸ä¹‹åé¢å°½å¯èƒ½å¤šçš„è¿ç»­æ•°å­—ç»„åˆèµ·æ¥ï¼Œä½œä¸ºè¯¥æ•´æ•°çš„æ­£è´Ÿå·â€”â€”æš—ç¤ºä½ è¯†åˆ«å¼€å¤´çš„â€œ+â€å­—ç¬¦å’Œâ€œ-â€å­—ç¬¦ï¼›</p>
</li>
<li>
<p>è¯¥å­—ç¬¦ä¸²é™¤äº†æœ‰æ•ˆçš„æ•´æ•°éƒ¨åˆ†ä¹‹åä¹Ÿå¯èƒ½ä¼šå­˜åœ¨å¤šä½™çš„å­—ç¬¦ï¼Œè¿™äº›å­—ç¬¦å¯ä»¥è¢«å¿½ç•¥ï¼Œå®ƒä»¬å¯¹äºå‡½æ•°ä¸åº”è¯¥é€ æˆå½±å“â€”â€”æš—ç¤ºä½ è§åˆ°éæ•´æ•°å­—ç¬¦å°±åˆ¹è½¦ï¼›</p>
</li>
<li>
<p>è¯´æ˜ï¼š å‡è®¾æˆ‘ä»¬çš„ç¯å¢ƒåªèƒ½å­˜å‚¨ 32 ä½å¤§å°çš„æœ‰ç¬¦å·æ•´æ•°ï¼Œé‚£ä¹ˆå…¶æ•°å€¼èŒƒå›´ä¸º [âˆ’2^31,  2^31 âˆ’ 1]ã€‚å¦‚æœæ•°å€¼è¶…è¿‡è¿™ä¸ªèŒƒå›´ï¼Œè¯·è¿”å›  INT_MAX (2^31 âˆ’ 1) æˆ– INT_MIN (âˆ’2^31) â€”â€”æš—ç¤º......è¿™éƒ½ä¸æ˜¯æš—ç¤ºäº†ï¼Œè¿™æ˜¯æ˜ç¤ºå•Šï¼ç›´æ¥å‘Šè¯‰ä½ å…ˆæŠŠè¿™ä¿©è¾¹ç•Œå€¼ç®—å‡ºæ¥ï¼Œæ‘†åœ¨é‚£åšå¡å£å°±å®Œäº†ã€‚</p>
</li>
</ol>
<p><strong>Step1ï¼šè®¡ç®—å¡å£</strong><br/>
æ‰€ä»¥è¯´ä¸ç®¡è¿™é“é¢˜ä½ ç”¨å•¥æ–¹æ³•åšï¼Œè¿™ä¸ªå¡å£è®¡ç®—è‚¯å®šæ˜¯æ²¡è·‘äº†ã€‚è®¡ç®—æŸä¸ªæ•°çš„ n æ¬¡æ–¹ï¼Œæˆ‘ä»¬è¦ç”¨åˆ° Math.pow è¿™ä¸ªæ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è®¡ç®—æœ€å¤§å€¼</span>
<span class="hljs-keyword">const</span> max = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">2</span>,<span class="hljs-number">31</span>) - <span class="hljs-number">1</span>
<span class="hljs-comment">// è®¡ç®—æœ€å°å€¼</span>
<span class="hljs-keyword">const</span> min = -max - <span class="hljs-number">1</span>
</code></pre>
<p><strong>Step2ï¼šè§£æå­—ç¬¦ä¸²</strong><br/>
è¿™é“é¢˜å…¶å®æœ‰å¾ˆå¤šç§è§£æ³•ï¼Œä¸åŒè§£æ³•ä¹‹é—´çš„åŒºåˆ«å°±åœ¨äºè§£æå­—ç¬¦ä¸²çš„æ–¹å¼ä¸åŒã€‚<br/>
æœ€ç›´æ¥çš„è§£æ³•ï¼Œæ˜¯å¯¹å­—ç¬¦ä¸²è¿›è¡Œéå†ï¼Œåœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼ŒæŒ‰ç…§ä¸Šæ–‡æˆ‘ç»™å¤§å®¶æå–çš„ 1ã€2ã€3 è¿™ä¸‰ç‚¹æš—ç¤ºï¼Œé€ä¸ªåœ°å»å¯¹æ¯ä¸ªéå†å¯¹è±¡è¿›è¡Œåˆ¤æ–­ï¼Œä»è€Œæå–å‡ºç¬¦åˆé¢˜ç›®è¦æ±‚çš„æ•°å­—å­—ç¬¦ä¸²ï¼Œå†æŠŠå®ƒè½¬æ¢æˆæ•°å­—ã€‚</p>
<p>è¿™æ ·åšç†è®ºä¸Šæ¥è¯´æ²¡æ¯›ç—…ï¼Œä¹Ÿä¸ä¼šæœ‰è¶…æ—¶é—®é¢˜ã€‚ä¸è¿‡è¿™é‡Œæˆ‘æ›´æ¨èå¤§å®¶ç”¨æ­£åˆ™æ¥åšï¼ŒåŸå› å¾ˆç®€å•ï¼šæˆ‘ä»¬çœ‹é¢˜ç›®é‡Œæœ‰è¿™ä¹ˆå¯†é›†çš„å­—ç¬¦ä¸²çº¦æŸæ¡ä»¶ï¼Œä½œä¸ºå‰ç«¯ï¼Œæœ¬èƒ½åœ°æ˜¯èƒ½æƒ³åˆ°ç”¨æ­£åˆ™æ¥åšçš„ï¼›åŒæ—¶ï¼Œæ­£åˆ™è¡¨è¾¾å¼æœ¬èº«å°±æ˜¯å‰ç«¯é¢è¯•ä¸­çš„ä¸€ä¸ªåŸºç¡€çŸ¥è¯†ç‚¹ï¼Œå¦‚æœä¸€é“é¢˜èƒ½å¤ŸåŒæ—¶è€ƒå¯Ÿå­—ç¬¦ä¸²æ“ä½œå’Œæ­£åˆ™è¡¨è¾¾å¼ï¼Œå…¶å®ä¹Ÿæ­£ä¸­äº†é¢è¯•å®˜çš„ä¸‹æ€€ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å†³å®šäº†ç”¨æ­£åˆ™æ¥åšè¿™é“é¢˜ï¼Œèƒ½ä¸èƒ½åšå¯¹å®ƒï¼Œå°±è¦çœ‹å’±ä»¬æ­£åˆ™è¡¨è¾¾å¼èƒ½ä¸èƒ½å†™å¯¹äº†ã€‚<br/>
å¯¹äºæ­£åˆ™è¡¨è¾¾å¼ï¼Œå¤§å¤šæ•°çš„å›¢é˜Ÿä¸ä¼šæœ‰ç‰¹åˆ«å¼ºç¡¬çš„è¦æ±‚ï¼Œä¸ä¼šæœŸæœ›ä½ ä¸€å®šè¦å¤šä¹ˆå¤šä¹ˆç²¾é€šã€èƒ½ä¸é  Google å¾’æ‰‹å†™å¤šä¹ˆå¤æ‚çš„è¡¨è¾¾å¼å‡ºæ¥å•¥çš„â€”â€”è¿™æ ·æå…¶å®ä¹Ÿæ²¡æœ‰æ„ä¹‰ã€‚ä½†æ˜¯å¿…è¦çš„åŸºç¡€ä½ æ˜¯è¦æœ‰çš„ï¼Œè¿™é“é¢˜ç›®æ¶‰åŠåˆ°çš„æ­£åˆ™å…¶å®å°±åœ¨è¿™ä¸ªâ€œå¿…è¦â€çš„èŒƒå›´é‡Œï¼Œæˆ‘ä»¬ä¸€èµ·æ¥åˆ†æä¸€ä¸‹ï¼Œé¦–å…ˆæ˜¯çœ‹å›è¿™ä¸‰ä¸ªçº¦æŸæ¡ä»¶ï¼Œæˆ‘é‡æ–°ç»™å¤§å®¶ç¿»è¯‘ä¸€ä¸‹ï¼š</p>
<ol>
<li>
<p>è¯¥å‡½æ•°ä¼šæ ¹æ®éœ€è¦ä¸¢å¼ƒæ— ç”¨çš„å¼€å¤´ç©ºæ ¼å­—ç¬¦ï¼Œç›´åˆ°å¯»æ‰¾åˆ°ç¬¬ä¸€ä¸ªéç©ºæ ¼çš„å­—ç¬¦ä¸ºæ­¢â€”â€”å…è®¸å­—ç¬¦ä¸²å¤´éƒ¨å‡ºç°ç©ºæ ¼ï¼Œä½†æ˜¯ä½ åœ¨å¤„ç†çš„æ—¶å€™è¦æƒ³åŠæ³•æŠŠå®ƒæ‘˜å‡ºå»ï¼Œä¸è¦è®©å®ƒå¹²æ‰°ä½ çš„è®¡ç®—</p>
</li>
<li>
<p>å½“æˆ‘ä»¬å¯»æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªéç©ºå­—ç¬¦ä¸ºæ­£æˆ–è€…è´Ÿå·æ—¶ï¼Œåˆ™å°†è¯¥ç¬¦å·ä¸ä¹‹åé¢å°½å¯èƒ½å¤šçš„è¿ç»­æ•°å­—ç»„åˆèµ·æ¥ï¼Œä½œä¸ºè¯¥æ•´æ•°çš„æ­£è´Ÿå·â€”â€”å…è®¸å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªæœ‰æ•ˆå­—ç¬¦ä¸ºâ€œ+â€æˆ–è€…â€œâ€”â€ï¼Œä¸è¦æ‘˜å®ƒå‡ºå»ï¼Œå®ƒå¯¹ä½ çš„è®¡ç®—æ˜¯æœ‰æ„ä¹‰çš„</p>
</li>
<li>
<p>è¯¥å­—ç¬¦ä¸²é™¤äº†æœ‰æ•ˆçš„æ•´æ•°éƒ¨åˆ†ä¹‹åä¹Ÿå¯èƒ½ä¼šå­˜åœ¨å¤šä½™çš„å­—ç¬¦ï¼Œè¿™äº›å­—ç¬¦å¯ä»¥è¢«å¿½ç•¥ï¼Œå®ƒä»¬å¯¹äºå‡½æ•°ä¸åº”è¯¥é€ æˆå½±å“â€”â€”åŒ¹é…çš„æ—¶å€™ï¼Œè¿ç»­æ•´æ•°ä¹‹å¤–çš„éƒ¨åˆ†éƒ½åº”è¯¥è¢«æ‘˜é™¤</p>
</li>
</ol>
<p>é€šè¿‡ä»¥ä¸Šåˆ†æï¼Œæˆ‘ä»¬å¯ä»¥å½¢æˆä»¥ä¸‹æ€è·¯ï¼š<br/>
é¦–å…ˆï¼Œæ‘˜é™¤ç©ºæ ¼ï¼šæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯ç›´æ¥ä½¿ç”¨ string çš„ trim æ–¹æ³•ï¼Œå®ƒæ˜¯ JavaScript çš„ä¸€ä¸ªåŸç”Ÿæ–¹æ³•ï¼Œå¯ä»¥å»é™¤å­—ç¬¦ä¸²çš„å¤´å°¾ç©ºæ ¼:</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> str = <span class="hljs-string">'      +10086'</span>
str.<span class="hljs-title function_">trim</span>() <span class="hljs-comment">// '+10086'</span>
</code></pre>
<p>å¦ä¸€ä¸ªæ–¹æ³•æ˜¯åœ¨åŒ¹é…çš„æ—¶å€™ï¼ŒåŒ¹é…ç©ºæ ¼ï¼ˆæ­£åˆ™åŒ¹é…ç¬¦ä¸º \s*ï¼Œæ„å‘³ç€åŒ¹é… 0 ä¸ªæˆ–å¤šä¸ªç©ºæ ¼ï¼‰ï¼Œä½†æ˜¯<strong>ä¸æŠŠå®ƒæ”¾åœ¨æ•è·ç»„</strong>é‡Œâ€”â€”è¿™ç§æ–¹æ³•ä¼šæ›´åŠ é€šç”¨ï¼Œæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…è¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰çš„â€œæ‘˜é™¤â€åŠ¨ä½œéƒ½å¯ä»¥é€šè¿‡å°†åŒ¹é…åˆ°çš„ç»“æœæ’é™¤åœ¨æ•è·ç»„ä¹‹å¤–æ¥å®ç°ï¼Œ</p>
<p>ä»€ä¹ˆæ˜¯æ•è·ç»„ï¼Ÿå…¶å®å°±æ˜¯æ­£åˆ™è¡¨è¾¾å¼ä¸­è¢«å°æ‹¬å·æ‹¬ä½çš„éƒ¨åˆ†ã€‚åœ¨è¿™é“é¢˜é‡Œï¼Œæˆ‘ä»¬éœ€è¦ä»å­—ç¬¦ä¸²ä¸­æå–çš„å…¶å®åªæœ‰â€œ+/-â€ç¬¦å·ä»¥åŠå…¶åé¢çš„æ•°å­—è€Œå·²ï¼ŒåŒæ—¶è¿™ä¸ªå­—ç¬¦ä¸²éœ€è¦æ»¡è¶³ <code>å¯èƒ½å­˜åœ¨çš„ç©ºæ ¼+æ­£è´Ÿå·+æ•°å­—å­—ç¬¦ä¸²+å…¶å®ƒå­—ç¬¦å†…å®¹</code> è¿™æ ·çš„æ ¼å¼æ‰ç®—åˆæ³•ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡è¿™æ ·å†™æ­£åˆ™è¡¨è¾¾å¼ï¼Œå®ç°â€œåŒ¹é…â€å’Œâ€œæå–â€çš„åŒé‡ç›®çš„ï¼š</p>
<pre><code class="hljs language-js" lang="js">/\s*([-\+]?[<span class="hljs-number">0</span>-<span class="hljs-number">9</span>]*).*/
</code></pre>
<p>é’ˆå¯¹æ­£åˆ™åŸºç¡€æ¯”è¾ƒè–„å¼±çš„åŒå­¦ï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹ä¸Šé¢è¿™ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼š</p>
<ul>
<li>é¦–å…ˆï¼Œ<code>\s</code> è¿™ä¸ªç¬¦å·ï¼Œæ„å‘³ç€ç©ºå­—ç¬¦ï¼Œå®ƒå¯ä»¥ç”¨æ¥åŒ¹é…å›è½¦ã€ç©ºæ ¼ã€æ¢è¡Œç­‰ç©ºç™½åŒºåŸŸï¼Œè¿™é‡Œï¼Œå®ƒç”¨æ¥è¢«åŒ¹é…ç©ºæ ¼ã€‚<code>*</code>è¿™ä¸ªç¬¦å·ï¼Œè·Ÿåœ¨å…¶å®ƒç¬¦å·åé¢ï¼Œæ„å‘³ç€â€œå‰é¢è¿™ä¸ªç¬¦å·å¯ä»¥å‡ºç°0æ¬¡æˆ–å¤šæ¬¡ã€‚<code>\s*</code>ï¼Œè¿™é‡Œçš„æ„æ€å°±æ˜¯ç©ºæ ¼å‡ºç°0æ¬¡æˆ–å¤šæ¬¡ï¼Œéƒ½å¯è¢«åŒ¹é…åˆ°ã€‚</li>
<li>æ¥ç€ <code>()</code> å‡ºç°äº†ã€‚<code>()</code> åœˆä½çš„å†…å®¹ï¼Œå°±æ˜¯æˆ‘ä»¬è¦æ•è·èµ·æ¥é¢å¤–å­˜å‚¨çš„ä¸œè¥¿ã€‚</li>
<li><code>[]</code>ä¸­çš„åŒ¹é…ç¬¦ä¹‹é—´æ˜¯â€œæˆ–â€çš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦èƒ½åŒ¹é…ä¸Šå…¶ä¸­ä¸€ä¸ªå°±è¡Œäº†ã€‚è¿™é‡Œ<code>[]</code>ä¸­åŒ…æ‹¬äº†<code>-</code>å’Œ<code>\+</code>ï¼Œ<code>-</code>ä¸å¿…è¯´åŒ¹é…çš„æ˜¯å¯¹åº”å­—ç¬¦ï¼Œè¿™ä¸ª<code>\+</code>ä¹‹æ‰€ä»¥åŠ äº†ä¸€ä¸ªæ–œæ ç¬¦ï¼Œæ˜¯å› ä¸º<code>+</code>æœ¬èº«æ˜¯ä¸€ä¸ªæœ‰ç‰¹æ®Šä½œç”¨çš„æ­£åˆ™åŒ¹é…ç¬¦ï¼Œè¿™é‡Œæˆ‘ä»¬è¦è®©å®ƒå›å½’<code>+</code>å­—ç¬¦çš„æœ¬ä¹‰ï¼Œæ‰€ä»¥è¦ç”¨ä¸€ä¸ª<code>\</code>æ¥å®Œæˆè½¬ä¹‰ã€‚</li>
<li><code>[0-9]*</code>ç»“åˆå’±ä»¬å‰é¢é“ºé™ˆçš„çŸ¥è¯†ï¼Œè¿™ä¸ªå°±ä¸éš¾ç†è§£äº†ï¼Œå®ƒçš„æ„æ€æ˜¯ <code>0-9</code> ä¹‹é—´çš„æ•´æ•°ï¼Œèƒ½åŒ¹é…åˆ°0ä¸ªæˆ–å¤šä¸ªå°±ç®—åŒ¹é…æˆåŠŸã€‚</li>
<li>æœ€åçš„ <code>.</code>è¿™ä¸ªæ˜¯ä»»æ„å­—ç¬¦çš„æ„æ€ï¼Œ<code>.*</code>ç”¨äºå­—ç¬¦ä¸²å°¾éƒ¨åŒ¹é…éæ•°å­—çš„ä»»æ„å­—ç¬¦ã€‚æˆ‘ä»¬çœ‹åˆ°<code>.*</code>æ˜¯è¢«æ’é™¤æ•è·ç»„ä¹‹å¤–çš„ï¼Œæ‰€ä»¥è¯´è¿™ä¸ªä¸œè¥¿å…¶å®ä¹Ÿä¸ä¼šè¢«é¢å¤–å­˜å‚¨ï¼Œå®ƒè¢«â€œæ‘˜é™¤â€äº†ã€‚</li>
</ul>
<p><strong>Step3ï¼šè·å–æ•è·ç»“æœ</strong><br/>
JS çš„æ­£åˆ™ç›¸å…³æ–¹æ³•ä¸­ï¼Œ <code>test()</code>æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œå•çº¯åˆ¤æ–­â€œæ˜¯å¦åŒ¹é…â€ã€‚è¦æƒ³è·å–åŒ¹é…çš„ç»“æœï¼Œæˆ‘ä»¬éœ€è¦è°ƒåº¦<code>match()</code>æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/\s*([-\+]?[0-9]*).*/</span>
<span class="hljs-keyword">const</span> groups = str.<span class="hljs-title function_">match</span>(reg)
</code></pre>
<p><code>match()</code> æ–¹æ³•æ˜¯ä¸€ä¸ªåœ¨å­—ç¬¦ä¸²ä¸­æ‰§è¡ŒæŸ¥æ‰¾åŒ¹é…çš„Stringæ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œåœ¨æœªåŒ¹é…åˆ°æ—¶ä¼šè¿”å› nullã€‚<br/>
å¦‚æœæˆ‘ä»¬çš„æ­£åˆ™è¡¨è¾¾å¼å°¾éƒ¨æœ‰ g æ ‡å¿—ï¼Œ<code>match()</code>ä¼šè¿”å›ä¸å®Œæ•´æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„æ‰€æœ‰ç»“æœï¼Œä½†ä¸ä¼šè¿”å›æ•è·ç»„ã€‚<br/>
è¿™é‡Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨gæ ‡å¿—ï¼Œ<code>match()</code>å°±ä¼šè¿”å›ç¬¬ä¸€ä¸ªå®Œæ•´åŒ¹é…ï¼ˆä½œä¸ºæ•°ç»„çš„ç¬¬0é¡¹ï¼‰åŠå…¶ç›¸å…³çš„æ•è·ç»„ï¼ˆä½œä¸ºæ•°ç»„çš„ç¬¬1åŠç¬¬1+é¡¹ï¼‰ã€‚<br/>
è¿™é‡Œæˆ‘ä»¬åªå®šä¹‰äº†ä¸€ä¸ªæ•è·ç»„ï¼Œå› æ­¤å¯ä»¥ä» <code>groups[1]</code> é‡Œæ‹¿åˆ°æˆ‘ä»¬æ•è·çš„ç»“æœã€‚</p>
<p><strong>Step4ï¼šåˆ¤æ–­å¡å£</strong>
æœ€åä¸€æ­¥ï¼Œå°±æ˜¯æŠŠæ•è·çš„ç»“æœè½¬æ¢æˆæ•°å­—ï¼Œçœ‹çœ‹æ˜¯å¦è¶…å‡ºäº†é¢˜ç›®è¦æ±‚çš„èŒƒå›´ã€‚è¿™ä¸€æ­¥æ¯”è¾ƒç®€å•ï¼Œæ— éœ€å¤šè¨€ã€‚</p>
<h5 data-id="heading-66">ç¼–ç å®ç°</h5>
<p>åˆ†æäº†è¿™ä¹ˆå¤šï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥å†™ä»£ç å•¦ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å…¥å‚æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span>
<span class="hljs-keyword">const</span> myAtoi = <span class="hljs-keyword">function</span>(<span class="hljs-params">str</span>) {
    <span class="hljs-comment">// ç¼–å†™æ­£åˆ™è¡¨è¾¾å¼</span>
    <span class="hljs-keyword">const</span> reg = <span class="hljs-regexp">/\s*([-\+]?[0-9]*).*/</span>
    <span class="hljs-comment">// å¾—åˆ°æ•è·ç»„</span>
    <span class="hljs-keyword">const</span> groups = str.<span class="hljs-title function_">match</span>(reg)
    <span class="hljs-comment">// è®¡ç®—æœ€å¤§å€¼</span>
    <span class="hljs-keyword">const</span> max = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">2</span>,<span class="hljs-number">31</span>) - <span class="hljs-number">1</span>
    <span class="hljs-comment">// è®¡ç®—æœ€å°å€¼</span>
    <span class="hljs-keyword">const</span> min = -max - <span class="hljs-number">1</span>
    <span class="hljs-comment">// targetNum ç”¨äºå­˜å‚¨è½¬åŒ–å‡ºæ¥çš„æ•°å­—</span>
    <span class="hljs-keyword">let</span> targetNum = <span class="hljs-number">0</span>
    <span class="hljs-comment">// å¦‚æœåŒ¹é…æˆåŠŸ</span>
    <span class="hljs-keyword">if</span>(groups) {
        <span class="hljs-comment">// å°è¯•è½¬åŒ–æ•è·åˆ°çš„ç»“æ„</span>
        targetNum = +groups[<span class="hljs-number">1</span>]
        <span class="hljs-comment">// æ³¨æ„ï¼Œå³ä¾¿æˆåŠŸï¼Œä¹Ÿå¯èƒ½å‡ºç°éæ•°å­—çš„æƒ…å†µï¼Œæ¯”å¦‚å•ä¸€ä¸ª'+'</span>
        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">isNaN</span>(targetNum)) {
            <span class="hljs-comment">// ä¸èƒ½è¿›è¡Œæœ‰æ•ˆçš„è½¬æ¢æ—¶ï¼Œè¯·è¿”å› 0</span>
            targetNum = <span class="hljs-number">0</span>
        }
    }
    <span class="hljs-comment">// å¡å£åˆ¤æ–­</span>
    <span class="hljs-keyword">if</span>(targetNum &gt; max) {
        <span class="hljs-keyword">return</span> max
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>( targetNum &lt; min) {
        <span class="hljs-keyword">return</span> min
    }
    <span class="hljs-comment">// è¿”å›è½¬æ¢ç»“æœ</span>
    <span class="hljs-keyword">return</span> targetNum
};

</code></pre>
<p>å†²ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Bipesé¡¹ç›®äºŒæ¬¡å¼€å‘/æµ·é¾Ÿç¼–ç¨‹ï¼ˆå…­ï¼‰]]></title>    <link>https://juejin.cn/post/7584307642984398889</link>    <guid>https://juejin.cn/post/7584307642984398889</guid>    <pubDate>2025-12-16T09:45:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584307642984398889" data-draft-id="7584287969213857811" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Bipesé¡¹ç›®äºŒæ¬¡å¼€å‘/æµ·é¾Ÿç¼–ç¨‹ï¼ˆå…­ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-16T09:45:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¯”è€é©¬è¿˜å…­"/> <meta itemprop="url" content="https://juejin.cn/user/2212677374711006"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Bipesé¡¹ç›®äºŒæ¬¡å¼€å‘/æµ·é¾Ÿç¼–ç¨‹ï¼ˆå…­ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2212677374711006/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¯”è€é©¬è¿˜å…­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T09:45:29.000Z" title="Tue Dec 16 2025 09:45:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Bipesé¡¹ç›®äºŒæ¬¡å¼€å‘/æµ·é¾Ÿç¼–ç¨‹ï¼ˆå…­ï¼‰</h2>
<p>æµ·é¾Ÿç¼–ç¨‹ï¼Œä¹‹å‰æ˜¯æœ‰å‡ºè¿‡ä¸€æœŸ<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fweixin_44852027%2Farticle%2Fdetails%2F148632573%3Fspm%3D1011.2415.3001.5331" target="_blank" title="https://blog.csdn.net/weixin_44852027/article/details/148632573?spm=1011.2415.3001.5331" ref="nofollow noopener noreferrer">blog.csdn.net/weixin_4485â€¦</a> ï¼Œè¿™æ¬¡æˆ‘å°†è¿™ä¸ªåŠŸèƒ½åŠ åˆ°é¡¹ç›®é‡Œé¢ï¼Œå‰ç«¯pythonè¿˜æ˜¯ç”¨skulpt.jsã€‚æ¥ä¸‹çœ‹æˆ‘æ“ä½œã€‚</p>
<h3 data-id="heading-1">ç¬¬ä¸€ï¼šé…ç½®</h3>
<p>é…ç½®åŠ äº†æ–°æ¨¡å¼ï¼Œæµ·é¾Ÿç¼–ç¨‹ã€‚é€‰æ‹©æµ·é¾Ÿç¼–ç¨‹åï¼Œè¿è¡ŒæŒ‰é’®ï¼Œå°†ä¼šè¿è¡Œæµ·é¾Ÿç”»å›¾åŠŸèƒ½ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ced86ef8c13489f9b505bc9c27443b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q-U6ICB6ams6L-Y5YWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483128&amp;x-signature=axpTFZ9i8urtXpo%2FrhIR0%2FC4gF4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
skulpt-controllerä»£ç æ”¹åŠ¨</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ–°å¢ç”»å›¾è¾“å‡º</span>
(Sk.TurtleGraphics || (Sk.TurtleGraphics = {})).target = <span class="hljs-string">'draw-canvas'</span>
window.Sk.TurtleGraphics.width = <span class="hljs-number">600</span>
window.Sk.TurtleGraphics.height = <span class="hljs-number">600</span>

<span class="hljs-comment">// æ–°å¢è¿è¡Œæµ·é¾Ÿå‡½æ•°</span>
<span class="hljs-built_in">runSkulptCode</span>() {
        let code = Code.<span class="hljs-built_in">generateCode</span>()
        let myPromise = <span class="hljs-keyword">this</span>.sk.misceval.<span class="hljs-built_in">asyncToPromise</span>(() =&gt; {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.sk.<span class="hljs-built_in">importMainWithBody</span>(<span class="hljs-string">"&lt;stdin&gt;"</span>, <span class="hljs-literal">false</span>, code, <span class="hljs-literal">true</span>);
        })

        myPromise
            .<span class="hljs-built_in">then</span>((res) =&gt; {})
            .<span class="hljs-built_in">catch</span>((err) =&gt; {})
}
</code></pre>
<h3 data-id="heading-2">ç¬¬äºŒï¼šé™æ€é¡µé¢</h3>
<pre><code class="hljs language-cpp" lang="cpp">&lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"draw-preview"</span>&gt;
    &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"draw-header"</span>&gt;
      &lt;span <span class="hljs-keyword">class</span>=<span class="hljs-string">"draw-header-left"</span>&gt;æµ·é¾Ÿå›¾&lt;/span&gt;
      &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"header-right"</span>&gt;
        &lt;img <span class="hljs-keyword">class</span>=<span class="hljs-string">"draw-close"</span> src=<span class="hljs-string">"./media/new-icon/close.png"</span> title=<span class="hljs-string">"å…³é—­æµ·é¾Ÿ"</span>&gt;
      &lt;/div&gt;
    &lt;/div&gt;
    &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"draw-content"</span>&gt;
      &lt;div id=<span class="hljs-string">"draw-canvas"</span> style=<span class="hljs-string">"width: 600px; height: 600px;"</span>&gt;&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
</code></pre>
<h3 data-id="heading-3">ç¬¬ä¸‰ï¼šjså¼•ç”¨</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">import</span> Common from <span class="hljs-string">"./common"</span>;
<span class="hljs-keyword">import</span> EventEmitterController from <span class="hljs-string">'../utils/event-emitter-controller'</span>
<span class="hljs-keyword">import</span> DragController from <span class="hljs-string">'../utils/drag-controller'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DrawPreview</span> extends Common {
    <span class="hljs-built_in">constructor</span>() {
        <span class="hljs-built_in">super</span>()
        <span class="hljs-comment">// åˆ›å»ºæ‹–æ‹½å®¹å™¨</span>
        <span class="hljs-keyword">this</span>.element = <span class="hljs-keyword">new</span> <span class="hljs-built_in">DragController</span>(
            document.<span class="hljs-built_in">getElementsByClassName</span>(<span class="hljs-string">'draw-preview'</span>)[<span class="hljs-number">0</span>],
            {
                minWidth: <span class="hljs-number">400</span>,
                minHeight: <span class="hljs-number">400</span>,
                maxWidth: <span class="hljs-number">600</span>,
                maxHeight: <span class="hljs-number">600</span>
            },
            <span class="hljs-string">'draw'</span>,
            (params) =&gt; {
                let { newWidth, newHeight } = params
                $(<span class="hljs-string">'#draw-canvas'</span>).<span class="hljs-built_in">css</span>({
                    width: newWidth + <span class="hljs-string">'px'</span>,
                    height: newHeight - <span class="hljs-number">52</span> + <span class="hljs-string">'px'</span>
                })
                window.Sk.TurtleGraphics.width = newWidth
                window.Sk.TurtleGraphics.height = newHeight - <span class="hljs-number">52</span>
                <span class="hljs-comment">// console.log(params)</span>
            }
        )

        <span class="hljs-keyword">this</span>.state = <span class="hljs-literal">false</span>

        EventEmitterController.<span class="hljs-built_in">on</span>(<span class="hljs-string">'draw-preview-change'</span>, (state) =&gt; {
            <span class="hljs-keyword">this</span>.<span class="hljs-built_in">changeCode</span>(state)
        })
    }
    <span class="hljs-built_in">initEvent</span>() {
        $(<span class="hljs-string">'.draw-close'</span>).<span class="hljs-built_in">on</span>(<span class="hljs-string">'click'</span>, () =&gt; {
            <span class="hljs-keyword">this</span>.<span class="hljs-built_in">changeCode</span>(<span class="hljs-literal">false</span>)
        })
    }
    <span class="hljs-comment">// æ˜¾ç¤ºéšè—é¢„è§ˆåŒº</span>
    <span class="hljs-built_in">changeCode</span>(state) {
        $(<span class="hljs-string">'.draw-preview'</span>).<span class="hljs-built_in">css</span>(<span class="hljs-string">'visibility'</span>, (state ? <span class="hljs-string">'visible'</span> : <span class="hljs-string">'hidden'</span>))
        <span class="hljs-keyword">this</span>.state = state
    }
}

</code></pre>
<h3 data-id="heading-4">ç¬¬å››ï¼šæ•ˆæœ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5a3dbb6c60ae4892843094bbb3967cb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q-U6ICB6ams6L-Y5YWt:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483128&amp;x-signature=gfG1i%2Bgc0AFxAMINdkJwHUTyRPs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-5">æ€»ç»“</h3>
<p>è¿™æœŸçš„æ”¹åŠ¨çš„ä»£ç ä¹Ÿä¸å¤šï¼Œä¸è¿‡ç°åœ¨é¡¹ç›®ä¼šå­˜åœ¨åŠŸèƒ½ç›¸äº’çŸ›ç›¾çš„åœ°æ–¹ï¼ŒåæœŸæ‰“ç®—è§„åˆ’ä¸€ä¸‹ï¼Œè®©å¯¹åº”æ¨¡å¼ä¸‹ï¼Œæ˜¾ç¤ºå¯¹åº”çš„åŠŸèƒ½æ¨¡å—ã€‚æµ·é¾Ÿç¼–ç¨‹å…¶å®ä¹Ÿæ˜¯æŒºæœ‰æ„æ€çš„ï¼ŒåæœŸä¹Ÿæ‰“ç®—å‡ºä¸€äº›demoæ¡ˆä¾‹ï¼Œæ”¾åœ¨ç›®å½•é‡Œé¢ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å·¥ç¨‹åŒ–ç»ˆææŒ‡å—ï¼ˆWebpack + Gulp + Vite + å®æˆ˜é¡¹ç›®ï¼‰]]></title>    <link>https://juejin.cn/post/7584262116388306970</link>    <guid>https://juejin.cn/post/7584262116388306970</guid>    <pubDate>2025-12-16T09:47:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584262116388306970" data-draft-id="7584244431869804571" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å·¥ç¨‹åŒ–ç»ˆææŒ‡å—ï¼ˆWebpack + Gulp + Vite + å®æˆ˜é¡¹ç›®ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-16T09:47:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è±†è‹—å­¦å‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/1935598759719400"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å·¥ç¨‹åŒ–ç»ˆææŒ‡å—ï¼ˆWebpack + Gulp + Vite + å®æˆ˜é¡¹ç›®ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1935598759719400/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è±†è‹—å­¦å‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T09:47:57.000Z" title="Tue Dec 16 2025 09:47:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»23åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ“š ç›®å½•</h2>
<ol>
<li><a href="#%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E6%A6%82%E8%BF%B0" title="#%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96%E6%A6%82%E8%BF%B0">å‰ç«¯å·¥ç¨‹åŒ–æ¦‚è¿°</a></li>
<li><a href="#webpack%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90" title="#webpack%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90">Webpackæ·±åº¦è§£æ</a></li>
<li><a href="#gulp%E6%9E%84%E5%BB%BA%E5%AE%9E%E8%B7%B5" title="#gulp%E6%9E%84%E5%BB%BA%E5%AE%9E%E8%B7%B5">Gulpæ„å»ºå®è·µ</a></li>
<li><a href="#vite%E7%8E%B0%E4%BB%A3%E5%8C%96%E6%9E%84%E5%BB%BA" title="#vite%E7%8E%B0%E4%BB%A3%E5%8C%96%E6%9E%84%E5%BB%BA">Viteç°ä»£åŒ–æ„å»º</a></li>
<li><a href="#%E5%B7%A5%E7%A8%8B%E5%8C%96%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" title="#%E5%B7%A5%E7%A8%8B%E5%8C%96%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">å·¥ç¨‹åŒ–æœ€ä½³å®è·µ</a></li>
<li><a href="#cicd%E4%B8%8E%E9%83%A8%E7%BD%B2%E8%87%AA%E5%8A%A8%E5%8C%96" title="#cicd%E4%B8%8E%E9%83%A8%E7%BD%B2%E8%87%AA%E5%8A%A8%E5%8C%96">CI/CDä¸éƒ¨ç½²è‡ªåŠ¨åŒ–</a></li>
<li><a href="#%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA" title="#%E5%AE%9E%E6%88%98%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA">å®æˆ˜é¡¹ç›®æ­å»º</a></li>
<li><a href="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E7%9B%91%E6%8E%A7" title="#%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%B8%8E%E7%9B%91%E6%8E%A7">æ€§èƒ½ä¼˜åŒ–ä¸ç›‘æ§</a></li>
</ol>
<hr/>
<h2 data-id="heading-1">å‰ç«¯å·¥ç¨‹åŒ–æ¦‚è¿°</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯å‰ç«¯å·¥ç¨‹åŒ–ï¼Ÿ</h3>
<p>å‰ç«¯å·¥ç¨‹åŒ–æ˜¯æŒ‡ä½¿ç”¨å·¥ç¨‹åŒ–æ–¹æ³•å’Œå·¥å…·æ¥è§„èŒƒå‰ç«¯å¼€å‘æµç¨‹ã€æé«˜å¼€å‘æ•ˆç‡ã€ä¿è¯ä»£ç è´¨é‡çš„ç»¼åˆæ€§è§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>æ ¸å¿ƒç›®æ ‡ï¼š</strong></p>
<ul>
<li><strong>æ ‡å‡†åŒ–</strong>ï¼šç»Ÿä¸€çš„å¼€å‘è§„èŒƒå’Œæµç¨‹</li>
<li><strong>è‡ªåŠ¨åŒ–</strong>ï¼šå‡å°‘é‡å¤æ€§æ‰‹å·¥æ“ä½œ</li>
<li><strong>æ•ˆç‡åŒ–</strong>ï¼šæå‡å¼€å‘å’Œæ„å»ºæ€§èƒ½</li>
<li><strong>è´¨é‡åŒ–</strong>ï¼šä¿è¯ä»£ç è´¨é‡å’Œé¡¹ç›®ç¨³å®šæ€§</li>
</ul>
<p><strong>å·¥ç¨‹åŒ–ä½“ç³»ï¼š</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[å‰ç«¯å·¥ç¨‹åŒ–] --&gt; B[å¼€å‘å·¥å…·é“¾]
    A --&gt; C[æ„å»ºå·¥å…·]
    A --&gt; D[ä»£ç è§„èŒƒ]
    A --&gt; E[è‡ªåŠ¨åŒ–æµ‹è¯•]
    A --&gt; F[éƒ¨ç½²æµç¨‹]
    
    B --&gt; B1[ä»£ç ç¼–è¾‘å™¨]
    B --&gt; B2[è°ƒè¯•å·¥å…·]
    B --&gt; B3[ç‰ˆæœ¬æ§åˆ¶]
    
    C --&gt; C1[Webpack]
    C --&gt; C2[gulp]
    C --&gt; C3[Vite]
    
    D --&gt; D1[ESLint]
    D --&gt; D2[Prettier]
    D --&gt; D3[Git Hooks]
    
    E --&gt; E1[å•å…ƒæµ‹è¯•]
    E --&gt; E2[E2Eæµ‹è¯•]
    E --&gt; E3[æ€§èƒ½æµ‹è¯•]
    
    F --&gt; F1[CI/CD]
    F --&gt; F2[å®¹å™¨åŒ–]
    F --&gt; F3[ç›‘æ§]
</code></pre>
<h3 data-id="heading-3">å·¥ç¨‹åŒ–å‘å±•å†ç¨‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ ç»Ÿå¼€å‘æ–¹å¼ï¼ˆæ‰‹å·¥æ—¶ä»£ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">manualDevelopment</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ‰‹åŠ¨ä¸‹è½½ä¾èµ–åº“</span>
    <span class="hljs-keyword">const</span> jquery = <span class="hljs-title function_">downloadFromCDN</span>(<span class="hljs-string">'jquery.min.js'</span>);
    <span class="hljs-keyword">const</span> bootstrap = <span class="hljs-title function_">downloadFromCDN</span>(<span class="hljs-string">'bootstrap.min.js'</span>);
    
    <span class="hljs-comment">// æ‰‹åŠ¨åˆå¹¶æ–‡ä»¶</span>
    <span class="hljs-keyword">const</span> combinedJS = <span class="hljs-title function_">concatenateFiles</span>([jquery, bootstrap, <span class="hljs-string">'app.js'</span>]);
    
    <span class="hljs-comment">// æ‰‹åŠ¨å‹ç¼©</span>
    <span class="hljs-keyword">const</span> minifiedJS = <span class="hljs-title function_">minify</span>(combinedJS);
    
    <span class="hljs-comment">// æ‰‹åŠ¨ä¸Šä¼ åˆ°æœåŠ¡å™¨</span>
    <span class="hljs-title function_">uploadToServer</span>(minifiedJS);
}

<span class="hljs-comment">// å·¥ç¨‹åŒ–å¼€å‘æ–¹å¼ï¼ˆè‡ªåŠ¨åŒ–ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">modernDevelopment</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åŒ…ç®¡ç†å™¨</span>
    <span class="hljs-title function_">npmInstall</span>();
    
    <span class="hljs-comment">// æ¨¡å—åŒ–å¼€å‘</span>
    <span class="hljs-keyword">import</span> { moduleA } <span class="hljs-keyword">from</span> <span class="hljs-string">'./modules'</span>;
    
    <span class="hljs-comment">// è‡ªåŠ¨åŒ–æ„å»º</span>
    <span class="hljs-title function_">webpackBuild</span>();
    
    <span class="hljs-comment">// è‡ªåŠ¨åŒ–æµ‹è¯•</span>
    <span class="hljs-title function_">runTests</span>();
    
    <span class="hljs-comment">// è‡ªåŠ¨åŒ–éƒ¨ç½²</span>
    <span class="hljs-title function_">deployToProduction</span>();
}
</code></pre>
<hr/>
<h2 data-id="heading-4">Webpackæ·±åº¦è§£æ</h2>
<h3 data-id="heading-5">Webpackæ ¸å¿ƒæ¦‚å¿µ</h3>
<p><strong>å…¥å£ç‚¹(Entry)ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// webpack.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    <span class="hljs-comment">// ========== å•å…¥å£é…ç½® ==========</span>
    <span class="hljs-comment">// æŒ‡å®šWebpackæ‰“åŒ…çš„å…¥å£æ–‡ä»¶ï¼Œè¿™æ˜¯æ•´ä¸ªä¾èµ–å›¾çš„èµ·ç‚¹</span>
    <span class="hljs-comment">// Webpackä¼šä»è¿™ä¸ªæ–‡ä»¶å¼€å§‹é€’å½’æŸ¥æ‰¾æ‰€æœ‰ä¾èµ–çš„æ¨¡å—</span>
    <span class="hljs-attr">entry</span>: <span class="hljs-string">'./src/index.js'</span>,
    
    <span class="hljs-comment">// ========== å¤šå…¥å£é…ç½® ==========</span>
    <span class="hljs-comment">// åº”ç”¨äºå¤šé¡µé¢åº”ç”¨æˆ–éœ€è¦åˆ†ç¦»ä¸šåŠ¡ä»£ç å’Œç¬¬ä¸‰æ–¹åº“çš„åœºæ™¯</span>
    <span class="hljs-comment">// main: ä¸»è¦çš„ä¸šåŠ¡é€»è¾‘å…¥å£</span>
    <span class="hljs-comment">// vendor: ç¬¬ä¸‰æ–¹åº“/å…¬å…±æ¨¡å—çš„å…¥å£ï¼Œä¾¿äºé•¿æœŸç¼“å­˜</span>
    <span class="hljs-attr">entry</span>: {
        <span class="hljs-attr">main</span>: <span class="hljs-string">'./src/index.js'</span>,           <span class="hljs-comment">// ä¸»åº”ç”¨å…¥å£</span>
        <span class="hljs-attr">vendor</span>: <span class="hljs-string">'./src/vendor.js'</span>          <span class="hljs-comment">// ç¬¬ä¸‰æ–¹åº“å…¥å£</span>
    },
    
    <span class="hljs-comment">// ========== åŠ¨æ€å…¥å£é…ç½® ==========</span>
    <span class="hljs-comment">// å¼‚æ­¥è¿”å›å…¥å£æ–‡ä»¶è·¯å¾„ï¼Œé€‚ç”¨äºéœ€è¦æ ¹æ®æ¡ä»¶åŠ¨æ€é€‰æ‹©å…¥å£çš„åœºæ™¯</span>
    <span class="hljs-comment">// ä¾‹å¦‚ï¼šæ ¹æ®ç¯å¢ƒå˜é‡ã€ç”¨æˆ·æƒé™ç­‰å†³å®šåŠ è½½å“ªä¸ªå…¥å£æ–‡ä»¶</span>
    <span class="hljs-attr">entry</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
        <span class="hljs-comment">// è¿™é‡Œå¯ä»¥æ ¹æ®æŸäº›æ¡ä»¶åŠ¨æ€å†³å®šå…¥å£æ–‡ä»¶</span>
        <span class="hljs-comment">// æ¯”å¦‚æ ¹æ®ç¯å¢ƒå˜é‡é€‰æ‹©ä¸åŒçš„å…¥å£</span>
        <span class="hljs-title function_">resolve</span>(<span class="hljs-string">'./src/index.js'</span>);
    })
};
</code></pre>
<p><strong>å‡ºå£ç‚¹(Output)ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    <span class="hljs-attr">output</span>: {
        <span class="hljs-comment">// ===== æ‰“åŒ…è¾“å‡ºç›®å½• =====</span>
        <span class="hljs-comment">// path.resolveç¡®ä¿å¾—åˆ°ç»å¯¹è·¯å¾„ï¼Œ__dirnameæ˜¯å½“å‰æ–‡ä»¶æ‰€åœ¨ç›®å½•</span>
        <span class="hljs-comment">// æ‰€æœ‰æ‰“åŒ…åçš„æ–‡ä»¶éƒ½ä¼šè¾“å‡ºåˆ°distç›®å½•ä¸‹</span>
        <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'dist'</span>),
        
        <span class="hljs-comment">// ===== ä¸»æ–‡ä»¶å‘½åè§„åˆ™ =====</span>
        <span class="hljs-comment">// [name]: å¯¹åº”entryä¸­çš„keyï¼ˆå¦‚mainã€vendorï¼‰</span>
        <span class="hljs-comment">// [contenthash]: æ ¹æ®æ–‡ä»¶å†…å®¹ç”Ÿæˆçš„hashå€¼ï¼Œå†…å®¹å˜åŒ–æ—¶hashæ‰ä¼šå˜</span>
        <span class="hljs-comment">// ä½œç”¨ï¼šåˆ©äºæµè§ˆå™¨ç¼“å­˜ï¼Œåªæœ‰æ–‡ä»¶å†…å®¹å˜åŒ–æ—¶æ‰éœ€è¦é‡æ–°ä¸‹è½½</span>
        <span class="hljs-attr">filename</span>: <span class="hljs-string">'[name].[contenthash].js'</span>,
        
        <span class="hljs-comment">// ===== ä»£ç åˆ†å‰²æ–‡ä»¶å‘½åè§„åˆ™ =====</span>
        <span class="hljs-comment">// ç”¨äºåŠ¨æ€import()æˆ–splitChunksåˆ†å‰²å‡ºæ¥çš„chunkæ–‡ä»¶</span>
        <span class="hljs-comment">// ç¡®ä¿è¿™äº›å¼‚æ­¥åŠ è½½çš„æ–‡ä»¶ä¹Ÿæœ‰æ­£ç¡®çš„ç¼“å­˜ç­–ç•¥</span>
        <span class="hljs-attr">chunkFilename</span>: <span class="hljs-string">'[name].[contenthash].chunk.js'</span>,
        
        <span class="hljs-comment">// ===== å…¬å…±è·¯å¾„å‰ç¼€ =====</span>
        <span class="hljs-comment">// æ‰€æœ‰é™æ€èµ„æºå¼•ç”¨æ—¶ä¼šæ·»åŠ è¿™ä¸ªå‰ç¼€</span>
        <span class="hljs-comment">// å¼€å‘ç¯å¢ƒï¼š'/static/' è¡¨ç¤ºèµ„æºåœ¨é™æ€æœåŠ¡å™¨ä¸‹</span>
        <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒï¼š'https://cdn.example.com/' è¡¨ç¤ºä½¿ç”¨CDN</span>
        <span class="hljs-attr">publicPath</span>: <span class="hljs-string">'/static/'</span>,
        
        <span class="hljs-comment">// ===== è‡ªåŠ¨æ¸…ç†è¾“å‡ºç›®å½• =====</span>
        <span class="hljs-comment">// true: æ¯æ¬¡æ„å»ºå‰è‡ªåŠ¨æ¸…ç†distç›®å½•</span>
        <span class="hljs-comment">// é¿å…æ—§æ–‡ä»¶æ®‹ç•™ï¼Œç¡®ä¿è¾“å‡ºç›®å½•çš„å¹²å‡€</span>
        <span class="hljs-attr">clean</span>: <span class="hljs-literal">true</span>,
        
        <span class="hljs-comment">// ===== èµ„æºæ–‡ä»¶å‘½åè§„åˆ™ =====</span>
        <span class="hljs-comment">// é’ˆå¯¹å›¾ç‰‡ã€å­—ä½“ç­‰é™æ€èµ„æºæ–‡ä»¶çš„å‘½åè§„åˆ™</span>
        <span class="hljs-comment">// [hash]: æ–‡ä»¶å†…å®¹çš„hashå€¼ï¼Œ[ext]: æ–‡ä»¶æ‰©å±•åï¼Œ[query]: URLæŸ¥è¯¢å‚æ•°</span>
        <span class="hljs-attr">assetModuleFilename</span>: <span class="hljs-string">'assets/[hash][ext][query]'</span>
    }
};
</code></pre>
<p><strong>åŠ è½½å™¨(Loaders)ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    <span class="hljs-attr">module</span>: {
        <span class="hljs-attr">rules</span>: [
            <span class="hljs-comment">// ========== JavaScript/TypeScript/JSX/TSXå¤„ç† ==========</span>
            {
                <span class="hljs-comment">// åŒ¹é…æ‰€æœ‰.js, .jsx, .ts, .tsxç»“å°¾çš„æ–‡ä»¶</span>
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(js|jsx|ts|tsx)$/</span>,
                
                <span class="hljs-comment">// æ’é™¤node_modulesç›®å½•ï¼Œé¿å…å¯¹ç¬¬ä¸‰æ–¹åº“è¿›è¡Œè½¬è¯‘ï¼Œæé«˜æ„å»ºé€Ÿåº¦</span>
                <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
                
                <span class="hljs-comment">// ä½¿ç”¨å¤šä¸ªloaderï¼Œæ‰§è¡Œé¡ºåºä»å³åˆ°å·¦</span>
                <span class="hljs-attr">use</span>: [
                    <span class="hljs-comment">// ===== ESLintä»£ç æ£€æŸ¥ =====</span>
                    <span class="hljs-comment">// å…ˆè¿›è¡Œä»£ç è§„èŒƒæ£€æŸ¥ï¼Œåœ¨Babelè½¬è¯‘ä¹‹å‰</span>
                    <span class="hljs-string">'eslint-loader'</span>,
                    
                    <span class="hljs-comment">// ===== Babelè½¬è¯‘ =====</span>
                    {
                        <span class="hljs-attr">loader</span>: <span class="hljs-string">'babel-loader'</span>,
                        <span class="hljs-attr">options</span>: {
                            <span class="hljs-comment">// Babelé¢„è®¾é…ç½®</span>
                            <span class="hljs-attr">presets</span>: [
                                <span class="hljs-comment">// @babel/preset-env: æ ¹æ®ç›®æ ‡æµè§ˆå™¨è‡ªåŠ¨è½¬æ¢ES6+è¯­æ³•</span>
                                [<span class="hljs-string">'@babel/preset-env'</span>, {
                                    <span class="hljs-attr">targets</span>: {
                                        <span class="hljs-comment">// æµè§ˆå™¨å…¼å®¹æ€§ç›®æ ‡</span>
                                        <span class="hljs-comment">// '&gt; 1%': å…¨çƒä½¿ç”¨ç‡å¤§äº1%çš„æµè§ˆå™¨</span>
                                        <span class="hljs-comment">// 'last 2 versions': æ¯ä¸ªæµè§ˆå™¨çš„æœ€å2ä¸ªç‰ˆæœ¬</span>
                                        <span class="hljs-attr">browsers</span>: [<span class="hljs-string">'&gt; 1%'</span>, <span class="hljs-string">'last 2 versions'</span>]
                                    }
                                }]
                            ],
                            <span class="hljs-comment">// Babelæ’ä»¶é…ç½®</span>
                            <span class="hljs-attr">plugins</span>: [
                                <span class="hljs-comment">// è½¬æ¢è¿è¡Œæ—¶ï¼Œé¿å…åœ¨æ¯ä¸ªæ–‡ä»¶ä¸­é‡å¤å¼•å…¥helperå‡½æ•°</span>
                                <span class="hljs-string">'@babel/plugin-transform-runtime'</span>,
                                <span class="hljs-comment">// è½¬æ¢ç±»å±æ€§è¯­æ³•ï¼ˆclass MyClass { prop = value; }ï¼‰</span>
                                <span class="hljs-string">'@babel/plugin-proposal-class-properties'</span>
                            ]
                        }
                    }
                ]
            },
            
            <span class="hljs-comment">// ========== CSSæ–‡ä»¶å¤„ç† ==========</span>
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>,
                <span class="hljs-attr">use</span>: [
                    <span class="hljs-comment">// ===== å°†CSSæ³¨å…¥åˆ°DOM =====</span>
                    <span class="hljs-comment">// åˆ›å»ºstyleæ ‡ç­¾ï¼Œå°†CSSæ’å…¥åˆ°é¡µé¢headä¸­</span>
                    <span class="hljs-comment">// å¼€å‘ç¯å¢ƒä½¿ç”¨ï¼Œä¾¿äºçƒ­æ›´æ–°</span>
                    <span class="hljs-string">'style-loader'</span>,
                    
                    <span class="hljs-comment">// ===== CSSæ¨¡å—åŒ–å¤„ç† =====</span>
                    <span class="hljs-comment">// è§£æCSSæ–‡ä»¶ä¸­çš„@importå’Œurl()</span>
                    <span class="hljs-comment">// æ”¯æŒCSS Modulesï¼ˆé…ç½®css-loader.options.modulesï¼‰</span>
                    <span class="hljs-string">'css-loader'</span>,
                    
                    <span class="hljs-comment">// ===== PostCSSå¤„ç† =====</span>
                    <span class="hljs-comment">// è‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å‰ç¼€ï¼ˆ-webkit-, -moz-ç­‰ï¼‰</span>
                    <span class="hljs-comment">// ä½¿ç”¨autoprefixeræ’ä»¶ï¼Œæ ¹æ®caniuseæ•°æ®æ·»åŠ å‰ç¼€</span>
                    <span class="hljs-string">'postcss-loader'</span>
                ]
            },
            
            <span class="hljs-comment">// ========== SCSS/Sassæ–‡ä»¶å¤„ç† ==========</span>
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.scss$/</span>,
                <span class="hljs-attr">use</span>: [
                    <span class="hljs-comment">// å°†ç¼–è¯‘åçš„CSSæ³¨å…¥åˆ°DOM</span>
                    <span class="hljs-string">'style-loader'</span>,
                    <span class="hljs-comment">// è§£æSCSSä¸­çš„@importå’Œurl()</span>
                    <span class="hljs-string">'css-loader'</span>,
                    <span class="hljs-comment">// å°†SCSSç¼–è¯‘ä¸ºCSS</span>
                    <span class="hljs-string">'sass-loader'</span>,
                    
                    <span class="hljs-comment">// ===== å…¨å±€å˜é‡/æ··åˆå™¨æ³¨å…¥ =====</span>
                    <span class="hljs-comment">// åœ¨æ‰€æœ‰SCSSæ–‡ä»¶ä¸­è‡ªåŠ¨å¼•å…¥å…¨å±€å˜é‡å’Œæ··åˆå™¨</span>
                    <span class="hljs-comment">// é¿å…æ¯ä¸ªæ–‡ä»¶éƒ½è¦æ‰‹åŠ¨@import</span>
                    {
                        <span class="hljs-attr">loader</span>: <span class="hljs-string">'sass-resources-loader'</span>,
                        <span class="hljs-attr">options</span>: {
                            <span class="hljs-comment">// å…¨å±€å¼•å…¥çš„SCSSæ–‡ä»¶è·¯å¾„</span>
                            <span class="hljs-attr">resources</span>: <span class="hljs-string">'./src/styles/variables.scss'</span>
                        }
                    }
                ]
            },
            
            <span class="hljs-comment">// ========== å›¾ç‰‡èµ„æºå¤„ç† ==========</span>
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(png|jpe?g|gif|webp|svg)$/</span>,
                
                <span class="hljs-comment">// ===== èµ„æºç±»å‹ =====</span>
                <span class="hljs-comment">// 'asset': Webpack4+çš„ç»Ÿä¸€èµ„æºå¤„ç†æ–¹å¼</span>
                <span class="hljs-comment">// æ ¹æ®æ–‡ä»¶å¤§å°è‡ªåŠ¨é€‰æ‹©å†…è”base64æˆ–ç‹¬ç«‹æ–‡ä»¶</span>
                <span class="hljs-attr">type</span>: <span class="hljs-string">'asset'</span>,
                
                <span class="hljs-comment">// ===== å†…è”æ¡ä»¶è®¾ç½® =====</span>
                <span class="hljs-comment">// å½“æ–‡ä»¶å°äº8KBæ—¶ï¼Œè½¬ä¸ºbase64å†…è”åˆ°JSä¸­</span>
                <span class="hljs-comment">// ä¼˜ç‚¹ï¼šå‡å°‘HTTPè¯·æ±‚ï¼Œç¼ºç‚¹ï¼šå¢åŠ JSä½“ç§¯</span>
                <span class="hljs-comment">// é€‚ç”¨äºå°å›¾æ ‡ã€å°å›¾ç‰‡ç­‰</span>
                <span class="hljs-attr">parser</span>: {
                    <span class="hljs-attr">dataUrlCondition</span>: {
                        <span class="hljs-attr">maxSize</span>: <span class="hljs-number">8</span> * <span class="hljs-number">1024</span> <span class="hljs-comment">// 8KBä»¥ä¸‹è½¬ä¸ºbase64</span>
                    }
                },
                
                <span class="hljs-comment">// ===== æ–‡ä»¶è¾“å‡ºè·¯å¾„ =====</span>
                <span class="hljs-comment">// å¤§æ–‡ä»¶ç‹¬ç«‹è¾“å‡ºæ—¶çš„å‘½åè§„åˆ™</span>
                <span class="hljs-comment">// [name]: åŸæ–‡ä»¶åï¼Œ[hash]: å†…å®¹hashï¼Œ[ext]: æ‰©å±•å</span>
                <span class="hljs-attr">generator</span>: {
                    <span class="hljs-attr">filename</span>: <span class="hljs-string">'images/[name].[hash][ext]'</span>
                }
            },
            
            <span class="hljs-comment">// ========== å­—ä½“æ–‡ä»¶å¤„ç† ==========</span>
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(woff2?|eot|ttf|otf)$/</span>,
                
                <span class="hljs-comment">// ===== å­—ä½“æ–‡ä»¶ç±»å‹ =====</span>
                <span class="hljs-comment">// 'asset/resource': å§‹ç»ˆè¾“å‡ºä¸ºç‹¬ç«‹æ–‡ä»¶ï¼Œä¸å†…è”</span>
                <span class="hljs-comment">// å­—ä½“æ–‡ä»¶é€šå¸¸è¾ƒå¤§ï¼Œä¸é€‚åˆå†…è”</span>
                <span class="hljs-attr">type</span>: <span class="hljs-string">'asset/resource'</span>,
                
                <span class="hljs-comment">// ===== å­—ä½“æ–‡ä»¶è¾“å‡ºè·¯å¾„ =====</span>
                <span class="hljs-attr">generator</span>: {
                    <span class="hljs-attr">filename</span>: <span class="hljs-string">'fonts/[name].[hash][ext]'</span>
                }
            }
        ]
    }
};
</code></pre>
<p><strong>æ’ä»¶(Plugins)ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ===== å¯¼å…¥æ‰€éœ€çš„Webpackæ’ä»¶ =====</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HtmlWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'html-webpack-plugin'</span>);           <span class="hljs-comment">// HTMLæ¨¡æ¿æ’ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MiniCssExtractPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mini-css-extract-plugin'</span>);  <span class="hljs-comment">// CSSæå–æ’ä»¶</span>
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">CleanWebpackPlugin</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'clean-webpack-plugin'</span>);    <span class="hljs-comment">// æ¸…ç†ç›®å½•æ’ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">CopyWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'copy-webpack-plugin'</span>);          <span class="hljs-comment">// å¤åˆ¶æ–‡ä»¶æ’ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">BundleAnalyzerPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack-bundle-analyzer'</span>).<span class="hljs-property">BundleAnalyzerPlugin</span>; <span class="hljs-comment">// Bundleåˆ†ææ’ä»¶</span>

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-comment">// ========== HTMLæ¨¡æ¿å¤„ç†æ’ä»¶ ==========</span>
        <span class="hljs-comment">// è‡ªåŠ¨ç”ŸæˆHTMLæ–‡ä»¶ï¼Œå¹¶æ³¨å…¥æ‰“åŒ…åçš„JSå’ŒCSSæ–‡ä»¶</span>
        <span class="hljs-comment">// çœå»æ‰‹åŠ¨ç®¡ç†scriptæ ‡ç­¾å’Œlinkæ ‡ç­¾çš„éº»çƒ¦</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>({
            <span class="hljs-comment">// HTMLæ¨¡æ¿æ–‡ä»¶è·¯å¾„</span>
            <span class="hljs-attr">template</span>: <span class="hljs-string">'./public/index.html'</span>,
            
            <span class="hljs-comment">// ç”Ÿæˆçš„HTMLæ–‡ä»¶å</span>
            <span class="hljs-attr">filename</span>: <span class="hljs-string">'index.html'</span>,
            
            <span class="hljs-comment">// èµ„æºæ³¨å…¥ä½ç½®ï¼š'head'æˆ–'body'</span>
            <span class="hljs-comment">// 'body': å°†scriptæ ‡ç­¾æ”¾åœ¨bodyåº•éƒ¨ï¼Œæ¨èåšæ³•</span>
            <span class="hljs-attr">inject</span>: <span class="hljs-string">'body'</span>,
            
            <span class="hljs-comment">// ===== HTMLå‹ç¼©é…ç½® =====</span>
            <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒå¯ç”¨HTMLå‹ç¼©ï¼Œå‡å°‘æ–‡ä»¶ä½“ç§¯</span>
            <span class="hljs-attr">minify</span>: {
                <span class="hljs-attr">removeComments</span>: <span class="hljs-literal">true</span>,              <span class="hljs-comment">// ç§»é™¤HTMLæ³¨é‡Š</span>
                <span class="hljs-attr">collapseWhitespace</span>: <span class="hljs-literal">true</span>,           <span class="hljs-comment">// æŠ˜å ç©ºç™½å­—ç¬¦</span>
                <span class="hljs-attr">removeRedundantAttributes</span>: <span class="hljs-literal">true</span>,   <span class="hljs-comment">// ç§»é™¤å†—ä½™å±æ€§ï¼ˆå¦‚type="text/javascript"ï¼‰</span>
                <span class="hljs-attr">useShortDoctype</span>: <span class="hljs-literal">true</span>,             <span class="hljs-comment">// ä½¿ç”¨çŸ­doctypeï¼ˆ&lt;!DOCTYPE html&gt;ï¼‰</span>
                <span class="hljs-attr">removeEmptyAttributes</span>: <span class="hljs-literal">true</span>,        <span class="hljs-comment">// ç§»é™¤ç©ºå±æ€§</span>
                <span class="hljs-attr">removeStyleLinkTypeAttributes</span>: <span class="hljs-literal">true</span>,<span class="hljs-comment">// ç§»é™¤style/linkçš„typeå±æ€§</span>
                <span class="hljs-attr">keepClosingSlash</span>: <span class="hljs-literal">true</span>,             <span class="hljs-comment">// è‡ªé—­åˆæ ‡ç­¾ä¿æŒ/</span>
                <span class="hljs-attr">minifyJS</span>: <span class="hljs-literal">true</span>,                    <span class="hljs-comment">// å‹ç¼©å†…è”JS</span>
                <span class="hljs-attr">minifyCSS</span>: <span class="hljs-literal">true</span>,                   <span class="hljs-comment">// å‹ç¼©å†…è”CSS</span>
                <span class="hljs-attr">minifyURLs</span>: <span class="hljs-literal">true</span>                   <span class="hljs-comment">// å‹ç¼©å†…è”URL</span>
            }
        }),
        
        <span class="hljs-comment">// ========== CSSæå–æ’ä»¶ ==========</span>
        <span class="hljs-comment">// å°†CSSä»JSä¸­æå–å‡ºæ¥ï¼Œç”Ÿæˆç‹¬ç«‹çš„CSSæ–‡ä»¶</span>
        <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ï¼Œä¾¿äºæµè§ˆå™¨å¹¶è¡ŒåŠ è½½CSSï¼Œé¿å…FOUCï¼ˆæ— æ ·å¼å†…å®¹é—ªçƒï¼‰</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">MiniCssExtractPlugin</span>({
            <span class="hljs-comment">// ä¸»CSSæ–‡ä»¶å‘½åè§„åˆ™</span>
            <span class="hljs-attr">filename</span>: <span class="hljs-string">'css/[name].[contenthash].css'</span>,
            
            <span class="hljs-comment">// å¼‚æ­¥åŠ è½½çš„CSSæ–‡ä»¶å‘½åè§„åˆ™</span>
            <span class="hljs-attr">chunkFilename</span>: <span class="hljs-string">'css/[name].[contenthash].chunk.css'</span>
        }),
        
        <span class="hljs-comment">// ========== ç›®å½•æ¸…ç†æ’ä»¶ ==========</span>
        <span class="hljs-comment">// åœ¨æ¯æ¬¡æ„å»ºå‰æ¸…ç†è¾“å‡ºç›®å½•</span>
        <span class="hljs-comment">// ç¡®ä¿æ¯æ¬¡æ„å»ºéƒ½æ˜¯å…¨æ–°çš„ï¼Œé¿å…æ—§æ–‡ä»¶æ®‹ç•™</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">CleanWebpackPlugin</span>(),
        
        <span class="hljs-comment">// ========== æ–‡ä»¶å¤åˆ¶æ’ä»¶ ==========</span>
        <span class="hljs-comment">// å°†é™æ€æ–‡ä»¶ç›´æ¥å¤åˆ¶åˆ°è¾“å‡ºç›®å½•ï¼Œä¸ç»è¿‡Webpackå¤„ç†</span>
        <span class="hljs-comment">// é€‚ç”¨äºä¸éœ€è¦å¤„ç†çš„é™æ€èµ„æºï¼Œå¦‚faviconã€robots.txtç­‰</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">CopyWebpackPlugin</span>({
            <span class="hljs-attr">patterns</span>: [
                {
                    <span class="hljs-comment">// æºç›®å½•</span>
                    <span class="hljs-attr">from</span>: <span class="hljs-string">'public/static'</span>,
                    
                    <span class="hljs-comment">// ç›®æ ‡ç›®å½•ï¼ˆç›¸å¯¹äºoutput.pathï¼‰</span>
                    <span class="hljs-attr">to</span>: <span class="hljs-string">'static'</span>,
                    
                    <span class="hljs-comment">// å¿½ç•¥çš„æ–‡ä»¶æ¨¡å¼</span>
                    <span class="hljs-attr">globOptions</span>: {
                        <span class="hljs-attr">ignore</span>: [<span class="hljs-string">'**/index.html'</span>] <span class="hljs-comment">// å¿½ç•¥index.htmlï¼Œç”±HtmlWebpackPluginå¤„ç†</span>
                    }
                }
            ]
        }),
        
        <span class="hljs-comment">// ========== ç¯å¢ƒå˜é‡å®šä¹‰æ’ä»¶ ==========</span>
        <span class="hljs-comment">// åœ¨ç¼–è¯‘æ—¶å°†ç¯å¢ƒå˜é‡æ³¨å…¥åˆ°ä»£ç ä¸­</span>
        <span class="hljs-comment">// å¯ä»¥åœ¨ä»£ç ä¸­ç›´æ¥ä½¿ç”¨process.env.NODE_ENVç­‰å˜é‡</span>
        <span class="hljs-keyword">new</span> webpack.<span class="hljs-title class_">DefinePlugin</span>({
            <span class="hljs-string">'process.env'</span>: {
                <span class="hljs-comment">// å°†ç¯å¢ƒå˜é‡è½¬æ¢ä¸ºå­—ç¬¦ä¸²å­—é¢é‡</span>
                <span class="hljs-attr">NODE_ENV</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span>),
                <span class="hljs-attr">API_URL</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">API_URL</span>)
            }
        }),
        
        <span class="hljs-comment">// ========== Bundleåˆ†ææ’ä»¶ ==========</span>
        <span class="hljs-comment">// ç”ŸæˆBundleåˆ†ææŠ¥å‘Šï¼Œå¸®åŠ©ä¼˜åŒ–æ‰“åŒ…ä½“ç§¯</span>
        <span class="hljs-comment">// analyzerMode: 'static' ç”Ÿæˆé™æ€HTMLæŠ¥å‘Šæ–‡ä»¶</span>
        <span class="hljs-comment">// openAnalyzer: false æ„å»ºå®Œæˆåä¸è‡ªåŠ¨æ‰“å¼€æŠ¥å‘Š</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">BundleAnalyzerPlugin</span>({
            <span class="hljs-attr">analyzerMode</span>: <span class="hljs-string">'static'</span>,
            <span class="hljs-attr">openAnalyzer</span>: <span class="hljs-literal">false</span>
        })
    ]
};
</code></pre>
<h3 data-id="heading-6">Webpacké«˜çº§é…ç½®</h3>
<p><strong>ç¯å¢ƒé…ç½®åˆ†ç¦»ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// webpack.common.js</span>
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">VueLoaderPlugin</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'vue-loader'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HtmlWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'html-webpack-plugin'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    <span class="hljs-attr">entry</span>: <span class="hljs-string">'./src/index.js'</span>,
    <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'dist'</span>),
        <span class="hljs-attr">filename</span>: <span class="hljs-string">'[name].[contenthash].js'</span>
    },
    <span class="hljs-attr">module</span>: {
        <span class="hljs-attr">rules</span>: [
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.vue$/</span>,
                <span class="hljs-attr">loader</span>: <span class="hljs-string">'vue-loader'</span>
            },
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
                <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
                <span class="hljs-attr">use</span>: <span class="hljs-string">'babel-loader'</span>
            },
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>,
                <span class="hljs-attr">use</span>: [<span class="hljs-string">'vue-style-loader'</span>, <span class="hljs-string">'css-loader'</span>]
            }
        ]
    },
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">VueLoaderPlugin</span>(),
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>({
            <span class="hljs-attr">template</span>: <span class="hljs-string">'./public/index.html'</span>
        })
    ],
    <span class="hljs-attr">optimization</span>: {
        <span class="hljs-attr">splitChunks</span>: {
            <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>,
            <span class="hljs-attr">cacheGroups</span>: {
                <span class="hljs-attr">vendor</span>: {
                    <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/]/</span>,
                    <span class="hljs-attr">name</span>: <span class="hljs-string">'vendors'</span>,
                    <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>
                }
            }
        }
    }
};

<span class="hljs-comment">// webpack.prod.js</span>
<span class="hljs-keyword">const</span> { merge } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack-merge'</span>);
<span class="hljs-keyword">const</span> common = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./webpack.common.js'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MiniCssExtractPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mini-css-extract-plugin'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">TerserPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'terser-webpack-plugin'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">CssMinimizerPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'css-minimizer-webpack-plugin'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title function_">merge</span>(common, {
    <span class="hljs-attr">mode</span>: <span class="hljs-string">'production'</span>,
    <span class="hljs-attr">devtool</span>: <span class="hljs-string">'source-map'</span>,
    <span class="hljs-attr">module</span>: {
        <span class="hljs-attr">rules</span>: [
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/</span>,
                <span class="hljs-attr">use</span>: [<span class="hljs-title class_">MiniCssExtractPlugin</span>.<span class="hljs-property">loader</span>, <span class="hljs-string">'css-loader'</span>]
            }
        ]
    },
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">MiniCssExtractPlugin</span>({
            <span class="hljs-attr">filename</span>: <span class="hljs-string">'[name].[contenthash].css'</span>
        })
    ],
    <span class="hljs-attr">optimization</span>: {
        <span class="hljs-attr">minimizer</span>: [
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">TerserPlugin</span>({
                <span class="hljs-attr">parallel</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">terserOptions</span>: {
                    <span class="hljs-attr">compress</span>: {
                        <span class="hljs-attr">drop_console</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">// ç§»é™¤console</span>
                    }
                }
            }),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">CssMinimizerPlugin</span>()
        ]
    }
});

<span class="hljs-comment">// webpack.dev.js</span>
<span class="hljs-keyword">const</span> { merge } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack-merge'</span>);
<span class="hljs-keyword">const</span> common = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./webpack.common.js'</span>);
<span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title function_">merge</span>(common, {
    <span class="hljs-attr">mode</span>: <span class="hljs-string">'development'</span>,
    <span class="hljs-attr">devtool</span>: <span class="hljs-string">'eval-source-map'</span>,
    <span class="hljs-attr">devServer</span>: {
        <span class="hljs-attr">contentBase</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'dist'</span>),
        <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span>,
        <span class="hljs-attr">hot</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">overlay</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">historyApiFallback</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">proxy</span>: {
            <span class="hljs-string">'/api'</span>: {
                <span class="hljs-attr">target</span>: <span class="hljs-string">'http://localhost:8080'</span>,
                <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">pathRewrite</span>: {
                    <span class="hljs-string">'^/api'</span>: <span class="hljs-string">''</span>
                }
            }
        }
    },
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-keyword">new</span> webpack.<span class="hljs-title class_">HotModuleReplacementPlugin</span>()
    ]
});
</code></pre>
<p><strong>æ€§èƒ½ä¼˜åŒ–é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    <span class="hljs-attr">optimization</span>: {
        <span class="hljs-comment">// ä»£ç åˆ†å‰²</span>
        <span class="hljs-attr">splitChunks</span>: {
            <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>,
            <span class="hljs-attr">minSize</span>: <span class="hljs-number">30000</span>,
            <span class="hljs-attr">maxSize</span>: <span class="hljs-number">0</span>,
            <span class="hljs-attr">minChunks</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">maxAsyncRequests</span>: <span class="hljs-number">5</span>,
            <span class="hljs-attr">maxInitialRequests</span>: <span class="hljs-number">3</span>,
            <span class="hljs-attr">automaticNameDelimiter</span>: <span class="hljs-string">'~'</span>,
            <span class="hljs-attr">cacheGroups</span>: {
                <span class="hljs-attr">vendors</span>: {
                    <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/]/</span>,
                    <span class="hljs-attr">priority</span>: -<span class="hljs-number">10</span>,
                    <span class="hljs-title function_">name</span>(<span class="hljs-params"><span class="hljs-variable language_">module</span></span>) {
                        <span class="hljs-keyword">const</span> packageName = <span class="hljs-variable language_">module</span>.<span class="hljs-property">context</span>.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/[\\/]node_modules[\\/](.*?)([\\/]|$)/</span>)[<span class="hljs-number">1</span>];
                        <span class="hljs-keyword">return</span> <span class="hljs-string">`npm.<span class="hljs-subst">${packageName.replace(<span class="hljs-string">'@'</span>, <span class="hljs-string">''</span>)}</span>`</span>;
                    }
                },
                <span class="hljs-attr">common</span>: {
                    <span class="hljs-attr">name</span>: <span class="hljs-string">'common'</span>,
                    <span class="hljs-attr">minChunks</span>: <span class="hljs-number">2</span>,
                    <span class="hljs-attr">chunks</span>: <span class="hljs-string">'initial'</span>,
                    <span class="hljs-attr">priority</span>: -<span class="hljs-number">20</span>,
                    <span class="hljs-attr">reuseExistingChunk</span>: <span class="hljs-literal">true</span>
                }
            }
        },
        
        <span class="hljs-comment">// è¿è¡Œæ—¶ä»£ç åˆ†ç¦»</span>
        <span class="hljs-attr">runtimeChunk</span>: {
            <span class="hljs-attr">name</span>: <span class="hljs-string">'runtime'</span>
        },
        
        <span class="hljs-comment">// Tree shaking</span>
        <span class="hljs-attr">usedExports</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">sideEffects</span>: <span class="hljs-literal">false</span>,
        
        <span class="hljs-comment">// å‹ç¼©ä¼˜åŒ–</span>
        <span class="hljs-attr">minimize</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">minimizer</span>: [
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">TerserPlugin</span>({
                <span class="hljs-attr">parallel</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">terserOptions</span>: {
                    <span class="hljs-attr">compress</span>: {
                        <span class="hljs-attr">drop_console</span>: <span class="hljs-literal">true</span>,
                        <span class="hljs-attr">drop_debugger</span>: <span class="hljs-literal">true</span>,
                        <span class="hljs-attr">pure_funcs</span>: [<span class="hljs-string">'console.log'</span>, <span class="hljs-string">'console.info'</span>]
                    },
                    <span class="hljs-attr">output</span>: {
                        <span class="hljs-attr">comments</span>: <span class="hljs-literal">false</span>,
                        <span class="hljs-attr">ascii_only</span>: <span class="hljs-literal">true</span>
                    }
                },
                <span class="hljs-attr">extractComments</span>: <span class="hljs-literal">false</span>
            })
        ]
    },
    
    <span class="hljs-comment">// è§£æä¼˜åŒ–</span>
    <span class="hljs-attr">resolve</span>: {
        <span class="hljs-attr">extensions</span>: [<span class="hljs-string">'.js'</span>, <span class="hljs-string">'.jsx'</span>, <span class="hljs-string">'.ts'</span>, <span class="hljs-string">'.tsx'</span>, <span class="hljs-string">'.vue'</span>],
        <span class="hljs-attr">alias</span>: {
            <span class="hljs-string">'@'</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>),
            <span class="hljs-string">'@components'</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src/components'</span>),
            <span class="hljs-string">'@utils'</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src/utils'</span>),
            <span class="hljs-string">'@assets'</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src/assets'</span>)
        },
        <span class="hljs-attr">modules</span>: [<span class="hljs-string">'node_modules'</span>, <span class="hljs-string">'src/vendor'</span>]
    },
    
    <span class="hljs-comment">// ç¼“å­˜é…ç½®</span>
    <span class="hljs-attr">cache</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'filesystem'</span>,
        <span class="hljs-attr">buildDependencies</span>: {
            <span class="hljs-attr">config</span>: [__filename]
        }
    }
};
</code></pre>
<h3 data-id="heading-7">è‡ªå®šä¹‰Loaderå’ŒPlugin</h3>
<p><strong>è‡ªå®šä¹‰Loaderç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// my-custom-loader.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">source</span>) {
    <span class="hljs-comment">// å»é™¤console.log</span>
    <span class="hljs-keyword">const</span> noConsoleSource = source.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/console\.log\(.*?\);?/g</span>, <span class="hljs-string">''</span>);
    
    <span class="hljs-comment">// æ·»åŠ æ–‡ä»¶ä¿¡æ¯æ³¨é‡Š</span>
    <span class="hljs-keyword">const</span> filePath = <span class="hljs-variable language_">this</span>.<span class="hljs-property">resourcePath</span>;
    <span class="hljs-keyword">const</span> fileName = path.<span class="hljs-title function_">basename</span>(filePath);
    <span class="hljs-keyword">const</span> comment = <span class="hljs-string">`/* File: <span class="hljs-subst">${fileName}</span> */\n`</span>;
    
    <span class="hljs-keyword">return</span> comment + noConsoleSource;
};

<span class="hljs-comment">// webpack.config.jsä¸­ä½¿ç”¨</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    <span class="hljs-attr">module</span>: {
        <span class="hljs-attr">rules</span>: [
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
                <span class="hljs-attr">use</span>: [
                    <span class="hljs-string">'babel-loader'</span>,
                    {
                        <span class="hljs-attr">loader</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'my-custom-loader.js'</span>),
                        <span class="hljs-attr">options</span>: {
                            <span class="hljs-comment">// loaderé€‰é¡¹</span>
                        }
                    }
                ]
            }
        ]
    }
};
</code></pre>
<p><strong>è‡ªå®šä¹‰Pluginç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// FileListPlugin.js</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FileListPlugin</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">filename</span> = options.<span class="hljs-property">filename</span> || <span class="hljs-string">'filelist.md'</span>;
    }
    
    <span class="hljs-title function_">apply</span>(<span class="hljs-params">compiler</span>) {
        compiler.<span class="hljs-property">hooks</span>.<span class="hljs-property">emit</span>.<span class="hljs-title function_">tapAsync</span>(<span class="hljs-string">'FileListPlugin'</span>, <span class="hljs-function">(<span class="hljs-params">compilation, callback</span>) =&gt;</span> {
            <span class="hljs-keyword">const</span> filelist = [];
            
            <span class="hljs-comment">// éå†æ‰€æœ‰ç¼–è¯‘åçš„èµ„æº</span>
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> filename <span class="hljs-keyword">in</span> compilation.<span class="hljs-property">assets</span>) {
                <span class="hljs-keyword">const</span> source = compilation.<span class="hljs-property">assets</span>[filename].<span class="hljs-title function_">source</span>();
                <span class="hljs-keyword">const</span> size = <span class="hljs-title class_">Buffer</span>.<span class="hljs-title function_">byteLength</span>(source, <span class="hljs-string">'utf8'</span>);
                filelist.<span class="hljs-title function_">push</span>(<span class="hljs-string">`- <span class="hljs-subst">${filename}</span> (<span class="hljs-subst">${size}</span> bytes)`</span>);
            }
            
            <span class="hljs-comment">// åˆ›å»ºæ–°çš„èµ„æº</span>
            compilation.<span class="hljs-property">assets</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">filename</span>] = {
                <span class="hljs-attr">source</span>: <span class="hljs-function">() =&gt;</span> filelist.<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>),
                <span class="hljs-attr">size</span>: <span class="hljs-function">() =&gt;</span> filelist.<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>).<span class="hljs-property">length</span>
            };
            
            <span class="hljs-title function_">callback</span>();
        });
    }
}

<span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰Plugin</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileListPlugin</span>({
            <span class="hljs-attr">filename</span>: <span class="hljs-string">'build-files.md'</span>
        })
    ]
};
</code></pre>
<hr/>
<h2 data-id="heading-8">Gulpæ„å»ºå®è·µ</h2>
<h3 data-id="heading-9">GulpåŸºç¡€é…ç½®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// gulpfile.js - Gulpæ„å»ºé…ç½®æ–‡ä»¶</span>

<span class="hljs-comment">// ===== å¯¼å…¥Gulpæ ¸å¿ƒæ–¹æ³• =====</span>
<span class="hljs-keyword">const</span> { src, dest, watch, series, parallel } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp'</span>);
<span class="hljs-keyword">const</span> gulp = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp'</span>);

<span class="hljs-comment">// ===== å¯¼å…¥å„ç§Gulpæ’ä»¶ =====</span>
<span class="hljs-keyword">const</span> sass = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-sass'</span>)(<span class="hljs-built_in">require</span>(<span class="hljs-string">'sass'</span>));           <span class="hljs-comment">// SCSSç¼–è¯‘</span>
<span class="hljs-keyword">const</span> postcss = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-postcss'</span>);                    <span class="hljs-comment">// PostCSSå¤„ç†</span>
<span class="hljs-keyword">const</span> autoprefixer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'autoprefixer'</span>);                <span class="hljs-comment">// æµè§ˆå™¨å‰ç¼€è‡ªåŠ¨æ·»åŠ </span>
<span class="hljs-keyword">const</span> cssnano = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cssnano'</span>);                         <span class="hljs-comment">// CSSå‹ç¼©</span>
<span class="hljs-keyword">const</span> babel = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-babel'</span>);                        <span class="hljs-comment">// ES6+è½¬ES5</span>
<span class="hljs-keyword">const</span> uglify = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-uglify'</span>);                      <span class="hljs-comment">// JSå‹ç¼©</span>
<span class="hljs-keyword">const</span> concat = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-concat'</span>);                      <span class="hljs-comment">// æ–‡ä»¶åˆå¹¶</span>
<span class="hljs-keyword">const</span> imagemin = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-imagemin'</span>);                  <span class="hljs-comment">// å›¾ç‰‡ä¼˜åŒ–</span>
<span class="hljs-keyword">const</span> browserSync = <span class="hljs-built_in">require</span>(<span class="hljs-string">'browser-sync'</span>).<span class="hljs-title function_">create</span>();       <span class="hljs-comment">// å¼€å‘æœåŠ¡å™¨</span>
<span class="hljs-keyword">const</span> del = <span class="hljs-built_in">require</span>(<span class="hljs-string">'del'</span>);                                <span class="hljs-comment">// æ–‡ä»¶åˆ é™¤</span>
<span class="hljs-keyword">const</span> plumber = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-plumber'</span>);                   <span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
<span class="hljs-keyword">const</span> sourcemaps = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-sourcemaps'</span>);              <span class="hljs-comment">// æºç æ˜ å°„</span>

<span class="hljs-comment">// ===== æ–‡ä»¶è·¯å¾„é…ç½® =====</span>
<span class="hljs-comment">// ç»Ÿä¸€ç®¡ç†æ‰€æœ‰æºæ–‡ä»¶å’Œè¾“å‡ºç›®å½•è·¯å¾„ï¼Œä¾¿äºç»´æŠ¤</span>
<span class="hljs-keyword">const</span> paths = {
    <span class="hljs-attr">html</span>: <span class="hljs-string">'src/**/*.html'</span>,              <span class="hljs-comment">// HTMLæºæ–‡ä»¶è·¯å¾„</span>
    <span class="hljs-attr">styles</span>: <span class="hljs-string">'src/scss/**/*.scss'</span>,        <span class="hljs-comment">// SCSSæºæ–‡ä»¶è·¯å¾„</span>
    <span class="hljs-attr">scripts</span>: <span class="hljs-string">'src/js/**/*.js'</span>,           <span class="hljs-comment">// JSæºæ–‡ä»¶è·¯å¾„</span>
    <span class="hljs-attr">images</span>: <span class="hljs-string">'src/images/**/*'</span>,          <span class="hljs-comment">// å›¾ç‰‡æºæ–‡ä»¶è·¯å¾„</span>
    <span class="hljs-attr">fonts</span>: <span class="hljs-string">'src/fonts/**/*'</span>,            <span class="hljs-comment">// å­—ä½“æºæ–‡ä»¶è·¯å¾„</span>
    <span class="hljs-attr">dist</span>: <span class="hljs-string">'dist'</span>                        <span class="hljs-comment">// è¾“å‡ºç›®å½•</span>
};

<span class="hljs-comment">// ===== æ¸…ç†è¾“å‡ºç›®å½• =====</span>
<span class="hljs-comment">// åœ¨æ¯æ¬¡æ„å»ºå‰åˆ é™¤distç›®å½•ï¼Œç¡®ä¿è¾“å‡ºç¯å¢ƒçš„å¹²å‡€</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">clean</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">del</span>(paths.<span class="hljs-property">dist</span>);
}

<span class="hljs-comment">// ===== HTMLæ–‡ä»¶å¤„ç† =====</span>
<span class="hljs-comment">// å°†HTMLæ–‡ä»¶ä»srcå¤åˆ¶åˆ°distç›®å½•ï¼Œä¸åšå…¶ä»–å¤„ç†</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">html</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">src</span>(paths.<span class="hljs-property">html</span>)              <span class="hljs-comment">// è¯»å–HTMLæ–‡ä»¶</span>
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">plumber</span>())                <span class="hljs-comment">// æ·»åŠ é”™è¯¯å¤„ç†ï¼Œé˜²æ­¢é”™è¯¯ä¸­æ–­æ„å»ºæµç¨‹</span>
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">dest</span>(paths.<span class="hljs-property">dist</span>));         <span class="hljs-comment">// è¾“å‡ºåˆ°distç›®å½•</span>
}

<span class="hljs-comment">// ===== SCSSç¼–è¯‘å¤„ç† =====</span>
<span class="hljs-comment">// å°†SCSSç¼–è¯‘ä¸ºCSSï¼Œæ·»åŠ æµè§ˆå™¨å‰ç¼€ï¼Œå‹ç¼©ï¼Œå¹¶ç”Ÿæˆæºç æ˜ å°„</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">styles</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">src</span>(paths.<span class="hljs-property">styles</span>)            <span class="hljs-comment">// è¯»å–SCSSæ–‡ä»¶</span>
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">plumber</span>())                <span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
        .<span class="hljs-title function_">pipe</span>(sourcemaps.<span class="hljs-title function_">init</span>())        <span class="hljs-comment">// åˆå§‹åŒ–æºç æ˜ å°„</span>
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">sass</span>({ 
            <span class="hljs-attr">outputStyle</span>: <span class="hljs-string">'expanded'</span>     <span class="hljs-comment">// è¾“å‡ºæ ¼å¼ï¼šexpandedï¼ˆå±•å¼€å¼ï¼Œä¾¿äºè°ƒè¯•ï¼‰</span>
        }).<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, sass.<span class="hljs-property">logError</span>))  <span class="hljs-comment">// SCSSç¼–è¯‘é”™è¯¯å¤„ç†</span>
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">postcss</span>([                 <span class="hljs-comment">// ä½¿ç”¨PostCSSå¤„ç†</span>
            <span class="hljs-title function_">autoprefixer</span>(),              <span class="hljs-comment">// è‡ªåŠ¨æ·»åŠ æµè§ˆå™¨å‰ç¼€</span>
            <span class="hljs-title function_">cssnano</span>()                   <span class="hljs-comment">// CSSå‹ç¼©</span>
        ]))
        .<span class="hljs-title function_">pipe</span>(sourcemaps.<span class="hljs-title function_">write</span>(<span class="hljs-string">'.'</span>))     <span class="hljs-comment">// å†™å…¥æºç æ˜ å°„æ–‡ä»¶</span>
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">dest</span>(<span class="hljs-string">`<span class="hljs-subst">${paths.dist}</span>/css`</span>)) <span class="hljs-comment">// è¾“å‡ºåˆ°dist/cssç›®å½•</span>
        .<span class="hljs-title function_">pipe</span>(browserSync.<span class="hljs-title function_">stream</span>());     <span class="hljs-comment">// è§¦å‘æµè§ˆå™¨çƒ­æ›´æ–°</span>
}

<span class="hljs-comment">// ===== JavaScriptå¤„ç† =====</span>
<span class="hljs-comment">// è½¬è¯‘ES6+ä¸ºES5ï¼Œåˆå¹¶æ–‡ä»¶ï¼Œå‹ç¼©ï¼Œå¹¶ç”Ÿæˆæºç æ˜ å°„</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">scripts</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">src</span>(paths.<span class="hljs-property">scripts</span>)           <span class="hljs-comment">// è¯»å–JSæ–‡ä»¶</span>
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">plumber</span>())                <span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
        .<span class="hljs-title function_">pipe</span>(sourcemaps.<span class="hljs-title function_">init</span>())        <span class="hljs-comment">// åˆå§‹åŒ–æºç æ˜ å°„</span>
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">babel</span>({                  <span class="hljs-comment">// Babelè½¬è¯‘</span>
            <span class="hljs-attr">presets</span>: [<span class="hljs-string">'@babel/preset-env'</span>] <span class="hljs-comment">// ä½¿ç”¨envé¢„è®¾ï¼Œæ ¹æ®ç›®æ ‡æµè§ˆå™¨è‡ªåŠ¨è½¬è¯‘</span>
        }))
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">concat</span>(<span class="hljs-string">'main.min.js'</span>))     <span class="hljs-comment">// åˆå¹¶æ‰€æœ‰JSæ–‡ä»¶ä¸ºå•ä¸ªæ–‡ä»¶</span>
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">uglify</span>())                 <span class="hljs-comment">// å‹ç¼©JSä»£ç </span>
        .<span class="hljs-title function_">pipe</span>(sourcemaps.<span class="hljs-title function_">write</span>(<span class="hljs-string">'.'</span>))     <span class="hljs-comment">// å†™å…¥æºç æ˜ å°„</span>
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">dest</span>(<span class="hljs-string">`<span class="hljs-subst">${paths.dist}</span>/js`</span>)) <span class="hljs-comment">// è¾“å‡ºåˆ°dist/jsç›®å½•</span>
        .<span class="hljs-title function_">pipe</span>(browserSync.<span class="hljs-title function_">stream</span>());     <span class="hljs-comment">// è§¦å‘æµè§ˆå™¨çƒ­æ›´æ–°</span>
}

<span class="hljs-comment">// ===== å›¾ç‰‡ä¼˜åŒ–å¤„ç† =====</span>
<span class="hljs-comment">// å‹ç¼©å’Œä¼˜åŒ–å„ç§æ ¼å¼çš„å›¾ç‰‡æ–‡ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">images</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">src</span>(paths.<span class="hljs-property">images</span>)            <span class="hljs-comment">// è¯»å–å›¾ç‰‡æ–‡ä»¶</span>
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">imagemin</span>([               <span class="hljs-comment">// å›¾ç‰‡å‹ç¼©å¤„ç†</span>
            <span class="hljs-comment">// ===== GIFä¼˜åŒ– =====</span>
            imagemin.<span class="hljs-title function_">gifsicle</span>({ 
                <span class="hljs-attr">interlaced</span>: <span class="hljs-literal">true</span>     <span class="hljs-comment">// äº¤é”™å¼GIFï¼Œæ¸è¿›åŠ è½½</span>
            }),
            
            <span class="hljs-comment">// ===== JPEGä¼˜åŒ– =====</span>
            imagemin.<span class="hljs-title function_">mozjpeg</span>({ 
                <span class="hljs-attr">quality</span>: <span class="hljs-number">80</span>,        <span class="hljs-comment">// å‹ç¼©è´¨é‡ï¼š80%ï¼ˆå¹³è¡¡è´¨é‡å’Œæ–‡ä»¶å¤§å°ï¼‰</span>
                <span class="hljs-attr">progressive</span>: <span class="hljs-literal">true</span>   <span class="hljs-comment">// æ¸è¿›å¼JPEG</span>
            }),
            
            <span class="hljs-comment">// ===== PNGä¼˜åŒ– =====</span>
            imagemin.<span class="hljs-title function_">optipng</span>({ 
                <span class="hljs-attr">optimizationLevel</span>: <span class="hljs-number">5</span>  <span class="hljs-comment">// ä¼˜åŒ–çº§åˆ«ï¼š1-7ï¼Œ5æ˜¯è¾ƒå¥½çš„å¹³è¡¡ç‚¹</span>
            }),
            
            <span class="hljs-comment">// ===== SVGä¼˜åŒ– =====</span>
            imagemin.<span class="hljs-title function_">svgo</span>({
                <span class="hljs-attr">plugins</span>: [
                    { <span class="hljs-attr">removeViewBox</span>: <span class="hljs-literal">true</span> },    <span class="hljs-comment">// ç§»é™¤viewBoxï¼ˆå¦‚æœå¯ä»¥ï¼‰</span>
                    { <span class="hljs-attr">cleanupIDs</span>: <span class="hljs-literal">false</span> }       <span class="hljs-comment">// ä¿ç•™IDï¼Œé¿å…CSSé€‰æ‹©å™¨å¤±æ•ˆ</span>
                ]
            })
        ]))
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">dest</span>(<span class="hljs-string">`<span class="hljs-subst">${paths.dist}</span>/images`</span>)); <span class="hljs-comment">// è¾“å‡ºåˆ°dist/imagesç›®å½•</span>
}

<span class="hljs-comment">// ===== å­—ä½“æ–‡ä»¶å¤åˆ¶ =====</span>
<span class="hljs-comment">// å°†å­—ä½“æ–‡ä»¶ç›´æ¥å¤åˆ¶åˆ°è¾“å‡ºç›®å½•ï¼Œä¸åšå¤„ç†</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">fonts</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">src</span>(paths.<span class="hljs-property">fonts</span>)            <span class="hljs-comment">// è¯»å–å­—ä½“æ–‡ä»¶</span>
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">dest</span>(<span class="hljs-string">`<span class="hljs-subst">${paths.dist}</span>/fonts`</span>)); <span class="hljs-comment">// è¾“å‡ºåˆ°dist/fontsç›®å½•</span>
}

<span class="hljs-comment">// ===== å¼€å‘æœåŠ¡å™¨é…ç½® =====</span>
<span class="hljs-comment">// å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨ï¼Œæ”¯æŒçƒ­æ›´æ–°å’Œå®æ—¶åˆ·æ–°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">serve</span>(<span class="hljs-params"/>) {
    browserSync.<span class="hljs-title function_">init</span>({
        <span class="hljs-attr">server</span>: {
            <span class="hljs-attr">baseDir</span>: paths.<span class="hljs-property">dist</span>     <span class="hljs-comment">// æœåŠ¡å™¨æ ¹ç›®å½•</span>
        },
        <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span>,                <span class="hljs-comment">// ç«¯å£å·</span>
        <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>,                 <span class="hljs-comment">// è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span>
        <span class="hljs-attr">notify</span>: <span class="hljs-literal">false</span>               <span class="hljs-comment">// ä¸æ˜¾ç¤ºæµè§ˆå™¨é€šçŸ¥</span>
    });
    
    <span class="hljs-comment">// ===== æ–‡ä»¶ç›‘å¬é…ç½® =====</span>
    <span class="hljs-comment">// ç›‘å¬ä¸åŒç±»å‹çš„æ–‡ä»¶å˜åŒ–ï¼Œæ‰§è¡Œç›¸åº”çš„æ„å»ºä»»åŠ¡</span>
    <span class="hljs-title function_">watch</span>(paths.<span class="hljs-property">styles</span>, styles);                      <span class="hljs-comment">// SCSSæ–‡ä»¶å˜åŒ–æ—¶ï¼Œé‡æ–°ç¼–è¯‘æ ·å¼</span>
    
    <span class="hljs-title function_">watch</span>(paths.<span class="hljs-property">scripts</span>, scripts);                    <span class="hljs-comment">// JSæ–‡ä»¶å˜åŒ–æ—¶ï¼Œé‡æ–°ç¼–è¯‘è„šæœ¬</span>
    
    <span class="hljs-comment">// HTMLæ–‡ä»¶å˜åŒ–æ—¶ï¼Œé‡æ–°å¤åˆ¶å¹¶åˆ·æ–°æµè§ˆå™¨</span>
    <span class="hljs-title function_">watch</span>(paths.<span class="hljs-property">html</span>, html).<span class="hljs-title function_">on</span>(<span class="hljs-string">'change'</span>, browserSync.<span class="hljs-property">reload</span>);
    
    <span class="hljs-comment">// å›¾ç‰‡æ–‡ä»¶å˜åŒ–æ—¶ï¼Œé‡æ–°ä¼˜åŒ–å¹¶åˆ·æ–°æµè§ˆå™¨</span>
    <span class="hljs-title function_">watch</span>(paths.<span class="hljs-property">images</span>, images).<span class="hljs-title function_">on</span>(<span class="hljs-string">'change'</span>, browserSync.<span class="hljs-property">reload</span>);
}

<span class="hljs-comment">// ===== æ„å»ºä»»åŠ¡ç»„åˆ =====</span>
<span class="hljs-comment">// ä½¿ç”¨seriesï¼ˆä¸²è¡Œï¼‰å’Œparallelï¼ˆå¹¶è¡Œï¼‰ç»„åˆå¤šä¸ªä»»åŠ¡</span>
<span class="hljs-keyword">const</span> build = <span class="hljs-title function_">series</span>(
    clean,                           <span class="hljs-comment">// é¦–å…ˆæ¸…ç†ç›®å½•</span>
    <span class="hljs-title function_">parallel</span>(                        <span class="hljs-comment">// ç„¶åå¹¶è¡Œæ‰§è¡Œä»¥ä¸‹ä»»åŠ¡</span>
        html,                      <span class="hljs-comment">// HTMLå¤„ç†</span>
        styles,                    <span class="hljs-comment">// æ ·å¼å¤„ç†</span>
        scripts,                   <span class="hljs-comment">// è„šæœ¬å¤„ç†</span>
        images,                    <span class="hljs-comment">// å›¾ç‰‡ä¼˜åŒ–</span>
        fonts                      <span class="hljs-comment">// å­—ä½“å¤åˆ¶</span>
    )
);

<span class="hljs-comment">// ===== å¼€å‘ä»»åŠ¡ =====</span>
<span class="hljs-comment">// å…ˆæ‰§è¡Œå®Œæ•´æ„å»ºï¼Œç„¶åå¯åŠ¨å¼€å‘æœåŠ¡å™¨</span>
<span class="hljs-keyword">const</span> dev = <span class="hljs-title function_">series</span>(build, serve);

<span class="hljs-comment">// ===== ä»»åŠ¡å¯¼å‡º =====</span>
<span class="hljs-comment">// å°†ä»»åŠ¡å¯¼å‡ºä¸ºGulpå‘½ä»¤ï¼Œå¯åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨</span>
<span class="hljs-built_in">exports</span>.<span class="hljs-property">default</span> = dev;      <span class="hljs-comment">// é»˜è®¤ä»»åŠ¡ï¼šnpm run gulp æˆ– npm start</span>
<span class="hljs-built_in">exports</span>.<span class="hljs-property">build</span> = build;      <span class="hljs-comment">// ç”Ÿäº§æ„å»ºï¼šnpm run gulp build</span>
<span class="hljs-built_in">exports</span>.<span class="hljs-property">serve</span> = serve;      <span class="hljs-comment">// ä»…å¯åŠ¨æœåŠ¡ï¼šnpm run gulp serve</span>
</code></pre>
<h3 data-id="heading-10">é«˜çº§Gulpé…ç½®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¤æ‚çš„Gulpé…ç½®</span>
<span class="hljs-keyword">const</span> gulp = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp'</span>);
<span class="hljs-keyword">const</span> $ = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-load-plugins'</span>)();
<span class="hljs-keyword">const</span> webpackStream = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack-stream'</span>);
<span class="hljs-keyword">const</span> webpack = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack'</span>);
<span class="hljs-keyword">const</span> named = <span class="hljs-built_in">require</span>(<span class="hljs-string">'vinyl-named'</span>);
<span class="hljs-keyword">const</span> rev = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-rev'</span>);
<span class="hljs-keyword">const</span> revRewrite = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-rev-rewrite'</span>);
<span class="hljs-keyword">const</span> gulpsizereport = <span class="hljs-built_in">require</span>(<span class="hljs-string">'gulp-sizereport'</span>);

<span class="hljs-comment">// ç¯å¢ƒé…ç½®</span>
<span class="hljs-keyword">const</span> isProduction = process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span>;

<span class="hljs-comment">// Webpacké…ç½®</span>
<span class="hljs-keyword">const</span> webpackConfig = {
    <span class="hljs-attr">mode</span>: isProduction ? <span class="hljs-string">'production'</span> : <span class="hljs-string">'development'</span>,
    <span class="hljs-attr">devtool</span>: isProduction ? <span class="hljs-string">'source-map'</span> : <span class="hljs-string">'eval-source-map'</span>,
    <span class="hljs-attr">module</span>: {
        <span class="hljs-attr">rules</span>: [
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.js$/</span>,
                <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
                <span class="hljs-attr">use</span>: {
                    <span class="hljs-attr">loader</span>: <span class="hljs-string">'babel-loader'</span>,
                    <span class="hljs-attr">options</span>: {
                        <span class="hljs-attr">presets</span>: [<span class="hljs-string">'@babel/preset-env'</span>],
                        <span class="hljs-attr">plugins</span>: [<span class="hljs-string">'@babel/plugin-transform-runtime'</span>]
                    }
                }
            }
        ]
    },
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-keyword">new</span> webpack.<span class="hljs-title class_">ProvidePlugin</span>({
            <span class="hljs-attr">$</span>: <span class="hljs-string">'jquery'</span>,
            <span class="hljs-attr">jQuery</span>: <span class="hljs-string">'jquery'</span>
        })
    ],
    <span class="hljs-attr">optimization</span>: {
        <span class="hljs-attr">splitChunks</span>: {
            <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>,
            <span class="hljs-attr">cacheGroups</span>: {
                <span class="hljs-attr">vendor</span>: {
                    <span class="hljs-attr">test</span>: <span class="hljs-regexp">/[\\/]node_modules[\\/]/</span>,
                    <span class="hljs-attr">name</span>: <span class="hljs-string">'vendors'</span>,
                    <span class="hljs-attr">chunks</span>: <span class="hljs-string">'all'</span>
                }
            }
        }
    }
};

<span class="hljs-comment">// å¢é‡æ„å»º</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">changed</span>(<span class="hljs-params">done</span>) {
    <span class="hljs-keyword">return</span> $.<span class="hljs-title function_">changed</span>(<span class="hljs-string">'dist'</span>, { <span class="hljs-attr">hasChanged</span>: $.changed.<span class="hljs-property">compareSha1Digest</span> });
}

<span class="hljs-comment">// é”™è¯¯å¤„ç†</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleError</span>(<span class="hljs-params">error</span>) {
    $.util.<span class="hljs-title function_">log</span>($.util.<span class="hljs-property">colors</span>.<span class="hljs-title function_">red</span>(<span class="hljs-string">'Error: '</span> + error.<span class="hljs-property">message</span>));
    <span class="hljs-keyword">if</span> (isProduction) {
        process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'end'</span>);
}

<span class="hljs-comment">// å¤„ç†JavaScript</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">scripts</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> gulp.<span class="hljs-title function_">src</span>([<span class="hljs-string">'src/js/**/*.js'</span>, <span class="hljs-string">'!src/js/**/*.min.js'</span>])
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">plumber</span>({ <span class="hljs-attr">errorHandler</span>: handleError }))
        .<span class="hljs-title function_">pipe</span>($.<span class="hljs-title function_">if</span>(!isProduction, $.sourcemaps.<span class="hljs-title function_">init</span>()))
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">named</span>())
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">webpackStream</span>(webpackConfig, webpack))
        .<span class="hljs-title function_">pipe</span>($.<span class="hljs-title function_">if</span>(isProduction, $.<span class="hljs-title function_">uglify</span>({
            <span class="hljs-attr">compress</span>: { <span class="hljs-attr">drop_console</span>: <span class="hljs-literal">true</span> }
        })))
        .<span class="hljs-title function_">pipe</span>($.<span class="hljs-title function_">if</span>(!isProduction, $.sourcemaps.<span class="hljs-title function_">write</span>(<span class="hljs-string">'.'</span>)))
        .<span class="hljs-title function_">pipe</span>($.<span class="hljs-title function_">if</span>(isProduction, <span class="hljs-title function_">rev</span>()))
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">dest</span>(<span class="hljs-string">'dist/js'</span>))
        .<span class="hljs-title function_">pipe</span>($.<span class="hljs-title function_">if</span>(isProduction, rev.<span class="hljs-title function_">manifest</span>()))
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">dest</span>(<span class="hljs-string">'dist/js'</span>));
}

<span class="hljs-comment">// å¤„ç†CSS</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">styles</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> postcssPlugins = [
        <span class="hljs-built_in">require</span>(<span class="hljs-string">'autoprefixer'</span>)(),
        <span class="hljs-built_in">require</span>(<span class="hljs-string">'cssnano'</span>)()
    ];
    
    <span class="hljs-keyword">return</span> gulp.<span class="hljs-title function_">src</span>(<span class="hljs-string">'src/scss/**/*.scss'</span>)
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">plumber</span>({ <span class="hljs-attr">errorHandler</span>: handleError }))
        .<span class="hljs-title function_">pipe</span>($.<span class="hljs-title function_">if</span>(!isProduction, $.sourcemaps.<span class="hljs-title function_">init</span>()))
        .<span class="hljs-title function_">pipe</span>($.sass.<span class="hljs-title function_">sync</span>({ <span class="hljs-attr">outputStyle</span>: <span class="hljs-string">'expanded'</span> }).<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, $.sass.<span class="hljs-property">logError</span>))
        .<span class="hljs-title function_">pipe</span>($.<span class="hljs-title function_">postcss</span>(postcssPlugins))
        .<span class="hljs-title function_">pipe</span>($.<span class="hljs-title function_">if</span>(isProduction, $.<span class="hljs-title function_">cleanCss</span>()))
        .<span class="hljs-title function_">pipe</span>($.<span class="hljs-title function_">if</span>(isProduction, <span class="hljs-title function_">rev</span>()))
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">dest</span>(<span class="hljs-string">'dist/css'</span>))
        .<span class="hljs-title function_">pipe</span>($.<span class="hljs-title function_">if</span>(isProduction, rev.<span class="hljs-title function_">manifest</span>()))
        .<span class="hljs-title function_">pipe</span>(<span class="hljs-title function_">dest</span>(<span class="hljs-string">'dist/css'</span>));
}

<span class="hljs-comment">// ç‰ˆæœ¬æ§åˆ¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">revision</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> manifest = gulp.<span class="hljs-title function_">src</span>(<span class="hljs-string">'dist/**/*.json'</span>);
    
    <span class="hljs-keyword">return</span> gulp.<span class="hljs-title function_">src</span>([<span class="hljs-string">'dist/**/*.html'</span>])
        .<span class="hljs-title function_">pipe</span>($.<span class="hljs-title function_">revRewrite</span>({ manifest }))
        .<span class="hljs-title function_">pipe</span>(gulp.<span class="hljs-title function_">dest</span>(<span class="hljs-string">'dist'</span>));
}

<span class="hljs-comment">// æ–‡ä»¶å¤§å°æŠ¥å‘Š</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sizeReport</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> gulp.<span class="hljs-title function_">src</span>(<span class="hljs-string">'dist/**/*'</span>)
        .<span class="hljs-title function_">pipe</span>($.<span class="hljs-title function_">sizereport</span>({
            <span class="hljs-attr">gzip</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">total</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">title</span>: <span class="hljs-string">'Build Size Report'</span>
        }));
}

<span class="hljs-comment">// å‹ç¼©æ£€æŸ¥</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">gzip</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> gulp.<span class="hljs-title function_">src</span>(<span class="hljs-string">'dist/**/*.{js,css,html}'</span>)
        .<span class="hljs-title function_">pipe</span>($.<span class="hljs-title function_">gzip</span>({ <span class="hljs-attr">append</span>: <span class="hljs-literal">true</span> }))
        .<span class="hljs-title function_">pipe</span>(gulp.<span class="hljs-title function_">dest</span>(<span class="hljs-string">'dist'</span>));
}

<span class="hljs-comment">// å®Œæ•´çš„ç”Ÿäº§æ„å»º</span>
<span class="hljs-keyword">const</span> production = <span class="hljs-title function_">series</span>(
    clean,
    <span class="hljs-title function_">parallel</span>(html, styles, scripts, images),
    revision,
    sizeReport,
    gzip
);

<span class="hljs-comment">// å¯¼å‡ºä»»åŠ¡</span>
<span class="hljs-built_in">exports</span>.<span class="hljs-property">default</span> = dev;
<span class="hljs-built_in">exports</span>.<span class="hljs-property">build</span> = build;
<span class="hljs-built_in">exports</span>.<span class="hljs-property">production</span> = production;
</code></pre>
<hr/>
<h2 data-id="heading-11">Viteç°ä»£åŒ–æ„å»º</h2>
<h3 data-id="heading-12">ViteåŸºç¡€é…ç½®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js - Viteæ„å»ºé…ç½®æ–‡ä»¶</span>

<span class="hljs-comment">// ===== å¯¼å…¥Viteç›¸å…³æ¨¡å— =====</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>;        <span class="hljs-comment">// Viteé…ç½®å·¥å…·å‡½æ•°</span>
<span class="hljs-keyword">import</span> vue <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-vue'</span>;         <span class="hljs-comment">// Vueå•æ–‡ä»¶ç»„ä»¶æ”¯æŒ</span>
<span class="hljs-keyword">import</span> { resolve } <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>;               <span class="hljs-comment">// Node.jsè·¯å¾„è§£æå·¥å…·</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
    <span class="hljs-comment">// ===== æ’ä»¶é…ç½® =====</span>
    <span class="hljs-comment">// Viteä½¿ç”¨æ’ä»¶ç³»ç»Ÿæ¥æ‰©å±•åŠŸèƒ½</span>
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-title function_">vue</span>(),  <span class="hljs-comment">// å¯ç”¨Vueå•æ–‡ä»¶ç»„ä»¶(.vueæ–‡ä»¶)æ”¯æŒ</span>
    ],
    
    <span class="hljs-comment">// ===== è·¯å¾„åˆ«åé…ç½® =====</span>
    <span class="hljs-comment">// è®¾ç½®æ¨¡å—å¯¼å…¥çš„åˆ«åï¼Œç®€åŒ–ç›¸å¯¹è·¯å¾„å¼•ç”¨</span>
    <span class="hljs-attr">resolve</span>: {
        <span class="hljs-attr">alias</span>: {
            <span class="hljs-comment">// '@' æŒ‡å‘srcç›®å½•ï¼Œä¾¿äºæ–‡ä»¶å¼•ç”¨</span>
            <span class="hljs-string">'@'</span>: <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>),
            
            <span class="hljs-comment">// å„ä¸ªå­æ¨¡å—çš„åˆ«åï¼Œæé«˜ä»£ç å¯è¯»æ€§</span>
            <span class="hljs-string">'@components'</span>: <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src/components'</span>),
            <span class="hljs-string">'@utils'</span>: <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src/utils'</span>),
            <span class="hljs-string">'@assets'</span>: <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src/assets'</span>)
        }
    },
    
    <span class="hljs-comment">// ===== å¼€å‘æœåŠ¡å™¨é…ç½® =====</span>
    <span class="hljs-comment">// é…ç½®Viteçš„å¼€å‘æœåŠ¡å™¨è¡Œä¸º</span>
    <span class="hljs-attr">server</span>: {
        <span class="hljs-attr">host</span>: <span class="hljs-string">'0.0.0.0'</span>,           <span class="hljs-comment">// ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ï¼Œä¾¿äºå±€åŸŸç½‘è®¿é—®</span>
        <span class="hljs-attr">port</span>: <span class="hljs-number">3000</span>,                <span class="hljs-comment">// å¼€å‘æœåŠ¡å™¨ç«¯å£å·</span>
        <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>,                 <span class="hljs-comment">// å¯åŠ¨æ—¶è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span>
        <span class="hljs-attr">cors</span>: <span class="hljs-literal">true</span>,                 <span class="hljs-comment">// å¯ç”¨CORSï¼Œå…è®¸è·¨åŸŸè¯·æ±‚</span>
        
        <span class="hljs-comment">// ===== ä»£ç†é…ç½® =====</span>
        <span class="hljs-comment">// å°†ç‰¹å®šè·¯å¾„çš„è¯·æ±‚ä»£ç†åˆ°åç«¯æœåŠ¡å™¨ï¼Œè§£å†³å¼€å‘ç¯å¢ƒè·¨åŸŸé—®é¢˜</span>
        <span class="hljs-attr">proxy</span>: {
            <span class="hljs-comment">// APIè¯·æ±‚ä»£ç†</span>
            <span class="hljs-string">'/api'</span>: {
                <span class="hljs-attr">target</span>: <span class="hljs-string">'http://localhost:8080'</span>,  <span class="hljs-comment">// åç«¯APIæœåŠ¡å™¨åœ°å€</span>
                <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,                 <span class="hljs-comment">// æ”¹å˜è¯·æ±‚å¤´çš„Originå­—æ®µ</span>
                <span class="hljs-attr">rewrite</span>: <span class="hljs-function">(<span class="hljs-params">path</span>) =&gt;</span> path.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^\/api/</span>, <span class="hljs-string">''</span>) <span class="hljs-comment">// é‡å†™è·¯å¾„ï¼Œç§»é™¤/apiå‰ç¼€</span>
            },
            
            <span class="hljs-comment">// æ–‡ä»¶ä¸Šä¼ ä»£ç†</span>
            <span class="hljs-string">'/upload'</span>: {
                <span class="hljs-attr">target</span>: <span class="hljs-string">'http://localhost:8080'</span>,  <span class="hljs-comment">// æ–‡ä»¶ä¸Šä¼ æœåŠ¡å™¨åœ°å€</span>
                <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>                  <span class="hljs-comment">// æ”¹å˜è¯·æ±‚å¤´Origin</span>
            }
        }
    },
    
    <span class="hljs-comment">// ===== æ„å»ºé…ç½® =====</span>
    <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…çš„ç›¸å…³é…ç½®</span>
    <span class="hljs-attr">build</span>: {
        <span class="hljs-attr">target</span>: <span class="hljs-string">'es2015'</span>,           <span class="hljs-comment">// æ„å»ºç›®æ ‡ï¼šæ”¯æŒES2015è¯­æ³•çš„æµè§ˆå™¨</span>
        <span class="hljs-attr">outDir</span>: <span class="hljs-string">'dist'</span>,             <span class="hljs-comment">// è¾“å‡ºç›®å½•</span>
        <span class="hljs-attr">assetsDir</span>: <span class="hljs-string">'assets'</span>,         <span class="hljs-comment">// é™æ€èµ„æºè¾“å‡ºç›®å½•ï¼ˆç›¸å¯¹äºoutDirï¼‰</span>
        <span class="hljs-attr">sourcemap</span>: <span class="hljs-literal">false</span>,           <span class="hljs-comment">// æ˜¯å¦ç”Ÿæˆæºç æ˜ å°„æ–‡ä»¶ï¼Œç”Ÿäº§ç¯å¢ƒé€šå¸¸å…³é—­</span>
        
        <span class="hljs-comment">// ===== å‹ç¼©é…ç½® =====</span>
        <span class="hljs-attr">minify</span>: <span class="hljs-string">'terser'</span>,           <span class="hljs-comment">// ä½¿ç”¨Terserè¿›è¡Œä»£ç å‹ç¼©ï¼ˆä¹Ÿå¯ä»¥ç”¨'esbuild'ï¼‰</span>
        
        <span class="hljs-comment">// ===== Terserå‹ç¼©é€‰é¡¹ =====</span>
        <span class="hljs-attr">terserOptions</span>: {
            <span class="hljs-attr">compress</span>: {
                <span class="hljs-attr">drop_console</span>: <span class="hljs-literal">true</span>,     <span class="hljs-comment">// ç§»é™¤æ‰€æœ‰consoleè¯­å¥</span>
                <span class="hljs-attr">drop_debugger</span>: <span class="hljs-literal">true</span>     <span class="hljs-comment">// ç§»é™¤æ‰€æœ‰debuggerè¯­å¥</span>
            }
        },
        
        <span class="hljs-comment">// ===== ä»£ç åˆ†å‰²é…ç½® =====</span>
        <span class="hljs-comment">// ä½¿ç”¨Rollupçš„manualChunksè¿›è¡Œæ‰‹åŠ¨ä»£ç åˆ†å‰²</span>
        <span class="hljs-attr">rollupOptions</span>: {
            <span class="hljs-attr">output</span>: {
                <span class="hljs-comment">// æ‰‹åŠ¨åˆ†å‰²ç¬¬ä¸‰æ–¹åº“ï¼Œä¼˜åŒ–ç¼“å­˜ç­–ç•¥</span>
                <span class="hljs-attr">manualChunks</span>: {
                    <span class="hljs-comment">// Vueæ ¸å¿ƒåº“å•ç‹¬åˆ†åŒ…</span>
                    <span class="hljs-string">'vendor'</span>: [<span class="hljs-string">'vue'</span>, <span class="hljs-string">'vue-router'</span>, <span class="hljs-string">'vuex'</span>],
                    
                    <span class="hljs-comment">// UIç»„ä»¶åº“å•ç‹¬åˆ†åŒ…</span>
                    <span class="hljs-string">'ui'</span>: [<span class="hljs-string">'element-plus'</span>],
                    
                    <span class="hljs-comment">// å·¥å…·åº“å•ç‹¬åˆ†åŒ…</span>
                    <span class="hljs-string">'utils'</span>: [<span class="hljs-string">'lodash-es'</span>, <span class="hljs-string">'axios'</span>]
                }
            }
        },
        
        <span class="hljs-comment">// ===== æ„å»ºä¼˜åŒ–é…ç½® =====</span>
        <span class="hljs-attr">chunkSizeWarningLimit</span>: <span class="hljs-number">1000</span>,     <span class="hljs-comment">// Chunkå¤§å°è­¦å‘Šé˜ˆå€¼ï¼ˆKBï¼‰</span>
        <span class="hljs-attr">assetsInlineLimit</span>: <span class="hljs-number">4096</span>          <span class="hljs-comment">// å°äº4KBçš„èµ„æºè½¬ä¸ºbase64å†…è”</span>
    },
    
    <span class="hljs-comment">// ===== CSSé…ç½® =====</span>
    <span class="hljs-comment">// CSSå¤„ç†å’Œé¢„å¤„ç†å™¨é…ç½®</span>
    <span class="hljs-attr">css</span>: {
        <span class="hljs-comment">// ===== é¢„å¤„ç†å™¨é€‰é¡¹ =====</span>
        <span class="hljs-attr">preprocessorOptions</span>: {
            <span class="hljs-comment">// SCSSå…¨å±€å˜é‡æ³¨å…¥</span>
            <span class="hljs-attr">scss</span>: {
                <span class="hljs-comment">// åœ¨æ¯ä¸ªSCSSæ–‡ä»¶å¼€å¤´è‡ªåŠ¨å¯¼å…¥å…¨å±€å˜é‡æ–‡ä»¶</span>
                <span class="hljs-comment">// é¿å…æ¯ä¸ªæ–‡ä»¶éƒ½è¦æ‰‹åŠ¨@import</span>
                <span class="hljs-attr">additionalData</span>: <span class="hljs-string">`@import "@/styles/variables.scss";`</span>
            }
        },
        
        <span class="hljs-comment">// ===== CSSæ¨¡å—é…ç½® =====</span>
        <span class="hljs-attr">modules</span>: {
            <span class="hljs-comment">// CSSç±»åè½¬æ¢è§„åˆ™ï¼šä½¿ç”¨é©¼å³°å‘½å</span>
            <span class="hljs-attr">localsConvention</span>: <span class="hljs-string">'camelCaseOnly'</span>
        }
    },
    
    <span class="hljs-comment">// ===== ç¯å¢ƒå˜é‡å®šä¹‰ =====</span>
    <span class="hljs-comment">// åœ¨æ„å»ºæ—¶å®šä¹‰å…¨å±€å¸¸é‡ï¼Œå¯åœ¨ä»£ç ä¸­ç›´æ¥ä½¿ç”¨</span>
    <span class="hljs-attr">define</span>: {
        <span class="hljs-comment">// åº”ç”¨ç‰ˆæœ¬å·ï¼Œä»package.jsonä¸­è¯»å–</span>
        <span class="hljs-attr">__APP_VERSION__</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">npm_package_version</span>)
    },
    
    <span class="hljs-comment">// ===== ä¾èµ–ä¼˜åŒ–é…ç½® =====</span>
    <span class="hljs-comment">// Viteåœ¨å¼€å‘æ—¶ä¼šé¢„æ„å»ºä¾èµ–ï¼Œä¼˜åŒ–å¯åŠ¨æ€§èƒ½</span>
    <span class="hljs-attr">optimizeDeps</span>: {
        <span class="hljs-comment">// ===== å¼ºåˆ¶é¢„æ„å»ºçš„ä¾èµ– =====</span>
        <span class="hljs-comment">// è¿™äº›ä¾èµ–ä¼šåœ¨å¼€å‘æ—¶è¢«é¢„æ„å»ºï¼Œé¿å…æŒ‰éœ€è½¬æ¢</span>
        <span class="hljs-attr">include</span>: [
            <span class="hljs-string">'vue'</span>,                   <span class="hljs-comment">// Vueæ ¸å¿ƒ</span>
            <span class="hljs-string">'vue-router'</span>,            <span class="hljs-comment">// è·¯ç”±åº“</span>
            <span class="hljs-string">'vuex'</span>,                  <span class="hljs-comment">// çŠ¶æ€ç®¡ç†åº“</span>
            <span class="hljs-string">'axios'</span>,                 <span class="hljs-comment">// HTTPå®¢æˆ·ç«¯</span>
            <span class="hljs-string">'lodash-es'</span>              <span class="hljs-comment">// å·¥å…·åº“</span>
        ],
        
        <span class="hljs-comment">// ===== æ’é™¤é¢„æ„å»ºçš„ä¾èµ– =====</span>
        <span class="hljs-comment">// è¿™äº›ä¾èµ–ä¸ä¼šè¢«é¢„æ„å»ºï¼ŒæŒ‰éœ€åŠ è½½</span>
        <span class="hljs-attr">exclude</span>: [<span class="hljs-string">'@babel/polyfill'</span>]   <span class="hljs-comment">// Babel polyfillé€šå¸¸éœ€è¦æŒ‰éœ€åŠ è½½</span>
    }
});
</code></pre>
<h3 data-id="heading-13">Viteç¯å¢ƒé…ç½®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ===== å¼€å‘ç¯å¢ƒå˜é‡æ–‡ä»¶ =====</span>
<span class="hljs-comment">// .env.development - å¼€å‘ç¯å¢ƒä¸“ç”¨é…ç½®</span>
<span class="hljs-variable constant_">VITE_APP_TITLE</span>=<span class="hljs-title class_">My</span> <span class="hljs-title class_">App</span> <span class="hljs-title class_">Development</span>      <span class="hljs-comment">// åº”ç”¨æ ‡é¢˜ï¼ˆå¼€å‘ç¯å¢ƒï¼‰</span>
<span class="hljs-variable constant_">VITE_API_BASE_URL</span>=<span class="hljs-attr">http</span>:<span class="hljs-comment">//localhost:8080/api  // APIåŸºç¡€URLï¼ˆå¼€å‘ç¯å¢ƒï¼‰</span>
<span class="hljs-variable constant_">VITE_APP_ENV</span>=development              <span class="hljs-comment">// ç¯å¢ƒæ ‡è¯†</span>

<span class="hljs-comment">// ===== ç”Ÿäº§ç¯å¢ƒå˜é‡æ–‡ä»¶ =====</span>
<span class="hljs-comment">// .env.production - ç”Ÿäº§ç¯å¢ƒä¸“ç”¨é…ç½®</span>
<span class="hljs-variable constant_">VITE_APP_TITLE</span>=<span class="hljs-title class_">My</span> <span class="hljs-title class_">App</span>               <span class="hljs-comment">// åº”ç”¨æ ‡é¢˜ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰</span>
<span class="hljs-variable constant_">VITE_API_BASE_URL</span>=<span class="hljs-attr">https</span>:<span class="hljs-comment">//api.example.com  // APIåŸºç¡€URLï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰</span>
<span class="hljs-variable constant_">VITE_APP_ENV</span>=production             <span class="hljs-comment">// ç¯å¢ƒæ ‡è¯†</span>

<span class="hljs-comment">// ===== é¢„å‘å¸ƒç¯å¢ƒå˜é‡æ–‡ä»¶ =====</span>
<span class="hljs-comment">// .env.staging - é¢„å‘å¸ƒç¯å¢ƒä¸“ç”¨é…ç½®</span>
<span class="hljs-variable constant_">VITE_APP_TITLE</span>=<span class="hljs-title class_">My</span> <span class="hljs-title class_">App</span> <span class="hljs-title class_">Staging</span>        <span class="hljs-comment">// åº”ç”¨æ ‡é¢˜ï¼ˆé¢„å‘å¸ƒç¯å¢ƒï¼‰</span>
<span class="hljs-variable constant_">VITE_API_BASE_URL</span>=<span class="hljs-attr">https</span>:<span class="hljs-comment">//staging-api.example.com  // APIåŸºç¡€URLï¼ˆé¢„å‘å¸ƒç¯å¢ƒï¼‰</span>
<span class="hljs-variable constant_">VITE_APP_ENV</span>=staging                <span class="hljs-comment">// ç¯å¢ƒæ ‡è¯†</span>

<span class="hljs-comment">// ===== åœ¨Viteé…ç½®ä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡ =====</span>
<span class="hljs-comment">// vite.config.js - æ ¹æ®ä¸åŒç¯å¢ƒåŠ¨æ€é…ç½®</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(<span class="hljs-function">(<span class="hljs-params">{ mode }</span>) =&gt;</span> {
    <span class="hljs-comment">// æ ¹æ®å‘½ä»¤è¡Œå‚æ•°åˆ¤æ–­å½“å‰ç¯å¢ƒ</span>
    <span class="hljs-keyword">const</span> isProduction = mode === <span class="hljs-string">'production'</span>;
    <span class="hljs-keyword">const</span> isStaging = mode === <span class="hljs-string">'staging'</span>;
    
    <span class="hljs-keyword">return</span> {
        <span class="hljs-comment">// ===== ç¯å¢ƒå˜é‡å®šä¹‰ =====</span>
        <span class="hljs-comment">// å°†ç¯å¢ƒå˜é‡æ³¨å…¥åˆ°ä»£ç ä¸­ï¼Œå¯åœ¨æ„å»ºæ—¶ä½¿ç”¨</span>
        <span class="hljs-attr">define</span>: {
            <span class="hljs-comment">// æ˜¯å¦ä¸ºç”Ÿäº§ç¯å¢ƒæ ‡è¯†</span>
            <span class="hljs-attr">__IS_PROD__</span>: isProduction,
            
            <span class="hljs-comment">// ç¯å¢ƒæ ‡è¯†å­—ç¬¦ä¸²</span>
            <span class="hljs-attr">__APP_ENV__</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_APP_ENV</span>)
        },
        
        <span class="hljs-comment">// ===== æ ¹æ®ç¯å¢ƒé…ç½®æ„å»ºé€‰é¡¹ =====</span>
        <span class="hljs-attr">build</span>: {
            <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒå¯ç”¨å‹ç¼©ï¼Œå¼€å‘ç¯å¢ƒä¸å‹ç¼©ä¾¿äºè°ƒè¯•</span>
            <span class="hljs-attr">minify</span>: isProduction ? <span class="hljs-string">'terser'</span> : <span class="hljs-literal">false</span>,
            
            <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒå…³é—­æºç æ˜ å°„ï¼Œå¼€å‘ç¯å¢ƒå¯ç”¨å†…è”æºç æ˜ å°„</span>
            <span class="hljs-attr">sourcemap</span>: isProduction ? <span class="hljs-literal">false</span> : <span class="hljs-string">'inline'</span>
        },
        
        <span class="hljs-comment">// ===== æ ¹æ®ç¯å¢ƒé…ç½®æœåŠ¡å™¨ =====</span>
        <span class="hljs-attr">server</span>: {
            <span class="hljs-comment">// ä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒçš„ä»£ç†é…ç½®</span>
            <span class="hljs-attr">proxy</span>: {
                <span class="hljs-string">'/api'</span>: {
                    <span class="hljs-comment">// æ ¹æ®ç¯å¢ƒé€‰æ‹©ä¸åŒçš„APIåœ°å€</span>
                    <span class="hljs-attr">target</span>: isProduction 
                        ? <span class="hljs-string">'https://api.example.com'</span> 
                        : isStaging 
                            ? <span class="hljs-string">'https://staging-api.example.com'</span> 
                            : <span class="hljs-string">'http://localhost:8080'</span>,
                    <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,
                    <span class="hljs-attr">rewrite</span>: <span class="hljs-function">(<span class="hljs-params">path</span>) =&gt;</span> path.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/^\/api/</span>, <span class="hljs-string">''</span>)
                }
            }
        }
    };
});
</code></pre>
<h3 data-id="heading-14">Viteæ’ä»¶å¼€å‘</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite-plugin-custom.js - è‡ªå®šä¹‰Viteæ’ä»¶ç¤ºä¾‹</span>

<span class="hljs-comment">// ===== æ’ä»¶ä¸»å‡½æ•° =====</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">customPlugin</span>(<span class="hljs-params">options = {}</span>) {
    <span class="hljs-keyword">return</span> {
        <span class="hljs-comment">// ===== æ’ä»¶åç§° =====</span>
        <span class="hljs-comment">// ç”¨äºåœ¨æ—¥å¿—å’Œè°ƒè¯•ä¸­è¯†åˆ«æ’ä»¶</span>
        <span class="hljs-attr">name</span>: <span class="hljs-string">'vite-plugin-custom'</span>,
        
        <span class="hljs-comment">// ===== é…ç½®é’©å­ =====</span>
        <span class="hljs-comment">// åœ¨Viteé…ç½®è§£æä¹‹å‰è¢«è°ƒç”¨ï¼Œå¯ä»¥ä¿®æ”¹é…ç½®</span>
        <span class="hljs-title function_">config</span>(<span class="hljs-params">config, { command }</span>) {
            <span class="hljs-comment">// command: 'serve' | 'build'ï¼Œè¡¨ç¤ºå½“å‰æ˜¯å¼€å‘è¿˜æ˜¯æ„å»ºæ¨¡å¼</span>
            
            <span class="hljs-comment">// å¦‚æœæ˜¯å¼€å‘æ¨¡å¼ï¼Œæ·»åŠ å¼€å‘æœåŠ¡å™¨é…ç½®</span>
            <span class="hljs-keyword">if</span> (command === <span class="hljs-string">'serve'</span>) {
                config.<span class="hljs-property">server</span> = {
                    ...config.<span class="hljs-property">server</span>,
                    ...options.<span class="hljs-property">devServer</span>     <span class="hljs-comment">// åˆå¹¶æ’ä»¶ä¼ å…¥çš„æœåŠ¡å™¨é…ç½®</span>
                };
            }
            
            <span class="hljs-keyword">return</span> config; <span class="hljs-comment">// è¿”å›ä¿®æ”¹åçš„é…ç½®</span>
        },
        
        <span class="hljs-comment">// ===== é…ç½®è§£æå®Œæˆé’©å­ =====</span>
        <span class="hljs-comment">// åœ¨Viteé…ç½®è§£æå®Œæˆåè¢«è°ƒç”¨</span>
        <span class="hljs-title function_">configResolved</span>(<span class="hljs-params">config</span>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Vite config resolved:'</span>, config);
            <span class="hljs-comment">// è¿™é‡Œå¯ä»¥éªŒè¯é…ç½®æˆ–è¿›è¡Œé¢å¤–çš„åˆå§‹åŒ–å·¥ä½œ</span>
        },
        
        <span class="hljs-comment">// ===== å¼€å‘æœåŠ¡å™¨é…ç½®é’©å­ =====</span>
        <span class="hljs-comment">// åœ¨å¼€å‘æœåŠ¡å™¨åˆ›å»ºåè¢«è°ƒç”¨ï¼Œå¯ä»¥æ·»åŠ è‡ªå®šä¹‰ä¸­é—´ä»¶</span>
        <span class="hljs-title function_">configureServer</span>(<span class="hljs-params">server</span>) {
            <span class="hljs-comment">// æ·»åŠ è‡ªå®šä¹‰APIè·¯ç”±</span>
            server.<span class="hljs-property">middlewares</span>.<span class="hljs-title function_">use</span>(<span class="hljs-string">'/api/custom'</span>, <span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> {
                <span class="hljs-comment">// è‡ªå®šä¹‰APIå“åº”</span>
                res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'application/json'</span>);
                res.<span class="hljs-title function_">end</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
                    <span class="hljs-attr">message</span>: <span class="hljs-string">'Custom middleware response'</span>,
                    <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
                }));
            });
        },
        
        <span class="hljs-comment">// ===== ä»£ç è½¬æ¢é’©å­ =====</span>
        <span class="hljs-comment">// å¯¹æ¨¡å—çš„æºç è¿›è¡Œè½¬æ¢</span>
        <span class="hljs-title function_">transform</span>(<span class="hljs-params">code, id</span>) {
            <span class="hljs-comment">// code: æ–‡ä»¶å†…å®¹</span>
            <span class="hljs-comment">// id: æ–‡ä»¶è·¯å¾„ï¼ˆå«æŸ¥è¯¢å‚æ•°ï¼‰</span>
            
            <span class="hljs-comment">// åªå¤„ç†.custom.jsæ–‡ä»¶</span>
            <span class="hljs-keyword">if</span> (id.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">'.custom.js'</span>)) {
                <span class="hljs-comment">// æ›¿æ¢ä»£ç ä¸­çš„å ä½ç¬¦</span>
                <span class="hljs-keyword">const</span> transformedCode = code.<span class="hljs-title function_">replace</span>(
                    <span class="hljs-regexp">/__VERSION__/g</span>, 
                    options.<span class="hljs-property">version</span> || <span class="hljs-string">'1.0.0'</span>
                );
                
                <span class="hljs-keyword">return</span> {
                    <span class="hljs-attr">code</span>: transformedCode,     <span class="hljs-comment">// è½¬æ¢åçš„ä»£ç </span>
                    <span class="hljs-attr">map</span>: <span class="hljs-literal">null</span>                 <span class="hljs-comment">// æºç æ˜ å°„ï¼ˆè¿™é‡Œä¸éœ€è¦ï¼‰</span>
                };
            }
            
            <span class="hljs-comment">// è¿”å›nullè¡¨ç¤ºä¸å¤„ç†æ­¤æ–‡ä»¶</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        },
        
        <span class="hljs-comment">// ===== æ„å»ºå¼€å§‹é’©å­ =====</span>
        <span class="hljs-comment">// åœ¨æ„å»ºè¿‡ç¨‹å¼€å§‹æ—¶è¢«è°ƒç”¨</span>
        <span class="hljs-title function_">buildStart</span>(<span class="hljs-params"/>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸš€ Build started...'</span>);
            
            <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œæ„å»ºå‰çš„å‡†å¤‡å·¥ä½œ</span>
            <span class="hljs-comment">// æ¯”å¦‚æ¸…ç†ä¸´æ—¶æ–‡ä»¶ã€æ£€æŸ¥ä¾èµ–ç­‰</span>
        },
        
        <span class="hljs-comment">// ===== æ„å»ºç»“æŸé’©å­ =====</span>
        <span class="hljs-comment">// åœ¨æ„å»ºè¿‡ç¨‹ç»“æŸæ—¶è¢«è°ƒç”¨</span>
        <span class="hljs-title function_">buildEnd</span>(<span class="hljs-params"/>) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'âœ… Build completed!'</span>);
            
            <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œæ„å»ºåçš„æ¸…ç†å·¥ä½œ</span>
            <span class="hljs-comment">// æ¯”å¦‚å‘é€æ„å»ºé€šçŸ¥ã€ç”Ÿæˆæ„å»ºæŠ¥å‘Šç­‰</span>
        },
        
        <span class="hljs-comment">// ===== ç”Ÿæˆé’©å­ =====</span>
        <span class="hljs-comment">// åœ¨æ„å»ºå®Œæˆåï¼Œç”Ÿæˆæœ€ç»ˆæ–‡ä»¶æ—¶è¢«è°ƒç”¨</span>
        <span class="hljs-title function_">generateBundle</span>(<span class="hljs-params">options, bundle</span>) {
            <span class="hljs-comment">// options: ç”Ÿæˆé€‰é¡¹</span>
            <span class="hljs-comment">// bundle: åŒ…å«æ‰€æœ‰ç”Ÿæˆæ–‡ä»¶çš„ä¿¡æ¯</span>
            
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Generated <span class="hljs-subst">${<span class="hljs-built_in">Object</span>.keys(bundle).length}</span> files`</span>);
            
            <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œåˆ†ææ‰“åŒ…ç»“æœæˆ–ç”Ÿæˆé¢å¤–æ–‡ä»¶</span>
        }
    };
}

<span class="hljs-comment">// ===== ä½¿ç”¨è‡ªå®šä¹‰æ’ä»¶ =====</span>
<span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>;
<span class="hljs-keyword">import</span> { customPlugin } <span class="hljs-keyword">from</span> <span class="hljs-string">'./vite-plugin-custom'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰æ’ä»¶ï¼Œä¼ å…¥é…ç½®é€‰é¡¹</span>
        <span class="hljs-title function_">customPlugin</span>({
            <span class="hljs-attr">version</span>: <span class="hljs-string">'1.0.0'</span>,          <span class="hljs-comment">// æ’ä»¶ç‰ˆæœ¬å·</span>
            <span class="hljs-attr">devServer</span>: {                <span class="hljs-comment">// å¼€å‘æœåŠ¡å™¨é…ç½®</span>
                <span class="hljs-attr">port</span>: <span class="hljs-number">3001</span>,            <span class="hljs-comment">// è‡ªå®šä¹‰ç«¯å£</span>
                <span class="hljs-attr">open</span>: <span class="hljs-literal">false</span>             <span class="hljs-comment">// ä¸è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span>
            }
        })
    ]
});
</code></pre>
<hr/>
<h2 data-id="heading-15">å·¥ç¨‹åŒ–æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-16">ä»£ç è§„èŒƒå’Œè´¨é‡æ§åˆ¶</h3>
<p><strong>ESLinté…ç½®ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// .eslintrc.js - ESLintä»£ç æ£€æŸ¥é…ç½®æ–‡ä»¶</span>

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    <span class="hljs-comment">// ===== è¿è¡Œç¯å¢ƒé…ç½® =====</span>
    <span class="hljs-comment">// æŒ‡å®šä»£ç è¿è¡Œçš„ç¯å¢ƒï¼ŒESLintä¼šæ ¹æ®ç¯å¢ƒè‡ªåŠ¨ç¡®å®šå…¨å±€å˜é‡</span>
    <span class="hljs-attr">env</span>: {
        <span class="hljs-attr">browser</span>: <span class="hljs-literal">true</span>,    <span class="hljs-comment">// æµè§ˆå™¨ç¯å¢ƒï¼šæ”¯æŒwindowã€documentç­‰å…¨å±€å˜é‡</span>
        <span class="hljs-attr">es2021</span>: <span class="hljs-literal">true</span>,     <span class="hljs-comment">// ES2021è¯­æ³•ç¯å¢ƒï¼šæ”¯æŒPromiseã€Setç­‰</span>
        <span class="hljs-attr">node</span>: <span class="hljs-literal">true</span>        <span class="hljs-comment">// Node.jsç¯å¢ƒï¼šæ”¯æŒrequireã€processç­‰å…¨å±€å˜é‡</span>
    },
    
    <span class="hljs-comment">// ===== ç»§æ‰¿çš„è§„åˆ™é›† =====</span>
    <span class="hljs-comment">// ä»å·²æœ‰çš„è§„åˆ™é›†ç»§æ‰¿ï¼Œé¿å…é‡å¤é…ç½®</span>
    <span class="hljs-attr">extends</span>: [
        <span class="hljs-string">'eslint:recommended'</span>,           <span class="hljs-comment">// ESLintæ¨èè§„åˆ™</span>
        <span class="hljs-string">'@vue/standard'</span>,               <span class="hljs-comment">// Vue.jsæ ‡å‡†è§„åˆ™</span>
        <span class="hljs-string">'@vue/typescript/recommended'</span>,  <span class="hljs-comment">// Vue + TypeScriptæ¨èè§„åˆ™</span>
        <span class="hljs-string">'prettier'</span>                    <span class="hljs-comment">// Prettierè§„åˆ™é›†æˆï¼Œé¿å…æ ¼å¼å†²çª</span>
    ],
    
    <span class="hljs-comment">// ===== è§£æå™¨é€‰é¡¹ =====</span>
    <span class="hljs-attr">parserOptions</span>: {
        <span class="hljs-attr">ecmaVersion</span>: <span class="hljs-string">'latest'</span>,     <span class="hljs-comment">// æ”¯æŒæœ€æ–°çš„ECMAScriptè¯­æ³•</span>
        <span class="hljs-attr">sourceType</span>: <span class="hljs-string">'module'</span>        <span class="hljs-comment">// ä½¿ç”¨ESæ¨¡å—è¯­æ³•ï¼ˆimport/exportï¼‰</span>
    },
    
    <span class="hljs-comment">// ===== è‡ªå®šä¹‰è§„åˆ™ =====</span>
    <span class="hljs-attr">rules</span>: {
        <span class="hljs-comment">// ===== è°ƒè¯•è¯­å¥è§„åˆ™ =====</span>
        <span class="hljs-comment">// æ ¹æ®ç¯å¢ƒä¸¥æ ¼ç¨‹åº¦æ§åˆ¶è°ƒè¯•è¯­å¥</span>
        <span class="hljs-string">'no-console'</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> ? <span class="hljs-string">'error'</span> : <span class="hljs-string">'warn'</span>,
        <span class="hljs-string">'no-debugger'</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'production'</span> ? <span class="hljs-string">'error'</span> : <span class="hljs-string">'warn'</span>,
        
        <span class="hljs-comment">// ===== ä»£ç è´¨é‡è§„åˆ™ =====</span>
        <span class="hljs-string">'no-unused-vars'</span>: <span class="hljs-string">'warn'</span>,     <span class="hljs-comment">// æœªä½¿ç”¨çš„å˜é‡è­¦å‘Šï¼ˆä¸æŠ¥é”™ï¼Œå…è®¸ä¸´æ—¶è°ƒè¯•ï¼‰</span>
        <span class="hljs-string">'prefer-const'</span>: <span class="hljs-string">'error'</span>,       <span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨constè€Œä¸æ˜¯let</span>
        <span class="hljs-string">'no-var'</span>: <span class="hljs-string">'error'</span>,             <span class="hljs-comment">// ç¦æ­¢ä½¿ç”¨varï¼Œå¼ºåˆ¶ä½¿ç”¨let/const</span>
        
        <span class="hljs-comment">// ===== ä»£ç é£æ ¼è§„åˆ™ =====</span>
        <span class="hljs-string">'object-shorthand'</span>: <span class="hljs-string">'error'</span>,    <span class="hljs-comment">// å¯¹è±¡æ–¹æ³•ä½¿ç”¨ç®€å†™è¯­æ³•</span>
        <span class="hljs-string">'prefer-arrow-callback'</span>: <span class="hljs-string">'error'</span> <span class="hljs-comment">// å›è°ƒå‡½æ•°ä¼˜å…ˆä½¿ç”¨ç®­å¤´å‡½æ•°</span>
    },
    
    <span class="hljs-comment">// ===== æ–‡ä»¶è¦†ç›–è§„åˆ™ =====</span>
    <span class="hljs-comment">// é’ˆå¯¹ç‰¹å®šæ–‡ä»¶ç±»å‹ä½¿ç”¨ä¸åŒçš„è§„åˆ™é…ç½®</span>
    <span class="hljs-attr">overrides</span>: [
        {
            <span class="hljs-comment">// Vueå•æ–‡ä»¶ç»„ä»¶çš„ç‰¹æ®Šè§„åˆ™</span>
            <span class="hljs-attr">files</span>: [<span class="hljs-string">'*.vue'</span>],
            <span class="hljs-attr">rules</span>: {
                <span class="hljs-comment">// Vueå±æ€§æ¯è¡Œæ•°é‡é™åˆ¶</span>
                <span class="hljs-string">'vue/max-attributes-per-line'</span>: [<span class="hljs-string">'error'</span>, {
                    <span class="hljs-attr">singleline</span>: <span class="hljs-number">3</span>,    <span class="hljs-comment">// å•è¡Œæœ€å¤š3ä¸ªå±æ€§</span>
                    <span class="hljs-attr">multiline</span>: <span class="hljs-number">1</span>      <span class="hljs-comment">// å¤šè¡Œæ¯è¡Œ1ä¸ªå±æ€§</span>
                }]
            }
        }
    ]
};
</code></pre>
<p><strong>Prettieré…ç½®ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// .prettierrc - Prettierä»£ç æ ¼å¼åŒ–é…ç½®æ–‡ä»¶</span>

<span class="hljs-punctuation">{</span>
    <span class="hljs-comment">// ===== åˆ†å·é…ç½® =====</span>
    <span class="hljs-comment">// false: ä¸ä½¿ç”¨åˆ†å·</span>
    <span class="hljs-comment">// true: ä½¿ç”¨åˆ†å·</span>
    <span class="hljs-attr">"semi"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
    
    <span class="hljs-comment">// ===== å¼•å·é…ç½® =====</span>
    <span class="hljs-comment">// true: ä¼˜å…ˆä½¿ç”¨å•å¼•å·</span>
    <span class="hljs-comment">// false: ä¼˜å…ˆä½¿ç”¨åŒå¼•å·</span>
    <span class="hljs-attr">"singleQuote"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    
    <span class="hljs-comment">// ===== ç¼©è¿›é…ç½® =====</span>
    <span class="hljs-attr">"tabWidth"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// ç¼©è¿›ç©ºæ ¼æ•°</span>
    <span class="hljs-attr">"useTabs"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>      <span class="hljs-comment">// ä½¿ç”¨ç©ºæ ¼è€Œä¸æ˜¯Tabè¿›è¡Œç¼©è¿›</span>
    
    <span class="hljs-comment">// ===== è¡Œå®½é…ç½® =====</span>
    <span class="hljs-attr">"printWidth"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>     <span class="hljs-comment">// æ¯è¡Œæœ€å¤§å­—ç¬¦æ•°</span>
    
    <span class="hljs-comment">// ===== æ‹¬å·é…ç½® =====</span>
    <span class="hljs-attr">"bracketSpacing"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// å¯¹è±¡å­—é¢é‡æ‹¬å·å†…æ·»åŠ ç©ºæ ¼</span>
    <span class="hljs-attr">"bracketSameLine"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// JSXæ ‡ç­¾çš„&gt;ä¸ä¸å±æ€§åœ¨åŒä¸€è¡Œ</span>
    
    <span class="hljs-comment">// ===== ç®­å¤´å‡½æ•°é…ç½® =====</span>
    <span class="hljs-comment">// "avoid": å•å‚æ•°æ—¶ä¸åŠ æ‹¬å· (x) =&gt; {} æ”¹ä¸º x =&gt; {}</span>
    <span class="hljs-comment">// "always": æ€»æ˜¯åŠ æ‹¬å·</span>
    <span class="hljs-attr">"arrowParens"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"avoid"</span><span class="hljs-punctuation">,</span>
    
    <span class="hljs-comment">// ===== è¡Œå°¾é…ç½® =====</span>
    <span class="hljs-attr">"endOfLine"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"lf"</span><span class="hljs-punctuation">,</span>   <span class="hljs-comment">// ä½¿ç”¨LFæ¢è¡Œç¬¦ï¼ˆUnixé£æ ¼ï¼‰</span>
    
    <span class="hljs-comment">// ===== å°¾éšé€—å·é…ç½® =====</span>
    <span class="hljs-comment">// "es5": ES5æ”¯æŒçš„å¯¹è±¡/æ•°ç»„æœ€åå…ƒç´ åŠ é€—å·</span>
    <span class="hljs-comment">// "none": ä¸åŠ å°¾éšé€—å·</span>
    <span class="hljs-comment">// "all": æ‰€æœ‰åœ°æ–¹éƒ½åŠ å°¾éšé€—å·</span>
    <span class="hljs-attr">"trailingComma"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"es5"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>Huskyå’Œlint-stagedï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json - Gité’©å­å’Œä»£ç è´¨é‡æ£€æŸ¥é…ç½®</span>

<span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-comment">// ===== ä»£ç æ£€æŸ¥è„šæœ¬ =====</span>
        <span class="hljs-attr">"lint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eslint src --ext .js,.vue,.ts"</span><span class="hljs-punctuation">,</span>
        
        <span class="hljs-comment">// ===== ä»£ç ä¿®å¤è„šæœ¬ =====</span>
        <span class="hljs-attr">"lint:fix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eslint src --ext .js,.vue,.ts --fix"</span><span class="hljs-punctuation">,</span>
        
        <span class="hljs-comment">// ===== ä»£ç æ ¼å¼åŒ–è„šæœ¬ =====</span>
        <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"prettier --write src/**/*.{js,vue,ts,scss}"</span><span class="hljs-punctuation">,</span>
        
        <span class="hljs-comment">// ===== Pre-commité’©å­è„šæœ¬ =====</span>
        <span class="hljs-attr">"pre-commit"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"lint-staged"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    
    <span class="hljs-comment">// ===== Gité’©å­é…ç½® =====</span>
    <span class="hljs-attr">"husky"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"hooks"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-comment">// æäº¤å‰æ‰§è¡Œä»£ç æ£€æŸ¥</span>
            <span class="hljs-attr">"pre-commit"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"lint-staged"</span><span class="hljs-punctuation">,</span>
            
            <span class="hljs-comment">// æäº¤ä¿¡æ¯æ ¼å¼æ£€æŸ¥</span>
            <span class="hljs-attr">"commit-msg"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"commitlint -E HUSKY_GIT_PARAMS"</span>
        <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    
    <span class="hljs-comment">// ===== æš‚å­˜æ–‡ä»¶å¤„ç†é…ç½® =====</span>
    <span class="hljs-comment">// åªå¯¹Gitæš‚å­˜åŒºçš„æ–‡ä»¶æ‰§è¡Œæ£€æŸ¥ï¼Œæé«˜æ€§èƒ½</span>
    <span class="hljs-attr">"lint-staged"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-comment">// JavaScript/Vue/TypeScriptæ–‡ä»¶å¤„ç†</span>
        <span class="hljs-attr">"*.{js,vue,ts}"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-string">"eslint --fix"</span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// è‡ªåŠ¨ä¿®å¤ESLinté”™è¯¯</span>
            <span class="hljs-string">"prettier --write"</span><span class="hljs-punctuation">,</span>    <span class="hljs-comment">// æ ¼å¼åŒ–ä»£ç </span>
            <span class="hljs-string">"git add"</span>            <span class="hljs-comment">// å°†ä¿®å¤åçš„æ–‡ä»¶é‡æ–°æ·»åŠ åˆ°æš‚å­˜åŒº</span>
        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        
        <span class="hljs-comment">// æ ·å¼æ–‡ä»¶å¤„ç†</span>
        <span class="hljs-attr">"*.{scss,css}"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-string">"prettier --write"</span><span class="hljs-punctuation">,</span>    <span class="hljs-comment">// æ ¼å¼åŒ–æ ·å¼</span>
            <span class="hljs-string">"git add"</span>            <span class="hljs-comment">// é‡æ–°æ·»åŠ åˆ°æš‚å­˜åŒº</span>
        <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-17">Gitå·¥ä½œæµè§„èŒƒ</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># .github/workflows/ci.yml - GitHub Actions CI/CDé…ç½®æ–‡ä»¶</span>

<span class="hljs-comment"># ===== æµæ°´çº¿åç§° =====</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">CI/CD</span> <span class="hljs-string">Pipeline</span>

<span class="hljs-comment"># ===== è§¦å‘æ¡ä»¶ =====</span>
<span class="hljs-comment"># å®šä¹‰ä»€ä¹ˆæ—¶å€™è§¦å‘æ­¤å·¥ä½œæµ</span>
<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-comment"># æ¨é€åˆ°ä»¥ä¸‹åˆ†æ”¯æ—¶è§¦å‘</span>
    <span class="hljs-attr">branches:</span> [<span class="hljs-string">main</span>, <span class="hljs-string">develop</span>]
  <span class="hljs-attr">pull_request:</span>
    <span class="hljs-comment"># åˆ›å»ºé’ˆå¯¹ä»¥ä¸‹åˆ†æ”¯çš„PRæ—¶è§¦å‘</span>
    <span class="hljs-attr">branches:</span> [<span class="hljs-string">main</span>]

<span class="hljs-comment"># ===== å·¥ä½œå®šä¹‰ =====</span>
<span class="hljs-attr">jobs:</span>
  <span class="hljs-comment"># ===== æµ‹è¯•ä»»åŠ¡ =====</span>
  <span class="hljs-attr">test:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>  <span class="hljs-comment"># ä½¿ç”¨Ubuntuæœ€æ–°ç‰ˆä½œä¸ºè¿è¡Œç¯å¢ƒ</span>
    
    <span class="hljs-comment"># ===== çŸ©é˜µç­–ç•¥ =====</span>
    <span class="hljs-comment"># åœ¨å¤šä¸ªNode.jsç‰ˆæœ¬ä¸Šå¹¶è¡Œæµ‹è¯•</span>
    <span class="hljs-attr">strategy:</span>
      <span class="hljs-attr">matrix:</span>
        <span class="hljs-attr">node-version:</span> [<span class="hljs-number">14.</span><span class="hljs-string">x</span>, <span class="hljs-number">16.</span><span class="hljs-string">x</span>, <span class="hljs-number">18.</span><span class="hljs-string">x</span>]  <span class="hljs-comment"># æµ‹è¯•å¤šä¸ªNode.jsç‰ˆæœ¬</span>
    
    <span class="hljs-comment"># ===== æ‰§è¡Œæ­¥éª¤ =====</span>
    <span class="hljs-attr">steps:</span>
      <span class="hljs-comment"># æ­¥éª¤1ï¼šæ£€å‡ºä»£ç </span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span>
      
      <span class="hljs-comment"># æ­¥éª¤2ï¼šè®¾ç½®Node.jsç¯å¢ƒ</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Setup</span> <span class="hljs-string">Node.js</span> <span class="hljs-string">${{</span> <span class="hljs-string">matrix.node-version</span> <span class="hljs-string">}}</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v3</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">node-version:</span> <span class="hljs-string">${{</span> <span class="hljs-string">matrix.node-version</span> <span class="hljs-string">}}</span>
          <span class="hljs-attr">cache:</span> <span class="hljs-string">'npm'</span>  <span class="hljs-comment"># å¯ç”¨npmç¼“å­˜åŠ é€Ÿ</span>
      
      <span class="hljs-comment"># æ­¥éª¤3ï¼šå®‰è£…ä¾èµ–</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Install</span> <span class="hljs-string">dependencies</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">ci</span>  <span class="hljs-comment"># ä½¿ç”¨npm ciè¿›è¡Œå¿«é€Ÿã€å¯é çš„å®‰è£…</span>
      
      <span class="hljs-comment"># æ­¥éª¤4ï¼šè¿è¡Œä»£ç æ£€æŸ¥</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Run</span> <span class="hljs-string">lint</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">run</span> <span class="hljs-string">lint</span>
      
      <span class="hljs-comment"># æ­¥éª¤5ï¼šè¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Run</span> <span class="hljs-string">tests</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">run</span> <span class="hljs-string">test:coverage</span>
      
      <span class="hljs-comment"># æ­¥éª¤6ï¼šä¸Šä¼ è¦†ç›–ç‡æŠ¥å‘Š</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Upload</span> <span class="hljs-string">coverage</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">codecov/codecov-action@v3</span>
      
      <span class="hljs-comment"># æ­¥éª¤7ï¼šæ„å»ºé¡¹ç›®</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Build</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">run</span> <span class="hljs-string">build</span>
      
      <span class="hljs-comment"># æ­¥éª¤8ï¼šä¸Šä¼ æ„å»ºäº§ç‰©</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Upload</span> <span class="hljs-string">build</span> <span class="hljs-string">artifacts</span>
        <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/upload-artifact@v3</span>
        <span class="hljs-attr">with:</span>
          <span class="hljs-attr">name:</span> <span class="hljs-string">build-${{</span> <span class="hljs-string">matrix.node-version</span> <span class="hljs-string">}}</span>
          <span class="hljs-attr">path:</span> <span class="hljs-string">dist/</span>

  <span class="hljs-comment"># ===== éƒ¨ç½²ä»»åŠ¡ =====</span>
  <span class="hljs-attr">deploy:</span>
    <span class="hljs-comment"># ä¾èµ–æµ‹è¯•ä»»åŠ¡å®Œæˆ</span>
    <span class="hljs-attr">needs:</span> <span class="hljs-string">test</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    
    <span class="hljs-comment"># ===== æ¡ä»¶éƒ¨ç½² =====</span>
    <span class="hljs-comment"># åªæœ‰æ¨é€åˆ°mainåˆ†æ”¯æ‰æ‰§è¡Œéƒ¨ç½²</span>
    <span class="hljs-attr">if:</span> <span class="hljs-string">github.ref</span> <span class="hljs-string">==</span> <span class="hljs-string">'refs/heads/main'</span>
    
    <span class="hljs-attr">steps:</span>
      <span class="hljs-comment"># æ­¥éª¤1ï¼šæ£€å‡ºä»£ç </span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span>
      
      <span class="hljs-comment"># æ­¥éª¤2ï¼šéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">Deploy</span> <span class="hljs-string">to</span> <span class="hljs-string">production</span>
        <span class="hljs-attr">run:</span> <span class="hljs-string">|
          echo "Deploying to production..."
          # è¿™é‡Œå¯ä»¥æ˜¯å®é™…çš„éƒ¨ç½²è„šæœ¬
          # ä¾‹å¦‚ï¼šä¸Šä¼ åˆ°CDNã€éƒ¨ç½²åˆ°æœåŠ¡å™¨ç­‰
          # docker build &amp;&amp; docker push
          # kubectl apply -f deployment.yaml
</span></code></pre>
<hr/>
<h2 data-id="heading-18">CI/CDä¸éƒ¨ç½²è‡ªåŠ¨åŒ–</h2>
<h3 data-id="heading-19">DockeråŒ–éƒ¨ç½²</h3>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># Dockerfile
# æ„å»ºé˜¶æ®µ
FROM node:18-alpine as build-stage

WORKDIR /app

# å¤åˆ¶packageæ–‡ä»¶
COPY package*.json ./
RUN npm ci --only=production

# å¤åˆ¶æºä»£ç 
COPY . .

# æ„å»ºåº”ç”¨
RUN npm run build

# ç”Ÿäº§é˜¶æ®µ
FROM nginx:alpine as production-stage

# å¤åˆ¶æ„å»ºäº§ç‰©
COPY --from=build-stage /app/dist /usr/share/nginx/html

# å¤åˆ¶nginxé…ç½®
COPY nginx.conf /etc/nginx/nginx.conf

# æš´éœ²ç«¯å£
EXPOSE 80

# å¯åŠ¨nginx
CMD ["nginx", "-g", "daemon off;"]
</code></pre>
<pre><code class="hljs language-nginx" lang="nginx"># nginx.conf
events {
    worker_connections 1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;
    
    # Gzipå‹ç¼©
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types
        text/plain
        text/css
        text/xml
        text/javascript
        application/javascript
        application/xml+rss
        application/json;
    
    server {
        listen 80;
        server_name localhost;
        root /usr/share/nginx/html;
        index index.html;
        
        # å¯ç”¨ç¼“å­˜
        location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
            expires 1y;
            add_header Cache-Control "public, immutable";
        }
        
        # SPAè·¯ç”±
        location / {
            try_files $uri $uri/ /index.html;
        }
        
        # APIä»£ç†
        location /api/ {
            proxy_pass http://backend:8080/;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }
    }
}
</code></pre>
<h3 data-id="heading-20">Kuberneteséƒ¨ç½²</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># deployment.yaml</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">frontend-app</span>
  <span class="hljs-attr">labels:</span>
    <span class="hljs-attr">app:</span> <span class="hljs-string">frontend</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">matchLabels:</span>
      <span class="hljs-attr">app:</span> <span class="hljs-string">frontend</span>
  <span class="hljs-attr">template:</span>
    <span class="hljs-attr">metadata:</span>
      <span class="hljs-attr">labels:</span>
        <span class="hljs-attr">app:</span> <span class="hljs-string">frontend</span>
    <span class="hljs-attr">spec:</span>
      <span class="hljs-attr">containers:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">frontend</span>
        <span class="hljs-attr">image:</span> <span class="hljs-string">my-frontend-app:latest</span>
        <span class="hljs-attr">ports:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">80</span>
        <span class="hljs-attr">resources:</span>
          <span class="hljs-attr">requests:</span>
            <span class="hljs-attr">memory:</span> <span class="hljs-string">"64Mi"</span>
            <span class="hljs-attr">cpu:</span> <span class="hljs-string">"250m"</span>
          <span class="hljs-attr">limits:</span>
            <span class="hljs-attr">memory:</span> <span class="hljs-string">"128Mi"</span>
            <span class="hljs-attr">cpu:</span> <span class="hljs-string">"500m"</span>
        <span class="hljs-attr">env:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">API_URL</span>
          <span class="hljs-attr">value:</span> <span class="hljs-string">"https://api.example.com"</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Service</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">frontend-service</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">selector:</span>
    <span class="hljs-attr">app:</span> <span class="hljs-string">frontend</span>
  <span class="hljs-attr">ports:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">protocol:</span> <span class="hljs-string">TCP</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">80</span>
      <span class="hljs-attr">targetPort:</span> <span class="hljs-number">80</span>
  <span class="hljs-attr">type:</span> <span class="hljs-string">LoadBalancer</span>
<span class="hljs-meta">---</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">networking.k8s.io/v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">Ingress</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">frontend-ingress</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">rules:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">host:</span> <span class="hljs-string">example.com</span>
    <span class="hljs-attr">http:</span>
      <span class="hljs-attr">paths:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">path:</span> <span class="hljs-string">/</span>
        <span class="hljs-attr">pathType:</span> <span class="hljs-string">Prefix</span>
        <span class="hljs-attr">backend:</span>
          <span class="hljs-attr">service:</span>
            <span class="hljs-attr">name:</span> <span class="hljs-string">frontend-service</span>
            <span class="hljs-attr">port:</span>
              <span class="hljs-attr">number:</span> <span class="hljs-number">80</span>
</code></pre>
<hr/>
<h2 data-id="heading-21">å®æˆ˜é¡¹ç›®æ­å»º</h2>
<h3 data-id="heading-22">è„šæ‰‹æ¶å·¥å…·å¼€å‘</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// create-vue-app.js</span>
#!<span class="hljs-regexp">/usr/</span>bin/env node

<span class="hljs-keyword">const</span> { <span class="hljs-title class_">Command</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'commander'</span>);
<span class="hljs-keyword">const</span> inquirer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'inquirer'</span>);
<span class="hljs-keyword">const</span> chalk = <span class="hljs-built_in">require</span>(<span class="hljs-string">'chalk'</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs-extra'</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> spawn = <span class="hljs-built_in">require</span>(<span class="hljs-string">'cross-spawn'</span>);

<span class="hljs-keyword">const</span> program = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Command</span>();

program
    .<span class="hljs-title function_">name</span>(<span class="hljs-string">'create-vue-app'</span>)
    .<span class="hljs-title function_">description</span>(<span class="hljs-string">'Create a new Vue.js project'</span>)
    .<span class="hljs-title function_">version</span>(<span class="hljs-string">'1.0.0'</span>)
    .<span class="hljs-title function_">argument</span>(<span class="hljs-string">'[project-name]'</span>, <span class="hljs-string">'Project name'</span>)
    .<span class="hljs-title function_">action</span>(<span class="hljs-keyword">async</span> (projectName) =&gt; {
        <span class="hljs-keyword">if</span> (!projectName) {
            <span class="hljs-keyword">const</span> { name } = <span class="hljs-keyword">await</span> inquirer.<span class="hljs-title function_">prompt</span>([
                {
                    <span class="hljs-attr">type</span>: <span class="hljs-string">'input'</span>,
                    <span class="hljs-attr">name</span>: <span class="hljs-string">'name'</span>,
                    <span class="hljs-attr">message</span>: <span class="hljs-string">'Project name:'</span>,
                    <span class="hljs-attr">validate</span>: <span class="hljs-function"><span class="hljs-params">input</span> =&gt;</span> input.<span class="hljs-title function_">trim</span>() ? <span class="hljs-literal">true</span> : <span class="hljs-string">'Project name is required'</span>
                }
            ]);
            projectName = name;
        }
        
        <span class="hljs-keyword">const</span> targetDir = path.<span class="hljs-title function_">resolve</span>(process.<span class="hljs-title function_">cwd</span>(), projectName);
        
        <span class="hljs-keyword">if</span> (fs.<span class="hljs-title function_">existsSync</span>(targetDir)) {
            <span class="hljs-keyword">const</span> { overwrite } = <span class="hljs-keyword">await</span> inquirer.<span class="hljs-title function_">prompt</span>([
                {
                    <span class="hljs-attr">type</span>: <span class="hljs-string">'confirm'</span>,
                    <span class="hljs-attr">name</span>: <span class="hljs-string">'overwrite'</span>,
                    <span class="hljs-attr">message</span>: <span class="hljs-string">'Directory already exists. Overwrite?'</span>,
                    <span class="hljs-attr">default</span>: <span class="hljs-literal">false</span>
                }
            ]);
            
            <span class="hljs-keyword">if</span> (!overwrite) {
                <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chalk.<span class="hljs-title function_">yellow</span>(<span class="hljs-string">'Project creation cancelled.'</span>));
                process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">0</span>);
            }
            
            <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">remove</span>(targetDir);
        }
        
        <span class="hljs-keyword">const</span> answers = <span class="hljs-keyword">await</span> inquirer.<span class="hljs-title function_">prompt</span>([
            {
                <span class="hljs-attr">type</span>: <span class="hljs-string">'list'</span>,
                <span class="hljs-attr">name</span>: <span class="hljs-string">'preset'</span>,
                <span class="hljs-attr">message</span>: <span class="hljs-string">'Please pick a preset:'</span>,
                <span class="hljs-attr">choices</span>: [
                    {
                        <span class="hljs-attr">name</span>: <span class="hljs-string">'Default (Vue 3 + Vite)'</span>,
                        <span class="hljs-attr">value</span>: <span class="hljs-string">'default'</span>
                    },
                    {
                        <span class="hljs-attr">name</span>: <span class="hljs-string">'Default Plus (Vue 3 + Vite + TypeScript + Router + Pinia)'</span>,
                        <span class="hljs-attr">value</span>: <span class="hljs-string">'default-plus'</span>
                    },
                    {
                        <span class="hljs-attr">name</span>: <span class="hljs-string">'Manually select features'</span>,
                        <span class="hljs-attr">value</span>: <span class="hljs-string">'manual'</span>
                    }
                ]
            }
        ]);
        
        <span class="hljs-keyword">if</span> (answers.<span class="hljs-property">preset</span> === <span class="hljs-string">'manual'</span>) {
            <span class="hljs-keyword">const</span> manualAnswers = <span class="hljs-keyword">await</span> inquirer.<span class="hljs-title function_">prompt</span>([
                {
                    <span class="hljs-attr">type</span>: <span class="hljs-string">'checkbox'</span>,
                    <span class="hljs-attr">name</span>: <span class="hljs-string">'features'</span>,
                    <span class="hljs-attr">message</span>: <span class="hljs-string">'Check the features needed for your project:'</span>,
                    <span class="hljs-attr">choices</span>: [
                        { <span class="hljs-attr">name</span>: <span class="hljs-string">'TypeScript'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'typescript'</span> },
                        { <span class="hljs-attr">name</span>: <span class="hljs-string">'Router'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'router'</span> },
                        { <span class="hljs-attr">name</span>: <span class="hljs-string">'Pinia (çŠ¶æ€ç®¡ç†)'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'pinia'</span> },
                        { <span class="hljs-attr">name</span>: <span class="hljs-string">'ESLint'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'eslint'</span> },
                        { <span class="hljs-attr">name</span>: <span class="hljs-string">'Prettier'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'prettier'</span> },
                        { <span class="hljs-attr">name</span>: <span class="hljs-string">'Unit Testing'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'testing'</span> },
                        { <span class="hljs-attr">name</span>: <span class="hljs-string">'E2E Testing'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'e2e'</span> }
                    ]
                }
            ]);
            
            answers.<span class="hljs-property">features</span> = manualAnswers.<span class="hljs-property">features</span>;
        }
        
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chalk.<span class="hljs-title function_">blue</span>(<span class="hljs-string">'\nCreating project...'</span>));
        
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">createProject</span>(projectName, targetDir, answers);
        
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chalk.<span class="hljs-title function_">green</span>(<span class="hljs-string">'\nâœ¨ Project created successfully!'</span>));
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chalk.<span class="hljs-title function_">cyan</span>(<span class="hljs-string">'\nNext steps:'</span>));
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chalk.<span class="hljs-title function_">white</span>(<span class="hljs-string">`  cd <span class="hljs-subst">${projectName}</span>`</span>));
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chalk.<span class="hljs-title function_">white</span>(<span class="hljs-string">'  npm install'</span>));
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chalk.<span class="hljs-title function_">white</span>(<span class="hljs-string">'  npm run dev'</span>));
    });

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createProject</span>(<span class="hljs-params">name, targetDir, answers</span>) {
    <span class="hljs-comment">// åˆ›å»ºé¡¹ç›®ç›®å½•</span>
    <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">ensureDir</span>(targetDir);
    
    <span class="hljs-comment">// ç”Ÿæˆpackage.json</span>
    <span class="hljs-keyword">const</span> packageJson = <span class="hljs-title function_">generatePackageJson</span>(name, answers);
    <span class="hljs-keyword">await</span> fs.<span class="hljs-title function_">writeJSON</span>(path.<span class="hljs-title function_">join</span>(targetDir, <span class="hljs-string">'package.json'</span>), packageJson, { <span class="hljs-attr">spaces</span>: <span class="hljs-number">2</span> });
    
    <span class="hljs-comment">// ç”Ÿæˆé…ç½®æ–‡ä»¶</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">generateConfigFiles</span>(targetDir, answers);
    
    <span class="hljs-comment">// ç”Ÿæˆæºä»£ç </span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">generateSourceFiles</span>(targetDir, answers);
    
    <span class="hljs-comment">// å®‰è£…ä¾èµ–</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(chalk.<span class="hljs-title function_">blue</span>(<span class="hljs-string">'Installing dependencies...'</span>));
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">installDependencies</span>(targetDir, answers);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">generatePackageJson</span>(<span class="hljs-params">name, answers</span>) {
    <span class="hljs-keyword">const</span> base = {
        name,
        <span class="hljs-attr">version</span>: <span class="hljs-string">'0.0.1'</span>,
        <span class="hljs-attr">private</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">scripts</span>: {
            <span class="hljs-attr">dev</span>: <span class="hljs-string">'vite'</span>,
            <span class="hljs-attr">build</span>: <span class="hljs-string">'vite build'</span>,
            <span class="hljs-attr">preview</span>: <span class="hljs-string">'vite preview'</span>
        }
    };
    
    <span class="hljs-keyword">const</span> dependencies = [];
    <span class="hljs-keyword">const</span> devDependencies = [<span class="hljs-string">'vite'</span>];
    
    <span class="hljs-keyword">if</span> (answers.<span class="hljs-property">preset</span> === <span class="hljs-string">'default'</span> || answers.<span class="hljs-property">preset</span> === <span class="hljs-string">'default-plus'</span> || answers.<span class="hljs-property">features</span>?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'typescript'</span>)) {
        devDependencies.<span class="hljs-title function_">push</span>(<span class="hljs-string">'@vitejs/plugin-vue'</span>);
        dependencies.<span class="hljs-title function_">push</span>(<span class="hljs-string">'vue'</span>);
    }
    
    <span class="hljs-keyword">if</span> (answers.<span class="hljs-property">preset</span> === <span class="hljs-string">'default-plus'</span> || answers.<span class="hljs-property">features</span>?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'router'</span>)) {
        dependencies.<span class="hljs-title function_">push</span>(<span class="hljs-string">'vue-router'</span>);
    }
    
    <span class="hljs-keyword">if</span> (answers.<span class="hljs-property">preset</span> === <span class="hljs-string">'default-plus'</span> || answers.<span class="hljs-property">features</span>?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'pinia'</span>)) {
        dependencies.<span class="hljs-title function_">push</span>(<span class="hljs-string">'pinia'</span>);
    }
    
    <span class="hljs-keyword">if</span> (answers.<span class="hljs-property">features</span>?.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'typescript'</span>)) {
        devDependencies.<span class="hljs-title function_">push</span>(<span class="hljs-string">'typescript'</span>, <span class="hljs-string">'vue-tsc'</span>);
        base.<span class="hljs-property">scripts</span>.<span class="hljs-property">typecheck</span> = <span class="hljs-string">'vue-tsc --noEmit'</span>;
    }
    
    <span class="hljs-keyword">return</span> {
        ...base,
        <span class="hljs-attr">dependencies</span>: dependencies.<span class="hljs-property">length</span> ? dependencies : <span class="hljs-literal">undefined</span>,
        devDependencies
    };
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">installDependencies</span>(<span class="hljs-params">targetDir, answers</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> child = <span class="hljs-title function_">spawn</span>(<span class="hljs-string">'npm'</span>, [<span class="hljs-string">'install'</span>], {
            <span class="hljs-attr">cwd</span>: targetDir,
            <span class="hljs-attr">stdio</span>: <span class="hljs-string">'inherit'</span>
        });
        
        child.<span class="hljs-title function_">on</span>(<span class="hljs-string">'close'</span>, <span class="hljs-function">(<span class="hljs-params">code</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (code !== <span class="hljs-number">0</span>) {
                <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'npm install failed'</span>));
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-title function_">resolve</span>();
            }
        });
    });
}

program.<span class="hljs-title function_">parse</span>();
</code></pre>
<h3 data-id="heading-23">é¡¹ç›®ç»“æ„æ¨¡æ¿</h3>
<pre><code class="hljs language-bash" lang="bash">my-project/
â”œâ”€â”€ public/                 <span class="hljs-comment"># é™æ€èµ„æº</span>
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ src/                   <span class="hljs-comment"># æºä»£ç </span>
â”‚   â”œâ”€â”€ api/              <span class="hljs-comment"># APIæ¥å£</span>
â”‚   â”œâ”€â”€ assets/           <span class="hljs-comment"># é™æ€èµ„æº</span>
â”‚   â”œâ”€â”€ components/       <span class="hljs-comment"># ç»„ä»¶</span>
â”‚   â”‚   â”œâ”€â”€ common/       <span class="hljs-comment"># å…¬å…±ç»„ä»¶</span>
â”‚   â”‚   â””â”€â”€ business/     <span class="hljs-comment"># ä¸šåŠ¡ç»„ä»¶</span>
â”‚   â”œâ”€â”€ composables/      <span class="hljs-comment"># ç»„åˆå¼å‡½æ•°</span>
â”‚   â”œâ”€â”€ layouts/          <span class="hljs-comment"># å¸ƒå±€ç»„ä»¶</span>
â”‚   â”œâ”€â”€ pages/            <span class="hljs-comment"># é¡µé¢</span>
â”‚   â”œâ”€â”€ router/           <span class="hljs-comment"># è·¯ç”±é…ç½®</span>
â”‚   â”œâ”€â”€ stores/           <span class="hljs-comment"># çŠ¶æ€ç®¡ç†</span>
â”‚   â”œâ”€â”€ styles/           <span class="hljs-comment"># æ ·å¼æ–‡ä»¶</span>
â”‚   â”œâ”€â”€ utils/            <span class="hljs-comment"># å·¥å…·å‡½æ•°</span>
â”‚   â”œâ”€â”€ types/            <span class="hljs-comment"># TypeScriptç±»å‹</span>
â”‚   â”œâ”€â”€ App.vue           <span class="hljs-comment"># æ ¹ç»„ä»¶</span>
â”‚   â””â”€â”€ main.ts           <span class="hljs-comment"># å…¥å£æ–‡ä»¶</span>
â”œâ”€â”€ tests/                <span class="hljs-comment"># æµ‹è¯•æ–‡ä»¶</span>
â”‚   â”œâ”€â”€ unit/             <span class="hljs-comment"># å•å…ƒæµ‹è¯•</span>
â”‚   â””â”€â”€ e2e/              <span class="hljs-comment"># E2Eæµ‹è¯•</span>
â”œâ”€â”€ .<span class="hljs-built_in">env</span>                  <span class="hljs-comment"># ç¯å¢ƒå˜é‡</span>
â”œâ”€â”€ .env.development
â”œâ”€â”€ .env.production
â”œâ”€â”€ .eslintrc.js          <span class="hljs-comment"># ESLinté…ç½®</span>
â”œâ”€â”€ .prettierrc           <span class="hljs-comment"># Prettieré…ç½®</span>
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json         <span class="hljs-comment"># TypeScripté…ç½®</span>
â”œâ”€â”€ vite.config.ts        <span class="hljs-comment"># Viteé…ç½®</span>
â””â”€â”€ README.md
</code></pre>
<hr/>
<h2 data-id="heading-24">æ€§èƒ½ä¼˜åŒ–ä¸ç›‘æ§</h2>
<h3 data-id="heading-25">æ€§èƒ½ç›‘æ§é…ç½®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ€§èƒ½ç›‘æ§å·¥å…·</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceMonitor</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span> = {
            <span class="hljs-attr">navigation</span>: {},
            <span class="hljs-attr">resources</span>: [],
            <span class="hljs-attr">paint</span>: {},
            <span class="hljs-attr">memory</span>: {}
        };
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
    }
    
    <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">observeNavigation</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">observeResources</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">observePaint</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">observeMemory</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">observeLayoutShift</span>();
    }
    
    <span class="hljs-title function_">observeNavigation</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (performance.<span class="hljs-property">timing</span>) {
            <span class="hljs-keyword">const</span> timing = performance.<span class="hljs-property">timing</span>;
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">navigation</span> = {
                <span class="hljs-attr">dns</span>: timing.<span class="hljs-property">domainLookupEnd</span> - timing.<span class="hljs-property">domainLookupStart</span>,
                <span class="hljs-attr">tcp</span>: timing.<span class="hljs-property">connectEnd</span> - timing.<span class="hljs-property">connectStart</span>,
                <span class="hljs-attr">request</span>: timing.<span class="hljs-property">responseStart</span> - timing.<span class="hljs-property">requestStart</span>,
                <span class="hljs-attr">response</span>: timing.<span class="hljs-property">responseEnd</span> - timing.<span class="hljs-property">responseStart</span>,
                <span class="hljs-attr">dom</span>: timing.<span class="hljs-property">domContentLoadedEventEnd</span> - timing.<span class="hljs-property">domContentLoadedEventStart</span>,
                <span class="hljs-attr">load</span>: timing.<span class="hljs-property">loadEventEnd</span> - timing.<span class="hljs-property">loadEventStart</span>,
                <span class="hljs-attr">total</span>: timing.<span class="hljs-property">loadEventEnd</span> - timing.<span class="hljs-property">navigationStart</span>
            };
        }
    }
    
    <span class="hljs-title function_">observeResources</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> resources = performance.<span class="hljs-title function_">getEntriesByType</span>(<span class="hljs-string">'resource'</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">resources</span> = resources.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">resource</span> =&gt;</span> ({
            <span class="hljs-attr">name</span>: resource.<span class="hljs-property">name</span>,
            <span class="hljs-attr">type</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getResourceType</span>(resource.<span class="hljs-property">name</span>),
            <span class="hljs-attr">duration</span>: resource.<span class="hljs-property">duration</span>,
            <span class="hljs-attr">size</span>: resource.<span class="hljs-property">transferSize</span> || <span class="hljs-number">0</span>
        }));
    }
    
    <span class="hljs-title function_">observePaint</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> paintEntries = performance.<span class="hljs-title function_">getEntriesByType</span>(<span class="hljs-string">'paint'</span>);
        paintEntries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">paint</span>[entry.<span class="hljs-property">name</span>] = entry.<span class="hljs-property">startTime</span>;
        });
    }
    
    <span class="hljs-title function_">observeMemory</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (performance.<span class="hljs-property">memory</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">memory</span> = {
                <span class="hljs-attr">used</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(performance.<span class="hljs-property">memory</span>.<span class="hljs-property">usedJSHeapSize</span> / <span class="hljs-number">1048576</span>),
                <span class="hljs-attr">total</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(performance.<span class="hljs-property">memory</span>.<span class="hljs-property">totalJSHeapSize</span> / <span class="hljs-number">1048576</span>),
                <span class="hljs-attr">limit</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(performance.<span class="hljs-property">memory</span>.<span class="hljs-property">jsHeapSizeLimit</span> / <span class="hljs-number">1048576</span>)
            };
        }
    }
    
    <span class="hljs-title function_">observeLayoutShift</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">let</span> cumulativeLayoutShift = <span class="hljs-number">0</span>;
        
        <span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceObserver</span>(<span class="hljs-function">(<span class="hljs-params">list</span>) =&gt;</span> {
            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> list.<span class="hljs-title function_">getEntries</span>()) {
                <span class="hljs-keyword">if</span> (!entry.<span class="hljs-property">hadRecentInput</span>) {
                    cumulativeLayoutShift += entry.<span class="hljs-property">value</span>;
                }
            }
            
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">cls</span> = cumulativeLayoutShift;
        });
        
        observer.<span class="hljs-title function_">observe</span>({ <span class="hljs-attr">entryTypes</span>: [<span class="hljs-string">'layout-shift'</span>] });
    }
    
    <span class="hljs-title function_">getResourceType</span>(<span class="hljs-params">url</span>) {
        <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'.css'</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">'css'</span>;
        <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'.js'</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">'javascript'</span>;
        <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/\.(png|jpg|jpeg|gif|svg|webp)$/</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">'image'</span>;
        <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/\.(woff|woff2|ttf|eot)$/</span>)) <span class="hljs-keyword">return</span> <span class="hljs-string">'font'</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-string">'other'</span>;
    }
    
    <span class="hljs-title function_">getReport</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> {
            ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>,
            <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
            <span class="hljs-attr">userAgent</span>: navigator.<span class="hljs-property">userAgent</span>,
            <span class="hljs-attr">url</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>
        };
    }
    
    <span class="hljs-title function_">sendReport</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> report = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getReport</span>();
        
        <span class="hljs-comment">// å‘é€åˆ°ç›‘æ§ç³»ç»Ÿ</span>
        <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/performance'</span>, {
            <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
            <span class="hljs-attr">headers</span>: {
                <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
            },
            <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(report)
        }).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to send performance report:'</span>, error);
        });
    }
}

<span class="hljs-comment">// åˆå§‹åŒ–ç›‘æ§</span>
<span class="hljs-keyword">const</span> monitor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceMonitor</span>();

<span class="hljs-comment">// é¡µé¢åŠ è½½å®Œæˆåå‘é€æŠ¥å‘Š</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'load'</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        monitor.<span class="hljs-title function_">sendReport</span>();
    }, <span class="hljs-number">1000</span>);
});
</code></pre>
<h3 data-id="heading-26">Bundleåˆ†æå·¥å…·</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// webpack-bundle-analyzeré›†æˆ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">BundleAnalyzerPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'webpack-bundle-analyzer'</span>).<span class="hljs-property">BundleAnalyzerPlugin</span>;

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">BundleAnalyzerPlugin</span>({
            <span class="hljs-attr">analyzerMode</span>: <span class="hljs-string">'static'</span>,
            <span class="hljs-attr">openAnalyzer</span>: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">reportFilename</span>: <span class="hljs-string">'bundle-report.html'</span>,
            <span class="hljs-attr">defaultSizes</span>: <span class="hljs-string">'parsed'</span>,
            <span class="hljs-attr">generateStatsFile</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">statsFilename</span>: <span class="hljs-string">'bundle-stats.json'</span>,
            <span class="hljs-attr">statsOptions</span>: {
                <span class="hljs-attr">source</span>: <span class="hljs-literal">false</span>,
                <span class="hljs-attr">modules</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">chunks</span>: <span class="hljs-literal">true</span>,
                <span class="hljs-attr">chunkModules</span>: <span class="hljs-literal">true</span>
            }
        })
    ]
};
</code></pre>
<h2 data-id="heading-27">ğŸš€ è½åœ°å®æˆ˜é¡¹ç›®æ¡ˆä¾‹</h2>
<h3 data-id="heading-28">å¾®å‰ç«¯æ¶æ„å®è·µ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸»åº”ç”¨é…ç½® - qiankun</span>
<span class="hljs-keyword">import</span> { registerMicroApps, start } <span class="hljs-keyword">from</span> <span class="hljs-string">'qiankun'</span>;

<span class="hljs-title function_">registerMicroApps</span>([
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'vue-app'</span>,
    <span class="hljs-attr">entry</span>: <span class="hljs-string">'//localhost:8081'</span>,
    <span class="hljs-attr">container</span>: <span class="hljs-string">'#vue-app'</span>,
    <span class="hljs-attr">activeRule</span>: <span class="hljs-string">'/vue'</span>,
    <span class="hljs-attr">props</span>: { <span class="hljs-attr">data</span>: <span class="hljs-string">'main-app-data'</span> }
  },
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'react-app'</span>,
    <span class="hljs-attr">entry</span>: <span class="hljs-string">'//localhost:8082'</span>,
    <span class="hljs-attr">container</span>: <span class="hljs-string">'#react-app'</span>,
    <span class="hljs-attr">activeRule</span>: <span class="hljs-string">'/react'</span>
  }
]);

<span class="hljs-title function_">start</span>({
  <span class="hljs-attr">sandbox</span>: {
    <span class="hljs-attr">experimentalStyleIsolation</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">strictStyleIsolation</span>: <span class="hljs-literal">false</span>
  },
  <span class="hljs-attr">prefetch</span>: <span class="hljs-literal">true</span>
});

<span class="hljs-comment">// å¾®åº”ç”¨é…ç½®</span>
<span class="hljs-comment">// vue-app/src/main.js</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>;
<span class="hljs-keyword">import</span> { registerMicroApps, start } <span class="hljs-keyword">from</span> <span class="hljs-string">'qiankun'</span>;

<span class="hljs-keyword">let</span> instance = <span class="hljs-literal">null</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">props = {}</span>) {
  <span class="hljs-keyword">const</span> { container } = props;
  instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Vue</span>({
    <span class="hljs-attr">render</span>: <span class="hljs-function"><span class="hljs-params">h</span> =&gt;</span> <span class="hljs-title function_">h</span>(<span class="hljs-title class_">App</span>)
  }).$mount(container ? container.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#app'</span>) : <span class="hljs-string">'#app'</span>);
}

<span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">window</span>.<span class="hljs-property">__POWERED_BY_QIANKUN__</span>) {
  <span class="hljs-title function_">render</span>();
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[vue-app] bootstrap'</span>);
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">mount</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[vue-app] mount'</span>, props);
  <span class="hljs-title function_">render</span>(props);
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">unmount</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'[vue-app] unmount'</span>);
  instance.$destroy();
  instance.<span class="hljs-property">$el</span>.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">''</span>;
  instance = <span class="hljs-literal">null</span>;
}
</code></pre>
<h3 data-id="heading-29">Monorepoå·¥ç¨‹æ¶æ„</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// package.json (æ ¹ç›®å½•)</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"frontend-monorepo"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"private"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"workspaces"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"packages/*"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"apps/*"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"turbo run dev"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"turbo run build"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"turbo run lint"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"turbo run test"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"clean"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"turbo run clean &amp;&amp; rm -rf node_modules"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"turbo"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^1.6.3"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"@changesets/cli"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^2.24.4"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// turbo.json</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"$schema"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://turbo.build/schema.json"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"pipeline"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"dependsOn"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"^build"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"outputs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"dist/**"</span><span class="hljs-punctuation">,</span> <span class="hljs-string">"build/**"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"cache"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"persistent"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lint"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"outputs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"test"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"dependsOn"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"build"</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"outputs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"coverage/**"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<pre><code class="hljs language-bash" lang="bash">frontend-monorepo/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ ui/              <span class="hljs-comment"># UIç»„ä»¶åº“</span>
â”‚   â”œâ”€â”€ utils/           <span class="hljs-comment"># å·¥å…·åº“</span>
â”‚   â”œâ”€â”€ hooks/           <span class="hljs-comment"># è‡ªå®šä¹‰hooks</span>
â”‚   â””â”€â”€ types/           <span class="hljs-comment"># ç±»å‹å®šä¹‰</span>
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ admin/           <span class="hljs-comment"># ç®¡ç†åå°</span>
â”‚   â”œâ”€â”€ mobile/          <span class="hljs-comment"># ç§»åŠ¨ç«¯åº”ç”¨</span>
â”‚   â””â”€â”€ docs/            <span class="hljs-comment"># æ–‡æ¡£ç«™ç‚¹</span>
â”œâ”€â”€ tools/
â”‚   â”œâ”€â”€ build/           <span class="hljs-comment"># æ„å»ºå·¥å…·</span>
â”‚   â””â”€â”€ scripts/         <span class="hljs-comment"># è„šæœ¬å·¥å…·</span>
â””â”€â”€ shared/              <span class="hljs-comment"># å…±äº«é…ç½®</span>
    â”œâ”€â”€ eslint-config/
    â”œâ”€â”€ tsconfig/
    â””â”€â”€ webpack-config/
</code></pre>
<h3 data-id="heading-30">ç»„ä»¶åº“å·¥ç¨‹åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// packages/ui/build.js</span>
<span class="hljs-keyword">const</span> { build } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'esbuild'</span>);
<span class="hljs-keyword">const</span> { glob } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'glob'</span>);
<span class="hljs-keyword">const</span> { resolve } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">buildLibrary</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å…¥å£æ–‡ä»¶</span>
  <span class="hljs-keyword">const</span> entryPoints = <span class="hljs-keyword">await</span> <span class="hljs-title function_">glob</span>(<span class="hljs-string">'./src/**/*.{js,ts,jsx,tsx}'</span>);
  
  <span class="hljs-comment">// æ„å»ºESM</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">build</span>({
    entryPoints,
    <span class="hljs-attr">bundle</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">outdir</span>: <span class="hljs-string">'dist/es'</span>,
    <span class="hljs-attr">format</span>: <span class="hljs-string">'esm'</span>,
    <span class="hljs-attr">target</span>: [<span class="hljs-string">'es2018'</span>],
    <span class="hljs-attr">sourcemap</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">tsconfig</span>: <span class="hljs-string">'./tsconfig.json'</span>
  });
  
  <span class="hljs-comment">// æ„å»ºCJS</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">build</span>({
    entryPoints,
    <span class="hljs-attr">bundle</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">outdir</span>: <span class="hljs-string">'dist/lib'</span>,
    <span class="hljs-attr">format</span>: <span class="hljs-string">'cjs'</span>,
    <span class="hljs-attr">target</span>: [<span class="hljs-string">'es2018'</span>],
    <span class="hljs-attr">sourcemap</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">tsconfig</span>: <span class="hljs-string">'./tsconfig.json'</span>
  });
  
  <span class="hljs-comment">// ç”Ÿæˆç±»å‹å£°æ˜</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">build</span>({
    <span class="hljs-attr">entryPoints</span>: <span class="hljs-string">'./src/index.ts'</span>,
    <span class="hljs-attr">bundle</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">outdir</span>: <span class="hljs-string">'dist/types'</span>,
    <span class="hljs-attr">format</span>: <span class="hljs-string">'esm'</span>,
    <span class="hljs-attr">target</span>: [<span class="hljs-string">'es2018'</span>],
    <span class="hljs-attr">tsconfig</span>: <span class="hljs-string">'./tsconfig.json'</span>,
    <span class="hljs-attr">jsxFactory</span>: <span class="hljs-string">'React.createElement'</span>,
    <span class="hljs-attr">jsxFragment</span>: <span class="hljs-string">'React.Fragment'</span>
  });
}

<span class="hljs-title function_">buildLibrary</span>();

<span class="hljs-comment">// packages/ui/.storybook/main.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">stories</span>: [<span class="hljs-string">'../src/**/*.stories.@(js|jsx|ts|tsx)'</span>],
  <span class="hljs-attr">addons</span>: [
    <span class="hljs-string">'@storybook/addon-essentials'</span>,
    <span class="hljs-string">'@storybook/addon-interactions'</span>,
    <span class="hljs-string">'@storybook/addon-docs'</span>
  ],
  <span class="hljs-attr">framework</span>: {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'@storybook/react-webpack5'</span>,
    <span class="hljs-attr">options</span>: {}
  },
  <span class="hljs-attr">webpackFinal</span>: <span class="hljs-keyword">async</span> (config) =&gt; {
    <span class="hljs-comment">// è‡ªå®šä¹‰webpacké…ç½®</span>
    config.<span class="hljs-property">resolve</span>.<span class="hljs-property">alias</span> = {
      ...config.<span class="hljs-property">resolve</span>.<span class="hljs-property">alias</span>,
      <span class="hljs-string">'@'</span>: <span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'../src'</span>)
    };
    
    <span class="hljs-keyword">return</span> config;
  }
};
</code></pre>
<h3 data-id="heading-31">ä½ä»£ç å¹³å°å·¥ç¨‹åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä½ä»£ç å¼•æ“æ ¸å¿ƒ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">LowCodeEngine</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">components</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">schemas</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">plugins</span> = [];
  }
  
  <span class="hljs-comment">// æ³¨å†Œç»„ä»¶</span>
  <span class="hljs-title function_">registerComponent</span>(<span class="hljs-params">name, component</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">components</span>.<span class="hljs-title function_">set</span>(name, component);
  }
  
  <span class="hljs-comment">// æ³¨å†Œæ’ä»¶</span>
  <span class="hljs-title function_">registerPlugin</span>(<span class="hljs-params">plugin</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">plugins</span>.<span class="hljs-title function_">push</span>(plugin);
    plugin.<span class="hljs-title function_">init</span>(<span class="hljs-variable language_">this</span>);
  }
  
  <span class="hljs-comment">// è§£æschemaå¹¶æ¸²æŸ“</span>
  <span class="hljs-title function_">render</span>(<span class="hljs-params">schema</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-title class_">Component</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">components</span>.<span class="hljs-title function_">get</span>(schema.<span class="hljs-property">type</span>);
    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Component</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Component <span class="hljs-subst">${schema.type}</span> not found`</span>);
    }
    
    <span class="hljs-keyword">const</span> props = {
      ...schema.<span class="hljs-property">props</span>,
      <span class="hljs-attr">children</span>: schema.<span class="hljs-property">children</span>?.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>(child))
    };
    
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">React</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-title class_">Component</span>, props, props.<span class="hljs-property">children</span>);
  }
  
  <span class="hljs-comment">// é¡µé¢æ„å»ºå™¨</span>
  <span class="hljs-title function_">buildPage</span>(<span class="hljs-params">schema</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>(schema);
  }
}

<span class="hljs-comment">// æ‹–æ‹½ç³»ç»Ÿ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DragDropSystem</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">container</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span> = container;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">draggedElement</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dropZones</span> = [];
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();
  }
  
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'dragstart'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleDragStart</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'dragover'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleDragOver</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">container</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'drop'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleDrop</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
  }
  
  <span class="hljs-title function_">handleDragStart</span>(<span class="hljs-params">e</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">draggedElement</span> = e.<span class="hljs-property">target</span>;
    e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-property">effectAllowed</span> = <span class="hljs-string">'move'</span>;
  }
  
  <span class="hljs-title function_">handleDragOver</span>(<span class="hljs-params">e</span>) {
    e.<span class="hljs-title function_">preventDefault</span>();
    e.<span class="hljs-property">dataTransfer</span>.<span class="hljs-property">dropEffect</span> = <span class="hljs-string">'move'</span>;
  }
  
  <span class="hljs-title function_">handleDrop</span>(<span class="hljs-params">e</span>) {
    e.<span class="hljs-title function_">preventDefault</span>();
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">draggedElement</span> &amp;&amp; e.<span class="hljs-property">target</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">contains</span>(<span class="hljs-string">'drop-zone'</span>)) {
      e.<span class="hljs-property">target</span>.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">draggedElement</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onDrop</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">draggedElement</span>, e.<span class="hljs-property">target</span>);
    }
  }
}
</code></pre>
<h2 data-id="heading-32">ğŸ“Š ä¼ä¸šçº§ç›‘æ§ä½“ç³»</h2>
<h3 data-id="heading-33">é”™è¯¯ç›‘æ§ç³»ç»Ÿ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é”™è¯¯ç›‘æ§SDK - å‰ç«¯é”™è¯¯é‡‡é›†å’Œä¸ŠæŠ¥ç³»ç»Ÿ</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ErrorMonitor</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">config</span>) {
    <span class="hljs-comment">// ===== é…ç½®åˆå§‹åŒ– =====</span>
    <span class="hljs-comment">// åˆå¹¶ç”¨æˆ·é…ç½®å’Œé»˜è®¤é…ç½®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span> = {
      <span class="hljs-attr">apiUrl</span>: <span class="hljs-string">'/api/errors'</span>,           <span class="hljs-comment">// é”™è¯¯ä¸ŠæŠ¥APIåœ°å€</span>
      <span class="hljs-attr">maxErrors</span>: <span class="hljs-number">50</span>,                 <span class="hljs-comment">// æœ¬åœ°æœ€å¤§é”™è¯¯ç¼“å­˜æ•°</span>
      <span class="hljs-attr">sampleRate</span>: <span class="hljs-number">1</span>,                  <span class="hljs-comment">// é‡‡æ ·ç‡ï¼ˆ1=100%ï¼Œ0.1=10%ï¼‰</span>
      ...config                       <span class="hljs-comment">// åˆå¹¶ç”¨æˆ·è‡ªå®šä¹‰é…ç½®</span>
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span> = [];                 <span class="hljs-comment">// æœ¬åœ°é”™è¯¯ç¼“å­˜æ•°ç»„</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();                      <span class="hljs-comment">// åˆå§‹åŒ–ç›‘æ§</span>
  }
  
  <span class="hljs-comment">// ===== åˆå§‹åŒ–æ–¹æ³• =====</span>
  <span class="hljs-comment">// å¯åŠ¨æ‰€æœ‰é”™è¯¯ç›‘å¬æœºåˆ¶</span>
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">captureGlobalErrors</span>();        <span class="hljs-comment">// ç›‘å¬å…¨å±€JavaScripté”™è¯¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">captureUnhandledRejections</span>(); <span class="hljs-comment">// ç›‘å¬æœªå¤„ç†çš„Promise rejection</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">captureResourceErrors</span>();     <span class="hljs-comment">// ç›‘å¬èµ„æºåŠ è½½é”™è¯¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startReporting</span>();            <span class="hljs-comment">// å¯åŠ¨å®šæ—¶ä¸ŠæŠ¥æœºåˆ¶</span>
  }
  
  <span class="hljs-comment">// ===== å…¨å±€JavaScripté”™è¯¯ç›‘å¬ =====</span>
  <span class="hljs-comment">// æ•è·æ‰€æœ‰æœªå¤„ç†çš„JavaScriptè¿è¡Œæ—¶é”™è¯¯</span>
  <span class="hljs-title function_">captureGlobalErrors</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-comment">// æ„å»ºé”™è¯¯å¯¹è±¡ï¼ŒåŒ…å«è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">captureError</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'javascript'</span>,           <span class="hljs-comment">// é”™è¯¯ç±»å‹ï¼šJavaScriptè¿è¡Œæ—¶é”™è¯¯</span>
        <span class="hljs-attr">message</span>: event.<span class="hljs-property">message</span>,        <span class="hljs-comment">// é”™è¯¯æ¶ˆæ¯</span>
        <span class="hljs-attr">filename</span>: event.<span class="hljs-property">filename</span>,      <span class="hljs-comment">// å‡ºé”™çš„æ–‡ä»¶å</span>
        <span class="hljs-attr">lineno</span>: event.<span class="hljs-property">lineno</span>,          <span class="hljs-comment">// é”™è¯¯è¡Œå·</span>
        <span class="hljs-attr">colno</span>: event.<span class="hljs-property">colno</span>,           <span class="hljs-comment">// é”™è¯¯åˆ—å·</span>
        <span class="hljs-attr">stack</span>: event.<span class="hljs-property">error</span>?.<span class="hljs-property">stack</span>     <span class="hljs-comment">// é”™è¯¯å †æ ˆä¿¡æ¯</span>
      });
    });
  }
  
  <span class="hljs-comment">// ===== Promise rejectionç›‘å¬ =====</span>
  <span class="hljs-comment">// æ•è·æ‰€æœ‰æœªå¤„ç†çš„Promise rejection</span>
  <span class="hljs-title function_">captureUnhandledRejections</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'unhandledrejection'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">captureError</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'promise'</span>,                           <span class="hljs-comment">// é”™è¯¯ç±»å‹ï¼šPromiseé”™è¯¯</span>
        <span class="hljs-attr">message</span>: event.<span class="hljs-property">reason</span>?.<span class="hljs-property">message</span> || <span class="hljs-string">'Unhandled Promise Rejection'</span>, <span class="hljs-comment">// é”™è¯¯æ¶ˆæ¯</span>
        <span class="hljs-attr">stack</span>: event.<span class="hljs-property">reason</span>?.<span class="hljs-property">stack</span>                  <span class="hljs-comment">// é”™è¯¯å †æ ˆ</span>
      });
    });
  }
  
  <span class="hljs-comment">// ===== èµ„æºåŠ è½½é”™è¯¯ç›‘å¬ =====</span>
  <span class="hljs-comment">// æ•è·å›¾ç‰‡ã€è„šæœ¬ã€æ ·å¼ç­‰èµ„æºåŠ è½½å¤±è´¥</span>
  <span class="hljs-title function_">captureResourceErrors</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä½¿ç”¨æ•è·é˜¶æ®µç›‘å¬ï¼Œèƒ½è·å–åˆ°èµ„æºåŠ è½½é”™è¯¯</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-comment">// event.target !== window ç¡®ä¿æ˜¯èµ„æºé”™è¯¯ï¼Œä¸æ˜¯JSé”™è¯¯</span>
      <span class="hljs-keyword">if</span> (event.<span class="hljs-property">target</span> !== <span class="hljs-variable language_">window</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">captureError</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">'resource'</span>,                                      <span class="hljs-comment">// é”™è¯¯ç±»å‹ï¼šèµ„æºåŠ è½½é”™è¯¯</span>
          <span class="hljs-attr">message</span>: <span class="hljs-string">`Failed to load <span class="hljs-subst">${event.target.tagName}</span>`</span>,         <span class="hljs-comment">// é”™è¯¯æè¿°</span>
          <span class="hljs-attr">resource</span>: event.<span class="hljs-property">target</span>.<span class="hljs-property">src</span> || event.<span class="hljs-property">target</span>.<span class="hljs-property">href</span>,          <span class="hljs-comment">// å¤±è´¥çš„èµ„æºURL</span>
          <span class="hljs-attr">type</span>: event.<span class="hljs-property">target</span>.<span class="hljs-property">tagName</span>.<span class="hljs-title function_">toLowerCase</span>()                   <span class="hljs-comment">// èµ„æºç±»å‹ï¼ˆimg, scriptç­‰ï¼‰</span>
        });
      }
    }, <span class="hljs-literal">true</span>);  <span class="hljs-comment">// trueè¡¨ç¤ºä½¿ç”¨æ•è·é˜¶æ®µ</span>
  }
  
  <span class="hljs-comment">// ===== é”™è¯¯æ•è·æ ¸å¿ƒæ–¹æ³• =====</span>
  <span class="hljs-comment">// ç»Ÿä¸€å¤„ç†æ‰€æœ‰ç±»å‹çš„é”™è¯¯</span>
  <span class="hljs-title function_">captureError</span>(<span class="hljs-params">error</span>) {
    <span class="hljs-comment">// ===== é‡‡æ ·æ§åˆ¶ =====</span>
    <span class="hljs-comment">// æ ¹æ®é‡‡æ ·ç‡å†³å®šæ˜¯å¦å¤„ç†æ­¤é”™è¯¯ï¼Œå‡å°‘ä¸ŠæŠ¥é‡</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">sampleRate</span>) {
      <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-comment">// ===== é”™è¯¯ä¿¡æ¯å¢å¼º =====</span>
    <span class="hljs-comment">// æ·»åŠ ç¯å¢ƒä¿¡æ¯å’Œä¸Šä¸‹æ–‡ä¿¡æ¯</span>
    <span class="hljs-keyword">const</span> enrichedError = {
      ...error,                           <span class="hljs-comment">// åŸå§‹é”™è¯¯ä¿¡æ¯</span>
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),               <span class="hljs-comment">// é”™è¯¯å‘ç”Ÿæ—¶é—´æˆ³</span>
      <span class="hljs-attr">url</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>,           <span class="hljs-comment">// å½“å‰é¡µé¢URL</span>
      <span class="hljs-attr">userAgent</span>: navigator.<span class="hljs-property">userAgent</span>,       <span class="hljs-comment">// æµè§ˆå™¨ç”¨æˆ·ä»£ç†</span>
      <span class="hljs-attr">sessionId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getSessionId</span>(),      <span class="hljs-comment">// ä¼šè¯IDï¼ˆç”¨äºå…³è”åŒä¸€ç”¨æˆ·çš„é”™è¯¯ï¼‰</span>
      <span class="hljs-attr">userId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUserId</span>()            <span class="hljs-comment">// ç”¨æˆ·IDï¼ˆéœ€è¦ç”¨æˆ·è‡ªå·±å®ç°ï¼‰</span>
    };
    
    <span class="hljs-comment">// ===== é”™è¯¯ç¼“å­˜ =====</span>
    <span class="hljs-comment">// å°†é”™è¯¯æ·»åŠ åˆ°æœ¬åœ°ç¼“å­˜</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">push</span>(enrichedError);
    
    <span class="hljs-comment">// ===== ç¼“å­˜å¤§å°æ§åˆ¶ =====</span>
    <span class="hljs-comment">// å¦‚æœç¼“å­˜è¶…è¿‡æœ€å¤§å€¼ï¼Œç§»é™¤æœ€æ—§çš„é”™è¯¯</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">maxErrors</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">shift</span>();
    }
  }
  
  <span class="hljs-comment">// ===== é”™è¯¯ä¸ŠæŠ¥æ–¹æ³• =====</span>
  <span class="hljs-comment">// å°†ç¼“å­˜ä¸­çš„é”™è¯¯æ‰¹é‡å‘é€åˆ°æœåŠ¡å™¨</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">reportErrors</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-comment">// å¤åˆ¶é”™è¯¯æ•°ç»„å¹¶æ¸…ç©ºç¼“å­˜</span>
    <span class="hljs-keyword">const</span> errorsToSend = [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span> = [];
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// å‘é€é”™è¯¯åˆ°ç›‘æ§æœåŠ¡å™¨</span>
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">apiUrl</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
        <span class="hljs-attr">headers</span>: {
          <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
        },
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
          <span class="hljs-attr">errors</span>: errorsToSend,          <span class="hljs-comment">// é”™è¯¯æ•°ç»„</span>
          <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()          <span class="hljs-comment">// ä¸ŠæŠ¥æ—¶é—´æˆ³</span>
        })
      });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// ===== ä¸ŠæŠ¥å¤±è´¥å¤„ç† =====</span>
      <span class="hljs-comment">// å°†é”™è¯¯é‡æ–°æ·»åŠ åˆ°ç¼“å­˜å¤´éƒ¨ï¼Œä¸‹æ¬¡é‡è¯•</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to report errors:'</span>, error);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">errors</span>.<span class="hljs-title function_">unshift</span>(...errorsToSend);
    }
  }
  
  <span class="hljs-comment">// ===== å¯åŠ¨å®šæ—¶ä¸ŠæŠ¥ =====</span>
  <span class="hljs-title function_">startReporting</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å®šæ—¶ä¸ŠæŠ¥ï¼šæ¯30ç§’ä¸ŠæŠ¥ä¸€æ¬¡</span>
    <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reportErrors</span>(), <span class="hljs-number">30000</span>);
    
    <span class="hljs-comment">// é¡µé¢å¸è½½æ—¶ä¸ŠæŠ¥ï¼šç¡®ä¿ç”¨æˆ·ç¦»å¼€é¡µé¢å‰ä¸ŠæŠ¥æ‰€æœ‰é”™è¯¯</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'beforeunload'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">reportErrors</span>();
    });
  }
  
  <span class="hljs-comment">// ===== ä¼šè¯IDç”Ÿæˆ =====</span>
  <span class="hljs-comment">// ç”Ÿæˆå”¯ä¸€çš„ä¼šè¯æ ‡è¯†ç¬¦</span>
  <span class="hljs-title function_">getSessionId</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä»sessionStorageè·å–æˆ–ç”Ÿæˆæ–°çš„</span>
    <span class="hljs-keyword">if</span> (!sessionStorage.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'sessionId'</span>)) {
      <span class="hljs-keyword">const</span> sessionId = <span class="hljs-string">'session_'</span> + 
        <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>().<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>).<span class="hljs-title function_">substr</span>(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>) + 
        <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      sessionStorage.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">'sessionId'</span>, sessionId);
      <span class="hljs-keyword">return</span> sessionId;
    }
    <span class="hljs-keyword">return</span> sessionStorage.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'sessionId'</span>);
  }
  
  <span class="hljs-comment">// ===== ç”¨æˆ·IDè·å– =====</span>
  <span class="hljs-comment">// è·å–å½“å‰ç”¨æˆ·IDï¼ˆéœ€è¦æ ¹æ®å…·ä½“ä¸šåŠ¡å®ç°ï¼‰</span>
  <span class="hljs-title function_">getUserId</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å¯ä»¥ä»cookieã€localStorageã€å…¨å±€å˜é‡ç­‰è·å–</span>
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'userId'</span>) || <span class="hljs-string">'anonymous'</span>;
  }
}

<span class="hljs-comment">// ===== åˆå§‹åŒ–é”™è¯¯ç›‘æ§ =====</span>
<span class="hljs-comment">// åœ¨åº”ç”¨å…¥å£å¤„åˆå§‹åŒ–ç›‘æ§ç³»ç»Ÿ</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">ErrorMonitor</span>({
  <span class="hljs-attr">apiUrl</span>: <span class="hljs-string">'https://monitor.example.com/api/errors'</span>,  <span class="hljs-comment">// ç›‘æ§APIåœ°å€</span>
  <span class="hljs-attr">sampleRate</span>: <span class="hljs-number">0.1</span>                                    <span class="hljs-comment">// 10%é‡‡æ ·ç‡ï¼Œå‡å°‘ä¸ŠæŠ¥é‡</span>
});
</code></pre>
<h3 data-id="heading-34">æ€§èƒ½ç›‘æ§ç³»ç»Ÿ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Web Vitalsç›‘æ§ - æ ¸å¿ƒWebæ€§èƒ½æŒ‡æ ‡ç›‘æ§</span>

<span class="hljs-comment">// å¯¼å…¥web-vitalsåº“çš„æ ¸å¿ƒæŒ‡æ ‡å‡½æ•°</span>
<span class="hljs-keyword">import</span> { getCLS, getFID, getFCP, getLCP, getTTFB } <span class="hljs-keyword">from</span> <span class="hljs-string">'web-vitals'</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">PerformanceMonitor</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span> = {};           <span class="hljs-comment">// å­˜å‚¨æ€§èƒ½æŒ‡æ ‡</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();                <span class="hljs-comment">// åˆå§‹åŒ–ç›‘æ§</span>
  }
  
  <span class="hljs-comment">// ===== åˆå§‹åŒ–æ–¹æ³• =====</span>
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">observeWebVitals</span>();           <span class="hljs-comment">// ç›‘æ§æ ¸å¿ƒWebæ€§èƒ½æŒ‡æ ‡</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">observeUserInteractions</span>();    <span class="hljs-comment">// ç›‘æ§ç”¨æˆ·äº¤äº’æ€§èƒ½</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">observeAPIPerformance</span>();     <span class="hljs-comment">// ç›‘æ§APIè¯·æ±‚æ€§èƒ½</span>
  }
  
  <span class="hljs-comment">// ===== Web VitalsæŒ‡æ ‡ç›‘æ§ =====</span>
  <span class="hljs-comment">// ç›‘æ§Googleæ¨èçš„æ ¸å¿ƒWebæ€§èƒ½æŒ‡æ ‡</span>
  <span class="hljs-title function_">observeWebVitals</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// CLS - Cumulative Layout Shiftï¼ˆç´¯ç§¯å¸ƒå±€åç§»ï¼‰</span>
    <span class="hljs-comment">// è¡¡é‡é¡µé¢è§†è§‰ç¨³å®šæ€§ï¼Œå€¼è¶Šå°è¶Šå¥½ï¼ˆ&lt;0.1ä¸ºè‰¯å¥½ï¼‰</span>
    <span class="hljs-title function_">getCLS</span>(<span class="hljs-function">(<span class="hljs-params">metric</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">recordMetric</span>(<span class="hljs-string">'CLS'</span>, metric));
    
    <span class="hljs-comment">// FID - First Input Delayï¼ˆé¦–æ¬¡è¾“å…¥å»¶è¿Ÿï¼‰</span>
    <span class="hljs-comment">// è¡¡é‡é¡µé¢äº¤äº’æ€§ï¼Œå€¼è¶Šå°è¶Šå¥½ï¼ˆ&lt;100msä¸ºè‰¯å¥½ï¼‰</span>
    <span class="hljs-title function_">getFID</span>(<span class="hljs-function">(<span class="hljs-params">metric</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">recordMetric</span>(<span class="hljs-string">'FID'</span>, metric));
    
    <span class="hljs-comment">// FCP - First Contentful Paintï¼ˆé¦–æ¬¡å†…å®¹ç»˜åˆ¶ï¼‰</span>
    <span class="hljs-comment">// è¡¡é‡é¡µé¢åŠ è½½é€Ÿåº¦ï¼Œå€¼è¶Šå°è¶Šå¥½ï¼ˆ&lt;1.8sä¸ºè‰¯å¥½ï¼‰</span>
    <span class="hljs-title function_">getFCP</span>(<span class="hljs-function">(<span class="hljs-params">metric</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">recordMetric</span>(<span class="hljs-string">'FCP'</span>, metric));
    
    <span class="hljs-comment">// LCP - Largest Contentful Paintï¼ˆæœ€å¤§å†…å®¹ç»˜åˆ¶ï¼‰</span>
    <span class="hljs-comment">// è¡¡é‡é¡µé¢ä¸»è¦å†…å®¹åŠ è½½é€Ÿåº¦ï¼Œå€¼è¶Šå°è¶Šå¥½ï¼ˆ&lt;2.5sä¸ºè‰¯å¥½ï¼‰</span>
    <span class="hljs-title function_">getLCP</span>(<span class="hljs-function">(<span class="hljs-params">metric</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">recordMetric</span>(<span class="hljs-string">'LCP'</span>, metric));
    
    <span class="hljs-comment">// TTFB - Time to First Byteï¼ˆé¦–å­—èŠ‚æ—¶é—´ï¼‰</span>
    <span class="hljs-comment">// è¡¡é‡æœåŠ¡å™¨å“åº”é€Ÿåº¦ï¼Œå€¼è¶Šå°è¶Šå¥½ï¼ˆ&lt;800msä¸ºè‰¯å¥½ï¼‰</span>
    <span class="hljs-title function_">getTTFB</span>(<span class="hljs-function">(<span class="hljs-params">metric</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">recordMetric</span>(<span class="hljs-string">'TTFB'</span>, metric));
  }
  
  <span class="hljs-comment">// ===== ç”¨æˆ·äº¤äº’æ€§èƒ½ç›‘æ§ =====</span>
  <span class="hljs-comment">// ç›‘æ§ç”¨æˆ·çš„ç‚¹å‡»ã€è¾“å…¥ç­‰äº¤äº’çš„å“åº”å»¶è¿Ÿ</span>
  <span class="hljs-title function_">observeUserInteractions</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç›‘æ§ç‚¹å‡»å“åº”å»¶è¿Ÿ</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> startTime = performance.<span class="hljs-title function_">now</span>();  <span class="hljs-comment">// è®°å½•ç‚¹å‡»å¼€å§‹æ—¶é—´</span>
      
      <span class="hljs-comment">// ä½¿ç”¨requestAnimationFrameç¡®ä¿åœ¨ä¸‹ä¸€å¸§æµ‹é‡</span>
      <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> clickDelay = performance.<span class="hljs-title function_">now</span>() - startTime;
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">recordMetric</span>(<span class="hljs-string">'ClickDelay'</span>, { <span class="hljs-attr">value</span>: clickDelay });
      });
    });
    
    <span class="hljs-comment">// ç›‘æ§é”®ç›˜è¾“å…¥å“åº”å»¶è¿Ÿ</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'keydown'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> startTime = performance.<span class="hljs-title function_">now</span>();
      
      <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">const</span> keyDelay = performance.<span class="hljs-title function_">now</span>() - startTime;
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">recordMetric</span>(<span class="hljs-string">'KeyDelay'</span>, { <span class="hljs-attr">value</span>: keyDelay });
      });
    });
  }
  
  <span class="hljs-comment">// ===== APIæ€§èƒ½ç›‘æ§ =====</span>
  <span class="hljs-comment">// æ‹¦æˆªfetch APIï¼Œç›‘æ§æ‰€æœ‰ç½‘ç»œè¯·æ±‚çš„æ€§èƒ½</span>
  <span class="hljs-title function_">observeAPIPerformance</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ä¿å­˜åŸå§‹çš„fetchå‡½æ•°</span>
    <span class="hljs-keyword">const</span> originalFetch = <span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span>;
    
    <span class="hljs-comment">// é‡å†™fetchå‡½æ•°ï¼Œæ·»åŠ æ€§èƒ½ç›‘æ§</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">fetch</span> = <span class="hljs-keyword">async</span> (...args) =&gt; {
      <span class="hljs-keyword">const</span> startTime = performance.<span class="hljs-title function_">now</span>();  <span class="hljs-comment">// è®°å½•è¯·æ±‚å¼€å§‹æ—¶é—´</span>
      
      <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// æ‰§è¡ŒåŸå§‹fetchè¯·æ±‚</span>
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">originalFetch</span>(...args);
        <span class="hljs-keyword">const</span> endTime = performance.<span class="hljs-title function_">now</span>();   <span class="hljs-comment">// è®°å½•è¯·æ±‚ç»“æŸæ—¶é—´</span>
        
        <span class="hljs-comment">// è®°å½•æˆåŠŸçš„APIè¯·æ±‚æŒ‡æ ‡</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">recordMetric</span>(<span class="hljs-string">'APIRequest'</span>, {
          <span class="hljs-attr">url</span>: args[<span class="hljs-number">0</span>],                           <span class="hljs-comment">// è¯·æ±‚URL</span>
          <span class="hljs-attr">method</span>: args[<span class="hljs-number">1</span>]?.<span class="hljs-property">method</span> || <span class="hljs-string">'GET'</span>,        <span class="hljs-comment">// è¯·æ±‚æ–¹æ³•</span>
          <span class="hljs-attr">status</span>: response.<span class="hljs-property">status</span>,                   <span class="hljs-comment">// å“åº”çŠ¶æ€ç </span>
          <span class="hljs-attr">duration</span>: endTime - startTime,            <span class="hljs-comment">// è¯·æ±‚è€—æ—¶</span>
          <span class="hljs-attr">size</span>: response.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'content-length'</span>) <span class="hljs-comment">// å“åº”å¤§å°</span>
        });
        
        <span class="hljs-keyword">return</span> response;
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-keyword">const</span> endTime = performance.<span class="hljs-title function_">now</span>();
        
        <span class="hljs-comment">// è®°å½•å¤±è´¥çš„APIè¯·æ±‚æŒ‡æ ‡</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">recordMetric</span>(<span class="hljs-string">'APIError'</span>, {
          <span class="hljs-attr">url</span>: args[<span class="hljs-number">0</span>],                           <span class="hljs-comment">// è¯·æ±‚URL</span>
          <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span>,                    <span class="hljs-comment">// é”™è¯¯ä¿¡æ¯</span>
          <span class="hljs-attr">duration</span>: endTime - startTime             <span class="hljs-comment">// è¯·æ±‚è€—æ—¶</span>
        });
        
        <span class="hljs-comment">// ç»§ç»­æŠ›å‡ºåŸå§‹é”™è¯¯</span>
        <span class="hljs-keyword">throw</span> error;
      }
    };
  }
  
  <span class="hljs-comment">// ===== æŒ‡æ ‡è®°å½•æ–¹æ³• =====</span>
  <span class="hljs-comment">// ç»Ÿä¸€è®°å½•å„ç§æ€§èƒ½æŒ‡æ ‡</span>
  <span class="hljs-title function_">recordMetric</span>(<span class="hljs-params">name, metric</span>) {
    <span class="hljs-comment">// å­˜å‚¨æŒ‡æ ‡æ•°æ®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>[name] = {
      ...metric,                   <span class="hljs-comment">// åŸå§‹æŒ‡æ ‡æ•°æ®</span>
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),       <span class="hljs-comment">// è®°å½•æ—¶é—´</span>
      <span class="hljs-attr">url</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>    <span class="hljs-comment">// é¡µé¢URL</span>
    };
    
    <span class="hljs-comment">// ç«‹å³å‘é€æŒ‡æ ‡åˆ°æœåŠ¡å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendMetric</span>(name, metric);
  }
  
  <span class="hljs-comment">// ===== æŒ‡æ ‡ä¸ŠæŠ¥æ–¹æ³• =====</span>
  <span class="hljs-comment">// å°†æ€§èƒ½æŒ‡æ ‡å‘é€åˆ°ç›‘æ§æœåŠ¡å™¨</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">sendMetric</span>(<span class="hljs-params">name, metric</span>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/metrics'</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
        <span class="hljs-attr">headers</span>: {
          <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
        },
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
          <span class="hljs-attr">name</span>: name,                        <span class="hljs-comment">// æŒ‡æ ‡åç§°</span>
          <span class="hljs-attr">metric</span>: metric,                    <span class="hljs-comment">// æŒ‡æ ‡æ•°æ®</span>
          <span class="hljs-attr">url</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>,          <span class="hljs-comment">// é¡µé¢URL</span>
          <span class="hljs-attr">userAgent</span>: navigator.<span class="hljs-property">userAgent</span>,       <span class="hljs-comment">// æµè§ˆå™¨ä¿¡æ¯</span>
          <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()               <span class="hljs-comment">// ä¸ŠæŠ¥æ—¶é—´</span>
        })
      });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to send metric:'</span>, error);
      <span class="hljs-comment">// å¯ä»¥è€ƒè™‘æ·»åŠ é‡è¯•é€»è¾‘æˆ–æœ¬åœ°ç¼“å­˜</span>
    }
  }
  
  <span class="hljs-comment">// ===== æ€§èƒ½æŠ¥å‘Šç”Ÿæˆ =====</span>
  <span class="hljs-comment">// ç”Ÿæˆæ€§èƒ½æŠ¥å‘Šæ‘˜è¦</span>
  <span class="hljs-title function_">getPerformanceReport</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-comment">// æ ¸å¿ƒWeb VitalsæŒ‡æ ‡</span>
      <span class="hljs-attr">vitals</span>: {
        <span class="hljs-attr">cls</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">CLS</span>?.<span class="hljs-property">value</span> || <span class="hljs-number">0</span>,
        <span class="hljs-attr">fid</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">FID</span>?.<span class="hljs-property">value</span> || <span class="hljs-number">0</span>,
        <span class="hljs-attr">fcp</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">FCP</span>?.<span class="hljs-property">value</span> || <span class="hljs-number">0</span>,
        <span class="hljs-attr">lcp</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">LCP</span>?.<span class="hljs-property">value</span> || <span class="hljs-number">0</span>,
        <span class="hljs-attr">ttfb</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">TTFB</span>?.<span class="hljs-property">value</span> || <span class="hljs-number">0</span>
      },
      
      <span class="hljs-comment">// äº¤äº’æ€§èƒ½æŒ‡æ ‡</span>
      <span class="hljs-attr">interactions</span>: {
        <span class="hljs-attr">clickDelay</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">ClickDelay</span>?.<span class="hljs-property">value</span> || <span class="hljs-number">0</span>,
        <span class="hljs-attr">keyDelay</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>.<span class="hljs-property">KeyDelay</span>?.<span class="hljs-property">value</span> || <span class="hljs-number">0</span>
      },
      
      <span class="hljs-comment">// ç½‘ç»œè¯·æ±‚æ€§èƒ½</span>
      <span class="hljs-attr">network</span>: {
        <span class="hljs-attr">avgResponseTime</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculateAverageResponseTime</span>(),
        <span class="hljs-attr">errorRate</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculateErrorRate</span>()
      },
      
      <span class="hljs-comment">// é¡µé¢ä¿¡æ¯</span>
      <span class="hljs-attr">page</span>: {
        <span class="hljs-attr">url</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
      }
    };
  }
  
  <span class="hljs-comment">// ===== è®¡ç®—å¹³å‡å“åº”æ—¶é—´ =====</span>
  <span class="hljs-title function_">calculateAverageResponseTime</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> requests = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>)
      .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">metric</span> =&gt;</span> metric.<span class="hljs-property">name</span> === <span class="hljs-string">'APIRequest'</span>);
    
    <span class="hljs-keyword">if</span> (requests.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">const</span> totalTime = requests.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, req</span>) =&gt;</span> sum + req.<span class="hljs-property">duration</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">return</span> totalTime / requests.<span class="hljs-property">length</span>;
  }
  
  <span class="hljs-comment">// ===== è®¡ç®—é”™è¯¯ç‡ =====</span>
  <span class="hljs-title function_">calculateErrorRate</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> allRequests = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">values</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">metrics</span>)
      .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">metric</span> =&gt;</span> metric.<span class="hljs-property">name</span>.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'API'</span>));
    
    <span class="hljs-keyword">if</span> (allRequests.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">const</span> errors = allRequests.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">metric</span> =&gt;</span> metric.<span class="hljs-property">name</span> === <span class="hljs-string">'APIError'</span>);
    <span class="hljs-keyword">return</span> (errors.<span class="hljs-property">length</span> / allRequests.<span class="hljs-property">length</span>) * <span class="hljs-number">100</span>;
  }
}

<span class="hljs-comment">// ===== åˆå§‹åŒ–æ€§èƒ½ç›‘æ§ =====</span>
<span class="hljs-comment">// åœ¨åº”ç”¨å…¥å£å¤„åˆå§‹åŒ–æ€§èƒ½ç›‘æ§ç³»ç»Ÿ</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceMonitor</span>();
</code></pre>
<h3 data-id="heading-35">ç”¨æˆ·è¡Œä¸ºåˆ†æ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”¨æˆ·è¡Œä¸ºè¿½è¸ª - ç”¨æˆ·äº¤äº’è¡Œä¸ºæ•°æ®é‡‡é›†ç³»ç»Ÿ</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserBehaviorTracker</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span> = [];                          <span class="hljs-comment">// æœ¬åœ°äº‹ä»¶ç¼“å­˜</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sessionId</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateSessionId</span>();   <span class="hljs-comment">// ä¼šè¯å”¯ä¸€æ ‡è¯†</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">init</span>();                               <span class="hljs-comment">// åˆå§‹åŒ–è¿½è¸ª</span>
  }
  
  <span class="hljs-comment">// ===== åˆå§‹åŒ–æ–¹æ³• =====</span>
  <span class="hljs-title function_">init</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">trackPageViews</span>();          <span class="hljs-comment">// é¡µé¢è®¿é—®è¿½è¸ª</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">trackClicks</span>();            <span class="hljs-comment">// ç‚¹å‡»è¡Œä¸ºè¿½è¸ª</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">trackScrolls</span>();           <span class="hljs-comment">// æ»šåŠ¨è¡Œä¸ºè¿½è¸ª</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">trackFormInteractions</span>();   <span class="hljs-comment">// è¡¨å•äº¤äº’è¿½è¸ª</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">startBatching</span>();          <span class="hljs-comment">// å¯åŠ¨æ‰¹é‡ä¸ŠæŠ¥</span>
  }
  
  <span class="hljs-comment">// ===== é¡µé¢è®¿é—®è¿½è¸ª =====</span>
  <span class="hljs-title function_">trackPageViews</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é¡µé¢é¦–æ¬¡åŠ è½½æ—¶çš„è®¿é—®è®°å½•</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">track</span>(<span class="hljs-string">'page_view'</span>, {
      <span class="hljs-attr">path</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span>,        <span class="hljs-comment">// é¡µé¢è·¯å¾„</span>
      <span class="hljs-attr">referrer</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-property">referrer</span>,          <span class="hljs-comment">// æ¥æºé¡µé¢</span>
      <span class="hljs-attr">title</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-property">title</span>,               <span class="hljs-comment">// é¡µé¢æ ‡é¢˜</span>
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),               <span class="hljs-comment">// è®¿é—®æ—¶é—´</span>
      <span class="hljs-attr">userAgent</span>: navigator.<span class="hljs-property">userAgent</span>         <span class="hljs-comment">// æµè§ˆå™¨ä¿¡æ¯</span>
    });
    
    <span class="hljs-comment">// SPAè·¯ç”±å˜åŒ–ç›‘å¬ï¼ˆç›‘å¬æµè§ˆå™¨å†å²è®°å½•å˜åŒ–ï¼‰</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'popstate'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">track</span>(<span class="hljs-string">'page_view'</span>, {
        <span class="hljs-attr">path</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">pathname</span>,    <span class="hljs-comment">// æ–°é¡µé¢è·¯å¾„</span>
        <span class="hljs-attr">type</span>: <span class="hljs-string">'spa_navigation'</span>            <span class="hljs-comment">// æ ‡è®°ä¸ºSPAè·¯ç”±è·³è½¬</span>
      });
    });
    
    <span class="hljs-comment">// ç›‘å¬pushStateå’ŒreplaceStateï¼ˆå¤§å¤šæ•°SPAæ¡†æ¶çš„è·¯ç”±æ–¹æ³•ï¼‰</span>
    <span class="hljs-keyword">const</span> originalPushState = history.<span class="hljs-property">pushState</span>;
    <span class="hljs-keyword">const</span> originalReplaceState = history.<span class="hljs-property">replaceState</span>;
    
    history.<span class="hljs-property">pushState</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
      originalPushState.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>(<span class="hljs-string">'popstate'</span>));
    };
    
    history.<span class="hljs-property">replaceState</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
      originalReplaceState.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
      <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Event</span>(<span class="hljs-string">'popstate'</span>));
    };
  }
  
  <span class="hljs-comment">// ===== ç‚¹å‡»è¡Œä¸ºè¿½è¸ª =====</span>
  <span class="hljs-title function_">trackClicks</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> target = event.<span class="hljs-property">target</span>;
      
      <span class="hljs-comment">// æ„å»ºç‚¹å‡»äº‹ä»¶æ•°æ®</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">track</span>(<span class="hljs-string">'click'</span>, {
        <span class="hljs-attr">elementType</span>: target.<span class="hljs-property">tagName</span>.<span class="hljs-title function_">toLowerCase</span>(),    <span class="hljs-comment">// å…ƒç´ ç±»å‹</span>
        <span class="hljs-attr">elementClass</span>: target.<span class="hljs-property">className</span>,            <span class="hljs-comment">// å…ƒç´ ç±»å</span>
        <span class="hljs-attr">elementId</span>: target.<span class="hljs-property">id</span>,                     <span class="hljs-comment">// å…ƒç´ ID</span>
        <span class="hljs-attr">text</span>: target.<span class="hljs-property">textContent</span>?.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">100</span>),  <span class="hljs-comment">// å…ƒç´ æ–‡æœ¬ï¼ˆæˆªå–å‰100å­—ç¬¦ï¼‰</span>
        <span class="hljs-attr">attributes</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getElementAttributes</span>(target), <span class="hljs-comment">// å…ƒç´ å±æ€§</span>
        <span class="hljs-attr">coordinates</span>: {                             <span class="hljs-comment">// ç‚¹å‡»åæ ‡</span>
          <span class="hljs-attr">x</span>: event.<span class="hljs-property">clientX</span>,
          <span class="hljs-attr">y</span>: event.<span class="hljs-property">clientY</span>
        },
        <span class="hljs-attr">viewportSize</span>: {                            <span class="hljs-comment">// è§†çª—å¤§å°</span>
          <span class="hljs-attr">width</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>,
          <span class="hljs-attr">height</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>
        }
      });
    });
  }
  
  <span class="hljs-comment">// ===== æ»šåŠ¨è¡Œä¸ºè¿½è¸ª =====</span>
  <span class="hljs-title function_">trackScrolls</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> lastScrollDepth = <span class="hljs-number">0</span>;     <span class="hljs-comment">// è®°å½•ä¸Šæ¬¡æ»šåŠ¨æ·±åº¦</span>
    <span class="hljs-keyword">let</span> scrollTimeout = <span class="hljs-literal">null</span>;      <span class="hljs-comment">// é˜²æŠ–å®šæ—¶å™¨</span>
    
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'scroll'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// é˜²æŠ–å¤„ç†ï¼Œé¿å…é¢‘ç¹è§¦å‘</span>
      <span class="hljs-built_in">clearTimeout</span>(scrollTimeout);
      
      scrollTimeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-comment">// è®¡ç®—å½“å‰æ»šåŠ¨æ·±åº¦ç™¾åˆ†æ¯”</span>
        <span class="hljs-keyword">const</span> scrollDepth = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(
          (<span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span> / (<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">scrollHeight</span> - <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>)) * <span class="hljs-number">100</span>
        );
        
        <span class="hljs-comment">// åªæœ‰åœ¨æ»šåŠ¨æ·±åº¦å¢åŠ æ—¶æ‰è®°å½•ï¼ˆé¿å…é‡å¤è®°å½•åŒä¸€æ·±åº¦ï¼‰</span>
        <span class="hljs-keyword">if</span> (scrollDepth &gt; lastScrollDepth) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">track</span>(<span class="hljs-string">'scroll'</span>, {
            <span class="hljs-attr">depth</span>: scrollDepth,                          <span class="hljs-comment">// æ»šåŠ¨æ·±åº¦ç™¾åˆ†æ¯”</span>
            <span class="hljs-attr">scrollPosition</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">scrollY</span>,               <span class="hljs-comment">// æ»šåŠ¨ä½ç½®</span>
            <span class="hljs-attr">pageHeight</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-property">scrollHeight</span>,        <span class="hljs-comment">// é¡µé¢æ€»é«˜åº¦</span>
            <span class="hljs-attr">viewportHeight</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>,            <span class="hljs-comment">// è§†çª—é«˜åº¦</span>
            <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()                       <span class="hljs-comment">// æ»šåŠ¨æ—¶é—´</span>
          });
          lastScrollDepth = scrollDepth;
        }
      }, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100msé˜²æŠ–</span>
    });
  }
  
  <span class="hljs-comment">// ===== è¡¨å•äº¤äº’è¿½è¸ª =====</span>
  <span class="hljs-title function_">trackFormInteractions</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è¡¨å•å…ƒç´ å˜åŒ–è¿½è¸ªï¼ˆinputã€selectã€textareaï¼‰</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'change'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> target = event.<span class="hljs-property">target</span>;
      
      <span class="hljs-keyword">if</span> (target.<span class="hljs-property">tagName</span> === <span class="hljs-string">'INPUT'</span> || target.<span class="hljs-property">tagName</span> === <span class="hljs-string">'SELECT'</span> || target.<span class="hljs-property">tagName</span> === <span class="hljs-string">'TEXTAREA'</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">track</span>(<span class="hljs-string">'form_interaction'</span>, {
          <span class="hljs-attr">fieldType</span>: target.<span class="hljs-property">type</span>,                       <span class="hljs-comment">// å­—æ®µç±»å‹</span>
          <span class="hljs-attr">fieldName</span>: target.<span class="hljs-property">name</span>,                       <span class="hljs-comment">// å­—æ®µåç§°</span>
          <span class="hljs-attr">fieldValue</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sanitizeValue</span>(target.<span class="hljs-property">value</span>),    <span class="hljs-comment">// å­—æ®µå€¼ï¼ˆè„±æ•å¤„ç†ï¼‰</span>
          <span class="hljs-attr">elementId</span>: target.<span class="hljs-property">id</span>,                         <span class="hljs-comment">// å…ƒç´ ID</span>
          <span class="hljs-attr">formId</span>: target.<span class="hljs-property">form</span>?.<span class="hljs-property">id</span>,                     <span class="hljs-comment">// è¡¨å•ID</span>
          <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()                          <span class="hljs-comment">// äº¤äº’æ—¶é—´</span>
        });
      }
    });
    
    <span class="hljs-comment">// è¡¨å•æäº¤è¿½è¸ª</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'submit'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> form = event.<span class="hljs-property">target</span>;
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">track</span>(<span class="hljs-string">'form_submit'</span>, {
        <span class="hljs-attr">formId</span>: form.<span class="hljs-property">id</span>,                              <span class="hljs-comment">// è¡¨å•ID</span>
        <span class="hljs-attr">formName</span>: form.<span class="hljs-property">name</span>,                            <span class="hljs-comment">// è¡¨å•åç§°</span>
        <span class="hljs-attr">formAction</span>: form.<span class="hljs-property">action</span>,                        <span class="hljs-comment">// è¡¨å•æäº¤åœ°å€</span>
        <span class="hljs-attr">formMethod</span>: form.<span class="hljs-property">method</span>,                        <span class="hljs-comment">// æäº¤æ–¹æ³•</span>
        <span class="hljs-attr">fieldCount</span>: form.<span class="hljs-property">elements</span>.<span class="hljs-property">length</span>,                <span class="hljs-comment">// å­—æ®µæ•°é‡</span>
        <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()                           <span class="hljs-comment">// æäº¤æ—¶é—´</span>
      });
    });
    
    <span class="hljs-comment">// è¡¨å•èšç„¦/å¤±ç„¦è¿½è¸ªï¼ˆå¯é€‰ï¼‰</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'focus'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> ([<span class="hljs-string">'INPUT'</span>, <span class="hljs-string">'SELECT'</span>, <span class="hljs-string">'TEXTAREA'</span>].<span class="hljs-title function_">includes</span>(event.<span class="hljs-property">target</span>.<span class="hljs-property">tagName</span>)) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">track</span>(<span class="hljs-string">'form_focus'</span>, {
          <span class="hljs-attr">fieldName</span>: event.<span class="hljs-property">target</span>.<span class="hljs-property">name</span>,
          <span class="hljs-attr">fieldType</span>: event.<span class="hljs-property">target</span>.<span class="hljs-property">type</span>,
          <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
        });
      }
    }, <span class="hljs-literal">true</span>);
  }
  
  <span class="hljs-comment">// ===== äº‹ä»¶è¿½è¸ªæ ¸å¿ƒæ–¹æ³• =====</span>
  <span class="hljs-comment">// ç»Ÿä¸€å¤„ç†æ‰€æœ‰ç”¨æˆ·è¡Œä¸ºäº‹ä»¶</span>
  <span class="hljs-title function_">track</span>(<span class="hljs-params">eventName, data</span>) {
    <span class="hljs-comment">// æ„å»ºå®Œæ•´çš„äº‹ä»¶å¯¹è±¡</span>
    <span class="hljs-keyword">const</span> event = {
      eventName,                              <span class="hljs-comment">// äº‹ä»¶åç§°</span>
      data,                                   <span class="hljs-comment">// äº‹ä»¶æ•°æ®</span>
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),                   <span class="hljs-comment">// äº‹ä»¶æ—¶é—´æˆ³</span>
      <span class="hljs-attr">sessionId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">sessionId</span>,               <span class="hljs-comment">// ä¼šè¯ID</span>
      <span class="hljs-attr">userId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUserId</span>(),                <span class="hljs-comment">// ç”¨æˆ·ID</span>
      <span class="hljs-attr">url</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>,              <span class="hljs-comment">// å½“å‰é¡µé¢URL</span>
      <span class="hljs-attr">userAgent</span>: navigator.<span class="hljs-property">userAgent</span>,          <span class="hljs-comment">// æµè§ˆå™¨ä¿¡æ¯</span>
      <span class="hljs-attr">screenResolution</span>: {                     <span class="hljs-comment">// å±å¹•åˆ†è¾¨ç‡</span>
        <span class="hljs-attr">width</span>: screen.<span class="hljs-property">width</span>,
        <span class="hljs-attr">height</span>: screen.<span class="hljs-property">height</span>
      }
    };
    
    <span class="hljs-comment">// æ·»åŠ åˆ°æœ¬åœ°ç¼“å­˜</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">push</span>(event);
  }
  
  <span class="hljs-comment">// ===== æ‰¹é‡ä¸ŠæŠ¥æœºåˆ¶ =====</span>
  <span class="hljs-title function_">startBatching</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å®šæ—¶æ‰¹é‡ä¸ŠæŠ¥ï¼šæ¯30ç§’ä¸ŠæŠ¥ä¸€æ¬¡</span>
    <span class="hljs-keyword">const</span> batchInterval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendBatch</span>();
    }, <span class="hljs-number">30000</span>);
    
    <span class="hljs-comment">// é¡µé¢å¯è§æ€§å˜åŒ–æ—¶ä¸ŠæŠ¥ï¼ˆç”¨æˆ·åˆ‡æ¢æ ‡ç­¾é¡µï¼‰</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'visibilitychange'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">hidden</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendBatch</span>();
      }
    });
    
    <span class="hljs-comment">// é¡µé¢å¸è½½æ—¶ä¸ŠæŠ¥ï¼šç¡®ä¿æ•°æ®ä¸ä¸¢å¤±</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'beforeunload'</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendBatch</span>();
      <span class="hljs-built_in">clearInterval</span>(batchInterval);
    });
  }
  
  <span class="hljs-comment">// ===== äº‹ä»¶ä¸ŠæŠ¥æ–¹æ³• =====</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">sendBatch</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å¦‚æœæ²¡æœ‰äº‹ä»¶ï¼Œç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-comment">// å¤åˆ¶äº‹ä»¶æ•°ç»„å¹¶æ¸…ç©ºç¼“å­˜</span>
    <span class="hljs-keyword">const</span> eventsToSend = [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>];
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span> = [];
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// å‘é€æ‰¹é‡äº‹ä»¶åˆ°æœåŠ¡å™¨</span>
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/events'</span>, {
        <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
        <span class="hljs-attr">headers</span>: {
          <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>
        },
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
          <span class="hljs-attr">events</span>: eventsToSend,                 <span class="hljs-comment">// äº‹ä»¶æ•°ç»„</span>
          <span class="hljs-attr">batchId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateBatchId</span>(),      <span class="hljs-comment">// æ‰¹æ¬¡ID</span>
          <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()                 <span class="hljs-comment">// ä¸ŠæŠ¥æ—¶é—´</span>
        })
      });
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// ä¸ŠæŠ¥å¤±è´¥å¤„ç†ï¼šå°†äº‹ä»¶é‡æ–°æ·»åŠ åˆ°ç¼“å­˜å¤´éƒ¨</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Failed to send events:'</span>, error);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">unshift</span>(...eventsToSend);
    }
  }
  
  <span class="hljs-comment">// ===== å·¥å…·æ–¹æ³• =====</span>
  
  <span class="hljs-comment">// ç”Ÿæˆä¼šè¯ID</span>
  <span class="hljs-title function_">generateSessionId</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'session_'</span> + 
      <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>().<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>).<span class="hljs-title function_">substr</span>(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>) +  <span class="hljs-comment">// éšæœºå­—ç¬¦ä¸²</span>
      <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();                                 <span class="hljs-comment">// æ—¶é—´æˆ³</span>
  }
  
  <span class="hljs-comment">// ç”Ÿæˆæ‰¹æ¬¡ID</span>
  <span class="hljs-title function_">generateBatchId</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'batch_'</span> + <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() + <span class="hljs-string">'_'</span> + <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>().<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>).<span class="hljs-title function_">substr</span>(<span class="hljs-number">2</span>, <span class="hljs-number">5</span>);
  }
  
  <span class="hljs-comment">// è·å–ç”¨æˆ·ID</span>
  <span class="hljs-title function_">getUserId</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'userId'</span>) || <span class="hljs-string">'anonymous'</span>;
  }
  
  <span class="hljs-comment">// è·å–å…ƒç´ å±æ€§</span>
  <span class="hljs-title function_">getElementAttributes</span>(<span class="hljs-params">element</span>) {
    <span class="hljs-keyword">const</span> attributes = {};
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> attr <span class="hljs-keyword">of</span> element.<span class="hljs-property">attributes</span>) {
      <span class="hljs-keyword">if</span> ([<span class="hljs-string">'id'</span>, <span class="hljs-string">'class'</span>, <span class="hljs-string">'href'</span>, <span class="hljs-string">'src'</span>, <span class="hljs-string">'alt'</span>, <span class="hljs-string">'title'</span>].<span class="hljs-title function_">includes</span>(attr.<span class="hljs-property">name</span>)) {
        attributes[attr.<span class="hljs-property">name</span>] = attr.<span class="hljs-property">value</span>;
      }
    }
    <span class="hljs-keyword">return</span> attributes;
  }
  
  <span class="hljs-comment">// æ•°æ®è„±æ•å¤„ç†</span>
  <span class="hljs-title function_">sanitizeValue</span>(<span class="hljs-params">value</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value !== <span class="hljs-string">'string'</span>) <span class="hljs-keyword">return</span> value;
    
    <span class="hljs-comment">// å¯†ç å­—æ®µå®Œå…¨éšè—</span>
    <span class="hljs-keyword">if</span> (value.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; [<span class="hljs-string">'password'</span>, <span class="hljs-string">'pwd'</span>, <span class="hljs-string">'pass'</span>].<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">keyword</span> =&gt;</span> 
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentFieldName</span>?.<span class="hljs-title function_">toLowerCase</span>().<span class="hljs-title function_">includes</span>(keyword))) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">'******'</span>;
    }
    
    <span class="hljs-comment">// é‚®ç®±éƒ¨åˆ†è„±æ•</span>
    <span class="hljs-keyword">if</span> (value.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'@'</span>)) {
      <span class="hljs-keyword">const</span> [username, domain] = value.<span class="hljs-title function_">split</span>(<span class="hljs-string">'@'</span>);
      <span class="hljs-keyword">return</span> username.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>) + <span class="hljs-string">'***@'</span> + domain;
    }
    
    <span class="hljs-comment">// æ‰‹æœºå·è„±æ•</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^\d{11}$/</span>.<span class="hljs-title function_">test</span>(value)) {
      <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, <span class="hljs-number">3</span>) + <span class="hljs-string">'****'</span> + value.<span class="hljs-title function_">substring</span>(<span class="hljs-number">7</span>);
    }
    
    <span class="hljs-comment">// å…¶ä»–é•¿æ–‡æœ¬æˆªæ–­</span>
    <span class="hljs-keyword">return</span> value.<span class="hljs-property">length</span> &gt; <span class="hljs-number">50</span> ? value.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, <span class="hljs-number">50</span>) + <span class="hljs-string">'...'</span> : value;
  }
}

<span class="hljs-comment">// ===== åˆå§‹åŒ–ç”¨æˆ·è¡Œä¸ºè¿½è¸ª =====</span>
<span class="hljs-comment">// åœ¨åº”ç”¨å…¥å£å¤„åˆå§‹åŒ–è¡Œä¸ºè¿½è¸ªç³»ç»Ÿ</span>
<span class="hljs-keyword">const</span> behaviorTracker = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserBehaviorTracker</span>();

<span class="hljs-comment">// æš´éœ²å…¨å±€æ¥å£ï¼Œä¾›ä¸šåŠ¡ä»£ç è°ƒç”¨è‡ªå®šä¹‰äº‹ä»¶</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">trackEvent</span> = <span class="hljs-function">(<span class="hljs-params">eventName, data</span>) =&gt;</span> {
  behaviorTracker.<span class="hljs-title function_">track</span>(eventName, data);
};

<span class="hljs-variable language_">window</span>.<span class="hljs-property">trackCustomGoal</span> = <span class="hljs-function">(<span class="hljs-params">goalName, value</span>) =&gt;</span> {
  behaviorTracker.<span class="hljs-title function_">track</span>(<span class="hljs-string">'goal_conversion'</span>, {
    goalName,
    value,
    <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
  });
};
</code></pre>
<hr/>
<h2 data-id="heading-36">ğŸ¯ æ€»ç»“</h2>
<p>è¿™ä¸ªå‰ç«¯å·¥ç¨‹åŒ–ç»ˆææŒ‡å—æä¾›äº†ä»åŸºç¡€åˆ°é«˜çº§çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼š</p>
<h3 data-id="heading-37">ğŸ“‹ æ ¸å¿ƒè¦†ç›–å†…å®¹</h3>
<ol>
<li>
<p><strong>æ„å»ºå·¥å…·æ·±å…¥</strong>ï¼š</p>
<ul>
<li>Webpackï¼šæ ¸å¿ƒæ¦‚å¿µã€é«˜çº§é…ç½®ã€æ€§èƒ½ä¼˜åŒ–</li>
<li>Gulpï¼šä»»åŠ¡æµç®¡ç†ã€è‡ªåŠ¨åŒ–æ„å»º</li>
<li>Viteï¼šç°ä»£æ„å»ºã€å¼€å‘ä½“éªŒä¼˜åŒ–</li>
</ul>
</li>
<li>
<p><strong>å·¥ç¨‹åŒ–æœ€ä½³å®è·µ</strong>ï¼š</p>
<ul>
<li>ä»£ç è§„èŒƒï¼šESLintã€Prettierã€Git Hooks</li>
<li>å·¥ä½œæµè§„èŒƒï¼šåˆ†æ”¯ç®¡ç†ã€æäº¤è§„èŒƒ</li>
<li>Monorepoæ¶æ„ï¼šå¤šé¡¹ç›®ç®¡ç†</li>
</ul>
</li>
<li>
<p><strong>CI/CDä¸éƒ¨ç½²</strong>ï¼š</p>
<ul>
<li>Dockerå®¹å™¨åŒ–éƒ¨ç½²</li>
<li>Kubernetesé›†ç¾¤ç®¡ç†</li>
<li>è‡ªåŠ¨åŒ–æµæ°´çº¿</li>
</ul>
</li>
<li>
<p><strong>å®æˆ˜é¡¹ç›®è½åœ°</strong>ï¼š</p>
<ul>
<li>å¾®å‰ç«¯æ¶æ„å®ç°</li>
<li>ç»„ä»¶åº“å·¥ç¨‹åŒ–</li>
<li>ä½ä»£ç å¹³å°æ­å»º</li>
</ul>
</li>
<li>
<p><strong>ç›‘æ§ä¸ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li>é”™è¯¯ç›‘æ§ç³»ç»Ÿ</li>
<li>æ€§èƒ½ç›‘æ§ä½“ç³»</li>
<li>ç”¨æˆ·è¡Œä¸ºåˆ†æ</li>
</ul>
</li>
</ol>
<h3 data-id="heading-38">ğŸš€ æŠ€æœ¯äº®ç‚¹</h3>
<ul>
<li><strong>æ·±åº¦æŠ€æœ¯è§£æ</strong>ï¼šæ¯ä¸ªå·¥å…·éƒ½æœ‰åŸç†è§£é‡Šå’Œå®æˆ˜é…ç½®</li>
<li><strong>ä¼ä¸šçº§æ–¹æ¡ˆ</strong>ï¼šåŒ…å«Monorepoã€å¾®å‰ç«¯ç­‰ä¼ä¸šæ¶æ„</li>
<li><strong>å®Œæ•´ä»£ç ç¤ºä¾‹</strong>ï¼šæ‰€æœ‰é…ç½®å’Œå·¥å…·éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–ä¸“é¡¹</strong>ï¼šä»æ„å»ºåˆ°è¿è¡Œçš„å…¨é“¾è·¯ä¼˜åŒ–</li>
<li><strong>ç›‘æ§ä½“ç³»å»ºè®¾</strong>ï¼šé”™è¯¯ã€æ€§èƒ½ã€è¡Œä¸ºçš„å…¨æ–¹ä½ç›‘æ§</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¾®å‰ç«¯æ¶æ„ï¼ˆäºŒï¼‰ï¼šå°è£…ä¸å®ç°]]></title>    <link>https://juejin.cn/post/7584059298697216041</link>    <guid>https://juejin.cn/post/7584059298697216041</guid>    <pubDate>2025-12-16T09:53:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584059298697216041" data-draft-id="7584273076645658630" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¾®å‰ç«¯æ¶æ„ï¼ˆäºŒï¼‰ï¼šå°è£…ä¸å®ç°"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-16T09:53:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç å†œèƒ–å¤§æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/4195392102086967"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¾®å‰ç«¯æ¶æ„ï¼ˆäºŒï¼‰ï¼šå°è£…ä¸å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4195392102086967/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç å†œèƒ–å¤§æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T09:53:19.000Z" title="Tue Dec 16 2025 09:53:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>å¾ˆè£å¹¸ç”±æˆ‘è®¾è®¡å¹¶å®ç°äº†å…¬å¸è‡ªç ”çš„å¾®å‰ç«¯æ¡†æ¶ï¼Œç›®å‰è¯¥æ¡†æ¶å·²åœ¨å¤šä¸ªä¸šåŠ¡é¡¹ç›®ä¸­å¹¿æ³›åº”ç”¨ã€‚</p>
<p>æœ¬æ–‡æ˜¯æˆ‘ç»“åˆå†…éƒ¨åŸ¹è®­ã€äº§å“æ–‡æ¡£åŠç›¸å…³å®è·µæ¢³ç†è€Œæˆçš„æ€»ç»“ï¼Œæ—¨åœ¨å¯¹å¾®å‰ç«¯æŠ€æœ¯ä½“ç³»è¿›è¡Œç³»ç»Ÿæ€§çš„æ•´ç†ä¸æ²‰æ·€ã€‚</p>
<p>æœ¬ç¯‡æ˜¯ç³»åˆ—æ–‡ç« çš„ç¬¬äºŒç¯‡ï¼Œåˆ†äº«ä¸€äº›å…³äºå¾®å‰ç«¯çš„å°è£…å’Œå®è·µã€‚</p>
<h2 data-id="heading-1">äºŒã€äº§å“ç®€ä»‹</h2>
<p>XXå¾®å‰ç«¯æ˜¯åŸºäºqiankunå’Œå…¬å¸æƒé™ç®¡ç†ç³»ç»Ÿå®ç°çš„å¾®å‰ç«¯æ¶æ„è§£å†³æ–¹æ¡ˆï¼Œæ—¨åœ¨å¸®åŠ©å¤§å®¶èƒ½æ›´ç®€å•ã€æ— ç—›åœ°æ„å»ºä¸€ä¸ªç”Ÿäº§å¯ç”¨å¾®å‰ç«¯æ¶æ„ç³»ç»Ÿã€‚</p>
<p>å®ƒåœ¨XXåŸºç¡€æ¨¡æ¿çš„åŸºç¡€ä¸Šï¼Œå…¼å®¹é€‚é…äº†XXå·²æœ‰çš„ç”¨æˆ·è®¤è¯ã€æƒé™æ§åˆ¶ã€åŸ‹ç‚¹åŠŸèƒ½ï¼Œå¹¶é›†æˆäº†ä¸€ç³»åˆ—å¾®å‰ç«¯èƒ½åŠ›ï¼ŒåŒ…æ‹¬åº”ç”¨åŠ è½½ã€åº”ç”¨é€šä¿¡ã€åº”ç”¨éš”ç¦»ã€åº”ç”¨ç¼“å­˜ç­‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/19e50befbb384003b8bef3f838d65c8e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5Yac6IOW5aSn5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483598&amp;x-signature=8HU6uvvSZjKSWFtic1y4ktT865U%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸‰ã€æ ¸å¿ƒå°è£…ä¸å®ç°</h2>
<h3 data-id="heading-3">3.1 åº”ç”¨ç¼“å­˜</h3>
<p>åœ¨ä¸»åº”ç”¨ä¸­ä½¿ç”¨<code>Â v-showÂ </code>æŒ‡ä»¤æ§åˆ¶å­åº”ç”¨å®¹å™¨ï¼Œä»¥å®ç°å­åº”ç”¨çš„åˆ‡æ¢ä¸ç¼“å­˜ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å­åº”ç”¨å®¹å™¨ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in apps"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
    <span class="hljs-attr">class</span>=<span class="hljs-string">"app-container"</span>
    <span class="hljs-attr">v-show</span>=<span class="hljs-string">"currentAppName &amp;&amp; currentAppName === item.name"</span>
    <span class="hljs-attr">:id</span>=<span class="hljs-string">"`container-${item.name}`"</span>
    <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.name"</span>
  &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<h3 data-id="heading-4">3.2 åº”ç”¨åŠ è½½</h3>
<p>é‡‡ç”¨qiankunçš„loadMicroAppå®ç°å¤šæ ‡ç­¾é¡µåœºæ™¯ä¸‹çš„åº”ç”¨åŠ è½½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d26fe558168249ea826cb799b21543a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5Yac6IOW5aSn5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483598&amp;x-signature=kqJvHzuSWkteh5vz7Brv8kSX81Y%3D" alt="image.png" loading="lazy"/></p>
<p>æ ¸å¿ƒé€»è¾‘è¯´æ˜ï¼šç›‘å¬è·¯ç”±å˜åŒ–=ã€‹æ ¹æ®è·¯ç”±åŒ¹é…å­åº”ç”¨=ã€‹loadMicroAppæ‰‹åŠ¨åŠ è½½å­åº”ç”¨ï¼Œç»™æŒ‚è½½åˆ°æŒ‡å®šå®¹å™¨ã€‚</p>
<pre><code class="hljs language-vue" lang="vue">// 1. ç›‘å¬è·¯ç”±å˜åŒ–
watch: {
    $route: {
      immediate: false,
      handler(route) {
        this.openMicroApp(route);
      }
    }
  },
// 2. æ ¹æ®è·¯ç”±ä¿¡æ¯è·å–èœå•æ•°æ®åŠå­åº”ç”¨ä¿¡æ¯
const resource = getMenuByRoute(route);
subApp = resource &amp;&amp; this.getAppById(resource.rootResourceId);
// 2.1 èœå•èµ„æºæ•°æ®æ˜ å°„å…³ç³»
{
  id: item.resourceId, // webåº”ç”¨èµ„æºid
  name: item.resourceCode, // webåº”ç”¨èµ„æºç¼–ç 
  entry: item.resourceUrl // webåº”ç”¨åŸºç¡€è·¯å¾„
}
// 3. è°ƒç”¨loadMicroAppåŠ è½½å­åº”ç”¨
const { name, entry } = subApp;
const appInstances = loadMicroApp({
  name,
  entry,
  container: `#container-${name}`,
  props: {}
});
</code></pre>
<p>ä»¥ä¸Šä»£ç æ˜¯ç®€åŒ–åçš„ç¤ºæ„ä»£ç ï¼Œå®é™…å®ç°ä¸­è¿˜åŒ…å«æœ‰å¯¹å®¹å™¨èŠ‚ç‚¹ã€è·¯ç”±ã€loadingç­‰ç»†èŠ‚çš„å¤„ç†ã€‚</p>
<h3 data-id="heading-5">3.3 åº”ç”¨é€šä¿¡</h3>
<h4 data-id="heading-6">3.3.1 åŸºäºprops</h4>
<p>qiankunçš„<code>loadMicroApp</code>Â æ–¹æ³•æ”¯æŒé€šè¿‡propsé…ç½®é€‰é¡¹ï¼Œä¼ é€’æ•°æ®æˆ–è€…æ–¹æ³•ç»™å­åº”ç”¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. ä¸»åº”ç”¨å®šä¹‰å¹¶é€šè¿‡props.dataä¼ é€’</span>
<span class="hljs-keyword">const</span> mainAppName = <span class="hljs-string">'app-main'</span>
<span class="hljs-keyword">const</span> appInstances = <span class="hljs-title function_">loadMicroApp</span>({
  name,
  entry,
  <span class="hljs-attr">container</span>: <span class="hljs-string">`#container-<span class="hljs-subst">${name}</span>`</span>,
  <span class="hljs-attr">props</span>: {
    <span class="hljs-attr">data</span>: {
      mainAppName
    }
  }
});

<span class="hljs-comment">// 2. å­åº”ç”¨æ¥æ”¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">mount</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-title function_">render</span>(props);
}
<span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-keyword">const</span> { data = {}, container } = props || {};
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">mainAppName</span>)
}
</code></pre>
<h4 data-id="heading-7">3.3.2 åŸºäºwindow</h4>
<p>é€šè¿‡æŒ‚è½½å…¨å±€å±æ€§å’Œæ–¹æ³•ï¼Œä¾›å…¶ä»–åº”ç”¨ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// 1. ä¸»åº”ç”¨å®šä¹‰</span>
window.<span class="hljs-variable">$mainAxxxxxxx</span> = <span class="hljs-built_in">initAxxxxxxx</span>(router);

<span class="hljs-comment">// 2. å­åº”ç”¨é€šè¿‡windowè°ƒç”¨</span>
window.<span class="hljs-variable">$mainAxxxxxxx</span><span class="hljs-selector-class">.xxx</span>();
</code></pre>
<h4 data-id="heading-8">3.3.3 åŸºäºäº‹ä»¶</h4>
<p>æ¡†æ¶é€‰ç”¨Node.jsçš„EventEmitterï¼Œç”±ä¸»åº”ç”¨é›†æˆå¹¶å¯¹å¤–æä¾›event-busåŸºäºäº‹ä»¶æ€»çº¿çš„åº”ç”¨é—´é€šä¿¡èƒ½åŠ›ã€‚åŒ…å«äº‹ä»¶çš„æ³¨å†Œã€æ´¾å‘å’Œç§»é™¤åŠŸèƒ½ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. ä¸»åº”ç”¨å®ä¾‹åŒ–äº‹ä»¶å¯¹è±¡</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">EventEmitter</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'events'</span>;
<span class="hljs-keyword">const</span> eventBus = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventEmitter</span>();
<span class="hljs-comment">// 2. ç›‘å¬äº‹ä»¶</span>
eventBus.<span class="hljs-title function_">on</span>(<span class="hljs-string">'event1'</span>, <span class="hljs-function">(<span class="hljs-params">params1, params2</span>) =&gt;</span> {
  <span class="hljs-comment">// ...do some things</span>
});
<span class="hljs-comment">// 3. ä¼ é€’å®ä¾‹ç»™å­åº”ç”¨</span>
<span class="hljs-title function_">loadMicroApp</span>({
  <span class="hljs-attr">props</span>: {
    <span class="hljs-attr">data</span>: {
      eventBus
    }
  }
});

<span class="hljs-comment">// 4. å­åº”ç”¨æ¥æ”¶å¹¶æ´¾å‘äº‹ä»¶</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">render</span>(<span class="hljs-params">props</span>) {
  <span class="hljs-keyword">const</span> { data = {}, container } = props || {};
  <span class="hljs-keyword">if</span> (data.<span class="hljs-property">eventBus</span>) {
    data.<span class="hljs-property">eventBus</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'event1'</span>, params1, params2);
  }
}
<span class="hljs-comment">// 5. å­åº”ç”¨ä¹Ÿå¯ä»¥ ç›‘å¬å…¶ä»–åº”ç”¨æ´¾å‘çš„äº‹ä»¶</span>
data.<span class="hljs-property">eventBus</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'xxx'</span>,xxx)
</code></pre>
<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸é¼“åŠ±ä½¿ç”¨å…¨å±€çš„äº‹ä»¶æ€»çº¿åœ¨ç»„ä»¶ä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚è™½ç„¶åœ¨çŸ­æœŸå†…å¾€å¾€æ˜¯æœ€ç®€å•çš„è§£å†³æ–¹æ¡ˆï¼Œä½†ä»é•¿æœŸæ¥çœ‹ï¼Œå®ƒç»´æŠ¤èµ·æ¥æ€»æ˜¯ä»¤äººå¤´ç–¼ã€‚å¯ä»¥ç”¨ï¼Œä½†ä¸å»ºè®®å¤§é‡ä½¿ç”¨ã€‚</li>
<li>åˆ é™¤åœ¨å…¶ä»–åœ°æ–¹æ·»åŠ çš„ç›‘å¬å™¨æ˜¯ä¸å¥½çš„åšæ³•ï¼Œç‰¹åˆ«æ˜¯å½“Â <code>EventEmitter</code>Â å®ä¾‹æ˜¯ç”±å…¶ä»–ç»„ä»¶æˆ–æ¨¡å—ï¼ˆä¾‹å¦‚å¥—æ¥å­—æˆ–æ–‡ä»¶æµï¼‰åˆ›å»ºæ—¶ã€‚å­˜åœ¨è¾ƒå¤§é£é™©éšæ‚£ã€‚</li>
</ul>
<h4 data-id="heading-9">3.3.4 åŸºäºvuex</h4>
<p>é€šè¿‡å…±äº«ä¸»åº”ç”¨store, å¯ä»¥å¿«é€Ÿå°†åŸºåº§çš„vuexæ³¨å†Œåˆ°å¾®åº”ç”¨è‡ªå·±çš„vuexå®ä¾‹ä¸Šã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// 1. ä¸»åº”ç”¨å®šä¹‰å¹¶é€šè¿‡propsä¼ é€’store</span>
<span class="hljs-keyword">import</span> qiankunCommonStore from <span class="hljs-string">'@/store/modules/common'</span>;
loadMicroApp({
  name,
  entry,
  container: `#container-${name}`,
  props: {
    <span class="hljs-keyword">data</span>: {
      store: qiankunCommonStore,
    }
  }
});
<span class="hljs-comment">// 2. å­åº”ç”¨storeæ³¨å†Œåˆ°è‡ªå·±çš„vuexå®ä¾‹ä¸Š</span>
function render(props) {
  <span class="hljs-keyword">const</span> { <span class="hljs-keyword">data</span> = {}, container } = props || {};
  <span class="hljs-keyword">if</span> (store &amp;&amp; store.hasModule &amp;&amp; <span class="hljs-keyword">data</span>.store) {
    store.registerModule(<span class="hljs-string">'mainAppStore'</span>, <span class="hljs-keyword">data</span>.store);
  }
}
<span class="hljs-comment">// 3.1 ä½¿ç”¨ï¼šå–å€¼</span>
<span class="hljs-keyword">const</span> userInfo = <span class="hljs-keyword">this</span>.$store.state.mainAppStore.userInfo
<span class="hljs-comment">// 3.2 ä½¿ç”¨ï¼šèµ‹å€¼</span>
<span class="hljs-keyword">this</span>.$store.commit(<span class="hljs-string">'mainAppStore/setUserInfo'</span>, { ...<span class="hljs-keyword">this</span>.userInfo, newData: <span class="hljs-string">'home-new-data'</span> });
</code></pre>
<h4 data-id="heading-10">3.3.5 åŸºäºinitGlobalState</h4>
<p>qiankunæä¾›çš„åŸºäºå…¨å±€çŠ¶æ€çš„é€šä¿¡æ–¹å¼ã€‚æ¨¡æ¿ä¸­æœªé›†æˆï¼Œå¦‚éœ€ä½¿ç”¨ï¼Œå¯å‚çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fqiankun.umijs.org%2Fzh%2Fapi%23initglobalstatestate" target="_blank" title="https://qiankun.umijs.org/zh/api#initglobalstatestate" ref="nofollow noopener noreferrer">qiankunæ–‡æ¡£</a>è‡ªè¡Œæ‰©å±•ã€‚</p>
<p>æœªé›†æˆçš„åŸå› æ˜¯ï¼Œä½œè€…å¹¶<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fumijs%2Fqiankun%2Fdiscussions%2F1378%23discussioncomment-1475671" target="_blank" title="https://github.com/umijs/qiankun/discussions/1378#discussioncomment-1475671" ref="nofollow noopener noreferrer">ä¸æ¨èè¯¥API</a>å¹¶è®¡åˆ’åœ¨æœªæ¥ç‰ˆæœ¬ä¸­ç§»é™¤ã€‚</p>
<p>globalState ä¸æ˜¯åˆç†çš„å¾®å‰ç«¯é€šä¿¡æ–¹æ¡ˆï¼Œä¼šåŠ å‰§åº”ç”¨ä¹‹é—´çš„è€¦åˆ.ã€‚ -- qiankunå®˜æ–¹issues</p>
<h3 data-id="heading-11">3.4 åº”ç”¨è·³è½¬</h3>
<h4 data-id="heading-12">3.4.1 åº”ç”¨å†…è·³è½¬</h4>
<p>è°ƒç”¨è‡ªèº«è·¯ç”±routerçš„æ–¹æ³•</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">onJump</span>(<span class="hljs-params">path</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">$router</span>.<span class="hljs-title function_">push</span>({
    path,
    query
  });
},
</code></pre>
<h4 data-id="heading-13">3.4.2 åº”ç”¨é—´è·³è½¬</h4>
<p>ä½¿ç”¨ä¸»åº”ç”¨è·¯ç”±æ–¹æ³•</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-title function_">onJumpOther</span>(<span class="hljs-params">path</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">$root</span>.<span class="hljs-property">mainAppRouter</span>.<span class="hljs-title function_">push</span>({
    path,
    query
  });
},
</code></pre>
<h3 data-id="heading-14">3.5 åº”ç”¨éš”ç¦»</h3>
<h4 data-id="heading-15">3.5.1 jsæ²™ç®±</h4>
<p>ä¼—æ‰€å‘¨çŸ¥javaScriptçš„å…¨å±€ä½œç”¨åŸŸå­˜åœ¨å‘½åå†²çªã€å˜é‡æ±¡æŸ“ç­‰é£é™©ï¼Œä¸ºäº†è§£å†³è¯¥é—®é¢˜ï¼Œqiankunå€ŸåŠ© ES6 çš„ proxy ï¼Œåˆ›å»ºjsä»£ç†æ²™ç®±ï¼Œå®ç°äº†åº”ç”¨é—´ç¯å¢ƒçš„éš”ç¦»ã€‚</p>
<p>qiankunå·²æœ‰å®ç°ï¼Œé»˜è®¤ä¸ºå¼€å¯çŠ¶æ€ã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><a href="https://juejin.cn/post/6846687602439897101#heading-21" target="_blank" title="https://juejin.cn/post/6846687602439897101#heading-21">èš‚èšé‡‘æœä½“éªŒæŠ€æœ¯éƒ¨ qiankun çš„æ ¸å¿ƒè´¡çŒ®è€… - æ–¹æ¶£çš„åˆ†äº«</a></li>
</ul>
<h4 data-id="heading-16">3.5.2 æ ·å¼éš”ç¦»</h4>
<p>ä¸ºäº†ç¡®ä¿ä¸åŒç»„ä»¶æˆ–æ¨¡å—ä¹‹é—´çš„æ ·å¼ä¸ä¼šç›¸äº’å½±å“ï¼Œä»è€Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯å¤ç”¨æ€§ã€‚qiankunæä¾›æœ‰ä¸¤ç§æ ·å¼éš”ç¦»æ–¹æ¡ˆï¼ŒstrictStyleIsolationå’ŒexperimentalStyleIsolationã€‚</p>
<p>qiankuné»˜è®¤å¼€å¯strictStyleIsolationä¸¥æ ¼çš„æ ·å¼éš”ç¦»æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼ä¸‹ qiankun ä¼šä¸ºæ¯ä¸ªå¾®åº”ç”¨çš„å®¹å™¨åŒ…è£¹ä¸Šä¸€ä¸ªÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FWeb_Components%2FUsing_shadow_DOM" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/Web_Components/Using_shadow_DOM" ref="nofollow noopener noreferrer">shadow dom</a>Â èŠ‚ç‚¹ï¼Œä»è€Œç¡®ä¿å¾®åº”ç”¨çš„æ ·å¼ä¸ä¼šå¯¹å…¨å±€é€ æˆå½±å“ã€‚</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fqiankun.umijs.org%2Fzh%2Fapi%23loadmicroappapp-configuration" target="_blank" title="https://qiankun.umijs.org/zh/api#loadmicroappapp-configuration" ref="nofollow noopener noreferrer">loadMicroApp.sandboxé…ç½®è¯´æ˜</a></li>
</ul>
<h4 data-id="heading-17">3.5.3 æœ¬åœ°å­˜å‚¨éš”ç¦»</h4>
<p>ä¸ºäº†é˜²æ­¢å„å¾®åº”ç”¨é—´æ“ä½œæœ¬åœ°å­˜å‚¨æ—¶ï¼Œæ•°æ®è¦†ç›–ã€è¯¯åˆ é™¤ç­‰é—®é¢˜ï¼Œæ¡†æ¶å°è£…å¹¶é›†æˆäº†æœ¬åœ°å­˜å‚¨åŠŸèƒ½æ¨¡å—ã€‚åŸç†æ˜¯åœ¨åŸºåº§è¿è¡Œæ—¶ï¼Œè¦†å†™localStorageã€sessionStorageæ–¹æ³•ï¼Œç»™æœ¬åœ°å­˜å‚¨çš„<code>key</code>Â ç»Ÿä¸€åŠ ä¸Šå‰ç¼€ã€‚</p>
<p>æˆ‘ä»¬å¯¹æ­¤å°è£…äº†ä¸€ä¸ªç»„ä»¶ï¼Œä»£ç  å’ŒAPIå°±ä¸èµ˜è¿°äº†ï¼Œè¿™é‡Œä»…åˆ†äº«ï¼Œåœ¨å»è¦†å†™çš„æ—¶å€™é‡åˆ°çš„ä¸€ä¸ªå¡ç‚¹é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆã€‚</p>
<p>é—®é¢˜æè¿°ï¼šä¿®æ”¹Storageæ¥å£çš„åŸå‹æ–¹æ³•åï¼Œä¹¾å¤æ— æ³•éš”ç¦»ï¼Œ å¯¼è‡´æ‰€æœ‰åº”ç”¨ï¼ˆåŒ…æ‹¬ä¸»åº”ç”¨ï¼‰çš„ç›¸å…³æ–¹æ³•å‡è¢«ä¿®æ”¹ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼šåœ¨å¼•å…¥qiankunä¹‹å‰åˆ é™¤window.localStorageï¼Œéšåå†é‡æ–°å£°æ˜ï¼Œæ­¤æ—¶çš„window.localStorageæ˜¯éš”ç¦»çš„ï¼Œåœ¨ä¸»å­åº”ç”¨åˆ†åˆ«å®šä¹‰ï¼Œäº’ä¸å½±å“ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸»åº”ç”¨</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">originStorage</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span>;
<span class="hljs-keyword">delete</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span>;
<span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span> = {
Â <span class="hljs-title function_">getItem</span>(<span class="hljs-params">...ags</span>) {
Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"this"</span>, <span class="hljs-variable language_">this</span>);
Â  Â <span class="hljs-keyword">return</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">originStorage</span>.<span class="hljs-title function_">getItem</span>(...ags);
},
};

<span class="hljs-comment">// å­åº”ç”¨</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">localStorage</span> = {
Â <span class="hljs-title function_">getItem</span>(<span class="hljs-params">key, ...ags</span>) {
Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"insub"</span>);
Â  Â <span class="hljs-keyword">return</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">originStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">`app-vue<span class="hljs-subst">${key}</span>`</span>, ...ags);
},
};
</code></pre>
<p>åŸç†æ˜¯qiankunçš„æ²™ç®±ï¼ˆproxySandBoxï¼‰ï¼Œä¼šä»windowå¯¹è±¡æ‹·è´ä¸å¯é…ç½®çš„å±æ€§å¹¶filteræ‰ï¼Œä¸èµ°proxyä»£ç†ï¼Œæ¯”å¦‚locationã€localStorageç­‰ã€‚ç°åœ¨å’±ä»¬åœ¨qiankunæ²™ç®±é€»è¾‘æ‰§è¡Œå‰ï¼ŒæŠŠlocalStorageå±æ€§ç§»é™¤ï¼Œå®ƒæ‹·è´ä¸åˆ°ï¼Œåé¢å’±ä»¬å†åŠ ä¸Šçš„localStorageå°±ä¼šèµ°proxyç„¶åè¢«éš”ç¦»èµ·æ¥ã€‚</p>
<h3 data-id="heading-18">3.6 æƒé™æ§åˆ¶</h3>
<p>æ•´ä½“ç­–ç•¥æ˜¯ï¼Œå„å¾®åº”ç”¨åˆ†åˆ«è¿›è¡Œæƒé™æ§åˆ¶ï¼Œè°çš„é¡µé¢è°ç®¡æ§ã€‚</p>
<p>åœ¨å¾®å‰ç«¯åœºæ™¯ä¸‹ï¼Œç”±äºå„å¾®åº”ç”¨çš„è·¯ç”±ç›‘å¬çš„æ˜¯åŒä¸€urlï¼Œå½“urlåˆ‡æ¢æ—¶ï¼Œæ‰€æœ‰å¾®åº”ç”¨çš„è·¯ç”±å®ˆå«éƒ½ä¼šè§¦å‘ã€‚éœ€è¦å¯¹ä¸æ˜¯è‡ªå·±åº”ç”¨è·¯ç”±æ”¾è¡Œã€‚</p>
<pre><code class="hljs language-vbnet" lang="vbnet">// å¾®å‰ç«¯è¿è¡Œæ—¶çš„è·¯ç”±å®ˆå«
<span class="hljs-keyword">function</span> microAppHook(<span class="hljs-keyword">to</span>, <span class="hljs-keyword">from</span>, <span class="hljs-keyword">next</span>){
  <span class="hljs-keyword">const</span> isAppNameMatched = <span class="hljs-keyword">to</span>.meta.appName ? <span class="hljs-keyword">to</span>.meta.appName === appName : <span class="hljs-literal">true</span>,
    isNotMyRoute = !<span class="hljs-keyword">to</span>.path || !<span class="hljs-keyword">to</span>.name || !isAppNameMatched;
  <span class="hljs-keyword">if</span> (isNotMyRoute) {
    // éå½“å‰åº”ç”¨è·¯ç”±ï¼Œè·³è¿‡å¤„ç†
    <span class="hljs-keyword">next</span>();
    <span class="hljs-keyword">return</span>;
  }
  // æƒé™æ§åˆ¶ï¼šç™½åå•ã€è§’è‰²èœå•æƒé™åˆ¤æ–­
  <span class="hljs-keyword">if</span> (hasPermission(<span class="hljs-keyword">to</span>) || hasPermission(<span class="hljs-keyword">to</span>, <span class="hljs-literal">false</span>)) {
    <span class="hljs-keyword">next</span>();
  }<span class="hljs-keyword">else</span>{
    <span class="hljs-keyword">next</span>({path: <span class="hljs-comment">'/404', replace: true});</span>
  }
}
</code></pre>
<h2 data-id="heading-19">å››ã€åç»­æ”¹è¿›</h2>
<ol>
<li>
<p>æ€§èƒ½æå‡</p>
<ol>
<li>å†…å­˜å ç”¨é«˜ï¼šåœ¨ä½ç‰ˆæœ¬ç«ç‹æµè§ˆå™¨å†…å­˜å ç”¨ç»å¸¸æ€§è¶…è¿‡2Gï¼Œé¡µé¢å¡é¡¿æ˜æ˜¾</li>
<li>åŠ è½½é€Ÿåº¦æ…¢ï¼šè¶…è¿‡5Mçš„å­åº”ç”¨èµ„æºï¼Œè¯·æ±‚å’ŒåŠ è½½é•¿è¾¾3-5ç§’</li>
</ol>
</li>
<li>
<p>ç®€åŒ–è·¯ç”±ã€èœå•èµ„æºçš„å¤„ç†</p>
<ol>
<li>å½“å‰å…³äºèœå•èµ„æºçš„å¤„ç†è¾ƒå¤æ‚ä¸”ä¸çµæ´»ï¼Œæœ‰è¾ƒå¤§æå‡ç©ºé—´</li>
</ol>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æŠŠ H5 åº”ç”¨ä¸Šæ¶ App Storeï¼Œå¹¶ä¸æ˜¯å¥—ä¸ªå£³è¿™ä¹ˆç®€å•]]></title>    <link>https://juejin.cn/post/7584243498527997952</link>    <guid>https://juejin.cn/post/7584243498527997952</guid>    <pubDate>2025-12-16T09:48:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584243498527997952" data-draft-id="7584286241487749160" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æŠŠ H5 åº”ç”¨ä¸Šæ¶ App Storeï¼Œå¹¶ä¸æ˜¯å¥—ä¸ªå£³è¿™ä¹ˆç®€å•"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-16T09:48:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€å¿ƒå°±å¥½2025"/> <meta itemprop="url" content="https://juejin.cn/user/3850962908492660"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æŠŠ H5 åº”ç”¨ä¸Šæ¶ App Storeï¼Œå¹¶ä¸æ˜¯å¥—ä¸ªå£³è¿™ä¹ˆç®€å•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3850962908492660/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€å¿ƒå°±å¥½2025
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T09:48:40.000Z" title="Tue Dec 16 2025 09:48:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç¬¬ä¸€æ¬¡æŠŠä¸€ä¸ª H5 åº”ç”¨æäº¤åˆ° App Store æ—¶ï¼Œæˆ‘ä»¥ä¸ºè¿™ä¼šæ˜¯ä¸ªå¾ˆè½»é‡çš„å·¥ä½œã€‚é¡µé¢å·²ç»è·‘åœ¨æµè§ˆå™¨é‡Œï¼Œé€»è¾‘ä¹Ÿç»è¿‡çº¿ä¸ŠéªŒè¯ï¼Œåªéœ€è¦ä¸€ä¸ª WebView å¤–å£³ï¼Œå‰©ä¸‹çš„å°±æ˜¯â€œæŒ‰æµç¨‹ä¸Šæ¶â€ã€‚</p>
<p>çœŸæ­£å¼€å§‹æ“ä½œä¹‹åï¼Œæ‰å‘ç°é—®é¢˜å¹¶ä¸é›†ä¸­åœ¨ä»£ç å±‚é¢ï¼Œè€Œæ˜¯é›†ä¸­åœ¨ <strong>è‹¹æœå¦‚ä½•çœ‹å¾…è¿™ä¸ªåº”ç”¨</strong>ã€‚
H5 æœ¬èº«ä¸æ˜¯é—®é¢˜ï¼Œä½†å¦‚æœå¤„ç†æ–¹å¼ä¸å½“ï¼Œå®ƒä¼šåœ¨è¯ä¹¦ã€Bundle IDã€å®¡æ ¸æ¡æ¬¾å’Œæ„å»ºç»†èŠ‚ä¸Šä¸æ–­åˆ¶é€ éº»çƒ¦ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>H5 ä¸Šæ¶ iOSï¼Œé¦–å…ˆè¦é¢å¯¹çš„æ˜¯â€œåº”ç”¨èº«ä»½â€</strong></h2>
<p>åœ¨ H5 é¡¹ç›®ä¸­ï¼Œå¾ˆå®¹æ˜“å¿½ç•¥ Bundle ID çš„é‡è¦æ€§ã€‚
ä¸å°‘å›¢é˜Ÿä¼šåœ¨å°è£…é˜¶æ®µéšæ‰‹å†™ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œç­‰çœŸæ­£è¦ä¸Šæ¶æ—¶æ‰å‘ç°ï¼Œè¿™ä¸ª Bundle ID å·²ç»å’Œå†å²é¡¹ç›®å†²çªï¼Œæˆ–è€…æ›¾ç»è¢«ç”¨åœ¨åˆ«çš„åº”ç”¨ä¸Šã€‚</p>
<p>æˆ‘åæ¥å½¢æˆçš„ä¹ æƒ¯æ˜¯ï¼š
åœ¨ä»»ä½• H5 ä¸Šæ¶åŠ¨ä½œä¹‹å‰ï¼Œå…ˆç¡®è®¤ Apple å¼€å‘è€…è´¦å·é‡Œ <strong>å·²ç»å­˜åœ¨ä»€ä¹ˆ Bundle ID</strong>ã€‚</p>
<p>åœ¨ Windows ç¯å¢ƒä¸‹ï¼Œæˆ‘é€šå¸¸ä¼šç”¨ <strong>å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰æŸ¥çœ‹è´¦å·å†…çš„ Bundle ID åˆ—è¡¨</strong>ï¼Œä¸»è¦åšä¸‰ä»¶äº‹ï¼š</p>
<ul>
<li>åˆ¤æ–­æ˜¯å¦å¯ä»¥å¤ç”¨å·²æœ‰æ ‡è¯†</li>
<li>é¿å…å’Œæ—§é¡¹ç›®äº§ç”Ÿå†²çª</li>
<li>ç¡®ä¿è¿™ä¸ª Bundle ID åªå¯¹åº”å½“å‰ H5 åº”ç”¨</li>
</ul>
<p>è¿™ä¸ªæ­¥éª¤çœ‹ä¼¼å‰ç½®ï¼Œä½†å®ƒå†³å®šäº†åé¢è¯ä¹¦ã€æè¿°æ–‡ä»¶æ˜¯å¦éƒ½èƒ½é¡ºåˆ©å¯¹é½ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f5a986b9c1f1439cb15e41729692ed7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-D5bCx5aW9MjAyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483319&amp;x-signature=H4UTeVNvPllMdIN3b7Ik4QbtK9Q%3D" alt="bid" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1"><strong>H5 å¤–å£³å¹¶ä¸ä¼šé™ä½è¯ä¹¦ä½“ç³»çš„å¤æ‚åº¦</strong></h2>
<p>H5 åº”ç”¨åœ¨ iOS ä¸Šæ¶æ—¶ï¼Œä½¿ç”¨çš„ä»ç„¶æ˜¯æ ‡å‡† iOS ç­¾åæœºåˆ¶ã€‚
WebView å¹¶ä¸ä¼šè®©è¯ä¹¦é—®é¢˜å˜ç®€å•ï¼Œåè€Œå› ä¸ºâ€œä»£ç å¾ˆå°‘â€ï¼Œè¯ä¹¦é—®é¢˜å¾€å¾€æ›´å®¹æ˜“è¢«å¿½ç•¥ã€‚</p>
<p>æˆ‘é‡åˆ°è¿‡å‡ æ¬¡ç±»ä¼¼æƒ…å†µï¼š</p>
<ul>
<li>æ„å»ºå‡ºæ¥çš„å£³åº”ç”¨å¯ä»¥å®‰è£…ï¼Œä½†ä¸Šä¼ å¤±è´¥</li>
<li>TestFlight å¤„ç†é˜¶æ®µæŠ¥ç­¾åé”™è¯¯</li>
<li>å®¡æ ¸é˜¶æ®µæç¤ºæ„å»ºä¸å¯ç”¨</li>
</ul>
<p>æœ€åå®šä½ä¸‹æ¥ï¼Œé—®é¢˜éƒ½å‡ºåœ¨è¯ä¹¦æˆ–æè¿°æ–‡ä»¶ä¸Šã€‚</p>
<p>åœ¨ä¸€äº›é¡¹ç›®ä¸­ï¼Œæˆ‘å¼€å§‹ç›´æ¥ç”¨ <strong>å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰åˆ›å»º iOS è¯ä¹¦</strong>ï¼Œè€Œä¸æ˜¯ä¾èµ– Xcode è‡ªåŠ¨ç”Ÿæˆï¼ŒåŸå› å¾ˆç°å®ï¼š</p>
<ul>
<li>è¯ä¹¦æ–‡ä»¶å¯ä»¥æ˜ç¡®ä¿å­˜å’Œå¤ç”¨</li>
<li>ä¸ä¾èµ–æŸä¸€å° Mac çš„é’¥åŒ™ä¸²</li>
<li>æ„å»ºèŠ‚ç‚¹å’Œä¸Šä¼ èŠ‚ç‚¹å¯ä»¥è§£è€¦</li>
</ul>
<p>å¯¹äº H5 é¡¹ç›®æ¥è¯´ï¼Œè¯ä¹¦ä¸éœ€è¦é¢‘ç¹å˜åŠ¨ï¼Œæ›´é€‚åˆè¿™ç§æ–‡ä»¶åŒ–ç®¡ç†æ–¹å¼ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48180f349a6f467e939b7d53e4e22040~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-D5bCx5aW9MjAyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483319&amp;x-signature=GjrC0KsG9Tz5OY1fsPxWA1nez8A%3D" alt="è¯ä¹¦ç”Ÿæˆ" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-2"><strong>æè¿°æ–‡ä»¶æ˜¯ H5 åº”ç”¨æœ€å®¹æ˜“â€œç”¨é”™â€çš„åœ°æ–¹</strong></h2>
<p>H5 å£³åº”ç”¨é€šå¸¸åŠŸèƒ½ç®€å•ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€æè¿°æ–‡ä»¶å¯ä»¥éšæ„ä½¿ç”¨ã€‚
å¸¸è§è¯¯åŒºåŒ…æ‹¬ï¼š</p>
<ul>
<li>ä½¿ç”¨äº†å¼€å‘æè¿°æ–‡ä»¶è¿›è¡Œä¸Šæ¶</li>
<li>æè¿°æ–‡ä»¶ç»‘å®šäº†é”™è¯¯çš„ Bundle ID</li>
<li>æè¿°æ–‡ä»¶æƒé™å’Œå®é™…åŠŸèƒ½ä¸ä¸€è‡´</li>
</ul>
<p>è¿™äº›é—®é¢˜å¾€å¾€ä¸ä¼šåœ¨æ„å»ºé˜¶æ®µæš´éœ²ï¼Œè€Œæ˜¯åœ¨ä¸Šä¼ æˆ–å®¡æ ¸é˜¶æ®µæ‰å‡ºç°ã€‚</p>
<p>åœ¨ Windows ç¯å¢ƒä¸‹ï¼Œæˆ‘ä¼šç”¨ <strong>Appuploader æŸ¥çœ‹ mobileprovision æ–‡ä»¶å†…å®¹</strong>ï¼Œç¡®è®¤å‡ ä¸ªå…³é”®ä¿¡æ¯ï¼š</p>
<ul>
<li>æè¿°æ–‡ä»¶ç±»å‹æ˜¯å¦ä¸º App Store</li>
<li>æ˜¯å¦ç»‘å®šäº†å½“å‰ä½¿ç”¨çš„ Bundle ID</li>
<li>ä½¿ç”¨çš„æ˜¯å“ªä¸€ä¸ªè¯ä¹¦</li>
</ul>
<p>è¿™ä¸ªåŠ¨ä½œå¾ˆç®€å•ï¼Œä½†åœ¨ H5 é¡¹ç›®é‡Œï¼Œå®ƒèƒ½é¿å…å¾ˆå¤šâ€œçœ‹èµ·æ¥æ²¡é—®é¢˜ä½†ä¸Šä¸å»â€çš„æƒ…å†µã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f98606e22a147cdb5b53c740965f3e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-D5bCx5aW9MjAyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483319&amp;x-signature=F5%2BwCxSRXaN%2FwPMSCh%2BFXtjTEjQ%3D" alt="æŸ¥çœ‹æ–‡ä»¶" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-3"><strong>H5 åº”ç”¨çš„ IPAï¼Œæ›´å€¼å¾—è¢«æå‰æ£€æŸ¥</strong></h2>
<p>H5 åº”ç”¨ç”Ÿæˆçš„ IPA å¾€å¾€ä½“ç§¯ä¸å¤§ï¼Œä¹Ÿå¾ˆå®¹æ˜“è¢«å½“æˆâ€œé»‘ç›’æ–‡ä»¶â€ã€‚
ä½†å®é™…ä¸Šï¼Œå®ƒä»ç„¶åŒ…å«äº†æ‰€æœ‰ä¸Šæ¶æ‰€éœ€çš„å…³é”®ä¿¡æ¯ã€‚</p>
<p>æˆ‘æ›¾ç»åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œç›´åˆ°å®¡æ ¸è¢«æ‹’ï¼Œæ‰å‘ç° IPA é‡Œç¼ºå°‘å¿…è¦çš„å›¾æ ‡èµ„æºã€‚
æ„å»ºå·¥å…·å¹¶æ²¡æœ‰æŠ¥é”™ï¼Œä½†å®¡æ ¸ç³»ç»Ÿç›´æ¥æŒ‡å‡ºé—®é¢˜ã€‚</p>
<p>ä»é‚£ä¹‹åï¼Œæˆ‘åœ¨ H5 ä¸Šæ¶å‰éƒ½ä¼šåšä¸€ä»¶äº‹ï¼š
<strong>åœ¨ä¸Šä¼ ä¹‹å‰ï¼Œä¸»åŠ¨æ£€æŸ¥ IPA å†…å®¹ã€‚</strong></p>
<p>åœ¨ Windows ä¸Šï¼Œæˆ‘é€šå¸¸ä¼šç”¨ <strong>å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰æŸ¥çœ‹ IPA å†…éƒ¨ä¿¡æ¯</strong>ï¼Œä¸»è¦å…³æ³¨ï¼š</p>
<ul>
<li><code>CFBundleIdentifier</code> æ˜¯å¦æ­£ç¡®</li>
<li>æ˜¯å¦æºå¸¦äº†æ­£ç¡®çš„ mobileprovision</li>
<li>å›¾æ ‡èµ„æºå’Œ Assets æ˜¯å¦å­˜åœ¨</li>
</ul>
<p>è¿™ä¸€æ­¥å¹¶ä¸æ˜¯ä¸ºäº†â€œä¼˜åŒ–â€ï¼Œè€Œæ˜¯ä¸ºäº†å‡å°‘å®¡æ ¸é˜¶æ®µçš„ä¸å¯æ§åé¦ˆã€‚</p>
<hr/>
<h2 data-id="heading-4"><strong>H5 ä¸Šæ¶æ—¶ï¼Œä¸Šä¼ å·¥å…·çš„é€‰æ‹©ä¼šå½±å“åä½œæ–¹å¼</strong></h2>
<p>åœ¨å¾ˆå¤š H5 é¡¹ç›®ä¸­ï¼Œæ„å»ºå¾€å¾€å‘ç”Ÿåœ¨äº‘ç«¯æˆ– CIï¼Œè€Œä¸æ˜¯å¼€å‘è€…æœ¬æœºã€‚
å¦‚æœä¸Šä¼ æ­¥éª¤ä»ç„¶å¼ºä¾èµ– macOSï¼Œå°±ä¼šå‡ºç°ä¸€ç§æƒ…å†µï¼š</p>
<blockquote>
<p>æ„å»ºå®Œæˆäº†ï¼Œä½†å¿…é¡»ç­‰æŸä¸ªäººã€æŸå° Mac æ‰èƒ½ç»§ç»­ã€‚</p>
</blockquote>
<p>åœ¨è¿™äº›é¡¹ç›®é‡Œï¼Œæˆ‘æ›´å€¾å‘äºä½¿ç”¨ <strong>å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰æä¾›çš„ä¸Šä¼ æ–¹å¼</strong>ï¼ŒåŸå› å¾ˆç›´æ¥ï¼š</p>
<ul>
<li>å¯ä»¥åœ¨ Windows ä¸Šæ‰§è¡Œ</li>
<li>ä¸ä¾èµ– Xcode æˆ– Transporter</li>
<li>ä¸Šä¼ æ­¥éª¤å¯ä»¥è„šæœ¬åŒ–</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-css" lang="css">appuploader_cli -u appleid<span class="hljs-keyword">@example</span>.com -p xxxx-xxxx -c <span class="hljs-number">1</span> -f app.ipa
</code></pre>
<p>è¿™è®© H5 é¡¹ç›®çš„ä¸Šæ¶ä¸å†æˆä¸ºâ€œMac ä¸“å±æ“ä½œâ€ï¼Œè€Œæ˜¯å·¥ç¨‹æµç¨‹ä¸­çš„ä¸€ä¸ªæ™®é€šèŠ‚ç‚¹ã€‚
GUIç•Œé¢ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1b8b35b37cf54ad9915bba5b819bcaab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5b-D5bCx5aW9MjAyNQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483319&amp;x-signature=yctCjfPsdjo6%2BuUntDs5%2FiAjeG0%3D" alt="ipaä¸Šä¼ " loading="lazy"/></p>
<hr/>
<h2 data-id="heading-5"><strong>å®¡æ ¸é˜¶æ®µï¼ŒH5 åº”ç”¨æ›´éœ€è¦æ›´å®Œå–„</strong></h2>
<p>å’ŒåŸç”Ÿåº”ç”¨ç›¸æ¯”ï¼ŒH5 åº”ç”¨æ›´å®¹æ˜“è§¦å‘å®¡æ ¸å…³æ³¨ç‚¹ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>åŠŸèƒ½æ˜¯å¦è¿‡äºç®€å•</li>
<li>æ˜¯å¦åªæ˜¯ç½‘é¡µè·³è½¬</li>
<li>æ˜¯å¦ç¼ºä¹åŸç”Ÿä»·å€¼</li>
</ul>
<p>è¿™äº›é—®é¢˜æ›´å¤šæ˜¯äº§å“å±‚é¢çš„ï¼Œä½†å·¥ç¨‹ä¾§èƒ½åšçš„æ˜¯ï¼š</p>
<ul>
<li>ç¡®ä¿åº”ç”¨è¡Œä¸ºä¸æè¿°ä¸€è‡´</li>
<li>ä¸æ··ç”¨æµ‹è¯•é…ç½®</li>
<li>ä¿è¯æ„å»ºæœ¬èº«æ²¡æœ‰æŠ€æœ¯ç‘•ç–µ</li>
</ul>
<p>å¦‚æœæŠ€æœ¯å±‚é¢å·²ç»è¶³å¤Ÿå¹²å‡€ï¼Œå®¡æ ¸æ²Ÿé€šä¼šå®¹æ˜“å¾ˆå¤šã€‚</p>
<hr/>
<p>æŠŠ H5 åº”ç”¨ä¸Šæ¶åˆ° iOSï¼Œå¹¶ä¸æ˜¯ä¸€æ¡æ·å¾„ï¼Œè€Œæ˜¯å¦ä¸€ç§å½¢å¼çš„ iOS å·¥ç¨‹ã€‚
å½“æˆ‘å¼€å§‹ç”¨åŒæ ·ä¸¥è°¨çš„æ–¹å¼å¯¹å¾… Bundle IDã€è¯ä¹¦ã€æè¿°æ–‡ä»¶å’Œ IPA æ—¶ï¼ŒH5 ä¸Šæ¶çš„ç¨³å®šæ€§åè€Œæ¯”ä¸€äº›åŸç”Ÿé¡¹ç›®æ›´é«˜ã€‚</p>
<p>é—®é¢˜ä»æ¥ä¸åœ¨ H5 æœ¬èº«ï¼Œè€Œåœ¨äºæ˜¯å¦çœŸæ­£ç†è§£ iOS ä¸Šæ¶è¿™å¥—ä½“ç³»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android App å´©æºƒæ’æŸ¥æŒ‡å—ï¼šé˜¿é‡Œäº‘ RUM å¦‚ä½•è®©ä½ å¿«é€Ÿä»å‘Šè­¦åˆ°å®šä½æ ¹å› ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7584307642984415273</link>    <guid>https://juejin.cn/post/7584307642984415273</guid>    <pubDate>2025-12-16T09:49:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584307642984415273" data-draft-id="7584061465398935593" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android App å´©æºƒæ’æŸ¥æŒ‡å—ï¼šé˜¿é‡Œäº‘ RUM å¦‚ä½•è®©ä½ å¿«é€Ÿä»å‘Šè­¦åˆ°å®šä½æ ¹å› ï¼Ÿ"/> <meta itemprop="keywords" content="Android,Java"/> <meta itemprop="datePublished" content="2025-12-16T09:49:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android App å´©æºƒæ’æŸ¥æŒ‡å—ï¼šé˜¿é‡Œäº‘ RUM å¦‚ä½•è®©ä½ å¿«é€Ÿä»å‘Šè­¦åˆ°å®šä½æ ¹å› ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T09:49:57.000Z" title="Tue Dec 16 2025 09:49:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šè·¯é”¦ï¼ˆå°è˜­ï¼‰</p>
<h2 data-id="heading-0">èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆéœ€è¦å´©æºƒé‡‡é›†ï¼Ÿ</h2>
<p><strong>ç³»åˆ—å›é¡¾</strong>ï¼šåœ¨ä¸Šä¸€ç¯‡æ–‡ç« ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUzNzYxNjAzMg%3D%3D%26mid%3D2247579155%26idx%3D1%26sn%3D6cedef8bc39ce8a5082174bec3cc4c78%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUzNzYxNjAzMg==&amp;mid=2247579155&amp;idx=1&amp;sn=6cedef8bc39ce8a5082174bec3cc4c78&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æ·±åº¦è§£æ Android å´©æºƒæ•è·åŸç†åŠä»å´©æºƒåˆ°å½’å› çš„é—­ç¯å®è·µ</a>ã€‹ä¸­ï¼Œæˆ‘ä»¬æ·±å…¥å‰–æäº†å´©æºƒé‡‡é›†çš„æŠ€æœ¯å†…å¹•â€”â€”ä»Â JavaÂ å±‚çš„Â <code>UncaughtExceptionHandler</code>Â æœºåˆ¶ï¼Œåˆ°Â NativeÂ å±‚çš„ä¿¡å·å¤„ç†ä¸Â MinidumpÂ æŠ€æœ¯ï¼Œå†åˆ°æ··æ·†å †æ ˆçš„ç¬¦å·åŒ–åŸç†ã€‚ç›¸ä¿¡å¤§å®¶å¯¹â€œå´©æºƒæ˜¯å¦‚ä½•è¢«æ•è·çš„â€å·²ç»æœ‰äº†æ¸…æ™°çš„è®¤è¯†ã€‚</p>
<p>ç„¶è€Œï¼Œå…‰æœ‰ç†è®ºè¿˜ä¸å¤Ÿã€‚æœ¬æ–‡å°†é€šè¿‡å¤ç°ç”Ÿäº§ç¯å¢ƒæ¡ˆä¾‹ï¼Œå½“ä¸€åÂ AndroidÂ å¼€å‘åŒå­¦é‡åˆ°çš„çº¿ä¸Šå´©æºƒé—®é¢˜ï¼Œè¯¥å¦‚ä½•é€šè¿‡Â RUMÂ é‡‡é›†çš„å¼‚å¸¸æ•°æ®ä¸ä¸Šä¸‹æ–‡è¿›è¡Œå´©æºƒçš„åˆ†æä¸å®šä½ï¼Œå¸¦ä½ å®Œæ•´ä½“éªŒå´©æºƒæ’æŸ¥çš„å…¨æµç¨‹ï¼šä»æ”¶åˆ°å‘Šè­¦ã€æŸ¥çœ‹æ§åˆ¶å°ã€åˆ†æå †æ ˆã€è¿½è¸ªç”¨æˆ·è¡Œä¸ºï¼Œåˆ°å®šä½æ ¹å› ã€‚</p>
<h3 data-id="heading-1">1.1 æ¡ˆä¾‹èƒŒæ™¯</h3>
<p>æŸÂ AppÂ å‘å¸ƒäº†Â v3.5.0Â ç‰ˆæœ¬ï¼Œä¸»è¦ä¼˜åŒ–äº†å•†å“åˆ—è¡¨çš„åŠ è½½æ€§èƒ½ã€‚ç„¶è€Œï¼Œç‰ˆæœ¬ä¸Šçº¿åçš„ç¬¬Â 3Â å¤©ï¼Œå›¢é˜Ÿå¼€å§‹æ”¶åˆ°å¤§é‡ç”¨æˆ·æŠ•è¯‰Â AppÂ é—ªé€€å’Œå´©æºƒã€‚</p>
<p><strong>é—®é¢˜ä¸¥é‡æ€§</strong>ï¼š</p>
<ul>
<li>å´©æºƒç‡å¢é•¿Â 10+Â å€</li>
<li>åº”ç”¨å•†åº—è¯„åˆ†ä¸‹é™</li>
<li>ç”¨æˆ·å¸è½½ç‡ä¸Šå‡</li>
</ul>
<p><strong>æœ€ç»ˆè§£å†³æ–¹æ¡ˆ</strong>ï¼šé›†æˆäº†é˜¿é‡Œäº‘Â RUM SDKï¼Œé€šè¿‡å®Œæ•´çš„å´©æºƒæ•°æ®é‡‡é›†ï¼Œåœ¨Â 2Â å°æ—¶å†…å®Œæˆäº†é—®é¢˜å®šä½ã€‚</p>
<h2 data-id="heading-2">å®Œæ•´æ’æŸ¥æµç¨‹ï¼šä»å‘Šè­¦åˆ°æ ¹å› å®šä½</h2>
<h3 data-id="heading-3">2.1 ğŸ”” ç¬¬ä¸€æ­¥ï¼šæ”¶åˆ°å´©æºƒå‘Šè­¦</h3>
<p>æ•°æ®æ¥å…¥åï¼Œç”±äºé…ç½®äº†å‘Šè­¦ï¼Œåœ¨çº¿ä¸Šå´©æºƒç‡å¤§å¹…ä¸Šå‡æ—¶ï¼Œå›¢é˜Ÿç ”å‘åŒå­¦ä¼šæ”¶åˆ°å‘Šè­¦é€šçŸ¥ï¼Œç¬¬ä¸€æ—¶é—´å…³æ³¨çº¿ä¸Šé—®é¢˜ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/091cda5c1c7d4399a5032513287683e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483397&amp;x-signature=IXAHCkL1CuhRNBg8TuKzw8tkfpM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å‘Šè­¦è¯­å¥å‚è€ƒï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">app.name: xxxÂ <span class="hljs-built_in">and</span>Â crashÂ |Â <span class="hljs-keyword">SELECT</span>Â diff[<span class="hljs-number">1</span>]Â <span class="hljs-keyword">AS</span>Â <span class="hljs-string">"å½“å‰å€¼"</span>, diff[<span class="hljs-number">2</span>]Â <span class="hljs-keyword">AS</span>Â <span class="hljs-string">"æ˜¨æ—¥å€¼"</span>, round(diff[<span class="hljs-number">3</span>],Â <span class="hljs-number">4</span>)Â <span class="hljs-keyword">AS</span>Â <span class="hljs-string">"æ¯”å€¼"</span>Â <span class="hljs-keyword">FROM</span>Â (<span class="hljs-keyword">SELECT</span>Â <span class="hljs-keyword">compare</span>(cnt,Â <span class="hljs-number">86400</span>)Â <span class="hljs-keyword">AS</span>Â diffÂ <span class="hljs-keyword">FROM</span>Â (Â <span class="hljs-keyword">SELECT</span>Â COUNT(*)Â <span class="hljs-keyword">AS</span>Â cntÂ <span class="hljs-keyword">FROM</span>Â log))Â <span class="hljs-keyword">ORDER</span>Â <span class="hljs-keyword">BY</span>Â <span class="hljs-string">"å½“å‰å€¼"</span>Â DESC
</code></pre>
<h3 data-id="heading-4">2.2 ğŸ“Š ç¬¬äºŒæ­¥ï¼šæŸ¥çœ‹å´©æºƒæ¦‚è§ˆ - é”å®šå¼‚å¸¸ç±»å‹</h3>
<p><strong>æ“ä½œè·¯å¾„</strong>ï¼šæ§åˆ¶å°é¦–é¡µÂ â†’Â ç”¨æˆ·ä½“éªŒç›‘æ§Â â†’Â æ‰¾åˆ°å¯¹åº”çš„Â AppÂ åº”ç”¨Â â†’Â å¼‚å¸¸ç»Ÿè®¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a78c143ffaa64add9d59a2943284985f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483397&amp;x-signature=AdaIhKNLQE5vipsqT%2B9x3nSIAXo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><em>åŸå›¾é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fimg.alicdn.com%2Fimgextra%2Fi4%2FO1CN01sTmbeh1HuEhF4SKRy_!!6000000000817-2-tps-4684-1262.png" target="_blank" title="https://img.alicdn.com/imgextra/i4/O1CN01sTmbeh1HuEhF4SKRy_!!6000000000817-2-tps-4684-1262.png" ref="nofollow noopener noreferrer">img.alicdn.com/imgextra/i4â€¦</a></em></p>
<p>é€šè¿‡åˆ†ææ§åˆ¶å°å±•ç¤ºçš„å¼‚å¸¸ç»Ÿè®¡åˆ—è¡¨ï¼Œæˆ‘ä»¬å‘ç°Â <code>IndexOutOfBoundsException</code>Â å æ®äº†ç»å¤§å¤šæ•°çš„å´©æºƒï¼Œæ˜¯ç»å¯¹çš„ä¸»è¦é—®é¢˜ï¼Œå¹¶ä¸”å¼€å§‹å¤§é‡å‡ºç°åˆ™æ˜¯Â v3.5.0Â ç‰ˆæœ¬å‘å¸ƒä¹‹åã€‚</p>
<h3 data-id="heading-5">2.3 ğŸ” ç¬¬ä¸‰æ­¥ï¼šåˆ†æå´©æºƒå †æ ˆ - åˆæ­¥å®šä½</h3>
<p>ç‚¹å‡»è¿›å…¥Â <code>IndexOutOfBoundsException</code>Â è¯¦æƒ…é¡µï¼Œæ·±å…¥åˆ†æï¼ŒéªŒè¯äº†æˆ‘ä»¬çš„æƒ³æ³•ï¼Œè¿™é‡Œå¯ä»¥å®šä½åˆ°<strong>å´©æºƒç‰ˆæœ¬å°±æ˜¯æ–°å‘å¸ƒçš„Â v3.5.0ï¼Œå‘ç”Ÿçš„é¡µé¢ä¸ºï¼šProductListActivity</strong>ã€‚å¯¹åº”çš„ä¼šè¯Â IDÂ æ˜¯ï¼š98e9ce65-c51a-40c4-9232-4b69849e5985-01ï¼Œè¿™ä¸ªä¿¡æ¯ç”¨äºæˆ‘ä»¬åç»­åˆ†æç”¨æˆ·è¡Œä¸ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06630f22a9e445fa9e0c27936c8bf848~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483397&amp;x-signature=f9aIyeSg3MOCCfCysy%2BKKSQUZrA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>æŸ¥çœ‹å´©æºƒå †æ ˆï¼Œåˆ†æå…³é”®ä¿¡æ¯</strong>ï¼š</p>
<ul>
<li>å´©æºƒå‘ç”Ÿåœ¨Â <code>ProductListAdapter.onBindViewHolder()</code>Â æ–¹æ³•çš„ç¬¬Â 50Â è¡Œ</li>
<li>é”™è¯¯åŸå› ï¼šå°è¯•è®¿é—®åˆ—è¡¨çš„ç¬¬Â 6Â ä¸ªå…ƒç´ ï¼ˆindex 5ï¼‰ï¼Œä½†åˆ—è¡¨å®é™…åªæœ‰Â 5Â ä¸ªå…ƒç´ </li>
<li>è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„Â RecyclerViewÂ æ•°æ®ä¸ä¸€è‡´é—®é¢˜</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cf57aaab1fc24ff9ae9753ce9597d84e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483397&amp;x-signature=FFBUILqwRC4AqUZP3bklcFMmer4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>åˆæ­¥å‡è®¾</strong>ï¼š</p>
<ul>
<li>å¯èƒ½æ˜¯æ•°æ®æ›´æ–°æ—¶æœºä¸å¯¹</li>
<li>å¯èƒ½æ˜¯å¤šçº¿ç¨‹å¹¶å‘ä¿®æ”¹æ•°æ®</li>
<li>å¯èƒ½æ˜¯ç”¨æˆ·å¿«é€Ÿæ“ä½œå¯¼è‡´</li>
</ul>
<p>ä½†ä»…å‡­å †æ ˆè¿˜æ— æ³•ç¡®å®šæ ¹å› ï¼Œéœ€è¦æŸ¥çœ‹ç”¨æˆ·çš„å…·ä½“æ“ä½œè·¯å¾„ã€‚</p>
<h3 data-id="heading-6">2.4 ğŸ¯ ç¬¬å››æ­¥ï¼šè¿½è¸ªç”¨æˆ·è¡Œä¸º - æ‰¾åˆ°è§¦å‘è·¯å¾„</h3>
<p><strong>æ“ä½œè·¯å¾„</strong>ï¼šå´©æºƒè¯¦æƒ…é¡µÂ â†’Â é€‰æ‹©å´©æºƒå¯¹åº”çš„ä¼šè¯Â ID â†’Â æŸ¥çœ‹è¯¥ä¼šè¯Â IDÂ çš„ä¼šè¯è¿½è¸ªã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e71715c02d664f95bb48721e7e7d0428~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483397&amp;x-signature=X6ivONNRDg3Nm9O44jkA0IUOUPI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç‚¹å¼€ä¼šè¯è¯¦æƒ…ï¼Œæˆ‘ä»¬æŸ¥çœ‹ç”¨æˆ·çš„è¡Œä¸ºè·¯å¾„ï¼Œç»“åˆå´©æºƒå‘ç”Ÿçš„é¡µé¢ã€‚æˆ‘ä»¬æ•´ç†å‡ºè¿™æ ·çš„ä¸€ä¸ªæ“ä½œè·¯å¾„ã€‚</p>
<p><strong>æ“ä½œè·¯å¾„</strong>ï¼š</p>
<ul>
<li>ç”¨æˆ·è¿›å…¥Â ProductListActivityÂ é¡µé¢</li>
<li>å¿«é€Ÿè¿ç»­ç‚¹å‡»åˆ·æ–°æŒ‰é’®Â 3Â æ¬¡ï¼Œè§¦å‘åˆ—è¡¨å¼‚æ­¥æ›´æ–°ï¼ˆæ³¨ï¼šè¿™é‡Œå®é™…å‘ç”Ÿç½‘ç»œè¯·æ±‚ï¼Œç”±äºæˆ‘ä»¬æ˜¯æœ¬åœ°å¤ç°ï¼Œä½¿ç”¨å¼‚æ­¥æ›´æ–°ï¼‰</li>
<li><strong>çº¿ä¸Šè¯·æ±‚æ—¶åºé—®é¢˜</strong>ï¼š
<ul>
<li>ç¬¬ä¸€æ¬¡å¼‚æ­¥è¯·æ±‚è¿”å› n ä¸ªå•†å“ï¼Œç”¨æˆ·æ»šåŠ¨åˆ° 6 ä¸ª</li>
<li>åç»­è¯·æ±‚åªè¿”å› 5 ä¸ªå•†å“ï¼Œæ›´æ–°äº†åˆ—è¡¨æ•°æ®</li>
</ul>
</li>
<li>RecyclerView è¿˜åœ¨æ¸²æŸ“ç¬¬ 6 ä¸ªä½ç½®ï¼Œç„¶è€Œæ•°æ®å·²ç»ä¸å­˜åœ¨äº†</li>
<li><strong>æ ¹æœ¬åŸå› </strong>ï¼šå¤šæ¬¡å¼‚æ­¥è¯·æ±‚ï¼Œå¯¼è‡´æ•°æ®ç«æ€</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b2301a762bbc46a5b236102f6159af95~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483397&amp;x-signature=v96HcYzGsDzBQl5VKglA%2BY5CIgw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-7">2.5 ğŸŒ ç¬¬äº”æ­¥ï¼šå¤šç»´åº¦åˆ†æ - éªŒè¯å‡è®¾</h3>
<p>ä¸ºäº†è¿›ä¸€æ­¥ç¡®è®¤é—®é¢˜ï¼Œå¯ä»¥å¯¹å´©æºƒæ•°æ®è¿›è¡Œå¤šç»´åº¦ç­›é€‰åˆ†æï¼Œåˆ†ææ•…éšœç‰¹å¾ã€ç¡®è®¤å½±å“é¢ã€‚</p>
<h4 data-id="heading-8">2.5.1Â å´©æºƒæ•°æ®ç»“æ„</h4>
<p>SDKÂ é‡‡é›†çš„å´©æºƒæ•°æ®åŒ…å«ä»¥ä¸‹æ ¸å¿ƒå­—æ®µï¼š</p>
<pre><code class="hljs language-swift" lang="swift">{
Â Â <span class="hljs-string">"session.id"</span>:Â <span class="hljs-string">"session_abc123"</span>, Â  Â  Â  Â Â <span class="hljs-comment">// ä¼šè¯IDï¼Œç”¨äºå…³è”ç”¨æˆ·è¡Œä¸ºè·¯å¾„</span>
Â Â <span class="hljs-string">"timestamp"</span>:Â <span class="hljs-number">1699884000000</span>, Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// å´©æºƒå‘ç”Ÿæ—¶é—´ï¼ˆæ¯«ç§’æ—¶é—´æˆ³ï¼‰</span>
Â Â <span class="hljs-string">"exception.type"</span>:Â <span class="hljs-string">"crash"</span>, Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å¼‚å¸¸ç±»å‹</span>
Â Â <span class="hljs-string">"exception.subtype"</span>:Â <span class="hljs-string">"java"</span>, Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å¼‚å¸¸å­ç±»å‹</span>
Â Â <span class="hljs-string">"exception.name"</span>:Â <span class="hljs-string">"java.lang.NullPointerException"</span>, Â <span class="hljs-comment">// å¼‚å¸¸ç±»å‹</span>
Â Â <span class="hljs-string">"exception.message"</span>:Â <span class="hljs-string">"Attempt to invoke virtual method on a null object"</span>, Â <span class="hljs-comment">// å¼‚å¸¸ä¿¡æ¯</span>
Â Â <span class="hljs-string">"exception.stack"</span>:Â <span class="hljs-string">"[{...}]"</span>, Â  Â  Â  Â  Â <span class="hljs-comment">// å®Œæ•´å †æ ˆï¼ˆJSONæ•°ç»„ï¼‰</span>
Â Â <span class="hljs-string">"exception.thread_id"</span>:Â <span class="hljs-number">1</span>, Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å´©æºƒçº¿ç¨‹ID</span>
Â Â <span class="hljs-string">"view.id"</span>:Â <span class="hljs-string">"123-abc"</span>, Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å´©æºƒå‘ç”Ÿé¡µé¢ID</span>
Â Â <span class="hljs-string">"view.name"</span>:Â <span class="hljs-string">"NativeCrashActivity"</span>, Â  Â  Â <span class="hljs-comment">// å´©æºƒå‘ç”Ÿé¡µé¢åç§°</span>
Â Â <span class="hljs-string">"user.tags:"</span>:Â <span class="hljs-string">"{<span class="hljs-subst">\"</span>vip<span class="hljs-subst">\"</span>:<span class="hljs-subst">\"</span>true<span class="hljs-subst">\"</span>}"</span>, Â  Â  Â <span class="hljs-comment">// ç”¨æˆ·æ ‡ç­¾ï¼ˆè‡ªå®šä¹‰ï¼‰</span>
Â Â <span class="hljs-string">"properties"</span>:Â <span class="hljs-string">"{<span class="hljs-subst">\"</span>version<span class="hljs-subst">\"</span>:<span class="hljs-subst">\"</span>2.1.0<span class="hljs-subst">\"</span>}"</span>,Â <span class="hljs-comment">// è‡ªå®šä¹‰å±æ€§</span>
Â Â <span class="hljs-string">"net.type"</span>:Â <span class="hljs-string">"WIFI"</span>, Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// ç”¨æˆ·ç½‘ç»œç±»å‹</span>
Â Â <span class="hljs-string">"net.ip"</span>:Â <span class="hljs-string">"192.168.1.100"</span>, Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// ç”¨æˆ·å®¢æˆ·ç«¯IPåœ°å€</span>
Â Â <span class="hljs-string">"device.id"</span>:Â <span class="hljs-string">"123-1234"</span>, Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// ç”¨æˆ·è®¾å¤‡ID</span>
Â Â <span class="hljs-string">"os.version"</span>:Â <span class="hljs-number">14</span>, Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// ç”¨æˆ·ç³»ç»Ÿç‰ˆæœ¬å·</span>
Â Â <span class="hljs-string">"os.type"</span>:Â <span class="hljs-string">"Android"</span>Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// ç”¨æˆ·ç³»ç»Ÿç±»å‹</span>
}
</code></pre>
<h4 data-id="heading-9">2.5.2 å´©æºƒå¤§ç›˜æ€»è§ˆ</h4>
<p>ä½ç½®ï¼šç”¨æˆ·ä½“éªŒç›‘æ§-&gt;ä½“éªŒçœ‹æ¿-&gt;å¼‚å¸¸åˆ†æã€‚</p>
<p>å¼‚å¸¸åˆ†æå¤§ç›˜ä¸­å¯ä»¥æ•´ä½“çœ‹åº”ç”¨çš„å´©æºƒæ€»è§ˆï¼ŒåŒ…æ‹¬å¼‚å¸¸æ€»æ•°ã€å¼‚å¸¸è¶‹åŠ¿ã€è®¾å¤‡åˆ†å¸ƒã€å¼‚å¸¸ç±»å‹ã€è”ç½‘åˆ†å¸ƒç­‰å…¶ä»–èšåˆåˆ†æç»“æœã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3417fa05bba4a8b8ffc7a412790937d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483397&amp;x-signature=p%2Bm8EQHR%2BOXvPY%2B%2Fls%2B3BdeTkUY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-10">2.5.3Â ç½‘ç»œç±»å‹åˆ†å¸ƒ</h4>
<p>ç”±äºå®é™…åˆ—è¡¨æ›´æ–°æ“ä½œæ˜¯ç”±ç½‘ç»œè¯·æ±‚è¿”å›çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å…³æ³¨çº¿ä¸Šæ•°æ®å‘ç”Ÿå´©æºƒæ—¶ï¼Œç”¨æˆ·çš„è”ç½‘ç±»å‹ï¼Œåœ¨å´©æºƒå¤§ç›˜ä¸­æŸ¥çœ‹Â v3.5.0Â ç‰ˆæœ¬çš„å´©æºƒè”ç½‘åˆ†å¸ƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70ed816a45674372ab17bf2548d371f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483397&amp;x-signature=F0PuSXYRfOv0H%2FdIwRtB2d4QSzw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ğŸ’¡Â ç»“è®º</strong>ï¼š<strong>90%Â çš„å´©æºƒå‘ç”Ÿåœ¨Â 3G/4GÂ ç½‘ç»œä¸‹</strong>ï¼ŒWiFiÂ ç½‘ç»œä¸‹å´©æºƒç‡å¾ˆä½ã€‚è¿™å°è¯äº†ç½‘ç»œï¼ˆå¼‚æ­¥è¯·æ±‚ï¼‰æ˜¯å…³é”®å› ç´ ã€‚</p>
<h4 data-id="heading-11">2.5.4Â è®¾å¤‡å“ç‰Œåˆ†å¸ƒ</h4>
<p>åœ¨å´©æºƒå¤§ç›˜ä¸­æŸ¥çœ‹Â v3.5.0Â ç‰ˆæœ¬å´©æºƒçš„è®¾å¤‡å“ç‰Œåˆ†å¸ƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/303a9fdd157b424d886cc4349c29f95e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483397&amp;x-signature=IxPaNH77jQpJB1rKPBBaQFfKsyM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ğŸ’¡Â ç»“è®º</strong>ï¼šæ‰€æœ‰å“ç‰Œéƒ½å—å½±å“ï¼Œä¸æ˜¯ç‰¹å®šæœºå‹çš„é—®é¢˜ï¼Œè€Œæ˜¯<strong>ä»£ç é€»è¾‘é—®é¢˜</strong>ã€‚</p>
<h4 data-id="heading-12">2.5.5Â ç‰ˆæœ¬å¯¹æ¯”</h4>
<p>é™¤äº†å´©æºƒå¤§ç›˜ï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥åœ¨æ—¥å¿—æ¢ç´¢Â tabÂ é¡µä½¿ç”¨Â SQLÂ è‡ªå®šä¹‰åˆ†æã€‚</p>
<p>æŸ¥è¯¢è¯­å¥ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">app.name: xxxÂ <span class="hljs-keyword">and</span>Â crash |Â <span class="hljs-keyword">select</span>Â <span class="hljs-string">"app.version"</span>, count(*)Â <span class="hljs-keyword">from</span>Â logÂ <span class="hljs-keyword">group</span>Â <span class="hljs-keyword">by</span>Â <span class="hljs-string">"app.version"</span>
</code></pre>
<p>æ“ä½œï¼šå¯¹æ¯”Â v3.4.0Â å’ŒÂ v3.5.0Â çš„å´©æºƒç‡ã€‚</p>




















<table><thead><tr><th align="left">ç‰ˆæœ¬</th><th align="left">å´©æºƒç‡</th><th align="left">IndexOutOfBoundsExceptionÂ å æ¯”</th></tr></thead><tbody><tr><td align="left">v3.4.0</td><td align="left">0.08%</td><td align="left">5%</td></tr><tr><td align="left">v3.5.0</td><td align="left">1.25%</td><td align="left"><strong>82.5%</strong></td></tr></tbody></table>
<p><strong>ğŸ’¡ç»“è®º</strong>ï¼šé—®é¢˜æ˜¯Â <strong>v3.5.0Â ç‰ˆæœ¬å¼•å…¥çš„</strong>ï¼Œéœ€è¦æŸ¥çœ‹è¿™ä¸ªç‰ˆæœ¬çš„æ”¹åŠ¨ã€‚</p>
<h3 data-id="heading-13">2.6 ğŸ’» ç¬¬å…­æ­¥ï¼šå®šä½ä»£ç é—®é¢˜</h3>
<h4 data-id="heading-14">æŸ¥çœ‹é—®é¢˜ä»£ç </h4>
<p>æ‰“å¼€Â <code>ProductListActivity.java</code>ï¼Œæ‰¾åˆ°åˆ·æ–°é€»è¾‘ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">privateÂ voidÂ <span class="hljs-built_in">loadProducts</span>()Â {
Â  Â Â <span class="hljs-comment">// âŒ v3.5.0 çš„æ”¹åŠ¨ï¼šä½¿ç”¨å¼‚æ­¥åŠ è½½ä¼˜åŒ–æ€§èƒ½</span>
Â  Â Â newÂ <span class="hljs-built_in">Thread</span>(() -&gt; {
Â  Â  Â  Â Â tryÂ {
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚</span>
Â  Â  Â  Â  Â  Â  List&lt;Product&gt; newProducts = ApiClient<span class="hljs-selector-class">.getProducts</span>(currentCategory);
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// âŒ é—®é¢˜ 1ï¼šæ²¡æœ‰å–æ¶ˆå‰ä¸€ä¸ªè¯·æ±‚</span>
Â  Â  Â  Â  Â  Â Â <span class="hljs-comment">// âŒ é—®é¢˜ 2ï¼šç›´æ¥æ¸…ç©ºå¹¶æ›´æ–°æ•°æ®ï¼Œæ²¡æœ‰è€ƒè™‘ RecyclerView æ­£åœ¨æ¸²æŸ“</span>
Â  Â  Â  Â  Â  Â  <span class="hljs-built_in">runOnUiThread</span>(() -&gt; {
Â  Â  Â  Â  Â  Â  Â  Â  productList<span class="hljs-selector-class">.clear</span>(); Â  Â  Â  Â  Â  Â  Â <span class="hljs-comment">// ğŸ’¥ å±é™©æ“ä½œï¼</span>
Â  Â  Â  Â  Â  Â  Â  Â  productList<span class="hljs-selector-class">.addAll</span>(newProducts); Â <span class="hljs-comment">// ğŸ’¥ æ•°æ®æ›´æ–°</span>
Â  Â  Â  Â  Â  Â  Â  Â  adapter<span class="hljs-selector-class">.notifyDataSetChanged</span>(); Â Â <span class="hljs-comment">// ğŸ’¥ é€šçŸ¥åˆ·æ–°</span>
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }Â catchÂ (Exception e) {
Â  Â  Â  Â  Â  Â  e<span class="hljs-selector-class">.printStackTrace</span>();
Â  Â  Â  Â  }
Â  Â  })<span class="hljs-selector-class">.start</span>();
}
</code></pre>

<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Override</span>
publicÂ voidÂ <span class="hljs-built_in">onBindViewHolder</span>(<span class="hljs-variable">@NonNull</span>Â ProductViewHolder holder,Â intÂ position)Â {
Â  Â Â <span class="hljs-comment">// ğŸ’¥ å´©æºƒç‚¹ï¼šposition å¯èƒ½è¶…å‡º products çš„èŒƒå›´</span>
Â  Â Â <span class="hljs-selector-tag">Product</span>Â <span class="hljs-selector-tag">product</span>Â =Â <span class="hljs-selector-tag">products</span><span class="hljs-selector-class">.get</span>(position);Â <span class="hljs-comment">//IndexOutOfBoundsException!</span>
Â  Â  <span class="hljs-selector-tag">holder</span><span class="hljs-selector-class">.bind</span>(product);
}
</code></pre>
<h4 data-id="heading-15">æ‰¾åˆ°é—®é¢˜æ ¹å› ï¼</h4>
<p><strong>v3.5.0Â çš„æ”¹åŠ¨ç›®çš„</strong>ï¼šä¼˜åŒ–æ€§èƒ½ï¼Œå°†ç½‘ç»œè¯·æ±‚æ”¾åˆ°å­çº¿ç¨‹ã€‚</p>
<p><strong>å¼•å…¥çš„é—®é¢˜</strong>ï¼š</p>
<p>1.Â æ²¡æœ‰å–æ¶ˆå‰ä¸€ä¸ªè¯·æ±‚ï¼šç”¨æˆ·å¿«é€Ÿç‚¹å‡»åˆ·æ–°æ—¶ï¼Œå¤šä¸ªè¯·æ±‚åŒæ—¶è¿›è¡Œ</p>
<p>2.Â æ•°æ®ç«æ€ï¼šåä¸€ä¸ªè¯·æ±‚è¿”å›æ—¶ï¼Œç›´æ¥æ¸…ç©ºå¹¶æ›´æ–°æ•°æ®</p>
<p>3.Â UIÂ çŠ¶æ€ä¸ä¸€è‡´ï¼šRecyclerViewÂ æ­£åœ¨æ¸²æŸ“æŸä¸ªä½ç½®ï¼Œä½†æ•°æ®å·²ç»å˜å°‘äº†</p>
<h2 data-id="heading-16">ç¬¦å·åŒ–é…ç½®ï¼šè®©å †æ ˆâ€œè¯´äººè¯â€</h2>
<p>é€šè¿‡å‰é¢çš„æ’æŸ¥æµç¨‹ï¼Œæˆ‘ä»¬æˆåŠŸå®šä½åˆ°äº†å´©æºƒçš„æ ¹æœ¬åŸå› ï¼šProductListAdapter.onBindViewHolder()ã€‚</p>
<p>æ–¹æ³•åœ¨å¤„ç†æ•°æ®æ›´æ–°æ—¶ï¼Œå­˜åœ¨ç´¢å¼•è¶Šç•Œé—®é¢˜ã€‚ä½†ä½ å¯èƒ½ä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼š<strong>æˆ‘ä»¬æ˜¯å¦‚ä½•ä»æ··æ·†åçš„å †æ ˆä¸­ï¼Œç²¾ç¡®å®šä½åˆ°Â ProductListAdapter.java:50Â è¿™ä¸€è¡Œä»£ç çš„ï¼Ÿ</strong></p>
<p>åœ¨çœŸå®çš„ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œä¸ºäº†ä¿æŠ¤ä»£ç å’Œä¼˜åŒ–åŒ…ä½“ç§¯ï¼Œå‘å¸ƒåˆ°åº”ç”¨å•†åº—çš„Â ReleaseÂ ç‰ˆæœ¬éƒ½ä¼šç»è¿‡Â ProGuardÂ æˆ–Â R8Â æ··æ·†ã€‚è¿™æ„å‘³ç€æ§åˆ¶å°æœ€åˆçœ‹åˆ°çš„å´©æºƒå †æ ˆæ˜¯è¿™æ ·çš„ã€‚</p>
<pre><code class="hljs language-css" lang="css">java<span class="hljs-selector-class">.lang</span><span class="hljs-selector-class">.IndexOutOfBoundsException</span>: Index:Â <span class="hljs-number">5</span>, Size:Â <span class="hljs-number">5</span>
Â  Â Â atÂ java.util.ArrayList.<span class="hljs-built_in">get</span>(ArrayList.java:<span class="hljs-number">437</span>)
Â  Â Â atÂ com.shop.a.b.c.d.<span class="hljs-built_in">a</span>(Proguard:<span class="hljs-number">58</span>)
</code></pre>
<p>è¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦<strong>ç¬¦å·åŒ–</strong>çš„åŸå› ã€‚æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åœ¨Â RUMÂ æ§åˆ¶å°é…ç½®ç¬¦å·åŒ–ã€‚</p>
<h3 data-id="heading-17">3.1 Java/Kotlin æ··æ·†ç¬¦å·åŒ–</h3>
<h4 data-id="heading-18">Step 1ï¼šä¿ç•™Â mapping.txtÂ æ–‡ä»¶</h4>
<p>æ„å»ºÂ ReleaseÂ ç‰ˆæœ¬åï¼Œ<code>mapping.txt</code>Â æ–‡ä»¶ä½äºï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">app/build/outputs/mapping/release/mapping.txt
</code></pre>
<p>æ–‡ä»¶å†…å®¹ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-rust" lang="rust">com.example.ui.MainActivity <span class="hljs-punctuation">-&gt;</span> a.b.c.MainActivity:
Â  Â Â voidÂ <span class="hljs-title function_ invoke__">updateUserProfile</span>(com.example.model.User)Â <span class="hljs-punctuation">-&gt;</span> a
Â  Â Â voidÂ <span class="hljs-title function_ invoke__">onClick</span>(android.view.View)Â <span class="hljs-punctuation">-&gt;</span> b
com.example.model.User <span class="hljs-punctuation">-&gt;</span> a.b.d.User:
Â  Â  java.lang.<span class="hljs-type">String</span> userName <span class="hljs-punctuation">-&gt;</span> a
Â  Â Â voidÂ <span class="hljs-title function_ invoke__">setUserName</span>(java.lang.<span class="hljs-type">String</span>)Â <span class="hljs-punctuation">-&gt;</span> a
</code></pre>
<h4 data-id="heading-19">Step 2ï¼šä¸Šä¼ Â mappingÂ æ–‡ä»¶åˆ°æ§åˆ¶å°</h4>
<p>1.Â ç™»å½•äº‘ç›‘æ§Â 2.0Â æ§åˆ¶å°</p>
<p>2.Â è¿›å…¥ç”¨æˆ·ä½“éªŒç›‘æ§ï¼ˆRUMï¼‰-&gt;è¿›å…¥æ‚¨æ¥å…¥çš„åº”ç”¨-&gt;åº”ç”¨è®¾ç½®-&gt;æ–‡ä»¶ç®¡ç†</p>
<p>3.Â ç‚¹å‡»ç¬¦å·è¡¨æ–‡ä»¶-&gt;ä¸Šä¼ æ–‡ä»¶</p>
<p>4.Â ä¸Šä¼ Â <code>mapping.txt</code>Â æ–‡ä»¶</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9753f15d9ce54f04b25261d0972a7851~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483397&amp;x-signature=a55F6jhZaLPMsOVoAOQOvGf%2F%2BNM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-20">3.2 Native ç¬¦å·åŒ–</h3>
<p>æ„å»ºå®Œæˆåçš„ç›®å½•ä¸­Â .soÂ æ–‡ä»¶ä½äºï¼š</p>
<pre><code class="hljs language-java" lang="java">app/build/intermediates/cxx/release/xxx/obj/
Â  â”œâ”€â”€ arm64-v8a/
Â  â”‚ Â  â””â”€â”€ xxx-<span class="hljs-keyword">native</span>.so Â  Â  Â â† åŒ…å«è°ƒè¯•ç¬¦å·
Â  â”œâ”€â”€ armeabi-v7a/
Â  â”‚ Â  â””â”€â”€ xxx-<span class="hljs-keyword">native</span>.so
Â  â””â”€â”€ x86_64/
Â  Â  Â  â””â”€â”€ xxx-<span class="hljs-keyword">native</span>.so
</code></pre>
<h4 data-id="heading-21">Step 3ï¼šä¸Šä¼ åˆ°æ§åˆ¶å°</h4>
<p>ä¸Â Java mappingÂ æ–‡ä»¶ç±»ä¼¼ï¼Œåœ¨æ§åˆ¶å°ä¸Šä¼ å¯¹åº”æ¶æ„çš„Â .soÂ æ–‡ä»¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/302dcd3a7d7947488d4cdd35be985c05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483397&amp;x-signature=ZaeO8MCnwsn6npS%2Bqqnovke8C5A%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-22">3.3 éªŒè¯ç¬¦å·åŒ–</h3>
<p>ä½¿ç”¨ç¬¦å·è¡¨æ–‡ä»¶è§£æï¼šæ‰“å¼€å´©æºƒè¯¦æƒ…-&gt;å¼‚å¸¸æ˜ç»†-&gt;è§£æå †æ ˆ-&gt;é€‰æ‹©å¯¹åº”çš„ç¬¦å·è¡¨æ–‡ä»¶ï¼ˆnativeÂ å †æ ˆä½¿ç”¨Â .soÂ æ–‡ä»¶ï¼ŒjavaÂ å †æ ˆä½¿ç”¨Â .txtÂ æ–‡ä»¶ã€‚ï¼‰</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26f93e936aa145c3832a103f47d52bc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483397&amp;x-signature=YPvByViI5ICGcWbah%2FeIPj26JUk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç‚¹å‡»ç¡®å®šåå³å¯å±•ç¤ºè§£æåçš„å †æ ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1bcc980fe7e642e59fa9202f07d10d20~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766483397&amp;x-signature=agsDsNHDHt2hYYZ%2BjdEwXrv%2BHdI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ç¬¦å·åŒ–æˆåŠŸ</strong>ï¼š</p>
<ul>
<li>æ˜¾ç¤ºå®Œæ•´çš„ç±»åã€æ–¹æ³•å</li>
<li>æ˜¾ç¤ºæºæ–‡ä»¶è·¯å¾„å’Œè¡Œå·</li>
<li>C++Â å‡½æ•°åå·²è¿˜åŸï¼ˆéÂ mangledÂ çŠ¶æ€ï¼‰</li>
</ul>
<h2 data-id="heading-23">æ¡ˆä¾‹æ€»ç»“ï¼šRUM çš„å…³é”®ä»·å€¼</h2>
<p>åœ¨è¿™æ¬¡å´©æºƒæ’æŸ¥ä¸­ï¼ŒRUMÂ æä¾›äº†å“ªäº›å…³é”®å¸®åŠ©ï¼Ÿ</p>
<p><strong>1.Â å®Œæ•´çš„å †æ ˆä¿¡æ¯Â +Â ç¬¦å·åŒ–</strong></p>
<ul>
<li>æ²¡æœ‰Â RUMï¼šçº¿ä¸Šåº”ç”¨åªèƒ½çœ‹åˆ°æ··æ·†åçš„å †æ ˆï¼Œå®Œå…¨ä¸çŸ¥é“æ˜¯å“ªé‡Œå´©æºƒ</li>
<li><strong>æœ‰äº†Â RUM</strong>ï¼šä¸Šä¼ Â mappingÂ æ–‡ä»¶åï¼Œç²¾ç¡®å®šä½åˆ°Â <code>ProductListAdapter.java:50</code></li>
</ul>
<p><strong>2.Â ç”¨æˆ·è¡Œä¸ºè·¯å¾„è¿½è¸ª</strong></p>
<ul>
<li>æ²¡æœ‰Â RUMï¼šåªçŸ¥é“â€œç”¨æˆ·æ‰“å¼€åˆ—è¡¨å°±å´©æºƒâ€ï¼Œæ— æ³•å¤ç°</li>
<li><strong>æœ‰äº†Â RUM</strong>ï¼šçœ‹åˆ°å®Œæ•´çš„æ“ä½œæ—¶é—´çº¿ï¼Œå‘ç°æ˜¯â€œå¿«é€Ÿç‚¹å‡»åˆ·æ–°å¤šæ¬¡â€è§¦å‘</li>
</ul>
<p><strong>3.Â å¤šç»´åº¦æ•°æ®åˆ†æ</strong></p>
<ul>
<li>
<p>æ²¡æœ‰Â RUMï¼šä¸çŸ¥é“æ˜¯å“ªäº›ç”¨æˆ·ã€ä»€ä¹ˆç¯å¢ƒä¸‹å´©æºƒ</p>
</li>
<li>
<p><strong>æœ‰äº†Â RUMï¼š</strong></p>
<ul>
<li>å‘ç°Â 90%Â å´©æºƒåœ¨Â 3ã€4GÂ ç½‘ç»œä¸‹ï¼ˆç½‘ç»œå»¶è¿Ÿæ˜¯å…³é”®ï¼‰</li>
<li>æ‰€æœ‰æœºå‹éƒ½å—å½±å“ï¼ˆæ’é™¤ç¡¬ä»¶é—®é¢˜ï¼‰</li>
<li>v3.5.0Â æ‰å¼€å§‹å‡ºç°ï¼ˆé”å®šç‰ˆæœ¬æ”¹åŠ¨ï¼‰</li>
</ul>
</li>
</ul>
<p><strong>4.Â å®æ—¶å‘Šè­¦Â +Â é‡åŒ–å½±å“</strong></p>
<ul>
<li>æ²¡æœ‰Â RUMï¼šä¾èµ–ç”¨æˆ·æŠ•è¯‰ï¼Œå‘ç°æ»å</li>
<li><strong>æœ‰äº†Â RUM</strong>ï¼šç¬¬ä¸€æ—¶é—´æ”¶åˆ°å‘Šè­¦ï¼Œç«‹å³å¼€å§‹é—®é¢˜æ’æŸ¥</li>
</ul>
<p>åº”ç”¨çš„ç¨³å®šæ€§æ˜¯ç”¨æˆ·ä½“éªŒçš„åŸºçŸ³ã€‚é€šè¿‡ç³»ç»ŸåŒ–çš„å´©æºƒé‡‡é›†ä¸åˆ†æï¼Œå¼€å‘å›¢é˜Ÿèƒ½å¤Ÿä»â€œè¢«åŠ¨å“åº”â€è½¬å˜ä¸ºâ€œä¸»åŠ¨é¢„é˜²â€ï¼ŒæŒç»­æå‡åº”ç”¨è´¨é‡ï¼Œèµ¢å¾—ç”¨æˆ·ä¿¡ä»»ã€‚é˜¿é‡Œäº‘Â RUMÂ é’ˆå¯¹Â AndroidÂ ç«¯å®ç°äº†å¯¹åº”ç”¨æ€§èƒ½ã€ç¨³å®šæ€§ã€å’Œç”¨æˆ·è¡Œä¸ºçš„æ— ä¾µå…¥å¼é‡‡é›†Â SDKï¼Œå¯ä»¥å‚è€ƒæ¥å…¥æ–‡æ¡£ <strong>[</strong> <strong>1]</strong> ä½“éªŒä½¿ç”¨ã€‚é™¤äº†Â AndroidÂ å¤–ï¼ŒRUMÂ ä¹Ÿæ”¯æŒÂ Webã€å°ç¨‹åºã€iOSã€é¸¿è’™ç­‰å¤šç§å¹³å°ç›‘æ§åˆ†æï¼Œç›¸å…³é—®é¢˜å¯ä»¥åŠ å…¥â€œRUMÂ ç”¨æˆ·ä½“éªŒç›‘æ§æ”¯æŒç¾¤â€ï¼ˆé’‰é’‰ç¾¤å·ï¼š67370002064ï¼‰è¿›è¡Œå’¨è¯¢ã€‚</p>
<p><strong>ç›¸å…³é“¾æ¥ï¼š</strong></p>
<p>[1] æ¥å…¥æ–‡æ¡£</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Farms%2Fuser-experience-monitoring%2Faccess-to-android-applications" target="_blank" title="https://help.aliyun.com/zh/arms/user-experience-monitoring/access-to-android-applications" ref="nofollow noopener noreferrer">help.aliyun.com/zh/arms/useâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç§æœ‰çš„ GitHub Package æ€ä¹ˆæ‹‰å–ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7584071941025234959</link>    <guid>https://juejin.cn/post/7584071941025234959</guid>    <pubDate>2025-12-16T09:37:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584071941025234959" data-draft-id="7584110439933870126" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç§æœ‰çš„ GitHub Package æ€ä¹ˆæ‹‰å–ï¼Ÿ"/> <meta itemprop="keywords" content="GitHub,NPM"/> <meta itemprop="datePublished" content="2025-12-16T09:37:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å´æ•¬æ‚¦"/> <meta itemprop="url" content="https://juejin.cn/user/43636198216061"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç§æœ‰çš„ GitHub Package æ€ä¹ˆæ‹‰å–ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/43636198216061/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å´æ•¬æ‚¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T09:37:41.000Z" title="Tue Dec 16 2025 09:37:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸çŸ¥é“ä½ æ˜¯ä¸æ˜¯åœ¨ <code>yarn</code> æˆ– <code>npm install</code> çš„è¿‡ç¨‹ä¸­å‡ºç°ä¸‹é¢çš„é”™è¯¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">error Error: https://npm.pkg.github.com/download/**/3a1155bbb6e4eea34e2e813e456e3a165ec74641: Request failed <span class="hljs-string">"401 Unauthorized"</span>
    at ResponseError.ExtendableBuiltin (/Users/cyrus/.nvm/versions/node/v20.19.3/lib/node_modules/yarn/lib/cli.js:696:66)
    at new ResponseError (/Users/cyrus/.nvm/versions/node/v20.19.3/lib/node_modules/yarn/lib/cli.js:802:124)
    at Request.&lt;anonymous&gt; (/Users/cyrus/.nvm/versions/node/v20.19.3/lib/node_modules/yarn/lib/cli.js:66750:16)
    at Request.emit (node:events:524:28)
    at module.exports.Request.onRequestResponse (/Users/cyrus/.nvm/versions/node/v20.19.3/lib/node_modules/yarn/lib/cli.js:142287:10)
    at ClientRequest.emit (node:events:524:28)
    at HTTPParser.parserOnIncomingClient (node:_http_client:702:27)
    at HTTPParser.parserOnHeadersComplete (node:_http_common:118:17)
    at TLSSocket.socketOnData (node:_http_client:544:22)
    at TLSSocket.emit (node:events:524:28)
info Visit https://yarnpkg.com/en/docs/cli/install <span class="hljs-keyword">for</span> documentation about this <span class="hljs-built_in">command</span>.
</code></pre>
<p>ä»è¿™ä¸ªæˆ‘ä»¬å¯ä»¥å¾—åˆ°çš„ä¿¡æ¯å°±æ˜¯åœ¨ä¸‹è½½ <code>https://npm.pkg.github.com/download/**/3a1155bbb6e4eea34e2e813e456e3a165ec74641</code> çš„æ—¶å€™å‡ºç°äº† 401 çš„é”™è¯¯ã€‚</p>
<h2 data-id="heading-0">401 vs 403 ä»£è¡¨ä»€ä¹ˆ</h2>
<ul>
<li><strong>401 Unauthorized</strong>ï¼šåƒâ€œä½ æ²¡å¸¦é—¨ç¦å¡ / å¡å·ä¸å¯¹â€<br/>
å¸¸è§åŸå› ï¼šæ²¡é…ç½® tokenã€token æ²¡è¢« npm/yarn è¯»å–ã€token æ‹¼é”™/ä¸ºç©ºã€ç¯å¢ƒå˜é‡æ²¡ç”Ÿæ•ˆã€‚</li>
<li><strong>403 Forbidden</strong>ï¼šåƒâ€œä½ å¸¦äº†é—¨ç¦å¡ï¼Œä½†ä½ æ²¡æƒé™è¿›è¿™æ ‹æ¥¼â€<br/>
å¸¸è§åŸå› ï¼štoken æƒé™ scopes ä¸å¤Ÿã€token æ²¡æˆæƒ SSOã€token ç»‘å®šäº†é”™è¯¯çš„ç»„ç»‡/ä»“åº“èŒƒå›´ã€è´¦å·æœ¬èº«æ²¡æƒé™è¯»è¿™ä¸ªåŒ…ã€‚</li>
</ul>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆæ‹‰ç§æœ‰åŒ…éœ€è¦â€œå¦ä¸€æŠŠé’¥åŒ™â€</h2>
<p>å¾ˆå¤šåŒå­¦ä¼šé‡åˆ°è¿™ç§å›°æƒ‘ï¼šæˆ‘ <code>git clone</code> ç”¨ SSH key æ²¡é—®é¢˜ï¼ˆä»“åº“ä»£ç æ‹‰å¾—ä¸‹æ¥ï¼Œè¯´æ˜æˆ‘çš„èº«ä»½å·²ç»è®¤è¯æˆåŠŸäº†ï¼‰ï¼Œä½† <code>yarn</code> / <code>npm install</code> å´æŠ¥ <code>401/403</code>ï¼Œæ‹‰ä¸ä¸‹ <code>@your-scope/*</code> è¿™ç±»ç§æœ‰åŒ…</p>
<p>åŸå› æ˜¯ï¼š<strong>æ‹‰ä»£ç ï¼ˆGitï¼‰å’Œæ‹‰åŒ…ï¼ˆnpm registryï¼‰</strong> æ˜¯ä¸¤æ¡å®Œå…¨ä¸åŒçš„é€šé“ã€‚</p>
<ul>
<li><strong>Gitï¼ˆæ‹‰ä»“åº“ä»£ç ï¼‰</strong> ï¼šå¸¸ç”¨ SSH key æˆ– HTTPS tokenï¼Œèµ°çš„æ˜¯ <code>git@host:org/repo.git</code> è¿™ä¸€å¥—åè®®ã€‚</li>
<li><strong>npm registryï¼ˆæ‹‰ä¾èµ–åŒ…ï¼‰</strong> ï¼šèµ°çš„æ˜¯ HTTPS è¯·æ±‚ <code>https://npm.pkg.github.com/...</code>ï¼Œéœ€è¦ <strong>npm Tokenï¼ˆPATï¼‰</strong> è¿™æŠŠé’¥åŒ™ã€‚</li>
</ul>
<h2 data-id="heading-2">å¿…å¤‡çŸ¥è¯†ï¼š<code>.npmrc</code> æ˜¯ npm/yarn çš„â€œè¿æ¥é…ç½®æ–‡ä»¶â€</h2>
<p><code>npm</code> / <code>yarn</code> ä¼šè¯»å– <code>.npmrc</code>ï¼ˆå¯ä»¥æ˜¯å…¨å±€ <code>~/.npmrc</code>ï¼Œä¹Ÿå¯ä»¥æ˜¯é¡¹ç›®æ ¹ç›®å½• <code>.npmrc</code>ï¼‰ï¼Œé‡Œé¢é€šå¸¸åŒ…å«ä¸¤ç±»ä¸œè¥¿ï¼š</p>
<ol>
<li><strong>å‘Šè¯‰å®ƒï¼šæŸä¸ª scope çš„åŒ…å»å“ªä¸ª registry ä¸‹è½½</strong></li>
<li><strong>å‘Šè¯‰å®ƒï¼šè®¿é—®è¯¥ registry æ—¶ç”¨å“ªä¸ª token</strong></li>
</ol>
<p>ä¾‹å¦‚ç§æœ‰ scope åŒ… <code>@your-scope/*</code>ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">@your-scope:registry=https://npm.pkg.github.com
always-auth=true
//npm.pkg.github.com/:_authToken=${NPM_TOKEN}
</code></pre>
<p>æŠŠå®ƒç±»æ¯”æˆæ•°æ®åº“è¿æ¥ï¼š</p>
<ul>
<li><code>registry=...</code> ç±»ä¼¼ <code>DB_HOST</code></li>
<li><code>_authToken=...</code> ç±»ä¼¼ <code>DB_PASSWORD</code></li>
<li><code>scope</code> ç±»ä¼¼â€œä¸åŒä¸šåŠ¡åº“èµ°ä¸åŒè¿æ¥ä¸²â€</li>
</ul>
<p>å®‰å…¨å»ºè®®ï¼šä¸è¦æŠŠçœŸå® token å†™è¿› Git ä»“åº“ï¼›æ›´æ¨èç”¨ç¯å¢ƒå˜é‡ï¼ˆå¦‚ <code>${NPM_TOKEN}</code>ï¼‰æˆ–ç³»ç»Ÿé’¥åŒ™ä¸²ï¼ˆKeychainï¼‰ç®¡ç†ã€‚</p>
<h2 data-id="heading-3">åˆ°åº•æ€æ ·åšæ‰èƒ½æ‹‰å–å¾—åˆ°ï¼Ÿ</h2>
<p>ä¸‹é¢ä»¥ macOS + zsh +ï¼ˆå¯é€‰ï¼‰Keychain ä¸ºä¾‹ã€‚å…¶ä»–ç³»ç»Ÿä¹Ÿé€‚ç”¨ï¼šæŠŠâ€œKeychainâ€æ›¿æ¢æˆä½ ä»¬çš„å®‰å…¨å­˜å‚¨æ–¹å¼å³å¯ã€‚</p>
<p><strong>Token è¿‡æœŸæ€ä¹ˆåšï¼Ÿ</strong><br/>
ç›´æ¥é‡å¤ä¸‹é¢çš„ <strong>ç¬¬ 2 æ­¥ï¼ˆç”Ÿæˆæ–° Tokenï¼‰+ ç¬¬ 4.1 æ­¥ï¼ˆå†™å…¥/è¦†ç›– Keychainï¼‰+ ç¬¬ 4.2 æ­¥ï¼ˆé‡æ–°åŠ è½½ç»ˆç«¯ç¯å¢ƒå˜é‡ï¼‰+ ç¬¬ 5 æ­¥ï¼ˆéªŒè¯ï¼‰</strong> ã€‚<br/>
æœ¬è´¨å°±æ˜¯â€œæ¢é’¥åŒ™ â†’ æ”¾å›é’¥åŒ™ä¸² â†’ è®©å½“å‰è¿›ç¨‹é‡æ–°è¯»ä¸€éé…ç½® â†’ è‡ªæ£€â€ã€‚</p>
<h3 data-id="heading-4">ç¬¬ 1 æ­¥ï¼šç¡®è®¤ä½ è¦å®‰è£…çš„ç§æœ‰åŒ…æ¥è‡ªå“ªé‡Œ</h3>
<p>çœ‹ <code>package.json</code> é‡Œæ˜¯å¦æœ‰ç±»ä¼¼ä¾èµ–ï¼š</p>
<ul>
<li><code>@your-scope/some-private-package</code></li>
</ul>
<p>å¦‚æœæœ‰ï¼Œå°±æ„å‘³ç€å®‰è£…ä¾èµ–æ—¶ä¼šè®¿é—®å¯¹åº”çš„ç§æœ‰ registryï¼ˆä¾‹å¦‚ GitHub Packagesï¼š<code>https://npm.pkg.github.com</code>ï¼‰ã€‚</p>
<h3 data-id="heading-5">ç¬¬ 2 æ­¥ï¼šç”Ÿæˆå¯è¯»ç§æœ‰åŒ…çš„ GitHub Tokenï¼ˆPATï¼‰</h3>
<p>æ¨èä¼˜å…ˆä½¿ç”¨ <strong>Tokens (classic)</strong> ï¼ˆå…¼å®¹æ€§æœ€ç¨³ï¼Œæœ€å°‘å‘ï¼‰ï¼š</p>
<p>åœ¨ GitHub çš„ Token é¡µé¢ç”Ÿæˆ classic PATï¼Œè‡³å°‘å‹¾é€‰ï¼š</p>
<ul>
<li><code>read:packages</code>ï¼ˆå¿…é¡»ï¼šè¯»å–ç§æœ‰ packagesï¼‰</li>
<li>å¦‚æœ packages å¯¹åº”çš„ä»“åº“æ˜¯ç§æœ‰çš„ï¼Œé€šå¸¸è¿˜éœ€è¦ï¼š</li>
</ul>

<ul>
<li>
<ul>
<li><code>repo</code>ï¼ˆå¸¸è§å¿…é¡»ï¼‰</li>
</ul>
</li>
</ul>
<h4 data-id="heading-6">SSOï¼ˆç»„ç»‡å¸¸è§ï¼‰</h4>
<p>å¦‚æœä½ çš„ GitHub ç»„ç»‡å¼€å¯äº† SSOï¼Œä½ è¿˜éœ€è¦åœ¨ token åˆ—è¡¨é‡Œå¯¹ç»„ç»‡ç‚¹ï¼š</p>
<ul>
<li><strong>Authorize SSO</strong></li>
</ul>
<p>ç±»æ¯”ï¼štoken æ˜¯â€œé’¥åŒ™â€ï¼ŒSSO Authorize ç›¸å½“äºâ€œæŠŠé’¥åŒ™ç™»è®°åˆ°è¿™æ ‹æ¥¼çš„é—¨ç¦ç³»ç»Ÿé‡Œâ€ï¼Œä¸ç™»è®°å°±ä¼š 403ã€‚</p>
<h3 data-id="heading-7">ç¬¬ 3 æ­¥ï¼šé…ç½® <code>.npmrc</code>ï¼ˆæ¨èï¼šå…¨å±€ <code>~/.npmrc</code>ï¼‰</h3>
<p>åœ¨ä½ çš„ home ç›®å½•åˆ›å»º/æ›´æ–° <code>~/.npmrc</code>ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">@your-scope:registry=https://npm.pkg.github.com
always-auth=true
//npm.pkg.github.com/:_authToken=${NPM_TOKEN}
</code></pre>
<p>æ³¨æ„ï¼šè¿™é‡Œç”¨ <code>${NPM_TOKEN}</code> æ˜¯ä¸ºäº†ä¸æŠŠ token æ˜æ–‡è½ç›˜åˆ°ä»“åº“é‡Œã€‚</p>
<h4 data-id="heading-8">æˆ‘æ²¡æœ‰é…ç½®é¡¹ç›® <code>.npmrc</code>ï¼Œä¸ºä»€ä¹ˆä¹Ÿèƒ½æ‹‰å–ï¼Ÿ</h4>
<p>è¿™å¾ˆå¸¸è§ï¼ŒåŸå› æ˜¯ <strong>npm/yarn çš„é…ç½®æ¥æºä¸æ­¢é¡¹ç›®ç›®å½•</strong>ï¼š</p>
<ul>
<li>å¯èƒ½ä½ å·²ç»åœ¨ <strong>å…¨å±€</strong> <code>~/.npmrc</code> é‡Œé…è¿‡ï¼ˆæ‰€ä»¥é¡¹ç›®é‡Œçœ‹ä¸åˆ°ï¼‰</li>
<li>å¯èƒ½ä½ æ›¾ç»æ‰§è¡Œè¿‡ <code>npm config set @your-scope:registry ...</code>ï¼ˆå®ƒæœ€ç»ˆä¹Ÿä¼šå†™å…¥ç”¨æˆ·çº§é…ç½®ï¼‰</li>
<li>å¯èƒ½ä½ å›¢é˜Ÿç”¨çš„æ˜¯ <code>.yarnrc</code> æˆ–è€…æŸäº›å¼€å‘å·¥å…·å¸®ä½ å†™è¿‡é…ç½®</li>
</ul>
<p>ä½ å¯ä»¥ç”¨è¿™ä¸‰æ¡â€œæ¢é’ˆâ€ç¡®è®¤å½“å‰åˆ°åº•é ä»€ä¹ˆåœ¨å·¥ä½œï¼ˆä¸ä¼šæ³„éœ² tokenï¼‰ï¼š</p>
<pre><code class="hljs language-properties" lang="properties">npm config get @your-scope:registry
echo "${NPM_TOKEN:+set}"
npm whoami --registry=https://npm.pkg.github.com
</code></pre>
<h3 data-id="heading-9">ç¬¬ 4 æ­¥ï¼šæŠŠ Token æ”¾åˆ°ç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼šmacOS Keychain + <code>.zshrc</code> è‡ªåŠ¨åŠ è½½ï¼‰</h3>
<p>åœ¨ <code>~/.zshrc</code> é‡Œå†™ç±»ä¼¼è¿™ä¸€å¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Load GitHub Packages token from macOS Keychain</span>
<span class="hljs-built_in">export</span> NPM_TOKEN=<span class="hljs-string">"<span class="hljs-subst">$(security find-generic-password -a <span class="hljs-string">"<span class="hljs-variable">$USER</span>"</span> -s GITHUB_PACKAGES_NPM_TOKEN -w 2&gt;/dev/null)</span>"</span>
</code></pre>
<p>å®ƒçš„æ„æ€æ˜¯ï¼š</p>
<ul>
<li>ä» <strong>macOS é’¥åŒ™ä¸²ï¼ˆKeychainï¼‰</strong> é‡Œè¯»å–ä¸€æ¡â€œé€šç”¨å¯†ç â€</li>
<li>æ¡ä»¶æ˜¯ <code>Account=$USER</code> ä¸” <code>Service=GITHUB_PACKAGES_NPM_TOKEN</code></li>
<li>è¯»å–åˆ°çš„ password ä½œä¸º <code>NPM_TOKEN</code> å¯¼å‡ºç»™ npm/yarn ä½¿ç”¨</li>
</ul>
<p>ä¹Ÿå¯ä»¥ç›´æ¥æŠŠ token å†™å…¥åˆ° <code>~/.zshrc</code> ç±»ä¼¼çš„æ–‡ä»¶ä¸­ï¼Œå¯¹äº windows çš„ç”¨æˆ·å¯ä»¥é…ç½®ç¯å¢ƒå˜é‡æ¥å®Œæˆã€‚</p>
<h4 data-id="heading-10">4.1 å…ˆæŠŠ token å­˜è¿› Keychainï¼ˆæ¨èç”¨å‘½ä»¤ï¼Œæœ€å‡†ç¡®ï¼‰</h4>
<p>æŠŠ <code>NEW_TOKEN</code> æ¢æˆä½ åˆšç”Ÿæˆçš„ PATï¼ˆä¸è¦æäº¤/ä¸è¦åˆ†äº«ç»™ä»»ä½•äººï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">NEW_TOKEN=<span class="hljs-string">"ghp_xxx..."</span>  <span class="hljs-comment"># åªåœ¨æœ¬åœ°å¡«</span>
security add-generic-password \
  -a <span class="hljs-string">"<span class="hljs-variable">$USER</span>"</span> \
  -s <span class="hljs-string">"GITHUB_PACKAGES_NPM_TOKEN"</span> \
  -w <span class="hljs-string">"<span class="hljs-variable">$NEW_TOKEN</span>"</span> \
  -U \
  ~/Library/Keychains/login.keychain-db
<span class="hljs-built_in">unset</span> NEW_TOKEN
</code></pre>
<p>ç±»æ¯”ï¼šKeychain åƒâ€œæœ¬æœºå¯†ç ä¿é™©ç®±â€ï¼Œ<code>.zshrc</code> åƒâ€œå¯åŠ¨è„šæœ¬â€ï¼Œæ¯æ¬¡å¼€ç»ˆç«¯å°±è‡ªåŠ¨æŠŠä¿é™©ç®±é‡Œçš„ token æ‹¿å‡ºæ¥æ”¾åˆ°ç¯å¢ƒå˜é‡é‡Œã€‚</p>
<h4 data-id="heading-11">4.2 é‡æ–°æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œè®© <code>.zshrc</code> ç”Ÿæ•ˆï¼ˆæˆ–æ‰§è¡Œ <code>source ~/.zshrc</code> ç±»ä¼¼çš„å‘½ä»¤ä½¿å…¶ç”Ÿæ•ˆï¼‰</h4>
<p>ç„¶åç¡®è®¤ç¯å¢ƒå˜é‡å­˜åœ¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">${NPM_TOKEN:+set}</span>"</span>
</code></pre>
<p>è¾“å‡º <code>set</code> å°±å¯¹äº†ã€‚</p>
<p>ä½ å¯èƒ½ä¼šå‘ç°â€œåˆšå†™å…¥ Keychain ä½†ä¸ç«‹å³ç”Ÿæ•ˆâ€ï¼Œè€Œæ˜¯è¦<strong>æ–°å¼€ç»ˆç«¯</strong>ã€‚è¿™å¹¶ä¸ç¥ç§˜ï¼š<br/>
Keychain åƒæ•°æ®åº“ï¼Œ<code>.zshrc</code> åƒåº”ç”¨å¯åŠ¨æ—¶è¯»å–é…ç½®çš„ä»£ç ã€‚ä½ æ›´æ–°äº†â€œæ•°æ®åº“é‡Œçš„ tokenâ€ï¼Œä½†<strong>å½“å‰ç»ˆç«¯è¿›ç¨‹é‡Œçš„</strong> <code>NPM_TOKEN</code> <strong>å˜é‡è¿˜æ˜¯æ—§å€¼</strong>ï¼Œé™¤éé‡æ–°åŠ è½½é…ç½®ã€‚</p>
<p>æƒ³åœ¨å½“å‰ç»ˆç«¯ç«‹åˆ»ç”Ÿæ•ˆï¼Œå¯ä»¥æ‰§è¡Œå…¶ä¸€ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">source</span> ~/.zshrc
<span class="hljs-comment"># æˆ–è€…æ‰‹åŠ¨é‡æ–° export ä¸€æ¬¡</span>
<span class="hljs-built_in">export</span> NPM_TOKEN=<span class="hljs-string">"<span class="hljs-subst">$(security find-generic-password -a <span class="hljs-string">"<span class="hljs-variable">$USER</span>"</span> -s GITHUB_PACKAGES_NPM_TOKEN -w 2&gt;/dev/null)</span>"</span>
</code></pre>
<h3 data-id="heading-12">ç¬¬ 5 æ­¥ï¼šéªŒè¯é‰´æƒæ˜¯å¦é€š</h3>
<p>è¿™æ˜¯æœ€ç›´è§‚çš„éªŒè¯ï¼ˆä¸ä¼šè¾“å‡º tokenï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm <span class="hljs-built_in">whoami</span> --registry=https://npm.pkg.github.com
</code></pre>
<ul>
<li>èƒ½è¾“å‡ºç”¨æˆ·åï¼šè¯´æ˜ token ç”Ÿæ•ˆã€é‰´æƒ OK</li>
<li>æŠ¥ 401/403ï¼šå›åˆ°â€œ401 vs 403â€é‚£èŠ‚æ’æŸ¥</li>
</ul>
<h3 data-id="heading-13">ç¬¬ 6 æ­¥ï¼šå®‰è£…ä¾èµ–</h3>
<pre><code class="hljs language-bash" lang="bash">yarn
<span class="hljs-comment"># æˆ–</span>
npm i
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[App Storeä¸Šæ¶å®Œæ•´æµç¨‹ä¸æ³¨æ„äº‹é¡¹è¯¦è§£]]></title>    <link>https://juejin.cn/post/7584273076645691398</link>    <guid>https://juejin.cn/post/7584273076645691398</guid>    <pubDate>2025-12-16T10:02:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584273076645691398" data-draft-id="7584289165753466934" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="App Storeä¸Šæ¶å®Œæ•´æµç¨‹ä¸æ³¨æ„äº‹é¡¹è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-16T10:02:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç–¯ç‹‚çš„ç¨‹åºçŒ´"/> <meta itemprop="url" content="https://juejin.cn/user/2760245749234147"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            App Storeä¸Šæ¶å®Œæ•´æµç¨‹ä¸æ³¨æ„äº‹é¡¹è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2760245749234147/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç–¯ç‹‚çš„ç¨‹åºçŒ´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T10:02:46.000Z" title="Tue Dec 16 2025 10:02:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Appä¸Šæ¶App Storeçš„æµç¨‹</p>
<p>å°†AppæˆåŠŸä¸Šæ¶è‡³Apple App Storeï¼ˆiOSåº”ç”¨å•†åº—ï¼‰éœ€è¦ä¸¥æ ¼éµå¾ªè‹¹æœçš„å®¡æ ¸è§„èŒƒï¼ˆApp Review Guidelinesï¼‰å’Œæµç¨‹è¦æ±‚ï¼Œæ¶‰åŠ <strong>å¼€å‘å‡†å¤‡ã€èµ„æ–™æäº¤ã€å®¡æ ¸åº”å¯¹ã€å‘å¸ƒç®¡ç†</strong> ç­‰å¤šä¸ªç¯èŠ‚ã€‚ä»¥ä¸‹æ˜¯å…³é”®æ³¨æ„äº‹é¡¹çš„è¯¦ç»†æ€»ç»“ï¼Œå¸®åŠ©å¼€å‘è€…é«˜æ•ˆè¿‡å®¡å¹¶é¿å…å¸¸è§é©³å›é—®é¢˜ã€‚</p>
<p>ä¸€ã€å‰æœŸå‡†å¤‡é˜¶æ®µï¼ˆç¡®ä¿åŸºç¡€åˆè§„ï¼‰</p>
<p>1. å¼€å‘è€…è´¦å·ä¸è¯ä¹¦é…ç½®</p>
<p><strong>è´¦å·ç±»å‹</strong>ï¼š</p>
<p>ä¸ªäººè´¦å·ï¼ˆ$99/å¹´ï¼‰ï¼šé€‚åˆä¸ªäººå¼€å‘è€…ï¼Œä¸Šæ¶åæ˜¾ç¤ºä¸ªäººåç§°ï¼›</p>
<p>å…¬å¸è´¦å·ï¼ˆ$99/å¹´ï¼‰ï¼šé€‚åˆä¼ä¸šå›¢é˜Ÿï¼Œå¯ç»‘å®šå…¬å¸åç§°åŠå›¢é˜Ÿæˆå‘˜ï¼›</p>
<p>ä¼ä¸šè´¦å·ï¼ˆ$299/å¹´ï¼‰ï¼šä»…é™å†…éƒ¨ä½¿ç”¨ï¼ˆä¸å¯å…¬å¼€ä¸Šæ¶App Storeï¼Œè¿è§„ä¼šå¯¼è‡´å°å·ï¼‰ã€‚</p>
<p><strong>è¯ä¹¦ä¸æè¿°æ–‡ä»¶</strong>ï¼š</p>
<p>å¿…é¡»é…ç½®æœ‰æ•ˆçš„ <strong>å‘å¸ƒè¯ä¹¦ï¼ˆDistribution Certificateï¼‰</strong> å’Œ <strong>App Storeåˆ†å‘æè¿°æ–‡ä»¶ï¼ˆApp Store Distribution Provisioning Profileï¼‰</strong> ï¼Œç”¨äºç­¾åIPAåŒ…ï¼›</p>
<p>æµ‹è¯•é˜¶æ®µå¯ä½¿ç”¨ <strong>Ad Hocæˆ–Developmentè¯ä¹¦</strong> ï¼Œä½†ä¸Šæ¶å¿…é¡»ç”¨å‘å¸ƒè¯ä¹¦ã€‚</p>
<p>ä½¿ç”¨AppUploaderç­‰å·¥å…·å¯ä»¥ç®€åŒ–iOSè¯ä¹¦çš„ç”³è¯·å’Œç®¡ç†ï¼Œæ”¯æŒåœ¨Windowsã€Linuxæˆ–Macç³»ç»Ÿä¸­ç›´æ¥åˆ›å»ºè¯ä¹¦ï¼Œæ— éœ€é’¥åŒ™ä¸²åŠ©æ‰‹ï¼Œæ–¹ä¾¿å›¢é˜Ÿåä½œã€‚</p>
<p>2. AppåŸºç¡€ä¿¡æ¯åˆè§„</p>
<p><strong>å†…å®¹åˆæ³•æ€§</strong>ï¼š</p>
<p>ç¦æ­¢åŒ…å«è‰²æƒ…ã€æš´åŠ›ã€èµŒåšã€æ¯’å“ã€ç…½åŠ¨ä»‡æ¨ç­‰è¿æ³•è¿è§„å†…å®¹ï¼ˆå¦‚ç›´æ’­APPä¸­ç”¨æˆ·ä¸Šä¼ è¿è§„è§†é¢‘ï¼‰ï¼›</p>
<p>è‹¥æ¶‰åŠåŒ»ç–—ã€é‡‘èã€æ•™è‚²ç­‰æ•æ„Ÿé¢†åŸŸï¼Œéœ€æä¾›ç›¸å…³èµ„è´¨ï¼ˆå¦‚åŒ»ç–—å™¨æ¢°è®¸å¯è¯ã€é‡‘èç‰Œç…§ã€åŠå­¦è®¸å¯ï¼‰ã€‚</p>
<p><strong>ç”¨æˆ·éšç§ä¿æŠ¤</strong>ï¼š</p>
<p>å¿…é¡»é›†æˆ <strong>App Tracking Transparencyï¼ˆATTï¼‰æ¡†æ¶</strong> ï¼Œåœ¨è¿½è¸ªç”¨æˆ·è¡Œä¸ºï¼ˆå¦‚IDFAå¹¿å‘Šæ ‡è¯†ç¬¦ï¼‰å‰å¼¹çª—è¯¢é—®ç”¨æˆ·æˆæƒï¼ˆè‹¹æœå¼ºåˆ¶è¦æ±‚ï¼Œæœªé›†æˆç›´æ¥é©³å›ï¼‰ï¼›</p>
<p>éšç§æ”¿ç­–é“¾æ¥éœ€æœ‰æ•ˆä¸”å†…å®¹å®Œæ•´ï¼ˆéœ€è¯´æ˜æ”¶é›†çš„æ•°æ®ç±»å‹ã€ç”¨é€”ã€ç¬¬ä¸‰æ–¹å…±äº«æƒ…å†µï¼‰ï¼Œå¹¶åœ¨Appå†…æ˜¾è‘—ä½ç½®ï¼ˆå¦‚è®¾ç½®é¡µï¼‰æä¾›å…¥å£ã€‚</p>
<p>äºŒã€æäº¤èµ„æ–™å‡†å¤‡ï¼ˆé¿å…å› ä¿¡æ¯ä¸å…¨è¢«æ‹’ï¼‰</p>
<p>1. Appå…ƒæ•°æ®ï¼ˆApp Store Connectå¡«å†™ï¼‰</p>
<p><strong>åŸºæœ¬ä¿¡æ¯</strong>ï¼š</p>
<p><strong>åº”ç”¨åç§°</strong>ï¼šç®€æ´æ¸…æ™°ï¼ˆé¿å…å¤¸å¤§å®£ä¼ ï¼Œå¦‚â€œå…¨çƒç¬¬ä¸€â€å¯èƒ½è¢«åˆ¤å®šä¸ºè™šå‡ï¼‰ï¼›</p>
<p><strong>å‰¯æ ‡é¢˜</strong>ï¼ˆSubtitleï¼‰ï¼šè¡¥å……æ ¸å¿ƒåŠŸèƒ½ï¼ˆå¦‚â€œä½ çš„æ™ºèƒ½è®°è´¦åŠ©æ‰‹â€ï¼‰ï¼Œä¸è¶…è¿‡30å­—ç¬¦ï¼›</p>
<p><strong>å…³é”®è¯</strong>ï¼ˆKeywordsï¼‰ï¼šç”¨äºæœç´¢ä¼˜åŒ–ï¼ˆç”¨è‹±æ–‡é€—å·åˆ†éš”ï¼Œé¿å…å †ç Œæ— å…³è¯ï¼‰ï¼›</p>
<p><strong>æè¿°</strong>ï¼ˆDescriptionï¼‰ï¼šæ¸…æ™°è¯´æ˜åŠŸèƒ½ã€é€‚ç”¨åœºæ™¯åŠæ›´æ–°å†…å®¹ï¼ˆé¦–æ®µçªå‡ºæ ¸å¿ƒä»·å€¼ï¼‰ï¼›</p>
<p><strong>æˆªå›¾ä¸é¢„è§ˆè§†é¢‘</strong>ï¼š</p>
<p>æˆªå›¾éœ€é€‚é…ä¸åŒè®¾å¤‡å°ºå¯¸ï¼ˆiPhone 6.5è‹±å¯¸[1284Ã—2778]ã€6.7è‹±å¯¸[1290Ã—2796]ï¼ŒiPad[2048Ã—2732]ç­‰ï¼‰ï¼Œå†…å®¹ä¸ºçœŸå®Appç•Œé¢ï¼ˆç¦æ­¢ä½¿ç”¨æ¨¡æ‹Ÿå›¾æˆ–æœªä¸Šçº¿åŠŸèƒ½ï¼‰ï¼›</p>
<p>é¢„è§ˆè§†é¢‘ï¼ˆå¯é€‰ï¼‰ï¼šä¸è¶…è¿‡30ç§’ï¼Œå±•ç¤ºæ ¸å¿ƒåŠŸèƒ½ï¼ˆå¼€å¤´3ç§’éœ€å¸å¼•ç”¨æˆ·ï¼Œåˆ†è¾¨ç‡â‰¥720pï¼‰ã€‚</p>
<p>å¯¹äºæ‰¹é‡ä¸Šä¼ åº”ç”¨æˆªå›¾ï¼Œå·¥å…·å¦‚AppUploaderæ”¯æŒé€šè¿‡Excelé…ç½®æ–‡ä»¶å¿«é€Ÿä¸Šä¼ æˆªå›¾å’Œæœ¬åœ°åŒ–ä¿¡æ¯ï¼Œç®€åŒ–æ“ä½œæµç¨‹ã€‚</p>
<p><strong>è”ç³»ä¿¡æ¯</strong>ï¼š</p>
<p><strong>æ”¯æŒURL</strong>ï¼šæä¾›ç”¨æˆ·åé¦ˆå…¥å£ï¼ˆå¦‚å®˜ç½‘å®¢æœé¡µï¼‰ï¼Œéœ€çœŸå®å¯ç”¨ï¼›</p>
<p><strong>éšç§æ”¿ç­–URL</strong>ï¼šç‹¬ç«‹ç½‘é¡µï¼ˆä¸å¯ç›´æ¥é“¾æ¥åˆ°Appå†…çš„éšç§é¡µé¢ï¼‰ï¼Œå†…å®¹éœ€ä¸Appå®é™…æ”¶é›†çš„æ•°æ®ä¸€è‡´ã€‚</p>
<p>2. æŠ€æœ¯ä¿¡æ¯</p>
<p><strong>Bundle ID</strong>ï¼šä¸å¼€å‘é˜¶æ®µé…ç½®çš„è¯ä¹¦ä¸€è‡´ï¼ˆåœ¨Xcodeä¸­ç¡®è®¤ï¼‰ï¼›</p>
<p><strong>ç‰ˆæœ¬å·ï¼ˆVersionï¼‰</strong>ï¼šéµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆå¦‚1.0.0â†’1.0.1ä¸ºå°æ›´æ–°ï¼Œ1.0.0â†’2.0.0ä¸ºå¤§ç‰ˆæœ¬ï¼‰ï¼›</p>
<p><strong>æœ€ä½æ”¯æŒç³»ç»Ÿç‰ˆæœ¬</strong>ï¼šéœ€é€‚é…è‹¹æœå½“å‰ä¸»æµç³»ç»Ÿï¼ˆå¦‚iOS 13+ï¼Œé¿å…è¿‡ä½ç‰ˆæœ¬å¯¼è‡´å®¡æ ¸æ‹’ç»ï¼‰ï¼›</p>
<p><strong>IPAåŒ…ä¸Šä¼ </strong>ï¼šé€šè¿‡Xcodeæˆ–App Store Connectæä¾›çš„Transporterå·¥å…·ä¸Šä¼ ï¼Œç¡®ä¿åŒ…ä½“æœªåŠ å¯†ï¼ˆç¦ç”¨Bitcodeæ—¶éœ€æ£€æŸ¥ï¼‰ã€‚</p>
<p>æ­¤å¤–ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨AppUploaderåœ¨Windowsã€Macæˆ–Linuxç³»ç»Ÿä¸­ä¸Šä¼ IPAæ–‡ä»¶åˆ°App Storeï¼Œæ— éœ€Macç”µè„‘ï¼Œæ¯”Application Loaderæ›´é«˜æ•ˆã€‚</p>
<p>ä¸‰ã€å®¡æ ¸æ ¸å¿ƒæ³¨æ„äº‹é¡¹ï¼ˆè§„é¿é«˜é¢‘é©³å›ç‚¹ï¼‰</p>
<p>è‹¹æœå®¡æ ¸å›¢é˜Ÿä¼šé‡ç‚¹å…³æ³¨ <strong>åŠŸèƒ½å®Œæ•´æ€§ã€å†…å®¹åˆè§„æ€§ã€ç”¨æˆ·ä½“éªŒã€æ•°æ®å®‰å…¨</strong> å››å¤§ç±»ï¼Œä»¥ä¸‹æ˜¯å¸¸è§é©³å›åŸå› åŠåº”å¯¹ç­–ç•¥ï¼š</p>
<p>1. åŠŸèƒ½ä¸ä½“éªŒé—®é¢˜</p>
<p><strong>åŠŸèƒ½æœªå®Œæˆæˆ–ä¸å¯ç”¨</strong>ï¼š</p>
<p>æ‰€æœ‰ä¸Šæ¶ç‰ˆæœ¬çš„åŠŸèƒ½å¿…é¡»å¯æ­£å¸¸ä½¿ç”¨ï¼ˆå¦‚â€œå•†åŸAPPä¸­å•†å“æ— æ³•ä¸‹å•â€â€œç¤¾äº¤APPçš„èŠå¤©åŠŸèƒ½æŠ¥é”™â€ï¼‰ï¼›</p>
<p>æµ‹è¯•é˜¶æ®µéœ€è¦†ç›–æ‰€æœ‰æ ¸å¿ƒæµç¨‹ï¼ˆæ³¨å†Œâ†’ç™»å½•â†’æ ¸å¿ƒåŠŸèƒ½â†’æ”¯ä»˜â†’é€€å‡ºï¼‰ï¼Œé¿å…é—ç•™â€œå ä½æŒ‰é’®â€æˆ–â€œæ•¬è¯·æœŸå¾…â€æç¤ºã€‚</p>
<p><strong>å´©æºƒä¸æ€§èƒ½é—®é¢˜</strong>ï¼š</p>
<p>æäº¤å‰ä½¿ç”¨Xcodeçš„ <strong>Instrumentså·¥å…·</strong> æ£€æµ‹å†…å­˜æ³„æ¼ã€CPUå ç”¨è¿‡é«˜é—®é¢˜ï¼›</p>
<p>ç¡®ä¿ä¸»æµè®¾å¤‡ï¼ˆå¦‚iPhone 12/13/14ã€iPad Proï¼‰ä¸Šè¿è¡Œæµç•…ï¼ˆæ— å¡é¡¿ã€é—ªé€€ï¼‰ã€‚</p>
<p>2. å†…å®¹åˆè§„æ€§é—®é¢˜</p>
<p><strong>è¿è§„å†…å®¹</strong>ï¼š</p>
<p>ç•Œé¢è®¾è®¡é¿å…ä¾µæƒï¼ˆå¦‚ä½¿ç”¨æœªç»æˆæƒçš„æ˜æ˜Ÿè‚–åƒã€å“ç‰ŒLOGOï¼‰ï¼›</p>
<p>ç”¨æˆ·ç”Ÿæˆå†…å®¹ï¼ˆUGCï¼‰éœ€æä¾›ä¸¾æŠ¥æœºåˆ¶ï¼ˆå¦‚â€œä¸¾æŠ¥ä¸è‰¯è¯„è®ºâ€ï¼‰å¹¶æ‰¿è¯ºå®¡æ ¸ï¼ˆå¦‚ç¤¾åŒºç±»APPï¼‰ã€‚</p>
<p><strong>è™šå‡å®£ä¼ </strong>ï¼š</p>
<p>æè¿°ä¸­é¿å…å¤¸å¤§åŠŸèƒ½ï¼ˆå¦‚â€œ100%æ²»æ„ˆç–¾ç—…â€â€œæ— éœ€è”ç½‘å³å¯ä½¿ç”¨â€ä½†å®é™…ä¾èµ–ç½‘ç»œï¼‰ï¼›</p>
<p>æˆªå›¾ä¸­ä¸å¾—å‡ºç°æœªä¸Šçº¿çš„åŠŸèƒ½æˆ–è™šæ„æ•°æ®ï¼ˆå¦‚â€œå·²æœ‰100ä¸‡ç”¨æˆ·â€ä½†å®é™…ä¸º0ï¼‰ã€‚</p>
<p>3. ç”¨æˆ·éšç§ä¸æ•°æ®å®‰å…¨</p>
<p><strong>æœªé›†æˆATTæ¡†æ¶</strong>ï¼š</p>
<p>è‹¥Appè¿½è¸ªç”¨æˆ·è¡Œä¸ºï¼ˆå¦‚å¹¿å‘Šå½’å› ã€è·¨åº”ç”¨æ•°æ®å…±äº«ï¼‰ï¼Œå¿…é¡»è°ƒç”¨ requestTrackingAuthorizationå¼¹çª—è¯·æ±‚ç”¨æˆ·æˆæƒï¼ˆæœªé›†æˆç›´æ¥100%é©³å›ï¼‰ï¼›</p>
<p>è‹¥å®Œå…¨ä¸è¿½è¸ªï¼ˆå¦‚çº¯å·¥å…·ç±»APPï¼‰ï¼Œä¹Ÿéœ€åœ¨éšç§æ”¿ç­–ä¸­è¯´æ˜â€œä¸æ”¶é›†IDFAç­‰æ ‡è¯†ç¬¦â€ã€‚</p>
<p><strong>æ•°æ®æ”¶é›†æœªé€æ˜åŒ–</strong>ï¼š</p>
<p>è‹¥æ”¶é›†ç”¨æˆ·æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ä½ç½®ã€é€šè®¯å½•ã€ç›¸å†Œã€å¥åº·æ•°æ®ï¼‰ï¼Œéœ€åœ¨éšç§æ”¿ç­–ä¸­æ˜ç¡®è¯´æ˜ç”¨é€”ï¼ˆå¦‚â€œå®šä½ç”¨äºé™„è¿‘æœåŠ¡æ¨èâ€ï¼‰ï¼Œå¹¶åœ¨Appå†…å¼¹çª—è¯·æ±‚ç”¨æˆ·æˆæƒï¼ˆå¦‚iOSçš„â€œä½ç½®æƒé™â€æç¤ºï¼‰ï¼›</p>
<p>ç¦æ­¢æœªç»ç”¨æˆ·åŒæ„å°†æ•°æ®å…±äº«ç»™ç¬¬ä¸‰æ–¹ï¼ˆå¦‚å¹¿å‘Šå•†ï¼‰ï¼Œè‹¥å¿…é¡»å…±äº«éœ€åœ¨éšç§æ”¿ç­–ä¸­åˆ—å‡ºç¬¬ä¸‰æ–¹åç§°åŠç”¨é€”ã€‚</p>
<p>4. æ”¯ä»˜ä¸å•†ä¸šè¡Œä¸º</p>
<p><strong>è¿è§„å†…è´­ï¼ˆIAPï¼‰</strong>ï¼š</p>
<p>è‹¥Appå†…æä¾›è™šæ‹Ÿå•†å“ï¼ˆå¦‚æ¸¸æˆé“å…·ã€ä¼šå‘˜è®¢é˜…ï¼‰ï¼Œå¿…é¡»ä½¿ç”¨ <strong>è‹¹æœå†…è´­ï¼ˆIn-App Purchase, IAPï¼‰</strong> ï¼Œä¸”åˆ†æˆæ¯”ä¾‹ä¸º30%ï¼ˆå¹´è¥æ”¶è¶…100ä¸‡ç¾å…ƒå¯é™è‡³15%ï¼‰ï¼›</p>
<p>ç¦æ­¢å¼•å¯¼ç”¨æˆ·é€šè¿‡å¤–éƒ¨é“¾æ¥ï¼ˆå¦‚æ”¯ä»˜å®ã€å¾®ä¿¡æ”¯ä»˜ï¼‰è´­ä¹°è™šæ‹Ÿå•†å“ï¼ˆå¦‚â€œç‚¹å‡»å®˜ç½‘è´­ä¹°æ›´ä¼˜æƒ â€ï¼‰ï¼Œå¦åˆ™ä¼šè¢«åˆ¤å®šä¸ºâ€œç»•è¿‡IAPâ€ï¼Œå¯¼è‡´ä¸‹æ¶æˆ–ç½šæ¬¾ã€‚</p>
<p><strong>å®ç‰©é”€å”®ä¾‹å¤–</strong>ï¼š</p>
<p>è‹¥Appä»…æä¾›å®ç‰©å•†å“/æœåŠ¡çš„å±•ç¤ºä¸äº¤æ˜“ï¼ˆå¦‚ç”µå•†å–è¡£æœã€å¤–å–è®¢é¤ï¼‰ï¼Œå¯ä½¿ç”¨ç¬¬ä¸‰æ–¹æ”¯ä»˜ï¼ˆå¦‚æ”¯ä»˜å®ï¼‰ï¼Œä½†éœ€åœ¨æè¿°ä¸­æ˜ç¡®è¯´æ˜ã€‚</p>
<p>å››ã€å®¡æ ¸æµç¨‹ä¸åº”å¯¹ç­–ç•¥</p>
<p>1. æäº¤ä¸å®¡æ ¸å‘¨æœŸ</p>
<p>é€šè¿‡App Store Connectæäº¤åï¼Œè¿›å…¥ <strong>â€œç­‰å¾…å®¡æ ¸â€</strong> çŠ¶æ€ï¼ˆé€šå¸¸1-3å¤©ï¼Œé«˜å³°æœŸå¯èƒ½å»¶é•¿è‡³1å‘¨ï¼‰ï¼›</p>
<p>å®¡æ ¸é€šè¿‡åè¿›å…¥ <strong>â€œå¯ä¾›é”€å”®â€</strong> çŠ¶æ€ï¼Œç”¨æˆ·å¯ä¸‹è½½ï¼›è‹¥è¢«æ‹’ï¼Œä¼šæ”¶åˆ°é‚®ä»¶é€šçŸ¥ï¼ˆé™„å…·ä½“åŸå› åŠæ‹’ç»æ¡æ¬¾ç¼–å·ï¼‰ã€‚</p>
<p><strong>åº”å¯¹æŠ€å·§</strong>ï¼š</p>
<p>æ”¶åˆ°é©³å›é‚®ä»¶åï¼Œä¼˜å…ˆæ ¹æ® <strong>æ‹’ç»æ¡æ¬¾ç¼–å·</strong> æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ï¼ˆApp Review Guidelinesï¼‰ï¼›</p>
<p>å›å¤å®¡æ ¸å›¢é˜Ÿæ—¶éœ€ <strong>å…·ä½“è¯´æ˜ä¿®æ”¹å†…å®¹</strong> ï¼ˆå¦‚â€œå·²æ ¹æ®2.1æ¡æ¬¾ä¿®å¤æ”¯ä»˜é€»è¾‘ï¼Œç°åœ¨æ‰€æœ‰è™šæ‹Ÿå•†å“å‡é€šè¿‡IAPè´­ä¹°â€ï¼‰ï¼Œå¹¶é™„ä¸Šæµ‹è¯•æˆªå›¾æˆ–ä»£ç ç‰‡æ®µï¼›</p>
<p>è‹¥å¤šæ¬¡è¢«æ‹’ï¼Œå¯é¢„çº¦è‹¹æœå¼€å‘è€…æŠ€æœ¯æ”¯æŒï¼ˆé€šè¿‡Apple Developer Supportï¼‰ç”µè¯æ²Ÿé€šï¼Œæ•ˆç‡æ›´é«˜ã€‚</p>
<p>äº”ã€å‘å¸ƒä¸åç»­ç®¡ç†</p>
<p>1. æ­£å¼å‘å¸ƒ</p>
<p>å®¡æ ¸é€šè¿‡åï¼Œå¯é€‰æ‹© <strong>ç«‹å³å‘å¸ƒ</strong> æˆ– <strong>å®šæ—¶å‘å¸ƒ</strong> ï¼ˆè®¾ç½®æœªæ¥æŸä¸ªæ—¶é—´ç‚¹ä¸Šæ¶ï¼Œé€‚åˆé…åˆè¥é”€æ´»åŠ¨ï¼‰ï¼›</p>
<p>è‹¥ä¸ºé¦–æ¬¡ä¸Šæ¶ï¼Œå»ºè®®æå‰å‡†å¤‡ <strong>ASOä¼˜åŒ–</strong> ï¼ˆå¦‚ä¼˜åŒ–å…³é”®è¯ã€æˆªå›¾ï¼Œæå‡æœç´¢æ’åï¼‰ã€‚</p>
<p>2. ç‰ˆæœ¬æ›´æ–°</p>
<p>åç»­è¿­ä»£éœ€é‡æ–°æäº¤å®¡æ ¸ï¼ˆæµç¨‹ä¸é¦–æ¬¡ç›¸åŒï¼‰ï¼Œæ³¨æ„ï¼š</p>
<p>è‹¥æ›´æ–°æ¶‰åŠé‡å¤§åŠŸèƒ½å˜æ›´ï¼ˆå¦‚æ–°å¢æ”¯ä»˜æ¨¡å—ï¼‰ï¼Œéœ€å†æ¬¡ç¡®è®¤åˆè§„æ€§ï¼›</p>
<p>é¿å…é¢‘ç¹æäº¤å°ç‰ˆæœ¬ï¼ˆå¦‚æ¯å‘¨ä¸€æ¬¡ï¼‰ï¼Œå¯èƒ½è¢«å®¡æ ¸å›¢é˜Ÿæ ‡è®°ä¸ºâ€œä½è´¨é‡æ›´æ–°â€ã€‚</p>
<p>3. ä¸‹æ¶é£é™©è§„é¿</p>
<p>ç¦æ­¢ä¸Šæ¶åè¿è§„æ“ä½œï¼ˆå¦‚ç§è‡ªæ”¶é›†ç”¨æˆ·æ•°æ®ã€æ¨é€æœªå£°æ˜çš„å¹¿å‘Šï¼‰ï¼›</p>
<p>è‹¥æ”¶åˆ°è‹¹æœè­¦å‘Šé‚®ä»¶ï¼ˆå¦‚â€œæ£€æµ‹åˆ°è¿è§„è¡Œä¸ºâ€ï¼‰ï¼Œéœ€ç«‹å³æ•´æ”¹å¹¶å›å¤è¯´æ˜ï¼Œå¦åˆ™å¯èƒ½è¢«å¼ºåˆ¶ä¸‹æ¶ç”šè‡³å°ç¦è´¦å·ã€‚</p>
<p>æ€»ç»“</p>
<p>Appä¸Šæ¶App Storeçš„æ ¸å¿ƒæ˜¯ <strong>â€œä¸¥æ ¼åˆè§„+ç»†èŠ‚ä¸¥è°¨â€</strong> ï¼Œå¼€å‘è€…éœ€é‡ç‚¹å…³æ³¨ï¼š</p>
<p><strong>å‰æœŸå‡†å¤‡</strong>ï¼šè¯ä¹¦é…ç½®æ­£ç¡®ã€éšç§æ”¿ç­–ä¸ATTæ¡†æ¶é›†æˆï¼›</p>
<p><strong>èµ„æ–™æäº¤</strong>ï¼šå…ƒæ•°æ®çœŸå®å®Œæ•´ã€æˆªå›¾/è§†é¢‘ç¬¦åˆè§„èŒƒï¼›</p>
<p><strong>å®¡æ ¸åº”å¯¹</strong>ï¼šæå‰è§„é¿é«˜é¢‘é©³å›ç‚¹ï¼ˆå¦‚æ”¯ä»˜ã€éšç§ã€åŠŸèƒ½å®Œæ•´æ€§ï¼‰ï¼›</p>
<p><strong>é•¿æœŸç»´æŠ¤</strong>ï¼šéµå®ˆè‹¹æœè§„åˆ™ï¼Œé¿å…è¿è§„å¯¼è‡´ä¸‹æ¶ã€‚</p>
<p>é€šè¿‡ç³»ç»ŸåŒ–çš„å‡†å¤‡å’Œè§„èŒƒçš„å¼€å‘æµç¨‹ï¼Œå¯å¤§å¹…æå‡è¿‡å®¡æˆåŠŸç‡ï¼Œç¡®ä¿Appé¡ºåˆ©è§¦è¾¾å…¨çƒiOSç”¨æˆ·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[openFuyaoå¤šæ ·åŒ–ç®—åŠ›ä½¿èƒ½]]></title>    <link>https://juejin.cn/post/7584307642983677993</link>    <guid>https://juejin.cn/post/7584307642983677993</guid>    <pubDate>2025-12-16T07:45:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584307642983677993" data-draft-id="7584059298696413225" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="openFuyaoå¤šæ ·åŒ–ç®—åŠ›ä½¿èƒ½"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-16T07:45:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‡ ä½•å¿ƒå‡‰"/> <meta itemprop="url" content="https://juejin.cn/user/968044022608488"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            openFuyaoå¤šæ ·åŒ–ç®—åŠ›ä½¿èƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/968044022608488/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‡ ä½•å¿ƒå‡‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T07:45:04.000Z" title="Tue Dec 16 2025 07:45:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>ä¸€ã€å¼•è¨€ï¼šç®—åŠ›å¤šæ ·åŒ–æ—¶ä»£çš„æŒ‘æˆ˜ä¸æœºé‡</strong></p>
<p><strong><strong>1.1 å½“å‰ç®—åŠ›å‘å±•è¶‹åŠ¿</strong></strong></p>
<p>åœ¨æ•°å­—ç»æµå¿«é€Ÿå‘å±•çš„æ—¶ä»£ï¼Œç®—åŠ›å·²æˆä¸ºæ–°å‹ç”Ÿäº§åŠ›çš„æ ¸å¿ƒé©±åŠ¨åŠ›ã€‚å½“å‰ç®—åŠ›å‘å±•å‘ˆç°å‡ºæ˜¾è‘—çš„å¤šæ ·åŒ–ç‰¹å¾ï¼š</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>å¼‚æ„ç¡¬ä»¶æ™®éåŒ–</strong> *****ï¼šCPUã€GPUã€NPUã€FPGAç­‰å¤šç§å¤„ç†å™¨æ¶æ„å¹¶å­˜ï¼Œä¸åŒç¡¬ä»¶åœ¨è®¡ç®—èƒ½åŠ›ã€åŠŸè€—ç‰¹æ€§ã€åº”ç”¨åœºæ™¯ä¸Šå„å…·ä¼˜åŠ¿</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>åº”ç”¨éœ€æ±‚å¤šå…ƒåŒ–</strong> *****ï¼šä»ä¼ ç»Ÿé€šç”¨è®¡ç®—åˆ°AIæ¨ç†ï¼Œä»æ•°æ®å¤„ç†åˆ°å¯†ç å­¦åŠ é€Ÿï¼Œä¸åŒä¸šåŠ¡å¯¹ç®—åŠ›çš„éœ€æ±‚å·®å¼‚å·¨å¤§</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>èµ„æºåˆ©ç”¨ç‡æŒ‘æˆ˜</strong> *****ï¼šå•ä¸€ç¡¬ä»¶æ¶æ„éš¾ä»¥æ»¡è¶³å…¨éƒ¨éœ€æ±‚ï¼Œå¯¼è‡´èµ„æºåˆ©ç”¨ç‡ä½ä¸‹ã€æˆæœ¬æ•ˆç›Šä¸ç†æƒ³</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>è¿ç»´å¤æ‚åº¦ä¸Šå‡</strong> *****ï¼šå¤šç§ç¡¬ä»¶çš„ç®¡ç†ã€è°ƒåº¦ã€ç›‘æ§éœ€è¦ç»Ÿä¸€çš„è§£å†³æ–¹æ¡ˆï¼Œå¦åˆ™è¿ç»´æˆæœ¬æ€¥å‰§å¢åŠ </p>
<p><strong><strong>1.2 openFuyaoçš„è§£å†³æ–¹æ¡ˆ</strong></strong></p>
<p>openFuyaoä½œä¸ºå¼€æ”¾çš„äº‘åŸç”Ÿå¼‚æ„ç®—åŠ›å¹³å°ï¼Œé€šè¿‡ç»Ÿä¸€çš„èµ„æºæ± åŒ–ä¸æ™ºèƒ½è°ƒåº¦ä½“ç³»ï¼Œä¸ºç”¨æˆ·æä¾›ï¼š</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>å…¨æ ˆç¡¬ä»¶æ”¯æŒ</strong> *****ï¼šé›†æˆCPUã€NPUã€KAEç­‰å¤šç§ç®—åŠ›èµ„æºï¼Œå®ç°ç¡¬ä»¶èƒ½åŠ›çš„å……åˆ†å‘æŒ¥</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>æ™ºèƒ½èµ„æºè°ƒåº¦</strong> *****ï¼šåŸºäºåº”ç”¨ç‰¹æ€§å’Œç¡¬ä»¶èƒ½åŠ›çš„æ™ºèƒ½åŒ¹é…ï¼Œæœ€å¤§åŒ–èµ„æºåˆ©ç”¨æ•ˆç‡</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>å¼€æ”¾ç”Ÿæ€ä½“ç³»</strong> *****ï¼šä¸ºç¡¬ä»¶å‚å•†ã€å¹³å°å¼€å‘è€…ã€åº”ç”¨å¼€å‘è€…æä¾›å·®å¼‚åŒ–ä»·å€¼</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>äº‘åŸç”Ÿæ¶æ„</strong> *****ï¼šåŸºäºKubernetesç”Ÿæ€ï¼Œæä¾›å®¹å™¨åŒ–ã€è‡ªåŠ¨åŒ–çš„è¿ç»´ä½“éªŒ</p>
<hr/>
<p><strong><strong>äºŒã€openFuyaoå¤šæ ·åŒ–ç®—åŠ›èµ„æºæ± åŒ–ä¸è°ƒåº¦æ€»ä½“æ–¹æ¡ˆ</strong></strong></p>
<p><strong><strong>2.1 æŠ€æœ¯æ¶æ„æ¦‚è§ˆ</strong></strong></p>
<p><strong><strong>2.1.1 ä¸‰å±‚æ¶æ„è®¾è®¡</strong></strong></p>
<p>openFuyaoé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œä»ä¸‹åˆ°ä¸Šåˆ†ä¸ºä¸‰å±‚ï¼š</p>
<p><em><strong><strong><strong>ç¬¬ä¸€å±‚ï¼šç¡¬ä»¶èµ„æºå±‚</strong></strong></strong></em></p>
<p>Â· ç‰©ç†ç¡¬ä»¶ï¼šCPUã€NPUã€KAEç­‰å¼‚æ„å¤„ç†å™¨</p>
<p>Â· ç¡¬ä»¶ç‰¹å¾å‘ç°ï¼šé€šè¿‡NFDï¼ˆNode Feature Discoveryï¼‰è‡ªåŠ¨è¯†åˆ«ç¡¬ä»¶èƒ½åŠ›</p>
<p>Â· ç¡¬ä»¶é©±åŠ¨ä¸è¿è¡Œæ—¶ï¼šç¡®ä¿ç¡¬ä»¶èƒ½åŠ›çš„æ­£ç¡®æš´éœ²å’Œä½¿ç”¨</p>
<p><em><strong><strong><strong>ç¬¬äºŒå±‚ï¼šèµ„æºæ± åŒ–ä¸è°ƒåº¦å±‚</strong></strong></strong></em></p>
<p>Â· èµ„æºæ± ç®¡ç†ï¼šå°†å¼‚æ„ç¡¬ä»¶èµ„æºæŒ‰ç±»å‹å’Œèƒ½åŠ›åˆ†ç±»ç®¡ç†</p>
<p>Â· è°ƒåº¦å¼•æ“ï¼šåŸºäºåº”ç”¨éœ€æ±‚å’Œç¡¬ä»¶ç‰¹æ€§è¿›è¡Œæ™ºèƒ½è°ƒåº¦å†³ç­–</p>
<p>Â· èµ„æºéš”ç¦»ï¼šé€šè¿‡å®¹å™¨æŠ€æœ¯å’Œé…é¢ç®¡ç†å®ç°å¤šç§Ÿæˆ·éš”ç¦»</p>
<p><em><strong><strong><strong>ç¬¬ä¸‰å±‚ï¼šåº”ç”¨ä¸æœåŠ¡å±‚</strong></strong></strong></em></p>
<p>Â· åº”ç”¨æ¡†æ¶ï¼šæ”¯æŒTensorFlowã€PyTorchç­‰ä¸»æµAIæ¡†æ¶</p>
<p>Â· æœåŠ¡è¿è¡Œæ—¶ï¼šä¸ºåº”ç”¨æä¾›ç»Ÿä¸€çš„ç¡¬ä»¶è®¿é—®æ¥å£</p>
<p>Â· å¼€å‘å·¥å…·é“¾ï¼šç®€åŒ–åº”ç”¨å¼€å‘å’Œéƒ¨ç½²æµç¨‹</p>
<p><strong><strong>2.1.2 æ ¸å¿ƒæŠ€æœ¯ç‰¹æ€§</strong></strong></p>
<p>**<strong>Â·</strong> **Â ** ***<strong>è‡ªåŠ¨åŒ–å‘ç°ä¸ç®¡ç†</strong> *****ï¼šé€šè¿‡NFDå’ŒOperatoræ¨¡å¼è‡ªåŠ¨å‘ç°ã€é…ç½®ã€ç®¡ç†å¼‚æ„ç¡¬ä»¶</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>çµæ´»çš„èµ„æºè°ƒåº¦</strong> *****ï¼šæ”¯æŒå¤šç»´åº¦è°ƒåº¦ç­–ç•¥ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯éœ€æ±‚</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>å¯è§‚æµ‹æ€§</strong> *****ï¼šå®Œæ•´çš„ç›‘æ§ã€æ—¥å¿—ã€è¿½è¸ªä½“ç³»ï¼Œæ”¯æŒé—®é¢˜è¯Šæ–­å’Œæ€§èƒ½ä¼˜åŒ–</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>é«˜å¯ç”¨ä¸å®¹é”™</strong> *****ï¼šæ”¯æŒæ•…éšœè‡ªåŠ¨è½¬ç§»ã€èµ„æºåŠ¨æ€è°ƒæ•´ç­‰é«˜å¯ç”¨æœºåˆ¶</p>
<p><strong><strong>2.2 å¤šæ ·åŒ–ç®—åŠ›èµ„æºæ± åŒ–èƒ½åŠ›</strong></strong></p>
<p><strong><strong>2.2.1 CPUé€šç”¨ç®—åŠ›æ± </strong></strong></p>
<p>CPUé€šç”¨ç®—åŠ›æ± æä¾›ä¼ ç»Ÿçš„é€šç”¨è®¡ç®—èƒ½åŠ›ï¼š</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>èµ„æºç‰¹å¾</strong> *****ï¼šå¤šæ ¸å¿ƒã€é«˜ä¸»é¢‘ã€é€šç”¨æŒ‡ä»¤é›†</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>é€‚ç”¨åœºæ™¯</strong> *****ï¼šé€šç”¨æœåŠ¡ã€æ•°æ®å¤„ç†ã€æ§åˆ¶æµå¯†é›†å‹ä»»åŠ¡</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>ç®¡ç†æ–¹å¼</strong> *****ï¼šåŸºäºKubernetesåŸç”Ÿçš„CPUèµ„æºç®¡ç†ï¼Œæ”¯æŒrequests/limitsé…ç½®</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>ä¼˜åŒ–ç­–ç•¥</strong> *****ï¼šæ”¯æŒNUMAæ„ŸçŸ¥è°ƒåº¦ã€CPUäº²å’Œæ€§é…ç½®ï¼Œæå‡ç¼“å­˜å‘½ä¸­ç‡</p>
<p><strong><strong>2.2.2 NPU AIåŠ é€Ÿç®—åŠ›æ± </strong></strong></p>
<p>NPUï¼ˆNeural Processing Unitï¼‰æ˜¯ä¸“ä¸ºAIè®¡ç®—ä¼˜åŒ–çš„ç¡¬ä»¶å¤„ç†å™¨ã€‚<strong><strong>ä»¥ä¸‹èµ„æºç‰¹å¾ä¸ºNPUç¡¬ä»¶æœ¬èº«çš„èƒ½åŠ›ï¼ŒopenFuyaoè´Ÿè´£å¯¹è¿™äº›ç¡¬ä»¶è¿›è¡Œç»Ÿä¸€ç®¡ç†å’Œè°ƒåº¦ï¼š</strong></strong></p>
<p>**<strong>Â·</strong> **Â ** ***<strong>èµ„æºç‰¹å¾</strong> *****ï¼šé«˜ååé‡ã€ä½å»¶è¿Ÿã€èƒ½æ•ˆæ¯”é«˜ï¼Œé’ˆå¯¹çŸ©é˜µè¿ç®—ä¼˜åŒ–ï¼ˆNPUç¡¬ä»¶èƒ½åŠ›ï¼‰</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>é€‚ç”¨åœºæ™¯</strong> *****ï¼šAIæ¨ç†ã€AIæ¨¡å‹åŠ é€Ÿ</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>ç®¡ç†æ–¹å¼</strong> *****ï¼šopenFuyaoé€šè¿‡NPU Operatorè¿›è¡Œå…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ŒåŒ…æ‹¬é©±åŠ¨åŠ è½½ã€èµ„æºåˆ†é…ã€æ€§èƒ½ç›‘æ§</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>ä¼˜åŒ–ç­–ç•¥</strong> *****ï¼šopenFuyaoæ”¯æŒå¤šå¡ååŒã€æ··åˆç²¾åº¦è®¡ç®—ã€åŠ¨æ€åŠŸè€—ç®¡ç†çš„è°ƒåº¦</p>
<p><strong><strong>2.2.3 KAEç¡¬ä»¶åŠ é€Ÿç®—åŠ›æ± </strong></strong></p>
<p>KAEï¼ˆKunpeng Acceleration Engineï¼‰æ˜¯é²²é¹å¤„ç†å™¨å†…ç½®çš„ç¡¬ä»¶åŠ é€Ÿå¼•æ“ï¼Œæœ¬èº«æä¾›å¯†ç å­¦å’Œæ•°æ®å¤„ç†åŠ é€Ÿèƒ½åŠ›ã€‚<strong><strong>openFuyaoçš„ä»·å€¼åœ¨äºå°†KAEç¡¬ä»¶èƒ½åŠ›çº³å…¥ç»Ÿä¸€çš„èµ„æºæ± è¿›è¡Œç®¡ç†å’Œè°ƒåº¦ï¼š</strong></strong></p>
<p>**<strong>Â·</strong> **Â ** ***<strong>èµ„æºç‰¹å¾</strong> *****ï¼šä¸“ç”¨åŠ é€Ÿå¼•æ“ï¼Œæ”¯æŒHTTPSã€æ•°æ®åº“åŠ å¯†ã€æ•°æ®å‹ç¼©ç­‰ï¼ˆKAEç¡¬ä»¶èƒ½åŠ›ï¼‰</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>é€‚ç”¨åœºæ™¯</strong> *****ï¼šWebæœåŠ¡åŠ å¯†ã€æ•°æ®åº“åŠ å¯†ã€æ•°æ®å‹ç¼©ã€å®‰å…¨é€šä¿¡</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>ç®¡ç†æ–¹å¼</strong> *****ï¼šopenFuyaoé€šè¿‡KAE Operatorè¿›è¡Œç¡¬ä»¶ç®¡ç†å’Œåº”ç”¨é›†æˆ</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>ä¼˜åŒ–ç­–ç•¥</strong> *****ï¼šopenFuyaoæ”¯æŒåº”ç”¨é€æ˜åŠ é€Ÿã€çµæ´»çš„éƒ¨ç½²æ§åˆ¶</p>
<p><strong><strong>2.2.4 Rayåˆ†å¸ƒå¼è®¡ç®—èµ„æºæ± </strong></strong></p>
<p>Rayæä¾›åˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶æ”¯æŒï¼š</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>èµ„æºç‰¹å¾</strong> *****ï¼šåˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦ã€åŠ¨æ€èµ„æºåˆ†é…ã€çµæ´»çš„ç¼–ç¨‹æ¨¡å‹</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>é€‚ç”¨åœºæ™¯</strong> *****ï¼šåˆ†å¸ƒå¼è®¡ç®—ã€æ•°æ®å¤„ç†ã€è¶…å‚æ•°ä¼˜åŒ–</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>ç®¡ç†æ–¹å¼</strong> *****ï¼šä¸openFuyaoè°ƒåº¦å±‚é›†æˆï¼Œæ”¯æŒRayä»»åŠ¡çš„èµ„æºæ„ŸçŸ¥è°ƒåº¦</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>ä¼˜åŒ–ç­–ç•¥</strong> *****ï¼šæ”¯æŒå¼‚æ„èµ„æºæ„ŸçŸ¥ï¼Œè‡ªåŠ¨é€‰æ‹©æœ€ä¼˜ç¡¬ä»¶æ‰§è¡Œä»»åŠ¡</p>
<p><strong><strong>2.3 æ™ºèƒ½è°ƒåº¦ç­–ç•¥ä½“ç³»</strong></strong></p>
<p><strong><strong>2.3.1 å¤šå±‚æ¬¡è°ƒåº¦æ¶æ„</strong></strong></p>
<p>openFuyaoçš„è°ƒåº¦ä½“ç³»é‡‡ç”¨å¤šå±‚æ¬¡è®¾è®¡ï¼š</p>
<p><em><strong><strong><strong>é›†ç¾¤çº§è°ƒåº¦</strong></strong></strong></em></p>
<p>Â· è´Ÿè´£è·¨é›†ç¾¤çš„èµ„æºåˆ†é…å’Œè´Ÿè½½å‡è¡¡</p>
<p>Â· æ”¯æŒå¤šé›†ç¾¤ç»Ÿä¸€ç®¡ç†å’Œè·¨é›†ç¾¤è°ƒåº¦</p>
<p>Â· å®ç°æ··åˆäº‘å’Œè¾¹ç¼˜åœºæ™¯çš„èµ„æºåè°ƒ</p>
<p><em><strong><strong><strong>èŠ‚ç‚¹çº§è°ƒåº¦</strong></strong></strong></em></p>
<p>Â· åŸºäºèŠ‚ç‚¹ç¡¬ä»¶ç‰¹æ€§çš„Podè°ƒåº¦</p>
<p>Â· æ”¯æŒèŠ‚ç‚¹é€‰æ‹©å™¨ã€äº²å’Œæ€§è§„åˆ™ã€æ±¡ç‚¹å®¹é™ç­‰æœºåˆ¶</p>
<p>Â· å®ç°ç¡¬ä»¶æ„ŸçŸ¥çš„æ™ºèƒ½è°ƒåº¦</p>
<p><em><strong><strong><strong>å®¹å™¨çº§è°ƒåº¦</strong></strong></strong></em></p>
<p>Â· æ”¯æŒGPU/NPUç­‰åŠ é€Ÿè®¾å¤‡çš„ç»†ç²’åº¦åˆ†é…</p>
<p>Â· å®ç°è®¾å¤‡å…±äº«å’Œéš”ç¦»</p>
<p>Â· æ”¯æŒåŠ¨æ€èµ„æºè°ƒæ•´</p>
<p><strong><strong>2.3.2 åœºæ™¯åŒ–è°ƒåº¦ç­–ç•¥</strong></strong></p>
<p>é’ˆå¯¹ä¸åŒåº”ç”¨åœºæ™¯ï¼ŒopenFuyaoæä¾›å®šåˆ¶åŒ–çš„è°ƒåº¦ç­–ç•¥ï¼š</p>
<p><em><strong><strong><strong>æ¨ç†æœåŠ¡åœºæ™¯</strong></strong></strong></em></p>
<p>Â· æ”¯æŒä½å»¶è¿Ÿæ¨ç†ï¼Œä¼˜å…ˆé€‰æ‹©é«˜æ€§èƒ½NPU</p>
<p>Â· æ”¯æŒåŠ¨æ€æ‰¹å¤„ç†ï¼Œæå‡ååé‡</p>
<p>Â· æ”¯æŒæ¨¡å‹ç¼“å­˜å’Œé¢„çƒ­</p>
<p><em><strong><strong><strong>WebæœåŠ¡åœºæ™¯</strong></strong></strong></em></p>
<p>Â· æ”¯æŒKAEåŠ é€Ÿï¼Œè‡ªåŠ¨å¸è½½HTTPSåŠ å¯†è®¡ç®—</p>
<p>Â· æ”¯æŒå¤šå‰¯æœ¬éƒ¨ç½²å’Œè´Ÿè½½å‡è¡¡</p>
<p>Â· æ”¯æŒè‡ªåŠ¨æ‰©ç¼©å®¹</p>
<p><em><strong><strong><strong>æ•°æ®å¤„ç†åœºæ™¯</strong></strong></strong></em></p>
<p>Â· æ”¯æŒRayåˆ†å¸ƒå¼è®¡ç®—æ¡†æ¶</p>
<p>Â· æ”¯æŒæ•°æ®æœ¬åœ°æ€§ä¼˜åŒ–</p>
<p>Â· æ”¯æŒCPUå’ŒåŠ é€Ÿå™¨çš„æ··åˆä½¿ç”¨</p>
<p><strong><strong>2.3.3 è°ƒåº¦ä¼˜åŒ–æŠ€æœ¯</strong></strong></p>
<p>**<strong>Â·</strong> **Â ** ***<strong>ç¡¬ä»¶æ„ŸçŸ¥è°ƒåº¦</strong> *****ï¼šåŸºäºNFDå‘ç°çš„ç¡¬ä»¶ç‰¹æ€§è¿›è¡Œè°ƒåº¦å†³ç­–</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>æ€§èƒ½é¢„æµ‹</strong> *****ï¼šåˆ©ç”¨å†å²æ•°æ®é¢„æµ‹åº”ç”¨åœ¨ä¸åŒç¡¬ä»¶ä¸Šçš„æ€§èƒ½è¡¨ç°</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>åŠ¨æ€è°ƒæ•´</strong> *****ï¼šæ ¹æ®å®æ—¶è´Ÿè½½å’Œèµ„æºåˆ©ç”¨ç‡åŠ¨æ€è°ƒæ•´è°ƒåº¦ç­–ç•¥</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>å…¬å¹³æ€§ä¸ä¼˜å…ˆçº§</strong> *****ï¼šæ”¯æŒå¤šç§Ÿæˆ·åœºæ™¯ä¸‹çš„èµ„æºå…¬å¹³åˆ†é…å’Œä¼˜å…ˆçº§ç®¡ç†</p>
<p><strong><strong>2.4 é¢å‘ç¡¬ä»¶å‚å•†çš„ä»·å€¼</strong></strong></p>
<p>**<strong>Â·</strong> **Â ** ***<strong>èƒ½åŠ›å……åˆ†å‘æŒ¥</strong> *****ï¼šé€šè¿‡ä¸“ç”¨Operatorå’Œè°ƒåº¦ç­–ç•¥ï¼Œç¡®ä¿ç¡¬ä»¶èƒ½åŠ›å¾—åˆ°å……åˆ†åˆ©ç”¨</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>ç”Ÿæ€å¼€æ”¾</strong> *****ï¼šæä¾›æ ‡å‡†åŒ–æ¥å£ï¼Œæ”¯æŒæ–°ç¡¬ä»¶çš„å¿«é€Ÿé›†æˆ</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>ç”¨æˆ·è·å–</strong> *****ï¼šé€šè¿‡openFuyaoå¹³å°ï¼Œç¡¬ä»¶å‚å•†å¯ä»¥æ¥è§¦æ›´å¤šç”¨æˆ·å’Œåº”ç”¨åœºæ™¯</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>æˆæœ¬ä¼˜åŒ–</strong> *****ï¼šå¸®åŠ©ç”¨æˆ·ä¼˜åŒ–ç¡¬ä»¶é‡‡è´­å’Œä½¿ç”¨æˆæœ¬ï¼Œæå‡ROI</p>
<hr/>
<p><strong><strong>ä¸‰ã€NPU Operatorï¼šæ˜‡è…¾AIç®—åŠ›çš„ä¸€é”®ä½¿èƒ½</strong></strong></p>
<p><strong><strong>è¯´æ˜</strong></strong>ï¼šNPUï¼ˆæ˜‡è…¾AIå¤„ç†å™¨ï¼‰çš„è®¡ç®—èƒ½åŠ›ã€æ¨ç†ä¼˜åŒ–ç­‰æ˜¯ç¡¬ä»¶æœ¬èº«å…·å¤‡çš„ç‰¹æ€§ã€‚æœ¬ç« ä»‹ç»çš„NPU Operatoræ˜¯openFuyaoæä¾›çš„ç®¡ç†ç»„ä»¶ï¼Œå…¶æ ¸å¿ƒä»·å€¼åœ¨äºå®ç°NPUç¡¬ä»¶çš„è‡ªåŠ¨åŒ–å‘ç°ã€èµ„æºè°ƒåº¦å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œå¸®åŠ©ç”¨æˆ·æ›´ä¾¿æ·åœ°ä½¿ç”¨NPUç¡¬ä»¶èƒ½åŠ›ã€‚</p>
<p><strong><strong>3.1 åŠŸèƒ½æ¦‚è¿°</strong></strong></p>
<p><strong><strong>3.1.1 NPUå…¨ç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨åŒ–ç®¡ç†</strong></strong></p>
<p>NPU Operatoræ˜¯openFuyaoæä¾›çš„ç®¡ç†ç»„ä»¶ï¼Œè´Ÿè´£ä»ç¡¬ä»¶å‘ç°åˆ°åº”ç”¨è¿è¡Œçš„å…¨ç”Ÿå‘½å‘¨æœŸè‡ªåŠ¨åŒ–ç®¡ç†ï¼š</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>è‡ªåŠ¨åŒ–å‘ç°</strong> *****ï¼šè‡ªåŠ¨è¯†åˆ«é›†ç¾¤ä¸­çš„NPUç¡¬ä»¶ï¼Œè·å–è®¾å¤‡ä¿¡æ¯å’Œèƒ½åŠ›</p>
<p>**<strong>Â·</strong> **Â ** ***<strong>é©±åŠ¨ç®¡ç†</strong> *****ï¼šè‡ªåŠ¨åŠ è½½å’Œæ›´æ–°NPUé©±åŠ¨ç¨‹åºï¼Œç¡®ä¿å…¼å®¹æ€§</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ´»åŠ¨å›é¡¾ä¸¨é˜¿é‡Œäº‘AIåŸç”Ÿåº”ç”¨å¼€å‘å®æˆ˜è¥AI Agent ä¸“åœºï¼ˆä¸Šæµ·ç«™ï¼‰å›é¡¾&PPTä¸‹è½½]]></title>    <link>https://juejin.cn/post/7584057497206554667</link>    <guid>https://juejin.cn/post/7584057497206554667</guid>    <pubDate>2025-12-16T08:23:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584057497206554667" data-draft-id="7584057497206390827" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ´»åŠ¨å›é¡¾ä¸¨é˜¿é‡Œäº‘AIåŸç”Ÿåº”ç”¨å¼€å‘å®æˆ˜è¥AI Agent ä¸“åœºï¼ˆä¸Šæµ·ç«™ï¼‰å›é¡¾&amp;PPTä¸‹è½½"/> <meta itemprop="keywords" content="Serverless"/> <meta itemprop="datePublished" content="2025-12-16T08:23:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ´»åŠ¨å›é¡¾ä¸¨é˜¿é‡Œäº‘AIåŸç”Ÿåº”ç”¨å¼€å‘å®æˆ˜è¥AI Agent ä¸“åœºï¼ˆä¸Šæµ·ç«™ï¼‰å›é¡¾&amp;PPTä¸‹è½½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:23:31.000Z" title="Tue Dec 16 2025 08:23:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4674140b50b64393a613e068b9d45e60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766478211&amp;x-signature=5%2BdARYtoWqKbbC6A6P5Wu5aFwYY%3D" alt="image.png" loading="lazy"/></p>
<p>AI Agent æ­£ä»æŠ€æœ¯æ¦‚å¿µå¿«æ­¥èµ°å‘ç”Ÿäº§åº”ç”¨ã€‚ä½†æ˜¯ï¼Œå¼€å‘è€…å’Œä¼ä¸šä»â€œåŸå‹â€åˆ°â€œäº§å“â€çš„æ¯ä¸€æ­¥ï¼Œéƒ½å……æ»¡äº†åŸºç¡€è®¾æ–½çš„æŒ‘æˆ˜ã€‚è¦è·¨è¶Šè¿™é“é¸¿æ²Ÿï¼Œéœ€è¦çš„ä¸ä»…ä»…æ˜¯æ›´èªæ˜çš„æ¨¡å‹ï¼Œè€Œæ˜¯èƒ½å…¨é¢è§£å†³è¿™äº›é—®é¢˜çš„åŸºç¡€è®¾æ–½å¹³å°ã€‚</p>
<p>12 æœˆ 10 æ—¥ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUzNzYxNjAzMg%3D%3D%26mid%3D2247580646%26idx%3D1%26sn%3D840d2fcc0e99bd012b89efdf86ae8c59%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUzNzYxNjAzMg==&amp;mid=2247580646&amp;idx=1&amp;sn=840d2fcc0e99bd012b89efdf86ae8c59&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘å‡½æ•°è®¡ç®— AgentRun æ­£å¼å‘å¸ƒ</a>ã€‚è¿™æ˜¯ä¸€æ¬¾ä»¥å…¨çƒé¢†å…ˆçš„å‡½æ•°è®¡ç®— FC ä¸ºæŠ€æœ¯åº•åº§çš„ä¸€ç«™å¼ Agentic AI åŸºç¡€è®¾æ–½å¹³å°ã€‚å®ƒå°† Serverless çš„æè‡´å¼¹æ€§ã€é›¶è¿ç»´å’ŒæŒ‰é‡ä»˜è´¹çš„ç‰¹æ€§ä¸ AI åŸç”Ÿåº”ç”¨åœºæ™¯æ·±åº¦èåˆï¼ŒåŠ©åŠ›ä¼ä¸šå®ç°æˆæœ¬ä¸æ•ˆç‡çš„æè‡´ä¼˜åŒ–ï¼Œå¹³å‡ TCO é™ä½ 60%ã€‚</p>
<p>12 æœˆ 12 æ—¥â€œé˜¿é‡Œäº‘ AI åŸç”Ÿåº”ç”¨å¼€å‘å®æˆ˜è¥â€”â€”AI Agent ä¸“åœºâ€ä¸Šæµ·ç«™æˆåŠŸä¸¾åŠï¼Œæœ¬æ¬¡æ´»åŠ¨æ˜¯å‡½æ•°è®¡ç®— AgentRun å‘å¸ƒåçš„ç¬¬ä¸€åœºçº¿ä¸‹è§é¢ä¼šã€‚æœ¬æ¬¡æ´»åŠ¨å—ä¼—ä»¥ AI å¼€å‘è€…ã€ä¼ä¸šå†³ç­–äººã€æŠ€æœ¯è´Ÿè´£äººä¸ºä¸»ï¼Œé€šè¿‡ä¸»é¢˜æ¼”è®²ï¼Œè¡Œä¸šæ¡ˆä¾‹å‰–æä¸å®æ“æ¼”ç»ƒç›¸ç»“åˆçš„æ–¹å¼ï¼Œèšç„¦ AI Agent ä¼ä¸šçº§è½åœ°ç—›ç‚¹ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨çŸ­æ—¶é—´å†…æŒæ¡ä»ç†è®ºåˆ°è½åœ°çš„å®Œæ•´æŠ€æœ¯è·¯å¾„ï¼ŒæŒæ¡é«˜æ•ˆå¯è¡Œçš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>å…³æ³¨ã€Œé˜¿é‡Œäº‘äº‘åŸç”Ÿã€å…¬ä¼—å·ï¼Œåå°å›å¤ï¼š1212</p>
<p>å…è´¹ä¸‹è½½ä¸Šæµ·ç«™è®²å¸ˆ PPT åˆé›†</p>
<h2 data-id="heading-0">ç²¾å½©å›é¡¾</h2>
<h3 data-id="heading-1">è®®é¢˜ä¸€ï¼šAI åŸç”Ÿåº”ç”¨å¼€å‘æœ€ä½³å®è·µ</h3>
<p>é˜¿é‡Œäº‘æ™ºèƒ½é›†å›¢äº§å“ä¸“å®¶åˆ˜å®‡ä¸ºå¤§å®¶è®²è§£ï¼šèšç„¦äº‘åŸç”Ÿæ—¶ä»£ AI åŸºç¡€è®¾æ–½çš„æ·±åº¦å˜é©ï¼Œå‰–æä¼ ç»Ÿ AI åº”ç”¨é¢ä¸´çš„å¼€å‘é—¨æ§›é«˜ã€è¿ç»´å¤æ‚ã€ç”Ÿæ€å‰²è£‚ç­‰æ ¸å¿ƒæŒ‘æˆ˜ã€‚é€šè¿‡ FunctionAIï¼Œå±•ç¤ºæ–°ä¸€ä»£äº‘åŸç”Ÿ AI åŸºç¡€è®¾æ–½å¦‚ä½•é‡æ–°å®šä¹‰ AI åº”ç”¨ä½“éªŒã€‚æ¢è®¨å¦‚ä½•é€šè¿‡äº‘åŸç”ŸæŠ€æœ¯æ ˆæ„å»ºå¼€ç®±å³ç”¨çš„ AI åŸºç¡€è®¾æ–½ï¼Œå¿«é€Ÿè¿›è¡Œé«˜å¯ç”¨çš„ AI Agent æ„å»ºï¼Œè®©å¼€å‘è€…æ›´ä¸“æ³¨ AI ä¸šåŠ¡åˆ›æ–°ï¼Œå®ç°å¼€æºå…±å»ºç”Ÿæ€ï¼Œè®©æ¯ä¸ªäººéƒ½èƒ½äº«å— AI æ—¶ä»£çš„æŠ€æœ¯çº¢åˆ©ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82c4c661d1b24b2b9834235a71081aa2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766478211&amp;x-signature=snBa9CUix07PQ5%2BmUVRD8HAveII%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-2">è®®é¢˜äºŒï¼šå‡½æ•°è®¡ç®— AgentRunï¼šä¼ä¸šçº§ä¸€ç«™å¼ AI Agent åŸºç¡€è®¾æ–½å¹³å°</h3>
<p>é˜¿é‡Œäº‘å‡½æ•°è®¡ç®— AgentRun ç ”å‘è´Ÿè´£äººèµµåº†æ°ä¸ºå¤§å®¶è®²è§£ï¼šå›´ç»• Agentic AI è½åœ°å®è·µï¼Œå…¶ä¾èµ–è®°å¿†ã€ä¸Šä¸‹æ–‡ã€æ¨¡å‹æ²»ç†ä¸å®‰å…¨å·¥å…·è°ƒç”¨ç­‰åŸºç¡€è®¾æ–½ï¼Œè€Œä¼ ç»Ÿæ¶æ„åœ¨æ”¯æ’‘è¿™ç±»é«˜åŠ¨æ€ã€çŠ¶æ€åŒ–æ™ºèƒ½ä½“æ—¶ï¼Œå¸¸å›°äºèµ„æºåƒµåŒ–ã€çŠ¶æ€å¤æ‚å’Œè¿ç»´æˆæœ¬é«˜ã€‚Serverless ä»¥æŒ‰éœ€å¼¹æ€§ã€è‡ªåŠ¨æ‰©ç¼©ã€å¼ºéš”ç¦»å’Œé›¶è¿ç»´ï¼Œä¸ºæ¯ä¸ª Agent ä¼šè¯æä¾›è½»é‡ã€å®‰å…¨çš„è¿è¡Œç¯å¢ƒï¼Œå¤©ç„¶å¥‘åˆ Agentic AI çš„æ‰§è¡Œæ¨¡å¼ã€‚æ·±åº¦èåˆäºŒè€…ï¼Œä¸ä»…ç ´è§£åŸºç¡€è®¾æ–½ç“¶é¢ˆï¼Œæ›´é‡Šæ”¾å…¶åœ¨è‡ªåŠ¨åŒ–ã€ä¸ªæ€§åŒ–ä¸å¤æ‚å·¥ä½œæµä¸­çš„åˆ›æ–°æ½œèƒ½â€”â€”è®©ä¼ä¸šä»¥äº‘åŸç”Ÿæ–¹å¼â€œè¿è¡Œæ™ºèƒ½â€ï¼Œé©±åŠ¨ä¸šåŠ¡è·ƒè¿ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4c03b5b31dea4752b97ae0e268e1a594~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766478211&amp;x-signature=mWO%2BKokuxUJzjHlwLJcmt6tkv1w%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-3">è®®é¢˜ä¸‰ï¼šFunction AIï¼šç”Ÿæˆå¼ AI çš„è½åœ°å®è·µä¸æ¡ˆä¾‹åˆ†äº«</h3>
<p>é˜¿é‡Œäº‘äº‘åŸç”Ÿè§£å†³æ–¹æ¡ˆæ¶æ„å¸ˆä¿®çœä¸ºå¤§å®¶è®²è§£ï¼šå›´ç»•ã€Œç”Ÿæˆå¼ AIã€çš„è½åœ°çœŸå®å®è·µï¼Œæ·±å…¥å‰–æç”¨æˆ·ä½¿ç”¨å‡½æ•°è®¡ç®— Function AI æ„å»ºç”Ÿæˆå¼ AI çš„æ¶æ„ç‰¹ç‚¹å’Œç‹¬æœ‰ä¼˜åŠ¿ï¼ŒåŒæ—¶ç»™ä¸€äº›å®¢æˆ·çœŸå®æ¡ˆä¾‹æ¥å±•ç°é€šè¿‡ AIGC åœ¨ä¼ä¸šä¸­å¦‚ä½•è½åœ°ç»™å®¢æˆ·å¸¦æ¥çœŸå®ä¸šåŠ¡ä»·å€¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5da662fa27944b4aa7a575970ee324c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766478211&amp;x-signature=ETJFnUXkBtyQ4LueBIWkZgz7EpU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-4">è®®é¢˜å››ï¼šAI æ—¶ä»£çš„â€œæ™ºèƒ½æµé‡ä¸­æ¢â€ï¼ŒAI ç½‘å…³æ­å»ºä¸è½åœ°å®è·µ</h3>
<p>é˜¿é‡Œäº‘æ™ºèƒ½è§£å†³æ–¹æ¡ˆæ¶æ„å¸ˆèµµä¸–æŒ¯ä¸ºå¤§å®¶è®²è§£ï¼šèšç„¦ AI åº”ç”¨çˆ†å‘å¼å¢é•¿ä¸‹çš„æ²»ç†éš¾é¢˜ï¼Œæ·±å…¥å‰–æå¤šæ¨¡å‹é›†æˆã€å®‰å…¨åˆè§„ã€æˆæœ¬å¤±æ§ä¸é«˜å¯ç”¨ä¿éšœç­‰æ ¸å¿ƒæŒ‘æˆ˜ã€‚é€šè¿‡é˜¿é‡Œäº‘ AI ç½‘å…³ï¼Œæ‰“é€ ä¼ä¸šçº§â€œæ™ºèƒ½æµé‡ä¸­æ¢â€ï¼Œå®ç°ç»Ÿä¸€æ¥å…¥ã€å®‰å…¨ç®¡æ§ã€å¼¹æ€§å®¹ç¾ä¸æˆæœ¬ä¼˜åŒ–ï¼ŒåŠ©åŠ› AI åº”ç”¨é«˜æ•ˆã€ç¨³å®šã€åˆè§„è½åœ°ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2eb2a0eee4043a7a51fa722c599e41f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766478211&amp;x-signature=cpq%2F6sudUWnXpdDD2vyi%2BviQAdw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-5">ç°åœºç²¾å½©ç¬é—´</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d56f5faa1f34b0e9d1529cf3be10ea5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766478211&amp;x-signature=MeFHJJi4AkUNbWlmrVhW6UHP7K4%3D" alt="å›¾ç‰‡" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¤é¥®å°ç¨‹åºéœ€è¦ä½ ä»¬]]></title>    <link>https://juejin.cn/post/7584307642983907369</link>    <guid>https://juejin.cn/post/7584307642983907369</guid>    <pubDate>2025-12-16T08:26:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584307642983907369" data-draft-id="7584057497206456363" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¤é¥®å°ç¨‹åºéœ€è¦ä½ ä»¬"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,Java"/> <meta itemprop="datePublished" content="2025-12-16T08:26:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å°å¼ åŒå­¦"/> <meta itemprop="url" content="https://juejin.cn/user/1922381414934589"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¤é¥®å°ç¨‹åºéœ€è¦ä½ ä»¬
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1922381414934589/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å°å¼ åŒå­¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:26:33.000Z" title="Tue Dec 16 2025 08:26:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å‰ç«¯å°å¼ åŒå­¦ï¼Œæœ€è¿‘å…¬å¸è¦æä¸€ä¸ªé¤é¥®å°ç¨‹åºï¼Œéœ€è¦ä¸€åå…¨æ ˆå·¥ç¨‹å¸ˆå’Œæˆ‘ä¸€èµ·å¼€å‘ï¼Œéœ€è¦ä¸€åå…¼èŒäººå‘˜å’Œæˆ‘ä¸€èµ·å®Œæˆè¿™ä¸ªä¸šåŠ¡ï¼Œæœ‰æ„è€…ç§ä¿¡æˆ‘ã€‚</p>
<p>æŠ€æœ¯æ ˆï¼šå‰ç«¯ vue3 vite</p>
<p>æœåŠ¡ç«¯ java redis mybatis-plus mysql</p>
<p>æ ¸å¿ƒåŠŸèƒ½å¾®ä¿¡æ”¯ä»˜ å•†åŸ ï¼Œç‚¹é¤ï¼Œä»¥åŠåå°ç³»ç»Ÿç®¡ç†ã€‚</p>
<p>æœ‰æ„è€…ç§èŠ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69713f619a8a456f8f15293a4b6e48a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5bCP5byg5ZCM5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766478392&amp;x-signature=%2FC5w3wUhraOJLFx3phwwYHdpLT4%3D" alt="image.png" loading="lazy"/></p>
<p>ä»Šå¤©æ–‡ç« å°±åˆ†äº«åˆ°è¿™ï¼Œæ„Ÿè°¢å¤§å®¶ï¼ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¾®å‰ç«¯æ¶æ„ï¼ˆä¸€ï¼‰ï¼šåŸºç¡€å…¥é—¨]]></title>    <link>https://juejin.cn/post/7584057497206571051</link>    <guid>https://juejin.cn/post/7584057497206571051</guid>    <pubDate>2025-12-16T08:29:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584057497206571051" data-draft-id="7584057497206505515" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¾®å‰ç«¯æ¶æ„ï¼ˆä¸€ï¼‰ï¼šåŸºç¡€å…¥é—¨"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-16T08:29:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç å†œèƒ–å¤§æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/4195392102086967"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¾®å‰ç«¯æ¶æ„ï¼ˆä¸€ï¼‰ï¼šåŸºç¡€å…¥é—¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4195392102086967/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç å†œèƒ–å¤§æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:29:14.000Z" title="Tue Dec 16 2025 08:29:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>å¾ˆè£å¹¸ç”±æˆ‘ä¸»å¯¼è®¾è®¡å¹¶å®ç°äº†å…¬å¸è‡ªç ”çš„å¾®å‰ç«¯æ¡†æ¶ï¼Œç›®å‰è¯¥æ¡†æ¶å·²åœ¨å¤šä¸ªä¸šåŠ¡é¡¹ç›®ä¸­å¹¿æ³›åº”ç”¨ã€‚æœ¬æ–‡æ˜¯æˆ‘ç»“åˆå†…éƒ¨åŸ¹è®­ã€äº§å“æ–‡æ¡£åŠç›¸å…³å®è·µæ¢³ç†è€Œæˆçš„æ€»ç»“ï¼Œæ—¨åœ¨å¯¹å¾®å‰ç«¯æŠ€æœ¯ä½“ç³»è¿›è¡Œç³»ç»Ÿæ€§çš„æ•´ç†ä¸æ²‰æ·€ã€‚</p>
<p>ä½œä¸ºç³»åˆ—æ–‡ç« çš„ç¬¬ä¸€ç¯‡ï¼Œæœ¬æ–‡å°†ä»åŸºç¡€æ¦‚å¿µä¸æ ¸å¿ƒçŸ¥è¯†å…¥æ‰‹ï¼Œå¸¦å¤§å®¶è¿ˆå…¥å¾®å‰ç«¯çš„å¤§é—¨ã€‚</p>
<p>æˆ‘ä»¬å°†å›´ç»•ä»¥ä¸‹ä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜å±•å¼€ï¼š</p>
<ol>
<li>å¾®å‰ç«¯æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>å®ƒèƒ½è§£å†³ä»€ä¹ˆå®é™…é—®é¢˜ï¼Ÿ</li>
<li>ä¸»æµçš„å®ç°æ–¹æ¡ˆæœ‰å“ªäº›ï¼Ÿ</li>
</ol>
<h2 data-id="heading-1">äºŒã€ä»€ä¹ˆæ˜¯å¾®å‰ç«¯</h2>
<p>å¾®å‰ç«¯ï¼ˆMicro Frontendsï¼‰æ˜¯ä¸€ç§å€Ÿé‰´å¾®æœåŠ¡ï¼ˆåˆ†è€Œæ²»ä¹‹ï¼‰ç†å¿µçš„å‰ç«¯æ¶æ„æ¨¡å¼ã€‚å®ƒå°†å•ä½“å‰ç«¯åº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªç‹¬ç«‹è‡ªæ²»çš„å°å‹å­åº”ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26488dad324d4479a376b91f387f7fa3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5Yac6IOW5aSn5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766478554&amp;x-signature=IBXZ3X7F6E%2BJXMhyCoOb9UwIm0Y%3D" alt="image.png" loading="lazy"/></p>
<p>å®ƒå…·å¤‡ä»¥ä¸‹æ ¸å¿ƒç‰¹å¾ï¼š</p>
<ol>
<li>
<p>æŠ€æœ¯æ ˆæ— å…³æ€§</p>
<ul>
<li>å­åº”ç”¨å¯ä½¿ç”¨ä¸åŒæ¡†æ¶ï¼ˆå¦‚Reactã€Vueã€Angularç”šè‡³åŸç”ŸJSï¼‰ï¼Œä¸»æ¡†æ¶ä¸é™åˆ¶æŠ€æœ¯é€‰å‹ã€‚</li>
</ul>
</li>
<li>
<p>ç‹¬ç«‹å¼€å‘ä¸éƒ¨ç½²</p>
<ul>
<li>åº”ç”¨æ‹†åˆ†åï¼Œå›¢é˜Ÿå¯å¹¶è¡Œå¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²å­åº”ç”¨ï¼Œæ— éœ€åè°ƒæ•´ä½“å‘å¸ƒæµç¨‹ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-2">ä¸‰ã€ä¸ºä»€ä¹ˆè¦å¾®å‰ç«¯</h2>
<p>ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼Œå®ƒèƒ½å¤Ÿè§£å†³å·¨å‹ã€å¤æ‚å•ä½“åº”ç”¨å­˜åœ¨çš„ä¸€ç³»åˆ—é—®é¢˜ï¼š</p>
<ol>
<li>
<p>ç»´æŠ¤å›°éš¾</p>
<ul>
<li>å•ä½“åº”ç”¨éšä¸šåŠ¡è†¨èƒ€å¯¼è‡´ä»£ç é‡æ¿€å¢ï¼Œå¼€å‘æ•ˆç‡ä½ä¸‹ã€å‡çº§é£é™©é«˜ã€‚å¾®å‰ç«¯é€šè¿‡ç‰©ç†æ‹†åˆ†é™ä½å¤æ‚åº¦ã€‚</li>
</ul>
</li>
<li>
<p>æŠ€æœ¯æ ˆè¿­ä»£é˜»åŠ›</p>
<ul>
<li>æ—§ç³»ç»Ÿæ— æ³•ç›´æ¥å‡çº§æ¡†æ¶ï¼ˆå¦‚Vue2â†’Vue3ï¼‰ï¼Œå¾®å‰ç«¯å…è®¸æ¸è¿›å¼é‡æ„ï¼Œæ–°æ—§æ¨¡å—å…±å­˜ã€‚</li>
</ul>
</li>
<li>
<p>å›¢é˜Ÿåä½œæ•ˆç‡ä½</p>
<ul>
<li>å¤šå›¢é˜Ÿåœ¨å•ä¸€ä»“åº“åä½œæ˜“å¼•å‘å†²çªã€‚å¾®å‰ç«¯å®ç°å›¢é˜Ÿè‡ªæ²»ï¼Œå„å›¢é˜Ÿè´Ÿè´£ç‹¬ç«‹å­åº”ç”¨ã€‚</li>
</ul>
</li>
<li>
<p>éƒ¨ç½²è€¦åˆæ€§é«˜</p>
<ul>
<li>å•ä½“åº”ç”¨éœ€å…¨é‡éƒ¨ç½²ï¼Œå¾®å‰ç«¯æ”¯æŒç‹¬ç«‹å‘å¸ƒï¼Œæ›´æ–°å­åº”ç”¨æ— éœ€å…¨å±€å›å½’æµ‹è¯•ã€‚</li>
</ul>
</li>
</ol>
<p>éœ€è¦æ˜ç¡®çš„æ˜¯ï¼Œå¾®å‰ç«¯è§£å†³çš„æ˜¯ç»„ç»‡å’Œå›¢é˜Ÿé—´åä½œå¸¦æ¥çš„<strong>å·¥ç¨‹é—®é¢˜</strong>ï¼Œè€Œä¸æ˜¯å•çº¯çš„æŸä¸ª<strong>æŠ€æœ¯é—®é¢˜</strong>ã€‚</p>
<h2 data-id="heading-3">å››ã€å¾®å‰ç«¯çš„é€‚ç”¨åœºæ™¯</h2>
<p>å½“ä¸€ä¸ªé¡¹ç›®é¢ä¸´ä¸Šè¿°æŒ‘æˆ˜æ—¶ï¼Œä¾¿æ˜¯è€ƒè™‘é‡‡ç”¨å¾®å‰ç«¯æ¶æ„çš„æ°å½“æ—¶æœºã€‚å…¸å‹çš„é€‚ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ol>
<li>
<p>å¤šå›¢é˜Ÿåä½œçš„å·¨å‹åº”ç”¨</p>
<ul>
<li>éœ€è¦æ”¯æŒå¤šå›¢é˜Ÿã€å¤šå‚å•†ã€å¤šä¸šåŠ¡æ¿å—åº”ç”¨çš„å‘å¸ƒä¸Šçº¿ï¼Œæ¯”å¦‚é‡‡é›†2.0ã€‚</li>
</ul>
</li>
<li>
<p>é—ç•™ç³»ç»Ÿæ”¹é€ </p>
<ul>
<li>æ¯”å¦‚æŸä¸ªè€ç³»ç»Ÿåœ¨æŠ€æœ¯ç¿»æ–°ï¼Œä½†åŒæ—¶åˆå­˜åœ¨æŒç»­æ–°å¢çš„éœ€æ±‚ã€‚æˆ‘ä»¬ä¸å¯èƒ½ç­‰æ–°ç³»ç»Ÿå…¨éƒ¨å¼€å‘å¥½å†å»æ›¿ä»£æ—§ç³»ç»Ÿã€‚</li>
<li>å¾®å‰ç«¯å¯ä»¥è®©æ–°å¢æˆ–æ”¹é€ å¥½çš„åŠŸèƒ½å’ŒåŸæœ‰åŠŸèƒ½èƒ½å¤ŸåŒæ—¶è¿è¡Œï¼Œæ¸è¿›å¼åœ°å®Œæˆé‡æ„æ›¿æ¢ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-4">äº”ã€å¾®å‰ç«¯çš„å‰¯ä½œç”¨</h2>
<p>ä»»ä½•æŠ€æœ¯æ¶æ„éƒ½æ˜¯ä¸€æšç¡¬å¸çš„ä¸¤é¢ï¼Œå¾®å‰ç«¯ä¹Ÿä¸ä¾‹å¤–ã€‚å®ƒå¹¶éé“¶å¼¹ï¼Œåœ¨èµ‹äºˆç³»ç»Ÿçµæ´»æ€§ä¸ç‹¬ç«‹æ€§çš„åŒæ—¶ï¼Œä¹Ÿå¿…ç„¶å¼•å…¥æ–°çš„å¤æ‚æ€§ä¸æŒ‘æˆ˜ã€‚å…¸å‹çš„é—®é¢˜æœ‰ï¼š</p>
<ol>
<li>
<p>æ€§èƒ½æŸè€—</p>
<ul>
<li>é¡µé¢åŠ è½½é€Ÿåº¦æ…¢ï¼šå­åº”ç”¨é™æ€èµ„æºçš„è·å–ï¼Œä»¥åŠè§£æè¿è¡Œå­åº”ç”¨è„šæœ¬æœ‰é¢å¤–çš„å¼€é”€ã€‚</li>
<li>å†…å­˜å ç”¨é«˜ï¼šå­åº”ç”¨çš„ç¼“å­˜ã€CSS/JSéš”ç¦»æœºåˆ¶ï¼Œéƒ½ä¼šå¸¦æ¥é¢å¤–çš„å†…å­˜å ç”¨ã€‚</li>
</ul>
</li>
<li>
<p>å¼€å‘ä¸è¿ç»´å¤æ‚åº¦</p>
<ul>
<li>è°ƒè¯•æˆæœ¬å¢åŠ ï¼šç”±äºä¸»åº”ç”¨ä¸å¾®åº”ç”¨çš„åˆ†å±‚æ¶æ„ï¼Œè·¨åº”ç”¨é“¾è·¯è°ƒè¯•éš¾åº¦æ˜¾è‘—ä¸Šå‡ã€‚</li>
<li>ç‰ˆæœ¬å…¼å®¹æ€§ç®¡ç†å¤æ‚ï¼šä¾‹å¦‚ï¼Œé‡‡é›†2.0åŸºåº§åœ¨ä¸åŒç½‘çœç¯å¢ƒä¸­å­˜åœ¨ç‰ˆæœ¬å·®å¼‚ï¼Œä¸šåŠ¡å¾®åº”ç”¨åœ¨å„åœ°ä¸Šçº¿æ—¶å°±é¢ä¸´ç‰ˆæœ¬å…¼å®¹æ€§æŒ‘æˆ˜ï¼Œéœ€è¦å¤šç‰ˆæœ¬é€‚é…ã€‚</li>
</ul>
</li>
<li>
<p>è®¾è®¡ä½“éªŒå‰²è£‚é£é™©</p>
<ul>
<li>å¾®å‰ç«¯æ”¯æŒå­åº”ç”¨çš„ç‹¬ç«‹æ¼”è¿›ï¼Œä½†è‹¥ç¼ºä¹ç»Ÿä¸€çš„è®¾è®¡è§„çº¦ï¼Œææ˜“å¯¼è‡´ä¸åŒæ¨¡å—é—´çš„è§†è§‰é£æ ¼ä¸äº¤äº’é€»è¾‘ä¸ä¸€è‡´ï¼Œä»è€Œé€ æˆç”¨æˆ·ä½“éªŒçš„å‰²è£‚ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-5">å…­ã€å¸¸è§çš„å¾®å‰ç«¯æ–¹æ¡ˆ</h2>
<h3 data-id="heading-6">6.1 iframeæ–¹æ¡ˆ</h3>
<p>iframe å‡­å€Ÿå…¶åŸç”Ÿçš„ç¡¬éš”ç¦»ç‰¹æ€§ï¼Œè¢«è®¤ä¸ºæ˜¯å®ç°å¾®å‰ç«¯éš”ç¦»æœ€ç®€å•ç²—æš´çš„æ–¹æ¡ˆâ€”â€”æ ·å¼ã€JS äº’ä¸å¹²æ‰°ã€‚ä½†å®ƒç¡®å®å­˜åœ¨è®¸å¤šéš¾ä»¥å…‹æœçš„å±€é™æ€§ã€‚</p>
<p>å…¶ä¸­æœ€å…¸å‹çš„é—®é¢˜æœ‰ï¼š</p>
<ol>
<li>
<p>URL ä¸åŒæ­¥ï¼Œè·¯ç”±çŠ¶æ€ä¸¢å¤±</p>
<ul>
<li>å­åº”ç”¨urlçš„åˆ‡æ¢åŸºäºiframeçš„srcï¼Œå®ƒä¸ä¼šä¸ä½“ç°åœ¨æµè§ˆå™¨åœ°å€æ ï¼Œåé€€å‰è¿›æŒ‰é’®æ— æ³•ä½¿ç”¨</li>
<li>æµè§ˆå™¨åˆ·æ–° iframe url çŠ¶æ€ä¸¢å¤±</li>
</ul>
</li>
<li>
<p>UI ä¸åŒæ­¥ï¼ŒDOM ç»“æ„ä¸å…±äº«ï¼Œå¼¹çª—éƒ½å¼¹ä¸åˆ°ä¸­é—´</p>
<ul>
<li>æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼šä¸€ä¸ªä»…å å±å¹•1/4çš„ iframeï¼Œæƒ³è¦å¼¹å‡ºä¸€ä¸ªå…¨å±é®ç½©å±‚å¹¶å±…ä¸­çš„å¯¹è¯æ¡†ã€‚ç”±äº DOM éš”ç¦»ï¼Œè¿™ä¸ªå¼¹æ¡†ä¼šè¢«æ­»æ­»é™åˆ¶åœ¨ iframe çš„è¾¹æ¡†å†…ï¼Œæ ¹æœ¬æ— æ³•å®ç°å…¨å±€å±…ä¸­ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-7">6.2 qiankunæ–¹æ¡ˆ</h3>
<p>qiankun æ˜¯ç”±èš‚èšé‡‘æœå­µåŒ–çš„ä¸€ä¸ªå¾®å‰ç«¯å®ç°åº“ã€‚å®ƒåŸºäº single-spa æ‰©å±•ï¼Œæä¾›äº†å¾®å‰ç«¯æ‰€éœ€çš„æ ¸å¿ƒèƒ½åŠ›ï¼šåº”ç”¨åŠ è½½ã€åº”ç”¨éš”ç¦»ã€åº”ç”¨é€šä¿¡ç­‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e708a9bb04e4e928b8a82fc988999b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5Yac6IOW5aSn5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766478554&amp;x-signature=rWZ6m%2FjCfpYcvpSpyxZynbDHjHE%3D" alt="image.png" loading="lazy"/></p>
<p>å®ƒçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äº</p>
<ol>
<li>äº«æœ‰å…ˆå‘ä¼˜åŠ¿ï¼Œç¤¾åŒºæ´»è·ƒï¼Œæ–‡æ¡£å®Œå–„</li>
<li>å†ç»äº†å¤§é‡ä¼ä¸šçº§é¡¹ç›®çš„é”¤ç‚¼ï¼Œåœ¨æ˜“ç”¨æ€§ã€åŠŸèƒ½å®Œå¤‡æ€§ã€å¯é æ€§ä¹‹é—´æœ‰ç€ç»ä½³çš„å¹³è¡¡</li>
</ol>
<h3 data-id="heading-8">6.3 micro-appæ–¹æ¡ˆ</h3>
<p>micro-appæ˜¯ç”±äº¬ä¸œå‰ç«¯å›¢é˜Ÿæ¨å‡ºçš„ä¸€æ¬¾å¾®å‰ç«¯æ¡†æ¶ï¼Œå®ƒå€Ÿé‰´äº†WebComponentçš„æ€æƒ³ï¼Œé€šè¿‡jsæ²™ç®±ã€æ ·å¼éš”ç¦»ã€å…ƒç´ éš”ç¦»ã€è·¯ç”±éš”ç¦»æ¨¡æ‹Ÿå®ç°äº†ShadowDomçš„éš”ç¦»ç‰¹æ€§ï¼Œå¹¶ç»“åˆCustomElementå°†å¾®å‰ç«¯å°è£…æˆä¸€ä¸ªç±»WebComponentç»„ä»¶ï¼Œä»è€Œå®ç°å¾®å‰ç«¯çš„ç»„ä»¶åŒ–æ¸²æŸ“ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbac3795cae8443a99c4c61bc29de3d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5Yac6IOW5aSn5rW3:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766478554&amp;x-signature=C6RHCkUE033tXSpI7TWw6NavRpI%3D" alt="image.png" loading="lazy"/></p>
<p>å®ƒçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äº</p>
<ol>
<li>é«˜æ•ˆçš„éš”ç¦»å®ç°ï¼šå€Ÿé‰´WebComponentçš„åº”ç”¨éš”ç¦»æ–¹æ¡ˆï¼Œæ›´è´´è¿‘åŸç”Ÿï¼Œåœ¨èµ„æºåŠ è½½å’Œå¤„ç†æ•ˆç‡æ›´é«˜</li>
<li>æç®€çš„æ¥å…¥ä½“éªŒï¼šä¸€è¡Œä»£ç å³å¯æ¸²æŸ“ä¸€ä¸ªå¾®å‰ç«¯åº”ç”¨ã€‚</li>
</ol>
<h2 data-id="heading-9">ä¸ƒã€å­¦ä¹ èµ„æ–™</h2>
<h3 data-id="heading-10">7.1 å­¦ä¹ è·¯å¾„</h3>
<ol>
<li>
<p>äº†è§£å¾®å‰ç«¯çš„èƒŒæ™¯çŸ¥è¯†</p>
<ul>
<li>çŸ¥é“å¾®å‰ç«¯æ˜¯ä»€ä¹ˆï¼Œèƒ½å¤Ÿè§£å†³ä»€ä¹ˆé—®é¢˜ã€‚</li>
</ul>
</li>
<li>
<p>é€šè¯»å®˜æ–¹æ–‡æ¡£</p>
<ul>
<li>é€šè¿‡æ–‡æ¡£å¯¹å¾®å‰ç«¯æ¡†æ¶å»ºç«‹åˆæ­¥ç³»ç»Ÿçš„è®¤è¯†ã€‚</li>
</ul>
</li>
<li>
<p>è¯•ç”¨å¾®å‰ç«¯æ¡†æ¶</p>
<ul>
<li>ç»“åˆDemoå®è·µAPIï¼Œé€šè¿‡â€œç†è§£ã€å°è¯•ã€éªŒè¯ã€å†ç†è§£â€çš„å¾ªç¯è¿‡ç¨‹ï¼Œä¸æ–­åŠ æ·±å¯¹æŠ€æœ¯çš„æŒæ¡ã€‚</li>
</ul>
</li>
<li>
<p>æ·±å…¥åŸç†</p>
<ul>
<li>å€ŸåŠ©ç¤¾åŒºæ–‡ç« å’Œå¼€æºä»£ç ï¼Œåƒé€åº”ç”¨éš”ç¦»ã€åº”ç”¨é€šä¿¡ç­‰æ ¸å¿ƒæœºåˆ¶çš„å®ç°åŸç†ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-11">7.2 ç›¸å…³èµ„æ–™</h3>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fqiankun.umijs.org%2Fzh%2Fguide" target="_blank" title="https://qiankun.umijs.org/zh/guide" ref="nofollow noopener noreferrer">qiankunå®˜ç½‘</a></p>
<ul>
<li>å¸¸è§é—®é¢˜ï¼ˆå¿…è¯»ï¼‰</li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.yuque.com%2Fkuitos%2Fgky7yw" target="_blank" title="https://www.yuque.com/kuitos/gky7yw" ref="nofollow noopener noreferrer">qiankunæŠ€æœ¯åœ†æ¡Œ</a></p>
<ul>
<li>qiankunå¼€å‘å›¢é˜Ÿçš„å¾®å‰ç«¯ç³»åˆ—ç²¾åæ–‡ç« </li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgongshun%2Fqiankun-vue-demo" target="_blank" title="https://github.com/gongshun/qiankun-vue-demo" ref="nofollow noopener noreferrer">qiankun-vue-demo</a></p>
<ul>
<li>ç”¨<code>qiankun</code>æ¥å®ç°<code>vue</code>æŠ€æœ¯æ ˆçš„å‰ç«¯å¾®æœåŠ¡</li>
</ul>
</li>
<li>
<p><a href="https://juejin.cn/collection/6873383212496715783" target="_blank" title="https://juejin.cn/collection/6873383212496715783">æ˜é‡‘ç¤¾åŒºæ–‡ç« </a></p>
<ul>
<li>ä¸ªäººåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­æ”¶å½•çš„é«˜è´¨é‡æ–‡ç« </li>
</ul>
</li>
</ul>
<h2 data-id="heading-12">å…«ã€æ€»ç»“ä¸å¯„è¯­</h2>
<p>å¾®å‰ç«¯æ˜¯å°†å•ä½“å‰ç«¯åº”ç”¨æ‹†åˆ†ä¸ºç‹¬ç«‹å­åº”ç”¨çš„æ¶æ„æ¨¡å¼ï¼Œå…·å¤‡æŠ€æœ¯æ ˆæ— å…³ã€ç‹¬ç«‹å¼€å‘éƒ¨ç½²ç­‰ç‰¹æ€§ï¼Œæ—¨åœ¨è§£å†³å·¨å‹åº”ç”¨ç»´æŠ¤å›°éš¾ã€æŠ€æœ¯æ ˆè¿­ä»£å’Œå›¢é˜Ÿåä½œæ•ˆç‡ä½ç­‰é—®é¢˜ã€‚ä½†å®ƒä¹Ÿå¸¦æ¥æ€§èƒ½æŸè€—å’Œè¿ç»´å¤æ‚åº¦ç­‰æŒ‘æˆ˜ã€‚å¸¸è§æ–¹æ¡ˆåŒ…æ‹¬iframeã€qiankunå’Œmicro-appã€‚</p>
<p>å¾®å‰ç«¯åº•å±‚æœºåˆ¶å¤æ‚ï¼Œä½†å…¶å®ç°åº“çš„å­¦ä¹ æˆæœ¬å¾ˆä½ã€‚ä»¥qiankunä¸ºä¾‹ï¼Œå…¶APIæ€»å…±æ‰9ä¸ªï¼Œæˆ‘ä»¬ç»“åˆå®˜æ–¹æ–‡æ¡£ä¸ç¤ºä¾‹é¡¹ç›®å¾ˆå¿«å°±èƒ½å…¥é—¨ä¸Šæ‰‹ã€‚å¸Œæœ›æ„Ÿå…´è¶£çš„åŒå­¦ç§¯æå°è¯•ä¸åº”ç”¨ï¼Œè®©æˆ‘ä»¬äº’ç›¸å­¦ä¹ ã€å…±åŒåŠªåŠ›ã€å˜å¾—æ›´å¼ºï¼ŒåŠ æ²¹ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Go å®‰è£…æ’ä»¶æ›´æ¢å›½å†…é•œåƒ]]></title>    <link>https://juejin.cn/post/7584094504631779337</link>    <guid>https://juejin.cn/post/7584094504631779337</guid>    <pubDate>2025-12-16T08:03:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584094504631779337" data-draft-id="7584203412197179418" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Go å®‰è£…æ’ä»¶æ›´æ¢å›½å†…é•œåƒ"/> <meta itemprop="keywords" content="Go"/> <meta itemprop="datePublished" content="2025-12-16T08:03:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¡å°”ç‰¹æ–¯"/> <meta itemprop="url" content="https://juejin.cn/user/4450440831840909"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Go å®‰è£…æ’ä»¶æ›´æ¢å›½å†…é•œåƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4450440831840909/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¡å°”ç‰¹æ–¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:03:38.000Z" title="Tue Dec 16 2025 08:03:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åå°æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash">go install golang.org/x/tools/gopls@latest
</code></pre>
<p>ä½† <strong>Go é»˜è®¤ä¸€å®šä¼šè®¿é—®ï¼š</strong></p>
<pre><code class="hljs language-arduino" lang="arduino">https:<span class="hljs-comment">//proxy.golang.org</span>
</code></pre>
<p>è€Œå½“å‰ç½‘ç»œ <strong>æ²¡æœ‰è¢« Go è¯†åˆ«</strong> â†’ è¯·æ±‚è¶…æ—¶ â†’ æ‰€æœ‰å·¥å…·å®‰è£…å¤±è´¥ã€‚</p>
<hr/>
<h2 data-id="heading-0">âœ… æ–¹æ¡ˆä¸€ï¼ˆæ¨èï¼‰ï¼šæ­£ç¡®é…ç½® Go å›½å†…é•œåƒ</h2>
<h3 data-id="heading-1">1ï¸âƒ£ é…ç½® Go ä½¿ç”¨å›½å†…é•œåƒ</h3>
<p>åœ¨ç»ˆç«¯æ‰§è¡Œï¼ˆmacOSï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">go <span class="hljs-built_in">env</span> -w GOPROXY=https://goproxy.cn,direct
</code></pre>
<p>æˆ–è€…ï¼ˆä¸ƒç‰›ä»£ç†ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">go <span class="hljs-built_in">env</span> -w GOPROXY=https://goproxy.io,direct
</code></pre>
<p>ç„¶åéªŒè¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">go <span class="hljs-built_in">env</span> GOPROXY
</code></pre>
<p>çœ‹åˆ°ç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">https:<span class="hljs-comment">//goproxy.cn,direct</span>
</code></pre>
<p>è¯´æ˜æˆåŠŸ âœ…</p>
<hr/>
<h3 data-id="heading-2">2ï¸âƒ£ é‡æ–°è®© Cursor/VSCode å®‰è£…å·¥å…·</h3>
<p>é‡å¯ <code>Cursor/VSCode</code> æ‰“å¼€ä¸€ä¸ª <code>.go</code> æ–‡ä»¶ï¼Œå®ƒä¼šè‡ªåŠ¨é‡æ–°å°è¯•å®‰è£…ï¼š</p>
<ul>
<li>gopls</li>
<li>staticcheck</li>
<li>goimports</li>
<li>dlv</li>
<li>gotests</li>
<li>impl</li>
</ul>
<p>ğŸ‘‰ <strong>è¿™ä¸€æ­¥é€šå¸¸å°±èƒ½ç›´æ¥æˆåŠŸ</strong></p>
<hr/>
<h2 data-id="heading-3">âœ… æ–¹æ¡ˆäºŒï¼šè‡ªå·±æ‰‹åŠ¨è£…ï¼Œå®Œå…¨å¯ä»¥ ğŸ‘</h2>
<p>ä¸‹é¢æ˜¯ <strong>Cursor / vscode-go é»˜è®¤ä¼šè£…çš„æ‰€æœ‰ Go å·¥å…·æ¸…å•</strong><br/>
å¯ä»¥ <strong>ä¸€æ¬¡æ€§æ‰‹åŠ¨è£…å®Œ</strong></p>
<hr/>
<h3 data-id="heading-4">ğŸ“¦ Cursor / vscode-go å¸¸ç”¨å·¥å…·å®Œæ•´åˆ—è¡¨</h3>
<pre><code class="hljs language-bash" lang="bash">go install golang.org/x/tools/gopls@latest
go install golang.org/x/tools/cmd/goimports@latest
go install honnef.co/go/tools/cmd/staticcheck@latest
go install github.com/go-delve/delve/cmd/dlv@latest
go install github.com/cweill/gotests/gotests@latest
go install github.com/josharian/impl@latest
go install github.com/traefik/yaegi/cmd/yaegi@latest
</code></pre>
<blockquote>
<p>âš ï¸ å‰æï¼š<strong>ç½‘ç»œå·²ç»èƒ½è®¿é—®</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-5">ğŸ“ å®‰è£…åˆ°å“ªé‡Œäº†ï¼Ÿ</h3>
<p>æ—¥å¿—é‡Œå·²ç»è¯´æ˜ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Installing tools at /Users/dengzemiao/go/bin
</code></pre>
<p>ç¡®è®¤ PATH åŒ…å«å®ƒï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$PATH</span> | grep go/bin
</code></pre>
<p>å¦‚æœæ²¡æœ‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">'export PATH=$PATH:$HOME/go/bin'</span> &gt;&gt; ~/.zshrc
<span class="hljs-built_in">source</span> ~/.zshrc
</code></pre>
<hr/>
<h3 data-id="heading-6">4ï¸âƒ£ éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ</h3>
<pre><code class="hljs">gopls version
goimports -h
staticcheck -h
dlv version
</code></pre>
<p>åªè¦ <strong>æœ‰è¾“å‡ºä¸æŠ¥é”™ = æˆåŠŸ</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‰‹æ’•React18æºç ç³»åˆ— - Event-Loopæ¨¡å‹]]></title>    <link>https://juejin.cn/post/7584061465398689833</link>    <guid>https://juejin.cn/post/7584061465398689833</guid>    <pubDate>2025-12-16T08:01:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584061465398689833" data-draft-id="7584061465398640681" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‰‹æ’•React18æºç ç³»åˆ— - Event-Loopæ¨¡å‹"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,React.js"/> <meta itemprop="datePublished" content="2025-12-16T08:01:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çƒŸè¥¿"/> <meta itemprop="url" content="https://juejin.cn/user/776713996087847"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‰‹æ’•React18æºç ç³»åˆ— - Event-Loopæ¨¡å‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/776713996087847/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çƒŸè¥¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:01:19.000Z" title="Tue Dec 16 2025 08:01:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ¬ç³»åˆ—ä»å¤´æ‰‹æŠŠæ‰‹å¸¦ä½ å­¦ä¹ reactæºç ã€‚ä½†æ˜¯åœ¨æ·±å…¥Reactæ¶æ„å‰ï¼Œä½ å¿…é¡»å…ˆäº†è§£ä¸€ä¸ªå…³é”®æ¦‚å¿µï¼Œ<strong>Event Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰æ¨¡å‹</strong>ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¦å…³å¿ƒ Event Loopï¼Ÿå› ä¸º React çš„ Fiber æ¶æ„æ­£æ˜¯åŸºäºå®ƒçš„â€œåˆ†ç‰‡æ‰§è¡Œâ€èƒ½åŠ›æ„å»ºçš„ã€‚</p>
<ul>
<li>æŠŠåºå¤§çš„æ›´æ–°ä»»åŠ¡æ‹†æˆå°å•å…ƒï¼ˆFiber èŠ‚ç‚¹ï¼‰ã€‚</li>
<li>åœ¨æ¯ä¸ªå®ä»»åŠ¡é—´éš™ï¼ˆæ¯”å¦‚ä¸€æ¬¡æ¸²æŸ“åï¼‰ï¼Œé€šè¿‡ requestIdleCallback æˆ– scheduler æ’å…¥é«˜ä¼˜å…ˆçº§å¾®ä»»åŠ¡æˆ–å®ä»»åŠ¡ã€‚</li>
<li>å¦‚æœç”¨æˆ·æœ‰äº¤äº’ï¼ˆæ¯”å¦‚ç‚¹å‡»ï¼‰ï¼Œæµè§ˆå™¨ä¼šä¼˜å…ˆå¤„ç† UI å®ä»»åŠ¡ï¼ŒReact ä¸»åŠ¨â€œè®©å‡ºä¸»çº¿ç¨‹â€ï¼Œå®ç°å¯ä¸­æ–­ã€å¯æ¢å¤ã€é«˜å“åº”çš„å¹¶å‘æ›´æ–°ã€‚</li>
</ul>
<blockquote>
<p>æ¢å¥è¯è¯´ï¼š<strong>æ²¡æœ‰ Event Loopï¼Œå°±æ²¡æœ‰ Concurrent Modeï¼ˆå¹¶å‘æ¨¡å¼ï¼‰</strong> ã€‚è¿™é‡Œè¯´çš„å¹¶å‘å…¶å®æ˜¯ â€œ<strong>å¯ä¸­æ–­çš„æ¸²æŸ“ï¼ˆInterruptible Renderingï¼‰</strong>â€ + â€œ<strong>æ—¶é—´åˆ‡ç‰‡ï¼ˆTime Slicingï¼‰</strong>â€ ã€‚å®ƒæ˜¯ä¸€ç§ é€»è¾‘ä¸Šçš„å¹¶å‘ï¼Œä¹‹å‰æœ‰ä¸ªé¢è¯•å®˜å’Œæˆ‘çŠŸè¿‡è¿™ä¸ªäº‹æƒ…ï¼Œæ‰€ä»¥ç‰¹åœ°çš„è¯´æ˜ä¸€ä¸‹ã€‚</p>
</blockquote>
<p>å¦‚æœä½ å·²ç»éå¸¸ç†Ÿæ‚‰äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡æœ¬ç« â€”â€”å› ä¸ºè¿™é‡Œä¸æ¶‰åŠä»»ä½• React æºç ã€‚
ä½†å¦‚æœä½ åªæ˜¯å¬è¯´è¿‡è¿™ä¸ªæ¦‚å¿µï¼Œæˆ–è€…è„‘å­é‡Œè¿˜æ˜¯ä¸€å †ç¢ç‰‡åŒ–çš„ç†è§£ï¼Œé‚£è¿™ç¯‡æ–‡ç« å°±æ˜¯ä¸ºä½ å‡†å¤‡çš„ã€‚
ä¸ç®¡æ˜¯ä¸ºäº†é¢è¯•ï¼Œè¿˜æ˜¯ä¸ºäº†çœŸæ­£ææ‡‚ React çš„åº•å±‚åŸç†ï¼Œå­¦å®Œè¿™ç¯‡ï¼Œä½ éƒ½èƒ½æŠŠè¿™äº›ç¢ç‰‡æ‹¼æˆä¸€å¼ å®Œæ•´çš„æ‹¼å›¾ã€‚å¯¹äº†ï¼Œä½ è¿˜éœ€è¦äº†è§£ä¸€ä¸ªå‰ç½®æ¦‚å¿µï¼šPromiseã€‚
åˆ«æ‹…å¿ƒï¼Œåªè¦ä½ ç”¨ fetch æˆ– axios è°ƒç”¨è¿‡æ¥å£ï¼Œå°±ä¸€å®šæ¥è§¦è¿‡ Promiseã€‚
æˆ‘ä»¬åªéœ€è¦çŸ¥é“å®ƒçš„åŸºæœ¬æœºåˆ¶å°±å¤Ÿäº†ã€‚æœ¬æ–‡ä¸»è¦ç”¨å®ƒæ¥æ¼”ç¤ºå¾®ä»»åŠ¡é˜Ÿåˆ—çš„è¡Œä¸ºï¼Œå› ä¸ºæ²¡æœ‰æ¯” Promise æ›´ç›´è§‚çš„å¾®ä»»åŠ¡ç¤ºä¾‹äº†ã€‚</p>
<h2 data-id="heading-1">å¼€å§‹</h2>
<p>ä¸€å¼€å§‹æˆ‘å¬åˆ°è¿™ä¸ªä¸œè¥¿çš„æ—¶å€™ï¼Œæˆ‘é©¬ä¸Šç™¾åº¦äº†ä¸€ä¸‹å•¥æ˜¯<strong>äº‹ä»¶å¾ªç¯</strong>ï¼Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2704d4a66eb34b74af52cfac8aab2a92~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Of6KW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766476879&amp;x-signature=Qo8PPRNxw0zxmI3tQWngoaOhtug%3D" alt="image.png" loading="lazy"/></p>
<p>ä»¥ä¸Šå°±æ˜¯æˆ‘ç™¾åº¦åˆ°çš„ç»“æœï¼Œâ€œéº»äº†â€ï¼Œä¸€å¥äººè¯éƒ½æ²¡æœ‰ï¼ä¸€æ°”ä¹‹ä¸‹ï¼Œæˆ‘ç›´æ¥å…³æ‰äº†æµè§ˆå™¨ã€‚
ä½†æˆ‘å†·é™äº†ä¸€ä¼šå„¿ï¼Œè®¤çœŸåœ°æ€è€ƒäº†ä¸€ä¸‹ï¼šä¸å¯¹ï¼ä¸èƒ½å…³æµè§ˆå™¨å•Šã€‚å…³äº†å®ƒï¼Œæˆ‘è¿˜æ€ä¹ˆå­¦äº‹ä»¶å¾ªç¯ï¼Ÿ
è¯´åˆ°è¿™é‡Œï¼Œä½ å¯èƒ½ä¼šé—®ï¼šäº‹ä»¶å¾ªç¯å’Œæµè§ˆå™¨åˆ°åº•æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿå®ƒä¸å°±æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µå—ï¼Ÿ
å…¶å®ä¸ç„¶ï¼Œäº‹ä»¶å¾ªç¯å¹¶ä¸æ˜¯æŠ½è±¡çš„ï¼Œè€Œæ˜¯ä¸€ä¸ªå®å®åœ¨åœ¨ç”±æµè§ˆå™¨æä¾›çš„æœºåˆ¶ã€‚</p>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavascriptä»£ç <strong>é€šå¸¸</strong>æ˜¯æ‰§è¡Œåœ¨æµè§ˆå™¨ç«¯çš„(æˆ‘è¯´çš„æ˜¯é€šå¸¸)ï¼Œæˆ‘ä»¬åªè®¨è®ºæµè§ˆå™¨çš„æ‰§è¡Œç¯å¢ƒã€‚è¨€å½’æ­£ä¼ ï¼Œä½ éœ€è¦åœ¨è„‘æµ·é‡Œæœ‰3ä¸ªæ¦‚å¿µï¼Œ<strong>ä¸»çº¿ç¨‹</strong>ã€<strong>å®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMacro Task Queueï¼‰</strong> å’Œ <strong>å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMicrotask Queueï¼‰</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c51cd493a7294ee982e97a4b7f8506b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Of6KW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766476879&amp;x-signature=V8olhZ8L%2BfhUHZ5duKfIeS8OyyA%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸»çº¿ç¨‹</h2>
<p><strong>æ¯”æ–¹ï¼šç™»æœºå£çš„æ£€ç¥¨å‘˜ï¼Œå°±æ˜¯æ‹¿ç€é‚£ä¸ªæ‰«ç æªæ‰«ç çš„é‚£ä¸ªäººï¼Œåªæœ‰ä¸€ä¸ªæ£€ç¥¨å‘˜çš„æƒ…å†µ</strong></p>
<p>ä¸»çº¿ç¨‹ï¼Œå°±æ˜¯æµè§ˆå™¨é‡Œå”¯ä¸€æ‰§è¡Œ JavaScript ä»£ç çš„çº¿ç¨‹ã€‚JavaScript çš„æ‰§è¡Œæ˜¯è‡ªä¸Šè€Œä¸‹çš„ã€‚å½“é‡åˆ°å¼‚æ­¥æ“ä½œæ—¶ï¼Œå¼•æ“ä¸ä¼šé˜»å¡ç­‰å¾…ï¼Œè€Œæ˜¯å°†å¯¹åº”çš„å›è°ƒå‡½æ•°æ”¾å…¥å®ä»»åŠ¡é˜Ÿåˆ—æˆ–å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œç»§ç»­æ‰§è¡Œåç»­çš„åŒæ­¥ä»£ç ã€‚ç­‰åˆ°å½“å‰ä¸»çº¿ç¨‹çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œå°±ä¼šåœ¨äº‹ä»¶å¾ªç¯é‡Œé¢å–å‡ºå¯¹åº”çš„ä»»åŠ¡ï¼Œç„¶ååœ¨ä¸»çº¿ç¨‹ä¸­ç»§ç»­æ‰§è¡Œã€‚</p>
<h2 data-id="heading-3">å®é˜Ÿåˆ—ï¼ˆMacro Task Queueï¼‰</h2>
<p><strong>æ¯”æ–¹ï¼šç»æµèˆ±æ£€ç¥¨å£çš„é˜Ÿåˆ—</strong></p>
<p>ä¸»çº¿ç¨‹ç”¨æ¥å­˜æ”¾<strong>å¼‚æ­¥å›è°ƒå‡½æ•°</strong>çš„<strong>ç¬¬ä¸€ä¸ªå¾…åŠæ¸…å•</strong>ï¼Œä¸»çº¿ç¨‹å¹²å®Œæ‰‹å¤´çš„äº‹åï¼Œå°±ä»è¿™ä¸ªé˜Ÿåˆ—æ‹¿æœ€å‰é¢çš„ä¸€ä¸ªä»»åŠ¡å‡ºæ¥æ‰§è¡Œï¼Œæ‰§è¡Œå®Œå†æ‹¿ä¸‹ä¸€ä¸ªï¼Œä¸€æ¬¡åªæ‹¿ä¸€ä¸ªï¼ŒæŒ‰é¡ºåºæ¥ã€‚æ˜¯çš„ï¼Œå°±è¿™ä¹ˆç®€å•ã€‚</p>
<p>å¸¸è§çš„å®ä»»åŠ¡ï¼š<code>setTimeout</code>ã€<code>setInterval</code>ã€<code>setImmediate</code>ï¼ˆNodeï¼‰ã€I/Oã€UI æ¸²æŸ“ç­‰</p>
<blockquote>
<p>æˆ‘çœ‹åˆ°å¾ˆå¤šæ–‡ç« ä¸­æ­¦æ–­åœ°è®¤ä¸ºï¼šâ€œç°åœ¨æ²¡æœ‰å®é˜Ÿåˆ—è¿™ä¸ªæ¦‚å¿µäº†ã€‚â€
åœ¨æˆ‘çœ‹æ¥ï¼Œè¿™æ˜¯å‰ç«¯åœˆçš„ä¸€ä¸ªâ€œè¯¯è§£â€ã€‚ä»–ä»¬çœ‹åˆ°æœ€æ–°çš„ WHATWG HTML æ ‡å‡† ä¸­æ²¡æœ‰ â€œmacro taskâ€ è¿™ä¸€æœ¯è¯­ï¼Œå°±ä»¥ä¸ºè¿™ä¸ªæ¦‚å¿µè¢«åºŸå¼ƒäº†ã€‚
ä½†äº‹å®æ˜¯ï¼šè§„èŒƒä¸­ä»æ¥å°±æ²¡æœ‰æ­£å¼å®šä¹‰è¿‡ â€œmacro taskâ€ã€‚â€œå®ä»»åŠ¡â€ æ˜¯ç¤¾åŒºä¸ºäº†ä¸â€œå¾®ä»»åŠ¡â€ï¼ˆmicrotaskï¼‰å¯¹æ¯”è€Œçº¦å®šä¿—æˆçš„è¯´æ³•ã€‚
åªä¸è¿‡ï¼Œç°ä»£è§„èŒƒå¯¹å¼‚æ­¥ä»»åŠ¡çš„åˆ†ç±»å’Œè°ƒåº¦æœºåˆ¶æœ‰äº†æ›´ç²¾ç»†çš„æè¿°ã€‚
åœ¨å¹¿ä¹‰çš„ JavaScript å¼‚æ­¥æ¨¡å‹ä¸­ï¼Œâ€œå®ä»»åŠ¡â€è¿™ä¸€è¯´æ³•ä¾ç„¶å¹¿æ³›ä½¿ç”¨ï¼›
è€Œåœ¨ HTML æ ‡å‡†ä¸­ï¼Œæµè§ˆå™¨é€šè¿‡å¤šä¸ªç‰¹å®šç±»å‹çš„ä»»åŠ¡é˜Ÿåˆ—ï¼ˆå¦‚å»¶æ—¶é˜Ÿåˆ—ã€ç”¨æˆ·äº¤äº’é˜Ÿåˆ—ç­‰ï¼‰æ¥ç®¡ç†è¿™äº›ä»»åŠ¡ï¼Œä»è€Œæ›´ç²¾ç»†åœ°æ§åˆ¶ä¼˜å…ˆçº§ï¼Œä¿éšœç”¨æˆ·äº¤äº’çš„æµç•…æ€§ã€‚</p>
</blockquote>
<h2 data-id="heading-4">å¾®é˜Ÿåˆ—ï¼ˆMicrotask Queueï¼‰</h2>
<p><strong>æ¯”æ–¹ï¼šå¤´ç­‰èˆ±æ£€ç¥¨å£çš„é˜Ÿåˆ—ï¼Œåè¿‡é£æœºçš„éƒ½çŸ¥é“ï¼Œåªè¦å¤´ç­‰èˆ±é˜Ÿä¼æœ‰ä¸€ä¸ªäººåœ¨æ’é˜Ÿï¼Œé‚£ä¹ˆæ£€ç¥¨å‘˜å°±ä¼šæŠŠå½“å‰ç»æµèˆ±æ­£åœ¨æ£€çš„ç¥¨æ£€å®Œã€‚ç„¶åç«‹åˆ»æ¥å¤´ç­‰èˆ±é˜Ÿä¼æ£€ç¥¨ï¼Œç„¶åç›´åˆ°æŠŠè¿™ä¸ªé˜Ÿä¼æ¸…ç©ºï¼Œæ‰ä¼šå›åˆ°ç»æµèˆ±é˜Ÿåˆ—ã€‚</strong></p>
<p>ä¸»çº¿ç¨‹ç”¨æ¥å­˜æ”¾<strong>å¼‚æ­¥å›è°ƒå‡½æ•°</strong>çš„<strong>ç¬¬äºŒä¸ªå¾…åŠæ¸…å•</strong>ï¼Œåªä¸è¿‡ï¼Œè¿™ä¸ªé˜Ÿåˆ—æ˜¯ä¸ª<strong>VIPé˜Ÿåˆ—</strong>ï¼Œæœ‰äº›ç‰¹æƒã€‚å½“ä¸»çº¿æ‰§è¡Œå®Œå®é˜Ÿåˆ—é‡Œé¢å½“å‰çš„å®ä»»åŠ¡çš„æ—¶å€™ï¼Œå°±ç¨‹ç«‹åˆ»ã€é©¬ä¸Šã€ä¸€å£æ°”æŠŠå¾®é˜Ÿåˆ—é‡Œæ‰€æœ‰çš„ä»»åŠ¡å…¨æ‰§è¡Œå®Œæ¯•ã€‚è¯´ç™½äº†å°±æ˜¯èƒ½æ’é˜Ÿã€‚</p>
<p>å¸¸è§çš„å¾®ä»»åŠ¡ï¼š<code>Promise.then/catch/finally</code>ã€<code>queueMicrotask</code>ã€<code>MutationObserver</code>ï¼ˆæµè§ˆå™¨ï¼‰ã€<code>process.nextTick</code>ï¼ˆNodeï¼Œä¼˜å…ˆçº§æ›´é«˜ï¼‰</p>
<h2 data-id="heading-5">å¼€å§‹æ‰§è¡ŒJSè„šæœ¬</h2>
<p>è¿™ä¸ªæ¦‚å¿µæˆ‘çœ‹äº†å¾ˆå¤šçš„æ–‡ç« ï¼Œæ²¡æœ‰ä¸€ä¸ªèƒ½è§£é‡Šçš„é€šä¿—æ˜“æ‡‚ï¼Œå„ç§æœ¯è¯­ï¼Œæ¦‚å¿µã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œæˆ‘ä»¬å†™çš„JSä»£ç ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(&amp;#<span class="hljs-number">34</span>;hello word&amp;#<span class="hljs-number">34</span>;)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(&amp;#<span class="hljs-number">34</span>;hello word1&amp;#<span class="hljs-number">34</span>;)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(&amp;#<span class="hljs-number">34</span>;hello word2&amp;#<span class="hljs-number">34</span>;)
</code></pre>
<p>è¿™ä¸ªä»£ç å°±æ˜¯ç¬¬ä¸€ä¸ªè„šæœ¬ä»£ç ï¼Œå°±æ˜¯æˆ‘ä»¬å®å®åœ¨åœ¨å†™åœ¨JSæ–‡ä»¶é‡Œé¢çš„ä»£ç ã€‚å¼€ç¨‹åºå¼€å§‹æ‰§è¡Œçš„æ—¶å€™ï¼Œå°±æŠŠè¿™3è¡Œä»£ç ï¼Œæ”¾åœ¨äº†å®é˜Ÿåˆ—ä¸­ï¼Œç„¶åè¿™ä¸‰è¡Œä»£ç å°±æ˜¯ç¬¬ä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ‰€ä»¥æ€»ç»“ä¸€ä¸‹ä¸‰ç‚¹ï¼</p>
<ul>
<li>ç¨‹åºå¯åŠ¨ = æ‰§è¡Œç¬¬ä¸€ä¸ªå®ä»»åŠ¡</li>
<li>å¾®ä»»åŠ¡åªèƒ½æ˜¯â€œæ‰§è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„å‰¯äº§å“â€</li>
<li>æ‰€ä»¥ï¼Œæ°¸è¿œä¸å¯èƒ½ä¸€ä¸Šæ¥å°±è·‘å¾®ä»»åŠ¡</li>
</ul>
<h2 data-id="heading-6">å¯è§†åŒ–è¿™ä¸¤ä¸ªé˜Ÿåˆ—</h2>
<p>é€šè¿‡ä»£ç çš„æ–¹å¼ç›´è§‚çš„æ„Ÿå— -&gt; <strong>MicroTask</strong> | <strong>MacroTask</strong></p>
<h3 data-id="heading-7">1.æ‰§è¡Œè„šæœ¬ä¸­åªå†™äº†å®ä»»åŠ¡æ³¨å†Œ</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ä¸»çº¿å¼€å§‹)

<span class="hljs-comment">// å®ä»»åŠ¡ 1 (ç§¯å‹åœ¨åé¢)</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®1æ‰§è¡Œ'</span>), <span class="hljs-number">0</span>);

<span class="hljs-comment">// å®ä»»åŠ¡ 2 (ç§¯å‹åœ¨åé¢)</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">console</span>(<span class="hljs-string">'å®2æ‰§è¡Œ'</span>), <span class="hljs-number">0</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ä¸»çº¿ç»“æŸ)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45faa98795b44827a5447a93866384c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Of6KW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766476879&amp;x-signature=TcR5%2FRRSSSKiQXfO5OZ%2BueSlNNU%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">2.æ‰§è¡Œè„šæœ¬ä¸­åªå†™äº†å¾®ä»»åŠ¡æ³¨å†Œ</h3>
<p>æ­¤æ—¶åªæœ‰å¾®é˜Ÿåˆ—æœ‰ä»»åŠ¡<strong>Micro=[å¾®1ï¼Œå¾®2]</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ä¸»çº¿å¼€å§‹)

<span class="hljs-comment">// å¾®ä»»åŠ¡ 1 (ç§¯å‹åœ¨åé¢)</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¾®1æ‰§è¡Œ'</span>)})

<span class="hljs-comment">// å¾®ä»»åŠ¡ 2 (ç§¯å‹åœ¨åé¢)</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¾®2æ‰§è¡Œ'</span>)})

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ä¸»çº¿ç»“æŸ)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d84f6c15f4c8401b800c0f486db73965~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Of6KW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766476879&amp;x-signature=1%2BKqQBe1zZb4GrKaixPVWfR9D1s%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-9">3.æ‰§è¡Œè„šæœ¬ä¸­å†™äº†å®ä»»åŠ¡æ³¨å†ŒåŒæ—¶å†™å†™äº†å¾®ä»»åŠ¡æ³¨å†Œ</h3>
<p>æ­¤æ—¶ä¸¤ä¸ªé˜Ÿåˆ—ç°åœ¨éƒ½æœ‰äº†ä»»åŠ¡<strong>Micro=[å¾®1]</strong> / <strong>Macro=[å®1]</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ä¸»çº¿å¼€å§‹)
<span class="hljs-comment">// å®ä»»åŠ¡ 1</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®1'</span>), <span class="hljs-number">0</span>);
<span class="hljs-comment">// å¾®ä»»åŠ¡ 1</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¾®1æ‰§è¡Œ'</span>)})

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ä¸»çº¿ç»“æŸ)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4a9502f15b124e4297c1027d0631f1e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Of6KW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766476879&amp;x-signature=qOgQo8Kdb5HX95JYdd8UXScRM1Q%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-10">4.æ‰§è¡Œè„šæœ¬ä¸­å†™äº†å®ä»»åŠ¡ä½†å…¶ä¸­åŒ…å«äº†å¾®ä»»åŠ¡</h3>
<p>æ­¤æ—¶åªæœ‰ä¸€ä¸ªå®é˜Ÿåˆ—æœ‰äº†ä»»åŠ¡<strong>Macro=[å®1]</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ä¸»çº¿å¼€å§‹)
<span class="hljs-comment">// å®ä»»åŠ¡ 1</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// å¾®ä»»åŠ¡ 1</span>
    <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¾®1æ‰§è¡Œ'</span>))
}, <span class="hljs-number">0</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ä¸»çº¿ç»“æŸ)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01117c2607874f948096be38ec00f24b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Of6KW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766476879&amp;x-signature=uCpuA84HVHqvNQp3WmXLFJyy2ik%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-11">5.æ‰§è¡Œè„šæœ¬ä¸­å†™äº†å¾®ä»»åŠ¡ä½†å…¶ä¸­åŒ…å«äº†å®ä»»åŠ¡</h3>
<p>æ­¤æ—¶åªæœ‰ä¸€ä¸ªå¾®é˜Ÿåˆ—æœ‰äº†ä»»åŠ¡<strong>Micro=[å¾®1]</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ä¸»çº¿å¼€å§‹)
<span class="hljs-comment">// å®ä»»åŠ¡ 1</span>
<span class="hljs-keyword">const</span> A = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®ä»»åŠ¡(2s)'</span>); 
        <span class="hljs-title function_">r</span>(<span class="hljs-string">'success1'</span>)
    }, <span class="hljs-number">2000</span>)
})

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ä¸»çº¿ç»“æŸ)
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb68d97407484dbda3bb2bf14c7d272d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54Of6KW_:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766476879&amp;x-signature=nHLw0kMnnGIQbuMueKne22IRSTU%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æŠŠæµè§ˆå™¨ä¸­çš„ äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰æ¨¡å‹ æ‹†è§£æˆäº†ä¸‰ä¸ªæ ¸å¿ƒè§’è‰²ï¼š</p>
<ul>
<li>ä¸»çº¿ç¨‹ï¼šå”¯ä¸€çš„ JavaScript æ‰§è¡Œé€šé“ï¼Œåƒç™»æœºå£é‚£ä¸ªå­¤ç‹¬ä½†é«˜æ•ˆçš„æ£€ç¥¨å‘˜ï¼›</li>
<li>å®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMacro Task Queueï¼‰ï¼šæ™®é€šä¹˜å®¢æ’é˜ŸåŒºï¼Œä»»åŠ¡æŒ‰é¡ºåºä¸€ä¸ªä¸ªæ‰§è¡Œï¼›</li>
<li>å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆMicrotask Queueï¼‰ï¼šå¤´ç­‰èˆ± VIP é€šé“ï¼Œä¸€æ—¦æœ‰ä»»åŠ¡ï¼Œä¸»çº¿ç¨‹å¿…é¡»ç«‹åˆ»æ¸…ç©ºæ•´ä¸ªé˜Ÿåˆ—æ‰èƒ½å¹²åˆ«çš„ã€‚</li>
</ul>
<p>ç°åœ¨ï¼Œå½“ä½ å†çœ‹åˆ°æ»¡å±çš„ <code>setTimeout</code> å’Œ <code>Promise.then</code>ï¼Œæ˜¯ä¸æ˜¯è„‘å­é‡Œè‡ªåŠ¨æµ®ç°å‡ºä¸¤ä¸ªé˜Ÿä¼åœ¨ç™»æœºå£æ’é˜Ÿçš„ç”»é¢äº†ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç°ä»£webpack/react/typescript/pnpmé¡¹ç›®æ¨¡æ¿ï¼Œä»é›¶åˆ°ä¸€æ­å»ºwebpacké¡¹ç›®]]></title>    <link>https://juejin.cn/post/7584059298696626217</link>    <guid>https://juejin.cn/post/7584059298696626217</guid>    <pubDate>2025-12-16T08:22:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584059298696626217" data-draft-id="7584203412197474330" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç°ä»£webpack/react/typescript/pnpmé¡¹ç›®æ¨¡æ¿ï¼Œä»é›¶åˆ°ä¸€æ­å»ºwebpacké¡¹ç›®"/> <meta itemprop="keywords" content="Webpack,å‰ç«¯å·¥ç¨‹åŒ–"/> <meta itemprop="datePublished" content="2025-12-16T08:22:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†¬é˜³æ˜¥æ™–"/> <meta itemprop="url" content="https://juejin.cn/user/4398478256780440"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç°ä»£webpack/react/typescript/pnpmé¡¹ç›®æ¨¡æ¿ï¼Œä»é›¶åˆ°ä¸€æ­å»ºwebpacké¡¹ç›®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4398478256780440/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†¬é˜³æ˜¥æ™–
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:22:16.000Z" title="Tue Dec 16 2025 08:22:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¡¹ç›®æ¨¡æ¿</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAvailableForTheWorld%2Fwebpack-react-template" target="_blank" title="https://github.com/AvailableForTheWorld/webpack-react-template" ref="nofollow noopener noreferrer">æ¨¡æ¿åœ°å€</a>
å¦‚æœæ€¥ç”¨ï¼Œç›´æ¥ä½¿ç”¨å½“å‰æ¨¡æ¿å³å¯ã€‚ç‚¹å‡»å³ä¸Šè§’Use This Templateå³å¯åˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ã€‚</p>
<h2 data-id="heading-1">èƒŒæ™¯</h2>
<p>å½“æˆ‘æ¯æ¯åˆ›å»ºä¸€ä¸ªæ–°çš„webpacké¡¹ç›®æ—¶ï¼Œæ€»æ˜¯éœ€è¦ç»è¿‡ç¹ççš„webpacké…ç½®æ¥å®Œæˆé¡¹ç›®çš„initã€‚å¦‚æœä»ç½‘ç»œä¸Šæœå¯»å¿«é€Ÿçš„setupæ€»ä¼šé‡åˆ°å„ç§å„æ ·çš„é—®é¢˜ï¼ˆç”±äºåŒ…çš„ç‰ˆæœ¬æœ‰æ›´æ–°ï¼Œæœ‰äº›é…ç½®å·²ç»åºŸå¼ƒæ‰äº†ï¼‰æ‰€æœ‰æˆ‘å†³å®šæ­å»ºè‡ªå·±çš„webpacké…ç½®æ¨¡æ¿ã€‚</p>
<h2 data-id="heading-2">æ­å»ºæ­¥éª¤</h2>
<h3 data-id="heading-3">1. pnpm å¼€å¯webpacké¡¹ç›®</h3>
<h4 data-id="heading-4">1.1 ç”Ÿæˆpackage.json</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm init
</code></pre>
<h4 data-id="heading-5">1.2 å¼•å…¥webpack</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add -D webpack webpack-cli webpack-dev-server
</code></pre>
<h4 data-id="heading-6">1.3 å¼•å…¥typescript</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add -D typescript ts-node @types/node
</code></pre>
<h4 data-id="heading-7">1.4 å¼•å…¥react</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add react react-dom
</code></pre>
<pre><code class="hljs language-bash" lang="bash">pnpm add -D @types/react @types/react-dom
</code></pre>
<h3 data-id="heading-8">2. åˆå§‹åŒ–reactä»£ç </h3>
<h4 data-id="heading-9">2.1 åˆ›å»ºsrc/app.tsx</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-title function_">App</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello World<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">App</span>
</code></pre>
<h4 data-id="heading-10">2.2 åˆ›å»ºsrc/index.tsx</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { createRoot } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom/client'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./app'</span>

<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>)!).<span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>)
</code></pre>
<h3 data-id="heading-11">3. webpacké…ç½®</h3>
<h4 data-id="heading-12">3.1 åˆ›å»ºwebpack.config.ts</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>
<span class="hljs-keyword">import</span> { fileURLToPath } <span class="hljs-keyword">from</span> <span class="hljs-string">'url'</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">Configuration</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'webpack'</span>

<span class="hljs-keyword">const</span> rootDir = path.<span class="hljs-title function_">dirname</span>(<span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>))

<span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">Configuration</span> = {
    <span class="hljs-attr">entry</span>: <span class="hljs-string">'./src/index.tsx'</span>,
    <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(rootDir, <span class="hljs-string">'dist'</span>),
        <span class="hljs-attr">filename</span>: <span class="hljs-string">'[name].[contenthash].js'</span>
    },
    <span class="hljs-attr">resolve</span>: {
        <span class="hljs-attr">extensions</span>: [<span class="hljs-string">'.ts'</span>, <span class="hljs-string">'.tsx'</span>, <span class="hljs-string">'.js'</span>, <span class="hljs-string">'.jsx'</span>]
    },
    <span class="hljs-attr">devtool</span>: <span class="hljs-string">'source-map'</span>,
    <span class="hljs-attr">module</span>: {},
    <span class="hljs-attr">mode</span>: <span class="hljs-string">'development'</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> config
</code></pre>
<h4 data-id="heading-13">3.2 è®¾ç½®webpackæ’ä»¶</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add -D html-webpack-plugin clean-webpack-plugin
</code></pre>
<p>åœ¨publicä¸‹åˆ›å»ºindex.html</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!doctype <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Webpack React Template<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"root"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>webpack è¡¥å……æ’ä»¶é…ç½®ä»¥åŠdevServeré…ç½®</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>
<span class="hljs-keyword">import</span> { fileURLToPath } <span class="hljs-keyword">from</span> <span class="hljs-string">'url'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">HtmlWebpackPlugin</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'html-webpack-plugin'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CleanWebpackPlugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'clean-webpack-plugin'</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">Configuration</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'webpack'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'webpack-dev-server'</span>

<span class="hljs-keyword">const</span> rootDir = path.<span class="hljs-title function_">dirname</span>(<span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>))

<span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">Configuration</span> = {
    <span class="hljs-attr">entry</span>: <span class="hljs-string">'./src/index.tsx'</span>,
    <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(rootDir, <span class="hljs-string">'dist'</span>),
        <span class="hljs-attr">filename</span>: <span class="hljs-string">'[name].[contenthash].js'</span>
    },
    <span class="hljs-attr">resolve</span>: {
        <span class="hljs-attr">extensions</span>: [<span class="hljs-string">'.ts'</span>, <span class="hljs-string">'.tsx'</span>, <span class="hljs-string">'.js'</span>, <span class="hljs-string">'.jsx'</span>]
    },
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>({
            <span class="hljs-attr">template</span>: <span class="hljs-string">'./public/index.html'</span>
        }),
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">CleanWebpackPlugin</span>()
    ],
    <span class="hljs-attr">devtool</span>: <span class="hljs-string">'source-map'</span>,
    <span class="hljs-attr">devServer</span>: {
        <span class="hljs-attr">static</span>: {
            <span class="hljs-attr">directory</span>: path.<span class="hljs-title function_">join</span>(rootDir, <span class="hljs-string">'public'</span>)
        },
        <span class="hljs-attr">compress</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">historyApiFallback</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">mode</span>: <span class="hljs-string">'development'</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> config

</code></pre>
<h4 data-id="heading-14">3.3 è®¾ç½®webpack loader(style)</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add -D style-loader css-loader sass sass-loader
</code></pre>
<p>å¼•å…¥åˆ°webpack configçš„rulesä¸­ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">Configuration</span> = {
    <span class="hljs-attr">entry</span>: <span class="hljs-string">'./src/index.tsx'</span>,
    <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(rootDir, <span class="hljs-string">'dist'</span>),
        <span class="hljs-attr">filename</span>: <span class="hljs-string">'[name].[contenthash].js'</span>
    },
    <span class="hljs-attr">resolve</span>: {
        <span class="hljs-attr">extensions</span>: [<span class="hljs-string">'.ts'</span>, <span class="hljs-string">'.tsx'</span>, <span class="hljs-string">'.js'</span>, <span class="hljs-string">'.jsx'</span>]
    },
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>({
            <span class="hljs-attr">template</span>: <span class="hljs-string">'./public/index.html'</span>
        }),
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">CleanWebpackPlugin</span>()
    ],
    <span class="hljs-attr">devtool</span>: <span class="hljs-string">'source-map'</span>,
    <span class="hljs-attr">module</span>: {
        <span class="hljs-attr">rules</span>: [
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/i</span>,
                <span class="hljs-attr">use</span>: [<span class="hljs-string">'style-loader'</span>, <span class="hljs-string">'css-loader'</span>]
            },
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.scss$/i</span>,
                <span class="hljs-attr">use</span>: [<span class="hljs-string">'style-loader'</span>, <span class="hljs-string">'css-loader'</span>, <span class="hljs-string">'sass-loader'</span>]
            },
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(png|jpg|jpeg|gif|svg)$/i</span>,
                <span class="hljs-attr">type</span>: <span class="hljs-string">'asset/resource'</span>
            }
        ]
    },
    <span class="hljs-attr">devServer</span>: {
        <span class="hljs-attr">static</span>: {
            <span class="hljs-attr">directory</span>: path.<span class="hljs-title function_">join</span>(rootDir, <span class="hljs-string">'public'</span>)
        },
        <span class="hljs-attr">compress</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">historyApiFallback</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">mode</span>: <span class="hljs-string">'development'</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> config

</code></pre>
<p>è¿™é‡Œè¿˜å¼•å…¥é™æ€èµ„æºçš„rulesç›´æ¥ä»asset/resourceä¸­è·å–ã€‚
å› ä¸ºæˆ‘ä»¬å¼•å…¥äº†sassï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰sassæ–‡ä»¶ï¼ˆ.sass,.scss)çš„æ¨¡å—ç±»å‹,åœ¨src/typesé‡Œåˆ›å»ºindex.d.ts:</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">'*.scss'</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">content</span>: { [<span class="hljs-attr">className</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span> }
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> content
}
</code></pre>
<h4 data-id="heading-15">3.4 è®¾ç½®webpack babel</h4>
<pre><code class="hljs language-bash" lang="bash">pnpm add -D @babel/core @babel/preset-env @babel/preset-react @babel/preset-typescript babel-loader
</code></pre>
<p>åœ¨configè¿›è¡Œå¦‚ä¸‹é…ç½®</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">'path'</span>
<span class="hljs-keyword">import</span> { fileURLToPath } <span class="hljs-keyword">from</span> <span class="hljs-string">'url'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">HtmlWebpackPlugin</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'html-webpack-plugin'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CleanWebpackPlugin</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'clean-webpack-plugin'</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">Configuration</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'webpack'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'webpack-dev-server'</span>

<span class="hljs-keyword">const</span> rootDir = path.<span class="hljs-title function_">dirname</span>(<span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>))

<span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">Configuration</span> = {
    <span class="hljs-attr">entry</span>: <span class="hljs-string">'./src/index.tsx'</span>,
    <span class="hljs-attr">output</span>: {
        <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(rootDir, <span class="hljs-string">'dist'</span>),
        <span class="hljs-attr">filename</span>: <span class="hljs-string">'[name].[contenthash].js'</span>
    },
    <span class="hljs-attr">resolve</span>: {
        <span class="hljs-attr">extensions</span>: [<span class="hljs-string">'.ts'</span>, <span class="hljs-string">'.tsx'</span>, <span class="hljs-string">'.js'</span>, <span class="hljs-string">'.jsx'</span>]
    },
    <span class="hljs-attr">plugins</span>: [
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>({
            <span class="hljs-attr">template</span>: <span class="hljs-string">'./public/index.html'</span>
        }),
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">CleanWebpackPlugin</span>()
    ],
    <span class="hljs-attr">devtool</span>: <span class="hljs-string">'source-map'</span>,
    <span class="hljs-attr">module</span>: {
        <span class="hljs-attr">rules</span>: [
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(ts|js)x?$/</span>,
                <span class="hljs-attr">exclude</span>: <span class="hljs-regexp">/node_modules/</span>,
                <span class="hljs-attr">use</span>: [
                    {
                        <span class="hljs-attr">loader</span>: <span class="hljs-string">'babel-loader'</span>,
                        <span class="hljs-attr">options</span>: {
                            <span class="hljs-attr">presets</span>: [
                                <span class="hljs-string">'@babel/preset-env'</span>,
                                [<span class="hljs-string">'@babel/preset-react'</span>, { <span class="hljs-attr">runtime</span>: <span class="hljs-string">'automatic'</span> }],
                                <span class="hljs-string">'@babel/preset-typescript'</span>
                            ]
                        }
                    }
                ]
            },
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.css$/i</span>,
                <span class="hljs-attr">use</span>: [<span class="hljs-string">'style-loader'</span>, <span class="hljs-string">'css-loader'</span>]
            },
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.scss$/i</span>,
                <span class="hljs-attr">use</span>: [<span class="hljs-string">'style-loader'</span>, <span class="hljs-string">'css-loader'</span>, <span class="hljs-string">'sass-loader'</span>]
            },
            {
                <span class="hljs-attr">test</span>: <span class="hljs-regexp">/\.(png|jpg|jpeg|gif|svg)$/i</span>,
                <span class="hljs-attr">type</span>: <span class="hljs-string">'asset/resource'</span>
            }
        ]
    },
    <span class="hljs-attr">devServer</span>: {
        <span class="hljs-attr">static</span>: {
            <span class="hljs-attr">directory</span>: path.<span class="hljs-title function_">join</span>(rootDir, <span class="hljs-string">'public'</span>)
        },
        <span class="hljs-attr">compress</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">historyApiFallback</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-attr">mode</span>: <span class="hljs-string">'development'</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> config

</code></pre>
<h3 data-id="heading-16">4. typescripté…ç½®</h3>
<p>æ ¹ç›®å½•ä¸Šåˆ›å»ºtsconfg.json</p>
<pre><code class="hljs language-ts" lang="ts">{
    <span class="hljs-string">"compilerOptions"</span>: {
        <span class="hljs-string">"module"</span>: <span class="hljs-string">"esnext"</span>,
        <span class="hljs-string">"target"</span>: <span class="hljs-string">"esnext"</span>,
        <span class="hljs-string">"moduleResolution"</span>: <span class="hljs-string">"bundler"</span>,
        <span class="hljs-string">"lib"</span>: [<span class="hljs-string">"dom"</span>, <span class="hljs-string">"dom.iterable"</span>, <span class="hljs-string">"esnext"</span>],

        <span class="hljs-string">"sourceMap"</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-string">"declaration"</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-string">"declarationMap"</span>: <span class="hljs-literal">true</span>,

        <span class="hljs-string">"noUncheckedIndexedAccess"</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-string">"exactOptionalPropertyTypes"</span>: <span class="hljs-literal">true</span>,

        <span class="hljs-string">"strict"</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-string">"jsx"</span>: <span class="hljs-string">"react-jsx"</span>,
        <span class="hljs-string">"jsxImportSource"</span>: <span class="hljs-string">"react"</span>,
        <span class="hljs-string">"verbatimModuleSyntax"</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-string">"isolatedModules"</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-string">"noUncheckedSideEffectImports"</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-string">"moduleDetection"</span>: <span class="hljs-string">"force"</span>,
        <span class="hljs-string">"skipLibCheck"</span>: <span class="hljs-literal">true</span>
    }
}
</code></pre>
<p>é€šè¿‡ä¸Šè¿°é…ç½®ï¼Œæˆ‘ä»¬ä¿®æ”¹package.jsonçš„scripts</p>
<pre><code class="hljs language-json" lang="json"> <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
 	<span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"webpack serve --open --port 3210"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"webpack"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ­¤æ—¶è¿è¡Œpnpm run startå³å¯åœ¨3210ç«¯å£è®¿é—®é¡¹ç›®ã€‚</p>
<p>æ¥ä¸‹æ¥çš„å†…å®¹æ˜¯é”¦ä¸Šæ·»èŠ±ï¼šä¼˜åŒ–å·¥ç¨‹ï¼Œå³ä»£ç é£æ ¼æ ¼å¼åŒ–ï¼Œtypescript eslintè§„åˆ™æ ¡éªŒï¼Œä½¿ç”¨git hooksè§¦å‘ç”Ÿå‘½å‘¨æœŸé’©å­</p>
<h3 data-id="heading-17">5. ä½¿ç”¨prettieræ ¼å¼åŒ–ä»£ç </h3>
<pre><code class="hljs language-bash" lang="bash">pnpm add -D prettier
</code></pre>
<p>åœ¨æ ¹ç›®å½•åˆ›å»º.prettierrc</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"semi"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"singleQuote"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"trailingComma"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"none"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"tabWidth"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"useTabs"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"printWidth"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">120</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"bracketSpacing"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"arrowParens"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"avoid"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"endOfLine"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"auto"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>åœ¨package.jsoné…ç½®æ ¼å¼åŒ–è„šæœ¬</p>
<pre><code class="hljs language-json" lang="json"> <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"webpack serve --open --port 3210"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"webpack"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"prettier --write \"src/**/*.{js,jsx,ts,tsx,json,css,md}\""</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
</code></pre>
<p>æ‰§è¡Œå³å¯æŠŠsrcä¸­æ‰€æœ‰ä»£ç æ–‡ä»¶æ ¼å¼åŒ–</p>
<h3 data-id="heading-18">6. é…ç½®eslint</h3>
<pre><code class="hljs language-bash" lang="bash">pnpm add -D eslint typescript-eslint eslint-plugin-react eslint-plugin-react-hooks eslint-webpack-plugin
</code></pre>
<p>æ ¹ç›®å½•åˆ›å»ºeslint.config.js</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> tseslint <span class="hljs-keyword">from</span> <span class="hljs-string">'typescript-eslint'</span>
<span class="hljs-keyword">import</span> reactPlugin <span class="hljs-keyword">from</span> <span class="hljs-string">'eslint-plugin-react'</span>
<span class="hljs-keyword">import</span> reactHooks <span class="hljs-keyword">from</span> <span class="hljs-string">'eslint-plugin-react-hooks'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> [
    ...tseslint.<span class="hljs-property">configs</span>.<span class="hljs-property">recommended</span>,
    {
        <span class="hljs-attr">files</span>: [<span class="hljs-string">'**/*.{ts,tsx}'</span>],
        <span class="hljs-attr">plugins</span>: {
            <span class="hljs-attr">react</span>: reactPlugin,
            <span class="hljs-string">'react-hooks'</span>: reactHooks
        },
        <span class="hljs-attr">rules</span>: {
            ...reactPlugin.<span class="hljs-property">configs</span>.<span class="hljs-property">recommended</span>.<span class="hljs-property">rules</span>,
            ...reactHooks.<span class="hljs-property">configs</span>.<span class="hljs-property">recommended</span>.<span class="hljs-property">rules</span>
        },
        <span class="hljs-attr">settings</span>: {
            <span class="hljs-attr">react</span>: { <span class="hljs-attr">version</span>: <span class="hljs-string">'detect'</span> }
        }
    }
]

</code></pre>
<p>åœ¨packagesçš„scriptsè„šæœ¬ä¸­å†™å…¥</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"start"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"webpack serve --open --port 3210"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"webpack"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"prettier --write \"src/**/*.{js,jsx,ts,tsx,json,css,md}\""</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"lint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eslint --ext .ts,.tsx"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"lint:fix"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eslint --ext .ts,.tsx --fix"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
</code></pre>
<h3 data-id="heading-19">7. husky è®¾ç½®lint-staged</h3>
<pre><code class="hljs language-bash" lang="bash">pnpm add -D husky lint-staged
</code></pre>
<h4 data-id="heading-20">7.1 åˆå§‹åŒ–gitä»“åº“</h4>
<pre><code class="hljs language-bash" lang="bash">git init
</code></pre>
<h4 data-id="heading-21">7.2 åˆå§‹åŒ–husky</h4>
<ol>
<li>npxæ–¹å¼</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">npx husky init
</code></pre>
<ol start="2">
<li>pnpmæ–¹å¼</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">pnpm <span class="hljs-built_in">exec</span> husky init
</code></pre>
<h4 data-id="heading-22">7.3 é…ç½®huskyçš„pre-commité’©å­</h4>
<p>åœ¨.huskyä¸­åˆ›å»ºpre-commitï¼ˆæ— åç¼€ï¼‰æ–‡ä»¶
å†™å…¥</p>
<pre><code class="hljs language-bash" lang="bash">npx lint-staged
</code></pre>
<p>å¹¶åœ¨package.jsonä¸­çš„æ ¹objecté‡Œå†™å…¥lint-stagedé…ç½®</p>
<pre><code class="hljs language-json" lang="json"> <span class="hljs-attr">"lint-staged"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"src/**/*.{ts,tsx}"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-string">"eslint --fix"</span>
        <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
</code></pre>
<p>æ­¤æ—¶ï¼Œæ¯å½“ä½ git commitçš„æ—¶å€™å®ƒéƒ½ä¼šå…ˆæ‰§è¡Œeslint</p>
<h3 data-id="heading-23">8. huskyè®¾ç½®commit message</h3>
<p>ä¸ºäº†è§„èŒƒæ¯æ¬¡æäº¤è®°å½•çš„messageï¼Œæˆ‘ä»¬ä½¿ç”¨commitlintè§„èŒƒï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">feat:</span> add <span class="hljs-built_in">new</span> feature
<span class="hljs-symbol">fix:</span> bug fix
<span class="hljs-symbol">docs:</span> documentation changes
<span class="hljs-symbol">style:</span> formatting changes
<span class="hljs-symbol">refactor:</span> code refactoring
<span class="hljs-symbol">test:</span> adding tests
<span class="hljs-symbol">chore:</span> maintenance tasks
</code></pre>
<p>å¼•å…¥commit-lint</p>
<pre><code class="hljs language-bash" lang="bash">pnpm add -D @commitlint/cli @commitlint/config-conventional
</code></pre>
<p>åˆ›å»ºcommitlint.config.js</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    <span class="hljs-attr">extends</span>: [<span class="hljs-string">'@commitlint/config-conventional'</span>]
}
</code></pre>
<p>åœ¨.huskyç›®å½•ä¸­åˆ›å»ºcommit-msgï¼ˆæ— åç¼€ï¼‰æ–‡ä»¶å¹¶å†™å…¥ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pnpm <span class="hljs-built_in">exec</span> commitlint --edit <span class="hljs-variable">$1</span>
</code></pre>
<p>æ­¤ååç»­çš„commitæäº¤çš„messageéƒ½ä¼šåŒ¹é…æ˜¯å¦ä»¥ä¸Šè¿°è§„èŒƒä¸­çš„lintçš„titleç›¸åŒ¹é…ï¼Œæ¯”å¦‚æˆ‘æäº¤ä¸€ä¸ªéœ€æ±‚å¿…é¡»ä»¥ï¼š<code>feat: </code>å¼€å¤´</p>
<h3 data-id="heading-24">9. åˆ›å»º.gitignore</h3>
<p>å±è”½æ‰å¸¸è§çš„æœ¬åœ°é…ç½®/ä¾èµ–é¡¹</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Dependencies</span>
node_modules
.pnpm-store

<span class="hljs-comment"># Build output</span>
dist

<span class="hljs-comment"># IDE</span>
.idea
.vscode
*.swp
*.swo

<span class="hljs-comment"># OS</span>
.DS_Store
Thumbs.db

<span class="hljs-comment"># Logs</span>
*.<span class="hljs-built_in">log</span>
npm-debug.log*

<span class="hljs-comment"># Environment</span>
.<span class="hljs-built_in">env</span>
.env.local
.<span class="hljs-built_in">env</span>.*.<span class="hljs-built_in">local</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[springbootæ¡†æ¶ çº¿ç¨‹æ± ä½¿ç”¨ä¸é…ç½®ï¼Œç®€å•ç²—æš´ç›´æ¥ç”¨ï¼Œå†ä¹Ÿä¸ç”¨è‡ªå·±åˆ›å»ºçº¿ç¨‹äº†~]]></title>    <link>https://juejin.cn/post/7584266184881504290</link>    <guid>https://juejin.cn/post/7584266184881504290</guid>    <pubDate>2025-12-16T08:16:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584266184881504290" data-draft-id="7584071941024579599" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="springbootæ¡†æ¶ çº¿ç¨‹æ± ä½¿ç”¨ä¸é…ç½®ï¼Œç®€å•ç²—æš´ç›´æ¥ç”¨ï¼Œå†ä¹Ÿä¸ç”¨è‡ªå·±åˆ›å»ºçº¿ç¨‹äº†~"/> <meta itemprop="keywords" content="Java,Spring Boot,åç«¯"/> <meta itemprop="datePublished" content="2025-12-16T08:16:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Json_"/> <meta itemprop="url" content="https://juejin.cn/user/1511154281613834"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            springbootæ¡†æ¶ çº¿ç¨‹æ± ä½¿ç”¨ä¸é…ç½®ï¼Œç®€å•ç²—æš´ç›´æ¥ç”¨ï¼Œå†ä¹Ÿä¸ç”¨è‡ªå·±åˆ›å»ºçº¿ç¨‹äº†~
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1511154281613834/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Json_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:16:59.000Z" title="Tue Dec 16 2025 08:16:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç›´æ¥ä¸Šä»£ç ï¼š</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šé…ç½®</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.testweb.testweb.threadWeb;

<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.aop.interceptor.AsyncUncaughtExceptionHandler;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
<span class="hljs-keyword">import</span> org.springframework.scheduling.annotation.AsyncConfigurer;
<span class="hljs-keyword">import</span> org.springframework.scheduling.annotation.EnableAsync;
<span class="hljs-keyword">import</span> org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor;

<span class="hljs-keyword">import</span> java.util.concurrent.ThreadPoolExecutor;

<span class="hljs-comment">/**
 * User:Json
 * Date: 2025/12/6
 **/</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@EnableAsync</span>  <span class="hljs-comment">//æ²¡æœ‰è¿™ä¸ªæ³¨è§£ çº¿ç¨‹ä¸ä¼šç”Ÿæ•ˆ</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AsyncConfigurer</span> {
    <span class="hljs-comment">//4 æ ¸ CPU / å°å‹æœåŠ¡å™¨é…ç½®  æŒ‰æœåŠ¡å™¨é…ç½® è°ƒæ•´</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">corePoolSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;   <span class="hljs-comment">// æ ¸å¿ƒçº¿ç¨‹æ•°ï¼ˆé»˜è®¤çº¿ç¨‹æ•°ï¼‰åˆ›å»ºåä¼šåœ¨å†…å­˜é‡Œå¸¸é©»</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">maxPoolSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>;    <span class="hljs-comment">// æœ€å¤§çº¿ç¨‹æ•°ï¼ˆåŒ…å«æ ¸å¿ƒçº¿ç¨‹ï¼‰ï¼Œå½“æ ¸å¿ƒçº¿ç¨‹å’Œé˜Ÿåˆ—æ»¡æ—¶ï¼Œæœ€å¤šä¼šåˆ›å»º 4 ä¸ªéæ ¸å¿ƒçº¿ç¨‹</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">keepAliveTime</span> <span class="hljs-operator">=</span> <span class="hljs-number">60</span>;   <span class="hljs-comment">// éæ ¸å¿ƒçº¿ç¨‹ç©ºé—²å›æ”¶æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">queueCapacity</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>; <span class="hljs-comment">// ç¼“å†²é˜Ÿåˆ—æ•°</span>

    <span class="hljs-comment">/**
     * é»˜è®¤å¼‚æ­¥çº¿ç¨‹æ±  ThreadPoolTaskExecutor å¸¸ç”¨
     */</span>
    <span class="hljs-meta">@Bean("taskExecutor")</span>
    <span class="hljs-keyword">public</span> ThreadPoolTaskExecutor <span class="hljs-title function_">taskExecutor</span><span class="hljs-params">()</span>{
        <span class="hljs-type">ThreadPoolTaskExecutor</span> <span class="hljs-variable">pool</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolTaskExecutor</span>();
        pool.setThreadNamePrefix(<span class="hljs-string">"DY-Async-Task-"</span>); <span class="hljs-comment">//çº¿ç¨‹å‰ç¼€  ä¾¿äºæ—¥å¿—æŸ¥çœ‹</span>
        pool.setCorePoolSize(corePoolSize);
        pool.setMaxPoolSize(maxPoolSize);
        pool.setKeepAliveSeconds(keepAliveTime);
        pool.setQueueCapacity(queueCapacity);
       <span class="hljs-comment">// pool.setAllowCoreThreadTimeOut(true);//  é»˜è®¤æ ¸å¿ƒçº¿ç¨‹å¸¸é©» å¦‚æœå¸Œæœ›åœ¨ä½é…æœåŠ¡å™¨æ ¸å¿ƒçº¿ç¨‹ç©ºé—²ä¹Ÿé‡Šæ”¾èµ„æºï¼Œå¯åŠ ä¸Šè¿™è¡Œ</span>

        <span class="hljs-comment">// ç›´æ¥åœ¨executeæ–¹æ³•çš„è°ƒç”¨çº¿ç¨‹ä¸­è¿è¡Œ</span>
        pool.setRejectedExecutionHandler(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>.CallerRunsPolicy());
        <span class="hljs-comment">// åˆå§‹åŒ–</span>
        pool.initialize();
        <span class="hljs-keyword">return</span> pool;
    }

    <span class="hljs-comment">/**
     * å¼‚æ­¥ä»»åŠ¡å¼‚å¸¸å¤„ç† å¦‚æœè°ƒç”¨çš„åœ°æ–¹ try catchäº† è¿™è¾¹å°±ä¸ä¼šèµ°äº†
     */</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> AsyncUncaughtExceptionHandler <span class="hljs-title function_">getAsyncUncaughtExceptionHandler</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> (ex, method, params) -&gt; {
            log.info(<span class="hljs-string">"å¼‚æ­¥ä»»åŠ¡å‡ºç°å¼‚å¸¸: æ–¹æ³•: {}, å‚æ•°: {}"</span>, method.getName(), params, ex);
        };
    }
}

</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼š å†™demo</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.testweb.testweb.threadWeb;

<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.scheduling.annotation.Async;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;

<span class="hljs-comment">/**
 * User:Json
 * Date: 2025/12/6
 **/</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadService</span> {

    <span class="hljs-comment">//æ— è¿”å›å€¼</span>
    <span class="hljs-meta">@Async("taskExecutor")</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">//å¼‚å¸¸ æµ‹è¯•</span>
        <span class="hljs-comment">// int a=1/0;</span>
        log.info(<span class="hljs-string">"å¼‚æ­¥çº¿ç¨‹"</span>);
    }
    <span class="hljs-comment">//æœ‰è¿”å›å€¼</span>
    <span class="hljs-meta">@Async("taskExecutor")</span>
    <span class="hljs-keyword">public</span> CompletableFuture&lt;Integer&gt; <span class="hljs-title function_">asyncCompute</span><span class="hljs-params">(<span class="hljs-type">int</span> num)</span> {
        log.info(<span class="hljs-string">"å¼‚æ­¥è®¡ç®—å¼€å§‹ï¼Œçº¿ç¨‹: {}"</span>, Thread.currentThread().getName());
        <span class="hljs-type">int</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span> / num;  <span class="hljs-comment">// å¦‚æœ num=0ï¼Œä¼šæŠ›å¼‚å¸¸</span>
        log.info(<span class="hljs-string">"å¼‚æ­¥è®¡ç®—ç»“æŸï¼Œç»“æœ: {}"</span>, result);
        <span class="hljs-comment">//ä¼‘æ¯10ç§’ å‡è£…å µå¡</span>
        <span class="hljs-keyword">try</span> {
            Thread.sleep(<span class="hljs-number">10</span> * <span class="hljs-number">1000L</span>);
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
        }
        <span class="hljs-keyword">return</span> CompletableFuture.completedFuture(result);
    }
}

</code></pre>
<p><strong>ç¬¬ä¸‰æ­¥ï¼šæ§åˆ¶å™¨æµ‹è¯•ï¼š</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.testweb.testweb.threadWeb;

<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.<span class="hljs-keyword">annotation</span>.Autowired;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.GetMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RequestParam;
<span class="hljs-keyword">import</span> org.springframework.web.bind.<span class="hljs-keyword">annotation</span>.RestController;

<span class="hljs-keyword">import</span> java.util.concurrent.CompletableFuture;

<span class="hljs-comment">/**
 * User:Json
 * Date: 2025/12/6
 **/</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadController</span> {

    <span class="hljs-meta">@Autowired</span>
    ThreadService threadService;

    <span class="hljs-comment">//æ— è¿”å›å€¼æµ‹è¯•</span>
    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"testThread"</span>)</span>
    <span class="hljs-keyword">public</span> void test() {
        threadService.test();
    }

    <span class="hljs-comment">//æœ‰è¿”å›å€¼æµ‹è¯•</span>
    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/compute"</span>)</span>
    <span class="hljs-keyword">public</span> String testCompute(<span class="hljs-meta">@RequestParam</span> int num) {
        CompletableFuture&lt;Integer&gt; future = threadService.asyncCompute(num);

        <span class="hljs-comment">//1. é˜»å¡æƒ…å†µ</span>
<span class="hljs-comment">//        try {</span>
<span class="hljs-comment">//            Integer result = future.get(); // ä¼šé˜»å¡ï¼Œç­‰å¾…è¿”å›å€¼</span>
<span class="hljs-comment">//            log.info("é˜»å¡ è®¡ç®—ç»“æœ: " + result);</span>
<span class="hljs-comment">//        } catch (Exception e) {</span>
<span class="hljs-comment">//            log.info("å¼‚æ­¥è®¡ç®—å¼‚å¸¸: {}", e.getMessage(), e);</span>
<span class="hljs-comment">//        }</span>

        <span class="hljs-comment">// 2. ä¸é˜»å¡æƒ…å†µ ï¼Œæ³¨å†Œå›è°ƒå¤„ç†ç»“æœ</span>
        future.thenAccept(result -&gt; {
            log.info(<span class="hljs-string">"å¼‚æ­¥è®¡ç®—å®Œæˆï¼Œä¸é˜»å¡ç»“æœ: {}"</span>, result);
        }).exceptionally(ex -&gt; {
            log.info(<span class="hljs-string">"å¼‚æ­¥è®¡ç®—å¼‚å¸¸"</span>, ex);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        });

        <span class="hljs-keyword">return</span> <span class="hljs-string">"success"</span>;
    }

}

</code></pre>
<p><strong>jvmè°ƒè¯•æµ‹è¯•ç»“æœï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8837b8612564a20ae4c3acbf0f1cd56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnNvbl8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766477818&amp;x-signature=lvZDKRHlOCen51kGLjJiazaltQg%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4df8f160c4f04628b79079538db8b728~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnNvbl8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766477818&amp;x-signature=BNlGoZf9TGC4SDeopK%2F8Flpso4M%3D" alt="image.png" loading="lazy"/></p>
<p><strong>åœ¨å¼‚æ­¥æ–¹æ³•é‡Œå†™ä¸šåŠ¡é€»è¾‘çš„æ³¨æ„é¡¹ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb38a0c3b8e1400ba6666bb20642a6ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSnNvbl8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766477818&amp;x-signature=nSOGTuxuDW6qU6G3oErvAZm7SWk%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚éœ€è¡¥å……ï¼Œæ¬¢è¿å¤§å®¶ç•™è¨€~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµè§ˆå™¨ç›¸å…³ APIï¼šDOM æ“ä½œå…¨è§£æ]]></title>    <link>https://juejin.cn/post/7584061465398951977</link>    <guid>https://juejin.cn/post/7584061465398951977</guid>    <pubDate>2025-12-16T08:34:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584061465398951977" data-draft-id="7584061465398919209" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµè§ˆå™¨ç›¸å…³ APIï¼šDOM æ“ä½œå…¨è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯,DOM,æµè§ˆå™¨"/> <meta itemprop="datePublished" content="2025-12-16T08:34:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="1024è‚¥å®…"/> <meta itemprop="url" content="https://juejin.cn/user/588993964030574"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµè§ˆå™¨ç›¸å…³ APIï¼šDOM æ“ä½œå…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/588993964030574/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    1024è‚¥å®…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:34:53.000Z" title="Tue Dec 16 2025 08:34:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">å¼•è¨€</h4>
<p>DOMï¼ˆæ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼‰æ˜¯Webå¼€å‘çš„æ ¸å¿ƒï¼Œå®ƒä»£è¡¨äº†HTMLå’ŒXMLæ–‡æ¡£çš„ç»“æ„åŒ–è¡¨ç¤ºã€‚é«˜æ•ˆçš„DOMæ“ä½œå¯¹äºæ„å»ºé«˜æ€§èƒ½Webåº”ç”¨è‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†å…¨é¢è§£æDOMæ“ä½œç›¸å…³çš„APIã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥å’Œç°ä»£æœ€ä½³å®è·µã€‚</p>
<h4 data-id="heading-1">ä¸€ã€DOMåŸºç¡€ä¸æ€§èƒ½è€ƒé‡</h4>
<h5 data-id="heading-2">1.1 DOMæ“ä½œçš„æˆæœ¬åˆ†æ</h5>
<p>DOMæ“ä½œæ˜¯æµè§ˆå™¨ä¸­æˆæœ¬æœ€é«˜çš„æ“ä½œä¹‹ä¸€ï¼Œç†è§£å…¶æ€§èƒ½å½±å“æ˜¯ä¼˜åŒ–çš„ç¬¬ä¸€æ­¥ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DOMPerformanceAnalyzer</span> {
  <span class="hljs-comment">// é‡æ’ï¼ˆReflowï¼‰æµ‹è¯•</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">testReflow</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(container);
    
    <span class="hljs-comment">// è¿ç»­ä¿®æ”¹æ ·å¼å¯¼è‡´å¤šæ¬¡é‡æ’</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'å¤šæ¬¡é‡æ’'</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
      container.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = i + <span class="hljs-string">'px'</span>;
      container.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = i + <span class="hljs-string">'px'</span>;
      container.<span class="hljs-property">style</span>.<span class="hljs-property">padding</span> = i + <span class="hljs-string">'px'</span>;
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'å¤šæ¬¡é‡æ’'</span>);
    
    <span class="hljs-comment">// ä½¿ç”¨cssTextæ‰¹é‡ä¿®æ”¹</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'æ‰¹é‡ä¿®æ”¹'</span>);
    <span class="hljs-keyword">let</span> styles = <span class="hljs-string">''</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
      styles = <span class="hljs-string">`width: <span class="hljs-subst">${i}</span>px; height: <span class="hljs-subst">${i}</span>px; padding: <span class="hljs-subst">${i}</span>px;`</span>;
    }
    container.<span class="hljs-property">style</span>.<span class="hljs-property">cssText</span> = styles;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'æ‰¹é‡ä¿®æ”¹'</span>);
    
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(container);
  }
  
  <span class="hljs-comment">// é‡ç»˜ï¼ˆRepaintï¼‰ä¼˜åŒ–</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">testRepaint</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> elements = [];
    <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(container);
    
    <span class="hljs-comment">// åˆ›å»º1000ä¸ªå…ƒç´ </span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
      <span class="hljs-keyword">const</span> el = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
      el.<span class="hljs-property">textContent</span> = <span class="hljs-string">'Item '</span> + i;
      elements.<span class="hljs-title function_">push</span>(el);
    }
    
    <span class="hljs-comment">// ä¸€æ¬¡æ€§æ·»åŠ åˆ°DOM</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'ä¸€æ¬¡æ€§æ·»åŠ '</span>);
    <span class="hljs-keyword">const</span> fragment = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createDocumentFragment</span>();
    elements.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> fragment.<span class="hljs-title function_">appendChild</span>(el));
    container.<span class="hljs-title function_">appendChild</span>(fragment);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'ä¸€æ¬¡æ€§æ·»åŠ '</span>);
    
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(container);
  }
}

<span class="hljs-comment">// æ€§èƒ½æµ‹è¯•</span>
<span class="hljs-title class_">DOMPerformanceAnalyzer</span>.<span class="hljs-title function_">testReflow</span>();
<span class="hljs-title class_">DOMPerformanceAnalyzer</span>.<span class="hljs-title function_">testRepaint</span>();
</code></pre>
<h5 data-id="heading-3">1.2 é€‰æ‹©å™¨æ€§èƒ½ä¼˜åŒ–</h5>
<p>ä¸åŒçš„DOMé€‰æ‹©æ–¹æ³•åœ¨æ€§èƒ½ä¸Šæœ‰æ˜¾è‘—å·®å¼‚ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SelectorPerformance</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">compareSelectors</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    container.<span class="hljs-property">id</span> = <span class="hljs-string">'test-container'</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
      <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
      div.<span class="hljs-property">className</span> = i % <span class="hljs-number">2</span> === <span class="hljs-number">0</span> ? <span class="hljs-string">'even item'</span> : <span class="hljs-string">'odd item'</span>;
      div.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'data-index'</span>, i);
      container.<span class="hljs-title function_">appendChild</span>(div);
    }
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(container);
    
    <span class="hljs-comment">// å„ç§é€‰æ‹©å™¨çš„æ€§èƒ½æ¯”è¾ƒ</span>
    <span class="hljs-keyword">const</span> selectors = [
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'getElementById'</span>,
        <span class="hljs-attr">test</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'test-container'</span>)
      },
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'querySelector'</span>,
        <span class="hljs-attr">test</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'#test-container'</span>)
      },
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'getElementsByClassName'</span>,
        <span class="hljs-attr">test</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementsByClassName</span>(<span class="hljs-string">'even'</span>)
      },
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'querySelectorAll (class)'</span>,
        <span class="hljs-attr">test</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.even'</span>)
      },
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">'querySelectorAll (attribute)'</span>,
        <span class="hljs-attr">test</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'[data-index]'</span>)
      }
    ];
    
    selectors.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">selector</span> =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(selector.<span class="hljs-property">name</span>);
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
        selector.<span class="hljs-title function_">test</span>();
      }
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(selector.<span class="hljs-property">name</span>);
    });
    
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(container);
  }
  
  <span class="hljs-comment">// é€‰æ‹©å™¨æœ€ä½³å®è·µ</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">selectorBestPractices</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// 1. ç¼“å­˜é€‰æ‹©å™¨ç»“æœ</span>
    <span class="hljs-keyword">const</span> cachedElements = {
      <span class="hljs-attr">container</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'container'</span>),
      <span class="hljs-attr">buttons</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.btn'</span>),
      <span class="hljs-attr">form</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-property">forms</span>[<span class="hljs-string">'user-form'</span>]
    };
    
    <span class="hljs-comment">// 2. ä½¿ç”¨æœ€å…·ä½“çš„çˆ¶å…ƒç´ </span>
    <span class="hljs-keyword">const</span> parent = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'specific-parent'</span>);
    <span class="hljs-keyword">const</span> children = parent.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.child-element'</span>);
    
    <span class="hljs-comment">// 3. é¿å…è¿‡åº¦ä½¿ç”¨é€šç”¨é€‰æ‹©å™¨</span>
    <span class="hljs-comment">// ä¸å¥½: document.querySelectorAll('div .item span')</span>
    <span class="hljs-comment">// å¥½: container.querySelectorAll('.item &gt; span')</span>
    
    <span class="hljs-comment">// 4. ä½¿ç”¨IDé€‰æ‹©å™¨æœ€å¿«</span>
    <span class="hljs-keyword">const</span> fastest = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'unique-id'</span>);
    
    <span class="hljs-keyword">return</span> cachedElements;
  }
}
</code></pre>
<h4 data-id="heading-4">äºŒã€è™šæ‹ŸDOMå®ç°åŸç†</h4>
<h5 data-id="heading-5">2.1 åŸºç¡€è™šæ‹ŸDOMå®ç°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">VNode</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">tag, props = {}, children = []</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">tag</span> = tag;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span> = props;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span> = children;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span> = props.<span class="hljs-property">key</span> || <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">el</span> = <span class="hljs-literal">null</span>; <span class="hljs-comment">// å¯¹åº”çš„çœŸå®DOM</span>
  }
  
  <span class="hljs-comment">// åˆ›å»ºè™šæ‹ŸDOM</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">create</span>(<span class="hljs-params">tag, props, ...children</span>) {
    <span class="hljs-comment">// æ‰å¹³åŒ–childrenæ•°ç»„</span>
    <span class="hljs-keyword">const</span> flatChildren = children.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, child</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(child)) {
        <span class="hljs-keyword">return</span> acc.<span class="hljs-title function_">concat</span>(child);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (child == <span class="hljs-literal">null</span> || child === <span class="hljs-literal">false</span>) {
        <span class="hljs-keyword">return</span> acc;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span> acc.<span class="hljs-title function_">concat</span>(child);
      }
    }, []);
    
    <span class="hljs-comment">// å¤„ç†æ–‡æœ¬èŠ‚ç‚¹</span>
    <span class="hljs-keyword">const</span> processedChildren = flatChildren.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> child === <span class="hljs-string">'string'</span> || <span class="hljs-keyword">typeof</span> child === <span class="hljs-string">'number'</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">VNode</span>.<span class="hljs-title function_">createText</span>(child);
      }
      <span class="hljs-keyword">return</span> child;
    });
    
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">VNode</span>(tag, props || {}, processedChildren);
  }
  
  <span class="hljs-comment">// åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">createText</span>(<span class="hljs-params">text</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">VNode</span>(<span class="hljs-string">'#text'</span>, { <span class="hljs-attr">nodeValue</span>: text }, []);
  }
  
  <span class="hljs-comment">// æ¸²æŸ“ä¸ºçœŸå®DOM</span>
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ–‡æœ¬èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">tag</span> === <span class="hljs-string">'#text'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTextNode</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">nodeValue</span>);
    }
    
    <span class="hljs-comment">// åˆ›å»ºå…ƒç´ </span>
    <span class="hljs-keyword">const</span> el = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">tag</span>);
    
    <span class="hljs-comment">// è®¾ç½®å±æ€§</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [key, value] <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>)) {
      <span class="hljs-keyword">if</span> (key.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'on'</span>) &amp;&amp; <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'function'</span>) {
        <span class="hljs-comment">// äº‹ä»¶å¤„ç†</span>
        <span class="hljs-keyword">const</span> eventName = key.<span class="hljs-title function_">slice</span>(<span class="hljs-number">2</span>).<span class="hljs-title function_">toLowerCase</span>();
        el.<span class="hljs-title function_">addEventListener</span>(eventName, value);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'className'</span>) {
        <span class="hljs-comment">// classå±æ€§</span>
        el.<span class="hljs-property">className</span> = value;
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'style'</span> &amp;&amp; <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'object'</span>) {
        <span class="hljs-comment">// styleå¯¹è±¡</span>
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(el.<span class="hljs-property">style</span>, value);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key !== <span class="hljs-string">'key'</span>) {
        <span class="hljs-comment">// å…¶ä»–å±æ€§</span>
        el.<span class="hljs-title function_">setAttribute</span>(key, value);
      }
    }
    
    <span class="hljs-comment">// é€’å½’æ¸²æŸ“å­èŠ‚ç‚¹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (child) {
        <span class="hljs-keyword">const</span> childEl = child.<span class="hljs-title function_">render</span>();
        el.<span class="hljs-title function_">appendChild</span>(childEl);
        child.<span class="hljs-property">el</span> = childEl; <span class="hljs-comment">// ä¿å­˜DOMå¼•ç”¨</span>
      }
    });
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">el</span> = el;
    <span class="hljs-keyword">return</span> el;
  }
}

<span class="hljs-comment">// è™šæ‹ŸDOMä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">VirtualDOMExample</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">createVirtualDOM</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> vdom = <span class="hljs-title class_">VNode</span>.<span class="hljs-title function_">create</span>(
      <span class="hljs-string">'div'</span>,
      { <span class="hljs-attr">id</span>: <span class="hljs-string">'app'</span>, <span class="hljs-attr">className</span>: <span class="hljs-string">'container'</span> },
      <span class="hljs-title class_">VNode</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">'h1'</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">'Hello Virtual DOM'</span>),
      <span class="hljs-title class_">VNode</span>.<span class="hljs-title function_">create</span>(
        <span class="hljs-string">'ul'</span>,
        { <span class="hljs-attr">style</span>: { <span class="hljs-attr">color</span>: <span class="hljs-string">'blue'</span>, <span class="hljs-attr">padding</span>: <span class="hljs-string">'10px'</span> } },
        <span class="hljs-title class_">VNode</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">'li'</span>, { <span class="hljs-attr">key</span>: <span class="hljs-string">'1'</span> }, <span class="hljs-string">'Item 1'</span>),
        <span class="hljs-title class_">VNode</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">'li'</span>, { <span class="hljs-attr">key</span>: <span class="hljs-string">'2'</span> }, <span class="hljs-string">'Item 2'</span>),
        <span class="hljs-title class_">VNode</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">'li'</span>, { <span class="hljs-attr">key</span>: <span class="hljs-string">'3'</span> }, <span class="hljs-string">'Item 3'</span>)
      ),
      <span class="hljs-title class_">VNode</span>.<span class="hljs-title function_">create</span>(
        <span class="hljs-string">'button'</span>,
        { 
          <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">alert</span>(<span class="hljs-string">'Clicked!'</span>),
          <span class="hljs-attr">className</span>: <span class="hljs-string">'btn btn-primary'</span>
        },
        <span class="hljs-string">'Click Me'</span>
      )
    );
    
    <span class="hljs-keyword">return</span> vdom;
  }
  
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">mount</span>(<span class="hljs-params">containerId</span>) {
    <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(containerId);
    <span class="hljs-keyword">const</span> vdom = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createVirtualDOM</span>();
    <span class="hljs-keyword">const</span> realDOM = vdom.<span class="hljs-title function_">render</span>();
    container.<span class="hljs-title function_">appendChild</span>(realDOM);
    <span class="hljs-keyword">return</span> vdom;
  }
}
</code></pre>
<h5 data-id="heading-6">2.2 ç»„ä»¶åŒ–è™šæ‹ŸDOM</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»„ä»¶åŸºç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span> = props;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = {};
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">vnode</span> = <span class="hljs-literal">null</span>;
  }
  
  <span class="hljs-title function_">setState</span>(<span class="hljs-params">partialState</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = { ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>, ...partialState };
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">update</span>();
  }
  
  <span class="hljs-title function_">update</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> oldVNode = <span class="hljs-variable language_">this</span>.<span class="hljs-property">vnode</span>;
    <span class="hljs-keyword">const</span> newVNode = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>();
    
    <span class="hljs-comment">// æ‰§è¡Œdiffå’Œpatch</span>
    <span class="hljs-keyword">const</span> patches = <span class="hljs-title class_">VirtualDOM</span>.<span class="hljs-title function_">diff</span>(oldVNode, newVNode);
    <span class="hljs-title class_">VirtualDOM</span>.<span class="hljs-title function_">patch</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">vnode</span>.<span class="hljs-property">el</span>.<span class="hljs-property">parentNode</span>, patches);
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">vnode</span> = newVNode;
  }
  
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'render() must be implemented'</span>);
  }
  
  <span class="hljs-comment">// ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</span>
  <span class="hljs-title function_">componentDidMount</span>(<span class="hljs-params"/>) {}
  <span class="hljs-title function_">componentDidUpdate</span>(<span class="hljs-params"/>) {}
  <span class="hljs-title function_">componentWillUnmount</span>(<span class="hljs-params"/>) {}
}

<span class="hljs-comment">// å‡½æ•°å¼ç»„ä»¶æ”¯æŒ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">FunctionalComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props, renderFn</span>) {
    <span class="hljs-variable language_">super</span>(props);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderFn</span> = renderFn;
  }
  
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderFn</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>);
  }
}

<span class="hljs-comment">// ç»„ä»¶ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">TodoList</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-variable language_">super</span>(props);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span> = {
      <span class="hljs-attr">todos</span>: [],
      <span class="hljs-attr">inputValue</span>: <span class="hljs-string">''</span>
    };
  }
  
  handleInputChange = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ <span class="hljs-attr">inputValue</span>: e.<span class="hljs-property">target</span>.<span class="hljs-property">value</span> });
  };
  
  handleAddTodo = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">inputValue</span>.<span class="hljs-title function_">trim</span>()) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({
        <span class="hljs-attr">todos</span>: [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">todos</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">inputValue</span>],
        <span class="hljs-attr">inputValue</span>: <span class="hljs-string">''</span>
      });
    }
  };
  
  handleRemoveTodo = <span class="hljs-function">(<span class="hljs-params">index</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> newTodos = [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">todos</span>];
    newTodos.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setState</span>({ <span class="hljs-attr">todos</span>: newTodos });
  };
  
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">VNode</span>.<span class="hljs-title function_">create</span>(
      <span class="hljs-string">'div'</span>,
      { <span class="hljs-attr">className</span>: <span class="hljs-string">'todo-list'</span> },
      <span class="hljs-title class_">VNode</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">'h2'</span>, <span class="hljs-literal">null</span>, <span class="hljs-string">'Todo List'</span>),
      <span class="hljs-title class_">VNode</span>.<span class="hljs-title function_">create</span>(
        <span class="hljs-string">'div'</span>,
        { <span class="hljs-attr">className</span>: <span class="hljs-string">'input-group'</span> },
        <span class="hljs-title class_">VNode</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">'input'</span>, {
          <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span>,
          <span class="hljs-attr">value</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">inputValue</span>,
          <span class="hljs-attr">onInput</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleInputChange</span>,
          <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'Add new todo'</span>
        }),
        <span class="hljs-title class_">VNode</span>.<span class="hljs-title function_">create</span>(
          <span class="hljs-string">'button'</span>,
          { <span class="hljs-attr">onClick</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">handleAddTodo</span> },
          <span class="hljs-string">'Add'</span>
        )
      ),
      <span class="hljs-title class_">VNode</span>.<span class="hljs-title function_">create</span>(
        <span class="hljs-string">'ul'</span>,
        <span class="hljs-literal">null</span>,
        ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">todos</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">todo, index</span>) =&gt;</span>
          <span class="hljs-title class_">VNode</span>.<span class="hljs-title function_">create</span>(
            <span class="hljs-string">'li'</span>,
            { <span class="hljs-attr">key</span>: index, <span class="hljs-attr">className</span>: <span class="hljs-string">'todo-item'</span> },
            todo,
            <span class="hljs-title class_">VNode</span>.<span class="hljs-title function_">create</span>(
              <span class="hljs-string">'button'</span>,
              { 
                <span class="hljs-attr">onClick</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleRemoveTodo</span>(index),
                <span class="hljs-attr">className</span>: <span class="hljs-string">'remove-btn'</span>
              },
              <span class="hljs-string">'Ã—'</span>
            )
          )
        )
      )
    );
  }
}
</code></pre>
<h4 data-id="heading-7">ä¸‰ã€DOM Diffç®—æ³•æ·±åº¦è§£æ</h4>
<h5 data-id="heading-8">3.1 å®Œæ•´çš„Diffç®—æ³•å®ç°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">VirtualDOM</span> {
  <span class="hljs-comment">// æ¯”è¾ƒä¸¤ä¸ªè™šæ‹ŸèŠ‚ç‚¹çš„å·®å¼‚</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">diff</span>(<span class="hljs-params">oldVNode, newVNode</span>) {
    <span class="hljs-comment">// å¦‚æœæ—§èŠ‚ç‚¹ä¸å­˜åœ¨, ç›´æ¥åˆ›å»ºæ–°èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (!oldVNode) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">type</span>: <span class="hljs-string">"CREATE"</span>, <span class="hljs-attr">vnode</span>: newVNode };
    }

    <span class="hljs-comment">// å¦‚æœæ–°èŠ‚ç‚¹ä¸å­˜åœ¨, åˆ é™¤æ—§èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (!newVNode) {
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">type</span>: <span class="hljs-string">"REMOVE"</span> };
    }

    <span class="hljs-comment">// å¦‚æœèŠ‚ç‚¹ç±»å‹ä¸åŒ, ç›´æ¥æ›¿æ¢</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isDifferentType</span>(oldVNode, newVNode)) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"REPLACE"</span>,
        oldVNode,
        newVNode,
      };
    }

    <span class="hljs-comment">// å¦‚æœæ˜¯æ–‡æœ¬èŠ‚ç‚¹, æ¯”è¾ƒæ–‡æœ¬å†…å®¹</span>
    <span class="hljs-keyword">if</span> (oldVNode.<span class="hljs-property">tag</span> === <span class="hljs-string">"#text"</span> &amp;&amp; newVNode.<span class="hljs-property">tag</span> === <span class="hljs-string">"#text"</span>) {
      <span class="hljs-keyword">if</span> (oldVNode.<span class="hljs-property">props</span>.<span class="hljs-property">nodeValue</span> !== newVNode.<span class="hljs-property">props</span>.<span class="hljs-property">nodeValue</span>) {
        <span class="hljs-keyword">return</span> {
          <span class="hljs-attr">type</span>: <span class="hljs-string">"UPDATE_TEXT"</span>,
          oldVNode,
          newVNode,
        };
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-comment">// æ¯”è¾ƒå±æ€§å·®å¼‚</span>
    <span class="hljs-keyword">const</span> propsPatches = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">diffProps</span>(oldVNode, newVNode);

    <span class="hljs-comment">// æ¯”è¾ƒå­èŠ‚ç‚¹å·®å¼‚</span>
    <span class="hljs-keyword">const</span> childrenPatches = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">diffChildren</span>(oldVNode, newVNode);

    <span class="hljs-comment">// å¦‚æœæœ‰å·®å¼‚, è¿”å›è¡¥ä¸</span>
    <span class="hljs-keyword">if</span> (propsPatches.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> || childrenPatches.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">type</span>: <span class="hljs-string">"UPDATE_ELEMENT"</span>,
        <span class="hljs-attr">props</span>: propsPatches,
        <span class="hljs-attr">children</span>: childrenPatches,
        <span class="hljs-attr">vnode</span>: newVNode,
      };
    }

    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }

  <span class="hljs-comment">// åˆ¤æ–­èŠ‚ç‚¹ç±»å‹æ˜¯å¦ä¸åŒ</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">isDifferentType</span>(<span class="hljs-params">vnode1, vnode2</span>) {
    <span class="hljs-keyword">return</span> vnode1.<span class="hljs-property">tag</span> !== vnode2.<span class="hljs-property">tag</span> || vnode1.<span class="hljs-property">key</span> !== vnode2.<span class="hljs-property">key</span>;
  }

  <span class="hljs-comment">// æ¯”è¾ƒå±æ€§å·®å¼‚</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">diffProps</span>(<span class="hljs-params">oldVNode, newVNode</span>) {
    <span class="hljs-keyword">const</span> patches = [];
    <span class="hljs-keyword">const</span> oldProps = oldVNode.<span class="hljs-property">props</span>;
    <span class="hljs-keyword">const</span> newProps = newVNode.<span class="hljs-property">props</span>;

    <span class="hljs-comment">// æ£€æŸ¥æ–°å¢æˆ–ä¿®æ”¹çš„å±æ€§</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [key, newValue] <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(newProps)) {
      <span class="hljs-keyword">const</span> oldValue = oldProps[key];

      <span class="hljs-comment">// äº‹ä»¶å¤„ç†å‡½æ•°ç‰¹æ®Šå¤„ç†</span>
      <span class="hljs-keyword">if</span> (key.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"on"</span>)) {
        <span class="hljs-keyword">if</span> (oldValue !== newValue) {
          patches.<span class="hljs-title function_">push</span>({
            <span class="hljs-attr">type</span>: <span class="hljs-string">"UPDATE_EVENT"</span>,
            key,
            oldValue,
            newValue,
          });
        }
        <span class="hljs-keyword">continue</span>;
      }

      <span class="hljs-comment">// å…¶ä»–å±æ€§æ¯”è¾ƒ</span>
      <span class="hljs-keyword">if</span> (oldValue !== newValue) {
        patches.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">"UPDATE_PROP"</span>,
          key,
          <span class="hljs-attr">value</span>: newValue,
        });
      }
    }

    <span class="hljs-comment">// æ£€æŸ¥è¢«åˆ é™¤çš„å±æ€§</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(oldProps)) {
      <span class="hljs-keyword">if</span> (!(key <span class="hljs-keyword">in</span> newProps)) {
        patches.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">"REMOVE_PROP"</span>,
          key,
        });
      }
    }

    <span class="hljs-keyword">return</span> patches;
  }

  <span class="hljs-comment">// æ¯”è¾ƒå­èŠ‚ç‚¹å·®å¼‚(ä½¿ç”¨keyä¼˜åŒ–)</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">diffChildren</span>(<span class="hljs-params">oldVNode, newVNode</span>) {
    <span class="hljs-keyword">const</span> patches = [];
    <span class="hljs-keyword">const</span> oldChildren = oldVNode.<span class="hljs-property">children</span>;
    <span class="hljs-keyword">const</span> newChildren = newVNode.<span class="hljs-property">children</span>;

    <span class="hljs-comment">// ä½¿ç”¨keyæ˜ å°„ä¼˜åŒ–æŸ¥æ‰¾</span>
    <span class="hljs-keyword">const</span> oldKeyMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    oldChildren.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">child, index</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (child.<span class="hljs-property">key</span> != <span class="hljs-literal">null</span>) {
        oldKeyMap.<span class="hljs-title function_">set</span>(child.<span class="hljs-property">key</span>, { child, index });
      }
    });

    <span class="hljs-keyword">let</span> lastIndex = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> newChildrenPatches = [];

    <span class="hljs-comment">// éå†æ–°å­èŠ‚ç‚¹</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; newChildren.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> newChild = newChildren[i];
      <span class="hljs-keyword">const</span> newKey = newChild.<span class="hljs-property">key</span>;

      <span class="hljs-keyword">let</span> oldChildIndex = -<span class="hljs-number">1</span>;
      <span class="hljs-keyword">let</span> oldChild = <span class="hljs-literal">null</span>;

      <span class="hljs-comment">// é€šè¿‡keyæŸ¥æ‰¾æ—§èŠ‚ç‚¹</span>
      <span class="hljs-keyword">if</span> (newKey != <span class="hljs-literal">null</span> &amp;&amp; oldKeyMap.<span class="hljs-title function_">has</span>(newKey)) {
        <span class="hljs-keyword">const</span> item = oldKeyMap.<span class="hljs-title function_">get</span>(newKey);
        oldChildIndex = item.<span class="hljs-property">index</span>;
        oldChild = item.<span class="hljs-property">child</span>;
        oldKeyMap.<span class="hljs-title function_">delete</span>(newKey); <span class="hljs-comment">// ä»mapä¸­ç§»é™¤, åç»­å‰©ä¸‹çš„å°±æ˜¯éœ€è¦åˆ é™¤çš„</span>
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å¦‚æœæ²¡æœ‰key, å°è¯•é€šè¿‡ä½ç½®æŸ¥æ‰¾(æ•ˆç‡è¾ƒä½)</span>
        oldChildIndex = i &lt; oldChildren.<span class="hljs-property">length</span> ? i : -<span class="hljs-number">1</span>;
        oldChild = oldChildIndex !== -<span class="hljs-number">1</span> ? oldChildren[oldChildIndex] : <span class="hljs-literal">null</span>;

        <span class="hljs-comment">// æ£€æŸ¥ç±»å‹æ˜¯å¦åŒ¹é…</span>
        <span class="hljs-keyword">if</span> (oldChild &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isDifferentType</span>(oldChild, newChild)) {
          oldChild = <span class="hljs-literal">null</span>;
          oldChildIndex = -<span class="hljs-number">1</span>;
        }
      }

      <span class="hljs-comment">// é€’å½’æ¯”è¾ƒå­èŠ‚ç‚¹</span>
      <span class="hljs-keyword">const</span> childPath = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">diff</span>(oldChild, newChild);

      <span class="hljs-keyword">if</span> (childPath) {
        newChildrenPatches.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">index</span>: i,
          <span class="hljs-attr">oldIndex</span>: oldChildIndex,
          <span class="hljs-attr">patch</span>: childPath,
        });
      }

      <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦éœ€è¦ç§»åŠ¨</span>
      <span class="hljs-keyword">if</span> (oldChildIndex !== -<span class="hljs-number">1</span>) {
        <span class="hljs-keyword">if</span> (oldChildIndex &lt; lastIndex) {
          <span class="hljs-comment">// éœ€è¦ç§»åŠ¨</span>
          patches.<span class="hljs-title function_">push</span>({
            <span class="hljs-attr">type</span>: <span class="hljs-string">"MOVE"</span>,
            <span class="hljs-attr">fromIndex</span>: oldChildIndex,
            <span class="hljs-attr">toIndex</span>: i,
          });
        }
        lastIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(lastIndex, oldChildIndex);
      }
    }

    <span class="hljs-comment">// å¤„ç†éœ€è¦åˆ é™¤çš„æ—§èŠ‚ç‚¹</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> { child, index } <span class="hljs-keyword">of</span> oldKeyMap.<span class="hljs-title function_">values</span>()) {
      patches.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">"REMOVE_CHILD"</span>,
        index,
      });
    }

    <span class="hljs-comment">// æ·»åŠ å­èŠ‚ç‚¹è¡¥ä¸</span>
    patches.<span class="hljs-title function_">push</span>(...newChildrenPatches);

    <span class="hljs-keyword">return</span> patches;
  }

  <span class="hljs-comment">// åº”ç”¨è¡¥ä¸åˆ°çœŸå®DOM</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">patch</span>(<span class="hljs-params">parent, patches</span>) {
    <span class="hljs-keyword">if</span> (!patches) <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">switch</span> (patches.<span class="hljs-property">type</span>) {
      <span class="hljs-keyword">case</span> <span class="hljs-string">"CREATE"</span>:
        <span class="hljs-keyword">const</span> newEl = patches.<span class="hljs-property">vnode</span>.<span class="hljs-title function_">render</span>();
        parent.<span class="hljs-title function_">appendChild</span>(newEl);
        patches.<span class="hljs-property">vnode</span>.<span class="hljs-property">el</span> = newEl;
        <span class="hljs-keyword">break</span>;

      <span class="hljs-keyword">case</span> <span class="hljs-string">"REMOVE"</span>:
        <span class="hljs-keyword">if</span> (parent.<span class="hljs-property">parentNode</span>) {
          parent.<span class="hljs-property">parentNode</span>.<span class="hljs-title function_">removeChild</span>(parent);
        }
        <span class="hljs-keyword">break</span>;

      <span class="hljs-keyword">case</span> <span class="hljs-string">"REPLACE"</span>:
        <span class="hljs-keyword">const</span> oldEl = patches.<span class="hljs-property">oldVNode</span>.<span class="hljs-property">el</span>;
        <span class="hljs-keyword">const</span> newEl2 = patches.<span class="hljs-property">newVNode</span>.<span class="hljs-title function_">render</span>();
        oldEl.<span class="hljs-property">parentNode</span>.<span class="hljs-title function_">replaceChild</span>(newEl2, oldEl);
        patches.<span class="hljs-property">newVNode</span>.<span class="hljs-property">el</span> = newEl2;
        <span class="hljs-keyword">break</span>;

      <span class="hljs-keyword">case</span> <span class="hljs-string">"UPDATE_TEXT"</span>:
        patches.<span class="hljs-property">oldVNode</span>.<span class="hljs-property">textContent</span> = patches.<span class="hljs-property">newVNode</span>.<span class="hljs-property">props</span>.<span class="hljs-property">nodeValue</span>;
        patches.<span class="hljs-property">newVNode</span>.<span class="hljs-property">el</span> = patches.<span class="hljs-property">oldVNode</span>.<span class="hljs-property">el</span>;
        <span class="hljs-keyword">break</span>;

      <span class="hljs-keyword">case</span> <span class="hljs-string">"UPDATE_ELEMENT"</span>:
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">patchElement</span>(patches.<span class="hljs-property">oldVNode</span>.<span class="hljs-property">el</span>, patches);
        patches.<span class="hljs-property">vnode</span>.<span class="hljs-property">el</span> = patches.<span class="hljs-property">oldVNode</span>.<span class="hljs-property">el</span>;
        <span class="hljs-keyword">break</span>;
    }
  }

  <span class="hljs-comment">// åº”ç”¨å…ƒç´ çº§åˆ«çš„è¡¥ä¸</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">patchElement</span>(<span class="hljs-params">el, patches</span>) {
    <span class="hljs-comment">// åº”ç”¨å±æ€§è¡¥ä¸</span>
    <span class="hljs-keyword">if</span> (patches.<span class="hljs-property">props</span>) {
      patches.<span class="hljs-property">props</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">patch</span>) =&gt;</span> {
        <span class="hljs-keyword">switch</span> (path.<span class="hljs-property">type</span>) {
          <span class="hljs-keyword">case</span> <span class="hljs-string">"UPDATE_PROP"</span>:
            <span class="hljs-keyword">if</span> (patch.<span class="hljs-property">key</span> === <span class="hljs-string">"className"</span>) {
              el.<span class="hljs-property">className</span> = patch.<span class="hljs-property">value</span>;
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (
              patch.<span class="hljs-property">key</span> === <span class="hljs-string">"style"</span> &amp;&amp;
              <span class="hljs-keyword">typeof</span> patch.<span class="hljs-property">value</span> === <span class="hljs-string">"object"</span>
            ) {
              <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(el.<span class="hljs-property">style</span>, patch.<span class="hljs-property">value</span>);
            } <span class="hljs-keyword">else</span> {
              el.<span class="hljs-title function_">setAttribute</span>(patch.<span class="hljs-property">key</span>, patch.<span class="hljs-property">value</span>);
            }
            <span class="hljs-keyword">break</span>;
          <span class="hljs-keyword">case</span> <span class="hljs-string">"REMOVE_PROP"</span>:
            el.<span class="hljs-title function_">removeAttribute</span>(patch.<span class="hljs-property">key</span>);
            <span class="hljs-keyword">break</span>;
          <span class="hljs-keyword">case</span> <span class="hljs-string">"UPDATE_EVENT"</span>:
            <span class="hljs-keyword">const</span> eventName = patch.<span class="hljs-property">key</span>.<span class="hljs-title function_">slice</span>(<span class="hljs-number">2</span>).<span class="hljs-title function_">toLowetCase</span>();
            <span class="hljs-keyword">if</span> (patch.<span class="hljs-property">oldValue</span>) {
              el.<span class="hljs-title function_">removeEventListener</span>(eventName, patch.<span class="hljs-property">oldValue</span>);
            }
            <span class="hljs-keyword">if</span> (patch.<span class="hljs-property">newValue</span>) {
              el.<span class="hljs-title function_">addEventListener</span>(eventName, patch.<span class="hljs-property">newValue</span>);
            }
            <span class="hljs-keyword">break</span>;
        }
      });
    }

    <span class="hljs-comment">// åº”ç”¨å­èŠ‚ç‚¹è¡¥ä¸</span>
    <span class="hljs-keyword">if</span> (patches.<span class="hljs-property">children</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">patchChildren</span>(el, patches.<span class="hljs-property">children</span>);
    }
  }

  <span class="hljs-comment">// åº”ç”¨å­èŠ‚ç‚¹è¡¥ä¸</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">patchChildren</span>(<span class="hljs-params">parent, patches</span>) {
    <span class="hljs-keyword">const</span> childNodes = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(parent.<span class="hljs-property">childNodes</span>);

    patches.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">patch</span>) =&gt;</span> {
      <span class="hljs-keyword">switch</span> (patch.<span class="hljs-property">type</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">"MOVE"</span>:
          <span class="hljs-keyword">const</span> childToMove = childNodes[patch.<span class="hljs-property">fromIndex</span>];
          <span class="hljs-keyword">const</span> referenceNode = childNodes[patch.<span class="hljs-property">toIndex</span>] || <span class="hljs-literal">null</span>;
          parent.<span class="hljs-title function_">insertBefore</span>(childToMove, referenceNode);
          <span class="hljs-keyword">break</span>;

        <span class="hljs-keyword">case</span> <span class="hljs-string">"REMOVE_CHILD"</span>:
          <span class="hljs-keyword">const</span> childToRemove = childNodes[patch.<span class="hljs-property">index</span>];
          <span class="hljs-keyword">if</span> (childToRemove) {
            parent.<span class="hljs-title function_">removeChild</span>(childToRemove);
          }
          <span class="hljs-keyword">break</span>;
        <span class="hljs-attr">default</span>:
          <span class="hljs-keyword">if</span> (patch.<span class="hljs-property">patch</span>) {
            <span class="hljs-keyword">const</span> childEl =
              childNodes[patch.<span class="hljs-property">oldIndex</span>] || parent.<span class="hljs-property">childNodes</span>[patch.<span class="hljs-property">index</span>];
            <span class="hljs-keyword">if</span> (childEl) {
              <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">patch</span>(childEl, patch.<span class="hljs-property">patch</span>);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (patch.<span class="hljs-property">patch</span>.<span class="hljs-property">type</span> === <span class="hljs-string">"CREATE"</span>) {
              <span class="hljs-keyword">const</span> newEl = patch.<span class="hljs-property">patch</span>.<span class="hljs-property">vnode</span>.<span class="hljs-title function_">render</span>();
              <span class="hljs-keyword">const</span> referenceNode = parent.<span class="hljs-property">childNodes</span>[patch.<span class="hljs-property">index</span>] || <span class="hljs-literal">null</span>;
              parent.<span class="hljs-title function_">insertBefore</span>(newEl, referenceNode);
            }
          }
          <span class="hljs-keyword">break</span>;
      }
    });
  }
}
</code></pre>
<h5 data-id="heading-9">3.2 Diffç®—æ³•ä¼˜åŒ–ç­–ç•¥</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">OptimizedDiff</span> {
  <span class="hljs-comment">// åŒæŒ‡é’ˆç®—æ³•ä¼˜åŒ–</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">optimizedDiff</span>(<span class="hljs-params">oldChilren, newChildren</span>) {
    <span class="hljs-keyword">let</span> oldStartIdx = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> oldEndIdx = oldChilren.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;
    <span class="hljs-keyword">let</span> newStartIdx = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> newEndIdx = newChildren.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>;

    <span class="hljs-keyword">let</span> oldStartVNode = oldChilren[oldStartIdx];
    <span class="hljs-keyword">let</span> oldEndVNode = oldChilren[oldEndIdx];
    <span class="hljs-keyword">let</span> newStartVNode = newChildren[newStartIdx];
    <span class="hljs-keyword">let</span> newEndVNode = newChildren[newEndIdx];

    <span class="hljs-keyword">const</span> patches = [];
    <span class="hljs-keyword">const</span> oldKeyToIdx = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createKeyMap</span>(oldChilren);

    <span class="hljs-keyword">while</span> (oldStartIdx &lt;= oldEndIdx &amp;&amp; newStartIdx &lt;= newEndIdx) {
      <span class="hljs-comment">// è·³è¿‡å·²å¤„ç†çš„èŠ‚ç‚¹</span>
      <span class="hljs-keyword">if</span> (!oldStartVNode) {
        oldStartVNode = oldChilren[++oldStartIdx];
        <span class="hljs-keyword">continue</span>;
      }
      <span class="hljs-keyword">if</span> (!oldEndVNode) {
        oldEndVNode = oldChilren[--oldEndIdx];
        <span class="hljs-keyword">continue</span>;
      }

      <span class="hljs-comment">// å››ç§æ¯”è¾ƒæƒ…å†µ</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sameVNode</span>(oldStartVNode, newStartVNode)) {
        <span class="hljs-comment">// æƒ…å†µ1: å¤´å¤´æ¯”è¾ƒ</span>
        patches.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">"UPDATE"</span>,
          <span class="hljs-attr">oldIdx</span>: oldStartIdx,
          <span class="hljs-attr">newIdx</span>: newStartIdx,
        });
        oldStartVNode = oldChilren[++oldStartIdx];
        newStartVNode = newChildren[++newStartIdx];
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sameVNode</span>(oldEndVNode, newEndVNode)) {
        <span class="hljs-comment">// æƒ…å†µ2: å°¾å°¾æ¯”è¾ƒ</span>
        patches.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">"UPDATE"</span>,
          <span class="hljs-attr">oldIdx</span>: oldEndIdx,
          <span class="hljs-attr">newIdx</span>: newEndIdx,
        });
        oldEndVNode = oldChilren[--oldEndIdx];
        newEndVNode = newChildren[--newEndIdx];
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sameVNode</span>(oldStartVNode, newEndVNode)) {
        <span class="hljs-comment">// æƒ…å†µ3: å¤´å°¾æ¯”è¾ƒ(éœ€è¦ç§»åŠ¨)</span>
        patches.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">"MOVE"</span>,
          <span class="hljs-attr">fromIdx</span>: oldStartIdx,
          <span class="hljs-attr">toIdx</span>: oldEndIdx,
        });
        oldStartVNode = oldChilren[++oldStartIdx];
        newEndVNode = newChildren[--newEndIdx];
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sameVNode</span>(oldEndVNode, newStartVNode)) {
        <span class="hljs-comment">// æƒ…å†µ4: å¤´å°¾æ¯”è¾ƒ(éœ€è¦ç§»åŠ¨)</span>
        patches.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">"MOVE"</span>,
          <span class="hljs-attr">fromIdx</span>: oldEndIdx,
          <span class="hljs-attr">toIdx</span>: oldStartIdx,
        });
        oldEndVNode = oldChilren[--oldEndIdx];
        newStartVNode = newChildren[++newStartIdx];
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// æƒ…å†µ5: é€šè¿‡keyæŸ¥æ‰¾</span>
        <span class="hljs-keyword">const</span> idxInOld = oldKeyToIdx.<span class="hljs-title function_">get</span>(newStartVNode.<span class="hljs-property">key</span>);

        <span class="hljs-keyword">if</span> (idxInOld == <span class="hljs-literal">null</span>) {
          <span class="hljs-comment">// æ–°èŠ‚ç‚¹, éœ€è¦åˆ›å»º</span>
          patches.<span class="hljs-title function_">push</span>({
            <span class="hljs-attr">type</span>: <span class="hljs-string">"CREATE"</span>,
            <span class="hljs-attr">vnode</span>: newStartVNode,
            <span class="hljs-attr">idx</span>: newStartIdx,
          });
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// æ‰¾åˆ°å¯¹åº”èŠ‚ç‚¹, éœ€è¦ç§»åŠ¨</span>
          <span class="hljs-keyword">const</span> vnodeToMove = oldChilren[idxInOld];
          patches.<span class="hljs-title function_">push</span>({
            <span class="hljs-attr">type</span>: <span class="hljs-string">"MOVE"</span>,
            <span class="hljs-attr">fromIdx</span>: idxInOld,
            <span class="hljs-attr">toIdx</span>: newStartIdx,
          });
          <span class="hljs-comment">// æ ‡è®°ä¸ºå·²å¤„ç†</span>
          oldChilren[idxInOld] = <span class="hljs-literal">undefined</span>;
        }

        newStartVNode = newChildren[++newStartIdx];
      }
    }

    <span class="hljs-comment">// å¤„ç†å‰©ä½™èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (oldStartIdx &gt; oldEndIdx) {
      <span class="hljs-comment">// æ·»åŠ æ–°èŠ‚ç‚¹</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = newStartIdx; i &lt;= newEndIdx; i++) {
        patches.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">"CREATE"</span>,
          <span class="hljs-attr">vnode</span>: newChildren[i],
          <span class="hljs-attr">idx</span>: i,
        });
      }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (newStartIdx &gt; newEndIdx) {
      <span class="hljs-comment">// åˆ é™¤æ—§èŠ‚ç‚¹</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = oldStartIdx; i &lt;= oldEndIdx; i++) {
        <span class="hljs-keyword">if</span> (oldChilren[i]) {
          patches.<span class="hljs-title function_">push</span>({
            <span class="hljs-attr">type</span>: <span class="hljs-string">"REMOVE"</span>,
            <span class="hljs-attr">idx</span>: i,
          });
        }
      }
    }

    <span class="hljs-keyword">return</span> patches;
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">createKeyMap</span>(<span class="hljs-params">children</span>) {
    <span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    children.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">child, idx</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (child &amp;&amp; child.<span class="hljs-property">key</span> !== <span class="hljs-literal">null</span>) {
        map.<span class="hljs-title function_">set</span>(child.<span class="hljs-property">key</span>, idx);
      }
    });
    <span class="hljs-keyword">return</span> map;
  }

  <span class="hljs-keyword">static</span> <span class="hljs-title function_">sameVNode</span>(<span class="hljs-params">vnode1, vnode2</span>) {
    <span class="hljs-keyword">return</span> (
      vnode1 &amp;&amp; vnode2 &amp;&amp; vnode1.<span class="hljs-property">tag</span> === vnode2.<span class="hljs-property">tag</span> &amp;&amp; vnode1.<span class="hljs-property">key</span> === vnode2.<span class="hljs-property">key</span>
    );
  }

  <span class="hljs-comment">// äº‹ä»¶åˆ‡ç‰‡ä¼˜åŒ–</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">timeSlicedDiff</span>(<span class="hljs-params">oldVNode, newVNode, callback, chunkSize = <span class="hljs-number">10</span></span>) {
    <span class="hljs-keyword">const</span> patches = [];
    <span class="hljs-keyword">const</span> queue = [{ oldVNode, newVNode, <span class="hljs-attr">path</span>: [] }];

    <span class="hljs-keyword">function</span> <span class="hljs-title function_">processChunk</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> startTime = performance.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">let</span> processed = <span class="hljs-number">0</span>;

      <span class="hljs-keyword">while</span> (queue.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; processed &lt; chunkSize) {
        <span class="hljs-keyword">const</span> { oldVNode, newVNode, path } = queue.<span class="hljs-title function_">shift</span>();
        <span class="hljs-keyword">const</span> patch = <span class="hljs-title class_">VirtualDOM</span>.<span class="hljs-title function_">diff</span>(oldVNode, newVNode);

        <span class="hljs-keyword">if</span> (patch) {
          patches.<span class="hljs-title function_">push</span>({ patch, path });
        }

        <span class="hljs-comment">// æ·»åŠ å­èŠ‚ç‚¹åˆ°é˜Ÿåˆ—</span>
        <span class="hljs-keyword">if</span> (oldVNode &amp;&amp; newVNode &amp;&amp; oldVNode.<span class="hljs-property">children</span> &amp;&amp; newVNode.<span class="hljs-property">children</span>) {
          <span class="hljs-keyword">const</span> maxLen = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(
            oldVNode.<span class="hljs-property">children</span>.<span class="hljs-property">length</span>,
            newVNode.<span class="hljs-property">children</span>.<span class="hljs-property">length</span>
          );
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; maxLen; i++) {
            queue.<span class="hljs-title function_">push</span>({
              <span class="hljs-attr">oldVNode</span>: oldVNode.<span class="hljs-property">children</span>[i],
              <span class="hljs-attr">newVNode</span>: newVNode.<span class="hljs-property">children</span>[i],
              <span class="hljs-attr">path</span>: [...path, i],
            });
          }
        }

        processed++;

        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦è¶…è¿‡æ—¶é—´é™åˆ¶</span>
        <span class="hljs-keyword">if</span> (performance.<span class="hljs-title function_">now</span>() - startTime &gt; <span class="hljs-number">16</span>) {
          <span class="hljs-comment">// çº¦ä¸€å¸§çš„æ—¶é—´</span>
          <span class="hljs-keyword">break</span>;
        }
      }

      <span class="hljs-keyword">if</span> (queue.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// ç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ªchunk</span>
        <span class="hljs-title function_">requestIdleCallback</span>(processChunk);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å®Œæˆï¼Œæ‰§è¡Œå›è°ƒ</span>
        <span class="hljs-title function_">callback</span>(patches);
      }
    }

    <span class="hljs-comment">// å¼€å§‹å¤„ç†</span>
    <span class="hljs-title function_">requestIdleCallback</span>(processChunk);
  }
}
</code></pre>
<h4 data-id="heading-10">å››ã€äº‹ä»¶å§”æ‰˜é«˜çº§æ¨¡å¼</h4>
<h5 data-id="heading-11">4.1 å®Œå–„çš„äº‹ä»¶å§”æ‰˜ç³»ç»Ÿ</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">EventDelegation</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">rootElement = <span class="hljs-variable language_">document</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span> = rootElement;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(); <span class="hljs-comment">// Map&lt;eventType, Map&lt;selector, handler&gt;&gt;</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(); <span class="hljs-comment">// Map&lt;eventType, listener&gt;</span>
  }
  
  <span class="hljs-comment">// æ³¨å†Œäº‹ä»¶å§”æ‰˜</span>
  <span class="hljs-title function_">on</span>(<span class="hljs-params">eventType, selector, handler, options = {}</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">has</span>(eventType)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">set</span>(eventType, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>());
      
      <span class="hljs-comment">// ä¸ºæ¯ç§äº‹ä»¶ç±»å‹æ·»åŠ ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨</span>
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">listener</span> = (<span class="hljs-params">event</span>) =&gt; {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleEvent</span>(eventType, event);
      };
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-title function_">addEventListener</span>(eventType, listener, options);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">set</span>(eventType, listener);
    }
    
    <span class="hljs-keyword">const</span> selectorMap = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">get</span>(eventType);
    selectorMap.<span class="hljs-title function_">set</span>(selector, handler);
  }
  
  <span class="hljs-comment">// ç§»é™¤äº‹ä»¶å§”æ‰˜</span>
  <span class="hljs-title function_">off</span>(<span class="hljs-params">eventType, selector</span>) {
    <span class="hljs-keyword">const</span> selectorMap = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">get</span>(eventType);
    <span class="hljs-keyword">if</span> (selectorMap) {
      selectorMap.<span class="hljs-title function_">delete</span>(selector);
      
      <span class="hljs-comment">// å¦‚æœæ²¡æœ‰å…¶ä»–é€‰æ‹©å™¨ï¼Œç§»é™¤äº‹ä»¶ç›‘å¬å™¨</span>
      <span class="hljs-keyword">if</span> (selectorMap.<span class="hljs-property">size</span> === <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">const</span> listener = <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">get</span>(eventType);
        <span class="hljs-keyword">if</span> (listener) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>.<span class="hljs-title function_">removeEventListener</span>(eventType, listener);
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventListeners</span>.<span class="hljs-title function_">delete</span>(eventType);
        }
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">delete</span>(eventType);
      }
    }
  }
  
  <span class="hljs-comment">// å¤„ç†äº‹ä»¶</span>
  <span class="hljs-title function_">handleEvent</span>(<span class="hljs-params">eventType, event</span>) {
    <span class="hljs-keyword">const</span> selectorMap = <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">get</span>(eventType);
    <span class="hljs-keyword">if</span> (!selectorMap) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-comment">// ä»ç›®æ ‡å…ƒç´ å‘ä¸ŠæŸ¥æ‰¾åŒ¹é…çš„é€‰æ‹©å™¨</span>
    <span class="hljs-keyword">let</span> element = event.<span class="hljs-property">target</span>;
    
    <span class="hljs-keyword">while</span> (element &amp;&amp; element !== <span class="hljs-variable language_">this</span>.<span class="hljs-property">root</span>) {
      <span class="hljs-comment">// æ£€æŸ¥æ‰€æœ‰é€‰æ‹©å™¨</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [selector, handler] <span class="hljs-keyword">of</span> selectorMap.<span class="hljs-title function_">entries</span>()) {
        <span class="hljs-keyword">if</span> (element.<span class="hljs-title function_">matches</span>(selector)) {
          <span class="hljs-comment">// æ‰§è¡Œå¤„ç†å™¨</span>
          <span class="hljs-keyword">const</span> result = handler.<span class="hljs-title function_">call</span>(element, event);
          
          <span class="hljs-comment">// å¦‚æœå¤„ç†å™¨è¿”å›falseï¼Œé˜»æ­¢é»˜è®¤è¡Œä¸ºå’Œå†’æ³¡</span>
          <span class="hljs-keyword">if</span> (result === <span class="hljs-literal">false</span>) {
            event.<span class="hljs-title function_">preventDefault</span>();
            event.<span class="hljs-title function_">stopPropagation</span>();
          }
          
          <span class="hljs-comment">// å¦‚æœå¤„ç†å™¨è¿”å›trueï¼Œç»§ç»­æ£€æŸ¥çˆ¶å…ƒç´ </span>
          <span class="hljs-keyword">if</span> (result !== <span class="hljs-literal">true</span>) {
            <span class="hljs-keyword">return</span>;
          }
        }
      }
      
      element = element.<span class="hljs-property">parentElement</span>;
    }
  }
  
  <span class="hljs-comment">// ä¸€æ¬¡æ€§äº‹ä»¶</span>
  <span class="hljs-title function_">once</span>(<span class="hljs-params">eventType, selector, handler</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">onceHandler</span> = (<span class="hljs-params">event</span>) =&gt; {
      <span class="hljs-keyword">const</span> result = handler.<span class="hljs-title function_">call</span>(event.<span class="hljs-property">target</span>, event);
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">off</span>(eventType, selector, onceHandler);
      <span class="hljs-keyword">return</span> result;
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(eventType, selector, onceHandler);
  }
  
  <span class="hljs-comment">// åŠ¨æ€æ·»åŠ æ”¯æŒ</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">createDynamicDelegation</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> delegation = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventDelegation</span>();
    
    <span class="hljs-comment">// ç›‘å¬DOMå˜åŒ–ï¼Œè‡ªåŠ¨å¤„ç†æ–°å…ƒç´ </span>
    <span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationObserver</span>(<span class="hljs-function">(<span class="hljs-params">mutations</span>) =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> mutation <span class="hljs-keyword">of</span> mutations) {
        <span class="hljs-keyword">if</span> (mutation.<span class="hljs-property">type</span> === <span class="hljs-string">'childList'</span>) {
          mutation.<span class="hljs-property">addedNodes</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> {
            <span class="hljs-keyword">if</span> (node.<span class="hljs-property">nodeType</span> === <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>) {
              delegation.<span class="hljs-title function_">bindNewElement</span>(node);
            }
          });
        }
      }
    });
    
    observer.<span class="hljs-title function_">observe</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>, {
      <span class="hljs-attr">childList</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">subtree</span>: <span class="hljs-literal">true</span>
    });
    
    <span class="hljs-keyword">return</span> delegation;
  }
  
  <span class="hljs-comment">// ç»‘å®šæ–°å…ƒç´ </span>
  <span class="hljs-title function_">bindNewElement</span>(<span class="hljs-params">element</span>) {
    <span class="hljs-comment">// ä¸ºå…ƒç´ ç»‘å®šå·²æ³¨å†Œçš„äº‹ä»¶</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [eventType, selectorMap] <span class="hljs-keyword">of</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">handlers</span>.<span class="hljs-title function_">entries</span>()) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [selector, handler] <span class="hljs-keyword">of</span> selectorMap.<span class="hljs-title function_">entries</span>()) {
        <span class="hljs-keyword">if</span> (element.<span class="hljs-title function_">matches</span>(selector)) {
          element.<span class="hljs-title function_">addEventListener</span>(eventType, handler);
        }
      }
    }
    
    <span class="hljs-comment">// é€’å½’å¤„ç†å­å…ƒç´ </span>
    element.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'*'</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">bindNewElement</span>(child);
    });
  }
  
  <span class="hljs-comment">// äº‹ä»¶èŠ‚æµå§”æ‰˜</span>
  <span class="hljs-title function_">onThrottled</span>(<span class="hljs-params">eventType, selector, handler, delay = <span class="hljs-number">100</span></span>) {
    <span class="hljs-keyword">let</span> lastCall = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">let</span> timeoutId = <span class="hljs-literal">null</span>;
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">throttledHandler</span> = (<span class="hljs-params">event</span>) =&gt; {
      <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">const</span> timeSinceLastCall = now - lastCall;
      
      <span class="hljs-keyword">if</span> (timeSinceLastCall &gt;= delay) {
        lastCall = now;
        handler.<span class="hljs-title function_">call</span>(event.<span class="hljs-property">target</span>, event);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å–æ¶ˆä¹‹å‰çš„è¶…æ—¶</span>
        <span class="hljs-keyword">if</span> (timeoutId) {
          <span class="hljs-built_in">clearTimeout</span>(timeoutId);
        }
        
        <span class="hljs-comment">// è®¾ç½®æ–°çš„è¶…æ—¶</span>
        timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          lastCall = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
          handler.<span class="hljs-title function_">call</span>(event.<span class="hljs-property">target</span>, event);
        }, delay - timeSinceLastCall);
      }
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(eventType, selector, throttledHandler);
  }
  
  <span class="hljs-comment">// äº‹ä»¶é˜²æŠ–å§”æ‰˜</span>
  <span class="hljs-title function_">onDebounced</span>(<span class="hljs-params">eventType, selector, handler, delay = <span class="hljs-number">100</span></span>) {
    <span class="hljs-keyword">let</span> timeoutId = <span class="hljs-literal">null</span>;
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">debouncedHandler</span> = (<span class="hljs-params">event</span>) =&gt; {
      <span class="hljs-keyword">if</span> (timeoutId) {
        <span class="hljs-built_in">clearTimeout</span>(timeoutId);
      }
      
      timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        handler.<span class="hljs-title function_">call</span>(event.<span class="hljs-property">target</span>, event);
        timeoutId = <span class="hljs-literal">null</span>;
      }, delay);
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(eventType, selector, debouncedHandler);
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">EventDelegationExample</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">setupDelegation</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> delegation = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventDelegation</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>);
    
    <span class="hljs-comment">// ä¸ºæ‰€æœ‰æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶</span>
    delegation.<span class="hljs-title function_">on</span>(<span class="hljs-string">'click'</span>, <span class="hljs-string">'.btn'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Button clicked:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">textContent</span>);
    });
    
    <span class="hljs-comment">// ä¸ºåŠ¨æ€æ·»åŠ çš„åˆ—è¡¨é¡¹æ·»åŠ äº‹ä»¶</span>
    delegation.<span class="hljs-title function_">on</span>(<span class="hljs-string">'click'</span>, <span class="hljs-string">'.list-item'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'List item clicked:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataset</span>.<span class="hljs-property">id</span>);
    });
    
    <span class="hljs-comment">// è¡¨å•æäº¤é˜²æŠ–</span>
    delegation.<span class="hljs-title function_">onDebounced</span>(<span class="hljs-string">'input'</span>, <span class="hljs-string">'.search-input'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Search:'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>);
    }, <span class="hljs-number">300</span>);
    
    <span class="hljs-comment">// æ»šåŠ¨äº‹ä»¶èŠ‚æµ</span>
    delegation.<span class="hljs-title function_">onThrottled</span>(<span class="hljs-string">'scroll'</span>, <span class="hljs-string">'.scroll-container'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Scrolling...'</span>);
    }, <span class="hljs-number">100</span>);
    
    <span class="hljs-comment">// ä¸€æ¬¡æ€§äº‹ä»¶</span>
    delegation.<span class="hljs-title function_">once</span>(<span class="hljs-string">'click'</span>, <span class="hljs-string">'.intro-modal .close'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">parentElement</span>.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = <span class="hljs-string">'none'</span>;
    });
    
    <span class="hljs-keyword">return</span> delegation;
  }
}
</code></pre>
<h5 data-id="heading-12">4.2 è§¦æ‘¸äº‹ä»¶å§”æ‰˜</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TouchEventDelegation</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">EventDelegation</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">rootElement = <span class="hljs-variable language_">document</span></span>) {
    <span class="hljs-variable language_">super</span>(rootElement);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">touchState</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(); <span class="hljs-comment">// Map&lt;touchId, {element, startX, startY}&gt;</span>
    
    <span class="hljs-comment">// åˆå§‹åŒ–è§¦æ‘¸äº‹ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initTouchEvents</span>();
  }
  
  <span class="hljs-title function_">initTouchEvents</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å¤„ç†è§¦æ‘¸å¼€å§‹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'touchstart'</span>, <span class="hljs-string">'*'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> touch <span class="hljs-keyword">of</span> event.<span class="hljs-property">changedTouches</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">touchState</span>.<span class="hljs-title function_">set</span>(touch.<span class="hljs-property">identifier</span>, {
          <span class="hljs-attr">element</span>: event.<span class="hljs-property">target</span>,
          <span class="hljs-attr">startX</span>: touch.<span class="hljs-property">clientX</span>,
          <span class="hljs-attr">startY</span>: touch.<span class="hljs-property">clientY</span>,
          <span class="hljs-attr">startTime</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
        });
      }
    }, { <span class="hljs-attr">passive</span>: <span class="hljs-literal">true</span> });
    
    <span class="hljs-comment">// å¤„ç†è§¦æ‘¸ç§»åŠ¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'touchmove'</span>, <span class="hljs-string">'*'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> touch <span class="hljs-keyword">of</span> event.<span class="hljs-property">changedTouches</span>) {
        <span class="hljs-keyword">const</span> state = <span class="hljs-variable language_">this</span>.<span class="hljs-property">touchState</span>.<span class="hljs-title function_">get</span>(touch.<span class="hljs-property">identifier</span>);
        <span class="hljs-keyword">if</span> (state) {
          <span class="hljs-keyword">const</span> deltaX = touch.<span class="hljs-property">clientX</span> - state.<span class="hljs-property">startX</span>;
          <span class="hljs-keyword">const</span> deltaY = touch.<span class="hljs-property">clientY</span> - state.<span class="hljs-property">startY</span>;
          
          <span class="hljs-comment">// è§¦å‘è‡ªå®šä¹‰äº‹ä»¶</span>
          <span class="hljs-keyword">const</span> customEvent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">'touchdrag'</span>, {
            <span class="hljs-attr">detail</span>: {
              <span class="hljs-attr">touchId</span>: touch.<span class="hljs-property">identifier</span>,
              <span class="hljs-attr">element</span>: state.<span class="hljs-property">element</span>,
              deltaX,
              deltaY,
              <span class="hljs-attr">clientX</span>: touch.<span class="hljs-property">clientX</span>,
              <span class="hljs-attr">clientY</span>: touch.<span class="hljs-property">clientY</span>
            },
            <span class="hljs-attr">bubbles</span>: <span class="hljs-literal">true</span>
          });
          
          state.<span class="hljs-property">element</span>.<span class="hljs-title function_">dispatchEvent</span>(customEvent);
        }
      }
    }, { <span class="hljs-attr">passive</span>: <span class="hljs-literal">true</span> });
    
    <span class="hljs-comment">// å¤„ç†è§¦æ‘¸ç»“æŸ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'touchend'</span>, <span class="hljs-string">'*'</span>, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> touch <span class="hljs-keyword">of</span> event.<span class="hljs-property">changedTouches</span>) {
        <span class="hljs-keyword">const</span> state = <span class="hljs-variable language_">this</span>.<span class="hljs-property">touchState</span>.<span class="hljs-title function_">get</span>(touch.<span class="hljs-property">identifier</span>);
        <span class="hljs-keyword">if</span> (state) {
          <span class="hljs-keyword">const</span> deltaTime = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - state.<span class="hljs-property">startTime</span>;
          <span class="hljs-keyword">const</span> deltaX = touch.<span class="hljs-property">clientX</span> - state.<span class="hljs-property">startX</span>;
          <span class="hljs-keyword">const</span> deltaY = touch.<span class="hljs-property">clientY</span> - state.<span class="hljs-property">startY</span>;
          <span class="hljs-keyword">const</span> distance = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sqrt</span>(deltaX * deltaX + deltaY * deltaY);
          
          <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æ˜¯ç‚¹å‡»ï¼ˆå¿«é€Ÿè§¦æ‘¸ä¸”ç§»åŠ¨è·ç¦»å°ï¼‰</span>
          <span class="hljs-keyword">if</span> (deltaTime &lt; <span class="hljs-number">300</span> &amp;&amp; distance &lt; <span class="hljs-number">10</span>) {
            <span class="hljs-keyword">const</span> clickEvent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MouseEvent</span>(<span class="hljs-string">'click'</span>, {
              <span class="hljs-attr">bubbles</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">cancelable</span>: <span class="hljs-literal">true</span>,
              <span class="hljs-attr">clientX</span>: touch.<span class="hljs-property">clientX</span>,
              <span class="hljs-attr">clientY</span>: touch.<span class="hljs-property">clientY</span>
            });
            
            state.<span class="hljs-property">element</span>.<span class="hljs-title function_">dispatchEvent</span>(clickEvent);
          }
          
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">touchState</span>.<span class="hljs-title function_">delete</span>(touch.<span class="hljs-property">identifier</span>);
        }
      }
    }, { <span class="hljs-attr">passive</span>: <span class="hljs-literal">true</span> });
  }
  
  <span class="hljs-comment">// æ·»åŠ æ»‘åŠ¨æ‰‹åŠ¿æ”¯æŒ</span>
  <span class="hljs-title function_">enableSwipe</span>(<span class="hljs-params">selector, options = {}</span>) {
    <span class="hljs-keyword">const</span> defaultOptions = {
      <span class="hljs-attr">threshold</span>: <span class="hljs-number">50</span>, <span class="hljs-comment">// æœ€å°æ»‘åŠ¨è·ç¦»</span>
      <span class="hljs-attr">velocity</span>: <span class="hljs-number">0.3</span>, <span class="hljs-comment">// æœ€å°é€Ÿåº¦</span>
      <span class="hljs-attr">direction</span>: <span class="hljs-string">'horizontal'</span> <span class="hljs-comment">// horizontal, vertical, both</span>
    };
    
    <span class="hljs-keyword">const</span> config = { ...defaultOptions, ...options };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'touchdrag'</span>, selector, <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> { deltaX, deltaY, element } = event.<span class="hljs-property">detail</span>;
      
      <span class="hljs-comment">// æ£€æŸ¥æ»‘åŠ¨æ–¹å‘</span>
      <span class="hljs-keyword">const</span> isHorizontal = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(deltaX) &gt; <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(deltaY);
      <span class="hljs-keyword">const</span> isValidDirection = 
        config.<span class="hljs-property">direction</span> === <span class="hljs-string">'both'</span> ||
        (config.<span class="hljs-property">direction</span> === <span class="hljs-string">'horizontal'</span> &amp;&amp; isHorizontal) ||
        (config.<span class="hljs-property">direction</span> === <span class="hljs-string">'vertical'</span> &amp;&amp; !isHorizontal);
      
      <span class="hljs-keyword">if</span> (!isValidDirection) <span class="hljs-keyword">return</span>;
      
      <span class="hljs-comment">// æ£€æŸ¥æ»‘åŠ¨è·ç¦»</span>
      <span class="hljs-keyword">const</span> distance = isHorizontal ? <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(deltaX) : <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(deltaY);
      <span class="hljs-keyword">if</span> (distance &lt; config.<span class="hljs-property">threshold</span>) <span class="hljs-keyword">return</span>;
      
      <span class="hljs-comment">// ç¡®å®šæ»‘åŠ¨æ–¹å‘</span>
      <span class="hljs-keyword">let</span> direction = <span class="hljs-string">''</span>;
      <span class="hljs-keyword">if</span> (isHorizontal) {
        direction = deltaX &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">'right'</span> : <span class="hljs-string">'left'</span>;
      } <span class="hljs-keyword">else</span> {
        direction = deltaY &gt; <span class="hljs-number">0</span> ? <span class="hljs-string">'down'</span> : <span class="hljs-string">'up'</span>;
      }
      
      <span class="hljs-comment">// è§¦å‘æ»‘åŠ¨æ‰‹åŠ¿äº‹ä»¶</span>
      <span class="hljs-keyword">const</span> swipeEvent = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(<span class="hljs-string">'swipe'</span>, {
        <span class="hljs-attr">detail</span>: {
          direction,
          distance,
          element,
          deltaX,
          deltaY
        },
        <span class="hljs-attr">bubbles</span>: <span class="hljs-literal">true</span>
      });
      
      element.<span class="hljs-title function_">dispatchEvent</span>(swipeEvent);
    });
  }
}
</code></pre>
<h4 data-id="heading-13">äº”ã€è‡ªå®šä¹‰äº‹ä»¶ç³»ç»Ÿ</h4>
<h5 data-id="heading-14">5.1 é«˜çº§äº‹ä»¶æ€»çº¿</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">EventEmitter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onceEvents</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxListeners</span> = <span class="hljs-number">10</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">wildcard</span> = <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-comment">// æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
  <span class="hljs-title function_">on</span>(<span class="hljs-params">eventName, listener</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">has</span>(eventName)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">set</span>(eventName, []);
    }
    
    <span class="hljs-keyword">const</span> listeners = <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">get</span>(eventName);
    listeners.<span class="hljs-title function_">push</span>(listener);
    
    <span class="hljs-comment">// æ£€æŸ¥ç›‘å¬å™¨æ•°é‡é™åˆ¶</span>
    <span class="hljs-keyword">if</span> (listeners.<span class="hljs-property">length</span> &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxListeners</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`Event "<span class="hljs-subst">${eventName}</span>" has more than <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.maxListeners}</span> listeners`</span>);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-comment">// ä¸€æ¬¡æ€§äº‹ä»¶ç›‘å¬å™¨</span>
  <span class="hljs-title function_">once</span>(<span class="hljs-params">eventName, listener</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">onceWrapper</span> = (<span class="hljs-params">...args</span>) =&gt; {
      listener.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">off</span>(eventName, onceWrapper);
    };
    
    <span class="hljs-comment">// ä¿å­˜åŸå§‹ç›‘å¬å™¨å¼•ç”¨ï¼Œä»¥ä¾¿å¯ä»¥æ­£ç¡®ç§»é™¤</span>
    onceWrapper.<span class="hljs-property">listener</span> = listener;
    
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">onceEvents</span>.<span class="hljs-title function_">has</span>(eventName)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">onceEvents</span>.<span class="hljs-title function_">set</span>(eventName, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>());
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">onceEvents</span>.<span class="hljs-title function_">get</span>(eventName).<span class="hljs-title function_">set</span>(listener, onceWrapper);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(eventName, onceWrapper);
  }
  
  <span class="hljs-comment">// ç§»é™¤äº‹ä»¶ç›‘å¬å™¨</span>
  <span class="hljs-title function_">off</span>(<span class="hljs-params">eventName, listener</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">has</span>(eventName)) <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
    
    <span class="hljs-keyword">const</span> listeners = <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">get</span>(eventName);
    
    <span class="hljs-comment">// ç§»é™¤ç‰¹å®šç›‘å¬å™¨</span>
    <span class="hljs-keyword">if</span> (listener) {
      <span class="hljs-keyword">const</span> index = listeners.<span class="hljs-title function_">indexOf</span>(listener);
      <span class="hljs-keyword">if</span> (index !== -<span class="hljs-number">1</span>) {
        listeners.<span class="hljs-title function_">splice</span>(index, <span class="hljs-number">1</span>);
      }
      
      <span class="hljs-comment">// åŒæ—¶ç§»é™¤onceåŒ…è£…å™¨</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">onceEvents</span>.<span class="hljs-title function_">has</span>(eventName)) {
        <span class="hljs-keyword">const</span> onceMap = <span class="hljs-variable language_">this</span>.<span class="hljs-property">onceEvents</span>.<span class="hljs-title function_">get</span>(eventName);
        <span class="hljs-keyword">if</span> (onceMap.<span class="hljs-title function_">has</span>(listener)) {
          <span class="hljs-keyword">const</span> onceWrapper = onceMap.<span class="hljs-title function_">get</span>(listener);
          <span class="hljs-keyword">const</span> wrapperIndex = listeners.<span class="hljs-title function_">indexOf</span>(onceWrapper);
          <span class="hljs-keyword">if</span> (wrapperIndex !== -<span class="hljs-number">1</span>) {
            listeners.<span class="hljs-title function_">splice</span>(wrapperIndex, <span class="hljs-number">1</span>);
          }
          onceMap.<span class="hljs-title function_">delete</span>(listener);
        }
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// ç§»é™¤æ‰€æœ‰ç›‘å¬å™¨</span>
      listeners.<span class="hljs-property">length</span> = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">onceEvents</span>.<span class="hljs-title function_">has</span>(eventName)) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">onceEvents</span>.<span class="hljs-title function_">get</span>(eventName).<span class="hljs-title function_">clear</span>();
      }
    }
    
    <span class="hljs-comment">// å¦‚æœç›‘å¬å™¨æ•°ç»„ä¸ºç©ºï¼Œåˆ é™¤äº‹ä»¶</span>
    <span class="hljs-keyword">if</span> (listeners.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">delete</span>(eventName);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">onceEvents</span>.<span class="hljs-title function_">delete</span>(eventName);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-comment">// è§¦å‘äº‹ä»¶</span>
  <span class="hljs-title function_">emit</span>(<span class="hljs-params">eventName, ...args</span>) {
    <span class="hljs-comment">// è§¦å‘ç²¾ç¡®åŒ¹é…çš„äº‹ä»¶</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">has</span>(eventName)) {
      <span class="hljs-keyword">const</span> listeners = <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">get</span>(eventName).<span class="hljs-title function_">slice</span>();
      
      <span class="hljs-comment">// å¼‚æ­¥è§¦å‘</span>
      <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
        listeners.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> {
          <span class="hljs-keyword">try</span> {
            listener.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
          } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Error in event listener for "<span class="hljs-subst">${eventName}</span>":`</span>, error);
          }
        });
      });
    }
    
    <span class="hljs-comment">// è§¦å‘é€šé…ç¬¦äº‹ä»¶</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">wildcard</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'*'</span>, eventName, ...args);
    }
    
    <span class="hljs-comment">// è§¦å‘å‘½åç©ºé—´äº‹ä»¶</span>
    <span class="hljs-keyword">const</span> namespaceIndex = eventName.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">':'</span>);
    <span class="hljs-keyword">if</span> (namespaceIndex !== -<span class="hljs-number">1</span>) {
      <span class="hljs-keyword">const</span> namespace = eventName.<span class="hljs-title function_">substring</span>(<span class="hljs-number">0</span>, namespaceIndex + <span class="hljs-number">1</span>);
      <span class="hljs-keyword">const</span> eventWithoutNamespace = eventName.<span class="hljs-title function_">substring</span>(namespaceIndex + <span class="hljs-number">1</span>);
      
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">has</span>(namespace)) {
        <span class="hljs-keyword">const</span> listeners = <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">get</span>(namespace).<span class="hljs-title function_">slice</span>();
        
        <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
          listeners.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> {
            <span class="hljs-keyword">try</span> {
              listener.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, eventWithoutNamespace, ...args);
            } <span class="hljs-keyword">catch</span> (error) {
              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Error in namespace event listener for "<span class="hljs-subst">${namespace}</span>":`</span>, error);
            }
          });
        });
      }
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-comment">// è·å–äº‹ä»¶ç›‘å¬å™¨æ•°é‡</span>
  <span class="hljs-title function_">listenerCount</span>(<span class="hljs-params">eventName</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">has</span>(eventName)) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">get</span>(eventName).<span class="hljs-property">length</span>;
  }
  
  <span class="hljs-comment">// è·å–æ‰€æœ‰äº‹ä»¶åç§°</span>
  <span class="hljs-title function_">eventNames</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">keys</span>());
  }
  
  <span class="hljs-comment">// è®¾ç½®æœ€å¤§ç›‘å¬å™¨æ•°é‡</span>
  <span class="hljs-title function_">setMaxListeners</span>(<span class="hljs-params">n</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxListeners</span> = n;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-comment">// å¯ç”¨é€šé…ç¬¦ç›‘å¬</span>
  <span class="hljs-title function_">enableWildcard</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">wildcard</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-comment">// é“¾å¼æ“ä½œæ”¯æŒ</span>
  <span class="hljs-title function_">chain</span>(<span class="hljs-params">eventName</span>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">on</span>: <span class="hljs-function">(<span class="hljs-params">listener</span>) =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(eventName, listener);
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
      },
      <span class="hljs-attr">once</span>: <span class="hljs-function">(<span class="hljs-params">listener</span>) =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">once</span>(eventName, listener);
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
      },
      <span class="hljs-attr">off</span>: <span class="hljs-function">(<span class="hljs-params">listener</span>) =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">off</span>(eventName, listener);
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
      },
      <span class="hljs-attr">emit</span>: <span class="hljs-function">(<span class="hljs-params">...args</span>) =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emit</span>(eventName, ...args);
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
      }
    };
  }
}

<span class="hljs-comment">// å¼‚æ­¥äº‹ä»¶ç³»ç»Ÿ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AsyncEventEmitter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">EventEmitter</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">super</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">asyncListeners</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  }
  
  <span class="hljs-comment">// æ·»åŠ å¼‚æ­¥äº‹ä»¶ç›‘å¬å™¨</span>
  <span class="hljs-title function_">onAsync</span>(<span class="hljs-params">eventName, listener</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">asyncListeners</span>.<span class="hljs-title function_">has</span>(eventName)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">asyncListeners</span>.<span class="hljs-title function_">set</span>(eventName, []);
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">asyncListeners</span>.<span class="hljs-title function_">get</span>(eventName).<span class="hljs-title function_">push</span>(listener);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-comment">// å¼‚æ­¥è§¦å‘äº‹ä»¶</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">emitAsync</span>(<span class="hljs-params">eventName, ...args</span>) {
    <span class="hljs-keyword">const</span> promises = [];
    
    <span class="hljs-comment">// åŒæ­¥ç›‘å¬å™¨</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">has</span>(eventName)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">events</span>.<span class="hljs-title function_">get</span>(eventName).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-keyword">const</span> result = listener.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
          <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Promise</span>) {
            promises.<span class="hljs-title function_">push</span>(result);
          }
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Error in sync event listener for "<span class="hljs-subst">${eventName}</span>":`</span>, error);
        }
      });
    }
    
    <span class="hljs-comment">// å¼‚æ­¥ç›‘å¬å™¨</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">asyncListeners</span>.<span class="hljs-title function_">has</span>(eventName)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">asyncListeners</span>.<span class="hljs-title function_">get</span>(eventName).<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">async</span> listener =&gt; {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> listener.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
          <span class="hljs-keyword">if</span> (result <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Promise</span>) {
            promises.<span class="hljs-title function_">push</span>(result);
          }
        } <span class="hljs-keyword">catch</span> (error) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Error in async event listener for "<span class="hljs-subst">${eventName}</span>":`</span>, error);
        }
      });
    }
    
    <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰å¼‚æ­¥æ“ä½œå®Œæˆ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(promises);
  }
  
  <span class="hljs-comment">// å¸¦æœ‰è¶…æ—¶çš„äº‹ä»¶è§¦å‘</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">emitWithTimeout</span>(<span class="hljs-params">eventName, timeout, ...args</span>) {
    <span class="hljs-keyword">const</span> timeoutPromise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">_, reject</span>) =&gt;</span> {
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Event "<span class="hljs-subst">${eventName}</span>" timeout after <span class="hljs-subst">${timeout}</span>ms`</span>)), timeout);
    });
    
    <span class="hljs-keyword">const</span> eventPromise = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">emitAsync</span>(eventName, ...args);
    
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>([eventPromise, timeoutPromise]);
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">EventSystemExample</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">createEventSystem</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> emitter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AsyncEventEmitter</span>();
    
    <span class="hljs-comment">// å¯ç”¨é€šé…ç¬¦</span>
    emitter.<span class="hljs-title function_">enableWildcard</span>();
    
    <span class="hljs-comment">// ç›‘å¬æ‰€æœ‰äº‹ä»¶</span>
    emitter.<span class="hljs-title function_">on</span>(<span class="hljs-string">'*'</span>, <span class="hljs-function">(<span class="hljs-params">eventName, ...args</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Event "<span class="hljs-subst">${eventName}</span>" emitted with args:`</span>, args);
    });
    
    <span class="hljs-comment">// å¼‚æ­¥äº‹ä»¶å¤„ç†</span>
    emitter.<span class="hljs-title function_">onAsync</span>(<span class="hljs-string">'user:login'</span>, <span class="hljs-keyword">async</span> (userData) =&gt; {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'User login event received:'</span>, userData);
      <span class="hljs-comment">// æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ</span>
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span>));
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Login processing completed'</span>);
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> };
    });
    
    <span class="hljs-comment">// å¸¦è¶…æ—¶çš„äº‹ä»¶è§¦å‘</span>
    emitter.<span class="hljs-title function_">emitWithTimeout</span>(<span class="hljs-string">'user:login'</span>, <span class="hljs-number">2000</span>, { <span class="hljs-attr">userId</span>: <span class="hljs-number">123</span>, <span class="hljs-attr">username</span>: <span class="hljs-string">'john'</span> })
      .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Login successful:'</span>, result))
      .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Login failed:'</span>, error));
    
    <span class="hljs-comment">// é“¾å¼è°ƒç”¨</span>
    emitter.<span class="hljs-title function_">chain</span>(<span class="hljs-string">'app:start'</span>)
      .<span class="hljs-title function_">on</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'App starting...'</span>))
      .<span class="hljs-title function_">emit</span>();
    
    <span class="hljs-keyword">return</span> emitter;
  }
}
</code></pre>
<h5 data-id="heading-15">5.2 æµè§ˆå™¨åŸç”Ÿäº‹ä»¶æ‰©å±•</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NativeEventExtension</span> {
  <span class="hljs-comment">// æ‰©å±•EventTargetåŸå‹</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">extendEventTarget</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> originalAddEventListener = <span class="hljs-title class_">EventTarget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">addEventListener</span>;
    <span class="hljs-keyword">const</span> originalRemoveEventListener = <span class="hljs-title class_">EventTarget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">removeEventListener</span>;
    <span class="hljs-keyword">const</span> originalDispatchEvent = <span class="hljs-title class_">EventTarget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">dispatchEvent</span>;
    
    <span class="hljs-comment">// å¢å¼ºaddEventListener</span>
    <span class="hljs-title class_">EventTarget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">addEventListener</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">type, listener, options</span>) {
      <span class="hljs-comment">// æ”¯æŒonceé€‰é¡¹</span>
      <span class="hljs-keyword">if</span> (options &amp;&amp; options.<span class="hljs-property">once</span>) {
        <span class="hljs-keyword">const</span> originalListener = listener;
        listener = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
          originalListener.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeEventListener</span>(type, listener, options);
        };
      }
      
      <span class="hljs-comment">// æ”¯æŒsignalé€‰é¡¹</span>
      <span class="hljs-keyword">if</span> (options &amp;&amp; options.<span class="hljs-property">signal</span>) {
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">abortListener</span> = (<span class="hljs-params"/>) =&gt; {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeEventListener</span>(type, listener, options);
        };
        options.<span class="hljs-property">signal</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'abort'</span>, abortListener);
        
        <span class="hljs-comment">// ä¿®æ”¹listenerä»¥æ¸…ç†signalç›‘å¬å™¨</span>
        <span class="hljs-keyword">const</span> originalListener = listener;
        listener = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
          options.<span class="hljs-property">signal</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'abort'</span>, abortListener);
          <span class="hljs-keyword">return</span> originalListener.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
        };
      }
      
      <span class="hljs-keyword">return</span> originalAddEventListener.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, type, listener, options);
    };
    
    <span class="hljs-comment">// ä¿æŒremoveEventListenerä¸å˜</span>
    <span class="hljs-title class_">EventTarget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">removeEventListener</span> = originalRemoveEventListener;
    
    <span class="hljs-comment">// å¢å¼ºdispatchEvent</span>
    <span class="hljs-title class_">EventTarget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">dispatchEvent</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
      <span class="hljs-comment">// æ”¯æŒå¼‚æ­¥äº‹ä»¶å¤„ç†</span>
      <span class="hljs-keyword">if</span> (event.<span class="hljs-property">async</span>) {
        <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
          originalDispatchEvent.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, event);
        });
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
      
      <span class="hljs-keyword">return</span> originalDispatchEvent.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, event);
    };
    
    <span class="hljs-comment">// æ·»åŠ è‡ªå®šä¹‰æ–¹æ³•</span>
    <span class="hljs-title class_">EventTarget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">on</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">type, listener, options</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addEventListener</span>(type, listener, options);
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
    };
    
    <span class="hljs-title class_">EventTarget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">off</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">type, listener, options</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeEventListener</span>(type, listener, options);
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
    };
    
    <span class="hljs-title class_">EventTarget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">emit</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">type, detail</span>) {
      <span class="hljs-keyword">const</span> event = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(type, { detail });
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">dispatchEvent</span>(event);
    };
    
    <span class="hljs-title class_">EventTarget</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">once</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">type, listener</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addEventListener</span>(type, listener, { <span class="hljs-attr">once</span>: <span class="hljs-literal">true</span> });
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
    };
  }
  
  <span class="hljs-comment">// åˆ›å»ºå¯å–æ¶ˆçš„å»¶è¿Ÿäº‹ä»¶</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">createDelayedEvent</span>(<span class="hljs-params">target, type, delay, detail</span>) {
    <span class="hljs-keyword">let</span> timeoutId = <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">let</span> cancelled = <span class="hljs-literal">false</span>;
    
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">dispatch</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (!cancelled) {
        target.<span class="hljs-title function_">dispatchEvent</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomEvent</span>(type, { detail }));
      }
    };
    
    timeoutId = <span class="hljs-built_in">setTimeout</span>(dispatch, delay);
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">cancel</span>: <span class="hljs-function">() =&gt;</span> {
        cancelled = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (timeoutId) {
          <span class="hljs-built_in">clearTimeout</span>(timeoutId);
        }
      },
      <span class="hljs-attr">dispatchNow</span>: <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (!cancelled) {
          <span class="hljs-title function_">dispatch</span>();
          <span class="hljs-keyword">if</span> (timeoutId) {
            <span class="hljs-built_in">clearTimeout</span>(timeoutId);
          }
        }
      }
    };
  }
  
  <span class="hljs-comment">// äº‹ä»¶èŠ‚æµè£…é¥°å™¨</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">throttleEvent</span>(<span class="hljs-params">type, delay</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">target, propertyKey, descriptor</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> originalMethod = descriptor.<span class="hljs-property">value</span>;
      <span class="hljs-keyword">let</span> lastCall = <span class="hljs-number">0</span>;
      <span class="hljs-keyword">let</span> timeoutId = <span class="hljs-literal">null</span>;
      
      descriptor.<span class="hljs-property">value</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
        <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
        
        <span class="hljs-keyword">if</span> (now - lastCall &gt;= delay) {
          lastCall = now;
          originalMethod.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, event);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!timeoutId) {
          timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            lastCall = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
            originalMethod.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, event);
            timeoutId = <span class="hljs-literal">null</span>;
          }, delay - (now - lastCall));
        }
      };
      
      <span class="hljs-keyword">return</span> descriptor;
    };
  }
  
  <span class="hljs-comment">// äº‹ä»¶é˜²æŠ–è£…é¥°å™¨</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">debounceEvent</span>(<span class="hljs-params">type, delay</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">target, propertyKey, descriptor</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> originalMethod = descriptor.<span class="hljs-property">value</span>;
      <span class="hljs-keyword">let</span> timeoutId = <span class="hljs-literal">null</span>;
      
      descriptor.<span class="hljs-property">value</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) {
        <span class="hljs-keyword">if</span> (timeoutId) {
          <span class="hljs-built_in">clearTimeout</span>(timeoutId);
        }
        
        timeoutId = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          originalMethod.<span class="hljs-title function_">call</span>(<span class="hljs-variable language_">this</span>, event);
          timeoutId = <span class="hljs-literal">null</span>;
        }, delay);
      };
      
      <span class="hljs-keyword">return</span> descriptor;
    };
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">NativeEventExample</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">setupEnhancedEvents</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ‰©å±•åŸç”Ÿäº‹ä»¶ç³»ç»Ÿ</span>
    <span class="hljs-title class_">NativeEventExtension</span>.<span class="hljs-title function_">extendEventTarget</span>();
    
    <span class="hljs-keyword">const</span> button = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'button'</span>);
    button.<span class="hljs-property">textContent</span> = <span class="hljs-string">'Click me'</span>;
    
    <span class="hljs-comment">// ä½¿ç”¨æ–°API</span>
    button
      .<span class="hljs-title function_">on</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Clicked!'</span>))
      .<span class="hljs-title function_">once</span>(<span class="hljs-string">'mouseenter'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Mouse entered (once)'</span>))
      .<span class="hljs-title function_">emit</span>(<span class="hljs-string">'custom'</span>, { <span class="hljs-attr">message</span>: <span class="hljs-string">'Hello'</span> });
    
    <span class="hljs-comment">// ä½¿ç”¨è£…é¥°å™¨</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Component</span> {
      @<span class="hljs-title class_">NativeEventExtension</span>.<span class="hljs-title function_">throttleEvent</span>(<span class="hljs-string">'scroll'</span>, <span class="hljs-number">100</span>)
      <span class="hljs-title function_">handleScroll</span>(<span class="hljs-params">event</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Throttled scroll:'</span>, event);
      }
      
      @<span class="hljs-title class_">NativeEventExtension</span>.<span class="hljs-title function_">debounceEvent</span>(<span class="hljs-string">'input'</span>, <span class="hljs-number">300</span>)
      <span class="hljs-title function_">handleInput</span>(<span class="hljs-params">event</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Debounced input:'</span>, event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>);
      }
    }
    
    <span class="hljs-keyword">return</span> button;
  }
}
</code></pre>
<h4 data-id="heading-16">å…­ã€DOMæ“ä½œæ€§èƒ½ä¼˜åŒ–</h4>
<h5 data-id="heading-17">6.1 æ‰¹é‡DOMæ›´æ–°</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BatchDOMUpdater</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">updates</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(); <span class="hljs-comment">// Map&lt;element, {properties, children}&gt;</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rafId</span> = <span class="hljs-literal">null</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchSize</span> = <span class="hljs-number">50</span>; <span class="hljs-comment">// æ¯æ‰¹å¤„ç†çš„æœ€å¤§å…ƒç´ æ•°é‡</span>
  }
  
  <span class="hljs-comment">// è®¡åˆ’æ›´æ–°</span>
  <span class="hljs-title function_">scheduleUpdate</span>(<span class="hljs-params">element, updates</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">updates</span>.<span class="hljs-title function_">has</span>(element)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">updates</span>.<span class="hljs-title function_">set</span>(element, {
        <span class="hljs-attr">properties</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(),
        <span class="hljs-attr">children</span>: <span class="hljs-literal">null</span>
      });
    }
    
    <span class="hljs-keyword">const</span> elementUpdates = <span class="hljs-variable language_">this</span>.<span class="hljs-property">updates</span>.<span class="hljs-title function_">get</span>(element);
    
    <span class="hljs-comment">// åˆå¹¶å±æ€§æ›´æ–°</span>
    <span class="hljs-keyword">if</span> (updates.<span class="hljs-property">properties</span>) {
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(updates.<span class="hljs-property">properties</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> {
        elementUpdates.<span class="hljs-property">properties</span>.<span class="hljs-title function_">set</span>(key, value);
      });
    }
    
    <span class="hljs-comment">// è®¾ç½®å­èŠ‚ç‚¹æ›´æ–°</span>
    <span class="hljs-keyword">if</span> (updates.<span class="hljs-property">children</span> !== <span class="hljs-literal">undefined</span>) {
      elementUpdates.<span class="hljs-property">children</span> = updates.<span class="hljs-property">children</span>;
    }
    
    <span class="hljs-comment">// è¯·æ±‚åŠ¨ç”»å¸§è¿›è¡Œæ‰¹é‡æ›´æ–°</span>
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">rafId</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">rafId</span> = <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processBatch</span>());
    }
  }
  
  <span class="hljs-comment">// å¤„ç†æ‰¹é‡æ›´æ–°</span>
  <span class="hljs-title function_">processBatch</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">rafId</span> = <span class="hljs-literal">null</span>;
    
    <span class="hljs-comment">// åˆ›å»ºæ–‡æ¡£ç‰‡æ®µç”¨äºæ‰¹é‡æ’å…¥</span>
    <span class="hljs-keyword">const</span> fragment = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createDocumentFragment</span>();
    <span class="hljs-keyword">const</span> elementsToUpdate = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">updates</span>.<span class="hljs-title function_">entries</span>());
    <span class="hljs-keyword">const</span> batch = elementsToUpdate.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchSize</span>);
    
    <span class="hljs-comment">// åº”ç”¨æ ·å¼å’Œå±æ€§æ›´æ–°</span>
    batch.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[element, updates]</span>) =&gt;</span> {
      <span class="hljs-comment">// æ‰¹é‡åº”ç”¨æ ·å¼</span>
      <span class="hljs-keyword">if</span> (updates.<span class="hljs-property">properties</span>.<span class="hljs-property">size</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">const</span> styleUpdates = {};
        <span class="hljs-keyword">const</span> otherUpdates = {};
        
        updates.<span class="hljs-property">properties</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">value, key</span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'style'</span> &amp;&amp; <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'object'</span>) {
            <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(element.<span class="hljs-property">style</span>, value);
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'style.'</span>)) {
            <span class="hljs-keyword">const</span> styleProp = key.<span class="hljs-title function_">slice</span>(<span class="hljs-number">6</span>);
            element.<span class="hljs-property">style</span>[styleProp] = value;
          } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'className'</span>) {
            element.<span class="hljs-property">className</span> = value;
          } <span class="hljs-keyword">else</span> {
            otherUpdates[key] = value;
          }
        });
        
        <span class="hljs-comment">// ä¸€æ¬¡æ€§è®¾ç½®å…¶ä»–å±æ€§</span>
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(otherUpdates).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> {
          element.<span class="hljs-title function_">setAttribute</span>(key, otherUpdates[key]);
        });
      }
      
      <span class="hljs-comment">// å¤„ç†å­èŠ‚ç‚¹æ›´æ–°</span>
      <span class="hljs-keyword">if</span> (updates.<span class="hljs-property">children</span> !== <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// æ¸…é™¤ç°æœ‰å­èŠ‚ç‚¹</span>
        <span class="hljs-keyword">while</span> (element.<span class="hljs-property">firstChild</span>) {
          element.<span class="hljs-title function_">removeChild</span>(element.<span class="hljs-property">firstChild</span>);
        }
        
        <span class="hljs-comment">// æ·»åŠ æ–°å­èŠ‚ç‚¹</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(updates.<span class="hljs-property">children</span>)) {
          updates.<span class="hljs-property">children</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> {
            <span class="hljs-keyword">if</span> (child <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Node</span>) {
              element.<span class="hljs-title function_">appendChild</span>(child);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> child === <span class="hljs-string">'string'</span>) {
              element.<span class="hljs-title function_">appendChild</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createTextNode</span>(child));
            }
          });
        }
      }
    });
    
    <span class="hljs-comment">// ç§»é™¤å·²å¤„ç†çš„æ›´æ–°</span>
    batch.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[element]</span>) =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">updates</span>.<span class="hljs-title function_">delete</span>(element);
    });
    
    <span class="hljs-comment">// å¦‚æœè¿˜æœ‰å‰©ä½™æ›´æ–°ï¼Œç»§ç»­å¤„ç†</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">updates</span>.<span class="hljs-property">size</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">rafId</span> = <span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processBatch</span>());
    }
  }
  
  <span class="hljs-comment">// å–æ¶ˆæ‰€æœ‰è®¡åˆ’ä¸­çš„æ›´æ–°</span>
  <span class="hljs-title function_">cancel</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">rafId</span>) {
      <span class="hljs-title function_">cancelAnimationFrame</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">rafId</span>);
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">rafId</span> = <span class="hljs-literal">null</span>;
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">updates</span>.<span class="hljs-title function_">clear</span>();
  }
  
  <span class="hljs-comment">// é™æ€æ–¹æ³•ï¼šå¿«é€Ÿæ‰¹é‡åˆ›å»ºå…ƒç´ </span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">createElements</span>(<span class="hljs-params">tagName, count, properties = {}</span>) {
    <span class="hljs-keyword">const</span> fragment = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createDocumentFragment</span>();
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; count; i++) {
      <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(tagName);
      
      <span class="hljs-comment">// åº”ç”¨å±æ€§</span>
      <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(properties).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'style'</span> &amp;&amp; <span class="hljs-keyword">typeof</span> value === <span class="hljs-string">'object'</span>) {
          <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(element.<span class="hljs-property">style</span>, value);
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'className'</span>) {
          element.<span class="hljs-property">className</span> = value;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'data-'</span>)) {
          element.<span class="hljs-title function_">setAttribute</span>(key, value);
        } <span class="hljs-keyword">else</span> {
          element[key] = value;
        }
      });
      
      fragment.<span class="hljs-title function_">appendChild</span>(element);
    }
    
    <span class="hljs-keyword">return</span> fragment;
  }
  
  <span class="hljs-comment">// é™æ€æ–¹æ³•ï¼šä½¿ç”¨æ¨¡æ¿å…‹éš†</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">cloneFromTemplate</span>(<span class="hljs-params">templateId, count, data = []</span>) {
    <span class="hljs-keyword">const</span> template = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(templateId);
    <span class="hljs-keyword">if</span> (!template || template.<span class="hljs-property">tagName</span> !== <span class="hljs-string">'TEMPLATE'</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Template not found'</span>);
    }
    
    <span class="hljs-keyword">const</span> fragment = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createDocumentFragment</span>();
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; count; i++) {
      <span class="hljs-keyword">const</span> clone = <span class="hljs-variable language_">document</span>.importNode(template.<span class="hljs-property">content</span>, <span class="hljs-literal">true</span>);
      
      <span class="hljs-comment">// å¡«å……æ•°æ®</span>
      <span class="hljs-keyword">if</span> (data[i]) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fillTemplate</span>(clone, data[i]);
      }
      
      fragment.<span class="hljs-title function_">appendChild</span>(clone);
    }
    
    <span class="hljs-keyword">return</span> fragment;
  }
  
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">fillTemplate</span>(<span class="hljs-params">node, data</span>) {
    <span class="hljs-comment">// å¤„ç†æ–‡æœ¬èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (node.<span class="hljs-property">nodeType</span> === <span class="hljs-title class_">Node</span>.<span class="hljs-property">TEXT_NODE</span>) {
      <span class="hljs-keyword">const</span> text = node.<span class="hljs-property">textContent</span>;
      <span class="hljs-keyword">const</span> filledText = text.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\{\{(\w+)\}\}/g</span>, <span class="hljs-function">(<span class="hljs-params">match, key</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> data[key] || match;
      });
      
      <span class="hljs-keyword">if</span> (filledText !== text) {
        node.<span class="hljs-property">textContent</span> = filledText;
      }
    }
    
    <span class="hljs-comment">// å¤„ç†å…ƒç´ èŠ‚ç‚¹</span>
    <span class="hljs-keyword">if</span> (node.<span class="hljs-property">nodeType</span> === <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>) {
      <span class="hljs-comment">// å¡«å……å±æ€§</span>
      <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(node.<span class="hljs-property">attributes</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">attr</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> value = attr.<span class="hljs-property">value</span>;
        <span class="hljs-keyword">const</span> filledValue = value.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\{\{(\w+)\}\}/g</span>, <span class="hljs-function">(<span class="hljs-params">match, key</span>) =&gt;</span> {
          <span class="hljs-keyword">return</span> data[key] || match;
        });
        
        <span class="hljs-keyword">if</span> (filledValue !== value) {
          node.<span class="hljs-title function_">setAttribute</span>(attr.<span class="hljs-property">name</span>, filledValue);
        }
      });
      
      <span class="hljs-comment">// é€’å½’å¤„ç†å­èŠ‚ç‚¹</span>
      <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(node.<span class="hljs-property">childNodes</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fillTemplate</span>(child, data);
      });
    }
  }
}
</code></pre>
<h5 data-id="heading-18">6.2 ä½¿ç”¨MutationObserverç›‘æ§DOMå˜åŒ–</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">DOMChangeMonitor</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = {
      <span class="hljs-attr">childList</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">subtree</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">attributes</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">attributeOldValue</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">characterData</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">characterDataOldValue</span>: <span class="hljs-literal">true</span>,
      ...options
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MutationObserver</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">handleMutations</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>));
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span> = {
      <span class="hljs-attr">added</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(),
      <span class="hljs-attr">removed</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(),
      <span class="hljs-attr">attributeChanged</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(),
      <span class="hljs-attr">textChanged</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isObserving</span> = <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-comment">// å¼€å§‹ç›‘æ§</span>
  <span class="hljs-title function_">observe</span>(<span class="hljs-params">target = <span class="hljs-variable language_">document</span>.documentElement</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">isObserving</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">disconnect</span>();
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observer</span>.<span class="hljs-title function_">observe</span>(target, <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isObserving</span> = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-comment">// åœæ­¢ç›‘æ§</span>
  <span class="hljs-title function_">disconnect</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">observer</span>.<span class="hljs-title function_">disconnect</span>();
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isObserving</span> = <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-comment">// å¤„ç†å˜åŒ–</span>
  <span class="hljs-title function_">handleMutations</span>(<span class="hljs-params">mutations</span>) {
    mutations.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">mutation</span> =&gt;</span> {
      <span class="hljs-keyword">switch</span> (mutation.<span class="hljs-property">type</span>) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'childList'</span>:
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleChildListMutation</span>(mutation);
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'attributes'</span>:
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleAttributeMutation</span>(mutation);
          <span class="hljs-keyword">break</span>;
        <span class="hljs-keyword">case</span> <span class="hljs-string">'characterData'</span>:
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">handleCharacterDataMutation</span>(mutation);
          <span class="hljs-keyword">break</span>;
      }
    });
  }
  
  <span class="hljs-comment">// å¤„ç†å­èŠ‚ç‚¹å˜åŒ–</span>
  <span class="hljs-title function_">handleChildListMutation</span>(<span class="hljs-params">mutation</span>) {
    <span class="hljs-comment">// æ–°å¢èŠ‚ç‚¹</span>
    mutation.<span class="hljs-property">addedNodes</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>.<span class="hljs-property">added</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> {
        <span class="hljs-title function_">callback</span>(node, mutation.<span class="hljs-property">target</span>);
      });
    });
    
    <span class="hljs-comment">// ç§»é™¤èŠ‚ç‚¹</span>
    mutation.<span class="hljs-property">removedNodes</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">node</span> =&gt;</span> {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>.<span class="hljs-property">removed</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> {
        <span class="hljs-title function_">callback</span>(node, mutation.<span class="hljs-property">target</span>);
      });
    });
  }
  
  <span class="hljs-comment">// å¤„ç†å±æ€§å˜åŒ–</span>
  <span class="hljs-title function_">handleAttributeMutation</span>(<span class="hljs-params">mutation</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>.<span class="hljs-property">attributeChanged</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> {
      <span class="hljs-title function_">callback</span>({
        <span class="hljs-attr">target</span>: mutation.<span class="hljs-property">target</span>,
        <span class="hljs-attr">attributeName</span>: mutation.<span class="hljs-property">attributeName</span>,
        <span class="hljs-attr">oldValue</span>: mutation.<span class="hljs-property">oldValue</span>,
        <span class="hljs-attr">newValue</span>: mutation.<span class="hljs-property">target</span>.<span class="hljs-title function_">getAttribute</span>(mutation.<span class="hljs-property">attributeName</span>)
      });
    });
  }
  
  <span class="hljs-comment">// å¤„ç†æ–‡æœ¬å˜åŒ–</span>
  <span class="hljs-title function_">handleCharacterDataMutation</span>(<span class="hljs-params">mutation</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>.<span class="hljs-property">textChanged</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">callback</span> =&gt;</span> {
      <span class="hljs-title function_">callback</span>({
        <span class="hljs-attr">target</span>: mutation.<span class="hljs-property">target</span>,
        <span class="hljs-attr">oldValue</span>: mutation.<span class="hljs-property">oldValue</span>,
        <span class="hljs-attr">newValue</span>: mutation.<span class="hljs-property">target</span>.<span class="hljs-property">textContent</span>
      });
    });
  }
  
  <span class="hljs-comment">// æ³¨å†Œå›è°ƒ</span>
  <span class="hljs-title function_">on</span>(<span class="hljs-params">event, callback</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>[event]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>[event].<span class="hljs-title function_">add</span>(callback);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-title function_">off</span>(<span class="hljs-params">event, callback</span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>[event]) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">callbacks</span>[event].<span class="hljs-title function_">delete</span>(callback);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-comment">// ä¸€æ¬¡æ€§ç›‘æ§</span>
  <span class="hljs-title function_">once</span>(<span class="hljs-params">event, callback</span>) {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">wrapper</span> = (<span class="hljs-params">...args</span>) =&gt; {
      <span class="hljs-title function_">callback</span>(...args);
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">off</span>(event, wrapper);
    };
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">on</span>(event, wrapper);
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>;
  }
  
  <span class="hljs-comment">// è·å–å¿«ç…§</span>
  <span class="hljs-title function_">takeSnapshot</span>(<span class="hljs-params">target = <span class="hljs-variable language_">document</span>.documentElement</span>) {
    <span class="hljs-keyword">const</span> snapshot = {
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">html</span>: target.<span class="hljs-property">outerHTML</span>,
      <span class="hljs-attr">children</span>: <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(target.<span class="hljs-property">children</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> ({
        <span class="hljs-attr">tagName</span>: child.<span class="hljs-property">tagName</span>,
        <span class="hljs-attr">attributes</span>: <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(child.<span class="hljs-property">attributes</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">acc, attr</span>) =&gt;</span> {
          acc[attr.<span class="hljs-property">name</span>] = attr.<span class="hljs-property">value</span>;
          <span class="hljs-keyword">return</span> acc;
        }, {}),
        <span class="hljs-attr">childrenCount</span>: child.<span class="hljs-property">children</span>.<span class="hljs-property">length</span>
      }))
    };
    
    <span class="hljs-keyword">return</span> snapshot;
  }
  
  <span class="hljs-comment">// æ¯”è¾ƒå¿«ç…§</span>
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">compareSnapshots</span>(<span class="hljs-params">snapshot1, snapshot2</span>) {
    <span class="hljs-keyword">const</span> differences = [];
    
    <span class="hljs-comment">// æ¯”è¾ƒHTML</span>
    <span class="hljs-keyword">if</span> (snapshot1.<span class="hljs-property">html</span> !== snapshot2.<span class="hljs-property">html</span>) {
      differences.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'html'</span>,
        <span class="hljs-attr">before</span>: snapshot1.<span class="hljs-property">html</span>,
        <span class="hljs-attr">after</span>: snapshot2.<span class="hljs-property">html</span>
      });
    }
    
    <span class="hljs-comment">// æ¯”è¾ƒå­èŠ‚ç‚¹æ•°é‡</span>
    <span class="hljs-keyword">if</span> (snapshot1.<span class="hljs-property">children</span>.<span class="hljs-property">length</span> !== snapshot2.<span class="hljs-property">children</span>.<span class="hljs-property">length</span>) {
      differences.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'childrenCount'</span>,
        <span class="hljs-attr">before</span>: snapshot1.<span class="hljs-property">children</span>.<span class="hljs-property">length</span>,
        <span class="hljs-attr">after</span>: snapshot2.<span class="hljs-property">children</span>.<span class="hljs-property">length</span>
      });
    }
    
    <span class="hljs-comment">// æ¯”è¾ƒå­èŠ‚ç‚¹å±æ€§</span>
    <span class="hljs-keyword">const</span> maxLength = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(snapshot1.<span class="hljs-property">children</span>.<span class="hljs-property">length</span>, snapshot2.<span class="hljs-property">children</span>.<span class="hljs-property">length</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; maxLength; i++) {
      <span class="hljs-keyword">const</span> child1 = snapshot1.<span class="hljs-property">children</span>[i];
      <span class="hljs-keyword">const</span> child2 = snapshot2.<span class="hljs-property">children</span>[i];
      
      <span class="hljs-keyword">if</span> (!child1 &amp;&amp; child2) {
        differences.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">'childAdded'</span>,
          <span class="hljs-attr">index</span>: i,
          <span class="hljs-attr">child</span>: child2
        });
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (child1 &amp;&amp; !child2) {
        differences.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">'childRemoved'</span>,
          <span class="hljs-attr">index</span>: i,
          <span class="hljs-attr">child</span>: child1
        });
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (child1 &amp;&amp; child2) {
        <span class="hljs-comment">// æ¯”è¾ƒæ ‡ç­¾å</span>
        <span class="hljs-keyword">if</span> (child1.<span class="hljs-property">tagName</span> !== child2.<span class="hljs-property">tagName</span>) {
          differences.<span class="hljs-title function_">push</span>({
            <span class="hljs-attr">type</span>: <span class="hljs-string">'tagNameChanged'</span>,
            <span class="hljs-attr">index</span>: i,
            <span class="hljs-attr">before</span>: child1.<span class="hljs-property">tagName</span>,
            <span class="hljs-attr">after</span>: child2.<span class="hljs-property">tagName</span>
          });
        }
        
        <span class="hljs-comment">// æ¯”è¾ƒå±æ€§</span>
        <span class="hljs-keyword">const</span> allAttrs = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([
          ...<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(child1.<span class="hljs-property">attributes</span>),
          ...<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(child2.<span class="hljs-property">attributes</span>)
        ]);
        
        allAttrs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">attr</span> =&gt;</span> {
          <span class="hljs-keyword">const</span> val1 = child1.<span class="hljs-property">attributes</span>[attr];
          <span class="hljs-keyword">const</span> val2 = child2.<span class="hljs-property">attributes</span>[attr];
          
          <span class="hljs-keyword">if</span> (val1 !== val2) {
            differences.<span class="hljs-title function_">push</span>({
              <span class="hljs-attr">type</span>: <span class="hljs-string">'attributeChanged'</span>,
              <span class="hljs-attr">index</span>: i,
              <span class="hljs-attr">attribute</span>: attr,
              <span class="hljs-attr">before</span>: val1,
              <span class="hljs-attr">after</span>: val2
            });
          }
        });
      }
    }
    
    <span class="hljs-keyword">return</span> differences;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DOMMonitorExample</span> {
  <span class="hljs-keyword">static</span> <span class="hljs-title function_">setupMonitoring</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> monitor = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DOMChangeMonitor</span>();
    
    <span class="hljs-comment">// ç›‘æ§å…ƒç´ æ·»åŠ </span>
    monitor.<span class="hljs-title function_">on</span>(<span class="hljs-string">'added'</span>, <span class="hljs-function">(<span class="hljs-params">node, parent</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Node added:'</span>, node.<span class="hljs-property">nodeName</span>, <span class="hljs-string">'to'</span>, parent.<span class="hljs-property">nodeName</span>);
      
      <span class="hljs-comment">// è‡ªåŠ¨ä¸ºæ–°å…ƒç´ æ·»åŠ äº‹ä»¶ç›‘å¬å™¨</span>
      <span class="hljs-keyword">if</span> (node.<span class="hljs-property">nodeType</span> === <span class="hljs-title class_">Node</span>.<span class="hljs-property">ELEMENT_NODE</span>) {
        <span class="hljs-keyword">if</span> (node.<span class="hljs-title function_">matches</span>(<span class="hljs-string">'.dynamic-element'</span>)) {
          node.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Dynamic element clicked'</span>);
          });
        }
      }
    });
    
    <span class="hljs-comment">// ç›‘æ§å±æ€§å˜åŒ–</span>
    monitor.<span class="hljs-title function_">on</span>(<span class="hljs-string">'attributeChanged'</span>, <span class="hljs-function">(<span class="hljs-params">{ target, attributeName, oldValue, newValue }</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Attribute changed: <span class="hljs-subst">${attributeName}</span>`</span>, { oldValue, newValue });
    });
    
    <span class="hljs-comment">// å¼€å§‹ç›‘æ§æ•´ä¸ªæ–‡æ¡£</span>
    monitor.<span class="hljs-title function_">observe</span>();
    
    <span class="hljs-comment">// è·å–å¿«ç…§</span>
    <span class="hljs-keyword">const</span> snapshot1 = monitor.<span class="hljs-title function_">takeSnapshot</span>();
    
    <span class="hljs-comment">// åšä¸€äº›DOMä¿®æ”¹</span>
    <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
    div.<span class="hljs-property">className</span> = <span class="hljs-string">'dynamic-element'</span>;
    div.<span class="hljs-property">textContent</span> = <span class="hljs-string">'New Element'</span>;
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(div);
    
    <span class="hljs-comment">// è·å–å¦ä¸€ä¸ªå¿«ç…§å¹¶æ¯”è¾ƒ</span>
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> snapshot2 = monitor.<span class="hljs-title function_">takeSnapshot</span>();
      <span class="hljs-keyword">const</span> diff = <span class="hljs-title class_">DOMChangeMonitor</span>.<span class="hljs-title function_">compareSnapshots</span>(snapshot1, snapshot2);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'DOM changes:'</span>, diff);
    }, <span class="hljs-number">100</span>);
    
    <span class="hljs-keyword">return</span> monitor;
  }
}
</code></pre>
<h4 data-id="heading-19">æ€»ç»“</h4>
<p>DOMæ“ä½œæ˜¯ç°ä»£Webå¼€å‘çš„æ ¸å¿ƒæŠ€èƒ½ï¼ŒæŒæ¡é«˜æ•ˆçš„DOMæ“ä½œæŠ€æœ¯å¯¹äºæ„å»ºé«˜æ€§èƒ½åº”ç”¨è‡³å…³é‡è¦ã€‚æœ¬æ–‡æ¶µç›–äº†ï¼š</p>
<ol>
<li><strong>DOMæ€§èƒ½ä¼˜åŒ–:</strong> ç†è§£é‡æ’é‡ç»˜ã€é€‰æ‹©å™¨ä¼˜åŒ–</li>
<li><strong>è™šæ‹ŸDOMå®ç°:</strong> åŸç†ã€å®ç°å’Œå®é™…åº”ç”¨</li>
<li><strong>DOM Diffç®—æ³•:</strong> æ ¸å¿ƒç®—æ³•ã€ä¼˜åŒ–ç­–ç•¥</li>
<li><strong>äº‹ä»¶å§”æ‰˜:</strong> é«˜çº§æ¨¡å¼ã€è§¦æ‘¸äº‹ä»¶å¤„ç†</li>
<li><strong>è‡ªå®šä¹‰äº‹ä»¶ç³»ç»Ÿ:</strong> äº‹ä»¶æ€»çº¿ã€å¼‚æ­¥äº‹ä»¶å¤„ç†</li>
<li><strong>æ‰¹é‡DOMæ›´æ–°:</strong> æ€§èƒ½ä¼˜åŒ–æŠ€å·§</li>
<li><strong>DOMå˜åŒ–ç›‘æ§:</strong> MutationObserveré«˜çº§ç”¨æ³•</li>
</ol>
<p>å…³é”®è¦ç‚¹ï¼š</p>
<ul>
<li>å°½é‡å‡å°‘ç›´æ¥DOMæ“ä½œï¼Œä½¿ç”¨è™šæ‹ŸDOMæˆ–æ‰¹é‡æ›´æ–°</li>
<li>åˆç†ä½¿ç”¨äº‹ä»¶å§”æ‰˜å‡å°‘å†…å­˜å ç”¨</li>
<li>åˆ©ç”¨æµè§ˆå™¨APIå¦‚MutationObserverç›‘æ§DOMå˜åŒ–</li>
<li>æŒæ¡è‡ªå®šä¹‰äº‹ä»¶ç³»ç»Ÿå®ç°ç»„ä»¶é€šä¿¡</li>
<li>å§‹ç»ˆè€ƒè™‘æ€§èƒ½å½±å“ï¼Œé¿å…ä¸å¿…è¦çš„é‡æ’é‡ç»˜</li>
</ul>
<p>é€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œä½ åº”è¯¥èƒ½å¤Ÿæ„å»ºé«˜æ•ˆã€å¯ç»´æŠ¤çš„DOMæ“ä½œä»£ç ï¼Œä¸ºå¼€å‘å¤æ‚Webåº”ç”¨æ‰“ä¸‹åšå®åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­¦ä¹ ç¬”è®°ï¼šMybatis ç¤ºä¾‹ä»£ç ï¼Œåº”ç”¨åœºæ™¯ï¼Œé¢è¯•é¢˜]]></title>    <link>https://juejin.cn/post/7584203412197130266</link>    <guid>https://juejin.cn/post/7584203412197130266</guid>    <pubDate>2025-12-16T07:49:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584203412197130266" data-draft-id="7584244431868968987" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­¦ä¹ ç¬”è®°ï¼šMybatis ç¤ºä¾‹ä»£ç ï¼Œåº”ç”¨åœºæ™¯ï¼Œé¢è¯•é¢˜"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-16T07:49:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="sin60"/> <meta itemprop="url" content="https://juejin.cn/user/1576027017202505"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­¦ä¹ ç¬”è®°ï¼šMybatis ç¤ºä¾‹ä»£ç ï¼Œåº”ç”¨åœºæ™¯ï¼Œé¢è¯•é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1576027017202505/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    sin60
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T07:49:21.000Z" title="Tue Dec 16 2025 07:49:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒä»£ç ç¤ºä¾‹</h2>
<h3 data-id="heading-1">1. åŸºç¡€ç¯å¢ƒæ­å»ºï¼ˆMaven ä¾èµ–ï¼‰</h3>
<p>xml</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- MyBatis æ ¸å¿ƒä¾èµ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.13<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- MySQL é©±åŠ¨ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.33<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- Spring æ•´åˆ MyBatisï¼ˆä¼ä¸šå¸¸ç”¨ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.0.7<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-2">2. æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼ˆmybatis-config.xmlï¼‰</h3>
<p>xml</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">configuration</span>
        <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//mybatis.org//DTD Config 3.0//EN"</span>
        <span class="hljs-string">"https://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ç¯å¢ƒé…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">"development"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"development"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"JDBC"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"POOLED"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"driver"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"com.mysql.cj.jdbc.Driver"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"jdbc:mysql://localhost:3306/test?useSSL=false<span class="hljs-symbol">&amp;amp;</span>serverTimezone=UTC"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"root"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"123456"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ˜ å°„å™¨é…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">"mapper/UserMapper.xml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code></pre>
<h3 data-id="heading-3">3. å®ä½“ç±»ï¼ˆUser.javaï¼‰</h3>
<p>java</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> username;
    <span class="hljs-keyword">private</span> Integer age;
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> email;

    <span class="hljs-comment">// æ— å‚æ„é€ ã€å…¨å‚æ„é€ ã€getter/setterã€toString</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">()</span> </span>{}
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">User</span><span class="hljs-params">(Long id, <span class="hljs-type">String</span> username, Integer age, <span class="hljs-type">String</span> email)</span> </span>{
        <span class="hljs-keyword">this</span>.id = id;
        <span class="hljs-keyword">this</span>.username = username;
        <span class="hljs-keyword">this</span>.age = age;
        <span class="hljs-keyword">this</span>.email = email;
    }
    <span class="hljs-comment">// getter/setter çœç•¥</span>
    @<span class="hljs-function">Override
    <span class="hljs-keyword">public</span> <span class="hljs-type">String</span> <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">"User{"</span> +
                <span class="hljs-string">"id="</span> + id +
                <span class="hljs-string">", username='"</span> + username + <span class="hljs-string">'''</span> +
                <span class="hljs-string">", age="</span> + age +
                <span class="hljs-string">", email='"</span> + email + <span class="hljs-string">'''</span> +
                <span class="hljs-string">'}'</span>;
    }
}
</code></pre>
<h3 data-id="heading-4">4. Mapper æ¥å£ï¼ˆUserMapper.javaï¼‰</h3>
<p>java</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">interface</span> <span class="hljs-selector-tag">UserMapper</span> {
    <span class="hljs-comment">// æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·</span>
    <span class="hljs-selector-tag">User</span> <span class="hljs-selector-tag">selectUserById</span>(Long id);
    <span class="hljs-comment">// æ–°å¢ç”¨æˆ·</span>
    <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">insertUser</span>(User user);
    <span class="hljs-comment">// æ›´æ–°ç”¨æˆ·</span>
    <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">updateUser</span>(User user);
    <span class="hljs-comment">// åˆ é™¤ç”¨æˆ·</span>
    <span class="hljs-selector-tag">int</span> <span class="hljs-selector-tag">deleteUser</span>(Long id);
    <span class="hljs-comment">// æ¡ä»¶æŸ¥è¯¢ï¼ˆåŠ¨æ€SQLï¼‰</span>
    <span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">User</span>&gt; <span class="hljs-selector-tag">selectUserByCondition</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"username"</span>) String username, <span class="hljs-variable">@Param</span>(<span class="hljs-string">"age"</span>) Integer age);
}
</code></pre>
<h3 data-id="heading-5">5. Mapper XML æ–‡ä»¶ï¼ˆUserMapper.xmlï¼‰</h3>
<p>xml</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span>
        <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>
        <span class="hljs-string">"https://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span>
<span class="hljs-comment">&lt;!-- namespace å¯¹åº” Mapper æ¥å£å…¨è·¯å¾„ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"com.example.mapper.UserMapper"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- ç»“æœæ˜ å°„ï¼ˆå­—æ®µåä¸å±æ€§åä¸ä¸€è‡´æ—¶ä½¿ç”¨ï¼‰ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"UserResultMap"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"com.example.entity.User"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"id"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"username"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"age"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"age"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"email"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æŸ¥è¯¢å•ä¸ª --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"selectUserById"</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">"UserResultMap"</span>&gt;</span>
        SELECT id, username, age, email FROM user WHERE id = #{id}
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ–°å¢ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"insertUser"</span> <span class="hljs-attr">useGeneratedKeys</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">keyProperty</span>=<span class="hljs-string">"id"</span>&gt;</span>
        INSERT INTO user (username, age, email) VALUES (#{username}, #{age}, #{email})
    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- æ›´æ–° --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"updateUser"</span>&gt;</span>
        UPDATE user
        <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"username != null and username != ''"</span>&gt;</span>username = #{username},<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"age != null"</span>&gt;</span>age = #{age},<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"email != null and email != ''"</span>&gt;</span>email = #{email}<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span>
        WHERE id = #{id}
    <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- åˆ é™¤ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"deleteUser"</span>&gt;</span>
        DELETE FROM user WHERE id = #{id}
    <span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- åŠ¨æ€æ¡ä»¶æŸ¥è¯¢ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"selectUserByCondition"</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">"UserResultMap"</span>&gt;</span>
        SELECT id, username, age, email FROM user
        <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"username != null and username != ''"</span>&gt;</span>AND username LIKE CONCAT('%', #{username}, '%')<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"age != null"</span>&gt;</span>AND age = #{age}<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span>
</code></pre>
<h3 data-id="heading-6">6. å·¥å…·ç±»ï¼ˆMyBatisUtil.javaï¼‰</h3>
<p>java</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.apache.ibatis.io.Resources;
<span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;
<span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;
<span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;
<span class="hljs-keyword">import</span> java.io.IOException;
<span class="hljs-keyword">import</span> java.io.InputStream;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBatisUtil</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SqlSessionFactory sqlSessionFactory;

    <span class="hljs-comment">// åˆå§‹åŒ– SqlSessionFactory</span>
    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">resource</span> <span class="hljs-operator">=</span> <span class="hljs-string">"mybatis-config.xml"</span>;
            <span class="hljs-type">InputStream</span> <span class="hljs-variable">inputStream</span> <span class="hljs-operator">=</span> Resources.getResourceAsStream(resource);
            sqlSessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(inputStream);
        } <span class="hljs-keyword">catch</span> (IOException e) {
            e.printStackTrace();
        }
    }

    <span class="hljs-comment">// è·å– SqlSessionï¼ˆè‡ªåŠ¨æäº¤äº‹åŠ¡ï¼‰</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> SqlSession <span class="hljs-title function_">getSqlSession</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> sqlSessionFactory.openSession(<span class="hljs-literal">true</span>);
    }
}
</code></pre>
<h3 data-id="heading-7">7. æµ‹è¯•ç±»</h3>
<p>java</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> com.example.entity.User;
<span class="hljs-keyword">import</span> com.example.mapper.UserMapper;
<span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBatisTest</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// 1. è·å– SqlSession</span>
        <span class="hljs-keyword">try</span> (<span class="hljs-type">SqlSession</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> MyBatisUtil.getSqlSession()) {
            <span class="hljs-type">UserMapper</span> <span class="hljs-variable">userMapper</span> <span class="hljs-operator">=</span> session.getMapper(UserMapper.class);

            <span class="hljs-comment">// æ–°å¢ç”¨æˆ·</span>
            <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">"zhangsan"</span>, <span class="hljs-number">20</span>, <span class="hljs-string">"zhangsan@163.com"</span>);
            userMapper.insertUser(user);
            System.out.println(<span class="hljs-string">"æ–°å¢ç”¨æˆ·IDï¼š"</span> + user.getId());

            <span class="hljs-comment">// æŸ¥è¯¢å•ä¸ªç”¨æˆ·</span>
            <span class="hljs-type">User</span> <span class="hljs-variable">queryUser</span> <span class="hljs-operator">=</span> userMapper.selectUserById(user.getId());
            System.out.println(<span class="hljs-string">"æŸ¥è¯¢åˆ°çš„ç”¨æˆ·ï¼š"</span> + queryUser);

            <span class="hljs-comment">// æ›´æ–°ç”¨æˆ·</span>
            queryUser.setAge(<span class="hljs-number">21</span>);
            userMapper.updateUser(queryUser);
            System.out.println(<span class="hljs-string">"æ›´æ–°åçš„ç”¨æˆ·ï¼š"</span> + userMapper.selectUserById(user.getId()));

            <span class="hljs-comment">// æ¡ä»¶æŸ¥è¯¢</span>
            List&lt;User&gt; userList = userMapper.selectUserByCondition(<span class="hljs-string">"zhang"</span>, <span class="hljs-literal">null</span>);
            System.out.println(<span class="hljs-string">"æ¡ä»¶æŸ¥è¯¢ç»“æœï¼š"</span> + userList);

            <span class="hljs-comment">// åˆ é™¤ç”¨æˆ·</span>
            userMapper.deleteUser(user.getId());
            System.out.println(<span class="hljs-string">"åˆ é™¤åæŸ¥è¯¢ï¼š"</span> + userMapper.selectUserById(user.getId()));
        }
    }
}
</code></pre>
<h3 data-id="heading-8">8. Spring Boot æ•´åˆ MyBatisï¼ˆä¼ä¸šä¸»æµï¼‰</h3>
<h4 data-id="heading-9">ï¼ˆ1ï¼‰application.yml é…ç½®</h4>
<p>yaml</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">spring:</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/test?useSSL=false&amp;serverTimezone=UTC</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">password:</span> <span class="hljs-number">123456</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
<span class="hljs-attr">mybatis:</span>
  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:mapper/*.xml</span>  <span class="hljs-comment"># Mapper XML è·¯å¾„</span>
  <span class="hljs-attr">type-aliases-package:</span> <span class="hljs-string">com.example.entity</span>  <span class="hljs-comment"># å®ä½“ç±»åˆ«ååŒ…</span>
  <span class="hljs-attr">configuration:</span>
    <span class="hljs-attr">map-underscore-to-camel-case:</span> <span class="hljs-literal">true</span>  <span class="hljs-comment"># å¼€å¯ä¸‹åˆ’çº¿è½¬é©¼å³°</span>
</code></pre>
<h4 data-id="heading-10">ï¼ˆ2ï¼‰å¯åŠ¨ç±»æ·»åŠ æ³¨è§£</h4>
<p>java</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> org.<span class="hljs-property">mybatis</span>.<span class="hljs-property">spring</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">MapperScan</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">boot</span>.<span class="hljs-property">SpringApplication</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">boot</span>.<span class="hljs-property">autoconfigure</span>.<span class="hljs-property">SpringBootApplication</span>;

<span class="hljs-meta">@SpringBootApplication</span>
<span class="hljs-meta">@MapperScan</span>(<span class="hljs-string">"com.example.mapper"</span>)  <span class="hljs-comment">// æ‰«æ Mapper æ¥å£</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBatisApplication</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>[] args</span>) {
        <span class="hljs-title class_">SpringApplication</span>.<span class="hljs-title function_">run</span>(<span class="hljs-title class_">MyBatisApplication</span>.<span class="hljs-property">class</span>, args);
    }
}
</code></pre>
<h4 data-id="heading-11">ï¼ˆ3ï¼‰Service å±‚è°ƒç”¨</h4>
<p>java</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> com.<span class="hljs-property">example</span>.<span class="hljs-property">entity</span>.<span class="hljs-property">User</span>;
<span class="hljs-keyword">import</span> com.<span class="hljs-property">example</span>.<span class="hljs-property">mapper</span>.<span class="hljs-property">UserMapper</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">stereotype</span>.<span class="hljs-property">Service</span>;
<span class="hljs-keyword">import</span> javax.<span class="hljs-property">annotation</span>.<span class="hljs-property">Resource</span>;
<span class="hljs-keyword">import</span> java.<span class="hljs-property">util</span>.<span class="hljs-property">List</span>;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">UserMapper</span> userMapper;

    <span class="hljs-keyword">public</span> <span class="hljs-title class_">User</span> <span class="hljs-title function_">getUserById</span>(<span class="hljs-params">Long id</span>) {
        <span class="hljs-keyword">return</span> userMapper.<span class="hljs-title function_">selectUserById</span>(id);
    }

    <span class="hljs-keyword">public</span> int <span class="hljs-title function_">addUser</span>(<span class="hljs-params">User user</span>) {
        <span class="hljs-keyword">return</span> userMapper.<span class="hljs-title function_">insertUser</span>(user);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">User</span>&gt; <span class="hljs-title function_">getUsersByCondition</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> username, Integer age</span>) {
        <span class="hljs-keyword">return</span> userMapper.<span class="hljs-title function_">selectUserByCondition</span>(username, age);
    }
}
</code></pre>
<h2 data-id="heading-12">äºŒã€ä¼ä¸šé«˜é¢‘é¢è¯•é¢˜</h2>
<h3 data-id="heading-13">åŸºç¡€æ¦‚å¿µ</h3>
<ol>
<li>
<p><strong>MyBatis æ˜¯ä»€ä¹ˆï¼Ÿå®ƒå’Œ JDBCã€Hibernate çš„åŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li>
<p>ç­”ï¼šMyBatis æ˜¯åŠè‡ªåŠ¨åŒ– ORM æ¡†æ¶ï¼Œç®€åŒ– JDBC æ“ä½œï¼Œæ”¯æŒè‡ªå®šä¹‰ SQLï¼›</p>
<ul>
<li>JDBCï¼šæ‰‹åŠ¨å†™ SQLã€å¤„ç†è¿æ¥ã€ç»“æœé›†ï¼Œä»£ç å†—ä½™ï¼›</li>
<li>Hibernateï¼šå…¨è‡ªåŠ¨åŒ– ORMï¼Œæ— éœ€å†™ SQLï¼Œé€‚é…å¤šæ•°æ®åº“ï¼Œä½†å¤æ‚ SQL ä¼˜åŒ–å›°éš¾ï¼›</li>
<li>MyBatisï¼šå¹³è¡¡çµæ´»æ€§å’Œå¼€å‘æ•ˆç‡ï¼Œæ”¯æŒè‡ªå®šä¹‰ SQLï¼Œé€‚åˆå¤æ‚ä¸šåŠ¡åœºæ™¯ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>MyBatis çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›ï¼Ÿ</strong></p>
<ul>
<li>
<p>ç­”ï¼š</p>
<ul>
<li><code>SqlSessionFactory</code>ï¼šåˆ›å»º SqlSession çš„å·¥å‚ï¼Œå…¨å±€å”¯ä¸€ï¼›</li>
<li><code>SqlSession</code>ï¼šä¸æ•°æ®åº“çš„ä¼šè¯ï¼Œå°è£… CRUD æ“ä½œï¼›</li>
<li><code>Mapper æ¥å£</code>ï¼šæ˜ å°„ SQL çš„æ¥å£ï¼ŒMyBatis åŠ¨æ€ä»£ç†å®ç°ï¼›</li>
<li><code>Configuration</code>ï¼šMyBatis æ ¸å¿ƒé…ç½®ç±»ï¼Œå­˜å‚¨å…¨å±€é…ç½®ï¼›</li>
<li><code>Executor</code>ï¼šæ‰§è¡Œå™¨ï¼Œå¤„ç† SQL æ‰§è¡Œï¼ˆSimple/Reuse/Batchï¼‰ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>MyBatis ä¸­ #{} å’Œ ${} çš„åŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li>
<p>ç­”ï¼š</p>
<ul>
<li><code>#{}</code>ï¼šå‚æ•°é¢„ç¼–è¯‘ï¼Œé˜²æ­¢ SQL æ³¨å…¥ï¼Œåº•å±‚ç”¨ PreparedStatementï¼›</li>
<li><code>${}</code>ï¼šå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œç›´æ¥æ›¿æ¢å‚æ•°ï¼Œæœ‰æ³¨å…¥é£é™©ï¼Œé€‚ç”¨äºè¡¨å / åˆ—ååŠ¨æ€æ›¿æ¢ï¼ˆå¦‚ ORDER BY ${column}ï¼‰ã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 data-id="heading-14">æ˜ å°„ä¸ SQL</h3>
<ol start="4">
<li>
<p><strong>MyBatis å¦‚ä½•è§£å†³å­—æ®µåä¸å®ä½“ç±»å±æ€§åä¸ä¸€è‡´çš„é—®é¢˜ï¼Ÿ</strong></p>
<ul>
<li>
<p>ç­”ï¼š</p>
<ul>
<li>æ–¹å¼ 1ï¼šSQL ä¸­ä½¿ç”¨åˆ«åï¼ˆ<code>SELECT user_name AS username FROM user</code>ï¼‰ï¼›</li>
<li>æ–¹å¼ 2ï¼šä½¿ç”¨Â <code>&lt;resultMap&gt;</code>Â æ‰‹åŠ¨æ˜ å°„å­—æ®µä¸å±æ€§ï¼›</li>
<li>æ–¹å¼ 3ï¼šå¼€å¯å…¨å±€é…ç½®Â <code>map-underscore-to-camel-case: true</code>ï¼ˆä¸‹åˆ’çº¿è½¬é©¼å³°ï¼‰ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>MyBatis çš„åŠ¨æ€ SQL æœ‰å“ªäº›æ ‡ç­¾ï¼Ÿ</strong></p>
<ul>
<li>ç­”ï¼š<code>&lt;if&gt;</code>ã€<code>&lt;where&gt;</code>ã€<code>&lt;set&gt;</code>ã€<code>&lt;choose&gt;/&lt;when&gt;/&lt;otherwise&gt;</code>ã€<code>&lt;foreach&gt;</code>ã€<code>&lt;trim&gt;</code>Â ç­‰ï¼Œç”¨äºåŠ¨æ€æ‹¼æ¥ SQLï¼Œé€‚é…å¤šæ¡ä»¶æŸ¥è¯¢ã€æ‰¹é‡æ“ä½œç­‰åœºæ™¯ã€‚</li>
</ul>
</li>
<li>
<p><strong>MyBatis å¦‚ä½•å®ç°åˆ†é¡µï¼Ÿ</strong></p>
<ul>
<li>
<p>ç­”ï¼š</p>
<ul>
<li>åŸºç¡€æ–¹å¼ï¼šSQL ä¸­æ‹¼æ¥ LIMIT #{offset}, #{size}ï¼›</li>
<li>æ’ä»¶æ–¹å¼ï¼šä½¿ç”¨ PageHelper æ’ä»¶ï¼ˆä¼ä¸šä¸»æµï¼‰ï¼Œè‡ªåŠ¨æ‹¦æˆª SQL å¹¶æ·»åŠ åˆ†é¡µæ¡ä»¶ï¼›</li>
<li>æ‰‹åŠ¨åˆ†é¡µï¼šæŸ¥è¯¢æ€»æ•° + åˆ†é¡µæŸ¥è¯¢ç»“æœã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>MyBatis ä¸­çš„ä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</strong></p>
<ul>
<li>
<p>ç­”ï¼š</p>
<ul>
<li>ä¸€çº§ç¼“å­˜ï¼šSqlSession çº§åˆ«ï¼Œé»˜è®¤å¼€å¯ï¼ŒåŒä¸€ä¸ª SqlSession å†…æŸ¥è¯¢ç›¸åŒ SQL ä¼šç¼“å­˜ç»“æœï¼Œå…³é—­ SqlSession ç¼“å­˜å¤±æ•ˆï¼›</li>
<li>äºŒçº§ç¼“å­˜ï¼šMapper çº§åˆ«ï¼Œéœ€æ‰‹åŠ¨å¼€å¯ï¼ˆ<code>&lt;cache/&gt;</code>ï¼‰ï¼Œå¤šä¸ª SqlSession å…±äº«ç¼“å­˜ï¼ŒæŸ¥è¯¢ç»“æœéœ€å®ç° Serializable æ¥å£ï¼›</li>
<li>æ³¨æ„ï¼šäºŒçº§ç¼“å­˜æ…ç”¨ï¼Œå¤šè¡¨å…³è”æŸ¥è¯¢æ˜“å¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 data-id="heading-15">é«˜çº§åº”ç”¨</h3>
<ol start="8">
<li>
<p><strong>MyBatis å¦‚ä½•å®ç°å¤šè¡¨å…³è”æŸ¥è¯¢ï¼ˆä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šï¼‰ï¼Ÿ</strong></p>
<ul>
<li>
<p>ç­”ï¼š</p>
<ul>
<li>
<p>ä¸€å¯¹ä¸€ï¼šä½¿ç”¨Â <code>&lt;association&gt;</code>Â æ ‡ç­¾ï¼Œæ˜ å°„å…³è”å¯¹è±¡ï¼ˆå¦‚ User å…³è” Orderï¼‰ï¼›</p>
</li>
<li>
<p>ä¸€å¯¹å¤šï¼šä½¿ç”¨Â <code>&lt;collection&gt;</code>Â æ ‡ç­¾ï¼Œæ˜ å°„å…³è”é›†åˆï¼ˆå¦‚ User å…³è”å¤šä¸ª Orderï¼‰ï¼›</p>
</li>
<li>
<p>ç¤ºä¾‹ï¼š</p>
<p>xml</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"UserOrderMap"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"User"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"user_id"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"id"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"username"</span>/&gt;</span>
    <span class="hljs-comment">&lt;!-- ä¸€å¯¹å¤š --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">collection</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"orders"</span> <span class="hljs-attr">ofType</span>=<span class="hljs-string">"Order"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"order_id"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"id"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"order_no"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"orderNo"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">collection</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>MyBatis çš„æ’ä»¶åŸç†æ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•è‡ªå®šä¹‰æ’ä»¶ï¼Ÿ</strong></p>
<ul>
<li>
<p>ç­”ï¼š</p>
<ul>
<li>
<p>åŸç†ï¼šåŸºäº JDK åŠ¨æ€ä»£ç†ï¼Œæ‹¦æˆªå››å¤§å¯¹è±¡ï¼ˆExecutorã€StatementHandlerã€ParameterHandlerã€ResultSetHandlerï¼‰çš„æ–¹æ³•ï¼›</p>
</li>
<li>
<p>è‡ªå®šä¹‰æ’ä»¶æ­¥éª¤ï¼š</p>
<ol>
<li>å®ç°Â <code>Interceptor</code>Â æ¥å£ï¼Œé‡å†™Â <code>intercept()</code>Â æ–¹æ³•ï¼›</li>
<li>æ·»åŠ Â <code>@Intercepts</code>Â æ³¨è§£æŒ‡å®šæ‹¦æˆªçš„æ–¹æ³•ï¼›</li>
<li>é…ç½®æ’ä»¶åˆ° MyBatis æ ¸å¿ƒé…ç½®ä¸­ã€‚</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>MyBatis ä¸­å¦‚ä½•å¤„ç†äº‹åŠ¡ï¼Ÿ</strong></p>
<ul>
<li>
<p>ç­”ï¼š</p>
<ul>
<li>åŸç”Ÿ MyBatisï¼šé€šè¿‡Â <code>SqlSession</code>Â æ§åˆ¶ï¼ˆ<code>openSession(false)</code>Â æ‰‹åŠ¨æäº¤ï¼Œ<code>commit()</code>/<code>rollback()</code>ï¼‰ï¼›</li>
<li>Spring æ•´åˆï¼šä½¿ç”¨ Spring äº‹åŠ¡ç®¡ç†ï¼ˆ<code>@Transactional</code>Â æ³¨è§£ï¼‰ï¼ŒMyBatis é€‚é… Spring äº‹åŠ¡ç®¡ç†å™¨ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>ä¼ä¸šä¸­å¦‚ä½•ä¼˜åŒ– MyBatis æ€§èƒ½ï¼Ÿ</strong></p>
<ul>
<li>
<p>ç­”ï¼š</p>
<ul>
<li>åˆç†ä½¿ç”¨ç¼“å­˜ï¼ˆä¸€çº§ç¼“å­˜ä¸ºä¸»ï¼ŒäºŒçº§ç¼“å­˜æ…ç”¨ï¼‰ï¼›</li>
<li>é¿å… N+1 æŸ¥è¯¢é—®é¢˜ï¼ˆä½¿ç”¨å…³è”æŸ¥è¯¢ã€å»¶è¿ŸåŠ è½½ï¼‰ï¼›</li>
<li>æ‰¹é‡æ“ä½œä½¿ç”¨Â <code>foreach</code>Â + Batch æ‰§è¡Œå™¨ï¼›</li>
<li>å…³é—­ä¸å¿…è¦çš„æ—¥å¿—ï¼ˆå¦‚ DEBUG çº§åˆ«ï¼‰ï¼›</li>
<li>ä½¿ç”¨ ResultMap ä»£æ›¿ ResultTypeï¼Œå‡å°‘å­—æ®µæ˜ å°„å¼€é”€ï¼›</li>
<li>åˆ†é¡µæŸ¥è¯¢é™åˆ¶è¿”å›è¡Œæ•°ï¼Œé¿å…å…¨è¡¨æ‰«æã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 data-id="heading-16">æ•´åˆä¸å®æˆ˜</h3>
<ol start="12">
<li>
<p><strong>Spring Boot æ•´åˆ MyBatis çš„æ ¸å¿ƒæ­¥éª¤ï¼Ÿ</strong></p>
<ul>
<li>
<p>ç­”ï¼š</p>
<ol>
<li>å¼•å…¥ MyBatis Starter ä¾èµ–ï¼›</li>
<li>é…ç½®æ•°æ®æºå’Œ MyBatis æ ¸å¿ƒå‚æ•°ï¼ˆmapper è·¯å¾„ã€åˆ«åç­‰ï¼‰ï¼›</li>
<li>ä½¿ç”¨Â <code>@MapperScan</code>Â æ‰«æ Mapper æ¥å£ï¼›</li>
<li>ç¼–å†™ Mapper æ¥å£å’Œ XMLï¼ˆæˆ–æ³¨è§£ï¼‰ï¼›</li>
<li>Service å±‚æ³¨å…¥ Mapper è°ƒç”¨ã€‚</li>
</ol>
</li>
</ul>
</li>
<li>
<p><strong>MyBatis æ³¨è§£å¼€å‘å’Œ XML å¼€å‘çš„ä¼˜ç¼ºç‚¹ï¼Ÿ</strong></p>
<ul>
<li>
<p>ç­”ï¼š</p>
<ul>
<li>æ³¨è§£ï¼šç®€æ´ï¼Œé€‚åˆç®€å• SQLï¼Œæ— éœ€ç»´æŠ¤ XMLï¼›ç¼ºç‚¹ï¼šå¤æ‚ SQLã€åŠ¨æ€ SQL å¯è¯»æ€§å·®ï¼Œä¸æ˜“è°ƒè¯•ï¼›</li>
<li>XMLï¼šé€‚åˆå¤æ‚ SQLã€åŠ¨æ€ SQLï¼Œæ˜“ç»´æŠ¤ã€æ˜“è°ƒè¯•ï¼›ç¼ºç‚¹ï¼šæ–‡ä»¶è¾ƒå¤šï¼Œé…ç½®ç¨ç¹çï¼›</li>
<li>ä¼ä¸šå®è·µï¼šç®€å• CRUD ç”¨æ³¨è§£ï¼Œå¤æ‚ SQL ç”¨ XMLã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<h2 data-id="heading-17">ä¸‰ã€ä¼ä¸šåº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-18">1. æ ¸å¿ƒä¸šåŠ¡å¼€å‘ï¼ˆæ‰€æœ‰åç«¯é¡¹ç›®ï¼‰</h3>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šç”¨æˆ·æ¨¡å—ã€è®¢å•æ¨¡å—ã€å•†å“æ¨¡å—ç­‰åŸºç¡€ CRUD æ“ä½œï¼›</li>
<li><strong>ä»·å€¼</strong>ï¼šæ›¿ä»£åŸç”Ÿ JDBCï¼Œå‡å°‘é‡å¤ä»£ç ï¼Œè‡ªå®šä¹‰ SQL é€‚é…ä¸šåŠ¡éœ€æ±‚ï¼ˆå¦‚å¤æ‚æ¡ä»¶æŸ¥è¯¢ã€è”è¡¨æŸ¥è¯¢ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-19">2. åŠ¨æ€æ¡ä»¶æŸ¥è¯¢ï¼ˆç”µå•† / åå°ç®¡ç†ç³»ç»Ÿï¼‰</h3>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šç”µå•†å¹³å°çš„å•†å“ç­›é€‰ï¼ˆä»·æ ¼åŒºé—´ã€åˆ†ç±»ã€é”€é‡æ’åºï¼‰ã€åå°ç®¡ç†ç³»ç»Ÿçš„ç”¨æˆ·åˆ—è¡¨æŸ¥è¯¢ï¼ˆå¤šæ¡ä»¶ç»„åˆï¼‰ï¼›</li>
<li><strong>å®ç°</strong>ï¼šä½¿ç”¨Â <code>&lt;if&gt;</code>ã€<code>&lt;where&gt;</code>ã€<code>&lt;choose&gt;</code>Â ç­‰åŠ¨æ€ SQL æ ‡ç­¾ï¼ŒæŒ‰éœ€æ‹¼æ¥æŸ¥è¯¢æ¡ä»¶ã€‚</li>
</ul>
<h3 data-id="heading-20">3. æ‰¹é‡æ“ä½œï¼ˆæ•°æ®å¯¼å…¥ / è®¢å•æ‰¹é‡å¤„ç†ï¼‰</h3>
<ul>
<li>
<p><strong>åœºæ™¯</strong>ï¼šExcel æ•°æ®å¯¼å…¥ï¼ˆæ‰¹é‡æ–°å¢ç”¨æˆ· / å•†å“ï¼‰ã€è®¢å•æ‰¹é‡å‘è´§ã€æ‰¹é‡åˆ é™¤æ— æ•ˆæ•°æ®ï¼›</p>
</li>
<li>
<p><strong>å®ç°</strong>ï¼š</p>
<p>xml</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">&lt;</span><span class="hljs-keyword">insert</span> id<span class="hljs-operator">=</span>"batchInsertUser"<span class="hljs-operator">&gt;</span>
    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> <span class="hljs-keyword">user</span> (username, age, email) <span class="hljs-keyword">VALUES</span>
    <span class="hljs-operator">&lt;</span>foreach collection<span class="hljs-operator">=</span>"list" item<span class="hljs-operator">=</span>"item" separator<span class="hljs-operator">=</span>","<span class="hljs-operator">&gt;</span>
        (#{item.username}, #{item.age}, #{item.email})
    <span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>foreach<span class="hljs-operator">&gt;</span>
<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span><span class="hljs-keyword">insert</span><span class="hljs-operator">&gt;</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-21">4. å¤šè¡¨å…³è”æŸ¥è¯¢ï¼ˆå¤æ‚ä¸šåŠ¡åœºæ™¯ï¼‰</h3>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šç”µå•†è®¢å•è¯¦æƒ…ï¼ˆå…³è”ç”¨æˆ·ã€å•†å“ã€åœ°å€è¡¨ï¼‰ã€è´¢åŠ¡æŠ¥è¡¨ï¼ˆå…³è”è®¢å•ã€æ”¯ä»˜ã€é€€æ¬¾è¡¨ï¼‰ï¼›</li>
<li><strong>å®ç°</strong>ï¼šä½¿ç”¨Â <code>&lt;association&gt;</code>ï¼ˆä¸€å¯¹ä¸€ï¼‰ã€<code>&lt;collection&gt;</code>ï¼ˆä¸€å¯¹å¤šï¼‰å®ç°å…³è”æ˜ å°„ï¼Œé¿å…å¤šæ¬¡æŸ¥è¯¢ã€‚</li>
</ul>
<h3 data-id="heading-22">5. åˆ†é¡µæŸ¥è¯¢ï¼ˆåˆ—è¡¨å±•ç¤ºï¼‰</h3>
<ul>
<li>
<p><strong>åœºæ™¯</strong>ï¼šå•†å“åˆ—è¡¨ã€è®¢å•åˆ—è¡¨ã€ç”¨æˆ·åˆ—è¡¨ç­‰åˆ†é¡µå±•ç¤ºï¼›</p>
</li>
<li>
<p><strong>å®ç°</strong>ï¼šç»“åˆ PageHelper æ’ä»¶ï¼Œä¸€è¡Œä»£ç å®ç°åˆ†é¡µï¼š</p>
<p>java</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini">PageHelper.startPage(1, 10)<span class="hljs-comment">; // ç¬¬1é¡µï¼Œæ¯é¡µ10æ¡</span>
List&lt;User&gt; <span class="hljs-attr">userList</span> = userMapper.selectUserByCondition(null, null)<span class="hljs-comment">;</span>
PageInfo&lt;User&gt; <span class="hljs-attr">pageInfo</span> = new PageInfo&lt;&gt;(userList)<span class="hljs-comment">;</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-23">6. å­˜å‚¨è¿‡ç¨‹è°ƒç”¨ï¼ˆé‡‘è / ä¼ ç»Ÿè¡Œä¸šï¼‰</h3>
<ul>
<li>
<p><strong>åœºæ™¯</strong>ï¼šé‡‘èè¡Œä¸šçš„è®¡æ¯è®¡ç®—ã€ä¼ ç»Ÿè¡Œä¸šçš„æŠ¥è¡¨ç»Ÿè®¡ï¼ˆå­˜å‚¨è¿‡ç¨‹å°è£…å¤æ‚é€»è¾‘ï¼‰ï¼›</p>
</li>
<li>
<p><strong>å®ç°</strong>ï¼š</p>
<p>xml</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">&lt;</span><span class="hljs-keyword">select</span> id<span class="hljs-operator">=</span>"callProcedure" statementType<span class="hljs-operator">=</span>"CALLABLE"<span class="hljs-operator">&gt;</span>
    {<span class="hljs-keyword">CALL</span> get_user_count(#{count, mode<span class="hljs-operator">=</span><span class="hljs-keyword">OUT</span>, jdbcType<span class="hljs-operator">=</span><span class="hljs-type">INTEGER</span>})}
<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span><span class="hljs-keyword">select</span><span class="hljs-operator">&gt;</span>
</code></pre>
</li>
</ul>
<h3 data-id="heading-24">7. è¯»å†™åˆ†ç¦»ï¼ˆé«˜å¹¶å‘åœºæ™¯ï¼‰</h3>
<ul>
<li><strong>åœºæ™¯</strong>ï¼šç”µå•†ç§’æ€ã€ç›´æ’­å¸¦è´§ç­‰é«˜å¹¶å‘åœºæ™¯ï¼Œè¯»è¯·æ±‚èµ°ä»åº“ï¼Œå†™è¯·æ±‚èµ°ä¸»åº“ï¼›</li>
<li><strong>å®ç°</strong>ï¼šç»“åˆ MyCat/Sharding-JDBC ä¸­é—´ä»¶ï¼ŒMyBatis é…ç½®å¤šæ•°æ®æºï¼Œé€šè¿‡æ’ä»¶åŠ¨æ€åˆ‡æ¢æ•°æ®æºã€‚</li>
</ul>
<h3 data-id="heading-25">8. è‡ªå®šä¹‰æ’ä»¶ï¼ˆé€šç”¨åŠŸèƒ½æ‰©å±•ï¼‰</h3>
<ul>
<li>
<p><strong>åœºæ™¯</strong>ï¼šSQL æ‰§è¡Œè€—æ—¶ç›‘æ§ã€æ•°æ®æƒé™è¿‡æ»¤ï¼ˆå¦‚æŒ‰éƒ¨é—¨è¿‡æ»¤æ•°æ®ï¼‰ã€é˜²å…¨è¡¨æ›´æ–° / åˆ é™¤ï¼›</p>
</li>
<li>
<p><strong>ç¤ºä¾‹</strong>ï¼šè‡ªå®šä¹‰æ’ä»¶æ‹¦æˆª SQLï¼Œç¦æ­¢ä¸å¸¦ WHERE æ¡ä»¶çš„ UPDATE/DELETEï¼š</p>
<p>java</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Intercepts</span>({<span class="hljs-variable">@Signature</span>(type = StatementHandler.class, method = <span class="hljs-string">"prepare"</span>, args = {Connection.class, Integer.class})})
public class SqlInterceptor implements Interceptor {
    <span class="hljs-variable">@Override</span>
    public Object <span class="hljs-built_in">intercept</span>(Invocation invocation) throws Throwable {
        <span class="hljs-selector-tag">StatementHandler</span> <span class="hljs-selector-tag">statementHandler</span> = (StatementHandler) <span class="hljs-selector-tag">invocation</span><span class="hljs-selector-class">.getTarget</span>();
        <span class="hljs-selector-tag">BoundSql</span> <span class="hljs-selector-tag">boundSql</span> = <span class="hljs-selector-tag">statementHandler</span><span class="hljs-selector-class">.getBoundSql</span>();
        <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">sql</span> = <span class="hljs-selector-tag">boundSql</span><span class="hljs-selector-class">.getSql</span>()<span class="hljs-selector-class">.trim</span>()<span class="hljs-selector-class">.toUpperCase</span>();
        <span class="hljs-selector-tag">if</span> ((sql.<span class="hljs-built_in">startsWith</span>(<span class="hljs-string">"UPDATE"</span>) || sql.<span class="hljs-built_in">startsWith</span>(<span class="hljs-string">"DELETE"</span>)) &amp;&amp; !sql.<span class="hljs-built_in">contains</span>(<span class="hljs-string">"WHERE"</span>)) {
            <span class="hljs-selector-tag">throw</span> <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">RuntimeException</span>(<span class="hljs-string">"ç¦æ­¢æ‰§è¡Œä¸å¸¦WHEREæ¡ä»¶çš„UPDATE/DELETEè¯­å¥"</span>);
        }
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">invocation</span><span class="hljs-selector-class">.proceed</span>();
    }
}
</code></pre>
</li>
</ul>
<h2 data-id="heading-26">æ€»ç»“</h2>
<p>MyBatis æ˜¯ä¼ä¸šå¼€å‘ä¸­æœ€å¸¸ç”¨çš„æŒä¹…å±‚æ¡†æ¶ä¹‹ä¸€ï¼Œæ ¸å¿ƒä¼˜åŠ¿æ˜¯<strong>çµæ´»çš„ SQL æ§åˆ¶</strong>å’Œ<strong>ä½å…¥ä¾µæ€§</strong>ã€‚æŒæ¡å…¶æ ¸å¿ƒè¯­æ³•ï¼ˆåŠ¨æ€ SQLã€ç»“æœæ˜ å°„ï¼‰ã€ç¼“å­˜æœºåˆ¶ã€æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼Œä»¥åŠä¸ Spring Boot çš„æ•´åˆï¼Œæ˜¯åº”å¯¹ä¼ä¸šé¢è¯•å’Œå®é™…å¼€å‘çš„å…³é”®ã€‚åœ¨ä¼ä¸šåœºæ™¯ä¸­ï¼Œéœ€æ ¹æ®ä¸šåŠ¡å¤æ‚åº¦é€‰æ‹© XML æˆ–æ³¨è§£å¼€å‘ï¼Œç»“åˆåˆ†é¡µã€æ‰¹é‡æ“ä½œã€å…³è”æŸ¥è¯¢ç­‰ç‰¹æ€§ï¼Œæå‡å¼€å‘æ•ˆç‡å’Œç³»ç»Ÿæ€§èƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åšåå°ç³»ç»Ÿåˆ«å†åªä¼šå•ä½“æ¶æ„äº†ï¼Œå¾®å‰ç«¯æ‰æ˜¯æ›´ä¼˜è§£]]></title>    <link>https://juejin.cn/post/7584073390693974031</link>    <guid>https://juejin.cn/post/7584073390693974031</guid>    <pubDate>2025-12-16T08:29:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584073390693974031" data-draft-id="7584203412197326874" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åšåå°ç³»ç»Ÿåˆ«å†åªä¼šå•ä½“æ¶æ„äº†ï¼Œå¾®å‰ç«¯æ‰æ˜¯æ›´ä¼˜è§£"/> <meta itemprop="keywords" content="å‰ç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-16T08:29:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆè¾°ge"/> <meta itemprop="url" content="https://juejin.cn/user/1961991576240190"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åšåå°ç³»ç»Ÿåˆ«å†åªä¼šå•ä½“æ¶æ„äº†ï¼Œå¾®å‰ç«¯æ‰æ˜¯æ›´ä¼˜è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1961991576240190/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆè¾°ge
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:29:54.000Z" title="Tue Dec 16 2025 08:29:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨åå°ç³»ç»Ÿå¼€å‘é¢†åŸŸï¼Œä¼ ç»Ÿçš„å•ä½“æ¶æ„å·²ç»æ— æ³•æ»¡è¶³ç°ä»£ä¼ä¸šçš„å¤æ‚éœ€æ±‚ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ä¸ºä»€ä¹ˆå¾®å‰ç«¯æ¶æ„æ˜¯åå°ç³»ç»Ÿçš„æ›´ä¼˜é€‰æ‹©ï¼Œå¹¶é€šè¿‡å¼€æºé¡¹ç›® <strong>PbstarAdmin</strong> çš„å®Œæ•´å®è·µæ¡ˆä¾‹ï¼Œå±•ç¤ºå¦‚ä½•æ„å»ºé«˜æ€§èƒ½ã€å¯æ‰©å±•çš„å¾®å‰ç«¯åå°ç³»ç»Ÿã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‰è¨€ï¼šå•ä½“æ¶æ„çš„é‚£äº›å‘</h2>
<p>è¯´å®è¯ï¼Œåšåå°ç³»ç»Ÿå¼€å‘è¿™ä¹ˆå¤šå¹´ï¼Œå•ä½“æ¶æ„çš„ç—›ç‚¹çœŸæ˜¯æ·±æœ‰ä½“ä¼šï¼š</p>
<ul>
<li><strong>ä»£ç è€¦åˆä¸¥é‡</strong>ï¼šå¤šä¸ªä¸šåŠ¡æ¨¡å—æ··æ‚åœ¨ä¸€èµ·ï¼Œä¿®æ”¹ä¸€ä¸ªåŠŸèƒ½å¯èƒ½å½±å“åˆ°å…¶ä»–æ¨¡å—</li>
<li><strong>ä»£ç æ— æ³•éš”ç¦»</strong>ï¼šæ‰€æœ‰ä»£ç éƒ½åœ¨ä¸€ä¸ªä»“åº“ä¸­ï¼Œæ— æ³•è¿›è¡Œç‰©ç†éš”ç¦»ï¼Œæƒé™ç®¡ç†å›°éš¾</li>
<li><strong>æ„å»ºé€Ÿåº¦ç¼“æ…¢</strong>ï¼šéšç€ä¸šåŠ¡å¢é•¿ï¼Œé¡¹ç›®ä½“ç§¯è¶Šæ¥è¶Šå¤§ï¼Œæ„å»ºæ—¶é—´ä»å‡ åˆ†é’Ÿåˆ°åå‡ åˆ†é’Ÿä¸ç­‰</li>
<li><strong>æŠ€æœ¯æ ˆé”å®š</strong>ï¼šæ•´ä¸ªé¡¹ç›®è¢«é™åˆ¶åœ¨å•ä¸€æŠ€æœ¯æ ˆï¼Œæ— æ³•çµæ´»é€‰æ‹©æœ€é€‚åˆçš„æŠ€æœ¯æ–¹æ¡ˆ</li>
<li><strong>å›¢é˜Ÿåä½œå›°éš¾</strong>ï¼šå¤šäººåŒæ—¶å¼€å‘æ—¶ï¼Œä»£ç å†²çªé¢‘å‘ï¼Œå‘å¸ƒéœ€è¦åè°ƒæ‰€æœ‰æ¨¡å—</li>
<li><strong>éƒ¨ç½²é£é™©é«˜</strong>ï¼šä»»ä½•å°æ”¹åŠ¨éƒ½éœ€è¦é‡æ–°éƒ¨ç½²æ•´ä¸ªåº”ç”¨ï¼Œé£é™©å·¨å¤§</li>
</ul>
<p>è¿™äº›é—®é¢˜çš„æ ¹æºåœ¨äºä¼ ç»Ÿçš„å•ä½“æ¶æ„æ¨¡å¼ã€‚åœ¨å•ä½“æ¶æ„ä¸­ï¼Œæ‰€æœ‰çš„ä¸šåŠ¡åŠŸèƒ½éƒ½è¢«æ‰“åŒ…åœ¨ä¸€ä¸ªå·¨å¤§çš„ä»£ç åº“ä¸­ï¼Œå°±åƒä¸€ä¸ªè‡ƒè‚¿çš„å·¨äººï¼Œè¡ŒåŠ¨è¿Ÿç¼“ä¸”å®¹æ˜“æ‘”å€’ã€‚</p>
<h2 data-id="heading-1">å¾®å‰ç«¯ï¼šä¸€ç§å¯è¡Œçš„è§£å†³æ–¹æ¡ˆ</h2>
<p>å¾®å‰ç«¯ï¼ˆMicro Frontendsï¼‰æŠŠå‰ç«¯åº”ç”¨æ‹†åˆ†æˆå¤šä¸ªå°å‹ã€ç‹¬ç«‹çš„éƒ¨åˆ†ã€‚æ¯ä¸ªéƒ¨åˆ†éƒ½èƒ½ç‹¬ç«‹å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²ï¼Œæœ€åç»„åˆæˆä¸€ä¸ªå®Œæ•´çš„åº”ç”¨ã€‚</p>
<p>è¿™æ ·åšçš„å¥½å¤„å¾ˆæ˜æ˜¾ï¼š</p>
<ul>
<li><strong>ç‹¬ç«‹éƒ¨ç½²</strong>ï¼šæ”¹ä¸€ä¸ªæ¨¡å—ä¸ç”¨é‡æ–°å‘å¸ƒæ•´ä¸ªç³»ç»Ÿ</li>
<li><strong>å›¢é˜Ÿè‡ªæ²»</strong>ï¼šæ¯ä¸ªå›¢é˜Ÿç®¡å¥½è‡ªå·±çš„æ¨¡å—å°±è¡Œ</li>
<li><strong>æ¸è¿›è¿ç§»</strong>ï¼šä¸ç”¨ä¸€æ¬¡æ€§é‡å†™ï¼Œå¯ä»¥æ…¢æ…¢æ¥</li>
<li><strong>æ•…éšœéš”ç¦»</strong>ï¼šä¸€ä¸ªæ¨¡å—å´©äº†ä¸ä¼šæ‹–å®æ•´ä¸ªåº”ç”¨</li>
</ul>
<h2 data-id="heading-2">PbstarAdminï¼šå¾®å‰ç«¯æ¶æ„çš„å®è·µæ¡ˆä¾‹</h2>
<p>ä¸ºäº†è®©å¤§å®¶æ›´å¥½åœ°ç†è§£å’Œå®è·µå¾®å‰ç«¯æ¶æ„ï¼Œæˆ‘ä»¬å¼€æºäº†ä¸€ä¸ªå®Œæ•´çš„å¾®å‰ç«¯åå°ç³»ç»Ÿé¡¹ç›® â€”â€” <strong>PbstarAdmin</strong>ã€‚è¿™ä¸ªé¡¹ç›®åŸºäºè…¾è®¯çš„ wujie å¾®å‰ç«¯æ¡†æ¶ï¼Œæä¾›äº†ä¸€å¥—ç»è¿‡å®é™…ä¸šåŠ¡éªŒè¯çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-3">é¡¹ç›®ç‰¹è‰²</h3>
<ul>
<li><strong>å¾®å‰ç«¯æ¶æ„</strong>ï¼šåŸºäº wujie æ¡†æ¶ï¼Œæ”¯æŒåŠ¨æ€åŠ è½½å­åº”ç”¨ï¼Œå®ç°çœŸæ­£çš„æ¨¡å—éš”ç¦»</li>
<li><strong>åŒé‡éš”ç¦»æœºåˆ¶</strong>ï¼šGitå­æ¨¡å— + Rsbuildæ„å»ºï¼Œæ”¯æŒå†…å¤–éƒ¨å­åº”ç”¨æ··åˆç®¡ç†</li>
<li><strong>æ¨¡å—åŒ–è®¾è®¡</strong>ï¼špnpm monorepo ç®¡ç†ï¼Œä»£ç ç»„ç»‡æ¸…æ™°ï¼Œä¾èµ–ç®¡ç†é«˜æ•ˆ</li>
<li><strong>ç»„ä»¶å¤ç”¨</strong>ï¼šå…±äº«ç»„ä»¶åº“ï¼Œç»Ÿä¸€åˆ«åå¼•ç”¨ï¼Œæå‡å¼€å‘æ•ˆç‡</li>
<li><strong>å·¥ç¨‹åŒ–å·¥å…·</strong>ï¼šå®Œæ•´çš„ Ptools å·¥å…·é“¾ï¼Œä»åˆ›å»ºåˆ°æ„å»ºå…¨æµç¨‹è‡ªåŠ¨åŒ–</li>
<li><strong>é«˜æ€§èƒ½æ„å»º</strong>ï¼šåŸºäº Rsbuildï¼Œæ”¯æŒå¤šç¯å¢ƒé…ç½®ï¼Œæ„å»ºé€Ÿåº¦å¿«</li>
</ul>
<h3 data-id="heading-4">å¾®åå°æ¶æ„å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    Main["ä¸»åº”ç”¨&lt;br/&gt;wujieæ¡†æ¶&lt;br/&gt;è·¯ç”±ç®¡ç† | åº”ç”¨æ³¨å†Œ | çŠ¶æ€å…±äº«"]

    Main --&gt; App1["å†…éƒ¨å­åº”ç”¨&lt;br/&gt;ä¸»ä»“åº“å†…&lt;br/&gt;ç‹¬ç«‹æ„å»ºéƒ¨ç½²"]
    Main --&gt; App2["å¤–éƒ¨å­åº”ç”¨&lt;br/&gt;Gitå­æ¨¡å—&lt;br/&gt;ç‹¬ç«‹æ„å»ºéƒ¨ç½²"]

    App1 --&gt; Shared["å…±äº«èµ„æºå±‚&lt;br/&gt;ç»„ä»¶åº“ | å·¥å…·å‡½æ•°&lt;br/&gt;å…¬å…±æ ·å¼ | å›¾æ ‡èµ„æº"]
    App2 --&gt; Shared

    style Main fill:#e1f5ff,stroke:#01579b,stroke-width:2px
    style App1 fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    style App2 fill:#fff3e0,stroke:#e65100,stroke-width:2px
    style Shared fill:#e8f5e9,stroke:#1b5e20,stroke-width:2px
</code></pre>
<h3 data-id="heading-5">æŠ€æœ¯é€‰å‹</h3>
<p>æŠ€æœ¯é€‰å‹æ¯”è¾ƒåŠ¡å®ï¼Œéƒ½æ˜¯ç°åœ¨ä¸»æµçš„æ–¹æ¡ˆï¼š</p>
<ul>
<li><strong>Vue 3</strong>ï¼š Composition API å¼€å‘ä½“éªŒä¸é”™</li>
<li><strong>Pinia</strong>ï¼šçŠ¶æ€ç®¡ç†æ¯” Vuex ç®€æ´</li>
<li><strong>Element Plus</strong>ï¼šç»„ä»¶åº“æˆç†Ÿç¨³å®š</li>
<li><strong>Rsbuild</strong>ï¼šåŸºäº Rspackï¼Œæ„å»ºé€Ÿåº¦å¾ˆå¿«</li>
<li><strong>pnpm</strong>ï¼šmonorepo ç®¡ç†å¾ˆæ–¹ä¾¿</li>
<li><strong>wujie</strong>ï¼šè…¾è®¯çš„å¾®å‰ç«¯æ–¹æ¡ˆï¼Œç›¸å¯¹æˆç†Ÿ</li>
</ul>
<h3 data-id="heading-6">é¡¹ç›®ç»“æ„</h3>
<p>æ•´ä¸ªé¡¹ç›®ç»“æ„æ¯”è¾ƒæ¸…æ™°ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">pbstar-admin/
â”œâ”€â”€ main/                      <span class="hljs-comment"># ä¸»åº”ç”¨ï¼ˆåŸºåº§ï¼‰</span>
â”œâ”€â”€ apps/                      <span class="hljs-comment"># å­åº”ç”¨ç›®å½•</span>
â”‚   â”œâ”€â”€ app-common/            <span class="hljs-comment"># å…¬å…±å­åº”ç”¨æ¨¡å—</span>
â”‚   â”œâ”€â”€ <span class="hljs-keyword">system</span>/                <span class="hljs-comment"># ç³»ç»Ÿç®¡ç†åº”ç”¨</span>
â”‚   â”œâ”€â”€ example/               <span class="hljs-comment"># ç¤ºä¾‹åº”ç”¨</span>
â”‚   â”œâ”€â”€ equipment/             <span class="hljs-comment"># è®¾å¤‡ç®¡ç†åº”ç”¨ï¼ˆå¤–éƒ¨å­åº”ç”¨ï¼‰</span>
â”‚   â””â”€â”€ apps.json              <span class="hljs-comment"># å­åº”ç”¨é…ç½®</span>
â”œâ”€â”€ components/                <span class="hljs-comment"># å…±äº«ç»„ä»¶åº“</span>
â”œâ”€â”€ assets/                    <span class="hljs-comment"># å…±äº«èµ„æº</span>
â””â”€â”€ tools/                     <span class="hljs-comment"># å·¥å…·æ¨¡å—ï¼ˆCLIï¼‰</span>
</code></pre>
<h3 data-id="heading-7">å¾®åº”ç”¨é…ç½®</h3>
<p>åœ¨ <code>apps/apps.json</code> ä¸­é…ç½®å„ä¸ªå¾®åº”ç”¨çš„ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">[</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"system"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"devPort"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8801</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"proUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://pbstar-admin-system.pbstar.cn/"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"example"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"devPort"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8802</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"proUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://pbstar-admin-example.pbstar.cn/"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"equipment"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"devPort"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">8803</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"proUrl"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://pbstar-admin-equipment.pbstar.cn/"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">]</span>
</code></pre>
<h3 data-id="heading-8">ä¸»åº”ç”¨æ ¸å¿ƒä»£ç </h3>
<p>ä¸»åº”ç”¨è´Ÿè´£æ•´ä½“å¸ƒå±€ã€å¯¼èˆªèœå•ç®¡ç†å’Œå¾®åº”ç”¨åŠ è½½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// main/src/stores/apps.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useAppsStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">"apps"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> myApps = <span class="hljs-title function_">ref</span>([]); <span class="hljs-comment">// å­˜å‚¨ç”¨æˆ·çš„åº”ç”¨</span>
  <span class="hljs-keyword">const</span> appId = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// å­˜å‚¨å½“å‰æ¿€æ´»çš„åº”ç”¨</span>

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">setApps</span> = (<span class="hljs-params">apps</span>) =&gt; {
    myApps.<span class="hljs-property">value</span> = apps.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">id</span>: item.<span class="hljs-property">id</span>,
        <span class="hljs-attr">key</span>: item.<span class="hljs-property">key</span>,
        <span class="hljs-attr">name</span>: item.<span class="hljs-property">name</span>,
        <span class="hljs-attr">icon</span>: item.<span class="hljs-property">icon</span>,
        <span class="hljs-attr">group</span>: item.<span class="hljs-property">group</span>,
        <span class="hljs-attr">navs</span>: [],
        <span class="hljs-attr">navsTree</span>: [],
      };
    });
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">setAppId</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">{ id, key }</span>) =&gt; {
    <span class="hljs-keyword">let</span> aId = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">if</span> (id) {
      aId = id;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key) {
      <span class="hljs-keyword">const</span> app = myApps.<span class="hljs-property">value</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">key</span> === key);
      <span class="hljs-keyword">if</span> (app) aId = app.<span class="hljs-property">id</span>;
    }
    <span class="hljs-keyword">if</span> (aId) {
      <span class="hljs-keyword">const</span> navRes = <span class="hljs-keyword">await</span> request.<span class="hljs-title function_">get</span>({
        <span class="hljs-attr">url</span>: <span class="hljs-string">"/main/getMyNavListByAppId"</span>,
        <span class="hljs-attr">data</span>: { <span class="hljs-attr">appId</span>: aId },
      });
      <span class="hljs-keyword">if</span> (navRes.<span class="hljs-property">code</span> !== <span class="hljs-number">200</span>) {
        <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è·å–åº”ç”¨å¯¼èˆªå¤±è´¥ï¼è¯·ç¨åé‡è¯•"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
      <span class="hljs-title function_">setAppNavs</span>(aId, navRes.<span class="hljs-property">data</span>);
    }
    appId.<span class="hljs-property">value</span> = aId;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  };

  <span class="hljs-keyword">return</span> {
    appId,
    setApps,
    setAppId,
    getApp,
    getApps,
    hasAppNav,
  };
});
</code></pre>
<h3 data-id="heading-9">å¯¼èˆªèœå•ç®¡ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// main/src/components/layout/layout.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useNavMenu</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>();
  <span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>();
  <span class="hljs-keyword">const</span> appsStore = <span class="hljs-title function_">useAppsStore</span>();

  <span class="hljs-keyword">const</span> activeIndex = <span class="hljs-title function_">ref</span>(<span class="hljs-string">"1"</span>);
  <span class="hljs-keyword">const</span> list = <span class="hljs-title function_">ref</span>([]);
  <span class="hljs-keyword">const</span> listTree = <span class="hljs-title function_">ref</span>([]);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateNavData</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (appsStore.<span class="hljs-property">appId</span>) {
      <span class="hljs-keyword">const</span> app = appsStore.<span class="hljs-title function_">getApp</span>();
      <span class="hljs-keyword">if</span> (!app) <span class="hljs-keyword">return</span>;
      list.<span class="hljs-property">value</span> = app.<span class="hljs-property">navs</span>;
      listTree.<span class="hljs-property">value</span> = app.<span class="hljs-property">navsTree</span>;
    } <span class="hljs-keyword">else</span> {
      list.<span class="hljs-property">value</span> = [
        {
          <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
          <span class="hljs-attr">name</span>: <span class="hljs-string">"é¦–é¡µ"</span>,
          <span class="hljs-attr">url</span>: <span class="hljs-string">"/admin/pHome"</span>,
          <span class="hljs-attr">icon</span>: <span class="hljs-string">"el-icon-house"</span>,
        },
      ];
      listTree.<span class="hljs-property">value</span> = list.<span class="hljs-property">value</span>;
    }
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">selectNav</span> = (<span class="hljs-params">val</span>) =&gt; {
    activeIndex.<span class="hljs-property">value</span> = val;
    <span class="hljs-keyword">const</span> url = list.<span class="hljs-property">value</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">id</span>.<span class="hljs-title function_">toString</span>() === val)?.<span class="hljs-property">url</span>;
    <span class="hljs-keyword">if</span> (url) {
      router.<span class="hljs-title function_">push</span>(url);
    }
  };

  <span class="hljs-keyword">return</span> {
    listTree,
    activeIndex,
    selectNav,
    updateNavData,
    updateActiveIndex,
  };
}
</code></pre>
<h3 data-id="heading-10">æ„å»ºé…ç½®</h3>
<p>ä½¿ç”¨ Rsbuild è¿›è¡Œé«˜æ€§èƒ½æ„å»ºé…ç½®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// rsbuild.config.mjs</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">pluginVue</span>(), <span class="hljs-title function_">pluginSass</span>(), <span class="hljs-title function_">distZipPlugin</span>()],
  <span class="hljs-attr">output</span>: { <span class="hljs-attr">legalComments</span>: <span class="hljs-string">"none"</span> },
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-string">"@Pcomponents"</span>: <span class="hljs-string">"./components"</span>,
      <span class="hljs-string">"@Passets"</span>: <span class="hljs-string">"./assets"</span>,
    },
  },
  <span class="hljs-attr">server</span>: {
    <span class="hljs-attr">proxy</span>: {
      <span class="hljs-string">"/api"</span>: {
        <span class="hljs-attr">target</span>: <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">PUBLIC_API_BASE_URL</span>,
        <span class="hljs-attr">pathRewrite</span>: { <span class="hljs-string">"^/api"</span>: <span class="hljs-string">""</span> },
        <span class="hljs-attr">changeOrigin</span>: <span class="hljs-literal">true</span>,
      },
    },
  },
  <span class="hljs-attr">environments</span>: {
    <span class="hljs-attr">main</span>: mainConfig,
    ...<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(apps.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">app</span>) =&gt;</span> [app.<span class="hljs-property">key</span>, <span class="hljs-title function_">createAppConfig</span>(app)])),
  },
});
</code></pre>
<h3 data-id="heading-11">Pcomponents å…±äº«ç»„ä»¶åº“</h3>
<p>Pcomponents æ˜¯é¡¹ç›®çš„å…±äº«ç»„ä»¶åº“ï¼Œé€šè¿‡ <code>@Pcomponents</code> åˆ«åç»Ÿä¸€å¼•ç”¨ï¼Œå®ç°è·¨åº”ç”¨ç»„ä»¶å¤ç”¨ã€‚</p>
<h4 data-id="heading-12">ç»„ä»¶åº“ç»“æ„</h4>
<pre><code class="hljs language-csharp" lang="csharp">components/
â”œâ”€â”€ <span class="hljs-keyword">base</span>/                      <span class="hljs-meta"># åŸºç¡€ç»„ä»¶</span>
â”‚   â”œâ”€â”€ p-button/              <span class="hljs-meta"># æŒ‰é’®ç»„ä»¶</span>
â”‚   â”œâ”€â”€ p-dialog/              <span class="hljs-meta"># å¯¹è¯æ¡†ç»„ä»¶</span>
â”‚   â”œâ”€â”€ p-table/               <span class="hljs-meta"># è¡¨æ ¼ç»„ä»¶</span>
â”‚   â”œâ”€â”€ p-search/              <span class="hljs-meta"># æœç´¢ç»„ä»¶</span>
â”‚   â”œâ”€â”€ p-title/               <span class="hljs-meta"># æ ‡é¢˜ç»„ä»¶</span>
â”‚   â”œâ”€â”€ p-item/                <span class="hljs-meta"># è¡¨å•é¡¹ç»„ä»¶</span>
â”‚   â”œâ”€â”€ p-icon/                <span class="hljs-meta"># å›¾æ ‡ç»„ä»¶</span>
â”‚   â””â”€â”€ p-collapse/            <span class="hljs-meta"># æŠ˜å é¢æ¿ç»„ä»¶</span>
â”œâ”€â”€ layout/                    <span class="hljs-meta"># å¸ƒå±€ç»„ä»¶</span>
â”‚   â””â”€â”€ p-twinBox/             <span class="hljs-meta"># åŒæ å¸ƒå±€ç»„ä»¶</span>
â”œâ”€â”€ more/                      <span class="hljs-meta"># é«˜çº§ç»„ä»¶</span>
â”‚   â”œâ”€â”€ p-codeView/            <span class="hljs-meta"># ä»£ç æŸ¥çœ‹å™¨</span>
â”‚   â”œâ”€â”€ p-iconSelect/          <span class="hljs-meta"># å›¾æ ‡é€‰æ‹©å™¨</span>
â”‚   â””â”€â”€ p-verificationCode/    <span class="hljs-meta"># éªŒè¯ç ç»„ä»¶</span>
â”œâ”€â”€ page/                      <span class="hljs-meta"># é¡µé¢çº§ç»„ä»¶</span>
â”‚   â”œâ”€â”€ <span class="hljs-number">403.</span>vue                <span class="hljs-meta"># 403 é”™è¯¯é¡µ</span>
â”‚   â””â”€â”€ <span class="hljs-number">404.</span>vue                <span class="hljs-meta"># 404 é”™è¯¯é¡µ</span>
â””â”€â”€ index.js                   <span class="hljs-meta"># ç»„ä»¶ç»Ÿä¸€å¯¼å‡º</span>
</code></pre>
<h4 data-id="heading-13">ä½¿ç”¨æ–¹å¼</h4>
<p><strong>1. åœ¨ rsbuild.config.mjs ä¸­é…ç½®åˆ«åï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-attr">resolve</span>: {
  <span class="hljs-attr">alias</span>: {
    <span class="hljs-string">"@Pcomponents"</span>: <span class="hljs-string">"./components"</span>,
    <span class="hljs-string">"@Passets"</span>: <span class="hljs-string">"./assets"</span>,
  },
}
</code></pre>
<p><strong>2. åœ¨å­åº”ç”¨ä¸­æŒ‰éœ€å¼•å…¥ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¼•å…¥å¤šä¸ªç»„ä»¶</span>
<span class="hljs-keyword">import</span> { pTable, pDialog, pButton, pItem } <span class="hljs-keyword">from</span> <span class="hljs-string">"@Pcomponents"</span>;

<span class="hljs-comment">// å¼•å…¥å•ä¸ªç»„ä»¶</span>
<span class="hljs-keyword">import</span> { pIcon } <span class="hljs-keyword">from</span> <span class="hljs-string">"@Pcomponents"</span>;
</code></pre>
<p><strong>3. ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;div&gt;
    &lt;p-title title="ç”¨æˆ·ç®¡ç†" /&gt;
    &lt;p-search :options="searchOptions" @search="handleSearch" /&gt;
    &lt;p-table :data="tableData" :columns="columns" @row-click="handleRowClick" /&gt;
    &lt;p-dialog v-model="dialogVisible" title="ç¼–è¾‘ç”¨æˆ·"&gt;
      &lt;p-item label="ç”¨æˆ·å" prop="username"&gt;
        &lt;el-input v-model="form.username" /&gt;
      &lt;/p-item&gt;
    &lt;/p-dialog&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { pTitle, pSearch, pTable, pDialog, pItem } from "@Pcomponents";

const searchOptions = [
  { label: "ç”¨æˆ·å", prop: "username", type: "input" },
  { label: "çŠ¶æ€", prop: "status", type: "select" },
];

const columns = [
  { label: "ç”¨æˆ·å", prop: "username" },
  { label: "é‚®ç®±", prop: "email" },
  { label: "çŠ¶æ€", prop: "status" },
];
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-14">ç»„ä»¶ç‰¹ç‚¹</h4>
<p><strong>1. ç»Ÿä¸€çš„è®¾è®¡é£æ ¼</strong></p>
<ul>
<li>åŸºäº Element Plus äºŒæ¬¡å°è£…</li>
<li>ç»Ÿä¸€çš„ UI è§„èŒƒå’Œäº¤äº’ä½“éªŒ</li>
<li>ç¬¦åˆåå°ç³»ç»Ÿçš„ä¸šåŠ¡åœºæ™¯</li>
</ul>
<p><strong>2. é«˜åº¦å¯é…ç½®</strong></p>
<ul>
<li>é€šè¿‡ props çµæ´»é…ç½®ç»„ä»¶è¡Œä¸º</li>
<li>æä¾›ä¸°å¯Œçš„æ’æ§½æ”¯æŒå®šåˆ¶åŒ–</li>
<li>æ”¯æŒäº‹ä»¶å›è°ƒæ‰©å±•åŠŸèƒ½</li>
</ul>
<p><strong>3. å¼€ç®±å³ç”¨</strong></p>
<ul>
<li>å°è£…äº†å¸¸è§çš„ä¸šåŠ¡é€»è¾‘</li>
<li>å‡å°‘é‡å¤ä»£ç ï¼Œæå‡å¼€å‘æ•ˆç‡</li>
<li>é™ä½å­¦ä¹ æˆæœ¬ï¼Œæ–°æ‰‹å‹å¥½</li>
</ul>
<p><strong>4. è·¨åº”ç”¨å¤ç”¨</strong></p>
<ul>
<li>é€šè¿‡ <code>@Pcomponents</code> åˆ«ååœ¨æ‰€æœ‰å­åº”ç”¨ä¸­ç»Ÿä¸€å¼•ç”¨</li>
<li>monorepo ç®¡ç†ï¼Œä¿®æ”¹åæ‰€æœ‰åº”ç”¨è‡ªåŠ¨æ›´æ–°</li>
<li>é¿å…ç»„ä»¶é‡å¤å¼€å‘å’Œç»´æŠ¤æˆæœ¬</li>
</ul>
<h3 data-id="heading-15">ä»£ç éš”ç¦»çš„åŒé‡æœºåˆ¶</h3>
<h4 data-id="heading-16">ä¼ ç»Ÿæ–¹æ¡ˆçš„å±€é™æ€§</h4>
<p>ä¹‹å‰ç”¨è¿‡ä¸€äº›å¾®å‰ç«¯æ–¹æ¡ˆï¼Œå‘ç°éš”ç¦»åšå¾—å¹¶ä¸å¥½ï¼š</p>
<ul>
<li><strong>ä»£ç éƒ½åœ¨ä¸€èµ·</strong>ï¼šæ‰€æœ‰å­åº”ç”¨ä»£ç æ··åœ¨ä¸€ä¸ªä»“åº“ï¼Œæƒé™æ§åˆ¶å¾ˆéº»çƒ¦</li>
<li><strong>ä¾èµ–ç»å¸¸å†²çª</strong>ï¼šè¿™ä¸ªå­åº”ç”¨è¦Vue3ï¼Œé‚£ä¸ªè¦Vue2ï¼Œæ„å»ºæ—¶å„ç§é—®é¢˜</li>
<li><strong>æ„å»ºäº’ç›¸å½±å“</strong>ï¼šä¸€ä¸ªå­åº”ç”¨æ„å»ºå¤±è´¥äº†ï¼Œæ•´ä¸ªé¡¹ç›®éƒ½è·‘ä¸èµ·æ¥</li>
<li><strong>ç‰ˆæœ¬ç®¡ç†æ··ä¹±</strong>ï¼šæ²¡æ³•å•ç‹¬ç»™æŸä¸ªä¸šåŠ¡æ¨¡å—æ‰“ç‰ˆæœ¬æ ‡ç­¾</li>
</ul>
<h4 data-id="heading-17">Gitå­æ¨¡å— + Rsbuildæ„å»ºçš„åŒé‡éš”ç¦»</h4>
<p>é‡‡ç”¨ <strong>Gitå­æ¨¡å— + Rsbuildæ„å»º</strong> çš„åŒé‡éš”ç¦»ï¼ŒæŠŠä»£ç éš”ç¦»åšåˆ°äº†ç‰©ç†å±‚é¢ã€‚</p>
<p><strong>1. Gitå­æ¨¡å—éš”ç¦»</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># .gitmodules é…ç½®</span>
[submodule <span class="hljs-string">"apps/equipment"</span>]
	path = apps/equipment
	url = https://github.com/pbstar/pbstar-admin-quipment.git
</code></pre>
<p><strong>å†…éƒ¨å­åº”ç”¨ï¼ˆinç±»å‹ï¼‰</strong>ï¼š</p>
<ul>
<li>ä»£ç æ”¾åœ¨ä¸»ä»“åº“é‡Œï¼Œé€‚åˆæ ¸å¿ƒä¸šåŠ¡</li>
<li>å›¢é˜Ÿåä½œæ–¹ä¾¿ï¼Œä»£ç å¤ç”¨å®¹æ˜“</li>
<li>æ„å»ºèµ·æ¥ä¹Ÿå¿«</li>
</ul>
<p><strong>å¤–éƒ¨å­åº”ç”¨ï¼ˆoutç±»å‹ï¼‰</strong>ï¼š</p>
<ul>
<li>ç”¨Gitå­æ¨¡å—ç®¡ç†ï¼Œå®Œå…¨ç‹¬ç«‹çš„ä»“åº“</li>
<li>é€‚åˆä¸šåŠ¡å›¢é˜Ÿæˆ–è€…éœ€è¦ä¿å¯†çš„æ¨¡å—</li>
<li>ç‰ˆæœ¬æ§åˆ¶å®Œå…¨ç‹¬ç«‹</li>
</ul>
<p><strong>2. Rsbuildæ„å»ºéš”ç¦»</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// rsbuild.config.mjs - æ¯ä¸ªå­åº”ç”¨å•ç‹¬çš„é…ç½®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">createAppConfig</span> = (<span class="hljs-params">app</span>) =&gt; {
  <span class="hljs-keyword">const</span> basePath = <span class="hljs-string">`./apps/<span class="hljs-subst">${app.key}</span>`</span>;
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">source</span>: {
      <span class="hljs-attr">entry</span>: { <span class="hljs-attr">index</span>: <span class="hljs-string">`<span class="hljs-subst">${basePath}</span>/src/main.js`</span> },
    },
    <span class="hljs-attr">output</span>: {
      <span class="hljs-attr">distPath</span>: { <span class="hljs-attr">root</span>: <span class="hljs-string">`./build/dist/<span class="hljs-subst">${app.key}</span>`</span> },
    },
    <span class="hljs-attr">resolve</span>: {
      <span class="hljs-attr">alias</span>: {
        <span class="hljs-string">"@"</span>: basePath + <span class="hljs-string">"/src"</span>,
      },
    },
    <span class="hljs-attr">plugins</span>: [
      <span class="hljs-title function_">checkUniqueKeyPlugin</span>({
        <span class="hljs-attr">checkPath</span>: <span class="hljs-string">`<span class="hljs-subst">${basePath}</span>/src`</span>,
        <span class="hljs-attr">checkKeys</span>: [<span class="hljs-string">"btnkey"</span>],
      }),
    ],
  };
};
</code></pre>
<p><strong>3. å®é™…æ•ˆæœ</strong></p>
<p><strong>æƒé™ç®¡ç†</strong>ï¼š</p>
<ul>
<li>ä»“åº“çº§åˆ«æƒé™ï¼šå¤–éƒ¨å­åº”ç”¨å¯ä»¥å•ç‹¬è®¾ç½®Gitæƒé™</li>
<li>ä»£ç å®¡æŸ¥éš”ç¦»ï¼šæ¯ä¸ªå­åº”ç”¨å¯ä»¥æœ‰è‡ªå·±çš„Code Reviewæµç¨‹</li>
<li>æ•æ„Ÿä»£ç ä¿æŠ¤ï¼šæ ¸å¿ƒä¸šåŠ¡ä»£ç å¯ä»¥æ”¾åœ¨å†…éƒ¨å­åº”ç”¨ä¸­</li>
</ul>
<p><strong>ä¾èµ–ç®¡ç†</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¯ä¸ªå­åº”ç”¨å¯ä»¥æœ‰è‡ªå·±çš„ä¾èµ–ï¼Œä¸ä¼šå†²çª</span>
{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"system-subapp"</span>,
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-string">"vue"</span>: <span class="hljs-string">"^3.5.18"</span>,
    <span class="hljs-string">"element-plus"</span>: <span class="hljs-string">"^2.10.7"</span>,
    <span class="hljs-comment">// å­åº”ç”¨ç‰¹å®šçš„ä¾èµ–</span>
    <span class="hljs-string">"echarts"</span>: <span class="hljs-string">"^5.4.0"</span>
  }
}

<span class="hljs-comment">// å¦ä¸€ä¸ªå­åº”ç”¨å¯ä»¥ç”¨ä¸åŒç‰ˆæœ¬</span>
{
  <span class="hljs-string">"name"</span>: <span class="hljs-string">"equipment-subapp"</span>,
  <span class="hljs-string">"dependencies"</span>: {
    <span class="hljs-string">"vue"</span>: <span class="hljs-string">"^3.5.18"</span>,
    <span class="hljs-string">"element-plus"</span>: <span class="hljs-string">"^2.8.0"</span>,
    <span class="hljs-string">"echarts"</span>: <span class="hljs-string">"^4.9.0"</span>  <span class="hljs-comment">// ç‰ˆæœ¬ä¸ä¸€æ ·ï¼Œä½†ä¸ä¼šå†²çª</span>
  }
}
</code></pre>
<p><strong>æ•…éšœéš”ç¦»</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å­åº”ç”¨Aæ„å»ºå‡ºé”™äº†ï¼Œä¸ä¼šå½±å“å­åº”ç”¨B</span>
<span class="hljs-keyword">const</span> appConfigs = {
  <span class="hljs-attr">system</span>: <span class="hljs-title function_">createAppConfig</span>({ <span class="hljs-attr">key</span>: <span class="hljs-string">"system"</span> }), <span class="hljs-comment">// âœ… æ­£å¸¸æ„å»º</span>
  <span class="hljs-attr">equipment</span>: <span class="hljs-title function_">createAppConfig</span>({ <span class="hljs-attr">key</span>: <span class="hljs-string">"equipment"</span> }), <span class="hljs-comment">// âŒ æ„å»ºå¤±è´¥</span>
  <span class="hljs-attr">example</span>: <span class="hljs-title function_">createAppConfig</span>({ <span class="hljs-attr">key</span>: <span class="hljs-string">"example"</span> }), <span class="hljs-comment">// âœ… ä¸å—å½±å“</span>
};
</code></pre>
<h3 data-id="heading-18">Ptools å·¥å…·é“¾</h3>
<p>Ptools æ˜¯é¡¹ç›®å†…ç½®çš„ CLI å·¥å…·ï¼Œé€šè¿‡äº¤äº’å¼å‘½ä»¤ç®€åŒ–å¼€å‘æµç¨‹ï¼Œé¿å…æ‰‹åŠ¨é…ç½®å¤æ‚çš„å‚æ•°ã€‚</p>
<h4 data-id="heading-19">ä¸ºä»€ä¹ˆéœ€è¦ Ptools</h4>
<p><strong>ç›´æ¥ä½¿ç”¨æ„å»ºå‘½ä»¤çš„é—®é¢˜</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># éœ€è¦è®°ä½å¤æ‚çš„å‘½ä»¤å’Œå‚æ•°</span>
rsbuild build --environment equipment --port 8803

<span class="hljs-comment"># å®¹æ˜“æ•²é”™ï¼Œè¿˜å¾—æ‰‹åŠ¨æŒ‡å®šç«¯å£å’Œç¯å¢ƒ</span>
rsbuild dev --environment system --port 8801
</code></pre>
<h4 data-id="heading-20">æ ¸å¿ƒå‘½ä»¤</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨å¼€å‘ç¯å¢ƒ - äº¤äº’å¼é€‰æ‹©</span>
pnpm run dev

<span class="hljs-comment"># æ„å»ºæŒ‡å®šå­åº”ç”¨</span>
pnpm run build

<span class="hljs-comment"># åˆ›å»ºæ–°çš„å­åº”ç”¨ - å¼•å¯¼å¼åˆ›å»º</span>
pnpm run create

<span class="hljs-comment"># æ·»åŠ /ç§»é™¤ä¾èµ–åŒ… - ç²¾ç¡®åˆ°å…·ä½“å·¥ç¨‹</span>
pnpm run add
pnpm run remove
</code></pre>
<h4 data-id="heading-21">å®ç°ç¤ºä¾‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// tools/cli/build.mjs - æ„å»ºå‘½ä»¤å…¶å®å°±æ˜¯å¸®ä½ é€‰ä¸€ä¸‹</span>
<span class="hljs-keyword">const</span> list = [<span class="hljs-string">"main"</span>, ...apps.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">key</span>)];

program
  .<span class="hljs-title function_">version</span>(<span class="hljs-string">"1.0.0"</span>)
  .<span class="hljs-title function_">description</span>(<span class="hljs-string">"å¯åŠ¨åº”ç”¨æ¨¡å—"</span>)
  .<span class="hljs-title function_">action</span>(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> answers = <span class="hljs-keyword">await</span> inquirer.<span class="hljs-title function_">prompt</span>([
        {
          <span class="hljs-attr">type</span>: <span class="hljs-string">"list"</span>,
          <span class="hljs-attr">name</span>: <span class="hljs-string">"appKey"</span>,
          <span class="hljs-attr">message</span>: <span class="hljs-string">"è¯·é€‰æ‹©è¦å¯åŠ¨çš„åº”ç”¨æ¨¡å—:"</span>,
          <span class="hljs-attr">choices</span>: list,
        },
      ]);
      <span class="hljs-keyword">const</span> { appKey } = answers;
      <span class="hljs-keyword">let</span> command = <span class="hljs-string">""</span>;
      <span class="hljs-keyword">if</span> (appKey === <span class="hljs-string">"main"</span>) {
        command = <span class="hljs-string">"rsbuild dev --environment main --port 8800 --open"</span>;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">const</span> app = apps.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">key</span> === appKey);
        command = <span class="hljs-string">`rsbuild dev --environment <span class="hljs-subst">${appKey}</span> --port <span class="hljs-subst">${app.devPort}</span>`</span>;
      }
      <span class="hljs-title function_">execSync</span>(command, { <span class="hljs-attr">stdio</span>: <span class="hljs-string">"inherit"</span>, <span class="hljs-attr">cwd</span>: <span class="hljs-string">"../"</span> });
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(chalk.<span class="hljs-title function_">red</span>(<span class="hljs-string">"Error:"</span>), err);
      process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">1</span>);
    }
  });
</code></pre>
<h4 data-id="heading-22">ä¼˜åŠ¿ç‰¹ç‚¹</h4>
<ol>
<li><strong>ä¸ç”¨è®°é…ç½®</strong>ï¼šå¼€å‘è€…ä¸ç”¨äº†è§£åº•å±‚çš„Rsbuildé…ç½®</li>
<li><strong>ä¸ä¼šé€‰é”™</strong>ï¼šè‡ªåŠ¨å‘ç°å¯ç”¨çš„å­åº”ç”¨ï¼Œé¿å…æ‰‹æ‰“é”™è¯¯</li>
<li><strong>ç»Ÿä¸€å…¥å£</strong>ï¼šæ‰€æœ‰æ“ä½œéƒ½é€šè¿‡ç»Ÿä¸€çš„CLIï¼Œæ¯”è¾ƒå¥½è®°</li>
<li><strong>å‡å°‘å‡ºé”™</strong>ï¼šå†…ç½®å‚æ•°éªŒè¯å’Œé”™è¯¯å¤„ç†</li>
<li><strong>æµç¨‹ç»Ÿä¸€</strong>ï¼šç¡®ä¿å›¢é˜Ÿæˆå‘˜ç”¨ç›¸åŒçš„æµç¨‹</li>
</ol>
<h4 data-id="heading-23">å­åº”ç”¨åˆ›å»ºæµç¨‹</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// tools/cli/create.mjs - æ™ºèƒ½åˆ›å»ºå­åº”ç”¨</span>
<span class="hljs-keyword">const</span> answers = <span class="hljs-keyword">await</span> inquirer.<span class="hljs-title function_">prompt</span>([
  {
    <span class="hljs-attr">type</span>: <span class="hljs-string">"list"</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">"appType"</span>,
    <span class="hljs-attr">message</span>: <span class="hljs-string">"å­åº”ç”¨ç±»å‹:"</span>,
    <span class="hljs-attr">choices</span>: [<span class="hljs-string">"in"</span>, <span class="hljs-string">"out"</span>],
  },
  {
    <span class="hljs-attr">type</span>: <span class="hljs-string">"input"</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">"appKey"</span>,
    <span class="hljs-attr">message</span>: <span class="hljs-string">"å­åº”ç”¨Key:"</span>,
    <span class="hljs-attr">validate</span>: <span class="hljs-function">(<span class="hljs-params">input</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/^[a-z0-9-]+$/</span>.<span class="hljs-title function_">test</span>(input)) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"å­åº”ç”¨Keyåªèƒ½åŒ…å«å°å†™å­—æ¯ã€æ•°å­—å’Œè¿å­—ç¬¦"</span>;
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },
  },
]);

<span class="hljs-comment">// å¤–éƒ¨å­åº”ç”¨å°±åŠ ä¸ªgitå­æ¨¡å—</span>
<span class="hljs-keyword">if</span> (appType === <span class="hljs-string">"out"</span> &amp;&amp; gitUrl) {
  <span class="hljs-title function_">execSync</span>(<span class="hljs-string">`git submodule add <span class="hljs-subst">${gitUrl}</span> apps/<span class="hljs-subst">${appKey}</span>`</span>, {
    <span class="hljs-attr">cwd</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">"../../"</span>),
    <span class="hljs-attr">stdio</span>: <span class="hljs-string">"inherit"</span>,
  });
}
</code></pre>
<h3 data-id="heading-24">å®é™…ä½¿ç”¨æ•ˆæœ</h3>
<p><strong>å¼€å‘ä½“éªŒ</strong></p>
<ul>
<li><strong>ç‹¬ç«‹å¼€å‘</strong>ï¼šæ¯ä¸ªå›¢é˜Ÿå¯ä»¥ç‹¬ç«‹å¼€å‘è‡ªå·±çš„å¾®åº”ç”¨ï¼Œäº’ä¸å¹²æ‰°</li>
<li><strong>æ„å»ºé€Ÿåº¦</strong>ï¼šå•ä¸ªå¾®åº”ç”¨æ„å»ºæ¯”æ•´ä¸ªé¡¹ç›®å¿«å¾ˆå¤š</li>
<li><strong>çƒ­æ›´æ–°</strong>ï¼šä¿®æ”¹ä¸€ä¸ªå¾®åº”ç”¨ä¸ä¼šå½±å“å…¶ä»–åº”ç”¨ï¼Œçƒ­æ›´æ–°å¾ˆå¿«</li>
</ul>
<p><strong>éƒ¨ç½²è¿ç»´</strong></p>
<ul>
<li><strong>ç‹¬ç«‹éƒ¨ç½²</strong>ï¼šæ¯ä¸ªå¾®åº”ç”¨å¯ä»¥ç‹¬ç«‹éƒ¨ç½²ï¼Œé™ä½é£é™©</li>
<li><strong>ç°åº¦å‘å¸ƒ</strong>ï¼šæ”¯æŒå¾®åº”ç”¨çº§åˆ«çš„ç°åº¦å‘å¸ƒ</li>
<li><strong>æ•…éšœéš”ç¦»</strong>ï¼šå•ä¸ªå¾®åº”ç”¨å‡ºé”™ä¸ä¼šå½±å“æ•´ä¸ªç³»ç»Ÿ</li>
</ul>
<p><strong>å›¢é˜Ÿåä½œ</strong></p>
<ul>
<li><strong>å›¢é˜Ÿè‡ªæ²»</strong>ï¼šæ¯ä¸ªå›¢é˜Ÿè´Ÿè´£è‡ªå·±çš„å¾®åº”ç”¨ï¼ŒèŒè´£æ¸…æ™°</li>
<li><strong>æŠ€æœ¯é€‰å‹è‡ªç”±</strong>ï¼šä¸åŒå›¢é˜Ÿå¯ä»¥é€‰æ‹©æœ€é€‚åˆçš„æŠ€æœ¯æ ˆ</li>
<li><strong>å¹¶è¡Œå¼€å‘</strong>ï¼šå¤šä¸ªå›¢é˜Ÿå¯ä»¥å¹¶è¡Œå¼€å‘ï¼Œæé«˜æ•ˆç‡</li>
</ul>
<h2 data-id="heading-25">å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-26">å®‰è£…éƒ¨ç½²</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš†é¡¹ç›®</span>
git <span class="hljs-built_in">clone</span> https://github.com/pbstar/pbstar-admin.git

<span class="hljs-comment"># è¿›å…¥é¡¹ç›®ç›®å½•</span>
<span class="hljs-built_in">cd</span> pbstar-admin

<span class="hljs-comment"># å…‹éš†å¤–éƒ¨å­åº”ç”¨ä»“åº“ï¼ˆå¯é€‰ï¼‰</span>
git submodule update --init

<span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
pnpm install

<span class="hljs-comment"># ä½¿ç”¨Ptoolså¯åŠ¨å¼€å‘ç¯å¢ƒ</span>
pnpm run dev
<span class="hljs-comment"># äº¤äº’å¼é€‰æ‹©è¦å¯åŠ¨çš„å­åº”ç”¨</span>

<span class="hljs-comment"># æ„å»ºé¡¹ç›®</span>
pnpm run build
<span class="hljs-comment"># é€‰æ‹©è¦æ„å»ºçš„å­åº”ç”¨</span>

<span class="hljs-comment"># åˆ›å»ºæ–°çš„å­åº”ç”¨</span>
pnpm run create
</code></pre>
<h3 data-id="heading-27">ä½¿ç”¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¼€å‘ç¯å¢ƒ - äº¤äº’å¼é€‰æ‹©å­åº”ç”¨</span>
$ pnpm run dev
? è¯·é€‰æ‹©è¦å¯åŠ¨çš„åº”ç”¨æ¨¡å—: (Use arrow keys)
â¯ main
  system
  example
  equipment

<span class="hljs-comment"># æ„å»ºæŒ‡å®šå­åº”ç”¨</span>
$ pnpm run build
? è¯·é€‰æ‹©è¦æ„å»ºçš„åº”ç”¨æ¨¡å—: (Use arrow keys)
â¯ main
  system
  example
  equipment

<span class="hljs-comment"># æ·»åŠ ä¾èµ–åŒ…åˆ°æŒ‡å®šå·¥ç¨‹</span>
$ pnpm run add
? è¯·é€‰æ‹©è¦æ·»åŠ ä¾èµ–åŒ…çš„å·¥ç¨‹: (Use arrow keys)
â¯ å…¨å±€å·¥ç¨‹
  assets
  components
  tools
  main
  system
  example
  equipment
? è¯·è¾“å…¥è¦æ·»åŠ çš„ä¾èµ–åŒ…åç§°: axios
? è¯·é€‰æ‹©è¦æ·»åŠ çš„ä¾èµ–åŒ…ç±»å‹: (Use arrow keys)
â¯ dependencies
  devDependencies
</code></pre>
<h2 data-id="heading-28">æ€»ç»“</h2>
<p>å•ä½“æ¶æ„å°±åƒä¸€è‰˜å·¨å¤§çš„èˆªç©ºæ¯èˆ°ï¼Œè™½ç„¶åŠŸèƒ½å¼ºå¤§ï¼Œä½†è½¬å‘å›°éš¾ï¼Œç»´æŠ¤æˆæœ¬é«˜ã€‚è€Œå¾®å‰ç«¯æ¶æ„å°±åƒä¸€æ”¯ç°ä»£åŒ–çš„èˆ°é˜Ÿï¼Œæ¯è‰˜èˆ°è‰‡éƒ½æœ‰è‡ªå·±çš„ä½¿å‘½ï¼Œæ—¢èƒ½ç‹¬ç«‹ä½œæˆ˜ï¼Œåˆèƒ½ååŒé…åˆã€‚</p>
<p>é€šè¿‡å¾®å‰ç«¯å®è·µï¼Œæˆ‘å‘ç°åœ¨åå°ç³»ç»Ÿä¸­çš„ä¼˜åŠ¿ç¡®å®å¾ˆæ˜æ˜¾ï¼š</p>
<ul>
<li><strong>å¼€å‘æ•ˆç‡</strong>ï¼šæ„å»ºé€Ÿåº¦å¿«äº†å¾ˆå¤šï¼Œçƒ­æ›´æ–°åŸºæœ¬æ˜¯ç§’çº§</li>
<li><strong>éƒ¨ç½²è¿ç»´</strong>ï¼šå¯ä»¥ç‹¬ç«‹éƒ¨ç½²ï¼Œä¸ç”¨æ¯æ¬¡éƒ½å…¨é‡å‘å¸ƒ</li>
<li><strong>å›¢é˜Ÿåä½œ</strong>ï¼šå„å›¢é˜Ÿè´Ÿè´£è‡ªå·±çš„æ¨¡å—ï¼Œå†²çªå°‘äº†å¾ˆå¤š</li>
<li><strong>ç³»ç»Ÿç¨³å®šæ€§</strong>ï¼šä¸€ä¸ªæ¨¡å—å‡ºé—®é¢˜ä¸ä¼šæ‹–å®æ•´ä¸ªç³»ç»Ÿ</li>
</ul>
<p>å½“ç„¶ï¼Œå¾®å‰ç«¯ä¹Ÿæœ‰å®ƒçš„å¤æ‚æ€§ï¼Œæ¯”å¦‚é€šä¿¡æœºåˆ¶ã€çŠ¶æ€åŒæ­¥ç­‰é—®é¢˜ã€‚ä½†æ€»çš„æ¥è¯´ï¼Œå¯¹äºå¤§å‹åå°ç³»ç»Ÿï¼Œå¾®å‰ç«¯æ˜¯ä¸€ä¸ªå€¼å¾—è€ƒè™‘çš„æ–¹å‘ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿåœ¨åšåå°ç³»ç»Ÿï¼Œå»ºè®®å¯ä»¥è¯•è¯•çœ‹å¾®å‰ç«¯çš„æ€è·¯ï¼Œæˆ–è®¸èƒ½è§£å†³ä½ å½“å‰é‡åˆ°çš„ä¸€äº›ç—›ç‚¹ã€‚</p>
<h2 data-id="heading-29">ç›¸å…³èµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpbstar%2Fpbstar-admin" target="_blank" title="https://github.com/pbstar/pbstar-admin" ref="nofollow noopener noreferrer">PbstarAdmin é¡¹ç›®åœ°å€</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fpbstar-admin-docs.pbstar.cn%2F" target="_blank" title="http://pbstar-admin-docs.pbstar.cn/" ref="nofollow noopener noreferrer">PbstarAdmin æ–‡æ¡£åœ°å€</a></li>
<li><a href="https://link.juejin.cn?target=http%3A%2F%2Fpbstar-admin.pbstar.cn%2F" target="_blank" title="http://pbstar-admin.pbstar.cn/" ref="nofollow noopener noreferrer">PbstarAdmin åœ¨çº¿æ¼”ç¤º</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTencent%2Fwujie" target="_blank" title="https://github.com/Tencent/wujie" ref="nofollow noopener noreferrer">è…¾è®¯ wujie å¾®å‰ç«¯æ¡†æ¶</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fweb-infra-dev%2Frsbuild" target="_blank" title="https://github.com/web-infra-dev/rsbuild" ref="nofollow noopener noreferrer">Rsbuild æ„å»ºå·¥å…·</a></li>
</ul>
<hr/>
<blockquote>
<p>ğŸ’¡ è¿™é‡Œæ˜¯åˆè¾°ï¼Œä¸€ä¸ªæœ‰ç†æƒ³çš„åˆ‡å›¾ä»”ï¼</p>
<p>ğŸ‰ å¦‚æœæœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œåˆ«å¿˜äº†ç‚¹èµã€æ”¶è—ã€è¯„è®ºå“¦ï¼</p>
<p>â­ æœ€åï¼Œåˆ«å¿˜äº† <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpbstar%2Fpbstar-admin" target="_blank" title="https://github.com/pbstar/pbstar-admin" ref="nofollow noopener noreferrer">ç»™é¡¹ç›®ç‚¹ä¸ªStar</a></strong> å“¦ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é€šç”¨ç»„ä»¶ä½¿ç”¨æ–‡æ¡£]]></title>    <link>https://juejin.cn/post/7584037286029000754</link>    <guid>https://juejin.cn/post/7584037286029000754</guid>    <pubDate>2025-12-16T08:04:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584037286029000754" data-draft-id="7584073390693777423" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€šç”¨ç»„ä»¶ä½¿ç”¨æ–‡æ¡£"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-16T08:04:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç©ºé•œ"/> <meta itemprop="url" content="https://juejin.cn/user/3122268755469101"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€šç”¨ç»„ä»¶ä½¿ç”¨æ–‡æ¡£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3122268755469101/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç©ºé•œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:04:02.000Z" title="Tue Dec 16 2025 08:04:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é€šç”¨ç»„ä»¶ä½¿ç”¨æ–‡æ¡£</h2>
<p>æœ¬æ–‡æ¡£ä»‹ç»äº†é¡¹ç›®ä¸­ä¸¤ä¸ªæ ¸å¿ƒé€šç”¨ç»„ä»¶çš„ä½¿ç”¨æ–¹æ³•ï¼š<code>CommonPageList</code>ï¼ˆé€šç”¨åˆ—è¡¨ç»„ä»¶ï¼‰å’Œ <code>CommonFormCard</code>ï¼ˆé€šç”¨è¡¨å•ç»„ä»¶ï¼‰ã€‚</p>
<h3 data-id="heading-1">ç›®å½•</h3>
<ul>
<li><a href="#commonpagelist-%E9%80%9A%E7%94%A8%E5%88%97%E8%A1%A8%E7%BB%84%E4%BB%B6" title="#commonpagelist-%E9%80%9A%E7%94%A8%E5%88%97%E8%A1%A8%E7%BB%84%E4%BB%B6">CommonPageList é€šç”¨åˆ—è¡¨ç»„ä»¶</a>
<ul>
<li><a href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95" title="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95">åŸºæœ¬ç”¨æ³•</a></li>
<li><a href="#%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE" title="#%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE">å±æ€§é…ç½®</a></li>
<li><a href="#%E6%8F%92%E6%A7%BD%E8%AF%B4%E6%98%8E" title="#%E6%8F%92%E6%A7%BD%E8%AF%B4%E6%98%8E">æ’æ§½è¯´æ˜</a></li>
<li><a href="#%E6%9A%B4%E9%9C%B2%E6%96%B9%E6%B3%95" title="#%E6%9A%B4%E9%9C%B2%E6%96%B9%E6%B3%95">æš´éœ²æ–¹æ³•</a></li>
</ul>
</li>
<li><a href="#commonformcard-%E9%80%9A%E7%94%A8%E8%A1%A8%E5%8D%95%E7%BB%84%E4%BB%B6" title="#commonformcard-%E9%80%9A%E7%94%A8%E8%A1%A8%E5%8D%95%E7%BB%84%E4%BB%B6">CommonFormCard é€šç”¨è¡¨å•ç»„ä»¶</a>
<ul>
<li><a href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-1" title="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95-1">åŸºæœ¬ç”¨æ³•</a></li>
<li><a href="#%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE-1" title="#%E5%B1%9E%E6%80%A7%E9%85%8D%E7%BD%AE-1">å±æ€§é…ç½®</a></li>
<li><a href="#%E6%8F%92%E6%A7%BD%E8%AF%B4%E6%98%8E-1" title="#%E6%8F%92%E6%A7%BD%E8%AF%B4%E6%98%8E-1">æ’æ§½è¯´æ˜</a></li>
<li><a href="#%E6%9A%B4%E9%9C%B2%E6%96%B9%E6%B3%95-1" title="#%E6%9A%B4%E9%9C%B2%E6%96%B9%E6%B3%95-1">æš´éœ²æ–¹æ³•</a></li>
</ul>
</li>
<li><a href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5" title="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5">æœ€ä½³å®è·µ</a></li>
</ul>
<hr/>
<h3 data-id="heading-2">CommonPageList é€šç”¨åˆ—è¡¨ç»„ä»¶</h3>
<p><code>CommonPageList</code> æ˜¯ä¸€ä¸ªé«˜åº¦å°è£…çš„åˆ—è¡¨é¡µé¢ç»„ä»¶ï¼Œé›†æˆäº†æœç´¢ã€è¡¨æ ¼å±•ç¤ºã€åˆ†é¡µã€æ“ä½œæŒ‰é’®ç­‰åŠŸèƒ½ã€‚</p>
<h4 data-id="heading-3">åŸºæœ¬ç”¨æ³•</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;CommonPageList
    :listUrl="'/api/list'"
    :deleteUrl="'/api/delete'"
    :searchConfig="searchConfig"
    :tableButtons="tableButtons"
    :middleButtons="middleButtons"
    ref="pageListRef"
  /&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { CommonPageList, type ICommonPageListRef } from '@/components/commonPageList'
import { ref } from 'vue'
import type {
  ISearchConfigItem,
  ITableButtons,
  IMiddleButtons
} from '@/components/commonPageList/types'

const pageListRef = ref&lt;ICommonPageListRef&gt;()

// æœç´¢é…ç½®
const searchConfig: ISearchConfigItem[] = [
  {
    component: 'input',
    label: 'ç”¨æˆ·å',
    fieldName: 'username'
  },
  {
    component: 'select',
    label: 'çŠ¶æ€',
    fieldName: 'status',
    options: [
      { label: 'å¯ç”¨', value: '1' },
      { label: 'ç¦ç”¨', value: '0' }
    ]
  },
  {
    component: 'datePicker',
    label: 'åˆ›å»ºæ—¶é—´',
    fieldName: 'createTime'
  }
]

// è¡¨æ ¼æ“ä½œæŒ‰é’®
const tableButtons: ITableButtons = [
  {
    text: 'ç¼–è¾‘',
    code: ['system:user:edit'],
    action: (row: any) =&gt; {
      console.log('ç¼–è¾‘ç”¨æˆ·:', row)
    }
  },
  {
    text: 'åˆ é™¤',
    code: ['system:user:delete'],
    action: (row: any) =&gt; {
      console.log('åˆ é™¤ç”¨æˆ·:', row)
    }
  }
]

// ä¸­é—´æ“ä½œæŒ‰é’®
const middleButtons: IMiddleButtons = [
  {
    text: 'æ–°å¢ç”¨æˆ·',
    type: 'primary',
    code: ['system:user:create'],
    action: () =&gt; {
      console.log('æ–°å¢ç”¨æˆ·')
    }
  },
  {
    text: 'æ‰¹é‡åˆ é™¤',
    type: 'delete',
    code: ['system:user:delete']
  }
]
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-4">å±æ€§é…ç½®</h4>







































































































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>å¿…å¡«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>listUrl</code></td><td><code>string</code></td><td>-</td><td>âœ…</td><td>åˆ—è¡¨æ•°æ®è¯·æ±‚åœ°å€</td></tr><tr><td><code>deleteUrl</code></td><td><code>string</code></td><td>-</td><td>âŒ</td><td>åˆ é™¤è¯·æ±‚åœ°å€</td></tr><tr><td><code>searchConfig</code></td><td><code>ISearchConfigItem[]</code></td><td><code>[]</code></td><td>âœ…</td><td>æœç´¢è¡¨å•é…ç½®</td></tr><tr><td><code>tabs</code></td><td><code>ITabItem[] | Function</code></td><td><code>[]</code></td><td>âŒ</td><td>é€‰é¡¹å¡é…ç½®</td></tr><tr><td><code>defaultForm</code></td><td><code>Record&lt;string, any&gt;</code></td><td><code>{}</code></td><td>âŒ</td><td>é»˜è®¤è¡¨å•æ•°æ®</td></tr><tr><td><code>middleButtons</code></td><td><code>IMiddleButtons</code></td><td><code>[]</code></td><td>âŒ</td><td>é¡µé¢ä¸­é—´æŒ‰é’®é…ç½®</td></tr><tr><td><code>tableButtons</code></td><td><code>ITableButtons</code></td><td><code>[]</code></td><td>âŒ</td><td>è¡¨æ ¼è¡Œæ“ä½œæŒ‰é’®é…ç½®</td></tr><tr><td><code>showSelection</code></td><td><code>boolean</code></td><td><code>false</code></td><td>âŒ</td><td>æ˜¯å¦æ˜¾ç¤ºé€‰æ‹©åˆ—</td></tr><tr><td><code>searchExpandNum</code></td><td><code>number</code></td><td><code>3</code></td><td>âŒ</td><td>å±•å¼€æ˜¾ç¤ºçš„æœç´¢é¡¹æ•°é‡</td></tr><tr><td><code>tabFieldName</code></td><td><code>string</code></td><td><code>'tab'</code></td><td>âŒ</td><td>é€‰é¡¹å¡å­—æ®µå</td></tr><tr><td><code>sortableLabels</code></td><td><code>string[]</code></td><td><code>[]</code></td><td>âŒ</td><td>å¯æ’åºçš„å­—æ®µæ ‡ç­¾</td></tr><tr><td><code>listMethod</code></td><td><code>'get' | 'post'</code></td><td><code>'get'</code></td><td>âŒ</td><td>åˆ—è¡¨è¯·æ±‚æ–¹æ³•</td></tr><tr><td><code>tableOperateBtnUnhiddenNumber</code></td><td><code>number</code></td><td><code>2</code></td><td>âŒ</td><td>è¡¨æ ¼æ“ä½œæŒ‰é’®æ˜¾ç¤ºæ•°é‡</td></tr></tbody></table>
<h5 data-id="heading-5">æœç´¢é…ç½® (ISearchConfigItem)</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ISearchConfigItem</span> {
  <span class="hljs-attr">component</span>: <span class="hljs-string">'input'</span> | <span class="hljs-string">'select'</span> | <span class="hljs-string">'datePicker'</span> <span class="hljs-comment">// ç»„ä»¶ç±»å‹</span>
  <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> <span class="hljs-comment">// æ ‡ç­¾æ–‡æœ¬</span>
  <span class="hljs-attr">fieldName</span>: <span class="hljs-built_in">string</span> <span class="hljs-comment">// å­—æ®µå</span>
  options?: { <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span> }[] <span class="hljs-comment">// ä¸‹æ‹‰é€‰é¡¹ï¼ˆselectç»„ä»¶ç”¨ï¼‰</span>
  maxLength?: <span class="hljs-built_in">number</span> <span class="hljs-comment">// æœ€å¤§é•¿åº¦ï¼ˆinputç»„ä»¶ç”¨ï¼‰</span>
  multiple?: <span class="hljs-built_in">boolean</span> <span class="hljs-comment">// æ˜¯å¦å¤šé€‰ï¼ˆselectç»„ä»¶ç”¨ï¼‰</span>
  placeholder?: <span class="hljs-built_in">string</span> <span class="hljs-comment">// å ä½ç¬¦</span>
  virtual?: <span class="hljs-built_in">boolean</span> <span class="hljs-comment">// æ˜¯å¦è™šæ‹Ÿæ»šåŠ¨ï¼ˆselectç»„ä»¶ç”¨ï¼‰</span>
  <span class="hljs-comment">// ... å…¶ä»–è‡ªå®šä¹‰å±æ€§</span>
}
</code></pre>
<h5 data-id="heading-6">é€‰é¡¹å¡é…ç½® (ITabItem)</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ITabItem</span> {
  <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> <span class="hljs-comment">// é€‰é¡¹å¡æ˜¾ç¤ºæ–‡æœ¬</span>
  <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span> <span class="hljs-comment">// é€‰é¡¹å¡å€¼</span>
}
</code></pre>
<h5 data-id="heading-7">æŒ‰é’®é…ç½®</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸­é—´æŒ‰é’®é…ç½®</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">IMiddleButtons</span> {
  text?: <span class="hljs-built_in">string</span>                    <span class="hljs-comment">// æŒ‰é’®æ–‡æœ¬</span>
  action?: <span class="hljs-function">(<span class="hljs-params">params: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>   <span class="hljs-comment">// ç‚¹å‡»äº‹ä»¶</span>
  code?: <span class="hljs-built_in">string</span>[]                  <span class="hljs-comment">// æƒé™æ ‡è¯†</span>
  <span class="hljs-keyword">type</span>?: <span class="hljs-built_in">string</span>                    <span class="hljs-comment">// æŒ‰é’®ç±»å‹</span>
}

<span class="hljs-comment">// è¡¨æ ¼æ“ä½œæŒ‰é’®é…ç½®</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ITableButtons</span> {
  text?: <span class="hljs-built_in">string</span>                             <span class="hljs-comment">// æŒ‰é’®æ–‡æœ¬</span>
  action?: <span class="hljs-function">(<span class="hljs-params">params: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>           <span class="hljs-comment">// ç‚¹å‡»äº‹ä»¶</span>
  code?: <span class="hljs-built_in">string</span>[]                           <span class="hljs-comment">// æƒé™æ ‡è¯†</span>
  show?: <span class="hljs-built_in">boolean</span> \| (<span class="hljs-function">(<span class="hljs-params">row: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">boolean</span>) <span class="hljs-comment">// æ˜¾ç¤ºæ¡ä»¶</span>
}
</code></pre>
<h4 data-id="heading-8">æ’æ§½è¯´æ˜</h4>




















<table><thead><tr><th>æ’æ§½å</th><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>table-col-{fieldName}</code></td><td><code>{ value, row }</code></td><td>è‡ªå®šä¹‰è¡¨æ ¼åˆ—æ¸²æŸ“</td></tr><tr><td><code>default</code></td><td>-</td><td>é»˜è®¤æ’æ§½</td></tr></tbody></table>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- è‡ªå®šä¹‰è¡¨æ ¼åˆ— --&gt;
&lt;template #table-col-ç”¨æˆ·å="{ value, row }"&gt;
  &lt;el-tag&gt;{{ value }}&lt;/el-tag&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-9">æš´éœ²æ–¹æ³•</h4>

















<table><thead><tr><th>æ–¹æ³•å</th><th>å‚æ•°</th><th>è¿”å›å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>refresh</code></td><td>-</td><td><code>void</code></td><td>åˆ·æ–°åˆ—è¡¨æ•°æ®</td></tr></tbody></table>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import type { ICommonPageListRef } from '@/components/commonPageList'

const pageListRef = ref&lt;ICommonPageListRef&gt;()

// åˆ·æ–°åˆ—è¡¨
const handleRefresh = () =&gt; {
  pageListRef.value?.refresh()
}
&lt;/script&gt;
</code></pre>
<hr/>
<h3 data-id="heading-10">CommonFormCard é€šç”¨è¡¨å•ç»„ä»¶</h3>
<p><code>CommonFormCard</code> æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„è¡¨å•ç»„ä»¶ï¼Œæ”¯æŒå¤šç§è¡¨å•æ§ä»¶ã€åˆ†ç»„æ˜¾ç¤ºã€å¼¹çª—/æŠ½å±‰æ¨¡å¼ç­‰ã€‚</p>
<h4 data-id="heading-11">åŸºæœ¬ç”¨æ³•</h4>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;CommonFormCard
    ref="formRef"
    title="ç”¨æˆ·ä¿¡æ¯"
    :config="formConfig"
    :footerBtns="footerBtns"
    :wrapper="'drawer'"
    @change="handleChange"
  /&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { CommonFormCard, type ICommonFormCardRef } from '@/components/commonFormCard'
import { ref } from 'vue'
import type { IFormCardItem, IFormCardFooters } from '@/components/commonFormCard/types'

const formRef = ref&lt;ICommonFormCardRef&gt;()

// è¡¨å•é…ç½®
const formConfig: IFormCardItem[] = [
  {
    title: 'åŸºæœ¬ä¿¡æ¯',
    items: [
      {
        component: 'input',
        label: 'ç”¨æˆ·å',
        fieldName: 'username',
        required: true,
        maxLength: 20
      },
      {
        component: 'select',
        label: 'æ€§åˆ«',
        fieldName: 'gender',
        options: [
          { label: 'ç”·', value: '1' },
          { label: 'å¥³', value: '2' }
        ]
      }
    ]
  },
  {
    title: 'è”ç³»æ–¹å¼',
    items: [
      {
        component: 'input',
        label: 'æ‰‹æœºå·',
        fieldName: 'phone',
        required: true
      },
      {
        component: 'uploader',
        label: 'å¤´åƒ',
        fieldName: 'avatar',
        fileType: ['jpg', 'png'],
        limit: 1
      }
    ]
  }
]

// åº•éƒ¨æŒ‰é’®
const footerBtns: IFormCardFooters = [
  {
    text: 'å–æ¶ˆ',
    type: 'default'
  },
  {
    text: 'ä¿å­˜',
    type: 'primary',
    action: ({ formRef }: { formRef: ICommonFormCardRef }) =&gt; {
      formRef.valid((data: any) =&gt; {
        console.log('è¡¨å•æ•°æ®:', data)
        // è°ƒç”¨ä¿å­˜æ¥å£
      })
    }
  }
]

// æ‰“å¼€è¡¨å•
const openForm = () =&gt; {
  formRef.value?.open({
    username: 'å¼ ä¸‰',
    gender: '1'
  })
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-12">å±æ€§é…ç½®</h4>











































































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>å¿…å¡«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>config</code></td><td><code>IFormCardItem[]</code></td><td><code>[]</code></td><td>âœ…</td><td>è¡¨å•é…ç½®æ•°ç»„</td></tr><tr><td><code>title</code></td><td><code>string</code></td><td><code>'--'</code></td><td>âŒ</td><td>å¼¹çª—/æŠ½å±‰æ ‡é¢˜</td></tr><tr><td><code>mode</code></td><td><code>'edit' | 'detail'</code></td><td><code>'edit'</code></td><td>âŒ</td><td>è¡¨å•æ¨¡å¼</td></tr><tr><td><code>wrapper</code></td><td><code>'div' | 'dialog' | 'drawer'</code></td><td><code>'drawer'</code></td><td>âŒ</td><td>åŒ…è£¹æ–¹å¼</td></tr><tr><td><code>labelWidth</code></td><td><code>string</code></td><td><code>'82px'</code></td><td>âŒ</td><td>æ ‡ç­¾å®½åº¦</td></tr><tr><td><code>width</code></td><td><code>string</code></td><td><code>'880px'</code></td><td>âŒ</td><td>å¼¹çª—/æŠ½å±‰å®½åº¦</td></tr><tr><td><code>footerBtns</code></td><td><code>IFormCardFooters</code></td><td><code>[]</code></td><td>âŒ</td><td>åº•éƒ¨æŒ‰é’®é…ç½®</td></tr><tr><td><code>class</code></td><td><code>string</code></td><td><code>''</code></td><td>âŒ</td><td>è‡ªå®šä¹‰æ ·å¼ç±»</td></tr><tr><td><code>wrapperClass</code></td><td><code>string</code></td><td><code>''</code></td><td>âŒ</td><td>åŒ…è£¹å®¹å™¨æ ·å¼ç±»</td></tr></tbody></table>
<h5 data-id="heading-13">è¡¨å•é…ç½® (IFormCardItem)</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IFormCardItem</span> {
  title?: <span class="hljs-built_in">string</span>              <span class="hljs-comment">// å¡ç‰‡æ ‡é¢˜</span>
  span?: <span class="hljs-built_in">number</span>              <span class="hljs-comment">// æ …æ ¼å ç”¨ä»½é¢</span>
  md?: <span class="hljs-built_in">number</span>                <span class="hljs-comment">// ä¸­ç­‰å±å¹•æ …æ ¼</span>
  lg?: <span class="hljs-built_in">number</span>                <span class="hljs-comment">// å¤§å±å¹•æ …æ ¼</span>
  show?: <span class="hljs-built_in">boolean</span> \| <span class="hljs-title class_">Function</span> <span class="hljs-comment">// æ˜¾ç¤ºæ¡ä»¶</span>
  items?: <span class="hljs-title class_">IFormConfigItem</span>[]  <span class="hljs-comment">// è¡¨å•é¡¹æ•°ç»„</span>
}
</code></pre>
<h5 data-id="heading-14">è¡¨å•é¡¹é…ç½® (IFormConfigItem)</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">IFormConfigItem</span> {
  <span class="hljs-attr">component</span>: <span class="hljs-string">'input'</span> \| <span class="hljs-string">'select'</span> \| <span class="hljs-string">'datePicker'</span> \| <span class="hljs-string">'uploader'</span> \| <span class="hljs-string">'radio'</span> \| <span class="hljs-string">'checkbox'</span> \| <span class="hljs-string">'switch'</span>  <span class="hljs-comment">// ç»„ä»¶ç±»å‹</span>
  <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span>                               <span class="hljs-comment">// æ ‡ç­¾æ–‡æœ¬</span>
  <span class="hljs-attr">fieldName</span>: <span class="hljs-built_in">string</span>                           <span class="hljs-comment">// å­—æ®µå</span>
  required?: <span class="hljs-built_in">boolean</span>                          <span class="hljs-comment">// æ˜¯å¦å¿…å¡«</span>
  span?: <span class="hljs-built_in">number</span>                              <span class="hljs-comment">// æ …æ ¼å ç”¨ä»½é¢</span>
  placeholder?: <span class="hljs-built_in">string</span>                       <span class="hljs-comment">// å ä½ç¬¦</span>
  disabled?: <span class="hljs-built_in">boolean</span> \| <span class="hljs-title class_">Function</span>              <span class="hljs-comment">// æ˜¯å¦ç¦ç”¨</span>
  show?: <span class="hljs-built_in">boolean</span> \| <span class="hljs-title class_">Function</span>                  <span class="hljs-comment">// æ˜¯å¦æ˜¾ç¤º</span>
  forceEdit?: <span class="hljs-built_in">boolean</span> \| <span class="hljs-title class_">Function</span>             <span class="hljs-comment">// å¼ºåˆ¶ç¼–è¾‘</span>
  options?: <span class="hljs-title class_">Array</span>&lt;{                           <span class="hljs-comment">// é€‰é¡¹æ•°æ®</span>
    <span class="hljs-attr">label</span>: <span class="hljs-built_in">string</span> \| <span class="hljs-built_in">number</span>
    <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span> \| <span class="hljs-built_in">number</span>
    disabled?: <span class="hljs-built_in">boolean</span>
  }&gt;
  change?: <span class="hljs-function">(<span class="hljs-params">params: ItemChangeProps</span>) =&gt;</span> <span class="hljs-built_in">void</span> <span class="hljs-comment">// å€¼å˜åŒ–å›è°ƒ</span>
  <span class="hljs-comment">// ... å…¶ä»–ç»„ä»¶ç‰¹å®šå±æ€§</span>
}
</code></pre>
<h4 data-id="heading-15">æ’æ§½è¯´æ˜</h4>



































<table><thead><tr><th>æ’æ§½å</th><th>å‚æ•°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>default</code></td><td><code>{ formData, setFormData }</code></td><td>é»˜è®¤æ’æ§½</td></tr><tr><td><code>after</code></td><td><code>{ formData, setFormData }</code></td><td>è¡¨å•åº•éƒ¨æ’æ§½</td></tr><tr><td><code>{cardTitle}</code></td><td><code>{ formData, setFormData }</code></td><td>å¡ç‰‡å†…å®¹æ’æ§½</td></tr><tr><td><code>{fieldName}</code></td><td><code>{ formData, setFormData }</code></td><td>è¡¨å•é¡¹æ’æ§½</td></tr><tr><td><code>{cardTitle}@after</code></td><td><code>{ formData, setFormData }</code></td><td>å¡ç‰‡åç½®æ’æ§½</td></tr></tbody></table>
<pre><code class="hljs language-vue" lang="vue">&lt;!-- è‡ªå®šä¹‰è¡¨å•é¡¹ --&gt;
&lt;template #phone="{ formData, setFormData }"&gt;
  &lt;el-input
    v-model="formData.phone"
    placeholder="è¯·è¾“å…¥æ‰‹æœºå·"
    @input="setFormData({ phone: $event })"
  /&gt;
&lt;/template&gt;

&lt;!-- è‡ªå®šä¹‰å¡ç‰‡å†…å®¹ --&gt;
&lt;template #åŸºæœ¬ä¿¡æ¯="{ formData }"&gt;
  &lt;div class="custom-content"&gt;
    &lt;p&gt;è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰å†…å®¹åŒºåŸŸ&lt;/p&gt;
  &lt;/div&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-16">æš´éœ²æ–¹æ³•</h4>









































<table><thead><tr><th>æ–¹æ³•å</th><th>å‚æ•°</th><th>è¿”å›å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>valid</code></td><td><code>(callback: Function) =&gt; Promise&lt;void&gt;</code></td><td><code>Promise&lt;void&gt;</code></td><td>è¡¨å•æ ¡éªŒ</td></tr><tr><td><code>open</code></td><td><code>(data?: Record&lt;string, any&gt;) =&gt; void</code></td><td><code>void</code></td><td>æ‰“å¼€å¼¹çª—/æŠ½å±‰</td></tr><tr><td><code>setFormData</code></td><td><code>(data: Record&lt;string, any&gt;) =&gt; void</code></td><td><code>void</code></td><td>è®¾ç½®è¡¨å•æ•°æ®</td></tr><tr><td><code>close</code></td><td>-</td><td><code>void</code></td><td>å…³é—­å¼¹çª—/æŠ½å±‰</td></tr><tr><td><code>reset</code></td><td>-</td><td><code>void</code></td><td>é‡ç½®è¡¨å•</td></tr></tbody></table>
<pre><code class="hljs language-vue" lang="vue">&lt;script setup lang="ts"&gt;
import type { ICommonFormCardRef } from '@/components/commonFormCard'

const formRef = ref&lt;ICommonFormCardRef&gt;()

// æ‰“å¼€è¡¨å•å¹¶è®¾ç½®åˆå§‹æ•°æ®
const openForm = () =&gt; {
  formRef.value?.open({
    username: 'å¼ ä¸‰',
    email: 'zhangsan@example.com'
  })
}

// è®¾ç½®è¡¨å•æ•°æ®
const updateFormData = () =&gt; {
  formRef.value?.setFormData({
    status: 'active'
  })
}

// æ ¡éªŒè¡¨å•
const validateForm = () =&gt; {
  formRef.value?.valid((data: any) =&gt; {
    console.log('æ ¡éªŒé€šè¿‡çš„è¡¨å•æ•°æ®:', data)
    // æäº¤æ•°æ®
  })
}

// é‡ç½®è¡¨å•
const resetForm = () =&gt; {
  formRef.value?.reset()
}
&lt;/script&gt;
</code></pre>
<hr/>
<h3 data-id="heading-17">æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-18">1. æƒé™æ§åˆ¶</h4>
<p>ä½¿ç”¨ <code>code</code> å±æ€§ç»“åˆæƒé™ç³»ç»Ÿæ§åˆ¶æŒ‰é’®æ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">ITableButtons</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/commonPageList/types'</span>

<span class="hljs-keyword">const</span> <span class="hljs-attr">tableButtons</span>: <span class="hljs-title class_">ITableButtons</span> = [
  {
    <span class="hljs-attr">text</span>: <span class="hljs-string">'ç¼–è¾‘'</span>,
    <span class="hljs-attr">code</span>: [<span class="hljs-string">'system:user:edit'</span>], <span class="hljs-comment">// éœ€è¦ç¼–è¾‘æƒé™</span>
    <span class="hljs-attr">action</span>: handleEdit
  },
  {
    <span class="hljs-attr">text</span>: <span class="hljs-string">'åˆ é™¤'</span>,
    <span class="hljs-attr">code</span>: [<span class="hljs-string">'system:user:delete'</span>], <span class="hljs-comment">// éœ€è¦åˆ é™¤æƒé™</span>
    <span class="hljs-attr">action</span>: handleDelete
  }
]
</code></pre>
<h4 data-id="heading-19">2. è¡¨å•è”åŠ¨</h4>
<p>ä½¿ç”¨ <code>change</code> å›è°ƒå®ç°è¡¨å•è”åŠ¨ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">IFormCardItem</span>, <span class="hljs-title class_">ItemChangeProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/commonFormCard/types'</span>

<span class="hljs-keyword">const</span> <span class="hljs-attr">formConfig</span>: <span class="hljs-title class_">IFormCardItem</span>[] = [
  {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'åœ°åŒºä¿¡æ¯'</span>,
    <span class="hljs-attr">items</span>: [
      {
        <span class="hljs-attr">component</span>: <span class="hljs-string">'select'</span>,
        <span class="hljs-attr">label</span>: <span class="hljs-string">'çœä»½'</span>,
        <span class="hljs-attr">fieldName</span>: <span class="hljs-string">'province'</span>,
        <span class="hljs-attr">options</span>: provinceOptions,
        <span class="hljs-attr">change</span>: <span class="hljs-function">(<span class="hljs-params">{ value, setFormData, selectRefs }: ItemChangeProps</span>) =&gt;</span> {
          <span class="hljs-comment">// æ¸…ç©ºåŸå¸‚é€‰æ‹©</span>
          <span class="hljs-title function_">setFormData</span>({ <span class="hljs-attr">city</span>: <span class="hljs-string">''</span> })
          <span class="hljs-comment">// æ›´æ–°åŸå¸‚é€‰é¡¹</span>
          selectRefs.<span class="hljs-property">city</span>?.<span class="hljs-title function_">getOptions</span>({ <span class="hljs-attr">province</span>: value })
        }
      },
      {
        <span class="hljs-attr">component</span>: <span class="hljs-string">'select'</span>,
        <span class="hljs-attr">label</span>: <span class="hljs-string">'åŸå¸‚'</span>,
        <span class="hljs-attr">fieldName</span>: <span class="hljs-string">'city'</span>,
        <span class="hljs-attr">remoteMethod</span>: <span class="hljs-function">(<span class="hljs-params">params: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-title function_">getCities</span>(params.<span class="hljs-property">province</span>)
      }
    ]
  }
]
</code></pre>
<h4 data-id="heading-20">3. åŠ¨æ€æ˜¾ç¤ºéšè—</h4>
<p>ä½¿ç”¨å‡½æ•°æ§åˆ¶ç»„ä»¶çš„æ˜¾ç¤ºéšè—ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">IFormCardItem</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/commonFormCard/types'</span>

<span class="hljs-keyword">const</span> <span class="hljs-attr">formConfig</span>: <span class="hljs-title class_">IFormCardItem</span>[] = [
  {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'ç”¨æˆ·ä¿¡æ¯'</span>,
    <span class="hljs-attr">items</span>: [
      {
        <span class="hljs-attr">component</span>: <span class="hljs-string">'radio'</span>,
        <span class="hljs-attr">label</span>: <span class="hljs-string">'ç”¨æˆ·ç±»å‹'</span>,
        <span class="hljs-attr">fieldName</span>: <span class="hljs-string">'userType'</span>,
        <span class="hljs-attr">options</span>: [
          { <span class="hljs-attr">label</span>: <span class="hljs-string">'æ™®é€šç”¨æˆ·'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'normal'</span> },
          { <span class="hljs-attr">label</span>: <span class="hljs-string">'VIPç”¨æˆ·'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'vip'</span> }
        ]
      },
      {
        <span class="hljs-attr">component</span>: <span class="hljs-string">'input'</span>,
        <span class="hljs-attr">label</span>: <span class="hljs-string">'VIPç­‰çº§'</span>,
        <span class="hljs-attr">fieldName</span>: <span class="hljs-string">'vipLevel'</span>,
        <span class="hljs-attr">show</span>: <span class="hljs-function">(<span class="hljs-params">formData: <span class="hljs-built_in">any</span></span>) =&gt;</span> formData.<span class="hljs-property">userType</span> === <span class="hljs-string">'vip'</span> <span class="hljs-comment">// åªæœ‰VIPç”¨æˆ·æ‰æ˜¾ç¤º</span>
      }
    ]
  }
]
</code></pre>
<h4 data-id="heading-21">4. è‡ªå®šä¹‰æ¸²æŸ“</h4>
<p>å¯¹äºå¤æ‚çš„ä¸šåŠ¡åœºæ™¯ï¼Œä½¿ç”¨æ’æ§½è¿›è¡Œè‡ªå®šä¹‰æ¸²æŸ“ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;CommonFormCard :config="formConfig"&gt;
    &lt;!-- è‡ªå®šä¹‰ç”¨æˆ·çŠ¶æ€æ˜¾ç¤º --&gt;
    &lt;template #status="{ formData, setFormData }"&gt;
      &lt;el-tag :type="formData.status === 'active' ? 'success' : 'danger'"&gt;
        {{ formData.status === 'active' ? 'å¯ç”¨' : 'ç¦ç”¨' }}
      &lt;/el-tag&gt;
    &lt;/template&gt;

    &lt;!-- è‡ªå®šä¹‰è¡¨æ ¼åˆ— --&gt;
    &lt;template #table-col-ç”¨æˆ·çŠ¶æ€="{ value }"&gt;
      &lt;el-tag :type="value === 1 ? 'success' : 'info'"&gt;
        {{ value === 1 ? 'å¯ç”¨' : 'ç¦ç”¨' }}
      &lt;/el-tag&gt;
    &lt;/template&gt;
  &lt;/CommonFormCard&gt;
&lt;/template&gt;
</code></pre>
<h4 data-id="heading-22">5. ç»„ä»¶ç»„åˆä½¿ç”¨</h4>
<p>å°†ä¸¤ä¸ªç»„ä»¶ç»“åˆä½¿ç”¨æ„å»ºå®Œæ•´çš„CRUDé¡µé¢ï¼š</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;CommonPageList
    ref="pageListRef"
    :listUrl="listUrl"
    :deleteUrl="deleteUrl"
    :searchConfig="searchConfig"
    :tableButtons="tableButtons"
    :middleButtons="middleButtons"
  /&gt;

  &lt;CommonFormCard ref="formRef" title="ç”¨æˆ·ç®¡ç†" :config="formConfig" :footerBtns="footerBtns" /&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import type { ICommonPageListRef, ITableButtons } from '@/components/commonPageList'
import type { ICommonFormCardRef, IFormCardFooters } from '@/components/commonFormCard'

const pageListRef = ref&lt;ICommonPageListRef&gt;()
const formRef = ref&lt;ICommonFormCardRef&gt;()

// è¡¨æ ¼æ“ä½œæŒ‰é’®
const tableButtons: ITableButtons = [
  {
    text: 'ç¼–è¾‘',
    action: (row: any) =&gt; {
      formRef.value?.open(row)
    }
  }
]

// åº•éƒ¨æŒ‰é’®
const footerBtns: IFormCardFooters = [
  {
    text: 'ä¿å­˜',
    action: ({ formRef }: { formRef: ICommonFormCardRef }) =&gt; {
      formRef.valid(async (data: any) =&gt; {
        await saveUser(data)
        formRef.close()
        pageListRef.value?.refresh()
      })
    }
  }
]
&lt;/script&gt;
</code></pre>
<hr/>
<h3 data-id="heading-23">TypeScript ç±»å‹å®šä¹‰</h3>
<h4 data-id="heading-24">ç±»å‹å¯¼å…¥</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// CommonPageList ç›¸å…³ç±»å‹</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> {
  <span class="hljs-title class_">ICommonPageListRef</span>,
  <span class="hljs-title class_">ISearchConfigItem</span>,
  <span class="hljs-title class_">ITableButtons</span>,
  <span class="hljs-title class_">IMiddleButtons</span>,
  <span class="hljs-title class_">ITabItem</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/commonPageList/types'</span>

<span class="hljs-comment">// CommonFormCard ç›¸å…³ç±»å‹</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> {
  <span class="hljs-title class_">ICommonFormCardRef</span>,
  <span class="hljs-title class_">IFormCardItem</span>,
  <span class="hljs-title class_">IFormConfigItem</span>,
  <span class="hljs-title class_">IFormCardFooters</span>,
  <span class="hljs-title class_">ItemChangeProps</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/commonFormCard/types'</span>
</code></pre>
<h4 data-id="heading-25">å®Œæ•´ç±»å‹å®šä¹‰ç¤ºä¾‹</h4>
<pre><code class="hljs language-typescript" lang="typescript">&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CommonPageList</span>, <span class="hljs-title class_">CommonFormCard</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components'</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> {
  <span class="hljs-title class_">ICommonPageListRef</span>,
  <span class="hljs-title class_">ICommonFormCardRef</span>,
  <span class="hljs-title class_">ISearchConfigItem</span>,
  <span class="hljs-title class_">ITableButtons</span>,
  <span class="hljs-title class_">IMiddleButtons</span>,
  <span class="hljs-title class_">IFormCardItem</span>,
  <span class="hljs-title class_">IFormCardFooters</span>,
  <span class="hljs-title class_">ItemChangeProps</span>
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@/components/types'</span>

<span class="hljs-comment">// ç»„ä»¶å¼•ç”¨ç±»å‹</span>
<span class="hljs-keyword">const</span> pageListRef = ref&lt;<span class="hljs-title class_">ICommonPageListRef</span>&gt;()
<span class="hljs-keyword">const</span> formRef = ref&lt;<span class="hljs-title class_">ICommonFormCardRef</span>&gt;()

<span class="hljs-comment">// æœç´¢é…ç½®ç±»å‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">searchConfig</span>: <span class="hljs-title class_">ISearchConfigItem</span>[] = [
  {
    <span class="hljs-attr">component</span>: <span class="hljs-string">'input'</span>,
    <span class="hljs-attr">label</span>: <span class="hljs-string">'ç”¨æˆ·å'</span>,
    <span class="hljs-attr">fieldName</span>: <span class="hljs-string">'username'</span>
  }
]

<span class="hljs-comment">// è¡¨æ ¼æŒ‰é’®ç±»å‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">tableButtons</span>: <span class="hljs-title class_">ITableButtons</span> = [
  {
    <span class="hljs-attr">text</span>: <span class="hljs-string">'ç¼–è¾‘'</span>,
    <span class="hljs-attr">code</span>: [<span class="hljs-string">'system:user:edit'</span>],
    <span class="hljs-attr">action</span>: <span class="hljs-function">(<span class="hljs-params">row: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
      formRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">open</span>(row)
    }
  }
]

<span class="hljs-comment">// ä¸­é—´æŒ‰é’®ç±»å‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">middleButtons</span>: <span class="hljs-title class_">IMiddleButtons</span> = [
  {
    <span class="hljs-attr">text</span>: <span class="hljs-string">'æ–°å¢'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'primary'</span>,
    <span class="hljs-attr">code</span>: [<span class="hljs-string">'system:user:create'</span>],
    <span class="hljs-attr">action</span>: <span class="hljs-function">() =&gt;</span> {
      formRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">open</span>()
    }
  }
]

<span class="hljs-comment">// è¡¨å•é…ç½®ç±»å‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">formConfig</span>: <span class="hljs-title class_">IFormCardItem</span>[] = [
  {
    <span class="hljs-attr">title</span>: <span class="hljs-string">'åŸºæœ¬ä¿¡æ¯'</span>,
    <span class="hljs-attr">items</span>: [
      {
        <span class="hljs-attr">component</span>: <span class="hljs-string">'input'</span>,
        <span class="hljs-attr">label</span>: <span class="hljs-string">'ç”¨æˆ·å'</span>,
        <span class="hljs-attr">fieldName</span>: <span class="hljs-string">'username'</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">maxLength</span>: <span class="hljs-number">20</span>
      },
      {
        <span class="hljs-attr">component</span>: <span class="hljs-string">'select'</span>,
        <span class="hljs-attr">label</span>: <span class="hljs-string">'çŠ¶æ€'</span>,
        <span class="hljs-attr">fieldName</span>: <span class="hljs-string">'status'</span>,
        <span class="hljs-attr">options</span>: [
          { <span class="hljs-attr">label</span>: <span class="hljs-string">'å¯ç”¨'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'1'</span> },
          { <span class="hljs-attr">label</span>: <span class="hljs-string">'ç¦ç”¨'</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">'0'</span> }
        ],
        <span class="hljs-attr">change</span>: <span class="hljs-function">(<span class="hljs-params">{ value, setFormData, selectRefs }: ItemChangeProps</span>) =&gt;</span> {
          <span class="hljs-comment">// è”åŠ¨é€»è¾‘</span>
          <span class="hljs-title function_">setFormData</span>({ <span class="hljs-attr">role</span>: <span class="hljs-string">''</span> })
          selectRefs.<span class="hljs-property">role</span>?.<span class="hljs-title function_">getOptions</span>({ <span class="hljs-attr">status</span>: value })
        }
      }
    ]
  }
]

<span class="hljs-comment">// åº•éƒ¨æŒ‰é’®ç±»å‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">footerBtns</span>: <span class="hljs-title class_">IFormCardFooters</span> = [
  {
    <span class="hljs-attr">text</span>: <span class="hljs-string">'å–æ¶ˆ'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'default'</span>,
    <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>
  },
  {
    <span class="hljs-attr">text</span>: <span class="hljs-string">'ä¿å­˜'</span>,
    <span class="hljs-attr">type</span>: <span class="hljs-string">'primary'</span>,
    <span class="hljs-attr">action</span>: <span class="hljs-function">(<span class="hljs-params">{ formRef }: { formRef: ICommonFormCardRef }</span>) =&gt;</span> {
      formRef.<span class="hljs-title function_">valid</span>(<span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¡¨å•æ•°æ®:'</span>, data)
        <span class="hljs-comment">// ä¿å­˜é€»è¾‘</span>
      })
    }
  }
]

<span class="hljs-comment">// æ–¹æ³•å®šä¹‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleEdit</span> = (<span class="hljs-params">row: <span class="hljs-built_in">any</span></span>) =&gt; {
  formRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">open</span>(row)
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSave</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">data: <span class="hljs-built_in">any</span></span>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">saveData</span>(data)
    formRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">close</span>()
    pageListRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">refresh</span>()
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ä¿å­˜å¤±è´¥:'</span>, error)
  }
}
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-26">è‡ªå®šä¹‰æ•°æ®ç±»å‹</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ç”¨æˆ·æ•°æ®ç±»å‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">username</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">status</span>: <span class="hljs-string">'active'</span> | <span class="hljs-string">'inactive'</span>
  <span class="hljs-attr">createdAt</span>: <span class="hljs-built_in">string</span>
}

<span class="hljs-comment">// è¡¨å•æ•°æ®ç±»å‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserFormData</span> {
  username?: <span class="hljs-built_in">string</span>
  email?: <span class="hljs-built_in">string</span>
  status?: <span class="hljs-built_in">string</span>
  role?: <span class="hljs-built_in">string</span>
}

<span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰ç±»å‹</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleTableAction</span> = (<span class="hljs-params">row: User</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç”¨æˆ·æ•°æ®:'</span>, row)
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleFormValid</span> = (<span class="hljs-params">data: UserFormData</span>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¡¨å•æ•°æ®:'</span>, data)
}
</code></pre>
<hr/>
<h3 data-id="heading-27">æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>æƒé™æ§åˆ¶</strong>ï¼šç¡®ä¿æŒ‰é’®çš„ <code>code</code> å±æ€§ä¸åç«¯æƒé™é…ç½®ä¿æŒä¸€è‡´</li>
<li><strong>æ•°æ®æ ¼å¼</strong>ï¼šç¡®ä¿è¯·æ±‚å’Œå“åº”çš„æ•°æ®æ ¼å¼ç¬¦åˆç»„ä»¶é¢„æœŸ</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå¯¹äºå¤§é‡æ•°æ®ï¼Œå»ºè®®ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨å’Œåˆ†é¡µ</li>
<li><strong>å“åº”å¼å¸ƒå±€</strong>ï¼šåˆç†ä½¿ç”¨æ …æ ¼ç³»ç»Ÿçš„ <code>span</code>ã€<code>md</code>ã€<code>lg</code> å±æ€§</li>
<li><strong>è¡¨å•æ ¡éªŒ</strong>ï¼šå¤æ‚æ ¡éªŒè§„åˆ™å»ºè®®ä½¿ç”¨ <code>rules</code> å±æ€§é…ç½®</li>
</ol>
<p>é€šè¿‡åˆç†ä½¿ç”¨è¿™ä¸¤ä¸ªé€šç”¨ç»„ä»¶ï¼Œå¯ä»¥å¿«é€Ÿæ„å»ºåŠŸèƒ½å®Œå–„ã€äº¤äº’å‹å¥½çš„ç®¡ç†é¡µé¢ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HiveSQL ä¸­çš„é›†åˆè¿ç®—]]></title>    <link>https://juejin.cn/post/7584043969687584820</link>    <guid>https://juejin.cn/post/7584043969687584820</guid>    <pubDate>2025-12-16T08:10:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584043969687584820" data-draft-id="7584073390693761039" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HiveSQL ä¸­çš„é›†åˆè¿ç®—"/> <meta itemprop="keywords" content="æ•°æ®åˆ†æ"/> <meta itemprop="datePublished" content="2025-12-16T08:10:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å®é“ƒé“ƒä¸Šè¯¾äº†"/> <meta itemprop="url" content="https://juejin.cn/user/3819082543277452"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HiveSQL ä¸­çš„é›†åˆè¿ç®—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3819082543277452/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å®é“ƒé“ƒä¸Šè¯¾äº†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:10:33.000Z" title="Tue Dec 16 2025 08:10:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å¤§æ•°æ®åˆ†æè¿‡ç¨‹ä¸­ï¼Œæ•´åˆå¤šæºæ•°æ®çš„éœ€æ±‚ååˆ†å¸¸è§ï¼Œæ­¤æ—¶é›†åˆè¿ç®—å‘æŒ¥ç€å…³é”®ä½œç”¨ã€‚æœ¬æ–‡å°†é‡ç‚¹ä»‹ç»HiveSQLä¸­çš„é›†åˆè¿ç®—æ–¹æ³•ï¼ŒåŠ©åŠ›æ•°æ®åˆ†æå¸ˆé«˜æ•ˆå®Œæˆå¤æ‚çš„æ•°æ®æ•´åˆå·¥ä½œã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦é›†åˆè¿ç®—ï¼Ÿ</h2>
<p>å‡è®¾ä½ æ‰‹å¤´æœ‰æ¥è‡ªå¤šä¸ªä¸šåŠ¡ç³»ç»Ÿçš„ç”¨æˆ·æ•°æ®ï¼ŒåŒ…æ‹¬Appã€Webç«¯å’Œå°ç¨‹åºç­‰ã€‚å½“å‰éœ€æ±‚æ˜¯ï¼š</p>
<ul>
<li>ç»Ÿè®¡å…¨å¹³å°çš„ç‹¬ç«‹ç”¨æˆ·æ•°</li>
<li>æ‰¾å‡ºåŒæ—¶ä½¿ç”¨Appå’ŒWebçš„é«˜ä»·å€¼ç”¨æˆ·</li>
<li>åˆ†æåªé€šè¿‡Webè®¿é—®ä½†ä»æœªä¸‹è½½Appçš„ç”¨æˆ·ç‰¹å¾</li>
</ul>
<p>è¿™æ­£æ˜¯é›†åˆè¿ç®—çš„å…¸å‹åº”ç”¨åœºæ™¯ã€‚ç†Ÿç»ƒæŒæ¡HiveSQLçš„é›†åˆè¿ç®—ï¼Œå¯ä»¥è®©ä½ é«˜æ•ˆå¤„ç†è¿™ç±»å¤æ‚çš„æ•°æ®æ•´åˆéœ€æ±‚ã€‚HiveSQLæä¾›äº†ä¸‰å¤§æ ¸å¿ƒé›†åˆè¿ç®—ç¬¦ï¼šUNIONï¼ˆå¹¶é›†ï¼‰ã€INTERSECTï¼ˆäº¤é›†ï¼‰å’ŒEXCEPTï¼ˆå·®é›†ï¼Œåœ¨æŸäº›æ•°æ®åº“ä¸­ä¹Ÿè¢«ç§°ä¸ºMINUSï¼‰ã€‚</p>
<h2 data-id="heading-1">ä¸‰å¤§æ ¸å¿ƒé›†åˆè¿ç®—ç¬¦è¯¦è§£</h2>
<p><strong>1. UNION/UNION ALLï¼š æ•°æ®çš„"åŠ æ³•"è¿ç®—</strong></p>
<p>UNION ALLâ€‹ æ˜¯æœ€å¸¸ç”¨çš„é›†åˆè¿ç®—ç¬¦ï¼Œå®ƒç®€å•åœ°å°†ä¸¤ä¸ªæŸ¥è¯¢ç»“æœåˆå¹¶ï¼Œä¸åšä»»ä½•å»é‡å¤„ç†ã€‚åœ¨Hiveä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸é«˜æ•ˆçš„æ“ä½œï¼Œå› ä¸ºå®ƒé¿å…äº†å¤æ‚çš„Shuffleå’ŒReduceè¿‡ç¨‹ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆå¹¶2024å¹´å’Œ205å¹´çš„è®¢å•æ•°æ®</span>
<span class="hljs-keyword">SELECT</span> order_id, user_id, amount, <span class="hljs-string">'2024'</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">year</span> 
<span class="hljs-keyword">FROM</span> orders_2023
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
<span class="hljs-keyword">SELECT</span> order_id, user_id, amount, <span class="hljs-string">'2025'</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">year</span>
<span class="hljs-keyword">FROM</span> orders_2024;
</code></pre>
<p>æ€§èƒ½å°è´´å£«ï¼šUNION ALLçš„æ€§èƒ½è¿œä¼˜äº UNIONã€‚å¦‚æœä½ èƒ½ç¡®å®šæ•°æ®æ²¡æœ‰é‡å¤ï¼Œæˆ–è€…ä¸åœ¨ä¹é‡å¤æ•°æ®ï¼Œè¯·ä¼˜å…ˆä½¿ç”¨ UNION ALLã€‚</p>
<p>UNIONâ€‹ åˆ™ä¼šåœ¨åˆå¹¶åè‡ªåŠ¨å»é‡ã€‚è¿™ä¸ªæ“ä½œä¼šè§¦å‘Reduceä»»åŠ¡ï¼Œå¯èƒ½ä¼šæ¯”è¾ƒè€—æ—¶ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è·å–å…¨å¹³å°çš„å»é‡ç”¨æˆ·ID</span>
<span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> app_users
<span class="hljs-keyword">UNION</span>
<span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> web_users;
</code></pre>
<p>å®é™…åº”ç”¨åœºæ™¯ï¼š</p>
<p>åˆå¹¶å¤šä¸ªåˆ†åŒºçš„æ•°æ®
æ•´åˆæ¥è‡ªä¸åŒæ•°æ®æºä½†ç»“æ„ç›¸åŒçš„æ•°æ®
åˆ›å»ºå†å²æ•°æ®å¿«ç…§</p>
<blockquote>
<p>æ³¨ï¼š</p>
<p>ä¸¤ä¸ªæŸ¥è¯¢çš„åˆ—æ•°å¿…é¡»ç›¸åŒ</p>
<p>å¯¹åº”åˆ—çš„æ•°æ®ç±»å‹è¦å…¼å®¹</p>
<p>é»˜è®¤æŒ‰ç¬¬ä¸€ä¸ªæŸ¥è¯¢çš„åˆ—åæ˜¾ç¤ºç»“æœ</p>
</blockquote>
<p><strong>2. INTERSECTï¼šå¯»æ‰¾æ•°æ®çš„"äº¤é›†"</strong></p>
<p>INTERSECTç”¨äºæ‰¾å‡ºåŒæ—¶å­˜åœ¨äºä¸¤ä¸ªæ•°æ®é›†ä¸­çš„è®°å½•ã€‚è¿™å°±åƒæ•°å­¦ä¸­çš„é›†åˆäº¤é›†æ“ä½œã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ‰¾å‡ºæ—¢è´­ä¹°è¿‡ç”µå­äº§å“åˆè´­ä¹°è¿‡ä¹¦ç±çš„ç”¨æˆ·</span>
<span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> orders_electronics
<span class="hljs-keyword">INTERSECT</span>
<span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> orders_books;
</code></pre>
<p>é‡è¦æç¤ºï¼š</p>
<p>Hive 2.2.0åŠä»¥ä¸Šç‰ˆæœ¬æ‰åŸç”Ÿæ”¯æŒINTERSECTã€‚å¦‚æœä½ çš„Hiveç‰ˆæœ¬è¾ƒè€ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹</p>
<p>æ›¿ä»£æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä½¿ç”¨JOINå®ç°INTERSECTåŠŸèƒ½</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> a.user_id
<span class="hljs-keyword">FROM</span> orders_electronics a
<span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> orders_books b <span class="hljs-keyword">ON</span> a.user_id <span class="hljs-operator">=</span> b.user_id;
 
<span class="hljs-comment">-- ä½¿ç”¨EXISTSå®ç°</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> user_id
<span class="hljs-keyword">FROM</span> orders_electronics a
<span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">EXISTS</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> orders_books b 
    <span class="hljs-keyword">WHERE</span> a.user_id <span class="hljs-operator">=</span> b.user_id
);
</code></pre>
<p><strong>3. EXCEPTï¼šæ‰¾å‡ºæ•°æ®çš„"å·®é›†"</strong></p>
<p>EXCEPTè¿”å›åªå­˜åœ¨äºç¬¬ä¸€ä¸ªæŸ¥è¯¢ç»“æœä¸­ï¼Œä½†ä¸å­˜åœ¨äºç¬¬äºŒä¸ªæŸ¥è¯¢ç»“æœä¸­çš„è®°å½•ã€‚åœ¨æŸäº›æ•°æ®åº“ä¸­ï¼Œè¿™ä¸ªæ“ä½œä¹Ÿå«MINUSã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ‰¾å‡ºæ³¨å†Œäº†ä½†ä»æœªä¸‹è¿‡å•çš„ç”¨æˆ·</span>
<span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> registered_users
<span class="hljs-keyword">EXCEPT</span>
<span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> order_users;
</code></pre>
<p>åŒæ ·ï¼Œå¯¹äºHive 2.2.0ä»¥ä¸‹çš„ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å…¶ä»–æ–¹å¼å®ç°ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä½¿ç”¨LEFT JOINå®ç°EXCEPTåŠŸèƒ½</span>
<span class="hljs-keyword">SELECT</span> a.user_id
<span class="hljs-keyword">FROM</span> registered_users a
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> order_users b <span class="hljs-keyword">ON</span> a.user_id <span class="hljs-operator">=</span> b.user_id
<span class="hljs-keyword">WHERE</span> b.user_id <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>;
 
<span class="hljs-comment">-- ä½¿ç”¨NOT INå®ç°ï¼ˆæ³¨æ„NULLå€¼å¤„ç†ï¼‰</span>
<span class="hljs-keyword">SELECT</span> user_id
<span class="hljs-keyword">FROM</span> registered_users
<span class="hljs-keyword">WHERE</span> user_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (
    <span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> order_users 
    <span class="hljs-keyword">WHERE</span> user_id <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>
);
</code></pre>
<h2 data-id="heading-2">é›†åˆè¿ç®—çš„é»„é‡‘æ³•åˆ™</h2>
<h3 data-id="heading-3">æ³•åˆ™1ï¼šç»“æ„ä¸€è‡´æ€§</h3>
<p>æ‰€æœ‰å‚ä¸é›†åˆè¿ç®—çš„æŸ¥è¯¢å¿…é¡»å…·æœ‰ç›¸åŒçš„åˆ—æ•°å’Œå…¼å®¹çš„æ•°æ®ç±»å‹ã€‚åˆ—åå¯ä»¥ä¸åŒï¼Œæœ€ç»ˆç»“æœé›†çš„åˆ—åä¼šé‡‡ç”¨ç¬¬ä¸€ä¸ªæŸ¥è¯¢çš„åˆ—åã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ­£ç¡®çš„å†™æ³•</span>
<span class="hljs-keyword">SELECT</span> user_id, username, <span class="hljs-string">'app'</span> <span class="hljs-keyword">as</span> source <span class="hljs-keyword">FROM</span> app_users
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
<span class="hljs-keyword">SELECT</span> user_id, username, <span class="hljs-string">'web'</span> <span class="hljs-keyword">FROM</span> web_users;
 
<span class="hljs-comment">-- é”™è¯¯çš„å†™æ³•ï¼šåˆ—æ•°ä¸åŒ¹é…</span>
<span class="hljs-keyword">SELECT</span> user_id, username, age <span class="hljs-keyword">FROM</span> table_a
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
<span class="hljs-keyword">SELECT</span> user_id, username <span class="hljs-keyword">FROM</span> table_b; <span class="hljs-comment">-- è¿™é‡Œä¼šæŠ¥é”™ï¼</span>
</code></pre>
<h3 data-id="heading-4">æ³•åˆ™2ï¼šç†è§£æ‰§è¡Œé¡ºåº</h3>
<p>é›†åˆè¿ç®—ç¬¦é»˜è®¤æŒ‰ä¹¦å†™é¡ºåºä»å·¦åˆ°å³æ‰§è¡Œã€‚å¦‚æœéœ€è¦æ”¹å˜æ‰§è¡Œé¡ºåºï¼Œå¿…é¡»ä½¿ç”¨æ‹¬å·ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å…ˆåˆå¹¶Aå’ŒBï¼Œå†ä¸Cå–äº¤é›†</span>
(<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> table_a
 <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
 <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> table_b)
<span class="hljs-keyword">INTERSECT</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> table_c;
</code></pre>
<h3 data-id="heading-5">æ³•åˆ™3ï¼šæ…ç”¨ORDER BYå’ŒLIMIT</h3>
<p>åœ¨é›†åˆè¿ç®—ä¸­ä½¿ç”¨ORDER BYå’ŒLIMITæ—¶è¦æ³¨æ„ä½œç”¨èŒƒå›´ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¿™ä¸ªæŸ¥è¯¢åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸ä¼šæŒ‰é¢„æœŸå·¥ä½œ</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> table_a
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> table_b
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> create_time <span class="hljs-keyword">DESC</span>
LIMIT <span class="hljs-number">100</span>;
 
<span class="hljs-comment">-- æ­£ç¡®çš„å†™æ³•ï¼šå…ˆé™åˆ¶å„å­æŸ¥è¯¢ç»“æœï¼Œå†åˆå¹¶</span>
(<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> table_a <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> create_time <span class="hljs-keyword">DESC</span> LIMIT <span class="hljs-number">50</span>)
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
(<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> table_b <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> create_time <span class="hljs-keyword">DESC</span> LIMIT <span class="hljs-number">50</span>)
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> create_time <span class="hljs-keyword">DESC</span>
LIMIT <span class="hljs-number">100</span>;
</code></pre>
<h2 data-id="heading-6">æ€§èƒ½ä¼˜åŒ–å®æˆ˜æŠ€å·§</h2>
<h3 data-id="heading-7">æŠ€å·§1ï¼šèƒ½ç”¨UNION ALLå°±ä¸ç”¨UNION</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ä¸æ¨èçš„å†™æ³•</span>
<span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> logs_202401
<span class="hljs-keyword">UNION</span>
<span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> logs_202402
<span class="hljs-keyword">UNION</span>
<span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> logs_202403;
 
<span class="hljs-comment">-- æ¨èçš„å†™æ³•ï¼šå…ˆåˆå¹¶å†å»é‡</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> user_id <span class="hljs-keyword">FROM</span> (
    <span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> logs_202401
    <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
    <span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> logs_202402
    <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
    <span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> logs_202403
) t;
</code></pre>
<h3 data-id="heading-8">æŠ€å·§2ï¼šåˆç†ä½¿ç”¨Map-sideä¼˜åŒ–</h3>
<p>å¯¹äºç‰¹å®šçš„é›†åˆè¿ç®—ï¼Œå¯ä»¥è€ƒè™‘åœ¨Mapç«¯è¿›è¡Œéƒ¨åˆ†èšåˆï¼Œå‡å°‘Shuffleæ•°æ®é‡ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åœ¨å­æŸ¥è¯¢ä¸­å…ˆè¿›è¡Œå»é‡</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> user_id <span class="hljs-keyword">FROM</span> (
    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> user_id <span class="hljs-keyword">FROM</span> table_a
    <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
    <span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> user_id <span class="hljs-keyword">FROM</span> table_b
) t;
</code></pre>
<h3 data-id="heading-9">æŠ€å·§3ï¼šåˆ©ç”¨åˆ†åŒºå’Œç´¢å¼•</h3>
<p>å¦‚æœæ¶‰åŠçš„è¡¨æœ‰åˆ†åŒºï¼Œç¡®ä¿åœ¨WHEREæ¡ä»¶ä¸­ä½¿ç”¨åˆ†åŒºå­—æ®µï¼Œå‡å°‘æ‰«æçš„æ•°æ®é‡ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> logs <span class="hljs-keyword">WHERE</span> dt <span class="hljs-operator">=</span> <span class="hljs-string">'2025-01-01'</span>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
<span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> logs <span class="hljs-keyword">WHERE</span> dt <span class="hljs-operator">=</span> <span class="hljs-string">'2025-01-02'</span>;
</code></pre>
<h2 data-id="heading-10">å®æˆ˜æ¡ˆä¾‹ï¼šç”¨æˆ·è¡Œä¸ºåˆ†æ</h2>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸‰ä¸ªè¡¨ï¼Œåˆ†åˆ«è®°å½•äº†ç”¨æˆ·åœ¨ä¸åŒå¹³å°çš„è¡Œä¸ºï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºç¤ºä¾‹è¡¨</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> app_clicks (
    user_id <span class="hljs-type">BIGINT</span>,
    click_time <span class="hljs-type">TIMESTAMP</span>,
    page_url STRING
);
 
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> web_clicks (
    user_id <span class="hljs-type">BIGINT</span>,
    click_time <span class="hljs-type">TIMESTAMP</span>,
    page_url STRING
);
 
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> app_users (
    user_id <span class="hljs-type">BIGINT</span>,
    reg_time <span class="hljs-type">TIMESTAMP</span>,
    device STRING
);
</code></pre>
<h3 data-id="heading-11">åœºæ™¯1ï¼šåˆ†æå…¨å¹³å°ç”¨æˆ·è¡Œä¸º</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆå¹¶Appå’ŒWebçš„ç‚¹å‡»æµ</span>
<span class="hljs-keyword">SELECT</span> user_id, click_time, page_url, <span class="hljs-string">'app'</span> <span class="hljs-keyword">as</span> platform
<span class="hljs-keyword">FROM</span> app_clicks
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
<span class="hljs-keyword">SELECT</span> user_id, click_time, page_url, <span class="hljs-string">'web'</span>
<span class="hljs-keyword">FROM</span> web_clicks;
</code></pre>
<h3 data-id="heading-12">åœºæ™¯2ï¼šæ‰¾å‡ºå…¨æ¸ é“æ´»è·ƒç”¨æˆ·</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åŒæ—¶åœ¨Appå’ŒWebéƒ½æœ‰è¡Œä¸ºçš„ç”¨æˆ·</span>
<span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> app_clicks
<span class="hljs-keyword">INTERSECT</span>
<span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> web_clicks;
</code></pre>
<h3 data-id="heading-13">åœºæ™¯3ï¼šåˆ†æå•ä¸€æ¸ é“ç”¨æˆ·</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åªä½¿ç”¨Webï¼Œä¸ä½¿ç”¨Appçš„ç”¨æˆ·</span>
<span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> web_clicks
<span class="hljs-keyword">EXCEPT</span>
<span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> app_clicks;
</code></pre>
<h2 data-id="heading-14">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-15">é—®é¢˜1ï¼šæ•°æ®ç±»å‹ä¸åŒ¹é…</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- é”™è¯¯ï¼šuser_idç±»å‹ä¸ä¸€è‡´</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">CAST</span>(user_id <span class="hljs-keyword">AS</span> STRING) <span class="hljs-keyword">as</span> uid <span class="hljs-keyword">FROM</span> table_a
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
<span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> table_b;  <span class="hljs-comment">-- è¿™é‡Œuser_idæ˜¯BIGINT</span>
 
<span class="hljs-comment">-- è§£å†³æ–¹æ¡ˆï¼šæ˜¾å¼è½¬æ¢æ•°æ®ç±»å‹</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">CAST</span>(user_id <span class="hljs-keyword">AS</span> STRING) <span class="hljs-keyword">as</span> uid <span class="hljs-keyword">FROM</span> table_a
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">CAST</span>(user_id <span class="hljs-keyword">AS</span> STRING) <span class="hljs-keyword">FROM</span> table_b;
</code></pre>
<h3 data-id="heading-16">é—®é¢˜2ï¼šNULLå€¼å¤„ç†</h3>
<p>é›†åˆè¿ç®—ä¸­çš„NULLå€¼éœ€è¦ç‰¹åˆ«æ³¨æ„ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- INTERSECTå’ŒEXCEPTä¼šæ­£ç¡®å¤„ç†NULLå€¼</span>
<span class="hljs-comment">-- ä½†NOT INå¯¹NULLå€¼æ•æ„Ÿ</span>
<span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> table_a
<span class="hljs-keyword">WHERE</span> user_id <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">IN</span> (
    <span class="hljs-keyword">SELECT</span> user_id <span class="hljs-keyword">FROM</span> table_b
    <span class="hljs-comment">-- å¦‚æœtable_b.user_idå¯èƒ½æœ‰NULLï¼Œéœ€è¦è¿‡æ»¤</span>
);
</code></pre>
<h3 data-id="heading-17">é—®é¢˜3ï¼šå¤§è¡¨å…³è”çš„æ€§èƒ½é—®é¢˜</h3>
<p>å½“ä½¿ç”¨JOINæ¨¡æ‹Ÿé›†åˆè¿ç®—æ—¶ï¼Œå¦‚æœè¡¨å¾ˆå¤§ï¼Œè€ƒè™‘ä½¿ç”¨MapJoinï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è®¾ç½®MapJoinä¼˜åŒ–</span>
<span class="hljs-keyword">SET</span> hive.auto.convert.join<span class="hljs-operator">=</span><span class="hljs-literal">true</span>;
<span class="hljs-keyword">SET</span> hive.mapjoin.smalltable.filesize<span class="hljs-operator">=</span><span class="hljs-number">25000000</span>;
 
<span class="hljs-keyword">SELECT</span> <span class="hljs-comment">/*+ MAPJOIN(b) */</span> a.user_id
<span class="hljs-keyword">FROM</span> big_table a
<span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> small_table b <span class="hljs-keyword">ON</span> a.user_id <span class="hljs-operator">=</span> b.user_id
<span class="hljs-keyword">WHERE</span> b.user_id <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>;
</code></pre>
<h2 data-id="heading-18">æ€»ç»“</h2>
<p>HiveSQLçš„é›†åˆè¿ç®—ä¸ºæ•°æ®åˆ†æå¸ˆæä¾›äº†å¼ºå¤§çš„æ•°æ®æ•´åˆèƒ½åŠ›ã€‚è®°ä½ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>è¦åˆå¹¶æ•°æ® â†’ ç”¨ æˆ– UNIONUNION ALL</li>
<li>è¦æ‰¾å…±åŒç‚¹ â†’ ç”¨ INTERSECT</li>
<li>è¦æ‰¾ä¸åŒç‚¹ â†’ ç”¨ EXCEPT</li>
<li>è¦æé«˜æ€§èƒ½ â†’ ä¼˜å…ˆè€ƒè™‘ UNION ALL</li>
</ul>
<blockquote>
<p>æ³¨ï¼š</p>
<p>é€‰æ‹©åˆé€‚è¿ç®—ç¬¦ï¼šæ ¹æ®æ˜¯å¦éœ€è¦å»é‡ï¼Œé€‰ç”¨UNIONï¼ˆå»é‡ï¼‰æˆ–UNION ALLï¼ˆä¸å»é‡ï¼‰</p>
<p>ç‰ˆæœ¬å…¼å®¹æ€§æç¤ºï¼šINTERSECTå’ŒEXCEPTè¿ç®—ç¬¦è¦æ±‚Hiveç‰ˆæœ¬åœ¨2.2.0åŠä»¥ä¸Š</p>
<p>ç‰¹æ®Šæƒ…å†µå¤„ç†ï¼šéœ€ç‰¹åˆ«æ³¨æ„NULLå€¼çš„å¤„ç†åŠæ•°æ®ç±»å‹è½¬æ¢é—®é¢˜</p>
</blockquote>
<p>é›†åˆè¿ç®—çœ‹ä¼¼ç®€å•ï¼Œä½†åœ¨å®é™…çš„å¤§æ•°æ®åœºæ™¯ä¸­ï¼Œåˆç†ä½¿ç”¨è¿™äº›è¿ç®—ç¬¦èƒ½æ˜¾è‘—æå‡æŸ¥è¯¢æ•ˆç‡å’Œä»£ç å¯è¯»æ€§ã€‚å¸Œæœ›è¿™ç¯‡æŒ‡å—èƒ½å¸®åŠ©ä½ åœ¨æ—¥å¸¸å·¥ä½œä¸­æ›´åŠ æ¸¸åˆƒæœ‰ä½™åœ°å¤„ç†æ•°æ®æ•´åˆä»»åŠ¡ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonç¼–ç¨‹å®æˆ˜ï¼šä»å‡½æ•°åˆ°æ¨¡å—åŒ–â€”â€”åˆ›å»ºè‡ªå·±çš„æ¨¡å—ä¸åŒ…]]></title>    <link>https://juejin.cn/post/7584007232411992070</link>    <guid>https://juejin.cn/post/7584007232411992070</guid>    <pubDate>2025-12-16T08:08:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584007232411992070" data-draft-id="7584007232411910150" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonç¼–ç¨‹å®æˆ˜ï¼šä»å‡½æ•°åˆ°æ¨¡å—åŒ–â€”â€”åˆ›å»ºè‡ªå·±çš„æ¨¡å—ä¸åŒ…"/> <meta itemprop="keywords" content="Python"/> <meta itemprop="datePublished" content="2025-12-16T08:08:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç«™å¤§çˆ·IP"/> <meta itemprop="url" content="https://juejin.cn/user/2905353241759261"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonç¼–ç¨‹å®æˆ˜ï¼šä»å‡½æ•°åˆ°æ¨¡å—åŒ–â€”â€”åˆ›å»ºè‡ªå·±çš„æ¨¡å—ä¸åŒ…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2905353241759261/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç«™å¤§çˆ·IP
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:08:36.000Z" title="Tue Dec 16 2025 08:08:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å…è´¹ç¼–ç¨‹è½¯ä»¶ã€Œpython+pycharmã€
é“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpan.quark.cn%2Fs%2F48a86be2fdc0" target="_blank" title="https://pan.quark.cn/s/48a86be2fdc0" ref="nofollow noopener noreferrer">pan.quark.cn/s/48a86be2fâ€¦</a></strong></p>
<p>åœ¨Pythoné¡¹ç›®ä¸­ï¼Œå½“ä»£ç é‡è¶…è¿‡500è¡Œæ—¶ï¼Œå°†æ‰€æœ‰åŠŸèƒ½å †ç Œåœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ä¼šå˜å¾—éš¾ä»¥ç»´æŠ¤ã€‚å°±åƒæ•´ç†ä¹¦æˆ¿æ—¶ï¼ŒæŠŠæ‰€æœ‰ä¹¦ç±å †åœ¨ä¹¦æ¡Œä¸Šä¼šè®©äººæ‰¾ä¸åˆ°éœ€è¦çš„èµ„æ–™ï¼Œè€Œåˆ†é—¨åˆ«ç±»æ”¾åœ¨ä¹¦æ¶ä¸Šåˆ™èƒ½å¿«é€Ÿå®šä½ã€‚Pythonçš„æ¨¡å—åŒ–ç¼–ç¨‹æ­£æ˜¯è¿™ç§æ•´ç†æ€è·¯çš„ä½“ç°â€”â€”é€šè¿‡å°†ä»£ç æ‹†åˆ†æˆç‹¬ç«‹æ¨¡å—å’ŒåŒ…ï¼Œè®©é¡¹ç›®ç»“æ„æ¸…æ™°ã€å¤ç”¨æ€§å¼ºã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ¨¡å—ï¼šä»£ç çš„ç‹¬ç«‹å•å…ƒ</h2>
<h3 data-id="heading-1">1.1 æ¨¡å—çš„æœ¬è´¨</h3>
<p>æ¨¡å—æ˜¯åŒ…å«Pythonå®šä¹‰å’Œè¯­å¥çš„.pyæ–‡ä»¶ï¼Œæ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹æ¨¡å—ã€‚å½“å¯¼å…¥æ¨¡å—æ—¶ï¼ŒPythonä¼šæ‰§è¡Œè¯¥æ–‡ä»¶ä¸­çš„æ‰€æœ‰ä»£ç ï¼Œå¹¶å°†å˜é‡ã€å‡½æ•°å’Œç±»åŠ è½½åˆ°å†…å­˜ã€‚ä¾‹å¦‚åˆ›å»º<code>math_tools.py</code>æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># math_tools.py</span>
PI = <span class="hljs-number">3.1415926</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">circle_area</span>(<span class="hljs-params">radius</span>):
    <span class="hljs-keyword">return</span> PI * radius ** <span class="hljs-number">2</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">sphere_volume</span>(<span class="hljs-params">radius</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-number">4</span>/<span class="hljs-number">3</span> * PI * radius ** <span class="hljs-number">3</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>åœ¨å…¶ä»–æ–‡ä»¶ä¸­å¯¼å…¥è¯¥æ¨¡å—åï¼Œå³å¯ä½¿ç”¨å…¶ä¸­çš„åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> math_tools

<span class="hljs-built_in">print</span>(math_tools.circle_area(<span class="hljs-number">5</span>))  <span class="hljs-comment"># è¾“å‡º78.539815</span>
<span class="hljs-built_in">print</span>(math_tools.sphere_volume(<span class="hljs-number">3</span>))  <span class="hljs-comment"># è¾“å‡º113.097336</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-2">1.2 æ¨¡å—å¯¼å…¥çš„ä¸‰ç§æ–¹å¼</h3>
<p>ï¼ˆ1ï¼‰åŸºç¡€å¯¼å…¥ï¼šç›´æ¥å¯¼å…¥æ•´ä¸ªæ¨¡å—</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span> math_tools
math_tools.<span class="hljs-built_in">circle_area</span>(<span class="hljs-number">5</span>)
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ2ï¼‰åˆ«åå¯¼å…¥ï¼šä¸ºæ¨¡å—èµ·ç®€çŸ­åˆ«å</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> math_tools <span class="hljs-keyword">as</span> mt
mt.<span class="hljs-title function_">circle_area</span>(<span class="hljs-number">5</span>)
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ3ï¼‰ç²¾ç¡®å¯¼å…¥ï¼šåªå¯¼å…¥éœ€è¦çš„å‡½æ•°</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> math_tools <span class="hljs-keyword">import</span> circle_area
circle_area(<span class="hljs-number">5</span>)  <span class="hljs-comment"># ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€æ¨¡å—åå‰ç¼€</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>é€‰æ‹©å»ºè®®</strong>ï¼šå½“æ¨¡å—åŠŸèƒ½è¾ƒå¤šæ—¶ä½¿ç”¨<code>import</code>ï¼Œé¿å…å‘½åå†²çªï¼›å½“åªéœ€å°‘é‡åŠŸèƒ½æ—¶ä½¿ç”¨<code>from...import</code>ï¼Œå‡å°‘ä»£ç é‡ã€‚</p>
<h3 data-id="heading-3">1.3 æ¨¡å—çš„æœç´¢è·¯å¾„</h3>
<p>PythonæŒ‰ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾æ¨¡å—ï¼š</p>
<ol>
<li>å½“å‰ç›®å½•</li>
<li>PYTHONPATHç¯å¢ƒå˜é‡æŒ‡å®šçš„ç›®å½•</li>
<li>æ ‡å‡†åº“è·¯å¾„</li>
<li>ç¬¬ä¸‰æ–¹åº“å®‰è£…è·¯å¾„</li>
</ol>
<p>é€šè¿‡<code>sys.path</code>å¯æŸ¥çœ‹å®Œæ•´æœç´¢è·¯å¾„ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">import</span> sys
<span class="hljs-built_in">print</span>(sys.path)
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>è‹¥è¦æ·»åŠ è‡ªå®šä¹‰è·¯å¾„ï¼Œå¯ä¿®æ”¹è¯¥åˆ—è¡¨æˆ–è®¾ç½®PYTHONPATHç¯å¢ƒå˜é‡ã€‚</p>
<h3 data-id="heading-4">1.4 æ¨¡å—çš„é‡æ–°åŠ è½½</h3>
<p>å½“ä¿®æ”¹æ¨¡å—åï¼Œéœ€é‡æ–°åŠ è½½æ‰èƒ½ç”Ÿæ•ˆã€‚ä½¿ç”¨<code>importlib.reload</code>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> importlib
<span class="hljs-keyword">import</span> math_tools

<span class="hljs-comment"># ä¿®æ”¹math_tools.pyå</span>
importlib.reload(math_tools)
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-5">1.5 æ¨¡å—çš„<code>__name__</code>å±æ€§</h3>
<p>æ¯ä¸ªæ¨¡å—éƒ½æœ‰<code>__name__</code>å±æ€§ï¼Œå½“ç›´æ¥è¿è¡Œæ¨¡å—æ—¶ä¸º<code>"__main__"</code>ï¼Œè¢«å¯¼å…¥æ—¶ä¸ºæ¨¡å—åã€‚åˆ©ç”¨è¯¥ç‰¹æ€§å¯ç¼–å†™æµ‹è¯•ä»£ç ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># math_tools.py</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æµ‹è¯•circle_area(2):"</span>, circle_area(2))
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ç›´æ¥è¿è¡Œæ¨¡å—æ—¶ä¼šæ‰§è¡Œæµ‹è¯•ä»£ç ï¼Œè¢«å¯¼å…¥æ—¶ä¸ä¼šæ‰§è¡Œã€‚</p>
<h2 data-id="heading-6">äºŒã€åŒ…ï¼šæ¨¡å—çš„é›†åˆ</h2>
<h3 data-id="heading-7">2.1 åˆ›å»ºåŒ…çš„ç»“æ„</h3>
<p>åŒ…æ˜¯åŒ…å«<code>__init__.py</code>æ–‡ä»¶çš„ç›®å½•ï¼Œç”¨äºç»„ç»‡ç›¸å…³æ¨¡å—ã€‚ä¾‹å¦‚åˆ›å»ºå›¾å½¢è®¡ç®—åŒ…ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">graphics/
â”œâ”€â”€ <span class="hljs-strong">__init__</span>.py
â”œâ”€â”€ geometry.py
â””â”€â”€ transforms.py
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><code>__init__.py</code>å¯ä»¥æ˜¯ç©ºæ–‡ä»¶ï¼Œä¹Ÿå¯åŒ…å«åˆå§‹åŒ–ä»£ç æˆ–å®šä¹‰<code>__all__</code>å˜é‡æ§åˆ¶<code>from package import *</code>çš„è¡Œä¸ºã€‚</p>
<h3 data-id="heading-8">2.2 åŒ…çš„å¯¼å…¥æ–¹å¼</h3>
<p>ï¼ˆ1ï¼‰å¯¼å…¥æ•´ä¸ªåŒ…ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">import</span> graphics
graphics.geometry.<span class="hljs-built_in">circle_area</span>(<span class="hljs-number">5</span>)
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ2ï¼‰å¯¼å…¥ç‰¹å®šæ¨¡å—ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">from</span> graphics <span class="hljs-keyword">import</span> geometry
geometry.<span class="hljs-title function_">circle_area</span>(<span class="hljs-number">5</span>)
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ3ï¼‰å¯¼å…¥ç‰¹å®šå‡½æ•°ï¼š</p>
<pre><code class="hljs language-java" lang="java">from graphics.geometry <span class="hljs-keyword">import</span> circle_area
<span class="hljs-title function_">circle_area</span><span class="hljs-params">(<span class="hljs-number">5</span>)</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-9">2.3 ç›¸å¯¹å¯¼å…¥ï¼ˆåŒ…å†…æ¨¡å—äº’è°ƒï¼‰</h3>
<p>åœ¨åŒ…å†…éƒ¨æ¨¡å—é—´å¯¼å…¥æ—¶ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„æ›´æ¸…æ™°ã€‚å‡è®¾<code>transforms.py</code>éœ€è¦è°ƒç”¨<code>geometry.py</code>ä¸­çš„å‡½æ•°ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># transforms.py</span>
<span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> geometry  <span class="hljs-comment"># .è¡¨ç¤ºå½“å‰åŒ…</span>
<span class="hljs-keyword">from</span> .. <span class="hljs-keyword">import</span> utils    <span class="hljs-comment"># ..è¡¨ç¤ºä¸Šçº§åŒ…ï¼ˆéœ€åœ¨å­åŒ…ä¸­ä½¿ç”¨ï¼‰</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">rotate_circle</span>(<span class="hljs-params">radius, angle</span>):
    area = geometry.circle_area(radius)
    <span class="hljs-comment"># æ—‹è½¬è®¡ç®—...</span>
    <span class="hljs-keyword">return</span> area
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p><strong>æ³¨æ„</strong>ï¼šç›¸å¯¹å¯¼å…¥ä»…åœ¨åŒ…å†…éƒ¨æœ‰æ•ˆï¼Œç›´æ¥è¿è¡Œçš„è„šæœ¬æ–‡ä»¶ä¸èƒ½ä½¿ç”¨ç›¸å¯¹å¯¼å…¥ã€‚</p>
<h3 data-id="heading-10">2.4 åŒ…çš„åˆå§‹åŒ–æ–‡ä»¶<code>__init__.py</code></h3>
<p>è¯¥æ–‡ä»¶æœ‰ä¸‰ä¸ªä½œç”¨ï¼š</p>
<ol>
<li>æ ‡è¯†ç›®å½•ä¸ºPythonåŒ…</li>
<li>æ‰§è¡ŒåŒ…åˆå§‹åŒ–ä»£ç </li>
<li>å®šä¹‰<code>__all__</code>æ§åˆ¶æ‰¹é‡å¯¼å…¥</li>
</ol>
<p>ç¤ºä¾‹<code>__init__.py</code>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># graphics/__init__.py</span>
__all__ = [<span class="hljs-string">'geometry'</span>, <span class="hljs-string">'transforms'</span>]  <span class="hljs-comment"># from graphics import * æ—¶åªå¯¼å…¥è¿™ä¸¤ä¸ªæ¨¡å—</span>

<span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> geometry
<span class="hljs-keyword">from</span> . <span class="hljs-keyword">import</span> transforms

<span class="hljs-keyword">def</span> <span class="hljs-title function_">greet</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"Welcome to graphics package!"</span>)
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h2 data-id="heading-11">ä¸‰ã€å®æˆ˜æ¡ˆä¾‹ï¼šå¼€å‘ä¸€ä¸ªæ•°æ®å¤„ç†å·¥å…·åŒ…</h2>
<h3 data-id="heading-12">3.1 é¡¹ç›®è§„åˆ’</h3>
<p>å¼€å‘<code>data_processor</code>åŒ…ï¼ŒåŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>æ–‡ä»¶è¯»å†™ï¼ˆ<code>file_io.py</code>ï¼‰</li>
<li>æ•°æ®æ¸…æ´—ï¼ˆ<code>cleaning.py</code>ï¼‰</li>
<li>ç»Ÿè®¡åˆ†æï¼ˆ<code>stats.py</code>ï¼‰</li>
</ul>
<p>é¡¹ç›®ç»“æ„ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">data<span class="hljs-emphasis">_processor/
â”œâ”€â”€ <span class="hljs-strong">__init__</span>.py
â”œâ”€â”€ file_</span>io.py
â”œâ”€â”€ cleaning.py
â””â”€â”€ stats.py
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-13">3.2 æ¨¡å—å®ç°</h3>
<p>ï¼ˆ1ï¼‰<code>file_io.py</code>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> csv
<span class="hljs-keyword">import</span> json

<span class="hljs-keyword">def</span> <span class="hljs-title function_">read_csv</span>(<span class="hljs-params">file_path</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">list</span>(csv.reader(f))

<span class="hljs-keyword">def</span> <span class="hljs-title function_">write_csv</span>(<span class="hljs-params">data, file_path</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'w'</span>, encoding=<span class="hljs-string">'utf-8'</span>, newline=<span class="hljs-string">''</span>) <span class="hljs-keyword">as</span> f:
        writer = csv.writer(f)
        writer.writerows(data)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">read_json</span>(<span class="hljs-params">file_path</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'r'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
        <span class="hljs-keyword">return</span> json.load(f)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">write_json</span>(<span class="hljs-params">data, file_path</span>):
    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'w'</span>, encoding=<span class="hljs-string">'utf-8'</span>) <span class="hljs-keyword">as</span> f:
        json.dump(data, f, ensure_ascii=<span class="hljs-literal">False</span>, indent=<span class="hljs-number">4</span>)
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ2ï¼‰<code>cleaning.py</code>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">def remove_duplicates(<span class="hljs-keyword">data</span>):
    <span class="hljs-keyword">return</span> list({tuple(row) <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> <span class="hljs-keyword">data</span>})

def fill_missing(<span class="hljs-keyword">data</span>, value=<span class="hljs-number">0</span>):
    <span class="hljs-keyword">return</span> [[cell <span class="hljs-keyword">if</span> cell <span class="hljs-keyword">is</span> not None <span class="hljs-keyword">else</span> value <span class="hljs-keyword">for</span> cell <span class="hljs-keyword">in</span> row] <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> <span class="hljs-keyword">data</span>]
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ3ï¼‰<code>stats.py</code>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">mean</span>(<span class="hljs-params">numbers</span>):
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">sum</span>(numbers) / <span class="hljs-built_in">len</span>(numbers) <span class="hljs-keyword">if</span> numbers <span class="hljs-keyword">else</span> <span class="hljs-number">0</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">median</span>(<span class="hljs-params">numbers</span>):
    sorted_nums = <span class="hljs-built_in">sorted</span>(numbers)
    n = <span class="hljs-built_in">len</span>(numbers)
    mid = n // <span class="hljs-number">2</span>
    <span class="hljs-keyword">return</span> (sorted_nums[mid] + sorted_nums[-mid-<span class="hljs-number">1</span>]) / <span class="hljs-number">2</span> <span class="hljs-keyword">if</span> n % <span class="hljs-number">2</span> == <span class="hljs-number">0</span> <span class="hljs-keyword">else</span> sorted_nums[mid]
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ4ï¼‰<code>__init__.py</code>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">from</span> .<span class="hljs-property">file_io</span> <span class="hljs-keyword">import</span> read_csv, write_csv, read_json, write_json
<span class="hljs-keyword">from</span> .<span class="hljs-property">cleaning</span> <span class="hljs-keyword">import</span> remove_duplicates, fill_missing
<span class="hljs-keyword">from</span> .<span class="hljs-property">stats</span> <span class="hljs-keyword">import</span> mean, median

__all__ = [<span class="hljs-string">'read_csv'</span>, <span class="hljs-string">'write_csv'</span>, <span class="hljs-string">'remove_duplicates'</span>, <span class="hljs-string">'mean'</span>, <span class="hljs-string">'median'</span>]
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-14">3.3 ä½¿ç”¨ç¤ºä¾‹</h3>
<p>ï¼ˆ1ï¼‰ç›´æ¥ä½¿ç”¨æ¨¡å—åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from data_processor.file_io import read_csv
from data_processor.cleaning import remove_duplicates

<span class="hljs-attr">data</span> = read_csv(<span class="hljs-string">'input.csv'</span>)
<span class="hljs-attr">clean_data</span> = remove_duplicates(data)
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>ï¼ˆ2ï¼‰æ‰¹é‡å¯¼å…¥å¸¸ç”¨åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from data_processor import read_csv, remove_duplicates, mean

<span class="hljs-attr">data</span> = read_csv(<span class="hljs-string">'input.csv'</span>)
<span class="hljs-attr">clean_data</span> = remove_duplicates(data)
<span class="hljs-attr">avg</span> = mean([row[<span class="hljs-number">1</span>] for row in clean_data if isinstance(row[<span class="hljs-number">1</span>], (int, float))])
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-15">3.4 æ‰“åŒ…å‘å¸ƒï¼ˆå¯é€‰ï¼‰</h3>
<p>è‹¥è¦å°†åŒ…åˆ†äº«ç»™ä»–äººä½¿ç”¨ï¼Œå¯åˆ›å»ºsetup.pyæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">from setuptools import setup, find_packages

setup(
    <span class="hljs-attr">name</span>=<span class="hljs-string">"data_processor"</span>,
    <span class="hljs-attr">version</span>=<span class="hljs-string">"0.1"</span>,
    <span class="hljs-attr">packages</span>=find_packages(),
    <span class="hljs-attr">install_requires</span>=[],  <span class="hljs-comment"># ä¾èµ–é¡¹</span>
    <span class="hljs-attr">author</span>=<span class="hljs-string">"Your Name"</span>,
    <span class="hljs-attr">description</span>=<span class="hljs-string">"A simple data processing package"</span>
)
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<p>è¿è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…æœ¬åœ°åŒ…ï¼š</p>
<pre><code class="hljs language-erlang" lang="erlang">pip install -e .
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h2 data-id="heading-16">å››ã€æ¨¡å—åŒ–ç¼–ç¨‹çš„æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-17">4.1 æ¨¡å—è®¾è®¡åŸåˆ™</h3>
<ol>
<li><strong>å•ä¸€èŒè´£åŸåˆ™</strong>ï¼šæ¯ä¸ªæ¨¡å—/å‡½æ•°åªåšä¸€ä»¶äº‹</li>
<li><strong>ä½è€¦åˆé«˜å†…èš</strong>ï¼šæ¨¡å—é—´ä¾èµ–å°½å¯èƒ½å°‘ï¼Œæ¨¡å—å†…éƒ¨åŠŸèƒ½ç´§å¯†ç›¸å…³</li>
<li><strong>åˆç†å‘½å</strong>ï¼šæ¨¡å—åä½¿ç”¨å°å†™å­—æ¯å’Œä¸‹åˆ’çº¿ï¼Œå¦‚<code>data_processor</code></li>
<li><strong>æ–‡æ¡£å­—ç¬¦ä¸²</strong>ï¼šä¸ºæ¨¡å—ã€å‡½æ•°æ·»åŠ docstringè¯´æ˜ç”¨é€”å’Œå‚æ•°</li>
</ol>
<h3 data-id="heading-18">4.2 é¿å…å¾ªç¯å¯¼å…¥</h3>
<p>å½“æ¨¡å—Aå¯¼å…¥æ¨¡å—Bï¼ŒåŒæ—¶æ¨¡å—Båˆå¯¼å…¥æ¨¡å—Aæ—¶ä¼šäº§ç”Ÿå¾ªç¯å¯¼å…¥é”™è¯¯ã€‚è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>é‡æ„ä»£ç ï¼Œå°†å…±äº«åŠŸèƒ½ç§»åˆ°ç¬¬ä¸‰ä¸ªæ¨¡å—</li>
<li>å°†å¯¼å…¥è¯­å¥ç§»åˆ°å‡½æ•°å†…éƒ¨ï¼ˆä¸æ¨èï¼Œé™ä½å¯è¯»æ€§ï¼‰</li>
</ul>
<h3 data-id="heading-19">4.3 ä½¿ç”¨<code>if __name__ == "__main__"</code></h3>
<p>ä¸ºæ¨¡å—æ·»åŠ æµ‹è¯•ä»£ç æ—¶ï¼ŒåŠ¡å¿…æ”¾åœ¨è¯¥æ¡ä»¶å—å†…ï¼Œé¿å…è¢«å¯¼å…¥æ—¶æ„å¤–æ‰§è¡Œã€‚</p>
<h3 data-id="heading-20">4.4 ç‰ˆæœ¬æ§åˆ¶</h3>
<p>ä¸ºæ¨¡å—æ·»åŠ ç‰ˆæœ¬å·ï¼Œä¾¿äºè¿½è¸ªå˜æ›´ã€‚å¯åœ¨<code>__init__.py</code>ä¸­å®šä¹‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">__version__</span> = <span class="hljs-string">'0.1.0'</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-21">4.5 ä¾èµ–ç®¡ç†</h3>
<p>ä½¿ç”¨<code>requirements.txt</code>æˆ–<code>pyproject.toml</code>æ˜ç¡®é¡¹ç›®ä¾èµ–ï¼Œç¡®ä¿ç¯å¢ƒä¸€è‡´æ€§ã€‚</p>
<h2 data-id="heading-22">äº”ã€å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-23">5.1 æ¨¡å—æ‰¾ä¸åˆ°é”™è¯¯</h3>
<p>é”™è¯¯ç¤ºä¾‹ï¼š<code>ModuleNotFoundError: No module named 'xxx'</code></p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>æ£€æŸ¥æ¨¡å—æ–‡ä»¶æ˜¯å¦å­˜åœ¨</li>
<li>ç¡®è®¤æ–‡ä»¶åœ¨Pythonæœç´¢è·¯å¾„ä¸­ï¼ˆæ‰“å°<code>sys.path</code>æŸ¥çœ‹ï¼‰</li>
<li>æ£€æŸ¥æ–‡ä»¶åæ˜¯å¦ä¸æ¨¡å—åä¸€è‡´ï¼ˆä¸è¦ä½¿ç”¨Pythonä¿ç•™å­—å¦‚<code>str.py</code>ï¼‰</li>
</ol>
<h3 data-id="heading-24">5.2 å¯¼å…¥å†²çª</h3>
<p>å½“å¤šä¸ªæ¨¡å—æœ‰åŒåå‡½æ•°æ—¶ï¼Œä½¿ç”¨å®Œæ•´å¯¼å…¥è·¯å¾„åŒºåˆ†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">from</span> package1 <span class="hljs-keyword">import</span> func <span class="hljs-keyword">as</span> func1
<span class="hljs-keyword">from</span> package2 <span class="hljs-keyword">import</span> func <span class="hljs-keyword">as</span> func2
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-25">5.3 æ€§èƒ½ä¼˜åŒ–</h3>
<p>å¯¹äºé¢‘ç¹å¯¼å…¥çš„æ¨¡å—ï¼Œå¯å°†å¸¸ç”¨å‡½æ•°æ”¾åœ¨<code>__init__.py</code>ä¸­ç›´æ¥æš´éœ²ï¼Œå‡å°‘å¯¼å…¥å±‚çº§ã€‚</p>
<h3 data-id="heading-26">5.4 è·¨å¹³å°å…¼å®¹</h3>
<p>å¤„ç†æ–‡ä»¶è·¯å¾„æ—¶ä½¿ç”¨<code>os.path</code>æ¨¡å—ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import os

<span class="hljs-attr">file_path</span> = os.path.join(<span class="hljs-string">'data'</span>, <span class="hljs-string">'input.csv'</span>)  <span class="hljs-comment"># è‡ªåŠ¨å¤„ç†ä¸åŒæ“ä½œç³»ç»Ÿçš„è·¯å¾„åˆ†éš”ç¬¦</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h2 data-id="heading-27">å…­ã€è¿›é˜¶æŠ€å·§</h2>
<h3 data-id="heading-28">6.1 å»¶è¿Ÿå¯¼å…¥</h3>
<p>å¯¹äºå¯åŠ¨æ—¶ä¸éœ€è¦ç«‹å³ä½¿ç”¨çš„æ¨¡å—ï¼Œå¯åœ¨å‡½æ•°å†…éƒ¨å¯¼å…¥ä»¥åŠ å¿«ç¨‹åºå¯åŠ¨é€Ÿåº¦ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">process_data</span>():
    <span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd  <span class="hljs-comment"># å»¶è¿Ÿå¯¼å…¥</span>
    df = pd.read_csv(<span class="hljs-string">'data.csv'</span>)
    <span class="hljs-comment"># å¤„ç†æ•°æ®...</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-29">6.2 æ³¨å†Œæ¨¡å¼</h3>
<p>é€šè¿‡è£…é¥°å™¨å®ç°æ’ä»¶å¼æ¶æ„ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># plugins.py</span>
_plugins = {}

<span class="hljs-keyword">def</span> <span class="hljs-title function_">register</span>(<span class="hljs-params">name</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">decorator</span>(<span class="hljs-params">func</span>):
        _plugins[name] = func
        <span class="hljs-keyword">return</span> func
    <span class="hljs-keyword">return</span> decorator

<span class="hljs-comment"># user_plugins.py</span>
<span class="hljs-keyword">from</span> plugins <span class="hljs-keyword">import</span> register

<span class="hljs-meta">@register(<span class="hljs-params"><span class="hljs-string">'uppercase'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">uppercase_processor</span>(<span class="hljs-params">text</span>):
    <span class="hljs-keyword">return</span> text.upper()

<span class="hljs-comment"># main.py</span>
<span class="hljs-keyword">from</span> plugins <span class="hljs-keyword">import</span> _plugins
<span class="hljs-keyword">from</span> user_plugins <span class="hljs-keyword">import</span> *

<span class="hljs-built_in">print</span>(_plugins[<span class="hljs-string">'uppercase'</span>](<span class="hljs-string">'hello'</span>))  <span class="hljs-comment"># è¾“å‡ºHELLO</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h3 data-id="heading-30">6.3 åŠ¨æ€å¯¼å…¥</h3>
<p>æ ¹æ®å­—ç¬¦ä¸²åç§°å¯¼å…¥æ¨¡å—ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">module_name</span> = <span class="hljs-string">'math_tools'</span>
<span class="hljs-attr">math_module</span> = __import__(module_name)  <span class="hljs-comment"># æ–¹æ³•1</span>
<span class="hljs-comment"># æˆ–</span>
import importlib
<span class="hljs-attr">math_module</span> = importlib.import_module(module_name)  <span class="hljs-comment"># æ–¹æ³•2</span>
</code></pre>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" title="ç‚¹å‡»å¹¶æ‹–æ‹½ä»¥ç§»åŠ¨" loading="lazy"/></p>
<h2 data-id="heading-31">ç»“è¯­</h2>
<p>æ¨¡å—åŒ–ç¼–ç¨‹æ˜¯Pythoné¡¹ç›®ä»"èƒ½è¿è¡Œ"åˆ°"æ˜“ç»´æŠ¤"çš„å…³é”®è·ƒè¿ã€‚é€šè¿‡åˆç†æ‹†åˆ†åŠŸèƒ½ã€æ˜ç¡®æ¥å£å®šä¹‰ï¼Œä¸ä»…èƒ½æå‡ä»£ç å¤ç”¨ç‡ï¼Œè¿˜èƒ½è®©å›¢é˜Ÿåä½œæ›´åŠ é«˜æ•ˆã€‚è®°ä½ï¼šå¥½çš„ä»£ç ç»“æ„åº”è¯¥åƒä¹é«˜ç§¯æœ¨â€”â€”æ¯ä¸ªæ¨¡å—éƒ½æ˜¯ç‹¬ç«‹çš„æ ‡å‡†ä»¶ï¼Œå¯ä»¥è½»æ¾ç»„åˆæˆå„ç§å¤æ‚ç³»ç»Ÿã€‚ä»ä»Šå¤©å¼€å§‹ï¼Œå°è¯•å°†è¶…è¿‡200è¡Œçš„è„šæœ¬é‡æ„ä¸ºæ¨¡å—åŒ–ç»“æ„ï¼Œä½ ä¼šé€æ¸æ„Ÿå—åˆ°è¿™ç§ç¼–ç¨‹æ–¹å¼å¸¦æ¥çš„ç”Ÿäº§åŠ›æå‡ã€‚</p>
<p>â€‹</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é€æ°´æµè¿œï¼Œé•¿å¿†å½“æ­Œâ€”â€”æˆ‘çš„2025]]></title>    <link>https://juejin.cn/post/7584071941024956431</link>    <guid>https://juejin.cn/post/7584071941024956431</guid>    <pubDate>2025-12-16T08:35:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584071941024956431" data-draft-id="7462611075534569512" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€æ°´æµè¿œï¼Œé•¿å¿†å½“æ­Œâ€”â€”æˆ‘çš„2025"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-12-16T08:35:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Gopher"/> <meta itemprop="url" content="https://juejin.cn/user/3913917123797735"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€æ°´æµè¿œï¼Œé•¿å¿†å½“æ­Œâ€”â€”æˆ‘çš„2025
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3913917123797735/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Gopher
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:35:15.000Z" title="Tue Dec 16 2025 08:35:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å²æœ«çš„é’Ÿå£°åœ¨å¯’å¤œé‡Œå›è¡ï¼Œæ˜¾ç¤ºå™¨çš„å¾®å…‰åœ¨æ»¡å±çš„å…¬å¼ä¸ä»£ç é—´æ˜æ˜ç­ç­ã€‚äºæˆ‘è€Œè¨€ï¼Œè¿™äº›æ–‡å­—ï¼Œæ˜¯æ—¶é—´é£å°˜çš„è¯è¯ï¼Œæ˜¯å¯¹æ¶ˆå¤±çš„ã€å­˜åœ¨çš„äº‹ç‰©çš„ç¥­å¥ ï¼Œæ˜¯å¯¹å‘å¾®ä¹‹ç‰©çš„é‡æ–°æ‰“é‡ã€‚é€æ°´æµè¿œï¼Œé•¿å¿†å½“æ­Œï¼Œè¿™äº›æ–‡å­—çŒ®äºˆè¿‡å¾€ä¸å½“ä¸‹ï¼ŒçŒ®äºˆæ¶ˆå¤±çš„ã€åˆ°æ¥çš„æ— å°½å‘½è¿å’Œå²æœˆã€‚</p>
<p>ç»ˆäºï¼Œ2025å¹´è¿‡å»äº†ã€‚</p>
<h2 data-id="heading-0">è¿™ä¸€å¹´æˆ‘è¯»äº†ä¸€äº›ä¹¦</h2>
<blockquote>
<p>æˆ‘æ˜¯å¤©ä¸Šæ¸…é£ä»™ï¼Œé˜…è§ˆç¾¤ä¹¦åœ¨äººé—´</p>
</blockquote>
<p>æ·±å¤œçš„å®éªŒå®¤é‡Œï¼Œæ–‡çŒ®ä¸ä»£ç åœ¨å±å¹•ä¸Šäº¤æ›¿é—ªç°ï¼Œä»¿ä½›ä¸¤ä¸ªå¹³è¡Œä¸–ç•Œçš„å¯¹è¯ã€‚ä»Šå¹´é‡è¯»æå¨Ÿçš„ã€Šé¥è¿œçš„å‘æ—¥è‘µã€‹ï¼Œåœ¨é˜¿å°”æ³°çš„è’åŸå™äº‹ä¸­æ‰¾åˆ°äº†æŸç§æ·±åˆ»çš„å…±é¸£ã€‚å¥¹ç¬”ä¸‹é‚£äº›åœ¨ç¢±åœŸä¸­æŒ£æ‰çš„å‘æ—¥è‘µï¼Œä»ä¸åƒæ¢µé«˜ç”»ä½œä¸­é‚£æ ·ç‡ƒçƒ§ç€ç”Ÿå‘½çš„ç‹‚çƒ­ï¼Œä¹Ÿä¸è¿½æ±‚æˆä¸ºè€€çœ¼çš„å¤ªé˜³å›¾è…¾ï¼Œåªæ˜¯å›ºæ‰§åœ°åœ¨è´«ç˜ ä¸­å®Œæˆç€å±äºè‡ªå·±çš„è½®å›ã€‚è¿™ç§åœ¨è’å‡‰ä¸­ä¾ç„¶ä¿æŒå°Šä¸¥çš„å§¿æ€ï¼Œè®©æˆ‘æƒ³èµ·å®éªŒå®¤çª—å¤–é‚£äº›åœ¨ç –ç¼é—´é¡½å¼ºç”Ÿé•¿çš„é‡è‰ï¼Œå®ƒä»¬ä¸éœ€è¦ä»»ä½•äººçš„æ³¨ç›®ï¼Œåªæ˜¯åœ¨æ— äººé—®æ´¥çš„è§’è½é‡Œï¼ŒæŒ‰ç…§è‡ªå·±çš„èŠ‚å¥å®Œæˆç”Ÿå‘½çš„æ—…ç¨‹ã€‚</p>
<p>è¿™ç§æœ´ç´ çš„ç”Ÿå‘½å“²å­¦ï¼Œæ°ä¸å­˜åœ¨ä¸»ä¹‰çš„æ ¸å¿ƒæ´è§ä¸è°‹è€Œåˆã€‚ä¸–ç•Œæœ¬è´¨ä¸Šæ˜¯è’è¯çš„ï¼Œäººç”Ÿæˆ–è®¸çœŸçš„æ²¡æœ‰é¢„è®¾çš„æ„ä¹‰ï¼Œå°±åƒæ¨çŸ³ä¸Šå±±çš„è¥¿è¥¿å¼—ï¼Œä»–çš„åŠ³ä½œçœ‹ä¼¼æ˜¯æ— æ„ä¹‰çš„é‡å¤ã€‚ä½†åŠ ç¼ªå‘Šè¯‰æˆ‘ä»¬ï¼Œé‡è¦çš„ä¸æ˜¯çŸ³å¤´ä¼šä¸ä¼šå†æ¬¡æ»šè½ï¼Œè€Œæ˜¯åœ¨è¿™ä¸ªçœ‹ä¼¼å¾’åŠ³çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¾ç„¶ä¿æœ‰è¯´"æ˜¯"çš„å‹‡æ°”ã€‚å½“è¥¿è¥¿å¼—æ„è¯†åˆ°è’è¯çš„å­˜åœ¨ï¼Œå´ä¾ç„¶é€‰æ‹©æ¨çŸ³ä¸Šå±±æ—¶ï¼Œä»–å°±å·²ç»æˆ˜èƒœäº†å‘½è¿ã€‚è¿™ç§è§‰æ‚Ÿï¼Œè®©ä»–åœ¨æ¯ä¸€æ¬¡ä¸‹å±±çš„è·¯ä¸Šéƒ½èƒ½ä»¥è½»ç›ˆçš„è„šæ­¥ï¼Œç›´é¢ç”Ÿå‘½çš„é‡é‡ã€‚</p>
<p>æˆåŠŸä»æ¥ä¸æ˜¯ä»¥å®Œç¾çš„ç»“å±€æ¥å®šä¹‰çš„ï¼Œå­˜åœ¨æœ¬èº«å°±æ˜¯ä¸€ç§è‹±é›„ä¸»ä¹‰ã€‚è¿™ç§è‹±é›„ä¸»ä¹‰å°±ä½“ç°åœ¨ç»å¢ƒä¸­çš„è‡ªç”±é€‰æ‹©â€”â€”å°±åƒæå¨Ÿç¬”ä¸‹é‚£äº›åœ¨ç›ç¢±åœ°é‡Œä¾ç„¶åŠªåŠ›ç”Ÿé•¿çš„å‘æ—¥è‘µï¼Œå®ƒä»¬çš„é€‰æ‹©ä¸æ˜¯æˆä¸ºåˆ«äººçœ¼ä¸­çš„é£æ™¯ï¼Œè€Œæ˜¯åœ¨æœ€è´«ç˜ çš„åœŸå£¤é‡Œå®ˆä½ç”Ÿå‘½çš„æœ¬çœŸã€‚è¿™è®©æˆ‘æƒ³èµ·ç§‘ç ”è·¯ä¸Šçš„æ—¥æ—¥å¤œå¤œï¼Œé‚£äº›çœ‹ä¼¼æ¯«æ— è¿›å±•çš„å®éªŒï¼Œé‚£äº›åå¤è°ƒè¯•çš„ä»£ç ï¼Œä½•å°ä¸åƒæ˜¯å¦ä¸€ç§å½¢å¼çš„"æ¨çŸ³ä¸Šå±±"ï¼Ÿæˆ‘ä»¬é€‰æ‹©ç»§ç»­ï¼Œä¸æ˜¯å› ä¸ºç¡®ä¿¡ä¸€å®šèƒ½æŠµè¾¾å±±é¡¶ï¼Œè€Œæ˜¯å› ä¸ºåœ¨æ¨çŸ³çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ‰¾åˆ°äº†å±äºè‡ªå·±çš„èŠ‚å¥å’Œæ„ä¹‰ã€‚</p>
<p>çœŸæ­£çš„æ™ºæ…§ï¼Œæˆ–è®¸å°±è—åœ¨è¿™ç§æ—¥å¤ä¸€æ—¥çš„åšæŒé‡Œã€‚å°±åƒè’åŸä¸Šçš„å‘æ—¥è‘µï¼Œå®ƒä»¬ä»ä¸é—®ä¸ºä»€ä¹ˆè¦ç”Ÿé•¿ï¼Œåªæ˜¯ä¸“æ³¨åœ°å®Œæˆæ¯ä¸€æ¬¡æ—¥å‡ºæ—¥è½çš„è½®å›ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå®ƒä»¬ä¸ä»…æŠµå¾¡äº†è’åŸçš„è´«ç˜ ï¼Œæ›´åœ¨ç¢±åœŸä¸­å¼€å‡ºäº†ç‹¬ä¸€æ— äºŒçš„èŠ±æœµã€‚è¿™æˆ–è®¸å°±æ˜¯å­˜åœ¨ä¸»ä¹‰æœ€æ·±åˆ»çš„å¯ç¤ºï¼šç”Ÿå‘½çš„æ„ä¹‰ä¸åœ¨è¿œæ–¹ï¼Œå°±åœ¨æ¯ä¸€æ¬¡æ¨çŸ³ä¸Šå±±çš„è·¯ä¸Šï¼Œåœ¨æ¯ä¸€ä¸ªçœ‹ä¼¼å¹³å‡¡å´å……æ»¡å‹‡æ°”çš„é€‰æ‹©é‡Œã€‚</p>
<h2 data-id="heading-1">è¿™ä¸€å¹´å‘ç”Ÿçš„äº‹</h2>
<blockquote>
<p>ä¸–äº‹å¦‚æ½®ï¼Œæ¨çŸ³å¦‚å¸¸ã€‚å¤§å¤„çš„é£å£°ï¼Œç»ˆç©¶è¦è½åˆ°æ¯ä¸ªäººæ¡ˆå¤´é‚£ç›ç¯çš„æ˜ç­é‡Œã€‚</p>
</blockquote>
<p>å¦‚æœè¯´ä¹¦ç»™äººçš„å®‰æ…°ï¼Œæ˜¯ä¸€ç§æ¸©æŸ”çš„è§£é‡Šï¼›é‚£ä¹ˆç°å®ç»™äººçš„æ•™è‚²ï¼Œå¾€å¾€æ›´åƒç²—ç²çš„è¯æ®ï¼šå®ƒä¸æ€¥ç€è¯´æœè°ï¼Œåªæ˜¯åœ¨åå¤çš„æ¨ç§»ä¸æ’å‡»ä¸­ï¼Œè®©äººçœ‹æ¸…è‡ªå·±ç«™åœ¨å“ªé‡Œï¼Œåˆèƒ½èµ°åˆ°å“ªé‡Œã€‚</p>
<p>è¿™ä¸€å¹´ï¼Œä¸–ç•Œä¾æ—§åœ¨å‡ æ¡æ°¸æ’çš„å¼ åŠ›çº¿ä¸Šæ‘†è¡ï¼šæˆ˜äº‰ä¸å’Œå¹³ã€ç§©åºä¸æ’•è£‚ã€ç¹è£ä¸åŒ®ä¹ã€æŠ€æœ¯ä¸ä¸å®‰ã€‚è®¸å¤šäº‹æƒ…å¹¶éâ€œå‘ç”Ÿâ€é‚£ä¹ˆç®€å•ï¼Œå®ƒä»¬æ›´åƒç¼“æ…¢ç§»åŠ¨çš„å¤§é™†æ¿å—â€”â€”å¹³æ—¥é‡Œå‡ ä¹æ— æ„Ÿï¼Œç›´åˆ°æŸä¸€æ¬¡æ‘©æ“¦å‘å‡ºå·¨å“ï¼Œæ‰æ„è¯†åˆ°å…¶å®ä¸€ç›´ç”Ÿæ´»åœ¨éœ‡åŠ¨ä¹‹ä¸Šã€‚äººä»¬ä»ç„¶ç”¨æ›´çŸ­çš„è€å¿ƒè¿½é€æ›´å¿«çš„å˜åŒ–ï¼Œç”¨æ›´ç¢çš„æƒ…ç»ªè§£é‡Šæ›´å¤æ‚çš„ç»“æ„ï¼›è€Œå®å¤§å™äº‹å¹¶ä¸ä¼šè‡ªåŠ¨ç»™ä¸ªäººç­”æ¡ˆï¼Œç­”æ¡ˆå¾€å¾€è—åœ¨æ›´å…·ä½“ã€æ›´ç¬¨æ‹™çš„ç”Ÿæ´»ä¸åŠ³åŠ¨é‡Œã€‚</p>
<p>ç‰©ç†å­¦ä¸­æœ‰ä¸ªå®šå¾‹ï¼ŒåºåŠ è±å›å½’ï¼šå¯¹äºåœ¨æœ‰é™ä½“ç§¯å†…è¿åŠ¨çš„ã€ç”±å¤§é‡ç²’å­ç»„æˆçš„å®ˆæ’åŠ›å­¦ç³»ç»Ÿï¼Œç»è¿‡è¶³å¤Ÿæ¼«é•¿çš„æ—¶é—´åï¼Œç³»ç»Ÿä¼šæ— é™æ¥è¿‘å…¶åˆå§‹çŠ¶æ€ã€‚å®ƒè®²çš„æ˜¯ç†æƒ³å°é—­ç³»ç»Ÿçš„å¿…ç„¶ï¼Œå´ä¹Ÿæä¾›ä¸€ç§è¿‘ä¹æ®‹é…·çš„éšå–»â€”â€”è®¸å¤šä»¥ä¸ºå·²ç»è¢«æ—¶ä»£â€œè§£å†³â€çš„çŸ›ç›¾ï¼Œå¸¸ä¼šåœ¨å¦ä¸€ç§å½¢å¼é‡Œå†åº¦å½’æ¥ã€‚äººç±»ç¤¾ä¼šå½“ç„¶ä¸æ˜¯å­¤ç«‹ç³»ç»Ÿï¼Œå˜é‡æŒç»­æ³¨å…¥ï¼Œå›å½’å¹¶ä¸ç­‰äºåŸæ ·é‡æ¼”ï¼›ä½†å¼ åŠ›åå¤å‡ºç°çš„äº‹å®ï¼Œè¶³ä»¥è®©äººå¯¹â€œè¿›æ­¥çš„ç›´çº¿å™äº‹â€ä¿æŒèŠ‚åˆ¶ã€‚</p>
<p>åœ¨æŠ€æœ¯çš„æµªæ½®ä¸­ï¼Œè¿™ä¸€å¹´å°¤ä¸ºæ˜¾è‘—çš„æ˜¯ä¸€ç§â€œä»æ–°å¥‡åˆ°å¸¸æ€â€çš„è½¬å˜ã€‚äººå·¥æ™ºèƒ½ä¸å†åªæ˜¯æ–°é—»æ ‡é¢˜é‡Œçš„æƒŠå¹å·ï¼Œè€Œæ­£åœ¨æˆä¸ºåŸºç¡€è®¾æ–½ã€ç”Ÿäº§å…³ç³»ä¸è®¤çŸ¥æ–¹å¼çš„ä¸€éƒ¨åˆ†ï¼šå®ƒè®©æ•ˆç‡æ›´é”‹åˆ©ï¼Œä¹Ÿè®©ä¸ç¡®å®šæ›´æ™®éï¼›å®ƒæŠŠå¾ˆå¤šäººçš„å·¥ä½œå¾€å‰æ¨äº†ä¸€æ­¥ï¼Œä¹ŸæŠŠå¾ˆå¤šäººçš„ç„¦è™‘å¾€ä¸‹å‹äº†ä¸€å±‚ã€‚ä¸æ­¤åŒæ—¶ï¼Œäººç±»å¯¹æŠ€æœ¯çš„æ€åº¦å‡ºç°å¾®å¦™åˆ†è£‚ï¼šæœ‰äººæŠŠå®ƒå½“ä½œæ·å¾„ï¼Œæœ‰äººæŠŠå®ƒå½“ä½œå¨èƒï¼›æœ‰äººæ²‰è¿·äºâ€œæ›¿ä»£â€ï¼Œæœ‰äººæ‰§æ‹—äºâ€œä¸å¯æ›¿ä»£â€ã€‚åœ¨å®éªŒå®¤çš„æ¼«é•¿å¤œé‡Œï¼Œåå€’æ›´å®¹æ˜“ç›¸ä¿¡åä¸€ç§åˆ¤æ–­â€”â€”çœŸæ­£èƒ½æŠµå¾¡æ— åºçš„ï¼Œä»æ¥ä¸æ˜¯å·¥å…·æœ¬èº«ï¼Œè€Œæ˜¯ä½¿ç”¨å·¥å…·çš„äººï¼Œæ˜¯å¦ä»æ„¿æ„å¯¹çœŸé—®é¢˜ä¿æŒè€å¿ƒï¼Œå¯¹å¥½ç­”æ¡ˆä¿æŒè¯šå®ã€‚</p>
<p>è¿™äº›â€œæ—¶ä»£çš„å¤§äº‹â€è½åœ¨èº«ä¸Šï¼Œå¹¶ä¸æ€»ä»¥æ–°é—»çš„å½¢å¼å‘ˆç°ï¼Œè€Œæ˜¯ä»¥æ›´ç»†å°çš„æ–¹å¼åµŒå…¥æ—¥å¸¸ï¼šç®—åŠ›çš„ç´§å¼ ä¸é¢„ç®—çš„æƒè¡¡ã€æ•°æ®çš„å™ªå£°ä¸åå·®ã€è¯„å®¡çš„æ ‡å‡†ä¸é—¨æ§›ã€ä»£ç çš„è¾¹ç•Œæ¡ä»¶ä¸ä¸å¯å¤ç°ã€‚å®ƒä»¬åƒä¸€åœˆåœˆçœ‹ä¸è§çš„ç»³ç´¢ï¼Œå‹’ä½ç ”ç©¶è€…çš„æƒ³è±¡åŠ›ï¼Œä¹Ÿé€¼è¿«äººå­¦ä¼šæ›´åŠ¡å®åœ°åˆ›é€ è´Ÿç†µï¼šå°‘ä¸€ç‚¹ç©ºæƒ³ï¼Œå¤šä¸€ç‚¹éªŒè¯ï¼›å°‘ä¸€ç‚¹å®æ„¿ï¼Œå¤šä¸€ç‚¹å¯è½åœ°çš„è·¯å¾„ã€‚</p>
<p>è€Œè¿™ä¸€å¹´çš„å·¨å“ä¹‹ä¸€ï¼Œä»æ¥è‡ªä¿„ä¹Œæˆ˜äº‰ã€‚æ¼«é•¿çš„æ‹‰é”¯è®©â€œå’Œå¹³â€è¶Šæ¥è¶Šåƒè°ˆåˆ¤æ¡Œä¸Šçš„è¯­æ³•ï¼šåœç«ã€è¾¹ç•Œã€å®‰å…¨ã€æ‰¿è¯ºä¸èƒŒä¹¦ï¼Œè¢«åå¤æŠ¬èµ·ï¼Œåˆåå¤æç½®ã€‚æ›´ä»¤äººå¿ƒå¯’çš„å¹¶éæˆ˜ç«æœ¬èº«ï¼Œè€Œæ˜¯æˆ˜ç«ä¹‹å¤–çš„è®¡ç®—â€”â€”å½“å¼ºæƒä¹ æƒ¯æ€§åœ°æ— è§†å…¬å¹³æ­£ä¹‰ï¼ŒåŸåˆ™ä¾¿å®¹æ˜“æ²¦ä¸ºè£…é¥°ï¼Œå‘½è¿åˆ™è¢«æŠ˜ç®—ä¸ºç­¹ç ã€‚æ™®äº¬å¼çš„å¼ºç¡¬ä¸ç‰¹æœ—æ™®å¼çš„äº¤æ˜“ï¼Œæ°æ˜¯è¿™ç§å†·ç¡¬ç°å®çš„ä¸¤ä¸ªä¾§å½±ï¼šä¸€ä¸ªæŠŠæ—¢æˆäº‹å®æ¨æˆè§„åˆ™ï¼Œä¸€ä¸ªæŠŠè§„åˆ™é™æ ¼ä¸ºæ¡ä»¶ã€‚</p>
<p>åŒä¸€å¹´é‡Œï¼Œæ¨æŒ¯å®å…ˆç”Ÿçš„ç¦»å»ä¹Ÿåƒä¸€é“é™é»˜çš„åˆ†ç•Œçº¿ã€‚ä»–çš„ä¸€ç”Ÿï¼Œæ—¢æ˜¯ç§‘å­¦å²çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯æ—¶ä»£ç»“æ„çš„ä¸€éƒ¨åˆ†ï¼šé€‰æ‹©èµ´ç¾ï¼Œç½®èº«ç§‘å­¦ä¸­å¿ƒï¼Œå½“ç„¶æˆå°±äº†ä»–çš„é«˜åº¦ï¼›ä½†åŒæ ·çš„æ—¶ä»£åˆ†å²”ï¼Œä¹Ÿè®©è®¸å¤šåŒæ ·ä¼˜ç§€çš„äººè½å¯â€”â€”ä¸æ˜¯å› ä¸ºä¸å¤Ÿå¥½ï¼Œè€Œæ˜¯å› ä¸ºæœºä¼šä»æ¥ä¸æŒ‰æ‰åçš„å¯†åº¦å‡åŒ€åˆ†é…ã€‚ä¼ å¥‡çš„å…‰èŠ’è¶Šæ¸…æ™°ï¼Œè¶Šæ˜ å‡ºé‚£äº›æœªè¢«ç…§è§çš„é˜´å½±ï¼šè¢«è€½è¯¯çš„å¤©èµ‹ã€è¢«è¿«æ”¹å†™çš„å¿—ä¸šã€è¢«ç°å®æ¶ˆè€—çš„é”‹èŠ’ã€‚</p>
<h2 data-id="heading-2">è¿™ä¸€å¹´ä¸ªäººçš„å­¦ä¹ ç”Ÿæ´»</h2>
<blockquote>
<p>å­¤ç‹¬æ˜¯è‡ªç”±çš„è¡ç”Ÿå“ï¼Œé—æ†¾æ˜¯å¾€äº‹çš„çºªå¿µå“</p>
</blockquote>
<p>è¿™ä¸€å¹´ï¼Œç”Ÿæ´»çš„æ¨è¿›å¹¶ä¸è¿…ç–¾ã€‚å¾ˆå¤šæ—¶å€™ï¼Œè¿›å±•åƒè¢«æ‹‰é•¿çš„é˜´å½±ï¼šçœ‹å¾—è§åœ¨ç§»åŠ¨ï¼Œå´å¾ˆéš¾è¯´æ¸…ç©¶ç«Ÿå‘å‰äº†å¤šå°‘ã€‚æ–°çš„æˆæœä¸å¤šï¼Œç”šè‡³å¸¸æœ‰ä¸€ç§åœæ»çš„é”™è§‰ï¼›å‹åŠ›å´å¹¶ä¸å› æ­¤å‡å°‘ï¼Œåè€Œåœ¨æ—¶é—´çš„é€¼è¿‘é‡Œå˜å¾—æ›´å…·ä½“ã€æ›´æœ‰é‡é‡ã€‚åšä¸‰å°†å°½ï¼Œåšå››åœ¨å³ï¼Œæ‰å¿½ç„¶æ„è¯†åˆ°ä¸€å¹´ç«Ÿå·²èµ°å®Œâ€”â€”æ—¶é—´ä»ä¸è§£é‡Šè‡ªå·±ï¼Œåªæ˜¯æŠŠäººè½»è½»å¾€å‰æ¨ï¼Œæ¨åˆ°ä¸å¾—ä¸é¢å¯¹çš„èŠ‚ç‚¹ä¸Šã€‚</p>
<p>åœ¨è¿™æ ·çš„å¹´ä»½é‡Œï¼Œæƒ…ç»ªä¹Ÿæ›´å®¹æ˜“è¢«ç»†å°çš„äº‹ç‰µåŠ¨ï¼šä¸€æ¬¡å®éªŒçš„å¤±è´¥ï¼Œä¸€æ¬¡ä¼šè®®çš„è¿½é—®ï¼Œä¸€æ¬¡æ·±å¤œçš„è‡ªæˆ‘å¤ç›˜ï¼Œéƒ½è¶³ä»¥è®©äººçŸ­æš‚å¤±è¡¡ã€‚å¯åŒæ ·æ˜¯åœ¨è¿™äº›ä¸ç¨³å®šé‡Œï¼Œä»æœ‰ä¸€äº›ä¸œè¥¿æ‚„æ‚„ä¿ç•™ä¸‹æ¥â€”â€”åƒåœ¨æ¼«é•¿çš„æ—¥å­é‡Œæ›¾è¢«è®¤çœŸåœ°ç…§äº®è¿‡ã€‚é‚£ç§ç…§äº®å¹¶ä¸å–§å“—ï¼Œæ›´åƒå†¬å¤œé‡Œä¸€ç›ä¸åˆºçœ¼çš„ç¯ï¼Œè®©äººåœ¨ç–²æƒ«ä¸ä¸ç¡®å®šä¸­ä»æ„¿æ„æŠŠç”Ÿæ´»è¿‡ä¸‹å»ï¼›ä¹ŸåƒæŸäº›æ—¶åˆ»é€’æ¥çš„æ²‰é»˜ç†è§£ï¼Œä½¿äººç›¸ä¿¡è‡ªèº«å¹¶éå…¨ç„¶å­¤ç«‹çš„å­˜åœ¨ã€‚</p>
<p>åªæ˜¯ï¼Œäººé—´çš„æ¸©æŸ”å¸¸å¸¦ç€æœŸé™ã€‚å¹¶éä¸æ›¾çœŸè¯šï¼Œä¹Ÿå¹¶éä¸æ›¾ç”¨åŠ›ï¼Œè€Œæ˜¯ä¸€äº›æ›´å¤æ‚çš„ç¼˜ç”±â€”â€”è·¯å¾„çš„åˆ†å²”ã€èŠ‚å¥çš„é”™ä½ã€ç°å®çš„ç‰µåˆ¶â€”â€”è®©è®¸å¤šæœªç«Ÿä¹‹äº‹æœ€ç»ˆé€‰æ‹©åœåœ¨åˆé€‚çš„ä½ç½®ã€‚å®ƒä»¬ä¸ä¸€å®šéœ€è¦ä¸€ä¸ªæ˜ç¡®çš„ç»“å°¾ï¼Œæ›´åƒæŠŠæŸæ®µè·¯è½»è½»æŠ˜èµ·ï¼Œæ”¶è¿›è®°å¿†çš„å¤¹å±‚é‡Œï¼šä¸å†é“ºé™ˆï¼Œå´ä¹Ÿä¸å¿…æŠ¹å»ã€‚</p>
<p>äºæ˜¯ï¼Œå­¤ç‹¬å¹¶ä¸å…¨æ˜¯å¤±å»ï¼Œå®ƒä¹Ÿæ„å‘³ç€æŠŠè‡ªç”±é‡æ–°é¢†å›æ‰‹ä¸­ï¼›é—æ†¾ä¹Ÿä¸å°½æ˜¯ç¼ºæ†¾ï¼Œå®ƒæ›´åƒå¾€äº‹ç•™ä¸‹çš„çºªå¿µå“ï¼Œæé†’äººæ›¾ç»æ‹¥æœ‰è¿‡ã€ä¹Ÿæ›¾ç»çæƒœè¿‡ã€‚</p>
<h2 data-id="heading-3">è¿™ä¸€å¹´çš„æ„Ÿæ‚Ÿ</h2>
<blockquote>
<p>é¸·é¸Ÿä¹‹ä¸ç¾¤å…®ï¼Œè‡ªå‰ä¸–è€Œå›ºç„¶</p>
</blockquote>
<p>è¿™ä¸€å¹´ï¼Œè®¸å¤šè‹¦æ¥šå¹¶ä¸æ¥è‡ªæƒŠå¤©åŠ¨åœ°çš„äº‹ï¼Œè€Œæ¥è‡ªä¸€äº›åå¤å‡ºç°çš„ç»†èŠ‚ï¼šè¯è¯­åœ¨è½¬è¿°é‡Œèµ°æ ·ï¼Œæ²‰é»˜è¢«è§£è¯»æˆæ€åº¦ï¼Œè¿Ÿç–‘è¢«æ¶‚æˆç½ªåã€‚è¿™æ ·çš„ç¼éš™é‡Œå¹¶éåªæœ‰ä¸€äººè¸½è¸½ç‹¬è¡Œâ€”â€”ä¸å°‘äººéƒ½åœ¨ç›¸ä¼¼çš„å›å£°ä¸­è€—æŸï¼šè¢«è¯¯è¯»ã€è¢«æ£æµ‹ã€è¢«è½»æ…¢ï¼Œæˆ–åœ¨æŸä¸ªç¬é—´è¢«è¿«ä¸ºå¹¶ä¸å­˜åœ¨çš„â€œè¿‡é”™â€è‡ªè¯æ¸…ç™½ã€‚äºæ˜¯ï¼Œäº‹å®å°šæœªæ¥å¾—åŠç«™ç¨³ï¼Œæµè¨€ä¾¿å·²å…ˆè¡Œï¼›â€œé“å¾·æ³•åº­â€ä¹Ÿæ€»èƒ½è¿…é€Ÿæ­èµ·â€”â€”ä¸é—®è¯æ®ï¼Œåªé—®ç«™ä½ï¼›ä¸é—®å¤æ‚ï¼Œåªé—®å½’é˜Ÿã€‚é»‘ä¸ç™½è¢«æå¾—é”‹åˆ©ï¼Œå¹¶éä¸–ç•Œå¤©ç”Ÿå¦‚æ­¤ï¼Œè€Œæ˜¯ç°è‰²å¤ªè€—è€å¿ƒï¼šæ‰¿è®¤å¤æ‚æ„å‘³ç€æ‰¿æ‹…è´£ä»»ï¼Œå…è®¸æš§æ˜§æ„å‘³ç€æ¥å—ä¸ç¡®å®šï¼Œè€Œç¾¤ä½“æœ€æ€•çš„ï¼Œæ°æ˜¯è¿™ç§ä¸ç¡®å®šã€‚</p>
<p>æ›´ç–²æƒ«çš„æ˜¯ï¼Œè¿™å¹¶ä¸æ€»å‡ºè‡ªèµ¤è£¸çš„æ¶æ„ï¼Œæ›´å¤šæ˜¯ä¸€ç§æ™®éçš„è‡ªä¿ï¼šç”¨å˜²å¼„ç»´ç³»ç§©åºï¼Œç”¨è´¬æŸç¡®è®¤ä½ç½®ï¼Œç”¨â€œä¸ºä½ å¥½â€åŒ…è£…å¹²é¢„ã€‚ç¯å¢ƒè¶Šé€¼ä»„ï¼Œèµ„æºè¶Šç¨€ç¼ºï¼Œç«äº‰è¶Šç´§å¼ ï¼Œè¿™ç§è‡ªä¿è¶Šå®¹æ˜“æ»‘å‘å†·ç¡¬ï¼Œç”šè‡³åšåˆ°æ— å£°æ— æ¯â€”â€”å¤ºèµ°çš„æ˜¯åèª‰ã€æœºä¼šã€è¾¹ç•Œä¸å®‰å®ï¼Œå´å¾ˆéš¾æŒ‡å‡ºå“ªä¸€åˆ€çœŸæ­£è½ä¸‹ã€‚è®¸å¤šåœºåˆé‡Œï¼Œè¡¨æ¼”æ¯”çœŸå®æ›´å®‰å…¨ï¼Œé™„å’Œæ¯”ç‹¬ç«‹æ›´çœäº‹ï¼›æµè¡Œçš„ä¸æ˜¯è¯šæ³ï¼Œè€Œæ˜¯å§¿æ€ï¼›ä¸æ˜¯æ±‚çœŸï¼Œè€Œæ˜¯æ±‚èƒœã€‚</p>
<p>ä¹Ÿæ­£å› å¦‚æ­¤ï¼Œâ€œä¸ç¾¤â€ä¸å†åªæ˜¯è¯—å¥é‡Œçš„ä¿®è¾ï¼Œå®ƒæ›´åƒä¸€æ¡ä¸å¾—ä¸èµ°çš„è·¯ï¼šæŠŠç²¾åŠ›ä»æ— è°“çš„äº‰è¾©é‡ŒæŠ½ç¦»å‡ºæ¥ï¼ŒæŠŠæ‰‹ä¼¸å›åˆ°ä»å¯æ¡ä½çš„äº‹â€”â€”è¯»ä¹¦ã€å†™ä½œã€æ‘„å½±ï¼ŒæŠŠæ—¥å­ä¸€å¯¸å¯¸è¿‡å®ã€‚æ‰€è°“èŠ‚åˆ¶ï¼Œå¹¶éæ´ç™–å¼çš„æ‹’ç»ï¼Œè€Œæ˜¯æ‹’ç»è¢«æ‹–å…¥é‚£å¥—è½»ä½»çš„è£å†³é‡Œï¼šå®å¯æ…¢ä¸€äº›ï¼Œä¹Ÿä¸æŠŠäººç”Ÿäº¤ç»™å–§å“—ï¼›å®å¯æ²‰é»˜ï¼Œä¹Ÿä¸æŠŠè§£é‡Šå½“ä½œä¹æ±‚ã€‚</p>
<p>å³å°†åˆ°æ¥çš„ï¼ŒæŸæ®µé›†ä½“è®°å¿†å°†è¿æ¥ä¸€ä¸ªæ•´åœ†çš„èŠ‚ç‚¹ã€‚æ—¶é—´æ”¹å˜äº†å¤–è¡£ä¸è¯­å¢ƒï¼Œå´æœªå¿…æ”¹å˜æš—æ²³çš„èµ°å‘ï¼šæµè¨€ä»å¯èƒ½å…ˆäºäº‹å®ï¼Œç«‹åœºä»å¯èƒ½æ›¿ä»£åˆ¤æ–­ï¼Œé“å¾·ä»å¯èƒ½è¢«å½“ä½œå·¥å…·ã€‚æ‰€è°“åæ€ï¼Œå¹¶ä¸æ­¢äºå›æœ›é‚£æ®µå²æœˆå¦‚ä½•æŠŠäººå·å…¥æ´ªæµï¼Œæ›´åœ¨äºè¾¨è®¤è¿™äº›æœºåˆ¶å¦‚ä½•åœ¨æ—¥å¸¸é‡Œæ¢å½¢ç»­å­˜â€”â€”å½“ææƒ§ã€ç¨€ç¼ºã€ä»ä¼—ä¸æƒåŠ›è¯±æƒ‘å†åº¦é›†é½ï¼Œç›¸ä¼¼çš„æˆç ä¾¿ä¼šä»¥æ›´æ¸©å’Œã€æ›´æ—¥å¸¸çš„æ–¹å¼é‡æ¼”ã€‚</p>
<p>ä¹Ÿå› æ­¤ï¼ŒçœŸæ­£çè´µçš„ï¼Œåå€’æ˜¯é‚£äº›ä¸æ˜¾çœ¼å´æ›´éš¾çš„ä¸œè¥¿ï¼šåœ¨ç°è‰²é‡Œä¿æŒæ¸…æ˜ï¼Œåœ¨å‹åŠ›ä¸‹å®ˆä½è¾¹ç•Œï¼Œåœ¨çœ‹è¿‡äººå¿ƒä¹‹åä»ä¸è½»æ˜“å˜æˆåŒç±»ã€‚å®‡å®™æ’é•¿ï¼Œæ–‡æ˜ç››è¡°ï¼Œå”¯æœ‰å–„è‰¯ä¸ç”Ÿå‘½è¯æ˜ç€äººç±»çš„å­˜åœ¨å’Œå»¶ç»­â€”â€”é‚£æ˜¯æœ€æœ´ç´ çš„ä»‹è´¨ï¼Œå´æ‹¥æœ‰ç©¿è¶Šæ—¶ç©ºçš„åŠ›é‡ã€‚ç»ˆå°†ä¹‰æ— åé¡¾åœ°èµ°è¿›é‚£ä¸ªæ¸©å’Œçš„è‰¯å¤œï¼Œå»æ¢ç´¢ç”Ÿå‘½çš„æ˜¥å¤©ï¼Œæ°¸ä¸åœæ­‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµé‡éƒ½å»å“ªå„¿äº†ï¼Ÿæ‹¯æ•‘APPæœˆæ´»ï¼Œç”¨FinClipè½»æ¾å¼•å…¥ç¬¬ä¸‰æ–¹ç”Ÿæ€]]></title>    <link>https://juejin.cn/post/7584073390694072335</link>    <guid>https://juejin.cn/post/7584073390694072335</guid>    <pubDate>2025-12-16T08:43:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584073390694072335" data-draft-id="7584043969687666740" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµé‡éƒ½å»å“ªå„¿äº†ï¼Ÿæ‹¯æ•‘APPæœˆæ´»ï¼Œç”¨FinClipè½»æ¾å¼•å…¥ç¬¬ä¸‰æ–¹ç”Ÿæ€"/> <meta itemprop="keywords" content="APP"/> <meta itemprop="datePublished" content="2025-12-16T08:43:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="FinClip"/> <meta itemprop="url" content="https://juejin.cn/user/395479918322696"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµé‡éƒ½å»å“ªå„¿äº†ï¼Ÿæ‹¯æ•‘APPæœˆæ´»ï¼Œç”¨FinClipè½»æ¾å¼•å…¥ç¬¬ä¸‰æ–¹ç”Ÿæ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/395479918322696/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    FinClip
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:43:58.000Z" title="Tue Dec 16 2025 08:43:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ•°æ®æ˜¾ç¤ºï¼Œè¶…è¿‡80%çš„Appåœ¨ç”¨æˆ·ä¸‹è½½å30å¤©å†…è¢«é—å¿˜ã€‚è€Œä¼ä¸šåˆè‹¦æ¼äºAppç”¨æˆ·ç•™å­˜éš¾ï¼Œè·å®¢æˆæœ¬è¶Šæ¥è¶Šé«˜ã€‚Â </p>
<p>ä¼ä¸šAppå¯èƒ½ä¸€ä¸ªæœˆåªè¢«ç”¨æˆ·æ‰“å¼€ä¸€ä¸¤æ¬¡ï¼Œè€Œç”¨æˆ·æ¯å¤©åœ¨å¾®ä¿¡ã€æ”¯ä»˜å®é‡Œè¦ç”¨å‡ åä¸ªæœåŠ¡ã€‚</p>
<p>ä¸ºä»€ä¹ˆï¼ŸÂ </p>
<p>å› ä¸ºAppæä¾›çš„æœåŠ¡å¤ªå•ä¸€ï¼Œç”¨æˆ·ä¸å¯èƒ½ä¸ºäº†å¶å°”æŸ¥ä¸ªèˆªç­å°±ç•™ç€ä¸€ä¸ªèˆªå¸Appï¼Œä¹Ÿä¸ä¼šä¸ºäº†ä¸€ä¸ªæœˆå«ä¸€æ¬¡ä¿æ´ï¼Œå°±ç•™ç€å®¶æ”¿Appã€‚</p>
<p>é‚£ä¹ˆï¼Œæµé‡éƒ½å»å“ªå„¿äº†å‘¢ï¼Ÿä¼ä¸šAPPå¦‚ä½•æé«˜æœˆæ´»å‘¢ï¼Ÿ</p>
<p><strong>å¼•å…¥ç¬¬ä¸‰æ–¹ç”Ÿæ€</strong></p>
<p><strong>æŠŠAppå˜æˆâ€œæœåŠ¡é›†åˆä½“â€</strong></p>
<p>æˆ‘ä»¬å…ˆçœ‹è¿™ä¹ˆä¸€ç»„æ•°æ®ã€‚</p>
<p>æ®ã€Šæœˆç‹æ•°æ®ã€‹ç»Ÿè®¡ï¼Œ2025å¹´Q3ç§»åŠ¨äº’è”ç½‘APPæ´»è·ƒåº¦: è…¾è®¯æ§è‚¡ä»¥ 176 ä¸ªåº”ç”¨æ•°å’Œ 12.81 äº¿ MAU ä½å±…æ¦œé¦–ï¼Œåº”ç”¨ç”Ÿæ€å¸ƒå±€æœ€å¹¿ï¼›é˜¿é‡Œå·´å·´ MAU è¾¾ 12.51 äº¿ï¼Œä¸è…¾è®¯ç«äº‰æ¿€çƒˆï¼›æŠ–éŸ³é›†å›¢ MAU 12.39 äº¿ä¸”å­£åº¦å¢é•¿ç‡ 18.8%ï¼Œå¢é•¿åŠ¿å¤´å¼ºåŠ²ã€‚ç¾å›¢ï¼ˆ33.1%ï¼‰ã€å¿«æ‰‹ï¼ˆ24.1%ï¼‰ç­‰ä¼ä¸šä¹Ÿä¿æŒè¾ƒé«˜å¢é•¿é€Ÿç‡ï¼Œæ˜¾ç¤ºå‡ºä¸åŒé¢†åŸŸçš„æ´»åŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/848e3808efdf4d949129ec9dbf3c2296~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmluQ2xpcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766479437&amp;x-signature=GKFDIahudOldSuOY5K5z9lOwr98%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>èµ„æ–™æ¥æºï¼šã€Šæœˆç‹æ•°æ®ã€‹</p>
<p>ç”±ä¸Šå›¾å¯è§ï¼Œåº”ç”¨ç”Ÿæ€å¸ƒå±€è¶Šå¹¿çš„ä¼ä¸šï¼Œå®ƒçš„æœˆæ´»è¶Šé«˜ï¼Œè‡ªç„¶ä¼ä¸šçš„æ•ˆç›Šä¹Ÿèƒ½æŒç»­å¢é•¿ã€‚</p>
<p>æ¯”å¦‚ï¼š èˆªå¸Appé‡ŒåŠ å…¥ç§Ÿè½¦ã€é…’åº—ã€å½“åœ°æ—…æ¸¸æœåŠ¡ï¼›é“¶è¡ŒAppé‡ŒåŠ å…¥ç”Ÿæ´»ç¼´è´¹ã€å¤–å–ä¼˜æƒ ã€å½±é™¢è´­ç¥¨ï¼›è½¦ä¼Appé‡ŒåŠ å…¥æ´—è½¦é¢„çº¦ã€å……ç”µå¯¼èˆªã€ä¿é™©æœåŠ¡ï¼Œè¿™æ ·ç”¨æˆ·æ‰“å¼€ä½ Appçš„ç†ç”±å°±ä»æ¯æœˆ1æ¬¡å˜æˆäº†æ¯å¤©å¤šæ¬¡ã€‚Â </p>
<p>å¦‚é…’åº—App,ä¸ç”¨è‡ªç ”é—¨ç¥¨ç³»ç»Ÿï¼Œç›´æ¥å¼•å…¥æºç¨‹çš„å°ç¨‹åºï¼›ä¸ç”¨è‡ªç ”é¤é¥®æ¨èï¼Œç›´æ¥å¼•å…¥å¤§ä¼—ç‚¹è¯„çš„å°ç¨‹åºï¼›ä¸ç”¨è‡ªç ”æ‰“è½¦æœåŠ¡ï¼Œç›´æ¥å¼•å…¥æ»´æ»´çš„å°ç¨‹åºï¼Œè®©ä¸“ä¸šçš„äººåšä¸“ä¸šçš„äº‹ï¼Œä½ çš„Appåªéœ€åšå¥½â€œå¹³å°è¿è¥â€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89ef186c95344bc4b15ee11356ed59cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmluQ2xpcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766479437&amp;x-signature=FCHRk0qWqJxCtJjaFV2AbaQwiAI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>FinClip SDKï¼Œä¸ºAPPå¼•å…¥ç”Ÿæ€æŠ¤èˆª</strong></p>
<p>æœ‰äº›ä¼ä¸šå°è¯•è¿‡H5æ–¹å¼å¼•å…¥ç¬¬ä¸‰æ–¹æœåŠ¡ï¼Œç»“æœç”¨æˆ·åé¦ˆï¼š åŠ è½½æ…¢å¾—åƒåå¹´å‰ç½‘é¡µï¼Œæ”¯ä»˜æµç¨‹ç»å¸¸å¡é¡¿ï¼Œç•Œé¢é£æ ¼è®©äººçœ¼èŠ±ç¼­ä¹±ï¼Œå®‰å…¨æ€§ä¹Ÿè®©äººæ‹…å¿§ã€‚</p>
<p>è¿™æ˜¯ç”±äºH5æŠ€æœ¯å¤©ç„¶æœ‰ä½“éªŒå¤©èŠ±æ¿ï¼Œä¸”éš¾ä»¥ç»Ÿä¸€ç®¡æ§ã€‚</p>
<p>è€Œé€šè¿‡å‡¡æ³°è¶…çº§åº”ç”¨æ™ºèƒ½å¹³å°FinClipå¼•å…¥çš„å°ç¨‹åºï¼Œå´èƒ½å¸¦æ¥ï¼š</p>
<p>1ã€ä½“éªŒç»Ÿä¸€ï¼šæ‰€æœ‰ç¬¬ä¸‰æ–¹æœåŠ¡éƒ½æœ‰æ¥è¿‘åŸç”Ÿçš„æµç•…åº¦ï¼›Â </p>
<p>2ã€å®‰å…¨å¯æ§ï¼šæ¯ä¸ªå°ç¨‹åºéƒ½åœ¨å®‰å…¨æ²™ç®±å†…è¿è¡Œï¼›Â </p>
<p>3ã€é£æ ¼ä¸€è‡´ï¼šå¯è¦æ±‚ç¬¬ä¸‰æ–¹ç¬¦åˆä½ çš„UIè§„èŒƒï¼›Â </p>
<p>4ã€æ•°æ®å®‰å…¨ï¼šç”¨æˆ·æ•°æ®å®Œå…¨éš”ç¦»ï¼Œç¬¬ä¸‰æ–¹æ‹¿ä¸èµ°ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8647cef4df8b4721a218d83449117b40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmluQ2xpcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766479437&amp;x-signature=CZD2DgKp0Zz39L7VHLtKNyipwMQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>åŠ©åŠ›ä¼ä¸šAppä»â€œäº§å“â€åˆ°â€œå¹³å°â€</strong></p>
<p>FinClipæä¾›äº†ä»æŠ€æœ¯åˆ°è¿è¥çš„å®Œæ•´è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©ä¼ä¸šAppå®Œæˆä»å•ä¸€äº§å“åˆ°å¼€æ”¾å¹³å°çš„è½¬å‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3f9247a85184820be71086a9f915843~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmluQ2xpcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766479437&amp;x-signature=gtag46z6LbJCjT7bWkG9P1%2BQCNA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>1ã€å°ç¨‹åºå…¨ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong></p>
<p>ç—›ç‚¹åœºæ™¯ï¼šä¸€å®¶å¤§å‹è¿é”é…’åº—é›†å›¢ï¼Œå¸Œæœ›åœ¨è‡ªå·±çš„Appä¸­å¼•å…¥å½“åœ°æ—…æ¸¸ã€ç§Ÿè½¦ã€é¤é¥®æœåŠ¡ï¼Œä½†æ‹…å¿ƒç¬¬ä¸‰æ–¹æœåŠ¡è´¨é‡ä¸å¯æ§ã€å†…å®¹å®¡æ ¸éš¾ã€æ›´æ–°ç»´æŠ¤å¤æ‚ã€‚Â </p>
<p>è§£å†³æ–¹æ¡ˆï¼šFinClipæä¾›ç»Ÿä¸€å®¡æ ¸ç®¡æ§ï¼Œæ‰€æœ‰ç¬¬ä¸‰æ–¹å°ç¨‹åºå¿…é¡»é€šè¿‡ç®¡ç†åå°çš„ç»Ÿä¸€å®¡æ ¸ï¼Œç¡®ä¿æœåŠ¡è´¨é‡å’Œå†…å®¹åˆè§„æ€§ï¼›å®‰å…¨æ²™ç®±éš”ç¦»ï¼Œæ¯ä¸ªå°ç¨‹åºåœ¨ç‹¬ç«‹ç¯å¢ƒä¸­è¿è¡Œï¼Œç›¸äº’éš”ç¦»ï¼Œé˜²æ­¢å®‰å…¨é£é™©æ‰©æ•£ï¼›ç°åº¦å‘å¸ƒèƒ½åŠ›ï¼Œæ–°æœåŠ¡å¯å…ˆå‘10%ç”¨æˆ·å¼€æ”¾ï¼ŒéªŒè¯æ•ˆæœåå†å…¨é¢æ¨å¹¿ï¼›çƒ­æ›´æ–°æ”¯æŒï¼ŒæœåŠ¡æ›´æ–°æ— éœ€é‡æ–°å‘å¸ƒAppï¼Œå®ç°çŸ­æ—¶é—´è¿­ä»£ã€‚Â </p>
<p>åº”ç”¨æ•ˆæœï¼šè¯¥é…’åº—é›†å›¢åœ¨3ä¸ªæœˆå†…å¼•å…¥äº†è¶…è¿‡50ä¸ªç›®çš„åœ°æœåŠ¡å°ç¨‹åºï¼Œç”¨æˆ·æœˆå‡æ‰“å¼€æ¬¡æ•°ä»1.2æ¬¡æå‡è‡³8.5æ¬¡ï¼Œç”¨æˆ·åœç•™æ—¶é•¿å¢é•¿400%ã€‚</p>
<p><strong>2ã€å¤šä¼ä¸šç»Ÿä¸€ç®¡ç†å®¡æ ¸</strong></p>
<p>ç—›ç‚¹åœºæ™¯ï¼šæŸé“¶è¡Œå¸Œæœ›ä¸å„åœ°å¸‚æ”¿ã€å…¬å…±æœåŠ¡æœºæ„åˆä½œï¼Œåœ¨Appä¸­æä¾›æ°´ç”µæ°”ç¼´è´¹ã€ç¤¾ä¿æŸ¥è¯¢ç­‰æœåŠ¡ï¼Œä½†é¢ä¸´ä¸åŒæœºæ„æŠ€æœ¯æ ‡å‡†ä¸ä¸€ã€å¯¹æ¥æ•ˆç‡ä½ç­‰é—®é¢˜ã€‚Â </p>
<p>è§£å†³æ–¹æ¡ˆï¼šæ ‡å‡†åŒ–æ¥å…¥æµç¨‹ï¼Œåˆ¶å®šç»Ÿä¸€çš„æŠ€æœ¯æ ‡å‡†å’Œå®¡æ ¸è§„èŒƒï¼Œç¬¬ä¸‰æ–¹æœºæ„æŒ‰æ ‡å‡†å¼€å‘å³å¯å¿«é€Ÿæ¥å…¥ï¼›å¤šç§Ÿæˆ·ç®¡ç†ä½“ç³»ï¼šä¸ºæ¯ä¸ªåˆä½œæœºæ„æä¾›ç‹¬ç«‹ç®¡ç†åå°ï¼Œæ•°æ®å®Œå…¨éš”ç¦»ï¼›ç»Ÿä¸€ä½“éªŒä¿éšœï¼Œæ‰€æœ‰å°ç¨‹åºå¿…é¡»ç¬¦åˆé“¶è¡Œçš„UI/UXè§„èŒƒï¼Œç¡®ä¿ç”¨æˆ·ä½“éªŒä¸€è‡´æ€§ï¼›åˆè§„æ€§è‡ªåŠ¨æ£€æµ‹ï¼Œç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹å°ç¨‹åºçš„éšç§æ”¿ç­–ã€æƒé™ç”³è¯·ç­‰åˆè§„æ€§è¦æ±‚ã€‚Â </p>
<p>åº”ç”¨æ•ˆæœï¼šé“¶è¡Œåœ¨6ä¸ªæœˆå†…æ¥å…¥äº†å…¨å›½50å¤šä¸ªåŸå¸‚çš„å…¬å…±æœåŠ¡ï¼Œå°†åŸæœ¬éœ€è¦æ•°æœˆçš„å¯¹æ¥å‘¨æœŸç¼©çŸ­è‡³2å‘¨å†…ï¼Œå…¬å…±æœåŠ¡ä½¿ç”¨ç‡å Appæ€»æµé‡çš„25%ã€‚</p>
<p><strong>3ã€æ‰“é€ ä¼ä¸šä¸“å±çš„å°ç¨‹åºåº”ç”¨å•†åº—</strong></p>
<p>ç—›ç‚¹åœºæ™¯ï¼šæŸæ±½è½¦åˆ¶é€ å•†å¸Œæœ›å°†è½¦è½½å±å¹•å’Œæ‰‹æœºAppæ‰“é€šï¼Œæ„å»ºæ™ºèƒ½å‡ºè¡Œç”Ÿæ€ï¼Œä½†ç¼ºä¹åº”ç”¨å•†åº—çš„è¿è¥ç»éªŒå’ŒåŸºç¡€è®¾æ–½ã€‚Â </p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c9860fd5d7a4bb58bd5d55042d14222~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmluQ2xpcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766479437&amp;x-signature=f%2B3TxwFL12iZNMCQBpZ5YwooVeI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è§£å†³æ–¹æ¡ˆï¼šæ ¹æ®å“ç‰Œè°ƒæ€§å®šåˆ¶å•†åº—ç•Œé¢ï¼Œæ”¯æŒä¸ªæ€§åŒ–æ¨èå’Œæ™ºèƒ½æœç´¢ï¼›æä¾›åœ°å›¾ã€æ”¯ä»˜ã€AIè¯­éŸ³ç­‰åŸºç¡€èƒ½åŠ›æ’ä»¶ï¼Œé™ä½å¼€å‘è€…é—¨æ§›ï¼›æ”¯æŒå°ç¨‹åºçš„æ‰¹é‡æµ‹è¯•ã€å®¡æ ¸å’Œå‘å¸ƒï¼Œæå‡è¿è¥æ•ˆç‡ã€‚Â </p>
<p>åº”ç”¨æ•ˆæœï¼šè¯¥æ±½è½¦åˆ¶é€ å•†å»ºç«‹äº†è¡Œä¸šé¦–ä¸ªè½¦è½½å°ç¨‹åºç”Ÿæ€ï¼Œå¸å¼•äº†è¶…è¿‡30å®¶æœåŠ¡å•†å…¥é©»ï¼Œæ¶µç›–å¯¼èˆªã€å¨±ä¹ã€å……ç”µã€ç»´ä¿®ç­‰å…¨åœºæ™¯æœåŠ¡ï¼Œå•è¾†è½¦æœºçš„å°ç¨‹åºæœˆæ´»å¢é•¿32%ã€‚</p>
<p>é€šè¿‡FinClipå¼•å…¥ç¬¬ä¸‰æ–¹ç”Ÿæ€ï¼Œä¸ä»…åœ¨ç”¨æˆ·æŒ‡æ ‡ä¸Šè·å¾—æ˜¾è‘—æå‡ï¼Œä¹Ÿå‡çº§äº†å•†ä¸šæ¨¡å¼ã€‚ä»å•ä¸€çš„æœåŠ¡æ”¶å…¥ï¼Œæ‰©å±•è‡³æµé‡åˆ†æˆã€å¹¿å‘Šæ”¶å…¥ã€æ•°æ®ã€æŠ€æœ¯æœåŠ¡ç­‰å¤šå…ƒæ”¶å…¥ï¼Œå½¢æˆâ€œæœåŠ¡è¶Šå¤š-ç”¨æˆ·è¶Šå¤š-å¼€å‘è€…è¶Šå¤šâ€çš„è‰¯æ€§å¾ªç¯ã€‚Â </p>
<p>ä¼ä¸šAppçš„ä¸‹åŠåœºç«äº‰ï¼Œæœ¬è´¨ä¸Šæ˜¯ç”¨æˆ·æ—¶é—´ä¸ä»·å€¼çš„ç«äº‰ã€‚å½“å•ä¸€æœåŠ¡å·²æ— æ³•æ»¡è¶³ç”¨æˆ·æ—¥ç›Šå¤æ‚çš„éœ€æ±‚ï¼Œç”¨FinClipå¼•å…¥ç¹è£ã€å®‰å…¨ã€å¯æ§çš„å°ç¨‹åºç”Ÿæ€ï¼Œæ˜¯å¼€å¯ç¬¬äºŒå¢é•¿æ›²çº¿çš„å…³é”®é’¥åŒ™ã€‚</p>
<p>-- END --</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è°ƒç”¨å¤šä¸ªAgentï¼ŒChatkitè®©APPä»â€œå•æ‰“ç‹¬æ–—â€åˆ°â€œå›¢é˜Ÿåä½œâ€]]></title>    <link>https://juejin.cn/post/7584043969687748660</link>    <guid>https://juejin.cn/post/7584043969687748660</guid>    <pubDate>2025-12-16T08:45:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584043969687748660" data-draft-id="7584043969687699508" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è°ƒç”¨å¤šä¸ªAgentï¼ŒChatkitè®©APPä»â€œå•æ‰“ç‹¬æ–—â€åˆ°â€œå›¢é˜Ÿåä½œâ€"/> <meta itemprop="keywords" content="APP"/> <meta itemprop="datePublished" content="2025-12-16T08:45:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="FinClip"/> <meta itemprop="url" content="https://juejin.cn/user/395479918322696"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è°ƒç”¨å¤šä¸ªAgentï¼ŒChatkitè®©APPä»â€œå•æ‰“ç‹¬æ–—â€åˆ°â€œå›¢é˜Ÿåä½œâ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/395479918322696/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    FinClip
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:45:32.000Z" title="Tue Dec 16 2025 08:45:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e132f429408e4eb7b3870978feb1b8ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmluQ2xpcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766479748&amp;x-signature=7hk%2FLh65bo9LfBNMcGQdsFbTgOg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä½ æ˜¯ä¸æ˜¯ä¹Ÿç»å¸¸æœ‰è¿™æ ·çš„ä½“éªŒï¼ŸÂ </p>
<p>â€œæ¯æ¬¡æ‰“å¼€é“¶è¡ŒAppï¼Œæƒ³å¥½å¥½åšä¸ªç†è´¢è§„åˆ’ï¼Œä½†â€œæ™ºèƒ½åŠ©æ‰‹â€åªä¼šæœºæ¢°åœ°åˆ—å‡ºçƒ­é—¨äº§å“ã€‚Â </p>
<p>æƒ³æŸ¥ä¸ªèˆªç­è¡Œç¨‹ï¼Œå®ƒå±•ç¤ºå®Œæ—¶é—´å’Œä»·æ ¼ï¼Œå°±æ²¡äº†ä¸‹æ–‡ã€‚Â </p>
<p>æ‰“å¼€ç”µå•†Appï¼Œä¸Šå‘¨åˆšä¹°è¿‡çš„ä¸œè¥¿ï¼Œè¿™å‘¨åˆé‡å¤æ¨èäº†ã€‚â€Â </p>
<p>è¿™ä¸æ˜¯æŸä¸ªAppçš„é—®é¢˜ï¼Œæ•°æ®æ˜¾ç¤ºï¼Œè¶…è¿‡70%çš„ç”¨æˆ·è®¤ä¸ºAppçš„â€œæ™ºèƒ½æœåŠ¡â€å¹¶ä¸æ™ºèƒ½ã€‚</p>
<p>ç”¨æˆ·è¦çš„ä»æ¥ä¸æ˜¯åŠŸèƒ½åˆ—è¡¨ï¼Œè€Œæ˜¯èƒ½çœŸæ­£è§£å†³é—®é¢˜çš„æœåŠ¡ã€‚Â </p>
<p>å½“ä¸€ä¸ªéœ€æ±‚æ¶‰åŠå¤šä¸ªç¯èŠ‚æ—¶ï¼Œå•ä¸€çš„AIåŠ©æ‰‹èƒ½å›ç­”æ¯ä¸ªç‹¬ç«‹é—®é¢˜ï¼Œå´ç»™ä¸å‡ºå®Œæ•´çš„è§£å†³æ–¹æ¡ˆå’Œè¡ŒåŠ¨ã€‚Â </p>
<p>å› æ­¤å½“å‰å¤§éƒ¨åˆ†APPçš„â€œæ™ºèƒ½æœåŠ¡â€æ˜¯å‰²è£‚çš„ï¼Œç”¨æˆ·éœ€è¦è‡ªå·±æ‹¼å‡‘ä¿¡æ¯ï¼›AIåªä¼šç­”ä¸ä¼šåšæ‰§è¡Œï¼Œä¹Ÿéš¾ä»¥è°ƒç”¨å¤–éƒ¨èµ„æºã€‚</p>
<p><strong>æœªæ¥Appéœ€è¦ä¸€ä¸ªæ™ºèƒ½å›¢é˜Ÿ</strong></p>
<p><strong>è€Œä¸æ˜¯èŠå¤©æœºå™¨äºº</strong></p>
<p>é’ˆå¯¹ä»¥ä¸ŠAPPçš„AIåº”ç”¨ç°çŠ¶ï¼ŒFinClip Chatkitå¸¦æ¥äº†ä¸åŒçš„æ€è·¯ï¼šä¸å…¶è®©ä¸€ä¸ªAIåŒ…æ½æ‰€æœ‰äº‹ï¼Œä¸å¦‚ç»„å»ºä¸€æ”¯æ‡‚å¾—ååŒçš„â€œæ™ºèƒ½å›¢é˜Ÿâ€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa2aae03d7f44185916639586b6f4345~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmluQ2xpcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766479748&amp;x-signature=v3jgrwcRHkZE294%2FhY7DEj8kPCk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>FinClip ChatkitæŠ€æœ¯çš„æ ¸å¿ƒåœ¨äºä¸‰å±‚æ¶æ„ã€‚Â </p>
<p>ç¬¬ä¸€å±‚ï¼Œâ€œéœ€æ±‚ç†è§£ä¸“å®¶â€ï¼Œèƒ½æ·±åº¦åˆ†æç”¨æˆ·çš„çœŸå®æ„å›¾ï¼Œç»“åˆå†å²è¡Œä¸ºå’Œå½“å‰åœºæ™¯ï¼ŒæŠŠæ¨¡ç³Šçš„éœ€æ±‚è½¬åŒ–ä¸ºæ˜ç¡®çš„ä»»åŠ¡ã€‚</p>
<p>ç¬¬äºŒå±‚ï¼Œâ€œä¸“ä¸šæ‰§è¡Œå›¢é˜Ÿâ€ã€‚è¿™é‡Œæœ‰ä¸åŒçš„æ™ºèƒ½ä½“å„å¸å…¶èŒâ€”â€”æœ‰çš„æ“…é•¿æ•°æ®åˆ†æï¼Œæœ‰çš„ç²¾é€šäº§å“åŒ¹é…ï¼Œæœ‰çš„ä¸“æ³¨é£é™©æ§åˆ¶ã€‚å®ƒä»¬å¯ä»¥å¹¶è¡Œå·¥ä½œï¼Œåˆå®æ—¶äº¤æ¢ä¿¡æ¯ã€‚</p>
<p>ç¬¬ä¸‰å±‚,â€œæœåŠ¡æ•´åˆé¡¾é—®â€ã€‚è´Ÿè´£æ±‡æ€»å„æ–¹æˆæœï¼Œç”Ÿæˆå®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œå¹¶ç”¨ç”¨æˆ·èƒ½ç†è§£çš„æ–¹å¼å‘ˆç°å‡ºæ¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e2810ed055e41a2b5c72cf6afe53edc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmluQ2xpcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766479748&amp;x-signature=AwHzLyyx1JQ0TOLDARCVKTWZwbg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä¸ºäº†è®©è¿™ä¸ªâ€œå›¢é˜Ÿâ€é«˜æ•ˆåä½œï¼ŒFinClip Chatkitåšäº†å‡ ä¸ªå…³é”®è®¾è®¡ã€‚æ— éœ€é‡æ„ï¼Œåªéœ€æ¥å…¥AIä¼šè¯SDKï¼Œå°±èƒ½æ¥ä¸Šå¤§æ¨¡å‹å’Œä¸šåŠ¡ç³»ç»Ÿã€‚</p>
<p>æ™ºèƒ½ä¸­æ¢ï¼Œèƒ½è‡ªåŠ¨è¯†åˆ«ç”¨æˆ·çš„æ„å›¾ï¼Œè°ƒåº¦æœ€åˆé€‚çš„æ™ºèƒ½ä½“ç»„åˆï¼›ä¸Šä¸‹æ–‡å·¥ç¨‹ï¼Œèƒ½å¤Ÿè®°ä½ç”¨æˆ·åœ¨ä¸åŒæ—¶æœŸçš„ä¸åŒéœ€æ±‚ï¼Œå½¢æˆå¯¹ç”¨æˆ·çš„å®Œæ•´ç”»åƒï¼›å®‰å…¨æ²™ç®±è®¾è®¡ï¼Œåˆ™è®©æ¯ä¸ªæ™ºèƒ½ä½“ç‹¬ç«‹è¿è¡Œï¼Œå…³é”®æ“ä½œéœ€è¦å¤šé‡éªŒè¯ï¼Œä¿éšœæ•°æ®éšç§å’Œå®‰å…¨ã€‚</p>
<p><strong>FinClip Chatkit</strong></p>
<p><strong>è®©ä¸åŒæ™ºèƒ½ä½“çœŸæ­£æ‡‚ä¸šåŠ¡</strong></p>
<p>æœªæ¥çš„APPï¼Œåœ¨FinClip Chatkitçš„åŠ æŒä¸‹ï¼Œå„è¡Œä¸šçš„ç§»åŠ¨åº”ç”¨åœºæ™¯ï¼Œå°†ä¼šå‘ç”Ÿä»¥ä¸‹æ”¹å˜ã€‚Â </p>
<p>é‡‘èæœºæ„APPï¼Œè¿‡å»ç”¨æˆ·é—®ç†è´¢ï¼Œç³»ç»Ÿåªä¼šæ¨äº§å“æ¸…å•ã€‚ç°åœ¨ï¼Œå½“ç”¨æˆ·è¯´â€œæƒ³ä¸ºå­©å­å­˜æ•™è‚²é‡‘â€æ—¶ï¼Œå¤šä¸ªæ™ºèƒ½ä½“ä¼šååŒå·¥ä½œï¼šæœ‰çš„è®¡ç®—æœªæ¥èµ„é‡‘éœ€æ±‚ï¼Œæœ‰çš„è¯„ä¼°é£é™©æ‰¿å—èƒ½åŠ›ï¼Œæœ‰çš„ç­›é€‰åˆé€‚æ–¹æ¡ˆï¼Œæœ‰çš„ä¼˜åŒ–è´¢åŠ¡ç»“æ„ã€‚ç”¨æˆ·æ‹¿åˆ°çš„ä¸å†æ˜¯äº§å“åˆ—è¡¨ï¼Œè€Œæ˜¯å®Œæ•´çš„è´¢åŠ¡è§„åˆ’ã€‚Â </p>
<p>èˆªç©ºå…¬å¸APPï¼Œè¿‡å»è®¢å®Œæœºç¥¨æœåŠ¡å°±ç»“æŸäº†ï¼Œç°åœ¨åŸºäºæ™ºèƒ½åä½œï¼Œç³»ç»Ÿä¼šä¸»åŠ¨å»ºè®®å‡ºè¡Œæ—¶é—´ã€æ¨èåŒ¹é…çš„é…’åº—ã€å®‰æ’æ¥é€æœºæœåŠ¡ï¼Œç”šè‡³æä¾›ç›®çš„åœ°ç‰¹è‰²æ´»åŠ¨æ¨èã€‚Â </p>
<p>é›¶å”®è¡Œä¸šAPPï¼Œå½“ç”¨æˆ·è¯´â€œå‘¨æœ«è¦å»é‡é¤â€æ—¶ï¼Œç³»ç»Ÿä¸å†ç®€å•æ¨èå•†å“ï¼Œè€Œæ˜¯ååŒå¤šä¸ªæ™ºèƒ½ä½“ï¼šåˆ†æé‡é¤æ‰€éœ€ç‰©å“ã€æ¨èæ­é…æ–¹æ¡ˆã€åŒ¹é…ä¼˜æƒ ä¿ƒé”€ã€ç”šè‡³æä¾›åœºåœ°é¢„è®¢æœåŠ¡ã€‚Â </p>
<p>æ±½è½¦æœåŠ¡é¢†åŸŸAPPï¼Œç”¨æˆ·æè¿°â€œè½¦è¾†å¼‚å“â€åï¼Œæ™ºèƒ½å›¢é˜Ÿä¼šååŒè¯Šæ–­æ•…éšœåŸå› ã€æ¨èæœ€è¿‘æœåŠ¡ç½‘ç‚¹ã€æ£€æŸ¥é…ä»¶åº“å­˜ã€å®‰æ’ä»£æ­¥è½¦è¾†ã€‚ä¸€æ¬¡ç®€å•çš„åé¦ˆï¼Œè·å¾—çš„æ˜¯å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚Â </p>
<p>æ™ºèƒ½æœåŠ¡çš„æœªæ¥ï¼Œä¸åœ¨äºè®©æœºå™¨æ›´åƒäººï¼Œè€Œåœ¨äºè®©æœåŠ¡æ›´æ‡‚äººã€‚</p>
<p>å¦‚æœä½ çš„Appä¹Ÿé¢ä¸´è¿™æ ·çš„å›°å¢ƒï¼ŒåŠŸèƒ½é½å…¨ä½†ä½“éªŒå‰²è£‚ï¼ŒæŠ•å…¥å·¨å¤§ä½†æ”¶æ•ˆæœ‰é™ï¼ŒAIä¸å¤Ÿæ™ºèƒ½ï¼Œæ¬¢è¿ç•™è¨€å’¨è¯¢FinClip Chatkitè§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>å…³äºFinClip Chatkit</strong></p>
<p>Chatkitæ˜¯å‡¡æ³°æå®¢FinClipè¶…çº§åº”ç”¨æ™ºèƒ½å¹³å°çš„ä¸€æ¬¡é‡å¤§èƒ½åŠ›å‡çº§ï¼Œå®ƒèƒ½åŠ©åŠ›ä¼ä¸šæ„å»ºå…·å¤‡æ·±åº¦ä¸Šä¸‹æ–‡æ„ŸçŸ¥ã€æµå¼ç”ŸæˆåŸç”ŸUIçš„è¶…çº§Appã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[WebODMç”Ÿæˆ3DTilesæ¨¡å‹åœ¨Cesiumåœ°å›¾ä¸Šä¼šå‚ç›´æ˜¾ç¤ºé—®é¢˜è§£å†³(y-up-to-z-up)]]></title>    <link>https://juejin.cn/post/7584273076645347334</link>    <guid>https://juejin.cn/post/7584273076645347334</guid>    <pubDate>2025-12-16T08:43:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584273076645347334" data-draft-id="7584059298696691753" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="WebODMç”Ÿæˆ3DTilesæ¨¡å‹åœ¨Cesiumåœ°å›¾ä¸Šä¼šå‚ç›´æ˜¾ç¤ºé—®é¢˜è§£å†³(y-up-to-z-up)"/> <meta itemprop="keywords" content="å‰ç«¯,GIS"/> <meta itemprop="datePublished" content="2025-12-16T08:43:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¥‡å±±æµäº‘"/> <meta itemprop="url" content="https://juejin.cn/user/1301420147226910"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            WebODMç”Ÿæˆ3DTilesæ¨¡å‹åœ¨Cesiumåœ°å›¾ä¸Šä¼šå‚ç›´æ˜¾ç¤ºé—®é¢˜è§£å†³(y-up-to-z-up)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1301420147226910/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¥‡å±±æµäº‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:43:56.000Z" title="Tue Dec 16 2025 08:43:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h4 data-id="heading-0">é—®é¢˜æè¿°</h4>
<blockquote>
<p>3dtilesæ¨¡å‹ç”Ÿæˆå,åœ¨Cesiumä¸­æ˜¾ç¤ºæ—¶,yè½´å‘ä¸Š,zè½´å‘ä¸Š,xè½´å‘ä¸Š,å¯¼è‡´æ¨¡å‹æ˜¾ç¤ºå¼‚å¸¸,æ— æ³•æ­£å¸¸æ˜¾ç¤º</p>
</blockquote>
<h4 data-id="heading-1">é—®é¢˜åŸå› </h4>
<blockquote>
<p><code>WebODM</code>æ˜¯å…ˆç”Ÿæˆglbæ¨¡å‹,è€Œåå†è¿›è¡Œ3dtilesè½¬æ¢;
glbæ¨¡å‹ä¸€èˆ¬æ˜¯yè½´å‘ä¸Š,æ‰€ä»¥è½¬æ¢åçš„3dtilesæ¨¡å‹ä¹Ÿæ˜¯Yè½´å‘ä¸Š;
<code>WebODM</code>ç”Ÿæˆçš„3dtileæ˜¯ä½¿ç”¨å…¶è‡ªç ”çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FOpenDroneMap%2FObj2Tiles" target="_blank" title="https://github.com/OpenDroneMap/Obj2Tiles" ref="nofollow noopener noreferrer">Obj2TilesğŸ”—</a>è¿›è¡Œè½¬æ¢çš„,ä½†<code>Obj2Tiles</code>å…¶å®æ˜¯æœ‰<code>z-up</code>çš„apié…ç½®;
ç”±äº<code>WebODM</code>åœ¨è°ƒç”¨<code>Obj2Tiles</code>çš„æ—¶å€™æ²¡æœ‰åš<code>z-up</code>çš„é…ç½®é€‰é¡¹,æ•…è€Œéœ€è¦ä¿®æ”¹è°ƒç”¨æºä»£ç ;</p>
</blockquote>
<h4 data-id="heading-2">è§£å†³æ€è·¯</h4>
<blockquote>
<p>ä¿®æ”¹<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FOpenDroneMap%2FODM%2Ftree%2Fmaster" target="_blank" title="https://github.com/OpenDroneMap/ODM/tree/master" ref="nofollow noopener noreferrer">ODMğŸ”—</a>ä»“åº“å†…çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FOpenDroneMap%2FODM%2Fblob%2Fmaster%2Fopendm%2Fogctiles.py" target="_blank" title="https://github.com/OpenDroneMap/ODM/blob/master/opendm/ogctiles.py" ref="nofollow noopener noreferrer">ogctiles.pyğŸ”—</a>ä»£ç ,å¦‚ä¸‹:</p>
</blockquote>
<pre><code class="hljs language-python" lang="python">    <span class="hljs-comment"># .......ä¸Šæ–‡å¿½ç•¥......</span>

      <span class="hljs-keyword">try</span>:
        kwargs = {
            <span class="hljs-string">'input'</span>: input_obj,
            <span class="hljs-string">'output'</span>: output_path,
            <span class="hljs-string">'divisions'</span>: divisions,
            <span class="hljs-string">'lat'</span>: lat,
            <span class="hljs-string">'lon'</span>: lon,
            <span class="hljs-string">'alt'</span>: alt,
        }
        system.run(<span class="hljs-string">'Obj2Tiles "{input}" "{output}" --divisions {divisions} --lat {lat} --lon {lon} --alt {alt} '</span>.<span class="hljs-built_in">format</span>(**kwargs))

    <span class="hljs-comment"># æ”¹ä¸ºä»¥ä¸‹â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“â†“</span>

    <span class="hljs-keyword">try</span>:
        kwargs = {
            <span class="hljs-string">'input'</span>: input_obj,
            <span class="hljs-string">'output'</span>: output_path,
            <span class="hljs-string">'divisions'</span>: divisions,
            <span class="hljs-string">'lat'</span>: lat,
            <span class="hljs-string">'lon'</span>: lon,
            <span class="hljs-string">'alt'</span>: alt,
        }
        CmdStr = <span class="hljs-string">'Obj2Tiles "{input}" "{output}" --divisions {divisions} --lat {lat} --lon {lon} --alt {alt}'</span>.<span class="hljs-built_in">format</span>(**kwargs)
        <span class="hljs-comment"># æ–¹å‘è½¬æ¢,ç©ºæ ¼ä¸å¯ç¼º</span>
        CmdStr += <span class="hljs-string">' --y-up-to-z-up'</span>

        system.run(CmdStr)

  <span class="hljs-comment"># .......ä¸‹æ–‡å¿½ç•¥......</span>
</code></pre>
<h4 data-id="heading-3">å…·ä½“æ“ä½œ</h4>
<blockquote>
<p>WebODMå®‰è£…å‚è€ƒ: <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.genec.dev%2Fblog%2F2024%2F12%2F28%2Frunning-webodm-on-windows-via-wsl2%2F" target="_blank" title="https://blog.genec.dev/blog/2024/12/28/running-webodm-on-windows-via-wsl2/" ref="nofollow noopener noreferrer">é€éWSL2åœ¨WindowsåŸ·è¡ŒWebODMğŸ”—</a></p>
<p>åœ¨dockerä¸­å®‰è£…å¥½WebODMä»“åº“å,ä½¿ç”¨dockerå‘½ä»¤è¡Œè¿›å…¥ åç§°ä¸º <code>webodm-node-odm-1</code> çš„å®¹å™¨ä¸­, cdè¿›å…¥ä»“åº“ç›®å½• /code/opendm,ç„¶åä¿®æ”¹å…¶æ–‡ä»¶ä¸‹çš„ogctiles.pyæ–‡ä»¶</p>
</blockquote>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">1. æŸ¥çœ‹å®¹å™¨åˆ—è¡¨,æ‰¾åˆ°odmæœåŠ¡å®¹å™¨,ä¸€èˆ¬åç§°éƒ½ä¸º webodm-node-odm-1</span>
docker ps -a 
<span class="hljs-meta prompt_">
# </span><span class="bash">2. å°†å®¹å™¨å†…çš„æ–‡ä»¶å¤åˆ¶åˆ°æœåŠ¡å™¨ç›®å½•ä¸‹</span>
docker cp webodm-node-odm-1:/code/opendm/ogctiles.py /æœåŠ¡å™¨æŸä¸ªç›®å½•/ogctiles.py 
<span class="hljs-meta prompt_">
# </span><span class="bash">3. å°†æ–‡ä»¶ä¸­çš„ä»£ç æ·»åŠ --y-up-to-z-up,å¦‚ä¸Šè¿°ä»£ç </span>
<span class="hljs-meta prompt_">
# </span><span class="bash">4. å°†ä¿®æ”¹åçš„æ–‡ä»¶å¤åˆ¶å›å®¹å™¨ä¸­</span>
docker cp /æœåŠ¡å™¨æŸä¸ªç›®å½•/ogctiles.py webodm-node-odm-1:/code/opendm/ogctiles.py
<span class="hljs-meta prompt_">
# </span><span class="bash">5. è¿›å…¥å®¹å™¨å†…éƒ¨</span>
docker exec -it webodm-node-odm-1 bash
<span class="hljs-meta prompt_">
# </span><span class="bash">6. æŸ¥çœ‹æ–‡ä»¶æ˜¯å¦å·²æ›´æ”¹</span>
cat /code/opendm/ogctiles.py
<span class="hljs-meta prompt_">
# </span><span class="bash">7. å¦‚æœªæ›´æ”¹åˆ™é‡æ–°å¤åˆ¶,å·²æ›´æ”¹åˆ™é‡å¯dockeråº”ç”¨</span>

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[3 é“¾è¡¨ äºŒå‰æ ‘]]></title>    <link>https://juejin.cn/post/7584203412197441562</link>    <guid>https://juejin.cn/post/7584203412197441562</guid>    <pubDate>2025-12-16T08:17:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584203412197441562" data-draft-id="7584203412197392410" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="3 é“¾è¡¨ äºŒå‰æ ‘"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-12-16T08:17:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç˜¦çš„å¯ä»¥ä¸‹é¥­äº†"/> <meta itemprop="url" content="https://juejin.cn/user/895474817042060"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            3 é“¾è¡¨ äºŒå‰æ ‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/895474817042060/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç˜¦çš„å¯ä»¥ä¸‹é¥­äº†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:17:19.000Z" title="Tue Dec 16 2025 08:17:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1å°æ—¶+
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç¯å½¢é“¾è¡¨æ˜¯é“¾è¡¨ä¸­çš„ä¸€ç±»ç‰¹æ®Šé—®é¢˜ï¼Œå®ƒå’Œé“¾è¡¨åè½¬ä¸€æ ·ï¼Œæœ‰ç€ç›¸å¯¹æ’å®šçš„è§£é¢˜æ€è·¯å’Œé€‚å½“çš„å˜ä½“ã€‚å¦‚æœä½ å¯¹å®ƒçš„ç‰¹æ€§å’Œè§£æ³•æ²¡æœ‰é¢„å…ˆçš„äº†è§£å’ŒæŠŠæ¡ï¼Œé‚£ä¹ˆå‰æœŸçš„æ¨å¯¼å¯èƒ½ä¼šèŠ±å»ä½ å¤§é‡çš„æ—¶é—´ã€‚åè¿‡æ¥çœ‹ï¼Œåªè¦æˆ‘ä»¬èƒ½å¤ŸæŒæ¡å…¶æ ¸å¿ƒæ€è·¯ï¼Œé‚£ä¹ˆä¸ç®¡å®ƒæ€ä¹ˆå˜åŒ–ï¼Œå¤§å®¶éƒ½èƒ½åœ¨ç¬é—´æ‰¾åˆ°è§£é¢˜çš„â€œæŠ“æ‰‹â€ã€è¿›è€Œç»™å‡ºæ­£ç¡®çš„è§£ç­”ã€‚</p>
<h2 data-id="heading-0">ç¯å½¢é“¾è¡¨åŸºæœ¬é—®é¢˜â€”â€”å¦‚ä½•åˆ¤æ–­é“¾è¡¨æ˜¯å¦æˆç¯ï¼Ÿ</h2>
<blockquote>
<p>çœŸé¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ¤æ–­é“¾è¡¨ä¸­æ˜¯å¦æœ‰ç¯ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹ 1ï¼š<br/>
è¾“å…¥ï¼š[3,2,0,4]ï¼ˆé“¾è¡¨ç»“æ„å¦‚ä¸‹å›¾ï¼‰
è¾“å‡ºï¼štrue<br/>
è§£é‡Šï¼šé“¾è¡¨ä¸­å­˜åœ¨ä¸€ä¸ªç¯
<img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/1712658d244622c4~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=531&amp;h=171&amp;s=11301&amp;e=png" alt="é“¾è¡¨å›¾ç‰‡" loading="lazy"/></p>
</blockquote>
<h3 data-id="heading-1">æ€è·¯è§£è¯»</h3>
<p>å…¶å®é“¾è¡¨æˆç¯çš„ç‰¹å¾éå¸¸æ˜æ˜¾ï¼Œå¤§å®¶å¯ä»¥ç»“åˆä¸€ä¸ªç°å®ä¸­çš„ä¾‹å­æ¥ç†è§£ï¼š<br/>
å‡å¦‚ç°å®ä¸­æœ‰ä¸€ä¸ªé•¿è·‘çˆ±å¥½è€…æé›·ï¼Œè¿™è´§å¾ˆç‹‚ï¼Œä»–ç«‹äº†ä¸€ä¸ª flagï¼Œè¯´è¦å¾’æ­¥ç¯æ¸¸ä¸–ç•Œï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/171264fb2d7937b6~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1020&amp;h=676&amp;s=73182&amp;e=png" alt="" loading="lazy"/>
åœ°çƒçš„å‘¨é•¿å›´å‡ºæ¥çš„è¿™ä¸ªåœ†ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªâ€œç¯â€ã€‚æé›·ç°åœ¨å°±æƒ³å›´ç€è¿™ä¸ªç¯è·‘ä¸Šä¸€åœˆï¼Œè¯´ä»–ç‹‚ï¼Œä»–ä¹Ÿæ²¡é‚£ä¹ˆç‹‚â€”â€”ä»–è§‰å¾—è‡ªå·±æœ€å¤šè·‘ä¸€åœˆï¼Œä¸ºäº†é˜²æ­¢è‡ªå·±è·‘è¿‡ç•Œï¼Œä»–å†³å®šåœ¨å‡ºå‘çš„åœ°æ–¹ç«‹ä¸€ä¸ª flagï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/1712651e82aded3d~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=854&amp;h=656&amp;s=71878&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/><br/>
è¿™æ ·ï¼Œä¸ç®¡æé›·èµ°å®Œè¿™ä¸ªç¯ç”¨äº†å¤šå°‘å¹´ï¼Œä¸–äº‹å¦‚ä½•å˜è¿ï¼Œåªè¦ä»–çš„ flag è¿˜æ²¡æœ‰å€’ï¼Œé‚£ä¹ˆæé›·å°±ä¸€å®šèƒ½å›åˆ°è‡ªå·±æ¢¦å¼€å§‹çš„åœ°æ–¹ï¼šï¼‰ã€‚<br/>
æ¢ä¸ªè§’åº¦çœ‹ï¼šåªè¦æé›·åœ¨é—·å¤´å‰è¿›çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°äº† flag çš„å­˜åœ¨ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€ï¼Œæé›·ç¡®å®èµ°äº†ä¸€ä¸ªç¯ã€‚æ¯•ç«Ÿè‹¥è¿™æ˜¯ä¸€æ¡çº¿ï¼Œä»–å°†æ°¸è¿œæ— æ³•å›åˆ°èµ·ç‚¹ã€‚</p>
<p>å›åˆ°é“¾è¡¨çš„ä¸–ç•Œé‡Œï¼Œä¹Ÿæ˜¯ä¸€ä¸ªé“ç†ã€‚ä¸€ä¸ªç¯å½¢é“¾è¡¨çš„åŸºæœ¬ä¿®å…»ï¼Œæ˜¯èƒ½å¤Ÿè®©éå†å®ƒçš„æ¸¸æ ‡å›åˆ°åŸç‚¹ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/1712655eb14b57b9~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1174&amp;h=468&amp;s=37491&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/><br/>
ä» flag å‡ºå‘ï¼Œåªè¦æˆ‘èƒ½å¤Ÿå†å›åˆ° flag å¤„ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€ï¼Œæˆ‘æ­£åœ¨éå†ä¸€ä¸ªç¯å½¢é“¾è¡¨ã€‚</p>
<p>æˆ‘ä»¬æŒ‰ç…§è¿™ä¸ªæ€è·¯æ¥åšé¢˜ï¼š</p>
<h3 data-id="heading-2">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">ListNode</span>} <span class="hljs-variable">head</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">boolean</span>}
 */</span>
<span class="hljs-comment">// å…¥å‚æ˜¯å¤´ç»“ç‚¹ </span>
<span class="hljs-keyword">const</span> hasCycle = <span class="hljs-keyword">function</span>(<span class="hljs-params">head</span>) {
    <span class="hljs-comment">// åªè¦ç»“ç‚¹å­˜åœ¨ï¼Œé‚£ä¹ˆå°±ç»§ç»­éå†</span>
    <span class="hljs-keyword">while</span>(head){
        <span class="hljs-comment">// å¦‚æœ flag å·²ç»ç«‹è¿‡äº†ï¼Œé‚£ä¹ˆè¯´æ˜ç¯å­˜åœ¨</span>
        <span class="hljs-keyword">if</span>(head.<span class="hljs-property">flag</span>){
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }<span class="hljs-keyword">else</span>{
            <span class="hljs-comment">// å¦‚æœ flag æ²¡ç«‹è¿‡ï¼Œå°±ç«‹ä¸€ä¸ª flag å†å¾€</span>
            ä¸‹èµ°
            head.<span class="hljs-property">flag</span> = <span class="hljs-literal">true</span>;
            head = head.<span class="hljs-property">next</span>;
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
};

</code></pre>
<h2 data-id="heading-3">ç¯å½¢é“¾è¡¨è¡ç”Ÿé—®é¢˜â€”â€”å®šä½ç¯çš„èµ·ç‚¹</h2>
<blockquote>
<p>çœŸé¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œè¿”å›é“¾è¡¨å¼€å§‹å…¥ç¯çš„ç¬¬ä¸€ä¸ªç»“ç‚¹ã€‚Â å¦‚æœé“¾è¡¨æ— ç¯ï¼Œåˆ™è¿”å›Â nullã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹ 1ï¼š<br/>
è¾“å…¥ï¼šhead = [3,2,0,-4]ï¼ˆå¦‚ä¸‹å›¾ï¼‰
è¾“å‡ºï¼štail connects to node index 1
è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬äºŒä¸ªç»“ç‚¹ã€‚
<img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/1712658d244622c4~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=531&amp;h=171&amp;s=11301&amp;e=png" alt="é“¾è¡¨æˆç¯1" loading="lazy"/></p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹Â 2ï¼š<br/>
è¾“å…¥ï¼šhead = [1,2]ï¼ˆå¦‚ä¸‹å›¾ï¼‰<br/>
è¾“å‡ºï¼štail connects to node index 0<br/>
è§£é‡Šï¼šé“¾è¡¨ä¸­æœ‰ä¸€ä¸ªç¯ï¼Œå…¶å°¾éƒ¨è¿æ¥åˆ°ç¬¬ä¸€ä¸ªç»“ç‚¹ã€‚
<img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/171265cc949d62be~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=201&amp;h=105&amp;s=4582&amp;e=png&amp;b=fefefe" alt="é“¾è¡¨æˆç¯2" loading="lazy"/></p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹ 3ï¼š<br/>
è¾“å…¥ï¼šhead = [1]ï¼ˆå¦‚ä¸‹å›¾ï¼‰<br/>
è¾“å‡ºï¼šno cycle<br/>
è§£é‡Šï¼šé“¾è¡¨ä¸­æ²¡æœ‰ç¯ã€‚<br/>
<img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/171265d337a0b382~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=65&amp;h=65&amp;s=1963&amp;e=png" alt="é“¾è¡¨æˆç¯3" loading="lazy"/></p>
</blockquote>
<h3 data-id="heading-4">æ€è·¯è§£è¯»</h3>
<p>è¿™é“é¢˜åœ¨ä¸Šé“é¢˜çš„åŸºç¡€ä¸Šï¼Œä»…ä»…å¢åŠ äº†ä¸€ä¸ªâ€œè¿”å›é“¾è¡¨çš„æˆç¯èµ·ç‚¹â€ï¼Œå…¶éš¾åº¦å®šä¹‰å°±ä» easy ä¸Šå‡åˆ°äº† mediumã€‚ä¸è¿‡å¯¹äºæŒæ¡äº†å…³é”®è§£é¢˜æ€è·¯çš„å„ä½æ¥è¯´ï¼Œè¿™é“é¢˜ä»ç„¶æ˜¯ easyâ€”â€”å› ä¸ºå¦‚æœä¸€ä¸ªç»“ç‚¹æ˜¯ç¯å½¢é“¾è¡¨æˆç¯çš„èµ·ç‚¹ï¼Œé‚£ä¹ˆå®ƒä¸€å®šæ˜¯ç¬¬ä¸€ä¸ªè¢«å‘ç° flag æ ‡å¿—å·²å­˜åœ¨çš„ç»“ç‚¹ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/1712680006bb6a60~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=2182&amp;h=840&amp;s=154021&amp;e=jpg" alt="" loading="lazy"/>
è¿™ä¸€ç‚¹ä¸éš¾ç†è§£ï¼Œæˆ‘ä»¬è¯•æƒ³å¦‚æœä»å¤´å¼€å§‹éå†ä¸€ä¸ªé“¾è¡¨ï¼Œå‡å¦‚é€”ä¸­è¿›å…¥äº†ä¸€ä¸ªç¯ï¼Œé‚£ä¹ˆé¦–å…ˆè¢«æ‰“ä¸Š flag æ ‡ç­¾çš„å…¶å®å°±æ˜¯ç¯çš„èµ·ç‚¹ã€‚å¾…æˆ‘ä»¬éå†å®Œè¿™ä¸ªç¯æ—¶ï¼Œå³ä¾¿ç¯ä¸Šæ‰€æœ‰çš„ç»“ç‚¹éƒ½å·²ç»è¢«ç«‹äº† flagï¼Œä½†èµ·ç‚¹å¤„çš„ flag ä¸€å®šæœ€å…ˆè¢«æˆ‘ä»¬å®šä½åˆ°ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ç¬¬ä¸€æ¬¡å‘ç° flag å·²å­˜åœ¨æ—¶ï¼Œå°†å¯¹åº”çš„ç»“ç‚¹è¿”å›å³å¯ï¼š</p>
<h3 data-id="heading-5">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">ListNode</span>} <span class="hljs-variable">head</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">ListNode</span>}
 */</span>
<span class="hljs-keyword">const</span> detectCycle = <span class="hljs-keyword">function</span>(<span class="hljs-params">head</span>) {
    <span class="hljs-keyword">while</span>(head){
        <span class="hljs-keyword">if</span>(head.<span class="hljs-property">flag</span>){
            <span class="hljs-keyword">return</span> head;
        }<span class="hljs-keyword">else</span>{
            head.<span class="hljs-property">flag</span> = <span class="hljs-literal">true</span>;
            head = head.<span class="hljs-property">next</span>;
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
};
</code></pre>
<h2 data-id="heading-6">å¿«æ…¢æŒ‡é’ˆçš„æ€è·¯</h2>
<p>è¿™é“é¢˜è¿˜æœ‰ä¸€ä¸ªå…¬è®¤çš„æ¯”è¾ƒç»å…¸çš„æ€è·¯ï¼Œå°±æ˜¯ç”¨å¿«æ…¢æŒ‡é’ˆæ¥åšï¼š<br/>
å®šä¹‰æ…¢æŒ‡é’ˆ slowï¼Œå¿«æŒ‡é’ˆ fastã€‚ä¸¤è€…é½å¤´å¹¶è¿›ï¼Œ slow ä¸€æ¬¡èµ°ä¸€æ­¥ã€fast ä¸€æ¬¡ èµ°ä¸¤æ­¥ã€‚è¿™æ ·å¦‚æœå®ƒä»¬æ˜¯åœ¨ä¸€ä¸ªæœ‰ç¯çš„é“¾è¡¨é‡Œç§»åŠ¨ï¼Œä¸€å®šæœ‰ç›¸é‡çš„æ—¶åˆ»ã€‚è¿™ä¸ªåŸç†è¯æ˜èµ·æ¥ä¹Ÿæ¯”è¾ƒç®€å•ï¼šæˆ‘ä»¬å‡è®¾ç§»åŠ¨çš„æ¬¡æ•°ä¸º tï¼Œslow ç§»åŠ¨çš„è·¯ç¨‹å°±æ˜¯<code>t</code>ï¼Œfast ç§»åŠ¨çš„è·¯ç¨‹ä¸º<code>2t</code>ï¼Œå‡å¦‚ç¯çš„é•¿åº¦ä¸º <code>s</code>ï¼Œé‚£ä¹ˆå½“ä¸‹é¢è¿™ä¸ªæ¡ä»¶ï¼š</p>
<pre><code class="hljs language-js" lang="js">2t - t = s
</code></pre>
<p>ä¹Ÿå°±æ˜¯ï¼š</p>
<pre><code class="hljs language-js" lang="js">t = s
</code></pre>
<p>æ»¡è¶³æ—¶ï¼Œslow å’Œ fast å°±ä¸€å®šä¼šç›¸é‡ã€‚åä¹‹ï¼Œå¦‚æœä¸¤è€…æ²¡æœ‰ç›¸é‡ï¼ŒåŒæ—¶ fast éå†åˆ°äº†é“¾è¡¨çš„æœ«å°¾ï¼Œå‘ç° next æŒ‡é’ˆæŒ‡å‘ nullï¼Œåˆ™é“¾è¡¨ä¸­ä¸å­˜åœ¨ç¯ã€‚</p>
<p>æœ‰å…´è¶£çš„åŒå­¦ï¼Œå¯ä»¥å°è¯•ç”¨åŒæŒ‡é’ˆæ³•å®ç°ä¸€éä¸Šé¢çš„åˆ¤å®šã€‚ä¸è¿‡æˆ‘æ›´åŠ æ¨èçš„ä»ç„¶æ˜¯â€œç«‹flagâ€æ³•ï¼Œç†è§£éš¾åº¦å’Œç¼–ç éš¾åº¦ä¸Šæ¥è¯´éƒ½æ›´åŠ å‹å¥½ï¼Œæœ‰åˆ©äºå¤§å®¶å®ç°é¢˜ç›®çš„â€œç§’æ€â€ã€‚</p>
<h2 data-id="heading-7">å¼¦å¤–ä¹‹éŸ³</h2>
<p>åœ¨è¿™ä¸€èŠ‚ï¼Œå¤§å®¶ä¼šå‘ç°ä¸€ä¸ªéå¸¸æœ‰è¶£çš„ç°è±¡â€”â€”åšç¯å½¢é“¾è¡¨çš„ç³»åˆ—é¢˜ç›®ï¼Œéš¾ç‚¹å…¶å®åœ¨äºä½ æ€ä¹ˆå»æƒ³æ˜ç™½è¿™ä¸ªæˆç¯çš„è¿‡ç¨‹ã€æ€ä¹ˆæŠŠæ¡æˆç¯åçš„ç‰¹æ€§ã€‚çœŸæ­£ç¼–ç å®ç°çš„æ—¶å€™ï¼Œå¯¥å¯¥æ•°è¡Œå°±å¯ä»¥æå®šã€‚è¿™å…¶å®ä¹Ÿæ˜¯æˆ‘æƒ³è¦å‘å¤§å®¶ä¼ è¾¾çš„ä¸€ä¸ªé‡è¦çš„è§£é¢˜ä¹ æƒ¯â€”â€”åšç®—æ³•é¢˜æ—¶ï¼Œä¸è¦æ€¥äºä¸‹æ‰‹å†™ä»£ç ï¼Œè€Œåº”è¯¥å…ˆé™ä¸‹å¿ƒæ¥ï¼Œç¨³ä½ç¥ã€ä¸€æ­¥ä¸€æ­¥æ‹æ¸…æ¥šä½ è‡ªå·±çš„æ€è·¯ã€‚</p>
<p>ä¹‹æ‰€ä»¥è¦æŠŠè¿™ç‚¹å•ç‹¬æ‹å‡ºæ¥è®²ï¼Œæ˜¯å› ä¸ºæˆ‘çŸ¥é“å¾ˆå¤šåŒå­¦å¹³æ—¶å†™ä¸šåŠ¡ä»£ç æ¯”è¾ƒå¤šã€‚å‰ç«¯ä¸šåŠ¡ä»£ç æ˜¯ä»€ä¹ˆç‰¹å¾ï¼Ÿå¹²å°±å®Œäº†ï¼Œå¯¹å§ï¼Ÿåæ­£å°±ç®—ä»£ç æœ‰é—®é¢˜ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç›´è§‚çš„è§†è§‰åé¦ˆåŠæ—¶å‘ç°ã€åŠæ—¶ä¿®å¤ã€‚åœ¨è‚‰çœ¼å¯è§çš„åé¦ˆçš„æŒ‡å¯¼ä¸‹ï¼Œä½ åŸºæœ¬ä¸ä¼šå‡ºä»€ä¹ˆæ–¹å‘æ€§çš„é—®é¢˜ã€‚</p>
<p>åšç®—æ³•é¢˜å°±å¤§ä¸ä¸€æ ·äº†ï¼ŒçœŸæ­£æäº¤ç»™ OJ è¿è¡Œä¹‹å‰ï¼Œé™¤äº†ä½ è‡ªå·±çš„é€»è¾‘åˆ¤æ–­ä¹‹å¤–ã€æ²¡æœ‰ä»»ä½•ç›´è§‚çš„çº¿ç´¢èƒ½å¤Ÿå¸®ä½ æ˜ç¡®é—®é¢˜çš„æ‰€åœ¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ ä¸€å¼€å§‹å‹æ ¹æ²¡æƒ³æ¸…æ¥šã€è„‘å­é‡Œæœ¬æ¥å°±æ˜¯ä¸€å›¢ä¹±éº»ï¼Œé‚£ä¹ˆç›´æ¥å¼€å¹²åå¾€å¾€æ˜¯è¶Šå†™è¶Šä¹±ã€æœ€åä»£ç çš„ä¿®å¤æˆæœ¬ä¹Ÿä¼šå˜å¾—éå¸¸é«˜ã€‚</p>
<p>ç›²å†™ä»£ç ã€ä¹±å†™ä»£ç ï¼Œä¸ä»…å®¹æ˜“æ‰°ä¹±è‡ªå·±çš„æ€è·¯ï¼Œä¹Ÿä¼šç»™é¢è¯•å®˜ç•™ä¸‹â€œè¿™ä¸ªäººæ€ä¹ˆè¿™ä¹ˆå†’å¤±â€ä¸€ç±»çš„è´Ÿé¢å°è±¡ã€‚æ‰€ä»¥å¤§å®¶ä¸€å®šè¦å°½é‡è§„é¿è¿™ç§è¡Œä¸ºï¼Œå¦‚æœå®åœ¨å¯¹è‡ªå·±çš„æ€è·¯æ„Ÿåˆ°ä¸ç¡®å®šã€ä¸è‡ªä¿¡ï¼Œè¿™æ—¶å€™å¯ä»¥é—®å¯¹æ–¹è¦å¼ çº¸ã€å…ˆçº¿ä¸‹æ¢³ç†ä¸€ä¸‹ã€‚çœŸæ­£é¢è¯•çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯¹äºè‡ªå·±æ•²åœ¨å±å¹•ä¸Šçš„æ¯ä¸€è¡Œä»£ç ï¼Œéƒ½åº”è¯¥æŠ±æœ‰æ•¬ç•ä¹‹å¿ƒã€‚</p>
<p>ï¼ˆé˜…è¯»è¿‡ç¨‹ä¸­æœ‰ä»»ä½•æƒ³æ³•æˆ–ç–‘é—®ï¼Œæˆ–è€…å•çº¯å¸Œæœ›å’Œç¬”è€…äº¤ä¸ªæœ‹å‹å•¥çš„ï¼Œæ¬¢è¿å¤§å®¶æ·»åŠ æˆ‘çš„å¾®ä¿¡xyalinodeä¸æˆ‘äº¤æµå“ˆ~ï¼‰
æ ˆä¸é˜Ÿåˆ—ç›¸å…³çš„é—®é¢˜å°±æ¯”è¾ƒå¾®å¦™äº†ï¼Œå¾ˆå¤šæ—¶å€™ç›¸å…³é¢˜ç›®ä¸­å‹æ ¹ä¸ä¼šå‡ºç°â€œæ ˆâ€ã€â€œé˜Ÿåˆ—â€è¿™æ ·çš„å…³é”®å­—ï¼Œä½†åªè¦ä½ æ·±å…¥åˆ°çœŸé¢˜é‡Œå»ã€å¯¹æ ˆå’Œé˜Ÿåˆ—çš„åº”ç”¨åœºæ™¯å»ºç«‹èµ·æ­£ç¡®çš„æ„ŸçŸ¥ï¼Œé‚£ä¹ˆå¾ˆå¤šçº¿ç´¢éƒ½ä¼šåœ¨åˆ†æçš„è¿‡ç¨‹ä¸­è¢«ä½ è½»æ¾åœ°æŒ–æ˜å‡ºæ¥ã€‚</p>
<p>è¿™é‡Œä¹Ÿå’Œå¤§å®¶åˆ†äº«ä¸€ä½è¯»è€…åœ¨è¯•è¯»è¿‡ç¨‹ä¸­çš„å­¦ä¹ æ„Ÿæ‚Ÿï¼š</p>
<blockquote>
<p>æ„Ÿè§‰ç®—æ³•é¢˜é™¤äº†ç†è§£è¿˜è¦é ç»ƒä¹ ï¼Œå°±åƒé«˜è€ƒæ•°å­¦é¢˜ï¼Œè¦é”»ç‚¼å‡ºè§£é¢˜å¸¸è§„æ€ç»´ã€‚ä»»é‡é“è¿œå•ŠğŸ™Š</p>
</blockquote>
<p>å…¶å®å°±æ˜¯è¿™ä¹ˆå›äº‹ï¼Œè¿™ä¹Ÿæ­£æ˜¯æˆ‘ä»¬å¼€ç¯‡å°±è·Ÿå¤§å®¶æŒ‡æ˜â€œä»¥é¢˜ä¸ºçº²â€è¿™æ¡è·¯çš„åˆè¡·ã€‚</p>
<p>å¥½å•¦ï¼Œå¼€å·¥äº†è€å“¥ä»¬ï¼</p>
<h2 data-id="heading-8">å…¸å‹çœŸé¢˜å¿«é€Ÿä¸Šæ‰‹-â€œæœ‰æ•ˆæ‹¬å·â€é—®é¢˜</h2>
<blockquote>
<p>é¢˜ç›®æè¿°ï¼šç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ '('ï¼Œ')'ï¼Œ'{'ï¼Œ'}'ï¼Œ'['ï¼Œ']'Â çš„å­—ç¬¦ä¸²ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚</p>
</blockquote>
<blockquote>
<p>æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š
å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚<br/>
å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚<br/>
æ³¨æ„ç©ºå­—ç¬¦ä¸²å¯è¢«è®¤ä¸ºæ˜¯æœ‰æ•ˆå­—ç¬¦ä¸²ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹ 1:<br/>
è¾“å…¥: "()"<br/>
è¾“å‡º: true</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹Â 2:<br/>
è¾“å…¥: "()[]{}"<br/>
è¾“å‡º: true</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹Â 3:<br/>
è¾“å…¥: "(]"<br/>
è¾“å‡º: false</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹Â 4:<br/>
è¾“å…¥: "([)]"<br/>
è¾“å‡º: false<br/>
ç¤ºä¾‹Â 5:<br/>
è¾“å…¥: "{[]}"<br/>
è¾“å‡º: true</p>
</blockquote>
<h3 data-id="heading-9">æ€è·¯åˆ†æ</h3>
<p>æ‹¬å·é—®é¢˜åœ¨é¢è¯•ä¸­å‡ºç°é¢‘ç‡éå¸¸é«˜ï¼Œ è¿™ç±»é¢˜ç›®æˆ‘ä»¬ä¸€èˆ¬é¦–é€‰ç”¨æ ˆæ¥åšã€‚</p>
<p>ä¸ºä»€ä¹ˆå¯ä»¥ç”¨æ ˆåšï¼Ÿå¤§å®¶æƒ³æƒ³ï¼Œæ‹¬å·æˆç«‹æ„å‘³ç€ä»€ä¹ˆï¼Ÿæ„å‘³ç€<strong>å¯¹ç§°æ€§</strong>ã€‚</p>
<p>å·§äº†ï¼Œæ ¹æ®æ ˆçš„åè¿›å…ˆå‡ºåŸåˆ™ï¼Œä¸€ç»„æ•°æ®çš„å…¥æ ˆå’Œå‡ºæ ˆé¡ºåºåˆšå¥½æ˜¯å¯¹ç§°çš„ã€‚æ¯”å¦‚è¯´<code>1ã€2ã€3ã€4ã€5ã€6</code>æŒ‰é¡ºåºå…¥æ ˆï¼Œå…¶å¯¹åº”çš„å‡ºæ ˆåºåˆ—å°±æ˜¯ <code>6ã€5ã€4ã€3ã€2ã€1</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-number">123456</span>
<span class="hljs-number">654321</span>
</code></pre>
<p>å¯¹ç§°å…³ç³»ä¸€ç›®äº†ç„¶ã€‚</p>
<p>å› æ­¤è¿™é‡Œå¤§å®¶å¯ä»¥è®°ä¸‹ä¸€ä¸ªè§„å¾‹ï¼šé¢˜ç›®ä¸­è‹¥æ¶‰åŠæ‹¬å·é—®é¢˜ï¼Œåˆ™å¾ˆæœ‰å¯èƒ½å’Œæ ˆç›¸å…³ã€‚</p>
<p>å›åˆ°é¢˜ç›®ä¸­æ¥ï¼Œæˆ‘ä»¬çš„æ€è·¯å°±æ˜¯åœ¨éå†å­—ç¬¦ä¸²çš„è¿‡ç¨‹ä¸­ï¼Œå¾€æ ˆé‡Œ push æ‹¬å·å¯¹åº”çš„é…å¯¹å­—ç¬¦ã€‚æ¯”å¦‚å¦‚æœéå†åˆ°äº† <code>(</code>ï¼Œå°±å¾€æ ˆé‡Œ push <code>)</code>ã€‚</p>
<p>å‡å¦‚å­—ç¬¦ä¸²ä¸­æ‰€æœ‰çš„æ‹¬å·éƒ½æˆç«‹ï¼Œé‚£ä¹ˆå‰æœŸæˆ‘ä»¬ push è¿›å»çš„ä¸€å®šå…¨éƒ½æ˜¯å·¦æ‹¬å·ã€åæœŸ push è¿›å»çš„ä¸€å®šå…¨éƒ½æ˜¯å³æ‹¬å·ã€‚è€Œä¸”å·¦æ‹¬å·çš„å…¥æ ˆé¡ºåºï¼Œå’Œå…¶å¯¹åº”çš„å³æ‹¬å·çš„å…¥æ ˆé¡ºåºåº”è¯¥æ˜¯ç›¸åçš„ï¼Œæ¯”å¦‚è¿™ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-css" lang="css">({<span class="hljs-selector-attr">[]</span>})
</code></pre>
<p>æœ€åä¸€ä¸ªå…¥æ ˆçš„å·¦æ–¹æ‹¬å·<code>[</code>ï¼Œä¸ä¹‹åŒ¹é…çš„å³æ–¹æ‹¬å·<code>]</code>æ­£æ˜¯æ¥ä¸‹æ¥ç¬¬ä¸€ä¸ªå…¥æ ˆçš„å³æ‹¬å·ã€‚</p>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æœæ–­åœ°è®¤ä¸ºåœ¨å·¦æ‹¬å·å…¨éƒ¨å…¥æ ˆç»“æŸæ—¶ï¼Œæ ˆé¡¶çš„é‚£ä¸ªå·¦æ‹¬å·ï¼Œå°±æ˜¯ç¬¬ä¸€ä¸ªéœ€è¦è¢«é…å¯¹çš„å·¦æ‹¬å·ã€‚æ­¤æ—¶æˆ‘ä»¬éœ€è¦åˆ¤æ–­çš„æ˜¯æ¥ä¸‹æ¥å…¥æ ˆçš„ç¬¬ä¸€ä¸ªå³æ‹¬å·æ˜¯å¦å’Œæ­¤æ—¶æ ˆé¡¶çš„å·¦æ‹¬å·é…å¯¹ã€‚å¦‚æœé…å¯¹æˆåŠŸï¼Œé‚£ä¹ˆè¿™ä¸€å¯¹æ‹¬å·å°±æ˜¯æœ‰æ•ˆçš„ï¼Œå¦åˆ™ç›´æ¥ <code>return false</code>ã€‚</p>
<p>å½“åˆ¤æ–­å‡ºä¸€å¯¹æœ‰æ•ˆçš„æ‹¬å·ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åŠæ—¶åœ°ä¸¢æ‰å®ƒï¼Œå»åˆ¤æ–­å…¶å®ƒæ‹¬å·æ˜¯å¦æœ‰æ•ˆã€‚è¿™é‡Œè¿™ä¸ªâ€œä¸¢æ‰â€çš„åŠ¨ä½œï¼Œå°±å¯¹åº”ç€ä¸¤ä¸ªæ‹¬å·ä¸€èµ·å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</p>
<p>æ¯é…å¯¹æˆåŠŸä¸€å¯¹æ‹¬å·ï¼Œæˆ‘ä»¬éƒ½å°†è¿™å¯¹æ‹¬å·å‡ºæ ˆã€‚è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç¡®ä¿æ ˆé¡¶çš„æ‹¬å·æ€»æ˜¯ä¸‹ä¸€ä¸ªéœ€è¦è¢«åŒ¹é…çš„å·¦æ‹¬å·ã€‚</p>
<p>å¦‚æœè¯´æˆ‘ä»¬å‡ºæ ˆåˆ°æœ€åï¼Œæ ˆä¸ä¸ºç©ºï¼Œé‚£ä¹ˆæ„å‘³ç€ä¸€éƒ¨åˆ†æ²¡æœ‰è¢«åŒ¹é…ä¸Šçš„æ‹¬å·è¢«å‰©ä¸‹æ¥äº†ï¼Œè¯´æ˜å­—ç¬¦ä¸²ä¸­å¹¶éæ‰€æœ‰çš„æ‹¬å·éƒ½æœ‰æ•ˆï¼Œåˆ¤æ–­ <code>false</code>ï¼›åä¹‹ï¼Œåˆ™è¯´æ˜æ‰€æœ‰çš„æ‹¬å·éƒ½é…å¯¹æˆåŠŸäº†ï¼Œåˆ¤æ–­ä¸º <code>true</code>ã€‚</p>
<h3 data-id="heading-10">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ç”¨ä¸€ä¸ª map æ¥ç»´æŠ¤å·¦æ‹¬å·å’Œå³æ‹¬å·çš„å¯¹åº”å…³ç³»</span>
<span class="hljs-keyword">const</span> leftToRight = {
  <span class="hljs-string">"("</span>: <span class="hljs-string">")"</span>,
  <span class="hljs-string">"["</span>: <span class="hljs-string">"]"</span>,
  <span class="hljs-string">"{"</span>: <span class="hljs-string">"}"</span>
};

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">string</span>} <span class="hljs-variable">s</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">boolean</span>}
 */</span>
<span class="hljs-keyword">const</span> isValid = <span class="hljs-keyword">function</span>(<span class="hljs-params">s</span>) {
  <span class="hljs-comment">// ç»“åˆé¢˜æ„ï¼Œç©ºå­—ç¬¦ä¸²æ— æ¡ä»¶åˆ¤æ–­ä¸º true</span>
  <span class="hljs-keyword">if</span> (!s) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  <span class="hljs-comment">// åˆå§‹åŒ– stack æ•°ç»„</span>
  <span class="hljs-keyword">const</span> stack = [];
  <span class="hljs-comment">// ç¼“å­˜å­—ç¬¦ä¸²é•¿åº¦</span>
  <span class="hljs-keyword">const</span> len = s.<span class="hljs-property">length</span>;
  <span class="hljs-comment">// éå†å­—ç¬¦ä¸²</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
    <span class="hljs-comment">// ç¼“å­˜å•ä¸ªå­—ç¬¦</span>
    <span class="hljs-keyword">const</span> ch = s[i];
    <span class="hljs-comment">// åˆ¤æ–­æ˜¯å¦æ˜¯å·¦æ‹¬å·ï¼Œè¿™é‡Œæˆ‘ä¸ºäº†å®ç°åŠ é€Ÿï¼Œæ²¡æœ‰ç”¨æ•°ç»„çš„ includes æ–¹æ³•ï¼Œç›´æ¥æ‰‹å†™åˆ¤æ–­é€»è¾‘</span>
    <span class="hljs-keyword">if</span> (ch === <span class="hljs-string">"("</span> || ch === <span class="hljs-string">"{"</span> || ch === <span class="hljs-string">"["</span>) stack.<span class="hljs-title function_">push</span>(leftToRight[ch]);
    <span class="hljs-comment">// è‹¥ä¸æ˜¯å·¦æ‹¬å·ï¼Œåˆ™å¿…é¡»æ˜¯å’Œæ ˆé¡¶çš„å·¦æ‹¬å·ç›¸é…å¯¹çš„å³æ‹¬å·</span>
    <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// è‹¥æ ˆä¸ºç©ºï¼Œæˆ–æ ˆé¡¶çš„å·¦æ‹¬å·æ²¡æœ‰å’Œå½“å‰å­—ç¬¦åŒ¹é…ä¸Šï¼Œé‚£ä¹ˆåˆ¤ä¸ºæ— æ•ˆ</span>
      <span class="hljs-keyword">if</span> (!stack.<span class="hljs-property">length</span> || stack.<span class="hljs-title function_">pop</span>() !== ch) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
    }
  }
  <span class="hljs-comment">// è‹¥æ‰€æœ‰çš„æ‹¬å·éƒ½èƒ½é…å¯¹æˆåŠŸï¼Œé‚£ä¹ˆæœ€åæ ˆåº”è¯¥æ˜¯ç©ºçš„</span>
  <span class="hljs-keyword">return</span> !stack.<span class="hljs-property">length</span>;
};


</code></pre>
<h2 data-id="heading-11">æ ˆé—®é¢˜è¿›é˜¶-æ¯æ—¥æ¸©åº¦é—®é¢˜</h2>
<blockquote>
<p>é¢˜ç›®æè¿°: æ ¹æ®æ¯æ—¥æ°”æ¸©åˆ—è¡¨ï¼Œè¯·é‡æ–°ç”Ÿæˆä¸€ä¸ªåˆ—è¡¨ï¼Œå¯¹åº”ä½ç½®çš„è¾“å‡ºæ˜¯éœ€è¦å†ç­‰å¾…å¤šä¹…æ¸©åº¦æ‰ä¼šå‡é«˜è¶…è¿‡è¯¥æ—¥çš„å¤©æ•°ã€‚å¦‚æœä¹‹åéƒ½ä¸ä¼šå‡é«˜ï¼Œè¯·åœ¨è¯¥ä½ç½®ç”¨Â 0 æ¥ä»£æ›¿ã€‚</p>
</blockquote>
<blockquote>
<p>ä¾‹å¦‚ï¼Œç»™å®šä¸€ä¸ªåˆ—è¡¨Â temperatures = [73, 74, 75, 71, 69, 72, 76, 73]ï¼Œä½ çš„è¾“å‡ºåº”è¯¥æ˜¯Â [1, 1, 4, 2, 1, 1, 0, 0]ã€‚</p>
</blockquote>
<blockquote>
<p>æç¤ºï¼šæ°”æ¸© åˆ—è¡¨é•¿åº¦çš„èŒƒå›´æ˜¯Â [1, 30000]ã€‚æ¯ä¸ªæ°”æ¸©çš„å€¼çš„å‡ä¸ºåæ°åº¦ï¼Œéƒ½æ˜¯åœ¨Â [30, 100]Â èŒƒå›´å†…çš„æ•´æ•°ã€‚</p>
</blockquote>
<h3 data-id="heading-12">æ€è·¯åˆ†æ</h3>
<p>çœ‹åˆ°è¿™é“é¢˜ï¼Œå¤§å®¶ä¸éš¾æƒ³åˆ°æš´åŠ›éå†æ³•ï¼šç›´æ¥ä¸¤å±‚éå†ï¼Œç¬¬ä¸€å±‚å®šä½ä¸€ä¸ªæ¸©åº¦ï¼Œç¬¬äºŒå±‚å®šä½ç¦»è¿™ä¸ªæ¸©åº¦æœ€è¿‘çš„ä¸€æ¬¡å‡æ¸©æ˜¯å“ªå¤©ï¼Œç„¶åæ±‚å‡ºä¸¤ä¸ªæ¸©åº¦å¯¹åº”ç´¢å¼•çš„å·®å€¼å³å¯ã€‚</p>
<p>ä¸€ä¸ªæ•°ç»„ä¸¤å±‚éå†ï¼Œå±äºæ¯”è¾ƒå°‘è§ä¸”é«˜å±çš„æ“ä½œã€‚äº‹å‡ºåå¸¸å¿…æœ‰å¦–ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦åæ€ï¼šè¿™é“é¢˜æ˜¯ä¸æ˜¯å‹æ ¹ä¸è¯¥ç”¨æš´åŠ›éå†æ¥åšï¼Ÿ</p>
<p>ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚å› ä¸ºåœ¨è¿™ä¸ªæš´åŠ›éå†çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å…¶å®åšäº†å¾ˆå¤šâ€œå¤šä½™â€çš„äº‹æƒ…ã€‚</p>
<p>æ‹¿ç¬¬ä¸‰ä¸ªç´¢å¼•ä½ä¸Šè¿™ä¸ª 75 æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨å®šä½æ¯” 75 é«˜çš„ç¬¬ä¸€ä¸ªæ¸©åº¦çš„è¿‡ç¨‹ä¸­ï¼Œå°±è·¯è¿‡äº† 71ã€69ã€72 è¿™ä¸‰ä¸ªæ¸©åº¦ï¼Œå…¶ä¸­ï¼Œ72 æ­£æ˜¯ 71 å¯¹åº”çš„ç›®æ ‡æ¸©åº¦ï¼Œå¯æˆ‘ä»¬å´åƒæ²¡çœ‹è§å®ƒä¸€æ ·ã€å•¥ä¹Ÿæ²¡å¹²ã€‚åªæœ‰ç­‰æœ€å¤–å±‚éå†èµ°åˆ° 71 æ—¶ï¼Œæˆ‘ä»¬æ‰åˆé‡å¤äº†ä¸€éåˆšåˆšèµ°è¿‡çš„è·¯ã€ç¡®è®¤äº† 71 å’Œ 72 ä¹‹é—´çš„å…³ç³»â€”â€”åƒè¿™ç§ä¸å¿…è¦çš„é‡å¤ï¼Œæˆ‘ä»¬è¦æƒ³åŠæ³•æŠŠå®ƒå¹²æ‰ã€‚</p>
<p><strong>æ ˆç»“æ„å¯ä»¥å¸®æˆ‘ä»¬é¿å…é‡å¤æ“ä½œ</strong>ã€‚<br/>
é¿å…é‡å¤æ“ä½œçš„ç§˜è¯€å°±æ˜¯<strong>åŠæ—¶åœ°å°†ä¸å¿…è¦çš„æ•°æ®å‡ºæ ˆ</strong>ï¼Œé¿å…å®ƒå¯¹æˆ‘ä»¬åç»­çš„éå†äº§ç”Ÿå¹²æ‰°ã€‚</p>
<p>æ‹¿è¿™é“é¢˜æ¥è¯´ï¼Œæˆ‘ä»¬çš„æ€è·¯å°±æ˜¯ï¼š<strong>å°è¯•å»ç»´æŒä¸€ä¸ªé€’å‡æ ˆ</strong>ã€‚<br/>
å½“éå†è¿‡çš„æ¸©åº¦ï¼Œç»´æŒçš„æ˜¯ä¸€ä¸ª<strong>å•è°ƒé€’å‡</strong>çš„æ€åŠ¿æ—¶ï¼Œæˆ‘ä»¬å°±å¯¹è¿™äº›æ¸©åº¦çš„ç´¢å¼•ä¸‹æ ‡æ‰§è¡Œå…¥æ ˆæ“ä½œï¼›åªè¦å‡ºç°äº†ä¸€ä¸ªæ•°å­—ï¼Œå®ƒæ‰“ç ´äº†è¿™ç§å•è°ƒé€’å‡çš„è¶‹åŠ¿ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæ¯”å‰ä¸€ä¸ªæ¸©åº¦å€¼é«˜ï¼Œè¿™æ—¶æˆ‘ä»¬å°±å¯¹å‰åä¸¤ä¸ªæ¸©åº¦çš„ç´¢å¼•ä¸‹æ ‡æ±‚å·®ï¼Œå¾—å‡ºå‰ä¸€ä¸ªæ¸©åº¦è·ç¦»ç¬¬ä¸€æ¬¡å‡æ¸©çš„ç›®æ ‡å·®å€¼ã€‚è¿™ä¹ˆè¯´å¯èƒ½æœ‰ç‚¹æŠ½è±¡ï¼Œæˆ‘ä»¬ç”¨ä¸€å¼ åŠ¨å›¾æ¥ç†è§£ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼ˆè¿™ä¸ªè¿‡ç¨‹å®é™…æœ‰å°†è¿‘ä¸€åˆ†é’Ÿé‚£ä¹ˆé•¿ï¼Œè´´ä¸Šæ¥ä¹‹åæˆ‘å‘ç°å®Œå…¨åŠ è½½ä¸å‡ºæ¥ï¼Œè¿™é‡Œå‘ˆç°çš„æ˜¯æˆªæ­¢åˆ°ç¬¬ä¸€ä¸ªå…ƒç´ å‡ºæ ˆçš„ç‰‡æ®µï¼Œå®Œæ•´çš„è§†é¢‘æˆ‘è¿™è¾¹ä¸Šä¼ åˆ°äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV12t4y1274o%2F" target="_blank" title="https://www.bilibili.com/video/BV12t4y1274o/" ref="nofollow noopener noreferrer">å°ç ´ç«™</a>ï¼‰ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/14/17177748909c5571~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1209&amp;h=606&amp;s=1089377&amp;e=gif&amp;f=89" alt="æ¸©åº¦é—®é¢˜çš„åŠ¨ç”»" loading="lazy"/></p>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä»…å¯¹æ¯ä¸€ä¸ªæ¸©åº¦æ‰§è¡Œæœ€å¤šä¸€æ¬¡å…¥æ ˆæ“ä½œã€ä¸€æ¬¡å‡ºæ ˆæ“ä½œï¼Œæ•´ä¸ªæ•°ç»„åªä¼šè¢«éå†ä¸€æ¬¡ï¼Œå› æ­¤æ—¶é—´å¤æ‚åº¦å°±æ˜¯O(n)ã€‚ç›¸å¯¹äºä¸¤æ¬¡éå†å¸¦æ¥çš„ O(n^2)çš„å¼€é”€æ¥çœ‹ï¼Œæ ˆç»“æ„çœŸæ˜¯å¸®äº†å’±ä»¬å¤§å¿™äº†ã€‚</p>
<h3 data-id="heading-13">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">T</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number[]</span>}
 */</span>
<span class="hljs-comment">// å…¥å‚æ˜¯æ¸©åº¦æ•°ç»„</span>
<span class="hljs-keyword">const</span> dailyTemperatures = <span class="hljs-keyword">function</span>(<span class="hljs-params">T</span>) {
    <span class="hljs-keyword">const</span> len = T.<span class="hljs-property">length</span> <span class="hljs-comment">// ç¼“å­˜æ•°ç»„çš„é•¿åº¦ </span>
    <span class="hljs-keyword">const</span> stack = [] <span class="hljs-comment">// åˆå§‹åŒ–ä¸€ä¸ªæ ˆ   </span>
    <span class="hljs-keyword">const</span> res = (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(len)).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>) <span class="hljs-comment">//  åˆå§‹åŒ–ç»“æœæ•°ç»„ï¼Œæ³¨æ„æ•°ç»„å®šé•¿ï¼Œå ä½ä¸º0</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;len;i++) {
      <span class="hljs-comment">// è‹¥æ ˆä¸ä¸º0ï¼Œä¸”å­˜åœ¨æ‰“ç ´é€’å‡è¶‹åŠ¿çš„æ¸©åº¦å€¼</span>
      <span class="hljs-keyword">while</span>(stack.<span class="hljs-property">length</span> &amp;&amp; T[i] &gt; T[stack[stack.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>]]) {
        <span class="hljs-comment">// å°†æ ˆé¡¶æ¸©åº¦å€¼å¯¹åº”çš„ç´¢å¼•å‡ºæ ˆ</span>
        <span class="hljs-keyword">const</span> top = stack.<span class="hljs-title function_">pop</span>()  
        <span class="hljs-comment">// è®¡ç®— å½“å‰æ ˆé¡¶æ¸©åº¦å€¼ä¸ç¬¬ä¸€ä¸ªé«˜äºå®ƒçš„æ¸©åº¦å€¼ çš„ç´¢å¼•å·®å€¼</span>
        res[top] = i - top 
      }
      <span class="hljs-comment">// æ³¨æ„æ ˆé‡Œå­˜çš„ä¸æ˜¯æ¸©åº¦å€¼ï¼Œè€Œæ˜¯ç´¢å¼•å€¼ï¼Œè¿™æ˜¯ä¸ºäº†åé¢æ–¹ä¾¿è®¡ç®—</span>
      stack.<span class="hljs-title function_">push</span>(i)
    }
    <span class="hljs-comment">// è¿”å›ç»“æœæ•°ç»„</span>
    <span class="hljs-keyword">return</span> res 
};

</code></pre>
<h2 data-id="heading-14">æ ˆçš„è®¾è®¡â€”â€”â€œæœ€å°æ ˆâ€é—®é¢˜</h2>
<blockquote>
<p>é¢˜ç›®æè¿°ï¼šè®¾è®¡ä¸€ä¸ªæ”¯æŒ push ï¼Œpop ï¼Œtop æ“ä½œï¼Œå¹¶èƒ½åœ¨å¸¸æ•°æ—¶é—´å†…æ£€ç´¢åˆ°æœ€å°å…ƒç´ çš„æ ˆã€‚</p>
</blockquote>
<blockquote>
<p>push(x) â€”â€” å°†å…ƒç´  x æ¨å…¥æ ˆä¸­ã€‚<br/>
pop()Â â€”â€” åˆ é™¤æ ˆé¡¶çš„å…ƒç´ ã€‚<br/>
top()Â â€”â€” è·å–æ ˆé¡¶å…ƒç´ ã€‚<br/>
getMin() â€”â€” æ£€ç´¢æ ˆä¸­çš„æœ€å°å…ƒç´ ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹:<br/>
MinStack minStack = new MinStack();<br/>
minStack.push(-2);<br/>
minStack.push(0);<br/>
minStack.push(-3);<br/>
minStack.getMin();   --&gt; è¿”å› -3.<br/>
minStack.pop();<br/>
minStack.top();      --&gt; è¿”å› 0.<br/>
minStack.getMin();   --&gt; è¿”å› -2.</p>
</blockquote>
<h3 data-id="heading-15">æ€è·¯åˆ†æ</h3>
<p>è¿™é“é¢˜å¹¶ä¸éš¾ï¼Œä½†æ˜¯ç»¼åˆæ€§å¾ˆå¼ºï¼Œæ•´ä¸ªé¢˜åšä¸‹æ¥èƒ½å¤Ÿç›¸å¯¹å…¨é¢åœ°è€ƒå¯Ÿåˆ°å€™é€‰äººå¯¹æ ˆç»“æ„ã€æ ˆæ“ä½œçš„ç†è§£å’ŒæŒæ¡ï¼Œæ˜¯ä¸å°‘ä¸€é¢/å°‘æ•°äºŒé¢é¢è¯•å®˜çš„å¿ƒå¤´å¥½ã€‚</p>
<p>å…¶ä¸­å‰ä¸‰ä¸ªæ“ä½œï¼š<code>push</code>ã€<code>pop</code> å’Œ <code>top</code>ï¼Œæˆ‘ä»¬åœ¨æ•°æ®ç»“æ„å¿«é€Ÿä¸Šæ‰‹ç¯èŠ‚å·²ç»ç»™å¤§å®¶è®²è¿‡äº†ï¼Œè¿™é‡Œä¸å¤šèµ˜è¿°ã€‚éœ€è¦å±•å¼€è®²çš„æ˜¯ <code>getMin</code> è¿™ä¸ªæ¥å£ï¼Œè¿™ä¸ªæ¥å£æœ‰æ—¶å€™ä¼šç›´æ¥å•ç‹¬æ‹å‡ºæ¥ä½œä¸ºä¸€é“é¢˜æ¥è€ƒå¯Ÿï¼Œéœ€è¦å¤§å®¶å¯¹å®ƒçš„å®ç°æ€è·¯æœ‰ä¸€ä¸ªçœŸæ­£æ‰å®çš„æŒæ¡ã€‚</p>
<p><code>getMin</code> è¦åšçš„äº‹æƒ…ï¼Œæ˜¯ä»ä¸€ä¸ªæ ˆé‡Œæ‰¾å‡ºå…¶ä¸­æœ€å°çš„æ•°å­—ã€‚æˆ‘ä»¬ä»ç„¶æ˜¯æŠ›ç –å¼•ç‰ï¼Œå…ˆè¯´ä¸€ä¸ªå¤§éƒ¨åˆ†äººéƒ½èƒ½æƒ³åˆ°çš„æ€è·¯ï¼š</p>
<p>åˆå§‹åŒ–ä¸€ä¸ªæœ€å°å€¼å˜é‡ï¼Œå®ƒçš„åˆå§‹å€¼å¯ä»¥è®¾ä¸€ä¸ªéå¸¸å¤§çš„æ•°ï¼ˆæ¯”å¦‚ <code>Infinity</code>ï¼‰ï¼Œç„¶åå¼€å§‹éå†æ•´ä¸ªæ ˆã€‚åœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°äº†æ›´å°çš„å€¼ï¼Œå°±æŠŠæœ€å°å€¼å˜é‡æ›´æ–°ä¸ºè¿™ä¸ªæ›´å°çš„å€¼ã€‚è¿™æ ·éå†ç»“æŸåï¼Œæˆ‘ä»¬å°±èƒ½æ‹¿åˆ°æ ˆä¸­çš„æœ€å°å€¼äº†ã€‚<br/>
è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¯¹æ ˆè¿›è¡Œäº†ä¸€æ¬¡éå†ï¼Œæ—¶é—´å¤æ‚åº¦æ— ç–‘æ˜¯ <code>O(n)</code>ã€‚</p>
<p>æŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œæ•´ä¸ªæ ˆçš„è®¾è®¡æˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š</p>
<h3 data-id="heading-16">ç¼–ç å®ç°1</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * åˆå§‹åŒ–ä½ çš„æ ˆç»“æ„
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MinStack</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span> = []
};

<span class="hljs-comment">/** 
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">x</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">void</span>}
 */</span>
<span class="hljs-comment">// æ ˆçš„å…¥æ ˆæ“ä½œï¼Œå…¶å®å°±æ˜¯æ•°ç»„çš„ push æ–¹æ³•</span>
<span class="hljs-title class_">MinStack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">push</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">push</span>(x)
};

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">void</span>}
 */</span>
<span class="hljs-comment">// æ ˆçš„å…¥æ ˆæ“ä½œï¼Œå…¶å®å°±æ˜¯æ•°ç»„çš„ pop æ–¹æ³•</span>
<span class="hljs-title class_">MinStack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">pop</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">pop</span>()
};

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number</span>}
 */</span>
<span class="hljs-comment">// å–æ ˆé¡¶å…ƒç´ ï¼Œå’±ä»¬æ•™è¿‡çš„å“ˆï¼Œè¿™é‡Œæˆ‘æœ¬èƒ½åœ°ç»™å®ƒä¸€ä¸ªè¾¹ç•Œæ¡ä»¶åˆ¤æ–­ï¼ˆå…¶å®ä¸ç»™ä¹Ÿèƒ½é€šè¿‡ï¼Œä½†æ˜¯å¤šåšä¸é”™å“ˆï¼‰</span>
<span class="hljs-title class_">MinStack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">top</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span>(!<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span> || !<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-property">length</span>) {
      <span class="hljs-keyword">return</span> 
  }
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]
};

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number</span>}
 */</span>
<span class="hljs-comment">// æŒ‰ç…§ä¸€æ¬¡éå†çš„æ€è·¯å–æœ€å°å€¼</span>
<span class="hljs-title class_">MinStack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getMin</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> minValue = <span class="hljs-title class_">Infinity</span>  
    <span class="hljs-keyword">const</span>  { stack } = <span class="hljs-variable language_">this</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>; i&lt;stack.<span class="hljs-property">length</span>;i++) {
        <span class="hljs-keyword">if</span>(stack[i] &lt; minValue) {
            minValue = stack[i]
        }
    }
    <span class="hljs-keyword">return</span> minValue
};
</code></pre>
<p>è¿™æ ·å†™ï¼Œç”¨ä¾‹ä¹Ÿèƒ½è·‘é€šï¼Œä½†æ˜¯ä¸å¤Ÿé…·ã€‚å¦‚æœä½ åœ¨é¢è¯•æ—¶è¿™æ ·åšäº†ï¼Œé¢è¯•å®˜æœ‰99%çš„å¯èƒ½æ€§ä¼šè¿½é—®ä½ è¿™å¥ï¼š</p>
<p>â€œè¿™é“é¢˜æœ‰æ²¡æœ‰æ—¶é—´æ•ˆç‡æ›´é«˜çš„åšæ³•ï¼Ÿâ€</p>
<p>äººå®¶éƒ½è¿™æ ·é—®äº†ï¼Œå’±å½“ç„¶è¦è¯´â€œæœ‰â€ã€‚ç„¶åï¼Œé¢è¯•å®˜å°±ä¼šæ¬ä¸ªå°æ¿å‡³ï¼Œåä½ æ—è¾¹çœ‹ä½ å¦‚ä½•å¦™æ‰‹å›æ˜¥ï¼Œå˜ <code>O(n)</code> ä¸º <code>O(1)</code>ã€‚</p>
<p>æ—¶é—´æ•ˆç‡çš„æå‡ï¼Œä»æ¥éƒ½ä¸æ˜¯ç™½å«–ï¼Œå®ƒæ„å‘³ç€æˆ‘ä»¬è¦ä»˜å‡ºæ›´å¤šçš„ç©ºé—´å ç”¨ä½œä¸ºä»£ä»·ã€‚åœ¨è¿™é“é¢˜é‡Œï¼Œå¦‚æœç»§ç»­æ²¿ç€æ ˆçš„æ€è·¯å¾€ä¸‹èµ°ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å†æä¸ªæ ˆï¼ˆ<code>stack2</code>ï¼‰å‡ºæ¥ä½œä¸ºè¾…åŠ©ï¼Œè®©è¿™ä¸ªæ ˆå»å®¹çº³å½“å‰çš„æœ€å°å€¼ã€‚</p>
<p>å¦‚ä½•ç¡®ä¿ <code>stack2</code> èƒ½å¤Ÿç¡®åˆ‡åœ°ç»™æˆ‘ä»¬æä¾›æœ€å°å€¼ï¼Ÿ è¿™é‡Œæˆ‘ä»¬éœ€è¦å®ç°çš„æ˜¯ä¸€ä¸ªä»<code>æ ˆåº•åˆ°æ ˆé¡¶å‘ˆé€’å‡è¶‹åŠ¿çš„æ ˆ</code>ï¼ˆæ•²é»‘æ¿ï¼é€’å‡æ ˆå‡ºç°ç¬¬äºŒæ¬¡äº†å“ˆï¼‰ï¼š</p>
<ul>
<li>å–æœ€å°å€¼ï¼šç”±äºæ•´ä¸ªæ ˆä»æ ˆåº•åˆ°æ ˆé¡¶é€’å‡ï¼Œå› æ­¤æ ˆé¡¶å…ƒç´ å°±æ˜¯æœ€å°å…ƒç´ ã€‚</li>
<li>è‹¥æœ‰æ–°å…ƒç´ å…¥æ ˆï¼šåˆ¤æ–­æ˜¯ä¸æ˜¯æ¯”æ ˆé¡¶å…ƒç´ è¿˜è¦å°ï¼Œå¦åˆ™ä¸å‡†è¿›å…¥ <code>stack2</code>ã€‚</li>
<li>è‹¥æœ‰å…ƒç´ å‡ºæ ˆï¼šåˆ¤æ–­æ˜¯ä¸æ˜¯å’Œæ ˆé¡¶å…ƒç´ ç›¸ç­‰ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œ<code>stack2</code> ä¹Ÿè¦å‡ºæ ˆã€‚</li>
</ul>
<p>æŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰ä»¥ä¸‹ç¼–ç ï¼š</p>
<h3 data-id="heading-17">ç¼–ç å®ç°2</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">MinStack</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span> = [];
    <span class="hljs-comment">// å®šä¹‰è¾…åŠ©æ ˆ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span> = [];
};

<span class="hljs-comment">/** 
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">x</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">void</span>}
 */</span>
<span class="hljs-title class_">MinStack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">push</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">push</span>(x);
    <span class="hljs-comment">// è‹¥å…¥æ ˆçš„å€¼å°äºå½“å‰æœ€å°å€¼ï¼Œåˆ™æ¨å…¥è¾…åŠ©æ ˆæ ˆé¡¶</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span>.<span class="hljs-property">length</span> == <span class="hljs-number">0</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>] &gt;= x){
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span>.<span class="hljs-title function_">push</span>(x);
    }
};

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">void</span>}
 */</span>
<span class="hljs-title class_">MinStack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">pop</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è‹¥å‡ºæ ˆçš„å€¼å’Œå½“å‰æœ€å°å€¼ç›¸ç­‰ï¼Œé‚£ä¹ˆè¾…åŠ©æ ˆä¹Ÿè¦å¯¹æ ˆé¡¶å…ƒç´ è¿›è¡Œå‡ºæ ˆï¼Œç¡®ä¿æœ€å°å€¼çš„æœ‰æ•ˆæ€§</span>
    <span class="hljs-keyword">if</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">pop</span>() == <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>]){
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span>.<span class="hljs-title function_">pop</span>();
    }
};

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number</span>}
 */</span>
<span class="hljs-title class_">MinStack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">top</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>];
};

<span class="hljs-comment">/**
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number</span>}
 */</span>
<span class="hljs-title class_">MinStack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getMin</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è¾…åŠ©æ ˆçš„æ ˆé¡¶ï¼Œå­˜çš„å°±æ˜¯ç›®æ ‡ä¸­çš„æœ€å°å€¼</span>
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span>.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>];
};
</code></pre>
<p>ï¼ˆé˜…è¯»è¿‡ç¨‹ä¸­æœ‰ä»»ä½•æƒ³æ³•æˆ–ç–‘é—®ï¼Œæˆ–è€…å•çº¯å¸Œæœ›å’Œç¬”è€…äº¤ä¸ªæœ‹å‹å•¥çš„ï¼Œæ¬¢è¿å¤§å®¶æ·»åŠ æˆ‘çš„å¾®ä¿¡xyalinodeä¸æˆ‘äº¤æµå“ˆ~ï¼‰
ç»“æŸäº†é’ˆå¯¹æ ˆç»“æ„çš„å®šç‚¹è½°ç‚¸ï¼Œæˆ‘ä»¬ç°åœ¨å¼€å§‹è¦ç¼“ç¼“è¿‡æ¸¡åˆ°é˜Ÿåˆ—çš„ä¸–ç•Œäº†ã€‚</p>
<p>å…³äºé˜Ÿåˆ—ï¼Œåœ¨ç®—æ³•é¢è¯•ä¸­å¤§å®¶éœ€è¦æŒæ¡ä»¥ä¸‹é‡ç‚¹ï¼š</p>
<ol>
<li>æ ˆå‘é˜Ÿåˆ—çš„è½¬åŒ–</li>
<li>åŒç«¯é˜Ÿåˆ—</li>
<li>ä¼˜å…ˆé˜Ÿåˆ—</li>
</ol>
<p>ä»¥ä¸Šè€ƒç‚¹ä¸­ï¼Œ1 å±äºåŸºç¡€éš¾åº¦ï¼Œ 2 å¯¹ä¸€éƒ¨åˆ†åŒå­¦æ¥è¯´å·²ç»æœ‰ç‚¹åƒåŠ›ï¼Œ3 çš„åŒºåˆ†åº¦æœ€é«˜â€”â€”ä¼˜å…ˆé˜Ÿåˆ—å±äºé«˜çº§æ•°æ®ç»“æ„ï¼Œå…¶æœ¬è´¨æ˜¯äºŒå‰å †ç»“æ„ï¼Œè€ƒè™‘åˆ°ç›¸å…³é¢˜ç›®å…·æœ‰è¾ƒå¼ºçš„ç»¼åˆæ€§ï¼Œæˆ‘ä»¬æŠŠå®ƒæ”¾åœ¨å°å†ŒäºŒå‰æ ‘å’Œå †ç›¸å…³çš„ä¸“é¢˜æ¥å±•å¼€ã€‚åœ¨æœ¬èŠ‚ï¼Œæˆ‘ä»¬é›†ä¸­ç«åŠ›å‘å‰ä¸¤ä¸ªå‘½é¢˜ç‚¹å¼€ç‚®ã€‚</p>
<h2 data-id="heading-18">ä¸ºä»€ä¹ˆä¸€é“é¢˜å¯ä»¥æˆä¸ºé«˜é¢‘é¢è¯•é¢˜</h2>
<p>å¦‚ä½•ç”¨æ ˆå®ç°é˜Ÿåˆ—ï¼Ÿè¿™ä¸ªé—®é¢˜åœ¨è¿‘å‡ å¹´çš„ç®—æ³•é¢è¯•ä¸­çƒ­åº¦éå¸¸é«˜ã€‚</p>
<p>æ‰€è°“â€œçƒ­åº¦â€ä»ä½•è€Œæ¥ï¼Ÿè¿™é‡Œå°±å¼•å‡ºäº†ä¸€ä¸ªéå¸¸æœ‰è¶£çš„è¯é¢˜ï¼šï¼ˆåœ¨å‰ç«¯ç®—æ³•é¢è¯•ä¸­ï¼‰<strong>ä»€ä¹ˆæ ·çš„é¢˜ç›®æ˜¯å¥½é¢˜</strong>ï¼Ÿ</p>
<p>é¦–å…ˆï¼Œä¸èƒ½å‰‘èµ°åé”‹ï¼šå¥½çš„é¢è¯•é¢˜ï¼Œå®ƒè€ƒå¯Ÿçš„å¤§å¤šæ˜¯ç®—æ³•/æ•°æ®ç»“æ„ä¸­æœ€ç»å…¸ã€æœ€å…³é”®çš„ä¸€éƒ¨åˆ†å†…å®¹ï¼Œè¿™æ ·æ‰èƒ½ä½“ç°å…¬å¹³ï¼›å…¶æ¬¡ï¼Œå®ƒçš„çŸ¥è¯†ç‚¹è¦å°½å¯èƒ½å¯†é›†ã€é¢˜ç›®æœ¬èº«è¦å°½å¯èƒ½å…·å¤‡ç»¼åˆæ€§ï¼Œè¿™æ ·æ‰èƒ½ä¸€ç®­åŒé›•ç”šè‡³ä¸€ç®­Né›•ï¼Œè¿›è€Œä½“ç°åŒºåˆ†åº¦ã€æœ€å¤§åŒ–é¢è¯•è¿‡ç¨‹çš„æ•ˆç‡ã€‚</p>
<p>èƒ½å¤ŸåŒæ—¶åœ¨è¿™ä¸¤ä¸ªæ–¹é¢å å°½ä¼˜åŠ¿çš„è€ƒé¢˜å…¶å®å¹¶ä¸æ˜¯å¾ˆå¤šï¼Œâ€œ<strong>ç”¨æ ˆå®ç°é˜Ÿåˆ—</strong>â€è¿™æ ·çš„é—®é¢˜ç®—æ˜¯å…¶ä¸­çš„ä½¼ä½¼è€…ï¼šä¸€æ–¹é¢ï¼Œå®ƒè€ƒå¯Ÿçš„ç¡®å®æ˜¯æ•°æ®ç»“æ„ä¸­çš„ç»å…¸å†…å®¹ï¼›å¦ä¸€æ–¹é¢ï¼Œå®ƒåˆè¦†ç›–äº†ä¸¤ä¸ªå¤§çš„çŸ¥è¯†ç‚¹ã€è¶³ä»¥æ£€éªŒå‡ºå€™é€‰äººç¼–ç åŸºæœ¬åŠŸçš„æ‰å®ç¨‹åº¦ã€‚å”¯ä¸€çš„ BUG å¯èƒ½å°±æ˜¯æ·±åº¦å’Œå¤æ‚åº¦ä¸å¤Ÿï¼Œæ¢å¥è¯è¯´å°±æ˜¯ä¸å¤Ÿéš¾ã€‚</p>
<p>è¿™ä¸ªç‰¹ç‚¹ï¼Œåœ¨æ™®é€šç®—æ³•é¢è¯•ä¸­å¯èƒ½æ˜¯ BUGï¼Œä½†åœ¨å‰ç«¯ç®—æ³•é¢è¯•ä¸­ï¼Œå®åœ¨æœªå¿…ã€‚å¤§å®¶è¦çŸ¥é“ï¼Œä½ æ˜¯å‰ç«¯ï¼Œä½ çš„é¢è¯•å®˜ä¹Ÿæ˜¯å‰ç«¯ï¼Œå‰ç«¯è¡Œä¸šæ™®éçš„ç®—æ³•æ°´å¹³æ˜¯å•¥æ ·ä»–å¿ƒé‡Œè¿˜æ²¡ä¸ªæ•°å—...... å®é™…ä¸Šå¤§å¤šæ•°å‰ç«¯ç®—æ³•é¢è¯•é¢˜çš„é£æ ¼éƒ½æ˜¯éå¸¸åŠ¡å®çš„ï¼Œéœ€è¦ä½ ç‚«æŠ€çš„å®å±ç‰¹æ®Šæƒ…å†µã€‚</p>
<h2 data-id="heading-19">å¦‚ä½•ç”¨æ ˆå®ç°ä¸€ä¸ªé˜Ÿåˆ—ï¼Ÿ</h2>
<blockquote>
<p>é¢˜ç›®æè¿°ï¼šä½¿ç”¨æ ˆå®ç°é˜Ÿåˆ—çš„ä¸‹åˆ—æ“ä½œï¼š<br/>
push(x) -- å°†ä¸€ä¸ªå…ƒç´ æ”¾å…¥é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚<br/>
pop() -- ä»é˜Ÿåˆ—é¦–éƒ¨ç§»é™¤å…ƒç´ ã€‚<br/>
peek() -- è¿”å›é˜Ÿåˆ—é¦–éƒ¨çš„å…ƒç´ ã€‚<br/>
empty() -- è¿”å›é˜Ÿåˆ—æ˜¯å¦ä¸ºç©ºã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹:
MyQueue queue = new MyQueue();<br/>
queue.push(1);<br/>
queue.push(2);<br/>
queue.peek();  // è¿”å› 1<br/>
queue.pop();   // è¿”å› 1<br/>
queue.empty(); // è¿”å› false</p>
</blockquote>
<blockquote>
<p>è¯´æ˜:</p>
<ul>
<li>ä½ åªèƒ½ä½¿ç”¨æ ‡å‡†çš„æ ˆæ“ä½œ -- ä¹Ÿå°±æ˜¯åªæœ‰Â push to top,Â peek/pop from top,Â size, å’ŒÂ is emptyÂ æ“ä½œæ˜¯åˆæ³•çš„ã€‚</li>
<li>ä½ æ‰€ä½¿ç”¨çš„è¯­è¨€ä¹Ÿè®¸ä¸æ”¯æŒæ ˆã€‚ä½ å¯ä»¥ä½¿ç”¨ list æˆ–è€… dequeï¼ˆåŒç«¯é˜Ÿåˆ—ï¼‰æ¥æ¨¡æ‹Ÿä¸€ä¸ªæ ˆï¼Œåªè¦æ˜¯æ ‡å‡†çš„æ ˆæ“ä½œå³å¯ã€‚</li>
<li>å‡è®¾æ‰€æœ‰æ“ä½œéƒ½æ˜¯æœ‰æ•ˆçš„ ï¼ˆä¾‹å¦‚ï¼Œä¸€ä¸ªç©ºçš„é˜Ÿåˆ—ä¸ä¼šè°ƒç”¨ pop æˆ–è€… peek æ“ä½œï¼‰ã€‚</li>
</ul>
</blockquote>
<h3 data-id="heading-20">æ€è·¯åˆ†æ</h3>
<p>åšè¿™é“é¢˜å¤§å®¶é¦–å…ˆè¦åœ¨å¿ƒé‡Œæ¸…æ¥šä¸€ä¸ªäº‹æƒ…ï¼šæ ˆå’Œé˜Ÿåˆ—çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ<br/>
ä»”ç»†æƒ³æƒ³ï¼Œæ ˆï¼Œåè¿›å…ˆå‡ºï¼›é˜Ÿåˆ—ï¼Œå…ˆè¿›å…ˆå‡ºã€‚ä¹Ÿå°±æ˜¯è¯´ä¸¤è€…çš„è¿›å‡ºé¡ºåºå…¶å®æ˜¯åè¿‡æ¥çš„ã€‚ç”¨æ ˆå®ç°é˜Ÿåˆ—ï¼Œè¯´ç™½äº†å°±æ˜¯ç”¨æ ˆå®ç°å…ˆè¿›å…ˆå‡ºçš„æ•ˆæœï¼Œå†è¯´ç›´æ¥ç‚¹ï¼Œå°±æ˜¯æƒ³åŠæ³•<strong>è®©æ ˆåº•çš„å…ƒç´ é¦–å…ˆè¢«å–å‡º</strong>ï¼Œä¹Ÿå°±æ˜¯è®©å‡ºæ ˆåºåˆ—è¢«<strong>é€†åº</strong>ã€‚<br/>
ä¹ä¸€çœ‹æœ‰ç‚¹å¤´å¤§ï¼šæ ˆç»“æ„å†³å®šäº†æ ˆåº•å…ƒç´ åªèƒ½è¢«æ­»æ­»åœ°å‹åœ¨æœ€åº•ä¸‹ï¼Œå¦‚ä½•ä½¿å®ƒé¦–å…ˆè¢«å–å‡ºå‘¢ï¼Ÿ<br/>
ä¸€ä¸ªæ ˆåšä¸åˆ°çš„äº‹æƒ…ï¼Œæˆ‘ä»¬ç”¨ä¸¤ä¸ªæ ˆæ¥åšï¼š</p>
<ul>
<li>é¦–å…ˆï¼Œå‡†å¤‡ä¸¤ä¸ªæ ˆï¼š</li>
</ul>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/171735fc8ee608ea~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=914&amp;h=722&amp;s=30040&amp;e=png" alt="" loading="lazy"/></p>
<ul>
<li>ç°åœ¨é—®é¢˜æ˜¯ï¼Œæ€ä¹ˆæŠŠç¬¬ä¸€ä¸ªæ ˆåº•ä¸‹çš„é‚£ä¸ª 1 ç»™æ’¬å‡ºæ¥ã€‚ä»”ç»†æƒ³æƒ³ï¼Œé˜»ç¢æˆ‘ä»¬æ¥è§¦åˆ° 1 çš„æ˜¯å•¥ï¼Ÿæ˜¯ä¸æ˜¯å®ƒå¤´ä¸Šçš„ 3 å’Œ 2ï¼Ÿé‚£ä¹ˆå¦‚ä½•è®© 3 å’Œ 2 ç»™ 1 è®©è·¯å‘¢ï¼Ÿå®é™…ä¸Šå’±ä»¬å®Œå…¨å¯ä»¥æŠŠè¿™ä¸‰ä¸ªå…ƒç´ æŒ‰é¡ºåºä» stack1 ä¸­å‡ºæ ˆã€ç„¶åå…¥æ ˆåˆ° stack 2 é‡Œå»ï¼š</li>
</ul>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/17173813ab3377b1~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=894&amp;h=748&amp;s=30404&amp;e=png" alt="" loading="lazy"/></p>
<ul>
<li>æ­¤æ—¶ 1 å˜å¾—è§¦æ‰‹å¯åŠã€‚ä¸ä»…å¦‚æ­¤ï¼Œä¸‹ä¸€æ¬¡æˆ‘ä»¬è¯•å›¾å‡ºé˜Ÿ 2 çš„æ—¶å€™ï¼Œå¯ä»¥ç»§ç»­ç›´æ¥å¯¹ stack2 æ‰§è¡Œå‡ºæ ˆæ“ä½œâ€”â€”å› ä¸ºè½¬ç§» 2 å’Œ 3 çš„æ—¶å€™å·²ç»åšè¿‡ä¸€æ¬¡é€†åºäº†ï¼Œæ­¤æ—¶ stack2 çš„å‡ºæ ˆåºåˆ—åˆšå¥½å°±å¯¹åº”é˜Ÿåˆ—çš„å‡ºé˜Ÿåºåˆ—ã€‚</li>
<li>æœ‰åŒå­¦ä¼šé—®ï¼Œé‚£å¦‚æœ stack1 é‡Œå…¥æ ˆæ–°å…ƒç´ æ€ä¹ˆåŠï¼Ÿæ¯”å¦‚è¿™æ ·ï¼š<br/>
<img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/13/171738289370743a~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1010&amp;h=714&amp;s=37881&amp;e=png" alt="" loading="lazy"/></li>
</ul>
<p>ä½ ä¼šå‘ç°è¿™ä¸ª4æŒ‰ç…§é¡ºåºåº”è¯¥åœ¨ 1ã€2ã€3 åå‡ºæ ˆã€‚å½“ 4 éœ€è¦è¢«å‡ºæ ˆæ—¶ï¼Œ<code>stack2</code> ä¸€å®šå·²ç»ç©ºæ‰äº†ã€‚å½“ <code>stack2</code> ä¸ºç©ºã€è€Œ <code>stack1</code> ä¸ä¸ºç©ºæ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç»§ç»­æŠŠ <code>stack1</code> ä¸­çš„å…ƒç´ è½¬ç§»åˆ° <code>stack2</code> ä¸­å»ï¼Œç„¶åå†ä» <code>stack2</code> é‡Œå–å…ƒç´ ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰çš„å‡ºé˜Ÿæ“ä½œéƒ½åªèƒ½ä¾èµ– <code>stack2</code> æ¥å®Œæˆâ€”â€”åªè¦æˆ‘ä»¬åšæŒè¿™ä¸ªåŸåˆ™ï¼Œå°±å¯ä»¥ç¡®ä¿ <code>stack1</code> é‡Œçš„å…ƒç´ éƒ½èƒ½å¤ŸæŒ‰ç…§æ­£ç¡®çš„é¡ºåºï¼ˆé€†åºï¼‰å‡ºæ ˆã€‚</p>
<p>æˆ‘ä»¬æŒ‰ç…§è¿™ä¸ªæ€è·¯æ¥å†™ä»£ç ï¼š</p>
<h3 data-id="heading-21">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * åˆå§‹åŒ–æ„é€ å‡½æ•°
 */</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyQueue</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-comment">// åˆå§‹åŒ–ä¸¤ä¸ªæ ˆ</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack1</span> = [];
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span> = [];
};

<span class="hljs-comment">/**
* Push element x to the back of queue.
* <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">x</span>
* <span class="hljs-doctag">@return</span> {<span class="hljs-type">void</span>}
*/</span>
<span class="hljs-title class_">MyQueue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">push</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">x</span>) {
  <span class="hljs-comment">// ç›´æ¥è°ƒåº¦æ•°ç»„çš„ push æ–¹æ³•</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack1</span>.<span class="hljs-title function_">push</span>(x);
};

<span class="hljs-comment">/**
* Removes the element from in front of queue and returns that element.
* <span class="hljs-doctag">@return</span> {<span class="hljs-type">number</span>}
*/</span>
<span class="hljs-title class_">MyQueue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">pop</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-comment">// å‡å¦‚ stack2 ä¸ºç©ºï¼Œéœ€è¦å°† stack1 çš„å…ƒç´ è½¬ç§»è¿›æ¥</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span>.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">0</span>) {
    <span class="hljs-comment">// å½“ stack1 ä¸ä¸ºç©ºæ—¶ï¼Œå‡ºæ ˆ</span>
    <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack1</span>.<span class="hljs-property">length</span> !== <span class="hljs-number">0</span>) {
      <span class="hljs-comment">// å°† stack1 å‡ºæ ˆçš„å…ƒç´ æ¨å…¥ stack2</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack1</span>.<span class="hljs-title function_">pop</span>());
    }
  }
  <span class="hljs-comment">// ä¸ºäº†è¾¾åˆ°é€†åºçš„ç›®çš„ï¼Œæˆ‘ä»¬åªä» stack2 é‡Œå‡ºæ ˆå…ƒç´ </span>
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span>.<span class="hljs-title function_">pop</span>();
};

<span class="hljs-comment">/**
* Get the front element.
* <span class="hljs-doctag">@return</span> {<span class="hljs-type">number</span>}
* è¿™ä¸ªæ–¹æ³•å’Œ pop å”¯ä¸€çš„åŒºåˆ«å°±æ˜¯æ²¡æœ‰å°†å®šä½åˆ°çš„å€¼å‡ºæ ˆ
*/</span>
<span class="hljs-title class_">MyQueue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">peek</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span>.<span class="hljs-property">length</span> &lt;= <span class="hljs-number">0</span>) {
    <span class="hljs-comment">// å½“ stack1 ä¸ä¸ºç©ºæ—¶ï¼Œå‡ºæ ˆ</span>
    <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack1</span>.<span class="hljs-property">length</span> != <span class="hljs-number">0</span>) {
      <span class="hljs-comment">// å°† stack1 å‡ºæ ˆçš„å…ƒç´ æ¨å…¥ stack2</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span>.<span class="hljs-title function_">push</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack1</span>.<span class="hljs-title function_">pop</span>());
    }
  }
  <span class="hljs-comment">// ç¼“å­˜ stack2 çš„é•¿åº¦</span>
  <span class="hljs-keyword">const</span> stack2Len = <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span>.<span class="hljs-property">length</span>;
  <span class="hljs-keyword">return</span> stack2Len &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span>[stack2Len - <span class="hljs-number">1</span>];
};

<span class="hljs-comment">/**
* Returns whether the queue is empty.
* <span class="hljs-doctag">@return</span> {<span class="hljs-type">boolean</span>}
*/</span>
<span class="hljs-title class_">MyQueue</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">empty</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-comment">// è‹¥ stack1 å’Œ stack2 å‡ä¸ºç©ºï¼Œé‚£ä¹ˆé˜Ÿåˆ—ç©º</span>
  <span class="hljs-keyword">return</span> !<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack1</span>.<span class="hljs-property">length</span> &amp;&amp; !<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack2</span>.<span class="hljs-property">length</span>;
};
</code></pre>
<h2 data-id="heading-22">è®¤è¯†åŒç«¯é˜Ÿåˆ—</h2>
<p>åŒç«¯é˜Ÿåˆ—è¡ç”Ÿå‡ºçš„æ»‘åŠ¨çª—å£é—®é¢˜ï¼Œæ˜¯ä¸€ä¸ªç»ä¹…ä¸è¡°çš„å‘½é¢˜çƒ­ç‚¹ã€‚å…³äºåŒç«¯é˜Ÿåˆ—ï¼Œå„ç§å„æ ·çš„è§£é‡Šäº”èŠ±å…«é—¨ï¼Œè¿™é‡Œå¤§å®¶ä¸è¦çº ç»“ï¼Œå°±è®°ä½ä¸€å¥è¯ï¼š</p>
<p><strong>åŒç«¯é˜Ÿåˆ—å°±æ˜¯å…è®¸åœ¨é˜Ÿåˆ—çš„ä¸¤ç«¯è¿›è¡Œæ’å…¥å’Œåˆ é™¤çš„é˜Ÿåˆ—</strong>ã€‚</p>
<p>ä½“ç°åœ¨ç¼–ç ä¸Šï¼Œæœ€å¸¸è§çš„è½½ä½“æ˜¯æ—¢å…è®¸ä½¿ç”¨ popã€push åŒæ—¶åˆå…è®¸ä½¿ç”¨ shiftã€unshift çš„æ•°ç»„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> queue = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>] <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªåŒç«¯é˜Ÿåˆ—   </span>
queue.<span class="hljs-title function_">push</span>(<span class="hljs-number">1</span>) <span class="hljs-comment">// åŒç«¯é˜Ÿåˆ—å°¾éƒ¨å…¥é˜Ÿ </span>
queue.<span class="hljs-title function_">pop</span>() <span class="hljs-comment">// åŒç«¯é˜Ÿåˆ—å°¾éƒ¨å‡ºé˜Ÿ   </span>
queue.<span class="hljs-title function_">shift</span>() <span class="hljs-comment">// åŒç«¯é˜Ÿåˆ—å¤´éƒ¨å‡ºé˜Ÿ </span>
queue.<span class="hljs-title function_">unshift</span>(<span class="hljs-number">1</span>) <span class="hljs-comment">// åŒç«¯é˜Ÿåˆ—å¤´éƒ¨å…¥é˜Ÿ</span>
</code></pre>
<p>ç°åœ¨ç›¸ä¿¡ä½ å¯¹åŒç«¯é˜Ÿåˆ—å·²ç»å½¢æˆäº†ä¸€ä¸ªæ„Ÿæ€§çš„è®¤çŸ¥ï¼Œå’±ä»¬ç´§æ¥ç€å°±å¼€å§‹åšé¢˜ï¼Œåœ¨é¢˜é‡Œå»è®¤çŸ¥è¿™ç§ç»“æ„çš„ç‰¹å¾å’Œæ•ˆç”¨ã€‚</p>
<h2 data-id="heading-23">æ»‘åŠ¨çª—å£é—®é¢˜</h2>
<blockquote>
<p>é¢˜ç›®æè¿°ï¼šç»™å®šä¸€ä¸ªæ•°ç»„ nums å’Œæ»‘åŠ¨çª—å£çš„å¤§å° kï¼Œè¯·æ‰¾å‡ºæ‰€æœ‰æ»‘åŠ¨çª—å£é‡Œçš„æœ€å¤§å€¼ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹:
è¾“å…¥: nums = [1,3,-1,-3,5,3,6,7], å’Œ k = 3
è¾“å‡º: [3,3,5,5,6,7]</p>
</blockquote>
<blockquote>
<p>è§£é‡Š:  æ»‘åŠ¨çª—å£çš„ä½ç½®<br/>
---------------<br/>
[1  3  -1] -3  5  3  6  7<br/>
1 [3  -1  -3] 5  3  6  7<br/>
1  3 [-1  -3  5] 3  6  7<br/>
1  3  -1 [-3  5  3] 6  7<br/>
1  3  -1  -3 [5  3  6] 7<br/>
1  3  -1  -3  5 [3  6  7]</p>
</blockquote>
<blockquote>
<p>æœ€å¤§å€¼åˆ†åˆ«å¯¹åº”ï¼š<br/>
3
3
5
5
6
7</p>
</blockquote>
<blockquote>
<p>æç¤ºï¼šä½ å¯ä»¥å‡è®¾ k æ€»æ˜¯æœ‰æ•ˆçš„ï¼Œåœ¨è¾“å…¥æ•°ç»„ä¸ä¸ºç©ºçš„æƒ…å†µä¸‹ï¼Œ1 â‰¤ k â‰¤Â è¾“å…¥æ•°ç»„çš„å¤§å°ã€‚</p>
</blockquote>
<h3 data-id="heading-24">æ€è·¯åˆ†æï¼šåŒæŒ‡é’ˆ+éå†æ³•</h3>
<p>è¿™é“é¢˜å¦‚æœåªæ˜¯ä¸ºäº†åšå¯¹ï¼Œé‚£ä¹ˆæ€è·¯å…¶å®ä¸éš¾æƒ³ï¼Œæˆ‘ä»¬ç›´æ¥æ¨¡æ‹Ÿé¢˜ä¸­æè¿°çš„è¿™ä¸ªè¿‡ç¨‹å°±è¡Œã€‚<br/>
æŒ‰ç…§é¢˜æ„ï¼Œå®ƒè¦æ±‚æˆ‘ä»¬åœ¨éå†æ•°ç»„çš„è¿‡ç¨‹å½“ä¸­ï¼Œçº¦æŸä¸€ä¸ªçª—å£â€”â€”çª—å£çš„æœ¬è´¨å…¶å®å°±æ˜¯ä¸€ä¸ªèŒƒå›´ï¼Œåƒè¿™æ ·ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">1  3  -1</span>] <span class="hljs-number">-3</span>  <span class="hljs-number">5</span>  <span class="hljs-number">3</span>  <span class="hljs-number">6</span>  <span class="hljs-number">7</span> 
</code></pre>
<p>èŒƒå›´å°±è¢«åœˆå®šåœ¨äº†å‰ä¸‰ä¸ªå…ƒç´ ã€‚<br/>
æˆ‘ä»¬å‰é¢å­¦è¿‡ï¼Œçº¦æŸèŒƒå›´ï¼Œå¯ä»¥ç”¨åŒæŒ‡é’ˆã€‚å› æ­¤æˆ‘è¿™é‡Œå®šä¹‰ä¸€ä¸ª <code>left</code> å·¦æŒ‡é’ˆã€å®šä¹‰ä¸€ä¸ª <code>right</code> å³æŒ‡é’ˆï¼Œåˆ†åˆ«æŒ‡å‘çª—å£çš„ä¸¤ç«¯å³å¯ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/19/171915c3ae13a951~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1252&amp;h=452&amp;s=27612&amp;e=png" alt="" loading="lazy"/>
æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªçª—å£é‡Œçš„æ•°å­—å–å‡ºæ¥ï¼Œç›´æ¥éå†ä¸€éã€æ±‚å‡ºæœ€å¤§å€¼ï¼Œç„¶åæŠŠæœ€å¤§å€¼å­˜è¿›ç»“æœæ•°ç»„ã€‚è¿™æ ·ç¬¬ä¸€ä¸ªçª—å£çš„æœ€å¤§å€¼å°±æœ‰äº†ã€‚</p>
<p>æ¥ç€æŒ‰ç…§é¢˜æ„ï¼Œçª—å£æ¯æ¬¡å‰è¿›ä¸€æ­¥ï¼ˆå·¦å³æŒ‡é’ˆæ¯æ¬¡ä¸€èµ·å¾€å‰èµ°ä¸€æ­¥ï¼‰ï¼Œæ­¤æ—¶çš„èŒƒå›´å˜æˆäº†è¿™æ ·ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/19/171915c9c9f694db~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1238&amp;h=462&amp;s=27669&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/>
æˆ‘ä»¬è¦åšçš„ä»ç„¶æ˜¯å–å‡ºå½“å‰èŒƒå›´çš„æ‰€æœ‰å…ƒç´ ã€éå†ä¸€éæ±‚å‡ºæœ€å¤§å€¼ï¼Œç„¶åå°†æœ€å¤§å€¼å­˜è¿›ç»“æœæ•°ç»„ã€‚</p>
<p>åå¤æ‰§è¡Œä¸Šé¢è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ•°ç»„å®Œå…¨è¢«æ»‘åŠ¨çª—å£éå†å®Œæ¯•ï¼Œæˆ‘ä»¬ä¹Ÿå°±å¾—åˆ°äº†é—®é¢˜çš„ç­”æ¡ˆã€‚</p>
<p>åŸºäºè¿™ä¸ªæ·³æœ´çš„æ€è·¯ï¼Œæˆ‘ä»¬æ¥å†™ä¸€æ³¢ä»£ç ï¼š</p>
<h3 data-id="heading-25">ç¼–ç å®ç°ï¼šåŒæŒ‡é’ˆ+éå†æ³•</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums</span>
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">k</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number[]</span>}
 */</span>
<span class="hljs-keyword">const</span> maxSlidingWindow = <span class="hljs-keyword">function</span> (<span class="hljs-params">nums, k</span>) {
  <span class="hljs-comment">// ç¼“å­˜æ•°ç»„çš„é•¿åº¦</span>
  <span class="hljs-keyword">const</span> len = nums.<span class="hljs-property">length</span>;
  <span class="hljs-comment">// å®šä¹‰ç»“æœæ•°ç»„</span>
  <span class="hljs-keyword">const</span> res = [];
  <span class="hljs-comment">// åˆå§‹åŒ–å·¦æŒ‡é’ˆ</span>
  <span class="hljs-keyword">let</span> left = <span class="hljs-number">0</span>;
  <span class="hljs-comment">// åˆå§‹åŒ–å³æŒ‡é’ˆ</span>
  <span class="hljs-keyword">let</span> right = k - <span class="hljs-number">1</span>;
  <span class="hljs-comment">// å½“æ•°ç»„æ²¡æœ‰è¢«éå†å®Œæ—¶ï¼Œæ‰§è¡Œå¾ªç¯ä½“å†…çš„é€»è¾‘</span>
  <span class="hljs-keyword">while</span> (right &lt; len) {
    <span class="hljs-comment">// è®¡ç®—å½“å‰çª—å£å†…çš„æœ€å¤§å€¼</span>
    <span class="hljs-keyword">const</span> max = <span class="hljs-title function_">calMax</span>(nums, left, right);
    <span class="hljs-comment">// å°†æœ€å¤§å€¼æ¨å…¥ç»“æœæ•°ç»„</span>
    res.<span class="hljs-title function_">push</span>(max);
    <span class="hljs-comment">// å·¦æŒ‡é’ˆå‰è¿›ä¸€æ­¥</span>
    left++;
    <span class="hljs-comment">// å³æŒ‡é’ˆå‰è¿›ä¸€æ­¥</span>
    right++;
  }
  <span class="hljs-comment">// è¿”å›ç»“æœæ•°ç»„</span>
  <span class="hljs-keyword">return</span> res;
};

<span class="hljs-comment">// è¿™ä¸ªå‡½æ•°ç”¨æ¥è®¡ç®—æœ€å¤§å€¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calMax</span>(<span class="hljs-params">arr, left, right</span>) {
  <span class="hljs-comment">// å¤„ç†æ•°ç»„ä¸ºç©ºçš„è¾¹ç•Œæƒ…å†µ</span>
  <span class="hljs-keyword">if</span> (!arr || !arr.<span class="hljs-property">length</span>) {
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-comment">// åˆå§‹åŒ– maxNum çš„å€¼ä¸ºçª—å£å†…ç¬¬ä¸€ä¸ªå…ƒç´ </span>
  <span class="hljs-keyword">let</span> maxNum = arr[left];
  <span class="hljs-comment">// éå†çª—å£å†…æ‰€æœ‰å…ƒç´ ï¼Œæ›´æ–° maxNum çš„å€¼</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = left; i &lt;= right; i++) {
    <span class="hljs-keyword">if</span> (arr[i] &gt; maxNum) {
      maxNum = arr[i];
    }
  }
  <span class="hljs-comment">// è¿”å›æœ€å¤§å€¼</span>
  <span class="hljs-keyword">return</span> maxNum;
}
</code></pre>
<h3 data-id="heading-26">è§£æ³•å¤ç›˜</h3>
<p>ä¸Šé¢è¿™ä¸ªè§£æ³•ï¼Œä½ åœ¨é¢è¯•çš„æ—¶å€™å†™ä¸Šå»ï¼Œå®Œå…¨æ²¡æœ‰é—®é¢˜ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒè¶…æ—¶ã€‚<br/>
æœ‰çš„åŒå­¦å¯èƒ½ä¼šè§‰å¾— <code>calMax</code> è¿™ä¸ªå‡½æ•°å¤šä½™äº†ï¼Œè®¤ä¸ºå¯ä»¥ç›´æ¥ç”¨ <code>Math.max</code> è¿™ä¸ª JS åŸç”Ÿæ–¹æ³•ã€‚å…¶å®å°±ç®—æ˜¯<code>Math.max</code>ï¼Œä¹Ÿä¸å¯é¿å…åœ°éœ€è¦å¯¹ä½ ä¼ å…¥çš„å¤šä¸ªæ•°å­—åšæœ€å°å€¼æŸ¥æ‰¾ï¼Œ<code>calMax</code> å’Œ<code>Math.max</code>åšçš„å·¥ä½œå¯ä»¥è¯´æ˜¯ä¸€æ ·çš„è¾›è‹¦ã€‚æˆ‘è¿™é‡Œæ‰‹åŠ¨å®ç°ä¸€ä¸ª <code>calMax</code>ï¼Œ å¤§å®¶ä¼šå¯¹æŸ¥æ‰¾è¿‡ç¨‹é€ æˆçš„æ—¶é—´å¼€é”€æœ‰æ›´ç›´è§‚çš„æ„ŸçŸ¥ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬æ¥æ€è€ƒä¸€ä¸‹ï¼Œä¸Šé¢è¿™ä¸€æ³¢æ“ä½œä¸‹æ¥ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ<br/>
è¿™æ³¢æ“ä½œé‡Œå…¶å®æ¶‰åŠäº†ä¸¤å±‚å¾ªç¯ï¼Œå¤–å±‚å¾ªç¯æ˜¯ <code>while</code>ï¼Œå®ƒå’Œæ»‘åŠ¨çª—å£å‰è¿›çš„æ¬¡æ•°æœ‰å…³ã€‚æ»‘åŠ¨çª—å£å‰è¿›äº†å¤šå°‘æ¬¡ï¼Œ<code>while</code> å°±æ‰§è¡Œäº†å¤šå°‘æ¬¡ã€‚</p>
<p>å‡è®¾æ•°ç»„çš„è§„æ¨¡æ˜¯ <code>n</code>ï¼Œé‚£ä¹ˆä»èµ·å§‹ä½ç½®å¼€å§‹ï¼Œæ»‘åŠ¨çª—å£æ¯æ¬¡èµ°ä¸€æ­¥ï¼Œä¸€å…±å¯ä»¥èµ° <code>n - k </code> æ¬¡ã€‚æ³¨æ„åˆ«å¿˜äº†åˆå§‹ä½ç½®ä¹Ÿç®—ä½œä¸€æ­¥çš„ï¼Œå› æ­¤ä¸€å…±èµ°äº† <code>n - k + 1</code>æ¬¡ã€‚ç„¶åæ¯ä¸ªçª—å£å†…éƒ¨æˆ‘ä»¬åˆä¼šå›ºå®šæ‰§è¡Œ <code>k</code> æ¬¡éå†ã€‚æ³¨æ„ <code>k</code> å¯ä¸æ˜¯ä¸ªå¸¸æ•°ï¼Œå®ƒå’Œ <code>n</code> ä¸€æ ·æ˜¯ä¸ªå˜é‡ã€‚å› æ­¤è¿™ä¸ªæ—¶é—´å¤æ‚åº¦ç®€åŒ–åç”¨å¤§ O è¡¨ç¤ºæ³•å¯ä»¥è®°ä¸º <code>O(kn)</code>ã€‚</p>
<p><code>O(kn)</code> è™½ç„¶ä¸å·®ï¼Œä½†å¯¹è¿™é“é¢˜æ¥è¯´ï¼Œè¿˜ä¸æ˜¯æœ€å¥½ã€‚å› æ­¤åœ¨é¢è¯•è¿‡ç¨‹ä¸­ï¼Œå¦‚æœä½ é‡‡ç”¨äº†ä¸Šé¢è¿™å¥—è§£æ³•åšå‡ºäº†è¿™ä¸ªé¢˜ï¼Œé¢è¯•å®˜æœ‰ 99% çš„å¯èƒ½æ€§ä¼šè¿½é—®ä½ ï¼šè¿™ä¸ªé¢˜å¯ä»¥ä¼˜åŒ–å—ï¼Ÿå¦‚ä½•ä¼˜åŒ–ï¼Ÿï¼ˆæˆ–è€…ç›´æ¥é—®ä½ ï¼Œä½ èƒ½åœ¨çº¿æ€§æ—¶é—´å¤æ‚åº¦å†…è§£å†³æ­¤é¢˜å—ï¼Ÿï¼‰</p>
<p>ç­”æ¡ˆå½“ç„¶æ˜¯èƒ½ï¼Œç„¶åé¢è¯•å®˜å°±ä¼šæ¬ä¸ªå°æ¿å‡³åä½ æ—è¾¹ï¼Œçœ‹çœ‹ä½ æ€ä¹ˆå¦™æ‰‹å›æ˜¥ï¼Œå˜ <code>O(kn)</code> ä¸º <code>O(n)</code>ã€‚</p>
<p>æ¥ä¸‹æ¥ä½ éœ€è¦è¡¨æ¼”çš„ï¼Œæ­£æ˜¯é¢è¯•å®˜æœŸå¾…å·²ä¹…çš„åŒç«¯é˜Ÿåˆ—è§£æ³•å•Šï¼</p>
<h3 data-id="heading-27">æ€è·¯åˆ†æï¼šåŒç«¯é˜Ÿåˆ—æ³•</h3>
<p>è¦æƒ³å˜ <code>O(kn)</code> ä¸º <code>O(n)</code>ï¼Œæˆ‘ä»¬å°±è¦æƒ³æ€ä¹ˆåšæ‰èƒ½ä¸¢æ‰è¿™ä¸ª <code>k</code>ã€‚<br/>
<code>k</code> ä¹‹æ‰€ä»¥ä¼šäº§ç”Ÿï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ç°åœ¨åªèƒ½é€šè¿‡éå†æ¥æ›´æ–°æœ€å¤§å€¼ã€‚é‚£ä¹ˆæ›´æ–°æœ€å¤§å€¼ï¼Œæœ‰æ²¡æœ‰æ›´é«˜æ•ˆçš„æ–¹æ³•å‘¢ï¼Ÿ<br/>
å¤§å®¶ä»”ç»†æƒ³æƒ³ï¼Œå½“æ»‘åŠ¨çª—å£å¾€åå‰è¿›ä¸€æ­¥çš„æ—¶å€™ï¼Œæ¯”å¦‚æˆ‘ä»åˆå§‹ä½ç½®å‰è¿›åˆ°ç¬¬äºŒä¸ªä½ç½®ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/19/171916004417d924~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1218&amp;h=448&amp;s=27971&amp;e=png" alt="" loading="lazy"/>
ï¼ˆå›¾ä¸­çº¢è‰²çš„èŒƒå›´æ˜¯åˆå§‹ä½ç½®æ—¶ï¼Œæ»‘åŠ¨çª—å£è¦†ç›–åˆ°çš„å…ƒç´ ï¼‰</p>
<p>æ­¤æ—¶æ»‘åŠ¨çª—å£å†…çš„å…ƒç´ å°‘äº†ä¸€ä¸ª 1ï¼Œå¢åŠ äº†ä¸€ä¸ª -3â€”â€”å‡å°‘çš„æ•°ä¸æ˜¯å½“å‰æœ€å¤§å€¼ï¼Œå¢åŠ çš„æ•°ä¹Ÿæ²¡æœ‰è¶…è¶Šå½“å‰æœ€å¤§å€¼ï¼Œå› æ­¤æœ€å¤§å€¼ä»ç„¶æ˜¯ 3ã€‚æ­¤æ—¶æˆ‘ä»¬ä¸ç¦è¦æƒ³ï¼šå¦‚æœæˆ‘ä»¬èƒ½<strong>åœ¨çª—å£å‘ç”Ÿç§»åŠ¨æ—¶ï¼Œåªæ ¹æ®å‘ç”Ÿå˜åŒ–çš„å…ƒç´ å¯¹æœ€å¤§å€¼è¿›è¡Œæ›´æ–°</strong>ï¼Œé‚£å¤æ‚åº¦æ˜¯ä¸æ˜¯å°±ä½å¾ˆå¤šäº†ï¼Ÿ</p>
<p>åŒç«¯é˜Ÿåˆ—å¯ä»¥å®Œç¾åœ°å¸®åŠ©æˆ‘ä»¬è¾¾åˆ°è¿™ä¸ªç›®çš„ã€‚</p>
<p>ä½¿ç”¨åŒç«¯é˜Ÿåˆ—æ³•ï¼Œæ ¸å¿ƒçš„æ€è·¯æ˜¯ç»´æŠ¤ä¸€ä¸ª<strong>æœ‰æ•ˆçš„é€’å‡é˜Ÿåˆ—</strong>ã€‚</p>
<p>åœ¨éå†æ•°ç»„çš„å‰æœŸï¼Œæˆ‘ä»¬å°è¯•å°†éå†åˆ°çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ¨å…¥é˜Ÿåˆ—å†…éƒ¨ï¼ˆä¸‹å›¾æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ å…¥é˜Ÿçš„ç¤ºæ„å›¾ï¼‰ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/19/171916b7462c1b87~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1242&amp;h=588&amp;s=35019&amp;e=png" alt="" loading="lazy"/>
æ¯å°è¯•æ¨å…¥ä¸€ä¸ªå…ƒç´ å‰ï¼Œéƒ½æŠŠè¿™ä¸ªå…ƒç´ ä¸é˜Ÿåˆ—å°¾éƒ¨çš„å…ƒç´ ä½œå¯¹æ¯”ã€‚æ ¹æ®å¯¹æ¯”ç»“æœçš„ä¸åŒï¼Œé‡‡å–ä¸åŒçš„æªæ–½ï¼š</p>
<ul>
<li>å¦‚æœè¯•å›¾æ¨å…¥çš„å…ƒç´ ï¼ˆå½“å‰å…ƒç´ ï¼‰å¤§äºé˜Ÿå°¾å…ƒç´ ï¼Œåˆ™æ„å‘³ç€é˜Ÿåˆ—çš„é€’å‡è¶‹åŠ¿è¢«æ‰“ç ´äº†ã€‚æ­¤æ—¶æˆ‘ä»¬éœ€è¦å°†é˜Ÿåˆ—å°¾éƒ¨çš„å…ƒç´ ä¾æ¬¡å‡ºé˜Ÿï¼ˆæ³¨æ„ç”±äºæ˜¯åŒç«¯é˜Ÿåˆ—ï¼Œæ‰€ä»¥é˜Ÿå°¾å‡ºé˜Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼‰ã€ç›´åˆ°é˜Ÿå°¾å…ƒç´ å¤§äºç­‰äºå½“å‰å…ƒç´ ä¸ºæ­¢ï¼Œæ­¤æ—¶å†å°†å½“å‰å…ƒç´ å…¥é˜Ÿã€‚</li>
<li>å¦‚æœè¯•å›¾æ¨å…¥çš„å…ƒç´ å°äºé˜Ÿåˆ—å°¾éƒ¨çš„å…ƒç´ ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦é¢å¤–çš„æ“ä½œï¼Œç›´æ¥æŠŠå½“å‰å…ƒç´ å…¥é˜Ÿå³å¯ã€‚</li>
</ul>
<p>æˆ‘ç”¨åŠ¨ç”»æ¥è¡¨è¾¾ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/19/171918a1ae330dd3~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1343&amp;h=799&amp;s=469027&amp;e=gif&amp;f=79&amp;b=fdfdfd" alt="" loading="lazy"/></p>
<p>ï¼ˆæ³¨ï¼šåŠ¨ç”»å¤§å°å·²ç»æè‡´å‹ç¼©ï¼Œå¦‚æœä»ç„¶å­˜åœ¨åŠ è½½å¤±è´¥é—®é¢˜ï¼Œå¯èƒ½ä¸ç½‘ç»œç¯å¢ƒæœ‰å…³ã€‚å¦‚æœä½ é‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå»ºè®® PC ç«¯ç‚¹å‡»<a href="https://link.juejin.cn?target=https%3A%2F%2Fp1-jj.byteimg.com%2Ftos-cn-i-t2oaga2asx%2Fgold-user-assets%2F2020%2F4%2F19%2F171918a1ae330dd3~tplv-t2oaga2asx-image.image" target="_blank" title="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/19/171918a1ae330dd3~tplv-t2oaga2asx-image.image" ref="nofollow noopener noreferrer">è¿™é‡Œ</a>ç›´æ¥è®¿é—®åŠ¨å›¾è¯•è¯•çœ‹ï¼‰</p>
<p>ç»´æŒé€’å‡é˜Ÿåˆ—çš„ç›®çš„ï¼Œå°±åœ¨äº<strong>ç¡®ä¿é˜Ÿå¤´å…ƒç´ å§‹ç»ˆæ˜¯å½“å‰çª—å£çš„æœ€å¤§å€¼</strong>ã€‚<br/>
å½“éå†åˆ°çš„å…ƒç´ ä¸ªæ•°è¾¾åˆ°äº† <code>k</code> ä¸ªæ—¶ï¼Œæ„å‘³ç€æ»‘åŠ¨çª—å£çš„ç¬¬ä¸€ä¸ªæœ€å¤§å€¼å·²ç»äº§ç”Ÿäº†ï¼Œæˆ‘ä»¬æŠŠå®ƒ push è¿›ç»“æœæ•°ç»„é‡Œï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/19/171916d956b7871b~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1232&amp;h=872&amp;s=59228&amp;e=png" alt="" loading="lazy"/></p>
<p>ç„¶åç»§ç»­å‰è¿›ï¼Œæˆ‘ä»¬å‘ç°æ•°ç»„ç´¢å¼• 0 å¤„çš„å…ƒç´ ï¼ˆ<code>1</code>ï¼‰å·²ç»è¢«è¸¢å‡ºæ»‘åŠ¨çª—å£äº†ï¼ˆå›¾ä¸­çº¢è‰²æ–¹å—å¯¹åº”çš„æ˜¯å½“å‰æ»‘åŠ¨çª—å£è¦†ç›–åˆ°çš„å…ƒç´ ä»¬ï¼‰ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/19/171916fec2ae69a2~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1184&amp;h=718&amp;s=46258&amp;e=png" alt="" loading="lazy"/>
ä¸ºäº†ç¡®ä¿<strong>é˜Ÿåˆ—çš„æœ‰æ•ˆæ€§</strong>ï¼Œéœ€è¦åŠæ—¶åœ°å»é˜Ÿåˆ—æ£€æŸ¥ä¸‹ <code>1</code> è¿™ä¸ªå…ƒç´ åœ¨ä¸åœ¨é˜Ÿåˆ—é‡Œï¼ˆåœ¨çš„è¯è¦åŠæ—¶åœ°è¸¢å‡ºå»ï¼Œå› ä¸ºé˜Ÿåˆ—æœ¬èº«åªç»´æŠ¤å½“å‰æ»‘åŠ¨çª—å£å†…çš„å…ƒç´ ï¼‰ã€‚</p>
<p>è¿™é‡Œå¤§å®¶æ€è€ƒä¸€ä¸‹ï¼Œæˆ‘åœ¨æŸ¥æ‰¾ <code>1</code> çš„æ—¶å€™ï¼Œéœ€ä¸éœ€è¦éå†æ•´ä¸ªé˜Ÿåˆ—ï¼Ÿç­”æ¡ˆæ˜¯ä¸éœ€è¦ï¼Œå› ä¸º <code>1</code> æ˜¯æœ€é å‰çš„ä¸€ä¸ªå…ƒç´ ï¼Œå¦‚æœå®ƒåœ¨ï¼Œé‚£ä¹ˆå®ƒä¸€å®šæ˜¯é˜Ÿå¤´å…ƒç´ ã€‚è¿™é‡Œæˆ‘ä»¬åªéœ€è¦æ£€æŸ¥é˜Ÿå¤´å…ƒç´ æ˜¯ä¸æ˜¯ <code>1</code> å°±è¡Œäº†ã€‚ æ­¤æ—¶æˆ‘ä»¬æ£€æŸ¥é˜Ÿå¤´ï¼Œå‘ç°æ˜¯ <code>3</code>ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/19/17191713bc7336d2~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=936&amp;h=184&amp;s=16471&amp;e=png" alt="" loading="lazy"/></p>
<p>æ²¡é”™ï¼Œ<code>1</code>æ—©å°±å› ä¸ºä¸ç¬¦åˆé€’å‡è¶‹åŠ¿è¢«ä»é˜Ÿå¤´å¹²æ‰äº†ã€‚æ­¤æ—¶æˆ‘ä»¬å¯ä»¥æ–­å®šï¼Œå½“å‰åŒç«¯é˜Ÿåˆ—é‡Œçš„å…ƒç´ éƒ½æ˜¯æ»‘åŠ¨çª—å£å·²ç»è¦†ç›–çš„æœ‰æ•ˆå…ƒç´ â€”â€”æ²¡æ¯›ç—…ï¼Œç»§ç»­å¾€ä¸‹èµ°å°±è¡Œäº†ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæ¯å¾€å‰éå†ä¸€ä¸ªå…ƒç´ ï¼Œéƒ½éœ€è¦é‡å¤ä»¥ä¸Šçš„å‡ ä¸ªæ­¥éª¤ã€‚è¿™é‡Œæˆ‘æ€»ç»“ä¸€ä¸‹æ¯ä¸€æ­¥éƒ½åšäº†ä»€ä¹ˆï¼š</p>
<ol>
<li>æ£€æŸ¥é˜Ÿå°¾å…ƒç´ ï¼Œçœ‹æ˜¯ä¸æ˜¯éƒ½æ»¡è¶³å¤§äºç­‰äºå½“å‰å…ƒç´ çš„æ¡ä»¶ã€‚å¦‚æœæ˜¯çš„è¯ï¼Œç›´æ¥å°†å½“å‰å…ƒç´ å…¥é˜Ÿã€‚å¦åˆ™ï¼Œå°†é˜Ÿå°¾å…ƒç´ é€ä¸ªå‡ºé˜Ÿã€ç›´åˆ°é˜Ÿå°¾å…ƒç´ å¤§äºç­‰äºå½“å‰å…ƒç´ ä¸ºæ­¢ã€‚</li>
<li>å°†å½“å‰å…ƒç´ å…¥é˜Ÿ</li>
<li>æ£€æŸ¥é˜Ÿå¤´å…ƒç´ ï¼Œçœ‹é˜Ÿå¤´å…ƒç´ æ˜¯å¦å·²ç»è¢«æ’é™¤åœ¨æ»‘åŠ¨çª—å£çš„èŒƒå›´ä¹‹å¤–äº†ã€‚å¦‚æœæ˜¯ï¼Œåˆ™å°†é˜Ÿå¤´å…ƒç´ å‡ºé˜Ÿã€‚</li>
<li>åˆ¤æ–­æ»‘åŠ¨çª—å£çš„çŠ¶æ€ï¼šçœ‹å½“å‰éå†è¿‡çš„å…ƒç´ ä¸ªæ•°æ˜¯å¦å°äº <code>k</code>ã€‚å¦‚æœå…ƒç´ ä¸ªæ•°å°äº<code>k</code>ï¼Œè¿™æ„å‘³ç€ç¬¬ä¸€ä¸ªæ»‘åŠ¨çª—å£å†…çš„å…ƒç´ éƒ½è¿˜æ²¡éå†å®Œã€ç¬¬ä¸€ä¸ªæœ€å¤§å€¼è¿˜æ²¡å‡ºç°ï¼Œæ­¤æ—¶æˆ‘ä»¬è¿˜ä¸èƒ½åŠ¨ç»“æœæ•°ç»„ï¼Œåªèƒ½ç»§ç»­æ›´æ–°é˜Ÿåˆ—ï¼›å¦‚æœå…ƒç´ ä¸ªæ•°å¤§äºç­‰äº<code>k</code>ï¼Œè¿™æ„å‘³ç€æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼å·²ç»å‡ºç°äº†ï¼Œæ­¤æ—¶æ¯éå†åˆ°ä¸€ä¸ªæ–°å…ƒç´ ï¼ˆä¹Ÿå°±æ˜¯æ»‘åŠ¨çª—å£æ¯å¾€å‰èµ°ä¸€æ­¥ï¼‰éƒ½è¦åŠæ—¶åœ°å¾€ç»“æœæ•°ç»„é‡Œæ·»åŠ å½“å‰æ»‘åŠ¨çª—å£å¯¹åº”çš„æœ€å¤§å€¼ï¼ˆæœ€å¤§å€¼å°±æ˜¯æ­¤æ—¶æ­¤åˆ»åŒç«¯é˜Ÿåˆ—çš„é˜Ÿå¤´å…ƒç´ ï¼‰ã€‚</li>
</ol>
<p>è¿™å››ä¸ªæ­¥éª¤åˆ†åˆ«æœ‰ä»¥ä¸‹çš„ç›®çš„ï¼š</p>
<ol>
<li>ç»´æŒé˜Ÿåˆ—çš„<strong>é€’å‡æ€§</strong>ï¼šç¡®ä¿é˜Ÿå¤´å…ƒç´ æ˜¯å½“å‰æ»‘åŠ¨çª—å£çš„æœ€å¤§å€¼ã€‚è¿™æ ·æˆ‘ä»¬æ¯æ¬¡å–æœ€å¤§å€¼æ—¶ï¼Œç›´æ¥å–é˜Ÿå¤´å…ƒç´ å³å¯ã€‚</li>
<li>è¿™ä¸€æ­¥æ²¡å•¥å¥½è¯´çš„ï¼Œå°±æ˜¯åœ¨ç»´æŒé˜Ÿåˆ—é€’å‡æ€§çš„åŸºç¡€ä¸Šã€æ›´æ–°é˜Ÿåˆ—çš„å†…å®¹ã€‚</li>
<li>ç»´æŒé˜Ÿåˆ—çš„<strong>æœ‰æ•ˆæ€§</strong>ï¼šç¡®ä¿é˜Ÿåˆ—é‡Œæ‰€æœ‰çš„å…ƒç´ éƒ½åœ¨æ»‘åŠ¨çª—å£åœˆå®šçš„èŒƒå›´ä»¥å†…ã€‚</li>
<li>æ’é™¤æ‰æ»‘åŠ¨çª—å£è¿˜æ²¡æœ‰åˆå§‹åŒ–å®Œæˆã€ç¬¬ä¸€ä¸ªæœ€å¤§å€¼è¿˜æ²¡æœ‰å‡ºç°çš„ç‰¹æ®Šæƒ…å†µã€‚</li>
</ol>
<p>ç»“åˆä»¥ä¸Šçš„åˆ†æï¼Œæˆ‘ä»¬æ¥å†™ä»£ç ï¼š</p>
<h3 data-id="heading-28">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums</span>
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">k</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number[]</span>}
 */</span>
<span class="hljs-keyword">const</span> maxSlidingWindow = <span class="hljs-keyword">function</span> (<span class="hljs-params">nums, k</span>) {
  <span class="hljs-comment">// ç¼“å­˜æ•°ç»„çš„é•¿åº¦</span>
  <span class="hljs-keyword">const</span> len = nums.<span class="hljs-property">length</span>;
  <span class="hljs-comment">// åˆå§‹åŒ–ç»“æœæ•°ç»„</span>
  <span class="hljs-keyword">const</span> res = [];
  <span class="hljs-comment">// åˆå§‹åŒ–åŒç«¯é˜Ÿåˆ—</span>
  <span class="hljs-keyword">const</span> deque = [];
  <span class="hljs-comment">// å¼€å§‹éå†æ•°ç»„</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
    <span class="hljs-comment">// å½“é˜Ÿå°¾å…ƒç´ å°äºå½“å‰å…ƒç´ æ—¶</span>
    <span class="hljs-keyword">while</span> (deque.<span class="hljs-property">length</span> &amp;&amp; nums[deque[deque.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]] &lt; nums[i]) {
      <span class="hljs-comment">// å°†é˜Ÿå°¾å…ƒç´ ï¼ˆç´¢å¼•ï¼‰ä¸æ–­å‡ºé˜Ÿï¼Œç›´è‡³é˜Ÿå°¾å…ƒç´ å¤§äºç­‰äºå½“å‰å…ƒç´ </span>
      deque.<span class="hljs-title function_">pop</span>();
    }
    <span class="hljs-comment">// å…¥é˜Ÿå½“å‰å…ƒç´ ç´¢å¼•ï¼ˆæ³¨æ„æ˜¯ç´¢å¼•ï¼‰</span>
    deque.<span class="hljs-title function_">push</span>(i);
    <span class="hljs-comment">// å½“é˜Ÿå¤´å…ƒç´ çš„ç´¢å¼•å·²ç»è¢«æ’é™¤åœ¨æ»‘åŠ¨çª—å£ä¹‹å¤–æ—¶</span>
    <span class="hljs-keyword">while</span> (deque.<span class="hljs-property">length</span> &amp;&amp; deque[<span class="hljs-number">0</span>] &lt;= i - k) {
      <span class="hljs-comment">// å°†é˜Ÿå¤´å…ƒç´ ç´¢å¼•å‡ºé˜Ÿ</span>
      deque.<span class="hljs-title function_">shift</span>();
    }
    <span class="hljs-comment">// åˆ¤æ–­æ»‘åŠ¨çª—å£çš„çŠ¶æ€ï¼Œåªæœ‰åœ¨è¢«éå†çš„å…ƒç´ ä¸ªæ•°å¤§äº k çš„æ—¶å€™ï¼Œæ‰æ›´æ–°ç»“æœæ•°ç»„</span>
    <span class="hljs-keyword">if</span> (i &gt;= k - <span class="hljs-number">1</span>) {
      res.<span class="hljs-title function_">push</span>(nums[deque[<span class="hljs-number">0</span>]]);
    }
  }
  <span class="hljs-comment">// è¿”å›ç»“æœæ•°ç»„</span>
  <span class="hljs-keyword">return</span> res;
};
</code></pre>
<p>ï¼ˆé˜…è¯»è¿‡ç¨‹ä¸­æœ‰ä»»ä½•æƒ³æ³•æˆ–ç–‘é—®ï¼Œæˆ–è€…å•çº¯å¸Œæœ›å’Œç¬”è€…äº¤ä¸ªæœ‹å‹å•¥çš„ï¼Œæ¬¢è¿å¤§å®¶æ·»åŠ æˆ‘çš„å¾®ä¿¡xyalinodeä¸æˆ‘äº¤æµå“ˆ~ï¼‰</p>
<p>æœ¬èŠ‚æˆ‘ä»¬å­¦ä¹ ä¸¤ç§å…³é”®çš„åŸºæœ¬ç®—æ³•æ€æƒ³ï¼šDFSï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰å’ŒBFSï¼ˆå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼‰ã€‚è¿™ä¸¤ç§ç®—æ³•å’Œæ ˆã€é˜Ÿåˆ—æœ‰ç€åƒä¸ä¸‡ç¼•çš„å…³ç³»ï¼Œå¦‚æœå‰ä¸¤èŠ‚ä½ è®¤çœŸå­¦ä¹ æŒæ¡äº†ï¼Œé‚£ä¹ˆè¿™ä¸€èŠ‚å¯¹ä½ æ¥è¯´ç›¸ä¿¡ä¸æ˜¯é—®é¢˜ã€‚</p>
<h2 data-id="heading-29">æ·±åº¦ä¼˜å…ˆæœç´¢æ€æƒ³ï¼šä¸æ’å—å¢™ä¸å›å¤´çš„â€œè¿·å®«æ¸¸æˆâ€</h2>
<p>20ä¸–çºª90å¹´ä»£ï¼Œå°éœ¸ç‹å­¦ä¹ æœºé£é¡å…¨å›½ã€‚æ²¡æœ‰å“ªä¸ªå°å­¦ç”Ÿï¼Œä¸æƒ³æ‹¥æœ‰ä¸€å°è‡ªå·±çš„å°éœ¸ç‹å­¦ä¹ æœºâ€”â€”æˆ‘ï¼Œä¹Ÿä¸ä¾‹å¤–ï¼›æ²¡æœ‰å“ªä¸ªå°å­¦ç”Ÿåœ¨æ‹¥æœ‰äº†å°éœ¸ç‹å­¦ä¹ æœºä¹‹åï¼Œä¼šçœŸçš„ç”¨å®ƒæ¥æå­¦ä¹ â€”â€”æˆ‘ï¼Œä¹Ÿä¸ä¾‹å¤–ã€‚åœ¨é‚£ä¸ªæ²¡æœ‰ç‹è€…ä¹Ÿæ²¡æœ‰åƒé¸¡çš„å¹´ä»£é‡Œï¼Œå°éœ¸ç‹é‡Œè®©æˆ‘æ¬²ç½¢ä¸èƒ½çš„é™¤äº†é­‚æ–—ç½—ã€è¶…çº§ç›ä¸½ï¼Œè¿˜æœ‰å®ƒâ€”â€”è¿·å®«æ¸¸æˆï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/18/1718da594ad8bc44~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1528&amp;h=1032&amp;s=114394&amp;e=jpg" alt="" loading="lazy"/></p>
<p>å¾ˆå¤šåŒå­¦è·Ÿæˆ‘è¯´ä»–å…¥é—¨ç®—æ³•çš„æ—¶å€™å°±æŒ‚åœ¨ DFS è¿™é‡Œï¼Œè§‰å¾—å¤ªé«˜æ·±äº†ï¼Œå­¦ä¸åŠ¨ã€‚å‚»å­©å­ï¼Œä»Šå¤©ä½ å°±ä¼šçŸ¥é“ï¼Œæ·±åº¦ä¼˜å…ˆæœç´¢ä¹Ÿä¸è¿‡æ˜¯åœ¨ç”¨ç¼–ç çš„æ–¹å¼ç©ä¸€åœºè¿·å®«æ¸¸æˆã€‚</p>
<p>ç°åœ¨æŠŠå›¾ä¸Šçš„å°é»„ç‚¹æƒ³è±¡æˆä½ è‡ªå·±ï¼Œç”±äºä½ æ‰‹é‡Œæ²¡æœ‰åœ°å›¾ã€æ²¡æœ‰æ— äººæœºï¼Œå› æ­¤ä½ å¯¹è¿·å®«æ•´ä½“çš„åœ°å½¢ä¸€æ— æ‰€çŸ¥ã€‚æ”¾çœ¼æœ›å»ï¼Œä½ çœ¼å‰åªæœ‰å†°å†·çš„å¢™å£å’Œå¹¶ä¸çŸ¥é“èƒ½ä¸èƒ½èµ°é€šçš„é“è·¯ã€‚å¦‚ä½•èµ°å‡ºä¸€æ¡é€šè·¯ï¼Ÿä½ åªèƒ½å°è¯•æŠŠæ¯ä¸€æ¡èƒ½èµ°çš„è·¯éƒ½èµ°ä¸€éâ€”â€”ä¹Ÿå°±æ˜¯æ‰€è°“çš„â€œç©·ä¸¾æ³•â€ï¼š</p>
<ul>
<li>ä»¥å½“å‰ä½ç½®ä¸ºèµ·ç‚¹ï¼Œé—·å¤´å¾€å‰èµ°</li>
<li>åœ¨å‰è¿›çš„è¿‡ç¨‹ä¸­ï¼Œéš¾å…ä¼šé‡åˆ°å²”è·¯å£ã€‚è¿™ä¸ªè·¯å£å¯èƒ½åˆ†å‰å‡ºå»ä¸¤æ¡ã€ä¸‰æ¡ã€å››æ¡ç”šè‡³æ›´å¤šçš„é“è·¯ï¼Œä½ åªèƒ½é€‰æ‹©å…¶ä¸­çš„ä¸€æ¡è·¯ã€ç„¶åç»§ç»­å‰è¿›ï¼ˆæ³¨æ„ï¼Œä½ å¯èƒ½ä¼šä¸æ­¢ä¸€æ¬¡é‡åˆ°å²”è·¯å£ï¼›æ¯é‡åˆ°ä¸€ä¸ªæ–°çš„å²”è·¯å£ï¼Œä½ éƒ½éœ€è¦åšä¸€æ¬¡é€‰æ‹©ï¼‰ã€‚</li>
<li>ä½ é€‰æ‹©çš„è¿™æ¡è·¯æœªå¿…æ˜¯ä¸€æ¡é€šè·¯ã€‚å¦‚æœä½ èµ°åˆ°æœ€åå‘ç°æ­¤è·¯ä¸é€šï¼Œé‚£ä¹ˆä½ å°±è¦é€€å›åˆ°ç¦»ä½ æœ€è¿‘çš„é‚£ä¸ªåˆ†å‰è·¯å£ï¼Œç„¶åå°è¯•çœ‹å…¶å®ƒçš„å²”è·¯èƒ½ä¸èƒ½èµ°é€šã€‚å¦‚æœå½“å‰çš„å²”è·¯å£åˆ†å‰å‡ºå»çš„æ‰€æœ‰é“è·¯éƒ½èµ°ä¸é€šï¼Œé‚£ä¹ˆå°±éœ€è¦é€€å›åˆ°å½“å‰å²”è·¯å£çš„ä¸Šä¸€ä¸ªå²”è·¯å£ï¼Œè¿›ä¸€æ­¥å»å¯»æ‰¾æ–°çš„è·¯å¾„ã€‚</li>
</ul>
<p>æŒ‰ç…§è¿™ä¸ªæ€è·¯èµ°ä¸‹å»ï¼Œåªè¦è¿·å®«æ˜¯æœ‰å‡ºå£çš„ï¼Œä½ å°±ä¸€å®šèƒ½æ‰¾åˆ°è¿™ä¸ªå‡ºå£ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹é‡Œï¼Œ<strong>æˆ‘ä»¬è´¯å½»äº†â€œä¸æ’å—å¢™ä¸å›å¤´â€çš„åŸåˆ™ï¼šåªè¦æ²¡æœ‰ç¢°å£ï¼Œå°±å†³ä¸é€‰æ‹©å…¶å®ƒçš„é“è·¯ï¼Œè€Œæ˜¯åšæŒå‘å½“å‰é“è·¯çš„æ·±å¤„æŒ–æ˜â€”â€”åƒè¿™æ ·å°†â€œæ·±åº¦â€ä½œä¸ºå‰è¿›çš„ç¬¬ä¸€è¦ç´ çš„æœç´¢æ–¹æ³•ï¼Œå°±æ˜¯æ‰€è°“çš„â€œæ·±åº¦ä¼˜å…ˆæœç´¢â€</strong>ã€‚</p>
<p><strong>æ·±åº¦ä¼˜å…ˆæœç´¢çš„æ ¸å¿ƒæ€æƒ³ï¼Œæ˜¯è¯•å›¾ç©·ä¸¾æ‰€æœ‰çš„å®Œæ•´è·¯å¾„</strong>ã€‚</p>
<h2 data-id="heading-30">æ·±åº¦ä¼˜å…ˆæœç´¢çš„æœ¬è´¨â€”â€”æ ˆç»“æ„</h2>
<p>é‚£ä¹ˆå¦‚ä½•ä½¿ç”¨ç¼–ç æ¥å®ç°æ·±åº¦ä¼˜å…ˆæœç´¢å‘¢ï¼Ÿæˆ‘ä»¬ç»§ç»­è®¨è®ºè¿·å®«é—®é¢˜ï¼Œè¿™é‡Œæˆ‘ç»™å¤§å®¶ä¸€ä¸ªæŠ½è±¡è¿‡åçš„ç®€å•è¿·å®«ç»“æ„ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/18/1718dd0887578d3d~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1098&amp;h=636&amp;s=66802&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<p>å›¾ä¸­è“è‰²çš„æ˜¯å…¥å£ï¼Œç°è‰²çš„æ˜¯å²”è·¯å£ï¼Œé»‘è‰²çš„æ˜¯æ­»èƒ¡åŒï¼Œç»¿è‰²çš„æ˜¯å‡ºå£ã€‚</p>
<p>åŸºäºçœ¼å‰çš„è¿™ä¸ªè¿·å®«ç»“æ„ï¼Œæˆ‘ä»¬æ¥ä¸€æ­¥ä¸€æ­¥æ¨¡æ‹Ÿä¸€ä¸‹æ·±åº¦ä¼˜å…ˆæœç´¢çš„å…·ä½“è¿‡ç¨‹ï¼š</p>
<ol>
<li>ä» <code>A</code> å‡ºå‘ï¼Œæ²¿ç€å”¯ä¸€çš„ä¸€æ¡é“è·¯å¾€ä¸‹èµ°ï¼Œé‡åˆ°äº†ç¬¬1ä¸ªå²”è·¯å£<code>B</code>ã€‚çœ¼å‰æœ‰ä¸‰ä¸ªé€‰æ‹©ï¼š<code>C</code>ã€<code>D</code>ã€<code>E</code>ã€‚è¿™é‡Œæˆ‘æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ¥èµ°ï¼ˆä½ ä¹Ÿå¯ä»¥æŒ‰ç…§å…¶å®ƒé¡ºåºï¼‰ï¼Œå…ˆèµ°<code>C</code>ã€‚</li>
<li>å‘ç° <code>C</code>æ˜¯æ­»èƒ¡åŒï¼Œåé€€åˆ°æœ€è¿‘çš„å²”è·¯å£ <code>B</code>ï¼Œå°è¯•å¾€<code>D</code>æ–¹å‘èµ°ã€‚</li>
<li>å‘ç°<code>D</code> æ˜¯æ­»èƒ¡åŒï¼Œï¼Œåé€€åˆ°æœ€è¿‘çš„å²”è·¯å£ <code>B</code>ï¼Œå°è¯•å¾€<code>E</code>æ–¹å‘èµ°ã€‚</li>
<li><code>E</code> æ˜¯ä¸€ä¸ªå²”è·¯å£ï¼Œçœ¼å‰æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š<code>F</code> å’Œ <code>G</code>ã€‚æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ¥èµ°ï¼Œå…ˆèµ°<code>F</code>ã€‚</li>
<li>å‘ç°<code>F</code> æ˜¯æ­»èƒ¡åŒï¼Œåé€€åˆ°æœ€è¿‘çš„å²”è·¯å£ <code>E</code>ï¼Œå°è¯•å¾€<code>G</code>æ–¹å‘èµ°ã€‚</li>
<li><code>G</code> æ˜¯ä¸€ä¸ªå²”è·¯å£ï¼Œçœ¼å‰æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š<code>H</code> å’Œ <code>I</code>ã€‚æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ¥èµ°ï¼Œå…ˆèµ°<code>H</code>ã€‚</li>
<li>å‘ç° <code>H</code> æ˜¯æ­»èƒ¡åŒï¼Œåé€€åˆ°æœ€è¿‘çš„å²”è·¯å£ <code>G</code>ï¼Œå°è¯•å¾€<code>I</code>æ–¹å‘èµ°ã€‚</li>
<li><code>I</code> å°±æ˜¯å‡ºå£ï¼ŒæˆåŠŸèµ°å‡ºè¿·å®«ã€‚</li>
</ol>
<p>å¤§å®¶è§‚å¯Ÿä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼Œä¼šä¸ä¼šè§‰å¾—è¿™äº›å‰è¿›ã€åé€€çš„æ“ä½œï¼Œå…¶å®å’Œæ ˆç»“æ„çš„å…¥æ ˆã€å‡ºæ ˆè¿‡ç¨‹éå¸¸ç›¸ä¼¼å‘¢ï¼Ÿ<br/>
ç°åœ¨æˆ‘ä»¬æŠŠè¿·å®«ä¸­çš„æ¯ä¸€ä¸ªåæ ‡çœ‹åšæ˜¯æ ˆé‡Œçš„ä¸€ä¸ªå…ƒç´ ï¼Œç”¨æ ˆæ¥æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹ï¼š</p>
<ol>
<li>ä» <code>A</code> å‡ºå‘ï¼ˆ<code>A</code>å…¥æ ˆï¼‰ï¼Œç»è¿‡äº†<code>B</code>ï¼ˆ<code>B</code>å…¥æ ˆï¼‰ï¼Œæ¥ä¸‹æ¥é¢ä¸´ <code>C</code>ã€<code>D</code>ã€<code>E</code>ä¸‰æ¡è·¯ã€‚è¿™é‡ŒæŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ¥èµ°ï¼ˆä½ ä¹Ÿå¯ä»¥é€‰æ‹©å…¶å®ƒé¡ºåºï¼‰ï¼Œå…ˆèµ°<code>C</code>ï¼ˆ<code>C</code>å…¥æ ˆï¼‰ã€‚</li>
<li>å‘ç° <code>C</code>æ˜¯æ­»èƒ¡åŒï¼Œåé€€åˆ°æœ€è¿‘çš„å²”è·¯å£ <code>B</code>ï¼ˆ<code>C</code>å‡ºæ ˆï¼‰ï¼Œå°è¯•å¾€<code>D</code>æ–¹å‘èµ°ï¼ˆ<code>D</code>å…¥æ ˆï¼‰ã€‚</li>
<li>å‘ç°<code>D</code> æ˜¯æ­»èƒ¡åŒï¼Œï¼Œåé€€åˆ°æœ€è¿‘çš„å²”è·¯å£ <code>B</code>ï¼ˆ<code>D</code>å‡ºæ ˆï¼‰ï¼Œå°è¯•å¾€<code>E</code>æ–¹å‘èµ°ï¼ˆ<code>E</code>å…¥æ ˆï¼‰ã€‚</li>
<li><code>E</code> æ˜¯ä¸€ä¸ªå²”è·¯å£ï¼Œçœ¼å‰æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š<code>F</code> å’Œ <code>G</code>ã€‚æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ¥èµ°ï¼Œå…ˆèµ°<code>F</code>ï¼ˆ<code>F</code>å…¥æ ˆï¼‰ã€‚</li>
<li>å‘ç°<code>F</code> æ˜¯æ­»èƒ¡åŒï¼Œåé€€åˆ°æœ€è¿‘çš„å²”è·¯å£ <code>E</code>ï¼ˆ<code>F</code>å‡ºæ ˆï¼‰ï¼Œå°è¯•å¾€<code>G</code>æ–¹å‘èµ°ï¼ˆ<code>G</code>å…¥æ ˆï¼‰ã€‚</li>
<li><code>G</code> æ˜¯ä¸€ä¸ªå²”è·¯å£ï¼Œçœ¼å‰æœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š<code>H</code> å’Œ <code>I</code>ã€‚æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºæ¥èµ°ï¼Œå…ˆèµ°<code>H</code>ï¼ˆ<code>H</code>å…¥æ ˆï¼‰ã€‚</li>
<li>å‘ç° <code>H</code> æ˜¯æ­»èƒ¡åŒï¼Œåé€€åˆ°æœ€è¿‘çš„å²”è·¯å£ <code>G</code>ï¼ˆ<code>H</code>å‡ºæ ˆï¼‰ï¼Œå°è¯•å¾€<code>I</code>æ–¹å‘èµ°ï¼ˆ<code>I</code>å…¥æ ˆï¼‰ã€‚</li>
<li><code>I</code> å°±æ˜¯å‡ºå£ï¼ŒæˆåŠŸèµ°å‡ºè¿·å®«ã€‚</li>
</ol>
<p>æ­¤æ—¶æ ˆé‡Œé¢çš„å†…å®¹å°±æ˜¯<code>A</code>ã€<code>B</code>ã€<code>E</code>ã€<code>G</code>ã€<code>I</code>ï¼Œå› æ­¤
<code>A</code>-&gt;<code>B</code>-&gt;<code>E</code>-&gt;<code>G</code>-&gt;<code>I</code> å°±æ˜¯èµ°å‡ºè¿·å®«çš„è·¯å¾„ã€‚é€šè¿‡æ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥å®šä½åˆ°è¿·å®«çš„å‡ºå£ï¼Œè¿˜å¯ä»¥è®°å½•ä¸‹ç›¸å…³çš„è·¯å¾„ä¿¡æ¯ã€‚</p>
<p>ç°åœ¨å¤§å®¶çŸ¥é“äº†æ·±åº¦ä¼˜å…ˆæœç´¢çš„è¿‡ç¨‹å¯ä»¥è½¬åŒ–ä¸ºä¸€ç³»åˆ—çš„å…¥æ ˆã€å‡ºæ ˆæ“ä½œã€‚é‚£ä¹ˆæ·±åº¦ä¼˜å…ˆæœç´¢åœ¨ç¼–ç ä¸Šä¸€èˆ¬ä¼šå¦‚ä½•å®ç°å‘¢ï¼Ÿè¿™é‡Œï¼Œå°±éœ€è¦å¤§å®¶å›å¿†ä¸€ä¸‹ç¬¬ 5 èŠ‚çš„å†…å®¹äº†â€”â€”DFS ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€ä½¿ç”¨<strong>é€’å½’</strong>æ¥æ¨¡æ‹Ÿå…¥æ ˆã€å‡ºæ ˆçš„é€»è¾‘ã€‚</p>
<h2 data-id="heading-31">DFS ä¸äºŒå‰æ ‘çš„éå†</h2>
<p>ç°åœ¨æˆ‘ä»¬ç«™åœ¨æ·±åº¦ä¼˜å…ˆæœç´¢çš„è§’åº¦ï¼Œé‡æ–°ç†è§£ä¸€ä¸‹äºŒå‰æ ‘çš„å…ˆåºéå†è¿‡ç¨‹ï¼š
<img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/6/1714ec42acc57e04~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1553&amp;h=1010&amp;s=237869&amp;e=gif&amp;f=27" alt="" loading="lazy"/></p>
<p>ä» <code>A</code> ç»“ç‚¹å‡ºå‘ï¼Œè®¿é—®å·¦ä¾§çš„å­ç»“ç‚¹ï¼›å¦‚æœå·¦å­æ ‘åŒæ ·å­˜åœ¨å·¦ä¾§å­ç»“ç‚¹ï¼Œå°±<strong>å¤´ä¹Ÿä¸å›åœ°ç»§ç»­è®¿é—®ä¸‹å»</strong>ã€‚ä¸€ç›´åˆ°å·¦ä¾§å­ç»“ç‚¹ä¸ºç©ºæ—¶ï¼Œæ‰<strong>é€€å›</strong>åˆ°è·ç¦»æœ€è¿‘çš„çˆ¶ç»“ç‚¹ã€å†å°è¯•å»è®¿é—®çˆ¶ç»“ç‚¹çš„å³ä¾§å­ç»“ç‚¹â€”â€”è¿™ä¸ªè¿‡ç¨‹ï¼Œå’Œèµ°è¿·å®«æ˜¯ä½•å…¶ç›¸ä¼¼ï¼äº‹å®ä¸Šï¼Œåœ¨äºŒå‰æ ‘ä¸­ï¼Œç»“ç‚¹å°±å¥½æ¯”æ˜¯è¿·å®«é‡Œçš„åæ ‡ï¼Œå›¾ä¸­çš„æ¯ä¸ªç»“ç‚¹åœ¨ä½œä¸ºçˆ¶ç»“ç‚¹æ—¶æ— ç–‘æ˜¯å²”è·¯å£ï¼Œè€Œç©ºç»“ç‚¹å°±æ˜¯æ­»èƒ¡åŒã€‚æˆ‘ä»¬å›é¡¾ä¸€ä¸‹äºŒå‰æ ‘å…ˆåºéå†çš„ç¼–ç å®ç°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æ‰€æœ‰éå†å‡½æ•°çš„å…¥å‚éƒ½æ˜¯æ ‘çš„æ ¹ç»“ç‚¹å¯¹è±¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">preorder</span>(<span class="hljs-params">root</span>) {
    <span class="hljs-comment">// é€’å½’è¾¹ç•Œï¼Œroot ä¸ºç©º</span>
    <span class="hljs-keyword">if</span>(!root) {
        <span class="hljs-keyword">return</span> 
    }
     
    <span class="hljs-comment">// è¾“å‡ºå½“å‰éå†çš„ç»“ç‚¹å€¼</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰éå†çš„ç»“ç‚¹å€¼æ˜¯ï¼š'</span>, root.<span class="hljs-property">val</span>)  
    <span class="hljs-comment">// é€’å½’éå†å·¦å­æ ‘ </span>
    <span class="hljs-title function_">preorder</span>(root.<span class="hljs-property">left</span>)  
    <span class="hljs-comment">// é€’å½’éå†å³å­æ ‘  </span>
    <span class="hljs-title function_">preorder</span>(root.<span class="hljs-property">right</span>)
}
</code></pre>
<p>åœ¨è¿™ä¸ªé€’å½’å‡½æ•°ä¸­ï¼Œé€’å½’å¼ç”¨æ¥å…ˆåéå†å·¦å­æ ‘ã€å³å­æ ‘ï¼ˆåˆ†åˆ«æ¢ç´¢ä¸åŒçš„é“è·¯ï¼‰ï¼Œé€’å½’è¾¹ç•Œåœ¨è¯†åˆ«åˆ°ç»“ç‚¹ä¸ºç©ºæ—¶ä¼šç›´æ¥è¿”å›ï¼ˆæ’åˆ°äº†å—å¢™ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºï¼Œ<strong>é€’å½’å¼å°±æ˜¯æˆ‘ä»¬é€‰æ‹©é“è·¯çš„è¿‡ç¨‹ï¼Œè€Œé€’å½’è¾¹ç•Œå°±æ˜¯æ­»èƒ¡åŒ</strong>ã€‚äºŒå‰æ ‘çš„å…ˆåºéå†æ­£æ˜¯æ·±åº¦ä¼˜å…ˆæœç´¢æ€æƒ³çš„é€’å½’å®ç°ã€‚å¯ä»¥è¯´æ·±åº¦ä¼˜å…ˆæœç´¢è¿‡ç¨‹å°±ç±»ä¼¼äºæ ‘çš„å…ˆåºéå†ã€æ˜¯æ ‘çš„å…ˆåºéå†çš„æ¨å¹¿ã€‚</p>
<p>è¿™æ—¶å€™ï¼Œå¯èƒ½æœ‰åŒå­¦ä¼šæœ‰ç–‘é—®ï¼šåœ¨äºŒå‰æ ‘éå†çš„é€’å½’å®ç°é‡Œï¼Œå®Œå…¨æ²¡æœ‰æ ˆçš„å½±å­â€”â€”è¿™ä¸œè¥¿ä¼¼ä¹å’Œæ ˆæ²¡æœ‰ä»€ä¹ˆç›´æ¥è”ç³»å•Šï¼Œä¸ºå•¥å’±ä»¬è¿˜è¯´æ·±åº¦ä¼˜å…ˆæœç´¢çš„æœ¬è´¨æ˜¯æ ˆå‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬ä»ä¸¤ä¸ªè§’åº¦æ¥ç†è§£è¿™ä¸ªäº‹æƒ…ï¼š</p>
<ul>
<li>
<p>é¦–å…ˆï¼Œå‡½æ•°è°ƒç”¨çš„åº•å±‚ï¼Œä»ç„¶æ˜¯ç”±æ ˆæ¥å®ç°çš„ã€‚JS ä¼šç»´æŠ¤ä¸€ä¸ªå«â€œå‡½æ•°è°ƒç”¨æ ˆâ€çš„ä¸œè¥¿ï¼Œ<code>preorder</code>æ¯è°ƒç”¨ä¸€æ¬¡è‡ªå·±ï¼Œç›¸å…³è°ƒç”¨çš„ä¸Šä¸‹æ–‡å°±ä¼šè¢«<code>push</code>è¿›å‡½æ•°è°ƒç”¨æ ˆä¸­ï¼›å¾…å‡½æ•°æ‰§è¡Œå®Œæ¯•åï¼Œå¯¹åº”çš„ä¸Šä¸‹æ–‡åˆä¼šä»è°ƒç”¨æ ˆä¸­è¢«<code>pop</code>å‡ºæ¥ã€‚å› æ­¤ï¼Œå³ä¾¿äºŒå‰æ ‘çš„é€’å½’è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œå¹¶æ²¡æœ‰å‡ºç°æ ˆè¿™ç§æ•°æ®ç»“æ„ï¼Œä¹Ÿä¾ç„¶æ”¹å˜ä¸äº†é€’å½’çš„æœ¬è´¨æ˜¯æ ˆçš„äº‹å®ã€‚</p>
</li>
<li>
<p>å…¶æ¬¡ï¼ŒDFS ä½œä¸ºä¸€ç§æ€æƒ³ï¼Œå®ƒå’Œæ ‘çš„é€’å½’éå†ä¸€è„‰ç›¸æ‰¿ã€å´å¹¶ä¸èƒ½å®Œå…¨åœ°ç”»ä¸Šç­‰å·â€”â€”DFS çš„è§£é¢˜åœºæ™¯å…¶å®æœ‰å¾ˆå¤šï¼Œå…¶ä¸­æœ‰ä¸€ç±»ä¼šè¦æ±‚æˆ‘ä»¬è®°å½•æ¯ä¸€å±‚é€’å½’å¼é‡Œè·¯å¾„çš„çŠ¶æ€ï¼Œæ­¤æ—¶å°±ä¼šå¼ºä¾èµ–æ ˆç»“æ„ï¼ˆè¿™ä¸€ç‚¹ä¼šåœ¨ä¸‹ä¸€èŠ‚çš„çœŸé¢˜å®æˆ˜ä¸­ä½“ç°å¾—æ·‹æ¼“å°½è‡´ï¼‰ã€‚</p>
</li>
</ul>
<p>åŸºäºä¸Šè¿°çš„ä¸¤ä¸ªä¾‹å­ï¼Œç›¸ä¿¡å¤§å®¶å·²ç»å¯¹æ·±åº¦ä¼˜å…ˆæœç´¢çš„æ€æƒ³å’Œå®ç°æ€è·¯å½¢æˆäº†è‡ªå·±çš„ç†è§£ã€‚æœ¬èŠ‚æˆ‘ä»¬ç€é‡ç†è§£æ¦‚å¿µï¼Œä¸æ€¥ç€åšé¢˜â€”â€”æ·±åº¦ä¼˜å…ˆæœç´¢çš„åº”ç”¨æ˜¯éå¸¸å¹¿æ³›çš„ï¼Œåœ¨åç»­çš„å°èŠ‚ä¸­ï¼Œå¤§å®¶è‡ªç„¶ä¼šè§åˆ°è®¸è®¸å¤šå¤šä½¿ç”¨é€’å½’æ¥å®ç°æ·±åº¦ä¼˜å…ˆæœç´¢çš„å®æˆ˜æ¡ˆä¾‹ã€‚</p>
<h2 data-id="heading-32">å¹¿åº¦ä¼˜å…ˆæœç´¢æ€æƒ³â€”â€”æ‰¾åˆ°è¿·å®«å‡ºå£çš„å¦ä¸€ç§æ€è·¯</h2>
<p>æˆ‘ä»¬å›å¤´å†æ¥çœ‹çœ‹è¿™ä¸ªè¿·å®«ç»“æ„ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/18/1718dd0887578d3d~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1098&amp;h=636&amp;s=66802&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<p>å½“æˆ‘ä»¬ä½¿ç”¨æ·±åº¦ä¼˜å…ˆæœç´¢æ¥å¯»æ‰¾è¿·å®«å‡ºå£æ—¶ï¼Œä¼šèµ°å‡ºå›¾ç¤ºè¿™æ ·ä¸€æ¡ä¸€æ¡çš„å®Œæ•´è·¯å¾„ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/19/17190aa8a73ba344~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1128&amp;h=644&amp;s=95270&amp;e=png" alt="" loading="lazy"/></p>
<p>å…¶ä¸­çº¢è‰²çš„åœ†ç‚¹æ„å‘³ç€è·¯å¾„çš„èµ·ç‚¹ï¼Œçº¢è‰²ç®­å¤´æ„å‘³ç€è·¯å¾„çš„ç»ˆç‚¹ã€‚æˆ‘ä»¬çœ‹åˆ°ä»èµ·ç‚¹å¼€å§‹ï¼Œä¸€å…±æ¢ç´¢å‡ºäº† 5 æ¡å®Œæ•´çš„è·¯å¾„ã€‚</p>
<p>ä¸æ·±åº¦ä¼˜å…ˆæœç´¢ä¸åŒçš„æ˜¯ï¼Œå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰å¹¶ä¸æ‰§ç€äºâ€œä¸€å¾€æ— å‰â€è¿™ä»¶äº‹æƒ…ã€‚å®ƒå…³å¿ƒçš„æ˜¯<strong>çœ¼ä¸‹è‡ªå·±èƒ½å¤Ÿç›´æ¥åˆ°è¾¾çš„æ‰€æœ‰åæ ‡ï¼Œå…¶åŠ¨ä½œæœ‰ç‚¹ç±»ä¼¼äºâ€œæ‰«æâ€</strong>â€”â€”æ¯”å¦‚è¯´ç«™åœ¨ <code>B</code> è¿™ä¸ªå²”è·¯å£ï¼Œå®ƒä¼šåªå…³æ³¨ <code>C</code>ã€<code>D</code>ã€<code>E</code> ä¸‰ä¸ªåæ ‡ï¼Œè‡³äº <code>F</code>ã€<code>G</code>ã€<code>H</code>ã€<code>I</code>è¿™äº›é¥è¿œçš„åæ ‡ï¼Œç°åœ¨ä¸åœ¨å®ƒçš„å…³å¿ƒèŒƒå›´å†…ï¼š<br/>
<img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/19/17190ddba3cdc06c~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1110&amp;h=650&amp;s=77427&amp;e=png" alt="" loading="lazy"/></p>
<p>åªæœ‰åœ¨èµ°åˆ°äº† <code>E</code>å¤„æ—¶ï¼Œå®ƒå‘ç°æ­¤æ—¶å¯ä»¥è§¦è¾¾çš„åæ ‡å˜æˆäº† <code>F</code>ã€<code>G</code>ï¼Œæ­¤æ—¶æ‰ä¼šå»æ‰«æ<code>F</code>ã€<code>G</code>ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/19/17190e18e27e1e27~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1086&amp;h=646&amp;s=75045&amp;e=png" alt="" loading="lazy"/></p>
<p>æŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œå¹¿åº¦ä¼˜å…ˆæœç´¢æ¯æ¬¡<strong>ä»¥â€œå¹¿åº¦â€ä¸ºç¬¬ä¸€è¦åŠ¡ã€é›¨éœ²å‡æ²¾ï¼Œä¸€å±‚ä¸€å±‚åœ°æ‰«æ</strong>ï¼Œæœ€åä¹Ÿèƒ½å¤Ÿå°†æ‰€æœ‰çš„åæ ‡æ‰«æå®Œå…¨ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/19/17190e64f8853081~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1122&amp;h=666&amp;s=103999&amp;e=png" alt="" loading="lazy"/></p>
<p>å½“æ‰«æåˆ° <code>I</code> çš„æ—¶å€™ï¼Œå‘ç° <code>I</code> æ˜¯å‡ºå£ï¼Œç…§æ ·èƒ½å¤Ÿæ‰¾åˆ°ç­”æ¡ˆã€‚</p>
<p>æŒ‰ç…§ BFS çš„éå†è§„åˆ™ï¼Œå…·ä½“çš„è®¿é—®æ­¥éª¤ä¼šå˜æˆä¸‹é¢è¿™æ ·:</p>
<ol>
<li>ç«™åœ¨å…¥å£<code>A</code>å¤„ï¼ˆç¬¬ä¸€å±‚ï¼‰ï¼Œå‘ç°ç›´æ¥èƒ½æŠµè¾¾çš„åæ ‡åªæœ‰<code>B</code>ï¼Œäºæ˜¯æ¥ä¸‹æ¥éœ€è¦è®¿é—®çš„å°±æ˜¯ <code>B</code>ã€‚</li>
<li>å…¥å£<code>A</code>è®¿é—®å®Œæ¯•ï¼Œèµ°åˆ° <code>B</code> å¤„ï¼ˆç¬¬äºŒå±‚ï¼‰ï¼Œå‘ç°ç›´æ¥èƒ½æŠµè¾¾çš„åæ ‡å˜æˆäº†<code>C</code>ã€<code>D</code>å’Œ<code>E</code>ï¼Œäºæ˜¯æŠŠè¿™ä¸‰ä¸ªåæ ‡è®°ä¸ºä¸‹ä¸€å±‚çš„è®¿é—®å¯¹è±¡ã€‚</li>
<li><code>B</code>è®¿é—®å®Œæ¯•ï¼Œè®¿é—®ç¬¬ä¸‰å±‚ã€‚è¿™é‡Œæˆ‘æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºï¼ˆä½ ä¹Ÿå¯ä»¥æŒ‰ç…§å…¶å®ƒé¡ºåºï¼‰ï¼Œå…ˆè®¿é—® <code>C</code>å’Œ<code>D</code>ï¼Œç„¶åè®¿é—®<code>E</code>ã€‚ç«™åœ¨<code>C</code>å¤„å’Œ<code>D</code>å¤„éƒ½æ²¡æœ‰è§åˆ°æ–°çš„å¯ä»¥ç›´æ¥æŠµè¾¾çš„åæ ‡ï¼Œæ‰€ä»¥ä¸åšé¢å¤–çš„åŠ¨ä½œã€‚ä½†æ˜¯åœ¨<code>E</code>å¤„è§åˆ°äº†å¯ä»¥ç›´æ¥æŠµè¾¾çš„<code>F</code>å’Œ<code>G</code>ï¼Œå› æ­¤æŠŠ<code>F</code>å’Œ<code>G</code>è®°ä¸ºä¸‹ä¸€å±‚ï¼ˆç¬¬å››å±‚ï¼‰éœ€è¦è®¿é—®çš„å¯¹è±¡ã€‚</li>
<li>ç¬¬ä¸‰å±‚è®¿é—®å®Œæ¯•ï¼Œè®¿é—®ç¬¬å››å±‚ã€‚ç¬¬å››å±‚æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºï¼Œå…ˆè®¿é—®çš„æ˜¯ <code>F</code>ã€‚ä»<code>F</code>å‡ºå‘æ²¡æœ‰å¯ä»¥ç›´æ¥è§¦è¾¾çš„åæ ‡ï¼Œå› æ­¤ä¸åšé¢å¤–çš„æ“ä½œã€‚æ¥ç€è®¿é—®<code>G</code>ï¼Œå‘ç°ä»<code>G</code>å‡ºå‘å¯ä»¥ç›´æ¥æŠµè¾¾<code>H</code>å’Œ<code>I</code>ï¼Œå› æ­¤æŠŠ<code>H</code>å’Œ<code>I</code>è®°ä¸ºä¸‹ä¸€å±‚ï¼ˆç¬¬äº”å±‚ï¼‰éœ€è¦è®¿é—®çš„å¯¹è±¡ã€‚</li>
<li>ç¬¬å››å±‚è®¿é—®å®Œæ¯•ï¼Œè®¿é—®ç¬¬äº”å±‚ã€‚ç¬¬äº”å±‚æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºï¼Œå…ˆè®¿é—®çš„æ˜¯<code>H</code>ï¼Œå‘ç°ä»<code>H</code>å‡ºå‘æ²¡æœ‰å¯ä»¥ç›´æ¥æŠµè¾¾çš„åæ ‡ï¼Œå› æ­¤ä¸ä½œé¢å¤–çš„æ“ä½œã€‚æ¥ç€è®¿é—®<code>I</code>ï¼Œå‘ç°<code>I</code>å°±æ˜¯å‡ºå£ï¼Œé—®é¢˜å¾—è§£ã€‚</li>
</ol>
<p>å½“ç„¶å•¦ï¼Œè¿™ä¸ªé—®é¢˜è‹¥é‡‡ç”¨ BFS çš„æ€è·¯æ¥è§£ï¼Œé‚£ä¹ˆå®ƒå…¶å®å·²ç»ä¸èƒ½è¯´æ˜¯ä¸€ä¸ªä¸¥æ ¼çš„è¿·å®«æ¸¸æˆäº†â€”â€”åœ¨ä¸€ä¸ªçœŸæ­£çš„è¿·å®«æ¸¸æˆé‡Œï¼Œå¤§æ¦‚ç‡å¹¶ä¸ä¼šå…è®¸æˆ‘ä»¬å¦‚æ­¤é¡ºåˆ©åœ°é€ä¸ªè®¿é—®èº«åœ¨åŒä¸€å±‚æ¬¡çš„æ‰€æœ‰åæ ‡ï¼ˆæ¯”å¦‚<code>C</code>å’Œ<code>D</code>ä¹‹é—´å¯èƒ½å°±ä¼šéš”äº†åšåšçš„ä¸€å µå¢™ï¼Œå¯¼è‡´ä½ æ— æ³•åœ¨è®¿é—®<code>C</code>åç›´æ¥å»è®¿é—®<code>D</code>ï¼‰ã€‚è¿™é‡Œæˆ‘ä»¬åŸºäºè¿·å®«æ¸¸æˆï¼ŒæŠ½è±¡å‡ºæ¥çš„å…¶å®æ˜¯ä¸€ä¸ªæ›´ä¸ºç®€å•çš„æ¨¡å‹ã€‚å¤§å®¶ä¸å¿…æ‹˜æ³¥äºæ¸¸æˆæœ¬èº«ï¼Œè€Œåº”è¯¥ç€é‡ç†è§£è¿™ä¸ªåˆ†å±‚éå†çš„è¿‡ç¨‹ã€‚</p>
<p>åœ¨åˆ†å±‚éå†çš„è¿‡ç¨‹ä¸­ï¼Œå¤§å®¶ä¼šå‘ç°ä¸¤ä¸ªè§„å¾‹ï¼š</p>
<ol>
<li>æ¯è®¿é—®å®Œæ¯•ä¸€ä¸ªåæ ‡ï¼Œè¿™ä¸ªåæ ‡åœ¨åç»­çš„éå†ä¸­éƒ½ä¸ä¼šå†è¢«ç”¨åˆ°äº†ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒå¯ä»¥è¢«ä¸¢å¼ƒæ‰ã€‚</li>
<li>ç«™åœ¨æŸä¸ªç¡®å®šåæ ‡çš„ä½ç½®ä¸Šï¼Œæˆ‘ä»¬æ‰€è§‚å¯Ÿåˆ°çš„å¯ç›´æ¥æŠµè¾¾çš„åæ ‡ï¼Œæ˜¯éœ€è¦è¢«è®°å½•ä¸‹æ¥çš„ï¼Œå› ä¸ºåç»­çš„éå†è¿˜è¦ç”¨åˆ°å®ƒä»¬ã€‚</li>
</ol>
<p>ä¸¢å¼ƒå·²è®¿é—®çš„åæ ‡ã€è®°å½•æ–°è§‚å¯Ÿåˆ°çš„åæ ‡ï¼Œè¿™ä¸ªé¡ºåºæ¯«æ— ç–‘é—®ç¬¦åˆäº†â€œå…ˆè¿›å…ˆå‡ºâ€çš„åŸåˆ™ï¼Œå› æ­¤æ•´ä¸ª BFS ç®—æ³•çš„å®ç°è¿‡ç¨‹ï¼Œ<strong>å’Œé˜Ÿåˆ—æœ‰ç€å¯†ä¸å¯åˆ†çš„å…³ç³»</strong>ã€‚<br/>
ä¸‹é¢æˆ‘ç”¨ä¸€ä¸ªé˜Ÿåˆ— <code>queue</code> æ¥æ¨¡æ‹Ÿä¸€ä¸‹ä¸Šé¢çš„è¿‡ç¨‹ï¼š</p>
<ol>
<li>åˆå§‹åŒ–ï¼Œå…ˆå°†å…¥å£<code>A</code>å…¥é˜Ÿï¼ˆ<code>queue</code>é‡Œç°åœ¨åªæœ‰<code>A</code>ï¼‰ã€‚</li>
<li>è®¿é—®å…¥å£<code>A</code>ï¼ˆç¬¬ä¸€å±‚ï¼‰ï¼Œè®¿é—®å®Œæ¯•åå°†<code>A</code>å‡ºé˜Ÿã€‚å‘ç°ç›´æ¥èƒ½æŠµè¾¾çš„åæ ‡åªæœ‰<code>B</code>ï¼Œäºæ˜¯å°†<code>B</code>å…¥é˜Ÿï¼ˆ<code>queue</code>é‡Œç°åœ¨åªæœ‰<code>B</code>ï¼‰ã€‚</li>
<li>è®¿é—®<code>B</code>ï¼ˆç¬¬äºŒå±‚ï¼‰ï¼Œè®¿é—®å®Œæ¯•åå°†<code>B</code>å‡ºé˜Ÿã€‚å‘ç°ç›´æ¥èƒ½æŠµè¾¾çš„åæ ‡å˜æˆäº†<code>C</code>ã€<code>D</code>å’Œ<code>E</code>ï¼Œäºæ˜¯æŠŠè¿™ä¸‰ä¸ªåæ ‡è®°ä¸ºä¸‹ä¸€å±‚çš„è®¿é—®å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æŠŠå®ƒä»¬å…¨éƒ¨å…¥é˜Ÿï¼ˆ<code>queue</code>é‡Œç°åœ¨æ˜¯<code>C</code>ã€<code>D</code>ã€<code>E</code>ï¼‰</li>
<li>è®¿é—®ç¬¬ä¸‰å±‚ã€‚è¿™é‡Œæˆ‘æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºï¼ˆä½ ä¹Ÿå¯ä»¥æŒ‰ç…§å…¶å®ƒé¡ºåºï¼‰ï¼Œå…ˆè®¿é—® <code>C</code>ï¼ˆè®¿é—®å®Œæ¯•å<code>C</code>å‡ºé˜Ÿï¼‰å’Œ<code>D</code>ï¼ˆè®¿é—®å®Œæ¯•å<code>D</code>å‡ºé˜Ÿï¼‰ï¼Œç„¶åè®¿é—®<code>E</code>ï¼ˆè®¿é—®å®Œæ¯•å<code>E</code>å‡ºé˜Ÿï¼‰ã€‚è®¿é—®<code>C</code>å¤„å’Œ<code>D</code>å¤„éƒ½æ²¡æœ‰è§åˆ°æ–°çš„å¯ä»¥ç›´æ¥æŠµè¾¾çš„åæ ‡ï¼Œæ‰€ä»¥ä¸åšé¢å¤–çš„åŠ¨ä½œã€‚ä½†æ˜¯åœ¨<code>E</code>å¤„æˆ‘ä»¬è§åˆ°äº†å¯ä»¥ç›´æ¥æŠµè¾¾çš„<code>F</code>å’Œ<code>G</code>ï¼Œå› æ­¤æŠŠ<code>F</code>å’Œ<code>G</code>è®°ä¸ºä¸‹ä¸€å±‚ï¼ˆç¬¬å››å±‚ï¼‰éœ€è¦è®¿é—®çš„å¯¹è±¡ï¼Œ<code>F</code>ã€<code>G</code>ä¾æ¬¡å…¥é˜Ÿï¼ˆ<code>queue</code>é‡Œç°åœ¨æ˜¯ <code>F</code>ã€<code>G</code>ï¼‰ã€‚</li>
<li>è®¿é—®ç¬¬äº”å±‚ã€‚ç¬¬äº”å±‚æŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºï¼Œå…ˆè®¿é—®çš„æ˜¯<code>H</code>ï¼ˆè®¿é—®å®Œæ¯•å<code>H</code>å‡ºé˜Ÿï¼‰ï¼Œå‘ç°ä»<code>H</code>å‡ºå‘æ²¡æœ‰å¯ä»¥ç›´æ¥æŠµè¾¾çš„åæ ‡ï¼Œå› æ­¤ä¸ä½œé¢å¤–çš„æ“ä½œã€‚æ¥ç€è®¿é—®<code>I</code>ï¼ˆè®¿é—®å®Œæ¯•å<code>I</code>å‡ºé˜Ÿï¼‰ï¼Œå‘ç°<code>I</code>å°±æ˜¯å‡ºå£ï¼Œé—®é¢˜å¾—è§£ï¼ˆæ­¤æ—¶ <code>queue</code> é˜Ÿåˆ—å·²ç»è¢«æ¸…ç©ºï¼‰ã€‚</li>
</ol>
<p>åœ¨è¿™ä¸ªè¿‡ç¨‹é‡Œï¼Œæˆ‘ä»¬å…¶å®å¾ªç¯å¾€å¤åœ°åšäº†ä»¥ä¸‹äº‹æƒ…ï¼š<br/>
ä¾æ¬¡è®¿é—®é˜Ÿåˆ—é‡Œå·²ç»æœ‰çš„åæ ‡ï¼Œå°†å…¶å‡ºé˜Ÿï¼›è®°å½•ä»å½“å‰åæ ‡å‡ºå‘å¯ç›´æ¥æŠµè¾¾çš„æ‰€æœ‰åæ ‡ï¼Œå°†å…¶å…¥é˜Ÿã€‚</p>
<p>ä»¥ä¸Šé€»è¾‘ç”¨ä¼ªä»£ç è¡¨è¿°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">BFS</span>(<span class="hljs-params">å…¥å£åæ ‡</span>) {
    <span class="hljs-keyword">const</span> queue = [] <span class="hljs-comment">// åˆå§‹åŒ–é˜Ÿåˆ—queue</span>
    <span class="hljs-comment">// å…¥å£åæ ‡é¦–å…ˆå…¥é˜Ÿ</span>
    queue.<span class="hljs-title function_">push</span>(å…¥å£åæ ‡)
    <span class="hljs-comment">// é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œè¯´æ˜æ²¡æœ‰éå†å®Œå…¨</span>
    <span class="hljs-keyword">while</span>(queue.<span class="hljs-property">length</span>) {
        <span class="hljs-keyword">const</span> top = queue[<span class="hljs-number">0</span>] <span class="hljs-comment">// å–å‡ºé˜Ÿå¤´å…ƒç´   </span>
        
        è®¿é—® top <span class="hljs-comment">// æ­¤å¤„æ˜¯ä¸€äº›å’Œ top ç›¸å…³çš„é€»è¾‘ï¼Œæ¯”å¦‚è®°å½•å®ƒå¯¹åº”çš„ä¿¡æ¯ã€æ£€æŸ¥å®ƒçš„å±æ€§ç­‰ç­‰</span>
        
        <span class="hljs-comment">// æ³¨æ„è¿™é‡Œä¹Ÿå¯ä»¥ä¸ç”¨ for å¾ªç¯ï¼Œè§†é¢˜æ„è€Œå®š</span>
        <span class="hljs-keyword">for</span>(æ£€æŸ¥ top å…ƒç´ å‡ºå‘èƒ½å¤Ÿéå†åˆ°çš„æ‰€æœ‰å…ƒç´ )  {
            queue.<span class="hljs-title function_">push</span>(topèƒ½å¤Ÿç›´æ¥æŠµè¾¾çš„å…ƒç´ )
        }
        
        queue.<span class="hljs-title function_">shift</span>() <span class="hljs-comment">// è®¿é—®å®Œæ¯•ã€‚å°†é˜Ÿå¤´å…ƒç´ å‡ºé˜Ÿ</span>
    }
}
</code></pre>
<p>æ³¨æ„ï¼Œç†è®ºä¸Šæ¥è¯´åªè¦æˆ‘ä»¬æ‹¿åˆ°äº† <code>top</code>ï¼Œé‚£ä¹ˆå°±ä¸å†å…³å¿ƒé˜Ÿå¤´å…ƒç´ äº†ã€‚å› æ­¤è¿™ä¸ª <code>shift</code> å‡ºé˜Ÿçš„è¿‡ç¨‹ï¼Œå…¶å®æ˜¯æ¯”è¾ƒçµæ´»çš„ã€‚ä¸€èˆ¬åªè¦æˆ‘ä»¬æ‹¿åˆ°äº† <code>top</code>ï¼Œå°±å¯ä»¥æ‰§è¡Œ <code>shift</code>äº†ã€‚ä¸€äº›åŒå­¦ä¹ æƒ¯äºæŠŠ<code>top</code>å…ƒç´ çš„è®¿é—®å’Œå‡ºé˜Ÿæ”¾åœ¨ä¸€èµ·æ¥åšï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> top = queue.<span class="hljs-title function_">shift</span>()
</code></pre>
<p>è¿™æ ·åšä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼ˆé™¤éé¢˜ç›®ä¸­å¯¹å‡ºé˜Ÿçš„æ—¶æœºæœ‰å¼ºçº¦æŸï¼Œä½†è¿™ç§æƒ…å†µéå¸¸å°‘è§ï¼‰ã€‚</p>
<h2 data-id="heading-33">BFSå®æˆ˜ï¼šäºŒå‰æ ‘çš„å±‚åºéå†</h2>
<p>å¤§å®¶ç°åœ¨å›é¡¾ä¸€ä¸‹æˆ‘ä»¬åœ¨ç¬¬ 5 èŠ‚å±•ç¤ºè¿‡çš„è¿™ä¸ªäºŒå‰æ ‘å®ä¾‹ï¼š<br/>
<img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/6/1714ec60340dc2db~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1098&amp;h=718&amp;s=54834&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<p>è¿™æ£µäºŒå‰æ ‘çš„ç¼–ç å®ç°å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> root = {
  <span class="hljs-attr">val</span>: <span class="hljs-string">"A"</span>,
  <span class="hljs-attr">left</span>: {
    <span class="hljs-attr">val</span>: <span class="hljs-string">"B"</span>,
    <span class="hljs-attr">left</span>: {
      <span class="hljs-attr">val</span>: <span class="hljs-string">"D"</span>
    },
    <span class="hljs-attr">right</span>: {
      <span class="hljs-attr">val</span>: <span class="hljs-string">"E"</span>
    }
  },
  <span class="hljs-attr">right</span>: {
    <span class="hljs-attr">val</span>: <span class="hljs-string">"C"</span>,
    <span class="hljs-attr">right</span>: {
      <span class="hljs-attr">val</span>: <span class="hljs-string">"F"</span>
    }
  }
};
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬è¦åšçš„æ˜¯å¯¹è¿™ä¸ªäºŒå‰æ ‘è¿›è¡Œå±‚åºéå†ã€‚å±‚åºéå†çš„æ¦‚å¿µå¾ˆå¥½ç†è§£ï¼šæŒ‰ç…§å±‚æ¬¡çš„é¡ºåºï¼Œä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³åœ°éå†ä¸€ä¸ªäºŒå‰æ ‘ï¼Œå¦‚å›¾æ‰€ç¤ºï¼ˆçº¢è‰²æ•°å­—å³ä¸ºéå†çš„åºå·ï¼‰ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/19/1719130c81086dbb~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1194&amp;h=770&amp;s=110864&amp;e=png" alt="" loading="lazy"/></p>
<p>æ­£ç¡®çš„éå†åºåˆ—ä¸ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">A</span>
<span class="hljs-selector-tag">B</span>
C
D
E
F
</code></pre>
<p>çœ‹åˆ°â€œå±‚æ¬¡â€å…³é”®å­—ï¼Œå¤§å®¶åº”è¯¥ç«‹åˆ»æƒ³åˆ°â€œæ‰«æâ€ï¼›æƒ³åˆ°â€œæ‰«æâ€ï¼Œå°±åº”è¯¥ç«‹åˆ»æƒ³åˆ° BFSã€‚å› æ­¤å±‚åºéå†ï¼Œæˆ‘ä»¬å°±ç”¨ BFS çš„æ€è·¯æ¥å®ç°ã€‚è¿™é‡Œå’±ä»¬å¯ä»¥ç›´æ¥å¥—ç”¨ä¸Šé¢çš„ä¼ªä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">BFS</span>(<span class="hljs-params">root</span>) {
    <span class="hljs-keyword">const</span> queue = [] <span class="hljs-comment">// åˆå§‹åŒ–é˜Ÿåˆ—queue</span>
    <span class="hljs-comment">// æ ¹ç»“ç‚¹é¦–å…ˆå…¥é˜Ÿ</span>
    queue.<span class="hljs-title function_">push</span>(root)
    <span class="hljs-comment">// é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œè¯´æ˜æ²¡æœ‰éå†å®Œå…¨</span>
    <span class="hljs-keyword">while</span>(queue.<span class="hljs-property">length</span>) {
        <span class="hljs-keyword">const</span> top = queue[<span class="hljs-number">0</span>] <span class="hljs-comment">// å–å‡ºé˜Ÿå¤´å…ƒç´   </span>
        <span class="hljs-comment">// è®¿é—® top</span>
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(top.<span class="hljs-property">val</span>)
        <span class="hljs-comment">// å¦‚æœå·¦å­æ ‘å­˜åœ¨ï¼Œå·¦å­æ ‘å…¥é˜Ÿ</span>
        <span class="hljs-keyword">if</span>(top.<span class="hljs-property">left</span>) {
            queue.<span class="hljs-title function_">push</span>(top.<span class="hljs-property">left</span>)
        }
        <span class="hljs-comment">// å¦‚æœå³å­æ ‘å­˜åœ¨ï¼Œå³å­æ ‘å…¥é˜Ÿ</span>
        <span class="hljs-keyword">if</span>(top.<span class="hljs-property">right</span>) {
            queue.<span class="hljs-title function_">push</span>(top.<span class="hljs-property">right</span>)
        }
        queue.<span class="hljs-title function_">shift</span>() <span class="hljs-comment">// è®¿é—®å®Œæ¯•ï¼Œé˜Ÿå¤´å…ƒç´ å‡ºé˜Ÿ</span>
    }
}
</code></pre>
<p>æ‰§è¡Œ BFSï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">BFS</span>(root)
</code></pre>
<p>è¾“å‡ºç»“æœç¬¦åˆé¢„æœŸï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/19/171913194faccc17~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=816&amp;h=318&amp;s=17031&amp;e=png" alt="" loading="lazy"/></p>
<h2 data-id="heading-34">ç»“è¯­</h2>
<p>ç»è¿‡æœ¬èŠ‚çš„å­¦ä¹ ï¼Œç›¸ä¿¡å¤§å®¶å¯¹ DFSã€BFS çš„æ ¸å¿ƒæ€æƒ³åŠå®ç°æ–¹æ³•éƒ½æœ‰äº†æ¯”è¾ƒæ‰å®çš„æŒæ¡ã€‚è¿™ä¸¤ç§ç®—æ³•åœ¨æˆ‘ä»¬ä»Šåçš„åšé¢˜è¿‡ç¨‹ä¸­ä¼šåå¤å‡ºç°ï¼Œå½¼æ—¶å¤§å®¶ä¼šå¯¹å®ƒä»¬çš„åº”ç”¨åœºæ™¯æœ‰æ›´åŠ æ·±åˆ»çš„è®¤çŸ¥ã€‚</p>
<p>ï¼ˆé˜…è¯»è¿‡ç¨‹ä¸­æœ‰ä»»ä½•æƒ³æ³•æˆ–ç–‘é—®ï¼Œæˆ–è€…å•çº¯å¸Œæœ›å’Œç¬”è€…äº¤ä¸ªæœ‹å‹å•¥çš„ï¼Œæ¬¢è¿å¤§å®¶æ·»åŠ æˆ‘çš„å¾®ä¿¡xyalinodeä¸æˆ‘äº¤æµå“ˆ~ï¼‰</p>
<h2 data-id="heading-35">åœ¨å¼€å§‹ä¹‹å‰</h2>
<p>æ ¹æ®æˆ‘æ·±è€•æŠ€æœ¯å†™ä½œå¤šå¹´çš„ç»éªŒï¼Œå¾ˆå¤šåŒå­¦ä¸€çœ‹åˆ°æ ‡é¢˜é‡Œæœ‰â€œæ€æƒ³â€ä¸¤ä¸ªå­—ï¼Œå°±ä¼šè§‰å¾—æ¥ä¸‹æ¥è¦è®²çš„ä¸€å®šæ˜¯ä¸€ä¸ªéå¸¸å¤æ‚çš„â€œé«˜å¤§ä¸Šâ€ç†è®ºï¼Œäºæ˜¯ä»–ä¼šå…ˆç»™è‡ªå·±ç®ä¸Šä¸€ä¸ªâ€œæˆ‘ä¸€å®šå­¦ä¸ä¼šâ€çš„ç´§ç®å’’ï¼Œæ¥ç€å¿ƒé‡Œå°±å¼€å§‹æ‰“é€€å ‚é¼“äº†ã€‚è¿™æ ·çš„åŒå­¦åœ¨å’Œç®—æ³•æ­£é¢äº¤é”‹ä¹‹å‰ï¼Œå°±å…ˆè¢«è‡ªå·±å†…å¿ƒçš„ææƒ§å‡»å®äº†ï¼Œå®åœ¨å¯æƒœã€‚Â <br/>Â  Â Â <br/>ç«™åœ¨è®²è§£è€…çš„è§’åº¦æ¥è¯´ï¼Œæˆ‘ç¡®å®ä¸ä¼šå…ˆç»™å¤§å®¶ç”»ä¸ªé¥¼ï¼Œè¯´è¿™ç©æ„å„¿æœ‰å¤šä¹ˆå¤šä¹ˆç®€å•â€”â€”è¿™æ˜¯ä¸€ä¸ªéå¸¸ä¸è´Ÿè´£ä»»çš„æ‰¿è¯ºã€‚å› ä¸ºå¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œæ²¡æœ‰ä»€ä¹ˆæ˜¯ç®€å•çš„ï¼Œä»ä¸ä¼šåˆ°ä¼šæœ¬æ¥å°±æ˜¯ä¸€ä¸ªè¿‡ç¨‹ã€‚å†µä¸”ï¼Œä½ ç°åœ¨å­¦çš„æ˜¯ä¸å°‘å‰ç«¯eréƒ½ä¸è‚¯å­¦/å­¦ä¸åŠ¨çš„ç®—æ³•ï¼Œè¿™æœ¬å°±ä¸æ˜¯ä¸€ä¸ªè½»æ¾çš„æŒ‘æˆ˜ã€‚ä½†æ—¢ç„¶èµ°åˆ°äº†è¿™ä¸€æ­¥ï¼Œä¸ç®¡ä½ è¿™ä¼šå„¿å¿ƒé‡Œæœ‰å¤šæ…Œï¼Œæˆ‘éƒ½å¸Œæœ›ä½ å¯ä»¥åšæŒä¸€ä¸‹ã€è¯»è¯»çœ‹ï¼Œä½ ä¼šå‘ç°è¿™ç©æ„å„¿çœŸçš„ä¸æ˜¯ç„å­¦â€”â€”å®ƒçœŸçš„å¾ˆé¦™ã€‚Â  Â <br/> Â  Â Â <br/></p>
<p><a name="user-content-Cj7I7" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-36">å¦‚ä½•å­¦å¥½è¿™ä¸€èŠ‚</h2>
<p>ä¸å¯å¦è®¤ï¼Œåœ¨ä¸€äº›ä¼ ç»Ÿæ•™æé‡Œï¼Œè°ˆåŠâ€œæ€æƒ³â€å¿…å®šä¼šæœ‰å¤§æ®µç†è®ºæ–‡å­—çš„å †ç Œï¼Œè¿™ä¹Ÿæ˜¯å¾ˆå¤šåŒå­¦å­¦å®Œæ•°æ®ç»“æ„ç›´æ¥æ”¾å¼ƒå­¦ä¹ ç®—æ³•æ€æƒ³çš„é‡è¦åŸå› ã€‚Â  Â <br/> <br/>ä½†ç«™åœ¨é¢è¯•çš„è§’åº¦æ¥çœ‹ï¼Œç®—æ³•ç›¸å…³çš„è€ƒå¯Ÿå‡ ä¹ä¸å­˜åœ¨â€œèƒŒçŸ¥è¯†ç‚¹â€è¿™ç§å½¢å¼ï¼Œæ›´å¤šè¿˜æ˜¯çœ‹ä½ èƒ½ä¸èƒ½æŠŠé¢˜åšå‡ºæ¥ã€‚ç®—æ³•æ€æƒ³æ˜¯æŠ½è±¡çš„ï¼Œé¢˜ç›®å´æ˜¯å…·ä½“çš„ã€‚æˆ‘ä»¬å¸¸è¯´â€œä»¥é¢˜ä¸ºçº²â€ï¼Œå…¶ç›®çš„å°±æ˜¯å¸®åŠ©å¤§å®¶ç«™åœ¨å…·ä½“å»ç†è§£æŠ½è±¡ã€‚Â Â <br/> <br/>æœ¬èŠ‚æˆ‘ä»¬å…ˆä¸ç”¨çº ç»“ä»€ä¹ˆæ˜¯é€’å½’ã€ä»€ä¹ˆæ˜¯å›æº¯ï¼Œè€Œæ˜¯ç›´æ¥æ¥åšä¸€é“é¢˜ï¼Œä»é¢˜ä¸­å»è®¤è¯†æ‰€è°“çš„â€œæ€æƒ³â€ã€‚Â Â <br/> <br/>é€šè¿‡æœ¬èŠ‚çš„å­¦ä¹ ï¼Œæˆ‘å¸Œæœ›å¤§å®¶èƒ½å¤Ÿè®¤è¯†åˆ°ï¼Œâ€œæ€æƒ³â€å¹¶ä¸æ˜¯ä¸€å¨å‰ªä¸æ–­ç†è¿˜ä¹±ã€å­¦äº†åªèƒ½ç”¨æ¥å¹æ°´çš„è™šæ— æ¦‚å¿µã€‚â€œæ€æƒ³â€æœ¬è´¨ä¸Šå°±æ˜¯å¥—è·¯ï¼Œè€Œä¸”æ˜¯æ™®é€‚æ€§éå¸¸å¼ºçš„å¥—è·¯ï¼Œå®ƒæœ‰ç€å¤§é‡çš„å¯¹å£é—®é¢˜ã€‚æå®šäº†å®ƒï¼Œå°±æå®šäº†ä¸€å¤§æ³¢é¢è¯•é¢˜â€”â€”çˆ½ä¸çˆ½ï¼Ÿè¦æƒ³çˆ½è¿™ä¸€æŠŠï¼Œå°±ä¸è¦è½»æ˜“æ’¤é€€ã€‚Â Â <br/>Â Â <br/></p>
<p><a name="user-content-pwQVt" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-37">å…³é”®å¥—è·¯åˆç›¸è§ï¼šå…¨æ’åˆ—é—®é¢˜Â </h2>
<blockquote>
<p>é¢˜ç›®æè¿°ï¼šç»™å®šä¸€ä¸ª<strong>æ²¡æœ‰é‡å¤</strong>æ•°å­—çš„åºåˆ—ï¼Œè¿”å›å…¶æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ—ã€‚</p>
</blockquote>
<p>Â Â </p>
<blockquote>
<p>ç¤ºä¾‹ï¼šÂ  Â <br/>
è¾“å…¥: [1,2,3]<br/>
è¾“å‡º:
[<br/>
[1,2,3],<br/>
[1,3,2],<br/>
[2,1,3],<br/>
[2,3,1],<br/>
[3,1,2],<br/>
[3,2,1]<br/>
]</p>
</blockquote>
<p><a name="user-content-WtuIE" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-38">æ€è·¯åˆ†æ</h3>
<p>â€œå…¨æ’åˆ—â€æ˜¯é«˜ä¸­æ•°å­¦é‡Œçš„ä¸€ä¸ªæ¦‚å¿µï¼Œè¿™é‡Œå…ˆå¸¦å¤§å®¶å¤ä¹ ä¸€ä¸‹ï¼šÂ </p>
<blockquote>
<p>ä»nä¸ªä¸åŒå…ƒç´ ä¸­ä»»å–mï¼ˆmâ‰¤nï¼‰ä¸ªå…ƒç´ ï¼ŒæŒ‰ç…§ä¸€å®šçš„é¡ºåºæ’åˆ—èµ·æ¥ï¼Œå«åšä»nä¸ªä¸åŒå…ƒç´ ä¸­å–å‡ºmä¸ªå…ƒç´ çš„ä¸€ä¸ªæ’åˆ—ã€‚å½“m=næ—¶æ‰€æœ‰çš„æ’åˆ—æƒ…å†µå«å…¨æ’åˆ—ã€‚</p>
</blockquote>
<p>ä¸è¿‡å°±ç®—ä½ å·²ç»å®Œå…¨å¿˜äº†â€œå…¨æ’åˆ—â€åˆ°åº•æ˜¯ä¸€ä¸ªä»€ä¹ˆæ ·çš„æ•°å­¦æ¦‚å¿µï¼Œä¹Ÿæ²¡æœ‰å…³ç³»ã€‚ç»“åˆé¢˜ç›®æè¿°å’Œç¤ºä¾‹ï¼Œæˆ‘ä»¬ä¾ç„¶å¯ä»¥åˆ†æå‡ºè¿™é“é¢˜æƒ³è®©æˆ‘ä»¬åšçš„äº‹æƒ…ï¼šæ‹¿åˆ°ä¸€ä¸ª n ä¸ªæ•°çš„æ•°ç»„ä½œä¸ºå…¥å‚ï¼Œç©·ä¸¾å‡ºè¿™ n ä¸ªæ•°çš„æ‰€æœ‰æ’åˆ—æ–¹å¼ã€‚Â  Â Â <br/>Â Â <br/>å“ï¼Ÿç­‰ç­‰ï¼Œæˆ‘å¥½åƒçœ‹åˆ°ä¸€ä¸ªç†Ÿæ‚‰çš„è¯çœ¼â€”â€”<strong>ç©·ä¸¾</strong>ï¼æ¥¼ä¸Šæ˜¯ä¸æ˜¯è¯´äº†ç©·ä¸¾ï¼Ÿæˆ‘ä»¬æœ€è¿‘è¿˜åœ¨å“ªé‡Œè§è¿‡ç©·ä¸¾ï¼Ÿæ˜¯ä¸æ˜¯åœ¨ä¸Šä¸€èŠ‚ï¼Ÿä¸Šä¸€èŠ‚çš„å“ªä¸ªä½ç½®ï¼ŸDFS å¯¹ä¸å¯¹ï¼ŸDFS ç”¨ä»€ä¹ˆå®ç°æ¯”è¾ƒå¥½ï¼Ÿé€’å½’ï¼å¥½ï¼Œæ¥å¾—æ—©ä¸å¦‚æ¥å¾—å·§ï¼Œæˆ‘ç°åœ¨å°±å†³å®šç”¨é€’å½’æ¥åšè¿™ä¸ªé¢˜ã€‚Â Â <br/></p>
<pre><code class="hljs language-!" lang="!">å¦‚æœä½ çš„è„‘å›è·¯æš‚æ—¶æ²¡æœ‰ååº”å‡ºæ¥ä¸Šé¢è¿™äº›çŸ¥è¯†ç‚¹ä¹‹é—´çš„å…³è”å…³ç³»ï¼Œä¹Ÿä¸è¦ç€æ€¥ã€‚æ–°æ‰‹ä¸Šè·¯ï¼Œè¿™å¾ˆæ­£å¸¸ã€‚    

åšå®Œä¸‹é¢ä¸€ç³»åˆ—çš„é¢˜ç›®ä¹‹åï¼Œæˆ‘ä¼šè·Ÿå¤§å®¶ä»‹ç»è¿™ç±»é¢˜ç›®çš„å…³é”®ç‰¹å¾ï¼Œåˆ°æ—¶å€™ä¼šæœ‰æ›´ç›´ç™½çš„å¥—è·¯å¯ä»¥ç”¨ã€‚ç°åœ¨å…ˆä¸è¦æ…Œï¼Œè·Ÿç€æˆ‘çš„æ€è·¯å¾€ä¸‹èµ°ï¼Œå¥½å¥½æ•²ä»£ç     
</code></pre>
<p>æ€ä¹ˆåšå‘¢ï¼Ÿå¤§å®¶ä»”ç»†æƒ³æƒ³ï¼Œåœ¨è¿™ä¸ªå˜åŒ–çš„åºåˆ—ä¸­ï¼Œä¸å˜çš„æ˜¯ä»€ä¹ˆâ€”â€”æ˜¯ä¸æ˜¯å‘ä½çš„æ•°é‡ï¼Ÿæ‹¿ç¤ºä¾‹æ¥è¯´ï¼Œä¸ç®¡æˆ‘æ€ä¹ˆè°ƒæ•´æ•°å­—çš„é¡ºåºï¼Œå®ƒä»¬éƒ½åªèƒ½å›´ç€è¿™ 3 ä¸ªå‘æ‰“è½¬ã€‚<strong>å½“æˆ‘ä»¬æ„Ÿåˆ°å˜åŒ–éš¾ä»¥æŠŠæ¡æ—¶ï¼Œä¸å¦‚å°è¯•å…ˆä»ä¸å˜çš„ä¸œè¥¿å…¥æ‰‹</strong>ã€‚è¿™é‡Œæˆ‘æŠŠå‘ä½ç»™å¤§å®¶ç”»å‡ºæ¥ï¼š<br/><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/3/171da9a215aa6c68~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=994&amp;h=646&amp;s=23649&amp;e=png" alt="image.png" loading="lazy"/><br/>Â Â <br/>ç°åœ¨é—®é¢˜å˜æˆäº†ï¼Œæˆ‘æ‰‹é‡Œæœ‰ 3 ä¸ªæ•°ï¼Œè¦å¾€è¿™ 3 ä¸ªå‘é‡Œå¡«ï¼Œæœ‰å‡ ç§å¡«æ³•ï¼Ÿæˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªå‘æ¥çœ‹ï¼šÂ Â </p>
<ul>
<li><strong>Step1</strong>:ï¼šé¢å¯¹ç¬¬ä¸€ä¸ªå‘ï¼Œæˆ‘æœ‰3ç§é€‰æ‹©ï¼šå¡«1ã€å¡«2ã€å¡«3ï¼Œéšæœºé€‰æ‹©å…¶ä¸­ä¸€ä¸ªå¡«è¿›å»å³å¯ã€‚</li>
<li><strong>Step2</strong>ï¼šé¢å¯¹ç¬¬äºŒä¸ªå‘ï¼Œç”±äº Step1 ä¸­å·²ç»åˆ†å‡ºå»1ä¸ªæ•°å­—ï¼Œç°åœ¨åªå‰©ä¸‹2ä¸ªé€‰æ‹©ï¼šæ¯”å¦‚å¦‚æœ Step1 ä¸­å¡«è¿›å»çš„æ˜¯ 1ï¼Œé‚£ä¹ˆç°åœ¨å°±å‰©ä¸‹2ã€3ï¼›å¦‚æœ Step1 ä¸­å¡«è¿›å»çš„æ˜¯ 2ï¼Œé‚£ä¹ˆå°±å‰©ä¸‹ 1ã€3ã€‚Â  Â </li>
<li><strong>Step3</strong>ï¼š é¢å¯¹ç¬¬ä¸‰ä¸ªå‘ï¼Œç”±äºå‰é¢å·²ç»æ¶ˆè€—äº†2ä¸ªæ•°å­—ï¼Œæ­¤æ—¶æˆ‘ä»¬æ‰‹é‡Œåªå‰©ä¸‹ 1 ä¸ªæ•°å­—äº†ã€‚æ‰€ä»¥è¯´ç¬¬ 3 ä¸ªå‘æ˜¯æ¯«æ— æ‚¬å¿µçš„ï¼Œå®ƒåªæœ‰1ç§å¯èƒ½ã€‚Â  Â </li>
</ul>
<p><br/>æˆ‘ä»¬æŠŠä¸‰ä¸ªå‘çš„æƒ…å†µç»Ÿç­¹èµ·æ¥ï¼Œé‚£ä¹ˆå…¨æ’åˆ—å°±ä¸€å…±æœ‰ <code>3x2x1=6</code>Â  ç§å¯èƒ½ã€‚å¯æƒœè¿™é“é¢˜é—®çš„ä¸æ˜¯å…¨æ’åˆ—çš„å¯èƒ½æ€§æœ‰å¤šå°‘ç§ï¼Œè€Œæ˜¯è¦æ±‚ä½ æŠŠæ¯ä¸€ç§å¯èƒ½æ€§éƒ½<strong>ç©·ä¸¾</strong>å‡ºæ¥ã€‚è¿™å…¶å®æœ‰ç‚¹ç±»ä¼¼äºæˆ‘ä»¬ä¸Šä¸€èŠ‚ç©è¿·å®«æ¸¸æˆçš„æ—¶å€™ï¼Œæ¸¸æˆè§„åˆ™ä¸ä»…è¦æ±‚ä½ å›ç­”å‡ºè¿·å®«çš„é€šå…³æ–¹æ³•æœ‰å‡ ç§ï¼Œè¿˜è¦æ±‚ä½ åˆ—ä¸¾å‡ºæ¯ä¸€æ¡è·¯çš„è·¯å¾„ã€‚<strong>åˆ—ä¸¾â€œè·¯å¾„â€ï¼Œæˆ‘ä»¬é¦–å…ˆè¦æ‰¾åˆ°â€œåæ ‡â€</strong>ã€‚åœ¨è¿™é“é¢˜é‡Œï¼Œâ€œåæ ‡â€å°±æ˜¯æ¯ä¸€ä¸ªå‘é‡Œå¯èƒ½å¡«è¿›çš„æ•°å­—ã€‚æˆ‘æŠŠå®ƒç”»å‡ºæ¥ï¼Œä½ å°±æ˜ç™½äº†ï¼šÂ <br/><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/3/171da9a215c76113~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=648&amp;h=486&amp;s=17866&amp;e=png" alt="image.png" loading="lazy"/><br/><code>root</code>Â æ˜¯ä¸€ä¸ªç©ºåæ ‡ï¼Œæ˜¯æˆ‘ä»¬åˆ†é…æ•°å­—çš„èµ·ç‚¹ã€‚Â  Â <br/>ä½ å¯ä»¥æƒ³è±¡è‡ªå·±æ­¤æ—¶æ­¤åˆ»æ­£æ‰‹æ¡ 3 ä¸ªæ•°å­—ç«™åœ¨ <code>root</code>Â è¿™ä¸ªä½ç½®ä¸Šã€‚çœ¼å‰æ˜¯ç¬¬ä¸€ä¸ªå‘ï¼Œè¿™ä¸ªå‘å‘ä½ é—®é“ï¼šâ€œå°å“¥ï¼Œä½ æ‰“ç®—ç»™æˆ‘å“ªä¸ªæ•°å­—å‘¢ï¼Ÿâ€Â <br/>ä½ è¯´ï¼šâ€œä¸å¥½è¯´ï¼Œè¿™é‡Œæœ‰ 3 ç§å¯èƒ½â€ã€‚ç¬¬ä¸€ä¸ªå‘é‡Œå¯ä»¥å¡«çš„æ•°å­—ï¼Œå¯¹åº”çš„æ˜¯ä»¥ä¸‹ä¸‰ç§æƒ…å†µï¼šÂ Â <br/><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/3/171da9a21761dd46~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=956&amp;h=724&amp;s=44694&amp;e=png" alt="image.png" loading="lazy"/><br/>Â Â <br/>æ¥ç€ï¼Œä½ èµ°åˆ°äº†ç¬¬äºŒä¸ªå‘ã€‚ç¬¬äºŒä¸ªå‘é—®ä½ ï¼šâ€œå°å“¥ï¼Œä½ æ‰“ç®—ç»™æˆ‘å“ªä¸ªæ•°å­—å‘¢ï¼Ÿâ€ã€‚Â <br/>ä½ ä»”ç»†æƒ³æƒ³ï¼Œè¯´ï¼šâ€œä¸å¥½è¯´ï¼Œè¿™è¦çœ‹æˆ‘ç»™äº† 1 å·å‘å“ªä¸ªæ•°å­—ã€‚ä½†å¯ä»¥ç¡®å®šçš„æ˜¯ï¼Œä¸ç®¡æˆ‘ç»™äº† 1 å·å‘å“ªä¸ªæ•°å­—ï¼Œåˆ°ä½ è¿™é‡Œçš„æ—¶å€™ï¼Œéƒ½åªæœ‰ 2 ä¸ªæ•°å­—å¯é€‰äº†â€ã€‚åŸºäº 1 å·å‘çš„åˆ†é…ç»“æœï¼Œ2 å·å‘åˆ†åˆ«æœ‰ä»¥ä¸‹å¯èƒ½ï¼šÂ  Â <br/><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/3/171da9a217acd94b~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1238&amp;h=772&amp;s=73808&amp;e=png" alt="image.png" loading="lazy"/><br/>ç»ˆäºï¼Œä½ èµ°åˆ°äº†ç¬¬ä¸‰ä¸ªå‘ã€‚æ­¤æ—¶ï¼Œä½ æ‰‹é‡Œåªå‰©ä¸‹ 1 ä¸ªæ•°ï¼Œè¿˜æ²¡ç­‰ç¬¬ 3 ä¸ªå‘é—®ä½ è¦ï¼Œä½ å°±å¯¹å®ƒè¯´ï¼šâ€œå“¥ï¼Œåˆ«æŒ‘äº†ï¼Œæˆ‘å°±å‰©ä¸€ä¸ªäº†ï¼Œä½ æ²¡å¾—é€‰â€ã€‚è¯´ç€ï¼Œä½ æŠŠ 1 å·å‘å’Œ 2 å·å‘æŒ‘å®Œå‰©ä¸‹çš„æœ€å 1 ä¸ªæ•°ç»™äº† 3 å·å‘ï¼šÂ Â <br/><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/3/171da9a21bed6cbe~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1304&amp;h=978&amp;s=103304&amp;e=png" alt="image.png" loading="lazy"/><br/>Â Â <br/><strong>æœ‰æ²¡æœ‰å‘ç°ï¼Œä¸çŸ¥ä¸è§‰ä¸­ï¼Œæˆ‘ä»¬æ„é€ å‡ºäº†ä¸€ä¸ªæ ‘ç»“æ„ã€‚</strong><br/>ä»è¿™ä¸ªæ ‘ç»“æ„é‡Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹å‡ºï¼Œå…¨æ’åˆ—çš„æ‰€æœ‰å¯èƒ½æ€§ï¼šÂ Â <br/><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/3/171da9a21d81055e~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1200&amp;h=962&amp;s=141521&amp;e=png" alt="image.png" loading="lazy"/><br/>å›¾ä¸­ä»¥åœ†ç‚¹ä¸ºèµ·ç‚¹ï¼Œä»¥ç®­å¤´ä¸ºç»ˆç‚¹ï¼Œèµ·ç‚¹å’Œç»ˆç‚¹ä¹‹é—´å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ’åˆ—ã€‚<br/> <br/>æˆ‘ä»¬çš„æ€ç»´è·¯å¾„æ˜¯ä¸€ä¸ªæ ‘ç»“æ„ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€æˆ‘ä»¬éœ€è¦çœŸçš„åœ¨ç¼–ç çš„æ—¶å€™å»æ„é€ ä¸€æ£µæ ‘å‡ºæ¥ã€‚å›å¿†ä¸€ä¸‹ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¬èµ°è¿·å®«çš„å„ç§è·¯å¾„ç»„åˆèµ·æ¥ï¼Œæ˜¯ä¸æ˜¯ä¹Ÿæ˜¯ä¸€ä¸ªæ ‘ç»“æ„ï¼Ÿèµ°è¿·å®«æ—¶æˆ‘ä»¬æ²¡æœ‰æ„é€ æ ‘ï¼Œè¿™é‡Œä¹Ÿä¸éœ€è¦æ„é€ æ ‘ã€‚éœ€è¦ä»€ä¹ˆï¼Ÿéœ€è¦<strong>é€’å½’</strong>ï¼Â  Â <br/>Â Â <br/>å³ä¾¿ä¸è”æƒ³å’±ä»¬åˆšåˆšå­¦è¿‡çš„ DFS çŸ¥è¯†ç‚¹ï¼Œè¿™é“é¢˜çš„è§£ç­”æ€è·¯ä¸­ä¹Ÿæœ‰ä¸€ä¸ªéå¸¸å…³é”®çš„ç‰¹å¾åœ¨æé†’ä½ å¾€é€’å½’å»æƒ³ï¼Œé‚£å°±æ˜¯<strong>é‡å¤</strong>ã€‚Â  Â Â <br/> <br/></p>
<pre><code class="hljs language-!" lang="!">è¿™é‡Œç»™å¤§å®¶ä¸€ä¸ªæ€ç»´å·¥å…·ï¼šä»¥ååªè¦åˆ†æå‡ºé‡å¤çš„é€»è¾‘ï¼ˆæ’é™¤æ‰ç±»ä¼¼æ•°ç»„éå†è¿™ç§ç®€å•ç²—æš´çš„é‡å¤ï¼‰ï¼Œä½ éƒ½éœ€è¦æŠŠé€’å½’ä»ä½ çš„å¤§è„‘å†…å­˜é‡Œè°ƒåº¦å‡ºæ¥ã€å°†å…¶åˆ—ä¸ºâ€œå¯ä»¥ä¸€è¯•â€çš„è§£æ³•ä¹‹ä¸€ï¼›åªè¦æƒ³åˆ°é€’å½’ï¼Œç«‹åˆ»å›å¿†æˆ‘ä»¬ä¸Šä¸€èŠ‚è®²çš„ DFS æ€æƒ³ã€ç„¶åå°è¯•å¥—æˆ‘ä»¬è¿™ä¸€èŠ‚æœ«å°¾æ•™ç»™å¤§å®¶çš„è§£é¢˜æ¨¡æ¿ã€‚è¿™ä¸ªè„‘å›è·¯æœªå¿… 100% å‡†ç¡®ï¼Œä½†ç¡®å®æœ‰æé«˜çš„æˆåŠŸæ¦‚ç‡â€”â€”é¢˜ï¼Œæ˜¯æœ‰è§„å¾‹çš„ã€‚è¿™ï¼Œå°±æ˜¯è§„å¾‹ä¹‹ä¸€ã€‚
</code></pre>
<p><br/>åœ¨ä»¥ä¸Šçš„â€œå¡«å‘â€è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é‡å¤åœ°åšäº†ä»¥ä¸‹äº‹æƒ…ï¼šÂ Â </p>
<ol>
<li>æ£€æŸ¥æ‰‹é‡Œå‰©ä¸‹çš„æ•°å­—æœ‰å“ªäº›</li>
<li>é€‰å–å…¶ä¸­ä¸€ä¸ªå¡«è¿›å½“å‰çš„å‘é‡ŒÂ  Â  Â </li>
</ol>
<p><br/>åœ¨ç¬¬ 5 èŠ‚åˆè¯†é€’å½’æ—¶ï¼Œå¤§å®¶å·²ç»çŸ¥é“â€œ<strong>é‡å¤â€çš„å†…å®¹ï¼Œå°±æ˜¯é€’å½’å¼</strong>ã€‚<br/> <br/>è¿™ä¸ªé‡å¤é€’å½’å¼çš„åŠ¨ä½œä¸€ç›´æŒç»­åˆ°äº†æœ€åä¸€ä¸ªæ•°å­—ä¹Ÿè¢«å¡«è¿›å‘é‡Œä¸ºæ­¢â€”â€”â€œ<strong>é‡å¤â€çš„ç»ˆç‚¹ï¼Œå°±æ˜¯é€’å½’è¾¹ç•Œ</strong>ã€‚Â  Â <br/> <br/>è¿™é‡Œå¤§å®¶å½“ç„¶ä¹Ÿå¯ä»¥å€Ÿé‰´éå†äºŒå‰æ ‘çš„ç»éªŒ
ï¼Œé€šè¿‡åˆ¤æ–­æ•°ç»„çš„å¯é€‰æ•°å­—æ˜¯å¦ä¸ºç©ºï¼Œæ¥å†³å®šå½“å‰æ˜¯ä¸æ˜¯èµ°åˆ°äº†é€’å½’è¾¹ç•Œã€‚ä½†æ˜¯è¿™é“é¢˜å…¶å®å¯ä»¥åšå¾—æ›´ç®€å•ï¼šå‘ä½çš„ä¸ªæ•°æ˜¯å·²çŸ¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®°å½•å½“å‰å‘ä½çš„ç´¢å¼•æ¥åˆ¤æ–­æ˜¯å¦å·²ç»èµ°åˆ°äº†è¾¹ç•Œï¼šæ¯”å¦‚è¯´ç¤ºä¾‹ä¸­æœ‰ <code>n</code>Â  ä¸ªå‘ï¼Œå‡å¦‚æˆ‘ä»¬æŠŠç¬¬ 1 ä¸ªå‘çš„ç´¢å¼•è®°ä¸º 0 ï¼Œé‚£ä¹ˆç´¢å¼•ä¸º <code>n-1</code>Â Â  çš„å‘å°±æ˜¯é€’å½’å¼çš„æ‰§è¡Œç»ˆç‚¹ï¼Œç´¢å¼•ä¸º <code>n</code>Â  çš„å‘ï¼ˆå‹æ ¹ä¸å­˜åœ¨ï¼‰å°±æ˜¯é€’å½’è¾¹ç•Œã€‚Â <br/> <br/>Â  Â <br/>é€’å½’çš„ç¼–ç å®ç°ï¼Œæ— éæ˜¯æŠŠæˆ‘ä»¬ä¸Šé¢æè¿°è¿‡çš„é€’å½’å¼å’Œé€’å½’è¾¹ç•Œç¿»è¯‘æˆä»£ç ï¼šÂ  Â <br/>Â  Â  <a name="user-content-G4KFk" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-39">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number[][]</span>}
 */</span>
<span class="hljs-comment">// å…¥å‚æ˜¯ä¸€ä¸ªæ•°ç»„</span>
<span class="hljs-keyword">const</span> permute = <span class="hljs-keyword">function</span>(<span class="hljs-params">nums</span>) {
  <span class="hljs-comment">// ç¼“å­˜æ•°ç»„çš„é•¿åº¦</span>
  <span class="hljs-keyword">const</span> len = nums.<span class="hljs-property">length</span>
  <span class="hljs-comment">// curr å˜é‡ç”¨æ¥è®°å½•å½“å‰çš„æ’åˆ—å†…å®¹</span>
  <span class="hljs-keyword">const</span> curr = []
  <span class="hljs-comment">// res ç”¨æ¥è®°å½•æ‰€æœ‰çš„æ’åˆ—é¡ºåº</span>
  <span class="hljs-keyword">const</span> res = []
  <span class="hljs-comment">// visited ç”¨æ¥é¿å…é‡å¤ä½¿ç”¨åŒä¸€ä¸ªæ•°å­—</span>
  <span class="hljs-keyword">const</span> visited = {}
  <span class="hljs-comment">// å®šä¹‰ dfs å‡½æ•°ï¼Œå…¥å‚æ˜¯å‘ä½çš„ç´¢å¼•ï¼ˆä» 0 è®¡æ•°ï¼‰</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">nth</span>) {
      <span class="hljs-comment">// è‹¥éå†åˆ°äº†ä¸å­˜åœ¨çš„å‘ä½ï¼ˆç¬¬ len+1 ä¸ªï¼‰ï¼Œåˆ™è§¦ç¢°é€’å½’è¾¹ç•Œè¿”å›</span>
      <span class="hljs-keyword">if</span>(nth === len) {
          <span class="hljs-comment">// æ­¤æ—¶å‰ len ä¸ªå‘ä½å·²ç»å¡«æ»¡ï¼Œå°†å¯¹åº”çš„æ’åˆ—è®°å½•ä¸‹æ¥</span>
          res.<span class="hljs-title function_">push</span>(curr.<span class="hljs-title function_">slice</span>())
          <span class="hljs-keyword">return</span> 
      }
      <span class="hljs-comment">// æ£€æŸ¥æ‰‹é‡Œå‰©ä¸‹çš„æ•°å­—æœ‰å“ªäº›</span>
      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;len;i++) {
          <span class="hljs-comment">// è‹¥ nums[i] ä¹‹å‰æ²¡è¢«å…¶å®ƒå‘ä½ç”¨è¿‡ï¼Œåˆ™å¯ä»¥ç†è§£ä¸ºâ€œè¿™ä¸ªæ•°å­—å‰©ä¸‹äº†â€</span>
          <span class="hljs-keyword">if</span>(!visited[nums[i]]) {
              <span class="hljs-comment">// ç»™ nums[i] æ‰“ä¸ªâ€œå·²ç”¨è¿‡â€çš„æ ‡</span>
              visited[nums[i]] = <span class="hljs-number">1</span>
              <span class="hljs-comment">// å°†nums[i]æ¨å…¥å½“å‰æ’åˆ—</span>
              curr.<span class="hljs-title function_">push</span>(nums[i])
              <span class="hljs-comment">// åŸºäºè¿™ä¸ªæ’åˆ—ç»§ç»­å¾€ä¸‹ä¸€ä¸ªå‘èµ°å»</span>
              <span class="hljs-title function_">dfs</span>(nth+<span class="hljs-number">1</span>) 
              <span class="hljs-comment">// nums[i]è®©å‡ºå½“å‰å‘ä½</span>
              curr.<span class="hljs-title function_">pop</span>()
              <span class="hljs-comment">// ä¸‹æ‰â€œå·²ç”¨è¿‡â€æ ‡è¯†</span>
              visited[nums[i]] = <span class="hljs-number">0</span>
          }
      }
  }
  <span class="hljs-comment">// ä»ç´¢å¼•ä¸º 0 çš„å‘ä½ï¼ˆä¹Ÿå°±æ˜¯ç¬¬ä¸€ä¸ªå‘ä½ï¼‰å¼€å§‹ dfs</span>
  <span class="hljs-title function_">dfs</span>(<span class="hljs-number">0</span>)
  <span class="hljs-keyword">return</span> res
};
</code></pre>
<p><a name="user-content-wN075" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-40">å°è´´å£«Â Â </h3>
<p>ä¸Šé¢è¿™å¨ä»£ç é‡Œï¼Œæœ‰ä¸¤ä¸ªç‚¹éœ€è¦å¤§å®¶æ ¼å¤–æ³¨æ„ï¼Œå®ƒä»¬å°†ä¼šæˆä¸ºæˆ‘ä»¬ä»¥ååšç±»ä¼¼é¢˜ç›®çš„å…³é”®æŠ€å·§ï¼šÂ  Â </p>
<ol>
<li>Map ç»“æ„ <code>visited</code>Â  çš„ä½¿ç”¨ï¼šå¡«å‘æ—¶ï¼Œæ¯ç”¨åˆ°ä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬éƒ½è¦ç»™è¿™ä¸ªæ•°å­—æ‰“ä¸Šâ€œå·²ç”¨è¿‡â€çš„æ ‡â€”â€”é¿å…å®ƒè¢«ä½¿ç”¨ç¬¬äºŒæ¬¡ï¼›æ•°å­—è®©å‡ºå‘ä½æ—¶ï¼Œå¯¹åº”çš„æ’åˆ—å’Œ <code>visited</code>Â  çŠ¶æ€ä¹Ÿéœ€è¦è¢«åŠæ—¶åœ°æ›´æ–°æ‰ã€‚</li>
<li>å½“èµ°åˆ°é€’å½’è¾¹ç•Œæ—¶ï¼Œä¸€ä¸ªå®Œæ•´çš„æ’åˆ—ä¹Ÿåˆ°æ‰‹äº†ã€‚å°†è¿™ä¸ªå®Œæ•´æ’åˆ—æ¨å…¥ç»“æœæ•°ç»„æ—¶ï¼Œæˆ‘ä»¬ç”¨äº† <code>Â res.push(curr.slice())</code>Â è€Œä¸æ˜¯ç®€å•çš„ <code>res.push(curr)</code>Â ã€‚ä¸ºä»€ä¹ˆè¿™æ ·åšï¼Ÿå› ä¸ºå…¨å±€åªæœ‰ä¸€ä¸ªå”¯ä¸€çš„ <code>curr</code>Â ï¼Œ <code>curr</code>Â çš„å€¼ä¼šéšç€ <code>dfs</code>Â çš„è¿›è¡Œè€Œä¸æ–­è¢«æ›´æ–°ã€‚ <code>slice</code>Â æ–¹æ³•çš„ä½œç”¨æ˜¯å¸®åŠ©æˆ‘ä»¬æ‹·è´å‡ºä¸€ä¸ªä¸å½±å“<code>curr</code>æ­£æœ¬çš„å‰¯æœ¬ï¼Œä»¥é˜²ç›´æ¥ä¿®æ”¹åˆ°<code>curr</code>çš„å¼•ç”¨ã€‚</li>
</ol>
<br/>
<br/>å¸¦ç€å…¨æ’åˆ—é—®é¢˜æ•™ä¼šæˆ‘ä»¬çš„è§£é¢˜æ€è·¯å’Œç¼–ç æŠ€å·§ï¼Œæˆ‘ä»¬å†æ¥çœ‹å¦ä¸€ä¸ªç±»å‹çš„é¢˜ç›®â€”â€”ç»„åˆé—®é¢˜ã€‚Â Â <br/>Â <br/>
<h2 data-id="heading-41">ç»„åˆé—®é¢˜ï¼šå˜åŒ–çš„â€œå‘ä½â€ï¼Œä¸å˜çš„â€œå¥—è·¯â€</h2>
<blockquote>
<p>é¢˜ç›®æè¿°ï¼šç»™å®šä¸€ç»„ä¸å«é‡å¤å…ƒç´ çš„æ•´æ•°æ•°ç»„Â numsï¼Œè¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚<br/>
è¯´æ˜ï¼šè§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„å­é›†ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹:
è¾“å…¥: nums = [1,2,3]<br/>
è¾“å‡º:<br/>
[<br/>
[3],<br/>
[1],<br/>
[2],<br/>
[1,2,3],<br/>
[1,3],<br/>
[2,3],<br/>
[1,2],<br/>
[]<br/>
]</p>
</blockquote>
<h3 data-id="heading-42">æ€è·¯åˆ†æ</h3>
<p>è§åˆ°è¿™é“é¢˜ï¼Œå¤§å®¶ç¬¬ä¸€ååº”ä¼šæ˜¯ä»€ä¹ˆï¼Ÿå¸å–äº†ä¸Šä¸€é“é¢˜çš„ç»éªŒï¼Œè¿™é“é¢˜æˆ‘ä»¬åº”è¯¥æƒ³åˆ°çš„æ˜¯ï¼š<strong>ç©·ä¸¾å‡ºç°äº†ï¼Œå¤§æ¦‚ç‡ä¼šç”¨åˆ° DFS</strong>ã€‚<br/>
åªè¦ç”¨åˆ° DFSï¼Œå°±ä¸å¾—ä¸æƒ³åˆ°<strong>æ ‘å½¢æ€ç»´æ–¹å¼</strong>ï¼Œè¿›è€Œä¸å¾—ä¸æ€è€ƒé€’å½’å¼å’Œé€’å½’è¾¹ç•Œçš„é—®é¢˜ã€‚åœ¨è¿™ä¸ªæ€è€ƒçš„è¿‡ç¨‹ä¸­ï¼Œæœ€é‡è¦çš„ä¸€ç¯å°±æ˜¯<strong>å¯¹â€œå‘ä½â€çš„å®šä½å’Œåˆ†æã€‚</strong><br/>ä»ä¸Šä¸€é“é¢˜ä¸­ï¼Œæˆ‘ä»¬ä¸éš¾çœ‹å‡ºï¼Œâ€œå‘ä½â€å¯¹åº”çš„å°±æ˜¯æ ‘å½¢é€»è¾‘ä¸­æ ‘çš„æŸä¸€å±‚ï¼Œâ€œå‘ä½æ•°â€å¾€å¾€æ„å‘³ç€é€’å½’è¾¹ç•Œçš„é™åˆ¶æ¡ä»¶ã€‚Â  Â <br/>Â Â <br/>æ‰¾â€œå‘ä½â€çš„æ€è·¯ä¹Ÿæ˜¯å…·æœ‰è§„å¾‹çš„ï¼šâ€œå‘ä½â€å¾€å¾€æ˜¯é‚£äº›ä¸ä¼šå˜åŒ–çš„ä¸œè¥¿ã€‚åœ¨ä¸Šä¸€é“é¢˜ä¸­ï¼Œæ’åˆ—çš„é¡ºåºæ˜¯å˜åŒ–çš„ï¼Œè€Œæ¯ä¸ªæ’åˆ—ä¸­æ•°å­—çš„ä¸ªæ•°å´æ˜¯ä¸å˜çš„ï¼Œå› æ­¤æ•°å­—çš„ä¸ªæ•°å°±å¯¹åº”â€œå‘ä½â€çš„ä¸ªæ•°ï¼›åœ¨è¿™é“é¢˜ä¸­ï¼Œæ¯ä¸ªç»„åˆä¸­æ•°å­—çš„ä¸ªæ•°æ˜¯ä¸ç¡®å®šçš„ï¼Œä¸å˜çš„ä¸œè¥¿å˜æˆäº†<strong>å¯ä»¥å‚ä¸ç»„åˆçš„æ•°å­—</strong>ï¼Œå˜åŒ–çš„ä¸œè¥¿åˆ™æ˜¯æ¯ä¸ªæ•°å­—åœ¨ç»„åˆä¸­çš„<strong>å­˜åœ¨æ€§</strong>ã€‚å› æ­¤æˆ‘ä»¬çš„æ€è·¯å¯ä»¥è°ƒæ•´ä¸ºï¼Œ<strong>ä»æ¯ä¸€ä¸ªæ•°å­—å…¥æ‰‹ï¼Œè®¨è®ºå®ƒå‡ºç°æˆ–è€…ä¸å‡ºç°çš„æƒ…å†µ</strong>ã€‚Â </p>
<p>æ¢æ±¤ä¸æ¢è¯ï¼Œè¿™é‡Œæˆ‘ä»¬ä»ç„¶é‡‡å–æ ‘å½¢æ€ç»´æ¨¡å‹ï¼šÂ  Â <br/><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/3/171da9a25410cf07~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1300&amp;h=942&amp;s=111924&amp;e=png&amp;b=ffffff" alt="image.png" loading="lazy"/><br/>ä¸ºäº†ä½¿å­˜åœ¨æ€§å‡¸æ˜¾å¾—æ›´å…·ä½“ï¼Œè¿™é‡Œæˆ‘ç›´æ¥æŠŠæ ‘å½¢ç»“æ„ä¸­æ¯ä¸€å±‚å¯¹åº”çš„å¯èƒ½ç»„åˆç»™å¤§å®¶åˆ—å‡ºæ¥ï¼šÂ Â </p>
<pre><code class="hljs language-javascript" lang="javascript">root                                            []                  
æ•°å­—<span class="hljs-number">1</span>â€”â€”ç¬¬ä¸€å±‚                     <span class="hljs-number">1</span>                                   []
æ•°å­—<span class="hljs-number">2</span>â€”â€”ç¬¬äºŒå±‚            [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]            [<span class="hljs-number">1</span>]                   [<span class="hljs-number">2</span>]         []
æ•°å­—<span class="hljs-number">3</span>â€”â€”â€”ç¬¬ä¸‰å±‚    [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]     [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]  [<span class="hljs-number">1</span>,<span class="hljs-number">3</span>]   [<span class="hljs-number">1</span>]           [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]   [<span class="hljs-number">2</span>]   [<span class="hljs-number">3</span>]  []
</code></pre>
<p>ä» <code>root</code>Â  å‡ºå‘ï¼Œæ¯ä¸€ä¸ªæ•°å­—å¯¹åº”æ ‘çš„ä¸€å±‚ï¼Œ<strong>å­˜åœ¨æˆ–ä¸å­˜åœ¨å¯¹åº”æ ‘çš„ä¸¤ä¸ªåˆ†å‰</strong>ã€‚ä»ç¬¬ä¸€å±‚åˆ°ç¬¬ä¸‰å±‚ï¼Œæˆ‘ä»¬å¾—åˆ°çš„æ‰€æœ‰å®Œæ•´è·¯å¾„ï¼Œå°±æ˜¯ 3 ä¸ªæ•°çš„æ‰€æœ‰å¯èƒ½çš„ç»„åˆå½¢å¼ã€‚Â Â <br/> <br/>æˆ‘ä»¬åˆ†æä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ä¸­çš„é€’å½’å¼ä¸é€’å½’è¾¹ç•Œï¼šÂ Â </p>
<ul>
<li><strong>é€’å½’å¼</strong>ï¼šæ£€æŸ¥æ‰‹é‡Œå‰©ä¸‹çš„æ•°å­—æœ‰å“ªäº›ï¼ˆæœ‰æ²¡æœ‰å‘ç°å’Œä¸Šä¸€é“é¢˜çš„é€’å½’å¼æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºä¸¤é“é¢˜éƒ½å¼ºè°ƒäº†æ•°å­—ä¸èƒ½é‡å¤ä½¿ç”¨ï¼‰ï¼Œé€‰å–å…¶ä¸­ä¸€ä¸ªå¡«è¿›å½“å‰çš„å‘é‡Œã€æˆ–è€…å¹²è„†æŠŠè¿™ä¸ªå‘ç©ºå‡ºæ¥ï¼ˆè¿™é‡Œå°±ä½“ç°å‡ºäº†å’Œä¸Šä¸€é“é¢˜çš„åŒºåˆ«ï¼Œè¿™é“é¢˜å¼ºè°ƒçš„æ˜¯å­˜åœ¨æ€§è€Œéé¡ºåºï¼‰ã€‚Â Â </li>
<li><strong>é€’å½’è¾¹ç•Œ</strong>ï¼šç»„åˆé‡Œæ•°å­—ä¸ªæ•°çš„æœ€å¤§å€¼ã€‚æ‹¿ç¤ºä¾‹æ¥è¯´ï¼Œåªç»™äº† 3 ä¸ªæ•°ï¼Œå› æ­¤ç»„åˆé‡Œæ•°å­—æœ€å¤šä¹Ÿåªæœ‰ 3 ä¸ªï¼Œè¶…è¿‡ 3 ä¸ªåˆ™è§†ä¸ºè§¦ç¢°é€’å½’è¾¹ç•Œã€‚Â Â </li>
</ul>
<p><br/>æŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œå¯ä»¥ç¼–ç å¦‚ä¸‹ï¼šÂ Â <br/>Â Â  <a name="user-content-NjlCx" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-43">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number[][]</span>}
 */</span>
<span class="hljs-comment">// å…¥å‚æ˜¯ä¸€ä¸ªæ•°ç»„</span>
<span class="hljs-keyword">const</span> subsets = <span class="hljs-keyword">function</span>(<span class="hljs-params">nums</span>) {
    <span class="hljs-comment">// åˆå§‹åŒ–ç»“æœæ•°ç»„</span>
    <span class="hljs-keyword">const</span> res = []   
    <span class="hljs-comment">// ç¼“å­˜æ•°ç»„é•¿åº¦</span>
    <span class="hljs-keyword">const</span> len = nums.<span class="hljs-property">length</span>
    <span class="hljs-comment">// åˆå§‹åŒ–ç»„åˆæ•°ç»„</span>
    <span class="hljs-keyword">const</span> subset = []
    <span class="hljs-comment">// è¿›å…¥ dfs</span>
    <span class="hljs-title function_">dfs</span>(<span class="hljs-number">0</span>)  

    <span class="hljs-comment">// å®šä¹‰ dfs å‡½æ•°ï¼Œå…¥å‚æ˜¯ nums ä¸­çš„æ•°å­—ç´¢å¼•</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">index</span>) {
        <span class="hljs-comment">// æ¯æ¬¡è¿›å…¥ï¼Œéƒ½æ„å‘³ç€ç»„åˆå†…å®¹æ›´æ–°äº†ä¸€æ¬¡ï¼Œæ•…ç›´æ¥æ¨å…¥ç»“æœæ•°ç»„</span>
        res.<span class="hljs-title function_">push</span>(subset.<span class="hljs-title function_">slice</span>())
        <span class="hljs-comment">// ä»å½“å‰æ•°å­—çš„ç´¢å¼•å¼€å§‹ï¼Œéå† nums</span>
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=index;i&lt;len;i++) {
            <span class="hljs-comment">// è¿™æ˜¯å½“å‰æ•°å­—å­˜åœ¨äºç»„åˆä¸­çš„æƒ…å†µ</span>
            subset.<span class="hljs-title function_">push</span>(nums[i]) 
            <span class="hljs-comment">// åŸºäºå½“å‰æ•°å­—å­˜åœ¨äºç»„åˆä¸­çš„æƒ…å†µï¼Œè¿›ä¸€æ­¥ dfs</span>
            <span class="hljs-title function_">dfs</span>(i+<span class="hljs-number">1</span>)
            <span class="hljs-comment">// è¿™æ˜¯å½“å‰æ•°å­—ä¸å­˜åœ¨ä¸ç»„åˆä¸­çš„æƒ…å†µ</span>
            subset.<span class="hljs-title function_">pop</span>()
        }
    }
    <span class="hljs-comment">// è¿”å›ç»“æœæ•°ç»„</span>
    <span class="hljs-keyword">return</span> res 
};
</code></pre>
<p><a name="user-content-gW7Nk" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-44">ç¼–ç å¤ç›˜Â </h3>
<p>è¿™é“é¢˜å’Œä¸Šä¸€é“é¢˜çš„åŸºæœ¬æ€è·¯é«˜åº¦ä¸€è‡´ï¼Œä½†æ˜¯åœ¨å®ç°ä¸Šæœ‰äº›å·®åˆ«ã€‚å¯¹åˆå­¦è€…æ¥è¯´ï¼Œå³ä¾¿æ˜¯éå¸¸å¾®å°çš„å˜åŒ–ä¹Ÿæœ‰å¯èƒ½å¼•èµ·å›°æƒ‘ã€‚å› æ­¤ï¼Œæˆ‘åœ¨è¿™é‡Œé’ˆå¯¹ç¼–ç éƒ¨åˆ†å˜åŒ–çš„å†…å®¹ä½œè¿›ä¸€æ­¥è®²è§£ï¼šÂ <br/></p>
<ul>
<li>é€’å½’å¼çš„å˜åŒ–ï¼šåœ¨ä¸Šä¸€é“é¢˜ä¸­ï¼Œæˆ‘ä»¬æ£€æŸ¥ä¸€ä¸ªæ•°å­—æ˜¯å¦å¯ç”¨çš„ä¾æ®æ˜¯å®ƒæ˜¯å¦å·²è¢«çº³å…¥å½“å‰æ’åˆ—ï¼ˆ <code>visited</code>Â å€¼æ˜¯å¦ä¸º 1ï¼‰ï¼Œè€Œè¿™é“é¢˜ä¸­ï¼Œå¹¶ä¸å­˜åœ¨ä¸€ä¸ªç±»ä¼¼ <code>visited</code>Â ä¸€æ ·çš„æ ‡è®°å¯¹è±¡ã€‚å–è€Œä»£ä¹‹çš„ï¼Œæ˜¯æ¯æ¬¡ç›´æ¥ä»¥ <code>index</code>Â ä½œä¸ºäº†ç´¢å¼•èµ·ç‚¹ã€‚è¿™æ˜¯å› ä¸ºï¼Œåœ¨æ’åˆ—åœºæ™¯ä¸‹ï¼Œä¸€ä¸ªå…ƒç´ å¯èƒ½å‡ºç°åœ¨ä»»ä½•å‘ä½é‡Œï¼›è€Œåœ¨ç»„åˆåœºæ™¯ä¸‹ï¼Œå‘ä½çš„é€‰æ‹©é€»è¾‘å‘ç”Ÿäº†å˜åŒ–ï¼Œå‘ä½å’Œå…ƒç´ æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚å› æ­¤è®¨è®ºå®Œä¸€ä¸ªå‘ä½çš„å–èˆåï¼Œä¸€ä¸ªå…ƒç´ çš„å–èˆä¹Ÿç›¸åº”åœ°è®¨è®ºå®Œæ¯•äº†ï¼Œç›´æ¥è·³è¿‡è¿™ä¸ªå…ƒç´ çš„ç´¢å¼•å¾€ä¸‹èµ°å³å¯ã€‚</li>
<li>é€’å½’è¾¹ç•Œçš„å˜åŒ–ï¼šè¿™é“é¢˜ä¸­ï¼Œå¹¶æ²¡æœ‰æ˜¾å¼çš„ <code>return</code>Â è¯­å¥æ¥æ ‡ç¤ºé€’å½’è¾¹ç•Œçš„å­˜åœ¨ã€‚è¿™ä¸ªè¾¹ç•Œçš„åˆ¤å®šè¢« <code>for</code>Â è¯­å¥å·å·åœ°åšæ‰äº†ï¼š <code>for</code>Â è¯­å¥ä¼šéå†æ‰€æœ‰çš„æ•°å­—ï¼Œå½“æ•°å­—éå†å®Œå…¨æ—¶ï¼Œä¹Ÿå°±æ„å‘³ç€é€’å½’èµ°åˆ°äº†å°½å¤´ã€‚<br/></li>
</ul>
<br/>
<p><a name="user-content-BkLyC" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-45">é™å®šç»„åˆé—®é¢˜ï¼šåŠæ—¶å›æº¯ï¼Œå³ä¸ºâ€œå‰ªæâ€Â Â </h2>
<blockquote>
<p>é¢˜ç›®æè¿°ï¼šç»™å®šä¸¤ä¸ªæ•´æ•° n å’Œ kï¼Œè¿”å› 1 ... n ä¸­æ‰€æœ‰å¯èƒ½çš„ k ä¸ªæ•°çš„ç»„åˆã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹:
è¾“å…¥:Â n = 4, k = 2<br/>
è¾“å‡º:<br/>
[<br/>
[2,4],<br/>
[3,4],<br/>
[2,3],<br/>
[1,2],<br/>
[1,3],<br/>
[1,4],<br/>
]</p>
</blockquote>
<p><a name="user-content-v6ZzY" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-46">æ€è·¯åˆ†æ</h3>
<p>è¿™æ˜¯ä¸€é“å¤æ‚åŒ–çš„ç»„åˆé—®é¢˜ï¼Œå®ƒè¿½åŠ äº†ä¸€ä¸ªé™å®šæ¡ä»¶â€”â€”åªè¿”å› n ä¸ªæ•°ä¸­ k ä¸ªæ•°çš„ç»„åˆã€‚åœ¨æ™®é€šçš„ç»„åˆé—®é¢˜ä¸­ï¼Œæ ‘å½¢é€»è¾‘æ˜¯è¿™æ ·çš„ï¼šÂ Â <br/><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/3/171da9a25410cf07~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1300&amp;h=942&amp;s=111924&amp;e=png&amp;b=ffffff" alt="image.png" loading="lazy"/><br/> <br/>è€Œåœ¨è¿™é“é¢˜é‡Œï¼Œæ ‘å½¢é€»è¾‘è¢«â€œæˆªèƒ¡â€äº†ï¼Œå®ƒè¦æ±‚æˆ‘ä»¬åªè¾“å‡ºå…¶ä¸­çš„ä¸€éƒ¨åˆ†ã€‚å‡å¦‚ n=3ï¼Œ k=2ï¼Œé‚£ä¹ˆéœ€è¦è¾“å‡ºçš„å†…å®¹å°±å¦‚ä¸‹å›¾çš„çº¢è‰²ç®­å¤´æ‰€ç¤ºï¼šÂ  Â <br/>Â Â <img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/3/171da9a254223576~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1274&amp;h=934&amp;s=125132&amp;e=png" alt="image.png" loading="lazy"/><br/> <br/>æˆ‘ä»¬å‘ç°ï¼Œåªæœ‰åŒå‘ç®­å¤´æ‰€æŒ‡çš„ç»“ç‚¹ç»„åˆè¢«è®¤ä¸ºæ˜¯æœ‰æ•ˆç»“æœï¼Œå…¶å®ƒç»“ç‚¹éƒ½è¢«ä¸¢å¼ƒäº†ã€‚åœ¨å¯»æ‰¾è¿™ä¸‰å¯¹ç»“ç‚¹ç»„åˆçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸€æ—¦æ‰¾åˆ°ä¸€å¯¹ï¼Œå°±åœæ­¢ç»§ç»­å¾€æ·±å¤„æœç´¢ï¼Œè¿™å°±æ„å‘³ç€ä¸€äº›ç»“ç‚¹å‹æ ¹æ²¡æœ‰æœºä¼šè¢«éå†åˆ°ã€‚<br/> <br/>è¿™å…¶å®å°±æ˜¯â€œå‰ªæâ€çš„è¿‡ç¨‹â€”â€”åœ¨æ·±åº¦ä¼˜å…ˆæœç´¢ä¸­ï¼Œ<strong>æœ‰æ—¶æˆ‘ä»¬ä¼šå»æ‰ä¸€äº›ä¸ç¬¦åˆé¢˜ç›®è¦æ±‚çš„ã€æ²¡æœ‰ä½œç”¨çš„ç­”æ¡ˆï¼Œè¿›è€Œå¾—åˆ°æ­£ç¡®ç­”æ¡ˆã€‚è¿™ä¸ªä¸¢æ‰ç­”æ¡ˆçš„è¿‡ç¨‹ï¼Œå½¢ä¼¼å‰ªæ‰æ ‘çš„æå¶ï¼Œæ‰€ä»¥è¿™ä¸€æ–¹æ³•è¢«ç§°ä¸ºâ€œå‰ªæâ€</strong>ã€‚Â  Â <br/> <br/>åœ¨è¿™é“é¢˜ä¸­ï¼Œè¦åšåˆ°å‰ªæï¼Œæˆ‘ä»¬éœ€è¦åˆ†åˆ«åœ¨ç»„åˆé—®é¢˜çš„é€’å½’å¼å’Œé€’å½’è¾¹ç•Œä¸ŠåŠ¨æ‰‹è„šï¼š</p>
<ul>
<li>é€’å½’å¼ï¼šæ™®é€šç»„åˆé—®é¢˜ï¼Œæ¯åˆ°ä¸€ä¸ªæ–°çš„å‘ä½å¤„ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å¯¹ç»„åˆç»“æœæ•°ç»„è¿›è¡Œæ›´æ–°ï¼›è¿™é“é¢˜ä¸­ï¼Œå½“ä¸”ä»…å½“ç»„åˆå†…æ•°å­—ä¸ªæ•°ä¸º <code>k</code>Â ä¸ªæ—¶ï¼Œæ‰ä¼šå¯¹ç»„åˆç»“æœæ•°ç»„è¿›è¡Œæ›´æ–°ã€‚</li>
<li>é€’å½’è¾¹ç•Œï¼šåªè¦ç»„åˆå†…æ•°å­—ä¸ªæ•°è¾¾åˆ°äº† <code>k</code>Â ä¸ªï¼Œå°±ä¸å†ç»§ç»­å½“å‰çš„è·¯å¾„å¾€ä¸‹éå†ï¼Œè€Œæ˜¯ç›´æ¥è¿”å›ã€‚</li>
</ul>
<p>Â Â <br/> <br/>åŸºäºè¿™ä¸¤ä¸ªæ”¹é€ ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–ç å¦‚ä¸‹ï¼šÂ  Â <br/>Â Â  <a name="user-content-W7wvf" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-47">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">n</span>
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">k</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number[][]</span>}
 */</span>
<span class="hljs-keyword">const</span> combine = <span class="hljs-keyword">function</span>(<span class="hljs-params">n, k</span>) {
   <span class="hljs-comment">// åˆå§‹åŒ–ç»“æœæ•°ç»„</span>
    <span class="hljs-keyword">const</span> res = []   
    <span class="hljs-comment">// åˆå§‹åŒ–ç»„åˆæ•°ç»„</span>
    <span class="hljs-keyword">const</span> subset = []
    <span class="hljs-comment">// è¿›å…¥ dfsï¼Œèµ·å§‹æ•°å­—æ˜¯1</span>
    <span class="hljs-title function_">dfs</span>(<span class="hljs-number">1</span>)  

    <span class="hljs-comment">// å®šä¹‰ dfs å‡½æ•°ï¼Œå…¥å‚æ˜¯å½“å‰éå†åˆ°çš„æ•°å­—</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">index</span>) {
        <span class="hljs-keyword">if</span>(subset.<span class="hljs-property">length</span> === k) {
            res.<span class="hljs-title function_">push</span>(subset.<span class="hljs-title function_">slice</span>())
            <span class="hljs-keyword">return</span> 
        }
        <span class="hljs-comment">// ä»å½“å‰æ•°å­—çš„å€¼å¼€å§‹ï¼Œéå† index-n ä¹‹é—´çš„æ‰€æœ‰æ•°å­—</span>
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=index;i&lt;=n;i++) {
            <span class="hljs-comment">// è¿™æ˜¯å½“å‰æ•°å­—å­˜åœ¨äºç»„åˆä¸­çš„æƒ…å†µ</span>
            subset.<span class="hljs-title function_">push</span>(i) 
            <span class="hljs-comment">// åŸºäºå½“å‰æ•°å­—å­˜åœ¨äºç»„åˆä¸­çš„æƒ…å†µï¼Œè¿›ä¸€æ­¥ dfs</span>
            <span class="hljs-title function_">dfs</span>(i+<span class="hljs-number">1</span>)
            <span class="hljs-comment">// è¿™æ˜¯å½“å‰æ•°å­—ä¸å­˜åœ¨ä¸ç»„åˆä¸­çš„æƒ…å†µ</span>
            subset.<span class="hljs-title function_">pop</span>()
        }
    }
    <span class="hljs-comment">// è¿”å›ç»“æœæ•°ç»„</span>
    <span class="hljs-keyword">return</span> res 
};
</code></pre>
<p>æ³¨æ„è¿™é“é¢˜ä¸­è™½ç„¶æ²¡æœ‰ç›´æ¥ç»™å‡ºä¸€ä¸ª <code>nums</code>Â æ•°ç»„ï¼Œè€Œæ˜¯ç›´æ¥çº¦å®šäº†æ•°å­—çš„èŒƒå›´ä¸º <code>1-n</code>Â ï¼Œä½†å…¶æœ¬è´¨ä»ç„¶æ˜¯ä¸€ä¸ªæ•°å­—é›†åˆï¼Œæˆ‘ä»¬åƒä¸Šé¢è¿™æ ·ç¨å¾®è°ƒæ•´ä¸‹å–å€¼æ–¹å¼å³å¯ã€‚</p>
<h2 data-id="heading-48">æ¦‚å¿µå¤ç›˜ï¼šä½•ä¸ºâ€œå›æº¯â€ï¼ŸÂ Â </h2>
<p>ç°åœ¨ï¼Œæˆ–è®¸ä½ è¿˜æš‚æ—¶ä¸çŸ¥é“ä½•ä¸ºâ€œå›æº¯ç®—æ³•â€ï¼Œä½†ä½ å…¶å®å·²ç»å®æ‰“å®åœ°åœ¨çœŸé¢˜ä¸­å¯¹å®ƒæœ‰äº†å…·ä½“çš„å®è·µã€‚åŸºäºè¿™äº›å®è·µï¼Œæˆ‘ä»¬åè¿‡æ¥ç†è§£ä¸€ä¸‹å›æº¯çš„æ¦‚å¿µï¼š</p>
<blockquote>
<p>å›æº¯ç®—æ³•å®é™…ä¸Šä¸€ä¸ªç±»ä¼¼æšä¸¾çš„æœç´¢å°è¯•è¿‡ç¨‹ï¼Œä¸»è¦æ˜¯åœ¨æœç´¢å°è¯•è¿‡ç¨‹ä¸­å¯»æ‰¾é—®é¢˜çš„è§£ï¼Œå½“å‘ç°å·²ä¸æ»¡è¶³æ±‚è§£æ¡ä»¶æ—¶ï¼Œå°± â€œå›æº¯â€ è¿”å›ï¼Œå°è¯•åˆ«çš„è·¯å¾„ã€‚<br/>
å›æº¯æ³•æ˜¯ä¸€ç§é€‰ä¼˜æœç´¢æ³•ï¼ŒæŒ‰é€‰ä¼˜æ¡ä»¶å‘å‰æœç´¢ï¼Œä»¥è¾¾åˆ°ç›®æ ‡ã€‚ä½†å½“æ¢ç´¢åˆ°æŸä¸€æ­¥æ—¶ï¼Œå‘ç°åŸå…ˆé€‰æ‹©å¹¶ä¸ä¼˜æˆ–è¾¾ä¸åˆ°ç›®æ ‡ï¼Œå°±é€€å›ä¸€æ­¥é‡æ–°é€‰æ‹©ï¼Œè¿™ç§èµ°ä¸é€šå°±é€€å›å†èµ°çš„æŠ€æœ¯ä¸ºå›æº¯æ³•ï¼Œè€Œæ»¡è¶³å›æº¯æ¡ä»¶çš„æŸä¸ªçŠ¶æ€çš„ç‚¹ç§°ä¸º â€œå›æº¯ç‚¹â€ã€‚<br/>
è®¸å¤šå¤æ‚çš„ï¼Œè§„æ¨¡è¾ƒå¤§çš„é—®é¢˜éƒ½å¯ä»¥ä½¿ç”¨å›æº¯æ³•ï¼Œæœ‰â€œé€šç”¨è§£é¢˜æ–¹æ³•â€çš„ç¾ç§°ã€‚<br/>
å›æº¯ç®—æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šä»ä¸€æ¡è·¯å¾€å‰èµ°ï¼Œèƒ½è¿›åˆ™è¿›ï¼Œä¸èƒ½è¿›åˆ™é€€å›æ¥ï¼Œæ¢ä¸€æ¡è·¯å†è¯•ã€‚  â€”â€”LeetCode</p>
</blockquote>
<p>æˆ‘ä»¬é‡ç‚¹å…³æ³¨è¿™å¥è¯ï¼šâ€œå›æº¯ç®—æ³•çš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šä»ä¸€æ¡è·¯å¾€å‰èµ°ï¼Œèƒ½è¿›åˆ™è¿›ï¼Œä¸èƒ½è¿›åˆ™é€€å›æ¥ï¼Œæ¢ä¸€æ¡è·¯å†è¯•ã€‚â€Â  Â <br/> Â <br/>æœ‰æ²¡æœ‰å‘ç°ï¼Œè¿™ä¸ªâ€œå›æº¯ç®—æ³•â€å’Œä¸Šä¸€èŠ‚çš„ <code>DFS</code>Â ï¼Œå¥½åƒç¿»æ¥è¦†å»æ˜¯åœ¨è®²åŒä¸€ä»¶äº‹æƒ…ï¼ŸÂ  Â <br/>å®é™…ä¸Šï¼Œè¿™é‡Œçš„â€œå›æº¯â€äºŒå­—ï¼Œå¤§å®¶å¯ä»¥ç†è§£ä¸ºæ˜¯åœ¨å¼ºè°ƒ <code>DFS</code>Â è¿‡ç¨‹ä¸­â€œé€€ä¸€æ­¥é‡æ–°é€‰æ‹©â€è¿™ä¸ªåŠ¨ä½œã€‚è¿™æ ·æƒ³çš„è¯ï¼Œ <code>DFS</code>Â ç®—æ³•å…¶å®å°±æ˜¯å›æº¯æ€æƒ³çš„ä½“ç°ã€‚Â  Â  Â Â <br/> <br/>è¿™é‡Œé¡ºä¾¿ç»™å¤§å®¶æä¸ªé†’ï¼šä¸€äº›åŒå­¦åœ¨å¹³æ—¶çš„åˆ·é¢˜å’Œé¢è¯•ä¸­ï¼Œä¼šå› ä¸ºå¯¹â€œå›æº¯â€çš„å®šä¹‰æ„Ÿåˆ°å›°æƒ‘ï¼Œè¿›è€Œæ‹¼å‘½åœ°é’»ç‰›è§’å°–ï¼Œè¿™æ ·çš„åšæ³•æ˜¯éå¸¸ä¸å¯å–çš„ã€‚<br/>
æ—©å¹´ç¬”è€…æœ‰è¿‡ä¸€æ®µçŸ­æš‚çš„ ACMer ç”Ÿæ¶¯ï¼Œå½¼æ—¶å…³äºå›æº¯ï¼Œè€å¸ˆæ›¾ç»ç»™å‡ºè¿‡ä¸€ä¸ªè¿™æ ·çš„è§£è¯»ï¼šâ€œåœ¨æˆ‘ä»¬æ¥ä¸‹æ¥è¦åº”å¯¹çš„é¢˜ç›®é‡Œï¼Œæœ‰é€’å½’å°±ä¼šæœ‰å›æº¯ã€‚å›æº¯ç®—æ³•çš„ç‰¹åˆ«ä¹‹å¤„ï¼Œåœ¨äºå…¶å¯¹åº”çš„é¢˜ç›®å¾€å¾€è¦æ±‚ä½ åœ¨é€’å½’è¿‡ç¨‹ä¸­æ±‚å‡ºä¸€ä¸ªç¡®åˆ‡çš„è§£â€ã€‚åæ¥ç¬”è€…è‡ªå·±ä¹±ä¸ƒå…«ç³Ÿåœ°è¯»äº†ä¸€å †ç®—æ³•ç›¸å…³çš„â€œåè‘—â€ï¼Œå…¶ä¸­åˆæœ‰ä¸€æœ¬ä¹¦è¿™æ ·å®šä¹‰å›æº¯ï¼šâ€œæ¶‰åŠå‰ªææ“ä½œçš„é€’å½’ï¼Œæˆ‘ä»¬ä¸€èˆ¬ç§°ä¹‹ä¸ºå›æº¯â€ã€‚Â  Â Â <br/>Â Â <br/>å¤§å®¶ä¼šå‘ç°ï¼Œå…³äºå›æº¯ç®—æ³•çš„å®šä¹‰ï¼Œå¯ä»¥è¯´æ˜¯ä»è€…è§ä»ã€æ™ºè€…è§æ™ºã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä¸å»ºè®®å¤§å®¶ä»æ¦‚å¿µå…¥æ‰‹å»å­¦ç®—æ³•çš„ä¸€ä¸ªåŸå› â€”â€”åå¤çº ç»“æ–‡å­—æ¸¸æˆï¼Œæ— æ³•ç»™ä½ å¸¦æ¥ä»»ä½•å®è´¨ä¸Šçš„èƒ½åŠ›æå‡ã€‚åœ¨å®é™…é¢è¯•ä¸­ï¼Œæ²¡æœ‰ä¸€ä¸ªé¢è¯•å®˜ä¼šè¦æ±‚ä½ é»˜å†™ç®—æ³•çš„å®šä¹‰ï¼Œä»–å…³æ³¨çš„ä¸€å®šæ˜¯ä½ çš„è§£é¢˜æ€è·¯å’Œç¼–ç å†…å®¹â€”â€”ä»€ä¹ˆéƒ½æ˜¯æµ®äº‘ï¼Œèƒ½æŠŠé¢˜åšå‡ºæ¥ï¼Œæ‰æ˜¯ç‹é“ï¼<br/></p>
<p><a name="user-content-Ph6KJ" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-49">é€’å½’ä¸å›æº¯é—®é¢˜â€”â€”è§£é¢˜æ¨¡æ¿æ€»ç»“</h2>
<p>åšå®Œäº†æ¥¼ä¸Šä¸‰é“å…¸å‹ä¾‹é¢˜ï¼Œç›¸ä¿¡å¤§å®¶æ­¤æ—¶éƒ½æœ‰äº†ä¸€äº›å¾®å¦™çš„æ„Ÿè§‰â€”â€”è¿™ä¸‰é“é¢˜çš„è§£é¢˜æ–¹æ³•æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œæ˜¯ä¸æ˜¯æ„å‘³ç€æ¶‰åŠé€’å½’å›æº¯ã€æˆ–è€…è¯´æ¶‰åŠ <code>DFS</code>Â åº”ç”¨çš„é¢˜ç›®ï¼Œéƒ½æœ‰æŸç§å…±é€šä¹‹å¤„å‘¢ï¼Ÿä¼šä¸ä¼šå­˜åœ¨æŸç§è§£é¢˜å¥—è·¯ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬çŸ¥ä¸€è§£ç™¾ã€ä¸¾ä¸€å N å‘¢ï¼ŸÂ  Â <br/>èƒ½æƒ³åˆ°è¿™ä¸€å±‚çš„è€é“ï¼Œæˆ‘è¦ç»™ä½ åŒå‡»ä¸€ä¸ªå·¨å¤§çš„ 666â€”â€”å–„äºæ€»ç»“ï¼Œç§¯æå¯»æ‰¾é¢˜ç›®ä¸é¢˜ç›®ä¹‹é—´çš„å…³è”ï¼Œå°è¯•å‘æ˜é¢˜ç›®ä¸­åæ˜ å‡ºæ¥çš„è§„å¾‹ï¼Œè¿™éƒ½æ˜¯éå¸¸æ£’çš„å­¦ä¹ ä¹ æƒ¯ã€‚Â  Â <br/>Â Â <br/>å¯¹äºé€’å½’å›æº¯ç³»åˆ—çš„é—®é¢˜ï¼Œç¬”è€…è‡ªå·±åœ¨åˆ·é¢˜è¿‡ç¨‹ä¸­æ€»ç»“å‡ºäº†ä¸€å¥—æ¨¡æ¿ã€‚åœ¨è¿™å¥—æ¨¡æ¿çš„å¼•å¯¼ä¸‹ï¼Œç¬”è€…è‡³ä»Šè¿˜æ²¡æœ‰åœ¨é€’å½’å›æº¯é—®é¢˜ä¸Šç¿»è¿‡è½¦ã€‚åœ¨è¿™é‡Œæˆ‘å’Œå¤§å®¶åˆ†äº«è¿™å¥—æ¨¡æ¿ï¼ŒåŒæ—¶ä¹Ÿå¸Œæœ›å„ä½åœ¨èº«ç»ç™¾æˆ˜ä¹‹åï¼Œèƒ½å¤Ÿé’ˆå¯¹ä¸åŒç±»å‹çš„é—®é¢˜ï¼Œå°è¯•å»æ€»ç»“ä¸€å¥—å±äºä½ è‡ªå·±çš„è§£é¢˜æ¨¡æ¿ã€‚Â  Â  Â <br/>Â Â <br/>å¦‚ä½•æ€»ç»“å‡ºä¸€å¥—è§£é¢˜æ¨¡æ¿ï¼Ÿå…¶å®å¾ˆç®€å•ï¼Œå¤§å®¶åªéœ€è¦ææ¸…æ¥šä¸‰ä¸ªé—®é¢˜ï¼šÂ  Â </p>
<ol>
<li>ä»€ä¹ˆæ—¶å€™ç”¨ï¼Ÿï¼ˆæ˜ç¡®åœºæ™¯ï¼‰</li>
<li>ä¸ºä»€ä¹ˆè¿™æ ·ç”¨ï¼Ÿï¼ˆæä¾›ä¾æ®ï¼‰</li>
<li>æ€ä¹ˆç”¨ï¼Ÿï¼ˆç»†åŒ–æ­¥éª¤ï¼‰</li>
</ol>
<p><br/>æ‹¿è¿™ä¸ªä¸“é¢˜æ¥è¯´ï¼Œæˆ‘ç»™å‡ºçš„è§£é¢˜æ¨¡æ¿å†…å®¹å¦‚ä¸‹ï¼šÂ Â <br/></p>
<p><a name="user-content-HbP9b" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h4 data-id="heading-50">ä»€ä¹ˆæ—¶å€™ç”¨</h4>
<p>çœ‹ä¸¤ä¸ªç‰¹å¾ï¼š</p>
<ol>
<li>é¢˜ç›®ä¸­æš—ç¤ºäº†ä¸€ä¸ªæˆ–å¤šä¸ªè§£ï¼Œå¹¶ä¸”è¦æ±‚æˆ‘ä»¬è¯¦å°½åœ°åˆ—ä¸¾å‡ºæ¯ä¸€ä¸ªè§£çš„å†…å®¹æ—¶ï¼Œä¸€å®šè¦æƒ³åˆ° DFSã€æƒ³åˆ°é€’å½’å›æº¯ã€‚Â Â </li>
<li>é¢˜ç›®ç»åˆ†æåï¼Œå¯ä»¥è½¬åŒ–ä¸ºæ ‘å½¢é€»è¾‘æ¨¡å‹æ±‚è§£ã€‚</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆè¿™æ ·ç”¨</strong><br/>é€’å½’ä¸å›æº¯çš„è¿‡ç¨‹ï¼Œæœ¬èº«å°±æ˜¯ç©·ä¸¾çš„è¿‡ç¨‹ã€‚é¢˜ç›®ä¸­è¦æ±‚æˆ‘ä»¬åˆ—ä¸¾æ¯ä¸€ä¸ªè§£çš„å†…å®¹ï¼Œè§£ä»å“ªæ¥ï¼Ÿè§£æ˜¯åŸºäºç©·ä¸¾æ€æƒ³ã€å¯¹æœç´¢æ ‘è¿›è¡Œæ°å½“åœ°å‰ªæåå¾—æ¥çš„ã€‚Â  Â <br/></p>
<pre><code class="hljs language-!" lang="!">è¿™é‡Œéœ€è¦å¤§å®¶æ³¨æ„åˆ°å¦ä¸€ç§é—®æ³•ï¼šä¸é—®è§£çš„å†…å®¹ï¼Œåªé—®è§£çš„ä¸ªæ•°ã€‚è¿™ç±»é—®é¢˜å¾€å¾€ä¸ç”¨ DFS æ¥è§£ï¼Œè€Œæ˜¯ç”¨åŠ¨æ€è§„åˆ’ï¼ˆæˆ‘ä»¬åé¢ä¼šå­¦ï¼‰ã€‚è¿™é‡Œï¼Œå¤§å®¶å…ˆè®°ä¸‹è¿™ä¸ªè¾¨æï¼Œå¯¹ä»¥ååšé¢˜ä¼šæœ‰å¸®åŠ©ã€‚
</code></pre>
<p><strong>æ€ä¹ˆç”¨</strong><br/>ä¸€ä¸ªæ¨¡å‹â€”â€”æ ‘å½¢é€»è¾‘æ¨¡å‹ï¼›ä¸¤ä¸ªè¦ç‚¹â€”â€”é€’å½’å¼å’Œé€’å½’è¾¹ç•Œã€‚<br/>æ ‘å½¢é€»è¾‘æ¨¡å‹çš„æ„å»ºï¼Œå…³é”®åœ¨äºæ‰¾â€œå‘ä½â€ï¼Œä¸€ä¸ªå‘ä½å°±å¯¹åº”æ ‘ä¸­çš„ä¸€å±‚ï¼Œæ¯ä¸€å±‚çš„å¤„ç†é€»è¾‘å¾€å¾€æ˜¯ä¸€æ ·çš„ï¼Œè¿™ä¸ªé€»è¾‘å°±æ˜¯é€’å½’å¼çš„å†…å®¹ã€‚è‡³äºé€’å½’è¾¹ç•Œï¼Œè¦ä¹ˆåœ¨é¢˜ç›®ä¸­çº¦æŸå¾—éå¸¸æ¸…æ¥šã€è¦ä¹ˆé»˜è®¤ä¸ºâ€œå‘ä½â€æ•°é‡çš„è¾¹ç•Œã€‚Â Â <br/>ç”¨ä¼ªä»£ç æ€»ç»“ä¸€ä¸‹ç¼–ç å½¢å¼ï¼Œå¤§éƒ¨åˆ†çš„é¢˜è§£éƒ½ç¬¦åˆä»¥ä¸‹ç‰¹å¾ï¼šÂ Â </p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">xxx</span>(<span class="hljs-params">å…¥å‚</span>) {
  å‰æœŸçš„å˜é‡å®šä¹‰ã€ç¼“å­˜ç­‰å‡†å¤‡å·¥ä½œ 
  
  <span class="hljs-comment">// å®šä¹‰è·¯å¾„æ ˆ</span>
  <span class="hljs-keyword">const</span> path = []
  
  <span class="hljs-comment">// è¿›å…¥ dfs</span>
  <span class="hljs-title function_">dfs</span>(èµ·ç‚¹) 
  
  <span class="hljs-comment">// å®šä¹‰ dfs</span>
  <span class="hljs-title function_">dfs</span>(<span class="hljs-params">é€’å½’å‚æ•°</span>) {
    <span class="hljs-keyword">if</span>(åˆ°è¾¾äº†é€’å½’è¾¹ç•Œ) {
      ç»“åˆé¢˜æ„å¤„ç†è¾¹ç•Œé€»è¾‘ï¼Œå¾€å¾€å’Œ path å†…å®¹æœ‰å…³
      <span class="hljs-keyword">return</span>   
    }
    
    <span class="hljs-comment">// æ³¨æ„è¿™é‡Œä¹Ÿå¯èƒ½ä¸æ˜¯ forï¼Œè§†é¢˜æ„å†³å®š</span>
    <span class="hljs-keyword">for</span>(éå†å‘ä½çš„å¯é€‰å€¼) {
      path.<span class="hljs-title function_">push</span>(å½“å‰é€‰ä¸­å€¼)
      å¤„ç†å‘ä½æœ¬èº«çš„ç›¸å…³é€»è¾‘
      path.<span class="hljs-title function_">pop</span>()
    }
  }
}
</code></pre>
<p>åœ¨é¢è¯•ä¸­ï¼Œå¦‚æœä½ éšçº¦è§‰å¾—è¿™é“é¢˜ç”¨é€’å½’å›æº¯æ¥è§£å¯èƒ½æœ‰æˆï¼Œå´ä¸€æ—¶é—´æ²¡åŠæ³•æ˜ç¡®å…·ä½“çš„è§£æ³•ï¼Œé‚£ä¹ˆä¸å¦¨å°è¯•æŠŠè¿™æ®µä¼ªä»£ç è®°åœ¨è„‘å­é‡Œã€‚åœ¨é¢è¯•æ—¶ï¼Œå…ˆæŠŠæ¡†æ¶å†™å‡ºæ¥ï¼Œç„¶åç»“åˆé¢˜æ„å»è°ƒæ•´å’Œå¡«å……ä¼ªä»£ç çš„å†…å®¹â€”â€”å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬åšé¢˜ç¼ºçš„ä¸æ˜¯çŸ¥è¯†å‚¨å¤‡ï¼Œè€Œæ˜¯ä¸€ä¸ªå…·ä½“çš„åˆ‡å…¥ç‚¹ã€‚</p>
<p>ï¼ˆé˜…è¯»è¿‡ç¨‹ä¸­æœ‰ä»»ä½•æƒ³æ³•æˆ–ç–‘é—®ï¼Œæˆ–è€…å•çº¯å¸Œæœ›å’Œç¬”è€…äº¤ä¸ªæœ‹å‹å•¥çš„ï¼Œæ¬¢è¿å¤§å®¶æ·»åŠ æˆ‘çš„å¾®ä¿¡xyalinodeä¸æˆ‘äº¤æµå“ˆ~ï¼‰</p>
<p>äºŒå‰æ ‘åœ¨é¢è¯•å®æˆ˜ä¸­ï¼ŒèŠ±æ ·éå¸¸å¤šã€‚æœ¬èŠ‚åªæ˜¯ä¸ªå¼€å¤´ï¼Œåœ¨åé¢å‡ ä¸ªä¸“é¢˜ã€åŒ…æ‹¬æœ€åçš„å¤§å‚çœŸé¢˜å®æˆ˜ç¯èŠ‚ä¸­ï¼Œæˆ‘ä»¬éƒ½ä¸ä¼šåœæ­¢å¯¹äºŒå‰æ ‘ç›¸å…³è€ƒç‚¹çš„å­¦ä¹ å’Œæ¢è®¨ã€‚</p>
<p>åœ¨æœ¬èŠ‚ï¼Œæœ‰ä»¥ä¸‹ä¸‰ä¸ªå‘½é¢˜æ–¹å‘éœ€è¦å¤§å®¶é‡ç‚¹æŒæ¡ï¼šÂ Â </p>
<ul>
<li>è¿­ä»£æ³•å®ç°äºŒå‰æ ‘çš„å…ˆã€ä¸­ã€ååºéå†Â </li>
<li>äºŒå‰æ ‘å±‚åºéå†çš„è¡ç”Ÿé—®é¢˜</li>
<li>ç¿»è½¬äºŒå‰æ ‘Â </li>
</ul>
<p><br/>è¿™ä¸‰ä¸ªæ–¹å‘å¯¹åº”çš„è€ƒé¢˜éƒ½æ¯”è¾ƒç»å…¸ã€‚ä¸æ­¤åŒæ—¶ï¼Œè§£å†³è¿™äº›é—®é¢˜æ¶‰åŠåˆ°çš„æ€è·¯å’Œç¼–ç ç»†èŠ‚ï¼Œä¹Ÿä¼šæˆä¸ºå„ä½æ—¥åè§£å†³æ›´åŠ å¤æ‚çš„é—®é¢˜çš„åŸºçŸ³ã€‚å› æ­¤ï¼Œè™½ç„¶æœ¬èŠ‚ç¯‡å¹…ç•¥é•¿ï¼Œä½†è¿˜æ˜¯å¸Œæœ›å„ä½èƒ½å¤Ÿå€¾æ³¨è€å¿ƒï¼Œç»™è‡ªå·±å……åˆ†çš„æ—¶é—´å»ç†è§£å’Œæ¶ˆåŒ–è¿™äº›çŸ¥è¯†ã€‚ <a name="user-content-zIY0u" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-51">â€œéå†ä¸‰å…„å¼Ÿâ€çš„è¿­ä»£å®ç°Â Â </h2>
<p>ç»è¿‡ç¬¬5èŠ‚çš„å­¦ä¹ ï¼Œç›¸ä¿¡å„ä½å·²ç»å°†äºŒå‰æ ‘å…ˆã€ä¸­ã€ååºéå†çš„é€’å½’å®ç°åƒå¾—é€é€çš„äº†ã€‚åœ¨ä½¿ç”¨é€’å½’å®ç°éå†çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ˜æ˜¾å¯Ÿè§‰åˆ°ï¼Œâ€œéå†ä¸‰å…„å¼Ÿâ€çš„ç¼–ç å®ç°ä¹Ÿå®›å¦‚å­ªç”Ÿå…„å¼Ÿä¸€æ ·ï¼Œå½¼æ­¤ä¹‹é—´åªæœ‰ä»£ç é¡ºåºä¸Šçš„ä¸åŒï¼Œæ•´ä½“å†…å®¹åŸºæœ¬æ˜¯ä¸€è‡´çš„ã€‚è¿™æ­£æ˜¯é€’å½’æ€æƒ³çš„ä¸€ä¸ªé‡è¦çš„ä¼˜ç‚¹â€”â€”ç®€å•ã€‚</p>
<p>è¿™é‡Œçš„â€œç®€å•â€å¹¶ä¸æ˜¯è¯´å­¦èµ·æ¥ç®€å•ã€‚ç›¸åï¼Œç»“åˆç¬”è€…æ—©æœŸçš„è¯»è€…è°ƒç ”æ¥çœ‹ï¼Œå¤§éƒ¨åˆ†åŒå­¦éƒ½è®¤ä¸ºé€’å½’å­¦èµ·æ¥è®©äººå¾ˆéš¾å—ï¼ˆè¿™ä¹Ÿæ˜¯æ­£å¸¸çš„ï¼‰ã€‚<br/>
åˆå­¦é€’å½’çš„äººæ’æ–¥é€’å½’ï¼Œå¤§éƒ¨åˆ†æ˜¯å‡ºäºå¯¹â€œå‡½æ•°è°ƒç”¨è‡ªèº«â€è¿™ç§éªšæ“ä½œçš„ä¸é€‚åº”ã€‚ä½†åªè¦ä½ èƒ½å…‹æœè¿™ç§ä¸é€‚åº”ï¼Œå¹¶ä¸”é€šè¿‡åå¤çš„æ¼”ç»ƒå»å¸æ”¶è¿™ç§è§£é¢˜æ–¹æ³•ï¼Œä½ å°±ä¼šå‘ç°é€’å½’çœŸçš„æ˜¯ä¸ªå¥½ä¸œè¥¿ã€‚å› ä¸ºé€šè¿‡ä½¿ç”¨é€’å½’ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠåŸæœ¬å¤æ‚çš„ä¸œè¥¿ï¼Œæ‹†è§£æˆéå¸¸ç®€å•çš„ã€ç¬¦åˆäººç±»æƒ¯ç”¨è„‘å›è·¯çš„é€»è¾‘ã€‚</p>
<p>è¿™æ ·è¯´å¯èƒ½è¿˜æ˜¯æœ‰ç‚¹æŠ½è±¡ï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œæ¥ä¸‹æ¥æˆ‘ä¼šè®²è§£â€œéå†ä¸‰å…„å¼Ÿâ€å¯¹åº”çš„è¿­ä»£è§£æ³•ã€‚ç­‰æˆ‘ä»¬å­¦å®Œè¿™å¨ä¸œè¥¿ä¹‹åï¼Œå¿ƒæ€€ç–‘æƒ‘çš„åŒå­¦ä¸å¦¨æ‹¿è¿­ä»£æ³•çš„ä»£ç å’Œç¬¬5èŠ‚ä¸­é€’å½’æ³•çš„ä»£ç æ¯”è¾ƒä¸€ä¸‹ï¼Œç›¸ä¿¡ä½ ä¼šæ¯«ä¸çŠ¹è±«åœ°å›å¤´å¯¹é€’å½’è¯´ä¸Šä¸€å¥â€œçœŸé¦™ï¼â€ã€‚</p>
<h3 data-id="heading-52">ä»å…ˆåºéå†è¯´èµ·</h3>
<p>Â Â </p>
<blockquote>
<p>é¢˜ç›®æè¿°ï¼šç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œè¿”å›å®ƒçš„å‰åºï¼ˆå…ˆåºï¼‰éå†åºåˆ—ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹:
è¾“å…¥: [1,null,2,3]</p>
</blockquote>
<pre><code class="hljs">1   
 \   
  2   
 /  
3 
</code></pre>
<blockquote>
<p>è¾“å‡º: [1,2,3]<br/>
è¿›é˜¶: é€’å½’ç®—æ³•å¾ˆç®€å•ï¼Œä½ å¯ä»¥é€šè¿‡è¿­ä»£ç®—æ³•å®Œæˆå—ï¼Ÿ</p>
</blockquote>
<p><a name="user-content-JJ7OY" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h4 data-id="heading-53">æ€è·¯åˆ†æ</h4>
<p>æ³¨æ„æœ€åé‚£ä¸€è¡Œå°å­—ï¼šâ€œé€’å½’ç®—æ³•å¾ˆç®€å•ï¼Œä½ å¯ä»¥é€šè¿‡è¿­ä»£ç®—æ³•å®Œæˆå—ï¼Ÿâ€ï¼Œå¯¹é€’å½’ç®—æ³•æœ‰ç–‘é—®çš„åŒå­¦ï¼Œè¶è¿™ä¸ªæœºä¼šèµ¶ç´§å¤ä¹ ä¸‹ç¬¬äº”å°èŠ‚ï¼Œæœ¬èŠ‚æˆ‘ä»¬åªè®²è¿­ä»£æ³•ã€‚Â  Â <br/>å‰é¢ä¸¤ä¸ªå°èŠ‚ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨å¼ºè°ƒï¼Œé€’å½’å’Œæ ˆæœ‰ç€è„±ä¸å¼€çš„å¹²ç³»ã€‚å½“ä¸€é“æœ¬å¯ä»¥ç”¨é€’å½’åšå‡ºæ¥çš„é¢˜ï¼Œçªç„¶ä¸è®¸ä½ ç”¨é€’å½’äº†ï¼Œæ­¤æ—¶æˆ‘ä»¬æœ¬èƒ½çš„ååº”ï¼Œå°±åº”è¯¥æ˜¯å¾€æ ˆä¸Šæƒ³ã€‚Â  Â <br/>Â Â <br/>åœ¨åŸºäºæ ˆæ¥è§£å†³æ‰è¿™ä¸ªé¢˜ä¹‹å‰ï¼Œæˆ‘è¦å…ˆè·Ÿå¹³æ—¶ç”¨ <code>leetcode</code>Â åˆ·é¢˜çš„å„ä½å¼ºè°ƒä¸€ä¸ªå¸¸è¯†ã€‚</p>
<p>ç°åœ¨å¤§å®¶å›å¤´çœ‹è¿™é“é¢˜ç›®ç»™æˆ‘ä»¬çš„<strong>è¾“å…¥</strong>å’Œ<strong>è¾“å‡º</strong>ï¼šè¾“å…¥çœ‹ä¼¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®åˆ™ä¸æ˜¯ã€‚å¤§å®¶è°¨è®°ï¼ŒäºŒå‰æ ‘é¢˜ç›®çš„è¾“å…¥åªè¦æ²¡æœ‰é¢å¤–å¼ºè°ƒï¼Œé‚£ä¹ˆä¸€èˆ¬æ¥è¯´å®ƒéƒ½æ˜¯åŸºäºè¿™æ ·çš„ä¸€ä¸ªå¯¹è±¡ç»“æ„åµŒå¥—è€Œæ¥çš„ï¼šÂ  Â </p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">TreeNode</span>(<span class="hljs-params">val</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">val</span> = val;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">left</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">right</span> = <span class="hljs-literal">null</span>;
}
</code></pre>
<p>æ¯”å¦‚è¿™æ ·ï¼šÂ </p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> root = {
  <span class="hljs-attr">val</span>: <span class="hljs-string">"A"</span>,
  <span class="hljs-attr">left</span>: {
    <span class="hljs-attr">val</span>: <span class="hljs-string">"B"</span>,
    <span class="hljs-attr">left</span>: {
      <span class="hljs-attr">val</span>: <span class="hljs-string">"D"</span>
    },
    <span class="hljs-attr">right</span>: {
      <span class="hljs-attr">val</span>: <span class="hljs-string">"E"</span>
    }
  },
  <span class="hljs-attr">right</span>: {
    <span class="hljs-attr">val</span>: <span class="hljs-string">"C"</span>,
    <span class="hljs-attr">right</span>: {
      <span class="hljs-attr">val</span>: <span class="hljs-string">"F"</span>
    }
  }
};
</code></pre>
<p>è¯è¯´å›æ¥ï¼Œä¸ºå•¥é¢˜ä¸Šç»™çš„ä¸æ˜¯å¯¹è±¡ï¼Œè€Œæ˜¯è¿™æ ·çš„ä¸€ä¸ªæ•°ç»„å‘¢ï¼šÂ </p>
<pre><code class="hljs language-javascript" lang="javascript">[<span class="hljs-number">1</span>,<span class="hljs-literal">null</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]
</code></pre>
<p>è¿™å…¶å®æ˜¯ä¸€ç§ç®€åŒ–çš„å†™æ³•ï¼Œæ€§è´¨è·Ÿå’±ä»¬å†™ä¼ªä»£ç å·®ä¸å¤šã€‚å®ƒçš„ä½œç”¨ä¸»è¦æ˜¯æè¿°äºŒå‰æ ‘çš„å€¼ï¼Œè‡³äºäºŒå‰æ ‘çš„ç»“æ„ï¼Œæˆ‘ä»¬ä»¥é¢˜ä¸­ç»™å‡ºçš„æ ‘å½¢ç»“æ„ä¸ºå‡†ï¼šÂ Â </p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-number">1</span>
  \
   <span class="hljs-number">2</span>
  /
<span class="hljs-number">3</span>
</code></pre>
<p><br/>OKï¼Œäº†è§£äº†è¾“å…¥å†…å®¹ï¼Œç°åœ¨å†æ¥çœ‹è¾“å‡ºï¼šÂ Â </p>
<pre><code class="hljs language-javascript" lang="javascript">[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]
</code></pre>
<p>è¿™é‡Œè¿™ä¸ªè¾“å‡ºå°±ç®€å•å¤šäº†ï¼Œå®ƒæ˜¯ä¸€ä¸ª<strong>çœŸæ•°ç»„</strong>ã€‚ä¸ºä»€ä¹ˆå¯ä»¥åˆ¤æ–­å®ƒæ˜¯ä¸€ä¸ªçœŸæ•°ç»„å‘¢ï¼Ÿå› ä¸ºé¢˜ç›®ä¸­è¦æ±‚ä½ è¾“å‡ºçš„æ˜¯ä¸€ä¸ªéå†åºåˆ—ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª<strong>äºŒå‰æ ‘</strong>ã€‚å› æ­¤å¤§å®¶æœ€åéœ€è¦å¡å…¥ç»“æœæ•°ç»„çš„ä¸æ˜¯ç»“ç‚¹å¯¹è±¡ï¼Œè€Œæ˜¯ç»“ç‚¹çš„å€¼ã€‚</p>
<pre><code class="hljs language-!" lang="!">æ³¨æ„ï¼š       
ä»¥ä¸Šçš„å‡ºå‚å…¥å‚è§„å¾‹ï¼Œæ˜¯é’ˆå¯¹ leetcode åŠå…¶å‘¨è¾¹ OJ æ¥è¯´çš„ã€‚OJ ä¸­è¿™æ ·ç¼–å†™é¢˜ç›®æè¿°ï¼Œæ˜¯æƒ…ç†ä¹‹ä¸­ï¼Œå› ä¸º OJ æœ¬èº«æ˜¯æ”¯æŒå¤šè¯­è¨€çš„ï¼Œå®ƒåªèƒ½å¯¹æœ€é€šç”¨çš„ä¸€éƒ¨åˆ†ä¿¡æ¯è¿›è¡Œé€å‡ºã€‚åœ¨é¢è¯•åœºæ™¯ä¸‹ï¼Œä¸æ’é™¤ä¸€äº›å…¬å¸å¯èƒ½ä¼šè´´å¿ƒåœ°æŠŠ JS ç‰ˆæœ¬çš„å‡ºå‚å’Œå…¥å‚ç»™å‡ºæ¥ï¼Œä½†æ›´å¤šçš„è¿˜æ˜¯ä¼šç›´æ¥å¤åˆ¶ç²˜è´´ leetcode æˆ–è€…å…¶å®ƒä¸€äº›ç®—æ³•ä¹¦ä¸­çš„åŸé¢˜ã€‚å¦‚æœä½ å¯¹é¢˜ç›®çš„å‡ºå‚å’Œå…¥å‚æœ‰ç–‘é—®ï¼Œè¯·å¤§èƒ†åœ°å¯¹é¢è¯•å®˜è¯´å‡ºä½ çš„å›°æƒ‘â€”â€”æ²¡æœ‰ä¸€ä¸ªæ­£å¸¸é¢è¯•å®˜ä¼šåœ¨é¢˜ç›®æè¿°ä¸Šä¸ºéš¾ä½ ï¼Œ ä»–æ¯”ä½ æ›´æ€¥åˆ‡åœ°æƒ³çœ‹åˆ°ä½ åˆ·åˆ·å†™ä»£ç çš„è‹±å§¿ã€‚    
</code></pre>
<p>å›åˆ°é¢˜ç›®ä¸Šæ¥ã€‚æˆ‘ä»¬æ¥ç€æ ˆå¾€ä¸‹è¯´ï¼Œé¢˜ç›®ä¸­çš„å‡ºå‚æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¤§å®¶ä»”ç»†çœ‹è¿™ä¸ªæ•°ç»„ï¼Œå®ƒåƒä¸åƒæ˜¯ä¸€ä¸ªæ ˆçš„å‡ºæ ˆåºåˆ—ï¼Ÿå®é™…ä¸Šï¼Œåšè¿™é“é¢˜çš„ä¸€ä¸ªæ ¹æœ¬æ€è·¯ï¼Œå°±æ˜¯é€šè¿‡<strong>åˆç†åœ°å®‰æ’å…¥æ ˆå’Œå‡ºæ ˆçš„æ—¶æœºã€ä½¿æ ˆçš„å‡ºæ ˆåºåˆ—ç¬¦åˆäºŒå‰æ ‘çš„å‰åºéå†è§„åˆ™</strong>ã€‚Â  Â <br/><br/>
å‰åºéå†çš„è§„åˆ™æ˜¯ï¼Œå…ˆéå†æ ¹ç»“ç‚¹ã€ç„¶åéå†å·¦å­©å­ã€æœ€åéå†å³å­©å­â€”â€”è¿™æ­£æ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„å‡ºæ ˆåºåˆ—ã€‚æŒ‰é“ç†ï¼Œå…¥æ ˆåºåˆ—å’Œå‡ºæ ˆåºåˆ—ç›¸åï¼Œæˆ‘ä»¬ä¼¼ä¹åº”è¯¥æŒ‰ç…§ <code>å³-&gt;å·¦-&gt;æ ¹</code>Â è¿™æ ·çš„é¡ºåºå°†ç»“ç‚¹å…¥æ ˆã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬éå†çš„èµ·ç‚¹å°±æ˜¯æ ¹ç»“ç‚¹ï¼Œéš¾é“æˆ‘ä»¬è¦å‡è£…æ²¡çœ‹åˆ°è¿™ä¸ªæ ¹ç»“ç‚¹ã€ä¸€é¼“ä½œæ°”æ‰¾åˆ°æœ€å³ä¾§ç»“ç‚¹ä¹‹åæ‰å¼€å§‹è¿›è¡Œå…¥æ ˆæ“ä½œå—ï¼Ÿç­”æ¡ˆå½“ç„¶æ˜¯å¦å®šçš„ï¼Œæˆ‘ä»¬çš„å‡ºå…¥æ ˆé¡ºåºåº”è¯¥æ˜¯è¿™æ ·çš„ï¼šÂ Â </p>
<ol>
<li>å°†æ ¹ç»“ç‚¹å…¥æ ˆÂ </li>
<li>å–å‡ºæ ˆé¡¶ç»“ç‚¹ï¼Œå°†ç»“ç‚¹å€¼ <code>push</code>Â è¿›ç»“æœæ•°ç»„Â </li>
<li>è‹¥æ ˆé¡¶ç»“ç‚¹æœ‰å³å­©å­ï¼Œåˆ™å°†å³å­©å­å…¥æ ˆ</li>
<li>è‹¥æ ˆé¡¶ç»“ç‚¹æœ‰å·¦å­©å­ï¼Œåˆ™å°†å·¦å­©å­å…¥æ ˆ</li>
</ol>
<p><br/>è¿™æ•´ä¸ªè¿‡ç¨‹ï¼Œæœ¬è´¨ä¸Šæ˜¯å°†å½“å‰å­æ ‘çš„æ ¹ç»“ç‚¹å…¥æ ˆã€å‡ºæ ˆï¼Œéšåå†å°†å…¶å¯¹åº”å·¦å³å­æ ‘å…¥æ ˆã€å‡ºæ ˆçš„è¿‡ç¨‹ã€‚</p>
<p>é‡å¤ 2ã€3ã€4 æ­¥éª¤ï¼Œç›´è‡³æ ˆç©ºï¼Œæˆ‘ä»¬å°±èƒ½å¾—åˆ°ä¸€ä¸ªå…ˆåºéå†åºåˆ—ã€‚Â  Â Â <br/>Â Â  <a name="user-content-0POAX" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h4 data-id="heading-54">ç¼–ç å®ç°Â Â </h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">TreeNode</span>} <span class="hljs-variable">root</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number[]</span>}
 */</span>
<span class="hljs-keyword">const</span> preorderTraversal = <span class="hljs-keyword">function</span>(<span class="hljs-params">root</span>) {
  <span class="hljs-comment">// å®šä¹‰ç»“æœæ•°ç»„</span>
  <span class="hljs-keyword">const</span> res = []  
  <span class="hljs-comment">// å¤„ç†è¾¹ç•Œæ¡ä»¶</span>
  <span class="hljs-keyword">if</span>(!root) {
      <span class="hljs-keyword">return</span> res
  }
  <span class="hljs-comment">// åˆå§‹åŒ–æ ˆç»“æ„</span>
  <span class="hljs-keyword">const</span> stack = [] 
  <span class="hljs-comment">// é¦–å…ˆå°†æ ¹ç»“ç‚¹å…¥æ ˆ</span>
  stack.<span class="hljs-title function_">push</span>(root)  
  <span class="hljs-comment">// è‹¥æ ˆä¸ä¸ºç©ºï¼Œåˆ™é‡å¤å‡ºæ ˆã€å…¥æ ˆæ“ä½œ</span>
  <span class="hljs-keyword">while</span>(stack.<span class="hljs-property">length</span>) {
      <span class="hljs-comment">// å°†æ ˆé¡¶ç»“ç‚¹è®°ä¸ºå½“å‰ç»“ç‚¹</span>
      <span class="hljs-keyword">const</span> cur = stack.<span class="hljs-title function_">pop</span>() 
      <span class="hljs-comment">// å½“å‰ç»“ç‚¹å°±æ˜¯å½“å‰å­æ ‘çš„æ ¹ç»“ç‚¹ï¼ŒæŠŠè¿™ä¸ªç»“ç‚¹æ”¾åœ¨ç»“æœæ•°ç»„çš„å°¾éƒ¨</span>
      res.<span class="hljs-title function_">push</span>(cur.<span class="hljs-property">val</span>)
      <span class="hljs-comment">// è‹¥å½“å‰å­æ ‘æ ¹ç»“ç‚¹æœ‰å³å­©å­ï¼Œåˆ™å°†å³å­©å­å…¥æ ˆ</span>
      <span class="hljs-keyword">if</span>(cur.<span class="hljs-property">right</span>) {
          stack.<span class="hljs-title function_">push</span>(cur.<span class="hljs-property">right</span>)
      }
      <span class="hljs-comment">// è‹¥å½“å‰å­æ ‘æ ¹ç»“ç‚¹æœ‰å·¦å­©å­ï¼Œåˆ™å°†å·¦å­©å­å…¥æ ˆ</span>
      <span class="hljs-keyword">if</span>(cur.<span class="hljs-property">left</span>) {
          stack.<span class="hljs-title function_">push</span>(cur.<span class="hljs-property">left</span>)
      }
  }
  <span class="hljs-comment">// è¿”å›ç»“æœæ•°ç»„</span>
  <span class="hljs-keyword">return</span> res
};
</code></pre>
<p>Â Â  <a name="user-content-WRdHJ" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-55">å¼‚æ›²åŒå·¥çš„ååºéå†è¿­ä»£å®ç°Â  Â  Â </h3>
<p><a name="user-content-a1s7V" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h4 data-id="heading-56">æ€è·¯åˆ†æ</h4>
<p>ååºéå†çš„å‡ºæ ˆåºåˆ—ï¼ŒæŒ‰ç…§è§„åˆ™åº”è¯¥æ˜¯ <code>å·¦ -&gt; å³ -&gt; æ ¹</code>Â ã€‚è¿™ä¸ªé¡ºåºç›¸å¯¹äºå…ˆåºéå†ï¼Œæœ€æ˜æ˜¾çš„å˜åŒ–å°±æ˜¯æ ¹ç»“ç‚¹çš„ä½ç½®ä»ç¬¬ä¸€ä¸ªå˜æˆäº†å€’æ•°ç¬¬ä¸€ä¸ªã€‚Â  Â <br/>å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹å‘¢ï¼Ÿä¸å…¶ä» <code>stack</code>Â è¿™ä¸ªæ ˆç»“æ„ä¸Šå…¥æ‰‹ï¼Œä¸å¦‚ä» <code>res</code>Â ç»“æœæ•°ç»„ä¸Šå…¥æ‰‹ï¼šæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠ <code>pop</code>Â å‡ºæ¥çš„å½“å‰ç»“ç‚¹ <code>unshift</code>Â è¿› <code>res</code>Â çš„å¤´éƒ¨ï¼Œæ”¹é€ åçš„ä»£ç ä¼šå˜æˆè¿™æ ·ï¼šÂ </p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">while</span>(stack.<span class="hljs-property">length</span>) {
  <span class="hljs-comment">// å°†æ ˆé¡¶ç»“ç‚¹è®°ä¸ºå½“å‰ç»“ç‚¹</span>
  <span class="hljs-keyword">const</span> cur = stack.<span class="hljs-title function_">pop</span>() 
  <span class="hljs-comment">// å½“å‰ç»“ç‚¹å°±æ˜¯å½“å‰å­æ ‘çš„æ ¹ç»“ç‚¹ï¼ŒæŠŠè¿™ä¸ªç»“ç‚¹æ”¾åœ¨ç»“æœæ•°ç»„çš„å¤´éƒ¨</span>
  res.<span class="hljs-title function_">unshift</span>(cur.<span class="hljs-property">val</span>)
  <span class="hljs-comment">// è‹¥å½“å‰å­æ ‘æ ¹ç»“ç‚¹æœ‰å³å­©å­ï¼Œåˆ™å°†å³å­©å­å…¥æ ˆ</span>
  <span class="hljs-keyword">if</span>(cur.<span class="hljs-property">right</span>) {
    stack.<span class="hljs-title function_">push</span>(cur.<span class="hljs-property">right</span>)
  }
  <span class="hljs-comment">// è‹¥å½“å‰å­æ ‘æ ¹ç»“ç‚¹æœ‰å·¦å­©å­ï¼Œåˆ™å°†å·¦å­©å­å…¥æ ˆ</span>
  <span class="hljs-keyword">if</span>(cur.<span class="hljs-property">left</span>) {
    stack.<span class="hljs-title function_">push</span>(cur.<span class="hljs-property">left</span>)
  }
}
</code></pre>
<p>å¤§å®¶å¯ä»¥å°è¯•åœ¨å¤§è„‘é‡Œé¢„åˆ¤ä¸€ä¸‹è¿™ä¸ªä»£ç çš„æ‰§è¡Œé¡ºåºï¼šç”±äºæˆ‘ä»¬å¡«å…… <code>res</code>Â ç»“æœæ•°ç»„çš„é¡ºåºæ˜¯ä»åå¾€å‰å¡«å……ï¼ˆæ¯æ¬¡å¢åŠ ä¸€ä¸ªå¤´éƒ¨å…ƒç´ ï¼‰ï¼Œå› æ­¤å…ˆå‡ºæ ˆçš„ç»“ç‚¹åè€Œä¼šä½äº <code>res</code> æ•°ç»„ç›¸å¯¹é åçš„ä½ç½®ã€‚å‡ºæ ˆçš„é¡ºåºæ˜¯ <code>å½“å‰ç»“ç‚¹ -&gt; å½“å‰ç»“ç‚¹çš„å·¦å­©å­ -&gt; å½“å‰ç»“ç‚¹çš„å³å­©å­</code>Â ï¼Œå…¶å¯¹åº”çš„Â <code>res</code>Â åºåˆ—é¡ºåºå°±æ˜¯ <code>å³ -&gt; å·¦ -&gt; æ ¹</code>Â ã€‚è¿™æ ·ä¸€æ¥ï¼Œ æ ¹ç»“ç‚¹å°±æˆåŠŸåœ°è¢«æˆ‘ä»¬è½¬ç§»åˆ°äº†éå†åºåˆ—çš„æœ€æœ«å°¾ã€‚<br/>ç°åœ¨å”¯ä¸€è®©äººçœ‹ä¸é¡ºçœ¼çš„åªå‰©ä¸‹è¿™ä¸ªå³å­©å­å’Œå·¦å­©å­çš„é¡ºåºäº†ï¼Œè¿™ä¸¤ä¸ªå­©å­ç»“ç‚¹è¿›å…¥ç»“æœæ•°ç»„çš„é¡ºåºä¸å…¶è¢« <code>pop</code>Â å‡ºæ ˆçš„é¡ºåºæ˜¯ä¸€è‡´çš„ï¼Œè€Œå‡ºæ ˆé¡ºåºåˆå®Œå…¨ç”±å…¥æ ˆé¡ºåºå†³å®šï¼Œå› æ­¤åªéœ€è¦ç›¸åº”åœ°è°ƒæ•´ä¸¤ä¸ªç»“ç‚¹çš„å…¥æ ˆé¡ºåºå°±å¥½äº†ï¼šÂ Â </p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è‹¥å½“å‰å­æ ‘æ ¹ç»“ç‚¹æœ‰å·¦å­©å­ï¼Œåˆ™å°†å·¦å­©å­å…¥æ ˆ</span>
<span class="hljs-keyword">if</span>(cur.<span class="hljs-property">left</span>) {
  stack.<span class="hljs-title function_">push</span>(cur.<span class="hljs-property">left</span>)
}  
<span class="hljs-comment">// è‹¥å½“å‰å­æ ‘æ ¹ç»“ç‚¹æœ‰å³å­©å­ï¼Œåˆ™å°†å³å­©å­å…¥æ ˆ</span>
<span class="hljs-keyword">if</span>(cur.<span class="hljs-property">right</span>) {
  stack.<span class="hljs-title function_">push</span>(cur.<span class="hljs-property">right</span>)
}
</code></pre>
<p>å¦‚æ­¤ä¸€æ¥ï¼Œå³å­©å­å°±ä¼šç›¸å¯¹äºå·¦å­©å­ä¼˜å…ˆå‡ºæ ˆï¼Œè¿›è€Œè¢«æ”¾åœ¨ <code>res</code>Â ç»“æœæ•°ç»„ç›¸å¯¹é åçš„ä½ç½®ï¼Œ <code>å·¦ -&gt; å³ -&gt;æ ¹</code>Â çš„æ’åºè§„åˆ™å°±ç¨³ç¨³åœ°å®ç°å‡ºæ¥äº†ã€‚Â  Â <br/>Â Â <br/>æˆ‘ä»¬æŠŠä»¥ä¸Šä¸¤ä¸ªæ”¹é€ ç‚¹ç»“åˆä¸€ä¸‹ï¼Œå°±æœ‰äº†ä»¥ä¸‹ä»£ç ï¼šÂ  Â <br/></p>
<p><a name="user-content-Yy3lw" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h4 data-id="heading-57">ç¼–ç å®ç°Â  Â </h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">TreeNode</span>} <span class="hljs-variable">root</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number[]</span>}
 */</span>
<span class="hljs-keyword">const</span> postorderTraversal = <span class="hljs-keyword">function</span>(<span class="hljs-params">root</span>) {
  <span class="hljs-comment">// å®šä¹‰ç»“æœæ•°ç»„</span>
  <span class="hljs-keyword">const</span> res = []  
  <span class="hljs-comment">// å¤„ç†è¾¹ç•Œæ¡ä»¶</span>
  <span class="hljs-keyword">if</span>(!root) {
      <span class="hljs-keyword">return</span> res
  }
  <span class="hljs-comment">// åˆå§‹åŒ–æ ˆç»“æ„</span>
  <span class="hljs-keyword">const</span> stack = [] 
  <span class="hljs-comment">// é¦–å…ˆå°†æ ¹ç»“ç‚¹å…¥æ ˆ</span>
  stack.<span class="hljs-title function_">push</span>(root)  
  <span class="hljs-comment">// è‹¥æ ˆä¸ä¸ºç©ºï¼Œåˆ™é‡å¤å‡ºæ ˆã€å…¥æ ˆæ“ä½œ</span>
  <span class="hljs-keyword">while</span>(stack.<span class="hljs-property">length</span>) {
      <span class="hljs-comment">// å°†æ ˆé¡¶ç»“ç‚¹è®°ä¸ºå½“å‰ç»“ç‚¹</span>
      <span class="hljs-keyword">const</span> cur = stack.<span class="hljs-title function_">pop</span>() 
      <span class="hljs-comment">// å½“å‰ç»“ç‚¹å°±æ˜¯å½“å‰å­æ ‘çš„æ ¹ç»“ç‚¹ï¼ŒæŠŠè¿™ä¸ªç»“ç‚¹æ”¾åœ¨ç»“æœæ•°ç»„çš„å¤´éƒ¨</span>
      res.<span class="hljs-title function_">unshift</span>(cur.<span class="hljs-property">val</span>)
      <span class="hljs-comment">// è‹¥å½“å‰å­æ ‘æ ¹ç»“ç‚¹æœ‰å·¦å­©å­ï¼Œåˆ™å°†å·¦å­©å­å…¥æ ˆ</span>
      <span class="hljs-keyword">if</span>(cur.<span class="hljs-property">left</span>) {
        stack.<span class="hljs-title function_">push</span>(cur.<span class="hljs-property">left</span>)
      }  
      <span class="hljs-comment">// è‹¥å½“å‰å­æ ‘æ ¹ç»“ç‚¹æœ‰å³å­©å­ï¼Œåˆ™å°†å³å­©å­å…¥æ ˆ</span>
      <span class="hljs-keyword">if</span>(cur.<span class="hljs-property">right</span>) {
        stack.<span class="hljs-title function_">push</span>(cur.<span class="hljs-property">right</span>)
      }
  }
  <span class="hljs-comment">// è¿”å›ç»“æœæ•°ç»„</span>
  <span class="hljs-keyword">return</span> res
};
</code></pre>
<p><a name="user-content-3cD95" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-58"/>
<p><a name="user-content-ywiel" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-59">æ€è·¯æ¸…å¥‡çš„ä¸­åºéå†è¿­ä»£å®ç°Â Â </h3>
<p><a name="user-content-W7rLX" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h4 data-id="heading-60">æ€è·¯åˆ†æ</h4>
<p>ç»è¿‡ä¸Šé¢çš„è®²è§£ï¼Œå¤§å®¶ä¼šå‘ç°å…ˆåºéå†å’Œååºéå†çš„ç¼–ç å®ç°å…¶å®æ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œå®ƒä»¬éµå¾ªçš„éƒ½æ˜¯åŒä¸€å¥—åŸºæœ¬æ¡†æ¶ã€‚é‚£ä¹ˆæˆ‘ä»¬èƒ½å¦é€šè¿‡å¯¹è¿™ä¸ªåŸºæœ¬æ¡†æ¶è¿›è¡Œå¾®è°ƒã€ä»è€ŒåŒæ ·è½»æ¾åœ°å®ç°ä¸­åºéå†å‘¢ï¼ŸÂ  Â <br/>ç­”æ¡ˆæ˜¯ä¸èƒ½ï¼Œä¸ºå•¥ä¸èƒ½ï¼Ÿå› ä¸ºå…ˆåºéå†å’Œååºéå†ä¹‹æ‰€ä»¥å¯ä»¥ç”¨åŒä¸€å¥—ä»£ç æ¡†æ¶æ¥å®ç°ï¼Œæœ¬è´¨ä¸Šæ˜¯å› ä¸ºä¸¤è€…çš„å‡ºæ ˆã€å…¥æ ˆé€»è¾‘å·®åˆ«ä¸å¤§â€”â€”éƒ½æ˜¯å…ˆå¤„ç†æ ¹ç»“ç‚¹ï¼Œç„¶åå¤„ç†å­©å­ç»“ç‚¹ã€‚è€Œä¸­åºéå†ä¸­ï¼Œæ ¹ç»“ç‚¹ä¸å†å‡ºç°åœ¨éå†åºåˆ—çš„è¾¹ç•Œã€è€Œæ˜¯å‡ºç°åœ¨éå†åºåˆ—çš„ä¸­é—´ã€‚è¿™å°±æ„å‘³ç€æ— è®ºå¦‚ä½•æˆ‘ä»¬ä¸èƒ½å†å°†æ ¹ç»“ç‚¹ä½œä¸ºç¬¬ä¸€ä¸ªè¢« <code>pop</code>Â å‡ºæ¥çš„å…ƒç´ æ¥å¤„ç†äº†â€”â€”å‡ºæ ˆçš„æ—¶æœºè¢«æ”¹å˜äº†ï¼Œè¿™æ„å‘³ç€å…¥æ ˆçš„é€»è¾‘ä¹Ÿéœ€è¦è°ƒæ•´ã€‚è¿™ä¸€æ¬¡æˆ‘ä»¬ä¸èƒ½å†é€šè¿‡å¯¹ <code>res</code>Â åŠ¨æ‰‹è„šæ¥è§£å†³é—®é¢˜ï¼Œè€Œæ˜¯éœ€è¦å’Œ <code>stack</code>Â é¢å¯¹é¢ battleã€‚Â  Â  Â <br/>Â Â <br/>ä¸­åºéå†çš„åºåˆ—è§„åˆ™æ˜¯ <code>å·¦ -&gt; ä¸­ -&gt; å³</code>Â ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¿…é¡»é¦–å…ˆå®šä½åˆ°æœ€å·¦çš„å¶å­ç»“ç‚¹ã€‚åœ¨è¿™ä¸ªå®šä½çš„è¿‡ç¨‹ä¸­ï¼Œå¿…ç„¶ä¼šé€”å¾„ç›®æ ‡ç»“ç‚¹çš„çˆ¶ç»“ç‚¹ã€çˆ·çˆ·ç»“ç‚¹å’Œå„ç§è¾ˆåˆ†çš„ç¥–å®—ç»“ç‚¹ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/10/171fefdfeae2b8a3~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=532&amp;h=362&amp;s=67269&amp;e=gif&amp;f=9" alt="" loading="lazy"/>Â Â <br/>Â <br/>é€”å¾„è¿‡çš„æ¯ä¸€ä¸ªç»“ç‚¹ï¼Œæˆ‘ä»¬éƒ½è¦åŠæ—¶åœ°æŠŠå®ƒå…¥æ ˆã€‚è¿™æ ·å½“æœ€å·¦çš„å¶å­ç»“ç‚¹å‡ºæ ˆæ—¶ï¼Œç¬¬ä¸€ä¸ªå›æº¯åˆ°çš„å°±æ˜¯å®ƒçš„çˆ¶ç»“ç‚¹ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/10/171ff0373bbde5df~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=2082&amp;h=736&amp;s=88982&amp;e=jpg" alt="" loading="lazy"/>
æœ‰äº†çˆ¶ç»“ç‚¹ï¼Œå°±ä¸æ„æ‰¾ä¸åˆ°å…„å¼Ÿç»“ç‚¹ï¼Œéå†ç»“æœå°±å˜å¾—å”¾æ‰‹å¯å¾—äº†~Â  Â  Â <br/>åŸºäºè¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬æ¥å†™ä»£ç ï¼šÂ Â  <a name="user-content-bQ6JB" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h4 data-id="heading-61">ç¼–ç å®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">TreeNode</span>} <span class="hljs-variable">root</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number[]</span>}
 */</span>
<span class="hljs-keyword">const</span> inorderTraversal = <span class="hljs-keyword">function</span>(<span class="hljs-params">root</span>) {
  <span class="hljs-comment">// å®šä¹‰ç»“æœæ•°ç»„</span>
  <span class="hljs-keyword">const</span> res = []  
  <span class="hljs-comment">// åˆå§‹åŒ–æ ˆç»“æ„</span>
  <span class="hljs-keyword">const</span> stack = []   
  <span class="hljs-comment">// ç”¨ä¸€ä¸ª cur ç»“ç‚¹å……å½“æ¸¸æ ‡</span>
  <span class="hljs-keyword">let</span> cur = root  
  <span class="hljs-comment">// å½“ cur ä¸ä¸ºç©ºã€æˆ–è€… stack ä¸ä¸ºç©ºæ—¶ï¼Œé‡å¤ä»¥ä¸‹é€»è¾‘</span>
  <span class="hljs-keyword">while</span>(cur || stack.<span class="hljs-property">length</span>) {
      <span class="hljs-comment">// è¿™ä¸ª while çš„ä½œç”¨æ˜¯æŠŠå¯»æ‰¾æœ€å·¦å¶å­ç»“ç‚¹çš„è¿‡ç¨‹ä¸­ï¼Œé€”å¾„çš„æ‰€æœ‰ç»“ç‚¹éƒ½è®°å½•ä¸‹æ¥ </span>
      <span class="hljs-keyword">while</span>(cur) {
          <span class="hljs-comment">// å°†é€”å¾„çš„ç»“ç‚¹å…¥æ ˆ</span>
          stack.<span class="hljs-title function_">push</span>(cur)  
          <span class="hljs-comment">// ç»§ç»­æœç´¢å½“å‰ç»“ç‚¹çš„å·¦å­©å­</span>
          cur = cur.<span class="hljs-property">left</span>  
      }
      <span class="hljs-comment">// å–å‡ºæ ˆé¡¶å…ƒç´ </span>
      cur = stack.<span class="hljs-title function_">pop</span>()  
      <span class="hljs-comment">// å°†æ ˆé¡¶å…ƒç´ å…¥æ ˆ</span>
      res.<span class="hljs-title function_">push</span>(cur.<span class="hljs-property">val</span>)  
      <span class="hljs-comment">// å°è¯•è¯»å– cur ç»“ç‚¹çš„å³å­©å­</span>
      cur = cur.<span class="hljs-property">right</span>
  }
  <span class="hljs-comment">// è¿”å›ç»“æœæ•°ç»„</span>
  <span class="hljs-keyword">return</span> res
};
</code></pre>
<p><a name="user-content-mgStm" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h4 data-id="heading-62">ç¼–ç å¤ç›˜</h4>
<p>è¯»å®Œè¿™æ®µç¼–ç ç¤ºèŒƒï¼Œä¸€éƒ¨åˆ†åŒå­¦å¯èƒ½å·²ç»å¼€å§‹æ‡µé€¼äº†ï¼šçœ‹ç€å‰é¢ç»™å‡ºçš„æ€è·¯åˆ†æï¼Œä¼¼ä¹å®Œå…¨å†™ä¸å‡ºä¸Šé¢è¿™æ ·çš„ä»£ç å•Šï¼æ‰€ä»¥è¿™æ®µä»£ç åˆ°åº•åœ¨å¹²å˜›ï¼Ÿï¼Ÿï¼ŸÂ  Â <br/>å¦‚æœä½ æ²¡æœ‰è¿™æ ·çš„å›°æƒ‘ï¼Œè¯´æ˜ä½ æ˜¯ä¸€ä½æ‚Ÿæ€§æ¯”è¾ƒé«˜çš„åŒå­¦ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡ç¼–ç å¤ç›˜éƒ¨åˆ†å¾€ä¸‹è¯»äº†ï¼ˆbtwç»™ä½ ç‚¹ä¸ªèµ~ï¼‰ã€‚Â  Â <br/>å®ä¸ç›¸ç’ï¼Œå¦‚æœä½ æ˜¯åˆå­¦è€…ï¼Œè¿™æ®µä»£ç å¯èƒ½ç¡®å®éœ€è¦å¤§å®¶åœ¨è„‘å†…åå¤è¿è¡Œã€åå¤è·‘ demo æ‰èƒ½ç†è§£å…¶ä¸­çš„é€»è¾‘ã€‚ä¸ºäº†åŠ å¿«è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘æŠŠå…¶ä¸­çœ‹ä¸Šå»ç¨å¾®æ‹å¼¯æŠ¹è§’ä¸€ç‚¹çš„é€»è¾‘æ‘˜å‡ºæ¥ï¼Œç»™å¤§å®¶ç‚¹æ‹¨ä¸€ä¸‹ï¼šÂ Â </p>
<ol>
<li>ä¸¤ä¸ª <code>while</code>Â ï¼šå†…å±‚çš„ <code>while</code>Â çš„ä½œç”¨æ˜¯åœ¨å¯»æ‰¾æœ€å·¦å¶å­ç»“ç‚¹çš„è¿‡ç¨‹ä¸­ï¼ŒæŠŠé€”å¾„çš„æ‰€æœ‰ç»“ç‚¹éƒ½è®°å½•åˆ° <code>stack</code>Â é‡Œã€‚è®°å½•å·¥ä½œå®Œæˆåï¼Œæ‰ä¼šèµ°åˆ°å¤–å±‚ <code>while</code>Â çš„å‰©ä½™é€»è¾‘é‡Œâ€”â€”è¿™éƒ¨åˆ†é€»è¾‘çš„ä½œç”¨æ˜¯ä»æœ€å·¦çš„å¶å­ç»“ç‚¹å¼€å§‹ï¼Œä¸€å±‚å±‚å›æº¯éå†å·¦å­©å­çš„çˆ¶ç»“ç‚¹å’Œå³ä¾§å…„å¼Ÿç»“ç‚¹ï¼Œè¿›è€Œå®Œæˆæ•´ä¸ªä¸­åºéå†ä»»åŠ¡ã€‚Â Â </li>
<li>å¤–å±‚ <code>while</code>Â çš„ä¸¤ä¸ªæ¡ä»¶ï¼š <code>cur</code>Â çš„å­˜åœ¨æ€§å’Œ<code>stack.length</code>Â çš„å­˜åœ¨æ€§ï¼Œå„è‡ªæ˜¯ä¸ºäº†é™åˆ¶ä»€ä¹ˆï¼Ÿ
<ol>
<li><code>stack.length</code>Â çš„å­˜åœ¨æ€§æ¯”è¾ƒå¥½ç†è§£ï¼Œ <code>stack</code>Â ä¸­å­˜å‚¨çš„æ˜¯æ²¡æœ‰è¢«æ¨å…¥ç»“æœæ•°ç»„ <code>res</code>Â çš„å¾…éå†å…ƒç´ ã€‚åªè¦ <code>stack</code>Â ä¸ä¸ºç©ºï¼Œå°±æ„å‘³ç€éå†æ²¡æœ‰ç»“æŸï¼Œ éå†åŠ¨ä½œéœ€è¦ç»§ç»­é‡å¤ã€‚Â </li>
<li><code>cur</code>Â çš„å­˜åœ¨æ€§å°±æ¯”è¾ƒæœ‰è¶£äº†ã€‚å®ƒå¯¹åº”ä»¥ä¸‹å‡ ç§æƒ…å†µï¼šÂ 
<ol>
<li>åˆå§‹æ€ï¼Œ <code>cur</code>Â æŒ‡å‘ <code>root</code>Â ç»“ç‚¹ï¼Œåªè¦ <code>root</code>Â ä¸ä¸ºç©ºï¼Œ <code>cur</code>Â å°±ä¸ä¸ºç©ºã€‚æ­¤æ—¶åˆ¤æ–­äº† <code>cur</code>Â å­˜åœ¨åï¼Œå°±ä¼šå¼€å§‹æœ€å·¦å¶å­ç»“ç‚¹çš„å¯»æ‰¾ä¹‹æ—…ã€‚è¿™è¶Ÿâ€œä¸€è·¯å‘å·¦â€çš„æ—…é€”ä¸­ï¼Œ <code>cur</code>Â å§‹ç»ˆæŒ‡å‘å½“å‰éå†åˆ°çš„å·¦å­©å­ã€‚Â </li>
<li>ç¬¬ä¸€æ³¢å†…å±‚ <code>while</code>Â å¾ªç¯ç»“æŸï¼Œ <code>cur</code>Â å¼€å§‹æ‰¿æ‹…ä¸­åºéå†çš„éå†æ¸¸æ ‡èŒè´£ã€‚ <code>cur</code>Â å§‹ç»ˆä¼šæŒ‡å‘å½“å‰æ ˆçš„æ ˆé¡¶å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯â€œä¸€è·¯å‘å·¦â€è¿‡ç¨‹ä¸­é€”å¾„çš„æŸä¸ªå·¦å­©å­ï¼Œç„¶åå°†è¿™ä¸ªå·¦å­©å­ä½œä¸ºä¸­åºéå†çš„ç¬¬ä¸€ä¸ªç»“æœå…ƒç´ çº³å…¥ç»“æœæ•°ç»„ã€‚å‡å¦‚è¿™ä¸ªå·¦å­©å­æ˜¯ä¸€ä¸ªå¶å­ç»“ç‚¹ï¼Œé‚£ä¹ˆå°è¯•å–å…¶å³å­©å­æ—¶å°±åªèƒ½å–åˆ° <code>null</code>Â ï¼Œè¿™ä¸ª <code>null</code>Â çš„å­˜åœ¨ï¼Œä¼šå¯¼è‡´å†…å±‚å¾ªç¯ <code>while</code>Â è¢«è·³è¿‡ï¼Œæ¥ç€å°±ç›´æ¥å›æº¯åˆ°äº†è¿™ä¸ªå·¦å­©å­çš„çˆ¶ç»“ç‚¹ï¼Œç¬¦åˆ <code>å·¦-&gt;æ ¹</code>Â  çš„åºåˆ—è§„åˆ™Â Â </li>
<li>å‡å¦‚å½“å‰å–åˆ°çš„æ ˆé¡¶å…ƒç´ ä¸æ˜¯å¶å­ç»“ç‚¹ï¼ŒåŒæ—¶æœ‰ä¸€ä¸ªå³å­©å­ï¼Œé‚£ä¹ˆå°è¯•å–å…¶å³å­©å­æ—¶å°±ä¼šå–åˆ°ä¸€ä¸ªå­˜åœ¨çš„ç»“ç‚¹ã€‚ <code>cur</code>Â å­˜åœ¨ï¼Œäºæ˜¯è¿›å…¥å†…å±‚ <code>while</code>Â å¾ªç¯ï¼Œé‡å¤â€œä¸€è·¯å‘å·¦â€çš„æ“ä½œï¼Œå»å¯»æ‰¾è¿™ä¸ªå³å­©å­å¯¹åº”çš„å­æ ‘é‡Œæœ€é å·¦çš„ç»“ç‚¹ï¼Œç„¶åå»é‡å¤åˆšåˆšè¿™ä¸ªæˆ–å›æº¯ã€æˆ–â€œä¸€è·¯å‘å·¦â€çš„è¿‡ç¨‹ã€‚å¦‚æœè¿™ä¸ªå³å­©å­å¯¹åº”çš„å­æ ‘é‡Œæ²¡æœ‰å·¦å­©å­ï¼Œé‚£ä¹ˆè·³å‡ºå†…å±‚ <code>while</code>Â å¾ªç¯ä¹‹åï¼Œç´§æ¥ç€è¢«çº³å…¥ <code>res</code>Â ç»“æœæ•°ç»„çš„å°±æ˜¯è¿™ä¸ªå³å­©å­æœ¬èº«ï¼Œç¬¦åˆ <code>æ ¹-&gt;å³</code>Â çš„åºåˆ—è§„åˆ™</li>
</ol>
</li>
</ol>
</li>
</ol>
<p><br/>ç»“åˆä¸Šé¢çš„åˆ†æï¼Œå¤§å®¶ä¼šä¸ä¼šè§‰å¾—ä¸­åºéå†è¿­ä»£æ³•çš„è¿™ä¸€é€šæ“ä½œéå¸¸å¥‡å¦™å‘¢ï¼ŸçŸ­çŸ­çš„å‡ è¡Œä»£ç ï¼Œé‡Œé¢ç«Ÿç„¶è—ç€è¿™ä¹ˆå¹¿é˜”çš„ä¹¾å¤ï¼Œç‰›xã€ç‰›xã€‚Â  Â <br/>ä½œä¸ºåˆå­¦è€…ï¼Œå³ä¾¿ç¬¬ä¸€æ¬¡å†™ä¸å‡ºæ¥ä¸Šé¢çš„è§£æ³•ï¼Œä¹Ÿæ²¡ä»€ä¹ˆå¥½ä¸§æ°”çš„â€”â€”å¤§å®¶è°¨è®°ï¼Œå…³äºäºŒå‰æ ‘çš„å…ˆã€ä¸­ã€ååºéå†ï¼Œ<strong>ä½ å¯¹è‡ªå·±çš„è¦æ±‚åº”è¯¥æ˜¯èƒ½å¤Ÿé»˜å†™ï¼Œä¹Ÿå°±æ˜¯è¯´è¦å¯¹ä¸Šé¢è¿™äº›é€»è¾‘å……åˆ†ç†Ÿæ‚‰ã€æ·±åˆ»è®°å¿†</strong>ã€‚Â  Â <br/>åœ¨ç†Ÿæ‚‰å’Œè®°å¿†çš„è¿‡ç¨‹ä¸­ï¼Œä½ ä¼šæ¸æ¸åœ°å¯¹è¿™äº›ä¹ä¸€çœ‹ä¼¼ä¹å¾ˆå·§å¦™çš„æ“ä½œäº§ç”Ÿä¸€ç§â€œè¿™ä¹Ÿå¾ˆè‡ªç„¶å˜›â€çš„æ„Ÿè§‰ï¼Œè¿™ç§æ„Ÿè§‰å°±æ„å‘³ç€ä½ å¯¹è¿™ä¸ªæ€è·¯çš„å……åˆ†å¸æ”¶ã€‚è¿˜æ˜¯é‚£å¥è¯ï¼Œåƒä¸‡ä¸è¦ä»¥ä¸ºç†è§£å°±æ˜¯ç»ˆç‚¹ï¼Œä½ éœ€è¦åšçš„æ˜¯è®°å¿†ï¼è®°å¿†ï¼ç†è§£æ˜¯ä¸€ç§æ„Ÿè§‰ï¼Œè®°å¿†å´èƒ½ä¿è¯ä½ åœ¨åšé¢˜æ—¶ä¸€ç§’é’Ÿæ˜ å°„åˆ°å…·ä½“çš„å¥—è·¯å’Œä»£ç â€”â€”åªæœ‰é è‡ªå·±çš„åŒæ‰‹å†™å‡ºæ¥çš„ä»£ç ï¼Œæ‰æ˜¯æœ€å¯é çš„ä¼™ä¼´ã€‚Â Â <br/> <br/></p>
<p><a name="user-content-6wFlT" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h2 data-id="heading-63">å±‚åºéå†çš„è¡ç”Ÿé—®é¢˜Â  Â Â </h2>
<p>åœ¨ <code>DFS å’Œ BFS</code>Â è¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬å·²ç»è®²è¿‡äº†äºŒå‰æ ‘å±‚åºéå†çš„å®ç°æ–¹æ³•ã€‚å±‚åºéå†æœ¬æœ¬èº«éš¾åº¦ä¸å¤§ï¼Œä½†ä¸€æƒ³åˆ°è¿™æ˜¯ä¸€ä¸ªå…³é”®è€ƒç‚¹ï¼Œå‡ºé¢˜è¿™å¸®äººå°±æ¯å¤©ç»å°½è„‘æ±åœ°æƒ³è¦æŠŠç®€å•çš„é—®é¢˜å¤æ‚åŒ–ã€‚äºæ˜¯ï¼Œå°±æœ‰äº†æˆ‘ä»¬çœ¼ä¸‹è¿™ä¸ªå‘½é¢˜æ–¹å‘â€”â€”å±‚åºéå†çš„è¡ç”Ÿé—®é¢˜ã€‚Â Â <br/>å¯¹äºè¿™ç±»é—®é¢˜ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥ä¼šè®²æœ€æœ‰ä»£è¡¨æ€§çš„ä¸€é“ä½œä¸ºä¾‹é¢˜ã€‚å„ä½åªè¦èƒ½åƒé€è¿™ä¸€é“çš„åŸºæœ¬æ€è·¯ï¼Œå°±èƒ½å¤Ÿè½»æ¾åœ°åœ¨ç±»ä¼¼çš„å˜ä½“ä¸­ä¸¾ä¸€åä¸‰ï¼ˆä¾‹é¢˜è¯·å¤§å®¶å¥½å¥½æŠŠæ¡ï¼Œåœ¨å¤§å‚çœŸé¢˜è®­ç»ƒç¯èŠ‚ï¼Œæˆ‘ä¼šç»™å‡ºä¸€é“å˜ä½“æ¥æ£€éªŒå„ä½çš„å­¦ä¹ æ•ˆæœï¼‰ã€‚Â Â <br/></p>
<blockquote>
<p>é¢˜ç›®æè¿°ï¼šç»™ä½ ä¸€ä¸ªäºŒå‰æ ‘ï¼Œè¯·ä½ è¿”å›å…¶æŒ‰ å±‚åºéå† å¾—åˆ°çš„èŠ‚ç‚¹å€¼ã€‚ ï¼ˆå³é€å±‚åœ°ï¼Œä»å·¦åˆ°å³è®¿é—®æ‰€æœ‰èŠ‚ç‚¹ï¼‰ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹ï¼š
äºŒå‰æ ‘ï¼š[3,9,20,null,null,15,7],</p>
</blockquote>
<pre><code class="hljs">  3
 / \
9  20
  /  \
 15   7
</code></pre>
<blockquote>
<p>è¿”å›å…¶å±‚æ¬¡éå†ç»“æœï¼š<br/>
[<br/>
[3],<br/>
[9,20],<br/>
[15,7]<br/>
]</p>
</blockquote>
<p><a name="user-content-h6Mdu" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-64">æ€è·¯åˆ†æ</h3>
<p>å±‚åºéå†æ²¡æœ‰é‚£ä¹ˆå¤šå¹ºè›¾å­ï¼Œå¤§å®¶çœ‹åˆ°å±‚åºéå†å°±åº”è¯¥æ¡ä»¶åå°„å‡º <code>BFS+é˜Ÿåˆ—</code>Â  è¿™å¯¹å¥½åŸºå‹ã€‚æ‰€è°“å˜ä½“ï¼Œä¸è¿‡æ˜¯åœ¨ <code>BFS</code>Â çš„è¿‡ç¨‹ä¸­å›´ç»•ç»“æœæ•°ç»„çš„å†…å®¹åšæ–‡ç« ã€‚Â  Â <br/>æ‹¿è¿™é“é¢˜æ¥è¯´ï¼Œç›¸å¯¹äºæˆ‘ä»¬ 14 èŠ‚ä¸­è®²è¿‡çš„å±‚åºéå†åŸºæœ¬æ€è·¯ï¼Œå®ƒå˜å‡ºçš„èŠ±æ ·ä»…ä»…åœ¨äºè¦æ±‚æˆ‘ä»¬å¯¹å±‚åºéå†ç»“æœè¿›è¡Œ<strong>åˆ†å±‚</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´åªè¦æˆ‘ä»¬èƒ½åœ¨ <code>BFS</code>Â çš„è¿‡ç¨‹ä¸­æ„ŸçŸ¥åˆ°å½“å‰å±‚çº§ã€åŒæ—¶ç”¨ä¸åŒçš„æ•°ç»„æŠŠä¸åŒçš„å±‚çº§åŒºåˆ†å¼€ï¼Œè¿™é“é¢˜å°±å¾—è§£äº†ã€‚Â  Â <br/><br/>
å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ï¼Ÿå¤§å®¶éœ€è¦çŸ¥é“ä¸€ä¸ªéå¸¸é‡è¦çš„ä¿¡æ¯ï¼šæˆ‘ä»¬åœ¨å¯¹äºŒå‰æ ‘è¿›è¡Œå±‚åºéå†æ—¶ï¼Œæ¯ä¸€æ¬¡ <code>while</code> å¾ªç¯å…¶å®éƒ½å¯¹åº”ç€äºŒå‰æ ‘çš„æŸä¸€å±‚ã€‚åªè¦æˆ‘ä»¬åœ¨è¿›å…¥<code>while</code>å¾ªç¯ä¹‹åˆï¼Œè®°å½•ä¸‹è¿™ä¸€å±‚ç»“ç‚¹ä¸ªæ•°ï¼Œç„¶åå°†è¿™ä¸ªæ•°é‡èŒƒå›´å†…çš„å…ƒç´  <code>push</code> è¿›åŒä¸€ä¸ªæ•°ç»„ï¼Œå°±èƒ½å¤Ÿå®ç°äºŒå‰æ ‘çš„åˆ†å±‚ã€‚</p>
<p><a name="user-content-KEHOh" title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target="/></p>
<h3 data-id="heading-65">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">TreeNode</span>} <span class="hljs-variable">root</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">number[][]</span>}
 */</span>
<span class="hljs-keyword">const</span> levelOrder = <span class="hljs-keyword">function</span>(<span class="hljs-params">root</span>) {
    <span class="hljs-comment">// åˆå§‹åŒ–ç»“æœæ•°ç»„</span>
    <span class="hljs-keyword">const</span> res = []  
    <span class="hljs-comment">// å¤„ç†è¾¹ç•Œæ¡ä»¶</span>
    <span class="hljs-keyword">if</span>(!root) {
        <span class="hljs-keyword">return</span> res
    }  
    <span class="hljs-comment">// åˆå§‹åŒ–é˜Ÿåˆ—</span>
    <span class="hljs-keyword">const</span> queue = []   
    <span class="hljs-comment">// é˜Ÿåˆ—ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æ ¹ç»“ç‚¹</span>
    queue.<span class="hljs-title function_">push</span>(root)  
    <span class="hljs-comment">// å½“é˜Ÿåˆ—ä¸ä¸ºç©ºæ—¶ï¼Œåå¤æ‰§è¡Œä»¥ä¸‹é€»è¾‘</span>
    <span class="hljs-keyword">while</span>(queue.<span class="hljs-property">length</span>) {
        <span class="hljs-comment">// level ç”¨æ¥å­˜å‚¨å½“å‰å±‚çš„ç»“ç‚¹</span>
        <span class="hljs-keyword">const</span> level = []  
        <span class="hljs-comment">// ç¼“å­˜åˆšè¿›å…¥å¾ªç¯æ—¶çš„é˜Ÿåˆ—é•¿åº¦ï¼Œè¿™ä¸€æ­¥å¾ˆå…³é”®ï¼Œå› ä¸ºé˜Ÿåˆ—é•¿åº¦åé¢ä¼šå‘ç”Ÿæ”¹å˜</span>
        <span class="hljs-keyword">const</span> len = queue.<span class="hljs-property">length</span>  
        <span class="hljs-comment">// å¾ªç¯éå†å½“å‰å±‚çº§çš„ç»“ç‚¹</span>
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;len;i++) {
            <span class="hljs-comment">// å–å‡ºé˜Ÿåˆ—çš„å¤´éƒ¨å…ƒç´ </span>
            <span class="hljs-keyword">const</span> top = queue.<span class="hljs-title function_">shift</span>()  
            <span class="hljs-comment">// å°†å¤´éƒ¨å…ƒç´ çš„å€¼æ¨å…¥ level æ•°ç»„</span>
            level.<span class="hljs-title function_">push</span>(top.<span class="hljs-property">val</span>)
            <span class="hljs-comment">// å¦‚æœå½“å‰ç»“ç‚¹æœ‰å·¦å­©å­ï¼Œåˆ™æ¨å…¥ä¸‹ä¸€å±‚çº§</span>
            <span class="hljs-keyword">if</span>(top.<span class="hljs-property">left</span>) {
                queue.<span class="hljs-title function_">push</span>(top.<span class="hljs-property">left</span>)
            }
            <span class="hljs-comment">// å¦‚æœå½“å‰ç»“ç‚¹æœ‰å³å­©å­ï¼Œåˆ™æ¨å…¥ä¸‹ä¸€å±‚çº§</span>
            <span class="hljs-keyword">if</span>(top.<span class="hljs-property">right</span>) {
                queue.<span class="hljs-title function_">push</span>(top.<span class="hljs-property">right</span>)
            }
        }
        <span class="hljs-comment">// å°† level æ¨å…¥ç»“æœæ•°ç»„</span>
        res.<span class="hljs-title function_">push</span>(level)
    }
    <span class="hljs-comment">// è¿”å›ç»“æœæ•°ç»„</span>
    <span class="hljs-keyword">return</span> res
};
</code></pre>
<h2 data-id="heading-66">ç¿»è½¬äºŒå‰æ ‘</h2>
<p>ç¿»è½¬äºŒå‰æ ‘æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„é—®é¢˜ã€‚ä¹‹å‰æœ‰ä¸€ä¸ªå…³äºè¿™é“é¢˜çš„ç¬‘è¯ï¼Œè¯´æ˜¯<code>Homebrew</code>çš„ä½œè€…å»é¢ Googleï¼Œç»“æœå› ä¸ºä¸ä¼šç¿»è½¬äºŒå‰æ ‘è¢«æŒ‚æ‰äº†ã€‚Google åœ¨ç»™è¿™ä½å¤§ä½¬çš„æ‹’ä¿¡ä¸­å†™é“ï¼š</p>
<blockquote>
<p>æˆ‘ä»¬90ï¼…çš„å·¥ç¨‹å¸ˆä½¿ç”¨æ‚¨ç¼–å†™çš„è½¯ä»¶(Homebrew)ï¼Œä½†æ˜¯æ‚¨å´æ— æ³•åœ¨é¢è¯•æ—¶åœ¨ç™½æ¿ä¸Šå†™å‡ºç¿»è½¬äºŒå‰æ ‘è¿™é“é¢˜ï¼Œè¿™å¤ªç³Ÿç³•äº†ã€‚</p>
</blockquote>
<p>è¿™ä¸ªæ•…äº‹ä¹‹æ‰€ä»¥æ˜¯ä¸ªç¬‘è¯ï¼Œæ˜¯å› ä¸ºç¿»è½¬äºŒå‰æ ‘åœ¨ç®—æ³•é¢è¯•ä¸­å®åœ¨å¤ªå¸¸è§äº†â€”â€”åªè¦ä½ å‡†å¤‡ç®—æ³•é¢è¯•ï¼Œä½ å°±ä¸å¾—ä¸åšè¿™ä¸ªé¢˜ã€‚åœ¨é¢è¯•ä¸­åšä¸å‡ºè¿™é“é¢˜çš„åŒå­¦ï¼Œä¼šç»™é¢è¯•å®˜ç•™ä¸‹åŸºç¡€ä¸ç‰¢çš„ç³Ÿç³•å°è±¡ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€èµ·æ¥æå®šè¿™é“ç¿»è½¬äºŒå‰æ ‘ï¼Œæˆä¸ºæ¯”<code>homebrew</code>ä½œè€…æ›´æ‡‚ç®—æ³•é¢è¯•çš„äººï¼ˆé€ƒ</p>
<blockquote>
<p>é¢˜ç›®æè¿°ï¼šç¿»è½¬ä¸€æ£µäºŒå‰æ ‘ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹ï¼š<br/>
è¾“å…¥ï¼š</p>
</blockquote>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">     4
   /   \
  2     7
 / \   / \
1   3 6   9
</span></code></pre>
<blockquote>
<p>è¾“å‡ºï¼š</p>
</blockquote>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">     4
   /   \
  7     2
 / \   / \
9   6 3   1
</span></code></pre>
<h3 data-id="heading-67">æ€è·¯åˆ†æ</h3>
<p>è¿™é“é¢˜æ˜¯ä¸€é“éå¸¸ç»å…¸çš„é€’å½’åº”ç”¨é¢˜ã€‚<br/>
ä¸€æ£µäºŒå‰æ ‘ï¼Œç»è¿‡ç¿»è½¬åä¼šæœ‰ä»€ä¹ˆç‰¹ç‚¹ï¼Ÿç­”æ¡ˆæ˜¯æ¯ä¸€æ£µå­æ ‘çš„å·¦å­©å­å’Œå³å­©å­éƒ½å‘ç”Ÿäº†äº¤æ¢ã€‚æ—¢ç„¶æ˜¯â€œæ¯ä¸€æ£µå­æ ‘â€ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€é‡å¤ï¼Œæ—¢ç„¶æ¶‰åŠäº†é‡å¤ï¼Œå°±æ²¡æœ‰ç†ç”±ä¸ç”¨é€’å½’ã€‚</p>
<p>äºæ˜¯è¿™é“é¢˜è§£é¢˜æ€è·¯å°±éå¸¸æ˜ç¡®äº†ï¼šä»¥é€’å½’çš„æ–¹å¼ï¼Œéå†æ ‘ä¸­çš„æ¯ä¸€ä¸ªç»“ç‚¹ï¼Œå¹¶å°†æ¯ä¸€ä¸ªç»“ç‚¹çš„å·¦å³å­©å­è¿›è¡Œäº¤æ¢ã€‚</p>
<h3 data-id="heading-68">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">TreeNode</span>} <span class="hljs-variable">root</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">TreeNode</span>}
 */</span>
<span class="hljs-keyword">const</span> invertTree = <span class="hljs-keyword">function</span>(<span class="hljs-params">root</span>) {
    <span class="hljs-comment">// å®šä¹‰é€’å½’è¾¹ç•Œ</span>
    <span class="hljs-keyword">if</span>(!root) {
        <span class="hljs-keyword">return</span> root;
    }
    <span class="hljs-comment">// é€’å½’äº¤æ¢å³å­©å­çš„å­ç»“ç‚¹</span>
    <span class="hljs-keyword">let</span> right = <span class="hljs-title function_">invertTree</span>(root.<span class="hljs-property">right</span>);
    <span class="hljs-comment">// é€’å½’äº¤æ¢å·¦å­©å­çš„å­ç»“ç‚¹</span>
    <span class="hljs-keyword">let</span> left = <span class="hljs-title function_">invertTree</span>(root.<span class="hljs-property">left</span>);
    <span class="hljs-comment">// äº¤æ¢å½“å‰éå†åˆ°çš„ä¸¤ä¸ªå·¦å³å­©å­ç»“ç‚¹</span>
    root.<span class="hljs-property">left</span> = right;
    root.<span class="hljs-property">right</span> = left;
    <span class="hljs-keyword">return</span> root;
};
</code></pre>
<p>ï¼ˆé˜…è¯»è¿‡ç¨‹ä¸­æœ‰ä»»ä½•æƒ³æ³•æˆ–ç–‘é—®ï¼Œæˆ–è€…å•çº¯å¸Œæœ›å’Œç¬”è€…äº¤ä¸ªæœ‹å‹å•¥çš„ï¼Œæ¬¢è¿å¤§å®¶æ·»åŠ æˆ‘çš„å¾®ä¿¡xyalinodeä¸æˆ‘äº¤æµå“ˆ~ï¼‰
äºŒå‰æœç´¢æ ‘ï¼ˆBinary Search Treeï¼‰ç®€ç§° BSTï¼Œæ˜¯äºŒå‰æ ‘çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ã€‚å®ƒæœ‰å¾ˆå¤šåˆ«åï¼Œæ¯”å¦‚æ’åºäºŒå‰æ ‘ã€äºŒå‰æŸ¥æ‰¾æ ‘ç­‰ç­‰ã€‚</p>
<p>è™½ç„¶äºŒå‰æœç´¢æ ‘å¤šå¹´æ¥ä¸€ç›´ä½œä¸ºç®—æ³•é¢è¯•çš„â€œå¿…è¦è€ƒç‚¹â€å­˜åœ¨ï¼Œä½†åœ¨å®é™…é¢è¯•ä¸­ï¼Œå®ƒçš„è€ƒå¯Ÿé¢‘ç‡å¹¶ä¸èƒ½å’Œå¸¸è§„äºŒå‰æ ‘ç›¸æå¹¶è®ºï¼Œç®—ä¸ä¸Šâ€œå¤§çƒ­â€çš„è€ƒç‚¹ï¼ŒåŒæ—¶è€ƒå¯Ÿå†…å®¹ä¹Ÿæ˜¯ç›¸å¯¹æ¯”è¾ƒç¨³å®šçš„ã€‚å¯¹äºäºŒå‰æœç´¢æ ‘ï¼Œæˆ‘ä»¬åªè¦èƒ½å¤ŸæŠŠæ¡å¥½å®ƒçš„é™åˆ¶æ¡ä»¶å’Œç‰¹æ€§ï¼Œå°±è¶³ä»¥åº”å¯¹å¤§éƒ¨åˆ†çš„è€ƒé¢˜ã€‚</p>
<h2 data-id="heading-69">ä»€ä¹ˆæ˜¯äºŒå‰æœç´¢æ ‘</h2>
<p>æ ‘çš„å®šä¹‰æ€»æ˜¯ä»¥é€’å½’çš„å½¢å¼å‡ºç°ï¼ŒäºŒå‰æœç´¢æ ‘ä¹Ÿä¸ä¾‹å¤–ï¼Œå®ƒçš„é€’å½’å®šä¹‰å¦‚ä¸‹ï¼š</p>
<ol>
<li>æ˜¯ä¸€æ£µç©ºæ ‘</li>
<li>æ˜¯ä¸€æ£µç”±æ ¹ç»“ç‚¹ã€å·¦å­æ ‘ã€å³å­æ ‘ç»„æˆçš„æ ‘ï¼ŒåŒæ—¶å·¦å­æ ‘å’Œå³å­æ ‘éƒ½æ˜¯äºŒå‰æœç´¢æ ‘ï¼Œä¸”<strong>å·¦å­æ ‘</strong>ä¸Šæ‰€æœ‰ç»“ç‚¹çš„æ•°æ®åŸŸéƒ½<strong>å°äºç­‰äº</strong>æ ¹ç»“ç‚¹çš„æ•°æ®åŸŸï¼Œ<strong>å³å­æ ‘</strong>ä¸Šæ‰€æœ‰ç»“ç‚¹çš„æ•°æ®åŸŸéƒ½<strong>å¤§äºç­‰äº</strong>æ ¹ç»“ç‚¹çš„æ•°æ®åŸŸ</li>
</ol>
<p>æ»¡è¶³ä»¥ä¸Šä¸¤ä¸ªæ¡ä»¶ä¹‹ä¸€çš„äºŒå‰æ ‘ï¼Œå°±æ˜¯äºŒå‰æœç´¢æ ‘ã€‚</p>
<p>ä»è¿™ä¸ªå®šä¹‰æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒäºŒå‰æœç´¢æ ‘å¼ºè°ƒçš„æ˜¯<strong>æ•°æ®åŸŸçš„æœ‰åºæ€§</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒäºŒå‰æœç´¢æ ‘ä¸Šçš„æ¯ä¸€æ£µå­æ ‘ï¼Œéƒ½åº”è¯¥æ»¡è¶³ <code>å·¦å­©å­ &lt;= æ ¹ç»“ç‚¹ &lt;= å³å­©å­</code> è¿™æ ·çš„å¤§å°å…³ç³»ã€‚ä¸‹å›¾æˆ‘ç»™å‡ºäº†å‡ ä¸ªäºŒå‰æœç´¢æ ‘çš„ç¤ºä¾‹ï¼š</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/81507c52878942b08f5f5a781ee8944c~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1944&amp;h=748&amp;s=89014&amp;e=jpg&amp;b=ffffff" alt="" loading="lazy"/>
ä»¥ç¬¬ä¸‰æ£µæ ‘ä¸ºä¾‹ï¼Œæ ¹ç»“ç‚¹çš„æ•°æ®åŸŸä¸º6ï¼Œå®ƒçš„å·¦å­æ ‘çš„æ‰€æœ‰ç»“ç‚¹éƒ½å°äºç­‰äº6ã€å³å­æ ‘çš„æ‰€æœ‰ç»“ç‚¹éƒ½å¤§äºç­‰äº6ã€‚åŒæ—¶åœ¨ä»»æ„å­æ ‘çš„å†…éƒ¨ï¼Œä¹Ÿæ»¡è¶³è¿™ä¸ªæ¡ä»¶â€”â€”æ¯”å¦‚å·¦å­æ ‘ä¸­ï¼Œæ ¹ç»“ç‚¹å€¼ä¸º3ï¼Œæ ¹ç»“ç‚¹å¯¹åº”å·¦å­æ ‘çš„æ‰€æœ‰ç»“ç‚¹éƒ½å°äºç­‰äº3ã€å³å­æ ‘çš„æ‰€æœ‰ç»“ç‚¹éƒ½å¤§äºç­‰äº3ã€‚</p>
<h2 data-id="heading-70">äºŒå‰æœç´¢æ ‘ï¼šç¼–ç åŸºæœ¬åŠŸ</h2>
<p>å…³äºäºŒå‰æœç´¢æ ‘ï¼Œå¤§å®¶éœ€è¦æŒæ¡ä»¥ä¸‹é«˜é¢‘æ“ä½œï¼š</p>
<ol>
<li>æŸ¥æ‰¾æ•°æ®åŸŸä¸ºæŸä¸€ç‰¹å®šå€¼çš„ç»“ç‚¹</li>
<li>æ’å…¥æ–°ç»“ç‚¹</li>
<li>åˆ é™¤æŒ‡å®šç»“ç‚¹</li>
</ol>
<h3 data-id="heading-71">æŸ¥æ‰¾æ•°æ®åŸŸä¸ºæŸä¸€ç‰¹å®šå€¼çš„ç»“ç‚¹</h3>
<p>å‡è®¾è¿™ä¸ªç›®æ ‡ç»“ç‚¹çš„æ•°æ®åŸŸå€¼ä¸º <code>n</code>ï¼Œæˆ‘ä»¬å€ŸåŠ©äºŒå‰æœç´¢æ ‘æ•°æ®åŸŸçš„æœ‰åºæ€§ï¼Œå¯ä»¥æœ‰ä»¥ä¸‹æŸ¥æ‰¾æ€è·¯ï¼š</p>
<ol>
<li>é€’å½’éå†äºŒå‰æ ‘ï¼Œè‹¥å½“å‰éå†åˆ°çš„ç»“ç‚¹ä¸ºç©ºï¼Œå°±æ„å‘³ç€æ²¡æ‰¾åˆ°ç›®æ ‡ç»“ç‚¹ï¼Œç›´æ¥è¿”å›ã€‚</li>
<li>è‹¥å½“å‰éå†åˆ°çš„ç»“ç‚¹å¯¹åº”çš„æ•°æ®åŸŸå€¼åˆšå¥½ç­‰äº<code>n</code>ï¼Œåˆ™æŸ¥æ‰¾æˆåŠŸï¼Œè¿”å›ã€‚</li>
<li>è‹¥å½“å‰éå†åˆ°çš„ç»“ç‚¹å¯¹åº”çš„æ•°æ®åŸŸå€¼å¤§äºç›®æ ‡å€¼<code>n</code>ï¼Œåˆ™åº”è¯¥åœ¨å·¦å­æ ‘é‡Œè¿›ä¸€æ­¥æŸ¥æ‰¾ï¼Œè®¾ç½®ä¸‹ä¸€æ­¥çš„éå†èŒƒå›´ä¸º <code>root.left</code> åï¼Œç»§ç»­é€’å½’ã€‚</li>
<li>è‹¥å½“å‰éå†åˆ°çš„ç»“ç‚¹å¯¹åº”çš„æ•°æ®åŸŸå€¼å°äºç›®æ ‡å€¼<code>n</code>ï¼Œåˆ™åº”è¯¥åœ¨å³å­æ ‘é‡Œè¿›ä¸€æ­¥æŸ¥æ‰¾ï¼Œè®¾ç½®ä¸‹ä¸€æ­¥çš„éå†èŒƒå›´ä¸º <code>root.right</code> åï¼Œç»§ç»­é€’å½’ã€‚</li>
</ol>
<h4 data-id="heading-72">ç¼–ç å®ç°</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">search</span>(<span class="hljs-params">root, n</span>) {
    <span class="hljs-comment">// è‹¥ root ä¸ºç©ºï¼ŒæŸ¥æ‰¾å¤±è´¥ï¼Œç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">if</span>(!root) {
        <span class="hljs-keyword">return</span> 
    }
    <span class="hljs-comment">// æ‰¾åˆ°ç›®æ ‡ç»“ç‚¹ï¼Œè¾“å‡ºç»“ç‚¹å¯¹è±¡</span>
    <span class="hljs-keyword">if</span>(root.<span class="hljs-property">val</span> === n) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ç›®æ ‡ç»“ç‚¹æ˜¯ï¼š'</span>, root)
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(root.<span class="hljs-property">val</span> &gt; n) {
        <span class="hljs-comment">// å½“å‰ç»“ç‚¹æ•°æ®åŸŸå¤§äºnï¼Œå‘å·¦æŸ¥æ‰¾</span>
        <span class="hljs-title function_">search</span>(root.<span class="hljs-property">left</span>, n)
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å½“å‰ç»“ç‚¹æ•°æ®åŸŸå°äºnï¼Œå‘å³æŸ¥æ‰¾</span>
        <span class="hljs-title function_">search</span>(root.<span class="hljs-property">right</span>, n)
    }
}
</code></pre>
<h3 data-id="heading-73">æ’å…¥æ–°ç»“ç‚¹</h3>
<p>æ’å…¥ç»“ç‚¹çš„æ€è·¯å…¶å®å’Œå¯»æ‰¾ç»“ç‚¹éå¸¸ç›¸ä¼¼ã€‚å¤§å®¶åæ€ä¸€ä¸‹ï¼Œåœ¨ä¸Šé¢å¯»æ‰¾ç»“ç‚¹çš„æ—¶å€™ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ä¼šåœ¨åˆ¤å®šå½“å‰ç»“ç‚¹ä¸ºç©ºæ—¶ï¼Œå°±è®¤ä¸ºæŸ¥æ‰¾å¤±è´¥äº†å‘¢ï¼Ÿ<br/>
è¿™æ˜¯å› ä¸ºï¼ŒäºŒå‰æœç´¢æ ‘çš„æŸ¥æ‰¾è·¯çº¿æ˜¯ä¸€ä¸ªéå¸¸<strong>æ˜ç¡®</strong>çš„è·¯å¾„ï¼šæˆ‘ä»¬ä¼šæ ¹æ®å½“å‰ç»“ç‚¹å€¼çš„å¤§å°ï¼Œå†³å®šè·¯çº¿åº”è¯¥æ˜¯å‘å·¦èµ°è¿˜æ˜¯å‘å³èµ°ã€‚å¦‚æœæœ€åèµ°åˆ°äº†ä¸€ä¸ªç©ºç»“ç‚¹å¤„ï¼Œè¿™å°±æ„å‘³ç€æˆ‘ä»¬æ²¡æœ‰åŠæ³•å†å¾€æ·±å¤„å»æœç´¢äº†ï¼Œä¹Ÿå°±æ²¡æœ‰äº†æ‰¾åˆ°ç›®æ ‡ç»“ç‚¹çš„å¯èƒ½æ€§ã€‚</p>
<p>æ¢ä¸€ä¸ªè§’åº¦æƒ³æƒ³ï¼Œå¦‚æœè¿™ä¸ªç©ºç»“ç‚¹æ‰€åœ¨çš„ä½ç½®æ°å¥½æœ‰ä¸€ä¸ªå€¼ä¸º <code>n</code> çš„ç»“ç‚¹ï¼Œæ˜¯ä¸æ˜¯å°±å¯ä»¥æŸ¥æ‰¾æˆåŠŸäº†ï¼Ÿé‚£ä¹ˆå¦‚æœæˆ‘æŠŠ <code>n</code> å€¼å¡åˆ°è¿™ä¸ªç©ºç»“ç‚¹æ‰€åœ¨çš„ä½ç½®ï¼Œæ˜¯ä¸æ˜¯åˆšå¥½ç¬¦åˆäºŒå‰æœç´¢æ ‘çš„æ’åºè§„åˆ™ï¼Ÿ</p>
<p>å®ä¸ç›¸ç’ï¼ŒäºŒå‰æœç´¢æ ‘æ’å…¥ç»“ç‚¹çš„è¿‡ç¨‹ï¼Œå’Œæœç´¢æŸä¸ªç»“ç‚¹çš„è¿‡ç¨‹å‡ ä¹æ˜¯ä¸€æ ·çš„ï¼šä»æ ¹ç»“ç‚¹å¼€å§‹ï¼ŒæŠŠæˆ‘ä»¬å¸Œæœ›æ’å…¥çš„æ•°æ®å€¼å’Œæ¯ä¸€ä¸ªç»“ç‚¹ä½œæ¯”è¾ƒã€‚è‹¥å¤§äºå½“å‰ç»“ç‚¹ï¼Œåˆ™å‘å³å­æ ‘æ¢ç´¢ï¼›è‹¥å°äºå½“å‰ç»“ç‚¹ï¼Œåˆ™å‘å·¦å­æ ‘æ¢ç´¢ã€‚æœ€åæ‰¾åˆ°çš„é‚£ä¸ªç©ºä½ï¼Œå°±æ˜¯å®ƒåˆç†çš„æ –èº«ä¹‹æ‰€ã€‚</p>
<h4 data-id="heading-74">ç¼–ç å®ç°</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">insertIntoBST</span>(<span class="hljs-params">root, n</span>) {
    <span class="hljs-comment">// è‹¥ root ä¸ºç©ºï¼Œè¯´æ˜å½“å‰æ˜¯ä¸€ä¸ªå¯ä»¥æ’å…¥çš„ç©ºä½</span>
    <span class="hljs-keyword">if</span>(!root) { 
        <span class="hljs-comment">// ç”¨ä¸€ä¸ªå€¼ä¸ºnçš„ç»“ç‚¹å æ®è¿™ä¸ªç©ºä½</span>
        root = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeNode</span>(n)
        <span class="hljs-keyword">return</span> root
    }
    
    <span class="hljs-keyword">if</span>(root.<span class="hljs-property">val</span> &gt; n) {
        <span class="hljs-comment">// å½“å‰ç»“ç‚¹æ•°æ®åŸŸå¤§äºnï¼Œå‘å·¦æŸ¥æ‰¾</span>
        root.<span class="hljs-property">left</span> = <span class="hljs-title function_">insertIntoBST</span>(root.<span class="hljs-property">left</span>, n)
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å½“å‰ç»“ç‚¹æ•°æ®åŸŸå°äºnï¼Œå‘å³æŸ¥æ‰¾</span>
        root.<span class="hljs-property">right</span> = <span class="hljs-title function_">insertIntoBST</span>(root.<span class="hljs-property">right</span>, n)
    }

    <span class="hljs-comment">// è¿”å›æ’å…¥åäºŒå‰æœç´¢æ ‘çš„æ ¹ç»“ç‚¹</span>
    <span class="hljs-keyword">return</span> root
}
</code></pre>
<p>æ³¨ï¼šä½ å¯ä»¥ç”¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode-cn.com%2Fproblems%2Finsert-into-a-binary-search-tree%2F" target="_blank" title="https://leetcode-cn.com/problems/insert-into-a-binary-search-tree/" ref="nofollow noopener noreferrer">è¿™é“åŠ›æ‰£çœŸé¢˜</a>  æ¥éªŒè¯ä»¥ä¸Šæ’å…¥æ“ä½œçš„æ­£ç¡®æ€§ã€‚</p>
<h3 data-id="heading-75">åˆ é™¤æŒ‡å®šç»“ç‚¹</h3>
<p>æƒ³è¦åˆ é™¤æŸä¸ªç»“ç‚¹ï¼Œé¦–å…ˆè¦æ‰¾åˆ°è¿™ä¸ªç»“ç‚¹ã€‚åœ¨å®šä½ç»“ç‚¹åï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼š</p>
<ol>
<li>ç»“ç‚¹ä¸å­˜åœ¨ï¼Œå®šä½åˆ°äº†ç©ºç»“ç‚¹ã€‚ç›´æ¥è¿”å›å³å¯ã€‚</li>
<li>éœ€è¦åˆ é™¤çš„ç›®æ ‡ç»“ç‚¹æ²¡æœ‰å·¦å­©å­ä¹Ÿæ²¡æœ‰å³å­©å­â€”â€”å®ƒæ˜¯ä¸€ä¸ªå¶å­ç»“ç‚¹ï¼Œåˆ æ‰å®ƒä¸ä¼šå¯¹å…¶å®ƒç»“ç‚¹é€ æˆä»»ä½•å½±å“ï¼Œç›´æ¥åˆ é™¤å³å¯ã€‚</li>
<li>éœ€è¦åˆ é™¤çš„ç›®æ ‡ç»“ç‚¹å­˜åœ¨å·¦å­æ ‘ï¼Œé‚£ä¹ˆå°±å»å·¦å­æ ‘é‡Œå¯»æ‰¾å°äºç›®æ ‡ç»“ç‚¹å€¼çš„æœ€å¤§ç»“ç‚¹ï¼Œç”¨è¿™ä¸ªç»“ç‚¹è¦†ç›–æ‰ç›®æ ‡ç»“ç‚¹</li>
<li>éœ€è¦åˆ é™¤çš„ç›®æ ‡ç»“ç‚¹å­˜åœ¨å³å­æ ‘ï¼Œé‚£ä¹ˆå°±å»å³å­æ ‘é‡Œå¯»æ‰¾å¤§äºç›®æ ‡ç»“ç‚¹å€¼çš„æœ€å°ç»“ç‚¹ï¼Œç”¨è¿™ä¸ªç»“ç‚¹è¦†ç›–æ‰ç›®æ ‡ç»“ç‚¹</li>
<li>éœ€è¦åˆ é™¤çš„ç›®æ ‡ç»“ç‚¹æ—¢æœ‰å·¦å­æ ‘ã€åˆæœ‰å³å­æ ‘ï¼Œè¿™æ—¶å°±æœ‰ä¸¤ç§åšæ³•äº†ï¼šè¦ä¹ˆå–å·¦å­æ ‘ä¸­å€¼æœ€å¤§çš„ç»“ç‚¹ï¼Œè¦ä¹ˆå–å³å­æ ‘ä¸­å–å€¼æœ€å°çš„ç»“ç‚¹ã€‚ä¸¤ä¸ªç»“ç‚¹ä¸­ä»»å–ä¸€ä¸ªè¦†ç›–æ‰ç›®æ ‡ç»“ç‚¹ï¼Œéƒ½å¯ä»¥ç»´æŒäºŒå‰æœç´¢æ ‘çš„æ•°æ®æœ‰åºæ€§</li>
</ol>
<h4 data-id="heading-76">ç¼–ç å®ç°</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">deleteNode</span>(<span class="hljs-params">root, n</span>) {
    <span class="hljs-comment">// å¦‚æœæ²¡æ‰¾åˆ°ç›®æ ‡ç»“ç‚¹ï¼Œåˆ™ç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">if</span>(!root) {
        <span class="hljs-keyword">return</span> root
    }
    <span class="hljs-comment">// å®šä½åˆ°ç›®æ ‡ç»“ç‚¹ï¼Œå¼€å§‹åˆ†æƒ…å†µå¤„ç†åˆ é™¤åŠ¨ä½œ</span>
    <span class="hljs-keyword">if</span>(root.<span class="hljs-property">val</span> === n) {
        <span class="hljs-comment">// è‹¥æ˜¯å¶å­ç»“ç‚¹ï¼Œåˆ™ä¸éœ€è¦æƒ³å¤ªå¤šï¼Œç›´æ¥åˆ é™¤</span>
        <span class="hljs-keyword">if</span>(!root.<span class="hljs-property">left</span> &amp;&amp; !root.<span class="hljs-property">right</span>) {
            root = <span class="hljs-literal">null</span>
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(root.<span class="hljs-property">left</span>) {
            <span class="hljs-comment">// å¯»æ‰¾å·¦å­æ ‘é‡Œå€¼æœ€å¤§çš„ç»“ç‚¹</span>
            <span class="hljs-keyword">const</span> maxLeft = <span class="hljs-title function_">findMax</span>(root.<span class="hljs-property">left</span>)
            <span class="hljs-comment">// ç”¨è¿™ä¸ª maxLeft è¦†ç›–æ‰éœ€è¦åˆ é™¤çš„å½“å‰ç»“ç‚¹  </span>
            root.<span class="hljs-property">val</span> = maxLeft.<span class="hljs-property">val</span>
            <span class="hljs-comment">// è¦†ç›–åŠ¨ä½œä¼šæ¶ˆè€—æ‰åŸæœ‰çš„ maxLeft ç»“ç‚¹</span>
            root.<span class="hljs-property">left</span> = <span class="hljs-title function_">deleteNode</span>(root.<span class="hljs-property">left</span>, maxLeft.<span class="hljs-property">val</span>)
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å¯»æ‰¾å³å­æ ‘é‡Œå€¼æœ€å°çš„ç»“ç‚¹</span>
            <span class="hljs-keyword">const</span> minRight = <span class="hljs-title function_">findMin</span>(root.<span class="hljs-property">right</span>)
            <span class="hljs-comment">// ç”¨è¿™ä¸ª minRight è¦†ç›–æ‰éœ€è¦åˆ é™¤çš„å½“å‰ç»“ç‚¹  </span>
            root.<span class="hljs-property">val</span> = minRight.<span class="hljs-property">val</span>
            <span class="hljs-comment">// è¦†ç›–åŠ¨ä½œä¼šæ¶ˆè€—æ‰åŸæœ‰çš„ minRight ç»“ç‚¹</span>
            root.<span class="hljs-property">right</span> = <span class="hljs-title function_">deleteNode</span>(root.<span class="hljs-property">right</span>, minRight.<span class="hljs-property">val</span>)
        }
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(root.<span class="hljs-property">val</span> &gt; n) {
        <span class="hljs-comment">// è‹¥å½“å‰ç»“ç‚¹çš„å€¼æ¯” n å¤§ï¼Œåˆ™åœ¨å·¦å­æ ‘ä¸­ç»§ç»­å¯»æ‰¾ç›®æ ‡ç»“ç‚¹</span>
        root.<span class="hljs-property">left</span> = <span class="hljs-title function_">deleteNode</span>(root.<span class="hljs-property">left</span>, n)
    } <span class="hljs-keyword">else</span>  {
        <span class="hljs-comment">// è‹¥å½“å‰ç»“ç‚¹çš„å€¼æ¯” n å°ï¼Œåˆ™åœ¨å³å­æ ‘ä¸­ç»§ç»­å¯»æ‰¾ç›®æ ‡ç»“ç‚¹</span>
        root.<span class="hljs-property">right</span> = <span class="hljs-title function_">deleteNode</span>(root.<span class="hljs-property">right</span>, n)
    }
    <span class="hljs-keyword">return</span> root
}

<span class="hljs-comment">// å¯»æ‰¾å·¦å­æ ‘æœ€å¤§å€¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">findMax</span>(<span class="hljs-params">root</span>) {
    <span class="hljs-keyword">while</span>(root.<span class="hljs-property">right</span>) {
        root = root.<span class="hljs-property">right</span>
    }
    <span class="hljs-keyword">return</span> root 
}

<span class="hljs-comment">// å¯»æ‰¾å³å­æ ‘çš„æœ€å°å€¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">findMin</span>(<span class="hljs-params">root</span>) {
    <span class="hljs-keyword">while</span>(root.<span class="hljs-property">left</span>) {
        root = root.<span class="hljs-property">left</span>
    }
    <span class="hljs-keyword">return</span> root
}
</code></pre>
<p>ä½ å¯ä»¥åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode-cn.com%2Fproblems%2Fdelete-node-in-a-bst%2Fsubmissions%2F" target="_blank" title="https://leetcode-cn.com/problems/delete-node-in-a-bst/submissions/" ref="nofollow noopener noreferrer">è¿™é“åŠ›æ‰£çœŸé¢˜</a>ä¸­éªŒè¯ä»¥ä¸Šåˆ é™¤æ“ä½œä»£ç çš„æ­£ç¡®æ€§ã€‚</p>
<h4 data-id="heading-77">ç¼–ç å¤ç›˜</h4>
<p>ä¸Šé¢è¿™æ®µä»£ç å±•ç¤ºäº†äºŒå‰æœç´¢æ ‘åˆ é™¤çš„åŸºæœ¬æ€è·¯ï¼šåœ¨è¿™ä¸ªæ€è·¯çš„åŸºç¡€ä¸Šï¼Œå¤§å®¶å¯ä»¥åšå¾ˆå¤šä¸ªæ€§åŒ–çš„ä¿®æ”¹ã€‚<br/>
ä¸¾ä¸ªä¾‹å­ï¼Œç»†å¿ƒçš„åŒå­¦ä¼šå‘ç°ï¼Œå¦‚æœç›®æ ‡ç»“ç‚¹æ—¢æœ‰å·¦å­æ ‘åˆæœ‰å³å­æ ‘ï¼Œé‚£ä¹ˆåœ¨ä¸Šé¢è¿™æ®µé€»è¾‘é‡Œï¼Œä¼šä¼˜å…ˆå»æ‰¾å®ƒå·¦å­æ ‘é‡Œçš„æœ€å¤§å€¼ï¼Œè€Œä¸ä¼šå» care å³å­æ ‘çš„æœ€å°å€¼è¿™ä¸ªé€‰é¡¹ã€‚<br/>
è¿™æ ·åšï¼Œå¾—åˆ°çš„ç»“æœä»æ­£ç¡®æ€§ä¸Šæ¥è¯´æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯å´ä¸å¤ªç¾è§‚ï¼šæ¯æ¬¡éƒ½åˆ é™¤ä¸€ä¾§å­æ ‘çš„ç»“ç‚¹ï¼Œä¼šå¯¼è‡´äºŒå‰æ ‘çš„å·¦å³å­æ ‘é«˜åº¦ä¸å¹³è¡¡ã€‚<br/>
å¦‚æœé¢˜ç›®ä¸­è¦æ±‚æˆ‘ä»¬é¡¾åŠäºŒå‰æ ‘çš„å¹³è¡¡åº¦ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥åœ¨åˆ é™¤çš„è¿‡ç¨‹ä¸­è®°å½•å­æ ‘çš„é«˜åº¦ï¼Œæ¯æ¬¡é€‰æ‹©é«˜åº¦è¾ƒé«˜çš„å­æ ‘ä½œä¸ºæŸ¥æ‰¾ç›®æ ‡ï¼Œç”¨è¿™ä¸ªå­æ ‘é‡Œçš„ç»“ç‚¹å»è¦†ç›–éœ€è¦åˆ é™¤çš„ç›®æ ‡ç»“ç‚¹ã€‚<br/>
ï¼ˆå…³äºäºŒå‰æ ‘å¹³è¡¡åº¦çš„çŸ¥è¯†ï¼Œæˆ‘ä»¬ä¼šåœ¨ä¸‹ä¸€èŠ‚ä½œè®²è§£ï¼Œå¤§å®¶ç¨å®‰å‹¿èºï¼‰</p>
<h2 data-id="heading-78">äºŒå‰æœç´¢æ ‘çš„ç‰¹æ€§</h2>
<p>å…³äºäºŒå‰æœç´¢æ ‘çš„ç‰¹æ€§ï¼Œæœ‰ä¸”ä»…æœ‰ä¸€æ¡æ˜¯éœ€è¦å¤§å®¶èƒŒè¯µé»˜å†™çš„ï¼š<br/>
<strong>äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†åºåˆ—æ˜¯æœ‰åºçš„</strong>ï¼</p>
<p>OKï¼ŒåŸºæœ¬åŠŸå°±ä¿®ç‚¼åˆ°è¿™é‡Œï¼Œä¸‹é¢å¤§å®¶ä¸€èµ·æ¥å¼€å¼€å¿ƒå¿ƒåœ°ç¢¾ç¢çœŸé¢˜å§ï¼</p>
<h2 data-id="heading-79">çœŸé¢˜å®æˆ˜ç¯èŠ‚</h2>
<p>å¼€ç¯‡æˆ‘ä»¬è¯´è¿‡ï¼Œæˆ‘ä»¬åªè¦èƒ½å¤ŸæŠŠæ¡å¥½äºŒå‰æœç´¢æ ‘çš„é™åˆ¶æ¡ä»¶ï¼ˆå³å®šä¹‰ï¼‰å’Œç‰¹æ€§ï¼Œå°±è¶³ä»¥åº”å¯¹å¤§éƒ¨åˆ†çš„è€ƒé¢˜ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹å®šä¹‰å’Œç‰¹æ€§çš„è€ƒå¯Ÿæ˜¯å¦‚ä½•åœ¨çœŸé¢˜ä¸­ä½“ç°çš„ï¼š</p>
<h3 data-id="heading-80">å¯¹å®šä¹‰çš„è€ƒå¯Ÿï¼šäºŒå‰æœç´¢æ ‘çš„éªŒè¯</h3>
<blockquote>
<p>é¢˜ç›®æè¿°ï¼šç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„äºŒå‰æœç´¢æ ‘ã€‚<br/>
å‡è®¾ä¸€ä¸ªäºŒå‰æœç´¢æ ‘å…·æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š<br/>
èŠ‚ç‚¹çš„å·¦å­æ ‘åªåŒ…å«å°äºå½“å‰èŠ‚ç‚¹çš„æ•°ã€‚<br/>
èŠ‚ç‚¹çš„å³å­æ ‘åªåŒ…å«å¤§äºå½“å‰èŠ‚ç‚¹çš„æ•°ã€‚<br/>
æ‰€æœ‰å·¦å­æ ‘å’Œå³å­æ ‘è‡ªèº«å¿…é¡»ä¹Ÿæ˜¯äºŒå‰æœç´¢æ ‘ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹Â 1:<br/>
è¾“å…¥:</p>
</blockquote>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">    2
   / \
  1   3
</span></code></pre>
<blockquote>
<p>è¾“å‡º: true</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹Â 2:<br/>
è¾“å…¥:</p>
</blockquote>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">    5
   / \
  1   4
Â     / \
Â    3   6
</span></code></pre>
<blockquote>
<p>è¾“å‡º: false<br/>
è§£é‡Š: è¾“å…¥ä¸º: [5,1,4,null,null,3,6]ã€‚<br/>
æ ¹èŠ‚ç‚¹çš„å€¼ä¸º 5 ï¼Œä½†æ˜¯å…¶å³å­èŠ‚ç‚¹å€¼ä¸º 4 ã€‚</p>
</blockquote>
<h4 data-id="heading-81">æ€è·¯åˆ†æ</h4>
<p>å¯¹äºè¿™é“é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å¥½å¥½å’€åš¼ä¸€ä¸‹äºŒå‰æœç´¢æ ‘çš„å®šä¹‰ï¼š</p>
<ol>
<li>å®ƒå¯ä»¥æ˜¯ä¸€æ£µç©ºæ ‘</li>
<li>å®ƒå¯ä»¥æ˜¯ä¸€æ£µç”±æ ¹ç»“ç‚¹ã€å·¦å­æ ‘ã€å³å­æ ‘ç»„æˆçš„æ ‘ï¼ŒåŒæ—¶å·¦å­æ ‘å’Œå³å­æ ‘éƒ½æ˜¯äºŒå‰æœç´¢æ ‘ï¼Œä¸”<strong>å·¦å­æ ‘</strong>ä¸Šæ‰€æœ‰ç»“ç‚¹çš„æ•°æ®åŸŸéƒ½<strong>å°äºç­‰äº</strong>æ ¹ç»“ç‚¹çš„æ•°æ®åŸŸï¼Œ<strong>å³å­æ ‘</strong>ä¸Šæ‰€æœ‰ç»“ç‚¹çš„æ•°æ®åŸŸéƒ½<strong>å¤§äºç­‰äº</strong>æ ¹ç»“ç‚¹çš„æ•°æ®åŸŸ</li>
</ol>
<p>åªæœ‰ç¬¦åˆä»¥ä¸Šä¸¤ç§æƒ…å†µä¹‹ä¸€çš„äºŒå‰æ ‘ï¼Œå¯ä»¥ç§°ä¹‹ä¸ºäºŒå‰æœç´¢æ ‘ã€‚<br/>
ç©ºæ ‘çš„åˆ¤å®šæ¯”è¾ƒç®€å•ï¼Œå…³é”®åœ¨äºéç©ºæ ‘çš„åˆ¤å®šï¼šéœ€è¦é€’å½’åœ°å¯¹éç©ºæ ‘ä¸­çš„å·¦å³å­æ ‘è¿›è¡Œéå†ï¼Œæ£€éªŒæ¯æ£µå­æ ‘ä¸­æ˜¯å¦éƒ½æ»¡è¶³ <code>å·¦ &lt; æ ¹ &lt; å³</code> è¿™æ ·çš„å…³ç³»ï¼ˆæ³¨æ„é¢˜ä¸­å£°æ˜äº†ä¸éœ€è¦è€ƒè™‘ç›¸ç­‰æƒ…å†µï¼‰ã€‚<br/>
åŸºäºè¿™æ ·çš„æ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–ç å¦‚ä¸‹ï¼š</p>
<h4 data-id="heading-82">ç¼–ç å®ç°</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">TreeNode</span>} <span class="hljs-variable">root</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">boolean</span>}
 */</span>
<span class="hljs-keyword">const</span> isValidBST = <span class="hljs-keyword">function</span>(<span class="hljs-params">root</span>) {
  <span class="hljs-comment">// å®šä¹‰é€’å½’å‡½æ•°</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">root, minValue, maxValue</span>) {
      <span class="hljs-comment">// è‹¥æ˜¯ç©ºæ ‘ï¼Œåˆ™åˆæ³•</span>
      <span class="hljs-keyword">if</span>(!root) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
      }
      <span class="hljs-comment">// è‹¥å³å­©å­ä¸å¤§äºæ ¹ç»“ç‚¹å€¼ï¼Œæˆ–è€…å·¦å­©å­ä¸å°äºæ ¹ç»“ç‚¹å€¼ï¼Œåˆ™ä¸åˆæ³•</span>
      <span class="hljs-keyword">if</span>(root.<span class="hljs-property">val</span> &lt;= minValue || root.<span class="hljs-property">val</span> &gt;= maxValue) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
      <span class="hljs-comment">// å·¦å³å­æ ‘å¿…é¡»éƒ½ç¬¦åˆäºŒå‰æœç´¢æ ‘çš„æ•°æ®åŸŸå¤§å°å…³ç³»</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">dfs</span>(root.<span class="hljs-property">left</span>, minValue,root.<span class="hljs-property">val</span>) &amp;&amp; <span class="hljs-title function_">dfs</span>(root.<span class="hljs-property">right</span>, root.<span class="hljs-property">val</span>, maxValue)
  }
  <span class="hljs-comment">// åˆå§‹åŒ–æœ€å°å€¼å’Œæœ€å¤§å€¼ä¸ºæå°æˆ–æå¤§</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">dfs</span>(root, -<span class="hljs-title class_">Infinity</span>, <span class="hljs-title class_">Infinity</span>)
};
</code></pre>
<h4 data-id="heading-83">ç¼–ç å¤ç›˜</h4>
<p>è¿™ä¸ªé¢˜çš„ç¼–ç å®ç°æ¯”è¾ƒæœ‰æ„æ€ï¼Œå¯¹ <code>minValue</code> å’Œ <code>maxValue</code> çš„å¤„ç†å€¼å¾—æˆ‘ä»¬ååˆä¸€ä¸‹ï¼š</p>
<p>é€’å½’è¿‡ç¨‹ä¸­ï¼Œèµ·åˆ°å†³å®šæ€§ä½œç”¨çš„æ˜¯è¿™ä¸¤ä¸ªåˆ¤å®šæ¡ä»¶ï¼š</p>
<ul>
<li>å·¦å­©å­çš„å€¼æ˜¯å¦å°äºæ ¹ç»“ç‚¹å€¼</li>
<li>å³å­©å­çš„å€¼æ˜¯å¦å¤§äºæ ¹ç»“ç‚¹å€¼</li>
</ul>
<p>åœ¨é€’å½’å¼ä¸­ï¼Œå¦‚æœå•ç‹¬ç»´æŠ¤ä¸€æ®µé€»è¾‘ï¼Œç”¨äºåˆ¤å®šå½“å‰æ˜¯å·¦å­©å­è¿˜æ˜¯å³å­©å­ï¼Œè¿›è€Œå†³å®šæ˜¯è¿›è¡Œå¤§äºåˆ¤å®šè¿˜æ˜¯å°äºåˆ¤å®šï¼Œä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ã€‚ä½†æ˜¯åœ¨ä¸Šé¢çš„ç¼–ç ä¸­æˆ‘ä»¬é‡‡å–äº†ä¸€ç§æ›´ç®€æ´çš„æ‰‹æ³•ï¼Œé€šè¿‡è®¾ç½® <code>minValue</code> å’Œ <code>maxValue</code> ä¸ºæå°å’Œæå¤§å€¼ï¼Œæ¥ç¡®ä¿ <code>root.val &lt;= minValue || root.val &gt;= maxValue</code> è¿™ä¸¤ä¸ªæ¡ä»¶ä¸­æœ‰ä¸€ä¸ªæ˜¯ä¸€å®šä¸º <code>false</code> çš„ã€‚</p>
<p>æ¯”å¦‚å½“å‰æˆ‘éœ€è¦æ£€æŸ¥çš„æ˜¯<code>root</code> çš„å·¦å­©å­ï¼Œé‚£ä¹ˆå°±ä¼šè¿›å…¥ <code>dfs(root.left, minValue,root.val)</code> è¿™æ®µé€»è¾‘ã€‚è¿™ä¸ª<code>dfs</code>è°ƒç”¨å°†æœ€å¤§å€¼æ›´æ–°ä¸ºäº†<code>root</code>æ ¹ç»“ç‚¹çš„å€¼ï¼Œå°†å½“å‰<code>root</code>ç»“ç‚¹æ›´æ–°ä¸ºäº†å·¦å­©å­ç»“ç‚¹ï¼ŒåŒæ—¶ä¿æŒæœ€å°å€¼ä¸º <code>-Infinity</code> ä¸å˜ã€‚è¿›å…¥ <code>dfs</code>é€»è¾‘åï¼Œ<code>root.val &lt;= minValue || root.val &gt;= maxValue</code> ä¸­çš„ <code>root.val &lt;= minValue</code> ä¸€å®šä¸º <code>false</code> ï¼Œèµ·å†³å®šæ€§ä½œç”¨çš„æ¡ä»¶å®é™…æ˜¯ <code>root.val &gt;= maxValue</code>ï¼ˆè¿™é‡Œè¿™ä¸ª <code>maxValue</code> æ­£æ˜¯æ ¹ç»“ç‚¹çš„æ•°æ®åŸŸå€¼)ã€‚è‹¥<code>root.val &gt;= maxValue</code>è¿”å› <code>true</code>ï¼Œå°±æ„å‘³ç€å·¦å­©å­çš„å€¼å¤§äºç­‰äºï¼ˆä¹Ÿå°±æ˜¯ä¸å°äºï¼‰æ ¹ç»“ç‚¹çš„æ•°æ®åŸŸå€¼ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆæ³•çš„ã€‚æ­¤æ—¶æ•´ä¸ªæˆ–è¯­å¥éƒ½ä¼šè¿”å›<code>true</code>ï¼Œé€’å½’å¼è¿”å›<code>false</code>ï¼ŒäºŒå‰æœç´¢æ ‘è¿›è€Œä¼šè¢«åˆ¤å®šä¸ºä¸åˆæ³•ã€‚</p>
<h3 data-id="heading-84">å¯¹ç‰¹æ€§çš„è€ƒå¯Ÿï¼šå°†æ’åºæ•°ç»„è½¬åŒ–ä¸ºäºŒå‰æœç´¢æ ‘</h3>
<blockquote>
<p>é¢˜ç›®æè¿°ï¼šå°†ä¸€ä¸ªæŒ‰ç…§å‡åºæ’åˆ—çš„æœ‰åºæ•°ç»„ï¼Œè½¬æ¢ä¸ºä¸€æ£µé«˜åº¦å¹³è¡¡äºŒå‰æœç´¢æ ‘ã€‚<br/>
æœ¬é¢˜ä¸­ï¼Œä¸€ä¸ªé«˜åº¦å¹³è¡¡äºŒå‰æ ‘æ˜¯æŒ‡ä¸€ä¸ªäºŒå‰æ ‘æ¯ä¸ªèŠ‚ç‚¹ çš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡ 1ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹:
ç»™å®šæœ‰åºæ•°ç»„: [-10,-3,0,5,9],<br/>
ä¸€ä¸ªå¯èƒ½çš„ç­”æ¡ˆæ˜¯ï¼š[0,-3,9,-10,null,5]ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºä¸‹é¢è¿™ä¸ªé«˜åº¦å¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼š</p>
</blockquote>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">      0
     / \
   -3   9
   /   /
 -10  5
</span></code></pre>
<h4 data-id="heading-85">æ€è·¯åˆ†æ</h4>
<p>è¿™é“é¢˜å‡ºç°åœ¨è¿™ä¸ªä½ç½®çœŸæ˜¯å¤ªæ£’äº†ï¼ˆé™¶é†‰è„¸ï¼‰ï¼Œå®ƒä¸ä»…æ˜¯ä¸€é“å…¸å‹çš„äºŒå‰æœç´¢æ ‘åº”ç”¨é¢˜ï¼Œè¿˜æ¶‰åŠåˆ°äº†å¹³è¡¡äºŒå‰æ ‘çš„åŸºæœ¬çŸ¥è¯†ï¼Œå¯¹ä¸‹ä¸€ä¸ªä¸“é¢˜çš„å­¦ä¹ èµ·åˆ°äº†å¾ˆå¥½çš„é“ºå«ä½œç”¨ã€‚</p>
<p>åšè¿™ä¸ªé¢˜ï¼Œå¤§å®¶å¯ä»¥å…ˆè§‚å¯Ÿä¸€ä¸‹å®ƒçš„è¾“å…¥å’Œè¾“å‡ºï¼Œä½ ä¼šå‘ç°å®ƒä»¬ä¹‹é—´æœ‰ç€å¾ˆå¾®å¦™çš„å…³ç³»ã€‚å…ˆçœ‹è¾“å…¥ï¼š</p>
<pre><code class="hljs language-js" lang="js">[-<span class="hljs-number">10</span>,-<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">5</span>,<span class="hljs-number">9</span>]
</code></pre>
<p>å†çœ‹è¾“å‡ºï¼š</p>
<pre><code class="hljs language-js" lang="js">      <span class="hljs-number">0</span>
     / \
   -<span class="hljs-number">3</span>   <span class="hljs-number">9</span>
   /   /
 -<span class="hljs-number">10</span>  <span class="hljs-number">5</span>
</code></pre>
<p>è¿™ä¸ªäºŒå‰æ ‘ä»å½¢çŠ¶ä¸Šæ¥çœ‹ï¼Œåƒä¸åƒæ˜¯æŠŠæ•°ç»„ä» <code>0</code> è¿™ä¸ªä¸­é—´ä½ç½®ç»™â€œæèµ·æ¥â€äº†ï¼Ÿ<br/>
åˆ«ç¬‘ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥è¦åšçš„äº‹æƒ…ï¼Œè¿˜çœŸå°±æ˜¯è¦æƒ³åŠæ³•æŠŠè¿™ä¸ªæ•°ç»„ç»™â€œæâ€æˆäºŒå‰æ ‘ã€‚</p>
<p>åœ¨æƒ³åŠæ³•ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥åæ€ä¸€ä¸‹ä¸ºä»€ä¹ˆå¯ä»¥é€šè¿‡â€œæèµ·æ¥â€æ¥å®ç°æ•°ç»„åˆ°ç›®æ ‡äºŒå‰æ ‘çš„è½¬æ¢ï¼Œè¿™é‡Œé¢è•´å«äº†ä¸¤ä¸ªä¾æ®ï¼š</p>
<ol>
<li>
<p>äºŒå‰æœç´¢æ ‘çš„ç‰¹æ€§ï¼šé¢˜ç›®ä¸­æŒ‡æ˜äº†ç›®æ ‡æ ‘æ˜¯ä¸€æ£µäºŒå‰æœç´¢æ ‘ï¼ŒäºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†åºåˆ—æ˜¯æœ‰åºçš„ï¼Œé¢˜ä¸­æ‰€ç»™çš„æ•°ç»„ä¹Ÿæ˜¯æœ‰åºçš„ï¼Œ<strong>å› æ­¤æˆ‘ä»¬å¯ä»¥è®¤ä¸ºé¢˜ç›®ä¸­ç»™å‡ºçš„æ•°ç»„å°±æ˜¯ç›®æ ‡äºŒå‰æ ‘çš„ä¸­åºéå†åºåˆ—</strong>ã€‚ä¸­åºéå†åºåˆ—çš„é¡ºåºè§„åˆ™æ˜¯ <code>å·¦ -&gt; æ ¹ -&gt; å³</code>ï¼Œå› æ­¤æ•°ç»„ä¸­é—´ä½ç½®çš„å…ƒç´ ä¸€å®šå¯¹åº”ç€ç›®æ ‡äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹ã€‚ä»¥æ ¹ç»“ç‚¹ä¸ºæŠ“æ‰‹ï¼ŒæŠŠè¿™ä¸ªæ•°ç»„â€œæ‹â€èµ·æ¥ï¼Œå¾—åˆ°çš„äºŒå‰æ ‘ä¸€å®šæ˜¯ç¬¦åˆäºŒå‰æœç´¢æ ‘çš„æ’åºè§„åˆ™çš„ã€‚</p>
</li>
<li>
<p>å¹³è¡¡äºŒå‰æ ‘çš„ç‰¹æ€§ï¼šè™½ç„¶å’±ä»¬è¿˜æ²¡æœ‰è®²å•¥æ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼Œä½†æ˜¯é¢˜ç›®ä¸­å·²ç»å¦¥å¦¥åœ°ç»™å‡ºäº†ä¸€ä¸ªå¹³è¡¡äºŒå‰æ ‘çš„å®šä¹‰ï¼š</p>
</li>
</ol>
<blockquote>
<p>ä¸€ä¸ªé«˜åº¦å¹³è¡¡äºŒå‰æ ‘æ˜¯æŒ‡ä¸€ä¸ªäºŒå‰æ ‘æ¯ä¸ªèŠ‚ç‚¹ çš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡ 1ã€‚</p>
</blockquote>
<p>è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œåªéœ€è¦æŠŠâ€œæèµ·æ¥â€è¿™ä¸ªåŠ¨ä½œè´¯å½»åˆ°åº•å°±è¡Œäº†ï¼šå½“æˆ‘ä»¬ä»¥æœ‰åºæ•°ç»„çš„ä¸­é—´å…ƒç´ ä¸ºæ ¹ç»“ç‚¹ï¼Œâ€œæâ€å‡ºä¸€ä¸ªäºŒå‰æ ‘æ—¶ï¼Œæœ‰ä¸¤ç§å¯èƒ½çš„æƒ…å†µï¼š</p>
<ol>
<li>æ•°ç»„ä¸­å…ƒç´ ä¸ºå¥‡æ•°ä¸ªï¼Œæ­¤æ—¶ä»¥æ•°ç»„çš„ä¸­é—´å…ƒç´ ä¸ºç•Œï¼Œä¸¤ä¾§å…ƒç´ ä¸ªæ•°ç›¸åŒï¼š</li>
</ol>
<pre><code class="hljs language-js" lang="js">[-<span class="hljs-number">10</span>,-<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">5</span>,<span class="hljs-number">9</span>]
</code></pre>
<p>å¦‚æœæˆ‘ä»¬ä»¥ä¸­é—´å…ƒç´ ä¸ºæ ¹ç»“ç‚¹ï¼ŒæŠŠæ•°ç»„â€œæâ€æˆäºŒå‰æ ‘ï¼Œé‚£ä¹ˆæ ¹ç»“ç‚¹å·¦å³ä¸¤ä¾§çš„å…ƒç´ ä¸ªæ•°æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ç«™åœ¨æ ¹ç»“ç‚¹æ¥çœ‹ï¼Œå·¦å³å­æ ‘çš„é«˜åº¦å·®ä¸º0ï¼š</p>
<pre><code class="hljs language-js" lang="js">      <span class="hljs-number">0</span>
     / \
   -<span class="hljs-number">3</span>   <span class="hljs-number">9</span>
   /   /
 -<span class="hljs-number">10</span>  <span class="hljs-number">5</span>
</code></pre>
<ol start="2">
<li>æ•°ç»„ä¸­å…ƒç´ ä¸ºå¶æ•°ä¸ªï¼Œæ­¤æ—¶æ— è®ºæ˜¯é€‰æ‹©ä¸­é—´é å·¦çš„å…ƒç´ ä¸ºç•Œã€è¿˜æ˜¯é€‰æ‹©ä¸­é—´é å³çš„å…ƒç´ ä¸ºç•Œï¼Œä¸¤ä¾§å…ƒç´ ä¸ªæ•°å·®å€¼çš„ç»å¯¹å€¼éƒ½æ˜¯1ï¼š</li>
</ol>
<pre><code class="hljs language-js" lang="js">[-<span class="hljs-number">10</span>,-<span class="hljs-number">3</span>,<span class="hljs-number">0</span>,<span class="hljs-number">5</span>]
</code></pre>
<p>åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œè‹¥ä»¥ -3 ä¸ºæ ¹ç»“ç‚¹ï¼Œé‚£ä¹ˆå·¦å³å­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼å°±æ˜¯1ï¼š</p>
<pre><code class="hljs language-js" lang="js">      -<span class="hljs-number">3</span>
     / \
   -<span class="hljs-number">10</span>   <span class="hljs-number">0</span>
          \
           <span class="hljs-number">5</span>
</code></pre>
<p>ä»¥ 0 ä¸ºæ ¹ç»“ç‚¹äº¦ç„¶ã€‚</p>
<p>é€šè¿‡å¯¹ä»¥ä¸Šæƒ…å†µè¿›è¡Œæ¢è®¨ï¼Œæˆ‘ä»¬å‘ç°â€œä»¥ä¸­é—´å…ƒç´ ä¸ºæ ¹ç»“ç‚¹ï¼Œå°†æ•°ç»„ææˆæ ‘â€è¿™ç§æ“ä½œï¼Œå¯ä»¥ä¿è¯æ ¹ç»“ç‚¹å·¦å³ä¸¤ä¾§çš„å­æ ‘é«˜åº¦ç»å¯¹å€¼ä¸å¤§äº1ã€‚è¦æƒ³ä¿è¯æ¯ä¸€æ£µå­æ ‘éƒ½æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹æœ‰åºæ•°ç»„çš„æ¯ä¸€ä¸ªå¯¹åŠåˆ†å‡ºæ¥çš„å­åºåˆ—éƒ½é€’å½’åœ°æ‰§è¡Œè¿™ä¸ªæ“ä½œå³å¯ã€‚</p>
<h4 data-id="heading-86">ç¼–ç å®ç°</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">TreeNode</span>}
 */</span>
<span class="hljs-keyword">const</span> sortedArrayToBST = <span class="hljs-keyword">function</span>(<span class="hljs-params">nums</span>) {
    <span class="hljs-comment">// å¤„ç†è¾¹ç•Œæ¡ä»¶</span>
    <span class="hljs-keyword">if</span>(!nums.<span class="hljs-property">length</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
    }
    
    <span class="hljs-comment">// root ç»“ç‚¹æ˜¯é€’å½’â€œæâ€èµ·æ•°ç»„çš„ç»“æœ</span>
    <span class="hljs-keyword">const</span> root = <span class="hljs-title function_">buildBST</span>(<span class="hljs-number">0</span>, nums.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>)

    <span class="hljs-comment">// å®šä¹‰äºŒå‰æ ‘æ„å»ºå‡½æ•°ï¼Œå…¥å‚æ˜¯å­åºåˆ—çš„ç´¢å¼•èŒƒå›´</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">buildBST</span>(<span class="hljs-params">low, high</span>) {
        <span class="hljs-comment">// å½“ low &gt; high æ—¶ï¼Œæ„å‘³ç€å½“å‰èŒƒå›´çš„æ•°å­—å·²ç»è¢«é€’å½’å¤„ç†å®Œå…¨äº†</span>
        <span class="hljs-keyword">if</span>(low &gt; high) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
        }
        <span class="hljs-comment">// äºŒåˆ†ä¸€ä¸‹ï¼Œå–å‡ºå½“å‰å­åºåˆ—çš„ä¸­é—´å…ƒç´ </span>
        <span class="hljs-keyword">const</span> mid = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(low + (high - low)/<span class="hljs-number">2</span>)  
        <span class="hljs-comment">// å°†ä¸­é—´å…ƒç´ çš„å€¼ä½œä¸ºå½“å‰å­æ ‘çš„æ ¹ç»“ç‚¹å€¼</span>
        <span class="hljs-keyword">const</span> cur = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeNode</span>(nums[mid]) 
        <span class="hljs-comment">// é€’å½’æ„å»ºå·¦å­æ ‘ï¼ŒèŒƒå›´äºŒåˆ†ä¸º[low,mid)</span>
        cur.<span class="hljs-property">left</span> = <span class="hljs-title function_">buildBST</span>(low,mid-<span class="hljs-number">1</span>)
        <span class="hljs-comment">// é€’å½’æ„å»ºå·¦å­æ ‘ï¼ŒèŒƒå›´äºŒåˆ†ä¸ºä¸º(mid,high]</span>
        cur.<span class="hljs-property">right</span> = <span class="hljs-title function_">buildBST</span>(mid+<span class="hljs-number">1</span>, high)
        <span class="hljs-comment">// è¿”å›å½“å‰ç»“ç‚¹</span>
        <span class="hljs-keyword">return</span> cur
    }
    <span class="hljs-comment">// è¿”å›æ ¹ç»“ç‚¹</span>
    <span class="hljs-keyword">return</span> root
};
</code></pre>
<p>ï¼ˆé˜…è¯»è¿‡ç¨‹ä¸­æœ‰ä»»ä½•æƒ³æ³•æˆ–ç–‘é—®ï¼Œæˆ–è€…å•çº¯å¸Œæœ›å’Œç¬”è€…äº¤ä¸ªæœ‹å‹å•¥çš„ï¼Œæ¬¢è¿å¤§å®¶æ·»åŠ æˆ‘çš„å¾®ä¿¡xyalinodeä¸æˆ‘äº¤æµå“ˆ~ï¼‰
äºŒå‰æœç´¢æ ‘æ˜¯äºŒå‰æ ‘çš„ç‰¹ä¾‹ï¼Œå¹³è¡¡äºŒå‰æ ‘åˆ™æ˜¯äºŒå‰æœç´¢æ ‘çš„ç‰¹ä¾‹ã€‚</p>
<h2 data-id="heading-87">ä»€ä¹ˆæ˜¯å¹³è¡¡äºŒå‰æ ‘</h2>
<p>åœ¨ä¸Šä¸€èŠ‚çš„æœ«å°¾ï¼Œæˆ‘ä»¬å·²ç»é€šè¿‡ä¸€é“çœŸé¢˜å’Œå¹³è¡¡äºŒå‰æ ‘æ‰“è¿‡äº¤é“ã€‚æ­£å¦‚é¢˜ç›®ä¸­æ‰€è¯´ï¼Œå¹³è¡¡äºŒå‰æ ‘ï¼ˆåˆç§° AVL Treeï¼‰æŒ‡çš„<strong>æ˜¯ä»»æ„ç»“ç‚¹</strong>çš„<strong>å·¦å³å­æ ‘é«˜åº¦å·®ç»å¯¹å€¼éƒ½ä¸å¤§äº1</strong>çš„äºŒå‰<strong>æœç´¢æ ‘</strong>ã€‚</p>
<h2 data-id="heading-88">ä¸ºä»€ä¹ˆè¦æœ‰å¹³è¡¡äºŒå‰æ ‘</h2>
<p>å¹³è¡¡äºŒå‰æ ‘çš„å‡ºç°ï¼Œæ˜¯ä¸ºäº†é™ä½äºŒå‰æœç´¢æ ‘çš„æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ã€‚<br/>
å¤§å®¶çŸ¥é“ï¼Œå¯¹äºåŒæ ·ä¸€ä¸ªéå†åºåˆ—ï¼ŒäºŒå‰æœç´¢æ ‘çš„é€ å‹å¯ä»¥æœ‰å¾ˆå¤šç§ã€‚æ‹¿ <code>[1,2,3,4,5]</code>è¿™ä¸ªä¸­åºéå†åºåˆ—æ¥è¯´ï¼ŒåŸºäºå®ƒå¯ä»¥æ„é€ å‡ºçš„äºŒå‰æœç´¢æ ‘å°±åŒ…æ‹¬ä»¥ä¸‹ä¸¤ç§é€ å‹ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/24/17245d06f50d1e9f~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=944&amp;h=756&amp;s=46240&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/24/17245d2227c126fc~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=918&amp;h=950&amp;s=42843&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/>
ç»“åˆå¹³è¡¡äºŒå‰æ ‘çš„å®šä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œç¬¬ä¸€æ£µäºŒå‰æ ‘æ˜¯å¹³è¡¡äºŒå‰æ ‘ï¼Œç¬¬äºŒæ£µäºŒå‰æ ‘æ˜¯æ™®é€šçš„äºŒå‰æœç´¢æ ‘ã€‚<br/>
ç°åœ¨ï¼Œå¦‚æœè¦ä½ åŸºäºä¸Šä¸€èŠ‚å­¦è¿‡çš„äºŒå‰æœç´¢æ ‘æŸ¥æ‰¾ç®—æ³•ï¼Œåœ¨å›¾ä¸Šä¸¤æ£µæ ‘ä¸Šåˆ†åˆ«æ‰¾å‡ºå€¼ä¸º1çš„ç»“ç‚¹ï¼Œé—®ä½ å„éœ€è¦æŸ¥æ‰¾å‡ æ¬¡ï¼Ÿåœ¨1å·äºŒå‰æ ‘ä¸­ï¼ŒåŒ…æ‹¬æ ¹ç»“ç‚¹åœ¨å†…ï¼Œåªéœ€è¦æŸ¥æ‰¾3æ¬¡ï¼›è€Œåœ¨2å·äºŒå‰æ ‘ä¸­ï¼ŒåŒ…æ‹¬æ ¹ç»“ç‚¹åœ¨å†…ï¼Œä¸€å…±éœ€è¦æŸ¥æ‰¾5æ¬¡ã€‚</p>
<p>æˆ‘ä»¬å‘ç°ï¼Œåœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œå¯¹äºåŒä¸€ä¸ªéå†åºåˆ—æ¥è¯´ï¼Œå¹³è¡¡äºŒå‰æ ‘æ¯”éå¹³è¡¡äºŒå‰æ ‘ï¼ˆå›¾ä¸Šçš„ç»“æ„å¯ä»¥ç§°ä¸ºé“¾å¼äºŒå‰æ ‘ï¼‰çš„æŸ¥æ‰¾æ•ˆç‡æ›´é«˜ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>å¤§å®¶å¯ä»¥ä»”ç»†æƒ³æƒ³ï¼Œä¸ºä»€ä¹ˆç§‘å­¦å®¶ä»¬ä¼šæ— ä¸­ç”Ÿæœ‰ï¼Œç»™äºŒå‰æ ‘çš„å·¦å³å­æ ‘å’Œæ ¹ç»“ç‚¹ä¹‹é—´å¼ºåŠ ä¸Šæ’åºå…³ç³»ä½œä¸ºçº¦æŸï¼Œè¿›è€Œåˆ›é€ å‡ºäºŒå‰æœç´¢æ ‘è¿™ç§ä¸œè¥¿å‘¢ï¼Ÿéš¾é“åªæ˜¯ä¸ºäº†è£…xå—ï¼Ÿå½“ç„¶ä¸æ˜¯å•¦ã€‚<strong>äºŒå‰æœç´¢æ ‘çš„å¦™å¤„å°±åœ¨äºå®ƒæŠŠâ€œäºŒåˆ†â€è¿™ç§æ€æƒ³ä»¥æ•°æ®ç»“æ„çš„å½¢å¼è¡¨è¾¾äº†å‡ºæ¥</strong>ã€‚åœ¨ä¸€ä¸ªæ„é€ åˆç†çš„äºŒå‰æœç´¢æ ‘é‡Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹æ¯”å½“å‰ç»“ç‚¹å’Œç›®æ ‡å€¼ä¹‹é—´çš„å¤§å°å…³ç³»ï¼Œç¼©å°ä¸‹ä¸€æ­¥çš„æœç´¢èŒƒå›´ï¼ˆæ¯”å¦‚åªæœç´¢å·¦å­æ ‘æˆ–è€…åªæœç´¢å³å­æ ‘ï¼‰ï¼Œè¿›è€Œè§„é¿æ‰ä¸å¿…è¦çš„æŸ¥æ‰¾æ­¥éª¤ï¼Œé™ä½æœç´¢è¿‡ç¨‹çš„æ—¶é—´å¤æ‚åº¦ã€‚ä½†æ˜¯å¦‚æœä¸€ä¸ªäºŒå‰æœç´¢æ ‘ä¸¥é‡ä¸å¹³è¡¡ï¼Œæ¯”å¦‚è¯´ä¸Šé¢è¿™æ£µé“¾å¼æœç´¢æ ‘ï¼š<br/>
<img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/24/17245d2227c126fc~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=918&amp;h=950&amp;s=42843&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<p>æ¯ä¸€ä¸ªç»“ç‚¹çš„å³å­æ ‘éƒ½æ˜¯ç©ºçš„ï¼Œè¿™æ ·çš„ç»“æ„éå¸¸ä¸åˆç†ï¼Œå®ƒä¼šå¸¦æ¥é«˜è¾¾O(N)çš„æ—¶é—´å¤æ‚åº¦ã€‚è€Œå¹³è¡¡äºŒå‰æ ‘ç”±äºåˆ©ç”¨äº†äºŒåˆ†æ€æƒ³ï¼ŒæŸ¥æ‰¾æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä»…ä¸º O(logN)ã€‚å› æ­¤ï¼Œä¸ºäº†ä¿è¯äºŒå‰æœç´¢æ ‘èƒ½å¤Ÿç¡®å®ä¸ºæŸ¥æ‰¾æ“ä½œå¸¦æ¥æ•ˆç‡ä¸Šçš„æå‡ï¼Œæˆ‘ä»¬æœ‰å¿…è¦åœ¨æ„é€ äºŒå‰æœç´¢æ ‘çš„è¿‡ç¨‹ä¸­ç»´æŒå…¶å¹³è¡¡åº¦ï¼Œè¿™å°±æ˜¯å¹³è¡¡äºŒå‰æ ‘çš„æ¥ç”±ã€‚</p>
<h2 data-id="heading-89">å‘½é¢˜æ€è·¯è§£è¯»</h2>
<p>å¹³è¡¡äºŒå‰æ ‘å’ŒäºŒå‰æœç´¢æ ‘ä¸€æ ·ï¼Œéƒ½è¢«å½’ç±»ä¸ºâ€œç‰¹æ®Šâ€çš„äºŒå‰æ ‘ã€‚å¯¹äºè¿™æ ·çš„æ•°æ®ç»“æ„æ¥è¯´ï¼Œå…¶â€œç‰¹æ®Šâ€ä¹‹å¤„ä¹Ÿæ­£æ˜¯å…¶è€ƒç‚¹æ‰€åœ¨ï¼Œå› æ­¤çœŸé¢˜å¾€å¾€ç¨³å®šåœ°åˆ†å¸ƒåœ¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹å‘ï¼š</p>
<ul>
<li>
<p>å¯¹ç‰¹æ€§çš„è€ƒå¯Ÿï¼ˆæœ¬èŠ‚ä»¥å¹³è¡¡äºŒå‰æ ‘çš„åˆ¤å®šä¸ºä¾‹ï¼‰</p>
</li>
<li>
<p>å¯¹æ“ä½œçš„è€ƒå¯Ÿï¼ˆæœ¬èŠ‚ä»¥å¹³è¡¡äºŒå‰æ ‘çš„æ„é€ ä¸ºä¾‹ï¼‰</p>
</li>
</ul>
<h2 data-id="heading-90">å¹³è¡¡äºŒå‰æ ‘çš„åˆ¤å®š</h2>
<blockquote>
<p>é¢˜ç›®æè¿°ï¼šç»™å®šä¸€ä¸ªäºŒå‰æ ‘ï¼Œåˆ¤æ–­å®ƒæ˜¯å¦æ˜¯é«˜åº¦å¹³è¡¡çš„äºŒå‰æ ‘ã€‚<br/>
æœ¬é¢˜ä¸­ï¼Œä¸€æ£µé«˜åº¦å¹³è¡¡äºŒå‰æ ‘å®šä¹‰ä¸ºï¼š
ä¸€ä¸ªäºŒå‰æ ‘æ¯ä¸ªèŠ‚ç‚¹ çš„å·¦å³ä¸¤ä¸ªå­æ ‘çš„é«˜åº¦å·®çš„ç»å¯¹å€¼ä¸è¶…è¿‡1ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹ 1:
ç»™å®šäºŒå‰æ ‘ [3,9,20,null,null,15,7]</p>
</blockquote>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">    3
   / \
  9  20
    /  \
   15   7
</span></code></pre>
<blockquote>
<p>è¿”å› true ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹ 2:
ç»™å®šäºŒå‰æ ‘ [1,2,2,3,3,null,null,4,4]</p>
</blockquote>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">       1
      / \
     2   2
    / \
   3   3
  / \
 4   4
</span></code></pre>
<blockquote>
<p>è¿”å›Â false ã€‚</p>
</blockquote>
<h3 data-id="heading-91">æ€è·¯åˆ†æ</h3>
<p>æ¥ï¼Œæˆ‘ä»¬å¤ä¹ ä¸€éå¹³è¡¡äºŒå‰æ ‘çš„å®šä¹‰ï¼š</p>
<blockquote>
<p>å¹³è¡¡äºŒå‰æ ‘<strong>æ˜¯ä»»æ„ç»“ç‚¹</strong>çš„<strong>å·¦å³å­æ ‘é«˜åº¦å·®ç»å¯¹å€¼éƒ½ä¸å¤§äº1</strong>çš„äºŒå‰<strong>æœç´¢æ ‘</strong>ã€‚
æŠ“ä½å…¶ä¸­çš„ä¸‰ä¸ªå…³é”®å­—ï¼š</p>
</blockquote>
<ol>
<li>ä»»æ„ç»“ç‚¹</li>
<li>å·¦å³å­æ ‘é«˜åº¦å·®ç»å¯¹å€¼éƒ½ä¸å¤§äº1</li>
<li>äºŒå‰æœç´¢æ ‘</li>
</ol>
<p>æ³¨æ„ï¼Œç»“åˆé¢˜æ„ï¼Œä¸Šé¢3ä¸ªå…³é”®å­—ä¸­çš„3å¯¹è¿™é“é¢˜æ¥è¯´æ˜¯ä¸é€‚ç”¨çš„ï¼Œå› æ­¤æˆ‘ä»¬ä¸å¿…å¯¹äºŒå‰æœç´¢æ ‘çš„æ€§è´¨è¿›è¡Œæ ¡éªŒã€‚ç°åœ¨åªçœ‹ 1 å’Œ 2ï¼Œå…ˆç»™è‡ªå·±ä¸€åˆ†é’Ÿæ€è€ƒä¸€ä¸‹â€”â€”ä½ å¯ä»¥æå–å‡ºä»€ä¹ˆçº¿ç´¢ï¼Ÿ</p>
<p>â€œä»»æ„ç»“ç‚¹â€ä»€ä¹ˆæ„æ€ï¼Ÿæ¯ä¸€ä¸ªç»“ç‚¹éƒ½éœ€è¦ç¬¦åˆæŸä¸ªæ¡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸€ä¸ªç»“ç‚¹åœ¨è¢«éå†åˆ°çš„æ—¶å€™éƒ½éœ€è¦é‡å¤æŸä¸ªæ ¡éªŒæµç¨‹ï¼Œå¯¹ä¸å¯¹ï¼Ÿ<br/>
å“ï¼Œæˆ‘åˆšåˆšæ˜¯ä¸æ˜¯è¯´äº†ä»€ä¹ˆä¸å¾—äº†çš„åŠ¨è¯äº†ï¼Ÿå•Šï¼Œæ˜¯<strong>é‡å¤</strong>ï¼æ˜¯tmdçš„<strong>é‡å¤å•Š</strong>ï¼ï¼ï¼æ¥ï¼Œå­¦åˆ°äº†ç¬¬18èŠ‚ï¼Œä¸ºäº†å‘æˆ‘è¯æ˜ä½ æ²¡æœ‰è·³è¯»ï¼Œè¯·å¤§å£°å–Šå‡ºä¸‹é¢è¿™ä¸¤ä¸ªå­—ï¼š</p>
<p> é€’å½’ï¼</p>
æ²¡é”™ï¼Œâ€œä»»æ„ç»“ç‚¹â€è¿™å››ä¸ªå­—ï¼Œå°±æ˜¯åœ¨æš—ç¤ºä½ ç”¨é€’å½’ã€‚è€Œâ€œå·¦å³å­æ ‘é«˜åº¦å·®ç»å¯¹å€¼éƒ½ä¸å¤§äº1â€è¿™ä¸ªæ ¡éªŒè§„åˆ™ï¼Œå°±æ˜¯é€’å½’å¼ã€‚   
<p>å•Šï¼ŒçœŸè®©äººæ¿€åŠ¨å‘¢ï¼Œè§£å†³è¿™é“é¢˜çš„æ€è·¯ç«Ÿç„¶å·²ç»æ…¢æ…¢æµ®ç°å‡ºæ¥äº†ï¼Œé‚£å°±æ˜¯ï¼šä»ä¸‹å¾€ä¸Šé€’å½’éå†æ ‘ä¸­çš„æ¯ä¸€ä¸ªç»“ç‚¹ï¼Œè®¡ç®—å…¶å·¦å³å­æ ‘çš„é«˜åº¦å¹¶è¿›è¡Œå¯¹æ¯”ï¼Œåªè¦æœ‰ä¸€ä¸ªé«˜åº¦å·®çš„ç»å¯¹å€¼å¤§äº1ï¼Œé‚£ä¹ˆæ•´æ£µæ ‘éƒ½ä¼šè¢«åˆ¤ä¸ºä¸å¹³è¡¡ã€‚</p>
<h3 data-id="heading-92">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> isBalanced = <span class="hljs-keyword">function</span>(<span class="hljs-params">root</span>) {
  <span class="hljs-comment">// ç«‹ä¸€ä¸ªflagï¼Œåªè¦æœ‰ä¸€ä¸ªé«˜åº¦å·®ç»å¯¹å€¼å¤§äº1ï¼Œè¿™ä¸ªflagå°±ä¼šè¢«ç½®ä¸ºfalse</span>
  <span class="hljs-keyword">let</span> flag = <span class="hljs-literal">true</span>
  <span class="hljs-comment">// å®šä¹‰é€’å½’é€»è¾‘</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">dfs</span>(<span class="hljs-params">root</span>) {
      <span class="hljs-comment">// å¦‚æœæ˜¯ç©ºæ ‘ï¼Œé«˜åº¦è®°ä¸º0ï¼›å¦‚æœflagå·²ç»falseäº†ï¼Œé‚£ä¹ˆå°±æ²¡å¿…è¦å¾€ä¸‹èµ°äº†ï¼Œç›´æ¥return</span>
      <span class="hljs-keyword">if</span>(!root || !flag) {
          <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> 
      }
      <span class="hljs-comment">// è®¡ç®—å·¦å­æ ‘çš„é«˜åº¦</span>
      <span class="hljs-keyword">const</span> left = <span class="hljs-title function_">dfs</span>(root.<span class="hljs-property">left</span>)  
      <span class="hljs-comment">// è®¡ç®—å³å­æ ‘çš„é«˜åº¦</span>
      <span class="hljs-keyword">const</span> right = <span class="hljs-title function_">dfs</span>(root.<span class="hljs-property">right</span>)  
      <span class="hljs-comment">// å¦‚æœå·¦å³å­æ ‘çš„é«˜åº¦å·®ç»å¯¹å€¼å¤§äº1ï¼Œflagå°±ç ´åŠŸäº†</span>
      <span class="hljs-keyword">if</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">abs</span>(left-right) &gt; <span class="hljs-number">1</span>) {
          flag = <span class="hljs-literal">false</span>
          <span class="hljs-comment">// åé¢å†å‘ç”Ÿä»€ä¹ˆå·²ç»ä¸é‡è¦äº†ï¼Œè¿”å›ä¸€ä¸ªä¸å½±å“å›æº¯è®¡ç®—çš„å€¼</span>
          <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
      }
      <span class="hljs-comment">// è¿”å›å½“å‰å­æ ‘çš„é«˜åº¦</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(left, right) + <span class="hljs-number">1</span>
  }
  
  <span class="hljs-comment">// é€’å½’å…¥å£</span>
  <span class="hljs-title function_">dfs</span>(root) 
  <span class="hljs-comment">// è¿”å›flagçš„å€¼</span>
  <span class="hljs-keyword">return</span> flag
};
</code></pre>
<h2 data-id="heading-93">å¹³è¡¡äºŒå‰æ ‘çš„æ„é€ </h2>
<blockquote>
<p>é¢˜ç›®æè¿°ï¼šç»™ä½ ä¸€æ£µäºŒå‰æœç´¢æ ‘ï¼Œè¯·ä½ è¿”å›ä¸€æ£µå¹³è¡¡åçš„äºŒå‰æœç´¢æ ‘ï¼Œæ–°ç”Ÿæˆçš„æ ‘åº”è¯¥ä¸åŸæ¥çš„æ ‘æœ‰ç€ç›¸åŒçš„èŠ‚ç‚¹å€¼ã€‚<br/>
å¦‚æœä¸€æ£µäºŒå‰æœç´¢æ ‘ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹çš„ä¸¤æ£µå­æ ‘é«˜åº¦å·®ä¸è¶…è¿‡ 1 ï¼Œæˆ‘ä»¬å°±ç§°è¿™æ£µäºŒå‰æœç´¢æ ‘æ˜¯å¹³è¡¡çš„ã€‚<br/>
å¦‚æœæœ‰å¤šç§æ„é€ æ–¹æ³•ï¼Œè¯·ä½ è¿”å›ä»»æ„ä¸€ç§ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹ï¼š</p>
</blockquote>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/4/171e046bc8287d8b~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=375&amp;h=372&amp;s=9905&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/>
<img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/4/171e046d9a086675~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=235&amp;h=279&amp;s=7861&amp;e=png" alt="" loading="lazy"/></p>
<blockquote>
<p>è¾“å…¥ï¼šroot = [1,null,2,null,3,null,4,null,null]<br/>
è¾“å‡ºï¼š[2,1,3,null,null,null,4]<br/>
è§£é‡Šï¼šè¿™ä¸æ˜¯å”¯ä¸€çš„æ­£ç¡®ç­”æ¡ˆï¼Œ[3,1,4,null,2,null,null] ä¹Ÿæ˜¯ä¸€ä¸ªå¯è¡Œçš„æ„é€ æ–¹æ¡ˆã€‚<br/>
</p>
</blockquote>
<blockquote>
<p>æç¤ºï¼š<br/>
æ ‘èŠ‚ç‚¹çš„æ•°ç›®åœ¨Â 1Â åˆ°Â 10^4Â ä¹‹é—´ã€‚
æ ‘èŠ‚ç‚¹çš„å€¼äº’ä¸ç›¸åŒï¼Œä¸”åœ¨Â 1Â åˆ°Â 10^5 ä¹‹é—´ã€‚</p>
</blockquote>
<h3 data-id="heading-94">æ€è·¯åˆ†æ</h3>
<p>è¿™é“é¢˜ä¹ä¸€çœ‹æœ‰ç‚¹å”¬äººï¼Œå¯èƒ½ä¼šç›´æ¥å¹²æ‡µä¸€éƒ¨åˆ†åŒå­¦ã€‚ä¸è¿‡ä¸ç”¨æ…Œâ€”â€”é¢˜ç›®å†æ–°ï¼Œå¥—è·¯ä¾æ—§ã€‚åªè¦ä½ å¯¹æ ¸å¿ƒè€ƒç‚¹æŠŠæ¡å¾—è¶³å¤Ÿæ‰å®ï¼Œå®ƒå°±éš¾ä¸å€’ä½ ã€‚</p>
<p>æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™é“é¢˜çš„æ ¸å¿ƒè¯‰æ±‚ï¼šè¦æ±‚æˆ‘ä»¬æ„é€ ä¸€æ£µå¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ã€‚å…ˆæŠ›å¼€é¢˜å¹²ä¸­å„ç§å‰ç½®æ¡ä»¶ä¸è°ˆï¼Œå•çœ‹è¿™ä¸ªè¾“å‡ºç»“æœï¼Œä½ ä¼šä¸ä¼šæœ‰ä¸€ç§ä¼¼æ›¾ç›¸è¯†çš„æ„Ÿè§‰å‘¢ï¼Ÿæ²¡é”™ï¼Œåœ¨ä¸Šä¸€èŠ‚çš„æœ€åä¸€é“çœŸé¢˜ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæ„é€ è¿‡è¿™æ ·çš„ä¸€æ£µäºŒå‰æ ‘ã€‚</p>
<p>é‚£ä¹ˆè¿™ä¸¤é“é¢˜ä¹‹é—´ä¼šä¸ä¼šæœ‰ä»€ä¹ˆå¾®å¦™çš„è”ç³»å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¼šï¼Œä¸ç„¶ï¼Œç¬”è€…ä¹Ÿä¸ä¼šæŠŠå®ƒä»¬æ”¾å¾—è¿™ä¹ˆè¿‘ï¼ˆç–¯ç‹‚æš—ç¤ºï¼‰ã€‚ä¸¤é“é¢˜ä¹‹é—´å”¯ä¸€çš„å·®åˆ«åœ¨äºè¾“å…¥ï¼šåœ¨æˆ‘ä»¬å·²ç»åšè¿‡çš„é‚£é“é¢˜ä¸­ï¼Œè¾“å…¥å‚æ•°æ˜¯ä¸€ä¸ªæœ‰åºæ•°ç»„ï¼›è€Œè¿™é“é¢˜ä¸­ï¼Œè¾“å…¥å‚æ•°æ˜¯ä¸€ä¸ªäºŒå‰æœç´¢æ ‘ã€‚</p>
<p>å””ï¼Œå†æƒ³æƒ³ï¼ä¸Šä¸€èŠ‚é‚£é“é¢˜é‡Œçš„â€œæœ‰åºæ•°ç»„â€ï¼Œå’Œçœ¼å‰è¿™é“é¢˜é‡Œçš„â€œäºŒå‰æœç´¢æ ‘â€ä¹‹é—´ï¼Œä¼šä¸ä¼šæœ‰ä»€ä¹ˆå¦™ä¸å¯è¨€çš„å…³ç³»å‘¢ï¼Ÿ</p>
<p>åˆ«å¿˜äº†ï¼Œ<strong>äºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†åºåˆ—æ˜¯æœ‰åºçš„</strong>ï¼æ‰€è°“æœ‰åºæ•°ç»„ï¼Œå®Œå…¨å¯ä»¥ç†è§£ä¸ºäºŒå‰æœç´¢æ ‘çš„ä¸­åºéå†åºåˆ—å•Šï¼Œå¯¹ä¸å¯¹ï¼Ÿç°åœ¨æ ‘éƒ½ç»™åˆ°å’±ä»¬æ‰‹é‡Œäº†ï¼Œæ±‚å®ƒçš„ä¸­åºéå†åºåˆ—æ˜¯ä¸æ˜¯éå¸¸ easyï¼Ÿå¦‚æœèƒ½æŠŠä¸­åºéå†åºåˆ—æ±‚å‡ºæ¥ï¼Œè¿™é“é¢˜æ˜¯ä¸æ˜¯å°±è·Ÿä¹‹å‰åšè¿‡é‚£é“æ˜¯ä¸€æ¨¡ä¸€æ ·çš„è§£æ³•äº†ï¼Ÿ</p>
<p>æ²¡é”™ï¼Œè¿™é“é¢˜çš„è§£é¢˜æ€è·¯æ­£æ˜¯ï¼š</p>
<ol>
<li>ä¸­åºéå†æ±‚å‡ºæœ‰åºæ•°ç»„</li>
<li>é€ä¸ªå°†äºŒåˆ†å‡ºæ¥çš„æ•°ç»„å­åºåˆ—â€œæâ€èµ·æ¥å˜æˆäºŒå‰æœç´¢æ ‘</li>
</ol>
<h3 data-id="heading-95">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">TreeNode</span>} <span class="hljs-variable">root</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">TreeNode</span>}
 */</span>
<span class="hljs-keyword">const</span> balanceBST = <span class="hljs-keyword">function</span>(<span class="hljs-params">root</span>) {
    <span class="hljs-comment">// åˆå§‹åŒ–ä¸­åºéå†åºåˆ—æ•°ç»„</span>
    <span class="hljs-keyword">const</span> nums = []
    <span class="hljs-comment">// å®šä¹‰ä¸­åºéå†äºŒå‰æ ‘ï¼Œå¾—åˆ°æœ‰åºæ•°ç»„</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">inorder</span>(<span class="hljs-params">root</span>) {
        <span class="hljs-keyword">if</span>(!root) {
            <span class="hljs-keyword">return</span> 
        }
        <span class="hljs-title function_">inorder</span>(root.<span class="hljs-property">left</span>)  
        nums.<span class="hljs-title function_">push</span>(root.<span class="hljs-property">val</span>)  
        <span class="hljs-title function_">inorder</span>(root.<span class="hljs-property">right</span>)
    }
    
    <span class="hljs-comment">// è¿™å¨ä»£ç çš„é€»è¾‘å’Œä¸Šä¸€èŠ‚æœ€åä¸€é¢˜çš„ä»£ç ä¸€æ¨¡ä¸€æ ·</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">buildAVL</span>(<span class="hljs-params">low, high</span>) {
        <span class="hljs-comment">// è‹¥ low &gt; highï¼Œåˆ™è¶Šç•Œï¼Œè¯´æ˜å½“å‰ç´¢å¼•èŒƒå›´å¯¹åº”çš„å­æ ‘å·²ç»æ„å»ºå®Œæ¯•</span>
        <span class="hljs-keyword">if</span>(low&gt;high) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
        }
        <span class="hljs-comment">// å–æ•°ç»„çš„ä¸­é—´å€¼ä½œä¸ºæ ¹ç»“ç‚¹å€¼</span>
        <span class="hljs-keyword">const</span> mid = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(low + (high -low)/<span class="hljs-number">2</span>)
        <span class="hljs-comment">// åˆ›é€ å½“å‰æ ‘çš„æ ¹ç»“ç‚¹</span>
        <span class="hljs-keyword">const</span> cur = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TreeNode</span>(nums[mid])  
        <span class="hljs-comment">// æ„å»ºå·¦å­æ ‘</span>
        cur.<span class="hljs-property">left</span> = <span class="hljs-title function_">buildAVL</span>(low, mid-<span class="hljs-number">1</span>) 
        <span class="hljs-comment">// æ„å»ºå³å­æ ‘</span>
        cur.<span class="hljs-property">right</span> = <span class="hljs-title function_">buildAVL</span>(mid+<span class="hljs-number">1</span>, high)  
        <span class="hljs-comment">// è¿”å›å½“å‰æ ‘çš„æ ¹ç»“ç‚¹ </span>
        <span class="hljs-keyword">return</span> cur
    }
    <span class="hljs-comment">// è°ƒç”¨ä¸­åºéå†æ–¹æ³•ï¼Œæ±‚å‡º nums</span>
    <span class="hljs-title function_">inorder</span>(root)
    <span class="hljs-comment">// åŸºäº numsï¼Œæ„é€ å¹³è¡¡äºŒå‰æ ‘</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">buildAVL</span>(<span class="hljs-number">0</span>, nums.<span class="hljs-property">length</span>-<span class="hljs-number">1</span>)
};
</code></pre>
<p>æœ¬èŠ‚å†…å®¹ä¸è¦æ±‚æ‰€æœ‰åŒå­¦æŒæ¡â€”â€”å¦‚æœä½ åœ¨é˜…è¯»çš„è¿‡ç¨‹ä¸­ï¼Œè§‰å¾—ç†è§£èµ·æ¥éå¸¸åƒåŠ›ï¼Œç¬”è€…å»ºè®®ä½ æš‚æ—¶è·³è¿‡è¿™ä¸€èŠ‚ï¼Œä¼˜å…ˆå®Œæˆå…¨ç›˜çš„çŸ¥è¯†ç‚¹æ‰«ç›²åå†å›æ¥çœ‹ã€‚</p>
<p>ä¸ºä»€ä¹ˆè¿™æ ·è¯´ï¼Ÿè¿™é‡Œé¢æœ‰ä¸¤ä¸ªåŸå› ï¼š</p>
<ol>
<li>æ ¹æ®ç¬”è€…é•¿æœŸå¥‹æˆ˜ç®—æ³•é¢è¯•ä¸€çº¿çš„ç»éªŒï¼Œèƒ½ç”¨å †ç»“æ„è§£å†³çš„é—®é¢˜ï¼ŒåŸºæœ¬ä¸Šä¹Ÿéƒ½èƒ½ç”¨æ™®é€šæ’åºæ¥è§£å†³ã€‚</li>
<li>å³ä¾¿æ˜¯åç«¯å·¥ç¨‹å¸ˆæˆ–è€…ç®—æ³•å·¥ç¨‹å¸ˆï¼Œèƒ½å¤Ÿåœ¨é¢è¯•ç°åœºæ‰‹å†™å †ç»“æ„çš„äººä¹Ÿå¯¥å¯¥æ— å‡ ã€‚è¿™å€’ä¸æ˜¯å› ä¸ºä»–ä»¬ä¸å¤Ÿä¸“ä¸šï¼Œè€Œæ˜¯å› ä¸ºä»–ä»¬åŸºæœ¬éƒ½éå¸¸ç†Ÿæ‚‰ä¸€é—¨å«åš <code>JAVA</code> çš„è¯­è¨€â€”â€”<code>JAVA</code>å¤§æ³•å¥½ï¼Œå®ƒåœ¨åº•å±‚å°è£…äº†ä¸€ä¸ªå«åšpriorty_queueçš„æ•°æ®ç»“æ„ï¼Œè¿™ä¸ªæ•°æ®ç»“æ„æŠŠå †çš„æ„å»ºã€æ’å…¥ã€åˆ é™¤ç­‰æ“ä½œå…¨éƒ¨åšæ‰äº†ã€‚æ‰€ä»¥è¯´è¿™å¸®äººéå¸¸å–œæ¬¢åšå †/ä¼˜å…ˆé˜Ÿåˆ—ç›¸å…³çš„é¢˜ç›®ï¼Œè°ƒå‡ ä¸ª<code>API</code>å°±å®Œäº‹å„¿äº†ã€‚</li>
</ol>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜è¦è®²å †ç»“æ„ï¼Œå †ç»“æ„åœ¨æˆ‘ä»¬æ•´ä¸ªçŸ¥è¯†ä½“ç³»é‡Œçš„å®šä½åº”è¯¥æ€ä¹ˆå»æŠŠæ¡ï¼Œè¿™é‡Œæœ‰ä¸¤ä»¶äº‹æƒ…å¸Œæœ›å¤§å®¶èƒ½æ˜ç™½ï¼š</p>
<ol>
<li>
<p>å‡ ä¹æ¯ä¸€æœ¬æ­£ç»çš„è®¡ç®—æœºä¸“ä¸šæ•°æ®ç»“æ„æ•™æï¼Œéƒ½ä¼šä»‹ç»å †ç»“æ„ã€‚å°å†Œæœ¬èº«è™½ç„¶æ˜¯é¢å‘é¢è¯•çš„ï¼Œä½†ç¬”è€…æ›´å¸Œæœ›èƒ½å€Ÿè¿™ä¸ªæœºä¼šï¼Œå¸®åŠ©ä¸€éƒ¨åˆ†æ²¡æœ‰æœºä¼šæ¥å—ç§‘ç­æ•™è‚²çš„å‰ç«¯åŒè¡Œè¡¥é½è‡ªèº«çš„çŸ¥è¯†çŸ­æ¿ã€‚</p>
</li>
<li>
<p>ç¬”è€…ä¸ªäººåœ¨ç´ æè°ƒç ”æœŸé—´ç»å†è¿‡çš„ <code>N</code> æ¬¡æ¶‰åŠç®—æ³•çš„å‰ç«¯é¢è¯•ä¸­ï¼Œæœ‰1æ¬¡çœŸçš„è€ƒåˆ°äº†éœ€è¦ç”¨å †ç»“æ„è§£å†³çš„é—®é¢˜ï¼ˆè¿™é“é¢˜åœ¨ä¸‹é¢çš„è®²è§£ä¸­ä¹Ÿä¼šå‡ºç°ï¼‰ã€‚å½“æ—¶ç¬”è€…è¿˜ä¸çŸ¥é“å †çš„ç©æ³•ï¼Œç›´æ¥ç”¨<code>JS</code>çš„æ’åº<code>API</code>åšå‡ºæ¥äº†ã€‚äº‹åå’Œé¢è¯•å®˜èŠå¤©çš„æ—¶å€™ï¼Œçªç„¶è¢«ä»–è¦æ±‚ç”¨å †ç»“æ„å†åšä¸€éã€‚æœ€åè™½ç„¶åœ¨æ²¡å†™å‡ºæ¥çš„æƒ…å†µä¸‹æ‹¿åˆ°äº†<code>offer</code>ï¼Œä½†äº‹åæƒ³èµ·æ¥ï¼Œè¿˜æ˜¯éå¸¸åæ€•â€”â€”æ²¡æœ‰äººèƒ½é¢„çŸ¥è‡ªå·±ä¸‹ä¸€æ¬¡é‡åˆ°çš„é¢è¯•å®˜åˆ°åº•æ˜¯ä»€ä¹ˆè„¾æ°”ï¼Œæˆ‘ä»¬åªèƒ½å°½è‡ªå·±æ‰€èƒ½åœ°å»åšä¸‡å…¨çš„å‡†å¤‡ã€‚</p>
</li>
</ol>
<h2 data-id="heading-96">å‰ç½®çŸ¥è¯†ï¼šå®Œå…¨äºŒå‰æ ‘</h2>
<p>å®Œå…¨äºŒå‰æ ‘æ˜¯æŒ‡åŒæ—¶æ»¡è¶³ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶çš„äºŒå‰æ ‘ï¼š</p>
<ol>
<li>ä»ç¬¬ä¸€å±‚åˆ°å€’æ•°ç¬¬äºŒå±‚ï¼Œæ¯ä¸€å±‚éƒ½æ˜¯æ»¡çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸€å±‚çš„ç»“ç‚¹æ•°éƒ½è¾¾åˆ°äº†å½“å‰å±‚æ‰€èƒ½è¾¾åˆ°çš„æœ€å¤§å€¼</li>
<li>æœ€åä¸€å±‚çš„ç»“ç‚¹æ˜¯ä»å·¦åˆ°å³è¿ç»­æ’åˆ—çš„ï¼Œä¸å­˜åœ¨è·³è·ƒæ’åˆ—çš„æƒ…å†µï¼ˆä¹Ÿå°±æ˜¯è¯´è¿™ä¸€å±‚çš„æ‰€æœ‰ç»“ç‚¹éƒ½é›†ä¸­æ’åˆ—åœ¨æœ€å·¦è¾¹ï¼‰ã€‚</li>
</ol>
<p>å®Œå…¨äºŒå‰æ ‘å¯ä»¥æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/31/1726b51adec191fc~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1218&amp;h=1078&amp;s=73714&amp;e=jpg" alt="" loading="lazy"/>
ä¹Ÿå¯ä»¥æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/31/1726b53f668d2a89~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=802&amp;h=894&amp;s=53727&amp;e=png" alt="" loading="lazy"/></p>
<p>ä½†ä¸èƒ½æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/31/1726b5699b3d67bb~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1204&amp;h=948&amp;s=60229&amp;e=jpg" alt="" loading="lazy"/></p>
<p>æ›´ä¸èƒ½æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/31/1726b574e26782a3~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1198&amp;h=1176&amp;s=49307&amp;e=jpg" alt="" loading="lazy"/></p>
<p>æ³¨æ„ï¼Œå®Œå…¨äºŒå‰æ ‘ä¸­æœ‰ç€è¿™æ ·çš„ç´¢å¼•è§„å¾‹ï¼šå‡å¦‚æˆ‘ä»¬ä»å·¦åˆ°å³ã€ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡å¯¹å®Œå…¨äºŒå‰æ ‘ä¸­çš„ç»“ç‚¹ä»0å¼€å§‹è¿›è¡Œç¼–ç ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/31/1726b59096075d9e~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=998&amp;h=816&amp;s=51724&amp;e=png" alt="" loading="lazy"/>
é‚£ä¹ˆå¯¹äºç´¢å¼•ä¸º <code>n</code> çš„ç»“ç‚¹æ¥è¯´ï¼š</p>
<ol>
<li>ç´¢å¼•ä¸º <code>(n-1)/2</code> çš„ç»“ç‚¹æ˜¯å®ƒçš„çˆ¶ç»“ç‚¹</li>
<li>ç´¢å¼•<code> 2*n+1</code> çš„ç»“ç‚¹æ˜¯å®ƒçš„å·¦å­©å­ç»“ç‚¹</li>
<li>ç´¢ä¸ºå¼•<code> 2*n+2</code> çš„ç»“ç‚¹æ˜¯å®ƒçš„å³å­©å­ç»“ç‚¹</li>
</ol>
<h2 data-id="heading-97">ä»€ä¹ˆæ˜¯å †</h2>
<p>å †æ˜¯<strong>å®Œå…¨äºŒå‰æ ‘</strong>çš„ä¸€ç§ç‰¹ä¾‹ã€‚æ ¹æ®çº¦æŸè§„åˆ™çš„ä¸åŒï¼Œå †åˆåˆ†ä¸ºä¸¤ç§ï¼š</p>
<ol>
<li>å¤§é¡¶å †</li>
<li>å°é¡¶å †</li>
</ol>
<p>å¦‚æœå¯¹ä¸€æ£µå®Œå…¨äºŒå‰æ ‘æ¥è¯´ï¼Œå®ƒæ¯ä¸ªç»“ç‚¹çš„ç»“ç‚¹å€¼éƒ½ä¸å°äºå…¶å·¦å³å­©å­çš„ç»“ç‚¹å€¼ï¼Œè¿™æ ·çš„å®Œå…¨äºŒå‰æ ‘å°±å«åšâ€œå¤§é¡¶å †â€ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/31/1726b5a74a28f22e~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=680&amp;h=484&amp;s=26764&amp;e=png" alt="" loading="lazy"/>
è‹¥æ ‘ä¸­æ¯ä¸ªç»“ç‚¹å€¼éƒ½ä¸å¤§äºå…¶å·¦å³å­©å­çš„ç»“ç‚¹å€¼ï¼Œè¿™æ ·çš„å®Œå…¨äºŒå‰æ ‘å°±å«åšâ€œå°é¡¶å †â€</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/31/1726b5b1c6f65e49~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=786&amp;h=442&amp;s=26479&amp;e=png" alt="" loading="lazy"/></p>
<h2 data-id="heading-98">å †çš„åŸºæœ¬æ“ä½œï¼šä»¥å¤§é¡¶å †ä¸ºä¾‹</h2>
<p>å¤§é¡¶å †å’Œå°é¡¶å †é™¤äº†çº¦æŸæ¡ä»¶ä¸­çš„å¤§å°å…³ç³»è§„åˆ™å®Œå…¨ç›¸åä»¥å¤–ï¼Œå…¶å®ƒæ–¹é¢éƒ½ä¿æŒé«˜åº¦ä¸€è‡´ã€‚ç°åœ¨æˆ‘ä»¬ä»¥å¤§é¡¶å †ä¸ºä¾‹ï¼Œä¸€èµ·æ¥çœ‹çœ‹å †ç»“æ„æœ‰å“ªäº›ç©æ³•ã€‚</p>
<p>è¿™é‡Œæˆ‘ç»™å‡ºä¸€ä¸ªç°æˆçš„å¤§é¡¶å †ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/31/1726b5bc43da2b69~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=998&amp;h=762&amp;s=48091&amp;e=png" alt="" loading="lazy"/></p>
<p>å¾ˆå¤šæ—¶å€™ï¼Œä¸ºäº†è€ƒå¯Ÿä½ å¯¹å®Œå…¨äºŒå‰æ ‘ç´¢å¼•è§„å¾‹çš„æŒæ¡æƒ…å†µï¼Œé¢˜ç›®ä¸­ä¸å †ç»“æ„åŒæ—¶å‡ºç°çš„ï¼Œè¿˜æœ‰å®ƒçš„å±‚åºéå†åºåˆ—ï¼š</p>
<pre><code class="hljs language-js" lang="js">[<span class="hljs-number">9</span>, <span class="hljs-number">8</span>, <span class="hljs-number">6</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>]
</code></pre>
<p>ï¼ˆç°åœ¨èµ¶å¿«å›å»å¤ä¹ ä¸€ä¸‹å®Œå…¨äºŒå‰æ ‘çš„ç´¢å¼•è§„å¾‹ï¼Œæˆ‘ä»¬é©¬ä¸Šå†™ä»£ç è¦ç”¨åˆ°äº†ï¼‰</p>
<p>æˆ‘ä»¬éœ€è¦å…³æ³¨çš„åŠ¨ä½œæœ‰ä¸¤ä¸ªï¼š</p>
<ol>
<li>å¦‚ä½•å–å‡ºå †é¡¶å…ƒç´ ï¼ˆåˆ é™¤æ“ä½œï¼‰</li>
<li>å¾€å †é‡Œè¿½åŠ ä¸€ä¸ªå…ƒç´ ï¼ˆæ’å…¥æ“ä½œï¼‰</li>
</ol>
<p>è‡³äºå †çš„åˆå§‹åŒ–ï¼Œä¹Ÿåªä¸è¿‡æ˜¯ä»ç©ºå †å¼€å§‹ï¼Œé‡å¤æ‰§è¡ŒåŠ¨ä½œ2è€Œå·²ã€‚å› æ­¤ï¼Œä¸Šé¢è¿™ä¸¤ä¸ªåŠ¨ä½œå°±æ˜¯å †æ“ä½œçš„æ ¸å¿ƒã€‚</p>
<h3 data-id="heading-99">å–å‡ºå †é¡¶å…ƒç´ </h3>
<p>å–å‡ºå…ƒç´ æœ¬èº«å¹¶ä¸éš¾ï¼Œéš¾çš„æ˜¯å¦‚ä½•åœ¨åˆ é™¤å…ƒç´ çš„åŒæ—¶ï¼Œä¿æŒä½é˜Ÿçš„â€œå¤§é¡¶â€ç»“æ„ç‰¹æ€§ã€‚ä¸ºäº†åšåˆ°è¿™ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p>
<ol>
<li>ç”¨å †é‡Œçš„æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆå¯¹åº”å›¾ä¸­çš„æ•°å­—1ï¼‰æ›¿æ¢æ‰å †é¡¶å…ƒç´ ã€‚</li>
<li>å¯¹æ¯”æ–°çš„å †é¡¶å…ƒç´ ï¼ˆ1ï¼‰ä¸å…¶å·¦å³å­©å­çš„å€¼ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªå­©å­å¤§äºå †é¡¶å…ƒç´ ï¼Œåˆ™äº¤æ¢ä¸¤è€…çš„ä½ç½®ï¼š</li>
</ol>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/31/1726b600c6dc5536~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1000&amp;h=748&amp;s=45175&amp;e=png" alt="" loading="lazy"/>
äº¤æ¢åï¼Œç»§ç»­å‘ä¸‹å¯¹æ¯”1ä¸å½“å‰å·¦å³å­©å­çš„å€¼ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªå¤§äº1ï¼Œåˆ™äº¤æ¢ä¸¤è€…çš„ä½ç½®ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/31/1726b606e67443cb~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=954&amp;h=792&amp;s=45666&amp;e=png" alt="" loading="lazy"/>
é‡å¤è¿™ä¸ª<strong>å‘ä¸‹å¯¹æ¯”+äº¤æ¢</strong>çš„è¿‡ç¨‹ï¼Œç›´åˆ°æ— æ³•ç»§ç»­äº¤æ¢ä¸ºæ­¢ï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªç¬¦åˆâ€œå¤§é¡¶â€åŸåˆ™çš„æ–°çš„å †ç»“æ„ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/31/1726b612b4981b7c~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=974&amp;h=750&amp;s=39531&amp;e=png" alt="" loading="lazy"/></p>
<p>ä¸Šè¿°è¿™ä¸ªåå¤<strong>å‘ä¸‹å¯¹æ¯”+äº¤æ¢</strong>çš„è¿‡ç¨‹ï¼Œç”¨ç¼–ç å®ç°å¦‚ä¸‹ï¼ˆä»”ç»†çœ‹æ³¨é‡Šï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å…¥å‚æ˜¯å †å…ƒç´ åœ¨æ•°ç»„é‡Œçš„ç´¢å¼•èŒƒå›´ï¼Œlowè¡¨ç¤ºä¸‹ç•Œï¼Œhighè¡¨ç¤ºä¸Šç•Œ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">downHeap</span>(<span class="hljs-params">low, high</span>) {
    <span class="hljs-comment">// åˆå§‹åŒ– i ä¸ºå½“å‰ç»“ç‚¹ï¼Œj ä¸ºå½“å‰ç»“ç‚¹çš„å·¦å­©å­</span>
    <span class="hljs-keyword">let</span> i=low,j=i*<span class="hljs-number">2</span>+<span class="hljs-number">1</span> 
    <span class="hljs-comment">// å½“ j ä¸è¶…è¿‡ä¸Šç•Œæ—¶ï¼Œé‡å¤å‘ä¸‹å¯¹æ¯”+äº¤æ¢çš„æ“ä½œ</span>
    <span class="hljs-keyword">while</span>(j &lt;= high) {
        <span class="hljs-comment">// å¦‚æœå³å­©å­æ¯”å·¦å­©å­æ›´å¤§ï¼Œåˆ™ç”¨å³å­©å­å’Œæ ¹ç»“ç‚¹æ¯”è¾ƒ</span>
        <span class="hljs-keyword">if</span>(j+<span class="hljs-number">1</span> &lt;= high &amp;&amp; heap[j+<span class="hljs-number">1</span>] &gt; heap[j]) {
            j = j+<span class="hljs-number">1</span>
        }
        
        <span class="hljs-comment">// è‹¥å½“å‰ç»“ç‚¹æ¯”å­©å­ç»“ç‚¹å°ï¼Œåˆ™äº¤æ¢ä¸¤è€…çš„ä½ç½®ï¼ŒæŠŠè¾ƒå¤§çš„ç»“ç‚¹â€œæ‹±ä¸Šå»â€</span>
        <span class="hljs-keyword">if</span>(heap[i] &lt; heap[j]) {
            <span class="hljs-comment">// äº¤æ¢ä½ç½®</span>
            <span class="hljs-keyword">const</span> temp = heap[j]  
            heap[j] = heap[i]  
            heap[i] = temp
            
            <span class="hljs-comment">// i æ›´æ–°ä¸ºè¢«äº¤æ¢çš„å­©å­ç»“ç‚¹çš„ç´¢å¼•</span>
            i=j  
            <span class="hljs-comment">// j æ›´æ–°ä¸ºå­©å­ç»“ç‚¹çš„å·¦å­©å­çš„ç´¢å¼•</span>
            j=j*<span class="hljs-number">2</span>+<span class="hljs-number">1</span>
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">break</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-100">å¾€å †é‡Œè¿½åŠ ä¸€ä¸ªå…ƒç´ </h3>
<p>å½“æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ è¿›å †çš„æ—¶å€™ï¼Œæˆ‘ä»¬åŒæ ·éœ€è¦è€ƒè™‘å †ç»“æ„çš„æ’åºåŸåˆ™ï¼š</p>
<ol>
<li>æ–°æ¥çš„æ•°æ®é¦–å…ˆè¦è¿½åŠ åˆ°å½“å‰å †é‡Œæœ€åä¸€ä¸ªå…ƒç´ çš„åé¢ã€‚æ¯”å¦‚æˆ‘ç°åœ¨è¦æ–°å¢ä¸€ä¸ª10ï¼Œå®ƒå°±åº”è¯¥æ’åœ¨æœ€åä¸€å±‚çš„æœ€åä¸€ä¸ªä½ç½®ï¼š</li>
</ol>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/31/1726b62cea61942c~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=962&amp;h=800&amp;s=52650&amp;e=png" alt="" loading="lazy"/>
2. ä¸æ–­è¿›è¡Œ<strong>å‘ä¸Šå¯¹æ¯”+äº¤æ¢</strong>çš„æ“ä½œï¼šå¦‚æœå‘ç°10æ¯”çˆ¶ç»“ç‚¹çš„ç»“ç‚¹å€¼è¦å¤§ï¼Œé‚£ä¹ˆå°±å’Œçˆ¶ç»“ç‚¹çš„å…ƒç´ ç›¸äº’äº¤æ¢ï¼Œå†æ¥ç€å¾€ä¸Šè¿›è¡Œæ¯”è¾ƒï¼Œç›´åˆ°æ— æ³•å†ç»§ç»­äº¤æ¢ä¸ºæ­¢ã€‚é¦–å…ˆè¢«æ¯”ä¸‹å»çš„æ˜¯å€¼ä¸º6çš„ç›´æ¥çˆ¶ç»“ç‚¹ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/31/1726b63d54377138~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=964&amp;h=754&amp;s=58905&amp;e=png" alt="" loading="lazy"/>
æ¥ç€ç»§ç»­å¾€ä¸Šæ‰¾ï¼Œå‘ç°10æ¯”æ ¹ç»“ç‚¹9è¿˜è¦å¤§ï¼Œäºæ˜¯ç»§ç»­è¿›è¡Œäº¤æ¢ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/31/1726b65002f6213a~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1012&amp;h=774&amp;s=61578&amp;e=png" alt="" loading="lazy"/>
æ ¹ç»“ç‚¹è¢«æ¢æ‰åï¼Œå†ä¹Ÿæ— æ³•å‘ä¸Šæ¯”è¾ƒäº†ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å·²ç»å¾—åˆ°äº†ä¸€ä¸ªè¿½åŠ è¿‡æ•°å­—10çš„æ–°çš„å †ç»“æ„ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/5/31/1726b65707a61d93~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1020&amp;h=750&amp;s=52641&amp;e=png" alt="" loading="lazy"/></p>
<p>ä¸Šè¿°è¿™ä¸ªåå¤<strong>å‘ä¸Šå¯¹æ¯”+äº¤æ¢</strong>çš„è¿‡ç¨‹ï¼Œç”¨ç¼–ç å®ç°å¦‚ä¸‹ï¼ˆä»”ç»†çœ‹æ³¨é‡Šï¼‰ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å…¥å‚æ˜¯å †å…ƒç´ åœ¨æ•°ç»„é‡Œçš„ç´¢å¼•èŒƒå›´ï¼Œlowè¡¨ç¤ºä¸‹ç•Œï¼Œhighè¡¨ç¤ºä¸Šç•Œ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">upHeap</span>(<span class="hljs-params">low, high</span>) {
    <span class="hljs-comment">// åˆå§‹åŒ– iï¼ˆå½“å‰ç»“ç‚¹ç´¢å¼•ï¼‰ä¸ºä¸Šç•Œ</span>
    <span class="hljs-keyword">let</span> i = high  
    <span class="hljs-comment">// åˆå§‹åŒ– j ä¸º i çš„çˆ¶ç»“ç‚¹</span>
    <span class="hljs-keyword">let</span> j = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((i-<span class="hljs-number">1</span>)/<span class="hljs-number">2</span>)  
    <span class="hljs-comment">// å½“ j ä¸é€¾è¶Šä¸‹ç•Œæ—¶ï¼Œé‡å¤å‘ä¸Šå¯¹æ¯”+äº¤æ¢çš„è¿‡ç¨‹</span>
    <span class="hljs-keyword">while</span>(j&gt;=low)  {
        <span class="hljs-comment">// è‹¥å½“å‰ç»“ç‚¹æ¯”çˆ¶ç»“ç‚¹å¤§</span>
        <span class="hljs-keyword">if</span>(heap[j]&lt;heap[i]) {
            <span class="hljs-comment">// äº¤æ¢å½“å‰ç»“ç‚¹ä¸çˆ¶ç»“ç‚¹ï¼Œä¿æŒçˆ¶ç»“ç‚¹æ˜¯è¾ƒå¤§çš„ä¸€ä¸ª</span>
            <span class="hljs-keyword">const</span> temp = heap[j] 
            heap[j] = heap[i]  
            heap[i] = temp
            
            <span class="hljs-comment">// iæ›´æ–°ä¸ºè¢«äº¤æ¢çˆ¶ç»“ç‚¹çš„ä½ç½®</span>
            i=j   
            <span class="hljs-comment">// jæ›´æ–°ä¸ºçˆ¶ç»“ç‚¹çš„çˆ¶ç»“ç‚¹</span>
            j=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((i-<span class="hljs-number">1</span>)/<span class="hljs-number">2</span>)  
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">break</span>
        }
    }
}
</code></pre>
<p>ä¸Šé¢è¿™ä¸¤ä¸ªè¿‡ç¨‹ï¼Œéœ€è¦å¤§å®¶åå¤ç†è§£ã€æ·±åˆ»è®°å¿†ã€‚å°¤å…¶æ˜¯è¦è®°ä½è¿™å‡ ä¸ªå…³é”®å­—ï¼šâ€œ<strong>åˆ é™¤</strong>â€å°±æ˜¯â€œ<strong>å‘ä¸‹æ¯”è¾ƒ+äº¤æ¢</strong>â€ï¼Œè€Œâ€œ<strong>æ·»åŠ </strong>â€åˆ™æ˜¯â€œ<strong>å‘ä¸Šæ¯”è¾ƒ+äº¤æ¢</strong>â€ã€‚</p>
<pre><code class="hljs language-!" lang="!">è¿™é‡Œå†™ç»™å¤§å®¶çš„ä¸¤æ®µä»£ç ï¼Œåœ¨å®æˆ˜ä¸­å…·å¤‡ä¸€å®šçš„é€šç”¨æ€§ã€‚å¸Œæœ›å¤§å®¶èƒ½å¤Ÿå……åˆ†ç†Ÿæ‚‰ï¼Œåœ¨ç†è§£çš„åŸºç¡€ä¸Šè®°å¿†ã€‚ä¸‹æ¬¡å¦‚æœçœŸçš„ç”¨åˆ°ï¼Œäº‰å–èƒ½å¤Ÿé»˜å†™ã€‚
</code></pre>
<h2 data-id="heading-101">å †ç»“æ„åœ¨æ’åºä¸­çš„åº”ç”¨â€”â€”ä¼˜å…ˆé˜Ÿåˆ—</h2>
<p>åœ¨è®¤è¯†ä¼˜å…ˆé˜Ÿåˆ—ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€é“é¢˜ï¼š</p>
<blockquote>
<p>é¢˜ç›®æè¿°ï¼šåœ¨æœªæ’åºçš„æ•°ç»„ä¸­æ‰¾åˆ°ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æ’åºåçš„ç¬¬ k ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ k ä¸ªä¸åŒçš„å…ƒç´ ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹ 1:<br/>
è¾“å…¥: [3,2,1,5,6,4] å’Œ k = 2<br/>
è¾“å‡º: 5</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹ 2:
è¾“å…¥: [3,2,3,1,2,4,5,5,6] å’Œ k = 4<br/>
è¾“å‡º: 4</p>
</blockquote>
<blockquote>
<p>è¯´æ˜:<br/>
ä½ å¯ä»¥å‡è®¾ k æ€»æ˜¯æœ‰æ•ˆçš„ï¼Œä¸” 1 â‰¤ k â‰¤ æ•°ç»„çš„é•¿åº¦ã€‚</p>
</blockquote>
<h3 data-id="heading-102">æ€è·¯åˆ†æ</h3>
<p>è¿™é“é¢˜çš„è¯‰æ±‚éå¸¸ç›´æ¥â€”â€”è¦æ±‚ä½ å¯¹ç»™å®šæ•°ç»„è¿›è¡Œæ’åºã€‚å…³äºæ’åºï¼Œæˆ‘ä»¬åœ¨ä¸‹ä¸€èŠ‚ä¼šå±•å¼€è®²è§£Nç§æ’åºç®—æ³•çš„å®ç°æ–¹å¼ï¼ŒåŒ…æ‹¬å¿«é€Ÿæ’åºã€å½’å¹¶æ’åºã€é€‰æ‹©æ’åºç­‰ç­‰ã€‚<strong>è¿™äº›æ’åºæœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹â€”â€”åœ¨æ’åºçš„è¿‡ç¨‹ä¸­ï¼Œä½ å¾ˆéš¾å»æ˜ç¡®å…ƒç´ ä¹‹é—´çš„å¤§å°å…³ç³»</strong>ï¼Œåªæœ‰åœ¨æ’åºå½»åº•å®Œæˆåï¼Œä½ æ‰èƒ½æ‰¾å‡ºç¬¬ k å¤§çš„å…ƒç´ æ˜¯å“ªä¸ªã€‚</p>
<p>å¯¹æ•´ä¸ªæ•°ç»„è¿›è¡Œæ’åºã€ç„¶åæŒ‰é¡ºåºè¿”å›ç´¢å¼•ä¸º<code>k-1</code>çš„å…ƒç´ ï¼Œè¿™æ­£æ˜¯ç¬”è€…åœ¨é¢è¯•åœºä¸Šå†™å‡ºçš„ç¬¬ä¸€ä¸ªè§£æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
* <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums</span>
* <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">k</span>
* <span class="hljs-doctag">@return</span> {<span class="hljs-type">number</span>}
*/</span>
<span class="hljs-keyword">const</span> findKthLargest = <span class="hljs-keyword">function</span>(<span class="hljs-params">nums, k</span>) {
 <span class="hljs-comment">// å°†æ•°ç»„é€†åº</span>
 <span class="hljs-keyword">const</span> sorted = nums.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a,b</span>)=&gt;</span> {
     <span class="hljs-keyword">return</span> b-a
 })
 <span class="hljs-comment">// å–ç¬¬kå¤§çš„å…ƒç´ </span>
 <span class="hljs-keyword">return</span> sorted[k-<span class="hljs-number">1</span>]
};;
</code></pre>
<p>æ˜¯çš„ï¼Œä½ æ²¡æœ‰çœ‹é”™ï¼Œæˆ‘ç”šè‡³æ²¡æœ‰æ‰‹åŠ¨å®ç°ä»»ä½•ä¸€ä¸ªæ’åºç®—æ³•ï¼Œè€Œæ˜¯ç›´æ¥è°ƒäº† <code>JS</code> çš„<code>sort</code> æ–¹æ³•ã€‚<br/>
å¤§å®¶ä¸è¦ç¬‘ï¼Œè¿™ä¸ª<code>sort</code>æ–¹æ³•çœŸçš„å¯ä»¥æ•‘å‘½ã€‚å¦‚æœä½ ç†è§£ä¸äº†æœ¬èŠ‚æ¥ä¸‹æ¥è¦è®²çš„åŸºäºå †ç»“æ„çš„è§£æ³•ï¼Œåˆæ²¡ä¿¡å¿ƒè®°ä½åé¢ä¸¤èŠ‚æ¶‰åŠçš„å„ç§å„æ ·çš„èŠ±å¼æ’åºç®—æ³•ã€‚é‚£ä¹ˆä½ ä¸€å®šè¦ç´§ç´§æŠ“ä½è¿™ä¸ª<code>sort</code> <code>API</code>ã€‚é¢è¯•çš„æ—¶å€™ï¼Œä¸‡ä¸€è¢«é—®åˆ°â€œä½ ä¸ºä»€ä¹ˆä¸ä¼šå†™xxæ’åºç®—æ³•â€ï¼Œè¿™æ—¶å€™ç”¨ä¸€å¥â€œæˆ‘ç”¨<code>sort</code>æ–¹æ³•æ¯”è¾ƒå¤šï¼Œä¸å–œæ¬¢è‡ªå·±é€ è½®å­â€ç³Šå¼„è¿‡å»ï¼Œè¿˜æ˜¯æœ‰ä¸€å®šæˆåŠŸç‡çš„ã€‚</p>
<p>å¥½äº†ï¼Œå­¦æ¸£å°å‰§åœºç»“æŸã€‚æˆ‘ä»¬ç»§ç»­æ¥çœ‹è¿™ä¸ªé¢˜ï¼šæœ‰æ²¡æœ‰ä¸€ç§æ’åºæ–¹æ³•èƒ½å¤Ÿåœ¨ä¸å¯¹æ‰€æœ‰å…ƒç´ è¿›è¡Œæ’åºçš„æƒ…å†µä¸‹ï¼Œå¸®æˆ‘ä»¬æå‰å®šä½åˆ°ç¬¬ k å¤§çš„å…ƒç´ æ˜¯å“ªä¸ªå‘¢ï¼Ÿå½“ç„¶æœ‰â€”â€”æ„å»ºä¸€ä¸ªå †ç»“æ„å°±èƒ½è§£å†³é—®é¢˜ï¼</p>
<p>å¯¹äºè¿™é“é¢˜æ¥è¯´ï¼Œè¦æƒ³æ±‚å‡ºç¬¬ k å¤§çš„å…ƒç´ ï¼Œæˆ‘ä»¬å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå¤§å°ä¸º k çš„å°é¡¶å †ã€‚è¿™ä¸ªå †çš„åˆå§‹åŒ–è¿‡ç¨‹å¯ä»¥é€šè¿‡éå†å¹¶æ’å…¥æ•°ç»„çš„å‰ k ä¸ªå…ƒç´ æ¥å®ç°ã€‚å½“å †è¢«å¡«æ»¡åï¼Œå†å°è¯•ç”¨æ•°ç»„çš„ç¬¬ k+1 åˆ°æœ«å°¾çš„è¿™éƒ¨åˆ†å…ƒç´ æ¥æ›´æ–°è¿™ä¸ªå°é¡¶å †ï¼Œæ›´æ–°è¿‡ç¨‹ä¸­éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š</p>
<ul>
<li>è‹¥éå†åˆ°çš„æ•°å­—æ¯”å°é¡¶å †çš„å †é¡¶å…ƒç´ å€¼å¤§ï¼Œåˆ™ç”¨è¯¥æ•°å­—æ›¿æ¢æ‰å°é¡¶å †çš„å †é¡¶å…ƒç´ å€¼</li>
<li>è‹¥éå†åˆ°çš„æ•°å­—æ¯”å°é¡¶å †çš„å †é¡¶å…ƒç´ å€¼å°ï¼Œåˆ™å¿½ç•¥è¿™ä¸ªæ•°å­—</li>
</ul>
<p>ä»”ç»†æƒ³æƒ³ï¼Œä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿå‡è®¾æ•°ç»„ä¸­å…ƒç´ çš„æ€»ä¸ªæ•°æ˜¯ <code>n</code>ï¼Œé‚£ä¹ˆï¼š</p>
<ul>
<li>ç»´æŠ¤å¤§å°ä¸º <code>k</code> çš„å°é¡¶å †çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†ç¡®ä¿å †ä¸­é™¤äº†å †é¡¶å…ƒç´ ä¹‹å¤–çš„ <code>k-1</code> ä¸ªå…ƒç´ å€¼éƒ½å¤§äºå †é¡¶å…ƒç´ ã€‚</li>
<li>å½“æˆ‘ä»¬ç”¨æ•°ç»„çš„<code>[0, k-1]</code>åŒºé—´é‡Œçš„ æ•°å­—åˆå§‹åŒ–å®Œæˆè¿™ä¸ªå †æ—¶ï¼Œå †é¡¶å…ƒç´ å€¼å°±å¯¹åº”ç€å‰ <code>k</code> ä¸ªæ•°å­—é‡Œçš„æœ€å°å€¼ã€‚</li>
<li>ç´§æ¥ç€æˆ‘ä»¬å°è¯•ç”¨ç´¢å¼•åŒºé—´ä¸º [k, n-1]çš„æ•°å­—æ¥æ›´æ–°å †ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œ<strong>åªå…è®¸æ¯”å †é¡¶å…ƒç´ å¤§çš„å€¼è¿›å…¥å †</strong>ã€‚è¿™ä¸€æ³¢æ“ä½œè¿‡åï¼Œå †é‡Œçš„ <code>k</code> ä¸ªæ•°å­—å°±æ˜¯æ•´ä¸ªæ•°ç»„ä¸­æœ€å¤§çš„ <code>k</code> ä¸ªæ•°å­—ï¼Œè€Œå †é¡¶çš„æ•°å­—æ­£æ˜¯è¿™ k ä¸ªæ•°ä¸­æœ€å°çš„é‚£ä¸ªã€‚äºæ˜¯æœ¬é¢˜å¾—è§£ã€‚</li>
</ul>
<p>æˆ‘ä»¬ç”¨ç¤ºä¾‹ä¸­çš„<code>[3,2,1,5,6,4]</code>è¿™ä¸ªåºåˆ—æ¥æ¨¡æ‹Ÿä¸€ä¸‹ä¸Šé¢çš„è¿‡ç¨‹ã€‚åˆå§‹åŒ–ä¸€ä¸ªè§„æ¨¡ä¸º <code>k=2</code> çš„å°é¡¶å †ï¼Œå®ƒé•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">    2
   /
  3
</span></code></pre>
<p>ç”¨<code>[k, n-1]</code>ç´¢å¼•èŒƒå›´å†…çš„å…ƒç´ æ¥æ›´æ–°è¿™ä¸ªå°é¡¶å †ï¼šé¦–å…ˆæ˜¯ç”¨ç´¢å¼•ä¸º2çš„æ•°å­—1æ¥è¯•ï¼Œå‘ç°1æ¯”å †é¡¶çš„2è¿˜è¦å°ï¼Œå¿½ç•¥å®ƒã€‚æ¥ç€ç”¨ç´¢å¼•ä¸º3çš„5æ¥è¯•ï¼Œ5æ˜¯æ¯”2å¤§çš„ï¼Œç”¨å®ƒæŠŠ2æ¢æ‰ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">    5
   /
  3
</span></code></pre>
<p>ç»è¿‡å‘ä¸‹å¯¹æ¯”+è°ƒæ•´ï¼Œæ–°çš„å †é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-code">    3
   /
  5
</span></code></pre>
<p>æˆ‘ä»¬å‘ç°ï¼Œç°åœ¨è¿™ä¸ªå †é‡Œé¢ä¿å­˜çš„æ­£æ˜¯ç´¢å¼•èŒƒå›´[0, 3]å†…çš„å‰ <code>k</code> ä¸ªæœ€å¤§çš„æ•°ã€‚ä»¥æ­¤ç±»æ¨ï¼Œå½“å¯¹æ•°ç»„ä¸­æœ€åä¸€ä¸ªå…ƒç´ æ‰§è¡Œè¿‡å°è¯•å…¥å †çš„é€»è¾‘åï¼Œå †é‡Œé¢ä¿å­˜çš„å°±æ˜¯æ•´ä¸ªæ•°ç»„èŒƒå›´å†…çš„å‰ <code>k</code> ä¸ªæœ€å¤§çš„æ•°ã€‚</p>
<p>åœ¨è§£é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œä¸å‡ºæ‰€æ–™åœ°ç”¨åˆ°äº†ä¸Šæ–‡ä¸­æåŠçš„<code>downHeap</code>æ–¹æ³•å’Œ<code>upHeap</code> æ–¹æ³•ã€‚ä¸è¿‡å¤§å®¶åƒä¸‡ä¸è¦ç›´æ¥å¤åˆ¶ç²˜è´´ï¼Œåˆ«å¿˜äº†ï¼Œå‰é¢æˆ‘ä»¬æ˜¯ç”¨å¤§é¡¶å †ä¸¾ä¾‹ï¼Œè¿™é“é¢˜éœ€è¦æ„é€ çš„æ˜¯å°é¡¶å †â€”â€”è®°å¾—è°ƒæ•´å¤§å°å…³ç³»è§„åˆ™ã€‚</p>
<p>ï¼ˆä¸€åˆ‡å°½åœ¨æ³¨é‡Šä¸­ï¼Œä¸è¦åªè®°å¾—æŠ„ä»£ç å•Šå¹´è½»äººï¼‰</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
* <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">nums</span>
* <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">k</span>
* <span class="hljs-doctag">@return</span> {<span class="hljs-type">number</span>}
*/</span>
<span class="hljs-keyword">const</span> findKthLargest = <span class="hljs-keyword">function</span>(<span class="hljs-params">nums, k</span>) {
   <span class="hljs-comment">// åˆå§‹åŒ–ä¸€ä¸ªå †æ•°ç»„</span>
   <span class="hljs-keyword">const</span> heap = []  
   <span class="hljs-comment">// nè¡¨ç¤ºå †æ•°ç»„é‡Œå½“å‰æœ€åä¸€ä¸ªå…ƒç´ çš„ç´¢å¼•</span>
   <span class="hljs-keyword">let</span> n = <span class="hljs-number">0</span>
   <span class="hljs-comment">// ç¼“å­˜ nums çš„é•¿åº¦</span>
   <span class="hljs-keyword">const</span> len = nums.<span class="hljs-property">length</span>  
   <span class="hljs-comment">// åˆå§‹åŒ–å¤§å°ä¸º k çš„å †</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title function_">createHeap</span>(<span class="hljs-params"/>) {
       <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;k;i++) {
           <span class="hljs-comment">// é€ä¸ªå¾€å †é‡Œæ’å…¥æ•°ç»„ä¸­çš„æ•°å­—</span>
           <span class="hljs-title function_">insert</span>(nums[i])
       }
   }
   
   <span class="hljs-comment">// å°è¯•ç”¨ [k, n-1] åŒºé—´çš„å…ƒç´ æ›´æ–°å †</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title function_">updateHeap</span>(<span class="hljs-params"/>) {
       <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=k;i&lt;len;i++) {
           <span class="hljs-comment">// åªæœ‰æ¯”å †é¡¶å…ƒç´ å¤§çš„æ‰æœ‰èµ„æ ¼è¿›å †</span>
           <span class="hljs-keyword">if</span>(nums[i]&gt;heap[<span class="hljs-number">0</span>]) {
               <span class="hljs-comment">// ç”¨è¾ƒå¤§æ•°å­—æ›¿æ¢å †é¡¶æ•°å­—</span>
               heap[<span class="hljs-number">0</span>] = nums[i]  
               <span class="hljs-comment">// é‡å¤å‘ä¸‹å¯¹æ¯”+äº¤æ¢çš„é€»è¾‘</span>
               <span class="hljs-title function_">downHeap</span>(<span class="hljs-number">0</span>, k)
           }
       }
   }
   
   <span class="hljs-comment">// å‘ä¸‹å¯¹æ¯”å‡½æ•°</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title function_">downHeap</span>(<span class="hljs-params">low, high</span>) {
       <span class="hljs-comment">// å…¥å‚æ˜¯å †å…ƒç´ åœ¨æ•°ç»„é‡Œçš„ç´¢å¼•èŒƒå›´ï¼Œlowè¡¨ç¤ºä¸‹ç•Œï¼Œhighè¡¨ç¤ºä¸Šç•Œ</span>
       <span class="hljs-keyword">let</span> i=low,j=i*<span class="hljs-number">2</span>+<span class="hljs-number">1</span> 
       <span class="hljs-comment">// å½“ j ä¸è¶…è¿‡ä¸Šç•Œæ—¶ï¼Œé‡å¤å‘ä¸‹å¯¹æ¯”+äº¤æ¢çš„æ“ä½œ</span>
       <span class="hljs-keyword">while</span>(j&lt;=high) {
           <span class="hljs-comment">// // å¦‚æœå³å­©å­æ¯”å·¦å­©å­æ›´å°ï¼Œåˆ™ç”¨å³å­©å­å’Œæ ¹ç»“ç‚¹æ¯”è¾ƒ</span>
           <span class="hljs-keyword">if</span>(j+<span class="hljs-number">1</span>&lt;=high &amp;&amp; heap[j+<span class="hljs-number">1</span>]&lt;heap[j]) {
               j = j+<span class="hljs-number">1</span>
           }
           
           <span class="hljs-comment">// è‹¥å½“å‰ç»“ç‚¹æ¯”å­©å­ç»“ç‚¹å¤§ï¼Œåˆ™äº¤æ¢ä¸¤è€…çš„ä½ç½®ï¼ŒæŠŠè¾ƒå°çš„ç»“ç‚¹â€œæ‹±ä¸Šå»â€</span>
           <span class="hljs-keyword">if</span>(heap[i] &gt; heap[j]) {
               <span class="hljs-comment">// äº¤æ¢ä½ç½®</span>
               <span class="hljs-keyword">const</span> temp = heap[j]  
               heap[j] = heap[i]  
               heap[i] = temp
               
               <span class="hljs-comment">// i æ›´æ–°ä¸ºè¢«äº¤æ¢çš„å­©å­ç»“ç‚¹çš„ç´¢å¼•</span>
               i=j  
               <span class="hljs-comment">// j æ›´æ–°ä¸ºå­©å­ç»“ç‚¹çš„å·¦å­©å­çš„ç´¢å¼•</span>
               j=j*<span class="hljs-number">2</span>+<span class="hljs-number">1</span>
           } <span class="hljs-keyword">else</span> {
               <span class="hljs-keyword">break</span>
           }
       }
   }
   
   <span class="hljs-comment">// å…¥å‚æ˜¯å †å…ƒç´ åœ¨æ•°ç»„é‡Œçš„ç´¢å¼•èŒƒå›´ï¼Œlowè¡¨ç¤ºä¸‹ç•Œï¼Œhighè¡¨ç¤ºä¸Šç•Œ</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title function_">upHeap</span>(<span class="hljs-params">low, high</span>) {
       <span class="hljs-comment">// åˆå§‹åŒ– iï¼ˆå½“å‰ç»“ç‚¹ç´¢å¼•ï¼‰ä¸ºä¸Šç•Œ</span>
       <span class="hljs-keyword">let</span> i = high  
       <span class="hljs-comment">// åˆå§‹åŒ– j ä¸º i çš„çˆ¶ç»“ç‚¹</span>
       <span class="hljs-keyword">let</span> j = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((i-<span class="hljs-number">1</span>)/<span class="hljs-number">2</span>)  
       <span class="hljs-comment">// å½“ j ä¸é€¾è¶Šä¸‹ç•Œæ—¶ï¼Œé‡å¤å‘ä¸Šå¯¹æ¯”+äº¤æ¢çš„è¿‡ç¨‹</span>
       <span class="hljs-keyword">while</span>(j&gt;=low)  {
           <span class="hljs-comment">// è‹¥å½“å‰ç»“ç‚¹æ¯”çˆ¶ç»“ç‚¹å°</span>
           <span class="hljs-keyword">if</span>(heap[j]&gt;heap[i]) {
               <span class="hljs-comment">// äº¤æ¢å½“å‰ç»“ç‚¹ä¸çˆ¶ç»“ç‚¹ï¼Œä¿æŒçˆ¶ç»“ç‚¹æ˜¯è¾ƒå°çš„ä¸€ä¸ª</span>
               <span class="hljs-keyword">const</span> temp = heap[j] 
               heap[j] = heap[i]  
               heap[i] = temp
               
               <span class="hljs-comment">// iæ›´æ–°ä¸ºè¢«äº¤æ¢çˆ¶ç»“ç‚¹çš„ä½ç½®</span>
               i=j   
               <span class="hljs-comment">// jæ›´æ–°ä¸ºçˆ¶ç»“ç‚¹çš„çˆ¶ç»“ç‚¹</span>
               j=<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>((i-<span class="hljs-number">1</span>)/<span class="hljs-number">2</span>)  
           } <span class="hljs-keyword">else</span> {
               <span class="hljs-keyword">break</span>
           }
       }
   }

   <span class="hljs-comment">// æ’å…¥æ“ä½œ=å°†å…ƒç´ æ·»åŠ åˆ°å †å°¾éƒ¨+å‘ä¸Šè°ƒæ•´å…ƒç´ çš„ä½ç½®</span>
   <span class="hljs-keyword">function</span> <span class="hljs-title function_">insert</span>(<span class="hljs-params">x</span>) {
       heap[n] = x  
       <span class="hljs-title function_">upHeap</span>(<span class="hljs-number">0</span>, n)
       n++
   }
   
   <span class="hljs-comment">// è°ƒç”¨createHeapåˆå§‹åŒ–å…ƒç´ ä¸ªæ•°ä¸ºkçš„é˜Ÿ</span>
   <span class="hljs-title function_">createHeap</span>()
   <span class="hljs-comment">// è°ƒç”¨updateHeapæ›´æ–°å †çš„å†…å®¹ï¼Œç¡®ä¿æœ€åå †é‡Œä¿ç•™çš„æ˜¯æœ€å¤§çš„kä¸ªå…ƒç´ </span>
   <span class="hljs-title function_">updateHeap</span>()
   <span class="hljs-comment">// æœ€åå †é¡¶ç•™ä¸‹çš„å°±æ˜¯æœ€å¤§çš„kä¸ªå…ƒç´ ä¸­æœ€å°çš„é‚£ä¸ªï¼Œä¹Ÿå°±æ˜¯ç¬¬kå¤§çš„å…ƒç´ </span>
   <span class="hljs-keyword">return</span> heap[<span class="hljs-number">0</span>]
};
</code></pre>
<h3 data-id="heading-103">ç¼–ç å¤ç›˜</h3>
<p>ä¸Šé¢è¿™ä¸ªé¢˜è§£ä¸­å‡ºç°çš„ <code>heap</code> æ•°ç»„ï¼Œå°±æ˜¯ä¸€ä¸ªä¼˜å…ˆé˜Ÿåˆ—ã€‚<br/>
ä¼˜å…ˆé˜Ÿåˆ—çš„æœ¬è´¨æ˜¯äºŒå‰å †ç»“æ„ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<ul>
<li>é˜Ÿåˆ—çš„å¤´éƒ¨å…ƒç´ ï¼Œä¹Ÿå³ç´¢å¼•ä¸º0çš„å…ƒç´ ï¼Œå°±æ˜¯æ•´ä¸ªæ•°ç»„é‡Œçš„æœ€å€¼â€”â€”æœ€å¤§å€¼æˆ–è€…æœ€å°å€¼</li>
<li>å¯¹äºç´¢å¼•ä¸º <code>i</code> çš„å…ƒç´ æ¥è¯´ï¼Œå®ƒçš„çˆ¶ç»“ç‚¹ä¸‹æ ‡æ˜¯ <code>(i-1)/2</code>ï¼ˆä¸Šé¢å’±ä»¬è®²è¿‡äº†ï¼Œè¿™ä¸å®Œå…¨äºŒå‰æ ‘çš„ç»“æ„ç‰¹æ€§æœ‰å…³ï¼‰</li>
<li>å¯¹äºç´¢å¼•ä¸º <code>i</code> çš„å…ƒç´ æ¥è¯´ï¼Œå®ƒçš„å·¦å­©å­ä¸‹æ ‡åº”ä¸º<code>2*i+1</code>ï¼Œå³å­©å­ä¸‹æ ‡åº”ä¸º<code>2*i+2</code>ã€‚</li>
</ul>
<p>å½“é¢˜ç›®ä¸­å‡ºç°ç±»ä¼¼äºâ€œç¬¬<code>k</code>å¤§â€æˆ–è€…â€œç¬¬<code>k</code>é«˜â€œè¿™æ ·çš„å…³é”®å­—æ—¶ï¼Œå°±æ˜¯åœ¨æš—ç¤ºä½ ç”¨ä¼˜å…ˆé˜Ÿåˆ—/å †ç»“æ„æ¥åšé¢˜â€”â€”è¿™æ ·çš„æ‰‹æ³•å¯ä»¥å…è®¸æˆ‘ä»¬åœ¨ä¸å¯¹åºåˆ—è¿›è¡Œå®Œå…¨æ’åºçš„æƒ…å†µä¸‹ï¼Œæ‰¾åˆ°ç¬¬ <code>k</code> ä¸ªæœ€å€¼ã€‚</p>
<p>åœ¨å…¶å®ƒè¯­è¨€çš„ç®—æ³•é¢è¯•ä¸­ï¼Œä¼˜å…ˆé˜Ÿåˆ—å¯ä»¥ç›´æ¥å€ŸåŠ©è¯­è¨€æœ¬èº«æä¾›çš„æ•°æ®ç»“æ„æ¥å®ç°ï¼ˆæ¯”å¦‚<code>JAVA</code>ä¸­çš„<code>priority_queue</code>ï¼‰ã€‚ä½†åœ¨ <code>JS</code> ä¸­ï¼Œæˆ‘ä»¬åªèƒ½æ‰‹åŠ¨é€ è½®å­ã€‚å› æ­¤ï¼Œä¼˜å…ˆé˜Ÿåˆ—åœ¨å‰ç«¯ç®—æ³•é¢è¯•ä¸­çš„æƒé‡å¹¶ä¸é«˜ã€‚å¦‚æœæœ¬èŠ‚å†…å®¹è®©ä½ æ„Ÿè§‰å­¦èµ·æ¥æœ‰éš¾åº¦ï¼Œé‚£ä¹ˆä¹Ÿä¸ç”¨ç°å¿ƒï¼Œæ›´ä¸å¿…ç„¦è™‘â€”â€”æŠŠæ¡å¥½ä¸‹ä¸€èŠ‚å¼€å§‹çš„æ’åºç®—æ³•ä¸“é¢˜ï¼Œä¸Šäº†è€ƒåœºä½ ä»ç„¶æ˜¯ä¸€æ¡å¥½æ±‰ã€‚</p>
<p>é“¾è¡¨ç»“æ„ç›¸å¯¹æ•°ç»„ã€å­—ç¬¦ä¸²æ¥è¯´ï¼Œç¨å¾®æœ‰é‚£ä¹ˆä¸€äº›äº›å¤æ‚ï¼Œæ‰€ä»¥é’ˆå¯¹é“¾è¡¨çš„çœŸé¢˜æˆä»½ä¹Ÿç›¸å¯¹æ¯”è¾ƒå¤šã€‚<br/>
å‰é¢å’±ä»¬è¯´è¿‡ï¼Œæ•°ç»„ã€å­—ç¬¦ä¸²è‹¥æƒ³å¾€éš¾äº†å‡ºï¼Œé‚£ä¸€å®šæ˜¯è¦ç»“åˆä¸€äº›è¶…è¶Šæ•°æ®ç»“æ„æœ¬èº«çš„ä¸œè¥¿â€”â€”æ¯”å¦‚æ’åºç®—æ³•ã€äºŒåˆ†æ€æƒ³ã€åŠ¨æ€è§„åˆ’æ€æƒ³ç­‰ç­‰ã€‚å› æ­¤ï¼Œè¿™éƒ¨åˆ†å¯¹åº”çš„éš¾é¢˜ã€ç»¼åˆé¢˜ï¼Œæˆ‘ä»¬éœ€è¦ç­‰çŸ¥è¯†ä½“ç³»å®Œå…¨æ„å»ºèµ·æ¥ä¹‹åï¼Œåœ¨çœŸé¢˜è®­ç»ƒç¯èŠ‚é‡æ–°å¤ç›˜ã€‚</p>
<p>ä½†æ˜¯é“¾è¡¨å¯ä¸ä¸€æ ·äº†ã€‚å¦‚æœè¯´åœ¨å‘½é¢˜æ—¶ï¼Œæ•°ç»„å’Œå­—ç¬¦ä¸²çš„è§’è‰²å¾€å¾€æ˜¯â€œç®—æ³•æ€æƒ³çš„è½½ä½“â€ï¼Œé‚£ä¹ˆé“¾è¡¨æœ¬èº«å°±å¯ä»¥è¢«è®¤ä¸ºæ˜¯â€œå‘½é¢˜çš„ç›®çš„â€ã€‚å•åœ¨çœŸé¢˜å½’çº³è§£è¯»ç¯èŠ‚ï¼Œæˆ‘ä»¬èƒ½è®²çš„æŠ€å·§ã€èƒ½åšçš„é¢˜ç›®å·²ç»æœ‰å¾ˆå¤šã€‚ç»“åˆå®é™…é¢è¯•ä¸­çš„å‘½é¢˜è§„å¾‹ï¼Œæˆ‘æŠŠè¿™äº›é¢˜ç›®åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š</p>
<ul>
<li>é“¾è¡¨çš„å¤„ç†ï¼šåˆå¹¶ã€åˆ é™¤ç­‰ï¼ˆåˆ é™¤æ“ä½œç”»ä¸ªè®°å·ï¼Œé‡ç‚¹ä¸­çš„é‡ç‚¹ï¼ï¼‰</li>
<li>é“¾è¡¨çš„åè½¬åŠå…¶è¡ç”Ÿé¢˜ç›®</li>
<li>é“¾è¡¨æˆç¯é—®é¢˜åŠå…¶è¡ç”Ÿé¢˜ç›®</li>
</ul>
<p>æœ¬èŠ‚æˆ‘ä»¬å°±ä»¥é“¾è¡¨çš„å¤„ç†ä¸ºåˆ‡å…¥ç‚¹ï¼Œä¸€æ­¥ä¸€æ­¥èµ°è¿›é“¾è¡¨çš„ä¸–ç•Œã€‚</p>
<h2 data-id="heading-104">é“¾è¡¨çš„åˆå¹¶</h2>
<blockquote>
<p>çœŸé¢˜æè¿°ï¼šå°†ä¸¤ä¸ªæœ‰åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„æœ‰åºé“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰ç»“ç‚¹ç»„æˆçš„ã€‚Â </p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹ï¼š
è¾“å…¥ï¼š1-&gt;2-&gt;4, 1-&gt;3-&gt;4
è¾“å‡ºï¼š1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4</p>
</blockquote>
<h3 data-id="heading-105">æ€è·¯åˆ†æ</h3>
<p>åšé“¾è¡¨å¤„ç†ç±»é—®é¢˜ï¼Œå¤§å®¶è¦æŠŠæ¡ä½ä¸€ä¸ªä¸­å¿ƒæ€æƒ³â€”â€”<strong>å¤„ç†é“¾è¡¨çš„æœ¬è´¨ï¼Œæ˜¯å¤„ç†é“¾è¡¨ç»“ç‚¹ä¹‹é—´çš„æŒ‡é’ˆå…³ç³»</strong>ã€‚<br/>
è¿™é“é¢˜ä¹Ÿä¸ä¾‹å¤–ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å¤„ç†å‰ä¸¤ä¸ªé“¾è¡¨çš„æƒ…å†µï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/17/170e6ca5dffda391~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=986&amp;h=482&amp;s=27136&amp;e=png" alt="" loading="lazy"/></p>
<p>ä¸¤ä¸ªé“¾è¡¨å¦‚æœæƒ³è¦åˆå¹¶ä¸ºä¸€ä¸ªé“¾è¡¨ï¼Œæˆ‘ä»¬æ°å½“åœ°è¡¥é½åŒæ–¹ä¹‹é—´ç»“ç‚¹ next æŒ‡é’ˆçš„æŒ‡å‘å…³ç³»ï¼Œå°±èƒ½è¾¾åˆ°ç›®çš„ã€‚<br/>
å¦‚æœè¿™ä¹ˆè¯´ä»ç„¶è®©ä½ è§‰å¾—æŠ½è±¡ï¼Œé‚£ä¹ˆå¤§å®¶ä¸å¦¨æŠŠå›¾ä¸Šçš„6ä¸ªç»“ç‚¹æƒ³è±¡æˆ6ä¸ªæ‰£å­ï¼šç°åœ¨çš„æƒ…å†µæ˜¯ï¼Œ6ä¸ªæ‰£å­è¢«åˆ†æˆäº†ä¸¤æ‹¨ï¼Œå„è‡ªç”±ä¸€æ ¹çº¿æŠŠå®ƒä»¬ç©¿èµ·æ¥ã€‚è€Œæˆ‘ä»¬çš„ç›®çš„æ˜¯è®©è¿™å…­ä¸ªæ‰£å­æŒ‰ç…§ä¸€å®šçš„é¡ºåºï¼Œä¸²åˆ°ä¸€æ ¹çº¿ä¸Šå»ã€‚è¿™æ—¶å€™éœ€è¦å’±ä»¬åšçš„å°±æ˜¯ä¸€ä¸ª<strong>ç©¿é’ˆå¼•çº¿</strong>çš„æ´»å„¿ï¼Œç°åœ¨çº¿æœ‰äº†ï¼Œå’±ç¼ºçš„æ˜¯ä¸€æ ¹é’ˆï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/17/170e6cfd9e7a2b23~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1040&amp;h=480&amp;s=29196&amp;e=png" alt="" loading="lazy"/><br/>
è¿™æ ¹é’ˆæ¯æ¬¡é’»è¿›æ‰£å­çœ¼å„¿ä¹‹å‰ï¼Œè¦å…ˆæ¯”è¾ƒä¸€ä¸‹å®ƒçœ¼å‰çš„ä¸¤ä¸ªæ‰£å­ï¼Œé€‰æ‹©å…¶ä¸­å€¼è¾ƒå°çš„é‚£ä¸ªï¼Œä¼˜å…ˆæŠŠå®ƒä¸²è¿›å»ã€‚ä¸€æ¬¡ä¸²ä¸€ä¸ªï¼Œç›´åˆ°æ‰€æœ‰çš„æ‰£å­éƒ½è¢«ä¸²è¿›ä¸€æ¡çº¿ä¸ºæ­¢ï¼ˆä¸‹å›¾ä¸­çº¢è‰²ç®­å¤´è¡¨æ˜ç©¿é’ˆçš„è¿‡ç¨‹ä¸æ–¹å‘ï¼‰ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/17/170e6dffa1beb99f~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1130&amp;h=478&amp;s=47865&amp;e=png" alt="" loading="lazy"/></p>
<p>åŒæ—¶æˆ‘ä»¬è¿˜è¦è€ƒè™‘ l1 å’Œ l2 ä¸¤ä¸ªé“¾è¡¨é•¿åº¦ä¸ç­‰çš„æƒ…å†µï¼šè‹¥å…¶ä¸­ä¸€ä¸ªé“¾è¡¨å·²ç»å®Œå…¨è¢«ä¸²è¿›æ–°é“¾è¡¨é‡Œäº†ï¼Œè€Œå¦ä¸€ä¸ªé“¾è¡¨è¿˜æœ‰å‰©ä½™ç»“ç‚¹ï¼Œè€ƒè™‘åˆ°è¯¥é“¾è¡¨æœ¬èº«å°±æ˜¯æœ‰åºçš„ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠå®ƒæ•´ä¸ªæ‹¼åˆ°ç›®æ ‡é“¾è¡¨çš„å°¾éƒ¨ã€‚</p>
<h3 data-id="heading-106">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">ListNode</span>} <span class="hljs-variable">l1</span>
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">ListNode</span>} <span class="hljs-variable">l2</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">ListNode</span>}
 */</span>
<span class="hljs-keyword">const</span> mergeTwoLists = <span class="hljs-keyword">function</span>(<span class="hljs-params">l1, l2</span>) {
  <span class="hljs-comment">// å®šä¹‰å¤´ç»“ç‚¹ï¼Œç¡®ä¿é“¾è¡¨å¯ä»¥è¢«è®¿é—®åˆ°</span>
  <span class="hljs-keyword">let</span> head = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>()
  <span class="hljs-comment">// cur è¿™é‡Œå°±æ˜¯å’±ä»¬é‚£æ ¹â€œé’ˆâ€</span>
  <span class="hljs-keyword">let</span> cur = head
  <span class="hljs-comment">// â€œé’ˆâ€å¼€å§‹åœ¨ l1 å’Œ l2 é—´ç©¿æ¢­äº†</span>
  <span class="hljs-keyword">while</span>(l1 &amp;&amp; l2) {
      <span class="hljs-comment">// å¦‚æœ l1 çš„ç»“ç‚¹å€¼è¾ƒå°</span>
      <span class="hljs-keyword">if</span>(l1.<span class="hljs-property">val</span>&lt;=l2.<span class="hljs-property">val</span>) {
          <span class="hljs-comment">// å…ˆä¸²èµ· l1 çš„ç»“ç‚¹</span>
          cur.<span class="hljs-property">next</span> = l1
          <span class="hljs-comment">// l1 æŒ‡é’ˆå‘å‰ä¸€æ­¥</span>
          l1 = l1.<span class="hljs-property">next</span>
      } <span class="hljs-keyword">else</span> {
          <span class="hljs-comment">// l2 è¾ƒå°æ—¶ï¼Œä¸²èµ· l2 ç»“ç‚¹</span>
          cur.<span class="hljs-property">next</span> = l2
          <span class="hljs-comment">// l2 å‘å‰ä¸€æ­¥</span>
          l2 = l2.<span class="hljs-property">next</span>
      }
      
      <span class="hljs-comment">// â€œé’ˆâ€åœ¨ä¸²èµ·ä¸€ä¸ªç»“ç‚¹åï¼Œä¹Ÿä¼šå¾€å‰ä¸€æ­¥</span>
      cur = cur.<span class="hljs-property">next</span> 

  }
  
  <span class="hljs-comment">// å¤„ç†é“¾è¡¨ä¸ç­‰é•¿çš„æƒ…å†µ</span>
  cur.<span class="hljs-property">next</span> = l1!==<span class="hljs-literal">null</span>?<span class="hljs-attr">l1</span>:l2
  <span class="hljs-comment">// è¿”å›èµ·å§‹ç»“ç‚¹</span>
  <span class="hljs-keyword">return</span> head.<span class="hljs-property">next</span>
};
</code></pre>
<h2 data-id="heading-107">é“¾è¡¨ç»“ç‚¹çš„åˆ é™¤</h2>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€é“åŸºç¡€é¢˜ç›®ï¼š</p>
<blockquote>
<p>çœŸé¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰é‡å¤çš„å…ƒç´ ï¼Œä½¿å¾—æ¯ä¸ªå…ƒç´ åªå‡ºç°ä¸€æ¬¡ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹Â 1:<br/>
è¾“å…¥: 1-&gt;1-&gt;2<br/>
è¾“å‡º: 1-&gt;2<br/>
ç¤ºä¾‹Â 2:<br/>
è¾“å…¥: 1-&gt;1-&gt;2-&gt;3-&gt;3<br/>
è¾“å‡º: 1-&gt;2-&gt;3</p>
</blockquote>
<h3 data-id="heading-108">æ€è·¯åˆ†æ</h3>
<p>é“¾è¡¨çš„åˆ é™¤æ˜¯ä¸€ä¸ªåŸºç¡€ä¸”å…³é”®çš„æ“ä½œï¼Œæˆ‘ä»¬åœ¨æ•°æ®ç»“æ„éƒ¨åˆ†å°±å·²ç»å¯¹è¯¥æ“ä½œçš„ç¼–ç å®ç°è¿›è¡Œè¿‡ä»‹ç»ï¼Œè¿™é‡Œç›´æ¥å¤ç”¨å¤§å®¶å·²ç»å­¦è¿‡çš„åˆ é™¤èƒ½åŠ›ï¼Œå°†éœ€è¦åˆ é™¤çš„ç›®æ ‡ç»“ç‚¹çš„å‰é©±ç»“ç‚¹ next æŒ‡é’ˆå¾€åæŒ‡ä¸€æ ¼ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/17/170e6f3b38195ccf~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1152&amp;h=404&amp;s=29916&amp;e=png" alt="" loading="lazy"/>
åˆ¤æ–­ä¸¤ä¸ªå…ƒç´ æ˜¯å¦é‡å¤ï¼Œç”±äºæ­¤å¤„æ˜¯å·²æ’åºçš„é“¾è¡¨ï¼Œæˆ‘ä»¬ç›´æ¥åˆ¤æ–­å‰åä¸¤ä¸ªå…ƒç´ å€¼æ˜¯å¦ç›¸ç­‰å³å¯ã€‚</p>
<h3 data-id="heading-109">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">ListNode</span>} <span class="hljs-variable">head</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">ListNode</span>}
 */</span>
<span class="hljs-keyword">const</span> deleteDuplicates = <span class="hljs-keyword">function</span>(<span class="hljs-params">head</span>) {
    <span class="hljs-comment">// è®¾å®š cur æŒ‡é’ˆï¼Œåˆå§‹ä½ç½®ä¸ºé“¾è¡¨ç¬¬ä¸€ä¸ªç»“ç‚¹</span>
    <span class="hljs-keyword">let</span> cur = head;
    <span class="hljs-comment">// éå†é“¾è¡¨</span>
    <span class="hljs-keyword">while</span>(cur != <span class="hljs-literal">null</span> &amp;&amp; cur.<span class="hljs-property">next</span> != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// è‹¥å½“å‰ç»“ç‚¹å’Œå®ƒåé¢ä¸€ä¸ªç»“ç‚¹å€¼ç›¸ç­‰ï¼ˆé‡å¤ï¼‰</span>
        <span class="hljs-keyword">if</span>(cur.<span class="hljs-property">val</span> === cur.<span class="hljs-property">next</span>.<span class="hljs-property">val</span>) {
            <span class="hljs-comment">// åˆ é™¤é åçš„é‚£ä¸ªç»“ç‚¹ï¼ˆå»é‡ï¼‰</span>
            cur.<span class="hljs-property">next</span> = cur.<span class="hljs-property">next</span>.<span class="hljs-property">next</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// è‹¥ä¸é‡å¤ï¼Œç»§ç»­éå†</span>
            cur = cur.<span class="hljs-property">next</span>;
        }
    }
    <span class="hljs-keyword">return</span> head;
};
</code></pre>
<p>å¤§å®¶ä¸è¦å°çœ‹äº†è¿™ä¹ˆä¸€é“ç®€ç®€å•å•çš„åŸºç¡€é¢˜ç›®ï¼Œåœ¨å®é™…é¢è¯•ä¸­ï¼Œä¸‹ä¸äº†ç¬”çš„ã€å†™ä¸å›«å›µçš„ã€å†™äº†è·‘ä¸èµ·æ¥çš„ï¼Œå¤§æœ‰äººåœ¨ã€‚<br/>
ä¸€é“é¢˜ä¹‹æ‰€ä»¥èƒ½å¤Ÿæˆä¸ºé¢è¯•é¢˜ï¼Œä¸€å®šæœ‰å…¶è€ƒå¯Ÿæ„ä¹‰åœ¨ã€‚æ‹¿è¿™é“é¢˜æ¥è¯´ï¼Œæ—¢èƒ½è€ƒå¯Ÿä½ é“¾è¡¨çš„éå†ï¼ˆwhileå¾ªç¯ï¼‰ï¼Œåˆèƒ½è€ƒå¯Ÿä½ é“¾è¡¨çš„ CRUD ä¸­æœ€çƒ­é—¨çš„åˆ é™¤æ“ä½œï¼Œå€™é€‰äººåšè¿™é“é¢˜çš„æƒ…å†µï¼Œä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥åé¦ˆå…¶åŸºæœ¬åŠŸçš„æ‰å®åº¦ã€‚åšå¯¹äº†æ˜¯æ­£å¸¸ï¼Œå¦‚æœåšä¸å¯¹ï¼Œé‚£ä¹ˆåœ¨ç®—æ³•å’Œæ•°æ®ç»“æ„è¿™ä¸ªè€ƒå¯Ÿç¯èŠ‚ï¼Œä½ çš„å¤„å¢ƒå°±æœ‰ç‚¹å±é™©äº†ã€‚</p>
<h2 data-id="heading-110">åˆ é™¤é—®é¢˜çš„å»¶ä¼¸â€”â€”dummy ç»“ç‚¹ç™»åœº</h2>
<blockquote>
<p>çœŸé¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªæ’åºé“¾è¡¨ï¼Œåˆ é™¤æ‰€æœ‰å«æœ‰é‡å¤æ•°å­—çš„ç»“ç‚¹ï¼Œåªä¿ç•™åŸå§‹é“¾è¡¨ä¸­ æ²¡æœ‰é‡å¤å‡ºç°çš„æ•°å­—ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹ 1:<br/>
è¾“å…¥: 1-&gt;2-&gt;3-&gt;3-&gt;4-&gt;4-&gt;5<br/>
è¾“å‡º: 1-&gt;2-&gt;5<br/>
ç¤ºä¾‹ 2:<br/>
è¾“å…¥: 1-&gt;1-&gt;1-&gt;2-&gt;3<br/>
è¾“å‡º: 2-&gt;3</p>
</blockquote>
<h3 data-id="heading-111">æ€è·¯åˆ†æ</h3>
<p>æˆ‘ä»¬å…ˆæ¥åˆ†æä¸€ä¸‹è¿™é“é¢˜å’Œä¸Šé“é¢˜æœ‰ä»€ä¹ˆå¼‚åŒå“ˆï¼šç›¸åŒçš„åœ°æ–¹æ¯”è¾ƒæ˜æ˜¾ï¼Œéƒ½æ˜¯åˆ é™¤é‡å¤å…ƒç´ ã€‚ä¸åŒçš„åœ°æ–¹åœ¨äºï¼Œæ¥¼ä¸Šæˆ‘ä»¬åˆ åˆ°æ²¡æœ‰é‡å¤å…ƒç´ å°±è¡Œäº†ï¼Œå¯ä»¥ç•™ä¸ªâ€œç‹¬è‹—â€ï¼›ä½†ç°åœ¨ï¼Œé¢˜å¹²è¦æ±‚æˆ‘ä»¬åªè¦ä¸€ä¸ªå…ƒç´ å‘ç”Ÿäº†é‡å¤ï¼Œå°±è¦æŠŠå®ƒå½»åº•ä»é“¾è¡¨ä¸­å¹²æ‰ï¼Œä¸€ä¸ªä¸ç•™ã€‚</p>
<p>è¿™å¸¦æ¥äº†ä¸€ä¸ªä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿæˆ‘ä»¬å›é¡¾ä¸€ä¸‹å‰é¢å’±ä»¬æ˜¯æ€ä¹ˆåšåˆ é™¤çš„ï¼šåœ¨éå†çš„è¿‡ç¨‹ä¸­åˆ¤æ–­å½“å‰ç»“ç‚¹å’Œåç»§ç»“ç‚¹ä¹‹é—´æ˜¯å¦å­˜åœ¨å€¼ç›¸ç­‰çš„æƒ…å†µï¼Œè‹¥æœ‰ï¼Œç›´æ¥å¯¹åç»§ç»“ç‚¹è¿›è¡Œåˆ é™¤ï¼š<br/>
<img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/17/170e6f3b38195ccf~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1152&amp;h=404&amp;s=29916&amp;e=png" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªè¿‡ç¨‹éå¸¸è‡ªç„¶ï¼Œä¸ºå•¥ï¼Ÿå› ä¸ºå’±ä»¬è¦åˆ é™¤æŸä¸€ä¸ªç›®æ ‡ç»“ç‚¹æ—¶ï¼Œå¿…é¡»çŸ¥é“å®ƒçš„<strong>å‰é©±ç»“ç‚¹</strong>ã€‚åœ¨ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬æœ¬æ¥å°±æ˜¯ç«™åœ¨å‰é©±ç»“ç‚¹çš„ä½ç½®ï¼Œå¯¹å…¶åç»§ç»“ç‚¹è¿›è¡Œåˆ é™¤ï¼Œåªéœ€è¦å°†å‰é©±ç»“ç‚¹çš„ next æŒ‡é’ˆå¾€åæŒªä¸€ä½å°±è¡Œäº†ã€‚</p>
<p>ä½†æ˜¯ç°åœ¨ï¼Œå’±ä»¬è¦åšçš„äº‹æƒ…å˜æˆäº†æŠŠå‰é©±å’Œåç»§ä¸€èµ·åˆ æ‰ï¼Œå‰é¢ä¸¤ä¸ªå€¼ä¸º1çš„ç»“ç‚¹è¦ä¸€èµ·ç‹—å¸¦æ‰è¡Œï¼Œèµ·å§‹ç»“ç‚¹ç›´æ¥å˜æˆäº†ç¬¬ä¸‰ä¸ªï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/17/170e7079d7513b3e~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1084&amp;h=386&amp;s=24546&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<p>å¦‚æœç»§ç»­æ²¿ç”¨åˆšæ‰çš„æ€è·¯ï¼Œæˆ‘ä»¬ä¼šå‘ç°å®Œå…¨èµ°ä¸é€šã€‚å› ä¸ºæˆ‘ä»¬çš„ cur æŒ‡é’ˆå°±æ˜¯ä»å›¾ä¸­ç¬¬ä¸€ä¸ªç»“ç‚¹å‡ºå‘å¼€å§‹éå†çš„ï¼Œæ— æ³•å®šä½åˆ°ç¬¬ä¸€ä¸ªç»“ç‚¹çš„å‰é©±ç»“ç‚¹ï¼Œåˆ é™¤ä¾¿æ— æ³•å®Œæˆã€‚</p>
<p>å…¶å®åœ¨é“¾è¡¨é¢˜ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„é—®é¢˜ï¼šé“¾è¡¨çš„ç¬¬ä¸€ä¸ªç»“ç‚¹ï¼Œå› ä¸ºæ²¡æœ‰å‰é©±ç»“ç‚¹ï¼Œå¯¼è‡´æˆ‘ä»¬é¢å¯¹å®ƒæ— ä»ä¸‹æ‰‹ã€‚è¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥ç”¨ä¸€ä¸ª <code>dummy</code> ç»“ç‚¹æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚<br/>
æ‰€è°“ dummy ç»“ç‚¹ï¼Œå°±æ˜¯å’±ä»¬äººä¸ºåˆ¶é€ å‡ºæ¥çš„ç¬¬ä¸€ä¸ªç»“ç‚¹çš„å‰é©±ç»“ç‚¹ï¼Œè¿™æ ·é“¾è¡¨ä¸­æ‰€æœ‰çš„ç»“ç‚¹éƒ½èƒ½ç¡®ä¿æœ‰ä¸€ä¸ªå‰é©±ç»“ç‚¹ï¼Œä¹Ÿå°±éƒ½èƒ½å¤Ÿç”¨åŒæ ·çš„é€»è¾‘æ¥å¤„ç†äº†ã€‚<br/>
dummy ç»“ç‚¹èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬é™ä½é“¾è¡¨å¤„ç†è¿‡ç¨‹çš„å¤æ‚åº¦ï¼Œå¤„ç†é“¾è¡¨æ—¶ï¼Œä¸è®¾ dummy ç»“ç‚¹æ€è·¯å¯èƒ½ä¼šæ‰“ä¸å¼€ï¼›è®¾äº† dummy ç»“ç‚¹çš„è¯ï¼Œå°±ç®—ä¸ä¸€å®šç”¨å¾—ä¸Šï¼Œä¹Ÿä¸ä¼šå‡ºé”™ã€‚æ‰€ä»¥ç¬”è€…ä¸ªäººéå¸¸å–œæ¬¢ç”¨ dummy ç»“ç‚¹ã€‚æœ‰å¿ƒçš„åŒå­¦å¯èƒ½ä¹Ÿä¼šæ³¨æ„åˆ°ï¼Œåœ¨æœ¬èŠ‚çš„ç¬¬ä¸€é¢˜â€œé“¾è¡¨çš„åˆå¹¶â€ä¸­ï¼Œå…¶å®ä¹Ÿæœ‰ dummy ç»“ç‚¹çš„èº«å½±ã€‚</p>
<p>å›åˆ°è¿™é“é¢˜ä¸Šæ¥ï¼Œæˆ‘ä»¬é¦–å…ˆè¦åšçš„å°±æ˜¯å®šä¹‰ä¸€ä¸ª dummy ç»“ç‚¹ï¼ŒæŒ‡å‘é“¾è¡¨çš„èµ·å§‹ä½ç½®ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/17/170e7109a0a2ad77~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1202&amp;h=304&amp;s=20917&amp;e=png" alt="" loading="lazy"/>
è¿™æ ·ä¸€æ¥ï¼Œå¦‚æœæƒ³è¦åˆ é™¤ä¸¤ä¸ªè¿ç»­é‡å¤çš„å€¼ä¸º 1 çš„ç»“ç‚¹ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠ dummy ç»“ç‚¹çš„ next
æŒ‡é’ˆç›´æ¥æŒ‡å‘ 2ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/17/170e7116f49a1dc4~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1284&amp;h=384&amp;s=31643&amp;e=png" alt="" loading="lazy"/></p>
<p>å¦‚æ­¤ä¸€æ¥ï¼Œå°±å¤§åŠŸå‘Šæˆå•¦~</p>
<p>æ³¨æ„ï¼šç”±äºé‡å¤çš„ç»“ç‚¹å¯èƒ½ä¸æ­¢ä¸€ä¸ªä¸¤ä¸ªï¼Œæˆ‘ä»¬è¿™é‡Œéœ€è¦ç”¨ä¸€ä¸ª while å¾ªç¯æ¥åå¤åœ°è¿›è¡Œé‡å¤ç»“ç‚¹çš„åˆ¤æ–­å’Œåˆ é™¤æ“ä½œã€‚</p>
<h3 data-id="heading-112">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">ListNode</span>} <span class="hljs-variable">head</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">ListNode</span>}
 */</span>
<span class="hljs-keyword">const</span> deleteDuplicates = <span class="hljs-keyword">function</span>(<span class="hljs-params">head</span>) {
    <span class="hljs-comment">// æç«¯æƒ…å†µï¼š0ä¸ªæˆ–1ä¸ªç»“ç‚¹ï¼Œåˆ™ä¸ä¼šé‡å¤ï¼Œç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">if</span>(!head || !head.<span class="hljs-property">next</span>) {
        <span class="hljs-keyword">return</span> head
    }
    <span class="hljs-comment">// dummy ç™»åœº</span>
    <span class="hljs-keyword">let</span> dummy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>() 
    <span class="hljs-comment">// dummy æ°¸è¿œæŒ‡å‘å¤´ç»“ç‚¹</span>
    dummy.<span class="hljs-property">next</span> = head   
    <span class="hljs-comment">// cur ä» dummy å¼€å§‹éå†</span>
    <span class="hljs-keyword">let</span> cur = dummy 
    <span class="hljs-comment">// å½“ cur çš„åé¢æœ‰è‡³å°‘ä¸¤ä¸ªç»“ç‚¹æ—¶</span>
    <span class="hljs-keyword">while</span>(cur.<span class="hljs-property">next</span> &amp;&amp; cur.<span class="hljs-property">next</span>.<span class="hljs-property">next</span>) {
        <span class="hljs-comment">// å¯¹ cur åé¢çš„ä¸¤ä¸ªç»“ç‚¹è¿›è¡Œæ¯”è¾ƒ</span>
        <span class="hljs-keyword">if</span>(cur.<span class="hljs-property">next</span>.<span class="hljs-property">val</span> === cur.<span class="hljs-property">next</span>.<span class="hljs-property">next</span>.<span class="hljs-property">val</span>) {
            <span class="hljs-comment">// è‹¥å€¼é‡å¤ï¼Œåˆ™è®°ä¸‹è¿™ä¸ªå€¼</span>
            <span class="hljs-keyword">let</span> val = cur.<span class="hljs-property">next</span>.<span class="hljs-property">val</span>
            <span class="hljs-comment">// åå¤åœ°æ’æŸ¥åé¢çš„å…ƒç´ æ˜¯å¦å­˜åœ¨å¤šæ¬¡é‡å¤è¯¥å€¼çš„æƒ…å†µ</span>
            <span class="hljs-keyword">while</span>(cur.<span class="hljs-property">next</span> &amp;&amp; cur.<span class="hljs-property">next</span>.<span class="hljs-property">val</span>===val) {
                <span class="hljs-comment">// è‹¥æœ‰ï¼Œåˆ™åˆ é™¤</span>
                cur.<span class="hljs-property">next</span> = cur.<span class="hljs-property">next</span>.<span class="hljs-property">next</span> 
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// è‹¥ä¸é‡å¤ï¼Œåˆ™æ­£å¸¸éå†</span>
            cur = cur.<span class="hljs-property">next</span>
        }
    }
    <span class="hljs-comment">// è¿”å›é“¾è¡¨çš„èµ·å§‹ç»“ç‚¹</span>
    <span class="hljs-keyword">return</span> dummy.<span class="hljs-property">next</span>;
};
</code></pre>
<h2 data-id="heading-113">å°ç»“</h2>
<p>åœ¨æœ¬èŠ‚ï¼Œæˆ‘ä»¬å¯¹é“¾è¡¨çœŸé¢˜å¤§å†›ä¸­çš„â€œå°å¯çˆ±â€æµæ´¾è¿›è¡Œäº†å‰–æã€‚é€šè¿‡å¯¹â€œå°å¯çˆ±â€æµæ´¾çš„å­¦ä¹ ï¼Œèƒ½å¤Ÿå¸®åŠ©å¤§å®¶å·©å›ºå¯¹é“¾è¡¨æ•°æ®ç»“æ„ç‰¹æ€§çš„è®¤çŸ¥ï¼ŒåŒæ—¶å¼ºåŒ–åŸºæœ¬çš„ç¡¬ç¼–ç èƒ½åŠ›ã€‚<br/>
ä»ä¸‹èŠ‚å¼€å§‹ï¼Œæˆ‘ä»¬å°†ç”¨ä¸¤ä¸ªä¸“é¢˜çš„æ—¶é—´ï¼Œåˆ†è§£é“¾è¡¨ä¸­çš„â€œä¸å¯çˆ±â€æµæ´¾ã€‚æ¥ä¸‹æ¥çš„å­¦ä¹ æˆ–è®¸ä¸åƒæœ¬èŠ‚ä¸€æ ·è½»æ¾ï¼Œä½†ç›¸ä¿¡ä¸€å®šèƒ½ç»™å¤§å®¶å¸¦æ¥æ›´é‡ç£…çš„æ”¶è·~~</p>
<p>ï¼ˆé˜…è¯»è¿‡ç¨‹ä¸­æœ‰ä»»ä½•æƒ³æ³•æˆ–ç–‘é—®ï¼Œæˆ–è€…å•çº¯å¸Œæœ›å’Œç¬”è€…äº¤ä¸ªæœ‹å‹å•¥çš„ï¼Œæ¬¢è¿å¤§å®¶æ·»åŠ æˆ‘çš„å¾®ä¿¡xyalinodeä¸æˆ‘äº¤æµå“ˆ~ï¼‰</p>
<h2 data-id="heading-114">å¿«æ…¢æŒ‡é’ˆä¸å¤šæŒ‡é’ˆ</h2>
<p>é“¾è¡¨é¢˜ç›®ä¸­ï¼Œæœ‰ä¸€ç±»ä¼šæ¶‰åŠåˆ°<strong>åå¤çš„éå†</strong>ã€‚æ¶‰åŠåå¤éå†çš„é¢˜ç›®ï¼Œé¢˜ç›®æœ¬èº«è™½ç„¶ä¸ä¼šç›´æ¥è·Ÿä½ è¯´â€œä½ å¥½ï¼Œæˆ‘æ˜¯ä¸€é“éœ€è¦åå¤éå†çš„é¢˜ç›®â€ï¼Œä½†åªè¦ä½ å°è¯•ç”¨å¸¸è§„çš„æ€è·¯åˆ†æå®ƒï¼Œä½ ä¼šå‘ç°å®ƒä¸€å®šæ¶‰åŠåå¤éå†ï¼›åŒæ—¶ï¼Œæ¶‰åŠåå¤éå†çš„é¢˜ç›®ï¼Œè¿˜æœ‰ä¸€ä¸ªæ›´æ˜æ˜¾çš„ç‰¹å¾ï¼Œå°±æ˜¯å®ƒä»¬å¾€å¾€ä¼šæ¶‰åŠ<strong>ç›¸å¯¹å¤æ‚çš„é“¾è¡¨æ“ä½œ</strong>ï¼Œæ¯”å¦‚åè½¬ã€æŒ‡å®šä½ç½®çš„åˆ é™¤ç­‰ç­‰ã€‚</p>
<p>è§£å†³è¿™ç±»é—®é¢˜ï¼Œæˆ‘ä»¬ç”¨åˆ°çš„æ˜¯åŒæŒ‡é’ˆä¸­çš„â€œå¿«æ…¢æŒ‡é’ˆâ€ã€‚å¿«æ…¢æŒ‡é’ˆæŒ‡çš„æ˜¯ä¸¤ä¸ªä¸€å‰ä¸€åçš„æŒ‡é’ˆï¼Œä¸¤ä¸ªæŒ‡é’ˆå¾€åŒä¸€ä¸ªæ–¹å‘èµ°ï¼Œåªæ˜¯ä¸€ä¸ªå¿«ä¸€ä¸ªæ…¢ã€‚å¿«æ…¢æŒ‡é’ˆä¸¥æ ¼æ¥è¯´åªèƒ½æœ‰ä¿©ï¼Œä¸è¿‡å®é™…åšé¢˜ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸€å‰ã€ä¸€ä¸­ã€ä¸€åçš„ä¸‰ä¸ªæŒ‡é’ˆï¼Œè¿™ç§è¶…è¿‡ä¸¤ä¸ªæŒ‡é’ˆçš„è§£é¢˜æ–¹æ³•ä¹Ÿå«â€œå¤šæŒ‡é’ˆæ³•â€ã€‚</p>
<p>å¿«æ…¢æŒ‡é’ˆ+å¤šæŒ‡é’ˆï¼ŒåŒç®¡é½ä¸‹ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬è§£å†³é“¾è¡¨ä¸­çš„å¤§éƒ¨åˆ†å¤æ‚æ“ä½œé—®é¢˜ã€‚</p>
<h2 data-id="heading-115">å¿«æ…¢æŒ‡é’ˆâ€”â€”åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹</h2>
<blockquote>
<p>çœŸé¢˜æè¿°ï¼šç»™å®šä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬Â nÂ ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹ï¼š
ç»™å®šä¸€ä¸ªé“¾è¡¨: 1-&gt;2-&gt;3-&gt;4-&gt;5, å’Œ n = 2.<br/>
å½“åˆ é™¤äº†å€’æ•°ç¬¬äºŒä¸ªç»“ç‚¹åï¼Œé“¾è¡¨å˜ä¸º 1-&gt;2-&gt;3-&gt;5.<br/>
è¯´æ˜ï¼š
ç»™å®šçš„ n ä¿è¯æ˜¯æœ‰æ•ˆçš„ã€‚</p>
</blockquote>
<h3 data-id="heading-116">æ€è·¯åˆ†æ</h3>
<h4 data-id="heading-117">å°è´´å£«ï¼šdummy ç»“ç‚¹çš„ä½¿ç”¨</h4>
<p>ä¸Šä¸€èŠ‚æˆ‘ç»™å¤§å®¶ä»‹ç»äº† <code>dummy</code> ç»“ç‚¹ï¼šå®ƒå¯ä»¥å¸®æˆ‘ä»¬å¤„ç†æ‰å¤´ç»“ç‚¹ä¸ºç©ºçš„è¾¹ç•Œé—®é¢˜ï¼Œå¸®åŠ©æˆ‘ä»¬ç®€åŒ–è§£é¢˜è¿‡ç¨‹ã€‚å› æ­¤æ¶‰åŠé“¾è¡¨æ“ä½œã€å°¤å…¶æ˜¯æ¶‰åŠç»“ç‚¹åˆ é™¤çš„é¢˜ç›®ï¼ˆå¯¹å‰é©±ç»“ç‚¹çš„å­˜åœ¨æ€§è¦æ±‚æ¯”è¾ƒé«˜ï¼‰ï¼Œæˆ‘éƒ½å»ºè®®å¤§å®¶å†™ä»£ç çš„æ—¶å€™ç›´æ¥æŠŠ <code>dummy</code> ç»™ç”¨èµ·æ¥ï¼Œå»ºç«‹å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> dummy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>()
<span class="hljs-comment">// è¿™é‡Œçš„ head æ˜¯é“¾è¡¨åŸæœ‰çš„ç¬¬ä¸€ä¸ªç»“ç‚¹</span>
dummy.<span class="hljs-property">next</span> = head
</code></pre>
<h4 data-id="heading-118">â€œå€’æ•°â€å˜â€œæ­£æ•°â€</h4>
<p>é“¾è¡¨çš„åˆ é™¤æˆ‘ä»¬ä¸ŠèŠ‚å·²ç»è®²è¿‡ï¼Œç›¸ä¿¡éƒ½éš¾ä¸å€’å¤§å®¶ã€‚è¿™é“é¢˜çš„éš¾ç‚¹å®é™…åœ¨äºè¿™ä¸ªâ€œå€’æ•°ç¬¬ N ä¸ªâ€å¦‚ä½•å®šä½ã€‚</p>
<p>è€ƒè™‘åˆ°å’±ä»¬çš„éå†ä¸å¯èƒ½ä»åå¾€å‰èµ°ï¼Œå› æ­¤è¿™ä¸ªâ€œå€’æ•°ç¬¬ N ä¸ªâ€ å’±ä»¬å®Œå…¨å¯ä»¥è½¬æ¢ä¸ºâ€œæ­£æ•°ç¬¬ <code>len - n + 1</code>"ä¸ªã€‚è¿™é‡Œè¿™ä¸ª <code>len</code> ä»£è¡¨é“¾è¡¨çš„æ€»é•¿åº¦ï¼Œæ¯”å¦‚è¯´å’±ä»¬é“¾è¡¨é•¿ä¸º 7ï¼Œé‚£ä¹ˆå€’æ•°ç¬¬ 1 ä¸ªå°±æ˜¯æ­£æ•°ç¬¬ 7 ä¸ªã€‚æŒ‰ç…§è¿™ä¸ªæ€è·¯å¾€ä¸‹åˆ†æï¼Œå¦‚æœèµ°ç›´æ¥éå†è¿™æ¡è·¯ï¼Œé‚£ä¹ˆè¿™ä¸ª <code>len</code> å°±éå¸¸å…³é”®äº†ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç›´æ¥éå†ä¸¤è¶Ÿï¼šç¬¬ä¸€è¶Ÿï¼Œè®¾ç½®ä¸€ä¸ªå˜é‡ <code>count = 0</code>ï¼Œæ¯éå†åˆ°ä¸€ä¸ªä¸ä¸ºç©ºçš„ç»“ç‚¹ï¼Œ<code>count</code> å°±åŠ  1ï¼Œä¸€ç›´éå†åˆ°é“¾è¡¨ç»“æŸä¸ºæ­¢ï¼Œå¾—å‡ºé“¾è¡¨çš„æ€»é•¿åº¦ <code>len</code>ï¼›æ ¹æ®è¿™ä¸ªæ€»é•¿åº¦ï¼Œå’±ä»¬å°±å¯ä»¥ç®—å‡ºå€’æ•°ç¬¬ <code>n</code> ä¸ªåˆ°åº•æ˜¯æ­£æ•°ç¬¬å‡ ä¸ªäº†ï¼ˆ<code>M = len - n + 1</code>ï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬éå†åˆ°ç¬¬<code> M - 1</code>ï¼ˆä¹Ÿå°±æ˜¯ <code>len - n</code>ï¼‰ ä¸ªç»“ç‚¹çš„æ—¶å€™å°±å¯ä»¥åœä¸‹æ¥ï¼Œæ‰§è¡Œåˆ é™¤æ“ä½œï¼ˆæƒ³ä¸€æƒ³ï¼Œä¸ºä»€ä¹ˆæ˜¯ç¬¬ <code>M-1</code> ä¸ªï¼Œè€Œä¸æ˜¯ç¬¬ <code>M</code> ä¸ªï¼Ÿå¦‚æœä½ è®¤çœŸè¯»äº†æˆ‘ä»¬å‰é¢çš„ç« èŠ‚ï¼Œå¿ƒä¸­ä¸€å®šä¼šæœ‰ä¸€ä¸ªæ¸…æ™°çš„ç­”æ¡ˆ^_^ï¼‰</p>
<p>ä¸è¿‡è¿™ç§è¶…è¿‡ä¸€æ¬¡çš„éå†å¿…ç„¶éœ€è¦å¼•èµ·æˆ‘ä»¬çš„æ³¨æ„ï¼Œæˆ‘ä»¬åº”è¯¥ä¸»åŠ¨å»æ€è€ƒï¼Œâ€œå¦‚æœä¸€æ¬¡éå†æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å¯ä»¥æ€ä¹ˆåšï¼Ÿâ€ï¼Œè¿™æ—¶å€™ï¼Œå°±è¦è¯·åŒæŒ‡é’ˆæ³•æ¥å¸®å¿™äº†ã€‚</p>
<h4 data-id="heading-119">å¿«æ…¢æŒ‡é’ˆç™»åœº</h4>
<p>æŒ‰ç…§æˆ‘ä»¬å·²ç»é¢„å‘Šè¿‡çš„æ€è·¯ï¼Œé¦–å…ˆä¸¤ä¸ªæŒ‡é’ˆ <code>slow</code> å’Œ <code>fast</code>ï¼Œå…¨éƒ¨æŒ‡å‘é“¾è¡¨çš„èµ·å§‹ä½â€”â€”<code>dummy</code> ç»“ç‚¹ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/17125fa8d6f683e0~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1278&amp;h=436&amp;s=33032&amp;e=png" alt="" loading="lazy"/></p>
<p>å¿«æŒ‡é’ˆå…ˆå‡ºå‘ï¼é—·å¤´èµ°ä¸Š <code>n</code> æ­¥ï¼Œåœ¨ç¬¬ <code>n</code> ä¸ªç»“ç‚¹å¤„æ‰“ä½ï¼Œè¿™é‡Œ <code>n=2</code>ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/17125fb3593dc39d~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1208&amp;h=436&amp;s=32178&amp;e=png" alt="" loading="lazy"/>
ç„¶åï¼Œå¿«æ…¢æŒ‡é’ˆä¸€èµ·å‰è¿›ï¼Œå½“å¿«æŒ‡é’ˆå‰è¿›åˆ°æœ€åä¸€ä¸ªç»“ç‚¹å¤„æ—¶ï¼Œä¸¤ä¸ªæŒ‡é’ˆå†ä¸€èµ·åœä¸‹æ¥ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/17125fbcda4d42eb~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1262&amp;h=480&amp;s=34196&amp;e=png" alt="" loading="lazy"/></p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/17125fc2466dd8b0~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1266&amp;h=462&amp;s=33756&amp;e=png" alt="" loading="lazy"/></p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/17125fcbaff12b8a~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1244&amp;h=404&amp;s=31858&amp;e=png" alt="" loading="lazy"/>
æ­¤æ—¶ï¼Œæ…¢æŒ‡é’ˆæ‰€æŒ‡çš„ä½ç½®ï¼Œå°±æ˜¯å€’æ•°ç¬¬ <code>n</code> ä¸ªç»“ç‚¹çš„å‰ä¸€ä¸ªç»“ç‚¹ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/14/17177b91579ddc7a~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1294&amp;h=422&amp;s=40943&amp;e=png" alt="" loading="lazy"/>
æˆ‘ä»¬åŸºäºè¿™ä¸ªç»“ç‚¹æ¥åšåˆ é™¤ï¼Œå¯ä»¥è¯´æ˜¯æ‰‹åˆ°æ“’æ¥ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/14/17177b88bdf6fe0e~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1282&amp;h=500&amp;s=48510&amp;e=png" alt="" loading="lazy"/></p>
<p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ€»ç»“ä¸€ä¸‹ï¼š<br/>
é“¾è¡¨åˆ é™¤é—®é¢˜ä¸­ï¼Œè‹¥èµ°ä¸¤æ¬¡éå†ï¼Œæˆ‘ä»¬åšäº†ä¸¤ä»¶äº‹ï¼š<br/>
1.æ±‚é•¿åº¦<br/>
2.åšå‡æ³•ï¼Œæ‰¾å®šä½ã€‚</p>
<p>è‹¥ç”¨å¿«æ…¢æŒ‡é’ˆï¼Œæˆ‘ä»¬å…¶å®æ˜¯æŠŠåšå‡æ³•å’Œæ‰¾å®šä½è¿™ä¸ªè¿‡ç¨‹ç»™èåˆäº†ã€‚é€šè¿‡å¿«æŒ‡é’ˆå…ˆè¡Œä¸€æ­¥ã€æ¥ç€å¿«æ…¢æŒ‡é’ˆä¸€èµ·å‰è¿›è¿™ä¸ªæ“ä½œï¼Œå·§å¦™åœ°æŠŠä¸¤ä¸ªæŒ‡é’ˆä¹‹é—´çš„å·®å€¼ä¿æŒåœ¨äº†â€œ<code>n</code>â€ä¸Šï¼ˆ<strong>ç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œæœ¬è´¨ä¸Šå…¶å®å°±æ˜¯å¯¹å…³é”®ä¿¡æ¯è¿›è¡Œæå‰è®°å¿†ï¼Œè¿™é‡Œå’±ä»¬ç›¸å½“äºç”¨ä¸¤ä¸ªæŒ‡é’ˆå¯¹å·®å€¼å®ç°äº†è®°å¿†</strong>ï¼‰ï¼Œè¿™æ ·å½“å¿«æŒ‡é’ˆèµ°åˆ°é“¾è¡¨æœ«å°¾ï¼ˆç¬¬ <code>len</code> ä¸ªï¼‰æ—¶ï¼Œæ…¢æŒ‡é’ˆåˆšå¥½å°±åœ¨ <code>len - n</code> è¿™ä¸ªåœ°æ–¹ç¨³ç¨³è½åœ°ã€‚</p>
<h3 data-id="heading-120">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">ListNode</span>} <span class="hljs-variable">head</span>
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">n</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">ListNode</span>}
 */</span>
<span class="hljs-keyword">const</span> removeNthFromEnd = <span class="hljs-keyword">function</span>(<span class="hljs-params">head, n</span>) {
    <span class="hljs-comment">// åˆå§‹åŒ– dummy ç»“ç‚¹</span>
    <span class="hljs-keyword">const</span> dummy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>()
    <span class="hljs-comment">// dummyæŒ‡å‘å¤´ç»“ç‚¹</span>
    dummy.<span class="hljs-property">next</span> = head
    <span class="hljs-comment">// åˆå§‹åŒ–å¿«æ…¢æŒ‡é’ˆï¼Œå‡æŒ‡å‘dummy</span>
    <span class="hljs-keyword">let</span> fast = dummy
    <span class="hljs-keyword">let</span> slow = dummy

    <span class="hljs-comment">// å¿«æŒ‡é’ˆé—·å¤´èµ° n æ­¥</span>
    <span class="hljs-keyword">while</span>(n!==<span class="hljs-number">0</span>){
        fast = fast.<span class="hljs-property">next</span>
        n--
    }
    
    <span class="hljs-comment">// å¿«æ…¢æŒ‡é’ˆä¸€èµ·èµ°</span>
    <span class="hljs-keyword">while</span>(fast.<span class="hljs-property">next</span>){
        fast = fast.<span class="hljs-property">next</span>
        slow = slow.<span class="hljs-property">next</span>
    }
    
    <span class="hljs-comment">// æ…¢æŒ‡é’ˆåˆ é™¤è‡ªå·±çš„åç»§ç»“ç‚¹</span>
    slow.<span class="hljs-property">next</span> = slow.<span class="hljs-property">next</span>.<span class="hljs-property">next</span>
    <span class="hljs-comment">// è¿”å›å¤´ç»“ç‚¹</span>
    <span class="hljs-keyword">return</span> dummy.<span class="hljs-property">next</span>
};

</code></pre>
<h2 data-id="heading-121">å¤šæŒ‡é’ˆæ³•â€”â€”é“¾è¡¨çš„åè½¬</h2>
<h3 data-id="heading-122">å®Œå…¨åè½¬ä¸€ä¸ªé“¾è¡¨</h3>
<blockquote>
<p>çœŸé¢˜æè¿°ï¼šå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸€ä¸ªé“¾è¡¨çš„å¤´ç»“ç‚¹ï¼Œåè½¬è¯¥é“¾è¡¨å¹¶è¾“å‡ºåè½¬åé“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹:<br/>
è¾“å…¥: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL<br/>
è¾“å‡º: 5-&gt;4-&gt;3-&gt;2-&gt;1-&gt;NULL</p>
</blockquote>
<h3 data-id="heading-123">æ€è·¯è§£è¯»</h3>
<p>è¿™é“é¢˜è™½ç„¶æ˜¯ä¸€é“æ–°é¢˜ï¼Œä½†ä½ è¦è¯´ä½ å®Œå…¨æ²¡æ€è·¯ï¼Œæˆ‘çœŸçš„å“­äº†orzã€‚è€å“¥ï¼Œæˆ‘çœŸæƒ³æŠŠè¿™å¥è¯åˆ»ä½ æ˜¾ç¤ºå™¨ä¸Šâ€”â€”<strong>å¤„ç†é“¾è¡¨çš„æœ¬è´¨ï¼Œæ˜¯å¤„ç†é“¾è¡¨ç»“ç‚¹ä¹‹é—´çš„æŒ‡é’ˆå…³ç³»</strong>ã€‚<br/>
æˆ‘å•¥ä¹Ÿä¸è¯´ï¼Œå°±ç»™ä½ ä¸€å¼ é“¾è¡¨çš„ç»“æ„å›¾ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/171260bdb3250b83~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1182&amp;h=294&amp;s=21722&amp;e=png" alt="" loading="lazy"/></p>
<p>æ¥ï¼Œä½ å‘Šè¯‰æˆ‘ï¼Œæˆ‘å¦‚ä½•æŠŠè¿™è´§é¢ å€’ä¸ªé¡ºåºå‘¢ï¼Ÿ<br/>
æ˜¯ä¸æ˜¯æƒ³åŠæ³•æŠŠæ¯ä¸ªç»“ç‚¹ next æŒ‡é’ˆçš„æŒ‡å‘ç»™åè¿‡æ¥å°±è¡Œäº†ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/171260d3c16a73ec~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1150&amp;h=368&amp;s=27586&amp;e=png" alt="" loading="lazy"/></p>
<p>ä½ åªè¦èƒ½æƒ³åˆ°è¿™ä¸€æ­¥ï¼Œå°±è¯´æ˜ä½ å¯¹é“¾è¡¨æ“ä½œç±»é¢˜ç›®å·²ç»æœ‰äº†æœ€å…³é”®çš„æ„ŸçŸ¥ï¼Œç»™ä½ åŒå‡»666~</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦ç¢ç£¨çš„æ˜¯å¦‚ä½•å»åè½¬æŒ‡é’ˆçš„æŒ‡å‘ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°ä¸‰ä¸ªæŒ‡é’ˆï¼Œå®ƒä»¬åˆ†åˆ«æŒ‡å‘ç›®æ ‡ç»“ç‚¹ï¼ˆcurï¼‰ã€ç›®æ ‡ç»“ç‚¹çš„å‰é©±ç»“ç‚¹ï¼ˆpreï¼‰ã€ç›®æ ‡ç»“ç‚¹çš„åç»§ç»“ç‚¹ï¼ˆnextï¼‰ã€‚è¿™é‡Œå’±ä»¬éšä¾¿æ‰¾ä¸ªç»“ç‚¹æ¥å¼€åˆ€ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/1712613307139215~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1254&amp;h=472&amp;s=31216&amp;e=png" alt="" loading="lazy"/></p>
<p>è¿™é‡Œæˆ‘åªéœ€è¦ä¸€ä¸ªç®€å•çš„<code>cur.next = pre</code>ï¼Œå°±åšåˆ°äº† next æŒ‡é’ˆçš„åè½¬ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/17126177a6f049a5~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1276&amp;h=466&amp;s=36856&amp;e=png" alt="" loading="lazy"/><br/>
æœ‰åŒå­¦ä¼šè¯´ï¼šé‚£ <code>next</code> ä¸æ˜¯å®Œå…¨æ²¡ç”¨åˆ°å—ï¼Ÿ<br/>
å½“ç„¶æœ‰ç”¨ï¼Œä½ ç…ç…ï¼Œå’±ä»¬åè½¬å®Œé“¾è¡¨å˜æˆå•¥æ ·äº†ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/17126184d0d41e31~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1142&amp;h=524&amp;s=34704&amp;e=png" alt="" loading="lazy"/></p>
<p>è¿™ä¼šå„¿æˆ‘è¦æ˜¯ä¸ç”¨ next ç»™ä½ æŒ‡ç€ cur åŸæœ¬çš„åç»§ç»“ç‚¹ï¼Œä½ ä¸Šå“ªå»å®šä½ä¸‹ä¸€ä¸ªç»“ç‚¹å‘¢ï¼Ÿéå†éƒ½æ²¡æ³•ç»§ç»­äº†å—·ã€‚</p>
<p>å’±ä»¬ä»ç¬¬ä¸€ä¸ªç»“ç‚¹å¼€å§‹ï¼Œæ¯ä¸ªç»“ç‚¹éƒ½ç»™å®ƒè¿›è¡Œä¸€æ¬¡ next æŒ‡é’ˆçš„åè½¬ã€‚åˆ°æœ€åä¸€ä¸ªç»“ç‚¹æ—¶ï¼Œæ•´ä¸ªé“¾è¡¨å°±å·²ç»è¢«æˆ‘ä»¬å½»åº•åè½¬æ‰äº†ã€‚</p>
<h3 data-id="heading-124">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">ListNode</span>} <span class="hljs-variable">head</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">ListNode</span>}
 */</span>
<span class="hljs-keyword">const</span> reverseList = <span class="hljs-keyword">function</span>(<span class="hljs-params">head</span>) {
    <span class="hljs-comment">// åˆå§‹åŒ–å‰é©±ç»“ç‚¹ä¸º null</span>
    <span class="hljs-keyword">let</span> pre = <span class="hljs-literal">null</span>;
    <span class="hljs-comment">// åˆå§‹åŒ–ç›®æ ‡ç»“ç‚¹ä¸ºå¤´ç»“ç‚¹</span>
    <span class="hljs-keyword">let</span> cur = head;
    <span class="hljs-comment">// åªè¦ç›®æ ‡ç»“ç‚¹ä¸ä¸º nullï¼Œéå†å°±å¾—ç»§ç»­</span>
    <span class="hljs-keyword">while</span> (cur !== <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// è®°å½•ä¸€ä¸‹ next ç»“ç‚¹</span>
        <span class="hljs-keyword">let</span> next = cur.<span class="hljs-property">next</span>;
        <span class="hljs-comment">// åè½¬æŒ‡é’ˆ</span>
        cur.<span class="hljs-property">next</span> = pre;
        <span class="hljs-comment">// pre å¾€å‰èµ°ä¸€æ­¥</span>
        pre = cur;
        <span class="hljs-comment">// curå¾€å‰èµ°ä¸€æ­¥</span>
        cur = next;
    }
    <span class="hljs-comment">// åè½¬ç»“æŸåï¼Œpre å°±ä¼šå˜æˆæ–°é“¾è¡¨çš„å¤´ç»“ç‚¹</span>
    <span class="hljs-keyword">return</span> pre
};
</code></pre>
<h3 data-id="heading-125">å±€éƒ¨åè½¬ä¸€ä¸ªé“¾è¡¨</h3>
<p>åè½¬é“¾è¡¨çœŸæ˜¯åº§é‡‘çŸ¿ï¼Œåè½¬å®Œæ•´ä½“åè½¬å±€éƒ¨ï¼Œåè½¬å®Œå±€éƒ¨è¿˜èƒ½æ¯ k ä¸ªä¸€ç»„èŠ±å¼åè½¬ï¼ˆæœ€åè¿™ä¸ªç•¥éš¾ï¼Œæˆ‘ä»¬ä¼šæ”¾åœ¨çœŸé¢˜è®­ç»ƒç¯èŠ‚æ¥åšï¼‰ã€‚è™½ç„¶éš¾åº¦ä¾æ¬¡è¿›é˜¶ï¼Œä½†åªè¦æŠŠæ¡ä½æ ¸å¿ƒæ€æƒ³å°±æ²¡é—®é¢˜ï¼Œä¸‹é¢å’±ä»¬æ¥çœ‹çœ‹å¦‚ä½•åè½¬å±€éƒ¨ï¼š</p>
<blockquote>
<p>çœŸé¢˜æè¿°ï¼šåè½¬ä»ä½ç½® m åˆ° n çš„é“¾è¡¨ã€‚è¯·ä½¿ç”¨ä¸€è¶Ÿæ‰«æå®Œæˆåè½¬ã€‚</p>
</blockquote>
<blockquote>
<p>è¯´æ˜:
1 â‰¤Â mÂ â‰¤Â nÂ â‰¤ é“¾è¡¨é•¿åº¦ã€‚</p>
</blockquote>
<blockquote>
<p>ç¤ºä¾‹:<br/>
è¾“å…¥: 1-&gt;2-&gt;3-&gt;4-&gt;5-&gt;NULL, m = 2, n = 4<br/>
è¾“å‡º: 1-&gt;4-&gt;3-&gt;2-&gt;5-&gt;NULL</p>
</blockquote>
<h3 data-id="heading-126">æ€è·¯è§£è¯»</h3>
<p>æˆ‘ä»¬ä»ç„¶æ˜¯ä»æŒ‡é’ˆåè½¬æ¥å…¥æ‰‹ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/171260bdb3250b83~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1182&amp;h=294&amp;s=21722&amp;e=png" alt="" loading="lazy"/></p>
<p>æŒ‰ç…§é¢˜ä¸­çš„ç¤ºä¾‹ï¼Œå‡å¦‚æˆ‘ä»¬éœ€è¦åè½¬çš„æ˜¯é“¾è¡¨çš„ç¬¬ 2-4 ä¹‹é—´çš„ç»“ç‚¹ï¼Œé‚£ä¹ˆå¯¹åº”çš„æŒ‡é’ˆé€†åºåä¼šæ˜¯è¿™ä¸ªæ ·å­ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/171262f560bc0f5e~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1160&amp;h=348&amp;s=27174&amp;e=png" alt="" loading="lazy"/></p>
<p>4æŒ‡3ï¼Œ3æŒ‡2ï¼Œè¿™éƒ½æ²¡é—®é¢˜ï¼Œå…³é”®åœ¨äºï¼Œå¦‚ä½•è®©1æŒ‡å‘4ã€è®©2æŒ‡å‘5å‘¢ï¼Ÿè¿™å°±è¦æ±‚æˆ‘ä»¬åœ¨å•çº¯çš„é‡å¤â€œé€†åºâ€è¿™ä¸ªåŠ¨ä½œä¹‹å¤–ï¼Œè¿˜éœ€è¦å¯¹è¢«é€†åºçš„åŒºé—´å‰åçš„ä¸¤ä¸ªç»“ç‚¹åšé¢å¤–çš„å¤„ç†ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/1712631ee4da721e~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1242&amp;h=368&amp;s=26040&amp;e=png" alt="" loading="lazy"/></p>
<p>ç”±äºæˆ‘ä»¬éå†é“¾è¡¨çš„é¡ºåºæ˜¯ä»å‰å¾€åéå†ï¼Œé‚£ä¹ˆä¸ºäº†é¿å…ç»“ç‚¹1å’Œç»“ç‚¹2éšç€éå†å‘åæ¨è¿›è¢«é—å¤±ï¼Œæˆ‘ä»¬éœ€è¦æå‰æŠŠ1ç»“ç‚¹ç¼“å­˜ä¸‹æ¥ã€‚è€Œç»“ç‚¹5å°±æ²¡æœ‰è¿™ä¹ˆéº»çƒ¦äº†ï¼šéšç€éå†çš„è¿›è¡Œï¼Œå½“æˆ‘ä»¬å®Œæˆäº†ç»“ç‚¹4çš„æŒ‡é’ˆåè½¬åï¼Œæ­¤æ—¶
cur æŒ‡é’ˆå°±æ°å¥½æŒ‡åœ¨ç»“ç‚¹5ä¸Šï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/29/171263684ef03dd0~tplv-t2oaga2asx-jj-mark:3024:0:0:0:q75.awebp#?w=1196&amp;h=520&amp;s=38102&amp;e=png&amp;b=ffffff" alt="" loading="lazy"/></p>
<p>æ­¤æ—¶æˆ‘ä»¬ç›´æ¥å°†ç»“ç‚¹2çš„ next æŒ‡é’ˆæŒ‡å‘ curã€å°†ç»“ç‚¹1çš„ next æŒ‡é’ˆæŒ‡å‘ pre å³å¯ã€‚</p>
<h3 data-id="heading-127">ç¼–ç å®ç°</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">ListNode</span>} <span class="hljs-variable">head</span>
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">m</span>
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">n</span>
 * <span class="hljs-doctag">@return</span> {<span class="hljs-type">ListNode</span>}
 */</span>
<span class="hljs-comment">// å…¥å‚æ˜¯å¤´ç»“ç‚¹ã€mã€n</span>
<span class="hljs-keyword">const</span> reverseBetween = <span class="hljs-keyword">function</span>(<span class="hljs-params">head, m, n</span>) {
    <span class="hljs-comment">// å®šä¹‰preã€curï¼Œç”¨leftHeadæ¥æ‰¿æ¥æ•´ä¸ªåŒºé—´çš„å‰é©±ç»“ç‚¹</span>
    <span class="hljs-keyword">let</span> pre,cur,leftHead
    <span class="hljs-comment">// åˆ«å¿˜äº†ç”¨ dummy å—·</span>
    <span class="hljs-keyword">const</span> dummy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListNode</span>()  
    <span class="hljs-comment">// dummyåç»§ç»“ç‚¹æ˜¯å¤´ç»“ç‚¹</span>
    dummy.<span class="hljs-property">next</span> = head
    <span class="hljs-comment">// pæ˜¯ä¸€ä¸ªæ¸¸æ ‡ï¼Œç”¨äºéå†ï¼Œæœ€åˆæŒ‡å‘ dummy</span>
    <span class="hljs-keyword">let</span> p = dummy  
    <span class="hljs-comment">// på¾€å‰èµ° m-1 æ­¥ï¼Œèµ°åˆ°æ•´ä¸ªåŒºé—´çš„å‰é©±ç»“ç‚¹å¤„</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=<span class="hljs-number">0</span>;i&lt;m-<span class="hljs-number">1</span>;i++){
        p = p.<span class="hljs-property">next</span>
    }
    <span class="hljs-comment">// ç¼“å­˜è¿™ä¸ªå‰é©±ç»“ç‚¹åˆ° leftHead é‡Œ</span>
    leftHead = p
    <span class="hljs-comment">// start æ˜¯åè½¬åŒºé—´çš„ç¬¬ä¸€ä¸ªç»“ç‚¹</span>
    <span class="hljs-keyword">let</span> start = leftHead.<span class="hljs-property">next</span>  
    <span class="hljs-comment">// pre æŒ‡å‘start</span>
    pre = start
    <span class="hljs-comment">// cur æŒ‡å‘ start çš„ä¸‹ä¸€ä¸ªç»“ç‚¹</span>
    cur = pre.<span class="hljs-property">next</span>
    <span class="hljs-comment">// å¼€å§‹é‡å¤åè½¬åŠ¨ä½œ</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i=m;i&lt;n;i++){
        <span class="hljs-keyword">let</span> next = cur.<span class="hljs-property">next</span>
        cur.<span class="hljs-property">next</span> = pre
        pre = cur
        cur = next
    }
    <span class="hljs-comment">//  leftHead çš„åç»§ç»“ç‚¹æ­¤æ—¶ä¸ºåè½¬åçš„åŒºé—´çš„ç¬¬ä¸€ä¸ªç»“ç‚¹</span>
    leftHead.<span class="hljs-property">next</span> = pre
    <span class="hljs-comment">// å°†åŒºé—´å†…åè½¬åçš„æœ€åä¸€ä¸ªç»“ç‚¹ next æŒ‡å‘ cur</span>
    start.<span class="hljs-property">next</span>=cur
    <span class="hljs-comment">// dummy.next æ°¸è¿œæŒ‡å‘é“¾è¡¨å¤´ç»“ç‚¹</span>
    <span class="hljs-keyword">return</span> dummy.<span class="hljs-property">next</span>
};
</code></pre>
<p>å°è´´å£«ï¼šæ¥¼ä¸Šçš„ä¸¤é“åè½¬é¢˜ç›®ï¼Œéƒ½å¯ä»¥ç”¨é€’å½’æ¥å®ç°ï¼Œä½ è¯•è¯•ï¼Ÿ</p>
<p>ï¼ˆé˜…è¯»è¿‡ç¨‹ä¸­æœ‰ä»»ä½•æƒ³æ³•æˆ–ç–‘é—®ï¼Œæˆ–è€…å•çº¯å¸Œæœ›å’Œç¬”è€…äº¤ä¸ªæœ‹å‹å•¥çš„ï¼Œæ¬¢è¿å¤§å®¶æ·»åŠ æˆ‘çš„å¾®ä¿¡xyalinodeä¸æˆ‘äº¤æµå“ˆ~ï¼‰</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å½“åˆ¸å•†æˆç«‹äº’è”ç½‘åˆ†å…¬å¸ï¼Œé¢å‘é•¿å°¾å®¢æˆ·çš„â€œæ™ºèƒ½åŒ–æ€»æ”»â€å¼€å§‹äº†]]></title>    <link>https://juejin.cn/post/7584043969687781428</link>    <guid>https://juejin.cn/post/7584043969687781428</guid>    <pubDate>2025-12-16T08:51:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584043969687781428" data-draft-id="7584071941025071119" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å½“åˆ¸å•†æˆç«‹äº’è”ç½‘åˆ†å…¬å¸ï¼Œé¢å‘é•¿å°¾å®¢æˆ·çš„â€œæ™ºèƒ½åŒ–æ€»æ”»â€å¼€å§‹äº†"/> <meta itemprop="keywords" content="APP"/> <meta itemprop="datePublished" content="2025-12-16T08:51:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="FinClip"/> <meta itemprop="url" content="https://juejin.cn/user/395479918322696"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å½“åˆ¸å•†æˆç«‹äº’è”ç½‘åˆ†å…¬å¸ï¼Œé¢å‘é•¿å°¾å®¢æˆ·çš„â€œæ™ºèƒ½åŒ–æ€»æ”»â€å¼€å§‹äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/395479918322696/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    FinClip
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T08:51:57.000Z" title="Tue Dec 16 2025 08:51:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿‘æœŸï¼Œåˆä¸€å®¶å¤´éƒ¨åˆ¸å•†å®£å¸ƒæˆç«‹äº’è”ç½‘åˆ†å…¬å¸ï¼Œåœ¨ä¸šå†…æ¿€èµ·ä¸å°æ³¢æ¾œã€‚æœ‰äººè´¨ç–‘è¿™æ˜¯â€œæ–°ç“¶è£…æ—§é…’â€ï¼Œä½†çœŸæ­£æ´å¯Ÿè¡Œä¸šæ¼”è¿›çš„äººä¼šæ˜ç™½ï¼šè¿™å¹¶éç®€å•å›å½’ï¼Œè€Œæ˜¯ä¸€åœºé¢å‘AIæ—¶ä»£å®¢æˆ·ç»è¥ä½“ç³»çš„é‡æ„ã€‚Â </p>
<p>åå¹´å‰ï¼Œäº’è”ç½‘åˆ†å…¬å¸çš„ä½¿å‘½æ˜¯â€œè·å®¢â€ï¼Œåœ¨æµé‡çº¢åˆ©æœŸè·‘é©¬åœˆåœ°ï¼›åå¹´åçš„ä»Šå¤©ï¼Œå…¶æ ¸å¿ƒå‘½é¢˜å·²è½¬å˜ä¸ºâ€œè¿è¥â€ã€‚</p>
<p>å¦‚ä½•æ¿€æ´»å­˜é‡ã€ç‰¹åˆ«æ˜¯é‚£è§„æ¨¡åºå¤§å´é•¿æœŸæ²‰é»˜çš„é•¿å°¾å®¢æˆ·ï¼Ÿ</p>
<p>çº¿ä¸‹æŠ•é¡¾äº§èƒ½æœ‰é™ï¼Œä¼ ç»Ÿèœå•å¼Appäº¤äº’ä½æ•ˆï¼Œå¦‚ä½•è®©æµ·é‡å®¢æˆ·è·å¾—ä¸å…¶èµ„äº§è§„æ¨¡ç›¸åŒ¹é…çš„æ™ºèƒ½æœåŠ¡ï¼Œæˆä¸ºæ‘†åœ¨æ¯å®¶åˆ¸å•†é¢å‰çš„å¿…ç­”é¢˜ã€‚Â </p>
<p>è€Œåˆ¸å•†Appè¿›åŒ–çš„ä¸‹ä¸€ç«™å°±æ˜¯ï¼šä»äº¤æ˜“å·¥å…·å‡çº§ä¸ºæ™ºèƒ½æœåŠ¡ä½“ï¼Œä»â€œäººæ‰¾åŠŸèƒ½â€èµ°å‘â€œæœåŠ¡æ‡‚äººâ€ã€‚</p>
<p>AIæŠ€æœ¯ä¸å†æ˜¯é”¦ä¸Šæ·»èŠ±çš„ç‚¹ç¼€ï¼Œè€Œæ˜¯é‡å¡‘å®¢æˆ·å…³ç³»ã€æ‰¿è½½é•¿å°¾è¿è¥çš„å…³é”®åŸºç¡€è®¾æ–½ã€‚Â </p>
<p>é‚£ä¹ˆï¼ŒAIæ—¶ä»£çš„é‡‘èAppåº”è¯¥â€œé•¿â€ä»€ä¹ˆæ ·å­ï¼Ÿ</p>
<p><strong>Appçš„â€œå¯¹è¯å³æœåŠ¡â€èƒ½åŠ›</strong></p>
<p>ç°æœ‰åˆ¸å•†Appæœ¬è´¨æ˜¯åŠŸèƒ½çš„é›†åˆä½“ï¼šè¡Œæƒ…ã€äº¤æ˜“ã€èµ„è®¯ã€ç†è´¢â€¦â€¦å½¼æ­¤å‰²è£‚ï¼Œä¾èµ–ç”¨æˆ·å±‚å±‚ç‚¹å‡»å¯»æ‰¾ã€‚å¯¹äºé•¿å°¾å®¢æˆ·è€Œè¨€ï¼Œå­¦ä¹ æˆæœ¬é«˜ã€æ“ä½œè·¯å¾„å¤æ‚ï¼Œå¯¼è‡´è®¸å¤šæœåŠ¡åŠŸèƒ½â€œæ²‰ç¡â€ã€‚Â </p>
<p>è€ŒAIåŸç”Ÿæ€ç»´ä¸‹çš„Appï¼Œåº”æˆä¸ºä¸€ä¸ªæ‡‚æ„å›¾ã€ä¼šè°ƒåº¦ã€èƒ½èåˆçš„æ™ºèƒ½ä½“Appã€‚</p>
<p>ç”¨æˆ·æ— éœ€å­¦ä¹ å¯¼èˆªé€»è¾‘ï¼Œåªéœ€ç”¨è‡ªç„¶è¯­è¨€æå‡ºéœ€æ±‚ï¼šâ€œå¸®æˆ‘çœ‹çœ‹æ–°èƒ½æºåŸºé‡‘çš„è¿‘æœŸèµ°åŠ¿å’Œé£é™©è¯„ä¼°â€â€œå¯¹æ¯”ä¸€ä¸‹æˆ‘æŒä»“é‡Œè¿™ä¸¤åªè‚¡ç¥¨çš„æ³¢åŠ¨æ€§â€ã€‚ç³»ç»Ÿèƒ½ç†è§£å¤æ‚æ„å›¾ï¼Œè‡ªåŠ¨è°ƒç”¨åç«¯æ•°æ®ä¸æœåŠ¡ï¼Œç”Ÿæˆç»“æ„åŒ–çš„å›ç­”ç”šè‡³åŠ¨æ€äº¤äº’ç•Œé¢ã€‚Â </p>
<p>è¿™æ­£æ˜¯FinClip Chatkitæ‰€å®ç°çš„â€œä¼šè¯å³æœåŠ¡â€æ–°èŒƒå¼ã€‚</p>
<p>å®ƒé€šè¿‡ç”Ÿæˆå¼UIå¼•æ“ï¼Œå¯å°†å¯¹è¯å®æ—¶è½¬åŒ–ä¸ºå¯è§†åŒ–å›¾è¡¨ã€äº§å“å¡ç‰‡æˆ–äº¤æ˜“é¢æ¿ï¼Œå®ç°â€œäº¤æµä¸­äº¤æ˜“â€ï¼›å…¶ä¸Šä¸‹æ–‡æ™ºèƒ½ç®¡ç†åŸºäºå‘é‡æ•°æ®åº“ï¼Œèƒ½è®°å¿†ç”¨æˆ·åå¥½ã€æŒä»“å†å²ä¸é£é™©å±æ€§ï¼Œè®©æ¯æ¬¡å¯¹è¯éƒ½å»¶ç»­è®¤çŸ¥ï¼Œæä¾›çœŸæ­£ä¸ªæ€§åŒ–çš„åŠ©ç†å¼æœåŠ¡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a8450a5b5694c12bc10abeb244ba7da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmluQ2xpcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766479916&amp;x-signature=mzk%2BKsj7QEMX4NNzvDMLsKaj%2BnA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>è®©AIè®°ä½â€œä¸Šä¸‹æ–‡â€</strong></p>
<p><strong>å¸®å®¢æˆ·å‚¨å­˜è®°å¿†</strong></p>
<p>é•¿å°¾å®¢æˆ·ç»è¥çš„æ ¸å¿ƒåœ¨äºç†è§£ã€‚</p>
<p>ä¼ ç»Ÿæ¨¡å¼ä¸‹ï¼Œå®¢æˆ·æ•°æ®æ•£è½åœ¨ä¸åŒä¸šåŠ¡çº¿ï¼Œè¡Œä¸ºä¸åå¥½éš¾ä»¥å½¢æˆè¿è´¯ç”»åƒã€‚äº’è”ç½‘åˆ†å…¬å¸è¦æ¨åŠ¨çš„â€œçº¿ä¸Šç»è¥ç³»ç»ŸåŒ–â€ï¼Œé¦–å…ˆå¿…é¡»æ˜¯æ•°æ®ä¸è®¤çŸ¥çš„ç³»ç»ŸåŒ–ã€‚Â </p>
<p>FinClip Chatkitçš„â€œé•¿æœŸè®°å¿†ä¸è¯­ä¹‰è®°å¿†ä½“ç³»â€ï¼Œèƒ½å¤Ÿè·¨ä¼šè¯æŒç»­ç§¯ç´¯ç”¨æˆ·ç”»åƒï¼Œå°†ç¦»æ•£çš„è¡Œä¸ºæ•°æ®è½¬åŒ–ä¸ºå¯æ¨ç†çš„å®¢æˆ·æƒ…å¢ƒã€‚</p>
<p>å½“å®¢æˆ·è¯¢é—®â€œå½“å‰å¸‚åœºéœ‡è¡ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿâ€æ—¶ï¼Œç³»ç»Ÿä¸ä»…èƒ½å›ç­”å¸‚åœºåˆ†æï¼Œè¿˜å¯ç»“åˆè¯¥å®¢æˆ·çš„å†å²æé—®ã€æŒä»“ç»“æ„ã€é£é™©æ‰¿å—åŠ›ï¼Œæä¾›æœ‰é’ˆå¯¹æ€§çš„èµ„äº§æ£€è§†å»ºè®®æˆ–é…ç½®è°ƒæ•´æ–¹æ¡ˆï¼ŒæŠŠâ€œåƒäººåƒé¢â€ä»å£å·å˜ä¸ºå¯è¿è¡Œçš„æœºåˆ¶ã€‚</p>
<p><strong>æ•æ·ä½“éªŒä¸å®‰å…¨åˆè§„</strong></p>
<p>äº’è”ç½‘åˆ†å…¬å¸å¾€å¾€éœ€è¦ç»Ÿç­¹Appã€ä¼å¾®ã€å°ç¨‹åºç­‰å¤šç«¯è§¦ç‚¹ï¼Œå®ç°ä¸€ä½“åŒ–è¿è¥ã€‚è¿™å°±è¦æ±‚åº•å±‚æœåŠ¡èƒ½åŠ›èƒ½å¤Ÿçµæ´»åµŒå…¥ã€ä½“éªŒä¸€è‡´ã€‚Â </p>
<p>FinClip Chatkitæ”¯æŒå¤šç«¯åŸç”ŸåµŒå…¥ï¼ˆiOS/Android/Webï¼‰ä¸å°ç¨‹åºç”Ÿæ€æ— ç¼é›†æˆï¼Œå¯åœ¨èŠå¤©æµä¸­ç›´æ¥å”¤èµ·ç†è´¢è´­ä¹°ã€ä¸šåŠ¡åŠç†ç­‰è½»é‡åº”ç”¨ï¼Œå®ç°â€œå¯¹è¯å³é—­ç¯â€ã€‚</p>
<p>åŒæ—¶ï¼Œæ”¯æŒç«¯äº‘æ¨¡å‹çµæ´»éƒ¨ç½²ï¼Œæ—¢å¯ç”¨äº‘ç«¯å¤§æ¨¡å‹å¤„ç†å¤æ‚è¯­ä¹‰ï¼Œä¹Ÿå¯é€šè¿‡æœ¬åœ°åŒ–éƒ¨ç½²ä¿éšœé‡‘èæ•°æ®å®‰å…¨ï¼Œæ»¡è¶³åˆè§„è¦æ±‚ã€‚</p>
<p>ä¸€åœºé™é»˜çš„ç«äº‰åŠ›é‡æ„</p>
<p>æœªæ¥ä¸‰åˆ°äº”å¹´ï¼Œåˆ¸å•†ä¹‹é—´çš„ç«äº‰ï¼Œå°†ä¸å†æ˜¯ç‰Œç…§æˆ–æµé‡çš„ç«äº‰ï¼Œè€Œæ˜¯è°æ›´æ‡‚å®¢æˆ·ã€æ›´å¿«å“åº”ã€æ›´æ™ºèƒ½æœåŠ¡çš„ç«äº‰ã€‚Â </p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b823863afe44b79a82b0b0f6fbce4e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRmluQ2xpcA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766479916&amp;x-signature=W1iWn8hjI%2FYuA4alR%2FituDuywik%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é‚£äº›ç‡å…ˆå°†AIèƒ½åŠ›æ·±åº¦èåˆè¿›å®¢æˆ·ç»è¥ä½“ç³»çš„æœºæ„ï¼Œä¸ä»…å°†æ¿€æ´»æ²‰ç¡çš„é•¿å°¾ï¼Œæ›´å°†åœ¨æ–°ä¸€è½®çš„æœåŠ¡æ™ºèƒ½åŒ–æµªæ½®ä¸­ï¼Œæ„å»ºèµ·çœŸæ­£å·®å¼‚åŒ–çš„æŠ¤åŸæ²³ã€‚</p>
<p>Â ä½ ï¼Œå‡†å¤‡å¥½äº†å—ï¼Ÿ</p>
<p><strong>å…³äºFinClip Chatkit</strong></p>
<p>Chatkitæ˜¯å‡¡æ³°æå®¢FinClipè¶…çº§åº”ç”¨æ™ºèƒ½å¹³å°çš„ä¸€æ¬¡é‡å¤§èƒ½åŠ›å‡çº§ï¼Œå®ƒèƒ½åŠ©åŠ›ä¼ä¸šæ„å»ºå…·å¤‡æ·±åº¦ä¸Šä¸‹æ–‡æ„ŸçŸ¥ã€æµå¼ç”ŸæˆåŸç”ŸUIçš„è¶…çº§Appã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆAnthropicè¯´ï¼šAIçš„æœªæ¥æ˜¯Skillsä¸æ˜¯Agentï¼Ÿ]]></title>    <link>https://juejin.cn/post/7584094504631320585</link>    <guid>https://juejin.cn/post/7584094504631320585</guid>    <pubDate>2025-12-16T07:05:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584094504631320585" data-draft-id="7584110439932493870" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆAnthropicè¯´ï¼šAIçš„æœªæ¥æ˜¯Skillsä¸æ˜¯Agentï¼Ÿ"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2025-12-16T07:05:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºæ³ŠAI"/> <meta itemprop="url" content="https://juejin.cn/user/3572727470361578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆAnthropicè¯´ï¼šAIçš„æœªæ¥æ˜¯Skillsä¸æ˜¯Agentï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3572727470361578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºæ³ŠAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T07:05:53.000Z" title="Tue Dec 16 2025 07:05:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>éšç€AIæ™ºèƒ½ä½“ï¼ˆAgentï¼‰æŠ€æœ¯çš„å¿«é€Ÿæ¼”è¿›ï¼Œå½“å‰å¼€å‘é¢†åŸŸæ™®éå­˜åœ¨ä¸€ç§è®¤çŸ¥åå·®ï¼šé’ˆå¯¹ä¸åŒç»†åˆ†åœºæ™¯å’Œå…·ä½“ç”¨ä¾‹ï¼Œå¼€å‘è€…å€¾å‘äºä»é›¶å¼€å§‹åˆ›å»ºç‹¬ç«‹çš„Agentã€‚</p>
<p>Anthropicå…¬å¸çš„Barry Zhangä¸Mahesh Muragåœ¨è¿‘æœŸæ¼”è®²ä¸­é¢ è¦†äº†è¿™ä¸€ä¼ ç»Ÿæ€è·¯ï¼Œä»–ä»¬å€¡å¯¼çš„åˆ›æ–°æ–¹æ³•è®ºæ˜ç¡®æŒ‡å‡ºï¼š"èšç„¦æŠ€èƒ½ï¼ˆSkillsï¼‰å¼€å‘ï¼Œè€Œéé‡å¤æ„å»ºAgent"ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a39bf72f6ca941b2a8cc9e9a7eb01619~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766473553&amp;x-signature=L71%2FNj5gFKWq%2FLTXU5ueG14KPJc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>1. ç°æœ‰çš„é—®é¢˜ï¼šé€šç”¨æ™ºèƒ½ vs. é¢†åŸŸä¸“é•¿</strong></p>
<p>å½“å‰AI Agentè™½å…·å¤‡å“è¶Šçš„æ™ºå•†ä¸é€šç”¨èƒ½åŠ›ï¼Œå´æ™®éå­˜åœ¨â€Œé¢†åŸŸä¸“ä¸šçŸ¥è¯†ï¼ˆExpertiseï¼‰â€Œçš„çŸ­æ¿ã€‚</p>
<p>æ¼”è®²è€…é€šè¿‡ç±»æ¯”è¯´æ˜ï¼šè§£å†³ç¨åŠ¡é—®é¢˜æ—¶ï¼Œäººä»¬éœ€è¦çš„æ˜¯ç²¾é€šç¨åŠ¡çš„ä¸“å®¶ï¼ˆBarryï¼‰ï¼Œè€Œéå³ä¾¿æ™ºå•†é«˜è¾¾300å´éœ€ä»é›¶ç ”è¯»ç¨æ³•çš„æ•°å­¦å¤©æ‰ï¼ˆMaheshï¼‰ã€‚</p>
<p>ç°æœ‰Agentæ°ä¼¼åè€…ï¼Œè‹¥æ— ä¸“ä¸šèƒŒæ™¯ä¸æŒ‡å¯¼æ”¯æŒï¼Œåœ¨å…·ä½“ä»»åŠ¡ä¸­éš¾ä»¥è¾¾åˆ°ç†æƒ³è¡¨ç°ã€‚</p>
<p><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</strong></p>
<p><strong>2. ä»€ä¹ˆæ˜¯"Agent Skills"ï¼Ÿ</strong></p>
<p><strong>é—®é¢˜è§£å†³æ–¹æ¡ˆâ€Œ</strong>ï¼šAnthropic åˆ›æ–°æ€§åœ°å¼€å‘äº† Agent Skillsï¼ˆæ™ºèƒ½ä½“æŠ€èƒ½ï¼‰æ¡†æ¶ã€‚</p>
<p><strong>â€Œæ ¸å¿ƒå®šä¹‰â€Œ</strong>ï¼šå°†ç¨‹åºæ€§çŸ¥è¯†å°è£…ä¸ºæ ‡å‡†åŒ–å•å…ƒï¼Œå…¶åº•å±‚é€»è¾‘ä¸æ–‡ä»¶å¤¹ç»“æ„ä¸€è‡´ã€‚</p>
<p><strong>â€Œæ¨¡å—ç»„æˆâ€Œ</strong>ï¼š</p>
<p>æç¤ºè¯ï¼ˆPromptsï¼‰ã€æ‰§è¡Œè„šæœ¬ï¼ˆScriptsï¼‰ã€é…å¥—è¯´æ˜æ–‡æ¡£</p>
<p><strong>â€Œè®¾è®¡ä¼˜åŠ¿â€Œ</strong>ï¼š</p>
<p>â€Œç›´è§‚æ€§â€Œï¼šé‡‡ç”¨æ–‡ä»¶ç³»ç»Ÿæ¶æ„ï¼Œå¤©ç„¶é€‚é…Gitç‰ˆæœ¬æ§åˆ¶ã€Google Driveåä½œç­‰ç°æœ‰å·¥ä½œæµ</p>
<p>â€Œæ‰©å±•æ€§â€Œï¼šæ”¯æŒé€šè¿‡ä»£ç è„šæœ¬å®ç°å·¥å…·åŠŸèƒ½ï¼Œåˆ©ç”¨ä»£ç çš„è‡ªæ–‡æ¡£åŒ–å’Œå¯è¿­ä»£ç‰¹æ€§ï¼Œæ˜¾è‘—æå‡æŒ‡ä»¤æ‰§è¡Œç²¾åº¦</p>
<p><strong>3. è¿ä½œæœºåˆ¶ï¼šèŠ‚çœä¸Šä¸‹æ–‡çª—å£</strong></p>
<p>ä¸ºé¿å…Agentåœ¨æŒæ¡æ•°ç™¾é¡¹æŠ€èƒ½æ—¶è¶…å‡ºä¸Šä¸‹æ–‡çª—å£ï¼ˆContext Windowï¼‰çš„å®¹é‡é™åˆ¶ï¼ŒAnthropicåˆ›æ–°æ€§åœ°å¼•å…¥äº†æ¸è¿›å¼æŠ«éœ²ï¼ˆProgressive Disclosureï¼‰æœºåˆ¶ã€‚</p>
<p>è¯¥æœºåˆ¶ä¸‹ï¼Œæ¨¡å‹åœ¨åˆå§‹è¿è¡Œé˜¶æ®µä»…èƒ½è®¿é—®æŠ€èƒ½çš„å…ƒæ•°æ®ï¼ˆMetadataï¼‰ï¼Œå¾…Agentä¸»åŠ¨è°ƒç”¨ç‰¹å®šæŠ€èƒ½åï¼Œæ‰ä¼šè¿›ä¸€æ­¥åŠ è½½å…¶å®Œæ•´æŒ‡ä»¤ä¸ç›¸å…³æ–‡ä»¶å†…å®¹ã€‚</p>
<p><strong>4. è“¬å‹ƒå‘å±•çš„ç”Ÿæ€ç³»ç»Ÿ</strong></p>
<p>è‡ªå‘å¸ƒä»¥æ¥ï¼ŒæŠ€èƒ½ç”Ÿæ€ç³»ç»Ÿå·²å½¢æˆä¸‰å¤§æ ¸å¿ƒç±»åˆ«ï¼š</p>
<p><strong>â€ŒåŸºç¡€æŠ€èƒ½â€Œ</strong></p>
<p>ä¸ºAgentæä¾›é€šç”¨åŠŸèƒ½æ”¯æŒï¼ŒåŒ…æ‹¬Officeæ–‡æ¡£å¤„ç†åŠç§‘ç ”ä»»åŠ¡æ‰§è¡Œï¼ˆä¾‹å¦‚ç”Ÿç‰©ä¿¡æ¯å­¦æ•°æ®åˆ†æåœºæ™¯ï¼‰ã€‚</p>
<p><strong>â€Œåˆä½œä¼™ä¼´æŠ€èƒ½â€Œ</strong></p>
<p>å®ç°ç¬¬ä¸‰æ–¹å·¥å…·çš„æ— ç¼æ•´åˆã€‚å…¸å‹æ¡ˆä¾‹ï¼šNotionå¼€å‘äº†å¸®åŠ©Claudeæ·±åº¦è§£æå·¥ä½œåŒºæ•°æ®çš„æŠ€èƒ½ï¼›Browserbaseåˆ™æä¾›äº†æµè§ˆå™¨è‡ªåŠ¨åŒ–æ“ä½œæŠ€èƒ½ã€‚</p>
<p><strong>â€Œä¼ä¸šå†…éƒ¨æŠ€èƒ½â€Œ</strong></p>
<p>å½“å‰å‘å±•æœ€è¿…çŒ›çš„é¢†åŸŸã€‚å¤´éƒ¨ä¼ä¸šæ­£é€šè¿‡å®šåˆ¶åŒ–æŠ€èƒ½è®­ç»ƒAgentï¼Œä½¿å…¶é€‚é…å†…éƒ¨ä»£ç è§„èŒƒã€æ“ä½œä¸“å±è½¯ä»¶æˆ–å®Œæˆç‰¹å®šè´¢åŠ¡æµç¨‹ã€‚</p>
<p><strong>5. é¢å‘æœªæ¥çš„æ¶æ„ï¼šMCP + Skills</strong></p>
<p>Anthropic æå‡ºäº†ä¸€ç§æ˜ç¡®çš„é€šç”¨æ™ºèƒ½ä½“æ¶æ„æ¡†æ¶ï¼š</p>
<p>â€ŒAgent Loopâ€Œï¼šè´Ÿè´£è°ƒæ§æ¨¡å‹çš„æ¨ç†æµç¨‹</p>
<p>â€ŒRuntime ç¯å¢ƒâ€Œï¼šé›†æˆæ–‡ä»¶ç®¡ç†ä¸ä»£ç è¿è¡ŒåŠŸèƒ½</p>
<p>â€ŒMCP (Model Context Protocol)â€Œï¼šä½œä¸ºå¯¹æ¥å¤–éƒ¨æ•°æ®ä¸å·¥å…·çš„æ¥å£ï¼ˆå®ç°ç³»ç»Ÿä¸å¤–éƒ¨äº¤äº’çš„æ ¸å¿ƒé€šé“ï¼‰</p>
<p>â€ŒSkillsâ€Œï¼šå°è£…é¢†åŸŸä¸“ä¸šçŸ¥è¯†åº“ï¼ˆæ™ºèƒ½ä½“çš„è®¤çŸ¥å‚¨å¤‡ï¼‰</p>
<p>è¯¥è®¾è®¡ä½¿å¾—ä¸šåŠ¡ä¸“å®¶ï¼ˆå¦‚è´¢åŠ¡/æ³•åŠ¡äººå‘˜ï¼‰èƒ½å¤Ÿé€šè¿‡é…ç½®åŸºç¡€æŠ€èƒ½æ¨¡å—æ¥å¢å¼ºAIçš„åŠŸèƒ½è¾¹ç•Œã€‚</p>
<p><strong>6. ç»ˆææ„¿æ™¯ï¼šè‡ªæˆ‘è¿›åŒ–çš„çŸ¥è¯†åº“</strong></p>
<p>æœ€è®©äººæœŸå¾…çš„çªç ´åœ¨äºAIçš„è¿›åŒ–èƒ½åŠ›ã€‚â€Œ</p>
<p>Claudeå·²å…·å¤‡è‡ªä¸»åˆ›å»ºæŠ€èƒ½çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œå½“å®ƒæŒæ¡äº†ä¸€é¡¹æ–°ä»»åŠ¡ï¼ˆå¦‚æ’°å†™ç‰¹å®šé£æ ¼çš„PPTè„šæœ¬ï¼‰ï¼Œèƒ½å¤Ÿå°†è¯¥èƒ½åŠ›å°è£…ä¸ºå¯å¤ç”¨çš„"æŠ€èƒ½"æ¨¡å—ã€‚</p>
<p>è¿™ç§æœºåˆ¶ä½¿"ç»éªŒç§¯ç´¯"è½¬åŒ–ä¸ºå®ä½“åŒ–èµ„äº§ã€‚é€šè¿‡æŒç»­çš„æŠ€èƒ½è¿­ä»£ï¼Œç¬¬30å¤©çš„Claudeå°†å±•ç°å‡ºè¿œè¶…åˆå§‹ç‰ˆæœ¬çš„èƒ½åŠ›ç»´åº¦ã€‚</p>
<p><strong>æ€»ç»“</strong></p>
<p>æ¼”è®²ç»“å°¾é€šè¿‡è®¡ç®—æœºæ¼”è¿›å²æ„å»ºäº†ä¸€ä¸ªå·§å¦™æ¯”å–»ï¼š</p>
<p>â€Œæ¨¡å‹ (Model)â€Œ å¦‚åŒ â€Œå¤„ç†å™¨ (Processor)â€Œï¼šå…·å¤‡æƒŠäººæ½œåŠ›å´éš¾ä»¥ç‹¬ç«‹å‘æŒ¥ä½œç”¨ã€‚</p>
<p>â€ŒRuntime/Agentâ€Œ åˆ™ç±»æ¯” â€Œæ“ä½œç³»ç»Ÿ (OS)â€Œï¼šæ ¸å¿ƒèŒèƒ½åœ¨äºèµ„æºåè°ƒä¸ç•Œé¢ç®¡ç†ã€‚</p>
<p>è€Œ â€ŒæŠ€èƒ½ (Skills)â€Œ æ°ä¼¼ â€Œåº”ç”¨ç¨‹åº (Software)â€Œï¼šçœŸæ­£ä½“ç°ä¸“ä¸šä»·å€¼ã€å®ç°å…·ä½“åŠŸèƒ½çš„è½½ä½“ã€‚</p>
<p>å½“å‰æ›´åº”èšç„¦å¼€å‘å¤šå…ƒåŒ–çš„"åº”ç”¨ç¨‹åº"ï¼ˆSkillsï¼‰ï¼Œè€Œéé‡å¤æ„å»ºåŸºç¡€"æ“ä½œç³»ç»Ÿ"ï¼ˆAgentï¼‰ã€‚</p>
<p><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨<a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer">æ™ºæ³ŠAI</a>ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•]]></title>    <link>https://juejin.cn/post/7584243498527080448</link>    <guid>https://juejin.cn/post/7584243498527080448</guid>    <pubDate>2025-12-16T07:05:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584243498527080448" data-draft-id="7584243498527031296" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-16T07:05:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¥å¥‡å°æ±¤åœ†"/> <meta itemprop="url" content="https://juejin.cn/user/1151943919285431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1151943919285431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¥å¥‡å°æ±¤åœ†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T07:05:16.000Z" title="Tue Dec 16 2025 07:05:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Rabin-Karpç®—æ³•</h2>
<p>Rabin-Karpç®—æ³•æ˜¯ä¸€ç§<strong>åŸºäºå“ˆå¸Œå‡½æ•°çš„å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•</strong>ï¼Œç”± Michael O. Rabin å’Œ Richard M. Karp äº1987å¹´æå‡ºï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯ç”¨<strong>å“ˆå¸Œå‡½æ•°</strong>å°†æ¨¡å¼ä¸²å’Œæ–‡æœ¬ä¸²ä¸­çš„å­ä¸²è½¬æ¢ä¸ºæ•°å€¼è¿›è¡Œæ¯”è¾ƒï¼Œé¿å…å¤§é‡ä¸å¿…è¦çš„å­—ç¬¦æ¯”è¾ƒã€‚è¿™ä¸ªç®—æ³•ç‰¹åˆ«é€‚åˆ<strong>å¤šæ¨¡å¼ä¸²åŒ¹é…åœºæ™¯</strong>ï¼Œæ—¶é—´å¤æ‚åº¦å¹³å‡ä¸ºO(n+m)ï¼Œnæ˜¯æ–‡æœ¬ä¸²é•¿åº¦ï¼Œmæ˜¯æ¨¡å¼ä¸²é•¿åº¦ã€‚</p>
<p>Rabin-Karpç®—æ³•çš„å…³é”®åœ¨äºä½¿ç”¨<strong>æ»šåŠ¨å“ˆå¸Œå‡½æ•°</strong>ï¼ˆRolling Hashï¼‰ï¼Œå®ƒå¯ä»¥åœ¨å¸¸æ•°æ—¶é—´å†…è®¡ç®—å‡ºæ»‘åŠ¨çª—å£çš„æ–°å“ˆå¸Œå€¼ï¼Œä¿è¯ç®—æ³•åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹çš„é«˜æ•ˆæ€§ã€‚</p>
<h3 data-id="heading-1">ç®—æ³•æ­¥éª¤</h3>
<ol>
<li>
<p>è®¡ç®—æ¨¡å¼ä¸²çš„å“ˆå¸Œå€¼</p>
</li>
<li>
<p>è®¡ç®—æ–‡æœ¬ä¸²ä¸­é•¿åº¦ä¸ºmçš„ç¬¬ä¸€ä¸ªå­ä¸²çš„å“ˆå¸Œå€¼ï¼ˆmä¸ºæ¨¡å¼ä¸²é•¿åº¦ï¼‰</p>
</li>
<li>
<p>åœ¨æ–‡æœ¬ä¸²ä¸Šæ»‘åŠ¨çª—å£ï¼Œå¯¹äºæ¯ä¸ªä½ç½®ï¼š</p>
<ul>
<li>ä½¿ç”¨æ»šåŠ¨å“ˆå¸ŒæŠ€æœ¯é«˜æ•ˆè®¡ç®—å½“å‰çª—å£çš„å“ˆå¸Œå€¼</li>
<li>å¦‚æœå“ˆå¸Œå€¼ä¸æ¨¡å¼ä¸²ç›¸ç­‰ï¼Œåˆ™è¿›è¡Œå­—ç¬¦é€ä¸€æ¯”è¾ƒä»¥é¿å…å“ˆå¸Œå†²çª</li>
<li>å¦‚æœå®Œå…¨åŒ¹é…ï¼Œåˆ™æ‰¾åˆ°ä¸€ä¸ªåŒ¹é…ä½ç½®</li>
</ul>
</li>
<li>
<p>é‡å¤æ­¥éª¤3ï¼Œç›´åˆ°å¤„ç†å®Œæ•´ä¸ªæ–‡æœ¬ä¸²</p>
</li>
</ol>
<p>æ ¸å¿ƒç‰¹æ€§</p>
<ul>
<li><strong>åŸºäºå“ˆå¸Œæ¯”è¾ƒ</strong>ï¼šé€šè¿‡å“ˆå¸Œå€¼æ¯”è¾ƒä»£æ›¿ç›´æ¥å­—ç¬¦æ¯”è¾ƒ</li>
<li><strong>æ»šåŠ¨å“ˆå¸Œ</strong>ï¼šO(1)æ—¶é—´å¤æ‚åº¦è®¡ç®—ä¸‹ä¸€çª—å£çš„å“ˆå¸Œå€¼</li>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šå¹³å‡æƒ…å†µO(n+m)ï¼Œæœ€åæƒ…å†µO(n*m)</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(1)ï¼Œåªéœ€å¸¸æ•°é¢å¤–ç©ºé—´</li>
<li><strong>é€‚ç”¨èŒƒå›´</strong>ï¼šå•æ¨¡å¼å’Œå¤šæ¨¡å¼ä¸²åŒ¹é…åœºæ™¯ï¼Œç‰¹åˆ«æ˜¯å¤šæ¨¡å¼åŒ¹é…</li>
</ul>
<h3 data-id="heading-2">åŸºç¡€å®ç°</h3>
<p>æ¥ä¸‹æ¥å¤§å®¶ä¸€èµ·çœ‹ä¸‹Rabin-Karpç®—æ³•çš„éƒ¨åˆ†ä¸»æµè¯­è¨€å®ç°ï¼š</p>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">public class RabinKarp {
    private final static int <span class="hljs-attr">PRIME</span> = <span class="hljs-number">101</span><span class="hljs-comment">; // å“ˆå¸Œè®¡ç®—ä½¿ç”¨çš„è´¨æ•°</span>
    
    public static int search(String text, String pattern) {
        int <span class="hljs-attr">m</span> = pattern.length()<span class="hljs-comment">;</span>
        int <span class="hljs-attr">n</span> = text.length()<span class="hljs-comment">;</span>
        
        if (m &gt; n) return -1<span class="hljs-comment">;</span>
        if (<span class="hljs-attr">m</span> == <span class="hljs-number">0</span>) return <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        
        // è®¡ç®—å“ˆå¸Œä¹˜æ•°ï¼Œç­‰äºd^(m-1) % PRIMEï¼Œç”¨äºæ»šåŠ¨å“ˆå¸Œè®¡ç®—
        int <span class="hljs-attr">h</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; m - 1; i++) {</span>
            <span class="hljs-attr">h</span> = (h * <span class="hljs-number">256</span>) % PRIME<span class="hljs-comment">;</span>
        }
        
        // è®¡ç®—æ¨¡å¼ä¸²å’Œç¬¬ä¸€ä¸ªçª—å£çš„å“ˆå¸Œå€¼
        int <span class="hljs-attr">patternHash</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        int <span class="hljs-attr">textHash</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; m; i++) {</span>
            <span class="hljs-attr">patternHash</span> = (<span class="hljs-number">256</span> * patternHash + pattern.charAt(i)) % PRIME<span class="hljs-comment">;</span>
            <span class="hljs-attr">textHash</span> = (<span class="hljs-number">256</span> * textHash + text.charAt(i)) % PRIME<span class="hljs-comment">;</span>
        }
        
        // æ»‘åŠ¨çª—å£ï¼Œæ¯”è¾ƒå“ˆå¸Œå€¼
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt;= n - m; i++) {</span>
            // å“ˆå¸Œå€¼ç›¸ç­‰æ—¶ï¼Œæ£€æŸ¥æ˜¯å¦çœŸæ­£åŒ¹é…
            if (<span class="hljs-attr">patternHash</span> == textHash) {
                boolean <span class="hljs-attr">match</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
                for (int <span class="hljs-attr">j</span> = <span class="hljs-number">0</span><span class="hljs-comment">; j &lt; m; j++) {</span>
                    if (text.charAt(i + j) != pattern.charAt(j)) {
                        <span class="hljs-attr">match</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
                        break<span class="hljs-comment">;</span>
                    }
                }
                if (match) {
                    return i<span class="hljs-comment">; // æ‰¾åˆ°åŒ¹é…</span>
                }
            }
            
            // è®¡ç®—ä¸‹ä¸€ä¸ªçª—å£çš„å“ˆå¸Œå€¼
            if (i &lt; n - m) {
                <span class="hljs-attr">textHash</span> = (<span class="hljs-number">256</span> * (textHash - text.charAt(i) * h) + text.charAt(i + m)) % PRIME<span class="hljs-comment">;</span>
                // å¤„ç†è´Ÿæ•°å“ˆå¸Œå€¼
                if (textHash &lt; 0) {
                    textHash += PRIME<span class="hljs-comment">;</span>
                }
            }
        }
        
        return -1<span class="hljs-comment">; // æœªæ‰¾åˆ°åŒ¹é…</span>
    }
    
    // æ‰“å°ç»“æœ
    public static void main(String<span class="hljs-section">[]</span> args) {
        String <span class="hljs-attr">text</span> = <span class="hljs-string">"ABABCABABDABACDABABCABAB"</span><span class="hljs-comment">;</span>
        String <span class="hljs-attr">pattern</span> = <span class="hljs-string">"ABABCABAB"</span><span class="hljs-comment">;</span>
        
        int <span class="hljs-attr">position</span> = search(text, pattern)<span class="hljs-comment">;</span>
        if (<span class="hljs-attr">position</span> == -<span class="hljs-number">1</span>) {
            System.out.println("æœªæ‰¾åˆ°åŒ¹é…")<span class="hljs-comment">;</span>
        } else {
            System.out.println("æ¨¡å¼ä¸²åœ¨ä½ç½® " + position + " å¤„åŒ¹é…")<span class="hljs-comment">;</span>
            System.out.println(text)<span class="hljs-comment">;</span>
            // æ‰“å°æŒ‡ç¤ºåŒ¹é…ä½ç½®çš„æŒ‡é’ˆ
            for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; position; i++) {</span>
                System.out.print(" ")<span class="hljs-comment">;</span>
            }
            System.out.println(pattern)<span class="hljs-comment">;</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-3">ä¼˜åŒ–ï¼šä½¿ç”¨æ›´å¥½çš„å“ˆå¸Œå‡½æ•°</h3>
<p>æ¯”å¦‚ä½¿ç”¨æ›´å¤æ‚çš„å“ˆå¸Œå‡½æ•°æ¥å‡å°‘å†²çª</p>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">public class ImprovedRabinKarp {
    private final static long <span class="hljs-attr">PRIME1</span> = <span class="hljs-number">1000000007</span><span class="hljs-comment">; // ç¬¬ä¸€ä¸ªå“ˆå¸Œçš„è´¨æ•°</span>
    private final static long <span class="hljs-attr">PRIME2</span> = <span class="hljs-number">1000000009</span><span class="hljs-comment">; // ç¬¬äºŒä¸ªå“ˆå¸Œçš„è´¨æ•°</span>
    
    // ä½¿ç”¨åŒå“ˆå¸Œæ¥å‡å°‘å†²çª
    public static int search(String text, String pattern) {
        int <span class="hljs-attr">m</span> = pattern.length()<span class="hljs-comment">;</span>
        int <span class="hljs-attr">n</span> = text.length()<span class="hljs-comment">;</span>
        
        if (m &gt; n) return -1<span class="hljs-comment">;</span>
        if (<span class="hljs-attr">m</span> == <span class="hljs-number">0</span>) return <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        
        // è®¡ç®—å“ˆå¸Œä¹˜æ•°
        long <span class="hljs-attr">h1</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
        long <span class="hljs-attr">h2</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; m - 1; i++) {</span>
            <span class="hljs-attr">h1</span> = (h1 * <span class="hljs-number">256</span>) % PRIME1<span class="hljs-comment">;</span>
            <span class="hljs-attr">h2</span> = (h2 * <span class="hljs-number">256</span>) % PRIME2<span class="hljs-comment">;</span>
        }
        
        // è®¡ç®—æ¨¡å¼ä¸²å’Œç¬¬ä¸€ä¸ªçª—å£çš„å“ˆå¸Œå€¼
        long <span class="hljs-attr">patternHash1</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        long <span class="hljs-attr">patternHash2</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        long <span class="hljs-attr">textHash1</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        long <span class="hljs-attr">textHash2</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; m; i++) {</span>
            <span class="hljs-attr">patternHash1</span> = (<span class="hljs-number">256</span> * patternHash1 + pattern.charAt(i)) % PRIME1<span class="hljs-comment">;</span>
            <span class="hljs-attr">patternHash2</span> = (<span class="hljs-number">256</span> * patternHash2 + pattern.charAt(i)) % PRIME2<span class="hljs-comment">;</span>
            <span class="hljs-attr">textHash1</span> = (<span class="hljs-number">256</span> * textHash1 + text.charAt(i)) % PRIME1<span class="hljs-comment">;</span>
            <span class="hljs-attr">textHash2</span> = (<span class="hljs-number">256</span> * textHash2 + text.charAt(i)) % PRIME2<span class="hljs-comment">;</span>
        }
        
        // æ»‘åŠ¨çª—å£ï¼Œæ¯”è¾ƒå“ˆå¸Œå€¼
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt;= n - m; i++) {</span>
            // ä¸¤ä¸ªå“ˆå¸Œéƒ½ç›¸ç­‰æ—¶ï¼Œå†è¿›è¡Œå­—ç¬¦æ¯”è¾ƒ
            if (<span class="hljs-attr">patternHash1</span> == textHash1 &amp;&amp; patternHash2 == textHash2) {
                boolean <span class="hljs-attr">match</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
                for (int <span class="hljs-attr">j</span> = <span class="hljs-number">0</span><span class="hljs-comment">; j &lt; m; j++) {</span>
                    if (text.charAt(i + j) != pattern.charAt(j)) {
                        <span class="hljs-attr">match</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
                        break<span class="hljs-comment">;</span>
                    }
                }
                if (match) {
                    return i<span class="hljs-comment">; // æ‰¾åˆ°åŒ¹é…</span>
                }
            }
            
            // è®¡ç®—ä¸‹ä¸€ä¸ªçª—å£çš„å“ˆå¸Œå€¼
            if (i &lt; n - m) {
                <span class="hljs-attr">textHash1</span> = (<span class="hljs-number">256</span> * (textHash1 - text.charAt(i) * h1) + text.charAt(i + m)) % PRIME1<span class="hljs-comment">;</span>
                <span class="hljs-attr">textHash2</span> = (<span class="hljs-number">256</span> * (textHash2 - text.charAt(i) * h2) + text.charAt(i + m)) % PRIME2<span class="hljs-comment">;</span>
                
                // å¤„ç†è´Ÿæ•°å“ˆå¸Œå€¼
                if (textHash1 &lt; 0) textHash1 += PRIME1<span class="hljs-comment">;</span>
                if (textHash2 &lt; 0) textHash2 += PRIME2<span class="hljs-comment">;</span>
            }
        }
        
        return -1<span class="hljs-comment">; // æœªæ‰¾åˆ°åŒ¹é…</span>
    }
}
</code></pre>
<h3 data-id="heading-4">ä¼˜ç‚¹</h3>
<ul>
<li>å¹³å‡æƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦ä¸ºO(n+m)ï¼Œæ¥è¿‘çº¿æ€§æ—¶é—´</li>
<li>åœ¨å¤šæ¨¡å¼åŒ¹é…åœºæ™¯ä¸‹æ•ˆç‡é«˜</li>
<li>å¯ä»¥é€šè¿‡é¢„å¤„ç†æ¨¡å¼ä¸²æé«˜æ•ˆç‡</li>
<li>æ»šåŠ¨å“ˆå¸Œè®¡ç®—ä½¿å¾—ç®—æ³•é«˜æ•ˆç§»åŠ¨çª—å£</li>
<li>å®ç°ç›¸å¯¹ç®€å•ï¼ŒåŸç†å®¹æ˜“ç†è§£</li>
</ul>
<h3 data-id="heading-5">ç¼ºç‚¹</h3>
<ul>
<li>å“ˆå¸Œå†²çªå¯èƒ½å¯¼è‡´é¢å¤–çš„å­—ç¬¦æ¯”è¾ƒ</li>
<li>æœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n*m)</li>
<li>å“ˆå¸Œå‡½æ•°çš„é€‰æ‹©å¯¹ç®—æ³•æ€§èƒ½å½±å“å¾ˆå¤§</li>
<li>éœ€è¦æ³¨æ„æ•°å€¼æº¢å‡ºé—®é¢˜</li>
<li>å¯¹äºçŸ­æ¨¡å¼ä¸²å’Œæ–‡æœ¬ä¸²ï¼Œé¢„å¤„ç†å¼€é”€å¯èƒ½æŠµæ¶ˆç®—æ³•ä¼˜åŠ¿</li>
</ul>
<h3 data-id="heading-6">åº”ç”¨åœºæ™¯</h3>
<p>1ï¼‰æ–‡æ¡£ç›¸ä¼¼åº¦æ£€æµ‹å’ŒæŠ„è¢­æ£€æµ‹<br/>
2ï¼‰ç½‘ç»œå®‰å…¨ä¸­çš„ç‰¹å¾ç åŒ¹é…<br/>
3ï¼‰å¤šæ¨¡å¼å­—ç¬¦ä¸²æœç´¢å¼•æ“<br/>
4ï¼‰ç¼–è¯‘å™¨ä¸­çš„è¯æ³•åˆ†æå™¨</p>
<h3 data-id="heading-7">æ‰©å±•ï¼šRabin-KarpæŒ‡çº¹ç®—æ³•</h3>
<p>Rabin-Karpç®—æ³•çš„ä¸€ä¸ªå˜ç§åº”ç”¨äºæ–‡ä»¶ç›¸ä¼¼åº¦æ¯”è¾ƒ</p>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">public class RabinKarpFingerprint {
    private final static long <span class="hljs-attr">PRIME</span> = <span class="hljs-number">1000000007</span><span class="hljs-comment">;</span>
    private final static int <span class="hljs-attr">WINDOW_SIZE</span> = <span class="hljs-number">5</span><span class="hljs-comment">; // æŒ‡çº¹çª—å£å¤§å°</span>
    
    public static Set&lt;Long&gt; generateFingerprints(String text) {
        Set&lt;Long&gt; <span class="hljs-attr">fingerprints</span> = new HashSet&lt;&gt;()<span class="hljs-comment">;</span>
        int <span class="hljs-attr">n</span> = text.length()<span class="hljs-comment">;</span>
        
        if (n &lt; WINDOW_SIZE) {
            fingerprints.add(calculateHash(text, n))<span class="hljs-comment">;</span>
            return fingerprints<span class="hljs-comment">;</span>
        }
        
        // è®¡ç®—ç¬¬ä¸€ä¸ªçª—å£çš„å“ˆå¸Œå€¼
        long <span class="hljs-attr">textHash</span> = calculateHash(text, WINDOW_SIZE)<span class="hljs-comment">;</span>
        fingerprints.add(textHash)<span class="hljs-comment">;</span>
        
        // è®¡ç®—å“ˆå¸Œä¹˜æ•°
        long <span class="hljs-attr">h</span> = <span class="hljs-number">1</span><span class="hljs-comment">;</span>
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; WINDOW_SIZE - 1; i++) {</span>
            <span class="hljs-attr">h</span> = (h * <span class="hljs-number">256</span>) % PRIME<span class="hljs-comment">;</span>
        }
        
        // æ»‘åŠ¨çª—å£ï¼Œè®¡ç®—æ‰€æœ‰é•¿åº¦ä¸ºWINDOW_SIZEçš„å­ä¸²å“ˆå¸Œå€¼
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt;= n - WINDOW_SIZE - 1; i++) {</span>
            <span class="hljs-attr">textHash</span> = (<span class="hljs-number">256</span> * (textHash - text.charAt(i) * h) + text.charAt(i + WINDOW_SIZE)) % PRIME<span class="hljs-comment">;</span>
            if (textHash &lt; 0) {
                textHash += PRIME<span class="hljs-comment">;</span>
            }
            fingerprints.add(textHash)<span class="hljs-comment">;</span>
        }
        
        return fingerprints<span class="hljs-comment">;</span>
    }
    
    public static double calculateSimilarity(String text1, String text2) {
        Set&lt;Long&gt; <span class="hljs-attr">fingerprints1</span> = generateFingerprints(text1)<span class="hljs-comment">;</span>
        Set&lt;Long&gt; <span class="hljs-attr">fingerprints2</span> = generateFingerprints(text2)<span class="hljs-comment">;</span>
        
        // è®¡ç®—äº¤é›†å¤§å°
        Set&lt;Long&gt; <span class="hljs-attr">intersection</span> = new HashSet&lt;&gt;(fingerprints1)<span class="hljs-comment">;</span>
        intersection.retainAll(fingerprints2)<span class="hljs-comment">;</span>
        
        // è®¡ç®—å¹¶é›†å¤§å°
        Set&lt;Long&gt; <span class="hljs-attr">union</span> = new HashSet&lt;&gt;(fingerprints1)<span class="hljs-comment">;</span>
        union.addAll(fingerprints2)<span class="hljs-comment">;</span>
        
        // æ°å¡å¾·ç›¸ä¼¼åº¦ç³»æ•°
        return (double) intersection.size() / union.size()<span class="hljs-comment">;</span>
    }
    
    private static long calculateHash(String str, int length) {
        long <span class="hljs-attr">hash</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; length; i++) {</span>
            <span class="hljs-attr">hash</span> = (<span class="hljs-number">256</span> * hash + str.charAt(i)) % PRIME<span class="hljs-comment">;</span>
        }
        return hash<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h3 data-id="heading-8">æ‰©å±•ï¼šå­å­—ç¬¦ä¸²å“ˆå¸Œ</h3>
<p>ä¸€äº›ç¼–ç¨‹ç«èµ›é‡Œä¹Ÿä½¿ç”¨Rabin-Karpæ€æƒ³è¿›è¡Œé«˜æ•ˆçš„å­å­—ç¬¦ä¸²æŸ¥è¯¢</p>
<p>java</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SubstringHash</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> PRIME = <span class="hljs-number">1000000007</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> BASE = <span class="hljs-number">256</span>;
    
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span>[] hash; <span class="hljs-comment">// å‰ç¼€å“ˆå¸Œå€¼</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span>[] pow;  <span class="hljs-comment">// BASEçš„å¹‚</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> s;    <span class="hljs-comment">// æºå­—ç¬¦ä¸²</span>
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SubstringHash</span><span class="hljs-params">(<span class="hljs-type">String</span> s)</span> </span>{
        <span class="hljs-keyword">this</span>.s = s;
        <span class="hljs-type">int</span> n = s.<span class="hljs-built_in">length</span>();
        hash = <span class="hljs-keyword">new</span> <span class="hljs-type">long</span>[n + <span class="hljs-number">1</span>];
        pow = <span class="hljs-keyword">new</span> <span class="hljs-type">long</span>[n + <span class="hljs-number">1</span>];
        
        <span class="hljs-comment">// é¢„è®¡ç®—BASEçš„å¹‚</span>
        pow[<span class="hljs-number">0</span>] = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) {
            pow[i] = (pow[i - <span class="hljs-number">1</span>] * BASE) % PRIME;
        }
        
        <span class="hljs-comment">// è®¡ç®—æ‰€æœ‰å‰ç¼€çš„å“ˆå¸Œå€¼</span>
        hash[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
            hash[i + <span class="hljs-number">1</span>] = (hash[i] * BASE + s.<span class="hljs-built_in">charAt</span>(i)) % PRIME;
        }
    }
    
    <span class="hljs-comment">// è®¡ç®—å­ä¸²s[l..r]çš„å“ˆå¸Œå€¼ï¼ˆ0-indexedï¼‰</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title">substringHash</span><span class="hljs-params">(<span class="hljs-type">int</span> l, <span class="hljs-type">int</span> r)</span> </span>{
        <span class="hljs-comment">// è·å–s[0...r]çš„å“ˆå¸Œå€¼ï¼Œå‡å»s[0...l-1]çš„å“ˆå¸Œå€¼ï¼ˆéœ€è¦è¿›è¡Œé€‚å½“è°ƒæ•´ï¼‰</span>
        <span class="hljs-type">long</span> result = (hash[r + <span class="hljs-number">1</span>] - (hash[l] * pow[r - l + <span class="hljs-number">1</span>]) % PRIME) % PRIME;
        <span class="hljs-keyword">if</span> (result &lt; <span class="hljs-number">0</span>) {
            result += PRIME;
        }
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-comment">// æ£€æŸ¥ä¸¤ä¸ªå­ä¸²æ˜¯å¦ç›¸åŒ</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title">areSubstringsEqual</span><span class="hljs-params">(<span class="hljs-type">int</span> l1, <span class="hljs-type">int</span> r1, <span class="hljs-type">int</span> l2, <span class="hljs-type">int</span> r2)</span> </span>{
        <span class="hljs-keyword">if</span> (r1 - l1 != r2 - l2) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// é•¿åº¦ä¸åŒ</span>
        }
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">substringHash</span>(l1, r1) == <span class="hljs-built_in">substringHash</span>(l2, r2);
    }
}
</code></pre>
<h3 data-id="heading-9">ç›¸å…³çš„ LeetCode çƒ­é—¨é¢˜ç›®</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Ffind-the-index-of-the-first-occurrence-in-a-string%2F" target="_blank" title="https://leetcode.cn/problems/find-the-index-of-the-first-occurrence-in-a-string/" ref="nofollow noopener noreferrer">28. å®ç° strStr()</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Frepeated-dna-sequences%2F" target="_blank" title="https://leetcode.cn/problems/repeated-dna-sequences/" ref="nofollow noopener noreferrer">187. é‡å¤çš„DNAåºåˆ—</a>Â - åˆ©ç”¨Rabin-Karpæ»šåŠ¨å“ˆå¸Œæ€æƒ³è§£å†³</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Flongest-duplicate-substring%2F" target="_blank" title="https://leetcode.cn/problems/longest-duplicate-substring/" ref="nofollow noopener noreferrer">1044. æœ€é•¿é‡å¤å­ä¸²</a>Â - ç»“åˆäºŒåˆ†æŸ¥æ‰¾å’ŒRabin-Karpç®—æ³•</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fstrings-differ-by-one-character%2F" target="_blank" title="https://leetcode.cn/problems/strings-differ-by-one-character/" ref="nofollow noopener noreferrer">1554. åªæœ‰ä¸€ä¸ªä¸åŒå­—ç¬¦çš„å­—ç¬¦ä¸²</a></li>
</ul>
<p>Rabin-Karpç®—æ³•å·§å¦™ç»“åˆå“ˆå¸Œè®¡ç®—å’Œæ»šåŠ¨çª—å£æŠ€æœ¯ï¼Œåœ¨å­—ç¬¦ä¸²åŒ¹é…é¢†åŸŸæä¾›äº†ä¸€ç§é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œç‰¹åˆ«é€‚åˆå¤šæ¨¡å¼åŒ¹é…å’Œå¤§è§„æ¨¡æ–‡æœ¬å¤„ç†åœºæ™¯ã€‚</p>
<h2 data-id="heading-10">Boyer-Mooreç®—æ³•</h2>
<p>Boyer-Mooreç®—æ³•æ˜¯ä¸€ç§é«˜æ•ˆçš„å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼Œç”± Robert S. Boyerå’ŒJ Strother Moore è®¾è®¡äº1977å¹´ã€‚å®ƒ<strong>ä»å³å‘å·¦æ¯”è¾ƒ</strong>å­—ç¬¦ï¼Œå¹¶åˆ©ç”¨ä¸¤ä¸ªå¯å‘å¼è§„åˆ™ï¼ˆåå­—ç¬¦è§„åˆ™å’Œå¥½åç¼€è§„åˆ™ï¼‰åœ¨ä¸åŒ¹é…æƒ…å†µä¸‹å®ç°è¾ƒå¤§è·³è·ƒï¼Œå‡å°‘æ¯”è¾ƒæ¬¡æ•°ã€‚Boyer-Mooreç®—æ³•åœ¨å®é™…åº”ç”¨ä¸­å¤§éƒ¨åˆ†æƒ…å†µä¸‹<strong>æ¯”æœ´ç´ ç®—æ³•å’ŒKMPç®—æ³•æ›´é«˜æ•ˆ</strong>ã€‚</p>
<h3 data-id="heading-11">ç®—æ³•æ­¥éª¤</h3>
<ol>
<li>
<p>é¢„å¤„ç†æ¨¡å¼ä¸²ï¼Œæ„å»ºåå­—ç¬¦è¡¨å’Œå¥½åç¼€è¡¨</p>
</li>
<li>
<p>å°†æ¨¡å¼ä¸²å¯¹é½åˆ°æ–‡æœ¬ä¸²çš„å¼€å§‹ä½ç½®</p>
</li>
<li>
<p>ä»æ¨¡å¼ä¸²çš„æœ€å³ä¾§å­—ç¬¦å¼€å§‹æ¯”è¾ƒï¼Œä»å³å‘å·¦è¿›è¡ŒåŒ¹é…</p>
</li>
<li>
<p>å¦‚æœå‘ç”Ÿä¸åŒ¹é…ï¼Œé€šè¿‡ä»¥ä¸‹è§„åˆ™è®¡ç®—è·³è½¬è·ç¦»ï¼š</p>
<ul>
<li>åå­—ç¬¦è§„åˆ™ï¼šæ ¹æ®ä¸åŒ¹é…å­—ç¬¦åœ¨æ¨¡å¼ä¸²ä¸­çš„æœ€å³ä½ç½®å†³å®šè·³è½¬è·ç¦»</li>
<li>å¥½åç¼€è§„åˆ™ï¼šæ ¹æ®å·²åŒ¹é…éƒ¨åˆ†åœ¨æ¨¡å¼ä¸²ä¸­çš„é‡å¤æƒ…å†µå†³å®šè·³è½¬è·ç¦»</li>
</ul>
</li>
<li>
<p>é€‰æ‹©ä¸¤ä¸ªè§„åˆ™ä¸­çš„æœ€å¤§è·³è½¬è·ç¦»ï¼Œç§»åŠ¨æ¨¡å¼ä¸²</p>
</li>
<li>
<p>é‡å¤æ­¥éª¤3-5ï¼Œç›´åˆ°æ‰¾åˆ°åŒ¹é…æˆ–åˆ°è¾¾æ–‡æœ¬ä¸²æœ«å°¾</p>
</li>
</ol>
<p>æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li><strong>ä»å³å‘å·¦æ¯”è¾ƒ</strong>ï¼šä¸å¤§å¤šæ•°å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ä¸åŒï¼Œä»æ¨¡å¼ä¸²çš„æœ«å°¾å¼€å§‹æ¯”è¾ƒ</li>
<li><strong>åŒè§„åˆ™è·³è½¬</strong>ï¼šåˆ©ç”¨åå­—ç¬¦è§„åˆ™å’Œå¥½åç¼€è§„åˆ™è®¡ç®—è·³è½¬è·ç¦»</li>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šæœ€åæƒ…å†µO(m*n)ï¼Œmæ˜¯æ¨¡å¼ä¸²é•¿åº¦ï¼Œnæ˜¯æ–‡æœ¬ä¸²é•¿åº¦ï¼›å¹³å‡æƒ…å†µæ¥è¿‘O(n/m)</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(k+m)ï¼Œå…¶ä¸­kæ˜¯å­—ç¬¦é›†å¤§å°ï¼Œmæ˜¯æ¨¡å¼ä¸²é•¿åº¦</li>
<li><strong>é€‚ç”¨èŒƒå›´</strong>ï¼šç‰¹åˆ«é€‚åˆé•¿æ¨¡å¼ä¸²å’Œå¤§å­—ç¬¦é›†åœºæ™¯</li>
</ul>
<h3 data-id="heading-12">åŸºç¡€å®ç°</h3>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">public class BoyerMoore {
    private final int R<span class="hljs-comment">; // å­—ç¬¦é›†å¤§å°</span>
    private int<span class="hljs-section">[]</span> badChar<span class="hljs-comment">; // åå­—ç¬¦è¡¨</span>
    private int<span class="hljs-section">[]</span> goodSuffix<span class="hljs-comment">; // å¥½åç¼€è¡¨</span>
    private int<span class="hljs-section">[]</span> borderPos<span class="hljs-comment">; // è¾¹ç•Œä½ç½®è¡¨</span>
    private String pattern<span class="hljs-comment">; // æ¨¡å¼ä¸²</span>
    
    public BoyerMoore(String pattern) {
        <span class="hljs-attr">this.R</span> = <span class="hljs-number">256</span><span class="hljs-comment">; // ASCIIå­—ç¬¦é›†</span>
        <span class="hljs-attr">this.pattern</span> = pattern<span class="hljs-comment">;</span>
        int <span class="hljs-attr">m</span> = pattern.length()<span class="hljs-comment">;</span>
        
        // åˆå§‹åŒ–åå­—ç¬¦è¡¨
        <span class="hljs-attr">badChar</span> = new int[R]<span class="hljs-comment">;</span>
        for (int <span class="hljs-attr">c</span> = <span class="hljs-number">0</span><span class="hljs-comment">; c &lt; R; c++) {</span>
            badChar<span class="hljs-section">[c]</span> = -1<span class="hljs-comment">; // åˆå§‹åŒ–ä¸º-1</span>
        }
        for (int <span class="hljs-attr">j</span> = <span class="hljs-number">0</span><span class="hljs-comment">; j &lt; m; j++) {</span>
            badChar<span class="hljs-section">[pattern.charAt(j)]</span> = j<span class="hljs-comment">; // è®°å½•æ¯ä¸ªå­—ç¬¦æœ€å³å‡ºç°ä½ç½®</span>
        }
        
        // åˆå§‹åŒ–å¥½åç¼€è¡¨å’Œè¾¹ç•Œä½ç½®è¡¨
        <span class="hljs-attr">goodSuffix</span> = new int[m]<span class="hljs-comment">;</span>
        <span class="hljs-attr">borderPos</span> = new int[m]<span class="hljs-comment">;</span>
        processSuffixes()<span class="hljs-comment">;</span>
    }
    
    // é¢„å¤„ç†å¥½åç¼€è¡¨
    private void processSuffixes() {
        int <span class="hljs-attr">m</span> = pattern.length()<span class="hljs-comment">;</span>
        int <span class="hljs-attr">i</span> = m, j = m + <span class="hljs-number">1</span><span class="hljs-comment">;</span>
        borderPos<span class="hljs-section">[i]</span> = j<span class="hljs-comment">;</span>
        
        // è®¡ç®—è¾¹ç•Œä½ç½®
        while (i &gt; 0) {
            while (j &lt;= m &amp;&amp; pattern.charAt(i - 1) != pattern.charAt(j - 1)) {
                if (goodSuffix<span class="hljs-section">[j]</span> == 0) {
                    goodSuffix<span class="hljs-section">[j]</span> = j - i<span class="hljs-comment">;</span>
                }
                <span class="hljs-attr">j</span> = borderPos[j]<span class="hljs-comment">;</span>
            }
            i--<span class="hljs-comment">; j--;</span>
            borderPos<span class="hljs-section">[i]</span> = j<span class="hljs-comment">;</span>
        }
        
        // è®¡ç®—å¥½åç¼€è¡¨
        <span class="hljs-attr">j</span> = borderPos[<span class="hljs-number">0</span>]<span class="hljs-comment">;</span>
        for (<span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt;= m; i++) {</span>
            if (goodSuffix<span class="hljs-section">[i]</span> == 0) {
                goodSuffix<span class="hljs-section">[i]</span> = j<span class="hljs-comment">;</span>
            }
            if (<span class="hljs-attr">i</span> == j) {
                <span class="hljs-attr">j</span> = borderPos[j]<span class="hljs-comment">;</span>
            }
        }
    }
    
    // æœç´¢æ–‡æœ¬ä¸²ä¸­çš„åŒ¹é…
    public int search(String text) {
        int <span class="hljs-attr">n</span> = text.length()<span class="hljs-comment">;</span>
        int <span class="hljs-attr">m</span> = pattern.length()<span class="hljs-comment">;</span>
        if (<span class="hljs-attr">m</span> == <span class="hljs-number">0</span>) return <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        
        int skip<span class="hljs-comment">;</span>
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt;= n - m; i += skip) {</span>
            <span class="hljs-attr">skip</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
            for (int <span class="hljs-attr">j</span> = m - <span class="hljs-number">1</span><span class="hljs-comment">; j &gt;= 0; j--) {</span>
                if (pattern.charAt(j) != text.charAt(i + j)) {
                    // åå­—ç¬¦è§„åˆ™
                    <span class="hljs-attr">skip</span> = Math.max(<span class="hljs-number">1</span>, j - badChar[text.charAt(i + j)])<span class="hljs-comment">;</span>
                    // å¥½åç¼€è§„åˆ™
                    if (j &lt; m - 1) {
                        <span class="hljs-attr">skip</span> = Math.max(skip, goodSuffix[j + <span class="hljs-number">1</span>])<span class="hljs-comment">;</span>
                    }
                    break<span class="hljs-comment">;</span>
                }
            }
            if (<span class="hljs-attr">skip</span> == <span class="hljs-number">0</span>) return i<span class="hljs-comment">; // æ‰¾åˆ°åŒ¹é…</span>
        }
        return -1<span class="hljs-comment">; // æ²¡æœ‰æ‰¾åˆ°åŒ¹é…</span>
    }
    
    // æµ‹è¯•
    public static void main(String<span class="hljs-section">[]</span> args) {
        String <span class="hljs-attr">text</span> = <span class="hljs-string">"HERE IS A SIMPLE EXAMPLE"</span><span class="hljs-comment">;</span>
        String <span class="hljs-attr">pattern</span> = <span class="hljs-string">"EXAMPLE"</span><span class="hljs-comment">;</span>
        
        BoyerMoore <span class="hljs-attr">bm</span> = new BoyerMoore(pattern)<span class="hljs-comment">;</span>
        int <span class="hljs-attr">position</span> = bm.search(text)<span class="hljs-comment">;</span>
        
        if (<span class="hljs-attr">position</span> == -<span class="hljs-number">1</span>) {
            System.out.println("æœªæ‰¾åˆ°åŒ¹é…")<span class="hljs-comment">;</span>
        } else {
            System.out.println("æ¨¡å¼ä¸²åœ¨ä½ç½® " + position + " å¤„åŒ¹é…")<span class="hljs-comment">;</span>
            System.out.println(text)<span class="hljs-comment">;</span>
            for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; position; i++) {</span>
                System.out.print(" ")<span class="hljs-comment">;</span>
            }
            System.out.println(pattern)<span class="hljs-comment">;</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-13">ä¼˜åŒ–ç­–ç•¥</h3>
<h4 data-id="heading-14">ç®€åŒ–å¥½åç¼€è¡¨æ„å»º</h4>
<p>å¯¹äºä¸€äº›åº”ç”¨åœºæ™¯ï¼Œå¯ä»¥åªä½¿ç”¨åå­—ç¬¦è§„åˆ™ï¼Œç®€åŒ–ç®—æ³•å®ç°</p>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">public class SimplifiedBoyerMoore {
    private final int R<span class="hljs-comment">; // å­—ç¬¦é›†å¤§å°</span>
    private int<span class="hljs-section">[]</span> badChar<span class="hljs-comment">; // åå­—ç¬¦è¡¨</span>
    private String pattern<span class="hljs-comment">; // æ¨¡å¼ä¸²</span>
    
    public SimplifiedBoyerMoore(String pattern) {
        <span class="hljs-attr">this.R</span> = <span class="hljs-number">256</span><span class="hljs-comment">; // ASCIIå­—ç¬¦é›†</span>
        <span class="hljs-attr">this.pattern</span> = pattern<span class="hljs-comment">;</span>
        int <span class="hljs-attr">m</span> = pattern.length()<span class="hljs-comment">;</span>
        
        // åˆå§‹åŒ–åå­—ç¬¦è¡¨
        <span class="hljs-attr">badChar</span> = new int[R]<span class="hljs-comment">;</span>
        for (int <span class="hljs-attr">c</span> = <span class="hljs-number">0</span><span class="hljs-comment">; c &lt; R; c++) {</span>
            badChar<span class="hljs-section">[c]</span> = -1<span class="hljs-comment">; // åˆå§‹åŒ–ä¸º-1</span>
        }
        for (int <span class="hljs-attr">j</span> = <span class="hljs-number">0</span><span class="hljs-comment">; j &lt; m; j++) {</span>
            badChar<span class="hljs-section">[pattern.charAt(j)]</span> = j<span class="hljs-comment">; // è®°å½•æ¯ä¸ªå­—ç¬¦æœ€å³å‡ºç°ä½ç½®</span>
        }
    }
    
    // æœç´¢æ–‡æœ¬ä¸²ä¸­çš„åŒ¹é…
    public int search(String text) {
        int <span class="hljs-attr">n</span> = text.length()<span class="hljs-comment">;</span>
        int <span class="hljs-attr">m</span> = pattern.length()<span class="hljs-comment">;</span>
        if (<span class="hljs-attr">m</span> == <span class="hljs-number">0</span>) return <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        
        int skip<span class="hljs-comment">;</span>
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt;= n - m; i += skip) {</span>
            <span class="hljs-attr">skip</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
            for (int <span class="hljs-attr">j</span> = m - <span class="hljs-number">1</span><span class="hljs-comment">; j &gt;= 0; j--) {</span>
                if (pattern.charAt(j) != text.charAt(i + j)) {
                    // ä»…ä½¿ç”¨åå­—ç¬¦è§„åˆ™
                    <span class="hljs-attr">skip</span> = Math.max(<span class="hljs-number">1</span>, j - badChar[text.charAt(i + j)])<span class="hljs-comment">;</span>
                    break<span class="hljs-comment">;</span>
                }
            }
            if (<span class="hljs-attr">skip</span> == <span class="hljs-number">0</span>) return i<span class="hljs-comment">; // æ‰¾åˆ°åŒ¹é…</span>
        }
        return -1<span class="hljs-comment">; // æ²¡æœ‰æ‰¾åˆ°åŒ¹é…</span>
    }
}
</code></pre>
<h4 data-id="heading-15">ç¼“å­˜é¢„è®¡ç®—ç»“æœ</h4>
<p>é’ˆå¯¹éœ€è¦é‡å¤æœç´¢åŒä¸€æ¨¡å¼ä¸²çš„åœºæ™¯ï¼Œå¯ä»¥é¢„è®¡ç®—å¹¶ç¼“å­˜ç»“æœ</p>
<p>java</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CachedBoyerMoore</span> {
    <span class="hljs-keyword">private</span> Map&lt;<span class="hljs-type">String</span>, BoyerMoore&gt; cache = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title">search</span><span class="hljs-params">(<span class="hljs-type">String</span> text, <span class="hljs-type">String</span> pattern)</span> </span>{
        <span class="hljs-comment">// æ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦æœ‰é¢„è®¡ç®—çš„Boyer-Mooreå¯¹è±¡</span>
        BoyerMoore bm = cache.<span class="hljs-built_in">get</span>(pattern);
        <span class="hljs-keyword">if</span> (bm == null) {
            bm = <span class="hljs-keyword">new</span> <span class="hljs-built_in">BoyerMoore</span>(pattern);
            cache.<span class="hljs-built_in">put</span>(pattern, bm);
        }
        
        <span class="hljs-keyword">return</span> bm.<span class="hljs-built_in">search</span>(text);
    }
}
</code></pre>
<h3 data-id="heading-16">ä¼˜ç‚¹</h3>
<ul>
<li>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¤§éƒ¨åˆ†åœºæ™¯æ¯”KMPå’Œæœ´ç´ ç®—æ³•æ›´é«˜æ•ˆ</li>
<li>æœ€å¥½æƒ…å†µä¸‹å¯ä»¥è·³è¿‡å¤§é‡æ–‡æœ¬ï¼Œå®ç°äºšçº¿æ€§æ—¶é—´å¤æ‚åº¦</li>
<li>å¯¹äºé•¿æ¨¡å¼ä¸²å’Œå¤§å­—ç¬¦é›†ç‰¹åˆ«æœ‰æ•ˆ</li>
<li>é¢„å¤„ç†è·Ÿæ¨¡å¼ä¸²æœ‰å…³ï¼Œä¸æ–‡æœ¬ä¸²é•¿åº¦æ— å…³</li>
</ul>
<h3 data-id="heading-17">ç¼ºç‚¹</h3>
<ul>
<li>é¢„å¤„ç†å¤æ‚ï¼Œç‰¹åˆ«æ˜¯å¥½åç¼€è¡¨çš„æ„å»º</li>
<li>éœ€è¦é¢å¤–ç©ºé—´å­˜å‚¨åå­—ç¬¦è¡¨å’Œå¥½åç¼€è¡¨</li>
<li>æœ€åæƒ…å†µä¸‹æ—¶é—´å¤æ‚åº¦ä»ä¸ºO(m*n)</li>
<li>å¯¹äºçŸ­æ¨¡å¼ä¸²ï¼Œé¢„å¤„ç†å¼€é”€å¯èƒ½æŠµæ¶ˆç®—æ³•ä¼˜åŠ¿</li>
<li>å¥½åç¼€è§„åˆ™çš„å®ç°è¾ƒå¤æ‚ï¼Œå®¹æ˜“å‡ºé”™</li>
</ul>
<h3 data-id="heading-18">åº”ç”¨åœºæ™¯</h3>
<p>1ï¼‰æ–‡æœ¬ç¼–è¾‘å™¨çš„æŸ¥æ‰¾åŠŸèƒ½<br/>
2ï¼‰ç½‘ç»œå®‰å…¨ä¸­çš„ç‰¹å¾ç åŒ¹é…<br/>
3ï¼‰è‡ªç„¶è¯­è¨€å¤„ç†ä¸­çš„å…³é”®è¯æ£€ç´¢<br/>
4ï¼‰å¤§è§„æ¨¡æ–‡æœ¬æ•°æ®å¤„ç†</p>
<h3 data-id="heading-19">æ‰©å±•ï¼šHorspoolç®—æ³•</h3>
<p>Horspoolç®—æ³•æ˜¯Boyer-Mooreçš„ç®€åŒ–ç‰ˆæœ¬ï¼Œåªä½¿ç”¨åå­—ç¬¦è§„åˆ™ï¼Œä½†æ˜¯å¯¹åå­—ç¬¦è¡¨è¿›è¡Œäº†ä¿®æ”¹</p>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">public class Horspool {
    private final int R<span class="hljs-comment">; // å­—ç¬¦é›†å¤§å°</span>
    private int<span class="hljs-section">[]</span> badChar<span class="hljs-comment">; // åå­—ç¬¦è¡¨</span>
    private String pattern<span class="hljs-comment">; // æ¨¡å¼ä¸²</span>
    
    public Horspool(String pattern) {
        <span class="hljs-attr">this.R</span> = <span class="hljs-number">256</span><span class="hljs-comment">; // ASCIIå­—ç¬¦é›†</span>
        <span class="hljs-attr">this.pattern</span> = pattern<span class="hljs-comment">;</span>
        int <span class="hljs-attr">m</span> = pattern.length()<span class="hljs-comment">;</span>
        
        // åˆå§‹åŒ–åå­—ç¬¦è¡¨
        <span class="hljs-attr">badChar</span> = new int[R]<span class="hljs-comment">;</span>
        // æ‰€æœ‰å­—ç¬¦é»˜è®¤ç§»åŠ¨æ¨¡å¼ä¸²é•¿åº¦
        for (int <span class="hljs-attr">c</span> = <span class="hljs-number">0</span><span class="hljs-comment">; c &lt; R; c++) {</span>
            badChar<span class="hljs-section">[c]</span> = m<span class="hljs-comment">;</span>
        }
        // æ¨¡å¼ä¸²ä¸­çš„å­—ç¬¦ï¼ˆé™¤äº†æœ€åä¸€ä¸ªï¼‰è®¾ç½®ä¸ºå¯¹åº”å€¼
        for (int <span class="hljs-attr">j</span> = <span class="hljs-number">0</span><span class="hljs-comment">; j &lt; m - 1; j++) {</span>
            badChar<span class="hljs-section">[pattern.charAt(j)]</span> = m - 1 - j<span class="hljs-comment">;</span>
        }
    }
    
    // æœç´¢æ–‡æœ¬ä¸²ä¸­çš„åŒ¹é…
    public int search(String text) {
        int <span class="hljs-attr">n</span> = text.length()<span class="hljs-comment">;</span>
        int <span class="hljs-attr">m</span> = pattern.length()<span class="hljs-comment">;</span>
        if (<span class="hljs-attr">m</span> == <span class="hljs-number">0</span>) return <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        if (m &gt; n) return -1<span class="hljs-comment">;</span>
        
        int <span class="hljs-attr">i</span> = m - <span class="hljs-number">1</span><span class="hljs-comment">; // ä»æ¨¡å¼ä¸²æœ€åä¸€ä¸ªå­—ç¬¦å¯¹é½å¼€å§‹</span>
        while (i &lt; n) {
            int <span class="hljs-attr">k</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
            while (k &lt; m &amp;&amp; pattern.charAt(m - 1 - k) == text.charAt(i - k)) {
                k++<span class="hljs-comment">;</span>
            }
            
            if (<span class="hljs-attr">k</span> == m) {
                return i - m + 1<span class="hljs-comment">; // æ‰¾åˆ°åŒ¹é…</span>
            }
            
            // ä½¿ç”¨åå­—ç¬¦è§„åˆ™ç§»åŠ¨
            i += badChar<span class="hljs-section">[text.charAt(i)]</span><span class="hljs-comment">;</span>
        }
        
        return -1<span class="hljs-comment">; // æ²¡æœ‰æ‰¾åˆ°åŒ¹é…</span>
    }
}
</code></pre>
<h3 data-id="heading-20">æ‰©å±•ï¼šSundayç®—æ³•</h3>
<p>Sundayç®—æ³•æ˜¯å¦ä¸€ç§Boyer-Mooreçš„å˜ç§ï¼Œå®ƒå…³æ³¨çš„æ˜¯æ–‡æœ¬ä¸²ä¸­æ¨¡å¼ä¸²åé¢çš„å­—ç¬¦</p>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">public class Sunday {
    private final int R<span class="hljs-comment">; // å­—ç¬¦é›†å¤§å°</span>
    private int<span class="hljs-section">[]</span> shift<span class="hljs-comment">; // ç§»åŠ¨è¡¨</span>
    private String pattern<span class="hljs-comment">; // æ¨¡å¼ä¸²</span>
    
    public Sunday(String pattern) {
        <span class="hljs-attr">this.R</span> = <span class="hljs-number">256</span><span class="hljs-comment">; // ASCIIå­—ç¬¦é›†</span>
        <span class="hljs-attr">this.pattern</span> = pattern<span class="hljs-comment">;</span>
        int <span class="hljs-attr">m</span> = pattern.length()<span class="hljs-comment">;</span>
        
        // åˆå§‹åŒ–ç§»åŠ¨è¡¨
        <span class="hljs-attr">shift</span> = new int[R]<span class="hljs-comment">;</span>
        // æ‰€æœ‰å­—ç¬¦é»˜è®¤ç§»åŠ¨æ¨¡å¼ä¸²é•¿åº¦+1
        for (int <span class="hljs-attr">c</span> = <span class="hljs-number">0</span><span class="hljs-comment">; c &lt; R; c++) {</span>
            shift<span class="hljs-section">[c]</span> = m + 1<span class="hljs-comment">;</span>
        }
        // æ¨¡å¼ä¸²ä¸­çš„å­—ç¬¦è®¾ç½®ä¸ºå¯¹åº”å€¼
        for (int <span class="hljs-attr">j</span> = <span class="hljs-number">0</span><span class="hljs-comment">; j &lt; m; j++) {</span>
            shift<span class="hljs-section">[pattern.charAt(j)]</span> = m - j<span class="hljs-comment">;</span>
        }
    }
    
    // æœç´¢æ–‡æœ¬ä¸²ä¸­çš„åŒ¹é…
    public int search(String text) {
        int <span class="hljs-attr">n</span> = text.length()<span class="hljs-comment">;</span>
        int <span class="hljs-attr">m</span> = pattern.length()<span class="hljs-comment">;</span>
        if (<span class="hljs-attr">m</span> == <span class="hljs-number">0</span>) return <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        if (m &gt; n) return -1<span class="hljs-comment">;</span>
        
        int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; // ä»æ–‡æœ¬ä¸²å¼€å§‹ä½ç½®</span>
        while (i &lt;= n - m) {
            int <span class="hljs-attr">j</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
            while (j &lt; m &amp;&amp; pattern.charAt(j) == text.charAt(i + j)) {
                j++<span class="hljs-comment">;</span>
            }
            
            if (<span class="hljs-attr">j</span> == m) {
                return i<span class="hljs-comment">; // æ‰¾åˆ°åŒ¹é…</span>
            }
            
            // ä¸‹ä¸€ä¸ªä½ç½®è¶…å‡ºæ–‡æœ¬ä¸²é•¿åº¦ï¼Œè¿”å›-1
            if (i + m &gt;= n) {
                return -1<span class="hljs-comment">;</span>
            }
            
            // ä½¿ç”¨Sundayç®—æ³•çš„ç§»åŠ¨è§„åˆ™
            i += shift<span class="hljs-section">[text.charAt(i + m)]</span><span class="hljs-comment">;</span>
        }
        
        return -1<span class="hljs-comment">; // æ²¡æœ‰æ‰¾åˆ°åŒ¹é…</span>
    }
}
</code></pre>
<h3 data-id="heading-21">ç›¸å…³çš„ LeetCode çƒ­é—¨é¢˜ç›®</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Ffind-the-index-of-the-first-occurrence-in-a-string%2F" target="_blank" title="https://leetcode.cn/problems/find-the-index-of-the-first-occurrence-in-a-string/" ref="nofollow noopener noreferrer">28. å®ç°strStr()</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Frepeated-substring-pattern%2F" target="_blank" title="https://leetcode.cn/problems/repeated-substring-pattern/" ref="nofollow noopener noreferrer">459. é‡å¤çš„å­å­—ç¬¦ä¸²</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Frepeated-string-match%2F" target="_blank" title="https://leetcode.cn/problems/repeated-string-match/" ref="nofollow noopener noreferrer">686. é‡å¤å åŠ å­—ç¬¦ä¸²åŒ¹é…</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Flongest-happy-prefix%2F" target="_blank" title="https://leetcode.cn/problems/longest-happy-prefix/" ref="nofollow noopener noreferrer">1392. æœ€é•¿å¿«ä¹å‰ç¼€</a></li>
</ul>
<h2 data-id="heading-22">KMPç®—æ³•</h2>
<p>KMPï¼ˆKnuth-Morris-Prattï¼‰ç®—æ³•æ˜¯ä¸€ç§é«˜æ•ˆçš„å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯<strong>åˆ©ç”¨å·²ç»éƒ¨åˆ†åŒ¹é…çš„ä¿¡æ¯ï¼Œé¿å…é‡å¤æ¯”è¾ƒ</strong>ï¼Œåœ¨æ–‡æœ¬ä¸²ä¸­å¿«é€ŸæŸ¥æ‰¾æ¨¡å¼ä¸²ã€‚KMPç®—æ³•ç‰¹åˆ«é€‚åˆ<strong>å¤„ç†é•¿æ–‡æœ¬å’Œé‡å¤æ€§é«˜çš„æ¨¡å¼ä¸²</strong>ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯O(m+n)ï¼Œmæ˜¯æ¨¡å¼ä¸²é•¿åº¦ï¼Œnæ˜¯æ–‡æœ¬ä¸²é•¿åº¦ã€‚</p>
<p>KMPç®—æ³•çš„å…³é”®åœ¨äºæ„å»ºä¸€ä¸ªéƒ¨åˆ†åŒ¹é…è¡¨ï¼ˆä¹Ÿå«å¤±è´¥å‡½æ•°æˆ–è€…nextæ•°ç»„ï¼‰ï¼Œè¿™ä¸ªè¡¨è®°å½•äº†å½“åŒ¹é…å¤±è´¥æ—¶ï¼Œæ¨¡å¼ä¸²æŒ‡é’ˆåº”è¯¥å›é€€åˆ°çš„ä½ç½®ï¼Œè®©ç®—æ³•è·³è¿‡å·²çŸ¥ä¸å¯èƒ½åŒ¹é…çš„ä½ç½®ï¼Œæé«˜åŒ¹é…æ•ˆç‡ã€‚</p>
<h3 data-id="heading-23">ç®—æ³•æ­¥éª¤</h3>
<p>KMPç®—æ³•ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>
<p><strong>é¢„å¤„ç†é˜¶æ®µ</strong>ï¼šè®¡ç®—æ¨¡å¼ä¸²çš„éƒ¨åˆ†åŒ¹é…è¡¨ï¼ˆnextæ•°ç»„ï¼‰</p>
<ul>
<li>æ„å»ºä¸€ä¸ªæ•°ç»„ï¼Œè®°å½•æ¯ä¸ªä½ç½®çš„æœ€é•¿ç›¸ç­‰å‰åç¼€é•¿åº¦</li>
<li>è¯¥æ•°ç»„ç”¨äºåœ¨åŒ¹é…å¤±è´¥æ—¶ç¡®å®šæ¨¡å¼ä¸²æŒ‡é’ˆçš„å›é€€ä½ç½®</li>
</ul>
</li>
<li>
<p><strong>åŒ¹é…é˜¶æ®µ</strong>ï¼šä½¿ç”¨éƒ¨åˆ†åŒ¹é…è¡¨åœ¨æ–‡æœ¬ä¸²ä¸­æŸ¥æ‰¾æ¨¡å¼ä¸²</p>
<ul>
<li>ä»å·¦åˆ°å³åŒæ—¶éå†æ–‡æœ¬ä¸²å’Œæ¨¡å¼ä¸²</li>
<li>å½“å­—ç¬¦ä¸åŒ¹é…æ—¶ï¼Œæ ¹æ®nextæ•°ç»„å›é€€æ¨¡å¼ä¸²æŒ‡é’ˆ</li>
<li>å½“æ¨¡å¼ä¸²å®Œå…¨åŒ¹é…æ—¶ï¼Œè®°å½•åŒ¹é…ä½ç½®å¹¶ç»§ç»­æŸ¥æ‰¾å…¶ä»–åŒ¹é…</li>
</ul>
</li>
</ol>
<p>æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li><strong>çº¿æ€§æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(m+n)ï¼Œå…¶ä¸­mæ˜¯æ¨¡å¼ä¸²é•¿åº¦ï¼Œnæ˜¯æ–‡æœ¬ä¸²é•¿åº¦</li>
<li><strong>é«˜æ•ˆåˆ©ç”¨å†å²ä¿¡æ¯</strong>ï¼šé€šè¿‡é¢„å¤„ç†é¿å…äº†é‡å¤æ¯”è¾ƒ</li>
<li><strong>åªéœ€ä¸€æ¬¡éå†æ–‡æœ¬ä¸²</strong>ï¼šæ–‡æœ¬ä¸²æŒ‡é’ˆä¸ä¼šå›é€€</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(m)ï¼Œä»…éœ€å­˜å‚¨æ¨¡å¼ä¸²çš„éƒ¨åˆ†åŒ¹é…è¡¨</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šç‰¹åˆ«é€‚åˆé•¿æ–‡æœ¬å’Œå…·æœ‰é‡å¤æ€§çš„æ¨¡å¼ä¸²</li>
</ul>
<h3 data-id="heading-24">åŸºç¡€å®ç°</h3>
<h4 data-id="heading-25">æš´åŠ›è§£æ³•</h4>
<p>java</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NaiveStringMatcher</span> {
    
    <span class="hljs-comment">/**
     * æœ´ç´ å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•
     * @param text æ–‡æœ¬ä¸²
     * @param pattern æ¨¡å¼ä¸²
     * @return åŒ¹é…æˆåŠŸåˆ™è¿”å›æ¨¡å¼ä¸²åœ¨æ–‡æœ¬ä¸²ä¸­çš„èµ·å§‹ä½ç½®ï¼Œå¦åˆ™è¿”å›-1
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title">naiveSearch</span><span class="hljs-params">(<span class="hljs-type">String</span> text, <span class="hljs-type">String</span> pattern)</span> </span>{
        <span class="hljs-type">int</span> n = text.<span class="hljs-built_in">length</span>();
        <span class="hljs-type">int</span> m = pattern.<span class="hljs-built_in">length</span>();
        
        <span class="hljs-comment">// ç‰¹æ®Šæƒ…å†µå¤„ç†</span>
        <span class="hljs-keyword">if</span> (m == <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
        <span class="hljs-keyword">if</span> (n &lt; m) <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
        
        <span class="hljs-comment">// å°è¯•æ‰€æœ‰å¯èƒ½çš„åŒ¹é…ä½ç½®</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt;= n - m; i++) {
            <span class="hljs-type">int</span> j;
            
            <span class="hljs-comment">// ä»å½“å‰ä½ç½®å¼€å§‹æ¯”è¾ƒæ¨¡å¼ä¸²å’Œæ–‡æœ¬ä¸²</span>
            <span class="hljs-keyword">for</span> (j = <span class="hljs-number">0</span>; j &lt; m; j++) {
                <span class="hljs-keyword">if</span> (text.<span class="hljs-built_in">charAt</span>(i + j) != pattern.<span class="hljs-built_in">charAt</span>(j)) {
                    <span class="hljs-keyword">break</span>; <span class="hljs-comment">// å‘ç°ä¸åŒ¹é…å­—ç¬¦ï¼Œç»ˆæ­¢å†…å±‚å¾ªç¯</span>
                }
            }
            
            <span class="hljs-comment">// å¦‚æœjç­‰äºmï¼Œè¯´æ˜æ¨¡å¼ä¸²å®Œå…¨åŒ¹é…</span>
            <span class="hljs-keyword">if</span> (j == m) {
                <span class="hljs-keyword">return</span> i; <span class="hljs-comment">// è¿”å›åŒ¹é…ä½ç½®</span>
            }
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>; <span class="hljs-comment">// æœªæ‰¾åˆ°åŒ¹é…</span>
    }
    
    <span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-type">String</span>[] args)</span> </span>{
        <span class="hljs-type">String</span> text = <span class="hljs-string">"ABABDABACDABABCABAB"</span>;
        <span class="hljs-type">String</span> pattern = <span class="hljs-string">"ABABCABAB"</span>;
        
        <span class="hljs-type">int</span> position = <span class="hljs-built_in">naiveSearch</span>(text, pattern);
        
        <span class="hljs-keyword">if</span> (position == <span class="hljs-number">-1</span>) {
            System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"æœªæ‰¾åˆ°åŒ¹é…"</span>);
        } <span class="hljs-keyword">else</span> {
            System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"æ¨¡å¼ä¸²åœ¨ä½ç½® "</span> + position + <span class="hljs-string">" å¤„åŒ¹é…"</span>);
        }
    }
}
</code></pre>
<p>ä¸Šè¿°å®ç°æš´åŠ›æšä¸¾æ‰€æœ‰å¯èƒ½çš„åŒ¹é…ä½ç½®ï¼Œé€ä¸€æ¯”è¾ƒæ–‡æœ¬ä¸²ä¸æ¨¡å¼ä¸²çš„æ¯ä¸ªå­—ç¬¦ï¼Œç›´åˆ°æ‰¾åˆ°å®Œå…¨åŒ¹é…æˆ–ç¡®å®šä¸å­˜åœ¨åŒ¹é…</p>
<h4 data-id="heading-26">KMPç®—æ³•çš„å®ç°</h4>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">public class KMP {
    // æ„å»ºéƒ¨åˆ†åŒ¹é…è¡¨ï¼ˆnextæ•°ç»„ï¼‰
    private static int<span class="hljs-section">[]</span> buildNext(String pattern) {
        int <span class="hljs-attr">m</span> = pattern.length()<span class="hljs-comment">;</span>
        int<span class="hljs-section">[]</span> <span class="hljs-attr">next</span> = new int[m]<span class="hljs-comment">;</span>
        next<span class="hljs-section">[0]</span> = 0<span class="hljs-comment">; // ç¬¬ä¸€ä¸ªå­—ç¬¦çš„æœ€é•¿ç›¸ç­‰å‰åç¼€é•¿åº¦ä¸º0</span>
        
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">1</span>, j = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; m; i++) {</span>
            // å½“å‰å­—ç¬¦ä¸åŒ¹é…ï¼Œå›é€€j
            while (j &gt; 0 &amp;&amp; pattern.charAt(i) != pattern.charAt(j)) {
                <span class="hljs-attr">j</span> = next[j - <span class="hljs-number">1</span>]<span class="hljs-comment">;</span>
            }
            
            // å½“å‰å­—ç¬¦åŒ¹é…ï¼Œjå‘å‰ç§»åŠ¨
            if (pattern.charAt(i) == pattern.charAt(j)) {
                j++<span class="hljs-comment">;</span>
            }
            
            // è®°å½•å½“å‰ä½ç½®çš„æœ€é•¿ç›¸ç­‰å‰åç¼€é•¿åº¦
            next<span class="hljs-section">[i]</span> = j<span class="hljs-comment">;</span>
        }
        
        return next<span class="hljs-comment">;</span>
    }
    
    // KMPæœç´¢ç®—æ³•
    public static int kmpSearch(String text, String pattern) {
        if (<span class="hljs-attr">pattern</span> == null || pattern.length() == <span class="hljs-number">0</span>) {
            return 0<span class="hljs-comment">;</span>
        }
        
        if (<span class="hljs-attr">text</span> == null || text.length() &lt; pattern.length()) {
            return -1<span class="hljs-comment">;</span>
        }
        
        int <span class="hljs-attr">n</span> = text.length()<span class="hljs-comment">;</span>
        int <span class="hljs-attr">m</span> = pattern.length()<span class="hljs-comment">;</span>
        
        // æ„å»ºnextæ•°ç»„
        int<span class="hljs-section">[]</span> <span class="hljs-attr">next</span> = buildNext(pattern)<span class="hljs-comment">;</span>
        
        // è¿›è¡ŒåŒ¹é…
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; n; i++) {</span>
            // å½“å‰å­—ç¬¦ä¸åŒ¹é…ï¼Œæ ¹æ®nextæ•°ç»„å›é€€j
            while (j &gt; 0 &amp;&amp; text.charAt(i) != pattern.charAt(j)) {
                <span class="hljs-attr">j</span> = next[j - <span class="hljs-number">1</span>]<span class="hljs-comment">;</span>
            }
            
            // å½“å‰å­—ç¬¦åŒ¹é…ï¼Œjå‘å‰ç§»åŠ¨
            if (text.charAt(i) == pattern.charAt(j)) {
                j++<span class="hljs-comment">;</span>
            }
            
            // å®Œå…¨åŒ¹é…ï¼Œè¿”å›èµ·å§‹ç´¢å¼•
            if (<span class="hljs-attr">j</span> == m) {
                return i - m + 1<span class="hljs-comment">;</span>
            }
        }
        
        return -1<span class="hljs-comment">; // æœªæ‰¾åˆ°åŒ¹é…</span>
    }
    
    // æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…ä½ç½®
    public static List&lt;Integer&gt; kmpSearchAll(String text, String pattern) {
        List&lt;Integer&gt; <span class="hljs-attr">positions</span> = new ArrayList&lt;&gt;()<span class="hljs-comment">;</span>
        if (<span class="hljs-attr">pattern</span> == null || pattern.length() == <span class="hljs-number">0</span>) {
            return positions<span class="hljs-comment">;</span>
        }
        
        if (<span class="hljs-attr">text</span> == null || text.length() &lt; pattern.length()) {
            return positions<span class="hljs-comment">;</span>
        }
        
        int <span class="hljs-attr">n</span> = text.length()<span class="hljs-comment">;</span>
        int <span class="hljs-attr">m</span> = pattern.length()<span class="hljs-comment">;</span>
        
        // æ„å»ºnextæ•°ç»„
        int<span class="hljs-section">[]</span> <span class="hljs-attr">next</span> = buildNext(pattern)<span class="hljs-comment">;</span>
        
        // è¿›è¡ŒåŒ¹é…
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; n; i++) {</span>
            // å½“å‰å­—ç¬¦ä¸åŒ¹é…ï¼Œå›é€€j
            while (j &gt; 0 &amp;&amp; text.charAt(i) != pattern.charAt(j)) {
                <span class="hljs-attr">j</span> = next[j - <span class="hljs-number">1</span>]<span class="hljs-comment">;</span>
            }
            
            // å½“å‰å­—ç¬¦åŒ¹é…ï¼Œjå‘å‰ç§»åŠ¨
            if (text.charAt(i) == pattern.charAt(j)) {
                j++<span class="hljs-comment">;</span>
            }
            
            // å®Œå…¨åŒ¹é…ï¼Œè®°å½•ä½ç½®å¹¶ç»§ç»­åŒ¹é…
            if (<span class="hljs-attr">j</span> == m) {
                positions.add(i - m + 1)<span class="hljs-comment">;</span>
                // å›é€€jä»¥å¯»æ‰¾ä¸‹ä¸€ä¸ªåŒ¹é…
                <span class="hljs-attr">j</span> = next[j - <span class="hljs-number">1</span>]<span class="hljs-comment">;</span>
            }
        }
        
        return positions<span class="hljs-comment">;</span>
    }
    
    public static void main(String<span class="hljs-section">[]</span> args) {
        String <span class="hljs-attr">text</span> = <span class="hljs-string">"ABABDABACDABABCABAB"</span><span class="hljs-comment">;</span>
        String <span class="hljs-attr">pattern</span> = <span class="hljs-string">"ABABCABAB"</span><span class="hljs-comment">;</span>
        
        int <span class="hljs-attr">pos</span> = kmpSearch(text, pattern)<span class="hljs-comment">;</span>
        List&lt;Integer&gt; <span class="hljs-attr">allPos</span> = kmpSearchAll(text, pattern)<span class="hljs-comment">;</span>
        
        System.out.println("æ–‡æœ¬: " + text)<span class="hljs-comment">;</span>
        System.out.println("æ¨¡å¼: " + pattern)<span class="hljs-comment">;</span>
        System.out.println("é¦–æ¬¡åŒ¹é…ä½ç½®: " + (pos != -1 ? pos : "æœªæ‰¾åˆ°"))<span class="hljs-comment">;</span>
        System.out.println("æ‰€æœ‰åŒ¹é…ä½ç½®: " + allPos)<span class="hljs-comment">;</span>
        
        // æ‰“å°nextæ•°ç»„ï¼Œå¸®åŠ©ç†è§£
        int<span class="hljs-section">[]</span> <span class="hljs-attr">next</span> = buildNext(pattern)<span class="hljs-comment">;</span>
        System.out.print("nextæ•°ç»„: ")<span class="hljs-comment">;</span>
        for (int val : next) {
            System.out.print(val + " ")<span class="hljs-comment">;</span>
        }
        System.out.println()<span class="hljs-comment">;</span>
    }
}
</code></pre>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼š</p>
<p>java</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// å½“å‰å­—ç¬¦ä¸åŒ¹é…ï¼Œå›é€€j</span>
<span class="hljs-selector-tag">while</span> (j &gt; <span class="hljs-number">0</span> &amp;&amp; text.<span class="hljs-built_in">charAt</span>(i) != pattern.<span class="hljs-built_in">charAt</span>(j)) {
    <span class="hljs-selector-tag">j</span> = <span class="hljs-selector-tag">next</span><span class="hljs-selector-attr">[j - 1]</span>;
}
</code></pre>
<p>æ˜¯ KMP ç®—æ³•çš„æ ¸å¿ƒï¼Œåœ¨åŒ¹é…å¤±è´¥æ—¶æ ¹æ®é¢„å…ˆè®¡ç®—çš„nextæ•°ç»„æ¥ç¡®å®šæ¨¡å¼ä¸²æŒ‡é’ˆçš„å›é€€ä½ç½®ã€‚</p>
<h3 data-id="heading-27">ä¼˜åŒ–</h3>
<p>ä¼˜åŒ–åçš„ next æ•°ç»„</p>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">// ä¼˜åŒ–nextæ•°ç»„ï¼Œé¿å…åŒ¹é…å¤±è´¥åå›é€€åˆ°åŒæ ·ä¼šå¤±è´¥çš„ä½ç½®
private static int<span class="hljs-section">[]</span> buildOptimizedNext(String pattern) {
    int <span class="hljs-attr">m</span> = pattern.length()<span class="hljs-comment">;</span>
    int<span class="hljs-section">[]</span> <span class="hljs-attr">next</span> = new int[m]<span class="hljs-comment">;</span>
    next<span class="hljs-section">[0]</span> = 0<span class="hljs-comment">;</span>
    
    for (int <span class="hljs-attr">i</span> = <span class="hljs-number">1</span>, j = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; m; i++) {</span>
        while (j &gt; 0 &amp;&amp; pattern.charAt(i) != pattern.charAt(j)) {
            <span class="hljs-attr">j</span> = next[j - <span class="hljs-number">1</span>]<span class="hljs-comment">;</span>
        }
        
        if (pattern.charAt(i) == pattern.charAt(j)) {
            j++<span class="hljs-comment">;</span>
        }
        
        // å½“å‰ä½ç½®åŒ¹é…å¤±è´¥æ—¶ï¼Œå¦‚æœå›é€€ä½ç½®çš„å­—ç¬¦ä¸å½“å‰ä½ç½®ç›¸åŒï¼Œåˆ™ç»§ç»­å›é€€
        if (i + 1 &lt; m &amp;&amp; pattern.charAt(i + 1) == pattern.charAt(j)) {
            next<span class="hljs-section">[i]</span> = next<span class="hljs-section">[j - 1]</span><span class="hljs-comment">;</span>
        } else {
            next<span class="hljs-section">[i]</span> = j<span class="hljs-comment">;</span>
        }
    }
    
    return next<span class="hljs-comment">;</span>
}
</code></pre>
<p>é¢„å¤„ç†å‡å°‘åˆ†æ”¯å®ç°</p>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">// é¢„å¤„ç†å­—ç¬¦æ˜ å°„ï¼Œå‡å°‘å­—ç¬¦æ¯”è¾ƒçš„åˆ†æ”¯
public static int kmpSearchOptimized(String text, String pattern) {
    if (<span class="hljs-attr">pattern</span> == null || pattern.length() == <span class="hljs-number">0</span>) {
        return 0<span class="hljs-comment">;</span>
    }
    
    if (<span class="hljs-attr">text</span> == null || text.length() &lt; pattern.length()) {
        return -1<span class="hljs-comment">;</span>
    }
    
    int <span class="hljs-attr">n</span> = text.length()<span class="hljs-comment">;</span>
    int <span class="hljs-attr">m</span> = pattern.length()<span class="hljs-comment">;</span>
    
    // ä½¿ç”¨æ•°ç»„æ˜ å°„æ¥åŠ é€Ÿå­—ç¬¦æ¯”è¾ƒï¼ˆå‡è®¾å­—ç¬¦é›†ä¸ºASCIIï¼‰
    // ä¸ºæ¯ä¸ªæ¨¡å¼å­—ç¬¦çš„æ¯ä¸ªä½ç½®åˆ›å»ºä¸€ä¸ªçŠ¶æ€è½¬ç§»è¡¨
    int<span class="hljs-section">[]</span><span class="hljs-section">[]</span> <span class="hljs-attr">dfa</span> = new int[<span class="hljs-number">256</span>][m]<span class="hljs-comment">;</span>
    
    // åˆå§‹åŒ–ç¬¬ä¸€ä¸ªå­—ç¬¦çš„DFA
    dfa<span class="hljs-section">[pattern.charAt(0)]</span><span class="hljs-section">[0]</span> = 1<span class="hljs-comment">;</span>
    
    for (int <span class="hljs-attr">X</span> = <span class="hljs-number">0</span>, j = <span class="hljs-number">1</span><span class="hljs-comment">; j &lt; m; j++) {</span>
        // å¤åˆ¶åŒ¹é…å¤±è´¥æƒ…å†µä¸‹çš„å€¼
        for (int <span class="hljs-attr">c</span> = <span class="hljs-number">0</span><span class="hljs-comment">; c &lt; 256; c++) {</span>
            dfa<span class="hljs-section">[c]</span><span class="hljs-section">[j]</span> = dfa<span class="hljs-section">[c]</span><span class="hljs-section">[X]</span><span class="hljs-comment">;</span>
        }
        // è®¾ç½®åŒ¹é…æˆåŠŸæƒ…å†µä¸‹çš„å€¼
        dfa<span class="hljs-section">[pattern.charAt(j)]</span><span class="hljs-section">[j]</span> = j + 1<span class="hljs-comment">;</span>
        // æ›´æ–°é‡å¯çŠ¶æ€
        <span class="hljs-attr">X</span> = dfa[pattern.charAt(j)][X]<span class="hljs-comment">;</span>
    }
    
    // æ¨¡å¼åŒ¹é…
    int i, j<span class="hljs-comment">;</span>
    for (<span class="hljs-attr">i</span> = <span class="hljs-number">0</span>, j = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; n &amp;&amp; j &lt; m; i++) {</span>
        <span class="hljs-attr">j</span> = dfa[text.charAt(i)][j]<span class="hljs-comment">;</span>
    }
    
    if (<span class="hljs-attr">j</span> == m) {
        return i - m<span class="hljs-comment">; // æ‰¾åˆ°åŒ¹é…</span>
    } else {
        return -1<span class="hljs-comment">;    // æœªæ‰¾åˆ°åŒ¹é…</span>
    }
}
</code></pre>
<h3 data-id="heading-28">ä¼˜ç‚¹</h3>
<ul>
<li>æ—¶é—´å¤æ‚åº¦ä¸ºO(m+n)ï¼Œä¼˜äºæœ´ç´ çš„å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•(æš´åŠ›è§£æ³•)</li>
<li>æ–‡æœ¬ä¸²åªéœ€æ‰«æä¸€æ¬¡ï¼Œä¸ä¼šå›é€€</li>
<li>å¯¹äºåŒ…å«é‡å¤æ¨¡å¼çš„å­—ç¬¦ä¸²ä¼šé«˜æ•ˆ</li>
<li>é¢„å¤„ç†æ¨¡å¼ä¸²ï¼Œå¯ä»¥å¤šæ¬¡ç”¨äºä¸åŒçš„æ–‡æœ¬ä¸²</li>
<li>èƒ½å¿«é€Ÿè·³è¿‡å·²çŸ¥ä¸ä¼šåŒ¹é…çš„ä½ç½®</li>
</ul>
<h3 data-id="heading-29">ç¼ºç‚¹</h3>
<ul>
<li>éœ€è¦é¢å¤–çš„ç©ºé—´å­˜å‚¨nextæ•°ç»„</li>
<li>æ„å»ºnextæ•°ç»„çš„é€»è¾‘è¾ƒä¸ºå¤æ‚ï¼Œä¸æ˜“ç†è§£</li>
<li>åœ¨æ¨¡å¼ä¸²è¾ƒçŸ­æˆ–æ— é‡å¤æ¨¡å¼æ—¶ï¼Œç›¸æ¯”ç®€å•ç®—æ³•ä¼˜åŠ¿ä¸æ˜æ˜¾</li>
<li>å®ç°æ—¶å®¹æ˜“å‡ºé”™ï¼Œç‰¹åˆ«æ˜¯å¤„ç†è¾¹ç•Œæƒ…å†µ</li>
</ul>
<h3 data-id="heading-30">åº”ç”¨åœºæ™¯</h3>
<p>1ï¼‰ç”Ÿç‰©ä¿¡æ¯å­¦ä¸­çš„DNAåºåˆ—åŒ¹é…<br/>
2ï¼‰ç½‘ç»œå…¥ä¾µæ£€æµ‹ç³»ç»Ÿä¸­çš„æ¨¡å¼åŒ¹é…<br/>
3ï¼‰æœç´¢å¼•æ“çš„å…³é”®è¯åŒ¹é…<br/>
4ï¼‰æ•°æ®å‹ç¼©ç®—æ³•ä¸­çš„æ¨¡å¼è¯†åˆ«</p>
<h3 data-id="heading-31">æ‰©å±•ï¼šå¤šæ¨¡å¼å­—ç¬¦ä¸²åŒ¹é…</h3>
<p>java</p>
<pre><code class="hljs language-ini" lang="ini">// Aho-Corasickç®—æ³• - KMPçš„å¤šæ¨¡å¼æ‰©å±•
public static class AhoCorasick {
    static class TrieNode {
        TrieNode<span class="hljs-section">[]</span> <span class="hljs-attr">children</span> = new TrieNode[<span class="hljs-number">256</span>]<span class="hljs-comment">;</span>
        TrieNode fail<span class="hljs-comment">;</span>
        List&lt;Integer&gt; <span class="hljs-attr">patternIndices</span> = new ArrayList&lt;&gt;()<span class="hljs-comment">;</span>
        
        public TrieNode() {
            <span class="hljs-attr">fail</span> = null<span class="hljs-comment">;</span>
        }
    }
    
    private TrieNode root<span class="hljs-comment">;</span>
    private String<span class="hljs-section">[]</span> patterns<span class="hljs-comment">;</span>
    
    public AhoCorasick(String<span class="hljs-section">[]</span> patterns) {
        <span class="hljs-attr">this.patterns</span> = patterns<span class="hljs-comment">;</span>
        buildTrie()<span class="hljs-comment">;</span>
        buildFailureLinks()<span class="hljs-comment">;</span>
    }
    
    private void buildTrie() {
        <span class="hljs-attr">root</span> = new TrieNode()<span class="hljs-comment">;</span>
        
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; patterns.length; i++) {</span>
            String <span class="hljs-attr">pattern</span> = patterns[i]<span class="hljs-comment">;</span>
            TrieNode <span class="hljs-attr">node</span> = root<span class="hljs-comment">;</span>
            
            for (char c : pattern.toCharArray()) {
                if (node.children<span class="hljs-section">[c]</span> == null) {
                    node.children<span class="hljs-section">[c]</span> = new TrieNode()<span class="hljs-comment">;</span>
                }
                <span class="hljs-attr">node</span> = node.children[c]<span class="hljs-comment">;</span>
            }
            
            node.patternIndices.add(i)<span class="hljs-comment">;</span>
        }
    }
    
    private void buildFailureLinks() {
        Queue&lt;TrieNode&gt; <span class="hljs-attr">queue</span> = new LinkedList&lt;&gt;()<span class="hljs-comment">;</span>
        
        // åˆå§‹åŒ–æ ¹èŠ‚ç‚¹çš„å­èŠ‚ç‚¹
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; 256; i++) {</span>
            if (root.children<span class="hljs-section">[i]</span> != null) {
                root.children<span class="hljs-section">[i]</span>.<span class="hljs-attr">fail</span> = root<span class="hljs-comment">;</span>
                queue.offer(root.children<span class="hljs-section">[i]</span>)<span class="hljs-comment">;</span>
            } else {
                root.children<span class="hljs-section">[i]</span> = root<span class="hljs-comment">;</span>
            }
        }
        
        // BFSæ„å»ºå¤±è´¥é“¾æ¥
        while (!queue.isEmpty()) {
            TrieNode <span class="hljs-attr">node</span> = queue.poll()<span class="hljs-comment">;</span>
            
            for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; 256; i++) {</span>
                if (node.children<span class="hljs-section">[i]</span> != null) {
                    TrieNode <span class="hljs-attr">failNode</span> = node.fail<span class="hljs-comment">;</span>
                    
                    while (failNode != root &amp;&amp; failNode.children<span class="hljs-section">[i]</span> == null) {
                        <span class="hljs-attr">failNode</span> = failNode.fail<span class="hljs-comment">;</span>
                    }
                    
                    <span class="hljs-attr">failNode</span> = failNode.children[i]<span class="hljs-comment">;</span>
                    node.children<span class="hljs-section">[i]</span>.<span class="hljs-attr">fail</span> = failNode<span class="hljs-comment">;</span>
                    
                    // åˆå¹¶åŒ¹é…ç»“æœ
                    node.children<span class="hljs-section">[i]</span>.patternIndices.addAll(failNode.patternIndices)<span class="hljs-comment">;</span>
                    
                    queue.offer(node.children<span class="hljs-section">[i]</span>)<span class="hljs-comment">;</span>
                }
            }
        }
    }
    
    public List&lt;Pair&lt;Integer, Integer&gt;&gt; search(String text) {
        List&lt;Pair&lt;Integer, Integer&gt;&gt; <span class="hljs-attr">results</span> = new ArrayList&lt;&gt;()<span class="hljs-comment">;</span>
        TrieNode <span class="hljs-attr">currentState</span> = root<span class="hljs-comment">;</span>
        
        for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; text.length(); i++) {</span>
            char <span class="hljs-attr">c</span> = text.charAt(i)<span class="hljs-comment">;</span>
            
            while (currentState != root &amp;&amp; currentState.children<span class="hljs-section">[c]</span> == null) {
                <span class="hljs-attr">currentState</span> = currentState.fail<span class="hljs-comment">;</span>
            }
            
            <span class="hljs-attr">currentState</span> = currentState.children[c]<span class="hljs-comment">;</span>
            
            for (int patternIndex : currentState.patternIndices) {
                int <span class="hljs-attr">endPos</span> = i<span class="hljs-comment">;</span>
                int <span class="hljs-attr">startPos</span> = endPos - patterns[patternIndex].length() + <span class="hljs-number">1</span><span class="hljs-comment">;</span>
                results.add(new Pair&lt;&gt;(patternIndex, startPos))<span class="hljs-comment">;</span>
            }
        }
        
        return results<span class="hljs-comment">;</span>
    }
    
    static class Pair&lt;K, V&gt; {
        K first<span class="hljs-comment">;</span>
        V second<span class="hljs-comment">;</span>
        
        public Pair(K first, V second) {
            <span class="hljs-attr">this.first</span> = first<span class="hljs-comment">;</span>
            <span class="hljs-attr">this.second</span> = second<span class="hljs-comment">;</span>
        }
    }
}
</code></pre>
<h3 data-id="heading-32">ç›¸å…³çš„ LeetCode çƒ­é—¨é¢˜ç›®</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Ffind-the-index-of-the-first-occurrence-in-a-string%2F" target="_blank" title="https://leetcode.cn/problems/find-the-index-of-the-first-occurrence-in-a-string/" ref="nofollow noopener noreferrer">28. æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡</a>Â - æ ‡å‡†çš„å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fshortest-palindrome%2F" target="_blank" title="https://leetcode.cn/problems/shortest-palindrome/" ref="nofollow noopener noreferrer">214. æœ€çŸ­å›æ–‡ä¸²</a>Â - å¯ä»¥ä½¿ç”¨KMPç®—æ³•çš„nextæ•°ç»„æ€æƒ³è§£å†³</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Frepeated-substring-pattern%2F" target="_blank" title="https://leetcode.cn/problems/repeated-substring-pattern/" ref="nofollow noopener noreferrer">459. é‡å¤çš„å­å­—ç¬¦ä¸²</a>Â - ä½¿ç”¨KMPçš„nextæ•°ç»„åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ç”±é‡å¤å­ä¸²æ„æˆ</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Flongest-happy-prefix%2F" target="_blank" title="https://leetcode.cn/problems/longest-happy-prefix/" ref="nofollow noopener noreferrer">1392. æœ€é•¿å¿«ä¹å‰ç¼€</a></li>
</ul>
<p>KMPç®—æ³•æ˜¯å­—ç¬¦ä¸²å¤„ç†ä¸­çš„ç»å…¸ç®—æ³•ï¼Œç”¨æ¥è§£å†³å­—ç¬¦ä¸²åŒ¹é…é—®é¢˜ï¼Œç†è§£å®ƒå¯¹æå‡ç®—æ³•è®¾è®¡èƒ½åŠ›è¿˜æ˜¯å¾ˆæœ‰å¸®åŠ©çš„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¨¡å‹ç¼–è¾‘ vs å‚æ•°å¾®è°ƒï¼šç»™é›¶ç®—æ³•åŸºç¡€AIä»ä¸šè€…çš„è®²è§£]]></title>    <link>https://juejin.cn/post/7584013833993895970</link>    <guid>https://juejin.cn/post/7584013833993895970</guid>    <pubDate>2025-12-16T07:16:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584013833993895970" data-draft-id="7584043969687273524" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¨¡å‹ç¼–è¾‘ vs å‚æ•°å¾®è°ƒï¼šç»™é›¶ç®—æ³•åŸºç¡€AIä»ä¸šè€…çš„è®²è§£"/> <meta itemprop="keywords" content="OpenAI,AIGC,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-16T07:16:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ ‘ç­å”å”"/> <meta itemprop="url" content="https://juejin.cn/user/3734382051604446"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¨¡å‹ç¼–è¾‘ vs å‚æ•°å¾®è°ƒï¼šç»™é›¶ç®—æ³•åŸºç¡€AIä»ä¸šè€…çš„è®²è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3734382051604446/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ ‘ç­å”å”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T07:16:32.000Z" title="Tue Dec 16 2025 07:16:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>è¿™æ˜¯ä¸€ç¯‡<strong>é¢å‘æ— ç®—æ³•èƒŒæ™¯è¯»è€…</strong>çš„è®²è§£æ–‡ç« ã€‚<br/>
ç›®æ ‡ä¸æ˜¯è®²å…¬å¼ï¼Œè€Œæ˜¯è®²æ¸…æ¥šï¼š<strong>å®ƒä»¬åœ¨â€œæƒ³è§£å†³ä»€ä¹ˆé—®é¢˜ã€ç”¨ä»€ä¹ˆæ–¹å¼ã€ä»€ä¹ˆæ—¶å€™è¯¥ç”¨è°â€ä¸Šçš„æ ¹æœ¬å·®å¼‚</strong>ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€å…ˆç»™ä¸€å¥è¯ç»“è®ºï¼ˆå…ˆæœ‰æ•´ä½“æ„Ÿï¼‰</h2>
<ul>
<li>
<p><strong>å‚æ•°å¾®è°ƒï¼ˆFine-tuningï¼‰</strong> ï¼š</p>
<blockquote>
<p>é€šè¿‡è®­ç»ƒï¼Œè®©æ¨¡å‹<strong>æ•´ä½“æ…¢æ…¢å­¦ä¼šä¸€ç±»æ–°èƒ½åŠ›æˆ–æ–°é£æ ¼</strong>ã€‚</p>
</blockquote>
</li>
<li>
<p><strong>æ¨¡å‹ç¼–è¾‘ï¼ˆModel Editingï¼‰</strong> ï¼š</p>
<blockquote>
<p>ä¸é‡æ–°è®­ç»ƒæ¨¡å‹ï¼Œåªæ˜¯<strong>ç²¾ç¡®åœ°æ”¹æ‰æ¨¡å‹é‡Œâ€œæŸä¸€å¥å·²ç»å­¦é”™æˆ–è¿‡æ—¶çš„çŸ¥è¯†â€</strong> ã€‚</p>
</blockquote>
</li>
</ul>
<p>å¦‚æœä½ åªè®°ä½ä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>å‚æ•°å¾®è°ƒ = å†å­¦ä¹ ä¸€é—¨è¯¾</strong><br/>
<strong>æ¨¡å‹ç¼–è¾‘ = æ”¹æ•™ç§‘ä¹¦é‡Œçš„ä¸€å¥è¯</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-1">äºŒã€ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸¤ç§æ–¹æ³•ï¼Ÿ</h2>
<h3 data-id="heading-2">1ï¸âƒ£ å¤§æ¨¡å‹æ˜¯æ€ä¹ˆâ€œå­¦ä¼šä¸œè¥¿â€çš„ï¼Ÿ</h3>
<p>å¤§æ¨¡å‹åœ¨é¢„è®­ç»ƒæ—¶ï¼š</p>
<ul>
<li>çœ‹äº†<strong>æµ·é‡æ•°æ®</strong></li>
<li>ç”¨**è®­ç»ƒï¼ˆloss + åå‘ä¼ æ’­ï¼‰**çš„æ–¹å¼</li>
<li>æŠŠçŸ¥è¯†â€œåˆ†æ•£åœ°â€å­˜è¿›å¤§é‡å‚æ•°é‡Œ</li>
</ul>
<p>ç»“æœæ˜¯ï¼š</p>
<ul>
<li>èƒ½åŠ›å¾ˆå¼º</li>
<li>ä½†<strong>å…·ä½“çŸ¥è¯†å¹¶æ²¡æœ‰æ˜ç¡®å­˜åœ¨å“ªä¸€è¡Œ</strong></li>
</ul>
<p>è¿™å¸¦æ¥ä¸¤ä¸ªç°å®é—®é¢˜ï¼š</p>
<hr/>
<h3 data-id="heading-3">2ï¸âƒ£ ç°å®ä¸­çš„ä¸¤ç±»ä¿®æ”¹éœ€æ±‚</h3>
<h4 data-id="heading-4">åœºæ™¯ Aï¼š</h4>
<blockquote>
<p>â€œæˆ‘æƒ³è®©æ¨¡å‹<strong>æ•´ä½“æ›´æ“…é•¿æŸç±»ä»»åŠ¡</strong>â€</p>
</blockquote>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li>æ›´æ‡‚åŒ»ç–—æ–‡æœ¬</li>
<li>æ›´åƒå®¢æœè¯­æ°”</li>
<li>æ›´æ“…é•¿å†™ä»£ç </li>
</ul>
<p>ğŸ‘‰ è¿™æ˜¯<strong>åˆ†å¸ƒçº§å˜åŒ–</strong><br/>
ğŸ‘‰ é€‚åˆï¼š<strong>å‚æ•°å¾®è°ƒ</strong></p>
<hr/>
<h4 data-id="heading-5">åœºæ™¯ Bï¼š</h4>
<blockquote>
<p>â€œæ¨¡å‹åªæœ‰<strong>æŸä¸ªå…·ä½“äº‹å®æ˜¯é”™çš„</strong>â€</p>
</blockquote>
<p>æ¯”å¦‚ï¼š</p>
<ul>
<li>æŸå…¬å¸ CEO å˜äº†</li>
<li>æŸæ”¿ç­–æ›´æ–°äº†</li>
<li>æŸä¸ªäººç‰©å…³ç³»è¯´é”™äº†</li>
</ul>
<p>ğŸ‘‰ è¿™æ˜¯<strong>ç‚¹çŠ¶çŸ¥è¯†é”™è¯¯</strong><br/>
ğŸ‘‰ é€‚åˆï¼š<strong>æ¨¡å‹ç¼–è¾‘</strong></p>
<hr/>
<h2 data-id="heading-6">ä¸‰ã€ä»€ä¹ˆæ˜¯å‚æ•°å¾®è°ƒï¼ˆFine-tuningï¼‰ï¼Ÿ</h2>
<h3 data-id="heading-7">1ï¸âƒ£ ç”¨ä¸€å¥æœ€é€šä¿—çš„è¯è¯´</h3>
<blockquote>
<p><strong>å‚æ•°å¾®è°ƒ = ç”¨æ–°æ•°æ®ï¼Œå†è®­ç»ƒæ¨¡å‹ä¸€æ®µæ—¶é—´</strong></p>
</blockquote>
<p>å®ƒçš„æµç¨‹å’Œä½ ç›´è§‰ä¸­çš„â€œè®­ç»ƒæ¨¡å‹â€å‡ ä¹ä¸€æ ·ã€‚</p>
<hr/>
<h3 data-id="heading-8">2ï¸âƒ£ å‚æ•°å¾®è°ƒæ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿï¼ˆä¸è®²å…¬å¼ç‰ˆï¼‰</h3>
<p>æµç¨‹å¤§è‡´æ˜¯ï¼š</p>
<ol>
<li>å‡†å¤‡ä¸€æ‰¹æ•°æ®ï¼ˆè¾“å…¥ + æ ‡å‡†ç­”æ¡ˆï¼‰</li>
<li>æ¨¡å‹ç»™å‡ºé¢„æµ‹ç»“æœ</li>
<li>å’Œæ ‡å‡†ç­”æ¡ˆåšå¯¹æ¯”ï¼Œç®—ä¸€ä¸ªâ€œé”™äº†å¤šå°‘â€çš„åˆ†æ•°ï¼ˆlossï¼‰</li>
<li>æ¨¡å‹æ ¹æ®è¿™ä¸ªåˆ†æ•°ï¼Œ<strong>ä¸€ç‚¹ç‚¹è°ƒæ•´å‚æ•°</strong></li>
<li>é‡å¤å¾ˆå¤šæ¬¡ï¼Œç›´åˆ°æ•´ä½“è¡¨ç°å˜å¥½</li>
</ol>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li>â— <strong>æ˜¯â€œæ•´ä½“æ…¢æ…¢å˜å¥½â€</strong></li>
<li>â— <strong>è¿½æ±‚å¹³å‡æ„ä¹‰ä¸Šçš„æ­£ç¡®</strong></li>
</ul>
<hr/>
<h3 data-id="heading-9">3ï¸âƒ£ å‚æ•°å¾®è°ƒä¸€å®šä¼šæ”¹æ‰€æœ‰å‚æ•°å—ï¼Ÿ</h3>
<p><strong>ä¸ä¸€å®šï¼Œè¿™ä¸€ç‚¹éå¸¸é‡è¦ã€‚</strong></p>
<p>å‚æ•°å¾®è°ƒ â‰  ä¸€å®šå…¨é‡æ›´æ–°å‚æ•°ã€‚</p>
<p>ä»å·¥ç¨‹å®ç°ä¸Šï¼Œå¸¸è§ä¸‰å¤§ç±»ï¼š</p>
<hr/>
<h3 data-id="heading-10">ï¼ˆ1ï¼‰åªè®­ç»ƒåŸæ¨¡å‹çš„ä¸€éƒ¨åˆ†å‚æ•°</h3>
<ul>
<li>
<p>å†»ç»“å¤§å¤šæ•°å±‚</p>
</li>
<li>
<p>åªè®­ç»ƒï¼š</p>
<ul>
<li>åå‡ å±‚</li>
<li>æŸäº›å­æ¨¡å—</li>
</ul>
</li>
</ul>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ”¹åŠ¨ç›¸å¯¹æ¸©å’Œ</li>
<li>ä½†ä»ç„¶å±äºâ€œå†è®­ç»ƒâ€</li>
</ul>
<hr/>
<h3 data-id="heading-11">ï¼ˆ2ï¼‰ä¸åŠ¨åŸæ¨¡å‹ï¼Œå¢åŠ æ–°å‚æ•°ï¼ˆåœ¨åŸå§‹æ¨¡å‹åŸºç¡€ä¸Šï¼ŒåŠ ä¸€å±‚ç¥ç»ç½‘ç»œï¼‰</h3>
<p>ä»£è¡¨æ–¹æ³•ï¼š</p>
<ul>
<li>LoRA / QLoRA</li>
<li>Adapter</li>
</ul>
<p>ç›´è§‚ç†è§£ï¼š</p>
<ul>
<li>åŸæ¨¡å‹å‚æ•°å®Œå…¨å†»ç»“</li>
<li>æ—è¾¹åŠ ä¸€ä¸ªâ€œå°è¡¥ä¸â€</li>
<li>è®­ç»ƒçš„åªæ˜¯è¿™ä¸ªè¡¥ä¸</li>
</ul>
<p>ä½†æœ¬è´¨ä»ç„¶æ˜¯ï¼š</p>
<ul>
<li>æœ‰è®­ç»ƒæ•°æ®</li>
<li>æœ‰ loss</li>
<li>å¤šæ­¥è®­ç»ƒ</li>
</ul>
<p>ğŸ‘‰ <strong>æ‰€ä»¥å®ƒä»¬ä¾ç„¶æ˜¯å‚æ•°å¾®è°ƒ</strong></p>
<hr/>
<h3 data-id="heading-12">ï¼ˆ3ï¼‰åªåœ¨â€œè¾“å…¥ä¾§â€å¢åŠ å‚æ•°ï¼ˆåŠ ä¸€å±‚ç¥ç»ç½‘ç»œå¤„ç†inputï¼‰</h3>
<p>ä»£è¡¨æ–¹æ³•ï¼š</p>
<ul>
<li>Prompt Tuning</li>
<li>Prefix Tuning</li>
</ul>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>
<p>ä¸æ”¹æ¨¡å‹ç»“æ„</p>
</li>
<li>
<p>è®­ç»ƒçš„æ˜¯ï¼š</p>
<ul>
<li>è™šæ‹Ÿ prompt</li>
<li>æ³¨æ„åŠ›é‡Œçš„åç½®</li>
</ul>
</li>
</ul>
<p>æœ¬è´¨ï¼š</p>
<blockquote>
<p><strong>é€šè¿‡â€œæ€ä¹ˆå–‚ç»™æ¨¡å‹è¾“å…¥â€æ¥å½±å“æ•´ä½“è¡Œä¸º</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-13">4ï¸âƒ£ å‚æ•°å¾®è°ƒçš„æœ¬è´¨ç‰¹å¾ï¼ˆæ€»ç»“ï¼‰</h3>
<ul>
<li>âœ… ä¸€å®šæœ‰ loss</li>
<li>âœ… åœ¨æ•°æ®åˆ†å¸ƒä¸Šä¼˜åŒ–</li>
<li>âœ… å¤šæ­¥è®­ç»ƒã€è¿½æ±‚æ”¶æ•›</li>
<li>âŒ ä¸ä¿è¯åªæ”¹æŸä¸€æ¡å…·ä½“çŸ¥è¯†</li>
</ul>
<hr/>
<h2 data-id="heading-14">å››ã€ä»€ä¹ˆæ˜¯æ¨¡å‹ç¼–è¾‘ï¼ˆModel Editingï¼‰ï¼Ÿ</h2>
<h3 data-id="heading-15">1ï¸âƒ£ ä¸€å¥è¯ç›´è§‚ç†è§£</h3>
<blockquote>
<p><strong>æ¨¡å‹ç¼–è¾‘ = ä¸é‡æ–°è®­ç»ƒæ¨¡å‹ï¼Œåªä¿®æ­£å®ƒâ€œæŸä¸ªå…·ä½“é—®ç­”â€çš„ç»“æœ</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-16">2ï¸âƒ£ æ¨¡å‹ç¼–è¾‘è§£å†³çš„æ˜¯ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h3>
<p>å…¸å‹é—®é¢˜å½¢å¼æ˜¯ï¼š</p>
<blockquote>
<p>â€œå½“æ¨¡å‹è¢«é—®åˆ° X æ—¶ï¼Œ<br/>
å®ƒä»¥ååº”è¯¥å›ç­” Yï¼Œè€Œä¸æ˜¯åŸæ¥çš„ Zã€‚â€</p>
</blockquote>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>åªå…³å¿ƒ<strong>è¿™ä¸€æ¡æˆ–å°‘æ•°å‡ æ¡è¾“å…¥è¾“å‡º</strong></li>
<li>ä¸å…³å¿ƒæ•´ä½“åˆ†å¸ƒæ€§èƒ½æ˜¯å¦æå‡</li>
</ul>
<hr/>
<h3 data-id="heading-17">3ï¸âƒ£ æ¨¡å‹ç¼–è¾‘æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿï¼ˆç›´è§‰ç‰ˆï¼‰</h3>
<p>æ ¸å¿ƒç›®æ ‡åªæœ‰ä¸‰ä¸ªï¼š</p>
<ol>
<li><strong>è¿™æ¡é—®ç­”ä¸€å®šè¦æ”¹å¯¹ï¼ˆEdit Successï¼‰</strong></li>
<li><strong>åˆ«å½±å“æ— å…³é—®é¢˜ï¼ˆLocalityï¼‰</strong></li>
<li><strong>æ”¹åŠ¨å°½é‡å°ï¼ˆMinimal Changeï¼‰</strong></li>
</ol>
<p>æ‰€ä»¥æ¨¡å‹ç¼–è¾‘ä¸æ˜¯åœ¨â€œè®­ç»ƒæ¨¡å‹â€ï¼Œè€Œæ˜¯åœ¨ï¼š</p>
<blockquote>
<p><strong>è§£ä¸€ä¸ªâ€œæœ€å°æ”¹åŠ¨ã€æ»¡è¶³çº¦æŸâ€çš„é—®é¢˜</strong></p>
</blockquote>
<hr/>
<h3 data-id="heading-18">4ï¸âƒ£ æ¨¡å‹ç¼–è¾‘æœ‰æ²¡æœ‰ lossï¼Ÿ</h3>
<p><strong>æœ‰ï¼Œä½†å’Œå¾®è°ƒå®Œå…¨ä¸åŒã€‚</strong></p>
<ul>
<li>
<p>å¾®è°ƒï¼š</p>
<ul>
<li>loss ç”¨æ¥è®©æ¨¡å‹â€œæ•´ä½“è¶Šæ¥è¶Šå¥½â€</li>
<li>è¿½æ±‚æ”¶æ•›</li>
</ul>
</li>
<li>
<p>æ¨¡å‹ç¼–è¾‘ï¼š</p>
<ul>
<li>
<p>loss åªæ˜¯ç”¨æ¥åˆ¤æ–­ï¼š</p>
<ul>
<li>â€œè¿™æ¡æŒ‡å®šé—®ç­”å¯¹ä¸å¯¹ï¼Ÿâ€</li>
</ul>
</li>
<li>
<p><strong>ä¸€æ—¦æ»¡è¶³å°±åœæ­¢</strong></p>
</li>
</ul>
</li>
</ul>
<p>ğŸ‘‰ <strong>ä¸æ˜¯è®­ç»ƒï¼Œè€Œæ˜¯ä¸€æ¬¡æ€§ä¿®å¤</strong></p>
<hr/>
<h3 data-id="heading-19">5ï¸âƒ£ æ¨¡å‹ç¼–è¾‘çš„ä¸‰ç§å…¸å‹å®ç°æ€è·¯ï¼ˆä¸æ·±å…¥ç®—æ³•ï¼‰</h3>
<h4 data-id="heading-20">ï¼ˆ1ï¼‰ç›´æ¥æ”¹æ¨¡å‹å†…éƒ¨å‚æ•°</h4>
<ul>
<li>æ‰¾åˆ°ä¸è¯¥çŸ¥è¯†æœ€ç›¸å…³çš„å±‚</li>
<li>åšéå¸¸å°çš„æ•°å€¼ä¿®æ”¹</li>
</ul>
<p>å¯ä»¥ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>â€œç²¾å‡†åœ°æ‹§äº†ä¸€ä¸‹æŸä¸ªèºä¸â€</p>
</blockquote>
<hr/>
<h4 data-id="heading-21">ï¼ˆ2ï¼‰åŸºäºå•æ ·æœ¬çš„æå°‘æ­¥ä¼˜åŒ–</h4>
<ul>
<li>åªç”¨ä¸€æ¡é—®ç­”</li>
<li>åŠ å¼ºâ€œä¸è¦å½±å“åˆ«çš„åœ°æ–¹â€çš„çº¦æŸ</li>
<li>ä¼˜åŒ– 1ï½å‡ æ­¥å°±åœ</li>
</ul>
<hr/>
<h4 data-id="heading-22">ï¼ˆ3ï¼‰å¤–æ¥è¡¥ä¸ / è®°å¿† / è·¯ç”±</h4>
<ul>
<li>
<p>ä¸ç›´æ¥æ”¹ä¸»æ¨¡å‹</p>
</li>
<li>
<p>é‡åˆ°ç‰¹å®šé—®é¢˜æ—¶ï¼š</p>
<ul>
<li>èµ°â€œä¿®æ­£é€šé“â€</li>
</ul>
</li>
</ul>
<p>æ›´åƒæ˜¯ï¼š</p>
<blockquote>
<p>â€œæ‰“è¡¥ä¸è€Œä¸æ˜¯é‡ç¼–ç¨‹åºâ€</p>
</blockquote>
<hr/>
<h2 data-id="heading-23">äº”ã€ä¸ºä»€ä¹ˆæ¨¡å‹ç¼–è¾‘ä¸èƒ½ç®€å•çœ‹æˆâ€œä¸€ç§å¾®è°ƒâ€ï¼Ÿ</h2>
<p>è¿™æ˜¯ä¸€ä¸ªéå¸¸å®¹æ˜“æ··æ·†çš„ç‚¹ã€‚</p>
<p>å…³é”®åŒºåˆ«åœ¨äºï¼š</p>
<h3 data-id="heading-24">1ï¸âƒ£ ä¼˜åŒ–ç›®æ ‡ä¸åŒ</h3>
<ul>
<li>
<p>å‚æ•°å¾®è°ƒï¼š</p>
<ul>
<li>ä¼˜åŒ–çš„æ˜¯ <strong>å¹³å‡è¡¨ç°</strong></li>
</ul>
</li>
<li>
<p>æ¨¡å‹ç¼–è¾‘ï¼š</p>
<ul>
<li>æ»¡è¶³çš„æ˜¯ <strong>æ˜ç¡®çº¦æŸ</strong></li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-25">2ï¸âƒ£ æ—¶é—´å°ºåº¦ä¸åŒ</h3>
<ul>
<li>å¾®è°ƒï¼šåˆ†é’Ÿ / å°æ—¶</li>
<li>æ¨¡å‹ç¼–è¾‘ï¼šç§’çº§</li>
</ul>
<hr/>
<h3 data-id="heading-26">3ï¸âƒ£ å¯é€†æ€§ä¸åŒ</h3>
<ul>
<li>
<p>å¾®è°ƒï¼š</p>
<ul>
<li>æ”¹äº†å°±å¾ˆéš¾å›æ»š</li>
</ul>
</li>
<li>
<p>æ¨¡å‹ç¼–è¾‘ï¼š</p>
<ul>
<li>é€šå¸¸å¯ä»¥æ’¤é”€æŸä¸€æ¬¡ä¿®æ”¹</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-27">å…­ã€æœ€ç»ˆå¯¹ç…§æ€»ç»“è¡¨</h2>








































<table><thead><tr><th>ç»´åº¦</th><th>å‚æ•°å¾®è°ƒ</th><th>æ¨¡å‹ç¼–è¾‘</th></tr></thead><tbody><tr><td>ä¿®æ”¹å¯¹è±¡</td><td>è¡Œä¸ºåˆ†å¸ƒ</td><td>å…·ä½“çŸ¥è¯†ç‚¹</td></tr><tr><td>æ˜¯å¦è®­ç»ƒ</td><td>æ˜¯</td><td>å¦ï¼ˆæˆ–æå°‘æ­¥ï¼‰</td></tr><tr><td>æ˜¯å¦è¿½æ±‚æ”¶æ•›</td><td>æ˜¯</td><td>å¦</td></tr><tr><td>æ˜¯å¦ç”¨ loss</td><td>æ˜¯</td><td>æ˜¯ï¼ˆä½†ä»…ä½œçº¦æŸï¼‰</td></tr><tr><td>å½±å“èŒƒå›´</td><td>å…¨å±€</td><td>å±€éƒ¨</td></tr><tr><td>å…¸å‹ç”¨é€”</td><td>æ–°ä»»åŠ¡ / æ–°é¢†åŸŸ</td><td>ä¿®é”™ / æ›´æ–°äº‹å®</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-28">ä¸ƒã€ä¸€å¥è¯ç»ˆææ€»ç»“</h2>
<blockquote>
<p><strong>å‚æ•°å¾®è°ƒæ˜¯åœ¨â€œæ•™æ¨¡å‹å­¦æ–°ä¸œè¥¿â€</strong><br/>
<strong>æ¨¡å‹ç¼–è¾‘æ˜¯åœ¨â€œçº æ­£æ¨¡å‹å·²ç»å­¦é”™çš„æŸä¸€å¥è¯â€</strong></p>
</blockquote>
<p>å¦‚æœä½ ç†è§£äº†è¿™ä¸€ç‚¹ï¼Œåé¢çš„æ‰€æœ‰æŠ€æœ¯å·®å¼‚ï¼Œéƒ½ä¼šå˜å¾—éå¸¸è‡ªç„¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[StreamPanelï¼šä¸€ä¸ªè®© SSE è°ƒè¯•ä¸å†ç—›è‹¦çš„ Chrome æ’ä»¶]]></title>    <link>https://juejin.cn/post/7584243498527211520</link>    <guid>https://juejin.cn/post/7584243498527211520</guid>    <pubDate>2025-12-16T07:14:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584243498527211520" data-draft-id="7584013833993846818" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="StreamPanelï¼šä¸€ä¸ªè®© SSE è°ƒè¯•ä¸å†ç—›è‹¦çš„ Chrome æ’ä»¶"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,HTTP"/> <meta itemprop="datePublished" content="2025-12-16T07:14:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å–µçˆ¸çš„å°ä½œåŠ"/> <meta itemprop="url" content="https://juejin.cn/user/1679709495365405"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            StreamPanelï¼šä¸€ä¸ªè®© SSE è°ƒè¯•ä¸å†ç—›è‹¦çš„ Chrome æ’ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1679709495365405/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å–µçˆ¸çš„å°ä½œåŠ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T07:14:18.000Z" title="Tue Dec 16 2025 07:14:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">StreamPanelï¼šä¸€ä¸ªè®© SSE è°ƒè¯•ä¸å†ç—›è‹¦çš„ Chrome æ’ä»¶</h2>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d2d1fe8cc3e483889cc40700b880ab9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Za154i455qE5bCP5L2c5Z2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474057&amp;x-signature=B33cTZOGE0VxBzYklYKsCWCsKSU%3D" alt="z-image_00006_" loading="lazy"/>
<blockquote>
<p>å½“ Chrome å¼€å‘è€…å·¥å…·çš„ Network é¢æ¿æ— æ³•æ»¡è¶³ä½ çš„ SSE è°ƒè¯•éœ€æ±‚æ—¶ï¼Œæˆ‘ä»¬é€‰æ‹©è‡ªå·±åŠ¨æ‰‹åšä¸€ä¸ªã€‚</p>
</blockquote>
<h3 data-id="heading-1">æ•…äº‹çš„å¼€å§‹</h3>
<p>åœ¨å¼€å‘ AI åº”ç”¨å¹³å°çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦è°ƒè¯• Server-Sent Events (SSE) è¿æ¥ã€‚Chrome å¼€å‘è€…å·¥å…·è™½ç„¶å¼ºå¤§ï¼Œä½†åœ¨æŸ¥çœ‹ SSE æŠ¥æ–‡æ–¹é¢ç¡®å®æœ‰äº›åŠ›ä¸ä»å¿ƒï¼š</p>
<ul>
<li>Network é¢æ¿ä¸­çš„ EventStream æŸ¥çœ‹ä½“éªŒä¸å¤Ÿå‹å¥½</li>
<li>æ— æ³•æ–¹ä¾¿åœ°æŸ¥çœ‹ iframe ä¸­çš„ SSE è¿æ¥</li>
<li>ç¼ºå°‘é’ˆå¯¹æµå¼æ•°æ®çš„ç­›é€‰å’Œæœç´¢åŠŸèƒ½</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79c2da261b4e41358be7ca48b6649a6d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Za154i455qE5bCP5L2c5Z2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474057&amp;x-signature=bRndK4i7SYUvjOAVDi5rFwGwEV8%3D" alt="z-image_00007_" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/640290f55b204e5c9b82fd0e0145ac11~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Za154i455qE5bCP5L2c5Z2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474057&amp;x-signature=Q%2B%2B0y2NAr4WaiiR%2FMtYNWBWLe5Y%3D" alt="z-image_00008_" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77283396ac234187bbbe9eaabe28b1f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Za154i455qE5bCP5L2c5Z2K:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474057&amp;x-signature=1AJICQDszdy712Ej1p%2B2Vn8Jihk%3D" alt="z-image_00009_" loading="lazy"/></p>
<h3 data-id="heading-2">StreamPanel æ˜¯ä»€ä¹ˆ</h3>
<p>StreamPanel æ˜¯ä¸€ä¸ª Chrome DevTools æ‰©å±•ï¼Œä¸“é—¨ç”¨äºç›‘æ§å’Œè°ƒè¯•æµå¼è¯·æ±‚ã€‚å®ƒèƒ½å¤Ÿï¼š</p>
<ul>
<li>ğŸ” <strong>å®æ—¶ç›‘æ§</strong>ï¼šæ‹¦æˆªå¹¶æ˜¾ç¤ºæ‰€æœ‰ EventSource å’ŒåŸºäº Fetch çš„ SSE è¿æ¥</li>
<li>ğŸ“Š <strong>æ¶ˆæ¯æ£€æŸ¥</strong>ï¼šæŸ¥çœ‹è¯¦ç»†çš„æ¶ˆæ¯æ•°æ®ï¼Œæ”¯æŒ JSON è¯­æ³•é«˜äº®</li>
<li>ğŸ”— <strong>è¿æ¥ç®¡ç†</strong>ï¼šåŒæ—¶è·Ÿè¸ªå¤šä¸ªæµå¼è¿æ¥ï¼ŒåŒ…æ‹¬ä¸»é¡µé¢å’Œ iframe</li>
<li>ğŸ¯ <strong>URL è¿‡æ»¤</strong>ï¼šæŒ‰ URL è¿‡æ»¤è¿æ¥ï¼Œå¿«é€Ÿå®šä½ç›®æ ‡ç«¯ç‚¹</li>
<li>ğŸ” <strong>æ¶ˆæ¯ç­›é€‰</strong>ï¼šæ ¹æ® JSON å­—æ®µå€¼è¿›è¡Œç­›é€‰ï¼ˆæ”¯æŒå…¨ç­‰å’ŒåŒ…å«ä¸¤ç§æ¨¡å¼ï¼‰</li>
<li>ğŸŒ“ <strong>æ·±è‰²æ¨¡å¼</strong>ï¼šè‡ªåŠ¨é€‚é…ç³»ç»Ÿä¸»é¢˜</li>
</ul>
<h3 data-id="heading-3">å®‰è£…æ–¹æ³•</h3>
<h4 data-id="heading-4">1. è·å–æºç </h4>
<p>é¦–å…ˆï¼Œä½ éœ€è¦è·å– StreamPanel çš„æºç ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš†ä»“åº“</span>
git <span class="hljs-built_in">clone</span> https://github.com/bywwcnll/StreamPanel.git
<span class="hljs-built_in">cd</span> StreamPanel
</code></pre>
<p>æˆ–è€…ç›´æ¥ä¸‹è½½ ZIP æ–‡ä»¶å¹¶è§£å‹ã€‚</p>
<h4 data-id="heading-5">2. åŠ è½½åˆ° Chrome</h4>
<ol>
<li>æ‰“å¼€ Chrome æµè§ˆå™¨ï¼Œè®¿é—® <code>chrome://extensions/</code></li>
<li>åœ¨å³ä¸Šè§’å¼€å¯<strong>å¼€å‘è€…æ¨¡å¼</strong>ï¼ˆDeveloper modeï¼‰</li>
<li>ç‚¹å‡»<strong>åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº</strong>ï¼ˆLoad unpackedï¼‰</li>
<li>é€‰æ‹© StreamPanel é¡¹ç›®ç›®å½•</li>
<li>å®Œæˆï¼æ’ä»¶å·²å®‰è£…</li>
</ol>
<h4 data-id="heading-6">3. éªŒè¯å®‰è£…</h4>
<p>å®‰è£…æˆåŠŸåï¼Œä½ åº”è¯¥èƒ½åœ¨æ‰©å±•ç¨‹åºåˆ—è¡¨ä¸­çœ‹åˆ° StreamPanelã€‚æ‰“å¼€ä»»æ„ç½‘é¡µçš„å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ä¸€ä¸ªæ–°çš„ <strong>Stream Panel</strong> æ ‡ç­¾é¡µã€‚</p>
<h3 data-id="heading-7">ä½¿ç”¨æ–¹æ³•</h3>
<h4 data-id="heading-8">åŸºæœ¬ä½¿ç”¨</h4>
<ol>
<li>
<p><strong>æ‰“å¼€å¼€å‘è€…å·¥å…·</strong></p>
<ul>
<li>æŒ‰ <code>F12</code> æˆ–å³é”®é€‰æ‹©"æ£€æŸ¥"</li>
<li>åˆ‡æ¢åˆ° <strong>Stream Panel</strong> æ ‡ç­¾é¡µ</li>
</ul>
</li>
<li>
<p><strong>æŸ¥çœ‹è¿æ¥</strong></p>
<ul>
<li>å·¦ä¾§é¢æ¿ä¼šæ˜¾ç¤ºæ‰€æœ‰æ£€æµ‹åˆ°çš„æµå¼è¿æ¥</li>
<li>æ¯ä¸ªè¿æ¥æ˜¾ç¤º URLã€çŠ¶æ€ã€æ¶ˆæ¯æ•°é‡ç­‰ä¿¡æ¯</li>
<li>è¿æ¥æŒ‰åˆ›å»ºæ—¶é—´å€’åºæ’åˆ—ï¼Œæœ€æ–°çš„åœ¨æœ€ä¸Šé¢</li>
</ul>
</li>
<li>
<p><strong>æŸ¥çœ‹æ¶ˆæ¯</strong></p>
<ul>
<li>ç‚¹å‡»å·¦ä¾§çš„è¿æ¥ï¼Œå³ä¾§ä¼šæ˜¾ç¤ºè¯¥è¿æ¥çš„æ‰€æœ‰æ¶ˆæ¯</li>
<li>æ¶ˆæ¯ä»¥è¡¨æ ¼å½¢å¼å±•ç¤ºï¼šIDã€ç±»å‹ã€æ•°æ®ã€æ—¶é—´</li>
<li>ç‚¹å‡»ä»»æ„æ¶ˆæ¯å¯æŸ¥çœ‹è¯¦ç»†çš„ JSON å†…å®¹</li>
</ul>
</li>
</ol>
<h4 data-id="heading-9">é«˜çº§åŠŸèƒ½</h4>
<h5 data-id="heading-10">URL è¿‡æ»¤</h5>
<p>åœ¨é¡¶éƒ¨å·¥å…·æ çš„è¾“å…¥æ¡†ä¸­è¾“å…¥ URL å…³é”®è¯ï¼Œå¯ä»¥å¿«é€Ÿè¿‡æ»¤è¿æ¥åˆ—è¡¨ã€‚</p>
<h5 data-id="heading-11">æ¶ˆæ¯ç­›é€‰</h5>
<p>è¿™æ˜¯ StreamPanel çš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œç‰¹åˆ«é€‚åˆå¤„ç†å¤§é‡æ¶ˆæ¯çš„åœºæ™¯ï¼š</p>
<ol>
<li>ç‚¹å‡»å³ä¸Šè§’çš„<strong>ç­›é€‰</strong>æŒ‰é’®ï¼Œæ˜¾ç¤ºç­›é€‰é¢æ¿</li>
<li>ç‚¹å‡»<strong>æ·»åŠ ç­›é€‰æ¡ä»¶</strong></li>
<li>é…ç½®ç­›é€‰æ¡ä»¶ï¼š
<ul>
<li><strong>å­—æ®µ</strong>ï¼šä»ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©è¦ç­›é€‰çš„ JSON å­—æ®µï¼ˆè‡ªåŠ¨æå–æ‰€æœ‰å¯ç”¨å­—æ®µï¼‰</li>
<li><strong>åŒ¹é…æ¨¡å¼</strong>ï¼šé€‰æ‹©"å…¨ç­‰"æˆ–"åŒ…å«"</li>
<li><strong>ç­›é€‰å€¼</strong>ï¼šè¾“å…¥è¦åŒ¹é…çš„å€¼</li>
</ul>
</li>
<li>å¯ä»¥æ·»åŠ å¤šä¸ªç­›é€‰æ¡ä»¶ï¼Œä½¿ç”¨ AND é€»è¾‘</li>
<li>ç‚¹å‡»<strong>åº”ç”¨ç­›é€‰</strong>æŒ‰é’®ç”Ÿæ•ˆ</li>
</ol>
<p><strong>ç¤ºä¾‹åœºæ™¯</strong>ï¼š</p>
<p>å‡è®¾ä½ çš„ SSE æ¶ˆæ¯æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"event"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"message"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"conversation_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"c8f8a2ec-d046-4fcb-84d4-55b42308f68d"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"message_id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"fe50c43f-e4b7-4f9d-be73-87cf20ca738f"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"answer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é¥®é…’"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ä½ å¯ä»¥ï¼š</p>
<ul>
<li>ç­›é€‰ <code>event</code> å­—æ®µç­‰äº <code>"message"</code> çš„æ¶ˆæ¯</li>
<li>ç­›é€‰ <code>conversation_id</code> åŒ…å« <code>"c8f8"</code> çš„æ¶ˆæ¯</li>
<li>åŒæ—¶åº”ç”¨å¤šä¸ªæ¡ä»¶ï¼Œæ¯”å¦‚ï¼š<code>event</code> ç­‰äº <code>"message"</code> <strong>ä¸”</strong> <code>answer</code> åŒ…å« <code>"é…’"</code></li>
</ul>
<h5 data-id="heading-12">æ”¯æŒåµŒå¥—å­—æ®µ</h5>
<p>StreamPanel æ”¯æŒä½¿ç”¨ç‚¹å·è¡¨ç¤ºæ³•è®¿é—®åµŒå¥—çš„ JSON å­—æ®µï¼Œä¾‹å¦‚ï¼š<code>user.profile.name</code></p>
<h3 data-id="heading-13">æŠ€æœ¯å®ç°</h3>
<p>StreamPanel çš„æ ¸å¿ƒæ˜¯æ‹¦æˆªæµè§ˆå™¨çš„ EventSource å’Œ Fetch APIï¼Œå®ç°åŸç†å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">ç½‘é¡µ
  â””â”€â”€ inject<span class="hljs-selector-class">.js</span> (æ‹¦æˆª EventSource/fetch)
      â””â”€â”€ <span class="hljs-attribute">content</span><span class="hljs-selector-class">.js</span> (æ¶ˆæ¯æ¡¥æ¢)
          â””â”€â”€ <span class="hljs-attribute">background</span><span class="hljs-selector-class">.js</span> (æ•°æ®å­˜å‚¨)
              â””â”€â”€ devtools/panel (UI æ˜¾ç¤º)
</code></pre>
<h4 data-id="heading-14">å…³é”®ç»„ä»¶</h4>
<ol>
<li><strong>inject.js</strong>ï¼šæ³¨å…¥åˆ°ç½‘é¡µä¸­ï¼Œæ‹¦æˆª <code>EventSource</code> æ„é€ å‡½æ•°å’Œ <code>fetch</code> API</li>
<li><strong>content.js</strong>ï¼šä½œä¸ºæ³¨å…¥è„šæœ¬å’Œåå°è„šæœ¬ä¹‹é—´çš„æ¶ˆæ¯æ¡¥æ¢</li>
<li><strong>background.js</strong>ï¼šç®¡ç†æ•°æ®å­˜å‚¨ï¼Œå¤„ç†æ ‡ç­¾é¡µé—´çš„é€šä¿¡</li>
<li><strong>devtools/panel</strong>ï¼šåœ¨ Chrome DevTools ä¸­æ˜¾ç¤ºçš„ UI é¢æ¿</li>
</ol>
<h4 data-id="heading-15">ç­›é€‰åŠŸèƒ½å®ç°</h4>
<p>æ¶ˆæ¯ç­›é€‰åŠŸèƒ½çš„æ ¸å¿ƒæ˜¯ï¼š</p>
<ul>
<li>é€’å½’æå– JSON æ•°æ®ä¸­çš„æ‰€æœ‰å­—æ®µï¼ˆåŒ…æ‹¬åµŒå¥—å­—æ®µï¼‰</li>
<li>æ”¯æŒç‚¹å·è¡¨ç¤ºæ³•è®¿é—®åµŒå¥—å±æ€§</li>
<li>ä½¿ç”¨é˜²æŠ–ä¼˜åŒ–ï¼Œé¿å…é¢‘ç¹é‡æ¸²æŸ“</li>
<li>åˆ†ç¦»"å¾…åº”ç”¨"å’Œ"å·²åº”ç”¨"çš„ç­›é€‰æ¡ä»¶ï¼Œæä¾›æ›´å¥½çš„äº¤äº’ä½“éªŒ</li>
</ul>
<h3 data-id="heading-16">ä½¿ç”¨åœºæ™¯</h3>
<p>StreamPanel ç‰¹åˆ«é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li><strong>AI åº”ç”¨å¼€å‘</strong>ï¼šè°ƒè¯• LLM æµå¼å“åº”</li>
<li><strong>å®æ—¶æ•°æ®ç›‘æ§</strong>ï¼šæŸ¥çœ‹ WebSocket/SSE æ¨é€çš„æ•°æ®</li>
<li><strong>API è°ƒè¯•</strong>ï¼šåˆ†ææµå¼æ¥å£çš„è¿”å›å†…å®¹</li>
<li><strong>å¤š iframe åœºæ™¯</strong>ï¼šåŒæ—¶ç›‘æ§ä¸»é¡µé¢å’Œ iframe ä¸­çš„è¿æ¥</li>
</ul>
<h3 data-id="heading-17">æ€»ç»“</h3>
<p>StreamPanel çš„è¯ç”Ÿæºäºå®é™…å¼€å‘ä¸­çš„ç—›ç‚¹ã€‚é€šè¿‡ AI è¾…åŠ©å¼€å‘ï¼Œæˆ‘ä»¬å¿«é€Ÿå®ç°äº†ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„ Chrome æ’ä»¶ï¼Œä¸ä»…è§£å†³äº†è‡ªå·±çš„é—®é¢˜ï¼Œä¹Ÿå¸Œæœ›èƒ½å¸®åŠ©åˆ°æ›´å¤šå¼€å‘è€…ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿåœ¨ä¸º SSE è°ƒè¯•è€Œçƒ¦æ¼ï¼Œä¸å¦¨è¯•è¯• StreamPanelã€‚é¡¹ç›®å·²å¼€æºï¼Œæ¬¢è¿ä½¿ç”¨å’Œè´¡çŒ®ï¼</p>
<hr/>
<p><strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbywwcnll%2FStreamPanel" target="_blank" title="https://github.com/bywwcnll/StreamPanel" ref="nofollow noopener noreferrer">GitHub Repository</a></p>
<p><strong>é—®é¢˜åé¦ˆ</strong>ï¼šæ¬¢è¿æäº¤ Issue æˆ– Pull Request</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµè§ˆå™¨åŠæ ‡ç­¾é¡µå…³é—­æ—¶ç™»å‡ºçš„è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7584057497206063147</link>    <guid>https://juejin.cn/post/7584057497206063147</guid>    <pubDate>2025-12-16T07:19:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584057497206063147" data-draft-id="7584061465398296617" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµè§ˆå™¨åŠæ ‡ç­¾é¡µå…³é—­æ—¶ç™»å‡ºçš„è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,æµè§ˆå™¨"/> <meta itemprop="datePublished" content="2025-12-16T07:19:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç å†œèƒ–å¤§æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/4195392102086967"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµè§ˆå™¨åŠæ ‡ç­¾é¡µå…³é—­æ—¶ç™»å‡ºçš„è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4195392102086967/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç å†œèƒ–å¤§æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T07:19:12.000Z" title="Tue Dec 16 2025 07:19:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>é¡¹ç›®å‡ºäºå®‰å…¨è¯„æµ‹çš„è¦æ±‚ï¼Œéœ€è¦é¡µé¢åœ¨æµè§ˆå™¨åŠå…¶æ ‡ç­¾é¡µå…³é—­çš„æ—¶å€™ç™»å‡ºï¼Œä¿è¯æ¯æ¬¡è¿›å…¥ç³»ç»Ÿéƒ½é‡æ–°ç™»å½•ã€‚
æ ¸å¿ƒå¤„ç†é€»è¾‘æœ‰å¦‚ä¸‹å‡ ç‚¹ï¼š</p>
<ol>
<li>ç›‘å¬æµè§ˆå™¨å…³é—­äº‹ä»¶</li>
<li>å…³é—­æ—¶æ¸…é™¤æœ¬åœ°å­˜å‚¨çš„token</li>
<li>å…³é—­æ—¶è°ƒç”¨ç™»å‡ºæ¥å£ä¿è¯åç«¯redisä¸­tokenè¢«æ¸…é™¤</li>
</ol>
<p>é€šè¿‡AIå’Œç½‘ç»œæœç´¢ ç»™å‡ºçš„æ–¹æ¡ˆï¼Œå¾ˆå¿«å°±å®ç°äº†ã€‚ä½†åœ¨è‡ªæµ‹éªŒè¯è¿‡ç¨‹ä¸­ï¼Œå‘ç°æœ‰ä¸¤ä¸ªè´¹åŠ²å‘¨æŠ˜çš„é—®é¢˜ã€‚</p>
<ol>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FWindow%2Fbeforeunload_event" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/beforeunload_event" ref="nofollow noopener noreferrer">beforeunload äº‹ä»¶</a>åœ¨é¡µé¢åˆ·æ–°æ—¶ä¹Ÿä¼šè§¦å‘ï¼Œè€Œæ’é™¤æ˜¯åˆ·æ–°çš„æƒ…å†µ è¯•äº†Nç§æ–¹æ¡ˆéƒ½ä¸å°½äººæ„</li>
<li>æ ‡ç­¾é¡µå…³é—­åaxiosè§¦å‘çš„ç™»å‡ºè¯·æ±‚ ä¼šè¢«æµè§ˆå™¨å–æ¶ˆï¼Œåç«¯æ¥æ”¶ä¸åˆ°ã€‚</li>
</ol>
<p>æŠ˜è…¾ä¸€æ³¢åï¼Œæœ€ç»ˆéƒ½è§£å†³äº†ï¼Œè¿™é‡Œè®°å½•ä¸‹è§£å†³æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-1">äºŒã€è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-2">2.1 æ ‡ç­¾é¡µå…³é—­æ—¶ç™»å‡ºï¼Œä½†æ’é™¤åˆ·æ–°çš„åœºæ™¯</h3>
<p>åœ¨<code>unload</code>äº‹ä»¶ä¸­å¢åŠ åˆ·æ–°æƒ…å†µçš„åˆ¤æ–­ã€‚é™¤äº†ä¸‹é¢ä»£ç ä¸­æ—¶é—´å·®çš„åˆ¤æ–­æ–¹æ³•å¤–ï¼Œè¿˜å°è¯•è¿‡<code>performance.navigation</code>ç­‰æ–¹æ¡ˆï¼Œéƒ½æ— æ•ˆã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">let</span> _beforeUnload_time = <span class="hljs-number">0</span>
<span class="hljs-keyword">let</span> _gap_time = <span class="hljs-number">0</span>
<span class="hljs-variable language_">window</span>.<span class="hljs-property">onbeforeunload</span> = <span class="hljs-function">() =&gt;</span> {
  _beforeUnload_time = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"beforeUnload_time"</span>, _beforeUnload_time);
};

<span class="hljs-variable language_">window</span>.<span class="hljs-property">onunload</span> = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
  _gap_time = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>() - _beforeUnload_time;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"gap_time"</span>, _gap_time);
<span class="hljs-keyword">if</span> (_gap_time &lt;= <span class="hljs-number">5</span> || event.<span class="hljs-property">altKey</span>) {
    <span class="hljs-comment">// æ‰§è¡Œå…³é—­éœ€è¦è¿›è¡Œçš„æ“ä½œï¼Œ1. æ¸…é™¤æœ¬åœ°ç¼“å­˜ï¼›2. å‘é€ç™»å‡ºæ¥å£</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"xxxxxxxå…³é—­"</span>);
  }<span class="hljs-keyword">else</span>{
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"é¡µé¢åˆ·æ–°"</span>);
  }
};
</code></pre>
<h3 data-id="heading-3">2.2 ç™»å‡ºè¯·æ±‚ï¼Œé¿å…è¢«æµè§ˆå™¨å–æ¶ˆ</h3>
<p>Fetchçš„keepaliveå¯ä»¥åœ¨é¡µé¢å¸è½½ï¼ˆå¦‚ç”¨æˆ·å…³é—­æ ‡ç­¾é¡µæˆ–è·³è½¬åˆ°æ–°é¡µé¢ï¼‰åï¼Œç¡®ä¿è¯·æ±‚ä»èƒ½åœ¨åå°å®Œæˆçš„é€‰é¡¹</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-title function_ invoke__">fetch</span>(<span class="hljs-string">'/api/logout'</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>,
  <span class="hljs-attr">headers</span>: {
    <span class="hljs-string">'Authorization'</span>: token
  },
  <span class="hljs-attr">keepalive</span>: <span class="hljs-literal">true</span>, // ç±»ä¼¼ sendBeacon çš„è¡Œä¸º
});
</code></pre>
<h3 data-id="heading-4">2.3 æµè§ˆå™¨å…³é—­å†è¿›å…¥çš„åœºæ™¯</h3>
<p>åŸºäºsessionStorageåšåˆ¤æ–­ï¼Œå­˜å‚¨åœ¨Â <code>sessionStorage</code>Â é‡Œé¢çš„æ•°æ®åœ¨é¡µé¢ä¼šè¯ç»“æŸæ—¶ä¼šè¢«æµè§ˆå™¨è‡ªåŠ¨æ¸…é™¤ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// åˆæ¬¡è¿›å…¥è·³è½¬ç™»å½•é¡µé¢</span>
<span class="hljs-keyword">if</span> (!sessionStorage.<span class="hljs-built_in">getItem</span>(<span class="hljs-string">"entered"</span>)) {
  location.hash = <span class="hljs-string">"#/login"</span>;
  sessionStorage.<span class="hljs-built_in">setItem</span>(<span class="hljs-string">"entered"</span>, <span class="hljs-string">"true"</span>);
}
</code></pre>
<h2 data-id="heading-5">ä¸‰ã€å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://juejin.cn/post/7356138322368184358" target="_blank" title="https://juejin.cn/post/7356138322368184358">chrome åˆ¤æ–­å½“å‰æ˜¯å…³é—­æµè§ˆå™¨è¿˜æ˜¯åˆ·æ–°æµè§ˆå™¨</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FAPI%2FNavigator%2FsendBeacon" target="_blank" title="https://developer.mozilla.org/zh-CN/docs/Web/API/Navigator/sendBeacon" ref="nofollow noopener noreferrer">Navigator.sendBeacon()</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[IDEAæ’ä»¶]]></title>    <link>https://juejin.cn/post/7584013833993928738</link>    <guid>https://juejin.cn/post/7584013833993928738</guid>    <pubDate>2025-12-16T07:20:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584013833993928738" data-draft-id="7584013833993879586" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="IDEAæ’ä»¶"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-12-16T07:20:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ— åä¹‹è¾ˆJ"/> <meta itemprop="url" content="https://juejin.cn/user/3672818779437239"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            IDEAæ’ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3672818779437239/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ— åä¹‹è¾ˆJ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T07:20:24.000Z" title="Tue Dec 16 2025 07:20:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€GenerateAllSetter</h2>
<p>GenerateAllSetter æœ‰åŠ©äºä¸ºç±»ä¸­çš„æ‰€æœ‰å±æ€§ç”Ÿæˆ setter æ–¹æ³•ã€‚è¿™å¯ä»¥åœ¨ç¼–å†™ä»£ç æ—¶èŠ‚çœæ—¶é—´å’Œç²¾åŠ›ï¼ŒåŒæ—¶ä¹Ÿé™ä½äº†å‡ºé”™çš„å¯èƒ½æ€§ã€‚</p>
<h2 data-id="heading-1">äºŒã€Lombok</h2>
<p>Lombokï¼šä¸€ä¸ªè‡ªåŠ¨ç”Ÿæˆæ ·æ¿ä»£ç çš„ Java åº“ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€translation</h2>
<p>å¯¹äºè‹±æ–‡ä¸å¤ªå¥½çš„åŒå­¦æ˜¯ä¸€ä¸ªéå¸¸ä¸é”™çš„å·¥å…·ï¼Œä¸ç”¨å†å°†å•è¯å¤åˆ¶åˆ°å•ç‹¬çš„ç¿»è¯‘å·¥å…·ã€‚å½“ç„¶å¯¹äºç”Ÿåƒ»çš„å•è¯æ›´æ˜¯å…‹æ˜Ÿ!</p>
<h2 data-id="heading-3">å››ã€MyBatisX</h2>
<p>Mybatisä½œä¸ºå¸¸ç”¨çš„ORMæ¡†æ¶ï¼Œå—ä¼—è¿˜æ˜¯éå¸¸å¹¿çš„ï¼ŒMyBatisXæ’ä»¶æ˜¯ä¸€æ¬¾è¾…åŠ© IDEA å¿«é€Ÿå¼€å‘ MyBatis çš„æ’ä»¶ï¼Œèƒ½å¿«å¸®ä½ å¿«é€Ÿçš„å®šä½åˆ°æŸä¸ªMapperæ–¹æ³•ä¸­å¯¹åº”çš„SQLæ˜¯å“ªä¸ªã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ Ipa Guard åº”å¯¹ App Store 4.3 é£é™©çš„ä¸€äº›å®è·µ]]></title>    <link>https://juejin.cn/post/7584307642983514153</link>    <guid>https://juejin.cn/post/7584307642983514153</guid>    <pubDate>2025-12-16T07:24:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584307642983514153" data-draft-id="7584059298696249385" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ Ipa Guard åº”å¯¹ App Store 4.3 é£é™©çš„ä¸€äº›å®è·µ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-16T07:24:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€å¿ƒå°±å¥½2025"/> <meta itemprop="url" content="https://juejin.cn/user/3850962908492660"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ Ipa Guard åº”å¯¹ App Store 4.3 é£é™©çš„ä¸€äº›å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3850962908492660/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€å¿ƒå°±å¥½2025
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T07:24:02.000Z" title="Tue Dec 16 2025 07:24:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ iOS ä¸Šæ¶è¿‡ç¨‹ä¸­ï¼Œ<strong>Guideline 4.3ï¼ˆSpam / é‡å¤åº”ç”¨ï¼‰</strong> æ˜¯å¾ˆå¤šå›¢é˜Ÿåå¤è¸©ä¸­çš„é—®é¢˜ï¼Œå°¤å…¶é›†ä¸­åœ¨ä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>å¤šé©¬ç”² / å¤šåœ°åŒºç‰ˆæœ¬</li>
<li>å®šåˆ¶åŒ–äº¤ä»˜çš„è¡Œä¸š App</li>
<li>ç™½æ ‡ï¼ˆWhite-labelï¼‰é¡¹ç›®</li>
<li>åŒä¸€ä»£ç åŸºçº¿çš„å¤šå®¢æˆ·ç‰ˆæœ¬</li>
<li>æ¸ é“åŒ… / è”è¿åŒ…</li>
<li>å¤–åŒ…é¡¹ç›®ç»Ÿä¸€æ¨¡æ¿äº¤ä»˜</li>
</ul>
<p>éœ€è¦æ˜ç¡®çš„æ˜¯ï¼š
<strong>4.3 å¹¶ä¸æ˜¯â€œä»£ç è¿è§„â€ï¼Œè€Œæ˜¯â€œåº”ç”¨ä¹‹é—´ç›¸ä¼¼åº¦è¿‡é«˜â€å¸¦æ¥çš„å®¡æ ¸é£é™©ã€‚</strong>
å› æ­¤ï¼Œè§„é¿ 4.3 çš„æ ¸å¿ƒç›®æ ‡ä¸æ˜¯â€œéšè—ä»£ç â€ï¼Œè€Œæ˜¯<strong>åœ¨æŠ€æœ¯å±‚é¢é™ä½åº”ç”¨ä¹‹é—´çš„å¯è¯†åˆ«ç›¸ä¼¼æ€§</strong>ã€‚</p>
<p>æœ¬æ–‡ä»å®¡æ ¸åˆ¤å®šé€»è¾‘å‡ºå‘ï¼Œç»“åˆå·¥ç¨‹å®è·µï¼Œè¯´æ˜å¦‚ä½•é€šè¿‡ <strong>Ipa Guard</strong> é…åˆå…¶ä»–å·¥å…·ï¼Œåœ¨ä¸æ”¹åŠ¨æˆ–å°½é‡å°‘æ”¹æºç çš„å‰æä¸‹ï¼Œ<strong>é™ä½è¢«åˆ¤å®šä¸ºé‡å¤åº”ç”¨çš„æ¦‚ç‡</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€4.3 å®¡æ ¸çš„æœ¬è´¨ï¼šApple åœ¨æ¯”å¯¹ä»€ä¹ˆï¼Ÿ</h2>
<p>ä»å¤§é‡è¢«æ‹’æ¡ˆä¾‹æ€»ç»“ï¼Œ4.3 é€šå¸¸å¹¶ä¸åªçœ‹ UIï¼Œè€Œæ˜¯ç»¼åˆå¤šä¸ªç»´åº¦ï¼š</p>
<h3 data-id="heading-1">å¸¸è§åˆ¤å®šä¿¡å·åŒ…æ‹¬ï¼ˆå¹¶éå…¬å¼€æ ‡å‡†ï¼‰ï¼š</h3>
<ul>
<li>äºŒè¿›åˆ¶ç»“æ„é«˜åº¦ä¸€è‡´</li>
<li>ç±»å / æ–¹æ³•å / ç¬¦å·ç»“æ„é«˜åº¦ç›¸ä¼¼</li>
<li>èµ„æºæ–‡ä»¶ç»“æ„ã€å‘½åé«˜åº¦ä¸€è‡´</li>
<li>H5 / JS é€»è¾‘ä¸€è‡´</li>
<li>åŒ…ä½“ç»“æ„ã€Framework ç»„åˆä¸€è‡´</li>
<li>å¯åŠ¨æµç¨‹ã€åŠŸèƒ½è·¯å¾„ä¸€è‡´</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿ä½ ï¼š</p>
<ul>
<li>æ¢äº†å›¾æ ‡</li>
<li>æ¢äº†åç§°</li>
<li>æ¢äº†æ–‡æ¡ˆ</li>
</ul>
<p>å¦‚æœ <strong>IPA å†…éƒ¨ç»“æ„é«˜åº¦ä¸€è‡´</strong>ï¼Œä»ç„¶å¯èƒ½è§¦å‘ 4.3ã€‚</p>
<hr/>
<h2 data-id="heading-2">äºŒã€ä¸ºä»€ä¹ˆâ€œåªæ”¹ UI / æ–‡æ¡ˆâ€å¯¹ 4.3 å¸®åŠ©æœ‰é™ï¼Ÿ</h2>
<p>ä»å·¥ç¨‹è§’åº¦çœ‹ï¼Œå¾ˆå¤šå›¢é˜Ÿè§„é¿ 4.3 çš„æ‰‹æ®µé›†ä¸­åœ¨è¡¨å±‚ï¼š</p>
<ul>
<li>æ¢é…è‰²</li>
<li>æ¢ logo</li>
<li>æ¢åº”ç”¨å</li>
<li>æ¢æè¿°</li>
</ul>
<p>ä½†åœ¨ IPA ç»“æ„å±‚é¢ï¼Œä»¥ä¸‹å†…å®¹å¾€å¾€ä¿æŒå®Œå…¨ä¸€è‡´ï¼š</p>
<ul>
<li>Swift / ObjC ç±»å</li>
<li>æ–¹æ³•ç­¾å</li>
<li>Framework é¡ºåº</li>
<li>JSON / H5 æ–‡ä»¶ç»“æ„</li>
<li>èµ„æºè·¯å¾„</li>
<li>MD5 ç‰¹å¾</li>
</ul>
<p>è¿™äº›æ°æ°æ˜¯<strong>æœºå™¨æœ€å®¹æ˜“æ¯”å¯¹çš„éƒ¨åˆ†</strong>ã€‚</p>
<p>å› æ­¤ï¼ŒçœŸæ­£æœ‰æ•ˆçš„ç­–ç•¥æ˜¯ï¼š</p>
<blockquote>
<p><strong>åœ¨ä¸å½±å“åŠŸèƒ½çš„å‰æä¸‹ï¼Œè®©æ¯ä¸ª IPA åœ¨â€œå†…éƒ¨ç»“æ„å±‚é¢â€äº§ç”Ÿå·®å¼‚ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-3">ä¸‰ã€è§„é¿ 4.3 çš„æŠ€æœ¯ç›®æ ‡æ‹†è§£</h2>
<p>ä¸è°ˆâ€œä¿è¯é€šè¿‡â€ï¼Œåªè°ˆ<strong>é™ä½é£é™©</strong>ï¼Œå¯æ‹†è§£ä¸ºå››ä¸ªç›®æ ‡ï¼š</p>
<ol>
<li><strong>é™ä½äºŒè¿›åˆ¶ç»“æ„ç›¸ä¼¼åº¦</strong></li>
<li><strong>é™ä½ç¬¦å·å±‚ç›¸ä¼¼åº¦</strong></li>
<li><strong>é™ä½èµ„æºç»“æ„ç›¸ä¼¼åº¦</strong></li>
<li><strong>è®©æ¯ä¸ªåŒ…å…·å¤‡ç‹¬ç«‹å¯è¯†åˆ«ç‰¹å¾</strong></li>
</ol>
<p>è¿™å››ç‚¹ï¼Œæ­£æ˜¯ IPA å±‚å¤„ç†å·¥å…·èƒ½å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚</p>
<hr/>
<h2 data-id="heading-4">å››ã€Ipa Guard åœ¨è§„é¿ 4.3 ä¸­æ‰¿æ‹…çš„è§’è‰²</h2>
<p>éœ€è¦å¼ºè°ƒï¼š
<strong>Ipa Guard ä¸æ˜¯å®¡æ ¸å·¥å…·ï¼Œä¹Ÿä¸æ˜¯ç»•å®¡å·¥å…·ã€‚</strong>
å®ƒçš„ä½œç”¨æ˜¯ï¼š<strong>åœ¨å·¥ç¨‹å±‚é¢åˆ¶é€ â€œåˆç†å·®å¼‚â€</strong>ã€‚</p>
<h3 data-id="heading-5">Ipa Guard çš„é€‚é…ç‚¹åœ¨äºï¼š</h3>
<ul>
<li>æ— éœ€ iOS App æºç </li>
<li>ç›´æ¥ä½œç”¨äºå·²ç¼–è¯‘çš„ IPA</li>
<li>å¯å¯¹æ¯ä¸ªåŒ…æ‰§è¡Œä¸åŒå¤„ç†</li>
<li>æ”¯æŒè‡ªåŠ¨åŒ–æ‰¹é‡å¤„ç†</li>
</ul>
<p>è¿™ä½¿å®ƒéå¸¸é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>å¤šå®¢æˆ·å®šåˆ¶</li>
<li>è¡Œä¸šæ¨¡æ¿åº”ç”¨</li>
<li>å¤šåœ°åŒºå‘è¡Œ</li>
<li>è”è¿ / æ¸ é“åŒ…</li>
</ul>
<hr/>
<h2 data-id="heading-6">äº”ã€ä»å·¥ç¨‹è§’åº¦çœ‹ï¼šIpa Guard èƒ½æ”¹å˜å“ªäº›ç›¸ä¼¼åº¦</h2>
<h3 data-id="heading-7">ç¬¦å·å±‚å·®å¼‚ï¼ˆSwift / ObjCï¼‰</h3>
<p>é€šè¿‡ IPA çº§æ··æ·†ï¼Œå¯ä»¥è®©ï¼š</p>
<ul>
<li>ç±»å</li>
<li>æ–¹æ³•å</li>
<li>å˜é‡å</li>
</ul>
<p>åœ¨ä¸åŒåŒ…ä¸­äº§ç”Ÿ<strong>å®Œå…¨ä¸åŒçš„æ˜ å°„ç»“æœ</strong>ã€‚</p>
<p>å³ä½¿æºç ç›¸åŒï¼Œæœ€ç»ˆ IPA ä¸­çš„ç¬¦å·ç»“æ„ä¹Ÿä¼šä¸åŒã€‚</p>
<hr/>
<h3 data-id="heading-8">èµ„æºç»“æ„å·®å¼‚ï¼ˆéå¸¸å…³é”®ï¼‰</h3>
<p>Ipa Guard å¯å¯¹ä»¥ä¸‹èµ„æºè¿›è¡Œå¤„ç†ï¼š</p>
<ul>
<li>JSON</li>
<li>H5 / JS</li>
<li>å›¾ç‰‡</li>
<li>é…ç½®æ–‡ä»¶</li>
</ul>
<p>å¤„ç†æ–¹å¼åŒ…æ‹¬ï¼š</p>
<ul>
<li>æ–‡ä»¶åé‡å†™</li>
<li>è·¯å¾„æ‰°åŠ¨</li>
<li>MD5 ä¿®æ”¹</li>
</ul>
<p>ç»“æœæ˜¯ï¼š
<strong>ä¸¤ä¸ªåŠŸèƒ½å®Œå…¨ä¸€è‡´çš„ Appï¼Œåœ¨èµ„æºç»“æ„å±‚é¢å·²ä¸å†ä¸€è‡´ã€‚</strong></p>
<hr/>
<h3 data-id="heading-9">åŒ…ä½“å†…éƒ¨æŒ‡çº¹å·®å¼‚</h3>
<p>å½“ï¼š</p>
<ul>
<li>ç¬¦å·æ˜ å°„ä¸åŒ</li>
<li>èµ„æºè·¯å¾„ä¸åŒ</li>
<li>MD5 ä¸åŒ</li>
</ul>
<p>é‚£ä¹ˆåŒ…ä½“çš„æ•´ä½“æŒ‡çº¹ä¹Ÿä¼šéšä¹‹å˜åŒ–ï¼Œè¿™å¯¹é™ä½â€œæ¨¡æ¿åŒ–è¯†åˆ«â€éå¸¸é‡è¦ã€‚</p>
<hr/>
<h2 data-id="heading-10">å…­ã€å…¸å‹çš„â€œè§„é¿ 4.3â€å·¥ç¨‹æµç¨‹ï¼ˆä¿¡æ¯å¯†é›†ç‰ˆï¼‰</h2>
<p>ä»¥ä¸‹æµç¨‹ä»¥ <strong>ä¸æ”¹æºç æˆ–æœ€å°æ”¹åŠ¨æºç </strong> ä¸ºå‰æã€‚</p>
<hr/>
<h3 data-id="heading-11">Step 1ï¼šç”ŸæˆåŸºç¡€ IPAï¼ˆåŒä¸€ä»£ç åŸºçº¿ï¼‰</h3>
<p>æ¯ä¸ªå®¢æˆ· / ç‰ˆæœ¬ç”Ÿæˆä¸€ä¸ªåŸºç¡€ IPAã€‚</p>
<hr/>
<h3 data-id="heading-12">Step 2ï¼šè§£æ IPA ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">ipaguard_cli parse base.ipa -o sym.json
</code></pre>
<p>ç›®çš„ï¼š</p>
<ul>
<li>è·å–ç¬¦å·ä¸èµ„æºæ¸…å•</li>
<li>ä¸ºåç»­å·®å¼‚åŒ–å¤„ç†æä¾›ä¾æ®</li>
</ul>
<hr/>
<h3 data-id="heading-13">Step 3ï¼šä¸ºæ¯ä¸ª App ç”Ÿæˆç‹¬ç«‹æ··æ·†ç­–ç•¥</h3>
<p>å¸¸è§åšæ³•ï¼š</p>
<ul>
<li>æ¯ä¸ªåŒ…ä½¿ç”¨ä¸åŒçš„éšæœºç§å­</li>
<li>ä¸åŒå®¢æˆ·å¯ç”¨ä¸åŒæ··æ·†ç»„åˆ</li>
<li>å¯¹èµ„æºæ”¹åé¡ºåºè¿›è¡Œå·®å¼‚åŒ–</li>
<li>ä¿ç•™å¿…è¦çš„ SDK / Bridge ç¬¦å·</li>
</ul>
<hr/>
<h3 data-id="heading-14">Step 4ï¼šæ‰§è¡Œ IPA å±‚å·®å¼‚åŒ–å¤„ç†</h3>
<pre><code class="hljs language-bash" lang="bash">ipaguard_cli protect base.ipa \
  -c sym.json \
  --js \
  --image \
  -o clientA.ipa
</code></pre>
<p>å¯¹ clientB / clientC ä½¿ç”¨ä¸åŒç­–ç•¥é‡å¤æ‰§è¡Œã€‚</p>
<hr/>
<h3 data-id="heading-15">Step 5ï¼šé‡ç­¾ä¸çœŸæœºæµ‹è¯•</h3>
<pre><code class="hljs language-bash" lang="bash">kxsign sign clientA.ipa \
  -c cert.p12 \
  -p password \
  -m distribution.mobileprovision \
  -z finalA.ipa
</code></pre>
<p>ç¡®ä¿åŠŸèƒ½ä¸€è‡´ã€è¡Œä¸ºä¸€è‡´ã€‚</p>
<hr/>
<h2 data-id="heading-16">ä¸ƒã€Ipa Guard éœ€è¦ä¸å“ªäº›å·¥å…·é…åˆï¼Œæ•ˆæœæ‰æ›´ç¨³å®š</h2>
<p>è§„é¿ 4.3 <strong>ä¸æ˜¯å•ç‚¹å·¥å…·é—®é¢˜</strong>ï¼Œè€Œæ˜¯ç»„åˆé—®é¢˜ã€‚</p>
<h3 data-id="heading-17">æ¨èç»„åˆå¦‚ä¸‹ï¼š</h3>
<hr/>
<h3 data-id="heading-18">æºç å±‚ï¼ˆå¯é€‰ï¼Œä½†æœ‰å¸®åŠ©ï¼‰</h3>
<ul>
<li>Swift Shieldï¼ˆSwift é¡¹ç›®ï¼‰</li>
<li>ä¸åŒåŒ…å¯ç”¨ä¸åŒç¼–è¯‘å®</li>
<li>å°‘é‡åŠŸèƒ½å·®å¼‚å¼€å…³</li>
</ul>
<p>ç›®çš„ï¼š
åˆ¶é€ â€œé€»è¾‘å±‚å·®å¼‚â€ã€‚</p>
<hr/>
<h3 data-id="heading-19">IPA å±‚ï¼ˆæ ¸å¿ƒï¼‰</h3>
<ul>
<li><strong>Ipa Guard</strong>
<ul>
<li>ç¬¦å·å·®å¼‚åŒ–</li>
<li>èµ„æºç»“æ„å·®å¼‚åŒ–</li>
<li>åŒ…ä½“æŒ‡çº¹å˜åŒ–</li>
</ul>
</li>
</ul>
<p>è¿™æ˜¯é™ä½ 4.3 é£é™©çš„æ ¸å¿ƒæŠ€æœ¯å±‚ã€‚</p>
<hr/>
<h3 data-id="heading-20">H5 / Hybrid å±‚ï¼ˆå¦‚å­˜åœ¨ï¼‰</h3>
<ul>
<li>JS æ··æ·†</li>
<li>ä¸åŒåŒ…æ³¨å…¥ä¸åŒèµ„æºç»“æ„</li>
</ul>
<hr/>
<h3 data-id="heading-21">å‘å¸ƒå±‚</h3>
<ul>
<li>ä¸åŒ Bundle ID</li>
<li>ä¸åŒåº”ç”¨æè¿°ä¸æˆªå›¾</li>
<li>ä¸åŒå®¡æ ¸èŠ‚å¥</li>
</ul>
<hr/>
<h2 data-id="heading-22">å…«ã€å“ªäº›åœºæ™¯ä¸‹â€œIPA å±‚å·®å¼‚åŒ–â€å°¤å…¶é‡è¦ï¼Ÿ</h2>
<p>ä»ç»éªŒçœ‹ï¼Œä»¥ä¸‹åœºæ™¯å¦‚æœ<strong>ä¸åš IPA å±‚å¤„ç†</strong>ï¼Œ4.3 é£é™©éå¸¸é«˜ï¼š</p>
<ul>
<li>è¡Œä¸š SaaS æ¨¡æ¿ï¼ˆé¤é¥® / æ•™è‚² / åŒ»ç–—ï¼‰</li>
<li>åŒåŸ / é—¨åº—ç±»åº”ç”¨</li>
<li>æ”¿ä¼å®šåˆ¶é¡¹ç›®</li>
<li>å¤šåœ°åŒºå¤šè¯­è¨€ç‰ˆæœ¬</li>
<li>æ¸¸æˆè”è¿å£³</li>
</ul>
<p>è¿™äº›é¡¹ç›®å³ä½¿ UI ä¸åŒï¼Œä¹Ÿå¾ˆå®¹æ˜“åœ¨ç»“æ„å±‚é¢è¢«è¯†åˆ«ä¸ºâ€œåŒç±»åº”ç”¨â€ã€‚</p>
<hr/>
<h2 data-id="heading-23">ä¹ã€å…³äº 4.3 çš„å‡ ä¸ªé‡è¦è®¤çŸ¥æé†’</h2>
<ul>
<li>ä¸å­˜åœ¨ 100% è§„é¿ 4.3 çš„æŠ€æœ¯æ–¹æ¡ˆ</li>
<li>æ··æ·† â‰  æ¬ºéª—å®¡æ ¸</li>
<li>åªæ”¹ UI è¿œè¿œä¸å¤Ÿ</li>
</ul>
<p>ä½†å¯ä»¥æ˜ç¡®çš„æ˜¯ï¼š</p>
<blockquote>
<p><strong>åœ¨åˆè§„å‰æä¸‹ï¼Œé€šè¿‡å·¥ç¨‹æ‰‹æ®µé™ä½ç›¸ä¼¼åº¦ï¼Œæ˜¯ç›®å‰æœ€ç°å®ã€æœ€è¢«å›¢é˜Ÿé‡‡ç”¨çš„åšæ³•ã€‚</strong></p>
</blockquote>
<p>Ipa Guard åœ¨è¿™é‡Œæ‰®æ¼”çš„æ˜¯ <strong>â€œå·®å¼‚åŒ–å·¥å…·â€</strong>ï¼Œè€Œä¸æ˜¯â€œç»•å®¡å·¥å…·â€ã€‚</p>
<hr/>
<h2 data-id="heading-24">ç”¨ç†æ€§æ€ç»´çœ‹å¾… 4.3ï¼Œè€Œä¸æ˜¯ä¾¥å¹¸å¿ƒç†</h2>
<p>ä»å·¥ç¨‹è§’åº¦æ€»ç»“ï¼Œè§„é¿ 4.3 çš„å…³é”®åœ¨äºï¼š</p>
<ul>
<li>ä¸ä¾èµ–äººå·¥ä¿®æ”¹</li>
<li>ä¸ç ´ååŠŸèƒ½</li>
<li>å¯æ‰¹é‡ã€å¯å¤ç”¨</li>
<li>æ¯ä¸ª IPA éƒ½å…·å¤‡ç‹¬ç«‹ç»“æ„ç‰¹å¾</li>
</ul>
<p>è€Œ <strong>Ipa Guard + å¤šå·¥å…·ç»„åˆ</strong> çš„ä»·å€¼åœ¨äºï¼š</p>
<ul>
<li>ä¸æ”¹æºç ä¹Ÿèƒ½åˆ¶é€ ç»“æ„å·®å¼‚</li>
<li>é€‚åˆè§„æ¨¡åŒ–äº¤ä»˜</li>
<li>å¯æ¥å…¥ CI/CD</li>
<li>æˆæœ¬å¯æ§ã€ç¨³å®šæ€§é«˜</li>
</ul>
<hr/>
<h3 data-id="heading-25">æ¨èçš„å·¥å…·åˆ†å·¥ç»“æ„ï¼ˆç®€è¡¨ï¼‰</h3>





























<table><thead><tr><th>å±‚çº§</th><th>å·¥å…·</th></tr></thead><tbody><tr><td>æºç å±‚ï¼ˆå¯é€‰ï¼‰</td><td>Swift Shield / ç¼–è¯‘å®</td></tr><tr><td>IPA å±‚ï¼ˆæ ¸å¿ƒï¼‰</td><td>Ipa Guard CLI</td></tr><tr><td>H5 / JS å±‚</td><td>JS æ··æ·†å·¥å…·</td></tr><tr><td>ç­¾åéªŒè¯</td><td>kxsign</td></tr><tr><td>å‘å¸ƒå±‚</td><td>å…ƒæ•°æ®å·®å¼‚åŒ–</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ç«™å¼äº†è§£æ•°æ®åº“ä¸‰å¤§èŒƒå¼(åº“è¡¨è®¾è®¡åŸºç¡€)]]></title>    <link>https://juejin.cn/post/7584028251167440923</link>    <guid>https://juejin.cn/post/7584028251167440923</guid>    <pubDate>2025-12-16T07:21:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584028251167440923" data-draft-id="7583983152324657178" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ç«™å¼äº†è§£æ•°æ®åº“ä¸‰å¤§èŒƒå¼(åº“è¡¨è®¾è®¡åŸºç¡€)"/> <meta itemprop="keywords" content="åç«¯,æ•°æ®åº“,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-16T07:21:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æƒ³ç”¨offeræ‰“ç‰Œ"/> <meta itemprop="url" content="https://juejin.cn/user/578781641968972"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ç«™å¼äº†è§£æ•°æ®åº“ä¸‰å¤§èŒƒå¼(åº“è¡¨è®¾è®¡åŸºç¡€)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/578781641968972/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æƒ³ç”¨offeræ‰“ç‰Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T07:21:54.000Z" title="Tue Dec 16 2025 07:21:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.8;font-weight:400;font-size:16px;word-spacing:2px;letter-spacing:2px;overflow-x:hidden;color:#3e3e3e;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{padding-bottom:12px;font-size:24px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:1.2em;border-bottom:2px solid #ef7060;word-spacing:0!important;letter-spacing:0!important;font-size:inherit;line-height:inherit;display:block;font-weight:400;background:#ef7060;color:#fff;padding:10px;border-top-right-radius:3px;border-top-left-radius:3px;margin-right:3px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<blockquote>
<p>ä½œä¸ºåç«¯å¼€å‘è€…ï¼Œé¡¹ç›®åˆæœŸè¿›è¡Œåº“è¡¨è®¾è®¡çš„æ—¶å€™ï¼Œå¦‚æœå…‰å‡­ç»éªŒè€Œæ²¡æœ‰ä¸€å¥—åˆé€‚çš„æ–¹æ³•è®ºï¼Œå¤§æ¦‚ç‡é¡¹ç›®æœ€åä¼šå˜æˆä¸€ä¸ªéš¾ä»¥ç»´æŠ¤çš„â€œå²å±±â€ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±æ¥ç®€å•è®²è®²æ•°æ®åº“è¡¨è®¾è®¡çš„ä¸‰å¤§èŒƒå¼ï¼Œå°½é‡éƒ½è®©å¤§å®¶å¬æ‡‚ï¼Œæˆ‘ä»¬çš„æœ€ç»ˆç›®çš„æ˜¯å¤§å®¶æŒæ¡åº”å¯¹å„ç§ä¸šåŠ¡åœºæ™¯è®¾è®¡çš„æ€ç»´æ¡†æ¶</p>
</blockquote>
<h2 data-id="heading-1">ç¬¬ä¸€èŒƒå¼</h2>
<p>ç¬¬ä¸€èŒƒå¼ï¼šç¡®ä¿å…³ç³»ä¸­çš„æ‰€æœ‰å±æ€§ï¼ˆåˆ—ï¼‰éƒ½æ˜¯<strong>ä¸å¯å†åˆ†</strong>çš„åŸå­æ€§å€¼ã€‚</p>
<p><strong>å…·ä½“å«ä¹‰ï¼š</strong></p>
<ul>
<li>è¡¨ä¸­çš„æ¯ä¸€ä¸ªå­—æ®µéƒ½ä¸å¯å†åˆ†ã€‚</li>
<li>ä¸å…è®¸åœ¨åŒä¸€åˆ—ä¸­å­˜å‚¨å¤šä¸ªå€¼ï¼Œä¾‹å¦‚ï¼Œä¸€ä¸ª<code>â€œè”ç³»æ–¹å¼â€</code>å­—æ®µä¸èƒ½åŒ…å«<code>â€œç”µè¯å·ç , ç”µå­é‚®ä»¶åœ°å€â€</code>ã€‚</li>
<li>ä¸å…è®¸åœ¨è¡¨ä¸­åˆ›å»ºâ€œé‡å¤ç»„â€â€”â€”å³ä¸€ä¸ªè®°å½•ï¼ˆè¡Œï¼‰ä¸­ä¸èƒ½æœ‰å¤šä¸ªé‡å¤çš„å­—æ®µï¼Œä¾‹å¦‚<code>â€œäº§å“1, äº§å“2, äº§å“3â€</code></li>
</ul>
<p>ä¸¾ä¸ªä¾‹å­æ¥å›ç­”ï¼Œä¸å…è®¸åœ¨åŒä¸€åˆ—ä¸­å­˜å‚¨å¤šä¸ªå€¼ï¼šæ¯”å¦‚è¯´åœ°å€è¿™ä¸ªåˆ—ï¼Œä½ ä¸èƒ½å­˜å‚¨æˆå¹¿ä¸œçœå¹¿å·å¸‚xxåŒºxxè¡—é“....è¿™æ ·æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œè¿™æ ·åœ°å€è¿˜å¯ä»¥å†è¿›è¡Œæ‹†åˆ†ï¼Œè€Œæ˜¯ä½ è¦æ‹†æˆç›´åˆ°ä¸èƒ½å†è¿›è¡Œæ‹†åˆ†çš„åŸå­å­—æ®µï¼Œæ¯”å¦‚çœï¼Œå¸‚ï¼ŒåŒºç­‰ç­‰ã€‚</p>
<p>ä¸€ä¸ªè®°å½•ï¼ˆè¡Œï¼‰ä¸­ä¸èƒ½æœ‰å¤šä¸ªé‡å¤çš„å­—æ®µï¼Œæ¯”å¦‚è¯´è¯¾ç¨‹é‡Œé¢ä½ ä¸èƒ½åŒæ—¶è®°å½•æ•°å­¦ï¼Œè¯­æ–‡ç­‰ç­‰ï¼Œè€Œæ˜¯åº”è¯¥åˆ†å¼€å¤šä¸ªè¡Œè¿›è¡Œè®°å½•</p>
<h2 data-id="heading-2">ç¬¬äºŒèŒƒå¼</h2>
<p>ç¬¬äºŒèŒƒå¼ï¼šè¦æ±‚æ¯ä¸€åˆ—(éä¸»é”®å­—æ®µ)éƒ½<strong>å®Œå…¨</strong>ä¾èµ–äºä¸»é”®</p>
<p><strong>å…·ä½“å«ä¹‰ï¼š</strong></p>
<ul>
<li>å¦‚æœä¸€ä¸ªè¡¨çš„ä¸»é”®æ˜¯<strong>è”åˆä¸»é”®</strong>ï¼ˆç”±å¤šä¸ªåˆ—ç»„æˆï¼‰ï¼Œé‚£ä¹ˆæ‰€æœ‰éä¸»é”®åˆ—éƒ½å¿…é¡»ä¾èµ–äº<strong>æ•´ä¸ª</strong>è”åˆä¸»é”®ã€‚</li>
<li>å¦‚æœä»»ä½•ä¸€ä¸ªéä¸»é”®åˆ—åªä¾èµ–äºè”åˆä¸»é”®ä¸­çš„<strong>éƒ¨åˆ†</strong>åˆ—ï¼Œåˆ™è¿åäº† 2NFã€‚è¿™ä¼šå¯¼è‡´â€œéƒ¨åˆ†å‡½æ•°ä¾èµ–â€ã€‚</li>
</ul>
<p>ä¸¾ä¸ªä¾‹å­æ¥è§£é‡Šç¬¬äºŒèŒƒå¼ï¼Œè®¢å•è¡¨é‡Œé¢å°±ä¸èƒ½å‡ºç°å•†å“çš„åº“å­˜ä¿¡æ¯ï¼Œå› ä¸ºå•†å“çš„åº“å­˜ä¿¡æ¯ä¾èµ–äºå•†å“çš„IDè€Œä¸ä¾èµ–äºè®¢å•IDã€‚é‚£ä¹ˆç®€å•æ¥è¯´å°±æ˜¯è¡¨é‡Œé¢çš„æ¯ä¸ªåˆ—éƒ½å¿…é¡»å®Œå…¨ä¾èµ–äºä¸»é”®ï¼Œä¸ç®¡è¿™ä¸ªä¸»é”®æ˜¯è”åˆä¸»é”®è¿˜æ˜¯ç‹¬ç«‹ä¸»é”®ï¼Œä¸èƒ½å‡ºç°éƒ¨åˆ†ä¾èµ–çš„æƒ…å†µï¼Œå¦åˆ™å°±è¦æ‹†åˆ†éƒ¨åˆ†ä¾èµ–çš„åˆ—åˆ°å…¶ä»–è¡¨é‡Œé¢å»ã€‚</p>
<p><strong>å†ä¸¾ä¸ªè¿å 2NF çš„ä¾‹å­ï¼š</strong> ï¼ˆå‡è®¾ <code>è®¢å•ID</code> å’Œ <code>äº§å“ID</code> ç»„æˆè”åˆä¸»é”®ï¼‰</p>

































<table><thead><tr><th><strong>è®¢å•ID</strong></th><th><strong>äº§å“ID</strong></th><th><strong>è®¢å•æ—¥æœŸ</strong></th><th><strong>äº§å“åç§°</strong></th><th><strong>äº§å“ä»·æ ¼</strong></th></tr></thead><tbody><tr><td>1001</td><td>A101</td><td>2025-12-15</td><td>ç¬”è®°æœ¬ç”µè„‘</td><td>8000</td></tr><tr><td>1001</td><td>B205</td><td>2025-12-15</td><td>é¼ æ ‡</td><td>150</td></tr><tr><td>1002</td><td>A101</td><td>2025-12-16</td><td>ç¬”è®°æœ¬ç”µè„‘</td><td>8000</td></tr></tbody></table>
<p><strong>é—®é¢˜ï¼š</strong> <code>äº§å“åç§°</code> å’Œ <code>äº§å“ä»·æ ¼</code> åªä¾èµ–äº <code>äº§å“ID</code> (ä¸»é”®çš„ä¸€éƒ¨åˆ†)ï¼Œä¸ <code>è®¢å•ID</code> æ— å…³ã€‚è¿™å°±æ˜¯<strong>éƒ¨åˆ†å‡½æ•°ä¾èµ–</strong></p>
<h2 data-id="heading-3">ç¬¬ä¸‰èŒƒå¼</h2>
<p>ç¬¬ä¸‰èŒƒå¼ï¼šæ¯ä¸€åˆ—éƒ½å¿…é¡»ç›´æ¥<strong>ä¾èµ–</strong>äºä¸»é”®è€Œä¸èƒ½é—´æ¥ä¾èµ–ä¸»é”®ï¼Œå³<strong>ä¸èƒ½å­˜åœ¨ä¾èµ–ä¼ é€’</strong>ã€‚æ¢å¥è¯è¯´ï¼Œä»»ä½•éä¸»é”®å±æ€§ä¸èƒ½ä¾èµ–äºå…¶ä»–éä¸»é”®å±æ€§ã€‚</p>
<p><strong>å…·ä½“å«ä¹‰ï¼š</strong></p>
<ul>
<li>æ¶ˆé™¤<strong>ä¼ é€’å‡½æ•°ä¾èµ–</strong>ã€‚å³å¦‚æœ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>â†’</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">A \rightarrow B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.05017em;">B</span></span></span></span></span> ä¸” <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>â†’</mo><mi>C</mi></mrow><annotation encoding="application/x-tex">B \rightarrow C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></span>ï¼ˆå…¶ä¸­ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span></span></span></span></span> æ˜¯ä¸»é”®ï¼‰ï¼Œé‚£ä¹ˆ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span></span></span></span></span> å¯¹ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span></span></span></span></span> å°±æ˜¯ä¼ é€’ä¾èµ–ï¼Œéœ€è¦æ¶ˆé™¤</li>
</ul>
<p>ä¸¾ä¸ªä¾‹å­æ¥è§£é‡Šç¬¬ä¸‰èŒƒå¼ï¼šè®¢å•è¡¨é‡Œé¢æœ‰ç”¨æˆ·IDï¼Œå°±ä¸åº”è¯¥è¿˜å†—ä½™ä¸€åˆ—ç”¨æˆ·çš„æ³¨å†Œæ—¶é—´ã€‚å› ä¸ºç”¨æˆ·çš„æ³¨å†Œæ—¶é—´ä¾èµ–äºç”¨æˆ·ID(åœ¨è®¢å•è¡¨é‡Œé¢æ˜¯éä¸»é”®,åœ¨ç”¨æˆ·è¡¨é‡Œé¢æ˜¯ä¸»é”®)ï¼Œæ‰€ä»¥ç”¨æˆ·çš„æ³¨å†Œæ—¶é—´å¦‚æœå­˜åœ¨äºè®¢å•è¡¨ï¼Œå°±æ˜¯æœ‰é—´æ¥ä¾èµ–ï¼Œå³ä¾èµ–ä¼ é€’çš„æƒ…å†µã€‚</p>
<p><strong>å†ä¸¾ä¸ªè¿å 3NF çš„ä¾‹å­ï¼š</strong> ï¼ˆå‡è®¾ <code>å®¢æˆ·ID</code> æ˜¯ä¸»é”®ï¼‰</p>





























<table><thead><tr><th><strong>å®¢æˆ·ID</strong></th><th><strong>å®¢æˆ·å§“å</strong></th><th><strong>æ‰€åœ¨åŸå¸‚</strong></th><th><strong>åŸå¸‚é‚®ç¼–</strong></th></tr></thead><tbody><tr><td>C001</td><td>å¼ ä¸‰</td><td>ä¸Šæµ·</td><td>200000</td></tr><tr><td>C002</td><td>æå››</td><td>ä¸Šæµ·</td><td>200000</td></tr><tr><td>C003</td><td>ç‹äº”</td><td>åŒ—äº¬</td><td>100000</td></tr></tbody></table>
<p><strong>é—®é¢˜ï¼š</strong> <code>åŸå¸‚é‚®ç¼–</code> ä¾èµ–äº <code>æ‰€åœ¨åŸå¸‚</code>ï¼Œè€Œ <code>æ‰€åœ¨åŸå¸‚</code> ä¾èµ–äº <code>å®¢æˆ·ID</code>ã€‚ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>å®¢æˆ·</mtext><mi>I</mi><mi>D</mi><mo>â†’</mo><mtext>æ‰€åœ¨åŸå¸‚</mtext><mo>â†’</mo><mtext>åŸå¸‚é‚®ç¼–</mtext></mrow><annotation encoding="application/x-tex">å®¢æˆ·ID \rightarrow æ‰€åœ¨åŸå¸‚ \rightarrow åŸå¸‚é‚®ç¼–</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">å®¢æˆ·</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">æ‰€åœ¨åŸå¸‚</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†’</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">åŸå¸‚é‚®ç¼–</span></span></span></span></span> è¿™å°±æ˜¯<strong>ä¼ é€’å‡½æ•°ä¾èµ–</strong>ã€‚æ¯æ¬¡æœ‰æ–°çš„ä¸Šæµ·å®¢æˆ·åŠ å…¥ï¼Œ<code>åŸå¸‚é‚®ç¼–</code> éƒ½ä¼šé‡å¤å­˜å‚¨ã€‚</p>
<h2 data-id="heading-4">æ€»ç»“â¤ï¸</h2>
<p>åœ¨å®é™…çš„æ•°æ®åº“è®¾è®¡ä¸­ï¼Œé€šå¸¸ä¼šåŠªåŠ›è¾¾åˆ° 3NFã€‚ç„¶è€Œï¼Œæœ‰æ—¶ä¸ºäº†<strong>æé«˜æŸ¥è¯¢æ€§èƒ½</strong>ï¼Œå¯èƒ½ä¼š<strong>æ•…æ„è¿å 3NF</strong>ï¼Œé‡‡ç”¨<strong>åèŒƒå¼è®¾è®¡</strong>ã€‚ä¸ºä¸šåŠ¡åšå‡ºçš„å¦¥åæ˜¯å¯ä»¥ç†è§£çš„</p>
<p>æˆ‘æ¨èå¤§å®¶å¯ä»¥åˆ©ç”¨DDDé¢†åŸŸé©±åŠ¨è®¾è®¡çš„ç»´åº¦å»ç»“åˆä¸‰å¤§èŒƒå¼æ¥è¿›è¡Œåº“è¡¨è®¾è®¡ï¼Œæ¯”å¦‚åœ¨è®¢å•é¢†åŸŸï¼Œåœ°å€å°±å¯ä»¥æ˜¯è®¢å•è¡¨çš„åˆ—ï¼Œå¯ä»¥å†—ä½™ã€‚åœ¨ç”¨æˆ·é¢†åŸŸï¼Œåœ°å€å°±åº”è¯¥æ˜¯ä¸€ä¸ªå®ä½“ï¼Œå¯ä»¥è¿›è¡Œå¢åˆ æ”¹æŸ¥å’Œç‹¬ç«‹çš„ä¸šåŠ¡æ„ä¹‰ï¼Œæœ‰å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯åœ¨ç”¨æˆ·é¢†åŸŸï¼Œåœ°å€åº”è¯¥è¢«è®¾ç½®æˆä¸€ä¸ªå•ç‹¬IDçš„è¡¨ï¼Œè€Œåœ¨è®¢å•é¢†åŸŸï¼Œåœ°å€åªæ˜¯ä¸€ä¸ªå€¼å¯¹è±¡(æ— ç”Ÿå‘½å‘¨æœŸï¼Œä¸‹å•å³å›ºåŒ–ï¼Œç±»ä¼¼äºå¿«ç…§)</p>
<p>ä»€ä¹ˆè¯¥å†—ä½™ï¼Œä»€ä¹ˆä¸è¯¥å†—ä½™ï¼Œæœ‰äº†ä¸€ä¸ªåˆ‡åˆå®é™…çš„æ€ç»´æ¡†æ¶ï¼Œè€Œä¸æ˜¯ä¾èµ–äº"ç»éªŒ"ä¹‹è°ˆï¼Œå¯¹é¡¹ç›®çš„å¯ç»´æŠ¤æ€§ä¼šæœ‰å¾ˆå¤§å¸®åŠ©</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutter å‹‡é—¯2Dåƒç´ æ¸¸æˆä¹‹è·¯ï¼ˆä¸‰ï¼‰ï¼šäººç‰©ä¸åœ°å›¾å…ƒç´ çš„äº¤äº’]]></title>    <link>https://juejin.cn/post/7584014975242911754</link>    <guid>https://juejin.cn/post/7584014975242911754</guid>    <pubDate>2025-12-16T07:24:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7584014975242911754" data-draft-id="7583696325142216742" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutter å‹‡é—¯2Dåƒç´ æ¸¸æˆä¹‹è·¯ï¼ˆä¸‰ï¼‰ï¼šäººç‰©ä¸åœ°å›¾å…ƒç´ çš„äº¤äº’"/> <meta itemprop="keywords" content="Flutter,æ¸¸æˆå¼€å‘,æ¸¸æˆ"/> <meta itemprop="datePublished" content="2025-12-16T07:24:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="_å¤§å­¦ç‰²"/> <meta itemprop="url" content="https://juejin.cn/user/3125273628517148"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutter å‹‡é—¯2Dåƒç´ æ¸¸æˆä¹‹è·¯ï¼ˆä¸‰ï¼‰ï¼šäººç‰©ä¸åœ°å›¾å…ƒç´ çš„äº¤äº’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3125273628517148/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    _å¤§å­¦ç‰²
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-16T07:24:30.000Z" title="Tue Dec 16 2025 07:24:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-16
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc59e14866b241688361555ee1e70947~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=7CXkReFqdYXG2D4yEiZKyPW%2Fb3Y%3D" width="100%" loading="lazy"/></p><p/>
<p><a href="https://juejin.cn/post/7579264485259411471" target="_blank" title="https://juejin.cn/post/7579264485259411471">Flutter å‹‡é—¯2Dåƒç´ æ¸¸æˆä¹‹è·¯ï¼ˆä¸€ï¼‰ï¼šä¸€ä¸ª Hero çš„è¯ç”Ÿ</a><br/>
<a href="https://juejin.cn/post/7581025279646892070" target="_blank" title="https://juejin.cn/post/7581025279646892070">Flutter å‹‡é—¯2Dåƒç´ æ¸¸æˆä¹‹è·¯ï¼ˆäºŒï¼‰ï¼šç»˜åˆ¶åŠ è½½æ¸¸æˆåœ°å›¾</a><br/>
<a href="https://juejin.cn/spost/7584014975242911754" target="_blank" title="https://juejin.cn/spost/7584014975242911754">Flutter å‹‡é—¯2Dåƒç´ æ¸¸æˆä¹‹è·¯ï¼ˆä¸‰ï¼‰ï¼šäººç‰©ä¸åœ°å›¾å…ƒç´ çš„äº¤äº’</a></p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ä¸Šç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬åˆè¯†äº† <strong>2D åœ°å›¾ç¼–è¾‘å™¨ Tiled</strong>ï¼Œå®Œæˆäº†ä» <strong>åœ°å›¾ç»˜åˆ¶ã€èµ„æºåŠ è½½</strong> åˆ° <strong>åŸºç¡€å¢™ä½“ç¢°æ’</strong> çš„æ­å»ºï¼Œä¸ºæ¸¸æˆä¸–ç•Œå¥ å®šäº†æœ€åŸºæœ¬çš„ç©ºé—´è§„åˆ™ã€‚</p>
<p>ä½†ä»…æœ‰ <code>èƒ½èµ°ã€èƒ½æŒ¡</code> çš„åœ°å›¾ï¼Œè¿˜è¿œä¸è¶³ä»¥æ„æˆä¸€ä¸ªçœŸæ­£æœ‰ç”Ÿå‘½åŠ›çš„æ¸¸æˆåœºæ™¯ã€‚<br/>
çœŸæ­£è®©åœ°å›¾ <code>æ´»</code> èµ·æ¥çš„ï¼Œæ˜¯ <strong>äººç‰©ä¸åœ°å›¾å…ƒç´ ä¹‹é—´çš„äº¤äº’</strong>ã€‚</p>
<p>åœ¨æ¸¸æˆä¸­ï¼Œåœ°å›¾å¹¶ä¸ä»…ä»…æ˜¯é™æ€çš„èƒŒæ™¯ï¼Œå®ƒå¾€å¾€æ‰¿è½½ç€å¤šç§åŠŸèƒ½æ€§çš„å…ƒç´ ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>å¯è¢«è§¦å‘çš„ <strong>å®ç®±ã€æœºå…³</strong></li>
<li>æ§åˆ¶é€šè¡Œé€»è¾‘çš„ <strong>é’¥åŒ™ä¸é—¨</strong></li>
<li>å¸¦æ¥é£é™©ä¸æŒ‘æˆ˜çš„ <strong>é™·é˜±ã€ä¼¤å®³å‹éšœç¢ç‰©</strong></li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1dbb61d1a0c8429aac51cb7b03f11fec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=lCiolOqecoPYfa3nFF9vqLO1Vhw%3D" alt="æˆªå±2025-12-16 13.58.20.png" loading="lazy"/></p>
<p>è¿™äº›å…ƒç´ éƒ½éœ€è¦ä¸äººç‰©äº§ç”Ÿè¡Œä¸ºä¸Šçš„è”åŠ¨ï¼š<br/>
<strong>æ¥è§¦ã€åˆ¤æ–­ã€åé¦ˆã€ç»“æœ</strong>ï¼Œå…±åŒæ„æˆå®Œæ•´çš„äº¤äº’é—­ç¯ã€‚</p>
<p>å› æ­¤ï¼Œæœ¬ç¯‡æ–‡ç« å°†ç€é‡äºæ„å»º <strong>äººç‰©ä¸åœ°å›¾å…ƒç´ çš„äº¤äº’</strong> ï¼Œé€æ­¥ <strong>ä»‹ç»ã€å®ç°</strong> å‡ ç±»å¸¸è§çš„åœ°å›¾äº¤äº’å¯¹è±¡ï¼Œæ„å»ºä¸€ä¸ªæ›´åŠ ä¸°å¯Œã€å¯æ‰©å±•çš„åœ°å›¾äº¤äº’ä½“ç³»ã€‚</p>
<h3 data-id="heading-1">å‰æƒ…æç¤º</h3>
<h4 data-id="heading-2">1. åœ°å›¾</h4>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ceaac4c66a3348c7885fd3c0de868d8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=lc0X076tyX4XmZd%2FWYZNjGeVwzM%3D" width="100%" loading="lazy"/>
<p>åœ¨è¿›è¡Œæœ¬ç« çš„å†…å®¹å®è·µä¹‹å‰ï¼Œè¯·å…ˆå°†ä¹‹å‰åœ°å›¾ä¸­ <strong>é—¨ã€å®ç®±ã€é’¥åŒ™ã€åœ°åˆºå…ƒç´ </strong> å…ˆè¡Œæ¸…é™¤ã€‚<br/>
æœ¬ç« å°†æŠŠä»–ä»¬ä»å•çº¯è£…é¥°ä»¶ï¼Œè¿›åŒ–åˆ°çœŸæ­£çš„å¯äº¤äº’ä»¶ã€‚</p>
<blockquote>
<p>æ¥ä¸‹æ¥æ‰€éœ€è¦ç”¨åˆ°çš„ <strong>é—¨ã€å®ç®±ã€é’¥åŒ™ã€åœ°åˆº</strong> ç­‰å›¾ç‰‡ç´ æï¼Œå·²åœ¨ <strong>githubä»“åº“</strong> ä¸­æ·»åŠ ã€‚</p>
</blockquote>
<h4 data-id="heading-3">2. å¢™ä½“</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09af254d3786466dad783d6a18c6e010~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=PK8twXdE%2FrnqpkiwovStFoGFy8U%3D" alt="æˆªå±2025-12-16 14.18.55.png" loading="lazy"/></p>
<p>é¦–å…ˆï¼Œå…ˆæ„Ÿè°¢å…„å¼Ÿçš„åé¦ˆ ğŸ˜Š<br/>
æ¥ä¸‹æ¥æˆ‘ä»¬å°±ç”¨ <strong>Object Layer</strong> å’Œ <strong>Tile Layer</strong> å®ç°ä¸Šä¸€æœŸçš„å¢™ä½“ç¢°æ’åŒºï¼Œçœ‹çœ‹åŒºåˆ«ã€‚</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b02b4357c85a496b93fd98cfb229fce6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=6ra5QiLhfJM25Q3aIp4qaiqHeqg%3D" width="100%" loading="lazy"/>
<p align="center"><i>Object Layer</i></p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91870250637a4e74972dca03c541812f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=WulaVqMQ%2FupsMfeaWKx9SUta1io%3D" width="100%" loading="lazy"/>
<p align="center"><i>Tile Layer</i></p>
<p>ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼š</p>
<ul>
<li><strong>Tile Layer</strong> çš„ç¢°æ’åŒºå®Œç¾å’Œåœ°å›¾ä¸­ <strong>wall</strong> å›¾å±‚åŒ¹é…</li>
<li><strong>Object Layer</strong> çš„ç¢°æ’åŒºå®Œç¾å’Œ <strong>Collisions</strong> å¯¹è±¡å±‚åŒ¹é…</li>
</ul>
<p><strong>åœ¨æœ¬æ–‡ç´ æçš„å‰æä¹‹ä¸‹</strong>ï¼š</p>
<ul>
<li>å¦‚æœæŒ‰ <strong>Tile Layer</strong>ï¼Œé‚£ä¹ˆç¢°æ’åŒºèŒƒå›´å°±åå¤§äº†ï¼Œéœ€è¦ä½ é‡æ–°ç»˜åˆ¶å¢™ä½“ï¼Œä½†æ˜¯ä½ ä¼šå‘ç°ç´ æä¸­å¢™ä½“ä¸ä¸‹é¢çš„åœ°æ¿æ˜¯åœ¨ä¸€å—çš„ï¼Œä¸èƒ½åˆ†ç¦»ï¼Œè¿™å°±ä¸å¤ªå®Œç¾ã€‚</li>
<li>è€Œ <strong>Object Layer</strong> å¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸ç ´åæ”¹å˜å¢™ä½“çš„å‰æä¸‹ï¼Œæ›´ç²¾ç»†è°ƒæ•´å¢™ä½“çš„ç¢°æ’åŒºï¼Œè®©å®ƒæ›´åˆç†ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œ<strong>å„æœ‰åˆ©å¼Š</strong>ï¼Œçœ‹å¤§å®¶çš„ <strong>å–èˆ</strong>ã€‚</p>
<blockquote>
<p>æœ¬æ–‡ä¸­æ°´é¢çš„ç¢°æ’åŒºå°±æ˜¯ <strong>Tile Layer</strong> æ–¹æ³•ï¼Œå¤§å®¶å¯ä»¥çœ‹ä¸€çœ‹ã€‚</p>
</blockquote>
<h2 data-id="heading-4">MyHero</h2>
<h3 data-id="heading-5">ä¸€. æœ¬ç« ç›®æ ‡</h3>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e56f018c6d474c16804a3b03a1eedbc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=lUsx04BsdQeRssli0UqbPM641lw%3D" width="100%" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca34bafe00f8492b84f46c3022077ae3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=3HTqU0I2VkU8%2Bl9xs2bEEJzpTDs%3D" width="100%" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b0495310526464485e1c9172960dfce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=gCxZLyGeUignUPz%2ByLTpB9cC1zU%3D" width="100%" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7165f8043a14465a8da56a9feef4d515~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=Pj4UfE5HRi3HYs5Q%2FD%2FusulKy58%3D" width="100%" loading="lazy"/>
<h3 data-id="heading-6">äºŒ. äººç‰©ç¢°æ’çŸ©å½¢ä¼˜åŒ–</h3>
<h4 data-id="heading-7">1. ä¼˜åŒ–å‰</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a13610b36e4641518a291fcaf2f9be22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=lQ3u7sKkPYTkAaBs5jQP%2BiK0A3A%3D" alt="1.gif" loading="lazy"/></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// hero_component.dart</span>

  <span class="hljs-meta">@override</span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; onLoad() <span class="hljs-keyword">async</span> {
    ...

    size = Vector2(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>);
    position = Vector2(<span class="hljs-number">1000</span>, <span class="hljs-number">1000</span>);
    _hitbox = RectangleHitbox();
    add(_hitbox);
  }
</code></pre>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œäººç‰©çš„ç¢°æ’åŒºåŸŸ <code>RectangleHitbox</code> ä¼š <strong>ç»§æ‰¿çˆ¶ç»„ä»¶çš„ size</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ç¢°æ’çŸ©å½¢å°±æ˜¯  <strong>100Ã—100</strong>ï¼Œæ‰€ä»¥ç¢°æ’æ¡†å¾ˆå¤§ï¼Œé€šå¸¸ä¼šæ¯”äººç‰©å®é™…å¯è§†éƒ¨åˆ†å¤§ã€‚</p>
<blockquote>
<p>è¿™æ ·å°±å¯¼è‡´ <strong>ä¸Šå›¾ä¸­é—®é¢˜</strong> ï¼Œåœ¨ä¸€ä¸ªç‹­çª„çš„èµ°é“å†…ï¼Œç”±äºä½ çš„è¶…å¤§ç¢°æ’åŒºåŸŸï¼Œè€Œè¢«å¡ä½ã€‚</p>
</blockquote>
<h4 data-id="heading-8">2. ä¼˜åŒ–å</h4>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee4f4656b4704f9580368f0b4f0ae820~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=pw7jpdIlENx2TjqxTp8HwaXDhyQ%3D" alt="2.gif" loading="lazy"/></p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// hero_component.dart</span>

  <span class="hljs-meta">@override</span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; onLoad() <span class="hljs-keyword">async</span> {
    ...

    size = Vector2(<span class="hljs-number">100</span>, <span class="hljs-number">100</span>);
    position = Vector2(<span class="hljs-number">1000</span>, <span class="hljs-number">1000</span>);
    _hitbox = RectangleHitbox.relative(
      Vector2(<span class="hljs-number">0.5</span>, <span class="hljs-number">0.2</span>), <span class="hljs-comment">// ç¢°æ’åŒºåŸŸå ç»„ä»¶å®½é«˜æ¯”ä¾‹</span>
      parentSize: size,
      position: Vector2(size.x * <span class="hljs-number">0.25</span>, size.y * <span class="hljs-number">0.7</span>), <span class="hljs-comment">// ç¢°æ’åŒºåŸŸçš„åç§»</span>
    );
    add(_hitbox);
  }
</code></pre>
<p>ä¼˜åŒ–åï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>RectangleHitbox.relative</code> æ‰‹åŠ¨ç¼©å°ç¢°æ’çŸ©å½¢ï¼Œå¹¶è°ƒæ•´åç§»ï¼Œä½¿ç¢°æ’åŒºåŸŸåªè¦†ç›–è§’è‰²è„šåº•ï¼Œå³å¯è·å– <strong>æ­£å¸¸çš„æ¸¸æˆä½“éªŒ</strong>ï¼š</p>
<ul>
<li>ç¢°æ’çŸ©å½¢ä¸è§’è‰²å¯è§†éƒ¨åˆ†æ›´è´´åˆï¼Œé¿å…å¡å¢™ã€‚</li>
<li>åœ¨ç‹­çª„èµ°é“ä¸­è§’è‰²å¯ä»¥é¡ºç•…ç§»åŠ¨ã€‚</li>
<li>ä¿ç•™è¶³å¤Ÿçš„ç¢°æ’æ£€æµ‹åŒºåŸŸï¼Œä¿è¯æ¸¸æˆé€»è¾‘å’Œç‰©ç†äº¤äº’ä»ç„¶æœ‰æ•ˆã€‚</li>
</ul>
<blockquote>
<p>âœ¨<strong>æ€»ç»“</strong>ï¼š<br/>
é€šè¿‡ç®€å•ç¼©å°å¹¶ä¸‹ç§»ç¢°æ’çŸ©å½¢ï¼Œå®ç°äº†è§†è§‰ä¸ç¢°æ’é€»è¾‘çš„åˆ†ç¦»ï¼Œå°±å¯ä»¥æå¤§æå‡å¯æ§æ€§å’Œç©å®¶ä½“éªŒã€‚</p>
</blockquote>
<h3 data-id="heading-9">ä¸‰. ç»Ÿä¸€ç¢°æ’ç®¡ç†</h3>
<h4 data-id="heading-10">1. å¿…è¦æ€§</h4>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57b3098efea0453b8457509e059ed0a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=ovYDStufGS6Q6oVKItGIHeCR02o%3D" width="100%" loading="lazy"/>
<p>åœ¨æ¸¸æˆå¼€å‘ä¸­ï¼Œå¢™ä½“ã€é—¨ã€éšœç¢åŒºåŸŸç­‰ <strong>ç¢°æ’å¯¹è±¡</strong> å¾€å¾€åˆ†å¸ƒåœ¨åœ°å›¾çš„ä¸åŒå±‚çº§æˆ–ç»„ä»¶ä¸­ã€‚<br/>
è¿™ç±»å¯¹è±¡çš„å…±åŒç‰¹ç‚¹æ˜¯ï¼š<strong>ä¸ä¸€å®šéœ€è¦æ¸²æŸ“ï¼Œä½†å¿…é¡»å‚ä¸ç¢°æ’åˆ¤æ–­</strong>ã€‚</p>
<p>å¦‚æœæ¯ä¸ªç»„ä»¶å„è‡ªå®ç°ç¢°æ’é€»è¾‘ï¼Œå®¹æ˜“å‡ºç°ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li><strong>é€»è¾‘åˆ†æ•£</strong> ï¼šç¢°æ’åˆ¤æ–­åˆ†å¸ƒåœ¨å¤šä¸ªç»„ä»¶ä¸­ï¼Œè§’è‰²ç§»åŠ¨ä¸é˜»æŒ¡é€»è¾‘éš¾ä»¥ç»Ÿä¸€ç®¡ç†ã€‚</li>
<li><strong>é‡å¤å®ç°</strong>ï¼šä¸åŒç¢°æ’å¯¹è±¡å¾€å¾€éœ€è¦ç›¸åŒçš„å°ºå¯¸ã€ä½ç½®å’Œç¢°æ’æ£€æµ‹ä»£ç ï¼Œå®¹æ˜“äº§ç”Ÿå†—ä½™ã€‚</li>
<li><strong>æ‰©å±•ä¸ä¾¿</strong>ï¼šæ–°å¢ä¸€ç§å¯ç¢°æ’å¯¹è±¡æ—¶ï¼Œéœ€è¦é‡å¤ç¼–å†™æˆ–ä¿®æ”¹ç°æœ‰ç¢°æ’ç›¸å…³é€»è¾‘ã€‚</li>
</ol>
<p>å› æ­¤ï¼Œæœ‰å¿…è¦å»ºç«‹ä¸€ä¸ªç»Ÿä¸€çš„ <code>ç¢°æ’ç®¡ç†</code>ï¼Œå°† <strong>å¯å‚ä¸ç¢°æ’</strong> çš„èƒ½åŠ›é›†ä¸­ç®¡ç†ã€‚</p>
<h4 data-id="heading-11">2. å®ç°</h4>
<h5 data-id="heading-12">ï¼ˆ1ï¼‰æ–°å»ºç¢°æ’åŸºç±»</h5>
<p>æŠ½è±¡å‡ºä¸€ä¸ª <code>BlockerComponent</code> ä½œä¸º <strong>ç»Ÿä¸€çš„ç¢°æ’åŸºç±»</strong>ï¼Œåç»­æ‰€æœ‰éœ€è¦å‚ä¸ç¢°æ’çš„ç»„ä»¶ç›´æ¥ç»§æ‰¿è¯¥ç±»å³å¯ï¼Œé¿å…åœ¨å„ä¸ªç»„ä»¶ä¸­é‡å¤ç¼–å†™ç¢°æ’é€»è¾‘ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// blocker_component.dart</span>

<span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BlockerComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SpriteComponent</span>
    <span class="hljs-title">with</span> <span class="hljs-title">CollisionCallbacks</span> </span>{
  <span class="hljs-keyword">late</span> <span class="hljs-keyword">final</span> RectangleHitbox hitbox;

  BlockerComponent({
    <span class="hljs-keyword">super</span>.position,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">super</span>.size,
    <span class="hljs-built_in">bool</span> addHitbox = <span class="hljs-keyword">true</span>,
  }) {
    <span class="hljs-keyword">if</span> (addHitbox) {
      hitbox = RectangleHitbox();
      add(hitbox);
    }
  }

  <span class="hljs-meta">@override</span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; onLoad() <span class="hljs-keyword">async</span> {
    <span class="hljs-comment">// åˆ›å»º 1Ã—1 çš„é€æ˜ spriteï¼Œå ä½ä»¥æ»¡è¶³ SpriteComponent è¦æ±‚</span>
    <span class="hljs-keyword">final</span> recorder = PictureRecorder();
    <span class="hljs-keyword">final</span> canvas = Canvas(recorder);
    <span class="hljs-keyword">final</span> paint = Paint()..color = <span class="hljs-keyword">const</span> Color(<span class="hljs-number">0x00000000</span>);
    canvas.drawRect(<span class="hljs-keyword">const</span> Rect.fromLTWH(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>), paint);
    <span class="hljs-keyword">final</span> picture = recorder.endRecording();
    <span class="hljs-keyword">final</span> image = <span class="hljs-keyword">await</span> picture.toImage(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
    sprite = Sprite(image);
  }

  <span class="hljs-built_in">bool</span> collidesWith(Rect heroRect) {
    <span class="hljs-keyword">return</span> hitbox.toAbsoluteRect().overlaps(heroRect);
  }
}
</code></pre>
<ul>
<li>
<p><strong>ä½œä¸ºå¯ç¢°æ’ç»„ä»¶çš„åŸºç¡€ç±»</strong></p>
<ul>
<li>ç»§æ‰¿ <code>SpriteComponent</code>ï¼Œç»Ÿä¸€ç®¡ç†ä½ç½®ä¸å°ºå¯¸</li>
<li>æ··å…¥ <code>CollisionCallbacks</code>ï¼Œæ¥å…¥ Flame ç¢°æ’ä½“ç³»</li>
<li>ä½¿ç”¨ <code>RectangleHitbox</code> ä½œä¸ºå®é™…çš„ç¢°æ’åŒºåŸŸ</li>
</ul>
</li>
<li>
<p><strong>è§£å†³ SpriteComponent å¿…é¡»ç»‘å®š sprite çš„é™åˆ¶</strong></p>
<ul>
<li>åœ¨ <code>onLoad</code> ä¸­åˆ›å»ºä¸€ä¸ª <code>1Ã—1</code> çš„é€æ˜ sprite</li>
<li>ç»„ä»¶æœ¬èº«ä¸å¯è§ï¼Œä½†åœ¨å¼•æ“å±‚é¢æ˜¯åˆæ³•çš„æ¸²æŸ“ç»„ä»¶</li>
</ul>
</li>
<li>
<p><strong>æä¾›æ‰‹åŠ¨ç¢°æ’æ£€æµ‹èƒ½åŠ›</strong></p>
<ul>
<li>é€šè¿‡ <code>collidesWith(Rect heroRect)</code> åˆ¤æ–­æ˜¯å¦å‘ç”Ÿé‡å </li>
<li>é€‚ç”¨äºè§’è‰²ç§»åŠ¨è¿‡ç¨‹ä¸­çš„é˜»æŒ¡åˆ¤æ–­ä¸ä½ç§»ä¿®æ­£</li>
</ul>
</li>
</ul>
<h5 data-id="heading-13">ï¼ˆ2ï¼‰ä¿®æ”¹ä»£ç </h5>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†åŸæ¥çš„ <code>wall_component.dart</code> ç»§æ‰¿äº† <code>BlockerComponent</code>ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// wall_component.dart</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WallComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BlockerComponent</span> </span>{
  WallComponent({Vector2? position, <span class="hljs-keyword">required</span> Vector2 size}) 
      : <span class="hljs-keyword">super</span>(position: position, size: size);
}
</code></pre>
<hr/>
<p>å…¶æ¬¡ï¼Œåœ¨ <code>my_game.dart</code> ä¸­,æˆ‘ä»¬å°†åŸæ¥åªç”¨äºæ”¶é›†å¢™ä½“çš„åˆ—è¡¨ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// my_game.dart</span>

<span class="hljs-keyword">final</span> <span class="hljs-built_in">List</span>&lt;WallComponent&gt; walls  ---&gt;  <span class="hljs-keyword">final</span> <span class="hljs-built_in">List</span>&lt;BlockerComponent&gt; blockers

<span class="hljs-comment">// ç»Ÿä¸€æ·»åŠ ç®¡ç†</span>
blockers.add();
</code></pre>
<hr/>
<p>æœ€åï¼Œåœ¨ <code>hero_component.dart</code> ä¸­ä¿®æ”¹ï¼š</p>
<ul>
<li><strong>ç¢°æ’æ€§èƒ½ä¼˜åŒ–é›†åˆ</strong></li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">final</span> <span class="hljs-built_in">Set</span>&lt;BlockerComponent&gt; _nearbyBlockers = {};
<span class="hljs-keyword">late</span> RectangleHitbox _hitbox;
</code></pre>
<ul>
<li><strong>ç¢°æ’æ£€æµ‹æ–¹æ³•</strong></li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-built_in">bool</span> _wouldCollideWithBlockers() {
    <span class="hljs-keyword">final</span> heroRect = _hitbox.toAbsoluteRect();

    <span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨æ¸¸æˆç»´æŠ¤çš„ blockers é›†åˆ</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> blocker <span class="hljs-keyword">in</span> game.blockers) {
      <span class="hljs-keyword">if</span> (blocker.collidesWith(heroRect)) <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }
    
    ...

    <span class="hljs-comment">// å…¼å®¹é™„è¿‘ blockers</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> nearby <span class="hljs-keyword">in</span> _nearbyBlockers) {
      <span class="hljs-keyword">if</span> (nearby.collidesWith(heroRect)) <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
}
</code></pre>
<ul>
<li><strong>ç¢°æ’å›è°ƒ</strong></li>
</ul>
<pre><code class="hljs language-dart" lang="dart"> <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> onCollisionStart(
    <span class="hljs-built_in">Set</span>&lt;Vector2&gt; intersectionPoints,
    PositionComponent other,
  ) {
    <span class="hljs-keyword">super</span>.onCollisionStart(intersectionPoints, other);
    <span class="hljs-keyword">if</span> (other <span class="hljs-keyword">is</span> BlockerComponent) {
      _nearbyBlockers.add(other);
    }
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> onCollisionEnd(PositionComponent other) {
    <span class="hljs-keyword">super</span>.onCollisionEnd(other);
    <span class="hljs-keyword">if</span> (other <span class="hljs-keyword">is</span> BlockerComponent) {
      _nearbyBlockers.remove(other);
    }
  }
</code></pre>
<h3 data-id="heading-14">å››. Tile Layer æ„å»ºæ°´é¢ç¢°æ’åŒº</h3>
<p>æ„å»ºæ°´é¢ç¢°æ’åŒºï¼Œç®€å•æ¥è¯´å°±æ˜¯éå† <strong>Tiled</strong> åœ°å›¾ä¸­çš„ <code>water</code> å›¾å±‚ï¼Œå°†æ‰€æœ‰ <strong>éç©ºç“¦ç‰‡</strong> è½¬æ¢ä¸ºå¯¹åº”çš„ <code>WaterComponent</code>ï¼Œå¹¶æŒ‰ç“¦ç‰‡ä½ç½®å’Œå¤§å°æ·»åŠ åˆ°æ¸¸æˆä¸–ç•Œä¸­ï¼Œç”¨äºè¡¨ç¤ºæ°´é¢ã€‚</p>
<h4 data-id="heading-15">æ–¹å¼ä¸€ï¼šé€ç“¦ç‰‡åˆ›å»ºç»„ä»¶ï¼ˆä»…å±•ç¤ºï¼‰</h4>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a896ee7f208345fca1d11b496bd17230~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=%2FkCwsOFjP9AtAdy3RDP6NZ5qIsE%3D" width="100%" loading="lazy"/>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">final</span> waterLayer = tiled.tileMap.getLayer&lt;TileLayer&gt;(<span class="hljs-string">'water'</span>);

<span class="hljs-keyword">if</span> (waterLayer != <span class="hljs-keyword">null</span> &amp;&amp; waterLayer.data != <span class="hljs-keyword">null</span>) {
  <span class="hljs-keyword">final</span> width = waterLayer.width;
  <span class="hljs-keyword">final</span> height = waterLayer.height;
  <span class="hljs-keyword">final</span> data = waterLayer.data!;

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> y = <span class="hljs-number">0</span>; y &lt; height; y++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>; x &lt; width; x++) {
      <span class="hljs-keyword">final</span> index = y * width + x;
      <span class="hljs-keyword">final</span> gid = data[index];

      <span class="hljs-keyword">if</span> (gid != <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">final</span> water = WaterComponent(
            position: Vector2(
              x * tileSize * mapScale,
              y * tileSize * mapScale,
            ),
            size: Vector2(
              tileSize * mapScale,
              tileSize * mapScale,
            ),
          );
        <span class="hljs-comment">// æ·»åŠ è‡³ç»Ÿä¸€ç¢°æ’åˆ—è¡¨</span>
        blockers.add(water);
        <span class="hljs-keyword">await</span> world.add(water);
      }
    }
  }
}

</code></pre>
<p>è¿™é‡Œå°†åœ°å›¾ä¸­æ¯ä¸€ä¸ª <strong>8x8</strong> çš„æ°´ç“¦ç‰‡ï¼Œéƒ½å•ç‹¬å˜æˆä¸€ä¸ª <code>WaterComponent</code> å¯¹è±¡ã€‚</p>
<blockquote>
<p>å¯ä»¥çœ‹è§åœ°å›¾ä¸­æ°´é¢æ•°é‡å·¨å¤§ï¼Œäº§ç”Ÿäº† <strong>å¤§é‡ç»„ä»¶</strong>ï¼Œ<strong>æå¤§é™ä½æ¸²æŸ“å’Œç¢°æ’æ•ˆç‡</strong>ã€‚</p>
</blockquote>
<h4 data-id="heading-16">æ–¹å¼äºŒï¼šæ‰¹é‡åˆå¹¶åˆ›å»ºç»„ä»¶ï¼ˆæ¨èï¼‰</h4>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/856732f2c2ae42019a8f8586ce6be852~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=ZrolKuefyJzl3uU0noNLYmM02to%3D" width="100%" loading="lazy"/>
<pre><code class="hljs language-dart" lang="dart">  <span class="hljs-comment">// my_game.dart</span>

  <span class="hljs-keyword">final</span> waterLayer = tiled.tileMap.getLayer&lt;TileLayer&gt;(<span class="hljs-string">'water'</span>);
    <span class="hljs-keyword">if</span> (waterLayer != <span class="hljs-keyword">null</span> &amp;&amp; waterLayer.data != <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">await</span> addMergedTileLayerV2(
        tileData: waterLayer.data!,
        width: waterLayer.width,
        height: waterLayer.height,
        tileSize: tileSize,
        scale: mapScale,
        createComponent: (position, size) <span class="hljs-keyword">async</span> {
          <span class="hljs-keyword">final</span> water = WaterComponent(position: position, size: size);
          <span class="hljs-comment">// æ·»åŠ è‡³ç»Ÿä¸€ç¢°æ’åˆ—è¡¨</span>
          blockers.add(water);
          <span class="hljs-keyword">return</span> water;
        },
        parent: world,
      );
    }
</code></pre>
<p>è¿™ç§æ–¹å¼é€šè¿‡ <code>addMergedTileLayerV2</code> å°†ç›¸é‚»çš„æ°´ç“¦ç‰‡æ‰¹é‡åˆå¹¶ä¸ºè¾ƒå°‘çš„ç»„ä»¶:</p>
<ul>
<li>å¤§å¹…å‡å°‘ <code>Component</code> æ•°é‡ï¼Œæé«˜æ€§èƒ½</li>
<li>ä¿æŒç¢°æ’é€»è¾‘å’Œæ¸²æŸ“ä¸€è‡´</li>
<li>å¯ä»¥ç»Ÿä¸€åŠ å…¥ <code>blockers</code> åˆ—è¡¨ï¼Œæ–¹ä¾¿è‹±é›„ç¢°æ’é¢„æµ‹</li>
</ul>
<blockquote>
<p>å¯ä»¥çœ‹è§åœ°å›¾ä¸­,æ•°é‡å·¨å¤§çš„ç»„ä»¶,ç»è¿‡ <code>addMergedTileLayerV2</code> æ–¹æ³•æ‰¹é‡åˆå¹¶åï¼Œä»…ä¸º3ä¸ªäº†ã€‚</p>
</blockquote>
<h4 data-id="heading-17">æ‰¹é‡åˆå¹¶æ–¹æ³•</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// common.dart</span>

<span class="hljs-comment">/// <span class="markdown">æ‰«æ TileLayer æ•°æ®ï¼Œå°†è¿ç»­éé›¶ç“¦ç‰‡åˆå¹¶æˆçŸ©å½¢ç»„ä»¶ï¼ˆæ°´å¹³+å‚ç›´åˆå¹¶ï¼‰</span></span>
<span class="hljs-comment">/// <span class="markdown">[tileData] - TileLayer.dataï¼ŒæŒ‰è¡Œå±•å¼€</span></span>
<span class="hljs-comment">/// <span class="markdown">[width] - TileLayer å®½åº¦ï¼ˆåˆ—æ•°ï¼‰</span></span>
<span class="hljs-comment">/// <span class="markdown">[height] - TileLayer é«˜åº¦ï¼ˆè¡Œæ•°ï¼‰</span></span>
<span class="hljs-comment">/// <span class="markdown">[tileSize] - æ¯ä¸ªç“¦ç‰‡å¤§å°</span></span>
<span class="hljs-comment">/// <span class="markdown">[scale] - åœ°å›¾ç¼©æ”¾</span></span>
<span class="hljs-comment">/// <span class="markdown">[createComponent] - åˆ›å»ºæ¯ä¸ªç¢°æ’å—çš„æ–¹æ³•</span></span>
<span class="hljs-comment">/// <span class="markdown">[parent] - çˆ¶ç»„ä»¶ï¼Œç”¨äºæ·»åŠ ç”Ÿæˆçš„ç»„ä»¶</span></span>
Future&lt;<span class="hljs-keyword">void</span>&gt; addMergedTileLayerV2({
  <span class="hljs-keyword">required</span> <span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">int</span>&gt; tileData,
  <span class="hljs-keyword">required</span> <span class="hljs-built_in">int</span> width,
  <span class="hljs-keyword">required</span> <span class="hljs-built_in">int</span> height,
  <span class="hljs-keyword">required</span> <span class="hljs-built_in">double</span> tileSize,
  <span class="hljs-built_in">double</span> scale = <span class="hljs-number">1.0</span>,
  <span class="hljs-keyword">required</span> Future&lt;PositionComponent&gt; <span class="hljs-built_in">Function</span>(Vector2 position, Vector2 size)
      createComponent,
  <span class="hljs-keyword">required</span> Component parent,
}) <span class="hljs-keyword">async</span> {
  <span class="hljs-comment">// Step1: å…ˆæŒ‰è¡Œç”Ÿæˆæ°´å¹³åˆå¹¶å—</span>
  <span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">int</span>&gt;&gt; rects = []; <span class="hljs-comment">// æ¯è¡Œçš„å¼€å§‹åˆ—å’Œå®½åº¦</span>
  <span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">int</span>&gt;&gt; horizontalRects = <span class="hljs-built_in">List</span>.generate(height, (_) =&gt; []);

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> y = <span class="hljs-number">0</span>; y &lt; height; y++) {
    <span class="hljs-built_in">int</span> startX = <span class="hljs-number">-1</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span>; x &lt;= width; x++) {
      <span class="hljs-keyword">final</span> isFilled = x &lt; width &amp;&amp; tileData[y * width + x] != <span class="hljs-number">0</span>;

      <span class="hljs-keyword">if</span> (isFilled &amp;&amp; startX == <span class="hljs-number">-1</span>) {
        startX = x;
      }

      <span class="hljs-keyword">if</span> ((!isFilled || x == width) &amp;&amp; startX != <span class="hljs-number">-1</span>) {
        horizontalRects[y].addAll([startX, x - startX]);
        startX = <span class="hljs-number">-1</span>;
      }
    }
  }

  <span class="hljs-comment">// Step2: å‚ç›´åˆå¹¶ç›¸åŒåˆ—å’Œå®½åº¦çš„å—</span>
  <span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">List</span>&lt;<span class="hljs-built_in">int</span>&gt;&gt; processed = <span class="hljs-built_in">List</span>.generate(height, (_) =&gt; <span class="hljs-built_in">List</span>.filled(width, <span class="hljs-number">0</span>));
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> y = <span class="hljs-number">0</span>; y &lt; height; y++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; horizontalRects[y].length; i += <span class="hljs-number">2</span>) {
      <span class="hljs-keyword">final</span> xStart = horizontalRects[y][i];
      <span class="hljs-keyword">final</span> w = horizontalRects[y][i + <span class="hljs-number">1</span>];

      <span class="hljs-keyword">if</span> (processed[y][xStart] == <span class="hljs-number">1</span>) <span class="hljs-keyword">continue</span>;

      <span class="hljs-comment">// å°è¯•å‘ä¸‹åˆå¹¶</span>
      <span class="hljs-built_in">int</span> rectHeight = <span class="hljs-number">1</span>;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> yy = y + <span class="hljs-number">1</span>; yy &lt; height; yy++) {
        <span class="hljs-built_in">bool</span> canMerge = <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; horizontalRects[yy].length; j += <span class="hljs-number">2</span>) {
          <span class="hljs-keyword">if</span> (horizontalRects[yy][j] == xStart &amp;&amp;
              horizontalRects[yy][j + <span class="hljs-number">1</span>] == w) {
            canMerge = <span class="hljs-keyword">true</span>;
            <span class="hljs-keyword">break</span>;
          }
        }
        <span class="hljs-keyword">if</span> (canMerge) {
          rectHeight++;
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> col = xStart; col &lt; xStart + w; col++) {
            processed[yy][col] = <span class="hljs-number">1</span>;
          }
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">break</span>;
        }
      }

      <span class="hljs-comment">// åˆ›å»ºç»„ä»¶</span>
      <span class="hljs-keyword">final</span> position =
          Vector2(xStart * tileSize * scale, y * tileSize * scale);
      <span class="hljs-keyword">final</span> size = Vector2(w * tileSize * scale, rectHeight * tileSize * scale);
      <span class="hljs-keyword">final</span> block = <span class="hljs-keyword">await</span> createComponent(position, size);
      <span class="hljs-keyword">await</span> parent.add(block);

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> col = xStart; col &lt; xStart + w; col++) {
        processed[y][col] = <span class="hljs-number">1</span>;
      }
    }
  }
}
</code></pre>
<blockquote>
<p><code>addMergedTileLayerV2</code> ç”¨äº <strong>æ‰«æ TileLayer çš„ç“¦ç‰‡æ•°æ®</strong>ï¼Œå°†ç›¸é‚»çš„éç©ºç“¦ç‰‡å…ˆè¿›è¡Œ<strong>æ°´å¹³æ–¹å‘åˆå¹¶</strong>ï¼Œå†åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œ<strong>å‚ç›´æ–¹å‘åˆå¹¶</strong>ï¼Œæœ€ç»ˆæŠŠå¤šä¸ªè¿ç»­ç“¦ç‰‡åˆå¹¶ä¸º<strong>æ›´å¤§çš„çŸ©å½¢ç»„ä»¶</strong>ã€‚</p>
</blockquote>
<h3 data-id="heading-18">äº”. å®ç®± - æ— éªŒè¯äº¤äº’å¼è§£é”</h3>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e56f018c6d474c16804a3b03a1eedbc5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=lUsx04BsdQeRssli0UqbPM641lw%3D" width="100%" loading="lazy"/>
<h4 data-id="heading-19">1. ç®€è¿°</h4>
<p><strong>å®ç®±</strong> æ˜¯ä¸€ç§æ— éœ€æ¡ä»¶éªŒè¯çš„å¯äº¤äº’åœ°å›¾å¯¹è±¡ï¼Œé€šè¿‡è§’è‰²æ¥è§¦å³å¯è§¦å‘äº¤äº’ã€‚</p>
<ul>
<li>
<p><strong>ç»§æ‰¿å…³ç³»</strong>ï¼šæ— éœ€ç»§æ‰¿ç¢°æ’åŸºç±»</p>
</li>
<li>
<p><strong>åŠŸèƒ½</strong>ï¼šæä¾›å¯æ‹¾å–å¥–åŠ±</p>
</li>
<li>
<p><strong>äº¤äº’é€»è¾‘</strong>ï¼š</p>
<ul>
<li>ç©å®¶é è¿‘å®ç®±å³å¯è§¦å‘æ‰“å¼€åŠ¨ä½œ</li>
<li>æ‰“å¼€åç©å®¶å¯é€‰æ‹©æ˜¯å¦æ‹¾å–å¥–åŠ±</li>
</ul>
</li>
</ul>
<h4 data-id="heading-20">2. Tiled å‰ç½®å·¥ä½œ</h4>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f66a0b0d129e4d2cb010490532f8ecc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=E9i88QuVDqSjv3FZkmwwKvefU6M%3D" width="100%" loading="lazy"/>
<ol>
<li>æ–°å»º <code>Object Layer</code> å›¾å±‚ï¼Œå‘½åä¸º <code>treasure</code>ã€‚</li>
<li>ç‚¹å‡»ä½¿ç”¨ä¸Šæ–¹çŸ©å½¢æ¡†é€‰å·¥å…·ã€‚</li>
<li>åœ¨åœ°å›¾ä¸­æ‰€éœ€ä½ç½®ï¼Œæ­£ç¡®ç»˜åˆ¶å®ç®±å¤§å°çš„çŸ©å½¢ã€‚</li>
<li>æ·»åŠ å±æ€§ï¼š</li>
</ol>
<ul>
<li>typeï¼š<strong>trasure</strong></li>
<li>statusï¼šè¡¨ç¤º <strong>å®ç®±çŠ¶æ€</strong>ï¼Œä¸€å…±æœ‰ä¸‰ç§ï¼š<strong>closedï¼ˆå…³é—­ï¼‰</strong>ã€<strong>fullï¼ˆæ‰“å¼€æœªæ‹¿å–ï¼‰</strong>ã€<strong>enmptyï¼ˆæ‰“å¼€å·²æ‹¿å–ï¼‰</strong></li>
</ul>
<h4 data-id="heading-21">3. æ„å»ºå®ç®±ç±»</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// treasure_component.dart</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TreasureComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SpriteComponent</span>
    <span class="hljs-title">with</span> <span class="hljs-title">HasGameReference</span>&lt;<span class="hljs-title">MyGame</span>&gt;, <span class="hljs-title">CollisionCallbacks</span> </span>{
  <span class="hljs-built_in">String</span> status;
  <span class="hljs-keyword">late</span> RectangleHitbox _hitbox;

  TreasureComponent({
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.status,
    <span class="hljs-keyword">required</span> Vector2 position,
    <span class="hljs-keyword">required</span> Vector2 size,
  }) : <span class="hljs-keyword">super</span>(position: position, size: size);

  <span class="hljs-meta">@override</span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; onLoad() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">super</span>.onLoad();

    sprite = <span class="hljs-keyword">await</span> Sprite.load(
      status == <span class="hljs-string">'closed'</span>
          ? <span class="hljs-string">'closed_treasure.png'</span>
          : status == <span class="hljs-string">'full'</span>
              ? <span class="hljs-string">'full_treasure.png'</span>
              : <span class="hljs-string">'empty_treasure.png'</span>,
    );

    _hitbox = RectangleHitbox();
    add(_hitbox);
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> onCollisionStart(
    <span class="hljs-built_in">Set</span>&lt;Vector2&gt; intersectionPoints,
    PositionComponent other,
  ) {
    <span class="hljs-keyword">super</span>.onCollisionStart(intersectionPoints, other);
    <span class="hljs-keyword">if</span> (other <span class="hljs-keyword">is</span> HeroComponent) {
      attemptOpen(other);
    }
  }

  Future&lt;<span class="hljs-keyword">void</span>&gt; _open() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">if</span> (status == <span class="hljs-string">'closed'</span>) {
      status = <span class="hljs-string">'full'</span>;
      sprite = <span class="hljs-keyword">await</span> Sprite.load(<span class="hljs-string">'full_treasure.png'</span>);
    }
  }

  Future&lt;<span class="hljs-keyword">void</span>&gt; _collect(HeroComponent hero) <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">if</span> (status == <span class="hljs-string">'full'</span>) {
      status = <span class="hljs-string">'empty'</span>;
      sprite = <span class="hljs-keyword">await</span> Sprite.load(<span class="hljs-string">'empty_treasure.png'</span>);
      UiNotify.showToast(game, <span class="hljs-string">'è·å¾—å®ç‰©'</span>);
    }
  }

  <span class="hljs-keyword">void</span> attemptOpen(HeroComponent hero) {
    <span class="hljs-keyword">if</span> (status == <span class="hljs-string">'closed'</span>) {
      _open();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (status == <span class="hljs-string">'full'</span>) {
      <span class="hljs-keyword">final</span> exists = game.camera.viewport.children
          .query&lt;DialogComponent&gt;()
          .isNotEmpty;
      <span class="hljs-keyword">if</span> (!exists) {
        <span class="hljs-keyword">final</span> dialog = DialogComponent.confirm(
          message: <span class="hljs-string">'æ˜¯å¦æ‹¿å–å®ç‰©'</span>,
          onConfirm: () =&gt; _collect(hero),
          onCancel: () {},
        );
        game.camera.viewport.add(dialog);
      }
    }
  }
}
</code></pre>
<p><code>TreasureComponent</code> ä½œä¸ºå®ç®±å®ä½“ç±»,è´Ÿè´£ <strong>æ˜¾ç¤ºä¸äº¤äº’</strong> çš„é€»è¾‘ï¼š</p>
<ul>
<li>
<p><strong>ç»§æ‰¿ <code>SpriteComponent</code> + ç¢°æ’å›è°ƒ</strong></p>
<ul>
<li>å…·å¤‡ä½ç½®ã€å°ºå¯¸å’Œç¢°æ’æ£€æµ‹èƒ½åŠ›</li>
</ul>
</li>
<li>
<p><strong>çŠ¶æ€ç®¡ç†</strong></p>
<ul>
<li><code>status = closed</code>ï¼šå…³é—­çŠ¶æ€ï¼Œè§¦ç¢°åè‡ªåŠ¨æ‰“å¼€</li>
<li><code>status = full</code>ï¼šå·²æ‰“å¼€çŠ¶æ€ï¼Œå¼¹å‡ºå¯¹è¯æ¡†ç¡®è®¤æ˜¯å¦æ‹¾å–</li>
<li><code>status = empty</code>ï¼šå·²æ‹¿å–çŠ¶æ€ï¼Œä»…æ˜¾ç¤ºç©ºå®ç®±</li>
</ul>
</li>
<li>
<p><strong>è§†å›¾æ›´æ–°</strong></p>
<ul>
<li>æ ¹æ®å®ç®±çŠ¶æ€åŠ¨æ€åŠ è½½ä¸åŒè´´å›¾</li>
</ul>
</li>
<li>
<p><strong>äº¤äº’é€»è¾‘</strong></p>
<ul>
<li>äººç‰©è§¦ç¢°åˆ°å®ç®±åŒºåŸŸåï¼Œæ ¹æ®å½“å‰çŠ¶æ€ï¼Œå†³å®šä¸‹ä¸€æ­¥è¡Œä¸º</li>
</ul>
</li>
</ul>
<h4 data-id="heading-22">4. åŠ è½½å®ç®±</h4>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-comment">// my_game.dart</span>

    <span class="hljs-keyword">final</span> treasureLayer = tiled.tileMap.getLayer&lt;ObjectGroup&gt;(<span class="hljs-string">'treasure'</span>);

    <span class="hljs-keyword">if</span> (treasureLayer != <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> obj <span class="hljs-keyword">in</span> treasureLayer.objects) {
        <span class="hljs-keyword">if</span> (obj.properties[<span class="hljs-string">'type'</span>]?.value == <span class="hljs-string">'treasure'</span>) {
          <span class="hljs-keyword">final</span> status = obj.properties[<span class="hljs-string">'status'</span>]!.value <span class="hljs-keyword">as</span> <span class="hljs-built_in">String</span>;
          <span class="hljs-keyword">final</span> x = mapScale * obj.x;
          <span class="hljs-keyword">final</span> y = mapScale * obj.y;
          <span class="hljs-keyword">final</span> w = mapScale * obj.width;
          <span class="hljs-keyword">final</span> h = mapScale * obj.height;
          <span class="hljs-keyword">final</span> treasureComponent = TreasureComponent(
            status: status,
            position: Vector2(x, y),
            size: Vector2(w, h),
          );
          treasureComponent.debugMode = <span class="hljs-keyword">true</span>;
          <span class="hljs-keyword">await</span> world.add(treasureComponent);
        }
      }
    }
</code></pre>
<h3 data-id="heading-23">å…­. é’¥åŒ™ä¸é—¨ - éªŒè¯äº¤äº’å¼è§£é”</h3>
 <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c641f2a2275348e8866403f6534892c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=gAK8%2FQYRh0GFgSYgXeZUqpDqKw8%3D" width="49%" height="400" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7133938e4b304827b8ca75f87d655cf1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=FyjsdzJOwUFBFzlbEmjgs9ZhkVQ%3D" width="49%" height="400" loading="lazy"/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b0495310526464485e1c9172960dfce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=gCxZLyGeUignUPz%2ByLTpB9cC1zU%3D" width="100%" loading="lazy"/>
<h4 data-id="heading-24">1. ç®€è¿°</h4>
<p><strong>é’¥åŒ™ä¸é—¨</strong> æ˜¯ä¸€ç»„å…·å¤‡æ¡ä»¶éªŒè¯çš„äº¤äº’å¯¹è±¡ï¼Œé€šè¿‡ <code>æ‹¾å–é’¥åŒ™ â†’ è§£é”å¯¹åº”é—¨</code> å®ç°åœ°å›¾é€šè¡Œæ§åˆ¶ã€‚</p>
<ul>
<li>
<p><strong>ç»§æ‰¿å…³ç³»</strong>ï¼šé—¨ç»§æ‰¿ç¢°æ’åŸºç±»ï¼Œå½“é—¨æœªæ‰“å¼€æ—¶å…·å¤‡é˜»æŒ¡èƒ½åŠ›ï¼Œä¸å¢™ä½“æˆ–æ°´é¢ç¢°æ’é€»è¾‘ä¸€è‡´</p>
</li>
<li>
<p><strong>é’¥åŒ™</strong>ï¼šå¯æ‹¾å–å¯¹è±¡ï¼Œè§’è‰²æ¥è§¦åè·å¾—å¯¹åº” <code>keyId</code></p>
</li>
<li>
<p><strong>é—¨</strong>ï¼šé˜»æŒ¡åœ°å›¾é€šè¡Œï¼Œéœ€è§’è‰²æŒæœ‰åŒ¹é…é’¥åŒ™æ‰èƒ½æ‰“å¼€</p>
</li>
<li>
<p><strong>äº¤äº’é€»è¾‘</strong>ï¼š</p>
<ul>
<li>è§’è‰²ä¸é—¨äº¤äº’æ—¶ï¼Œåˆ¤æ–­æ˜¯å¦æŒæœ‰åŒ¹é…é’¥åŒ™</li>
<li>æ¡ä»¶æ»¡è¶³æ—¶é—¨æ‰“å¼€ï¼Œå¦åˆ™ä¿æŒé˜»æŒ¡çŠ¶æ€</li>
</ul>
</li>
</ul>
<h4 data-id="heading-25">2. Tiled å‰ç½®å·¥ä½œ</h4>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36dbd7a9048848699cfcd6dd843995b0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=lnUwELyjabfpaotBegCyvbdVAOE%3D" width="100%" loading="lazy"/>
<ol>
<li>æ–°å»ºä¸¤ä¸ª <code>Object Layer</code> å›¾å±‚ï¼Œåˆ†åˆ«å‘½åä¸º <code>key</code>ã€<code>door</code>ã€‚</li>
<li>ç‚¹å‡»ä½¿ç”¨ä¸Šæ–¹çŸ©å½¢æ¡†é€‰å·¥å…·ã€‚</li>
<li>åœ¨åœ°å›¾ä¸­æ‰€éœ€ä½ç½®ï¼Œæ­£ç¡®ç»˜åˆ¶é’¥åŒ™å’Œé—¨å¤§å°çš„çŸ©å½¢ã€‚</li>
<li>æ·»åŠ å±æ€§ï¼š</li>
</ol>
<ul>
<li><code>é’¥åŒ™</code>ï¼š
<ul>
<li>typeï¼š<strong>key</strong></li>
<li>keyIdï¼šå¯¹åº”æŒ‡å®šçš„é’¥åŒ™ä¸é—¨</li>
</ul>
</li>
<li><code>é—¨</code>ï¼š
<ul>
<li>typeï¼š<strong>door</strong></li>
<li>keyIdï¼šå¯¹åº”æŒ‡å®šçš„é’¥åŒ™ä¸é—¨</li>
<li>statusï¼šè¡¨ç¤º <strong>é—¨çŠ¶æ€</strong>ï¼Œä¸€å…±æœ‰ä¸¤ç§ï¼š<strong>closedï¼ˆå…³é—­ï¼‰</strong>ã€<strong>openï¼ˆæ‰“å¼€ï¼‰</strong></li>
<li/>
</ul>
</li>
</ul>
<h4 data-id="heading-26">3. æ„å»ºé’¥åŒ™ç±»</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// key_component.dart</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">KeyComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SpriteComponent</span>
    <span class="hljs-title">with</span> <span class="hljs-title">HasGameReference</span>&lt;<span class="hljs-title">MyGame</span>&gt;, <span class="hljs-title">CollisionCallbacks</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> keyId;

  KeyComponent({
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.keyId,
    <span class="hljs-keyword">required</span> Vector2 position,
    <span class="hljs-keyword">required</span> Vector2 size,
  }) : <span class="hljs-keyword">super</span>(position: position, size: size);

  <span class="hljs-meta">@override</span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; onLoad() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">super</span>.onLoad();
    sprite = <span class="hljs-keyword">await</span> Sprite.load(<span class="hljs-string">'key.png'</span>); <span class="hljs-comment">// ç›´æ¥åŠ è½½ assets/key.png</span>
    add(RectangleHitbox());
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> onCollisionStart(<span class="hljs-built_in">Set</span>&lt;Vector2&gt; intersectionPoints, PositionComponent other) {
    <span class="hljs-keyword">super</span>.onCollisionStart(intersectionPoints, other);
    <span class="hljs-keyword">if</span> (other <span class="hljs-keyword">is</span> HeroComponent) {
      other.addKey(keyId);
      removeFromParent(); <span class="hljs-comment">// æ‹¾å–åç§»é™¤å½“å‰ tile</span>
    }
  }
}
</code></pre>
<p><code>KeyComponent</code> ä½œä¸º<strong>å¯æ‹¾å–çš„é’¥åŒ™å®ä½“</strong>ï¼Œç”¨äºè§’è‰²è§£é”å¯¹åº”é—¨ï¼š</p>
<ul>
<li>
<p><strong>ç»§æ‰¿ <code>SpriteComponent</code> + ç¢°æ’å›è°ƒ</strong></p>
<ul>
<li>å…·å¤‡ä½ç½®ã€å°ºå¯¸å’Œç¢°æ’æ£€æµ‹èƒ½åŠ›</li>
</ul>
</li>
<li>
<p><strong>é’¥åŒ™æ ‡è¯† <code>keyId</code></strong></p>
<ul>
<li>ç”¨äºä¸é—¨çš„ <code>keyId</code> å¯¹åº”ï¼Œå®ç°è§£é”éªŒè¯</li>
</ul>
</li>
<li>
<p><strong>ç¢°æ’æ‹¾å–é€»è¾‘</strong></p>
<ul>
<li>å½“è§’è‰²ç¢°åˆ°é’¥åŒ™ï¼š<br/>
å°† <code>keyId</code> å­˜å…¥è§’è‰²é’¥åŒ™é›†åˆ<br/>
ä»åœ°å›¾ä¸­ç§»é™¤é’¥åŒ™å®ä½“ï¼Œé¿å…é‡å¤æ‹¾å–</li>
</ul>
</li>
</ul>
<h4 data-id="heading-27">4. æ„å»ºé—¨ç±»</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// door_component.dart</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DoorComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BlockerComponent</span> <span class="hljs-title">with</span> <span class="hljs-title">HasGameReference</span>&lt;<span class="hljs-title">MyGame</span>&gt; </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">String</span> keyId;
  <span class="hljs-built_in">bool</span> isOpen;

  DoorComponent({
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.keyId,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.isOpen,
    <span class="hljs-keyword">super</span>.position,
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">super</span>.size,
  }) : <span class="hljs-keyword">super</span>(
    addHitbox: !isOpen);

  <span class="hljs-meta">@override</span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; onLoad() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">super</span>.onLoad();
    sprite = <span class="hljs-keyword">await</span> Sprite.load(isOpen ? <span class="hljs-string">'open_door.png'</span> : <span class="hljs-string">'closed_door.png'</span>);
  }

  <span class="hljs-keyword">void</span> _unlock() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">if</span> (!isOpen) {
      isOpen = <span class="hljs-keyword">true</span>;
      sprite = <span class="hljs-keyword">await</span> Sprite.load(<span class="hljs-string">'open_door.png'</span>);
      hitbox.removeFromParent();
    }
  }

  <span class="hljs-keyword">void</span> attemptOpen(HeroComponent hero) {
    <span class="hljs-keyword">if</span> (!isOpen &amp;&amp; hero.hasKey(keyId)) {
      unlock();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!isOpen) {
      UiNotify.showToast(game, <span class="hljs-string">'éœ€è¦é’¥åŒ™ <span class="hljs-subst">$keyId</span> æ‰èƒ½æ‰“å¼€'</span>);
    }
  }
}
</code></pre>
<p><code>DoorComponent</code> ä½œä¸ºé—¨çš„å®ä½“ç±»ï¼Œä¸»è¦èŒè´£æ˜¯ <strong>é˜»æŒ¡è§’è‰²é€šè¡Œå¹¶æ”¯æŒé’¥åŒ™éªŒè¯è§£é”</strong>ï¼š</p>
<ul>
<li>
<p><strong>ç»§æ‰¿ <code>BlockerComponent</code></strong></p>
<ul>
<li>é»˜è®¤æœ‰ç¢°æ’ä½“é˜»æŒ¡è§’è‰²</li>
<li>å¯æ ¹æ® <code>isOpen</code> çŠ¶æ€å†³å®šæ˜¯å¦æ·»åŠ ç¢°æ’ä½“</li>
</ul>
</li>
<li>
<p><strong>çŠ¶æ€ç®¡ç†</strong></p>
<ul>
<li><code>isOpen = false</code>ï¼šé—¨å…³é—­ï¼Œé˜»æŒ¡è§’è‰²</li>
<li><code>isOpen = true</code>ï¼šé—¨æ‰“å¼€ï¼Œç§»é™¤ç¢°æ’ä½“ï¼Œå…è®¸è§’è‰²é€šè¿‡</li>
</ul>
</li>
<li>
<p><strong>é’¥åŒ™éªŒè¯é€»è¾‘</strong></p>
<ul>
<li>
<p><code>attemptOpen(hero)</code>ï¼šå½“è§’è‰²æ¥è§¦é—¨æ—¶è§¦å‘</p>
<ul>
<li>å¦‚æœè§’è‰²æŒæœ‰åŒ¹é… <code>keyId</code>ï¼Œè°ƒç”¨ <code>_unlock()</code> æ‰“å¼€é—¨</li>
<li>å¦åˆ™å¼¹å‡ºæç¤ºï¼Œå‘ŠçŸ¥éœ€è¦é’¥åŒ™</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>è§†å›¾æ›´æ–°</strong></p>
<ul>
<li>æ ¹æ®é—¨çŠ¶æ€åŠ¨æ€åŠ è½½ä¸åŒè´´å›¾ï¼ˆ<code>open_door.png</code> / <code>closed_door.png</code>ï¼‰</li>
<li>æ‰“å¼€æ—¶åŒæ­¥ç§»é™¤ç¢°æ’ä½“ï¼Œä¿è¯è§’è‰²èƒ½é€šè¿‡</li>
</ul>
</li>
</ul>
<h4 data-id="heading-28">5. åŠ è½½é’¥åŒ™ä¸é—¨</h4>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-comment">// my_game.dart</span>

    <span class="hljs-comment">// ---- å¤„ç† Key Layer ä¸­çš„é’¥åŒ™ ----</span>
    <span class="hljs-keyword">final</span> keyLayer = tiled.tileMap.getLayer&lt;ObjectGroup&gt;(<span class="hljs-string">'key'</span>);
    <span class="hljs-keyword">if</span> (keyLayer != <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> obj <span class="hljs-keyword">in</span> keyLayer.objects) {
        <span class="hljs-keyword">if</span> (obj.properties[<span class="hljs-string">'type'</span>]?.value == <span class="hljs-string">'key'</span>) {
          <span class="hljs-keyword">final</span> keyId = obj.properties[<span class="hljs-string">'keyId'</span>]!.value <span class="hljs-keyword">as</span> <span class="hljs-built_in">String</span>;
          <span class="hljs-keyword">final</span> x = mapScale * obj.x;
          <span class="hljs-keyword">final</span> y = mapScale * obj.y;
          <span class="hljs-keyword">final</span> w = mapScale * obj.width;
          <span class="hljs-keyword">final</span> h = mapScale * obj.height;
          <span class="hljs-keyword">final</span> keyComponent = KeyComponent(
            keyId: keyId,
            <span class="hljs-comment">// Tiled å¯¹è±¡åæ ‡ä¸ºå·¦ä¸Šæˆ–åº•å¯¹é½ï¼›è¿™é‡Œä½¿ç”¨åº•å¯¹é½æ”¾ç½®æ›´ç¬¦åˆ tile å¤–è§‚</span>
            position: Vector2(x, y),
            size: Vector2(w, h),
          );
          keyComponent.debugMode = <span class="hljs-keyword">true</span>;
          <span class="hljs-keyword">await</span> world.add(keyComponent);
        }
      }
    }
    
    <span class="hljs-comment">// ---- å¤„ç† Door Layer ä¸­çš„é—¨ ----</span>
    <span class="hljs-keyword">final</span> doorLayer = tiled.tileMap.getLayer&lt;ObjectGroup&gt;(<span class="hljs-string">'door'</span>);
    <span class="hljs-keyword">if</span> (doorLayer != <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> obj <span class="hljs-keyword">in</span> doorLayer.objects) {
        <span class="hljs-keyword">if</span> (obj.properties[<span class="hljs-string">'type'</span>]?.value == <span class="hljs-string">'door'</span>) {
          <span class="hljs-keyword">final</span> keyId = obj.properties[<span class="hljs-string">'keyId'</span>]!.value <span class="hljs-keyword">as</span> <span class="hljs-built_in">String</span>;
          <span class="hljs-keyword">final</span> x = mapScale * obj.x;
          <span class="hljs-keyword">final</span> y = mapScale * obj.y;
          <span class="hljs-keyword">final</span> w = mapScale * obj.width;
          <span class="hljs-keyword">final</span> h = mapScale * obj.height;
          <span class="hljs-keyword">final</span> doorComponent = DoorComponent(
            keyId: keyId,
            isOpen: obj.properties[<span class="hljs-string">'status'</span>]?.value == <span class="hljs-string">'open'</span> ? <span class="hljs-keyword">true</span> : <span class="hljs-keyword">false</span>,
            <span class="hljs-comment">// Tiled å¯¹è±¡åæ ‡ä¸ºå·¦ä¸Šæˆ–åº•å¯¹é½ï¼›è¿™é‡Œä½¿ç”¨åº•å¯¹é½æ”¾ç½®æ›´ç¬¦åˆ tile å¤–è§‚</span>
            position: Vector2(x, y),
            size: Vector2(w, h),
          );
          doorComponent.debugMode = <span class="hljs-keyword">true</span>;
          <span class="hljs-keyword">await</span> world.add(doorComponent);
        }
      }
    }
</code></pre>
<h4 data-id="heading-29">6. å®Œå–„é€»è¾‘</h4>
<p>åœ¨ <code>HeroComponent</code> ä¸­ï¼Œä¸ºè§’è‰²æ·»åŠ  <strong>é’¥åŒ™ç®¡ç†ä¸é—¨éªŒè¯</strong> åŠŸèƒ½ï¼š</p>
<h5 data-id="heading-30">(1). é’¥åŒ™ç®¡ç†</h5>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">final</span> <span class="hljs-built_in">Set</span>&lt;<span class="hljs-built_in">String</span>&gt; keys = {};
</code></pre>
<ul>
<li>å­˜å‚¨è§’è‰²å·²æ‹¾å–çš„é’¥åŒ™ <code>keyId</code> é›†åˆ</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> addKey(<span class="hljs-built_in">String</span> keyId) {
  keys.add(keyId);
  UiNotify.showToast(game, <span class="hljs-string">'è·å¾—é’¥åŒ™: <span class="hljs-subst">$keyId</span>'</span>);
}
</code></pre>
<ul>
<li>è§’è‰²æ‹¾å–é’¥åŒ™æ—¶è°ƒç”¨</li>
<li>å¼¹å‡ºæç¤ºé€šçŸ¥ç©å®¶è·å¾—é’¥åŒ™</li>
</ul>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-built_in">bool</span> hasKey(<span class="hljs-built_in">String</span> keyId) =&gt; keys.contains(keyId);
</code></pre>
<ul>
<li>åˆ¤æ–­è§’è‰²æ˜¯å¦æŒæœ‰æŒ‡å®šé’¥åŒ™</li>
<li>ç”¨äºé—¨è§£é”éªŒè¯</li>
</ul>
<hr/>
<h5 data-id="heading-31">(2). é—¨äº¤äº’é€»è¾‘</h5>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> door <span class="hljs-keyword">in</span> game.world.children.query&lt;DoorComponent&gt;()) {
  <span class="hljs-keyword">if</span> (!door.isOpen &amp;&amp; door.collidesWith(heroRect)) {
    door.attemptOpen(<span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">if</span> (!door.isOpen) <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
  }
}
</code></pre>
<p>åœ¨è§’è‰²ç§»åŠ¨ç¢°æ’æ£€æµ‹ <code>_wouldCollideWithBlockers()</code> ä¸­ï¼š</p>
<ul>
<li>éå†æ‰€æœ‰é—¨ç»„ä»¶</li>
<li>æ£€æµ‹è§’è‰²æ˜¯å¦ä¸å…³é—­çš„é—¨å‘ç”Ÿç¢°æ’</li>
<li>è°ƒç”¨ <code>door.attemptOpen(this)</code> å°è¯•è§£é”</li>
<li>å¦‚æœé—¨ä»æœªæ‰“å¼€ï¼Œåˆ™è¿”å›é˜»æŒ¡ä¿¡æ¯ï¼Œé˜»æ­¢è§’è‰²ç§»åŠ¨</li>
</ul>
<h3 data-id="heading-32">ä¸ƒ. åœ°åˆº</h3>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7165f8043a14465a8da56a9feef4d515~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=Pj4UfE5HRi3HYs5Q%2FD%2FusulKy58%3D" width="100%" loading="lazy"/>
<h4 data-id="heading-33">1. ç®€è¿°</h4>
<p><strong>åœ°åˆº</strong> æ˜¯ä¸€ç§å‘¨æœŸæ€§é€ æˆä¼¤å®³çš„åœ°å›¾éšœç¢ï¼Œé€šè¿‡çŠ¶æ€åˆ‡æ¢å½¢æˆå®Œæ•´çš„ä¼¤å®³ä¸æ­»äº¡åˆ¤å®šé€»è¾‘ã€‚</p>
<ul>
<li>
<p><strong>ç»§æ‰¿å…³ç³»</strong>ï¼šæ— éœ€ç»§æ‰¿ç¢°æ’åŸºç±»</p>
</li>
<li>
<p><strong>åŠŸèƒ½</strong>ï¼šå¯¹æ¥è§¦çš„è§’è‰²é€ æˆä¼¤å®³</p>
</li>
<li>
<p><strong>çŠ¶æ€</strong>ï¼šçªå‡ºä¸æ”¶èµ·ä¸¤ç§çŠ¶æ€ï¼Œå‘¨æœŸæ€§åˆ‡æ¢</p>
</li>
<li>
<p><strong>äº¤äº’é€»è¾‘</strong>ï¼š</p>
<ul>
<li>è§’è‰²æ¥è§¦çªå‡ºçŠ¶æ€çš„åœ°åˆºä¼šå—åˆ°ä¼¤å®³</li>
<li>è§¦å‘æ­»äº¡åˆ¤å®šåå¯è§¦å‘æ¸¸æˆé‡å¯æˆ–å¤æ´»é€»è¾‘</li>
<li>å‘¨æœŸæ€§åˆ‡æ¢çŠ¶æ€å¢å¼ºåœ°å›¾æŒ‘æˆ˜æ€§</li>
</ul>
</li>
</ul>
<h4 data-id="heading-34">2. Tiled å‰ç½®å·¥ä½œ</h4>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfe89b0efc2d4f618ece0cb8e2edcab1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=dk%2Fr6O95jcLYO8PkaEdBnVqiIu8%3D" width="100%" loading="lazy"/>
<ol>
<li>æ–°å»º <code>Object Layer</code> å›¾å±‚ï¼Œå‘½åä¸º <code>thorn</code>ã€‚</li>
<li>ç‚¹å‡»ä½¿ç”¨ä¸Šæ–¹çŸ©å½¢æ¡†é€‰å·¥å…·ã€‚</li>
<li>åœ¨åœ°å›¾ä¸­æ‰€éœ€ä½ç½®ï¼Œæ­£ç¡®ç»˜åˆ¶åœ°åˆºå¤§å°çš„çŸ©å½¢ã€‚</li>
<li>æ·»åŠ å±æ€§ï¼š</li>
</ol>
<ul>
<li>typeï¼š<strong>thorn</strong></li>
<li>statusï¼šè¡¨ç¤º <strong>åœ°åˆºçŠ¶æ€</strong>ï¼Œä¸€å…±æœ‰ä¸¤ç§ï¼š<strong>onï¼ˆçªå‡ºï¼‰</strong>ã€<strong>offï¼ˆæ”¶å…¥ï¼‰</strong></li>
</ul>
<h4 data-id="heading-35">3. æ„å»ºåœ°åˆºç±»</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// thorn_component.dart</span>

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ThornComponent</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SpriteComponent</span>
    <span class="hljs-title">with</span> <span class="hljs-title">HasGameReference</span>&lt;<span class="hljs-title">MyGame</span>&gt;, <span class="hljs-title">CollisionCallbacks</span> </span>{
  <span class="hljs-built_in">String</span> status;
  <span class="hljs-keyword">late</span> RectangleHitbox _hitbox;

  <span class="hljs-built_in">double</span> _elapsed = <span class="hljs-number">0</span>;
  <span class="hljs-built_in">double</span> period = <span class="hljs-number">2.0</span>;
  <span class="hljs-built_in">bool</span> hurted = <span class="hljs-keyword">false</span>;
  ThornComponent({<span class="hljs-keyword">super</span>.position, <span class="hljs-keyword">required</span> <span class="hljs-keyword">super</span>.size, <span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.status});

  <span class="hljs-meta">@override</span>
  Future&lt;<span class="hljs-keyword">void</span>&gt; onLoad() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">super</span>.onLoad();
    sprite = <span class="hljs-keyword">await</span> Sprite.load(
      status == <span class="hljs-string">'on'</span> ? <span class="hljs-string">'thorn_on.png'</span> : <span class="hljs-string">'thorn_off.png'</span>,
    );
    _hitbox = RectangleHitbox();
    add(_hitbox);
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> onCollisionStart(
    <span class="hljs-built_in">Set</span>&lt;Vector2&gt; intersectionPoints,
    PositionComponent other,
  ) {
    <span class="hljs-keyword">super</span>.onCollisionStart(intersectionPoints, other);
    <span class="hljs-keyword">if</span> (other <span class="hljs-keyword">is</span> HeroComponent) {
      attemptDamage(other);
    }
  }

  <span class="hljs-keyword">void</span> attemptDamage(HeroComponent hero) {
    <span class="hljs-keyword">if</span> (status == <span class="hljs-string">'on'</span> &amp;&amp; !hurted) {
      hero.loseHp(<span class="hljs-number">1</span>);
      hurted = <span class="hljs-keyword">true</span>;
    }
  }

  <span class="hljs-keyword">void</span> _toggle() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">if</span> (status == <span class="hljs-string">'on'</span>) {
      status = <span class="hljs-string">'off'</span>;
    } <span class="hljs-keyword">else</span> {
      status = <span class="hljs-string">'on'</span>;
      hurted = <span class="hljs-keyword">false</span>;
    }
    sprite = <span class="hljs-keyword">await</span> Sprite.load(
      status == <span class="hljs-string">'on'</span> ? <span class="hljs-string">'thorn_on.png'</span> : <span class="hljs-string">'thorn_off.png'</span>,
    );
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> update(<span class="hljs-built_in">double</span> dt) {
    <span class="hljs-keyword">super</span>.update(dt);
    _elapsed += dt;
    <span class="hljs-keyword">if</span> (_elapsed &gt;= period) {
      _elapsed = <span class="hljs-number">0</span>;
      _toggle();
    }
  }
}

</code></pre>
<p><code>ThornComponent</code> è´Ÿè´£åœ°åˆºçš„<strong>æ˜¾ç¤ºã€å‘¨æœŸåˆ‡æ¢å’Œä¼¤å®³é€»è¾‘</strong>ï¼š</p>
<ul>
<li>
<p><strong>ç»§æ‰¿ <code>SpriteComponent</code> + ç¢°æ’å›è°ƒ</strong></p>
<ul>
<li>å…·å¤‡ä½ç½®ã€å°ºå¯¸å’Œç¢°æ’æ£€æµ‹èƒ½åŠ›</li>
</ul>
</li>
<li>
<p><strong>çŠ¶æ€ç®¡ç†</strong></p>
<ul>
<li><code>on</code>ï¼šçªå‡ºï¼Œè§¦ç¢°é€ æˆä¼¤å®³</li>
<li><code>off</code>ï¼šæ”¶èµ·ï¼Œä¸é€ æˆä¼¤å®³</li>
</ul>
</li>
<li>
<p><strong>ä¼¤å®³é€»è¾‘</strong></p>
<ul>
<li><code>attemptDamage(hero)</code>ï¼šä¿è¯æ¯å‘¨æœŸåªé€ æˆä¸€æ¬¡ä¼¤å®³</li>
</ul>
</li>
<li>
<p><strong>å‘¨æœŸåˆ‡æ¢</strong></p>
<ul>
<li><code>_toggle()</code> åœ¨å›ºå®š <code>period</code> æ—¶é—´é—´éš”å†…åˆ‡æ¢çŠ¶æ€ï¼Œå¹¶æ›´æ–°è´´å›¾</li>
</ul>
</li>
</ul>
<h4 data-id="heading-36">4. åŠ è½½åœ°åˆº</h4>
<pre><code class="hljs language-dart" lang="dart">    <span class="hljs-comment">// my_game.dart</span>
    
    <span class="hljs-comment">// ---- å¤„ç† thorn ä¸­çš„è†æ£˜ ----</span>
    <span class="hljs-keyword">final</span> thornLayer = tiled.tileMap.getLayer&lt;ObjectGroup&gt;(<span class="hljs-string">'thorn'</span>);
    <span class="hljs-keyword">if</span> (thornLayer != <span class="hljs-keyword">null</span>) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">final</span> obj <span class="hljs-keyword">in</span> thornLayer.objects) {
        <span class="hljs-keyword">if</span> (obj.properties[<span class="hljs-string">'type'</span>]?.value == <span class="hljs-string">'thorn'</span>) {
          <span class="hljs-keyword">final</span> status = obj.properties[<span class="hljs-string">'status'</span>]!.value <span class="hljs-keyword">as</span> <span class="hljs-built_in">String</span>;
          <span class="hljs-keyword">final</span> x = mapScale * obj.x;
          <span class="hljs-keyword">final</span> y = mapScale * obj.y;
          <span class="hljs-keyword">final</span> w = mapScale * obj.width;
          <span class="hljs-keyword">final</span> h = mapScale * obj.height;
          <span class="hljs-keyword">final</span> thornComponent = ThornComponent(
            status: status,
            position: Vector2(x, y),
            size: Vector2(w, h),
          );
          thornComponent.debugMode = <span class="hljs-keyword">true</span>;
          <span class="hljs-keyword">await</span> world.add(thornComponent);
        }
      }
    }
</code></pre>
<h4 data-id="heading-37">5. å®Œå–„é€»è¾‘</h4>
<p>åœ¨ <code>HeroComponent</code> ä¸­, å®ç°äº†è§’è‰² <strong>ç”Ÿå‘½å€¼ç®¡ç† + æ­»äº¡åˆ¤å®š</strong> çš„åŠŸèƒ½ï¼š</p>
<ul>
<li>
<p>å¢åŠ  <code>hp</code> å±æ€§ï¼Œè®°å½•è§’è‰²ç”Ÿå‘½å€¼</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ç”Ÿå‘½å€¼</span>
<span class="hljs-built_in">int</span> hp = <span class="hljs-number">5</span>;
</code></pre>
</li>
<li>
<p><code>loseHp(amount)</code>ï¼šè¢«åœ°åˆºç­‰éšœç¢ä¼¤å®³æ—¶è°ƒç”¨ï¼Œæ‰£é™¤ç”Ÿå‘½å€¼å¹¶æ˜¾ç¤ºæç¤º</p>
<pre><code class="hljs language-dart" lang="dart"> <span class="hljs-keyword">void</span> loseHp(<span class="hljs-built_in">int</span> amount) {
     hp = hp - amount;
     <span class="hljs-keyword">if</span> (hp &lt;= <span class="hljs-number">0</span>) {
       UiNotify.showToast(game, <span class="hljs-string">'æ­»äº¡'</span>);
     } <span class="hljs-keyword">else</span> {
       UiNotify.showToast(game, <span class="hljs-string">'HP -<span class="hljs-subst">$amount</span>  å‰©ä½™ <span class="hljs-subst">$hp</span>'</span>);
     }
 }
</code></pre>
</li>
<li>
<p>å½“ <code>hp &lt;= 0</code>ï¼šè§¦å‘ <code>gameOver()</code></p>
<ul>
<li>æ’­æ”¾æ­»äº¡åŠ¨ç”»</li>
<li>2 ç§’åæ˜¾ç¤ºé‡æ–°å¼€å§‹å¼¹çª—</li>
</ul>
<pre><code class="hljs language-dart" lang="dart">  Future&lt;<span class="hljs-keyword">void</span>&gt; gameOver() <span class="hljs-keyword">async</span> {
    <span class="hljs-keyword">if</span> (_isGameOver) <span class="hljs-keyword">return</span>;
    _isGameOver = <span class="hljs-keyword">true</span>;

    <span class="hljs-comment">// æ’­æ”¾æ­»äº¡åŠ¨ç”»</span>
    <span class="hljs-keyword">if</span> (animations.containsKey(HeroState.dead)) {
      _setState(HeroState.dead);
    }

    <span class="hljs-comment">// ç­‰å¾… 2 ç§’ï¼Œè®©æ­»äº¡åŠ¨ç”»æ’­æ”¾</span>
    <span class="hljs-keyword">await</span> Future.delayed(<span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(seconds: <span class="hljs-number">2</span>));

    <span class="hljs-comment">// æ˜¾ç¤ºé‡æ–°å¼€å§‹å¼¹çª—</span>
    <span class="hljs-keyword">final</span> exists = game.camera.viewport.children
        .query&lt;RestartOverlay&gt;()
        .isNotEmpty;
    <span class="hljs-keyword">if</span> (!exists) {
      game.camera.viewport.add(RestartOverlay());
    }
  }
</code></pre>
</li>
</ul>
<h3 data-id="heading-38">å…«. æ€»ç»“ä¸å±•æœ›</h3>
<h4 data-id="heading-39">æ€»ç»“</h4>
<p>æœ¬ç« ä¸»è¦ä»‹ç»äº† <strong>Flutter&amp;Flame</strong> å¼€å‘ <strong>2Dåƒç´ æ¸¸æˆ</strong> å…³äº <code>äººç‰©ä¸åœ°å›¾å…ƒç´ äº¤äº’</code> çš„åŸºç¡€å®è·µã€‚<br/>
é€šè¿‡ä¸Šè¿°æ­¥éª¤ï¼Œæˆ‘ä»¬å®Œæˆäº†<code>å®ç®±ã€é’¥åŒ™ã€é—¨ å’Œ åœ°åˆº</code> è¿™å‡ ç±»å¸¸è§å…ƒç´ çš„äº¤äº’ ã€‚</p>
<p>æˆªè‡³ç›®å‰ä¸ºæ­¢ï¼Œæ¸¸æˆä¸»è¦åŒ…æ‹¬äº†ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li><strong>è§’è‰²ä¸åŠ¨ç”»</strong>ï¼šä½¿ç”¨ç²¾çµå›¾ (<code>SpriteSheet</code>) åˆ›å»ºè§’è‰²ï¼Œæ”¯æŒ idle/run ç­‰åŠ¨ç”»çŠ¶æ€åˆ‡æ¢ã€‚</li>
<li><strong>ç©å®¶äº¤äº’</strong>ï¼šé€šè¿‡æ‘‡æ†æ§åˆ¶è§’è‰²ç§»åŠ¨ï¼Œå¹¶æ ¹æ®æ–¹å‘ç¿»è½¬åŠ¨ç”»ã€‚</li>
<li><strong>åœ°å›¾åŠ è½½</strong>ï¼šé€šè¿‡ <code>Tiled</code> ç»˜åˆ¶å¹¶åœ¨ <strong>Flame</strong> ä¸­åŠ è½½çš„ <strong>2dåƒç´ åœ°å›¾</strong>ã€‚</li>
<li><strong>åœ°å›¾äº¤äº’</strong>ï¼šé€šè¿‡ç»„ä»¶åŒ–æ¨¡å¼ï¼Œæ–°å»ºäº†å¤šä¸ªå¯ä¾›äº¤äº’çš„ç»„ä»¶å¦‚ï¼ˆ<strong>é—¨ã€é’¥åŒ™ã€å®ç®±ã€åœ°åˆº</strong>ï¼‰ï¼Œä¸ºæ¸¸æˆå¢åŠ äº†äº’åŠ¨æ€§ã€‚</li>
<li><strong>ç»Ÿä¸€ç¢°æ’åŒºæ£€æµ‹</strong>ï¼šå°†è§’è‰²ä¸ <strong>éœ€è¦äº§ç”Ÿç¢°æ’</strong> çš„ç‰©ä½“ç»Ÿä¸€ç®¡ç†ï¼Œå¹¶å®ç°ç¢°æ’æ—¶çš„ <strong>å¹³æ»‘ä¾§ç§»</strong>ã€‚</li>
</ul>
<h4 data-id="heading-40">å±•æœ›</h4>
<ul>
<li>
<p>æ€è€ƒ ğŸ¤” ä¸€ä¸ªæœ‰è¶£çš„æ¸¸æˆæœºåˆ¶ing ...</p>
</li>
<li>
<p>å®Œæˆæ”»å‡»ä¸æŠ€èƒ½ç³»ç»Ÿï¼ŒåŒ…æ‹¬åŠ¨ç”»åˆ‡æ¢ã€æ”»å‡»èŒƒå›´å’Œè¿œç¨‹å¼¹é“ã€‚</p>
</li>
<li>
<p>å®ç°æ€ªç‰©ç”Ÿæˆã€è‡ªåŠ¨æ”»å‡»ä¸ç©å®¶ç¢°æ’é€»è¾‘ã€‚</p>
</li>
<li>
<p>æ”¯æŒå±€åŸŸç½‘å¤šç©å®¶è”æœºåŠŸèƒ½ã€‚</p>
</li>
</ul>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FTheSyart%2Fmyhero" target="_blank" title="https://github.com/TheSyart/myhero" ref="nofollow noopener noreferrer">ğŸšª github æºç </a><br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.shanchen.space" target="_blank" title="https://www.shanchen.space" ref="nofollow noopener noreferrer">ğŸ’» ä¸ªäººé—¨æˆ·ç½‘ç«™</a></p>
</blockquote>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/48d840c0943b48dc974afc9d4952fefd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-Wkp-WtpueJsg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1766474758&amp;x-signature=GWSVzBzfNRh6Jy7VO4lICC%2FHyq4%3D" width="100%" loading="lazy"/></p><p/>
<p align="center"><i>ä¹‹å‰å°è¯•çš„Demoé¢„è§ˆ</i></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>